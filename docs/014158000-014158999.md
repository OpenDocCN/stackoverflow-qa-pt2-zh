# StackOverflow 问答 14158000-14158999

# java - 在 AChartEngine 中调用 remove(index)

> ID：14158008
> 
> 赞同：1
> 
> 时间：2013-01-04T13:22:09.790
> 
> 标签：java, android, achartengine

我在使用 AChartEngine 库时遇到问题。在 XYSeries 的实例上调用 remove(index) 会产生空指针异常。这很奇怪，因为我知道该系列存在并且在崩溃之前显示了设定的计数。

```
public View addDataView(){

    int datasetCount = dataset.getSeriesAt(0).getItemCount();
    XYSeries seriesA = dataset.getSeriesAt(0);
    XYSeries seriesB = dataset.getSeriesAt(1);

    /** Enforce max data points on the displayed chart */
    if (datasetCount > maximumDataPoints - 1) {
        System.out.println("SizeOfSeries: "+seriesA.getItemCount());

        seriesA.remove(0);
        seriesB.remove(0);
            }

    //d.getTime() format: 1357120800000
    seriesA.add(new Date().getTime(), 20 + new Random().nextInt() % 100); // PR // TODO
    seriesB.add(new Date().getTime(), 20 + new Random().nextInt() % 100); // BO // TODO;

    dataset = new XYMultipleSeriesDataset();
    dataset.addSeries(seriesA);
    dataset.addSeries(seriesB);

    autoscroll();

    return ChartFactory.getTimeChartView(context, dataset, renderer, "`ss h:mm a");
} 
```

这是相关的 logcat 输出：

```
01-04 14:16:31.806: I/System.out(25215): SizeOfSeries: 20
01-04 14:16:31.806: D/AndroidRuntime(25215): Shutting down VM
01-04 14:16:31.806: W/dalvikvm(25215): threadid=1: thread exiting with uncaught exception (group=0x410fa300)
01-04 14:16:31.806: E/AndroidRuntime(25215): FATAL EXCEPTION: main
01-04 14:16:31.806: E/AndroidRuntime(25215): java.lang.NullPointerException
01-04 14:16:31.806: E/AndroidRuntime(25215):    at org.achartengine.model.XYSeries.getY(XYSeries.java:169)
01-04 14:16:31.806: E/AndroidRuntime(25215):    at org.achartengine.model.XYSeries.initRange(XYSeries.java:83)
01-04 14:16:31.806: E/AndroidRuntime(25215):    at org.achartengine.model.XYSeries.remove(XYSeries.java:140)
01-04 14:16:31.806: E/AndroidRuntime(25215):    at charts.Chart.addDataView(Chart.java:75)
01-04 14:16:31.806: E/AndroidRuntime(25215):    at com.example.pml.PulseRateActivity$ChartThread.onProgressUpdate(PulseRateActivity.java:68)
01-04 14:16:31.806: E/AndroidRuntime(25215):    at com.example.pml.PulseRateActivity$ChartThread.onProgressUpdate(PulseRateActivity.java:1)
01-04 14:16:31.806: E/AndroidRuntime(25215):    at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:647)
01-04 14:16:31.806: E/AndroidRuntime(25215):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-04 14:16:31.806: E/AndroidRuntime(25215):    at android.os.Looper.loop(Looper.java:137)
01-04 14:16:31.806: E/AndroidRuntime(25215):    at android.app.ActivityThread.main(ActivityThread.java:4898)
01-04 14:16:31.806: E/AndroidRuntime(25215):    at java.lang.reflect.Method.invokeNative(Native Method)
01-04 14:16:31.806: E/AndroidRuntime(25215):    at java.lang.reflect.Method.invoke(Method.java:511)
01-04 14:16:31.806: E/AndroidRuntime(25215):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
01-04 14:16:31.806: E/AndroidRuntime(25215):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
01-04 14:16:31.806: E/AndroidRuntime(25215):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T12:46:28.323

我也有同样的问题。最初，如果您删除了一个 Max/Min 点，则问题来自 initRange()。但是在评论 initRange 之后，我仍然在'double removedY = removedEntry.getValue();' 行上得到一个空指针 删除（）。它看起来像 mXY.removeByIndex(index); 返回一个值设置为 null 的元素，但我不知道为什么。

我正在运行 subversion 上可用的最新版本。在我看来，这可能是某种竞争条件，因为它不会总是同时失败。我构建了一个“滑动窗口”循环，在该循环中我在图表上保持给定数量的恒定点。在这个例子中，它只有 3，所以在第 3 点之后，每次我添加一个时，我都会删除另一个。起初日志看起来很正常：

```
01-11 23:06:48.060: E/AChartGraph(2038): Added 1 item.  getIndexForKey: 0
01-11 23:06:48.060: E/AChartGraph(2038): series1.getItemCount(): 1
01-11 23:06:48.060: E/AChartGraph(2038): Added 1 item.  getIndexForKey: 1
01-11 23:06:48.060: E/AChartGraph(2038): series1.getItemCount(): 2
01-11 23:06:48.160: E/AChartGraph(2038): Added 1 item.  getIndexForKey: 2
01-11 23:06:48.160: E/AChartGraph(2038): series1.getItemCount(): 3
01-11 23:06:48.160: E/AChartGraph(2038): Removed item 0\. series1.getItemCount(): 2
01-11 23:06:48.160: E/AChartGraph(2038): Added 1 item.  getIndexForKey: 2
01-11 23:06:48.160: E/AChartGraph(2038): series1.getItemCount(): 3
01-11 23:06:48.160: E/AChartGraph(2038): Removed item 0\. series1.getItemCount(): 2
01-11 23:06:48.160: E/AChartGraph(2038): Added 1 item.  getIndexForKey: 2
01-11 23:06:48.160: E/AChartGraph(2038): series1.getItemCount(): 3
01-11 23:06:48.160: E/AChartGraph(2038): Removed item 0\. series1.getItemCount(): 2
01-11 23:06:48.160: E/AChartGraph(2038): Added 1 item.  getIndexForKey: 2
01-11 23:06:48.160: E/AChartGraph(2038): series1.getItemCount(): 3 
```

这种情况一直持续下去，直到发生这种情况：

```
01-11 23:06:55.300: E/AChartGraph(2038): Added 1 item.  getIndexForKey: 2
01-11 23:06:55.300: E/AChartGraph(2038): series1.getItemCount(): 3
01-11 23:06:55.300: E/AChartGraph(2038): Removed item 0\. series1.getItemCount(): 2
01-11 23:06:55.300: E/AChartGraph(2038): Added 1 item.  getIndexForKey: 1
01-11 23:06:55.300: E/AChartGraph(2038): series1.getItemCount(): 2
01-11 23:06:55.300: E/AChartGraph(2038): Removed item 0\. series1.getItemCount(): 1
01-11 23:06:55.300: E/AChartGraph(2038): Added 1 item.  getIndexForKey: 2
01-11 23:06:55.300: E/AChartGraph(2038): series1.getItemCount(): 2
01-11 23:06:55.300: W/dalvikvm(2038): threadid=14: thread exiting with uncaught exception (group=0x40bfb930)
01-11 23:06:55.320: E/AndroidRuntime(2038): FATAL EXCEPTION: AsyncTask #4
01-11 23:06:55.320: E/AndroidRuntime(2038): java.lang.RuntimeException: An error occured while executing doInBackground()
01-11 23:06:55.320: E/AndroidRuntime(2038):     at android.os.AsyncTask$3.done(AsyncTask.java:299)
01-11 23:06:55.320: E/AndroidRuntime(2038):     at java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:352)
01-11 23:06:55.320: E/AndroidRuntime(2038):     at java.util.concurrent.FutureTask.setException(FutureTask.java:219)
01-11 23:06:55.320: E/AndroidRuntime(2038):     at java.util.concurrent.FutureTask.run(FutureTask.java:239)
01-11 23:06:55.320: E/AndroidRuntime(2038):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
01-11 23:06:55.320: E/AndroidRuntime(2038):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
01-11 23:06:55.320: E/AndroidRuntime(2038):     at java.lang.Thread.run(Thread.java:856)
01-11 23:06:55.320: E/AndroidRuntime(2038): Caused by: java.lang.NullPointerException
01-11 23:06:55.320: E/AndroidRuntime(2038):     at org.achartengine.model.XYSeries.getY(XYSeries.java:169)
01-11 23:06:55.320: E/AndroidRuntime(2038):     at org.achartengine.model.XYSeries.initRange(XYSeries.java:83)
01-11 23:06:55.320: E/AndroidRuntime(2038):     at org.achartengine.model.XYSeries.remove(XYSeries.java:140)
01-11 23:06:55.320: E/AndroidRuntime(2038):     at com.mbev.android.Tmty.Helpers.AChartGraph.addAndPrune(AChartGraph.java:226)
01-11 23:06:55.320: E/AndroidRuntime(2038):     at com.mbev.android.Tmty.DashboardFragment$startUpdateTmtyThread.doInBackground(DashboardFragment.java:284)
01-11 23:06:55.320: E/AndroidRuntime(2038):     at com.mbev.android.Tmty.DashboardFragment$startUpdateTmtyThread.doInBackground(DashboardFragment.java:1)
01-11 23:06:55.320: E/AndroidRuntime(2038):     at android.os.AsyncTask$2.call(AsyncTask.java:287)
01-11 23:06:55.320: E/AndroidRuntime(2038):     at java.util.concurrent.FutureTask.run(FutureTask.java:234)
01-11 23:06:55.320: E/AndroidRuntime(2038):     ... 3 more 
```

请注意，添加点的索引是如何突然变为 1 而不是 2，并且 itemCount 也下降到 2，我们刚刚失去了一个点！如果我们用更多的点来测试它需要更长的时间，并且我们会看到我们逐渐开始“失去”点的日志，直到它在 XYSeries.getY 上崩溃。我相信它正试图删除早些时候神秘消失的那些点之一。

**编辑 1：** 在这种情况下，我正在绘制一个时间序列，当我使用相同的键（在这种情况下为日期）添加 2 个点时出现错误。**remove 函数会删除给定键的所有点，但不确定它是有意的还是错误的。**但这很可能与您遇到的错误相同。

# asp.net - 在文件目录中创建后在页面上显示自定义生成的图像

> ID：14158012
> 
> 赞同：0
> 
> 时间：2013-01-04T13:22:13.727
> 
> 标签：asp.net, gdi+, system.drawing

我在 ASP.NET 中使用 System.Drawing 根据用户在表单中输入的内容生成自定义图像。此图像一旦生成，将保存在服务器上的目录中。

我想要发生的是在单独的页面上显示一个加载图标（在用户提交表单之后），一旦生成自定义图像，加载图标将被服务器目录中的图像替换。

你们中的一些人可能会建议我使用通用处理程序 (.ashx) 将图像显示为`<img />`标签内的 JPEG。但我遇到的问题是，如果用户右键单击要保存的图像，它将被保存为 .ashx 文件。

我遇到的问题是不知道在文件目录中成功创建图像后如何刷新页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T15:32:49.193

有很多不同的方法可以实现这一点，但这是我个人会做的。首先，我将创建我的处理程序来接收将生成图像的表单提交（您用于生成图像的数据）（我不会亲自将文件保存到服务器，但如果您希望）并将其编码为 base64，使用我的处理程序使用[JSON](http://www.json.org/)返回此字符串。

```
public void ProcessRequest (HttpContext context)
{
    // generate the image from POST / GET data sent to this handler from your form
    Bitmap bmp = GenerateImage(postData);

    // now convert your generated image to a base64 string
    string base64 = string.Empty;
    using (MemoryStream ms = new MemoryStream())
    {
        bmp.Save(ms, ImageFormat.Png);
        base64 = Convert.ToBase64String(ms);
    }

    // now return this base64 string to the caller
    context.Response.ContentType = "application/json";
    string json = "{ \"imageBase64\": \"" + base64 + "\" }";
    context.Response.Write(json);
} 
```

在客户端，我将使用 jQuery 并对我的处理程序进行 Ajax 调用，以 POST/GET 表单数据并检索 base64 编码图像的字符串，然后设置`src`我的`img`html 标记的属性。

```
function postAndRetrieveImage() {
    $.ajax({
        url: "http://server/myhandler.ashx",
        data: jsonDataParsedFromForm,
        dataType: "json",
        type: "POST",
        contentType: "application/json",
        async: true,
        cache: false,
        beforeSend: function() {
            // overlay your "loading..." image or something while you wait
            // for response from the server
        },
        complete: function() {
            // hide your "loading..." image (or whatever it is) as the operation
            // has completed
        },
        success: function(data) {
            var response = jQuery.parseJSON(data.d);

            // set the src attribute of the IMG tag (prefixed with the usual 
            // image stuff) with the base64
            var image = document.getElementById("myImage");
            image.setAttribute("src", "data:image/png;base64," + response.imageBase64);
        },
        error: function() {
            // display error in some way
        }
    });
} 
```

就像我说的，有很多方法可以实现这一点，所以这个粗糙（未经测试）的例子是我这样做的方法之一。拥有`IMG`标签应该允许他们右键单击保存图像。

希望这有助于作为一个起点。

# python - 在 Python 中支持从 http 响应中查找的非阻塞流

> ID：14158013
> 
> 赞同：6
> 
> 时间：2013-01-04T13:22:14.080
> 
> 标签：python, http, io, stream, nonblocking

我有来自 urllib 的 http 响应

```
response = urllib2.urlopen('http://python.org/') 
```

最终，我希望能够`seek()`在响应中（至少在开始时）。所以我希望能够拥有这样的代码：

```
print result.readline()
result.seek(0)
print result.readline() 
```

这个问题最简单的解决方案是`StringIO`这样`io.BytesIO` 的：

```
result = io.BytesIO(response.read()) 
```

然而，问题是我想要请求的资源往往非常大，我想在整个下载完成之前开始使用它们（解析......）。`response.read()`正在阻塞。我正在寻找一个非阻塞的解决方案。

理想的代码将`read(BUFFER_SIZE)`来自资源，每当需要更多内容时，只需从响应中请求更多内容。我基本上是在寻找一个可以做到这一点的包装类。哦，我需要一个像对象这样的文件。

我想，我可以写这样的东西：

```
base = io.BufferedIOBase(response)
result = io.BufferedReader(base) 
```

但是，事实证明这不起作用，我尝试了[io 模块](http://docs.python.org/2/library/io.html)中的不同类，但无法使其正常工作。我对任何具有所需行为的包装类感到满意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T22:26:00.547

我编写了自己的包装类，它保留了第一块数据。这样我可以回到开头，分析编码，文件类型和其他东西。这个类为我解决了这个问题，并且应该足够简单以适应其他用例。

```
class BufferedFile(object):
    ''' A buffered file that preserves the beginning of a stream up to buffer_size
    '''
    def __init__(self, fp, buffer_size=1024):
        self.data = cStringIO.StringIO()
        self.fp = fp
        self.offset = 0
        self.len = 0
        self.fp_offset = 0
        self.buffer_size = buffer_size

    @property
    def _buffer_full(self):
        return self.len >= self.buffer_size

    def readline(self):
        if self.len < self.offset < self.fp_offset:
            raise BufferError('Line is not available anymore')
        if self.offset >= self.len:
            line = self.fp.readline()
            self.fp_offset += len(line)

            self.offset += len(line)

            if not self._buffer_full:
                self.data.write(line)
                self.len += len(line)
        else:
            line = self.data.readline()
            self.offset += len(line)
        return line

    def seek(self, offset):
        if self.len < offset < self.fp_offset:
            raise BufferError('Cannot seek because data is not buffered here')
        self.offset = offset
        if offset < self.len:
            self.data.seek(offset) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-04T19:48:15.147

使用[Requests](http://docs.python-requests.org/en/latest/)库，您可以迭代正在[流式传输](http://docs.python-requests.org/en/latest/user/advanced/#streaming-requests)的响应：

> 要使用 Twitter 流 API 来跟踪关键字“请求”：

```
import requests
import json

r = requests.post('https://stream.twitter.com/1/statuses/filter.json',
    data={'track': 'requests'}, auth=('username', 'password'), stream=True)

for line in r.iter_lines():
    if line: # filter out keep-alive new lines
        print json.loads(line) 
```

为了能够寻找你必须保存你已经迭代（读取）的数据。

# c++ - 如何使用 unicode 文件名 c++ 读取二进制文件？

> ID：14158018
> 
> 赞同：10
> 
> 时间：2013-01-04T13:22:48.010
> 
> 标签：c++, unicode, c++11, ifstream

在我正在进行的项目中，我处理了很多字符串操作；从二进制文件中读取字符串及其编码（可以是单字节或双字节）。本质上，我将字符串值读取为`vector<char>`，读取编码，然后将所有字符串转换为`wstring`，以保持一致性。

这工作得相当好，但是文件名本身可以是双字节字符。我完全不知道如何实际打开输入流。在 CI 中会使用`_wfopen`函数传递`wchar_t* path`，但`wifstream`似乎表现不同，因为它专门用于从文件中读取双字节字符，而不是从具有双字节文件名的文件中读取单字节。

这个问题的解决方案是什么？

**编辑：**在网上搜索，标准 C++ 中似乎根本不支持此功能（例如，请参阅[此讨论](http://www.cplusplus.com/forum/general/8080/)）。但是我想知道 C++11 是否真的在这个领域添加了一些有用的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T14:00:15.653

您传递给 open 的字符串如何映射到文件名取决于实现。在 Unix 环境中，它几乎是按字面意思传递的——只是`'/'`被`'\0'`特殊对待。在其他环境中，其他规则规则，并且我过去遇到过问题，因为我在 Unix 中编写了一个文件，并且在 Windows 下无法对它做任何事情（它`':'` 特别对待文件名中的 a ）。

另一个问题是这些文件来自哪里。如上所述，可能绝对无法在您的系统上打开它们：带有 的文件名`':'`根本无法在 Windows 中打开。在 Unix 中，如果文件名本身包含字符，您可能也无法读取它们，并且 UTF16 文件名在 Unix 下`'\0'`似乎包含字符。`'\0'`您唯一的解决方案可能是在生成文件的系统上使用本机工具来重命名它们。

首先，我不太清楚如何在 Unix 磁盘上获得这样的文件名。SMB 服务器（如 Samba）在 Windows 机器上服务时如何映射 UTF16 文件名？或者 NFS 服务器——我认为 Windows 下也存在这样的东西。

# java - 插入 CData XML 解析 Java 字符串

> ID：14158023
> 
> 赞同：1
> 
> 时间：2013-01-04T13:23:16.797
> 
> 标签：java, xml, xml-parsing, sax

我有一个包含 XML 的 java 字符串。我想通读这个 Java String 包装 CData 中的所有文本节点，只是我不知道该怎么做。这样做的原因是这是一个包含尖括号的文本节点，当我尝试解析字符串时会导致异常。任何人都可以帮助我吗？

```
<node> this < is text <node> <node2> this is < text <node2> 
```

我想知道是否有一种简单的方法可以使用 XMLReader 将此文本作为字符串读取并在文本周围插入 CData

谢谢

斯特凡

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T14:02:08.567

也许是这样的（提前为任何低效率道歉：

```
if(currentNode instanceof XMLNodeType.Text)  
{  
     String toWrite = String.format("<![CDATA[%s]]>", currentNode.getText());   
     // or whatever retrieves text of the node
} 
```

看起来您需要将数据按摩为有效的 XML。这个过程当然高度依赖于您的输入。所以基本上发生的事情是您收到一个需要将其转换为有效 XML 的大字符串。这里的好处是您可以定义第三方遵守的模式，这是与他们的会议，因此不在讨论范围内，但值得一提。一旦你定义了这个模式，你就会知道哪些节点被认为是“文本”节点并且需要被包裹在`CDATA`块中。

基本思想是这样的：

```
List<String> textTags = new ArrayList<String>();  
textTags.add("NODE");  
//other things to add
String bigAwfulString = inputFromThirdParty();   
String validXML = ""; 
for(String currentNode : bigAwfulString.split("yourRegexHere")  
{  
    if(textTags.contains(currentNode)  
    {  
           validXML+=String.format("<![CDATA[%s]]>", currentNode.getText());    
           continue;
    }   
    validXML+=currentNode;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-03T14:49:05.570

试试这个，它对我有用。
[http://www.java2s.com/Code/Java/XML/AddingaCDATASectiontoaDOMDocument.htm](http://www.java2s.com/Code/Java/XML/AddingaCDATASectiontoaDOMDocument.htm)

```
import java.io.File;

import javax.xml.parsers.DocumentBuilderFactory;

import org.w3c.dom.CDATASection;
import org.w3c.dom.Document;
import org.w3c.dom.Element;

public class Main {
  public static void main(String[] argv) throws Exception {

    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
    factory.setValidating(true);

    factory.setExpandEntityReferences(false);

    Document doc = factory.newDocumentBuilder().parse(new File("filename"));
    Element element = doc.getElementById("key1");

    // Add a CDATA section to the root element
    element = doc.getDocumentElement();
    CDATASection cdata = doc.createCDATASection("data");
    element.appendChild(cdata);

  }
} 
```

# google-maps-api-3 - Google Maps api：折线路径

> ID：14158024
> 
> 赞同：0
> 
> 时间：2013-01-04T13:23:19.743
> 
> 标签：google-maps-api-3

```
var symbolOne = {
  path: 'M -2,0 0,-2 2,0 0,2 z',
  strokeColor: '#F00',
  fillColor: '#F00',
  fillOpacity: 1
}; 
```

这个工作完美，但我不知道'M -2,0 0,-2 2,0 0,2 z'是什么意思，以及它会做什么。请有人帮助我理解这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T13:40:23.983

从[文档](https://developers.google.com/maps/documentation/javascript/overlays#Symbols)

```
M -2,0 0,-2 2,0 0,2 z' 
```

是[SVG 路径表示法](http://www.w3.org/TR/SVG/paths.html#PathData)

# php - 禁用注入

> ID：14158026
> 
> 赞同：-3
> 
> 时间：2013-01-04T13:23:28.040
> 
> 标签：php, html, css

> **可能重复：**
> [如何正确转义 php 中的 html 表单输入默认值？](https://stackoverflow.com/questions/6249151/how-to-properly-escape-html-form-input-default-values-in-php)

我目前正在使用：

```
if (isset($_GET['b']))
{
  $bb = $_GET['b'];
  echo 'found';
}
else
{
  $bb = 'white';
  echo 'notfound';
} 
```

和

```
<body bgcolor="<?php echo $bb; ?>"> 
```

要允许用户设置页面的颜色，避免注入最安全的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T13:26:29.280

假设您期待一种颜色，您可以使用正则表达式来表示十六进制颜色：

```
^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$ 
```

以及 17 种标准颜色的列表：水绿色、黑色、蓝色、紫红色、灰色、灰色、绿色、石灰、栗色、海军蓝、橄榄色、紫色、红色、银色、蓝绿色、白色和黄色：

```
$standards = array(
    'aqua',
    'black',
    'blue',
    'fuchsia',
    'gray',
    'grey',
    'green',
    'lime',
    'maroon',
    'navy',
    'olive',
    'purple',
    'red',
    'silver',
    'teal',
    'white',
    'yellow'
);

if (in_array($bb, $standards) or preg_match('/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/', $bb)) {
    // valid
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T13:27:36.310

您始终可以验证`$bb`仅由 组成`a-zA-Z0-9`，这将使其与单字颜色名称（例如`white`, `black`, `grey`）以及十六进制颜色代码（没有前导`#`）一起使用。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T13:27:45.937

使用它来转义特殊字符和引号：

```
<body bgcolor="<?php echo htmlspecialchars($bb, ENT_QUOTES); ?>"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T13:30:25.213

这些正则表达式可以验证您需要什么。你可以[在这里查看](http://codepad.viper-7.com/wF6qEL)。

```
// match ffffff & fff
if (!preg_match('/^([a-fA-F0-9]{3}|[a-fA-F0-9]{6})$/i', $bb, $matches_bb2)) {
  $color = $bb;
}

// check other color
preg_match('/[\w]+/i', $bb, $matches_bb);

// not a valid string (means no space, no accent, etc ..)
if (isset($matches_bb[0]) && $matches_bb[0] != $bb) {
  $bb = 'white';
} 
```

# android - 如何通过其值获取字符串资源名称

> ID：14158032
> 
> 赞同：4
> 
> 时间：2013-01-04T13:23:49.013
> 
> 标签：android, resources

我想通过传递其值来获取字符串资源名称或 ID。
例子 ：

```
 <string name="stringName">stringValue</string> 
```

我想传递 stringValue 并获取 stringName 或 ID（id 值）

基于 ID，我将进行一些计算以获取另一个 String 资源的另一个 ID

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T13:26:44.213

我不知道这是否可能，并且我认为如果新生成 R 类，ID 可能会在没有警告的情况下更改。你当然可以在这门课上尝试一些反射魔法，但我建议不要这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-10T11:23:29.653

我也有这个问题，可以想到两种可能的解决方法：

*   将所有字符串及其名称加载到表中，然后查看表。
*   或者循环浏览我的完整名称列表，获取每个名称的字符串资源，并将其与我已知的字符串资源进行比较。

我正在实施第二个，因为我的字符串资源列表不是很大，而且我不必经常执行此操作。一旦知道名称，就可以通过以下方式获取资源 ID：

```
//Get resource id from name
    var resourceId = (int) typeof (MyApp_droid.Resource.String).GetField(MyStringName).GetValue(null); 
```

（代码是 C#，因为我在 Xamarin 中工作）。

# javascript - 如何从文本字段内容形成数组，并将该数组作为序列化表单数据传递？

> ID：14158033
> 
> 赞同：0
> 
> 时间：2013-01-04T13:23:51.727
> 
> 标签：javascript, jquery, html

我有一个文本字段：`<input type="text" class="field blink" name="j-state[]" id="j-state"/>`

其中的数据将是一个以逗号分隔的状态列表，例如`New York,New Jersey`.

我`serialize()`用来获取表单的数据。我想形成这些状态的数组，并将数组与序列化数据一起传递。

任何人都可以帮助我实现这一目标吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T14:38:22.520

我不想用破折号来处理你的名字，所以我将它重命名为：（如果你愿意，你可以自己处理这个问题）

```
<form id="myform">
<input type="text" class="field blink" name="jstate[]" id="jstate"/>
</form> 
```

从此问题答案中获取一些代码：[Convert form data to JavaScript object with jQuery](https://stackoverflow.com/questions/1184624/convert-form-data-to-js-object-with-jquery)

然后这样做：

```
$('#jstate').val('New Yourk, Fridaay Town,Frenchville');
var jd = $('#myform').serializeObject();
var ms = jd.jstate[0].split(",");
alert(ms[1]);// alerts " Friday Town" 
```

然后，您可以使用`toJSON()`（google that）正确地形成该 ms 对象并将其发送出去 - 我将把这个练习留给您。

最后，你可以玩一把小提琴：http: [//jsfiddle.net/MHVeC/](http://jsfiddle.net/MHVeC/)

# python - Python中的模糊逻辑

> ID：14158043
> 
> 赞同：19
> 
> 时间：2013-01-04T13:24:59.293
> 
> 标签：python, fuzzy-logic

我正在 Python 中寻找一个好的模糊库，但我发现的那些没有得到维护，并且似乎没有添加创建模糊系统所需的一切。

这些是我目前发现的：PyFuzzy、Peach 和 Fuzzpy。

你知道有什么好的图书馆吗？如果没有，是否有任何 C#、Java 或 C++ 库？

# sql - Excel 2010 - 按电子表格过滤的数据库查询

> ID：14158050
> 
> 赞同：0
> 
> 时间：2013-01-04T13:25:48.740
> 
> 标签：sql, sql-server, excel, business-intelligence

我们有一个包含 10,000 个客户 ID 列表的电子表格。

我们还有一个 SQL Server 2008R2 数据库，它有一个客户表，包含 20,000,000 个客户，并包括客户 ID、名字、电子邮件等属性。

最好在 Excel 中，我想查询数据库并在我的电子表格中获取 10,000 个客户的名字和电子邮件。

我不想从数据库中带回所有 20,000,000 条记录，然后过滤 10,000 名客户，因为这对数据库来说太重了（返回 20,000,000 行）。

我试图找到一种在数据库查询中应用过滤谓词的方法来执行以下操作：

```
SELECT first_name, email 
FROM customers
WHERE customer_id IN (
SELECT customer_id FROM [Excel Spreadsheet]
) 
```

我无法`WHERE CUSTOMER_ID IN ( <comma seperated list of customer_ids> )`在查询中执行此操作，因为有 10,000 个客户 ID（整数），而且单个 SQL 语句中的字符数似乎有限制。

我有 PowerPivot，但如果不先带回 20 家工厂客户，就找不到办法。

我不想使用 VBA - 该解决方案需要对非技术最终用户可行。

有什么工具可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T14:54:21.840

抱歉，我是新手（您想听到的最后一件事），但我当前的项目类似，因为我将 Excel 连接到我的数据库并使用 SQL 调用特定查询以加载到我的 Excel 工作表中。有一个论坛的链接已经对此提出质疑。[http://community.spiceworks.com/topic/215327-using-column-data-from-excel-to-use-in-a-sql-query-statement](http://community.spiceworks.com/topic/215327-using-column-data-from-excel-to-use-in-a-sql-query-statement) 希望这与他们提供的答案有关根本不使用VBA，看起来很简单。

# android - 使用 ViewPager 更改选项卡时重新创建片段

> ID：14158056
> 
> 赞同：6
> 
> 时间：2013-01-04T13:26:21.937
> 
> 标签：android, android-fragments, android-viewpager

我有`ViewPager`4 个标签。

我正在使用扩展的自定义适配器`FragmentPagerAdapter`。

问题是当我更改选项卡时，第一个选项卡`Fragment`会再次创建，尽管它不是当前可见的。此外，这仅在第四次更改选项卡后才会发生。例如 tab1 -> tab2 -> tab3=> `onStop`from tab1 被调用。-> tab2 =>`onCreateView`从 tab1 被调用（`onAttach`不被调用）。

我想避免这种情况。我需要所有选项卡始终保持其状态，即使它们当前未显示也是如此。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-17T19:32:44.783

就像`setOffscreenPageLimit()`使用`ViewPager`.

更多信息： http: [//developer.android.com/reference/android/support/v4/view/ViewPager.html#setOffscreenPageLimit(int)](http://developer.android.com/reference/android/support/v4/view/ViewPager.html#setOffscreenPageLimit%28int%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-06T17:52:33.037

Viewpager 有一个名为**setOffScreenPageLimit**的公共方法，它指示在空闲状态下将保留到视图层次结构中当前页面任一侧的页面数。

活动：

```
 private SectionsPagerAdapter mSectionsPagerAdapter;
    private ViewPager mViewPager;

    @Override
    protected void onCreate(Bundle savedInstanceState) {

...

        mSectionsPagerAdapter = new SectionsPagerAdapter(getSupportFragmentManager());

        mViewPager = findViewById(R.id.container);
        mViewPager.setOffscreenPageLimit(3);  // change your number here
        mViewPager.setAdapter(mSectionsPagerAdapter); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T13:46:54.010

当您实例化片段时，调用`setRetainInstance(true)`. 这将保留片段的实例状态。`onCreateView`仍然会被调用，您需要确保重新使用已保存的状态并仅渲染视图而不再次加载任何数据，例如，使用 a`boolean`表示您的片段是否已被初始化。

你会做这样的事情：

```
public static class MyAdapter extends FragmentPagerAdapter {
       @Override
       public Fragment getItem(int position) {
               MyFragment myFragment = new MyFragment();
               myFragment.setRetainInstance(true);
               return myFragment;
       }
}

class MyFragment extends Fragment {
       .
       .
       .

       boolean initialized = false;
       ArrayList<MyData> myData = null;

       void onCreate(...) {
               if (initialized) {
                       renderViews();
               } else {
                       initialized = true;
                       loadData();
                       renderViews();
               }
       }
} 
```

您不需要实施`onSaveInstanceState()`. 它将被自动处理。

# java - 从邮政编码中选择前 1 或 2 个字母字符

> ID：14158057
> 
> 赞同：0
> 
> 时间：2013-01-04T13:26:25.430
> 
> 标签：java

我正在尝试为使用 Java 开发的第 3 方创建一个示例（我使用 C#），但这并没有按预期工作。我的机器上没有任何 Java IDE，所以我使用 Ideone.com 对其进行测试。

要求是将邮政编码的第一个字母部分（可以以 1 或 2 个字母字符开头）用于单独的查找。

因此，鉴于`MK34 8FD`我会期望`MK`并鉴于`S4 8BF`我会期望`S`。

```
String source = "MK34 8FD";
String working = source.substring(0, 2);
String postcode = "";

for (int i = 0; i < 2; i++) {
    String piece = working.substring(i, 1);
    if (piece.matches("[a-zA-Z]")) {
        postcode += piece;
    }
} 
```

使用上面的代码，`postcode`总是出现，`M`我不知道为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T13:27:38.367

第二个参数[`substring()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#substring%28int,%20int%29)是结束索引，而不是长度。

因此

```
String piece = working.substring(i, 1); 
```

需要改为

```
String piece = working.substring(i, i + 1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T13:32:17.133

```
String source = "MK34 8FD";
String postCode = "";
for(int i = 0; i < 2; i++){
    char currentChar = source.charAt(i);
    if(Character.isLetter(currentChar))
        postCode += currentChar;
} 
```

# google-chrome - chrome 打包应用程序的打印支持

> ID：14158062
> 
> 赞同：4
> 
> 时间：2013-01-04T13:26:35.430
> 
> 标签：google-chrome, printing, google-chrome-extension, package, google-chrome-app

我似乎在 chrome 打包应用程序中找不到任何 window.print() 支持的示例 - 有人可以发布一个示例吗？

我正在使用这个

```
function clickHandler(e) {
  window.print();
}
document.addEventListener('DOMContentLoaded', function () {
  document.querySelector('button').addEventListener('click', clickHandler);
}); 
```

来自“你好世界！” 示例平台应用程序，但我似乎无法让它工作。

我应该使用特殊的权限设置吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T21:33:16.303

是的，window.print() 适用于 Chrome 应用程序。[您可以在官方示例 repo](https://github.com/GoogleChrome/chrome-app-samples/tree/master/printing)中找到示例。

就像在应用程序的任何 DOM 窗口中调用 window.print() 一样简单：

```
 // prints the content of the current window:
  window.print();

  // prints the content of another AppWindow:
  anotherAppWindow.contentWindow.print() 
```

[AppWindow](http://developer.chrome.com/apps/app_window.html#type-AppWindow)是 Chrome 应用程序对象，它封装并扩展了具有应用程序功能的实际 DOM 窗口。该对象可以通过以下任一方式获得：

1.  从回调中保存参数`chrome.app.window.create`

2.  调用`chrome.app.window.current()`在所需窗口的上下文中运行的任何代码

# delphi - 快速报告 4.0。“未找到 Claas TfrxReport”异常 (RAD STUDIO XE2)

> ID：14158064
> 
> 赞同：1
> 
> 时间：2013-01-04T13:26:40.017
> 
> 标签：delphi, exception, fastreport

亲爱的 Stackoverflow 用户。我急需帮助。我一直在努力嵌入 FastReport 4.0 的 Embarcadero XE2 RAD 工作室版。更具体地说，我一遍又一遍地遇到同样的错误，这是神秘的“找不到类 TfrxReport”错误。下面我提交导致问题的部分代码

```
procedure TForm1.buildReport(Sender: TObject);
var
 DevicePic, SymbolPic: TfrxPictureView;
 TitleEntry, xmlField: TfrxMemoView;
 MasterDataBand: TfrxMasterData;

begin
if not ADOConnection1.Connected then
       ShowMessage('Cannot build Report! Please, connect to the DB!')
else

try
 //this is where the Class Not Found Exception is Thrown
 frxReport1.LoadFromFile('LibreportTemplate.fr3',True);
 // frxReport1.LoadFromFile('helloInfineonThree.fr3',True);

 if (frxDBDataset1 = nil) then frxDBDataset1 := TfrxDBDataset.Create(Self);
 // connect the report to the DATA
 frxDBDataset1.DataSource := DataSource1;
 frxReport1.DataSet := frxDBDataset1;
 except
     ShowMessage('Error has Occured! Report Template File Not Found!');
 // exit from this procedure!
     Exit;
 end;
 // If no errors have occured, go on building ur report by actually filling it up with data!

 // attach dataSet to the masterdata band of the report.
 MasterDataBand := frxReport1.FindObject('MasterData1') as TfrxMasterData;
 MasterDataBand.DataSet := frxDBDataset1;
 // prepare textfields
 TitleEntry := frxReport1.FindObject('TitleEntry') as TfrxMemoView;
 TitleEntry.DataSet := frxDBDataset1;
 TitleEntry.DataField := 'LibFName';

 xmlField := frxReport1.FindObject('xmlField') as TfrxMemoView;
 // stretch the field if text too big.
 xmlField.StretchMode := TfrxStretchMode.smActualHeight;
 //get the XML DATA FROM THE DB.
 xmlField.DataSet := frxDBDataset1;
 xmlField.DataField := 'LibFXML';

 // prepare images
 DevicePic := frxReport1.FindObject('ImageEntry') as TfrxPictureView;
 DevicePic.DataSet := frxDBDataset1;
 DevicePic.DataField := 'LIBFIMAGE';

 SymbolPic := frxReport1.FindObject('SymbolEntry') as TfrxPictureView;
 SymbolPic.DataSet := frxDBDataset1;
 SymbolPic.DataField := 'LibFSymbol';

 // build and display report
 frxReport1.PrepareReport();
 frxReport1.ShowPreparedReport;

 end; 
```

在构建和运行程序时，我收到以下错误消息“Cannot Find class TfrxReport”，并且在 DebugMode 中我收到以下警告：

> 项目“MyProject.exe”引发异常类 EClassNotFound，并带有消息“未找到类 TfrxReport”。

如上面代码中所述，执行 frxReport1.LoadFromFile('LibreportTemplate.fr3',True); 时会引发有问题的异常；命令。

我尝试了许多不同的方法来解决问题，包括在线搜索解决方案。这是我所做的：

在 Form OnCreate 和 OnClose 期间手动创建和销毁 frxReport1 对象 - 错误仍然存​​在

正如 FastReport 中的建议（我无法在 SO 上发布链接，原因是“抱歉，帖子不能包含该内容。”错误）论坛主题，替换 FastReport 4\LibD16 文件夹中的文件。- 错误仍然存​​在

重新编译 FastReport 4 RAD STUDIO 32 位版本 - 错误仍然存​​在 重新编译 FastReport 4 RAD STUDIO 64 位版本 - 错误仍然存​​在 重新安装 Embarcadero RAD Studio 和 FastReport 4 - 错误仍然存​​在

在 StackOVERFLOW 中提问 - ????

从快速报告论坛中的主题来看，问题和相应的解决方案似乎应该是（I QUOTE）：

> 此错误由 GroupDescendentsWith(TfrxReport, TControl); 代码。此代码从 FierMonkey 隐藏了 TfrxReport，并且由于某种原因，当您加载报告时（仅在 IDE 中）找不到 TfrxReport 类的“FindClass”函数。如果您无法加载报告或收到类似“找不到 TfrxReport”消息的错误，请将此“链接到文件”文件放入“Fast Report\LibD16”目录（全部替换）。

但是建议的方法不能解决问题！我该怎么办？有谁有想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-11-03T16:52:07.653

我也遇到过这个问题，我已经解决了这个问题，

*   创建一个新的 ProjectGroup 并添加适合您的 delphi 版本的 DPK（我使用 XE6）。您将看到 BPL 将分为运行时和设计。
*   开始编译运行时 fsX（X 表示版本）、fqbX 等。如果您在顺序上犯了错误，您会注意到。某些包需要添加*搜索路径*$(BSDCOMMONDIR)/DCP
*   编译并安装设计包，您将看到*TfrxReport*。

安装设计包后，您将看不到结果，我重新启动了 IDE，一切顺利；）

延迟2年，我希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T04:13:20.673

只是一个想法。

`RegisterClass(TfrxReport);`在程序启动时添加某处。或者，就在引发错误的行之前。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-21T18:41:06.433

不确定您是否得到了这个问题的答案......但我在 Rad Studio XE4 中使用 Fast Reports 4.0 Pro 时遇到了同样的问题。

我已经将我的报告放在一个数据模块中，我可以在需要时创建/销毁它，并且数据集也可以在其中找到。我可以在报表设计器中放置一个 BarCode 元素，但是，在运行应用程序时，我会得到“找不到类 TfrxBarCodeView”。

在 C:\Program Files (X86)\Fast Reports\source\ 中搜索 Source 文件夹后，我打开了一个名为 frxBarcode.pas 的源文件，其中包含“TfrxBarCodeView”类的创建。

我只是将 frxBarCode 添加到我的使用列表中，并且一切正常！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T19:46:47.743

我会从 1 开始

1.  将绝对的完整路径放入 fr3 文件，以及
2.  将其放在用户的文档目录中，

只是为了排除文件访问问题。你有 FastReport 的源代码吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-18T00:59:52.087

我知道这很旧，但对某些人来说它可能有用。我只是遇到了类似的问题。我从来没有想过在快速报告的调色板上有一个名为 frxReportTableObject 的组件。只需将其放在相关表格上即可。

# php - foreach 循环中的多数组使用

> ID：14158065
> 
> 赞同：1
> 
> 时间：2013-01-04T13:26:42.247
> 
> 标签：php

我将以下数组存储在 $_SESSION

```
[Bookings] => Array
    (
        [date] => Array
             (
                [0] => 1/12/2013
                [1] => 1/19/2013
                [2] => 2/03/2013
            )

        [price] => Array
            (
                [0] =>  100
                [1] =>  150
                [2] =>  120
             )

   ) 
```

但是我想使用一个 foreach 循环并对数组中的两个值执行计算。我似乎无法弄清楚如何使用 foreach 来容纳多值，我有一个我在下面写的 foreach 示例我正在努力实现。任何人都指出我正确的方向。

```
foreach ($_SESSION['Bookings'] as $bookings) 
{
   myDate = $bookings[date];
   myPrice = $bookings[price];

   // Some other stuff here
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T13:35:27.863

```
foreach ($_SESSION['Bookings']['date'] as $key => $value) {
    $myDate = $value;
    $myPrice = $_SESSION['Bookings']['price'][$key];
} 
```

我猜更简单:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T13:30:27.530

```
foreach (array_keys($_SESSION['Bookings']['date']) as $key) 
{
    $myDate  = $_SESSION['Bookings']['date'][$key];
    $myPrice = $_SESSION['Bookings']['price'][$key];
} 
```

应该管用？

一些信息：[array_keys](http://php.net/array_keys)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T13:35:12.780

只需循环您的子数组并从另一个子数组中读取相应的值

```
foreach ( $_SESSION['Bookings'][ 'date' ] as $key => $myDate) {

    $myPrice = $_SESSION['Bookings'][ 'price' ][ $key ];

    // here you can access to $myDate and $myPrice

    // Some other stuff here
} 
```

# ssl - 请求被中止：无法在 Windows 8 Metro App 中创建 SSL/TLS 安全通道

> ID：14158069
> 
> 赞同：1
> 
> 时间：2013-01-04T13:26:46.473
> 
> 标签：ssl, windows-8, microsoft-metro, httpclient

我有一个包含 350 个可下载图片网址的列表。我通过运行多个任务一次并行下载 10 张图像。但是在突然下载了**N**张图片后，我的代码抛出了以下异常。

> 异常：“发送请求时发生错误。”
> 
> InnerException：“请求被中止：无法创建 SSL/TLS 安全通道。”
> 
> StackTrace：“在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess（任务任务）\r\n 在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification（任务任务）\r\n 在 System.Runtime.CompilerServices.TaskAwaiter`1。获取结果()\r\n ...

我创建了一个**示例项目**来重现此异常。我手上有2个测试用例。[您可以从My Sky Drive Here](http://sdrv.ms/XjdHaP)下载正在运行的测试项目。右键单击文件 HTTPClientTestCases1and2.zip 并下载。

**案例 1：使用单个实例 HttpClient 进行所有图像下载。**

在这种情况下，我使用相同的 HttpClient 向 10 个 url 发送并行请求。在这种情况下，大部分时间下载是成功的。在最后一次成功下载图像后，等待最少 40 秒（最多 1 分 40 秒）以发送下一批的下一个并行下载请求。由于此异常，一个图像肯定会失败。但是有很多地方写并建议使用单个 HttpClient 进行多个请求。

```
 public async void DownloadUsingSingleSharedHttpClient(Int32 imageIndex)
    {   
        Uri url = new Uri(ImageURLs[imageIndex]);

        UnderDownloadCount++;

        try
        {
            Byte[] contentBytes = null;

            try
            {
                // Exception IS THROWN AT LINE BELOW 
                HttpResponseMessage response = await _httpClient.GetAsync(url);

                contentBytes = await response.Content.ReadAsByteArrayAsync();
            }
            catch (Exception ex)
            {
                System.Diagnostics.Debug.WriteLine("Download Failed at GetAsync() :" + ex.Message);
                throw ex;
            }

            DownloadedCount++;

            if (OnSuccess != null)
                OnSuccess(this, new DownloadSuccessEventArgs() { Index = imageIndex, Data = contentBytes });
        }
        catch (HttpRequestException hre)
        {
            DownloadFailedCount++;
            if (OnFailed != null)
                OnFailed(hre, null);
        }
        catch (TaskCanceledException hre)
        {   
            DownloadFailedCount++;
            if (OnFailed != null)
                OnFailed(hre, null);
        }
        catch (Exception e)
        {
            DownloadFailedCount++;
            if (OnFailed != null)
                OnFailed(e, null);
        }
    } 
```

**案例 2：为每个图像创建新的 HttpClient 实例下载**

在这种情况下，它只是在并行下载图像时由于相同的异常而非常频繁地失败。

```
public async void DownloadUsingCreatingHttpClientEveryTime(Int32 imageIndex)
{
    Uri url = new Uri(ImageURLs[imageIndex]);

    UnderDownloadCount++;
    try
    {
        Byte[] contentBytes = null;

        using (HttpClientHandler _handler = new HttpClientHandler())
        {
            _handler.AllowAutoRedirect = true;
            _handler.MaxAutomaticRedirections = 4;

            using (HttpClient httpClient = new HttpClient(_handler))
            {
                httpClient.DefaultRequestHeaders.ExpectContinue = false;
                httpClient.DefaultRequestHeaders.Add("Keep-Alive", "false");

                try
                {
                    // Exception IS THROWN AT LINE BELOW 
                    contentBytes = await httpClient.GetByteArrayAsync(url.OriginalString);
                }
                catch (Exception ex)
                {
                    System.Diagnostics.Debug.WriteLine("Download Failed :" + ex.Message);
                    throw ex;
                    }
                }

            _handler.Dispose();
        }

        DownloadedCount++;

        if (OnSuccess != null)
            OnSuccess(this, new DownloadSuccessEventArgs() { Index = imageIndex, Data = contentBytes });
    }
    catch (HttpRequestException hre)
    {
        DownloadFailedCount++;
        if (OnFailed != null)
            OnFailed(hre, null);
    }
    catch (TaskCanceledException hre)
    {
        DownloadFailedCount++;
        if (OnFailed != null)
            OnFailed(hre, null);
    }
    catch (Exception e)
    {
        DownloadFailedCount++;
        if (OnFailed != null)
            OnFailed(e, null);
    }
} 
```

**请编辑 MainPage.xaml.cs 中的以下函数以检查两种情况**

```
 private void Send10DownloadRequestParallel()
    {
        for (Int32 index = 0; index < 10; index++)
        {
            Task.Run(() =>
            {   
                Int32 index1 = rand.Next(0, myImageDownloader.ImageURLs.Count - 1);

                UpdateDownloadProgress();

                // Case 1: Download Using Single Shared HttpClient
                // myImageDownloader.DownloadUsingSingleSharedHttpClient(index1);

                // OR

                // Case 2: Download Using Creating Http Client Every Time
                myImageDownloader.DownloadUsingCreatingHttpClientEveryTime(index1);
            });
        }
    } 
```

**我的问题：**我做错了什么？通过克服此异常，在 WinRT 中实现并行下载器的最佳方法是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T19:24:45.957

我运行了您的示例应用程序，但仅在以下几种情况下出现错误：

1.  当您的应用请求的图像不存在时，.NET HTTP 客户端会引发异常。您的处理程序不能完全处理这种情况，因为内部异常是 NULL。我不得不稍微调整一下代码：

    ```
    async void myImageDownloader_OnFailed(object sender, EventArgs e)
    {
        await App.CurrentDispatcher.RunAsync(Windows.UI.Core.CoreDispatcherPriority.Normal, delegate
        {   
            TimeSpan time =(DateTime.Now -dateTimeSuccess);

            String timeGap = "Ideal For:" + time.ToString() + "\n";
            ErrorListBox.Text += "\n Failed When: " + DownloadInfo.Text + "\n";
            ErrorListBox.Text += timeGap;

            // CX - added null check for InnerException, as these are NULL on HTTP result status 404
            var ex = sender as Exception;
            if (ex.InnerException != null)
                ErrorListBox.Text += ex.InnerException.Message;
            else
                ErrorListBox.Text += "Inner Exception null - Outer = (" + ex.ToString() + ")";
        });
    } 
    ```

2.  我唯一一次得到你的另一个错误`Could not create SSL/TLS secure channel in Windows 8 Metro App`，是当我使用 HTTP 调试代理（Fiddler）时。如果我不使用拦截所有 HTTP(S) 调用的 Fiddler，那么我下载没有问题。我什至开始快速连续下载多个（通过在一秒钟内多次单击蓝色下载区域）。结果是所有项目都被下载（除了上面提到的 404 错误）。

这是成功下载的屏幕截图（同样，404 除外）。此屏幕截图正在运行测试用例 #2（HttpClient 的多个实例）。我确实运行了测试用例 #1（HttpClient 的单个实例），结果也成功了。

![测试应用截图](../Images/23ce37bcb26c94bd4d5f2cb230b17683.png)

简而言之，我没有看到您遇到的问题。我唯一能想到的就是让您从不同的机器或位置尝试您的应用程序。

# java - 在java中更改对象数组中的字段

> ID：14158072
> 
> 赞同：0
> 
> 时间：2013-01-04T13:27:03.030
> 
> 标签：java, arrays

**这是我创建的课程的一部分

```
 class Student{ 
 private String name;

 private float avGrade;

 private float outstandingGrade = 82.0f;

public Student() {  }

public Student(String Name, float avg) {
    name = Name;
    avGrade = avg;
}

public String getName() {
    return name;
}
public void setName(String Name) {
    name = Name;
} 
```

}

这是其中的主要方法和另一种方法：

```
 public static void main(String[] args) {
    Student[][] school = CreateStudentMat();
    school[0][0].setName("Student");
}
public static Student[][] CreateStudentMat(){
    Scanner input = new Scanner(System.in);
    System.out.println("Please enter number of classes in school: ");
    int NumClasses = input.nextInt();
    Student[][] matrix = new Student[NumClasses][];  
    for(int i = 0; i<matrix.length; i++){
        System.out.println("Please enter number of students in class " +(i+1));
        matrix[i] = new Student[input.nextInt()];
    }
    return matrix;
} 
```

当我尝试使用 school[0][0].setName("Student"); 更改 [0][0] 处的对象名称时；

我收到一个错误

Homework3.main(Homework3.java:13) 的线程“主”java.lang.NullPointerException 中的异常

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T13:29:57.007

*   您正在实例化二维数组`matrix = new Student[NumClasses][]`
*   您正在实例化 N 一维数组`matrix[i] = new Student[input.nextInt()]`
*   你**不是**用实例化每个学生`matrix[i][j] = new Student()`

因此，正确创建了二维数组，但每个学生引用仍然存在`null`，因为您没有实例化任何。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T13:30:13.043

没有学生对象。你从来没有`new Student()`在任何地方打电话。由于数组没有任何对象，因此您不能在空值上调用方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T13:30:53.967

也许问题存在于：

```
Student[][] matrix = new Student[NumClasses][]; 
```

尝试初始化数组第二维的大小。

# haskell - 使用具有“有限”约束的约束种类和类型族

> ID：14158074
> 
> 赞同：4
> 
> 时间：2013-01-04T13:27:11.403
> 
> 标签：haskell, type-families, constraint-kinds

我正在研究一个包含一个用于“查看”执行的幺半群的应​​用函子。然而，有时我根本不关心这部分，所以幺半群的选择是无关紧要的，因为它永远不会被消耗。我已经简化了我所拥有的：

```
{-# LANGUAGE FlexibleInstances #-}
{-# LANGUAGE ConstraintKinds #-}
{-# LANGUAGE MultiParamTypeClasses #-}
{-# LANGUAGE TypeFamilies #-}

import GHC.Exts

class Render a b where render :: a -> b
instance Render a () where render = const ()

class Merge a where
  type Renderer a b :: Constraint
  merge :: Renderer a b => a -> b

data Foo = Foo Bool

instance Merge Foo where
  type (Renderer Foo) m = (Render Bool m)
  merge (Foo b) = render b 
```

`Render`用于将各种`a`s 转换为单个`b`. `Merge`是我实际仿函数的一个很大的简化，但关键是它包含一个类型族/约束，我的意图是准确指定`Render`ers a 的`Merge`要求。

现在，我可能想“运行” `Merge`，但丢弃视图，类似于：

```
runFoo :: Merge a => a -> Int
runFoo x = case merge x of () -> 5 
```

但这会失败，因为：

> 无法推断出`(Renderer a ())`使用`merge`

我选择`()`作为我的幺半群`a`，因为我们有一个`Render a ()`. 因此，如果有办法说这`Merge a`仅意味着集合`Render`约束，那么这将正常工作。当然，`Merge a`比这更笼统 - 它可以添加任意约束，这解释了编译错误。

*有没有在不*改变签名的情况下实现我想要的`runFoo`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T15:19:44.480

如果您有很多这样的情况，这可能无法扩展，但这有效：

```
class Renderer a () => Merge a where
  ... 
```

# iphone - CLLocationManager 有时会在应用程序处于后台时停止更新

> ID：14158078
> 
> 赞同：5
> 
> 时间：2013-01-04T13:27:25.140
> 
> 标签：iphone, ios, ipad, cllocationmanager, cllocation

我有一个应用程序用于`CLLocationManager`跟踪用户的路线，沿着所走的路径绘制点。该应用程序使用必需的后台模式在后台运行 > 应用程序注册位置更新。

据我了解，需要调用后台发生的任何事情，`locationManager:didUpdateToLocation:fromLocation`因为这是每次位置更新都会调用的方法。

我遇到的问题是，有时这会停止被调用。当用户的位置在大约 15 分钟左右的时间内没有太大变化时，似乎会发生这种情况。据我所知，对 locationManager:didUpdateToLocation:fromLocation 的调用刚刚停止，大概是为了节省电池。不幸的是，当您重新开始移动时，它不会再次恢复。

我认为无法覆盖此行为，因此我想使用通知中心通知用户该应用程序不再记录路线。问题是，应用程序如何知道发生了这种情况？如果未调用 locationManager:didUpdateToLocation:fromLocation，我将无法触发通知。如果正在调用它，则不应触发通知。

是否有某种系统通知表明位置更新将停止？

我发现调试它非常困难，因为当我外出并测试设备上的位置时，我无法将我的 Mac 带到任何地方（在模拟器中你只能做这么多）。任何调试技巧也将不胜感激！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-22T18:41:12.507

如果您还没有找到答案，我认为这是因为在`CLLocationManager`called中添加了一个新属性`pausesLocationUpdatesAutomatically`。该属性默认为`YES`，其行为与您描述的完全相同。尝试将其设置为`NO`，我认为它会解决您的问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-04-05T20:36:21.923

从 iOS9 开始，请确保您也在位置管理器上设置了此属性：

> [locationManager setAllowsBackgroundLocationUpdates:YES]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T15:50:57.080

有一个位置更新的代表确实失败了

```
-(void)locationManager:(CLLocationManager *)manager didFailWithError:(NSError *)error 
```

有几种错误：`kCLErrorDenied` `kCLErrorNetwork`在上面的委托方法中添加代码来处理它们，而不是更新位置，也许是`UIAlertView`为了告诉用户。

就个人而言，我会调用 `[locationManager stopUpdatingLocation];`任何错误，然后根据失败的原因使用错误消息重新启动它。

也重新背景，检查您的 appDelegate 中的代码：

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
    // Use this method to release shared resources, save user data, invalidate timers, and store enough application state information to restore your application to its current state in case it is terminated later. 
    // If your application supports background execution, this method is called instead of applicationWillTerminate: when the user quits.
    [self saveContext];
    if ([CLLocationManager significantLocationChangeMonitoringAvailable]) {
        // Stop normal location updates and start significant location change updates for battery efficiency.
        [self.locationHandler.locationManager stopUpdatingLocation];
        [self.locationHandler.locationManager startMonitoringSignificantLocationChanges];
    }
    else {
        NSLog(@"Significant location change monitoring is not available.");
    }
} 
```

最后回复：测试。您可以通过更改模拟器中的位置移动来模拟一些位置错误。例如，从跑步到开车会导致错误。从运行到单个特定的自定义位置会导致错误。它们都应该出现在上面 locationManager 的委托方法中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T12:18:23.043

我已经设法通过添加一个本地通知来解决这个问题，每次将新位置添加到路线时都会延迟 90 秒。添加下一个位置时，会取消先前的通知并安排新的通知。这样，如果它停止更新，用户就会收到通知（尽管有 90 秒的延迟）。这并不理想，而且对于电池寿命可能不是很好，但它是一种解决方案，并且是我目前最好的解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-27T07:08:03.927

@Ron，我遇到了与 beev 描述相同的问题，并且我已经将 pausesLocationUpdatesAutomatically 设置为 NO。我认为是因为iOS会在后台杀死一些10分钟内未触发的应用程序。所以现在添加本地通知可能是一个不错的选择。

# service - 如何在 JavaFX2 中的 Service 和 UI 之间传递用户定义的对象和异常？

> ID：14158079
> 
> 赞同：4
> 
> 时间：2013-01-04T13:27:25.773
> 
> 标签：service, javafx-2, worker

如何在 JavaFX2 中的服务和 UI 之间通信用户定义的对象和用户定义的（检查的）异常？这些示例仅显示将字符串作为属性发送到服务，并将可观察字符串数组发送回 UI。

似乎只为简单类型定义了属性。StringProperty、IntegerProperty、DoubleProperty 等。目前我有一个用户定义的对象（不是简单类型），我希望 Task 对其进行操作并使用它生成的输出数据进行更新。我通过服务的构造函数发送它，它通过任务的构造函数传递它。我想知道参数必须通过属性传递的限制。此外，如果在 Task 的操作过程中抛出异常，它将如何从 Service 传递到 UI？我只看到一个 getException() 方法，没有传统的 throw/catch。

属性[http://docs.oracle.com/javafx/2/binding/jfxpub-binding.htm](http://docs.oracle.com/javafx/2/binding/jfxpub-binding.htm)

服务和任务[http://docs.oracle.com/javafx/2/threads/jfxpub-threads.htm](http://docs.oracle.com/javafx/2/threads/jfxpub-threads.htm)

服务 javadocs [http://docs.oracle.com/javafx/2/api/javafx/concurrent/Service.html#getException](http://docs.oracle.com/javafx/2/api/javafx/concurrent/Service.html#getException) ()

> “因为任务设计用于 JavaFX GUI 应用程序，所以它确保对其公共属性的每次更改，以及状态、错误和事件处理程序的更改通知，都发生在 JavaFX 应用程序主线程上。访问这些属性从后台线程（包括 call() 方法）将导致引发运行时异常。
> 
> 强烈鼓励所有任务都使用任务将运行的不可变状态进行初始化。这应该通过提供一个 Task 构造函数来完成，该构造函数采用执行任务所需的参数。不可变状态使得在任何线程中都可以轻松安全地使用，并确保存在多个线程时的正确性。”

但是如果我的 UI 只是在 Task 完成后才接触到对象，那应该没问题，对吧？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-05T02:09:37.480

服务有一个签名`Service<V>`，它`<V>`是一个通用类型参数，用于从服务提供的任务中指定返回对象的类型。

假设您要定义一个返回 Foo 类型的用户定义对象的服务，那么您可以这样做：

```
 class FooGenerator extends Service<Foo> {
   protected Task createTask() {
     return new Task<Foo>() {
       protected Foo call() throws Exception {
         return new Foo();
       }
     };
   }
 } 
```

要使用该服务：

```
 FooGenerator fooGenerator = new FooGenerator();
 fooGenerator.setOnSucceeded(new EventHandler<WorkerStateEvent>() {
   @Override public void handle(WorkerStateEvent t) {
     Foo myNewFoo = fooGenerator.getValue();
     System.out.println(myNewFoo);
   }
 });
 fooGenerator.start(); 
```

* * *

如果要在每次启动或重新启动服务之前将输入值传递给服务，则必须更加小心。您可以将要输入的值作为服务上的可设置成员添加到服务中。在调用服务的 start 方法之前，可以从 JavaFX 应用程序线程调用这些设置器。然后，当创建服务的任务时，将参数传递给服务的任务的构造函数。

这样做时，最好使所有信息在线程之间来回传递不可变。对于下面的示例，Foo 对象作为输入参数传递给服务，Foo 对象基于作为服务输出接收的输入。但是 Foo 本身的状态只在它的构造函数中初始化 - Foo 的实例是不可变的，一旦创建就不能改变，它的所有成员变量都是最终的，不能改变。这使得推理程序变得更加容易，因为您永远不必担心另一个线程可能会同时覆盖状态。这似乎有点复杂，但它确实让一切都非常安全。

```
class FooModifier extends Service<Foo> {
  private Foo foo;
  void setFoo(Foo foo) { this.foo = foo; }

  @Override protected Task createTask() {
    return new FooModifierTask(foo);
  }

  private class FooModifierTask extends Task<Foo> {
    final private Foo fooInput;
    FooModifierTask(Foo fooInput) { this.fooInput = fooInput; }

    @Override protected Foo call() throws Exception {
      Thread.currentThread().sleep(1000);
      return new Foo(fooInput);
    }
  }
}

class Foo {
  private final int answer;
  Foo()          { answer = random.nextInt(100); }
  Foo(Foo input) { answer = input.getAnswer() + 42; }
  public int getAnswer() { return answer; }
} 
```

`Service`在 Service [javadoc](http://docs.oracle.com/javafx/2/api/javafx/concurrent/Service.html)中还有一个向 a 提供输入的示例。

* * *

要从服务返回自定义用户异常，只需在服务的任务调用处理程序期间抛出用户异常。例如：

```
 class BadFooGenerator extends Service<Foo> {
   @Override protected Task createTask() {
     return new Task<Foo>() {
       @Override protected Foo call() throws Exception {
         Thread.currentThread().sleep(1000);
         throw new BadFooException();
       }
     };
   }
 } 
```

可以像这样检索异常：

```
 BadFooGenerator badFooGenerator = new BadFooGenerator();
 badFooGenerator.setOnFailed(new EventHandler<WorkerStateEvent>() {
   @Override public void handle(WorkerStateEvent t) {
     Throwable ouch = badFooGenerator.getException();
     System.out.println(ouch.getClass().getName() + " -> " + ouch.getMessage());
   }
 });
 badFooGenerator.start(); 
```

* * *

我创建了几个[可执行示例](https://gist.github.com/4459216)，您可以使用它来尝试一下。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T00:09:17.617

> 似乎只为简单类型定义了属性。StringProperty、IntegerProperty、DoubleProperty 等。目前我有一个用户定义的对象（不是简单类型），我希望 Task 对其进行操作并使用它产生的输出数据进行更新

如果您想要一个可用于您自己的类的属性，请尝试 SimpleObjectProperty，其中 T 可以是 Exception，或者您需要的任何东西。

> 此外，如果在 Task 的操作过程中抛出异常，它将如何从 Service 传递到 UI？

您可以在 UI 中的 Task#onFailedProperty 上设置一个 EventHandler，其中包含有关失败时要做什么的逻辑。

> 但是如果我的 UI 只是在 Task 完成后才接触到对象，那应该没问题，对吧？

如果你从你的 UI 调用它，你肯定会在 javaFX 线程上，所以你会没事的。您可以通过调用 Platform.isFxApplicationThread() 断言您在 javaFX 线程上。

# android - 实现 JellyBean 安卓手机中的锁屏快捷方式图标

> ID：14158080
> 
> 赞同：1
> 
> 时间：2013-01-04T13:27:27.387
> 
> 标签：android, shortcut, android-4.2-jelly-bean, unlock, screen-lock

正如我们在 JellyBean android 手机中看到的那样，在锁定屏幕中，如果我们拖动一个相机图标，它会要求我们解锁屏幕，一旦我们解锁屏幕，相机应用程序就会启动。

在我的服务中，当屏幕被锁定时，我会显示一个带有 OK 按钮的对话框（并在单击它后启动浏览器）：

mKeyguardManager = (KeyguardManager) getSystemService(KEYGUARD_SERVICE); mKeyguardLock = mKeyguardManager.newKeyguardLock("My_App");

mKeyguardLock.disableKeyguard();

window.addFlags(WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED| WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON);

但是点击确定后，浏览器是直接启动的。单击确定按钮后我需要它，它应该提示我解锁屏幕，解锁后，我应该被带到浏览器。

# django - 使用 Django 的 ORM 时会在什么时候引发异常

> ID：14158087
> 
> 赞同：6
> 
> 时间：2013-01-04T13:27:39.657
> 
> 标签：django, django-orm

足够简单的例子 - 我有一些以查询集开头的 Django 代码......

```
queryset = MyModel.objects.all() 
```

稍后它会执行各种过滤，具体取决于一些可配置的选项......

```
if something:
    queryset = self.queryset.filter(foo=some_foo)

if another_thing:
    queryset = self.queryset.filter(bar=some_bar) 
```

最后它执行查找...

```
try:
    obj = queryset.get()
except ObjectDoesNotExist:
    raise ValidationError('Does not exist') 
```

现在，由于过滤需要以灵活的方式进行，因此`some_foo`or`some_bar`变量可能不是正确的类型（例如，我们最终可能会得到一个空字符串来尝试过滤整数字段。）所以这是可能的此代码最终会引发 a`TypeError`或 a `ValueError`。

没关系，我可以适当地处理此案，但是从 ORM 合同中我不清楚的是，我应该*在什么时候*提出这些例外。

*   它会出现在`.filter()`声明中吗？...
*   ...或在`.get()`声明中？...
*   ...或未指定，我将其处理为能够发生在任何一个上？（例如，可能取决于数据库后端的实现？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T01:21:13.297

为了回答原始问题，在构建新查询集时，在调用过滤器时会引发a`FieldError`和：`ValueError`

```
>>> a = Account.objects.all()
>>> a = a.filter(id=3)
>>> a = a.filter(no_exist=3)
<snip>
FieldError: Cannot resolve keyword 'no_exist' into field. Choices are: active, created_on, group, id, ...

>>> a = Account.objects.all()
>>> a = a.filter(id='abc')
ValueError: invalid literal for int() with base 10: 'abc' 
```

我还要补充一点，这种模式对我来说似乎具有误导性，因为`filter`它通常用于返回模型的列表/可迭代，而*不是*与`get`. 为了清楚和更容易地处理异常，我建议使用这种模式：

```
kwargs = {}
if something:
    kwargs['foo'] = some_foo
if another_thing:
    kwargs['bar'] = some_bar

# handle if kwargs is empty
try:
    obj = MyModel.objects.get(**kwargs)
except (FieldError, ValueError, ObjectDoesNotExist):
    raise ValidationError('Does not exist') 
```

另一个额外的好处是，IIRC，克隆查询集的工作相对昂贵，因此您可以忽略该开销，同时使代码更清晰。回到您的问题，使用这种模式，毫无疑问会在哪里引发异常。

# android - 如何导入 com.google.android 包。？

> ID：14158094
> 
> 赞同：0
> 
> 时间：2013-01-04T13:27:54.580
> 
> 标签：android

我想创建一个扩展 MapActivity 类的活动。但我无法导入`com.google.android.maps.MapActivity`

它显示以下错误：

```
the import com.google can not be resolved 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T13:28:50.977

您必须使用 Google Api 的库来构建您的项目。看起来您正在使用通用 Android Api 构建它。

执行以下步骤以消除您的错误。

> 右键单击项目---> 属性---> Android ---> 选择 Google APIs（任何 api 级别）--->单击应用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T13:30:21.390

调出您的项目属性，然后转到 Android。您是否选择了包含 Google API 的 Android 目标？也许您只有一个通用的 Android 目标。

*   首先你必须确保你已经安装了 Google API

*   然后设置项目的属性`Eclipse`以检查 SDK 的 Google API 版本。

*   并确保您已将此库包含在 AndroidManifest 文件中

    `<uses-library android:name="com.google.android.maps" />`

# php - 在 Google Drive 上运行 makefile 或 latex

> ID：14158095
> 
> 赞同：1
> 
> 时间：2013-01-04T13:27:56.887
> 
> 标签：php, makefile, latex, google-drive-api

是否可以在存储在 Google Drive 上的文件上运行例如 makefile 或乳胶？

考虑以下场景：Google Drive App 用户（登录到他自己的 Google Drive）在服务器上“运行”makefile 或 Latex，例如使用 php 脚本。在服务器端下载makefile 或latex 文件并执行特定命令（例如'make' 或'latex'）是（相对）容易的。问题是生成文件或乳胶文件需要其他文件本地存储在用户的 Google Drive 上。但是，我不想“以防万一”将所有文件下载到服务器。

也许可以在服务器上映射一个完整的 Google Drive 文件夹以用于此会话？或者也许可以为完整的文件树创建符号链接，当它们被访问时，实际的文件内容可以下载到服务器上？

有人对如何实现这一点有任何想法和实用技巧吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T13:32:23.297

据我所知，没有 PHP 的交钥匙解决方案。

如果您在运行 PHP 的 (Linux) 服务器上具有管理员权限，则可以[将 Google 驱动器安装在普通文件夹](https://github.com/jcline/fuse-google-drive)中。如果你愿意做一些编程，你可以从[vfs://Stream](http://vfs.bovigo.org/)开始，它是 PHP 唯一的 AFAIK。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T11:44:15.640

关于 Latex：CLSI（通用乳胶服务接口）似乎是一个可行的候选者，因为它接受您资源的 url。请参阅以下链接：

*   [http://code.google.com/p/common-latex-service-interface/](http://code.google.com/p/common-latex-service-interface/)
*   [https://github.com/scribtex/clsi](https://github.com/scribtex/clsi)
*   [公共 CLSI 服务器](https://stackoverflow.com/questions/3322069/public-clsi-servers)

然后可以在 CLSI 请求中传递 google drive 资源的 downloadUrl。在 google drive 中查看我的答案[：通过 javascript 访问 webContentLink](https://stackoverflow.com/questions/11864657/google-drive-access-webcontentlink-through-javascript)以获取 javascript 中的 downloadUrl。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T15:52:29.850

如果可以`ssh`进入您的 Google Drive（我不知道），您可以使用该`sshfs`命令安装它，然后执行您想要的任何命令。

# sql - 将军事时间插入日期时间列

> ID：14158099
> 
> 赞同：0
> 
> 时间：2013-01-04T13:28:22.827
> 
> 标签：sql

例如，我有两列数据

```
Row_Date    
2013-01-03-00:00:00

Starttime   
130 
```

我需要的是开始时间并将其放入`date_time`小时和分钟字段的列中，例如

```
Datetime
2013-01-03-01:30:00 
```

我现在能做的就是使用以下命令输入小时（我在别处找到的）

```
,CAST(DATEADD(HOUR, StartTime/100, CONVERT(char(12), ROW_DATE, 112))
                                                       AS DATETIME) AS DATE_TOME 
```

我可以理解为什么这不起作用，因为它将开始时间除以 100，它只剩下小时而不是分钟，但我不知道如何包括分钟。

我发现但无法开始工作的另一个命令是：

```
,CAST(CAST(row_date AS VARCHAR(8)) + ' ' 
 + STUFF(RIGHT( '000' + CAST(StartTime AS VARCHAR(4)), 4), 3,0, ':') AS DATETIME) 
```

这又是在其他地方找到的，但我收到以下错误：

> 从字符串转换日期和/或时间时转换失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T13:37:22.327

```
CAST(DATEADD(MINUTE, 60 * FLOOR(StartTime/100) + StartTime % 100, CONVERT(char(12), ROW_DATE, 112)) AS DATETIME) AS DATE_TOME 
```

# c# - Crystal Report 中的 HttpUtility.HtmlDecode

> ID：14158101
> 
> 赞同：1
> 
> 时间：2013-01-04T13:28:34.523
> 
> 标签：c#, crystal-reports

我有一个水晶报表，其中显示了从 a 检索到的编码文本`DataSet`，但在报表中，它显示的是 html 标记。

有没有办法解码文本并将其显示在水晶报表中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T09:34:19.383

这是我用于解码编码文本的 SQL 函数。

```
CREATE FUNCTION FNHTMLDECODE (@REMARKS NVARCHAR(MAX))
RETURNS NVARCHAR(MAX) AS  
BEGIN 
    DECLARE @RESULT     NVARCHAR(MAX)
    DECLARE @VCCRLF     VARCHAR(2)

    SET @VCCRLF     =   CHAR(13) + CHAR(10)

    SELECT @RESULT  =   @REMARKS

    SELECT @RESULT  =   REPLACE(@RESULT,'&amp;amp;','&')
    SELECT @RESULT  =   REPLACE(@RESULT,'&AMP;','&')
    SELECT @RESULT  =   REPLACE(@RESULT,'&amp;#','&#')
    SELECT @RESULT  =   REPLACE(@RESULT,'&nbsp;',' ')
    SELECT @RESULT  =   REPLACE(@RESULT,'&lt;','<')
    SELECT @RESULT  =   REPLACE(@RESULT,'&gt;','>')
    SELECT @RESULT  =   REPLACE(@RESULT,'&QUOT;','"')
    SELECT @RESULT  =   REPLACE(@RESULT,'&COPY;','©')
    SELECT @RESULT  =   REPLACE(@RESULT,'&LAQUO;','«')
    SELECT @RESULT  =   REPLACE(@RESULT,'&RAQUO;','»')
    SELECT @RESULT  =   REPLACE(@RESULT,'&FRAC14;','¼')
    SELECT @RESULT  =   REPLACE(@RESULT,'&FRAC12;','½')
    SELECT @RESULT  =   REPLACE(@RESULT,'&IQUEST;','¿')
    SELECT @RESULT  =   REPLACE(@RESULT,'<BR />', CHAR(10)) --   LINE FEED
    SELECT @RESULT  =   REPLACE(@RESULT,'&#x0D;', CHAR(13))  -- CARRIAGE RETURN

    SELECT @RESULT  =   REPLACE(@RESULT,'<P>',@VCCRLF)

    RETURN @RESULT
END 
```

# java - JavaFX BarChart 条形颜色

> ID：14158104
> 
> 赞同：4
> 
> 时间：2013-01-04T13:28:43.573
> 
> 标签：java, javafx, javafx-2

如何更改 JavaFX 中条形的颜色`BarChart`？

我找不到通过 css 方法更改颜色的`setStyle`方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T16:50:55.960

您可以使用 css 设置栏的颜色

```
.default-color0.chart-bar { -fx-bar-fill: ***** }
.default-color1.chart-bar { -fx-bar-fill: ***** }
... 
```

使用 setStyle 方法：

在 Node 类中使用 [lookupAll方法，](http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html#lookupAll%28java.lang.String%29)

> 查找与给定 CSS 选择器匹配的所有节点，包括这个节点和任何子节点。如果没有找到匹配项，则返回一个空的不可修改的集合。该集合是明确无序的。

代码 ：

```
 //set first bar color
  for(Node n:barChart.lookupAll(".default-color0.chart-bar")) {
            n.setStyle("-fx-bar-fill: red;");
        }
   //second bar color
   for(Node n:barChart.lookupAll(".default-color1.chart-bar")) {
            n.setStyle("-fx-bar-fill: green;");
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-01-09T08:50:35.410

在 JavaFX8 中，您可以简单地使用`.chart-bar`选择器：

```
.chart-bar {
    -fx-bar-fill: red; 
} 
```

# http - JMeter -> HTTPSampler 错误 java.lang.NoSuchFieldError: DEF_CONTENT_CHARSET on PUT 请求

> ID：14158106
> 
> 赞同：1
> 
> 时间：2013-01-04T13:28:53.267
> 
> 标签：http, jmeter, put

我在 JMeter 中遇到了一个非常令人困惑的问题。我正在构建一个 REST Web 服务回归测试计划，并且 GET POST 和 DELETE 运行良好。不幸的是，每当我尝试 PUT 时，我都会收到错误消息

```
java.lang.NoSuchFieldError: DEF_CONTENT_CHARSET 
```

堆栈跟踪：

```
2013/01/04 13:18:18 ERROR - jmeter.threads.JMeterThread: Test failed! java.lang.NoSuchFieldError: DEF_CONTENT_CHARSET
        at org.apache.jmeter.protocol.http.sampler.HTTPHC4Impl.sendEntityData(HTTPHC4Impl.java:1023)
        at org.apache.jmeter.protocol.http.sampler.HTTPHC4Impl.sample(HTTPHC4Impl.java:281)
        at org.apache.jmeter.protocol.http.sampler.HTTPSamplerProxy.sample(HTTPSamplerProxy.java:62)
        at org.apache.jmeter.protocol.http.sampler.HTTPSamplerBase.sample(HTTPSamplerBase.java:1075)
        at org.apache.jmeter.protocol.http.sampler.HTTPSamplerBase.sample(HTTPSamplerBase.java:1064)
        at org.apache.jmeter.threads.JMeterThread.process_sampler(JMeterThread.java:426)
        at org.apache.jmeter.threads.JMeterThread.run(JMeterThread.java:255)
        at java.lang.Thread.run(Thread.java:680) 
```

我尝试了很多事情：我在 Content encoding 字段中添加了一个内容类型，尝试在测试计划中注释掉这一行：

```
 <stringProp name="HTTPSampler.contentEncoding"></stringProp> 
```

但这些都不起作用。这是我提出的要求（经过消毒）：

```
URL: ${PATH_TO_SERVICE}/${ID}/category/${CAT_ID}

BODY:
{
    "id":"xxxxxxx",
    "name":"AUTOREGRESSION",
    "icon":"HOME",
    "Key" :"99949"
}

HEADERS: 
Content-Type : application/json
Accept : application/json 
```

有没有人见过这个？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T14:42:30.453

你确定你使用的是标准的 JMeter 2.8 还是你改变了一些罐子？

这里提到了这个错误：

*   [https://issues.apache.org/jira/browse/HTTPASYNC-21](https://issues.apache.org/jira/browse/HTTPASYNC-21)

你能在 JMeter bugzilla 中用一个简单的显示问题的测试计划打开一个 bug 吗？您还可以尝试 JMeter nightly build，其中包含更新版本的 HttpComponents：

*   [http://jmeter.apache.org/nightly.html](http://jmeter.apache.org/nightly.html)（仔细阅读Building JMeter）

# c# - 从数据库检索后图像变得模糊

> ID：14158108
> 
> 赞同：0
> 
> 时间：2013-01-04T13:29:08.023
> 
> 标签：c#, sql, vb.net, blob

以下是从数据库中检索图像然后将其保存到文件夹的代码。

```
public string BinarytoNewsImage(int ID)
        {
            byte[] btimage = null;
            string image = "";
            string filename = null;
            int mediaid;

            DataSet dsNews = new DataSet();
            adp = new SqlDataAdapter("Select Top 1 * from tblNew Where intNewId=" + ID, offcon);
            adp.Fill(dsNews, "tblNews1");
            if (dsNews.Tables["tblNews1"].Rows.Count > 0)
            {
                if (dsNews.Tables["tblNews1"].Rows[0]["strImage"] != DBNull.Value)
                {
                    btimage = (byte[])dsNews.Tables["tblNews1"].Rows[0]["strImage"];
                    mediaid = Convert.ToInt32(dsNews.Tables["tblNews1"].Rows[0]["intMediaId"].ToString());
                    filename = dsNews.Tables["tblNews1"].Rows[0]["strfilename"].ToString();
                    image = BinarytoImage(btimage, mediaid);
                }
                else
                {
                    filename = dsNews.Tables["tblNews1"].Rows[0]["strfilename"].ToString();
                    image = "http://www.patrika.com/media/" + filename;
                }
            }

            return image;
        }

        public string BinarytoImage(byte[] stream, int ID)
        {
            string ImagePath = "";
            string Image = ID + ".jpg";

            var URL = System.Configuration.ConfigurationManager.AppSettings["ImagePath"].ToString();

            string FolderName = new Uri(URL).LocalPath;

            var help = HttpContext.Current.Server.MapPath(FolderName);

            if (Directory.Exists(HttpContext.Current.Server.MapPath(FolderName)))
            {
                string[] files = Directory.GetFiles(HttpContext.Current.Server.MapPath(FolderName), ID + ".jpg");
                if (files.Length > 0)
                {
                    ImagePath = URL + ID + ".jpg";
                }
                else
                {
                    using (MemoryStream MS = new MemoryStream(stream, 0, stream.Length))
                    {
                        MS.Write(stream, 0, stream.Length);

                        System.Drawing.Image img = System.Drawing.Image.FromStream(MS);

                        img.Save(help + ID + ".jpg", System.Drawing.Imaging.ImageFormat.Gif);
                        img.Dispose();
                        img = null;
                        ImagePath = URL + ID + ".jpg";
                    }
                }
            }
            return ImagePath;
        } 
```

**一切正常，图像保存到文件夹中，但我的问题是图像在检索后变得模糊。**

我只是不知道原因，因为当我使用另一个代码进行检索而不是图像正常但未保存到文件夹时：

```
DataSet dsNews = new DataSet();
            adp = new SqlDataAdapter("Select Top 1 * from tblNew Where intNewId=901371", con);
            adp.Fill(dsNews, "tblNews1");

            if (dsNews.Tables["tblNews1"].Rows[0]["strImage"] != DBNull.Value)
            {
                byte[] btimage = (byte[])dsNews.Tables["tblNews1"].Rows[0]["strImage"];
                Response.ContentType = "image/jpeg";
                Response.BinaryWrite(btimage);
            } 
```

**我需要将这些图像保存到文件夹**中，这样我就不必在图像出现后调用数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T13:37:48.240

改变这条线不会有帮助吗

```
 img.Save(help + ID + ".jpg", System.Drawing.Imaging.ImageFormat.Gif); 
```

将其存储为JPEG？因为那是源格式

**编辑：** 您没有将流指针移回起点。

尝试更改这些行：

```
 using (MemoryStream MS = new MemoryStream(stream, 0, stream.Length))
                {
                    MS.Write(stream, 0, stream.Length);

                    System.Drawing.Image img = System.Drawing.Image.FromStream(MS);
             ... 
```

到

```
 using (MemoryStream MS = new MemoryStream(stream, 0, stream.Length))
                {
                    MS.Write(stream, 0, stream.Length);
                    MS.Seek(0, SeekOrigin.Begin);
                    System.Drawing.Image img = System.Drawing.Image.FromStream(MS); 
```

...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T13:58:48.807

我写了常用的方法，一切正常。也许您的 byte[]stream 不正确，请检查。

```
 byte[] stream = File.ReadAllBytes(@"D:\YWG\123.jpg");
            using (MemoryStream MS = new MemoryStream(stream, 0, stream.Length))
            {
                MS.Write(stream, 0, stream.Length);

                using (Image img = Image.FromStream(MS))
                {
                    img.Save(@"D:\dd.jpg", System.Drawing.Imaging.ImageFormat.Gif);
                } 
            } 
```

我看到dest文件“dd.jpg”没问题。

# java - 文件密码中的 Java 加密对象

> ID：14158109
> 
> 赞同：0
> 
> 时间：2013-01-04T13:29:14.230
> 
> 标签：java, file, cryptography

我试图找到在文件中隐藏密码的最佳技术/方法的好方法，但不使用外部 jar 或库。

实际上，我使用一个代表用户名和密码列表的对象。将我的列表转换为 xml（仅在内存中），然后，我使用 AES 存储在一个文件中。

仅使用 java 7，没有外部库。

是一种好的/安全的方法吗？如果这个操作不行，可以动态创建xml加密吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T13:57:24.637

保存使用 AES 加密的密码并不安全，因为：

1）您将密钥存储在哪里？如果将其存储在服务器中，如果攻击者违反服务器并找到密钥，他将完全访问用户信息。
2) 你真的需要知道用户的密码吗？在许多应用程序中，出于安全原因，最好只保留密码的哈希值。用户名可以以明文形式存储，您也可以在密码中添加盐以强制执行。您可以使用 Java7 平台提供的一些算法来做到这一点。这样，即使有人进入你的服务器，他也不能在不破坏哈希函数的情况下使用用户的登录信息。

这是一个对我有用的例子：

```
public byte[] getHash(String password, byte[] salt, String algorithm) throws NoSuchAlgorithmException, UnsupportedEncodingException {
       MessageDigest digest = MessageDigest.getInstance(algorithm);//The String rapresents the alg you want to use: for example "SHA-1" or "SHA-256"
       digest.reset();
       digest.update(salt);
       return digest.digest(password.getBytes("UTF-8"));
 } 
```

您还可以查看此链接以获取更完整的示例：[https ://www.owasp.org/index.php/Hashing_Java](https://www.owasp.org/index.php/Hashing_Java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T13:37:15.527

您可以使用包装在 CipherOutputStream 中的 FileOutputStream。

# doctrine-orm - 具有相关实体的深度克隆 Doctrine 实体

> ID：14158111
> 
> 赞同：53
> 
> 时间：2013-01-04T13:29:19.597
> 
> 标签：doctrine-orm, symfony-2.1

我创建了一个`A`与`OneToMany`相关的实体`B`，它与`OneToMany`相关`C`。

我必须克隆这个`A`实体并将其设置在具有新 ID 的数据库中。此外，所有深层关系也应该用新的 id 克隆。

我尝试过将`A`id 设置为`null`：

```
$A = clone $A_original;
$A->setId(null);
$em->persist($A); 
```

它在表中创建新记录`A`，但不在`B`and中`C`。

`A`我应该怎么做才能制作实体的完整副本？

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2013-01-04T14:16:50.777

`__clone()`您必须在实体中 实现一个方法，将 id 设置为 null 并在需要时克隆关系。因为如果您将 id 保留在相关对象中，它会假定您的新实体`A`与现有实体`B`和`C`.

克隆方法`A`：

```
public function __clone() {
    if ($this->id) {
        $this->setId(null);
        $this->B = clone $this->B;
        $this->C = clone $this->C;
    }
} 
```

`B`和的克隆方法`C`：

```
public function __clone() {
    if ($this->id) {
        $this->setId(null);
    }
} 
```

[https://groups.google.com/forum/?fromgroups=#!topic/doctrine-user/Nu2rayrDkgQ](https://groups.google.com/forum/?fromgroups=#!topic/doctrine-user/Nu2rayrDkgQ)

[https://doctrine-orm.readthedocs.org/en/latest/cookbook/implementing-wakeup-or-clone.html](https://doctrine-orm.readthedocs.org/en/latest/cookbook/implementing-wakeup-or-clone.html)

基于 coder4show 的注释，用于 OneToMany 关系的克隆方法在`A`哪里`$this->M`是 OneToMany，因此是`ArrayCollection`：

```
public function __clone() {
    if ($this->id) {
        $this->setId(null);

        // cloning the relation M which is a OneToMany
        $mClone = new ArrayCollection();
        foreach ($this->M as $item) {
            $itemClone = clone $item;
            $itemClone->setA($this);
            $mClone->add($itemClone);
        }
        $this->M = $mClone;
    }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-11-14T10:52:47.017

还有一个模块可以做到这一点，称为 DeepCopy：

[https://github.com/myclabs/DeepCopy](https://github.com/myclabs/DeepCopy)

```
$deepCopy = new DeepCopy();
$myCopy   = $deepCopy->copy($myObject); 
```

您还可以添加过滤器来自定义复制过程。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-02-28T17:40:54.317

我无法使用 DeepClone（它需要 php 7.1+），所以我创建了更简单的方法来克隆实体 __clone 方法中的关系

```
$this->tags = new ArrayCollection($this->tags->toArray()); 
```

# android - 安卓异常

> ID：14158116
> 
> 赞同：1
> 
> 时间：2013-01-04T13:29:50.027
> 
> 标签：android

我尝试实现一个项目，我将在列表视图中加载许多图片。我用一个懒惰的实例来实现这一点。我还使用适配器和以下方式扩充列表：

```
 static class ViewHolder {
    ImageView imageView;
    TextView brand;
    TextView text;
    TextView cost;
    TextView saleCost;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {

    ViewHolder holder;
    // Set the product.
    Product currentProduct = getItem(position);

    if(convertView ==null){
        Activity activity = (Activity)getContext();
        inflater = (LayoutInflater) activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = inflater.inflate(R.layout.list_item, null);
        holder = new ViewHolder();

        // Extract the ImageView from the row.
        holder.imageView = (ImageView) convertView.findViewById(R.id.image);

        holder.text = (TextView) convertView.findViewById(R.id.text);
        holder.brand = (TextView) convertView.findViewById(R.id.brand);

        holder.cost = (TextView) convertView.findViewById(R.id.cost);
        holder.saleCost = (TextView) convertView.findViewById(R.id.saleCost);

        convertView.setTag(holder);

    }else {
        holder = (ViewHolder) convertView.getTag();
    } 

    //here I set the values 
```

列表项：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:orientation="horizontal"
android:padding="10dp" >

<!-- Image Thumbnail -->

<ImageView
    android:id="@+id/image"
    android:layout_width="100dp"
    android:layout_height="100dp" />

<!-- Name, Brand, and Cost -->

<LinearLayout
    android:id="@+id/nameAlign"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center_vertical"
    android:orientation="vertical"
    android:paddingLeft="10dip" >

    <TextView
        android:id="@+id/brand"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <TextView
        android:id="@+id/text"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <TextView
        android:id="@+id/cost"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <TextView
        android:id="@+id/saleCost"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />
  </LinearLayout>

</LinearLayout> 
```

我犯了以下错误：

```
 01-03 17:31:13.055: E/AndroidRuntime(22860): FATAL EXCEPTION: main
 01-03 17:31:13.055: E/AndroidRuntime(22860): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.nn/com.nn.HomeScreen}: android.view.InflateException:    Binary XML file line #22: Error inflating class <unknown>
 01-03 17:31:13.055: E/AndroidRuntime(22860):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
 01-03 17:31:13.055: E/AndroidRuntime(22860):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
 01-03 17:31:13.055: E/AndroidRuntime(22860):   at android.app.ActivityThread.access$1500(ActivityThread.java:117)
 01-03 17:31:13.055: E/AndroidRuntime(22860):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
 01-03 17:31:13.055: E/AndroidRuntime(22860):   at android.os.Handler.dispatchMessage(Handler.java:99)
 01-03 17:31:13.055: E/AndroidRuntime(22860):   at android.os.Looper.loop(Looper.java:130)
 01-03 17:31:13.055: E/AndroidRuntime(22860):   at android.app.ActivityThread.main(ActivityThread.java:3683)
 01-03 17:31:13.055: E/AndroidRuntime(22860):   at java.lang.reflect.Method.invokeNative(Native Method)
 01-03 17:31:13.055: E/AndroidRuntime(22860):   at java.lang.reflect.Method.invoke(Method.java:507)
 01-03 17:31:13.055: E/AndroidRuntime(22860):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
 01-03 17:31:13.055: E/AndroidRuntime(22860):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
 01-03 17:31:13.055: E/AndroidRuntime(22860):   at dalvik.system.NativeStart.main(Native Method)
 01-03 17:31:13.055: E/AndroidRuntime(22860): Caused by: android.view.InflateException: Binary XML file line #22: Error inflating class <unknown>
 01-03 17:31:13.055: E/AndroidRuntime(22860):   at android.view.LayoutInflater.createView(LayoutInflater.java:518)
 01-03 17:31:13.055: E/AndroidRuntime(22860):   at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
 01-03 17:31:13.055: E/AndroidRuntime(22860):   at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:568)
 01-03 17:31:13.055: E/AndroidRuntime(22860):   at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
 01-03 17:31:13.055: E/AndroidRuntime(22860):   at android.view.LayoutInflater.rInflate(LayoutInflater.java:626)
 01-03 17:31:13.055: E/AndroidRuntime(22860):   at android.view.LayoutInflater.rInflate(LayoutInflater.java:626)
 01-03 17:31:13.055: E/AndroidRuntime(22860):   at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
 01-03 17:31:13.055: E/AndroidRuntime(22860):   at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
 01-03 17:31:13.055: E/AndroidRuntime(22860):   at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
 01-03 17:31:13.055: E/AndroidRuntime(22860):   at com.actionbarsherlock.internal.ActionBarSherlockCompat.setContentView(ActionBarSherlockCompat.java:857)
 01-03 17:31:13.055: E/AndroidRuntime(22860):   at com.actionbarsherlock.app.SherlockActivity.setContentView(SherlockActivity.java:218)
 01-03 17:31:13.055: E/AndroidRuntime(22860):   at com.nn.HomeScreen.onCreate(HomeScreen.java:205)
 01-03 17:31:13.055: E/AndroidRuntime(22860):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
 01-03 17:31:13.055: E/AndroidRuntime(22860):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
 01-03 17:31:13.055: E/AndroidRuntime(22860):   ... 11 more
 01-03 17:31:13.055: E/AndroidRuntime(22860): Caused by: java.lang.reflect.InvocationTargetException
 01-03 17:31:13.055: E/AndroidRuntime(22860):   at java.lang.reflect.Constructor.constructNative(Native Method)
 01-03 17:31:13.055: E/AndroidRuntime(22860):   at java.lang.reflect.Constructor.newInstance(Constructor.java:415)
 01-03 17:31:13.055: E/AndroidRuntime(22860):   at android.view.LayoutInflater.createView(LayoutInflater.java:505)
 01-03 17:31:13.055: E/AndroidRuntime(22860):   ... 24 more
 01-03 17:31:13.055: E/AndroidRuntime(22860): Caused by: java.lang.OutOfMemoryError: bitmap size exceeds VM budget
 01-03 17:31:13.055: E/AndroidRuntime(22860):   at android.graphics.Bitmap.nativeCreate(Native Method)
 01-03 17:31:13.055: E/AndroidRuntime(22860):   at android.graphics.Bitmap.createBitmap(Bitmap.java:477)
 01-03 17:31:13.055: E/AndroidRuntime(22860):   at android.graphics.Bitmap.createBitmap(Bitmap.java:444)
 01-03 17:31:13.055: E/AndroidRuntime(22860):   at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:349)
 01-03 17:31:13.055: E/AndroidRuntime(22860):   at android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:498)
 01-03 17:31:13.055: E/AndroidRuntime(22860):   at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:473)
 01-03 17:31:13.055: E/AndroidRuntime(22860):   at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:336)
 01-03 17:31:13.055: E/AndroidRuntime(22860):   at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:697)
 01-03 17:31:13.055: E/AndroidRuntime(22860):   at android.content.res.Resources.loadDrawable(Resources.java:1709)
 01-03 17:31:13.055: E/AndroidRuntime(22860):   at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
 01-03 17:31:13.055: E/AndroidRuntime(22860):   at android.widget.ImageView.<init>(ImageView.java:118)
 01-03 17:31:13.055: E/AndroidRuntime(22860):   at android.widget.ImageView.<init>(ImageView.java:108)
 01-03 17:31:13.055: E/AndroidRuntime(22860):   ... 27 more 
```

谁能解释一下日志文件？因为我不明白主要问题是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T13:32:20.203

主要问题是

```
 java.lang.OutOfMemoryError: bitmap size exceeds VM budget 
```

只有一定数量的内存分配给您的应用程序用于加载位图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T13:36:41.690

请尝试如下方法。并提供有关 listitem.xml 的详细信息

```
public View getView(final int position, View convertView, ViewGroup parent) {
            System.out.println("***********IngetView************");
            LayoutInflater inflater = (LayoutInflater) context
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

            //View Listview;
            final ViewHolder viewHolder ;

            if (convertView == null) {
                //viewHolder = new ViewHolder();
                //Listview = new View(context);
                viewHolder = new ViewHolder();
                // get layout from gridlayout.xml
                convertView = inflater.inflate(R.layout.list_item, null);

            } else {
                //Listview = (View) convertView;
                viewHolder = (ViewHolder) convertView.getTag();

            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T13:33:42.637

您的位图太大：

01-03 17:31:13.055：E/AndroidRuntime(22860)：原因：java.lang.OutOfMemoryError： **位图大小超出 VM 预算**

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-04T13:31:37.907

日志中有“Caused by:”语句，主要问题是这样的：

`Caused by: android.view.InflateException: Binary XML file line #22: Error inflating class <unknown>`

这意味着您在 xml 文件中，并且 xml inflater 不知道`Something`对应的类。

# magento - 多个国家/地区的 Magento 税率

> ID：14158123
> 
> 赞同：1
> 
> 时间：2013-01-04T13:30:14.277
> 
> 标签：magento, countries

我想将我们的 Magento CE 1.7 商店更改为多商店。所以 2 个国家，每个国家都有自己的商店，但基于相同的产品。

现在第二个国家有不同的税率，但两个商店的总价格应该是一样的。

我已经根据当前县设置了税收计算（在系统配置中设置）。所以每个商店都采用正确的税率。当然也改变了第二个国家的税率。

但是现在店里的毛价不一样了。甚至产品价格也已包含税率。他们仍然被重新计算。

例如，县 1 有 19% 的税收，国家​​ 2 有 20% 的产品 1 在后端和前端的价格为 70,90。在国家 2 中，它在前端显示 71,50。

我不想为第二个国家/地区的每种产品设置新价格。有没有办法避免重新计算？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T14:40:00.620

我想我找到了解决方案。

我还必须在系统中设置 -> 销售 -> 运输设置 -> 原产国到另一个国家。更改默认税收目的地计算国家和定义税收规则是不够的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T22:42:15.720

要按网站/视图保留特定价格，您通常会执行 catalog->item->price ，从下拉列表（左上角）中选择网站/商店视图，选择价格选项卡，取消选择使用默认值并将价格更改为您想要显示的内容。

当目录价格 = 含税时，更改运输/原产地地址控制采用哪种税率。

否则系统会通过计算不含税价格然后应用新商店/客户的税率来动态重新计算含税价格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-24T07:44:37.173

你应该看看这个，[https://github.com/WMI/WMG_Tax](https://github.com/WMI/WMG_Tax)，它会正确地重新计算增值税。

# wpf - VB.net 中的光标大小是否有限制

> ID：14158124
> 
> 赞同：1
> 
> 时间：2013-01-04T13:30:17.883
> 
> 标签：wpf, windows, vb.net, cursor

我的应用程序在运行时使用从预定义文件 (.cur) 加载的自定义光标。我知道 Windows 使用标准的 32x32 像素光标或 48x48 像素光标用于高 DPI 设备。

然而，我想在我的应用程序中使用的光标要大得多。当我使用`Mouse.SetCursor(_CustomCursor)`. When a larger cursor is chosen, I don't see any cursor. 光标似乎正确加载但无法显示。

注意：目前静态 .cur 游标是可以接受的。

有没有办法在我的应用程序中显示更大的光标，如果大小有限制，那是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T08:15:41.590

所以我设法找到解决尺寸限制问题的方法。

正如[BitMap 中的光标](http://bytes.com/topic/visual-basic-net/answers/375571-cursor-bitmap)所提到的，可以从位图中创建任意大小的光标。

实现这一点的代码如下：

```
Dim bm As New Bitmap(60, 60)                 'Or from a bitmap file
Dim g As Graphics = Graphics.FromImage(bm)   
g.FillRectangle(Brushes.Blue, 0, 0, 60, 60)  'For a simple blue rectangle cursor
Dim ptrCur As IntPtr = bm.GetHicon
Dim CustomCursor As Cursor
CustomCursor = New Cursor(ptrCur)
Me.Cursor = CustomCursor                     'Set the application cursor to be custom 
```

热点自动设置在位图的中心。这是结果的预览：

![大蓝色光标](../Images/c5072352db1be29e40ba8799b894ea4b.png)

此代码在 Windows 窗体应用程序上运行良好。对于 WPF 应用程序，会引发“游标的无效扩展”异常。将研究解决它（欢迎任何建议）。

**编辑：**在 WPF 中，96 像素的限制应用于光标的任何尺寸，任何更大的都不会显示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T13:44:39.483

> 光标大小有限制吗？

是的，这是系统限制。不仅适用于 VB.NET...

要获得可以使用的最大光标大小，您应该查询[SystemParameters.CursorHeight](http://msdn.microsoft.com/en-us/library/system.windows.systemparameters.cursorheight%28v=vs.100%29.aspx)和[SystemParameters.CursorWidth](http://msdn.microsoft.com/en-us/library/system.windows.systemparameters.cursorwidth%28v=vs.100%29.aspx)属性。

正如 MSDN 所述，这些属性分别映射到`SM_CYCURSOR`和`SM_CXCURSOR`属性。正如您在[MSDN中所读到的](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724385%28v=vs.85%29.aspx)

> SM_CXCURSOR 13 光标的宽度，以像素为单位。***系统无法创建其他大小的游标。***

和

> SM_CYCURSOR 14 光标的高度，以像素为单位。***系统无法创建其他大小的游标。***

# java - windows下tomcat的system.out.println写在哪里？

> ID：14158131
> 
> 赞同：14
> 
> 时间：2013-01-04T13:30:41.813
> 
> 标签：java, tomcat, logging, log4j

我正在使用用于记录 system.out.println 语句的第三方库（无法修改）。输出在控制台中显示正常，但我无法在 catalina[...].log 文件中检索这些信息？

是否可以将它们发送到 log4j？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-08-30T15:18:18.063

在 unix 上运行 Tomcat 时，控制台输出通常重定向到名为**catalina.out**的文件。该名称可使用环境变量进行配置。（请参阅启动脚本）。

[http://tomcat.apache.org/tomcat-7.0-doc/logging.html#Console](http://tomcat.apache.org/tomcat-7.0-doc/logging.html#Console)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-04T13:32:40.757

`System.out.println()`打印到标准输出。因此，如果您想在日志文件中查看这些语句，您可以在 Tomcat 启动脚本中将标准输出重定向到您想要的位置。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-03-06T18:15:53.547

您也可以在 cat /var/log/messages 中找到这些日志

如果你试试

```
cat /var/log/messages | grep server 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-02-14T20:31:31.907

如果您正在运行 JSP，那么您需要添加

```
 <%@ page isThreadSafe="false"  %> 
```

然后您的所有 System.out.printlns 将开始显示在 catalina.out 文件中。

如果您从命令行运行 Catalina.sh 启动 tomcat，您将在输出中看到打印结果。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-04T13:35:05.460

你可以在里面找到它`TOMCAT_HOME/logs/stdout_20130104.txt`（文件名可能会改变，但日志文件通常在文件夹中`TOMCAT_HOME/logs/`。

对我来说，我的代码中的所有系统输出都写在这样的文件中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-05-02T20:32:03.857

在我的情况下（Fedora 29 apache-tomcat-8.5.39），它位于**日志文件夹内的****catalina.out**文件中。

# javascript - 在不触发 Sammy 事件的情况下更改哈希

> ID：14158134
> 
> 赞同：12
> 
> 时间：2013-01-04T13:30:46.957
> 
> 标签：javascript, knockout.js, sammy.js

```
function UsersVM(start_page){
  var self = this;
  console.log('start form ' + start_page);
  self.go_to = function(page) {
    location.hash = '#Users/' + pageNumber;     
  }
}

Sammy(function() {
    this.get('/app/?#Users/:page', function () {
        var vm = new  UsersVM(this.params.page);
        ko.applyBinding(vm);               
    });
}).run(); 
```

我想使用以下代码更改页面的哈希：

```
 location.hash = '#Users/' + pageNumber; 
```

但在这种情况下，Sammy 会触发路由。在 Backbone 中说，我们可以这样做：

```
 app.navigate("help/troubleshooting", {trigger: false}); 
```

在 Sammy 中可以做到吗？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-09-13T13:15:35.530

我不知道在 Sammy 中执行此操作的本地方法，但这里有一个对我有用的解决方案：

```
var sam = $.sammy(function () {
    var sammy = this; //get a persistent reference to this

    sammy.quiet = false; //set quiet to false by default

    //I set quiet to true before running a route
    sammy.quietRoute = function (location) {
        sammy.quiet = true;
        sammy.setLocation(location);
    }

    //I'm called after every route to reset quiet to false
    sammy.after(function () {
        sammy.quiet = false;
    });

    //I'm a 'normal' route that does not have the capability to be 'quiet'
    this.get('#normalRoute', function () { 
        //routing code 
    });

    //I am a route that can be 'quieted' so that when the url or 
    //hash changes my routing code doesn't run
    this.get('#quietableRoute', function () {
        if (!sammy.quiet) {
            //routing code
        } else {
            return;
        }
    });

}); 
```

然后在代码中调用 quietRoute 函数：

```
//This will work
sam.quietRoute("#quietableRoute");

//This will not work because the "if(!sammy.quiet)..." code has not been 
//implemented on this route
sam.quietRoute("#normalRoute"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T03:53:16.053

使用以下代码：

```
var new_location = '#foo';
app.trigger('redirect', {to: new_location});
app.last_location = ['get', new_location];
app.setLocation(new_location); 
```

# iphone - 远程捕获 iphone 设备的屏幕。

> ID：14158137
> 
> 赞同：-2
> 
> 时间：2013-01-04T13:30:58.053
> 
> 标签：iphone, ios

> **可能重复：**
> [以编程方式捕获屏幕视频](https://stackoverflow.com/questions/8278248/programatically-capture-video-of-screen)

我正在构建一个应用程序，我必须在其中远程捕获 iPhone 手机（有根手机）的屏幕......意味着我必须远程捕获从一部 iPhone 到另一部 iPhone 的屏幕......

请建议我...

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T13:54:40.670

要以编程方式捕获屏幕快照，您可以：

```
#import <QuartzCore/QuartzCore.h>

- (void)saveScreenSnapshot:(UIView *)view
{
    UIGraphicsBeginImageContext(view.frame.size);
    [view.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    // do what you want with this image; I frequently just drop it in the device's photo album
    //
    // UIImageWriteToSavedPhotosAlbum(image, nil, nil, nil);
} 
```

或者，可以通过以下方式获得 PNG 表示`image`：

```
NSData *data = UIImagePNGRepresentation(image); 
```

您显然必须将其添加`QuartzCore.framework`到目标应用程序的库中。

# twitter-bootstrap - 带有 Twitter Bootstrap 弹出框的完整日历

> ID：14158141
> 
> 赞同：17
> 
> 时间：2013-01-04T13:31:19.443
> 
> 标签：twitter-bootstrap, fullcalendar, popover

我正在尝试让 Fullcalendar 与 twitter boostrap popovers 一起使用。
如果我单击一个事件，我想在弹出窗口中显示一些详细信息。
所以首先将这个 lil 片段添加到 Fullcalendar：

```
eventClick: function(event, jsEvent, view) {
        $this = $(this);
        $this.popover({html:true,title:event.title,placement:'top'}).popover('show');
        return false;            
    }, 
```

但现在我遇到了两个问题：

1.  Fullcalendar 位于具有溢出：隐藏或其他内容的 div 中，因为弹出框在 Fullcalendar 的边界上被剪切。我该如何解决？
2.  与问题 2 类似，我想通过函数将弹出框放置在顶部、左侧、右侧或底部，具体取决于事件在 Fullcalendar 网格中的位置。我怎么能做这样的功能？

谢谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-03T13:05:22.643

从 2.3 版开始，bootstrap 现在有一个用于弹出框的“容器”选项，它将弹出框附加到特定元素。

只需添加`{container:'body'}`以将其附加到正文

```
$this.popover({html:true,title:event.title,placement:'top',container:'body'}).popover('show'); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-09-24T04:52:25.870

This code helped me

```
$('#calendar').fullCalendar({
    eventRender: function (event, element) {
        element.popover({
            title: event.name,
            placement: 'right',
            content: + '<br />Start: ' + event.starts_at + '<br />End: ' + event.ends_at + '<br />Description: ' + event.description,
        });
    }
}); 
```

bootstrap version - 2.3.2, full calendar - 1.6.4

taken from [https://groups.google.com/forum/#!topic/twitter-bootstrap-stackoverflow/9pkC3_lodmY](https://groups.google.com/forum/#!topic/twitter-bootstrap-stackoverflow/9pkC3_lodmY)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-08-18T09:31:52.773

将弹出框附加到日历容器以使用日历滚动弹出框。

```
 $(jsEvent.target).popover({
                html: true,
                container:'#calendar',
                placement: 'right'
            }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-05T03:13:49.307

好几天 ;

```
 dayClick: function (date, jsEvent, view) {
            //return eventCreate(date, null, jsEvent, view);
            var CurrentDay = $(this);

            CurrentDay.popover({
                html: true,
                placement: 'auto',
                title: date.format(),
                container:'#calendar',
                content: function() {
                    setTimeout(function () {
                        CurrentDay.popover('hide');
                    }, 2000);
                    return $("#popover-day").html();
                }
            });
            CurrentDay.popover('toggle');
    }, 
```

对于事件；

```
 eventRender: function (event, element, view){
        var dStart = event.title
        element.popover({
            animation: true,
            placement: 'top',
            html: true,
            container: 'body',
            title: dStart,
            trigger: 'click',
            content: function() {
                setTimeout(function () {
                    element.popover('hide');
                }, 2000);
                return $('#popover-content').html();
            }
        });
    }, 
```

在您的 HTML 中；

```
<ul id="popover-content" class="list-group" style="display: none">
  <a href="#" id="Eventaaa" class="list-group-item" onclick="aaa();">aaa</a>
  <a href="#" id="Eventbbb" class="list-group-item" onclick="bbb();">bbb</a>
  <a href="#" id="Eventccc" class="list-group-item" onclick="ccc();">ccc</a>
</ul>

<ul id="popover-day" class="list-group" style="display: none">
  <a href="#" id="Dayaaa" class="list-group-item" onclick="fDayaaa();">aaa</a>
  <a href="#" id="Dayyyy" class="list-group-item" onclick="fDayyyy();">yyy</a>
  <a href="#" id="Dayxxx" class="list-group-item" onclick="fDayxxx();">xxx</a>
</ul> 
```

# java - Gson - 查询注册类型适配器？

> ID：14158143
> 
> 赞同：0
> 
> 时间：2013-01-04T13:31:20.770
> 
> 标签：java, gson

有没有办法查询 a`GsonBuilder`以找出哪些类已注册`JsonSerializer`与之关联？我可能自己可以跟踪它，但如果数据已经在`GsonBuilder`. 任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T15:25:46.997

不，没有。

您可以使用类中的`getAdapter()`方法`Gson`来获取特定类型的适配器，因此您可以检查任何特定类型的适配器......但没有办法返回所有这些适配器的列表。

# iphone - iPhone SQLite (FMDB) 查询耗时过长

> ID：14158147
> 
> 赞同：1
> 
> 时间：2013-01-04T13:31:34.663
> 
> 标签：iphone, sqlite, query-optimization, fmdb

我正在尝试执行一个包含**group by**子句的查询。
查询在 0.012243 秒内执行
但是当我执行**[resultset next]**时，第一次调用它需要超过 5 秒。

例子

```
NSMutableArray *recordsArray = [[NSMutableArray alloc] init];

NSString * query = @"select count(id), SUBSTR(purchase_date, 0,11) as purchase_date from sales where purchase_date LIKE '2012-12%' group by purchase_date order by purchase_date asc";

NSDate * date1 = [NSDate date];

FMResultSet * resultset = [database executeQuery:query];

NSDate * date2 = [NSDate date];
NSTimeInterval timeTaken = [date2 timeIntervalSinceDate:date1];
NSLog(@"TimeTaken: %f", timeTaken);     //outputs around 0.012

while ([resultset next])
{
    [recordsArray addObject:[resultset resultDictionary]];
}

date2 = [NSDate date];      
timeTaken = [date2 timeIntervalSinceDate:date1];
NSLog(@"TimeTaken 2: %f", timeTaken);   //outputs around 5.5 seconds 
```

我还能够确定所花费的所有时间都是在第一次调用**[resultset next]期间。**

我还尝试通过生成**UNION** 'ed 查询来修改查询以删除**group by子句**

 **```
NSString * query2 = @"select * from 
(
    select count(id), SUBSTR(purchase_date, 0,11) as purchase_date from sales where purchase_date = 2012-12-01
    UNION
    select count(id), SUBSTR(purchase_date, 0,11) as purchase_date from sales where purchase_date = 2012-12-02
    UNION
    select count(id), SUBSTR(purchase_date, 0,11) as purchase_date from sales where purchase_date = 2012-12-03
    ....
    UNION
    select count(id), SUBSTR(purchase_date, 0,11) as purchase_date from sales where purchase_date = 2012-12-31
) where purcase_date is not NULL order by purchase_date asc"; 
```

执行此查询也需要 0.2 秒，但第一次调用 [resultset next] 并且时间会增加到 7 秒以上。

**其他信息**
该表目前有 8000 多行，但对于我的一些用户来说，这个数字可能高达 100K。

我正在使用这些数据来绘制给定月份的销售趋势图。

在模拟器上，此查询在不到 0.5 秒的时间内执行，但在设备上则需要很多时间。

**问题**
您能指导我如何缩短此查询的时间吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T16:16:45.763

我确定最大的瓶颈是**SUBSTR**和**Group By**子句，执行和处理如下所示的简单查询只需要大约 0.02 秒

```
Select purchase_date from sales where purchase_date LIKE '2012-12%' order by purchase_date asc; 
```

所以我把它介绍为一个内部查询

```
Select count(purcahse_date) as count, SUBSTR(purchase_date, 0, 11) as purchase_date from
(
    Select purchase_date from sales where purchase_date LIKE '2012-12%'
)
group by purchase_date, order by purchase_date; 
```

尽管生成的数据与初始查询相同，但时间再次飙升至 5.5 秒左右。

所以最后我决定咬紧牙关，直到现在我的最终解决方案是获取给定月份的所有 purchase_date 记录并自己处理它们。

所以现在代码看起来像这样

```
while ([resultset next])
{
    [recordsArray addObject:[resultset resultDictionary]];
}
[resultset close];

[self closeDB];
        //release the db lock at this point

int array[31];    //maximum days in a month
bzero((void *)array, 31 * sizeof(int));     //initialize the month array

for(NSDictionary * d in recordsArray)    //read the records received from the db and add daily sales count
{
    NSRange r;
    r.location = 8;
    r.length = 2;
    int dDate = [[[d objectForKey:@"purchase_date"] substringWithRange:r] intValue];
    array[dDate-1]++;
}

[recordsArray removeAllObjects];

//refDate contains @"2012-12"
for(int i=0; i<31; i++)     //now populate the final array again
{
    if(array[i] > 0)
    {
        NSDictionary * d1 = [NSDictionary dictionaryWithObjectsAndKeys:[NSString stringWithFormat:@"%@-%02d", refDate, i+1], @"date", [NSNumber numberWithInt:array[i]], @"count", nil];
        [recordsArray addObject:d1];
    }
}

return recordsArray; 
```

我希望它可以帮助其他也陷入类似情况的人，或者某些 db guru 可能会提出比这个丑陋的解决方案更好的选择。**

# .htaccess - mod_rewrite 不起作用

> ID：14158151
> 
> 赞同：1
> 
> 时间：2013-01-04T13:31:42.253
> 
> 标签：.htaccess, mod-rewrite, web

我有以下页面名称

```
http://example.co.uk/vehicle.php?size=large 
```

我已经编写了以下重写规则，因此域应如下所示

```
http://example.co.uk/size/large 
```

这是规则

```
RewriteEngine On
RewriteRule ^size/([a-zA-Z0-9]+)/$ vehicle.php?size=$1 
```

我有两个问题：

*   首先是它不工作。事实上，它根本不起作用。
*   第二个是如果它确实有效，那么它将删除我不想要的页面名称。我首先很难看到我的错误以修复它，但我希望域如下所示：

```
http://example.co.uk/vehicle/size/large 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T13:37:12.673

如果您想从`/vehicle.php`URL 重定向到`/vehicle/`URL，请尝试以下操作：

```
RewriteEngine On
RewriteCond %{QUERY_STRING} ^(.*?)=(.*?)$
RewriteRule ^vehicle\.php /vehicle/%1/%2? [R=301,L] 
```

`/example.php?foo=bar`至于在干净的 URL (like )上显示 nonclean URLs (like ) 的内容，`/example/foo/bar`当尝试同时使用内部 (从 a 到 b) 和外部 (从 b 到 a) 重定向时，会出现循环重定向问题。

如果您决定切换到干净的 URL，那么我建议您将`/index.php`其用作*所有请求的唯一处理程序，并**仅*使用 mod_rewrite从旧 URL 重定向到干净的 URL。此外，我通常使用 PHP 执行大部分操作（`$_SERVER['REQUEST_URI']`通过 PHP 解析），并且仅使用 mod_rewrite 将所有请求映射到`index.php`文件：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L,QSA] 
```

这是最灵活、直接和便携的解决方案。

# javascript - 可以使用 Firebug 绕过选项卡上的 jQuery 验证，有没有办法防止这种情况？

> ID：14158153
> 
> 赞同：1
> 
> 时间：2013-01-04T13:31:44.307
> 
> 标签：javascript, jquery, javascript-events, javascript-security

安全问题。我有一个 jQuery 代码可以防止标签打开。因此，如果我单击任何选项卡，它会给我警报“拒绝访问”。

```
 $('#tabs').tabs({
                  select: function(event, ui) {
                        var valid = false;
                        if(!valid)
                        {
                           // prevent further action
                           alert('Access Denied');
                           event.preventDefault();
                        }
                  }
              }); 
```

但是因为我可以使用 Firebug 或任何其他工具更改脚本，所以我可以设置变量`valid`from `false`to`true`并且它允许我访问所有选项卡。有没有办法限制这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T13:33:32.707

使用 javascript 无法做到这一点，任何人都可以使用[Firebug](http://getfirebug.com/)、[Firefox Dev Tools](https://blog.mozilla.org/blog/2012/10/09/firefox-debuts-new-developer-toolbar/)、[IE Dev Tools](http://msdn.microsoft.com/en-us/library/dd565628%28v=vs.85%29.aspx)、[Chrome Dev Tools](https://developers.google.com/chrome-developer-tools/docs/overview)、[Fiddler](http://www.fiddler2.com/fiddler2/)等客户端工具来拦截和破解它。

如果您真的想阻止某人看到某些选项卡，则需要从服务器端阻止其内容。即：选项卡的内容不应呈现给客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T13:34:31.133

不，你不能限制这一点。您无法使用任何客户端脚本语言（例如 Javascript）来提供安全性。Javascript受最终用户控制，因此可以更改，您必须在服务器端进行；在这个阶段，您可以控制运行它的计算机。

# c# - 正在调用 AsQueryable 在 DbSet 上 “安全的”？

> ID：14158154
> 
> 赞同：5
> 
> 时间：2013-01-04T13:31:47.260
> 
> 标签：c#, .net, entity-framework-6

假设我想对实体框架的查询逻辑进行单元测试，一种方法是在构建表达式树之前将其转换为`DbSet<T>`以便于模拟。`IQueryable<T>`这是“安全的”吗？有什么需要注意的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T13:34:13.370

它不仅安全，而且合法且完全标准。这就是面向对象的全部内容。你只是垂头丧气。根据设计师定义的合同， A`DbSet`必须是。`IQUeryable`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-04T13:48:00.140

小心`AsQueryable()`。如果您的变量之一是`IQueryable<IEntity>`调用后的类型`AsQueryable()`，**那么您将不再知道该变量的具体类型是什么**（`DbSet<IEntity>`在您的示例中）。

虽然**从 OOP 的角度来看它是完全有效的**（这就是接口的全部意义！），但它可能会导致很多错误/错误。请记住，在枚举`DbSet<IEntity>`源之前，您实际上并没有执行查询。

这就是为什么例如您不能将内存中`IQueryable<IEntity>`（例如`new List<IEntity>{ ... }.AsQueryable()`）与`DbSet<IEntity>`using `.Union(...)`...

# stata - 如何从命令行确定 Stata 文件的 ds_format？

> ID：14158156
> 
> 赞同：4
> 
> 时间：2013-01-02T20:36:54.277
> 
> 标签：stata

我将这个 Perl 单行代码拼凑在一起，以确定某些文件的 Stata“ds_format”...

`for file in *.dta; do perl -MParse::Stata::DtaReader -e 'open my $fileHandle, "<", @ARGV; my $dta = new Parse::Stata::DtaReader($fileHandle); print "$ARGV[0] is in STATA ds_format " . $dta->{ds_format} ,"\n\n";' $file; done`

...但我认为有一种方法可以使用命令行`stata`命令来获取相同的信息。在那儿？上面的脚本为我的文件打印：

> study1a.dta 是 STATA ds_format 113
> 
> study1b.dta 是 STATA ds_format 115
> 
> study2.dta 是 STATA ds_format 115

也可以看看：

*   [http://www.stata.com/help.cgi?dta_113](http://www.stata.com/help.cgi?dta_113)
*   [http://www.stata.com/help.cgi?dta](http://www.stata.com/help.cgi?dta)
*   [http://search.cpan.org/dist/Parse-Stata-DtaReader/](http://search.cpan.org/dist/Parse-Stata-DtaReader/)
*   [http://stat.ethz.ch/R-manual/R-devel/library/foreign/html/read.dta.html](http://stat.ethz.ch/R-manual/R-devel/library/foreign/html/read.dta.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-20T16:11:14.240

现在，您只需读取文件的第一个字符即可确定版本。除了版本文件格式版本 117（当前适用于 Stata 13），版本将存储在 XML 中，因此必须增强此方法。

```
file open fhandle using dataset.dta, read binary
file read  fhandle %1s firstbytechar
file close fhandle
if "`firstbytechar'"=="<"{
    di "Version 117"
}
else {
    mata: st_numscalar("v", ascii("`firstbytechar'"))
    di "Version " v
} 
```

# c# - WCF服务不在同一台服务器上通信

> ID：14158158
> 
> 赞同：1
> 
> 时间：2013-01-04T13:32:12.253
> 
> 标签：c#, asp.net, wcf

WCF 部署在 IIS7 上，通过网络访问和网站（ASP.NET C#）也部署在同一台服务器上。通过网络 WCF 通信成功，但在 localhost 服务器上 WCF 不与网站通信。我对 wcf 的配置是

```
<system.serviceModel>
        <bindings>
            <basicHttpBinding>
                <binding name="BasicHttpBinding_IWITSService" closeTimeout="00:00:05"
                  openTimeout="00:00:05" receiveTimeout="00:10:00" sendTimeout="00:00:05"
                  bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
                  maxBufferPoolSize="524288" maxReceivedMessageSize="65536" messageEncoding="Text"
                  textEncoding="utf-8" useDefaultWebProxy="true">
                    <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                      maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                    <!--<reliableSession ordered="true" inactivityTimeout="00:10:00" />-->
                    <security mode="Message">
                        <transport clientCredentialType="Windows" proxyCredentialType="None" />

                    </security>
                </binding>
            </basicHttpBinding>
        </bindings>
        <client>
            <endpoint address="http://localhost:4570/WITSWCFService.svc"
              binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IWITSService"
              contract="WITS.IWITSService" name="BasicHttpBinding_IWITSService" >
                <identity>
                    <dns value="localhost" />
                </identity>
            </endpoint>
        </client>
    </system.serviceModel> 
```

和网站配置如下

```
<system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding  name="BasicHttpBinding_IWITSService" maxBufferSize="2147483647" maxReceivedMessageSize="2147483647" maxBufferPoolSize="524288">
          <readerQuotas maxDepth="32" maxStringContentLength="2147483647" 
            maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647"  />
        </binding>
      </basicHttpBinding>
      <!--<webHttpBinding>
        <binding maxBufferSize="2147483647" maxReceivedMessageSize="2147483647" />
      </webHttpBinding>-->
    </bindings>
    <services>
      <service name="WITSService.WITSService">
        <clear />
        <endpoint binding="basicHttpBinding" contract="WITSService.WITSService"   />
      </service>
    </services>

    <behaviors>
      <serviceBehaviors>
        <behavior>
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="false"/>

        </behavior>
      </serviceBehaviors>

    </behaviors>

  </system.serviceModel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T13:35:56.747

`localhost`仅在 或上运行`localhost:4570`。如果您使用端口`4570`，则需要在真实服务器上打开它。

如果您在浏览器中点击 URL，WCF 端点会返回什么，这通常很能说明问题。

# android - 为什么图像视图占用的空间比重量提到的要大？

> ID：14158159
> 
> 赞同：0
> 
> 时间：2013-01-04T13:32:15.450
> 
> 标签：android, android-linearlayout, android-imageview, android-xml

我的 XML 代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<LinearLayout
    android:id="@+id/rl_upload_header"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:minHeight="50dp" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/upload_activity"
        android:textSize="20sp"
        android:textStyle="bold" />
</LinearLayout>

<ScrollView
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="1" >

    <LinearLayout
        android:id="@+id/ll_middle"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:baselineAligned="false"
        android:gravity="center"
        android:orientation="horizontal" >

        <LinearLayout
            android:id="@+id/ll_img"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="2"
            android:gravity="center" >

            <ImageView
                android:id="@+id/image_view"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:layout_marginLeft="10dp"
                android:layout_marginRight="10dp"
                android:background="@drawable/app_icon_17"
                android:contentDescription="@string/empty" >
            </ImageView>
        </LinearLayout>

        <LinearLayout
            android:id="@+id/ll_eds"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="5"
            android:baselineAligned="false"
            android:gravity="center"
            android:orientation="vertical" >

            <EditText
                android:id="@+id/ed_img_name"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="10dp"
                android:layout_marginRight="10dp"
                android:layout_marginTop="20dp"
                android:background="@drawable/text_box_background"
                android:hint="@string/name"
                android:paddingLeft="12dp" />

            <EditText
                android:id="@+id/ed_amount"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="10dp"
                android:layout_marginRight="10dp"
                android:layout_marginTop="10dp"
                android:background="@drawable/text_box_background"
                android:hint="@string/amount"
                android:paddingLeft="12dp" />

            <EditText
                android:id="@+id/ed_desc"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginBottom="20dp"
                android:layout_marginLeft="10dp"
                android:layout_marginRight="10dp"
                android:layout_marginTop="10dp"
                android:background="@drawable/text_box_background"
                android:hint="@string/desc"
                android:paddingLeft="12dp" />
        </LinearLayout>
    </LinearLayout>
</ScrollView>

<LinearLayout
    android:id="@+id/rl_upload_bottom"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:baselineAligned="false"
    android:gravity="center"
    android:minHeight="70dp"
    android:orientation="horizontal" >

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:baselineAligned="false"
        android:gravity="center" >

        <Button
            android:id="@+id/button_upload"
            android:layout_width="120dp"
            android:layout_height="40dp"
            android:background="@drawable/upload" >
        </Button>
    </LinearLayout>

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:baselineAligned="false"
        android:gravity="center"
        android:minHeight="50dp" >

        <Button
            android:id="@+id/button_cancel"
            android:layout_width="120dp"
            android:layout_height="40dp"
            android:background="@drawable/discard" >
        </Button>
    </LinearLayout>
</LinearLayout>

</LinearLayout> 
```

在此`ImageVIew(id =image_view)`，我只想占用大约 25% 的屏幕空间（宽度），剩余宽度应由包含编辑文本（`id =ll_eds`）的布局占用。

但是当图像的宽度很大时，它几乎占据了屏幕宽度的 90%。

那我做错了什么？

大概我想要这种设计。

[![](../Images/1ed85551bbd5a67e0b4a165c764f8a3b.png)](https://i.stack.imgur.com/UtPTU.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T13:47:09.907

在. `layout_width`_ `0 dip`_ `layout_weight`_`View`

请参阅 Android 工程师 Romain Guy 的回答：[Android Layout Weight](https://stackoverflow.com/questions/4986861/android-layout-weight/4987097#4987097)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T13:57:26.247

如果尺寸看起来相反，请尝试切换图像和其他布局的权重。有时Android的权重系统很容易让人失望

如果@drawable/app_icon_17 是永久不变的图片，你可以试试RelativeLayout。您可以将图像锚定到屏幕的左侧，然后将另一个 ViewGroup 放在它的右侧。

# matlab - 将数据块读入matlab数组

> ID：14158165
> 
> 赞同：3
> 
> 时间：2013-01-04T13:32:23.420
> 
> 标签：matlab

我有一个如下所示的数据文件

```
3 1.0 1.4 1.7
2 1.2 1.5
1 1.1
2 1.1 1.2 
```

对于每一行，第一个整数表示该行中的浮点数。

现在我想将所有数据加载到单个matlab数组中，忽略第一列，即我想得到一个这样的数组

```
>>arr = [1.0, 1.4, 1.7, 1.2, 1.5, 1.1, 1.1, 1.2] 
```

如果对于每一行，我们有相同数量的浮点数，我可以简单地这样做

```
>>arr = load datafile ;
>>arr = arr(:,2:end) ; %ignore the first column
>>arr = arr(:) ; 
```

但是，如果我们在每一行中有不同数量的浮点数，似乎我们不能直接将文件加载到矩阵中。有什么简单的方法可以做到这一点吗？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T14:28:41.307

首先，让我们将数字读取为字符串：

```
C = textread('myfile.txt', '%s', 'delimiter', '\n'); 
```

结果是一个字符串的单元格数组，所以让我们`str2num`对每个单元格应用以获得数值：

```
C = cellfun(@str2num, C, 'Uniform', false); 
```

现在让我们丢弃每个单元格中的第一个元素：

```
C = cellfun(@(x)x(2:end), C, 'Uniform', false); 
```

最后，我们将所有值连接到一个向量中：

```
arr = [C{:}] 
```

这是完整的代码：

```
C = textread('test.txt', '%s', 'delimiter', '\n'); %// Read data
C = cellfun(@str2num, C, 'Uniform', false);        %// Convert to numbers
C = cellfun(@(x)x(2:end), C, 'Uniform', false);    %// Remove first values
arr = [C{:}]

arr = 
    1.0000    1.4000    1.7000    1.2000    1.5000    1.1000    1.1000    1.2000 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T14:20:04.007

一个简单的方法是逐行读取文件

```
fid = fopen('data.txt');
arr = [];
tline = fgetl(fid);
while (tline ~= -1)
    temp = str2num(tline);
    arr = [arr temp(2:end)];
    tline = fgetl(fid);
end 
```

您也可以尝试使用[称重传感器](http://www.mathworks.com/matlabcentral/fileexchange/1965)功能，虽然我没有尝试过，所以我不确定它是否适合您。

# asp.net-mvc - MVC 一个模型中的两个视图

> ID：14158166
> 
> 赞同：0
> 
> 时间：2013-01-04T13:32:25.930
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-mvc-viewmodel

我试图在一个模型中组合两个视图。但我不能让它太工作！

你能帮助我吗？

楷模：

```
 public class Player
{
    public int playerID { get; set; }

    [Required]
    [Display(Name = "Spelernaam:")]
    public String playerName { get; set; }

    [Display(Name = "Team:")]
    public int teamID { get; set; }

    public virtual Team Team { get; set; }

    [Required]
    [Display(Name = "Waarde:")]
    public int playerValue { get; set; }
}

public class Team
{
    public int teamID { get; set; }

    [Required]
    [Display(Name = "Teamnaam:")]
    public String teamName { get; set; }

    [Required]
    [Display(Name = "Teamwaarde:")]
    [Range(0, 100, ErrorMessage = "Waarde moet tussen de 0 en de 100 liggen")]
    public int teamValue { get; set; }

    [Required]
    [Display(Name = "Teambudget:")]
    [Range(0, 100000000, ErrorMessage = "Waarde moet tussen de 0 en de 100000000 liggen")]
    public int teamBudget { get; set; }

    [DefaultValue(0)]
    public int gamePoints { get; set; }

    public virtual ICollection<Player> Player { get; set; }
} 
```

我正在尝试在团队（脚手架）的详细信息页面中获取球员列表。

我已经尝试制作一个视图模型，它看起来像这样：

```
public class PlayersPerTeam
{
        public Team Team { get; set; }
        public Player Player { get; set; }
} 
```

但我认为控制器是问题

控制器：

```
//
    // GET: /Team/Details/5

    public ActionResult Details(int id = 0)
    {
        Team team = db.Teams.Find(id);
        if (team == null)
        {
            return HttpNotFound();
        }
        return View(team);
    } 
```

我希望你能帮我解决这个问题！多谢！

错误信息：

```
The model item passed into the dictionary is of type 'System.Data.Entity.DynamicProxies.Team_B041141ED3453289BD09E3CAC14C091B831E03C09FDA76FF2D783BDDCE179358', but this dictionary requires a model item of type 'HerkansingsOpdracht.Models.PlayersPerTeam'. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T14:15:29.190

这里的问题是您要么从控制器传递了错误的模型，要么您的视图期待错误类型的模型。

如果它是控制器，那么我相信您将需要更改类似于此的代码：

```
public ActionResult Details(int id = 0)
{
    PlayersPerTeam team = new PlayersPerTeam{Team = db.Teams.Find(id)};
    if (team == null)
    {
        return HttpNotFound();
    }
    return View(team);
} 
```

希望这会有所帮助。

# php - Html 表单无法连接到数据库

> ID：14158167
> 
> 赞同：-4
> 
> 时间：2013-01-04T13:32:27.387
> 
> 标签：php

我创建了一个 HTML 表单并试图将其链接到 PHP myadmin 数据库。但它说

警告：mysql_connect()：连接尝试失败，因为连接方没有

一段时间后正确响应，或建立连接失败，因为

连接的主机未能响应。在第 8 行的 C:\xampp\htdocs\form.php 中不能

connect：连接尝试失败，因为连接方没有正确响应

一段时间后，或建立连接失败，因为连接的主机失败

回应。我不知道为什么会这样。这是我下面的代码，

```
<?php

    define('DB_NAME','Registernewaccount');   
    define ('DB_USER' ,'root'); 
    define('DB_PASSWORD','12345'); 
    define('DB_HOST','localhost');  
    $link = mysql_connect('DB_HOST','DB_USER','DB_PASSWORD'); 

    if (!$link){  

        die('Could not connect:' . mysql_error());      
    } 

   $db_selected = mysql_select_db(DB_NAME,$link);        

   if(!$db_selected){         

       die('Can\'t use' .DB_NAME .':' . mysql_error());        
    }     

    mysql_close(); 

?> 
```

你能帮我么

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T13:35:36.243

考虑到我对你的设置一无所知。并假设您有一个数据库服务器启动并运行。可能是您在 mysql_connect 调用中引用了常量

改变

```
$link = mysql_connect('DB_HOST','DB_USER','DB_PASSWORD'); 
```

至

```
$link = mysql_connect(DB_HOST,DB_USER,DB_PASSWORD); 
```

# facebook - 我在哪里可以获得用户电子邮件？

> ID：14158168
> 
> 赞同：-1
> 
> 时间：2013-01-04T13:32:28.797
> 
> 标签：facebook, json, login

> **可能重复：**
> [Facebook Graph API，如何获取用户电子邮件？](https://stackoverflow.com/questions/3611682/facebook-graph-api-how-to-get-users-email)

好吧，在我的应用程序中，我要求用户授予我获取他的电子邮件的权限......假设他这样做......

根据API参考的代码，该`FB.getLoginStatus`函数返回一个Json Object，内容如下：

`{ status: 'connected', authResponse: { accessToken: '...', expiresIn:'...', signedRequest:'...', userID:'...' } }`

那么，假设用户已经接受了条款，并授予了我的应用程序的电子邮件权限，那么电子邮件值在哪里？它在一个新的孩子的`FB.getLoginStatus`反应？就像是：

`{ status: 'connected', authResponse: { accessToken: '...', expiresIn:'...', signedRequest:'...', userID:'...' userEmail:'....' } }`

在 PHP 中，我使用类似的东西：

`json_decode(file_get_contents('http://graph.facebook.com/SOMEIDHERE'))->name;`（例如，对 graph.facebook.com 的请求）

但这不是我要找的。

感谢您的关注。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T13:53:42.460

为了获取用户数据，您必须调用 API：
`http://graph.facebook.com/user_id`并且在响应中您将获得用户电子邮件（如果已批准电子邮件权限）。

# javascript - Javascript悬停单独的选择

> ID：14158169
> 
> 赞同：3
> 
> 时间：2013-01-04T13:32:31.580
> 
> 标签：javascript, html

我正在尝试使用 JavaScript 执行以下操作：

1.  当悬停在地图上时，它必须标记鼠标光标下方的区域。
2.  单击该选定区域时能够创建一个新窗口。

[[我已经取得的成就 - 将鼠标悬停在地图](http://www.qer.dk/qer.maphoover/docs/demo_features.html)左侧的矩形上

但是，我需要该区域用于除正方形和几何对象之外的其他事物。执行它的最佳/简单方法是什么，以便您可以选择下图中的区域？

[带有选择的图像](http://i47.tinypic.com/11iigdx.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T13:41:04.407

基本上你可以使用下面的区域标签：

```
<img src="planets.gif" width="145" height="126" alt="Planets"
usemap="#planetmap">

<map name="planetmap">
<area shape="rect" coords="0,0,82,126" href="sun.htm" alt="Sun">
<area shape="circle" coords="90,58,3" href="mercur.htm" alt="Mercury">
<area shape="circle" coords="124,58,8" href="venus.htm" alt="Venus">
</map> 
```

这是链接： [http ://www.w3schools.com/tags/tryit.asp?filename=tryhtml_areamap](http://www.w3schools.com/tags/tryit.asp?filename=tryhtml_areamap)

所以你可以为每个区域分配一个ID，你可以在javascript中为这些区域编写悬停、点击代码。

# sql - 将值与 SQl 中的表中的值进行比较

> ID：14158170
> 
> 赞同：0
> 
> 时间：2013-01-04T13:32:35.273
> 
> 标签：sql, sql-server, tsql

这是 MyTable 结构

```
MyTable : ID, Date 

Select ID, Date from MyTable

ID     Date

50    2013-01-01 00:00:00.000 
51    2013-01-02 00:00:00.000 
52    2013-01-02 00:00:00.000 
```

我需要得到这样的结果。

```
ID     Date

50    2013-01-01 00:00:00.000
50    2013-01-02 00:00:00.000
50    2013-01-03 00:00:00.000 

51    2013-01-02 00:00:00.000 
51    2013-01-03 00:00:00.000

52    2013-01-03 00:00:00.000 
```

我如何得到结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T13:37:35.213

似乎您想获取日期列表。因此，您可以使用递归 CTE 来获取日期列表：

```
;with data(id, date) as
(
  select id, date
  from mytable
  union all
  select id, dateadd(day, 1, date)
  from data
  where dateadd(day, 1, date) <= '1/3/2013'
)
select *
from data
order by id 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/5177d/2)。这将为表格中的当前日期和您提供的结束日期之间的每个 ID 生成日期列表。在我的例子中是`1/3/2013`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T14:52:03.063

我认为只有在 ID 列上有一个 CLUSTERED INDEX 时这会更快一些，否则 bluefeet 的解决方案非常棒！

```
SELECT T1.ID
        ,Date = DATEADD(DAY, -ROW_NUMBER() OVER (PARTITION BY T1.ID ORDER BY (SELECT NULL))+1, '2013-01-03')
FROM MyTable T1
JOIN MyTable T2 ON T1.ID <= T2.ID 
```

# android - 当用户来自应用程序外部而不是当用户在应用程序内部时如何调用方法

> ID：14158174
> 
> 赞同：2
> 
> 时间：2013-01-04T13:32:51.447
> 
> 标签：android

我想在用户按下主页按钮后重新启动活动时专门调用一个方法。

我试过了，但它不工作

```
@Override
 public void onRestart() {
    super.onRestart();
     // Do Here what ever you want do on back press;
    Log.d(TAG,"restart");
    blnIsApp=true;
 }
@Override
 public void onResume() {
     // Do Here what ever you want do on back press;        
    super.onResume();
    if(blnIsApp==false)
    {
        Log.d(TAG,"external");

    }else{
        Log.d(TAG,"internal");
    }
    blnIsApp=false;
 } 
```

# android - 在进度条上显示计算的百分比

> ID：14158175
> 
> 赞同：-7
> 
> 时间：2013-01-04T13:32:58.057
> 
> 标签：android

嗨，我想开发财务应用程序，我已经拿了总工资和花费的金额，即。交通、互联网、电费等.....我已经取值并添加并计算了百分比，但我无法在进度栏中显示计算的百分比。

```
int total = (amount1+amount2+amount3+amount4+amount5);
double final1=((double)total/amount)*100; 
```

这`final1`是计算的百分比现在这个百分比应该在进度条中表示

```
ProgressBar progressbar1 = new ProgressBar(this,null,android.R.attr.progressBarStyleHorizontal);
progressbar1 = (ProgressBar)findViewById(R.id.progressBar1);
progressbar1.setPadding(20, 10, 10, 10);
progressbar1.setScrollBarStyle(ProgressBar.SCROLLBARS_OUTSIDE_INSET);
progressbar1.setVisibility(View.VISIBLE);
progressbar1.setProgress(0);
progressbar1.setMax(100);
progressbar1.incrementProgressBy(FINAL1); 
```

这`final1`是 double 我们需要将其转换为整数，因为下面的语句将只接受整数

```
int a = (int)FINAL1;
int b = (int)Math.round(a);

progressbar1.incrementProgressBy(b); 
```

请帮助我，我从过去 4 天开始就被这个问题困住了

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T13:38:46.447

快速搜索“android 进度条示例”将我们指向[文档](http://developer.android.com/reference/android/widget/ProgressBar.html)。它表明您可以使用`progressBar.setProgress(int progress)`.

该`progress`变量应介于 ProgressBar 的最小值和最大值 ( `setMax()`) 之间。

如果您显示从 0 到 100 的进度，并且您的*总数*为 100，并且您的*value*或*final1*例如为 33，它将设置为 33%。

因此，要么将 progressBar 的最大值更改为您的*total*，要么将进度条的 min 和 max 属性之间的值标准化。

# java - 使用广播接收器接收长进程短信的最佳方式

> ID：14158176
> 
> 赞同：0
> 
> 时间：2013-01-04T13:32:57.970
> 
> 标签：java, android, broadcastreceiver

我是 Android 新手，这是我的第一个应用程序。

我有一个接收格式化短信的应用程序，我正在使用 BroadcastReceiver 来监听传入的消息。

在 onReceive 里面我有一个过程，它将检查数据库中的重复记录。（数据库有 500K+ 行）并保存它，如果没有重复。

是正确的还是我必须使用一些处理程序来处理这个过程？因为如果有传入消息，则应用程序会延迟响应。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T13:58:34.033

使用 a[`ExecutorService`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html)获取线程执行器服务，并向`Runnable`其提交任务。

```
//--dedicated thread to run tasks one after another--
private final ExecutorService s = Executors.newSingleThreadExecutor();

//--handle incoming sms--
public void handleSms(final String input, final SQLiteDatabase db){
    s.submit(new Runnable() {
        @Override
        public void run() {
            //--do stuff with input and db
        }
    });
} 
```

# php - Zend DB 多个连接不起作用

> ID：14158179
> 
> 赞同：0
> 
> 时间：2013-01-04T13:33:20.697
> 
> 标签：php, zend-db

我有以下代码，这样它不起作用。

```
 $query = $this->select()
    ->from(array('c' => 'contrato'),
            array('*'))
            ->setIntegrityCheck(false)
            ->join(array('ch'   => 'contrato_host'),'ch.id_host         = '.$id_host.' and ch.id_contrato = c.id_contrato', array())
            ->joinUsing('contrato_tipo', 'id_contrato_tipo', 'ds_contrato_tipo')
            ->joinUsing('fornecedor',   'id_fornecedor', 'razao_social')
    ->where('id_cliente     = ?', $id_cliente)
    ->order(array('id_contrato DESC')); 
```

但是当我使用它时我不知道为什么，但是当我手动编写代码时它可以工作

``$query = $this->select() ->from(array('c' => 'contrato'), array('*')) <br/>->setIntegrityCheck(false) <br/>->join(array('ch' => 'contrato_host'),'ch.id_host = '.$id_host.' and ch.id_contrato = c.id_contrato', array()) <br/>->where('id_cliente = ?', $id_cliente) <br/>->order(array('id_contrato DESC'));``

`SELECT contrato.*, contrato_tipo.ds_contrato_tipo, fornecedor.razao_social FROM [action].[dbo].[contrato] INNER JOIN [action].[dbo].[contrato_host] ON [contrato_host].id_host = 14 and [contrato_host].id_contrato = [contrato].id_contrato INNER JOIN [action].[dbo].[contrato_tipo] ON contrato_tipo.id_contrato_tipo = contrato.id_contrato_tipo INNER JOIN [action].[dbo].fornecedor ON fornecedor.id_fornecedor = contrato.id_fornecedor WHERE ([contrato].id_cliente = '1') ORDER BY "id_contrato" DESC`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T13:54:27.283

我以前没有使用过“joinUsing”功能，不妨试试这个：

```
$query = $this->select()
              ->from(array('c' => 'contrato'), array('*'))
              ->setIntegrityCheck(false)
              ->join(array('ch' => 'contrato_host'),'ch.id_host = '.$id_host.' and ch.id_contrato = c.id_contrato', array())
              ->join(array('ct' => 'contrato_tipo'), 'ct.id_contrato_tipo = c.id_contrato_tipo', 'ds_contrato_tipo')
              ->join(array('f' => 'fornecedor'), 'f.id_fornecedor = c.id_fornecedor', 'razao_social')
              ->where('c.id_cliente = ?', $id_cliente)
              ->order(array('c.id_contrato DESC')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T13:43:53.697

如果您可以格式化其他代码块，那将会很有帮助。并且还请从以下位置发布值：

```
echo $query->__toString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T14:28:53.727

```
$query = $this->select()
->from(array('c'=>'contrato'),
        array('*'))
        ->setIntegrityCheck(false)
        ->join(array('ch'=>'contrato_host'),'ch.id_host='.$id_host.' and ch.id_contrato = c.id_contrato', array())
        ->join('contrato_tipo','id_contrato_tipo','ds_contrato_tipo',array())
        ->join('fornecedor','id_fornecedor', 'razao_social',array())
->where('id_cliente= ?',$id_cliente)
->order(array('id_contrato DESC')); 
```

# java - 如何在 gwt 中以编程方式创建鼠标滚轮事件

> ID：14158180
> 
> 赞同：1
> 
> 时间：2013-01-04T13:33:23.253
> 
> 标签：java, gwt, mouseevent

我正在使用 gwt-test-utils 为我的 gwt 项目编写测试用例。我需要在谷歌网络工具包中以编程方式调度鼠标滚轮事件。

`com.google.gwt.user.client.Event;`

我试过这段代码

```
Event event = EventBuilder.create(Event.ONMOUSEWHEEL).build();      
Browser.dispatchEvent(myUIComponent,event ); 
```

该事件已成功创建并被触发。

我添加了一个事件监听器来监听鼠标滚轮事件

```
myUIComponent.addMouseWheelHandler(new MouseWheelHandler() {
        public void onMouseWheel(MouseWheelEvent event) {

            if (event.isNorth()) {

            } else {

            }

        }
    }); 
```

但是当事件侦听器被执行时，我在执行时收到一条错误消息`event.isNorth()`。

堆栈跟踪如下

```
java.lang.UnsupportedOperationException: Abstract method 'DOMImpl.eventGetMouseWheelVelocityY()' is not patched by com.googlecode.gwt.test.internal.AutomaticPatcher
at com.google.gwt.dom.client.DOMImpl.eventGetMouseWheelVelocityY(DOMImpl.java)
at com.google.gwt.dom.client.NativeEvent$.getMouseWheelVelocityY$(NativeEvent.java:175)
at com.google.gwt.event.dom.client.MouseWheelEvent.getDeltaY(MouseWheelEvent.java:73)
at com.google.gwt.event.dom.client.MouseWheelEvent.isNorth(MouseWheelEvent.java:84)
at com.rubirules.uibuilder.client.TimePicker$4.onMouseWheel(TimePicker.java:227)
at com.google.gwt.event.dom.client.MouseWheelEvent.dispatch(MouseWheelEvent.java:100)
at com.google.gwt.event.dom.client.MouseWheelEvent.dispatch(MouseWheelEvent.java:23)
at com.google.web.bindery.event.shared.EventBus.dispatchEvent(EventBus.java:40)
at com.google.web.bindery.event.shared.SimpleEventBus.doFire(SimpleEventBus.java:193)
at com.google.web.bindery.event.shared.SimpleEventBus.fireEvent(SimpleEventBus.java:88)
at com.google.gwt.event.shared.HandlerManager.fireEvent(HandlerManager.java:127)
at com.google.gwt.user.client.ui.Widget.fireEvent(Widget.java:129)
at com.google.gwt.event.dom.client.DomEvent.fireNativeEvent(DomEvent.java:116)
at com.google.gwt.user.client.ui.Widget.onBrowserEvent(Widget.java:177)
at com.google.gwt.user.client.ui.ValueBoxBase.onBrowserEvent(ValueBoxBase.java:252)
at com.googlecode.gwt.test.utils.events.Browser.dispatchEventWithBubble(Browser.java:969)
at com.googlecode.gwt.test.utils.events.Browser.dispatchEventInternal(Browser.java:921)
at com.googlecode.gwt.test.utils.events.Browser.dispatchEventsInternal(Browser.java:946)
at com.googlecode.gwt.test.utils.events.Browser.dispatchEvent(Browser.java:313)
at com.rubirules.uibuilder.client.TimePickerTest.testHoursScrollUp(TimePickerTest.java:30)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:73)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:46)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:180)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:41)
at org.junit.runners.ParentRunner$1.evaluate(ParentRunner.java:173)
at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
at org.junit.runners.ParentRunner.run(ParentRunner.java:220)
at com.googlecode.gwt.test.internal.junit.GwtBlockJUnit4ClassRunner.run(GwtBlockJUnit4ClassRunner.java:27)
at com.googlecode.gwt.test.internal.junit.AbstractGwtRunner.run(AbstractGwtRunner.java:47)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

当从实际的鼠标滚轮事件触发事件时，这可以正常工作。我的活动创建有问题吗？建议手动创建事件的最佳方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T06:16:47.410

向上移动鼠标滚轮调度事件：

```
Event ev = EventBuilder.create(Event.ONMOUSEWHEEL).setMouseX(KeyCodes.KEY_DOWN).build();
MouseWheelVelocity evnt = new MouseWheelVelocity(ev); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T14:36:03.463

您必须手动修补此方法，因为它似乎不包括在内。

有关详细信息，请参阅[http://code.google.com/p/gwt-test-utils/issues/detail?id=156](http://code.google.com/p/gwt-test-utils/issues/detail?id=156)。

您将需要创建一个 Patcher 对象来模拟您希望从 DOMImpl.eventGetMouseWheelVelocityY() 返回的值。这可能是有问题的，因为 DOMImpl 被延迟绑定到多个运行时目标，而且我对 gwt-test-utils 不够熟悉，无法告诉您是否可以修补它。

如果您无法修补 DOMImpl，请改为修补 MouseWheelEvent.isNorth()。

# java-me - 如何使用j2me并排放置复选框

> ID：14158181
> 
> 赞同：1
> 
> 时间：2013-01-04T13:33:25.307
> 
> 标签：java-me, midp, lcdui

我们正在开发一个移动应用程序。我们希望并排放置多个复选框以进行多选。

尝试在各种博客上搜索不同的解决方案，无法找到它。

我尝试了以下代码：

```
 public Student_Att_App() {
  form = new Form("Technologies");
  technology = new ChoiceGroup("Select Technology Which You Know",Choice.MULTIPLE);
  exit = new Command("Exit", Command.EXIT, 1);
  choose = new Command("Choose", Command.SCREEN, 2);  
  }

  public void startApp() {
  display = Display.getDisplay(this);
  technology.append("1", null);
  technology.append("2", null);
  technology.append("3", null);
  technology.append("4", null); 

  index = form.append(technology); 
```

但它在另一个下方提供了多个复选框，我需要它并排。

# drupal-7 - 在视图中使用 Drupal7 自定义实体

> ID：14158183
> 
> 赞同：2
> 
> 时间：2013-01-04T13:33:30.387
> 
> 标签：drupal-7, entity, drupal-views

我在 drupal 7 中使用 hook_entity_info 创建了两个自定义实体。这些实体是为给定的数据库表创建的。我可以分别为每个实体创建一个视图。但是想一起创建两个实体的视图。视图中的“关系”选项显示“没有可用的关系”。并且添加字段选项仅显示选定实体的字段。

我如何关联这两个实体？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:55:22.043

我能够提供两种解决方案：

1）使用关系，关系结束字段，关系UI

2）使用`hook_views_data_alter`商务模块中的示例：

```
 Function hook_views_data_alter(){ 
             // Expose the uid as a relationship to users.
             $data['users']['uc_orders'] = array(
                 'title' => t('Orders'),
                 'help' => t('Relate a user to the orders they have placed. This relationship will create one record for each order placed by the user.'),
                 'relationship' => array(
                     'base' => 'uc_orders',
                     'base field' => 'uid',
                     'relationship field' => 'uid',
                     'handler' => 'views_handler_relationship',
                     'label' => t('orders'),
                 ),
             );
         } 
```

# delphi - Delphi XE 3 形式的动画 gif

> ID：14158186
> 
> 赞同：3
> 
> 时间：2013-01-04T13:33:33.433
> 
> 标签：delphi, animation, gif, delphi-xe3, timage

> **可能重复：**
> [如何以 delphi 形式使用动画 Gif](https://stackoverflow.com/questions/9573572/how-to-use-animated-gif-in-a-delphi-form)

我最近将我的**Delphi 7**版本更新为**Delphi XE3**。

使用Delphi 7，我使用组件将GIF放在TImage上，delphi XE3已经与gif兼容，无需安装任何额外的第三方组件。

我的问题是：当我将 gif 附加到 TImate 时，它​​变成静态的，只显示第一帧。

有什么命令吗？像 Image1.Play 什么的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-04T14:02:38.000

所需单位：

```
uses Vcl.Imaging.GIFImg 
```

动画代码：

```
TGIFImage(Image1.Picture.Graphic).Animate := True; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-04T14:39:43.143

要开始动画，请执行以下操作：

```
(Image1.Picture.Graphic as TGIFImage).AnimateLoop := glEnabled;
(Image1.Picture.Graphic as TGIFImage).Animate := true; 
```

要控制动画速度，请将`AnimationSpeed`属性设置在 0..1000 之间，默认值为 100。

另请参阅@DavidHeffernan 的回答，[How to use Animated Gif in a delphi form](https://stackoverflow.com/a/9573900/576719)

# javascript - javascript在循环中向json对象添加值

> ID：14158190
> 
> 赞同：1
> 
> 时间：2013-01-04T13:33:49.973
> 
> 标签：javascript, json

我正在为对象列表中的每个对象添加一个值。但我不知道为什么它为每个循环中的每个对象添加日期。

这是我的代码：

```
var emptyday: {
    "date":""
}

//make list of days in month
var monthlist = [];
for (i=0;i<=days_in_months;i++) {
    monthlist[i] = emptyday;
} 
```

因此，在我的示例中，可以说 days_in_months 是 31（天）

现在是添加

```
for (x=1;x<=days_in_months;x++) {

    console.log(x);
    if (x<10) {
        daynumber = "0" + x;
    } else {
        daynumber = x;
    }

    datestring = year + "-"+ (month+1) + "-" + daynumber;

    dayofmonth = monthlist[x]; 
    dayofmonth["date"] = datestring;
            //monthlist[x].date = datestring;

} 
```

当我尝试添加 (dayofmonth["date"] = datestring or monthlist[x].date) 时，它会添加到每个循环中所有对象的所有日期值。

第一个循环的 console.log 看起来像这样：

[对象{日期=“2013-1-01”}，对象{日期=“2013-1-01”}，对象{日期=“2013-1-01”}，对象{日期=“2013-1-01 "}、对象 { 日期 = "2013-1-01"}、对象 { 日期 = "2013-1-01"} 等

在第一个循环中进行了 31 次

在最后一个循环中，它将是 2013-1-31

我不明白为什么它会为所有对象添加该值。我已经尝试过 console.log 和到处调试以读出值并试图了解出了什么问题，但仍然没有找到解决方案

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T13:39:42.280

数组中的引用都指向同一个对象。Javascript 是按值传递的。所以当你这样做时

```
//make list of days in month
var monthlist = [];
for (i=0;i<=days_in_months;i++) {
    monthlist[i] = emptyday;
} 
```

您将**引用的副本放在`emptyday`数组中的每个位置**。由于引用的副本都指向同一个对象字面量，因此您有一个对一个对象的引用数组。

您需要每次通过列表创建一个新的对象文字。

```
var monthlist = [];
for (i=0;i<=days_in_months;i++) {
    monthlist[i] = {
       date: ""
    };
} 
```

# qt - Qt - QTreeView 和带有复选框列的自定义模型

> ID：14158191
> 
> 赞同：5
> 
> 时间：2013-01-04T13:33:57.803
> 
> 标签：qt, checkbox, qtreeview, qabstractitemmodel

我想要一个树视图，它在各个列中显示项目名称、项目描述和两个相关的布尔值。我从修改[Editable Tree Mode 示例](http://doc.qt.io/qt-5/qtwidgets-itemviews-editabletreemodel-example.html)开始，所以有一个 TreeModel 跟踪一组 TreeItem，每个 TreeItem 不仅有一个子 TreeItem 列表，还有一个 QVariants 列表，它存储一组值，以后可以显示在 QTreeView 的列中。

我设法为两个布尔值添加了另外两列。我还在网上搜索了如何为 QTreeView 和 QAbstractItemModel 添加复选框。我设法让两个布尔列上的复选框以及树层次结构的其余部分正常工作。然而，每列中的所有项目现在都呈现一个复选框和一行文本。

[![带有复选框的 Qt TreeView](../Images/ea1f48efc7596f40c25a05a507fbc818.png)](https://i.stack.imgur.com/Wpvbt.jpg)

这是我从示例中修改的部分，主要在 TreeModel 中。

**树模型.cpp：**

```
bool TreeModel::isBooleanColumn( const QModelIndex &index ) const
{
    bool bRet = false;
    if ( !index.isValid() )
    {
    }
    else
    {
        bRet = ( index.column() == COLUMN_BOL1 ) || ( index.column() == COLUMN_ BOL2 );
    }
    return bRet;
}

Qt::ItemFlags TreeModel::flags(const QModelIndex &index) const
{
    if (!index.isValid())
        return 0;
    if ( isBooleanColumn( index ) )
    {
        return Qt::ItemIsEnabled | Qt::ItemIsUserCheckable;
    }
    else
    {
        return Qt::ItemIsEditable | Qt::ItemIsEnabled | Qt::ItemIsSelectable;
    }
}

QVariant TreeModel::data(const QModelIndex &index, int role) const
{
    if (!index.isValid())
        return QVariant();
    if (role != Qt::DisplayRole && role != Qt::EditRole && role != Qt::CheckStateRole )
        return QVariant();
    TreeItem *item = getItem(index);
    if ( role == Qt::CheckStateRole && isBooleanColumn( index ) )
    {
        Qt::CheckState eChkState = ( item->data( index.column() ).toBool() ) ? Qt::Checked : Qt::Unchecked;
        return eChkState;
    }
    return item->data(index.column());
}

bool TreeModel::setData(const QModelIndex &index, const QVariant &value,
                        int role)
{
    if (role != Qt::EditRole && role != Qt::CheckStateRole )
        return false;
    TreeItem *item = getItem(index);
    bool result;
    if ( role == Qt::CheckStateRole && isBooleanColumn( index ) )
    {
        Qt::CheckState eChecked = static_cast< Qt::CheckState >( value.toInt() );
        bool bNewValue = eChecked == Qt::Checked;
        result = item->setData( index.column(), bNewValue );
    }
    else
    {
        result = item->setData(index.column(), value);
    }
    if (result)
        emit dataChanged(index, index);
    return result;
} 
```

**主窗口.cpp：**

```
MainWindow::MainWindow(QWidget *parent)
: QMainWindow(parent)
{
    …
    QStringList headers;
    headers << tr("Title") << tr("Description") << tr("Hide") << tr("Lock");
    QFile file(":/default.txt");
    file.open(QIODevice::ReadOnly);
    TreeModel *model = new TreeModel(headers, file.readAll());
    file.close();

    …
} 
```

非布尔列下的复选框不响应用户输入，并且布尔列下的文本不可编辑。所以功能方面没有错，但就 UI 而言仍然很麻烦。

我正在让 QTreeWidget 做同样的事情。同时，我不禁想知道我在这里是否还缺少其他东西。我听说一种解决方案是有一个自定义委托；那是唯一的选择吗？

如果有人能指出我还需要做什么，或者提供类似的例子，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-19T18:58:20.163

我认为问题出在 Data 方法中。当角色为 CheckStateRole 但列不是布尔值时，您应该返回 QVariant()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-14T12:19:28.343

我有这个问题。由于将*child.column()*值传递给*createIndex()*方法，它发生在*TreeModel::parent(* ) 方法中。它应该是 0。所以，而不是

 **```
createIndex(parentItem->childNumber(), child.column(), parentItem); 
```

应该

```
createIndex(parentItem->childNumber(), 0, parentItem); 
```**

# oracle - 如何将 Oracle 约束添加到下表

> ID：14158219
> 
> 赞同：0
> 
> 时间：2013-01-04T13:35:57.257
> 
> 标签：oracle, foreign-keys

我有三张桌子：

一个 {op_id, op_name, .}

B {b_id, op_id, 供应商_id, .}

C {c_id，op_id，op_id2，供应商_id，关系，.}

表 B 和 C 的 op_id 是表 A 的外键。表 A 中的 op_id 是主键，表 B 中的 b_id 是主键，表 C 中的 c_id 是主键。在表 B 中，supplier_id 和 op_id 可能有重复记录。现在我想添加约束，以便如果我从表 B 中删除 op_id 的记录，并且如果表 C 中的 op_id 存在关系记录，那么它不应该允许我删除。是否可以通过约束？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T13:41:02.383

通常按照您指定的方式添加约束，如下所示

A表op_id为主键，B表b_id为主键，C表c_id为主键

表 B 和 C 的 op_id 是表 A 的外键

对于您指定的最后一个条件，`before delete`在表 B 上编写触发器并检查表 C 中是否存在 op_id - 如果是，则抛出错误，否则允许它。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T16:17:17.533

您的大多数关键约束都是相当微不足道的，困难的部分是最后一部分，确保您不能在不先从 C 中删除行的情况下从 B 中删除行。

一种可能在这里工作的方法是创建一个快速刷新的“提交时”物化视图，它返回 C 中存在但 B 中不存在的唯一 OP_ID 数量的计数。然后您可以向强制计数必须始终为零的视图。此约束将在提交时强制执行，并会阻止您从 B 中删除而不先从 C 中删除（从 B 中删除而 C 中存在匹配记录将违反检查约束，因为物化视图中的计数将大于 0） . 这样做的一个副作用是，如果不先插入 B，就无法插入 C。

# objective-c - 如何使用 UISegmentedControl 来控制 UITableView 单元格？

> ID：14158220
> 
> 赞同：0
> 
> 时间：2013-01-04T13:36:07.010
> 
> 标签：objective-c, cocoa-touch, uitableview, ios6, uisegmentedcontrol

我已经成功地设置了一个标签栏控制器。第一个视图中的表格视图和第二个选项卡中的简单 UIView。UIView 有它自己的类。我为后者添加了一个分段控件，最终我想根据选择的分段更改表格视图单元格中使用的图像。

单元格图像是数组的一部分，并且已使用自定义单元格进行设置。

我已经在 UIView 类中设置了分段控件，添加了@property 和@syntesize，但我一生都无法弄清楚如何从 UIView 类更改单元格图像。

提前致谢！

我的 UIView.h 中的段控件是这样定义的

@property (weak, nonatomic) IBOutlet UISegmentedControl *selectedSegment

我还没有包含 IBAction，因为我不是 100% 需要去哪里或如何编写它。

在我的表格视图中，我的单元格图像当前在 cellForRowAtIndexPath 中定义如下

```
cell.itemImageView.image = [UIImage imageNamed:[icons objectAtIndex:indexPath.row]]; 
```

我的想法是在单元格方法中放置一个 switch 语句，每个案例都指向一个不同的图标集，所以

```
switch (something)
{
    case 0:
    cell.itemImageView.image = [UIImage imageNamed:[iconSetOne objectAtIndex:indexPath.row]];
    break;

    case 1:
    cell.itemImageView.image = [UIImage imageNamed:[iconSetTwo objectAtIndex:indexPath.row]];
    break;

    default
    break;
} 
```

但我很确定这是错误的做法，而“某事”位正是我所坚持的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T00:59:04.273

1）在简单的`UIView`地方你有你的分段控制：

*   `_tableViewController`定义一个连接到表视图控制器的插座
*   定义`segmentedControlChanged:`响应被触发的分段控件的动作方法

2）在表视图控制器中：

*   定义`selectedSegmentIndex`类型的属性`NSInteger`

3）现在添加action方法的实现：

```
- (void) segmentedControlChanged:(id)sender
{
  UISegmentedControl* segmentedControl = (UISegmentedControl*)sender;
  _tableViewController.selectedSegmentIndex = segmentedControl.selectedSegmentIndex;
  [_tableViewController.tableView reloadData];
} 
```

4）在表格视图控制器中，您现在可以添加`switch`您建议的语句`tableView:cellForRowAtIndexPath:`：

```
switch (self.selectedSegmentIndex)
{
  [...]
} 
```

请注意，`reloadData`在步骤 3 中调用是强制表格视图使用正确图像更新*所有单元格的粗略方法。*还有其他方法`UITableView`可以让您更精细地控制要更新的单元格（例如`reloadSections:withRowAnimation:`）。

# javascript - JavaScript 中的 UNRAR

> ID：14158225
> 
> 赞同：3
> 
> 时间：2013-01-04T13:36:46.350
> 
> 标签：javascript, unrar

**有解压缩**文件的库吗？我必须使用的 rar 文件包含多个文件。

我正在寻找一种导航 rar 内容的方法，并在 .rar 文件中获取包含选定文件的未压缩内容的 blob。

我已经在使用[zip.js](http://gildas-lormeau.github.com/zip.js/)来解压缩文件，并且 RAR 也需要它。非常感谢您花时间阅读它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-07-09T14:54:09.673

我知道这是一个老问题。但是 bitjs 不再维护，并且很难使用。

试试[https://github.com/workhorsy/uncompress.js](https://github.com/workhorsy/uncompress.js)。它甚至适用于 RAR 5。

这是我能做的最简单的例子：[http](http://workhorsy.github.io/uncompress.js/examples/trivial/index.html) ://workhorsy.github.io/uncompress.js/examples/trivial/index.html 。

# c#-4.0 - 在单晶报表中显示两个报表数据

> ID：14158226
> 
> 赞同：1
> 
> 时间：2013-01-04T13:36:57.787
> 
> 标签：c#-4.0, crystal-reports

我试图在一个水晶报告中显示表格，就像：

```
Table A========================================================================
ColA      ColB     Colc       ColD

Table B========================================================================
ColA      ColB     Colc       ColD 
```

并且两者相互独立，如何实现相同的显示和结果？我已经创建了表 A 并显示了，但是我是否插入了子报告，但是通过插入相同的我没有得到想要的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T08:56:07.857

完成您尝试做的事情的方法是使用子报告（Hiten004 在评论中也建议）。只需将两个子报表插入主报表 - 第一个将连接到表 A，第二个将连接到表 B。

为了让它们从您的主报告中显示，请确保它们未配置为“按需”子报告。

如果两个报表的格式需要看起来相同，为了节省时间，请考虑首先将子报表设计为自己的报表（使用数据源 A），保存它，然后将其导入两次。导入后，只需使用“设置表位置”功能将第二个子报表的数据源更改为数据源 B。

# python - 如何确定 Python 堆栈框架可以看到哪些命名空间？

> ID：14158227
> 
> 赞同：1
> 
> 时间：2013-01-04T13:36:57.910
> 
> 标签：python, metaprogramming

考虑以下代码：

```
GLOBAL_VARIABLE = 1

def someFunction():
    nonLocalVariable = 2

    def anotherFunction():
        localVariable = 3

        class LocalClass(object):
            __metaclass__ = MyMetaClass
            __customCode = """
                    GLOBAL_VARIABLE + nonLocalVariable + localVariable
                """

    anotherFunction()

someFunction() 
```

我是 的实现者`MyMetaClass`，这是一个基于`__customCode`属性内容为类生成方法的元类。`__customCode` 可以包含 Python 表达式，所以我想确保在中提到的变量名`__customCode`指的是与在普通 Python 方法中定义的相同变量名相同的对象。

当元类被调用时，它会收到一个包含类内容的字典，这意味着它知道关于`__customCode`，但这并没有多大帮助。如果您使用`inspect.currentframe(1)`，您将获得语句正在执行的堆栈帧，`class` 也就是说`anotherFunction()`。该堆栈框架具有一个`.f_locals`属性（包含`localVariable`）和一个`.f_globals` 属性（包含`GLOBAL_VARIABLE`，除其他外），但这两者并不能说明整个故事。

给定的堆栈框架`anotherFunction()`（或我可以从 的实现中获取的任何其他内容`MyMetaClass`），我如何才能发现所在的名称空间`nonLocalVariable`以及嵌套在全局和本地名称空间之间的任何其他名称空间？

我目前正在使用 Python 2.7，但如果 Python 3.x 中的答案不同，那也很高兴知道。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T13:47:00.657

除了`locals()`and`globals()`结构外，编译器以单元格的形式添加关于“自由变量”的信息，这些单元格指向嵌套函数中的局部变量，对于任何*局部*变量 a) 没有被分配，并且 b) 引用范围变量（Python 3.x 添加了`nonlocal`关键字以允许您也分配给这样的变量，就像使用`global`关键字一样）。

在您的具体情况下，*没有*这样的变量。您的嵌套代码都没有引用`nonLocalVariable`; 只有当`anotherFunction`或`LocalClass`实际使用该变量时，python 编译器（因此在字节编译时）才会添加必要的结构以便能够`nonLocalVariable`从范围中拉出。

这是一个示例嵌套设置：

```
>>> def foo(x):
...     y = None
...     def bar():
...         return x
...     return bar
... 
>>> bar = foo('spam')
>>> foo.__code__.co_cellvars
('x',)
>>> bar.__code__.co_freevars
('x',)
>>> dir(bar.func_closure[0])
['__class__', '__cmp__', '__delattr__', '__doc__', '__format__', '__getattribute__', '__hash__', '__init__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', 'cell_contents']
>>> bar.func_closure[0].cell_contents
'spam' 
```

请注意代码对象如何在`foo`列表`x`中`co_cellvars`列出，并且代码对象`bar`已`x`在`co_freevars`; `y`两者都*没有*列出，因为`bar`从不使用它。对函数的引用`bar`具有一个`func_closure`结构，该结构保存创建时由作用域给出的*当前*值。代码对象保存函数的字节码；它们是在编译时创建的。元组是在运行时基于和结构创建的。`x``bar``func_closure``freevars``cellvars`

因为这发生在编译时，所以动态创建对这种作用域变量的引用充其量是棘手的。在这种情况下，为了您自己的利益，我什至不会费心支持使用作用域变量。

# h.264 - 相当于 H264 中的 MPEG4 GOP？

> ID：14158229
> 
> 赞同：0
> 
> 时间：2013-01-04T13:37:10.533
> 
> 标签：h.264

我尝试纠正间隙检测功能，为此我在解码 mpeg4 时使用 GOP 长度。

但是对于 H264，我找不到任何类似于 mpeg4 规范中的关键字的东西：fixed_vop_rate、fixed_vop_time_increment、vop_time_increment_resolution

有人可以为我提供有关如何在 H264 中使用 GOP 长度的良好资源吗？

# c - 在缓冲区中查找第一个和最后一个模式

> ID：14158235
> 
> 赞同：2
> 
> 时间：2013-01-04T13:37:21.577
> 
> 标签：c, char, logic

我有一个字符缓冲区，它将包含这种格式的文本。

```
somecontent...boundary="abc_is_the_boundary"
content-length=1234

--abc_is_the_boundary
somecontent
--abc_is_the_boundary 
```

该缓冲区存储在`char * buf`;

现在我的目标是确定`abc_is_the_boundary`在这种情况下的边界值，并将该边界下缓冲区中的所有内容传递给一个函数，并获取一个将替换它的新字符串。甚至`--abc_is_the_boundary` 会被发送到函数。

所以在这种情况下，传递给函数的缓冲区将是

```
--abc_is_the_boundary
somecontent
--abc_is_the_boundary 
```

处理后，说它返回`xyz`。

内容长度已更改为 3，现在生成的缓冲区必须如下所示

```
somecontent...boundary="abc_is_the_boundary"
    content-length=3

xyz 
```

我可以使用 strstr 来识别边界值。但是如何找到边界的第一个实例和边界的最后一个实例？边界可以多次出现，但只需要找到第一个和最后一个。再次使用strstr可以修改content-length，到指定位置修改。是不是最好的办法。

我希望你已经明白

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T13:50:52.980

您可以使用简单的指针算法来查找模式的第一次和最后一次出现。这样想：对于模式的第一次出现，您使用 的第一个结果`strstr`，因为这正是该函数的设计目的。然后你问自己“在第一个模式之后是否还有另一个模式出现”并`strstr`再次使用它。您重复此操作，直到您发现不再发生。您找到的最后一个必须是整个缓冲区中的最后一个。

然后它看起来有点像这样。下面的代码既没有编译也没有测试，但思路应该很清楚：

```
char *buf, *pattern, *firstOcc, *lastOcc, *temp;

// ... extract pattern from buffer

firstOcc = strstr(buf, pattern);
temp = firstOcc;

do {
  lastOcc = temp;
  temp = strstr(lastOcc + 1, pattern);
} while(temp != 0); 
```

通过从最后找到的位置 + 1 搜索，您排除了最后一个位置，strstr 将在找到最后一个位置之后将位置传递给您。

# c# - 用Datatable查询一行中多选的组合

> ID：14158243
> 
> 赞同：0
> 
> 时间：2013-01-04T13:37:37.503
> 
> 标签：c#, sql, sqlite

我将通过向您展示一个简单的示例来继续进行解释

```
table NAMES
 ID_NAMES
 NAME

table AGES
 ID_AGES
 AGE 
```

这是我的查询

```
SELECT 
( 
  select NAME
  from NAMES 
  where ID_NAME=1
) as thisismyname,
(
  select AGE
  from AGES
  where ID_AGE=50
) as thisiymyage 
```

我期待这样的结果

```
thisismyname, thisismyage 
```

我完全知道这完全是愚蠢的，因为我可以进行连接并获得简单的查询，但是表之间没有链接，这将是 50 个选择组合的结果，而不仅仅是两个。

它正在工作，但我想要一个数据表，我可以使用它来查询

```
 mydatatable[0]["thisismyname"] 
```

实际上，它只给我一个 ExecuteScalar 的结果，而 SQLDataReader 给了我空的 DataTable

```
using (var conn = Connection)
{
  DbCommand mycommand = GetCommand(conn, sql);
  DbDataReader reader = mycommand.ExecuteReader();
  dt.Load(reader);
  reader.Close();
  conn.Close();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T13:44:30.003

这应该在 SQL 中完成。如果你有问题，那么你可以尝试做不同的事情。您不需要表上的索引来加入它们。

```
 select distinct n.NAME, a.AGE
  from NAMES n
     JOIN AGES a on a.ID = n.ID
  where n.ID=1 
```

您可以创建一些自定义代码，在其中获取两个数据表并以某种方式合并它们，但我认为这不是一个好的解决方案。

如果出于某种原因，AGES 和 NAMES 上的 ID 不同并且无法连接，那么您可能应该使用 2 个参数 AgeId 和 NameId 创建 SQL 查询：

```
 select distinct n.NAME, a.AGE
  from NAMES n
        cross join AGES a
  where n.ID=@nameId
    and a.ID=@ageId 
```

# jquery - 如何在循环内使用jquery获取当前项目的值

> ID：14158244
> 
> 赞同：-1
> 
> 时间：2013-01-04T13:37:38.020
> 
> 标签：jquery, wordpress, jquery-ui, jquery-plugins

我在 wordpress 的模板文件中尝试了以下代码。

```
 <?php query_posts('showposts=9&post_type=packages&packages_category='.$category.'&order=ASC&paged='.$paged); ?>          <?php while (have_posts()) :the_post(); ?>
     ...
     ...
  <script type="text/javascript">
        $(document).ready(function() {
         $(".package-book a").click(function(){
         var $temp = '<?php the_title(); ?>';
             $('.book-title').val(' '); 
                $('.book-title').val($temp);     
         });
        });
      </script> 
             <span class="package-book"> 
            <a href="...">Book</a>
            </span>
           <?php endwhile; ?> 
```

并且有输入类型文本，类书名为`<input type="text" class="book-title"/>` 当单击类包书的锚标记时，它应该 `<?php the_title(); ?>`在文本框中显示当前值，但上面的 jquery 代码在所有输入文本框中显示循环中最后一项的值. 我希望它应该在输入类型文本框中显示当前标题的值。请帮我...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T14:02:26.550

我不建议将 JS 添加到 PHP 循环中。而是将值分配为数据属性。例如，当你构建这个跨度时，给它一个帖子标题的数据标题：

**PHP**

```
<span class="package-book"> 
    <a href="..." data-title="<?php echo the_title(); ?>">Book</a>
</span> 
```

**jQuery**（在 php 循环之外）

```
$(document).ready(function() {
    $(".package-book a").on('click', function(){
        $('.book-title').val($(this).data('title'));
    });
}); 
```

# monodevelop - 如何为 Mono android 创建 .snk 文件

> ID：14158245
> 
> 赞同：0
> 
> 时间：2013-01-04T13:37:44.710
> 
> 标签：monodevelop, snk

我已经在单声道开发中完成了 android 项目它在调试模式下工作正常但是当我尝试在发布模式下运行项目时它会给出以下错误：

```
C:\Users\Administrator.EDZ0138\Documents\Projects\IdooctopusNew\IdooctopusNew\SGEN: Error: Could not load file or assembly 'Mono.Android, Version=0.0.0.0, Culture=neutral, PublicKeyToken=c4c4237547e4b6cd' or one of its dependencies. Strong name validation failed. (Exception from HRESULT: 0x8013141A) (IdooctopusNew) 
```

谁能帮帮我吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T14:05:18.053

我得到了这个问题的解决方案。

您只需要做的是，将文件放入`mono.android.dll`文件`C:\Program Files\Microsoft SDKs\Windows\v7.0A\bin`夹，打开命令提示符并执行以下步骤：

1.  `cd C:\Program Files\Microsoft SDKs\Windows\v7.0A\bin`

2.  `sn -Vr Mono.Android.dll`

3.  `gacutil -i C:\Program Files\Microsoft SDKs\Windows\v7.0A\bin`

然后构建项目。

如果您收到另一个 DLL`System.xml.dll`等的错误，请对相应的 DLL 重复上述过程。

祝一切顺利.......！

# c# - 将下拉列表的选定值保存在全局变量中

> ID：14158248
> 
> 赞同：0
> 
> 时间：2013-01-04T13:37:55.350
> 
> 标签：c#, asp.net

我正在尝试将下拉列表选择的值保存在 glbal 变量中。我在下拉列表中有很多国家/地区，当我选择其中一个并按下按钮时：

```
protected void Button1_Click(object sender, EventArgs e)
    {
        Button2.Enabled = true;
        Button2.Visible = true;
        DropDownList1.Visible = true;

        DropDownList9.Items.Clear();

        if (!Class1.Search_Continent.Equals("-"))
        {
            SqlConnection conn1 = new SqlConnection(@"Data Source=AK-PC\MSSQLSERVER1;Initial Catalog=DB;Integrated Security=True");
            conn1.Open();
            SqlCommand cmd1 = new SqlCommand("Select Country_name FROM Country WHERE Continent_name='" + DropDownList1.SelectedValue + "'", conn1);
            SqlDataReader dr1;
            dr1 = cmd1.ExecuteReader();

            while (dr1.Read())
            { DropDownList9.Items.Add(dr1["Country_name"].ToString() + "\n"); }

            dr1.Close();
            conn1.Close(); 
```

}

```
protected void Button2_Click(object sender, EventArgs e)
    {
        // Redirect to Country page
        Class1.CountryName = DropDownList9.SelectedValue.ToString();
        Response.Redirect("Country.aspx", true);
    } 
```

它不采用选定的值！它总是取下拉列表的第一个值！请帮我 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T13:39:10.890

您可能正在重新绑定`DropDownList9`on 回发并丢失`SelectedValue`.

```
protected void Page_Load(object sender, EventArgs e)
{
    if(!Page.IsPostback)
    {
       //bind data
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T13:43:13.563

> 它总是取下拉列表的第一个值

如果您错误地填充数据，这在 Web 表单中很常见。你在哪里填充下拉列表？我*猜*你在做`Page_Load`。我还要*猜测*你没有将它包裹在类似`if (!IsPostBack)`. 如果您在其中放置一个调试断点，`Page_Load`您会发现它在调用*之前* `Button2_Click`的回发中被调用。

请记住，HTTP 是*无状态*的。这意味着需要在对服务器的每个请求上构建整个服务器端页面对象。 `Page_Load`是该构造的一部分，[它发生在事件处理程序之前](http://msdn.microsoft.com/en-us/library/ms178472.aspx)。所以可能发生的事情是：

1.  用户请求初始页面。
2.  您使用数据填充下拉列表。
3.  您向用户显示页面。
4.  用户选择一个选项并单击一个按钮，发出回发请求。
5.  您破坏并重新填充下拉列表，将其返回到默认状态。
6.  您尝试获取选定的值，该值现在已消失。

此问题最常见的解决方案是使用上述条件 in `Page_Load`：

```
protected void Page_Load(object sender, EventArgs e)
{
    // some initial logic
    if (!IsPostBack)
    {
        // stuff that should only happen when the page first loads
        // for example, populating controls from the database
    }
    // any other logic, etc.
} 
```

控件的值不需要在每次回发时重新填充，因为诸如视图状态之类的东西应该保持必要的数据可用。（尽管如果你完全搞砸了，那么你可能需要再修补一些。）

# apache - REST-Apache CXF-Schema 验证

> ID：14158249
> 
> 赞同：2
> 
> 时间：2013-01-04T13:37:57.880
> 
> 标签：apache, validation, rest, schema, cxf

我正在使用 Apache CXF（与 spring 混合）使用 RESTful Webservice。我在我的 WADL 中公开了两个服务。

对于对我的 Web 服务的每个请求，我需要验证对特定模式的请求。我公开的服务之一使用特定模式，其他服务符合其他特定模式。

你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T18:43:39.843

有几种方法可以满足您的需要。一种方法是使用`jaxrs:schemaLocations`元素：

```
<beans>
    <jaxrs:server address="/" serviceClass="com.something.ServiceClass">
        <jaxrs:schemaLocations>
            <jaxrs:schemaLocation>classpath:/schemas/a.xsd</jaxrs:schemaLocation>
            <jaxrs:schemaLocation>classpath:/schemas/b.xsd</jaxrs:schemaLocation>
        </jaxrs:schemaLocations>
    </jaxrs:server>
</beans> 
```

有关更多信息和示例，请参阅此[链接](http://cxf.apache.org/docs/jax-rs-data-bindings.html#JAX-RSDataBindings-Schemavalidation)。

# html - 避免带有 HTML 标签的 XSS

> ID：14158252
> 
> 赞同：7
> 
> 时间：2013-01-04T13:38:06.847
> 
> 标签：html, tags, xss, pre

我有一个简单的网页，它接受查询项并将它们制作到页面中。示例网址：

```
http://quir.li/player.html?media=http%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3D0VqTwnAuHws 
```

然后页面会在页面某处显示 URL：

```
<span id="sourceUrlDisplay">http://www.youtube.com/watch?v=0VqTwnAuHws</span> 
```

我觉得这会使页面容易受到 XSS 的攻击，以防页面加载包含类似于以下内容的 URL

```
http://quir.li/player.html?media=<script>alert('test')</script> 
```

我发现，将 URL 呈现为`<pre>`标签并没有帮助。**有没有一个简单的解决方案，比如一个 HTML 标签，它的内容真的没有被解释而只是打印出来？**

*注意*：这个问题与这个问题有些[相似](https://stackoverflow.com/questions/6409184/is-content-within-code-html-tags-xss-vulnerable)，但更笼统。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-04T13:45:09.453

不，HTML 中没有这样的标签可以防止 XSS 攻击，而且不可能制作一个。让我们假设有这样一个标签，比如说，`<safe>`。攻击者只需要关闭它：`</safe><script> malicious code </script><safe>`.

在这种特定情况下停止 XSS 的方法是将特殊字符转义为对应的 URL 编码，这样`http://quir.li/player.html?media=<script>alert('test')</script>`就变成 `http://quir.li/player.html?media=%3Cscript%3Ealert('test')%3C%2Fscript%3E`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T13:44:37.617

您应该转义 HTML 的特殊字符以删除它们的特殊含义。例如，在 PHP 中，[`htmlspecialchars()`](http://php.net/manual/en/function.htmlspecialchars.php)函数旨在用于这种转义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-26T18:07:52.123

我认为值得一提的是，实际上有 2 个（已弃用）HTML 标签可以完全满足您的需求：[`<xmp>`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/xmp)和[`<listing>`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/listing). 这些标签中的任何 HTML 在大多数浏览器中都将显示为文本。

这里的关键词是：大多数。自 HTML 3.2 以来，这些标签已被弃用，虽然 Chrome 和 Firefox（可能还有更多浏览器）似乎仍支持它，但谁知道它们何时会被完全删除。最重要的是，某些浏览器可能错误地实现了它并非不可能。

最后，您最好还是像其他答案所说的那样转义 HTML。

# .net - 在 .NET Windows 窗体应用程序中播放 .mp4 视频

> ID：14158255
> 
> 赞同：1
> 
> 时间：2013-01-04T13:38:14.463
> 
> 标签：.net, forms, mp4

我想播放一个 .mp4 文件。我正在使用以下代码使用 Microsoft.DirectX.AudioVideoPlayback 播放 .wmv 文件，但是当我切换到 .mp4 文件格式时它会崩溃。

```
Video v;
v = Video.FromFile("C:\\sample_mpeg4.mp4");
v.Owner = pbMain;
v.Play(); 
```

有没有一种简单的方法来播放 .mp4 电影文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T13:46:40.927

查看类似问题的答案：[Windows (ideally .NET callable) API to join MP4 and/or 3GP files?](https://stackoverflow.com/questions/207987/windows-ideally-net-callable-api-to-join-mp4-and-or-3gp-files)

经过一番搜索，我找不到**Microsoft.DirectX.AudioVideoPlaytback**库支持的格式列表，我认为 FFMPEG 库应该和其他任何东西一样完成这项工作。

# ruby-on-rails-3 - 使用回形针和雾上传到 Rackspace 云文件

> ID：14158256
> 
> 赞同：0
> 
> 时间：2013-01-04T13:38:17.787
> 
> 标签：ruby-on-rails-3, paperclip, rackspace-cloud, fog, cloudfiles

无法弄清楚如何做到这一点？并且在其他任何地方都找不到太多帮助！

我已经像这样设置了回形针和雾；

配置/初始化程序/fog.rb

```
 connection = Fog::Storage.new({
       :provider           => 'Rackspace',
       :rackspace_username => '',
       :rackspace_api_key  => ''
     }) 
```

环境.rb;

```
 Paperclip::Attachment.default_options.update({
    :path             => ":attachment/:id/:timestamp_:style.:extension",
    :storage          => :fog,
    :fog_credentials  => {
      :provider           => 'Rackspace',
      :rackspace_username => '',
      :rackspace_api_key  => '',
      :persistent         => false
    },
    :fog_directory    => '',
    :fog_public       => true

}) 
```

我`file_field`用来获取图像，然后将其发布到我的控制器。这让我得到了这样的东西；

```
"pic"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0x007f90ac06a6c8 @original_filename="3245-1920x1200.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"cloth[pic][image]\"; filename=\"3245-1920x1200.jpg\"\r\nContent-Type: image/jpeg\r\n", @tempfile=#<File:/tmp/RackMultipart20130104-5386-103laem>>} 
```

我无法理解的是，我该如何使用类似的方法将此文件实际保存到云文件中；

```
file = directory.files.create(
  :key    => 'resume.html',
  :body   => File.open("/path/to/my/resume.html"),
  :public => true
) 
```

**编辑**

相关模型；

```
class Cloth
  include Mongoid::Document
  has_many :pics

class Pic
  include Mongoid::Document
  include Mongoid::Paperclip
    belongs_to :cloth

    has_mongoid_attached_file :image, :styles => { :medium => "300x300>", :thumb => "100x100>" } 
```

在控制器中，这就是我当前基于上述参数创建图片的方式；

```
@cloth = Cloth.new
@cloth.pics.create!(params[:cloth][:pic]) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T21:16:04.533

让我们退后一步，从不同的角度来看问题。您能否查看以下脚本是否会将图像上传到您的容器：

```
require 'fog'
service = Fog::Storage.new({
  :provider                 => 'Rackspace',
  :rackspace_username        => YOUR_USERNAME,
  :rackspace_api_key    => YOUR_API_KEY
  })

container = service.directories.new(:key => YOUR_CONTAINER_NAME)
container.files.create :key => 'my-pix.jpg', :body => File.open PATH_TO_FILE 
```

用适当的变量更新大写参数，让我知道会发生什么。希望这将有助于缩小问题的范围。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T16:34:46.617

Paperclip 和 ActiveRecord 应该会自动为您处理文件上传。这是一个很好的快速入门解释该过程：

[https://github.com/thoughtbot/paperclip#quick-start](https://github.com/thoughtbot/paperclip#quick-start)

如果还是有问题，能否提供相关的控制器和型号代码给我？

# tfs - Surface RT 上的 TFS SDK

> ID：14158259
> 
> 赞同：2
> 
> 时间：2013-01-04T13:38:28.050
> 
> 标签：tfs, windows-8, microsoft-metro

我正在尝试制作一个允许用户启动构建、查看构建信息等以及仅基于 TFS 的一般操作的应用程序。

我找到了一些关于如何使用 SDK 的指南... [http://msdn.microsoft.com/en-us/library/bb286958.aspx](http://msdn.microsoft.com/en-us/library/bb286958.aspx)

但我不能在 Metro/win8 应用程序中使用 TeamFoundation.*.dll ...... [http://msdn.microsoft.com/en-us/library/windows/apps/br230302(v=vs.110)。 aspx](http://msdn.microsoft.com/en-us/library/windows/apps/br230302(v=vs.110).aspx)

那么，还有其他选择吗？他们有单独的api吗？（您可以通过 Web 访问访问 tfs 项目，提供基于 Web 的替代方案，而不是在 Visual Studio 中完成所有操作）。

谢谢，詹姆斯。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T13:41:15.150

Windows RT 是基于 ARM 的表面，TFS SDK/OM 仅可用于为 x86 编译。所以，它不会起作用。

稍后提供的 Windows Surface PRO 将基于 x86。

最接近的可能是直接对 SOAP Web 服务层进行编码。TFS 团队也开始使用轻型 http 客户端创建 RESTful http API，但这是一项正在进行的工作，才刚刚开始。这将是某天可用的长期方法。

如果您正在创建 Windows 商店应用程序，您应该注意它是沙盒的。随着我们向 REST 和更现代的 REST 客户端过渡，TFS 团队正在研究这一点。

# c# - EF 删除子集合

> ID：14158260
> 
> 赞同：4
> 
> 时间：2013-01-04T13:38:29.443
> 
> 标签：c#, entity-framework, ef-code-first, entity-framework-5

我有以下内容：

```
class City {
    int id;
    string Name;
    ICollection<Person> Persons;
}

class Person {
   int id;
   string Name;
} 
```

删除城市和所有相关人员的正确方法是什么？可能我想避免外键约束并手动进行。我试过了：

```
public bool Delete(int id // City Id)
{
    City city = _db.Cities
                .Include(c => c.Persons)
                .First(c => c.Id == id);
    if(city != null)
    {
        foreach (Person person in city.Persons)
        {
            _db.Persons.Remove(person);
        }

        _db.Cities.Remove(city);

        _db.SaveChanges();
        return true;
    }

    return false;
} 
```

但是没有人或城市被从数据库中删除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T23:55:16.050

您的代码似乎正确...

您也可以尝试使用以下代码删除实体：

```
foreach (Person person in city.Persons)
{
    _db.Persons.Entry(person).State = EntityState.Deleted;
}

_db.Cities.Entry(city).State = EntityState.Deleted;

_db.SaveChanges(); 
```

还有一件事...

如果您使用`First`获取`City`then`if`语句将始终是`true`因为`First`期望有一个匹配并且`InvalidOperationException`当源序列为空时它会抛出一个。

查看您的代码，我可以看到该方法返回`true`如果存在匹配`id`并且执行了删除，如果没有匹配则返回`false`。为了`city`成为`null`您应该使用`FirstOrDefault`的，如果源序列为空，它将返回处理类型的默认值，在您的情况下为`null`.

# java - 奇数 Oracle 连接 URL

> ID：14158263
> 
> 赞同：6
> 
> 时间：2013-01-04T13:38:41.870
> 
> 标签：java, oracle, jdbc

我们的一位客户正在尝试使用以下 JDBC URL 连接到 Oracle 数据库：

```
jdbc:oracle:thin:@(DESCRIPTION=(FAILOVER=ON)LOAD_BALANCE=OFF)(ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP)(HOST=server1.domain.com)(PORT=1521))(ADDRESS=(PROTOCOL=TCP)(HOST=server2.domain.com)(PORT=1521)))(CONNECT_DATA=(SERVER=DEDICATED)(SERVICE_NAME=FOO))) 
```

他们得到这个错误：

```
Caused by: oracle.net.ns.NetException: NL Exception was generated
    at oracle.net.resolver.AddrResolution.resolveAddrTree(AddrResolution.java:614) ~[ojdbc5_11g-11.2.0.1.0.jar:11.2.0.1.0]
    at oracle.net.resolver.AddrResolution.resolveAndExecute(AddrResolution.java:411) ~[ojdbc5_11g-11.2.0.1.0.jar:11.2.0.1.0]
    at oracle.net.ns.NSProtocol.establishConnection(NSProtocol.java:672) ~[ojdbc5_11g-11.2.0.1.0.jar:11.2.0.1.0]
    at oracle.net.ns.NSProtocol.connect(NSProtocol.java:237) ~[ojdbc5_11g-11.2.0.1.0.jar:11.2.0.1.0]
    at oracle.jdbc.driver.T4CConnection.connect(T4CConnection.java:1042) ~[ojdbc5_11g-11.2.0.1.0.jar:11.2.0.1.0]
    at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:301) ~[ojdbc5_11g-11.2.0.1.0.jar:11.2.0.1.0] 
```

问题：

1.  我以前从未见过这样的连接 URL。它看起来更像是 TNSNAMES.ORA 中的一个条目。我怎样才能找出这个连接字符串的含义？

2.  什么可能导致这个无用的错误消息？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-04T13:52:24.873

语法是“Oracle Net 连接描述符语法”，请参见[JDBC Developers Guide](http://docs.oracle.com/cd/E11882_01/java.112/e16548/urls.htm#BEIJFHHB)中的表 8.3 。

语法确实与 ; 中使用的语法相同`tnsnames.ora`。[Oracle 数据库网络服务参考](http://docs.oracle.com/cd/E11882_01/network.112/e10835/toc.htm)中描述了此语法。

至于具体问题，在我看来，描述符中的括号不平衡，特别是：

```
(FAILOVER=ON)LOAD_BALANCE=OFF) 
```

应该：

```
(FAILOVER=ON)(LOAD_BALANCE=OFF) 
```

（注意额外的`(`。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-12T18:59:35.080

我从您的 tnsnames 条目生成了以下连接 URL：

```
jdbc:oracle:thin:@server1.domain.com:1521/FOO 
```

尝试使用上述连接 URL。还要检查侦听器是否已启动并正在运行：在 windows 中：`ctrl + r`，`services.msc`检查服务：“Oracle*TNSListener”是否已启动。

```
jdbc:oracle:thin:@(DESCRIPTION=(FAILOVER=ON)LOAD_BALANCE=OFF)(ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP)(HOST=server1.domain.com)(PORT=1521))(ADDRESS=(PROTOCOL=TCP)(HOST=server2.domain.com)(PORT=1521)))(CONNECT_DATA=(SERVER=DEDICATED)(SERVICE_NAME=FOO))) 
```

# java - 我应该使用外观来访问 JPA 实体吗？

> ID：14158270
> 
> 赞同：0
> 
> 时间：2013-01-04T13:39:00.757
> 
> 标签：java, jpa, orm

我想从我的数据库中检索产品。一个产品由几个不同表中的数据组成。

最好创建一个可以与多个实体对话的外观，以便将制造产品所需的所有信息汇集在一起​​​​，并且外观应该编组对象还是有其他方法可以做到这一点？

我在想门面的方法是`getProduct()`，这个方法会使用多个实体？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T14:52:51.743

为什么不使用产品实体并让 JPA 为您完成所有工作？一个实体可以跨越多个表，并且您的产品实体本身可以引用其他有意义的实体。您的应用程序可以在 Product 类中创建访问器以公开引用的实体，或者根据需要仅从这些引用中返回数据。

# php - 在 tag.php 模板上显示帖子？

> ID：14158274
> 
> 赞同：5
> 
> 时间：2013-01-04T13:39:34.833
> 
> 标签：php, wordpress, tags

是否可以创建一个`tag.php`模板，当您导航到该 url`www.domain.com/tag/architecture/`时，它将显示所有已使用该特定标签标记的自定义帖子？等等各种其他标签？

我需要在模板中包含哪些代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T14:00:20.580

是的，您可以创建，下面是我用来显示自定义帖子类型“知识”的代码

```
<?php
global $query_string;
$posts = query_posts($query_string.'&post_type=knowledge');
if ( have_posts() ) while ( have_posts() ) : the_post(); 
?>
<a href="<?php echo get_permalink(get_the_ID()); ?>"><?php the_title(); ?></a>
<?php endwhile; // end of the loop. ?> 
```

这将帮助您了解模板的层次结构：

> http://codex.wordpress.org/images/1/18/Template_Hierarchy.png

可在此处使用 $query_string（示例）：

> https://developer.wordpress.org/reference/functions/query_posts/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T14:21:31.250

根据[模板层次结构](http://codex.wordpress.org/images/1/18/Template_Hierarchy.png)，您可以创建一个名为的文件`tag.php`，而不是`index.php`显示标签页时使用该文件。您还可以为特定标签准备单独的模板。

最好的方法是首先创建主题的副本`index.php`并调用它`tag.php`，这样您就可以使用一些基本的代码。然后您可以修改`tag.php`以满足您的需求 - 可能通过编辑[The Loop](http://codex.wordpress.org/The_Loop)，或者如果您的主题从单独的文件加载循环，则可能更改一些包含。（但在这种情况下，您应该考虑编辑`index.php`以加载标签页面的其他循环 -`is_tag()`可能会派上用场）

# typo3 - TYPO3 tt_news 更新脚本显示空白页面

> ID：14158275
> 
> 赞同：1
> 
> 时间：2013-01-04T13:39:34.677
> 
> 标签：typo3, tt-news

将我的 TYPO3 CMS 从 4.3 更新到 4.5 LTS 后，新闻不再显示。所以我决定也更新 tt_news 扩展。它的版本为 2.5.2，必须升级到最新的 3.4.0。它向我建议，使用它自己的“更新脚本”（以及在其他资源中提到的）因为严重的变化而正常工作。在“扩展管理器”下 - “tt_news” - “更新！” 它显示为一个简单的空白页面，什么也做不了。

有什么提示可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T14:54:03.480

你有一些 PHP 错误。复制 /var/log/apache2/error.log 或启用 TYPO3 安装工具配置 PHP 错误。

# svn - 工具支持的软件发布工作流程

> ID：14158279
> 
> 赞同：2
> 
> 时间：2013-01-04T13:39:53.087
> 
> 标签：svn, maven, jenkins, workflow, release

我们目前正在建立一个工具支持的软件发布工作流程。

我们当前的环境包括以下内容：

*   詹金斯构建服务器
*   颠覆存储库
*   Nexus Maven 存储库

构建服务器会产生各种不同的工件，其中一些是由 Maven 创建并存储在 Nexus 存储库中的 Java 工件，还有一些我们目前必须手动存储和管理的非 Java 工件。

我们的目标是创建一个包含多个异构组件的软件版本。发布配置应定义：

*   属于它的组件
*   这些组件的确切版本
*   用于创建这些组件的源代码

发布配置应包含所有相关信息，以便在以后了解并可能重现发布。

实现此工作流程的工具还应通过允许将发布标记为不稳定、测试或稳定来支持质量保证。

所以问题是：是否有任何工具支持所描述的工作流程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T12:11:33.737

选择通用包存储库（rpm、deb）而不是 Java 工件存储库。发布配置现在成为一个声明依赖项（属于它的组件）及其版本的一流包。至于源，您可以选择也创建[源包](http://www.rpm.org/max-rpm/s1-rpm-miscellania-srpms.html)。如果您只是对源可追溯性感兴趣，您可以将自定义元数据添加到包规范中，例如在描述中添加可解析的内容。[fpm](https://github.com/jordansissel/fpm/wiki)是创建这些包的流行工具。

相关链接：

[http://www.techrepublic.com/blog/opensource/create-your-own-yum-repository/609](http://www.techrepublic.com/blog/opensource/create-your-own-yum-repository/609)

[https://github.com/sonatype/nexus-yum-plugin](https://github.com/sonatype/nexus-yum-plugin)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T13:45:01.693

您应该考虑使用[JIRA](http://www.atlassian.com/software/jira/overview)，这是 Atlassian 的一个工具。使用 JIRA 可以很容易地跟踪问题、发布等。这里要提及的功能太多了，但我建议您查看链接。

# powershell - 文件和文件夹计数

> ID：14158280
> 
> 赞同：3
> 
> 时间：2013-01-04T13:40:01.597
> 
> 标签：powershell

远程服务器上有一个文件夹，其中包含各种子文件夹。它是完全嵌套的。我想：

1.  准备一个包含文件夹名称的 HTML 报告。
2.  对于每个文件夹，它还应该记录文件数。
3.  代码需要附加已经创建的 HTML 文件。
4.  所需列：文件夹名称、文件夹路径、文件计数

下面是代码片段，它是我的主脚本的一部分。我对 PowerShell 相当陌生。

有人可以帮忙吗？

```
$server_dir = "D:\Data\Inbox"
$does_dir_e = (Test-Path $server_dir)

if($does_dir_e)
{
       $fso = New-Object -com "Scripting.FileSystemObject"
        $f = $fso.GetFolder($server_dir)

    foreach($folder in $f.subfolders)
    {

       $fcount = $((Get-ChildItem $folder.Path).count)
       $fname = $folder.name | Convertto-HTML -Fragment  >> C:\Temp\Server.html

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T14:36:58.280

您实际上并没有说什么对您不起作用，但是以下脚本应该可以帮助您入门。

外部循环通过文件夹（PSIsContainer）递归意味着它是一个文件夹。内部循环使用 measure-object 计算每个文件夹中的文件数，我们从该计数中过滤掉文件夹，只为我们提供文件数。

```
$path = "D:\Data\Inbox"

# Enumerate the given path recursively
Get-ChildItem -Path $path -Recurse | Where-Object {$_.PSIsContainer} | %{

    # Add a user-defined custom member with a value of the filecount this
    # time not recursively (using measure object)
    $_ | add-member -membertype noteproperty -name FileCount -value (Get-ChildItem -Path $_.Fullname | 
        Where-Object {!$_.PSIsContainer} | 
        Measure-Object).Count

    # Output the required values
    $_ | select Name, FullName, FileCount | ConvertTo-Html -Fragment
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T14:35:59.463

这是你想要的吗？我以前没有使用过 HTML cmdlet，所以请注意它很丑 :)

```
$server_dir = 'D:\Data\Inbox'

if(Test-Path $server_dir)
{
       $folders = Get-ChildItem $server_dir -Recurse | where {$_.PSIsContainer}
       $output = @()

    foreach($folder in $folders)
    {
       $fname = $folder.Name
       $fpath = $folder.FullName
       $fcount = Get-ChildItem $fpath | where {!$_.PSIsContainer} | Measure-Object | Select-Object -Expand Count
       $obj = New-Object psobject -Property @{FolderName = $fname; FolderPath = $fpath; FileCount = $fcount}
       $output += $obj

    }
       #Output to HTML
       $output | ConvertTo-Html -Fragment >> 'C:\Temp\Server.html'
} 
```

# html - 对以下划线“_”开头的变量不使用 spring taglib 的数据绑定

> ID：14158281
> 
> 赞同：0
> 
> 时间：2013-01-04T13:40:08.710
> 
> 标签：html, spring, data-binding, spring-mvc

我的 html 是在没有使用 spring taglib 的情况下构建的，现在我想将表单的参数绑定到我的控制器中的一个对象。我在绑定以下划线“_”开头的属性时遇到问题

目前我的表格看起来像这样

```
<form method="post" action="${pageContext.request.contextPath}/test.form">
          <input type="text" name="_NumeroPage" />
      <input type="text" name="_Tri" />
      <input type="text" name="_SensTri" />
      <input type="text" name="codePays" />
</form> 
```

我的对象的相关部分是

```
Class TestForm{
private String _NumeroPage;
private String _Tri;
private String _SensTri;
private String codePays ;
// getter and setter
} 
```

我的控制器是

```
@RequestMapping(value={"/test","/test.form"})
public String paginerSequencesSuiviMulticanal(TestForm formulaire, Model model, HttpSession session){

        model.addAttribute("_NumeroPage", formulaire.get_NumeroPage());
        model.addAttribute("_Tri", formulaire.get_Tri());
        model.addAttribute("_SensTri", formulaire.get_SensTri());
        model.addAttribute("codePays", formulaire.getCodePays());

    return "/result";
} 
```

我该如何去绑定它。目前，_NumeroPage、_Tri、*SensTri 不会发生绑定，但它确实绑定了 codePays。是否有解决方法来绑定以下划线字符 "* " 开头的属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T14:37:33.180

您可能可以深入研究 Spring 中的 bean 属性访问器代码并找出原因（在粗略检查代码或文档中找不到任何东西），但似乎更简单的解决方案是**不**使用带前导的名称数据绑定所涉及的类和字段中的下划线。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-10T06:50:05.643

您可以尝试创建[ServletRequestDataBinder](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/bind/ServletRequestDataBinder.html)的自定义子类，它将以下划线开头的请求参数映射到没有下划线的字段。然后您必须创建一个自定义的[ServletRequestDataBinderFactory](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/servlet/mvc/method/annotation/ServletRequestDataBinderFactory.html)来创建一个子类。接下来，您需要创建[RequestMappingHandlerAdapter](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/servlet/mvc/method/annotation/RequestMappingHandlerAdapter.html)的自定义子类并将其注册到 Spring MVC。这将允许您继续在 HTML 中使用下划线，而不必在 POJO 字段名称中使用下划线。

自定义 ServletRequestDataBinder：

```
public class MyCustomServletRequestDataBinder extends
  ExtendedServletRequestDataBinder {
  public MyCustomServletRequestDataBinder(Object target) {
    super(target);
  }

  public MyCustomServletRequestDataBinder(Object target, String objectName) {
    super(target, objectName);
  }

  @Override
  protected void addBindValues(MutablePropertyValues mpvs,
      ServletRequest request) {
    super.addBindValues(mpvs, request);

    addUnderscoreBindValues(mpvs, request);
  }

  protected void addUnderscoreBindValues(MutablePropertyValues mpvs,
      ServletRequest request) {
    // go through each parameter and check if it starts with an underscore (_)
    // if it starts with an underscore, add it to mpvs under the name without
    // the underscore
    @SuppressWarnings("unchecked")
    Map<String, Object> parameterMap = request.getParameterMap();
    for (Map.Entry<String, Object> entry : parameterMap.entrySet()) {
      if (StringUtils.startsWith(entry.getKey(), "_")) {
        mpvs.add(StringUtils.removeStart(entry.getKey(), "_"), entry.getValue());
      }
    }
  }
} 
```

自定义 ServletRequestDataBinderFactory：

```
public class MyCustomServletRequestDataBinderFactory extends
    ServletRequestDataBinderFactory {
  /**
   * Create a new instance.
   * @param binderMethods one or more {@code @InitBinder} methods
   * @param initializer provides global data binder initialization
   */
  public MyCustomServletRequestDataBinderFactory(
      List<InvocableHandlerMethod> binderMethods,
      WebBindingInitializer initializer) {
    super(binderMethods, initializer);
  }

  /**
   * Returns an instance of {@link MyCustomServletRequestDataBinder}.
   */
  @Override
  protected ServletRequestDataBinder createBinderInstance(Object target,
      String objectName, NativeWebRequest request) {
    return new MyCustomServletRequestDataBinder(target, objectName);
  }
} 
```

自定义 RequestMappingHandlerAdapter：

```
public class MyCustomRequestMappingHandlerAdapter extends
    RequestMappingHandlerAdapter {
  public MyCustomRequestMappingHandlerAdapter() {
    super();
  }

  /**
   * {@inheritDoc} Creates an instance of
   * {@link MyCustomServletRequestDataBinderFactory}.
   */
  @Override
  protected ServletRequestDataBinderFactory createDataBinderFactory(
      List<InvocableHandlerMethod> binderMethods) throws Exception {
    return new MyCustomServletRequestDataBinderFactory(binderMethods,
        getWebBindingInitializer());
  }
} 
```

然后注册自定义的HandlerAdapter：

```
@Configuration
@Import(ValidationConfiguration.class)
@ComponentScan(basePackageClasses = ControllerScanMarker.class)
public class MyCustomHandlerConfig extends WebMvcConfigurationSupport {
  /**
   * {@inheritDoc} Returns the subclass
   * {@link MyCustomRequestMappingHandlerAdapter} in place of the default
   * {@link RequestMappingHandlerAdapter}.
   */
  @Override
  @Bean
  public RequestMappingHandlerAdapter requestMappingHandlerAdapter() {
    ...
    RequestMappingHandlerAdapter adapter = new MyCustomRequestMappingHandlerAdapter();

    // set additional adapter fields here...
    ...
    return adapter;
  }
} 
```

我很确定在默认请求参数绑定期间可能有一种更简单的方法来修改/添加其他值，但我不记得另一个钩子在哪里。

# javascript - 当用户按 Esc 时停止fancybox 关闭

> ID：14158282
> 
> 赞同：10
> 
> 时间：2013-01-04T13:40:15.020
> 
> 标签：javascript, jquery, fancybox

我在页面上使用了 fancybox，但我将它用作更多的设计功能，而不是 jQuery 模态。我试图阻止用户关闭它（因为它会“破坏”页面的设计）。我已经设法阻止用户点击fancybox，但是当按下Esc 键时我无法阻止它关闭。我已经尝试过`'closeOnEscape': false`，但这似乎不起作用。下面是我的代码。关于我做错了什么或我需要做什么的任何建议？

```
$(document).ready(function () {
    $.fancybox({
        'width': '340px',
        'height': '100%',
        'autoScale': true,
        'transitionIn': 'none',
        'transitionOut': 'none',
        'type': 'iframe',
        'href': 'form.php',
        'hideOnContentClick': false,
        'closeBtn' : false,
        'helpers' : { 
            'overlay' : {
                'closeClick': false,
            }
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-04T13:45:48.487

检查`keys`来自[fancyBox docs](http://fancyapps.com/fancybox/#docs)的选项：

> **键**
> 定义用于画廊导航、关闭和幻灯片
> 对象的键盘键；默认值：

```
{
    next : {
        13 : 'left', // enter
        34 : 'up',   // page down
        39 : 'left', // right arrow
        40 : 'up'    // down arrow
    },
    prev : {
        8  : 'right',  // backspace
        33 : 'down',   // page up
        37 : 'right',  // left arrow
        38 : 'down'    // up arrow
    },
    close  : [27], // escape key
    play   : [32], // space - start/stop slideshow
    toggle : [70]  // letter "f" - toggle fullscreen
} 
```

只需将`close`值映射到`null`.

* * *

如果您使用的是 fancyBox2，请将此属性添加到您的代码中：

```
$.fancybox({
  // all your other options here
  ...,
  keys : {
    close  : null
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T13:52:32.463

@moonwave99 有 fancybox2 的正确答案。如果您使用的是 v1.3+，那么您必须使用：

```
enableEscapeButton: false 
```

参考： http: [//fancybox.net/api](http://fancybox.net/api)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-20T07:03:11.213

正如其他人在评论中提到的那样，`modal: true`完美地工作......

```
$.fancybox({
    modal: true
}); 
```

从[文档...](http://fancyapps.com/fancybox/#docs)

> **modal** - 如果设置为 true，将禁用导航和关闭。

# jsf - Richfaces 3.3.3.final jar 和 jsf 1.2 部署在 WAS7 上失败

> ID：14158288
> 
> 赞同：0
> 
> 时间：2013-01-04T13:40:26.407
> 
> 标签：jsf, richfaces, websphere-7

我想从 Richfaces 3.3.1 迁移到 3.3.3。rich:scrollabledatatable 问题的最终 jar（重新渲染后标题消失）。

我正在使用 jsf 1.2。通过 maven 成功构建应用程序后，我在 WAS 7 上部署了我的应用程序构建，我收到错误消息说部署失败：ADMA5069E：应用程序安装失败。

如果有人已经迁移到 3.3.3.Final，请建议除了 pom.xml 版本是否需要进行任何其他更改。所有其他 web.xml 条目等与我使用 3.3.1 richfaces 版本时相同。

# iphone - 从 QuickBlox 中的自定义表中检索数据

> ID：14158290
> 
> 赞同：0
> 
> 时间：2013-01-04T13:40:35.730
> 
> 标签：iphone, ios, quickblox

我有一个自定义表`QuickBlox`，我想检索该表的数据

```
NSURL *topPlaceURL = [NSURL URLWithString:@"https://api.quickblox.com/data/TopChatPoints.json"];
NSURLRequest * jsonRequest = [NSURLRequest requestWithURL:topPlaceURL];
[[NSURLConnection alloc]initWithRequest:jsonRequest delegate:self];    

-(void) connection: (NSURLConnection *) connection didReceiveResponse:(NSURLResponse *)response
{
    jsonData = [[NSMutableData alloc]init];

}
-(void) connection: (NSURLConnection *) connection didReceiveData:(NSData *)data
{
    [jsonData appendData:data];
}

 -(void) connectionDidFinishLoading: (NSURLConnection *) connection
{

    jsonArray = [NSJSONSerialization JSONObjectWithData:jsonData options:kNilOptions error:nil];

    NSLog(@"MY TOP PLACE = %@",jsonArray);

} 
```

但我没有得到数据，因为我没有传递`auth key`如何生成`auth key`和发送它`NSURLRequest`？

# php - unlink() 触发 open_basedir 限制。但是其他所有功能都有效

> ID：14158291
> 
> 赞同：0
> 
> 时间：2013-01-04T13:40:38.633
> 
> 标签：php, unlink

我有以下常量：`FSROOT`设置如下：`getcwd()`. 我可以在我的应用程序中的任何地方使用这个常量，而不必担心路径，例如：`require_once(FSROOT . '/includes/php/something.php)`.

但是，我最近在我的应用程序中实现了一些文件，并且在某些事件中我需要删除一些文件，这是我在本地执行的操作：

```
unlink( FSROOT . '/somefile.pdf' ); 
```

在我的本地环境中，这非常有效。但是在服务器上我收到一个错误：

```
unlink(): open_basedir restriction in effect. File(/mnt/var/[...]/app/somefile.pdf) is not within the allowed path(s): (/var/[...]/app/) 
```

所以问题似乎`/mnt/`是从返回的目录`getcwd()`但与我允许的路径不匹配！

我有点困惑，因为`FSROOT`路径可以在任何函数中使用，但`unlink()`. 这也是我不想改变的原因。有没有其他方法可以删除文件？还是我必须手动创建另一个常量来使用`unlink()`？

或者我应该使用 getcwd() 的替代方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T13:49:38.523

您是否尝试过将 dirname 与**FILE**结合使用来获得正确的路径？

```
dirname(__FILE__) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T11:40:42.243

原来我以非持久方式存储文件的路径，我的主机有时会在服务器上移动我的应用程序，所以路径会改变，并且 unlink() 会尝试访问不存在的路径......所以这里真的没有什么可以回答的，抱歉。

# jquery - 使用 HttpPost 的 MVC3 jQuery 表单提交和 RedirectToAction 不起作用

> ID：14158292
> 
> 赞同：0
> 
> 时间：2013-01-04T13:40:51.213
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3

在 MVC 3 应用程序上使用 jQuery ajax 进行一些 CRUD 操作。

我将我的用户详细信息表单发布到控制器方法以保存信息。保存信息后，我将通过传递保存的 id 和一些临时数据信息重定向到详细信息页面，以显示一些消息，例如“用户保存成功”

但它不是在 SaveUserDetail 方法之后转到控制器中的 Detail 方法。

这是我的控制器代码

```
 [HttpPost, Authorize]
    public ActionResult UserDetail(string Id)
    {
     User user = AdminService.SelectUserByUserName(Id);
     UserDetailViewModel viewModel = Mapper.Map<User, UserDetailViewModel>(user);
        if (TempData["SaveStatus"] != null && TempData["SaveStatus"] == "true")
        {
            viewModel.InSaveMode = true;
            viewModel.SaveStatus = true;
        }
        return View(viewModel);
    }

    [HttpPost, Authorize, ValidateAntiForgeryToken]
    public ActionResult SaveUserDetail(UserDetailViewModel viewModel)
    {
        User userToSave = new User();
        AdminService.UpdateUser(userToSave);
        TempData["SaveStatus"] = "true";
        return RedirectToAction("UserDetail", new { Id = viewModel.userId});
    } 
```

我的 jQuery 代码

```
 $("#user-detail-form").submit(function (e) {
        if ($(this).valid()) {
            $.post('@Url.Action("SaveUserDetail")', 
                       $(this).serialize(), function (data) {
                $("#user-detail-box").html(data);
                $.validator.unobtrusive.parse($("#user-detail-box"));
            });
        }
        e.preventDefault();
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T13:45:12.797

如果您打算重定向到它，请从您的方法中删除该`[HttpPost]`属性。`UserDetail`

如果一个控制器动作用`[HttpPost]`属性修饰，这意味着这个动作只能用 POST HTTP 动词访问。但是在您的情况下，您正在重定向到它（`return RedirectToAction("UserDetail", new { Id = viewModel.userId});`），并且您知道 HTTP 中的重定向意味着 302 状态代码带有一个`Location`标头，然后是客户端对目标位置的 GET 请求。

如果您在浏览器中使用 FireBug 或类似的 javascript 调试工具来分析 AJAX 请求，您会立即看到这一点。

# java - jsp-多值循环输入标签

> ID：14158296
> 
> 赞同：1
> 
> 时间：2013-01-04T13:41:13.547
> 
> 标签：java, arrays, jsp

我是 JSP 的新手，没有太多的想法。所以让我澄清一下我的要求。

假设我有一个如下程序，其中有`First.jsp`一个数组`Match_List[5]`。

```
String[] Match_List; 
Match_List[] = {a, b, c, d, e};

<form name="Team_Playerdetails" method="post" action="db_Match_Edit.jsp"> 
  <TABLE> 
  <% for (int j = 0; j < 10; j++) { %>  
    <TR>    
      <TD> 
        <SELECT name="Stat_Match_name"> 
        <% for (int i = 0; i < 5; i++) { %> 
          <option> 
            <% out.println(Match_List[i][1]); %> 
          </option> 
        <% } %> 
        </SELECT> 
      </TD> 
    </TR> 
  <% } %> 
  </TABLE> 
  <input type="submit" name="submit" value="Add All" tabindex="10" class="button" /> 
</form> 
```

现在，上面的这个表单将显示相同的下拉列表 10 次。我想在这十个列表中选择不同的选项，如下所示：

```
List_1 Option: a 
List_2 Option: d 
List_3 Option: e 
List_4 Option: b 
List_5 Option: c 
..... 
List_10 Option: d 
```

现在我需要一旦用户点击提交按钮，那么变量应该被移动到`db_Match_Edit.jsp`. 在这里，我将有代码将值捕获为

```
U_Stat_Match_name = request.getParameter("Stat_Match_name"); 
```

但是由于所有 10 个下拉选项都被同一个 select variable name 捕获`Stat_Match_name`。所以`db_Match_Edit.jsp`我只得到最后选择的选项`U_Stat_Match_name`。

但是我需要`db_Match_Edit.jsp`数组中的jsp中所有10个选定的选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T13:45:18.173

要么只使用`HttpServletRequest#getParameterValues()`：

```
String[] statMatchNames = request.getParameterValues("Stat_Match_name");
// ... 
```

或者只是根据迭代索引给它们一个唯一的值：

```
<select name="Stat_Match_name_<%=j%>"> 
```

并按如下方式单独抓取它们：

```
for (int j = 0; j < 10; j++) {
    String statMatchName = request.getParameter("Stat_Match_name_" + j);
    // ...
} 
```

* * *

**与具体问题无关**，这种老式的 JSP 代码风格表明您正在通过可能超过 10 年的严重过时的资源来学习 JSP。我建议专注于更新和理智的学习资源。[从如何避免 JSP 文件中的 Java 代码](https://stackoverflow.com/questions/3177733/how-to-avoid-java-code-in-jsp-files/3180202#3180202)开始？然后阅读[我们的 JSP wiki 页面](https://stackoverflow.com/tags/jsp/info)。

# c++ - 两点之间的网格中的最短路径。有一个陷阱

> ID：14158304
> 
> 赞同：4
> 
> 时间：2013-01-04T13:41:41.410
> 
> 标签：c++, algorithm, graph-algorithm, shortest-path, dijkstra

我有这个问题，我必须通过向右或向下移动来找到从 A 点（总是左上角）到 B 点（总是右下角）的最短路径。听起来很容易，嗯？好吧，这里有一个问题：我只能移动我现在坐的瓷砖上显示的数字。让我举例说明：

```
2 5 1 2
9 2 5 3
3 3 1 1
4 8 2 7 
```

在这个 4x4 网格中，最短路径需要 3 步，从左上角的 2 个节点向下走到 3，然后从那里 3 个节点向右走到 1，然后从 1 个节点向下走到目标。

```
[2] 5  1  2
 9  2  5  3
[3] 3  1 [1]
 4  8  2 [7] 
```

如果不是最短路径，我也可以走这条路线：

```
[2] 5 [1][2]
 9  2  5  3
 3  3  1 [1]
 4  8  2 [7] 
```

不幸的是，这需要**4 个步骤**，因此不符合我的兴趣。这应该会清除一些东西。**现在关于输入。**

* * *

用户输入网格如下：

```
5 4      // height and width
2 5 2 2  //
2 2 7 3  // the
3 1 2 2  // grid
4 8 2 7  //
1 1 1 1  // 
```

* * *

## 家庭作业

我已经考虑过了，但没有比将输入的网格简化为未加权（或负权重）图并在其上运行类似 dijkstra 或 A* （或类似的东西）的更好的解决方案。嗯...这是我迷路的部分。我首先实现了一些东西（或者立即抛出一些东西）。它与 dijkstra 或 A* 或任何东西无关；只是直接的广度优先搜索。

* * *

## 编码

```
#include <iostream>
#include <vector>

struct Point;

typedef std::vector<int> vector_1D;
typedef std::vector< std::vector<int> > vector_2D;
typedef std::vector<Point> vector_point;

struct Point {
    int y, x;
    vector_point Parents;
    Point(int yPos = 0, int xPos = 0) : y(yPos), x(xPos) { }

    void operator << (const Point& point) { this->Parents.push_back(point); }
};

struct grid_t {
    int height, width;
    vector_2D tiles;

    grid_t() // construct the grid
    { 
        std::cin >> height >> width; // input grid height & width

        tiles.resize(height, vector_1D(width, 0)); // initialize grid tiles

        for(int i = 0; i < height; i++)     //
            for(int j = 0; j < width; j++)  // input each tile one at a time
                std::cin >> tiles[i][j];    // by looping through the grid
    }
};

void go_find_it(grid_t &grid)
{
    vector_point openList, closedList;
    Point previous_node; // the point is initialized as (y = 0, x = 0) if not told otherwise
    openList.push_back(previous_node); // (0, 0) is the first point we want to consult, of course

    do
    {
        closedList.push_back(openList.back()); // the tile we are at is good and checked. mark it so.
        openList.pop_back(); // we don't need this guy no more

        int y = closedList.back().y; // now we'll actually
        int x = closedList.back().x; // move to the new point

        int jump = grid.tiles[y][x]; // 'jump' is the number shown on the tile we're standing on.

        if(y + jump < grid.height) // if we're not going out of bounds
        { 
            openList.push_back(Point(y+jump, x)); // 
            openList.back() << Point(y, x); // push in the point we're at right now, since it's the parent node
        }
        if(x + jump < grid.width) // if we're not going out of bounds
        { 
            openList.push_back(Point(y, x+jump)); // push in the new promising point
            openList.back() << Point(y, x); // push in the point we're at right now, since it's the parent node
        }
    }
    while(openList.size() > 0); // when there are no new tiles to check, break out and return
}

int main()
{
    grid_t grid; // initialize grid

    go_find_it(grid); // basically a brute-force get-it-all-algorithm

    return 0;
} 
```

我可能还应该指出，运行时间不能超过 1 秒，最大网格高度和宽度为 1000。所有的瓦片也是从 1 到 1000 的数字。

谢谢。

* * *

## 编辑代码

```
#include <iostream>
#include <vector>

struct Point;

typedef std::vector<int> vector_1D;
typedef std::vector< std::vector<int> > vector_2D;
typedef std::vector<Point> vector_point;

struct Point {
    int y, x, depth;
    vector_point Parents;
    Point(int yPos = 0, int xPos = 0, int dDepth = 0) : y(yPos), x(xPos), depth(dDepth) { }

    void operator << (const Point& point) { this->Parents.push_back(point); }
};

struct grid_t {
    int height, width;
    vector_2D tiles;

    grid_t() // construct the grid
    { 
        std::cin >> height >> width; // input grid height & width

        tiles.resize(height, vector_1D(width, 0)); // initialize grid tiles

        for(int i = 0; i < height; i++)     //
            for(int j = 0; j < width; j++)  // input each tile one at a time
                std::cin >> tiles[i][j];    // by looping through the grid
    }
};

int go_find_it(grid_t &grid)
{
    vector_point openList, closedList;
    Point previous_node(0, 0, 0); // the point is initialized as (y = 0, x = 0, depth = 0) if not told otherwise
    openList.push_back(previous_node); // (0, 0) is the first point we want to consult, of course

    int min_path = 1000000;

    do
    {
        closedList.push_back(openList[0]); // the tile we are at is good and checked. mark it so.
        openList.erase(openList.begin()); // we don't need this guy no more

        int y = closedList.back().y; // now we'll actually move to the new point
        int x = closedList.back().x; //
        int depth = closedList.back().depth; // the new depth

        if(y == grid.height-1 && x == grid.width-1) return depth; // the first path is the shortest one. return it

        int jump = grid.tiles[y][x]; // 'jump' is the number shown on the tile we're standing on.

        if(y + jump < grid.height) // if we're not going out of bounds
        { 
            openList.push_back(Point(y+jump, x, depth+1)); // 
            openList.back() << Point(y, x); // push in the point we're at right now, since it's the parent node
        }
        if(x + jump < grid.width) // if we're not going out of bounds
        { 
            openList.push_back(Point(y, x+jump, depth+1)); // push in the new promising point
            openList.back() << Point(y, x); // push in the point we're at right now, since it's the parent node
        }
    }
    while(openList.size() > 0); // when there are no new tiles to check, break out and return false

    return 0;
}

int main()
{
    grid_t grid; // initialize grid

    int min_path = go_find_it(grid); // basically a brute-force get-it-all-algorithm

    std::cout << min_path << std::endl;
    //system("pause");
    return 0;
} 
```

程序现在打印正确的答案。现在我必须优化（运行时间太大了）。关于这个有什么提示吗？优化是我最讨厌的一件事。

* * *

## 答案

最后，解决方案似乎只包含少量代码。越少越好，因为我喜欢它。感谢 Dejan Jovanović 的出色解决方案

```
#include <iostream>
#include <vector>
#include <algorithm>

struct grid_t {
    int height, width;
    std::vector< std::vector<int> > tiles;
    std::vector< std::vector<int> > distance;

    grid_t() // construct the grid
    { 
        std::cin >> height >> width; // input grid height & width

        tiles.resize(height, std::vector<int>(width, 0)); // initialize grid tiles
        distance.resize(height, std::vector<int>(width, 1000000)); // initialize grid tiles

        for(int i = 0; i < height; i++)     //
            for(int j = 0; j < width; j++)  // input each tile one at a time
                std::cin >> tiles[i][j];    // by looping through the grid
    }
};

int main()
{
    grid_t grid; // initialize grid

    grid.distance[0][0] = 0;
    for(int i = 0; i < grid.height; i++) {
        for(int j = 0; j < grid.width; j++) {
            if(grid.distance[i][j] < 1000000) {
                int d = grid.tiles[i][j];
                if (i + d < grid.height) {
                    grid.distance[i+d][j] = std::min(grid.distance[i][j] + 1, grid.distance[i+d][j]);
                }
                if (j + d < grid.width) {
                    grid.distance[i][j+d] = std::min(grid.distance[i][j] + 1, grid.distance[i][j+d]);
                }
            }
        }
    }
    if(grid.distance[grid.height-1][grid.width-1] == 1000000) grid.distance[grid.height-1][grid.width-1] = 0;
    std::cout << grid.distance[grid.height-1][grid.width-1] << std::endl;
    //system("pause");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T17:15:14.933

需要构建图形，这可以通过使用一次扫描矩阵的动态规划轻松解决。

您可以在开始时将距离矩阵 D[i,j] 设置为 +inf，其中 D[0,0] = 0。在遍历矩阵时，您只需执行

```
if (D[i,j] < +inf) {
  int d = a[i, j];
  if (i + d < M) {
    D[i + d, j] = min(D[i,j] + 1, D[i + d, j]);
  }
  if (j + d < N) {
    D[i, j + d] = min(D[i,j] + 1, D[i, j + d]);
  }
} 
```

最终的最小距离在 D[M -1, N-1] 中。如果你想重建路径，你可以保留一个单独的矩阵来标记最短路径的来源。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T13:45:32.793

你想多了。:) 运行广度优先搜索。解决方案空间是一棵二叉树，其中每个节点都分支为“右”或“下”。从当前点生成下点和右点，将它们的坐标填充到队列中，重复直到完成。

不检查，是这样的：

```
queue = [{ x: 0, y: 0, path: [] }] # seed queue with starting point
p = nil
do
  raise NoSolutionException if p.empty? # solution space exhausted
  p = queue.pop # get next state from the back of the queue
  break if p.x == MAX_X - 1 && p.y == MAX_Y - 1 # we found final state
  l = grid[p.x][p.y] # leap length

  # add right state to the front of the queue
  queue.unshift({x: p.x + l, y: p.y, path: p.path + [p] }) if p.x + l <= MAX_X

  # add down state to the front of the queue
  queue.unshift({x: p.x, y: p.y + l, path: p.path + [p] }) if p.y + l <= MAX_Y
end
puts p.path 
```

将丑化为 C++ 留给读者作为练习：p

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T13:53:46.473

建立一个未加权的有向图：

1.  有`N`x`M`个顶点。在下文中， vertex`v`对应于 grid square `v`。
2.  `u`从顶点到只有一条弧线，`v`如果您可以一次从方格跳到`u`方格`v`。

现在应用从右上角顶点到左下角的最短路径算法。

最后，请注意您实际上并不需要构建图表。您可以简单地根据原始网格实现最短路径算法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T13:50:22.707

从蛮力方法开始让它工作，然后从那里优化。蛮力是直截了当的：递归地运行它。采取你的两个动作，递归那些，等等。收集所有有效答案并保留最小值。如果运行时间过长，那么可以通过多种方式进行优化。例如，一些移动可能是无效的（因为它们超出了网格的维度）并且可以被消除，等等。继续优化，直到最坏的情况下输入以所需的速度运行。

话虽如此，性能要求只有在您使用相同的系统和输入时才有意义，即使这样也有一些警告。大 O 表示法是一种更好的分析性能的方法，而且它可以为您指出一个算法并消除对分析的需要。

# c# - 在 .Rdlc 上的参数文本上设置字体大小

> ID：14158306
> 
> 赞同：0
> 
> 时间：2013-01-04T13:41:53.063
> 
> 标签：c#, asp.net, reportviewer, rdlc

我有这个问题。

我有一份`rdlc`报告`ASP.NET`。我有一个显示的参数文本。

我对此没有任何问题 - 问题在于该参数中文本的大小。我有一个文本框，显示的值为

```
"Reporte de Señas " + Parameters!NombreTipoReporte.Value 
```

文字是正确的，但报告以正常大小（9 pt）显示。我将文本框中的格式更改为 24pt，但它无效 - 仍然在 9 pt 处看到它。

```
<Textbox Name="NombreTipoReporte">
          <CanGrow>true</CanGrow>
          <CanShrink>true</CanShrink>
          <KeepTogether>true</KeepTogether>
          <Paragraphs>
            <Paragraph>
              <TextRuns>
                <TextRun>
                  <Value>= "Reporte de Señas " + Parameters!NombreTipoReporte.Value</Value>
                  <Style>
                    <FontSize>24pt</FontSize>
                  </Style>
                </TextRun>
              </TextRuns>
              <Style />
            </Paragraph>
          </Paragraphs>
          <rd:DefaultName>NombreTipoReporte</rd:DefaultName>
          <Top>0.7155cm</Top>
          <Left>0.28258cm</Left>
          <Height>1.64811cm</Height>
          <Width>14.59083cm</Width>
          <ZIndex>3</ZIndex>
          <Style>
            <FontSize>24pt</FontSize>
            <Border>
              <Style>None</Style>
            </Border>
            <PaddingLeft>2pt</PaddingLeft>
            <PaddingRight>2pt</PaddingRight>
            <PaddingTop>2pt</PaddingTop>
            <PaddingBottom>2pt</PaddingBottom>
          </Style>
        </Textbox> 
```

为什么显示为正常尺寸？在设计视图中，我可以看到 24 pt 字体大小。而且我已经从设计视图中设置了这个尺寸，也没有工作。

当我打开网页时，我看到了 9pt 的文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T11:30:16.223

您是否尝试过修改**参数占位符**的属性而不是**文本框**的属性？

只需单击参数占位符（带有 的那个`[@parameterName]`），右键单击它，属性，在左侧选择字体，然后更改大小。

# wordpress - 在 Wordpress 中使用 SimplePie 获取提要频道中的元素？

> ID：14158308
> 
> 赞同：0
> 
> 时间：2013-01-04T13:42:02.973
> 
> 标签：wordpress, youtube, simplepie

我应该如何使用[get_channel_tags()](http://simplepie.org/wiki/reference/simplepie/get_channel_tags)或者我应该使用 SimplePie 的什么功能来获取 YouTube rss 播放列表或提要的频道/标题部分中的其他元素/属性的 totalResults？

播放列表示例：[http ://gdata.youtube.com/feeds/api/playlists/PL25BD62C6275E88F6?alt=rss](http://gdata.youtube.com/feeds/api/playlists/PL25BD62C6275E88F6?alt=rss)

这不起作用：

```
$totalResults = $rss->get_channel_tags('http://a9.com/-/spec/opensearchrss/1.0/', 'totalResults');
$totalResultsData = $totalResults[0]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T15:39:14.373

我没有让它工作，但如果我使用 Atom 提要，它可以与函数 get_feed_tags() 一起工作。

这有效：

播放列表： [http](http://gdata.youtube.com/feeds/api/playlists/PL25BD62C6275E88F6?alt=atom) ://gdata.youtube.com/feeds/api/playlists/PL25BD62C6275E88F6 ?alt=atom（您可以删除 ?alt=atom 参数，因为它默认使用）

```
$totalResults = $rss->get_feed_tags('http://a9.com/-/spec/opensearch/1.1/', 'totalResults');
$totalResultsData = $totalResults[0]['data']; 
```

# mysql - 演示索引 SQL 表的性能优势

> ID：14158309
> 
> 赞同：1
> 
> 时间：2013-01-04T13:42:03.127
> 
> 标签：mysql, sql, join, indexing, sqlfiddle

我一直听说 SQL 表的“正确”索引是性能的关键。我从未见过这样的真实示例，并且想使用[SQLFiddle](http://sqlfiddle.com/)制作一个示例，但不确定 SQL 语法是否可以这样做。

假设我有 3 张桌子： 1) `Users`2) `Comments`3) `Items`。我们还假设任何用户都可以评论每个项目。因此，要获得 item=3 的评论，SQL`SELECT`将如下所示：

```
SELECT * from comments join users on comments.commenter_id=users.user_id 
WHERE comments.item_id=3 
```

我听说一般来说，如果行数变大，即数千/数百万，则应该在 the`WHERE`和`JOIN`ed 列上放置索引。所以在这种情况下，`comments.item_id`、`comments.commenter_id`和`users.user_id`。

我想制作一个[SQLFiddle](http://sqlfiddle.com/)来比较将这些表编入索引与每个表不使用数千、数百万行。有人可以帮助生成这个 SQLFiddle 吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-04T14:47:02.607

我是 SQL Fiddle 的所有者。它绝对不是为性能测试生成巨大数据库的地方。有太多其他变量是您无法控制的（但在现实生活中应该），例如内存、硬盘配置等。此外，作为共享环境，还有其他人使用它可以也会影响您的测试。话虽如此，您仍然可以在 sqlfiddle 中构建一个小型数据库，然后查看带和不带索引的查询的执行计划。无论其他环境因素如何，这些都将保持一致，并将成为学习优化的良好来源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T15:16:33.490

索引一个表有很多不同的方法，您可能会根据最常用的 SELECT 语句选择不同的索引多个表。两种基本类型的索引称为集群索引和非集群索引。

聚集索引存储索引本身的所有信息，而不是存储数据库可以从中提取然后用于查找实际数据的引用列表。可视化这一点的最简单方法是将索引和表本身视为单独的对象。在聚集索引中，如果您索引的列用作标准（在 WHERE 子句中），则查询提取的信息将直接从索引中提取，而不是从表中提取。

另一方面，非聚集索引更像是一个参考表。它告诉查询它所请求的实际信息存储在表对象本身的什么位置。因此，本质上，当您使用非聚集索引时，实际上需要从表本身中检索数据的额外步骤。

聚集索引按顺序将数据物理存储在硬盘上，因此，一张表上只能有一个聚集索引（因为我们只能在磁盘驱动器上以一种“物理”方式存储表） . 聚集索引也需要是唯一的（尽管肉眼可能不是这样，但数据库本身总是如此）。因此，大多数聚集索引都放在主键上（因为大多数主键都是唯一的）。

与聚集索引不同，您可以在一个表上拥有任意数量的非聚集索引，因为毕竟它们只是实际表本身的参考表。由于我们对非聚集索引的选项数量基本上是无限的，因此用户喜欢根据需要在 SELECT 语句的 WHERE 子句中常​​用的列上放置尽可能多的选项。

但像所有事情一样，过度并不总是好的。您在表上放置的索引越多，该表上的“开销”就越多。索引可能会加快您的查询运行速度，但过多的开销也会减慢它们的速度。关键是在针对您的特定情况的索引过多和索引不足之间找到平衡点。

至于测试带或不带索引的查询性能的好地方，我建议使用 SQL Server。SQL Server Management Studio 中有一个名为“执行计划”的函数，它告诉您运行查询的成本和时间。

# vb.net - POST 数据后从服务器读取 XML 响应

> ID：14158311
> 
> 赞同：1
> 
> 时间：2013-01-04T13:42:20.213
> 
> 标签：vb.net, post, response, webclient

我正在使用 VB.net 从我的 Windows 应用程序向 PHP 网页发送 POST 数据。代码如下：

```
Dim data As String = "this is a test data push"
Dim wc As New WebClient
wc.Headers(HttpRequestHeader.ContentType) = "application/x-www-form-urlencoded"
wc.UploadStringAsync(uri, data) 
```

数据被存储。在 PHP 页面中，我将 XML 响应发送回手机

```
header('Content-type: text/xml');
        echo '';
        echo '<count>';
                      echo '<',$i,'>'
        echo '</count>';
        echo ''; 
```

如何使用 WebClient 读取响应？任何帮助，将不胜感激。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T15:04:45.720

您需要订阅该`UploadStringCompleted`事件。有关更多详细信息，请参阅[http://msdn.microsoft.com/en-us/library/ms144239.aspx](http://msdn.microsoft.com/en-us/library/ms144239.aspx)，但这里是摘录：

> 此方法将字符串发送到资源。使用从线程池自动分配的线程资源异步发送字符串。在上传字符串之前，此方法使用 Encoding 属性中指定的编码将其转换为 Byte 数组。**要在字符串上传完成时接收通知，您可以将事件处理程序添加到 UploadStringCompleted 事件**。

深入研究，您可以看到它甚至`UploadStringCompletedEventArgs`通过属性返回一个包含结果的对象`Result`。有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/system.net.uploadstringcompletedeventargs.aspx 。](http://msdn.microsoft.com/en-us/library/system.net.uploadstringcompletedeventargs.aspx)

# ajax - 基于 Ajax 的用户名可用性检查，然后生成一些用户名以在 jsp 中使用

> ID：14158312
> 
> 赞同：1
> 
> 时间：2013-01-04T13:42:34.300
> 
> 标签：ajax, jsp

我做了一些基于 ajax 的 jsp 编码来检查用户名的可用性。它工作得很好。虽然它可能有一些错误。所以如果有请指出。现在我的主要问题是，检查后我还想生成一些用户名供用户使用，就像我们可以在 gmail 注册表单中看到的那样。我在这里给出我的代码...

首先是 index.html...

```
 <html>
<body>
<form action=sample.jsp method=post>
id<input type=text name=id><br>
<input type=submit value=next>
</form>
</body>
</html> 
```

现在 sample.jsp...

```
<jsp:useBean id="ob" class="sample.Database" scope="session" />
<jsp:setProperty name="ob" property="*" />
<html>
<head>
var xmlHttp  
    var xmlHttp
    var checkvalue

    function showState(p1){ 
        if (typeof XMLHttpRequest != "undefined"){
            xmlHttp= new XMLHttpRequest();
            }
            else if (window.ActiveXObject){
            xmlHttp= new ActiveXObject("Microsoft.XMLHTTP");
            }
        if (xmlHttp==null){
                alert ("Browser does not support XMLHTTP Request")
            return
        } 
        var url="getlist.jsp?name="+p1;
        xmlHttp.onreadystatechange = stateChange;
        xmlHttp.open("GET", url, true);
        xmlHttp.send(null);
    }

    function stateChange(){   
        if (xmlHttp.readyState==4 || xmlHttp.readyState=="complete"){   
            checkvalue=document.getElementById("name").innerHTML=xmlHttp.responseText;
            document.f1.checking.value = xmlHttp.responseText; 
        }   
    }

    function conditions(){
        if(!checkvalue.match("Available"))
        {
            alert("no match");
            return false
        }
    }

</script>  
</head>  
<body >  
<center>
<br>  
<form action="sample1.jsp" name="f1" method="post" onsubmit="return conditions()">
name <input type=text name=name onchange="showState(this.value);"><div id='name'></div><br>
checking<input type=text name=checking><br>
    <input type=submit value=next>

</form>
</body> 
</html> 
```

现在 getlist.jsp...

```
 <jsp:useBean id="ob" class="sample.Database" scope="session" />
<%
    String n=request.getParameter("name");
    if(ob.checkName(n)==0)
    {
%>
        <font color=green>Available</font>
<%
    }
    else
    {
%>
        <font color=red>Not available</font>
<%
    }
%> 
```

现在 sample1.jsp....

```
<jsp:useBean id="ob" class="sample.Database" scope="session" />
<jsp:setProperty name="ob" property="*" />
<%
    if(ob.insertData()==1)
        out.println("Success");
    else

        out.println("Unsuccess");
%> 
```

包中类文件的代码->示例文件名->Database.java...

```
package sample;

import java.util.*;
import java.sql.*;

public class Database
{
    private String id="",name="";
    private int t=0;
    private Connection con;

    public void setName(String name)
    {
        this.name=name;
    }

    public String getName()
    {
        return name;
    }

    public void setId(String id)
    {
        this.id=id;
    }

    public String getId()
    {
        return id;
    }

    public Connection c1()
    {
        try{
            Class.forName("oracle.jdbc.OracleDriver");
            con = DriverManager.getConnection("jdbc:oracle:thin:@localhost:1000:xe","system","12345");
        }
        catch(Exception e){}
        return con;
    }

    public int checkName(String n)
    {
        try{
            con=c1();
            PreparedStatement pst = con.prepareStatement("select name from testani where name='"+n+"'");
            t = pst.executeUpdate();
            con.close();
        }
        catch(Exception e){}
        return t;
    }

    public int insertData()
    {
        try{
            con=c1();
            PreparedStatement pst = con.prepareStatement("insert into testani values('"+name+"','"+id+"')");
            t = pst.executeUpdate();
            con.close();
        }
        catch(Exception e){}
        return t;
    }
} 
```

我使用 mysql 创建了一个名为 testani 的数据库，其属性为 name 和 id ...

现在我如何修改此代码以生成一些名称.. 提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T13:46:12.410

我想您需要为名称建议制定自己的算法。

就像一旦用户输入他的名字、姓氏、出生年份等。然后您可以设计一个算法，该算法可以采用这些值并通过组合（连接）单词或出生年份或您想要生成建议用户名的任何内容来进行一些处理。

然后您可以简单地将该列表返回给用户。

# html - 如何在 IE9 中调试某些东西 - 奇怪的行为

> ID：14158313
> 
> 赞同：0
> 
> 时间：2013-01-04T13:42:36.950
> 
> 标签：html, cross-browser

我已经报告了错误，即某些东西在 IE9 中不起作用。我启动了 IE 并看到了那个 bug，但是当我在 IE 中运行开发人员工具时，我的 bug 消失了，一切正常。不幸的是，当我再次运行 IE 时，错误仍然存​​在。

最糟糕的是，它不仅发生在一个具体的错误上。它一直在发生。所以这不是bug的本质，而是IE。它阻止我调试它。我能做些什么？

我没有在开发者工具中切换引擎模式

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T15:26:17.300

我的问题是`console.log(...)`我的代码中有。

在我不运行开发人员工具之前，控制台不存在并且它抛出错误并且我的代码停止，所以休息不起作用。

# iphone - 在 iPhone 中存档时出现 armv7s 错误

> ID：14158315
> 
> 赞同：1
> 
> 时间：2013-01-04T13:42:55.763
> 
> 标签：iphone, ios

> **可能重复：**
> [链接器命令失败，退出代码为 1 xcode4.5](https://stackoverflow.com/questions/12534334/linker-command-failed-with-exit-code-1-xcode4-5)

我在为应用商店存档我的应​​用时遇到以下错误

ld：文件是通用的（3 个切片）但不包含 a(n) armv7s 切片：/Users/***************/l******/*** ** ppCircle.a 用于架构 armv7s clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

我试图从我的目标中删除 armv7s，然后开始出现一些新错误。我该如何解决它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T14:02:35.147

问题是：您正在使用库调用：*** *ppCircle.a 并且该库不是为 armv7s 编译的。只有两个解决方案：

1）如果你有库源代码，你可以尝试为armv7和armv7s编译它

2）不要用armv7s编译你的项目，只使用armv7（这可以在项目构建设置中更改）

# ios - iOS：如何刷新函数中的视图？

> ID：14158316
> 
> 赞同：1
> 
> 时间：2013-01-04T13:42:58.213
> 
> 标签：ios

我对 iOS 编程非常陌生，但我已经有一个无法解决的大问题。这似乎很容易。

我有一个按钮，我点击它来更改一个名为`message`

这是代码：

```
- (IBAction)react:(id)sender {
    int hasard ;
    hasard=3; 
    message.text=[NSString stringWithFormat:@"1 %d",hasard];    
    sleep (1);
    message.text=[NSString stringWithFormat:@"2 %d",hasard]; 
} 
```

它运作良好，但我没有看到第一个`message.text`变化。当我单击按钮时，我必须等待一秒钟，然后我看到`2 3`

我以为我能看到`1 3`，等一下再看`2 3`。什么不见​​了？似乎很明显。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T13:47:33.263

[`sleep()`](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man3/sleep.3.html)将暂停作为主线程的当前线程执行，因此您将阻止所有 UI 操作，直到该方法完成。您需要安排第二个分配在指定时间之后运行，而不会阻塞当前的运行循环。这可以通过 GCD 来实现。

```
- (IBAction)react:(id)sender {
    int hasard ;
    hasard=3; 
    message.text=[NSString stringWithFormat:@"1 %d",hasard];

    int64_t delayInSeconds = 1.0;
    dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
    dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
        message.text=[NSString stringWithFormat:@"2 %d",hasard];
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T13:48:49.213

您正在阻塞主线程（好吧，而是`sleep()`阻塞它）。如果您这样做，对 UI 的已提交更改将不会出现 - 您只会看到最终结果。你必须做其他事情（顺便说一下，就用户体验而言，阻止 UI 是一个非常糟糕的主意）。您可以尝试使用计时器，例如：

```
int hasard = 3;

- (void)react:(id)sender
{
     message.text = [NSString stringWithFormat:@"1 %d", hasard];
     [NSTimer scheduledTimerWithTimeInterval:1.0f target:self selector:@selector(timer:) userInfo:nil repeats:NO];
}

- (void)timer:(NSTimer *)tmr
{
     message.text = [NSString stringWithFormat:@"2 %d", hasard];
} 
```

# android - 如何在android中检测禁用复选框上的触摸事件

> ID：14158317
> 
> 赞同：3
> 
> 时间：2013-01-04T13:43:01.623
> 
> 标签：android, checkbox, onclicklistener, ontouchlistener

我有一个`layout`带有几个复选框。当一个复选框被选中时，其他复选框被设置为`CHECKED=true`and `ENABLED=false`。现在我希望用户能够点击任何禁用的复选框，如果他这样做，一个设置为启用并选中，而其他所有复选框都被禁用。

当复选框设置为 时，似乎没有调用`onTouchListener`以及。任何人都可以帮忙吗？`onClickListener``ENABLED=false`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T13:50:08.640

通常这种情况下的行为在 Android 中是一个问号。您可能能够做的一件事是将`CheckBox`from 某物的后代`ViewGroup`（例如，许多布局`FrameLayout`之一）并`setOnClickListener`在其上使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-15T00:13:27.887

您无法在禁用的复选框上接收事件。如果您将禁用的复选框放在类似的布局上`FrameLayout`，您可以在单击布局时收到事件，但不会在禁用的复选框中。例如，如果要在禁用的复选框上捕获事件，最好的方法是简单地模拟禁用的复选框，然后捕获长按事件以再次激活。

我所做的是一个带有白色文本颜色但以灰色文本颜色开头且未选中的复选框，并带有一个布尔停止变量，您之前在每个`onCheckedChanged`方法上都检查过该变量。除非您更改布尔停止变量，否则永远不会检查复选框。您可以根据需要多次按下复选框，但没有任何反应。它似乎只是被禁用，但是当您长按时，您会取消阻止布尔停止变量并将灰色文本颜色复选框更改为白色，就像普通复选框一样。您可以在需要时更改 stopper 变量并“再次禁用它”

在 color.xml 中：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
   <color name="white">#FFFFFF</color>
   <color name="grey">#808080</color>
</resources> 
```

在 main.xml 中：

```
<CheckBox
      android:id="@+id/checkbox1"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:textColor="@color/white"
      android:text="text" /> 
```

在 main.java 代码中，onCreate 方法：

```
//define a boolean stopper variable to check on event
boolean chkActivated = false; 

checkbox = (CheckBox) findViewById(R.id.checkbox1);
checkbox.setTextColor(getResources().getColorStateList(R.color.grey));
checkbox.setOnCheckedChangeListener(new CheckBox.OnCheckedChangeListener() {
     public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
         if(chkActivated){
             if (isChecked) {
                 //Do everthing you want when checked
             }else{
                //Do everthing you want when unchecked
             }
         }else{
             checkbox.setChecked(false);
             Toast.makeText(Activity.this, "It is disabled. to activate press long click"), Toast.LENGTH_SHORT).show();
         }
      }
});

checkbox.setOnLongClickListener(new OnLongClickListener() { 
   @Override
   public boolean onLongClick(View v) {
       chkActivated = true;
       checkbox.setTextColor(getResources().getColorStateList(R.color.white));
       checkbox.setChecked(true);
       return true;
   }
}); 
```

希望这可以帮助你

# javascript - jquery 函数 - 不返回

> ID：14158319
> 
> 赞同：0
> 
> 时间：2013-01-04T13:43:12.590
> 
> 标签：javascript, jquery

> **可能重复：**
> [如何返回 AJAX 响应文本？](https://stackoverflow.com/questions/1225667/how-to-return-ajax-response-text)

我的 getJsonObject 函数有点问题。我希望我的代码做的是每次单击下一步时，getJsonObject 函数都会获取下一页的文章，并且当 dom 准备好时，我会显示文章的标题。但是如果出现错误（比如页面用完），那么 pageNr 将不再增加。问题是 getJsonObject 函数不返回 0，尽管 alert('return is 0)' 确实显示。

这是我的代码：

```
<html>
    <head>
        <title>World News</title>
        <link rel="stylesheet" type="text/css" href="css/fullWindow.css" />
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
        <script src="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.9/jquery-ui.js" type="text/javascript"></script>
        <script src = "https://raw.github.com/janl/mustache.js/master/mustache.js" type = "text/javascript"></script>
    <body>      
        <section id="mainContent">          
            <div class="prevNext floatRight"><a id="prev" href="#">prev</a> | <a id="next" href="#">next</a></div>
            <section id="news">
                <p id="headline">This is my headline for the moment.</p>

            </section>
        </section>              

    <script type="text/javascript">
        $(document).ready(function(){
            var pageNr = 1;
            var sectionName = "science";
            var err = '2';

            $("#next").click(function(){

                /* it removes the tag 'p' with id="headline" and inserts some other content */
                $.when($('#headline').remove()).then(function(){                            
                    err = getJsonObject(sectionName, pageNr+1);
                    alert('err: '+err);

                    /* if there is no error go to the next page */
                    if(err == '0'){
                        pageNr++;                   
                    }
                });
            });
        });
        function getJsonObject(sectionName, pageNr){        

            $.getJSON('http://content.guardianapis.com/search?q=' + sectionName +      '&page=' + pageNr + '&page-size=5&order-by=relevance&format=json&show-fields=all&date-  id=date%2Flast7days&api-key=gd6ndfndjyr8sd2p3rq3ubkg&callback=?', 
            function(data){                 
                var results;    

                /* I get status == error when I finish iterating the pages*/    
                if(data.response.status != 'error'){            

                    $('#news').append('<p id="headline">'+data.response.results[pageNr].fields.headline+'</p>');                        

                    alert('return is 0');
                    return '0';
                }else{

                    alert('return is 1');           
                    return '1';         
                }
            });
        }
    </script> 
    </body>
</html> 
```

任何想法为什么 return 不起作用？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T13:45:33.607

你`getJsonObject(sectionName, pageNr)`的 a`$.getJSON`是一个 AJAX 异步调用

因此返回无法正常工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T13:46:38.317

因为`getJSON`是异步执行的。常见的解决方案是将另一个参数传递`getJsonObject`给回调，然后您将首先使用您想要返回的值调用它。

```
function getJsonObject(sectionName, pageNr, callback){        

    $.getJSON('http://content.guardianapis.com/search?q=' + sectionName +      '&page=' + pageNr + '&page-size=5&order-by=relevance&format=json&show-fields=all&date-  id=date%2Flast7days&api-key=gd6ndfndjyr8sd2p3rq3ubkg&callback=?', 
    function(data){                 
        var results;    

        /* I get status == error when I finish iterating the pages*/    
        if(data.response.status != 'error'){            

            $('#news').append('<p id="headline">'+data.response.results[pageNr].fields.headline+'</p>');                        

            alert('return is 0');
            callback('0');
        }else{

            alert('return is 1');           
            callback('1');         
        }
    });
} 
```

这也是您将回调函数传递给的原因`$.getJSON`。因为在幕后它使用了异步执行 HTTP 请求的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T13:49:49.107

你应该`getJsonObject`用**回调**函数重写你的：

```
function getJsonObject(sectionName, pageNr, callback){   
   $.getJSON(..., function(data) {

      ...
      callback('1');
   } 
```

使用`getJsonObject`：

```
getJsonObject(sectionName, pageNr+1, function(err) {
   alert(err);
}); 
```

# refactoring - 使用 resharper 提取类并引入构造函数依赖项

> ID：14158326
> 
> 赞同：0
> 
> 时间：2013-01-04T13:43:43.897
> 
> 标签：refactoring, resharper, inversion-of-control, automated-refactoring, constructor-injection

是否可以使用 Resharper 重构代码，以便将以下方法`Eat`提取到单独的类中，并将新提取的`Dinner`类作为外部依赖注入到类中？

## 原始代码

```
public class Dinner
{
    public Dinner()
    {

    }

    public void Eat()
    {
        //do the eating
    }
} 
```

## 重构代码

```
public interface IEatService
{
    void Eat();
}

public class EatService : IEatService
{
    public void Eat()
    {

    }
}
public class Dinner
{
    private readonly IEatService _eatService = null;

    public Dinner(IEatService eatService)
    {
        _eatService = eatService;
    }

    public void Eat()
    {
        _eatService.Eat();
    }

} 
```

它不必与重构的代码完全一样——这可以给出一个想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T21:30:42.493

您可以在 R# 7 中使用三步重构几乎按照您的意愿进行操作：

1.  将插入符号放在您的 Eat 方法中，调用 Extract Class 重构（在 VS 中为 Ctrl-Shift-R），将您的类命名为 EatService。
2.  将插入符号放在您的 EatService 类中，调用提取接口重构。
3.  将插入符号放在您的 EatService 类中，调用 Use Base type Where possible refactoring。

剩下的就是在 Dinner 类中修复一个构造函数，以便将 IEatService 作为参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T15:32:37.883

使用 R# 6，实现此目的的一种方法是使用此操作序列。`ReSharper | Refactor`请注意，菜单栏上的重构都可用，或者（更快）在上下文中使用`Ctrl`+ `Shift`+ `R`。还有一点打字；如果有一种方法不需要您输入任何内容，我不会感到惊讶。

*   从名为的文件中的原始代码开始`Dinner.cs`
*   将光标放在 上`Eat`，使用`Extract Interface`重构，命名接口`IEatService`
*   将光标放在`IEatService`, `Alt`+上`Enter`并创建一个派生类型，接受提供的`EatService`, 和`Alt`+名称`Enter`以填充方法实现主体
*   这是我们必须输入的地方： In `Dinner.Eat()`, type `_eatService.Eat();`。注意`_eatService`是红色的；`Alt`+`Enter`在其上，选择“创建字段”，将提供的类型更改为`IEatService`
*   将光标放在`_eatService`, `Alt`+的定义上，`Enter`然后选择“从 ctor 参数初始化，然后再次`Alt`+`Enter`并接受`readonly`建议

请注意，初始化`_eatService`为`null`是多余的；R# 会让你知道这一点。

我们现在位于您的目标代码处。

我认为 R# 7 有一些新的重构（例如提取类），这可能会使这更快。

# php - 如何使用codeigniter更改mysql日期格式

> ID：14158330
> 
> 赞同：2
> 
> 时间：2013-01-04T13:43:56.603
> 
> 标签：php, mysql, codeigniter, date-format

我正在使用 CI 和 mysql 开发一个网站。我想将日期格式从 yyyy-mm-dd 更改为 dd-mm-yyyy。我知道我应该使用 date_format 函数。但是当我尝试使用它时，它不起作用——日期格式没有改变。我也尝试添加第二个参数（FALSE）。但是，我也发现了问题，特别是当我需要查询超过 1 列时。这是我的代码：

```
function __construct() {
    parent::__construct();
    $this->table = array(
        'name'      => 'article',
        'coloumn'   => array(
            'article_id',
            'article_title',
            'article_content',
            'article_summary',
            'date_format(article_publishdate, \'%d-%M-%Y %H:%i:%s\') as article_publishdate',
            'article_source',
            'article_link',
            'media_type',
            'media_link',
            'media_position',
            'article_category.category_title',
        ),
        'join'      =>  array(
                            0 => array('article_category' , 'article.article_category_id=article_category.category_id', 'left'),
                        ),    
        'where'     => array(),    
        'order'     => array(),
        'limit'     => array(),
        'idkey'     => 'article_id',
    );  
}

public function getfullbody($id)
{
    $this->db->query("update article set article_view = (article_view+1) where article_id = '$id'");
    $this->db->select($this->table['column'], FALSE);
        if (count($this->table['join'])>0){
            foreach ($this->table['join'] as $row):
                if (!empty($row[2])){
                    $this->db->join($row[0], $row[1], $row[2]);
                }
                else {
                    $this->db->join($row[0], $row[1]);
                }
            endforeach;
        }

    $this->db->where("article_id = '$id'");
    $query = $this->db->get($this->table['name']);
    $data = $query;
    return $data;
} 
```

问题：当我将 date_format() 与 codeigniter 一起使用时，它并没有改变日期格式。那么，如何修复呢？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:40:04.813

将列更改为列索引，如果要将日期显示为 dd-mm-yyyy，请使用以下代码

```
function __construct() {
    parent::__construct();
    $this->table = array(
        'name'      => 'article',
        'column'   => array(
            'article_id',
            'article_title',
            'article_content',
            'article_summary',
            'date_format(article_publishdate, \'%d-%m-%Y\') as article_publishdate',
            'article_source',
            'article_link',
            'media_type',
            'media_link',
            'media_position',
            'article_category.category_title',
        ),
        'join'      =>  array(
                            0 => array('article_category' , 'article.article_category_id=article_category.category_id', 'left'),
                        ),    
        'where'     => array(),    
        'order'     => array(),
        'limit'     => array(),
        'idkey'     => 'article_id',
    );  
}

public function getfullbody($id)
{
    $this->db->query("update article set article_view = (article_view+1) where article_id = '$id'");
    $this->db->select($this->table['column'], FALSE);
        if (count($this->table['join'])>0){
            foreach ($this->table['join'] as $row):
                if (!empty($row[2])){
                    $this->db->join($row[0], $row[1], $row[2]);
                }
                else {
                    $this->db->join($row[0], $row[1]);
                }
            endforeach;
        }

    $this->db->where("article_id = '$id'");
    $query = $this->db->get($this->table['name']);
    $data = $query;
    return $data;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-29T14:57:17.883

测试代码点火器 2...

```
('%d-%m-%Y') 
```

在你的粗心

```
"date_format(article_publishdate, ('%d-%m-%Y')) as article_publishdate", 
```

这对我来说非常有用

# visual-studio-2010 - 通过 Visual Studio 2010 安装 .NET 框架作为 ClickOnce 应用程序部署的一部分时出现错误代码 5100

> ID：14158331
> 
> 赞同：12
> 
> 时间：2013-01-04T13:44:00.397
> 
> 标签：visual-studio-2010, .net-4.0, clickonce, 32bit-64bit

在 Visual Studio 2010 中，我已将我的应用程序设置为面向 .NET Framework 版本 4 和“所有 CPU”。由于我们的一些用户是 64 位的，而其他用户是 32 位的，我假设有人会选择所有 CPU。那是对的吗？

在特定用户的 32 位 Windows 7 SP1 机器上，框架安装（通过 ClickOnce）失败并出现错误代码 5100，根据[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/vstudio/ee390831%28v=vs.100%29.aspx)，表明`The user's computer does not meet system requirements`.

用户的 PC 是**32 位**Windows 7 SP1，所以我想知道命令参数“FullX64Bootstrapper”是否正确？

作为 ClickOnce 发布机制的一部分，此安装受 Microsoft 控制。看起来好像是在尝试将 64 位框架安装到 32 位机器上？这就是导致 5100 错误的原因吗？

这是从日志中摘录的命令（我的重点）：

> 使用命令“C:\Users\XXXXXX~1\AppData\Local\Temp\VSD983D.tmp\DotNetFX40\dotNetFx40_Full_setup.exe”和参数“/q /norestart /ChainingPackage **FullX64Bootstrapper** /lcid 1033”进行安装

这是完整的日志：

```
The following properties have been set:
 Property: [AdminUser] = true {boolean}
 Property: [InstallMode] = HomeSite {string}
 Property: [ProcessorArchitecture] = Intel {string}
 Property: [VersionNT] = 6.1.1 {version}
 Running checks for package 'Windows Installer 3.1', phase BuildList
 The following properties have been set for package 'Windows Installer 3.1':
 Running checks for command 'WindowsInstaller3_1\WindowsInstaller-KB893803-v2-x86.exe'
 Result of running operator 'VersionGreaterThanOrEqualTo' on property 'VersionMsi' and value '3.1': true
 Result of checks for command 'WindowsInstaller3_1\WindowsInstaller-KB893803-v2-x86.exe' is 'Bypass'
 'Windows Installer 3.1' RunCheck result: No Install Needed
 Running checks for package 'Microsoft .NET Framework 4 (x86 and x64)', phase BuildList
 Reading value 'Version' of registry key 'HKLM\Software\Microsoft\NET Framework Setup\NDP\v4\Full'
 Unable to read registry value
 Not setting value for property 'DotNet40Full_TargetVersion'
 The following properties have been set for package 'Microsoft .NET Framework 4 (x86 and x64)':
 Running checks for command 'DotNetFX40\dotNetFx40_Full_x86_x64.exe'
 Result of running operator 'ValueEqualTo' on property 'InstallMode' and value 'HomeSite': true
 Result of checks for command 'DotNetFX40\dotNetFx40_Full_x86_x64.exe' is 'Bypass'
 Running checks for command 'DotNetFX40\dotNetFx40_Full_setup.exe'
 Result of running operator 'ValueNotEqualTo' on property 'InstallMode' and value 'HomeSite': false
 Skipping ByPassIf because Property 'DotNet40Full_TargetVersion' was not defined
 Result of running operator 'ValueEqualTo' on property 'AdminUser' and value 'false': false
 Result of running operator 'VersionLessThan' on property 'VersionNT' and value '5.1.2': false
 Result of running operator 'ValueEqualTo' on property 'ProcessorArchitecture' and value 'IA64': false
 Result of checks for command 'DotNetFX40\dotNetFx40_Full_setup.exe' is 'Install'
 'Microsoft .NET Framework 4 (x86 and x64)' RunCheck result: Install Needed
 EULA for components 'Microsoft .NET Framework 4 (x86 and x64)' was accepted.
 Copying files to temporary directory "C:\Users\XXXXXX~1\AppData\Local\Temp\VSD983D.tmp\"
 Downloading files to "C:\Users\XXXXXX~1\AppData\Local\Temp\VSD983D.tmp\"
 (1/2/2013 11:09:57 AM) Downloading 'DotNetFX40\dotNetFx40_Full_setup.exe' from 'http://go.microsoft.com/fwlink/?linkid=182805' to 'C:\Users\XXXXXX~1\AppData\Local\Temp\VSD983D.tmp\'
 Download completed at 1/2/2013 11:10:00 AM
 Verifying file integrity of C:\Users\XXXXXX~1\AppData\Local\Temp\VSD983D.tmp\DotNetFX40\dotNetFx40_Full_setup.exe
 WinVerifyTrust returned 0
 File trusted
 Running checks for package 'Microsoft .NET Framework 4 (x86 and x64)', phase BeforePackage
 Reading value 'Version' of registry key 'HKLM\Software\Microsoft\NET Framework Setup\NDP\v4\Full'
 Unable to read registry value
 Not setting value for property 'DotNet40Full_TargetVersion'
 The following properties have been set for package 'Microsoft .NET Framework 4 (x86 and x64)':
 Running checks for command 'DotNetFX40\dotNetFx40_Full_setup.exe'
 Result of running operator 'ValueNotEqualTo' on property 'InstallMode' and value 'HomeSite': false
 Skipping ByPassIf because Property 'DotNet40Full_TargetVersion' was not defined
 Result of running operator 'ValueEqualTo' on property 'AdminUser' and value 'false': false
 Result of running operator 'VersionLessThan' on property 'VersionNT' and value '5.1.2': false
 Result of running operator 'ValueEqualTo' on property 'ProcessorArchitecture' and value 'IA64': false
 Result of checks for command 'DotNetFX40\dotNetFx40_Full_setup.exe' is 'Install'
 'Microsoft .NET Framework 4 (x86 and x64)' RunCheck result: Install Needed
 Verifying file integrity of C:\Users\XXXXXX~1\AppData\Local\Temp\VSD983D.tmp\DotNetFX40\dotNetFx40_Full_setup.exe
 WinVerifyTrust returned 0
 File trusted
 Installing using command 'C:\Users\XXXXXX~1\AppData\Local\Temp\VSD983D.tmp\DotNetFX40\dotNetFx40_Full_setup.exe' and parameters ' /q /norestart /ChainingPackage FullX64Bootstrapper /lcid 1033'
 Process exited with code 5100
 Status of package 'Microsoft .NET Framework 4 (x86 and x64)' after install is 'InstallFailed' 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-02-07T22:00:38.093

在 MSDN 上，有[一个简短的 .NET 安装程序返回代码列表](http://msdn.microsoft.com/en-us/library/ee390831%28v=vs.110%29.aspx)：

> *   **0**：安装成功。
> *   **1602**：用户取消安装。
> *   **1603** : 安装过程中发生致命错误。
> *   **1641**：需要重新启动才能完成安装。此消息表示成功。
> *   **3010** : 需要重新启动才能完成安装。此消息表示成功。
> *   **5100** : 用户的计算机不符合系统要求。

因此，根据 Microsoft 的说法，**5100**返回码与系统要求有关。

在我的系统上，这是因为以前的（其他）设置确实需要重新启动，而我省略了重新启动。重新启动后，.NET Framework 4 安装成功。

在另一个系统上，这是由于我的硬盘没有足够的可用空间。一旦我释放了一些 GB，设置就成功了。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-27T06:42:15.823

由于未安装 Windows XP 上的[Windows 映像组件](http://www.microsoft.com/en-us/download/details.aspx?id=32)(WIC) (wic_x86_enu.exe) ，因此在相同情况下我收到了相同的消息。这对我有帮助。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-11T12:48:28.443

.NET 4.0 的最低安装要求是 2 GB 磁盘空间。释放安装驱动器中的空间并安装它会正常工作。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-09T18:17:07.450

我目前正在解决同样的问题。我们的一些客户的安装人员也有同样的问题。

到目前为止我想出的原因是：

> “C：驱动器上没有足够的可用空间”

这是一些 5100 错误的原因，但我还没有找到其他错误的原因。

如果在命令提示符下键入：“net helpmsg 5100”，则输出为“Asia”。我不知道那是什么意思。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-07-12T14:11:05.623

[当机器安装的Visual C](http://en.wikipedia.org/wiki/Visual_C%2B%2B#32-bit_versions)版本比包中分发的版本更新时，也会发生这种情况。它需要在不首先检查必备组件的情况下运行。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-01-17T09:44:26.287

当我尝试安装 Windows SDK 时出现此错误。**出现此错误是因为** **以前在我的机器上安装了较新版本的 Visual C++ 2010 Redistributable**。我需要从我的机器上卸载 x86 和 x64 版本，然后安装 Windows SDK。[MS在这里](https://support.microsoft.com/en-us/kb/2717426)描述了我的问题。

> 您可能会尝试从您的机器上卸载 Visual C++ 2010 Redistributables。

*这可能与您的问题有关，也可能无关，但值得一试。如果有人尝试这样做，请将您的结果添加到评论中，以便其他人也可以知道结果。*

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-04-05T22:18:56.527

错误 5100 可能意味着 .NET Framework 4.7 无法在 Windows 10 上安装，因为 Windows 10 的前两个版本（版本 10240 版本 1507 和版本 10586 版本 1511）不允许 .NET Framework 4.7。它们只允许最高 .NET Framework 4.6.2。在 Windows 10 上安装 .NET Framework 4.7 或更高版本的唯一方法是升级您的 Windows 10 内部版本。

我不知道为什么它报告“亚洲”作为消息的文本。只是微软的错误消息处理在各个方面都严重不足。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-03-13T15:01:40.467

在此 MSDN 链接[https://msdn.microsoft.com/en-us/library/ee390831(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/ee390831(v=vs.110).aspx)上，它将安装程序日志位置指定为`%temp%\Microsoft .NET Framework 4.5*.html`. 我一直在寻找 .NET 4.5，但其他版本链接包含 .NET 4.0 的路径。

查看该日志给了我关于下一步做什么的详细信息。在我的情况下，与必须安装的某个 KB 相对应的更新。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-07-18T04:10:25.533

此错误也可能是由于未满足操作系统补丁要求引起的。尝试手动安装程序（从日志中查找安装文件）并手动运行它。

# asterisk - 星号：转接电话而不立即接听

> ID：14158334
> 
> 赞同：2
> 
> 时间：2013-01-04T13:44:17.073
> 
> 标签：asterisk, phone-call, forwarding

我想转接一个电话。我可以定义分机、接听电话和使用拨号命令。但 t 不是我想要的。我不想立即接听电话。我宁愿等待第二个电话被接听。

怎么做？当我只使用 Dial(Sip/...) 而不应答时，双方完全沉默。

我已阅读（请参阅[http://fonality.com/trixbox/forums/trixbox-forums/open-discussion/call-forward-without-answer-dialplan](http://fonality.com/trixbox/forums/trixbox-forums/open-discussion/call-forward-without-answer-dialplan)）可以通过禁用传真来解决它。我已经卸载了传真模块，但它并没有解决问题。在同一页面上，我读到我可以尝试类似[http://www.voip-info.org/wiki/view/Asterisk%20auto-dial%20out](http://www.voip-info.org/wiki/view/Asterisk%20auto-dial%20out)的东西，但这看起来太高级了。

我有另一个想法。使用拨号(Sip/..., 60, M(a-macro))。但我不知道如何在宏中加入这两个调用。

任何的想法？

编辑：说清楚。当我只使用 Dial（例如 Dial(SIP/uri) 或 Dial(SIP/uri, 60, r)）时，它会执行以下操作：

1.  来电者：响了
2.  SIP 电话（或软件）响铃
3.  呼叫由 SIP 电话应答
4.  SIP 电话：没有声音。
5.  来电者：它停止响铃，没有声音

当我在 Dial(...) 命令之前添加命令 Playback(invalid) 时，它完全不同：

1.  来电者：响了
2.  来电者：接听电话并读取“无效”消息。
3.  来电者：响铃（但电话已接听，来电者支付此响铃时间）
4.  SIP 电话（或软件）响铃
5.  呼叫由 SIP 电话应答
6.  通话已成功连接

* * *

似乎当且仅当在 Dial(...) 命令之前没有明确应答呼叫（例如通过 Playback(...) 或 Answer()）时才会出现问题。因此，以下内容可能会有所帮助（类似 JQuery 的伪代码）：

```
call_1.Dial(...).onAnswer(function(call_2){
    call_1.Answer();
}); 
```

Asterisk 尝试了类似的东西，但是 Asterisk 的方式是错误的。

当然，在 Dial(...) 之前添加 Answer() 有效，但我不想在重定向呼叫被应答之前接听电话

* * *

我几乎通过使用拨号（SIP/...，超时，A（无效））解决了这个问题。现在，我必须使用另一种（零长度或几乎为零长度）声音。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T10:38:33.867

我无法创建有效的零长度声音，但以下解决方案对我来说似乎已经足够了：

```
exten => s,1,<log it>
exten => s,n,Dial(SIP/address@somewhere.com, 600, A(beeperr))
exten => s,n,GotoIf($["${DIALSTATUS}" = "ANSWER"]?:callfail)
exten => s,n(callfail),<report call fail> 
```

代码中最重要的部分是`Dial(SIP/address@somewhere.com, 600, A(beeperr))`.

现在，它起作用了：

1.  来电者拨打电话。
2.  创建了对 address@somewhere.com 的调用。
3.  呼叫 address@somewhere.com 由用户接听。
4.  向地址@somewhere.com 播放短声（即哔哔声）
5.  原始呼叫被应答和桥接。

在这种情况下，呼叫者听不到蜂鸣器的声音。仅向 address@somewhere.com 播放声音。这会在通过 address@somewhere.com 接听电话和接听原始电话之间产生短暂的停顿。在暂停中，会播放beeperr。

也许 directmedia=no 是解决方案的一部分，但我不确定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T01:41:22.110

是的，正确的方法是拨号。

如果您没有收到任何振铃，则您可以使用星号和 gsm 网关的振铃/早期媒体参数。

但是，如果您使用便宜的 gsm 网关，您将无法向提供商方发送任何内容（gsm 提供商不允许这样做）。要通过 gsm 网络发送早期媒体，您必须通过 e1 线路等数字设备连接到 gsm 提供商。

作为选项，您可以尝试使用 r 选项拨号命令或在拨号前使用振铃命令，但这非常依赖于 gsm 网关设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T18:53:58.457

我的建议是这样的：

1.  打开您的第一个电话，将他们引导到一个动态会议中，播放铃声。将会议号码设置为唯一的 8 位号码。
2.  打开您的第二个通话，并将上述会议号码存储为频道变量。
3.  如果第二个呼叫应答，则读取通道变量，然后将该呼叫挂断到适当的会议中。
4.  如果第二个电话没有接听，则挂断第一个电话。您可以通过轮询 AMI 来确定只有一名参与者的所有会议，检查他们频道的“摘机”时间，如果时间太长，则意味着无应答/无加入。

我在一个类似的客户项目中使用了这种方法，它很容易实现为 Asterisk Dial Plan 和 AGI 的组合。我使用假脱机呼叫文件作为使用适当的通道变量等运行拨号的一种方式。它简单、快速、干净。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T12:52:11.150

好，

在我看来，您的主要问题不是直接与拨号方案相关，而是与网络相关。听不到任何声音的情况通常是由于您的 Asterisk 服务器位于一个位置，而您的客户端和终端位于 NAT 防火墙后面。或者，另一种可能性，您的 Asterisk 服务器位于防火墙后面，其中一方也是如此。在其中任何一个中，如果您的 sip.conf 配置配置不正确，它将无法正常工作。

现在，如果您想尝试一些时髦的东西，请执行以下操作：

```
exten => _XXXX,1,Noop(*** Here we Go ***)
exten => _XXXX,n,Playback(SomeShortFile,noanswer)
exten => _XXXX.n,Dial(Your SIP destination,60,R) 
```

第二行应该将 SIP 180 消息更改为 SIP 183 消息，并且“R”参数应该生成本地铃声，以防远程端没有。

如果这不能解决问题，我建议您将 sip.conf 配置传递到[http://www.pastebin.ca](http://www.pastebin.ca)，并与我们分享链接，以便我们查看。

尼尔小号

# java - compareTo 的参数和隐式类型转换

> ID：14158336
> 
> 赞同：1
> 
> 时间：2013-01-04T13:44:22.527
> 
> 标签：java

```
import java.util.*;

public class Employee
{
    private int empId;
    private String name;
    private int age;
    public Employee(String name, int id, int age )
    {
        this.name = name;
        this.empId = id;
        this.age = age;
    }
    public int getId()
    {
        return empId;
    }
    public int getAge()
    {
        return age;
    }
    public String getName()
    {
        return name;
    }

}

class SortById extends Employee implements Comparable<SortById>
{
    public SortById(String name, int id, int age)
    {
        super(name, id, age);
    }
    public int compareTo(SortById other)
    {
        if (this.getId() > other.getId()) return 1;
        if (this.getId() < other.getId()) return -1;
        return 0;

    }
}

class SortByName extends Employee implements Comparable<SortByName>
{
    public SortByName(String name, int id, int age)
    {
        super(name, id, age);
    }

    public int compareTo(SortByName other)
    {
        if (this.getName().compareTo(other.getName()) > 0) return 1;
        if (this.getName().compareTo(other.getName()) < 0) return -1;
        return 0;

    }
}

class Test
{
    public static void main(String args[])
    {
        Employee[] array = new SortById[3];
        array[0] = new SortById("Gautam", 1222, 20);
        array[1] = new SortById("Shivam", 1221, 20);
        array[2] = new SortById("Ankit", 1223, 21);
        System.out.println(array[0] instanceof SortByName);

        Arrays.sort(array);
        for (int i = 0; i < array.length; i++)
            System.out.println("ID: " + array[i].getId() + " Name: " + array[i].getName() + " Age: " + array[i].getAge());
        Employee[] array2 = new SortByName[3];
        array2[0] = new SortByName("Gautam", 1222, 20);
        array2[1] = new SortByName("Shivam", 1221, 20);
        array2[2] = new SortByName("Ankit", 1223, 21);
        Arrays.sort(array2);
        for (int i = 0; i < array2.length; i++)
            System.out.println("ID: " + array2[i].getId() + " Name: " + array2[i].getName() + " Age: " + array2[i].getAge());

    }
} 
```

该程序运行良好，我只是想问一下，由于我使用的是参数化版本`Comparable`，我应该将引用传递给`compareTo`类型`SortById`还是`SortByName`类型？

即使引用是 type `Employee`，代码也可以正常运行，尽管指向它的子类（`SortByName`或`SortById`）。

隐式演员表是如何发生的？我读过是不可能的，即不可能将超类类型隐式转换为子类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T14:01:50.113

你从不打电话`compareTo`，这解释了为什么你不需要演员表。实际调用在`Arrays.sort`其中处理它（通过实际使用 raw `Comparable`）

此外，在这种情况下，编译器将生成 2`compareTo`种方法：您使用参数显式定义的方法，以及使用委托给第一个参数的参数`SortByXX`的另一种方法。`Object`

正如@martijno 所说，如果您在数组中添加一个简单的，您将遇到问题`Employee`，这将导致`ClassCastException`（从`Employee`到任一`Comparable`或`SortByXX`）。如果你混合`SortByName`和也会发生同样的情况`SortById`。

# spring-data - 不使用注解自定义序列化策略spring-data-mongodb

> ID：14158337
> 
> 赞同：1
> 
> 时间：2013-01-04T13:44:22.767
> 
> 标签：spring-data, spring-data-mongodb

我想自定义/配置 spring-data-mongodb（版本 1.1.1.RELEASE）的序列化策略*而不*使用注释（如@Id、@Document、@Field），因为我无权访问域类。

这可能吗？如果是，那么最有效的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T19:13:01.067

据我所知，为了自定义类序列化，您唯一能做的就是为[参考中描述的每个类定义自定义转换器](http://static.springsource.org/spring-data/data-mongodb/docs/1.0.0.RELEASE/reference/html/#mongo.custom-converters)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-13T12:01:29.627

请记住，每个域类都有一个 Read- 和一个 WriteConverter。缺少 WriteConverter 可能会导致 MongoDB 中出现您的自定义 ReadConverter 无法读取的意外内容。

ReadConverter 应该用 注释，`@ReadingConverter`WriteConverter 应该用 注释`@WritingConverter`。

# objective-c - 我应该在自定义设置器中使用 will/didSetValueForKey 吗？

> ID：14158338
> 
> 赞同：3
> 
> 时间：2013-01-04T13:44:23.297
> 
> 标签：objective-c, ios, ios6, key-value-observing

> **可能重复：**
> [针对单个 KVC 更改接收 2 个 KVO 通知](https://stackoverflow.com/questions/4451861/receiving-2-kvo-notifications-for-a-single-kvc-change)

我对应该在哪里使用[`willChangeValueForKey:`和`didChangeValueForKey:`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSKeyValueObserving_Protocol/Reference/Reference.html).

我有一个需要自定义设置方法的属性的对象。根据[Apple 文档](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/KeyValueObserving/Articles/KVOCompliance.html#//apple_ref/doc/uid/20002178-BAJEAIEE)，我正在使用`will/didChangeValueForKey:`：

> 要实现手动观察者通知，您在更改值之前调用 willChangeValueForKey: ，并在更改值之后调用 didChangeValueForKey: 。清单 3 中的示例实现了 openingBalance 属性的手动通知。
> 
> **清单 3** 实现手动通知的示例访问器方法
> 
> ```
> - (void)setOpeningBalance:(double)theBalance {
>     [self willChangeValueForKey:@"openingBalance"];
>     _openingBalance = theBalance;
>     [self didChangeValueForKey:@"openingBalance"];
> } 
> ```

这使我的对象如下所示：

```
@interface cObject
@property (readwrite, nonatomic) BOOL Property;
@end

@implementation cObject
- (void)setProperty:(BOOL)Property
{
   [self willChangeValueForKey:@"Property"];
   _Property = Property;
   [self didChangeValueForKey:@"Property"];
   //Do some other stuff
}
@end 
```

`Property`我困惑的根源是，如果我在 的实例上设置另一个对象来观察`cObject`然后调用`[myObject setProperty:]`，我的观察者的回调函数会被命中**两次**。查看堆栈：第一次命中是我调用的结果`didChangeValueForKey:`，第二次命中是我调用的直接结果`setProperty:`（即我的自定义设置器没有出现在堆栈中）。

更令人困惑的是，如果我在 的其他地方更改`_Property`另一个函数`cObject`，我的观察者将**不会**收到通知（当然，除非我使用`did/willChangeValueForKey:`！）。

**编辑：**即使`_Property`我的自定义设置器没有更改，KVO 也会通知我的观察者它已更改。由此，我得出结论，KVO 被调用只是因为我调用了 setter，无论是否有任何变化......

谁能解释我的情况与文档中解释的情况有何不同？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T14:23:27.880

从文档。如果你想要手动，你必须覆盖它：

> 手动更改通知
> 
> 手动更改通知可以更精细地控制通知发送给观察者的方式和时间。这有助于最大程度地减少不必要的触发通知，或将多个更改分组到单个通知中。
> 
> 实现手动通知的类必须覆盖自动通知ObserversForKey: 的NSObject 实现。可以在同一类中同时使用自动和手动观察者通知。对于执行手动通知的属性，automaticNotifiesObserversForKey: 的子类实现应该返回 NO。子类实现应该为任何无法识别的键调用 super。清单 2 中的示例启用了 openingBalance 属性的手动通知，允许超类确定所有其他键的通知。

# visual-studio-2010 - 无法打开文件“opencv_calib3d243.dll”

> ID：14158339
> 
> 赞同：0
> 
> 时间：2013-01-04T13:44:24.897
> 
> 标签：visual-studio-2010, opencv

我正在尝试在 VS 2010 和 openCV 2.4.3 中运行 cpp 程序，在设置所有必要的内容后出现以下错误：1>LINK：致命错误 LNK1104：无法打开文件“opencv_calib3d243.dll”

希望可以有人帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T14:25:14.913

将OpenCV的bin文件地址添加到你系统的环境设置路径...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T14:52:25.217

另一种选择是将dll复制到运行应用程序的目录中，并在vs2010内部将项目中的工作目录设置为此路径。

# android - 如何通过多部分发布将图像从 Android 应用程序上传到带有 IceFaces 网络应用程序的 Jboss Seam？

> ID：14158341
> 
> 赞同：0
> 
> 时间：2013-01-04T13:44:31.987
> 
> 标签：android, upload, seam, icefaces, multipart

我们需要通过 HTTP POST 将图像从我们的 android 应用程序上传到我们的 web 应用程序。Android 方面有大量示例......但我似乎无法为带有 Icefaces 的 Jboss Seam 找到一个简单和/或有效的示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T13:50:22.517

我使用 Apache httpmime.jar 它提供了一个 MultipartEntity 允许你给它一个文件来上传。该 api 非常严格。

见[http://hc.apache.org/user-docs.html](http://hc.apache.org/user-docs.html)

# html - 为什么 shtml.exe 出现在 url

> ID：14158344
> 
> 赞同：1
> 
> 时间：2013-01-04T13:44:40.233
> 
> 标签：html, shtml

我在我的 localhost URL 中找到了 shtml.exe。Url 是：localhost/germain/_vti_bin/shtml.exe/reservations.htm。

当我输入此网址时，页面显示 403 错误。

![在此处输入图像描述](../Images/169057d79a08f2374d9fd408336d32e6.png)

但在现场网站的情况下它工作正常。看这个链接：[http ://www.germainesluau.com/_vti_bin/shtml.exe/reservations.htm](http://www.germainesluau.com/_vti_bin/shtml.exe/reservations.htm)

htaccess中是否有任何设置需要更改？

请给我一个建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T13:57:39.130

实时服务器安装了 FrontPage 扩展。

```
# curl -I http://www.germainesluau.com/_vti_bin/shtml.exe/reservations.htm
HTTP/1.1 200 OK
Date: Fri, 04 Jan 2013 08:57:04 GMT
Server: Apache/2.2.22 (Unix) FrontPage/5.0.2.2635
Content-Length: 18680
Content-Type: text/html; charset=windows-1252 
```

您的本地系统大概没有。看起来你可以从[这里](https://code.google.com/p/fp-ext-ubuntu/)得到它们。

就个人而言，我会重写网站以避免它们。如今，它们不是服务器端逻辑的常用工具。（我不记得看到其他人使用这个世纪）。

# c++ - std::vector 类型引用的无效初始化

> ID：14158348
> 
> 赞同：4
> 
> 时间：2013-01-04T13:44:45.780
> 
> 标签：c++, pointers, interface, polymorphism

这是错误：

> DummyService.hpp:35：错误：'virtual std::vector < ResourceBean*, std::allocator < ResourceBean*> >& DummyService::list(const std::string&)' 的协变返回类型无效

```
class Bean {
public:
    typedef std::string Path;
    virtual ~Bean() {};
    virtual const Path& getPath() = 0;
    virtual const std::string& getName() = 0;
protected:
    Bean();
};

class ResourceBean: public Bean {
public:
    ResourceBean(const Path& path, const std::string& contents) :
            _path(path), _contents(contents) {
    }
    virtual ~ResourceBean() { }
    virtual const Path& getPath();
    virtual void setPath(const Path& path);
    virtual const std::string& getName();
    virtual void setName(const std::string& name);
private:
    Path _path;
    std::string _name;
}; 
```

上述`Bean`类是数据表示，它们被两个不同的层使用。一层使用`Bean`接口，只是为了访问数据的getter。由`ResourceBean`数据访问对象 (DAO) 类访问，这些类从数据库中获取数据（例如），并填写`ResourceBean`.

DAO 的一项职责是列出给定路径的资源：

```
class Service {
protected:
    /*
     * Service object must not be instantiated (derived classes must be instantiated instead). Service is an interface for the generic Service.
     */
    Service();

public:
    virtual std::vector<Bean*>& list(const Bean::Path& path) = 0;
    virtual ~Service();
};

class DummyService: public Service {
public:
    DummyService();
    ~DummyService();

    virtual std::vector<ResourceBean*>& list(const ResourceBean::Path& path);
}; 
```

我认为这个问题与`std::vector<ResourceBean*>`编译器不理解`Bean`实际上是`ResourceBean`.

有什么建议么？我已经阅读了一些类似的主题，但有些解决方案在我的情况下不起作用。请指出我是否遗漏了什么。先感谢您。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T13:48:54.213

`std::vector<Bean*>`并且`std::vector<ResourceBean*>`是两种完全不同的类型，不能相互转换。您根本无法在 C++ 中做到这一点，而应该坚持使用指向基类的指针向量。此外，正因为如此，拥有该函数`virtual`并没有像您认为的那样做 - 不同的返回类型使其成为不同的方法签名，因此您无需重载方法，而是引入了一个新的虚拟方法。此外，没有必要为抽象类 ( `Service`) 保护构造函数，因为无论如何您都无法创建抽象类的实例。我会这样写：

```
#include <string>
#include <vector>
#include <iostream>

class Bean {
  public:
    typedef std::string Path;

    Bean() {}
    virtual ~Bean() {}

    virtual void say() const
    {
        std::cout << "I am a bean!\n";
    }
};

class ResourceBean : public Bean {
  public:
    ResourceBean() {}
    virtual ~ResourceBean() {}

    virtual void say() const
    {
        std::cout << "I am a resource bean!\n";
    }
};

class Service {
public:
    Service() {}
    virtual ~Service() {}

    virtual std::vector<Bean*>& list(const Bean::Path &path) = 0;
};

class DummyService: public Service {
  public:
    DummyService()
    {
        for (int i = 0; i < 5; ++i)
            beans_.push_back(new ResourceBean());
    }

    virtual ~DummyService() {}

    virtual std::vector<Bean *>& list(const Bean::Path &path)
    {
        return beans_;
    }

  private:
    std::vector<Bean*> beans_;
};

int main()
{
    DummyService s;
    std::vector<Bean *>& l = s.list("some path");
    for (std::vector<Bean *>::iterator it = l.begin(), eit = l.end();
         it != eit; ++it)
    {
        Bean *bean = *it;
        bean->say();
    }
} 
```

# couchdb - 来自 CouchDB 的修订信息

> ID：14158351
> 
> 赞同：0
> 
> 时间：2013-01-04T13:44:55.777
> 
> 标签：couchdb

如果我在 CouchDB 上有一个包含多个修订的文档，我可以要求一个修订列表，如下所示：

```
localhost:5984/documents/document_guid?revs_info=true

{
    _id: document_guid,
    _rev: "2-rev_guid_B",
    _revs_info: [ {rev: "2-rev_guid_B", status: "available"}, {rev: "1-rev_guid_A", status: "available"} ],
    etc: "stuff"
} 
```

我可以通过以下请求请求先前的修订：

```
localhost:5984/documents/document_guid?rev=1-rev_guid_A

{
    _id: document_guid,
    _rev: "1-rev_guid_A",
    etc: "stuff in a previous life"
} 
```

我期待能够同时做到这两个，但它似乎不起作用！

```
localhost:5984/documents/document_guid?rev=1-rev_guid_A&revs_info=true

// I wanted

{
    _id: document_guid,
    _rev: "1-rev_guid_A",
    _revs_info: [ {rev: "2-rev_guid_B", status: "available"}, {rev: "1-rev_guid_A", status: "available"} ],
    etc: "stuff in a previous life"
}

// I get

{
    _id: document_guid,
    _rev: "1-rev_guid_A",
    etc: "stuff in a previous life"
} 
```

有谁知道我想要的是否可行，如果可以，我该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T17:33:22.490

在 CouchDB 中，尝试将其“修订”用于修订系统被认为是最常见的错误之一。

计划将“Revisions”重命名为“mvcc”以防止出现此错误。它们确实应该仅由复制器使用并检测并发更新。

如果您需要*真正的*修订，则必须实施它们。

# c# - StrongNameSignatureVerification 访问冲突

> ID：14158353
> 
> 赞同：0
> 
> 时间：2013-01-04T13:44:57.807
> 
> 标签：c#, .net, pinvoke, access-violation, strongname

我有一个 .NET 可执行程序集，它通过 P/invoke 引用非托管 C++ dll。在对 .net 程序集进行强名称签名后，我在访问非托管 dll 时在某些随机点遇到访问冲突。然后我在没有签名的情况下重新编译了程序集，仍然得到同样的错误。通过 DebugDiag 运行它我从崩溃报告中得到以下信息

```
second_Chance_Exception_C0000005.dmp the assembly instruction at 0x00963c37 which does not correspond to any known native module in the process has caused an access violation exception (0xC0000005) when trying to read from memory location 0x0000000c on thread 10

Thread 10 - Entry point   clr!StrongNameSignatureVerification+16491
Create time   4/1/2013 12:10:32 ìì
Time spent in user mode   0 Days 0:0:2.515
Time spent in kernel mode     0 Days 0:0:0.125

73  0x79206dc9  0x00000000  clr!StrongNameErrorInfo+966b    0x00000000
74  0x792084c5  0x0477ffb4  clr!StrongNameErrorInfo+ad67    clr!StrongNameErrorInfo+941c
75  0x792f76e0  0x0477ffec  clr!StrongNameSignatureVerification+164d9   0x00000000 
```

这让我认为它仍在查找验证。我不明白这是怎么发生的

另一方面，强命名程序集可以引用未管理的 dll 吗？

# c++ - C++ Graph DFS 循环检查

> ID：14158356
> 
> 赞同：0
> 
> 时间：2013-01-04T13:45:08.193
> 
> 标签：c++

我为直接图编写了 DFS 方法并检查是否存在循环。我的大部分代码都来自我的课堂笔记和教科书。问题是它说存在循环时没有循环。我做了一些更改，但代码甚至没有运行。我会很感激你的帮助。这是我检查周期的代码

```
char check;
char vertex;
int exit=0;
cout<<"Checking to see if there is a DFS cycle";
j=0;
for(i=0;i<columns;i++)
{
  vertex=matrix[i][j];
  j++;
  if(matrix[i][j]!='0')
  {
    check=matrix[i][j];
    j=0;
    i=0;
    int count=1;
    while(exit<rows)
    {
      if(check==matrix[i][j])
        j++;
      else 
        i++;
      if(vertex==matrix[i][j]&&count>1)
      {
        cout<<"This graph has a DFS cycle!";
        break;
      }
      if(vertex!=matrix[i][j]&&check!=matrix[i][j]) 
      {
        check=matrix[i][j];
        j=0;
        i=0;
        cout << "This graph has no DFS cycle!";
        break;
      }
      exit++;
    }
    j=0;  

  }
  else
    j=0;
  }
  system("PAUSE");
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-04T13:57:53.177

您可以将此代码作为参考，尽管它是用 Java 实现的。您可以根据需要采用算法。

```
public Cycle(Graph G) {
    if (hasSelfLoop(G)) return;
    if (hasParallelEdges(G)) return;
    marked = new boolean[G.V()];
    edgeTo = new int[G.V()];
    for (int v = 0; v < G.V(); v++)
        if (!marked[v])
            dfs(G, -1, v);
}

// does this graph have a self loop?
// side effect: initialize cycle to be self loop
private boolean hasSelfLoop(Graph G) {
    for (int v = 0; v < G.V(); v++) {
        for (int w : G.adj(v)) {
            if (v == w) {
                cycle = new Stack<Integer>();
                cycle.push(v);
                cycle.push(v);
                return true;
            }
        }
    }
    return false;
}

// does this graph have two parallel edges?
// side effect: initialize cycle to be two parallel edges
private boolean hasParallelEdges(Graph G) {
    marked = new boolean[G.V()];

    for (int v = 0; v < G.V(); v++) {

        // check for parallel edges incident to v
        for (int w : G.adj(v)) {
            if (marked[w]) {
                cycle = new Stack<Integer>();
                cycle.push(v);
                cycle.push(w);
                cycle.push(v);
                return true;
            }
            marked[w] = true;
        }

        // reset so marked[v] = false for all v
        for (int w : G.adj(v)) {
            marked[w] = false;
        }
    }
    return false;
}
 private void dfs(Graph G, int u, int v) {
    marked[v] = true;
    for (int w : G.adj(v)) {

        // short circuit if cycle already found
        if (cycle != null) return;

        if (!marked[w]) {
            edgeTo[w] = v;
            dfs(G, v, w);
        }

        // check for cycle (but disregard reverse of edge leading to v)
        else if (w != u) {
            cycle = new Stack<Integer>();
            for (int x = v; x != w; x = edgeTo[x]) {
                cycle.push(x);
            }
            cycle.push(w);
            cycle.push(v);
        }
    }
} 
```

# php - foreach 输出两个数组先跳过

> ID：14158361
> 
> 赞同：1
> 
> 时间：2013-01-04T13:45:23.043
> 
> 标签：php, arrays, foreach

> **可能重复：**
> [如何在 foreach 循环中跳过元素](https://stackoverflow.com/questions/9387193/how-to-skip-elements-in-foreach-loop)

我有以下foreach：

```
foreach($documents as $document): 
    print_r($document);
endforeach; 
```

输出以下内容：

```
Array
(
    [num] => 2
)
Array
(
    [0] => Array
        (
            [name] => Batman
            [url] => http://batman.com
        )

    [1] => Array
        (
            [name] => Superman
            [url] => http://superman.com
        )

) 
```

第一个包含 [num] => 2 的数组，我不想在打印结果时在我的 foreach 中使用。

但是我如何摆脱那个数组，这样当我使用 write print_r($document) 时它就不会被打印出来？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T13:47:05.453

使用带有递增索引说明符的[标准`for`循环](http://php.net/manual/en/control-structures.for.php)并跳过第一个元素。

```
for($i = 1; $i < count($documents); $i++) {
  print_r($documents[i]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T13:58:21.910

与您保持一致，`foreach`您可以使用[`continue`](http://php.net/manual/en/control-structures.continue.php)：

```
$first = true;

foreach($documents as $document) {
    if($first) {
        $first = false;
        continue;
    }

    print_r($document);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T13:48:40.823

最简单的方法是完全删除第一个数组，但我猜你不能这样做。不用担心 - 这应该让你涵盖：

```
for( $i = 1; $i < count($documents); $i++ ):
   print_r($documents[$i]);
endfor; 
```

编辑：我[在 Codepad.org 上为您创建了一个测试用例](http://codepad.org/npfA57Sm)。

# algorithm - 自然显示计算答案的算法是什么

> ID：14158366
> 
> 赞同：-1
> 
> 时间：2013-01-04T13:45:41.343
> 
> 标签：algorithm

我准备在我的电脑上写一个计算器程序。据我所知，一些计算器允许输入方程式和答案，其中分数和积分等内容的显示方式与通常的书写方式相同。

例如。如果我输入`√2`，它将显示`√2`而不是`1.41421...`。如果我输入类似`3*sqrt(3)/2+sqrt(2)/3`的内容，答案将显示类似的内容`(9*√3+2√2)/6`。我想知道什么是自然显示的算法以及如何编码。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T14:11:02.370

`√2`唯一可能的方法是通过始终保持as来执行所有计算`√2`。您还必须向`√2^2`具有更用户友好表示的程序介绍知识，`2`即可用于其他计算。**当你完成计算时，你**如何以结果看起来像这样的方式执行计算（在一张纸上）？你将不得不教计算机做同样的事情。

如果您期望为此使用现成的经典算法，我将不得不让您失望 - 没有。

# passwords - 需要自定义密码生成器帮助

> ID：14158367
> 
> 赞同：-1
> 
> 时间：2013-01-04T13:45:42.230
> 
> 标签：passwords, brute-force

我有一个前段时间使用[cryptainer](http://www.cypherix.com/cryptainerle/)创建的重要加密文件，但忘记了密码。我知道我使用了哪些单词和数字，但不确定它们的输入顺序，例如：

> [我的出生年份][我女朋友的名字][我知道的十位数字][我的电话号码][我的门牌号码][我女儿的名字][我女儿的出生日期]

显然这是一个非常复杂的密码，但想知道是否有任何程序可以通过以所有可能的方式交换它们来为我列出一个列表，但不一定总是使用所有这些，因为它可能没有我的门牌号码在我的密码中, 可能只是

> [我知道的十位数][我的电话号码][我女朋友的名字]

依此类推，所以我的密码长度可能在 6 到 50 个字符之间。

我知道我忘记它是愚蠢的，但是当一些新鲜事物出现在你的脑海中时，它似乎很容易记住，但我已经有一段时间没有使用它了。

我得到了一个网站链接，该链接显示了一种可以用伪代码完成的方法，但就像我说的那样，我不是程序员，也不知道从哪里开始。

这是给我的链接[http://permute.tchs.info/](http://permute.tchs.info/)

我真的对网络上的某些密码破解者以及如何使用我自己的数字和单词集感到困惑。任何人都知道任何程序可以仅使用我的数字和单词集生成所有可能的密码，因为我真的很感激。

因为这会生成一个很长的所有可能密码列表，所以最好有一个程序用我的 cryptainter 文件检查它们，但我不确定是否有这样的程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T14:26:15.237

您可以使用[Hananel Hazan 网站上](http://hananel.hazan.org.il/2011/09/brute-force-truecrypt-password/)的此 AutoITscript 实现， 您可以对其进行修改以满足您的条款。

* * *

```
dim $one, $two, $three, $four, $five, $six, $seven, $eight, $pw, $pp, $count, $truecryptPath, $containerPath
$truecryptPath = “C:\PROGRA~1\TrueCrypt\TrueCrypt.exe /q background /s “
$containerPath = “d:\cscs2.tre”
dim $numberOfCharacters = 92
dim $Array[$numberOfCharacters+1]
$Array[0]=”a”
$Array[1]=”b”
$Array[2]=”c”
$Array[3]=”d”
$Array[4]=”e”
$Array[5]=”f”
$Array[6]=”g”
$Array[7]=”h”
$Array[8]=”i”
$Array[9]=”j”
$Array[10]=”k”
$Array[11]=”l”
$Array[12]=”m”
$Array[13]=”n”
$Array[14]=”o”
$Array[15]=”p”
$Array[16]=”q”
$Array[17]=”r”
$Array[18]=”s”
$Array[19]=”t”
$Array[20]=”u”
$Array[21]=”v”
$Array[22]=”w”
$Array[23]=”x”
$Array[24]=”y”
$Array[25]=”z”
$Array[26]=”A”
$Array[27]=”B”
$Array[28]=”C”
$Array[29]=”D”
$Array[30]=”E”
$Array[31]=”F”
$Array[32]=”G”
$Array[33]=”H”
$Array[34]=”I”
$Array[35]=”J”
$Array[36]=”K”
$Array[37]=”L”
$Array[38]=”M”
$Array[39]=”N”
$Array[40]=”O”
$Array[41]=”P”
$Array[42]=”Q”
$Array[43]=”R”
$Array[44]=”S”
$Array[45]=”T”
$Array[46]=”U”
$Array[47]=”V”
$Array[48]=”W”
$Array[49]=”X”
$Array[50]=”Y”
$Array[51]=”Z”
$Array[52]=”!”
$Array[53]=”@”
$Array[54]=”#”
$Array[55]=”$”
$Array[56]=”%”
$Array[57]=”^”
$Array[58]=”&amp;”
$Array[59]=”*”
$Array[60]=”(“
$Array[61]=”)”
$Array[62]=”_”
$Array[63]=”+”
$Array[64]=”~”
$Array[65]=”`”
$Array[66]=”1″
$Array[67]=”2″
$Array[68]=”3″
$Array[69]=”4″
$Array[70]=”5″
$Array[71]=”6″
$Array[72]=”7″
$Array[73]=”8″
$Array[74]=”9″
$Array[75]=”0″
$Array[76]=”-”
$Array[77]=”=”
$Array[78]=”["
$Array[79]=”]”
$Array[80]=”\”
$Array[81]=”{“
$Array[82]=”}”
$Array[83]=”|”
$Array[84]=”;”
$Array[85]=”:”
$Array[86]=”‘”
$Array[87]=”"”"
$Array[88]=”,”
$Array[89]=”.”
$Array[90]=”/”
$Array[91]=”?”

$count = 0
for $two = 0 to $numberOfCharacters
for $one = 0 to $numberOfCharacters
$pw = $Array[$one]
$pw &= $Array[$two]
$count = $count+1
$pp  = Run(@COMSPEC & ” /c ” & $truecryptPath & ” /p “&amp; $pw & ” /e /m ro /m rm /v ” &$containerPath )
ProcessSetPriority($pp, 0)

if $count>25 then
While ProcessExists($pp)>0
Wend
EndIf

Next
Next

While ProcessExists($pp)>0
Wend

$count = 0
for $three = 0 to $numberOfCharacters
for $two = 0 to $numberOfCharacters
for $one = 0 to $numberOfCharacters
$pw = $Array[$one]
$pw &= $Array[$two]
$pw &= $Array[$three]
$count = $count+1
$pp  = Run(@COMSPEC & ” /c ” & $truecryptPath & ” /p “&amp; $pw & ” /e /m ro /m rm /v ” &$containerPath )
ProcessSetPriority($pp, 0)

if $count>25 then
While ProcessExists($pp)>0
$count = 0
Wend
EndIf

Next
Next
Next

While ProcessExists($pp)>0
Wend

$count = 0
for $four = 0 to $numberOfCharacters
for $three = 0 to $numberOfCharacters
for $two = 0 to $numberOfCharacters
for $one = 0 to $numberOfCharacters
$pw = $Array[$one]
$pw &= $Array[$two]
$pw &= $Array[$three]
$pw &= $Array[$four]
$count = $count+1
$pp  = Run(@COMSPEC & ” /c ” & $truecryptPath & ” /p “&amp; $pw & ” /e /m ro /m rm /v ” &$containerPath )
ProcessSetPriority($pp, 0)

if $count>25 then
While ProcessExists($pp)>0
$count = 0
Wend
EndIf

Next
Next
Next
Next

While ProcessExists($pp)>0
Wend

$count = 0
for $five = 0 to $numberOfCharacters
for $four = 0 to $numberOfCharacters
for $three = 0 to $numberOfCharacters
for $two = 0 to $numberOfCharacters
for $one = 0 to $numberOfCharacters
$pw = $Array[$one]
$pw &= $Array[$two]
$pw &= $Array[$three]
$pw &= $Array[$four]
$pw &= $Array[$five]
$count = $count+1
$pp  = Run(@COMSPEC & ” /c ” & $truecryptPath & ” /p “&amp; $pw & ” /e /m ro /m rm /v ” &$containerPath )
ProcessSetPriority($pp, 0)

if $count>25 then
While ProcessExists($pp)>0
Wend
$count = 0
EndIf

Next
Next
Next
Next
Next

While ProcessExists($pp)>0
Wend

$count = 0
FOR $six = 0 to $numberOfCharacters
for $five = 0 to $numberOfCharacters
for $four = 0 to $numberOfCharacters
for $three = 0 to $numberOfCharacters
for $two = 0 to $numberOfCharacters
for $one = 0 to $numberOfCharacters
$pw = $Array[$one]
$pw &= $Array[$two]
$pw &= $Array[$three]
$pw &= $Array[$four]
$pw &= $Array[$five]
$pw &= $Array[$six]
$count = $count+1
$pp  = Run(@COMSPEC & ” /c ” & $truecryptPath & ” /p “&amp; $pw & ” /e /m ro /m rm /v ” &$containerPath )
ProcessSetPriority($pp, 0)

if $count>25 then
While ProcessExists($pp)>0
Wend
$count = 0
EndIf

Next
Next
Next
Next
Next
Next

While ProcessExists($pp)>0
Wend

$count = 0
for $seven = 0 to $numberOfCharacters
FOR $six = 0 to $numberOfCharacters
for $five = 0 to $numberOfCharacters
for $four = 0 to $numberOfCharacters
for $three = 0 to $numberOfCharacters
for $two = 0 to $numberOfCharacters
for $one = 0 to $numberOfCharacters
$pw = $Array[$one]
$pw &= $Array[$two]
$pw &= $Array[$three]
$pw &= $Array[$four]
$pw &= $Array[$five]
$pw &= $Array[$six]
$pw &= $Array[$seven]
$count = $count+1
$pp  = Run(@COMSPEC & ” /c ” & $truecryptPath & ” /p “&amp; $pw & ” /e /m ro /m rm /v ” &$containerPath )
ProcessSetPriority($pp, 0)

if $count>25 then
While ProcessExists($pp)>0
Wend
$count = 0
EndIf

Next
Next
Next
Next
Next
Next
Next

While ProcessExists($pp)>0
Wend

for $eight = 0 to $numberOfCharacters
for $seven = 0 to $numberOfCharacters
FOR $six = 0 to $numberOfCharacters
for $five = 0 to $numberOfCharacters
for $four = 0 to $numberOfCharacters
for $three = 0 to $numberOfCharacters
for $two = 0 to $numberOfCharacters
for $one = 0 to $numberOfCharacters
$pw = $Array[$one]
$pw &= $Array[$two]
$pw &= $Array[$three]
$pw &= $Array[$four]
$pw &= $Array[$five]
$pw &= $Array[$six]
$pw &= $Array[$seven]
$pw &= $Array[$eight]
$count = $count+1
$pp  = Run(@COMSPEC & ” /c ” & $truecryptPath & ” /p “&amp; $pw & ” /e /m ro /m rm /v ” &$containerPath )
ProcessSetPriority($pp, 0)

if $count>25 then
While ProcessExists($pp)>0
Wend
$count = 0
EndIf

Next
Next
Next
Next
Next
Next
Next
Next 
```

# delphi - Delphi Generics TDictionary 导致 [DCC 致命错误] F2084 内部错误：L1737 消息

> ID：14158368
> 
> 赞同：0
> 
> 时间：2013-01-04T13:45:44.260
> 
> 标签：delphi, generics, delphi-2010

我刚刚发现了泛型（我知道很惊讶！）并立即爱上了它......直到我发现`[DCC Fatal Error] F2084 Internal Error: L1737`如果我有这个代码，Delphi 2010（安装了更新 4 和 5）会失败并显示可怕的消息：

```
// Global array of list
IDsList : Array [1..5] Of TDictionary<Int64, Int64>;

function MyProc;
var
   i : Integer;
   Enum : TDictionary<Int64, Int64>.TPairEnumerator;
begin
     // ...
     Enum := IDsList[i].GetEnumerator;
     while Enum.MoveNext do
     begin
          // ...
     end;
end; 
```

准确地说，除非我评论这一行，否则 Delphi 无法编译`Enum := IDsList[i].GetEnumerator;`

使用数组大大简化了我的代码，有没有办法避免这个 L1737 错误消息？

PS。我对 Delphi 并不陌生，只有泛型！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T13:59:08.383

一旦修复了声明中的错误，该代码就会在我的 Delphi 2010 上编译`MyProc`。实际代码中可能还有其他东西会导致内部错误。

无论如何，在`for/in`这里使用循环更有意义：

```
var
  Pair: TPair<Int64, Int64>;
....
for Pair in IDsList[i] do
  DoSomething(Pair); 
```

也许如果你这样做了，你会逃避内部错误。

如果切换到`for/in`没有回避内部错误，那么您需要提供一个完整的程序来显示故障。尝试将其切成尽可能小的尺寸。在提出问题、提交错误报告等时，这始终是一种很好的做法。

以我的经验，如果你想做任何严肃的泛型编程，而不被淹没在大量的内部错误中，你需要超越 Delphi 2010。

# vba - 试图将数据从一张纸写入另一张纸

> ID：14158375
> 
> 赞同：0
> 
> 时间：2013-01-04T13:46:22.183
> 
> 标签：vba, excel, excel-2010

我有这个代码。我想让它迭代，直到临时表上没有更多数据。

我有一个临时工作簿，其中包含一年的信息，我想在一周的数据中写入多个 Excel 文件。我正在尝试做的是从临时工作簿“WorkingJan4newexperemental”复制到活动工作簿（由于我正在写入多个工作簿，该工作簿会发生变化），但活动工作簿中的工作表将始终为“数据”。我将复制范围“B6:I677”。复制后，我希望从临时工作簿中删除范围“B6：I677”，以便我可以打开另一个工作簿并再次运行宏。目前我有。

```
Sub CutPasteSaveRepeat()
'
' CutPasteSaveRepeat Macro
'

'
    Windows("WorkingJan4newexperemental.xlsm").Activate
    Range("B6:I677").Select
    Range("I677").Activate
    Application.CutCopyMode = False
    Selection.Copy
    Windows("2013W29.xlsm").Activate
    Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
        :=False, Transpose:=False
    Application.CutCopyMode = False
    ActiveWorkbook.Save
    ActiveWorkbook.SaveAs Filename:= _
        "\\Webserver\umc\091_AU20100226\210_Comments\Electricity\Capital Hall\Zip\2013W30.xlsm" _
        , FileFormat:=xlOpenXMLWorkbookMacroEnabled, CreateBackup:=False
    Windows("WorkingJan4newexperemental.xlsm").Activate
    Selection.Delete Shift:=xlUp
    Selection.Copy
    Windows("2013W30.xlsm").Activate
    Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
        :=False, Transpose:=False
    Application.CutCopyMode = False
    ActiveWorkbook.Save
    ActiveWorkbook.SaveAs Filename:= _
        "\\Webserver\umc\091_AU20100226\210_Comments\Electricity\Capital Hall\Zip\2013W31.xlsm" _
        , FileFormat:=xlOpenXMLWorkbookMacroEnabled, CreateBackup:=False
    Windows("WorkingJan4newexperemental.xlsm").Activate
    Selection.Delete Shift:=xlUp
    Selection.Copy
    Windows("2013W31.xlsm").Activate
    Application.CutCopyMode = False
      ActiveWorkbook.Save
    ActiveWorkbook.SaveAs Filename:= _
        "\\Webserver\umc\091_AU20100226\210_Comments\Electricity\Capital Hall\Zip\2013W32.xlsm" _
        , FileFormat:=xlOpenXMLWorkbookMacroEnabled, CreateBackup:=False
    Windows("WorkingJan4newexperemental.xlsm").Activate
    Selection.Copy
    Windows("2013W32.xlsm").Activate
    Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
        :=False, Transpose:=False
    Application.CutCopyMode = False
    ActiveWorkbook.Save
    Windows("WorkingJan4newexperemental.xlsm").Activate
    Selection.Delete Shift:=xlUp
    Windows("2013W33.xlsm").Activate
      ActiveWorkbook.Save
    ActiveWorkbook.SaveAs Filename:= _
        "\\Webserver\umc\091_AU20100226\210_Comments\Electricity\Capital Hall\Zip\2013W33.xlsm" _
        , FileFormat:=xlOpenXMLWorkbookMacroEnabled, CreateBackup:=False
    Windows("WorkingJan4newexperemental.xlsm").Activate
    Selection.Copy
    Windows("2013W34.xlsm").Activate
    Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
        :=False, Transpose:=False
    Application.CutCopyMode = False
    ActiveWorkbook.Save
End Sub 
```

![在此处输入图像描述](../Images/1a4066f847b80b4c65e28754fb0f804b.png) ![在此处输入图像描述](../Images/7346e50223f819ddc3c64244fe470ad2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T21:13:20.410

听起来你想做的是：

1.  从工作簿复制范围
2.  将该范围粘贴到另一个工作簿
3.  删除原始范围并将其下方的所有单元格向上移动
4.  继续这样做，直到您复制了原始工作表中的所有数据

这是一个可以帮助您入门的子：

```
Sub copypasteiterate()

        Dim expBook As Workbook, thisBook As Workbook
        Dim counter As Integer
        Dim sheetend As Boolean

        Set thisBook = ActiveWorkbook

        counter = 1
        Do While sheetend = False

            If Range("A1").Value = "" Then sheetend = True

            'Open a new book and copy and paste the range into it

            Set expBook = Workbooks.Add
            thisBook.ActiveSheet.Range("A1:B2").Copy
            expBook.ActiveSheet.Paste

            'Save under some name which includes the counter

            expBook.SaveAs Filename:="C:\test\data" & counter & ".xlsx"
            counter = counter + 1

            'Delete the original range and shift up

            ThisWorkbook.Activate
            Range("A1:B2").Delete Shift:=xlUp
        Loop

 End Sub 
```

我使用 A1:B2 作为我的范围，但你可以使用任何你需要使用的东西。文件名也是如此。我还假设您的数据中没有任何空白。如果有，您可能需要一种更复杂的方法来检查所有数据是否已被复制。

# javascript - CSS/Javascript/JQuery 中的类和选择器匹配

> ID：14158377
> 
> 赞同：0
> 
> 时间：2013-01-04T13:46:31.120
> 
> 标签：javascript, jquery, css

我想将 JQuery CSS 调用（修改 CSS 以便我可以使用变量）与一些 Javascript div/类匹配。我不能使用“id”，因为循环中有很多这样的实例。编辑：它仍然不能正常工作，我怀疑我需要更多细节。

CSS 的相关部分（还有其他转换线，此处未显示）：

```
.thermometer .circle {
    position: absolute;
    ...

.pie {
    position: absolute;
    ...
}

.hold {
    position: absolute;
    ...
    clip: rect(0px, 26px, 26px, 13px);
}

.pieSlice1 .pie {
    background-color: white;
    -webkit-transform:rotate(60deg);
    transform:rotate(60deg);
} 
```

在 JST EJS 文件中：

```
 <div class="thermometer">
   <div class="circle <%= this.presenter.newColor(nutrient) %>">
     <div class="pieSlice1 hold">
       <div class="pie"></div>
         <% $(".pieSlice1.hold .pie").css({'-webkit-transform': 'rot
ate(22deg)'}); %> 
```

我已经删除了“pieSlice1”和“hold”之间的空格，但是我需要任何其他类来匹配吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T13:48:40.773

它应该是：

```
.pieSlice1.hold .pie 
```

`.pieSlice1`和之间没有任何空格`.hold`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T13:49:04.707

如果你想要一个交集，只需将选择器写在一起，中间不要有空格。

```
$(".pieSlice1.hold .pie").css({'-webkit-transform': 'rot
ate(22deg)'}); 
```

当我们包含空间时，它会寻找后代......

另一种选择是：

```
$(".pieSlice1").filter(".hold .pie").css({'-webkit-transform': 'rot
ate(22deg)'}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T13:51:27.963

由于`.pieSlice1`和`.hold`都是同一元素上的两个类，因此您需要将它们链接起来：

```
.pieSlice1.hold .pie 
```

注意`.pieSlice1`和之间没有空格`.hold`——这意味着它将匹配一个元素与一个类，该类是一个*同时*具有和类`.pie`的元素的后代。 *`.pieSlice1``.hold`*

 *而你现在拥有的...

```
.pieSlice1 .hold .pie 
```

这将匹配一个元素与类`.pie`，该类是一个元素与类的后代`.hold`，它*本身*是一个元素与类的后代`.pieSlice1`。*

# oracle - 如何在一个脚本中更改 Oracle 架构上的所有索引 (10G)

> ID：14158391
> 
> 赞同：4
> 
> 时间：2013-01-04T13:47:15.557
> 
> 标签：oracle, plsql

我需要为 Oracle 模式的所有索引添加一个新列，因为数据库将开始存储历史记录并具有一个新的日期字段。由于现有索引是唯一的，我需要将它们全部删除并再次创建它们，但让新索引包含新列。如果所有基于单列的索引都使用系统视图，这将是相当容易的：

```
select 'CREATE INDEX ' || index_name || ' ON ' || table_name || ' (' || column_name || ',NEWCOLUMNNAME)' 

from sys.all_ind_columns 

where table_owner = 'SCHEMA_OWNER' 
```

但显然我在问，因为并非我所有的索引都是基于单列的。这是我需要在像 TOAD 这样的 IDE 上执行的操作。数据库版本为10g。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-04T13:57:16.297

试试这个

对于 Oracle 11g：

```
SELECT 'CREATE INDEX ' || INDEX_NAME || ' ON ' 
        || TABLE_NAME || ' (' || COL_LIST  || ',NEWCOLUMNNAME)' 
FROM ( 
       Select index_name,table_name,
       LISTAGG(COLUMN_NAME || DECODE(DESCEND,'ASC','', ' ' || DESCEND), ',') 
       WITHIN GROUP (ORDER BY COLUMN_POSITION) AS COL_LIST 
       FROM SYS.ALL_IND_COLUMNS
       GROUP BY index_name,table_name
); 
```

对于 Oracle 10g，您可以使用：

```
SELECT 'CREATE INDEX ' || INDEX_NAME || ' ON ' 
     || TABLE_NAME || ' (' || COL_LIST  || ',NEWCOLUMNNAME)' 
FROM ( 
       SELECT INDEX_NAME,TABLE_NAME,            
       REGEXP_REPLACE(XMLAGG (XMLELEMENT(E, COLUMN_NAME || 
       DECODE(DESCEND,'ASC','', ' ' || DESCEND) ||',') 
       ORDER BY COLUMN_POSITION).EXTRACT('//text()'), '\s*,\s*$', '') AS  COL_LIST 
       FROM SYS.ALL_IND_COLUMNS
       GROUP BY INDEX_NAME,TABLE_NAME
 ); 
```

供参考 - [不同字符串聚合技术的列表](http://www.oracle-base.com/articles/misc/string-aggregation-techniques.php)

# java - java中的GSON解析器打印null

> ID：14158399
> 
> 赞同：0
> 
> 时间：2013-01-04T13:48:25.840
> 
> 标签：java, json, parsing, gson

您好以下是我的 JSON 文件

```
{
    "completed_in": 0.046,
    "max_id": 286437550577573889,
    "max_id_str": "286437550577573889",
    "next_page": "?page=2&max_id=286437550577573889&q=new%20year",
    "page": 1,
    "query": "new+year",
    "refresh_url": "?since_id=286437550577573889&q=new%20year",
    "results": [{
        "created_at": "Wed, 02 Jan 2013 11:43:28 +0000",
        "from_user": "RodiSilverstone",
        "from_user_id": 855001483,
        "from_user_id_str": "855001483",
        "from_user_name": "Rodi Silverstone",
        "geo": null,
        "id": 286437550577573889,
        "id_str": "286437550577573889",
        "iso_language_code": "en",
        "metadata": {
            "result_type": "recent"
        },
        "profile_image_url": "http:\/\/a0.twimg.com\/profile_images\/2978713010\/5e321e174ded0c14f11d4929c1928912_normal.png",
        "profile_image_url_https": "https:\/\/si0.twimg.com\/profile_images\/2978713010\/5e321e174ded0c14f11d4929c1928912_normal.png",
        "source": "&lt;a href=&quot;http:\/\/twitter.com\/&quot;&gt;web&lt;\/a&gt;",
        "text": "Bonne annee\/joyeux Noel en retard :S\nHappy New Year\/Merry Christmas w\/ late...\nPS: Pas d'accents car clav' Qwerty car I'm in Australia ^^",
        "to_user": null,
        "to_user_id": 0,
        "to_user_id_str": "0",
        "to_user_name": null
    },
    {
        "created_at": "Wed, 02 Jan 2013 11:43:28 +0000",
        "from_user": "ToddBuell",
        "from_user_id": 461294085,
        "from_user_id_str": "461294085",
        "from_user_name": "Todd Buell",
        "geo": null,
        "id": 286437550334291970,
        "id_str": "286437550334291970",
        "iso_language_code": "en",
        "metadata": {
            "result_type": "recent"
        },
        "profile_image_url": "http:\/\/a0.twimg.com\/profile_images\/2482121747\/bqf3z7knjm3zetmdkc7g_normal.jpeg",
        "profile_image_url_https": "https:\/\/si0.twimg.com\/profile_images\/2482121747\/bqf3z7knjm3zetmdkc7g_normal.jpeg",
        "source": "&lt;a href=&quot;http:\/\/twitter.com\/&quot;&gt;web&lt;\/a&gt;",
        "text": "Fiscal cliff deal gives markets relief in New Year. \"Super Mario\" has averted euro zone crisis.Things look good for now, but will it last?",
        "to_user": null,
        "to_user_id": 0,
        "to_user_id_str": "0",
        "to_user_name": null
    },
    {
        "created_at": "Wed, 02 Jan 2013 11:43:28 +0000",
        "from_user": "Laughing_Gravy",
        "from_user_id": 16528102,
        "from_user_id_str": "16528102",
        "from_user_name": "Laughing Gravy\u2122",
        "geo": null,
        "id": 286437550313312256,
        "id_str": "286437550313312256",
        "iso_language_code": "en",
        "metadata": {
            "result_type": "recent"
        },
        "profile_image_url": "http:\/\/a0.twimg.com\/profile_images\/3027789460\/1bda0b2d9779e552e5d5f5dc7b46d7c1_normal.jpeg",
        "profile_image_url_https": "https:\/\/si0.twimg.com\/profile_images\/3027789460\/1bda0b2d9779e552e5d5f5dc7b46d7c1_normal.jpeg",
        "source": "&lt;a href=&quot;http:\/\/blackberry.com\/twitter&quot;&gt;Twitter for BlackBerry\u00ae&lt;\/a&gt;",
        "text": "@Lindow_Man  Happy New Year my friend :)",
        "to_user": "Lindow_Man",
        "to_user_id": 549313793,
        "to_user_id_str": "549313793",
        "to_user_name": "Mr PG",
        "in_reply_to_status_id": 286436483806670848,
        "in_reply_to_status_id_str": "286436483806670848"
    },
    {
        "created_at": "Wed, 02 Jan 2013 11:43:28 +0000",
        "from_user": "ayinnisa",
        "from_user_id": 407600441,
        "from_user_id_str": "407600441",
        "from_user_name": "Arini Faranisa",
        "geo": null,
        "id": 286437550271381504,
        "id_str": "286437550271381504",
        "iso_language_code": "en",
        "metadata": {
            "result_type": "recent"
        },
        "profile_image_url": "http:\/\/a0.twimg.com\/profile_images\/2527223229\/picmix-2172012-144555_normal.jpeg",
        "profile_image_url_https": "https:\/\/si0.twimg.com\/profile_images\/2527223229\/picmix-2172012-144555_normal.jpeg",
        "source": "&lt;a href=&quot;http:\/\/ubersocial.com&quot;&gt;UberSocial for BlackBerry&lt;\/a&gt;",
        "text": "Happy nu year too my bicih :* RT @ThataMarsya: Happy new year couzy @tyaaaacw @ayinnisa @ayuayu2x @glori4valentine (\u02d8\u2323\u02d8)\u03b5\u02d8)",
        "to_user": null,
        "to_user_id": 0,
        "to_user_id_str": "0",
        "to_user_name": null
    },
    {
        "created_at": "Wed, 02 Jan 2013 11:43:28 +0000",
        "from_user": "dougshepherd1",
        "from_user_id": 325897505,
        "from_user_id_str": "325897505",
        "from_user_name": "Doug Shepherd",
        "geo": null,
        "id": 286437550229434368,
        "id_str": "286437550229434368",
        "iso_language_code": "en",
        "metadata": {
            "result_type": "recent"
        },
        "profile_image_url": "http:\/\/a0.twimg.com\/profile_images\/1420764658\/dougandro_normal.jpg",
        "profile_image_url_https": "https:\/\/si0.twimg.com\/profile_images\/1420764658\/dougandro_normal.jpg",
        "source": "&lt;a href=&quot;http:\/\/twitterfeed.com&quot;&gt;twitterfeed&lt;\/a&gt;",
        "text": "Title Boxing Club 'Sweat Factory' Open For New Year's Resolution Help: When Ken Greer accidentally clicked a but... http:\/\/t.co\/RZ0Eim48",
        "to_user": null,
        "to_user_id": 0,
        "to_user_id_str": "0",
        "to_user_name": null
    },
    {
        "created_at": "Wed, 02 Jan 2013 11:43:28 +0000",
        "from_user": "a1a2a2a3a4",
        "from_user_id": 935634619,
        "from_user_id_str": "935634619",
        "from_user_name": "\uc720\uc2b9\uc6b0\uc870\uc73c\ub2e4Vv",
        "geo": null,
        "id": 286437550145556480,
        "id_str": "286437550145556480",
        "iso_language_code": "ko",
        "metadata": {
            "result_type": "recent"
        },
        "profile_image_url": "http:\/\/a0.twimg.com\/profile_images\/2898657882\/6a71600348f1d4136866a86e267722d5_normal.png",
        "profile_image_url_https": "https:\/\/si0.twimg.com\/profile_images\/2898657882\/6a71600348f1d4136866a86e267722d5_normal.png",
        "source": "&lt;a href=&quot;http:\/\/twitter.com\/download\/android&quot;&gt;Twitter for Android&lt;\/a&gt;",
        "text": "RT @seungu97: @PutriNorizah \ubbf8\uc548\ud574\uc694\ud478\ud2b8\ub9aci was in a hurry to write you back happy new year \ud478\ud2b8\ub9ac\ub108\ubb34\ucc29\ud574\uc694\uce74\ud1a1\ud574\uc694",
        "to_user": null,
        "to_user_id": 0,
        "to_user_id_str": "0",
        "to_user_name": null
    },
    {
        "created_at": "Wed, 02 Jan 2013 11:43:28 +0000",
        "from_user": "RaymondMarvinP",
        "from_user_id": 153311501,
        "from_user_id_str": "153311501",
        "from_user_name": "Raymond Pattipeilohy",
        "geo": null,
        "id": 286437550116184064,
        "id_str": "286437550116184064",
        "iso_language_code": "en",
        "metadata": {
            "result_type": "recent"
        },
        "profile_image_url": "http:\/\/a0.twimg.com\/profile_images\/3054427884\/86a9053b8bb8530cb31a730d6895abc3_normal.jpeg",
        "profile_image_url_https": "https:\/\/si0.twimg.com\/profile_images\/3054427884\/86a9053b8bb8530cb31a730d6895abc3_normal.jpeg",
        "source": "&lt;a href=&quot;https:\/\/embr.in&quot;&gt;embr&lt;\/a&gt;",
        "text": "Happy new year adk :D @khunkromo",
        "to_user": null,
        "to_user_id": 0,
        "to_user_id_str": "0",
        "to_user_name": null
    },
    {
        "created_at": "Wed, 02 Jan 2013 11:43:28 +0000",
        "from_user": "Nellyestao",
        "from_user_id": 401253041,
        "from_user_id_str": "401253041",
        "from_user_name": "Nelly Estaorina",
        "geo": null,
        "id": 286437549428318209,
        "id_str": "286437549428318209",
        "iso_language_code": "en",
        "metadata": {
            "result_type": "recent"
        },
        "profile_image_url": "http:\/\/a0.twimg.com\/profile_images\/3012999534\/2e73bf044ef0282ab1829d9308609f8b_normal.jpeg",
        "profile_image_url_https": "https:\/\/si0.twimg.com\/profile_images\/3012999534\/2e73bf044ef0282ab1829d9308609f8b_normal.jpeg",
        "source": "&lt;a href=&quot;http:\/\/blackberry.com\/twitter&quot;&gt;Twitter for BlackBerry\u00ae&lt;\/a&gt;",
        "text": "RT @mutiaraulia: Happy New Year 2013 for UJP14\u263a\u2661 . Make it better! Better than 2012! Success for our training! And keep never remedial alone",
        "to_user": null,
        "to_user_id": 0,
        "to_user_id_str": "0",
        "to_user_name": null
    },
    {
        "created_at": "Wed, 02 Jan 2013 11:43:28 +0000",
        "from_user": "katiee_douglas",
        "from_user_id": 231021947,
        "from_user_id_str": "231021947",
        "from_user_name": "Katie Douglas X",
        "geo": null,
        "id": 286437549407346688,
        "id_str": "286437549407346688",
        "iso_language_code": "en",
        "metadata": {
            "result_type": "recent"
        },
        "profile_image_url": "http:\/\/a0.twimg.com\/profile_images\/3049930519\/be6f7dd5d68c199df4c5befa121260d2_normal.jpeg",
        "profile_image_url_https": "https:\/\/si0.twimg.com\/profile_images\/3049930519\/be6f7dd5d68c199df4c5befa121260d2_normal.jpeg",
        "source": "&lt;a href=&quot;http:\/\/twitter.com\/download\/iphone&quot;&gt;Twitter for iPhone&lt;\/a&gt;",
        "text": "RT @CalvinTrever: Didn't sleep on new year, only slept last night so now I feel like f***ing s**t",
        "to_user": null,
        "to_user_id": 0,
        "to_user_id_str": "0",
        "to_user_name": null
    },
    {
        "created_at": "Wed, 02 Jan 2013 11:43:28 +0000",
        "from_user": "hico2",
        "from_user_id": 205687874,
        "from_user_id_str": "205687874",
        "from_user_name": "hico\u00b2",
        "geo": null,
        "id": 286437549273124864,
        "id_str": "286437549273124864",
        "iso_language_code": "ja",
        "metadata": {
            "result_type": "recent"
        },
        "profile_image_url": "http:\/\/a0.twimg.com\/profile_images\/1341047299\/DSC_4069_normal.JPG",
        "profile_image_url_https": "https:\/\/si0.twimg.com\/profile_images\/1341047299\/DSC_4069_normal.JPG",
        "source": "&lt;a href=&quot;http:\/\/twitter.com\/&quot;&gt;web&lt;\/a&gt;",
        "text": "hico\u00b2\u30d6\u30ed\u30b0\u66f4\u65b0\u3057\u3083\u3063\u3059\uff01\u300eA HAPPY NEW YEAR\uff01\u301c\u7b11\u9580\u6765\u798f2013\u301c\uff01\uff01\u300f\nhttp:\/\/t.co\/Wk2lSVZJ",
        "to_user": null,
        "to_user_id": 0,
        "to_user_id_str": "0",
        "to_user_name": null
    },
    {
        "created_at": "Wed, 02 Jan 2013 11:43:28 +0000",
        "from_user": "saionjikyua",
        "from_user_id": 154139162,
        "from_user_id_str": "154139162",
        "from_user_name": "\u304d\u3085\u3042K\u3000",
        "geo": null,
        "id": 286437549222817793,
        "id_str": "286437549222817793",
        "iso_language_code": "ja",
        "metadata": {
            "result_type": "recent"
        },
        "profile_image_url": "http:\/\/a0.twimg.com\/profile_images\/3011151755\/914f0441f5cca86a822248ba84b125f0_normal.jpeg",
        "profile_image_url_https": "https:\/\/si0.twimg.com\/profile_images\/3011151755\/914f0441f5cca86a822248ba84b125f0_normal.jpeg",
        "source": "&lt;a href=&quot;https:\/\/mobile.twitter.com&quot;&gt;Mobile Web (M2)&lt;\/a&gt;",
        "text": "kyua HAPPY NEW YEAR!\"!!!!!\n\n\u897f\u5712\u5bfa\u308e\u305f\u3060\u3044\u307e\u65e5\u672c\u306b\u5e30\u5b85\u3057\u305f\u30ad\u30e5\u30a2\u2605",
        "to_user": null,
        "to_user_id": 0,
        "to_user_id_str": "0",
        "to_user_name": null
    },
    {
        "created_at": "Wed, 02 Jan 2013 11:43:28 +0000",
        "from_user": "_GiuliaB_",
        "from_user_id": 161635884,
        "from_user_id_str": "161635884",
        "from_user_name": "Giulia Anna \u2665",
        "geo": null,
        "id": 286437548652376064,
        "id_str": "286437548652376064",
        "iso_language_code": "en",
        "metadata": {
            "result_type": "recent"
        },
        "profile_image_url": "http:\/\/a0.twimg.com\/profile_images\/2396882564\/9ufvgyxf6hacuxl2znf7_normal.png",
        "profile_image_url_https": "https:\/\/si0.twimg.com\/profile_images\/2396882564\/9ufvgyxf6hacuxl2znf7_normal.png",
        "source": "&lt;a href=&quot;http:\/\/www.hootsuite.com&quot;&gt;HootSuite&lt;\/a&gt;",
        "text": "New Year's #resolutions http:\/\/t.co\/UGdMHPjf",
        "to_user": null,
        "to_user_id": 0,
        "to_user_id_str": "0",
        "to_user_name": null
    },
    {
        "created_at": "Wed, 02 Jan 2013 11:43:27 +0000",
        "from_user": "WashingtonTroom",
        "from_user_id": 148635962,
        "from_user_id_str": "148635962",
        "from_user_name": "Washington Tea Room",
        "geo": null,
        "id": 286437548501377024,
        "id_str": "286437548501377024",
        "iso_language_code": "en",
        "metadata": {
            "result_type": "recent"
        },
        "profile_image_url": "http:\/\/a0.twimg.com\/profile_images\/2211531785\/washington_tea_room_sign_1_normal.jpg",
        "profile_image_url_https": "https:\/\/si0.twimg.com\/profile_images\/2211531785\/washington_tea_room_sign_1_normal.jpg",
        "source": "&lt;a href=&quot;http:\/\/itunes.apple.com\/us\/app\/twitter\/id409789998?mt=12&quot;&gt;Twitter for Mac&lt;\/a&gt;",
        "text": "Looking for a new year challenge? Why not volunteer to help for just a few hours each month for a local community project, very rewarding!",
        "to_user": null,
        "to_user_id": 0,
        "to_user_id_str": "0",
        "to_user_name": null
    },
    {
        "created_at": "Wed, 02 Jan 2013 11:43:27 +0000",
        "from_user": "RosalynOlson11",
        "from_user_id": 1054839787,
        "from_user_id_str": "1054839787",
        "from_user_name": "Rosalyn Olson",
        "geo": null,
        "id": 286437548396527616,
        "id_str": "286437548396527616",
        "iso_language_code": "en",
        "metadata": {
            "result_type": "recent"
        },
        "profile_image_url": "http:\/\/a0.twimg.com\/profile_images\/3054422061\/cbb2cb2f2af48d452945aca59a66b073_normal.jpeg",
        "profile_image_url_https": "https:\/\/si0.twimg.com\/profile_images\/3054422061\/cbb2cb2f2af48d452945aca59a66b073_normal.jpeg",
        "source": "&lt;a href=&quot;https:\/\/mobile.twitter.com&quot;&gt;Mobile Web (M2)&lt;\/a&gt;",
        "text": "#job Anyone actually make this happen? http:\/\/t.co\/RkHSUrOk",
        "to_user": null,
        "to_user_id": 0,
        "to_user_id_str": "0",
        "to_user_name": null
    },
    {
        "created_at": "Wed, 02 Jan 2013 11:43:27 +0000",
        "from_user": "BumperArmor",
        "from_user_id": 1021423430,
        "from_user_id_str": "1021423430",
        "from_user_name": "Bumper Armor",
        "geo": null,
        "id": 286437548350377984,
        "id_str": "286437548350377984",
        "iso_language_code": "en",
        "metadata": {
            "result_type": "recent"
        },
        "profile_image_url": "http:\/\/a0.twimg.com\/profile_images\/2993704676\/0647b39064b4ed7147be4a061e910bc3_normal.jpeg",
        "profile_image_url_https": "https:\/\/si0.twimg.com\/profile_images\/2993704676\/0647b39064b4ed7147be4a061e910bc3_normal.jpeg",
        "source": "&lt;a href=&quot;http:\/\/twitter.com\/&quot;&gt;web&lt;\/a&gt;",
        "text": "How was the New Year Celebration??",
        "to_user": null,
        "to_user_id": 0,
        "to_user_id_str": "0",
        "to_user_name": null
    }],
    "results_per_page": 15,
    "since_id": 0,
    "since_id_str": "0"
} 
```

我正在使用以下java程序来解析json文件

```
package jsonparser;
import com.google.gson.JsonArray;
import com.google.gson.JsonElement;
import com.google.gson.JsonObject;
import com.google.gson.JsonParser;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;
import java.util.Iterator;
import java.util.Map.Entry;
public class BasicGenGson {

     final private String path = "C:/json/"; //set directory path
        private JsonParser parser = new JsonParser();
        private int count = -1;

        public static void main(String[] args) {
            BasicGenGson read = new BasicGenGson();
            read.sendJSONFile();
        }

        //send json files to read one by one
        private void sendJSONFile() {

            File[] jsonfiles = getJSONFiles();

            if (jsonfiles.length > 0) {
                for (int i = 0; i <= count; i++) {

                    try {
                        //prints json file names
                        System.out.println("File: \t" + jsonfiles[i]);
                        JsonElement jsonElement = parser.parse(new FileReader(jsonfiles[i]));
                        JsonObject jsonObject = jsonElement.getAsJsonObject();
                        readJSONFile(jsonObject);
                    }
                    catch (FileNotFoundException e) {
                        System.out.println(e.getMessage());
                        //e.getStackTrace();
                    }
                    catch (IOException e) {
                        System.out.println(e.getMessage());
                        //e.getStackTrace();
                    }
                    catch (Exception e) {
                        System.out.println(e.getMessage());
                        //e.getStackTrace();
                    }

                }
            }
        }

        //read a complete json file
        private void readJSONFile(JsonObject jsonObject) {

            for (Entry<String, JsonElement> entry : jsonObject.entrySet()) {

                String key = entry.getKey();
                JsonElement value = entry.getValue();

                if (value.isJsonObject()) {
                    readJSONFile(value.getAsJsonObject());
                }
                else if (value.isJsonArray()) {
                     JsonArray jsonArray = value.getAsJsonArray();

                     if (jsonArray.size() == 1) {
                        readJSONFile((JsonObject) jsonArray.get(0));
                    }
                     else {
                        //prints json array name
                        System.out.println(key);
                        Iterator<JsonElement> msg = jsonArray.iterator();
                        while (msg.hasNext()) {
                            ////prints json array values
                            //System.out.println(msg.next());
                            /*******************************************/
                            if (msg.next().isJsonObject()) {
                                readJSONFile(msg.next().getAsJsonObject());
                            }

                            /***********************************************/

                        }
                    }
                }
                else {
                    ////prints json object's keys and values
                    if (key.equals("from_user")|| key.equals("text") ) {
                        System.out.println(key + " - " + value);

                    }
//                  System.out.println(key + " - " + value);

                }
            }
        }

        //get only .json files from a directory
        private File[] getJSONFiles() {

            File folder = new File(path);
            File[] files = folder.listFiles();
            File[] jsonfiles = new File[files.length];

            for (int i = 0; i < files.length; i++) {

                if (files[i].isFile()) {
                    if (files[i].getName().endsWith(".json") || files[i].getName().endsWith(".JSON")) {
                        jsonfiles[++count] = files[i];
                    }
                }
            }

            return files;
        }

} 
```

我需要提取“from_user”和“text”并且我没有得到所有的字段......在几个值之后它的打印为空。以下是输出

```
File:   C:\json\NewYear.json
results
from_user - "ToddBuell"
text - "Fiscal cliff deal gives markets relief in New Year. \"Super Mario\" has averted euro zone crisis.Things look good for now, but will it last?"
from_user - "ayinnisa"
text - "Happy nu year too my bicih :* RT @ThataMarsya: Happy new year couzy @tyaaaacw @ayinnisa @ayuayu2x @glori4valentine (???)??)"
from_user - "a1a2a2a3a4"
text - "RT @seungu97: @PutriNorizah ???????i was in a hurry to write you back happy new year ????????????"
from_user - "Nellyestao"
text - "RT @mutiaraulia: Happy New Year 2013 for UJP14?? . Make it better! Better than 2012! Success for our training! And keep never remedial alone"
from_user - "hico2"
text - "hico²???????????A HAPPY NEW YEAR??????2013????\nhttp://t.co/Wk2lSVZJ"
from_user - "_GiuliaB_"
text - "New Year's #resolutions http://t.co/UGdMHPjf"
from_user - "RosalynOlson11"
text - "#job Anyone actually make this happen? http://t.co/RkHSUrOk"
null 
```

请帮助...谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T14:40:22.713

出于同样的原因，您只打印JSON 数组中的*所有其他*条目。

```
if (msg.next().isJsonObject()) {
    readJSONFile(msg.next().getAsJsonObject());
} 
```

您正在调用`Iterator`'`next()`方法两次。第一次调用它时，您会丢弃返回的对象。最后，第二次调用它会返回`null`，因为数组中没有对象可以返回。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-08-07T19:53:58.503

知乎...

```
public String consumirServicioTest() {
    String resultado = "nada!";
    HttpConnection con = null;
    InputStream is = null;
    try {

        String url = "http://192.168.190.160/.....";
        // para invocar servicios en bb7 colocar la URL de la siguiente
        // forma: (url + ";deviceside=true", Connector.READ_WRITE)
        con = (HttpConnection) Connector.open(url + ";deviceside=true",
                Connector.READ_WRITE);
        con.setRequestMethod(HttpConnection.POST);
        final int responseCode = con.getResponseCode();
        if (responseCode != HttpConnection.HTTP_OK) {
            System.out.println("-----respuesta: " + responseCode);
        }
        is = con.openInputStream();
        byte[] responseData = new byte[10000];
        int length = 0;
        StringBuffer rawResponse = new StringBuffer();
        while (-1 != (length = is.read(responseData))) {
            rawResponse.append(new String(responseData, 0, length));
        }
        final String result = rawResponse.toString();
        resultado = result;
    } catch (Exception e) {
        e.printStackTrace();
        System.out.println("Exception: \n" + e.getMessage());
    } finally {
        try {
            is.close();
            is = null;
            con.close();
            con = null;
        } catch (Exception e) {
        }
    }
    return retornarObjeto(resultado);
}

/**
 * Toma el objeto Json contenido en un String y de este obtiene uno a uno
 * los objetos incluidos.
 * 
 * @param jsonResult
 *            String que contiene objetos java dentro de un objeto Json.
 * @return String que contiene los objetos java dentro del objeto Json.
 */
public String retornarObjeto(String jsonResult) {
    String objetoRetornado = "";
    try {
        JSONArray json = new JSONArray(jsonResult);
        for (int i = 0; i < json.length(); i++) {
            JSONObject contact = json.getJSONObject(i);
            objetoRetornado += obtenerValores(contact);
        }
    } catch (Exception e) {
        e.printStackTrace();
        System.out.println("------- excepcion parserJson ------\n"
                + e.getMessage());
        objetoRetornado = "--";
    }
    return objetoRetornado;
}

/**
 * Toma un objeto JSONObject y lo parsea en un String.
 * 
 * @param contact
 *            Objeto JSONObject.
 * @return String que contiene los valores de un objeto JSONObject.
 */
public String obtenerValores(JSONObject contact) {
    String valores = "";
    try {
        for (int j = 0; j < contact.names().length(); j++) {
            // obtener clave --> contact.names().optString(j)
            // obtener valor --> contact.get(contact.names().optString(j))
            valores += contact.names().optString(j) + " -- "
                    + contact.get(contact.names().optString(j)) + "\n";
        }
        valores += "----------------------------------------------\n";
    } catch (JSONException e) {
        e.printStackTrace();
        System.out.println("---- Excepción obtener valores ----\n"
                + e.getMessage());
    }
    return valores;
} 
```

# c# - 生成大文档后 IIS 内存使用不会恢复正常

> ID：14158400
> 
> 赞同：3
> 
> 时间：2013-01-04T13:48:26.453
> 
> 标签：c#, asp.net, iis, memorystream, npoi

在我的 ASP.NET MVC 应用程序中，我使用 NPOI 框架来生成一个相当大的 excel 文件（30-100mb）

[http://npoi.codeplex.com/](http://npoi.codeplex.com/)

生成文档后，我将其保存到内存流中，并使用 MVC File 帮助器方法返回 FileStreamResult

```
File(Stream fileStream, string contentType, string fileDownloadName) 
```

像这样

```
HSSFWorkbook document = GenerateExcelWorkBook();

var stream = new MemoryStream();
document.Write(stream);

stream.Flush();
stream.Position = 0;

return File(stream, "application/vnd.ms-exce", "filename.xls"); 
```

变量文档属于 NPOI 框架中的“HSSFWorkbook”类型

我不明白为什么内存使用率仍然很高，即使在生成文档并且流已返回给用户之后也是如此。File 方法应该在写入响应流后处理流。

如果我再次单击生成链接，内存使用会恢复正常，并在再次生成文档时开始攀升。

这可能是 NPOI HSSFWorkbook 类没有正确收集垃圾或其他什么的问题吗？那会很奇怪，因为我没有保存任何静态变量（至少在我的代码中没有）。

有谁知道为什么内存使用不会恢复正常？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T14:03:49.323

处理 != 释放内存。

垃圾收集器将根据需要释放内存，大块可能比小块花费更长的时间。

您在生成第二份文档时看到的行为证实了我的建议；额外的内存使用会导致“内存压力”，这会触发垃圾收集来清理东西。

基本上，除非你真的有一些记忆问题，否则不要担心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T16:46:32.227

如果您遇到内存不足的情况，您可能想查看调用 GC.Collect() 。检查这个 SO 线程以获得对为什么（或为什么不）调用它的一个很好的解释。

[GC.Collect()](https://stackoverflow.com/questions/1149197/gc-collect)

我并不是说你应该这样做，只是说它可能值得测试。

# c# - 在 C# 中使用 LINQ 删除数组元素

> ID：14158411
> 
> 赞同：-2
> 
> 时间：2013-01-04T13:49:00.380
> 
> 标签：c#, linq

`string[]`如果数组元素不是从数组开始，我们可以从数组中删除数组元素吗`'%'`

```
string[] saBytesReceived = null; 
bDataReceived = new byte[bBytesToRead]; //byte[] array
networkStream.Read(bDataReceived, 0, bBytesToRead);
try
{
   if (ASCIIEncoding.ASCII.GetString(bDataReceived).Trim() != "")
   {
       saBytesReceived = ASCIIEncoding.ASCII.GetString(bDataReceived)
                         .Split(new string[] { "\0" }, StringSplitOptions.None);
      saBytesReceived = saBytesReceived.Select(s => s.Replace("?", "")).ToArray();     
      saBytesReceived = //Remove array elements in One single Line
    }
} 
```

我不想使用任何循环..仅通过使用**LINQ**我们可以在单行中完成吗？

我的样本数组

```
65928346897326
34623462346346
%346346
%436534
32632463667364 
```

结果数组应该是

```
%346346
%436534 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T13:52:37.940

Linq 用于查询，而不是用于修改（删除项目）。您可以获得以 % 开头的项目：

```
saBytesReceived = saBytesReceived.Where(s => s.StartsWith("%")).ToArray(); 
```

这将使用您想要的项目创建新数组：

```
%346346
%436534 
```

是的，在内部 Linq 将使用循环。

* * *

顺便说一句，您可以将代码重构为单个查询：

```
 string response = ASCIIEncoding.ASCII.GetString(bDataReceived);

   if (!String.IsNullOrWhiteSpace(response))
   {      
       saBytesReceived = response
              .Split(new string[] { "\0" }, StringSplitOptions.None)
              .Select(s => s.Replace("?", ""))
              .Where(s => s.StartsWith("%"))
              .ToArray();
   } 
```

# jquery - 无法使用 jquery 删除第一个 TR

> ID：14158412
> 
> 赞同：0
> 
> 时间：2013-01-04T13:49:01.107
> 
> 标签：jquery, jquery-selectors

由于某些奇怪的原因，我无法`<tr>`使用此代码删除第一个：

```
$('tbody tr#2 .is_KW').remove(); 
```

这是我的 html 表格代码：

```
<tbody>
<tr id="2" class="is_KW">
    <td class="KW" style="border-left: 1px solid white;border-right: 1px solid #F4F4F4;padding: 12px 14px;position: relative;text-align: left;">
        <img src="img/world/af.png" alt="" title="af" style="vertical-align:middle;"> sweden
    </td>
    <td class="RR" style="border-left: 1px solid white;border-right: 1px solid #F4F4F4;padding: 12px 14px;position: relative;text-align: left;">
        <strong>
        1000+ </strong>
    </td>
</tr>
</tbody> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T13:49:45.367

它应该是

```
$('tbody tr#2.is_KW').remove(); 
```

您的选择器带有额外的空间，目标是一个元素`is_KW` **内**有类的`tr`元素。

请注意，当您有 ID 时，您应该只使用它：

```
$('#2').remove(); 
```

当然，除非该类是作为删除的条件并且可能不存在。

# java - 如何使用 Android setTranslation ？（或另一种移动文本视图的方法？）

> ID：14158413
> 
> 赞同：3
> 
> 时间：2013-01-04T13:49:01.877
> 
> 标签：java, android, textview

我想开始为学校制作一个“精神层面”的应用程序（不确定这个词，确保你放置它的表面是平（直）的工具）。现在我只想移动文本视图，然后让传感器侦听器自动完成，然后将它们转换为图像等。

无论如何，我无法在屏幕中移动 textView！

我在视图中找到了一个名为 setTranslationX 和 setTranslationY 的方法，它们似乎完全符合我的要求，因此我尝试以这种方式使用它们：

```
super.onCreate(savedInstanceState);

float nombre=100;
setContentView(R.layout.activity_main);

TextView H = (TextView) findViewById(R.id.Champ_H);

H.setTranslationX(nombre); 
```

只需将 textView 向右移动。

但我在最后一行收到了这条消息：

> 对于 TextView 类型，方法 setTranslationX(float) 未定义

问题是，是的，是的，我查看了文档，这个方法存在并且将浮点数作为参数。我当然已经导入了应该包含它的 android.view.View ，但这不起作用。我也尝试过使用 setLeft 来做类似的事情，但会出现同样的问题。似乎每种方法都可以让我移动 textView，eclipse 不会让我使用它们。

有人知道为什么吗？或者知道移动 TextView 的其他方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-26T07:02:02.280

在你的项目中使用`nineOldAndroid.jar`文件并使用这种方式

```
import com.nineoldandroids.view.ViewHelper;

ViewHelper.setTranslationX(myView, translation); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-04T13:58:26.440

尝试这个：

```
h.setTranslationX(100f); 
```

在我的日食中工作正常:)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-10-20T20:23:30.197

您可能需要指定要翻译的单位。尝试：

```
H.setTranslationX(100px); 
```

见[http://developer.android.com/reference/android/view/View.html#attr_android:translationX](http://developer.android.com/reference/android/view/View.html#attr_android:translationX)

# c# - 查询中的“IN”子句的 System.Data.SQLite 问题

> ID：14158425
> 
> 赞同：0
> 
> 时间：2013-01-04T13:49:57.090
> 
> 标签：c#, sqlite, compact-framework, windows-ce, system.data.sqlite

我正在研究紧凑的框架并使用 ADO for sqlite。我的 sqlite 数据库包含 300 万条记录。[表结构与本问题](https://stackoverflow.com/questions/14119713/system-data-sqlite-issue-on-compact-framework-3-5)中的说明相同 。我正在尝试使用数据适配器和数据集来解决同一问题中提到的问题。然而，我面临的新问题是，只要我的查询包含“IN”子句，数据适配器的 Fill(...) 调用就不会返回。下面是我用于填充数据集的查询和逻辑。

```
string query = SELECT TimeStamp,Col2,Col3,Col4,Col5,Col6 FROM T1 
           WHERE (TimeStamp BETWEEN @startDate AND @endDate)
           AND Col5 IN {0} ORDER BY TimeStamp DESC LIMIT 0,@dataToRead 
```

**请注意 IN 子句后的“占位符”**。我需要，因为我的 IN 子句列表将动态创建。

我正在使用 sqlite 命令和数据适配器，如下所示

```
using (SQLiteCommand cmd = _conn.CreateCommand())
{
    cmd.Parameters.AddWithValue("@startDate", startDate.Ticks);
cmd.Parameters.AddWithValue("@endDate", endDate.Ticks);
cmd.Parameters.AddWithValue("@dataToRead", dataToRead); //100
StringBuilder inParams = new StringBuilder();
if (true == webRequest && webRequestFilter != WebCategory.All)
{
  switch (webRequestFilter)
  {
             case WebCategory.One:
             {
                inParams.AppendFormat("({0})", (int)SystemCategory.One); 
                break;
             }
             case WebCategory.Two:
             {
              inParams.AppendFormat("({0},{1},{2})", (int)SystemCategory.Two,
                                              (int)SystemCategory.Three,
                                              (int)SystemCategory.Four);
              break;
             }
            case WebCategory.Three:
            {
                 inParams.AppendFormat("({0})", (int)SystemCategory.Five);
                 break;
            }
          case WebCategory.Four:
           {
                 inParams.AppendFormat("({0},{1},{2})", (int)SystemCategory.Six,
                                        (int)SystemCategory.Two,
                                        (int)SystemCategory.Three);
                 break;
           }
       }// End Switch
      query = string.Format(query, inParams.ToString()); //Append place holder for IN clause
    }// End If
    cmd.CommandText = query;
    DataSet ds = new DataSet();
    SQLiteDataAdapter da = new SQLiteDataAdapter(cmd);
    da.Fill(ds);    // This call does not return.
} 
```

该查询适用于 Sqlite Shell 和相同的数据库。

有没有人遇到过紧凑框架的类似问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T05:43:24.243

*在*将查询变量分配为 CommandText*之前*以及添加任何其他参数之前，您必须构建您的 inParams 。我认为当您分配给 .CommandText 属性时，它正在重置您的参数集合。将查询变量分配给 CommandText 必须是您做的*第一*件事。

# intellij-idea - 使用 IDEA Intellij 在 Ubuntu 12.04 上设置 YourKit Java 分析器时缺少什么？

> ID：14158426
> 
> 赞同：0
> 
> 时间：2013-01-04T13:49:58.280
> 
> 标签：intellij-idea, yourkit

设置 YourKit Java Profiler 时出现此错误

```
Error occurred during initialization of VM
Could not find agent library /home/adelin/Downloads/YourKitJavaProfiler9.0/yjp-9.0.9/bin/linux-x86-32/libyjpagent.so in absolute path, with error: /home/adelin/Downloads/YourKitJavaProfiler9.0/yjp-9.0.9/bin/linux-x86-32/libyjpagent.so: wrong ELF class: ELFCLASS32 (Possible cause: architecture word width mismatch) 
```

我的 JVM 是 64 位的。我在这里缺少东西吗？

我有一些 E2E 测试涉及线程、套接字和 SiteBricks Http webclients。现在我的测试运行非常慢，每次测试大约 6 秒，这非常慢。我想使用分析器来观察测试在哪里变慢了。我的测试框架是TestNG。当我按右键单击并按“配置文件”时，我收到上述消息。

感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T16:44:23.783

尝试链接到 linux-x86-64 版本：

/home/adelin/Downloads/YourKitJavaProfiler9.0/yjp-9.0.9/bin/linux-x86-64/libyjpagent.so

如果不存在，请尝试从以下位置重新下载：

[http://www.yourkit.com/download/older.html](http://www.yourkit.com/download/older.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-07T03:12:14.273

阿德林，

.so 是“共享对象”，它们包含已编译的代码。将它们视为 Microsoft World 中的 .dll。如果将它们放在路径中，JVM 的本机部分肯定会链接到它们。

干杯。

# facebook - 如何为我的 Web 应用程序创建自定义 Like 按钮？

> ID：14158427
> 
> 赞同：1
> 
> 时间：2013-01-04T13:49:59.120
> 
> 标签：facebook, button, facebook-like, custom-controls

Flipboard（ios / Android）有一个Facebook“喜欢”按钮，我试图模仿它但不知道从哪里开始？ ![Flipboard Facebook 赞](../Images/b9e95e34322f3977702b11c15f03d770.png)

我正在考虑使用 CSS 将图像放在通用“喜欢”按钮的顶部。有人有其他想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T15:11:57.703

你通常不应该这样做（改变like按钮的视觉方面）这个线程中的答案非常准确：[Custom styled facebook like button](https://stackoverflow.com/questions/13431249/how-can-i-add-a-custom-styled-facebook-like-share-button-on-an-input-field?rq=1)

您可以做的是为您的网站创建一个 Facebook 应用程序，当用户触发您的共享功能之一时请求用户授权并将开放图故事发布到 Facebook。

这样，您将拥有更多的选项清单，这些选项比普通的喜欢更“时髦和吸引人”（无论如何我也会将通用的喜欢按钮保留在那里）并且您可以完全控制视觉效果。

# c++ - 按值返回时未调用应对构造函数

> ID：14158430
> 
> 赞同：1
> 
> 时间：2013-01-04T13:50:05.670
> 
> 标签：c++, gcc, g++, clang

> **可能重复：**
> [什么是复制省略和返回值优化？](https://stackoverflow.com/questions/12953127/what-are-copy-elision-and-return-value-optimization)
> [为什么不调用复制构造函数](https://stackoverflow.com/questions/14154290/why-isnt-the-copy-constructor-called)

为什么在下面的代码中 gcc 和 clang 都没有调用 A 类的复制构造函数一次（只有一个对象被创建为析构函数只被调用一次）。

```
class A
{
public:
  explicit A()
  {
    std::cout << "A()" << std::endl;
  }
  A(const A& toCp)
  {
    std::cout << "A(const A&)" << std::endl;
  }
  ~A()
  {
    std::cout << "~A()" << std::endl;
  }
  A& operator=(const A& toCp)
  {
    std::cout << "A::operator=" << std::endl;
  }
};

A fun()
{
  A x;
  std::cout << "fun" << std::endl;
  return x;
}

int main()
{
  A u = fun();
  return 0;
} 
```

这段代码的打印输出是：

```
A()
fun
~A() 
```

我认为应该调用它的复制构造函数 2 次（一次用于返回值，一次用于行内）`A u = fun(7);`

我在这段代码中使用了 gcc 和 clang 和 -O0。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T14:21:58.167

编译器使用**复制省略**来避免函数返回值的复制（或移动）`fun()`。这是一个标准且微不足道的优化，几乎总是会被调用（取决于编译器及其优化设置）。即使省略的复制（或移动）构造函数会产生副作用（如您的情况，它写入标准输出），编译器也可能会执行此操作。

*note*复制省略不仅限于`inline`函数，即使函数定义位于不同的编译单元中，也会使用。

# ruby - 如何过滤 Sinatra 记录器中的密码字段？

> ID：14158436
> 
> 赞同：2
> 
> 时间：2013-01-04T13:50:32.003
> 
> 标签：ruby, logging, filter, sinatra

如果我发送表单的参数，例如`'password'`，在 Sinatra 的日志中，我可以看到：

```
{"api_session":"da1123f8c5edd2d3b7c8b43a4e93b7c2","password":"12323"} 
```

如何使用星号隐藏密码，例如`"******"`？

例如，在 Rails 中，我可以启用参数过滤器：

```
class ApplicationController < ActionController::Base
  filter_parameter_logging :password 
```

我可以在 Sinatra 中做同样的事情吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T14:50:14.970

您没有展示如何在 HTML 中定义表单，但我怀疑您是否使用`method="get"`或未指定浏览器应如何将数据发送到 Sinatra 并使其默认为`get`.

如果我这样定义表格：

```
<html>
  <body>
    <form action="do_form" method="get">
      User: <input name="user"><br>
      Passwd: <input type=password name="passwd"><br>
      <input type="submit">
    </form>
  </body>
</html> 
```

以此作为我的处理程序：

```
get '/do_form' do
  puts "got user/password"
end 
```

当我使用浏览器提交表单时，我会在控制台中看到这一点：

```
got user/passwd
127.0.0.1 - - [04/Jan/2013 07:43:24] "GET /do_form?user=foo&passwd=bar HTTP/1.1" 200 - 0.0041 
```

Sinatra 认为输出接收到的参数是安全的。如果我定义如下形式，也会发生同样的事情：

```
<form action="do_form"> 
```

相反，如果我将其定义为：

```
<form action="do_form" method="post"> 
```

并使用`post`处理程序而不是`get`：

```
post '/do_form' do
  puts "got user/passwd"
end 
```

我在日志中看到了这一点：

```
got user/passwd
127.0.0.1 - - [04/Jan/2013 07:49:24] "POST /do_form HTTP/1.1" 200 - 0.0015 
```

这是我用来测试的代码：

```
require 'sinatra'

get '/' do
'
<html>
  <body>
    <!-- <form action="do_form"> -->
    <!-- <form action="do_form" method="get"> -->
    <form action="do_form" method="post">
      User: <input name="user"><br>
      Passwd: <input type=password name="passwd"><br>
      <input type="submit">
    </form>
  </body>
</html>
'
end

get '/do_form' do
  puts "got user/passwd"
end

post '/do_form' do
  puts "got user/passwd"
end 
```

只需在`get '/'`处理程序中更改表单的定义即可尝试使用`post`或`get`。

发送`get`表单时，请求会将所有参数放入 URL。Sinatra 会在其日志中输出这些参数是可以理解的，因为它们是按照表单的`get`定义“以明文形式”发送的。

更改要使用的表单`post`会将参数放入传入数据的主体中，而不是作为 URL 的一部分，从而更有效地隐藏它们以防窥探。Sinatra 的响应是在其输出中不显示参数。

作为 Web 开发人员，您必须了解使用其中一个`get`或`post`作为表单的`method`. 如果您不负责表单，那么任何人都应该知道使用的效果，`get`并且它会将参数放入 URL 中。`password`字段或任何不可见或应该不可见的字段`hidden`不能在表单中使用`method="get"`，因为这是 HTML 和浏览器的预期和定义行为。无论哪种方式，修复表单，其余问题将得到修复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T16:23:13.703

我用另一种方式解决了这个问题。

我不使用表格，我发送带有数据的 'put' ajax 请求。

我错过了 Sinatra 写的只记录我的打印输出。我可以捕获所有必要的参数，然后过滤它们：

```
put '/api/*' do |path|
  data = request.body.read.to_s
  filtered_data = data
  filtered_data[:password] = '********'
  puts filtered_data #into log
  #... 
```

谢谢你，丁！

# rest - URI设计随机资源

> ID：14158437
> 
> 赞同：1
> 
> 时间：2013-01-04T13:50:33.883
> 
> 标签：rest, url-rewriting, uri

假设我有一个关于动物的网站，并且我有一个集合如下：

```
/animals/ 
```

要返回特定的动物，您会这样做：

```
/animals/tiger 
```

现在我想设计我的 uri 来返回一个随机的动物。最佳做法是什么？那是通过使用查询参数吗？或通过使用：

```
/animals/random 
```

但由于这是一个可以应用于各种集合的功能，我可能会将其放在它自己的资源上？喜欢：

```
/random?type=animal 
```

/詹姆士

# filter - 检查网格是否被对象过滤

> ID：14158438
> 
> 赞同：0
> 
> 时间：2013-01-04T13:50:38.180
> 
> 标签：filter, devexpress, xtragrid

我`XtraGrid`在 WinForm 中的 an 上方放置了单选按钮，并在用户单击特定按钮时将过滤器应用于特定列。即使用户手动操作过滤器，我也需要使按钮与过滤器保持同步。

我可以捕捉到该`ColumnFilterChanged`事件，但我不知道如何检查特定对象是否包含在 user-created`ColumnFilterInfo`中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T09:51:58.677

您可以`gridView.RowFilter`在该事件中获取并从字符串中获取所有数据。

它可能不漂亮，但它有效......

# java - 线程类中的编译错误

> ID：14158450
> 
> 赞同：0
> 
> 时间：2013-01-04T13:51:44.907
> 
> 标签：java, abstract

我有一个`class`（下面）但是每当我尝试编译代码时，我都会收到一个错误，指出`class`is not `abstract`。

谁能解释这意味着什么以及我需要做些什么不同的事情？

```
package huntermessenger;

import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.net.Socket;
import java.util.Scanner;

public class HunterClient implements Runnable {
    private static final String SERVER_IP = "127.0.0.1";
    private static final int SERVER_PORT = 5000;
    Scanner scanner = new Scanner(System.in);   //to read text from the console
    Socket socket = null;

    public void Run() {
        try {
            socket = new Socket(SERVER_IP, SERVER_PORT);
            System.out.println("Connected to server");
        } 
        catch (Exception ex) {
            System.out.println("Error connecting to server: " + ex.getMessage());
        }
        ObjectInputStream in = null;
        ObjectOutputStream out = null;
        while (true) {
            try {
                if (out == null) {
                    out = new ObjectOutputStream(socket.getOutputStream());
                }

                //read a string
                System.out.println("Enter a message: ");
                String str = scanner.next();

                //send it to server
                out.writeObject(new Message(str));
                out.flush();

                //get the reply from the server
                if (in == null) {
                    in = new ObjectInputStream(socket.getInputStream());
                }
                Message message = (Message) in.readObject();
                System.out.println("Server said: " + message.getMessage());

            } 
            catch (Exception ex) {
                System.out.println("Error: " + ex);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T13:54:53.463

java区分大小写：

```
public void Run() { 
```

不一样

```
public void run() { 
```

你需要执行`run()`not `Run()`。

只需将其更改为

```
public void run() { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T13:54:58.580

```
public void Run() {} 
```

Run() 不应大写。run() 是一个抽象方法，因为您正在实现 Run() 而不是覆盖它。因此，您的类仍然有一个抽象方法，但该类不是抽象的，因此会出现错误。

# wcf - WCF 托管 - 决定因素

> ID：14158452
> 
> 赞同：1
> 
> 时间：2013-01-04T13:51:52.220
> 
> 标签：wcf, web-services, windows-services, soa

我做了谷歌这个。找不到任何具体的答案。
我必须考虑托管 WCF 服务的决定性因素（通常没有特定情况）。

```
1\. IIS
2\. Windows Service
3\. WAS
4\. Self Hosting 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T15:10:21.650

自托管的好处：

*   支持所有协议
*   支持任何服务地址（不需要`.svc`显示在服务地址中的文件）
*   当 IIS 意外回收应用程序池时没有“惊喜”
*   更好地控制服务的生命周期以及如何设置它等。

缺点：

*   启动和运行可能有点复杂

* * *

在 IIS 中托管的好处：

*   设置更简单，运行更容易

IIS的缺点：

*   IIS 6 (Win Server 2003) 除了 HTTP 不支持任何东西
*   取决于`.svc`服务地址中显示的文件
*   该`*.svc`文件的位置决定了大部分服务地址

就个人而言，对于演示应用程序以外的任何东西，我都会选择自托管；一旦你完成了一次或两次，它就不再是问题了，它只是给你更多的灵活性和对整个 WCF 服务托管的更多控制。

# mysql - 尽管列签名相同，但 MySQL 无法添加外键

> ID：14158453
> 
> 赞同：0
> 
> 时间：2013-01-04T13:51:54.960
> 
> 标签：mysql, foreign-keys, innodb, errno

我正在创建新数据库，我想创建一个表`Supplier_StockOut`：

```
CREATE TABLE StockOut_Supplier (
  idStockOut_Supplier INT NOT NULL,
  idStockOut INT NOT NULL,
  idSupplier INT NOT NULL,
  idTransactionType INT NOT NULL,
    FOREIGN KEY (idSupplier) REFERENCES Suppliers(idSupplier)
    ON DELETE SET NULL
    ON UPDATE CASCADE,
  FOREIGN KEY (idStockOut) REFERENCES StockOuts (idStockOut)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  FOREIGN KEY (idTransactionType) REFERENCES TransactionTypes(idTransactionType)
    ON DELETE SET NULL
    ON UPDATE CASCADE
) ENGINE=innodb DEFAULT CHARACTER SET=utf8 COLLATE=utf8_polish_ci; 
```

结果：

```
ERROR 1005 (HY000): Can't create table 'stocktest.stockout_supplier' (errno: 150) 
```

这些关键引用的所有表都已正确定义。例如：

```
CREATE TABLE Suppliers (
  idSupplier INT NOT NULL auto_increment PRIMARY KEY,
  name VARCHAR(64) NOT NULL
) ENGINE=innodb DEFAULT CHARACTER SET=utf8 COLLATE=utf8_polish_ci; 
```

即使我只留下一个外键（例如给供应商） - 结果将保持不变。

当我尝试创建没有外键的表并`ALTER TABLE`稍后添加它们时，也会发生同样的事情。我注意到我可以在没有`ON DELETE ON UPDATE`子句的情况下添加它们，但不能与它们一起添加。

编辑：有很多 InnoDB 数据库在这台服务器上使用了很多外键，所以我猜这不是服务器配置相关的问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T14:10:30.373

在您的`StockOut_Supplier`表中，列`idSupplier`和`idTransactionType`设置为不接受`NULL`s 而是通过外键声明，您告诉它`NULL`在删除主键时将其值设置为。

您可能希望将它们设置为`RESTRICT`或`CASCADE`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T14:23:57.680

ON DELETE SET NULL 是问题，因为您在 idSupplier 上设置了 NOT NULL 但是尝试像这样运行脚本：

```
CREATE TABLE StockOut_Supplier (
  idSupplier INT NOT NULL,
  CONSTRAINT FOREIGN KEY (idSupplier) REFERENCES Suppliers(idSupplier)
    ON UPDATE CASCADE
);

ALTER TABLE StockOut_Supplier
  ADD FOREIGN KEY (idSupplier) REFERENCES Suppliers(idSupplier)
    ON DELETE SET NULL; 
```

# javascript - Microsoft JScript 运行时错误：无法获取属性“radalert”的值：对象为空或未定义 IE8

> ID：14158455
> 
> 赞同：0
> 
> 时间：2013-01-04T13:51:58.803
> 
> 标签：javascript, asp.net, telerik, asp.net-ajax, client-side-scripting

我在 ASP.NET 应用程序的代码隐藏文件中通过服务器端 Java 脚本调用 RadAlert。此 RadAlert 在 IE7、IE9、Chrome 和 Firefox 上运行良好，但 IE8 抛出异常“Microsoft JScript 运行时错误：无法获取属性“radalert”的值：对象为空或未定义”。请任何人告诉我如何解决这个问题。以下是代码

```
string dialogMessage = "Record " + Session["SavedRecordID"].ToString() + " Saved Successfully";
string radalertscript = "<script language='javascript'> window.onload = function() {var oWnd = radalert('" + dialogMessage + "', 400, 140, 'Saved'); window.setTimeout(function () { oWnd.Close(); }, 3000);} </script>";
Page.ClientScript.RegisterStartupScript(this.GetType(), "radalert", radalertscript); 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T14:24:05.057

在 IE 8 中，radalert 对象的构建可能发生得太晚了。由于 ASP.NET AJAX 组件可能使用不同的生命周期，您也可以尝试（至少消除我所说的是否是实际问题） ：

```
Sys.Application.add_load(function(sender, e) {
  var oWnd = radalert('" + dialogMessage + "', 400, 140, 'Saved');
  window.setTimeout(function () { oWnd.Close(); }, 3000);}
}); 
```

您应该能够从服务器渲染它并且它的功能相同。

# javascript - 隐藏 div 直到滚动

> ID：14158459
> 
> 赞同：0
> 
> 时间：2013-01-04T13:52:21.020
> 
> 标签：javascript, jquery, html

我正在努力做到这一点，这样当我在页面顶部`<DIV>`时，它是不可见的，但是每当我滚动到它时，它就会弹出一个链接，回到页面顶部。使用 JavaScript 会更容易，还是有办法只使用 HTML？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-04T14:06:49.833

那么没有Javascript就没有办法（我知道）这样做。

假设 HTML 是这样的：

```
<button id="top">Top</button> 
```

您可以使用以下代码：

```
$(window).scroll(function() { // when the page is scrolled run this
    if($(this).scrollTop() != 0) { // if you're NOT at the top
        $('#top').fadeIn("fast"); // fade in
    } else { // else
        $('#top').fadeOut("fast"); // fade out
    }
});

$('#top').click(function() { // when the button is clicked
    $('body,html').animate({scrollTop:0},500); // return to the top with a nice animation
}); 
```

您仍然可以在此处使用“位置：固定”，因为没有可见性，用户无法看到或单击它。

# database - Cypher 查询以匹配强双向关系并按 Neo4j 中的属性值过滤

> ID：14158460
> 
> 赞同：3
> 
> 时间：2013-01-04T13:52:23.150
> 
> 标签：database, nosql, neo4j, cypher

我想在 Neo4j DB 中找到一个只有强双向关系的子图。

假设关系是LOVES，属性是Kisses，那么我只想找到一个双方亲吻对方超过2次的子图。

```
START n=node(*)
MATCH n-[r1:LOVES]->friend<-[r2:LOVES]-n
WHERE r1.Kisses > 2 and r2.Kisses > 2
RETURN n, friend, r1, r2
LIMIT 20 
```

问题是查询似乎在 3M 节点 30M 关系图、32GB RAM、四核系统上永远运行，neo4j 最大堆为 16GB（neo4j 计算器建议 8GB）。

我怀疑，某处隐藏着一个无限循环。

操作系统：Ubuntu 12.04.1 LTS 服务器

软：neo4j-community-1.8.1

java版本“1.7.0_10”（neo4j start 说使用JDK6）

Java(TM) SE 运行时环境 (build 1.7.0_10-b18)

Java HotSpot(TM) 64 位服务器 VM（内部版本 23.6-b04，混合模式）

编辑：匹配不正确，应该是

```
MATCH n-[r1:LOVES]->friend-[r2:LOVES]->n 
```

更新：更正上述语义后，我仍然无法在 5 分钟内获得完整结果。

爱是唯一的关系类型，大约 10-20% 或关系有相应的另一种方式。

我的最终目标是找到合适的 Kiss 值，这样我就剩下 <100k 个节点（以及所有合适的 LOVES 关系）并且可以导出这个子图。

这是我正在尝试做的算法的伪代码：

```
let E be edge.list to be processed
let myedgelist be empty list
for e in E:
  if e.n1 > e.n2: # so we do not look twice
    continue
  if not exist(e[n2][n1]): # this is where lookup can be a problem O(1) for hash, O(logn) for sorted, O(n) for something random)
    continue
  if e.kisses > 2 and e[n2][n1].kisses > 2:
    add e to myedgelist
    add e[n2][n1] to myedgelist
return myedgelist 
```

该算法最多应该运行edgecount * log(edgecount)，除非neo4j中没有有效的方法来查找反向关系的存在，这看起来相当不可思议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T16:47:49.037

您应该在 1.9 中尝试这一点——密码匹配器已针对此类查询进行了显着优化。尽管避免使用节点（*）会很好。你所有的节点都是人吗？如果不是，您可能想要进行索引查询以仅获取相关的人员节点。

`start n=node:people("name:*")`...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T18:18:04.750

你能尝试制作`friend`目标节点吗

```
START friend=node(*)
MATCH n-[r1:LOVES]->friend-[r2:LOVES]->n
WHERE r1.Kisses > 2 and r2.Kisses > 2
RETURN n, friend, r1, r2
LIMIT 20 
```

您可以尝试将比赛分成两部分

```
START n=node(*)
MATCH n-[r1:LOVES]->friend
WHERE r1.Kisses > 2
WITH n,r1,friend
MATCH n<-[r2:LOVES]-friend
WHERE r2.Kisses > 2
RETURN n, friend, r1, r2
LIMIT 20 
```

或者只用匹配做一半的查询，用过滤器做下半部分

```
START n=node(*) 
MATCH n-[r1:LOVES]->friend 
WHERE r1.Kisses > 2 
 AND ALL(r2 in extract(
              p in friend-[:LOVES]->n : head(rels(p))) 
         WHERE r2.Kisses > 2) 
RETURN n, friend, r1
LIMIT 20 
```

这是一个尝试查询的控制台： http: [//console.neo4j.org/r/tqvb1p](http://console.neo4j.org/r/tqvb1p)

但毕竟你正在处理 3M 节点，匹配可能会爆炸到 3M^2

# python - SQLObject：如何从表中删除前 N 个对象？

> ID：14158465
> 
> 赞同：2
> 
> 时间：2013-01-04T13:52:42.077
> 
> 标签：python, sql, orm, sqlobject

我有一个跟踪项目并使用`SQLObject`python的应用程序`ORM`。在某个时间点，应用程序会检查表是否不是太大，如果表中的项目超过 10000 个，它会删除第一个`N`项目，因此表中的项目为 10000 个。什么是优雅而有效的方式来写下这个`SQLObject`？我所追求的所有解决方案都是缓慢而尴尬的:(。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T17:54:42.690

我个人没用过`SQLOBJECT`。所以这是一个简单的删除语句，基于`ordering records by inserted date`，最旧的`N`记录将被删除并且它在`MYSQL`. [`limit`由于这个错误](http://forums.mysql.com/read.php?98,28212,28212#msg-28212)，无法使用变量设置子句，所以我使用了最直接的方法。

对于这个样本，我使用了阈值，`6`因为它很难`10000`......

*   [SQLFIDDLE](http://sqlfiddle.com/#!2/3f58c/1)

样品表：

```
COL1    COL2
1       112
2       0
3       20
4       10
5       100
6       30
7       200
8       108

set @table_count:=0;
set @excess_count:=0;

select count(*) into @table_count
from tablex;

select (case when @table_count > 6
then (@table_count -6)
else 0 end) into @excess_count
;

select * 
from tablex
where col1 between 1 and @excess_count
order by col1 asc
; 
```

选择的记录：

```
COL1    COL2
1       112
2       0 
```

以上查询对记录进行排序，`col1`您可以根据自己的需要进行更改。所以删除查询可以建立在最后一个`select`. 所以最好写一个存储过程......因为这是一堆*糟糕*的语句......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-01T15:09:35.853

我知道这个帖子很旧，但我想发布一个条目，以防有人通过谷歌搜索找到它，就像我一样。

我有一个类似的问题，我需要自定义删除调用。SQLObject 为您提供了两个选项来创建带有自定义 where 子句的 SQL DELETE：

*   使用 SQLBuilder 类构建它（参见[http://sqlobject.org/SQLBuilder.html#delete](http://sqlobject.org/SQLBuilder.html#delete)）
*   直接调用 SQL 语句

我选择了第二个选项，因为它更灵活、更精简：

```
dsqlMetricseries._connection.query("DELETE FROM dsql_metricseries WHERE metric_id = %s"%metric_id) 
```

*   dsqlMetricseries : SQLObject 子类，代表数据库表的模型类
*   _connection : SQLObject 内部数据库连接的句柄
*   query : 用于执行任何 SQL 语句的 SQLObject 方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-16T23:10:19.707

如上所述，我意识到这是一篇旧帖子，但其他观众可能会觉得这很有用。我不确定切片选择的效率如何（假设记录 id 在您添加记录时上升）。

```
myselect = tableobject.select(orderBy=tableobject.q.id)
if myselect.count() > 10000:
    tableobject.deleteMany(tableobject.q.id<myselect[10001].id) 
```

未经测试，但我经常使用 deleteMany()。

# java - 简化中文 (GB2312) 字符问题 - Solaris Weblogic 10.3

> ID：14158468
> 
> 赞同：0
> 
> 时间：2013-01-04T13:52:52.970
> 
> 标签：java, utf-8, character-encoding, weblogic, gb2312

我正在尝试从数据库中获取和更新简体中文字符（GB2312），更新部分在 weblogic 10.3 windows 机器中工作正常，但在 weblogic 10.3 Solaris 机器中失败（垃圾字符），但获取和显示中文字符在两种环境

**获取 DAO**

```
 while (rs.next()) {           
                    Base64 base64 = new Base64();
                    byte[] notesByte = base64.encode(rs
                            .getBytes("notes"));                
    } 
```

**用户界面（安卓）**

```
 byte[] notes= Base64.decode(notesByteStr , Base64.DEFAULT);
       notesText.setText(new String(notes, "GB2312")); // Displaying chines char

     notesByte=  Base64.encode(notesText.getText().toString().trim().getBytes("GB2312"),  Base64.DEFAULT) // send to db 
```

**更新 DAO**

```
 getSession().createSQLQuery(notesUpdateQuery)
                    .setParameter(0, new String(base64.decode(notesByte)))
                    .executeUpdate(); 
```

**注意**：源 txt 文件编码：UTF-8

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T13:59:03.670

嗯，是的，在你的 Update DAO 中看看这个：

```
new String(base64.decode(notesByte)) 
```

这是使用平台默认编码将 base64 解码的字节数组转换为字符串。base64 解码的字节数组实际上是以 GB2312 编码的文本 -*而不是*平台默认编码。

要正确转换它，您需要在任何地方指定相同的编码：

```
new String(base64.decode(notesByte), "GB2312") 
```

# javascript - 循环中的 document.getElementById

> ID：14158469
> 
> 赞同：1
> 
> 时间：2013-01-04T13:53:03.927
> 
> 标签：javascript

假设我想在下面的示例中更改所有具有“the_class”类的 div 的类。在循环长列表（300 li 和许多嵌套的 div 标签）时添加编号的 id 是否是一种好方法。或者在这种情况下 document.getElementById 会慢吗？

因为我控制了 HTML/PHP，所以添加 ID 对我来说不是问题。但我认为“document.getElementById”每次都会遍历整个文档。也许其他一些方法不会每次都循环遍历整个过程，因此会更快？

**JAVASCRIPT**

```
var data_length = document.getElementById('the_ul').getAttribute('data-length'),
    i = 0;
while(i++ < data_length) {
    document.getElementById('id_name' + i).className = 'a_new_class';
} 
```

**HTML**

```
<ul id=the_ul data-length="2">
    <li>
        <div>
            <div>
                <div>content1</div>
                <div id=id_name1 class=the_class>content2</div>
                <div>content3</div>
            </div>
        </div>
    </li>
    <li>
        <div>
            <div>
                <div>content1</div>
                <div id=id_name2 class=the_class>content2</div>
                <div>content3</div>
            </div>
        </div>
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T14:23:32.313

另一种选择是`document.getElementsByClassName`

```
var el = document.getElementsByClassName("the_class")
for (var i = 0, ilen = el.length - 1; i < ilen; i++) {
    el[i].className = "a_new_class"
} 
```

或者`document.querySelectorAll`

```
var el = document.querySelectorAll (".the_class")
for (var i = 0, ilen = el.length - 1; i < ilen; i++) {
    el[i].className = "a_new_class"
} 
```

根据一个简单的[Jsperf](http://jsperf.com/elements-iterating/3)测试，`document.getElementsByClassName`似乎有最好的性能。

# c++ - Qml 访问列表视图项

> ID：14158470
> 
> 赞同：2
> 
> 时间：2013-01-04T13:53:07.357
> 
> 标签：c++, qt, qml

我在 QML 中有带有自定义委托的 ListView 项目：

```
Component{

    id: contactDelegate

    Item
    {
        id: wrapper;
        width: 306; height: 40

        FlipableImage
        {
            id: flipableImage
            width: 30
            height: 30

            anchors.verticalCenter: wrapper.verticalCenter;
            anchors.left:  wrapper.left
            anchors.leftMargin: 10

            frontImage: serverIconSource;
            backImage: "qrc:/images/resources/images/log.png";
        }

        Column
        {
            anchors.left: flipableImage.right
            anchors.leftMargin: 10
            Text
            {
                font.family: helveticaNeueBoldFont.name
                font.pixelSize: 14
                text: serverName;
            }

            Text
            {
                font.family: helveticaNeueFont.name
                font.pixelSize: 14
                text: serverLogin;
            }
        }

        ConnectionStateImage
        {
            id: stateImage
            state: "noState"
            anchors.verticalCenter: parent.verticalCenter;
            anchors.right: wrapper.right
            anchors.rightMargin: 10
            visible: itemMouseArea.containsMouse;
        }

        MouseArea
        {
            id: mouseArea;
            anchors.fill: flipableImage
            hoverEnabled: true;
            z: 1
            onEntered:
            {
                flipableImage.flipped = !flipableImage.flipped;
            }
            onExited:
            {
                flipableImage.flipped = !flipableImage.flipped;
            }
        }
    }
} 
```

鼠标悬停flipableImage翻转。但我需要在模型或 QDeclarativeView 的事件上手动翻转它。如何导航到列表视图中的项目以更改 FlipableImage 的属性。从 qml 或 C++ 导航对我来说并不重要。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T17:36:14.263

QML 列表视图元素的特殊属性之一是它只创建一次可见的委托项目。一旦它们移出视口，它们就会被销毁。

因此，无法知道代表源模型的一个特定项目是否在特定时间实际存在。这也是为什么没有`itemAt(index)`像`Repeater`元素那样的方法的原因。

解决问题的最佳方法是在委托组件本身中以声明方式解决它：

*   删除鼠标区​​域中的显式分配`flipableImage.flipped`，实际上根本不需要所有事件处理程序。

*   给组件一个布尔[属性](http://qt-project.org/doc/qt-4.8/propertybinding.html#properties)以指示该项目是否被强制翻转，根据您的实际逻辑在列表视图中分配属性的值。由于上述原因，您也必须以声明方式执行此操作。一个好的策略可能是将`index`属性与保存索引的变量进行比较。

*   最后以声明方式计算翻转状态：

    ```
    Item {
         id: wrapper
         property bool manuallyFlipped: false       
         /* ... */
         FlipableImage {
             /* ... */
             flipped: mouseArea.containsMouse || wrapper.manuallyFlipped
         }
         /* ... */
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T18:54:05.570

如果我是你，我不会在 QML 委托中保存项目的状态。我会从中派生出我自己的模型`QAbstractListModel`，将它从 C++ 公开到 QML 并在那里保持任何项目的状态。如何暴露模型写[在这里](http://qt-project.org/doc/qt-4.8/qdeclarativemodels.html)。要设置列表中项目的值，您必须导出到模型类的 QML C++ 方法，因为您将无法通过 QML 中的赋值来设置项目模型值（至少据我所知）。

```
MouseArea {
//...
    onEntered {
        myModel.itemAtIndexEntered(currentIndex);
    }
//...
} 
```

要将 C++ 函数导出到 qml，您必须将它们作为插槽或添加`Q_INVOKABLE`到它们的声明中。您可以[在此处](http://qt-project.org/doc/qt-4.8/qml-extending.html)找到更多详细信息。

# linux - Linux RPM 安装包脚本无法更改所需文件的所有权

> ID：14158471
> 
> 赞同：0
> 
> 时间：2013-01-04T13:53:12.187
> 
> 标签：linux, shell, installation, rpm

测试 RPM 安装包 shell 脚本的使用。

在 shell 脚本中包含 linux 命令以创建新用户并将 /etc/hosts 的所有权更改为该用户。Shell脚本内容：

```
useradd bob
chown bob /etc/hosts 
```

安装 RPM 后，这应该会导致：

```
-rw-r--r--. 1 bob root 331 Jan  4 11:13 /etc/hosts 
```

相反，在 RPM 安装完成后，它仍然存在：

```
-rw-r--r--. 1 root root 331 Jan  4 11:13 /etc/hosts 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T14:00:45.617

`/etc/hosts`拥有，`root`因此脚本可能没有更改该文件的权限。

我不确定您是如何执行脚本的，但是如果它只是一个标准的 shell 脚本，您可以尝试[`sudo`](http://linux.die.net/man/8/sudo)：

```
sudo ./my_script.sh 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T18:40:39.517

（警告：像这样更改系统级文件的所有权是一个安全问题，而不是最聪明的想法。）

你确定脚本运行了吗？您可能想要制作第一行：

```
useradd bob || /bin/true 
```

要不就

```
useradd bob || : 
```

所以它总是返回true。否则`rpm`将中止脚本，例如，如果用户“bob”已经存在。

# c# - 从所有 Xml 节点值中删除空格

> ID：14158472
> 
> 赞同：4
> 
> 时间：2013-01-04T13:53:12.473
> 
> 标签：c#, xml

无论如何都可以在不遍历每个节点的情况下从 XML 节点值中修剪前导和尾随空格。

例如`<someElement> value here </someElement>`会变成`<someElement>value here</someElement>`

以下代码执行此操作，但我不想遍历每个节点，这会影响性能：

```
if (node.ChildNodes.Count == 0)
  node.InnerText = node.InnerText.Trim();
else
{
  for (int i = 0; i < node.ChildNodes.Count; i++)
  {
    TrimLeadingOrTrailingSpacesFromNodeValue(node.ChildNodes[i]);
  }
} 
```

有没有更好的办法？这`LoadOptions.PreserveWhitespace`不是我要找的，我需要修剪 XML 节点中的值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-08T15:50:49.837

这是我写的一个扩展，`Xml.Linq.XElement`但我不确定性能。

[在创建 xml 文档时](http://blogs.msdn.com/b/codejunkie/archive/2008/10/08/xmldocument-vs-xelement-performance.aspx)，我确实发现了 XmlDocument 与 XElement 的性能比较，显示使用 XElement 的性能提高了 6 到 10 倍。我不确定这些结果有多有效，并且它正在创建一个文档与迭代元素和更新值，所以把它当作它的价值。

不管怎样，我想我会分享一个替代方案。也许以后我自己或其他人会有动力分析这种特定用法的性能（删除空格）。

```
 public static class XElementExtensions
  {
    /// <summary>
    /// Trims whitespace from the xml node values.  
    /// DOES NOT trim whitespace outside of values, can use PreserveWhitespace LoadOption when parsing for that.
    /// </summary>
    /// <param name="element"></param>
    public static void TrimWhiteSpaceFromValues(this XElement element)
    {
      foreach (var descendent in element.Descendants())
      {
        if (!descendent.HasElements)
        {
          descendent.SetValue(descendent.Value.Trim());
        }
        else
        {
          descendent.TrimWhiteSpaceFromValues();
        }
      }
    }
  } 
```

示例用法：

```
XElement element = XElement.Parse(xmlDocString);
element.TrimWhiteSpaceFromValues(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T13:56:15.927

如果您正在使用，`XMLDocument`那么您可以尝试：

```
XmlDocument xmlDocument = new XmlDocument();
xmlDocument.preserveWhitespace = false;
xmlDocument.load("my_document.xml"); 
```

如此处所示：[如何从 XmlDocument 中删除空格](https://stackoverflow.com/questions/1231374/how-to-remove-whitespace-from-an-xmldocument)

# java - 同时在Jsoup中组合两个不同的选择器值

> ID：14158473
> 
> 赞同：1
> 
> 时间：2013-01-04T13:53:15.157
> 
> 标签：java, jsoup

![在此处输入图像描述](../Images/1b6b8b8d2eb2a39385b8a64550088b48.png)

如图所示......

这是我的 HTML 表格标签。

我想要做的是结合两个**TD**值，即**1016 TERRACE DR**和**NAPA CA 94559**来自红色框中显示的两个不同**TR**同时意味着仅使用单个选择器语法。

我分别获得这两个值，但想同时获得它们..

你能建议我怎么做吗？

我使用选择器语法来获取实体地址

`td:contains(Entity Address) ~ td`

并用于访问我使用过的实体城市、州、邮编

```
td:contains(Entity City, State) ~ td 
```

当我单独使用它们时，两者都很好用，但我的要求是同时获得它们。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T19:18:23.037

您可以通过将它们分隔在一行中`,`：

```
td:contains(Entity Address) ~ td, td:contains(Entity City, State) ~ td 
```

这将选择与两者之一匹配的元素。

# razor - @Html.Hidden 获取和设置值 razor mvc 4

> ID：14158474
> 
> 赞同：0
> 
> 时间：2013-01-04T13:53:20.640
> 
> 标签：razor, asp.net-mvc-4

@foreach（Model.Comments.Where(x => x.CommentParentID == 0) 中的 var 评论列表）{

```
 <div class="blog-comment">
                        <div class="comment-info">
                            <div class="user-info">
                                @if (commentlist.AllowViewingProfiles)
                                {
                                    <a href="@Url.RouteUrl("CustomerProfile", new { id = commentlist.CustomerId })" class="username">@(commentlist.CustomerName)</a>
                                }
                                else
                                {
                                    <span class="username">@(commentlist.CustomerName)</span>
                                }
                                <div class="avatar">
                                    @if (!String.IsNullOrEmpty(commentlist.CustomerAvatarUrl))
                                    {
                                        <img src="@(commentlist.CustomerAvatarUrl)" class="avatar-img" title="avatar" alt="avatar" />
                                    }
                                </div>
                            </div>
                        </div>
                        <div class="comment-content">
                            <div class="comment-time">
                                @T("Blog.Comments.CreatedOn"): <span class="stat-value">@commentlist.CreatedOn.ToString("g")</span>
                                <div class="buttons">
                                    <input type="submit" id="reply" class="button-1 blog-post-add-comment-button" onclick="return showHide();" />
                                    @Html.Hidden("CommentParentID",@commentlist.Id)
                                </div>
                            </div>
                            <div class="comment-body">
                                @Html.Raw(Nop.Core.Html.HtmlHelper.FormatText(commentlist.CommentText, false, true, false, false, false, false))
                            </div>
                        </div>

                        <div class="clear">
                        </div>
} 
```

我正在使用 @Html.Hidden("CommentParentID",@commentlist.Id) 为 ChildComment 设置值 CommentParentID（如果有）。

在下面的操作中，我想将 CommentParentID 作为参数传递。

```
 @Html.ActionLink("Reply", "BlogCommentReply", "Blog", new { blogPostId = blogPostId, CommentParentID=CommentParentID,captchaValid = Model.AddNewComment.DisplayCaptcha }, null) 
```

我如何在 Controller 中检索此隐藏字段值？或者我怎样才能传递那个值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T13:54:56.460

> 我如何在 Controller 中检索此隐藏字段值？

通过让控制器操作一个与隐藏字段同名的参数：

```
[HttpPost]
public ActionResult SomeAction(string[] commentParentID)
{

} 
```

请注意，这里我使用了一个集合，因为据我所见，您将这些隐藏字段放在一个循环中，这意味着您将有多个具有相同名称的隐藏元素发布到服务器。

您还可以使用这些 Id 的整数数组是整数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T14:08:51.263

最简单的方法是通过像这样的ajax

控制器

```
 public void Method1(string val1, string val2)
        {
            ///do what you want with the values
        } 
```

页面/Ajax 调用

```
 function PostData() {
            $.ajax({
                url: 'Home/Method1',
                data: { val1: $('#hidden1').val(), val2: $('#hidden2').val()},
                success: function (data) {
                }
            });
        } 
```

# arm - ARM Cortex-A8 处理器中的程序执行时间

> ID：14158475
> 
> 赞同：2
> 
> 时间：2013-01-04T13:53:24.633
> 
> 标签：arm, cortex-a8, time-measurement, performancecounter

我正在使用 ARM Cortex-A8 并尝试通过汇编代码从 CCNT 时间计数器中​​读取值。我正在关注这篇文章[如何测量 ARM Cortex-A8 处理器中的程序执行时间？](https://stackoverflow.com/questions/3247373/how-to-measure-program-execution-time-in-arm-cortex-a8-processor/3250835#3250835) . 根据它，在我可以从定时器读取值之前，我必须启用计数器，启用 64 位分频器并清除溢出。这些操作是通过写入适当的寄存器（例如，PMCR（性能单硝基控制寄存器））来执行的。因此，我在循环中打印计数器值以跟踪溢出是如何发生的，并且我有这种行为：

```
1           (starts to incrementing after it was reset to zero)
4650
4858
4943
5023
...
...        (incrementing...)
...
4293939054
4293939128       (overflow happens)
1602570          
1602703
1602788
...
...
4293522911
4293522987
4293523062
4293523137
1186243
1186367
1186453
1186536
1186612
1186686
...
4293536300
4293536377
4293536456
4293536533
4293536612
1199090
1199209
1199295
1199373
1199453
1199530
….
and so forth. 
```

因此，我有一组问题：

a) Linux 内核使用了哪些或上述寄存器？（更多内核版本的信息有多可靠）。改变他们的价值观有多安全？

b) CCNT 频率的准确值是多少，如何获得？不幸的是，我在处理器规格中找不到价值。但是，dmesg 说

```
[ 0.000000] OMAP clocksource: GPTIMER2 at 24000000 Hz
[ 0.000000] sched_clock: 32 bits at 24MHz, resolution 41ns, wraps every 178956ms
[ 0.132855] Switching to clocksource gp timer 
```

但是根据clock_gettime手动识别它给了我7 MHz。那么，为什么它不是预期的 24 MHz？

c）根据我的第一个输出，为什么在溢出后它不是从零开始，而是从大约 1 百万开始？

d) 为什么没有 64 分频器我会得到错误的结果？值开始以这种方式跳跃：

```
...
134110099
134114934
134119656
302352300
302361825
302367135
…
2885588930
2885593776
2885598630
3053958670
3053966752
3053972232
…
261130096
261134909
429343853
429351487
429356735 
```

我会很感激任何帮助。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T15:46:14.873

a) PMU regs 可能被 Linux 内核的 perf 子系统使用（通过 perf 用户空间工具访问）。

b) CCNT 频率是 Cortex-A9 CPU 周期计数器，如果启用分频器，则为周期数/64。因此，带分频器的 7MHz 将是大约 450 MHz 的平均 CPU 时钟。这与 24 MHz 系统时钟是分开的。

c）也许你的过程被安排了。这是整个 CPU 的低级循环计数器，而不仅仅是您的进程。在内核或其他进程中它将继续运行。另一方面，如果您的进程迁移到另一个 CPU，您将访问该 CPU 的周期计数器（甚至可能没有相同的分频器设置）。如果您想要一个一致的计数，您应该将您的进程固定到一个 CPU。

d) 与 (c) 类似的答案，您可能会看到进程调度和迁移的效果。

# java - 在类之间传递 TextView 值时出错

> ID：14158477
> 
> 赞同：0
> 
> 时间：2013-01-04T13:53:24.853
> 
> 标签：java, android, textview

嗨，我是 android 开发的新手....我正在编写一个应用程序，允许用户输入值，它们将用于在图表上绘制。在过去的几天里，我一直被困在一个特定的问题上，似乎无法克服它。用户将输入 2 个值，并从这 3 个值中计算并传递给内部类以绘制在图表上。这些值是 TextView 形式的。我知道大多数代码在我一直在测试它时都有效，而且我很确定错误与 TextView 值有关。下面是用于计算和绘制图表的代码。

```
package com.example.ballanimation;

import java.math.BigDecimal;

import android.app.Activity;
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.RectF;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

 public class calculations extends Activity {

EditText firstVal, secondVal;
TextView resultA, resultB, resultC;
Button button3;
BigDecimal firstNum, secNum;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.calculations_page);

    button3 = (Button) findViewById(R.id.button3);

    firstVal = (EditText) findViewById(R.id.editTXT1);
    secondVal = (EditText) findViewById(R.id.editTXT2);

    resultA = (TextView) findViewById(R.id.result1);
    resultB = (TextView) findViewById(R.id.result2);
    resultC = (TextView) findViewById(R.id.result3);

    button3.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            firstNum = new BigDecimal(firstVal.getText().toString());
            secNum = new BigDecimal(secondVal.getText().toString());
            resultA.setText(firstNum.add(secNum).toString());
            resultB.setText(firstNum.subtract(secNum).toString());
            resultC.setText(firstNum.multiply(secNum).toString());

        }
    });

}

class TestA1 extends View{

    public TestA1(Context context) {
        super(context);
        // TODO Auto-generated constructor stub
    }

    public void onDraw(Canvas canvas){
        super.onDraw(canvas);

        String TestA = resultA.getText().toString();
        String TestB = resultB.getText().toString();
        String TestC = resultC.getText().toString();

        int A = Integer.parseInt(TestA);
        int B = Integer.parseInt(TestB);
        int C = Integer.parseInt(TestC);

        Paint red = new Paint();
        red.setColor(Color.RED);
        red.setStyle(Paint.Style.STROKE);

        Paint black = new Paint();
        black.setColor(Color.BLACK);
        black.setStyle(Paint.Style.STROKE);

        canvas.drawCircle(A, B, C, black);
        canvas.drawCircle(canvas.getWidth()*1/2, canvas.getHeight()*3/8, canvas.getWidth()*475/1000, black);
        canvas.drawCircle(canvas.getWidth()*5/8, canvas.getWidth()*5/8, canvas.getWidth()*349/1000, black);
        canvas.drawCircle(canvas.getWidth()*6/8, canvas.getWidth()*5/8, canvas.getWidth()*228/1000, black);
        canvas.drawCircle(canvas.getWidth()*7/8, canvas.getWidth()*5/8, canvas.getWidth()*103/1000, black);

        canvas.drawLine((canvas.getWidth()-canvas.getWidth()) + 10, (canvas.getHeight()*3)/8, canvas.getWidth() - 10, (canvas.getHeight()*3)/8, black);

        float a, b, c, d, e, f, g, h, i, j, k, l;

        a = 90;   //degrees
        b = 90;
        c = 90;
        d = 50;
        e = 90;
        f = 134;
        g = -90;
        h = -90;
        i = -90;
        j = -50;
        k = -90;
        l = -134;

        RectF arc0 = new RectF();
        RectF arc1 = new RectF();
        RectF arc2 = new RectF();
        RectF arc3 = new RectF();
        RectF arc4 = new RectF();
        RectF arc5 = new RectF();

        /*left  The X coordinate of the left side of the rectangle 
        top  The Y coordinate of the top of the rectangle 
        right  The X coordinate of the right side of the rectangle 
        bottom  The Y coordinate of the bottom of the rectangle  */

        arc0.set(canvas.getWidth()*1/2, canvas.getHeight()*-139/700, canvas.getWidth()*100/69, canvas.getHeight()*3/8); 
        arc1.set(canvas.getWidth()*-6/112, canvas.getHeight()*-80/100, canvas.getWidth()*195/100, canvas.getHeight()*72/192);   
        arc2.set(canvas.getWidth()*7/10, canvas.getHeight()*70/700, canvas.getWidth()*125/100, canvas.getHeight()*3/8); 
        arc3.set(canvas.getWidth()/2, canvas.getHeight()*3/8, canvas.getWidth()*100/69, canvas.getHeight()*91/96);
        arc4.set(canvas.getWidth()*-8/112, canvas.getHeight()*3/8, canvas.getWidth()*195/100, canvas.getHeight()*150/100);
        arc5.set(canvas.getWidth()*7/10, canvas.getHeight()*3/8, canvas.getWidth()*125/100, canvas.getHeight()*65/100);

        /*oval  The bounds of oval used to define the shape and size of the arc 
        startAngle  Starting angle (in degrees) where the arc begins 
        sweepAngle  Sweep angle (in degrees) measured clockwise 
        useCenter  If true, include the center of the oval in the arc, and close it if it is being stroked. This will draw a wedge 
        paint  The paint used to draw the arc  */

        canvas.drawArc(arc0, a, b, false, red);
        canvas.drawArc(arc1, c, d, false, red);
        canvas.drawArc(arc2, e, f, false, red);
        canvas.drawArc(arc3, g, h, false, red);
        canvas.drawArc(arc4, i, j, false, red);
        canvas.drawArc(arc5, k, l, false, red);

    }
} 
```

}

我得到的 logcat 错误是：

```
01-04 13:08:46.764: E/Trace(918): error opening trace file: No such file or directory (2)
01-04 13:08:47.593: D/dalvikvm(918): GC_FOR_ALLOC freed 59K, 3% free 8053K/8259K, paused 105ms, total 108ms
01-04 13:08:47.604: I/dalvikvm-heap(918): Grow heap (frag case) to 8.305MB for 412064-byte allocation
01-04 13:08:47.703: D/dalvikvm(918): GC_FOR_ALLOC freed 1K, 3% free 8454K/8711K, paused 61ms, total 61ms
01-04 13:08:47.764: D/dalvikvm(918): GC_FOR_ALLOC freed 0K, 3% free 8454K/8711K, paused 57ms, total 57ms
01-04 13:08:47.794: I/dalvikvm-heap(918): Grow heap (frag case) to 9.189MB for 928216-byte allocation
01-04 13:08:47.964: D/dalvikvm(918): GC_CONCURRENT freed 0K, 4% free 9361K/9671K, paused 98ms+6ms, total 168ms
01-04 13:08:47.964: D/dalvikvm(918): WAIT_FOR_CONCURRENT_GC blocked 11ms
01-04 13:08:48.344: I/Choreographer(918): Skipped 36 frames!  The application may be doing too much work on its main thread.
01-04 13:08:48.374: D/gralloc_goldfish(918): Emulator without GPU emulation detected.
01-04 13:08:50.025: I/Choreographer(918): Skipped 46 frames!  The application may be doing too much work on its main thread.
01-04 13:08:56.844: I/Choreographer(918): Skipped 38 frames!  The application may be doing too much work on its main thread.
01-04 13:08:57.514: D/AndroidRuntime(918): Shutting down VM
01-04 13:08:57.514: W/dalvikvm(918): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
01-04 13:08:57.614: E/AndroidRuntime(918): FATAL EXCEPTION: main
01-04 13:08:57.614: E/AndroidRuntime(918): java.lang.NullPointerException
01-04 13:08:57.614: E/AndroidRuntime(918):  at com.example.ballanimation.calculations$TestA1.onDraw(calculations.java:68)
01-04 13:08:57.614: E/AndroidRuntime(918):  at android.view.View.draw(View.java:13458)
01-04 13:08:57.614: E/AndroidRuntime(918):  at android.view.View.draw(View.java:13342)
01-04 13:08:57.614: E/AndroidRuntime(918):  at android.view.ViewGroup.drawChild(ViewGroup.java:2929)
01-04 13:08:57.614: E/AndroidRuntime(918):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2799)
01-04 13:08:57.614: E/AndroidRuntime(918):  at android.view.View.draw(View.java:13461)
01-04 13:08:57.614: E/AndroidRuntime(918):  at android.widget.FrameLayout.draw(FrameLayout.java:467)
01-04 13:08:57.614: E/AndroidRuntime(918):  at android.view.View.draw(View.java:13342)
01-04 13:08:57.614: E/AndroidRuntime(918):  at android.view.ViewGroup.drawChild(ViewGroup.java:2929)
01-04 13:08:57.614: E/AndroidRuntime(918):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2799)
01-04 13:08:57.614: E/AndroidRuntime(918):  at android.view.View.draw(View.java:13340)
01-04 13:08:57.614: E/AndroidRuntime(918):  at android.view.ViewGroup.drawChild(ViewGroup.java:2929)
01-04 13:08:57.614: E/AndroidRuntime(918):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2799)
01-04 13:08:57.614: E/AndroidRuntime(918):  at android.view.View.draw(View.java:13461)
01-04 13:08:57.614: E/AndroidRuntime(918):  at android.widget.FrameLayout.draw(FrameLayout.java:467)
01-04 13:08:57.614: E/AndroidRuntime(918):  at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:2183)
01-04 13:08:57.614: E/AndroidRuntime(918):  at android.view.ViewRootImpl.drawSoftware(ViewRootImpl.java:2256)
01-04 13:08:57.614: E/AndroidRuntime(918):  at android.view.ViewRootImpl.draw(ViewRootImpl.java:2151)
01-04 13:08:57.614: E/AndroidRuntime(918):  at android.view.ViewRootImpl.performDraw(ViewRootImpl.java:2019)
01-04 13:08:57.614: E/AndroidRuntime(918):  at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1830)
01-04 13:08:57.614: E/AndroidRuntime(918):  at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:998)
01-04 13:08:57.614: E/AndroidRuntime(918):  at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4212)
01-04 13:08:57.614: E/AndroidRuntime(918):  at android.view.Choreographer$CallbackRecord.run(Choreographer.java:725)
01-04 13:08:57.614: E/AndroidRuntime(918):  at android.view.Choreographer.doCallbacks(Choreographer.java:555)
01-04 13:08:57.614: E/AndroidRuntime(918):  at android.view.Choreographer.doFrame(Choreographer.java:525)
01-04 13:08:57.614: E/AndroidRuntime(918):  at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:711)
01-04 13:08:57.614: E/AndroidRuntime(918):  at android.os.Handler.handleCallback(Handler.java:615)
01-04 13:08:57.614: E/AndroidRuntime(918):  at android.os.Handler.dispatchMessage(Handler.java:92)
01-04 13:08:57.614: E/AndroidRuntime(918):  at android.os.Looper.loop(Looper.java:137)
01-04 13:08:57.614: E/AndroidRuntime(918):  at android.app.ActivityThread.main(ActivityThread.java:4745)
01-04 13:08:57.614: E/AndroidRuntime(918):  at java.lang.reflect.Method.invokeNative(Native Method)
01-04 13:08:57.614: E/AndroidRuntime(918):  at java.lang.reflect.Method.invoke(Method.java:511)
01-04 13:08:57.614: E/AndroidRuntime(918):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
01-04 13:08:57.614: E/AndroidRuntime(918):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
01-04 13:08:57.614: E/AndroidRuntime(918):  at dalvik.system.NativeStart.main(Native Method)
01-04 13:08:59.854: I/Process(918): Sending signal. PID: 918 SIG: 9
01-04 13:09:13.584: E/Trace(960): error opening trace file: No such file or directory (2)
01-04 13:09:14.364: D/dalvikvm(960): GC_FOR_ALLOC freed 63K, 3% free 8053K/8259K, paused 73ms, total 76ms
01-04 13:09:14.364: I/dalvikvm-heap(960): Grow heap (frag case) to 8.305MB for 412064-byte allocation
01-04 13:09:14.445: D/dalvikvm(960): GC_FOR_ALLOC freed 1K, 3% free 8454K/8711K, paused 42ms, total 42ms
01-04 13:09:14.494: D/dalvikvm(960): GC_FOR_ALLOC freed 0K, 3% free 8454K/8711K, paused 48ms, total 48ms
01-04 13:09:14.514: I/dalvikvm-heap(960): Grow heap (frag case) to 9.189MB for 928216-byte allocation
01-04 13:09:14.684: D/dalvikvm(960): GC_CONCURRENT freed 0K, 4% free 9361K/9671K, paused 80ms+18ms, total 162ms
01-04 13:09:15.024: D/gralloc_goldfish(960): Emulator without GPU emulation detected.
01-04 13:09:16.874: I/Choreographer(960): Skipped 94 frames!  The application may be doing too much work on its main thread.
01-04 13:09:20.643: I/Choreographer(960): Skipped 31 frames!  The application may be doing too much work on its main thread.
01-04 13:09:32.394: W/ResourceType(960): No package identifier when getting value for resource number 0x00000064
01-04 13:09:32.394: D/AndroidRuntime(960): Shutting down VM
01-04 13:09:32.394: W/dalvikvm(960): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
01-04 13:09:32.454: E/AndroidRuntime(960): FATAL EXCEPTION: main
01-04 13:09:32.454: E/AndroidRuntime(960): android.content.res.Resources$NotFoundException: String resource ID #0x64
01-04 13:09:32.454: E/AndroidRuntime(960):  at android.content.res.Resources.getText(Resources.java:229)
01-04 13:09:32.454: E/AndroidRuntime(960):  at android.widget.TextView.setText(TextView.java:3620)
01-04 13:09:32.454: E/AndroidRuntime(960):  at com.example.ballanimation.calculations$1.onClick(calculations.java:49)
01-04 13:09:32.454: E/AndroidRuntime(960):  at android.view.View.performClick(View.java:4084)
01-04 13:09:32.454: E/AndroidRuntime(960):  at android.view.View$PerformClick.run(View.java:16966)
01-04 13:09:32.454: E/AndroidRuntime(960):  at android.os.Handler.handleCallback(Handler.java:615)
01-04 13:09:32.454: E/AndroidRuntime(960):  at android.os.Handler.dispatchMessage(Handler.java:92)
01-04 13:09:32.454: E/AndroidRuntime(960):  at android.os.Looper.loop(Looper.java:137)
01-04 13:09:32.454: E/AndroidRuntime(960):  at android.app.ActivityThread.main(ActivityThread.java:4745)
01-04 13:09:32.454: E/AndroidRuntime(960):  at java.lang.reflect.Method.invokeNative(Native Method)
01-04 13:09:32.454: E/AndroidRuntime(960):  at java.lang.reflect.Method.invoke(Method.java:511)
01-04 13:09:32.454: E/AndroidRuntime(960):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
01-04 13:09:32.454: E/AndroidRuntime(960):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
01-04 13:09:32.454: E/AndroidRuntime(960):  at dalvik.system.NativeStart.main(Native Method)
01-04 13:09:34.894: I/Process(960): Sending signal. PID: 960 SIG: 9 
```

如果这是很多信息，我很抱歉，但我真的被困在这个问题上。任何帮助将不胜感激。

问候 P

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T13:57:56.190

由于`View.getText()`从不返回`null`，只有 String `resultA`，`resultB`或者`resultC`可以是`null`：

, `R.id.result1`,在`R.id.result2`里面`R.id.result3`声明 `R.layout.calculations_page`吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T14:15:26.270

我认为问题出在这里

```
android.content.res.Resources$NotFoundException: String resource ID #0x64
01-04 13:09:32.454: E/AndroidRuntime(960):  at android.content.res.Resources.getText(Resources.java:229)
01-04 13:09:32.454: E/AndroidRuntime(960):  at android.widget.TextView.setText(TextView.java:3620)
01-04 13:09:32.454: E/AndroidRuntime(960):  at **com.example.ballanimation.calculations$1.onClick(calculations.java:49)** 
```

只是为了实验改变你的线条

```
 resultA.setText(firstNum.add(secNum).toString());
            resultB.setText(firstNum.subtract(secNum).toString());
            resultC.setText(firstNum.multiply(secNum).toString()); 
```

至

```
 resultA.setText("234234"));
            resultB.setText("123123");
            resultC.setText("1232122"); 
```

并看到差异

# facebook - Facebook如何为Facebook页面标签应用程序设置高度？

> ID：14158484
> 
> 赞同：0
> 
> 时间：2013-01-04T13:53:47.410
> 
> 标签：facebook

如何设置 Facebook 标签应用程序的高度。

我可以看到可以在 Facebook 应用程序上设置高度和宽度。

但在设置下，只能设置 Facebook 标签应用程序的宽度：页面标签宽度：

如何设置页面选项卡（应用程序）的高度？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T14:03:13.473

您必须设置默认大小`setSize()`，
如果您有动态高度内容，则可以使用`setDoneLoading()`并且在页面加载后您可以运行`setAutoGrow()`内部回调。

```
FB.Canvas.setSize({ width: 810, height: 950 });

FB.Canvas.setDoneLoading( function(response) {
    FB.Canvas.setAutoGrow();
}); 
```

# asp.net - 如何使用 contoso 主题在 Orchard CMS(v1.6) 中配置子菜单？

> ID：14158486
> 
> 赞同：3
> 
> 时间：2013-01-04T13:54:14.573
> 
> 标签：asp.net, asp.net-mvc, orchardcms, orchardcms-1.6

Orchard CMS 版本是**1.6**，**Contoso**是当前主题。

导航区的主菜单。

已创建四个菜单项：**News、submeun-1、submenu-2 和 About**

现在我想将菜单结构设置为**submenu-1 和 submenu-2 是 News 的子菜单**。

在果园导航部分，我将 submenu-1 和 submenu-2 拖到新闻中，见下图：

![在此处输入图像描述](../Images/2c5e4fbf1924f0df0a788cf202a3cd9c.png)

但实际上，菜单导航如下所示：

![在此处输入图像描述](../Images/5ed79ad62e610b94903d1fb9ed48a16f.png)

**期望：鼠标悬停新闻菜单项，submenu-1 和 submenu-2 弹出。**

如何修复这个错误？谢谢你们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T05:15:35.547

感谢 Bertrand Le Roy 的建议。

这项工作是通过**更改 contoso 主题 CSS 文件**来完成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-15T20:14:30.190

这将隐藏嵌套菜单，直到您将鼠标悬停在父菜单 li 上：

```
nav .menu li:hover > ul li {
  display: list-item;
}
nav .menu li ul li {
  display: none;
} 
```

# c++ - C ++ 11通过推导类型参数传递成员函数调用？

> ID：14158488
> 
> 赞同：1
> 
> 时间：2013-01-04T13:54:16.740
> 
> 标签：c++, c++11

假设我有一个 C++11 函数：

```
template<class F, class... Args>
void g(F&& f, Args&&... args)
{
    /* ... */

    forward<F>(f)(forward<Args>(args)...);

    /* ... */
} 
```

我有一堂课`X`：

```
struct X
{
    void h();
} 
```

有什么方法可以通过调用`h`特定`X`实例`x`作为参数`f, args`传递`g`？

```
X x = ...;

g(x.h);  // WRONG 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T13:58:52.580

```
g(x.h); // WRONG 
```

这失败了，因为`x.h`它不是一个普通函数，它是一个`this`绑定到`&x`.

添加缺少的绑定有两种可能性：

```
g([&](){x.h();}); // lambda
g(std::bind(&X::h, std::ref(x))); // std::bind 
```

如果您想`h`使用 的副本进行调用，则将lambda 中的`x`更改为`[&]`（类似地，删除）。`[=]``std::ref`

lambda 可能会更快一些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T14:04:58.813

使用`std::mem_fn`：

```
X x = ...;

g(mem_fn(&X::h), x); 
```

# clearcase - 将签出的文件转换为明文中的劫持文件？

> ID：14158498
> 
> 赞同：2
> 
> 时间：2013-01-04T13:54:46.300
> 
> 标签：clearcase

当我编辑它们时，我有许多文件被自动签出（由于我设置 Eclipse 的 ClearCase 插件的方式）。我现在意识到那些应该被劫持。

他们是从签出转换为被劫持的直接方法吗？

我意识到我可以撤消结帐并让它生成 .keep 文件，然后劫持该文件，并将 .keep 文件的内容粘贴到被劫持的文件中，但是我有几十个文件要修复，并且不希望这样做如果可能，解决方法。

TIA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T14:56:39.877

一旦文件被签出，ClearCase（服务器）将记住该文件已签出。
所以`unco`（撤消签出）仍然是最安全的路线，其命令类似于“[如何在上下文菜单中以明文形式递归地创建撤消签出](https://stackoverflow.com/questions/2012572/how-to-create-undo-checkout-recursively-in-clearcase-in-context-menu)”。
（在 Unix 上，[编写脚本更容易](http://anthony-yio.blogspot.fr/2007/05/clearcase-check-inuncheck-out-all.html)）

您只需要使用`unco -keep`, 而不是`unco -rm`, 来生成 .keep 文件。

最后，一个简单的脚本可以：

*   找到所有的 .keep 文件
*   将它们复制到（未签出）相应的文件中：这足以劫持它们。

# c# - Wpf 动画背景颜色

> ID：14158500
> 
> 赞同：61
> 
> 时间：2013-01-04T13:54:51.667
> 
> 标签：c#, wpf, animation, colors, coloranimation

我需要帮助才能做出正确的决定。当某些事件发生时，我需要为我的用户控件的背景颜色设置动画。当它是时，我只想改变背景 1 秒钟，然后再把它转回来。我应该走哪条路？使用彩色动画或计时器，或者可以通过其他方式。

解决了。谢谢大家！这对我很有用：

```
 ColorAnimation animation;
        animation = new ColorAnimation();
        animation.From = Colors.Orange;
        animation.To = Colors.Gray;
        animation.Duration = new Duration(TimeSpan.FromSeconds(1));
        this.elGrid.Background.BeginAnimation(SolidColorBrush.ColorProperty, animation); 
```

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2013-01-04T14:26:08.313

我会用 a`EventTrigger`和 a `ColorAnimation`。

在此示例中，a在事件中`Button Brackground`变为绿色。`MouseLeave`希望此代码与您可能需要的代码相似。

```
<Button Content="Button" Height="75" HorizontalAlignment="Left" Margin="27,12,0,0" Name="btnImgBrush" VerticalAlignment="Top" Width="160" Background="LightGray">
    <Button.Triggers>
        <EventTrigger RoutedEvent="Button.MouseLeave">
            <BeginStoryboard>
                <Storyboard>
                    <ColorAnimation To="Green" 
                                    Storyboard.TargetProperty="(Button.Background).(SolidColorBrush.Color)" 
                                    FillBehavior="Stop" 
                                    Duration="0:0:1"/>
                </Storyboard>
            </BeginStoryboard>
        </EventTrigger>
    </Button.Triggers>
</Button> 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-10-21T15:03:08.283

注意，如果您的背景是冻结的实例，您可能会收到 System.InvalidOperationException。

> 无法为“System.Windows.Media.SolidColorBrush”上的“Color”属性设置动画，因为该对象已密封或冻结。

要更正此消息，请将控件的背景分配给非冻结实例。

```
// Do not use a frozen instance
this.elGrid.Background = new SolidColorBrush(Colors.Orange);
this.elGrid.Background.BeginAnimation(SolidColorBrush.ColorProperty, animation); 
```

[MSDN 上的可冻结对象概述](https://msdn.microsoft.com/en-us/library/ms750509(v=vs.100).aspx)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-03-08T20:55:15.767

```
 ColorAnimation colorChangeAnimation = new ColorAnimation();
        colorChangeAnimation.From = VariableColour;
         colorChangeAnimation.To = BaseColour;
        colorChangeAnimation.Duration = timeSpan;

        PropertyPath colorTargetPath = new PropertyPath("(Panel.Background).(SolidColorBrush.Color)");
        Storyboard CellBackgroundChangeStory = new Storyboard();
        Storyboard.SetTarget(colorChangeAnimation, BackGroundCellGrid);
        Storyboard.SetTargetProperty(colorChangeAnimation, colorTargetPath);
        CellBackgroundChangeStory.Children.Add(colorChangeAnimation);
        CellBackgroundChangeStory.Begin(); 
```

//VariableColour & BaseColour是Color的类，timeSpan是TimeSpan的类，BackGroundCellGrid是Grid的类；

//无需在 XAML 中创建 SolidColorBrush 并绑定到它；//玩得开心！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-03-10T15:47:29.717

这是一组附加属性，如果您遇到可冻结的问题，可以使用这些属性。

```
using System;
using System.ComponentModel;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;

public static class Blink
{
    public static readonly DependencyProperty WhenProperty = DependencyProperty.RegisterAttached(
        "When",
        typeof(bool?),
        typeof(Blink),
        new PropertyMetadata(false, OnWhenChanged));

    public static readonly DependencyProperty FromProperty = DependencyProperty.RegisterAttached(
        "From",
        typeof(Color),
        typeof(Blink),
        new FrameworkPropertyMetadata(Colors.Transparent, FrameworkPropertyMetadataOptions.Inherits));

    public static readonly DependencyProperty ToProperty = DependencyProperty.RegisterAttached(
        "To",
        typeof(Color),
        typeof(Blink),
        new FrameworkPropertyMetadata(Colors.Orange, FrameworkPropertyMetadataOptions.Inherits));

    public static readonly DependencyProperty PropertyProperty = DependencyProperty.RegisterAttached(
        "Property",
        typeof(DependencyProperty),
        typeof(Blink),
        new PropertyMetadata(default(DependencyProperty)));

    public static readonly DependencyProperty DurationProperty = DependencyProperty.RegisterAttached(
        "Duration",
        typeof(Duration),
        typeof(Blink),
        new PropertyMetadata(new Duration(TimeSpan.FromSeconds(1))));

    public static readonly DependencyProperty AutoReverseProperty = DependencyProperty.RegisterAttached(
        "AutoReverse",
        typeof(bool),
        typeof(Blink),
        new PropertyMetadata(true));

    public static readonly DependencyProperty RepeatBehaviorProperty = DependencyProperty.RegisterAttached(
        "RepeatBehavior",
        typeof(RepeatBehavior),
        typeof(Blink),
        new PropertyMetadata(RepeatBehavior.Forever));

    private static readonly DependencyProperty OldBrushProperty = DependencyProperty.RegisterAttached(
        "OldBrush",
        typeof(Brush),
        typeof(Blink),
        new PropertyMetadata(null));

    public static void SetWhen(this UIElement element, bool? value)
    {
        element.SetValue(WhenProperty, value);
    }

    [AttachedPropertyBrowsableForChildren(IncludeDescendants = false)]
    [AttachedPropertyBrowsableForType(typeof(UIElement))]
    public static bool? GetWhen(this UIElement element)
    {
        return (bool?)element.GetValue(WhenProperty);
    }

    public static void SetFrom(this DependencyObject element, Color value)
    {
        element.SetValue(FromProperty, value);
    }

    [AttachedPropertyBrowsableForChildren(IncludeDescendants = false)]
    [AttachedPropertyBrowsableForType(typeof(UIElement))]
    public static Color GetFrom(this DependencyObject element)
    {
        return (Color)element.GetValue(FromProperty);
    }

    public static void SetTo(this DependencyObject element, Color value)
    {
        element.SetValue(ToProperty, value);
    }

    [AttachedPropertyBrowsableForChildren(IncludeDescendants = false)]
    [AttachedPropertyBrowsableForType(typeof(UIElement))]
    public static Color GetTo(this DependencyObject element)
    {
        return (Color)element.GetValue(ToProperty);
    }

    public static void SetProperty(this UIElement element, DependencyProperty value)
    {
        element.SetValue(PropertyProperty, value);
    }

    [AttachedPropertyBrowsableForChildren(IncludeDescendants = false)]
    [AttachedPropertyBrowsableForType(typeof(UIElement))]
    public static DependencyProperty GetProperty(this UIElement element)
    {
        return (DependencyProperty)element.GetValue(PropertyProperty);
    }

    public static void SetDuration(this UIElement element, Duration value)
    {
        element.SetValue(DurationProperty, value);
    }

    [AttachedPropertyBrowsableForChildren(IncludeDescendants = false)]
    [AttachedPropertyBrowsableForType(typeof(UIElement))]
    public static Duration GetDuration(this UIElement element)
    {
        return (Duration)element.GetValue(DurationProperty);
    }

    public static void SetAutoReverse(this UIElement element, bool value)
    {
        element.SetValue(AutoReverseProperty, value);
    }

    [AttachedPropertyBrowsableForChildren(IncludeDescendants = false)]
    [AttachedPropertyBrowsableForType(typeof(UIElement))]
    public static bool GetAutoReverse(this UIElement element)
    {
        return (bool)element.GetValue(AutoReverseProperty);
    }

    public static void SetRepeatBehavior(this UIElement element, RepeatBehavior value)
    {
        element.SetValue(RepeatBehaviorProperty, value);
    }

    [AttachedPropertyBrowsableForChildren(IncludeDescendants = false)]
    [AttachedPropertyBrowsableForType(typeof(UIElement))]
    public static RepeatBehavior GetRepeatBehavior(this UIElement element)
    {
        return (RepeatBehavior)element.GetValue(RepeatBehaviorProperty);
    }

    private static void OnWhenChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        var property = GetProperty((UIElement)d) ?? GetDefaultProperty(d);
        if (property == null || !typeof(Brush).IsAssignableFrom(property.PropertyType))
        {
            if (DesignerProperties.GetIsInDesignMode(d))
            {
                if (property != null)
                {
                    throw new ArgumentException($"Could not blink for {d.GetType().Name}.{property.Name}", nameof(d));
                }
            }

            return;
        }

        AnimateBlink(e.NewValue as bool?, (UIElement)d, property);
    }

    private static DependencyProperty GetDefaultProperty(DependencyObject d)
    {
        if (d is Control)
        {
            return Control.BackgroundProperty;
        }

        if (d is Panel)
        {
            return Panel.BackgroundProperty;
        }

        if (d is Border)
        {
            return Border.BackgroundProperty;
        }

        if (d is Shape)
        {
            return Shape.FillProperty;
        }

        if (DesignerProperties.GetIsInDesignMode(d))
        {
            throw new ArgumentException($"Could not find property to blink for {d.GetType().Name}", nameof(d));
        }

        return null;
    }

    private static void AnimateBlink(bool? blink, UIElement element, DependencyProperty property)
    {
        if (element == null)
        {
            return;
        }
        if (blink == true)
        {
            var brush = element.GetValue(property);
            element.SetCurrentValue(OldBrushProperty, brush);
            element.SetValue(property, Brushes.Transparent);
            var from = element.GetFrom();
            var to = element.GetTo();
            var sb = new Storyboard();
            var duration = element.GetDuration();
            var animation = new ColorAnimation(from, to, duration)
            {
                AutoReverse = element.GetAutoReverse(),
                RepeatBehavior = element.GetRepeatBehavior()
            };
            Storyboard.SetTarget(animation, element);
            Storyboard.SetTargetProperty(animation, new PropertyPath($"{property.Name}.(SolidColorBrush.Color)"));
            sb.Children.Add(animation);
            sb.Begin();
        }
        else
        {
            var brush = element.GetValue(OldBrushProperty);
            element.BeginAnimation(property, null);
            element.SetCurrentValue(property, brush);
        }
    }
} 
```

用法：

```
<Grid>
    <Grid.Resources>
        <Style x:Key="BlinkWhenMouseOver"
               TargetType="{x:Type Border}">
            <Setter Property="local:Blink.When" Value="{Binding IsMouseOver, RelativeSource={RelativeSource Self}}" />
            <Setter Property="local:Blink.From" Value="Honeydew" />
            <Setter Property="local:Blink.To" Value="HotPink" />
            <Setter Property="BorderThickness" Value="5" />
            <Setter Property="local:Blink.Property" Value="{x:Static Border.BorderBrushProperty}" />
        </Style>
    </Grid.Resources>
    <Grid.RowDefinitions>
        <RowDefinition />
        <RowDefinition />
        <RowDefinition />
    </Grid.RowDefinitions>
    <Border Style="{StaticResource BlinkWhenMouseOver}" Background="Transparent"/>
    <Border Grid.Row="1"
            local:Blink.From="Aqua"
            local:Blink.To="Yellow"
            local:Blink.When="{Binding IsChecked,
                                       ElementName=ToggleBlink}" />
    <ToggleButton x:Name="ToggleBlink"
                  Grid.Row="2"
                  Content="Blink" />
</Grid> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-20T15:00:25.270

这对我来说效果很好。

我在按钮中有一条路径（它画了一个“X”）：

```
<Path x:Name="MyDeleteRowButton" Stroke="Gray" Grid.Row="0" 
      Data="M1,5 L11,15 M1,15 L11,5" StrokeThickness="2" HorizontalAlignment="Center" 
      Stretch="None"/> 
```

在鼠标悬停时，我希望十字架变红，所以我添加：

```
<DataTemplate.Triggers>
    <!-- Highlight row on mouse over, and highlight the delete button. -->
    <EventTrigger RoutedEvent="ItemsControl.MouseEnter">
        <EventTrigger.Actions>
            <BeginStoryboard>
                <Storyboard>
                    <!-- On mouse over, flicker the row to highlight it.-->
                    <DoubleAnimation
                        Storyboard.TargetProperty="Opacity"
                        From="0.5" 
                        To="1" 
                        Duration="0:0:0.250"  
                        FillBehavior="Stop"/>
                    <!-- Highlight the delete button with red. -->
                    <ColorAnimation
                        To="Red"
                        Storyboard.TargetName="MyDeleteRowButton"
                        Storyboard.TargetProperty="(Stroke).(SolidColorBrush.Color)"
                        Duration="0:0:0.100" 
                        FillBehavior="HoldEnd"/>
                </Storyboard>
            </BeginStoryboard>
        </EventTrigger.Actions>
    </EventTrigger>

    <!-- Grey out the delete button. -->
    <EventTrigger RoutedEvent="ItemsControl.MouseLeave">
        <EventTrigger.Actions>
            <BeginStoryboard>
                <Storyboard>
                    <!-- Space is precious: "delete" button appears only on a mouseover. -->
                    <ColorAnimation
                        To="Gray"
                        Storyboard.TargetName="MyDeleteRowButton"
                        Storyboard.TargetProperty="(Stroke).(SolidColorBrush.Color)"
                        Duration="0:0:0.100" 
                        FillBehavior="HoldEnd"/>
                </Storyboard>
            </BeginStoryboard>
        </EventTrigger.Actions>
    </EventTrigger>

</DataTemplate.Triggers> 
```

最令人困惑的是`Storyboard.TargetProperty`. 如果删除括号，则没有任何效果。

有关详细信息，请参阅“ [propertyName 语法](https://msdn.microsoft.com/en-us/library/bb979945(v=vs.95).aspx)”和“ [Storyboard.TargetProperty](https://msdn.microsoft.com/en-us/library/bb979945(v=vs.95).aspx) ”。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-31T15:08:25.660

这篇文章帮助了我。但是如果是像原来的问题所说的那样在 1 秒后改变颜色，

```
 ColorAnimation animation;
    animation = new ColorAnimation();
    animation.AutoReverse =true; 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-01-04T14:08:47.493

在 WPF 中，使用动画可能会更好。表情混合具有相对的动画/行为。

* * *

## 回答 #8

> 赞同：-8
> 
> 时间：2013-01-04T14:11:42.543

您可以使用`DoubleAnimation`以下方式更改颜色：

```
<Storyboard>
    <DoubleAnimation Storyboard.TargetProperty="Background"
                            From="0.0"
                            Duration="0:0:2"
                            To="1.0" />                        
</Storyboard> 
```

希望能帮助到你

# java - 为什么在谷歌应用引擎java中发送无效数据后插入

> ID：14158502
> 
> 赞同：0
> 
> 时间：2013-01-04T13:54:54.963
> 
> 标签：java, google-app-engine

我正在尝试验证和插入数据。在这里，如果用户名存在于文件服务中，它应该发送错误消息，但在验证后发送错误消息并在文件服务中插入数据。我不能很好地在代码中失败。

我的 JSP：

```
<form name="create" id="myform" action="/create" method="post">
User Name:  <input type="text" name="cliname"/>
<input type ="submit" value="submit"/>
</form> 
```

我的小服务程序：

```
public class CreateForm  extends HttpServlet {
DatastoreService datastore = DatastoreServiceFactory.getDatastoreService();
public void doPost(HttpServletRequest req, HttpServletResponse resp)
throws IOException, ServletException {
       String uname = req.getParameter("cliname");
       Query query1 = new Query("Users");
List<Entity> cli_id = datastore.prepare(query1).asList(FetchOptions.Builder.withDefaults());
for (Entity client : cli_id){
username = (String)client.getProperty("User Name");
if(username.equals(uname)) {
RequestDispatcher rd = req.getRequestDispatcher("/Create.jsp");
req.setAttribute("errormsg", "User Name Already Exists");
rd.forward(req, resp);}}
Entity userInput = new Entity("Users");
userInput.setProperty("User Name", uname);
datastore.put(userInput);
}} 
```

请给我一个想法，

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T18:06:46.797

我已经更新了你的代码。

```
public class CreateForm  extends HttpServlet {
DatastoreService datastore = DatastoreServiceFactory.getDatastoreService();
public void doPost(HttpServletRequest req, HttpServletResponse resp) throws IOException, ServletException {
   String uname = req.getParameter("cliname");
   Query query1 = new Query("Users");
   List<Entity> cli_id = datastore.prepare(query1).asList(FetchOptions.Builder.withDefaults());
   RequestDispatcher rd = null;
for (Entity client : cli_id){
    username = (String)client.getProperty("User_Name");
    if(username.equals(uname)) {
        req.setAttribute("errormsg", "User Name Already Exists");
        rd = req.getRequestDispatcher("/error.jsp");
     }else{
        Entity userInput = new Entity("Users");
        userInput.setProperty("User_Name", uname);
        datastore.put(userInput);
        req.setAttribute("success", "User Name Added");
        rd = req.getRequestDispatcher("/Create.jsp");
     }
 }
     rd.forward(req, resp);
   }
 } 
```

# java - SQLite 高分 3 列 - Android

> ID：14158505
> 
> 赞同：0
> 
> 时间：2013-01-04T13:55:01.477
> 
> 标签：java, android, sqlite

我正在尝试实现一种方法，让所有 if-elseif-else 和 while 循环让我头晕目眩。我有一个包含 3 列的 SQLite 数据库——自动增量、分数（长）和百分比（整数）。百分比来自 10 个问题的正确性，分数将是在 0 到 1000 之间计算的某个数字。因此百分比上会有很多关系，而（可能）分数中没有关系。

高分先按百分比排名，然后将所有具有相同百分比值的记录“打破平局”，然后按分数排名。这一切有意义吗？如果没有，请告诉我，我会编辑并尝试更好地解释它。

我的问题是，如果有人有任何建议或其他示例，我可以遵循以完成此方法。另外，我的做法可以吗？我使用 a`rawQuery()`而不是使用我的`insert()`方法插入到表中，因为我大部分时间都需要在特定索引处插入到我的数据库中。我也包括了我的插入方法。

```
//Check if new record makes the top 10.
public int check(long score, int percentage) {
    Cursor c1 = db.rawQuery("SELECT " + PERCENTAGE + " FROM " + TABLE, null);
    Cursor c2 = db.rawQuery("SELECT " + SCORE + " FROM " + TABLE, null);
    if(c1 != null && c2 != null) {
        int i = 0;
        while(c1.moveToNext() == true) {
            int ii = 0;
            c1.moveToPosition(i);
            do {
                int x = c1.getInt(c1.getColumnIndex("PERCENTAGE"));
                if(x > percentage) {
                    db.rawQuery("INSERT INTO " + TABLE + "VALUES (" + i + ", " + score + ", " + percentage + ");", null);
                } else if (x < percentage ) {
                    i++;
                } else {
                    int y = c2.getInt(c2.getColumnIndex("SCORE"));
                    while(x == percentage) {
                        //ahhhh!

                    }
                        if(y > score) {
                            db.rawQuery("INSERT INTO " + TABLE + "VALUES (" + i + ", " + score + ", " + percentage + ");", null);
                        } else
                    if(c2.getCount() == 10) {
                        //Delete last record in high score and insert at index.
                        delete(10);
                        //db.rawQuery("DELETE FROM " + TABLE + " WHERE " + RANK + " = 10;", null);
                        db.rawQuery("INSERT INTO " + TABLE + "VALUES (" + i + ", " + score + ", " + percentage + ");", null);
                        return true;
                    } else {
                        //No deletion - just insert.
                        db.rawQuery("INSERT INTO " + TABLE + "VALUES (" + i + ", " + score + ", " + percentage + ");", null);
                        return true;
                    }
                } else {
                    return false;
                }
            } while (c2.moveToNext());
        } else {
            return false;
        }
    } else {
        return false;
    }
} 
```

插入（）

```
//Insert new record.
public long insert(long score, int percentage) {
    ContentValues values = new ContentValues();
    values.put(SCORE, score);
    values.put(PERCENTAGE, percentage);

    return db.insert(TABLE, null, values);
} 
```

# java - Collection 类中的奇怪控制语句

> ID：14158507
> 
> 赞同：1
> 
> 时间：2013-01-04T13:55:02.530
> 
> 标签：java

我在 Java API Collection 类中遇到了这段代码。它是否像 switch 语句一样工作？这个成语怎么称呼？

```
public static int indexOfSubList(List<?> source, List<?> target) {
    int sourceSize = source.size();
    int targetSize = target.size();
    int maxCandidate = sourceSize - targetSize;

    if (sourceSize < INDEXOFSUBLIST_THRESHOLD ||
        (source instanceof RandomAccess&&target instanceof RandomAccess)) {
    nextCand:
        for (int candidate = 0; candidate <= maxCandidate; candidate++) {
            for (int i=0, j=candidate; i<targetSize; i++, j++)
                if (!eq(target.get(i), source.get(j)))
                    continue nextCand;  // Element mismatch, try next cand
            return candidate;  // All elements of candidate matched target
        }
    } else {  // Iterator version of above algorithm
        ListIterator<?> si = source.listIterator();
    nextCand:
        for (int candidate = 0; candidate <= maxCandidate; candidate++) {
            ListIterator<?> ti = target.listIterator();
            for (int i=0; i<targetSize; i++) {
                if (!eq(ti.next(), si.next())) {
                    // Back up source iterator to next candidate
                    for (int j=0; j<i; j++)
                        si.previous();
                    continue nextCand;
                }
            }
            return candidate;
        }
    }
    return -1;  // No candidate matched the target
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T13:56:34.833

不，它只是一个标记的中断/继续。看这里：

[http://docs.oracle.com/javase/tutorial/java/nutsandbolts/branch.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/branch.html)

Java 允许使用标签作为中断/继续目标。默认情况下，中断/继续会影响最里面的循环，但使用标签可以跳出外部循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T13:58:14.827

假设您指的是`nextCand:`and `continue nextCand;`，它只是一种从*内部循环中继续到**外部*循环的下一次迭代的方法。

 *一个简单`continue`的将继续*内部*循环。*

# c++ - 用于修改另一个类中数据的无效函数指针

> ID：14158510
> 
> 赞同：1
> 
> 时间：2013-01-04T13:55:20.403
> 
> 标签：c++, pointers, function-pointers, void-pointers

我会尽我所能，尽可能清楚地解释这一点。

我的示例目前涉及 3 个不同的类。

1.  我的模型课（让我们称之为`MyModel.cpp`）
2.  MyModel 具有 ( `MyData.cpp`)对象的我的数据类
3.  我的撤消重做类修改了我的模型（`MyModelUR.cpp`）

`MyModel`有一个`MyData`对象。 `MyData`包含一堆双打，每个都有自己的 get 和 set 功能。我的系统的工作方式是通过调用`redo()`in来调用 setter `MyModelUR`。当检测到更改时调用此`redo()`函数。`MyModel`不过，这超出了问题的范围。

`MyModelUR`有 3 个函数，一个构造函数，它需要一些参数，`undo()`并且`redo()`不允许使用任何参数。

发生的情况是，我想`MyModel`将所需设置器的函数指针传递`MyData`给`MyModelUR`.

因此，这意味着 for 的构造函数`MyModelUR`需要将函数指针作为 arg，然后将其存储在私有全局变量中。到目前为止，我有这样的事情......

```
MyModelUR::MyModelUR(MyModel* model, double newValue, void (*function)(double))
{
    Model = model;

    NewValue = newValue;

    //FunctionToCall is a void*
    FunctionToCall = &function;
} 
```

现在，在我的`redo()`函数中，我想使用`FunctionToCall`......我正在尝试这样做，但它不起作用，只是给我编译错误......

```
MyModelUR::redo()
{
    Model->data()->FunctionToCall(NewValue);
} 
```

我想以这种方式实现它，所以我不需要每个 double in的 X 个`undo()`/函数。`redo()``MyData`

感谢您的帮助和建议，但在考虑回复时我有一些限制，例如，由于我有一些其他限制，我想使用此架构，并且我不能使用 Boost 库。

TLDR；我想调用一个 void 函数指针，该指针在对象上调用的单独类中采用双精度。

谢谢！

编辑：在下面的评论之后，这就是我正在使用的......

```
MyModelUR::MyModelUR(MyModel* model, double newValue, void (MyModel::*function)(double)) :
    Model(model),
    NewValue(newValue),
    FunctionToCall(function)
{
}

void MyModelUR::redo()
{
    MyData data = Model->data();

    data.*FunctionToCall(NewValue);
} 
```

但是，这会在第二行代码中引发错误`redo()`：“必须使用 '. *' 或 '->* ' 在 ... 中调用指向成员函数的指针”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T14:03:12.620

首先，您的函数指针应该是一个*方法*指针，并且您正在尝试使用一个自由函数指针。

其次，不要尝试将其存储为`void*`，它不能保证大小相同。只需将其声明为方法指针并停止强制转换。

最后，您当前正在（在您的`void*`）存储*瞬态函数指针参数的**地址*，即使它是正确的类型也是无效的。

 *您的代码最终应该是这样的：

```
class MyModelUR {
    ...
    MyModel *Model;
    double NewValue;
    void (MyData::*FunctionToCall)(double);
    ...
    MyModelUR(MyModel* model, double newValue, void (MyData::*function)(double))
      : Model(model), NewValue(newValue), FunctionToCall(function)
    {}
    void redo() {
        MyData &data = Model->data();
        (data.*FunctionToCall)(NewValue);
    }
}; 
```

* * *

实例化其中之一，例如：

```
MyModelUR *ur = new MyModelUR(model, 3.4, &MyData::setSomeValue); 
```

* * *

功能说明：如果要撤消，您将需要一个 getter 方法指针和存储旧值的地方。

美学说明：初始大写成员名称很糟糕，这与您用于类型的方案相同。只是海事组织。*

# lucene - Lucene LongField 使用 Query 精确搜索

> ID：14158512
> 
> 赞同：4
> 
> 时间：2013-01-04T13:55:36.907
> 
> 标签：lucene, long-integer

如何使用 TermQuery 精确匹配 LongField？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T17:38:35.553

考虑[NumericUtils API上的警告](http://lucene.apache.org/core/3_6_0/api/core/org/apache/lucene/util/NumericUtils.html)

**注意：此 API 仅供内部使用，可能会在下一个版本中以不兼容的方式进行更改。**

我注意到这对某些人来说是个问题，因为 NumericUtils API 确实从[版本 3.6](http://lucene.apache.org/core/3_6_0/api/core/org/apache/lucene/util/NumericUtils.html)到[版本 4.0](http://lucene.apache.org/core/4_0_0-BETA/core/org/apache/lucene/util/NumericUtils.html)发生了显着变化。我建议避免直接使用它。

相反，使用[NumericRangeQuery](http://lucene.apache.org/core/3_6_0/api/all/org/apache/lucene/search/NumericRangeQuery.html)来搜索数值。通过将最大和最小范围设置为相等的值，可以获得精确匹配。

此外，有意选择哪些字段应该是数字的可能会有所帮助。NumericFields 旨在允许数字范围查询和排序。如果您不需要将其用作数值进行搜索，则它可能不应该是 NumericField。例如，识别号通常应该是关键字，而不是数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T13:56:24.550

```
BytesRef ref = new BytesRef();    
NumericUtils.longToPrefixCoded( 12L, 0, ref );
Query q = new TermQuery( new Term( fieldname, ref ) ); 
```

# jsf - 使用 Jmeter + JSF + Primefaces

> ID：14158521
> 
> 赞同：2
> 
> 时间：2013-01-04T13:56:13.133
> 
> 标签：jsf, primefaces, viewstate, jmeter

我想用 Jmeter 对我的 jsf 应用程序（使用 Primefaces）进行压力测试，但我遇到了一个奇怪的（但预期的）问题。

我正在使用的 jmeter 设置很好并且可以正常工作，它使用正则表达式提取器来获取视图状态、用于 JSESSIONID 的 HTTP URL 重写修改器、HTTP Cookie 管理器和记录控制器。

我想使用的记录场景是转到一个带有一些 Primefaces**动态**选项卡视图的页面，并且在该选项卡内有用于保存数据的 PF 命令按钮。

现在的问题是这样的：当我用保存由正则表达式提取的变量替换记录的 ViewState 时，带有 tabviews 的页面无法导航到其他选项卡（并且无法呈现保存按钮），因此页面不能模拟储蓄。

我发现当您在动态选项卡视图中更改选项卡时，Primefaces 会使用新的视图状态执行 ajax 请求，随后的 POST 请求必须使用此视图状态来理解更改的选项卡。

还有其他人以某种方式解决了这个问题吗？

先谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-01T18:08:16.680

Before you send a request I get the first screen with a GET method, keep the id with regular expression. Then I'll send the request. For each new screen that opens has to resave the viewState overwriting the previous one.

*   [simple contoller]
    *   [html request]open view e save viewState(method GET)
        *   [regular expression extractor] extract ${myViewState}
    *   [html request]your request sending ${myViewState}
    *   .
    *   [html request]OTHER open view e save viewState(method GET)
        *   [regular expression extractor] extract ${myViewState}
    *   [html request]your OTHER request sending ${myViewState}

*...for each new screen that opens has to resave the viewState overwriting the previous one.*

# android - 在被触摸的地图上绘制图标

> ID：14158523
> 
> 赞同：1
> 
> 时间：2013-01-04T13:56:18.670
> 
> 标签：android, android-mapview, touch-event, ontouchlistener, geopoints

只要触摸它，我就会尝试在地图上绘制一些图标。我想我快到了。这是代码。

```
package com.example.googledemo4;

import java.util.List;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;
import com.google.android.maps.Overlay;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.MenuItem;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;
import android.widget.Toast;
import android.support.v4.app.NavUtils;

public class GoogleDemo4 extends MapActivity{

MapController mc;
MapView mapView;
GeoPoint g;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_google_demo4);

    mapView=(MapView) findViewById(R.id.MapView);
    mapView.setBuiltInZoomControls(true);

    mc=mapView.getController();

    List<Overlay> overlays = mapView.getOverlays();

    GeoPoint geoPoint = new GeoPoint( 18533000,73850000);

    MapOverlay4 mapOverlay = new MapOverlay4(geoPoint,mapView,this);

    overlays.add(mapOverlay);

    mc.animateTo(geoPoint);
    mc.setZoom(17);
    geoPoint=g;
    mapView.setOnTouchListener(touch);

    mapView.postInvalidate();
    }

private OnTouchListener touch = new OnTouchListener() {

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        // TODO Auto-generated method stub

        mapView=(MapView) findViewById(R.id.MapView);

        if (event.getAction() == 1) {                
           GeoPoint  geoPoint = mapView.getProjection().fromPixels(
                (int) event.getX(),
                (int) event.getY());
           g=geoPoint;
                Toast.makeText(getBaseContext(), 
                    geoPoint.getLatitudeE6() / 1E6 + "," + 
                    geoPoint.getLongitudeE6() /1E6 , 
                    Toast.LENGTH_SHORT).show();

        }

        return true;
    }
};

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}

} 
```

我创建了一个自定义叠加层：

```
package com.example.googledemo4;

import android.content.Context;
import android.content.res.Resources;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Point;
import android.webkit.WebView.FindListener;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapView;
import com.google.android.maps.Overlay;

public class MapOverlay4 extends Overlay{

GeoPoint p ;
MapView mapView;
Context context;

public MapOverlay4(GeoPoint geoPoint, MapView mapView, Context context){

    this.mapView=mapView;
    this.p=geoPoint;
    this.context=context;
}
public void draw(Canvas canvas, MapView mapView, boolean flag) {
    // TODO Auto-generated method stub
    super.draw(canvas, mapView, flag);
      //---translate the GeoPoint to screen pixels---
    mapView=this.mapView;
    Point screenPts = new Point();
    mapView.getProjection().toPixels(p, screenPts);

    //---add the marker---
    Bitmap bmp = BitmapFactory.decodeResource(
        this.context.getResources(), R.drawable.ic_launcher);            
    canvas.drawBitmap(bmp, screenPts.x, screenPts.y-50, null);         

}

} 
```

这段代码第一次绘制图标是因为我将地理点初始化为一些纬度和经度。但是在触摸地图之后，什么也没有发生。我认为每当地图接触到地理点时，地理点就会改变，而改变的地理点会被提供给叠加层。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T14:10:32.760

没有类似于 overlays.add(mapOverlay) 的调用，在 onTouchListener 中有新的 Geopoint。我想这样做必须帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T14:06:45.490

尝试使用 `itemized overlay`绘制图像并在某个点绘制覆盖`OntouchEvent`方法并将其传递纬度和经度，如果您需要一些示例，您将在触摸位置获得图像，您可以[在这里看到](http://mirnauman.wordpress.com/2012/04/16/android-google-maps-tutorial-part-6-getting-the-location-that-is-touched/)

# c# - Sketchflow Silverlight - 更改按钮的边框

> ID：14158526
> 
> 赞同：0
> 
> 时间：2013-01-04T13:56:40.900
> 
> 标签：c#, silverlight, silverlight-4.0, sketchflow

我正在使用表达式混合。

我有一个草图按钮，按钮的边框看起来粗略且呈波浪状。有没有一种方法可以在不删除按钮的情况下将边框更改为实线？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T14:12:24.590

它只是按钮上的一种样式。当你在做一个 Sketchflow 项目时，默认样式是在 SketchStyles.xaml 中定义的。`ResourceDictionary`当你将按钮添加到你的视图中时，应该有一些类似的东西`Style="{DynamicResource Button-Sketch}"`添加到该行中。只需删除它，您的按钮样式就消失了。您可以创建自定义样式以使按钮看起来像您想要的那样。

如果您花时间设计您的视图，为什么要使用 SketchFlow？它背后的想法是快速原型化您的视图。它并不意味着成为您的最终产品。

# sqlite - Android：从跟踪中隐藏 sqlite 错误

> ID：14158527
> 
> 赞同：0
> 
> 时间：2013-01-04T13:56:45.097
> 
> 标签：sqlite, logging

有时我会得到带有 sql 错误日志的堆栈跟踪。我不希望我的数据库逻辑对用户可见。如果出现 sql 错误，是否可以防止记录 sqlite 错误？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-29T12:07:23.253

使用**insertOrThrow**并将您的代码包围在**try catch**块中

参考[http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#insertOrThrow%28java.lang.String,%20java.lang.String,%20android.content.ContentValues%29](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#insertOrThrow%28java.lang.String,%20java.lang.String,%20android.content.ContentValues%29)

# java - 打开的图像不出现

> ID：14158528
> 
> 赞同：1
> 
> 时间：2013-01-04T13:56:48.813
> 
> 标签：java

//编辑：我编辑的问题，因为我不想在这里搞砸；）你好。这是我遇到问题的 2 节课。在程序中，子类打开和显示图像的类运行良好，但是当我将一些代码分配给两个类时它不起作用（在 JPanel 中显示图像）。我知道那太多了，但是没有办法；]

```
public class przegladarka_3 {

public static void main(String[] args){
   uklad_gl okno_gl=new uklad_gl(true,800,600,"Przeglądarka plików graficznych 1.0 alfa");
   okno_gl.setResizable(false);
   okno_gl.setLocationRelativeTo(okno_gl);   
   okno_gl.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
}
}

class uklad_gl extends JFrame{

JPanel rozklad=new JPanel(); 
JPanel rozklad2;
JScrollPane zwijanie; //panel dla suwaków
JMenuBar pasek_meni; 
JMenuItem wybor;
JMenu[] pdp; //Plik Dodaj Pomoc

String[] tab_pasek;
String[] tab1; //wybory dla Plik
String[] tab2; //Dodaj
String[] tab3; //Pomoc

JFileChooser otworz,zapisz_jako;
ActionListener wykonaj_plik=new uklad_gl.klasa_zadan();
ActionListener wykonaj_dzialanie=new uklad_gl.klasa_zadan();
ActionListener wykonaj_pomoc=new uklad_gl.klasa_zadan();

public uklad_gl(boolean b, int wys, int szer, String tytul){  
setVisible(b);
setSize(wys, szer);
setTitle(tytul);

rozklad2=new JPanel(new BorderLayout());
add(rozklad,BorderLayout.PAGE_END);
add(rozklad2,BorderLayout.LINE_END);

zwijanie=new JScrollPane(rozklad);

pasek_postepu=new JProgressBar(1,100);
pasek_postepu.setValue(0);
pasek_postepu.setStringPainted(true);
pasek_postepu.setBounds(600, 200, 110,500);

stworz_caly_pasek_meni("Plik,Dodaj,Pomoc");  

} 

public void stworz_caly_pasek_meni(String lista_pasek){

tab_pasek=lista_pasek.split(",");
pasek_meni=new JMenuBar();
pdp=new JMenu[tab_pasek.length];
rozklad.add(pasek_meni);
setJMenuBar(pasek_meni);

for(int i=0;i<tab_pasek.length;i++){

        pdp[i]=new JMenu(tab_pasek[i]);
        setJMenuBar(pasek_meni);
        pasek_meni.add(pdp[i]);

        if(i==0) stworz_Plik("Otwórz,Zapisz,Zapisz jako...,Zamknij",wykonaj_plik);
        else if(i==1) stworz_Dzialanie("Odcienie szarości,Sepia,Negatyw,Nasycenie barw",wykonaj_dzialanie);
        else  stworz_Pomoc("O mnie, O programie, Najczęściej zadawane pytania",wykonaj_pomoc);

    } 
    }

public void stworz_Plik(String lista_Plik,ActionListener e){

tab1=lista_Plik.split(",");

for(int i=0;i<tab1.length;i++){

        wybor=new JMenuItem(tab1[i]);
        pdp[0].add(wybor);
        wybor.addActionListener(e);

   } 
  }

 public void stworz_Dzialanie(String lista_Dodaj,ActionListener e){

 tab2=lista_Dodaj.split(",");

 for(int i=0;i<tab2.length;i++){

        wybor=new JMenuItem(tab2[i]);
        pdp[1].add(wybor);
        wybor.addActionListener(e);

   }
  }

public void stworz_Pomoc(String lista_Pomoc,ActionListener e){

tab3=lista_Pomoc.split(",");

for(int i=0;i<tab3.length;i++){

        wybor=new JMenuItem(tab3[i]);
        pdp[2].add(wybor);
        wybor.addActionListener(e);

   }
  }

   public class klasa_zadan implements ActionListener,WindowListener,ComponentListener,MouseListener{
  BufferedImage obraz;

  public void actionPerformed(ActionEvent e){
  String polecenie=e.getActionCommand();

  if(polecenie.equals("Otwórz")) try {
    otworz();
} catch (IOException ex) {
    Logger.getLogger(uklad_gl.class.getName()).log(Level.SEVERE, null, ex);
}

        }  

public void otworz() throws IOException{
  otworz=new JFileChooser("C://");
  FileNameExtensionFilter rastrowa=new FileNameExtensionFilter("Pliki grafiki rastrowej(.jpeg,.png.,gif...)", "jpeg","jpg", "gif","png","bmp");

  otworz.setFileFilter(rastrowa);

  int a=otworz.showOpenDialog(null);

  if(a==JFileChooser.APPROVE_OPTION){
  String nazwa_pliku=otworz.getSelectedFile().getAbsolutePath();
  String roz=nazwa_pliku.substring(nazwa_pliku.lastIndexOf('.')+1);

  obraz=ImageIO.read(otworz.getSelectedFile());         
  rozklad=new JPanel(){

     protected void paintComponent(Graphics g){
            Graphics g2 = g.create();
            g2.drawImage(obraz, 0, 0, getWidth(), getHeight(), null);
            g2.dispose();             
        }         
 };   
 add(rozklad);
 revalidate();  
 repaint();   
 }
 }  
 }
 } 
```

****** *** ** *** ******新课程****** ** *** ** *** *****

 **```
public class klasa_zadan extends JFrame implements ActionListener,WindowListener,ComponentListener,MouseListener{

BufferedImage obraz;

JFileChooser otworz,zapisz_jako;

public void actionPerformed(ActionEvent e){
    try {
        String polecenie=e.getActionCommand();

        if(polecenie.equals("Otwórz"))
            otworz();

        if(polecenie.equals("Zapisz jako...")) zapisz_jako();

        if(polecenie.equals("Zamknij")) zamknij();
    } catch (IOException ex) {
        Logger.getLogger(zadania_plik.class.getName()).log(Level.SEVERE, null, ex);
    }
}  

public void otworz() throws IOException{
  otworz=new JFileChooser("C://");

  FileNameExtensionFilter rastrowa=new FileNameExtensionFilter("Pliki grafiki rastrowej(.jpeg,.png.,gif...)", "jpeg","jpg", "gif","png","bmp");
  otworz.setFileFilter(rastrowa);
  int a=otworz.showOpenDialog(null);

  if(a==JFileChooser.APPROVE_OPTION){
  String nazwa_pliku=otworz.getSelectedFile().getAbsolutePath();
 // String roz=nazwa_pliku.substring(nazwa_pliku.lastIndexOf('.')+1);

  final BufferedImage obraz=ImageIO.read(otworz.getSelectedFile()); 
  final JPanel rozklad=new JPanel(new BorderLayout()){
     protected void paintComponent(Graphics g){
           Graphics g2 = (Graphics2D)g;
           g2.drawImage(obraz, 0, 0,this);
           //g2.dispose();             
        }         
 };  
 Dimension rozmiar=new Dimension(obraz.getWidth(),obraz.getHeight()); 
 add(rozklad);
 revalidate();  
 repaint();   
 }
 }  

 public void zapisz() throws IOException{  
     File plik=zapisz_jako.getSelectedFile();
     String nazwa_pliku=plik.getAbsolutePath();
     String roz=null;
     roz=nazwa_pliku.substring(nazwa_pliku.lastIndexOf(".")+1); 
     ImageIO.write(obraz, roz, plik);         //niewiadomo, czy ta metoda działa!!!!                 
  } 

 public void zapisz_jako(){ //zapisanie pliku do innego formatu jest uzależnione od rodzaju pliku graficznego
 zapisz_jako=new JFileChooser("C://");
 zapisz_jako.setSelectedFile(new File("beznazwy.jpg")); //tworzy plik, który będzie zapisany z domyślną nazwą
 zapisz_jako.setFileSelectionMode(JFileChooser.FILES_ONLY);

 FileNameExtensionFilter rastrowa=new FileNameExtensionFilter("Pliki grafiki rastrowej(.jpeg,.png.,gif...)", "jpeg","jpg", "gif","png","bmp");
 zapisz_jako.setFileFilter(rastrowa);

 int a=zapisz_jako.showSaveDialog(null);

 if(a==JFileChooser.APPROVE_OPTION){  
     File plik=zapisz_jako.getSelectedFile();
     String nazwa_pliku=plik.getAbsolutePath();
     String roz=null;

     if(nazwa_pliku.indexOf(".jpg")==-1 && nazwa_pliku.indexOf(".png")==-1 && nazwa_pliku.indexOf(".gif")==-1){       
         nazwa_pliku+=".jpg"; //zostaw jpg jako domyślny
         roz="jpg";
         plik=new File(nazwa_pliku);      
     }

     else{          
         roz=nazwa_pliku.substring(nazwa_pliku.lastIndexOf(".")+1);            
         try {                
             ImageIO.write(obraz, roz, plik);                
         } catch (IOException ex) {        
             Logger.getLogger(zadania_plik.class.getName()).log(Level.SEVERE, null, ex);  
         }
     }  
 } 
 } 

public void zamknij(){
int tn=JOptionPane.showConfirmDialog(null, 
        "Czy na pewno chcesz zakończyć działanie z programem?","Widaomość",
            JOptionPane.YES_NO_OPTION,0,null);

if(tn==0) System.exit(0);       
} 
} 
```

==================================================== ====

```
public class uklad_gl extends JFrame{

JPanel rozklad;
JScrollPane zwijanie; //panel dla suwaków

JMenuBar pasek_meni; 
JMenuItem wybor;
JMenu[] pdp; //Plik Dodaj Pomoc

JScrollPane suwak1,suwak2;
JProgressBar pasek_postepu;

String[] tab_pasek;
String[] tab1; //wybory dla Plik
String[] tab2; //Dodaj
String[] tab3; //Pomoc

JFileChooser otworz,zapisz_jako;
ActionListener wykonaj_plik=new zadania_plik();
ActionListener wykonaj_dzialanie=new zadania_dodaj();
ActionListener wykonaj_pomoc=new zadania_pomoc();

public uklad_gl(boolean b, int wys, int szer, String tytul){  
setVisible(b);
setSize(wys, szer);
setTitle(tytul);

rozklad=new JPanel(new BorderLayout());

zwijanie=new JScrollPane(rozklad);

stworz_caly_pasek_meni("Plik,Dodaj,Pomoc");  
stworz_suwaki(wykonaj_plik);

} 

public void stworz_suwaki(ActionListener e){
//jeszcze nie działają
suwak1=new JScrollPane();
suwak2=new JScrollPane();
rozklad.add(suwak1);
rozklad.add(suwak2);   

}

public void stworz_caly_pasek_meni(String lista_pasek){   
tab_pasek=lista_pasek.split(",");
pasek_meni=new JMenuBar();
pdp=new JMenu[tab_pasek.length];
rozklad.add(pasek_meni);
setJMenuBar(pasek_meni);

for(int i=0;i<tab_pasek.length;i++){

        pdp[i]=new JMenu(tab_pasek[i]);
        setJMenuBar(pasek_meni);
        pasek_meni.add(pdp[i]);

        if(i==0) stworz_Plik("Otwórz,Zapisz,Zapisz jako...,Zamknij",wykonaj_plik);
        else if(i==1) stworz_Dzialanie("Odcienie szarości,Sepia,Negatyw,Nasycenie barw",wykonaj_dzialanie);
        else  stworz_Pomoc("O mnie, O programie, Najczęściej zadawane pytania",wykonaj_pomoc);      
  } 
  }

public void stworz_Plik(String lista_Plik,ActionListener e){
tab1=lista_Plik.split(",");

for(int i=0;i<tab1.length;i++){
        wybor=new JMenuItem(tab1[i]);
        pdp[0].add(wybor);
        wybor.addActionListener(e);        
   } 
   }

public void stworz_Dzialanie(String lista_Dodaj,ActionListener e){
tab2=lista_Dodaj.split(",");

for(int i=0;i<tab2.length;i++){   
        wybor=new JMenuItem(tab2[i]);
        pdp[1].add(wybor);

   }
   }

public void stworz_Pomoc(String lista_Pomoc,ActionListener e){
tab3=lista_Pomoc.split(",");

for(int i=0;i<tab3.length;i++){
        wybor=new JMenuItem(tab3[i]);
        pdp[2].add(wybor);
        wybor.addActionListener(e);     
   }
   }  
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T14:32:07.650

Several small issues. I think it is invokeLater.

I gave the panel a preferred size.

Assuming that the component class (JFrame?) has a BorderLayout, I picked another `add`.

```
public void otworz() throws IOException {
    JFileChooser otworz = new JFileChooser("C:/"); // Or "C:\\"

    FileNameExtensionFilter rastrowa = new FileNameExtensionFilter("Pliki grafikirastrowej(.jpeg,.png.,gif...)", "jpeg", "jpg", "gif", "png", "bmp");
    otworz.setFileFilter(rastrowa);
    int a = otworz.showOpenDialog(null);
    if (a == JFileChooser.APPROVE_OPTION) {
        String nazwa_pliku = otworz.getSelectedFile().getAbsolutePath();
        //String roz = nazwa_pliku.substring(nazwa_pliku.lastIndexOf('.') + 1);

        final BufferedImage obraz = ImageIO.read(otworz.getSelectedFile());
        final JPanel rozklad = new JPanel(new BorderLayout()) {
            @Override
            protected void paintComponent(Graphics g) {
                Graphics g2 = (Graphics2D)g; //g.create();
                g2.drawImage(obraz, 0, 0, this);
                //g2.dispose();
            }
        };
        Dimension size = new Dimension(obraz.getWidth(), obraz.getHeight());
        rozklad.setPreferredSize(size);
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                add(rozklad, BorderLayout.CENTER);
                revalidate();
                repaint();
            }
        });
    }
} 
```

P.S. you could use a JLabel too; that is simpler.

```
 add(new JLabel(new ImageIcon(obraz)), BorderLayout.CENTER); 
```

* * *

**After your EDIT**

I tried to use all classes. I had to make some corrections. `obraz` for instance was declared both as field and as local variable, so that one hid the other. I used the NetBeans IDE and some warnings and correction proposals were given.

**przegladarka_3**

```
import javax.swing.JFrame;

public class przegladarka_3 {

    public static void main(String[] args) {
        uklad_gl okno_gl = new uklad_gl(true, 800, 600, "Przeglądarka plików graficznych 1.0 alfa");
        okno_gl.setResizable(false);
        okno_gl.setLocationRelativeTo(okno_gl);
        okno_gl.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }
} 
```

**uklad_gl**

```
import java.awt.BorderLayout;
import java.awt.Graphics;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.image.BufferedImage;
import java.io.IOException;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.imageio.ImageIO;
import javax.swing.JFileChooser;
import javax.swing.JFrame;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.filechooser.FileNameExtensionFilter;

class uklad_gl extends JFrame {

    JPanel rozklad = new JPanel();
    JPanel rozklad2;
    JScrollPane zwijanie; //panel dla suwaków
    JMenuBar pasek_meni;
    JMenuItem wybor;
    JMenu[] pdp; //Plik Dodaj Pomoc
    String[] tab_pasek;
    String[] tab1; //wybory dla Plik
    String[] tab2; //Dodaj
    String[] tab3; //Pomoc
    JFileChooser otworz, zapisz_jako;
    ActionListener wykonaj_plik = new uklad_gl.klasa_zadan();
    ActionListener wykonaj_dzialanie = new uklad_gl.klasa_zadan();
    ActionListener wykonaj_pomoc = new uklad_gl.klasa_zadan();

    public uklad_gl(boolean b, int wys, int szer, String tytul) {
        setVisible(b);
        setSize(wys, szer);
        setTitle(tytul);

        rozklad2 = new JPanel(new BorderLayout());
        add(rozklad, BorderLayout.PAGE_END);
        add(rozklad2, BorderLayout.LINE_END);

        zwijanie = new JScrollPane(rozklad);

//        pasek_postepu = new JProgressBar(1, 100);
//        pasek_postepu.setValue(0);
//        pasek_postepu.setStringPainted(true);
//        pasek_postepu.setBounds(600, 200, 110, 500);

        stworz_caly_pasek_meni("Plik,Dodaj,Pomoc");

    }

    public final void stworz_caly_pasek_meni(String lista_pasek) {

        tab_pasek = lista_pasek.split(",");
        pasek_meni = new JMenuBar();
        pdp = new JMenu[tab_pasek.length];
        rozklad.add(pasek_meni);
        setJMenuBar(pasek_meni);

        for (int i = 0; i < tab_pasek.length; i++) {

            pdp[i] = new JMenu(tab_pasek[i]);
            setJMenuBar(pasek_meni);
            pasek_meni.add(pdp[i]);

            if (i == 0) {
                stworz_Plik("Otwórz,Zapisz,Zapisz jako...,Zamknij", wykonaj_plik);
            } else if (i == 1) {
                stworz_Dzialanie("Odcienie szarości,Sepia,Negatyw,Nasycenie barw", wykonaj_dzialanie);
            } else {
                stworz_Pomoc("O mnie, O programie, Najczęściej zadawane pytania", wykonaj_pomoc);
            }

        }
    }

    public void stworz_Plik(String lista_Plik, ActionListener e) {

        tab1 = lista_Plik.split(",");

        for (int i = 0; i < tab1.length; i++) {

            wybor = new JMenuItem(tab1[i]);
            pdp[0].add(wybor);
            wybor.addActionListener(e);

        }
    }

    public void stworz_Dzialanie(String lista_Dodaj, ActionListener e) {

        tab2 = lista_Dodaj.split(",");

        for (int i = 0; i < tab2.length; i++) {

            wybor = new JMenuItem(tab2[i]);
            pdp[1].add(wybor);
            wybor.addActionListener(e);

        }
    }

    public void stworz_Pomoc(String lista_Pomoc, ActionListener e) {

        tab3 = lista_Pomoc.split(",");

        for (int i = 0; i < tab3.length; i++) {

            wybor = new JMenuItem(tab3[i]);
            pdp[2].add(wybor);
            wybor.addActionListener(e);

        }
    }

//    public class klasa_zadan implements ActionListener, WindowListener, ComponentListener, MouseListener {
    public class klasa_zadan implements ActionListener {

        BufferedImage obraz;

        public void actionPerformed(ActionEvent e) {
            String polecenie = e.getActionCommand();

            if (polecenie.equals("Otwórz")) {
                try {
                    otworz();
                } catch (IOException ex) {
                    Logger.getLogger(uklad_gl.class.getName()).log(Level.SEVERE, null, ex);
                }
            }

        }

        public void otworz() throws IOException {
            otworz = new JFileChooser("C:/");
            FileNameExtensionFilter rastrowa = new FileNameExtensionFilter("Pliki grafiki rastrowej(.jpeg,.png.,gif...)", "jpeg", "jpg", "gif", "png", "bmp");

            otworz.setFileFilter(rastrowa);

            int a = otworz.showOpenDialog(null);

            if (a == JFileChooser.APPROVE_OPTION) {
                String nazwa_pliku = otworz.getSelectedFile().getAbsolutePath();
                String roz = nazwa_pliku.substring(nazwa_pliku.lastIndexOf('.') + 1);

                obraz = ImageIO.read(otworz.getSelectedFile());
                rozklad = new JPanel() {
                    @Override
                    protected void paintComponent(Graphics g) {
                        Graphics g2 = g.create();
                        g2.drawImage(obraz, 0, 0, getWidth(), getHeight(), null);
                        g2.dispose();
                    }
                };
                add(rozklad);
                revalidate();
                repaint();
            }
        }
    }
} 
```

**klasa_zadan**

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.imageio.ImageIO;
import javax.swing.JFileChooser;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.filechooser.FileNameExtensionFilter;

//public class klasa_zadan extends JFrame implements ActionListener, WindowListener, ComponentListener, MouseListener {
public class klasa_zadan extends JFrame implements ActionListener {

    BufferedImage obraz;
    JFileChooser otworz, zapisz_jako;

    public void actionPerformed(ActionEvent e) {
        try {
            String polecenie = e.getActionCommand();

            if (polecenie.equals("Otwórz")) {
                otworz();
            }

            if (polecenie.equals("Zapisz jako...")) {
                zapisz_jako();
            }

            if (polecenie.equals("Zamknij")) {
                zamknij();
            }
        } catch (IOException ex) {
            Logger.getLogger(klasa_zadan.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    public void otworz() throws IOException {
        otworz = new JFileChooser("C://");

        FileNameExtensionFilter rastrowa = new FileNameExtensionFilter("Pliki grafiki rastrowej(.jpeg,.png.,gif...)", "jpeg", "jpg", "gif", "png", "bmp");
        otworz.setFileFilter(rastrowa);
        int a = otworz.showOpenDialog(null);

        if (a == JFileChooser.APPROVE_OPTION) {
            String nazwa_pliku = otworz.getSelectedFile().getAbsolutePath();
            // String roz=nazwa_pliku.substring(nazwa_pliku.lastIndexOf('.')+1);

            /*final BufferedImage*/ obraz = ImageIO.read(otworz.getSelectedFile());
            final JPanel rozklad = new JPanel(new BorderLayout()) {
                @Override
                protected void paintComponent(Graphics g) {
                    Graphics g2 = (Graphics2D) g;
                    g2.drawImage(obraz, 0, 0, this);
                    //g2.dispose();             
                }
            };
            Dimension rozmiar = new Dimension(obraz.getWidth(), obraz.getHeight());
            add(rozklad);
            revalidate();
            repaint();
        }
    }

    public void zapisz() throws IOException {
        File plik = zapisz_jako.getSelectedFile();
        String nazwa_pliku = plik.getAbsolutePath();
        String roz = nazwa_pliku.substring(nazwa_pliku.lastIndexOf(".") + 1);
        ImageIO.write(obraz, roz, plik);         //niewiadomo, czy ta metoda działa!!!!                 
    }

    public void zapisz_jako() { //zapisanie pliku do innego formatu jest uzależnione od rodzaju pliku graficznego
        zapisz_jako = new JFileChooser("C://");
        zapisz_jako.setSelectedFile(new File("beznazwy.jpg")); //tworzy plik, który będzie zapisany z domyślną nazwą
        zapisz_jako.setFileSelectionMode(JFileChooser.FILES_ONLY);

        FileNameExtensionFilter rastrowa = new FileNameExtensionFilter("Pliki grafiki rastrowej(.jpeg,.png.,gif...)", "jpeg", "jpg", "gif", "png", "bmp");
        zapisz_jako.setFileFilter(rastrowa);

        int a = zapisz_jako.showSaveDialog(null);

        if (a == JFileChooser.APPROVE_OPTION) {
            File plik = zapisz_jako.getSelectedFile();
            String nazwa_pliku = plik.getAbsolutePath();
            String roz;

            if (nazwa_pliku.indexOf(".jpg") == -1 && nazwa_pliku.indexOf(".png") == -1 && nazwa_pliku.indexOf(".gif") == -1) {
                nazwa_pliku += ".jpg"; //zostaw jpg jako domyślny
//                roz = "jpg";
//                plik = new File(nazwa_pliku);
            } else {
                roz = nazwa_pliku.substring(nazwa_pliku.lastIndexOf(".") + 1);
                try {
                    ImageIO.write(obraz, roz, plik);
                } catch (IOException ex) {
                    Logger.getLogger(klasa_zadan.class.getName()).log(Level.SEVERE, null, ex);
                }
            }
        }
    }

    public void zamknij() {
        int tn = JOptionPane.showConfirmDialog(null,
                "Czy na pewno chcesz zakończyć działanie z programem?", "Widaomość",
                JOptionPane.YES_NO_OPTION, 0, null);

        if (tn == 0) {
            System.exit(0);
        }
    }
} 
```**

# windows-8 - 检查是否会显示虚拟键盘（或者是否存在硬件键盘？）

> ID：14158541
> 
> 赞同：2
> 
> 时间：2013-01-04T13:57:41.120
> 
> 标签：windows-8, windows-runtime

在我的应用程序（WinRT App、C#）中，如果我将焦点设置在 TextBox ( ) 上，我需要知道是否会显示虚拟键盘`TextBox.Focus()`。这个想法是在虚拟键盘不显示时自动设置焦点（否则它会太分散注意力 - 如果用户想在平板电脑上编辑文本，则必须手动聚焦 TextBox）。

`new KeyboardCapabilities().KeyboardPresent > 0`不工作，因为它总是正确的（参见[http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/5be268ba-b662-4a0e-ac82-ac1e90c31b56/](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/5be268ba-b662-4a0e-ac82-ac1e90c31b56/)）。

谢谢你的帮助。

# android - 如何记录和回放用户界面操作？

> ID：14158545
> 
> 赞同：1
> 
> 时间：2013-01-04T13:57:59.527
> 
> 标签：android

有没有办法记录给定应用程序的所有用户界面操作，然后自动重播它们？

# java - 我可以本地化 JOptionPane Yes/No/Cancel 选项吗？

> ID：14158555
> 
> 赞同：5
> 
> 时间：2013-01-04T13:58:32.227
> 
> 标签：java, swing, localization, joptionpane, confirmation

我有一个关于`JOptionPane.showConfirmDialog`. 我得到的按钮是和`Yes`，但我想知道是否可以将这三个按钮本地化为我的语言？我意识到我可以与我自己创建一个确认对话，但我想知道这是否也可能。`No``Cancel``JButtons`

提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-08-12T14:25:57.187

简单的方法是使用所需的语言环境设置 JOptionPane，如下所示：

```
Locale locale = new Locale("pt","BR");
JOptionPane.setDefaultLocale(locale); 
```

如果您有一个处理来自 ResourceBundle 的所有消息的单例类，那么您只需在语言环境初始化中设置一次。例如：

```
public void setLocale(Locale locale) {
    if (_bundle == null || !locale.equals(_locale)) {
        _locale = locale;
        _bundle = ResourceBundle.getBundle("resources.i18n.MessagesBundle", locale);

        JOptionPane.setDefaultLocale(_locale);

        _logger.info("Got new resource bundle for language-country: " + _locale.getLanguage() + "-" +
                locale.getCountry());
    }
} 
```

干杯!

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-02T22:27:08.847

这就够了：

```
UIManager.put("OptionPane.yesButtonText", "Ya"); 
```

ETC

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-31T08:59:40.767

Swing PLAF 资源包提供了大多数使用语言的标准对话框的所有本地化消息，包括德语，您可以在 JDK 源中找到它们。参见例如英文消息：

*   [http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/com/sun/swing/internal/plaf/basic/resources/basic.java](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/com/sun/swing/internal/plaf/basic/resources/basic.java)
*   [http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/com/sun/java/swing/plaf/windows/resources/windows.java](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/com/sun/java/swing/plaf/windows/resources/windows.java)
*   [http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/com/sun/java/swing/plaf/gtk/resources/gtk.java](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/com/sun/java/swing/plaf/gtk/resources/gtk.java)
*   ...

非英语语言的字符串值由相邻的捆绑文件提供。

如果是一种很少使用的语言，您只需为所需语言再创建一个文件并将其放置在类路径的任何位置，就可以向这些系列中的任何一个再添加一个包。.java 和 .properties 格式的捆绑包同样工作良好，尽管 .java 格式可能对 Unicode 更友好...

`com.sun`尽管直接将内容添加到包中可能会违反 Java 许可证，但请记住这一点可能会很好。所以为了安全起见，将你的额外资源移动到你自己的包中并像这样注册它可能是明智的`UIManager`：

```
UIManager.getDefaults().addResourceBundle("mypackage.swing.plaf.basic.resources.basic"); 
```

# django - 如何使用初始数据预填充作为 GenericRelationship 的模型？

> ID：14158557
> 
> 赞同：2
> 
> 时间：2013-01-04T13:58:33.343
> 
> 标签：django, django-models, django-forms

我有一个通用模型的 CreateView，我正在尝试用与模型 UpstreamClientModel 相关的数据（content_type、object_id、content_object）预先填充它。我的问题是……如果我从 AddressForm 中排除这些字段，我在哪里填写它们？我在想也许 CreateView 的 get_initial() 是答案，但我不太确定：

```
class UpstreamClientModel(models.Model):
    users = models.ManyToManyField(User, related_name='owns', 
            verbose_name='users')
    client_name = models.CharField(max_length=30, unique=True)
    url = models.URLField(unique=True, null=False, 
            help_text="The client's main URL")
    phones = generic.GenericRelation(Phone)
    address = generic.GenericRelation(Address, 
            verbose_name='Postal address')
    social_media = generic.GenericRelation(SocialMediaAccountModel,
            verbose_name='Social media account')
    language = models.CharField(max_length=7, choices=LANGUAGES)
    is_active = models.BooleanField('Active client', default='True')
    tags = TaggableManager(verbose_name='industry', 
            help_text='comma-separated values, or "uncategorized"')

    def __unicode__(self):
        return self.client_name

class Address(models.Model):
    recipient = models.CharField(max_length=45)
    address_line_1 = models.CharField('Address line 1', max_length=45)
    address_line_2 = models.CharField('Address line 2', 
            max_length=45, blank=True, help_text='only if needed')
    town_city = models.CharField('Town/City', max_length=50)
    state_province = models.CharField('State/Province', max_length=45,
            blank=True)
    post_code = models.CharField('Postal Code', max_length=15)
    country = models.CharField(max_length=20, blank=True)
    # generic relationships so I can attach to other objects later on
    content_type = models.ForeignKey(ContentType)
    object_id = models.PositiveIntegerField()
    content_object = generic.GenericForeignKey('content_type', 'object_id')

    def __unicode__(self):
        return '%s, %s, %s' % (
                self.address_line_1, 
                self.town_city, 
                self.post_code
            )

    class Meta:
        verbose_name = 'Postal address'
        verbose_name_plural = 'Postal addresses'
        unique_together = ('recipient', 'address_line_1',
                'town_city', 'post_code')

###### view (r'^clients/(?P<pk>\d+)/address/$')

class ClientAddressView(LoginRequiredMixin, AdminOrCoreRequiredMixin, CreateView):
    form_class = AddressForm
    template_name = 'clients/address_form.html'
    success_url = '/clients/'

    def get_initial(self):
        initial = super(ClientAddressView, self).get_initial()
        # Copy the dictionary so we don't accidentally change a mutable dict
        initial = initial.copy()
        client = UpstreamClientModel.objects.get(pk=self.kwargs['pk'])
        content_type = ContentType.objects.get_for_model(client)
        initial['content_type'] = content_type
        initial['object_id'] = self.kwargs['pk']
        return initial 
```

这有效，但显示了不应公开的字段。如果我想从表单中排除 content_type 和 object_id，我不能用 get_initial() 填充它们

# c++ - 编译使用 curl 的代码时出现 C++ 错误

> ID：14158558
> 
> 赞同：1
> 
> 时间：2013-01-04T13:58:43.493
> 
> 标签：c++, curl

我找到了相同的代码来从 C++ 的网页中读取数据。就像这样：

```
#include <iostream>
#include <string>
#include <C:\curl\curl.h>
// Right path, I am sure.

static size_t WriteCallback(void *contents, size_t size, size_t nmemb, void *userp)
{
    ((std::string*)userp)->append((char*)contents, size * nmemb);
    return size * nmemb;
}

int main(void)
{
    CURL *curl;
    CURLcode res;
    std::string readBuffer;

    curl = curl_easy_init();
    if(curl) {
        curl_easy_setopt(curl, CURLOPT_URL, "http://www.google.com");
        curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, WriteCallback);
        curl_easy_setopt(curl, CURLOPT_WRITEDATA, &readBuffer);
        res = curl_easy_perform(curl);
        curl_easy_cleanup(curl);

        std::cout << readBuffer << std::endl;
    }
    return 0;
} 
```

但它没有按预期工作。这是错误消息：

```
1>------ Build started: Project: deneme, Configuration: Debug Win32 ------
1>  deneme.cpp
1>deneme.obj : error LNK2019: unresolved external symbol __imp__curl_easy_cleanup referenced in function _main
1>deneme.obj : error LNK2019: unresolved external symbol __imp__curl_easy_perform referenced in function _main
1>deneme.obj : error LNK2019: unresolved external symbol __imp__curl_easy_setopt referenced in function _main
1>deneme.obj : error LNK2019: unresolved external symbol __imp__curl_easy_init referenced in function _main
1>C:\Users\nazif\Documents\Visual Studio 2010\Projects\deneme\Debug\deneme.exe : fatal error LNK1120: 4 unresolved externals
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

我怎样才能解决这个问题？

基本上，我想在我的 C++ 代码中使用 curl 来获取某个网页的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T14:09:06.770

只包括相关的`#include <C:\curl\curl.h>`函数原型等。您还需要做的是更新您的项目设置以告诉链接器链接到适当的 curl 库。

由于您使用的是 Visual Studio，请右键单击您的项目并选择属性。然后转到配置属性/链接器。然后转到 Linker -> Input 并在字段中输入您的 lib 文件的名称（可能有`curl.lib`in `C:\curl\`）`Additional Dependencies`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T15:51:19.197

按照这些说明

> MSVC 6 集成开发环境
> 
> * * *
> 
> 一个最小的 VC++ 6.0 参考工作区 (vc6curl.dsw) 可用于源分发存档，以允许正确构建两个包含的项目，libcurl 库和 curl 工具。
> 
> 1）用MSVC6的IDE打开vs/vc6/vc6curl.dsw工作区。
> 
> 2) 从顶部菜单中选择“构建”。
> 
> 3) 从下拉菜单中选择“批量构建”。
> 
> 4) 确保八个项目配置被“选中”。
> 
> 5) 单击“构建”按钮。
> 
> 6) 一旦构建了八个项目配置，您就完成了。
> 
> 动态和静态 libcurl 库内置于调试和发布风格中，并且可以分别位于其自己的子目录 dll-debug、dll-release、lib-debug 和 lib-release 中，所有这些库都位于 'vs/vc6/ 下lib' 子目录。
> 
> 以同样的方式创建了四个 curl 可执行文件，每个都使用其各自的库。生成的 curl 可执行文件位于其自己的子目录 dll-debug、dll-release、lib-debug 和 lib-release 中，位于“vs/vc6/src”子目录下。
> 
> 这些参考 VC++ 6.0 配置是使用动态 CRT 生成的。
> 
> 有意地，这些参考 VC++ 6.0 项目和配置不使用第三方库，例如 OpenSSL 或 Zlib，以便为所有新用户正确编译和配置，而无需进一步要求。
> 
> 如果您需要更多“参与”的内容，您可以调整它们以供您自己使用，或者探索上述“命令行中的 MSVC”中描述的 makefile 世界。

构建完成后，您将在其中一个文件夹中拥有一个 .lib 文件

# php - PHP 如果为空，或者 isset，则执行此操作

> ID：14158561
> 
> 赞同：-4
> 
> 时间：2013-01-04T13:58:53.303
> 
> 标签：php

我有以下代码：

```
<p><? echo $langdata['oneprodpage_brand']; ?>:</strong> <? echo $thisproduct['brandname']; ?></p> 
```

它揭示了这一点：

> 品牌名称：{品牌名称}

如果没有给出品牌，则默认添加“无品牌”（所有数据都存储在数据库中）

我想做一些事情，比如如果 php 发现这个值“没有品牌”然后做 smthing ...

我怎样才能做到？

我试过这个

```
 <? if ($thisproduct['brandname'] == Without brand) { ?>
 <? } else { ?>
 <p><? echo $langdata['oneprodpage_brand']; ?>:</strong> <? echo $thisproduct['brandname']; ?></p>
 <? }; ?> 
```

但它不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T14:04:16.500

您忘记了一些没有品牌的报价，您的代码将是：

```
<? if ($thisproduct['brandname'] == "Without brand") { ?>
 <? } else { ?>
 <p><? echo $langdata['oneprodpage_brand']; ?>:</strong> <? echo $thisproduct['brandname']; ?></p>
 <? }; ?> 
```

您想要在无品牌时执行的代码应该在后面：

```
<? if ($thisproduct['brandname'] == "Without brand") { ?> 
```

之前：

```
<? } else { ?> 
```

但是 imo 它真的不是你的可读方式，我更喜欢：

```
<?php
    if ($thisproduct['brandname'] == "Without brand") {
        // Do something
    } else {
        echo "<p>". $langdata['oneprodpage_brand'] ."</strong>". $thisproduct['brandname'] ."</p>";
    }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T14:08:22.763

你可以尝试这样的事情：

```
$withoutBrandNames = array('Without brand');
if (in_array($thisproduct['brandname'], $withoutBrandNames)) {
    $thisproduct['brandname'] = 'This product has no brand';
}
echo $thisproduct['brandname']; 
```

或者，如果您按照评论的建议：

```
if (stristr($thisproduct['brandname'], 'Without brand') === false) {
    $thisproduct['brandname'] = 'This product has no brand';
}
echo $thisproduct['brandname']; 
```

我使用了不区分大小写的比较功能，以防可能出现大小写异常，选择当然是你自己的。

PS：正如评论所暗示的，如果标签都包含代码，您不必继续打开和关闭标签，您甚至可以使用这样的短期语法：

```
<?php if (statement): ?>
    <p> Some lovely HTML</p>
<?php else: ?>
    <p>Some different lovely HTML</p>
<?php endif; ?> 
```

我讨厌视图文件中的花括号，事实上，我通常讨厌视图文件中的 PHP - 但这似乎是必要的。

# c++ - 在 C/C++ 中通过套接字发送 int

> ID：14158564
> 
> 赞同：6
> 
> 时间：2013-01-04T13:58:56.143
> 
> 标签：c++, c, winsock, qnx-neutrino

我在通过套接字发送整数数组时遇到了麻烦。代码看起来像这样

程序1：（在windows上运行）

```
int bmp_info_buff[3];

/* connecting and others */

/* Send informations about bitmap */
send(my_socket, (char*)bmp_info_buff, 3, 0); 
```

程序 2：（在中微子上运行）

```
/*buff to store bitmap information size, with, length */
int bmp_info_buff[3];

/* stuff */

/* Read informations about bitmap */
recv(my_connection, bmp_info_buff, 3, NULL);
printf("Size of bitmap: %d\nwidth: %d\nheight: %d\n", bmp_info_buff[0], bmp_info_buff[1], bmp_info_buff[2]); 
```

它应该打印位图大小：64
宽度：8
高度：8

位图大小：64
宽度：6
高度：4096
我做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-04T14:01:13.997

当您将`bmp_info_buff`数组作为 char 数组发送时，大小`bmp_info_buff` 不是 3，而是`3 * sizeof(int)`

同样对于`recv`

代替

```
send(my_socket, (char*)bmp_info_buff, 3, 0);
recv(my_connection, bmp_info_buff, 3, NULL); 
```

经过

```
send(my_socket, (char*)bmp_info_buff, 3*sizeof(int), 0);
recv(my_connection, bmp_info_buff, 3*sizeof(int), NULL); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-04T14:00:51.327

`send()`and的大小参数以`recv()`字节为单位，而不是`int`s。您发送/接收的数据太少。

你需要：

```
send(my_socket, bmp_info_buff, sizeof bmp_info_buff, 0); 
```

和

```
recv(my_connection, bmp_info_buff, sizeof bmp_info_buff, 0); 
```

另请注意：

*   这使您的代码对字节字节序问题敏感。
*   的大小`int`在所有平台上都不相同，您也需要考虑这一点。
*   无需转换指针参数，它是`void *`.
*   您还应该添加代码来检查返回值，I/O 可能会失败！
*   的最后一个参数`recv()`不应该`NULL`像你的代码那样，它是一个标志整数，就像`send()`.

# c# - 无法更新实体集

> ID：14158565
> 
> 赞同：1
> 
> 时间：2013-01-04T13:58:56.967
> 
> 标签：c#, asp.net, .net, asp.net-mvc, asp.net-mvc-4

以下代码：

```
sistema_log_openedPdfs entity = new sistema_log_openedPdfs();
entity.idUser = guid;
entity.path = fullAbsPath;
context.sistema_log_openedPdfs.Add(entity);
context.SaveChanges(); 
```

我得到了这个疯狂的例外：

`[UpdateException: Unable to update the EntitySet 'sistema_log_openedPdfs` `because it has a DefiningQuery and no <InsertFunction> element exists in the` `<ModificationFunctionMapping> element to support the current operation.]`

Lokking寻求帮助我找不到任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T14:02:49.827

您是否忘记为 ? 设置主键`sistema_log_openedPdfs`？

# html - 删除元素之间不必要的间距

> ID：14158569
> 
> 赞同：3
> 
> 时间：2013-01-04T13:59:09.663
> 
> 标签：html, css

好的，所以我有一个小菜单栏，菜单中的三个元素还有更多的子菜单。但是菜单栏中的元素之间有不必要的间距，而且我创建的子菜单也有不必要的背景宽度，我在代码中将其涂成白色以使读者理解。由于这种不必要的宽度，应该出现在菜单栏上的悬停效果会出现，即使鼠标悬停在这种情况下是白色的不可见宽度上，但在实时代码上它不会是白色的。因此，由于它在实时代码中不可见，因此访问者可能会对为什么即使将鼠标从子菜单中移开，子菜单仍未隐藏的原因感到困惑。所以我想删除元素之间不必要的间距，并使它们在菜单栏中正确对齐，并将子菜单的宽度减小到子菜单内链接的宽度。我知道这可能有点难以解释，所以我发布了这个小提琴链接。[演示](http://jsfiddle.net/W5PsY/)

我无法发布 CSS 代码，因为只允许在问题中发布 30000 个字符，因此您可以通过从 jsfiddle 复制在本地计算机上编译代码。对不起，额外的努力。Html 我也发布只是因为有必要发布一些代码。

**HTML 代码**

```
<html>
    <head>

        <link rel="stylesheet" type="text/css" href="expertystemsHome2.css" />
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Expertystems</title>

    </head>

    <body>
        <div id="menu">
            <ul class="menu" id="tempMenu">
                <li class="Home"><a href="">AAAAAA</a></li>
                <li class="Repair"><a  href="">BBBBBB</a>  
                        <ul class="submenu">
                            <li>
                               <a  href="">b1</a>
                            </li>
                            <li>
                                <a  href="">b2</a>
                            </li>
                            <li>
                                <a  href="">b3</a>
                            </li>
                            <li>
                                <a  href="">b4</a>
                            </li>
                            <li>
                                <a  href="">b5</a>
                            </li>
                            <li>
                                <a  href="">b6</a>
                            </li>
                            <li>
                                <a  href="">b7</a>
                            </li>
                            <li>
                                <a  href="">b8</a>
                            </li>
                        </ul>

                </li>

                <li class="Unlock"><a id="tempUnlock" href="">CCCCCC</a>

                        <ul id="mozillaPain2" class="submenu2">
                            <li>
                                <a href="">c1</a>
                            </li>
                            <li>
                                <a href="">c2</a>
                            </li>
                            <li>
                                <a href="">c3</a>
                            </li>
                            <li>
                                <a href="">c4</a>
                            </li>
                        </ul>

                </li>    
                 <li class="Expertise"><a id="Expertise" href="">DDDDDD</a>

                        <ul id="mozillaPain3" class="submenu4">
                            <li>
                                <a href="">d1</a>
                            </li>
                            <li>
                                <a href="">d2</a>
                            </li>
                            <li>
                                <a href="">d3</a>
                            </li>
                            <li>
                                <a href="">d4</a>
                            </li>
                            <li>
                                <a href="">d5</a>
                            </li>
                            <li>
                                <a href="">d6</a>
                            </li>
                            <li>
                                <a href="">d7</a>
                            </li>
                            <li>
                                <a href="">d8</a>
                            </li>
                            <li>
                                <a href="">d9</a>
                            </li>
                            <li>
                                <a href="">d10</a>
                            </li>

                            <li>
                                <a href=""><img style="width: 158px;height: auto;" src="images/creation.png"></a>
                            </li>

                        </ul>

                </li>
                <li class="Careers"><a  href="">EEEEEE</a></li>
                <li class="Contact"><a  href="">FFFFFF</a></li>
            </ul>
        </div>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T14:11:43.787

您是否使用工具来生成此代码？如果是这样，它似乎不起作用。

**以下是正在发生的事情的摘要：**

如果您仔细查看并检查具有所有间距的元素。元素本身有这些非常大`margin-left:x;`

```
 ul.menu .Unlock a {
    margin-left: 185px;
    ....

    ul.menu .Expertise a {
    margin-left: 277px;
    .... 
```

如果您手动检查并删除所有这些边距，您的菜单将开始组合在一起。

但我会仔细研究您可能正在使用的工具，因为这确实是您的问题所在。

[更新小提琴](http://jsfiddle.net/W5PsY/3/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T14:00:38.813

尝试添加`style="margin: 0;"`到 ul 元素或添加`ul { margin: 0; }`到您的样式表

# show-hide - 显示/隐藏按钮：将结果放入 POST 变量

> ID：14158570
> 
> 赞同：0
> 
> 时间：2013-01-04T13:59:08.160
> 
> 标签：show-hide

我的网站菜单中有很长的链接列表。我默认显示前三个链接，其余链接有一个“显示/隐藏”按钮。

我希望能够根据访问者的偏好更改默认值（显示或隐藏）。

--> 所以默认值是“隐藏”开始的。如果访问者单击“显示”然后单击一个链接，我希望下一页默认为“显示”。如果他然后单击隐藏，则默认为“隐藏”。

下面是我的菜单。1-2-3 始终显示，4-5-6 显示或隐藏。

```
<ul>
  <li><a href="test.php">1</a></li>
  <li>2</li>
  <li>3</li>

  <div class="liste-cachee">
    <div class="quotecontent">
     <div style="display: none;">
      <li>4</li>
      <li>5</li>
      <li>6</li>
     </div>
    </div>
  </div>

 <input type="button" value="Plus / Moins" onclick="if (
 this.parentNode.parentNode.getElementsByTagName('div')[1].getElementsByTagName('div')[0].style.display != 'block') { 
 sendMenuDisplay('block'); 
 this.parentNode.parentNode.getElementsByTagName('div')[1].getElementsByTagName('div')[0].style.display = 'block'; 
 } else { 
 sendMenuDisplay('none'); 
 this.parentNode.parentNode.getElementsByTagName('div')[1].getElementsByTagName('div')[0].style.display = 'none';  }" />

</ul> 
```

我的问题是：如何保存访问者选择的内容（显示或隐藏），将其放入 $_POST 变量中并将其用作下一页的默认值？

感谢您的时间和帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T16:18:19.220

您可以 POST 或 PUT 值并放入 cookie 或会话属性以供后续页面使用。您还可以使用 ajax POST 或 PUT 值并将该值放入 cookie 或会话属性中以供以后使用。您还可以将值存储在数据库中并跨用户会话使用。

# javascript - 当一个函数重新定义自己时，原型会发生什么？

> ID：14158573
> 
> 赞同：4
> 
> 时间：2013-01-04T13:59:13.720
> 
> 标签：javascript, prototype

[我在 Stoyan Stefanov 的JavaScript 模式](https://rads.stackoverflow.com/amzn/click/com/0596806752)一书中看到了以下代码（经过编辑以去除多余的脂肪）：

```
function Universe() {
    var instance = this;
    Universe = function() {
        return instance;
    }
}

Universe.prototype.nothing = true;
var uni = new Universe();
Universe.prototype.everything = true;
var uni2 = new Universe();

uni.nothing;     // true
uni2.nothing;    // true, but I was expecting undefined
uni.everything;  // undefined
uni2.everything; // undefined, but I was expecting true 
```

我期待`nothing`被分配给原始函数的原型，并被`everything`分配给闭包的原型（因为第二次分配发生在重新定义之后）。但是，输出显示发生了一些奇怪的事情，而这本书确实没有解释它。我还注意到：

1.  `Universe.prototype`正如我所料，重新定义函数后确实指向不同的对象。
2.  重新定义后创建的其他实例仍将原始原型对象作为其`__proto__`. 这就是我不明白的。

有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T14:14:10.693

这是一个单例模式。首次创建 Universe 时，重新定义了 Universe 符号。（不过，它仍然存在于一种不确定状态：实例对它有一些引用。`__proto__`例如在非严格模式下。）

新的 Universe 符号实际上*不是*构造函数，它只是返回第一个创建的实例。第二次调用中的 new 关键字创建了一个以第二个 Universe 作为原型的新实例，但新函数只是忽略它并返回存储的第一个实例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T14:14:59.263

`uni`和`uni2`是同一个对象，因为在函数的`instance`两个版本中都返回了 的值`Universe`。

这是相同的代码，但没有`instance`从重新定义中返回：http `Universe`: [//jsfiddle.net/nmaBn/](http://jsfiddle.net/nmaBn/)

# ubuntu - SVN / Git / Bash

> ID：14158576
> 
> 赞同：5
> 
> 时间：2013-01-03T22:35:05.793
> 
> 标签：ubuntu, bash, svn, git

我正在和一个团队一起做一个项目。他们使用 SVN，但我更喜欢 git。虽然我可以通过简单地在 SVN 上变得更好来更轻松地做到这一点 - 我更愿意让我的生活变得复杂并使用 Git。

这是他们的设置：

```
 ~/www(svn)
   |       \
trunk(svn)  mybranch(svn) 
```

我想拥有

```
/srv/git/www 
```

用树枝树干和 mybranch

当我在主干分支的 while 内执行 git pull时，如果脚本运行 svn update并使用任何 svn 提交更新 git 分支（以便 git 历史记录和提交消息与 svn 和提交消息匹配），`/srv/git/www`我会喜欢它`~/www/trunk`

`git pull`它会在 git mybranch 分支上执行相同的行为

我的工作流程将是

```
git checkout trunk
git pull
git checkout mybranch
git rebase trunk 
```

做一些工作

（如果树干自从我拉上它后还没有更新）：

```
git commit 
git push
git checkout trunk
git merge mybranch
git push 
```

如果 git hook 会在代码被推送到这些分支中的任何一个时触发 svn commit，我会喜欢它。

请提供任何建议。我最初尝试只使用 SVN - 但对它的锁定感到非常沮丧，并且每当合并出错时都必须重新结帐，以至于我对 SVN 非常恼火。

如果有人有更好的模型来做到这一点，请告诉我。否则，如果您能指出如何使用 git 来做这件事，那就太好了！我知道有一个 git svn 命令，但我不相信它 - 我希望上面的内容更安全（尽管对我来说似乎有点疯狂。）

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T20:47:31.803

您已经描述了[SubGit 的](http://subgit.com/2.0/)工作原理。从 2.0 开始，它允许使用预接收 Git 挂钩（在“git push”上执行）在 Git 和 SVN 之间进行双向翻译。在你的机器上运行

```
$ subgit configure --svn-url <URL_of_repository_root> repo.git
$ #adjust repo.git/subgit/{config,passwd,authors.txt} to set auth options, branches to translate and SVN<->Git authors mapping
$ subgit install repo.git 
```

然后克隆 repo.git （即使它在同一台机器上只是为了使“预接收”挂钩工作）

```
$ git clone repo.git myproject
$ cd myproject
$ #do something with master
$ git push origin master 
```

从“master”访问的每个新提交都将被转换为 SVN 中的提交。默认情况下，其他分支也是如此。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T16:50:28.870

> 我最初尝试只使用 SVN - 但对它的锁定感到非常沮丧，并且每当合并出错时都必须重新结帐，以至于我对 SVN 非常恼火。

我真的没有注意到 Subversion 有你似乎有的问题。我没有体验到它的*锁定*和与 Subversion 的合并工作得很好。事实上，Subversion 合并的问题比 Git 合并的问题要少。我怀疑你的大部分挫败感是在使用不熟悉的软件而不是 Subversion 本身的先天问题。我也对无法按照我习惯的方式运行的软件感到沮丧。

但是，您最好习惯使用 Subversion，而不是绕过这个问题。您将一遍又一遍地遇到 Subversion，因为它在软件世界中很流行。它使用简单并且做得很好。在这个世界上，你可能更喜欢 OS X 和 Linux 而不是 Windows，但你仍然需要了解 Windows。我知道我也对不熟悉的软件感到沮丧。然而，与 Windows 不同的是，Subversion 并不邪恶。此外，它确实工作得很好。

我喜欢 Git 的一件事是我非常想念 Subversion 的一件事是能够在不影响主存储库的情况下提交我的工作。我在 Git 中的工作流程如下所示：

```
git checkout
git pull
git add
git commit
git add
git commit
git add
git commit
git add
git commit
git add
git commit
git add
git commit
git push 
```

如果您像我一样是串行提交者，您可能想尝试[Git-SVN](http://viget.com/extend/effectively-using-git-with-subversion)：这允许您在本地使用 Git 并进行串行提交，但是当您进行推送和拉取时，您实际上是在与 Subversion 存储库交谈。然而，这并不意味着你可以简单地假装你只在使用 Git。当我分支和合并时，我仍然必须直接与 Subversion 对话。

如果您不是串行提交者，Git-SVN 可能不会为您买太多。你最终所做的只是增加了复杂性和更多的挫败感。

Subversion 设计用于处理持续集成环境中使用的*不稳定主干*模型。这意味着每个人通常共享同一个分支。它迫使您与他人相处融洽，并进行小的增量更改。但是，没有理由不能在 Subversion 中创建自己的私有分支并在那里开展工作。

我做了很多代码重组，这意味着移动文件并做很多一天无法完成的工作。我不能在所有其他开发人员正在使用的同一个分支上工作，所以我创建了自己的私有分支。如果有人遇到合并问题，那会是我，因为我不只是在这里或那里修改文件，我正在更改代码的整个布局。然而，Subversion 几乎总是从容应对合并。我定期变基。当我完成我的工作时，我会毫无问题地进行大规模交付。然后，我将删除我的分支。

# java - JDBC 分布式事务和显式回滚/提交

> ID：14158577
> 
> 赞同：3
> 
> 时间：2013-01-04T13:59:42.053
> 
> 标签：java, jdbc, transactions, rollback, distributed-transactions

我正在处理一个为分布式事务配置的现有项目。

该项目正在使用 Hibernate，但由于某些历史原因，我正在处理的部分使用 JDBC 并且需要保持这种方式。

要获得连接，我必须调用一个 API，它会返回休眠会话的 JDBC 连接。

我需要在一个事务中完成一些更新/插入，所以这就是我正在做的事情：

1.  在我的连接上将 autoCommit 设置为 false。
2.  做我的插入（准备语句，执行查询）
3.  调用提交。

在提交时，我得到一个 SQLException，因为显然不允许使用分布式事务显式调用提交/回滚。我应该声明将数据源配置更改为非 XA 不是一种选择。

有什么想法可以解决这个问题吗？

```
 connexionDiff.setAutoCommit(false); 
        psInsertLiv = connexionDiff.prepareStatement(reqInsertLivraison);
        psInsertLivHisto = connexionDiff.prepareStatement(reqInsertLivraisonHisto);
        psSequence = connexionDiff.prepareStatement(reqCleLivraison);

        ps = connexionDiff.prepareStatement(requeteRelivraison);
        rs = ps.executeQuery();

        while(rs.next()) {

            rsSequence = psSequence.executeQuery();
            while ( rsSequence.next() ) {
                sequenceLivraison = rsSequence.getInt(1);
            }

            psInsertLiv.setInt(1, sequenceLivraison);
            psInsertLiv.setInt(2, rs.getInt(1));
            psInsertLiv.executeUpdate();

            psInsertLivHisto.setInt(1, sequenceLivraison);
            psInsertLivHisto.setInt(2, rs.getInt(1));
            psInsertLivHisto.executeUpdate();

            connexionDiff.commit();
        }

    } catch (SQLException ex) {
       try{
        connexionDiff.rollback();
      }catch {
//......
}
    } finally {
        //.....
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T14:06:03.967

当您使用 XA 连接时，您肯定是在使用 JTA 管理您的事务。

如果它是一个独立的 JTA，获取 UserTransaction 并在那里调用 begin 并提交。如果它位于应用程序服务器中，请使用事务注释或应用程序服务器为您提供的任何东西来管理事务。查看[此页面](http://docs.oracle.com/javaee/6/tutorial/doc/bncij.html)以了解它是如何在 JavaEE 6 中完成的。

如果您使用 Spring，您还可以使用事务注释将代码包装在事务中。[这](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/transaction.html)是相关文档。

无论您使用的是 Hibernate 还是纯 JDBC，事务管理都应该是相同的。因此，请检查在您的项目中使用 Hibernate 时它是如何完成的，并遵循相同的步骤。

# python - 为什么我在现实生活中需要私有方法？

> ID：14158584
> 
> 赞同：1
> 
> 时间：2013-01-04T14:00:09.520
> 
> 标签：python, private-members

我了解它是如何工作的，并且我了解语法的含义。但我不明白我为什么要使用它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T14:04:31.523

Python 中没有私有成员，包括方法。双下划线前缀实际上只是私有成员的“约定”，由于名称被进一步破坏，Python 还强制执行了该约定。不过，从外部访问这些方法并非不可能。

但总的来说，没有真正需要让成员真正“私密”。通常，单个下划线前缀用于将成员标记为“内部”，并且要求这些类型的用户单独使用它们。

除此之外，当然仍然拥有私有（或内部）方法的原因是将功能的公共部分提取到方法中，这样您就不必重复自己。

有关 Python 成员缺少隐私的更多信息，请参阅[此问题](https://stackoverflow.com/q/70528/216074)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T14:10:24.260

s假设您有操作**operationA**在同一个类上调用**subOperationA**和**suboperationB** ，并且这些方法作为单独的操作没有意义，它们操纵数据并且您必须防止它们的意外执行（这意味着从**operationA**以外的方法调用）。所以**私有**允许您保护和封装您的方法，将它们的可见性限制在所需的范围内。

# android - 从其父视图组中删除视图时禁用重新加载列表视图中的项目

> ID：14158590
> 
> 赞同：0
> 
> 时间：2013-01-04T14:00:30.877
> 
> 标签：android, android-layout, android-listview, android-linearlayout, android-xml

我有一个带有标题面板和列表视图的布局。

这是布局。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:id="@+id/mainFragmentLayout">

<RelativeLayout
        android:id="@+id/header"
        android:background="@drawable/upper_panel"
        android:layout_height="40dp"
        android:layout_width="fill_parent">

    <TextView android:id="@+id/news_label"
              android:layout_height="wrap_content"
              android:layout_width="wrap_content"
              android:layout_centerVertical="true"
              android:gravity="left"
              android:text="@string/news_label"
              android:textSize="15sp"
              android:textStyle="bold"
              android:layout_marginLeft="54dp"
              android:textColor="@color/white"
            />

    <Button android:id="@+id/refreshButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:background="@drawable/btm_refresh"
            android:layout_centerVertical="true"
            android:layout_marginRight="8dp"
            />
</RelativeLayout>

<ListView
        android:layout_width="wrap_content"
        android:layout_height="0dp"
        android:layout_weight="120"
        android:id="@+id/feedMeMore"
        android:fastScrollEnabled="false"
        android:layout_gravity="center"/> 
```

在 onTouchListener 中，我删除并添加了 RelativeLayot 标头。

```
public boolean onTouch(View view, MotionEvent motionEvent) {

int action=motionEvent.getAction();
switch (action) {
    case MotionEvent.ACTION_DOWN:
        startY = motionEvent.getY();
        break;
    case MotionEvent.ACTION_MOVE:
        float nowY = motionEvent.getY();
        if (startY - nowY > 10)
        {
            if (mainLayout.indexOfChild(headerView) >= 0)
                mainLayout.removeView(headerView);
        }
        else if (startY - nowY < - 100)
        {
                    if (mainLayout.indexOfChild(headerView) < 0)
                    mainLayout.addView(headerView, 0);              
        }
    }
    break;
}
return false;
} 
```

删除标题后，列表视图中的所有显示项目都会重新加载。我有一个图像和文本，它是从网络加载的，每次重新加载文本和图像时。

如何关闭此重新加载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T14:15:34.120

据我说，这是因为您的 headerView 在顶部对齐（即使在线性布局上）并且列表视图在其下方。因此，当您删除标题视图时，它会使列表视图更改其高度，因此所有视图都被重绘。

作为一种解决方案，您可以在 headerview 后面使用一个虚拟视图（需要将父视图更改为 RelativeLayout），其高度与原始标题视图相同，现在您的列表视图将低于该虚拟标题视图而不是原始标题看法。

像这样的东西。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:id="@+id/mainFragmentLayout">

<RelativeLayout
    android:id="@+id/header"
    android:background="@drawable/upper_panel"
    android:layout_height="40dp"
    android:layout_alignParentTop="true"
    android:layout_width="fill_parent">

<TextView android:id="@+id/news_label"
          android:layout_height="wrap_content"
          android:layout_width="wrap_content"
          android:layout_centerVertical="true"
          android:gravity="left"
          android:text="@string/news_label"
          android:textSize="15sp"
          android:textStyle="bold"
          android:layout_marginLeft="54dp"
          android:textColor="@color/white"
        />

<Button android:id="@+id/refreshButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:background="@drawable/btm_refresh"
        android:layout_centerVertical="true"
        android:layout_marginRight="8dp"
        />
</RelativeLayout>

<RelativeLayout
    android:id="@+id/dummyHeader"
    android:background="@drawable/upper_panel"
    android:layout_height="40dp"
    android:layout_alignParentTop="true"
    android:layout_width="fill_parent"/>

<ListView
        android:layout_width="wrap_content"
        android:layout_height="0dp"
        android:layout_weight="120"
        android:id="@+id/feedMeMore"
        android:fastScrollEnabled="false"
        android:layout_gravity="center"/> 
```

# android - 使用Json绘制路径

> ID：14158594
> 
> 赞同：0
> 
> 时间：2013-01-04T14:00:41.670
> 
> 标签：android, json, google-maps

我指的是这个[帖子](https://stackoverflow.com/questions/11745314/why-retrieving-google-directions-for-android-using-kml-data-is-not-working-anymo/11745316#11745316)

我遇到了一个异常，所以我尝试使用 AsyncTask ，就像这篇[文章](https://stackoverflow.com/questions/13452315/draw-a-path-in-google-maps-mapview-using-json)中的最后一个答案一样 。现在应用程序正在运行，没有任何异常，但它没有绘制路径。我不知道是什么问题。

这是代码：[http](http://www.mediafire.com/?lxm7gplzsfdtsx5) ://www.mediafire.com/? lxm7gplzsfdtsx5 我只是用下面的 MainActivity.java 替换 itineraire.java

```
public class MainActivity extends MapActivity {

MapView mapView = null;
MapController mapController;
double long1 = 50.123*1E6;
double lati1 = 13.123*1E6;
double long2 = 50.221*1E6;
double lati2 = 13.221*1E6;
GeoPoint start, dest;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_itineraire);
    mapView = (MapView) findViewById(R.id.mapView);
    mapView.setBuiltInZoomControls(true);

     DirectionsTask getDirectionsTask = new DirectionsTask();
     getDirectionsTask.execute(new GeoPoint((int)(long1),(int)(lati1)), new GeoPoint((int)(long2),(int)(lati2)));

 }

private class DirectionsTask extends AsyncTask<GeoPoint, Void, Route> {

protected Route doInBackground(GeoPoint...geoPoints) {
    start = geoPoints[0];
    dest =  geoPoints[1];

       Parser parser;
        String jsonURL = "http://maps.google.com/maps/api/directions/json?";
        final StringBuffer sBuf = new StringBuffer(jsonURL);
        sBuf.append("origin=");
        sBuf.append(start.getLatitudeE6()/1E6);
        sBuf.append(',');
        sBuf.append(start.getLongitudeE6()/1E6);
        sBuf.append("&destination=");
        sBuf.append(dest.getLatitudeE6()/1E6);
        sBuf.append(',');
        sBuf.append(dest.getLongitudeE6()/1E6);
        sBuf.append("&sensor=true&mode=driving");
        Log.v("I came in URL", sBuf.toString());
        parser = new GoogleParser(sBuf.toString());
        Route r =  parser.parse();
        return r;
}

 protected void onPostExecute(Route route) {
    RouteOverlay routeOverlay = new RouteOverlay(route, Color.BLUE);
    mapView.getOverlays().add(routeOverlay);
    mapView.invalidate();
    mapController = mapView.getController();
    mapController.setZoom(14);
    mapView.getMapCenter();
}

}

@Override
protected boolean isRouteDisplayed() {
// TODO Auto-generated method stub
return false;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T22:14:28.443

您的路线已绘制在地图上，但如果您移动地图，您会发现路线已绘制在屏幕外，我建议使用新的 Maps API，它可以更好、更轻松地在地图上绘制路线。

**使用当前的实现，您可以使用** `mapView.getController().zoomToSpan((int)lati1,(int)long1);`将地图居中到该给定点

# android - 如何从 apk 获取引用的内部库的版本

> ID：14158600
> 
> 赞同：7
> 
> 时间：2013-01-04T14:00:52.577
> 
> 标签：android, version, apk

我已经创建了 apk `maven + eclipse`。

它是一个单独的文件，并具有对`mvn dependencies`. 在我的 android 上一切正常，但我需要在`runtime version of referenced libs`. 我知道如何显示我的应用程序的版本（来自 androidManifest.xml），但问题是获取 other 的版本`used library`，它以某种方式包含在我的 apk 中。

在 apk 中我看不到我引用的 jars，我想它是由`class.dex`.

我找到了从 jar lib 获取版本的方法，但它不适用于 apk。

我们能找到`internal reference library`at 的版本吗`run-time?`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-04-28T07:32:46.363

让我重新表述你的问题。您开发了一个使用第三方库的移动应用程序，您的目标是从 APK 中找到该第三方库的版本。如果我理解正确，那么我最近面临类似的要求。首先，第三方 jar 的清单将包含版本信息。当您构建 APK 时，此包含版本信息的清单信息不会与 APK 的 AndroidManifest 文件合并。AndroidManifest 架构似乎没有提供此功能。在我们的例子中，我们发布了库，因此一种可能的解决方案是，我们可以将版本信息添加到库的 Android Manifest 文件中活动元素内的元数据元素中，以便在构建 apk 时，它会从库的android manifest 到应用程序的 android manifest。这样我们就可以将库的版本信息传递给主 APK 的 Android Manifest。也许我们可以请求修改 Android 清单的架构，以提供包含内部库的版本信息的规定。请检查以下链接。 [https://developer.android.com/guide/topics/manifest/manifest-element.html](https://developer.android.com/guide/topics/manifest/manifest-element.html)

另一种解决方案可能是可以使用 jarsigner 插入自定义条目（在构建 APK 后将第三方库的版本信息包含到 APK 的清单文件中。这又不是标准解决方案。

# cocoa-touch - 我们如何在自己的离散文件中实现 UITextPosition 和 UITextRange 子类？

> ID：14158602
> 
> 赞同：1
> 
> 时间：2013-01-04T14:01:14.920
> 
> 标签：cocoa-touch, automatic-ref-counting, core-text, uitextposition, uitextrange

在创建用于 Core Text 的自定义 UIView 或 UIScrollView 子类时，我们如何在自己的离散文件中实现 UITextPosition 和 UITextRange 子类？我们也需要这些来实现 UITextInput、UITextInputTraits 和 UIKeyInput 协议。似乎这些必须完全在我们使用它的相关视图类的 .m 或 .mm 文件中进行子类化......当尝试在单独的文件中执行此操作时，错误比比皆是。尝试将实现从这些示例项目中的 .m 文件中分离出来：

Apple 的 SimpleTextInput 示例代码。尝试将 UITextPosition 和 UITextRange 子类从 EditableCoreTextView.m 文件中删除到它们自己的谨慎文件中...

尝试使用 enormego 的 EGOTextView（在 Github 上）。

（如果您没有看到错误，请尝试转换为 iOS 6.0 和 ARC。）

# jquery-mobile - 移动 Web 应用程序原型或演示

> ID：14158605
> 
> 赞同：1
> 
> 时间：2013-01-04T14:01:40.707
> 
> 标签：jquery-mobile, mobile, mobile-website

我为移动网络应用程序创建了 html5 屏幕。我想向页面添加操作。我的意思是我点击任何按钮，相关的 html 页面应该像下面的例子一样。

[http://elsies.appclerk.com/](http://elsies.appclerk.com/)

我需要在开发前演示的导航流程。有什么简单的流程吗？请给我建议。

**编辑：** 请检查 [jsfiddle](http://jsfiddle.net/4cKhC/">html 代码)。
在那里，当我点击后退按钮时，新页面或另一个页面应该像上面的 url (滑块效果) .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T19:21:05.920

如果你只对原型感兴趣，你可以很容易地（在一定程度上）使用[jQuery Mobile](http://jquerymobile.com/)标记来实现这一点。

你可以像这样声明一个 jQM 页面：

```
<div id="contacts" data-role="page">
<div data-role="header">
    <h1>Contacts</h1>
    <a href="#" data-rel="back" data-icon="arrow-l" data-transition="slide">Back</a>
</div>
<div data-role="content">
    <ul data-role="listview" data-filter="true">
        <li data-role="list-divider">Colleagues</li>
        <li><a href="#alan" data-transition="slide">
            <img src="images/person.png">
            <h1>Alan Ayckbourn</h1>
            <p>Available</p>
        </a></li>
    </ul>
</div> 
```

添加 javascript 和（或）服务器端脚本（例如 php），您可以将其变成真正的应用程序。

这是为您准备的三页[模型](http://jsfiddle.net/pmatseykanets/HSv5k/)。*Alan Ayckbourn*
列表中的第一项是可点击的。

# weblogic - 如何在weblogic中增加内存

> ID：14158606
> 
> 赞同：8
> 
> 时间：2013-01-04T14:01:41.133
> 
> 标签：weblogic

我需要增加 weblogic 中的内存。我是新来的，我不知道怎么做。我需要设置`-Xss=4096k`。我该怎么做？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-05T11:42:41.313

xss 是 Thread Stack Size，不是内存大小

您可以通过更改参数 Xmx 来更改内存大小

最重要的参数是：

```
-Xms1536m -Xmx1536m -XX:MaxPermSize=512m 
```

`Xmx`- 是堆的最大大小。

`Xms`- 是堆的初始大小。（与 Xmx 相同）

`XX:MaxPermSize`- 用于保存 VM 本身的反射，例如类对象和方法对象（它独立于堆大小，给它 Xms 大小的 1/3 到 1/4 取决于您的类大小）

…………

反正：

您可以从 config.xml 更改 XSS

在此路径中：DOMAIN_NAME/config/config.xml

但是当您更改 config.xml 中的某些内容时，您必须关闭管理服务器，然后编辑启动属性，或者 `<server>`如果它不存在则添加它：

```
<server-start>
      <arguments>-Xms1536m -Xmx1536m -XX:MaxPermSize=512m -Xss4096k </arguments>
</server-start> 
```

...........

[[或者]]

您可以从管理控制台更改它，这更容易

访问管理控制台，然后转到环境 >> 服务器

选择要更改的服务器

表单配置>>服务器启动

你会看到一个叫框`Arguments:`

添加`-Xss4096k`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-04T14:17:14.070

JVM 的选项必须在启动时设置，因此您需要修改 WebLogic 的启动脚本。

看这里：

[http://docs.oracle.com/cd/E13222_01/wls/docs100/server_start/overview.html#JavaOptions](http://docs.oracle.com/cd/E13222_01/wls/docs100/server_start/overview.html#JavaOptions)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-10-16T12:27:24.763

*   转到 setDomainEnv。
*   搜索以下评论。

    > @REM IF USER_MEM_ARGS 设置了环境变量，使用它来覆盖所有 MEM_ARGS 值

*   粘贴以下行（3GB 为 3072）。

    ```
    set USER_MEM_ARGS=-Xms128m -Xmx3072m %MEM_DEV_ARGS% %MEM_MAX_PERM_SIZE% 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-02T02:02:23.657

另一种更简单的方法是使用 setUserOverrides.sh 脚本或在不存在时创建一个。请参阅下面的示例

----setUserOverrides.sh 脚本-----

```
#!/bin/bash
echo "Setting for UserOverrides.sh"

# global settings (for all managed servers)
export JAVA_OPTIONS="$JAVA_OPTIONS"

# customer settings for each Server

if [ "${SERVER_NAME}" = "AdminServer" ]
then
echo "Customizing ${SERVER_NAME}"
export JAVA_OPTIONS="$JAVA_OPTIONS -server -Xms2g -Xmx2g - Dweblogic.security.SSL.minimumProtocolVersion=TLSv1.1"
fi

if [ "${SERVER_NAME}" = "soa_server1" ]
then
echo "Customizing ${SERVER_NAME}"
export JAVA_OPTIONS="$JAVA_OPTIONS -client -Xms4g -Xmx4g - Dweblogic.security.SSL.minimumProtocolVersion=TLSv1.2"
fi

echo "End setting from UserOverrides.sh" 
```

# .net - Exchange EWS API .NET - CalendarEvents.Details 始终为空

> ID：14158609
> 
> 赞同：2
> 
> 时间：2013-01-04T14:01:58.877
> 
> 标签：.net, exchange-server, exchangewebservices

我正在尝试构建一个 .NET 应用程序，目的是从交易所帐户中检索日历信息。我想检索有关资源的忙/闲信息。我将 EWS .NET API 与 Exchange 2010 连接一起使用。

我可以检索约会的开始时间和结束时间等信息，但我无法获取其他信息，例如主题、CalendarEvents.Details 中包含的位置。实际上，最后一个属性始终为空。显然这可能是权限问题，但这不合逻辑，因为我尝试使用自己的凭据阅读自己的日历。

```
//Exchange Connection
this.service = new ExchangeService(ExchangeVersion.Exchange2010);
service.Credentials = new WebCredentials(user, password, domain);
service.AutodiscoverUrl(this.email);

 List<AttendeeInfo> attendees = new List<AttendeeInfo>();

 //L'utilisateur déclaré dans l'objet, identifié par l'email
 attendees.Add(new AttendeeInfo()
 {
    SmtpAddress = this.email,
    AttendeeType = MeetingAttendeeType.Organizer
  });

 AvailabilityOptions myOptions = new AvailabilityOptions();
 myOptions.MeetingDuration = 30;
 myOptions.RequestedFreeBusyView = FreeBusyViewType.FreeBusy;

 GetUserAvailabilityResults freeBusyResults = service.GetUserAvailability(attendees,
                                                                             new TimeWindow(DateTime.Now, DateTime.Now.AddDays(1)),
                                                                                 AvailabilityData.FreeBusy,
                                                                                 myOptions);

  foreach (AttendeeAvailability availability in freeBusyResults.AttendeesAvailability)
        {

         foreach (CalendarEvent calendarItem in availability.CalendarEvents)
         {
             //The details here are always null :/          
            if (calendarItem.Details != null)
             {
               label3.Text = "Subject: " + calendarItem.Details.Subject +"\n";
               label3.Text += " Location:" + calendarItem.Details.Location ;
             }

             label3.Text += "\n";
             label3.Text += "Start:" + calendarItem.StartTime.TimeOfDay ;
             label3.Text += "End:" + calendarItem.EndTime.TimeOfDay;
             label3.Text += "\n";
             panel1.BackColor = Color.PaleVioletRed;
             break;       
         }
    } 
```

先感谢您，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-17T21:03:25.803

我有同样的问题，可能使用了相同的示例代码。问题在于您的可用性选项的 FreeBusyViewType

myOptions.RequestedFreeBusyView = FreeBusyViewType.Detailed;

[链接到 MSDN 文档](http://msdn.microsoft.com/en-us/library/exchange/aa563929%28v=exchg.150%29.aspx)

# sql - 为所有向 PostgreSQL 数据库运行的查询创建 UNDO 函数

> ID：14158610
> 
> 赞同：0
> 
> 时间：2013-01-04T14:02:05.520
> 
> 标签：sql, database, postgresql

我正在经营一家精益创业公司。虽然我们对硬件故障有很好的安全性，但我们经常需要通过直接在实时数据库上运行 SQL 查询来操作客户数据。很容易出错（比如认为您正在测试数据库上运行删除查询，而实际上您是直接在实时数据库上运行查询）。我想知道是否可以为针对数据库运行的每个 SQL 查询创建“撤消”功能（如果有人直接通过 PSQL 连接）。我不关心性能，也不关心存储空间，因为安全数据是我唯一关心的。

如果 UNDO 功能可以不撤消事务日志中的某些特定事务，那就太好了，这样后退就不会干扰正确的事务，例如新客户注册。我们的此类交易量非常少，因此可以毫无问题地手动查看它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T14:14:17.880

好吧，我认为您唯一的选择是创建一个历史记录表。我在触发器的帮助下完成了这项工作。

在每次更新时，您为每个更改的值插入一行。

我的历史表如下所示（MySql）：

```
CREATE  TABLE IF NOT EXISTS `history` (
  `id_history` INT NOT NULL AUTO_INCREMENT ,      
  `event` ENUM('INSERT', 'UPDATE', 'DELETE') NOT NULL ,
  `table` VARCHAR(255) NOT NULL ,
  `id` INT NOT NULL ,
  `field` VARCHAR(255) NULL ,
  `old_value` TEXT NULL ,
  `datetime` DATETIME NOT NULL ,
PRIMARY KEY (`id_history`); 
```

和触发器：

```
 CREATE TRIGGER test_table_update BEFORE UPDATE ON test_table
    FOR EACH ROW
    BEGIN
        IF OLD.value1 != NEW.value1 THEN
            INSERT INTO history VALUES(NULL, 'UPDATE', 'test_table', OLD.id_test_table, 'value1', OLD.value1, NOW());
        END IF;

        ...

    END; // 
```

使用此信息，您可以撤消所有更改并将其设置回特定日期。

# c# - Mono for Android 中的 OnGlobalLayoutListener

> ID：14158616
> 
> 赞同：5
> 
> 时间：2013-01-04T14:02:26.953
> 
> 标签：c#, java, android, xamarin.android

由于我在 Android 上使用 Mono，任何人都可以用 C# 向我解释这段 Java 代码吗？例如，我在 Mono for Android 中找不到 OnGlobalLayoutListener。

在 Android 上，它看起来像这样：

```
vto.addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() {
@Override
public void onGlobalLayout() {
    int newWidth, newHeight, oldHeight, oldWidth;

    //the new width will fit the screen
    newWidth = metrics.widthPixels;

    //so we can scale proportionally
    oldHeight = iv.getDrawable().getIntrinsicHeight();
    oldWidth = iv.getDrawable().getIntrinsicWidth();
    newHeight = Math.floor((oldHeight * newWidth) / oldWidth);
    iv.setLayoutParams(new LinearLayout.LayoutParams(newWidth, newHeight));
    iv.setScaleType(ImageView.ScaleType.CENTER_CROP);

    //so this only happens once
    iv.getViewTreeObserver().removeGlobalOnLayoutListener(this);
    }
}); 
```

适用于 Android 的 Mono 是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-04T14:35:46.973

`OnGlobalLayoutListener`是一个接口，所以在 C# 中它被暴露为[`ViewTreeObserver.IOnGlobalLayoutListener`](http://androidapi.xamarin.com/?link=T:Android.Views.ViewTreeObserver.IOnGlobalLayoutListener). 由于 C# 不支持 Java 中的匿名类，因此您需要提供该接口的实现并将其传递到[`AddOnGlobalLayoutListener()`](http://androidapi.xamarin.com/?link=M:Android.Views.ViewTreeObserver.AddOnGlobalLayoutListener)：

```
public class MyLayoutListener : Java.Lang.Object, ViewTreeObserver.IOnGlobalLayoutListener
{
    public void OnGlobalLayout()
    {
        // do stuff here
    }
}

vto.AddOnGlobalLayoutListener(new MyLayoutListener()); 
```

您可以根据需要执行此操作，但在 Mono for Android 中，首选方法是使用事件代替侦听器接口。在这种情况下，它被暴露为[`GlobalLayout`](http://androidapi.xamarin.com/?link=E:Android.Views.ViewTreeObserver.GlobalLayout)事件：

```
vto.GlobalLayout += (sender, args) =>
    {
        // do stuff here
    }; 
```

您可以像这样获取 ViewTreeObserver 的实例：

```
var contentView = activity.Window.DecorView.FindViewById(Android.Resource.Id.Content);
contentView.ViewTreeObserver.GlobalLayout += ViewTreeObserverOnGlobalLayout; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T14:14:06.257

以下是来自 Android Developers 网站的信息：

> addOnGlobalLayoutListener(ViewTreeObserver.OnGlobalLayoutListener 监听器)
> 
> 注册一个回调以在全局布局状态或视图树中视图的可见性发生变化时调用

这是您可以查看的链接：[addOnGlobalLayoutListener](http://developer.android.com/reference/android/view/ViewTreeObserver.html)。和这里[的GlobalLayoutListener](http://developer.android.com/reference/android/view/ViewTreeObserver.OnGlobalLayoutListener.html)

# android - Android 纹理只显示纯色

> ID：14158617
> 
> 赞同：2
> 
> 时间：2013-01-04T14:02:33.137
> 
> 标签：android, opengl-es, textures

我正在尝试在四边形上显示单个纹理。我有一个工作的 VertexObject，它可以很好地绘制一个正方形（或任何几何对象）。现在我也尝试扩展它来处理纹理，但纹理不起作用。我只看到一种纯色的四边形。

坐标数据在 arrayList 中：

```
/*the vertices' coordinates*/
public int              coordCount = 0;
/*float array of 3(x,y,z)*/
public ArrayList<Float>     coordList = new ArrayList<Float>(coordCount);

/*the coordinates' indexes(if used)*/
/*maximum limit:32767*/
private int                  orderCount = 0;
private ArrayList<Short>     orderList = new ArrayList<Short>(orderCount);

/*textures*/
public boolean textured;
private boolean textureIsReady;
private ArrayList<Float>    textureList = new ArrayList<Float>(coordCount);
private Bitmap bitmap; //the image to be displayed
private int textures[]; //the textures' ids 
```

缓冲区在以下函数中初始化：

```
/*Drawing is based on the buffers*/
public void refreshBuffers(){
    /*Coordinates' List*/
    float coords[] = new float[coordList.size()];
    for(int i=0;i<coordList.size();i++){
         coords[i]= coordList.get(i);
    }
    // initialize vertex byte buffer for shape coordinates
    ByteBuffer bb = ByteBuffer.allocateDirect(
            // (number of coordinate values * 4 bytes per float)
            coords.length * 4);
    // use the device hardware's native byte order
    bb.order(ByteOrder.nativeOrder());

    // create a floating point buffer from the ByteBuffer
    vertexBuffer = bb.asFloatBuffer();
    // add the coordinates to the FloatBuffer
    vertexBuffer.put(coords);
    // set the buffer to read the first coordinate
    vertexBuffer.position(0);

    /*Index List*/
    short order[] = new short[(short)orderList.size()];
    for(int i=0;i<order.length;i++){
        order[i] = (short) orderList.get(i);
    }
    // initialize byte buffer for the draw list
    ByteBuffer dlb = ByteBuffer.allocateDirect(
    // (# of coordinate values * 2 bytes per short)
            order.length * 2);
    dlb.order(ByteOrder.nativeOrder());
    orderBuffer = dlb.asShortBuffer();
    orderBuffer.put(order);
    orderBuffer.position(0);

    /*texture list*/
    if(textured){
        float textureCoords[] = new float[textureList.size()];
        for(int i=0;i<textureList.size();i++){
            textureCoords[i] = textureList.get(i);
        }
        ByteBuffer byteBuf = ByteBuffer.allocateDirect(textureCoords.length * 4);
        byteBuf.order(ByteOrder.nativeOrder());
        textureBuffer = byteBuf.asFloatBuffer();
        textureBuffer.put(textureCoords);
        textureBuffer.position(0);
    }
} 
```

我使用以下代码将图像加载到对象中：

```
public void initTexture(GL10 gl, Bitmap inBitmap){
    bitmap = inBitmap;
    loadTexture(gl);
    textureIsReady = true;
}

/*http://www.jayway.com/2010/12/30/opengl-es-tutorial-for-android-part-vi-textures/*/
public void loadTexture(GL10 gl){

    gl.glGenTextures(1, textures, 0);
    gl.glBindTexture(GL10.GL_TEXTURE_2D, textures[0]);

    gl.glTexParameterx(GL10.GL_TEXTURE_2D, 
                        GL10.GL_TEXTURE_MAG_FILTER, 
                        GL10.GL_LINEAR);

    gl.glTexParameterx(GL10.GL_TEXTURE_2D,
                        GL10.GL_TEXTURE_MIN_FILTER,
                        GL10.GL_LINEAR);

    gl.glTexParameterx(GL10.GL_TEXTURE_2D,
                        GL10.GL_TEXTURE_WRAP_S,
                        GL10.GL_CLAMP_TO_EDGE);

    gl.glTexParameterx(GL10.GL_TEXTURE_2D,
                        GL10.GL_TEXTURE_WRAP_T,
                        GL10.GL_CLAMP_TO_EDGE);

    /*bind bitmap to texture*/
    GLUtils.texImage2D(GL10.GL_TEXTURE_2D, 0, bitmap, 0);
} 
```

绘图是基于以下代码进行的：

```
public void draw(GL10 gl){
    if(textured && textureIsReady){
        gl.glBindTexture(GL10.GL_TEXTURE_2D, textures[0]);
        //loadTexture(gl);
        gl.glEnable(GL10.GL_TEXTURE_2D);

        gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
        gl.glEnableClientState(GL10.GL_TEXTURE_COORD_ARRAY);

        gl.glVertexPointer(3, GL10.GL_FLOAT, 0,
                vertexBuffer);
        gl.glTexCoordPointer(2, GL10.GL_FLOAT, 0, 
                textureBuffer);
    }else{
        gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
        gl.glColor4f(color[0], color[1], color[2], color[3]);
        gl.glVertexPointer(3, GL10.GL_FLOAT, 0,
                vertexBuffer);
    }
        if(!indexed)gl.glDrawArrays(drawMode, 0, coordCount);
            else gl.glDrawElements(drawMode, orderCount, GL10.GL_UNSIGNED_SHORT, orderBuffer);

    if(textured && textureIsReady){
        gl.glDisableClientState(GL10.GL_VERTEX_ARRAY);
        gl.glDisableClientState(GL10.GL_TEXTURE_COORD_ARRAY);
        gl.glDisable(GL10.GL_TEXTURE_2D);
    }else{
        gl.glDisableClientState(GL10.GL_VERTEX_ARRAY);
    }
} 
```

初始化如下：

```
 pic = new VertexObject();
    pic.indexed = true;
    pic.textured = true;

    pic.initTexture(gl,MainActivity.bp);

    pic.color[0] = 0.0f;
    pic.color[1] = 0.0f;
    pic.color[2] = 0.0f;

    float inputVertex[] = {2.0f,2.0f,0.0f};
    float inputTexture[] = {0.0f,0.0f};
    pic.addTexturedVertex(inputVertex,inputTexture);
    inputVertex[0] = 2.0f;
    inputVertex[1] = 8.0f;
    inputTexture[0] = 0.0f;
    inputTexture[0] = 1.0f;
    pic.addTexturedVertex(inputVertex,inputTexture);
    inputVertex[0] = 8.0f;
    inputVertex[1] = 8.0f;
    inputTexture[0] = 1.0f;
    inputTexture[0] = 1.0f;
    pic.addTexturedVertex(inputVertex,inputTexture);
    inputVertex[0] = 8.0f;
    inputVertex[1] = 2.0f;
    inputTexture[0] = 1.0f;
    inputTexture[0] = 0.0f;
    pic.addTexturedVertex(inputVertex,inputTexture);

    pic.addIndex((short)0);
    pic.addIndex((short)1);
    pic.addIndex((short)2);
    pic.addIndex((short)0);
    pic.addIndex((short)2);
    pic.addIndex((short)3); 
```

坐标只是简单地添加到arrayList，然后我刷新缓冲区。位图是有效的，因为它显示在 imageView 上。该图像是可绘制文件夹中大小为 128x128 的 png 文件。对于我收集到的图像正在到达顶点对象，但纹理映射有些问题。关于我做错了什么的任何指示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T22:18:38.543

好的，我明白了！

我从互联网上下载了一个[工作示例](https://web.archive.org/web/20130116021624/https://obviam.net/index.php/texture-mapping-opengl-android-displaying-images-using-opengl-and-squares/)并重写它，逐步类似于对象（如上所示）。我观察它是否适用于每一步。事实证明，问题不在于图形部分，因为该对象在具有不同坐标的另一个上下文中工作。

**长话短说：**

I got the texture UV mapping wrong! That's why I got the solid color, the texture was loaded, but the UV mapping wasn't correct.

**Short story long:**

At the lines

```
 inputVertex[0] = 2.0f;
    inputVertex[1] = 8.0f;
    inputTexture[0] = 0.0f;
    inputTexture[0] = 1.0f; 
```

The indexing was wrong as only the first element of `inputTexture` was updated only. There might have been some additional errors regarding the sizes of the different array describing the vertex coordinates, but rewriting on the linked example fixed the problem, and it produced a mroe concise code.

# python - 使用 zip 列表上的设置删除重复项

> ID：14158619
> 
> 赞同：4
> 
> 时间：2013-01-04T14:02:36.847
> 
> 标签：python, python-2.7

我正在尝试学习 python，尤其是列表，但我有一个小问题。我有两个清单：

```
alist=[1,2,3,4,5,6,7,8,9,1,2,3]
blist=["a","b","c","d","e","f","g","h","i","a","b","c"] 
```

我想做的是从“两个列表”中删除重复项。即只有当 alist 的一个元素和它在 blist 中的对应元素（成对）相同时，我才删除它们。我期待一个结果，看起来像：

```
alist=[1,2,3,4,5,6,7,8,9]
blist=["a","b","c","d","e","f","g","h","i"] 
```

所以，我尝试先在 zip 上做一组：

```
kk=set(zip(alist,blist)) 
```

然后做：

```
alist[:],blist[:]=zip(*kk) 
```

然后我得到：

```
alist=[5, 6, 4, 7, 3, 8, 2, 1, 9]
blist=['e', 'f', 'd', 'g', 'c', 'h', 'b', 'a', 'i'] 
```

如您所见，订单未得到维护。我想知道是否有可能以某种方式使用“排序”和“索引”来以正确的顺序获取列表。任何指导将不胜感激。

python版本是2.7.3

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T14:06:59.927

你可以用[`collections.OrderedDict`](http://docs.python.org/2/library/collections.html#collections.OrderedDict)这个：

```
In [16]: d = collections.OrderedDict.fromkeys(zip(alist, blist))

In [17]: [k[0] for k in d]
Out[17]: [1, 2, 3, 4, 5, 6, 7, 8, 9]

In [18]: [k[1] for k in d]
Out[18]: ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i'] 
```

一个[有序的集合](https://stackoverflow.com/questions/1653970/does-python-have-an-ordered-set)——如果它可用的话——可能会导致一个更清洁的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T14:08:15.993

使用[OrderedDict](http://docs.python.org/2/library/collections.html#collections.OrderedDict)：

```
In [1]: alist=[1,2,3,4,5,6,7,8,9,1,2,3]
In [2]: blist=["a","b","c","d","e","f","g","h","i","a","b","c"]

In [3]: from collections import OrderedDict
In [6]: od = OrderedDict().fromkeys(zip(alist, blist))

In [7]: od
Out[7]: OrderedDict([((1, 'a'), None), ((2, 'b'), None), ((3, 'c'), None), ((4, 'd'), None), ((5, 'e'), None), ((6, 'f'), None), ((7, 'g'), None), ((8, 'h'), None), ((9, 'i'), None)]) 
```

# android - 暂停应用程序后如何打开上次打开的活动

> ID：14158624
> 
> 赞同：1
> 
> 时间：2013-01-04T14:02:48.737
> 
> 标签：android, android-layout

我尝试在我的应用程序中添加一个 Splash Activity，当程序第一次启动时，这个 Splash Activity 会打开

但是当应用程序工作并将启动活动跳过到主要活动并且用户按住并转到主屏幕时

之后，用户将返回应用程序，，

问题就在这里，所以应用程序再次重新打开启动活动

我不希望每次应用程序恢复活动时应用程序都打开启动活动，我需要直接打开主要活动......

我尝试了这段代码，但它不适用于我

在飞溅活动中...

```
public class SplashActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Class<?> activityClass;

        try
        {
            SharedPreferences prefs = getSharedPreferences("X", MODE_PRIVATE);
            activityClass = Class.forName(prefs.getString("lastActivity", MainActivity.class.getName()));
        }
        catch(ClassNotFoundException ex)
        {
            activityClass = MainActivity.class;
        }

        startActivity(new Intent(this, activityClass));

        Button btn = (Button)findViewById(R.id.button1);
        btn.setOnClickListener(new View.OnClickListener()
        {           
            @Override
            public void onClick(View v)
            {
                Intent intent = new Intent(MainActivity.this,Main2Activity.class);
                startActivity(intent);
            }
        }
        );
    }

} 
```

在主要活动中我使用此代码

```
public class Main2Activity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main2);

    }

    @Override
    protected void onPause() {
        super.onPause();

        SharedPreferences prefs = getSharedPreferences("X", MODE_PRIVATE);
        Editor editor = prefs.edit();
        editor.putString("lastActivity", getClass().getName());
        editor.commit();
    }

} 
```

我希望能帮助我

提前致谢

问候 ... ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T14:14:33.703

使用 Application 类保存全局标志：

```
public class App extends Application {
    private static boolean sFirstRun = false;

    public static boolean fetchFirstRun() {
        boolean old = sFirstRun;
        sFirstRun = false;
        return old;
    }

    //--called when app process is created--
    @Override
    public void onCreate() {
        super.onCreate();

        sFirstRun = true;
    }
} 
```

在 manifest.xml 添加：`<application android:name=".App"`

现在，`App.fetchFirstRun()`仅当从头开始创建 App 进程时才适用。只要应用程序正在运行，后续调用就会返回 false。

# ios - 修复“NSObjectInaccessibleException”的现有 CoreData 存储

> ID：14158625
> 
> 赞同：2
> 
> 时间：2013-01-04T14:02:54.430
> 
> 标签：ios, core-data, ios6

我遇到了一个现有的 CoreData 应用程序，该应用程序设置了不正确的关系/删除规则，这导致了经典的“'NSObjectInaccessibleException'，原因：'CoreData 无法满足错误”，当访问具有不再存在的子对象的父对象时。尽管现有数据库仍然具有指向不再存在的子对象的父对象，但关系和删除规则已得到修复，这会导致故障和崩溃。

有没有办法扫描数据库并删除对不再存在的对象的引用？我已经在 sql 文件中手动完成了这项工作，但我需要一种编程方法来在启动时修复用户现有的数据库。

# c# - Web.API 中的实体框架 Code First 一对多关系

> ID：14158626
> 
> 赞同：2
> 
> 时间：2013-01-04T14:03:01.573
> 
> 标签：c#, entity-framework, asp.net-web-api, one-to-many, relationship

我正在尝试使用实体框架创建一对多关系，以使用 Web.API 返回转换 json 对象。

我正在创建一个用户具有许多功能电子邮件的场景。

但是，带来的用户实体中的 json 文件包含一个始终为空的电子邮件列表。

**用户实体**

```
[DataContract]
public class UsuarioEntity : BaseEntity
{
    [DataMember]
    public string UserName { get; set; }

    [DataMember]
    public string Password { get; set; }

    [DataMember]
    public bool Ativado { get; set; } 

    [DataMember] 
    public ICollection<EmailEntity> Emails { get; private set; }
} 
```

**电子邮件实体**

```
 [DataContract]
public class EmailEntity : BaseEntity
{

    [DataMember]
    public string Email { get; set; }

    [DataMember]
    public bool Ativo { get; set; }

    [DataMember]
    public bool Principal { get; set; }

    [DataMember]
    public DateTime DataCadastro { get; set; }

    [DataMember]
    public UsuarioEntity Usuario { get; set; }

} 
```

**流畅的 API**

**Usuario配置**

```
 ToTable("tbl_usuarios");

        HasKey(a => new {a.Id, a.UserName});

        Property(a => a.Id)
            .HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity)
            .HasColumnName("cd_id_usuario");

        Property(a => a.UserName)
            .HasMaxLength(32)
            .HasColumnName("nm_usuario");

        Property(a => a.Password)
            .IsRequired()
            .HasMaxLength(32)
            .HasColumnName("tx_senha");

        Property(a => a.DataCadastro) 
            .HasDatabaseGeneratedOption(DatabaseGeneratedOption.Computed)
            .HasColumnType("datetime")
            .IsRequired()
            .HasColumnName("dt_cadastro");

        HasMany(o => o.Emails)
            .WithRequired(); 
```

**电子邮件配置**

```
 ToTable("tbl_email_usuario");

        HasKey(a => new { a.Id, a.Email });

        Property(a => a.Id)
            .HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity)
            .HasColumnName("cd_id_email");

        Property(a => a.Email)
            .HasMaxLength(150)
            .HasColumnName("nm_email");

        Property(a => a.DataCadastro)
            .HasColumnType("datetime")
            .HasDatabaseGeneratedOption(DatabaseGeneratedOption.Computed)
            .IsRequired()
            .HasColumnName("dt_cadastro") 
```

我尝试以这种方式将 EF 与 Web api 一起使用：

```
public IQueryable<UsuarioEntity> Get()
{
    PlainContext context = new PlainContext();
    return context.Usuarios;
} 
```

除了没有预期的回报

```
[{"Id":1,"Ativado":true,"DataCadastro":"\/Date(1357307720730-0200)\/","Emails":[],"Password":"senha456","UserName":"recapix"}] 
```

我拥有和注册的电子邮件只是它们不会出现在 Json 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T14:26:48.590

您的实体不支持延迟加载，因此您必须明确定义要加载相关电子邮件：

```
return context.Usarios.Include(u => u.Emails); 
```

# android - Android - 拖动手势时不希望出现的 WebView 移动

> ID：14158630
> 
> 赞同：1
> 
> 时间：2013-01-04T14:03:16.377
> 
> 标签：android, android-webview

我希望有人能帮助我解决这个问题：

我有两个主要层的 FrameLayout。视频层，播放流的地方，在它之上，有一个 WebView，它加载一个带有小部件的门户（HTML5/CSS/...），所以它看起来像电视上的 OSD。

当用户触摸屏幕时，显示节目信息、节目频道图标等。再次触摸，OSD 消失。用户可以在两个方向（无限循环）的通道之间滑动。所有这些手势都是在 WebView 中执行的，所以它们不是由 Android 处理的。门户和 Android 之间的通信是通过 Javascript 接口完成的（在我的 Web 视图层上启用）。

到目前为止，一切都很好。

当小部件被隐藏时，它们实际上并没有被隐藏，它们只是在我的平板电脑屏幕上显示出来，因为门户区域大于我的网络视图区域。我正在使用 match_parent 参数作为高度和宽度。

实际的问题是，有时当我用手指拖动时，我设法滚动 Web 视图（移动它），然后我看到了门户区域的其余部分，其中小部件被称为隐藏。

我想知道如何防止这种情况发生。我无法禁用 Web 视图的手势，我只想将其固定在左上角而不进行任何移动。

我希望有人能帮助我。非常感谢。马丁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T16:25:51.160

添加一个什么都不做的监听器。

```
webView.setOnTouchListener(new View.OnTouchListener() {

    public boolean onTouch(View v, MotionEvent event) {
      return (event.getAction() == MotionEvent.ACTION_MOVE);
    }
}); 
```

我想你也可以只使用

```
webView.setHorizontalScrollBarEnabled(false); 
```

或者

```
webView.setVerticalScrollBarEnabled(false); 
```

[编辑] 我应该补充一点，如果你只是禁用滚动条，你应该将你的 webview 包装在一个滚动视图中，这样它就不能真正滚动。

# objective-c - 使用 NSNotification 将块内创建的对象传递到外部世界

> ID：14158632
> 
> 赞同：1
> 
> 时间：2013-01-04T14:03:31.090
> 
> 标签：objective-c, objective-c-blocks

我有一个`NSBlockOperation`创建一些对象的。一个`NSString`and`NSData`被放入一个用户信息`NSDictionary`中。然后该块发送一个`NSNotification`带有这样的用户信息。

这是一个代码片段：

```
 NSArray *dataHolder = // this array is filled with data created within block
    NSArray *keys = [NSArray arrayWithObjects:idKey, notificationDataKey, nil];
    NSArray *values = [NSArray arrayWithObjects:identifier, dataHolder, nil];
    NSDictionary *userInfo = [NSDictionary dictionaryWithObjects:values forKeys:keys];
    // notification follows 
```

这段代码没有什么特别之处，我关心的是dataHolder，它只是一个`NSArray`of `NSData`，特别是它用于动态创建图像并传递用于显示（无操作），并且该块未使用或通知后更改它们。

我不能使用委托，因为几个控制器可能还活着并等待该数据。

我在问这种情况是否会导致任何类型的问题，以及我是否需要特别注意变量，例如用弱、强、块或其他标记它们。

整个项目都在ARC之下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T15:05:07.483

你的问题很模糊，但你应该注意以下几点：

*   用户信息被通知对象强引用
*   您的字典被 userInfo 对象强引用
*   只要你在另一个线程完成了你的操作，不再修改数据，就不存在多线程问题
*   发送通知时，请注意接收数据的线程，因为这可能会导致通知接收器出现问题。一般来说，NSNofificationCenter 的旧 API 在发送方的同一线程中接收调用。新 API（基于块）允许您指定接收通知的队列。

# java - 什么是“接口”，我如何“反对”它？

> ID：14158633
> 
> 赞同：0
> 
> 时间：2013-01-04T14:03:33.223
> 
> 标签：java, interface

```
ArrayList<Class> name = new ArrayList<Class>(#) 
```

昨天有人告诉我，这样的做法是不好的做法，我应该“针对界面”进行编程，如下所示：

```
List<Class> name = new ArrayList<Class>(#) 
```

他是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T14:07:17.640

`ArrayList`实现`List`。`List`因此，出于多种原因，最好使用。例如，如果您希望将来更改列表的类型（例如，您决定使用 a `LinkedList`、`Stack`或`Vector`），您只需要更改赋值的右侧，其余代码就可以正常工作，不变。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T14:07:32.720

无需透露您正在使用的 List 的确切实现。

唯一可用的方法是接口中的方法。从技术上讲，这并不重要，但这是一个很好的习惯。代码更干净，更易于维护。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T14:10:33.073

该代码片段中的“接口”是`List`一个比`ArrayList`.

List 将由许多其他类实现，如 ArrayList、LinkedList 等......

通过使用接口来声明`name`，那么用户`name`不必知道列表`name`实际上是哪种类型，并且如果您决定将来使用不同类型的列表，您可以不必更改代码中的很多地方。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T14:10:06.193

理想情况下，您希望使用集合的接口而不是集合变量和返回值的实现。在您的示例中，这不是什么大问题。在编写方法时，它确实变得更有用：

```
public List<String> doSomething() {
} 
```

通过 using`List<String>`和 not `ArrayList<String>`，此方法可以选择使用不同的列表（例如，它可能会更改为 LinkedList ），但 API 的协定不会改变，因此所有调用代码仍然有效，即使该方法现在返回不同类型的列表。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-04T14:11:30.110

在接口中定义了哪些方法是可用的，所以当一个类被写来实现一个接口时，它必须有接口中定义的方法。（它也可能有其他方法）

假设您编写了一个其他人将使用的类，并且它具有这样的方法：

```
public void doSomething(List<Thing> aListOfThings) {
  //some code to manipulate the list
} 
```

当其他人编写代码来使用您的类时，您并不关心他们使用什么类型的 List 来调用您的方法。所有这些都是有效的：

```
yourClass.doSomething(new ArrayList<Thing>());
yourClass.doSomething(new AttributeList<Thing>());
yourClass.doSomething(new Vector<Thing>());
yourClass.doSomething(new SomeOtherTypeOfList<Thing>()); 
```

他们可以自由选择适合其目的的列表类型（实现）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-04T14:07:03.663

```
List<Class> name = new ArrayList<Class>(#)
SuperType   ref  =     SubTypeObj 
```

这是创建 ArrayList 的多态方式。List 是 ArrayList 的超类型。像这样创建数组列表的好处是：

*   您可以稍后参考相同的列表来创建 LinkedList。

    名称 = 新的链表（#）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-04T14:10:36.133

他的意思是你应该只使用你需要的变量类型。例如，除非您使用仅定义在的方法，否则`ArrayList`您应该使用`List`. 同样，如果您不需要任何来自`List`然后使用`Collection`等。

有两个原因：

1）它使将来更容易将实现更改为另一种类型。假设您正在使用一些使用 a 的 ORM，`LazilyLoadedList`那么如果您的所有代码都反对，`List`那么您可以轻松地将其插入。如果反对，`ArrayList`那么您需要更改大量方法签名并确保您不依赖于`ArrayList`特定方法。这是什么的一部分

2)使用 JMock 或 Mockito 等工具更容易[模拟接口。](http://en.wikipedia.org/wiki/Mock_object)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-04T14:45:01.713

这应该可以帮助您了解接口是什么以及它在软件开发中的用途。

假设您需要将包裹邮寄给某人。有许多承运商选择：USPS、UPS、FedEx 等。

现在想象一下，如果有一个中央邮箱，您可以将包裹放入其中，并且所有承运人都可以从该邮箱投递。所以，你不在乎它是*如何*被 USPS、UPS 或 FedEx 接收的。您需要做的就是将包裹带到邮箱并投递。它实际上如何交付与您无关。

在此示例中，您可以将接口定义为：

```
public interface IMailService
{
   void SendMail(obj myMailObj);
} 
```

然后您可以将 MailService 的具体实现定义为：

```
public class USPSMailService : IMailService
{
   public void SendMail(obj myMailObj)
   {
      //This code executes SendMail using USPS' implementation
   } 
} 
```

```
public class UPSMailService : IMailService
{
   public void SendMail(obj myMailObj)
   {
      //This code executes SendMail using UPS' implementation
   } 
} 
```

```
public class FedExMailService : IMailService
{
   public void SendMail(obj myMailObj)
   {
      //This code executes SendMail using FedEx's implementation
   } 
} 
```

然后，当您想在代码中发送邮件时，您可以这样编写：

```
IMailService mailService = new FedExMailService();
mailService.SendMail(myMailObj); 
```

如果您以后需要使用 UPS 的邮件服务，那么您需要做的就是使用 UPS 类型进行实例化。其余代码，包括对 SendMail() 的所有调用保持不变：

```
mailService = new UPSMailService(); 
```

现在，如果 UPS 提供其他运营商不提供的某些服务，那么您需要将变量定义为具体类型。

例如，如果 UPS 类别是这样定义的：

```
public class UPSMailService : IMailService
{
   public void SendMail(obj myMailObj)
   {
      //This code executes SendMail using UPS' implementation
   } 

   //This is a method that only UPS offers
   public void SendMailOnSunday(obj myMailObj)
   {
      //This code executes UPS' proprietary method
   } 
} 
```

那么您的代码将需要像这样使用具体类：

```
UPSMailService mailService = new UPSMailService();
mailService.SendMailOnSunday(myMailObj); 
```

# sass - Grunt 项目推荐的目录结构是什么

> ID：14158634
> 
> 赞同：12
> 
> 时间：2013-01-04T14:03:36.053
> 
> 标签：sass, compass-sass, gruntjs

我是第一次设置 Grunt 项目。有推荐的目录结构吗？例如，将源代码保存在 /src 下，将中间构建工件保存在 /stage 中，将最终连接的、缩小的工件保存在 /dist 中。

我也在使用指南针/sass。我假设我的 scss 文件应该放在 /src 下，但是设置构建工作流程的正确方法是什么，以便我可以快速构建和测试，同时不会让我的源目录与构建工件混淆。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-12T04:13:40.970

我只有 /src 和 /build（这是你的 /dist），没有 /stage。我还没有发现真正需要舞台，可能是因为我没有太多的集成测试要做。让我知道您使用 /stage 的目的——我很好奇。:)

```
/myproject
  /build
  /src
    /css
    /sass 
```

我确实有 /sass 和 /css。/css 保存使用 SASS 编译的单个 main.css。在我的 Gruntfile.js 中，我有 2 个 SASS 目标，sass:dev 和 sass:build。sass:dev 编译成 /src/css 和 sass:build 成 /build/css。/src/css/main.css 被 git-/svn 忽略。

归根结底，Grunt 并不关心您如何组织资源。它只是假设 Gruntfile.js 和 /node_modules 位于项目根目录，仅此而已。实际上是 NPM 假定 package.json 位于根目录。

因此，尝试不同的结构并选择您喜欢的结构，这始终取决于您使用的工具。

希望这可以帮助！:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T02:00:11.697

Running `grunt init:jquery`or`grunt init:node`应该会给你一个很好的开始来回答这个问题。

这是在`grunt init:jquery`名为**init_test**的目录中运行并为 grunt-init 提示选择默认答案的结果。

```
 Writing CONTRIBUTING.md...OK
    Writing grunt.js...OK
    Writing libs/jquery/jquery.js...OK
    Writing libs/jquery-loader.js...OK
    Writing libs/qunit/qunit.css...OK
    Writing libs/qunit/qunit.js...OK
    Writing README.md...OK
    Writing src/init_test.js...OK
    Writing test/init_test.html...OK
    Writing test/init_test_test.js...OK
    Writing LICENSE-MIT...OK 
```

见[https://github.com/gruntjs/grunt-init](https://github.com/gruntjs/grunt-init)

# .net - 引发属性更改事件非常慢

> ID：14158637
> 
> 赞同：0
> 
> 时间：2013-01-04T14:03:50.250
> 
> 标签：.net, windows-runtime, mvvm-light, winrt-xaml, inotifypropertychanged

我正在开发 Windows RT/Windows Store 应用程序，并且在我的代码中执行调用时（使用 MVVM-light 框架，如果我要直接实现接口`RaisePropertyChanged("...")`，这应该与标准非常相似- 事实上我都测试了）它很慢。`OnPropertyChanged``INotifyPropertyChanged`

UI 更新发生之前的延迟确实有所不同；我引发了一个属性更改事件来禁用一个按钮和三个文本框，但是要在 UI 上执行此更新通常需要 1.5-2 秒。相当令人沮丧。为什么这不是即时的？我的`.xaml`看法不是很复杂。

在我的按钮上`Command`：

```
 SubmitCommand = new RelayCommand<string>(RunSubmitCommand);
        ...
        private async void RunSubmitCommand(string param)
        {
            submitted = true;
            RaisePropertyChanged(() => CanSubmit);
            RaisePropertyChanged(() => CanEnterValues);
        } 
```

属性如下所示：

```
 public bool CanSubmit
        {
            // formatted for readability on SO
            // IsField1Valid, IsField2Valid, IsField3Valid I should mention 
            // just resolve nullable bool's
            get { return !submitted && 
                         IsField1Valid.GetValueOrDefault() && 
                         IsField2Valid.GetValueOrDefault() && 
                         IsField3Valid.GetValueOrDefault(); }
        }

        public bool CanEnterValues
        {
            get { return !submitted; }
        } 
```

文本字段和提交按钮如下所示`.xaml`：

```
<TextBox x:Name="TextField1Box" TabIndex="1" Text="{Binding Field1}" 
  IsEnabled="{Binding CanEnterValues}" Style="{StaticResource ValueTextBoxStyle}"
  LostFocus="Field1TextBox_LostFocus" />
... x 2 more

<Button x:Name="SubmitButton" TabIndex="4" Command="{Binding SubmitCommand}"
  Content="Submit Values" IsEnabled="{Binding CanSubmit}" 
  Style="{StaticResource ButtonStyle}" /> 
```

任何关于延迟的想法将不胜感激。

谢谢

# php - PHP - foreach 数组循环。使用计数器隐藏数组的最后 50%

> ID：14158642
> 
> 赞同：1
> 
> 时间：2013-01-04T14:04:15.257
> 
> 标签：php, arrays, foreach

我有一些这样的代码。

```
$counter = 1;
$content = "";
foreach($images as $image) {
    $content .= "<li><img src='".$image['images_image'][1]['thumb']."'></li>";
    $counter++;
}
echo apply_filters('images_filter', $content); 
```

上面的代码使用 WordPress 过滤器隐藏了整个内容。但我只想隐藏最后 50% 的图像。

假设我有 15 张图片。

```
$hide = floor( $counter / 2 ); //value will be 7 
```

所以我想只隐藏 8 到 15 的图像。

我试过这样。但它不起作用。

```
if ($counter >= $hide) {
    echo apply_filters('images_filter', $content);
} 
```

有人能告诉我正确的语法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T14:08:46.037

我不知道图像过滤器，但这应该有效：

```
 $show = ceil( count($images) / 2 );      
  $counter = 1;
  $content = "";
  foreach($images as $image){
        if($counter<=$show){
            $content .= "<li><img src='".$image['images_image'][1]['thumb']."'></li>";
        }else{
            break;
        }
        ++$counter;
     }
    echo apply_filters('images_filter',$content); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T14:08:15.337

尝试这样的事情：

```
$counter = 1;
$content = "";
$hide = floor( $counter / 2 ); //value will be 7
foreach($images as $image){

    if ($counter >= $hide) $content .= "<li><img src='".$image['images_image'][1]['thumb']."'></li>";
    else echo "<li><img src='".$image['images_image'][1]['thumb']."'></li>";
    $counter++;
}

    echo apply_filters('images_filter',$content); 
```

回显正常的 HTML，将过滤器应用于其余部分？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T14:09:21.357

您需要打破 foreach 循环。

```
foreach($images as $image){
   if ($counter <= $hide){ 
      $content .= "<li><img src='".$image['images_image'][1]['thumb']."'></li>";
      $counter++;
   }
   else {
      break;
   }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T14:11:04.510

我认为这可以工作：

```
foreach($images as $image) if($counter++ <= $hide) {
// do your stuff
} 
```

虽然使用 break 更好；正如西蒙 R 所说。

# jquery - jQuery 通过删除 IE7 中隐藏的类布局错误来显示内容

> ID：14158644
> 
> 赞同：0
> 
> 时间：2013-01-04T14:04:27.363
> 
> 标签：jquery, internet-explorer-7

我有通过使用 jQuery 添加或删除一个类来显示或隐藏的内容，该类没有使用 CSS 应用于它。

这在除 IE7 之外的所有浏览器中都可以正常工作。IE7 正在显示和隐藏内容，但是当显示时（在页面加载时隐藏），它会在其下方的内容下方。

如果我从类中删除样式，因此在页面加载时没有隐藏任何内容，那么它不会进入下方，而是按预期正确显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T16:29:48.220

我通过使其下方的元素与 CSS 相对定位来解决此问题。

# c++ - QTABLEVIEW setSpan 有时一些sperate-lines消失

> ID：14158648
> 
> 赞同：0
> 
> 时间：2013-01-04T14:04:33.587
> 
> 标签：c++, qt, qtableview

我正在尝试使用`QTABLEVIEW::setSpan()`将附近的一些单元格合并为一个的表格，但有时它会正确显示，有时一些单独的行会消失，不知道为什么。我怀疑原因是它显示的数据是什么上次打扰了下次的结果，我现在用的是 `QStandardItemModel::clear()`在显示之前删除上次的结果。有没有其他可靠的方法可以彻底清除上次的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T14:28:39.433

您可以发布更多代码吗？

你用你`QTabelView`这样[的](http://www.qtcentre.org/threads/43611-How-to-use-setSpan-in-QTableView)：

```
QTableView view;
view.setModel(model);
view.setSpan(0, 0, 1, model->columnCount());
view.show(); 
```

# jquery - 插件不适用于 ajax 加载的内容

> ID：14158651
> 
> 赞同：2
> 
> 时间：2013-01-04T14:04:49.363
> 
> 标签：jquery, ajax

我正在使用一个 jquery[评级插件](http://rateit.codeplex.com/)，我在这样的 div 上使用它：

HTML：

```
<div id="highlighted" class="span6">
<div class="row">
    <div id="high-desc" class="span4">
        <span class="movie-title fat"><a class="strong" href="movies.jsp?id=5">Watchmen</a> (2009)</span><br />
        <div id="rating"></div>
    </div>
</div> 
```

查询：

```
$("#rating").rateit({
    max: 10,
    min: 0,
    step: 1
}); 
```

它工作得很好。但是，当我用`div#highlighted`其他内容（如下所示）替换的内容时，插件不起作用。

```
$('// some link').on("click", function(){ 
    var Id = // some id
    title="reco_product_stream.jsp?type=high&id="+Id;
    ('#highlighted').load(title);
}); 
```

我什至尝试在每个 ajax 调用上重新加载插件，如下所示：

```
$('// some link').on("click", function(){ 
    var Id = // some id
    title="reco_product_stream.jsp?type=high&id="+Id;
    ('#highlighted').load(title);
    $("#rating").rateit({max: 10, min: 0, step:1});
}); 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T14:09:12.350

您确实需要在动态添加的内容上重新初始化插件。

为此，您必须使用回调函数等待请求完成。

jQuery 的`load`方法与大多数 ajax 方法一样是异步的。

[http://api.jquery.com/load/](http://api.jquery.com/load/)

```
$('// some link').on("click", function(){ 
    var Id = // some id
    title="reco_product_stream.jsp?type=high&id="+Id;
    ('#highlighted').load(title,function(){ //callback executes after load
        $("#rating").rateit({max: 10, min: 0, step:1});
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T14:08:20.440

```
$('// some link').on("click", function(){ 
    var Id = // some id
    title="reco_product_stream.jsp?type=high&id="+Id;
    $('#highlighted').load(title);
    $("#rating").rateit({max: 10, min: 0, step:1});
}); 
```

在上面，您的代码`$("#rating").rateit({max: 10, min: 0, step:1});`在 .load 完成加载之前执行。

与 .load 回调一起使用。

```
$('#highlighted').load(title, function(){
 $("#rating").rateit({max: 10, min: 0, step:1});
}); 
```

[http://api.jquery.com/load/](http://api.jquery.com/load/)

# cloud-foundry - vmc push 过程中的检查过程

> ID：14158653
> 
> 赞同：0
> 
> 时间：2013-01-04T14:05:02.370
> 
> 标签：cloud-foundry

我是 Cloud Foundry 的新手，并且玩过微云以及公共 Cloud Foundry 站点。我有一个示例 Sinatra 应用程序可以帮助我入门，并已成功将其部署到 cloudfoundry.com。但是，当我尝试将相同的应用程序部署到微型 Cloud Foundry 实例时，我收到“GAVE UP”错误。

有人知道任何描述检查应用程序过程的文档吗？

我查看了公共实例和微型实例的日志文件，它们似乎在添加到应用程序中的 gem 方面有所不同。我已将它们包括在下面以供参考。

任何帮助，将不胜感激。

在此先感谢，克雷格。

公共日志（部署成功）

```
Reading logs/staging.log... OK
[2013-01-04 12:16:58] Setting up temporary directories
[2013-01-04 12:16:58] Downloading application
[2013-01-04 12:16:58] Unpacking application
[2013-01-04 12:16:58] Staging application
[2013-01-04 12:17:00] # Logfile created on 2013-01-04 12:16:59 +0000 by logger.rb/25413
[2013-01-04 12:17:00] Adding rack-1.4.1.gem to app...
[2013-01-04 12:17:00] Adding rack-protection-1.2.0.gem to app...
[2013-01-04 12:17:00] Adding tilt-1.3.3.gem to app...
[2013-01-04 12:17:00] Adding sinatra-1.3.2.gem to app...
[2013-01-04 12:17:00] Adding bundler-1.1.3.gem to app...
[2013-01-04 12:17:00] Adding cf-autoconfig-0.0.4.gem to app...
[2013-01-04 12:17:00] Adding cf-runtime-0.0.2.gem to app...
[2013-01-04 12:17:00] Creating droplet
[2013-01-04 12:17:01] Uploading droplet
[2013-01-04 12:17:02] Done! 
```

微日志（失败）

```
Reading logs/staging.log... OK
Logfile created on 2013-01-04 13:46:13 +0000 by logger.rb/25413
Adding cfoundry-0.4.17.gem to app...
Adding clouseau-0.0.2.gem to app...
Adding emk-sinatra-url-for-0.2.1.gem to app...
Adding haml-3.1.7.gem to app...
Adding hashie-1.2.0.gem to app...
Adding interact-0.5.1.gem to app...
Adding json-1.7.6.gem to app...
Adding json_pure-1.6.7.gem to app...
Adding manifests-vmc-plugin-0.4.19.gem to app...
Adding mothership-0.3.5.gem to app...
Adding multi_json-1.4.0.gem to app...
Adding multipart-post-1.1.5.gem to app...
Adding rack-1.4.1.gem to app... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T14:46:58.760

最新版本的 micro vm 修复了这个问题。如果有人知道有关此的任何文档，那么在检查应用程序时仍然有兴趣知道该过程是什么。感谢所有的帮助。克雷格。

# c# - 为列表视图中的项目着色

> ID：14158658
> 
> 赞同：3
> 
> 时间：2013-01-04T14:05:49.407
> 
> 标签：c#, wpf, listview

好的，因为我是 WPF 的新手，所以我可能会问一个简单的问题，但我在过去 5 个小时里一直在寻找解决方案，但一无所获。
我有一个类，它包含一个布尔值，指示该`ListView`行是否应该着色。
我正在绑定其余列的值，但由于没有颜色列，我一直试图弄清楚如何去做。

我尝试了`Style`s，尝试`DataTemplate`了 s（我花了一些时间来理解将它们放在哪里，但我想通了）和一些 C# 代码中的函数选项，我不知道如何调用。

我知道我可能没有提供足够的信息或任何代码，但让我知道你需要什么来帮助我，我会发布它，对此我感到非常抱歉，但我还是新人，所以我没有甚至不知道你需要什么。

这是我正在使用的课程：

```
 public class ReportRow
{
    public string ProductID { get; set; }
    public int SideA { get; set; }
    public int SideB { get; set; }
    public string Workers { get; set; }

    public bool Equality { get; set; }
} 
```

一切都显示在`ListView`除了应该指示行是否应该着色的布尔之外。

**更新**

这是`ListView`我正在使用的：

```
 <ListView Height="118" HorizontalAlignment="Right" Name="ReportView" VerticalAlignment="Top" Width="390" HorizontalContentAlignment="Right" Grid.Row="1" ItemsSource="{Binding ReportRows}" >
        <ListView.View>
            <GridView>
                <GridView.Columns>
                    <GridViewColumn Header="Product" Width="60" DisplayMemberBinding="{Binding ProductID}" />
                    <GridViewColumn Header="SideA" Width="60" DisplayMemberBinding="{Binding SideA}"/>
                    <GridViewColumn Header="SideB" Width="60" DisplayMemberBinding="{Binding SideB}"/>
                    <GridViewColumn Header="Workers" DisplayMemberBinding="{Binding Workers}"/>
                </GridView.Columns>
            </GridView>
        </ListView.View>
    </ListView> 
```

这是我目前拥有的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T14:24:04.020

嗨尝试使用转换器

```
 public class BoolToColorConverter : IValueConverter
{

    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        if (value is bool && (bool)value)
            return new SolidColorBrush(Colors.Red);
        else
            return null;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
}

<Window.Resources>
    <conv:BoolToColorConverter x:Key="boolToColorConverter"/>
</Window.Resources>

 <GridViewColumn Header="Product" Width="60" DisplayMemberBinding="{Binding ProductID}" BackGround="{Binding Equality, Converter={StaticResource boolToColorConverter}}" /> 
```

我希望这会给你一个想法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T14:37:00.807

您可以使用 ItemContainerStyle 属性为 ListViewItems 着色：

```
 <ListView.ItemContainerStyle>
            <Style TargetType="{x:Type ListViewItem}">
                <Style.Triggers>
                    <DataTrigger Binding="{Binding Path=Equality}" Value="true">
                        <Setter Property="Background" Value="ColorWhenTrue"/>
                    </DataTrigger>
                    <DataTrigger Binding="{Binding Path=Equality}" Value="false">
                        <Setter Property="Background" Value="ColorWhenFalse"/>
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </ListView.ItemContainerStyle> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T14:15:34.693

这是一个项目的链接，它演示了我相信您正在寻找的内容：http: [//www.codeproject.com/Articles/18585/Highlighting-Items-in-a-WPF-ListView](http://www.codeproject.com/Articles/18585/Highlighting-Items-in-a-WPF-ListView)。您将需要更改转换器代码的代码，因为您的属性是布尔值而不是整数，并将绑定更改为您的属性名称。

# php - 如何将 jQuery 中的文件作为附件传递给 phpMailer？

> ID：14158670
> 
> 赞同：1
> 
> 时间：2013-01-04T14:06:32.033
> 
> 标签：php, jquery, submit, phpmailer, file-io

```
$(".feedback input.sent").click(function(e) {
  e.preventDefault();
  var name = $(".feedback textarea.name").val();
  var mail = $(".feedback textarea.mail").val();
  var phone = $("feedback textarea.phone").val();
  // the file field probably has to be here somewhere as well?
  var info = $(".feedback textarea.info").val();

  if (name && mail && info) {
    var data = {name: name, mail: mail, phone: phone, info: info};
    // I guess I need to somehow get the file itself to this array to pass it to phpMailer?

    $.post(baseUrl + "templates/feedback.php", data, function() {
      $(".contact-form input, .contact-form textarea").val("");
        console.log("great");
    });
  }
  else {
    console.log("not great");
  }
}); 
```

显然我需要添加多个附件，但我不知道如何将它们传递给`$mail->AddAttachment($target_path);`我需要帮助的地方。

我正在使用[它](http://malsup.com/jquery/form/)来添加多个文件。

我的 phpMailer 运行良好，直到我在那里添加 AddAttachment()，然后它不会发送电子邮件。例如，我在那里添加了图片链接。它也没有给我任何错误，这就是我来这里的原因。

我的主要需求仍然是将表单中的任何文件传递给我的 feedback.php 文件，邮件程序在该文件中执行它并将其/它们全部附加到电子邮件中。

反馈.php 文件：

```
<?php

require_once "phpmailer.inc.php";

if ($_POST['name'] && $_POST['info']) {
  $message = "";
  $message .= "Name:\n" . $_POST['name'] . "\n\n";
  $message .= "E-Mail:\n" . $_POST['mail'] . "\n\n";
  $message .= "Phone:\n" . $_POST['phone'] . "\n\n";
  $message .= "Message:\n" . $_POST['info'] . "\n\n";

  $mail = new PHPMailer();

  $mail->IsSMTP();
  $mail->Host     = "xxx.xxx.xxx";

  $mail->Port     = 25;

  $mail->From     = "xxx@xxx.xxx";

  $mail->AddAddress("xxx@xxx.xxx");

  foreach($_FILES as $key => $file){
    $target_path = "uploads/";
    $target_path = $target_path .basename($file['name']);

    if(move_uploaded_file($file['tmp_name'], $target_path)) {
    echo "the file ".basename($file['name'])." has been uploaded";
    }
    else {
     echo "there was an error";
    }
    $mail->AddAttachment($target_path);
  }

  $mail->Subject  = "Feedback";
  $mail->Body     = $message;
  $mail->WordWrap = 50;

  if(!$mail->Send()) {
    echo 'Error.';
    echo 'Problem: ' . $mail->ErrorInfo;
  } else {
    echo 'Good';
  }

}

?> 
```

我真的不确定那里的附件部分，我从这里的某个地方找到了它，但是在没有花哨的循环的情况下使用它并不能很好地工作......

# python - 如何在 python 中确定外部程序是否打开？

> ID：14158674
> 
> 赞同：4
> 
> 时间：2013-01-04T14:06:52.730
> 
> 标签：python, windows

我试图在 python 中确定某个应用程序是否已经打开，这样我就不会打开它两次。我做了一些研究，发现可以提取程序的进程名称，但我唯一遇到的问题是我正在检查的程序本身有一个非常通用的进程名称（在这种情况下， “pythonw.exe”或“cmd.exe”）。

但是，它在 Windows 任务管理器的应用程序列表中确实有不同的名称，所以我的问题是是否有任何方法可以使用它来检测程序是否打开。我的工作场所不允许我下载用于此脚本的其他程序或模块，因此答案需要使用 os 模块或 Windows 库中已包含的类似模块。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T14:46:39.373

我使用以下代码检查某个程序是否正在运行：

```
import psutil     #psutil - https://github.com/giampaolo/psutil

# Get a list of all running processes
list = psutil.pids()

# Go though list and check each processes executeable name for 'putty.exe'
for i in range(0, len(list)):
    try:
        p = psutil.Process(list[i])
        if p.cmdline()[0].find("putty.exe") != -1:
            # PuTTY found. Kill it
            p.kill()
            break;
    except:
        pass 
```

[PS：您可以使用Virtual ENV](http://www.virtualenv.org/en/latest/)安装自己的模块，也可以选择其他安装路径！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T14:38:52.330

我认为 Python 标准模块无法完成您的要求。它需要一些 3rd 方库，例如`win32api`, `win32pdhutil`, `win32con`.

另一种方法是使用 windows 命令`tasklist`。使用 Python 作为 bat 包装器，并解析`tasklist`.

```
C:\Documents and Settings\Administrator>tasklist

Image Name                   PID Session Name     Session#    Mem Usage
========================= ====== ================ ======== ============
System Idle Process            0 Console                 0         28 K
System                         4 Console                 0        236 K
smss.exe                     812 Console                 0        388 K
csrss.exe                    860 Console                 0      3,720 K
winlogon.exe                 884 Console                 0      4,148 K
services.exe                 928 Console                 0      3,356 K
lsass.exe                    940 Console                 0      5,904 K
vmacthlp.exe                1100 Console                 0      2,348 K
... 
```

# php - 如何阻止 cURL 使用 100 Continue？

> ID：14158675
> 
> 赞同：23
> 
> 时间：2013-01-04T14:06:55.900
> 
> 标签：php, jquery, curl, proxy

所以，长话短说，我有一个使用 MVC Web API 作为后端的 AJAX 应用程序。然而，客户端从不同的域调用并使用 PHP 代理文件来解决跨域请求问题。

但是，使用 PHP 代理，Web API 会使用 HTTP 标头响应某些请求，`100 Continue`并且任何获取此标头的请求都需要花费过多的时间才能完成（我们说的最多 2 分钟左右），并且还可能返回无效的回复。

这[似乎是 cURL](http://the-stickman.com/web-development/php-and-curl-disabling-100-continue-header/)的一个已知问题，解决方法通常被引用为插入以下行以删除 cURL 请求中的 expect: 100 标头

不幸的是，解决方案对我来说似乎难以捉摸：

```
$headers = getallheaders();
$headers_new = "";
foreach($headers as $title => $body) {
    $headers_new[] = $title.": ".$body;
}
//$headers_new[] = 'Expect:';
curl_setopt($ch, CURLOPT_HTTPHEADER, $headers_new);
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Expect:') ); 
```

此代码有效，但删除了所有其他标头（这对我来说不可行，因为我使用 HTTP 基本身份验证标头通过 API 进行身份验证）。您可能还注意到我尝试将 添加`Expect:`到现有标题中，但这对我也没有帮助。

如何维护现有的标头，同时防止 cURL 期望 100 继续？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-11T16:51:10.687

*除非*数组包含一个字符串，否则using`$headers_new[] = 'Expect:';`确实有效。在这种情况下，您需要将其从数组中删除，否则它将期望 100 继续（逻辑上）。*`$headers_new``'Expect: 100-continue'`*

 *因为在您使用的代码中[`getallheaders()`](http://php.net/getallheaders)并且您没有检查它是否已经包含`Expect: 100-continue`标题，所以您的情况可能就是这种情况。

这是一般情况的摘要（以及创建它的脚本）：

```
PHP Curl HTTP/1.1 100 Continue and CURLOPT_HTTPHEADER

GET request ..........................................: Continue: No
GET request with empty header ........................: Continue: No
POST request with empty header .......................: Continue: Yes
POST request with expect continue explicitly set .....: Continue: Yes
POST request with expect (set to nothing) as well ....: Continue: Yes
POST request with expect continue from earlier removed: Continue: No 
```

代码：

```
<?php

$ch = curl_init('http://www.iana.org/domains/example/');

function curl_exec_continue($ch) {
    curl_setopt($ch, CURLOPT_HEADER, 1);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    $result   = curl_exec($ch);
    $continue = 0 === strpos($result, "HTTP/1.1 100 Continue\x0d\x0a\x0d\x0a");
    echo "Continue: ", $continue ? 'Yes' : 'No', "\n";

    return $result;
}

echo "GET request ..........................................: ", !curl_exec_continue($ch);

$header = array();
curl_setopt($ch, CURLOPT_HTTPHEADER, $header);
echo "GET request with empty header ........................: ", !curl_exec_continue($ch);

curl_setopt($ch, CURLOPT_POST, TRUE);
curl_setopt($ch, CURLOPT_POSTFIELDS, array('hello'));
echo "POST request with empty header .......................: ", !curl_exec_continue($ch);

$header[] = 'Expect: 100-continue';
curl_setopt($ch, CURLOPT_HTTPHEADER, $header);
echo "POST request with expect continue explicitly set .....: ", !curl_exec_continue($ch);

$header[] = 'Expect:';
curl_setopt($ch, CURLOPT_HTTPHEADER, $header);
echo "POST request with expect (set to nothing) as well ....: ", !curl_exec_continue($ch);

unset($header[0]);
curl_setopt($ch, CURLOPT_HTTPHEADER, $header);
echo "POST request with expect continue from earlier removed: ", !curl_exec_continue($ch); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-02T14:38:19.090

谢谢你的剧本，哈克。由于我需要它用于 HTTP PUT，因此我对其进行了一些扩展，结果如下：

```
GET request ..........................................: Continue: No
GET request with empty header ........................: Continue: No
POST request with empty header .......................: Continue: Yes
POST request with expect continue explicitly set .....: Continue: Yes
POST request with expect (set to nothing) as well ....: Continue: Yes
POST request with expect continue from earlier removed: Continue: No
PUT request with empty header ........................: Continue: Yes
PUT request with expect continue explicitly set ......: Continue: Yes
PUT request with expect (set to nothing) as well .....: Continue: Yes
PUT request with expect continue from earlier removed : Continue: No
DELETE request with empty header .....................: Continue: Yes
DELETE request with expect continue explicitly set ...: Continue: Yes
DELETE request with expect (set to nothing) as well ..: Continue: Yes
DELETE request with expect continue from earlier removed : Continue: No 
```

这是脚本：

```
<?php 

$ch = curl_init('http://www.iana.org/domains/example/');

function curl_exec_continue($ch) {
    curl_setopt($ch, CURLOPT_HEADER, 1);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    $result   = curl_exec($ch);
    $continue = 0 === strpos($result, "HTTP/1.1 100 Continue\x0d\x0a\x0d\x0a");
    echo "Continue: ", $continue ? 'Yes' : 'No', "\n";

    return $result;
}

// --- GET

echo "GET request ..........................................: ", !curl_exec_continue($ch);

$header = array();
curl_setopt($ch, CURLOPT_HTTPHEADER, $header);
echo "GET request with empty header ........................: ", !curl_exec_continue($ch);

// --- POST

curl_setopt($ch, CURLOPT_POST, TRUE);

curl_setopt($ch, CURLOPT_POSTFIELDS, array('hello'));
echo "POST request with empty header .......................: ", !curl_exec_continue($ch);

$header[] = 'Expect: 100-continue';
curl_setopt($ch, CURLOPT_HTTPHEADER, $header);
echo "POST request with expect continue explicitly set .....: ", !curl_exec_continue($ch);

$header[] = 'Expect:';
curl_setopt($ch, CURLOPT_HTTPHEADER, $header);
echo "POST request with expect (set to nothing) as well ....: ", !curl_exec_continue($ch);

unset($header[0]);
curl_setopt($ch, CURLOPT_HTTPHEADER, $header);
echo "POST request with expect continue from earlier removed: ", !curl_exec_continue($ch);

// --- PUT

curl_setopt($ch, CURLOPT_PUT, TRUE);

$header = array();
curl_setopt($ch, CURLOPT_HTTPHEADER, $header);
echo "PUT request with empty header ........................: ", !curl_exec_continue($ch);

$header[] = 'Expect: 100-continue';
curl_setopt($ch, CURLOPT_HTTPHEADER, $header);
echo "PUT request with expect continue explicitly set ......: ", !curl_exec_continue($ch);

$header[] = 'Expect:';
curl_setopt($ch, CURLOPT_HTTPHEADER, $header);
echo "PUT request with expect (set to nothing) as well .....: ", !curl_exec_continue($ch);

unset($header[0]);
curl_setopt($ch, CURLOPT_HTTPHEADER, $header);
echo "PUT request with expect continue from earlier removed : ", !curl_exec_continue($ch);

// --- DELETE

curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "DELETE");

$header = array();
curl_setopt($ch, CURLOPT_HTTPHEADER, $header);
echo "DELETE request with empty header .....................: ", !curl_exec_continue($ch);

$header[] = 'Expect: 100-continue';
curl_setopt($ch, CURLOPT_HTTPHEADER, $header);
echo "DELETE request with expect continue explicitly set ...: ", !curl_exec_continue($ch);

$header[] = 'Expect:';
curl_setopt($ch, CURLOPT_HTTPHEADER, $header);
echo "DELETE request with expect (set to nothing) as well ..: ", !curl_exec_continue($ch);

unset($header[0]);
curl_setopt($ch, CURLOPT_HTTPHEADER, $header);
echo "DELETE request with expect continue from earlier removed : ", !curl_exec_continue($ch);

?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-11-11T06:27:46.910

要删除标题 101 继续使用这个

```
curl_setopt($ch, CURLOPT_HTTPHEADER,array("Expect:")); 
```*

# iframe - iFrame 和媒体查询问题

> ID：14158682
> 
> 赞同：2
> 
> 时间：2013-01-04T14:07:23.303
> 
> 标签：iframe, media-queries

我对 iFrame 中内容的媒体查询中的样式有疑问。我在我们的网站中嵌入了一个 iFrame。我们为 iFrame 中的内容设置了样式。我的 iFrame 宽度是 480 像素。我有一个媒体查询@media screen 和（最大宽度：480px），我正在向 iFrame 中的内容添加样式。

问题是，当在大小为 1900px 宽度的桌面浏览器中打开页面时（iFrame 大小相同为 480px），媒体查询中 max-width: 480px 的样式被应用。但是当我在 iPad 中打开同一页面时，它没有考虑媒体查询的 iFrame 宽度，而是采用屏幕宽度并应用 768px 宽度的媒体查询样式。

据我所知，它必须呈现 iFrame 宽度和 iFrame 宽度媒体查询样式，因为 iFrame 包含整个 html 页面。请让我知道如何解决 iPad 问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-12-30T11:23:39.817

iframe 宽度也取决于视口，因此请尝试设置如下内容：

```
<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; minimum-scale=1.0;" /> 
```

此外，如果您想定位特定设备（如 ipad），并且 iframe 中有内容，则可以考虑使用 min-device-width 来确定您的 iframe 是否在特定设备中。

# javascript - 如何制作两部分的切换？

> ID：14158685
> 
> 赞同：0
> 
> 时间：2013-01-04T14:07:30.810
> 
> 标签：javascript, jquery

超级简单的概念。请参阅此处[http://jquerytest.thepeoplesmarketing.us/jquerydev/index2.html](http://jquerytest.thepeoplesmarketing.us/jquerydev/index2.html)。灰色 div 是“幻灯片”。我想要从左到右 5 个（不是问题），并且在悬停时，每个“动画”红色 div 当前在示例中悬停时可见。

显然，问题是当我切换红色 div 时，我的悬停焦点会更改为它，从而取消切换它。在我将整个父 div 鼠标移开之前，如何让它不会“取消切换”？

（（免责声明；非常极端的 JS/JQ 菜鸟，具有强大的 python 背景，所以请原谅我的愚蠢））

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T14:13:06.923

显示的红色 div 位于悬停元素的顶部，因此它失去了悬停。将红色 div 放置在悬停元素内，如下所示：

```
<div id="box1" class="boxclass">
    <div id="msgbox" class="hideplz" style="display: none;"></div>
</div> 
```

*或者，如果您不能更改 html 结构，您可以在灰色 div 上执行“mouseenter”，在红色 div 上执行“mouseout”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T14:13:07.653

如果您使用带有“悬停”状态的 jQuery，则必须更改它。您需要一个将鼠标悬停在灰色 div 上的功能，然后检查是否悬停在红色 div 之外以再次隐藏它。

您还可以检查红色 div 的状态（是否显示），因为如果没有显示，您可能还想在灰色 div 上触发 houver。

编辑：还要检查 Syon 的答案。我不认为你可以这样做，因为你可能会有不止一个灰色 div，但如果你这样做，那就去吧。

# javascript - 在 javascript 中构建一个简单的 ajax 类

> ID：14158688
> 
> 赞同：1
> 
> 时间：2013-01-04T14:07:59.267
> 
> 标签：javascript, ajax

我正在尝试为 chrome 扩展创建一个简单的 ajax 类。`Uncaught TypeError: Cannot read property 'readyState' of undefined`尝试运行代码时出现未定义的错误 。似乎是什么导致了这个问题？

```
function ajax(arguments, callback) {
    this.xhr = new XMLHttpRequest();
    this.xhr.open(arguments.requestType, arguments.requestUrl + arguments.requestParameters, true);
    this.xhr.onreadystatechange = function() {
        if (this.readyState === 4 && this.status === 200) {
            requestedData = JSON.parse(this.responseText);
            callback(requestedData);
        }
    }
    this.xhr.send();
}

var ajaxRequest = new ajax({ 
    requestType: 'GET',
    requestUrl: 'http://ezswag.com/bots/terms.php',
    requestParameters: ' ',
    }, function(json) {
        //console.log(json);  => json {apple: "red", cheery: "red"}
        return json;
    });

    console.log(ajaxRequest); 
```

**（更新的代码和工作**）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T14:10:33.853

的值`this`取决于函数的调用方式。

当您将`ajax`函数作为构造函数调用时（请注意，约定说您应该以大写字母开头构造函数名称）`this`是正在创建的实例。

在`readyState`函数中，`this`是 XMLHttpRequest 对象。

`this.xhr`您对函数内部的所有引用都`readyState`应该是简单的`this`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T14:09:24.443

您不能在函数内部使用 this.xhr。这是对当前函数的引用，而不是您的想法。

使用这样的临时变量：

```
var self = this;

this.xhr.onreadystatechange = function() {
    if (self.xhr.readyState === 4 && self.xhr.status === 200) {
        requestedData = JSON.parse(self.xhr.responseText);
        console.log(requestedData);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T14:09:41.330

在您的`onreadystatechange`实施中，`this`并不是您认为的那样。您需要捕获`ajax`函数的范围并在回调中使用它。

```
function ajax(parameter) {
    var that = this;
    this.xhr = new XMLHttpRequest();
    this.xhr.open(parameter.requestType, parameter.requestUrl + parameter.requestParameters, true);
    this.xhr.onreadystatechange = function() {
        if (that.xhr.readyState === 4 && that.xhr.status === 200) {
            requestedData = JSON.parse(that.xhr.responseText);
            console.log(requestedData);
        }
    }
    this.xhr.send();
} 
```

# macos - CorePlot 滚动实时绘图

> ID：14158691
> 
> 赞同：1
> 
> 时间：2013-01-04T14:08:11.697
> 
> 标签：macos, cocoa, core-plot

我想编写一个自动滚动的绘图，所以实际时间在右侧。（标记为红色）

![在此处输入图像描述](../Images/4f37c2b2030cc71c9c12cd675098a18f.png)

以时间间隔不规则地添加数据。我怎样才能做到这一点？我已经有一个滚动图（基于 coreplot 提供的示例代码）。但它并不完全准确并且非常消耗CPU。标签也应该是“圆形”时间，例如 14:52:00 14:52:20 等等。

到目前为止，这是我的代码：

测试窗口控制器.h

```
@interface TestWindowController : NSWindowController<CPTPlotDataSource> {
    NSMutableArray *plotData;
    double currentIndex;
    NSDate *referenceDate;
    NSTimer *scrollTimer;
    NSTimer *newDataTimer;
}
@property (weak) IBOutlet CPTGraphHostingView *graphView; 
```

测试窗口控制器.m

```
NSString *kPlotIdentifier       = @"Data Source Plot";
const double kTimePeriod = 60.0; // 1 Minute
const double kFrameRate         = 10.0;  // frames per second
const double kAlpha             = 0.25; // smoothing constant

@interface DataObj : NSObject {
    NSTimeInterval timeInterval;
    double testValue;
}
@property(readwrite) NSTimeInterval timeInterval;
@property(readwrite) double testValue;
@end

@implementation DataObj
@synthesize timeInterval;
@synthesize testValue;
@end

@implementation TestWindowController
@synthesize graphView;

- (id)initWithWindow:(NSWindow *)window
{
    self = [super initWithWindow:window];
    if (self) {
        // Initialization code here.
    }

    return self;
}

- (void)windowDidLoad
{
    // Set a reference Date
    NSCalendar *gregorian = [[NSCalendar alloc]
                             initWithCalendarIdentifier:NSGregorianCalendar];
    NSDateComponents *dateComponents = [gregorian components:(NSHourCalendarUnit | NSMinuteCalendarUnit)
                                                    fromDate:[NSDate date]];
    [dateComponents setSecond:0];
    referenceDate = [gregorian dateFromComponents:dateComponents];
    currentIndex = 0.0;

    // Core Plot
    CPTGraph *graph = [[CPTXYGraph alloc] initWithFrame:CGRectZero];
    graphView.hostedGraph = graph;
    [graph applyTheme:[CPTTheme themeNamed:kCPTPlainBlackTheme]];

    //[self setTitleDefaultsForGraph:graph withBounds:bounds];
    //[self setPaddingDefaultsForGraph:graph withBounds:bounds];

    graph.plotAreaFrame.paddingTop    = 15.0;
    graph.plotAreaFrame.paddingRight  = 15.0;
    graph.plotAreaFrame.paddingBottom = 70.0;
    graph.plotAreaFrame.paddingLeft   = 55.0;

    // Grid line styles
    CPTMutableLineStyle *majorGridLineStyle = [CPTMutableLineStyle lineStyle];
    majorGridLineStyle.lineWidth = 0.75;
    majorGridLineStyle.lineColor = [[CPTColor whiteColor] colorWithAlphaComponent:0.5];

    CPTMutableLineStyle *minorGridLineStyle = [CPTMutableLineStyle lineStyle];
    minorGridLineStyle.lineWidth = 0.25;
    minorGridLineStyle.lineColor = [[CPTColor whiteColor] colorWithAlphaComponent:0.1];

    // Axes
    // X axis
    CPTXYAxisSet *axisSet = (CPTXYAxisSet *)graph.axisSet;
    CPTXYAxis *x          = axisSet.xAxis;
    x.labelingPolicy              = CPTAxisLabelingPolicyAutomatic;
    x.orthogonalCoordinateDecimal = CPTDecimalFromUnsignedInteger(0);
    x.majorGridLineStyle          = majorGridLineStyle;
    x.minorGridLineStyle          = minorGridLineStyle;
    x.minorTicksPerInterval       = 9;
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    dateFormatter.dateStyle = kCFDateFormatterNoStyle;
    dateFormatter.timeStyle = kCFDateFormatterMediumStyle;
    CPTTimeFormatter *timeFormatter = [[CPTTimeFormatter alloc] initWithDateFormatter:dateFormatter];
    timeFormatter.referenceDate = referenceDate;
    x.labelFormatter            = timeFormatter;

    // Y axis
    CPTXYAxis *y = axisSet.yAxis;
    y.labelingPolicy              = CPTAxisLabelingPolicyAutomatic;
    y.orthogonalCoordinateDecimal = CPTDecimalFromUnsignedInteger(0);
    y.majorGridLineStyle          = majorGridLineStyle;
    y.minorGridLineStyle          = minorGridLineStyle;
    y.minorTicksPerInterval       = 3;
    y.labelOffset                 = 5.0;
    y.axisConstraints             = [CPTConstraints constraintWithLowerOffset:0.0];

    // Rotate the labels by 45 degrees, just to show it can be done.
    x.labelRotation = M_PI * 0.25;

    // Create the plot
    CPTScatterPlot *dataSourceLinePlot = [[CPTScatterPlot alloc] init] ;
    dataSourceLinePlot.identifier     = kPlotIdentifier;
    dataSourceLinePlot.cachePrecision = CPTPlotCachePrecisionDouble;

    CPTMutableLineStyle *lineStyle = [dataSourceLinePlot.dataLineStyle mutableCopy];
    lineStyle.lineWidth              = 3.0;
    lineStyle.lineColor              = [CPTColor greenColor];
    dataSourceLinePlot.dataLineStyle = lineStyle;

    dataSourceLinePlot.dataSource = self;
    [graph addPlot:dataSourceLinePlot];

    // Plot space
    CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *)graph.defaultPlotSpace;
    plotSpace.xRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromUnsignedInteger(0) length:CPTDecimalFromDouble(kTimePeriod)];
    plotSpace.yRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromUnsignedInteger(0) length:CPTDecimalFromUnsignedInteger(1)];

    plotData  = [[NSMutableArray alloc] init];
    scrollTimer = [NSTimer scheduledTimerWithTimeInterval:1.0 / kFrameRate
                                         target:self
                                       selector:@selector(scrollPlot:)
                                       userInfo:nil
                                        repeats:YES];
    newDataTimer = [NSTimer scheduledTimerWithTimeInterval:3.0
                                                   target:self
                                                 selector:@selector(newData:)
                                                 userInfo:nil
                                                  repeats:YES];
}

#pragma mark Test Methods

-(void)scrollPlot:(NSTimer *)theTimer
{
    CPTGraph *theGraph = graphView.hostedGraph;
    CPTPlot *thePlot   = [theGraph plotWithIdentifier:kPlotIdentifier];

    if ( thePlot ) {
        currentIndex = (-[referenceDate timeIntervalSinceNow])-kTimePeriod;
        CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *)theGraph.defaultPlotSpace;
        double location       = currentIndex;
        plotSpace.xRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromDouble(location)
                                                        length:CPTDecimalFromDouble(kTimePeriod)];

        //[plotData addObject:[NSNumber numberWithDouble:(1.0 - kAlpha) * [[plotData lastObject] doubleValue] + kAlpha * rand() / (double)RAND_MAX]];
        //[thePlot insertDataAtIndex:plotData.count - 1 numberOfRecords:1];
    }
}

-(void)newData:(NSTimer *)theTimer
{
    CPTGraph *theGraph = graphView.hostedGraph;
    CPTPlot *thePlot   = [theGraph plotWithIdentifier:kPlotIdentifier];

    if ( thePlot ) {
        DataObj *test = [[DataObj alloc] init];
        test.timeInterval = -[referenceDate timeIntervalSinceNow];
        test.testValue = rand() / (double)RAND_MAX;

        [plotData addObject:test];
        [thePlot insertDataAtIndex:plotData.count - 1 numberOfRecords:1];
    }
}

#pragma mark Plot Data Source Methods

-(NSUInteger)numberOfRecordsForPlot:(CPTPlot *)plot
{
    return [plotData count];
}

-(NSNumber *)numberForPlot:(CPTPlot *)plot field:(NSUInteger)fieldEnum recordIndex:(NSUInteger)index
{
    NSNumber *num = nil;
    DataObj *dataObj = [plotData objectAtIndex:index];
    switch ( fieldEnum ) {
        case CPTScatterPlotFieldX:
            num = [NSNumber numberWithDouble:dataObj.timeInterval];
            break;

        case CPTScatterPlotFieldY:
            num = [NSNumber numberWithDouble:dataObj.testValue];
            break;

        default:
            break;
    }

    return num;
} 
```

我怎样才能让程序时间准确且 CPU 消耗更少？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T00:07:03.917

自动轴标签策略不适用于日期。例如，如果要每 20 秒标记一次，请使用固定间隔标记策略。

高 CPU 使用率可能与重绘轴和每次绘图范围更新的绘图有关。您需要尝试不同的滚动帧速率，以找到 CPU 使用率和平滑更新的最佳组合。

# php - Wordpress XML-RPC，我如何获取用户角色或知道用户是否能够发布帖子？

> ID：14158694
> 
> 赞同：1
> 
> 时间：2013-01-04T14:08:17.317
> 
> 标签：php, wordpress, permissions, xml-rpc, roles

我需要检查用户权限`XMLRPC`以了解是否能够发布帖子。

我检查了几种`XMLRPC`方法都没有成功，`getUsers`WordPress 3.5 的新方法似乎很理想，但我需要支持旧版本。

如何验证用户是否可以发布帖子？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T03:08:40.863

如果您使用的是 3.5，看起来它为此添加了一个函数：[getUser](https://codex.wordpress.org/XML-RPC_WordPress_API/Users)。您需要检查“角色”返回值。

# excel - 空白后自动生成 Excel 图表

> ID：14158697
> 
> 赞同：0
> 
> 时间：2013-01-04T14:08:21.157
> 
> 标签：excel, excel-2010, vba

目前我正在更新每周图表。复制并粘贴数据后，图表变为空白。所以我必须去 Layout -> Axes Primary Horizo​​ntal，然后我必须选择显示默认轴。我必须右键单击并格式化轴，然后我必须将固定移动到自动。虽然这在每一边都留下了一个空间，所以我必须回去选择固定从最大值减去一个并在最小值上加一个以使图形正确。

X 轴以 15 分钟的间隔使用一周的日期。有没有办法使用宏来自动化这个过程？使用 active.workbook

例子

*   2012 年 9 月 3 日 0:15
*   2012 年 9 月 3 日 0:30
*   2012 年 9 月 3 日 0:45
*   2012 年 9 月 3 日 1:00
*   2012 年 9 月 3 日 1:15
*   2012 年 9 月 3 日 1:30
*   2012 年 9 月 3 日 1:45

* * *

以下是我从宏记录器中得到的。![在此处输入图像描述](../Images/0d046be15d1d44e66aca7c7aee9a8467.png)

```
Sub Graph()
'
' Graph Macro
'
' Keyboard Shortcut: Ctrl+q
'
    Windows("2013W21.xls").Activate

    ActiveSheet.ChartObjects("Chart 1").Activate
    ActiveChart.Axes(xlCategory).Select
    ActiveChart.Axes(xlCategory).MinimumScaleIsAuto = True
    ActiveChart.Axes(xlCategory).MaximumScaleIsAuto = True
    ActiveChart.Axes(xlCategory).MinimumScale = 41161
    ActiveChart.Axes(xlCategory).MaximumScale = 41170
    ActiveChart.Axes(xlCategory).MinimumScale = 41162
    ActiveChart.Axes(xlCategory).MaximumScale = 41169
    Selection.Delete
    Application.CutCopyMode = False
    ActiveWorkbook.Save
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T05:47:37.677

子测试器（）

```
Dim rngDates As Range, sht As Worksheet
Dim wsf As WorksheetFunction

Set wsf = Application.WorksheetFunction
Set sht = ActiveSheet
Set rngDates = sht.Range(sht.Range("B5"), sht.Cells(Rows.Count, 2).End(xlUp))

'set x-axis (with a padding of 1 hour either side)
With ActiveSheet.ChartObjects("Chart 1").Chart
    .Axes(xlCategory).MinimumScale = wsf.Min(rngDates) - (1 / 28)
    .Axes(xlCategory).MaximumScale = wsf.Max(rngDates) + (1 / 28)
End With 
```

结束子

这段代码解决了这个问题。

# email - 如何使用 imap 和 Java 代码获取纯文本消息正文？

> ID：14158700
> 
> 赞同：1
> 
> 时间：2013-01-04T14:08:31.393
> 
> 标签：email, jakarta-mail, gmail-imap

我正在开发这样一个可以正确发送电子邮件的应用程序。但是在获取电子邮件期间，我得到了 html 编码的消息正文。但是我想要消息正文，因为它是纯文本类型的。所以请指导我。

我接收电子邮件的代码是：

```
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.util.Properties;

import javax.mail.Folder;
import javax.mail.Message;
import javax.mail.MessagingException;
import javax.mail.NoSuchProviderException;
import javax.mail.Session;
import javax.mail.Store;

public class InboxReader {

    public static void main(String args[]) throws Exception {
        Properties props = System.getProperties();
        props.setProperty("mail.store.protocol", "imaps");
            try {
                Session session = Session.getDefaultInstance(props, null);
                Store store = session.getStore("imaps");
                store.connect("imap.gmail.com", "emailId@gmail.com", "password");
                System.out.println(store);

                Folder inbox = store.getFolder("Inbox");
                inbox.open(Folder.READ_WRITE);

                BufferedReader reader = new BufferedReader (
                        new InputStreamReader(System.in));
                        // Get directory

                        Message message[] = inbox.getMessages();

                        //Message message[] = folder.getMessages();
                        for (int i=0, n=message.length; i<n; i++) 
                        {
                        System.out.println(i + ": " + message[i].getFrom()[0]
                        + "\t" + message[i].getSubject());

                        System.out.println("Do you want to read message? " +
                        "[YES to read/QUIT to end]");
                        String line = reader.readLine();
                        if ("YES".equals(line)) {
                        message[i].writeTo(System.out);
                        } else if ("QUIT".equals(line)) {
                        break;
                        }
                        }
                        }
         catch (NoSuchProviderException e) {
            e.printStackTrace();
            System.exit(1);
        } catch (MessagingException e) {
            e.printStackTrace();
            System.exit(2);
        }
    }
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T06:44:19.770

这取决于发件人，您将收到他发送的任何内容。正如比尔建议的那样，在消息正文中寻找不同类型的`MimeTypes`你。
但是，如果您确定会收到`HTML`，则可以`plain text`使用 JSoup 库轻松地将其转换为。如果不确定，您首先必须从 MultiPart 对象中提取 HTML，然后将其转换为纯文本。

例子：

```
Document doc = Jsoup.parse(HTMLText);

String plainText = doc.body().text();

System.out.println(plainText); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T09:55:42.480

您会收到发件人发送给您的内容。如果他们只给你发送 html，你只会得到 html。在许多情况下，他们会向您发送多部分/替代消息，其中包含纯文本和 html 版本的相同内容。此[JavaMail FAQ 条目](http://www.oracle.com/technetwork/java/javamail/faq/index.html#mainbody)将帮助您入门。

但是，如果消息只包含 html 内容并且您想要纯文本，您将不得不自己处理 html 内容并尝试将其转换为纯文本。根据你想做的工作有多好，这要么相对容易，要么非常非常困难。

# cruisecontrol.net - 无法在其他机器上挂载ccnet

> ID：14158702
> 
> 赞同：1
> 
> 时间：2013-01-04T14:08:37.007
> 
> 标签：cruisecontrol.net

我正在尝试在其他机器上安装 CruiseContol.NET。但我收到了这个错误

```
Server encountered an internal error. For more information, turn off customErrors in the server's .config file. 
```

我该如何解决这个问题？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T17:19:56.143

您是否按照建议关闭了自定义错误？您可以在*web.config*文件中执行此操作，有一个条目：

```
<customErrors mode="On" /> 
```

或者

```
<customErrors mode="RemoteOnly" /> 
```

将此更改为

```
<customErrors mode="Off" /> 
```

然后应显示有关错误原因的更多详细信息。或者，错误原因可能已保存到 Windows 日志中。

# asp-classic - ASP 经典页面在提交时未完成加载

> ID：14158710
> 
> 赞同：1
> 
> 时间：2013-01-04T14:08:56.567
> 
> 标签：asp-classic

我有一个在第一次加载时正确加载的 ASP 经典页面。当用户单击页面上的 Delete 按钮时，它会运行一个 COM 来更新数据库中的许多记录，然后显示一条消息，告诉用户删除已完成。

但是，如果我有大量用户要更新，5000 或更多，在 COM 更新运行后，告诉用户删除已完成的消息永远不会出现。这几乎就像提交触发后页面永远不会完成加载一样。

我在页面上放置了 1 小时的 Server.ScriptTimeout，这样它就有足够的时间来完成 COM 处理。但我注意到，当更新大量记录时，页面将处理到 1 小时完成，即使更新只需要 10-15 分钟即可运行。然后消息永远不会出现告诉用户它已经完成。

任何想法我在这里发生了什么？

谢谢，

凯文

# python - Python 的 Queue 集合不会释放内存

> ID：14158724
> 
> 赞同：4
> 
> 时间：2013-01-04T14:09:33.450
> 
> 标签：python, multithreading

我有一个应用程序，我在队列中填充大量数据，然后工作人员清空这些数据。
我使用队列是因为它被阻塞了，所以我不需要一直申请锁。

因此，有时该队列会塞满 100 万条字符串数据。每个项目占用大约 80 字节的内存。

在某些情况下，在高峰使用时，python 开始占用大约 3 GB 的内存。然后当消费者清空整个队列时，python 仍然占用 3 GB 的内存。我正在使用`ps`命令检查内存。这是什么现象？这种高内存使用首先是因为队列膨胀吗？如果是这样，可以做些什么来控制它？python中有没有其他更好的集合来代替队列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T14:14:44.497

Python（通常）不会将它使用的内存返回给操作系统。一旦队列为空，您的进程将保留分配给队列的内存。如果您要向队列中添加另外 3GB 的数据，Python 应该重用它已经拥有的内存，而不是从操作系统请求更多（即，您不应该看到它的内存分配进一步增长）。

# javascript - 如何在Javascript循环中触发的回调函数中抛出错误？

> ID：14158725
> 
> 赞同：1
> 
> 时间：2013-01-04T14:09:35.400
> 
> 标签：javascript, loops, callback, throw

我需要遍历一组对象并检查回调函数中的值。我的问题是，如果找不到值，我需要抛出一个错误，所以这需要在回调和循环之外。

现在我有这个：

```
for (i = 0; i < response._conflicts.length; i += 1){
    del_rev = response._conflicts[i];
        // retrieve a document
        that.addJob( 
            "get",
            someID,
            options,
            // callback
            function (response) {
                if (condition 1) {
                    if (condition 2){
                        console.log("gotcha");
                        // run a function                    
                        f.removeDocument(someID+x);
                        return;
                    }
                } 
            },
            function (err) {
                that.error({ "status": 123 });
            }
        );
    } // end of loop

    // now if the loop turns out no results, I need to throw this error
    that.error({ "status": 404 });
    return; 
```

我的问题是，`404`在我的回调检查之前触发的第二个错误可以检测是否满足条件，所以`404`一旦满足条件并且我的`f.removeDocument(someID+x)`触发器，我总是会触发第二个函数。

我尝试`f.removeDocument(someID+x)`从回调和循环中删除，只将变量设置为 true/false，然后抛出我的错误或调用我的函数。但是，相同的结果 = 变量为 false 并在回调中将其设置为 true 之前引发错误。

我想我需要将我的`404`错误放在循环和回调中，但我不知道如何确保它只在循环完成且条件未满足时触发一次。

**问题**：
如何在循环中触发的回调函数中一次性抛出错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T14:22:41.410

这看起来像一个异步问题。要将回调作为一种连接操作处理，您需要等待最后一个回调。像这样的模式可能会有所帮助：

```
var join = (function(n, fn) {
  return function() {
    if(--n === 0) {
      fn();
    }
  }
}) (response._conflicts.length, function() {
  // Check the conditions
}); 
```

The join function will count down the required number of times and then allow you to perform the rest of the checking after the last call has completed. You will need to trigger `join()` in your request callback.

# linux-kernel - 如何从 lkm 访问文件系统相关数据

> ID：14158731
> 
> 赞同：1
> 
> 时间：2013-01-04T14:10:19.720
> 
> 标签：linux-kernel

我正在为 Linux 内核开发一个 LKM，我希望它能够获取一些与文件系统相关的特定信息。事实上，这个信息是ext4 文件系统的一个 inode 结构的字段[i_crtime （创建时间）。](http://lxr.linux.no/#linux+v3.2/fs/ext4/ext4.h#L655)

我的问题是，我怎样才能从 lkm 访问这个字段？现在我知道如何获取特定文件的 inode：

```
kern_path(<path to file>, LOOKUP_FOLLOW, &path) 
```

因此，在此之后，我通过以下方式获得了 inode：

```
path.dentry->d_inode 
```

但是这个 inode (d_inode) 是通用的 VFS [inode](http://lxr.linux.no/#linux+v3.2/include/linux/fs.h#L749)结构，而不是前面显示的 ext4_inode（也不是 ext4_inode_info）。

有人知道该怎么做吗？我正在尝试研究 VFS 代码、stat (coreutil) 代码、跟踪它，但我仍然卡住了:-S

TIA。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T11:02:13.157

EXT4_I()[函数](http://lxr.linux.no/#linux+v3.2/fs/ext4/ext4.h#L1258)从 VFS inode获取*ext4_inode_info 。*但是 VFS inode 的 ctime 和 EXT4 inode 是完全[一样](http://lxr.linux.no/#linux+v3.2/fs/ext4/ialloc.c#L869)的。所以你不妨访问*inode->i_ctime*。

# c++ - 在私有类中定义模板

> ID：14158738
> 
> 赞同：-3
> 
> 时间：2013-01-04T14:10:55.223
> 
> 标签：c++, qt, templates

我在类私有范围内定义模板变量时遇到了一些麻烦

```
private:
template<class T>; 
```

我使用visual c++ 2010所以出了什么问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T14:14:05.693

您缺少变量名称。你也不能像这样声明一个模板化的成员变量，你必须模板化类，并使用`T`.

```
template < class T >
class A
{
    T var;
}; 
```

# r - 将宽图像包装成几行

> ID：14158742
> 
> 赞同：5
> 
> 时间：2013-01-04T14:11:09.627
> 
> 标签：r, graphics, ggplot2, word-wrap

我正在制作一个相当广泛的图像，列出目标练习的连续培训课程。

![在此处输入图像描述](../Images/3192128af2a981f035e9da41d6d6745d.png)

目前，这不是很有帮助的图形，我需要将图像包裹成几行，以使每个训练集的数据更加可见。到目前为止，我一直在通过引入第二个变量来管理这个，该变量表示训练集所属的行。缺点是现在我在每一行上方都有一个条带，几乎没有任何用途。

![在此处输入图像描述](../Images/3f60e7ddd1f551f9c75becc6610da753.png)

这样做的另一种方法是将每一行生成为一个单独的图形并使用`gridExtra`'s合并它们`grid.arrange`。

我正在寻找其他（优雅的）方法将宽图形包装到多行。如果可能的话，我希望在每个方面都没有条带。欢迎所有建议。

这是我用来生成这些图像的代码。

```
library(ggplot2)
library(reshape2)

st <- 23 # number of training sets
sk <- 10 # number of shots per training set
dt <- sample(7:10, size = st * sk, prob = c(0.005, 0.15, 0.195, 0.65), replace = TRUE)
rslt <- as.data.frame(matrix(dt, nrow = 10))
names(rslt) <- paste("trening", seq_len(ncol(rslt)), sep = "")

rsltm <- melt(rslt, variable.name = "trening", value.name = "rezultat")
rsltm$trening <- ordered(rsltm$trening) 

n <- 5 # number of trainings per row
st.vrst <- round(st/n)
vrsta <- paste("vrsta", seq_len(st.vrst), sep = "")

rsltm$vrsta <- rep(vrsta, each = sk * n, length.out = nrow(rsltm))
rm(vrsta)

# wide figure
ggplot(rsltm, aes(x = trening, y = rezultat)) + 
   geom_dotplot(binaxis  = "y", stackdir = "center", show_guide = FALSE) +
   scale_fill_manual(values = rep("red", st)) +
   theme_bw()

# wrapped figure
ggplot(rsltm, aes(x = trening, y = rezultat, fill = trening)) + 
   geom_dotplot(binaxis  = "y", stackdir = "center", show_guide = FALSE) +
   scale_fill_manual(values = rep("red", st)) +
   facet_wrap(~vrsta, nrow = st.vrst, scales = "free_x") +
   theme_bw() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T14:20:46.217

要删除小图上方的条形文本，您可以`elemnt_blank()`为这些元素设置。

```
# wrapped figure
ggplot(rsltm, aes(x = trening, y = rezultat, fill = trening)) + 
  geom_dotplot(binaxis  = "y", stackdir = "center", show_guide = FALSE) +
  scale_fill_manual(values = rep("red", st)) +
  facet_wrap(~vrsta, nrow = st.vrst, scales = "free_x") +
  theme_bw() + theme(strip.text=element_blank(),
                     strip.background=element_blank()) 
```

### 编辑 - 更新生成的情节

改进绘图的一种方法是在绘图区域内放置`trening`标签。

为此`df.names`，制作了新的数据框。行数对应于 的级别`trening`。

```
df.names<-data.frame(lab.nam=unique(rsltm$trening), #labels
       x=rep(1:5, times = 5, length.out = 23), #x coordinate (1:5)
       y=rep(11,23), #y coordinate (11)
       vrsta=rep(vrsta, each = 5, length.out = 23)) #vrsta values to ensure position in facets 
```

生成没有 x 轴标签的绘图的代码。`panel.margin=`确保刻面之间的空间更小。

```
p <- ggplot(rsltm, aes(x = trening, y = rezultat)) + 
      geom_dotplot(binaxis  = "y", stackdir = "center", show_guide = FALSE) +
      scale_fill_manual(values = rep("red", st)) +
      facet_wrap(~vrsta, nrow = st.vrst, scales = "free_x") +
      theme_bw() + theme(strip.text=element_blank(),
                     strip.background=element_blank(),
                     panel.margin = unit(-0.6, "lines"),
                     panel.grid.minor=element_blank()) + 
  scale_y_continuous(limits=c(7.5,11.5),breaks=c(8,9,10)) +
  scale_x_discrete(breaks=NULL) 
```

在`geom_text()`点上方放置标签。

```
p +  geom_text(data=df.names,aes(x, y, label=lab.nam),size=4) 
```

![在此处输入图像描述](../Images/ff286ecfc949d4a6b1e59f392c172a86.png)

# objective-c - Mac OS X 的 CADisplayLink 替代品

> ID：14158743
> 
> 赞同：18
> 
> 时间：2013-01-04T14:11:17.503
> 
> 标签：objective-c, ios, macos, animation

iOS 有 CADisplayLink，Mac OS X 有 CVDisplayLink，但我找不到使用它的方法，所有示例都与 OpenGL 有关。

我创建了这个自定义 UIView，我想把它翻译成 NSView

```
#import "StarView.h"
#import <QuartzCore/QuartzCore.h>

#define MAX_FPS (100.0)
#define MIN_FPS (MAX_FPS/40.0)
#define FRAME_TIME (1.0 / MAX_FPS)
#define MAX_CPF (MAX_FPS / MIN_FPS)
#define aEPS (0.0001f)

@implementation StarView

@synthesize starImage = _starImage;
@synthesize x, y;

- (void)baseInit {
    _starImage = nil;
    CADisplayLink *displayLink = [CADisplayLink displayLinkWithTarget:self     selector:@selector(runLoop)];
[displayLink addToRunLoop:[NSRunLoop mainRunLoop] forMode:NSDefaultRunLoopMode];
}

- (id)initWithFrame:(CGRect)frame
{
self = [super initWithFrame:frame];
if (self) {
    [self baseInit];
}
return self;
}

- (id)initWithCoder:(NSCoder *)aDecoder {
if ((self = [super initWithCoder:aDecoder])) {
    [self baseInit];
}
return self;
}

// Only override drawRect: if you perform custom drawing.
// An empty implementation adversely affects performance during animation.
- (void)drawRect:(CGRect)rect
{
    [self.starImage drawAtPoint:CGPointMake(self.x, self.y)];
}

-(void) cycle {
    self.x += 5;
    if (self.x > 230) {
        self.x = 0;
    }
}

- (void) runLoop {
//NSLog(@"called");
static CFTimeInterval last_time = 0.0f;
static float cycles_left_over = 0.0f;
static float dt2 = 0.0f;

float dropAnimRate = (2.1f/25.0f);

CFTimeInterval current_time = CACurrentMediaTime();
float dt = current_time - last_time + cycles_left_over;
dt2 += dt;

[self setNeedsDisplay];

if (dt > (MAX_CPF * FRAME_TIME)) {
    dt = (MAX_CPF * FRAME_TIME);
}
while (dt > FRAME_TIME) {
    if (dt2 > (dropAnimRate - aEPS)){
        [self cycle];
        dt2 = 0.0f;
    }
    dt -= FRAME_TIME;
}

cycles_left_over = dt;
last_time = current_time;
}

@end 
```

我无法翻译的部分是这个

```
- (void)baseInit {
    _starImage = nil;
    CADisplayLink *displayLink = [CADisplayLink displayLinkWithTarget:self     selector:@selector(runLoop)];
[displayLink addToRunLoop:[NSRunLoop mainRunLoop] forMode:NSDefaultRunLoopMode];
} 
```

我知道我可以使用 NSTimer，但它没有相同的准确性

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-04T22:12:54.030

您可以将 CVDisplayLink 配置为独立于 OpenGL 工作。以下是我用来设置 CVDisplayLink 以触发工业相机的常规捕获和渲染的代码：

```
CGDirectDisplayID   displayID = CGMainDisplayID();
CVReturn            error = kCVReturnSuccess;
error = CVDisplayLinkCreateWithCGDisplay(displayID, &displayLink);
if (error)
{
    NSLog(@"DisplayLink created with error:%d", error);
    displayLink = NULL;
}
CVDisplayLinkSetOutputCallback(displayLink, renderCallback, (__bridge void *)self); 
```

我的`renderCallback`函数看起来像这样：

```
static CVReturn renderCallback(CVDisplayLinkRef displayLink, 
                               const CVTimeStamp *inNow, 
                               const CVTimeStamp *inOutputTime, 
                               CVOptionFlags flagsIn, 
                               CVOptionFlags *flagsOut, 
                               void *displayLinkContext)
{
    return [(__bridge SPVideoView *)displayLinkContext renderTime:inOutputTime];
} 
```

当然，您必须用您自己的类和回调方法替换上面的内容。代码中的`__bridge`ARC 支持，因此在手动引用计数环境中您可能不需要它。

要开始从显示链接捕获事件，您可以使用

```
CVDisplayLinkStart(displayLink); 
```

并停止

```
CVDisplayLinkStop(displayLink); 
```

完成后，请务必在创建 CVDisplayLink 后使用`CVDisplayLinkRelease()`.

如果我可以发表最后一条评论，您看到 CVDisplayLink 通常与 OpenGL 配对的原因是您通常不希望使用 Core Graphics 在屏幕上进行快速刷新。如果您需要以 30-60 FPS 的速率制作动画，您要么想直接使用 OpenGL 进行绘制，要么使用 Core Animation 并让它为您处理动画时间。Core Graphics 绘图不是流畅地动画化事物的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T20:35:40.913

我认为 NSTimer 将是去这里的方式。您的说法“它没有相同的准确性”，很有趣。也许您误认为精度问题是运行循环模式问题。如果您在执行某些操作（例如打开菜单或拖动）时看到计时器没有触发，您可能只需要更改计时器正在运行的运行循环模式。

另一种选择是根据其渲染的实际时间来计算您的动画，而不是根据自上次渲染通道以来的假设差异。执行后者会在视觉上夸大渲染中的任何延迟，否则这些延迟可能会被忽视。

除了 NSTimer，你还可以在 GCD 中做定时器。看看这个例子：[http ://www.fieryrobot.com/blog/2010/07/10/a-watchdog-timer-in-gcd/](http://www.fieryrobot.com/blog/2010/07/10/a-watchdog-timer-in-gcd/)

我们使用 CVDisplayLink 进行包括视频播放的 OpenGL 渲染。我很确定这对于您正在尝试做的事情来说太过分了。

# iphone - 在真实设备上测试应用程序时崩溃

> ID：14158744
> 
> 赞同：1
> 
> 时间：2013-01-04T14:11:19.063
> 
> 标签：iphone, ios, crash

我正在开发一个应用程序。当我在真实设备上运行这个应用程序时，它崩溃了。实际上在应用程序中正在拍照并存储在私人文件夹中，之后我从私人文件夹中检索该图像并显示在缩略图中。为此，我正在使用 F Gallery 项目。通过使用它，我在缩略图中显示图像，如照片库视图。

如果我拍摄更多图像意味着它需要花费大量时间来加载所有图像，然后应用程序崩溃并自动关闭并打开设备。

在控制台中，它显示如下错误。

谁能告诉我为什么它会崩溃？以及如何解决这个问题？

```
Jan  4 18:45:50 Primusblr profiled[3448] <Notice>: (Note ) profiled: Idled.
Jan  4 18:45:50 Primusblr profiled[3448] <Notice>: (Note ) profiled: Service stopping.
Jan  4 18:45:59 Primusblr UserEventAgent[15] <Notice>: jetsam: kernel termination snapshot being created
Jan  4 18:46:00 Primusblr com.apple.launchd[1] (com.apple.lsd[3437]) <Notice>: (com.apple.lsd) Exited: Killed: 9
Jan  4 18:46:00 Primusblr com.apple.launchd[1] (com.apple.assetsd[3479]) <Notice>: (com.apple.assetsd) Exited: Killed: 9
Jan  4 18:46:00 Primusblr com.apple.launchd[1] (com.apple.networkd_privileged[3458]) <Notice>: (com.apple.networkd_privileged) Exited: Killed: 9
Jan  4 18:46:00 Primusblr com.apple.launchd[1] (com.apple.softwareupdateservicesd[3462]) <Notice>: (com.apple.softwareupdateservicesd) Exited: Killed: 9
Jan  4 18:46:00 Primusblr com.apple.launchd[1] (com.apple.coreservices.appleid.authentication[3441]) <Notice>: (com.apple.coreservices.appleid.authentication) Exited: Killed: 9
Jan  4 18:46:00 Primusblr com.apple.launchd[1] (com.apple.accountsd[3392]) <Notice>: (com.apple.accountsd) Exited: Killed: 9
Jan  4 18:46:00 Primusblr com.apple.launchd[1] (com.apple.mobile.installd[3435]) <Notice>: (com.apple.mobile.installd) Exited: Killed: 9
Jan  4 18:46:00 Primusblr com.apple.launchd[1] (com.apple.timed[3433]) <Notice>: (com.apple.timed) Exited: Killed: 9
Jan  4 18:46:00 Primusblr com.apple.launchd[1] (com.apple.itunesstored[3446]) <Notice>: (com.apple.itunesstored) Exited: Killed: 9 
```

# android - 是否允许在通过 intent.view 意图的 URL 时选择我的应用？

> ID：14158747
> 
> 赞同：1
> 
> 时间：2013-01-04T14:11:29.703
> 
> 标签：android

我想做与 Google+ 应用程序类似的事情，例如，当您在电子邮件应用程序中单击 Google+ 链接时，它会提示您选择浏览器或 Google+ 应用程序。

如何在我的应用程序中实现这样的功能？我尝试过搜索，但很挣扎，因为我认为我没有使用正确的关键字：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T14:16:41.827

干得好：

```
<action android:name="android.intent.action.VIEW"></action>
    <category android:name="android.intent.category.DEFAULT"></category>
    <category android:name="android.intent.category.BROWSABLE"></category>
    <data android:host="YOUR_DOMAIN.com" android:scheme="http"></data>
    <data android:host="www.YOUR_DOMAIN.com" android:scheme="http"></data>
</intent-filter> 
```

只需将 替换`YOUR_DOMAIN`为您自己的域，它应该可以按预期工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T14:23:04.330

`<intent-filer>`您可以通过在`<activity>`应用程序中添加适当的来实现您的目标`manifest file`

```
 <activity android:name="">
     <intent-filter>
         <action android:name="android.intent.action.VIEW"></action>
         <category android:name="android.intent.category.DEFAULT"></category>
         <category android:name="android.intent.category.BROWSABLE"></category>
         <data android:host="domain_name" android:scheme="http"></data>
         <data android:host="domain_name" android:scheme="http"></data>
     <intent-filter>
  </activity> 
```

`These <activity> is called whenever another app with these <intent-filter> start implicit action with Intent.ACTION_VIEW also adding category and data inside the intent.data and intent.scheme`

# javascript - 我可以将 System.Web.Optimization 与像 requireJS 这样的 AMD 加载程序一起使用吗？

> ID：14158748
> 
> 赞同：0
> 
> 时间：2013-01-04T14:11:30.513
> 
> 标签：javascript, asp.net, .net, amd

我可以将 System.Web.Optimization 与像 requireJS 这样的 AMD 加载程序一起使用吗？

我想在一次下载中将很多小 JS 文件与 .net 4 中的新 System.Web.Optimization 结合起来。

这个生成的下载如何与 RequireJS 或 dojo 工具包加载器等 amd 加载器一起工作？

有没有人有这方面的经验？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T14:18:27.767

就 .NET 而言，`require`它只是另一个脚本。它对脚本在做什么一无所知。没有理由不能这样做 - 只需确保以正确的顺序添加脚本，以便首先出现依赖项。

在做类似这样的事情时，我发现了一些警告 - 请参阅我关于缓存的问题：[How to force BundleCollection to flush cached script bundles in MVC4](https://stackoverflow.com/questions/12317391/how-to-force-bundlecollection-to-flush-cached-script-bundles-in-mvc4)

# sql - ORACLE/SYBASE SQL 说明

> ID：14158755
> 
> 赞同：0
> 
> 时间：2013-01-04T14:11:56.163
> 
> 标签：sql, oracle, sybase

数据长度在特定字段中是随机的，如下所示：

我只想选择特殊字符之前的字符。

样品：

```
123456_3
454656484784_13
15051514745_7 
```

预期结果如下：

```
123456
454656484784
15051514745 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T14:17:29.113

获得第一部分

```
select substr(your_column, 1, INSTR(your_column, '_') - 1) 
from your_table 
```

得到最后一部分

```
select substr(your_column, INSTR(your_column, '_') + 1) 
from your_table 
```

[SQLFiddle 演示](http://sqlfiddle.com/#!4/d41d8/5736)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T14:16:13.990

一般示例：

`substring(your_data, 0, instr(your_data, '_'))`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T15:02:47.317

快速而肮脏 - 您可以通过 Oracle/Sybase 程序或类似的程序一步一步弄清楚如何做到这一点......

```
-- Ignore 0 or negative numbers --
-- This gives you your end pos for substr --
SELECT distinct(Instr('123456_3 454656484784_13 15051514745_7', '_', LEVEL)-1) substr_end_pos
  FROM dual
  CONNECT BY LEVEL < length('123456_3 454656484784_13 15051514745_7') 
  /

 -- This is start pos for substr --
 SELECT Distinct(Instr('123456_3 454656484784_13 15051514745_7', ' ', LEVEL)+1)  substr_start_pos
   FROM dual
   CONNECT BY LEVEL < length('123456_3 454656484784_13 15051514745_7')
  /

 -- These are substr start/end numbers returned by above queries --
 Select Substr('123456_3 454656484784_13 15051514745_7',  1, 6) From dual -- substr_start_pos=1, substr_end_pos=6
 /

 Select Substr('123456_3 454656484784_13 15051514745_7',  10, 21-9) From dual -- substr_start_pos=10, substr_end_pos=21-substr_start_pos-1
 /

 Select Substr('123456_3 454656484784_13 15051514745_7',  26, 36-25) From dual -- substr_start_pos=26 substr_end_pos=36-substr_start_pos-1
/ 
```

# java - 我应该或可以在 EJB 中使用 Spring

> ID：14158759
> 
> 赞同：2
> 
> 时间：2013-01-04T14:12:17.503
> 
> 标签：java, spring, hibernate, ejb

我在一家刚接触 java 的公司工作，我是唯一的 java 程序员，我需要在几个月内编写大约 10 个系统。该公司还有另外 2 名了解基本 java 的程序员。不是春天或类似的东西。

我使用 Spring、hibernate 和 MySQL 做了一些原型。SA 正在推动我们使用 EJB（我们刚刚获得了 JBoss）。所以现在经理正在考虑让我将 DAO 和 Hibernate 层移到 EJB 中。

所以我们将 Spring 用于 MVC (web)，然后让它为所有数据访问做 EJB 类，这样 Jr 程序员就不必知道如何访问 MySQL 和 AS/400。

所以对于我的问题。我想知道我是否可以在 EJB 中使用 Spring。像 JDBCTemplate 和 Hibernate 这样的东西。我正在尝试的是在 EJB 中移动 DAO 层。

这可以做到吗？如果是这样，应该这样做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T14:17:34.803

您可以在 EJB 中使用 Spring，但它相当复杂，并且不会比单独使用 Spring 带来好处。我不建议这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T15:07:27.437

作为轻量级容器，Spring 通常被认为是 EJB 的替代品。我们确实相信，对于许多（如果不是大多数）应用程序和用例，Spring 作为一个容器，结合其在事务、ORM 和 JDBC 访问领域的丰富支持功能，是比通过 EJB 容器和 EJB 实现等效功能更好的选择.

但是，重要的是要注意使用 Spring 不会阻止您使用 EJB。事实上，Spring 使得访问 EJB 和在其中实现 EJB 和功能变得更加容易。此外，使用 Spring 访问 EJB 提供的服务允许这些服务的实现稍后在本地 EJB、远程 EJB 或 POJO（普通旧 Java 对象）变体之间透明地切换，而无需更改客户端代码。

链接在这里：

[http://static.springsource.org/spring/docs/2.5.4/reference/ejb.html](http://static.springsource.org/spring/docs/2.5.4/reference/ejb.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T14:44:59.343

是的，它可以做到。查看处理 EJBS的[Spring Framework 文档的](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/)[第 22 章。](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/ejb.html)您甚至可以[在 Spring POJOS 中使用注解，](https://access.redhat.com/knowledge/docs/en-US/JBoss_Web_Framework_Kit/1.2/html/Spring_Developer_Guide/ch07s05s02.html)在[EJB 层中](https://access.redhat.com/knowledge/docs/en-US/JBoss_Web_Framework_Kit/1.2/html/Spring_Developer_Guide/ch07s05.html#id4929388)使用注解。[`@EJB`](https://access.redhat.com/knowledge/docs/en-US/JBoss_Web_Framework_Kit/1.2/html/Spring_Developer_Guide/ch07s05s02.html)[`@Autowired`](https://access.redhat.com/knowledge/docs/en-US/JBoss_Web_Framework_Kit/1.2/html/Spring_Developer_Guide/ch07s05.html#id4929388)

程序员往往会告诉您，每次将 Spring 与 EJB 混合使用时，Pink Dolphin 都会死去……嗯，我经常这样做，而且它们还活着。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T14:45:20.267

检查您的要求，考虑您的系统设计——您认为 Spring 和 Java EE 的混合是您的最佳实践吗？这个系统在生产中是否可管理、可扩展、可维护？

您可以使用 Spring+Hibernate 并使用 JNDI 配置的数据源。你甚至可以只使用 tomcat 来做到这一点。

我看不出将 DAO 层放入 EJB 的良好设计理由，因此请考虑您的设计并为其准备论据。恕我直言，这是一个混淆，只会使系统更加复杂和错误。

将您的整个业务和持久层移动到 EJB 可能是合理的，这取决于您的具体情况。试着写一个赞成与反对的清单。有什么好处，有什么坏处。

# magento - How to change Magento default admin language

> ID：14158764
> 
> 赞同：15
> 
> 时间：2013-01-04T14:12:38.437
> 
> 标签：magento

I have Magento 1.7.0.2 German website. How can i change the admin panel to be English by default? (i know that i can select the language from the drop down list, however i want it to be set to English by default)

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-04T14:50:08.173

In top menu

system > config > (general) general > locale options > locale > english (US)
be sure to set that at the "default config" scope, and log out and then in to be taken into account

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-05-20T10:00:07.533

In General, if you want a shop frontend default language that differs from the admin default language, the easiest way is:

Set Configuration -> General -> Locale Options -> Locale

*   For Default Config: admin language (English)
*   For Website Level: frontend language (German)

Then, on store level, you can still have other (partly translated) locales that would have the website level language as a fallback.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-13T12:07:44.717

Follow the following steps and you will get what you want:

1.  In your Magento admin go to System > Manage Stores
2.  Click on Main Website Store under the Store Name (if there are several ones, click any of them)
3.  On the next page under Store Information select a different language in the Default Store View drop-down list.
4.  Click Save Store.
5.  Now every time you are opening the your site, it’s going to be in the language you selected.
6.  You can change the default language for the backend by going to System -> Configuration -> General -> Locale options.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-09T11:41:03.810

The solution proposed in the other answer also affects the front-end, so it might not be ideal for some scenarios: For example if you have multiple stores in the front-end and their default language should be English, you might not want to set the default locale to anything other than English.

I found [Aoe_BackendDefaultLanguage](https://github.com/zohmi/Aoe_BackendDefaultLanguage) extension on GitHub that allows to set a default language per admin account. It seems to be working good so far and the code seems quite clean.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-12T20:03:50.797

I found a small dropdown window in the bottom left corner of the default admin window that allowed me to change this. I managed to fix it... not an easy thing to find.

[Change language in Magento 1](https://i.stack.imgur.com/anvP9.png)

# c# - WinForm 上的 Google OAuth 2.0

> ID：14158770
> 
> 赞同：3
> 
> 时间：2013-01-04T14:13:39.457
> 
> 标签：c#, winforms, google-spreadsheet-api, google-oauth

我需要一些指示，因为我迷路了。我正在开发 WinForms 中的一个非常小的应用程序，它使用 Google API。为了能够获取用户数据，我需要获取他的用户名和密码，直到这一部分一切正常，但是，我没有任何保存用户的能力。

现在，我不想每次都询问用户名和密码，所以我试图找到一种安全的方法来做到这一点。

我问了一个关于我应该把这些信息放在哪里的[问题](https://stackoverflow.com/questions/14129100/where-should-i-store-login-data/14129165#comment19560749_14129100)，得到的答案是保存用户名和密码不是个好主意，我应该改用 Google OAuth 2.0。

但是，我的问题是我需要为 Google OAuth 2.0 使用网络浏览器，现在我不确定如何在我的 WinForm 应用程序中实现它。

**我的问题：**

1.  是否可以从网络浏览器获取数据到我的应用程序？
2.  我应该寻找不同的方式来获取用户数据吗？（任何建议都会很棒）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T02:18:09.430

您需要知道的两条最重要的信息是您应该使用客户端库为您完成工作，并且您应该使用“已安装的应用程序”流/客户端类型。

使用此处的教程，它将引导您使用已安装的应用程序： [https ://code.google.com/p/google-api-dotnet-client/wiki/GettingStarted](https://code.google.com/p/google-api-dotnet-client/wiki/GettingStarted)

您确实必须使用 Web 浏览器从用户那里获取凭据，但是一旦这样做，您应该能够重新使用这些凭据（刷新令牌）而无需重新提示。该库使将这些凭据从浏览器移动到您的应用程序变得简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T14:26:14.367

在非浏览器应用程序中执行 OAuth2 称为“2-legged OAuth2”。

服务器端的三足 OAuth2 用于浏览器身份验证。它由以下步骤组成：

1.  应用程序导航到您的网络应用程序
2.  您的网络应用使用正确的获取参数重定向到 Google 中的 OAuth2 端点
3.  Google 对您的用户进行身份验证，并使用用户令牌将浏览器重定向回您的网络应用
4.  您的网络应用程序使用令牌连接到 Google 服务

客户端的 2-legged OAuth2 包括在`WebBrowser`您的应用程序中托管控件并遵循 3-legged 身份验证的步骤 2-3：

1.  Web 浏览器控件转到 Google 中的 OAuth2 端点，假装您的 Web 应用程序将通过身份验证
2.  Web 浏览器控件允许用户进行身份验证并重定向回您的 Web 应用程序
3.  但是您甚至没有任何网络应用程序 - 在重定向回您的应用程序时，您会捕获`redirect`网络浏览器控件的事件并提取身份验证令牌

有了用户令牌，winforms 应用程序就代表用户连接到 Google 服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T14:28:10.790

**简而言之：**您必须将注意力集中在客户端库中的 OAuth 2.0 中。

因此，该文档有非常好的描述和您需要处理的示例。

> 虽然某些服务根本不需要身份验证，或者只使用您的开发人员密钥，但大多数服务都需要访问某些用户数据。用于访问用户数据的身份验证模型是 OAuth2.0。

源参考 - [google-api-dotnet-client OAuth2.0](https://code.google.com/p/google-api-dotnet-client/wiki/OAuth2)

# android - Android 操作栏主题

> ID：14158772
> 
> 赞同：0
> 
> 时间：2013-01-04T14:13:47.527
> 
> 标签：android, titanium-mobile

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
<style name="Theme.Titanium" parent="android:Theme.NoTitleBar.Fullscreen">
    <item name="android:windowBackground">@drawable/background</item>
</style>
</resources> 
```

如何使用 theme.xml 自定义我的 ActionBar 组件。我试图生成这些文件并确实放置在我的 中`platform/android/res folder`，但没有运气

[http://jgilfelt.github.com/android-actionbarstylegenerator/#name=ActionBar&compat=holo&theme=light&actionbarstyle=solid&backColor=ffffff%2C100&secondaryColor=1f6e0d%2C100&tertiaryColor=F2F2F2%2C100&accentColor=fafffb%2C100](http://jgilfelt.github.com/android-actionbarstylegenerator/#name=ActionBar&compat=holo&theme=light&actionbarstyle=solid&backColor=ffffff%2C100&secondaryColor=1f6e0d%2C100&tertiaryColor=F2F2F2%2C100&accentColor=fafffb%2C100)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T14:17:48.563

放置后，您应该在清单中添加主题`<yourproject>/res/*`：

```
<!-- ... -->

<application
    android:name="app.package"
    android:icon="@drawable/icon"
    android:label="@string/app_name"
    android:theme="@style/Theme.Titanium">

<!-- ... --> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T14:26:39.153

您正在使用 : `android:Theme.NoTitleBar.Fullscreen`，尝试`android:style/Theme.Holo`改用并按照 throrin19 的建议在清单文件中设置您的主题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T14:43:07.827

这样做：

```
 <style name="CustomStyle" parent="@android:style/Theme.Holo.Light">
        <item name="android:actionBarStyle">@style/CustomActionBar</item>
  </style>

  <style name="CustomActionBar" parent="@android:style/Widget.Holo.Light.ActionBar">
        <item name="android:background">@drawable/ANY_DRAWABLE</item>
        <item name="android:displayOptions">useLogo|showHome</item>
        ...
        <item name="PARAM">VALUE</item>
  </style> 
```

在 CustomActionBar 样式中，您可以设置 ActionBar 参数。在您的活动中使用 CustomStyle。

**更新：** 您可以在 Manifest 中为所有应用程序使用 CustomStyle。去做就对了 ：

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/CustomStyle"> 
```

或用于每个 Activity ：

```
 <activity
     android:name="MainActivity"
     android:label="@string/app_name" 
     android:screenOrientation="portrait"
     android:theme="@style/CustomStyle"> 
```

祝你好运！

# user-interface - 生产中使用的错误处理策略

> ID：14158774
> 
> 赞同：4
> 
> 时间：2013-01-04T14:14:02.667
> 
> 标签：user-interface, design-patterns, web-applications, error-handling

假设我们有一个很好但稍微复杂的产品。该产品变得疯狂。客户是中型和相对较大的公司。客户官僚主义程度相当高：

*   许多不同的角色和职责
*   受保护的环境
*   数十条规则和政策
*   高度专业化的工程师（DB-guy 属于一个部门，tomcat-guy 属于另一个部门，等等）

使用这种方法，即使是微不足道的操作（重启和应用程序、获取日志等）也可能需要数小时甚至数天。可以限制或完全禁止访问日志。正如我之前所说，产品很复杂，因此在部署和初始配置阶段可能会出现一些问题。这意味着客户将需要支持团队的一些帮助和帮助。

![在此处输入图像描述](../Images/45b6f146bb00314637f5c819d44306d3.png)

**问题是最终用户通常属于研发部门，无法访问应用程序、应用程序日志、数据库等。换句话说，最终用户根本无法提供任何有价值的信息。屏幕截图是唯一可用的反馈。**

**有人知道这个问题有什么好的解决方案吗？**

我们的想法是让客户满意，卸载支持团队并及时响应任何请求。另请注意，有一些关于敏感信息等的规则。

我看到应用程序处理错误的几种可能方法：

*   使用“更多详细信息”选项显示高级问题信息，提供经过处理的异常或错误代码
*   做同样的事情，但也会收集一些额外的信息、日志、加密它并允许用户下载文件
*   提供隐藏的“服务”屏幕，可以访问日志和其他系统信息
*   引入调试模式之类的东西，用于早期阶段
*   最后，可以请求永久访问日志（我个人认为这是不安全的解决方案）。

从可用性和安全性的角度来看，所有这些选项都不是很好。

在这种情况下你会怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T08:16:50.667

通过阅读您正在考虑的一些事情，特别是：

*   使用“更多详细信息”选项呈现高级问题信息，
*   提供经过清理的异常或错误代码也是如此，但也
*   收集一些附加信息、日志、对其进行加密并允许用户下载文件 提供隐藏的“服务”屏幕以访问日志和附加系统信息

将它结合起来并使其“更安全”怎么样？

修改代码，以便错误/异常也会创建一种“故障单”（尽可能多地保存额外信息），但不会向用户显示。用户将获得一个“票号”（他们必须手动将其复制到发送给支持人员的邮件中，或者 - 如果可能，错误消息可以自动创建一个网页或面板，以允许用户从他们的观点、截图等等）。

通过这种方式，支持人员将可以访问上下文化和更丰富的详细信息（他们可以分析这些信息或将其转移到维护组，而无需将这些信息暴露给用户）。我对内部结构和全局架构了解不够，所以我无法判断这将是多么复杂。理想情况下，每个操作都应该自动获得分配的“故障票”，以便日志具有正确的参考，但只有在异常情况下才会“公开”票号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T12:17:13.750

一旦我*在使用灵活的在线“服务目录”时解决了*类似的问题。解决方案很简单，但*异构系统的技术实现很复杂*。

我必须指出，这种错误检测和跟踪是您主要业务领域的独立横切关注点。因此，如果可以在不更改现有源代码的情况下应用它会好得多。

1.  为系统中的每个请求/事务/操作引入逻辑*引用*或*相关*ID。
    *   GUID 将是完美的
    *   最终用户将参考此 ID
    *   在屏幕截图上捕获此 ID 应该很容易
    *   确保每个屏幕在页面标题处显示此 ID
2.  使用 AOP 框架（根据您的 SO 配置文件 AspectJ 或 Spring AOP 将是一个很好的起点）来定义跟踪/日志记录方面。Aspect 将记录来自 Web 应用程序/业务逻辑/数据访问层的每个调用的信息，并带有相关的参考 id
    *   拦截调用使用方面，而重用的日志系统将持久化信息
    *   只要您使用 AOP 框架，您就可以配置跟踪/日志记录发生的位置，在一个地方收集哪些详细信息
    *   因为所有跟踪/日志记录现在都封装在一个地方，所以很容易使用配置来控制它
    *   方面可用于通过电子邮件等方式立即升级某些问题
3.  最后，您将面临最复杂的部分。如何让开发人员和运维人员不忽略信息？此类组织问题超出了 stackoverflow 的范围。在最坏的情况下，如果需要很多天才能对错误做出反应，您可以从日志系统中获取生产环境和大量详细信息

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T17:10:14.280

只是为了总结并提供更多细节。

毫无疑问，如果出现错误，应通知用户。通知应提供有关问题的高级信息。最好不仅描述问题，而且提供一些解决方案或解决方法（如果可用）。

错误对话框还应提供一种获取有关问题的更多信息的方法。

![在此处输入图像描述](../Images/c89cd0b3b89435af0f2863cd91291928.png)

最简单的方法是提供经过清理的堆栈跟踪、相关日志消息等。用户的常见场景是获取可用详细信息并通知支持人员或开发人员。显然，由于大小、敏感信息等原因，这样的解决方案不能用于提供所有必需的数据。

![在此处输入图像描述](../Images/e0948244e7b7a8f9098f66376bd927b1.png)

作为一种选择，系统可以将该信息直接发送到支持/错误收集工具。安全通道可用于保护数据。如果需要，收集工具可能驻留在客户网络中，因此敏感信息永远不会外泄。

如果这样的选项不可用，系统可以让用户下载包含所有必需信息的存档。存档可以加密以确保普通用户（面临问题）将无法检查潜在的敏感数据。

![在此处输入图像描述](../Images/8e9101c729f6b6ef2a6cb4b74939c5ef.png)

当然，最好不要使用硬编码密码，这样可以使用更高级的方法。场景如下：

1.  系统显示错误信息
2.  系统生成错误 id 并使用它来生成一些唯一值（哈希）
3.  用户联系支持并讲述独特的价值
4.  支持使用该值生成代码
5.  用户从支持部门收到代码
6.  用户下载包含所有详细信息的存档（加密）
7.  用户将下载的信息传递给支持

![在此处输入图像描述](../Images/bdf8e047eb04797a8a51b22fa9aaf3ce.png)

看起来像一个偏执的解决方案，但允许控制对潜在敏感信息的访问。

**最终结论**

日志记录策略应该是完善的。不应记录敏感信息。

**有用的链接**

*   [有效的日志记录实践简化了企业开发](http://www.ibm.com/developerworks/java/library/j-logging/)
*   [缓解有针对性的网络入侵的策略第 1 部分](http://www.dsd.gov.au/infosec/top-mitigations/top35mitigation-details.htm)
*   [缓解有针对性的网络入侵的策略第 2 部分](http://www.dsd.gov.au/infosec/top-mitigations/top35mitigationstrategies-list.htm)

# asp.net - 使用 Aspnet 角色进行身份验证：应允许访问时拒绝访问

> ID：14158781
> 
> 赞同：0
> 
> 时间：2013-01-04T14:14:23.830
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, razor, forms-authentication

我目前正在开发一个用于管理某些数据的 Aspnet MVC3 Razor 应用程序。对应用程序的访问由使用表单的身份验证控制。

我使用 ELMAH 进行错误捕获，以便再次处理它们。Elmah 提供了一个 elmah.axd 模块，该模块位于项目的根文件夹中，以便查看错误。

这些数据必须是私有的，这就是我在 web.config 文件中编写此规则的原因：

```
 <location path="elmah.axd">
<system.web>
  <httpHandlers>
    <add verb="POST,GET,HEAD" path="elmah.axd" type="Elmah.ErrorLogPageFactory, Elmah" />
  </httpHandlers>
  <authorization>
    <allow roles="Dev"/>
    <deny users="*" />
  </authorization>
</system.web> 
```

此代码允许处于“开发”角色的用户（在我的 aspnet_usersinroles 表中）并拒绝所有其他用户。

但是，如果我使用一个具有此角色的用户登录，则拒绝访问该页面。

如果我允许同一用户使用用户授权（见下文），我可以毫无问题地访问该页面。

```
<allow users="yohann.pansard@gmail.com"/> 
```

我多次检查了我的 Aspnet_usersinroles 表，一切都很好。

我的 roleManager 看起来不错，因为我在应用程序中使用了这些相同的角色（例如 Role.IsUserInRoles("foo", "reader")）。这是我的角色管理器的配置：

```
<roleManager enabled="true" cacheRolesInCookie="false" defaultProvider="AspNetSqlRoleProvider">
  <providers>
    <clear />
    <add name="AspNetSqlRoleProvider" type="System.Web.Security.SqlRoleProvider" connectionStringName="ApplicationServices" applicationName="app_demo" />
  </providers>
</roleManager> 
```

我认为角色不属于用户，但我不确定。可能吗？

我可能忘记了一些东西，但我看不出这个元素可能是什么。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T22:02:54.637

请查看这些链接以了解如何保护 Elmah + 您的配置应如下所示

```
 <elmah>
    <security allowRemoteAccess="true" />
  </elmah>
  <location path="elmah.axd" inheritInChildApplications="false">
    <system.web>
      <httpHandlers>
        <add verb="POST,GET,HEAD" path="elmah.axd" type="Elmah.ErrorLogPageFactory, Elmah" />
      </httpHandlers>
      <authorization>
        <allow roles="Dev" />
        <deny users="*" />
      </authorization>
      <!-- 
        See http://code.google.com/p/elmah/wiki/SecuringErrorLogPages for 
        more information on using ASP.NET authorization securing ELMAH.
      <authorization>
        <allow roles="Dev" />
        <deny users="*" />  
      </authorization>
      -->
    </system.web> 
```

在 appsetting 标签下。您还应该更新正确的值

```
<appSettings>
    <add key="elmah.mvc.disableHandler" value="false" />
    <add key="elmah.mvc.requiresAuthentication" value="true" />
    <add key="elmah.mvc.allowedRoles" value="Dev" />
  </appSettings> 
```

# algorithm - 用于查找在大数据集中经常一起出现的元素的启发式方法

> ID：14158785
> 
> 赞同：7
> 
> 时间：2013-01-04T14:14:45.433
> 
> 标签：algorithm, statistics, heuristics

问题：

我有数百万笔交易的清单。每个事务都包含项目（例如“胡萝卜”、“苹果”），目标是生成在单个事务中经常一起出现的一对项目的列表。据我所知，进行详尽的搜索是不可行的。

解决方案尝试：

到目前为止，我有两个想法。1）随机抽取一些适当的交易部分，只检查那些或 2）计算每个元素出现的频率，使用该数据计算元素应该偶然出现的频率，并使用它来修改从 1 开始的估计。

非常感谢任何提示、替代方法、现成的解决方案或一般的阅读建议。

编辑：

评论中的一些附加信息

不同项目的数量：1,000 到 100,000

内存限制：最多几个小时的几场公羊。

使用频率：或多或少一次。

可用资源：20-100 小时的新手程序员时间。

所需的结果列表格式：一对项目和一些衡量它们出现的频率，对于 n 个最频繁的对。

每笔交易的物品分配：目前未知。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T16:13:25.610

设事务`n`数为，项目数为，事务`k`的平均大小为`d`。

天真的方法（检查所有记录中的对）将为您提供`O(k^2 * n * d)`解决方案，但确实不是非常理想。但是我们可以将其改进为`O(k*n*d)`，并且如果我们假设项目的均匀分布（即每个项目平均重复`O(n*d/k)`次数） - 我们可能能够将其改进为`O(d^2 * n + k^2)`（这要好得多，因为很可能是`d << k`）。

这可以通过构建交易的**[倒排索引](http://en.wikipedia.org/wiki/Inverted_index)**来完成，这意味着 - 创建从项目到包含它们的交易的映射（创建索引是`O(nd + k)`）。

例如，如果您有交易

```
transaction1 = ('apple','grape')
transaction2 = ('apple','banana','mango')
transaction3 = ('grape','mango') 
```

倒排索引将是：

```
'apple' -> [1,2]
'grape' -> [1,3]
'banana' -> [2]
'mango' -> [2,3] 
```

因此，在了解什么是倒排索引之后 -**以下是解决方案的指南：**

1.  为您的数据构建倒排索引
2.  对于每个项目 x，迭代它出现的所有文档，并为所有与共同出现的对构建[直方图](http://en.wikipedia.org/wiki/Histogram)。`(x,y)``y``x`
3.  完成后，您将获得一个包含 k^2 个项目的直方图，您需要对其进行处理。[这个问题](https://stackoverflow.com/questions/10751953/store-the-largest-5000-numbers-from-a-stream-of-numbers)讨论了如何从未排序的列表中获取前 k 个元素。

**复杂性分析：**

1.  建立倒排索引是`O(nd+k)`
2.  假设每个元素在`O(nd/k)`事务中重复，每次迭代都需要`O(nd/k * d)`时间，而且你`k`在这一步有迭代，所以你得到`O(nd^2 + k)`了这一步。
3.  如果您想要完全排序，或者如果您只想打印前 X 个元素，可以在 O(k^2logk) 中完成处理列表，它可以在`O(k^2)`.

总计`O(nd^2 + k^2)`解决方案以获得 top-X 元素，这比天真的方法要好得多，假设`d << k`.

此外，请注意，如果需要，可以在线程之间有效地并行化和分布瓶颈（步骤 2）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T16:36:05.277

如果一次购买中订购的商品数量很少（<10），请执行以下操作：
拥有地图地图（字典词典）：第一个地图中的键是项目，
第一个地图中的值是地图，其键是第二个项目，值用第一个键计算它在购买中出现的次数。

因此，请检查每个订单和每对更新地图。最后通过地图地图并在“第二值”中寻找“大值”

注意：根据输入数据的大小和“分布”，您可能最终没有足够的内存

# python - Python全局变量干扰？

> ID：14158786
> 
> 赞同：0
> 
> 时间：2013-01-04T14:14:51.223
> 
> 标签：python, variables, global

所以基本上这是我正在制作的一个小字符串游戏的一部分，这真的让我兴奋不已。玩家可以按“a”或“d”在房间内向左或向右看以收集线索。如果玩家已经看过那个地方。它会弹出一条消息说“你已经来过这里”

虽然，它会去正确的点一次，然后下一个点只会弹出一条消息说“你已经在这里”。例子。如果我按“a”然后按“d”为“d”它会说我已经去过那里但我没有。任何帮助/建议？

```
left = 0
right = 0
#Room 1 movements
def roomOneLeft():
    global left
    left = 1
    print '-- You search the rubble and find some cloth'
    return roomOneMoves()

def roomOneRight():
    global right
    right = 1
    print '-- You find a pick under a wooden chair'
    return roomOneMoves()

#room 1 user choose
def roomOneMoves():
    global left
    global right
    move = raw_input("")
    if left == 1:
        print 'you have already been here'
        return roomOneMoves()
    if right == 1:
        print 'you have already been here'
        return roomOneMoves() 
    if move == 'a':
        roomOneLeft()     
    if move == 'd':
        roomOneRight()

roomOneMoves() 
```

编辑：谢谢大家的帮助。如果我的代码看起来很令人沮丧，我很抱歉！现在开始工作了。但只有在你的帮助下。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T14:20:39.583

尽管有很多事情可以说是关于您的代码的“不确定”，但您的问题来自这样一个事实，即无论玩家采取何种行动，都会检查`left`两者。`right`如果你按'a'`left`变成1。按'd'之后它将检查是否为`left`1并打印消息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T14:23:03.033

浏览代码：

1.  我们称之为`roomOneMoves()`
2.  用户按下`a`，移动变为`'a'`
3.  `left`is not `1`，所以我们不进入 if 的那个分支。
4.  `right`不是`1`，所以我们不进入 if 的那个分支。
5.  `move` *我们是* `'a'`这样称呼的`roomOneLeft()`
6.  `left`变成`1`，我们打印一条消息，然后`roomOneMoves()`再次调用。
7.  用户按下`d`，`move`变为`'d'`
8.  `left`现在是 1，所以我们打印一条消息并`roomOneMoves()`再次调用。

换句话说，在您决定用户真正想去*哪个房间之前，您正在检查您是否去过一个房间并退出。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T14:21:42.253

你不会检查你的举动，直到为时已晚。观察：

```
move = raw_input("")
if left == 1:
    print 'you have already been here'
    return roomOneMoves()
if right == 1:
    print 'you have already been here'
    return roomOneMoves() 
if move == 'a':
    roomOneLeft()     
if move == 'd':
    roomOneRight() 
```

*如果用户实际上离开了*，您只想评估该`left == 1`部分，不是吗？因此，请嵌套 if 语句，如下所示：

 *```
move = raw_input("")
if move == 'a':
    if left:
        print 'you have already been here'
        return roomOneMoves()
    roomOneLeft()
if move == 'd':
    if right:
        print 'you have already been here'
        return roomOneMoves() 
    roomOneRight() 
```

此外，您应该重新考虑您的数据结构，并使用带有布尔值或类似值的字典而不是全局变量。此外，由于大多数 Python 解释器无法有效地评估[尾递归](http://en.wikipedia.org/wiki/Tail_recursion)，因此您可能希望使用迭代主循环而不是递归调用下一个函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T14:21:41.113

问题在于您的`roomOneMoves`功能：

```
move = raw_input("") 
```

首先你从用户那里得到方向；你还没有评估它。

```
if left == 1:
    print 'you have already been here'
    return roomOneMoves()
if right == 1:
    print 'you have already been here'
    return roomOneMoves() 
```

您检查用户是否曾经向左或向右并显示消息，更糟糕的是，您重新开始`roomOneMoves`。

```
if move == 'a':
    roomOneLeft()     
if move == 'd':
    roomOneRight() 
```

只有在那之后，你才能真正评估新的方向。

您应该首先评估新方向，并且仅在评估之前检查该方向是否输入过一次：

```
move = raw_input("")
if move == 'a':
    if left == 1:
        print 'you have already been here'
    else:
        roomOneLeft()
elif move == 'd':
    if right == 1:
        print 'you have already been here'
    else:
        roomOneRight()
roomOneMoves() 
```

此外，您可能希望在最后无条件地重新启动该方法。*

# python - Django：CSV 模型导入

> ID：14158788
> 
> 赞同：4
> 
> 时间：2013-01-04T14:15:07.477
> 
> 标签：python, django

我需要一种将 cvs 数据导入数据库的方法。csv 在字段方面与我的模型之一匹配。在 Django 中有没有推荐的方法/包来做这样的事情？

我查看了此处的 django-csvimport (http://pypi.python.org/pypi/django-csvimport/0.9)，但是对于像我这样的初学者来说，没有使用它的教程。其他有良好文档的人吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T14:17:16.097

如果它很简单，只需按照以下示例读取 CSV 行：

[http://docs.python.org/2/library/csv.html](http://docs.python.org/2/library/csv.html)

并在每个循环上构建您的模型并保存它。这是做你想做的事情的最快和最简单的方法。大约 10 行，不使用任何花哨的库。没必要多想。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T15:33:32.050

您可以查看 django-adaptors 并使用 CsvDBModel。

[文档在这里](http://django-adaptors.readthedocs.org/en/latest/)给出了一些提示

# java - 如何生成 6 个唯一的 Java 编号

> ID：14158789
> 
> 赞同：1
> 
> 时间：2013-01-04T14:15:20.063
> 
> 标签：java

> **可能的重复：**
> [在 Java 中生成唯一的随机数](https://stackoverflow.com/questions/8115722/generating-unique-random-numbers-in-java)

代码将从一个范围内生成 6 个随机数，但需要它们是唯一的，这让我的大脑融化了任何指针将不胜感激

```
import java.util.Random;
import java.util.Arrays;
public class numbers
{
private int[] lottoNumbers;
private int nextInt;
private Random r;

public numbers()
{
    lottoNumbers = new int [6];
    r = new Random();
    nextInt();
}
public void nextInt()
{
    System.out.print("***     ");
    for (int i = 0; i < lottoNumbers.length; i++)
    {
        lottoNumbers[i] = r.nextInt(49) +1;
        System.out.print(" " + lottoNumbers[i]);
    }
    System.out.println("     ***");
}
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T14:16:59.423

对于六个数字中的每一个，您都需要将其与已经生成的数字进行比较。如果与其中任何一个相同，则需要继续尝试。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-04T14:23:00.650

您可以简单地使用[shuffle](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#shuffle%28java.util.List%29)方法并在 shuffle 后返回 6 个第一个元素：

```
// Create the list of possible numbers
List<Integer> numbers = new ArrayList<Integer>(50);
for(int i = 1 ; i <= 50 ; ++i) {
    numbers.add(i); 
}
// Shuffle the list
Collections.shuffle(numbers);

// Print the numbers
int count = 0;
for(int number : numbers) {
    System.out.println("Random number " + count + ": " + number);
    ++count; // break if count == 6?
} 
```

这种方法的优点是它以线性时间运行（洗牌所花费的时间）。您可以避免选择`x`时间（`x`可能非常大）一个元素并检查它是否已经被选择！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T14:18:02.617

您需要添加一个循环来检查您已添加的项目中是否存在数字。定义一个`boolean`变量，将其设置为`false`，然后通过循环将现有数字与新生成的数字进行比较。如果您看到重复，请将 设置`boolean`为`true`。循环结束后，检查您`boolean`是否必须添加新号码。

```
int i = 0;
do {
    int next = r.nextInt(49) + 1;
    boolean seen = false;
    for (int j = 0 ; j != i ; j++) {
        if (lottoNumbers[j] == next) {
            seen = true;
            break;
        }
    }
    if (!seen) {
        lottoNumbers[i++] = next;
        System.out.print(" " + next);
    }
} while (i != lottoNumbers.length); 
```

更好的解决方案是使用`Set<Integer>`，但这可能是现阶段的高级主题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T14:21:09.023

只需使用一个`Set`（感谢@dty 的改进版本！）：

```
private static final Random RND = new Random();
private static final int COUNT = 6;

public int[] getRandomNumbers()
{
    final Set<Integer> set = new HashSet<Integer>(COUNT);

    /*
     * This works: .add() will not add the same element twice. As such, we just
     * need to check that the set has the expected size.
     */
    while (set.size() < COUNT)
        set.add(RND.nextInt());

    return set.toArray(new int[COUNT]);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-04T14:23:31.133

```
public void nextInt()
{
    System.out.print("***     ");
    for (int i = 0; i < lottoNumbers.length; i++)
    {
        int temp;

        // check random int doesn't already exist (embedded assignment below)           
        // NOTE: while loop has empty body, note {} in line below
        while (Arrays.asList(lottoNumbers).contains(temp = r.nextInt(49)+1)){}

        lottoNumbers[i] = temp;
        System.out.print(" " + lottoNumbers[i]);
    }
    System.out.println("     ***");
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-04T14:40:22.420

我喜欢 set 方法，但是这个例子可以稍微简化一下

```
private static final Random RND = new Random();

public static Set<Integer> getRandomNumbers(int count) {
    final Set<Integer> set = new HashSet<>(count);
    while (set.size() < count) {
      set.add(RND.nextInt());
    }
    return set;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-04T15:38:23.550

这条路怎么样？

```
package rabdomnumbers;

    import java.util.ArrayList;
    import java.util.List;

    public class RabdomNumbers {
    public static int SIZE = 6;

      public static void main(String[] args) {
        Number[] numbers = new Number[SIZE];
        // set an array
    for (int x = 0; x < SIZE; x++) {
      numbers[x] = new Number();
    }
    // sort an array
    for (int x = 0; x < SIZE-1; x++) {
      for (int y = x + 1; y < SIZE; y++) {
        if (numbers[x].getNumber() > numbers[y].getNumber()) {
          Number buf = numbers[x];
          numbers[x] = numbers[y];
          numbers[y] = buf;
        }
      }
    }
    // print an array
    for (int x = 0; x < SIZE; x++) {
      System.out.println("" + numbers[x].getIndex());
    }
  }
} 
```

其中 Number 是一个简单的类：

```
package rabdomnumbers;

import java.util.Random;

public class Number {
  private int index = 0;
  private int number = 0;
  private static int count = 0;
  private final static Random RND = new Random();

  public int getIndex() {
    return index;
  } 

  public int getNumber() {
    return number;
  }

  public Number() {
    index = count++;
    number = RND.nextInt();
  }
} 
```

# html - 如何使搜索结果显示在 1 个标题下的不同行和结构中

> ID：14158794
> 
> 赞同：0
> 
> 时间：2013-01-04T14:15:41.820
> 
> 标签：html, css, jsp

所以我有这个 JSP 搜索功能，如下所示：

```
<%
String value=request.getParameter("search");
Class.forName("com.mysql.jdbc.Driver").newInstance();
Connection conn = DriverManager.getConnection("jdbc:mysql://instance****.db.xeround.com:*****/mydb", "*****", "*******");
Statement st=conn.createStatement();
ResultSet rs = st.executeQuery("SELECT menu.name, menu.info, menu.price, restaurants.name from menu,"
        + " restaurants where restaurants_restaurantID=RestaurantID AND (menu.name like '%"
        + value
        + "%' "
        + "or menu.info like '%"
        + value
        + "%' or menu.category like '%"
        + value
        + "%' "
        + "or menu.kitchen like '%"
        + value
        + "%' or quick_choose like '%" + value + "%')");

while (rs.next()){ 
    %>
<tr><td>Name:</td><td><input type="text" value="<%=rs.getString("name")%>" > </td></tr>
<tr><td>Info:</td><td><input type="text" value="<%=rs.getString("info")%>" > </td></tr>
<tr><td>Price:</td><td><input type="text" value="<%=rs.getInt("price")%>" > </td></tr>
      <%
}
%> 
```

这正在工作并从数据库中提取我需要的信息，但我现在想做的是以某种方式使结果正确排列，因为每个结果行将只显示一种食物的名称/菜肴描述/价格。我也希望它与一个看起来像这样的顶部标题一起工作：[这里](http://translate.google.se/translate?sl=sv&tl=en&js=n&prev=_t&hl=sv&ie=UTF-8&eotf=1&u=http://www.lindholmen.se/sv/dagens-lunch)

结果显示在标题“餐厅”、“菜式”、“类型”、“价格”下。以便它们在这些标题下正确显示。

然后将每一行用一条线分开。比如在facebook中，当你去搜索一些东西时，结果会被显示出来并被一条细线分割。

与上面的链接相同，并在此处显示： ![线](../Images/a637bcf6a64c469ed6e73bcc46f596fd.png)

不想看太多的人总结：我基本上希望我的搜索结果像这个网站：[Here](http://translate.google.se/translate?sl=sv&tl=en&js=n&prev=_t&hl=sv&ie=UTF-8&eotf=1&u=http://www.lindholmen.se/sv/dagens-lunch)，在一个标题下，分为不同的列，并有一个分隔每个搜索结果的行。

你们中的任何人都知道 HTML 中任何可能的解决方案吗？或者可以给我任何关于如何进行的建议？我已经尝试了一些替代方案，但我就是想不通。真的会给予任何帮助或指导。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T14:40:20.860

你需要**html**：

```
<table>
  <tr class="head">
    <td>Name:</td>
    <td>Info:</td>
    <td>Price:</td>
  </tr>    
<%
 while (rs.next()){ 
%>
  <tr class="content">
    <td class="name"><%=rs.getString("name")%></td>
    <td class="info"><%=rs.getString("info")%></td>
    <td class="price"><%=rs.getInt("price")%></td>
  </tr>
<%
 }
%>
</table> 
```

和近似的**CSS**：

```
table {
    border-collapse: collapse;
}
.head td {
    text-align: center;
}
.content td {
    padding: 5px 10px;
    vertical-align: top;
    text-align: left;
    border-bottom: 1px solid #C0C0C0;
    border-bottom-style: dotted;
}
.info {
    background-color: #F1F4F6;
} 
```

但首先，scriptlets 是非常糟糕的做法。其次，在 JSP 中获取数据库连接是头疼的。您的 JSP 页面应该只负责查看。将您的代码替换为单独的 Java 类。否则，当您的代码膨胀时，您的项目将变得不可读且难以维护。

使用[JSTL](http://docs.oracle.com/javaee/1.4/tutorial/doc/JSTL3.html)，您可以轻松获得相同的视图：

```
<c:forEach var="item" items="${requestScope.items}">
   <div id="item_title" class="item_title">
      <a href="${pageContext.request.contextPath}${item.url}">
        <c:out value="${item.title}" />
      </a>
   </div>
   <div id="item_content" class="item_content">
      <c:out value"${item.content}" />
   </div>
<c:forEach> 
```

或者

```
 <div id="item_title" class="item_title">
      <form name="openItem" action="handlerurl" method="post">
        <input type="hidden" name="itemId" value="${item.id}" />
        <c:out value="${item.title}" />
        <input type="submit" value="read more" />
      </form>
   </div> 
```

# xaml - 我如何告诉 VS2012 XamlEditor 在设计时停止解析

> ID：14158796
> 
> 赞同：1
> 
> 时间：2013-01-04T14:15:44.320
> 
> 标签：xaml, configuration, visual-studio-2012

是否可以在设计时告诉 VS2012 XamlEditor 停止解析和创建。

我使用 XAML (System.Xaml) 来创建没有 UI 的配置和其他东西，所以在**设计时**的解析对我来说毫无用处。

我只想要用于 IntelliSense 和自动完成的 XamlEditor。

有可能这样做吗？我不需要设计视图。

# c# - 表单继承后的ConnectionString错误？

> ID：14158798
> 
> 赞同：0
> 
> 时间：2013-01-04T14:15:51.590
> 
> 标签：c#, inheritance, connection-string, app-config

我正在构建一个 C# 应用程序，但出现了问题，但我不知道如何修复它。

我有几个表格，现在我想添加一个被另一个表格继承的表格。当我想查看新表单的 [设计] 屏幕时，它给了我以下错误：

> 你调用的对象是空的。

现在我发现问题出在`app.config`文件中的连接字符串：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <connectionStrings>
    <add name="ConnString" connectionString="Data Source=.\SQLEXPRESS;Initial Catalog=PVB;Integrated Security=True" providerName="System.Data.SqlClient" />
  </connectionStrings>
</configuration> 
```

这是我在 C# 中的 connectionString 代码：

```
string connectionString = ConfigurationManager.ConnectionStrings["ConnString"].ConnectionString; 
```

如果我使用上述字符串，我会收到`Object Reference blabla`错误消息。令人惊讶的是，当我使用以下代码时，表单工作得非常好：

```
string connectionString = "Data Source=.\\SQLEXPRESS;Initial Catalog=PVB;Integrated Security=True"; 
```

有谁知道我该如何解决这个问题？是的，我已经添加了`System.Configuration`对解决方案的引用，所以这不是问题，我猜..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T14:20:53.690

请查看以下 URL，这可能会解决您的问题。看来这里的问题是simulair：

[从继承的表单访问 app.config](https://stackoverflow.com/questions/12602326/accessing-connection-string-from-base-form-causes-designer-error)

# c++ - 二维传热的有限元库

> ID：14158799
> 
> 赞同：6
> 
> 时间：2013-01-04T14:15:51.953
> 
> 标签：c++, math, physics, transfer

嗨，我目前是 COMSOL，用于计算 2D 中随时间的传热，我正在寻找一个库来用 C++ 进行计算。libMesh 和 Gmsh 的组合是不是最好的选择？

如果您还可以在建议的库上提供此类操作的示例，那将非常有帮助？我使用傅里叶方程。

先感谢您

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T15:11:55.443

我认为有很多这样的图书馆！

我最喜欢的选择是 Dealii (http://www.dealii.org/)，它有很好的文档记录，有很多示例并且非常灵活。如果 2D 传热只是您需要的，我认为这是正确的库。

否则，您可以按照您的建议查看 Dune (http://www.dune-project.org/dune.html)、LibMesh (http://libmesh.sourceforge.net)、[GetFem++](http://download.gna.org/getfem/html/homepage/)等等. 还有一些库允许您编写问题的弱形式，例如 Feel++(http://www.feelpp.org/) 或 LifeV ( [http://www.lifev.org](http://www.lifev.org) )。（我想还有其他人，但这些是我知道的）。

根据库的不同，您需要一个用于网格的外部工具，而 Gmsh 就在其中（很好）。

# android - iOS 或 Android 应用程序首先用于启动

> ID：14158801
> 
> 赞同：0
> 
> 时间：2013-01-04T14:15:58.943
> 
> 标签：android, ios, mobile

首先，我想声明我绝不打算与 android 粉丝或 iOS 粉丝打架，我问以下问题的原因是因为我对这两种设备都没有偏见，并且想做一个对我的创业公司来说是个好决定，我也明白这是一个很多人回答的大辩论，但鉴于他们提供的信息，我读过的许多答案似乎已经过时了。

问题：我有一家初创公司，我已经在 Rails 中完成了 Web 应用程序，我现在正在寻找创建一个移动应用程序，（我不想使用 phonegap 等......只有本机代码）。我研究了这两个平台，我发现 android 的采用率高于 iOS，但当然 iOS 控制使用份额。我的问题是，根据我们所了解的编程知识（ruby、python）和市场份额，首先开发什么平台会更好？你觉得哪一个更容易。我想我还应该指出，如果我为 android 开发，我只会严格支持（4.+）。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T14:32:19.823

Android 在智能手机的整体市场份额更大，但只有约 40% 的 Android 设备运行 4.0+（来源： http: [//www.inquisitr.com/467457/google-android-4-0-now-controls-40 -市场份额/](http://www.inquisitr.com/467457/google-android-4-0-now-controls-40-marketshare/)）。这是您做出决定的重要因素。如果您以最新版本的 iOS 为目标，您可能会获得更大比例的用户能够使用它。如果您的应用程序变得疯狂流行，那么您将有更少的 iOS 用户尖叫着支持旧版操作系统。

你说你现在用 Ruby 和 Python 写东西，这是否意味着你没有 Objective-C 或 Java 的经验？如果是这样，我猜想从动态类型语言过渡到其中任何一种语言一开始都同样具有挑战性。

最后，您打算如何通过您的应用程序增加收入？如果它是订阅服务或付费应用程序，与谷歌和苹果打交道的商业方面几乎是相同的。但是，使用 Android，您可以选择在您的应用程序中加入广告，以在您的业务增长时为您的应用程序开发提供补贴。如果您想在不愿意为应用程序预付费用之后发展草根阶层，这可能很重要。

很多事情要考虑！如果是我，我会计划一个冲刺会议，为每个平台编写一个应用程序，然后评估我的经验，然后再决定哪种开发环境可以让我更快地进入市场。但是，您可能会发现它仍然太近而无法调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T14:57:52.660

如果您肯定要针对比其 Android 更多的受众。因为它在 2012 年第三季度占有 75% 的市场份额。在中国等一些国家，它的市场份额约为 90%。此外，除了市场份额，您还应该在选择平台时牢记采用率。对于 Android 来说，它是最好的。迄今为止，超过 50% 的 Android 设备运行在 2.3 Ie 姜饼上。它的体面足以构建任何应用程序。

# c# - 列表创建和对象初始化器

> ID：14158802
> 
> 赞同：2
> 
> 时间：2013-01-04T14:16:03.793
> 
> 标签：c#

在下面的示例中，我正在努力弄清楚 List 发生了什么：

```
public class DataObject
{
    public List<object> SomeObjects { get; set; }
}

class Program
{
    static void Main(string[] args)
    {

        var dataObj = new DataObject()
                          {
                              SomeObjects = { new object() },
                          };

        Console.ReadKey();
    }
} 
```

创建`dataOjb`显然失败，因为该`SomeObjects`属性尚未实例化。我假设没有编译错误，因为`DataObject`可能有一个实例化的构造函数`SomeObjects`。鉴于此，如果我尝试执行以下操作：

```
List<int> SomeObjects;
SomeObjects = {1, 2, 3, 4}; 
```

这显然不起作用，也没有：

```
List<int> SomeObjects = new List<int>();
SomeObjects = {1, 2, 3, 4}; 
```

所以要解决我的实际问题，在第一个对象初始化程序中调用的是什么（我试过查找但找不到它），为什么它的行为不同，还有其他地方可以像这样使用吗?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T14:19:33.927

> 所以要解决我的实际问题，第一个对象初始化程序中调用的是什么

这是等效的代码：

```
var tmp = new DataObject();
tmp.SomeObjects.Add(new object());
var dataObj = tmp; 
```

（显然，第二行由于`tmp.SomeObjects`您的情况为空而失败。）

此`= { ... }`语法*仅*适用于对象初始化程序，这就是后两个代码片段无效的原因。

更具体地说——在规范术语中——*成员初始化*器的形式是

```
identifier = initializer-value 
```

其中*initializer-value*是*expression*或*object-or-collection-initializer*之一。这不仅适用于集合...您也可以设置现有成员的属性：

```
var foo = new Foo {
    Bar = {
        X = 2,
        Y = 3
    }
}; 
```

这相当于：

```
var tmp = new Foo();
tmp.Bar.X = 2;
tmp.Bar.Y = 3;
var foo = tmp; 
```

# asp.net - 从 byte[] 返回文件下载

> ID：14158804
> 
> 赞同：4
> 
> 时间：2013-01-04T14:16:11.810
> 
> 标签：asp.net, character-encoding, asp.net-mvc-4

这段代码

```
string xml = XmlHelper.ToXml(queryTemplate);

byte[] xmlb = StringHelper.GetBytes(xml);

var cd = new System.Net.Mime.ContentDisposition
{
    // for example foo.bak
    FileName = String.Format("{0}_v{1}.xml", queryModel.Name, queryModel.Version),

    // always prompt the user for downloading, set to true if you want
    // the browser to try to show the file inline
    Inline = false,
};
Response.AppendHeader("Content-Disposition", cd.ToString());
return File(xmlb, "application/xml"); 
```

转换成后发现字符串编码不正确`byte[]`

所以我需要`string`立即将其放入文件中，就像这样

```
FileStream xfile = new FileStream(Path.Combine(dldir, filename), FileMode.Create, System.IO.FileAccess.Write);
hssfwb.Write(xfile); 
```

但我不想这样做，我不需要下载后的文件。我只需要将它作为文件下载返回到浏览器，并且不想在之后处理文件删除，当有很多请求时这会变得非常忙碌。

如何更正从`string`to的字符编码`byte[]`并将其正确返回给浏览器？

`GetBytes`函数看起来像这样

```
public static byte[] GetBytes(string str)
{
    byte[] bytes = new byte[str.Length * sizeof(char)];
    System.Buffer.BlockCopy(str.ToCharArray(), 0, bytes, 0, bytes.Length);
    return bytes;
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-04T14:43:14.550

像这样的东西会起作用：

```
try
{
    Response.ContentType = "application/octet-stream"; 
    Response.AddHeader( "Content-Disposition", "attachment; filename=" + filename ); 
    Response.OutputStream.Write(xmlb, 0, xmlb.Length); 
    Response.Flush(); 
} 
catch(Exception ex) 
{
    // An error occurred.. 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T12:06:18.213

在这种情况下：

```
public static byte[] GetBytes(string str)
{
    byte[] bytes = new byte[str.Length * sizeof(char)];
    System.Buffer.BlockCopy(str.ToCharArray(), 0, bytes, 0, bytes.Length);
    return bytes;
} 
```

您最终将使用 UTF-16LE 编码，因为这就是`char`数组内部的内容。

您应该摆脱该功能，因为它既具有误导性，又具有开箱即用的功能的冗余重复，因为`System.Text.Encoding.Unicode.GetBytes`已经做了同样的事情：*使用 little endian byte order 的 UTF-16 格式的编码*。

如果在不指定编码的情况下创建临时文件，那么您可能需要 Windows-1252，因为在创建文件时很可能会隐式使用它：

```
Encoding enc = Encoding.GetEncoding(1252);
byte[] xmlb = enc.GetBytes(xml); 
```

如果你想要 UTF-8，你会这样做：

```
byte[] xmlb = Encoding.UTF8.GetBytes(xml); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T13:01:02.180

我已经有了答案，原来问题出在字符编码上。

解决方案链接如下

[将字符串转换为 byte[] 创建零字符](https://stackoverflow.com/questions/14181866/converting-string-to-byte-creates-zero-character)

# performance - 想要当前用于我的 Web 应用程序的工作线程的数量

> ID：14158808
> 
> 赞同：1
> 
> 时间：2013-01-04T14:16:23.450
> 
> 标签：performance, performancecounter, machine.config

据我所知，Worker Threads 的值是使用 Machine.Config 的 ProcessModel 标签以两种方式之一控制的：1.如果 AutoConfig 值为 true，那么每个 CPU 将采用默认 100 2.如果 AutoConfig value 为 false，那么它将采用每个 CPU 指定的值

我们使用了以下链接：http: [//support.microsoft.com/kb/821268](http://support.microsoft.com/kb/821268)

因此，根据我所了解的，如果我们的 Web 应用程序不是 CPU 密集型并且每秒可以轻松接收更多请求，那么您可以增加此值。特别是如果您的 Web 应用程序使用大量 Web 服务调用或下载/上传大量数据，而这些数据不会对 CPU 造成压力。当 ASP.NET 用完工作线程时，它会停止处理更多进来的请求。请求进入队列并一直等待，直到释放工作线程。这通常发生在网站开始收到比您最初计划的更多点击时。在这种情况下，如果您有空闲的 CPU，请增加每个进程的工作线程数。

但是，我的问题是，我想知道在任何给定特定时间使用的工作线程的确切值，以便我可以决定我应该增加这个参数的值，或者我应该保持它的原样。是否有任何性能计数器或任何其他方式知道这一点？

请告诉我。我已经搜索了很多，但无法找到它。

# iphone - 我需要多少个 nib 文件才能支持 iPhone 3G、iPhone 5 和 iPad？

> ID：14158810
> 
> 赞同：2
> 
> 时间：2013-01-04T14:16:27.280
> 
> 标签：iphone, ipad, nib, iphone-5, screen-size

如果我想用旧的 iOS 和 iPhone 支持和设计，我可能需要多少个 nib？会是 3 个笔尖，一个用于旧 iPhone，一个用于 iPhone 5，一个用于 iPad？当然我不想要 iPhone 5 下面的黑色边框。我想为 iPhone 5 使用整个屏幕。

或者在不使用 3 个笔尖的情况下有什么好的解决方法吗？

避免 3 个 nib 并在代码中做所有事情的利弊是什么？有什么好的建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T14:23:12.423

你只需要2个笔尖。一款用于 iPhone，一款用于 iPad。较旧的 iPhone 和 iPhone 5 可以通过使用自动布局方法在同一个笔尖上

[iOS 和 OS X 的自动布局简介](https://developer.apple.com/videos/wwdc/2012/?id=202)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T14:51:04.743

无论 iPhone/iPad 版本如何使用旧的支柱和弹簧布局，都可以有一个笔尖并使其适合整个屏幕。这将使您能够控制不同元素在不同设备上的缩放方式，但它非常有限。

最后，这取决于您要显示的内容：

1.  如果内容可以拉伸并且在所有设备上看起来都不错，那么一个笔尖应该没问题。
2.  如果您需要进行一些更大的调整以利用具有更大屏幕和更高分辨率的设备，您需要为它们单独的笔尖。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T14:58:16.733

您可以使用两个 nib 文件。

您可以通过以下方式以编程方式检查您的屏幕尺寸（如果是 iPhone 5）：

```
if([[UIScreen mainScreen]applicationframe].size.height == 568){
   //configure your stuff for iPhone 5
} 
```

在这个 if 语句中，您可以进行视图配置。

如果您想进一步推动它，您还可以检查 iPad 的屏幕尺寸并仅使用 1 个 nib 文件。但为了更容易使用，我建议你使用上面提到的东西。

# ios - 用标题转动用户位置注释

> ID：14158812
> 
> 赞同：4
> 
> 时间：2013-01-04T14:16:31.627
> 
> 标签：ios, mapkit, cllocationmanager, mkannotationview

我正在尝试更改我的应用程序中的用户注释，以便它显示通常的蓝点，但是从它上面出现一个三角形以显示用户面对的方向（我宁愿旋转用户注释而不是整个地图，这就是 MKUserTrackingModeFollowWithHeading 所做的）。我有一个基本版本的工作，但它有一些奇怪的行为。

首先，一些代码：

```
-(MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation {
     if ([annotation isKindOfClass:[MKUserLocation class]]) {
          _userLocationView = [[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"userLocationIdentifier"];
          //use a custom image for the user annotation
          _userLocationView.image = [UIImage imageNamed:@"userLocationCompass.png"];

          return _userLocationView;

     } else {
          return nil;
     }

}

-(void)locationManager:(CLLocationManager *)manager didUpdateHeading:(CLHeading *)newHeading {

     //rotate user location annotation based on heading from location manager.
     if (!_locatorButton.hidden) {
          CLLocationDirection direction = newHeading.magneticHeading;

          CGAffineTransform transform = CGAffineTransformMakeRotation(degreesToRadians(direction));
          _userLocationView.transform = transform;
     }

}

-(void)GPSButtonPressed:(id)sender {
    if (self.GPSEnabled) {
        //if GPS is already on, disable it.
        _mapview.showsUserLocation = NO;
        [_mapview removeAnnotation:_mapview.userLocation];
        self.GPSEnabled = NO;

        [_locationManager stopUpdatingHeading];

    } else {
        //enable GPS.
        _mapview.showsUserLocation = YES;
        self.GPSEnabled = YES;

        if ([CLLocationManager headingAvailable]) {
            [_locationManager startUpdatingHeading];
        }

    }
} 
```

用户位置注释图像显示良好，并根据标题旋转，但以下是有趣的行为：

1- 注释不跟随我的位置——它只停留在一个地方，但以正确的方向旋转。如果我用“GPS 按钮”关闭 GPS，然后重新打开，注释会显示在正确的位置，但在我走路时仍然不会跟随。

2- 如果我滚动地图，注释会弹回正北，然后快速旋转到正确的航向，导致令人讨厌的闪烁效果。

3- 如果我关闭 GPS 并删除用户位置，注释会按预期删除，但如果我随后滚动地图，注释会弹回屏幕而不是保持隐藏状态。

我究竟做错了什么？感谢您提供任何有用的提示！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T10:30:17.747

即使您可能已经解决了 2\. 问题，我仍然想分享解决方案，这有助于我解决类似的问题。

我遇到了同样的问题：当用户滚动或平移地图时，我的自定义用户位置箭头旋转总是弹回北方。我在这里找到了修复：[https ://stackoverflow.com/a/12753320/2030629](https://stackoverflow.com/a/12753320/2030629)

根据作者的说法，它是一个但在 ios6 中，可以通过添加来修复

```
if(is6orMore) {
        [annView setTransform:CGAffineTransformMakeRotation(.001)]; //iOS6 BUG WORKAROUND !!!!!!!
 } 
```

映射视图：viewForAnnotation。

我还在 - mapView:regionDidChangeAnimated: 中设置了变换。希望这会让其他人像它让我一样快乐:)

# sharepoint - 如何在 sharepoint 2013 中获取结果源和搜索架构？

> ID：14158819
> 
> 赞同：-1
> 
> 时间：2013-01-04T14:16:55.847
> 
> 标签：sharepoint, sharepoint-2013

如果这不是此查询的正确位置，请道歉。

我正在创建一个搜索客户端应用程序。我在检索结果源和架构时卡住了。我发现，它可以使用 SharePoint 模型来实现。我需要使用 REST api。

谁能解释如何从 SharePoint 2013 中检索结果源和搜索架构？

我厌倦了探索要阅读的文件/帖子/文章。谁能解释一下？

开发搜索应用程序会更有用。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:33:53.100

经过大量的绊脚石和打击，最后我找到了从客户端（CSOM / REST）检索结果源的可能解决方案。

根据设计，可以在站点级别设置本身中创建结果源。我们可以使用 SearchConfigurationPortability 类中的 SearchExportConfiguration 方法从站点级别检索自定义结果源。

如果这不起作用，我们可以使用 HTTP Web 请求通过以下 URL 将搜索导出配置作为 XML 文件获取。“http://hostname/sitename/_layouts/15/exportsearchconfiguration.aspx?level=site”

我们可以通过解析 XML 结果来检索自定义结果源 GUID。我们可以获得默认结果源，如您在此处列出的默认结果源。

我想这会对你有所帮助。

# excel - TextBox1中的EXCEL VBA货币格式

> ID：14158820
> 
> 赞同：0
> 
> 时间：2013-01-04T14:16:59.170
> 
> 标签：excel, vba, format, currency

我想`TextBox1`用以下格式格式化值：

1.  没有括号的马来西亚林吉特货币（RM）
2.  将其设为小数点后 2 位，例如 RM 10.00
3.  `TextBox1`即使用户没有输入任何值，例如 RM 0.00 ，也可以显示格式
4.  只允许用户输入整数，例如当用户输入 1234 时`TextBox1`，`TextBox1`值将从 RM 0.00 更改为 RM 12.34 用户不必点击 ' `.`'，整数只会向前移动，例如 RM 0.01 -> RM 0.12 -> RM 1.23 -> RM 12.34 因为用户在`TextBox1`.

如果我的问题中其他地方有任何误解，请告诉我，我会更正。谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T14:52:00.093

**第一：**你的数字格式很简单。打开数字格式对话框并使用此字符串创建自定义格式：

"RM"#,#0.00

**第二：**要将空单元格显示为零，您有两个选择。

1.  如果单元格是其他地方的方程式或数据的结果，则可以使用公式；例如，=if(A1="",0,A1) 这将采用 A1 的值，除非它为空，在这种情况下它将为 0。
2.  您还可以将工作表设置为在文件选项卡的选项下显示所有零值。

**第三（也是最后）：**就小数的自动放置而言，这并不少见。只需按照本教程中的步骤操作：

[Excel中如何自动插入小数点](http://www.dummies.com/how-to/content/how-to-insert-decimal-points-automatically-in-exce.html)

我希望这会有所帮助，祝你好运！

编辑：

乍一看，我认为您需要有关单元格格式的帮助，但您需要有关 VBA 用户窗体和/或工作表本身中的文本框控件的帮助。完成此任务所需的工具是输入掩码。但是，据我了解，目前 VBA 用户表单中没有对此的内置支持。当用户更改或退出框时，您可以构建代码来执行此操作。

我会在他们退出时推荐代码，该代码将首先验证输入以确认它是数字，然后更改值以匹配所需的格式。这是一个例子：

```
Private Sub myTextbox_Exit(ByVal Cancel As MSForms.ReturnBoolean)

Dim myVal As String

myVal = Trim(myTextbox.Value)

If myVal = "" Then Exit Sub 'Ignore this subroutine if the box is empty.

If IsNumeric(myVal) = False Then 'If the input is not a number, ask for correct input.
    MsgBox "Please enter a number value."
    myTextbox.SetFocus
    Exit Sub
ElseIf InStr(1, myVal, ".", vbTextCompare) > 0 Then     'If the input includes decimal, use it.
    myTextbox.Value = "RM " & Format(myVal, "#,##0.00")
ElseIf InStr(1, myVal, ".", vbTextCompare) = 0 Then     'If the input doesn't include decimal, enter one and divide by 100.
    myTextbox.Value = "RM " & (Format(myVal, "#,##0.00") / 100)
End If

End Sub 
```

如果你想变得非常花哨，你可以先在输入中搜索“RM”。这将确保在用户输入诸如“RM 123.45”之类的值时不会弹出“无效输入”消息框。不幸的是，我目前没有时间为您编写该代码。

# ruby-on-rails - Omniauth-facebook 的 Facebook Canvas 身份验证重定向问题（重定向到 iframe 之外）

> ID：14158827
> 
> 赞同：7
> 
> 时间：2013-01-04T14:17:31.637
> 
> 标签：ruby-on-rails, facebook, omniauth

我是一个关于 Facebook 身份验证的新手，并且遇到了重定向问题。我使用 Rails 3.2.6 实现了我的应用程序，并使用 omniauth-facebook 1.4.0 与 Facebook 集成。我网站上的“使用 Facebook 唱歌”可以正常工作，但是画布身份验证无法按预期工作。

期待：

1.  用户在 Facebook 上找到我的网络应用程序并接受登录对话框以启动我的应用程序。
2.  用户在 Facebook 的画布页面上被重定向到我的应用程序，而不是在 Facebook 画布 iframe 之外。

实际结果：

用户身份验证有效，但随后我的应用页面被重定向到 iframe 之外。

# Facebook 应用程序设置

Facebook 应用程序设置如下。画布 URL 设置为“/auth/facebook/”以立即对用户进行身份验证。（我添加了空间以避免喜欢无效域）

> 带有 Facebook 登录站点 URL 的网站：http://localhost:3000/
> 
> 画布网址：http://localhost:3000/auth/facebook/

# 全域认证.rb

```
Rails.application.config.middleware.use OmniAuth::Builder do
  provider :facebook, FB_APP_ID, FB_APP_SECRET, {:image_size => 'large', :iframe => true, :client_options => {:ssl => {:ca_file => Rails.root.join('lib/assets/cacert.pem').to_s}}}
end 
```

# session_controller.rb

```
class SessionsController < ApplicationController   def create
    auth = Auth.from_omniauth(env["omniauth.auth"])
    session[:user_id] = auth.id
    redirect_to root_url   end

  def destroy
    session[:user_id] = nil
    redirect_to root_url   end end 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:12:24.423

解决此问题的简单方法是检测用户是否在框架内，如果不在，则将其反弹到 Facebook。我使用以下 JavaScript 在我的 Facebook 应用程序中执行此操作：

```
<script type="text/javascript">
if ( top === self ) {
    window.top.location = '{fb_canvas_url}';
}
</script> 
```

# sql - SQL：从这样的数据中获取期间的开始和结束日期时间？我正在努力解决的棘手的小难题

> ID：14158832
> 
> 赞同：5
> 
> 时间：2013-01-04T14:18:08.597
> 
> 标签：sql, sql-server-2008, datetime, group-by

我有一张表格，列出了一年中的每个日期。每行还包含一个从 1 到 13 的期间编号，每年循环。它看起来像这样：

```
|        Date         | Period |
| 2012-12-27 00:00:00 |   12   |
| 2012-12-28 00:00:00 |   12   |
| 2012-12-29 00:00:00 |   13   |
| 2012-12-30 00:00:00 |   13   |
| 2012-12-31 00:00:00 |   13   |
| 2013-01-01 00:00:00 |   13   |
| 2013-01-02 00:00:00 |   13   |
|        . . .        |   13   | 
| 2013-02-10 00:00:00 |   01   |
|        . . .        |   01   | 
| 2013-03-14 00:00:00 |   02   |
|        . . .        |   02   | 
| 2013-05-05 00:00:00 |   03   | 
```

正如您在上面看到的，第 13 期从 2012 年 12 月 29 日开始，到 2013 年 2 月 9 日结束。我通过获取第 13 期的第一个和最后一个日期来解决这个问题。

**我需要编写一个查询来获取当前期间的期间开始和结束日期。但我遇到了问题，因为这些时期有时一年发生两次，有时像这个例子一样在年份之间重叠。**

再举几个例子：

如果 getDate() = '2013-02-25 13:45:00' 则期间应为 01，开始和结束日期为 '2013-02-10 00:00:00' 和 '2013-03-14 00:00:00'

如果 getDate() = '2013-03-15 00:00:00' 那么时间段应该是 02 并且开始和结束日期应该是 '2013-03-14 00:00:00' 和 '2013-05-05 00:00:00'

我真的希望这是有道理的。让我知道是否需要澄清它！谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T14:29:12.783

如果您使用的是 SQL Server 2012，您将为此使用`lag`or `lead`。相反，我将使用相关子查询：

```
select min(period) as period, MIN(date), MAX(date)
from (select t.*,
             (select min(date) from t t2 where t2.period <> t.period and t2.date > t.date) as nextp
      from t
     ) t
group by nextp 
```

内部子查询获取*下一个*周期的日期。这对于具有相同期间记录的连续记录是相同的。然后我可以使用它进行分组。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T14:42:33.850

两个递归 cte，在一段时间内查找开始日期和结束日期。

```
with CStart as
(
  select Date,
         Period
  from DateTable
  where Date = cast(getdate() as date)
  union all
  select D.Date,
         D.Period
  from DateTable as D
    inner join CStart
      on dateadd(day, -1, CStart.Date) = D.Date and
         CStart.Period = D.Period
),
CEnd as
(
  select Date,
         Period
  from DateTable
  where Date = cast(getdate() as date)
  union all
  select D.Date,
         D.Period
  from DateTable as D
    inner join CEnd
      on dateadd(day, 1, CEnd.Date) = D.Date and
         CEnd.Period = D.Period
),
CPeriod as
(
  select Period
  from DateTable
  where Date = cast(getdate() as date)
)
select Period,
       (select min(Date) from CStart) as StartDate,
       (select max(Date) from CEnd) as EndDate 
from CPeriod 
```

对[SE 数据进行测试](https://data.stackexchange.com/stackoverflow/query/90883)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T14:44:59.963

试试这个代码

```
DECLARE @TODAYSPERIOD AS VARCHAR(2)

SET @TODAYSPERIOD = (SELECT PERIOD FROM MYTABLE
                    WHERE DATE = (DATEADD(D, DATEDIFF(D, 0, GETDATE()), 0)))

SELECT MAX(DATE), MIN(DATE), @TODAYSPERIOD FROM MYTABLE
WHERE PERIOD = @TODAYSPERIOD AND DATE BETWEEN ((DATEADD(D, DATEDIFF(D, 0, GETDATE()), 0)) - 45) AND ((DATEADD(D, DATEDIFF(D, 0, GETDATE()), 0)) + 45) 
```

本质上，我们正在使用您的表（在上面的代码中，它被称为“MYTABLE”）来查找期间，然后只取 45 天半径内的日期（当前日期之前和之后），它被列为与今天相同的时期。

希望这可以帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T15:37:01.780

**如果 - 且仅当**- 表中不存在日期间隔并且每个日期恰好有一行，则可以使用此：

```
; WITH cte AS
  ( SELECT
        a.Date AS StartDate
      , b.Date AS EndDate
      , a.Period
      , ROW_NUMBER() OVER (ORDER BY a.Date) AS rn
    FROM tableX AS a
      LEFT JOIN tableX AS b
        ON  DATEADD(day, -1, a.Date) = b.Date
    WHERE a.Period <> b.Period 
       OR b.Date IS NULL 
  )
SELECT
    a.StartDate
  , COALESCE(b.EndDate, (SELECT MAX(Date) FROM tableX)) AS EndDate
  , a.Period
FROM
    cte AS a
  LEFT JOIN 
    cte AS b
      ON a.rn + 1 = b.rn ; 
```

在**[SQL-Fiddle中测试](http://sqlfiddle.com/#!3/56806/3)**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-04T14:50:33.777

你可以试试（在我的测试数据中，56是给定时间段内的最大天数）

```
SELECT A.period
     , MIN( B.date )
     , MAX( B.date )
  FROM dates A
 INNER JOIN dates B
    ON A.date >= DATEADD( dd, -56, B.date )
   AND A.date <= DATEADD( dd, 56, B.date )
   AND A.period = B.period 
 GROUP BY A.period 
```

# jquery - Jquery 菜单 onmouseenter 和 mouseleave 奇怪的行为

> ID：14158838
> 
> 赞同：4
> 
> 时间：2013-01-04T14:18:30.780
> 
> 标签：jquery, hover

这是我的 js 菜单，在悬停时隐藏/显示菜单项......我有这样的菜单：

```
 <ul class="main">
        <li class="acro_jq_menu">
            <a href="" title="How to">How to one </a>
            <ul>
                <li>item21</li>
                <li>ite222m1</li>
                <li>item1</li>
            </ul>
        </li>
        <li class="acro_jq_menu">
            <a href="" title="How to">How to Two </a>
            <ul>
                <li>item1</li>
                <li>it2em1</li>
                <li>it41em1</li>
            </ul>
        </li>
   </ul> 
```

这是javascript：

```
function slideMenu()  {
 var items = $('.main li.acro_jq_menu');
        items.bind({
            mouseenter: function(e) {
                $(this).find('>ul').css({
                    'opacity':0
                }).show().animate(

                {
                    'opacity':1
                },
                500);
            },
            mouseleave: function(e) {
                $(this).find('>ul').fadeOut(100, function() {
                    $(this).hide();
                })
            }
        });   
}

$(document).ready(function(){
        slideMenu();
    });​ 
```

一切正常，但有时当我将鼠标留`li`在此列表项中的当前内容隐藏时间过长（超过 2 秒左右）时，有时内容根本不显示。我认为 jquery 代码有问题，但我无法弄清楚。

这里是我的代码的 JSfiddle 示例的链接：[link](http://jsfiddle.net/6hZuV/1/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T14:32:01.177

尝试停止事件的所有动画：

[http://jsfiddle.net/6hZuV/4/](http://jsfiddle.net/6hZuV/4/)

```
function slideMenu()  {
 var items = $('.main li.acro_jq_menu');
        items.bind({
            mouseenter: function(e) {
                $(this).stop(true, true).find('>ul').css({
                    'opacity':0
                }).show().animate(

                {
                    'opacity':1
                },
                500);
            },
            mouseleave: function(e) {
                $(this).stop(true, true).find('>ul').fadeOut(100, function() {
                    $(this).hide();
                })
            }
        });   
} 
```

# ruby - 在另一个模块内扩展模块

> ID：14158839
> 
> 赞同：5
> 
> 时间：2013-01-04T14:18:41.903
> 
> 标签：ruby

我想`a`从模块的方法调用方法`B`。我该怎么做？我不想`A::a`每次都指定。

```
module A
  def self.a
    "a"
  end
end

module B
  extend A

  def self.b
    a
  end
end

p B::b  # => undefined local variable or method `a' for B:Module 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T14:39:36.653

当使用`extend`or`include`时，Ruby 只会混入实例方法。Extend 会将它们作为类方法混入，但不会混入类方法。因此，您的查询的简单解决方案：

```
module A
  def a  ## Change to instance
    "a"
  end
end

module B
  extend A

  def self.b
    a
  end
end

p B::b #=> "a"
p B.b  #=> "a" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T14:28:39.353

我在[这里](https://stackoverflow.com/a/4663029/841064)找到了一种解决方法，但对我来说看起来不太好：

```
module A 
  module ClassMethods
    def a
      puts "a"
    end
  end
  extend ClassMethods
  def self.included( other )
    other.extend( ClassMethods )
  end
end

module B
  include A

  def self.b
    a
  end
end

p B::b  # => "a" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T15:51:56.890

你可以试试这个“奇怪”的代码：

```
module A
  def self.a
    "a"
  end
end

module B
  extend A

  def self.method_missing(name, *args)
    if name =~ /a/
        A::a *args
    else
        raise "MethodMissed: #{name}"
    end
  end

  def self.b
    a
  end
end

p B::b 
```

# android - 适用于所有 SDK 的 Android Google Analytics v2 广播接收器

> ID：14158841
> 
> 赞同：0
> 
> 时间：2013-01-04T14:18:50.857
> 
> 标签：android, google-analytics, google-play

我开始实施 Google Play 活动，如下所示：

[https://developers.google.com/analytics/devguides/collection/android/v2/campaigns#google-play-tracking](https://developers.google.com/analytics/devguides/collection/android/v2/campaigns#google-play-tracking)

我打了这条线

[https://developers.google.com/analytics/devguides/collection/android/v2/campaigns#known-issues](https://developers.google.com/analytics/devguides/collection/android/v2/campaigns#known-issues)

其中指出：

> 每个应用只能指定一个 BroadcastReceiver 类。如果您需要合并来自不同 SDK 的两个或多个 BroadcastReceiver，您将需要创建自己的 BroadcastReceiver 类，该类将接收所有广播并为每种类型的广播调用适当的 BroadcastReceiver。

我的意思是 com.google.analytics.tracking.android.AnalyticsReceiver 不适用于所有 SDK 吗？我需要 SDK 10(2.3.3) 及更高版本！够了吗？如果不是我需要什么，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T09:22:51.723

那是指多个分析提供商，所有这些提供商都可能需要处理安装事件。在我所做的工作中，我定义了一个自定义 BroadcastReceiver，它将意图传递给 Google Analytics、一个内部分析系统和 MobileAppTracking。像这样的情况相当普遍。

您所说的“SDK”更恰当地称为 API 级别，即 Android API 上的迭代。

所以谷歌所指的案例是这样的：

```
public class InstallReceiver extends BroadcastReceiver {
        public static final String TAG = InstallReceiver.class.getCanonicalName();

        @Override
        public void onReceive(Context context, Intent intent) {

            // Google Analytics
            new CampaignTrackingReceiver().onReceive(context, intent);

            // HasOffers
            if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.FROYO) {
                Tracker hasOffersTracker = new Tracker();
                hasOffersTracker.onReceive(context, intent);
            }

            Log.d(TAG, intent.getExtras().getString("referrer");
        }
    } 
```

# php - PHP 中的安全问题和架构

> ID：14158843
> 
> 赞同：3
> 
> 时间：2013-01-04T14:18:57.033
> 
> 标签：php, security

我的小程序基于 PHP、MySql、Jquery 和 Ajax，提供登录和显示数据库中的数据。Login.html –> check-login.php –> success-login.php <-> show-data.php

我的问题：

1.  我应该担心或改进的任何安全问题。

2.  关于`$_SESSION`，是否有人`$_SESSION['mytime']`在远程计算机上添加了一个 php 文件，并假装是授权用户？

3.  我在 Youtube 上看到一个视频声称可以破坏 80% 的登录（通过代理和密码字典），我应该设置用户可以登录的最长时间以防止它还是其他建议？

4.  我可以在 MySQL 和 php（服务器端）或 javascript（客户端）上格式化数据，我应该总是在客户端进行格式化，或者例如，如果有 10 个函数，8 个在客户端，2 个在服务器端等等.

我的代码如下：

login.html（调用 check-login.php）

检查登录.php

```
// connect database by PDO
// if username and password (in md5) are matched
session_start();
$_SESSION['mytime'] = time();
header('location:success-login.php'); 
```

成功登录.php

```
session_start();
if(!isset($_SESSION['mytime'])) {
  header('location:login.html');
   exit;
}
//use Jquery and Ajax to fetch data from database in show-data.php 
```

显示数据.php

```
session_start();
if(!isset($_SESSION['mytime'])) {
  header('location:login.html');
   exit;
}
//PDO database operation and return data in JSON 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T00:32:00.747

在开发这样的应用程序时，您应该记住很多事情。根据您从数据库中显示的数据的敏感性，您可能希望开始使用 HTTPS 连接而不是纯 HTTP。这是我通常会做的以提高安全性：

*   创建加密会话 - 使用 mcrypt 并通过 cookie 在客户端存储解密会话所需的密钥。这样，即使有人最终可以访问服务器上存储会话的路径，他也无法解码会话，因为密钥存储在客户端。
*   不要在 URL 中使用任何 SQL 并**始终**检查提交的数据是否有效 - 即记录 id 是否存在，输入的数据是否有效等等。
*   注意跨站脚本
*   **始终**使用密码加密，如果您有敏感数据 - 也请尝试加密。

关于你的其他问题：

1.  我不确定你的问题是什么。`$_SESSION`存储在服务器端。它只能由在该服务器上运行的脚本或手动更改（如果您手动编辑`$_SESSION`文件）
2.  当用户登录 X 次失败时使用验证码 (reCaptcha)。如果您愿意，您可以添加一个锁定 - 如果用户 5 次未能登录，用户将被锁定，并且一封包含解锁说明的电子邮件将发送到用户的电子邮件地址。
3.  我不知道你到底是什么意思`format`（是解析还是造型）。如果我响应 AJAX 请求，我会格式化数据并**仅**输出需要显示的数据。例如，如果我要显示有关用户的信息，我将输出他的`username`, `first_name`, `last_name`，`email`但不输出他`password`的`password_salt`,`bank_account`和任何其他敏感数据。
4.  作为第 3 点的后续行动 - 当您从服务器端格式化数据时，如何显示它取决于您。您可以通过 JavaScript 执行此操作，也可以直接将其输出为对 AJAX 请求的响应。由你决定。

您提供给我们的代码是我不会使用的，因为它不会检查有效用户。如果用户有一个带有`mytime`变量的会话，它假定用户有是有效的。我会在会话中存储`user_id`和`password`（加密），然后检查这些值是否在数据库中匹配。这样，万一用户被删除或更改密码，他的所有其他会话都将失效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T14:34:17.997

1.  有许多安全问题，例如：[五个常见的 Web 应用程序漏洞](http://www.symantec.com/connect/articles/five-common-web-application-vulnerabilities)
2.  不，用户不可能自己设置/更改您的`$_SESSION`变量。
3.  您可以防止用户选择一个简单的密码，或者您可以放置​​一个验证[码](http://en.wikipedia.org/wiki/CAPTCHA)，例如五次错误密码输入后。（雅虎！做到了）等等......
4.  我没有得到你正在寻找的东西。

# python - Django 网络服务器阻塞的主要原因是什么？

> ID：14158844
> 
> 赞同：3
> 
> 时间：2013-01-04T14:19:03.400
> 
> 标签：python, django, webserver, tornado, blocking

为什么 Django 网络服务器是阻塞的，而不是像 Tornado 那样的非阻塞？有理由以这种方式设计网络服务器吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T14:20:12.550

我相信它是单线程和阻塞的，所以很容易调试。如果您将调试器放入其中将完全停止服务器

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-04T14:29:09.727

如果您真的需要 dm03514 建议的其他原因，我可能只是因为它更容易编写。由于我只用于开发的开发服务器，因此几乎没有花多少精力使它更复杂或能够服务多个请求。事实上，这是一个明确的目标：让它变得更好会鼓励人们在生产环境中使用它，而它没有经过测试。

# c# - 从内存中加载库/模块

> ID：14158846
> 
> 赞同：2
> 
> 时间：2013-01-04T14:19:08.093
> 
> 标签：c#, memory, dll, dllimport, unmanaged

我实现了[这个应用程序](https://github.com/fancycode/MemoryModule)的一点 C# 移植，它允许从内存/流中加载库，而不是使用通过文件系统工作的 LoadLibrary API 函数。在用指针和不匹配的结果弄乱了一点之后......最后我得到了一些按预期工作的东西。我唯一的问题是对 DLLMain 的调用总是失败（我用 Kernel32.dll 和 User32.dll 尝试过）。我不明白为什么，也不知道如何调试这个问题。

这是我的项目（一个简单的 32 位控制台应用程序）的主要功能，它读取一个库，将其分配到内存中并手动加载它：

```
public static UInt32 Load(String libraryName)
{
    if (libraries.ContainsKey(libraryName))
        return libraries[libraryName];

    String libraryPath = Path.Combine(Environment.SystemDirectory, libraryName);
    Byte[] libraryBytes = File.ReadAllBytes(libraryPath);

    fixed (Byte* libraryPointer = libraryBytes)
    {
        HeaderDOS* headerDOS = (HeaderDOS*)libraryPointer;

        if ((UInt16)((headerDOS->Magic << 8) | (headerDOS->Magic >> 8)) != IMAGE_DOS_SIGNATURE)
            return 0;

        HeadersNT* headerNT = (HeadersNT*)(libraryPointer + headerDOS->LFANEW);

        UInt32 addressLibrary = VirtualAlloc(headerNT->OptionalHeader.ImageBase, headerNT->OptionalHeader.SizeOfImage, AllocationType.RESERVE, MemoryProtection.READWRITE);

        if (addressLibrary == 0)
            addressLibrary = VirtualAlloc(0, headerNT->OptionalHeader.SizeOfImage, AllocationType.RESERVE, MemoryProtection.READWRITE);

        if (addressLibrary == 0)
            return 0;

        Library* library = (Library*)Marshal.AllocHGlobal(sizeof(Library));
        library->Address = (Byte*)addressLibrary;
        library->ModulesCount = 0;
        library->Modules = null;
        library->Initialized = false;

        VirtualAlloc(addressLibrary, headerNT->OptionalHeader.SizeOfImage, AllocationType.COMMIT, MemoryProtection.READWRITE);

        UInt32 addressHeaders = VirtualAlloc(addressLibrary, headerNT->OptionalHeader.SizeOfHeaders, AllocationType.COMMIT, MemoryProtection.READWRITE);

        MemoryCopy((Byte*)headerDOS, (Byte*)addressHeaders, (headerDOS->LFANEW + headerNT->OptionalHeader.SizeOfHeaders));

        library->Headers = (HeadersNT*)((Byte*)addressHeaders + headerDOS->LFANEW);
        library->Headers->OptionalHeader.ImageBase = addressLibrary;

        CopySections(library, headerNT, libraryPointer);

        UInt32 locationDelta = addressLibrary - headerNT->OptionalHeader.ImageBase;

        if (locationDelta != 0)
            PerformBaseRelocation(library, locationDelta);

        UInt32 libraryHandle = (UInt32)library;

        if (!BuildImportTable(library))
        {
            Free(libraryName);
            return 0;
        }

        FinalizeSections(library);

        if (library->Headers->OptionalHeader.AddressOfEntryPoint == 0)
        {
            Free(libraryName);
            return 0;
        }

        UInt32 libraryEntryPoint = addressLibrary + library->Headers->OptionalHeader.AddressOfEntryPoint;

        if (libraryEntryPoint == 0)
        {
            Free(libraryName);
            return 0;
        }

        LibraryMain main = (LibraryMain)Marshal.GetDelegateForFunctionPointer(new IntPtr(libraryEntryPoint), typeof(LibraryMain));
        UInt32 result = main(addressLibrary, DLL_PROCESS_ATTACH, 0);

        if (result == 0)
        {
            Free(libraryName);
            return 0;
        }

        library->Initialized = true;

        libraries[libraryName] = libraryHandle;

        return libraryHandle;
    }
} 
```

这是一个如何使用它的例子：

```
private const Byte VK_Z_BREAK = 0x5A;

[UnmanagedFunctionPointer(CallingConvention.Cdecl)]
private delegate void KeyboardEventDelegate(Byte key, Byte scan, KeyboardFlags flags, Int32 extra);

[Flags]
private enum KeyboardFlags : uint
{
    EXTENDEDKEY = 0x0001,
    KEYUP = 0x0002,
}

public static void Main()
{
    UInt32 libraryHandle = LibraryLoader.Load("User32.dll");

    if (libraryHandle != 0)
    {
        UInt32 functionHandle = LibraryLoader.GetFunctionAddress("User32.dll", "keybd_event");

        if (functionHandle != 0)
        {
            KeyboardEventDelegate s_KeyboardEvent = (KeyboardEventDelegate)Marshal.GetDelegateForFunctionPointer(new IntPtr(functionHandle), typeof(KeyboardEventDelegate));

            while (true)
            {
                s_KeyboardEvent(VK_Z_BREAK, VK_Z_SCANCODE, 0, 0);
                s_KeyboardEvent(VK_Z_BREAK, VK_Z_SCANCODE, KeyboardFlags.KEYUP, 0);
            }
        }
    }

    Console.ReadLine();
} 
```

如果您想快速尝试一下，可以从此[链接](http://www.4shared.com/get/EorCdXPG/Experiment.html)下载项目。

[编辑] 经过几次尝试，在调用 DllMain 后使用 Marshal.GetLastWin32Error()，我发现正在生成错误代码 14，它对应于 ERROR_OUTOFMEMORY。如果在 DllMain 调用失败后继续，并且我获得了库函数的地址，则尝试使用委托调用它会产生 PInvokeStackImbalance 异常。有什么线索吗？^_^

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-06T16:07:26.757

此代码只是 Windows 加载程序加载 DLL 的一阶近似值。它仅适用于最简单的 DLL，从 C 代码到 C# 代码的转换也很可能会导致您正在处理的堆栈不平衡问题等问题。我看到的主要问题：

*   它不会做任何事情来确保之前没有加载过 DLL。当您尝试加载 kernel32.dll 和 user32.dll 时，这几乎肯定会成为麻烦的根源，这些 DLL 在托管代码开始执行之前已经加载。他们不会善待再次加载。

*   确保相关的 DLL 也被加载并且它们的 DllMain() 入口点以正确的顺序调用并严格序列化并没有做任何明显的事情。

*   它没有做任何事情来正确处理托管代码加载程序存根 MSCoree.dll，这使得您不太可能正确加载任何包含混合模式代码的 DLL。

*   它没有做任何事情来确保 Windows 加载程序知道这些模块，这使得任何后续对 DLL 的请求很可能会失败。这种故障是完全无法诊断的。

您能够正确解决这些问题的可能性非常低。

# android - 指定的孩子已经有一个父母。您必须在孩子的父母上调用 removeChild()

> ID：14158848
> 
> 赞同：0
> 
> 时间：2013-01-04T14:19:08.637
> 
> 标签：android, android-layout, button, android-view

我正在尝试在其中一个应用程序页面上动态添加一个按钮。我收到以下错误：

```
01-04 13:14:28.733: E/AndroidRuntime(811): FATAL EXCEPTION: main
01-04 13:14:28.733: E/AndroidRuntime(811): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.wb/com.example.wb.MainActivity}: java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first.
01-04 13:14:28.733: E/AndroidRuntime(811):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
01-04 13:14:28.733: E/AndroidRuntime(811):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
01-04 13:14:28.733: E/AndroidRuntime(811):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
01-04 13:14:28.733: E/AndroidRuntime(811):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
01-04 13:14:28.733: E/AndroidRuntime(811):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-04 13:14:28.733: E/AndroidRuntime(811):  at android.os.Looper.loop(Looper.java:137)
01-04 13:14:28.733: E/AndroidRuntime(811):  at android.app.ActivityThread.main(ActivityThread.java:5039)
01-04 13:14:28.733: E/AndroidRuntime(811):  at java.lang.reflect.Method.invokeNative(Native Method)
01-04 13:14:28.733: E/AndroidRuntime(811):  at java.lang.reflect.Method.invoke(Method.java:511)
01-04 13:14:28.733: E/AndroidRuntime(811):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-04 13:14:28.733: E/AndroidRuntime(811):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-04 13:14:28.733: E/AndroidRuntime(811):  at dalvik.system.NativeStart.main(Native Method)
01-04 13:14:28.733: E/AndroidRuntime(811): Caused by: java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first.
01-04 13:14:28.733: E/AndroidRuntime(811):  at android.view.ViewGroup.addViewInner(ViewGroup.java:3339)
01-04 13:14:28.733: E/AndroidRuntime(811):  at android.view.ViewGroup.addView(ViewGroup.java:3210)
01-04 13:14:28.733: E/AndroidRuntime(811):  at android.view.ViewGroup.addView(ViewGroup.java:3155)
01-04 13:14:28.733: E/AndroidRuntime(811):  at android.view.ViewGroup.addView(ViewGroup.java:3131)
01-04 13:14:28.733: E/AndroidRuntime(811):  at com.example.wb.MainActivity.onCreate(MainActivity.java:63)
01-04 13:14:28.733: E/AndroidRuntime(811):  at android.app.Activity.performCreate(Activity.java:5104)
01-04 13:14:28.733: E/AndroidRuntime(811):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
01-04 13:14:28.733: E/AndroidRuntime(811):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
01-04 13:14:28.733: E/AndroidRuntime(811):  ... 11 more 
```

这是我要添加的活动

```
public class MainActivity extends Activity {

EditText text1;

@SuppressWarnings("deprecation")
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    int MY_BUTTON = 9000;
    Bundle extras = getIntent().getExtras();
    String userid = extras.getString("userid");

    //LayoutInflater factory = getLayoutInflater();
    LinearLayout ll = (LinearLayout)findViewById(R.id.linear);

    Button b = new Button(this);
    b.setText("Button added dynamically!");
    b.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    b.setId(MY_BUTTON);
    ll.addView(b);

    /*UserLoginTask mAuthTask = new UserLoginTask();
    String urlwithget="?userid="+userid+"&task=alltitles";

    mAuthTask.execute(urlwithget);

       LinearLayout layout = new LinearLayout(this);
        layout.setOrientation(LinearLayout.VERTICAL);  //Can also be done in xml by android:orientation="vertical"
        LinearLayout row = new LinearLayout(this);
        row.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));

        Button btnTag = new Button(this);
        btnTag.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
        btnTag.setText("Button 1");
        btnTag.setId(2);
        row.addView(btnTag);
*/        
} 
```

以下是我对此活动的布局

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:onClick="onClick"
    android:text="@string/logout" />

<Button
    android:id="@+id/button2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_marginRight="19dp"
    android:layout_toLeftOf="@+id/button1"
    android:onClick="goOn"
    android:text="@string/forward" />

<EditText
    android:id="@+id/editText1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/button1"
    android:layout_marginTop="36dp"
    android:ems="10"
    android:text="@string/vishal" />

<LinearLayout
    android:id="@+id/linear"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/editText1"
    android:layout_marginLeft="60dp"
    android:layout_marginTop="58dp"
    android:orientation="vertical" >

</LinearLayout>

</RelativeLayout> 
```

问题是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T14:23:06.003

您声明 LinearLayout 是错误的：

这个 ：

`LinearLayout ll = (LinearLayout)findViewById(R.layout.activity_main);`

必须是这样的：

```
LinearLayout ll = (LinearLayout)findViewById(R.id.linear); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T15:16:31.790

`LayoutParams`这段代码指的是什么子类：

```
new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT)) 
```

有多种类型，`LayoutParams`您必须根据要添加子视图的 ViewGroup 类型使用正确的类型。

在这种情况下，请确保使用`LinearLayout.LayoutParams`（请参阅[http://developer.android.com/reference/android/widget/LinearLayout.LayoutParams.html](http://developer.android.com/reference/android/widget/LinearLayout.LayoutParams.html)）

# php - 用于创建图片的组件。需要上传图片。上传的图片应保存在创建的组件中

> ID：14158856
> 
> 赞同：0
> 
> 时间：2013-01-04T14:19:40.807
> 
> 标签：php, joomla, joomla2.5

我正在创建一个用于在前端显示图像的 Joomla 2.5 组件。在管理方面，我需要使用文件上传器来保存多个图像。谁能告诉我这样做的任何来源？这是我写的上传文件的功能。

```
 function fileUpload($max, $module_dir, $file_type, $msg){
          $file = JRequest::getVar('file_upload', null, 'files', 'array'); 
         if(isset($file)){ 
            //Clean up filename to get rid of strange characters like spaces etc
            $filename = JFile::makeSafe($file['name']);

            if($file['size'] > $max) $msg = JText::_('ONLY_FILES_UNDER').' '.$max;
            //Set up the source and destination of the file

            $src = $file['tmp_name'];
            $dest = $module_dir . DS . $filename;

            //First check if the file has the right extension, we need jpg only
            if ($file['type'] == $file_type || $file_type == '*') { 
               if ( JFile::upload($src, $dest) ) {

                   //Redirect to a page of your choice
                    $msg = JText::_('FILE_SAVE_AS').' '.$dest;
               } else {
                      //Redirect and throw an error message
                    $msg = JText::_('ERROR_IN_UPLOAD');
               }
            } else {
               //Redirect and notify user file is not right extension
                    $msg = JText::_('FILE_TYPE_INVALID');
            }

            $msg = "<script>alert('". $msg ."');</script>";
          }
          return $msg;
           }

        $user =& JFactory::getUser();
       $username = $user->get('username');

         $acc = 0;
         $session =& JFactory::getSession(); 

        if(isset($user_names)) {
      $more = strpos($user_names, ',',0);
        if($more >0){
            $user_names = explode(',',$user_names);
            foreach($user_names as $un){
                    if($un == $username) {
                            $session->set($acc, 1); 
                    }else{
                            $session->set($acc, 0); 
                    }
            }
           }else{
            if ($user_names == $username) $session->set($acc, 1); 
     }
   else{
    if(isset($username)) $session->set($acc, 1); 
    }

   if($session->get($acc) == 1){
    ?>

  <?php
    print fileUpload($max, $module_dir, $file_type, $msg);
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T14:24:51.013

您可以使用 SWF 文件上传器为您的组件制作图像或文件上传功能。请参阅此链接，它可能会有所帮助。

[在组件中创建文件上传器](http://docs.joomla.org/Creating_a_file_uploader_in_your_component)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T16:13:22.780

正如 Tornado 所提到的，您可以使用 SWFUpload 脚本。但是，当我们尝试使用它时，由于文档不是很好，因此需要很长时间才能集成。因此决定基于此制作一个独立组件，该组件易于集成到第三方组件中，例如您的组件。如果你想使用它，你可以从这里下载：

[http://joomjunk.co.uk/products/component-home/swfupload.html](http://joomjunk.co.uk/products/component-home/swfupload.html)

还有一个小的文档选项卡，告诉您需要做什么以及要编辑哪些文件。

希望这可以帮助

# c# - 暂停 c# 程序几秒钟？

> ID：14158857
> 
> 赞同：-2
> 
> 时间：2013-01-04T14:19:41.710
> 
> 标签：c#, .net

我想暂停 C# 程序几秒钟，我不想使用 system.threading.thread.sleep，有没有其他方法可以暂停程序。

我想显示窗口一秒钟并自动最小化。我添加了两个计时器，一个用于最大化窗口，一个用于最小化；当窗口最大化时，如果我使用睡眠方法，我想在那里停留几秒钟，它不会在表单上显示文本。那么有什么方法可以暂停窗口几秒钟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T14:26:33.007

我想如果你不想使用`Sleep`唯一剩下的就是使用这样的计时器：

```
System.Timers.Timer timer1= new System.Timers.Timer(1000);
timer1.Elapsed += new ElapsedEventHandler(maximizeScreen);
timer1.Start();

private void maximizeScreen(object source, ElapsedEventArgs e) {
    //Do the maximizing

    //disable the timer
    ((System.Timers.Timer)source).Stop();

    System.Timers.Timer timer2= new System.Timers.Timer(2000);
    timer2.Elapsed += new ElapsedEventHandler(minimizeScreen);
    timer2.Start();
}

private void minimizeScreen(object source, ElapsedEventArgs e) {
    //Do the minimizing

    //disable the timer
    ((System.Timers.Timer)source).Stop();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T14:40:03.207

如果您使用的是 .NET 4.5，则可以使用[类](http://msdn.microsoft.com/en-us/library/dd235678.aspx)上的[`Delay`方法](http://msdn.microsoft.com/en-us/library/hh194845.aspx)等待预定的时间，如下所示：[`Task`](http://msdn.microsoft.com/en-us/library/dd235678.aspx)

```
private async void MaximizeScreenAsync(CancellationToken cancellationToken) 
{
    //Do the maximizing

    // Hold off for two seconds.
    await Task.Delay(TimeSpan.FromSeconds(2), cancellationToken);

    // Minimize the screen.
} 
```

请注意`cancellationToken`参数的使用，如果需要，您将传递一个[`CancellationToken`结构](http://msdn.microsoft.com/en-us/library/system.threading.cancellationtoken.aspx)（从 a 创建[`CancellationTokenSource`](http://msdn.microsoft.com/en-us/library/system.threading.cancellationtokensource.aspx)）来取消它。

该`MaximizeScreen`方法假定您最初是手动触发屏幕显示的。

此处的[`async`](http://msdn.microsoft.com/en-us/library/vstudio/hh156513.aspx)/[`await`](http://msdn.microsoft.com/en-us/library/vstudio/hh156528.aspx)关键字将确保调用后的代码`await Task.Delay`正确运行[`SynchronizationContext`](http://msdn.microsoft.com/en-us/library/system.threading.synchronizationcontext.aspx)（如果您正在执行 UI 操作，例如最小化和最大化窗口，这很重要。另请注意*，*如果您[`ConfigureAwait`使用](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.configureawait.aspx)`Task`从调用返回的)上的 false 参数`Task.Delay`。

请注意，对 的调用`MaximizeScreen`，因为它被标记为`async`，一旦调用到，就会立即返回`async Task.Delay`，所以你不应该期望屏幕在完成时被最小化。

如果您想等到屏幕完成，那么我建议您公开一个任务并等待它。

首先，修改签名以返回 a `Task`（没有其他变化）：

```
private async Task MaximizeScreenAsync(CancellationToken cancellationToken) 
```

然后在调用站点，只需调用返回的方法[`Wait`（](http://msdn.microsoft.com/en-us/library/dd321315.aspx)`Task`使用`CancellationToken`您传递给的方法`MaximizeScreenAsync`）：

```
MaximizeScreenAsync(cancellationToken).Wait(cancellationToken); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T14:37:02.430

您可能需要等待启动画面。这是一个简单的 windows 窗体，它显示一些文本消息并保持打开一段时间：

```
public partial class WaitWindow : Form
{
    System.Windows.Forms.Timer timer;

    public WaitWindow(int interval)
    {
        InitializeComponent();

        this.Shown += new EventHandler(WaitWindow_Shown);

        timer = new Timer();
        timer.Interval = interval;
        timer.Tick += new EventHandler(timer_Tick);
    }

    void WaitWindow_Shown(object sender, EventArgs e)
    {
        timer.Start();
    }

    void timer_Tick(object sender, EventArgs e)
    {
        timer.Stop();
        this.Close();
    }
} 
```

它使用计时器在给定的时间段内关闭。至少你可以这样使用它：

```
new WaitWindow(1000).ShowDialog(); 
```

在谈论 windows 窗体时，使用[System.Windows.Forms.Timer](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer%28v=vs.71%29.aspx)更合适：

> 此计时器针对在 Windows 窗体应用程序中的使用进行了优化，并且必须在窗口中使用。

而[System.Timers.Timer](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)：

> 基于服务器的 Timer 设计用于多线程环境中的工作线程。

# c# - 如何删除objectstatemanager中的重复实体

> ID：14158865
> 
> 赞同：2
> 
> 时间：2013-01-04T14:20:12.273
> 
> 标签：c#, vb.net, entity-framework

调用时`AcceptChanges`出现以下错误：

`AcceptChanges`无法继续，因为对象的键值与`ObjectStateManager`. 在调用之前确保键值是唯一的`AcceptChanges`。

现在我在网上搜索了很多，但没有找到我想要的答案。

我知道他们是按设计制作的，因此您应该防止通过使用 ID 而不是实体对象来添加已经存在的实体，但我处于无法做到这一点的情况。

我有一个导入和导出，这是通用的，我可以给任何实体对象，它会使其成为 xml 格式，相反，我可以给任何 xml 并获得正确的实体。我不能使用序列化程序，因为我必须以自定义格式制作 xml。

问题在于，当我有更深的嵌套实体之前可能已经添加到主实体中时，我无法当场检查它，所以它们被添加了。导致同一实体可能被多次添加的问题。

当我进一步领先并希望应用更改时，就会发生错误。

现在考虑在防止“多次添加同一实体”的问题上我没有选择 - 问题，我必须在添加它们后处理它。

如何从 中删除重复的实体`ObjectStateManager`，以便调用应用更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T14:39:38.277

> 如何从 ObjectStateManager 中删除重复的实体，以便调用应用更改？

`ObjectStateManager`只能通过搜索和解析重复项手动进行。这就是为什么您应该在将实体添加到事件处理程序`ObjectContext`或在`ObjectStateManager.ObjectStateManagerChanged`事件处理程序中之前解决该问题的原因。

无论如何，您问的是错误的问题。即使您从中删除重复的实体`ObjectStateManager`也无法解决问题。删除实体只会破坏您的对象图。您还需要修复对已删除实体的所有引用并将它们指向单个剩余实体实例。

这个问题通常由序列化/反序列化直接处理，如果你自己写，你也应该这样做。

# php - 未定义的偏移量：编辑函数中的 0

> ID：14158866
> 
> 赞同：0
> 
> 时间：2013-01-04T14:20:15.233
> 
> 标签：php, mysql, edit

我有这个工作，然后当我添加新类别`Quantity`时，它现在会产生这个错误。

```
Undefined offset: 0 in (the form values) 
```

我看不到未定义的偏移量在哪里。任何帮助，将不胜感激。

我也知道 mysql 已贬值，但希望它在更改之前工作。

请注意，所有数据都会在您处理它时被召回到编辑表单中，它会产生该错误

查询也已验证并运行。

**编辑功能**

```
function edit_product($id, $name, $description, $price, $quantity, $picture, $category) {

      $id           = (int) $id;  
      $category     = (int) $category;
      $name         = mysql_real_escape_string($name);
      $description  = mysql_real_escape_string($description);
      $price        = mysql_real_escape_string($price);
      $quantity     = (int) $quantity;
      $picture      = mysql_real_escape_string($picture);

      mysql_query("UPDATE `shop` SET 

      `prod_id`         = {$category},
      `name`            = '{$name}',
      `description`     = '{$description}',
      `price`           = '{$price}',
      `quantity`        = '{$quantity}',
      `picture`         = '{$picture}'
      WHERE `id`        = {$id}");

    echo mysql_error();
    } 
```

**编辑页面**

```
 $post = get_posts($_GET['id']);

    if ( isset($_POST['name'], $_POST['description'], $_POST['price'], $_POST['quantity'], $_POST['picture'], $_POST['category']) ) {
    $errors = array();

        $name           = trim($_POST['name']);
        $description    = trim($_POST['description']);
        $price          = trim($_POST['price']);
        $quantity       = trim($_POST['quantity']);
        $picture        = trim($_POST['picture']);

        if ( empty($name) ) {
            $errors[] = 'You need to supply a title';
        }   else if ( strlen($name) > 255 ) {
        $errors[] = 'Title cannot be longer than 255 characters';
        }

        if ( empty($description) ) {
        $errors[] = 'You need to supply text';
        }

        if ( empty($price) ) {
        $errors[] = 'You need to supply text';
        }

        if ( empty($quantity) ) {
        $errors[] = 'You need to supply text';
        }

        if ( empty($picture) ) {
        $errors[] = 'You need to supply text';
        }

        if (! category_exists('id', $_POST['category']) ) {
        $errors[] = 'Category does not exist';

        }

        if ( empty($errors) ) {
        edit_product($_GET['id'], $name, $description, $price, $quantity, $picture, $_POST['category']);
        header("Location: ../admin/edit_products.php?id={$post[0]['post_id']}");
        die();
        }
    }
    ?>

.....

<label for="name">Title</label>
<input type="text" name="name" value="<?php echo $post[0]['name']; ?>"><br/>
<label for="price">price</label>
<input type="text" name="price" value="<?php echo $post[0]['price']; ?>"><br/>

<label for="sale">Quantity</label>
<input type="text" name="quantity" value="<?php echo $post[0]['quantity']; ?>"><br/>
<label for="picture">Picture</label>
<input type="text" name="picture" value="<?php echo $post[0]['picture']; ?>"><br/>

<label for="description">Description</label>
<textarea  name="description" rows="15" cols="50"><?php echo $post[0]['description']; ?></textarea><br/>

<label for="prod_id">Category</label>
<select name="category">
<?php
foreach ( get_categories() as $category ) {
$selected = ( $category['name'] == $post[0]['name'] ) ? " selected" : '';
?>

<option value="<?php echo $category['id']; ?>" <?php echo $selected; ?>> <?php echo $category['name']; ?></option>

-------------- 
```

**获取发布功能** - 根据要求。

```
function get_posts($id = null, $cat_id = null) {
    $posts = array();

    $query ="SELECT  `shop`.`id` AS  `post_id` ,  `products_cat`.`id` AS  `category_id` , `shop`.`name` ,  `description` ,  `price` ,  `quantity` ,  `picture` 
FROM  `shop` 
INNER JOIN  `products_cat` ON  `shop`.`prod_id` =  `products_cat`.`id` ";

    if ( isset($id) ) {
    $id = (int) $id;
    $query .= " WHERE `shop`.`id` = {$id}";
    }

    if ( isset($cat_id) ) {
        $cat_id = (int) $cat_id;
        $query .= " WHERE `products_cat`.`id` = {$cat_id}";
}

    $query .= " ORDER BY `shop`.`price` DESC";

    $query = mysql_query($query);
    echo mysql_error();
    while ( $row = mysql_fetch_assoc($query) ) {
        $posts[] = $row;
        }

    return $posts;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T15:12:15.470

首先请不要使用 mysql_*并使用 mysqli_*

一会儿，在上面的代码中

```
Undefined offset: 0 error is cooming from lines as you said 

<input type="text" name="price" value="<?php echo $post[0]['price']; ?>"> 
```

这是因为该索引 $post[ **0** ]['price'] 的值尚未设置。

只需将其替换为

```
 <?php echo isset($post[0]['price'])?$post[0]['price']:''; ?> 
```

在值属性中。

希望对您有所帮助！

# typo3 - Typoscript：如何在选择子项时保持父菜单项状态处于活动状态

> ID：14158867
> 
> 赞同：0
> 
> 时间：2013-01-04T14:20:25.113
> 
> 标签：typo3, parent, typoscript

当孩子处于活动状态时，我希望父文本的菜单项为粗体，如何使用排版的 HMENU 进行排列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T08:20:42.973

ACT 是您必须寻找的：[http ://wiki.typo3.org/TSref/MENUITEM](http://wiki.typo3.org/TSref/MENUITEM)

如果这还不够，您可以随时使用用户功能。

# python - Python：跳过 csv.DictReader 中标有 # 的注释行

> ID：14158868
> 
> 赞同：81
> 
> 时间：2013-01-04T14:20:30.043
> 
> 标签：python, csv, comments

[使用csv.DictReader](http://docs.python.org/2/library/csv.html#csv.DictReader)处理 CSV 文件很棒 - 但我有带有注释行的 CSV 文件（在行首用哈希表示），例如：

```
# step size=1.61853
val0,val1,val2,hybridisation,temp,smattr
0.206895,0.797923,0.202077,0.631199,0.368801,0.311052,0.688948,0.597237,0.402763
-169.32,1,1.61853,2.04069e-92,1,0.000906546,0.999093,0.241356,0.758644,0.202382
# adaptation finished 
```

csv 模块[不包含任何跳过此类行的方法](http://bugs.python.org/issue1225769)。

我可以轻松地做一些 hacky 的事情，但我想有一种很好的方法可以将 a 包裹`csv.DictReader`在其他一些迭代器对象周围，它会预处理以丢弃这些行。

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2013-01-04T14:20:30.043

实际上，这很好地适用于`filter`：

```
import csv
fp = open('samples.csv')
rdr = csv.DictReader(filter(lambda row: row[0]!='#', fp))
for row in rdr:
    print(row)
fp.close() 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2018-05-29T20:13:20.680

好问题。Python 的 CSV 库缺乏对注释的基本支持（在 CSV 文件的顶部并不少见）。虽然 Dan Stowell 的解决方案适用于 OP 的特定情况，但它的局限性在于`#`必须作为第一个符号出现。更通用的解决方案是：

```
def decomment(csvfile):
    for row in csvfile:
        raw = row.split('#')[0].strip()
        if raw: yield raw

with open('dummy.csv') as csvfile:
    reader = csv.reader(decomment(csvfile))
    for row in reader:
        print(row) 
```

例如，以下`dummy.csv`文件：

```
# comment
 # comment
a,b,c # comment
1,2,3
10,20,30
# comment 
```

返回

```
['a', 'b', 'c']
['1', '2', '3']
['10', '20', '30'] 
```

当然，这同样适用于`csv.DictReader()`.

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2019-03-25T21:43:36.867

另一种读取 CSV 文件的方法是使用`pandas`

这是一个示例代码：

```
df = pd.read_csv('test.csv',
                 sep=',',     # field separator
                 comment='#', # comment
                 index_col=0, # number or label of index column
                 skipinitialspace=True,
                 skip_blank_lines=True,
                 error_bad_lines=False,
                 warn_bad_lines=True
                 ).sort_index()
print(df)
df.fillna('no value', inplace=True) # replace NaN with 'no value'
print(df) 
```

对于这个 csv 文件：

```
a,b,c,d,e
1,,16,,55#,,65##77
8,77,77,,16#86,18#
#This is a comment
13,19,25,28,82 
```

我们会得到这个输出：

```
 b   c     d   e
a                     
1    NaN  16   NaN  55
8   77.0  77   NaN  16
13  19.0  25  28.0  82
           b   c         d   e
a                             
1   no value  16  no value  55
8         77  77  no value  16
13        19  25        28  82 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-01T19:52:19.297

只需从@sigvaldm 的解决方案中发布错误修复。

```
def decomment(csvfile):
for row in csvfile:
    raw = row.split('#')[0].strip()
    if raw: yield row

with open('dummy.csv') as csvfile:
    reader = csv.reader(decomment(csvfile))
    for row in reader:
        print(row) 
```

CSV 行可以在带引号的字符串中包含“#”字符并且完全有效。以前的解决方案是切断包含“#”字符的字符串。

# lazarus - 控制台应用程序在使用 TProcess 运行时永远不会返回

> ID：14158870
> 
> 赞同：1
> 
> 时间：2013-01-04T14:20:32.537
> 
> 标签：lazarus, windows-console, fpc

我正在使用 Windows Server 2008，我想获取 DNS 服务器。所以我认为最快的方法应该是执行 ipconfig，然后使用 TProcess 解析它的输出。

我想出了这段代码：

```
 var
  proces : TProcess;
  begin
  ...
  proces := TProcess.Create(nil);
  proces.Executable := 'ipconfig';
  proces.Options := proces.Options + [poWaitOnExit,poUsePipes];
  try
  proces.Execute;
  except
        proces.Free;
  end;
  SetLength(rez,proces.Output.NumBytesAvailable);
  proces.Output.Read(rez[1],proces.Output.NumBytesAvailable);
  ShowMessage(rez); 
```

该代码有效，但是在我手动关闭控制台窗口后。我尝试过`poNoConsole`但结果仍然相同，进程 ipconfig 在任务管理器中仍然处于活动状态。

为什么控制台应用程序 ipconfig 没有终止？如果我运行它，它会在吐出标准输出信息后退出。

是我的配置吗？这是一个错误吗？帮助！谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T18:00:34.290

由于 ipconfig 可以生成大量输出，所以不要试图一口气读完，使用 wiki 中的[Reading large output](http://wiki.freepascal.org/Executing_External_Programs#Reading_large_output)方法。

FPC (2.6.2) 的下一次迭代将有一堆[runco​​mmand](http://svn.freepascal.org/cgi-bin/viewvc.cgi/trunk/packages/fcl-process/src/process.pp?view=markup)过程，它们为一系列常见情况检测 tprocess 并以单个字符串返回输出。

注意 API 解决方案也是可能的：

```
{$mode delphi}

uses  JwaIpExport, JwaIpRtrMib, JwaIpTypes,jwawinerror,classes,jwaiphlpapi;

procedure GetDNSServers(AList: TStringList);
var
  pFI: PFixed_Info;
  pIPAddr: PIPAddrString;
  OutLen: Cardinal;
begin
  AList.Clear;
  OutLen := SizeOf(TFixedInfo);
  GetMem(pFI, SizeOf(TFixedInfo));
  try
    if GetNetworkParams(pFI, OutLen) = ERROR_BUFFER_OVERFLOW then
    begin
      ReallocMem(pFI, OutLen);
      if GetNetworkParams(pFI, OutLen) <> NO_ERROR then Exit;
    end;
    // If there is no network available there may be no DNS servers defined
    if pFI^.DnsServerList.IpAddress.s[0] = #0 then Exit;
    // Add first server
    AList.Add(pFI^.DnsServerList.IpAddress.s);
    // Add rest of servers
    pIPAddr := pFI^.DnsServerList.Next;
    while Assigned(pIPAddr) do
    begin
      AList.Add(pIPAddr^.IpAddress.s);
      pIPAddr := pIPAddr^.Next;
    end;
  finally
    FreeMem(pFI);
  end;
end;

var v : TStringList; 
    s : string;
begin
 v:=tstringlist.create;
 getdnsservers(v);
 for s in v do writeln(s);   // this probably requires 2.6+
 v.free;
end. 
```

# ios - iOS：自定义权限警报视图文本

> ID：14158871
> 
> 赞同：15
> 
> 时间：2013-01-04T14:20:34.983
> 
> 标签：ios, uialertview

无论如何自定义权限警报视图，例如：联系人，相册，推送通知......在他们获得访问权限之前，他们会弹出一个警报视图，如下所示：

![在此处输入图像描述](../Images/9dfbad0e6905a48f3f7600c173eec578.png)

如何自定义联系人、相册、推送通知提醒查看文字？

更新：

![在此处输入图像描述](../Images/b977bf142ab20cff05eb73eff5f4073e.png)

看上面的更新图片，翻译成英文：

> “为了寻找您的家人和朋友，Path 需要将您的联系人转移到我们的服务器”

并单击确定以获取联系人访问权限，而不会弹出任何其他访问权限警报视图。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-04T16:55:04.657

在 iOS 6 及更高版本下，可以设置这些以显示特定消息。通过添加一些新条目来编辑您的 Info.plist。这些键都以“隐私-”开头（原始键是联系人、`NSxxxUsageDescription`位置`xxx`、提醒、PhotoLibrary 或日历的位置）。该值是您希望向用户显示的文本。

# perl - 查找最长的子列表

> ID：14158878
> 
> 赞同：0
> 
> 时间：2013-01-04T14:20:56.653
> 
> 标签：perl, shell, awk, grep, wc

我有一个包含列表和子列表的文件，我想使用命令行工具提取最长的子列表。

文件示例：

```
* Item1
** SubItem1
** ...
** SubItemN

* Item2
** SubItem1
** ...
** SubItemN

* ...
** ...

* ItemN
** SubItem1
** ...
** SubItemN 
```

我想知道这是否可以轻松完成，否则我将编写一个 Perl 脚本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T15:47:29.020

Perl 单行：

```
perl -00 -ne '$n=tr/\n/\n/; if ($n>$m) {$m=$n; $max=$_}; END {print $max}' file 
```

只需使用 bash：

```
max=0
while read bullet thingy; do
    case $bullet in
         "*") item=$thingy; count=0 ;;
        "**") ((count++)) ;;
          "") (( count > max )) && { max_item=$item; max=$count; } ;; 
    esac
done < <(cat file; echo)
echo $max_item $max 
```

`<(cat file; echo)`部分是保证文件最后一行后面有一个空行，这样最后的sublist group可以和max进行比较

那只会保持计数。要将项目保存在最大的子列表中：

```
max=0
while read bullet thingy; do
    case $bullet in
         "*") item=$thingy; unset sublist; sublist=() ;;
        "**") sublist+=($thingy) ;;
          "") if (( ${#sublist[@]} > max )); then
                  max=${#sublist[@]}
                  max_item=$item
                  max_sublist=("${sublist[@]}")
              fi
              ;;
    esac
done < <(cat file; echo)
printf "%s\n" "$max_item" "${#max_sublist[@]}" "${max_sublist[@]}" 
```

如果使用 sudo_O 的示例，则输出

```
letters
6
a
b
b
d
e
f 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T15:11:12.163

```
$ cat file    
* letters
** a
** b
** b
** d
** e
** f

* colors 
** red
** green
** blue

* numbers
** 1
** 2
** 3
** 4
** 5 
```

`tac`通过使用和使用反转文件来显示每个子列表的长度`awk`：

```
$ tac file | awk '/^\*\*/{c++}/^\*[^*]/{print c,$2;c=0}'
5 numbers
3 colors
6 letters 
```

仅打印最大子列表的长度：

```
$ tac file | awk '/^\*\*/{c++}/^\*[^*]/{if(c>m){m=c;l=$2}c=0}END{print m,l}'
6 letters 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T15:00:47.820

```
cat file.txt | grep -nE "^\*[^\*].*" | cut -d ":" -f 1,1 | tee tmp | awk 'NR==1{s=$1;next}    {print $1-s;s=$1}' > tmp2
echo 0 >> tmp2
res=`paste tmp tmp2 | sort -nrk 2,2 | head -n 1`
line=`echo "$res" | cut -f 1,1`
ln=`echo "$res" | cut -f 2,2`
cat file.txt | tail -n +$line | head -n $ln
rm tmp tmp2 
```

肯定有一个更短的解决方案:)

# python - Python：建议如何改进在 Python 中写入流式文本文件

> ID：14158880
> 
> 赞同：10
> 
> 时间：2013-01-04T14:20:57.547
> 
> 标签：python, performance, optimization, coding-style

我正在研究如何[在 python 中将流字符串作为文件](http://docs.python.org/2/library/io.html)写入。

通常我使用一个表达式作为

```
myfile = open("test.txt", w)
for line in mydata:
...     myfile.write(line + '\n')
myfile.close() 
```

Python 在目录中创建一个文本文件，并每隔一段时间逐块保存值。

我有以下问题：

是否可以设置缓冲区？（例如：每 20 MB 保存一次数据）是否可以逐行保存？

感谢您的建议，他们总是帮助改进

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-04T14:28:17.380

python 中的文件 I/O 已被缓冲。该[`open()`函数](http://docs.python.org/2/library/functions.html#open)允许您确定缓冲的扩展写入：

> 可选*`buffering`*参数指定文件所需的缓冲区大小：`0`表示未缓冲，`1`表示行缓冲，任何其他正值表示使用（大约）该大小的缓冲区。使用系统默认值的否定*`buffering`*方式，通常为 tty 设备行缓冲，为其他文件完全缓冲。如果省略，则使用系统默认值。

就个人而言，我会通过`with`语句将该文件用作上下文管理器。一旦`with`套件下的所有语句（至少一个缩进级别更深）完成*或*引发异常，文件对象就会关闭：

```
with open("test.txt", 'w', buffering=20*(1024**2)) as myfile:
    for line in mydata:
        myfile.write(line + '\n') 
```

在上面的示例中，我将缓冲区设置为 20 MB。

# java - Tomcat 7 上的 Spring Stack web-app 没有停止（需要强制终止）

> ID：14158881
> 
> 赞同：0
> 
> 时间：2013-01-04T14:21:03.460
> 
> 标签：java, spring, tomcat, tomcat7

我遇到了一个问题，tomcat 在不时请求时没有停止，我必须手动终止该进程。我使用的是标准弹簧堆栈（JPA，MVC）。这并不总是发生，只有大约 70% 的时间。我在 Windows、OSX 和 Linux 平台上都看到过这种情况……

任何想法为什么会发生这种情况.. 在下面的日志中，您将看到 2 个 SERVERE 日志条目，但从这个问题：[为了防止内存泄漏，JDBC 驱动程序已被强制注销](https://stackoverflow.com/questions/3320400/to-prevent-a-memory-leak-the-jdbc-driver-has-been-forcibly-unregistered)似乎说这不是 Tomcat 的问题所以它留下了软参考..

任何想法为什么这可以阻止tomcat关闭？

**编辑**：关于进一步的建议和分析 - 看起来 apache HTTP 客户端正在使用 DateUtils 类，该类又创建一个 ThreadLocal 实例。我们的代码使用 HTTP 客户端对外部服务进行分类......当然这应该是一个非常如果它驻留在 Apache HTTP 客户端中的常见问题，因为使用它来调用外部 HTTP 端点并不少见？

日志输出下方的线程转储

谢谢，

伊恩。

```
-2013-01-04 09:18:33,189 DEBUG [http-bio-9999-exec-8] view.InternalResourceView (InternalResourceView.java:236) - Forwarding to resource [/WEB-INF/views/auth/login.jsp] in InternalResourceView 'auth/login'
2013-01-04 09:18:33,191 DEBUG [http-bio-9999-exec-8] servlet.FrameworkServlet (FrameworkServlet.java:913) - Successfully completed request
Jan 04, 2013 9:18:33 AM org.apache.catalina.core.StandardServer await
INFO: A valid shutdown command was received via the shutdown port. Stopping the Server instance.
Jan 04, 2013 9:18:33 AM org.apache.coyote.AbstractProtocol pause
INFO: Pausing ProtocolHandler ["http-bio-9999"]
Jan 04, 2013 9:18:33 AM org.apache.coyote.AbstractProtocol pause
INFO: Pausing ProtocolHandler ["ajp-bio-8009"]
Jan 04, 2013 9:18:33 AM org.apache.catalina.core.StandardService stopInternal
INFO: Stopping service Catalina
2013-01-04 09:18:33,409 INFO  [localhost-startStop-2] support.AbstractApplicationContext (AbstractApplicationContext.java:1025) - Closing WebApplicationContext for namespace 'test-servlet': startup date [Thu Jan 03 17:56:22 GMT 2013]; parent: Root WebApplicationContext
2013-01-04 09:18:33,409 DEBUG [localhost-startStop-2] support.AbstractBeanFactory (AbstractBeanFactory.java:245) - Returning cached instance of singleton bean 'org.springframework.context.annotation.internalScheduledAnnotationProcessor'
2013-01-04 09:18:33,410 DEBUG [localhost-startStop-2] support.AbstractBeanFactory (AbstractBeanFactory.java:245) - Returning cached instance of singleton bean 'lifecycleProcessor'
2013-01-04 09:18:33,410 INFO  [localhost-startStop-2] support.DefaultSingletonBeanRegistry (DefaultSingletonBeanRegistry.java:433) - Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@37f293d3: defining beans []; parent: org.springframework.beans.factory.support.DefaultListableBeanFactory@2f701b4e
log4j:WARN No appenders could be found for logger (org.springframework.web.context.support.AnnotationConfigWebApplicationContext).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.
Jan 04, 2013 9:18:33 AM org.apache.catalina.loader.WebappClassLoader clearReferencesJdbc
SEVERE: The web application [] registered the JDBC driver [com.mysql.jdbc.Driver] but failed to unregister it when the web application was stopped. To prevent a memory leak, the JDBC Driver has been forcibly unregistered.
Jan 04, 2013 9:18:33 AM org.apache.catalina.loader.WebappClassLoader checkThreadLocalMapForLeaks
SEVERE: The web application [] created a ThreadLocal with key of type [org.apache.http.impl.cookie.DateUtils$DateFormatHolder$1] (value [org.apache.http.impl.cookie.DateUtils$DateFormatHolder$1@3f94bcde]) and a value of type [java.lang.ref.SoftReference] (value [java.lang.ref.SoftReference@3dfbb36e]) but failed to remove it when the web application was stopped. Threads are going to be renewed over time to try and avoid a probable memory leak.
Jan 04, 2013 9:18:33 AM org.apache.coyote.AbstractProtocol stop
INFO: Stopping ProtocolHandler ["http-bio-9999"]
Jan 04, 2013 9:18:33 AM org.apache.coyote.AbstractProtocol stop
INFO: Stopping ProtocolHandler ["ajp-bio-8009"]
Jan 04, 2013 9:18:33 AM org.apache.coyote.AbstractProtocol destroy
INFO: Destroying ProtocolHandler ["http-bio-9999"]
Jan 04, 2013 9:18:33 AM org.apache.coyote.AbstractProtocol destroy
INFO: Destroying ProtocolHandler ["ajp-bio-8009"] 
```

--线程转储-----

> 在 org.apache.http.impl.cookie.DateUtils$DateFormatHolder$1.initialValue(DateUtils.java:220) 在 org.apache.http.impl.cookie.DateUtils$DateFormatHolder$1.initialValue(DateUtils.java:219) 在 java .lang.ThreadLocal.setInitialValue(ThreadLocal.java:160)
> at java.lang.ThreadLocal.get(ThreadLocal.java:150) at org.apache.http.impl.cookie.DateUtils$DateFormatHolder.formatFor(DateUtils.java:239 ) 在 org.apache.http.impl.cookie.DateUtils.parseDate(DateUtils.java:156)
> 在 org.apache.http.impl.cookie.DateUtils.parseDate(DateUtils.java:114) 在 org.apache.http.impl.cookie.BasicExpiresHandler.parse(BasicExpiresHandler.java:61) 在 org.apache.http.impl .cookie.CookieSpecBase.parse(CookieSpecBase.java:93) 在 org.apache.http.impl.cookie.BestMatchSpec.parse(BestMatchSpec.java:135) 在 org.apache.http.client.protocol.ResponseProcessCookies.processCookies(ResponseProcessCookies .java:114) 在 org.apache.http.protocol.ImmutableHttpProcessor.process(ImmutableHttpProcessor.java:116) 在 org.apache.http.protocol.ImmutableHttpProcessor.process(ImmutableHttpProcessor.java:116) 在 org.apache.http.client.protocol.ResponseProcessCookies.process(ResponseProcessCookies.java:95)。 http.protocol.HttpRequestExecutor.postProcess(HttpRequestExecutor.java:342) 在 org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:462) 在 org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:754) 在 org.apache.http .impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:732)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T14:31:18.290

It seems that your code uses `[org.apache.http.impl.cookie.DateUtils$DateFormatHolder$]` at some point. [This old question](https://stackoverflow.com/questions/10415113/threadlocal-memory-leak-in-threadpool) tells that HttpClient may be issueing the reference.

So you need to look for code, that is using HttpClient - and be sure to cleanup any `Thread` or HttpClient related resources on contextDestroy.

Look at threads in your application, that use HttpClient, you should verify that these threads get stopped properly on shutdown.

# android - 如何在android中同时查询外部和内部存储

> ID：14158884
> 
> 赞同：2
> 
> 时间：2013-01-04T14:21:15.550
> 
> 标签：android, storage, media

我想从存储卡和手机内存中获取所有媒体文件/歌曲的列表。有没有办法做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T14:28:51.450

### 内容解析器方式--> MediaStore.Audio

`Querying the Content Provider through Content Resolver` `Implement proper ListView and add the data which you get after querying Content resolver to ListView via Adapter`

```
 String[] columns = { android.provider.MediaStore.Audio.Albums._ID,
    android.provider.MediaStore.Audio.Albums.ALBUM };
    cursor = managedQuery(MediaStore.Audio.Albums.EXTERNAL_CONTENT_URI,columns, null, null, null);
    String[] displayFields = new String[] { MediaStore.Audio.Albums.ALBUM };
    int[] displayViews = new int[] { android.R.id.text1 };
   setListAdapter(new SimpleCursorAdapter(this,android.R.layout.simple_list_item_1, cursor, displayFields,displayViews)); 
```

* * *

### 传统方式 :: 扫描 SD 卡中的 .mp3 文件

使用以下代码获取 sdcard 目录的路径。

```
File root = Environment.getExternalStorageDirectory();
String rootPath= root.getPath(); 
```

从 rootPath 位置，您可以构建 SD 卡上任何文件的路径。例如，如果在 处有图像`/DCIM/Camera/a.jpg`，则绝对路径为`rootPath + "/DCIM/Camera/a.jpg".`

但是，要列出 SDCard 中的所有文件，您可以使用以下代码

```
String listOfFileNames[] = root.list(YOUR_FILTER); 
```

`listOfFileNames`将具有 SD 卡中存在的所有文件的名称，并通过过滤器设置的标准。

假设您只想列出 mp3 文件，然后将以下过滤器类名称传递给 list() 函数。

```
FilenameFilter mp3Filter = new FilenameFilter() {
File f;
public boolean accept(File dir, String name) {

    if(name.endsWith(".mp3")){
    return true;
    }

    f = new File(dir.getAbsolutePath()+"/"+name);

    return f.isDirectory();
  }
}; 
```

# jsf - 将项目添加到请求范围 Bean 中的列表

> ID：14158885
> 
> 赞同：2
> 
> 时间：2013-01-04T14:21:21.820
> 
> 标签：jsf, scope, cdi

我有一个如下的支持bean：

```
@Named
@RequestScoped
public class ClientNewBackingBean {

    @Inject
    private ClientFacade facade;
    private Client client; 
```

该类`Client`具有一个`List<Child> childrenList`属性，等等。`Client`设置`childrenList`with时，我可以创建一个新的`new ArrayList()`。

在视图中，我有一个输入文本字段和一个`Add Child`按钮。该按钮的属性`actionListener=#{clientNewBackingBean.addChild()}`实现为：

```
public void addChild() {

    if(client.getChildrenList() == null) {
        client.getChildrenList(new ArrayList());
    }

    Child c = new Child("John Doe");

    client.getChildrenList().add(c);
} 
```

每次`Add Child`单击按钮时，都会重新创建 bean，并且视图只显示一个 John Doe 孩子（我相信，由于它是 Request 范围的）。除了将bean范围更改为Session之外，还有其他方法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-04T14:27:07.770

如果您使用标准的 JSF bean 管理注释`@ManagedBean`，您可以通过将 bean 放在视图范围中来解决它[`@ViewScoped`](http://docs.oracle.com/javaee/6/api/javax/faces/bean/ViewScoped.html)。

```
@ManagedBean
@ViewScoped
public class ClientNewBackingBean implements Serializable {

    @EJB
    private ClientFacade facade;

    // ... 
```

然而，在 CDI`@ViewScoped`中不存在，最接近的替代方案是[`@ConversationScoped`](http://docs.oracle.com/javaee/6/api/javax/enterprise/context/ConversationScoped.html). 您只需要自己启动和停止它。

```
@Named
@ConversationScoped
public class ClientNewBackingBean implements Serializable {

    @Inject
    private Conversation conversation;

    // ...

    @PostConstruct
    public void init() {
        conversation.begin();
    }

    public String submitAndNavigate() {
        // ...

        conversation.end();
        return "someOtherPage?faces-redirect=true";
    }

} 
```

您还可以使用 CDI 扩展[MyFaces CODI](http://myfaces.apache.org/extensions/cdi/)，它将透明地桥接 JSF`@ViewScoped`注释，以便与`@Named`：

```
@Named
@ViewScoped
public class ClientNewBackingBean implements Serializable {

    @Inject
    private ClientFacade facade;

    // ... 
```

CODI 替代方案是使用`@ViewAccessScoped`它，只要后续请求引用相同的托管 bean，就可以使用它，而与使用的物理视图文件无关。

```
@Named
@ViewAccessScoped
public class ClientNewBackingBean implements Serializable {

    @Inject
    private ClientFacade facade;

    // ... 
```

### 也可以看看：

*   [如何选择合适的bean范围？](https://stackoverflow.com/questions/7031885/how-to-choose-the-right-bean-scope/7031941#7031941)
*   [推荐的 JSF 2.0 CRUD 框架](https://stackoverflow.com/questions/3180400/recommended-jsf-2-0-crud-frameworks/3180885#3180885)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T14:25:02.587

如果您使用的是 JSF 2，则应该使用`ViewScoped`bean。

# mysql - SQL 乘法查询

> ID：14158891
> 
> 赞同：3
> 
> 时间：2013-01-04T14:21:38.197
> 
> 标签：mysql, sql, sum

我正在尝试进行乘法求和，但似乎无法找出为什么它不起作用。我找到了天数，但现在需要将其乘以每日费用。

任何人都可以帮忙吗？

```
SELECT `Daily_Charge`, DATEDIFF(End_Date,Start_Date) AS `Total`, 
`Total`*Daily_Charge AS `Done` FROM `Car`,`Contract` WHERE `Contract_Id`="1"; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T14:23:08.403

您只能在查询的后面的子句中使用别名，而不能在 select 子句本身中使用。采用

```
SELECT `Daily_Charge`,
        DATEDIFF(End_Date,Start_Date) AS `Total`, 
        DATEDIFF(End_Date,Start_Date) * Daily_Charge AS `Done`
FROM `Car`,`Contract`
WHERE `Contract_Id`='1'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T14:23:58.950

您不能在另一个列定义中使用列别名，您需要再次编写公式：

```
SELECT `Daily_Charge`, DATEDIFF(End_Date,Start_Date) AS `Total`, 
       DATEDIFF(End_Date,Start_Date)*Daily_Charge AS `Done` 
FROM `Car`,`Contract` 
WHERE `Contract_Id`="1" 
```

或者，您可以在子查询中执行公式，并在计算中使用这些列，例如：

```
SELECT `Daily_Charge`, `Total`,  `Total`*Daily_Charge AS `Done` 
FROM (SELECT `Daily_Charge`, DATEDIFF(End_Date,Start_Date) AS `Total`, 
      FROM `Car`,`Contract` 
      WHERE `Contract_Id`="1") as Source 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T14:29:06.733

根据[MySQL - 列别名问题](http://dev.mysql.com/doc/refman/5.5/en/problems-with-alias.html)

> 可以在查询选择列表中使用别名来为列指定不同的名称。您可以在**GROUP BY**、**ORDER BY**或**HAVING**子句中使用别名来引用列：
> ...标准 SQL 不允许在**WHERE**子句
> 中引用列别名。施加此限制是因为在评估**WHERE**子句时，可能尚未确定列值。 ...

 ****正如其他人已经指出的那样，只需复制[`datediff`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_datediff)公式即可。****

# c# - Ms Sync Framework Partial Participant for a Disconnected environment

> ID：14158895
> 
> 赞同：0
> 
> 时间：2013-01-04T14:21:44.017
> 
> 标签：c#, .net-4.0, microsoft-sync-framework

我有一种情况，我需要实现部分参与者，即将数据从中央服务器（sql server）同步到（xml、mdf 或可移动数据源）。然后，这个可移动的数据源将被复制到远程位置，并将同步到远程服务器（sql server）。请注意，我已经为使用 WCF（完全代理参与者）的连接环境实施了 MS Sync Frame work 2 解决方案。关于如何开始部分参与者方案的任何指示或示例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T01:45:19.930

如果它不是一个非常大的数据库，您可以将 SQL Compact 数据库同步到您的中央服务器，将 SQL Compact DB 发送到远程位置并与远程服务器同步，反之亦然。

# c++ - 为什么要为 std::forward_list 拼接整个列表或线性范围？

> ID：14158896
> 
> 赞同：10
> 
> 时间：2013-01-04T14:21:48.493
> 
> 标签：c++, list, c++11, forward-list

可以在恒定时间内完成从一个列表到另一个列表的拼接，但代价是使`size()`' 的复杂性呈线性。

C++11`std::list`通过要求`size()`恒定时间改变了这一点。例如，这破坏了 gcc 的实现，请参阅[[C++0x] std::list::size complex](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=49561)。

除了 range 之外`splice()`，**还有什么其他原因** `size()` **不能在早期的符合 C++03 的** `std::list` **实现中设为恒定时间吗？**

**为什么拼接整个列表或范围是线性的** `std::forward_list`**？**

参见[`splice_after()`](http://en.cppreference.com/w/cpp/container/forward_list/splice_after)案例 (1) 和 (3)。另见[标准草案 N3485](https://github.com/cplusplus/draft)中的 23.3.4.6 forward_list 操作 [forwardlist.ops] 。`std::forward_list`甚至没有`size()`实现。

我知道 forward_list 是一个单链表，但我不明白为什么不能`splice_after()`在恒定时间内完成该范围。我可能在这里遗漏了一些微不足道的东西......

* * *

**编辑：**好的，至少部分是我的误解，我预计 4**不会**保留在源列表中。代码：

```
#include <algorithm>
#include <iostream>
#include <forward_list>

using namespace std;

void dump_list(const forward_list<char>& l) {
    for(char c : l)
        cout << c << ' ';
    cout << '\n';
}

int main()
{
    forward_list<char> trg = {'a','b','c'};
    forward_list<char> src = {'1','2','3','4'};

    auto first = src.begin();
    auto last  = find(src.begin(), src.end(), '4');
    cout << "first = " << *first << ", last = " << *last << "\n\n";

    trg.splice_after(trg.begin(), src, first, last);

    cout << "Target after splice:\n";
    dump_list(trg);

    cout << "Source after splice:\n";
    dump_list(src);

    cout << endl;
    return 0;
} 
```

输出：

```
first = 1, last = 4
Target after splice:
a 2 3 b c
Source after splice:
1 4 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T14:41:29.873

在 forward_list 的情况下，如何使范围 splice_after 保持恒定时间？在源列表中，您只有迭代器。要从源正向链表中删除节点，您将需要紧接在之前的节点`last`，因此您需要在源中线性搜索该链表节点。`first`因此，为什么它在和之间的距离上是线性的`last`

使用整个源列表的版本仍然需要搜索紧接在源末尾之前的节点，这样就可以修改为指向目标中拼接后的元素。所以它还需要源大小的线性时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T15:11:35.273

`size`范围拼接是在以前的 C++ 标准中不是恒定时间的唯一原因。事实上，Sun CC 编译器选择了使`size`常数时间和*所有*版本的`splice`线性。

拼接整个前向列表是线性的，因为您必须遍历要合并的列表才能将其最后一个节点链接回您要拼接的列表。我无法弄清楚为什么范围拼接是线性的。

编辑：正如@Xeo 指出的那样，基于范围的版本也需要线性时间，因为`last`它不包含在范围内，它需要搜索 from`first` 以找到*before* `last`的迭代器。

# ios - 在哪里可以找到有关如何使用 iOS+Blender 3D (Maya)+Unity（或其他）开发游戏的任何信息\教程？

> ID：14158899
> 
> 赞同：-1
> 
> 时间：2013-01-04T14:22:20.573
> 
> 标签：ios, 3d, unity3d, blender, maya

想在 iOS 上创建游戏，但不知道用什么更好 - Blender\Maya 和 Unity\UDK\Cocos ？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T14:30:45.067

我建议使用 Unity，因为一旦你得到它，它就很容易使用。

如果您想了解这一点，请尝试使用 Unity 的本教程系列。 [http://www.youtube.com/watch?v=QMWhtKjUr10](http://www.youtube.com/watch?v=QMWhtKjUr10)

# sql-server-2008 - sp_dropsubscription 当前命令出现严重错误

> ID：14158900
> 
> 赞同：4
> 
> 时间：2013-01-04T14:22:26.387
> 
> 标签：sql-server-2008, replication

我使用的帐户是 db_owner 数据库角色的成员。我运行以下命令来尝试删除订阅：

```
Exec sp_dropsubscription  
  @publication = 'MyPublication',
  @article = 'MyArticle',  
  @subscriber =  'all',  
  @destination_db = null 
```

上面的语句返回以下错误：

```
Msg 0, Level 11, State 0, Line 0
A severe error occurred on the current command.  The results, if any, should be discarded. 
```

但是，即使出现错误，订阅似乎也已成功删除。为什么我会收到此错误？操作的某些部分是否失败？

如果我将登录名提升为 sysadmin，它会成功运行——但是，这个登录名不应该是 sysadmin，所以这不是一个解决方案。

这发生在 SQL 2008 SP3 (10.0.5768.0) (X64) 上

根据 MSDN 文章 (http://msdn.microsoft.com/en-us/library/ms184385.aspx)，用户应该具有基于 dbo 的权限：“只有 sysadmin 固定服务器角色的成员，db_owner 固定数据库角色，或者创建订阅的用户可以执行 sp_dropsubscription。”

# excel - 'on error goto 0' 和 'on error goto -1' 之间的区别——VBA

> ID：14158901
> 
> 赞同：44
> 
> 时间：2013-01-04T14:22:25.657
> 
> 标签：excel, vba, msdn

谁能在 VBA 中找到“On error goto -1”和“on error goto 0”之间的区别？我已经尝试过 google 和 msdn，但我没有运气。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-01-04T15:29:22.553

`On Error GoTo 0`禁用过程中当前存在的任何错误捕获。

`On Error GoTo -1`清除错误处理并将其设置为空，这样您就可以创建另一个错误陷阱。

**示例：错误转到 -1**

在引发第一个错误后，它将`GoTo ErrorFound`清除例程的错误处理并设置一个新的错误处理，`GoTo AnotherErrorFound`当发现错误时。

```
Sub OnErrorGotoMinusOneTest()

    On Error GoTo ErrorFound

    Err.Raise Number:=9999, Description:="Forced Error"

    Exit Sub

ErrorFound:

    On Error GoTo -1 'Clear the current error handling
    On Error GoTo AnotherErrorFound 'Set a new one
    Err.Raise Number:=10000, Description:="Another Forced Error"

AnotherErrorFound:

    'Code here

End Sub 
```

**示例：错误转到 0**

引发第一个错误后，您将收到错误，因为错误处理已被禁用。

```
Sub OnErrorGotoZeroTest()

    On Error GoTo 0

    Err.Raise Number:=9999, Description:="Forced Error"

End Sub 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2015-06-23T04:50:35.207

这个答案解决了错误对象和错误处理程序之间的混淆。

可以使用 清除错误**对象**`Err.Clear`。这不会影响错误处理程序。

使用启用**错误处理程序**`On Error Goto <label>`。当发生错误时，它变为活动状态。

当错误处理程序**处于活动状态**时，您不能分配新的错误处理程序。`On Error Goto <label>`不会有任何影响。VBA 只是忽略分配新错误处理程序的尝试。

使用`Err.Clear`不会取消错误处理程序。

跳转到代码中的不同位置 using`Goto <label>`不会取消错误处理程序。在错误处理块中使用`Goto <label>`可能会导致混淆，应该避免。您可能认为错误处理程序不再处于活动状态，而实际上它仍然处于活动状态。

活动错误处理程序的效果是您不能分配新的错误处理程序。`On Error Goto <label>`不会有任何影响。VBA 只是忽略分配新错误处理程序的尝试。当错误处理程序处于活动状态时，任何其他错误都将被取消处理。

退出活动错误处理程序的唯一方法是：

1.  `Resume`
2.  `Resume Next`
3.  `Resume <label>`
4.  `On error goto -1`
5.  退出程序

使用其中任何一种方式退出错误处理程序也将清除错误对象。

优秀来源：[VBA 芯片中的 Pearson 错误处理](http://www.cpearson.com/excel/errorhandling.htm)`On error goto -1`Pearson在他的文章中没有提到。引用他的话：

> 我故意不包括 On Error GoTo -1，因为它没有真正的用途，并且可以锁定整个 Excel 应用程序，除非以完全正确的方式使用。是的，On Error GoTo -1 在语法上是有效的，但这就像给醉酒的少年一把枪。不会有任何好处。

您还可以使用错误对象在不使用错误处理程序的情况下内联处理错误：[MSDN 内联错误处理](https://msdn.microsoft.com/en-gb/library/aa242093%28v=vs.60%29.aspx)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-06-23T08:55:50.193

重要的是要意识到当 VBA 中发生错误时会发生两种不同的事情。

1.  错误对象设置了它的属性（即 err.number、err.desciption、err.source 等）

2.  下一行要执行的更改。
    执行哪一行取决于最后执行的“On Error Goto”语句（如果有）。

这些是独立但高度相关的主题，您将编写实际上不同但相互交织的代码来管理它们。

当发生任何错误或您使用 Err.Raise 时，总是会设置 Err 对象。即使使用了“On Error Resmue next”或任何其他 On error 语句。

所以总是可以使用这样的代码：

```
Dim i as integer 
On error resume next 
i = 100/0  ' raises error
if err.number <> 0 then 
   ' respond to the error
end if 
```

意识到当错误对象的 err.number 具有非零值时，会引发异常，并且如果您尝试执行任何“On Error Goto”语句，这样做将引发错误并且执行将是非常重要的传递给调用当前过程的任何代码。（或者在没有被任何代码调用的情况下，给出通常的 VBA 错误对话框）。请注意，在这种情况下，“On Error Goto ALabel1”不会将下一行更改为带有 Label1: 的行。

例如

```
Sub ErrorTest()

    Dim dblValue        As Double

    On Error GoTo ErrHandler1
    dblValue = 1 / 0

ErrHandler1:
    debug.print "Exception Caught"
    debug.print Err.Number

    On Error GoTo ALabel1
    dblValue = 1 / 0

Exit sub
ALabel1:
    debug.print "Again caught it."

End Sub 
```

一旦 err.number 属性设置为非零，您可以通过使用将其重置为零

```
On Error Goto -1 
```

请注意， Err.Clear 也将其重置为零，但实际上等效于：

```
On Error Goto -1 
On Error Goto 0 
```

即 Err.Clear 删除当前存在的“On Error Goto”。因此，因此最好使用：

```
On Error Goto -1 
```

与使用 Err.clear 一样，您经常需要编写

```
Err.Clear
On Error Goto MyErrorHandlerLabel 
```

值得注意的是，每当执行任何类型的 Resume 语句、Exit Sub、Exit Function、Exit Property 或任何 On Error 语句时，VBA 都会隐式执行 Err.Clear。

您还可以将错误对象设置为您喜欢使用的任何数字

Err.Raise Number:=, Source:=, Description:=

Err.Raise 非常重要，因为它允许您将错误传播到调用程序并引发您自己的错误编号，称为“用户定义的错误”，这提供了一种告诉调用程序由于逻辑原因它无法继续的方法。（例如，违反了业务规则）。

您可以使用以下语句控制接下来执行哪一行代码

On Error Goto ALabelName On Error Goto ANonZeroLineNumber and On Error Goto 0 ' 这是一种特殊情况，因为它实际上表示“在当前范围内（通常是子或函数），如果发生错误，将错误对象传递回调用当前子或函数的代码。

VBA 中的错误处理很棘手，尤其是 MSDN 页面并没有真正给出如何使用错误处理的完整示例。

# android - 在“待机”期间保持 SensorEventListener

> ID：14158905
> 
> 赞同：1
> 
> 时间：2013-01-04T14:22:50.980
> 
> 标签：android, accelerometer, android-sensors, wakelock, standby

我正在构建一个需要一直监听加速度计的应用程序，即使应用程序不在前台也是如此。（在这一点上，我想澄清一下，这不是 Play 商店的应用程序。这是一个用于内部使用的特定用途的应用程序，其中电池消耗不是什么大问题 - 另外，如果有人知道另一种方法来检查是否用户正在走路，请告诉我）

为了实现这一点，我创建了一个`BroadcastReceiver`监听`android.intent.action.BOOT_COMPLETED`并启动一个注册`SensorEventListener`. 该服务获得 a `PARTIAL_WAKE_LOCK`，我希望有了这个锁，`SensorEventListener`仍然会收到`onChange()`回调，但这并没有发生。然而，随着`FULL_WAKE_LOCK`它的工作 - 但我不想让屏幕保持打开状态，用户也可以按下待机按钮......在我的调试会话中，我从未看到服务被破坏，因此，唤醒锁永远不应该释放。

这`Service`是获取锁并注册传感器的类：

```
public class WalkingDetectorService extends Service {

    private static PowerManager.WakeLock wakeLock = null;
    private static final String LOCK_TAG = "WALKING_DETECTOR";

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }

    @Override
    public void onCreate() {
        super.onCreate();
        acquireLock(this);
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
            // started on boot from a BroadcastReceiver
        startMotionDetector(getApplication());
        return START_STICKY;
    }

    @Override
    public void onDestroy() {
        releaseLock();
        super.onDestroy();
    }

    private void startMotionDetector(Application application) {

        int sensitivityIdx = SettingsManager.getInt(application, SettingsManager.SETTING_SENSOR_SENSITIVITY);

        if (sensitivityIdx == -1) {
            sensitivityIdx = MotionSensor.DEFAULT_SENSITITY_IDX;
        }

        float fSens = MotionSensor.getSensivity(sensitivityIdx);

        //SensorEventListener is registered here. It is properly done. Only stops listen when screen goes off (by timeout or user pressing the standby button)
            MotionSensor.startMotionSensor(application, fSens);

    }

    public static synchronized void acquireLock(Context ctx) {
        if (wakeLock == null) {
            PowerManager mgr = (PowerManager) ctx.getSystemService(Context.POWER_SERVICE);
            wakeLock = mgr.newWakeLock(PowerManager.FULL_WAKE_LOCK, LOCK_TAG);
            wakeLock.setReferenceCounted(true);
        }
        wakeLock.acquire();
    }

    public static synchronized void releaseLock() {
        if (wakeLock != null) {
            if (wakeLock.isHeld())
            {
                wakeLock.release();
            }
        }
    }
} 
```

我想我提供了从您那里获得帮助所需的所有信息。如果您觉得有一些有用的代码，我将很乐意合作！谢谢

# delphi - Delphi XE3 在 IDE 或调试版本中运行时出现 Indy 10 错误，而不是发布版本

> ID：14158906
> 
> 赞同：1
> 
> 时间：2013-01-04T14:22:51.957
> 
> 标签：delphi, indy10, delphi-xe3

运行代码以连接到 TLama 提供的 Gmail 时， [如何使用 TIdIMAP4 登录到 Gmail 帐户并获取邮箱中的邮件数量？](https://stackoverflow.com/questions/13604389/login-to-gmail-with-indy-imap)它在 Delphi 5 和 Delphi 2007 中运行得非常好。

我在 Delphi XE3 上尝试了相同的代码，但奇怪的是，当我在 IDE 中或直接从文件资源管理器启动在 \win32\debug 目录中生成的 exe 时，我得到了“套接字错误 #10061 连接被拒绝”错误。如果我启动在 \Win32\release 目录中生成的 .exe，它可以正常工作！

我试图将 ssleay32.dll 和 libeay32.dll 放在各种目录中，但它仍然不起作用，我不确定它是否与此有关。

Delphi XE3 上的 Indy 版本为 10.5.9.0。（最初随我的 Delphi XE3 Update 1 一起提供）。

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T21:03:28.840

套接字错误 10061 表示以下两种情况之一：

1.  您尝试连接到根本不侦听连接的 IP/端口。

2.  您尝试连接到正在侦听连接的 IP/端口，但在该特定时刻没有任何可用插槽来接受新的客户端连接。

在客户端无法区分这两种可能性。

Indy 在 Debug 与 Release 版本中管理其套接字的方式应该没有区别。您看到的问题与 DLL 无关，因为直到首先建立底层套接字连接之后才会调用它们（但是，如果需要，您可以`IdOpenSSLSetLibPath()`在单元中使用 Indy 的函数`IdSSLOpenSSLHeaders`来告诉 Indy DLL 的位置） .

`Port`调用时仔细检查属性`Connect()`。设置`UseTLS`属性实际上可以更改`Port`值。如果您需要设置这两个属性，`UseTLS`请先设置，然后设置`Port`是否需要使用与 Indy 分配的值不同的值。

# android - ListView 页脚内输入单击的侦听器

> ID：14158907
> 
> 赞同：0
> 
> 时间：2013-01-04T14:22:53.150
> 
> 标签：android

我想在我的 listView 中有一个编辑文本作为页脚，这样我就可以添加评论。我可以将edittext添加到列表视图没有问题，但我设置的侦听器没有收到任何事件。任何想法为什么？

```
 editText = new EditText(getActivity());
    editText.setHint("add comment");
    editText.setBackgroundColor(Color.GRAY);
    getListView().addFooterView(editText);
    editText.setImeOptions(EditorInfo.IME_ACTION_DONE);
    editText.setOnEditorActionListener(new TextView.OnEditorActionListener() {
        @Override
        public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
            Log.d(DetailFragment.class.getSimpleName(), "pressed");
            return false;
        }
    });
    setListAdapter(commentAdapter); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T15:17:55.407

也添加这一行：

```
editText.setSingleLine(true); 
```

此外，我建议不要将此editText用作FooterView，而是将该editText添加到parentBottom并在其上方放置ListView。这样用户就不需要走到列表的末尾，然后意识到他/她也可以发表评论。

# android - 从片段中的服务器检索图像

> ID：14158929
> 
> 赞同：0
> 
> 时间：2013-01-04T14:24:05.260
> 
> 标签：android, eclipse

我正在尝试使用服务器上的图像更新 ImageView。我正在使用 Prime 库（[https://github.com/DHuckaby/Prime](https://github.com/DHuckaby/Prime)）。但由于某种原因，它崩溃了。

img链接是：

```
http://192.168.1.36/testing/fotos/foto1.jpg 
```

代码是这样的（注意它是一个片段，也许这是关键……）：

```
public class MyFragmentA extends Fragment {
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View myFragmentView = inflater.inflate(R.layout.fragment_a, container, false);
    try {
        String imageURL = "http://192.168.1.36/mimicit/fotos/foto1.jpg";
        Log.d("errors", "Got the link");
        RemoteImageView remoteImageView = (RemoteImageView) getView().findViewById(R.id.imageView1);
        Log.d("errors", "Done this part");
        remoteImageView.setImageURL(imageURL);
        Log.d("errors", "Done this other part");
    } catch (Exception e){
        Log.d("errors", "Wohoops. Crashed");
    }

    return myFragmentView;
} 
```

如您所见，中间有一些日志，因此我可以确切地知道它崩溃的位置。

这是日志结果：

```
01-04 14:15:46.363: D/errors(1030): Got the link
01-04 14:15:46.363: D/errors(1030): Wohoops. Crashed 
```

我认为问题可能是该 URL 在模拟器上不起作用，但浏览它并正常显示：

![在此处输入图像描述](../Images/43dbcb4898a1d30ee9d659cb6feafad6.png)

你认为问题出在哪里？

也许我应该下载img async？这有什么大不了的吗？我的意思是，如果不是它会崩溃吗？会尝试，但我不确定如何在异步模式下进行......

谢谢你。

塞尔吉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T14:27:45.317

替换这行代码：

```
RemoteImageView remoteImageView = (RemoteImageView) getView().findViewById(R.id.imageView1); 
```

和：

```
RemoteImageView remoteImageView = (RemoteImageView) myFragmentView .findViewById(R.id.imageView1); 
```

它抛出错误的原因是您没有从 onCreateView() 返回 View 并调用 getView() ，您将得到 Null。因此，您只需找到与您的 myFragmentView 相关的 ViewById。

# objective-c - AFNetworking 队列第一次请求需要很长时间

> ID：14158930
> 
> 赞同：-1
> 
> 时间：2013-01-04T14:24:08.140
> 
> 标签：objective-c, ios, afnetworking

我一直在为我的所有 Http Request 使用 AFNetworking 库，我的示例请求如下所示

```
AFJSONRequestOperation *operation = [[AFJSONRequestOperation alloc] initWithRequest:requestObj];
    [operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id   responseObject) {

        [dic setValue:operation forKey:@"operationObj"];
        [dic setValue:responseObject forKey:@"jsonData"];

        [requestedView performSelector:callBackFunction withObject:[NSNumber numberWithBool:YES] withObject:dic];

    } failure:^(AFHTTPRequestOperation *operation, NSError *error) {

        NSLog(@"Error resopnse => %@",error);

        [dic setValue:operation forKey:@"operationObj"];
        [dic setValue:error forKey:@"error"];

        [requestedView performSelector:callBackFunction withObject:[NSNumber   numberWithBool:YES] withObject:dic];
    }]; 
```

**当我第一次发出 Http 请求时**，操作**队列需要很长时间才能启动，有时我会导致 0 作为响应状态代码**，

但是一旦我尝试再次**触发相同的请求**，我就没有遇到任何问题。

我错过了什么吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T16:00:38.153

我不确定您的请求是什么，但完成和成功块应该会影响请求的开始时间。我通常`AFJSONRequestOperation`像这样使用 s：

```
AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
    // Success
} failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
    // Failure
}];

[operation start]; 
```

有没有`[operation start]`我们看不到的电话？

# c++ - 在 Windows 上使用 Makefile 编译

> ID：14158931
> 
> 赞同：3
> 
> 时间：2013-01-04T14:24:20.370
> 
> 标签：c++, c, windows

我想在 Windows 环境中使用 MakeFile 编译我的代码。我在 Linux 中创建了一个 Makefile，但不知道如何在 Windows 中创建和运行。我已经安装了 MinGW 并且还编辑了环境变量路径。我曾尝试像在 Linux 环境中那样运行 Makefile，但我无法运行它。任何人都可以分享任何链接。

这是我的简单 Makefile

```
CC = g++

all: Exe 

Exe : main.o Hello.o

    $(CC) -o Exe main.o Hello.o

main.o: main.cpp
    $(CC) -c main.cpp

Hello.o: Hello.cpp
    $(CC) -c Hello.cpp

clean:
    rm -rf *o main.o Hello.o 
```

我从命令提示符**make MakeFile**运行它，每次它提示消息时，**makefile up to date**。它没有做任何事情，甚至没有生成可执行文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T14:27:49.513

语法几乎相同。这真的取决于你是否添加了特定的命令（比如使用`find`, `grep`, ...）。

您应该将`make`命令报告的错误添加到您的问题中。没有更多信息，我们无法猜测问题出在哪里

**编辑：**我不明白你没有找到 make 命令。该`make`命令有时被命名为`mingw32-make.exe`. 这真的取决于你安装的 MinGW 的版本和类型

**Edit2：** 要键入的命令行是`make`（或`mingw32-make.exe`）而不是`make Makefile``make`

在该`clean:`部分中，不要使用`rm`，此命令在 Windows 上不存在

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T14:31:28.827

Goto bin directory in MinGW and check whether you have a file named make.exe if you don't have it then rename mingw32-make.exe to make.exe
As I remember normally make.exe is named mingw32-make.exe in the MinGW distribution, I don't know why they do so, but renaming it to make.exe can solve the problem in most of the cases.

# java-me - 从 Hashtable J2ME 中获取第一项

> ID：14158933
> 
> 赞同：1
> 
> 时间：2013-01-04T14:24:26.160
> 
> 标签：java-me, hashtable

我试图找到从包含至少 5 个元素的 Hashtable 中获取第一项的方法。我有这个：

```
Hashtable parkingSlots;

parkingSlots = new Hashtable();

parkingSlots.put("P1", null);
parkingSlots.put("P2", null);
parkingSlots.put("P3", null);
parkingSlots.put("P4", null);
parkingSlots.put("P5", null);

Enumeration gPL = parkingSlots.Keys();

While( gPL.hasMoreElements()){

    String parkingNum = (String) gPL.nextElement();
    **// Here I've this result:  P1, P2, P3, P4, P5  but I want to get only the first item, in this case P1**

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T15:04:04.880

`break;`在最后一个右大括号 ( ) 之前放置一个语句`}`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T19:55:13.493

如果您只需要一个，您可以用 if 替换 while，仅此而已。

请记住两件事：Hashtable 没有定义的顺序以及在块外定义parkingNum 变量.. 如果您以后想使用它。

```
...
String parkingNum = null;
if( gPL.hasMoreElements()){
    parkingNum = (String) gPL.nextElement();
}
... 
```

# jenkins - 使用 Yeoman 和 Mocha 在 Jenkins 中生成测试结果和覆盖率报告

> ID：14158938
> 
> 赞同：6
> 
> 时间：2013-01-04T14:24:54.040
> 
> 标签：jenkins, mocha.js, yeoman

我正在开始一个新项目，并调查[Yeoman](http://yeoman.io/)和[Mocha](http://visionmedia.github.com/mocha/)以用于该项目。我们将 Jenkins 用于 CI。

到目前为止，我已经弄清楚如何让客户端测试工作，但我正在努力生成可以被 Jenkins 跟踪的测试结果（以及最终的覆盖率报告）。有没有人成功做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-27T03:08:26.943

xunit 报告器运行良好，用于生成测试报告。

命令行：

`mocha -R xunit | grep "<" > reports/mocha.xml`

使用 Jenkins，只需“发布 JUnit 测试结果报告”即可。

但是，我仍在寻找发布覆盖率报告的解决方案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-09T04:42:58.103

我已经能够使用 testem 将代码覆盖率报告添加到我的 Jasmine 测试中。Testem 似乎也适用于 Mocha。 [https://github.com/airportyh/testem](https://github.com/airportyh/testem)

按照自述文件中的说明进行操作。它解释了如何在持续集成模式下使用 testem ci。

您需要从 jenkins获取 tap 插件 - [https://wiki.jenkins-ci.org/display/JENKINS/TAP+Plugin 。](https://wiki.jenkins-ci.org/display/JENKINS/TAP+Plugin)

维奇

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T17:29:24.173

未对其进行测试，但取决于您使用的测试驱动程序（mocha、jasmine），它可以像使用正确的报告器一样简单。例如，请参阅[https://github.com/visionmedia/mocha/issues/83](https://github.com/visionmedia/mocha/issues/83)了解 mocha。

# python - Python猴子补丁

> ID：14158947
> 
> 赞同：11
> 
> 时间：2013-01-04T14:25:27.287
> 
> 标签：python, monkeypatching

我需要猴子补丁请求的响应类（版本 1.0.4，截至本问题的当前版本），以添加其他方法。

我有这个代码：

```
import requests

class Response(requests.models.Response):
    def hmm(self):
        return 'ok'

requests.models.Response = Response

r = requests.get('http://bbc.co.uk')

print r 
```

当原始响应调用 super() 时失败 - [https://github.com/kennethreitz/requests/blob/master/requests/models.py#L391](https://github.com/kennethreitz/requests/blob/master/requests/models.py#L391)

我认为这是因为它变得混乱，因为我已经更换了班级，我觉得我在做一些愚蠢的事情，有什么想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-04T14:34:28.323

你最好将你的函数直接添加到类中：

```
def hmm(self):
    return 'ok'
requests.models.Response.hmm = hmm 
```

这工作得很好：

```
>>> import requests
>>> def hmm(self):
...     return 'ok'
... 
>>> requests.models.Response.hmm = hmm
>>> r = requests.get('http://bbc.co.uk')
>>> print r
<Response [200]>
>>> r.hmm()
'ok'
>>> requests.__version__
'1.0.4' 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-04T14:37:21.283

我认为你不能像那样对那种类型进行猴子补丁。导入时`requests`，所有[这些](https://github.com/kennethreitz/requests/blob/master/requests/__init__.py)模块都被初始化。并且随着整个库`from xy import Request`一遍又一遍地使用，它将对实际类型有一个精确的引用。只有在那之后，您才替换模型模块中的响应类型，因此只有后续的导入会受到影响。

除非您检查所有模块并用您的新类型手动替换它们的响应引用，否则它们仍将使用原始的，使您的补丁无用。

相反，您应该保留原始类型，但直接扩展它，正如 Martijn 建议的那样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T14:40:25.023

只是使用的快速修复[`setattr`](http://docs.python.org/2/library/functions.html#setattr)，但它有点难看（但在语义上等同于[@Martijn answer](https://stackoverflow.com/a/14159081/89391)）：

```
def hmm(self):
    return 'OK - %s' % self.status_code

setattr(requests.models.Response, 'hmm', hmm)

r = requests.get('http://bbc.co.uk')
print r.hmm()
# prints 
# OK - 200 
```

# sql - 按唯一 ID 计数事件

> ID：14158948
> 
> 赞同：0
> 
> 时间：2013-01-04T14:25:39.450
> 
> 标签：sql

我有一些停机时间，我正在尝试学习 SQL。我遇到了一个问题，希望你能帮助我。

假设我有一个非常简单的表格，每个日期都有一个唯一的 ID（同样，这是一个学习练习——否则我会使用实际日期而不是 ID），然后是我做的家务天：

```
day_id  | chore

123456  | Washed the dishes

823454  | Cut the grass

123456  | Washed the dishes

123456  | Took out the trash

324234  | Washed the dishes 
```

如您所见，您有可能在同一天做两次相同的家务（在这种情况下，我在 123456 上洗了两次碗）。

如何计算我洗盘子的*唯一天数（在这种情况下，答案应该是 2）？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T14:27:16.737

```
SELECT COUNT(DISTINCT day_id)
FROM Chores
WHERE Chore='Washed the dishes' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T14:27:29.953

```
select count(distinct day_id) 
from your_table
where chore = 'Washed the dishes' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T14:27:54.797

```
SELECT CHORE, COUNT(DISTINCT day_id) cnt
FROM CHORES
WHERE CHORE='Washed the dishes' -- remove this to get list of all chores/count
GROUP BY CHORE 
```

# indexing - Cassandra：无法使用非主键更新行（即使我创建了索引。）

> ID：14158949
> 
> 赞同：0
> 
> 时间：2013-01-04T14:25:39.547
> 
> 标签：indexing, cassandra, cql

当前收到此错误消息：

**错误请求：预期密钥“KEY”将出现在“UserGameAnswers”的 WHERE 子句中**

```
cqlsh:godofsports> UPDATE UserGameAnswers SET 'status' = 'thing' WHERE 'event_question_id' = '7';
Bad Request: Expected key 'KEY' to be present in WHERE clause for 'UserGameAnswers' 
```

鉴于我有一个针对此列键的索引（见下文）并且[应该允许](http://www.datastax.com/docs/1.1/references/cql/UPDATE)这样做我做错了什么？

```
cqlsh:godofsports> DESCRIBE COLUMNFAMILY UserGameAnswers;

CREATE TABLE UserGameAnswers (
  KEY text PRIMARY KEY,
  event_question_id text
) WITH
  comment='' AND
  comparator=ascii AND
  read_repair_chance=0.100000 AND
  gc_grace_seconds=864000 AND
  default_validation=text AND
  min_compaction_threshold=4 AND
  max_compaction_threshold=32 AND
  replicate_on_write='true' AND
  compaction_strategy_class='SizeTieredCompactionStrategy' AND
  compression_parameters:sstable_compression='SnappyCompressor';

CREATE INDEX event_question_id_idx ON UserGameAnswers (event_question_id); 
```

我是否需要先进行查询以获取实际的 KEY？:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T19:06:09.060

是的 - 您需要确定密钥并针对该密钥编写更新。

# css - 如何用css使图像完全变灰？

> ID：14158952
> 
> 赞同：2
> 
> 时间：2013-01-04T14:26:10.543
> 
> 标签：css, image

我有这个图像：![在此处输入图像描述](../Images/16ff17d0eb9b725da1a75aa58d331588.png)。

我需要将其变灰以使其看起来像这样![在此处输入图像描述](../Images/b0291dc3f8aefd613fc7bed32b9726e0.png)：

使用这个 SO 问题中的响应：[Gray out image with CSS?](https://stackoverflow.com/questions/286275/gray-out-image-with-css)

```
 opacity : 0.4;
 filter: alpha(opacity=40); /* msie */ 
```

我明白了：![在此处输入图像描述](../Images/5f8090ef067015f8d889acf2a7e5b577.png)

将过滤器属性设置为`filter: grayscale(100%)`仍然会改变颜色：![在此处输入图像描述](../Images/a5534afeb41fd4e88ac10ad1f3261176.png)

无论如何我可以让它完全变灰吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T14:38:33.013

听起来您正在尝试更改图像中的实际像素。我相信你正在寻找的是类似的东西。

Pixastic（颜色调整）

[https://github.com/jseidelin/pixastic](https://github.com/jseidelin/pixastic)

[http://www.pixastic.com/lib/docs/actions/coloradjust/](http://www.pixastic.com/lib/docs/actions/coloradjust/)

或 PaintbrushJS（彩色）

[https://github.com/mezzoblue/PaintbrushJS](https://github.com/mezzoblue/PaintbrushJS)

[http://mezzoblue.github.com/PaintbrushJS/demo/](http://mezzoblue.github.com/PaintbrushJS/demo/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T14:38:45.200

您将无法使用 CSS 执行此操作。您需要首先以一种或另一种方式处理图像以获得去除渐变的纯灰色。

更好的方法是根据需要制作一个版本，然后使用 css/js 将颜色版本替换为处理后的版本。

另一种选择是使用画布和卷积或逐像素处理它。

然而，像素方法并不是最快的孩子：
[http ://www.onaluf.org/en/entry/13](http://www.onaluf.org/en/entry/13)

但也许通过使用各种技术对其进行处理可以为您提供以下内容：http:
[//www.html5rocks.com/en/tutorials/canvas/imagefilters/](http://www.html5rocks.com/en/tutorials/canvas/imagefilters/)

# c# - 使用继承的定制对象的 Arraylist

> ID：14158953
> 
> 赞同：0
> 
> 时间：2013-01-04T14:26:11.293
> 
> 标签：c#, arraylist

在我的应用程序中，我从数据库中检索 3 行数据，遍历数据行以将数据分配给我的客户对象，然后将客户添加到客户集合中：

```
// new customer object to fill in loop and assign to collection
tracker.Customer myCustomer = new tracker.Customer();

// new customer collection object to fill later
Tracker.customerCollection  myCustomerCollection = new trackerCustomerCollection();

foreach (System.Data.DataRow drRow in dsResults.Tables[0].Rows) 
{
  myCustomer.CustomerID = Item["CustomerID"];
  myCustomer.FKBandID = Convert.ToInt32(drRow["FKBandID"]);
  myCustomer.FKSectorID = Convert.ToInt32(drRow["FKSectorID"]); 
  myCustomer.CustomerName = Convert.ToString(drRow["CustomerName"]);
  myCustomer.CustomerAddress = Convert.ToString(drRow["CustomerAddress"]);
  myCustomer.CustomerPhoneNumber = Convert.ToString(drRow["CustomerPhoneNumber"]);

  myCustomerCollection.Add(myCustomer);
} 
```

问题是当我尝试使用填充`myCustomerCollection`时，集合中的 3 个`Customer`对象都是相同的。`myCustomer`当我遍历循环时，每个实例都是不同的，但是一旦添加到`myCustomerCollection`. 每个项目将与添加的最后一个项目相同。

如果有人能指出我正确的方向，我将不胜感激，我已经在 VB.NET 中毫无问题地使用了这个原则，但我现在被迫使用 C#，并且很难找到问题的根源。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T14:31:27.373

This is because you're creating 1 instance of your `Customer` object, and adding it to the list 3 times (modifying it each time you loop).

If you move your `new tracker.Customer()` inside the loop, you'll create 3 individual customer objects.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T14:28:58.947

您需要`tracker.Customer`在 for 循环的每次迭代中创建一个新实例，而不是循环外的单个实例：

```
foreach (var drRow in dsResults.Tables[0].Rows) 
{
    // Create a brand new instance of a customer and set its properties
    var myCustomer = new tracker.Customer()
    {
        CustomerID = Item["CustomerID"];
        FKBandID = Convert.ToInt32(drRow["FKBandID"]);
        FKSectorID = Convert.ToInt32(drRow["FKSectorID"]); 
        CustomerName = Convert.ToString(drRow["CustomerName"]);
        CustomerAddress = Convert.ToString(drRow["CustomerAddress"]);
        CustomerPhoneNumber = Convert.ToString(drRow["CustomerPhoneNumber"])
    };
    // Add your new customer to the customer collection
    myCustomerCollection.Add(myCustomer);
} 
```

现在发生的情况是您`myCustomerCollection`包含对同一`myCustomer`实例的三个引用，因为您没有`new`为数据库中的每条记录实例化一个。您现在看到的值`myCustomer`可能与数据的最后一行有关。

通过在 for 循环的每次迭代中创建一个**新实例**`tracker.Customer`，您将在列表中拥有三个不同的对象。

这种行为在 VB.NET 中完全相同。

# java - 根据一个Key对HashMap进行排序

> ID：14158955
> 
> 赞同：-5
> 
> 时间：2013-01-04T14:26:14.773
> 
> 标签：java, sorting, collections

我有一个 Hashmap 的 ArrayList，其中有诸如 name、phoneNo、Date、Age 之类的键。

我想根据日期字段对 Hashmap 进行排序。

如果我使用 LinkedHashMap，那么它也没有用，因为我以随机方式获取值。

我不能使用对象代替 HashMap，因为我不知道我会得到多少条目。我正在动态放置键和值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T14:28:48.090

您需要制作一个比较器，在哈希图中挑选出“日期”的值，然后使用它进行比较。

```
 Collections.sort(list, new Comparator<Map<String, Object>>() {
        public int compare(Map<String, Object> map1, Map<String, Object> map2) {
            Date date1 = (Date) map1.get("Date");
            Date date2 = (Date) map2.get("Date");
            return date1.compareTo(date2);
        }
    }); 
```

**但这**闻起来像拒绝对象。为什么不为这些数据创建一个真实的对象？如果这种排序经常出现，您甚至可以将其设为 Comparable。

# c# - 简单的数学运算在 double 上比在 float 数据类型上更快？

> ID：14158956
> 
> 赞同：3
> 
> 时间：2013-01-04T14:26:15.520
> 
> 标签：c#, .net-3.5, profiling

> **可能的重复：**
> [双打比 c# 中的浮点数快吗？](https://stackoverflow.com/questions/158889/are-doubles-faster-than-floats-in-c)

我编写了简单的基准测试来检查在我的应用程序中更改`double`数据类型可以获得多少性能。`float`这是我的代码：

```
 // my form: 
    // one textbox: textbox1 (MultiLine property set to true)
    // one button: button1 with event button1_Click

    private void button1_Click(object sender, EventArgs e)
    {

        int num = 10000000;

        float[] floats1 = new float[num];
        float[] floats2 = new float[num];
        float[] floatsr = new float[num];  // array for results
        double[] doubles1 = new double[num];
        double[] doubles2 = new double[num];
        double[] doublesr = new double[num]; // array for results

        Stopwatch stw = new Stopwatch();

        log("Preparing data");

        Random rnd = new Random();

        stw.Start();

        for (int i = 0; i < num; i++)
        {
            floats1[i] = NextFloat(rnd);
            floats2[i] = NextFloat(rnd);
            doubles1[i] = rnd.NextDouble();
            doubles2[i] = rnd.NextDouble();
        }
        stw.Stop();
        log(stw.Elapsed.TotalMilliseconds.ToString()+"ms");
        stw.Reset();

        log("");

        stw.Start();
        for (int i = 0; i <# i++)
        {
            floatsr[i] = floats1[i] * floats2[i];
        }
        stw.Stop();
        log("Multiplying floats: " + stw.Elapsed.TotalMilliseconds.ToString() + "ms");
        stw.Reset();

        stw.Start();
        for (int i = 0; i < num; i++)
        {
            doublesr[i] = doubles1[i] * doubles2[i];
        }
        stw.Stop();
        log("Multiplying doubles: " + stw.Elapsed.TotalMilliseconds.ToString() + "ms");
        stw.Reset();

        stw.Start();
        for (int i = 0; i < num; i++)
        {
            floatsr[i] = floats1[i] / floats2[i];
        }
        stw.Stop();
        log("Dividing floats: " + stw.Elapsed.TotalMilliseconds.ToString() + "ms");
        stw.Reset();

        stw.Start();
        for (int i = 0; i < num; i++)
        {
            doublesr[i] = doubles1[i] / doubles2[i];
        }
        stw.Stop();
        log("Dividing doubles: " + stw.Elapsed.TotalMilliseconds.ToString() + "ms");
        stw.Reset();

    }

    private void log(string text)
    {
        textBox1.Text = textBox1.Text + text + Environment.NewLine;
    }

    // I found that function somewhere on stackoverflow
    static float NextFloat(Random random)
    {
        double mantissa = (random.NextDouble() * 2.0) - 1.0;
        double exponent = Math.Pow(2.0, random.Next(-126, 128));
        return (float)(mantissa * exponent);
    } 
```

我得到了这样的结果（发布，无调试，Intel Mobile Core Duo T2500 2.0GHz 2MB CPU）：

```
Preparing data 5275,6862ms

Multiplying floats: 442,7865ms 
Multiplying doubles: 169,4028ms
Dividing floats: 550,7052ms 
Dividing doubles: 164,1607ms 
```

我很惊讶，对 . 的操作`double`几乎比对 . 的操作快 3 倍`float`。我在这里搜索“双浮动”，我发现了这个：

[使用 double 比 float 快吗？](https://stackoverflow.com/questions/3426165/is-using-double-faster-than-float)

最佳答案集中在 CPU 架构上，但我不同意。

我怀疑是其他原因导致浮点数性能低下，因为我的 CPU 与英特尔 SSE 应该能够一次乘法或除法 4 个浮点数（打包浮点指令），或者一次 2 个双精度数。所以浮动应该更快。

也许编译器（或 .net 中的 clr）正在以某种方式优化内存使用？

**有什么办法可以优化它并使浮动更快？**

**请不要重复报告，我看到了其他问题，但他们并不满意。**

* * *

更改生成浮点数的方法后的结果现在看起来很好（Servy 建议）：

```
Preparing data 1367,0678ms

Multiplying floats: 109,8742ms 
Multiplying doubles: 149,9555ms
Dividing floats: 167,0079ms 
Dividing doubles: 168,6821ms 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T14:36:42.943

它与您如何生成随机数有关。浮点数的乘除并不完全相同；这些数字的实际值很重要。在浮点数的情况下，您要在相当大的范围内填充一个值。如果你创建你的浮点数，使它们在 0 和 1 之间，就像双打一样，那么它会更像你所期望的那样。只需更改`NextFloat`为：

```
static float NextFloat(Random random)
{
    return (float) random.NextDouble();
} 
```

我刚刚进行了一些测试，通过这种更改，浮点数的乘法速度提高了 33%。

当然，这只是使比较“公平”的最简单方法。为了更好地了解浮点数与双精度浮点数的真正比较，您需要在各个类型的全部范围内生成随机浮点数和双精度数，或者更好的是，两者都保存代表程序将使用的数据类型的值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-04T14:35:29.863

在某些情况下，浮点数上的 GPU 操作仍然更快，因为它们具有 32 位浮点硬件。

您的 x86（或 x86_64）架构 CPU 在数学协处理器中不支持 32 位。甚至 64 位支持。x87 浮点单元使用 80 位算术。

现在，现代 x86 CPU 确实具有 SIMD 指令（MMX、SSE、AVX），硬件支持 32 位和 64 位浮点运算，性能更高——如果您可以在 SIMD 单元中完成所有操作。在 SIMD 和 FPU 之间移动数据会降低性能。

从当前版本开始，.NET 不使用 MMX 或 SSE 或 AVX。您可以尝试 Mono，它提供了 JIT 编译为 SIMD 指令的内在方法。或者您可以将本机代码用于对性能最敏感的部分，因为现代 C++ 编译器不仅允许使用 SIMD，而且可以将看起来普通的代码自动向量化为 SIMD 指令。

# .net - 为什么在我的 VB.NET 应用程序中加载未引用的 DLL？

> ID：14158958
> 
> 赞同：2
> 
> 时间：2013-01-04T14:26:33.867
> 
> 标签：.net, vb.net

我有一个包含四个 VB.NET 项目的解决方案，所有项目都针对 .NET 4 或 .NET 4 Client Profile。一个是 WPF 桌面应用程序，另外三个是类库。其中之一是使用 EntityFramework 连接到 MS SQL Server 的数据访问。

几个月前，为了测试问题的可能解决方案，我们添加了对`System.Data.OracleClient`. （我们正在使用反射做一些事情，需要添加一个新的 DLL，所以我们随机选择了一些东西。）完成我们正在做的事情后，我们从项目中删除了 OracleClient 并继续前进。

稍后，我正在调试一些东西并查看输出窗口，并注意到`System.Data.OracleClient.dll`在显示特定窗口时正在加载。同样，`System.Web.dll`被加载。

这些项目都没有对 OracleClient 或 Web 的引用。`dir -r -i * | Select-String "Oracle"`在 PowerShell 中运行不会返回任何结果。

据我所知，这些 DLL 都不应该加载。想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T14:30:08.787

尝试从解决方案资源管理器中删除引用 -> 选择一个项目 -> 引用 -> 右键单击​​ dll 并选择删除

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T14:48:34.437

1.  卸载所有项目（右键卸载）
2.  右键单击项目文件单击“编辑 ...vbproj”
3.  在 vbproj xml 文件中查找对 dll 的可能引用。

# ios - 更改子视图控制器

> ID：14158960
> 
> 赞同：9
> 
> 时间：2013-01-04T14:26:39.747
> 
> 标签：ios, view, controller, parent-child

我有一个视图控制器，当我按下按钮时，会出现一个子视图控制器。这非常有效，但是如果我按下其中的下一步按钮来执行两步登录，我想将这个子视图控制器更改为另一个。任何想法？因为从主视图控制器我知道如何显示一个孩子，但从孩子我不知道该怎么做。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-01-04T15:40:34.933

如果使用故事板，您可以创建自己的子替换 segue，例如：

替换Segue.h

```
@interface ReplaceSegue : UIStoryboardSegue

@end 
```

替换Segue.m

```
@implementation ReplaceSegue

- (void)perform
{
    UIViewController *source = self.sourceViewController;
    UIViewController *destination = self.destinationViewController;
    UIViewController *container = source.parentViewController;

    [container addChildViewController:destination];
    destination.view.frame = source.view.frame;
    [source willMoveToParentViewController:nil];

    [container transitionFromViewController:source
                           toViewController:destination
                                   duration:0.5
                                    options:UIViewAnimationOptionTransitionCrossDissolve
                                 animations:^{
                                 }
                                 completion:^(BOOL finished) {
                                     [source removeFromParentViewController];
                                     [destination didMoveToParentViewController:container];
                                 }];
}

@end 
```

然后，您可以打开故事板，将容器视图放在容器视图控制器和子控制器上，将自定义 segue 从第一个子场景放置到第二个子场景。您需要为`ReplaceSegue`两个子场景之间的自定义转场指定类：

![容器控制器故事板](../Images/0dde0abea901e6476ef0564c5da717a4.png)

请注意，如果您在第二个子视图上正确使用了自动布局或自动调整大小，一切都会正常工作（尤其是在 中手动设置目标控制器视图的框架时`ReplaceSegue`）。但是在 Interface Builder 中，第二个子场景的布局看起来不太正确，并且可能使场景的正确设计有点尴尬，因为（至少从 Xcode 4.5 开始）第二个孩子的“模拟指标”场景不能很好地推断出合适的尺寸。因此，您可能应该将第二个子场景的模拟指标的大小从“推断”更改为“自由形式”，然后手动调整第二个子场景的大小：

![具有手动调整的第二个子场景大小的容器故事板](../Images/827621ac8a750c573df47ba58bc36cb6.png)

这不是非常优雅的 Xcode 体验，但它确实有效。如果您正确使用自动布局或自动调整蒙版大小，则可以非常优雅地处理细微的变化。

# php - PHP imap 问题

> ID：14158961
> 
> 赞同：-1
> 
> 时间：2013-01-04T14:26:40.920
> 
> 标签：php, encoding, imap

我需要能够从 php 脚本中使用我的 gmail。但无论我尝试什么，消息正文都带有 =3D 和随机等号等字符。有时它会以 base64 的形式出现，或者什么都没有。如果没有可用的 html，我如何获取电子邮件并在 HTMLPurifier 干净的 html 或纯文本中显示它。

```
$overview = imap_fetch_overview($inbox,$email_number,0);

$body_pre = imap_fetchbody($inbox, $email_number, 2.1); 

$message = imap_fetchbody($inbox, $email_number, 2.2); 

$message = base64_decode($message);

if (empty($message))
 {
  $message = $body_pre;
  $message = preg_replace('@(https?://([-\w\.]+)+(:\d+)?((/[\w/_\.%\-+~]*)?(\?\S+)?)?)@', '<a href="$1">$1</a>',$message);
$message = '<pre>'.htmlentities($message).'</pre>';  

}else{

 $cleanconfig = HTMLPurifier_Config::createDefault();
 $cleanconfig->set('Core.Encoding', 'UTF-8');
 $cleanconfig->set('HTML.Doctype', 'HTML 4.01 Transitional');
 $purifier = new HTMLPurifier($cleanconfig);

  $message = $purifier->purify($message);

 } 
```

这段代码，$message 只是空白。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T14:33:32.990

您假设您的邮件消息始终位于位置 2.2？绝对不能保证...取决于您发送的消息计划文本（只有一个正文），html / text（两个），带有附件（三个加号）以回复另一封电子邮件（然后另一封电子邮件将是正文它是自己的子机构）。

（引用的`=3D`可打印）和 base64 数据是由于消息正文编码。看看[`imap_fetchstructure`](http://php.net/manual/en/function.imap-fetchstructure.php)哪个解释了消息中有多少部分（您可以搜索它以查找文本），并查看`->type`每个正文的组件以了解它的编码（type=4 引用可打印，type=3 是 base64 )

# powershell - 如何在 Powershell 中强制执行文件操作？

> ID：14158962
> 
> 赞同：0
> 
> 时间：2013-01-04T14:26:47.173
> 
> 标签：powershell, syntax, error-handling

我正在做一个项目，我需要将几千个文档从 HTML 转换为 Word。我正在使用这个功能：

```
function saveas-document ($docs) {         
        $opendoc = $word.documents.open($docs);    
        $savepath = $docs -replace [regex]::escape($htmPath),"$docpath"
        $opendoc.saveas([ref]"$savepath", [ref]$saveFormat);         
        $opendoc.close();
} 
```

最近，在测试时，我的工作因其中一个文件被“另一个用户”锁定而停滞不前。我收到一个对话框，询问我是否想要只读副本，是否想要稍后编辑和合并更改，或者等待文档再次可用的通知。此外，在我选择打开文件的任何一种情况下，这似乎都会覆盖我的`$word.Visible-$False`参数。

我未能成功识别锁定我的文档的“另一个用户”。所有文档都在本地非共享驱动器上，所以我不确定是什么让它们被锁定。根据文件所在的位置，我确信不需要编辑任何内容，我可以强制打开文件，然后`Save As...`

我可以`-force`在这个函数中用作参数吗？放置该参数的最佳位置在哪里？

编辑：根据下面的 JPBlanc，我尝试停止 Word，每条记录出现三个错误。

```
Method invocation failed because [Microsoft.Office.Interop.Word.DocumentClass] doesn't contain a method named 'quit'.
At C:\users\x46332\desktop\sad003.ps1:69 char:18
+     $opendoc.quit <<<< ()
    + CategoryInfo          : InvalidOperation: (quit:String) [], RuntimeException
    + FullyQualifiedErrorId : MethodNotFound

Exception calling "SaveAs" with "16" argument(s): "COM object that has been separated from its underlying RCW cannot be
 used."
At C:\users\x46332\desktop\sad003.ps1:73 char:20
+     $opendoc.saveas <<<< ([ref]"$savepath", [ref]$saveFormat);
    + CategoryInfo          : NotSpecified: (:) [], MethodInvocationException
    + FullyQualifiedErrorId : DotNetMethodException

Exception calling "Close" with "3" argument(s): "COM object that has been separated from its underlying RCW cannot be u
sed."
At C:\users\x46332\desktop\sad003.ps1:74 char:19
+     $opendoc.close <<<< ();
    + CategoryInfo          : NotSpecified: (:) [], MethodInvocationException
    + FullyQualifiedErrorId : DotNetMethodException 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T18:59:48.957

尝试将只读变体添加到方法中，它是第二个变体，请参阅[http://msdn.microsoft.com/en-us/library/office/bb216319(v=office.12).aspx](http://msdn.microsoft.com/en-us/library/office/bb216319(v=office.12).aspx)。

IE：

```
$opendoc = $word.documents.open($docs,$false,$true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T15:49:01.990

我只是认为你是“另一个用户”，这只是因为 $opendoc.close(); 不足以释放对文件的访问权限。

你可以尝试添加：

```
# Stop Winword Process
$opendoc.quit()
$rc = [System.Runtime.Interopservices.Marshal]::ReleaseComObject($opendoc) 
```

假设您正在打开您的 word 文档：

```
$opendoc = new-object -com "word.application" 
```

# ruby - Hash in Hash 给出了错误的值作为回报？

> ID：14158964
> 
> 赞同：1
> 
> 时间：2013-01-04T14:26:48.063
> 
> 标签：ruby, hash

我正在尝试使用以下键存储二维哈希：

*   维度 1 = 数字但不连续
*   维度 2 = 字符串（作为 :id 和 :value）

当元素未初始化时会出现问题。

```
memory = Hash.new(Hash.new(""))
memory[0][:value] = "station1"
memory[1][:value] # => "station1" 
```

当我访问`memory[1][:value]`时，我得到 的值`memory[0][:value]`。这怎么可能？我虽然会得到一个空字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T14:45:03.703

下面是发生的情况：在第一行中，您创建了一个 Hash 对象，该对象的默认值是 Hash 对象，该对象的默认值是空字符串。当您访问不存在的键时，将返回该对象：

```
irb(main):004:0> memory = Hash.new(Hash.new(""))
=> {}
irb(main):007:0> memory[0].object_id
=> 70350452886020
irb(main):008:0> memory[1].object_id
=> 70350452886020
irb(main):005:0> memory[0][:value]
=> ""
irb(main):006:0> memory[0][:value].object_id
=> 70137307419240
irb(main):007:0> memory[1][:value].object_id
=> 70137307419240 
```

当您访问内部哈希的不存在值时，将返回默认哈希对象。因此，通过`memory[0][:value] = "station1"`使用尚未存在的键 0 进行定义，您`station1`可以将键的值设置为`:value`内部散列。当您现在访问外部散列上的另一个不存在的键时，将再次返回内部散列，并且该键`:value`已设置为`"station1"`：

```
irb(main):008:0> memory[0][:value] = 'station1'
=> "station1"
irb(main):011:0> memory[0][:value]
=> "station1"
irb(main):012:0> memory[1][:value]
=> "station1"
irb(main):007:0> memory[0].object_id
=> 70350452886020
irb(main):008:0> memory[1].object_id
=> 70350452886020
irb(main):009:0> memory[0][:value].object_id
=> 70137307342120
irb(main):010:0> memory[1][:value].object_id
=> 70137307342120 
```

所以基本上你通过访问外部散列上不存在的键来更改内部散列，这会返回对内部散列的引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T14:44:45.693

您需要为每个键创建一个新的哈希对象。在您的示例中，所有键共享相同的哈希对象。

```
memory = Hash.new{|h, k| h[k] = Hash.new("")}
memory[1][:value] # => ""
memory[1][:value] = "a"
memory[1][:value] # => "a"
memory[2][:value] # => "" 
```

# c# - MS Word 加载项不会在 Visual Studio 中调试

> ID：14158965
> 
> 赞同：0
> 
> 时间：2013-01-04T14:26:52.430
> 
> 标签：c#, visual-studio-2010, ms-word, add-in

我在 Visual Studio 中使用`VSTO`. 我可以使用 VS 在多台计算机上调试加载项/Word。但是，在两台公司发布的笔记本电脑上，调试会在 Word 启动屏幕出现后立即停止并显示以下日志。

```
'WINWORD.EXE' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_32\mscorlib\v4.0_4.0.0.0__b77a5c561934e089\mscorlib.dll'
The program '[2836] WINWORD.EXE: Managed (v4.0.30319)' has exited with code -1073740791 (0xc0000409). 
```

到目前为止，我唯一能找到的是退出代码与缓冲区溢出有关。我想知道是否某些预装的公司软件可能会导致此问题。我可以使用生成的安装程序安装和运行我的加载项，因此问题集中在 VS 中的调试上。

# wordpress - 如何在 WordPress 中使用年龄作为自定义字段？

> ID：14158966
> 
> 赞同：0
> 
> 时间：2013-01-04T14:26:59.327
> 
> 标签：wordpress

我正在构建一个搜索脚本，它将根据年龄过滤结果：

*   帖子是我网站上的人。
*   在自定义字段中输入年龄作为出生日期。

我相信我可以编写一个函数来将此出生日期转换为年龄，然后将其再次添加为另一个自定义字段。

我唯一担心的是，当他们变老时，每年会发生什么？我不太确定该怎么做。我可以有一个每天运行的脚本……但这感觉像是作弊。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T00:10:18.510

我有一个网站：

> `echo "If Joe was alive, he would be" . get_age( "1948-06-18" ) . "years old";`

在主题中是`functions.php`这样的：

```
// Calculate the age from a given birth date
// Example: get_age("YEAR-MONTH-DAY");
function get_age( $birth_date )
{
    // Explode the date into meaningful variables
    list( $year, $month, $day) = explode( "-", $birth_date );

    // Find the differences
    $y_diff = date( "Y" ) - $year;
    $m_diff = date( "m" ) - $month;
    $d_diff = date( "d" ) - $day;

    // If the day has not occured this year
    if ( $d_diff < 0 || $m_diff < 0 )
      $y_diff --;

    return $y_diff;
} 
```

# castle-windsor - 如何使用城堡动态代理拦截非公共成员？

> ID：14158974
> 
> 赞同：2
> 
> 时间：2013-01-04T14:27:17.537
> 
> 标签：castle-windsor, interceptor, castle-dynamicproxy

是否可以使用 Castle Dynamic Proxy 拦截非公共方法？

像这样的东西会拦截非公共成员吗？

```
 base.BootStrapContainer.Register(
                    Classes.FromAssemblyNamed(referencedAssembly)
                           .IncludeNonPublicTypes()
                           .Pick()
                           .Configure(component => component.Interceptors<TracingAspect>())); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T04:14:43.693

不可以。只有对动态代理公开的成员才能被拦截。

# javascript - jQuery each() 不会迭代所有元素

> ID：14158977
> 
> 赞同：3
> 
> 时间：2013-01-04T14:27:38.670
> 
> 标签：javascript, jquery

我已经盯着这显然不起作用的一小段代码太久了。为什么不选择框 rel 属性得到警报？

HTML：

```
<select rel="prop216" name="prop[]">
  <option value="">- none</option>
  <option value="12">Opt 1</option>
  <option value="13">Opt 2</option>
</select>
<select rel="prop217" name="prop[]">
  <option value="">- none</option>
  <option value="12">Opt 1</option>
  <option value="13">Opt 2</option>
</select> 
```

jQuery：

```
$("select").change(function()
{
 var i = 0;
 var alteredSelects = [];
 $("select").each(function()
 {
    if ( $(this).val() !== "" )
    {
        alteredSelects[i][0] = $(this).attr('rel');
        alteredSelects[i][1] = $(this).val();
        alert ($(this).attr('rel'));
        i++;

    }
 });
}); 
```

另请参阅我的 jSfiddle：http: [//jsfiddle.net/ft6Bd/1/](http://jsfiddle.net/ft6Bd/1/)

我在 Firefox 中遇到错误

> TypeError：无法将未定义转换为对象

在线上`alteredSelects[i][0] = $(this).attr('rel');`

但似乎无法理解为什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T14:29:20.877

您首先必须初始化`alteredSelects[i]`，然后才能为其赋值：

```
$("select").change(function() {
    var i = 0;
    var alteredSelects = [];
    $("select").each(function() {
        if ( $(this).val() !== "" ) {
            alteredSelects[i] = []; // <-- Initialize `alteredSelects[i]` as empty array.
            alteredSelects[i][0] = $(this).attr('rel');
            alteredSelects[i][1] = $(this).val();
            alert($(this).attr('rel'));
            i++;
        }
    });
}); 
```

问题是您试图将某些内容保存到`alteredSelects[i]`，`alteredSelects[i]`而`null`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T14:33:42.580

这不是答案，但您不应该使用自己的声明变量进行索引：jquery 每个都有自己的索引：

```
 $.each(collection, function(index, value) { 

  }); 
```

# tcl - Tcl/Tk 将任何小部件的更改绑定到脚本

> ID：14158982
> 
> 赞同：1
> 
> 时间：2013-01-04T14:27:50.870
> 
> 标签：tcl, tk

这是一个关于 Tk 的一般问题，所以请原谅我没有`code`发布。我编写了一个小型 Tcl/Tk GUI，它由一个条目、几个检查按钮、一个单选按钮和一个按钮小部件组成。当这些小部件中的任何一个发生更改时，我需要运行特定的 proc 以检查所有小部件的状态并执行某些操作。就像检查按钮或在条目小部件中键入内容时一样。

`-command`我可以通过使用特定于小部件的选项（例如for`checkbutton`和for等`radiobutton`）来实现所需的行为。我对这个实现的问题是这不是很透明和可读。`-validatecommand``entry`

是否可以使用`bind`命令或其他方式在小部件更改时调用脚本？

注意：我意识到我可以`bind`做类似的事情`<KeyRelease>`，`<ButtonRelease>`但我只想在小部件实际更改时触发脚本。

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T14:44:59.463

使用 -variable 和 -textvariable 选项（后者用于条目，前者用于检查按钮和单选按钮）。让支持所有小部件的变量成为同一数组的成员。然后`trace`在整个数组上使用来处理变量更新。

```
array set ::form {entry "" flag 0}
entry .entry -textvariable ::form(entry)
checkbutton .flag -variable ::form(flag)
proc handle_update {name1 name2 op} {
    # something changed
    # <your code here>
}
trace add variable ::form write handle_update 
```

# r - 矩阵乘法 - 不符合矩阵的松散定义

> ID：14158985
> 
> 赞同：5
> 
> 时间：2013-01-04T14:16:34.153
> 
> 标签：r, matrix

假设我们有以下内容：

```
x <- matrix(1:9, nrow=3)
y <- c(1,2,3)
x%*%y
y%*%x 
```

为什么矩阵乘法不是未定义的？我们知道这`x`是一个 3 x 3 矩阵并且`y`是一个 1 x 3 矩阵。所以`x %*% y`不应该被定义，`y %*% x`应该是一个 1 x 3 的矩阵。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T14:30:32.173

Luckily (or unfortunately, depending on the situation) many R operators (in their default state) are overloaded and do all sorts of things 'under the hood' - in this example, the default functionality for `%*%` in `R` automatically coerces `y` to matrix whose dimension will work. When you type

```
x %*% y 
```

it makes `y` a 3 x 1 matrix and when you type

```
y %*% x 
```

it makes `y` a 1 x 3 matrix.

Try comparing those with when you type

```
x %*% as.matrix(y) 
```

and

```
t(as.matrix(y)) %*% x 
```

respectively

# ruby - 红宝石嵌套哈希

> ID：14158987
> 
> 赞同：0
> 
> 时间：2013-01-04T14:27:57.610
> 
> 标签：ruby, algorithm, hashmap, nested

我有一个简单的问题，考虑一下这段代码：

```
class Hash
  def value_for(keys, value)
    common = self
    while keys.size > 1 and !common.nil?
      common = common[keys.shift] || { }
    end
    common[keys.last] = value
  end
end 
```

使用这段代码，我希望能够通过传递嵌套节点的数组和应该分配的值来创建嵌套哈希。

它应该像下面这样工作：

```
hash = {
  "message" => "hello world"
}

hash.value_for [ "nested", "message" ], "hello world"

hash
#=> {
       "message" => "hello world",
       "nested" => {
         "message" => "hello world"
       }
    }

hash.value_for [ "second", "nested", "message" ], "hello world"

hash
#=> {
       "message" => "hello world",
       "nested" => {
         "message" => "hello world"
       },
       "second" => {
         "nested" => {
           "message" => "hello world"
         }
       }
    } 
```

由于某种原因，我的代码在创建新哈希时不起作用。我怀疑它与`common = common[keys.shift] || { }`

有人能帮助我吗？我觉得我错过了一些愚蠢的东西......

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T15:00:38.740

你可以这样做：

```
class Hash
  def value_for((*keys, last), value)
    _h = nil
    keys.inject(self){|h, k| _h = h[k] ||= {}}
    _h[last] = value
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T14:45:56.230

这是一个工作代码示例：

```
class Hash
  def value_for(keys, value)
    common = {}
    common[keys.last] = value
    (keys.size - 2).downto(0).each do |index|
      common[keys[index]] = {keys[index+1] => common[keys[index+1]]}
    end 
    return common
  end 
end 
```

您的代码的问题是：

1.  要实现您尝试做的事情，您需要以相反的顺序遍历键，因为 key[i] 取决于 key[i+1] 的值
2.  您需要为每个键创建一个新的哈希，而`common[keys.shift]`实际上是一个值，您应该添加另一层嵌套。

希望这可以帮助。

# jquery - 首次加载时的 jQuery 同位素不起作用，我如何等待所有资源/图像被加载？

> ID：14158989
> 
> 赞同：13
> 
> 时间：2013-01-04T14:28:07.847
> 
> 标签：jquery, image, caching, jquery-isotope

我在这里使用 jQuery isotope 整理了一些东西.. [http://jsbin.com/eziqeq/6/edit](http://jsbin.com/eziqeq/6/edit)

它似乎通常可以工作，但是在第一次加载新选项卡时，Isotope 插件将包装元素的高度设置为 0。如果我刷新页面，它确实可以工作并根据里面发现的物品。

任何帮助将不胜感激。我想不出为什么在第一次加载时它不起作用，而在随后的重新加载时它是..除非它可能与缓存它加载的图像有关？

编辑 -

这是 Webkit 浏览器中的缓存问题，因为它在 Firefox 和工作选项卡上工作，当我清除缓存并刷新页面时，它在再次刷新之前无法工作。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-04T19:15:27.900

您可以使用`mkoryak`.

或者您可以使用以下内容：（不需要插件 -*仅限 jQuery*）：

```
// jQuery - Wait until images (and other resources) are loaded
$(window).load(function(){
    // All images, css style sheets and external resources are loaded!
    alert('All resources have loaded');
}); 
```

使用上述方法，您还可以确保所有`CSS`样式表都已加载（以确保您的页面在启动时正确显示`isotope`）。

“ [DOM ready](https://api.jquery.com/ready/) ”在 DOM 准备好（即标记）时触发。

```
$(document).ready( function(){ ... }); 
```

“[窗口加载](https://api.jquery.com/load-event/)”等待所有资源然后触发。

```
$(window).load( function(){ ... }); 
```

> **注意：**（@DACrosby）：如果图像被缓存（即，它们目前没有从站点加载 - 您正在使用本地副本），则 load() 不会总是触发。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-09-12T07:22:28.357

还有另一种选择来解决这个问题。`grid-item`如果您包含任何.js，则必须使用另一个 js `image`。下面的js链接是

```
<script src='http://imagesloaded.desandro.com/imagesloaded.pkgd.js'></script> 
```

然后在下面调用这个占位符js：

```
/*=============Code for Masonry Gallery ==============*/
    var grid = document.querySelector('.grid');
    var jQuerygrid = jQuery('.grid').isotope({
        itemSelector: '.element-item'
    }); 
    var iso = jQuerygrid.data('isotope');
    jQuerygrid.isotope( 'reveal', iso.items );

    imagesLoaded(grid, function(){
        iso.layout();
    }); 
```

您可以从 isotop 的官方网站获得完整而清晰的详细信息。[关联](http://isotope.metafizzy.co/layout.html#imagesloaded)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-05-31T09:56:31.677

注意：
1.windwo加载事件中调用iso-top函数（等待资源加载）也可以在footer中调用函数。

2.确认css加载后的函数调用。

```
$(window).load(function(){
     $('.iso').isotope({
     // options
     itemSelector: '.item',
     layoutMode: 'masonry'
    });
   }); 
```

也可以使用图像预加载器插件首先加载图像
[http://www.createjs.com/#!/PreloadJS](http://www.createjs.com/#!/PreloadJS)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-04T18:53:51.643

您需要在 chrome 中使用[imagesLoaded](http://isotope.metafizzy.co/docs/help.html#imagesloaded_plugin)插件。等到所有图像都加载完毕后再初始化同位素

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-08-20T21:32:03.790

解决此问题的更好方法是为同位素项目和/或图像本身提供宽度和高度。使用 widnow 加载方法，您最终会在同位素启动之前等待几秒钟，并且布局会发生变化，这很奇怪。

这是我在帖子循环内的 WordPress 主题中使用的内容：

```
<?php
//....
if ( get_post_gallery() ) {

        $gallery        = get_post_gallery( get_the_ID(), false );
        $galleryIDS     = $gallery['ids'];
        $pieces         = explode(",", $galleryIDS);

        foreach ($pieces as $key => $value ) {
            $image_medium   = wp_get_attachment_image_src( $value, 'medium');
            $image_full     = wp_get_attachment_image_src( $value, 'full'); 

            $w = $image_medium[1]; //Image Width
            $h = $image_medium[2]; //Image Height

?>

        <div class="iso-item" style="width:<?php echo $w; ?>px; height:<?php echo $h; ?>px">
                <a href="<?php echo $image_full ?>"   rel="lightbox">
                    <img width="<?php echo $w; ?>" height="<?php echo $h; ?>" src="<?php echo $image_medium ?>"/>
                </a>
        </div>
<?php 
        }
}
?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-03-10T09:30:14.973

快速纯 JavaScript 示例，用于在初始化同位素库之前检查所有图像是否已加载。

```
jQuery(document).ready(function($){
    var imgs = document.images,
        len = imgs.length,
        counter = 0;

    [].forEach.call( imgs, function( img ) {
        if(img.complete)
          incrementCounter();
        else
          img.addEventListener( 'load', incrementCounter, false );
    } );

    function incrementCounter() {
        counter++;
        if ( counter === len ) {
            // All images loaded, go ahead.
            var $grid = $('.grid').isotope();
        }
    }
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-03-24T10:38:48.627

```
$('window').imagesLoaded(function () {
    // filter items on button click
    $('.portfolio-btn-group').on('click', 'button', function () {
        var filterValue = $(this).attr('data-filter');
        $grid.isotope({filter: filterValue});
    });

    // init Isotope
    var $grid = $('.grid').isotope({
        itemSelector: '.grid-item',
        percentPosition: true,
        masonry: {
            // use element for option
            columnWidth: '.grid-item'
        }
    })
}); 
```

# javascript - 在多级猫鼬模式中设置属性

> ID：14158992
> 
> 赞同：0
> 
> 时间：2013-01-04T14:28:18.577
> 
> 标签：javascript, node.js, mongoose

这是我的架构：

```
var userschema = new mongoose.Schema({

  user: String,
  imagen: [{ 

              title: String,
              name: String,
              path: String,

           }]

}); 
```

我正在尝试这个：

```
 usermodel.findOne({ user: req.session.user }, function(err, user){

     var img = user.imagen[user.imagen.length];

     img.title = req.body.title;

     user.save(function(err){

        if(err) { throw err; }

     });

 }); 
```

控制台返回`TypeError: Cannot set property 'title' of undefined`。所以，我不知道为什么是未定义的。我想我必须创建一个新的数组元素，然后设置该数组元素的属性，但我不知道如何。有什么办法解决这个...？

谢谢提前！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T14:40:34.710

任何数组中都没有这样的项目：`anyArray[anyArray.length]`。你必须使用`anyArray[anyArray.length - 1]`我认为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T14:40:56.643

它是未定义的，因为您已经离开了`user.imagen`数组的末尾。它只有`user.imagen.length`元素，因此对于 JavaScript 的基于 0 的数组索引，最后一个元素位于 index `user.imagen.length-1`。

如果您尝试添加新元素：

```
usermodel.findOne({ user: req.session.user }, function(err, user){
    user.imagen.push({ title: req.body.title });
    user.save(function(err){
        if(err) { throw err; }
    });
}); 
```

# web-services - 在 AS3 中，如何动态地向 WebService 对象添加操作？

> ID：14158994
> 
> 赞同：0
> 
> 时间：2013-01-04T14:28:22.130
> 
> 标签：web-services, actionscript-3, apache-flex, actionscript, mxml

假设您在 MXML 中的 fx:Declarations 标记内定义了一个 WebService 对象，其中包含一些操作，以及这些操作的响应和故障处理程序。现在假设您想将该 WebService 传递给另一个对象的构造函数，然后它将在运行时向 WebService 添加一个操作，以及该新操作的自己的响应和故障处理函数。

例如：

```
<fx:Declarations>
    <s:WebService id="ws" fault="Alert.show('failure')">
        <s:operation
            name="Op1"
            resultFormat="object"
            result="WebOp1(event);"
            fault="WebFaultOp1()"
        />
    </s:WebService>
</fx:Declarations>

.
.
.
        var a:A = new A(ws); 
```

和：

```
public class A
{
    private var m_ws:WebService;

    public function A(pWS:WebService)
    {
        m_ws = pWS;
        m_ws.Op2 = new Operation();
        m_ws.Op2.resultFormat = "object";
        m_ws.Op2.result = WebOp2(event);
        m_ws.Op2.fault = WebFaultOp2(event);
    }

    private function WebOp2(pEvent:ResultEvent):void
    {
    }

    private function WebFaultOp2(pEvent:FaultEvent):void
    {
    }
} 
```

怎么可能做到这一点？如果必须，我愿意使用 MXML，但我在这里真正想要避免的是必须创建两个共享相同 WSDL 的单独 WebService 对象。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T15:00:46.153

尝试这样做：

```
var operation:Operation = new Operation(webService, 'noName'); // mx.rpc.soap.mxml.Operation
operation.addEventListener(ResultEvent.RESULT, onResult);
operation.addEventListener(FaultEvent.Fault, onFault);
webService.operations['noName']=operation; 
```

# c# - 将联系人添加到通讯组列表：主体对象必须具有有效的 SID IdentityType 才能执行此操作

> ID：14158995
> 
> 赞同：1
> 
> 时间：2013-01-04T14:28:24.813
> 
> 标签：c#, active-directory

我正在尝试将 a 添加`Contact`到分发列表中。

这是我的做法：

```
public void AddContactsToGroup(string groupName, string[] userNames)
{
         using (PrincipalContext context = GetPrincipalContext())
         {
            var group = GroupPrincipal.FindByIdentity(context, IdentityType.Name, groupName);

            if (group.IsSecurityGroup.HasValue && group.IsSecurityGroup.Value == true)
               throw new ArgumentException("Groups cannot be security groups.");

            foreach (var userName in userNames)
            {
               var query = new ContactPrincipal(context)
                              {
                                 Name = userName
                              };

               var user = Search(query).First();

               group.Members.Add(user);
            }

            group.Save(context);
         }
      }

  private List<T> Search<T>(T query) where T : Principal
  {
     var searcher = new PrincipalSearcher();
     searcher.QueryFilter = query;
     PrincipalSearchResult<Principal> results = searcher.FindAll();

     return results.Cast<T>().ToList();
  } 
```

这是`ContactPrincipal`课程（我从某个地方借来的）：

```
 [DirectoryObjectClass("contact")]
   [DirectoryRdnPrefix("CN")]
   public class ContactPrincipal : AuthenticablePrincipal
   {
      public ContactPrincipal(PrincipalContext context)
         : base(context)
      {
      }

      public static ContactPrincipal FindByIdentity(PrincipalContext context, string identityValue)
      {
         return (ContactPrincipal) Principal.FindByIdentityWithType(context, typeof (ContactPrincipal), identityValue);
      }

      public static ContactPrincipal FindByIdentity(PrincipalContext context, IdentityType identityType,
                                                    string identityValue)
      {
         return
            (ContactPrincipal)
            Principal.FindByIdentityWithType(context, typeof (ContactPrincipal), identityType, identityValue);
      }

      [DirectoryProperty("mail")]
      public string EmailAddress
      {
         get
         {
            if (ExtensionGet("mail").Length == 1)
            {
               return ExtensionGet("mail")[0].ToString();
            }
            else
            {
               return null;
            }
         }
         set { ExtensionSet("mail", value); }
      }

      [DirectoryProperty("givenName")]
      public string GivenName
      {
         get
         {
            if (ExtensionGet("givenName").Length == 1)
            {
               return ExtensionGet("givenName")[0].ToString();
            }
            else
            {
               return null;
            }
         }
         set { ExtensionSet("givenName", value); }
      }

      [DirectoryProperty("middleName")]
      public string MiddleName
      {
         get
         {
            if (ExtensionGet("middleName").Length == 1)
            {
               return ExtensionGet("middleName")[0].ToString();
            }
            else
            {
               return null;
            }
         }
         set { ExtensionSet("middleName", value); }
      }

      [DirectoryProperty("sn")]
      public string Surname
      {
         get
         {
            if (ExtensionGet("sn").Length == 1)
            {
               return ExtensionGet("sn")[0].ToString();
            }
            else
            {
               return null;
            }
         }
         set { ExtensionSet("sn", value); }
      }

      [DirectoryProperty("mobile")]
      public string MobileTelephoneNumber
      {
         get
         {
            if (ExtensionGet("mobile").Length == 1)
            {
               return ExtensionGet("mobile")[0].ToString();
            }
            else
            {
               return null;
            }
         }
         set { ExtensionSet("mobile", value); }
      }

      [DirectoryProperty("telephoneNumber")]
      public string VoiceTelephoneNumber
      {
         get
         {
            if (ExtensionGet("telephoneNumber").Length == 1)
            {
               return ExtensionGet("telephoneNumber")[0].ToString();
            }
            else
            {
               return null;
            }
         }
         set { ExtensionSet("telephoneNumber", value); }
      }
   } 
```

我的问题是，当我点击

```
group.Members.Add(user) 
```

方法中的行`AddContactsToGroup`，抛出一个错误，指出

> *Principal 对象必须具有有效的 SID IdentityType 才能执行此操作。*

当我询问 的属性时`ContactPrincipal`，`Sid`实际上是 null。这并不奇怪，因为 a`Contact`是一个没有安全性的对象。

如何添加`Contact`到非安全组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T04:29:15.810

为什么不只使用 SID？否则，您使用什么来唯一标识您的用户和组？图形用户界面？

* * *

1.  您确定`ContactPrinciple`搜索查询返回正确的结果吗？[在 .NET Framework 3.5 中管理目录安全主体中寻找自己](http://msdn.microsoft.com/en-us/magazine/cc135979.aspx#S6)的部分可能会有所帮助。为什么不使用`ContactPrincipal` `FindByIdentity`而不是搜索查询来搜索每个用户？

2.  同样，也许您应该添加一行来检查用户原则是否等于，`null`然后再尝试将其添加到组中。

    if(user != null) { group.Members.Add(user); }

3.  此外，[该底部的线程](http://social.msdn.microsoft.com/Forums/en/netfxbcl/thread/222efb3c-ec22-4da1-a2a4-de3e23cacc45)似乎描述了您遇到的相同问题。这是VB中提供的解决方案。

    > 如何将联系人添加到组:)？由于某种原因，通过将用户或组添加到组的常规方法将联系人添加到组会导致错误。为了解决这个问题，我使用了以下代码：
    > 
    > ```
    > Public Sub AddPrincipalToGroup(ByVal Group As GroupPrincipal, ByVal ChildPrincipal As Principal)
    >     ' use the underlying DirectoryEntry objects to avoid 
    >     ' issues surrounding contacts and other custom types
    >     Dim deGroup As DirectoryEntry = Group.GetUnderlyingObject()
    > 
    >     deGroup.Properties("member").Add(ChildPrincipal.DistinguishedName)
    >     deGroup.CommitChanges()
    > End Sub 
    > ```

其他可能有用的链接：

*   [在 .NET 中的 Active Directory 组中添加和删除用户](https://stackoverflow.com/questions/2143052/adding-and-removing-users-from-active-directory-groups-in-net)
*   [如何通过ldap中的域名获取用户的用户名和SID](https://stackoverflow.com/questions/9477032/how-to-get-username-and-sid-for-user-by-a-domain-name-in-ldap)
*   [我使用什么 Active Directory 字段来唯一标识用户？](https://stackoverflow.com/questions/1911315/what-active-directory-field-do-i-use-to-uniquely-identify-a-user)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T11:23:32.147

可能您对组或联系人的值不是预期的 distinctName？

但是，没有理由不能让联系人成为安全组的成员，或者启用安全性的用户或组对象可能不是通讯组的成员。

也许先回到基础？

假设用户具有权限，此（简约）代码可以完美运行。如果没有，请在 directoryEntries 中使用正确的用户名和密码。

```
public static void AddContactToGroup(string ContactDN, string GroupDN)
{
  try
  {
    using (DirectoryEntry directoryEntry = new DirectoryEntry("LDAP://" + GroupDN))
    {
      directoryEntry.RefreshCache();
      DirectoryEntry Contactgroup = new DirectoryEntry("LDAP://" + ContactDN);
      directoryEntry.Properties["member"].Add(Contactgroup.Properties["distinguishedName"].Value);
      directoryEntry.CommitChanges();
    }
  }
  catch (Exception e)
  {
    string msg = e.Message.ToString();
    throw e;
  }
} 
```

ContactDN 是联系人的专有名称。GroupDN 是组的专有名称。

如果这对您有用，请添加您需要的内容。如果不。找出原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T06:17:36.990

听起来您的用户要么没有 SID，要么正在尝试使用已被占用的 SID。你看过SID是什么吗？JSuar 也是正确的，对于 AD，检查 null 始终是一个好主意（我不能强调这一点），AD 对象可以返回 null 而不会抛出任何错误，null 检查永远不会伤害任何人。