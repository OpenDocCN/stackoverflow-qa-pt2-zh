# StackOverflow 问答 15620000-15620999

# oracle - ORA-01031: 未找到消息 1031；没有产品消息文件=RDBMS，设施=ORA

> ID：15620002
> 
> 赞同：1
> 
> 时间：2013-03-25T16:33:04.203
> 
> 标签：oracle, ora-01031

尝试使用 连接到 Oracle 数据库时`sqlplus / as sysdba`，出现以下错误：

> ORA-01031: 未找到消息 1031；没有产品消息文件=RDBMS，设施=ORA

我正在使用Windows环境。

我该如何纠正这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-27T04:33:22.637

您几乎可以肯定对 ORACLE_HOME 下的目录没有读取权限。

该工具无法生成消息，因为它无法读取文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T16:40:46.833

可能您的 oracle 环境设置不正确。您需要设置 ORACLE_HOME 和 ORACLE_SID 环境变量。ORACLE_HOME 应该指向客户端安装的根目录。

您是否也配置了 TNSNAMES.ORA？

有关类似问题，请参见此处：[https ://forums.oracle.com/forums/thread.jspa?threadID=619126](https://forums.oracle.com/forums/thread.jspa?threadID=619126)

# servicebus - Windows Server 的传出数据服务总线

> ID：15620005
> 
> 赞同：0
> 
> 时间：2013-03-25T16:33:06.647
> 
> 标签：servicebus, azureservicebus

对于 Windows Server 的服务总线，性能计数器可用于每秒传入和传出消息的数量。但也可以使用以字节为单位的***平均***传入或传出消息的性能计数器。但是对于服务总线的传入（和/或）传出字节，是否还有性能计数器（或其他解决方案）？（不是网络，因为它是用于开发机器的）

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T16:41:50.567

所有的计数器似乎都记录在这里：

[http://msdn.microsoft.com/en-us/library/windowsazure/jj192996(v=azure.10).aspx](http://msdn.microsoft.com/en-us/library/windowsazure/jj192996(v=azure.10).aspx)

这不是输入/输出总字节数的特定计数器。如果使用网络性能计数器无法做到这一点，似乎唯一的解决方法是将输入或输出的消息数乘以平均消息大小。

# javascript - jQuery每个数组索引追加到div

> ID：15620006
> 
> 赞同：2
> 
> 时间：2013-03-25T16:33:09.803
> 
> 标签：javascript, jquery, html, arrays

我正在尝试将我创建的数组的值附加到另一个 div 中，但是当我附加数组值时，它会附加数组的所有值，而不仅仅是我添加的值（通过单击），任何建议都会很棒， 提前致谢！

HTML

```
<div id="products">
    <ul>
        <li><p>Lorem 1</p><button class="target">Add</button></li>
        <li><p>Lorem 2</p><button class="target">Add</button></li>
    </ul>
</div>
<div id="cart">
    <ul>

    </ul>
</div> 
```

jQuery

```
$(document).ready(function(){

    var array = Array();

    $(".target").click(function() {

        array.push($(this).siblings('p').text());

        $.each(array, function(index, value) {

            $("#cart ul").append("<li>"+value+"</li>");
        });

    });
}); 
```

当我点击添加时说它显示的第一个按钮

定理 1

但是当我单击第二个按钮上的添加时，它会显示

洛雷姆 1 洛雷姆 1 洛雷姆 2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:40:23.440

您正在将项目添加到数组中，如果您想保留已添加项目的列表，这很有意义，但是当您将项目添加到列表时，您正在遍历数组，这将使其将所有项目添加到已经存在的项目中那里。

您可以只添加最后一项：

```
array.push($(this).siblings('p').text());
$("#cart ul").append("<li>" + array[array.length - 1] + "</li>"); 
```

或者您可以在添加项目之前清除列表：

```
array.push($(this).siblings('p').text());
$("#cart ul").empty();
$.each(array, function(index, value) {
  $("#cart ul").append("<li>" + value + "</li>");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T16:35:49.303

因为你在数组的每个元素上循环，所以你得到了所有元素。尝试在单击功能中不使用 $.each 会更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T16:36:36.470

如果您只想在单击选择器时添加一个值`$(".target")`，您应该执行类似的操作

```
 // assuming you want the last value in the array.
  var value = array[array.length-1]; // could also do $(this).siblings('p').text()
  $("#cart ul").append("<li>"+value+"</li>"); 
```

看起来你甚至可能不需要你的数组，（除非它也被其他一些函数使用）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T16:37:20.600

`**[LIVE DEMO](http://jsbin.com/ipulem/3/edit)**`

```
$(function(){

  var array = [];

  $(".target").click(function() {

     array.push( $(this).siblings('p').text() );
     $("#cart ul").append("<li>"+ array[array.length -1] +"</li>");

  });

}); 
```

# ios - HTTP 请求作为 iOS 中带有本地通知的后台任务

> ID：15620009
> 
> 赞同：1
> 
> 时间：2013-03-25T16:33:14.220
> 
> 标签：ios, objective-c, xcode, notifications, uilocalnotification

如果您不是那么喜欢 Android，那么该操作系统中的应用程序有一个称为“后台服务”的东西。这基本上让开发人员有机会在不强制应用程序处于前台的情况下执行一些后台任务。

那么iOS中有这样的东西吗？（版本 5 和更新版本）我基本上想要做的是调用 API 并每分钟获取一些 JSON 数据，然后解析结果，然后根据从 HTTP 请求中获取的结果向用户显示本地通知横幅. 我几乎不相信这在 iOS 中是不可能的，但我还没有找到这样的东西。

1.  每分钟调用一次 API 并获取一些 JSON 数据。
2.  解析 JSON 数据并添加一些逻辑来处理数据。
3.  是否应该显示本地通知，取决于请求的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:50:01.547

这只能以非常有限的方式完成。纯后台进程只允许以特殊形式（例如媒体播放器、VOIP 或基于位置的服务）。您可以使用 启动有限的后台任务[`beginBackgroundTaskWithExpirationHandler:`](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIApplication_Class/Reference/Reference.html#//apple_ref/occ/instm/UIApplication/beginBackgroundTaskWithExpirationHandler:)，但它们不会永远运行。

更多信息可以在这里找到：[在后台运行应用程序超过 10 分钟](https://stackoverflow.com/questions/9738488/run-app-for-more-than-10-minutes-in-background)

# kdb - 调用 string() 时的输出差异

> ID：15620011
> 
> 赞同：3
> 
> 时间：2013-03-25T16:33:22.357
> 
> 标签：kdb, q-lang

我想将多个具有不同类型的变量连接成一个字符串。这很好用：

```
q)"select ", string[10:00:00] ," abc"
"select 10:00:00 abc" 
```

当我用括号调用字符串时，输出是不同的：

```
q)"select ", string(10:00:00) ," abc"
"s"
"e"
"l"
"e"
"c"
"t"
" "
"10:00:00"
," "
,"a"
,"b"
,"c" 
```

我认为在第一个示例中，函数字符串是使用时间类型的原子参数调用的，而在第二个调用中，时间*列表*是在调用字符串之前创建的。

第二个示例中的输出表示什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T16:43:59.613

使用 string[10:00:00]，您将在输入 10:00:00 上调用字符串函数。使用 string (10:00:00) ,"abc" ，您实际上将 (10:00:00) 连接到 "abc" ，然后将结果串起来。您必须记住，执行是从右到左进行的。

```
q)(10:00:00) ," abc"
10:00:00
" "
"a"
"b"
"c"
q)string (10:00:00) ," abc"
"10:00:00"
," "
,"a"
,"b"
,"c" 
```

# php - 序列化文件资源

> ID：15620012
> 
> 赞同：4
> 
> 时间：2013-03-25T16:33:22.543
> 
> 标签：php, serialization

如何序列化资源？

插图：

```
<?php
if ($_fileHandle = fopen('file.txt', 'a')) {
    echo "fopen success <br />";
} else {
    echo "fopen failed <br />";
}

var_dump($_fileHandle);//displays "resource(3, stream)"

$serializedResource = serialize($_fileHandle); 
$unserializedResource = unserialize($serializedResource);

var_dump($unserializedResource);//displays "int 0"

?> 
```

如您所见，如果按照[文档](http://php.net/manual/en/function.serialize.php)所述进行序列化/反序列化，则 fopen 返回的资源将丢失：

> serialize() 处理所有类型，除了资源类型

我希望能够序列化资源以将其存储在会话中，以使其在每个页面中都可用。可能有另一种方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T16:36:14.110

资源不打算被序列化，并且不能通过会话变量在页面加载之间持久化。它们基本上只是一些系统资源的句柄。PHP 将在脚本执行结束时自动取消分配这些资源句柄。

话虽如此，您当然可以将正在使用的文件路径放在会话中，并在后续页面加载时对其进行新处理。

# matlab - 获取用于 USB 到串行连接的 ADAPTER

> ID：15620013
> 
> 赞同：0
> 
> 时间：2013-03-25T16:33:24.680
> 
> 标签：matlab, com, get, serial-port, adaptor

我想获得我在 USB 转串口上使用的适配器。您知道使用适配器的任何方法吗？我已经在互联网上搜索过，但是我没有找到任何有用的东西。目前我正在使用 matlab 从设备中获取数据。我使用函数 instrhwinfo。

函数的输出是我的情况：

序列信息 =

```
 AvailableSerialPorts: {'COM14'}
       JarFileVersion: 'Version 2.8.0'
ObjectConstructorName: {'serial('COM14');'}
          SerialPorts: {'COM14'} 
```

但是，这些细节还不够，我想知道 COM14 上使用的 ADAPTER（我使用的电缆型号）。

但我想知道更多关于 COM14 的细节。在这种情况下，只有一个 COM PORT 可用，但问题是如果有多个，我需要知道电缆的型号才能连接到正确的 COM PORT。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T17:57:32.703

您必须查看注册表以获取更多信息。但是，条目可能取决于您的特定设备。大多数 USB/串行电缆使用 FTDI 芯片并在以下位置创建注册表项：`SYSTEM\CurrentControlSet\Enum\FTDIBUS`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T20:54:56.047

我使用的一种不太复杂的解决方案是循环遍历所有活动的 COM 端口，直到找到能够提供适当响应的端口。

# javascript - Junior Mobile FW - 从 html 加载视图

> ID：15620014
> 
> 赞同：0
> 
> 时间：2013-03-25T16:33:25.053
> 
> 标签：javascript, zend-framework, mobile, backbone.js

我刚刚与[Junior](http://justspamjustin.github.com/junior/#home)开始了一个新项目。

我认为这一切都很简单，但真正困扰我的是视图（意味着页面的内容）目前只是一个很长的 JS 字符串，这太可怕了。

我不能像那样构建我的移动应用程序，因为我需要一个 html 文件来为每个页面使用它自己的 JS 脚本和东西。

我以前使用过 jQuery Mobile，但我讨厌设计 JQ 移动应用程序，因为我必须重写几乎所有内容才能从头开始，这当然不是一个优雅的解决方案。

所以我的问题是：

您知道在我的移动应用程序中加载每个页面内容的好方法吗？！Ajax 不起作用（即使在 async: false 模式下也不行）它总是给我未定义的。

这是初级用于加载视图的脚本：[JS](http://justspamjustin.github.com/junior/docs/example.html)

希望有人能帮忙！:-)

顺便说一句：jQuery Mobile 正是我想要的（它通过 ajax 将其他视图加载到一个 div 中，当它准备好时它会进行转换。）但同样：由于这个可怕的 CSS 问题，我不想使用 jQMob。

最好的问候帕特里克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T07:01:04.550

您可以使用[underscore 的微模板解决方案](http://underscorejs.org/#template)从 dom 加载模板：

```
// In your HTML:
<script type="text/template" id="myPageTemplate">
  <div id="myPage">
    <p>Hello!</p>
  </div>
</script> 
```

然后你可以像这样加载它们`javascript`并获得相同的结果，但将标记保留在 html 中：

```
var template = _.template( $('#myPageTemplate').html() , {}); 
```

有许多类似的模板解决方案，但加载和编译它们的过程往往非常相似。您可能希望查看的其他解决方案：

*   [车把](http://handlebarsjs.com/)
*   [胡子](http://mustache.github.com)

# c# - 如何在数据库中写入当前日期？

> ID：15620019
> 
> 赞同：0
> 
> 时间：2013-03-25T16:33:32.580
> 
> 标签：c#, asp.net-mvc, date, razor, time

我正在尝试将当前日期传递到文本框中，因为用户无法在此字段中输入值。这将写入数据库。我这样做的方式是，我不能在数据库中写入，因为表中的字段是 NULLABLE，所以不记录。我怎样才能做到这一点？

```
@Html.TextBox("DATA_HORA", string.Format("{0:dd/MM/yyyy}", DateTime.Now), new { disabled = "disabled", @readonly = "readonly", Style = "width:100px;" }) 
```

谢谢你们。

- 编辑 -

我正在使用 ADO.NET 实体框架。“创建”页面是在我创建控制器时自动生成的。

-- 编辑 2 --

我的控制器：

```
namespace enChamados.Controllers
{ 
    public class ChamadosController : Controller
    {
        private enChamados_ModeloContainer db = new enChamados_ModeloContainer();

        //
        // GET: /Chamados/

        public ViewResult Index()
        {
            return View(db.CHAMADOS.ToList());
        }

        //
        // GET: /Chamados/Details/5

        public ViewResult Details(int? id)
        {
            CHAMADOS chamados = db.CHAMADOS.Find(id);
            return View(chamados);
        }

        //
        // GET: /Chamados/Create

        public ActionResult Create()
        {
            return View();
        } 

        //
        // POST: /Chamados/Create

        [HttpPost]
        public ActionResult Create(CHAMADOS chamados)
        {
            if (ModelState.IsValid)
            {
                db.CHAMADOS.Add(chamados);
                db.SaveChanges();
                return RedirectToAction("Index");
            }

            return View(chamados);
        }

        //
        // GET: /Chamados/Edit/5

        public ActionResult Edit(int? id)
        {
            CHAMADOS chamados = db.CHAMADOS.Find(id);
            return View();
        }

        //
        // POST: /Chamados/Edit/5

        [HttpPost]
        public ActionResult Edit(CHAMADOS chamados)
        {
            if (ModelState.IsValid)
            {
                db.Entry(chamados).State = EntityState.Modified;
                db.SaveChanges();
                return RedirectToAction("Index");
            }
            return View();
        }

        //
        // GET: /Chamados/Delete/5

        public ActionResult Delete(int? id)
        {
            CHAMADOS chamados = db.CHAMADOS.Find(id);
            return View(chamados);
        }

        //
        // POST: /Chamados/Delete/5

        [HttpPost, ActionName("Delete")]
        public ActionResult DeleteConfirmed(int id)
        {            
            CHAMADOS chamados = db.CHAMADOS.Find(id);
            db.CHAMADOS.Remove(chamados);
            db.SaveChanges();
            return RedirectToAction("Index");
        }

        protected override void Dispose(bool disposing)
        {
            db.Dispose();
            base.Dispose(disposing);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T16:56:48.783

正如 Brian P 回答的那样，您可以为此字段创建一个 html 编辑器

创建一个 DateTime EditorTemplate（在 Views\Shared 文件夹中添加一个名为 EditorTemplates 的文件夹），如下所示：

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<Nullable<System.DateTime>>" %>
<% if ( Model.HasValue )
   { %>
    <%: Html.TextBox( "" , String.Format( "{0:ddd, MMM d, yyyy}" , Model.Value )  )%>
<% }
   else
   { %>
   <%: Html.TextBox( "" , String.Format( "{0:ddd, MMM d, yyyy}" , DateTime.Now )  )%>
<% } %> 
```

从你的角度来看使用

```
<%: Html.EditorFor(model => model.nameOfYourField) %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T20:14:13.913

如果要在模型上设置不应更改的日期，则不应*使用*文本字段。不仅没有理由在视图层中传递信息，而且如果模型绑定器可以访问该字段，则它可能会被更改。如果您的最终用户知道如何在他们的浏览器中使用开发工具，即使隐藏、禁用或只读字段仍然可以修改。

在您的控制器中只需设置日期：

```
[HttpPost]
public ActionResult Create(CHAMADOS chamados)
{
    if (ModelState.IsValid)
    {
        chamados.CreatedDate = DateTime.Now;
        db.CHAMADOS.Add(chamados);
        db.SaveChanges();
        return RedirectToAction("Index");
    }

    return View(chamados);
} 
```

或者对于这样的事情，你实际上是在设置一个默认值，通常在你的模型中设置它更容易：

```
private DateTime? createdDate = null;
public DateTime CreatedDate
{
    get { return createdDate ?? DateTime.Now; }
    set { createdDate = value; }
} 
```

然后，您不必在控制器中执行任何操作。CreatedDate 将在保存时自动填充当前日期和时间。

# silverlight - 放置在顶部网格视图上时将项目添加到网格视图下方

> ID：15620029
> 
> 赞同：0
> 
> 时间：2013-03-25T16:33:45.863
> 
> 标签：silverlight, drag-and-drop, telerik, radgridview

在我的主页上，我有一个按钮和 Telerik mainRadGridView。当我点击我的按钮时，我会得到一个弹出窗口，它将它分为左右两个区域。

在左边，我有一个 RadTreeView，在右边，我有一个 popupRadGridView。

最初，当我的弹出窗口打开时，popupRadGridView 被禁用。当我第一次在弹出窗口中从左到右下降时，没有任何内容添加到 popupRadGridView 因为它是正确的禁用。

但是，当我第二次在打开的弹出窗口中禁用 popupRadGridView 时，**我的主页上的 mainRadGridView 中添加了一个元素，这是错误的**。

我无法理解如何停止添加到我的主页。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:36:28.427

检查 GridView 的 Drop 事件中的 e.Options.ParticipatingVisualRoots - 应该为您提供参与操作的活动打开子窗口的数量。

有关更多信息，请点击此链接

[Telerik Silverlight](http://www.telerik.com/help/silverlight/raddraganddrop-child-window-non-telerik-popups.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T22:36:05.497

我解决了我的问题如下

在我的主页代码隐藏中。我确实喜欢下面

```
void mainRadGridView_OnDropInfo(object sender, DragDropEventArgs e)
{
  if(e.Options.ParticipatingVisualRoots.Count > 0)
      {
        return;
      }
    else  
    { 
      do stuff;
    }
} 
```

# css - 对齐项目列表

> ID：15620031
> 
> 赞同：0
> 
> 时间：2013-03-25T16:33:49.127
> 
> 标签：css, list, alignment

我在获取在线问卷上的项目列表（每个项目前面都有一个字母）的文本以正确对齐时遇到问题。换句话说，我有一个看起来像这样的列表（使用字母 'o' 表示单选按钮），其中使用 f、i、j 等字母，单选按钮和随附的文本略有移动但很明显向左转：

```
a.  o Yes  o No  Asbestosis  
b.  o Yes  o No  Asthma  
c.  o Yes  o No  Chronic bronchitis  
d.  o Yes  o No  Emphysema  
e.  o Yes  o No  Pneumonia  
f.  o Yes  o No  Tuberculosis 
```

这是 HTML 代码，为简洁起见，省略了 b、c、d 和 e 项的代码。

```
<div id="question20" class="indent" style="display:block;line-height:15px">
    <span class="num-bullet">3</span>Have you <em><b>ever had</b></em> any of the following pulmonary or lung problems?
    <p class="p1">a.
    <input type="hidden" xmlTag="asbestosis" is_required='yes' id="question20a" name="question20a" number="20" prerequisite="0" section="Part A. Section 2." description="3.a. Have you had asbestosis?" />
    <input type="radio" id="20y" name="20" value="Yes" style="padding-left:5em"/>Yes
    <input type="radio" id="20n" name="20" value="No"/>No
    Asbestosis
    </p>
    <div id="div_explanation20" class="indent" style="display:none;padding-left:60px">
        <input type="text" id="explanation20" name="explanation20" number="20" xmlTag="asbestosis_explanation" size="40" maxlength="40" value="Please explain" text_label="Please explain"  section="Part A. Section 2." description="3.a. Have you had asbestosis?" /><br />
    </div>  
    <p class="p1">f.
    <input type="hidden" xmlTag="tuberculosos" is_required='yes' id="question28" name="question28" number="28" section="Part A. Section 2." description="3.i. Have you had tuberculosis?" />
    <input type="radio" id="28y" name="28" value="Yes" style="padding-left:5em"/>Yes
    <input type="radio" id="28n" name="28" value="No"/>No
    Tuberculosis
    </p>
    <div id="div_explanation28" class="indent" style="display:none;padding-left:60px">
        <input type="text" id="explanation28" name="explanation28" number="28" xmlTag="tuberculosis_explanation" size="40" maxlength="40" value="Please explain" text_label="Please explain"  section="Part A. Section 2." description="3.i. Have you had tuberculosis?" /><br />
    </div> 
```

这是我认为适用的 CSS 代码：

```
span.num-bullet { display:block; float:left; width:15px; line-height:15px; text-align:center; color:#00588a; font-size:11px; font-weight:bold; background:url(../img/numbered-bullet.gif) no-repeat; margin-right:10px;}  

p.p1 {text-indent:30px}  

form div.group div.indent {margin-left:30px; clear:left;} 
```

我绝不是 CSS 专家。充其量是新手。其中大部分是由同事提供的。

谢谢！

[JSFiddle](http://jsfiddle.net/U443M/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T16:46:49.800

如果我正确理解了这个问题，那么它可以通过使用固定宽度或等宽字体来解决，例如 Courier New，其中所有字符都具有相同的宽度。否则 i、l、f 等字符可能会显得更窄并偏离对齐方式。

# python - 在python中重置在几分钟内到期的密钥的最佳方法

> ID：15620039
> 
> 赞同：0
> 
> 时间：2013-03-25T16:34:05.113
> 
> 标签：python

我必须每两个小时重置一次我的密钥（类似于会话密钥），之后就会过期。在我的代码中实现重新激活功能的最佳方法是什么？

除了通过执行一些需要有效密钥的操作来检查状态之外，我没有其他方法可以检查我的密钥是否仍然有效。

我正在寻找一些解决方案，我可以用它来灵活地为我的密钥设置过期时间（作为参数传递）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:42:45.130

概述：

1.  创建一个对象类来表示每个键；
2.  作为该对象的每个实例的元素，它是定时生命；
3.  有一个回调在适当的时间调用实例；
4.  对象决定在超时时死亡或重新启动

这是一个简单的例子：

```
import threading, time, random

class Key(object):
    results={}
    def __init__(self,refresh,name):
        self.refresh=refresh
        self.name=name
        self.t0=time.time()
        self.t=threading.Timer(refresh,self.now_what)
        self.t.start()

    def now_what(self):
        s='{}: {:6.4f}'.format(self.name,time.time()-self.t0)
        Key.results.setdefault(self.refresh,[]).append(s)
        # do the thing you want at this time ref with the Key...

    def time_left(self):
        return max(self.t0+self.refresh-time.time(),0)

keys=[Key(random.randint(2,15),'Key {}'.format(i)) for i in range(1,1001)]
t=time.time()
while any(key.time_left() for key in keys):
    if time.time()-t > 1:
        kc=filter(lambda x: x, (key.time_left() for key in keys))
        if kc:
            tmpl='{} keys; max life: {:.2f}; average life: {:.2f}'
            print tmpl.format(len(kc),max(kc),sum(kc)/len(kc))
            t=time.time()

for k in sorted(Key.results):
    print '\nKeys with {} secs life:'.format(k)
    for e in Key.results[k]:
        print '\t{}'.format(e) 
```

印刷：

```
1000 keys; max life: 13.98; average life: 7.38
933 keys; max life: 12.98; average life: 6.85
870 keys; max life: 11.97; average life: 6.29
796 keys; max life: 10.97; average life: 5.80
729 keys; max life: 9.97; average life: 5.26
666 keys; max life: 8.96; average life: 4.68
594 keys; max life: 7.96; average life: 4.16
504 keys; max life: 6.96; average life: 3.77
427 keys; max life: 5.96; average life: 3.32
367 keys; max life: 4.95; average life: 2.74
304 keys; max life: 3.95; average life: 2.16
215 keys; max life: 2.95; average life: 1.76
138 keys; max life: 1.95; average life: 1.32
84 keys; max life: 0.95; average life: 0.72

Keys with 2 secs life:
    Key 26: 2.0052
    Key 27: 2.0053
    Key 41: 2.0048
    ...
Keys with 3 secs life:
    Key 4: 3.0040
    Key 31: 3.0065
    Key 32: 3.0111
    ...
Keys with 4 secs life:
... 
```

您可以看到准确度存在一些差异，但对于大多数目的而言，它是 1/100 秒。

# c++ - 为字符数组 C++ 分配额外的内存

> ID：15620049
> 
> 赞同：0
> 
> 时间：2013-03-25T16:34:31.697
> 
> 标签：c++, string, pointers, string-concatenation

我有这个问题，我有一个字符串，我将它作为字符指针传递给函数。

```
 void test(char * str) {
    ....
 } 
```

其中str =“abc”。现在我想在这个字符串的末尾添加一些额外的字符而不创建新字符串。我不想使用 strcat，因为我不知道要在字符串末尾添加多少个字符以及要添加什么。我试图使用 realloc 但它不起作用，因为 str 是在堆栈上分配的。

有什么办法可以动态增加 char 数组的大小？

更新：我被问到一个在我的采访中涉及到的问题。我被要求在不使用额外空间的情况下这样做。因此，如果我使用 malloc 分配内存，我在技术上是在使用额外的空间，对吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T16:37:18.413

不，特别是如果字符串是在堆栈上分配的。堆栈空间在编译时是固定的。您必须首先分配更多空间，或者分配一个具有更多空间的新数组并`strcpy`结束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T17:58:12.030

而不是使用 realloc（不在堆栈上完成）或 strcpy（使用额外的缓冲区空间），您可以在输入字符串之后立即存储来自字节的新值。在下面的简单示例中，我以“abcd”开头并在函数 fn 的末尾添加三个 z。

```
void fn(char *str)
{
    int len = strlen(str);
    memset(str+len, 'z', 3);
    str[len+3] = 0;
    return;
}

int main()
{   
    char s[] = "abcd";
    printf("%s\n", s);
    fn(s);
    printf("%s\n", s);  
} 
```

输出：

```
abcd
zzz 
```

这种方式可以扩展到在原始字符串前面添加不同的字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T16:52:29.880

如果您使用的是 C++ - 然后坚持`std::string`并忘记整个处理`char *`.

但是，如果您希望使用`char *`for 字符串，则分配一个新的字符数组并`strcpy()`从一个字符串到另一个字符串。不要忘记释放原始`char *`内存以避免内存泄漏。

> 在我的采访中，有人问了我一个与此有关的问题。我被要求在不使用额外空间的情况下这样做。因此，如果我使用 malloc 分配内存，我在技术上是在使用额外的空间，对吗？

如何在不增加额外空间的情况下增加字符串的长度？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T16:52:33.683

```
void test(string  &str) {
    ....
    str += "wibble";
 } 
```

似乎适用于 C++

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T16:36:59.607

您必须`delete`使用旧字符串并分配一个`new`具有所需长度的新字符串。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-25T16:39:26.620

抱歉，没有。无法调整动态变量/数组的大小。问题是另一个变量，甚至另一个调用框架可能紧跟在相关变量之后。这些不能移动以腾出空间，因为在代码的其他地方可能存在指向这些对象的指针。

# ruby - Ruby 过滤问题

> ID：15620050
> 
> 赞同：0
> 
> 时间：2013-03-25T16:34:34.090
> 
> 标签：ruby, regex

我一直在尝试从文件中过滤一些文本以仅显示某些出生年份

我有一些读取文件ages.txt的红宝石，它包含姓名和出生年份

*   乔·博格斯 (2001)
*   玛丽·博格斯 (1987)
*   约翰苹果 (2010)
*   老家伙 (1990)

我希望能够过滤一个年份范围，即找到出生于 1987 年和 1990 年之间的人

我努力了

```
#open('ages.txt') { |f| f.grep(/^19(8[0-9]|10)$/) } 
```

但我得到一个错误

```
ages.rb:3:in `===': invalid byte sequence in UTF-8 (ArgumentError) 
```

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:43:11.080

和`^`使`$`表达式尝试匹配整行，这是行不通的。

尝试：`/19(8[7-9]|90)/`

[这](http://rubular.com/r/Z94eDybP19)是一个工作版本。让我知道这是否有帮助。

# php - 纯PHP倒计时？

> ID：15620059
> 
> 赞同：-6
> 
> 时间：2013-03-25T16:35:00.447
> 
> 标签：php, html, mysql

我知道有一些方法可以使用 Javascript 创建倒计时。AJAX 等，但我正在一个网站上工作，我无法在需要此倒计时的页面中使用 javascript 代码！

基本上，我需要做的是这样的：

网站所有者上传一张图片（一次只能上传一张，一天只能上传一张），这张图片及其名称和 ID 将存储在 Mysql 数据库中。

现在，在网站的首页上，该图像将正确显示（该位工作正常）。我只需要知道如何在图像上传到数据库后立即使用 PHP 创建一个简单的倒计时（24 小时倒计时），并且我需要在首页的该图像下方显示这个倒计时。

首先，是否有一种简单的方法可以仅使用 PHP（纯 PHP 没有 javascript）来做到这一点？

如果是这样，如何？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T16:52:22.053

一种可能性是[gifsockets](https://github.com/videlalvaro/gifsockets)。它们通过流式传输实时生成的 GIF 来发挥作用。您可以每秒（分钟，无论如何）生成一个新帧并将其发送给客户端。[https://github.com/reactphp/gifsocket](https://github.com/reactphp/gifsocket)有一个 gifsockets 的 PHP 端口。虽然这确实是对一个深奥问题的深奥答案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T16:42:51.810

虽然我会推荐 javascript，因为我很无聊，但我认为这可能是一个有趣的练习。假设您可以访问 $_GET[] 数组，您可以将计数器变量传递给脚本，该脚本返回对自身的引用，并带有递减参数：

```
<?php
  if(isset($_GET['counter']))
  {
    $counter=intval($counter)-5;
  }
  else
  {
    $counter=100;
  }
  if($counter<0) {
    //todo, insert what to do on time is 0
  }
?>
<meta http-equiv="refresh" content="5;URL='http://example.com/?counter=<?php echo $counter; ?>"> 
```

我仍然推荐不同的解决方案

# javascript - OR 运算符如何在这个 javascript 中工作？

> ID：15620064
> 
> 赞同：1
> 
> 时间：2013-03-25T16:35:25.560
> 
> 标签：javascript

给定一个数字，程序应该返回一个仅使用 *3 或 +5 的操作序列来获取该数字，因此有两条路径可供选择。这个程序在调用自己时如何知道调用哪个函数？它如何知道每条路径调用了多少次。换句话说，我不明白如何使用`OR`操作员来确定`find()`要使用哪个调用以及每个调用有多少。

```
function findSequence(goal) {
    // we start at 1, and history is a string that will keep track of the operations
    function find(start, history) {
        // case when start and goal is 1.
        if (start == goal)
            return history; // return string containg 1
        // case when we build start past what we needed
        else if (start > goal)
            return null;
        else
            // Dont understand this part!
            return find(start + 5, "(" + history + " + 5)") ||
                find(start * 3, "(" + history + " * 3)");
    }
    return find(1, "1");
}

document.write(findSequence(13)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T16:37:46.317

运算符检查左操作数的`||`真值。有趣的是，`||`表达式的计算结果不是`true`or `false`。如果真值为真，则表达式计算为该左操作数。如果不是，则计算为正确的操作数。例子：

```
> 5 || 10
5
> 5 || 0
5
> 0 || 10
10
> 0 || undefined
undefined 
```

因此`a || b`实际上等价于`a ? a : b`。同样，`a && b`实际上等价于`a ? b : a`：

```
> 0 && 10
0
> 0 && undefined
0
> 5 && 10
10
> 5 && undefined
undefined 
```

非布尔值的真值在[JavaScript 规范](http://ecma262-5.com/ELS5_HTML.htm#Section_9.2)中确定：

*   未定义 -> 假
*   空 -> 假
*   String -> 如果为空字符串则为 False，否则为 True
*   对象 > 真

* * *

编辑：哦，正如 mattedgod 指出的那样，一旦表达式计算为结果，则表达式的其余部分根本不会被计算。例如：

```
> function fail() { throw "I failed!"; }
> fail()
XXX "I failed!"
> 5 || fail()
5
> 0 && fail()
0 
```

在上述情况下不会发生故障，但在以下情况下会发生：

```
> 0 || fail()
XXX "I failed!"
> 5 && fail()
XXX "I failed!" 
```

因此，如果你有两次调用`find()`like `find(...) || find(...)`，如果第一次调用的结果具有真值，那么它的结果将被返回，而第二次调用根本不会执行。如果第一次调用的结果有一个假真值，那么第二次调用将执行并且表达式计算结果是什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T16:39:48.033

这依赖于 JavaScript（和许多其他语言）称为“短路”的属性。

如果您考虑一下，如果您正在评估某事为真并且它为`A || B`真，如果 A 为真，那么整个表达式将为真，检查 B 没有意义。反之则为真`&&`，如果 A 为假而您是评估`A && B`，整个表达式是错误的，所以没有必要打扰 B。

在您的示例中，如果第一次调用`find`成功，它将不会执行第二次。但是，如果第一次调用不成功（我猜它返回 false 或 null 或评估为 JS false 的东西），第二次调用将被执行。

# android - 使用预选项目创建可选 GridView 的最佳方法？

> ID：15620065
> 
> 赞同：1
> 
> 时间：2013-03-25T16:35:25.753
> 
> 标签：android, gridview

我正在尝试制作一个带有选项的 GridView 来选择一项。必须预先选择 GridView 中的第一项。我找到了一种方法，它**可以工作***，但我认为有一种更有效的方法可以做到这一点。

*   *如果有人想制作具有相同目的的 GridView 或 ListView，此代码可以帮助您。有用。*

我的代码：

**来自 ImageAdapter 的 getView()：**

```
public View getView(final int position, View convertView, ViewGroup parent) {
    final ImageView imageView;
    if (convertView == null) {  // if it's not recycled, initialize some attributes
        imageView = new ImageView(mContext);
        imageView.setLayoutParams(new GridView.LayoutParams(85, 85));
        imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
        imageView.setPadding(8, 8, 8, 8);
    } else {
        imageView = (ImageView) convertView;
    }
    // Sets the background for the first item (that should be pre-selected.
    if(position == 0) imageView.setBackgroundResource(Color.GRAY);

    imageView.setImageResource(mThumbIds[position]);
    return imageView;
} 
```

**活动：**

```
final GridView gridview = (GridView) view.findViewById(R.id.gridView);
gridview.setAdapter(new ImageAdapter(MainActivity.this));
gridview.setSelection(0);

gridview.setOnItemClickListener(new AdapterView.OnItemClickListener() {
    View previous = null; // The previous selected item
    boolean flag = true;
            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                if(flag) { 
                /*
                * Checks if there is no selected item. 
                * If true (=until now nothing has been selected) 
                * it will set the first item as the "previously" selected one.
                */
                    previous = gridview.getChildAt(0); 
                    flag = false; 
                }
                if(previous != view) { 
                /* 
                * Checks if the current selected item has been already selected or no. 
                * If true (=new item selected) it will change 
                * the background of the new selected item.
                */

                    view.setBackgroundResource(Color.GRAY);
                    if(previous != view) previous.setBackgroundResource(0);
                    previous =  view; // Sets the "new" selected item as the previous one.
                }                   
            }
}); 
```

**XML 文件：**

```
<GridView
    android:id="@+id/gridView"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_marginTop="16dp"
    android:gravity="center"
    android:numColumns="4" >
</GridView> 
```

* * *

我试图使它易于理解，我希望你能理解我所做的正确。

如果您对更有效的方法有建议，我会很高兴听到。

谢谢！

# eclipse - 在 Ubuntu 12.04 上使用 eclipse juno 配置 tomcat 7.0.37 的问题

> ID：15620067
> 
> 赞同：0
> 
> 时间：2013-03-25T16:35:34.767
> 
> 标签：eclipse, tomcat7

我在使用 eclipse juno 配置 tomcat 7 时遇到了一些问题。我安装了 jdk 1.7 update 17 和 tomcat 7.0.32。当我尝试定义使用tomcat 7的新服务器时。我无法将它添加到定义服务器部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T14:39:40.323

我有同样的问题。也许这个博客对你有用：http: [//hariprasad.info/cannot-create-a-server-using-the-selected-type-eclipse-tomcat/](http://hariprasad.info/cannot-create-a-server-using-the-selected-type-eclipse-tomcat/)

# jquery - $.get 作为文档对象

> ID：15620068
> 
> 赞同：1
> 
> 时间：2013-03-25T16:35:36.087
> 
> 标签：jquery, html, cordova

我正在使用phonegap。我已经获得了外部网站的内容。然后我想编辑和过滤它的内容。也许使用 GetElementByID 或其他东西。但是我不知道该怎么做。有人可以为我提供解决方案吗？

```
var $link = 'http://.....'+method2+word2+location2+'.....'; 
  $.get($link, function (data) {
  data = $(data).find('#mainContentArea');
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:39:01.523

使用`indexer`零索引将`jQuery`对象转换为`DOM`对象。

```
var $link = 'http://.....'+method2+word2+location2+'.....'; 
$.get($link, function (data) {
     data = $(data).find('#mainContentArea')[0];
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T16:42:15.380

如果您想归档特定的 div 内容，为什么不尝试以下类似的方法

```
$('#resultdiv').load($link+' #mainContentArea', function() {
  alert('Load was performed.'); // Callback function to do whatever you want to do
}); 
```

回调函数 - 如果提供了“完整”回调，则会在后处理和 HTML 插入完成后执行。回调会为 jQuery 集合中的每个元素触发一次，并依次设置为每个 DOM 元素。

# android - 视口和 CSS 媒体查询的宽度不同？

> ID：15620070
> 
> 赞同：3
> 
> 时间：2013-03-25T16:35:38.650
> 
> 标签：android, css, responsive-design, media-queries, viewport

我在为智能手机创建 css 媒体查询时遇到问题，尤其是对于三星 Galaxy S3 等 Android 设备。

似乎`<meta name="viewport" content="width=device-width, initial-scale=1.0" />`CSS 媒体查询在设备宽度上获得了不同的数据。

如果我将 Galaxy S3 保持在纵向模式，它的屏幕是 720 x 1280，`content="width=device-width`从元视口看来，它给了我相同的宽度。

但是，如果我在横向模式下查看同一页面，`content="width=device-width`从元视口看来仍然给我 720 宽度，同时收听更大尺寸的媒体查询，可以说是 1280。

这导致网页加载时的视图有些放大，可能是因为它认为 720 是最大宽度。

检查屏幕：

**Galaxy S3 人像 (Chrome)**

![银河 S3 肖像](../Images/91e6e7f9b431d4a6688ff276e8e491a6.png)

**Galaxy S3 横向 (Chrome)**

![银河 S3 风景](../Images/e1a80582a541acd903d291f1c287ade9.png)

以上是在带有 Chrome 浏览器的三星 Galaxy S3 上测试的。

我有一个类似的问题，实际上更糟糕的是默认的 Android 浏览器称为“Internet”。在那里，它似乎忽略了所有 CSS 媒体查询，同时仍在监听视口。

检查画面：

**Galaxy S3 纵向（默认）**

![默认安卓浏览器](../Images/afd2d16901a452f87daf5618d17062fc.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-04T19:50:14.403

尝试在手机中使用检查器来处理值和标签，或者向我们发布演示。如果您的问题没有附加任何代码，很难指出确切的问题。

# asp.net-mvc - 如何使 My MVC4 应用程序与移动 /tab 兼容？

> ID：15620071
> 
> 赞同：0
> 
> 时间：2013-03-25T16:35:38.513
> 
> 标签：asp.net-mvc, asp.net-mvc-4

这是我的基本问题，但我认为这是值得的。我有 MVC4 应用程序，它绝对可以在我的 PC/笔记本电脑浏览器上运行。下一步在手机/标签中还可以做什么？该应用程序具有所有最新的 Jquery、引导程序、HTML5 和 Razor 引擎代码。

相同的应用程序会以更小的尺寸打开移动浏览器吗？如何使工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T16:58:04.793

有三种选择。

1.  您可以为您的 Web 应用程序创建本机移动应用程序（IOS、Android 等）。假设您想坚持使用当前的应用程序，那么这个选择对您来说毫无用处。
2.  诸如[jQuery Mobile](http://jquerymobile.com/)之类的框架使您能够为您的 Web 应用程序编写视图，当您通过平板电脑和手机等移动设备访问您的应用程序时，这些视图将被使用。
3.  最后一个选择是使用[响应式设计](http://en.wikipedia.org/wiki/Responsive_web_design)技术。当页面上的大部分内容都是静态的时，这尤其有用。如果你用过bootstrap，据我所知，它是一个响应式的前端框架。在这种情况下，您无需执行任何操作。

您可以使用 Chrome 开发者工具 (F12) 测试您的应用程序行为。只需转到开发人员工具中的设置并将设备指标覆盖为您要测试的分辨率即可。它应该可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-28T10:47:46.947

[http://channel9.msdn.com/Events/BUILD/BUILD2011/TOOL-803T?ocid=aff-n-in-loc--hr](http://channel9.msdn.com/Events/BUILD/BUILD2011/TOOL-803T?ocid=aff-n-in-loc--hr)

您在上面的链接中拥有您想要的一切......

# c# - 如何更新 JQGrid 中的行？

> ID：15620075
> 
> 赞同：0
> 
> 时间：2013-03-25T16:35:50.303
> 
> 标签：c#, web-services, jquery, jqgrid

我正在使用 JQGrid 来显示来自数据库的结果。现在我需要按用户更新行。我曾尝试使用内联导航器。我使用以下代码制作网格。

```
$("#MyGrid").jqGrid({
        url: service,
        datatype: "json",
        mtype: 'GET',
        colNames: ['Col1', 'Col2'],
        colModel: [
  { name: 'Col1', index: 'Col1', sortable: true, resizable: true, editable: true, sorttype: "text" },
  { name: 'Col2', index: 'Col2', align: 'left', sortable: true, resizable: true, width: 50, editable: true },

        pager: '#pagerLab',
        rowNum: 1000,
        rowList: [10, 30, 100, 1000],
        sortname: 'modified',
        viewrecords: true,
        gridview: true,
         loadonce: true,        
        editurl: '/Service.svc/UpdateGrid',
    });
      jQuery("#MyGrid").jqGrid('navGrid', "#pagerLab", { edit: true, add: false, del: false, search:false });
    jQuery("#MyGrid").jqGrid('inlineNav', "#pagerLab"); 
```

}

现在我不确定如何编写服务器端代码来保存用户在数据库中的更改。我正在使用启用 AJAX 的 Web 服务。

这是我用于显示网格的 Web 服务代码：

```
 [OperationContract]
        [WebInvoke(Method = "GET", BodyStyle = WebMessageBodyStyle.Bare, ResponseFormat = WebMessageFormat.Json)]
        public JQGridViewTable MyGrid(string ID)
        {
            Reader reader = new Reader();

            return Reader.ReadDetails(ID);
        } 
```

还有我在 Reader 类中的 C# 代码（在数据模型中）：

```
 public JQGridViewTable ReadDetails(string ID)
    {        
           JQGridViewTable table = new JQGridViewTable();
    // read data from database and store in table   
        return table;
    } 
```

我需要帮助：

1-我需要使用 Post 而不是 Get 吗？请注意，我在一个函数中显示和编辑网格。2-我需要在 Javascript 中添加任何其他内容吗？例如编辑或恢复功能？在文档中，它们在内联编辑中具有编辑和恢复功能，但在内联导航中没有。3- 以什么格式将数据发送到 Web 服务进行编辑？对于显示，它是 JQGridView 格式。4- 我不知道如何在 Web 服务中实现 UpdateGrid 方法，因为我不知道 Inline Navigator 函数到底在做什么，它正在向 Web 服务发送什么数据以及它期望从服务器获得什么数据。

我搜索了整个网络，但每个人都以不同的方式使用它。我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T17:09:09.603

根据您的示例代码，jqGrid 将对

```
editurl: '/Service.svc/UpdateGrid' 
```

您将需要在 WCF 服务上创建此方法。jqGrid 将调用 HTTP Post 并调用此方法，发送列值。

您将在 WCF 服务中添加与以下类似的操作：

```
 [OperationContract]
    [WebInvoke(Method = "POST", BodyStyle = WebMessageBodyStyle.WrappedRequest, RequestFormat = WebMessageFormat.Json)]
    public void UpdateGrid(string col1, string col2)
    {
          //code to actually do the update to the database
    } 
```

WCF 操作将负责实际定位数据库表中的正确行（我假设您可以根据存储在 col1 或 col2 中的值执行此操作）并执行更新操作。

下面的代码片段来自我的实现，使用您的示例作为起点：

**[默认.html]**

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script src="Scripts/jquery-1.8.3.js" type="text/javascript"></script>
    <script src="Scripts/jqGrid/grid.locale-en.js" type="text/javascript"></script>
    <script src="Scripts/jqGrid/jquery.jqGrid.js" type="text/javascript"></script>
    <script src="Scripts/jquery-ui-1.10.2.js"></script>
    <link href="Content/ui.jqgrid.css" rel="stylesheet" />
    <link href="Content/themes/base/jquery-ui.css" rel="stylesheet" />

    <script type="text/javascript">
        var lastSel;

        $(document).ready(function() {

            var service = 'http://localhost:5127/Service.svc/GetData';

            $("#MyGrid").jqGrid({
                url: service,
                datatype: "json",
                height: 255,
                width: 600,
                colNames: ['Col1', 'Col2'],
                colModel: [
                              { name: 'Col1', index: 'Col1', sortable: true, resizable: true, editable: false, sorttype: "text" },
                              { name: 'Col2', index: 'Col2', align: 'left', sortable: true, resizable: true, width: 50, editable: true },
                ],
                jsonReader: {
                    root: "rows",
                    page: "page",
                    total: "total",
                    records: "records",
                    cell: "",
                    repeatitems: false
                },
                rowNum: 1000,
                rowList: [10, 30, 100, 1000],
                pager: '#pagerLab',
                sortname: 'Col1',
                viewrecords: true,
                gridview: true,
                loadonce: true,       
                onSelectRow: function (id) {
                    if (id && id !== lastSel) {
                        $(this).restoreRow(lastSel);
                        lastSel = id;
                    }
                    jQuery(this).editRow(id, true);
                },
                editurl: 'http://localhost:5127/Service.svc/UpdateData',
                ajaxRowOptions: { contentType: 'application/json; charset=utf-8' },
                serializeRowData: function (data) {
                    return JSON.stringify(data);
                }

            });

            jQuery("#MyGrid").jqGrid('navGrid', "#pagerLab",
                { edit: false, add: false, del: false, search: false }
                );
            jQuery("#MyGrid").jqGrid('inlineNav', "#pagerLab");

        });
    </script>
</head>

<body>
    <table id="MyGrid"></table>
    <div id="pagerLab"></div>
</body>
</html> 
```

**[IService.cs]**

```
[ServiceContract]
public interface IService
{
    [OperationContract]
    [WebInvoke(Method="GET", BodyStyle=WebMessageBodyStyle.Bare, ResponseFormat=WebMessageFormat.Json)]
    jqGridModel<GridListItem> GetData();

    [OperationContract]
    [WebInvoke(Method="POST", BodyStyle=WebMessageBodyStyle.WrappedRequest,  RequestFormat=WebMessageFormat.Json)]
    void UpdateData(string id, string oper, string Col1, string Col2);

}

[DataContract]
public class GridListItem
{
    [DataMember]
    public string Col1 { get; set; }

    [DataMember]
    public string Col2 { get; set; }
}

[DataContract]
public class jqGridModel<T>
{
    public jqGridModel()
    {
        this.total = 0;
        this.rows = null;
        this.records = 0;
        this.page = 0;
    }

    [DataMember]
    public int total { get; set; }
    [DataMember]
    // this is the property where you store the actual data model
    public IList<T> rows { get; set; }
    [DataMember]
    public int page { get; set; }
    [DataMember]
    public int records { get; set; }
    }
} 
```

**[服务.svc.cs]**

```
public class Service : IService
{

    jqGridModel<GridListItem> IService.GetData()
    {
        jqGridModel<GridListItem> model = new jqGridModel<GridListItem>();
        List<GridListItem> list = new List<GridListItem>();
        GridListItem item = new GridListItem() { Col1 = "1", Col2 = "Dog" };
        list.Add(item);

        item = new GridListItem() { Col1 = "2", Col2 = "Cat" };
        list.Add(item);

        model.records = list.Count;
        model.rows = list;
        return model;
    }

    void IService.UpdateData(string id, string oper, string Col1, string Col2)
    {
        //do work here to save the updated data
    }
} 
```

# php - 刷新后无法检测到 PHP 会话

> ID：15620076
> 
> 赞同：1
> 
> 时间：2013-03-25T16:35:56.447
> 
> 标签：php, session

我正在开发一个需要使用会话的 PHP 应用程序。我用三层架构开发了我的应用程序。

我只使用一个 PHP 页面和虚拟表单来提交用户操作，所有处理都是通过实体/函数特定类进行的。

首次打开页面时，我会检查变量，如果之前从未打开过，我会显示登录表单。

当我收到来自此表单的帖子时，我会检查用户，如果用户正常，我会开始会话

```
 if(isset($_POST['login']))
{
    if($_POST['login']=='login')
    {
        //valida user
        $accoes=$du->login($_POST['username'],$_POST['password']);
        if($accoes===false)
        {
            echo "<SCRIPT LANGUAGE=\"JavaScript\" TYPE=\"text/javascript\">";
            echo "alert('Erro no Login');";
            echo "</SCRIPT>";
            unset($accoes);
        }
        else
        {
            //utilizador valido
            echo "<SCRIPT LANGUAGE=\"JavaScript\" TYPE=\"text/javascript\">";
            echo "alert('Utilizador válido');";
            echo "</SCRIPT>";
            session_start();
            $user="teste";
            $screen="logged";
            $_SESSION['user']=$user;
        }
    }
} 
```

尽管通过用户操作刷新此页面时，我看不到会话 ID 或会话变量。

我是否遗漏了诸如 session_commit 或其他指令之类的内容？

session_start() 是否应该在尝试检查会话变量之前出现？

PHP.ini 文件中是否缺少某些内容？

当我重新加载时，我做的第一件事是检查会话变量

```
if(session_id() != '') {
    $user=$_SESSION['user'];
} 
```

我知道我应该知道如何解决这个问题，但是直到现在我对 PHP 的体验还只是 Flex/Flash，所以会话管理并不是真正必要的。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:40:35.903

我可以肯定指出的一件事..您的 session_start() 应该是打开 php tahg 后的第一行

```
<?php
   session_start(); 
```

并且应该在要调用的每个页面上`$_SESSION`调用它..否则会话将无法正确访问

# excel - 使用 OLEDB 从打开的 Excel 文件中读取数据

> ID：15620080
> 
> 赞同：1
> 
> 时间：2013-03-25T16:36:01.203
> 
> 标签：excel, vba, oledb

我有一个带有 2 张纸的 excel 文件（让我们说文件 X）。在第一张表中，我显示图表。其次，我有图表的数据。为了从图表中获取数据，我需要像在 SQL 中那样处理这些数据，例如 Group by、order by。有什么方法可以使用 oledb 在同一个 excel 文件（文件 X）中使用 VBA 代码从第二张表中读取数据？

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T18:10:23.183

这是一个使用 SQL 连接来自两个范围的数据的示例：如果文件处于打开状态，它将正常工作（只要它已保存，因为您需要文件路径）。

```
Sub SqlJoin()

    Dim oConn As New ADODB.Connection
    Dim oRS As New ADODB.Recordset
    Dim sPath
    Dim sSQL As String

    sSQL = "select a.blah from <t1> a, <t2> b where a.blah = b.blah"

    sSQL = Replace(sSQL, "<t1>", Rangename(Sheet1.Range("A1:A5")))
    sSQL = Replace(sSQL, "<t2>", Rangename(Sheet1.Range("C1:C3")))

    If ActiveWorkbook.Path <> "" Then
      sPath = ActiveWorkbook.FullName
    Else
      MsgBox "Workbook being queried must be saved first..."
      Exit Sub
    End If

    oConn.Open "Provider=Microsoft.ACE.OLEDB.12.0;Data Source='" & sPath & "';" & _
                 "Extended Properties='Excel 12.0;HDR=Yes;IMEX=1';"

    oRS.Open sSQL, oConn

    If Not oRS.EOF Then
        Sheet1.Range("E1").CopyFromRecordset oRS
    Else
        MsgBox "No records found"
    End If

    oRS.Close
    oConn.Close

End Sub

Function Rangename(r As Range) As String
    Rangename = "[" & r.Parent.Name & "$" & _
                r.Address(False, False) & "]"
End Function 
```

# delphi - 通过 TADOQuery 执行的复杂 T-SQL 脚本触发“多步 OLE DB 操作生成错误”。

> ID：15620083
> 
> 赞同：1
> 
> 时间：2013-03-25T16:36:12.853
> 
> 标签：delphi, ado

我有一个非常大的 SQL 块，我试图在 Delphi 内部针对 Microsoft SQL 数据库执行。我得到这个：

```
 Multiple-step OLE DB operation generated errors. 
  Check each OLE DB status value, if available. No work was done. 
```

该脚本有多个 sql`IF`语句，后跟存储过程的调用、变量声明`BEGIN`等块。最后它返回一些变量值。`END``EXEC``SELECT @Variable1 AsName1,@Variable2 AsName2...`

上面的多步错误是作为来自 ADO 的 OLEException 出现的，而不是来自 Delphi 代码，并且发生在所有 SQL exec-stored-procedure 发生之后，因此我怀疑它在到达最后阶段时会触发这个 OLE 异常哪个`SELECT @Variable1 AsName1,...`可以取回一些变量值供我的程序查看。

我知道这篇已停用/已弃用的 MS KB 文章，不幸的是，这不是我的实际问题：

```
http://support.microsoft.com/kb/269495 
```

简而言之，知识库文章说要修复注册表项并从连接字符串中删除“持久安全信息”。那不是我的问题。我问这个问题是因为我已经找到了答案，而且我认为，当我在寻找解决方案几个小时后发现了几个问题时，被困在这里的其他人可能不想浪费几个小时来寻找潜在问题。任何想用不同选项添加另一个答案的人都可以，如果它是可重现的，我会选择你的，如果有必要，我会将这个变成社区 Wiki，因为这个“ADO 记录集”可能有十几个晦涩的原因心情不好，对你的 T-SQL 异常不满意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T16:39:01.277

我发现了各种文档来源中列出的几个潜在原因。问题中的原始知识库文章建议从我的 ADO 连接字符串中删除“持久安全信息”，但是在只有 a`TADOConnection`和一个的应用程序的独立测试中`TADOQuery`，存在或不存在`Persist Security Info`没有效果，也没有明确设置它对或错。

什么 DID 修复了它删除了这个`CursorType`声明：

`CursorType=ctKeyset`

我了解到的是双向 ADO 数据集适用`SELECT * FROM TABLE`于 ADO，但不适用于复杂的 SQL 脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-13T14:00:04.707

此错误的潜在来源是更新具有大值的 char 字段。

示例：表单具有最大长度属性设置为 20 个字符的编辑框，并且 Oracle 数据库表具有定义为 char(10) 的字段。使用 10 个字符（或更少）更新将正常工作，而使用超过 10 个字符进行更新将导致 ADOQuerry.UpdateBatch() 上出现“多步骤...”错误。您还必须知道 CHAR 总是有 20 个字符。考虑在编辑框中修剪值。CHAR 的行为不同于 VARCHAR2 类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-08T11:36:02.627

如果您有带参数的查询，请检查查询中的参数数量是否与脚本匹配...！

# ios - NSMutableDictionary 中的对象突然变为 null

> ID：15620084
> 
> 赞同：1
> 
> 时间：2013-03-25T16:36:13.377
> 
> 标签：ios, objective-c, automatic-ref-counting

**更新：**

我添加了一个方法来检查字典中的空对象，并且确实找到了它们：

![NSMutableDictionary 中的空值](../Images/e84ed41a20daa570ee843f73602a50f2.png)

有没有人见过这样的事情？这不可能是由不正确的内存管理引起的。请注意，左侧的字典对象树实际上是正确的。

**结束更新**

我在`NSMutableDictionary`启用 ARC 的情况下添加了一些条目。在添加之一之后，添加的对象突然变为空。这是代码（我对其进行了扩展以确保我没有发疯）：

```
NSMutableDictionary *base = [NSMutableDictionary dictionary];

id o = [GAConstant kTRUE];
id k = [GAClause parse:@"(x 1 1)"];
[base setObject:o forKey:k];
NSLog(@"### Added (%@ -> %@): %@", k, o, base);

o = [GAClause parse:@"(y X)"];
k = [GAClause parse:@"(x 2 X)"];
[base setObject:o forKey:k];
NSLog(@"### Added (%@ -> %@): %@", k, o, base);

o = [GAConstant kTRUE];
k = [GAClause parse:@"(y 3)"];
[base setObject:o forKey:k];
NSLog(@"### Added (%@ -> %@): %@", k, o, base);

o = [GAConstant kTRUE];
k = [GAClause parse:@"(y 6)"];
[base setObject:o forKey:k];
NSLog(@"### Added (%@ -> %@): %@", k, o, base); 
```

这是输出：

```
2013-03-25 16:10:33.546 Jungle[1978:11303] ### Added (<GAListClause: 0x75b0dc0> -> <GAConstant: 0x75b12b0>): {
    "<GAListClause: 0x75b1b00>" = "<GAConstant: 0x75b12b0>";
}
2013-03-25 16:10:33.548 Jungle[1978:11303] ### Added (<GAListClause: 0x75b2870> -> <GAListClause: 0x75b1aa0>): {
    "<GAListClause: 0x75b2270>" = "<GAListClause: 0x75b1aa0>";
    "<GAListClause: 0x75b1b00>" = "<GAConstant: 0x75b12b0>";
}
2013-03-25 16:10:33.549 Jungle[1978:11303] ### Added (<GAListClause: 0x75b2b90> -> <GAConstant: 0x75b12b0>): {
    "<GAListClause: 0x75b2d80>" = "<GAConstant: 0x75b12b0>";
    "<GAListClause: 0x75b2270>" = "<GAListClause: 0x75b1aa0>";
    "<GAListClause: 0x75b1b00>" = "<GAConstant: 0x75b12b0>";
}
2013-03-25 16:10:33.550 Jungle[1978:11303] ### Added (<GAListClause: 0x75b2f00> -> <GAConstant: 0x75b12b0>): {
    "<GAListClause: 0x75b2d80>" = "<GAConstant: 0x75b12b0>";
    "<GAListClause: 0x75b2270>" = "<GAListClause: 0x75b1aa0>";
    "<GAListClause: 0x75b1b00>" = "<GAConstant: 0x75b12b0>";
    "<GAListClause: 0x75b1d60>" = (null);
} 
```

该方法`[GAConstant kTRUE]`初始化并返回一个静态变量。`[GAClause parse:]`每次返回一个新的解析对象。

很清楚为什么`k`变量的地址与字典的内容不对应：它复制它们。仍然不清楚 null 如何作为值潜入。每次运行时字典中 null 的位置都会发生变化，有时我会得到其中两个。

看起来内存管理出了点问题，但是什么？ARC 在此处启用。

这是与`[GAConstant kTRUE]`方法相关的代码：

```
+ (GAConstant *)kTRUE {
    static GAConstant *kTRUE = nil;
    static dispatch_once_t onceToken = 0;

    dispatch_once(&onceToken, ^{
        kTRUE = [[GAConstant alloc] initWithString:@"true"];
    });

    return kTRUE;
} 
```

有时 null 在字典中波动：

```
2013-03-25 17:09:16.426 Jungle[2294:11303] ### Added (<GAListClause: 0x7182ce0> -> <GAConstant: 0x7183430>): {
    "<GAListClause: 0x7183a30>" = "<GAConstant: 0x7183430>";
}
2013-03-25 17:09:16.428 Jungle[2294:11303] ### Added (<GAListClause: 0x75467b0> -> <GAListClause: 0x71839d0>): {
    "<GAListClause: 0x7546a30>" = (null);
    "<GAListClause: 0x7183a30>" = "<GAConstant: 0x7183430>";
}
2013-03-25 17:09:16.429 Jungle[2294:11303] ### Added (<GAListClause: 0x7546cd0> -> <GAConstant: 0x7183430>): {
    "<GAListClause: 0x7546ec0>" = "<GAConstant: 0x7183430>";
    "<GAListClause: 0x7546a30>" = "<GAListClause: 0x71839d0>";
    "<GAListClause: 0x7183a30>" = "<GAConstant: 0x7183430>";
}
2013-03-25 17:09:16.430 Jungle[2294:11303] ### Added (<GAListClause: 0x7547040> -> <GAConstant: 0x7183430>): {
    "<GAListClause: 0x75470f0>" = (null);
    "<GAListClause: 0x7546ec0>" = "<GAConstant: 0x7183430>";
    "<GAListClause: 0x7546a30>" = "<GAListClause: 0x71839d0>";
    "<GAListClause: 0x7183a30>" = "<GAConstant: 0x7183430>";
} 
```

这是它在调试器中的样子：

![调试器](../Images/e6f87817a60b3c742490ac7bba3f633e.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T20:21:47.890

你的问题很奇怪。总之，调试器将您的字典显示为正确但`objectForKey`返回`nil`.

我在过去的一个小时里一直在考虑这个问题，我很确定我只知道这种情况发生的一种可能性——不正确`hash`或`isEqual:`方法。

特别是，我认为该`isEqual:`方法是不对称的。换句话说，如果我们有

```
id k = [GAClause parse:@"(x 1 1)"]; 
```

然后

```
[k isEqual:k] 
```

不一定是真的。

然后，如果您获取字典键并尝试查找它们的值（也是`[NSDictionary description]`如此），则找不到这些值。

我相信您应该将断点 /`NSLog`放入`isEqual`并观察比较值时发生的情况。

另请注意，字典键被复制，因此在复制过程中可能会出现相等问题。

# symfony - 如何在 Symfony2 的路由配置中使用 cookie？

> ID：15620088
> 
> 赞同：0
> 
> 时间：2013-03-25T16:36:16.360
> 
> 标签：symfony, cookies, routing

我有一个`City`存储在 cookie 中的参数。我想将其值作为模式前缀包含在我的路由配置中，如下所示：

```
# MyBundle/Resources/config/routing.yml

MyBundle_hotel:
    resource: "@MyBundle/Resources/config/routing/hotel.yml"
    prefix:   /%cityNameFromCookie%/hotel 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T21:38:11.493

给我们一个用例，说明您希望它如何工作，因为我没有看到困难。路由由您可以通过`generateUrl`函数、`url`twig 函数或`path`twig 函数指定的参数组成。

在 Twig 中，您可以执行此操作

```
{{ path('MyBundle_hotel', {cityNameFromCookie: app.request.cookies.get('cityNameFromCookie')}) }} 
```

在控制器动作中

```
$cookieValue = $this->get('request')->cookies->get('cityNameFromCookie');
$url = $this->generateUrl('MyBundle_hotel', array('cityNameFromCookie' => $cookieValue)); 
```

或从可以访问容器的任何地方

```
$cookieValue = $this->container->get('request')->cookies->get('cityNameFromCookie');
$url = $this->container->get('router')->generate('MyBundle_hotel', array('cityNameFromCookie' => $cookieValue)); 
```

在最后一个示例中，您可能想要更改访问容器的方式。

如果您担心它看起来有多复杂，您可以抽象这个逻辑并将其放在服务中或扩展`router`服务。

[你可以在 Symfony 的文档中](http://symfony.com/doc/current/book/service_container.html)找到关于服务和服务容器的文档。

您还可以通过命令列出服务`php app/console container:debug`并找到`router`服务及其命名空间，从中您可以尝试找出如何扩展`router`服务（了解服务如何工作的非常好的方法）。

否则，这是创建服务的简单方法。

在您的 services.yml 中（在您的 Bundle 或 app/config/config.yml 中）

```
services:
    city:
        class: MyBundle\Service\CityService
        arguments: [@router, @request] 
```

在你的`CityService`课上

```
namespace MyBundle\Service

class CityService
{

    protected $router;
    protected $request;

    public function __construct($router, $request) 
    {
        $this->router = $router;
        $this->request = $request;
    }

    public function generateUrl($routeName, $routeParams, $absoluteUrl)
    {
        $cookieValue = $this->request->cookies->get('cityNameFromCookie');

        $routeParams = array_merge($routeParams, array('cityNameFromCookie' => $cookieValue));

        return $this->router->generateUrl($routeName, $routeParams, $absoluteUrl);
    }
} 
```

在您可以访问容器的任何地方，您都可以执行以下操作

```
$this->container->get('city')->generateUrl('yourroute', $params); 
```

如果您仍然认为这不是一个很好的解决方案；您将不得不扩展路由器服务（或找到更好的方法来扩展路由器组件以使其行为符合您的预期）。

我个人使用上面的方法，所以我可以将实体传递给`path`Twig 中的方法。您可以在[services.yml](https://github.com/Cornichon/ForumBundle/blob/master/Resources/config/services.yml)中定义的MainService[类](https://github.com/Cornichon/ForumBundle/blob/master/Service/MainService.php)和[PathExtension Twig 类](https://github.com/Cornichon/ForumBundle/blob/master/Extension/Path.php)中找到一个示例。

在 Twig 中，我可以做到`forum_path('routename', ForumEntity)`，在容器感知环境中，我可以做到`$this->container->get('cornichon.forum')->forumPath('routename', ForumEntity)`。

您应该有足够的信息来做出明智的决定

# javascript - jquery.pageless 抓取

> ID：15620089
> 
> 赞同：0
> 
> 时间：2013-03-25T16:36:23.220
> 
> 标签：javascript, jquery, ruby-on-rails, infinite-scroll

我正在使用 jquery.pageless 插件。它通过抓取控制器中的分页方法生成的参数来实现无限滚动。

我正在尝试将自定义参数（例如用户 ID）传递给我的无页面函数。这在我在 js.erb 中加载函数时有效，如下所示：

```
$('#relationship_list').pageless({ totalPages: "<%= @reviews.count %>"/5+1
                       , url: '/reviews'
                       , params: {id: "<%= params[:id] %>"}
                       , loaderMsg: "loading"
                       }); 
```

这可以按需要工作。但是，我不想远程加载我的页面，所以我需要找到一种方法在 javascript 中实现这一点，不显眼（我不想直接在我的视图中集成脚本，我想将代码放在应用程序.js）。

这意味着我必须找到一种方法将 <%=params=> 之类的代码“翻译”为无页调用可以从控制器读取的变量。但是怎么做？我真的不知道该怎么做。

我认为对于已经了解 jquery.pageless 的人来说，这是一个最好的问题，而且由于它太笼统了，我在这篇文章中添加自己的代码毫无意义 - 如果不同意，请发表评论！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T17:48:14.947

这是我选择的解决方案。欢迎任何关于这是否是适当方式的提示：

```
if($('#relationship_list').length){
    $.ajax({
            type: 'GET',
            url: '/users/'+$('.user_info').attr("id"),
            dataType: 'json',
            success: function(response){
                $('#relationship_list').pageless({ url: '/reviews'
                                , totalPages: response["count"]/5+1
                                , loaderMsg: "loading"
                                , params: {id: response["id"]}
                });
            }
    });     
} 
```

这样做是对控制器进行 ajax 调用，并使用关键参数呈现 json 参数。然后我使用这些参数来实现 .pageless 函数。

请注意，为了获取原始用户 ID，我实际上有一个包含用户 ID 的 div，因此我从页面中获取它。用户 ID 不是国家机密，但**如果有人有关于如何获取 html 参数的提示**（ID 在我的 rails 代码中的 params[:id] 中），我将不胜感激

# c# - 无窗口 WPF 应用程序

> ID：15620096
> 
> 赞同：5
> 
> 时间：2013-03-25T16:36:44.457
> 
> 标签：c#, .net, wpf

我希望有人可以在这里为我指明正确的方向。我正在尝试将我的模拟时钟应用程序变成无窗口时钟。我搜索了谷歌，但我认为我的问题是我不知道我正在尝试做什么的正确术语。

我的模拟时钟应用程序是一个包含时钟指针的圆圈。与大多数其他应用程序一样，它包含在窗口中。我想移除窗口，只在背景上方显示时钟。我可能会在鼠标悬停时调出关闭按钮。或者也许我可以使整个窗口透明，除了时钟和鼠标悬停时，我可以看到窗口并关闭它。

有人有这方面的经验吗？也许在某个地方有一些提示或教程？

谢谢，

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-25T16:40:03.573

您可以构建您的窗口，并设置`Background="Transparent"`如下：

```
<Window ...
   AllowsTransparency="True" 
   WindowStyle="None" 
   Background="Transparent"  > 
```

这为您提供了一个具有透明背景且没有边框的窗口。

# ruby - 试图用文件名中的变量写入文件

> ID：15620102
> 
> 赞同：0
> 
> 时间：2013-03-25T16:36:50.407
> 
> 标签：ruby

我有的：

```
(Date.new(2013, 01, 01)..Date.new(2013, 01, 03)).each do |date|

    #some code

    File.open('data-date.json', 'w') do |d|  
      d.puts JSON.pretty_generate(employee_final) 
    end

end 
```

这会生成一个名为 data-date.json 的文件。例如，我需要 data-20130101.json。

我尝试使用和不使用引号`date`而`printf '%02d%02d%d', date.month, date.day, date.year`不是`date`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T16:38:57.863

试试这个（注意字符串周围的双引号）：

```
File.open("data-#{date.strftime('%Y%m%d')}.json", 'w') do |d| 
```

# javascript - SVG CSS 按属性选择器，大小写导致匹配失败

> ID：15620108
> 
> 赞同：0
> 
> 时间：2013-03-25T16:37:12.363
> 
> 标签：javascript, css, google-chrome, svg, css-selectors

在 Chrome 中，如果我通过 javascript 向 SVG 元素添加属性，并且它包含大写字母，那么按属性 CSS 规则将不匹配它。

但是无论大小写，相同的规则都会匹配文档上的属性！

在 IE9 中匹配 CSS，规则使用属性的大小写。

这是一个错误吗？我认为属性匹配应该不区分大小写？

![在此处输入图像描述](../Images/5fcc2971081c81137a5860c19196ac43.png)

[http://jsfiddle.net/adrianjmartin/NJej8/6/](http://jsfiddle.net/adrianjmartin/NJej8/6/)

**HTML**

```
 <circle cx="100" cy="100" r="25" Foo />
    <circle cx="200" cy="100" r="25" foo />

     <text x="20" y="20">Chrome: wont select css by attribute, if setAttribute used a capital letter</text>
    <text x="20" y="50">Document: css match is case insensitive.</text>
    <text x="20" y="150">JS Added Circles: setAttribute("Foo") won't match, </text>
    <text x="20" y="180">JS Added Circles: setAttribute("foo") does match! </text>

     <text x="20" y="350">In IE9, css attribute match is case sensitive </text>

</svg>
</body> 
```

**CSS**

```
svg{ background:palegoldenrod }
circle{ fill:red }
circle[Foo]{ fill:yellow }
circle[foo]{ fill:green }

/* Foo is captilised */ 
```

**JAVASCRIPT**：

```
var svg = document.querySelector("svg");
var c1 = document.createElementNS( svg.namespaceURI ,"circle");
c1.setAttribute("cx","100");
c1.setAttribute("cy","230");
c1.setAttribute("r","25"); c1.setAttribute("Foo");
svg.appendChild(c1);

var c2 = document.createElementNS( svg.namespaceURI ,"circle"); 
c2.setAttribute("cx","200");
c2.setAttribute("cy","230");
c2.setAttribute("r","25");
c2.setAttribute("foo");
svg.appendChild(c2); 
```

# html - 如何使标签的大小与其父级相同 标签？

> ID：15620109
> 
> 赞同：0
> 
> 时间：2013-03-25T16:37:12.970
> 
> 标签：html, css

我有同样的问题，这个人在这里问过：[如何使 <a> 标签的大小与其父 <li> 标签的大小相同，以获得更大的可点击区域？](https://stackoverflow.com/questions/7019231/how-do-i-make-an-a-tag-the-size-of-its-parent-li-tag-for-larger-clickable-r)

但是我希望这些 LI 项目像一个内联菜单，所以我不希望它们在彼此下方列出。怎么活？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T16:49:06.320

有许多不同的选项，这里有一个很容易定制的选项：http: [//jsfiddle.net/panchroma/WuhVp/](http://jsfiddle.net/panchroma/WuhVp/)
**HTML**

```
<div id="navcontainer">
<ul id="navlist">
<li id="active"><a href="#" id="current">one</a></li>
<li><a href="#">two</a></li>
<li><a href="#">three</a></li>
<li><a href="#">four</a></li>
<li><a href="#">five</a></li>
</ul> 
</div> 
```

**CSS**

```
#navcontainer ul
{
padding-left: 0;
margin-left: 0;
background-color: olive;
color: White;
float: left;
width: 100%;
font-family:sans-serif;
}

#navcontainer ul li { display: inline; }

#navcontainer ul li a
{
padding: 0.2em 1em;
background-color: olive;
color: White;
text-decoration: none;
float: left;
border-right: 1px solid #fff;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T16:56:11.073

最简单的标记可能是这样的：

*   -元素浮动，`li`因此水平排列
*   `a`-tags 必须`display: block;`占用他们在父母内部的空间
*   必须清除`ul`其`overflow: hidden;`孩子们的漂浮物

**演示**

[先试后买](http://jsfiddle.net/w5GUK/)

**HTML**

```
<ul>
    <li><a href="">Item 1</a></li>
    <li><a href="">Item 2</a></li>
</ul> 
```

**CSS**

```
ul {
    overflow: hidden;
    list-style: none;
}

ul > li {
    float: left;
}

ul > li > a {
    display: block;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T16:40:05.707

试试 `li a{ height:100%; width:100%}` 这个强制“li”元素下的“a”元素具有其父元素的宽度和高度

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T17:03:01.863

放

```
float:left; to the  class controlling li 
```

这会帮助你。如果你想让 li 像 li 一样可点击，请将 anchor < a> 的属性设置为

```
display:block;
height:value as you like px;
Width:value as you like px; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T16:47:57.153

诀窍很简单。保持大于。`padding`_`<a>``<li>`

```
li { padding: 0; }
a { padding: 1.1em; } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-25T16:56:40.247

这是一个相当简单的方法：

```
ul {
    list-style-type: none;
}

li {
    float: left;
}

a {
    display: block;
} 
```

然后，您可以相应地添加任何高度、宽度、行高和填充。

这是一个例子：http: [//jsfiddle.net/BBcEr/2/](http://jsfiddle.net/BBcEr/2/)

# iphone - 如何从 appdelegate 调用方法

> ID：15620114
> 
> 赞同：0
> 
> 时间：2013-03-25T16:37:23.630
> 
> 标签：iphone, ios, objective-c, xcode, push-notification

我有一个 switch 语句，它利用 nsuserdefaults bool 函数来确定打开和关闭。我的问题是当 switch 键 bool 为 yes 时如何在视图控制器中调用 appdelegate.m 方法。基本上在 view controller.m 的第一个 if 语句中调用 appdelagte.m 方法。

Appdelegate.m

```
- (void)application:(UIApplication *)app didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)devToken {
     TUPushHelper * helper = [[TUPushHelper alloc] initWithTokenData:devToken];
     [helper registerDevice];
} 
```

视图控制器.m

```
if ([[NSUserDefaults standardUserDefaults] boolForKey:@"SwitchKey"]) {
    NSLog(@"ok");   
}
if (![[NSUserDefaults standardUserDefaults] boolForKey:@"SwitchKey"]) {
    [[UIApplication sharedApplication]unregisterForRemoteNotifications];   
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T16:52:12.820

```
[((AppDelegate*) [[UIApplication sharedApplication] delegate]) someMethod:nil]; 
```

不要忘记`#import "AppDelegate.h`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T17:17:40.327

```
Bool isOn = [[NSUserDefaults standardUserDefaults] boolForKey:@"SwitchKey"];

if (isOn) {
    NSLog(@"ok");   
}

if (!isOn) {
    [[[UIApplication sharedApplication] delegate] unregisterForRemoteNotifications];   
} 
```

# javascript - CKEditor：更改选择而不丢失它

> ID：15620115
> 
> 赞同：0
> 
> 时间：2013-03-25T16:37:28.270
> 
> 标签：javascript, ckeditor

我正在使用 CKEditor 4

情况如下：我有一个选择，但我需要完成 2 个操作。第一个动作是从选择中删除一些跨度标签。第二个动作是在选择周围包裹一个 span 标签。第二个动作需要通过以下动作来完成： editor.applyStyle(style);

这里的问题是第一个动作折叠了选择，因为它被折叠了，所以它不能用于第二个动作。

是否有 javascript 或 Ckeditor 相关的解决方案来维护选择？

我已经尝试使用书签来维护它，并首先更改执行第二个操作。但是因为第二个动作是使用 span，所以它会删除其他 span 标签。而且我想控制说是否会删除跨度标签。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T17:19:16.713

在像您这样的情况下，CKEditor 使用书签，但您应该知道它们的种类很少 - 普通（基于节点引用）、可序列化（基于跨度）和第三种类型（基于节点地址）。

但是，当 DOM 更改时，最方便的是可序列化的书签，“与 span 一起工作”的代码需要了解它们（它们具有特殊`data-cke-bookmark`属性）并且不应删除它们（但它可以例如移动它们）。

如果您正在修改 DOM，没有更好的方法来记住范围。请注意，CKEditor 的方法不会破坏您的书签，除非您要删除例如整个书签的祖先。

# php - 使用 eBay API 在 PHP 中将 XML 显示为响应

> ID：15620116
> 
> 赞同：0
> 
> 时间：2013-03-25T16:37:33.083
> 
> 标签：php, xml, parsing, ebay-api

以下[教程](http://developer.ebay.com/DevZone/finding/HowTo/GettingStarted_PHP_XML_XML/GettingStarted_PHP_XML_XML.html#step3)展示了如何将数据显示为 HTML，我只需要显示 XML 的响应而不是解析它。我试图找到解决方案，但没有任何运气。任何帮助将不胜感激。

```
<?php

$endpoint = 'http://svcs.ebay.com/services/search/FindingService/v1';  // URL to call
$query = 'iphone';                  // Supply your own query keywords as needed

// Construct the findItemsByKeywords POST call
// Load the call and capture the response returned by the eBay API
// The constructCallAndGetResponse function is defined below
$resp = simplexml_load_string(constructPostCallAndGetResponse($endpoint, $query));

// Check to see if the call was successful, else print an error
if ($resp->ack == "Success") {
$results = '';  // Initialize the $results variable

// Parse the desired information from the response
foreach($resp->searchResult->item as $item) {
$link  = $item->viewItemURL;
$title = $item->title;

// Build the desired HTML code for each searchResult.item node and append it to $results
$results .= "<tr><td><img src=\"$pic\"></td><td><a href=\"$link\">$title</a></td></tr>";
 }
}
else {  // If the response does not indicate 'Success,' print an error
  $results  = "<h3>Oops! The request was not successful";
  $results .= "AppID for the Production environment.</h3>";
}

function constructPostCallAndGetResponse($endpoint, $query) {
global $xmlrequest;

// Create the XML request to be POSTed
$xmlrequest  = "<?xml version=\"1.0\" encoding=\"utf-8\"?>\n";
$xmlrequest .= "<findItemsByKeywordsRequest                  
xmlns=\"http://www.ebay.com/marketplace/search/v1/services\">\n";
$xmlrequest .= "<keywords>";
$xmlrequest .= $query;
$xmlrequest .= "</keywords>\n";
$xmlrequest .= "<paginationInput>\n 
<entriesPerPage>3</entriesPerPage>\n</paginationInput>\n";
$xmlrequest .= "</findItemsByKeywordsRequest>";

// Set up the HTTP headers
$headers = array(
'X-EBAY-SOA-OPERATION-NAME: findItemsByKeywords',
'X-EBAY-SOA-SERVICE-VERSION: 1.3.0',
'X-EBAY-SOA-REQUEST-DATA-FORMAT: XML',
'X-EBAY-SOA-GLOBAL-ID: EBAY-GB',
'X-EBAY-SOA-SECURITY-APPNAME: ******',
'Content-Type: text/xml;charset=utf-8',
);

$session  = curl_init($endpoint);                       // create a curl session
curl_setopt($session, CURLOPT_POST, true);              // POST request type
curl_setopt($session, CURLOPT_HTTPHEADER, $headers);    // set headers using $headers
 array
curl_setopt($session, CURLOPT_POSTFIELDS, $xmlrequest); // set the body of the POST
curl_setopt($session, CURLOPT_RETURNTRANSFER, true);    //

$responsexml = curl_exec($session);                     // send the request
curl_close($session);                                   // close the session
return $responsexml;                                    // returns a string

}  // End of constructPostCallAndGetResponse function
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T20:41:07.467

尝试改变这个（为清楚起见包装）：

```
$resp = simplexml_load_string(
    constructPostCallAndGetResponse($endpoint, $query)
); 
```

对此：

```
$xmlString = constructPostCallAndGetResponse($endpoint, $query);
$resp = simplexml_load_string($xmlString);
// Now you have your raw XML to play with
echo htmlentities($xmlString);
// The XML document $resp is available too, if you wish to do
// something with that 
```

原始版本将 XML 响应立即提供给 XML 解析器，并用它创建一个 XML 对象（有关详细信息，请参阅 PHP 手册中的 SimpleXML）。在这里，我们将两个调用分开，因此 XML 字符串现在保存在一个中间变量中。

# php - php gettext 不起作用

> ID：15620117
> 
> 赞同：0
> 
> 时间：2013-03-25T16:37:33.207
> 
> 标签：php, localization, gettext

我正在尝试在域上运行 gettext，但任何地方都有错误...

在我的本地 xampp 安装上一切正常，但在服务器上存在一些错误，我不知道如何调试 gettext

这是我的设置... var 在 url 中给出... 例如 es_ES

```
if (isset($_GET['lang'])) $lang = $_GET['lang'];
putenv("LC_ALL=$lang");
setlocale(LC_ALL, $lang);
bindtextdomain("messages", "./locale");
bind_textdomain_codeset('messages', 'UTF-8');
textdomain("messages"); 
```

这是我的翻译文件的路径 /httpdocs/locale/es_ES/LC_MESSAGES

有人有想法吗？

亲切的问候，

鲍勃

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T17:09:35.593

> 输入“locale -a”后，通过 ssh 仅显示 C 和 POSIX。

那时您没有在服务器上安装语言环境。您的系统将*仅*支持安装在您的操作系统上的语言环境，其格式与您的操作系统给出的*确切*格式相同，如[手册注释](http://www.php.net/manual/en/book.gettext.php#91187)中所述。

有人必须在那里安装语言环境。如果您不是管理员，则服务器管理员需要执行此操作。

# c# - XmlDictionaryReader 更改 xml 命名空间别名

> ID：15620118
> 
> 赞同：0
> 
> 时间：2013-03-25T16:37:33.507
> 
> 标签：c#, .net, wcf

我有以下 WCF 服务的 XML 输入。使用 XmlReader 我正在验证消息并替换为新消息。在此过程中，xml 命名空间别名从 更改`xmlns:soapenv`为`xmlns:s`

为了在重新创建消息时维护命名空间别名，需要在以下 C# 代码中进行哪些更改？

参考[WCF 消息正文显示 <s:Body>... stream ...</s:Body> 修改后](https://stackoverflow.com/questions/4106196/wcf-message-body-showing-sbody-stream-sbody-after-modification)查看正确的替换消息内容。

来自[WCF 可扩展性 – 消息检查器](http://blogs.msdn.com/b/endpoint/archive/2011/04/23/wcf-extensibility-message-inspectors.aspx)

> WCF 消息对象只能“使用”一次——“使用”可以表示读取、写入或复制。消息体本质上是一个只读流，因此一旦被消费，就不能再次使用。因此，如果在检查器代码中读取消息，WCF 运行时将无法在其管道的其余部分重用该消息（即，将其编码为作为回复发送或将其解析为操作参数）。因此，如果检查器代码需要读取消息，检查器有责任重新创建消息。

**输入**

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:tem="http://tempuri.org/">
<soapenv:Header>
<To soapenv:mustUnderstand="1" xmlns="http://schemas.microsoft.com/ws/2005/05/addressing/none">http://local:54956/Service1.svc</To>
<Action soapenv:mustUnderstand="1" xmlns="http://schemas.microsoft.com/ws/2005/05/addressing/none">http://tempuri.org/IService1/GetData</Action>
</soapenv:Header>
<soapenv:Body>
  <tem:GetData>
     <!--Optional:-->
     <tem:value>4</tem:value>
  </tem:GetData>
</soapenv:Body>
</soapenv:Envelope> 
```

**代码**

```
 private void MyInspectorsValidateMessageBody(ref System.ServiceModel.Channels.Message message, bool isARequest)
    {

        string originalMessageText = message.ToString();

        if (!message.IsFault)
        {
            XmlDictionaryReaderQuotas quotas = new XmlDictionaryReaderQuotas();
            XmlReader bodyReader = message.GetReaderAtBodyContents().ReadSubtree();

            //Settings
            XmlReaderSettings wrapperSettings = new XmlReaderSettings();
            wrapperSettings.CloseInput = true;
            wrapperSettings.ValidationFlags = XmlSchemaValidationFlags.None;
            wrapperSettings.ValidationType = ValidationType.Schema;

            //Add a event handler for ValidationEventHandler of XmlReaderSettings
            //Validation happens while read of xml instance
            //wrapperSettings.ValidationEventHandler += new ValidationEventHandler(MyHandlerForXMLInspectionErrors);

            XmlReader wrappedReader = XmlReader.Create(bodyReader, wrapperSettings);

            this.isRequest = isARequest;

            MemoryStream memStream = new MemoryStream();
            XmlDictionaryWriter xdw = XmlDictionaryWriter.CreateBinaryWriter(memStream);
            xdw.WriteNode(wrappedReader, false);
            xdw.Flush(); memStream.Position = 0;

            XmlDictionaryReader xdr = XmlDictionaryReader.CreateBinaryReader(memStream, quotas);

            //Reconstruct the message with the validated body
            Message replacedMessage = Message.CreateMessage(message.Version, null, xdr);
            replacedMessage.Headers.CopyHeadersFrom(message.Headers);
            replacedMessage.Properties.CopyProperties(message.Properties);
            message = replacedMessage;

            string replacedMessageText = replacedMessage.ToString();

        }
    } 
```

**输出**

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
<s:Header>
<To s:mustUnderstand="1" xmlns="http://schemas.microsoft.com/ws/2005/05/addressing/none">http://local:54956/Service1.svc</To>
<Action s:mustUnderstand="1" xmlns="http://schemas.microsoft.com/ws/2005/05/addressing/none">http://tempuri.org/IService1/GetData</Action>
</s:Header>
<s:Body>... stream ...</s:Body>
</s:Envelope> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T16:39:01.170

不，它没有改变命名空间。它正在更改用于*引用*命名空间的前缀，但在这两种情况下命名空间本身都是`"http://schemas.xmlsoap.org/soap/envelope/"`.

从原始文件：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" 
                  xmlns:tem="http://tempuri.org/"> 
```

从输出中：

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/"> 
```

没有什么*应该*关心正在使用什么前缀——重要的是实际命名空间的 URI。

# c# - 如何限制列表框中值（条目）的最大数量

> ID：15620121
> 
> 赞同：0
> 
> 时间：2013-03-25T16:37:37.817
> 
> 标签：c#, asp.net, .net

我目前有两个 ListBox（ListBox1 和 ListBox2），ListBox1 中有 12 个静态值（value1、value2、value3 等），允许用户使用添加和删除按钮在它们之间传输值。我也有一个下拉框。当在该下拉框中进行特定选择时，如何在 ListBox2 上强制执行最大值？换句话说，如果我只想在下拉框中选择一个值时允许将 Listbox1 中的最多一个条目移动到 Listbox2。

```
 protected void MoveRight(object sender, EventArgs e)
{
    while (ListBox1.Items.Count > 0 && ListBox1.SelectedItem != null)
    {
        ListItem selectedItem = ListBox1.SelectedItem;
        selectedItem.Selected = false;
        ListBox2.Items.Add(selectedItem);
        ListBox1.Items.Remove(selectedItem);
    }
}
protected void MoveLeft(object sender, EventArgs e)
{
    while (ListBox2.Items.Count > 0 && ListBox2.SelectedItem != null)
    {
        ListItem selectedItem = ListBox2.SelectedItem;
        selectedItem.Selected = false;
        ListBox1.Items.Add(selectedItem);
        ListBox2.Items.Remove(selectedItem);
    }
}
private void BindData()
{
    ListBox1.Items.Add(new ListItem("01", "01"));
    ListBox1.Items.Add(new ListItem("02", "02"));
    ListBox1.Items.Add(new ListItem("03", "03"));
    ListBox1.Items.Add(new ListItem("04", "04"));
    ListBox1.Items.Add(new ListItem("05", "05"));
    ListBox1.Items.Add(new ListItem("06", "06"));
    ListBox1.Items.Add(new ListItem("07", "07"));
    ListBox1.Items.Add(new ListItem("08", "08"));
    ListBox1.Items.Add(new ListItem("09", "09"));
    ListBox1.Items.Add(new ListItem("10", "10"));
    ListBox1.Items.Add(new ListItem("11", "11"));
    ListBox1.Items.Add(new ListItem("12", "12"));

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T02:08:55.213

您希望如何在代码隐藏中处理它？如果您想在下拉列表设置为 1 时复制最多一个选定项目，您可以执行以下操作：

```
protected void MoveRight(object sender, EventArgs e)
{
    int max = Convert.ToInt32(DropDownList1.SelectedValue);
    for(int i=0;i<max && ListBox1.Items.Count > 0 && ListBox1.SelectedItem != null; i++)
    {
        ListItem selectedItem = ListBox1.SelectedItem;
        selectedItem.Selected = false;
        ListBox2.Items.Add(selectedItem);
        ListBox1.Items.Remove(selectedItem);
   } 
```

}

或者，如果您希望将`ListBox1`下拉列表设置为 1 时选择的 2 个项目的情况作为验证错误，您可以为 a 的`ServerValidate`事件编写一个处理程序`CustomValidator`：

```
protected void CustomValidator1_ServerValidate(object source, ServerValidateEventArgs e)
{
    // There's probably a simpler way to get a count of items selected
    e.IsValid = ListBox1.Items.Count(li=> li.Selected) <= Convert.ToInt32(DropDownList1.SelectedValue);
} 
```

或者，如果您希望在客户端发生这种情况，则必须编写一些 javascript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T16:40:30.850

您可以尝试使用此代码

```
int YourMax = 10;
if(ListBox1.Items.Count < Yourmax)
{
   //Add item
       } 
```

[链接：http: //msdn.microsoft.com/fr-fr/library/system.windows.forms.listbox.objectcollection_members](http://msdn.microsoft.com/fr-fr/library/system.windows.forms.listbox.objectcollection_members(v=vs.80).aspx) (v=vs.80) .aspx

注意：您没有满足此需求的财产

这里的所有属性：http: [//msdn.microsoft.com/fr-fr/library/aeb9t2b5 (v=vs.80).aspx](http://msdn.microsoft.com/fr-fr/library/aeb9t2b5(v=vs.80).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T16:40:50.420

使用 for 循环迭代您的最大值和列表中的项目数中的较小者。

```
protected void MoveRight(object sender, EventArgs e)
{
    int max = 1;
    int iterations = ListBox1.Items.Count < max ? ListBox1.Items.Count : max
    for(int i = 0; i < iterations; i++)
    {
        ListItem selectedItem = ListBox1.SelectedItem;
        if(selectedItem == null)
            break;

        selectedItem.Selected = false;
        ListBox2.Items.Add(selectedItem);
        ListBox1.Items.Remove(selectedItem);
    }
} 
```

现在您可以`max`进入类定义并根据需要对其进行操作。

# css - IE 8 中访问过的链接颜色没有变化

> ID：15620122
> 
> 赞同：1
> 
> 时间：2013-03-25T16:37:40.790
> 
> 标签：css, caching, internet-explorer-8, internet-explorer-6

我在使用 IE 8 时遇到问题，其中访问的链接颜色在我们的应用程序中没有改变。

IE6 没有这个问题。使用 IE6 时，如果链接之前已查看过，则访问过的链接会更改其颜色。我们的应用程序在 IE6 上运行良好，但在 IE8 上访问的链接不会改变其颜色。

有关信息，我已清除历史记录，取消选中浏览器选项中的“使用 Windows 颜色”选项。但是我们应用程序中的链接始终未被访问。

这是CSS：

```
a:link {
    color : #006000;
}

a:visited {
    color : #3CB371;
} 
```

任何帮助和建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T17:08:02.543

`:visited`样式存在安全问题。

简而言之，恶意站点可以通过链接到它想要检查的所有站点的链接来找出您访问过的站点，然后只检查这些链接的颜色。

大约三年前，这个问题得到了很多宣传，结果 IE 和所有其他浏览器都发布了禁用该`:visited`样式的补丁。

我找不到特定于 IE 的链接，但这里有一个来自 Mozilla 的链接，[描述了该问题及其在 Firefox 中的解决方案](https://hacks.mozilla.org/2010/03/privacy-related-changes-coming-to-css-vistited/)。

较旧的浏览器（IE6、IE7）仍将支持该`:visited`样式，但 IE8 和所有其他当前浏览器不支持。

其中一些确实支持它作为用户可配置的选项，但默认为关闭，但很少有用户会打开它，所以你基本上可以忽略它。

最近，一些浏览器重新启用了该样式，但更改了 Javascript`getComputedStyle()`函数，使其忽略访问过的样式。这允许最终用户查看访问的颜色，但防止黑客找到信息的可能性。我认为 IE8 从来没有得到这个更新。

# php - 带有 file_get_contents 的 HTTP 请求，获取响应代码

> ID：15620124
> 
> 赞同：95
> 
> 时间：2013-03-25T16:37:43.583
> 
> 标签：php, file, http, stream

我正在尝试使用`file_get_contents`with`stream_context_create`来发出 POST 请求。到目前为止我的代码：

```
 $options = array('http' => array(
        'method'  => 'POST',
        'content' => $data,
        'header'  => 
            "Content-Type: text/plain\r\n" .
            "Content-Length: " . strlen($data) . "\r\n"
    ));
    $context  = stream_context_create($options);
    $response = file_get_contents($url, false, $context); 
```

它工作正常，但是，当发生 HTTP 错误时，它会发出警告：

```
file_get_contents(...): failed to open stream: HTTP request failed! HTTP/1.0 400 Bad Request 
```

并返回假。有没有办法：

*   抑制警告（我打算在失败的情况下抛出我自己的异常）
*   从流中获取错误信息（至少是响应代码）

* * *

## 回答 #1

> 赞同：161
> 
> 时间：2013-03-25T16:41:18.627

[http://php.net/manual/en/reserved.variables.httpresponseheader.php](http://php.net/manual/en/reserved.variables.httpresponseheader.php)

```
file_get_contents("http://example.com", false, stream_context_create(['http' => ['ignore_errors' => true]]));
var_dump($http_response_header); 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2018-10-05T09:30:37.310

没有一个答案（包括 OP 接受的答案）实际上满足这两个要求：

> *   抑制警告（我打算在失败的情况下抛出我自己的异常）
> *   从流中获取错误信息（至少是响应代码）

这是我的看法：

```
function fetch(string $method, string $url, string $body, array $headers = []) {
    $context = stream_context_create([
        "http" => [
            // http://docs.php.net/manual/en/context.http.php
            "method"        => $method,
            "header"        => implode("\r\n", $headers),
            "content"       => $body,
            "ignore_errors" => true,
        ],
    ]);

    $response = file_get_contents($url, false, $context);

    /**
     * @var array $http_response_header materializes out of thin air
     */

    $status_line = $http_response_header[0];

    preg_match('{HTTP\/\S*\s(\d{3})}', $status_line, $match);

    $status = $match[1];

    if ($status !== "200") {
        throw new RuntimeException("unexpected response status: {$status_line}\n" . $response);
    }

    return $response;
} 
```

这将引发无`200`响应，但您可以从那里轻松工作，例如添加一个简单的`Response`类，`return new Response((int) $status, $response);`如果它更适合您的用例。

例如，要`POST`对 API 端点执行 JSON：

```
$response = fetch(
    "POST",
    "http://example.com/",
    json_encode([
        "foo" => "bar",
    ]),
    [
        "Content-Type: application/json",
        "X-API-Key: 123456789",
    ]
); 
```

注意上下文映射`"ignore_errors" => true`中的使用`http`- 这将防止函数针对非 2xx 状态代码抛出错误。

对于大多数用例来说，这很可能是“正确”的错误抑制量 - 我不建议使用`@`错误抑制运算符，因为这也会抑制错误，例如简单地传递错误的参数，这可能会无意中隐藏错误调用代码。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-03-15T12:38:13.830

在接受的响应中添加几行以获取 http 代码

```
function getHttpCode($http_response_header)
{
    if(is_array($http_response_header))
    {
        $parts=explode(' ',$http_response_header[0]);
        if(count($parts)>1) //HTTP/1.0 <code> <text>
            return intval($parts[1]); //Get code
    }
    return 0;
}

@file_get_contents("http://example.com");
$code=getHttpCode($http_response_header); 
```

隐藏错误输出两个注释都可以，ignore_errors = true 或@（我更喜欢@）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-10-23T08:07:04.367

我带着不同的问题进入这个页面，所以发布我的答案。我的问题是我只是试图抑制警告通知并为用户显示自定义警告消息，所以这个简单而明显的修复帮助了我：

```
// Suppress the warning messages
error_reporting(0);

$contents = file_get_contents($url);
if ($contents === false) {
  print 'My warning message';
} 
```

如果需要，在此之后返回错误报告：

```
// Enable warning messages again
error_reporting(-1); 
```

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2018-08-02T10:06:24.507

`@file_get_contents`并且`ignore_errors = true`不一样：第一个不返回任何东西；第二个抑制错误消息，但返回服务器响应（例如 400 Bad request）。

我使用这样的功能：

```
$result = file_get_contents(
  $url_of_API, 
  false, 
  stream_context_create([
    'http' => [
      'content' => json_encode(['value1' => $value1, 'value2' => $value2]), 
      'header' => 'Authorization: Basic XXXXXXXXXXXXXXX', 
      'ignore_errors' => 1, 
      'method' => 'POST', 
      'timeout' => 10
    ]
  ])
);

return json_decode($result)->status; 
```

它返回 200（正常）或 400（错误请求）。

它工作得很好，而且比 cURL 更容易。

# ruby-on-rails - 验证不起作用？

> ID：15620128
> 
> 赞同：0
> 
> 时间：2013-03-25T16:37:54.627
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我是 ruby​​ 新手，喜欢语法！但是我一直收到这个错误，有人可以告诉我为什么吗？我也确实尝试将它包含在 include ActiveModel::Validations 中，但没有任何运气。让这个“堆栈级别太深”

```
class HomeController < ApplicationController
 def index

 if params[:username]
     l = Users.new(:username => params[:username], :password => params[:password], :email => params[:email]).save
     z = Users.where(:username => params[:username]).limit(1).last
     @debugging = "Howdy" + z[:username] + ""
 end
end
end 
```

用户型号：

```
class Users < ActiveRecord::Base
validates :username, :presence => true

  attr_accessible :email, :password, :username
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:39:04.147

如果您正在使用它应该在您的模型中`active record`：

```
 validates :username, :presence => true 
```

它应该是`User < ActiveRecord::Base`：

**用户.rb**

```
class User < ActiveRecord::Base
  validates :username, :presence => true  #or you can also write as 'validates_presence_of :username'

  attr_accessible :email, :password, :username
end 
```

**home_controller.rb**

```
class HomeController < ApplicationController
  def index
    if params[:username]
     l = User.new(:username => params[:username], :password => params[:password], :email => params[:email])
     if l.save?
       flash[:success] = "Valid user"
     else
       flash[:error] = "Invalid user"
     end

     z = User.where(:username => params[:username]).limit(1).last
     @debugging = "Howdy" + z[:username] + ""
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T16:56:04.977

你的模型看起来不错

尝试为此更改您的索引操作：

```
if params[:username]
  user = User.create(:username => params[:username], :password => params[:password], :email => params[:email])
  if user.persisted?
    @debugging = "Howdy #{user.username}"
  else
    @debugging = "Error while creating user"
  end
end 
```

如果用户无效**，User.create**将创建一个未**保存**在数据库中的用户对象

# backbone.js - Backbone、Marionette、RequireJS 应用启动

> ID：15620129
> 
> 赞同：2
> 
> 时间：2013-03-25T16:38:01.883
> 
> 标签：backbone.js, requirejs, marionette, startup, bootstrapping

我正在使用 Backbone、Marionette 和 RequireJS 构建一个应用程序，如果可以以任何方式改进/改进应用程序启动，我希望由一些更有经验的人运行。

文件夹结构：

```
index.html
js/
  collections/
  libs/
    backbone.js
    marionette.js
    require.js
    ...
  models/
  views/
  app.js
  init.js
  router.js 
```

目前应用程序的引导如下。

`index.html`将 requireJS 入口点定义为：

```
<script data-main="js/init" src="js/libs/require.js"></script> 
```

`init.js`进行RequireJS配置并且：

```
require(['app'], function(App){
    App.start();
}); 
```

中的 App 模块`app.js`：

```
App = new Backbone.Marionette.Application();

App.addInitializer(function (options) {
  // initialize the Router; will only setup the routes and corresponding callbacks; not history.start()
  App.router = new Router();
  // initialize Marionette regions
  App.addRegions({
    'header': '#header',
    'main': '#main',
    'footer': '#footer'
  });
});

App.on('start', function(options) {
  Backbone.history && Backbone.history.start() || console.error('No "Backbone.history" to .start()');
});

return App; 
```

路由器模块在`router.js`：

```
return Backbone.Router.extend({
    routes: {      
      'panel/:handle': 'showPanel',
    },

    showPanel: function (handle) {
      require(['app'], function (App) {
        App.main.show(new Panel_v({userHandle: handle}));
      });  
    }      
}); 
```

有没有办法让路由器模块不那么复杂？我想出这种方法来解决App->Router->App形成的循环依赖问题。

还有其他建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T22:32:46.353

我最近使用了这个解决方案，在 main.js 文件中加入了 App 和 Router：

应用程序.js

```
define(['marionette'], function(Marionette) {
  var App;
  App = new Backbone.Marionette.Application();
  App.vars = {};
  App.addRegions({
    headerRegion: "#header-region",
    mainRegion: "#main-region",
    footerRegion: "#footer-region",
    dialogsRegion: "#dialogs"
  });
  App.vent.on("routing:started", function() {
    Backbone.history.start();
  });
  return App;
}); 
```

路由器.js

```
 define(['marionette', 'app'], function(Marionette, App) {
      var appRouter, routerController;
      routerController = {
        showViaggi: function() {
          return require(['modules/viaggi/viaggi'], function(Viaggi) {
            App.Modules.viaggi = new Viaggi();
            return App.Modules.viaggi.start();
          });
        }
      };
      return appRouter = Backbone.Marionette.AppRouter.extend({
        appRoutes: {
          'viaggi': 'showViaggi'
        },
        controller: routerController
      });
    }); 
```

还有 Main.js，我的初始脚本加载了 Require.js

```
define(['app', 'routers/appRouter'], function(App,appRouter) {
  App.addInitializer(function() {
    App.Router = new appRouter;
    return App.vent.trigger("routing:started");
  });
  return App.start();
}); 
```

# c++ - gtkmm 桌面应用程序

> ID：15620138
> 
> 赞同：3
> 
> 时间：2013-03-25T16:38:25.247
> 
> 标签：c++, gtkmm

将 gtkmm gui 工具包用于某些桌面客户端应用程序是个好主意吗？

这个工具包稳定吗？是否有足够的在线文档？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-04-21T08:07:03.337

我使用 gtkmm 编写专业应用程序，是的，您可以将它用于现实世界的软件开发。

但我也使用了 C/GTK+ 和 C++/Qt，我的看法是，使用 Gtkmm 你会觉得原来的工具包是要在 C 中使用的，并且移植到 C++ 是可以的，但在很多情况下你觉得 C++ 的特性可以已经被更好地使用了。

比较：

如果您必须在 Gtk 和 Gtkmm 之间进行选择，请选择 Gtkmm，即使您可能会发现自己陷入了一些没有充分记录或支持的功能。最终你总是设法找到一个解决方案（你可以检查源代码）并且 c++ 比 c 更好。

如果您必须在 Gtkmm 和 Qt 之间进行选择，请选择 Qt。两者之间存在巨大差距。不仅在工具包本身中，而且在文档和编写应用程序时需要的所有其他类中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T13:56:28.783

我在两个月前开始使用 gtkmm。我实际上移植了一个 tcl/tk 应用程序，我感觉很难让这些东西运行起来。我发现的唯一有用的文档是[https://developer.gnome.org/gtkmm-tutorial/3.4/](https://developer.gnome.org/gtkmm-tutorial/3.4/)

但是手册中描述的许多事情都不起作用！实际上，我在覆盖应该工作但没有工作的信号处理程序时遇到了麻烦。也许您会查看 gtkmm-list@gnome.org 以了解您可能会遇到什么样的问题:-)

从 doxygen 输入派生的文档对我来说似乎没用，因为这些函数大多没有描述，参数名称或者对我来说通常不是很清楚。

与 tcl/tk 相比，界面看起来不一致。有时参数必须由文本提供，有时由指针提供，有时由本机值本身提供。特别是菜单对于基于字符串的配置非常“神秘”。将参数作为文本的需要非常不方便！您必须使用 ostrstream 将参数转换为文本，并有时自己将参数从文本解析为实际值。

我决定给gtk+一个机会是c++接口的存在。我认为在编译时获取错误会很有帮助，而不是在运行应用程序时（如使用 tcl/tk）。但 gtkmm 并非总是如此。使用 gtkmm 您还可能遇到运行时错误，因为所有字符串参数都将在运行时进行解析！这使得事情容易出错！

也许我会重新开始，给 Qt 一个机会。但是对它的第一个看法表明，这似乎并不是真的更好:-)

编写 gui 应用程序仍然是一项非常烦人的工作！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T16:59:44.793

[gtkmm](http://www.gtkmm.org/)是官方支持的 GTK 绑定 (gtk.org/language-bindings.php)。

“inkscape”和“ardour”是用 gtkmm 编写的著名应用程序

作为官方 GNOME 绑定的绑定遵循 GNOME 发布计划，这保证了 AP​​I 稳定性和基于时间的发布。

如果您想用 C 编写应用程序，请使用 GTK+（和 GLib）。

[您可以在http://www.gtkmm.org/](http://www.gtkmm.org/) ( [https://developer.gnome.org/gtkmm-tutorial/](https://developer.gnome.org/gtkmm-tutorial/) )找到文档的链接。

使用[Glade](http://glade.gnome.org/)（和即 PyGTK），您可以快速原型化您的应用程序。使用 Glade 构建 GUI 很容易，生成的 UI 是一个 xml 文件，它不受编程语言的约束。

# android - 安卓设备什么时候进入睡眠模式？

> ID：15620139
> 
> 赞同：22
> 
> 时间：2013-03-25T16:38:35.727
> 
> 标签：android, sleep-mode, android-powermanager

我正在搜索 SO 和网络，但我找不到针对我的特定问题的足够答案。好的，我们开始：

每个用户都可以在 android 上修改屏幕超时。（当屏幕空闲 __ 秒/分钟时关闭 - 用户选择）。但用户只能修改屏幕超时，而不是在设备实际进入睡眠状态时。我在这里发现了设备进入睡眠状态时会发生什么：（CommonsWare 的回答非常好）[Android 睡眠/待机模式](https://stackoverflow.com/questions/5120185/android-sleep-standby-mode)

好的，我的问题很简单。我怎么知道我的手机什么时候进入睡眠状态？关屏后会立即进入睡眠状态吗？屏幕关闭后它会保持“清醒”一段时间吗？最重要的是：特定设备的睡眠模式是否因品牌设备而异（制造商如何实现这一点）还是取决于 ROM 版本（例如，所有 ICS 供电的设备将在屏幕关闭 X 秒后进入睡眠状态）？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-25T16:42:01.273

您永远无法确定设备是否已进入睡眠状态。充其量，我可以给你一个清单，以确保设备没有进入睡眠状态：

*   屏幕开启 - 需要 CPU 和 GPU，因此需要 RAM，才能保持活动状态
*   任何持有唤醒锁的应用程序 - 即使是最低的唤醒锁也会让 CPU 保持开启状态，尽管屏幕可能会关闭

除此之外，不能保证设备会`n`在屏幕关闭几秒钟后进入睡眠状态，即使没有保持唤醒锁也是如此。这取决于原始设备制造商，他们可以改变这一点。

请记住，Android 设备可以选择在屏幕进入睡眠状态后让设备在一定时间内保持解锁状态。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-12-06T11:59:59.647

将手机与笔记本电脑进行比较时，功耗差异很小。大多数情况下，笔记本电脑通过充电器直接供电。（大多数情况下，我们用笔记本电脑充电）。手机大多依靠电池供电。（我们很少随身携带充电器）。

牢记这一点，android 设计了这样一种方式，即如果用户不与手机交互，手机将不会消耗电池电量。这是为了增加用户的电池备份时间。

这就是为什么当 LCD 屏幕电源关闭时（这意味着用户没有与手机进行交互），CPU 也会在几分之一秒内进入一种模式（睡眠模式），在该模式下工作最少并节省电池电量。当 CPU 处于睡眠模式时，它只接受来自 RIL（无线电接口层）的命令，这基本上是 SMS 和呼叫功能以及警报。除此 CPU 将停止执行其他应用程序功能。

注意：如果任何应用程序在 CPU 处于睡眠模式时需要 CPU 时间进行紧急工作，则可以使用 WAKE LOCKS 请求 CPU 时间。

例如：MP3 应用程序必须在其服务中继续播放歌曲，即使用户已关闭 LCD 屏幕。这意味着 MP3 应用程序的服务已使用 WAKE LOCKS 请求 CPU 时间。

**你的问题**：我怎么知道我的手机什么时候会进入睡眠状态？-**答**：很简单，当 LCD 电源关闭时，它会在几分之一秒内进入睡眠模式。

**您的问题**：特定设备的睡眠模式是否因品牌设备而异 -**答**：由于 android 是开源的，任何 OEM 都可以采用驱动层，这是 GPU 许可证，并且可以修改电源管理器驱动器以使其行为不同。所有这些睡眠模式和唤醒锁最终都在 Linux 内核层的 Power manager 驱动程序的控制之下。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-01-06T15:20:33.487

要在 Android 6.0 中测试睡眠模式/打瞌睡，您应该使用以下命令：

```
$ adb shell dumpsys battery unplug
$ adb shell dumpsys deviceidle step 
```

更多信息请参见此处：[针对打盹和应用待机进行优化](https://developer.android.com/training/monitoring-device-state/doze-standby.html)

# asp.net-mvc - 具有相同签名路由的 Web Api 多次获取

> ID：15620142
> 
> 赞同：3
> 
> 时间：2013-03-25T16:38:54.277
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-web-api

我正在构建一个 web api，它有多个具有相同签名的 get/post 调用。现在我知道在多个相同调用的情况下，您通常有 2 个选择：分开到不同的控制器中，或者在您的路由中使用 {action}。我已经采用了 {action} 方法，因为它最适合我相信我的大多数控制器。但是，在我的一个控制器中，我不希望使用 action 方法。

我有这样的电话：

```
[HttpGet]
public Program Program(string venue, string eventId)
//api/{controller}/{venue}/{eventId} 
```

现在我需要一个新电话

```
[HttpGet]
public Program ProgramStartTime(string venue, string eventId)
//api/{controller}/{venue}/{eventId} 
```

我知道我可以为此添加一个动作名称并调用 ie

```
api/{controller}/{action}/{venue}/{eventId} 
```

但我觉得它打破了预期。有没有办法我可以像

```
api/Content/LAA/1/PST
api/Content/LAA/1?PST 
```

此外，如果我必须走动作路线，我目前已经有一条用于其他控制器的路线，但它只是使用 {id} 作为其唯一参数。一条新路线会与这条路线冲突吗？有没有更好的方法来设置我的路线？

```
config.Routes.MapHttpRoute(
   name: "...",
   routeTemplate: "api/{controller}/{action}/{id}",
   defaults: new {id = RouteParameter.Optional}
);

config.Routes.MapHttpRoute(
   name: "...",
   routeTemplate: "api/{controller}/{action}/{venue}/{eventId}/{...}/{***}/{###}",
   defaults: new {### = RouteParameter.Optional}
);

config.Routes.MapHttpRoute(
   name: "...",
   routeTemplate: "api/{controller}/{action}/{venue}/{eventId}/{...}",
   defaults: new {... = RouteParameter.Optional}
);

config.Routes.MapHttpRoute(
   name: "...",
   routeTemplate: "api/{controller}/{action}/{venue}",
   defaults: new {venue = RouteParameter.Optional}
); 
```

我希望至少有一种方法最多有 5 个参数

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T16:16:48.223

这是我找到的答案，它几乎完全符合我的要求：

```
 config.Routes.MapHttpRoute(
            name: "VenuesAllOrStream",
            routeTemplate: "api/Racing/{action}",
            defaults: new { controller = "Racing", action = "Venues" },
            constraints: new { action = "Venues|All|Streaming" }
        );

        config.Routes.MapHttpRoute(
            name: "VenueOrVideo",
            routeTemplate: "api/Racing/{venue}/{action}",
            defaults: new { controller = "Racing", action = "RaceNumbers" },
            constraints: new { action = "RaceNumbers|Video" }
        );

        config.Routes.MapHttpRoute(
            name: "ProgramOrMtp",
            routeTemplate: "api/Racing/{venue}/{race}/{action}",
            defaults: new { controller = "Racing", action = "Program" },
            constraints: new { action = "Program|Mtp", race = @"\d+" }
        ); 
```

重要的是 VenuesAllOrStream 首先，否则 VenueOrVideo 会选择路线。我很可能稍后会将动作约束提取到枚举中。

简要说明：设置动作默认值允许路由基本上使其成为可选参数。所以每条路线都可以在没有实际设置 {action} 的情况下工作。

# php - 为什么数据不会存储在我的数据库中？错误提示“您的 SQL 语法有错误；...”

> ID：15620143
> 
> 赞同：0
> 
> 时间：2013-03-25T16:38:56.247
> 
> 标签：php, mysql, xampp

对不起，我是 php 新手，所以请耐心等待。我正在创建一个用户界面，当我注册时它说我已经注册但它没有将数据存储到数据库中。此外，每次我注册时都会出现错误“您的 SQL 语法有错误；请查看与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'testing101''' 附近使用正确的语法。” 有人可以帮帮我吗！

```
 <?PHP

$uname = "";
$pword = "";
$errorMessage = "";
$num_rows = 0;

function quote_smart($value, $handle) {

   if (get_magic_quotes_gpc()) {
       $value = stripslashes($value);
   }

   if (!is_numeric($value)) {
       $value = "'" . mysql_real_escape_string($value, $handle) . "'";
   }
   return $value;
}

if ($_SERVER['REQUEST_METHOD'] == 'POST'){

    $uname = $_POST['username'];
    $pword = $_POST['password'];

    $uname = htmlspecialchars($uname);
    $pword = htmlspecialchars($pword);

    $uLength = strlen($uname);
    $pLength = strlen($pword);

    if ($uLength >= 10 && $uLength <= 20) {
        $errorMessage = "";
    }
    else {
        $errorMessage = $errorMessage . "Username must be between 10 and 20 characters" . "<BR>";
    }

    if ($pLength >= 8 && $pLength <= 16) {
        $errorMessage = "";
    }
    else {
        $errorMessage = $errorMessage . "Password must be between 8 and 16 characters" . "<BR>";
    }

    if ($errorMessage == "") {

    $user_name = "root";
    $pass_word = "";
    $database = "user authentication";
    $server = "127.0.0.1";

    $db_handle = mysql_connect($server, $user_name, $pass_word);
    $db_found = mysql_select_db($database, $db_handle);

    if ($db_found) {

        $uname = quote_smart($uname, $db_handle);
        $pword = quote_smart($pword, $db_handle);

        $SQL = "SELECT * FROM login WHERE USERNAME = '".$uname."'";
        $result = mysql_query($SQL)or die(mysql_error());
        $num_rows = mysql_num_rows($result);

        if ($num_rows > 0) {
            $errorMessage = "Username already taken";
        }

        else {

    $SQL = "INSERT INTO login (USERNAME, PASSWORD) VALUES ('{$uname}', MD5('{$pword}'))"; 
            $result = mysql_query($SQL);

            mysql_close($db_handle);

        //=================================================================================
        //  START THE SESSION AND PUT SOMETHING INTO THE SESSION VARIABLE CALLED login
        //  SEND USER TO A DIFFERENT PAGE AFTER SIGN UP
        //=================================================================================

            session_start();
            $_SESSION['login'] = "1";

            header ("Location: page1.php");

        }

    }
    else {
        $errorMessage = "Database Not Found";
    }

    }

}

?>

    <html>
    <head>
    <title>Basic Login Script</title>

    </head>
    <body>

<FORM NAME ="form1" METHOD ="POST" ACTION ="signup.php">

Username: <INPUT TYPE = 'TEXT' Name ='username'  value="<?PHP print $uname;?>" maxlength="20">
Password: <INPUT TYPE = 'TEXT' Name ='password'  value="<?PHP print $pword;?>" maxlength="16">

<P>
<INPUT TYPE = "Submit" Name = "Submit1"  VALUE = "Register">

</FORM>
<P>

<?PHP print $errorMessage;?>

    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T16:49:07.223

你在双引号你的文字：

`smart_quote()`在您的函数中添加了 1 组引号。
在您的实际查询中添加了一组引号，因此您正在生产：

```
INSERT .... VALUES (''$uname'', ''$password''); 
```

如果您在处理查询调用时有适当的错误，您会看到：

```
$result = mysql_query($sql) or die(mysql_error());
                           ^^^^^^^^^^^^^^^^^^^^^^ 
```

# php - 我有一个包含 24 个项目的目录，当单击一个项目时，我想隐藏 23 个项目并显示有关所选项目的更多信息

> ID：15620145
> 
> 赞同：-2
> 
> 时间：2013-03-25T16:38:58.497
> 
> 标签：php, javascript, jquery, html, mysql

这听起来比实际简单得多。我无法使用 jQuery 修改 DOM，因为每个项目及其详细信息都是使用 PHP 从数据库中填充的。

理论上我想做的事情很简单，但我做不到。例如我想要的是：

如果单击项目 1001，则隐藏所有其他项目并显示有关项目 1001 的更多详细信息。

这是我第二次在这个问题上寻求帮助，似乎没有人知道这个问题的答案。我已经改写了我的问题并再次尝试，并且非常感谢您的帮助。即使你能指出我正确的方向，我也会去研究它。TBH 我完全不知道从哪里开始。

谢谢

```
<script>
        $(".1001").click(function(){
            $("#images1").remove();
            $("#images2").show();
        });
     </script>

     <section class="catalogListing">
     <?php $load_content->load_content("1001");?>
      <div class="dresses">
       <a class="1001" href="#">
       <figure><img src="<?php echo $load_content->getImgMedium();?>" /></figure>
       <p class="listing"><?php echo $load_content->getTitle();?></p></a>
       <p class="listingSub">Artist:<?php echo $load_content->getArtist();?><br />Was:<strike>£175.00</strike></p>
       <p class="p4"><strong>Now: £<span class="price"><?php echo $load_content->getPrice();?></span></strong></p>  
      </div>
     </section>

     <section class="catalogListing">
      <div class="dresses">
      <?php $load_content->load_content("1002");?>
       <a class="a3" href="#">
       <figure><img src="<?php echo $load_content->getImgMedium();?>" /></figure>
       <p class="listing"><?php echo $load_content->getTitle();?></p></a>
       <p class="listingSub">Artist:<?php echo $load_content->getArtist();?><br />Was:<strike>£150.00</strike></p>
       <p class="p4"><strong>Now: £<span class="price"><?php echo $load_content->getPrice();?></span></strong></p>
       <p class="p4"><font>Out of stock</font></p>
     </div>
    </section>

    <section class="catalogListing">
      <div class="dresses">
      <?php $load_content->load_content("1003");?>
       <a class="a3" href="#">
       <figure><img src="<?php echo $load_content->getImgMedium();?>" /></figure>
       <p class="listing"><?php echo $load_content->getTitle();?></p></a>
       <p class="listingSub">Artist:<?php echo $load_content->getArtist();?><br />Was:<strike>£150.00</strike></p>
       <p class="p4"><strong>Now: £<span class="price"><?php echo $load_content->getPrice();?></span></strong></p>
       <p class="p4"><font>Out of stock</font></p>
     </div>
    </section>

    <section class="catalogListing">
      <div class="dresses">
      <?php $load_content->load_content("1004");?>
       <a class="a3" href="#">
       <figure><img src="<?php echo $load_content->getImgMedium();?>" /></figure>
       <p class="listing"><?php echo $load_content->getTitle();?></p></a>
       <p class="listingSub">Artist:<?php echo $load_content->getArtist();?>
       <p class="p4"><strong>Now: £<span class="price"><?php echo $load_content->getPrice();?></span></strong></p>

     </div>
    </section>

    <section class="catalogListing">
      <div class="dresses">
      <?php $load_content->load_content("1005");?>
       <a class="a3" href="#">
       <figure><img src="<?php echo $load_content->getImgMedium();?>" /></figure>
       <p class="listing"><?php echo $load_content->getTitle();?></p></a>
       <p class="listingSub">Artist:<?php echo $load_content->getArtist();?><br />Was:<strike>£150.00</strike></p>
       <p class="p4"><strong>Now: £<span class="price"><?php echo $load_content->getPrice();?></span></strong></p>
     </div>
    </section>

    <section class="catalogListing">
      <div class="dresses">
      <?php $load_content->load_content("1006");?>
       <a class="a3" href="#">
       <figure><img src="<?php echo $load_content->getImgMedium();?>" /></figure>
       <p class="listing"><?php echo $load_content->getTitle();?></p></a>
       <p class="listingSub">Artist:<?php echo $load_content->getArtist();?>
       <p class="p4"><strong>Now: £<span class="price"><?php echo $load_content->getPrice();?></span></strong></p>
     </div>
    </section>

    <section class="catalogListing">
      <div class="dresses">
      <?php $load_content->load_content("1007");?>
       <a class="a3" href="#">
       <figure><img src="<?php echo $load_content->getImgMedium();?>" /></figure>
       <p class="listing"><?php echo $load_content->getTitle();?></p></a>
       <p class="listingSub">Artist:<?php echo $load_content->getArtist();?>
       <p class="p4"><strong>Now: £<span class="price"><?php echo $load_content->getPrice();?></span></strong></p>
     </div>
    </section>

    <section class="catalogListing">
      <div class="dresses">
      <?php $load_content->load_content("1008");?>
       <a class="a3" href="#">
       <figure><img src="<?php echo $load_content->getImgMedium();?>" /></figure>
       <p class="listing"><?php echo $load_content->getTitle();?></p></a>
       <p class="listingSub">Artist:<?php echo $load_content->getArtist();?>
       <p class="p4"><strong>Now: £<span class="price"><?php echo $load_content->getPrice();?></span></strong></p>
       <p class="p4"><font>Out of stock</font></p>
     </div>
    </section>

    <section class="catalogListing">
      <div class="dresses">
      <?php $load_content->load_content("1009");?>
       <a class="a3" href="#">
       <figure><img src="<?php echo $load_content->getImgMedium();?>" /></figure>
       <p class="listing"><?php echo $load_content->getTitle();?></p></a>
       <p class="listingSub">Artist:<?php echo $load_content->getArtist();?>
       <p class="p4"><strong>Now: £<span class="price"><?php echo $load_content->getPrice();?></span></strong></p>
     </div>
    </section>

    </section><!---End of first nine items--->

    <section id="secondNineItems">

   <section class="catalogListing">
      <div class="dresses">
      <?php $load_content->load_content("1010");?>
       <a class="a3" href="#">
       <figure><img src="<?php echo $load_content->getImgMedium();?>" /></figure>
       <p class="listing"><?php echo $load_content->getTitle();?></p></a>
       <p class="listingSub">Artist:<?php echo $load_content->getArtist();?>
       <p class="p4"><strong>Now: £<span class="price"><?php echo $load_content->getPrice();?></span></strong></p>
     </div>
    </section>

    <section class="catalogListing">
      <div class="dresses">
      <?php $load_content->load_content("1011");?>
       <a class="a3" href="#">
       <figure><img src="<?php echo $load_content->getImgMedium();?>" /></figure>
       <p class="listing"><?php echo $load_content->getTitle();?></p></a>
       <p class="listingSub">Artist:<?php echo $load_content->getArtist();?>
       <p class="p4"><strong>Now: £<span class="price"><?php echo $load_content->getPrice();?></span></strong></p>
     </div>
    </section>

    <section class="catalogListing">
      <div class="dresses">
      <?php $load_content->load_content("1012");?>
       <a class="a3" href="#">
       <figure><img src="<?php echo $load_content->getImgMedium();?>" /></figure>
       <p class="listing"><?php echo $load_content->getTitle();?></p></a>
       <p class="listingSub">Artist:<?php echo $load_content->getArtist();?>
       <p class="p4"><strong>Now: £<span class="price"><?php echo $load_content->getPrice();?></span></strong></p>
     </div>
    </section>

    <section class="catalogListing">
      <div class="dresses">
      <?php $load_content->load_content("1013");?>
       <a class="a3" href="#">
       <figure><img src="<?php echo $load_content->getImgMedium();?>" /></figure>
       <p class="listing"><?php echo $load_content->getTitle();?></p></a>
       <p class="listingSub">Artist:<?php echo $load_content->getArtist();?>
       <p class="p4"><strong>Now: £<span class="price"><?php echo $load_content->getPrice();?></span></strong></p>
     </div>
    </section>

    <!---Items with the class "tunics" are below--->

    <section class="catalogListing">
      <div class="dresses">
      <?php $load_content->load_content("1014");?>
       <a class="a3" href="#">
       <figure><img src="<?php echo $load_content->getImgMedium();?>" /></figure>
       <p class="listing"><?php echo $load_content->getTitle();?></p></a>
       <p class="listingSub">Artist:<?php echo $load_content->getArtist();?>
       <p class="p4"><strong>Now: £<span class="price"><?php echo $load_content->getPrice();?></span></strong></p>
     </div>
    </section>

    <section class="catalogListing">
      <div class="dresses">
      <?php $load_content->load_content("1015");?>
       <a class="a3" href="#">
       <figure><img src="<?php echo $load_content->getImgMedium();?>" /></figure>
       <p class="listing"><?php echo $load_content->getTitle();?></p></a>
       <p class="listingSub">Artist:<?php echo $load_content->getArtist();?>
       <p class="p4"><strong>Now: £<span class="price"><?php echo $load_content->getPrice();?></span></strong></p>
     </div>
    </section>

    <!---Items with the class "tops" are below--->

    <section class="catalogListing">
      <div class="dresses">
      <?php $load_content->load_content("1016");?>
       <a class="a3" href="#">
       <figure><img src="<?php echo $load_content->getImgMedium();?>" /></figure>
       <p class="listing"><?php echo $load_content->getTitle();?></p></a>
       <p class="listingSub">Artist:<?php echo $load_content->getArtist();?>
       <p class="p4"><strong>Now: £<span class="price"><?php echo $load_content->getPrice();?></span></strong></p>
      <p class="p4"><font>Out of stock</font></p> 
     </div>
    </section>          

    <section class="catalogListing">
      <div class="dresses">
      <?php $load_content->load_content("1017");?>
       <a class="a3" href="#">
       <figure><img src="<?php echo $load_content->getImgMedium();?>" /></figure>
       <p class="listing"><?php echo $load_content->getTitle();?></p></a>
       <p class="listingSub">Artist:<?php echo $load_content->getArtist();?>
       <p class="p4"><strong>Now: £<span class="price"><?php echo $load_content->getPrice();?></span></strong></p>
     </div>
    </section>

    <section class="catalogListing">
      <div class="dresses">
      <?php $load_content->load_content("1018");?>
       <a class="a3" href="#">
       <figure><img src="<?php echo $load_content->getImgMedium();?>" /></figure>
       <p class="listing"><?php echo $load_content->getTitle();?></p></a>
       <p class="listingSub">Artist:<?php echo $load_content->getArtist();?>
       <p class="p4"><strong>Now: £<span class="price"><?php echo $load_content->getPrice();?></span></strong></p>
      <p class="p4"><font>Out of stock</font></p> 
     </div>
    </section>

    </section><!---End of second nine items--->

    <section id="thirdNineItems">

    <section class="catalogListing">
      <div class="dresses">
      <?php $load_content->load_content("1019");?>
       <a class="a3" href="#">
       <figure><img src="<?php echo $load_content->getImgMedium();?>" /></figure>
       <p class="listing"><?php echo $load_content->getTitle();?></p></a>
       <p class="listingSub">Artist:<?php echo $load_content->getArtist();?>
       <p class="p4"><strong>Now: £<span class="price"><?php echo $load_content->getPrice();?></span></strong></p>
     </div>
    </section>

    <section class="catalogListing">
      <div class="dresses">
      <?php $load_content->load_content("1020");?>
       <a class="a3" href="#">
       <figure><img src="<?php echo $load_content->getImgMedium();?>" /></figure>
       <p class="listing"><?php echo $load_content->getTitle();?></p></a>
       <p class="listingSub">Artist:<?php echo $load_content->getArtist();?>
       <p class="p4"><strong>Now: £<span class="price"><?php echo $load_content->getPrice();?></span></strong></p>
     </div>
    </section>

    <section class="catalogListing">
      <div class="dresses">
      <?php $load_content->load_content("1021");?>
       <a class="a3" href="#">
       <figure><img src="<?php echo $load_content->getImgMedium();?>" /></figure>
       <p class="listing"><?php echo $load_content->getTitle();?></p></a>
       <p class="listingSub">Artist:<?php echo $load_content->getArtist();?>
       <p class="p4"><strong>Now: £<span class="price"><?php echo $load_content->getPrice();?></span></strong></p>
     </div>
    </section>

    <section class="catalogListing">
      <div class="dresses">
      <?php $load_content->load_content("1022");?>
       <a class="a3" href="#">
       <figure><img src="<?php echo $load_content->getImgMedium();?>" /></figure>
       <p class="listing"><?php echo $load_content->getTitle();?></p></a>
       <p class="listingSub">Artist:<?php echo $load_content->getArtist();?>
       <p class="p4"><strong>Now: £<span class="price"><?php echo $load_content->getPrice();?></span></strong></p>
     </div>
    </section>

    <section class="catalogListing">
      <div class="dresses">
      <?php $load_content->load_content("1023");?>
       <a class="a3" href="#">
       <figure><img src="<?php echo $load_content->getImgMedium();?>" /></figure>
       <p class="listing"><?php echo $load_content->getTitle();?></p></a>
       <p class="listingSub">Artist:<?php echo $load_content->getArtist();?>
       <p class="p4"><strong>Now: £<span class="price"><?php echo $load_content->getPrice();?></span></strong></p>
     </div>
    </section>

    <section class="catalogListing">
      <div class="dresses">
      <?php $load_content->load_content("1024");?>
       <a class="a3" href="#">
       <figure><img src="<?php echo $load_content->getImgMedium();?>" /></figure>
       <p class="listing"><?php echo $load_content->getTitle();?></p></a>
       <p class="listingSub">Artist:<?php echo $load_content->getArtist();?>
       <p class="p4"><strong>Now: £<span class="price"><?php echo $load_content->getPrice();?></span></strong></p> 
      <p class="p4"><font>Out of stock</font></p> 
     </div>
    </section>

    </section><!---End of third nine items--->

    </article><!---End of article:ShopContent--->

   </article><!---End of article:ShopWrapper--->

  </article><!---End of article:main--->

  <!---Main Content Area clothes--->

  <article id="clothes1">

    <p class="p2"><a href="index.php" class="a2">HOME&nbsp;></a>&nbsp;<a href="shop.php" class="a2">SHOP&nbsp;></a>&nbsp;<strong>CLOTHES 1</strong></p>

    <!--- Load images --->
    <section id="images1" style="width:400px; float:left; height:auto;">

    <p><?php $load_content->load_content('1002');?></p>

     <a href="<?php echo $load_content->getImgLarge1();?>" class="zoom">
     <img src="<?php echo $load_content->getImgLarge1();?>" width="375" height="568" alt="arrows"></a>

     <a href="#">
     <img class="thumbnails" title="Click to enlarge" src="<?php echo $load_content->getImgSmall1();?>" width="64" height="100"/>
     </a>

     <a href="#">
     <img class="thumbnails" title="Click to enlarge" src="<?php echo $load_content->getImgSmall2();?>" width="64" height="100"/>
     </a>

     <a href="#">
     <img class="thumbnails" title="Click to enlarge" src="<?php echo $load_content->getImgSmall3();?>" width="64" height="100"/>
     </a>

     <a href="#">
     <img class="thumbnails" title="Click to enlarge" src="<?php echo $load_content->getImgSmall4();?>" width="64" height="100"/>
     </a>     

    </section>

    <!--- Load images --->
    <section id="images2" style="width:400px; float:left; height:auto;">

    <p><?php $load_content->load_content('1001');?></p>

     <a href="<?php echo $load_content->getImgLarge1();?>" class="zoom">
     <img src="<?php echo $load_content->getImgLarge1();?>" width="375" height="568" alt="arrows"></a>

     <a href="#">
     <img class="thumbnails" title="Click to enlarge" src="<?php echo $load_content->getImgSmall1();?>" width="64" height="100"/>
     </a>

     <a href="#">
     <img class="thumbnails" title="Click to enlarge" src="<?php echo $load_content->getImgSmall2();?>" width="64" height="100"/>
     </a>

     <a href="#">
     <img class="thumbnails" title="Click to enlarge" src="<?php echo $load_content->getImgSmall3();?>" width="64" height="100"/>
     </a>

     <a href="#">
     <img class="thumbnails" title="Click to enlarge" src="<?php echo $load_content->getImgSmall4();?>" width="64" height="100"/>
     </a>     

    </section> 
```

PHP 生成的 HTML 代码：

```
<section id="images2" style="width:400px; float:left; height:auto;">

<p></p>

 <a href="images/Catalog/Largest/aof_14102_amorous_arrows.jpg" class="zoom">
 <img src="images/Catalog/Largest/aof_14102_amorous_arrows.jpg" width="375" height="568" alt="arrows"></a>

 <a href="#">
 <img class="thumbnails" title="Click to enlarge" src="images/Catalog/Small/aof_14102_amorous_arrows.jpg" width="64" height="100">
 </a>

 <a href="#">
 <img class="thumbnails" title="Click to enlarge" src="images/Catalog/Small/aof_14175_amorous_arrows_side_back_view.jpg" width="64" height="100">
 </a>

 <a href="#">
 <img class="thumbnails" title="Click to enlarge" src="images/Catalog/Small/aof_14077_amorous_arrows_other_view.jpg" width="64" height="100">
 </a>

 <a href="#">
 <img class="thumbnails" title="Click to enlarge" src="images/Catalog/Small/amorous_arrows.jpg" width="64" height="100">
 </a>     

</section> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T17:18:25.873

```
var $all_listings = $('section.catalogListing');    

$('section.catalogListing').click(function(){

    var $listing = $(this);

    if(!$listing.hasClass('active') {
        $all_listings.removeClass('active').hide();
        $listing.addClass('active').show();
    } else {
     $all_listings.show();
     $listing.removeClass('active');
    }

}); 
```

这对你有什么用？

**解释：**

添加或删除活动类，具体取决于它是“开”还是“关”。只显示处于活动状态的列表，但是如果单击已经处于活动状态的列表，则删除其活动类并显示所有内容....基本上回到第一格。

在顶级父级上使用活动类 - 在这种情况下是该部分 - 但在您的 CSS 中，您可能希望根据活动类隐藏和显示项目详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T16:48:59.920

在最外层的 div 中使用特殊的 css 类（如“可隐藏”）创建所有列表项。

加载所有项目，并将“更多详细信息”数据包含在具有样式属性的单独 div 中`'visibility: hidden'`。

检查一个项目后，使用jQuery选择所有具有“可隐藏”类的项目，然后循环通过它们，将其视为*隐藏*。

最后将可见性设置为在单击的项目上可见，它是“更多数据”div *。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T17:00:27.770

基本前提是，您将隐藏除单击的所有项目之外的所有项目，您还将显示单击的更多信息。您可以使用基本的显示/隐藏 jQuery 功能来做到这一点。

加载更多信息 div 并将其显示设置为无，然后在单击特定项目时切换它们。

这里非常基本，非常丑陋的版本：http: [//jsfiddle.net/calder12/zf5ZT/](http://jsfiddle.net/calder12/zf5ZT/)

```
$('div').on("click", function(){
    if($(this).hasClass('smallDiv'))
    {
       $('div').not(this).fadeOut();
       $(this).addClass('bigDiv'); 
       $(this).removeClass('smallDiv'); 
        $('.info').fadeIn();
    } else {        
       $('div').not(this).fadeIn();
       $(this).addClass('smallDiv'); 
       $(this).removeClass('bigDiv');  
        $('.info').fadeOut();
    }
});

.smallDiv{width:50px;height:50px;background-color:#CCC;border:1px solid #333;margin: 10px;cursor:pointer;}
.bigDiv{width:100px;height:100px;background-color:#CCC;border:1px solid #333;margin: 10px;cursor:pointer;}
.info{display:none;}

<div id="1" class="smallDiv"><div class="info">This is some text</div></div>
<div id="2" class="smallDiv"></div>
<div id="3" class="smallDiv"></div>
<div id="4" class="smallDiv"></div> 
```

您应该能够调整它以满足您的需求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T17:05:22.480

很难在没有看到任何代码的情况下回答......但有点像这样的事情可能会奏效。

...大致上，标记...

```
<a href="#" class='view-details-btn' data-product='product1001'>View Details</a>
<div class='item-container' data-product='product1001'>
 <!-- stuff goes in here -->
</div> 
```

...和js ...

```
function details(switch,clicked){

    var objects = $('.item-container'),
        objectToShow = $('.item-container[data-product=' + $(clicked).attr('data-product') + ']'),
        objectsToHide = $(objects).not(objectToShow);

    if (switch === 'show'){
        $(objectsToHide).hide();
        $(objectToShow).addClass('show-details');
    } else {
        $(objects).removeClass('show-details').show();
    }   
}

$('a.view-details-btn').click(function(e){
    e.preventDefault ? e.preventDefault() : e.returnValue = false;
    details('show',$(this));
});

$('a.hide-details-btn')..click(function(e){
    e.preventDefault ? e.preventDefault() : e.returnValue = false;
    details('hide');
}); 
```

...和CSS ...

```
.item-container .detailbox {display: none;}
.item-container.show-details .detailbox {display: block;} 
```

可能需要针对标记的排列方式对其进行微调，但您明白了。

# javascript - 是否可以叠加两个谷歌地图？

> ID：15620153
> 
> 赞同：1
> 
> 时间：2013-03-25T16:39:10.310
> 
> 标签：javascript, google-maps

我的目标是让在/与谷歌地图中比较两个地铁系统成为可能，但我不确定如何。理想情况下，如果可以将两个公共交通系统叠加为地图，那就太好了。

到目前为止（下面的代码）我关闭了除了公交线路和车站之外的所有东西。不确定灰色的“背景”是否会成为叠加它的问题 - 甚至是否可以叠加两个谷歌地图。在地图 api 帮助页面上找不到任何内容。

如果不可能， - 你还有什么推荐的？

我需要知道的另一件事是是否可以将这些公交线路着色为每张地图的一种颜色，但我想我应该提出一个新问题？

非常感谢你的帮助，SHDY

```
var map;
      function initialize() {
        var mapOptions = {
          zoom: 11,
          center: new google.maps.LatLng(40.734077,-73.977699),  
          mapTypeId: google.maps.MapTypeId.ROADMAP,
          styles: [
  {
    "featureType": "administrative",
    "stylers": [
      { "visibility": "off" }
    ]
  },{
    "featureType": "landscape",
    "stylers": [
      { "visibility": "off" }
    ]
  },{
    "featureType": "water",
    "stylers": [
      { "visibility": "off" }
    ]
  },{
    "featureType": "road",
    "stylers": [
      { "visibility": "off" }
    ]
  },{
    "featureType": "poi",
    "stylers": [
      { "visibility": "off" }
    ]
  },{
    "featureType": "transit",
    "elementType": "geometry",
    "stylers": [
      { "color": "#000d0c" },
      { "visibility": "off" }
    ]
  }
]
        };
        map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);
        var transitLayer = new google.maps.TransitLayer();
        transitLayer.setMap(map);
      }

      google.maps.event.addDomListener(window, 'load', initialize); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:31:36.057

可以叠加两个（或更多）地图；我已经用两个不同的自定义瓷砖层做到了这一点。 有关最多三层的地图，请参见 [http://maps.webfoot.com/demos/election2008/ 。](http://maps.webfoot.com/demos/election2008/)

困难的部分是弄清楚如何覆盖它们以便人们可以看到两者。也许你在其中一个中使大部分像素清晰。也许你让顶层透明。也许你在顶层打了一个窗口，这样你就可以看到下面的底层。您必须弄清楚如何保持两个图层可见。

# c# - 使用 Sum 的除法不起作用

> ID：15620155
> 
> 赞同：0
> 
> 时间：2013-03-25T16:39:17.797
> 
> 标签：c#, sum, division

在我的程序中，我创建了一个自定义类的列表。此类包含一个整数属性。我想将另一个给定的整数除以列表中这些属​​性的总和 - 但`Sum()`不能在除法中正常工作。

我为您创建了一个简短的演示，它是一个简单的控制台应用程序：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Sum
{
    class Program
    {
        static void Main(string[] args)
        {
            List<Class> list = new List<Class>() {
                new Class() { Property = 1},
                new Class() { Property = 1},
                new Class() { Property = 1},
                new Class() { Property = 1},
                new Class() { Property = 1},
                new Class() { Property = 1}
            };

            Console.WriteLine("Sum: " + list.Sum(x => x.Property));
            Console.WriteLine("Division: " + (2 / list.Sum(x => x.Property)));
            Console.ReadLine();
        }
    }

    public class Class
    {
        public int Property { get; set; }
    }
} 
```

我知道我可以将属性的总和保存在一个新变量中，然后将其用于我的除法。但是`Sum`在这种情况下不应该成功吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T16:41:44.947

这里的问题是您使用仅支持整数的整数除法。您想改为进行支持小数的浮点除法

```
Console.WriteLine("Division: " + ((double)2 / list.Sum(x => x.Property))); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T16:42:04.847

那是因为您使用的是整数除法，而不是浮点除法。尝试`2f`改为使用[`float`](http://msdn.microsoft.com/en-us/library/b1e65aza.aspx)常量：

```
Console.WriteLine("Division: " + (2f / list.Sum(x => x.Property))); 
```

或者`2d`改为一个[`double`](http://msdn.microsoft.com/en-us/library/678hzkk9.aspx)常数：

```
Console.WriteLine("Division: " + (2d / list.Sum(x => x.Property))); 
```

或者`2m`改为一个[`decimal`](http://msdn.microsoft.com/en-us/library/364x0z75.aspx)常数：

```
Console.WriteLine("Division: " + (2m / list.Sum(x => x.Property))); 
```

任何人都会给你你正在寻找的结果（只有一些准确性差异）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-25T16:42:31.203

我假设您希望结果是，`2 / 6 = 0,33`但整数除法总是导致整数（在 C# 中）。所以至少有一个数字必须是浮点类型，例如`double`.

```
Console.WriteLine("Division: " + (2d / list.Sum(x => x.Property))); 
```

> 除法将结果向零舍入，结果的绝对值是小于两个操作数的商的绝对值的最大可能整数。当两个操作数具有相同符号时，结果为零或正，当两个操作数具有相反符号时，结果为零或负。

[http://msdn.microsoft.com/en-us/library/aa691373(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa691373(v=vs.71).aspx)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-25T16:41:23.300

`Sum`实际工作，但结果是`0`因为你使用整数除法：`int`divides `int`=> result will be `int`，你应该改变：

```
(2.0 / list.Sum(x => x.Property)) 
```

它会工作

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T16:41:52.440

我认为它会将 0 写入输出，因为整数除法。

# r - 如何删除粘贴功能中的空格以构建 URL？

> ID：15620156
> 
> 赞同：3
> 
> 时间：2013-03-25T16:39:21.377
> 
> 标签：r, url, csv, paste

在此先感谢您的帮助。本质上，我正在编写一个构建 URL 的程序，该 URL 将提供一个 CSV 文件。该程序要求用户提供几个输入，然后将这些输入附加到基本 URL。我遇到的问题是，当我尝试将它们粘贴到 URL 中时，每个用户输入之间都会增加一个空格。问题出在#Build URL 行中。

这是代码

```
 #URL Builder for Yahoo Finance
 #Requests Input from User, Builds URL, downloads csv.file from site
 #Requests are for:
      #Ticker (2-4 letter - character string)
      #Start Month (00 - 11 integer)
      #Start Day (1 - 31 integer)
      #Start Year (Four digit integer)
      #End Month (00 - 11 integer)
      #End Day (1 - 31 integer)
      #End Year (Four digit integer)

 #Functions
      Get_Ticker <- function(){readline("Please enter a Ticker:>>> ")} 
      Get_Month_Begin <- function(){as.numeric(readline("Enter the start month (MM):>>> "))}
      Get_Day_Begin <- function(){as.numeric(readline("Enter the start day (1-31) :>>> "))}
      Get_Year_Begin <- function(){as.numeric(readline("Enter the start year (YYYY) :>>> "))}
      Get_Month_End <- function(){as.numeric(readline("Enter the end month (MM) :>>> "))}
      Get_Day_End <- function(){as.numeric(readline("Enter the end day (1-31) :>>> "))}
      Get_Year_End <- function(){as.numeric(readline("Enter the end year :>>> "))}

 #Function Calls
      Ticker <- Get_Ticker()
      Month_Begin <- Get_Month_Begin()
      Day_Begin <- Get_Day_Begin()
      Year_Begin <- Get_Year_Begin()
      Month_End <- Get_Month_End()
      Day_End <- Get_Day_End()
      Year_End <- Get_Year_End()

 #Build URL
 #Example URL: ichart.finance.yahoo.com/table.csv?s=DVN&a=00&b=1&c=1992&d=11&e=31&f=2013&g=d&ignore=.csv
      CSV_Base_URL <- "ichart.finance.yahoo.com/table.csv?s="
      CSV_URL_Complete <- paste(CSV_Base_URL,Ticker,"&a=",Month_Begin,"&b=",Day_Begin,"&c=",Year_Begin,"&d=",Month_End,"&e=",Day_End,"&f=",Year_End,"&g=d&ignore=.csv",sep="")

 #Download CSV
      Yahoo_Finance_TBL <- read.csv(CSV_URL_Complete)

 #Write CSV File
      write.csv(Yahoo_Finance_TBL, file="Yahoo_Finance_File", row.names=FALSE) 
```

再次，我非常感谢您的帮助。

尊敬，

乔纳森

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T16:51:20.497

为避免出现空格，您需要使用 paste (sep="")，但您已经这样做了。事实上，我不确定问题出在哪里，因为您的代码似乎对我来说工作正常。这是我将您的代码放入我的 R 会话时的输出：

```
> Ticker <- Get_Ticker()
Please enter a Ticker:>>> GOOG
> Month_Begin <- Get_Month_Begin()
Enter the start month (MM):>>> 01
> Day_Begin <- Get_Day_Begin()
Enter the start day (1-31) :>>> 01
> Year_Begin <- Get_Year_Begin()
Enter the start year (YYYY) :>>> 2013
> Month_End <- Get_Month_End()
Enter the end month (MM) :>>> 02
> Day_End <- Get_Day_End()
Enter the end day (1-31) :>>> 28
> Year_End <- Get_Year_End()
Enter the end year :>>> 2013
> CSV_Base_URL <- "ichart.finance.yahoo.com/table.csv?s="
> CSV_URL_Complete <- paste(CSV_Base_URL,Ticker,"&a=",Month_Begin,"&b=",Day_Begin,"&c=",Year_Begin,"&d=",Month_End,"&e=",Day_End,"&f=",Year_End,"&g=dignore=.csv",sep="")
> CSV_URL_Complete
[1] "ichart.finance.yahoo.com/table.csv?s=GOOG&a=01&b=1&c=2013&d=2&e=28&f=2013&g=dignore=.csv" 
```

生成的 URL 运行良好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T17:12:44.213

问题是您在构建它时没有添加`"http://"`到 URL。如果您不告诉它，R 应该如何知道这是一个 URL。目前它正在当前工作目录中的文件系统上寻找具有该名称的文件。

你要：

```
CSV_Base_URL <- "http://ichart.finance.yahoo.com/table.csv?s=" 
```

您添加到问题评论流中的 URL*是*有效的，因此通过上述添加，R 应该从 URL 下载并读取 CSV。

`?read.csv 有：

```
file:
....
      ‘file’ can also be a complete URL.  (For the supported URL
      schemes, see the ‘URLs’ section of the help for ‘url’.) 
```

那有：

```
 For ‘url’ the description is a complete URL, including scheme
 (such as ‘http://’, ‘ftp://’ or ‘file://’).  Proxies can be
 specified for HTTP and FTP ‘url’ connections: see ‘download.file’. 
```

和

```
URLs:

     ‘url’ and ‘file’ support URL schemes ‘http://’, ‘ftp://’ and
     ‘file://’. 
```

这解释了这个问题。

有人可以推测，从 URL 栏（例如 Chrome）抑制协议的浏览器可能会导致人们不知道 URL 需要的不仅仅是地址部分吗？

# sql - SQL查询返回数据类型为日期和值为'01/01/2001'的记录？

> ID：15620161
> 
> 赞同：0
> 
> 时间：2013-03-25T16:39:31.627
> 
> 标签：sql, sql-server-2008

您好，我目前正在为客户转换数据。我正在导入“|” SQL Server 2008 R2 中的分隔文本文件。客户已使用“01/01/0001”作为空白日期；但是，当我导入此值时，SQL Server 将此日期视为“01/01/2001”。

我最初的工作是导入为 char(10)，然后在导入后进行更改。这对某些人有用，但我发现它并不总是有效！！！！令人沮丧....

我需要搜索值为“01/01/2001”的所有数据类型日期

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T16:54:44.557

如果您只想将所有实例更新为`NULL`（这比某些魔术值要好得多`01/01/0001`），那么您可以说：

```
DECLARE @sql NVARCHAR(MAX) = N'';

SELECT @sql += N'
UPDATE ' 
  +   QUOTENAME(OBJECT_SCHEMA_NAME([object_id]))
  + '.' + QUOTENAME(OBJECT_NAME([object_id]))
  + ' SET ' + QUOTENAME(name) + ' = NULL
      WHERE ' + QUOTENAME(name) + ' = ''20010101'';'
FROM sys.columns
WHERE system_type_id = 40; -- date

PRINT @sql;
--EXEC sp_executesql @sql; 
```

现在，我怀疑这不起作用的情况是数据类型实际上`date`不是`datetime`/的情况`smalldatetime`。所以你可能想要这个：

```
WHERE system_type_id IN (40,42,43,58,61); 
```

如果您仍想使用此 hocus pocus，您可以更改此行：

```
 + ' SET ' + QUOTENAME(name) + ' = NULL 
```

对此：

```
 + ' SET ' + QUOTENAME(name) + ' = ''00010101'' 
```

`datetime`但是如果列是/ ，这将不起作用`smalldatetime`！

请注意，您应该始终使用`YYYYMMDD`. [这种`MM/DD/YYYY`东西是一个坏习惯，容易在堆栈上下产生误解](https://sqlblog.org/2009/10/16/bad-habits-to-kick-mis-handling-date-range-queries)。

# openerp - OpenERP 7：如何在产品表单视图中添加带有库存位置的列表视图

> ID：15620164
> 
> 赞同：-1
> 
> 时间：2013-03-25T16:39:40.227
> 
> 标签：openerp

如何在产品表单视图中添加包含产品库存位置的列表视图。或者也许有人知道返回给定产品的库存位置 ID 的函数？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T06:07:37.980

在 openerp 中，没有提供产品位置 ID 的功能之王。但是在 openerp 函数中获取该位置有多少产品可用。如果想获取给定产品的位置 ID，那么您必须制作自己的功能。

# html - W3C Validator 认为网站正在使用 XHTML；它不是

> ID：15620167
> 
> 赞同：-3
> 
> 时间：2013-03-25T16:39:54.490
> 
> 标签：html, xhtml, doctype, w3c, w3c-validation

[伦弗鲁郡议会网站](http://www.renfrewshire.gov.uk)使用HTML4.01 DOCTYPE，如下所示。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"> 
```

当该站点通过[W3C Validator](http://validator.w3.org/)运行时，它表明该站点正在使用 XHTML1.0。

谁能告诉我为什么存在这种差异？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T16:43:23.347

该页面具有以下文档类型：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

因此，验证器认为它使用 XHTML 是正确的。

# machine-learning - 增量（在线）反向传播停止标准

> ID：15620172
> 
> 赞同：4
> 
> 时间：2013-03-25T16:40:11.960
> 
> 标签：machine-learning, neural-network, backpropagation

在反向传播 ANN 的在线实现中，您将如何确定停止标准？

我一直在做的方式（我确信这是不正确的）是平均每个输出节点的误差，然后在每个时期平均这个误差。

这是不正确的方法吗？是否有停止在线实施的标准方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T22:05:20.260

您应该始终考虑与您的训练集分离的验证集上的误差（例如均方根误差）。如果训练时间过长，你的神经网络就会开始过*拟合*。这意味着，您的训练集上的错误将变得最小甚至为 0，但一般数据上的错误会变得更糟。

为了得到产生最佳泛化性能的模型参数，只要验证集上的错误达到新的最小值，就应该复制并保存模型参数。如果性能有问题，您可以仅每 N 步执行此检查。

在在线学习设置中，您将使用单个训练样本或少量训练样本的小批量进行训练。您可以将涵盖您的全部数据的所有样本/小批量的连续训练视为一个*训练时期*。

有几种可能性来定义所谓的*Early Stopping Criterion*。例如，您可以在每个完整时期后考虑验证集上的最佳 RMS 误差。一旦 M 时期没有新的最优值，你就会停下来。根据问题的复杂性，您必须选择足够高的 M。你也可以从一个相当小的 M 开始，每当你得到一个新的最优值时，你将 M 设置为达到它所需的 epoch 数。这取决于是快速收敛更重要还是尽可能彻底。

你总会遇到验证和/或训练错误会暂时变大的情况，因为学习算法是*爬山的*。这意味着它会遍历错误表面上导致性能不佳的区域，但必须通过它才能达到新的、更好的最优值。如果您只是在后续两个步骤之间的验证或训练错误变得更糟时立即停止，那么您将过早地获得次优解决方案。

# excel - Excel求解器忽略VBA中的约束

> ID：15620177
> 
> 赞同：3
> 
> 时间：2013-03-25T16:40:27.937
> 
> 标签：excel, vba, optimization, constraints, solver

我正在尝试使用 Solver 找到一个简单投资组合的最大回报。在工作表中直接使用 Solver 是明智的，但是在 VBA 中设置命令时就不行了。相反（正如您从屏幕截图中看到的那样），它忽略了其中一个约束（在 T10 中计算的权重总和应该 = 1）。有趣的是，如果我将第三行改为：

```
SolverAdd CellRef:="$T$10", Relation:=2, FormulaText:="100" 
```

或除“1”以外的任何其他整数。（它也可能忽略了其他约束，但我无法检查）。该表如下所示： ![在此处输入图像描述](../Images/18b7570dcea0d200807205d1e20f0d92.png)

我的代码是：

```
Sub FindRange()

                SolverReset
                SolverOk SetCell:="$T$7", MaxMinVal:=1, ValueOf:="0", ByChange:="$O$10:$R$10"
                SolverAdd CellRef:="$T$10", Relation:=2, FormulaText:="1"
                SolverAdd CellRef:="$O$10:$R$10", Relation:=3, FormulaText:="0"
                SolverSolve UserFinish:=True
                SolverFinish KeepFinal:=1
                Range("T9").Value = Range("T7").Value
           End Sub 
```

任何建议都非常欢迎！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-07T17:54:58.910

找到解决该错误的方法。对于标志“FormulaText:=1”。而不是使用 1，而是使用对任何值为 1 的单元格的引用。

即，将“FormulaText:=1”更改为“FormulaText:=$H$5”，其中 $H$5 的值为 1

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-11T21:38:55.903

我认为只要值正好是 1，这里就有一个错误。其他帖子指出上述解决方案（将值放入单元格）是不可靠的。我发现它不起作用，因为我的代码总是引用一个包含约束限制的单元格。我的（粗略）解决方案是将限制值移动 10 ^ 12 或在适当方向上降低 1 部分，这会使约束变为 < 或 > 而不是 <= 或 >=。所以而不是：

SolverAdd CellRef:=Range("SolverParam").Address, Relation:=3, _ FormulaText:=Range("SolverConstraint").value

利用：

SolverAdd CellRef:=Range("SolverParam").Address, Relation:=3, _ FormulaText:=Range("SolverConstraint").value + Abs(Range("SolverConstraint").value) * 1e-12

并为 Relation:=1 使用相反的符号

在这个简单的示例中，SolverParam 是要调整的单个单元格参数，SolverConstraint 是单个单元格的下限。

这是我可以预见的唯一一致的方法，可以统一处理所有值

进一步看，我从网上找到了另一个解决方案

FormulaText:="=" & Range("SolverConstraint").value

似乎工作可靠

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-14T13:13:01.863

我有完全相同的问题。我通过以下方式解决了它：只需键入 FormulaText:=1 而不带引号 1。

# fireworks - 创建以切片命名的图层

> ID：15620179
> 
> 赞同：1
> 
> 时间：2013-03-25T16:40:34.593
> 
> 标签：fireworks

我有一个问题可能无法“开箱即用”解决。我正在运行烟花 8，并希望能够运行：

`Commands->Document->Split to layers`

并使用为其创建图层的切片的名称创建生成的图层。例如，如果我的 png 中有 3 个切片，分别称为“头”、“肩”和“臂”，我希望该命令创建与切片名称对应的图层名称。就目前而言，在运行此命令时，创建的默认图层名称按顺序命名为“Layer 1”、“Layer 2”、“Layer 3”等。

这个要求的原因是因为我希望使用`Export`命令将各个图层保存到使用“切片名称（'Head.png'等）而不是默认图层名称的命名 png 文件中。现在我知道我可以手动重命名图层以匹配切片，并根据需要导出到文件夹。然而，在我的现实生活场景中，每个文档有超过 50 个切片需要这种处理，并且我一次有 100 个文档来“批处理”过程。所以我的想法是我将能够运行一个命令（或创建某种宏），这将允许我创建与它们包含的切片同名的层。

这将使我的生活变得更加简单，因为我可以根据位于文件夹结构中的一组源图像完全自动化该过程，而不是打开每个文件，运行上述命令，手动重命名每一层（当然容易出错）然后运行导出功能。

任何人都可以提供有关寻找解决方案的建议吗？我希望我不是唯一遇到此要求的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T19:46:54.190

我在此处的 Split to Layers 命令中添加了[一行](http://pastie.org/7115515)。如果您将其保存`Distribute to Named Layers.jsf`在与原始命令相同的文件夹中（在 CS5.5 中我在*Configuration/Commands/Document*中找到它），我认为这应该可以满足您的需要。

也就是说，jsf 在我的经验中是相当不可预测的（例如，该命令似乎错过了诸如 Rectangles 之类的默认名称，直到它们被重命名），所以我不确定它是否会 100% 工作。此外，该脚本跳过了 5.5 中包含切片的*Web 层*——我不记得 8 中的设置是否不同。但希望这能让您有所了解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T14:17:00.787

仅供参考 - 这是最终`programatic`修复的内容（感谢大卫米尔）

```
// This command will take multiple objects and move them to indivdual layers
// and then prompt for a folder location to save the layers as named-layer.png
// files. This is ultra useful if you want to save slices out to individual
// files and wish to have total control over the resulting file names

var curDoc = fw.getDocumentDOM();
// Save the current frame in the document
var curFrameNum = curDoc.currentFrameNum;

// get the total layers minus the web layer
var numLayers = curDoc.layers.length - 1;  // skip the web layer.

var curLayerNum;

// default to d:\ for now
var locFolder = fw.browseForFolderURL("select a folder", "file:///d|/");

// 23/3/2013 add dialog box for file
if (locFolder !== null) {
    // loop through the current number of layers
    for (curLayerNum = numLayers - 1; curLayerNum >= 0; curLayerNum--) {
        // get the current layer
        var curLayer = curDoc.layers[curLayerNum];

        // get the elements on the current layer
        var elements = curLayer.frames[curFrameNum].elements;
        //if layer is locked cannot distribute so continue to next layer.
        if (curLayer.frames[curFrameNum].locked == true)
            continue;
        // get the number of elements
        var numElements = elements.length - 1;
        var i;

        // loop through the number of elements
        for (i = 0; i < numElements; i++) {
            // get the current layer number
            if (i == 0) curDoc.currentLayerNum = curLayerNum;
            // add layers for the number of elements
            curDoc.addNewLayer(null, false);
        }
        // again loop through the number of elements
        for (i = 0; i < numElements; i++) {
            // set the current layer
            curLayer = curDoc.layers[curLayerNum];
            // get the elements on the current layer
            elements = curLayer.frames[curFrameNum].elements;
            // select none
            curDoc.selectNone();
            // create a new array that will hold the selection
            var sel = new Array();
            // populate the array
            sel[0] = elements[elements.length - 2];

            // EDIT - 25/3/2013 rename target layer if element has a name
            curDoc.setLayerName(curLayerNum + i + 1, sel[0].name || "");

            // select all of the elements of the array in Fireworks
            fw.selection = sel;
            // move the selection to its new layer
            curDoc.moveSelectionToLayer(curLayerNum + i + 1, false, "none", -1);
        }
    }

    // EDIT - 25/3/2013 set to png32 export option
    set_export_as_png_32(curDoc);
    fw.exportLayers(curDoc, locFolder);
}

function set_export_as_png_32(targetDoc) {
    targetDoc.setExportOptions(
        {
            animAutoCrop: true,
            animAutoDifference: true,
            applyScale: false,
            colorMode: "32 bit",
            crop: false,
            cropBottom: 0,
            cropLeft: 0,
            cropRight: 0,
            cropTop: 0,
            ditherMode: "none",
            ditherPercent: 100,
            exportFormat: "PNG",
            frameInfo: [],
            interlacedGIF: false,
            jpegQuality: 80,
            jpegSelPreserveButtons: false,
            jpegSelPreserveText: true,
            jpegSelQuality: 90,
            jpegSelQualityEnabled: false,
            jpegSmoothness: 0,
            jpegSubsampling: 0,
            localAdaptive: true,
            lossyGifAmount: 0,
            macCreator: "",
            macFileType: "",
            name: "PNG32",
            numCustomEntries: 0,
            numEntriesRequested: 0,
            numGridEntries: 6,
            optimized: true,
            paletteEntries: null,
            paletteInfo: null,
            paletteMode: "adaptive",
            paletteTransparency: "none",
            percentScale: 100,
            progressiveJPEG: false,
            savedAnimationRepeat: 0,
            sorting: "none",
            useScale: true,
            webSnapAdaptive: false,
            webSnapTolerance: 14,
            xSize: 0,
            ySize: 0
        }
    );
} 
```

# regex - 正则表达式：删除除组之外的所有内容

> ID：15620193
> 
> 赞同：-1
> 
> 时间：2013-03-25T16:41:25.570
> 
> 标签：regex, perl

我需要删除正则表达式中所有匹配的组。一个玩具示例是：

```
echo 'spam 123 ham 345 eggs' | perl -pe 's/( \d+ )/SOMETHING/g'

123 345 
```

什么 perl 正则表达式会删除匹配组以外的所有内容？匹配的组可能比数字更复杂 - 我可以定义要匹配的组，但在组之外我可以包含任何随机字符

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T16:49:23.300

只需加入所有比赛即可。我不知道 Perl，但这样的事情可能会起作用：

```
$result = join('', $subject =~ m/\s*\d+\s*/g); 
```

# c++ - NOT 运算符的意义何在？

> ID：15620196
> 
> 赞同：6
> 
> 时间：2013-03-25T16:41:36.883
> 
> 标签：c++

[目前正在使用本教程](http://www.cprogramming.com/tutorial/lesson2.html)检查 C++ 。它解释了`! NOT`运算符是什么，但我认为我并不完全理解我为什么要使用它。有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-25T16:44:39.280

`!`如果要检查当前是否不满足条件，则该运算符很有用。

想象一个告诉你应用程序的特定子系统是否已初始化的函数以及另一个初始化它的函数：

```
bool subsystem_is_initialized();
void subsystem_initialize(); 
```

您可以检查它是否已初始化，如果它没有使用 not 运算符，则将其初始化。

```
if (!subsystem_is_initialized())
    subsystem_initialize(); 
```

出于所有实际目的，将值与零进行比较是一种更短的方法，并明确建议受影响的值是布尔值。你不是绝对需要它，但话又说回来，你也不需要乘法（你可以循环加法）、加法（你可以用二进制逻辑来做）或大多数二进制逻辑（你几乎可以用NAND，有人告诉我，但我自己没有研究过）。

还要记住，与几乎所有其他 C++ 运算符一样，它可以被类重载。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-25T16:47:52.900

当您需要在条件中翻转真/假时使用它以增加可读性。例如比较

```
// Ensure that the thing is NOT red.
if (thing_is_red() == false)
    ...
if (!thing_is_red())
    ... 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-25T16:46:38.987

一种语言并不总是（实际上和从来没有一样好）被定义为具有最少的功能集，而是一组有用的功能。例如，如果您有以下代码：

```
if (!test_something())
  do_something(); 
```

您也可以将其表示为

```
if (test_something()) {
} else
  do_something(); 
```

但它会不太容易阅读。因此，虽然逻辑否定通常可以用 C++ 语言的其他结构来表达，但它有助于提高可读性，明确表达否定以表明您的意图。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-25T16:47:41.160

`!`或者 NOT 运算符是`NOT`门的逻辑等价物。

因此，`NOT`门真值表表明如果`x`为真，`!x`则为假。反之亦然。

如果你从逻辑上考虑它并不太难。例如男性的NOT是女性，NOT true是false，NOT simple是复杂的..

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-25T16:51:16.420

好的，您想将两个数字的总和除以第三个数字，因此如果第三个数字不为零，您可以这样做。

```
 #include <iostream>
    using namespace std;
    int main()
   {
    int a,b,c,sum;
    cin >> a >> b >> c;
    sum = a+b;
    if (c!=0) //which is equivalent to if(!c)
    cout << sum/c;
   } 
```

为了快速理解，我使用了一个简单的例子。现在一切都好吗？问候并祝你学习顺利。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-25T16:50:06.090

您提到的[教程](http://www.cprogramming.com/tutorial/lesson2.html)：

> NOT：NOT 运算符接受一个输入。如果该输入为 TRUE，则返回 FALSE，如果该输入为 FALSE，则返回 TRUE。

这意味着 NOT 运算符是一元运算符意味着单个操作数（不是二元运算符）

像`&& and`||` 是二元运算符，语法是：

```
 result = operand1  && operand2
  result = operand1  || operand2 
```

一元是：

```
 result = !operand1 
```

并且其结果值是操作数值 id 的还原，`operand1 = True`则结果将为 False，如果`operand1 = False`结果为 True。

那里也写着：

> 例如，NOT (1) 的计算结果为 0，NOT (0) 的计算结果为 1。NOT（除零以外的任何数字）计算结果为 0。在 C 和 C++ 中，NOT 写为 !。NOT 在 AND 和 OR 之前进行评估。

在 c/c++`0`中为 False，Non`0`等价于 True。

也有几个很好的例子！

(1)。

```
!( 1 || 0 ) 
```

我们知道`1 || 0`is`1`表示 true 并且 NOT 运算符的应用使其`0`表示 False：

```
 !( 1 || 0 )  
=>  ! (1)     
=>  0  that is false 
```

你注意到在这个表达式中我们有两个运算符逻辑`||`或和`!`非运算符。

```
 !( 1  || 0 )  
    ^      ^
    NOT   OR 
```

并注意 OR 运算符`||`有一元 NOT 有两个操作数位

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-03-25T16:50:06.617

最常见的情况可能是`std::istream`：

```
int i;
std::cin >> i;
if ( ! std::cin ) {
    //  Something went wrong...
} 
```

除此之外，各种类都有`isValid()`或 `isDone()`功能；使用 GoF 迭代器进行迭代，例如：

```
for ( IteratorType i( init ); ! i.isDone(); i.next() ) {
    //  Do something with i.element()
} 
```

地图类通常有一个`contains`功能，所以你可能会问

```
if ( ! myMap.contains( key ) ) 
```

您还将不时使用布尔变量：对于匹配条件需要一些复杂评估的线性搜索，例如：

```
bool found = false;
int current = 0;
while ( ! found && current != end ) {
    //  maybe set found...
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-03-25T16:45:51.597

`!`运算符用于布尔条件检查中的否定目的。有很多地方可以使用它。简单的例子：

```
 if (!existInArray(A, i)) 
```

检查`i`数组中是否不存在。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-03-25T16:51:32.757

运算符的重点`!`是使表达式`false`成为`true`表达式。它最常用作`== false`or的替代品`== 0`。它通常使表达式更易于阅读：

if (p == NULL || p->next != NULL)

是相同的 ：

如果 (!p || p->next)

[好吧，所以这里的“更容易阅读”显然是相当主观的]。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-03-25T17:48:33.140

！运算符可以与用户定义的数据类型（C++ 中的类和结构）一起使用。像每个运算符（期望 . : 和 ::）一样！运算符可能被重载。请参见以下场景。

```
//A is empty if memeber size is 0, and no further operations are allowed on other members if
// class is empty.
class A{
int size;
int lot;
int price;
public:
   bool operator!()
  {
      if(lot)
       return true; 
      else
      return false;
  }
};

A AObj;

//Aobj has size greater than 0
if(!Aobj)
{
//code to Fill or reuse the object.
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-03-25T17:24:48.380

您有很多解释 NOT 运算符的答案。

`!`我自己不是运营商的忠实粉丝。它几乎没有应有的可见性（因为它颠倒了该子句的含义）。

例如，尽管用 C++ 编程了几年，但我仍然需要几秒钟来解析`if ( ! ptr )`，而不是`if ( ptr == NULL )`立即传达给我它的含义。

是否`if ( ! (i % 2) )`检查偶数或奇数？如果您的眼睛越过'？

回顾帖子，我同意 NOT 运算符在应用于`bool`s 和函数调用时有效使用的一些海报。使用`!`while 处理流被认为是惯用的。

也就是说，几乎我认识的每个程序员都被`strcmp`. 我在一家有几个`#define`s 之类的商店工作`#define STRCMP_EQUAL 0`，并要求将支票写成`if ( STRCMP_EQUAL == strcmp(str1, str2) )`，在我看来，它比`if ( ! strcmp(str1, str2) )`.

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2013-03-25T17:49:22.777

的重点！运算符是将一个错误的表达式变成一个真正的表达式。它最常被用作 == false 或 == 0 的替代品。它通常使表达式更易于阅读：

if (p == NULL || p->next != NULL)

是相同的 ：

如果 (!p || p->next)

[好吧，所以这里的“更容易阅读”显然是相当主观的]。

# matlab - matlab中的线空间函数

> ID：15620197
> 
> 赞同：-1
> 
> 时间：2013-03-25T16:41:39.403
> 
> 标签：matlab

我有与线空间有关的问题，作为 matlab 教程中线空间的定义，它是生成线性间隔点的函数，但是线性间隔点是什么意思？例如下面的代码 linspace(5,10,4) 在之间生成 4 个线性间隔点5和10.so这意味着这些posint之间存在线性关系？like

```
y=a*x+b? 
```

因为如果它是等距的点，那么它将是

```
5   6.25    7.5 8.75 
```

所以我想掌握这个功能并澄清与此功能相关的所有内容，以便下次使用。非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T16:45:22.653

澄清一下 - 该函数被称为`linspace`not `linespace`，你是正确的。根据文档，“`y = linspace(a,b,n)` 生成一个包含和之间线性间隔`y`的点的行向量”，因此这些点确实遵循关系。 是起始值，是结束值， 只是要采样的点数，所以不影响线性关系。`n``a``b``y = mx + c``a``y``b``y``n`

# iphone - 媒体查询设置为 480px 但表现得好像是 320px (iPhone4)

> ID：15620203
> 
> 赞同：0
> 
> 时间：2013-03-25T16:41:59.417
> 
> 标签：iphone, css, responsive-design, media-queries, viewport

我在这里有我的问题设置演示：http: [//chevasdesign.com/storage/index.php](http://chevasdesign.com/storage/index.php)

当前设置的视口没有缩放属性（因为它可以防止页面在横向和纵向之间缩放）

```
<meta name="viewport" content="width=device-width" /> 
```

在我的 CSS 末尾，我的 CSS 中有以下媒体查询：

```
@media only screen and (max-device-width: 480px) {
    #wide { width: 440px; }
} 
```

`#wide`宽度为920px，左右边距为20px，背景为灰色。它恰好是唯一的元素。

当我在 iPhone4（在我的情况下）上以纵向或横向加载页面时，div 水平跨越需要水平滚动的屏幕宽度。参见图片：[http](http://chevasdesign.com/storage/viewport-media-queries-problem.png) ://chevasdesign.com/storage/viewport-media-queries-problem.png ）。

iPhone不应该缩放页面以使小于480px宽的任何东西都适合屏幕吗？

当我设置`#wide`为 280 像素宽时，在媒体查询内部（总共 320 像素的边距），div 适合屏幕，即使媒体查询将设备宽度设置为 480 像素。我错过了什么？

对我来说奇怪的是，我在 WordPress 的一个完整网站上拥有确切的视口设置和媒体查询设置，并且所有媒体查询都按预期工作。

# php - 将数字 ID 类型转换为整数以防止 SQL 注入

> ID：15620207
> 
> 赞同：3
> 
> 时间：2013-03-25T16:42:12.817
> 
> 标签：php, mysql, pdo, sql-injection

我正在实施批量删除功能。该应用程序使用 PDO，但我还没有找到一种为此使用准备好的语句的好方法。

我有一个要删除的行 ID 数组，长度不限：

```
array(3, 5, 8, [...]) 
```

使用准备好的语句，我必须创建一串问号以用作占位符，然后绑定值，如下所示：

```
$question_marks = array();
foreach($ids) $question_marks[] = '?';
$question_marks = join(', ', $question_marks);

$statement = $pdo->prepare('DELETE FROM `table` WHERE `id` IN ('.$question_marks.')');

for($i = 0; $i < count($ids); $i++) {
    $statement->bindValue($i + 1, $ids[$i]);
}

$statement->execute(); 
```

我的想法是将 ID 类型转换为整数，以便删除任何 SQL 注入，这是我的问题：会吗？

```
$id_string = array();
foreach($ids as $id) $id_string[] = (int) $id;
$id_string = join(', ', $id_string);

$statement = $pdo->prepare('DELETE FROM `table` WHERE `id` IN ('.$id_string.')');

$statement->execute(); 
```

它仍然有点hacky，但在我看来比以前的解决方案要好得多。

这安全吗？有没有替代解决方案？

# c# - 当用户在 10 秒内重新启动关闭的 Windows 商店应用程序时如何恢复数据

> ID：15620212
> 
> 赞同：1
> 
> 时间：2013-03-25T16:42:44.350
> 
> 标签：c#, windows-store-apps, application-lifecycle

我有一个需要将数据保存在`Suspending`. 一切正常，除非

1.  用户关闭应用程序（使用例如 alt+f4 或关闭手势）...
2.  ...然后在 10 秒内重新启动应用程序。

在这种情况下，`Suspending`-event 不会被触发（因此没有数据被保存），同时应用程序在没有任何先前状态的情况下重新启动（之前的状态`OnLaunched`是 is `NotRunning`），因此应用程序必须重新初始化所有内容。

如何在这些“用户会话”之间保留状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:52:44.003

您无法检测到您的应用程序何时关闭。只有 OnLuanched、OnSuspending 和 OnResumed 事件。当他们关闭应用程序时，意图是用户希望应用程序在下次启动时重新启动。

您可以开始将所有数据更改序列化到文件中，但这太过分了。用户关闭应用程序，正常初始化。

# python - 在 python 的 anagram finder 中使用元组作为字典键

> ID：15620216
> 
> 赞同：0
> 
> 时间：2013-03-25T16:42:48.843
> 
> 标签：python, dictionary, tuples

所以我正在编写一个程序，它从一个 word 文件中读取并打印出一组字词。

目前，我有一个函数，它接受一个字符串，并返回一个包含所有字母的元组。

```
def getLetters(string):
    """Purpose, to nab letters from a string and to put them in a tuple in
    sorted order."""
    tuple_o_letters = sorted(tuple(string))
    if _DEBUG:
        print tuple_o_letters

    return tuple_o_letters 
```

发送到这个函数的是这段代码

```
try:
    fin = open("words.txt")
except:
    print("no, no, file no here.")
    sys.exit(0)

wordList = []
for eachline in fin:
   wordList.append(eachline.strip())
for eachWord in wordList:
   getLetters(eachWord) 
```

现在，虽然我可以轻松地制作元组，但我卡住的地方是我试图将它们存储为字典键，这将是最佳的，因为元组和键是不可变的，但我对这样做的方法感到困惑。此外，这些值将是具有这些键的单词列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T16:45:22.583

`sorted()`返回一个列表，你想换行：

```
tuple_o_letters = tuple(sorted(string)) 
```

它对 中的字母进行`string`排序，然后将生成的排序列表转换为元组。

# jquery - JQuery - 使用“属性开始于”选择器时删除选定的类？

> ID：15620218
> 
> 赞同：0
> 
> 时间：2013-03-25T16:42:50.817
> 
> 标签：jquery, regex, jquery-selectors

使用自动生成的 html 代码，使用变量类名：`table-col-44, table-col-19, table-col-121`等。

我有一个循环，正在使用[这个 jQuery 选择器功能](http://api.jquery.com/attribute-starts-with-selector/)来选择这些变量类：

```
for(r in replace){
    var targ = replace[r];
    $("[class^='"+targ+"']").each(function(){
        ...
    })
} 
```

问题是，一旦我选择了我想要清理的类，我就找不到一种方法来定位它们以删除它们。通常这些是需要保留其他类的标签，所以我不能完全擦除类属性`<p>`。`<td>`有没有办法将匹配的类作为参数传递给 each() 函数？或者`$(this).removeClass([selected])`，jQuery 附带了某种关键字？完全被这里难住了。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T17:10:12.810

不确定是否有更多的 jQuery 方式来执行此操作，但您可以在 each 中尝试：

```
var newClassName = $(this).attr('class').split(' ').slice(1).join(' ')
$(this).attr('class', newClassName) 
```

这将删除第一个类名，因为您已匹配`^=`.

更新：

有关通过将函数传递给 removeClass 来删除类的示例，请参见此处：http: [//jsfiddle.net/DHxNG/1/](http://jsfiddle.net/DHxNG/1/)。JS是：

```
targ = 'table-col';
$('[class*="'+targ+'"]').removeClass(function(index, css) {
    var re = new RegExp(targ+"-\\d+");
    return (css.match(re) || []).join(' ');
}); 
```

这基于此处的代码：[JQuery removeClass wildcard](https://stackoverflow.com/questions/2644299/jquery-removeclass-wildcard)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T17:09:24.310

您可以`startsWith`向对象的原型添加一个函数`string`，执行如下操作：

```
if (typeof String.prototype.startsWith != 'function') {
    String.prototype.startsWith = function (str){
        return this.indexOf(str) == 0;
    };
} 
```

然后，删除以匹配项开头的类的循环如下所示：

```
for(r in replace) {
    var targ = replace[r];
    $("[class^='"+targ+"']").each(function() {
        var $element = $(this);
        var classes = $(this).attr('class').split(' ');
        for(var i = 0; i < classes.length; i++) {
            var cssClass = classes[i];
            if(cssClass.startsWith(targ)) {
                $element.removeClass(cssClass);
            }
        }
    });
} 
```

# c# - Windows CE 控件是否在没有自动化支持的情况下设计？

> ID：15620219
> 
> 赞同：3
> 
> 时间：2013-03-25T16:42:51.003
> 
> 标签：c#, windows-ce, ui-automation

我正在研究 WinCE 应用程序的自动化，到目前为止发现了以下详细信息。

*   WPF 控件通过 AutomationPeer 类支持 UI 自动化。
*   WinForm 控件通过 ControlAccessibleObject 类支持 UI 自动化

但是 WinCE 控件没有实现/继承任何我们可以通过这些类获得 UI 自动化控件。

Q. 1 - 这是否意味着 WinCE 控件不是为 UI 自动化而设计的？

Q.2 - 自动化 winCE 应用程序的方法有哪些？

Q.3 - 是否有任何 Microsoft 最佳实践可在 WinCE 控件上实施以使其自动化？

请指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T11:28:04.063

WinCE 控件大多是相应 Windows API 控件的包装器，这意味着您可以“老式”自动化它们，即通过向它们发送/发布 Windows 消息。

# json - POST JSON 数据 Titanium 的问题

> ID：15620221
> 
> 赞同：6
> 
> 时间：2013-03-25T16:42:56.833
> 
> 标签：json, post, titanium-mobile

我想使用 HTTP 请求发布 JSON 数据。我已经阅读了官方[文档](http://docs.appcelerator.com/titanium/latest/#!/guide/Handling_Remote_Data_with_HTTPClient_and_JSON)，并且我正在按照它们工作。我正在使用以下代码：

```
var xhrpost = Ti.Network.createHTTPClient();

    xhrpost.onload = function(){
        activityIndicator.hide();
        alert('Posted successfully');
        alert(JSON.stringify(this.responseText));
    }

    var posturl = 'http://qudova.com/api.php';

    xhrpost.open('POST', posturl);
    xhrpost.setRequestHeader("Content-Type", "application/json");
    xhrpost.setRequestHeader('charset','utf-8');
        var params = {
        ProjectID : picked_prj, 
        RoleID : picked_rol,
        FirstName: first.value,
        LastName: last.value,  
        Phone: phone.value,
        Email: email.value,
        City: city.value,
        State: stat_drp.getSelectedRow(0).title,
        Zip: zip.value,
        Notes: notes.value,
    };
    xhrpost.send(params); 
```

如果这是发布 JSON 数据的正确方法。我将如何检查数据是否已发布？网址是否包含发布的数据？

我在 onload 事件中添加的以下警报中为空。

```
alert(JSON.stringify(this.responseText)); 
```

我在 Windows 7 上工作，在 Android 4.2.2 上进行测试 .... 提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-06-09T23:02:37.843

当您将 Content-Type 设置为 json 时，您需要对输入进行字符串化。

```
var xhr = Ti.Network.createHTTPClient();

xhr.open('POST', url);
xhr.setRequestHeader("Content-Type", "application/json");
xhr.setRequestHeader('charset','utf-8');
xhr.send(JSON.stringify({
    prop: 'string',
    data: {
        embeddedProp: 1234
    }
})); 
```

试过了，它工作，无法在文档中找到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-18T13:10:50.353

只需使用 JSON.stringify()

`JSON.stringify({ ProjectID : picked_prj, RoleID : picked_rol, FirstName: first.value, LastName: last.value,
Phone: phone.value, Email: email.value, City: city.value, State: stat_drp.getSelectedRow(0).title, Zip: zip.value, Notes: notes.value, })`

请参阅更新的[文档](http://docs.appcelerator.com/titanium/3.0/#!/guide/Working_with_JSON_Data)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T10:25:43.613

使用 JSON.parse

```
var params =JSON.parse({
        ProjectID : picked_prj, 
        RoleID : picked_rol,
        FirstName: first.value,
        LastName: last.value,  
        Phone: phone.value,
        Email: email.value,
        City: city.value,
        State: stat_drp.getSelectedRow(0).title,
        Zip: zip.value,
        Notes: notes.value,
    }) 
```

并发送它。它可能工作...

# c# - 在 Visual Studio 2012 中移动 obj 文件夹

> ID：15620224
> 
> 赞同：22
> 
> 时间：2013-03-25T16:42:59.913
> 
> 标签：c#, visual-studio, visual-studio-2012

因为路径变得太长（超过 260 个字符），我需要在`obj`其他地方创建文件夹。

如何告诉 Visual Studio 2012 在指定路径中创建此文件夹？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-03-25T16:49:04.190

您需要编辑项目文件 (XML) 以指定`<BaseIntermediateOutputPath>`. 此值默认为`obj\`。

```
<PropertyGroup>
  <Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
  <Platform Condition=" '$(Platform)' == '' ">AnyCPU</Platform>
  ...
  <BaseIntermediateOutputPath>some\path\</BaseIntermediateOutputPath>
</PropertyGroup> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-06-17T17:44:46.107

...而且（除了***Sam Harwell***）您可以使用常量并可以通过`<PropertyGroup/>`这种方式更改任何特定的（例如仅“释放”）：

```
<PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|AnyCPU' ">
  <Optimize>true</Optimize>
  .....
  <OutputPath>\your_projects\bin\$(SolutionName)\$(MSBuildProjectName)\$(Configuration)\</OutputPath>
  <IntermediateOutputPath>\your_projects\obj\$(SolutionName)\$(MSBuildProjectName)\$(Configuration)\</IntermediateOutputPath>
  <DefineConstants>TRACE</DefineConstants>
</PropertyGroup> 
```

# pdf - RDLC 报告表上的分页符

> ID：15620231
> 
> 赞同：1
> 
> 时间：2013-03-25T16:43:16.787
> 
> 标签：pdf, report, rdlc

我有一张关于 RDLC 报告的表格。根据我的数据集，表的行数会急剧增加。当我将报告打印到 PDF 文档时，如果单元格的文本太大，它会打印文档下一页上的每个表格。我所需要的只是在必要时打破桌子。我怎样才能做到这一点？有任何想法吗 ？我试图将表格和文本框的 Keep Together 属性都设置为 False 并且它已经解决了......

* * *

解决方案：

在报表设计器的底部有一个行组和列组区域。我将其设置为高级模式。然后，我将每个组的 KeepTogether 属性更改为 False。之后，我将每个静态 KeepTogether 属性更改为 False，将 KeepInGroup 更改为 None。

* * *

先感谢您。

最好的问候，玛丽亚

# c# - 恢复持久化的工作流 (WorkFlow Foundation 4.5)

> ID：15620233
> 
> 赞同：1
> 
> 时间：2013-03-25T16:43:24.257
> 
> 标签：c#, workflow-foundation, workflow-activity

我试图恢复持续的工作流程。工作流在客户端机器上本地运行并附加到 WindowsForms 应用程序

书签是在扩展活动中创建的，如下所示：

```
 /// <summary>
    /// Will be executed if the bookmark gets executed.
    /// </summary>
    protected override void Execute(NativeActivityContext context)
    {
        ScanBarcodeExtension requestToScanBarcode = context.GetExtension<ScanBarcodeExtension>();
        requestToScanBarcode.GetScanResult(UserMessage.Get(context), BookmarkName.Get(context), ExpectedScanActivity.Get(context));
        context.CreateBookmark(BookmarkName.Get(context),  new BookmarkCallback(scanBarcodeCallback));
    }

    /// <summary>
    /// Scans the magazine barcode callback.
    /// </summary>
    /// <param name="context">The context.</param>
    /// <param name="bookmark">The bookmark.</param>
    /// <param name="value">The value.</param>
    private void scanBarcodeCallback(NativeActivityContext context, Bookmark bookmark, object value)
    {
        WorkflowArgumentContainer container = context.GetValue(this.ArgumentContainer);
        switch ((ScanActivity)ExpectedScanActivity.Get(context))
        {
            case ScanActivity.FAUF:
                container.FaufId = (value as string);
                break;
            case ScanActivity.Magazine:
                container.CurrentMagazine.ID = (value as string);
                break;
            case ScanActivity.AluPack:
                container.PrintAluPackLabelProcessResult.ScannedLabelContent = (value as string);
                break;
            case ScanActivity.Box:
                container.PrintBoxLabelProcessResult.ScannedLabelContent = (value as string);
                break;
            default:
                break;
        }

        Result.Set(context, container);
    } 
```

当我打电话时

```
wfApp.ResumeBookmark(bookmarkName, value); 
```

从正在运行的应用程序，一切正常。

现在我关闭应用程序并执行以下操作：

*   在 sql 表中检查现有的 id
*   获取身份证
*   配置工作流程
*   试图恢复书签

这看起来像这样：

```
 logger.Info("Persisted workflow found. Loading workflow states...");
        WorkflowApplicationInstance instance = WorkflowApplication.GetInstance(this.workflowInstanceId, sqlStore);
        WorkflowApplication wfApp = new WorkflowApplication(new ConditioningWF(), instance.DefinitionIdentity);

        logger.Info("Configuring persisted workflow...");
        this.configureWorkflowApplication(wfApp);

        wfApp.Load(instance);
        logger.Info("Getting blocking bookmarks from persisted workflow...");
        string bookmark = this.getBlockingBookmarksFromPersistedWorkFlow(wfApp.Id);
        if (string.IsNullOrEmpty(bookmark))
            throw new MissingArgumentExceptions(string.Format("Kein Bookmark für den persistierten WorkFlow mit der ID '{0}' gefunden!", wfApp.Id));

        logger.Info("Running persisted workflow...");
        wfApp.Run();

        logger.InfoFormat("Resuming bookmark '{0}'...", bookmark);
        wfApp.ResumeBookmark("ScanMagazine", string.Empty); 
```

configureWorkFlowApplication 的实现如下所示：

```
 private void configureWorkflowApplication(WorkflowApplication wfApp)
    {
        // Configure the persistence store.
        wfApp.InstanceStore = sqlStore;

        // Instance the extensions...
        MESWebserviceExtension mesDataAccessExtension = new MESWebserviceExtension();
        ExceptionNotificationExtension exceptionNotifiyExtension = new ExceptionNotificationExtension();
        ScanBarcodeExtension scanBarcodeExtension = new ScanBarcodeExtension();
        NotifyFaufRegisteredExtension notifyFaufRegisteredExtension = new NotifyFaufRegisteredExtension();
        FuseAluPackExtension fuseAluPackExtension = new FuseAluPackExtension();

        exceptionNotifiyExtension.OnNotifiyException += exceptionNotifiyExtension_OnNotifiyException;
        scanBarcodeExtension.OnGetFaufScan += scanBarcodeExtension_OnGetFaufScan;
        notifyFaufRegisteredExtension.OnFaufRegistered += notifyFaufRegisteredExtension_OnFaufRegistered;
        scanBarcodeExtension.OnGetMagazinScan += scanBarcodeExtension_OnGetMagazinScan;
        fuseAluPackExtension.OnGetFuseResult += fuseAluPackExtension_OnGetFuseResult;

        //...add extensions
        wfApp.Extensions.Add(exceptionNotifiyExtension);
        wfApp.Extensions.Add(mesDataAccessExtension);

        wfApp.Extensions.Add(notifyFaufRegisteredExtension);
        wfApp.Extensions.Add(scanBarcodeExtension);
        wfApp.Extensions.Add(fuseAluPackExtension);

        #region WF States changed
        wfApp.Completed = delegate(WorkflowApplicationCompletedEventArgs e)
        {
            if (e.CompletionState == ActivityInstanceState.Faulted)
            {
                logger.Error(String.Format("...Workflow '{0}' terminated: {1}", e.InstanceId, e.TerminationException.Message), e.TerminationException);

                if (System.Diagnostics.Debugger.IsAttached)
                {
                    MboxStatus(string.Format("Workflow Terminated. Exception: {0}\r\n{1}",
                        e.TerminationException.GetType().FullName,
                        e.TerminationException.Message));
                }
            }
            else if (e.CompletionState == ActivityInstanceState.Canceled)
            {

                logger.WarnFormat("...Workflow '{0}' canceled...", e.InstanceId);

                if (System.Diagnostics.Debugger.IsAttached)
                {
                    MboxStatus("Workflow Canceled.");
                }
            }
            else
            {
                logger.WarnFormat("...Workflow '{0}' completed...", e.InstanceId);

                if (System.Diagnostics.Debugger.IsAttached)
                {
                    MboxStatus("Fertig");
                }
            }
        };

        wfApp.Aborted = delegate(WorkflowApplicationAbortedEventArgs e)
        {
            logger.Error(String.Format("...Workflow '{0}' aborted  '{0}' : {1}",
                    e.InstanceId, e.Reason.Message), e.Reason);

            if (System.Diagnostics.Debugger.IsAttached)
            {
                MboxStatus(string.Format("Workflow Aborted. Exception: {0}\r\n{1}",
                        e.Reason.GetType().FullName,
                        e.Reason.Message));
            }
        };

        wfApp.OnUnhandledException = delegate(WorkflowApplicationUnhandledExceptionEventArgs e)
        {
            logger.Error(String.Format("...UnhandledException occured in Workflow '{0}' : {1}",
                                    e.InstanceId, e.UnhandledException.Message), e.UnhandledException);

            if (System.Diagnostics.Debugger.IsAttached)
            {
                MboxStatus(string.Format("Unhandled Exception: {0}\r\n{1}",
                        e.UnhandledException.GetType().FullName,
                        e.UnhandledException.Message));
            }
            return UnhandledExceptionAction.Terminate;
        };

        wfApp.PersistableIdle = delegate(WorkflowApplicationIdleEventArgs e)
        {
            logger.InfoFormat("...Workflow '{0}' unloaded...", e.InstanceId);

            return PersistableIdleAction.Unload;
        };

        // Workflow lifecycle events omitted except idle.
        AutoResetEvent idleEvent = new AutoResetEvent(false);
        wfApp.Idle = delegate(WorkflowApplicationIdleEventArgs e)
        {
            idleEvent.Set();
        };
        #endregion

        logger.Info("...configuring WorkflowApplication finished...");
    } 
```

**调用后**的问题****

 **```
 wfApp.ResumeBookmark("ScanMagazine", string.Empty); 
```

什么都没有发生……真的什么都没有。我认为程序应该跳转到 scanBarcodeCallback 还是我做错了什么？目前这真的很令人沮丧，因为我无法处理这个。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T23:28:02.453

问题是你先运行然后恢复：

`wfApp.Run();`

`wfApp.ResumeBookmark("ScanMagazine", string.Empty);`

对于恢复书签，只需要 ResumeBookmark。只需删除`wfApp.Run();`它应该可以工作。**

# urlhelper - UrlHelper.Action 返回空字符串

> ID：15620236
> 
> 赞同：5
> 
> 时间：2013-03-25T16:43:37.477
> 
> 标签：urlhelper

非常奇怪的问题，我花了几个小时但无法找到究竟是什么问题。我有一些代码如下：

```
 public static string AbsoluteAction(this UrlHelper urlHelper, string actionName, string controllerName, object routeValues)
    {
        return ResolveUrl(urlHelper, urlHelper.Action(actionName, controllerName, routeValues));
    }

    private static string ResolveUrl(UrlHelper urlHelper, string relativeUrl)
    {
        return new Uri(GetRequestUri(urlHelper), relativeUrl).AbsoluteUri;
    }

    private static Uri GetRequestUri(UrlHelper urlHelper)
    {
        return urlHelper.RequestContext.HttpContext.Request.Url;
    } 
```

当使用 string.Empty 作为 routeValues 时，“urlHelper.Action(actionName, controllerName, routeValues)”在我的本地开发机器上运行良好。（Windows 7、IIS 7.5、.Net 4.0、MVC3）它返回正确的 url。

但它在我们的持续集成服务器上返回空字符串。（Windows 服务器 2008、IIS 7.0、.Net 4.0、MVC3）

这是路由配置：
routes.MapRoute(
"MyRouteName",
"getaddresses/{postcode}/",
new { controller = "Address", action = "GetAddresses", postcode = string.Empty },
new { httpMethod = new HttpMethodConstraint ("GET") }, new[] { "My.Package.Controllers" });

如果我使用一些字符串而不是 string.Empty 作为 RouteValues，它在两台机器上都运行良好。

似乎该问题是由开发机器和 CI 机器上的不同配置或不同版本的工具或框架引起的。有人可以帮忙吗？

为了让您更好地理解这个问题，以下是上下文：团队正在使用 .Net 3.5、Visual Studio 2010、MVC2。我将它们升级到 .Net 4.0、Visual Studio 2012、MVC3。在我的本地开发机器上一切都很好。我在 CI 服务器上安装了 .Net 4.0 和 MVC3（与开发机器的安装文件不同，因为它们与 Visual Studio 一起安装）。该网站在 CI 服务器上运行良好。唯一的问题是一次冒烟测试失败，它期望调用AbsoluteAction("action name", "controller name", new {postcode=string.Empty})时返回"localhost/getaddresses"，但实际上是"localhost "

希望我已经很好地描述了这个问题。:)

非常感谢！

# jquery - 通过隐藏提交提交表单

> ID：15620239
> 
> 赞同：0
> 
> 时间：2013-03-25T16:43:47.567
> 
> 标签：jquery, html, event-handling, jquery-ui-dialog

这是我的问题。

我有一个项目，如果用户单击输入按钮，我会使用 jQuery UI 对话框向用户显示消息。如果此人按下“确定”按钮，我想触发页面上的“隐藏”输入提交按钮（第 15/16 行）。[我已经包含了一个 jsfiddle 示例。]

```
<input type="submit" id="ui-lock-btn-hdn" name="lock" value="locked" class="ui-helper-hidden"/>
... {
   $('#ui-lock-btn-hdn').trigger('click');
} 
```

jQuery 版本 1.6.4 jQuery UI 版本 1.8.11 [http://jsfiddle.net/jtoepfer/Xve8z/](http://jsfiddle.net/jtoepfer/Xve8z/)

我不想只通过 $('form')[0].submit() 提交表单。我真的很想知道a）为什么我不能通过触发隐藏提交的点击来提交表单以及b）为什么这不起作用。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T16:47:38.373

这样做而不是触发您的按钮单击。

```
$('#testForm').submit(); 
```

更新小提琴：http: [//jsfiddle.net/Xve8z/23/](http://jsfiddle.net/Xve8z/23/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T19:21:49.033

我不确定你为什么不想直接提交表单，但看起来你想要的行为应该适用于较新版本的 jQuery，但不是你的 jsfiddle 设置的那个。将其更改为 2.x 似乎对我来说很好。

> 看起来在 1.4.4 和 1.7 之间，他们解决了这个问题

来自[http://forum.jquery.com/topic/click-on-submit-button-doesn-t-trigger-form-s-jquery-submit-handler](http://forum.jquery.com/topic/click-on-submit-button-doesn-t-trigger-form-s-jquery-submit-handler)

# javascript - 如何创建具有负值的柱形图？

> ID：15620242
> 
> 赞同：-2
> 
> 时间：2013-03-25T16:44:00.207
> 
> 标签：javascript, d3.js

我试图从本质上[将此](http://bl.ocks.org/mbostock/2368837)水平条形图旋转为垂直条形图，但无法弄清楚如何做到这一点。我可以创建一个普通的柱形图，但是一旦我尝试输入负值并计算 y 和高度，所有的地狱都会崩溃。这是[我的小提琴](http://jsfiddle.net/pYZn8/3/)。（至少我能够创建 y 轴（我认为）。）

我在这里做错了什么？

```
var data = [{"letter":"A",'frequency':10},{"letter":"B","frequency":-5},{"letter":"C","frequency":7}];

var margin = {top: 20, right: 20, bottom: 30, left: 40}, width = 750 - margin.left - margin.right, height = 500 - margin.top - margin.bottom;
var x = d3.scale.ordinal().rangeRoundBands([0, width], .1);
var y = d3.scale.linear().range([height, 0]);
var xAxis = d3.svg.axis()
            .scale(x)
            .orient("bottom");
var yAxis = d3.svg.axis()
            .scale(y)
            .orient("left");

var svg = d3.select("body").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
   .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
var x0 = Math.max(-d3.min(data), d3.max(data));
     x.domain(data.map(function(d) { return d.letter; }));
     y.domain([d3.min(data, function(d) { return d.frequency; }), d3.max(data, function(d) { return d.frequency; })]);

  svg.append("g")
     .attr("class", "x axis")
     .attr("transform", "translate(0," + height + ")")
     .call(xAxis);
  svg.append("g")
     .attr("class", "y axis")
     .call(yAxis);

  svg.selectAll(".bar")
      .data(data).enter().append("rect")
      .attr("class", "bar")
      .attr("x", function(d, i) { return x(d.letter); })
      .attr("y", function(d, i) { return x(Math.min(0, d.frequency));})
      .attr("width", x.rangeBand())
      .attr("height", function(d) { return Math.abs(x(d.frequency) - x(0)); }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T17:34:23.243

看起来这里有两个问题：

1.  错别字：`.attr("y", function(d, i) { return x(...);})`现在应该是`.attr("y", function(d, i) { return y(...);})`. `height`属性中的比例也是如此。

2.  从 X 轴上的 0 基变为 Y 轴上的 0 基。X 轴上有一个从零开始的条形，条形的`x`属性是`x(0)`。在 Y 轴上有一个基于 0 的条形时，`y`条形的属性*不是* `y(0)`, 但是`y(value)`（因为条形的“底”不再是矩形的前缘） - 所以在这段代码中你需要使用`Math.max(0, value)`（这将给出`y(value)`正值）而不是`Math.min(0, value)`：

    ```
    svg.selectAll(".bar")
      // ...snip...
      .attr("y", function(d, i) { return y(Math.max(0, d.frequency));})
      .attr("height", function(d) { return Math.abs(y(d.frequency) - y(0)); }); 
    ```

请参阅更新的小提琴：http: [//jsfiddle.net/pYZn8/5/](http://jsfiddle.net/pYZn8/5/)

# prolog - 密码的执行时间

> ID：15620246
> 
> 赞同：2
> 
> 时间：2013-03-25T16:44:09.657
> 
> 标签：prolog, cryptarithmetic-puzzle

在初学者课程中，我们被要求在 Prolog 中做一些经典的密码。它们都可以工作，除了这个，它只是继续下去，没有找到任何解决方案，除了试图让我的电脑因过热而炸毁：

四十 + 十 + 十 = 六十

```
crypto2(F,O,R,T,Y,E,N,S,I,X) :-
  digit(F), digit(O), digit(R), digit(T), digit(Y), digit(E), digit(N), digit(S), digit(I), digit(X),
  F =\= O, F =\= R, F =\= T, F =\= Y, F =\= E, F =\= N, F =\= S, F =\= I, F =\= X,
  O =\= R, O =\= T, O =\= Y, O =\= E, O =\= N, O =\= S, O =\= I, O =\= X,
  R =\= T, R =\= Y, R =\= E, R =\= N, R =\= S, R =\= I, R =\= X,
  T =\= Y, T =\= E, T =\= N, T =\= S, T =\= I, T =\= X,
  Y =\= E, Y =\= N, Y =\= S, Y =\= I, Y =\= X,
  E =\= N, E =\= S, E =\= I, E =\= X,
  N =\= S, N =\= I, N =\= X,
  S =\= I, S =\= X,
  I =\= X,
  10000 * F + 1000 * O + 100 * R + 210 * T + Y + 20 * E + 2 * N =:= 10000 * S + 1000 * I + 100 * X + 10 * T + Y. 
```

所有数字到数字的不等式都是用这个 python 编写的，以防止人为错误：

```
nbs = ["F", "O", "R", "T", "Y", "E", "N", "S", "I", "X"]
for i in range(len(nbs)):
  s= ""
  for j in range(i + 1, len(nbs)):
    s += nbs[i] + " =\= " + nbs[j] + ", "
  print s 
```

这里没有写的是一系列十个简单的事实（数字（0）。到数字（9）。）断言0-9是数字。

有人能发现一个明显的错误吗，或者真的需要十多分钟，而更简单的六位数密码可以立即解决？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T16:48:10.480

您可以“首先可能”将一些移动约束固定起来：

```
crypto2(F,O,R,T,Y,E,N,S,I,X) :-
  digit(F),
  digit(O), F =\= O,
  digit(R), F =\= R, O =\= R,
  digit(T), F =\= T, ... 
```

# ruby-on-rails - 无法显示嵌套表单

> ID：15620248
> 
> 赞同：0
> 
> 时间：2013-03-25T16:44:12.017
> 
> 标签：ruby-on-rails, nested

以下是我的模型：

```
class Ticket < ActiveRecord::Base
  attr_accessible :issue, :logs_attributes
  has_many :logs
  accepts_nested_attributes_for :logs
end
class Log < ActiveRecord::Base
  attr_accessible :detail, :ticket_id
  belongs_to :ticket
end 
```

我试图弄清楚如何通过工单视图创建新日志，但我无法显示日志模型中的详细信息字段。我对观点的尝试：

**门票表格**

```
<%= form_for(@ticket) do |f| %>
  <% if ... end %>

  <div class="field">
    <%= f.label :issue %><br />
    <%= f.text_area :issue %>
  </div>
    <% f.fields_for :logs do |builder| %>
        <p>
          <%= builder.label :detail %><br />
          <%= builder.text_area :detail %>
        </p>
    <% end %>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

**门票\表演**

```
<p id="notice"><%= notice %></p>

<p>
  <b>Issue:</b>
  <%= @ticket.issue %>
</p>
<ol>
<% for log in @ticket.logs %>  
    <p> 
      <%=log.detail %> *Note:squiggly line under detail said "Cannot find 'detail'"*
    </p>
<% end %>
</ol>
<%= link_to 'Edit', edit_ticket_path(@ticket) %> |
<%= link_to 'Back', tickets_path %> 
```

**我的控制器：**

```
def new
    @ticket = Ticket.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @ticket }
    end
  end

  def create
    @ticket = Ticket.new(params[:ticket])

    respond_to do |format|
      if @ticket.save
        format.html { redirect_to @ticket, notice: 'Ticket was successfully created.' }
        format.json { render json: @ticket, status: :created, location: @ticket }
      else
        format.html { render action: "new" }
        format.json { render json: @ticket.errors, status: :unprocessable_entity }
      end
    end
  end 
```

**门票\演出**

```
<h1>New ticket</h1>

<%= render 'form' %>

<%= link_to 'Back', tickets_path %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:58:19.817

您在**Ticket**类中的 attr_accessible 行应该是**attr_accessible :issue, :logs_attributes**。

否则你应该得到（如果你使用的是 < 4 的 rails 版本）：

```
Can't mass-assign protected attributes: logs_attributes 
```

如果你不明白，你的控制器创建操作一定有问题（你能用控制器代码更新你的问题吗？）

它应该看起来像这样：

```
def new
  @ticket = Ticket.new

  respond_to do |format|
    format.html # new.html.erb
    format.json { render json: @ticket }
  end
end

def create
  @ticket = Ticket.new(params[:ticket])

  respond_to do |format|
    if @ticket.save
      format.html { redirect_to @ticket, notice: 'Ticket was successfully created.' }
      format.json { render json: @ticket, status: :created, location: @ticket }
    else
      format.html { render action: "new" }
      format.json { render json: @ticket.errors, status: :unprocessable_entity }
    end
  end
end 
```

这个简单的创建操作与您的 ticket_form 和 accept_nested_attributes_for 中的**fields_for**调用一起**：Ticket 类中的日志**将一次性创建父对象和关联对象。

**ticket/new.html.erb**应该是这样的：

```
<h1>New ticket</h1>

<%= render 'form' %>

<%= link_to 'Back', tickets_path %> 
```

部分**票据/_form.html.erb**的形式应该是：

```
<%= form_for(@ticket) do |f| %>
  <% if ... end %>

  <div class="field">
    <%= f.label :issue %><br />
    <%= f.text_area :issue %>
  </div>
  <% f.fields_for :logs do |builder| %>
    <p>
      <%= builder.label :detail %><br />
      <%= builder.text_area :detail %>
    </p>
  <% end %>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

**无关：**

更多的 Rails 方法来做到这一点（只是一个建议）：

```
<% for log in @ticket.logs %>  
  <p> 
    <%=log.detail %> 
  </p>
<% end %> 
```

将会：

```
<% @ticket.logs.each |log| %>  
  <%= content_tag(:p, log.detail) %>
<% end %> 
```

# ef-code-first - 如何通过用户定义的代码为实体框架使用迁移命令

> ID：15620251
> 
> 赞同：2
> 
> 时间：2013-03-25T16:44:27.997
> 
> 标签：ef-code-first, entity-framework-5, code-first

我需要能够执行包管理器控制台为代码优先数据库迁移执行的所有可用功能。有谁知道我如何严格通过用户定义的代码来完成这些命令？我正在尝试自动化整个迁移过程，我的团队遇到了由于该项目的开发人员数量众多而导致迁移不同步的可怕问题。我想编写一个开发人员可以与之交互的项目，该项目将创建并在需要时自动为他们重新构建迁移。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T18:08:01.493

PM 正在通过 PowerShell 和 PS cmdlet 调用（例如用于活动目录等）
[http://docs.nuget.org/docs/reference/package-manager-console-powershell-reference](http://docs.nuget.org/docs/reference/package-manager-console-powershell-reference)

> 包管理器控制台是 Visual Studio 中的 PowerShell 控制台

......*关于这个的信息基本上很少*- 我之前已经尝试过几次，如果你真的需要它，它会开始做一些“肮脏的工作”（不太确定，它可能不是那么困难 - 提供你有一些PS经验）

**以下是类似的问题/答案**- 制定 PS comdlet 非常复杂 - 在这种情况下，它涉及一些额外的步骤。而且 PS 往往非常依赖于版本 - 所以你需要检查你正在使用的特定 EF/CF。

[从我的代码运行 entityframework cmdlet](https://stackoverflow.com/questions/11391143/run-entityframework-cmdlets-from-my-code/11391669#11391669)

[可以使用 EF DbMigrator 添加迁移](https://stackoverflow.com/questions/12353840/possible-to-add-migration-using-ef-dbmigrator)

**您可能想查看**EF的源代码`Add-Migration`
（**更正**：这是官方存储库的链接 - 感谢@Brice）  

[http://entityframework.codeplex.com/SourceControl/changeset/view/f986cb32d0a3#src/EntityFramework.PowerShell/Migrations/AddMigrationCommand.cs](http://entityframework.codeplex.com/SourceControl/changeset/view/f986cb32d0a3#src/EntityFramework.PowerShell/Migrations/AddMigrationCommand.cs)

[http://entityframework.codeplex.com/SourceControl/BrowseLatest](http://entityframework.codeplex.com/SourceControl/BrowseLatest)

（PM 错误还表明执行 Add-Migrations 的代码的起源是“System.Data.Entity.Migrations.Design.ToolingFacade”）

**如果你需要“只是”一个`Update`**- 你可以尝试使用`DbMigrator.Update`（这个人试了一下[http://joshmouch.wordpress.com/2012/04/22/entity-framework-code-first-migrations-executing-migrations- using-code-not-powershell-commands/](http://joshmouch.wordpress.com/2012/04/22/entity-framework-code-first-migrations-executing-migrations-using-code-not-powershell-commands/)）-但我不确定这对您有多重要，我对此表示怀疑。
*脚手架是真正的问题*（添加迁移），据我所知，无法通过 EF/CF 框架直接从 C# 访问。

* * *

注意：-基于（[http://entityframework.codeplex.com/SourceControl/changeset/view/f986cb32d0a3#src/EntityFramework.PowerShell/Migrations/AddMigrationCommand.cs](http://entityframework.codeplex.com/SourceControl/changeset/view/f986cb32d0a3#src/EntityFramework.PowerShell/Migrations/AddMigrationCommand.cs)）中的代码-正如EF大师自己所说-那部分的代码调用到`System.Data.Entity.Migrations.Design`库中——它完成了大部分工作。**如果可以引用那个并实际重复`AddMigrationCommand`**正在做的事情 - 那么可能根本不需要 PowerShell。但我怀疑这不是那么直截了当，外部呼叫者等可能看不到“内部”呼叫。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-27T00:29:59.683

至少在这篇文章中，您可以直接访问`System.Data.Entity.Migrations.Design.MigrationScaffolder`该类并直接调用其`Scaffold()`上的方法，这将返回一个包含“常规”.cs 文件、“Designer.cs”文件和 .cs 文件内容的对象。 resx 文件。

您如何处理这些文件取决于您！

就个人而言，我正试图将其转变为能够在新的 ASPNET5/DNX 项目上创建 EF6 迁移的工具，该项目不受 powershell 命令的支持。

# oracle - 在 Oracle 中恢复上一个命令

> ID：15620252
> 
> 赞同：0
> 
> 时间：2013-03-25T16:44:29.810
> 
> 标签：oracle, command

是否有一种简单的方法可以访问以前在 Oracle 中输入的命令？例如，在使用 Linux 终端时，可以按“向上箭头”键并遍历命令历史记录。Oracle 是否提供类似的便利功能？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:52:28.283

不是内置的，没有。

在 DOS SQL*PLUS 中，您会遇到这种情况（即向上箭头转到前面的命令）。

在 linux sql*plus 中它没有。话虽如此，linux上有一个很好的实用程序`rlwrap`可以为我们做这件事。首先安装该实用程序，然后设置一个别名（将其粘贴在您的 .profile 中，这样您就不必每次打开 shell 时都运行它）：

```
oracle@dazza-linux64:~$ alias sqlplus='rlwrap sqlplus' 
```

现在每当你启动 sql*plus 时：

```
oracle@dazza-linux64:~$ sqlplus / as sysdba 
```

你会得到你想要的向上/向下箭头功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T16:54:40.313

它本身不是“Oracle”的功能，而是客户端和/或操作系统的功能。例如，如果我在 Windows 上运行 SQL*Plus，向上/向下箭头的功能与您描述的一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T16:52:37.350

在 Windows 客户端中，有两个 SQL*Plus 命令行实用程序：一个是 DOS 外观 ( `sqlplus.exe`)，一个是 Windows 外观 ( `sqlplusw.exe`)。DOS 类型的版本具有“向上箭头”功能，此外，您可以按 F7 键查看以前的命令列表，但请注意，它不能很好地处理多行命令。

Windows 类型的版本不支持 uparrow 或 F7，但您可以突出显示先前的查询，然后复制/粘贴。您还可以在按住左键的同时执行 *nix 右键单击​​技巧以立即进行复制/粘贴。它在多行命令中表现良好，但我不得不承认我真的很想在这里也有向上箭头:)

# php - PHP在mysql数据库中插入文件

> ID：15620259
> 
> 赞同：1
> 
> 时间：2013-03-25T16:44:55.083
> 
> 标签：php, mysql

在我当前的代码中，我只插入文件的文件名，文件存储在文件夹中。我还想将文件存储在我的mysql数据库中。我怎样才能做到这一点。

我的表：id file_name fcontent (longblob)

```
include 'db.php';
if(isset($_FILES['image'])){
    $errors= array();
    $tablename = "files";
    $file_name = $_FILES['image']['name'];
    $file_size =$_FILES['image']['size'];

    $file_tmp =$_FILES['image']['tmp_name'];
    $content =$_FILES['image']['fcontent']; // content in database

    $sql="INSERT INTO $tablename(file_name,content)VALUES('" . mysql_real_escape_string($file_name) . "')"; // here i need to insert the content i assume

    $file_ext=strtolower(end(explode('.',$_FILES['image']['name']))); //convert to lower

$extensions = array("jpeg","jpg","png","txt","html","php","gif");   // File extension that are 

allowed 

if(in_array($file_ext,$extensions )=== false){ // check if value exists in array
     $errors[]="extension not allowed.";

    }
    if($file_size > 2097152){ // cant be greater than 2mb
    $errors[]='File size must be excately 2 MB';

    }               
    if(empty($errors)==true){
        mysql_query($sql);
        move_uploaded_file($file_tmp,"upload/".$file_name); 

        echo "Success";
        header("location:files.php"); // Send back to main page

    }else{
        print_r($errors);
 }

}
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T16:52:19.580

就我而言，我不建议将图像存储在数据库中，原因如下： - 太重而无法管理。- 缺乏速度（尽管有更多的图像，如果它们很重的话）。

所以我建议你把图像放在一个目录中，它的属性（类型、大小、作者......）当然还有它们到数据库中目录的链接，

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T16:50:25.477

目前我可以想到两种方法

1.使用

```
BLOB       
MEDIUMBLOB 
LONGBLOB 
```

mysql 中的数据类型 ... 使用[file_get_contents()](http://php.net/manual/en/function.file-get-contents.php)获取内容并插入内容

1.  利用

    ```
     text 
    ```

    数据类型..对内容进行编码，然后保存内容..

或者，您可以只存储文件的路径......就像存储`http://domain/img.jpg` 在表格列中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-17T23:18:24.083

一个例子：

```
 $link = mysqli_connect("localhost", "root", "");
  mysqli_select_db($link, "mydb"); 

  $stmt = $link->prepare("insert into myfile (id, arq) values (?, ?)");

  $stmt->bind_param("ss", $id, $file);

  $id = 5;
  $file = file_get_contents("C:\\myfile.png");

  $stmt->execute(); 
```

如果您想通过一些 HTML 表单 ( ) 上传文件，请`enctype='multipart/form-data'`更改该行

```
 $file = file_get_contents("C:\\myfile.png"); 
```

至

```
 $file = file_get_contents($_FILES['myFileName']['tmp_name']); 
```

其中`myFileName`in`$_FILES['myFileName']`是输入文件 html 元素的名称。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-25T16:46:51.857

你有什么问题？关于这个问题有各种各样的话题，一个是[这个](https://stackoverflow.com/questions/8952/storing-a-file-in-a-database-as-opposed-to-the-file-system)

# linux - 命令完成后继续执行 linux shell 脚本

> ID：15620268
> 
> 赞同：1
> 
> 时间：2013-03-25T16:45:12.980
> 
> 标签：linux, shell, ubuntu

下载 zip 文件后，我需要执行 md5sum 检查。我的 shell 脚本如下所示：

```
wget $1 -O "$5.zip" 
md5pkg=md5sum $5.zip
#perform check and other operations with md5pkg 
```

现在，在下载完成之前执行检查，由于 .zip 文件尚未下载 bean，因此导致错误。解决这个问题的最佳方法是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T17:08:32.770

如果 的值中有一个 & 符号`$1`，它将被解析为后台运算符，从而允许脚本的其余部分继续进行。引用它：

```
wget "$1" -O "$5.zip"
md5pkg=$( md5sum "$5.zip" ) 
```

在这种情况下，我希望与号后面的部分是无效的 shell 命令并导致错误，您没有提及。可能还有其他问题，但无论如何你都应该引用你的变量。

# vim - 括号后的第一个数字在vim中未突出显示

> ID：15620270
> 
> 赞同：0
> 
> 时间：2013-03-25T16:45:15.597
> 
> 标签：vim

所以我将在 python 文件中有一行，如：

combos = [(1,2,3), (4,5,6)] 并且 1 和 4 不会突出显示为数字。这发生在多种配色方案中。我想知道如何解决这个问题。

vimrc 在[http://pastebin.com/zgmijN9w](http://pastebin.com/zgmijN9w)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T17:03:02.747

源这个函数：

```
function! SynStack()
  if !exists("*synstack")
    return
  endif
  echo map(synstack(line('.'), col('.')), 'synIDattr(v:val, "name")')
endfunc 
```

并将`:call Synstack()`光标悬停在数字上。你应该得到`pythonNumber`所有六个数字。

以下命令应向您显示突出显示组`pythonNumber`已链接到`Number`以及完成的位置。大概在您的 Python 语法文件中。

```
:verbose hi pythonNumber 
```

如果这 6 个数字属于不同的高亮组，您应该修复您的语法文件和/或自定义您的颜色方案。

# c# - 字段名称未知的动态 LINQ 表达式

> ID：15620271
> 
> 赞同：4
> 
> 时间：2013-03-25T16:45:18.357
> 
> 标签：c#, linq, lambda

我正在开发一个 ASP.NET Web Api 服务，其中一个控制器操作接受带有 0 个或多个 Key:Value 对的 JSON 字符串来搜索对象集合。因此，我不知道过滤集合的请求中将包含哪些字段名称。

现在，我的代码将通过基于提供的数据链接 WHERE 表达式来构建动态查询。这种情况下的问题是，我不仅不知道需要过滤的字段名称，而且字段列表及其值都存储在每个对象内的集合中——并且该集合中的对象只有两个属性：名称和值。

数据正在从我无法控制的一堆 XML 文件中反序列化（因此无法更改格式），并且每个文件中包含的字段列表可能不同。（见下面的类定义）。

```
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
[System.Xml.Serialization.XmlRootAttribute(Namespace = "", IsNullable = false)]
public class Bug
{
    [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public int ID { get; set; }

    [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public DateTime ChangedDate { get; set; }

    [System.Xml.Serialization.XmlArrayAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    [System.Xml.Serialization.XmlArrayItemAttribute("Field", typeof(BugField), Form = System.Xml.Schema.XmlSchemaForm.Unqualified, IsNullable = false)]
    public List<BugField> Fields {get; set;}
} 
```

如果我运行以下查询，一切正常 - 我会根据 JSON 请求得到我正在寻找的结果 - 但是该请求仅搜索一个字段和一个值，并且查询具有硬编码的正确字段的索引；） （仅供参考 - itemList 是之前创建的没有过滤的集合）

```
itemList = (List<Bug>)itemList.Where(x => x.Fields[15].Value.ToString() == field.Value.ToString()).ToList(); 
```

我确实有代码可以根据 JSON 请求提供的搜索字段创建动态 LINQ 查询（链接 WHERE 表达式）（我在这里不包括此代码，因为它太长了 - 并且不确定它是否完全相关...然而）。但是，解析表达式的方式需要能够引用要搜索的属性的名称——这当然是未知的，因为它是 Name 属性的值。

那么 - 如何修改查询以考虑到确定查询参数的字段名称事先是未知的？

编辑：以下代码块显示了我想要使用的内容（或者更确切地说，这将与我的动态查询生成器一起使用）。如果类中的字段名称定义为与 JSON 字符串中提供的字段名称相同，则第一行代码效果很好。第二个是我尝试获取内部集合字段名称属性的尝试之一。

```
foreach (KeyValuePair<string, object> field in queryFields)
{
    itemList = itemList.Where<Bug>(field.Key, field.Value, (FilterOperation)StringEnum.Parse(typeof(FilterOperation), "eq"));
    itemList = itemList.Where<Bug>(x => x.Fields.Any(y => y.Name == field.Key && y.Value == field.Value)); 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-06T16:10:17.437

我知道这是旧的，但我是这样做的，而无需输入所有可能的名称：

1）匿名 IEnumerable 进来，根据需要转换为 IEnumerable 或 IList
2）在第一个元素上，

```
var property = element.GetType().GetProperties(BindingFlags.Instance | BindingFlags.Public) 
```

3) Foreach 属性中的对象，将列添加到您的数据表中：

```
table.Columns.Add(property.Name, typeof(property.GetValue(element, null)); 
```

4）从头开始迭代你的集合：foreach：

```
var prop = item.GetType().GetProperties(BindingFlags.Instance | BindingFlags.Public);

dynamic i = new ExpandoObject();
IDictionary<string, object> d = (IDictionary<string, object>)i;
foreach (var p in prop)
{
    d.Add(p.Name, p.GetValue(item));
}
list.Rows.Add(((IDictionary<string, object>)d).Values.ToArray()); 
```

这将获取匿名类型，将它们提取到 ExpandoObject（可与 IDictionary 完全互换），然后通过将 IDictionary 动态对象转换为数组来添加行。

可以使用任何类型进行缩放，并允许您在构建数据时对其进行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T21:04:46.580

在花了将近整整 2 天的时间试图让这个解决方案工作而不在其他地方做大的改变之后，我最终决定对模型进行轻微的设计改变，以使其更容易。

我如何解决这个问题是将每个字段直接添加到模型中，而不是使用自定义对象列表。因此，我删除了 XML 反序列化，而是使用 XDocument 循环遍历节点内的所有元素 - 然后比较“名称”属性的值以确定它是哪个字段，并分配“值”属性的值到模型中的相应属性。

一些额外的代码和一个不错的小 switch 语句，有 22 个案例来处理分配......

不是我想做的，但至少我仍然可以按时交付服务，然后尝试看看以后是否有更好的方法来做到这一点......

为了完整起见，这是我所做的更改：

```
public class Bug
{
    public int ID { get; set; }

    public DateTime ChangedDate { get; set; }

    public string State { get; set; }
    public string AreaPath { get; set; }
    public string Title { get; set; }
    public string Status { get; set; }
    public string SubStatus { get; set; }
    public string OpenedBy { get; set; }
    public string ChangedBy { get; set; }
    public DateTime OpenedDate { get; set; }
    public DateTime ResolvedDate { get; set; }
    public string AssignedTo { get; set; }
    public string IssueType { get; set; }
    public string IssueSubtype { get; set; }
    public string Priority { get; set; }
    public string Severity { get; set; }
    public string Keywords { get; set; }
    public string ScreenID { get; set; }
    public string ResolvedBy { get; set; }
    public string Resolution { get; set; }
    public string ReproSteps { get; set; }
    public string HowFound { get; set; }
    public string FullHistory { get; set; }
    public string EverChangedBy { get; set; }

} 
```

以及过去的反序列化方法：

```
internal static Bug Deserialize(string filePath)
    {
        XDocument doc = XDocument.Load(filePath);
        Bug bug = new Bug();

        bug.ID = int.Parse(doc.Root.Element("ID").Value);
        bug.ChangedDate = DateTime.Parse(doc.Root.Element("ChangedDate").Value);

        foreach (var el in doc.Root.Element("Fields").Elements())
        {
            XAttribute fieldName = el.Attributes("Name").Single();
            XAttribute fieldValue = el.Attributes("Value").Single();

            switch (fieldName.Value.ToString())
            {
                case "State":
                    bug.State = fieldValue.Value.ToString();
                    break;
                case "Area Path":
                    bug.AreaPath = fieldValue.Value.ToString();
                    break;
                case "Title":
                    bug.Title = fieldValue.Value.ToString();
                    break;
                case "Status":
                    bug.Status = fieldValue.Value.ToString();
                    break;
                case "SubStatus":
                    bug.SubStatus = fieldValue.Value.ToString();
                    break;
                case "Opened By":
                    bug.OpenedBy = fieldValue.Value.ToString();
                    break;
                case "ChangedBy":
                    bug.ChangedBy = fieldValue.Value.ToString();
                    break;
                case "Opened Date":
                    bug.OpenedDate = DateTime.Parse(fieldValue.Value.ToString());
                    break;
                case "Resolved Date":
                    bug.ResolvedDate = DateTime.Parse(fieldValue.Value.ToString());
                    break;
                case "Assigned To":
                    bug.AssignedTo = fieldValue.Value.ToString();
                    break;
                case "Issue Type":
                    bug.IssueType = fieldValue.Value.ToString();
                    break;
                case "Issue Subtype":
                    bug.IssueSubtype = fieldValue.Value.ToString();
                    break;
                case "Priority":
                    bug.Priority = fieldValue.Value.ToString();
                    break;
                case "Severity":
                    bug.Severity = fieldValue.Value.ToString();
                    break;
                case "Keywords":
                    bug.Keywords = fieldValue.Value.ToString();
                    break;
                case "ScreenID":
                    bug.ScreenID = fieldValue.Value.ToString();
                    break;
                case "ResolvedBy":
                    bug.ResolvedBy = fieldValue.Value.ToString();
                    break;
                case "Resolution":
                    bug.Resolution = fieldValue.Value.ToString();
                    break;
                case "ReproSteps":
                    bug.State = fieldValue.Value.ToString();
                    break;
                case "HowFound":
                    bug.State = fieldValue.Value.ToString();
                    break;
                case "FullHistory":
                    bug.State = fieldValue.Value.ToString();
                    break;
                case "EverChangedBy":
                    bug.State = fieldValue.Value.ToString();
                    break;
            }
        }

        return bug;
    } 
```

这使我可以使用以下调用来构建 LINQ 查询：

```
foreach (KeyValuePair<string, object> field in queryFields)
        {
            itemList = itemList.Where<Bug>(field.Key, field.Value, (FilterOperation)StringEnum.Parse(typeof(FilterOperation), "eq"));                
        } 
```

干杯!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T17:02:40.717

我看到了几种解决方法：

1) 列出所有可用于过滤的属性，匹配属性并将它们动态添加到您的 linq 查询中。

可行的方法是您将接受您的 json 对象并遍历与其值一起传递的属性。所以，假设你进入你的控制器：

```
{
Prop[0].Name = "Name" 
Prop[0].Value = "Justin"
Prop[1].Name = "Email"
Prop[1].Value = "j@g.com"
} 
```

例如，在您的控制器中，您将遍历每个键值并动态链接它。一些伪代码：

```
foreach(var keyValue in Filters){
  var prop = keyValue.Name;
  var val = keyValue.Value;
  myLinqQuery.AddWhere(c => c.GetType().GetProperty().Name == prop && c.GetValue() == Value);
} 
```

这种方法效果很好，但一个很大的缺点是它会尝试使用反射过滤请求中的每个属性。在这种情况下，你会失去一些控制。

2) 只允许多个过滤器，并为每个过滤器设置一个过滤条件。在该选项中，您将只允许一个过滤器列表，并对每个过滤器执行某种 where 操作。这是一个简单的示例：假设您的控制器接收：

```
public ActionResult Filter(string name, string email){
 //name and email are the filter values
 var query = ( from c in (List<Bug>)itemList select c);
if(!string.IsNullOrEmpty(name))
  query.AddWhere(c => c.Name == name);

if(!string.IsNullOrEmpty(email))
  query.AddWhere(c => c.Email == email);

} 
```

您可以通过为每个允许的过滤器创建一个单独的类并公开其过滤器操作来进一步将其设计为更多的 OOP 和 SOLID。

让我知道它是否有帮助！

# xml - XML-RPC 模式 .xsd

> ID：15620274
> 
> 赞同：2
> 
> 时间：2013-03-25T16:45:28.373
> 
> 标签：xml, xsd, xml-rpc

是否有人拥有或知道如何编辑用于 XML-RPC 方法调用的 XSD？

我找到了这个：[MSDN Xml Rpc Schema](http://msdn.microsoft.com/en-us/library/ff797558%28v=office.12%29.aspx)

但是它不允许有效的 XML-RPC 案例。似乎不对的一点是：

```
<xsd:complexType name="ValueType" mixed="true">
    <xsd:choice>
        <xsd:element name="i4"            type="xsd:int" />
        <xsd:element name="int"           type="xsd:int" />
        <xsd:element name="string"        type="ASCIIString" />
        <xsd:element name="double"        type="xsd:decimal" />
        <xsd:element name="Base64"        type="xsd:base64Binary" />
        <xsd:element name="boolean"       type="NumericBoolean" />
        <xsd:element name="dateTime.iso8601" type="xsd:dateTime" />
        <xsd:element name="array"         type="ArrayType" />
        <xsd:element name="struct"        type="StructType" />
    </xsd:choice>
</xsd:complexType> 
```

根据[XML-RPC 规范](http://xmlrpc.scripting.com/spec.html)，以下是有效的：

```
...
<value>example text</value>
.... 
```

因为如果没有提供 type 元素，则`<value>`元素内的文本默认为字符串。但是上面的 xsd 不会验证它。

我尝试将其更改为：

```
<xsd:complexType mixed="true" name="ValueType">
    <xsd:choice minOccurs="0" maxOccurs="1">
        <xsd:element name="i4"            type="xsd:int" />
        <xsd:element name="int"           type="xsd:int" />
        <xsd:element name="string"        type="ASCIIString" />
        <xsd:element name="double"        type="xsd:decimal" />
        <xsd:element name="Base64"        type="xsd:base64Binary" />
        <xsd:element name="boolean"       type="NumericBoolean" />
        <xsd:element name="dateTime.iso8601" type="xsd:dateTime" />
        <xsd:element name="array"         type="ArrayType" />
        <xsd:element name="struct"        type="StructType" />
    </xsd:choice>
</xsd:complexType> 
```

但这允许：`<value>testtext<string>with more text</string></value>`根据规范，这不应该是有效的。

我在尝试使 Value 元素可以包含数据或元素时遇到问题，但不能包含两者的混合。

任何人，如果有人知道如何解决上述问题或有他们可以提供的工作 xsd，将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T17:13:52.587

使用 XSD 1.0 无法描述您想要的；从概念上讲，您想要的是内容模型的“联合”：仅文本和仅元素。

如果您可以使用其他方式，例如添加 Schematron 或迁移到 XSD 1.1（支持不佳），请使用其他信息更新您的问题。

# xaml - ItemsControl DataTemplate 内的 XAML 元素有时具有 null 父级 (WinRT)

> ID：15620276
> 
> 赞同：1
> 
> 时间：2013-03-25T16:45:31.663
> 
> 标签：xaml, windows-runtime, winrt-xaml

我正在制作一个win8应用程序。我有一个带有 DataTemplate 的 ItemsControl。在这个 DataTemplate 里面，有一个 Grid。在这个 Grid 里面有一个 WebView 和一个 ProgressRing。我在 WebView 上有一个 LoadCompleted 事件，此时我想禁用 ProgressRing。我的想法是使用以下内容：

```
 ProgressRing pr = ((sender as FrameworkElement).Parent as Grid).Children.First(t => t.GetType().Equals(typeof(ProgressRing))) as ProgressRing;
    pr.IsActive = false; 
```

这有时有效，但有时它声称 ((sender as FrameworkElement).Parent) 为空。我通过调试验证，在这些情况下，发件人仍然是正确的 WebView。WebView 正在屏幕上显示并且格式正确 - 那么它的父级怎么可能为空呢？

这是 XAML：

```
 <ItemsControl Margin="40,0,40,0" x:Name="resultsItemsControl">
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <StackPanel Orientation="Horizontal"></StackPanel>
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Grid Margin="50,0">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="auto"></RowDefinition>
                                    <RowDefinition Height="*"></RowDefinition>
                                    <RowDefinition Height="30"></RowDefinition>
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="150" MaxWidth="150"></ColumnDefinition>
                                    <ColumnDefinition Width="auto"></ColumnDefinition>
                                    <ColumnDefinition Width="100" MaxWidth="100"></ColumnDefinition>
                                    <ColumnDefinition Width="*"></ColumnDefinition>
                                </Grid.ColumnDefinitions>
                                <Button Grid.Column="0" x:Name="viewInBrowser" IsEnabled="False" Style="{StaticResource PreviewLinkAppBarButtonStyle}" Margin="0,0,40,0" Click="viewInBrowser_Click_1"></Button>
                                <TextBlock HorizontalAlignment="Left" TextAlignment="Left" Grid.Column="1" FontSize="30" Margin="0,20,0,20" FontWeight="Bold" FontFamily="Georgia" VerticalAlignment="Center" Text="{Binding Name}"></TextBlock>
                                <ProgressRing x:Name="loadingProgressRing" Margin="20,0" Grid.Column="2" Foreground="White" IsActive="True" HorizontalAlignment="Left" VerticalAlignment="Center"></ProgressRing>

                                <WebView ScriptNotify="WebView_ScriptNotify_1" Grid.Column="0" Grid.ColumnSpan="14" Grid.Row="1" Source="{Binding CurrentSearchUrl}" Width="0" LoadCompleted="WebView_LoadCompleted_1"></WebView>
                            </Grid>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:58:25.920

我根本不会在 ItemsControl 中使用 WebView，但是您可以尝试将整个模板放在 UserControlm 中，然后在 UserControl 中处理事件并且不需要关心发件人，因为您只需命名 Grid并访问一个命名的网格。

# html - HTML 表单第一个下拉菜单自动更改第二个下拉选项

> ID：15620283
> 
> 赞同：2
> 
> 时间：2013-03-25T16:45:58.283
> 
> 标签：html, mysql

我在第一个下拉列表中有此代码：

```
<td align="left" style="padding-bottom:10px">
    <select name="category" id="category">
        <option selected value="Please Select">Please Select</option>           
        <option value="Cars">Cars</option>
        <option value="Trucks">Trucks</option>
        <option value="Motorcycles">Motorcycles</option>
        <option value="Boats">Boats</option>
    </select>
</td> 
```

对于上一个选项，我还有第二个具有不同颜色的类别。例如：如果我选择汽车，第二个下拉菜单将显示选择“红色”、“绿色”或“蓝色”，但如果我选择卡车，第二个下拉菜单将显示仅选择“黑色”或“白色”选项。

两个第二个下拉选项都将转到 mySQL DB 中的同一列（子类别），因此在子类别列上没有汽车可以具有值“黑色”，或者在子类别列上没有卡车可以具有值“红色”。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T16:52:02.713

工作示例：http: [//jsfiddle.net/7YeL6/4/](http://jsfiddle.net/7YeL6/4/)

鉴于这种结构：

```
 <select name="category" id="category">
    <option selected value="Please Select">Please Select</option>           
    <option value="Cars">Cars</option>
    <option value="Trucks">Trucks</option>
    <option value="Motorcycles">Motorcycles</option>
    <option value="Boats">Boats</option>
</select>

<div>
<select name="category2" id="truck" class="second">
        <option value="white">white</option>
        <option value="black">black</option>            
</select>

<select name="category2" id="car" class="second">
        <option value="red">red</option>
        <option value="green">green</option>
        <option value="blue">blue</option>           
</select>
</div> 
```

您可以使用 jQuery`.change`函数：

```
 $("#category").change(function () {
  var str = "";
str =  $("select#category option:selected").text();
    if(str == "Trucks"){
        $("select.second").not("#truck").hide();
        $("#truck").show();
        $("#truck").fadeIn(1000);
    }
    else if(str == "Cars"){
        $("select.second").not("#car").hide();
        $("#car").show();
        $("#car").fadeIn(1000);
    }

}) 
```

**CSS**

```
#category2{
display: none;
} 
```

# c++ - 当 unary_function 使用引用参数时使用 std::not1 编译时出错

> ID：15620285
> 
> 赞同：3
> 
> 时间：2013-03-25T16:46:01.597
> 
> 标签：c++

这是我的代码：

```
using namespace std;

class Pixel
{
public:
    bool AreSamplesIdentical() const
    {
        return true;
    }
};

namespace
{
class Predicate_SamplesEqual : public unary_function<const Pixel&, bool>
{
public:
    bool operator () (const Pixel& pixel) const
    {
        return pixel.AreSamplesIdentical();
    }
};
}

int main()
{
    vector<Pixel> pixels(10);
    find_if(pixels.begin(), pixels.end(), not1(Predicate_SamplesEqual()));
} 
```

在 Visual Studio 2008 C++ Express 上，我收到错误：错误 C2529：'_Left'：对引用的引用是非法的来自库代码内部。

但我在这里试过，它编译：http: [//ideone.com/swWrZT](http://ideone.com/swWrZT)

这里谁错了？如果是我，我该如何编写解决方法？

错误发生在功能指示的行上

```
 // TEMPLATE CLASS unary_negate
template<class _Fn1>
    class unary_negate
    : public unary_function<typename _Fn1::argument_type, bool>
    {   // functor adapter !_Func(left)
public:
    explicit unary_negate(const _Fn1& _Func)
        : _Functor(_Func)
        {   // construct from functor
        }

    /**error**/bool operator()(const typename _Fn1::argument_type& _Left) const
        {   // apply functor to operand
        return (!_Functor(_Left));
        }

protected:
    _Fn1 _Functor;  // the functor to apply
    }; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T17:06:10.187

我猜该错误是由于`unary_function`使用第一个模板参数作为类型并进行引用：

```
template<typename Arg, typename Result>
struct unary_function
{
    typedef Arg argument_type;
    typedef Result result_type;
    ...
    virtual result_type operator()(const argument_type& _Left) const = 0;
    ...
} 
```

所以，if `Arg`is `const X&`then`operator()`使用`const X& &`- 引用来引用，而 vc 9.0 无法处理它。

明显的解决方法是编写：

```
class Predicate_SamplesEqual : public unary_function<Pixel, bool>
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T17:02:14.433

> 这里谁错了？

在使用默认选项运行时，MSVC 和 GCC 都没有声称符合任何标准，因此两者都不是完全“错误的”。

在这种情况下，GCC 4.7 应用 C++11 引用折叠规则（即使没有 C++11 模式，这也是 GNU 扩展）。

如果您希望 GCC 符合以前的标准，请传递命令行选项`--std=c++98`，它将拒绝您的代码。

# wso2 - WSO2 数据服务中的多租户 Web 服务？

> ID：15620287
> 
> 赞同：0
> 
> 时间：2013-03-25T16:46:06.370
> 
> 标签：wso2, multi-tenant, wso2dss

我想建立一个网络服务，不是每个用户都能看到所有数据。因此，我需要以多租户方式存储数据。

快速示例：汽车经销商。

> 经销商
> 
> *   ID
> *   姓名
> *   用户名
> 
> 车
> 
> *   ID
> *   姓名
> *   经销商 ID（拥有者）

现在，经销商使用他的用户凭据调用`get_my_cars`Web 服务，并且应该只看到他拥有的汽车。就像是：

```
SELECT car.id, car.name
FROM car
JOIN dealer ON car.dealer_id = dealer.id
WHERE dealer.username = %CURRENT_WEBSERVICE_USER% 
```

但是如何将`%CURRENT_WEBSERVICE_USER%`变量放入 MySQL 查询中？或者我在这里做错了什么？您还如何过滤数据，让每个人都只能看到自己的数据？

感谢您的回复！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T18:29:21.267

您的用例不是多租户用例。您需要编写一个 web 服务（数据服务）并使用 usernametoken/basicauth 保护它。当用户使用他的凭据调用该服务时，您需要查询数据库并返回结果。您需要的是简单的安全网络服务。

# apache - .htaccess mod_rewrite 基于域

> ID：15620289
> 
> 赞同：0
> 
> 时间：2013-03-25T16:46:14.067
> 
> 标签：apache, .htaccess, mod-rewrite

我的 htaccess 中有以下规则，我需要对其进行修改以将变量添加到重新编写的 url 的末尾。基本上我有两个指向同一个主机的域，并且我根据它使用的域显示不同的站点。

```
RewriteCond %{HTTP_HOST} ^(www\.)?rrr\.me 
RewriteCond %{REQUEST_URI} !^/rrr
Rewriterule ^(.*)$ /rrr/$1 [L] 
```

如果有人去`rrr.me`或`www.rrr.me`他们在我的网站的 rrr 目录中获得 index.php。这很好用！

我现在需要能够向 index.php 添加一个变量。所以有人会输入`rrr.me/abc`，它会以这种方式将 abc 附加到 index.php 的末尾`index.php?var1=abc`

根据 Olaf Dietsche 在评论中的建议，新的重写规则。

```
RewriteCond %{HTTP_HOST} ^(www\.)?rrr\.me 
RewriteCond %{REQUEST_URI} !^/rrr
RewriteCond %{REQUEST_URI} !/assets/
Rewriterule ^.*$ /rrr/index.php?rrr=$0 [L]

RewriteCond %{HTTP_HOST} ^(www\.)?rrr\.me
RewriteCond %{REQUEST_URI} !^/rrr
Rewriterule ^assets/.*$ /rrr/$0 [L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:50:34.930

将请求的 URL 作为查询字符串附加

```
Rewriterule ^.*$ /rrr/index.php?var1=$0 [L] 
```

要排除`assets`目录，您必须使用附加的[`RewriteCond`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritecond)

```
RewriteCond %{HTTP_HOST} ^(www\.)?rrr\.me
RewriteCond %{REQUEST_URI} !^/rrr
RewriteCond %{REQUEST_URI} !/assets/
Rewriterule ^(.*)$ /rrr/$1 [L] 
```

对于资产文件，您可以使用类似的重定向

```
RewriteCond %{HTTP_HOST} ^(www\.)?rrr\.me
RewriteCond %{REQUEST_URI} !^/rrr
Rewriterule ^assets/.*$ /rrr/$0 [L] 
```

# objective-c - 如何解析xml数据

> ID：15620290
> 
> 赞同：0
> 
> 时间：2013-03-25T16:46:14.213
> 
> 标签：objective-c, xml-parsing, nsxmlparser

我正在制作一个调用 Web API 并检索 XML 文件的 iPhone 应用程序。我有需要解析的 XML 数据，但我只需要整个 XML 文件中的一个元素。一次可能会加载多个 xml 文件，但我仍然只需要每个文件中的一个元素。我正在尝试使用 NSXMLParser 来解析数据，但如果有任何更简单的选项，我愿意接受。有谁知道有关如何执行此操作的任何好的教程，或者知道如何解释它？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:57:24.007

我已经使用 XMLParser 和 XPath 进行解析，并且每个都有其成本和优势。如果您知道目标对象的 DOM 路径是什么，那么 XPath 非常棒。XMLParser 在以编程方式遍历 XML 方面提供了更大的灵活性。

我会推荐这两个链接：

[NSXML解析器](http://wiki.cs.unh.edu/wiki/index.php/Parsing_XML_data_with_NSXMLParser)

[XPath](https://stackoverflow.com/questions/14578619/creating-xpath-query-dynamically-using-touchxml-and-xcode)

# ios - 防止我们的应用自动更新

> ID：15620291
> 
> 赞同：-1
> 
> 时间：2013-03-25T16:46:18.277
> 
> 标签：ios

我们希望用户在云端备份相关数据，然后用新版本更新他们的应用程序。

有没有办法阻止用户自动更新我们的应用程序？有多种好处：

1.  用户可以选择是否更新
2.  如果在更新前有任何任务需要执行，用户可以在更新前完成这些任务
3.  用户可以选择在更新前阅读重要信息和说明。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T16:58:14.283

用户必须通过 App Store 安装来手动更新 iOS 上的应用程序。这些更新与该版本的发行说明一起显示，例如：

![App Store 中的应用更新](../Images/facee5fc64c0c56615ca4462e3b05c33.png)

在更新过程中无法执行任何自定义代码，因此您必须在更新后首次启动应用程序时处理任何数据迁移。

# android - 从 Android 活动获取结果时出现 nullPointerException

> ID：15620293
> 
> 赞同：0
> 
> 时间：2013-03-25T16:46:28.853
> 
> 标签：android, nullpointerexception, android-activity

我正在尝试将我自己的类的对象作为活动结果返回，但我得到的只是空指针……我阅读了一些教程，但没有足够的关于 Own 类结果的信息。

代码：

GPS客户端活动：

```
public class GPSClientActivity extends Activity {
private MapView view;
private MapDrawer mainDrawer;
private Intent intent;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_gps);
        view = (MapView) findViewById(R.id.mapView);
        view.setTileSource(TileSourceFactory.MAPNIK);
        view.setBuiltInZoomControls(true);
        MapController mapController = view.getController();
        mapController.setZoom(10);
        GeoPoint point2 = new GeoPoint(51496994, -134733);
        mapController.setCenter(point2);
        mainDrawer=new MapDrawer(view);
        final Button button = (Button) findViewById(R.id.addButton);
        button.setOnTouchListener(new View.OnTouchListener() {
            @Override
            public boolean onTouch(View arg0, MotionEvent arg1) {
                intent=new Intent(GPSClientActivity.this,WaypointSetupActivity.class);
                intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                startActivityForResult(intent,1);
                return false;
            }
        }); 

    }
    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        // TODO Auto-generated method stub
        super.onActivityResult(requestCode, resultCode, data);
        if(resultCode==RESULT_OK)
        {
            MapPoint point=(MapPoint) intent.getSerializableExtra("result");
             GeoPoint point2 = new GeoPoint(51496994, -134254);
             point.setGeo(point2);
             mainDrawer.addGeopointToMap(point.getName(), point.getDesc(), point.getPos());
        }
    }

} 
```

WaypointSetupActivity：

```
public class WaypointSetupActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_waypoint_setup);
        final Button button = (Button) findViewById(R.id.butConfirm);
        final EditText nameField=(EditText)findViewById(R.id.editText1);
        final EditText descField=(EditText)findViewById(R.id.editText2);
        button.setOnTouchListener(new View.OnTouchListener() {
            @Override
            public boolean onTouch(View arg0, MotionEvent arg1) 
            {
                MapPoint point=new MapPoint("","", 1, 1, null);
                Intent result=new Intent();
                result.setFlags(Intent.FLAG_ACTIVITY_FORWARD_RESULT);
                result.putExtra("result", point);
                setResult(WaypointSetupActivity.RESULT_OK,result);
                finish();
                return false;
            }
        }); 
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) 
    {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.waypoint_setup, menu);
        return true;
    }

} 
```

地图点：

```
public class MapPoint implements Serializable
{
    private int priority;
    private int type;//person,building,vehicle,custom
    private String description;
    private String name;
    private GeoPoint position;

    public MapPoint(String nam,String desc,int typ,int prio,GeoPoint pos)
    {
        priority=prio;
        type=typ;
        description=desc;
        nam=name;
        position=pos;
    }
    public void setGeo(GeoPoint geo)
    {position=geo;}

    public int getPrio()
    {return priority;}

    public int getType()
    {return type;}

    public String getDesc()
    {return description;}

    public String getName()
    {return name;}

    public GeoPoint getPos()
    {return position;}
    public OverlayItem convertToOverlayItem(MapPoint point)
    {
        OverlayItem item=new OverlayItem(point.getName(),point.getDesc(),point.getPos());
        return item;
    }
} 
```

地图抽屉：

```
public class MapDrawer 
{
    private ArrayList<OverlayItem> items;
    private ArrayList<MapPoint> mapPoints;
    private MapView currentMapview;
    public MapDrawer(MapView view)
    {
            GeoPoint geo=new GeoPoint(51496994, -134733);
            items=new ArrayList<OverlayItem>();
            mapPoints=new ArrayList<MapPoint>();
            currentMapview=view;
           // reconfigurePainter();- error
            //addGeopointToMap("meno","popis",geo);

    }

    public void addGeopointToMap(String name,String description,GeoPoint point)
    {
        MapPoint Mpoint=new MapPoint("meno","popis", 1, 1,point);
        mapPoints.add(Mpoint);
        items.add(Mpoint.convertToOverlayItem(Mpoint));
        reconfigurePainter();
    }

    public void reconfigurePainter()
    {
        DefaultResourceProxyImpl proxy=new DefaultResourceProxyImpl(currentMapview.getContext());
        ItemizedIconOverlay<OverlayItem> painter=new ItemizedIconOverlay<OverlayItem>(items, null, proxy);
        currentMapview.getOverlays().add(painter);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T16:49:29.467

利用

```
MapPoint point=(MapPoint) data.getSerializableExtra("result"); 
```

代替

```
MapPoint point=(MapPoint) intent.getSerializableExtra("result"); 
```

因为`intent`是 null 你没有在`intent`内部初始化as ：`onActivityResult``data`

```
 @Override
    protected void onActivityResult(int requestCode,int resultCode,Intent data) {
      // TODO Auto-generated method stub
     super.onActivityResult(requestCode, resultCode, data);
      if(resultCode==RESULT_OK)
        {
           intent=data; //<< assign data to intent
           MapPoint point=(MapPoint) intent.getSerializableExtra("result");
           //.....your code here..
        }
   } 
```

# iphone - 通过 iOS 应用上传 pdf

> ID：15620296
> 
> 赞同：0
> 
> 时间：2013-03-25T16:46:38.147
> 
> 标签：iphone, ios, objective-c, ipad, icloud

我有一个网络服务，可以将上传的 pdf 转换成翻书。我不想创建一个允许用户上传他们的 pdf 并接收翻书的 iOS 应用程序。从 iPhone/iPad 上传 pdf 的可能性有哪些？

是否可以通过 iCloud？还有其他选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T23:17:49.503

您可能可以注册您的应用程序以从任何来源（例如来自邮件附件）打开 pdf 文件，这是一个如何完成的示例：[如何注册应用程序以在 ipad 中的我的应用程序中打开 pdf 文件](https://stackoverflow.com/questions/2974285/how-to-register-the-app-to-open-the-pdf-file-in-my-app-in-ipad)

# python - 在 2 个列表之间迭代

> ID：15620298
> 
> 赞同：0
> 
> 时间：2013-03-25T16:46:44.250
> 
> 标签：python

我有 2 个列表：其中 1 个是列表列表。它们如下-

```
lists_of_lists = ['1', '4', '7', '13', '16', '21', '32', '36'],['3', '6', '8', '14', '22', '26', '31', '40']

just_a_list =['THEQUICKBROWNFOXJUMPEDOVERTHELAZYDOG', 'IWOULDLOVETOGETOVERWITHTHISASSOONASPOSSIBLE'] 
```

lists_of_lists 用于对 just_a_list 的元素进行切片，这样： `['1', '4', '7', '13', '16', '21', '32', '36']`将字符串切片`'THEQUICKBROWNFOXJUMPEDOVERTHELAZYDOG'`如下

```
'1' - '4' - 'HEQU'
'7' - '13' - 'KBROWNF'
'16' - '21' - 'JUMPED'
'32' - '36' - 'ZYDOG' 
```

需要注意的地方——

> 中的每个列表`list_of_lists`都有偶数个数字。
> 
> `i'th`in 位置的列表`list_of_lists`将属于 in 位置的`i'th`字符串`just_a_list`。

请帮助我了解如何执行上述过程..

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T16:50:44.950

用于`zip()`组合字符串和切片列表，然后使用`zip()`加号`iter()`技巧来配对起始值和终止值：

```
for slicelist, text in zip(lists_of_lists, just_a_list):
    for start, stop in zip(*([iter(slicelist)]*2)):
        print(text[int(start):int(stop) + 1]) 
```

请注意，我们必须*将*1 添加到停止索引，因为您似乎需要它是包容性的，而在 Python 中，停止索引是独占的。

这给出了：

```
>>> for slicelist, text in zip(lists_of_lists, just_a_list):
...     for start, stop in zip(*([iter(slicelist)]*2)):
...         print(text[int(start):int(stop) + 1])
... 
HEQU
KBROWNF
JUMPED
YDOG
ULDL
VETOGET
HTHIS
ONASPOSSIB 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T16:51:23.943

如果我理解正确：

```
>>> ls = just_a_list =['THEQUICKBROWNFOXJUMPEDOVERTHELAZYDOG', 'IWOULDLOVETOGETOVERWITHTHISASSOONASPOSSIBLE']

>>> ls[0]
'THEQUICKBROWNFOXJUMPEDOVERTHELAZYDOG'

# so we do    
# your index was off by one
>>> ls[0][1:5]
'HEQU'

>>> ls[0][7:14]
'KBROWNF' 
```

# gwt - GWT 2.5.1 中的序列化

> ID：15620299
> 
> 赞同：1
> 
> 时间：2013-03-25T16:46:45.730
> 
> 标签：gwt, serialization, gwt-2.5

我已经将我的项目从 GWT 2.4.0 更新到 GWT 2.5.1，突然一个特定的 RPC 序列化停止工作（所有其他仍在工作）。

我有这堂课：

```
public class StatusChangeMapEntity extends RecordStamp implements Serializable {

    private HashMap<WFStatus, Pair<WFPhase, ArrayList<Pair<AppUser, Date>>>> map;
    ...
    ...
} 
```

异常消息是：

```
Attempt to deserialize an object of type class Pair when an object of type class Slide is expected 
```

Slide 类扩展了 StatusChangeMapEntity 并且是被反序列化的对象。

任何想法如何解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T01:03:29.073

我已经设法解决了这个问题。基本上我创建了一个扩展 HashMap 的类：

```
public class MapStatusChanges extends HashMap<WFStatus, Pair<WFPhase, ArrayList<Pair<AppUser, Date>>>> {
   ...
} 
```

然后为 MapStatusChanges 创建了一个 CustomSerializer。

这不是一个通用的解决方案，但在 GWT 解决这个问题之前它一直有效。

希望这可以帮助....

# javascript - eclipse - 如何扩展内置的 javascript 库？

> ID：15620300
> 
> 赞同：0
> 
> 时间：2013-03-25T16:46:49.130
> 
> 标签：javascript, eclipse

在使用一些 WebDev 功能修改我的 eclipse juno 4.2 时，我目前在为 JQuery、JQMobi 和其他添加库支持时遇到了困难。

这是我的情况：

[![情况](../Images/0d0afa8f44f7dbd5a450159b2e8c274f.png)](https://i.stack.imgur.com/bDbhU.png)
[（来源：[codepot.com](https://svn.codespot.com/a/eclipselabs.org/jsdt-jquery/wiki/images/add-javascript-library.png)）]

这将是我的目标：

![目标](../Images/bda41fa8871e28b2d473798fed3e90ea.png)

* * *

**问题**

是否只能通过插件或手动操作 Eclipse 的内置 JS-Libraries？

因为，当我点击时`Add JavaScript library`，我没有得到这个：

![http://i.stack.imgur.com/Ezptb.png](../Images/665b094c20f90f63f8fafe1f2a4ad0dd.png)

就我而言，只有`User Library`- 我怎样才能添加其他的？！

这些链接有点帮助，但没有解决我的问题：

[https://stackoverflow.com/a/12892508/1370465](https://stackoverflow.com/a/12892508/1370465)

[http://www.ibm.com/developerworks/library/os-eclipse-jsdt/](http://www.ibm.com/developerworks/library/os-eclipse-jsdt/)

[http://marketplace.eclipse.org/content/jsdt-jquery#.UVB0clfAm2U](http://marketplace.eclipse.org/content/jsdt-jquery#.UVB0clfAm2U)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T18:43:10.970

用户库表示由用户选择并通过用户库首选项页面预设的 JavaScript 文件集。

![用户库首选项页面 (Juno SR2)](../Images/bfccd399d9b2a68a7871f124ba3b8c60.png)

其他一切都由插件提供。

# html - 使用 CSS 动画制作 div 高度的问题

> ID：15620303
> 
> 赞同：0
> 
> 时间：2013-03-25T16:46:52.587
> 
> 标签：html, css, css-animations

我试图让一个 div 在加载时进行动画处理，从 0px 高缩放到它的全高。这是我目前在 Chrome 中开发的相关 CSS，所以我只有 -webkit 前缀：

```
#teaserbar {
  width: 100%;
  overflow: hidden;
  background-color: #333;
  -webkit-animation-name: barAppear;
  -webkit-animation-duration: 3s;
}

@-webkit-keyframes barAppear {
  from {
    height: 0;
  }
  to {
    height: auto;
  }
} 
```

以及相关的 HTML：

```
<div id="teaserbar">
  <div class="container">
    <div class="sixteen columns clearfix">
      <p><a href="#jumper">Lorem ipsum dolor sit amet! &#8681;</a></p>
    </div>
  </div>
</div> 
```

我在让动画真正起作用方面几乎没有成功——起初我认为这样缩放高度可能是一个问题，但我也没有成功为 div 的背景颜色设置动画。如果有人认为它可能有助于解决我的问题，我可以提供完整的匿名来源。

有什么建议么？我觉得我一定错过了一些相当明显的东西，因为我过去曾让 CSS 动画顺利工作。

**编辑：**根据 Mr_Green 的建议做了一个小提琴，可在[http://jsfiddle.net/XYfE9/获得](http://jsfiddle.net/XYfE9/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T17:00:46.527

正如其他人在评论中指出的那样，CSS 动画似乎不支持使用高度值`auto`，一种解决方案是改用固定高度。

如果需要支持动态高度，可以使用 jQuery 测量高度，然后将测量的高度应用于动画。

一种可能的方法是在`#teaserbar`. 将容器设置为测量的高度，并为动画使用 0% 和 100% 的开始值和结束值。对于固定高度容器中的元素，使用 0% 和 100% 的快速测试是成功的。不确定此解决方案是否会出现页面布局问题，但可能有其他方法可以利用测量的高度，但不会这样做。

**演示**   （仅针对 Webkit 浏览器）

*   [固定高度的容器](http://jsfiddle.net/Matt_Coughlin/LPKce/2/)   （没有 jQuery）
*   [动态高度容器](http://jsfiddle.net/Matt_Coughlin/HmXH5/)   （使用 jQuery）

**HTML**

```
<div id="container">
    <div id="teaserbar">
        <p><a href="#jumper">Lorem ipsum dolor sit amet! &#8681;</a></p>
    </div>
</div> 
```

**CSS**

```
@-webkit-keyframes barAppear {
    from {
        height: 0%
    }
    to {
        height: 100%;
    }
} 
```

**jQuery**

```
$(document).ready(function(){
    $('#container').height( $('#teaserbar').height() );
}); 
```

# ios - 监控重大位置变化，应用程序关闭 GPS 信号（箭头）

> ID：15620304
> 
> 赞同：4
> 
> 时间：2013-03-25T16:46:57.323
> 
> 标签：ios, iphone, gps, location

首先我希望不要重复任何话题，在问之前我已经在互联网上阅读了很多时间。

我正在为 iOS => 5 开发一个应用程序，我需要获取用户位置，但我并不总是需要一个非常准确的位置，所以当应用程序进入后台时，我将正常位置模式更改为显着位置更改以及何时应用程序进入前台我停止了重要的位置更改模式并恢复正常的位置模式，一切都很好，

我的问题是当应用程序进入后台模式甚至用户杀死应用程序时，GPS信号（紫色箭头）仍然出现，即使在重新启动设备后，唯一让它消失的方法是卸载或禁用当应用程序进入后台时，位置会发生重大变化，但是当用户进入后台模式时，我需要这种模式工作，也许在应用程序被杀死时不需要。

我不知道当用户杀死应用程序时如何停止服务......因为如果您启用了多任务，则不会调用事件“applicationWillTerminate”。

我的主要原因是我不希望紫色箭头总是出现，即使应用程序被杀死也是因为我不希望用户认为应用程序正在耗尽电池......所以用户不希望安装应用程序。

第一个问题：如果为应用启用了显着位置更改，即使应用被杀死，紫色箭头总是出现是否正常？

第二个问题：有什么办法可以改变这一点，至少在应用程序被杀死以隐藏紫色箭头时停止服务？

谢谢你们。如果有问题，对不起我的英语。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T11:37:15.837

经过几天的研究以确定这项服务，似乎没有办法在没有顶部栏中的箭头的情况下使用背景中的重大位置变化。我一直在测试不同的应用程序并通过互联网阅读，但没有什么可以解决这个问题。

唯一的“解决方法”是在应用程序中禁用多任务模式，并在“applicationWillTerminate”事件中禁用重要的位置更改，但没有意义......我总是丢失背景位置，不仅当应用程序被杀死......所以没有用。

这很糟糕......是一项非常好的服务，可以节省电池电量，但作为用户和开发人员，我不希望应用程序即使在应用程序被杀死后也总是出现这个图标，作为开发人员，我不希望人们卸载出于这个原因，作为普通用户，我不知道这个图标是什么意思，如果是正常的 GPS 或重要的位置发生变化，这意味着什么……如果我的电池正在耗尽。

在后台任务中获取位置但对电池有很大影响的另一种选择....

我希望苹果在未来的版本中解决这个问题......添加至少一个新箭头或仅在新位置到达时显示，而不是始终显示或在应用程序被杀死时允许弯腰。

所有这些都在 iOS - 6.1 上进行了研究

谢谢大家。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T17:01:34.287

当您使用重要的位置更改服务时，操作系统会保持您的应用程序运行。如果应用程序在后台并被杀死，操作系统会重新启动它，因此紫色箭头将始终显示。当检测到新位置时，应用程序将重新启动。从文档：

> 如果您保持此服务运行并且您的应用随后被暂停或终止，则该服务会在新的位置数据到达时自动唤醒您的应用。在唤醒时，您的应用程序将进入后台并给予少量时间来处理位置数据。...要停止重大更改位置服务，请调用该`stopMonitoringSignificantLocationChanges`方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T17:05:57.437

嗯，有趣。我刚刚看到另一个应用程序的问题 - 看到箭头仍然处于活动状态让我想禁用该应用程序的位置更新，所以问题是真实的。我能想到的最好的事情是有某种计时器在一定时间后禁用位置监控，如果这适合您的应用程序。

# android - 设置文本后，Android TextSwitcher 无法换行内容宽度

> ID：15620310
> 
> 赞同：11
> 
> 时间：2013-03-25T16:47:14.643
> 
> 标签：android, android-layout

我在设置文本时使用 TextSwitcher 来淡入淡出动画。但是在更改文本时按其宽度包装内容存在一些问题。

以下是我的 TextSwitched xml：

```
<TextSwitcher
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_alignParentRight="true"
                            android:layout_centerVertical="true"
                            android:layout_marginLeft="5dp"
                            android:layout_marginRight="5dp"
                            android:background="#ffffff"
                            android:paddingBottom="1dp"
                            android:paddingLeft="7dp"
                            android:paddingRight="10dp"
                            android:paddingTop="1dp" >

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:ellipsize="end"
                                android:maxLines="1"
                                android:scrollHorizontally="true"
                                android:textAppearance="?android:attr/textAppearanceSmall"
                                android:textColor="@android:color/white" />

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:ellipsize="end"
                                android:maxLines="1"
                                android:scrollHorizontally="true"
                                android:textAppearance="?android:attr/textAppearanceSmall"
                                android:textColor="@android:color/white" />
                        </TextSwitcher> 
```

我有字符串列表，当我从长单词（例如“Hello World”）更改为“World”时，文本切换器不会包装字符串“World”的宽度，而是保持“Hello World”单词的宽度.

简而言之，对于最长单词的最大宽度，宽度保持固定。

请推荐！！！

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-26T12:24:40.857

默认情况下，子类的 `ViewAnimator`大小将调整为最大的子类。

为避免这种情况，请尝试添加`android:measureAllChildren="false"`到您的`TextSwitcher`

# php - 带有喜欢和评论计数的状态消息

> ID：15620313
> 
> 赞同：0
> 
> 时间：2013-03-25T16:47:31.757
> 
> 标签：php, facebook-graph-api, facebook-fql

我想获取用户最喜欢的状态。我已经检查了 FQL 文档。我可以在特定时间获得状态。但是，我无法使用以下代码段找到用户最喜欢的状态

```
SELECT status_id FROM status WHERE uid = me() ORDER BY status_id DESC LIMIT 1 
```

我无法为每个状态 id 循环评论或喜欢表以找到最喜欢的状态。所以我想我在 FQL 中遗漏了一些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T17:43:46.180

您无法使用`status`表格获得喜欢的信息。请改用[`stream`](https://developers.facebook.com/docs/reference/fql/stream)表格。A `type`of 46 将结果限制为仅状态更新。

```
SELECT message, description, post_id, likes FROM stream 
 WHERE source_id=me() AND type=46 ORDER BY likes.count DESC LIMIT 100 
```

# android - Android：IllegalArgumentException：API 17 中的“组件类 X 不存在”（API 8 中没有崩溃）

> ID：15620316
> 
> 赞同：6
> 
> 时间：2013-03-25T16:47:40.223
> 
> 标签：android, illegalargumentexception, android-2.2-froyo

我的模拟器：

![模拟器](../Images/68e9a4b4a763f434b7e578402b5dd414.png)

当我启动平板电脑模拟器时，我得到：

```
FATAL EXCEPTION: main
java.lang.IllegalArgumentException: Component class TriggerMonitoringBootReceiver does not exist in di.k23b.hw3
    at android.os.Parcel.readException(Parcel.java:1429)
    at android.os.Parcel.readException(Parcel.java:1379)
    at android.content.pm.IPackageManager$Stub$Proxy.setComponentEnabledSetting(IPackageManager.java:2561)
    at android.app.ApplicationPackageManager.setComponentEnabledSetting(ApplicationPackageManager.java:1250)
    at di.k23b.hw3.receivers.TriggerMonitoringBootReceiver.enable(TriggerMonitoringBootReceiver.java:81)
    at di.k23b.hw3.receivers.TriggerMonitoringBootReceiver.enable(TriggerMonitoringBootReceiver.java:86)
    at di.k23b.hw3.activities.SettingsActivity.onSharedPreferenceChanged(SettingsActivity.java:192)
    at android.app.SharedPreferencesImpl$EditorImpl.notifyListeners(SharedPreferencesImpl.java:475)
    at android.app.SharedPreferencesImpl$EditorImpl.apply(SharedPreferencesImpl.java:385)
    at android.preference.Preference.tryCommit(Preference.java:1349)
    at android.preference.Preference.persistBoolean(Preference.java:1615)
    at android.preference.TwoStatePreference.setChecked(TwoStatePreference.java:83)
    at android.preference.TwoStatePreference.onClick(TwoStatePreference.java:69)
    at android.preference.Preference.performClick(Preference.java:949)
    at android.preference.PreferenceScreen.onItemClick(PreferenceScreen.java:215)
    at android.widget.AdapterView.performItemClick(AdapterView.java:298)
    at android.widget.AbsListView.performItemClick(AbsListView.java:1100)
    at android.widget.AbsListView$PerformClick.run(AbsListView.java:2749)
    at android.widget.AbsListView$1.run(AbsListView.java:3423)
    at android.os.Handler.handleCallback(Handler.java:725)
    at android.os.Handler.dispatchMessage(Handler.java:92)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:5041)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
    at dalvik.system.NativeStart.main(Native Method) 
```

当我启动 froyo 模拟器时，一切都很好（**编辑**：不，不是 - 接收器未启用但仍然***没有崩溃***）。
这是一个已知问题还是什么？

显现 ：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="di.k23b.hw3"
    android:permission="android.permission.RECEIVE_BOOT_COMPLETED"
    android:versionCode="1"
    android:versionName="1.0" >
    <uses-sdk android:minSdkVersion="8" android:targetSdkVersion="17" />
    <application android:allowBackup="true" android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" android:theme="@style/AppTheme" >
        <activity
            android:name="di.k23b.hw3.activities.MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="di.k23b.hw3.activities.SettingsActivity"
            android:label="@string/title_activity_settings" >
        </activity>
        <receiver
            android:name="di.k23b.hw3.receivers.TriggerMonitoringBootReceiver"
            android:enabled="false" >
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED" />
            </intent-filter>
        </receiver>
        <receiver
            android:name="di.k23b.hw3.receivers.BatteryMonitoringReceiver"
            android:enabled="false"/>
    </application>
</manifest> 
```

接收器的相关部件（WIP！）：

```
private static void enable(Context context, boolean enable, String className) {
    PackageManager pacman = context.getPackageManager();
    final ComponentName componentName = new ComponentName(context, className);
    final int state = (enable) ? PackageManager.COMPONENT_ENABLED_STATE_ENABLED
            : PackageManager.COMPONENT_ENABLED_STATE_DISABLED;
    pacman.setComponentEnabledSetting(componentName, state,  // line 81
            PackageManager.DONT_KILL_APP);
}

public static void enable(Context baseContext, boolean enable) {
    enable(baseContext, enable,                 // line 86
            TriggerMonitoringBootReceiver.class.getSimpleName());
} 
```

在 SettingsActivity 中：

```
@Override
public void onSharedPreferenceChanged(SharedPreferences sp, String key) {
    if (MASTER_ENABLE.equals(key)) {
        TriggerMonitoringBootReceiver.enable(getBaseContext(),        // line 192
                sp.getBoolean(key, false));
        Toast.makeText(getApplicationContext(),
                "CB: " + sp.getBoolean(key, false), Toast.LENGTH_SHORT)
                .show();
    }
} 
```

* * *

***编辑***：现在一切都清楚了，使用`ComponentName(Context pkg, Class<?> cls)`- 至于 API 的区别：

> 如果给定的组件类名称在应用程序的清单中不存在，则调用`PackageManager.setComponentEnabledSetting`现在将抛出一个。`IllegalArgumentException`-[来自 Android 文档](https://developer.android.com/reference/android/os/Build.VERSION_CODES#JELLY_BEAN)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T17:41:02.193

```
TriggerMonitoringBootReceiver.class.getSimpleName(); 
```

和包装

```
PackageManager pacman = context.getPackageManager(); 
```

一起给

```
di.k23b.hw3.TriggerMonitoringBootReceiver 
```

所以你在类名中缺少“/receivers/”文件夹前缀

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-30T05:12:24.217

只是总结了这个线程中已经存在的信息。

使用构造函数 `ComponentName(Context pkg, Class<?> cls)`。

此外，需要在清单中指定组件名称。请参阅[此链接](https://developer.android.com/reference/android/os/Build.VERSION_CODES.html)中的果冻豆。
`Calls to PackageManager.setComponentEnabledSetting will now throw an IllegalArgumentException if the given component class name does not exist in the application's manifest.`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-02T07:09:49.507

如果您使用[AndroidAnnotations](https://github.com/excilys/androidannotations)，请改用重写的类名。

```
// CORRECT class definition.
ComponentName receiver = new ComponentName(context, NotificationPublisher_.class); 
```

但，

```
// THIS WILL GIVE YOU CRASH.
ComponentName receiver = new ComponentName(context, NotificationPublisher.class); 
```

# mysql - 将现有表从 MyISAM 移动到 InnoDB，哪个更快？

> ID：15620322
> 
> 赞同：2
> 
> 时间：2013-03-25T16:47:54.257
> 
> 标签：mysql, relational-database, innodb, myisam, storage-engines

一个数据库已经有多达 25-30 个表并且都是**MyISAM**。这些表中的大多数都相互关联，这意味着许多查询使用 ID 上的连接并检索数据。

其中一个表包含**7-10 百万**条记录，如果我想执行搜索或更新甚至检索所有数据，它会变得很慢。现在我向我的老板提出了一个解决方案，说将表转换为 InnoDB 可能会提供更好的性能。

我还解释了 InnoDB 的好处：

1.  由于我们无论如何都在键上连接多个表并且它们是相关的，因此最好使用外键并拥有可以避免**Orphan Rows**的关系数据库。我在其中一张大表中发现了大约**10-15k**孤立行，不得不手动删除它们。

2.  支持事务，我们不时执行大更新，如果其中一个失败，我们必须用备份的表替换整个表并再次运行更新以确保所有查询都已执行。使用 InnoDB，如果查询 2 失败，我们可以恢复查询 1 的任何更改。

现在我从老板那里得到的回应是我需要证明 InnoDB 会比 MyISAM 运行得更快。我的问题是，以上两件事不会通过消除孤立行来提高应用程序本身的速度吗？

一般来说，MyISAM 比 InnoDB 快吗？

**注意：使用 MySQL 5.5**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T16:56:13.077

您还应该向您的老板提及，对于具有读/写负载的大型表，您从 InnoDB 获得的最大好处可能是 - 您获得了行级锁定而不是表级锁定。在您看到很多等待释放表锁的情况下，这对应用程序来说可能是一个巨大的性能优势。

当然，说服老板的最好方法是证明这一点。复制您的大表并放置在测试数据库中。在 MyISAM 中制作一个版本的数据，在 InnoDB 中制作一个版本。然后使用与当前数据库读/写活动近似的负载组合对其进行负载测试。自己找出是否更好。

刚刚更新了您在 5.5 上的评论。在 5.5 中，使用 InnoDB 很容易。MyISAM 引擎在过去几年中基本上没有任何改进，开发工作一直围绕 InnoDB。InnoDB 是未来首选的 MySQL 引擎。

# android - 打开 xml 页面时遇到问题

> ID：15620324
> 
> 赞同：0
> 
> 时间：2013-03-25T16:48:02.147
> 
> 标签：android, xml, buttonclick

我创建了两个 java 类和两个 xml 页面。我试图在一个班级的点击按钮时，打开另一个班级。打开后，memo.xml 页面显示空白。请参阅以下代码。请帮我

我的 login.java 页面：

```
package quesansw.the1;
import android.app.Activity;
import android.app.Dialog;
import android.content.Intent;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;
import android.text.Editable;
import android.view.View;
import android.view.Window;
import android.view.WindowManager;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class Login extends Activity{

    SQLiteDatabase db;
    int z,i=0;
    String[] arr = new String[3];
public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        db = openOrCreateDatabase("mydatabase.db",
                SQLiteDatabase.CREATE_IF_NECESSARY, null);

        final Dialog d1 = new Dialog(this);
        Window window = d1.getWindow();
        window.setFlags(WindowManager.LayoutParams.FLAG_BLUR_BEHIND,
                WindowManager.LayoutParams.FLAG_BLUR_BEHIND);

        d1.setTitle("Login");

        d1.setContentView(R.layout.login);

        d1.show();
        Button registerques1 = (Button) d1.findViewById(R.id.registerques1);
        EditText ques = (EditText) d1.findViewById(R.id.question);

        Cursor cur= db.rawQuery("select * from questions1",null);
        cur.moveToNext();
        System.out.println(cur.getString(0));
        System.out.println(cur.getString(1));
        ques.append(cur.getString(0));

        Cursor c = db.rawQuery("SELECT * from questions1", null);

        if (c != null ) {
            if  (c.moveToFirst()) {
                do {
                    String firstName = c.getString(c.getColumnIndex("question"));
                    String Name = c.getString(c.getColumnIndex("answer"));

                    arr[i]=firstName;
                    i++;
                    }while (c.moveToNext());
            } 
        }

        for(z=0;z<2;z++)
        {
            registerques1.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v)
            {

                if(z == 2)
                {
                Cursor cur= db.rawQuery("select * from questions1",null);
                cur.moveToNext();
                EditText ques = (EditText) d1.findViewById(R.id.question);
                EditText ans = (EditText) d1.findViewById(R.id.answer);
                Editable newTxt=(Editable)ans.getText(); 
                String str = newTxt.toString();
                int l=str.length();
                int l1=cur.getString(1).length();
                int l2=l-l1;
                ques.setText(arr[0]);
                ans.setText("");
                if(l2 == 0)
                {
                    z=5;
                }
                }

                if(z == 5)
                {
                    EditText ques = (EditText) d1.findViewById(R.id.question);
                    ques.setText(arr[1]);
                    Cursor cur= db.rawQuery("select * from questions1 where question='"+arr[1]+"' ",null);
                    cur.moveToNext();
                    //ques.setText();

                    EditText ans = (EditText) d1.findViewById(R.id.answer);
                    System.out.println("------"+ans.getText());
                    Editable newTxt=(Editable)ans.getText(); 
                    String str = newTxt.toString();
                    int l=str.length();
                    int l1=cur.getString(1).length();
                    int l2=l-l1;
                    ques.setText(arr[1]);
                    ans.setText("");
                    /*ques.setText(arr[2]);
                    ans.setText("");*/
                    if(l2 == 0)
                    {
                        /*Intent intent = new Intent(getBaseContext(), Memo.class);
                        startActivity(intent);*/
                        z=6;
                    }

                }

                if(z == 6)
                {
                    EditText ques = (EditText) d1.findViewById(R.id.question);
                    ques.setText(arr[2]);
                    Cursor cur= db.rawQuery("select * from questions1 where question='"+arr[2]+"' ",null);
                    cur.moveToNext();

                    EditText ans = (EditText) d1.findViewById(R.id.answer);
                    System.out.println("------"+ans.getText());
                    Editable newTxt=(Editable)ans.getText(); 
                    String str = newTxt.toString();
                    int l=str.length();
                    int l1=cur.getString(1).length();
                    //System.out.println(l+l1);
                    int l2=l-l1;
                    ques.setText(arr[2]);
                    ans.setText("");
                    if(l2 == 0)
                    {
                        System.out.println("memo-----");
                        Intent intent = new Intent(getBaseContext(), Memo.class);
                        startActivity(intent);
                    }

                }

            }
        });

        }

}
} 
```

登录.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:layout_width="fill_parent"
  android:layout_height="match_parent">

<TextView android:text="Question1" android:id="@+id/TextView01" android:layout_width="wrap_content" android:layout_height="wrap_content"></TextView>
<EditText android:id="@+id/question" android:layout_width="match_parent" android:layout_height="wrap_content" android:text=""></EditText>
<EditText android:id="@+id/answer" android:layout_width="match_parent" android:layout_height="wrap_content" android:text=""></EditText>

<Button android:id="@+id/registerques1" android:layout_width="wrap_content" android:text="registerques" android:layout_height="wrap_content"></Button>

</LinearLayout> 
```

备忘录.java

```
package quesansw.the1;

import android.app.Activity;
import android.app.Dialog;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.Window;
import android.view.WindowManager;
import android.widget.Button;

public class Memo extends Activity{

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        final Dialog d1 = new Dialog(this);
        Window window = d1.getWindow();
        window.setFlags(WindowManager.LayoutParams.FLAG_BLUR_BEHIND,
                WindowManager.LayoutParams.FLAG_BLUR_BEHIND);

        d1.setTitle("Register Questions");

        d1.setContentView(R.layout.memo);

        Button view = (Button) d1.findViewById(R.id.view);
        view.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v)
            {
                /*Intent intent = new Intent(getBaseContext(), View.class);
                startActivity(intent);*/
            }
    });
}
} 
```

备忘录.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:layout_width="fill_parent"
  android:layout_height="match_parent">

<TextView android:text="Titile" android:id="@+id/TextView01" android:layout_width="wrap_content" android:layout_height="wrap_content"></TextView>
<EditText android:id="@+id/question" android:layout_width="match_parent" android:layout_height="wrap_content" android:text=""></EditText>
<TextView android:text="Text" android:id="@+id/TextView01" android:layout_width="wrap_content" android:layout_height="wrap_content"></TextView>
<EditText android:minLines="6" android:maxLines="10" android:id="@+id/answer" android:layout_width="match_parent" android:layout_height="wrap_content" android:text=""></EditText>
<TableLayout android:layout_height="wrap_content"
        android:layout_width="wrap_content" android:layout_gravity="center"
        android:stretchColumns="*">
<TableRow>
<Button android:id="@+id/add" android:layout_width="wrap_content" android:text="ADD" android:layout_height="wrap_content"></Button>
<Button android:id="@+id/view" android:layout_width="wrap_content" android:text="VIEW" android:layout_height="wrap_content"></Button>
</TableRow>
</TableLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T16:50:36.090

您还没有为您的对话框调用[show()](http://developer.android.com/reference/android/app/Dialog.html#show%28%29)方法。

在方法`d1.show()`的末尾添加`onCreate()`

# putty - PuTTy 能否与 ANSI/VT100 转义序列一起正常工作？

> ID：15620325
> 
> 赞同：1
> 
> 时间：2013-03-25T16:48:04.293
> 
> 标签：putty, ansi-escape, vt100, 68hc12

我正在为飞思卡尔 MC9S12C32 处理器的 HC12 汇编中的一个类编写程序。我使用 PuTTy 作为通过串行（-over-USB）连接到设备的终端。对于这个分配，我们应该使用 VT100/ANSI 转义序列将光标移动到任意位置并写入当前时间，然后返回它，以便用户可以键入并让他们的输入回显。

我正在使用以下序列来保存光标、移动它并返回它。然而由于某种原因，PuTTy 只是将光标放在左上角并且无法返回它。

```
ESC         EQU   $1B ; ASCII ESC
SAVECUR     EQU   $37 ; ASCII 7
RESTCUR     EQU   $38 ; ASCII 8

SaveCursor  PSHA
            LDAA  #ESC             ; Use Escape Sequence
            JSR   putchar
            LDAA  #'['
            JSR   putchar
            LDAA  #SAVECUR         ; To save cursor location
            JSR   putchar
            PULA
            RTS

GotoClkPos  PSHA
            LDAA  #ESC             ; Move Cursor
            JSR   putchar
            LDAA  #'['
            JSR   putchar
            LDAA  #$05             ; To Row 5
            JSR   putchar
            LDAA  #';'
            JSR   putchar
            LDAA  #$05             ; Column 5
            JSR   putchar
            LDAA  #'H'
            JSR   putchar
            PULA
            RTS

RestCursor  PSHA
            LDAA   #ESC            ; Use Escape Sequence
            JSR    putchar
            LDAA   #'['
            JSR    putchar
            LDAA   #RESTCUR        ; To Restore Cursor
            JSR    putchar
            PULA
            RTS 
```

我是否对转义序列进行了错误编码，或者 PuTTy 没有按我的预期处理它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:53:17.910

你的转义序列是错误的。您应该从 SaveCursor 和 RestCursor 中删除“[”（保存光标=ESC+'7'，恢复=ESC+'8'）。不过，GotoClkPos 似乎还可以。

PuTTY 可以很好地处理 VT100 命令。尽管我无法使某些命令正常工作，例如隐藏光标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-27T18:07:48.350

Putty*无法*处理所有 VT100 的权利。它为 F1/F2/F3 以外的所有功能键发送垃圾，并且不能正确处理各种其他接口。*我还没有找到一个真正能做到*的好程序，所以我很高兴我有几个愚蠢的终端在乱跑（但这有多愚蠢？）

# azure - 为什么 Web 和辅助角色实例的定价高于 Windows 虚拟机？

> ID：15620331
> 
> 赞同：-1
> 
> 时间：2013-03-25T16:48:21.167
> 
> 标签：azure

我希望将现有应用程序迁移到云端。它是一个与 sql server 数据库通信的 ASP.Net 应用程序。

据我所知，我有两个选择：

Web 和辅助角色实例以及 Windows 虚拟机。

Web 和 Worker 角色实例的价格高于 Windows 虚拟机 - 我不确定这是为什么？

为什么要在 Windows 虚拟机上使用 Web 和工作角色实例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T17:33:52.367

虚拟机目前处于*预览*状态。因此，运营成本被打折。请参阅[此处](http://www.windowsazure.com/en-us/pricing/details/#header-3)了解预览版与 GA（通用版）定价。您会看到，在预览期间，虚拟机运行 0.08 美元/核心/小时，而在 GA 中运行 0.115 美元/小时。这解释了与云服务 Web/工作人员角色（GA 中而不是预览版）相比成本更低。

至于在虚拟机上使用 Web/Worker 的原因，这可能已经在其他地方得到了回答（但仍然值得一个单独的问题）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T17:04:30.007

Web 和工作角色属于平台即服务 (PaaS) 保护伞，而 Azure 虚拟机（目前处于预览阶段）提供基础架构即服务 (IaaS) 解决方案。Web 和工作角色提供了一个平台，您可以直接从您的开发环境将您的 .NET 应用程序部署到该平台。Web 和工作角色自动处理 IIS 的配置、端点的打开以及跨多个实例的应用程序的负载平衡。

另一方面，虚拟机提供了一个基本的 Server 2008 系统，您可以对其进行配置以满足您的要求。如果您需要运行在 IIS 中不易部署的自定义应用程序，则最好使用 VM。但实际上，您可以在为基础架构付费时使用虚拟机做您想做的事情，另一方面是您要处理管理基础架构带来的所有配置开销。

如果您正在运行一个 Web 应用程序，我会使用 Web 角色，它可能比 VM 更昂贵，但在幕后进行了大量工作，可以抽象出开发、部署、维护和扩展 Web 的许多问题应用。此外，如果您需要具有自动故障转移功能的“高可用性”解决方案，具有两个实例的 Web 角色会附带 99.95% 的 SLA。

# c# - 图表控件删除标签箭头

> ID：15620333
> 
> 赞同：2
> 
> 时间：2013-03-25T16:48:31.940
> 
> 标签：c#, charts

当旋转角度为零时，一切看起来都很好，但是当我从 60 度开始旋转它时，出现标签箭头，如何删除标签箭头？谢谢！

旋转 90 度时标签的外观 ![旋转 90 度时标签的外观](../Images/0429f29d9d4a28b4c37c3d6cf4aecf38.png)

我要删除的箭头 ![我要删除的箭头](../Images/1fa335f3b9de89680b18680067a9ee95.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-08-27T09:50:56.170

假设您使用 SmartLabels，您可以像这样控制 Caps：

```
chart1.Series[0].SmartLabelStyle.CalloutLineAnchorCapStyle = LineAnchorCapStyle.None; 
```

# machine-learning - 我将如何从这些数据中构建决策树？

> ID：15620334
> 
> 赞同：-2
> 
> 时间：2013-03-25T16:48:35.720
> 
> 标签：machine-learning

我正在做一份考试过去的试卷。我需要使用 ID3 算法来预测披萨是否好吃。我计算了每个类别的值如下：

配料 = 0.459，辣味 = 0.6，地壳 = 0.6666，温度 = 0.87399

但是，我现在正忙于构建决策树。目前我将“Toppings”作为根节点，但我在第二级找不到下一个拆分，有没有人知道如何正确处理这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T23:43:19.663

你的问题需要更清楚。你需要给我们正样本和负样本的数量。“计算值”是什么意思。这些价值观是什么？这些是信息增益吗？告诉我们更多关于您正在处理的数据类型。（*部分标记？连续？*）。“进一步拆分”是什么意思？你的属性总数是多少？

[http://www.csse.monash.edu.au/courseware/cse5230/2004/assets/decisiontreesTute.pdf](http://www.csse.monash.edu.au/courseware/cse5230/2004/assets/decisiontreesTute.pdf)

上面的 URL 对基于 Tom Mitchell 的机器学习书的决策树有很好的解释。

# api - 查询 Foursquaure Venue 照片 API 而不识别组。错误还是设计？

> ID：15620335
> 
> 赞同：0
> 
> 时间：2013-03-25T16:48:45.430
> 
> 标签：api, photo, foursquare, photos

我试图在代表场地的 Foursquare API 上获得一张好的照片结果。

目前我正在使用：

[https://api.foursquare.com/v2/venues/VENUE_ID/photos?group=venue&limit=1](https://api.foursquare.com/v2/venues/VENUE_ID/photos?group=venue&limit=1)

这可行，但似乎过滤的照片始终是该场地最近添加的照片，这不一定总是最好的。似乎也没有任何不同（通过评级等）。我希望出现的照片始终是场地的foursquare网站上的第一张照片结果，无论是什么。

我在玩这个后缀，我发现 if 而不是

照片？group=venue&limit=1

我只是把

照片？&limit=1

我会得到我正在寻找的结果（该场地网站上出现的第一张照片）。但是，在文档中它说需要具有组值。显然，我不想根据错误设置行为，但它确实有效。

那么，这是一个错误吗？或者只是说需要 group 的文档有问题。任何帮助，将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T18:29:21.613

这可能是您遇到的一个错误，但要获取场地页面上的第一张照片，您可以查询场地详细信息端点，然后在场地结果中使用照片对象：[https ://developer.foursquare.com/docs/探索#req=venues/40a55d80f964a52020f31ee3](https://developer.foursquare.com/docs/explore#req=venues/40a55d80f964a52020f31ee3)

# sharepoint - Sharepoint 2010：如何以编程方式使用格式更新 RTF 列

> ID：15620337
> 
> 赞同：0
> 
> 时间：2013-03-25T16:48:48.733
> 
> 标签：sharepoint, sharepoint-2010, rtf

我在列表中有一个 RTF 文本字段。用户可以通过多种方式编辑和格式化该栏目，并且在视图中也以这种格式显示出来，非常漂亮。

但是，是否可以以某种方式以编程方式更新 RTF 列 - 例如在工作流程中？我的想法是使用 RTF 列来创建格式化报告。

我已经创建了一个自动更新 RTF 列的工作流，但到目前为止，我只能创建纯文本。没有格式，没有新行等 --- 有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T17:16:09.277

为您的内容使用 html 标签。

**编辑：**

```
item["RTF_Field"] = "<b>this is a strong text</b>"; 
```

# c# - asp.NET ajax 在处理过程中做部分返回

> ID：15620338
> 
> 赞同：1
> 
> 时间：2013-03-25T16:48:49.217
> 
> 标签：c#, asp.net, asp.net-ajax

这是我的问题：我有一个更新面板，里面有一个 asp:TextBox 和一个 onTextChanged 事件。在此过程中，由于进度模板，会显示一个 loader.gif。

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
<ContentTemplate>
    <asp:TextBox ID="tboxEmailDegrade" runat="server" CssClass="cadreTexteRediger" MaxLength="250"
        AutoPostBack="True" OnTextChanged="tboxEmailDegradeOnTextChanged"></asp:TextBox>
    <asp:Image ID="imgVerifEmailFalse" runat="server" ImageUrl="../../Charte/images/Avis/Formulaire/ko.gif"
        Visible="false" style="margin-left: 4px"/>
    <asp:Image ID="imgVerifEmailTrue" runat="server" ImageUrl="../../Charte/images/check.png"
        Visible="false" style="margin-left: 4px"/>
    <input id="HidStatutValide" type="hidden" value="0" runat="server" />
    <asp:UpdateProgress ID="UpdateProgress1" runat="server">
        <ProgressTemplate>
            <img class="iconeValdation" runat="server" src="../../Charte/images/ajax-loader.gif" alt="Processing" style="margin-left: 4px; float:left" />
        </ProgressTemplate>
    </asp:UpdateProgress>
</ContentTemplate>
<Triggers>
    <asp:AsyncPostBackTrigger ControlID="tboxEmailDegrade" />
</Triggers> 
```

在该过程中，我想隐藏另一个图像（在代码 imgVerifEmailTrue 或 imgVerifEmailFalse 中），但显然图像只会在过程结束时被隐藏，在回发之后。所以我有加载器和旁边的另一个图像。

是否可以在流程开始时进行部分回发以隐藏图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T17:03:03.013

您可以使用 ASP.NET AJAX JavaScript 轻松完成此操作。

隐藏[Sys.WebForms.PageRequestManager.getInstance().add_beginRequest(beginRequestHandler)中的按钮，并分别在](http://msdn.microsoft.com/en-us/library/bb397432%28v=VS.100%29.aspX)[Sys.WebForms.PageRequestManager.getInstance().add_endRequest(endRequestHandler)](http://msdn.microsoft.com/en-us/library/bb383810.aspx)事件中
再次显示它们。

正如 MSDN 所指出的，

**Sys.WebForms.PageRequestManager beginRequest 事件**

> 在异步回发处理开始并将回发请求发送到服务器之前引发。

**Sys.WebForms.PageRequestManager endRequest 事件**

> 在异步回发完成并将控制权返回给浏览器后引发。

# android - 使用 facebook SDK 设置和调试 android 安装跟踪

> ID：15620347
> 
> 赞同：0
> 
> 时间：2013-03-25T16:49:09.463
> 
> 标签：android, facebook, facebook-android-sdk

我们正在按照本指南在 android 上使用 Facebook SDK 设置广告。

[https://www.facebook-studio.com/fbassets/resource/71/MobileAppInstallAds_ProductSetupGuide.pdf](https://www.facebook-studio.com/fbassets/resource/71/MobileAppInstallAds_ProductSetupGuide.pdf)

那里有一行告诉您将以下内容添加到您的应用程序中：

```
Facebook fb=new Facebook(appId); 
fb.publishInstall(appContext) 
```

但是查看 Facebook SDK 代码，当您调用授权时（通过 autoPublishAsync 方法），它似乎会自动发送。

当我们调用授权时，它会调用 publishInstall，我们假设不需要这个额外的调用。（有人可以证实这一点吗？）

我们的一切都在 iOS 上运行，完美地报告了安装情况。然而，我们并没有看到像我们预期的那样多的 android 安装（尽管我们看到了一些——这意味着它在某种程度上是有效的）。

在调试应用程序时，将调用 publishInstall 方法并将安装发送到 facebook，但该方法的响应根本不会被解析或验证。所以大概它可能由于某种原因在生产中失败，我们永远不会知道。

是否有某个页面可以查看 android 安装以验证它在 FB 方面是否正常工作？或者是否有人对可能出现的问题或如何调试有任何其他建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:06:01.413

调用 Facebook.authorize 也会传递调用 publishInstall。但是，除非您为每个用户调用 Facebook.authorize（而不是仅在他们单击登录按钮时），否则您可能无法涵盖所有​​情况。

您还应该更新到新的 3.0.1 版本的 Android SDK（上周发布），它对 publishInstall 请求进行了更好的响应处理/缓存。

# ruby-on-rails - 不止一次拥有多个其他模型的模型

> ID：15620351
> 
> 赞同：0
> 
> 时间：2013-03-25T16:49:25.707
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我有一个**Movie**模型和一个**Person**模型。

电影模型应该有演员、作家和制片人组**。**

演员、作家和制片人是一群人，都来自同一个**Person**模型。

对此进行建模的最佳方法是什么？

谢谢。

编辑：每个人都可以同时是演员、作家和制片人。它们都具有相同的属性。

编辑2：我想做的是这样的：

```
Class Movie < ActiveRecord::Base
  attr_accessible :name, :image, :information, :duration, :director, etc...

  has_many :persons, as: :writers <-- (IDK if this is possible)
  has_many :persons, as: :producers <-- (IDK if this is possible)
  has_many :persons, as: :actors <-- (IDK if this is possible)
end
Class Person < ActiveRecord::Base
  attr_accessible :birthdate, :birthplace, :height, :information, :name, etc..
end 
```

并在电影模型中创建组，所以我可以这样称呼它们：

```
@writers = @movie.writers
@actors = @movie.actors
@producers = @movie.producers 
```

全部由 Person 对象组成，可以是 3 种类型中的任何一种。

一个人可以参与许多其他电影。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T19:03:31.083

鉴于您可以做的新信息

```
Class Movie < ActiveRecord::Base
  has_many :writers, :class_name => 'Person', :conditions => ['role = "writer"']
  has_many :producers, :class_name => 'Person', :conditions => ['role = "producer"']
  has_many :actors, :class_name => 'Person', :conditions => ['role = "actor"']
end 
```

:conditions 中的条件会有所不同，具体取决于您实现角色分配的方式。

您在这里拥有所有信息：

[http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T17:01:34.023

这完全取决于你的演员、作家和制片人的属性有多么不同。如果它们都具有相同的属性（或几乎相同的属性），您可以使用单表继承。将 Person 模型中的一个属性设为一个名为的属性`type`，这将触发 STI。

是否使用 STI 取决于您对数据库中空值的容忍度。如果演员、作家和制片人之间共享属性的数量很少，您最终会得到许多空值，并且为每个值设置不同的类可能会更好。

官方文档仅限于 STI，但我发现了一些有趣的博客文章，它们更详细地介绍了实现：

[http://blog.thirst.co/post/14885390861/rails-single-table-inheritance](http://blog.thirst.co/post/14885390861/rails-single-table-inheritance) [http://www.christopherbloom.com/2012/02/01/notes-on-sti-in-rails-3-0 /](http://www.christopherbloom.com/2012/02/01/notes-on-sti-in-rails-3-0/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T18:20:27.050

如果您不想要不同的模型，为什么不在您的人物（或电影）模型中添加一个职业列呢？假设它们具有几乎相同的属性，它们都可以由同一张表处理。您可以使用 multiple: true 来允许每人选择多个职业。

PS你能详细说明为什么你对这些职业使用单独的电影模型吗？

**编辑：**

如果你有很多职业并且一个人可以同时拥有多个职业，你可以考虑使用 has_many :through 关系。如：

```
class Person
  has_many :assignments
  has_many :professions, through: assignments
end

class Assignment
  belongs_to :person_id
  belongs_to :profession_id
end

class Profession
  has_many :assignments
  has_many :persons, through: assignments
end 
```

这样，您可以在必要时在连接模型中添加其他属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T18:57:01.600

假设所有角色都具有相同的属性，因此可以使用相同的类和模型。如果您想同时拥有多个角色，据我所知，最好的选择是在 Person 模型中使用属性角色。您可以使用 has_many 关联。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T17:00:59.147

使用 activerecord`:through`选项

[http://guides.rubyonrails.org/association_basics.html#the-has_many-through-association](http://guides.rubyonrails.org/association_basics.html#the-has_many-through-association)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-25T17:02:46.250

您可以使用[STI](http://blog.thirst.co/post/14885390861/rails-single-table-inheritance) - 单表继承。为此，您需要`type`在模型中具有属性，该属性`Person`将存储.`type``Person`

```
class Person < ActiveRecord::Base
end

class Actor < Person
end

class Writer < Person
end

class Producer < Person
end 
```

# java - 如果频率不同，LWJGL 无法更改显示

> ID：15620352
> 
> 赞同：0
> 
> 时间：2013-03-25T16:49:27.493
> 
> 标签：java, exception, fullscreen, lwjgl, frequency

使用 Windows 7 64 位计算机和支持不同刷新率的显示器：24hz、30hz、59hz、60hz。

我有一个小型 LWJGL 应用程序，将全屏显示模式设置为“1280 x 720 @60hz”

如果我当前的显示模式是“1920 x 1080 @30hz”并且我执行我的应用程序，我会得到一个 LWJGLException：

```
org.lwjgl.LWJGLException: Failed to set display mode (-2). 
```

如果我将我的应用程序更改为将全屏显示模式设置为“1280 x 720 @30hz”，它就可以完美运行。

我只能更改与当前显示模式具有相同频率的全屏显示模式。在这种情况下为 30 赫兹。

我知道这不是我的电脑也不是我的显示器，因为我尝试了一些可以改变频率的电子游戏，但它们并没有崩溃。

可能是什么问题呢？我尝试了许多代码来更改显示，它们都得到相同的 LWJGLException。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T17:17:48.513

[您可以通过调用GraphicsDevice.getDisplayModes()](http://docs.oracle.com/javase/6/docs/api/java/awt/GraphicsDevice.html#getDisplayModes%28%29)找到 Java 认为您的显示器支持的显示模式的完整列表。通常要求用户从此列表中进行选择，而不是假设支持特定的分辨率。如果确实要指定分辨率，则可以`DisplayMode.REFRESH_RATE_UNKNOWN`用作刷新率；然后它将选择显示器支持该分辨率的任何速率。

# hibernate - JTA 嵌套事务锁

> ID：15620353
> 
> 赞同：2
> 
> 时间：2013-03-25T16:49:28.207
> 
> 标签：hibernate, jboss, transactions, jta

**环境：**

我们有一个部署在 JBoss 4.2.3.GA 服务器中的应用程序，它使用 Hibernate 3.4 和 JTA 1.0。

有一个导入器创建或更新某些实体，然后导入一些数据。由于多种原因，大部分导入是在新事务中完成的，并且在每个事务中，在外部事务中创建/更新的实体可能会再次更新。

调用序列看起来像这样的伪代码：

服务1：

```
//container managed transaction T1 is started here
import() {    

  A a = ... ;//new or read from database
  if( isNew( a ) ) { 
     create(a);
  } else {
     update(a);
  }

  Service1 s = ...; //injected or looked up
  for( D d : someDataList ) {  
     //nested transaction T2 is started due to this call, T1 should be suspended
     s1.importData(d);   

     //nested transaction T2 should have been committed here
  } 
```

服务2：

```
 @TransactionAttribute(REQUIRES_NEW)
  importData(D d) {
    A a = ...; //get the corresponding A instance and update as needed
    update(a);
    //other stuff such as importing d
  } 
```

**问题：**

现在的问题是，我们最终会遇到多个事务试图锁定同一个表的竞争状况，但到目前为止，我们既无法重现问题，也无法确定真正的原因。

不过，我们有一些假设：

由于在 T1 期间更新了一些实体，因此事务获取了一些数据库锁。然后 T1 被挂起，因为 T2 已启动，而 T2 又尝试获取相同的数据库锁并因此被阻塞。T2 最终超时，然后 T1 可以正常完成并释放锁。

**可能的解决方案？：**

到目前为止，似乎只有一种可能的解决方案：将 T1 中的所有更新包装到另一个事务 T1* 中（可能完全跳过 T1）并让 T1* 和 T2 顺序运行。

如果业务案例允许这样做（我不确定，因为我自己没有实施该业务案例），这是否是一个理智的解决方案？

可能还有其他解决方案，如果有，请提供一些提示。但是，我对此表示怀疑，因为似乎 T1 必须在 T2 尝试获取锁之前释放锁，因此基本上使 T1 和 T2 顺序运行。

**问题**

综上所述，出现以下问题：

*   我们的假设是否正确，即 T1 是否持有 T2 也需要的锁并且因为它被挂起而无法释放？
*   我上面描述的解决方案是唯一的方法，还是有其他没有手动事务划分的方法？

感谢您阅读所有这些:)

**更新1：**

因为我不是代码的编写者，所以我也必须深入研究它。到目前为止，在 Hibernate 中没有任何显式锁定的提示，因此 AFAIK Hibernate 仅在写入数据库期间使用数据库锁。当数据库连接打开时。

我们正在使用自动刷新，因此在某些情况下，T1 可能会在 T2 尝试相同操作之前打开连接，但 T1 无法提交和关闭连接，因为它在 T2 提交之前被挂起。因此，数据库似乎由于 T1 的刷新而获得的锁在 T2 刷新之前也无法释放。

使用手动刷新不是解决方案，因为如果 T2 在 T1 之前提交，我们就会丢失更新，但是对实体的更改是相反的。我知道这是设计中的一个缺陷，我们需要修复它，但我也想确认我们的假设是正确的，以便提供一个合理的修复:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T18:19:58.770

我会尝试提供一些线索，

你说那个表被锁定了。我没看到你在做什么。默认情况下，Hibernate 不会获取任何锁。您需要明确告诉它这样做，[请参阅](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/transactions.html#transactions-locking). 即使在这里，您也不是在表上而是在单行上获得锁定。只有当您使用悲观锁定并且两个事务都需要锁定同一行时，您的假设才能成立。

如果你没有使用悲观锁，你应该在 T1 尝试提交时遇到乐观锁异常。因此，您的方案可能会导致两个事务都没有更新相同的对象。

如果不进行调试，并且不知道“创建”和“更新”中发生了什么，就很难回答您的问题。

# spring - 对于 web MVC Spring 应用程序应该 @Transactional 继续控制器或服务？

> ID：15620355
> 
> 赞同：17
> 
> 时间：2013-03-25T16:49:33.067
> 
> 标签：spring, service, controller, transactional

对于 WebApplicationContext，我应该将`@Transactional`注释放在控制器还是服务中？Spring 文档让我有点困惑。

这是我的 web.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
  <display-name>Alpha v0.02</display-name>
  <servlet>
    <servlet-name>spring</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>

  <servlet-mapping>
    <servlet-name>spring</servlet-name>
    <url-pattern>*.htm</url-pattern>
  </servlet-mapping>

  <servlet-mapping>
    <servlet-name>spring</servlet-name>
    <url-pattern>*.json</url-pattern>
  </servlet-mapping>

  <welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
  </welcome-file-list>
</web-app> 
```

这是我的 application-context.xml 定义了一个 Spring Dispatcher servlet：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:context="http://www.springframework.org/schema/context"
        xmlns:mvc="http://www.springframework.org/schema/mvc"
        xmlns:tx="http://www.springframework.org/schema/tx"
        xsi:schemaLocation="
            http://www.springframework.org/schema/tx
            http://www.springframework.org/schema/tx/spring-tx.xsd
            http://www.springframework.org/schema/beans    
            http://www.springframework.org/schema/beans/spring-beans.xsd
            http://www.springframework.org/schema/context 
            http://www.springframework.org/schema/context/spring-context.xsd
            http://www.springframework.org/schema/mvc 
            http://www.springframework.org/schema/mvc/spring-mvc.xsd">

    <context:annotation-config />
    <mvc:annotation-driven />
    <tx:annotation-driven />

    <context:component-scan base-package="com.visitrend" />

    <bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="prefix" value="/WEB-INF/jsp/"/>
        <property name="suffix" value=".jsp"/>
    </bean>

     <bean id="dataSource"  class="com.mchange.v2.c3p0.ComboPooledDataSource" destroy-method="close">
        <property name="driverClass" value="org.postgresql.Driver" />
        <property name="jdbcUrl" value="jdbc:postgresql://localhost:5432/postgres" />
        <property name="user" value="someuser" />
        <property name="password" value="somepasswd" />
    </bean>

    <bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="configLocation" value="classpath:test.hibernate.cfg.xml" />
    </bean>

    <bean id="transactionManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
      <property name="dataSource" ref="dataSource" />
      <property name="sessionFactory" ref="sessionFactory" />
    </bean>    
</beans> 
```

这是一个服务接口：

```
public interface LayerService {
    public void createLayer(Integer layerListID, Layer layer);
} 
```

这是一个服务实现：

```
@Service
public class LayerServiceImpl implements LayerService {

    @Autowired
    public LayerDAO layerDAO;

    @Transactional
    @Override
    public void createLayer(Integer layerListID, Layer layer) {
        layerDAO.createLayer(layerListID, layer);
    }
} 
```

这是我的控制器：

```
@Controller
public class MainController {

    @Autowired
    private LayerService layerService;

    @RequestMapping(value = "/addLayer.json", method = RequestMethod.POST)
    public @ResponseBody
    LayerListSetGroup addLayer(@RequestBody JSONLayerFactory request) {
        layerService.createLayer(request.getListId(), request.buildLayer());
        return layerService.readLayerListSetGroup(llsgID);
    }
} 
```

Spring 文档让我有点困惑。这似乎表明使用 WebApplicationContext 意味着只有控制器将被调查 @Transactional 注释而不是服务。同时，我看到大量建议使服务具有事务性，而不是控制器。我在想， `<context:component-scan base-package="com..." />`在我们上面的 spring-servlet.xml 中使用它来包含服务包意味着服务是上下文的一部分，因此将被“调查”以获取事务注释。这是准确的吗？

这是让我感到困惑的 Spring 文档简介：

> @EnableTransactionManagement 并且仅在定义它们的同一应用程序上下文中查找 @Transactional bean。这意味着，如果您将注释驱动的配置放在 DispatcherServlet 的 WebApplicationContext 中，它只会检查控制器中的 @Transactional bean，而不是您的服务。

此外，如果我将控制器方法定义为事务性的，并且它在另一个类中调用事务性方法，是否有任何性能影响或“坏处”？根据文档，我的预感是否定的，但我希望对此进行验证。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-25T20:41:24.997

对于注解应该在 Controller 上还是在 Service 上没有要求`@Transactional`，但通常它会在 Service 上执行，该 Service 将为一个逻辑上应该在一个 ACID 事务中执行的请求执行逻辑。

在典型的 Spring MVC 应用程序中，您至少会有两个上下文：应用程序上下文和 servlet 上下文。上下文是一种配置。应用程序上下文包含与您的整个应用程序相关的配置，而 servlet 上下文包含仅与您的 servlet 相关的配置。因此，servlet 上下文是应用程序上下文的子项，可以引用应用程序上下文中的任何实体。反过来是不正确的。

在你的报价中，

> @EnableTransactionManagement 并且仅在定义它们的同一应用程序上下文中查找 @Transactional bean。这意味着，如果您将注释驱动的配置放在 DispatcherServlet 的 WebApplicationContext 中，它只会检查控制器中的 @Transactional bean，而不是您的服务。

`@EnableTransactionManagement`在注解中声明的包中查找`@Transactional`bean，但仅在定义它们的上下文 () 中查找。因此，如果您有一个for your （这是一个 servlet 上下文），那么将在您告诉它的类中查找组件扫描那个上下文（类）。`@ComponentScan``@Configuration``WebApplicationContext``DispatcherServlet``@EnableTransactionManagement``@Transactional``@Configuration`

```
@Configuration
@EnableTransactionManagement
@ComponentScan(basePackages = "my.servlet.package")
public class ServletContextConfiguration {
    // this will only find @Transactional annotations on classes in my.servlet.package package
} 
```

由于您的`@Service`类是应用程序上下文的一部分，因此如果您想使这些成为事务性的，那么您需要`@Configuration`为应用程序上下文注释您的类`@EnableTransactionManagement`。

```
@Configuration
@EnableTransactionManagement
@ComponentScan(basePackages = "my.package.services")
public class ApplicationContextConfiguration {
    // now this will scan your my.package.services package for @Transactional
} 
```

实例化 DispatcherServlet 时，将 Application Context 配置与 a`ContextLoaderListener`和 Servlet Context 配置一起使用。（如果您还没有这样做，[请参阅 javadoc以获得完整的基于 java 的配置，而不是 xml。）](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/WebApplicationInitializer.html)

**附录：** `@EnableTransactionManagement`具有与 java 配置相同的行为`<tx:annotation-driven />`。[在这里检查](https://stackoverflow.com/questions/11014782/adding-context-loader-listener-to-web-xml-in-spring-mvc)`ContextLoaderListener`与 XML 一起使用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-25T19:42:58.480

该服务是放置事务分界的最佳位置。服务应该保存用户交互的细节级别的用例行为，这意味着在事务中逻辑上可以组合在一起的东西。这样，Web 应用程序胶水代码和业务逻辑之间也保持了分离。

有很多 CRUD 应用程序没有任何重要的业务逻辑，因为它们有一个服务层，只是在控制器和数据访问对象之间传递东西是没有用的。在这些情况下，您可以将事务注释放在数据访问对象上。

将事务注释放在控制器上可能会导致问题，请参阅[Spring MVC 文档][1]，17.3.2：

> 当应用需要为控制器对象创建代理的功能（例如@Transactional 方法）时，使用带注释的控制器类时会发生一个常见的陷阱。通常您会为控制器引入一个接口，以便使用 JDK 动态代理。要完成这项工作，您必须将@RequestMapping 注释以及任何其他类型和方法级别的注释（例如@ModelAttribute、@InitBinder）移动到接口以及映射机制只能“看到”由代理人。或者，您可以在配置中为应用于控制器的功能激活 proxy-target-class="true"（在我们的事务场景中）。这样做表明应该使用基于 CGLIB 的子类代理而不是基于接口的 JDK 代理。

您在属性上设置的事务传播行为决定了当一个事务方法调用另一个事务方法时会发生什么。您可以对其进行配置，以便调用的方法使用相同的事务，或者使其始终使用新事务。

通过在示例代码中多次调用您的服务，您违背了服务的事务性目的。如果您将事务注释放在服务上，对服务的不同调用将在不同的事务中执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-26T06:22:05.753

有时拥有@Transactional 控制器方法非常方便，尤其是在使用Hibernate 执行琐碎操作时。要使用 XML 配置启用此功能，请将其添加到您的 dispatch-servlet.xml：

```
<beans ...
 xmlns:tx="http://www.springframework.org/schema/tx"
 xsi:schemaLocation="...
 http://www.springframework.org/schema/tx
 http://www.springframework.org/schema/tx/spring-tx-3.2.xsd">    
  <tx:annotation-driven transaction-manager="transactionManager"
   proxy-target-class="true" />
  ..
</beans> 
```

proxy-target-class 的目的是使用控制器上的 AOP 工作所需的 CGLIB 代理。如果不添加，启动时会报错。此外，如果您的控制器中有任何最终方法，请注意它们不能被代理（特别是事务性的），并且在启动时，您还将收到来自 CGLIB 的每种方法的警告。

# javascript - Javascript在html页面中添加表格

> ID：15620356
> 
> 赞同：0
> 
> 时间：2013-03-25T16:49:33.183
> 
> 标签：javascript

我有一个包含表格的 html 页面。每次按下添加新按钮时，下面的 Javascript 都会在已经存在的表格下为我的 html 页面编写一个新表格。如何修改此代码以便用户只能添加 10 个表？

```
 <SCRIPT language="javascript">
    function addRow(tableID) {

        var table = document.getElementById(tableID);

        var rowCount = table.rows.length;
        var row = table.insertRow(rowCount);

        var colCount = table.rows[0].cells.length;

        for(var i=0; i<colCount; i++) {

            var newcell = row.insertCell(i);

            newcell.innerHTML = table.rows[0].cells[i].innerHTML;
            //alert(newcell.childNodes);
            switch(newcell.childNodes[0].type) {
                case "text":
                        newcell.childNodes[0].value = "";
                        break;
                case "select-one":
                        newcell.childNodes[0].selectedIndex = 0;
                        break;
            }
        }

    }

</SCRIPT> 
```

# facebook-opengraph - LinkedIn分享忽略OG标签

> ID：15620357
> 
> 赞同：5
> 
> 时间：2013-03-25T16:49:33.820
> 
> 标签：facebook-opengraph, linkedin

出于某种原因，LinkedIn 不会应用开放图形标签。我已经用 Facebook 调试器测试了 OG 标签，没有任何问题。这是提供 OG 标签的页面的链接：http: [//jakonazivo.cz/share/1](http://jakonazivo.cz/share/1)。您必须查看此文件的来源，因为它的目的只是提供 OG 标签，然后重定向到网站上的新闻页面。

任何想法可能导致LinkedIn出现此问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-06-16T18:24:02.167

有几件事我可以建议...

### 您不能同时使用图像和描述

[正如我在其他地方所说](https://stackoverflow.com/a/62390562/2430549)，您不能同时使用图像和描述。如果您尝试同时使用两者，则只会显示图像。资料来源：[与 LinkedIn 开发人员的两周争论](https://www.revoltlib.com/linkedin-social-share-url-broken-ticket.html)。

### 您应该使 LinkedIn 缓存无效

如果您无法弄清楚为什么 LinkedIn 没有在其共享应用程序中解析生成预期的预览，那么请尝试[**LinkedIn Post Inspector**](https://www.linkedin.com/post-inspector/inspect/)。仅仅检查我的网站，然后一秒钟后再次检查，将导致缓存在第一次尝试后失效，而新的缓存版本在第二次尝试时会在那里。

如果 LinkedIn Post Inspector 没有帮助，那么 OpenGraph 的开发人员足够聪明地创建了同样的东西，即[**OpenGraph Tag Inspector**](https://opengraphcheck.com/)。

如果您仍然认为它是缓存，请尝试共享 not `example.com`, but, `example.com/?someFake=Parameter`。不同的 URL 将意味着缓存未命中。

### 你应该使用OGTags

[**最后，请注意，根据Microsoft LinkedIn 官方文档**](https://www.linkedin.com/help/linkedin/answer/46687/making-your-website-shareable-on-linkedin?lang=en)，您只能分享以下内容...

*   `<meta property='og:title' content='Title of the article"/>`
*   `<meta property='og:image' content='//media.example.com/ 1234567.jpg"/>`
*   `<meta property='og:description' content='Description that will show in the preview"/>`
*   `<meta property='og:url' content='//www.example.com/URL of the article" />`

请注意：**使用`og:image`意味着 LinkedIn 将忽略您的`og:description`标签。**[您可以通过使用Wikipedia.org](https://www.linkedin.com/sharing/share-offsite/?url=http%3A%2F%2Fwww.wikipedia.org%2F)（没有`og:image`，只有一个`og:description`）和[GitHub.com](https://www.linkedin.com/sharing/share-offsite/?url=http%3A%2F%2Fwww.github.com%2F)（都`og:image`和`og:description`标签） 进行测试来自己确认这一点。

# asp.net - ScaffoldColumn(false) 不起作用，因为它是 FK

> ID：15620359
> 
> 赞同：1
> 
> 时间：2013-03-25T16:49:37.440
> 
> 标签：asp.net, asp.net-dynamic-data

![](../Images/866ab27c4e9f29a85ce6cb92771bb352.png)

我正在使用 ASP.NET 动态数据。该页面动态创建一个`List`，，页面`Edit`来`Details`显示存储在数据库中的表中的记录。

我`Sub Contractors`在表格中有 ，但我希望它在屏幕上的可见性设置为 false 。我试过了

```
[HideColumnIn(PageTemplate.List)]
[Display(Name = "SubContractor Id", Order = 70)]
public object SubContractorId { get; set; } 
```

还：

```
[ReadOnlyColumnIn(PageTemplate.List)] 
```

但没有喜悦。Iv 在`database.cs`文件中进行了这些更改。任何人都知道我怎样才能让它消失或从中删除超链接？

**编辑：**

`[ScaffoldColumn(false)]`通常有效，但因为`SubContractorId`是 FK，它似乎没有生效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:22:24.460

考虑为您的动态数据站点使用**自定义页面**（列表和其他）的可能性，它允许您隐藏特定字段。

有关详细信息：[如何：使用自定义页面模板自定义单个表格的布局](http://msdn.microsoft.com/en-us/library/cc488537%28v=vs.100%29.aspx)

# html - 如何在 Twitter Bootstrap 中扩展容器的宽度

> ID：15620360
> 
> 赞同：0
> 
> 时间：2013-03-25T16:49:40.850
> 
> 标签：html, css, twitter-bootstrap

我`.container`在导航栏、正文和页脚中使用该类。

所以这三个都在左边很好地对齐。但是，我想增加`container`班级的宽度。

默认情况下，宽度为 1170：

```
media="screen, projection"
bundle-bundle_bootstrap_head.css:6139@media (min-width: 1200px)
.container, .navbar-static-top .container, .navbar-fixed-top .container, .navbar-fixed-bottom .container {
width: 1170px;
} 
```

但是，我想将宽度扩展到 1300。所以我在我的`main.css`

```
.container {
    width: 1200px;
} 
```

但这似乎不起作用。当我重新加载页面并检查 CSS 时，1200 被划掉并且 1170 仍然处于活动状态。

**问题**

如何`container`在引导程序中扩展类的默认宽度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T17:07:45.427

这可能是因为您正在加载或`main.css`( `bootstrap.css`)，并在那里进行更改。然后你可能会`bootstrap-responsive.css`在那之后打电话，它会覆盖你的更改。

1170px`.container`宽度来自`bootstrap-responsive.css`文件。它是默认分配给大显示屏幕（1200 像素和更宽）的宽度。这就是为什么我假设你`bootstrap-responsive.css`在你的`main.css`文件之后打电话。

在这方面，使用`!important`是一种反模式（一种不好的做法）。尤其是在像您的`.container`. 这将导致未来的特异性问题。我鼓励您实际解决和理解问题，而不是“破解它”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T16:55:56.203

*尝试这个*

> !important 可用于级联样式表以优先考虑参数

```
.container {
   width: 1200px !important;
 } 
```

检查[此](http://www.yellowjug.com/web-design/the-importance-of-important-in-css/)以获取更多信息。

> 对于这种情况，可以使用 !important 作为解决方法，但使用此属性被认为是一种不好的做法，CSS 专家不建议这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-26T13:58:13.977

我知道这是一个旧线程，但是我最近在搜索如何在最新版本的引导程序（3.0）上扩展容器宽度，并认为这可能对其他人有所帮助。

除了为容器设置宽度之外，您还必须为您的 css 设置一个 max-width 属性。

```
container 
{
  width:1200px;
  max-width:1200px;
} 
```

正如上面其他人所指出的，请确保在 bootstrap.css 文件之后加载您的自定义 css，以便重新声明设置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-29T12:02:13.477

如果您使用的是引导程序 scss。

文件：`_variables.scss`

为更大的容器宽度添加断点（此处为 xxl：1440px）。

```
$grid-breakpoints: (
  xs: 0,
  sm: 576px,
  md: 768px,
  lg: 992px,
  xl: 1200px,
  xxl: 1440px
) !default; 
```

通过添加 xxl: 1200px 创建更大的容器

```
$container-max-widths: (
  sm: 540px,
  md: 720px,
  lg: 960px,
  xl: 1140px,
  xxl: 1200px
) !default; 
```

Bootstrap mixins 将为 1200px 宽的容器创建额外的断点媒体查询。

有关更改引导变量的更多信息，请转到[主题引导程序](https://getbootstrap.com/docs/4.4/getting-started/theming/)

# ios - iOS：具有许多 UIViewControllers 的 UIScrollView 中的内存管理

> ID：15620362
> 
> 赞同：1
> 
> 时间：2013-03-25T16:49:48.590
> 
> 标签：ios, uiviewcontroller, uiscrollview

我有一个关于启用分页的 UIScrollView 的问题，其中包含许多 UIView，每个都由自己的 UIViewController 管理。

现在有大约 20 到 30 个 UIViewControllers 可以包含在 UIScrollView 中。它是 iPad 上的一个目录应用程序，我一开始就开始预加载所有视图，但随着 UIViewController 的数量越来越大，这不再是一种选择。

我正在寻找内存使用方面的完美解决方案。当 ScrollView 的 ContentOffset 到达特定控制器时，重新加载 UIViewControllers 是没有问题的。而且我认为当 ContentOffset 告诉我不再需要 UIViewControllers 时将 UIViewControllers 归零也不是那么难。

处理这个问题的正确方法是什么？在需要时分配 UIViewController 是否足够，将它们放入 NSMutableDictionary 或 NSMutableArray 并在不再需要它们时将它们归零？从已经做过类似事情的人那里得到一点帮助会很棒！

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T19:31:20.437

我敢肯定那里有一些很好的无限滚动类，但如果你要“自己动手”，这里有一段极简的代码，它演示了无限滚动的过程，保持当前、上一页和下一页在记忆中，但放开其他任何东西。这假设：

*   您正在进行水平滚动并已打开分页；
*   您正在为子视图使用视图控制器；
*   您的子视图控制器类有一个`page`属性来跟踪它的页面；和
*   您已将视图控制器设置为滚动视图的委托

因此，它可能看起来像：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    // my underlying model is just an array of strings, which I'll show on my child
    // view; your model will be more elaborate, but I just want to illustrate the concept

    self.objects = @[@"1", @"2", @"3", @"4", @"5", @"6", @"7", @"8", @"9"];

    // set the `contentSize` for the scrollview

    CGRect content = self.view.bounds;
    content.size.width *= [self.objects count]; // make it wide enough to hold everything
    self.scrollView.contentSize = content.size;

    // set our current page and load the first pages (the first and the next pages)

    self.currentPage = 0;
    [self addChildPage:0 toScrollView:self.scrollView];
    [self addChildPage:1 toScrollView:self.scrollView];
}

- (void)addChildPage:(NSInteger)page toScrollView:(UIScrollView *)scrollView
{
    // create the child controller

    ChildViewController *controller = [self.storyboard instantiateViewControllerWithIdentifier:@"child"];

    // set whatever properties you need to in order for it to present its information correctly

    controller.text = self.objects[page];
    controller.page = page;

    // now do the stuff to add it to the right place in the scrollview

    CGRect frame = self.view.bounds;
    frame.origin.x = frame.size.width * page;
    controller.view.frame = frame;
    [self addChildViewController:controller];        // containment call for adding child view controller
    [scrollView addSubview:controller.view];
    [controller didMoveToParentViewController:self]; // containment call when done adding child
}

- (ChildViewController *)childControllerForPage:(NSInteger)page
{
    for (ChildViewController *controller in self.childViewControllers)
    {
        if (controller.page == page)
            return controller;
    }

    return nil;
}

- (void)addChildIfNecessary:(NSInteger)page toScrollView:(UIScrollView *)scrollView
{
    if (page < 0 || page >= [self.objects count])
        return;

    ChildViewController *controller = [self childControllerForPage:page];

    if (controller == nil)
        [self addChildPage:page toScrollView:scrollView];
}

- (void)removeChildController:(UIViewController *)controller
{
    [controller willMoveToParentViewController:nil];  // containment call before removing child
    [controller.view removeFromSuperview];
    [controller removeFromParentViewController];      // containment call to remove child
}

- (void)updateChildrenViewsForPage:(NSInteger)page forScrollView:(UIScrollView *)scrollView
{
    if (page == self.currentPage)
        return;

    // add child pages as necessary

    [self addChildIfNecessary:page     toScrollView:scrollView];
    [self addChildIfNecessary:(page-1) toScrollView:scrollView];
    [self addChildIfNecessary:(page+1) toScrollView:scrollView];

    // find any pages that need removing

    NSMutableArray *pagesToRemove = [NSMutableArray array];
    for (ChildViewController *controller in self.childViewControllers)
    {
        if (controller.page < (page - 1) ||
            controller.page > (page + 1))
        {
            [pagesToRemove addObject:controller];
        }
    }

    // remove them if they need removing

    for (UIViewController *controller in pagesToRemove)
    {
        [self removeChildController:controller];
    }

    // update our "current page" index

    self.currentPage = page;
}

- (void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    NSInteger page = scrollView.contentOffset.x / scrollView.frame.size.width + 0.5;

    [self updateChildrenViewsForPage:page forScrollView:scrollView];
} 
```

这演示了适当的自定义容器调用和滚动事件的处理。我希望这有帮助。

# php - 如何拆分数字查询结果？

> ID：15620364
> 
> 赞同：3
> 
> 时间：2013-03-25T16:50:00.873
> 
> 标签：php, mysql

我正在从存储为 12345 的数据库中提取一个 ID 号

当我在我的页面（php）上显示它时，我想让它显示为 1-2345

我可以在不使用 Javascript 的情况下做到这一点吗？如果是这样，怎么做？

谢谢！

ETA：它是动态提取的数据循环的一部分，因此数字总是不同的。我需要能够告诉它在第一个数字后面加上一个破折号。不一定是1-2345；它更多的是 X-XXXX（其中 X 是一个随机数）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-25T16:52:48.290

您应该能够在 MySQL 中使用以下内容：

```
select
  concat(left(yourCol, 1), 
         '-', 
         right(yourcol, length(yourCol)-1)) YourValue
from yourtable 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/bf4fed/1)

这实现了以下 MySQL 函数：

*   [康卡特](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat)
*   [剩下](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_left)
*   [正确的](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_right)
*   [长度](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_length)

或者您可以使用`SUBSTR`代替`RIGHT`and `LENGTH`：

```
select
  concat(left(yourCol, 1), 
         '-', 
         substr(yourcol, 2)) YourValue
from yourtable; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/bf4fed/4)

*   [SUBSTR](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_right)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-25T16:54:38.797

在 PHP 中

```
$id = (str)$dbVal;
$str = $id[0]."-".substr($id, 1, strlen($id) - 1);
echo $str; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-25T16:54:18.733

其他答案没有说明将代码放在*哪里以及为什么。*在第一个数字后插入破折号是显示相关的逻辑，显示相关的逻辑属于模板。它当然不属于数据库层。您可以将实际代码放在 HTML 旁边，但这将是 a) 可能不是很能显示意图，并且 b) 不是很可重用。

为了最好的关注点分离，我会首先在它自己的文件中定义一个这样的“帮助”函数：

```
function insert_dash_after_first_number($value)
{
  return str_replace($value[0], $value[0].'-', $value);
} 
```

然后，在您的模板中，您可以执行此操作（假设您包含了帮助文件）：

```
<?php echo insert_dash_after_first_number('12345'); ?> 
```

希望你能看到以这种方式分离事物会让其他人和你未来的自己很清楚发生了什么。您可以只查看函数名称并看到“哦，这会在第一个数字之后插入一个破折号”。您不必查看任何代码并考虑它可能会做什么。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-25T16:56:36.103

```
$var = "12345";
echo $var[0] . "-" . substr($var,1); 
```

这应该适用于任何长度的值。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-25T17:00:31.470

首先，使用您的`SELECT`MySQL 命令查找您的 ID 号。假设`$string`实际上是 ID 的“字符串化”版本。

```
$string = "12345"; 
$string = str_replace($string[0], $string[0] . "-", $string); 
echo $string; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-25T16:55:01.973

```
 $string1 = substr($id, 0,1);
 $string2 = substr($id, 1, strlen($id)); 
```

# macos - Mac 上的 jenkins，PATH 设置不正确，没有 /usr/local/bin

> ID：15620369
> 
> 赞同：40
> 
> 时间：2013-03-25T16:50:08.983
> 
> 标签：macos, jenkins, homebrew, launchd

我最近使用 Homebrew 安装了 Jenkins。我还使用 Homebrew 安装了 Mercurial。

我可以从终端成功地克隆一个 hg repo。但是，如果我尝试在 Jenkins 的工作中做同样的事情，它就会失败。

所以，在工作中，我告诉 Jenkins 运行一个 shell 脚本`echo $PATH`。果然，路径`/usr/local/bin`不存在。如果我从终端执行相同的命令，它就在那里。

**那么，当我从终端回显它时，修改 PATH 以便詹金斯拉动我正在使用的相同 PATH 的最佳方法是什么？**

请注意，Jenkins 是从我登录进行这些测试的同一个用户帐户运行的，所以我无法理解为什么会发生这种情况。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-25T18:10:41.057

在 Jenkins 的 launchd .plist 文件中，您可以使用以下命令设置 PATH 环境变量：

```
<key>EnvironmentVariables</key>
<dict>
    <key>PATH</key>
    <string>(insert your path value here)</string>
</dict> 
```

那应该将 PATH 设置为您需要的任何内容。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-10-07T04:21:53.057

出于某种原因，Jenkins 在连接到从站时不会将 /usr/local/bin 保留在 PATH 中。
您可以通过以下方式将其添加到 PATH

*   在节点配置上添加环境变量，或

*   在用户文件夹中添加 .bashrc 文件

    ```
     PATH="/usr/local/bin:${PATH}" 
    ```

注意：Mac 客户端必须断开连接，然后在编辑 ~/.bashrc 后通过 Jenkins Web 应用重新连接

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-26T06:58:56.453

您可以在 launchd.conf 文件中设置 PATH。有关详细信息，请参见[此处](http://overwatering.org/blog/2012/08/setting-path-osx-mountain-lion/)。请注意，`man launchctl`“命令可以存储在 $HOME/.launchd.conf 或 /etc/launchd.conf 中以便在启动时读取”，因此您可能可以在主目录中创建“.launchd.conf”并使用此文件链接中的说明。但据我所知，在launchd.conf 文件中你不能将目录添加到PATH，你可以重写PATH。
您还可以[在此处](https://stackoverflow.com/questions/8910229/how-to-add-a-directory-to-the-path-variable-with-macosx-leopard)查看使用 /etc/paths.d 目录的解决方案

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-09-07T22:43:57.937

我发现即使为节点设置 PATH 环境变量也不适用于 hombrew Mercurial 安装。将设置路径，但仅适用于脚本构建阶段，而不适用于 VCS 签出阶段。这就是我最终要做的事情。

1.  进入`Manage Jenkins -> Configure System`
2.  添加新的 Mercurial 安装
3.  随意命名（我将其命名为 build-mac）
4.  因为`Installation Directory`我把`/usr/local`
5.  该`Executable`参数被预先设置为`INSTALLATION/bin/hg`，所以我就这样离开了。
6.  这里的其他所有内容都可以留空
7.  进入你的工作并编辑配置
8.  在`Source Code Management`设置`Mercurial Version`为您刚刚添加的 mercurial 安装下。
9.  节省
10.  $$$

希望能帮助遇到同样问题的其他人，因为我们不再被允许（默认情况下）在里面做任何事情`/usr/bin`。以前我只会在此处对 hg 进行符号链接，但现在有了新的“系统完整性保护”“功能”，这不再是微不足道的任务，如果你的 Mac 从机是无头的，那就更难了。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-02-25T08:12:41.380

在以下 PATH 修改中，= 两侧不应有空格：PATH="/usr/local/bin:$PATH"

我将它添加到安装在 macOS 上的 Jenkins 上的预构建步骤中。

# paypal - Express Checkout Digital Goods：sandbox.paypal.com/incontext 上的代理错误

> ID：15620371
> 
> 赞同：2
> 
> 时间：2013-03-25T16:50:11.647
> 
> 标签：paypal, express-checkout

我有一个 Flash 网站。当我想将 Paypal Express Checkout 与数字商品一起使用时，我称之为 javascript 代码：

```
dg = new PAYPAL.apps.DGFlow();
dg.startFlow("http://mydomain.com/setup.php"); 
```

setup.php 调用 SetExpressCheckoutPayment 函数并重定向到[https://www.sandbox.paypal.com/incontext?token=...&useraction=commit](https://www.sandbox.paypal.com/incontext?token=...&useraction=commit)

使用 Firebug，我可以看到这个地址返回 302，并重定向到[https://www.sandbox.paypal.com/webapps/checkout/webflow/sparta/expresscheckoutvalidatedataflow?exp_type=&cookiesBlocked=&token=...&useraction=commit](https://www.sandbox.paypal.com/webapps/checkout/webflow/sparta/expresscheckoutvalidatedataflow?exp_type=&cookiesBlocked=&token=...&useraction=commit) 这个地址还返回 302 并重定向到[https://www.sandbox.paypal.com/webapps/checkout/webflow/sparta/expresscheckoutvalidatedataflow?execution=e1s1](https://www.sandbox.paypal.com/webapps/checkout/webflow/sparta/expresscheckoutvalidatedataflow?execution=e1s1)

在这里它会挂起几分钟并以以下错误消息结束：

```
Proxy Error
The proxy server could not handle the request GET /webapps/checkout/webflow/sparta/expresscheckoutvalidatedataflow.
Reason: Error during SSL Handshake with remote server 
```

我上周开始有时会出现这个错误，今天我每次都有。它发生在我的 MAMP 环境和我的网站上。我没有 SSL 证书，但上周我没有，这不是问题。

你知道这个错误信息吗？

**编辑**

我尝试使用 Opera，proxyError 出现在不同的步骤：[https ://www.sandbox.paypal.com/webapps/checkout/webflow/sparta/expresscheckoutvalidatedataflow?execution=e1s4](https://www.sandbox.paypal.com/webapps/checkout/webflow/sparta/expresscheckoutvalidatedataflow?execution=e1s4)

今天早上在 Firefox 上，我在第一次重定向后遇到了另一个代理错误：

```
Proxy Error
The proxy server received an invalid response from an upstream server.
The proxy server could not handle the request GET /webapps/checkout/webflow/sparta/expresscheckoutvalidatedataflow.
Reason: Error reading from remote server 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:31:14.743

从昨天开始我就没有代理错误了。我没有改变任何东西，所以似乎 PayPal 服务器不稳定......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:26:11.383

自周日晚上以来，我遇到了同样的问题（抱歉，我不能将此作为评论发布，还没有足够的声誉）。

我在 LiquidWeb 共享主机上，使用 Merchant SDK ( [https://github.com/paypal/merchant-sdk-php](https://github.com/paypal/merchant-sdk-php) )。错误开始时，我在 Mercer-sdk-php-2.1.96 上，并尝试升级到 Mercer-sdk-php-2.2.98，但现在情况更糟（甚至不会进行第一次重定向，这令人困惑）。我的代码是服务器端的，但在相同的 url 处得到超时和代理错误：

```
            $setECResponse = $PayPal_service->SetExpressCheckout($setECReq);

            if($setECResponse->Ack == '成功') {          
                $token = $setECResponse->Token;
                $payPalURL = 'https://www.sandbox.paypal.com/incontext?token='。$令牌;
                $this->重定向($payPalURL);
            }

```

# css - 负相对定位 firefox chrome 兼容性

> ID：15620374
> 
> 赞同：0
> 
> 时间：2013-03-25T16:50:14.407
> 
> 标签：css, css-position, flexbox, margin

我不明白为什么 Firefox 和 chrome 中的负相对定位不同。我也不太确定 Flexbox 是最新的还是可以工作的。 *例如*

在**Firefox**上工作机智：

```
margin-right:-200px 
```

在**Chrome**上适用于：

```
right:-200px 
```

**演示：**

[http://jsfiddle.net/3fJqZ/48/](http://jsfiddle.net/3fJqZ/48/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T17:00:15.143

在 Firefox 中，您正在应用`-webkit-box-sizing`到`.flex-item`被折叠。

您还需要为 webkit 浏览器（如 Chrome）添加此属性。

尝试添加`-webkit-box-sizing: border-box;`到 .flex-item`

如果不应用 box-sizing，填充将有助于盒子的宽度，归因于盒子在移动 -200px 后仍然在视图中。

查看结果：http: [//jsfiddle.net/3fJqZ/54/](http://jsfiddle.net/3fJqZ/54/)

# android - 没有 Javascript 的 web 视图中的按钮

> ID：15620394
> 
> 赞同：1
> 
> 时间：2013-03-25T16:51:33.263
> 
> 标签：android, button, webview

我有一个从服务器加载 web 视图的 android 应用程序。我没有服务器代码，所以我无法更改 Javascript 中的任何内容。我想弄清楚在 web 视图中单击按钮的时间以及按钮中的标签是什么。我不知道Id，我只想得到标签。

我尝试搜索此内容，但找不到答案。我找到了可以在 javascript 中工作的解决方案，但就我而言，我不能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T17:40:31.217

此建议可能有助于找到有助于确定按钮标签的有用信息。Override`shouldOverrideUrlLoading()`和`shouldInterceptRequest()`/或`onLoadResource()`for`WebViewClient`以便您可以访问任何重定向的 URL。

例子：

```
webview.setWebViewClient(new WebViewClient() {
    public boolean shouldOverrideUrlLoading(WebView view, String url) {

        // Try to learn something useful from the 'url' here.

        // Continue as normal, loading the 'url' within this WebView.
        view.loadUrl(url);
        return false; // Allow the WebView to handle the request.
    }

    // Optional: Add similar for "shouldInterceptRequest()" and/or "onLoadResource()".
}); 
```

**注意**：上面的覆盖`shouldOverrideUrlLoading()`是使重定向保持不变`WebView`而不是重定向到默认浏览器应用程序的标准方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T18:06:04.870

您可能真的想检查此页面：

[在 WebView 中构建 Web 应用程序（Google API 指南）](http://developer.android.com/guide/webapps/webview.html "在 WebView 中构建 Web 应用程序（Google API 指南）")

具体来说，似乎 addJavascriptInterface 可能是您正在寻找的：

[addJavascriptInterface（对象对象，字符串名称）](http://developer.android.com/reference/android/webkit/WebView.html#addJavascriptInterface%28java.lang.Object,%20java.lang.String%29 "addJavascriptInterface(java.lang.Object, java.lang.String)")

它允许您从 javascript 执行您的 Java 代码，并且与在页面中插入代码的能力相结合，它是一个非常强大的工具，可让您在 Activity 和页面之间实现高度耦合。

我认为此时您已经知道该怎么做，但无论如何我都会勾勒出一个可能的行动方案：

*   创建一个 javascript 界面，其中包含您希望在按下按钮时在活动中执行的回调
*   一旦您的页面加载，安装代码以通过注入在每个按钮（或链接）中调用您的 javascript 界面

希望这可以帮助

# javascript - 默认边距和填充 和 标签

> ID：15620395
> 
> 赞同：2
> 
> 时间：2013-03-25T16:51:41.880
> 
> 标签：javascript, jquery, html, css

第 3 方插件/小部件将此 CSS 注入我的 html 页面。

```
* { 
    margin: 0px; padding: 0px;
}
html {
    margin: 0px; padding: 0px;
}
body {
    margin: 0px; padding: 0px;
} 
```

有什么办法可以覆盖该 CSS 并撤消它造成的所有损害？

我必须在我的页面上有那个小部件。我不能只是删除它。

编辑：根据评论之一，这个 CSS 很好，因为它使渲染正常化，但它打破了我的

*   标签。特别是，`'*'`标签规则打破了它。

    这是没有“*”规则的列表的外观。

    ![在此处输入图像描述](../Images/8e31f3b445ab7b91452b6090f47e1042.png)

    这就是它的外观。

    ![在此处输入图像描述](../Images/353f42c4396028bb74f8ee2c133a7dad.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T06:21:18.897

详细说明 @j08691 的答案，特别是第 nr 2 点，您可以使用以下内容覆盖列表的小部件 css：

```
html ul{
  margin: 1em 0;
  padding: 0 0 0 40px;
} 
```

使用的值来自 Nicholas Gallagher (@necolas) “normalize.css”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T16:55:11.967

任何一个：

1.  在它之后添加您自己的 CSS 以覆盖您不想要的 CSS。
2.  创建更具体的 CSS 规则，因为具有更高特异性的 CSS 规则将覆盖那些具有较低特异性的规则。
3.  使用`!important`关键字覆盖您不想要的样式。
4.  使用内联 CSS。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-25T17:30:55.137

是的，正如@j08691 所说，使用 !important 关键字添加你的 CSS 可能是最干净的方法：

```
* { margin: YOUR VALUE !important; padding: YOUR VALUE !important;}

html {margin: YOUR VALUE !important; padding: YOUR VALUE !important;}

body {margin: YOUR VALUE !important; padding: YOUR VALUE !important;} 
```

# mysql - 每个表返回的 MySQL 多 SELECT 语句计数结果

> ID：15620401
> 
> 赞同：0
> 
> 时间：2013-03-25T16:51:57.940
> 
> 标签：mysql, join

我正在尝试一次选择 3 个表进行查询。我想知道确定每个表返回多少行的最佳方法是什么？

单独做这个，我有

```
SELECT * from tableA  
SELECT * from tableB  
SELECT * from tableC 
```

如果我这样做，我可以在每次选择时看到返回了多少行。我想一次选择所有这些我已经成功完成的，但我想知道如何获取每个返回的表的结果。下面的示例查询：

```
SELECT * from tableA ta WHERE id=100  
SELECT * from tableB tb where pid=100  
SELECT * from tableC tc where cid = 100 
```

只是这样做的问题吗？

```
SELECT (count(id) from tableA where id=100) as count_tableA,  
SELECT * from tableA ta WHERE id=100,    
SELECT (count(pid) from tableB where id=100) as count_tableB,   
SELECT * from tableB tb where pid=100,  
SELECT (count(id) from tableB where cid=100) as count_tableC,  
SELECT * from tableC tc where cid = 100 
```

总体目标是通过每次避免 3 个查询来提高性能，但是，我需要隔离从返回的每个表中提取多少行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T18:26:23.610

好吧，您无法真正避免查询。您必须查询每个表以获取行，这需要全表扫描。

`tableA(id)`您可以通过在、`tableB(id)`和上创建索引来优化计数`tableC(cid)`。

您还可以在应用程序层中获取行，然后进行计数。

您的查询的语法不正确。也许你的意思是：

```
select (SELECT count(id) from tableA where id=100) as count_tableA,  a.*
from TableA
where id = 100; 
```

等等。

# r - 将临时命名空间附加到搜索路径

> ID：15620404
> 
> 赞同：3
> 
> 时间：2013-03-25T16:52:09.173
> 
> 标签：r, namespaces, search-path

这个问题是这篇[文章](https://stackoverflow.com/questions/10947159/writing-robust-r-code-namespaces-masking-and-using-the-operator)的后续问题，因为我仍然不完全相信，就代码的健壮性而言，养成打字`namespace::foo()`习惯而不是仅仅打字`foo()`并祈祷你得到想要的结果不会好得多； -)

## 实际问题

我知道这严重违反了“标准 R 约定”，但我只是说我很好奇 ;-)**是否可以以某种方式将临时命名空间附加到搜索路径？**

* * *

## 动机

在我的包`mypkg`仍处于“*开发阶段*”的时候（即**还不是真正的 R 包**）：

*   我想将我的功能导入环境`mypkg`而不是`.GlobalEnv`
*   然后附加`mypkg`到搜索路径（如果可能，作为真正的命名空间）
*   为了能够打电话`mypkg::foo()`

我完全意识到调用`::`有其缺点（它比简单地输入函数名称并让 R 隐式处理查找需要更长的时间）和/或可能由于**a)** R 扫描搜索路径和**b的方式而被认为是不必要的)**包可以导入它们的依赖项（即使用“Imports”而不是“Depends”，不导出某些函数等）。但是由于某些包已经覆盖了某些（基本）功能，我已经看到我的代码至少崩溃了两次，所以我从“盲目信任”变成了“比抱歉更安全”模式； -)

## 我试过的

AFAIU，命名空间原则上只不过是某种特殊的环境

```
> search()
[1] ".GlobalEnv"        "package:stats"     "package:graphics" 
[4] "package:grDevices" "package:utils"     "package:datasets" 
[7] "package:methods"   "Autoloads"         "package:base"     

> asNamespace("base")
<environment: namespace:base> 
```

还有`attach()`将对象附加到搜索路径的功能。所以这就是我的想法：

```
temp.namespace <- new.env(parent=emptyenv())
attach(temp.namespace)
> asNamespace("temp.namespace")
Error in loadNamespace(name) : 
  there is no package called 'temp.namespace' 
```

我想我必须以某种方式处理`attachNamepace()`并弄清楚它在被调用之前会发生什么`library()`。有任何想法吗？

* * *

## 编辑

关于 Hadley 的评论：我实际上不在乎附加的环境是成熟的命名空间还是只是一个普通的环境，只要我可以扩展`::` **同时保持“语法 sugering”功能**（即能够调用`pkg::foo()`而不是`"::"(pkg="pkg", name="foo")()`） .

这是函数的`"::"`样子：

```
> get("::")
function (pkg, name) 
{
    pkg <- as.character(substitute(pkg))
    name <- as.character(substitute(name))
    getExportedValue(pkg, name)
} 
```

`pkg`如果 R 检测到这实际上**不是**命名空间，而只是附加到搜索路径的一些环境，这也是它应该能够做的：

```
"::*" <- function (pkg, name) 
{
    pkg <- as.character(substitute(pkg))
    name <- as.character(substitute(name))
    paths <- search()
    if (!pkg %in% paths) stop(paste("Invalid namespace environment:", pkg))
    pos <- which(paths == pkg)
    if (length(pos) > 1) stop(paste("Multiple attached envirs:", pkg))
    get(x=name, pos=pos)
} 
```

它有效，但没有语法糖：

```
> "::*"(pkg="tempspace", name="foo")
function(x, y) x + y
> "::*"(pkg="tempspace", name="foo")(x=1, y=2)
[1] 3 
```

我将如何调用（忽略函数名称非常糟糕`pkg::*foo(x=1, y=2)`的事实;-)）？`::*`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-03T09:20:55.020

您的动机有问题：您的命名空间不必附加到搜索路径才能使用 '::' 表示法，它实际上是相反的。

搜索路径允许通过查看附加到搜索路径的所有命名空间来选择符号。

所以，正如 Hadley 告诉你的，你只需要使用 devtools::load_all()，就是这样......

# ruby - 可扩展的自托管文件上传到 Ruby on Rails

> ID：15620405
> 
> 赞同：5
> 
> 时间：2013-03-25T16:52:11.910
> 
> 标签：ruby, upload, nonblocking

我们有一个位于 NGINX 服务器（负载均衡器）后面的 Rails 3 应用程序（在乘客上运行）。一个主要功能是从浏览器上传文件。什么技术是处理文件上传的好选择？目标是不影响应用程序服务器，并在需要时在多个服务器上进行扩展。Node.js 实现[node-formidable](https://github.com/felixge/node-formidable)看起来不错。但我更喜欢 Ruby 实现来保持工具栈的统一。

这些文件预计在 100 KB 到 100 MB 之间。

当前的想法是使用[Thin](http://code.macournoyer.com/thin/)或[Goliath](https://github.com/postrank-labs/goliath)。但我不确定“非阻塞”是否真的是这里的主要关键。是否有类似 S3 的 OSS 软件可以部署在我们自己的服务器上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T19:41:06.893

OpenStack 存储是一个很好的选择

[http://www.openstack.org/software/openstack-storage/](http://www.openstack.org/software/openstack-storage/)

如果我没记错的话，这就是 Rackspace 运行 cloudfiles 的地方，所以它可能与使用 rackspace 驱动程序的 ruby​​ 端的 Carrierwave-fog 兼容。刚刚检查它实际上支持 S3 api，因此任何 S3 适配器/gems 都可以正常工作。

# database - 如何使用访问数据库 VB.net 2010 保存我在 datagridview 中添加的列

> ID：15620410
> 
> 赞同：0
> 
> 时间：2013-03-25T16:52:23.650
> 
> 标签：database, vb.net, datagridview

我正在使用此代码添加一个新列：

```
DataGridView1.Columns.Add("Test", "TesT") 
```

但是在保存并关闭项目后，我再次打开它，列被删除。

问题是如何将列保存到访问数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T20:34:40.863

如果您只是要保存这些值，那么您必须重新调用它们才能填充网格。

插入访问数据库的示例代码。

```
Dim Cmd as New OLEDb.OleDbCommand
Dim oleConn as New OleDb.OleDbConnection
Dim strDataBase as String

strDataBase = "C:\Test.mdb"

'2007 connection string will work for 2003-2007 databases - change to 14.0 for 2010 etc
oleConn.ConnectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" & strDataBase & ";Jet OLEDB"

Cmd.Connection = oleConn
oleConn.Open()
Cmd.CommandText = "Insert into mytable ( Field1, Field2 ) values ( '" & "some Value" & "', '" & "some value" & "' )"
Cmd.ExcuteNonQuery
oleConn.Close() 
```

# ocaml - OCaml 中的线性类型

> ID：15620411
> 
> 赞同：7
> 
> 时间：2013-03-25T16:52:27.147
> 
> 标签：ocaml, linear-types

[Rust](http://www.rust-lang.org/)有一个线性类型系统。有什么（好的）方法可以在 OCaml 中模拟这个吗？例如，当使用 ocaml-lua 时，我想确保仅当 Lua 处于特定状态（堆栈顶部的表等）时才调用某些函数。

**编辑**：这是最近一篇关于与该问题相关的资源多态性的论文：[https ://arxiv.org/abs/1803.02796](https://arxiv.org/abs/1803.02796)

**编辑 2**：还有许多关于 OCaml 中会话类型的文章，包括提供一些语法糖的语法扩展。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-26T06:43:59.687

正如 John Rivers 所建议的，您可以使用单子样式来表示“有效”计算，从而隐藏效果 API 中的线性约束。下面是一个示例，其中类型`('a, 'st) t`用于表示使用文件句柄的计算（其身份是隐式/不言而喻的，以保证它不能被复制），将产生类型的结果`'a`并将文件句柄保持在状态 `'st`（幻像类型“打开”或“关闭”）。您必须使用`run`monad¹ 来实际做任何事情，它的类型确保文件句柄在使用后正确关闭。

```
module File : sig
  type ('a, 'st) t
  type open_st = Open
  type close_st = Close

  val bind : ('a, 's1) t -> ('a -> ('b, 's2) t) -> ('b, 's2) t

  val open_ : string -> (unit, open_st) t
  val read : (string, open_st) t
  val close : (unit, close_st) t

  val run : ('a, close_st) t -> 'a
end = struct
  type ('a, 'st) t = unit -> 'a
  type open_st = Open
  type close_st = Close

  let run m = m ()

  let bind m f = fun () ->
    let x = run m in
    run (f x)

  let close = fun () ->
    print_endline "[lib] close"

  let read = fun () ->
    let result = "toto" in
    print_endline ("[lib] read " ^ result);
    result

  let open_ path = fun () -> 
    print_endline ("[lib] open " ^ path)
end    

let test =
  let open File in
  let (>>=) = bind in
  run begin
    open_ "/tmp/foo" >>= fun () ->
    read >>= fun content ->
    print_endline ("[user] read " ^ content);
    close
  end 
```

当然，这只是为了让您体验 API 的风格。有关更严重的用途，请参阅 Oleg 的[单子区域](http://okmij.org/ftp/Haskell/regions.html)示例。

您可能还对研究编程语言 [Mezzo](http://gallium.inria.fr/~protzenk/mezzo-lang/)感兴趣，该语言旨在成为 ML 的一种变体，通过具有分离资源的线性类型规则对状态（和相关的有效模式）进行更细粒度的控制。请注意，目前这只是一项研究实验，并非真正针对用户。[ATS](http://ats-lang.org/)也是相关的，尽管最终不像 ML。Rust 实际上可能是这些实验的合理“实用”对应物。

¹：它实际上不是一个单子，因为它没有`return`/`unit`组合子，但关键是像单子运算符一样强制类型控制排序`bind`。不过，它可能有一个`map`。

# c# - 将列表转换为给定类型

> ID：15620416
> 
> 赞同：2
> 
> 时间：2013-03-25T16:52:33.043
> 
> 标签：c#, list, types, casting, type-conversion

我有以下列表：

```
public List<EntityBase> PossibleReplacements 
```

我也有一个类型

```
public Type type; 
```

type 将包含某个继承 EntityBase 的类类型（这就是我的应用程序的工作方式）。现在我需要将列表 PossibleReplacements 转换为“type”类型的列表

像这样的东西：

```
List<type> lijst = PossibleReplacements.Cast<type>(); 
```

但这给出了一个错误

```
'ReplacePopupModel.type' is a 'field' but is used like a 'type' 
```

我还没有找到一个可行的解决方案。

谁能帮我吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:53:29.953

您不能使用`Cast`，因为它在运行时不是类型安全的，您只需用于`where`选择：

```
var lijst = PossibleReplacements.Where(t => t.GetType() == type); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T16:57:17.393

您可以像这样获取与类型匹配的项目：

```
List<EntityBase> list = PossibleReplacements.Where(e => type.IsAssignableFrom(e.GetType())).ToList(); 
```

此列表将仅包含与您在 中指定的特定类型匹配（或属于其子类）的项目`type`。

但是，您不能强制转换为特定`List<T>`类型，因为这在编译时是未知的。

如果您尝试提取*在编译时已知*的特定类型的项目，您可以使用：

```
List<TheType> list = PossibleReplacements.OfType<TheType>().ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T17:02:05.120

不是没有反思，也不是安全的。但是您可以按照 Reed Copseys 的第一个提示检查是否所有条目都可以分配给您的类型，然后使用反射转换方法：

```
var type = ...your type...

var cast = typeof(IEnumerable<>).GetMethod("Cast").MakeGenericMethod(type);
var list = cast.Invoke(PossibleReplacements, null); 
```

变量`list`now `object`，但引用了正确类型的列表。由于您不知道您的实际类型，您可能有一些接口来访问列表（需要强制转换）。

# bash - Bash 脚本 - 在一个存档中压缩多个目录

> ID：15620420
> 
> 赞同：3
> 
> 时间：2013-03-25T16:52:39.047
> 
> 标签：bash, shell

不久前我制作了一个脚本，`zip`用于压缩几个不同的用户指定目录。脚本这样做的方式是读取目录`config.txt`并单独压缩每个目录。碰巧的是，对于我的使用，所有这些目录都在同一个父目录中。例如，我的目录中有以下`/Users/username/`目录：

```
Desktop
Documents
Pictures 
```

有没有办法将这三个组合在同一个档案中？

作为参考，这是我当前的脚本：

```
BKUPDATE="/Users/michaelgarrison/Backup/BKUP_"$(date +%Y)-$(date +%m)-$(date +%d)

# Create the Backup directory if it does not exist
mkdir -p $BKUPDATE

# File where directories are specified
CONFIG="config.txt"

while read SOURCE
do
    DESTINATION="/Users/michaelgarrison/"
    OUTPUT=$BKUPDATE"/Backup_"$SOURCE"_"$(date +%Y)-$(date +%m)-$(date +%d)".zip"
    (cd /Users/michaelgarrison/; zip -r $OUTPUT $SOURCE)
done < $CONFIG 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-25T17:04:43.777

`zip -r backup Desktop/* Documents/* Pictures/*`

这会将桌面、文档和图片下的所有文件压缩到一个名为`backup.zip`

各种技巧是从 config.txt 文件中读取列表，大概是一个垂直列表或数组，并使其成为一个长字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T17:26:23.173

请阅读评论和答案，他们很好地回答了您的问题！

*   把不断的事情排除在循环之外

> OUTPUT="/Users/michaelgarrison/"$BKUPDATE"/Backup_"$(date +"%Y-%m-%d")".zip" DESTINATION="/Users/michaelgarrison/" <------ --- 你需要这个吗？我想你不会
> 
> ```
> while read SOURCE
> do
>     zip -r $OUTPUT $SOURCE
> done < $CONFIG 
> ```

如果您想多次执行此操作，可以使用[rsync](http://wiki.ubuntuusers.de/rsync)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T17:00:51.570

我想我只是回答了我自己的问题，但我不会将其删除，而是将其留在这里以供将来参考。我所做的是将每次传递的输出更改为相同的 zip 文件。

我所做的是改变：

```
while read SOURCE
do
    DESTINATION="/Users/michaelgarrison/"
    OUTPUT=$BKUPDATE"/Backup_"$SOURCE"_"$(date +%Y)-$(date +%m)-$(date +%d)".zip"
    (cd /Users/michaelgarrison/; zip -r $OUTPUT $SOURCE)
done < $CONFIG 
```

至：

```
OUTPUT=$BKUPDATE"/Backup_"$(date +%Y)-$(date +%m)-$(date +%d)".zip"
while read SOURCE
do
    DESTINATION="/Users/michaelgarrison/"
    (cd /Users/michaelgarrison/; zip -r $OUTPUT $SOURCE)
done < $CONFIG 
```

# android - 如何更新菜单项？

> ID：15620421
> 
> 赞同：0
> 
> 时间：2013-03-25T16:52:40.393
> 
> 标签：android, menu-items

我创建了一个应用程序，我在其中更改了一个菜单项，当我检查时，应用程序可以处理这些更改。但是当我重新启动应用程序时，我会丢失更改，尽管更改的文件存在于内部存储中。我使用该功能`public boolean onMenuOpened(int featureid, Menu menu) {}`进行更改。我想保留菜单的一部分并更改另一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T17:05:08.087

不会保存菜单更改。您可以使用[OnPrepareOptionsMenu](http://developer.android.com/reference/android/app/Activity.html#onPrepareOptionsMenu%28android.view.Menu%29)根据某些属性修改菜单。

```
public boolean onPrepareOptionsMenu (Menu menu) {
    if(disableSomething) {
        menu.findItem(R.id.someItemToDisable).setEnabled(false);
    }
    return true;
} 
```

# objective-c - Objective C 的字典问题 (NSNumber +NumberWithInt)

> ID：15620425
> 
> 赞同：-1
> 
> 时间：2013-03-25T16:52:53.023
> 
> 标签：objective-c, nsnumber

在编写我的字典以创建 CG 缩略图时，如果我将值直接映射到 int 它完美地工作：

```
 NSDictionary* d = [NSDictionary dictionaryWithObjectsAndKeys:
                       (id)kCFBooleanTrue, kCGImageSourceShouldAllowFloat,
                       (id)kCFBooleanTrue, kCGImageSourceCreateThumbnailWithTransform,
                       (id)kCFBooleanTrue, kCGImageSourceCreateThumbnailFromImageAlways,
                       [NSNumber numberWithInt:56], kCGImageSourceThumbnailMaxPixelSize,
                       nil];
.
.
.
.
.
CGImageRef imref = CGImageSourceCreateThumbnailAtIndex(src, 0, (CFDictionaryRef)d); 
```

现在我希望能够将该值 (56) 更改为可以在界面中更改的属性，因此我在标题中创建了一个 int

```
my.h
int thumbSize;

//within my init method Iinitialize it:
        thumbSize = 56;
//then I change the reference in the dictionary:

    NSDictionary* d = [NSDictionary dictionaryWithObjectsAndKeys:
                       (id)kCFBooleanTrue, kCGImageSourceShouldAllowFloat,
                       (id)kCFBooleanTrue, kCGImageSourceCreateThumbnailWithTransform,
                       (id)kCFBooleanTrue, kCGImageSourceCreateThumbnailFromImageAlways,
                       [NSNumber numberWithInt:thumbSize], kCGImageSourceThumbnailMaxPixelSize,
                       nil]; 
```

如果我这样做，它会崩溃并出现以下错误：

```
3 月 25 日 11:39:49 Charles-Romestants-MacBook.local PhotoMosaic[3583] : ImageIO: CGImageSourceCreateWithData 数据参数为零
3 月 25 日 11:39:49 Charles-Romestants-MacBook.local PhotoMosaic[3583] : ImageIO: CGImageSourceCreateImageAtIndex 图像源参数为 nil
2013-03-25 11:39:49.197 PhotoMosaic[3583:707] *** -[__NSArrayM insertObject:atIndex:]：对象不能为 nil
2013-03-25 11:39:49.201 PhotoMosaic[3583:707] (
    0 核心基础 0x00007fff912ccb06 __exceptionPreprocess + 198
    1 libobjc.A.dylib 0x00007fff8bc833f0 objc_exception_throw + 43
    2 核心基础 0x00007fff9127d27a -[__NSArrayM insertObject:atIndex:] + 282
    3 PhotoMosaic 0x00000001000023bf -[BlendingView setMosaicImages:] + 1071
    4 PhotoMosaic 0x0000000100003034 -[控制器创建马赛克：] + 84
    5 AppKit 0x00007fff8ec3d989-[NSApplication sendAction:to:from:] + 342
    6 AppKit 0x00007fff8ec3d7e7-[NSControl sendAction:to:] + 85
    7 AppKit 0x00007fff8ec3d71b-[NSCell_sendActionFrom:] + 138
    8 AppKit 0x00007fff8ec3bc03-[NSCell tr​​ackMouse:inRect:ofView:untilMouseUp:] + 1855
    9 AppKit 0x00007fff8ec3b451-[NSButtonCell tr​​ackMouse:inRect:ofView:untilMouseUp:] + 504
    10 AppKit 0x00007fff8ec3abcc -[NSControl mouseDown:] + 820
    11 AppKit 0x00007fff8ec3253e-[NSWindow 发送事件：] + 6853
    12 AppKit 0x00007fff8ec2e674-[NSApplication sendEvent:] + 5761
    13 AppKit 0x00007fff8eb4424a -[NSApplication 运行] + 636
    14 AppKit 0x00007fff8eae8c06 NSApplicationMain + 869
    15 PhotoMosaic 0x0000000100001d52 主 + 34
    16 PhotoMosaic 0x0000000100001d24 开始 + 52
)

```

为什么会这样，我正在传递 NSNumber +numberWithInt 一个 int ......

[编辑] 添加整个方法：

```
-(void)setMosaicImages:(NSMutableArray *)_mosaicImages
{
    NSLog(@"Entering here in setMosaicImages, we have %lu images",_mosaicImages.count);
    mosaicImages = _mosaicImages;
    CGImageSourceRef source;

    source = CGImageSourceCreateWithData((CFDataRef)[canvasImage TIFFRepresentation], NULL);
    CGImageRef image =  CGImageSourceCreateImageAtIndex(source, 0, NULL);
    CGColorSpaceRef colorspace = CGColorSpaceCreateDeviceRGB();
    CGContextRef ctx = CGBitmapContextCreate(NULL,
                                             CGImageGetWidth(image), CGImageGetHeight(image),
                                             8, CGImageGetWidth(image) * 4,
                                             colorspace, kCGImageAlphaPremultipliedLast);
    CGColorSpaceRelease(colorspace);

    NSDictionary* d = [NSDictionary dictionaryWithObjectsAndKeys:
                       (id)kCFBooleanTrue, kCGImageSourceShouldAllowFloat,
                       (id)kCFBooleanTrue, kCGImageSourceCreateThumbnailWithTransform,
                       (id)kCFBooleanTrue, kCGImageSourceCreateThumbnailFromImageAlways,
                       [NSNumber numberWithInt:thumbSize], kCGImageSourceThumbnailMaxPixelSize,
                       nil];

//thumbSize is declared in.h and initialized in init method with a value of 56 (int thumbSize; then thumbSize = 56; if I change the parameter to literal 56 it works.    
//create NSMUTABLE array with thumbnails for each mosaic image
    mosaicCGThumbs = [[NSMutableArray alloc]initWithCapacity:mosaicCGThumbs.count];
    NSURL* url;
    for(int i=0; i<mosaicImages.count;i++)
    {
        url = [NSURL fileURLWithPath:[(myImageObject *)[mosaicImages objectAtIndex:i] getPath]];
        CGImageSourceRef src = CGImageSourceCreateWithURL((CFURLRef)url, NULL);
        CGImageRef imref = CGImageSourceCreateThumbnailAtIndex(src, 0, (CFDictionaryRef)d);
        [mosaicCGThumbs addObject:imref];
        CGImageRelease(imref);

    }
    CGRect r;
    CGImageRef thumbRef;
    int x_offset=0;
    int y_offset = 0;
    while(y_offset < CGImageGetHeight(image))
    {
        while (x_offset<CGImageGetWidth(image))
        {
            thumbRef = (CGImageRef)[mosaicCGThumbs objectAtIndex:arc4random() % mosaicCGThumbs.count];
            r = CGRectMake(x_offset, y_offset, CGImageGetWidth(thumbRef), CGImageGetHeight(thumbRef));
            CGContextSetBlendMode(ctx, kCGBlendModeCopy);
            CGContextDrawImage(ctx, r, thumbRef);

            x_offset+=CGImageGetWidth(thumbRef);
        }
        x_offset=0;
        y_offset+=56;
    }
    NSLog(@"Finished Drawing Mosaic BG");

    image = CGBitmapContextCreateImage(ctx);
    //
    //    CIImage* newImage = [[[CIImage alloc] initWithCGImage:image] autorelease];
    //    CGImageRelease(image);
    CGContextRelease(ctx);
    canvasImage = [[NSImage alloc] initWithCGImage:image size:NSZeroSize];
    mosaicPresent=YES;
    [self setNeedsDisplay:YES];

  } 
```

为调试目的添加更多信息：

我决定看看创建的 NSDictionary 有什么不同，所以

我添加了以下代码和一个要检查的断点：

```
 NSDictionary* d = [NSDictionary dictionaryWithObjectsAndKeys:
                   (id)kCFBooleanTrue, kCGImageSourceShouldAllowFloat,
                   (id)kCFBooleanTrue, kCGImageSourceCreateThumbnailWithTransform,
                   (id)kCFBooleanTrue, kCGImageSourceCreateThumbnailFromImageAlways,
                   [NSNumber numberWithInt:thumbSize], kCGImageSourceThumbnailMaxPixelSize,
                   nil];

NSDictionary* d2 = [NSDictionary dictionaryWithObjectsAndKeys:
                   (id)kCFBooleanTrue, kCGImageSourceShouldAllowFloat,
                   (id)kCFBooleanTrue, kCGImageSourceCreateThumbnailWithTransform,
                   (id)kCFBooleanTrue, kCGImageSourceCreateThumbnailFromImageAlways,
                   [NSNumber numberWithInt:56], kCGImageSourceThumbnailMaxPixelSize,
                   nil]; 
```

用调试器查看它，我得到了这个：（看看两者在缩略图像素大小的值上有何不同。将对此进行更多研究。

```
(gdb) po d
{
    kCGImageSourceCreateThumbnailFromImageAlways = 1;
    kCGImageSourceCreateThumbnailWithTransform = 1;
    kCGImageSourceShouldAllowFloat = 1;
    kCGImageSourceThumbnailMaxPixelSize = 0;
}
(gdb) po d2
{
    kCGImageSourceCreateThumbnailFromImageAlways = 1;
    kCGImageSourceCreateThumbnailWithTransform = 1;
    kCGImageSourceShouldAllowFloat = 1;
    kCGImageSourceThumbnailMaxPixelSize = 56;
}

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T23:48:45.857

您确定`thumbSize`执行此代码时是 56 吗？似乎不太可能。

我在你的 pastebin 中看到你有一个`-init`和一个`-initWithFrame:`方法。如果你用 初始化你的对象`-initWithFrame:`，那么你的`-init`方法可能没有被调用，因此没有设置`thumbSize`. 这是一个奇怪的怪癖（IMO；其他人可能不同意），标准实现`-initWithFrame:`不调用`-init`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T23:52:10.877

好的，感谢您的帮助：错误比预期的还要简单，没有调用 init 方法来初始化变量，我不得不将它放在 initWithFrame 中：

```
- (id)init
{
    self = [super init];
    if (self) {
        // Initialization code here.
        mosaicPresent = NO;
    }

    return self;
}
- (id)initWithFrame:(NSRect)frameRect
{
    self = [super initWithFrame:frameRect];
    invalidateCanvas = YES;
    thumbSize = 56;

    return self;
} 
```

# image - 将图像从 HTTP 响应转换为 Grails 中的字节数组？

> ID：15620429
> 
> 赞同：1
> 
> 时间：2013-03-25T16:53:25.613
> 
> 标签：image, http, servlets, grails, response

我在控制器中有一个 Grails 动作。在这个动作中，我使用：

```
def url = "http://www.somedomain.com/image/test.jpg"
def requestFactory = new SimpleClientHttpRequestFactory()
def request = requestFactory.createRequest(uri, method)
...
def response = request.execute()
  if(statusCode == HttpStatus.OK) {
def responseImage = response.body.text
} 
```

这会在我的 response.body.text 对象中返回一个 jpg 图像。我不知道如何处理这个图像。如何将此图像转换为字节数组？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T17:58:47.257

`ClientHttpResponse.getBody()`返回一个`InputStream`，所以你可以做`response.body.bytes`（​​使用 Groovy-JDK [InputStream.getBytes()](http://groovy.codehaus.org/groovy-jdk/java/io/InputStream.html#getBytes%28%29)扩展）而不是`response.body.text`

# .net - Crystal Reports：十进制参数字段在页脚部分显示为整数

> ID：15620430
> 
> 赞同：0
> 
> 时间：2013-03-25T16:53:29.580
> 
> 标签：.net, visual-studio-2010, crystal-reports, decimal, subreport

我在页脚部分显示十进制值时遇到问题。实际上，我正在使用参数字段在子报表的页脚部分显示某个统计信息。当我将它放在详细信息部分时，小数显示正确。有没有人遇到同样的问题？

```
Example:
10 250,00 instead of 10 250,74: in the details section the correct value is shown. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T18:19:07.617

[请参阅我在公式 CR 中对小数点四舍五入](https://stackoverflow.com/questions/15462307/round-decimal-in-formula-cr/15462717#15462717)的回答。增加小数位而不是减少它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T17:12:05.360

Crystal 报表不适用于数字参数，我总是发现通过添加公式`CDbl ({?Parameter})`并在报表中使用公式将其转换为双精度更容易，但是这是使用水晶设计**器而不是通过代码进行操作**。

# php - 使用 jquery、ajax、json、php 进行实时搜索

> ID：15620435
> 
> 赞同：1
> 
> 时间：2013-03-25T16:53:44.197
> 
> 标签：php, javascript, jquery, json

我正在寻找实时搜索解决方案或使用 ajax 从文件中获取数据的 jquery 自动完成功能（稍后从 db 中获取）

假设我有这个带有数据的 php 文件：

```
[ 
 {ID: "1", "Name": "User 1"}, 
 {ID: "2", "Name": "User 2"},  
 {ID: "3", "Name": "User 3"}, 
 {ID: "4", "Name": "User 4"}
] 
```

* * *

我在网上发现这个代码可以工作，但它只扫描维基百科，我该怎么做才能扫描我的 php 文件？[http://jsfiddle.net/TzQJP/](http://jsfiddle.net/TzQJP/)

```
<html>
  <head>
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <title>Comperio Super Simple Instant Search</title>
  </head>
  <body>
    <h1>Search Wikipedia!</h1>
    <br />
    <input id="searchterm" />
    <button id="search">search</button>
    <div id="results"></div>
    <script>
      $("#searchterm").keyup(function(e){
        var q = $("#searchterm").val();
        $.getJSON("http://en.wikipedia.org/w/api.php?callback=?",
        {
          srsearch: q,
          action: "query",
          list: "search",
          format: "json"
        },
        function(data) {
          $("#results").empty();
          $("#results").append("<p>Results for <b>" + q + "</b></p>");
          $.each(data.query.search, function(i,item){
            $("#results").append("<div><a href='http://en.wikipedia.org/wiki/" + encodeURIComponent(item.title) + "'>" + item.title + "</a><br>" + item.snippet + "<br><br></div>");
          });
        });
      });
    </script>
    <div style="position:absolute;bottom:0;right:0;text-align:right">
      <a href="http://blog.comperiosearch.com/author/fmcdowall/">Fergus McDowall</a> 2012<br>
      <br>
    </div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T17:08:37.637

为什么不使用：http: [//jqueryui.com/autocomplete/](http://jqueryui.com/autocomplete/)

来自同一网站的示例：

```
$(function() {
 var availableTags = [
  "ActionScript",
  "AppleScript",
  "Asp",
  "BASIC",
  "C"
 ];
 $( "#tags" ).autocomplete({
   source: availableTags //OR path to your PHP script
 });
}); 
```

并且您可以在返回的源代码中有指向您的 PHP 脚本的路径，而不是 availableTags

```
echo json_encode($array_of_items); 
```

如果您仍然想使用您提供的代码，请确保您`echo json_encode($array);`在 PHP 脚本上使用，因为响应 ajax 期望的类型应该是`json`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T16:56:38.837

通过更改`"http://en.wikipedia.org/w/api.php?callback=?"`您的 PHP 文件路径的路径，您可以完成它。确保您的 JSON 结果格式正确且有效。

*不要只从互联网上获取代码片段并使用它。至少了解它的作用。它可以帮助您根据需要扩展代码。*

# css - 将 AM & PM 包裹在等距的 s 中

> ID：15620438
> 
> 赞同：1
> 
> 时间：2013-03-25T16:53:48.257
> 
> 标签：css, timeline, html-table

从头开始构建面积图。我在顶部有 X 轴，需要为每个时间条目包装“AM”和“PM”限定符，使其低于每个单元格中的时间。我无法更改单元格的大小。TD 宽度在 CSS 中设置为 4%（总共 25 个时间段，这在我更改窗口大小时使它们保持等距）并且我打算计算每个单元格开始和结束的位置以确定画布上的笔划坐标，这将往下走。

那么有什么方法可以包装每一个吗？

前任：

```
12:00  1:00
  PM    PM 
```

将宽度设置为 4% 时，我注意到它用两位数包裹了宽度。不过，我真的不想在每个个位数的时间条目前面加上 0。

代码：

```
<table id="timeline">
<tr>
    <td class="0">12:00 AM</td><td class="1">1:00 AM</td><td class="2">2:00 AM</td><td class="3">3:00 AM</td><td class="4">4:00 AM</td><td class="5">5:00 AM</td><td class="6">6:00 AM</td><td class="7">7:00 AM</td>
    <td class="8">8:00 AM</td><td class="9">9:00 AM</td><td class="10">10:00 AM</td><td class="11">11:00 AM</td><td class="12">12:00 PM</td><td class="13">1:00 PM</td><td class="14">2:00 PM</td><td class="15">3:00 PM</td>
    <td class="16">4:00 PM</td><td class="17">5:00 PM</td><td class="18">6:00 PM</td><td class="19">7:00 PM</td><td class="20">8:00 PM</td><td class="21">9:00 PM</td><td class="22">10:00 PM</td><td class="23">11:00 PM</td>
    <td class="24">12:00 AM</td>
</tr> 
```

（每个 td 都有一个类，因为我需要稍后单独调用每个类进行计算）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T20:03:11.287

由于您已经为每个 td 设置了不同的类，因此您可以编写类似

```
td:after {
    top: 20px;
    left: -25px;
    position: relative;
}

.c0:after {
   content: "PM"; 
}

.c1:after, 
.c2:after,
.c3:after {
    content: "AM"; 
```

}

也就是说，将 AM 和 PM 标签生成为伪元素，样式化为真正的 td。

该表从 AM / PM 文本中剥离：

```
<table id="timeline">
<tr>
<td class="c0">12:00</td>
<td class="c1">1:00</td>
<td class="c2">2:00</td> 
```

我更改了类名，使它们以字母开头。

[Jsfiddle 中的演示](http://jsfiddle.net/vals/7fwZV/)

# ajax - 添加 2 下拉列表和文本字段的值一起在 yii 中的另一个文本字段中显示结果

> ID：15620444
> 
> 赞同：0
> 
> 时间：2013-03-25T16:54:09.853
> 
> 标签：ajax, drop-down-menu, yii

我有两个下拉列表和一个文本字段。我想将它们的值加在一起并使用 Yii 在另一个文本字段中显示结果。在 _form 我有这个。

```
 <tr>
    <td><?php echo $form->labelEx($model,'typeofpaper'); ?></td>
    <td><?php $data = CHtml::listData(PaperType::model()->findAll(),'id','title'); 
              if(isset($_REQUEST['id']))
              {
                  $sel = $_REQUEST['id'];
              } else {
                  $sel =''; 
              }
            echo $form->dropDownList($model, 'typeofpaper', $data, array('prompt'=>'Type of Paper','options'=>array($sel=>array('selected'=>true)))); 

        ?>
        <?php echo $form->error($model,'typeofpaper'); ?></td>
  </tr>

   <tr>
    <td><?php echo $form->labelEx($model,'deadline'); ?></td>

    <td><?php   echo $form->dropDownList($model,'deadline',

      array('3hrs'=> '3 hrs', '6hrs'=>'6 hrs', '12hrs'=>'12 hrs', '24hrs'=>'1 day', '48hrs'=>'2 days', '72hrs'=>'3 days',
            '96hrs'=>'4 days', '120hrs'=>'5 days', '144hrs'=>'6 days', '168hrs'=>'7 days', '172hrs'=>'8 days', '196hrs'=>'9 days',
            '220hrs'=>'10 days', '244hrs'=>'11 days', '268hrs'=>'12 days', '292hrs'=>'13 days', '316hrs'=>'14 days', '340hrs'=>'15 days'),array('empty' => 'Select Urgency Level')); ?>
        <?php echo $form->error($model,'deadline'); ?> </td>
  </tr>
  <tr>
    <td><?php echo $form->labelEx($model,'nopages'); ?></td>
    <td><?php echo $form->textField($model,'nopages'); ?>
        <?php echo $form->error($model,'nopages'); ?></td>
  </tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T20:27:41.780

尝试并遵循这些准则

根据 yii`public string dropDownList(CModel $model, string $attribute, array $data, array $htmlOptions=array ( ))`的下拉菜单。

因为 $data 并假设 $deadlineData = array('3hrs'=>'3 hrs','6hrs'=>'6 hrs'...) 是数组并表示列表选项（值=>显示），你可以使用 array_merge($data,$deadlineData) 组合两个数组并使用 foreach 循环并获取组合结果。然后您可以继续在文本字段中输出结果

# javascript - 如何管理此背景图像和班级的悬停行为？

> ID：15620448
> 
> 赞同：0
> 
> 时间：2013-03-25T16:54:15.553
> 
> 标签：javascript, jquery, css, hover

我有一个加载到 DIV 中的图像：

```
.playerSkipForward
{
    background-image: url("../images/player/forward.png");
    background-repeat: no-repeat;
    cursor: pointer;
} 
```

带有悬停图像集

```
.playerSkipForward:hover
{
    background-image: url("../images/player/forward-hover.png");
} 
```

然后在某个时刻，我向其中添加了一个类，该类会更改图像并使其看起来“不活动”

```
$(track).parents().find('.playerSkipForward').addClass('playerSkipForward_inactive') 
```

像这样在我的 CSS 中声明了新的（非活动的）类

```
.playerSkipForward_inactive
{
    background-image: url("../images/player/forward_inactive.png");
    background-repeat: no-repeat;
    cursor: default;
} 
```

图像正确更改为上述类中的图像。但是，它仍然悬停并改变颜色。我不想添加类似的解除绑定，`.on('hover')`因为绑定可能很难管理。有没有办法只用添加的 css 类来覆盖悬停？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T17:24:08.087

查看您的评论，我认为这是[CSS specificity](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)的问题。

尝试使用以下 CSS 类而不是您当前的`.playerSkipForward_inactive`：

```
.playerSkipForward.playerSkipForward_inactive,
.playerSkipForward.playerSkipForward_inactive:hover
{
    background-image: url("../images/player/forward_inactive.png");
    cursor: default;
} 
```

请注意，我还删除了该`background-repeat`属性。您已经在`.playerSkipForward`规则中为此设置了相同的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T16:58:32.210

下面的代码应该可以解决问题。`important`只需使用关键字覆盖非活动状态的悬停功能。

```
.playerSkipForward_inactive:hover
{
    background-image: url("../images/player/forward_inactive.png") !important;
    background-repeat: no-repeat !important;
    cursor: default !important;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T16:56:42.090

```
.playerSkipForward_inactive, .playerSkipForward_inactive:hover
{
    background-image: url("../images/player/forward_inactive.png");
    background-repeat: no-repeat;
    cursor: default;
} 
```

如果你同时使用两个类，试试这个更具体的选择器：

```
.playerSkipForward.playerSkipForward_inactive, 
.playerSkipForward.playerSkipForward_inactive:hover
    { 
    ...
    } 
```

或更常见和简单的：

```
.playerSkipForward.inactive, 
.playerSkipForward.inactive:hover
    { 
    ...
    } 
```

# javascript - 将属性转换为字符串

> ID：15620451
> 
> 赞同：0
> 
> 时间：2013-03-25T16:54:23.207
> 
> 标签：javascript, string, variables, attributes

我知道这确实是基本的 javascript，但我对 javascript 真的不是很熟悉。

我在这里尝试的是在我想要的地方添加 prettyPhoto 参数。首先我从链接中获取 href 属性，然后将其转换为字符串，然后使用最后 4 个字母来检查它是链接到图像还是某些 HTML 页面。这段代码运行良好，但我的 Firebug 仍然向我发送一个错误：

类型错误：**$hrefy**未定义

```
txt = $hrefy.toString(); 
```

如果 $hrefy 未定义，脚本如何工作以及如何定义好。此错误仅阻止用于过滤我的投资组合的 javascript 代码，而其他 js 工作正常。

```
$(document).ready(function(){
$("a[data-rel^='prettyPhoto']").prettyPhoto();

$hrefy = $("article a").has('img').attr("href");
txt = $hrefy.toString();
var lastChar = txt.substr(txt.length - 4);
if (lastChar=='.jpg') {
    $('article a').has('img').attr('data-rel', 'prettyPhoto'); 
}

$('a img').click(function () {  
    var desc = $(this).attr('title');  
    $('a').has('img').attr('title', desc);  
}); 
```

});

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T17:41:16.790

查看您链接的页面的源代码后，我注意到在任何地方都没有`<article>`声明任何元素。因此，您的 jquery 选择器不返回任何内容，并且`attr('href')`是`undefined`.

# c# - TableLayoutPanel 显示垂直滚动

> ID：15620454
> 
> 赞同：16
> 
> 时间：2013-03-25T16:54:27.467
> 
> 标签：c#, scrollbar, tablelayoutpanel, vertical-scrolling, vertical-scroll

我有 TableLayoutPanel 用于动态创建 AutoScroll = true 的控件。添加新控件时它工作正常。但是当我删除并且所有控件都可见时，垂直滚动是可见的。这里有一些截图：

预期/正确的滚动可见性：

![在此处输入图像描述](../Images/d336d1e0140ddd973d54f6c4559b0a24.png)

不正确的可见性：

![在此处输入图像描述](../Images/7b8d0691fc2443a7fc0d4c2e75bf00ca.png)

有任何想法吗？

更新：这是一些代码

```
tableLayoutPanel1.SuspendLayout();
tableLayoutPanel1.RowCount = 0;
tableLayoutPanel1.RowStyles.Clear();
tableLayoutPanel1.AutoScroll = true;
tableLayoutPanel1.Padding = new Padding(0, 0, SystemInformation.VerticalScrollBarWidth, 0);
foreach (var item in objects)
{
     tableLayoutPanel1.RowCount++;
     tableLayoutPanel1.RowStyles.Add(new RowStyle(SizeType.AutoSize));
     tableLayoutPanel1.Controls.Add(CreateNewItem(item));
 }

 tableLayoutPanel1.RowCount++;
 tableLayoutPanel1.RowStyles.Add(new RowStyle(SizeType.AutoSize));
 tableLayoutPanel1.Controls.Add(CreateAddButton());

 tableLayoutPanel1.ResumeLayout(); 
```

和删除代码

```
tableLayoutPanel1.SuspendLayout();
tableLayoutPanel1.Controls.Remove(item);
tableLayoutPanel1.RowStyles.RemoveAt(0);
tableLayoutPanel1.RowCount--;
tableLayoutPanel1.ResumeLayout(); 
```

AutoSize 为 true，AutoSizeMode 为 GrowAndShrink

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2014-09-01T07:50:43.703

问题涉及[TableLayoutPanel 滚动](https://connect.microsoft.com/VisualStudio/feedback/details/276291/tablelayoutpanel-with-autoscroll-incorrectly-shows-horizontal-scrollbar-when-only-vertical-should-show-not-compensating-for-the-vertical-scrollbars-size)。
您必须使用 Panel 而不是 TableLayoutPanel 进行滚动。
这是解决此问题的示例（用于垂直滚动）：

*   设置您的 TableLayoutPanel 属性如下：
    *   Dock = DockStyle.Top
    *   自动尺寸 = 真
    *   AutoSizeMode = AutoSizeMode.GrowAndShrink
    *   自动滚动 = 假。
*   将您的 TableLayoutPanel 放入具有属性的面板中：
    *   Dock = DockStyle.Fill
    *   自动滚动 = 真
    *   自动尺寸 = 假。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T17:29:05.150

当您删除动态控件时，您需要删除在添加过程中插入的额外行并将表格布局面板高度重新调整为小于滚动容器高度。

在添加过程中，表格布局面板的高度会增加，这由滚动容器处理；但是当您删除控件时，表格布局面板的高度不会降低它的高度以适合滚动容器。

一种方法是为行提供固定高度并将表格布局面板占用设置为“自动”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-09-17T18:35:27.097

最简单和最有趣的解决方案之一就是禁用和启用 **tableLayoutPanel1.AutoScroll**

在您的删除程序代码的末尾添加这些代码：

```
 tableLayoutPanel1.AutoScroll = False
    tableLayoutPanel1.AutoScroll = True 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T08:22:14.573

我将 tableLayoutPanel 插入到 XtraScrollableControl（Devexpress 控件）。tableLayoutPanel.Dock 设置为 Top，XtraScrollableControl.Dock 设置为 Fill。这个解决方案没有解决这个问题，但我得到了我需要的行为。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-01T16:08:59.310

我计算了 TableLayoutPanel 中的行数，看看有多少行适合。低于我为添加和删除方法设置 AutoScroll = false 的量。卷轴将出现在大集合上，而在小集合上消失。

```
if (tableLayoutPanel.RowCount < 15)
{
    panel1.AutoScroll = false;
}
else
{
     panel1.AutoScroll = true;
} 
```

# r - 求解方程 R 的函数

> ID：15620456
> 
> 赞同：0
> 
> 时间：2013-03-25T16:36:52.327
> 
> 标签：r

我正在尝试解决

```
 $\sum_{j=1}^{180} x^{a_j} = 1$ 
```

![](../Images/e4106cf0f31d3fb144aff97a391121fd.png)

我创建了两个函数：

```
f1 <- function(x){c(rep(x,180))}
f2 <- function(x){sum(f1(x)^vec) - 1} 
```

`vec`我的 `a_j`向量在哪里。

`uniroot`不起作用。我应该使用哪个功能？

有更好的语法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T12:37:50.417

为什么`uniroot`实际上不起作用？只要你正确定义你的函数和寻找它的间隔应该工作：

```
aj <- c(-4,-5,-3,-4,-2,-3,-1,-2,-7,-6,-5,-8,-7,-6,-6,-7,-5,-6,
        -4,-5,-3,-4,-9,-8,-7,-10,-9,-8,-1,-2,rep(-1,150))
f <- function(x,vec){sum(x^vec)-1}
uniroot(f, interval=c(-100,100), vec=aj)
$root
[1] -0.518658

$f.root
[1] -0.009276057

$iter
[1] 21

$estim.prec
[1] 6.103516e-05 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T17:07:15.097

您可以使用`polyroot`，例如

```
 polyroot(c(-1,rep(1,180))) 
```

这里

```
 p(x) = -1 + 1 * x + … + 1 * x^180 
```

**编辑**使用你的向量*aj*

目前尚不清楚你的向量是什么`vec`，我想你想要这样的东西：

```
 polyroot(c(-1,vec)) 
```

哪里 vec

```
 vec = (a1,a2,..............,a180) 
```

**OP澄清后**编辑：****

 **OP希望找到具有负指数的多项式的根。解决方案是通过可以应用的指数的最大值来分解`polyroot`。

```
vec <- c(-4,-5,-3,-4,-2,-3,-1,-2,-7,-6,-5,-8,-7,-6,-6,-7,-5,-6,
         -4,-5,-3,-4,-9,-8,-7,-10,-9,-8,-1,-2,rep(-1,150))
ma <- max(abs(vec))
vec <- sort(ma+vec)
polyroot(as.data.frame(table(vec))$Freq) 
```**

# html - htaccess 对重写规则不起作用

> ID：15620468
> 
> 赞同：0
> 
> 时间：2013-03-25T16:55:02.697
> 
> 标签：html, apache, dokuwiki

我使用 Dokuwiki 作为我的网站。我有一个关于 htaccess 重写规则的快速问题。我有以下配置。这些建议来自[Dokuwiki 帮助](https://www.dokuwiki.org/rewrite)。

```
Options -Indexes -MultiViews +FollowSymLinks
RewriteEngine on

RewriteCond %{HTTPS} !=on
RewriteRule ^lib/exe/xmlrpc.php$      https://%{SERVER_NAME}%{REQUEST_URI} [L,R=301]

RewriteRule ^_media/(.*)              lib/exe/fetch.php?media=$1  [QSA,L]
RewriteRule ^_detail/(.*)             lib/exe/detail.php?media=$1  [QSA,L]
RewriteRule ^_export/([^/]+)/(.*)     doku.php?do=export_$1&id=$2  [QSA,L]
RewriteRule ^$                        doku.php  [L]
RewriteCond %{REQUEST_FILENAME}       !-f
RewriteCond %{REQUEST_FILENAME}       !-d
RewriteRule (.*)                      doku.php?id=$1  [QSA,L]
RewriteRule ^index.php$               doku.php

RewriteCond %{HTTP_HOST} ^mydomain.com$ [NC]
RewriteRule ^(.*)$ http://www.mydomain.com/$1 [R=301,L] 
```

我承认我不明白发生了什么。重要的是我想要

```
http://mydomain.com 
```

改为

```
http://www.mydomain.com 
```

以及任何子域。另外，我想摆脱丑陋的 Dokuwiki 语法，它附加了诸如 doku.php 之类的东西？到链接的末尾。

目前，使用这个 .htaccess 文件的转换是：

```
[Good] www.mydomain.com --> www.mydomain.com
[Good] www.mydomain.com/mypage --> www.mydomain.com/mypage

[Bad] mydomain.com --> www.mydomain.com/doku.php
[Bad] mydomain.com/mypage --> www.mydomain.com/doku.php?id=mypage 
```

所以你看，如果我在事物前面附加 www 似乎可以正常工作，但是当我不这样做时，重写规则会附加正确的 www，但是现在丑陋的 wiki 语法也伴随着站点名称（doku. php 和 id= 部分）。

我在 htaccess 配置中哪里出错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T15:18:57.590

TSGM，这看起来不错，除了你将 mydomain.com 重写为 www.mydomain.com 作为最后两行。将最后两条线向上移动，以便它们紧随其后`RewriteEngine on`，这应该可以解决它。

原因是（有时）触发了重定向以创建“干净的 url”，而当这种情况发生时，对 www 的重写永远不会被执行。

通过将两条线向上移动，您将强制 www 重写在 doku 重写开始之前首先发生。

# xml - 'Null' 的 XSLT/XPath 测试

> ID：15620469
> 
> 赞同：5
> 
> 时间：2013-03-25T16:55:06.977
> 
> 标签：xml, xslt, xpath

我有以下检查xml中的字符串...但是，我需要创建另一个测试来检查`$validItems`第一行的变量中是否有“空”或没有文本...

```
<xsl:if test="$validItems[(Caption | CalltoAction)[string(.)]]">
 <div class="text">
   <xsl:choose>
     <xsl:when test="$horizontal">
       <div class="holder">
         <div class="frame">
           <div class="slides-descriptions">
             <xsl:apply-templates select="$validItems" mode="horizontal"/>
           </div>
           <div class="switcher"/>
         </div>
       </div>
     </xsl:when>
     <xsl:otherwise>
       <div class="slides-descriptions">
         <xsl:apply-templates select="$validItems" mode="vertical"/>
       </div>
       <div class="switcher"/>
     </xsl:otherwise>
   </xsl:choose>
 </div>
</xsl:if> 
```

我将如何测试变量 xsl:if test=$validItems？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T20:11:18.393

如果我明白你的要求，

```
<xsl:if test="$validItems[(Caption | CalltoAction)[not(string(.))]]"> 
```

会做的。换句话说，“如果 $validItems 节点集中的元素具有字符串值为空的 Caption 或 CalltoAction 子元素”。你也可以说

```
<xsl:if test="$validItems[(Caption | CalltoAction)[. = '']]"> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-25T20:37:52.803

XPath 数据模型中不存在“Null”之类的东西。

至于“变量 $validItems 中没有文本”，这将有助于了解该变量的类型。如果它是单个元素节点（如您显示的代码示例中所示），并且您要测试的是它没有文本节点子节点，则测试将为`not($ValidItems/text())`. 如果您想测试它是否没有文本节点后代，请尝试`not(string($validItems))`或等效地使用`$validItems=''`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-09T03:31:48.197

这些答案都不适合我，我不知道是不是因为我通过 ODK xforms 使用 xpath。我确实使用这个解决方案让它工作：

```
string-length(string(/path/to/node)) = 0 
```

我已经在日期和数字上对此进行了测试。

# wcf - 实体框架左外连接不起作用

> ID：15620472
> 
> 赞同：0
> 
> 时间：2013-03-25T16:55:18.827
> 
> 标签：wcf, entity-framework

我有一个带有以下类的实体框架模型（我已经简化了这些类以便于查看）：

```
 PuzzleItem
 -PuzzleId (int, primary key)
 -Title

 PuzzleProgress
 -ProgressId (int, primary key)
 -PuzzleId (FK)
 -UserId (FK) 
```

在`PuzzleItem`我有许多级别。当`PuzzleProgress`用户完成上一个级别时，通过插入该级别的记录来跟踪用户处于哪个级别。`PuzzleProgress`首先，新用户将有一个条目`PuzzleId = 1`。

在我的代码中，我使用以下语句执行左外连接，这样我将获得所有谜题的列表，并向我指出哪个谜题尚未解决。[我从 StackOverflow](https://stackoverflow.com/questions/9500103/converting-a-left-outer-join-to-entity-framework)参考了这篇文章。

这是我的代码：

```
var result = from pzs in e.PuzzleItems
                         join prg in e.PuzzleProgresses on pzs equals prg.PuzzleItem
                         into pzs_prg_tbl
                         from pzs_prg in pzs_prg_tbl.DefaultIfEmpty()
                         where pzs_prg.UserId == userId
                         select new SimplePuzzleItem()
                         {
                             PuzzleId = pzs_prg.PuzzleId,
                             PuzzleName = pzs_prg.PuzzleItem.Title,
                             IsUnlocked = (pzs_prg == null?false:true)
                         }; 
```

运行代码后，只返回这个新用户的第一级（而`PuzzleItem`表有3条记录）。

我试过玩代码，但我上面粘贴的代码是我能到达的最近的，有人能指出我正确的方向吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T17:47:57.953

在没有看到更多代码的情况下很难准确地说出来，但`where pzs_prg.UserId == userId`可能会否定左外连接。

我的意思是，如果您打算这样做，`PuzzleItems LEFT JOIN PuzzleProgress`那么即使没有 PuzzleProgress，您也需要所有 PuzzleItems。但`where pzs_prg.UserId == userId`PuzzleProgress 的意思不能为 null，因为它必须有一个 UserId（值为 userId）。所以，你实际上有一个内部连接。

就个人而言，我不喜欢在 linq 中进行连接（左或内）的“正确”方式，所以这就是我更正 linq 语句的方式：

```
 var result = from pz in db.PuzzleItems
                     from pg in db.PuzzleProgresses
                                  .Where(pg => pg.PuzzleId == pz.PuzzleId)
                                  .Where(pg => pg.UserId == userId)
                                  .DefaultIfEmpty()
                     select new
                                {
                                    PuzzleId = pz.PuzzleId,
                                    PuzzleName = pz.Title,
                                    IsUnlocked = (pg != null)
                                }; 
```

这读起来更像是 SQL 连接，这是我很久以前学过的，所以它符合我的想法。

如果您想重构连接类型语法，请查看此['LINQ Joining in c# with multiple conditions'](https://stackoverflow.com/questions/3020442/linq-joining-in-c-sharp-with-multiple-conditions)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T17:37:46.947

我认为 where 子句正在过滤掉记录。您需要在左连接中包含 where 子句。像这样：

```
var result = from pzs in e.PuzzleItems
             join prg in e.PuzzleProgresses on new { pzs.PuzzleId, UserId = userId } equals new { prg.PuzzleId, prg.UserId }
             into pzs_prg_tbl
             from pzs_prg in pzs_prg_tbl.DefaultIfEmpty()
             select new SimplePuzzleItem()
             {
               PuzzleId = pzs_prg.PuzzleId,
               PuzzleName = pzs_prg.PuzzleItem.Title,
               IsUnlocked = (pzs_prg == null?false:true)
             }; 
```

# sql - JOIN 中的动态表名

> ID：15620475
> 
> 赞同：0
> 
> 时间：2013-03-25T16:55:23.623
> 
> 标签：sql, sql-server-2008-r2

我能够从动态值创建一个表，但是当我在连接中使用它时无法引用该表。

```
DECLARE @UserName varchar(5)
DECLARE @EmpRacfid varchar(max)
SET @UserName = RIGHT(SYSTEM_USER,5)
SET @EmpTable = 'dbo.Employee_' + @UserName

CROSS JOIN @EmpTable emp 
```

我收到以下消息：

> Msg 1087, Level 16, State 1, Line 19 必须声明表变量“@EmpTable”。

我也尝试过这样的事情，但它也失败了：

```
CROSS JOIN '[dbo].[Employee_' + @UserName + ']' emp 
```

我想知道是否有人这样做过，或者知道是否有可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:59:32.503

如果你想加入动态表名，那么你需要把你的整个脚本放在动态构造的sql中，并使用EXEC来执行整个动态sql。如下：

```
 'cross join' + '[dbo].[employee_'+@UserName+'] temp' .... 
```

# mysql - 单个表行中时间戳之间的 mySql TimeDiff

> ID：15620476
> 
> 赞同：0
> 
> 时间：2013-03-25T16:55:37.670
> 
> 标签：mysql

我在商店里有 500 个信息亭，并且有一个表格可以按商店 ID 跟踪每张印刷品的时间戳。我需要生成一个记录集，以秒为单位提供打印之间的时间。所有这些数据都存储在一个表中。每次打印都会插入一条记录，其中包含商店 ID 和时间戳。

表名 = 打印
ID store_id 时间戳
1 1 2013-3-1 00:00:01 2 2 2013-3-1 00:00:01
*
3 3
2013-3-1 00:00:01 4 2 2013-3- 1 00:00:12 *
5 3 2013-3-1 00:00:06
6 2 2013-3-1 00:00:15 *

我需要在所有商店#2 打印之间以秒为单位缩短时间。* 是为了方便您找到我需要比较的记录。

记录集结果如下：

id store_id myTimeDiffSeconds
2 2 0
4 2 11
6 2 3

这需要简单快速。我可以在没有临时表的情况下执行此操作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T10:25:01.430

您可以通过两种方式编写查询
1\. 使用相关查询
2\. 使用会话变量

第一个正是ethrbunny指出的

```
mysql> SELECT t1.id,
          t1.store_id,
          timestampdiff(second,IFNULL( (SELECT MAX(t2.timestamp) 
                                          FROM print t2 
                                         WHERE t2.store_id=2 
                                               AND t2.timestamp< t1.timestamp)
                       ,t1.timestamp),t1.timestamp) myTimeDiffSeconds
     FROM print t1 
    WHERE t1.store_id=2 ORDER BY t1.timestamp;
+------+----------+-------------------+
| id   | store_id | myTimeDiffSeconds |
+------+----------+-------------------+
|    2 |        2 |                 0 |
|    4 |        2 |                11 |
|    6 |        2 |                 3 |
+------+----------+-------------------+
3 rows in set (0.00 sec) 
```

另一种方法是使用会话变量来保存以前的时间，但是在这种情况下，我们需要第一次获取最小时间戳

```
mysql> select min(p.timestamp) into @prev_time from print p where p.store_id=2;
Query OK, 1 row affected (0.00 sec)

mysql> select id,
          store_id,
          timestampdiff(second,@prev_time,timestamp) myTimeDiffSeconds,
          @prev_time:=timestamp 
     from print 
    where store_id=2 order by timestamp;
+------+----------+-------------------+---------------------+
| id   | store_id | myTimeDiffSeconds | @prev_time:=t       |
+------+----------+-------------------+---------------------+
|    2 |        2 |                 0 | 2013-03-01 00:00:01 |
|    4 |        2 |                11 | 2013-03-01 00:00:12 |
|    6 |        2 |                 3 | 2013-03-01 00:00:15 |
+------+----------+-------------------+---------------------+
3 rows in set (0.00 sec) 
```

(timestamp,store_id) 上的索引将使查询执行得更好。

# jquery - Jquery Iframe 调用顶部或父函数

> ID：15620477
> 
> 赞同：0
> 
> 时间：2013-03-25T16:55:41.677
> 
> 标签：jquery, function, iframe

我的 iframe 向其父函数发送变量时遇到问题。topPHP.php 是我的父母，它具有导致我出现问题的功能和一个加载 entryPHP.php 的 iframe，它是一种将 pdf 文档的帖子发送到 loadPHP.php 的表单，它会将 pdf 上传到我的数据库并调用该函数父 topPHP.php 的。很抱歉这句话。我得到的结果如下：

```
when topPHP.php loads the div topDiv reads "No Control"
I choose a file in the iframe (src = entryPHP.php) and hit submit
loadPHP.php is called and the file is upload to the database perfectly
In the Javascript/Jquery the alert "before the function" is called and works
After that the div topDiv still reads "No Control" and the second alert "after the function" is not called 
```

任何帮助将不胜感激。

顶级PHP：

```
<script type="text/javascript" src="../jQuery.js"></script>
<script type="text/javascript">

$( document ).ready(function() {
num = 1;

function changeDiv(num){
if(num==1)
{
$("#topDiv").val("top control");
}
if(num==2)
{
$("#topDiv").val("bottom control");
}
}
}
</script>

<iframe id="iframe_display" src="entryPHP.php" width="400" height="100">
</iframe>

<div id="topDiv">
no control
</div> 
```

入口PHP：

```
<div id="uploadPDF">
<form enctype="multipart/form-data" method="POST" action="loadPHP.php">
<table width="300" height="25" border="1">
//this table sends a pdf file as a post to loadPHP.psh
</table>
</form> 
```

加载PHP：

```
<?php
//this uploads the pdf file to the database
?>

<script type="text/javascript" src="../jQuery.js"></script>
<script type="text/javascript">
$( document ).ready(function() {

$(window).load(function(){

});
alert("before the function");
parent.changeDiv(2);
alert("after the function");

});
</script> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T17:06:01.327

您已经`changeDiv()`在 jQuery`ready()`函数中定义了函数，因此它只存在于该范围内，并且不能作为`parent`对象的一部分进行访问。

要解决此问题，请将函数移至`topPHP`页面的全局范围，如下所示：

```
<script type="text/javascript">
function changeDiv(num){
    if(num==1)
    {
        $("#topDiv").val("top control");
    }
    if(num==2)
    {
        $("#topDiv").val("bottom control");
    }
}
$( document ).ready(function() {
    changeDiv(1);
}
</script> 
```

# sql - 将文本文件中的数据直接插入到 sql 表中

> ID：15620479
> 
> 赞同：0
> 
> 时间：2013-03-25T16:55:54.497
> 
> 标签：sql, sql-server-2008-r2, sql-server-2012

例如，如果我有以下格式的文本文件

```
A
B
C
D
E
.
.
. 
```

`table`和一个名为列的 sql 表`letters`

我想将文本文件中的每个值插入到列`letters`中，是否可以直接从 SQL Server 执行此操作而不使用任何其他编程语言？

也可以为像`"/"`or的值指定一个分隔符`"#"`吗？如果文本格式是`A/B/C/D`或`A#B#C#D`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T17:02:17.703

对，就是这样。使用[**BULK INSERT**](http://msdn.microsoft.com/en-us/library/ms188365.aspx)可以解决您的问题。

# javascript - 可以在 Javascript 中的 Object 上定义原型函数吗？

> ID：15620482
> 
> 赞同：8
> 
> 时间：2013-03-25T16:56:08.690
> 
> 标签：javascript, function, object, prototype

```
Object.prototype.doSomething = function(p) {
    this.innerHTML = "<em>bar</em>";
    this.style.color = "#f00";
    alert(p);
};

document.getElementById("foo").doSomething("Hello World"); 
```

`<div id="foo"><strong>foo</strong></div>`

上面的代码工作正常。

但我记得我在某个地方看到过这个：`Do not mess with native Object.`嗯，类似的。

**那么在Object**上定义原型函数可以吗？有什么理由我不应该这样做吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T16:59:00.267

唯一安全的添加方法`Object.prototype`是使用 ES5 方法[`Object.defineProperty`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty)创建一个*不可枚举的*属性：

```
Object.defineProperty(Object.prototype, 'doSomething', {
    value: function(p) { ... },
    enumerable: false,  // actually the default
}); 
```

这样可以确保在您这样做时不会出现新属性`for (key in object)`。

请注意，此函数不能可靠地填充，因为不可枚举的属性在以前版本的 ECMAScript / JavaScript 中不存在。

无论如何，如果您的方法仅适用于 HTML 页面元素，则最好将其添加到`Element.prototype`而不是添加到`Object.prototype`，尽管如果您这样做，旧的 (IE) 浏览器可能会抱怨。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T16:59:21.963

通常不是一个好主意。该函数现在可用于您的应用程序中使用 Object 原型（很多）的*所有内容*，并将显示在枚举 Object 原型的函数中。

更好的选择是定义一个单独的原型：

```
function MyObject {
    ...
}

MyObject.prototype.doSomething = function() {
    ...
}

var myObj = new MyObject(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T16:59:51.677

如果您向对象原型添加内容，您将失去使用 的良好对象迭代功能`for p in obj`，因为您添加的可枚举属性也会**在所有对象上**进行迭代。

例如：

```
Object.prototype.doSomething = function(p) {
    this.innerHTML = "<em>bar</em>";
    this.style.color = "#f00";
    alert(p);
};

for (p in {foo:"bar"}){
    console.log(p);
}

//foo
//doSomething 
```

出乎意料的是，您也会被`doSomething`登录。要解决此问题，您必须`hasOwnproperty`在迭代对象时添加检查，但这里的风险是您可能会破坏其他不期望普通对象具有除文字中指定的属性之外的属性的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T17:09:35.837

另一种选择是**调用**一个方法，而不是定义为对象原型方法-

```
function doSomething(p) {
    this.innerHTML = "<em>"+p+"</em>";
    this.style.color = "#f00";
    alert(p);
}; 
```

//

```
doSomething.call(document.getElementById("foo"),"Hello World"); 
```

# java - 不能使用“this”引用对象来创建链表

> ID：15620484
> 
> 赞同：1
> 
> 时间：2013-03-25T16:56:12.037
> 
> 标签：java

我有一个包含 AClass 类型属性的类（称为 AClass）。我正在尝试使用它来创建整数的链接列表。但是，每当我给 AClass 中的数据赋值时，它都会用这个值替换所有链接类中的数据。

```
public class AClass {
    public AClass rest;
    public int data;

    public AClass (int tData) {
         data=tData;
         rest=null;
    }

    public void add(int item) {
        rest=this;          //This is what is causing the problem
        data=item;
    } 
```

}

这是我用来测试的。我的输出应该是 5,6,5，但我得到的是 5,6,6。

```
public class Test {
    public static void main(String[] args) {
        AClass aTest=new AClass(5);      //Creates a list with on element.
        System.out.println(aTest.data);  //Print that element for verification
        aTest.add(6); 
        System.out.println(aTest.data);      //Print the end element
        System.out.println(aTest.rest.data); //Print the next element, which should be 5
    }
} 
```

我似乎无法弄清楚我做错了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T16:59:31.640

让我们考虑一下什么是链表，以及您的代码是做什么的。

链表是由一系列指针链接在一起的一组节点。根据您描述的预期行为，您想要一个这样构建的链表。

```
public class Test {
    public static void main(String[] args) {
        AClass aTest=new AClass(5);          // Data: aTest ==> (5) ==> null
        System.out.println(aTest.data);      // Prints 5.
        aTest.add(6);                        // Data: aTest ==> (6) ==> (5) ==> null
        System.out.println(aTest.data);      // Prints 6
        System.out.println(aTest.rest.data); // Prints 5
    }
} 
```

但是，鉴于您的实现，您实际上永远不会创建第二个节点——您只有原始节点，并且您破坏了您的链表。

```
public class Test {
    public static void main(String[] args) {
        AClass aTest=new AClass(5);          // Data: aTest ==> (5) ==> null
        System.out.println(aTest.data);      // Prints 5.
        aTest.add(6);                        // Data: aTest ==> (6) ==> (6) ==> (6) ==> forever
        System.out.println(aTest.data);      // Prints 6
        System.out.println(aTest.rest.data); // Prints 6
    }
} 
```

所以你需要`add`创建一个新节点：

`rest=this;`设置指向当前对象的下一个指针，创建一个只有一个元素的循环链表。您需要创建一个新元素。您还有一个有趣的问题，即假设您要添加项目的方向。您可以添加到列表的前面或列表的后面，但请注意，添加到前面意味着将指针更改为前面. 你可以很容易地`addFront`实现两者：`addBack`

```
public AClass addFront(int item) {
    AClass node = new AClass(item);
    node.rest = this;
    return node;
}

public void addBack(int item) {
    // Find the end of the list
    AClass temp = this;
    while (temp.rest != null) {
        temp = temp.rest;
    }
    temp.rest = new AClass(item);
} 
```

话虽如此，请考虑使用内置链表：[http](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedList.html) ://docs.oracle.com/javase/6/docs/api/java/util/LinkedList.html 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T17:02:18.170

```
public class AClass {
    public AClass rest;
    public int data;

    public AClass (int tData) {
         data=tData;
    }

    /**
     * Insert in front.
     * @param item data to be inserted.
     */
    public void add(int item) {
        // Make a copy of this:
        AClass copy = new AClass(data);
        copy.rest = rest;
        // Overwrite this object:
        rest = copy;
        data = item;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T17:04:17.393

> aTest.rest.data

您正在使用引用变量*aTest*来访问 AClass 类型的*实例*变量*rest*。*Rest与**aTest*具有相同的引用。当您说*aTest.rest.data时，它是**aTest.data*的另一种说法，*数据的*当前值为**6**。这就是为什么你得到 5, 6, 6 作为输出。

# java - 时间格式说明（Google Directions API）

> ID：15620486
> 
> 赞同：1
> 
> 时间：2013-03-25T16:56:19.577
> 
> 标签：java, android, google-maps, time, google-directions-api

我已阅读 Google Directions API 的文档以提出方向请求。URL 的示例如下所示

```
http://maps.googleapis.com/maps/api/directions/json?origin=Brooklyn&destination=Queens&sensor=false&departure_time=1343605500&mode=transit 
```

变量的值`departure_time`应该反映以下信息：

2012 年 7 月 30 日上午 9 点 45 分。

有人可以解释一下这种时间格式吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T17:00:49.883

这是一个时间戳 - 自[Unix 纪元](https://en.wikipedia.org/wiki/Unix_time#Encoding_time_as_a_number)1970-01-01 00:00:00 [UTC](https://en.wikipedia.org/wiki/Coordinated_Universal_Time)以来经过的秒数。如果你想要那种格式的“现在”，你可以使用`System.currentTimeMillis() / 1000`，或者如果你有一个[`Date`](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html)对象，你可以使用`date.getTime() / 1000`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T16:59:07.633

这是一个纪元 unix 时间戳（自 1970 年 1 月 1 日以来的秒数）。您可以通过以下方式创建日期

```
Date d = new Date(1343605500L); 
```

或使用[http://www.epochconverter.com/](http://www.epochconverter.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-20T07:39:39.240

## Google 文档中的缺陷

谷歌搜索该特定数字会导致[类似 StackOverflow.com 问题](https://stackoverflow.com/q/12515539/642706)之类的地方。这些页面让我得出结论，Google Directions API 的文档存在缺陷。

您和其他人报告说，医生说 1343605500 = 2012 年 7 月 30 日上午 9:45 在纽约。但这是不正确的。月份的日期和时间都是错误的。

`1343605500`从 1970 年 UTC/GMT 年初开始的秒数：

*   在纽约是`2012-07-29T19:45:00.000-04:00`
*   在 UTC/GMT 是`2012-07-29T23:45:00.000Z`

* * *

## 从数字中获取日期时间

正如其他答案所述，显然谷歌正在向您提供自 1970 年初 UTC/GMT 的 Unix 纪元以来的秒数（无时区偏移）。

除了使用 java.util.Date/Calendar 类之外，您还可以使用第三[方开源 Joda-Time](http://www.joda.org/joda-time/)库。

下面是一些示例源代码，向您展示如何将文本解析为带时区的日期时间。

```
// © 2013 Basil Bourque. This source code may be used freely forever by anyone taking full responsibility for doing so.
// import org.joda.time.*;
// import org.joda.time.format.*;

// Starting data.
String string = "1343605500";
String timeZoneName = "America/New_York";

// Convert string of seconds to number of milliseconds.
long millis = Long.parseLong( string ) * 1000 ; //
// Specify time zone rather than rely on default.
DateTimeZone timeZone = DateTimeZone.forID( timeZoneName );
// Instantiate DateTime object.
DateTime dateTime = new DateTime( millis, timeZone );

System.out.println( "dateTime: " + dateTime );
System.out.println( "dateTime in UTC/GMT: " + dateTime.toDateTime( DateTimeZone.UTC ) ); 
```

运行时……</p>

```
dateTime: 2012-07-29T19:45:00.000-04:00
dateTime in UTC/GMT: 2012-07-29T23:45:00.000Z 
```

使用纪元计数时，必须注意：

*   哪个时代（Unix时间只是几种可能性之一）
*   计数精度（秒、毫秒、纳秒）

![自纪元以来的时间精度图，POSIX Unix 时间使用秒，java.util.Date 和 Joda-time 使用毫秒，JSR 310 java.time.* 类使用纳秒](../Images/0640b22730d8db32c5ef1c027a904baa.png)

# java - System.currentTimeMillis(); 如果我更改系统时间

> ID：15620488
> 
> 赞同：12
> 
> 时间：2013-03-25T16:56:20.603
> 
> 标签：java, time

如果我`System.currentTimeMillis()`在 00:00 使用并获得`X`价值。

然后我把时钟拨回一小时，一小时后我打电话`System.currentTimeMillis()`。

它会`X`再次回来，还是只是`X + 3600 * 1000`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-25T16:58:15.710

简而言之，每当您更改系统时间时，返回的值`System.currentTimeMillis()`都会相应更改。

这与`System.nanoTime()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T16:59:01.930

它将返回 X 因为[System.currentTimeMillis()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/System.html#currentTimeMillis%28%29)返回自纪元以来的毫秒数。这意味着它将与您的时钟不同步并计算自 1970 年 1 月 1 日 UTC 以来的秒数

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-23T16:03:16.387

在 Android 上，您始终可以使用`SystemClock.elapsedRealtime()`.

# sql - 这个简单的 SQL 语句有什么问题？

> ID：15620491
> 
> 赞同：0
> 
> 时间：2013-03-25T16:56:32.577
> 
> 标签：sql, sql-server, database, sql-server-2008

我有以下 SQL 语句：

```
SELECT * FROM Children WHERE Child_Name LIKE '%' + Child_ID + '%' 
```

SQL Server 报告以下内容：`Conversion failed when converting the varchar value '%' to data type int.`

Child_ID 是 int 数据类型，但我看不出代码有什么问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T16:59:10.197

您需要显式转换`Child_ID`为文本类型，否则它将隐式将 '%' 转换为数字（从其字符代码），因此会出现错误。

像这样：

```
SELECT * FROM Children WHERE Child_Name LIKE '%' + CAST( Child_ID AS varchar(10) ) + '%' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T16:58:53.363

您正在尝试将 int 连接/添加到 varchar，这是无效操作。尝试
`select * from children where child_name like '%'+cast(child_id as varchar(50))+'%'`

# php - 如何在 PHP 中使用 Simplexml 解析有错误的 XML 文件？

> ID：15620492
> 
> 赞同：2
> 
> 时间：2013-03-25T16:56:32.837
> 
> 标签：php, xml, simplexml

所以我在PHP中使用simplexml和XML解析，但是我发现我需要解析的一些文件包含错误。当然，我可以手动编辑每个有问题的文件，但是大约 10000 多个文件，这将花费我很长时间。

好的，关于错误。当您尝试在浏览器中打开 XML 文件时，会显示以下消息：

![属性错误的规范要求值](../Images/c54d32010fef832bc790be2f4374a936.png)

> 警告：simplexml_load_string()：实体：第 2 行：解析器错误：在 ...

我找到了ff。标签正在触发错误（此处：*Transport*而不是*Inspection*）：

```
<Public Transport Rules>
<PublicTransport id="0">
<Issued>null</Issued>
<Files>&lt;localfile&gt;
          &lt;location&gt;Citybus&lt;/location&gt;
          &lt;format&gt;Events&lt;/format&gt;
     &lt;/localfile&gt;
</Files>
</PublicTransport>
</Public Transport Rules> 
```

显然，标签中的空格导致了这个问题。并且这些标签在文件中出现不止一次。

我认为它会`simplexml`根据它在浏览器中看到的内容进行解析（按面值），因此如果您的 XML 文件有问题，它将无法正常解析。我想通过读取源文件来进行 PHP 解析，也许从那里编辑文件。但它似乎`fopens`对您在浏览器页面中阅读的内容开放。

一段时间以来一直被这个问题困扰。任何意见，将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-02T13:34:06.877

如果您可以接受重命名包含空格的标记，那么 tidy 也是一个不错的选择，因为它也适用于 XML：

```
$xml = simplexml_load_string(
    tidy_repair_string($string, ['input-xml' => 1])
);

echo "SimpleXML::asXML():\n", $xml->asXML(), "\n\n"; 
```

它重命名标签并创建属性：

```
SimpleXML::asXML():
<?xml version="1.0"?>
<Public Transport="" Rules="">
<PublicTransport id="0">
<Issued>null</Issued>
<Files>&lt;localfile&gt; &lt;location&gt;Citybus&lt;/location&gt;
&lt;format&gt;Events&lt;/format&gt; &lt;/localfile&gt;</Files>
</PublicTransport>
</Public> 
```

缩进等还有更多选项，这里有一个完整的例子：

```
<?php
/**
 * How to parse XML files with errors using Simplexml in PHP?
 *
 * @link http://stackoverflow.com/q/15620492/367456
 */

$string = '<?xml version="1.0" ?>
<Public Transport Rules>
    <PublicTransport id="0">
        <Issued>null</Issued>
        <Files>&lt;localfile&gt;
                  &lt;location&gt;Citybus&lt;/location&gt;
                  &lt;format&gt;Events&lt;/format&gt;
             &lt;/localfile&gt;
        </Files>
    </PublicTransport>
</Public Transport Rules>';

echo "Broken:\n", $string, "\n\n";

$fixed = tidy_repair_string($string, ['input-xml' => 1, 'output-xml' => 1, 'indent' => 1]);

echo "Fixed:\n", $fixed, "\n\n";

$xml = simplexml_load_string(tidy_repair_string($string, ['input-xml' => 1]));

echo "SimpleXML::asXML():\n", $xml->asXML(), "\n\n"; 
```

并输出：

```
Broken:
<?xml version="1.0" ?>
<Public Transport Rules>
    <PublicTransport id="0">
        <Issued>null</Issued>
        <Files>&lt;localfile&gt;
                  &lt;location&gt;Citybus&lt;/location&gt;
                  &lt;format&gt;Events&lt;/format&gt;
             &lt;/localfile&gt;
        </Files>
    </PublicTransport>
</Public Transport Rules>

Fixed:
<?xml version="1.0"?>
<Public Transport="" Rules="">
  <PublicTransport id="0">
    <Issued>null</Issued>
    <Files>&lt;localfile&gt;
    &lt;location&gt;Citybus&lt;/location&gt;
    &lt;format&gt;Events&lt;/format&gt; &lt;/localfile&gt;</Files>
  </PublicTransport>
</Public>

SimpleXML::asXML():
<?xml version="1.0"?>
<Public Transport="" Rules="">
<PublicTransport id="0">
<Issued>null</Issued>
<Files>&lt;localfile&gt; &lt;location&gt;Citybus&lt;/location&gt;
&lt;format&gt;Events&lt;/format&gt; &lt;/localfile&gt;</Files>
</PublicTransport>
</Public> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T17:14:31.167

DOM 函数旨在处理无效标记，因此您可以尝试一下：

```
<?php

$string = '<?xml version="1.0" ?>
<Public Transport Rules>
    <PublicTransport id="0">
        <Issued>null</Issued>
        <Files>&lt;localfile&gt;
                  &lt;location&gt;Citybus&lt;/location&gt;
                  &lt;format&gt;Events&lt;/format&gt;
             &lt;/localfile&gt;
        </Files>
    </PublicTransport>
</Public>';

$dom = new DOMDocument;
libxml_use_internal_errors(TRUE);
$dom->loadHTML($string);
libxml_use_internal_errors(FALSE);
$dom->formatOutput = TRUE;

echo '::: Original XML :::' . PHP_EOL;
echo $string . PHP_EOL;
echo PHP_EOL;

echo '::: Fixed XML :::' . PHP_EOL;
if( version_compare(PHP_VERSION, '5.3.6', '>=') ){
    $body = $dom->documentElement->firstChild;
    if( $body->hasChildNodes() ){
        foreach($body->childNodes as $node){
            echo $dom->saveHTML($node);
        }
    }
}else{
    $body = $dom->getElementsByTagName('body')->item(0);
    if( $body->hasChildNodes() ){
        foreach($body->childNodes as $node){
            echo $dom->saveHTML($node);
        }
    }
}
echo PHP_EOL; 
```

...打印这个：

```
::: Original XML :::
<?xml version="1.0" ?>
<Public Transport Rules>
    <PublicTransport id="0">
        <Issued>null</Issued>
        <Files>&lt;localfile&gt;
                  &lt;location&gt;Citybus&lt;/location&gt;
                  &lt;format&gt;Events&lt;/format&gt;
             &lt;/localfile&gt;
        </Files>
    </PublicTransport>
</Public>

::: Fixed XML :::
<public transport rules><publictransport id="0"><issued>null</issued><files>&lt;localfile&gt;
                  &lt;location&gt;Citybus&lt;/location&gt;
                  &lt;format&gt;Events&lt;/format&gt;
             &lt;/localfile&gt;
        </files></publictransport></public> 
```

没有办法知道在这个过程中会丢失什么，但我们首先要处理无效数据。

无论如何，您始终可以使用 PHP*自动*编辑每个有问题的文件。您的文件可能不是 XML，但它们确实是字符串 ;-)

# matlab - matlab中的十进制到二进制转换

> ID：15620504
> 
> 赞同：-1
> 
> 时间：2013-03-25T16:56:53.367
> 
> 标签：matlab

从文件派生的文本的十进制到二进制的转换是

```
temp=textread('E:\one.txt', '%1s', 'whitespace', '');  
text = char(temp);                                                           
y = zeros(length(text)*8,1);                                           
for n = 1:1:length(text)  
a=abs(text(n));                                                              
f = 8*(n-1)+1;                                                          
y(f:f+7,1)=(de2bi(a,8))';                                                   
end
disp('THE MAGNITUDE OF THE TEXT IS =');
disp(a);
disp(f);
x=y';
disp('THE BINARY BITS ARE');
disp(x); 
```

如果文件包含存储在其中的“1”，则此程序的输出

```
THE MAGNITUDE OF THE TEXT IS =
49

 1

THE BINARY BITS ARE
 1     0     0     0     1     1     0     0 
```

如果 x 的位数是 8 位，那么我希望前 3 位显示在一个变量中，其余 5 位显示在另一个变量中，我想在 matlab 中为此编写一个程序。

```
eg x=00110011
a=001
b=10011 
```

编码程序

```
clc;
clear all;
temp=textread('E:\one.txt', '%1s', 'whitespace', '');  
text = char(temp);                                                               
y = zeros(length(text)*8,1);                                                
for n = 1:1:length(text)  
    a=abs(text(n));                                                                 
    f = 8*(n-1)+1;                                                                    
    y(f:f+7,1)=(de2bi(a,8))';                                            
end
disp('THE MAGNITUDE OF THE TEXT IS =');
disp(a);
disp(f);
x=y';
disp('THE BINARY BITS ARE');
disp(x);
z=length(x);
savefile='D:\mat\z.mat';
save (savefile,'z','-MAT');
disp('TOTAL NUMBER OF BITS =');
disp(z);
bk=input('ENTER THE NUMBER OF ROWS =');
savefile='D:\mat\bk.mat';
save (savefile,'bk','-MAT');
c=z/bk;
savefile='D:\mat\c.mat';
save (savefile,'c','-MAT');
k=1;
for i=1:bk
    for j=1:c
        m(i,j)=x(k);
        k=k+1;
    end
end
%disp(m(i,j));
disp('THE MESSAGE BITS ARE ');
disp(m);
savefile='D:\mat\m.mat';
save (savefile,'m','-MAT');
m_tot=(size(m,1)*size(m,2));
savefile='D:\mat\m_tot.mat';
save (savefile,'m_tot','-MAT');
savefile='D:\mat\r1.mat';
r1=[randperm(bk),randperm(bk)];
save (savefile,'r1','-MAT');
disp(r1);
savefile='D:\mat\r2.mat';
r2=[randperm(bk),randperm(bk)];
save (savefile,'r2','-MAT');
disp(r2);
savefile='D:\mat\f(1).mat';
f1= randint(1,1,[1,bk]);
save (savefile,'f1','-MAT');
savefile='D:\mat\en.mat';
en(1,:)=m(f1,:);
save (savefile,'en','-MAT');
disp('DIRECTLY ASSIGNED BLOCK IS');
disp(f1);
for w=1:(length(r1))
    en(w+1,:)=xor((m(r1(w),:)),(m(r2(w),:)));
    disp('THE EXORED BLOCKS ARE= ');
    disp(r1(w));
    disp(r2(w));
end
disp('THE ENCODED BITS ARE');
disp(en);
en_tot=(size(en,1)*size(en,2));
disp('tot no of encoded bits');
disp(en_tot);
save (savefile,'en_tot','-MAT');
savefile='D:\mat\en_tot.mat'; 
```

变量 en 应该根据跳数进行拆分，就像你对变量 x 所做的那样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T18:00:16.027

Try this:

```
%After computing "x", the double array, as required...
d = input('Enter the length of the first sub-array: ');
a = x(1:d)
b = x(d+1:end) 
```

For example:

```
>> 
temp='1';  
text = char(temp);                                                           
y = zeros(length(text)*8,1);                                           
for n = 1:1:length(text)  
a=abs(text(n));                                                              
f = 8*(n-1)+1;                                                          
y(f:f+7,1)=(de2bi(a,8))';                                                   
end
disp('THE MAGNITUDE OF THE TEXT IS =');
disp(a);
disp(f);
x=y';
disp('THE BINARY BITS ARE');
disp(x);
%After computing "x", the double array, as required...
d = input('Enter the length of the first sub-array: ');
a = x(1:d)
b = x(d+1:end) 
```

The result would be:

```
THE MAGNITUDE OF THE TEXT IS =
    49

     1

THE BINARY BITS ARE
     1     0     0     0     1     1     0     0

Enter the length of the first sub-array: 3

a =

     1     0     0

b =

     0     1     1     0     0 
```

I'm still unsure as to what this program is supposed to achieve though.

## **EDIT**

New code as per changed requirement:

```
>> 
temp='1';  
text = char(temp);                                                           
y = zeros(length(text)*8,1);                                           
for n = 1:1:length(text)  
    a=abs(text(n));                                                              
    f = 8*(n-1)+1;                                                          
    y(f:f+7,1)=(de2bi(a,8))';                                                   
end
disp('THE MAGNITUDE OF THE TEXT IS =');
disp(a);
disp(f);
x=y';
disp('THE BINARY BITS ARE');
disp(x);
%After computing "x", the double array, as required...
d = input('Enter the hop-count vector: ');
for i=2:length(d)
    d(i) = d(i) + d(i-1);
end
d = [0, ceil((d./d(end))*length(x))];
disp('The resultant split up is:')
for i=2:length(d)
    disp(x((d(i-1)+1):d(i)));
end 
```

The result will be:

```
THE MAGNITUDE OF THE TEXT IS =
    49

     1

THE BINARY BITS ARE
     1     0     0     0     1     1     0     0

Enter the hop-count vector: [3 2 3]
The resultant split up is:
     1     0     0

     0     1

     1     0     0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T17:50:39.980

只需对数组进行切片：

```
disp(x(1:3));
disp(x(4:end)); 
```

# sql-server - 如何根据时间选择第一条记录

> ID：15620510
> 
> 赞同：0
> 
> 时间：2013-03-25T16:57:10.997
> 
> 标签：sql-server, ranking, ranking-functions

我有两张桌子和一张通话桌和一张电话后工作桌。这两个表具有一对一的关系，即使呼叫后的工作记录存储在呼叫表中。通过加入呼叫表中的三个值，您可以将呼叫链接到呼叫后工作呼叫。调用表还保存调用的开始和结束时间的值。

呼叫后工作表中的数据是一团糟，有时一个呼叫有很多呼叫后工作记录。我的客户希望我根据通话的开始时间挑选出第一条记录，并且只取这 1 行数据。

有人建议使用 RANKING 功能，但我不熟悉这个任何人有什么想法吗？

如果有什么需要进一步解释的，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T17:00:10.703

自提取排名和密集排名示例假设您使用的是 SQL Server 2008 或更高版本。

```
declare @Person Table ( personID int identity, person varchar(8));

insert into @Person values ('Brett'),('Sean'),('Chad'),('Michael'),('Ray'),('Erik'),('Queyn');

declare @Orders table ( OrderID int identity, PersonID int, Desciption varchar(32), Amount int);

insert into @Orders values (1, 'Shirt', 20),(1, 'Shoes', 50),(2, 'Shirt', 22),(2, 'Shoes', 20),(3, 'Shirt', 20),(3, 'Shoes', 50),(3, 'Hat', 20),(4, 'Shirt', 20),(5, 'Shirt', 20),(5, 'Pants', 30),
(6, 'Shirt', 20),(6, 'RunningShoes', 70),(7, 'Shirt', 22),(7, 'Shoes', 40),(7, 'Coat', 80);

with a as 
    (
    Select
        person
    ,   o.Desciption
    ,   o.Amount
    ,   rank() over(partition by p.personId order by Amount) as Ranking
    ,   Dense_rank() over(partition by p.personId order by Amount) as DenseRanking
    from @Person p
        join @Orders o on p.personID = o.PersonID
    )
select *
from a 
where Ranking <= 2  -- determine top 2, 3, etc.... whatever you want.
order by person, amount 
```

# css - chrome中的浮动右输入

> ID：15620515
> 
> 赞同：0
> 
> 时间：2013-03-25T16:57:23.340
> 
> 标签：css, google-chrome, input, css-float

我有表格：http: [//jsfiddle.net/U8D3w/](http://jsfiddle.net/U8D3w/)

```
<form>
    <label for="username">Username:</label>
    <input type="text" name="username" />
    <br />

    <label for="password">Password:</label>
    <input type="password" name="password" />
    <br />

    <input type="submit" name="signin_submit" value="OKEY" />
</form> 
```

为什么它在 chrome 中有错误的正确行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T17:26:25.257

“不，我的意思是按钮和输入未对齐”

您的表单元素具有 100% 的默认宽度...这就是为什么...

给他一个宽度，或者尝试将 display:inline-block 添加到他的样式中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T18:05:20.803

您只是向 button[type=submit] 添加了一个浮点数，这就是为什么您的按钮只是向右浮动的原因。

如果您希望按钮与您的输入对齐，请为容器设置宽度，以便按钮不会浮出框外。您可能需要添加一个清除类（具有 css 属性 clear:both; ），以允许按钮留在 div 内。

[http://jsfiddle.net/U8D3w/1/](http://jsfiddle.net/U8D3w/1/)

```
form{
 width:505px;
} 
```

# javascript - 如何将 $(this) 对象从一个函数传递到另一个函数？

> ID：15620517
> 
> 赞同：1
> 
> 时间：2013-03-25T16:57:23.953
> 
> 标签：javascript, jquery, oop, object

我认为它是非常基本的面向对象的 JavaScript 相关问题。但我仍然对此感到非常困惑。我想将 $(this) 对象从 1 个函数传递给另一个函数。这样我就可以获得点击链接的href attr。

这是我的示例代码

**HTML**

```
<a href="#testblah" class="test" rel="image">TEST</a>
<a href="#blahtest" class="test" rel="video">TEST</a> 
```

**JS**

```
$(document).on("click", ".test", function () {

var $this = $(this);
var rel = $this.attr("rel");

if (rel == "image") {
    e.preventDefault();
    openImage($this);
} else if (rel == "video") {
    openVideo($this);
}
});

function openImage($this) {

var href =  $this.attr("href");
alert(href);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:40:22.500

我的问题有 1 个小的语法错误（请查看问题的第一条评论）

以下是我最终使用的代码。

```
$(document).on("click", ".test", function (e) {

    var anchor = $(this);
    var rel = anchor.attr("rel");

    if (rel == "image") {
        e.preventDefault();
        openImage(anchor);
    } else if (rel == "video") {
        openVideo(anchor);
    }
    });

    function openImage(anchor) {
    var href =  anchor.attr("href");
    alert(href);
    } 
```

谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T18:01:10.827

Check out the examples in the jQuery documentation [page](http://api.jquery.com/on/). You'll find that the *on* method applies to the selected elements, in the case of your code, it's the *document* object. To get the attribute that you want, jQuery is not necessary to wrap the element. Here's a JSBin [example](http://jsbin.com/ebumiv/1/edit). One more thing, try reemplace == with === to get type checking also. Hope it helps

# java - 注解@SequenceGenerator 和编译错误

> ID：15620522
> 
> 赞同：0
> 
> 时间：2013-03-25T16:57:57.153
> 
> 标签：java, eclipse, hibernate, annotations

我是 .Net 程序员，但这次我正在处理 Java 项目，但遇到了一些困难。这个 java 项目不是我的，它是由其他开发人员开发的，它使用 Hibernate。

当我运行 Ant 构建器时，我收到此错误：

```
9: error: annotation type not applicable to this kind of declaration
@SequenceGenerator( name="companynameSequence" , sequenceName="COMPANYNAME_SEQUENCE" , allocationSize=1 )
^ 
```

此注释位于名为 package-info.java 的文件中。这个文件的内容就是这几行代码：

```
@SequenceGenerator( name="companynameSequence" , sequenceName="COMPANYNAME_SEQUENCE" , allocationSize=1 )
package com.companyname.application.model;

import javax.persistence.SequenceGenerator;

import org.hibernate.annotations.Parameter;
import org.hibernate.annotations.TypeDef;
import org.jasypt.hibernate.type.EncryptedStringType; 
```

如果我删除该注释项目编译成功，但我有一个运行时错误：

```
Invocation of init method failed; nested exception is org.hibernate.AnnotationException: Unknown Id.generator: companynameSequence 
```

我正在使用 Eclipse Juno 和 JRE 1.7

你能帮助我吗 ？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T19:06:39.207

你需要写这样的东西：

```
//different annotations
class className{
        @Id
        @SequenceGenerator(sequenceName = "COMPANYNAME_SEQUENCE", name = "companynameSequence")
        @GeneratedValue(strategy=GenerationType.SEQUENCE, generator="companynameSequence")
        @Column(name="ID", nullable=false, unique=true)
        private int id;
//other fields and methods
} 
```

或这个 ：

```
//different annotations
class className{
        @Id
        @SequenceGenerator(sequenceName = "COMPANYNAME_SEQUENCE", name = "companynameSequence")
        @GeneratedValue(strategy=GenerationType.SEQUENCE, generator="companynameSequence")
        @Column(name="ID", nullable=false, unique=true)
        public int getId(){};
//other fields and methods
} 
```

这只是示例，字段名称可能与我的不同。

并阅读[这篇](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/mapping.html#mapping-declaration-id)关于标识符和生成器的帖子

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T17:03:21.410

注释不应影响运行时行为。因此，我建议将注释注释掉并修复错误。但是，我无法解释注释的意图或为什么会引发错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-26T19:09:27.970

我刚从 1.6 迁移到 1.8 时遇到了这个问题。这里的问题是@javax.persistence.SequenceGenerator 只针对@Target({ TYPE, METHOD, FIELD })，而不是包。在 java 1.7 之前，注释没有被正确处理是一个错误。我不知道修复是什么，但我正在寻找它。

# sql - PostGIS多边形之间的递归交集

> ID：15620529
> 
> 赞同：12
> 
> 时间：2013-03-25T16:58:25.480
> 
> 标签：sql, postgresql, postgis

我正在尝试在空间表中的所有多边形之间执行递归交集，并获取生成的（多）多边形以及每个多边形的每个交叉点的信息。

一张图片（不是真的按比例）来解释它： ![例子](../Images/6e2841ce1ca2f96b745e6a6a7ab66229.png)

假设`A, B, C`桌子上有正方形。我想`A, B, C, A+B, A+C, B+C, A+B+C`在输出中有多边形，我需要知道这`A+B`是`A`和`B`等的交集。

到目前为止，我有一个执行相交的查询，但它并没有“切断”原始多边形的相交部分。例如：

```
Polygon A should be      A - (A+B) - (A+C) - (A+B+C)
Polygon A+C should be    A+C - (A+B+C) 
```

我现在得到的`A`和`A+C`多边形的结果图像：

![当前错误结果](../Images/28833b33f34e2931bcdc776e982586d4.png)

这是一个测试脚本，使用图像中的正方形作为数据。查看该`area`专栏，很明显缺少一些递归 ST_Difference，我只是不知道如何。欢迎任何想法。

```
-- Create a test table
CREATE TABLE test (
    name text PRIMARY KEY,
    geom geometry(POLYGON)
);

-- Insert test data
INSERT INTO test (name, geom) VALUES 
    ('A', ST_GeomFromText('POLYGON((1 2, 1 6, 5 6, 5 2, 1 2))')),
    ('B', ST_GeomFromText('POLYGON((0 0, 0 4, 4 4, 4 0, 0 0))')),
    ('C', ST_GeomFromText('POLYGON((2 0, 2 4, 6 4, 6 0, 2 0))'));

-- Query    
WITH RECURSIVE 
source (rownum, geom, ret) AS (
    SELECT row_number() OVER (ORDER BY name ASC), ST_Multi(geom), ARRAY[name] FROM test 
),
r (rownum, geom, ret, incroci) AS (
    SELECT rownum, geom, ret, 0 FROM source 
    UNION ALL
    SELECT s.rownum, ST_CollectionExtract(ST_Intersection(s.geom, r.geom), 3), (r.ret || s.ret), (r.incroci + 1) 
        FROM source AS s INNER JOIN r ON s.rownum > r.rownum AND ST_Intersects(s.geom, r.geom) AND ST_Area(ST_Intersection(s.geom, r.geom)) > 0.5
),
result (geom, ret) AS (
    SELECT ST_Union(geom) AS geom, ret FROM r GROUP BY ret
)
SELECT geom, ST_Area(geom) AS area, ret FROM result ORDER BY ret 
```

当然，在这个特定示例中，窗口函数并不是绝对必要的，但这段代码是我真实案例的简化版本，它还做了一些额外的事情。

我正在使用 PostgreSQL 9.2 和 PostGIS 2.0

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T23:32:01.453

ST_DIFFRENCE 不必是递归的，您已经拥有所有多边形，因此您必须从每个几何图形中减去包含该 ret 但不等于它的其他几何图形的并集。这行得通，所以你应该这样做：

```
 WITH RECURSIVE 
source (rownum, geom, ret) AS (
    SELECT row_number() OVER (ORDER BY name ASC), ST_Multi(geom), ARRAY[name] FROM test 
),
r (rownum, geom, ret, incroci) AS (
    SELECT rownum, geom, ret, 0 FROM source 
    UNION ALL
    SELECT s.rownum, ST_CollectionExtract(ST_Intersection(s.geom, r.geom), 3), (r.ret || s.ret), (r.incroci + 1) 
        FROM source AS s INNER JOIN r ON s.rownum > r.rownum AND ST_Intersects(s.geom, r.geom) AND ST_Area(ST_Intersection(s.geom, r.geom)) > 0.5
),
result (geom, ret) AS (
    SELECT ST_Difference(ST_Union(r.geom),q.geom) AS geom, r.ret FROM r JOIN (SELECT r.ret,ST_UNION(COALESCE(r2.geom,ST_GeomFromText('POLYGON EMPTY'))) as geom FROM r LEFT JOIN r AS r2 ON r.ret<@r2.ret AND r.ret!=r2.ret GROUP BY r.ret) AS q on r.ret=q.ret GROUP BY r.ret,q.geom
)
SELECT geom, ST_Area(geom) AS area, ret FROM result ORDER BY ret 
```

# c# - 自托管 Web 服务中不允许获取 405 方法

> ID：15620530
> 
> 赞同：0
> 
> 时间：2013-03-25T16:58:26.807
> 
> 标签：c#, visual-studio-2010, wcf, jsonp, http-status-code-405

我创建了一个`WCF self hosted`网络服务。这是我`serviceContract and OperationContract`的`Instace`课堂：

```
[ServiceContract]
public interface ISwiperWS
{   

[OperationContract, WebInvoke(Method = "GET", UriTemplate = "/getstatus?callback={Callback}", ResponseFormat = WebMessageFormat.Json)]
String getStatus(String Callback);
} 
```

测试WS.cs

```
public String getStatus()
{
  return "true"
} 
```

我正在访问此 Web 服务的`JsonP`端点`GWT`

```
String url = "https://somedomain.com:8083/getstatus";
JsonpRequestBuilder jsonp = new JsonpRequestBuilder();
jsonp.setTimeout(600);
jsonp.setCallbackParam("callback");
jsonp.send(url); 
```

我创建了一个安装项目并将其安装在不同的机器上。每当我从它向 Web 服务端点发出请求时，`JsonP`它都会表现出奇怪的行为。在某些机器中，我得到了预期的响应，而在其他机器中，它不断显示错误，即`405-method are not allowed`。

我搜索并根据它们进行更改，但对我没有任何帮助。请给我一个解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-30T07:03:13.060

可能是：我相信这与您使用 jsonp 的 jquery ajax 调用有关。如果您要将其更改为仅 json，则该帖子将起作用..

# python-3.x - Python 3.3 TkInter 窗口意外关闭。为什么？

> ID：15620531
> 
> 赞同：0
> 
> 时间：2013-03-25T16:58:29.530
> 
> 标签：python-3.x, tkinter

我想出了以下代码作为参考，以帮助我记住如何使用 TkInter 构建 GUI 应用程序。它运行良好，除非单击 Button1 或命令选项设置为 self.hello 的任何其他小部件。正如您在下面的代码中看到的，hello 函数就像一个占位符。虽然通过 IDLE 运行脚本时单击按钮可以正常工作，但如果您通过双击实际文件 test.pyw 启动程序，它只会导致应用程序退出。我的问题是，为什么？

```
#Some guy somewhere

from tkinter import *

class Application:

    def hello(self):
        msg = messagebox.showinfo('Message Title','Message Body')

    def __init__(self, parent):
        parent.resizable(0,0)
        parent.minsize(800, 400)
        parent.title('Top Level')

        # Global Padding pady and padx
        pad_x = 0
        pad_y = 0

        # CASCADE MENU
        # create a parent menu.
        self.parentmenu1 = Menu(parent, tearoff=0)
        #self.menubar1.add_command(label='Menu1', command=self.hello)

        #create a child menu for parent menu.
        self.parentmenu1_child1 = Menu(parent, tearoff=0)
        self.parentmenu1_child1.add_command(label='Item1', command=self.hello)
        self.parentmenu1_child1.add_command(label='Item2', command=self.hello)
        self.parentmenu1_child1.add_command(label='Item3', command=self.hello)

        #add child menu to parent menu.
        self.parentmenu1.add_cascade(label='Menu1', menu=self.parentmenu1_child1)

        #self.menubar1.add_separator()

        # SINGLE MENU
        # create a parent menu.
        self.parentmenu1.add_command(label='Menu2', command=self.hello)

        # SINGLE MENU
        # create a parent menu.
        self.parentmenu1.add_command(label='Menu3', command=self.hello)

        # display the parent menu.
        parent.config(menu=self.parentmenu1)

        # Create controls

        #create label
        self.label1 = Label(parent, text='Label1')
        #create textbox
        self.textbox1 = Entry(parent)
        #create button
        self.button1 = Button(parent, text='Button1', command=self.hello)

        #string variable to hold checkbox1 values.
        self.str_checkbox1 = StringVar()        
        #create checkbox
        self.checkbox1 = Checkbutton(parent, text='Checkbox1', variable=self.str_checkbox1, onvalue='on1', offvalue='off1')
        #deselect checkbox1
        self.checkbox1.deselect()
        #string variable to hold checkbox2 values.
        self.str_checkbox2 = StringVar()    
        #create checkbox
        self.checkbox2 = Checkbutton(parent, text='Checkbox2', variable=self.str_checkbox2, onvalue='on2', offvalue='off2')
        #deselect checkbox2
        self.checkbox2.deselect()

        #???? ..what sets the groupbox apart from others. primary key???!!
        self.str_radiobutton1 = StringVar()
        #command= parameter missing.
        self.radiobutton1 = Radiobutton(parent, text='Radio 1', variable=self.str_radiobutton1, value='a')
        self.radiobutton2 = Radiobutton(parent, text='Radio 2', variable=self.str_radiobutton1, value='b')
        self.radiobutton1.select()

        #create a list of options.
        optionList = ('Option1', 'Option2', 'Option3')
        #string variable to hold optionlist values.
        self.str_optionmenu1 = StringVar()
        #associate string variable with optionlist
        self.str_optionmenu1.set(optionList[0])
        #create optionmenu
        self.optionmenu1 = OptionMenu(parent, self.str_optionmenu1, *optionList)

        #create a frame
        self.frame1 = Frame(parent)
        #create a text.
        self.textarea1 = Text(self.frame1, width=20, height=10)
        #align text left and fill frame with it.
        self.textarea1.pack(side=LEFT, fill=Y)
        #create a scrollbar.
        self.scrollbar1 = Scrollbar(self.frame1)
        #align scrollbar right and fill frame with it.
        self.scrollbar1.pack(side=RIGHT, fill=Y)
        #what is going to be scrolled?
        self.scrollbar1.config(command=self.textarea1.yview)
        #set textarea scrollbar.
        self.textarea1.config(yscrollcommand=self.scrollbar1.set)
        #align frame left and fill.
        self.frame1.pack(side=LEFT, fill=Y)

        #create a frame
        self.frame2 = Frame(parent)
        #create a text.
        self.listbox1 = Listbox(self.frame2, width=20, height=10, activestyle='none', selectmode=SINGLE)
        #create a list of items.
        optionList = ('Item1', 'Item2', 'Item3', 'Item4', 'Item5', 'Item6', 'Item7', 'Item8', 'Item9', 'Item10', 'Item11')
        #add items from list to listbox
        for item in optionList:
            self.listbox1.insert(END, item)
        #align text left and fill frame with it.
        self.listbox1.pack(side=LEFT, fill=Y)
        #create a scrollbar.
        self.scrollbar2 = Scrollbar(self.frame2)
        #align scrollbar right and fill frame with it.
        self.scrollbar2.pack(side=RIGHT, fill=Y)
        #what is going to be scrolled?
        self.scrollbar2.config(command=self.listbox1.yview)
        #set textarea scrollbar.
        self.listbox1.config(yscrollcommand=self.scrollbar2.set)
        #align frame left and fill.
        self.frame2.pack(side=LEFT, fill=Y)

        # Place controls inside of grid
        self.label1.grid(row=0, column=0, padx=pad_x, pady=pad_y, sticky=W)
        self.textbox1.grid(row=0, column=1, padx=pad_x, pady=pad_y, sticky=W)
        self.button1.grid(row=1, column=0, padx=pad_x, pady=pad_y, sticky=W)
        self.checkbox1.grid(row=1, column=1, padx=pad_x, pady=pad_y, sticky=W)
        self.checkbox2.grid(row=1, column=2, padx=pad_x, pady=pad_y, sticky=W)
        self.optionmenu1.grid(row=2, column=0, padx=pad_x, pady=pad_y, sticky=W)
        self.frame1.grid(row=2, column=1, padx=pad_x, pady=pad_y, sticky=W)        
        self.radiobutton1.grid(row=3, column=0, padx=pad_x, pady=pad_y, sticky=W)
        self.radiobutton2.grid(row=3, column=1, padx=pad_x, pady=pad_y, sticky=W)
        self.frame2.grid(row=4, column=0, padx=pad_x, pady=pad_y, sticky=W)

if __name__ == '__main__':
    parent = Tk()
    app = Application(parent)
    parent.mainloop() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T17:18:27.133

好吧。显然 tkMessageBox 在 Python 3.x 中已重命名为 messagebox。此模块在 tkinter 中也不可用，因此即使开发人员可能会使用：

```
from tkinter import * 
```

..他/她仍然需要：

```
from tkinter import messagebox 
```

# arrays - Matlab数组测试文件改进

> ID：15620534
> 
> 赞同：-1
> 
> 时间：2013-03-25T16:58:32.397
> 
> 标签：arrays, matlab, text-files

我被困住并感到沮丧：P 我的问题是我试图在字母之前获取数字，例如：

```
159753 gum, gabriel 
```

test.txt 是：

```
gum, gabriel 159753 
```

但到目前为止，我的代码如下所示：

```
clc 
fid = fopen('test.txt', 'r');
R = textscan(fid,'%s','Delimiter','\n');
R{1}
fclose(fid); 
```

我也试过：

```
clc                     
fid = fopen('test.txt', 'r');    
R = textscan(fid,'%s %s %s');
All =[R{3},R{1},R{2}];
Disp(All)
fclose(fid); 
```

我确实在字母之前得到了我的数字，但它看起来很奇怪所以我不知道如何改进这个代码？

我只是希望我已经解释了一切，因为我很讨厌数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T17:52:12.837

您需要访问更多级别的单元格，以便在显示结果时不会看到大括号。我还在字符串之间添加了一些空格。

```
fid = fopen('test.txt', 'r');    
R = textscan(fid,'%s %s %s');
All =[R{3}{1}, ' ', R{1}{1}, ' ', R{2}{1}];
disp(All)
fclose(fid); 
```

# ruby-on-rails - 如何使用 PayPal Express Checkout 调试失败的交易？

> ID：15620538
> 
> 赞同：0
> 
> 时间：2013-03-25T16:58:42.920
> 
> 标签：ruby-on-rails, paypal, activemerchant

我们正在使用 PayPal Express Checkout（在 Ruby、Active Merchant gem 中实现）

最近有几笔交易失败，而大多数交易正常。

我查看了我们的日志文件并确定了交易失败的用户。

我有交易令牌、PayerID、用户的电子邮件地址、相关 ID。

我已就此联系 PayPal 技术支持并向他们提供了上述详细信息。

但我想知道自己是否有可能获得有关这些失败交易的更多信息。Ruby gem Active Merchant 是否提供了一种从 PayPal 获取它的简单方法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T19:43:24.370

您可以在此处执行一些操作来强化 Express Checkout 实施：

**监控错误代码响应**

Express Checkout 将在交易失败时发回一系列错误代码。您可以做的是监视这些特定的错误响应，这将使您了解事务的问题所在，并且这样做您将能够做出相应的响应（例如再次尝试事务）。以下是 Express Checkout 的错误代码响应：http: [//www.paypalobjects.com/en_US/ebook/PP_APIReference/Appx-ErrorCodes_and_Messages.html#2270815](http://www.paypalobjects.com/en_US/ebook/PP_APIReference/Appx-ErrorCodes_and_Messages.html#2270815)

**查找交易数据**

除了错误代码之外，您还可以使用 GetTransactionDetails API 操作来获取有关可能有问题的某些事务的信息。这将返回一些有用的信息，这些信息也可以帮助您处理这些情况。此信息可在此处获得：[https ://www.x.com/developers/paypal/documentation-tools/api/gettransactiondetails-api-operation-nvp](https://www.x.com/developers/paypal/documentation-tools/api/gettransactiondetails-api-operation-nvp)

希望有帮助，

乔恩

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T18:50:58.207

您真正获得的唯一信息基本上就是 API 响应中返回的信息。有时这足以确定问题的原因是什么，有时则需要更多调查，而[PayPal MTS](http://www.paypal.com/mts)则需要调查。

# asp.net - 在 System.Data.UpdateException >> 唯一键之后无法再次插入

> ID：15620539
> 
> 赞同：0
> 
> 时间：2013-03-25T16:58:46.867
> 
> 标签：asp.net, linq-to-entities, sql-server-2008-r2

我在我的 asp.net 应用程序中使用 LINQ。我在“ColorDV”表的两列上放置了一个唯一键。当尝试添加像“ss”这样的重复值时，我得到了结果：

> System.Data.UpdateException：更新条目时出错。有关详细信息，请参阅内部异常。---> System.Data.SqlClient.SqlException：违反唯一键约束“TITLE_AR_ColorDV”。无法在对象“dbo.ColorDV”中插入重复键。重复键值为 (ss)。该语句已终止。

但问题是，在此异常之后，我无法在任何表中插入任何记录，因为完全相同的异常。我想知道 LINQ 是否每次都尝试执行相同的先前插入。

请问我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T20:24:57.650

当您将对象添加到 ObjectContext 时，该对象保留在提交到数据库的对象列表中，所以是的，这就是问题所在。移除对象并继续，或者如果编辑尝试使用上下文的 Refresh 方法将对象的内容刷新到原始状态。

[这有一个额外的方法](http://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/c12bd8c8-231f-4dcc-a665-b048f7debbd7/)；虽然不能个人说它有效。

# jquery - jquery DatePicker 完成按钮

> ID：15620540
> 
> 赞同：11
> 
> 时间：2013-03-25T16:58:47.990
> 
> 标签：jquery, jquery-ui

有没有办法处理在 jquery UI DatePicker 中按下“完成”按钮的事件？

我有一个日期选择器，它只允许在年份和月份之间进行选择，如[这里](http://jquerybyexample.blogspot.com/2012/06/show-only-month-and-year-in-jquery-ui.html)

问题是使用 onclose 事件会阻止我清除该字段（如果我单击弹出的日期选择器，那么如果我关闭当前选定的月份和年份将被放入该字段）。

我不想在日期选择器之外使用额外的“清除”按钮，所以我虽然可以使用“完成”按钮。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-04-24T09:23:12.433

我在一个论坛上找到了解决方案（不记得在哪里 - 抱歉）。我知道已经有一段时间了，但是为了将来的搜索:)

注意：更改需要在插件中完成。您只需搜索“onClose：”即可找到它。

```
onClose: function (dateText, inst) {
    function isDonePressed() {
        return ($('#ui-datepicker-div').html().indexOf('ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all ui-state-hover') > -1);
    }
    if (isDonePressed()){
        alert('done pressed');
    }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-25T17:16:41.003

当“完成”按钮调用 _hideDatepicker 函数时，您可以覆盖它：

```
jQuery.datepicker._hideDatepicker = function() {
  alert('hello');
}; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-08-16T07:02:38.500

**这是完美的解决方案：**

```
$(function() {
    $('.monthYearPicker').datepicker({
        changeMonth: true,
        changeYear: true,
        showButtonPanel: true,
        dateFormat: 'MM yy'
    }).focus(function() {
        var thisCalendar = $(this);
        $('.ui-datepicker-calendar').detach();
        $('.ui-datepicker-close').click(function() {
            var month = $("#ui-datepicker-div .ui-datepicker-month :selected").val();
            var year = $("#ui-datepicker-div .ui-datepicker-year :selected").val();
            thisCalendar.datepicker('setDate', new Date(year, month, 1));
        });
    });
}); 
```

**CSS：**

```
.ui-datepicker-calendar {
    display: none;
} 
```

和**HTML：**

```
<label for="myDate">Date :</label>
<input name="myDate" class="monthYearPicker"> 
```

看看它在这个[jsfiddle](http://jsfiddle.net/tmnasim/JLydp/)中是如何工作的。

**来源：http:** [//develop-for-fun.blogspot.com/2013/08/jquery-ui-datepicker-month-and-year.html](http://develop-for-fun.blogspot.com/2013/08/jquery-ui-datepicker-month-and-year.html)

**礼貌：结合了** [这个](https://stackoverflow.com/questions/2208480/jquery-ui-datepicker-to-show-month-year-only/2209104#2209104)和[那个](https://stackoverflow.com/questions/2208480/jquery-ui-datepicker-to-show-month-year-only/13607884#13607884)答案来制作这个解决方案。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-08-04T05:02:15.510

```
$('#start_date_download').datepicker({
    dateFormat:"yy-mm-dd",
    "autoclose": true,
    showButtonPanel: true,
    closeText: 'Clear' 
}).focus(function() {
    var thisCalendar = $(this);
    $('.ui-datepicker-close').click(function() {
        $.datepicker._clearDate($('#start_date_download'));
    });
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-07-14T18:27:04.460

也许：

```
$('#myInput')
    .datepicker({
        // datepicker options
    })
    .datepicker('widget')
    .find('.ui-datepicker-close')
    .on('click', function () {
        // done button's handler here
    }); 
```

# c# - Tfs 格式文件 C# 项目

> ID：15620544
> 
> 赞同：1
> 
> 时间：2013-03-25T16:58:58.860
> 
> 标签：c#, .net, tfs, tfsbuild

我是 c# 编程的新手，我已经用 c# 完成了一个项目，我的测试人员现在想测试它。他们想要 tfs 格式的代码。我有点困惑我应该给他们什么这个 Tfs 格式。我有我的项目的 Aspx,Cs 文件。我的项目是基于 3 Tire 架构的 3。

请任何人都可以帮助我。那就是这种 TFS 格式，我应该如何给他们我的 tfs 格式的源文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T17:04:34.367

由于我不知道我假设他们的意思是他们希望将代码签入 Team Foundation Server 源代码控制。这可能允许他们使用最新的测试代码设置自动化测试。

TFS 是一种共享服务器解决方案，（大概）您的客户/公司已经安装了它。这不是您将项目“导出”到的“格式”。它（除其他外）是一个源代码存储库，这意味着您将代码上传到存储库以与他人共享。

使用 Visual Studio 2008，您只需要 Team Explorer（如果尚未安装）。这将使您可以将代码添加到源代码控制中，并让“他们”下载它以进行测试。

连接到 TFS 有很多变量（什么版本的 Visual Studio？什么版本的 TFS？）但是一旦你连接了，你应该能够右键单击项目并单击“将项目添加到源代码管理”。

但是，我强烈建议您先询问“他们”他们使用什么服务器，代码应该存储在哪里等，然后再做一些您必须稍后撤消的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T17:05:54.450

假设很多事情......我很确定您正在编写一些未集成在您的源存储库软件（独立）中的东西......在您的情况下是 TFS。

**您要做的就是将您的解决方案添加到 TFS（可能向那里的任何高级人员寻求帮助），以便允许测试人员构建或下载它。**

为了“签入代码”：

*   在 Visual Studio 中转到 File\SourceControl
*   单击“将解决方案添加到 SourceControl”
*   选择上传位置

**注意**：您真正应该做的是告诉他们类似：“嘿，我已经完成了您的项目。我没有使用 TFS 的经验，也不知道我应该将它上传到哪个目录......有人可以帮我上传代码？”

# svn - svn 1.7 错误 E200009 无法添加所有目标，因为某些目标已经版本化

> ID：15620547
> 
> 赞同：18
> 
> 时间：2013-03-25T16:59:04.320
> 
> 标签：svn

我对存储库进行了干净的检查，然后每天我都有一个运行脚本来备份配置的 hudson 作业。部分脚本是添加`*.xml`

```
$ svn add *.xml
svn: warning: W150002: '/data/hudson/config.xml' is already under version control
svn: E200009: Could not add all targets because some targets are already versioned
svn: E200009: Illegal target for the requested operation 
```

警告很好，因为某些 xml 文件已经在版本控制之下，但我不明白为什么会出现`E200009`错误。如果没有要添加的内容，则应该没有错误。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-26T11:17:18.127

似乎是 SVN 1.7 的正确行为。另一种方法是仅添加未版本控制的文件：

```
svn st *.xml | grep ? | tr -s ' ' | cut -d ' ' -f 2 | xargs svn add 
```

但是，您可能没有要添加的内容，因此您将得到

```
svn: E205001: Try 'svn help' for more info
svn: E205001: Not enough arguments provided 
```

相关问题：[使用一个 Linux 命令将所有未版本控制的文件添加到 Subversion](https://stackoverflow.com/questions/1218237/subversion-add-all-unversioned-files-to-subversion-using-one-linux-command)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-12-08T10:26:11.163

`svn add something --force`将解决错误 E200009。在您的情况下，`svn add *.xml --force`将解决您的问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-12T06:40:59.447

有一次，我遇到了这个错误信息，因为我在 SVN 目录中添加了一个目录。我添加的目录是从另一个 SVN 导演复制的，它有一个`.svn`目录，所以我遇到了错误信息。删除`.svn`目录（`rm -rf .svn`），它会在之后工作。

这和我遇到的情况一样。希望它可以帮助其他人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-07T13:32:59.803

这发生在我的 netbeans 中，其中 GUI 有“提交”，它作为一个步骤添加和提交。解决方案是使用命令行，并调用“svn commit -m”message”，即对于某些读取，“添加”步骤在复制文件时已经完成。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-11-20T09:37:59.980

就像悉尼的回答一样，我还有另一个单行命令：

`svn st | grep ^? | awk '{print $2}' | xargs svn add`

# sql - SQL Access 查询速度

> ID：15620573
> 
> 赞同：0
> 
> 时间：2013-03-25T17:00:10.833
> 
> 标签：sql, ms-access, query-performance

我的 Access 2003 数据库中有以下查询：

```
SELECT 
    Projet.OTP AS OTP, 
    NumeroDA, 
    SUM(Quantite*PrixReelCommande) AS PrixTotal, 
    FIRST(Fournisseur1) AS Fournisseur, 
    FIRST(Projet.NumeroCommandeReservation) AS NumeroCommande, 
    FIRST(Projet.GestionContrat) AS GestionContrat, 
    FIRST(Projet.Acheteur) AS Acheteur, 
    MIN(DateLivraisonContractuelle) AS DateLivraisonContrat, 
    MAX(DateFournisseurLivraison) AS DateLivraisonFournisseur, 
    FIRST(InfoProjet.NomInstallation) AS NomInstallation, 
    FIRST(InfoProjet.TitreMandat) AS TitreMandat
FROM Projet LEFT JOIN InfoProjet ON Projet.OTP=InfoProjet.OTP
WHERE NumeroDA Like "#*" And NumeroDA IN (
                                            SELECT NumeroDA FROM Projet 
                                            WHERE NumeroCommandeReservation="" Or NumeroCommandeReservation Is Null Or NumeroCommandeReservation="0"
                                        )
GROUP BY Projet.OTP, Projet.NumeroDA
ORDER BY Projet.OTP, Projet.NumeroDA 
```

表 Projet 有约 2500 行，而 InfoProjet 只有 200 行。在 Access 中打开此表中的任何一个都需要不到 1 秒的时间。但是，执行上述查询需要 5 秒以上。

我想知道是否可以做些什么来提高此查询的性能。查询中是否有一些我应该避免性能方面的东西？或者我只是在访问限制下？我猜想`Like`在子查询中使用没有帮助，但肯定有其他东西会减慢查询速度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T17:08:47.910

由于您没有在子查询中使用任何 Distincts，您可以通过删除该部分来简化它吗？（虽然我现在不能测试这个，所以我不完全确定它会给出相同的结果）

```
SELECT 
    Projet.OTP AS OTP, 
    NumeroDA, 
    SUM(Quantite*PrixReelCommande) AS PrixTotal, 
    FIRST(Fournisseur1) AS Fournisseur, 
    FIRST(Projet.NumeroCommandeReservation) AS NumeroCommande, 
    FIRST(Projet.GestionContrat) AS GestionContrat, 
    FIRST(Projet.Acheteur) AS Acheteur, 
    MIN(DateLivraisonContractuelle) AS DateLivraisonContrat, 
    MAX(DateFournisseurLivraison) AS DateLivraisonFournisseur, 
    FIRST(InfoProjet.NomInstallation) AS NomInstallation, 
    FIRST(InfoProjet.TitreMandat) AS TitreMandat
FROM Projet LEFT JOIN InfoProjet ON Projet.OTP=InfoProjet.OTP
WHERE NumeroDA Like "#*" And (
     NumeroCommandeReservation="" Or 
     NumeroCommandeReservation Is Null Or 
     NumeroCommandeReservation="0")

GROUP BY Projet.OTP, Projet.NumeroDA
ORDER BY Projet.OTP, Projet.NumeroDA 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T17:02:36.717

尝试运行它并查看它返回多少行：

```
SELECT COUNT(*)
FROM Projet LEFT JOIN InfoProjet ON Projet.OTP=InfoProjet.OTP
WHERE NumeroDA Like "#*" And NumeroDA IN (
                                        SELECT NumeroDA FROM Projet 
                                        WHERE NumeroCommandeReservation="" 
                                        Or NumeroCommandeReservation Is Null 
                                        Or NumeroCommandeReservation="0"
                                    ) 
```

原因：加入可能会返回您期望的更多行，但由于您只有`MAX/MIN/FIRST`聚合，您可能不会注意到。

# mysql - MySQL 在 where 子句之后执行 select

> ID：15620577
> 
> 赞同：0
> 
> 时间：2013-03-25T17:00:19.850
> 
> 标签：mysql, select, where

此查询在 where 子句中给出错误 unknown column company。我发现 where 子句首先运行，然后 select 运行。这可能是这里的错误。但我不知道如何纠正这一点，以便让公司进入结果集。

```
SELECT trnsdriverid,
       name,
       (SELECT transcompany.name
        FROM   transcompany,
               transcompdriver
        WHERE  transcompany.trnscompid = transcompdriver.trnscompid) AS 'company',
       address,
       dob,
       license,
       telephone
FROM   transcompdriver
WHERE  ? LIKE 'All'
        OR name LIKE '%"+keyword+"%'
        OR company LIKE '%"+keyword+"%'
        OR trnsdriverid LIKE '%"+keyword+"%' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T17:07:36.270

您不能在 where 语句中引用列别名。您应该重写此查询以使用 JOIN，然后对实际的 TransCompany.name 列进行过滤，例如：

```
select 
     d.trnsDriverID
    ,d.name
    ,c.name as [Company]
    ,d.address
    ,d.dob
    ,d.license
    ,d.telephone 
from 
    TransCompDriver d
join
    TransCompany c
    on
    c.trnscompid = d.trnscompid
where 
    ? = 'All' 
    or 
    d.name like '%" + keyword + "%' 
    or 
    c.name like '%" + keyword + "%' 
    or 
    d.trnsDriverID like '%" + keyword + "%' 
```

另外，不要使用`LIKE`简单的等式运算符。我将上面的查询更改为使用`= 'All'`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T17:07:55.833

您真的应该使用连接而不是子选择来执行此操作。我会推荐这个：

```
SELECT
    d.trnsDriverID,
    d.name,
    c.name AS `company`,
    d.address,
    d.dob,
    d.license,
    d.telephone
FROM
    TransCompDriver AS d
    INNER JOIN TransCompany AS c
        ON d.trnsCompID = c.trnsCompID
WHERE
    ? like 'All'
    OR d.name LIKE '%"+keyword+"%'
    OR `company` LIKE '%"+keyword+"%'
    OR d.trnsDriverID LIKE '%"+keyword+"%' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T17:10:02.997

提取列“公司”的子查询没有匹配的行数，请尝试使用连接语句

```
select trnsDriverID, name, t1.name AS company, address, dob, license, telephone    
from TransCompDriver JOIN (select trnsDriverID, name, 
(select TransCompany.name from TransCompany LEFT JOIN TransCompDriver   
ON TransCompany.trnsCompID=TransCompDriver.trnsCompID) AS t1   
where ? like 'All' or name like '%"+keyword+"%'   or company like '%"+keyword+"%' 
or trnsDriverID like '%"+keyword+"%' 
```

# git - git stash 保存 -u 和 -p

> ID：15620579
> 
> 赞同：4
> 
> 时间：2013-03-25T17:00:20.183
> 
> 标签：git

我正在尝试将一个提交分成五个提交。我的计划是使用`git stash save -p`和存储除了我在第一次提交中想要的东西之外的所有东西。然后提交更改，`git stash apply`隐藏除了我在第二次提交中想要的所有内容等。但是我的原始提交包含新添加的文件，而且似乎我无法使用 -p 选择要存储的内容，也无法存储未跟踪的文件同时使用 -u 。

```
$ git stash save -u -p "take 4"
Can't use --patch and --include-untracked or --all at the same time 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T17:04:07.463

这是一个教科书用例`git add -p`。

请执行下列操作：

*   查看您要拆分的提交。
*   `git reset HEAD~`. 这将“撤消”提交而不会丢失其更改。它们将在工作树中，未上演。
*   五次：
    *   `git add -p`（并在此“阶段”中添加您想要的更改）。`git add`当您来到希望它们成为其中一部分的补丁时，您将需要在原始提交中添加的任何文件。
    *   可选地，`git diff --staged`查看您将要提交的内容和/或`git diff`查看您*不*打算提交的内容。
    *   `git commit`

这将为您提供五个单独的提交。您也可以使用`git add -i`代替`git add -p`. 此用例不是用于`git stash`.

它的工作方式是利用 Git 的“暂存区”（也称为“索引”）。您的工作副本中有大量更改。您使用`git add`“暂存”更改。然后`git commit`（没有`-a`标志）将只提交分阶段的更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-19T17:10:52.710

如前所述，`git add -p`绝对是解决原始问题的方法。

不过，关于次要问题：

`Can't use --patch and --include-untracked or --all at the same time`

就我而言，我想包含一些未跟踪的文件，但*也*使用 --patch 来选择一些跟踪的东西来存储。我们称这些组合为“diff A”。我所做的是首先进行逆设置：将不属于 diff A 的代码隐藏起来，这样就清除了使用的方式`git add the_untracked_file`，然后`git stash push`将跟踪和未跟踪的内容都放入一个存储区。

# ruby - rspec-模拟奇怪的行为

> ID：15620586
> 
> 赞同：0
> 
> 时间：2013-03-25T17:00:34.957
> 
> 标签：ruby, rspec, rspec-mocks

我在 rspec 中遇到了模拟的奇怪行为，我得到“'stub' NoMethodError”，但是当我使用 require 'rspec/mocks/standalone' 导入时，一切正常。但这对我来说似乎很奇怪。

**我的规范助手：**

```
require 'rspec'
require 'rspec/mocks'
require 'rspec/autorun'
require File.expand_path('../../lib/rwebcli.rb', __FILE__)

RSpec.configure do |config|
  config.mock_framework = :rspec

  config.treat_symbols_as_metadata_keys_with_true_values = true

  config.run_all_when_everything_filtered = true

  config.filter_run :focus

  # Run specs in random order to surface order dependencies. If you find an
  # order dependency and want to debug it, you can fix the order by providing
  # the seed, which is printed after each run.
  #     --seed 1234
  config.order = 'random'

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T17:10:06.470

在描述块中，您需要一个`it`部分才能使用`stub`

```
describe 'foo' do
  it 'should do something' do
    Bar.stub(:meh).and_return(true)
    Bar.meh.should be_true
  end
end 
```

前段时间我调试了同样的问题。

# java - 具有双坐标的多边形

> ID：15620590
> 
> 赞同：25
> 
> 时间：2013-03-25T17:00:46.667
> 
> 标签：java, double, polygon

我对具有 Double 类型点的多边形有一些疑问......我必须做的是给定点，创建多边形，然后测试 1 个具体点是否在多边形内。

所以我知道在 Java 中有一个名为 Polygon 的类，它的用法是这样的：（三角形）

```
int valoresX[] = { 100, 150, 200 };
int valoresY[] = { 100, 200, 100 };
int n = valoresX.length;
Polygon city= new Polygon(valoresX,valoresY,n); 
```

但是我的“多边形”必须是“Double”类型，而不是“int”（简单示例）

```
Double valoresX[] = { 1000.10, 150.10, 200.10 };
Double valoresY[] = { 100.10, 200.10, 100.10 }; 
```

在我的项目中，我真的不需要在小程序或类似设备上绘制它，我只需要计算点是否在内部。

所以我的问题是：

有没有办法用双坐标做多边形，允许计算点（双）是否在多边形内？

谢谢大家！！！

舒迪

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-25T17:04:18.880

您可以使用[Path2D.Double](http://docs.oracle.com/javase/6/docs/api/java/awt/geom/Path2D.Double.html)执行此操作：

```
Path2D path = new Path2D.Double();

path.moveTo(valoresX[0], valoresY[0]);
for(int i = 1; i < valoresX.length; ++i) {
   path.lineTo(valoresX[i], valoresY[i]);
}
path.closePath(); 
```

另请参阅此问题：

[在 Java 2D 中实现 Polygon2D](https://stackoverflow.com/questions/11465330/implementing-polygon2d-in-java-2d)

# objective-c - UICollectionView如何删除单元格（相当于commitEditingStyle）？

> ID：15620591
> 
> 赞同：8
> 
> 时间：2013-03-25T17:00:48.200
> 
> 标签：objective-c, uitableview, ios6, uicollectionview

我正在构建我的第一个应用程序，`UICollectionView`并注意到在对象删除方面我无能为力。对于`UITableView`应用程序，有滑动删除方法：

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
if (editingStyle == UITableViewCellEditingStyleDelete) {
        // Delete the row from the data source
        [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
    } 

} 
```

在我使用的时候`GMGridView`，它有类似iPhone主屏幕长按的行为——摇动视图星星，可以显示一个删除按钮，负责删除视图。我当然可以尝试复制这种行为，但不确定用户是否会“得到它”。

我**对让用户从中删除对象的选项`UICollectionView`**很感兴趣- 我是否必须实现自己的删除手势/控件，或者我是否缺少某些东西（或开源）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-01T02:29:50.270

我将此代码插入到包含 CollectionView 的视图控制器中，并以这种方式进行。您可能已经在使用轻按手势执行类似的操作来检测选定的单元格。

```
- (IBAction)didLongPressCellToDelete:(UILongPressGestureRecognizer*)gesture {
CGPoint tapLocation = [gesture locationInView:self.myCollectionView];
NSIndexPath *indexPath = [self.myCollectionView indexPathForItemAtPoint:tapLocation];
if (indexPath && gesture.state == UIGestureRecognizerStateBegan) {
    NSLog(@"image with index %d to be deleted", indexPath.item);
    self.itemToBeDeleted = indexPath.item;
    UIAlertView *deleteAlert = [[UIAlertView alloc]
                             initWithTitle:@"Delete?"
                             message:@"Are you sure you want to delete this image?"
                             delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"Yes", nil];
    [deleteAlert show];

}
}

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {
NSLog(@"selected button index = %d", buttonIndex);
if (buttonIndex == 1) {
    // Do what you need to do to delete the cell 
    [self.myCollectionView reloadData];
}
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-26T01:33:55.413

默认 UICollectionViewCell 只有一个空白视图（没有标题，没有删除按钮，没有 imageView）

子类 UICollectionViewCell 并在其上添加删除按钮。setHidden = NO 当你想显示它时（例如向下滑动）

使用自定义委托删除数据并重新加载collectionView

示例使用向右滑动删除 UICollectionViewCell 在 storyBoard 中垂直滚动：

```
//Cell.h
@class MyCell;
@protocol MyCellDelegate
-(void)deleteButtonClick:(MyCell *)cell;
@end
@interface MyCell : UICollectionViewCell
@property (weak , nonatomic) id<MyCellDelegate> delegate;
@property (weak,nonatomic) IBOutlet *delButton;
@end

//Cell.m
-(void)awakeFromNib{
  [self.delButton setHidden:YES]
  //add Swipe right to here
}
-(void)handleSwipeRight:(UISwipeGestureRecognizer *)swipe {
   [self.delButton setHidden:NO];
}
-(IBAction)clickDelBut{
 [self.delegate deleteButtonClick:self];
}

//ViewController.m
//In cellForItemsAtIndexPath cell.delegate = self.

-(void)deleteButtonClick:(MyCell *)cell{
  //get indexPath, delete data and reload collectionView here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-08T20:04:19.800

对于将来阅读本文的任何人，这是我一直在使用的一个有用的库： [https ://github.com/Raizlabs/RZUtils/tree/master/RZUtils/Components/RZCollectionTableView](https://github.com/Raizlabs/RZUtils/tree/master/RZUtils/Components/RZCollectionTableView)

它使用 UICollectionView 模仿 UITableView，因此您可以获得集合视图的灵活性以及 UITableView 附带的所有不错的编辑功能。

但是，如果您尝试实现不同类型的删除行为或不同的布局，据我所知，您必须从头开始实现它。如果您不熟悉使用 UIGestureRecognizers 进行自定义操作，我会推荐本教程： [http ://www.raywenderlich.com/6567/uigesturerecognizer-tutorial-in-ios-5-pinches-pans-and-more](http://www.raywenderlich.com/6567/uigesturerecognizer-tutorial-in-ios-5-pinches-pans-and-more)

希望有帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T22:31:43.523

我在 UICollectionView 中发现并正在实施的删除和编辑内容来自此博客文章。

基本上显示复制/粘贴等菜单，并添加我自己的删除操作。它类似于 iSang 的答案，但没有添加在 UICollectionViews 中效果不佳的手势识别器。

当人们想要在 iOS 的其他部分复制和粘贴文本和链接时，它使用长按手势来调出编辑菜单。

[http://paulsolt.com/2012/11/uicollectionview-custom-actions-and-uimenucontroller/](http://paulsolt.com/2012/11/uicollectionview-custom-actions-and-uimenucontroller/)

# java - 删除时如何设计多对多关系？

> ID：15620599
> 
> 赞同：2
> 
> 时间：2013-03-25T17:01:07.587
> 
> 标签：java, oop, gwt, many-to-many, java-canvas

我正在创建一个`canvas`带有 2 个对象的绘图：`Rectangles`，并`Lines`连接矩形。每条 Line 都应该知道`Rectangle`它连接的 2 s。每个`Rectangle`都可以有多条线将其连接到其他`Rectangle`s。

```
class Rectangle {
    List<Line> connections;
    void setConnection(Line line) {
        connections.add(line);
    }
}

class Line {
    Rectangle from, to;

    public Line(Rectangle from, Rectangle to) {
        this.from = from;
        this.to = to;

        from.setConnection(this);
        to.setConnection(this);
    }
} 
```

我觉得这可能不是一个好的设计，因为当我删除 a 时`Line`，我还必须`Line`从它连接的连接列表中删除`Rectangle`。

当我删除 a`Rectangle`时，我还必须删除`Line`连接到矩形的 s，因为没有它们就不应该存在。因此，我必须遍历所有`connections`可删除的`Rectangle`，并为每个`connection`获取`from`/ `to` `rectangle`，然后再次获取`connection`列表并删除`Line`引用。

我的问题不是编写该代码（我已经让它工作了），但在我看来，我正在做很多来回参考。

这可以做得更好吗？不知何故：如果一个矩形被删除，那么所有来自行的深层连接都会被自动删除/失效？类似于 Hibernate 的多对多级联？我不能只使用 Hibernate，因为这应该是一个客户端应用程序，没有数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T04:15:39.257

本质上，您正在构建图表。您需要将边与顶点分开。

让我们从创建一些分离一些关注点的接口开始：

```
interface Shape {
}

interface ShapeConnection {
    Shape[] getConnectedShapes();
} 
```

然后让我们引入一个注释，它将标记需要级联删除其连接形状的形状。

```
@interface CascadeDeleteConnectedShapes {
} 
```

矩形和直线可以定义为：

```
@CascadeDeleteConnectedShapes
class Rectangle implements Shape {

}

class Line implements Shape, ShapeConnection {
    Rectangle from, to;

    public Line(Rectangle from, Rectangle to) {
        this.from = from;
        this.to = to;
    }

    @Override
    public Shape[] getConnectedShapes() {
        return new Shape[] { from, to };
    }
} 
```

最后，您将需要一个可以将所有内容放在一起的地方。

```
class Canvas {
    private ConnectionManager connectionManager = new ConnectionManager();

    private Set<Shape> shapes = new HashSet<Shape>();

    public Canvas() {
    }

    public void removeShape(Shape shape) {
        if (!shapes.remove(shape))
            return; 

        if (shape.getClass().isAnnotationPresent(CascadeDeleteConnectedShapes.class)) {
            cascadeDeleteShape(shape);
        }

        if (shape instanceof ShapeConnection) {
            connectionManager.remove((ShapeConnection) shape);
        }
    }

    private void cascadeDeleteShape(Shape shape) {
        List<ShapeConnection> connections = connectionManager.getConnections(shape);
        for (ShapeConnection connection : connections) {
            if (connection instanceof Shape) {
                this.removeShape((Shape) connection);
            } else {
                connectionManager.remove(connection);
            }
        }
    }

    public void addShape(Shape shape) {
        if (shapes.contains(shape))
            return;

        if (shape instanceof ShapeConnection) {
            addShapeConnection((ShapeConnection) shape);
        }

        shapes.add(shape);
    }

    private void addShapeConnection(ShapeConnection shapeConnection) {
        for (Shape shape : shapeConnection.getConnectedShapes()) {
            if (!shapes.contains(shape))
                throw new Error("cannot connect unknown shapes");
        }
        connectionManager.add(shapeConnection);
    }
} 
```

一个形状可以同时是一个形状连接。将几个矩形添加到画布后，可以添加线条来连接它们。由于您的设计中的一条线被识别为`ShapeConnection`涉及该线的任何操作都将调用`Canvas`来让`ConnectionManager`处理图形。在这个设计中，`Line`不可变是很重要的。

级联由删除带注释的形状触发。您需要仔细管理这些级联：如果在途中某处发生异常，您将留下不完整的图表。

此代码仅用于为您提供一个想法。另外，我将连接管理器的实现留给您想象。其中一条评论中提到了番石榴。BiMultiMap可以恰到好处地满足您的目的，[可惜](https://groups.google.com/forum/?fromgroups=#!topic/guava-discuss/FUi4KUlaB-s)他们还没有发布它。无论如何，我肯定会考虑让`ConnectionManager`现有库处理的细节；已经编写了许多适合您需求的内容。

请注意，此设计中没有[循环依赖关系](http://en.wikipedia.org/wiki/Circular_dependency)。

# c# - 在不调用 getter 的情况下读取属性上的属性？

> ID：15620600
> 
> 赞同：1
> 
> 时间：2013-03-25T17:01:10.993
> 
> 标签：c#, custom-attributes

C# 4.0。我有一个带有属性的*慢*属性。我想在不调用 getter 的情况下读取此属性：

```
[Range(0.0f, 1000.0f)]
public float X
{
    get
    {
        return SlowFunctionX();
    }
} 
```

这就是我现在所拥有的：

```
public static T GetRangeMin<T>(T value)
{
    var attribute = value.GetType()
        .GetField(value.ToString())
        .GetCustomAttributes(typeof(RangeAttribute), false)
        .SingleOrDefault() as RangeAttribute;

    return (T)attribute.Minimum;
}

var min = GetRangeMin<double>(X); // Will call the getter of X :( 
```

**问：**如何在不调用 getter 的情况下读取此属性`X`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-25T17:03:06.577

要读取属性上的属性，只需直接加载属性

```
var attrib = typeof(TheTypeContainingX)
  .GetProperty("X")
  .GetCustomAttributes(typeof(RangeAttribute), false)
  .Cast<RangeAttribute>()
  .FirstOrDefault();
return attrib.Minimum; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T17:06:15.143

无论如何，您将无法获得它，因为您将调用类似的东西`GetRangeMin<float>(0.0f)`，而浮点类型没有名为whatever-value-X-has 的字段。

如果您想以通用且类型安全的方式执行此操作，则需要使用表达式：

```
public static T GetRangeMin<T>(Expression<Func<T>> value) 
```

如此调用：

```
var min = GetRangeMin(() => X); 
```

然后，您需要导航表达式树以获取属性信息

```
MemberExpression memberExpression = value.Body as MemberExpression;
if (null == memberExpression || memberExpression.Member.MemberType != MemberTypes.Property)
    throw new ArgumentException("Expect a field access", "FieldExpression");
PropertyInfo propInfo = (PropertyInfo)memberExpression.Member; 
```

现在你可以`GetCustomAttributes`在`propInfo`. 顺便说一句，如果您担心继承，您可能需要使用`Attribute.GetCustomAttributes(propInfo, ...)`因为`propInfo.GetCustomAttributes(...)`即使您要求它也不会遍历继承树。

# c - 如何从 C 中安装的文本文件中获取变量

> ID：15620601
> 
> 赞同：0
> 
> 时间：2013-03-25T17:01:18.967
> 
> 标签：c, windows, variables, printf

有什么方法可以从安装中获取变量，例如用户名和电话号码并在程序中打印它们？我该怎么做呢？基于 Windows 的程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T17:08:06.997

您可以使用`GetUserName()`winapi 中的函数来获取用户名。

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms724432(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724432(v=vs.85).aspx)

# radio - 播客和直播电台所需的服务器带宽

> ID：15620602
> 
> 赞同：-1
> 
> 时间：2013-03-25T17:01:20.477
> 
> 标签：radio, bandwidth, requirements, podcast, dedicated-server

我需要设置一个可以托管播客的服务器。其实一个电台直播时有30个听众，但他们可以长大。

我需要什么样的服务器要求？

我通常从 Hetzner 购买专用服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:05:18.690

如果您为他们提供合理带宽的输出，一台专用服务器应该能够为 100 个听众提供服务。您应该检查为您设置它的人，并简单地在真实系统上执行性能测试。

首先，如果我是您，如果您已经是客户，我可能会咨询 Hetzner 支持人员。

如果您不确定服务器的容量，请考虑提供动态扩展服务器容量的主机。或者[也许云托管是您的选择](http://aws.amazon.com/)；它绝对为您提供最大的灵活性。当然，如果您将播客移动到云端，如果您的听众数量突然出现意外的巨大增长，托管成本可能会上升，因此您希望拥有一种能够创造一些投资回报的商业模式，或者将您预订容量的限制。

# resharper - ReSharper && StyleCop？

> ID：15620603
> 
> 赞同：4
> 
> 时间：2013-03-25T17:01:25.977
> 
> 标签：resharper, stylecop

我有一个非常简单的问题。是否打算同时运行 StyleCop 和 ReSharper？

StyleCop 提供代码分析，但 Re-Sharper 也提供......它们真的都需要吗？

提前感谢艾尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T23:10:35.437

StyleCop 仅分析您的代码样式（格式等内容）。ReSharper 对代码风格没有那么多分析。例如，它不会突出显示错误的格式（但您可以在 ReSharper 中运行代码清理工具，它会简单地重新格式化您的代码并消除所有格式问题）。

相反，ReSharper 对代码中的潜在错误或可能的改进进行了许多分析。StyleCop 无法做到这一点。

顺便说一句，StyleCop 主要用作 ReSharper 的插件。因此，您可以同时安装两者并亲自查看。

# r - 绘制误差线

> ID：15620604
> 
> 赞同：0
> 
> 时间：2013-03-25T17:01:27.413
> 
> 标签：r, plot, standard-deviation

R中是否有执行以下操作的函数：

取 c(10,11,20,22,30,31) 和 c(1,1,2,2,3,3)

在 x 轴的位置 1 绘制 10 和 11 的平均值，在 x 轴的位置 2 绘制 20 和 22 的平均值，在 x 轴的位置 3 绘制 30 和 31 的平均值，并添加适当的误差点周围标准差的条形图？

如果没有，怎么做这样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T19:48:47.310

```
dat <- data.frame(y=c(10,11,20,22,30,31),
                  x=c(1,1,2,2,3,3))

library("ggplot2")
ggplot(dat,aes(x,y))+stat_summary(fun.data=mean_cl_normal) 
```

# jquery - jQuery 对象和窗口对象

> ID：15620609
> 
> 赞同：4
> 
> 时间：2013-03-25T17:01:46.507
> 
> 标签：jquery

我正在玩弄 jQuery 的胆量，只是为了了解它是如何工作的。我大部分都理解它，但我对某些事情感到好奇。

在 jQuery 中，我们有这个来实际创建 jQuery 对象（在线`60`）：

```
jQuery = function( selector, context ) {
    // The jQuery object is actually just the init constructor 'enhanced'
    return new jQuery.fn.init( selector, context, rootjQuery );
}, 
```

方法比较长，`init`复制粘贴就省去了（想看的看源码，在线的`123`）。此方法可通过`jQuery.prototype`. 本质上，它会查看参数并就元素选择做出一些决定。

进一步向下脚本（在线`19174`）我们有这个：

```
// Expose jQuery to the global object
window.jQuery = window.$ = jQuery; 
```

这很有趣，因为注释掉这一行仍然`$`可以在全局对象中使用。

为什么需要这个？似乎`jQuery`调用该方法的函数创建了任一方式`init`的全局。`$`我在 Chrome、Firefox 和 Safari 上对此进行了测试，它们都可以在没有`Expose jQuery to the global object`线路的情况下使用。

这适用于较旧的浏览器和向后兼容吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T17:11:32.537

jQuery 库是在闭包中定义的，那一行是真正将库暴露给全局范围的地方。

```
alert($) 
```

我尝试在小提琴[http://jsfiddle.net/RBG7P/1/](http://jsfiddle.net/RBG7P/1/)中评论该行，它抛出了一个异常。未注释时，它起作用了。

你确定你做对了吗？

# typescript - Typescript 中的类是否需要构造函数？

> ID：15620612
> 
> 赞同：30
> 
> 时间：2013-03-25T17:02:08.090
> 
> 标签：typescript

我看到的所有示例都显示了一个带有构造函数的类。不放入构造函数可以吗？很像 C# 如何自动使您成为默认的空构造函数？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-03-25T17:12:10.917

从规范，第[8.3](https://github.com/Microsoft/TypeScript/blob/master/doc/spec.md#8.3)节（[8.3](https://github.com/teppeis/typescript-spec-md/blob/master/en/ch08.md#83-constructor-declarations)）：

> 一个类最多可以包含一个构造函数声明。如果类不包含构造函数声明，则提供自动构造函数，如[8.3.3 节所述。](https://github.com/Microsoft/TypeScript/blob/master/doc/spec.md#8.3.3)( [8.3.3.](https://github.com/teppeis/typescript-spec-md/blob/master/en/ch08.md#833-automatic-constructors) )

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-29T15:45:18.943

正确的。TypeScript 中的类不需要你显式地编写构造函数。但是，如果您要扩展基类，则至少需要创建一个构造函数来调用 super()。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2018-08-21T18:28:13.543

只是为了扩展接受的答案并纠正 Jon Gear 的答案（TS 可能在此期间发生了变化）：派生类不需要创建一个唯一目的是调用的构造函数`super()`。

[https://stackblitz.com/edit/no-need-for-derived-constructor?file=index.ts](https://stackblitz.com/edit/no-need-for-derived-constructor?file=index.ts)

# jsf - 使用 JSF 2.0、CDI、EJB 3.1 Servlet Spec 3.0 Programmatic Security 时如何设置 UserBean

> ID：15620613
> 
> 赞同：0
> 
> 时间：2013-03-25T17:02:09.923
> 
> 标签：jsf, jakarta-ee, jsf-2, java-ee-6, cdi

[这个问题是对这里](https://stackoverflow.com/questions/15263390/jsf-2-0-cdi-injected-session-bean-within-request-bean-contains-null-properties)的跟进。

登录后，我的应用程序需要使用 request.login() 查询容器进行身份验证，然后设置一个“用户”bean，其中包含用户名、密码、角色和特定于位置的字段。在对容器（WAS 8）成功授权后，需要检查用户的角色以找出应将用户重定向到的适当欢迎页面。我的容器实现了一个联合存储库，它基本上将 3 个 LDAP 分支、一个数据库和一个平面文件集中在一起。有很多角色（现在5个，以后可能会更多）。

我有 2 个 bean：一个 RequestScoped Credentials bean 和一个名为 Login 的 SessionScoped bean。登录包含一个 login() 方法。我在登录方法方面有问题。

我的问题是，每当我使用：

```
Principal userPrincipal = request.getUserPrincipal();
request.getUserPrincipal();
if (userPrincipal != null) {
    request.logout();
}
request.login(credentials.getUsername(), credentials.getPassword());
String name = userPrincipal.getName(); 
```

前：

```
Donor donor = loginService.getDonor(credentials.getUsername());
currentUser = new Users();
currentUser.setLocation(donor.getCenter().getCity());
currentUser.setRole("DONOR");
currentUser.setUserId(credentials.getUsername());
currentUser.setFirstName(donor.getFirstName());
currentUser.setLastName(donor.getLastName());
currentUser.setUsername(credentials.getUsername());
currentUser.setName(credentials.getUsername());
return "users?faces-redirect=true"; 
```

我的 currentUser 用户 bean 没有存储在会话中。

我删除了第一块代码，并注意到我的 User bean 的信息随后存储在会话中，并且可以在后续用户页面上查看。我逐行重新引入了第一块代码，并注意到：

```
if (userPrincipal != null) {
    request.logout();
} 
```

导致问题。

我到底应该如何存储实现编程安全性和 JSF2.0/CDI 的用户 bean？我已经为此花费了数周时间。我可以想象实现一些更精细的东西，比如捕获重定向的过滤器，抓取用户主体，调用 db 或 ldap 以获取其他属性，然后重定向到适当的页面......但我想让事情保持简单。必须有一个简单的方法来做到这一点。

我最初尝试使用 j_security_check 登录并在 web.xml 中指定 FORM。现在，使用 JSF 2.0 表单和登录方法，我注意到 FORM 被 BASIC 忽略了。System.out.println("getAuthType?.." + request.getAuthType()); 在登录方法中返回“BASIC”。这会导致烦人的缓存，这就是需要 request.logout 的原因。否则，request.login 将失败。

我昨晚偶然发现了[这个](https://stackoverflow.com/questions/10154202/how-do-i-do-security-in-jsf)，其中包含指向[此处](https://blogs.oracle.com/enterprisetechtips/entry/improving_jsf_security_configuration_with)的链接。因此，可能有一种方法可以获取 userprincipal、设置 User bean 并重定向到适当的欢迎页面。我不知道第二个链接有多过时。j_security_check 似乎也不能与确定我应该根据角色将用户重定向到哪个页面的编程方式结合使用。

至于我应该使用 j_security_check 还是编程安全/JSF/CDI，我只需要弄清楚一些简单的东西，并允许我在会话中存储 Login bean 或独立的 User bean。

从我的角度来看，这是我的登录表单：

```
<h:form id="loginForm">
    <fieldset>
        <div class="form-row">
            <h:outputLabel for="username" value="User ID"/>
            <h:inputText id="username" value="#{credentials.username}" 
required="true" size="20" />
        </div>
        <div class="form-row">
            <h:outputLabel for="password" value="Password"/>
            <h:inputSecret id="password" type="password" value="#
{credentials.password}" required="true" />
        </div>

        <div class="form-row"> 
            <h:commandButton styleClass="btn btn-warning" value="Sign In" 
type="submit" action="#{login.login}" />
            <a href="#" id="forgot-password">Forgot you password?</a>
        </div>     
    </fieldset>
</h:form> 
```

这是我的登录 bean（代码已被删除和编辑以展示相关部分）：

```
import javax.enterprise.context.SessionScoped;
import javax.enterprise.inject.Produces;
import javax.faces.application.FacesMessage;
import javax.faces.context.ExternalContext;
import javax.faces.context.FacesContext;
import javax.inject.Inject;
import javax.inject.Named;
import javax.persistence.EntityManager;
import javax.persistence.PersistenceContext;
import javax.security.auth.Subject;
import javax.security.auth.login.CredentialExpiredException;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServletRequest;
import java.security.Principal;
@SessionScoped
@Named
public class Login implements Serializable {

    private static final long serialVersionUID = 7965455427888195913L;

    @Inject
    private Credentials credentials;

    @PersistenceContext
    private EntityManager userDatabase;

    @Inject
    LoginService loginService;

    private Users currentUser;
    private Service service;
    private String uniqueSecurityName;
    private String l;

    @SuppressWarnings("unchecked")
    public String login() {
        FacesContext context = FacesContext.getCurrentInstance();
        ExternalContext externalContext = context.getExternalContext();
        HttpServletRequest request = (HttpServletRequest) externalContext.getRequest();
        System.out.println("The login method has been called.");

        try {
        Principal userPrincipal = request.getUserPrincipal();
        request.getUserPrincipal();
        if (userPrincipal != null) {
            request.logout();
        }
        request.login(credentials.getUsername(), credentials.getPassword());
        String name = userPrincipal.getName();

        System.out.println("getRemoteUser?.." + request.getRemoteUser());
        System.out.println("getUserPrincipal?.." + request.getUserPrincipal());
        System.out.println("getAuthType?.." + request.getAuthType());         

        Donor donor = loginService.getDonor(credentials.getUsername());
        currentUser = new Users();
        currentUser.setLocation(donor.getCenter().getCity());
        currentUser.setRole("DONOR");
        currentUser.setUserId(credentials.getUsername());
        currentUser.setFirstName(donor.getFirstName());
        currentUser.setLastName(donor.getLastName());
        currentUser.setUsername(credentials.getUsername());
        currentUser.setName(credentials.getUsername());
        return "users?faces-redirect=true";
        } catch (Exception e) {}

        return null;
    }
    public void logout() {
        currentUser = null;
    }

    public boolean isLoggedIn() {
        return currentUser != null;
    }

    @Produces
    @LoggedIn
    public Users getCurrentUser() {
        return currentUser;
    }
} 
```

这是我的凭据 bean：

```
import java.io.Serializable;

import javax.enterprise.context.RequestScoped;
import javax.enterprise.inject.Default;
import javax.inject.Named;

@RequestScoped
@Named
@Default
public class Credentials implements Serializable {
    /**
     * 
     */
    private static final long serialVersionUID = 6976596855571123825L;
    private String username;
    private String password;

    public String getUsername() {
        return username;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }
} 
```

这是随后的 users.xhtml 页面（仅用于验证会话信息的测试目的）：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core">
      <head>
      <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
      <title>Login</title>
      <link href="style/main.css" rel="stylesheet" type="text/css"/>
      <ui:insert name="head"/>
    </head>
<body>

  <div id="container">
    <div id="header">

    </div>

    <div id="sidebar">

    </div>

    <div id="content">
      <h1>Current User</h1>
        <h:dataTable value="#{login.currentUser}" var="u">
            <h:column>
                <f:facet name="header">
                 Username
              </f:facet>
                <h:outputText value="#{u.username}" />
            </h:column>
            <h:column>
                <f:facet name="header">
                 Name
              </f:facet>
                <h:outputText value="#{u.name}" />
            </h:column>
            <h:column>
                <f:facet name="header">
                 Password
              </f:facet>
                <h:outputText value="#{u.password}" />
            </h:column>
        </h:dataTable>
    </div>

    <br style="clear:both"/>
  </div>

</body>
</html> 
```

这是我的用户 bean：

```
import java.io.Serializable;

import javax.annotation.PostConstruct;
import javax.enterprise.context.SessionScoped;
import javax.faces.context.FacesContext;
import javax.inject.Named;
import javax.persistence.Entity;
import javax.persistence.Id;
import javax.persistence.Transient;

@Entity
public class Users {
    @Id
    private String username;
    private String name;
    private String password;
    @Transient
    private String role;
    @Transient
    private String location;
    @Transient
    private String userId;
    @Transient
    private String firstName;
    @Transient
    private String lastName;

    public Users() {
    }

    public String getUsername() {
        return username;
    }

    public void setName(String name) {
        this.name = name;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    public String getName() {
        return name;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    public String getPassword() {
        return password;
    }

    public String getRole() {
        return role;
    }

    public void setRole(String role) {
        this.role = role;
    }

    public String getLocation() {
        return location;
    }

    public void setLocation(String location) {
        this.location = location;
    }

    public String getUserId() {
        return userId;
    }

    public void setUserId(String userId) {
        this.userId = userId;
    }

    public String getFirstName() {
        return firstName;
    }

    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }

    public String getLastName() {
        return lastName;
    }

    public void setLastName(String lastName) {
        this.lastName = lastName;
    }

    @Override
    public String toString() {
        return "User (username = " + username + ", name = " + name + ")";
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T17:34:40.743

你的问题和你猜的一样

```
 if (userPrincipal != null) {
            request.logout();
        } 
```

您正在使用上述行重新创建会话。在会话范围的 bean 中销毁会话不是一个好主意。这导致会话 bean 被 CDI 清理。

您需要在操作方法中清理会话 bean 时存储用户名、密码。

```
@ApplicationScoped
class LoginService{

public boolean login(String username,String password) {
                String username = credentials.getUsername();
                String password = credentials.getPassword();
                Principal userPrincipal = request.getUserPrincipal();
                request.getUserPrincipal();
                if (userPrincipal != null) {
                    request.logout();
                }
                boolean loggedIn = request.login(username,password);
                if(loggedIn){
                users = new Users();
                users.setUsername(username);  
                session.setAttribute("Users",users);               
                }
              return loggedIn;
    }

} 
```

保留登录凭据的操作方法

```
 @RequestScoped  
    class Credential {
          @Inject  LoginService loginService;
          String username;
          String password;

          login(ActionEvent action){
           if(loginService.login(username,password))
               //redirect to users
            else
               //show error
          }
    } 
```

创建注释以从 CDI 获取登录用户

```
@Retention(RetentionPolicy.RUNTIME) @Target({TYPE, METHOD, FIELD, PARAMETER})
public @interface SpringBean {
    String value() default "";
} 
```

使用 BeanLocator 类来生成一些对象，您可以将此方法添加到 LoginService 但最好将其分开

```
 public class BeanLocator {    
    @Produces @LoggedInUser
    public Object getSessionAttribute(InjectionPoint ip){
        String beanName = ip.getAnnotated().
                              getAnnotation(SessionAttribute.class).value();
        if(beanName==null || beanName.equals(""))
            beanName = getDefaultBeanName(ip.getMember().
                               getDeclaringClass().getName());
        return  FacesContext.getCurrentInstance().getExternalContext().
                    getSessionMap().get(beanName);
    }
   } 
```

* * *

在其他服务中使用它，例如，

```
class MyOtherBean{
 @Inject @@LoggedInUser Users;
} 
```

# ios - 进度条实现

> ID：15620614
> 
> 赞同：0
> 
> 时间：2013-03-25T17:02:12.513
> 
> 标签：ios, objective-c, progress-bar, xcode4.6

我正在使用 Xcode 4.6.1 在 Objective-C 中进行编码，我想知道如何设置进度条值，我的意思是，用一些值设置绿色部分和白色部分。我要实现的bar的数据是大学科目，所以绿色部分是用户已经看过的科目，白色部分是用户还没有看过的科目。因此，如果总共有 10 个主题，而用户刚刚看到 5 个，则进度条将是 50% 的绿色和 50% 的白色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T17:07:26.520

请参阅 UIProgressView 文档： [https ://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIProgressView_Class/Reference/Reference.html](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIProgressView_Class/Reference/Reference.html)

假设你有一个`UIProgressView`名为`myProgressView`.

`float currentProgress`包含用户已完成的科目数。

`float totalSubjects`包含用户可用的总主题数。

```
// calculate progress  (value must be 0.0 to 1.0)
float myProgress = currentProgress / totalSubjects;
[myProgressView setProgress:myProgress animated:YES]; 
```

# javascript - JS: Uncaught TypeError: object is not a function (onclick)

> ID：15620620
> 
> 赞同：37
> 
> 时间：2013-03-25T17:02:24.980
> 
> 标签：javascript, html

**编辑：** [这是一个 JSfiddle](http://jsfiddle.net/XpmZG/)

**Edit2：**错误在这一行：`<input type="button" value="totalbandwidthresult" onclick="javascript:totalbandwidth();">`

试图让一个按钮执行计算。所需的变量如下，以及 HTML 其中

我在点击时收到错误消息：`Uncaught TypeError: object is not a function index.html:71 onclick`

这是我的 Javascript

```
function totalbandwidth() {  
    var fps=Number(document.calculator.fps.value);  
    var bitrate=Number(document.calculator.bitrate.value);  
    var numberofcameras = Number(document.calculator.numberofcameras.value); 
    var encoding = document.calculator.encoding.value; 
    if (encoding = "mjpeg")
    {
        storage = bitrate*fps;
    }
    else
    {
        storage = bitrate;
    }

    totalbandwidth = (numberofcameras * storage) / 1000;
    document.calculator.totalbandwidthresult.value = totalbandwidth;  
} 
```

的HTML：

```
<form name="calculator" class="formtable">  
<div class="formrow"><label for="rcname">RC Name</label> <input type="text" name="rcname"></div>  
<div class="formrow"><label for="fps">FPS</label> <input type="text" name="fps">  </div>  
<div class="formrow"><label for="bitrate">Bitrate</label> <input type="text" name="bitrate">  </div>  
<div class="formrow"><label for="numberofcameras">Number of Cameras</label> <input type="text" name="numberofcameras"> </div>   
<div class="formrow"><label for="encoding">Encoding</label> <select name="encoding" id="encodingoptions">
  <option value="h264">H.264</option>
  <option value="mjpeg">MJPEG</option>
  <option value="mpeg4">MPEG4</option>
</select></div>  
Total Storage: <input type="text" name="totalstorage">   
Total Bandwidth: <input type="text" name="totalbandwidth">   
<input type="button" value="totalbandwidthresult" onclick="javascript:totalbandwidth();"> 
```

基本上 - 我在 JS 中使用的语法似乎有问题 - 但我不确定。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-03-25T17:38:50.287

请仅更改函数的名称；无需其他更改

```
<script>
    function totalbandwidthresult() {
        alert("fdf");
        var fps = Number(document.calculator.fps.value);
        var bitrate = Number(document.calculator.bitrate.value);
        var numberofcameras = Number(document.calculator.numberofcameras.value);
        var encoding = document.calculator.encoding.value;
        if (encoding = "mjpeg") {
            storage = bitrate * fps;
        } else {
            storage = bitrate;
        }

        totalbandwidth = (numberofcameras * storage) / 1000;
        alert(totalbandwidth);
        document.calculator.totalbandwidthresult.value = totalbandwidth;
    }
</script>

<form name="calculator" class="formtable">
    <div class="formrow">
        <label for="rcname">RC Name</label>
        <input type="text" name="rcname">
    </div>
    <div class="formrow">
        <label for="fps">FPS</label>
        <input type="text" name="fps">
    </div>
    <div class="formrow">
        <label for="bitrate">Bitrate</label>
        <input type="text" name="bitrate">
    </div>
    <div class="formrow">
        <label for="numberofcameras">Number of Cameras</label>
        <input type="text" name="numberofcameras">
    </div>
    <div class="formrow">
        <label for="encoding">Encoding</label>
        <select name="encoding" id="encodingoptions">
            <option value="h264">H.264</option>
            <option value="mjpeg">MJPEG</option>
            <option value="mpeg4">MPEG4</option>
        </select>
    </div>Total Storage:
    <input type="text" name="totalstorage">Total Bandwidth:
    <input type="text" name="totalbandwidth">
    <input type="button" value="totalbandwidthresult" onclick="totalbandwidthresult();">
</form> 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2019-09-09T04:21:27.967

由于这种行为有点奇怪，我对这种行为进行了一些测试，这是我的结果：

## TL;博士

如果你是：

*   **在一个`form`**, 和
*   `onclick="xxx()"`在元素上使用
*   **不要**添加`id="xxx"`或添加`name="xxx"`到该元素
    *   （例如**<form><button id="totalbandwidth" onclick="totalbandwidth()">BAD</button></form>**）

* * *

以下是一些测试及其结果：

### 对照样例*（可以成功调用函数）*

```
function totalbandwidth(){ alert("Total Bandwidth > 9000Mbps"); }
```

```
<form onsubmit="return false;">
  <button onclick="totalbandwidth()">SUCCESS</button>
</form>
```

### 给按钮添加id *（调用函数失败）*

```
function totalbandwidth(){ alert("Total Bandwidth > 9000Mbps"); }
```

```
<form onsubmit="return false;">
  <button id="totalbandwidth" onclick="totalbandwidth()">FAILED</button>
</form>
```

### 为按钮添加名称*（调用函数失败）*

```
function totalbandwidth(){ alert("Total Bandwidth > 9000Mbps"); }
```

```
<form onsubmit="return false;">
  <button name="totalbandwidth" onclick="totalbandwidth()">FAILED</button>
</form>
```

### 给按钮加值*（可以成功调用函数）*

```
function totalbandwidth(){ alert("Total Bandwidth > 9000Mbps"); }
```

```
<form onsubmit="return false;">
  <input type="button" value="totalbandwidth" onclick="totalbandwidth()" />SUCCESS
</form>
```

### 为按钮添加id，但不在表单中*（可以成功调用函数）*

```
function totalbandwidth(){ alert("Total Bandwidth > 9000Mbps"); }
```

```
<button id="totalbandwidth" onclick="totalbandwidth()">SUCCESS</button>
```

### 将id添加到表单内的另一个元素*（可以成功调用函数）*

```
function totalbandwidth(){ alert("The answer is no, the span will not affect button"); }
```

```
<form onsubmit="return false;">
<span name="totalbandwidth" >Will this span affect button? </span>
<button onclick="totalbandwidth()">SUCCESS</button>
</form>
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-25T17:36:24.250

我能够通过遵循此线程中的答案来弄清楚：[https ://stackoverflow.com/a/8968495/1543447](https://stackoverflow.com/a/8968495/1543447)

基本上，我将所有值、函数名称和元素名称重命名为不同的值，这样它们就不会发生冲突——它奏效了！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-28T05:54:28.843

如果您的函数中有一个大写字母，则会发生这种问题，因此请将其更改为小写字母。它会起作用，否则会使函数的名称变短

# ruby-on-rails - 如何在 Ember 中与 Rails 通信

> ID：15620625
> 
> 赞同：1
> 
> 时间：2013-03-25T17:02:44.503
> 
> 标签：ruby-on-rails, ember.js, ember-data

让我简要解释一下我的意思。我正在编写一个使用 Ember 和 Rails 的应用程序。每个员工都可以给其他同事一个荣誉。他不知道还有多少人收到了。我只能知道我必须给予多少荣誉，以及我从别人那里得到多少荣誉。

但我无法真正理解如何与 Rails 通信。一张图值一千字，请看这个： [kudos app http://wstaw.org/m/2013/03/25/kudos.png](http://wstaw.org/m/2013/03/25/kudos.png)

当应用程序启动时，我加载指向 /users 的用户列表。当前用户位于 /currentuser。当前用户的不同之处在于它具有额外的字段，例如 kudosReceived 和 kudosLeft。

假设我想给乔加一个荣誉。我点击一个按钮，然后，什么？假设当我去 /kudos/userid rails 会发挥它的魔力。它只是给乔增加了一个荣誉。但我也想获取更新后的当前用户数据（记住，它位于 /currentuser）。

我应该寄什么？我应该先在控制器上使用 CREATE 还是 UPDATE 方法？如何获取当前用户新数据？在回调中？或者我应该将 /currentuser 与 GET 一起使用。但当？

这就是我现在所拥有的，但我完全不确定它有多正确

```
// application.handlebars
<h1>My Kudos</h1>

<div id="kudos-content">
  <ul id="kudos-list">
    {{#with controllers.current}}
    <li>
      <p>{{firstName}} {{lastName}}</p>
      <p><img {{bindAttr src="imageUrl"}}  /></p>
      <p>received: {{kudosReceived}}</p>
      <p>left: {{kudosLeft}}</p>
    </li>
    {{/with}}
    {{#each user in controllers.users}}
    <li>
        <p>{{user.firstName}} {{user.lastName}}</p>
        <img {{bindAttr src="user.imageUrl"}}  />
        <a href="#" {{action "addKudo" user.id target="controller.controllers.kudo"}}>(+)</a>
    </li>
    {{/each}}
  </ul>
</div>

Sks.KudoController = Ember.ObjectController.extend({
    addKudo: function(userId) {
      // create a new record on a local transaction
      this.transaction = this.get('store').transaction();
      // don't really know what next
    }
}); 
```

下一个问题是如何在 {{action}} 中使用 /kudo/userid

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T17:18:28.043

听起来`Kudo`除了计数器之外，没有必要关心客户端中的任何内容。客户不知道任何特定`Kudo`来自何处或其他任何关于它的信息。在这种情况下，仅将当前用户剩余的 s 数`Kudo`视为 a就足够了。`-1``Kudo`

如果是这种情况，那么为 . 创建一个`DS.Model`类`Kudo`，担心关系，将关于 a 的所有内容存储`Kudo`在存储中，并将 JSON 发布到服务器是 100% 的矫枉过正。如果服务器不期望 JSON 用于 a`Kudo`并且只是为目标用户创建`Kudo`服务器端，或者增加计数器或其他任何内容，则尤其如此。

如果只需点击该 URL 就足够了，而且听起来确实如此，那么我建议只需使用 jQuery.ajax() 来点击该 URL。我还假设一个成功的响应意味着当前用户少了一个`kudosLeft`，我只是在成功回调中处理它，而不是担心将 currentUser 模型同步到服务器。如果这不理想，您可以调用`reload`currentUser 手动获取新数据，假设服务器一直在跟踪`kudosLeft`服务器端模型。

首先，添加`needs: ['current']`到您的 KudoController，以便您可以访问 currentUser。

然后在`addKudo`

```
addKudo: function(user) {
    jQuery.post('/kudo/' + user.get('id'), jQuery.proxy(function () {
          this.decrementProperty('controllers.current.kudosLeft');
        }, this));
} 
```

这假定 that`CurrentController`是 a ，`ObjectController`因此它将集合传递给它的`content`。

最后，更新您`{{action}}`以包含完整的`User`对象，而不仅仅是 id：

```
<a href="#" {{action "addKudo" user target="controller.controllers.kudo"}}>(+)</a> 
```

几点注意事项：

(1) 使用此方案可能会使客户端与服务器不同步，例如，如果用户打开了另一个应用程序副本并`Kudo`在那里发送 s。这可能是也可能不是问题。例如，在 Stack Overflow 中，当投票或接受的答案状态发生变化时，UI 会动态更新。在您的情况下，如果它不重要，那么根本不关心保持每件小事同步是可以接受的。在这种情况下，您可能会做的是让您的`/kudos`端点返回一个特定的状态代码，如果客户端尝试在用户没有剩余的情况下发送一个 kudo。ajax 调用的回调可以测试该状态并触发用户重新加载，或者只是将`kudosLeft`属性重置为 0。

(2)`kudosLeft`像这样设置属性会将记录标记为脏记录，因此在提交存储时会导致更新。您可以做的是有一个计算属性，例如`displayKudosLeft`最初设置为`kudosLeft`属性，但可以由应用程序更改以更新显示而不将记录标记为脏。

至于何时使用 ember-data，何时使用 $.ajax，这取决于。你的 API 有多大，它有多 RESTful？你使用`active_model_serializers`, 与 ember-data 配合得很好吗？您是否有很多关系需要反映在客户身上？您是否正在对属性进行大量“一次性”更新，或者达到实际上并不期望接收 JSON 以产生效果的 API 端点？

有大量应用程序（或至少一个）不使用 ember-data 并且运行良好。例如，Discourse 使用了一个很薄的包装器`$.ajax`，它做得很好。

# highcharts - Highstock xAxis.setExtremes 调用导致体积图在两个窗格图中消失或绘制不正确

> ID：15620626
> 
> 赞同：0
> 
> 时间：2013-03-25T17:02:46.000
> 
> 标签：highcharts, highstock

编辑 HighStock 示例 2 窗格图表，在轴上设置极值会导致成交量图表消失。这是一个例子

[http://jsfiddle.net/gbcLC/1/](http://jsfiddle.net/gbcLC/1/)

我使用的是双窗格图表，但是当我调用 setExtremes （因为我想设置导航器的起始值）时，大多数情况下第一个图表很好，但是体积图表（这是我的第二个 x 轴）每次都会跳到不同的高度（导致它脱离 x 轴），有时它会完全消失（尽管 y 轴本身看起来还不错）。

$(function() { $.getJSON(' [http://www.highcharts.com/samples/data/jsonp.php?filename=aapl-ohlcv.json&callback=](http://www.highcharts.com/samples/data/jsonp.php?filename=aapl-ohlcv.json&callback=) ?', function(data) {

```
 // split the data set into ohlc and volume
    var ohlc = [],
        volume = [],
        dataLength = data.length;

    for (i = 0; i < dataLength; i++) {
        ohlc.push([
            data[i][0], // the date
            data[i][1], // open
            data[i][2], // high
            data[i][3], // low
            data[i][4] // close
        ]);

        volume.push([
            data[i][0], // the date
            data[i][5] // the volume
        ])
    }

    // set the allowed units for data grouping
    var groupingUnits = [[
        'week',                         // unit name
        [1]                             // allowed multiples
    ], [
        'month',
        [1, 2, 3, 4, 6]
    ]];

    // create the chart
    $('#container').highcharts('StockChart', {
                chart: {
                    events: {
                        load: function() {
                            this.xAxis[0].setExtremes(Date.UTC(2008,1,1),Date.UTC(2008,8,1),true,true);
                        }
                    }
                },          
        rangeSelector: {
            selected: 1
        },

        title: {
            text: 'AAPL Historical'
        },

        yAxis: [{
            title: {
                text: 'OHLC'
            },
            height: 200,
            lineWidth: 2
        }, {
            title: {
                text: 'Volume'
            },
            top: 300,
            height: 100,
            offset: 0,
            lineWidth: 2
        }],

        series: [{
            type: 'candlestick',
            name: 'AAPL',
            data: ohlc,
            dataGrouping: {
                units: groupingUnits
            }
        }, {
            type: 'column',
            name: 'Volume',
            data: volume,
            yAxis: 1,
            dataGrouping: {
                units: groupingUnits
            }
        }]
    });
}); 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T10:55:09.913

该问题与动画有关，但已在最新的 master 分支中修复：

[http://jsfiddle.net/gbcLC/4/](http://jsfiddle.net/gbcLC/4/)

```
<script src="https://raw.github.com/highslide-software/highcharts.com/master/js/highstock.src.js"></script> 
```

# regex - 正则表达式，直到一个模式

> ID：15620629
> 
> 赞同：0
> 
> 时间：2013-03-25T17:02:56.147
> 
> 标签：regex, expression

我希望编写一个按特定模式分组的正则表达式。例如对于字符串：

```
"File=ZZZZZZZZZZZZZZ QQQQQQQQQQ.txt size=ten check=true test=true" 
```

我想要以下组：

```
File=ZZZZZZZZZZZZZZ QQQQQQQQQQ.txt
size=ten
check=true
test=true 
```

通常我可以只查找空格，但如果我的文件名中有空格，那么这不起作用。所以我需要匹配所有内容，直到我击中任何字符加上 =。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T17:05:50.343

你可以分开`[ ](?=\w+=)`。括号中的内容是“前瞻断言”，只有当后面的任何内容看起来像参数时才会匹配空格。

如果您打算匹配而不是拆分，`(?:[^ ]| (?!\w+=))+`应该可以。该`(?!...)`部分是一个*否定*的前瞻断言，因此只有在后面的内容看起来不像参数*时*，空间才会匹配。

请注意，并非所有正则表达式引擎都支持前瞻断言。大多数都这样做，尤其是 PCRE 风格的……但是请检查您的正则表达式引擎的文档以获取正确的语法。

（另外：我之所以使用Markdown 是`[ ]`因为 Markdown 讨厌内联代码中的前导空格。您可以只在其中使用一个空格（不带括号），或者`\s`如果您想允许任何空格字符分隔参数。）

# jquery - 用于在 ASP.NET Web 表单中添加对象列表的 UI

> ID：15620633
> 
> 赞同：1
> 
> 时间：2013-03-25T17:03:02.450
> 
> 标签：jquery, asp.net, webforms, postback, asp.net-4.5

我正在使用 ASP.NET Web 窗体，但我对如何处理状态有疑问。

我正在添加一个新产品，该产品有不同的变化。每个变体都有几个独特的特征，例如：价格、购买价格、变体类型、变体值。

在 UI 中，我希望能够添加变体列表。当我添加了产品的 X 变体和其他信息后，我想提交整个表单，然后开始添加到数据库部分。

**用一张图解释：**

好的，现在有一个图像。用户为变体添加新名称，单击“添加”，然后将其添加到当前变体 ListBox 控件。单击“当前变体”中的变体时，我可以填写有关变体的信息并保存。

完成所有变体后，我可以提交表单。

![在此处输入图像描述](../Images/a2b8d4ed1cc5cd9d7d685927ff218c89.png)

**现在，我的问题**

如果我使用当前变体的 AutoPostBack 并进行回发，那么由于状态，一切都会被遗忘。使用标准的 ASP.NET Web 表单，我找不到存储这些列表的方法。

我真正需要的是包含对象的 Windows 窗体中的 ListBox。但祝你好运，无状态网络 ;-)

**我能想到的解决方案**

*   每次单击时，更改都会保存到提交表单时使用的临时会话中

*   每次点击，我都可以暂时将内容保存到数据库中

**我想要的一种解决方案**

一个很好的解决方案是一些 jQuery 魔术，我可以在其中动态创建我需要的所有行，而无需回发。然后当我完成后，我可以迭代所有控件，并将其存储在数据库中。

我想这是一个正常的问题，有人可以发送一个明显的链接，或者告诉我修复它是多么容易！:-)

*哦，是的，还有最后一件事，不要让我下地狱，因为我在 Web 窗体中还有项目。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T17:27:26.723

这肯定是我觉得应该使用 ViewState 的地方。通常，我反对在 Web 窗体中使用 ViewState。但是，您处于需要这种“有状态”操作的地方。

使用包含如下表单元素的 ASPX：

```
 New Variation:
  <asp:TextBox runat="server" ID="newName"></asp:TextBox>
  <br />
  <asp:Button runat="server" ID="addName" Text="Add Variant" OnClick="addName_Click" />

  <br />
  <br />
  Current Variations:<br />
  <asp:ListBox runat="server" ID="listOfVariations" Width="200px" 
       AutoPostBack="true" 
       OnSelectedIndexChanged="listOfVariations_SelectedIndexChanged">
  </asp:ListBox>
  <br />
  Feature 1:<br />
  <asp:TextBox runat="server" ID="feature"></asp:TextBox>
  <br />
  <asp:Button runat="server" ID="submit" Text="Add Variation" /> 
```

您可以编写一个代码隐藏然后将数据移动到 ViewState 以在页面加载之间被记住：

```
 protected void addName_Click(object sender, EventArgs e)
    {
    listOfVariations.Items.Add(newName.Text);
    ViewState.Add("item_" + newName.Text, new VariantObject{ Name = newName.Text });
    newName.Text = "";

    }

  [Serializable]
  public class VariantObject
  {

    public string Name { get; set; }
    public string Feature1 { get; set; }

  }

  protected void listOfVariations_SelectedIndexChanged(object sender, EventArgs e)
  {

    var v = ViewState["item_" + listOfVariations.SelectedValue] as VariantObject;
    feature.Text = v.Feature1 ?? "";

  } 
```

# jquery - 动态添加/控制 vimeo 嵌入

> ID：15620637
> 
> 赞同：3
> 
> 时间：2013-03-25T17:03:08.733
> 
> 标签：jquery, embed, vimeo, froogaloop

我被困住了，真的可以使用一些帮助。

我正在尝试在页面上动态添加 vimeo 嵌入。页面加载了视频的静止画面，当单击静止帧时，它会淡出并开始播放嵌入的视频。这只是一种简单的方法来制作我们自己想要的播放按钮，而不需要 vimeo 加载栏和按钮。第一次做到这一点不是问题。

但是，视频下方有一个缩略图列表，当用户单击缩略图时，页面顶部的视频和静止帧必须换出并替换为新的视频和帧。它必须具有相同的功能。因此，当用户单击该帧时，它会淡出并在其后面播放新视频。

每次单击缩略图时，我都会尝试动态执行此操作。我有视频 ID 作为`attr`缩略图。我可以把所有东西都换掉，但是当点击静止帧时我不能让它们播放。所以我相信它与 vimeo 的 api 有关，但我似乎无法弄清楚。

看看这里的代码，如果您发现问题所在，请告诉我...

```
/*Load videos into top container when thumbnail is clicked....*/
        $('.thumb').click(function(){
            theID = $(this).attr('id');
            $('#topImage').attr('src','<? echo site_url();?>/video_still_frame.jpg');
            $('#topImage').show();
            $('#embedContainer').html("<iframe id='player_"+theID+"' src='http://player.vimeo.com/video/"+theID+"?autoplay=0&api=1&player_id=player_"+theID+"' width='833' height='474' frameborder='0' webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>");
            clearPlayer();
            createPlayer(theID);
            $('#embedContainer').hide();

        });

    function clearPlayer(){
        iframe='';
        player='';
        status='';  
    }

    /*VIMEO API*/
    function createPlayer(idToUse){
        alert(idToUse);
        var iframe = $('#player_'+idToUse)[0],
            player = $f(iframe),
            status = $('.status');
            alert('playerCreated');

        // When the player is ready, add listeners for pause, finish, and playProgress
        player.addEvent('ready', function() {
            status.text('ready');
            player.addEvent('pause', onPause);
            player.addEvent('finish', onFinish);
            player.addEvent('playProgress', onPlayProgress);
            alert('add listeners');
        });

        // Call the API when a button is pressed    
        $('#topImage, #play').click(function(){
            player.api('play'); 
            alert('play video');
        });

        function onPause(id) {
            status.text('paused');
        }

        function onFinish(id) {
            status.text('finished');
        }

        function onPlayProgress(data, id) {
            status.text(data.seconds + 's played');
        }

}   

    /*Run once on page load */
    createPlayer('123456789'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T08:13:49.703

我不是专家，但可能是这样的：http: [//jsfiddle.net/MAhE6/](http://jsfiddle.net/MAhE6/)？

```
var player = $f(document.getElementById('player'));
  player.addEvent('ready', function() { 
  player.api('play');
});

$("#1").click(function() {
  $iframeSRC = "http://player.vimeo.com/video/65520135?api=1&player_id=player";  
  $("#player").attr("src",$iframeSRC);
});

$("#2").click(function() {
  $iframeSRC = "http://player.vimeo.com/video/65511705?api=1&player_id=player";  
  $("#player").attr("src",$iframeSRC);
});

$("#3").click(function() {
  $iframeSRC = "http://player.vimeo.com/video/65448540?api=1&player_id=player";  
  $("#player").attr("src",$iframeSRC);
}); 
```

# css - HTML img 行为 - 为什么浮动时没有边距？

> ID：15620639
> 
> 赞同：0
> 
> 时间：2013-03-25T17:03:20.960
> 
> 标签：css

在此图片库示例中：

[http://www.w3schools.com/css/tryit.asp?filename=trycss_float_elements](http://www.w3schools.com/css/tryit.asp?filename=trycss_float_elements)

```
<head>
<style>
.thumbnail 
{
     float:left;
     width:110px;
     height:90px;
     margin:5px;
}
</style>
</head>

<body>
<h3>Image Gallery</h3>
<p>Try resizing the window to see what happens when the images does not have enough    room.</p>
<img class="thumbnail" src="klematis3_small.jpg" width="116" height="90">
<img class="thumbnail" src="klematis4_small.jpg" width="120" height="90">
</body>
</html> 
```

如果从 .thumbnail 类中删除宽度，则图像将彼此相邻放置，中间没有空格。但是对于没有浮动的常规图像元素，似乎自动有一些边距。我需要了解一般行为。浮动的行为是它们彼此相邻放置。为什么会影响图像元素的边距？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T17:06:33.767

只有[块元素](http://www.impressivewebs.com/difference-block-inline-css/)可以有边距。

添加：

`display:block`到你的 CSS

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T19:02:16.973

每个图像都有自己的宽度大小。如果您没有在类中设置宽度大小，则图像将无法很好地对齐。如果您在类中声明宽度，就像您为该图像创建一个容器，无论该图像的宽度是多少，它都会相应地调整为 110 像素。是的，浮动会将所有图像彼此对齐。

# ios - rectForHeaderInSection 不更新有 tableview 滚动

> ID：15620641
> 
> 赞同：2
> 
> 时间：2013-03-25T17:03:27.117
> 
> 标签：ios, objective-c, uitableview, cgrect

我有一个包含几个部分的普通表格视图，每个部分都有一个部分标题。我正在尝试重新创建当新标题触摸它时将标题撞开的效果，但我想在桌子上降低它，而不是当它触摸屏幕/表格视图的顶部时。我想检测节标题何时到达屏幕上的某个点。

我已经实现：

```
 - (void)scrollViewDidScroll:(UITableView *)tableView
{
    CGRect headerRect = [tableView rectForHeaderInSection:0];
    NSLog(@"%f",headerRect.origin.y);
} 
```

但是随着表格视图的滚动，矩形不会更新到标题的当前位置。我尝试过使用`tableview.contentOffset.y`，但每次使用 tableview 时，每个部分中的单元格数量都不同，所以我无法可靠地知道标题何时使用这种方法到达正确的点。

有什么想法吗？

# ruby - 与 IRB 中的 `Array#[]` 输出混淆

> ID：15620643
> 
> 赞同：0
> 
> 时间：2013-03-25T17:03:30.093
> 
> 标签：ruby, arrays, slice

我正在玩[`Array#[]`](http://www.ruby-doc.org/core-2.0/Array.html#method-i-5B-5D)我`IRB`的学习它。我所有的尝试都在下面：

下面的代码就明白了。

```
[2,3][0..1]
#=> [2, 3] 
```

*为什么下面的代码给出`empty array`？*

```
[2,3][-1,0]
#=> [] 
```

*但为什么代码赋予`nil`价值？*

```
[2,3][0,-1]
#=> nil 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T17:08:42.523

`[2,3][1,2]`将从索引 1 开始并选择接下来的 2 个值。

`[2,3][-1,0]`将从索引 -1 开始并选择下一个 0 值。-1 从数组的末尾开始并向后工作。

**编辑：**

要回答更新后的问题，`[2,3][0,-1]`将从索引 0 开始，但由于长度不能为负数，因此它将返回`nil`.

如果要选择索引之前的值，只需将索引减 1，长度为 1。

**编辑2：**

Ruby 并非设计为接受负长度值，而是设计为接受负起始值。

此外，在文档“此外，当元素范围的起始索引位于数组末尾时，将返回一个空数组。” - [http://www.ruby-doc.org/core-2.0/Array.html#method-i-5B-5D](http://www.ruby-doc.org/core-2.0/Array.html#method-i-5B-5D)

深入研究 Ruby 源代码后，如果起始索引或长度值小于零，则该`rb_ary_subseq`函数将返回。`nil`

但是在`rb_ary_subseq`调用 之前，该`rb_ary_aref`函数将负起始索引值更改为正 with`start += array.length`以产生相同的效果。

没有代码可以进行负长度转换。

所以`[2,3][-1,0]`将返回一个空数组，因为长度不小于零并且因为引用的文档中的描述。

`[2,3][0,-1]`将返回`nil`，因为长度小于零。

源代码链接：

`rb_ary_aref`- [http://rxr.whitequark.org/mri/source/array.c#1042](http://rxr.whitequark.org/mri/source/array.c#1042)

`rb_ary_subseq`- [http://rxr.whitequark.org/mri/source/array.c#989](http://rxr.whitequark.org/mri/source/array.c#989)

# cassandra - Cassandra 插入在集群上受到限制

> ID：15620644
> 
> 赞同：1
> 
> 时间：2013-03-25T17:03:30.593
> 
> 标签：cassandra, pycassa

我在使用 Cassandra 时遇到了一个奇怪的问题。我的理解是 Cassandra 对于插入是可扩展的。这意味着如果我使用 2 个服务器的集群获得 1500 次写入/秒，我可以将其增加到 4 台服务器并接近 1500 次写入/秒。我知道 writes/s 可能不会随着集群中的节点数量线性增加，但我目前看到添加更多节点时 writes/s 的数量没有增加。

我目前的设置是这样的：

使用 Pycassa 批量插入，批量大小为 20 行。复制因子为 2 持久写入

一些 ColumnFamilies 有普通的列，一些有高达几十万列的宽列。具有宽列的 ColumnFamilies 的插入是分批插入的，而不是 100,000 列的 20 行。

cassandra 集群是托管在 EC2 中的 2 节点集群，使用 m1.xlarge 和 SSD 驱动器（无 raid），提交日志与 sstables 位于同一驱动器上。

我尝试将集群扩展到 10 多个节点，并且获得与 2 个节点相同的性能。我还尝试增加导入数据的实例数量，性能是相同的，只是每次写入操作的延迟要高得多。但无论我做什么，我都无法让写入速度超过 1500/s。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T17:50:53.390

听起来您的客户没有使 Cassandra 饱和。如果 Cassandra 不是 CPU、i/o 或网络绑定，这就是你的问题。

经验法则是 2 台 Cassandra 服务器大约需要 1 台客户端计算机才能在一个副本上饱和。（因此，2 的比例约为 1:4。）如果您不使用像 Java 这样的“快速”语言，请将客户端数量乘以 5-10；对于 Python，由于 GIL，您还需要付出一些努力在每台机器内的多个进程之间进行并行化。

TLDR 不断添加客户端机器，直到数量停止上升。

（我还建议使用 OpsCenter 之类的东西进行监控，这会突出使用 ByteOrderedPartitioner 等问题，或者没有正确地将请求负载分散到集群中。）

# python - 在 Python 中，如何使用 Google Apps 域密钥连接到 Google API？

> ID：15620645
> 
> 赞同：0
> 
> 时间：2013-03-25T17:03:36.487
> 
> 标签：python, google-oauth, google-api-python-client

我无法使用域密钥（即与域名同名的消费者密钥）连接到我的 Google 日历。

我正在按照此处的指导使用 OAuth2WebServerFlow、凭据和存储对象： [https ://developers.google.com/api-client-library/python/guide/aaa_oauth](https://developers.google.com/api-client-library/python/guide/aaa_oauth)

```
flow = OAuth2WebServerFlow(client_id="domain.com",
                           client_secret=<Consumer Secret>,
                           scope='https://www.googleapis.com/auth/calendar') 
```

但是，当我去网站进行身份验证时，我只会收到“invalid_client”错误。

有没有人有任何提示让这个工作？我在获取从 API 控制台生成的 OAuth 密钥时没有问题。但是，我特别在域密钥上苦苦挣扎。你有什么特别的事情要做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:26:44.787

这适用于 OAuth 2.0，因此您需要实际的客户端 ID，而不是您的域。（似乎您将其与 OAuth 1.0 混为一谈，但也许我误解了。）

查看 Google API 控制台[文档](https://developers.google.com/console/help/#generatingoauth2)，了解有关客户端 ID 是什么以及在哪里可以找到它的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T16:56:04.040

使用 SignedJwtAssertionCredentials，并使用“prn”参数指定要模拟的用户：

[http://google-api-python-client.googlecode.com/hg/docs/epy/oauth2client.client.SignedJwtAssertionCredentials-class.html](http://google-api-python-client.googlecode.com/hg/docs/epy/oauth2client.client.SignedJwtAssertionCredentials-class.html)

[https://developers.google.com/accounts/docs/OAuth2ServiceAccount#formingclaimset](https://developers.google.com/accounts/docs/OAuth2ServiceAccount#formingclaimset)

[http://support.google.com/a/bin/answer.py?hl=en&answer=162106](http://support.google.com/a/bin/answer.py?hl=en&answer=162106)

# python - 龙卷风用户输入错误捕获

> ID：15620646
> 
> 赞同：0
> 
> 时间：2013-03-25T17:03:40.960
> 
> 标签：python, exception-handling, tornado

我正在开发 Tornado 应用程序。它在一个名为 api.py 的文件中具有 CRUD 函数，相关位显示在此处：

```
class UserEditException(Exception):
    def __init__(self, msg):
        self.msg = msg
    def __str__(self):
        return self.msg

def create_user(first_name, last_name, email, password, session = None):

  others_with_same_email = session.query(MyAppUser).filter(MyAppUser.email.like(email)).all()
  if others_with_same_email is not None:
    raise UserEditException('Already another account with that email address.') 
```

这由 app.py 调用，其中包含实际的处理程序，包括用于创建新用户的页面。app.py 的相关位如下所示：

```
import api

class CreateUserHandler(BaseHandler):
  def get(self):
    self.render(
      local_templates + "/create_user.html",
      user_msg = 'Enter new user attributes, including an email address not already in use.',
    )

  def post(self):
    user_msg = '' #currently there are no problems found with inputs
    password = self.get_argument("password") 
    email = self.get_argument("email")
    first_name = self.get_argument("first_name",default=None)
    last_name = self.get_argument("last_name",default=None)
    if user_msg == '':
      try:
        new_user = api.create_user(first_name, last_name, email, password, agent_uuid = self.current_user)
      except api.UserEditException, err:
        user_msg = str(err)
      else:
        user_msg = 'The new user,'+new_user['first_name']+' '+new_user['last_name']+' ('+new_user['email']+') has been created successfully.'

    self.render(
      local_templates + "/create_user.html",
      first_name = first_name,
      last_name = last_name,
      email = email,
      user_msg = user_msg,
    ) 
```

当我输入一个已经在使用的电子邮件时（即故意触发用户创建错误），我知道在 api.py 中它触发了 UserEditException，因为消息“已经是具有该电子邮件地址的另一个帐户”。正在写入服务器。然后程序崩溃。相反，我希望捕获 UserEditException，并将错误消息放入“user_msg”，以显示到网页。你能指出我在试图捕捉这种错误时可能做错了什么吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T19:23:34.960

啊。抱歉，似乎在我试图尽可能简化这个问题的代码时，我遗漏了最重要的一行。该`create_user`函数有一个“transaction_op”装饰器，它处理诸如在出现错误时回滚事务之类的事情。然而，这个装饰器因此捕获了异常，而不是重新提升它。因此，我无法在我的处理程序中捕获它，因为当它离开`create_user`函数时，异常已经被捕获。

故事的寓意：如果在一个函数和调用它的代码之间发生了一些莫名其妙的事情，请怀疑函数的装饰器。

# ruby-on-rails - Unicorn PID 在初始部署时已过时

> ID：15620647
> 
> 赞同：5
> 
> 时间：2013-03-25T17:03:47.237
> 
> 标签：ruby-on-rails, capistrano, unicorn

我第一次尝试在我的 Rails 应用程序中使用 capistrano 和 unicorn。我可以成功部署，但 unicorn 不会以来自 stderr 的以下错误开始：

```
I, [2013-03-25T16:55:35.877323 #2378]  INFO -- : reloading config_file=/var/www/good/current/config/unicorn.rb E, [2013-03-25T16:55:35.881496 #2378] ERROR -- : error reloading config_file=/var/www/good/current/config/unicorn.rb: Already running on PID:2378 (or pid=/var/www/good/current/tmp/pids/unicorn.pid is stale) (ArgumentError) E, [2013-03-25T16:55:35.881548 #2378] ERROR -- : /var/www/good/shared/bundle/ruby/1.9.1/gems/unicorn-4.6.2/lib/unicorn/http_server.rb:193:in `pid=' E, [2013-03-25T16:55:35.881579 #2378] ERROR -- : /var/www/good/shared/bundle/ruby/1.9.1/gems/unicorn-4.6.2/lib/unicorn/configurator.rb:111:in `block in commit!' E, [2013-03-25T16:55:35.881606 #2378] ERROR -- : /var/www/good/shared/bundle/ruby/1.9.1/gems/unicorn-4.6.2/lib/unicorn/configurator.rb:108:in `each' E, [2013-03-25T16:55:35.881645 #2378] ERROR -- : /var/www/good/shared/bundle/ruby/1.9.1/gems/unicorn-4.6.2/lib/unicorn/configurator.rb:108:in `commit!' E, [2013-03-25T16:55:35.881674 #2378] ERROR -- : /var/www/good/shared/bundle/ruby/1.9.1/gems/unicorn-4.6.2/lib/unicorn/http_server.rb:699:in `load_config!' E, [2013-03-25T16:55:35.881703 #2378] ERROR -- : /var/www/good/shared/bundle/ruby/1.9.1/gems/unicorn-4.6.2/lib/unicorn/http_server.rb:308:in `join' E, [2013-03-25T16:55:35.881731 #2378] ERROR -- : /var/www/good/shared/bundle/ruby/1.9.1/gems/unicorn-4.6.2/bin/unicorn:126:in `<top (required)>' E, [2013-03-25T16:55:35.881758 #2378] ERROR -- : /var/www/good/shared/bundle/ruby/1.9.1/bin/unicorn:23:in `load' E, [2013-03-25T16:55:35.881786 #2378] ERROR -- : /var/www/good/shared/bundle/ruby/1.9.1/bin/unicorn:23:in `<main>' I, [2013-03-25T16:55:36.233632 #2378]  INFO -- : reaped
#<Process::Status: pid 2392 exit 0> worker=1 I, [2013-03-25T16:55:36.234045 #2378]  INFO -- : reaped
#<Process::Status: pid 2397 exit 0> worker=3 I, [2013-03-25T16:55:36.234560 #2378]  INFO -- : reaped
#<Process::Status: pid 2394 exit 0> worker=2 I, [2013-03-25T16:55:36.336246 #8587]  INFO -- : executing ["/var/www/good/shared/bundle/ruby/1.9.1/bin/unicorn", "-c", "/var/www/good/current/config/unicorn.rb", "-E", "production", "-D", {12=>#<Kgio::UNIXServer:fd 12>, 13=>#<Kgio::TCPServer:fd 13>}] (in /var/www/good/releases/20130325165445) I, [2013-03-25T16:55:36.336510
#8587]  INFO -- : forked child re-executing... I, [2013-03-25T16:55:38.475972 #2378]  INFO -- : reaped
#<Process::Status: pid 2389 exit 0> worker=0 I, [2013-03-25T16:55:38.476109 #2378]  INFO -- : master complete 
```

关键是

> 错误重新加载 config_file=/var/www/good/current/config/unicorn.rb: 已经在 PID:2378 上运行

我已经包含了 Gemfile、deploy.rb 和 unicorn.rb

我将不胜感激任何帮助或想法。我也在使用 RVM 和 ubuntu

**配置/部署.rb**

```
require "rvm/capistrano"
set :rvm_type, :system
set :rvm_install_with_sudo, true

require "bundler/capistrano"
set :bundle_without, [:darwin, :development, :test]

set :application, "Talking GOOD"
set :repository,  "git@github.com:FTW-Development/good.git"
set :scm_user, "hunter@ftwdev.com"
ssh_options[:forward_agent] = true

#set :migrate_target, :current
#set :ssh_options, { :forward_agent => true }

#set :rails_env, "production"
set :deploy_to, "/var/www/good"
#set :normalize_asset_timestamps, false #what?
set :user, "rails"
set :group, "www"
set :use_sudo, false

set :keep_releases, 5
after "deploy:restart", "deploy:cleanup"

require 'capistrano-unicorn'
#after 'deploy:restart', 'unicorn:reload' # app IS NOT preloaded
after 'deploy:restart', 'unicorn:restart'  # app preloaded

#role :web, "your web-server here"                          # Your HTTP server, Apache/etc
#role :app, "your app-server here"                          # This may be the same as your `Web` server
#role :db,  "your primary db-server here", :primary => true # This is where Rails migrations will run
#role :db,  "your slave db-server here"

#set :stages, %(production, staging)
#set :default_stage, "staging"
#require 'capistrano/ext/multistage'

#set(:unicorn_env) { rails_env }
#set(:app_env)     { rails_env }
#role(:web) { domain }
#role(:app) { domain }
#role(:db, :primary => true) { domain }

#set(:deploy_to)    { "/home/#{user}/#{application}/#{fetch :app_env}" }
#set(:current_path) { File.join(deploy_to, current_dir) }

server "good.ftwdev.com", :app, :web, :db, :primary => true 
```

**配置/独角兽.rb**

```
app_path = "/var/www/good/current"

# Set unicorn options
worker_processes 1
preload_app true
timeout 180
listen "127.0.0.1:9000"

# Spawn unicorn master worker for user apps (group: apps)
user 'rails.www' 

# Fill path to your app
working_directory "/var/www/good/current"

# Should be 'production' by default, otherwise use other env 
rails_env = ENV['RAILS_ENV'] || 'production'

# Log everything to one file
stderr_path "log/unicorn.log"
stdout_path "log/unicorn.log"

# Set master PID location
pid "#{app_path}/tmp/pids/unicorn.pid"

before_fork do |server, worker|
  ActiveRecord::Base.connection.disconnect!

  old_pid = "#{server.config[:pid]}.oldbin"
  if File.exists?(old_pid) && server.pid != old_pid
    begin
      Process.kill("QUIT", File.read(old_pid).to_i)
    rescue Errno::ENOENT, Errno::ESRCH
      # someone else did our job for us
    end
  end
end

after_fork do |server, worker|
  ActiveRecord::Base.establish_connection
end 
```

**宝石文件**

```
source 'https://rubygems.org'

gem 'rails', '3.2.8'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'mysql2'

gem 'devise', '~> 2.1.0'
gem 'cancan'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'bootstrap-sass', '~> 2.2.2.0'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'
gem 'haml'
gem 'hpricot'
gem 'ruby_parser'
gem 'simple_form'
gem 'high_voltage'
gem 'paperclip', '~> 3.0'
gem 'twitter-bootstrap-rails'

group :production do
  gem 'rb-inotify', '~> 0.9'
  gem 'execjs'
  gem 'therubyracer'
  gem 'unicorn', '~> 4.6'
end

group :development do
  gem 'thin'
  gem 'growl'
  gem 'guard'
  gem 'guard-bundler'
  gem 'guard-livereload'
  gem 'guard-rails'
  gem 'guard-rspec'
  gem 'rack-livereload'
  gem 'html2haml'
  gem 'capistrano'
  gem 'capistrano-unicorn'
  gem 'rvm-capistrano'
  gem 'rb-fsevent', :require => false
  gem 'rb-inotify', '~> 0.9', :require => false
  gem 'rb-fchange', :require => false
end

#gem "rspec-rails", ">= 2.12.1", :group => [:development, :test]
#gem "database_cleaner", ">= 0.9.1", :group => :test
#gem "email_spec", ">= 1.4.0", :group => :test
#gem "cucumber-rails", ">= 1.3.0", :group => :test, :require => false
#gem "launchy", ">= 2.1.2", :group => :test
#gem "capybara", ">= 2.0.2", :group => :test
#gem "factory_girl_rails", ">= 4.1.0", :group => [:development, :test]
#gem "bootstrap-sass", ">= 2.1.1.0"
#gem "devise", ">= 2.2.0"
#gem "cancan", ">= 1.6.8"
#gem "rolify", ">= 3.2.0"
#gem "simple_form", ">= 2.0.4"
#gem "quiet_assets", ">= 1.0.1", :group => :development
#gem "figaro", ">= 0.5.2"  #used for configurations
#gem "better_errors", ">= 0.2.0", :group => :development
#gem "binding_of_caller", ">= 0.6.8", :group => :development

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'debugger' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T16:06:14.740

您的问题是，在部署时，您可能不会在再次运行 unicorn 之前杀死 unicorn master pid。我认为问题出在你的 capistrano 食谱上……

对于 unicorn，我们通常在启动服务器时将 pid 保存在生产环境中的共享文件夹中，您还可以在其中保存独立于每个环境的日志、上传和其他内容。

请参阅我的 deploy.rb 之一的这两个任务：

```
desc "Start unicorn"
  task :start, :except => { :no_release => true } do
    run "cd #{current_path} ; bundle exec unicorn_rails -c config/unicorn.rb -D"
    run "ps aux | grep unicorn_rails | head -n 1 | awk '{print $2}' > #{deploy_to}/shared/tmp/pids/unicorn.pid"
  end

  desc "Stop unicorn"
  task :stop, :except => { :no_release => true } do
    run "kill -s QUIT `cat  #{deploy_to}/shared/tmp/pids/unicorn.pid`"
  end 
```

所以当我停止独角兽时，我总是杀死共享文件夹中的主 pid，当我启动它时，我将此 pid 复制到生产项目中的共享文件夹中。在这种情况下，我的重新启动任务是先调用停止然后再开始，**但这不是零停机时间......**

如果想尝试，以下链接有一个零停机时间的食谱： [https ://github.com/railscasts/373-zero-downtime-deployment/blob/master/blog-after/config/recipes/templates/unicorn .rb.erb](https://github.com/railscasts/373-zero-downtime-deployment/blob/master/blog-after/config/recipes/templates/unicorn.rb.erb)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-03T12:05:36.863

我有同样的错误，原因是：

默认情况下，弯腰**独角兽服务器**gem ' **capistrano3-unicorn** ' 试图杀死**tmp/pids/unicorn.pid**中的独角兽 process_id但它位于**/shared/pids/unicorn.pid**。

通过更改**unicorn.rb**中**unicorn.pid**的路径解决了我的错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-01T22:10:58.067

过时的 pid 可能有三个原因： 1) 没有对 unicorn.pid 文件的写权限。在启动独角兽服务器时检查错误日志可以很容易地检测到这一点。2）在远程机器的情况下：您没有将 unicorn.pid 添加到 .gitignore 并且每次都用本地 pid 通过不注意的提交强制覆盖 pid。3) config/unicorn.rb 中存储 unicorn.pid 的文件路径与 cap 配方中 config/deploy.rb 中提供的路径不同。

# android - 在 Eclipse 中复制项目，我应该如何更改以允许同一设备上的两个版本？

> ID：15620655
> 
> 赞同：0
> 
> 时间：2013-03-25T17:04:19.380
> 
> 标签：android, eclipse, android-manifest

我已经在 Eclipse 中复制并粘贴了一个应用程序项目，但需要能够在我的设备上同时安装两个“版本”。我需要在清单中做什么才能允许这样做？

我可以通过搜索找到的只是人们说这需要完成，例如

> 如果你 fork 一个应用程序也不要忘记更改 android:authorities（和 ContentProvider AUTHORITY），否则它不会安装在与原始应用程序相同的设备上

但我找不到任何具体说明。android:authorities 的默认设置是将其排除在外，我不确定如何手动设置。这些应用程序用于学术目的，不需要超出我自己的平板电脑；任何人都可以向我指出一些资源或提供一些处理当局问题的说明，以便我可以同时安装两者吗？

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T17:07:11.733

本质上，您只需要更改包名称。

`android:authority`存在于极少数应用程序中，即使在存在的应用程序中，您也只需要更改包名称部分。其余部分保持不变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T17:07:12.550

更改清单文件中的包名称。就 Android 而言，这就是应用程序的身份。

# mysql - SQL 通过另一个表查询

> ID：15620656
> 
> 赞同：1
> 
> 时间：2013-03-25T17:04:20.893
> 
> 标签：mysql, sql, phpmyadmin

```
Programme                     Student                      Grade
Pid (pk)                      StudentID(pk)                ModuleID(cpk)     
                              ProgrammeID(fk)              StudentID(cpk)
                                                           Gradepercent 
```

我有三个表，一个程序表，一个成绩表和一个学生表。我正在尝试获得每个程序的平均百分比成绩。问题是成绩表没有链接到程序表，仅通过学生表连接。程序表的主键是programid（student表中的fk）和student表中的studentid，并且在moduleid/studentid的成绩表中使用复合pk来标识成绩。（模块数据库中的第四个表包含不相关的 moduleid）

我如何进行查询以获取课程的 av 成绩？我假设有一种方法可以在不使用学生表的情况下做到这一点，类似于

```
SELECT AVG(Gradepercent) from grade AND group by ProgrammeID from programme 
```

（语法错误）但更喜欢使用学生表通过他们的关系访问成绩表中的信息的查询。

关于如何解决这个问题的任何想法？我知道这不是很清楚，但如果有人能指出我正确的方向，那将有很大帮助。

（我有一个 ERD 可以使这篇文章更清晰，但由于某种原因，尽管我有 10 名声望，但我不允许发布它）。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T17:09:00.713

```
SELECT Student.ProgrammeID, AVG(Grade.GradePercent)
FROM Student
INNER JOIN Grade ON Student.StudentID = Grade.StudentID
GROUP BY Student.ProgrammeID 
```

# ebay-api - Ebay 交易 API - 错误代码 21916389 需要通过 AddItemFromSellingManagerTemplate 请求处理时间

> ID：15620663
> 
> 赞同：1
> 
> 时间：2013-03-25T17:04:43.663
> 
> 标签：ebay-api

我正在调用 AddItemFromSellingManagerTemplate，文档说它只需要 SaleTemplateID 来为相应的模板创建一个活动列表。

但是对于“某些”呼叫，我不断收到一个错误代码，上面写着 21916389 - 需要处理时间。

在有人冲我大喊检查文档之前...我确实知道 Item 'DispatchTimeMax' 字段是您指定处理时间的地方，而且我知道它现在是所有列表的要求。DispatchTimeMax 肯定是在我要列出的销售经理模板中设置的。我可以直接通过 eBay 后端从销售模板中列出，没有错误……但显然我需要通过 API 来完成。

令人讨厌的是，调用它的代码适用于某些销售经理模板，但不适用于其他模板。销售经理模板的创建方式完全相同（在代码中）。

一些上下文：

1.  虽然我在 PHP 中编码并使用第三方库，但为了调试它，我正在使用 RAW 制作的 xml 起诉 CURL 来调用 Web 服务。
2.  我使用的是 API 729 版本，但我已更改为最新版本 815。没有区别。
3.  因为它的价值在于我正在使用的 XML

    ```
    <?xml version="1.0" encoding="utf-8"?>
    <AddItemFromSellingManagerTemplateRequest xmlns="urn:ebay:apis:eBLBaseComponents">     
        <RequesterCredentials>
        ...
        </RequesterCredentials>
        <Version>815</Version>
        <SaleTemplateID>[SALETEMPLATEID INSERTED HERE]</SaleTemplateID>
    </AddItemFromSellingManagerTemplateRequest> 
    ```

有谁知道我需要让它 100% 工作的一些微妙技巧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-13T06:36:01.100

尝试这个

```
<DispatchTimeMax>0</DispatchTimeMax> 
```

Item.DispatchTimeMax 数据类型---Int

指定卖家承诺在收到已结清的付款后准备发货的最大工作日数。此时间不包括运输时间（承运人的运输时间）。

对于 AddItem 系列调用：在提供某些运输服务（含送货）时，对于某些类别的列表是必需的。请参阅 GetCategoryFeatures 中的处理时间启用。卖家将此字段设置为表示天数的正整数值。对于每个 eBay 站点上的允许值列表，请使用 GeteBayDetails，并将 DetailName 设置为 DispatchTimeMaxDetails。（典型值为 0、1、2、3、4、5、10、15 或 20，但这可能因站点而异，并且可能随时间而变化。）

适用于固定运费和计算运费。不适用于没有运输、仅本地取货或货运运输的情况。例如，当 ShippingService=Pickup 或 ShipToLocations=None 时，不需要 DispatchTimeMax。

DispatchTimeMax 值为 0 表示项目的同一天处理。在这种情况下，卖家的发货承诺取决于卖家用户偏好中设置的订单截止时间。在大多数站点上，这默认为当地时间下午 2:00，可以通过使用 SetUserPreferences 为列出该项目的 eBay 站点设置 DispatchCutoffTimePreference.CutoffTime 来覆盖它。对于在当地订单截止时间之前下达的订单（并收到已结算的付款），该商品必须在当天结束前发货。对于在订单截止时间或之后完成的订单，商品必须在第二天结束前发货（周末和当地节假日除外）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T14:28:36.870

另一件事是我一直发送 AddItemFromSellingManagerTemplate 直到它通过并添加项目（通常是 3 或 4 次）。我想这是因为 Trading API 的 807 2013-01-23 更新使 DispatchTimeMax 成为强制性的。请参阅[http://developer.ebay.com/DevZone/xml/docs/Reference/ebay/AddSellingManagerTemplate.html#ChangeHistory](http://developer.ebay.com/DevZone/xml/docs/Reference/ebay/AddSellingManagerTemplate.html#ChangeHistory)

我想出的解决方案是将 AddItemFromSellingManagerTemplate 放入一个循环中，直到 Ack == 'Success'。希望它会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T19:54:56.700

如果您去销售经理专业版，编辑模板并保存它（不更改任何内容），AddItemFromSellingManagerTemplate 将起作用。我也没有找到任何合理的答案。

# web-sql - 有没有办法清除 websql 或索引数据库中的整个数据库？

> ID：15620665
> 
> 赞同：0
> 
> 时间：2013-03-25T17:04:50.193
> 
> 标签：web-sql

考虑一下 - 我在 websql 中创建了数据库，其中创建了多个表，并在这些表上加载了加密数据。

入侵者或任何其他人有没有办法删除 websql 中的整个数据库或清除整个 websql，如果是这样，我该如何保护我的数据库，或为数据库提供任何密码保护。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:36:47.343

我不确定你是否在谈论 WebSQL，但如果你是 - 你不应该在客户端存储任何敏感数据。

WebSQL 是一个 SQLite db 文件，它保存在客户端的 user/appdata 文件夹中。

任何人都可以导航到您计算机上的该目录并在 SQLite 管理器中或通过终端打开 SQLite 文件并破解。

如果您要存储加密的敏感数据，则应将其存储在服务器端的受保护区域中。

对于您的部分问题：

如果恶意用户删除了 webSQL 数据库？

然后应该在用户下次导航到网站并填充服务器数据时重新创建它。

客户端存储的数据可能会受到损害，并且应该只在会话的生命周期内使用经过验证的会话来信任。

# algorithm - 使用 OCaml 中的列表找到下一个最大的数字

> ID：15620668
> 
> 赞同：1
> 
> 时间：2013-03-25T17:05:07.710
> 
> 标签：algorithm, functional-programming, ocaml

这是一个面试问题：

> 找到可以由给定数字的相同数字组成的下一个最大数字..
> 
> 输入：4765，输出：5467

如果使用`array`，这并不难。

1.  我们将数字转换为数字数组。
2.  `x`我们扫描数组，记录下一个邻居更大的最新（最低位置）数字（比如 as ）
3.  如果下一个邻居更小（这意味着它正在下降），那么我们记录大于 x 的最小数字（比如 as `y`）
4.  最后，我们交换 x 和 y

但是，在 OCaml 中，如果我们使用`list`，那么我不知道该怎么做。似乎该算法使递归变得困难。

有什么建议么？

编辑：

请注意我希望有一种实用的方式（使用**list**）

**编辑**

按照@comingstorm 的建议，我是这样实现的：

```
exception NotFound;;

let rev_list_of_int n = 
  let rec process n = 
    let x = n / 10 and y = n mod 10 
    in 
    if x = 0 && y = 0 then []
    else 
      y::(process x)
  in 
  process n;;

let find_next_by_list n =
  let l = rev_list_of_int n
  in
  let rec find_x before_x x after_x = 
    match after_x with
    | [] | _::[] -> (before_x, -1, after_x)
    | hd1::hd2::tl -> 
      if hd1 > hd2 then (hd1::before_x, hd2, tl)
      else find_x (hd1::before_x) x (hd2::tl)
  in 
  let (bx, x, ax) = find_x [] (-1) l (* ax is rev *)
  in 
  if x = -1 then raise NotFound
  else 
    let rec find_y x path = function
    | [] -> raise NotFound
    | hd::tl -> 
      if hd > x then (path, hd, tl)
      else find_y x (hd::path) tl
    in 
    let (left, y, right) = find_y x [] (List.rev bx) (* left is rev, right is not  *)
    in 
    (* rev ax, then y, then right, then x, then rev left*)
    (List.rev_append (y::ax) right) @ (x::List.rev left) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T18:29:48.247

为了以一种功能性的方式实现这一点，以相反的顺序维护您的数字列表会更有效 - 以便最快速变化的数字更接近列表的头部。这允许实现避免重新分配整个列表，从而提高摊销性能。

给定一个反向列表`digits`（从最不重要到最重要）：

```
Starting at the least-significant digit (the head of the reversed list):
  look for the first digit smaller than its predecessor:  call it "a_k"
  save the list of digits after a_k as:  "unchanged"
Starting again at the least-significant digit:
  look for the first digit larger than a_k:  call it "a_l"
Accumulate the output list functional-style, starting with "unchanged":
  add a_l to the head of the list
  starting a third time at the least-significant digit:
    add each digit to the head of the output (reversing that portion of the list)
      stopping before a_l
    add a_k to the head of the output, instead of a_l
    after skipping a_l, continue to add digits from original to output
      stopping before a_k 
```

简而言之：要做到功能风格，您必须在适当的位置构建列表的“修改”交换/反转部分。您不必以最低有效数字优先顺序（如上述伪代码所假设的那样）维护您的列表，但如果您这样做，您的`next_permutation`函数将在时间和分配内存方面具有 O(1) 的摊销性能。

[编辑：更正，O(1) 性能仅在所有数字不同时...]

* * *

如果您确实想以最高有效数字优先的顺序维护您的数字，您仍然需要对交换/反向区域进行类似的扫描和重建，然后是未更改区域的有序副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T17:24:31.833

只需按字典顺序生成下一个排列：

```
Find the largest index k such that a[k] < a[k + 1]. If no such index exists, the permutation is the last permutation.
Find the largest index l such that a[k] < a[l]. Since k + 1 is such an index, l is well defined and satisfies k < l.
Swap a[k] with a[l].
Reverse the sequence from a[k + 1] up to and including the final element a[n]. 
```

在[维基百科](http://en.wikipedia.org/wiki/Permutation#Generation_in_lexicographic_order)上找到。可以在[这里](http://caml.inria.fr/pub/ml-archives/ocaml-beginners/2003/02/18d07773b1f69b17895790787eec79ca.en.html)找到 OCaml 中的实现：

```
The following Ocaml code implements a variation on this algorithm (it returns the permutations of 1..n in reverse reverse-lexicographic order) :

(* exchange into l @ [x] @ accu x with the last element of l which is > x *)
let rec swap l x accu = match l with
| a::b::t when b > x -> a :: (swap (b::t) x accu)
| a::t -> (x::t) @ (a::accu)
| _ -> failwith "this can't happen"
;;

(* permut l m accu computes the permutation p' following p = rev(l)@m,
stores it into accu and recalls itself until p has no successor *)
let rec permut l m accu = match l,m with
| a::_, b::t when a > b -> let p = swap l b t in permut [] p (p::accu)
| _, b::t -> permut (b::l) t accu
| _, [] -> accu
;; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T18:09:22.240

正如 Kwariz 指出的那样（本质上），您可以对列表使用相同的解决方案。数组解决方案可以在恒定时间内交换数字，但首先扫描它们仍然需要线性时间。使用数字列表，您仍然可以进行线性扫描，以及交换数字的线性操作。

可能会想出一个更漂亮的递归解决方案。问题是您正在使用列表的一个相当“全局”的属性。将其分解为通常的递归部分并不容易。但这并不算太远。一方面，如果您可以对列表的尾部执行操作，那么这也是整个列表的正确结果（重新添加头部）。

# c - 哪一位是整数的地址？

> ID：15620673
> 
> 赞同：2
> 
> 时间：2013-03-25T17:05:33.777
> 
> 标签：c, pointers, memory

这很简单。假设我有：

```
char x = -1; 
```

然后在记忆中，我有（很可能？）

```
 11111111
(01234567) 
```

所以我的问题是，如果我写`&x`的是地址，我会得到第 0 位或第 7 位的地址，这是最高有效位还是最低有效位？

如果是 32 位整数呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T17:08:13.397

内存地址是字节寻址的，而不是位寻址的。这意味着您将 - 根据架构的类型（大端或小端），您将获得最高有效**字节**或最低有效**字节**而不是特定*位*

感谢 WhozCraig，是的 - 因为您的变量是 a`char`它是`char`或字节本身的地址。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T17:09:34.077

位不可单独寻址。内存的最小可寻址单元是字节。所以在 a 的情况下`char`，当你获取它的地址时，你会得到一个指向那个字节的指针。该字节中没有任何特定位，而是整个字节。访问该字节中各个位的唯一方法是通过按位操作，如屏蔽和移位。

对于 32 位整数，您可以单独寻址 4 个字节。在这种情况下，它的地址是最低有效字节还是最高有效字节的地址取决于架构的[字节序](http://en.wikipedia.org/wiki/Endianness)。在大端系统上，地址将是最高有效字节的地址。在小端系统上，它将是最低有效字节。

```
uint32_t n = 0x11223344;
uint8_t *p = (uint8_t *) &n;

if (*p == 0x11) {
    // big endian
}
else if (*p == 0x44) {
    // little endian
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-25T17:11:29.500

在 C 中，内存是**字节可寻址**的，char 的解释也是字节。char 由一个字节组成，例如 int 由四个字节组成，因此`char x;`char`&x;`的地址不是位/字节。如果你采取`int i` then`&i`是 int 对象的地址。我们正在刷新变量/完整对象。

在内存地址方案中，每个字节都被存储（*地址存储*）。

```
 0     1   2    3   4   5    6     7    8   9    10   11  12  13   14   15 
+----+----+----+---+---+----+----+----+----+----+----+---+---+----+----+----+
| 1  |  2 | 3  | 4 | 5 |  6 |  7 | 8  | 0  |  1 |  1 | 2 | 3 | 4  |  5 | 6  |  
+----+----+----+---+---+----+----+----+----+----+----+---+---+----+----+----+
             ^                          ^
             |                          |
+----+----+  |                          |
|   add1  |--|                          |
+----+----+                             |
|   add2  |-----------------------------|
+----+----+ 
```

在此图`addr1`中，如果是 char，则表示位 0-7，并`addr2`表示位 8-15。我的意思是说 ofcouser 位可以编号（0-15），但*有效的是一次访问一个字节*。即使您需要一位信息，也可以读取完整的字节。

你读过这个问题吗：[*如果不是内存地址，C 指针到底是什么？*](https://stackoverflow.com/questions/15151377/what-exactly-is-a-c-pointer-if-not-a-memory-address). 如果您询问 C：*指针值可以是某种 ID 或句柄或多个 ID 的组合*

> 所以`&x`只是 C 中的一个**引用**。它引用一个字节`char`，四个字节`int`

此外，

虽然内存是字节可寻址的，但幸运的是，我们*可以在位级别访问位[运算符](http://en.wikipedia.org/wiki/Bitwise_operations_in_C)和[位结构](https://stackoverflow.com/questions/12482806/structures-with-bitwise-data-in-c)*。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T17:10:25.787

地址指的是内存中的字节——位没有自己的地址。

也就是说，让我们假设该值大于单个字节：

```
long x = -1; 
```

在这种情况下，该值占用 32 位或 4 个字节。这些位是先存储最高有效字节还是先存储最低有效字节取决于所涉及的硬件。更具体地说，这取决于硬件是[little endian 还是 big endian](http://en.wikipedia.org/wiki/Endianness)。无论哪种方式，`x`上面示例中的地址都是内存中第一个（最低）字节的地址，所以如果你有：

```
char p[4] = (char*)&x; 
```

然后`p[0]`将是第一个字节，`p[1]`第二个字节，依此类推。字节序只是告诉你第一个字节是最重要的还是最不重要的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T17:10:36.723

地址指的是整个字节，因此询问位的地址是没有意义的。大多数现代计算机都是little-endian（请参阅[this question](https://stackoverflow.com/questions/7499423/how-are-integers-stored-in-memory)），因此您应该获得**最低有效字节**的地址。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-25T17:39:03.993

正如大多数人所指出的，内存是字节可寻址的，位没有单独的地址。尽管如此，如果您想访问这些位（读/写它们），您可以将位移位操作与按位逻辑操作一起使用。

# sql-server - 将 varchar 值“n”转换为数据类型 int 时，又一次转换失败

> ID：15620674
> 
> 赞同：0
> 
> 时间：2013-03-25T17:05:37.247
> 
> 标签：sql-server, stored-procedures

我有以下存储过程：

```
CREATE PROCEDURE [cafgAddCoreID]
@HoldingName nvarchar (50) = null
@CountStart int = 0,
AS
DECLARE @sql nvarchar (50)
DECLARE @bit nvarchar (200)
BEGIN
    SET @bit = 'MTR1- + CAST ((' + @CountStart + ' + ROW_NUMBER() 
      OVER (ORDER BY [FindNo])) AS NVARCHAR(10))'
    SET @sql = 'INSERT INTO ' + @HoldingName + '([CoreID]) 
      SELECT (' + @bit + ') FROM [DectectoristMetalFinds]'
    EXEC @sql
END 
```

但是当我运行时：

```
EXEC [cafgAddCoreID] 'Table1', 9 
```

我明白了

> 将 varchar 值 'MTR1- + CAST ((' ）转换为数据类型 int 时转换失败。

跑步

```
INSERT INTO [Table1] ([CoreID])   
SELECT ('MTR1-' + CAST ((0 + ROW_NUMBER() OVER (ORDER BY FindNo)) 
  AS NVARCHAR(10))) AS CoreID FROM [Table2] 
```

有效，所以我知道该方法是正确的，但显然不在存储过程中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T17:08:01.900

您不能将整数“添加”到字符串中。数据类型优先级将尝试将周围的文字转换为 int。相反，您需要将您的 int 显式更改为字符串：

```
SET @bit = '''MTR1-'' + CAST ((' + CONVERT(VARCHAR(12), @CountStart) + '... 
```

看起来它仍然无法正确解析，但应该让您达到可以通过发出进一步调查的地步：

```
PRINT @sql; 
```

代替：

```
EXEC @sql; 
```

此外，您还需要使用：

```
EXEC(@sql); 
```

或者更好：

```
EXEC sp_executesql @sql; 
```

（您可以使用它来参数化 @CountStart 并避免使用一个向量进行 SQL 注入。我会为您编写该版本，但无法从您的问题中分辨出您首先尝试生成的有效 SQL 是什么。）

您可能还需要考虑为`@sql`. 只是一个想法。

# ruby - 运行由输入文件定义的多个规范

> ID：15620676
> 
> 赞同：0
> 
> 时间：2013-03-25T17:05:39.547
> 
> 标签：ruby, rspec, rake

鉴于我有一个外部文件可以控制正在运行的规范。

```
control.xls
test_id|description|file_path           |run
1      |Test 1     |./spec/test1_spec.rb|yes
2      |Test 2     |./spec/test2_spec.rb|no 
```

我有一个读取文件并返回文件路径数组的方法。

我想使用该文件数组来运行规范，它可以通过 rake 或命令行。

这甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T19:22:53.297

在 stackoverflow 的另一个地方找到：[Whats is the replacement for spec_files in RSpec::Core::RakeTask ？模式是否接受文件数组？](https://stackoverflow.com/questions/8815762/whats-is-the-replacement-for-spec-files-in-rspeccoreraketask-does-pattern)

所以它接受一个文件数组，我使用 FileList 来传递文件并且只运行最后一个规范。

感谢您的输入马丁

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T17:39:20.547

有可能的。您可以简单地编写一个自定义 rake 任务，其中包含读取文件的代码。然后，您可以为每个文件（[RSpec::Core::RakeTask](http://rubydoc.info/github/rspec/rspec-core/RSpec/Core/RakeTask)）调用 RSpec Rake 任务，如下所示（对于结构，这是未经测试的代码！）：

```
require 'rake/testtask'

namespace :test do
  task :spec do
    test_files = ...
    test_files.each do |test_file|
      RSpec::Core::RakeTask.new do |task|
        task.rspec_opts = test_file
      end
  end
end 
```

您还有一个示例：[如何为 RSpec 编写自定义 rake 任务？](https://stackoverflow.com/questions/7397728/how-to-write-a-custom-rake-task-for-rspec)

# ruby-on-rails - 显示错误而不是 ruby 默认值？

> ID：15620678
> 
> 赞同：0
> 
> 时间：2013-03-25T17:05:53.027
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

使用它时，我得到了 Ruby on Rails 的默认设计![在此处输入图像描述](../Images/c4f68c5b3f5d1c6bf5a7e27786c196b6.png)。我怎样才能在我当前的设计中将它打印为常规文本`<%= error.text %>`？

**模型：**

```
class Users < ActiveRecord::Base
  validates_presence_of :username, :message => "Du skal udfylde brugernavn"
  attr_accessible :email, :password, :username
end 
```

**控制器：**

```
class HomeController < ApplicationController
  def index

     if params[:username]
         l = Users.new(:username => params[:username], :password => params[:password], :email => params[:email]).save!

         if Users.save? 
                z = Users.where(:username => params[:username]).limit(1).last
                @debugging="Yay"
         else
                @debugging = user.errors.full_messages.join("<br/>")
         end             
     end
   end
 end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T17:18:08.843

从[Rails 验证指南](http://guides.rubyonrails.org/active_record_validations_callbacks.html#validations_overview-errors)：

> 要验证对象的特定属性是否有效，可以使用 errors[:attribute]。它返回一个包含 :attribute 的所有错误的数组。如果指定属性没有错误，则返回一个空数组。

所以，只显示`errors`哈希..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T17:11:09.177

`your_object.errors`返回一个关联数组：`{:username => "Du skal udfylde brugernavn"}`

因此，您可以执行以下操作：

```
<%= user.errors[:username] %> 
```

在此处查看有关如何使用您的视图的更多信息（官方 Ruby on Rails 文档）： http: [//guides.rubyonrails.org/active_record_validations_callbacks.html#working-with-validation-errors](http://guides.rubyonrails.org/active_record_validations_callbacks.html#working-with-validation-errors)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T17:11:01.927

**在模型中：**

```
validates_presence_of :username, :message => "Du skal udfylde brugernavn" 
```

**在控制器中：**

```
if user.save
   flash[:success] = 'User saved successfully'
else
   flash[:error] = user.errors.full_messages.join('<br />')
end 
```

**编辑**

不是`if Users.save?`应该的`l.save`。（我建议你`User`用作模型）

```
if params[:username]
   l = Users.new(:username => params[:username], :password => params[:password], :email => params[:email])

   if l.save 
      z = Users.where(:username => params[:username]).limit(1).last
      @debugging="Yay"
   else
      @debugging = l.errors.full_messages.join("<br/>")
   end
end 
```

# ruby-on-rails - 测试一个基本（抽象）控制器

> ID：15620684
> 
> 赞同：9
> 
> 时间：2013-03-25T17:06:03.500
> 
> 标签：ruby-on-rails, rspec, controller

我有一个具有某些功能的基本控制器，该基本控制器无法从外部访问，没有路线匹配它。

然后，我使用其他控制器扩展该控制器以添加额外的功能，并使用路由，我有 3 个控制器扩展该基本控制器，只是为了在每个控制器上定义 3 个方法。

我想测试基本控制器，但我做不到

```
post :index 
```

因为该操作没有路由（没有路由匹配错误）

我不想将这些测试添加到这 3 个控制器之一，因为它们变化很大（控制器在... 3 周的活动中使用，然后被删除）。

一些代码...：

基本控制器，CampaignController

```
class CampaignController < ApplicationController
  def index
    #some code...
  end

  def campaign_name
    raise('campaign_name missing')
  end

  def campaign_url
    raise('campaign_url missing')
  end

  #more actions....

end 
```

可访问的控制器之一，SchoolCampaignController

```
class SchoolCampaignController < CampaignController
  def campaign_name
    'school'
  end

  def campaign_url
    school_url
  end
end 
```

这些控制器基本上就是这样，但有时我需要覆盖其中一个基本操作

那么，我做错了什么？如何正确测试 CampaignController？

编辑：我不想测试这两种引发错误的方法，例如我想测试索引或其他一些操作（未显示）

我尝试过使用“response = controller.index”，但它没有调用之前的过滤器，并且响应不是 http 响应，它只是该命令的输出（我不能像...响应那样做期望。应该 render_template(xxxx) 与那个）

编辑 2：为了绕过路由错误，我在 before(:all) 块中创建了测试内部的路由，然后路由不是问题，但是现在，我收到关于不存在视图的错误（每个可访问控制器都实现了所有观点，但抽象的没有）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2017-08-15T15:57:23.280

您可以使用匿名控制器测试。这里很好地描述了：[https](https://relishapp.com/rspec/rspec-rails/v/3-6/docs/controller-specs/anonymous-controller) ://relishapp.com/rspec/rspec-rails/v/3-6/docs/controller-specs/anonymous-controller 。

和以前一样，它不需要任何路由猴子补丁`Rails.application.routes.draw do`。

例如：

```
describe BaseController, type: :controller do
  controller do
    def index
      render text: "Hello World"
    end
  end

  it "returns 200" do
    get :index
    expect(response).to have_http_status 200
  end
end 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-04T11:12:05.453

我猜你打算测试`assigns`,`session`然后`db`更改，而不是渲染视图。您可以为您的抽象控制器重绘路由，仅用于测试目的（在[https://gist.github.com/zilkey/543300](https://gist.github.com/zilkey/543300)上有一个示例）。

为了解决没有视图被渲染的问题，我建议你围绕每个`get`,或使用一个可以从 no-view-found 错误中解救出来的块（我会编写一个小的帮助函数来做到这一点）。如果您的控制器将视图作为其最后一步呈现，您应该仍然能够检查分配、会话和数据库更改。`post``put``delete`

另一种方法是为抽象控制器的特定实例编写测试，并分解出控制器名称和所需的任何数据。这样您就不会遇到针对不起作用的控制器进行功能测试的问题，并且您可以轻松地每 3 周重写一次测试。

# jquery - 使用 .trigger 和/或 .animate 同时启动两个事件

> ID：15620685
> 
> 赞同：0
> 
> 时间：2013-03-25T17:06:05.623
> 
> 标签：jquery, triggers, jquery-animate, simultaneous

我有以下... [jsFiddle](http://jsfiddle.net/cAsyB/ "JSFiddle")

**CSS**

```
#box_1 {
    position:absolute;
    height:50px;
    width:50px;
    background-color:red;
    top:10px;
    left:10px; 
    text-align:center;
    color:#FFFFFF;
}

#box_2 {
    position:absolute;
    height:50px;
    width:50px;
    background-color:blue;
    top:10px;
    left:70px; 
    text-align:center;
    color:#FFFFFF;
}

#box_3 {
    position:absolute;
    height:50px;
    width:50px;
    background-color:green;
    top:10px;
    left:130px; 
    text-align:center;
    color:#FFFFFF;
}

#box_4 {
    position:absolute;
    height:50px;
    width:50px;
    background-color:yellow;
    top:10px;
    left:190px; 
   text-align:center;
}    

#box_5 {
    position:absolute;
    height:110px;
    width:110px;
    background-color:purple;
    top:100px;
    left:70px; 
}    

#box_6 {
    position:absolute;
    height:25px;
    width:50px;
    background-color:black;
    top:20px;
    left:300px; 
    text-align:center;
    color:#FFFFFF;
} 
```

**jQuery**

```
$('#box_1').click(function() {  
    $('#box_5').animate({
            top: '170px'
        }, 300);
});

$('#box_2').click(function() {  
    $('#box_5').animate({
            left: '170px'
        }, 600);
});

$('#box_3').click(function() {  
    $('#box_1').trigger('click');
    $('#box_2').trigger('click');
});

$('#box_4').click(function() {  
    $('#box_5').animate({
            top: '170px'
        }, 300);
    $('#box_5').animate({
            left: '170px'
        }, 600);
});

$('#box_6').click(function() {  
    $('#box_5').animate({
            top: '100px'
    }, 200);
    $('#box_5').animate({
            left: '70px'
    }, 200);
}); 
```

**HTML**

```
<div id="box_1">
    Down
</div>
<div id="box_2">
    Right
</div>
<div id="box_3">
    Both
</div>
<div id="box_4">
    Both
</div>
<div id="box_5"></div>
<div id="box_6">
    Reset
</div> 
```

而且我想知道是否有可能同时触发 box_3 上的两个 .trigger 事件（其中带有“Both”的绿色方块），所以不要让紫色框先向下然后再向右，让它启动它们两者同时在页面上对角移动一点，然后在完成左侧 600ms 动画之后的剩余 300ms 之前。

理想情况下，我想保留 box_3 .click 以触发 box_1 和 box_2 点击，但让它们同时启动。

如果这不可能，是否可以结合

```
$('#box_5').animate({
        top: '170px'
}, 300);
$('#box_5').animate({
        left: '170px'
}, 600); 
```

在 Yellow box_4 上，所以它们同时开始？

所以，事件的顺序是，

1.  单击 Box_3 (.trigger) 或 Box_4 (.animate)。
2.  方框 5 沿对角线向下和向右移动。
3.  单击下移动画完成后 300 毫秒
4.  单击右移动画完成后 600 毫秒

谁能帮我？

*如果可以两种方式都这样做，您能否将它们都显示给我，以便我保留它们以供将来参考。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T17:22:18.320

如果您想同时为一个元素上的两个属性设置动画，您必须在对 .animate() 的单个调用中执行此操作，否则它们将排队等待一个接一个地发生。在您的情况下，您需要将其沿对角线移动 300 毫秒，然后向右移动 300 毫秒。

```
.animate({
    top: "170px",
    left: 170/2 + "px"
},300).animate({
    left: "170px"
},300) 
```

[http://jsfiddle.net/cAsyB/1/](http://jsfiddle.net/cAsyB/1/)

您还可以将 queue 选项设置为 false 以获得相同的效果：

```
$('#box_5').animate({
    top: '100px'
}, {
    duration: 200, 
    queue: false
});
$('#box_5').animate({
    left: '70px'
}, {
    duration: 400, 
    queue: false
}); 
```

[http://jsfiddle.net/cAsyB/2/](http://jsfiddle.net/cAsyB/2/)

# c++ - 模板化的重复类型错误

> ID：15620686
> 
> 赞同：2
> 
> 时间：2013-03-25T17:06:05.873
> 
> 标签：c++, visual-studio-2010, templates

我在使用 VS2010 时遇到了一个奇怪的问题。以下代码无法编译（虽然被[gcc 完全接受](http://liveworkspace.org/code/38PObg%240)）：

```
// Instantiate each type of a type array (which is a template<int>)
// void is taken as the end of the array
template<template<int> class A, int n = 0, typename obj_type = typename A<n>::type>
struct Instantiate : public Instantiate<A,n+1>
{
   obj_type object;

   Instantiate() : object() {}
};

template<template<int> class A, int n>
struct Instantiate<A,n,void>
{
};

// Does not compile
template<typename O>
struct test
{
   template<int n, bool=true> struct array { typedef void type; };
   template<int n> struct array2 { typedef typename array<n>::type type; };

   template<bool u> struct array<0,u> { typedef int type; };
   template<bool u> struct array<1,u> { typedef float type; };
   template<bool u> struct array<2,u> { typedef bool type; };

   Instantiate<array2> objects;
};

int main()
{
   test<int> obj;
} 
```

出现以下错误：

```
C1202: recursive type or function dependency context too complex
see instanciation of class template 'Instantiate<A,n>'
with
[
    A=test<O>::array2,
    n=1
]
(and so on, up to n=497...) 
```

制作`test`一个非模板（即，只是删除 line `template<typename O>`）可以解决该错误。然而，尽管在这个简单的例子中是可能的，但在我的代码中是不可能的（这要复杂得多）。

**问题是：**

*   哪个是正确的，VS 或 GCC ？或者它是一个VS错误？
*   如果 VS 错误，是否有解决方法？

**编辑**： - 从杰里的回答来看，它似乎是一个编译器错误......并且它已在 VS2012 上修复。- 生成的类层次结构应该是：

```
Instantiate<array2, 3, void> // end of recursion
      ^
      |
Instantiate<array2, 2, bool>
      ^
      |
Instantiate<array2, 1, float>
      ^
      |
Instantiate<array2, 0, int> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:26:10.697

我可以在 VS 2010 (with `Microsoft (R) 32-bit C/C++ Optimizing Compiler Version 16.00.40219.01 for 80x86`) 中重现它，我相信这是一个错误。说实话，我很难理解这里涉及的范围问题，但这似乎与手头的问题无关（因为基本模板和专业化嵌套在一起，VS 抱怨递归级别，而不是未定义的符号）。无论如何，这是一个非常有趣的例子。我在 VS 2005 中也看到了相同的行为（带有`Microsoft (R) 32-bit C/C++ Optimizing Compiler Version 14.00.50727.762 for 80x86`）。似乎微软仍然不接受关于 VS 2010 的错误报告（从[Microsoft Connect Visual Studio 页面](https://connect.microsoft.com/VisualStudio "Microsoft Connect Visual Studio 页面")和[反馈表来看）](https://connect.microsoft.com/VisualStudio/feedback/CreateFeedbackForm.aspx?FeedbackFormConfigurationID=5303&FeedbackType=1 "Microsoft Connect Visual Studio 反馈表")）。希望有权访问 VS 2012 的人能够测试您的原始代码并在问题尚未解决时提交错误报告（我认为这很可能，我没有看到任何迹象表明它之前已引起 Microsoft 的注意）。

要解决此问题，请前向声明导致递归的类模板：

```
// Forward declaration of problematic inherited class template
template<template<int> class A, int n = 0, typename obj_type = typename A<n>::type>
struct Instantiate;

template<template<int> class A, int n>
struct Instantiate<A,n,void>
{
};

// Now compiles!
template<typename O>
struct test
{
    template<int n, bool=true> struct array { typedef void type; };
    template<int n> struct array2 { typedef typename array<n>::type type; };

    template<bool u> struct array<0,u> { typedef int type; };
    template<bool u> struct array<1,u> { typedef float type; };
    template<bool u> struct array<2,u> { typedef bool type; };

    Instantiate<array2> objects;
};

// Instantiate each type of a type array (which is a template<int>)
// void is taken as the end of the array
template<template<int> class A, int n, typename obj_type>
struct Instantiate : public Instantiate<A,n+1>
{
   obj_type object;

   Instantiate() : object() {}
};

int main()
{
    test<int> obj;
    return 0;
} 
```

* * *

# 编辑

Synxis，感谢rise4fun 链接，以后肯定会派上用场。令人惊奇的是，虽然您的原始代码可以正常工作`VS2012 CTP`，但它仍然存在问题`VS2012 RTM`！见[http://rise4fun.com/Vcpp/aRh](http://rise4fun.com/Vcpp/aRh)。为什么`CTP`是默认选项而不是`RTM`超出我的范围。这个例子绝对是一个奇怪的例子。

除了你的库头文件之外，还有其他东西`Instantiate`被使用`test`吗？如果没有，用户可以显式转发声明`Instantiate`模板定义`test`，然后包含您的标题。否则，您可以创建一个头文件，其中包含前向声明以及所需的其他内容。您很可能希望为受此问题影响的用户创建特殊的解决方法标头。这肯定会让事情变得非常混乱和容易出错（主要是由于默认的模板参数），但它会起作用：

**myLib_workaround_forward_declaration.hpp**：

```
#ifndef MYLIB_WORKAROUND_FORWARD_DECLARATION // or #pragma once if supported
#define MYLIB_WORKAROUND_FORWARD_DECLARATION 

// amount of error checking is up to you
// eg, are workaround header files mixed with the regular ones
// or included in the wrong order

template<template<int> class A, int n = 0, typename obj_type = typename A<n>::type>
struct Instantiate;

#endif 
```

**myLib_workaround_implementation.hpp**：

```
#ifndef MYLIB_WORKAROUND_IMPLEMENTATION  // or #pragma once if supported
#define MYLIB_WORKAROUND_IMPLEMENTATION

// amount of error checking is up to you
// eg, are workaround header files mixed with the regular ones
// or included in the wrong order

template<template<int> class A, int n, typename obj_type>
struct Instantiate : public Instantiate<A,n+1>
{
   obj_type object;

   Instantiate() : object() {}
};

template<template<int> class A, int n>
struct Instantiate<A,n,void>
{
};
#endif 
```

**用户文件.cpp**：

```
// Forward declaration of problematic inherited class template
#include "myLib_workaround_forward_declaration.hpp"

// Now compiles!
template<typename O>
struct test
{
    template<int n, bool=true> struct array { typedef void type; };
    template<int n> struct array2 { typedef typename array<n>::type type; };

    template<bool u> struct array<0,u> { typedef int type; };
    template<bool u> struct array<1,u> { typedef float type; };
    template<bool u> struct array<2,u> { typedef bool type; };

    Instantiate<array2> objects;
};

#include "myLib_workaround_implementation.hpp"

int main()
{
    test<int> obj;
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T20:37:28.560

在搞乱rise4fun和jerry的解决方法时，我发现将`Instantiate` *inside的整个定义* `test` [“解决”了问题](http://rise4fun.com/Vcpp/a8)（*有关VS2012CTP vs VS2012RTM的更多信息，请参见jerry的回答*）：

```
template<typename O>
struct test
{
    template<template<int> class A, int n = 0, typename obj_type = typename A<n>::type>
    struct Instantiate : public Instantiate<A,n+1>
    {
        obj_type object;
        Instantiate() : object() {}
    };

    template<template<int> class A, int n>
    struct Instantiate<A,n,void>
    {
    };

    template<int n, bool=true> struct array { typedef void type; };
    template<int n> struct array2 { typedef typename array<n>::type type; };

    template<bool u> struct array<0,u> { typedef int type; };
    template<bool u> struct array<1,u> { typedef float type; };
    template<bool u> struct array<2,u> { typedef bool type; };

    Instantiate<array2> objects;
};

int main()
{
   test<int> obj;
} 
```

这非常适合我的用例，因为它可以包含在用户已经使用的宏中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T17:11:20.757

这不是错误，而是编译器配置。编译时堆栈就像运行时堆栈一样受到限制。VS 中的 IIRC 编译时堆栈的最大深度为 512。可能值得在文档中查找，也许它是可配置的，但不确定。

# css - 溢出：可见将 div 高度折叠为零

> ID：15620687
> 
> 赞同：3
> 
> 时间：2013-03-25T17:06:07.903
> 
> 标签：css, wordpress, overflow, twenty-ten-theme

我正在编辑一个 Wordpress 主题的 CSS（二十）

这是我的 HTML 结构：

```
<body>
    <div id="wrapper">
        <div id="header"></div>
        <div id="main">
            <div id="filtri_di_ricerca"><img></div>
            <div id="container">
                <div id="content"></div>
            </div>
        </div>
        <div id="footer"></div>
    </div>
</body> 
```

这是我的CSS：

```
#main {
    position:relative;
    background:#fff;
    overflow:visible;
}

#filtri_di_ricerca img {
    position: absolute;
    top: -96px
}

#filtri_di_ricerca {
    position: absolute;
    top: 0;
    right: 20px;
    width: 250px;
    background-color: #E6E6E6;
} 
```

我需要将`#main`div 与`#filtri_di_ricerca`div 重叠，但是当我设置折叠为零`overflow:visible`时`#main his height`......我仍然可以看到`#container`，`#content`但背景`#main`不再可见......我看到`#body`的是背景。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T17:10:48.347

这是由如何计算 div 的高度引起的。这一切都取决于内容，如果没有设置固定。由于溢出：可见，内容不需要适合 div。所以div的高度设置为零。

为 div 设置一些固定的高度，它应该保持在那个高度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T17:22:47.623

您需要清除 #main div 的浮动。

```
/* For modern browsers */
#main:before,
#main:after {
    content:"";
    display:table;
}
#main:after {
    clear:both;
}
/* For IE 6/7 (trigger hasLayout) */
#main {
    zoom:1;
} 
```

[阅读有关 clearfix 的更多信息](https://stackoverflow.com/questions/211383/which-method-of-clearfix-is-best)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T17:17:47.487

#filtri_di_ricerca 的 CSS 位置是“绝对的”（所以要脱离自然流），而 #container 没有任何内容。

尝试在#content 中添加一些内容并设置#content 的padding-top 等于#filtri_di_ricerca 的高度

# jquery - JSON数组的JQuery自动完成

> ID：15620698
> 
> 赞同：0
> 
> 时间：2013-03-25T17:06:43.983
> 
> 标签：jquery, json, jquery-ui, jsonp

我正在尝试在返回 JSON 数组（在 mimetype 应用程序/json 中）的服务上使用 JQuery 自动完成。我的开发基于以下示例： http: [//jqueryui.com/autocomplete/#remote-jsonp](http://jqueryui.com/autocomplete/#remote-jsonp)，它从 Geonames 中检索 JSON。geonames 示例中正确的 json 类似于

```
{"totalResultsCount":8387672,"geonames":[{"countryName":"Iran","adminCode1":"23","fclName":"mountain,hill,rock,... ","countryCode":"IR","lng":49.133333,"fcodeName":"mountain","toponymName":"Kūh-e Zardar","fcl":"T","name":"Kūh-e Zardar","fcode":"MT","geonameId":1,"lat":32.983333,"adminName1":"Lorestān","population":0}]} 
```

不幸的是，我的服务只为我提供以下服务：

```
["berlin; berlin-steglitz","berliner festspiele"] 
```

我也在尝试解析数组，但即使我得到正确的 Http 200 并且我看到响应是正确的，我也无法解析数组或使用它。没有调用来自 JQuery 的 .ajex 函数“成功”（我想是因为它需要一个 json 内容并检索一个文本），并且“完整”返回一个数据对象，没有检索 responseText 或数据内容的方法. 我不能使用请求类型“文本”，因为该服务在另一个域中，并且我打破了跨域模式。我的代码如下。

```
$(function() {
    $("#searchinput").autocomplete(
            {
                source : function(request, response) {

                    $.ajax(
                        {
                        url : "http://Mybackendservice.com/",
                        dataType : "jsonp",
                        data : {
                            query : request.term
                        },
                        complete : function(data) {
                            console.log(data);
                            for(i=0;i<data.length;i++){
                                console.log(data[i].parametername); /// do whatever you want here.
                            };
                            response($.map(data, function(n,i) {
                                return {
                                    label : n,
                                    value : i
                                }
                            }));
                        }
                    });
                },
                minLength : 2,
                select : function(event, ui) {
                    console.log(ui.item ? "Selected: " + ui.item.label
                            : "Nothing selected, input was " + this.value);
                },
                open : function() {
                    $(this).removeClass("ui-corner-all").addClass(
                            "ui-corner-top");
                },
                close : function() {
                    $(this).removeClass("ui-corner-top").addClass(
                            "ui-corner-all");
                }
            });
}); 
```

有人对如何处理解析这样一个数组的问题有一些建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T11:39:12.747

JSONP 请求需要服务在响应前面加上回调函数的名称。[Wikipedia 上的 JSONP 页面](http://en.wikipedia.org/wiki/JSONP#How_it_works)提供了一些信息

# java - 在 REST 服务中保持身份验证启用

> ID：15620701
> 
> 赞同：0
> 
> 时间：2013-03-25T17:06:59.547
> 
> 标签：java, rest, authentication, jersey

所以问题是：我在 Jersey 开发了在 Glassfish 上运行的 REST 服务。对于身份验证，我实现 **了 Basic-Authentication**。在客户端，我通过**ApacheHTTPClient**实现了身份验证。

我的想法只是在注册用户进入时要求身份验证 - 比如登录。是在客户端应用程序中配置的（在用户注销之前保持身份验证有效），还是在我配置基本身份验证的 REST 服务中配置？

谢谢！

* * *

这就是我在客户端应用程序上进行登录的方式：

```
import java.util.ArrayList;
import java.util.List;
import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.auth.AuthScope;
import org.apache.http.auth.UsernamePasswordCredentials;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPut;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;
import org.apache.http.params.HttpConnectionParams;
import org.apache.http.util.EntityUtils;

public class UserLogin {

    private static final String BASE_URI = "http://localhost:8080/LULServices/webresources";

    public static void main(String[] args) throws Exception {

    final DefaultHttpClient httpclient = new DefaultHttpClient();

    try {
            httpclient.getCredentialsProvider().setCredentials(
                new AuthScope("localhost", 8080),
                new UsernamePasswordCredentials("zzzzz", "xxxxx"));

    HttpPut httpPut = new HttpPut(BASE_URI + "/services.users/login");
    HttpConnectionParams.setConnectionTimeout(httpclient.getParams(), 10000);

    httpPut.addHeader("Content-type", "multipart/form-data");

    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
    nameValuePairs.add(new BasicNameValuePair("login", "zzzzz"));
    nameValuePairs.add(new BasicNameValuePair("password","xxxxx"));

    httpPut.setEntity(new UrlEncodedFormEntity(nameValuePairs));

    HttpResponse response = httpclient.execute(httpPut);

    try {
            System.out.println("Executing request " + httpPut.getRequestLine());
            HttpEntity entity = response.getEntity();

            System.out.println("----------------------------------------");
            System.out.println("HTTP Status: " + response.getStatusLine());

            String putResponse = EntityUtils.toString(entity);
            System.out.println(putResponse);
            EntityUtils.consume(entity);

        } finally
            httpPut.releaseConnection();

        } finally
            httpclient.getConnectionManager().shutdown();
    }
} 
```

它返回给用户他的secret_id。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T17:20:11.563

正如[Darrel Miller](https://stackoverflow.com/users/6819/darrel-miller)所提到的，基于 REST 的服务应该是无状态的。但为了帮助您解决当前的问题，我建议使用**身份验证**令牌和刷新策略。

**说明：** 每次成功验证后，您的服务器可以返回一个**唯一的**27[任意长度] 数字字符串。这个令牌可能有也可能没有到期政策[取决于你想要什么]。因此，对于后续身份验证[当客户端应用程序具有身份验证令牌时]，您实际上可以提供新的身份验证令牌并使之前的身份验证令牌无效。

此外，对于每个其他 API 调用，您可以发送此身份验证令牌以验证请求是否来自经过身份验证的源。现在，当用户退出应用程序时，您可以简单地从客户端删除身份验证令牌。

下次当用户返回应用程序时，应用程序将没有身份验证令牌，并且可以重定向到登录屏幕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T17:09:10.890

基于 REST 的服务应该是无状态的。理想情况下，服务器上不应该有登录的概念。您可以通过决定是否发送 authn 标头来模拟客户端上的登录/注销。

# javascript - Multitabs jquery：如何在每个子选项卡中显示第一个元素？

> ID：15620704
> 
> 赞同：2
> 
> 时间：2013-03-25T17:07:10.970
> 
> 标签：javascript, jquery, jquery-tabs

我正在尝试在页面上使用嵌套选项卡（如此处：[JSFIDDLE](http://jsfiddle.net/joe_b/6yQ8k/33/)），但我有一个问题，当我选择一个选项卡时，我无法弄清楚如何显示第一个子选项卡并隐藏其他子选项卡。提前致谢。
我的代码：

```
jQuery(function(){
jQuery('.nav-tab').click(function(){
      jQuery('.tabs').hide();
      jQuery('#tab-'+$(this).attr('target')).fadeIn(350);
});
jQuery('.sub-nav').click(function(){
      jQuery('.sub-tab').hide();
      jQuery('#sub'+$(this).attr('target')).fadeIn(350);
}); 
```

});

HTML 代码：

```
<ul id="nav-box">
  <li><a class="nav-tab" target="1">tab1</a></li>
  <li><a class="nav-tab" target="2">tab2</a></li>
  <li><a class="nav-tab" target="3">tab3</a></li>
</ul>
<div class="tabs" id="tab-1">
  <div class="left-col">
    <ul class="sub-list">
       <li><a class="sub-nav" target="tab1">subnav1</a></li>
       <li><a class="sub-nav" target="tab2">subnav2</a></li>
       <li><a class="sub-nav" target="tab3">subnav3</a></li>
     </ul>
  </div>
  <div class="sub-tab" id="subtab1">sub tab 1</div>
  <div class="sub-tab" id="subtab2">sub tab 2</div>
  <div class="sub-tab" id="subtab3">sub tab 3</div>
</div>
<div class="tabs" id="tab-2">
  <div class="left-col">
    <ul class="sub-list">
      <li><a class="sub-nav" target="tab4">subnav4</a></li>
      <li><a class="sub-nav" target="tab5">subnav5</a></li>
      <li><a class="sub-nav" target="tab6">subnav6</a></li>
    </ul>
  </div>
  <div class="sub-tab" id="subtab4">sub tab 4</div>
  <div class="sub-tab" id="subtab5">sub tab 5</div>
  <div class="sub-tab" id="subtab6">sub tab 6</div>
</div>
<div class="tabs" id="tab-3">
  <div class="left-col">
    <ul class="sub-list">
      <li><a class="sub-nav" target="tab7">subnav7</a></li>
      <li><a class="sub-nav" target="tab8">subnav8</a></li>
      <li><a class="sub-nav" target="tab9">subnav9</a></li>
    </ul>
  </div>
  <div class="sub-tab" id="subtab7">sub tab 7</div>
  <div class="sub-tab" id="subtab8">sub tab 8</div>
  <div class="sub-tab" id="subtab9">sub tab 9</div>
</div> 
```

和风格：

```
#nav-box li       {display:inline;list-style-type:none;}
.nav-tab,.sub-nav {cursor:pointer;margin:0 20px;}
.tabs             {display:none;}
.left-col         {float:left;}
.sub-tab          {position:relative;top:10px;left:40px;z-index:-1;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T17:17:44.363

这应该为你做。您只需隐藏`.sub-tab`所选选项卡中的所有元素，然后显示第一个。

```
jQuery('.nav-tab').click(function(){
      jQuery('.tabs').hide();
      var $targetTab = jQuery('#tab-'+$(this).attr('target'));
      $targetTab.find('.sub-tab').hide().first().show();
      $targetTab.fadeIn(350);
}); 
```

这是修改后的小提琴[http://jsfiddle.net/6yQ8k/40/](http://jsfiddle.net/6yQ8k/40/)

# ruby-on-rails - 如何在部署期间避免共享捆绑文件夹

> ID：15620710
> 
> 赞同：1
> 
> 时间：2013-03-25T17:07:21.337
> 
> 标签：ruby-on-rails, capistrano, rvm-capistrano

我们正在使用 capistrano 部署我们的 rails 应用程序，该应用程序的开发/生产版本使用 shared/bundle 文件夹。有没有办法防止创建共享/捆绑并要求 capistrano 在不同阶段使用单个 gemset？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T04:58:16.633

当您说阶段时，您的意思是您在同一个盒子上有不同的环境，并且正在使用 capistrano/multistage 吗？

如果是这样，为您的应用程序为每个阶段指定不同的名称将分隔共享目录。

在部署/开发.rb

```
set :application, "myapp-dev" 
```

在部署/生产.rb

```
set :application, "myapp-prod" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T18:50:55.890

会为你安排`bundle_dir`工作吗？

```
set :bundle_dir, "/my/bundle/path" 
```

我认为默认情况下它设置为：

```
set :bundle_dir, File.join(fetch(:shared_path), 'bundle') 
```

# java - java.lang.NoClassDefFoundError: com/google/gwt/core/ext/Generator

> ID：15620716
> 
> 赞同：2
> 
> 时间：2013-03-25T17:07:37.460
> 
> 标签：java, gwt, smartgwt, gxt

我正在尝试在我的项目中添加 GXT。为此，我遵循了 [在 Eclipse 中设置第一个 ext gwt 项目时给出的所有步骤](http://www.sencha.com/learn/setting-up-your-first-ext-gwt-project-in-eclipse/)

我的Java buid 路径是这样的

![Java构建路径](../Images/09a6ada60a0e708b3317980691d17faf.png)

我的 xml 文件是

```
<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE module PUBLIC "-//Google Inc.//DTD Google Web Toolkit 2.5.1//EN"
"http://google-web-toolkit.googlecode.com/svn/tags/2.5.1/distro-source/core/src/gwt-  module.dtd">
<module rename-to='hellogxt'>
<!-- Inherit the core Web Toolkit stuff.                        -->
<inherits name='com.google.gwt.user.User'/>

<inherits name='com.google.gwt.user.theme.clean.Clean'/>

<inherits name="com.extjs.gxt.ui.GXT" />
<!-- Specify the app entry point class.                         -->
<entry-point class='com.hello.gxt.client.HelloGXT'/>

 <!-- Specify the paths for translatable code                    -->
 <source path='client'/>
 <source path='shared'/>

 </module> 
```

我得到了这个错误

```
 lLoading modules
  com.hello.gxt.HelloGXT
  Loading inherited module 'com.hello.gxt.HelloGXT'
     Loading inherited module 'com.extjs.gxt.ui.GXT'
        [ERROR] Unexpected error while processing XML
      java.lang.NoClassDefFoundError: com/google/gwt/core/ext/Generator
at java.lang.ClassLoader.findBootstrapClass(Native Method)
at java.lang.ClassLoader.findBootstrapClassOrNull(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at com.google.gwt.dev.cfg.ModuleDefSchema$ClassAttrCvt.convertToArg(ModuleDefSchema.java:884)
at com.google.gwt.dev.util.xml.HandlerArgs.convertToArg(HandlerArgs.java:64)
at com.google.gwt.dev.util.xml.HandlerMethod.invokeBegin(HandlerMethod.java:221)
at com.google.gwt.dev.util.xml.ReflectiveParser$Impl.startElement(ReflectiveParser.java:294)
at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.startElement(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanStartElement(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)
at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(Unknown Source)
at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(Unknown Source)
at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(Unknown Source)
at com.google.gwt.dev.util.xml.ReflectiveParser$Impl.parse(ReflectiveParser.java:347)
at com.google.gwt.dev.util.xml.ReflectiveParser$Impl.access$200(ReflectiveParser.java:68)
at com.google.gwt.dev.util.xml.ReflectiveParser.parse(ReflectiveParser.java:418)
at com.google.gwt.dev.cfg.ModuleDefLoader.nestedLoad(ModuleDefLoader.java:322)
at com.google.gwt.dev.cfg.ModuleDefSchema$BodySchema.__inherits_begin(ModuleDefSchema.java:493)
at sun.reflect.GeneratedMethodAccessor1.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at com.google.gwt.dev.util.xml.HandlerMethod.invokeBegin(HandlerMethod.java:230)
at com.google.gwt.dev.util.xml.ReflectiveParser$Impl.startElement(ReflectiveParser.java:294)
at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.startElement(Unknown Source)
at com.sun.org.apache.xerces.internal.parsers.AbstractXMLDocumentParser.emptyElement(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.dtd.XMLDTDValidator.emptyElement(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanStartElement(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)
at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(Unknown Source)
at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(Unknown Source)
at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(Unknown Source)
at com.google.gwt.dev.util.xml.ReflectiveParser$Impl.parse(ReflectiveParser.java:347)
at com.google.gwt.dev.util.xml.ReflectiveParser$Impl.access$200(ReflectiveParser.java:68)
at com.google.gwt.dev.util.xml.ReflectiveParser.parse(ReflectiveParser.java:418)
at com.google.gwt.dev.cfg.ModuleDefLoader.nestedLoad(ModuleDefLoader.java:322)
at com.google.gwt.dev.cfg.ModuleDefLoader.load(ModuleDefLoader.java:242)
at com.google.gwt.dev.cfg.ModuleDefLoader.doLoadModule(ModuleDefLoader.java:192)
at com.google.gwt.dev.cfg.ModuleDefLoader.loadFromResources(ModuleDefLoader.java:169)
at com.google.gwt.dev.cfg.ModuleDefLoader.loadFromClassPath(ModuleDefLoader.java:141)
at com.google.gwt.dev.DevModeBase.loadModule(DevModeBase.java:1017)
at com.google.gwt.dev.DevMode.loadModule(DevMode.java:557)
at com.google.gwt.dev.DevMode.doStartup(DevMode.java:443)
at com.google.gwt.dev.DevModeBase.startUp(DevModeBase.java:1083)
at com.google.gwt.dev.DevModeBase.run(DevModeBase.java:836)
at com.google.gwt.dev.DevMode.main(DevMode.java:311)
     [ERROR] Line 12: Unexpected exception while processing element 'inherits'
    com.google.gwt.core.ext.UnableToCompleteException: (see previous log entries)
at com.google.gwt.dev.cfg.ModuleDefLoader.nestedLoad(ModuleDefLoader.java:325)
at com.google.gwt.dev.cfg.ModuleDefSchema$BodySchema.__inherits_begin(ModuleDefSchema.java:493)
at sun.reflect.GeneratedMethodAccessor1.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at com.google.gwt.dev.util.xml.HandlerMethod.invokeBegin(HandlerMethod.java:230)
at com.google.gwt.dev.util.xml.ReflectiveParser$Impl.startElement(ReflectiveParser.java:294)
at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.startElement(Unknown Source)
at com.sun.org.apache.xerces.internal.parsers.AbstractXMLDocumentParser.emptyElement(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.dtd.XMLDTDValidator.emptyElement(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanStartElement(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)
at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(Unknown Source)
at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(Unknown Source)
at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(Unknown Source)
at com.google.gwt.dev.util.xml.ReflectiveParser$Impl.parse(ReflectiveParser.java:347)
at com.google.gwt.dev.util.xml.ReflectiveParser$Impl.access$200(ReflectiveParser.java:68)
at com.google.gwt.dev.util.xml.ReflectiveParser.parse(ReflectiveParser.java:418)
at com.google.gwt.dev.cfg.ModuleDefLoader.nestedLoad(ModuleDefLoader.java:322)
at com.google.gwt.dev.cfg.ModuleDefLoader.load(ModuleDefLoader.java:242)
at com.google.gwt.dev.cfg.ModuleDefLoader.doLoadModule(ModuleDefLoader.java:192)
at com.google.gwt.dev.cfg.ModuleDefLoader.loadFromResources(ModuleDefLoader.java:169)
at com.google.gwt.dev.cfg.ModuleDefLoader.loadFromClassPath(ModuleDefLoader.java:141)
at com.google.gwt.dev.DevModeBase.loadModule(DevModeBase.java:1017)
at com.google.gwt.dev.DevMode.loadModule(DevMode.java:557)
at com.google.gwt.dev.DevMode.doStartup(DevMode.java:443)
at com.google.gwt.dev.DevModeBase.startUp(DevModeBase.java:1083)
at com.google.gwt.dev.DevModeBase.run(DevModeBase.java:836)
at com.google.gwt.dev.DevMode.main(DevMode.java:311)
     [ERROR] Failure while parsing XML
     com.google.gwt.core.ext.UnableToCompleteException: (see previous log entries)
at        com.google.gwt.dev.util.xml.DefaultSchema.onHandlerException(DefaultSchema.java:58)
at com.google.gwt.dev.util.xml.Schema.onHandlerException(Schema.java:66)
at com.google.gwt.dev.util.xml.Schema.onHandlerException(Schema.java:66)
at com.google.gwt.dev.util.xml.HandlerMethod.invokeBegin(HandlerMethod.java:240)
at com.google.gwt.dev.util.xml.ReflectiveParser$Impl.startElement(ReflectiveParser.java:294)
at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.startElement(Unknown Source)
at com.sun.org.apache.xerces.internal.parsers.AbstractXMLDocumentParser.emptyElement(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.dtd.XMLDTDValidator.emptyElement(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanStartElement(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)
at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(Unknown Source)
at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(Unknown Source)
at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(Unknown Source)
at com.google.gwt.dev.util.xml.ReflectiveParser$Impl.parse(ReflectiveParser.java:347)
at com.google.gwt.dev.util.xml.ReflectiveParser$Impl.access$200(ReflectiveParser.java:68)
at com.google.gwt.dev.util.xml.ReflectiveParser.parse(ReflectiveParser.java:418)
at com.google.gwt.dev.cfg.ModuleDefLoader.nestedLoad(ModuleDefLoader.java:322)
at com.google.gwt.dev.cfg.ModuleDefLoader.load(ModuleDefLoader.java:242)
at com.google.gwt.dev.cfg.ModuleDefLoader.doLoadModule(ModuleDefLoader.java:192)
at com.google.gwt.dev.cfg.ModuleDefLoader.loadFromResources(ModuleDefLoader.java:169)
at com.google.gwt.dev.cfg.ModuleDefLoader.loadFromClassPath(ModuleDefLoader.java:141)
at com.google.gwt.dev.DevModeBase.loadModule(DevModeBase.java:1017)
at com.google.gwt.dev.DevMode.loadModule(DevMode.java:557)
at com.google.gwt.dev.DevMode.doStartup(DevMode.java:443)
at com.google.gwt.dev.DevModeBase.startUp(DevModeBase.java:1083)
at com.google.gwt.dev.DevModeBase.run(DevModeBase.java:836)
at com.google.gwt.dev.DevMode.main(DevMode.java:311)
     [ERROR] Unexpected error while processing XML
   com.google.gwt.core.ext.UnableToCompleteException: (see previous log entries)
at com.google.gwt.dev.util.xml.ReflectiveParser$Impl.parse(ReflectiveParser.java:371)
at com.google.gwt.dev.util.xml.ReflectiveParser$Impl.access$200(ReflectiveParser.java:68)
at com.google.gwt.dev.util.xml.ReflectiveParser.parse(ReflectiveParser.java:418)
at com.google.gwt.dev.cfg.ModuleDefLoader.nestedLoad(ModuleDefLoader.java:322)
at com.google.gwt.dev.cfg.ModuleDefLoader.load(ModuleDefLoader.java:242)
at com.google.gwt.dev.cfg.ModuleDefLoader.doLoadModule(ModuleDefLoader.java:192)
at com.google.gwt.dev.cfg.ModuleDefLoader.loadFromResources(ModuleDefLoader.java:169)
at com.google.gwt.dev.cfg.ModuleDefLoader.loadFromClassPath(ModuleDefLoader.java:141)
at com.google.gwt.dev.DevModeBase.loadModule(DevModeBase.java:1017)
at com.google.gwt.dev.DevMode.loadModule(DevMode.java:557)
at com.google.gwt.dev.DevMode.doStartup(DevMode.java:443)
at com.google.gwt.dev.DevModeBase.startUp(DevModeBase.java:1083)
at com.google.gwt.dev.DevModeBase.run(DevModeBase.java:836)
at com.google.gwt.dev.DevMode.main(DevMode.java:311)
    [ERROR] shell failed in doStartup method 
```

有人帮我解决这个问题。

提前致谢

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2013-03-25T17:19:25.290

您的类路径中应该有 gxt-2.2.5-gwt2.jar 和 gxt-2.2.5-gwt22.jar 和 gxt-2.2.5-gwt17.jar。

# c - C 多次打开文件

> ID：15620717
> 
> 赞同：9
> 
> 时间：2013-03-25T17:07:38.960
> 
> 标签：c, fopen

我有一个用`fopen`. 有一种方法可以重新打开同一个文件（当它打开时）但有**不同**的搜索？（所以我可以独立使用 fread ）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T17:08:59.293

如果您继续阅读，则没有问题。

写入文件时要小心，特别是如果您有 2 个线程同时对文件进行读/写访问

如果您的代码看起来像这样

```
FILE *fp1, *fp2;

fp1 = fopen("file", "r");
fp2 = fopen("file", "r"); 
```

那么你在同一个文件中有 2 次搜索。并且seek的位置是独立的。从中读取`fp1`没有任何影响`fp2`

# c# - 使用 c# 代码从另一个数据库插入 ms access db

> ID：15620723
> 
> 赞同：1
> 
> 时间：2013-03-25T17:07:54.693
> 
> 标签：c#, ms-access

我使用以下代码将记录从一个数据库插入到另一个数据库，但它不起作用。我尝试了查询，`MS-ACCESS 2007`它工作正常，但是从我的代码以编程方式调用时它不起作用`C#`？

```
string query_insert = "INSERT INTO Questionnaires_Table(BranchName,Factor,Region,Branch_ID,Current_Date,No_Employees) "
    + "SELECT BranchName,Factor,Region,Branch_ID,Current_Date,No_Employees "
    + "FROM Questionnaires_Table IN '" + dialog.FileName + "' Where Branch_ID = " + textBox1.Text ;

dbConnDest.Open();

   OleDbDataAdapter dAdapter = new OleDbDataAdapter();
   OleDbCommand cmd_insert = new OleDbCommand(query_insert, dbConnDest);

   dAdapter.InsertCommand = cmd_insert;
   cmd_insert.ExecuteNonQuery();

dbConnDest.Close(); 
```

当我获取`query_insert`in ms 访问的内容时，它工作正常

它抛出

> cmd_insert.ExecuteNonQuery() 行中的 INSERT INTO 语法错误异常；

编辑

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Data.OleDb;

namespace WindowsFormsApplication4
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {

            OpenFileDialog dialog = new OpenFileDialog();

            dialog.Title = "select database";

            if ((dialog.ShowDialog() == DialogResult.OK) && (textBox1.Text == ""))
            {
                    MessageBox.Show("insert reference year", "", MessageBoxButtons.OK, MessageBoxIcon.Error);
            }
            else
            {

                    OleDbConnection dbConnDest;
                    dbConnDest = new OleDbConnection(@"Provider=Microsoft.ACE.OLEDB.12.0;Data Source= C:\Users\SystemA.accdb;Persist Security Info=False;");

                    try
                    {

                        string query_insert = "INSERT INTO Questionnaires_Table(BranchName,Factor,Region,Branch_ID,Current_Date,No_Employees) "
                                               + "SELECT BranchName,Factor,Region,Branch_ID,Current_Date,No_Employees "
                                               + "FROM Questionnaires_Table1 IN '" + dialog.FileName + "' Where ReferenceYear = " + textBox1.Text + ";";

                        dbConnDest.Open();

                        OleDbCommand cmd_insert = new OleDbCommand(query_insert, dbConnDest);

                        try
                        {
                            cmd_insert.ExecuteNonQuery();
                        }
                        catch (Exception g)
                        {
                            MessageBox.Show(g.ToString());
                        }

                        textBox2.Text = query_insert.ToString();

                        dbConnDest.Close();
                    }
                    catch (Exception h)
                    {
                        MessageBox.Show(h.ToString());
                    }

                }

        }

    }
} 
```

编辑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T17:12:28.480

您在 query_insert 中缺少“值”关键字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T17:42:39.703

我[在这个 Microsoft 论坛中发现了不同的语法](http://social.msdn.microsoft.com/forums/en-US/adodotnetdataproviders/thread/c7cbc0e5-e7f6-44c5-a382-1595034faa44/)

```
 INSERT INTO [AccessTable] SELECT * FROM [MS Access;DATABASE=D:\My Documents\db2.mdb].[Table2] 
```

所以你可以试试这个

```
string query_insert = "INSERT INTO Questionnaires_Table " +
    "(BranchName,Factor,Region,Branch_ID,[Current_Date],No_Employees) " +
    "SELECT BranchName,Factor,Region,Branch_ID,[Current_Date],No_Employees " +
    "FROM [MS Access;DATABASE=" + dialog.FileName  + "].Questionnaires_Table " +
    "Where Branch_ID = @branch";

dbConnDest.Open();
OleDbCommand cmd_insert = new OleDbCommand(query_insert, dbConnDest);
cmd_insert.Parameters.AddWithValue("@branch", textBox1.Text);
cmd.ExecuteNonQuery(); 
```

经测试`"Provider=Microsoft.ACE.OLEDB.12.0;"`

然而，随着更多的研究，很明显给出的语法错误是由于[保留关键字](http://support.microsoft.com/kb/321266)CURRENT_DATE 的存在。这可以通过用方括号封装字段名称来解决。

顺便说一句，一旦解决了 CURRENT_DATE 的问题，IN 语法也能正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T18:29:22.440

就像其他人说的那样，那是一个 SQL 语法问题。您缺少 VALUES 关键字，请查看：

```
INSERT INTO TABLENAME (COL1, COL2, COL2) VALUES (VAL1, VAL2, VAL3) 
```

您的 VALUES 关键字在哪里？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T17:14:20.353

我不太熟悉 ms 访问查询，但我认为您不应该使用 OleDbDataAdapter。代码应类似于以下内容：

```
string query_insert = "INSERT INTO Questionnaires_Table(BranchName,Factor,Region,Branch_ID,Current_Date,No_Employees) "
    + "SELECT BranchName,Factor,Region,Branch_ID,Current_Date,No_Employees "
    + "FROM Questionnaires_Table IN '" + dialog.FileName + "' Where Branch_ID = " + textBox1.Text ;

dbConnDest.Open();

OleDbCommand cmd_insert = new OleDbCommand(query_insert, dbConnDest);
cmd_insert.ExecuteNonQuery();

dbConnDest.Close(); 
```

# android - Android VideoView 无法播放“file:///android_asset/...”中的视频

> ID：15620730
> 
> 赞同：0
> 
> 时间：2013-03-25T17:08:06.353
> 
> 标签：android

我正在尝试播放视频：

```
mVideoView = (VideoView) findViewById(R.id.surface_view);

String viewSource = "file:///android_asset/intro.mp4";
Uri uri = Uri.parse(viewSource);

mVideoView.setVideoURI(uri);  
mVideoView.requestFocus();
mVideoView.start(); 
```

但没有任何效果。LogCat 向我展示了这个：“MediaPlayer 错误（1，-2147483648）”

如果我尝试从 res/raw 目录播放视频，一切正常！但我需要从资产玩！！！

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T22:50:31.660

从播放器以这种方式提供的回调开始视频：

```
mVideoView.setVideoPath("android.resource://<<package>>/raw/video");
mVideoView.requestFocus();

mVideoView.setOnPreparedListener(new OnPreparedListener() {
    @Override
    public void onPrepared(MediaPlayer mp) {
        mVideoView.start();
    }
});
mVideoView.setOnCompletionListener(new OnCompletionListener() {
    @Override
    public void onCompletion(MediaPlayer mp) {

    }
}); 
```

# javascript - phonegap 离线同步图片

> ID：15620732
> 
> 赞同：0
> 
> 时间：2013-03-25T17:08:08.917
> 
> 标签：javascript, ios, html, cordova

我搜索了类似的问题，但没有找到我问题的确切答案。

我正在为 iOS 构建 phonegap 应用程序，它将具有在线/离线同步功能。每次应用程序启动时，我都想将离线 SQLite 数据库与来自服务器的 JSON 数据同步。我认为当用户第一次启动应用程序时它可能会运行缓慢（将获取 100% 的数据），因为同步功能必须下载超过 50 张图像......

我什至不知道应用商店是否会批准这样的解决方案。

这种问题的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T21:07:16.017

您可以拆分请求。例如，每个请求 10 张图像。像这样，用户将能够在获取所有图像之前看到图像。

# javascript - 我如何找到正在处理 window.onbeforeunload 的事件？

> ID：15620736
> 
> 赞同：1
> 
> 时间：2013-03-25T17:08:25.587
> 
> 标签：javascript, onbeforeunload

我如何找到正在处理 window.onbeforeunload 的事件？例如刷新、返回、浏览器关闭等

```
<script language="JavaScript" type="text/javascript">
  window.onbeforeunload = confirmExit;
  function confirmExit()
  {
    alert('here i need to show which event is working')
    return "";
  }
</script> 
```

# excel - 表单和滚动条

> ID：15620737
> 
> 赞同：0
> 
> 时间：2013-03-25T17:08:27.367
> 
> 标签：excel, vba

我遇到了一个小问题，这让我很头疼试图解决。我已经为此寻找了很长时间，但我仍然没有找到如何做到这一点。

我有一个小脚本，它将在表单上创建组合框。

```
For j = 0 To UBound(ComponentList) - 1
'Set Label
Set control = ComponentSelectionForm.Controls.Add("Forms.Label.1", "ComponentLabel" & CStr(j), True)
With control
    .Caption = "Component " & CStr(j)
    .Left = 30
    .Top = Height
    .Height = 20
    .Width = 100
    .Visible = True
End With

'set ComboBox
Set combo = ComponentSelectionForm.Controls.Add("Forms.ComboBox.1", "Component" & CStr(j), True)
With combo
    .List = ComponentList()
    .Text = "NONE"
    .Left = 150
    .Top = Height
    .Height = 20
    .Width = 50
    .Visible = True
    Set cButton = New clsButton
    Set cButton.combobox = combo
    coll.Add cButton
End With
Height = Height + 30
Next j 
```

我发现有时我可以拥有多达 50 个组合框。这显然会离开页面。我要做的是创建一个容器来将这些组合框保存在具有垂直滚动条的表单中，以便用户可以滚动浏览它们。

我应该能够创建一个滚动条，但我该怎么做才能使滚动条滚动组合框但将标签留在其上方，并将其下方的按钮留在它们所在的位置。

我正在寻找一些关于去哪里帮助实现这一目标的帮助/指针。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T17:16:29.483

您不能将组合框放在诸如 Frame 之类的容器控件中，然后添加滚动条（设置 Horizo​​ntal 和 Vertical 的方向属性）。

所以，**在你的循环之外**，添加你的框架：

```
ComponentSelectionForm.Controls.Add("Forms.Frame.1", "fraContainer" , True) 
```

然后将滚动条添加到容器中

```
ComponentSelectionForm.Controls("fraContainer").controls.add("Forms.Scrollbar.1", "scHorizontal" , True)

with ComponentSelectionForm.Controls("fraContainer").controls("scHorizontal")
    ' set orentation to Horizontal
    .orientation=1
end with

ComponentSelectionForm.Controls("fraContainer").controls.add("Forms.Scrollbar.1", "scVertical" , True)

with ComponentSelectionForm.Controls("fraContainer").controls("scVertical")
    ' set orentation to Vertical
    .orientation=0
end with 
```

现在，**在你的循环中**

更改您的代码，而不是将组合框添加到表单中，而是将它们添加*到 FRAME 容器*

[在Ozgrid MVP 站点](http://www.ozgrid.com/Excel/free-training/ExcelVBA2/excelvba2lesson21.htm) 上对此有很多帮助：在运行时创建控件，在运行中

让我们知道您的身体情况如何

高温高压

菲利普

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T21:05:31.987

**你好，这是一个子程序。希望这对您的概念有所帮助:)**

```
Private Sub UserForm_Click()
    Call AddCombo(30)
End Sub

Private Sub AddCombo(num As Integer, Optional gap As Single = 2.25, _
                     Optional ctrlHeight As Single = 18)
    Dim ctrl As Control, i As Integer
    Static lastTop As Single
    lastTop = 2
    For i = 1 To num
        Set ctrl = UserForm1.Controls.Add("Forms.ComboBox.1", "Combo" & i, True)
        With ctrl
            If i = 1 Then
               ctrl.Top = lastTop
               ctrl.Height = ctrlHeight
               'Add other codes here .....
            Else
               lastTop = lastTop + ctrlHeight + gap
               ctrl.Top = lastTop
               ctrl.Height = ctrlHeight
               'Add other codes here .....
            End If
        End With
    Next i
    If lastTop > Me.Height Then
       Me.ScrollHeight = lastTop
       Me.ScrollBars = fmScrollBarsVertical
    End If
End Sub 
```

**需要修改的东西：**

*   我已经使用 UserForm_Click() 事件来调用 AddCombo 子，所以请在任何你想要的地方调用它。
*   我没有设置 left 属性，你可以在 **ctrl.height**线下面轻松设置
*   根据需要更改其他属性

# gwt - Celltable GWT 排序

> ID：15620739
> 
> 赞同：0
> 
> 时间：2013-03-25T17:08:36.950
> 
> 标签：gwt, celltable, gwt-celltable

我已经搜索了几天，但我找不到对我有帮助的东西。

我有一些列和排序处理程序，所以排序本身没有问题。但是是否可以设置 Sorthandlers 或 Celltable，以便它们只以一种方式排序？我只想设置顶部列的最大值，无论点击哪一列。每次我需要在列上单击两次以使最大值位于顶部，因为如果表格从最高到最低排序，那么它将更改为从最低到最高。

我希望描述不要太复杂，以便有人可以帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T19:03:08.090

默认情况下，列使用升序排序（小值优先）。要改变这一点，您可以使用

```
myColumn.setDefaultSortAscending(false); 
```

# windows-phone-8 - Longlistselector 控件中的 ItemsPanel 属性 Windows Phone 8 SDK

> ID：15620743
> 
> 赞同：4
> 
> 时间：2013-03-25T17:08:47.293
> 
> 标签：windows-phone-8, longlistselector, itemspanel

有谁知道 Windows Phone 8 SDK（不是 WP 7.5 的 Windows Phone 工具包）中的 Longlistselector 控件是否具有 ItemsPanel 属性或等效属性？

ListBox 控件具有这样的属性，我用它来将项目包装在 WrapPanel 中。

```
<ListBox>
    <ListBox.ItemsPanel>
        <ItemsPanelTemplate>
            <toolkit:WrapPanel/>
        </ItemsPanelTemplate>
    </ListBox.ItemsPanel>
</ListBox> 
```

这里有一个答案：[How to wrap ItemsPanel in LongListSelector?](https://stackoverflow.com/questions/12341381/how-to-wrap-itemspanel-in-longlistselector) 但这指的是在工具包中找到的 Longlistselector，而不是在 WP8 SDK 中（我无权访问源代码来使用上述解决方案）。

有人有想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-30T07:25:43.533

您应该能够使用该`LayoutMode`属性来完成此操作。将值设置为网格

> 从 Microsoft.Phone.Controls.LongListSelectorLayoutMode 枚举中获取或设置一个值，该值指定 Microsoft.Phone.Controls.LongListSelector 是处于列表模式还是网格模式。

```
<phone:LongListSelector ItemsSource="{Binding Items}" LayoutMode="Grid" > 
```

# http - 未激活帐户的 HTTP 状态代码是什么？

> ID：15620746
> 
> 赞同：18
> 
> 时间：2013-03-25T17:08:58.700
> 
> 标签：http, httpresponse, http-status-codes

在对用户进行身份验证然后发现他们在注册后没有激活他们的帐户后，我应该响应哪个 HTTP 状态代码？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-25T18:15:08.157

401 表示用户未知（根本没有经过身份验证或身份验证不正确，例如凭据无效）。
403 表示用户已知但未授权（即没有适当的角色/组）。

您还可以将已注册但未激活的帐户解释为具有特定角色（如“未激活”）和/或缺少适当角色的用户。403 在您的特定情况下更合适。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T07:36:03.993

@Josh Davenport：您在彼此的位置描述了授权和身份验证：身份验证是凭据检查，授权是角色/组分配。

另一方面，正如您在对自己的评论中所说，401 假设同时失败的身份验证和授权。用户需要同时失败才能获得 401。403 用于完全禁止数据并且根本不执行/不需要身份验证的情况。

打个比方：401 = 检查凭据的检查点。403 = STOP 标志，无法进入。

要回答 OP 的问题：401 在逻辑上是未激活帐户的状态代码，但由于它需要 HTTP-Auth 实现，如果您通过其他方式进行身份验证和授权，则可以使用 403 代替它。我个人仍然会坚持 401，因为标准不一定涵盖所有现实生活中的情况。现在几乎没有人使用 HTTP-Auth 进行身份验证。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T17:12:11.667

如果您认为未激活的帐户不应该被授权，那么响应肯定应该有一个[401 Unauthorized](http://en.wikipedia.org/wiki/HTTP_401)状态码。

我认为[403 Forbidden](http://en.wikipedia.org/wiki/HTTP_401)也是合适的，是的。但是，在您的情况下，我认为 401 Unauthorized 更合适。

[这个答案](https://stackoverflow.com/questions/3297048/403-forbidden-vs-401-unauthorized-http-responses#)很好地总结了两者，引用了 401 Unauthorized ：

> 如果请求已包含授权凭证，则 401 响应指示已拒绝对这些凭证的授权。

这当然适用，因为您的案例表明他们已经提供了凭据，但这些凭据无效，因为该帐户尚未激活（您认为这是未经授权的）。

# perl - 如何通过 perl 脚本在 PBS 扭矩中使用 qsub -v 命令？

> ID：15620753
> 
> 赞同：1
> 
> 时间：2013-03-25T17:09:15.140
> 
> 标签：perl, pbs, qsub, torque

我想通过使用“qsub -v”命令将变量传递给 perl 脚本。这是我将运行的 perl 脚本（这只是一个测试，但如果它不起作用，我将无法做任何更困难的事情）

```
#!/usr/bin/perl
use Getopt::Long;
$result = GetOptions ("i=s" => \$config_file);

open(FILE,">/data/home/FILEout.txt");
open(FILE_CONFIG,"<$config_file");
while(<FILE_CONFIG>){
  print FILE "$config_file\n";
}
close(FILE_CONFIG);
close(FILE); 
```

所以，如果我要运行这个脚本（不是通过 qsub），我会输入：

```
perl Test.pl -i FILE_CONFIG.txt 
```

但是，我会在使用 pbs 的集群节点上运行此脚本。我做了几次尝试，如下所示：

```
qsub -l nodes=node06 -v i=/data/home/FILE_CONFIG.txt Test.pl 
```

但它不起作用。任何人都知道我应该如何使用 qsub 将参数传递给我的 perl 脚本？任何帮助将非常感激

不起作用意味着使用 qsub 不会在输出文件上打印任何内容，而仅使用 perl 它会在输出文件中打印输入文件的内容。看起来它不需要任何输入

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T15:39:13.550

Would it be easier for you to submit the job this way:

```
echo "perl /absolute/path/to/Test.pl -i FILE_CONFIG.txt" | qsub -l nodes=node06 
```

Then, as long as you know that Test.pl is in the path you specify on node06, it should work correctly.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T17:02:20.523

该[`qsub`命令](http://www.clusterresources.com/torquedocs/commands/qsub.shtml)不允许将命令行参数直接传递给输入脚本。有两种基本方法：

1.  编写一个包装脚本，使用适当的参数调用您的实际脚本。您甚至可以通过将命令中的脚本名称指定为“ ”或完全省略它，将包装脚本传递到`qsub`标准输入，如[dbeer 的答案所示。](https://stackoverflow.com/a/15686085)`qsub``-`

    请注意，如果您这样做，则`#PBS`必须在*包装器*脚本中指定任何嵌入式指令，而不是在包装器调用的内部脚本中。当然，如果您不使用该特定功能，则无需担心。

2.  而是通过环境传递参数，使用`-v`switch 到`qsub`. 也就是说，如果您的`qsub`命令如下所示：

    ```
    qsub -l nodes=node06 -v CONFIG=/data/home/FILE_CONFIG.txt Test.pl 
    ```

    然后您的`Test.pl`脚本可以从 读取配置文件路径`$ENV{CONFIG}`，如下所示：

    ```
    #!/usr/bin/perl
    use strict;
    use warnings;

    my $config = $ENV{CONFIG} || 'default_config_file_path.txt';
    open CONFIG, '<', $config  or die "Error opening $config: $!\n";

    # ... rest of script here ... 
    ```

# javascript - 查找具有 x 类但不应具有 y 类的 Div

> ID：15620754
> 
> 赞同：2
> 
> 时间：2013-03-25T17:09:21.357
> 
> 标签：javascript, jquery

```
<ul>
<li class="clsLi">
<div class="abc xyz"></div>
<div class="arrow"></div>
<div class="abc xyz"></div>
<div class="abc"></div>
<div class="abc"></div>
<div class="abc xyz"></div>
</ul>
</li> 
```

我正在尝试选择具有“abc”类但没有“xyz”类的 div

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T17:11:09.070

试试这个：

```
$(".abc:not(.xyz)") 
```

[您可以在此处](http://api.jquery.com/not-selector/)阅读非选择器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T17:11:56.627

试试这个[:not](http://api.jquery.com/not-selector/)选择器

```
$(".abc:not(.xyz)") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T17:12:44.140

```
$('.abc').not('.xyz') 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/6NSpc/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T17:13:57.550

```
if ($(this).not('.xyz').hasClass("abc")) {
    //Do stuff with it
} 
```

# doctrine-orm - 是否有注释或技巧可确保实体在保存/更新后始终清除？

> ID：15620756
> 
> 赞同：0
> 
> 时间：2013-03-25T17:09:29.670
> 
> 标签：doctrine-orm, zend-framework2

我遇到了这个问题，其中配置值正在由实际数据库中的多个源更新，但由于 Doctrine 返回对象的最后保存状态而在前端过时。

感谢您的提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T19:53:05.727

您可以在更新/保存事件上注册一个事件侦听器（请参阅 \Doctrine\ORM\Events），并在事件触发时运行 EntityManager 的 clear ($entityName) 方法。

# javascript - 这个 jQuery 命名空间 (JavaScript) 是如何工作的？

> ID：15620758
> 
> 赞同：0
> 
> 时间：2013-03-25T17:09:32.847
> 
> 标签：javascript, jquery

```
jQuery.namespace = function() {
    var a = arguments, o = null, i, j, d;
    for( i = 0; i < a.length; i = i + 1) {
        d = a[i].split(".");
        o = window;
        for( j = 0; j < d.length; j = j + 1) {
            o[d[j]] = o[d[j]] || {};
            o = o[d[j]];
        }
    }
    return o;
};

jQuery.namespace("com.fc"); 
```

我遇到了一些 JS 代码，但无法弄清楚它是如何工作的以及它的作用。你用字符串调用函数但函数什么都不带？整件事的目的是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T17:10:49.600

arguments 是传递给函数的所有参数的数组

如果是

`jQuery.namespace("com.fc");`

参数 [0] 将是“com.fc”

它似乎遍历所有参数，并用“。”分割命名空间。

然后尝试遍历创建哈希的命名空间的窗口对象，最后它返回最深级别的哈希。

看起来这个函数可用于使用walking..在深度哈希中设置命名空间变量。

jQuery.namespace("com.fc").something = "yo"

或者如果命名空间已经填充了数据或函数

```
jQuery.namespace("com.fc").somefunction();
jQuery.namespace("com.fc").somevalue; 
```

不知道为什么允许多个名称空间的体操，因为它只能返回看似最后的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T17:12:33.973

`arguments`是 javascript 中的关键字，它是一个类似数组的对象，包含传递给函数的所有参数。

该函数循环遍历每个参数，并假设每个参数都是一个字符串。然后它在 '.' 上拆分字符串。并创建由该点符号表示的深层对象。

考虑一个空对象`{}`。使用参数对该对象进行操作的函数`"com.fc"`将变为：

```
{
    com: {
        fc: {
        }
    }
} 
```

在这种情况下，原始对象是`window`，因此它在 window 内创建一个空对象，使用字符串作为如何深入对象的点表示法指南。

# html - 更少的背景 div

> ID：15620760
> 
> 赞同：1
> 
> 时间：2013-03-25T17:09:34.293
> 
> 标签：html, css, less

大家好，我有一个用 php 和更少开发的网站。我有这个html：

```
<div id="navigation">
    <div class="verde1-bg">
    </div>
    <div class="verde2-bg">
    </div>
    <div class="verde3-bg">
    </div>
    <div class="verde4-bg">
    </div>
</div> 
```

和更少/css

```
@verde1:#adbf21;    
@verde2:#405908;    
@verde3:#4f7302;    
@verde4:#618c03;

.verde1-bg{
    background:@verde1;
}

.verde2-bg{
    background:@verde2; 
}

.verde3-bg{
    background:@verde3; 
}

.verde4-bg{
    background:@verde4; 
} 
```

我想为每个 div 应用亮度效果，但可以不做这件事吗？

```
.verde1-bg:hover{
    background: lighten(@verde1, 30%);
}

.verde2-bg:hover{
    background: lighten(@verde2, 30%);  
}

.verde3-bg:hover{
    background: lighten(@verde3, 30%);  
}

.verde4-bg:hover{
    background: lighten(@verde4, 30%);  
} 
```

我可以在 less 中使用一个函数来获取 mybackground 的颜色并将其调亮 30% 而不是将 foreach div 声明为悬停事件？就像是：

```
#navigation{
   div:hover{
      lighten(div.background, 30%);
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T20:05:52.090

## 使用 Mixin

这有助于减少代码重复。

**较少的**

```
@verde1:#adbf21;    
@verde2:#405908;    
@verde3:#4f7302;    
@verde4:#618c03;

.setBackground(@color) {
    background: @color;
    &:hover {
      background: lighten(@color, 30%);
    }
}

.verde1-bg{
    .setBackground(@verde1);
}

.verde2-bg{
    .setBackground(@verde2);
}

.verde3-bg{
    .setBackground(@verde3);
}

.verde4-bg{
    .setBackground(@verde4);
} 
```

**CSS 输出**

```
.verde1-bg {
  background: #adbf21;
}
.verde1-bg:hover {
  background: #e1eb8e;
}
.verde2-bg {
  background: #405908;
}
.verde2-bg:hover {
  background: #a5e515;
}
.verde3-bg {
  background: #4f7302;
}
.verde3-bg:hover {
  background: #b1fb13;
}
.verde4-bg {
  background: #618c03;
}
.verde4-bg:hover {
  background: #bafb2d;
} 
```

这可以通过在 LESS 中使用循环来进一步减少。例如，请参阅以下答案：

1.  [更少的 mixin 或选择器来根据同级索引更改位置？](https://stackoverflow.com/questions/13554978/less-mixin-or-selector-to-change-position-based-on-sibling-index/13555372#13555372)
2.  [LESS CSS - 函数中的不同元素](https://stackoverflow.com/questions/15026499/less-css-different-elements-in-a-function/15027988#15027988)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T18:16:38.080

由于 的性质`LESS`，一个语法较少的编译器`CSS`，我认为它无法完成，`LESS`不与网页及其元素交互，它只是编译里面的代码`file.less`并将其嵌入到网页中。

在 LESS 主页中有一个[用法部分](http://lesscss.org/#usage)，其中显示您可以添加 javascript 函数，但我认为它是用于`less vars manipulation`，而不是从页面获取元素数据，也许您可​​以在那里尝试一下。

```
<script type="text/javascript">
less = {
    env: "development", // or "production"
    async: false,       // load imports async
    fileAsync: false,   // load imports async when in a page under
                        // a file protocol
    poll: 1000,         // when in watch mode, time in ms between polls
    functions: {},      // user functions, keyed by name
    dumpLineNumbers: "comments", // or "mediaQuery" or "all"
    relativeUrls: false,// whether to adjust url's to be relative
                        // if false, url's are already relative to the
                        // entry less file
    rootpath: ":/a.com/"// a path to add on to the start of every url
                        //resource
};
</script>
<script src="less.js" type="text/javascript"></script> 
```

还有一个[LESS 函数参考指南](http://lesscss.org/#reference)，您可以在其中看到它们仅用于数据操作，例如`file.less`.

```
escape(@string);               // URL encodes a string
e(@string);                    // escape string content
%(@string, values...);         // formats a string

unit(@dimension, [@unit: ""]); // remove or change the unit of a dimension
color(@string);                // parses a string to a color
data-uri([mimetype,] url);       // * inlines a resource and falls back to url()

ceil(@number);                 // rounds up to an integer
floor(@number);                // rounds down to an integer
percentage(@number);           // converts to a %, e.g. 0.5 -> 50%
round(number, [places: 0]);    // rounds a number to a number of places
sqrt(number);                  // * calculates square root of a number
abs(number);                   // * absolute value of a number
sin(number);                   // * sine function
asin(number);                  // * arcsine - inverse of sine function
cos(number);                   // * cosine function
acos(number);                  // * arccosine - inverse of cosine function
tan(number);                   // * tangent function
atan(number);                  // * arctangent - inverse of tangent function
pi();                          // * returns pi
pow(@base, @exponent);     // * first argument raised to the power of the second argument
mod(number, number);       // * first argument modulus second argument

convert(number, units);    // * converts between number types
unit(number, units);       // *changes number units without converting it
color(string);             // converts string or escaped value into color

rgb(@r, @g, @b);                             // converts to a color
rgba(@r, @g, @b, @a);                        // converts to a color
argb(@color);                                // creates a #AARRGGBB
hsl(@hue, @saturation, @lightness);          // creates a color
hsla(@hue, @saturation, @lightness, @alpha); // creates a color
hsv(@hue, @saturation, @value);              // creates a color
hsva(@hue, @saturation, @value, @alpha);     // creates a color

hue(@color);           // returns the `hue` channel of @color in the HSL space
saturation(@color);    // returns the `saturation` channel of @color in the HSL space
lightness(@color);     // returns the 'lightness' channel of @color in the HSL space
hsvhue(@color);        // * returns the `hue` channel of @color in the HSV space
hsvsaturation(@color); // * returns the `saturation` channel of @color in the HSV space
hsvvalue(@color);      // * returns the 'value' channel of @color in the HSV space
red(@color);           // returns the 'red' channel of @color
green(@color);         // returns the 'green' channel of @color
blue(@color);          // returns the 'blue' channel of @color
alpha(@color);         // returns the 'alpha' channel of @color
luma(@color);          // returns the 'luma' value (perceptual brightness) of @color

saturate(@color, 10%);                  // return a color 10% points *more* saturated
desaturate(@color, 10%);                // return a color 10% points *less* saturated
lighten(@color, 10%);                   // return a color 10% points *lighter*
darken(@color, 10%);                    // return a color 10% points *darker*
fadein(@color, 10%);                    // return a color 10% points *less* transparent
fadeout(@color, 10%);                   // return a color 10% points *more* transparent
fade(@color, 50%);                      // return @color with 50% transparency
spin(@color, 10);                       // return a color with a 10 degree larger in hue
mix(@color1, @color2, [@weight: 50%]);  // return a mix of @color1 and @color2
greyscale(@color);                      // returns a grey, 100% desaturated color
contrast(@color1, [@darkcolor: black], [@lightcolor: white], [@threshold: 43%]); 
                                        // return @darkcolor if @color1 is > 43% luma
                                        // otherwise return @lightcolor, see notes 
```

这些功能仅在 1.4.0 beta 中可用

```
multiply(@color1, @color2);
screen(@color1, @color2);
overlay(@color1, @color2);
softlight(@color1, @color2);
hardlight(@color1, @color2);
difference(@color1, @color2);
exclusion(@color1, @color2);
average(@color1, @color2);
negation(@color1, @color2); 
```

# php - 在函数中定义 PHP 类常量

> ID：15620762
> 
> 赞同：0
> 
> 时间：2013-03-25T17:09:35.747
> 
> 标签：php, oop

有没有办法在类函数中定义一个常量？
例子：

```
class ExampleApp
{
    const FORM = TRUE;

    public function __construct()
    {
        switch(Base::color())
        {
            case 'green':
                self::FORM = 'G';
                break;
            case 'red':
                self::FORM = 'R';
                break;
            default:
                self::FORM = 'W';
                break;
        }
    }

    public function process() { return TRUE; }
} 
```

上面的示例代码显然不会工作！

根据我的编程知识，您无法重新定义常量，否则它们将是“常量”。但是你如何在一个函数中定义一个常数呢？！在我的示例中，该函数是构造函数，或者这完全不可能？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T17:10:50.523

我认为您想要一个静态属性，而不是常量

`public static $form = true;`

但是，此时不要将变量名使用大写字母，因为它不是常量，以免混淆其他开发人员。

您可以像在您的方法中一样使用它来访问它`self::form`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-25T17:17:01.957

通过将其保存在属性中。不是静态属性，只是带有 getter 和 setter 的属性。

```
class ExampleApp
{
    const FORM_COLOR_GREEN = "G";
    const FORM_COLOR_RED = "R";
    const FORM_COLOR_DEFAULT = "W";

    private $form_color;

    public function getFormColor()
    {
        return $this->form_color;

    }

    public function setFormColor( $color )
    {
        $this->form_color = $color;

    }

    public function __construct( $color = NULL )
    {
        switch( $color )
        {
            case 'green':
                $this->setFormColor( self::FORM_COLOR_GREEN );
                break;
            case 'red':
                $this->setFormColor( self::FORM_COLOR_RED );
                break;
            default:
                $this->setFormColor( self::FORM_COLOR_DEFAULT );
                break;
        }
    }

    public function process() { return TRUE; }
} 
```

然后你可以通过调用它来获取表单颜色`$example_app->getFormColor();`

# java - 如何从 Java 中的枚举集中获取第一个元素？

> ID：15620765
> 
> 赞同：1
> 
> 时间：2013-03-25T17:09:42.343
> 
> 标签：java

我在处理这个旧项目时遇到问题。基本上，有一个将枚举集存储到数据库的对象，我的问题是我需要获取存储的枚举集的第一个元素。现在，在你抨击我说集合没有特定顺序并且我应该使用列表之前，我想告诉你我不能只更改代码，因为我不知道是什么样的它将对系统的其他部分产生影响。@_@ 系统大约有 3-4 年的历史，我是新人……所以，最好解决一下。

例如：

```
Enumset<Protocol> protocolsAvailable; 
```

以下是从数据库中检索 protocolAvailable 时的示例：

```
[ALPHA,BETA,EPSILON] 
```

我需要获取第一个元素，即 alpha。我可以通过多种方式进行操作，将其转换为列表然后使用 get(index)，或者我可以将其视为字符串并使用 .split(",")[0]...eehh...我不知道，已经很晚了，我想我只是在寻找更好的方法。:>

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T17:10:31.723

```
protocolsAvailable.iterator().next() 
```

是传统的方法。

# ruby-on-rails - 如何搜索 has_many 关系字段作为标准太阳黑子轨道

> ID：15620768
> 
> 赞同：0
> 
> 时间：2013-03-25T17:09:56.967
> 
> 标签：ruby-on-rails, ruby, sunspot, sunspot-rails

我有一个**Project Model**和一个**ProjectAttribute Model**基本上有 3 个字段：**name**，**value**，**project_id ，用于存储有关****Project**的键值记录，我尝试了下面的方法但没有任何成功。

**项目.rb**

```
class Project < ActiveRecord::Base
  has_many :project_attributes

  searchable do
    text :title, :boost => 2
    text :description
    string :att_name, :multiple => true do
      project_attributes.map { |p| p.name }
    end

    string :att_value, :multiple => true do
      project_attributes.map { |p| p.value }
    end

  end
end 
```

是否可以使用**ProjectAttribute 字段作为****Project.search**的条件来获取所有具有 3 个房间的项目？

前任：

```
Project.search do 
    with(:att_name, 'rooms')
    with(:att_value, '3')
end 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-03-26T09:53:45.897

不需要太阳黑子 - 您可以使用基本的 ActiveRecord 查询和范围来做到这一点。

让我们从简单的开始：您只想找到有 3 个房间的项目。查询将是：

```
Project.joins(:project_attributes).where("project_attributes.name = 'rooms' AND project_attributes.value = '3'") 
```

把它变成一个范围`Project`：

```
scope :search, joins(:project_attributes).where("project_attributes.name = 'rooms' AND project_attributes.value = '3'") 
```

但当然你想接受可变输入：

```
scope :search, lambda { |name, value| joins(:project_attributes).where("project_attributes.name = ? AND project_attributes.value = ?", name, value) } 
```

它允许您执行以下操作：

```
Project.search("rooms","3") 
```

# html - 使下拉菜单显示一个按钮（如果它以前是隐藏的）

> ID：15620769
> 
> 赞同：0
> 
> 时间：2013-03-25T17:09:57.793
> 
> 标签：html, button, drop-down-menu, html-select

我的最终目标是提供一个小的下拉菜单，该菜单在选择其他选项时显示一个按钮！这是我的代码：ps。（我正在使用 twitter 引导程序！）pps。（该按钮打开一个网站链接，但我还没有填写它们！）：

```
<select value="Graphic Design" id="mydemo" class="span3 offset4" tabindex="1" name="theartsierlist">
    <option id="already" value="0" selected="selected">Choose An Artsiness</option>
    <option id="zero" value="http://www.google.com">Photoshop</option>
    <option id="one" value="1">Illustration</option>
    <option id="two" value="2">Coding</option>
</select>

<button id="mybutton" onclick="window.open(mydemo.options[mydemo.selectedIndex].value)"  class="btn btn-primary btn-large btn-danger">Downloads</button>

<script>
    x = document.getElementById("mydemo").options[mydemo.selectedIndex].value
    y = document.getElementById("mybutton");
    var visible = new function(){
    if (document.getElementById("mydemo").options[mydemo.selectedIndex].value == 0) {
        y.style.visibility = "hidden";
    } else if????
</script> 
```

# mysql - mysql 价格字段分隔符在 xml 导入上插入之前更改

> ID：15620770
> 
> 赞同：0
> 
> 时间：2013-03-25T17:10:03.220
> 
> 标签：mysql, insert, separator

我正在将 xml 文件导入 MySQL。我有一个：警告：number_format() 期望参数 1 为双精度，字符串在第 224 行的 /home/dailyadc/public_html/include/form.php 中给出

这意味着这是错误的价格格式。我的 xml 价格节点包含杂乱的价格格式。我只有一种方法可以在插入之前编写一些触发器，以使它们仅采用一种英国格式：10,000.00

有我的价格节点：

```
<price>10 100</price>
<price>10.000,24</price>
<price>10,000.34</price>
<price>10,000,00</price>
<price>10.000.00</price>
<price>1.000.00</price> 
```

我不知道该怎么做，因为它们都是不同的，有些包含分隔符，有些没有，有些包含错误....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T18:07:17.513

我认为你需要预处理你的文件，因为你所有的价格都是不稳定的。此外，xx,xxx.xx 不是有效的 mysql float(double)，如果值被引用，它是一个字符串，如果不引用，逗号充当列/字段分隔符。

例子

*   `SELECT "50,000.00";`
    *   返回字符串“50,000.00”
*   `SELECT 50,000.00;`
    *   返回两列，一列 = 50，另一列 = 0.00

对于预处理，在 php 中，一旦你有了价格，你就可以做这样的事情

```
if (substr($price, -3, 1) == '.'){
  // Properly formated, just need to remove the commas
  $price = str_replace(',','',$price);
} else if (substr($price, -3, 1) == ','){
  // Periods before commas.
  // Remove all of the '.', then swap the ending ',' for a '.' 
  $price = str_replace(array('.', ','), array('', '.'), $price);
} else {
  // Price is in an odd format
  // Two options:
  //  Remove product entirely
  //  or
  //  Remove all non-numeric values from price (assumes no negative prices)
  $price = preg_replace('/[^0-9]/', '', $price);
} 
```

# java - 从 Java 运行 cygwin 编译程序

> ID：15620773
> 
> 赞同：0
> 
> 时间：2013-03-25T17:10:08.283
> 
> 标签：java, cygwin

我已经使用 cygwin 构建了一个 .exe。它被称为 ms.exe。我正在尝试使用 ProcessBuilder 从 java 运行它。我之前使用过 ProcessBuilder 来捕获它的输出。

在命令窗口 (cmd.exe) 上，如果我运行 ms.exe [ms-params] > output.txt。然后输出包含

> /cygdrive/c/my-path-to-ms.exe [msparams]
> 
> > [程序输出]

在命令窗口中，如果我没有传递任何重定向，即 > output.txt，那么输出仅包含 [程序输出]。

请注意，我的 PATH 环境变量下有 %CYGWIN_HOME%/bin。

用 ms.exe 调用 ProcessBuilder 结束（没有任何异常）但作为输出我只得到

> /cygdrive/c/my-path-to-ms.exe [msparams]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T02:07:38.650

使用`ProcessBuilder("cmd.exe","/C","entire-exe-path-with-arguments")`运行可执行文件。

我有另一个可执行文件，当用作`ProcessBuilder("exe-path","arg1","arg2"..)`.

我不确定为什么以前的可执行文件只能在 cmd 下运行。

两者都是使用 cygwin 构建的。我尝试将 cygwin1.dll 放在工作目录中，但没有任何效果。

# windows - 删除目录但保留文件的脚本

> ID：15620774
> 
> 赞同：0
> 
> 时间：2013-03-25T17:10:08.753
> 
> 标签：windows, batch-file, bulk

我想要一个能够执行以下操作的脚本

我有大约 2000 个目录，其中包含文件和文件夹

我想删除主文件夹，但将所有内容保留在文件夹中

所以一个文件夹的例子

```
Folder A / Folder 2 / Video 1
           Image1
           Image2 
```

所以我希望它能够删除主要的第一个文件夹，在这种情况下它将是“文件夹 A”

```
Folder 2 / Video 1
Image1
Image2 
```

如果不只是问，希望您能理解我想要做什么！干杯

额外信息

由此

```
C:/folder A/Stuff
C:/folder B/Stuff
C:/folder C/Stuff 
```

对此

```
C:/stuff
C:/sfuff
C:/sfuff 
```

我只希望这个 bat 能够删除文件夹并将该文件夹中的所有内容移动到我运行 .bat 的位置，我还希望能够在其他驱动器上运行 .bat D:/E;/F; / 许多地点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:50:56.243

如果您的磁盘中有此结构：

```
C:\Folder A
|  | Folder 2
|  | | Video 1
|  | | | Image1
|  | | | Image2 
```

...然后您执行以下命令：

```
cd "\Folder A"
move "Folder 2" .. 
```

...然后你得到这个结果：

```
C:\Folder A
|  Folder 2
|  | Video 1
|  | | Image1
|  | | Image2 
```

也就是说，它将“文件夹 2”上移一级，到“文件夹 A”的同一级别。如果您想对“文件夹 A”中的所有文件夹执行相同的操作，然后将其删除，则此批处理文件执行以下操作：

```
@echo off
cd "\Folder A"
for /F "delims=" %%a in ('dir /B /AD') do (
   move "%%a" ..
)
cd ..
rd "\Folder A" 
```

这是你想要的吗？

**编辑：**添加新版本作为对新评论的回答

```
@echo off
rem Eliminate all folders present at the same level of the Batch file
rem and move their contents one level up
for /F "delims=" %%a in ('dir /B /AD') do (
   cd "%%a"
   for /F "delims=" %%b in ('dir /B /AD') do (
      move "%%b" ..
   )
   move *.* ..
   cd ..
   rd "%%a"
) 
```

需要注意的是，如果东西中的两个或多个文件夹或文件具有相同的名称，并且它们最初放在被删除的顶级文件夹的正下方，那么程序会发出错误并且文件夹或文件不会被移动（并且顶级文件夹不会被删除）。

安东尼奥

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T18:11:44.877

```
@ECHO OFF
SETLOCAL enabledelayedexpansion
SET "relroot=c:\destdir"
SET "relrootd=c:\destdir"
SET "eliminate=folder a"
XCOPY /t /e "%relroot%\%eliminate%" "%relrootd%"
FOR /f "delims=" %%i IN ('dir /s /b /a-d "%relroot%\%eliminate%"') DO (
  SET dest=%%i
  SET dest=!dest:%relroot%\%eliminate%=%relrootd%!
  ECHO MOVE "%%i" "!dest!" >nul
) 
```

这应该可以 - 但它可能不会处理一些`poison`具有特殊含义的文件/目录名字符`CMD.EXE`-`^&!%`常规字母、符号和空格应该没问题

`relroot`是源头，`relrootd`是目的地。如果您愿意，它们可以相同或不同。我使用`c:\destdir`它是因为那是我用于测试批处理文件的目录。

`XCOPY`创建一个适当的空树。

基本模式下的`DIR`输出（包括不包括目录名的子目录）被逐行处理，原始和 directory-to-被目标 relroot 替换，并显示**PROPOSED**操作。`/b``/s``/a-d``relroot``eliminate` **`MOVE`**

 **验证后，删除`ECHO`关键字以激活移动。

在删除它之前，我会检查您的原始目录`relroot\eliminate`是否为空 - 只是为了安全起见......**

# mysql - 如何订购具有 Get 方法的 mySql 查询？

> ID：15620777
> 
> 赞同：0
> 
> 时间：2013-03-25T17:10:18.607
> 
> 标签：mysql, get, sql-order-by

我正在尝试订购以下查询的结果

```
$q_getPROVINCE = "select * from PROVINCES  WHERE CID =".$_GET['id'];
$r_getPROVINCE = mysql_query($q_getPROVINCE, $connection);
$n_getPROVINCE = mysql_num_rows($r_getPROVINCE); 
```

它工作得很好，但我的问题是，每当我尝试订购它时，我不确定如何编写它，中间有 GET_ 方法。

```
$q_getPROVINCE = "select * from PROVINCES  WHERE CID =".$_GET['id']."ORDER BY CITY_EN ASC";
$r_getPROVINCE = mysql_query($q_getPROVINCE, $connection);
$n_getPROVINCE = mysql_num_rows($r_getPROVINCE); 
```

我会很感激你的帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T17:12:36.870

您的代码看起来不错可能是您在“符号之前在 ORDER BY 之间留出了空格。试试这个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T17:12:58.143

您是否尝试在 ORDER 之前放置一个空格？像这样 ：

```
$q_getPROVINCE = "select * from PROVINCES  WHERE CID =".$_GET['id']." ORDER BY CITY_EN ASC"; 
```

# jquery - .next plus .toggle 在 IE8 中不起作用

> ID：15620780
> 
> 赞同：0
> 
> 时间：2013-03-25T17:10:31.863
> 
> 标签：jquery, toggle, slidetoggle, next

我正在使用 .toggle plus .next 来滑动/向下滑动 li，它在除 IE 8-7 之外的所有地方都可以正常工作，这很奇怪，我想提一下，当我在本地 PC 上使用此代码时，它可以正常工作，但是上传到服务器后，它不起作用。我正在使用以下html。

```
<ul id="search_list">
     <li class="ques"><a href="javascript:void(0)">Lorem ipsum dolor malesuada.</a></li>
     <li class="ans"><div class="arw"></div>Lorem ipsum dolor malesuada.</li>
     <li class="ques"><a href="javascript:void(0)">Lorem ipsum dolor malesuada.</a></li>
     <li class="ans"><div class="arw"></div>Lorem ipsum dolor malesuada.</li>
</ul> 
```

我已经尝试了以下 jquery 代码。

```
$("#search_list li.ques").live('click', function(){
    $(this).next("li.ans").slideToggle("fast");
}); 
```

和

```
$("#search_list li.ques").toggle(function(){
    $(this).next('li.ans').slideDown();
}, function(){
    $(this).next('li.ans').slideUp();
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T11:27:12.190

好的，我发现了问题，我在同一页面上使用了一个插件[fastLiveFilter](https://github.com/awbush/jquery-fastLiveFilter)，我将它的功能移到了我的显示/隐藏切换脚本下面，它现在在 IE 7-8 中运行良好。

谢谢你们的评论。

# batch-file - 文本文件权限问题

> ID：15620784
> 
> 赞同：1
> 
> 时间：2013-03-25T17:10:43.960
> 
> 标签：batch-file, ssis, text-files

SSIS 包中使用的默认 SSIS 帐户是什么。

在我的一个包中，我有一个创建平面文件的数据流任务。BAT 文件稍后会运行并根据该 .txt 文件中的信息创建一个文件。如果我在 Windows 资源管理器中执行 .BAT，它运行良好。当 SSIS 尝试执行它时，我可以看到 CMD 窗口打开，它尝试访问 txt 文件但无法访问。说“无法访问 nameofile.txt”

我认为问题是权限可能是由 SSIS 用户帐户继承的，所以我试图找出是哪个帐户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T23:23:14.863

如果您从 IDE 运行它，那么它会使用您的权限。最有可能的问题是您的文件被 SSIS 包中的某些其他进程锁定。验证：

1.  在批处理文件中添加 PAUSE 以使其等待任何键。
2.  运行你的包。在 dos 提示符等待时，进入 Windows 资源管理器并再次运行您的批处理文件 - 您会发现同样的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:20:45.887

我通过 attrib -r -s 更改了 dos 中该特定文件夹的属性值，并且它起作用了。它认为它是只读的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-15T13:37:19.730

我正在使用带有 SQL Server 2012 数据库的 Windows Server 2012 服务器。

向 NETWORK SERVICE 用户添加对包含所需文件的文件夹的修改、读取、写入权限似乎对我有用。

# c# - 有和没有特定字段的数据序列化

> ID：15620788
> 
> 赞同：0
> 
> 时间：2013-03-25T17:10:51.303
> 
> 标签：c#, xml-serialization

我有一组简单的 20 多个课程。它们都是可序列化的，以允许在 Web 服务中使用这些对象。(DataContract/DataMember) 它们中的每一个都有一个 ID 和可变数量的其他属性，具体取决于类。
我有一个数据库，它只存储一个 ID、一个标识类的名称和一个 XML 字符串。而且这个 XML 也是序列化形式的相同数据，但没有一个属性：ID 字段不应该被存储，因为它是多余的。
但是 ID 仍然必须发送到 Web 服务的客户端，这使事情变得有点复杂。虽然我可以创建每个类的副本，其中一个具有 ID 作为 DataMember 而另一个没有，我只是在寻找一个更清洁的解决方案来解决这个问题。我不需要将 ID 字段作为 XML 的一部分存储在数据库中的一种。
那么，问题是：确保 ID 成为发送到客户端的数据的一部分，但在将其存储为 XML 时被跳过的最简单的解决方案是什么？（无需修改 XML 即可将其删除。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T17:14:33.650

> 虽然我可以创建每个类的副本，其中一个的 ID 为 DataMember，另一个没有

继承呢？

```
public class MyEntity
{
  // some props
}

public class MyEntityWithId : MyEntity
{
  public int Id { get; set; }
  // some props
} 
```

# php - 用 jquery 和 ajax 解析 php

> ID：15620790
> 
> 赞同：0
> 
> 时间：2013-03-25T17:10:54.487
> 
> 标签：php, jquery

我正在尝试在 PHP 中解析日期。我复制了几个示例的一部分，但它不起作用。我想做的是：我有一个 PHP 文件，它接收一个变量“parttype”并运行一个查询。

```
<?php

$parttype = $_POST['parttype'];
 echo "$parttype";              

$conn = mysqli_connect("127.0.0.1", "root", "") or die ("No connection");
mysqli_select_db($conn , "shop") or die ("db will not open");

$query = "SELECT * from parts where parttype='$parttype'";
$result = mysqli_query($conn, $query) or die("Invalid query");

echo '<table border="1" align ="center"><tr><th>Id</th><th>Name</th><th>Price</th><th>InStock</th><th>Description</th><th>SUpplier</th><th>Quantity</th><th>Remove</th></tr>';

while($row = mysqli_fetch_array($result))
  {
  echo "<tr><form action='ppcomppartout.php' method='post'><td><input type='hidden' name='partid' value='$row[0]'>" . $row[0] . "</td><td>" . $row[1] . "</td><td>" . $row[2] . "</td><td>" . $row[3] . "</td><td>" . $row[5] . "</td><td>" . $row[6] . "</td>
  <td><input type='text' name='qtty' placeholder='0'></td><td>Buy <input type='submit'></td>
  </form></tr>";
  }  

echo "</table>";

mysqli_close($conn);                                       

 ?> 
```

然后在 index.php 中，我有一个`function get()`将变量发布到 data.php 和另一个不起作用的函数 - `function parse(data)`。我最终插入了一个按钮来获得一些结果，但我希望在更改选择框上的值后立即显示结果。

```
 <html>
    <head>

    <script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>

<script type="text/javascript">

function get() {
    $.post("data.php", {parttype: form.parttype.value },
    function(output) {
        $("#output").html(output).show();
    });
    }

function parse(data){
 $('#output').append('<select>');

 $("select").on("change", function(evt) 
        {
          line_record( $("select option:selected").index(),data)
        });

}       

 </script>
</head>
<body>

 <form name="form">

     <select name="parttype" style="width: 117px">
<?php

$con = mysqli_connect("127.0.0.1", "root", "") or die ("No connection");
mysqli_select_db($con , "shop") or die ("db will not open");

$query = "SELECT distinct parttype from parts";
$result = mysqli_query($con, $query) or die("Invalid query");

while($rows = mysqli_fetch_array($result)) {
   echo "<option value=\"" . $rows[0] . "\">" . $rows[0] . "   </option>";
}
echo "</select>";

mysqli_close($con);
?>
     </select>

<!--<input type="submit" value="OK!!"/>-->
 </form>
<!--<input type="text" name="parttype">-->

<!--<input type="button" value="Get" onClick="get();" >-->
<input type="submit" value="Get" onClick="get();" >

 </form> 

  <div id="output"></div>

</body>
</html> 
```

有人可以帮忙吗？我做错了什么？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T17:26:55.173

你没有具体说明问题是什么，但你应该一步一步来。

`get()`您将遇到的第一个问题可能是在页面加载时调用您的函数。您发送到 php 脚本的数据是：

```
{parttype: form.parttype.value } 
```

where`form.parttype.value`似乎是未定义的。如果要发送表单的值，可以将其更改为：

```
$("form").serialize() 
```

您还应该检查您的 html 源代码，因为似乎有多个结束`form`标记。

**注意：**您`$_POST`在 sql 查询中转储变量，没有任何验证或转义。您应该真正切换到准备好的语句，因为您的代码容易受到 sql 注入的影响。

# debugging - Kohana 3.2.0，日志记录工作不正确 - INFO 为 DEBUG，ALERT 为 CRITICAL

> ID：15620804
> 
> 赞同：1
> 
> 时间：2013-03-25T17:11:48.730
> 
> 标签：debugging, kohana

我使用的是 Kohana 3.2.0，并且在使用如下所示的代码登录时，写入日志文件的输出与预期不同。内容写入正确，但日志记录“级别”错误。这适用于除“INFO”和“ALERT”之外的所有日志记录级别。对于 INFO，它写为 DEBUG，对于 ALERT，它写为 CRITICAL。

在控制器中 -

> Log::instance()->add(Log::INFO, '找到的匹配是'.$matches[0]);

在日志文件中 -

> 2013-03-25 11:48:26 --- 调试：找到的匹配是水果

\system\classes\kohana\log.php 具有以下值。

```
 >const EMERGENCY = LOG_EMERG;    // 0
>const ALERT     = LOG_ALERT;    // 1
>const CRITICAL  = LOG_CRIT;     // 2
>const ERROR     = LOG_ERR;      // 3
>const WARNING   = LOG_WARNING;  // 4
>const NOTICE    = LOG_NOTICE;   // 5
>const INFO      = LOG_INFO;     // 6
>const DEBUG     = LOG_DEBUG;    // 7
>const STRACE    = 8; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T18:40:27.783

You're most likely seeing this behaviour on Windows. This is because Windows has less log levels - see [PHP bug #18090](https://bugs.php.net/bug.php?id=18090).

The log levels on Windows are mapped as following:

```
LOG_EMERG   => critical
LOG_ALERT   => critical
LOG_CRIT    => critical
LOG_ERR     => error
LOG_WARNING => warning
LOG_NOTICE  => debug
LOG_INFO    => debug
LOG_DEBUG   => debug 
```

# android - 如何使用复选框从手机中选择多个联系人

> ID：15620805
> 
> 赞同：6
> 
> 时间：2013-03-25T17:11:52.917
> 
> 标签：android, android-contacts

我正在尝试以编程方式选择电话中可用的联系人，并且我正在使用以下代码

```
 Intent intent = new Intent(Intent.ACTION_GET_CONTENT);
        intent.setType(ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE);
        startActivityForResult(intent, 1); 
```

但是问题是如何使用联系人页面中的复选框一次选择多个联系人？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-25T18:04:49.547

您必须以编程方式阅读联系人并将它们显示`ListView`在您的`Activity`. 在项目中使用`CheckBox`s`ListView`并允许选择多个项目。为 a 找到一个简单的示例/教程，`ListView`然后从那里开始。

有几个原因可以说明为什么最好创建自定义`ListView`而不是使用`Intent(Intent.ACTION_GET_CONTENT);`：

1.  可能无法按照您的要求选择倍数。
2.  即使您找到了一种选择倍数的方法，它在每个操作系统版本和设备上都会有所不同，并且可能不适用于所有这些。
3.  如果在任何可以处理的设备上安装了多个应用程序`ACTION_GET_CONTENT`，则将向用户呈现一个选择器，他必须选择其中一个。用户的选择可能不支持选择多个联系人。

* * *

这是一个读取系统联系人的示例：

```
Cursor cursor = getContentResolver().query(ContactsContract.Contacts.CONTENT_URI,null, null, null, null); 
while (cursor.moveToNext()) {
    String contactId = cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts._ID));
    String hasPhone = cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER)); 
    String name = cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
    if("1".equals(hasPhone) || Boolean.parseBoolean(hasPhone)) { 
        // You know it has a number so now query it like this
        Cursor phones = myActivity.getContentResolver().query( ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = "+ contactId, null, null); 
        while (phones.moveToNext()) { 
            String phoneNumber = phones.getString(phones.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
            int itype = phones.getInt(phones.getColumnIndex(ContactsContract.CommonDataKinds.Phone.TYPE));

            final boolean isMobile =
                itype == ContactsContract.CommonDataKinds.Phone.TYPE_MOBILE ||
                itype == ContactsContract.CommonDataKinds.Phone.TYPE_WORK_MOBILE;

            // Do something here with 'phoneNumber' such as saving into 
            // the List or Array that will be used in your 'ListView'.

        } 
        phones.close();
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-18T17:37:10.627

```
 public static final int REQUEST_CODE_PICK_CONTACT = 1;
   public static final int  MAX_PICK_CONTACT= 10;

   private void launchMultiplePhonePicker() {

        Intent phonebookIntent = new Intent("intent.action.INTERACTION_TOPMENU");
        phonebookIntent.putExtra("additional", "phone-multi");
        phonebookIntent.putExtra("maxRecipientCount", MAX_PICK_CONTACT);
        phonebookIntent.putExtra("FromMMS", true);
        startActivityForResult(phonebookIntent, REQUEST_CODE_PICK_CONTACT);

     }

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {

    if(resultCode==RESULT_OK)
    {

    if(requestCode == REQUEST_CODE_PICK_CONTACT  )
    {

        Bundle bundle =  data.getExtras();

        String result= bundle.getString("result");
        ArrayList<String> contacts = bundle.getStringArrayList("result");

        Log.i(TAG, "launchMultiplePhonePicker bundle.toString()= " + contactsPick.toString() );

        }
    }

    super.onActivityResult(requestCode, resultCode, data);
} 
```

# ios - 在不使用 center 属性的情况下移动 UIImageView

> ID：15620807
> 
> 赞同：0
> 
> 时间：2013-03-25T17:12:05.177
> 
> 标签：ios, objective-c, cocoa, touchesmoved

基本上我只想触摸图像并用我的手指在屏幕上移动而不使用 theImage.center = touchPosition 我不想让中心与我的手指对齐。我想从我触摸的任何点移动图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T17:24:27.943

@richard-j-ross-iii 在评论中暗示的处理此问题的标准方法是在拖动开始时保存视图中心和触摸位置之间的差异，然后在拖动进行时保持该差异。在您的`touchesBegan:withEvent:`方法中保存偏移量，例如：

```
_dragOffsetFromCenter = CGSizeMake(touchLocationInImageView.x - centerOfImageView.x, touchLocationInImageView.y - centerOfImageView.y); 
```

然后`touchesMoved:withEvent:`您可以保持相同的偏移量，例如：

```
myImageView.center = CGPointMake(touchLocation.x - _dragOffsetFromCenter.x, touchLocation.y - _dragOffsetFromCenter.y); 
```

# css - Safari 问题 - Flash 图像从容器扩展

> ID：15620811
> 
> 赞同：1
> 
> 时间：2013-03-25T17:12:16.463
> 
> 标签：css, safari, flash, margin

我的网站上有 flash 元素，它只在 Safari 浏览器上表现得很奇怪，它从容器中扩展并破坏了周围的一切。我不知道发生了什么， http: [//itmjobs.ro/lidl/eu.html](http://itmjobs.ro/lidl/eu.html) 有人经历过这个并且知道解决方案吗？

# javascript - 执行脚本的位置

> ID：15620814
> 
> 赞同：2
> 
> 时间：2013-03-25T17:12:23.167
> 
> 标签：javascript, jquery, ajax, path, include

这是一个愚蠢的问题，但我不确定......如果我有一个运行 ajax jquery 的外部 js 文件调用我在文件中指定的 url，必须考虑相对于 js(fun.js) 的位置或父文件（index.html）的位置？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T17:13:28.780

相对 URL 总是相对于文档，而不是导入的 js 文件。

对于大多数问题*，您可以考虑导入的 js 文件，就好像它们在您拥有该`script`元素的位置包含在您的文档中一样。

*加载时间*和文件末尾自动关闭语句**存在差异。`"use strict"`*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T17:18:20.857

js文件的位置无关紧要。您通过 ajax 调用哪个 url 很重要。

# android - 使活动在后台运行

> ID：15620815
> 
> 赞同：9
> 
> 时间：2013-03-25T17:12:24.467
> 
> 标签：android, service, android-service

我是 android 新手，我不太了解服务。我有一个带有 UI 的活动类，当我单击后退按钮时，我想让这个活动类在后台运行。如何让我的活动像服务一样在后台运行，请帮助我..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T17:21:21.723

你不能真正`Activity`在后台运行！当一个活动不在前台时，它会到达`onStop`然后系统可以终止它，通过`onDestroy`方法释放资源！请参阅[活动生命周期](http://developer.android.com/guide/components/activities.html#Lifecycle)

为了在后台运行，您需要创建一个`Service`或`IntentService`

[在此处](http://developer.android.com/guide/components/services.html)和[此处查看](http://developer.android.com/reference/android/app/Service.html)有关服务的 android javadoc或[`IntentService`](http://developer.android.com/reference/android/app/IntentService.html)

这是一个第三方[Android服务教程](http://www.vogella.com/articles/AndroidServices/article.html)

**编辑**：您可能还需要在您的服务和您的活动之间进行通信，以便您可以通过它：[示例：使用消息传递的活动和服务之间的通信](https://stackoverflow.com/q/4300291/944070)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-25T18:43:46.600

如果您只是希望您的活动在后面运行，请尝试使用

```
moveTaskToBack(true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T17:27:16.107

似乎您想在退出时在后台运行活动。但是，除非在前台，否则无法运行活动。

为了实现你想要的，在 onPause() 中，你应该启动一个服务来继续活动中的工作。单击后退按钮时将调用 onPause()。在 onPause 中，只需保存当前状态，并将作业转移到服务。当您的活动不在前台时，该服务将在后台运行。

当您稍后返回您的活动时，请在 onResume() 中执行一些操作以再次将服务的工作转移到您的活动中。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-25T17:14:02.477

您应该阅读有关线程的开发人员指南：http: [//developer.android.com/guide/components/processes-and-threads.html](http://developer.android.com/guide/components/processes-and-threads.html)

特别是页面中的函数 doInBackground() 示例：

```
public void onClick(View v) {
    new DownloadImageTask().execute("http://example.com/image.png");
}

private class DownloadImageTask extends AsyncTask<String, Void, Bitmap> {
    /** The system calls this to perform work in a worker thread and
      * delivers it the parameters given to AsyncTask.execute() */
    protected Bitmap doInBackground(String... urls) {
    return loadImageFromNetwork(urls[0]);
}

    /** The system calls this to perform work in the UI thread and delivers
      * the result from doInBackground() */
    protected void onPostExecute(Bitmap result) {
        mImageView.setImageBitmap(result);
    }
} 
```

# android - Android：有什么办法可以解决 HIPRI 连接类型超时？

> ID：15620818
> 
> 赞同：0
> 
> 时间：2013-03-25T17:12:29.057
> 
> 标签：android, networking, telephony

您可以使用 TYPE_MOBILE_HIPRI 网络类型来强制连接到特定主机以通过移动连接而不是 wifi，如 Rainbowbreeze 在此处的回答中所述：[如何在 Android 应用程序中使用 3G 连接而不是 Wi-fi？](https://stackoverflow.com/questions/2513713/how-to-use-3g-connection-in-android-application-instead-of-wi-fi/4756630#4756630). 不幸的是，系统对这些连接强制超时，这对我的应用程序来说太短了，这意味着它对我来说实际上是无用的。有什么方法可以取消这个超时，或者有其他方法可以达到同样的效果吗？如果有帮助，我很乐意将我的应用程序限制为仅在有根手机上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-06T05:58:10.757

我通过每 50 秒刷新一次 hipri 连接来解决这个问题。hipri 连接的系统超时为 1 分钟。所以每 50 秒后调用“enableHipri”。

# c - 无法为“Unix 网络编程：进程间通信”构建源代码

> ID：15620829
> 
> 赞同：1
> 
> 时间：2013-03-25T17:12:50.340
> 
> 标签：c, gcc

我正在使用 Linux Mint 13，并且正在研究“Unix 网络编程：进程间通信”一书。我下载了这本书的源代码 - [http://www.kohala.com/start/unpv22e/unpv22e.html](http://www.kohala.com/start/unpv22e/unpv22e.html) - 并按照说明进行操作。

首先，我在基本目录中运行 ./configure

然后，我进入 lib 目录并运行 make。这给出了以下错误 -

```
gcc -c  "/home/linux/Code/c/unix_network_programming/main.c" -g  -o ./Debug/main.o "-I." "-I." 
In file included from /usr/lib/gcc/i686-linux-gnu/4.6/include/stdint.h:3:0,
                 from /usr/include/netinet/in.h:24,
                 from /usr/include/rpc/types.h:91,
                 from /usr/include/rpc/rpc.h:38,
                 from /home/linux/Code/c/unix_network_programming/unpipc.h:115,
                 from /home/linux/Code/c/unix_network_programming/main.c:2:
/usr/include/stdint.h:49:24: error: duplicate ‘unsigned’
/usr/include/stdint.h:49:24: error: two or more data types in declaration specifiers
/usr/include/stdint.h:50:28: error: duplicate ‘unsigned’
/usr/include/stdint.h:50:28: error: duplicate ‘short’
/usr/include/stdint.h:52:23: error: duplicate ‘unsigned’
/usr/include/stdint.h:52:23: error: two or more data types in declaration specifiers 
```

这是给出错误的文件 -

```
#ifndef _GCC_WRAP_STDINT_H
#if __STDC_HOSTED__
# include_next <stdint.h>
#else
# include "stdint-gcc.h"
#endif
#define _GCC_WRAP_STDINT_H
#endif 
```

由于我很少有 C 经验，因此有关如何解决此错误的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T17:48:25.783

应用以下轻微讨厌的补丁：

```
diff -U 3 ./aclocal.m4 ./aclocal.m4
--- ./aclocal.m4       1997-10-10 22:45:46.000000000 +0100
+++ ./aclocal.m4        2013-03-25 17:35:22.287397177 +0000
@@ -31,6 +31,7 @@
                AC_TRY_COMPILE(
 [
 #include       "confdefs.h"    /* the header built by configure so far */
+#include <stdint.h>
 #ifdef HAVE_SYS_TYPES_H
 #  include     <sys/types.h>
 #endif
diff -U 3 ../unpv22e/config.h.in ./config.h.in
--- ./config.h.in      1998-06-10 18:26:41.000000000 +0100
+++ ./config.h.in       2013-03-25 17:42:18.788139903 +0000
@@ -2,6 +2,7 @@
 #undef CPU_VENDOR_OS

 /* *INDENT-OFF* */
+#undef HAVE_STDINT_H
 #undef HAVE_DOOR_H                             /* <door.h> */
 #undef HAVE_MQUEUE_H                           /* <mqueue.h> */
 #undef HAVE_POLL_H                             /* <poll.h> */
@@ -49,6 +50,9 @@
 #undef HAVE_DEV_ZERO

 /* Define the following to the appropriate datatype, if necessary */
+#ifdef HAVE_STDINT_H
+#include <stdint.h>
+#endif
 #undef int8_t                          /* <sys/types.h> */
 #undef int16_t                         /* <sys/types.h> */
 #undef int32_t                         /* <sys/types.h> */
diff -U 3 ../unpv22e/configure.in ./configure.in
--- ./configure.in     1998-06-06 22:42:29.000000000 +0100
+++ ./configure.in      2013-03-25 17:38:14.555324559 +0000
@@ -105,7 +105,7 @@
 dnl but used in "lib/wrapunix.c".
 dnl
 AC_HEADER_STDC
-AC_CHECK_HEADERS(sys/types.h sys/time.h time.h errno.h fcntl.h limits.h signal.h stdio.h stdlib.h string.h sys/stat.h unistd.h sys/wait.h sys/ipc.h sys/msg.h sys/sem.h sys/shm.h mqueue.h semaphore.h sys/mman.h sys/select.h poll.h stropts.h strings.h sys/ioctl.h sys/filio.h pthread.h door.h rpc/rpc.h sys/sysctl.h)
+AC_CHECK_HEADERS(stdint.h sys/types.h sys/time.h time.h errno.h fcntl.h limits.h signal.h stdio.h stdlib.h string.h sys/stat.h unistd.h sys/wait.h sys/ipc.h sys/msg.h sys/sem.h sys/shm.h mqueue.h semaphore.h sys/mman.h sys/select.h poll.h stropts.h strings.h sys/ioctl.h sys/filio.h pthread.h door.h rpc/rpc.h sys/sysctl.h)

 dnl ##################################################################
 dnl Checks for typedefs. 
```

然后运行 ​​autoconf（使用 autoconf2.13 而不是较新的版本），删除 config.cache，然后重试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-25T05:14:22.973

**只需在config.h 中**注释掉这些行（`./configure`先执行）：

```
#define uint8_t unsigned char         /* <sys/types.h> */
#define uint16_t unsigned short       /* <sys/types.h> */
#define uint32_t unsigned int         /* <sys/types.h> */ 
```

这个对我有用：）。

# c++ - C ++如何在窗口中找到2个点之间的向量？

> ID：15620830
> 
> 赞同：0
> 
> 时间：2013-03-25T17:12:50.390
> 
> 标签：c++, math

我现在正在做一个项目，我需要创建一个函数来找到子弹的矢量方向。我当前的代码已关闭，我似乎无法找到原因。

```
float AngleX = pMouse->X() - This->DirectionX();
float AngleY = pMouse->Y() - This->DirectionY(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T17:16:14.410

从 (x, y) 偏移量中找到角度的最佳函数是`atan2(dy, dx)`，其中`dy`和`dx`是每个方向上的*增量*分量。

请注意，结果将以弧度为单位，并且在某些图形系统上，`y`轴向下而不是向上！

的特别好的功能是它总是会为您提供单次或操作无法获得`atan2`的全方位结果。生成的角度将是给定线相对于正 X 轴的角度，逆时针方向。`-π .. π``acos``asin`

# java - 在 NetBeans 上打开项目这种文件格式

> ID：15620834
> 
> 赞同：-1
> 
> 时间：2013-03-25T17:13:10.190
> 
> 标签：java, netbeans

我有一个 EE 项目，项目的格式是文件。我在 NetBeans 上看到其他项目 ---> openProject 但它是不同的 . 它是一个文件，它有 src 文件，nb 项目文件。我看不到 Netbeans ----> 打开项目。我怎么能这样？谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T17:24:11.530

***（没有真正的答案，但重新提出了你的问题。）***

包含子目录`src`和可能`.nb`（=NetBeans）的目录形成一个 NetBeans 项目。如果有文件`pom.xml`，则项目使用**maven**作为构建基础设施。

现在您似乎有 NetBeans 项目，但它没有被识别为这样。您可以尝试安装最新的 NetBeans IDE。或检查文件内文件名中的特殊字符。也许通过在 USB 记忆棒上复制项目，文件名被转换为大写。**也许您仍然需要安装 JavaEE 插件。**（牵强，不太可能。）

# java - Gson.fromJson() - 如果类型不同则抛出异常

> ID：15620835
> 
> 赞同：14
> 
> 时间：2013-03-25T17:13:16.967
> 
> 标签：java, gson

我创建了 REST 服务，`ExceptionEntity`如果出现问题，它会返回序列化的类。

如果应该反序列化的 json`Gson.fromJson()`类型不同，我想抛出一些异常。例如，我有这个应该反序列化的字符串（my.ExceptionEntity.class）：

```
{"exceptionId":2,"message":"Room aaaa already exists."} 
```

但我使用`Room`类作为这个序列化字符串的类型：

```
String json = "{\"exceptionId\":2,\"message\":\"Room aaaa already exists.\"}";
Room r = gson.fromJson(json, Room.class);
// as a result r==null but I want to throw Exception; how? 
```

**[编辑]** 我已经对此进行了测试，但它不起作用：

```
try {
    return g.fromJson(roomJson, new TypeToken<Room>(){}.getType());
    // this also doesn't work
    // return g.fromJson(roomJson, Room.class);
} catch (JsonSyntaxException e) {
    pepuch.multiplayergame.entity.Exception ex = g.fromJson(roomJson, pepuch.multiplayergame.entity.Exception.class);
    throw ExceptionController.toGameServerException(ex);
} catch (JsonParseException e) {
    pepuch.multiplayergame.entity.Exception ex = g.fromJson(roomJson, pepuch.multiplayergame.entity.Exception.class);
    throw ExceptionController.toGameServerException(ex);
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-25T17:15:47.137

根据 Gson[文档](http://static.javadoc.io/com.google.code.gson/gson/2.8.0/com/google/gson/Gson.html#fromJson-java.lang.String-java.lang.reflect.Type-)，如果无法根据您提供的类型反序列化 json 流，则会引发异常：

> 抛出： `JsonParseException`- 如果 json 不是 classOfT 类型对象的有效表示

但这是一个未经检查的异常，如果您想提供自定义异常，您应该尝试使用

```
try {
  Room r = gson.fromJson(json, Room.class);
}
catch (JsonParseException e) {
  throw new YourException();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-03T13:19:21.117

尝试先将其转换为 Json，然后将其转换为您想要的对象类型。

```
val newJson = Gson().toJson(json) 
```

val r = gson.fromJson(json, Room.class)

# ios - Apple iOS 平台上的 LLVM 字节码

> ID：15620840
> 
> 赞同：1
> 
> 时间：2013-03-25T17:13:42.147
> 
> 标签：ios, llvm, bytecode, native-code

是否有文档 Apple 如何在 iOS 平台（iPhone 和/或 iPad）上处理 LLVM 字节码，或者他们是否使用本机代码？非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T17:15:40.417

LLVM 编译为 iOS 的本机代码。

# asp.net - 如何将事件处理程序添加到列表视图中的自定义按钮？

> ID：15620847
> 
> 赞同：0
> 
> 时间：2013-03-25T17:14:12.933
> 
> 标签：asp.net, listview, runtime, calculated-columns

这是我的标记

```
<%@ Page Title="Daily Expenses" Language="C#" MasterPageFile="~/MasterPage.master" AutoEventWireup="true" CodeFile="Daily Expenses.aspx.cs" Inherits="Daily_Expenses" %> 
```

函数 calendar_datechange() { __doPostBack('txtCalendar', 'txtCalendar_TextChanged'); }

```
 function Calculate_Difference() {
        alert("Hello");
    }
</script>
<asp:ToolkitScriptManager ID="AjaxScript" runat="server"></asp:ToolkitScriptManager>
&nbsp;    &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp;  &nbsp; 
<asp:TextBox ID="txtCalendar" runat="server" 
    ontextchanged="txtCalendar_TextChanged"></asp:TextBox>

<%--<asp:PopupControlExtender ID="txtCalendar_PopupControlExtender" runat="server" 
    DynamicServicePath="" Enabled="True" ExtenderControlID="" PopupControlID="Panel1"
    TargetControlID="txtCalendar">
</asp:PopupControlExtender>

<asp:Panel ID="Panel1" runat="server">
<h2>Hello There</h2>
</asp:Panel>--%>
<asp:CalendarExtender ID="CalendarControl"  runat="server" OnClientDateSelectionChanged="calendar_datechange" TargetControlID="txtCalendar" PopupButtonID="CalendarButton">
</asp:CalendarExtender>
<%--<ajaxToolkit:CalendarExtender ID="CalendarControl" runat="server" OnClientDateSelectionChanged="calendar_datechange" TargetControlID="txtCalendar" PopupButtonID="CalendarButton"></ajaxToolkit:CalendarExtender>--%>
<asp:Button ID="CalendarButton" runat="server" Text="Calendar" />
<br />
<br />
<br />
<asp:ListView ID="ListView1" runat="server" DataKeyNames="SNO" 
    DataSourceID="SqlDataSource1" InsertItemPosition="LastItem">
    <AlternatingItemTemplate>
        <li style="background-color: #FFF8DC;">SNO:
            <asp:Label ID="SNOLabel" runat="server" Text='<%# Eval("SNO") %>' />
            <br />
            Taxinreal:
            <asp:Label ID="TaxinrealLabel" runat="server" Text='<%# Eval("Taxinreal") %>' />
            <br />
            Taxinpercent:
            <asp:Label ID="TaxinpercentLabel" runat="server" 
                Text='<%# Eval("Taxinpercent") %>' />
            <br />
            Amount:
            <asp:Label ID="AmountLabel" runat="server" Text='<%# Eval("Amount") %>' />
            <br />
            NetAmount:
            <asp:Label ID="NetAmountLabel" runat="server" Text='<%# Eval("NetAmount") %>' />
            <br />
            DateTakenPlace:
            <asp:Label ID="DateTakenPlaceLabel" runat="server" 
                Text='<%# Eval("DateTakenPlace") %>' />
            <br />
            <asp:Button ID="EditButton" runat="server" CommandName="Edit" Text="Edit" />
            <asp:Button ID="DeleteButton" runat="server" CommandName="Delete" 
                Text="Delete" />
         <asp:Button ID="Differencebutton" runat="server"  Text="Calculate Difference" OnClientClick="Calculate_Difference" />
        </li>
    </AlternatingItemTemplate>
    <EditItemTemplate>
        <li style="background-color: #008A8C;color: #FFFFFF;">SNO:
            <asp:Label ID="SNOLabel1" runat="server" Text='<%# Eval("SNO") %>' />
            <br />
            Taxinreal:
            <asp:TextBox ID="TaxinrealTextBox" runat="server" 
                Text='<%# Bind("Taxinreal") %>' />
            <br />
            Taxinpercent:
            <asp:TextBox ID="TaxinpercentTextBox" runat="server" 
                Text='<%# Bind("Taxinpercent") %>' />
            <br />
            Amount:
            <asp:TextBox ID="AmountTextBox" runat="server" Text='<%# Bind("Amount") %>' />
            <br />
            NetAmount:
            <asp:TextBox ID="NetAmountTextBox" runat="server" 
                Text='<%# Bind("NetAmount") %>' />
            <br />
            DateTakenPlace:
            <asp:TextBox ID="DateTakenPlaceTextBox" runat="server" 
                Text='<%# Bind("DateTakenPlace") %>' />
            <br />
            <asp:Button ID="UpdateButton" runat="server" CommandName="Update" 
                Text="Update" />
            <asp:Button ID="CancelButton" runat="server" CommandName="Cancel" 
                Text="Cancel" />
                <asp:Button ID="Differencebutton" runat="server" CommandName="Difference" OnClientClick="Calculate_Difference" Text="Calculate Difference" />
        </li>
    </EditItemTemplate>
    <EmptyDataTemplate>
        No data was returned.
    </EmptyDataTemplate>
    <InsertItemTemplate>
        <li style="">Taxinreal:
            <asp:TextBox ID="TaxinrealTextBox" runat="server" 
                Text='<%# Bind("Taxinreal") %>' />
            <br />
            Taxinpercent:
            <asp:TextBox ID="TaxinpercentTextBox" runat="server" 
                Text='<%# Bind("Taxinpercent") %>' />
            <br />
            Amount:
            <asp:TextBox ID="AmountTextBox" runat="server" Text='<%# Bind("Amount") %>' />
            <br />
            NetAmount:
            <asp:TextBox ID="NetAmountTextBox" runat="server" 
                Text='<%# Bind("NetAmount") %>' />
            <br />
            DateTakenPlace:
            <asp:TextBox ID="DateTakenPlaceTextBox" runat="server" 
                Text='<%# Bind("DateTakenPlace") %>' />
            <br />
            <asp:Button ID="InsertButton" runat="server" CommandName="Insert" 
                Text="Insert" />
            <asp:Button ID="CancelButton" runat="server" CommandName="Cancel" 
                Text="Clear" />
         <asp:Button ID="Differencebutton" runat="server" CommandName="Difference" OnClientClick="Calculate_Difference" Text="Calculate Difference" />
        </li>
    </InsertItemTemplate>
    <ItemSeparatorTemplate>
        <br />
    </ItemSeparatorTemplate>
    <ItemTemplate>
        <li style="background-color: #DCDCDC;color: #000000;">SNO:
            <asp:Label ID="SNOLabel" runat="server" Text='<%# Eval("SNO") %>' />
            <br />
            Taxinreal:
            <asp:Label ID="TaxinrealLabel" runat="server" Text='<%# Eval("Taxinreal") %>' />
            <br />
            Taxinpercent:
            <asp:Label ID="TaxinpercentLabel" runat="server" 
                Text='<%# Eval("Taxinpercent") %>' />
            <br />
            Amount:
            <asp:Label ID="AmountLabel" runat="server" Text='<%# Eval("Amount") %>' />
            <br />
            NetAmount:
            <asp:Label ID="NetAmountLabel" runat="server" Text='<%# Eval("NetAmount") %>' />
            <br />
            DateTakenPlace:
            <asp:Label ID="DateTakenPlaceLabel" runat="server" 
                Text='<%# Eval("DateTakenPlace") %>' />
            <br />
            <asp:Button ID="EditButton" runat="server" CommandName="Edit" Text="Edit" />
            <asp:Button ID="DeleteButton" runat="server" CommandName="Delete" 
                Text="Delete" />
          <asp:Button ID="Differencebutton" runat="server" CommandName="Difference" OnClientClick="Calculate_Difference" Text="Calculate Difference" />
        </li>
    </ItemTemplate>
    <LayoutTemplate>
        <ul ID="itemPlaceholderContainer" runat="server" 
            style="font-family: Verdana, Arial, Helvetica, sans-serif;">
            <li runat="server" id="itemPlaceholder" />
        </ul>
        <div style="text-align: center;background-color: #CCCCCC;font-family: Verdana, Arial, Helvetica, sans-serif;color: #000000;">
            <asp:DataPager ID="DataPager1" runat="server">
                <Fields>
                    <asp:NextPreviousPagerField ButtonType="Button" ShowFirstPageButton="True" 
                        ShowLastPageButton="True" />
                </Fields>
            </asp:DataPager>
        </div>
    </LayoutTemplate>
    <SelectedItemTemplate>
        <li style="background-color: #008A8C;font-weight: bold;color: #FFFFFF;">SNO:
            <asp:Label ID="SNOLabel" runat="server" Text='<%# Eval("SNO") %>' />
            <br />
            Taxinreal:
            <asp:Label ID="TaxinrealLabel" runat="server" Text='<%# Eval("Taxinreal") %>' />
            <br />
            Taxinpercent:
            <asp:Label ID="TaxinpercentLabel" runat="server" 
                Text='<%# Eval("Taxinpercent") %>' />
            <br />
            Amount:
            <asp:Label ID="AmountLabel" runat="server" Text='<%# Eval("Amount") %>' />
            <br />
            NetAmount:
            <asp:Label ID="NetAmountLabel" runat="server" Text='<%# Eval("NetAmount") %>' />
            <br />
            DateTakenPlace:
            <asp:Label ID="DateTakenPlaceLabel" runat="server" 
                Text='<%# Eval("DateTakenPlace") %>' />
            <br />
            <asp:Button ID="EditButton" runat="server" CommandName="Edit" Text="Edit" />
            <asp:Button ID="DeleteButton" runat="server" CommandName="Delete" 
                Text="Delete" />
          <asp:Button ID="Differencebutton" runat="server" CommandName="Difference" OnClientClick="Calculate_Difference" Text="Calculate Difference" />
        </li>
    </SelectedItemTemplate>
</asp:ListView>
<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
    ConnectionString="<%$ ConnectionStrings:ConnString %>" 
    DeleteCommand="DELETE FROM [tblexpenses] WHERE [SNO] = @SNO" 
    InsertCommand="INSERT INTO [tblexpenses] ([Taxinreal], [Taxinpercent], [Amount], [NetAmount], [DateTakenPlace]) VALUES (@Taxinreal, @Taxinpercent, @Amount, @NetAmount, @DateTakenPlace)" 
    SelectCommand="SELECT * FROM [tblexpenses] WHERE ([DateTakenPlace] = @DateTakenPlace2)" 
    UpdateCommand="UPDATE [tblexpenses] SET [Taxinreal] = @Taxinreal, [Taxinpercent] = @Taxinpercent, [Amount] = @Amount, [NetAmount] = @NetAmount, [DateTakenPlace] = @DateTakenPlace WHERE [SNO] = @SNO">
    <DeleteParameters>
        <asp:Parameter Name="SNO" Type="Int32" />
    </DeleteParameters>
    <InsertParameters>
        <asp:Parameter Name="Taxinreal" Type="Double" />
        <asp:Parameter Name="Taxinpercent" Type="Decimal" />
        <asp:Parameter Name="Amount" Type="Double" />
        <asp:Parameter Name="NetAmount" Type="Int32"/>
        <asp:Parameter DbType="Date" Name="DateTakenPlace" />
    </InsertParameters>
    <SelectParameters>
        <asp:ControlParameter ControlID="txtCalendar" DbType="Date" 
            Name="DateTakenPlace2" PropertyName="Text" />
    </SelectParameters>
    <UpdateParameters>
        <asp:Parameter Name="Taxinreal" Type="Double" />
        <asp:Parameter Name="Taxinpercent" Type="Decimal" />
        <asp:Parameter Name="Amount" Type="Double" />
        <asp:Parameter Name="NetAmount" Type="Int32" />
        <asp:Parameter DbType="Date" Name="DateTakenPlace" />
        <asp:Parameter Name="SNO" Type="Int32" />
    </UpdateParameters>
</asp:SqlDataSource>
<br />
<br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<br />
<br />
<br /> 
```

我的数据库中有一个表**tblexpense**。我有名为**Taxinreal**，**Taxinpercent**，* *Amount* * **NetAmount**的列。* *NetAmount* * 是计算列，等于* *(Amount-Taxinreal-Taxinpercent)* * 现在我想要的是在我的 aspx 页面运行时用户必须能够插入**amount,tax,taxinpercentage**和根据用户提供的值**NetAmount**必须在运行时计算（Netamount=Amount-Tax-Taxpercentage）并插入到数据库中。为此，我有一个差异按钮，它应该执行所需的数学运算。我遇到的问题是我正在使用列表视图。现在添加一个新按钮很简单，但是我如何在差异按钮的单击事件中执行所需的数学运算，以便当列表视图处于更新模式时，用户可以更改**taxinreal ，taxinpercent**的值并在运行时获得结果，结果是在数据库中更新？？？我急需解决方案（PS 我只需要使用 Listview）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T19:45:12.723

您想使用 ListView 的 OnItemCommand。

[这是一个示例。](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listview.itemcommand.aspx)

如果要执行计算，您需要在代码后面插入/更新数据库（使用 ADO.Net、实体框架或 linq-to-sql）。

# knockout.js - 优化我的锚链接的淘汰赛绑定

> ID：15620854
> 
> 赞同：1
> 
> 时间：2013-03-25T17:14:47.797
> 
> 标签：knockout.js

我有以下淘汰赛代码：

```
<!-- ko if: isActive -->
<a data-bind="attr: { href: hash }, html: name" class="bg-color-blue fg-color-white"></a>
<!-- /ko -->

<!-- ko ifnot: isActive -->
<a data-bind="attr: { href: hash }, html: name" class="bg-color-grayLight"></a>
<!-- /ko --> 
```

如您所见，这是完全相同的锚点，只是“类”不同。

我想知道是否可以简化我的代码以避免重复这个锚点？是否可以有一个锚并在里面设置条件？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T17:23:34.730

使用[`css`绑定](http://knockoutjs.com/documentation/css-binding.html)：

```
<a data-bind="attr: { href: hash }, 
              html: name, 
              css: { 'bg-color-grayLight': !isActive(), 
                     'bg-color-blue fg-color-white': isActive() }">
</a> 
```

**示例：http:** [//jsfiddle.net/CCNtR/16/](http://jsfiddle.net/CCNtR/16/)

或者，您可以使用带有`attr`绑定的条件语句并设置整个类属性：

```
<a data-bind="attr: { href: hash, 'class': isActive() ? 
                  'bg-color-blue fg-color-white' : 'bg-color-grayLight' }, 
              html: name">
</a> 
```

**示例：http:** [//jsfiddle.net/CCNtR/17/](http://jsfiddle.net/CCNtR/17/)

当然，第二条路线的缺点是在解析绑定时将删除任何其他类。我会坚持第一种方法。

# html - HTML 5 Canvas jCanvas/KineticJS 当图像可拖动时，画布/舞台对 iPad 上的点击/触摸无响应

> ID：15620855
> 
> 赞同：0
> 
> 时间：2013-03-25T17:14:53.043
> 
> 标签：html, ipad, canvas, kineticjs, jcanvas

我用 jCanvas 和 KineticJS 都试过了。当添加的图像可拖动时：

```
var image = new Kinetic.Image({
  image: imageObj,
  id: imageName,
  x: parseInt(CoordX),
  y: parseInt(CoordY),
  draggable: true
}); 
```

画布/舞台对 iPad 上的点击无响应。它识别点击/点击的唯一位置是在边框上。

有没有人遇到过类似的问题，您是如何解决的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:48:58.083

**更新：** @user1950497，对于 jCanvas，使图像可拖动的关键是确保将**layer**属性设置为**true** ( [http://jsfiddle.net/dksmiffs/YdPpy/](http://jsfiddle.net/dksmiffs/YdPpy/) )：

```
$("canvas").drawImage({
  source: "http://upload.wikimedia.org/wikipedia/commons/thumb/d/d8/Gadsden_flag.svg/320px-Gadsden_flag.svg.png",
  x: 200, y: 150,
  layer: true,
  draggable: true
}); 
```

感谢@Caleb531 引导我在 jCanvas[问题 #74](https://github.com/caleb531/jcanvas/issues/74)中找到答案。

# c++ - 什么时候开始担心网络代码？

> ID：15620857
> 
> 赞同：3
> 
> 时间：2013-03-25T17:14:58.153
> 
> 标签：c++, sockets, game-engine, multiplayer

我目前正在开发 C++/SDL/OpenGL 游戏。我已经制作了一些小游戏，但只有本地游戏（没有网络代码）。所以我知道如何制作引擎，但我不确定网络代码。我可以先创建完整的分屏播放引擎，然后再添加网络代码，否则一切都会变得复杂吗？在编写基本游戏引擎时我是否已经必须考虑网络代码，或者在一台机器上运行良好后将它放在游戏之上也可以吗？

这是一个 2D 射击类型的游戏，如果这很重要的话。不，我不喜欢改变我对编程语言/窗口管理器/api 的选择，因为我已经实现了游戏的基本功能。我只是好奇如何最好地解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T17:32:55.943

*理论上*，您所需要的只是一个足够好的设计。写足够多的抽象类和 BAM！您可以为另一个（联网）弹出一个用户界面（即仅限本地）。不过，我不会相信这个理论。

可以做你想做的事，但它涉及到你在处理网络游戏时解决的所有新问题——同步多个用户的视图，当一个用户断开他们的网络链接时该怎么办（如何检测一个用户当然，断开他们的网络链接），接收用户输入的网络延迟，处理一侧而不是另一侧的延迟。网络编程完全不同，其中一些方面（主要是处理同步的方面）可能会影响您的核心引擎本身。即使“只显示两个视图”也会变得更加困难，因为您现在在两台完全不同的机器上拥有数据，而且数据不一定相同。

我的建议是做与你希望的相反的事情。首先使用最少的图形获取网络代码。事实上，控制台消息远比漂亮的图形更重要。您已经拥有制作其他游戏图形的经验——首先使用最有问题的技术。对网络代码会要求你做的所有事情有一个很好的感觉，然后专注于图形。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T15:14:06.407

通常，对于面向网络的游戏，也要记住五个概念：

*   事件
*   调度员
*   同步
*   渲染
*   模拟

**事件**。游戏引擎是一种事件软件，这意味着在游戏中每个通用对象（可以是单元、GUI 等）的状态下，您执行一个动作，这意味着您调用一个函数或什么也不做。

**Dispatcher**接受每个事件更改并将该更改分派到另一个子系统。

**同步**意味着在事件发生变化时，必须通知网络中的所有客户端将其调度员扔掉该变化，这样所有玩家都可以看到其他玩家的变化，同时渲染和模拟相同的事物。

**渲染**渲染读取每个对象的参数和相关状态并在屏幕上绘制。例如，您是否为每个单位都有一个名为**life_points的属性，如果***life_points>50*，您可以绘制一个普通单位，如果*life_point>0*和*life_point<50* ，您可以绘制一个损坏单位，如果*life_point=0* ，您可以绘制一个被摧毁的单位。渲染不要对对象进行更改，只需绘制从它们读取的内容。

**模拟**读取每个对象并执行一些任务以计数状态和属性，例如，如果您有 cero 生命点，您将一个单元的状态标记为 DEAD（例如）或更改 de GUI，或者如果一个单元接近到另一个敌方队伍，您将状态从静态更改为移动靠近另一个单位。另外，在这里你可以制作单位的物理特性、改变位置、旋转等等……因为你让所有对象都通过网络同步，每个人都会看到同样的事情。

此致。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T17:22:30.743

尽快添加网络代码。如果你不这样做，你可能不得不在开发周期的后期对引擎进行大修，所以最好尽早进行。

这也取决于游戏的复杂程度，但同样的原则仍然有效。最好不要在最后一秒添加

希望这可以帮助！

# node.js - node.js 和 console.log 中的 connect-flash 之间的区别？

> ID：15620860
> 
> 赞同：1
> 
> 时间：2013-03-25T17:15:44.937
> 
> 标签：node.js, express, console.log

据我了解，两者都做服务器打印输出。我尝试在下面使用 flash，但我只看到控制台打印输出。

```
app.get('/', function(req, res){
    console.log('hi there!');
    req.flash('info', 'flash test');
    req.end();
}); 
```

闪光灯是做什么用的，我应该如何使用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T17:30:13.087

Flash 消息会显示给查看您网站的用户。console.log 显示在服务器运行的控制台上。

[connect-flash](https://github.com/jaredhanson/connect-flash)是一个实现 flash 消息的中间件。在用户下次查看页面时，Flash 消息会显示在用户浏览器上。flash 通常与重定向结合使用，以确保消息可用于要呈现的下一页。这就像上次查看的页面的提醒。

```
//go to /flash page
app.get('/flash', function(req, res){
  req.flash('info', 'Hi there!')
  res.redirect('/');
});
//info message shown when user sees / home page 
```

# javascript - Javascript - this.foo 和 this.prototype.foo 之间有区别吗

> ID：15620864
> 
> 赞同：2
> 
> 时间：2013-03-25T17:15:53.497
> 
> 标签：javascript, prototype

这之间有什么区别：

```
function Foo(){
    this.bar = function(){
        console.log('hello');
    }
}
fooObj = new Foo(); 
```

和这个？

```
function Foo(){

}

Foo.prototype.bar = function(){
    console.log('hello');
}
fooObj = new Foo(); 
```

这些似乎表现相同，但我还没有完全了解原型。只是`foo.prototype`在类之外声明方法的一种方式吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T17:18:05.490

第一个示例为使用该构造函数创建的每个新对象创建一个新函数对象并将其分配给属性，第二个示例创建每个新对象引用的单个函数。

这意味着例如对于您的第一个示例

```
var fooObj1 = new Foo();
var fooObj2 = new Foo();

alert(fooObj1.bar === fooObj2.bar) //false 
```

而对于第二个

```
alert(fooObj1.bar === fooObj2.bar) //true 
```

这是因为在第一个示例中，条形属性指的是 2 个单独但相同的对象，而在第二个示例中它们是相同的。

一般而言，建议应在原型上声明函数以保留内存，而应单独声明其他对象，除非您要声明在使用该构造函数创建的所有对象之间共享的“静态”对象。

它更容易看出与普通对象或数组而不是函数的区别

```
function Foo(){
    this.bar = [];
}
var fooObj1 = new Foo();
var fooObj2 = new Foo();

fooObj1.bar.push("x");
alert(fooObj2.bar) //[] 
```

相对于：

```
function Foo(){
}

Foo.prototype.bar = []
var fooObj1 = new Foo();
var fooObj2 = new Foo();

fooObj1.bar.push("x");
alert(fooObj2.bar) //["x"] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T17:19:08.970

基本上，区别在于：

```
....
this.bar = function(){
        console.log('hello');
    }
.... 
```

意味着`Foo`“类”的每个实例都有自己的`bar`.

```
....
Foo.prototype.bar = function(){
    console.log('hello');
}
.... 
```

意味着`Foo`“类”的所有实例将共享一个`bar`。某种静态属性。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-25T17:25:39.603

第一个示例中的 bar 方法不会从继承自 foo 的构造函数中继承。此外，在第一个示例中，由 foo 创建的对象将拥有自己唯一的 bar 副本，而在第二个示例中，它们共享相同的 bar 副本。

当一个对象由构造函数创建时，它会获得一个名为“ **proto** ”的属性，该属性指向构造函数的原型属性。“ **proto** ”是 JavaScript 中的一个特殊属性，它使对象继承它所指向的原型对象的所有属性。

# ios - UITapGestureRecognizer 双击减慢释放

> ID：15620867
> 
> 赞同：0
> 
> 时间：2013-03-25T17:16:04.033
> 
> 标签：ios, uigesturerecognizer, touches

我有一个烦人的问题。

我正在添加一个手势识别器：

```
UITapGestureRecognizer* tapGesture =[[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(DoubleClick:)];
tapGesture.numberOfTapsRequired = 2;
[self.view addGestureRecognizer:tapGesture]; 
```

这可行，但是当我单击视图上的任何控件时，“释放”速度很慢。即 UIButton 的释放速度比正常情况要慢。我在 UIView 中的所有控件也是如此。touchesEnded: 函数被延迟调用。

当我使用 tapGesture.numberOfTapsRequired = 1 时，它工作正常。但是我想要双击，而不是单击。

请指教。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T17:29:00.773

当点击并松开一次时，你怎么知道它是单击还是只是双击的前半部分？

答：你等。如果第二次敲击来了，那就是双击。如果经过了一定的时间并且没有发生第二次点击，那么这是一次点击。查看`delaysTouchesEnded`有关`UIGestureRecognizer`它的更多信息。

我通过创建不会相互冲突的手势来解决这个问题。“两指轻敲”和“单指轻敲”不会导致延迟，因为您会知道在手势结束之前使用了多少根手指。

# pandas - 如何自定义 DataFrame 显示的标题和列宽？

> ID：15620871
> 
> 赞同：7
> 
> 时间：2013-03-25T17:16:19.903
> 
> 标签：pandas

作为一项规则，我喜欢对对象使用长的、描述性的列名（例如`estimated_background_signal`，而不仅仅是`bg`）`DataFrame`。此首选项的一个缺点是`DataFrame`的显示表单有几列比它们的值需要的宽得多。例如：

```
In [10]: data.head()
     barcode estimated_background_signal inhibitor_code inhibitor_concentration
0  R00577279                         133            IRB                   0.001
1  R00577279                         189            SNZ                   0.001
2  R00577279                         101            CMY                   0.001
3  R00577279                         112            BRC                   0.001
4  R00577279                         244            ISB                   0.001 
```

如果显示器更窄就好了。忽略标题，最窄的显示将是：

```
0 R00577279 113 IRB 0.001
1 R00577279 189 SNZ 0.001
2 R00577279 101 CMY 0.001
3 R00577279 112 BRC 0.001
4 R00577279 244 ISB 0.001 
```

...但是完全消除标题并不是一个完全令人满意的解决方案。更好的做法是使显示足够宽以允许一些标题，可能占用几行：

```
 barcode estim inhib inhib
            ated_ itor_ itor_
            backg code  conce
0 R00577279   113   IRB 0.001
1 R00577279   189   SNZ 0.001
2 R00577279   101   CMY 0.001
3 R00577279   112   BRC 0.001
4 R00577279   244   ISB 0.001 
```

可能很明显，没有一种约定适用于所有情况，但是，无论如何，是否`pandas`提供了任何方法来自定义 a 的显示表单的标题和列宽`DataFrame`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-08-08T15:50:57.220

显然您可以使用[pd.set_option显示设置。](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.set_option.html)如果您正在寻找不涉及更改笔记本显示设置的 pandas 特定答案，请考虑以下内容。

```
df = pd.DataFrame(np.random.randn(10, 2), 
    columns=['Very Long Column Title ' + str(i) for i in range(2)])
df.style.set_table_styles([dict(selector="th",props=[('max-width', '50px')])]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-16T18:48:59.120

这是一种以非标准方式使用 pandas 的多索引功能的 hack，尽管我认为这样做没有任何重大问题。当然，使用多索引而不是简单索引会增加一些复杂性。

```
cols = df.columns
lencols = [ int(len(c)/2) for c in cols ]

df.columns = pd.MultiIndex.from_tuples( 
                 tuple( ( c[:ln], c[ln:] ) for c, ln in zip(cols, lencols) ) ) 
```

结果：

```
 bar  estimated_bac inhibit  inhibitor_c
        code kground_signal or_code oncentration
0  R00577279            133     IRB        0.001
1  R00577279            189     SNZ        0.001
2  R00577279            101     CMY        0.001
3  R00577279            112     BRC        0.001
4  R00577279            244     ISB        0.001 
```

您还可以考虑创建一个字典来根据需要在长名称和短名称之间进行转换：

*   [在 Pandas 中显示与字典键名不同的列名？](https://stackoverflow.com/questions/48243818/display-column-name-different-from-dictionary-key-name-in-pandas/48245015#48245015)

# python - 在 Python 和 Mac Lion 中写入 MIDI 端口

> ID：15620875
> 
> 赞同：1
> 
> 时间：2013-03-25T17:16:33.937
> 
> 标签：python, macos, midi

现在已经3天了，我仍然无法管理。也许有人可以帮忙。

我想在mac上通过python向midi设备发送控制命令。在我看到的任何地方，满意的答案是使用 pygame，但事实是 mac 上的 pygame 版本缺少该功能。

当我尝试运行这两行时：

```
from pygame import midi
midi.init() 
```

我收到以下错误：

```
Traceback (most recent call last):
File "midi_send.py", line 9, in <module>
midi.init()
File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-   packages/pygame/midi.py", line 71, in init
import pygame.pypm
ImportError: No module named pypm 
```

我看了又看，我发现的都是死胡同。

有没有人真正尝试过在 Mac 上使用 pygame 写入 midiport？是否有一种替代方案不包括陷入某些 gcc 编译错误中的东西替换 /etc/whatever/whatever 中某处的 somemidi.o 文件的第 N 行？

抱歉让我失望了...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-12T18:04:16.917

您可以尝试使用[rtmidi-python](https://github.com/superquadratic/rtmidi-python)库（或较旧且略有不同的[pyrtmidi](https://github.com/tedr56/PyRtMidi)） - 两者都基于[rtmidi](http://www.music.mcgill.ca/~gary/rtmidi/)提供直接发送 MIDI 控制和注释：

```
import rtmidi_python as rtmidi

midi_out = rtmidi.MidiOut()
midi_out.open_port(0)

midi_out.send_message([0x90, 48, 100]) # Note on
midi_out.send_message([0x80, 48, 100]) # Note off 
```

# java - JSTL c:set 没有按预期工作

> ID：15620876
> 
> 赞同：3
> 
> 时间：2013-03-25T17:16:34.663
> 
> 标签：java, jstl

我有一个 JSTL 循环，我试图检查给定变量是否为空或不具有动态变量名称。当我将 c:set 与页面范围一起使用时，if 语句无法访问该变量。但是，当我使用 设置它时`<% pageCotnext.setAttribute(...); %>`，该变量可用。

```
<%
pageContext.setAttribute("alphaParA", "test");
pageContext.setAttribute("alphaParF", "test");
int i = 0;
%>
<ul class="alphadex_links">
    <c:forEach var="i" begin="0" end="25" step="1" varStatus="status">
        <c:set var="currentLetter" scope="page">&#${i+65}</c:set>
        <c:set var="currentPar" scope="page">alphaPar${currentLetter}</c:set>
        <% pageContext.setAttribute("currentPar", "alphaPar" + (char)('A' + i++)); %>
        <li>
            <c:choose>
                <c:when test="${not empty pageScope[currentPar]}"> 
```

当我删除 pageContext.setAttribute 块时，测试总是失败，但是它对 A 和 F 成功，因为它应该在块中。我很困惑，在任何地方都找不到帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T17:25:47.727

它失败是因为 HTML 在 JSTL 运行时没有运行。在 Java/JSP/JSTL 完成其工作后，当 Web 浏览器检索和解析 HTML 时，您实际上是向其传递了一个 Java 字符串`&#65`，而不是所需的字符，该字符`A`将基于 HTML 实体表示。`&#65;`请注意，您的 HTML 实体缺少结束分号，但这不是您的具体问题的原因。

至于具体的功能要求，对不起，你对 EL 不走运。它不支持`char`。你最好的办法是处理这样的字符串：

```
<c:forEach items="${fn:split('A,B,C,D,E,F,G,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z', ',')}" var="currentLetter">
    <c:set var="currentPar" value="alphaPar${currentLetter}" />
    ${pageScope[currentPar]}
</c:forEach> 
```

如有必要，只需像`String[]`Java end 一样自动生成字母并将其设置为应用程序属性。

# css - PIE 圆角不起作用

> ID：15620877
> 
> 赞同：0
> 
> 时间：2013-03-25T17:16:38.080
> 
> 标签：css, html, internet-explorer-8, rounded-corners, css3pie

嘿伙计们，我正在建立一个网站，发现 ie8 不适用于圆角。经过一番研究，我发现 PIE 可以解决这个问题，是的，它确实做到了，但它也把整个网站搞砸了。div 正在滚动，图像忽略圆角 :(，任何可以提供帮助的人。这个问题有点难以描述，所以这里是链接[http://www.k2stuc.nl](http://www.k2stuc.nl)希望有人能帮助我得到它兼容ie8。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T17:58:18.110

您需要将`relative`定位添加到 PIE 元素的容器中。

```
.column{position:relative;} 
```

此外，在某些情况下，您可能需要使用`zoom:1`属性。

# java - 如何指挥机器人

> ID：15620880
> 
> 赞同：1
> 
> 时间：2013-03-25T17:16:41.733
> 
> 标签：java, grid, awtrobot

我正在编写一个 Java 程序，它允许用户向机器人发送消息，告诉它在 5x5 网格上去哪里。例如，如果我发送它'FRFFLF'，这意味着向前，向右跑 90 度，向前两次，向左转 90 度，然后向前。然后程序返回机器人在网格上的新位置。

我不是在寻求解决方案，只是对我的方法的一些指导。是否已经有可用于此类程序的设计模式（所以我没有重新发明轮子）或者是否可以从头开始编写？

网格的底部是（0,0，顶部是（4,4）。

我在想 Robots 位置可以定义为 Java Point 类，而网格是 2D 数组？

像下面这样的事情会是一个开始吗？

```
 public Point forward(Point p) {
    p.x +=1;
    return p;
} 
```

有没有人尝试过编写这样的程序？可能吗？

编辑：我考虑过以下几点：首先我需要机器人的方向及其当前位置。从那里我将封装网格，围绕边界创建一些规则。基本上，我将更新机器人的位置，解释传递给它的命令并更新基于机器人的位置。显然，机器人只需要在网格范围内移动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-19T09:36:44.127

首先，我会决定 x 和 y 的含义。在这种情况下，我会说当你向“东”移动时 x 会变大，而当你向“南”移动时 y 会变大。这通常是它在计算机图形中的工作方式 - 0,0 点通常位于左上角，如下所示：http: [//graphics.comsci.us/notes/coord.html](http://graphics.comsci.us/notes/coord.html)

所以，我要做的是有两个类，机器人和网格。

**Grid 类**应具有以下属性：

*   minX，它是一个 int
*   maxX，它是一个 int
*   minY，它是一个 int
*   maxY，它是一个 int

还有这些方法：

*   isValid(int x, int y)

**Robot 类**应具有以下属性：

*   位置，这是一个点
*   方向，这是一个方向
*   网格，其中包含网格对象

它还应该有这些方法：

*   向前（）
*   剩下（）
*   正确的（）

无论您如何存储方向 - 0、1、2、3 或“北”、“东”、“南”、“西”或“上”、“右”、“下”、“左” ，甚至可能是 0、90、180、270、360（度）或弧度。重要的是您在使用方向时保持一致。

现在，在`left()`和`right()`中，您可以更改机器人的方向。所以你可以做这样的事情：

```
public void left() {
  switch (orientation) {
    case "north": orientation = "west"; break;
    case "east": orientation = "north"; break;
    ...
  }
} 
```

您将按顺序更改方向，并在`right()`函数中以相反的顺序执行它们。

内部`forward()`是您与`grid`对象交互的地方：

```
public void forward() {
  switch (orientation) {
    case "north":
      if (grid.isValid(position.x, position.y+1)) {
        position.y += 1;
      } else {
        System.out.println("Can't go there!");
      }
      break;
    ...
} 
```

值得注意的是，Grid 类可以存储*任何*形状。只要你先检查你想去的地方是否有效，机器人并不关心网格是什么样子的。你可以把你的机器人从这个网格上拉下来，然后把它放在另一个网格上，它仍然会以同样的方式工作。

我想，下一点将是读取您发送给它的命令的东西。那时，也许您一次只读取一个字符的字符串，然后执行它指定的命令。

# ios - 如何以编程方式将 tabBarItem 链接到 viewController（iPhone、iOS）

> ID：15620882
> 
> 赞同：0
> 
> 时间：2013-03-25T17:17:00.507
> 
> 标签：ios, objective-c, uiviewcontroller, uitabbarcontroller, uitabbaritem

我有一个带有登录系统的应用程序。如果用户成功登录，我希望 tabBarController 在运行时动态更改！我有 5 个标签（Accueil、Tous les Voyants、Inscription、Connexion、Aide）。

当用户点击登录按钮时，我想将 Inscription 更改为 Achat Jetons，将 Connexion 更改为 Profile，并将另一个 ViewController 链接到这两个 tabBarItems！

现在，我已经成功地替换了标签栏的标题和图像标志。但我不知道如何将 viewControllers 链接到它们！这是我现在得到的：

```
- (IBAction)BTN_ConnexionClick:(id)sender {
UITabBarController *tabBarController = (UITabBarController *)self.tabBarController;
UITabBar *tabBar = tabBarController.tabBar;

UITabBarItem *tabBarItem1 = [tabBar.items objectAtIndex:2];
UITabBarItem *tabBarItem2 = [tabBar.items objectAtIndex:3];

[tabBarItem1 setFinishedSelectedImage:[UIImage imageNamed:@"menu_iOS_achat.png"] withFinishedUnselectedImage:[UIImage imageNamed:@"menu_iOS_achat.png"]];
[tabBarItem2 setFinishedSelectedImage:[UIImage imageNamed:@"menu_iOS_profile.png"] withFinishedUnselectedImage:[UIImage imageNamed:@"menu_iOS_profile.png"]];

tabBarItem1.title = @"Achat Jetons";
tabBarItem2.title = @"Profile"; 
```

}

我通过 StoryBoard IB 创建了 2 个新的 viewController，我只是不知道如何用新的 viewController 替换旧的链接 viewController！谢谢你的帮助！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T17:24:04.690

您犯的错误是您正在直接更改标签栏控制器的标签栏的标签栏项目。不！更改标签栏控制器的视图控制器。标签栏控制器从中获取其标签栏项目。

你可能想阅读我关于这个主题的书：

[http://www.aeth.com/iOSBook/ch19.html#_configuring_a_tab_bar_controller](http://www.apeth.com/iOSBook/ch19.html#_configuring_a_tab_bar_controller)

特别注意：

> 标签栏控制器的标签栏会自动显示每个子视图控制器的tabBarItem

不要做任何事情来搞砸它！（你搞砸了。）操纵视图控制器的`tabBarItem`. 操作标签栏控制器的`viewControllers`. 不要自己触摸标签栏控制器的标签栏。

# linux - 由于版本更改导致 Linux 中的符号

> ID：15620885
> 
> 赞同：0
> 
> 时间：2013-03-25T09:01:36.437
> 
> 标签：linux, php

我们已经使用 PHP 扩展代码（仅用 C++ 编写）将 PHP 代码与 C++ 代码相关联……这些代码在 32 位操作系统中都运行良好。

现在我们更改了许多软件的版本，因为操作系统版本更改为 64 位。我们将之前使用 64 位 gcc 运行良好的 C++ 代码编译为 32 位“.so”文件，它显示了许多错误，我们清除了所有这些错误并最终成功编译。但在与 PHP 链接期间，它显示：

```
undefined symbol: _ZTV5Temps" error 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:03:41.050

用于`c++filt`对名称进行分解：

```
$ c++filt -n _ZTV5Temps
vtable for Temps 
```

我的猜测（鉴于缺乏上下文）是您`Temps`在尚未重新编译/重新链接的模块中引用了（类）。

# utf-8 - 找出 straÃŸe 的字符编码

> ID：15620888
> 
> 赞同：3
> 
> 时间：2013-03-25T17:17:32.830
> 
> 标签：utf-8, character-encoding, typo3, iso-8859-1, latin1

我正在为外部接口内容的编码而苦苦挣扎。在 MySQL 数据库中，排序规则是`latin1_swedish_ci`. 也是字段 ist 的整理`latin1_swedish_ci`。php 脚本以 UTF-8 编码，浏览器中的输出为我提供 UTF-8。除此数据库的内容外，一切正常。数据库连接应为 UTF-8 (Typo3 4.7)，内容为

> 大街

但它应该是`straße`。

`mb_detect_encoding($data['street'],'UTF-8')`说是`UTF-8`。如果我使用`utf8_decode()`我得到

> 大街

如果我使用`utf8_encode()`我得到

> 斯特拉埃

我的假设是 UTF-8 编码的数据存储在 中`ISO-8859-1`，但如果是这种情况，这里就不应该出现这样的问题。如何找出真正的编码是什么？

PS：我无法更改源的编码！

**我对最初问题的解决方案：**

我必须使用这行代码将数据库连接从 UTF-8 设置为 ISO-8859-1

```
$res = $GLOBALS['TYPO3_DB']->sql_query("SET NAMES latin1"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T17:55:51.807

字符`ß` ['LATIN SMALL LETTER SHARP S' (U+00DF)](http://www.fileformat.info/info/unicode/char/00df/index.htm)存在于 UTF-8 字节中`0xC3`，并且`0x9F`根据链接的站点：

> UTF-8 (十六进制) 0xC3 0x9F (c39f)

如果我们查看[ISO-8859-1 代码页布局](http://en.wikipedia.org/wiki/ISO_8859-1#Codepage_layout)，那么这些字节代表字符`Ã`和 ISO-8859-1 代码页布局中未定义的字符。因此不是这样。与 ISO-8859-1 有一些重叠的另一种常见字符编码是 Windows CP1252（也称为 ANSI，在记事本中保存文本文件时默认使用 - 可以通过使用*另存为*来覆盖）。如果我们查看[CP1252 代码页布局](http://en.wikipedia.org/wiki/Windows-1252#Code_page_layout)，那么这些字节代表字符`Ã`，`Ÿ`并确认您最初检索的内容。

所以，它很可能是 CP1252 编码的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T18:01:06.403

What you see as “ÃŸ” is really the windows-1252 (also known as CP1252) interpretation of the two bytes 0xC3 and 0x9F that constitute the UTF-8 encoding of “ß”. But this seems to mean that the data is actually UTF-8 encoded and just gets misinterpreted as windows-1252 encoded. So I think it should be simply processed as UTF-8, with due precautions.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-04T20:48:28.860

我建议您继续验证您的 sql 连接正在使用什么字符集。它不一定与您为数据库定义的字符集相同。

来自 PHP

```
// Opens a connection to a MySQL server
$connection = mysql_connect ($server, $username, $password);
$charset = mysql_client_encoding($connection);
$flagChange = mysql_set_charset('utf8', $connection);
echo "The character set is: $charset</br>mysql_set_charset result:$flagChange</br>"; 
```

PHPMYADMIN 内部

1.  开放数据库`information_schema`
2.  打开表`schemata`
3.  查看您的`mysql`默认排序规则

您可能会也可能不会更改这些参数，具体取决于用户权限。

如上所示，我通过将以下行附加到我的`connection.php`文件（我在使用 db 访问的每个页面的开头调用它）解决了我在 mysql 中的冲突字符集问题：

```
$flagChange = mysql_set_charset('utf8', $connection); 
```

# yii - 由于 scriptMap，editMe 扩展程序无法正常工作

> ID：15620891
> 
> 赞同：0
> 
> 时间：2013-03-25T17:17:38.323
> 
> 标签：yii, ckeditor, yii-extensions

由于多次导入 jquery.js（由 pagespeed 插件显示）和其他脚本，我的网站的性能很差。所以在我的主要布局中，我添加了

```
 <?php
    $cs=Yii::app()->clientScript;
    $cs->scriptMap=array(
        'jquery.js'=>false,
        'jquery.ui.js' => false,
    );?>
 ...
 ...
    <head>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js"></script>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.7/jquery-ui.min.js"></script>
    ..
    </head> 
```

但是，一旦我在主布局中添加了上面的**scriptMap**，editMe 富文本框编辑器就无法正常工作。

谁能告诉我如何解决这个问题？另外请建议我如何解决我的网站上的多个脚本导入问题？

我可以在 ExtEditMe.php 中看到以下代码

```
public function run() {
        // Register JavaScript files
        Yii::app() -> clientScript -> registerCoreScript('jquery');
        Yii::app()->clientScript->registerScriptFile(Yii::app()->baseUrl.'/js/jquery.js');
        Yii::app() -> clientScript -> registerScriptFile(self::$_ckeAssetUrl . '/' . md5(self::$_ckeAssetUrl) . '.js');
        Yii::app() -> clientScript -> registerScriptFile(self::$_ckeAssetUrl . '/ckeditor.js');
        Yii::app() -> clientScript -> registerScriptFile(self::$_ckeAssetUrl . '/adapters/jquery.js');
        // Generate textarea
        $nameId = $this -> resolveNameID();
        $this -> htmlOptions['id'] = $nameId[1];
        if ($this -> hasModel()) {
            echo CHtml::activeTextArea($this -> model, $this -> attribute, $this -> htmlOptions);
        } else {
            echo CHtml::textArea($this -> name, $this -> value, $this -> htmlOptions);
        }
        // Load CKEditor
        $jquerySelector = CJavaScript::encode('#' . $this -> htmlOptions['id']);
        $ckeConfig = CJavaScript::encode($this -> _ckeGenerateConfig());
        Yii::app() -> clientScript -> registerScript('editMe_' . $this -> htmlOptions['id'], 'jQuery(' . $jquerySelector . ').ckeditor(' . $ckeConfig . ');', 2);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T09:55:57.283

作为一种解决方法，我修改了我的主要布局如下

```
<?php
$cs=Yii::app()->clientScript;
$cs->scriptMap=array(
    'jquery-ui.min.js' => false,
    'jquery.min.js'=>false,
);?>
 ...
 ...
    <head>
         <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.7/jquery-ui.min.js"></script>
    ..
    </head> 
```

然而，

ExtEditMe.php 保持原样。在我使用 jquery.js 的所有地方现在都使用 jquery-min.js。

# java - 我需要从特定的 url 地址打印出每个单词在段落中使用的次数

> ID：15620904
> 
> 赞同：0
> 
> 时间：2013-03-25T17:18:15.473
> 
> 标签：java

我正在尝试计算与特定 url 地址相关联的单词的数量，并按照它们出现的数量顺序打印这些单词。现在它读入文件并计算单词，但它会逐行打印出来，而不是计算整个段落。任何帮助它阅读整个内容并打印出整个段落中的单词以及它们的出现都会很棒。

```
public static void main(String[] args) 
{
    try {
        URL url = new URL("http://webpagehere.txt");
        BufferedReader reader = new BufferedReader
                (new InputStreamReader(url.openStream()));
        String line;
        int i=0;
        while ((line = reader.readLine()) != null) {
            i++;
            System.out.println("Line " + i + "\t" + line);
             // Create a TreeMap to hold words as key and count as value
Map<String, Integer> map = new TreeMap<String, Integer>();

String[] words = line.split("[ \n\t\r.,;:!?(){}]");
for (int j = 0; j < words.length; j++) {
  String key = words[j].toLowerCase();

  if (key.length() > 0) {
    if (!map.containsKey(key)) {
      map.put(key, 1);
    }
    else {
      int value = map.get(key);
      value++;
      map.put(key, value);
    }
  }
}

// Get all entries into a set
Set<Map.Entry<String, Integer>> entrySet = map.entrySet();

// Get key and value from each entry
for (Map.Entry<String, Integer> entry: entrySet)
  System.out.println(entry.getKey() + "\t" + entry.getValue());

        }

        reader.close();
    } catch (UnknownHostException e) {
        JOptionPane.showMessageDialog(null, "Unknown host. Abort.");
    } catch (NoRouteToHostException e) {
        JOptionPane.showMessageDialog(null,
                                      "Cannot reach remote host. Abort.");
    } catch (java.lang.Exception e) {
        e.printStackTrace();
    }

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T17:26:19.837

您只需将初始化移动到`Map`while 循环外部的打印。

```
public static void main(String[] args) 
    {
        try {
            URL url = new URL("http://webpagehere.txt");
            BufferedReader reader = new BufferedReader
                    (new InputStreamReader(url.openStream()));
            String line;
            int i=0;
            Map<String, Integer> map = new TreeMap<String, Integer>();
            while ((line = reader.readLine()) != null) {
                i++;
                System.out.println("Line " + i + "\t" + line);
                // Create a TreeMap to hold words as key and count as value

                String[] words = line.split("[ \n\t\r.,;:!?(){}]");
                for (int j = 0; j < words.length; j++) {
                    String key = words[j].toLowerCase();

                    if (key.length() > 0) {
                        if (!map.containsKey(key)) {
                            map.put(key, 1);
                        }
                        else {
                            int value = map.get(key);
                            value++;
                            map.put(key, value);
                        }
                    }
                }
            }
            reader.close();

            // Get all entries into a set
            Set<Map.Entry<String, Integer>> entrySet = map.entrySet();

            // Get key and value from each entry
            for (Map.Entry<String, Integer> entry: entrySet)
                System.out.println(entry.getKey() + "\t" + entry.getValue());

        } catch (UnknownHostException e) {
            System.out.println("Unknown host. Abort.");
        } catch (NoRouteToHostException e) {
            System.out.println("Cannot reach remote host. Abort.");
        } catch (java.lang.Exception e) {
            e.printStackTrace();
        }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T17:27:40.773

您`map`要存储的单词及其出现在 while 循环中声明。只需将声明移出 while 循环即可使其工作。

```
 int i = 0;
        Map<String, Integer> map = new TreeMap<String, java.lang.Integer>();
        while ((line = reader.readLine()) != null) { 
```

# java - JPA 注释和 PGSql Schema 不完全遵守长度约束

> ID：15620907
> 
> 赞同：0
> 
> 时间：2013-03-25T17:18:25.517
> 
> 标签：java, hibernate, jpa

我有一个数据库模式，其中有一个名为 Vector 的表，该表有一个名为 Name 的列。Name 列定义为 varchar(255)。

我有一个休眠模型实体，它用 @Column 注释，长度指定为 255。

尝试使用 CRUDRepository 持久化对象不会引发关于名称长度的异常，直到长度为 262，这对我来说似乎很奇怪。

想法？我希望分配一个长度为 256 的名称来引发异常。

# javascript - 单击形状上的sharepoint javascript

> ID：15620916
> 
> 赞同：0
> 
> 时间：2013-03-25T17:18:57.070
> 
> 标签：javascript, sharepoint, onclick, shape, visio

我需要使用 JavaScript 将 onclick 事件添加到 SharePoint 中的 Visio 中的形状，例如 vwaControl 处理程序 shapeselectionchanged 但在单击时，有什么办法可以做到吗？

我很抱歉我的英语不是我的母语。

我希望你能理解我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:39:16.400

我只是做了类似的事情。您可以使用 shapeSelectionChangedHandler 来处理点击。据我所知，没有 onClick 功能，但 shapeSelectionChangedHandler 对我来说效果很好。

请参阅： [在 SharePoint 中使用 Visio 进行编程，在 Javascript 中创建新的 Outlook 会议？](https://stackoverflow.com/questions/15633916/programming-with-visio-in-sharepoint-need-to-add-the-logic-in-javascript)

请参阅：http: [//msdn.microsoft.com/en-us/library/gg243427.aspx](http://msdn.microsoft.com/en-us/library/gg243427.aspx)以获取使用 Content WebPart 等进行设置的指南。

我使用的代码，只需添加你想要的`shapeSelectionChangedHandler = function(source, args) {}`

```
<script language="javascript">
var app = Sys.Application;

app.add_load(onApplicationLoad);

// hold an instance of the Visio VWA control
var vwaControl; 

var shapeSelectionChangedHandler = null;

function onApplicationLoad()
{
    vwaControl= new Vwa.VwaControl("WebPartWPQ4");
    vwaControl.addHandler("diagramcomplete", onDiagramComplete);
    vwaControl.addHandler("shapeselectionchanged", shapeSelectionChangedHandler);
}

function onDiagramComplete()
{
    var vwaPage = vwaControl.getActivePage(); 
    vwaPage.setZoom(35); // force the initial zoom level
}

shapeSelectionChangedHandler = function(source, args)
{
    // get the selected shape from the shapes on the page
    var vwaPage = vwaControl.getActivePage(); 
    var vwaShapes = vwaPage.getShapes(); 
    var shape = vwaShapes.getItemById(args);

    // get the data to display for the selected shape
    var data = shape.getShapeData();

    var strRoomName = ""; 
    var strFloorNumber = "";
    var strCapacity = ""; 
    var strStatus = ""; 

    for (var j = 0; j < data.length; j++)
    {
        if (data[j].label == "RoomName")
        {
            strRoomName = data[j].value;
            continue;
        } 

        if (data[j].label == "FloorNumber")
        {
            strFloorNumber = data[j].value;
            continue;
        }

        if (data[j].label == "Capacity")
        {
            strCapacity = data[j].value;
            continue;
        }        

        if (data[j].label == "RoomStatus")
        {
            strStatus = data[j].value;
            continue;
        }                
    }

    // get the selected state input and set its value
    var  inputRoomName = document.getElementById('strRoomName');
    inputRoomName.value = strRoomName;

    var inputFloorNumber = document.getElementById('strFloorNumber');
    inputFloorNumber.value = strFloorNumber;

    var inputCapacity = document.getElementById('strCapacity');
    inputCapacity.value = strCapacity;    

    var inputStatus = document.getElementById('strStatus');
    inputStatus.value = strStatus;        
} 
```

# symfony - Symfony2 防火墙和 FOSRestBundle

> ID：15620922
> 
> 赞同：3
> 
> 时间：2013-03-25T17:19:16.323
> 
> 标签：symfony, fosrestbundle

对于使用 FOSRestBundle 的 Web 服务，我创建了一个防火墙，强制登录以访问应用程序。

我的问题是，当我通过 ajax 调用 API 时，我需要在用户未通过身份验证时获取错误代码 401，而不是接收登录表单的 html 源代码。如何配置应用程序？

```
secured_area:
            pattern:    ^/
            form_login:
                provider: fos_userbundle
                use_forward: false
                default_target_path: /w
            logout:
                path:   /logout
                target: /login 
```

**编辑：**

感谢 Ryan 这里是 KernelExceptionListener 方法。

```
public function onKernelException( GetResponseForExceptionEvent $event ) {
    // get exception
    $exception = $event->getException();
    // get path
    $path = $event->getRequest()->getPathInfo();

    if ( $exception instanceOf AuthenticationException && ($event->getRequest()->isXmlHttpRequest() || strpos( $path, '/api' ) === 0) ) {
        $response = new Response();
        $response->setStatusCode( 401 );
        $event->setResponse( $response );
        $event->stopPropagation();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T18:11:52.687

您使用了身份验证而不是授权这个词，不幸的是，这似乎还没有写出来。因此，您可能需要创建自己的。

在一般情况下，应该创建一个简单的[内核事件侦听](http://symfony.com/doc/current/cookbook/service_container/event_listener.html)器来拦截[AuthenticationException异常。](http://api.symfony.com/2.2/Symfony/Component/Security/Core/Exception/AuthenticationException.html)捕获此事件应该允许您在重定向到登录页面之前执行您喜欢的任何操作。

FOSRestBundle应该提供一个很好的例子来[说明](https://github.com/FriendsOfSymfony/FOSRestBundle)如何做到这一点。FOSRestBundle 当前为授权层提供此功能（[AccessDeniedException](http://api.symfony.com/2.2/Symfony/Component/Security/Core/Exception/AccessDeniedException.html)）。稍作修改，相同的框架也应该能够为身份验证层提供相同的功能。

有关提供授权侦听器的更改集，请参见 pull [#308](https://github.com/FriendsOfSymfony/FOSRestBundle/pull/308)。有关如何配置侦听器的文档，请参阅[安全异常侦听器。](https://github.com/FriendsOfSymfony/FOSRestBundle/blob/master/Resources/doc/3-listener-support.md#security-exception-listener)

# java - 在 Spring @RequestMapping 值中使用字符串数组“常量”

> ID：15620925
> 
> 赞同：2
> 
> 时间：2013-03-25T17:19:23.793
> 
> 标签：java, spring, controller, constants

我可能应该指出，Spring 本身并不一定对这个问题至关重要，但是我在使用 Spring 时遇到了这种行为，所以这个问题使用了我在 Spring 中遇到的情况。

我有一个控制器类，它将请求`GET`和`POST`请求映射到特定表单的同一组 URL。此表单对于不同的语言环境有不同的 URL，但是对于`GET`请求只有一种方法，而对于`POST`. - 特定的验证，可能不同）。例子：

```
@Controller
public class MyFormController {

    // GET request
    @RequestMapping(value={"/us-form.html", "/de-form.html", "/fr-form.html"},
            method={RequestMethod.GET})
    public String showMyForm() {
        // Do some stuff like adding values to the model
        return "my-form-view";
    }

    // POST request
    @RequestMapping(value={"/us-form.html", "/de-form.html", "/fr-form.html"},
            method={RequestMethod.POST})
    public String submitMyForm() {
        // Do stuff like validation and error marking in the model
        return "my-form-view"; // Same as GET
    }
} 
```

像这样写的形式`GET`和`POST`工作得很好。您会注意到`String`用于`@RequestMapping`值的数组是相同的。我想要做的是将这些 URL 放在一个位置（理想情况下是`static final`控制器中的一个字段），这样当我们添加新 URL（对应于未来本地化站点中的表单）时，我们可以将它们添加到一个位置。所以我尝试了对控制器的这种修改：

```
@Controller
public class MyFormController {

    // Moved URLs up here, with references in @RequestMappings
    private static final String[] MY_URLS =
            {"/us-form.html", "/de-form.html", "/fr-form.html"};

    // GET request
    @RequestMapping(value=MY_URLS, // <-- considered non-constant
            method={RequestMethod.GET})
    public String showMyForm() {
        // Do some stuff like adding values to the model
        return "my-form-view";
    }

    // POST request
    @RequestMapping(value=MY_URLS, // <-- considered non-constant
            method={RequestMethod.POST})
    public String submitMyForm() {
        // Do stuff like validation and error marking in the model
        return "my-form-view"; // Same as GET
    }
} 
```

这里的问题是编译器抱怨`value`属性不再是常量。我知道 Spring 要求它`value`必须是一个常量，但我曾认为使用包含文字的`final`字段（或`static final`在我的情况下）将作为“常量”传递。我在这里的怀疑是，数组文字必须以这样一种方式动态构建，即在解析属性时它不会被初始化。`Array``String``value`

我觉得用基本的 Java 知识来弄清楚这不应该是一件难事，但是经过一些研究后，我无法找到任何答案。有人可以证实我的怀疑并给出一个引用或很好的解释为什么会这样，或者否认我的怀疑并解释实际问题是什么？

注意：我不能简单地将 URL 组合到[Path Pattern](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-ann-requestmapping-patterns)中，因为每个表单 URL 都使用其本地化站点的语言，并且不可能进行匹配。例如，我只是将上面的“/{locale}-form.html”字符串作为我的 URL。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T17:27:31.547

没错，这和 Spring 无关，所有的 Annotation 参数都必须是编译时常量。这是一个基本的java语言规则。

将数组引用标记为 final 并不会削减它，因为这仍然是完全合法的：

```
MY_URLS[0] = "es-form.html"; 
```

另外，您最初是如何将语言环境嵌入到 URL 中的？您是否在模拟旧链接？Spring 为使用浏览器的实际语言环境提供了大量内置支持。

# c - 在包含指向无符号整数数组的指针的结构上使用 free，用数据填充数组

> ID：15620928
> 
> 赞同：0
> 
> 时间：2013-03-25T17:19:27.597
> 
> 标签：c, malloc, free

（我的问题的简化版本，在 netbeans 中开发）
我定义了这个结构：

```
typedef struct data_info
{
    unsigned int* array; //containing ints at hex base
    int x;
}data; 
```

在主要功能中，我正在做这些：

```
data *d = malloc(sizeof(data);
d->array = malloc(4*sizeof(unsigned int)); 
```

使用此结构后，我想释放内存。我正在使用 netbeans 调试查看变量状态：

```
address of (d->array) -> 0x605670
free(d->array); //makes the array NULL
d->array = NULL;
free(d); //makes the pointer not NULL - adress is 0x605500 
```

数组状态也是这样（十六进制值）：

> d->array[0] = 0
> d->array[1] = 0
> d->array[2] = 31
> d->array[3] = 0

为什么 d->array 得到一个地址值？

# java - 如何写入已经运行的 java 程序的输入流？

> ID：15620929
> 
> 赞同：4
> 
> 时间：2013-03-25T17:19:34.993
> 
> 标签：java, php, linux

我有一个 CentOS 服务器，它当前正在运行一个 java jar 应用程序。我需要编写一个 php 脚本来通过它的输入流与这个正在运行的程序进行通信。java 程序将其输出输出到日志文件，因此我不需要访问输出流。

我不想重新启动程序，只是访问正在运行的进程并与之交互。

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T17:44:05.307

首先，找到应用程序的 ProcessID。您可以使用：

```
ps -Af | grep java 
```

由于您使用的是 java，因此使用`jps`查找 PID 的命令可能会更方便。

我假设正在运行的应用程序的 PID 是 12345。发出命令就足够了：

```
cat >/proc/12345/fd/0 
```

您输入的任何内容都将被放入该应用程序的标准输入中。请注意，它`fd`包含应用程序使用的文件描述符，我想第 0 个文件描述符总是`stdin`.

使用 PHP 写入文件（并因此被应用程序用作输入）也是可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T09:04:19.773

如果可移植性对您来说不是一件大事，为什么不创建自己的管道呢？我对 java 应用程序了解不多，但看看“mkfifo”函数/命令。

# winapi - Shell32 GetDetailsOf 本地化问题

> ID：15620930
> 
> 赞同：0
> 
> 时间：2013-03-25T17:19:38.937
> 
> 标签：winapi

是否有可靠的方法来识别跨 Windows 平台的文件的文件类型？

我继承了一个使用 Shell32 GetDetailsOf 函数查询文件类型的程序，该函数返回本地化字符串并在使用非英语系统时导致错误（例如，在德语系统上 GetDetailsOf(item,9) 返回“Bild” “图像”）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T19:51:46.057

使用文件类型的文本描述不是识别特定文件类型的可靠方法。正如您所注意到的，描述字符串因语言而异，但它们也可以在一种语言中更改，具体取决于用户安装的软件（作为一个虚构的示例，.jpg 文件可能具有描述“JPEG 图像”在一个系统上，如果用户安装了声明文件类型并更改描述的软件，则在另一个系统上为“Adobe Photoshop Image”）。

相反，识别文件类型的最佳方法是查看文件的扩展名（`.jpg`在我们的示例中）。然后你用它做什么取决于你，取决于你的应用程序。您可能只有一个硬编码的扩展名列表，或者更通用，您可以在注册表中查找文件类型的“感知类型”：

> HKEY_CLASSES_ROOT\.jpg\PerceivedType

查看该值是否设置为“图像”、“音频”等。

# memory - 在 VxWorks 中修改内存的最佳方法

> ID：15620933
> 
> 赞同：0
> 
> 时间：2013-03-25T17:19:55.623
> 
> 标签：memory, embedded, vxworks

我正在用python编写一个测试脚本，它将操纵系统中的内存。

我知道 m 命令（修改内存）存在；但是，它似乎非常笨重。我们的测试套件也不能非常优雅地处理输入提示。我相信那里一定有更好的东西。

根据您的经验，在 VxWorks 中修改内存还有哪些其他方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:16:03.717

VxWorks 中的目标 shell 命令不再是 C 函数——shell 包含一个在构建时生成的符号表，其中包含所有具有外部链接的函数。因此，“m”命令实际上是一个简单的 C 函数（[参见此处](http://www.vxdev.com/docs/vx55man/vxworks/ref/usrLib.html#m)）。您同样可以调用 memset() 或 memcpy() 或编写自己的函数。

要从主机对目标执行函数调用，而不使用目标或主机 shell，您可能会考虑在主机上使用[RPC](http://www.vxdev.com/docs/vx55man/vxworks/ref/rpcLib.html#top)使用[RPyC](http://rpyc.readthedocs.org)。

# c - 如何将 malloced 变量传递给 C 中新创建的结构

> ID：15620934
> 
> 赞同：3
> 
> 时间：2013-03-25T17:19:58.543
> 
> 标签：c, struct, malloc

让我们看这个例子：

```
struct args{
    char *fname;
}

int main(void){
    struct args tArg;
    tArg.fname = malloc(10);
    strcpy(tArg.fname, "ciao");
    pthread_create(&p1, NULL, thread, (void *)&tArg);
    pthread_join(p1, NULL);
    free(tArg.fname);
    return 0;
}

void *thread(void *p1Arguments){
    struct args *p1 = p1Arguments;
    printf("%s\n", p1->fname);
} 
```

`printf`into导致程序出现段错误，`thread`因为没有 into `p1->fname`。
我能做些什么来传递一个 malloc 的字符串？

**编辑**：对不起，我忘了写`pthread_join`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T17:22:34.863

看起来像：

1）您在 struct tArg 中正确分配和初始化“fname”

2）您也正确地将 tArg 传递到您的线程中

... 但 ...

3）您的主程序在线程访问它之前*取消分配*“fname”（糟糕！）

建议：

*在创建线程之后（以及在调用“free()”之前*）放置一个“getchar()” ，以便 main 在它释放之前和退出之前等待用户点击“ENTER”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T17:23:30.500

你正确通过了。

**你`free(tArg.fname);`，但是线程正在尝试使用`tArg.fname`。**

```
// ...

pthread_create(&p1, NULL, thread, (void *)&tArg);

pthread_join(p1, NULL); // <-- PUT THIS AND GIVE A MOMENT TO THREAD

free(tArg.fname);

// ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T17:23:48.913

除了等待线程完成之外，正如@Claudiu 所述，您还必须强制转换`p1Arguments`- 这是 C 语言中少数需要强制转换的地方之一。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T17:24:46.550

想法是

```
pthread_create(&p1, NULL, thread, (void *)&tArg);
free(tArg.fname); 
```

是不正确的。

线程应该做空闲位。

主要做一个连接

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T17:38:02.237

可能是堆栈问题。

您传递的目标是在堆栈上创建的。当您传递 tArg 地址（位于主程序的堆栈上）时，线程有自己的堆栈部分。我建议你两种解决方案。

1> 通过 malloc tArg 本身尝试。将其声明为指向结构的指针。2> 或将 tArg 定义为全局变量，这将强制它分配在全局数据部分而不是堆栈部分。

# r - 使用唯一索引天的向量子集 xts 对象

> ID：15620935
> 
> 赞同：1
> 
> 时间：2013-03-25T17:20:01.560
> 
> 标签：r, indexing, subset, xts

我正在尝试使用`xts`已处理为唯一时间戳向量的时间戳向量对 xts 对象进行子集化。这是上一个问题的后续，[该](https://stackoverflow.com/questions/15555588/test-if-variables-within-a-time-of-day-subset-meet-conditions-and-return-non-su?noredirect=1#comment22145387_15555588)问题仅得到部分回答。

**一些样本数据：**

```
dput(sample.data.merge, control="all")

structure(c(11.65, 11.13, 11.13, 11.5, 11.8, 11.45, 11.45, 11.08, 
11.08, 11.25, 9.8, 10.45, 10.9, 10.9, 10.9, 10.9, 10.9, 10.9, 
10.45, 10.5, 10.5, 10.08, 10.08, 10.65, 10.08, 10.65, 10.6, 10.65, 
10.65, 10.085, 10.145, 11.9, 11.085, 9.35, 9.15, 9.15, 9.9, 9.0875, 
9.3, 9.3, 9.3, 9.35, 9.35, 9.35, 9.25, 9.5, 9.45, 9.3, 11.15, 
11.15, 11.15, 11.15, 11.8, 8, 10.05, 10.05, 10.25, 10.4, 10.15, 
10.15, 10.3, 10.15, 10.1, 11.08, 11.08, 11.08, 11.65, 11.85, 
11.9, 11.9, 11.9, 12.65, 13.35, 13.35, 15.95, 15.9, 15.4, 15.4, 
15.4, 15.4, 15.13, 12.13, 12.35, 11.082, 11.082, 11.08, 12.1, 
12.3, 12.3, 12.4, 12.6, 12.6, 12.13, 12.45, 12.9, 12.9, 12.9, 
14, 12.6, 12.6, 12.45, 15.25, 12.085, 12.95, 12.95, 12.35, 12.13, 
12.8, 14, 14, 12.45, 12.45, 12.45, 12.45, 12.25, 12.6, 12.085, 
15.1, 15.15, 15.35, 15.3, 12.5, 12.5, 12.15, 12.2, 11.085, 11.35, 
11.45, 11.13, 11.13, 11.35, 11.2, 12.5, 12.6, 12.95, 12.95, 12.5, 
12.45, 12.3, 12.3, 12.3, 12.45, 12.45, 12.45, 12.5, 12.45, 12.45, 
12.13, 12.13, 12.65, 190, 190, 190, 190, 130, 190, 190, 190, 
190, 190, 130, 190, 130, 130, 445, 445, 445, 445, 130, 445, 190, 
445, 445, 190, 190, 190, 190, 130, 190, 190, 190, 190, 190, 190, 
190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 
190, 275, 190, 190, 190, 190, 190, 190, 190, 190, 190, 130, 130, 
190, 190, 190, 130, 130, 130, 190, 130, 190, 190, 190, 130, 190, 
190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 
1190, 190, 190, 130, 130, 130, 190, 1130, 190, 190, 130, 190, 
190, 190, 190, 190, 190, 130, 130, 190, 190, 375, 190, 190, 190, 
130, 190, 130, 190, 190, 190, 190, 130, 190, 190, 190, 190, 190, 
190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 
130, 130, 130, 190, 130, 190, 190, 190, 130, 130, 445, 445, 130, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, 0, 0, NA, NA, NA, NA, NA, 0.21, 0.21, 0.26, 0.0250000000000004, 
0, 0.0250000000000004, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, 0.0249999999999995, 0.0250000000000004, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 0.0250000000000004, 
0.100000000000001, 0.39, NA, NA, NA, NA, NA, 0.0250000000000004, 
NA, NA, NA, NA, NA, 0.524999999999999, 0.25, 0, 0, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, 0.149999999999999, 0.135000000000001, 
0.149999999999999, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, 0.409999999999999, 0.375, 0.3, 0.635, 0.385, 0.335, 0.175000000000001, 
0, NA, NA, NA, NA, NA, 1.4, 0.2, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, 0.109999999999999, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, 0.0749999999999993, 0.0749999999999993, 0.0749999999999993, 
0.0250000000000004, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 0, 0, NA, NA, NA, 
NA, NA, 127.5, 0, 0, 0, 0, 0, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, 0, 0, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, 30, 30, 30, NA, NA, NA, NA, 
NA, 0, NA, NA, NA, NA, NA, 0, 0, 0, 0, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, 30, 30, 30, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, 0, 30, 30, 0, 0, 0, 0, 0, NA, NA, NA, NA, NA, 0, 
0, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 0, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, 0, 0, 30, 0, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 10.9, 
10.9, NA, NA, NA, NA, NA, 10.29, 10.29, 10.34, 10.625, 10.65, 
10.625, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 9.325, 
9.325, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, 10.15, 10.225, 10.69, NA, NA, NA, NA, NA, 11.9, 
NA, NA, NA, NA, NA, 15.4, 15.4, 15.4, 15.4, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, 12.35, 12.35, 12.425, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, 12.65, 12.575, 12.875, 12.875, 12.625, 
12.625, 12.625, 12.45, NA, NA, NA, NA, NA, 13.85, 15.125, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, 11.275, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, 12.375, 12.375, 12.375, 12.45, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, 445, 445, NA, NA, NA, NA, NA, 317.5, 190, 190, 190, 190, 
190, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 190, 
190, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, 160, 160, 160, NA, NA, NA, NA, NA, 190, NA, NA, 
NA, NA, NA, 190, 190, 190, 190, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, 160, 160, 160, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, 190, 190, 190, 190, 190, 190, 190, 190, NA, NA, NA, NA, 
NA, 190, 190, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 190, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, 130, 130, 160, 190, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NaN, Inf, NA, NA, NA, NA, NA, 0.999999999999996, 
1.71428571428572, 1, 1, NaN, 21.5999999999997, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, 1.00000000000004, 2.99999999999993, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, 37.1999999999995, 8.54999999999987, 0.999999999999998, 
NA, NA, NA, NA, NA, 29.9999999999996, NA, NA, NA, NA, NA, 0, 
0, NaN, Inf, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 1.66666666666666, 
1.62962962962963, 0.166666666666658, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, 1.26829268292683, 0.600000000000004, 
3.75, 1.77165354330709, 0.454545454545457, 0.522388059701495, 
1, NaN, NA, NA, NA, NA, NA, 1.07142857142857, 0.875000000000003, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 0.681818181818179, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, 1, 1, 1, 2, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NaN, Inf, NA, NA, NA, NA, NA, 1, NaN, NaN, Inf, NaN, NaN, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NaN, NaN, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, 1, 1, 1, NA, NA, NA, NA, NA, Inf, NA, NA, NA, NA, NA, 
NaN, NaN, NaN, NaN, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 1, 
1, 32.3333333333333, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NaN, 6.16666666666667, 0, NaN, NaN, Inf, NaN, Inf, NA, 
NA, NA, NA, NA, NaN, NaN, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NaN, NA, NA, NA, NA, NA, NA, NA, NA, NA, NaN, Inf, 1, NaN, 
NA, NA, NA, NA, NA), .Dim = c(150L, 8L), .Dimnames = list(NULL, 
    c("price", "volume", "madprice", "madvolume", "medianprice", 
    "medianvolume", "absdevmadprice", "absdevmadvolume")), index = structure(c(1325584080, 
1325594940, 1325594940, 1325604600, 1325759100, 1325762520, 1325762520, 
1325769300, 1325769300, 1325848080, 1325864880, 1326128220, 1326196500, 
1326196500, 1326196500, 1326196500, 1326196500, 1326196500, 1326209700, 
1326279480, 1326283620, 1326288300, 1326288300, 1326289680, 1326289680, 
1326289680, 1326292320, 1326294060, 1326294600, 1326297600, 1326387000, 
1326456720, 1326467160, 1326711600, 1326723000, 1326724260, 1326809940, 
1326814860, 1326885960, 1326885960, 1326889980, 1326894000, 1326895200, 
1326895200, 1326898080, 1326986700, 1326987240, 1326992100, 1327072140, 
1327328040, 1327328040, 1327328040, 1327417920, 1327423140, 1327424820, 
1327425240, 1327483200, 1327496520, 1327570320, 1327570320, 1327575420, 
1327588680, 1327588980, 1327595880, 1327595880, 1327595880, 1327664820, 
1327674720, 1327680660, 1327680780, 1327680780, 1327683960, 1327914300, 
1327914300, 1327915260, 1327918140, 1327924860, 1327924920, 1327924980, 
1327924980, 1327927680, 1328013360, 1328014200, 1328025000, 1328025000, 
1328026740, 1328089440, 1328091360, 1328091360, 1328110620, 1328111340, 
1328111340, 1328112420, 1328113800, 1328193540, 1328194080, 1328194140, 
1328196720, 1328274360, 1328274420, 1328278320, 1328519280, 1328520120, 
1328520600, 1328520600, 1328524140, 1328527980, 1328531580, 1328540880, 
1328540880, 1328547600, 1328547660, 1328547720, 1328547780, 1328607060, 
1328608080, 1328618760, 1328623380, 1328623380, 1328625720, 1328631480, 
1328717760, 1328717880, 1328793000, 1328797980, 1329132840, 1329210480, 
1329215400, 1329215820, 1329215820, 1329219480, 1329223140, 1329300900, 
1329301620, 1329315240, 1329315240, 1329388740, 1329389700, 1329390000, 
1329390000, 1329390180, 1329391860, 1329391860, 1329391860, 1329402120, 
1329467700, 1329467700, 1329469080, 1329469080, 1329471300), tzone = "", tclass = c("POSIXlt", 
"POSIXt")), .indexCLASS = c("POSIXlt", "POSIXt"), .indexTZ = "", tclass = c("POSIXlt", 
"POSIXt"), tzone = "", class = c("xts", "zoo")) 
```

**编码：**

```
sample.data.mergesub <- sample.data.merge['T10:30/T17:30']
sample.data.mergeout <- sample.data.mergesub[ which((sample.data.mergesub$absdevmadprice >=5 & sample.data.mergesub$absdevmadprice < Inf) | (sample.data.mergesub$absdevmadvol>=10 & sample.data.mergesub$absdevmadvol<Inf)),]
sample.data.unique <- unique(.indexday(sample.data.mergeout)) 
```

因此，这`sample.data.unique`是索引天数的向量。**问题：**我想用它从原始数据集中提取全天的数据`sample.data`，以便以后绘制全天的交易图，而不是数据子集。例如，如果 2012 年 1 月 3 日 10:53:00 满足 absdevmadprice >= 5 且小于无限的条件，那么我想将日期（2012 年 1 月 3 日）返回到向量中并使用它来子集原始数据集。这将选择当天的所有观察结果（因此在整个交易期间），然后我可以绘制这一天的图表。

我已经尝试过这段代码（基于Joshua's answer [here](https://stackoverflow.com/questions/14101694/subsetting-in-xts-using-a-parameter-holding-dates)），但它不起作用：

```
> sample.data.uniquePOS<-sample.data.merge[paste(as.Date(as.POSIXct(sample.data.unique, origin = "1970-01-01 00:00.00 UTC", tz="GMT")))] 
```

它只返回列名：

```
> sample.data.uniquePOS
price volume madprice madvolume medianprice medianvolume absdevmadprice
     absdevmadvolume 
```

有关信息，变量的结构：

```
> str(sample.data.merge)
An ‘xts’ object on 2012-01-03 09:48:00/2012-02-17 09:35:00 containing:
  Data: num [1:150, 1:8] 11.6 11.1 11.1 11.5 11.8 ...
 - attr(*, "dimnames")=List of 2
  ..$ : NULL
  ..$ : chr [1:8] "price" "volume" "madprice" "madvolume" ...
  Indexed by objects of class: [POSIXlt,POSIXt] TZ: 
  xts Attributes:  
 NULL

> str(sample.data.uniquePOS)
An 'xts' object of zero-width

> str(sample.data.unique)
 num 15371 
```

感谢您的帮助（如果有人可以解释为什么代码不起作用！）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:35:58.757

# 回答自己的问题：

使用这些帖子（阿南达对此的回答[，](https://stackoverflow.com/questions/11464578/r-subsetting-a-data-frame-using-a-list-of-dates-as-the-filter/11466229#11466229)约书亚对此的回答[，](https://stackoverflow.com/questions/14101694/subsetting-in-xts-using-a-parameter-holding-dates)以及我在[这里](https://stat.ethz.ch/pipermail/r-help/2010-March/233159.html)`as.Date.numeric`找到的功能）我能够解决我自己的问题。这行代码似乎做到了：

```
sample.data.uniquePOS <- sample.data.merge[paste(as.Date.numeric(sample.data.unique, origin= "1970-01-01 00:00.00 UTC", tz="GMT")),] 
```

无法很好地解释为什么它与以下相比有效，但也许`as.POSIXct`不能采用相同的格式`as.Date.numeric`？

```
sample.data.uniquePOS <- sample.data.merge[paste(as.Date(as.POSIXct(sample.data.unique, origin = "1970-01-01 00:00.00 UTC", tz="GMT")))] 
```

# jquery - JQuery UI 对话框 - 框未显示

> ID：15620940
> 
> 赞同：0
> 
> 时间：2013-03-25T17:20:12.233
> 
> 标签：jquery, html, dialog

对话框由于某种原因没有显示..有人知道为什么吗？

我最初认为这是因为 jquery 的链接，但它们对我来说似乎很好？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

    <head>

        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>Untitled Document</title>

        <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
        <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
        <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>

        <script>
        $('#dialog').dialog({
            close: function() {
                $(this).find(':checked').each(function() {
                    var name = $(this).attr('name');
                    $('#form [name="' + name + '"]').val(true);
                });
            },
            buttons:{Close:function(){
            $(this).dialog('close');
        }
        }
        })
        </script>

    </head>

    <body>

        <form id="form">

            <div>form Box1<input type="text" name="box1"  /></div>
            <div>form Box2<input type="text" name="box2"  /></div>
            <div>form Box3<input type="text" name="box3"  /></div>

        </form>

        <div>Text fields shown for demo, use hidden in real form</div>

        <div id = "dialog">

            Box1<input type="checkbox" name="box1"  />
            Box2<input type="checkbox" name="box2"  />
            Box3<input type="checkbox" name="box3"  />

            <div>Checked boxes auto update to form on close</div>

        </div>  

    </body>
</html> 
```

取自这个似乎有效的 jsfiddle - [http://jsfiddle.net/pLWzs/](http://jsfiddle.net/pLWzs/)

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T17:21:38.133

您需要将代码放入文档就绪调用中。

```
$(document).ready(function() {
  // Handler for .ready() called.
}); 
```

jsFiddle 会自动为您执行此操作，但您必须在自己的代码中执行此操作。

例如：

```
$(document).ready(function () {
    $('#dialog').dialog({
        close: function () {
            $(this).find(':checked').each(function () {
                var name = $(this).attr('name');
                $('#form [name="' + name + '"]').val(true);
            });
        },
        buttons: {
            Close: function () {
                $(this).dialog('close');
            }
        }
    })
}); 
```

否则，如果没有它，您的代码将在元素实际存在之前执行。

# vbscript - 使用VBscript从一个excel复制所有工作表内容并粘贴到另一个excel的一张工作表中

> ID：15620942
> 
> 赞同：1
> 
> 时间：2013-03-25T17:20:36.533
> 
> 标签：vbscript

```
Sub Prats
  Set objExcel = CreateObject("Excel.Application") 
  objExcel.Visible = True
  Set objRawData = objExcel.Workbooks.Open("C:\A.xlsx")  'Copy From File
  Set objPasteData= objExcel.Workbooks.Open("C:\B.xlsx") 'Paste To File
  Set obj1 = objPasteData.WorkSheets("Sheet1")           'Worksheet to be cleared
  obj1.Cells.Clear
  countSheet = objRawData.Sheets.Count
  log.Message("Prats    " &countsheet)

  For i = 1 to countSheet
    objRawData.Activate
    name = objRawData.Sheets(i).Name
    objRawData.WorkSheets(name).Select
    objRawData.Worksheets(name).Range("A1").Select
    objExcel.ActiveSheet.UsedRange.Select
    usedRowCount2 = objExcel.Selection.Rows.Count 
    objExcel.Range("A1:B" & usedRowCount2).Copy

    objPasteData.Activate
    objPasteData.WorkSheets("Sheet1").Select
    objExcel.ActiveSheet.UsedRange.Select
    usedRowCount1= objExcel.Selection.Rows.Count
    objExcel.ActiveSheet.UsedRange.Select
    objExcel.Range("A" & usedRowCount1).Select
    objPasteData.Worksheets("Sheet1").Range("A" &(usedRowCount1+1)).PasteSpecial Paste =xlValues

  Next
  objPasteData.Save

End sub 
```

这是我正在使用的代码。

问题是它覆盖了第一张纸的最后一行与第二张纸的第一行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T18:46:25.290

我已经告诉您[从中复制](http://www.visualbasicscript.com/fb.ashx?m=99346)代码的人，他应该使用[Cells](http://msdn.microsoft.com/en-us/library/office/ff194567.aspx)属性而不是使用范围。但是，如果您绝对必须使用范围，至少不要一直激活和选择。以下行应该足以复制：

```
For i = 1 To countSheet
  usedRowCount2 = objRawData.Sheets(i).UsedRange.Rows.Count
  If i = 1 Then
    usedRowCount1 = 0
  Else
    usedRowCount1 = objPasteData.Sheets(1).UsedRange.Rows.Count
  End If

  objRawData.Sheets(i).Range("A1:B" & usedRowCount2).Copy
  objPasteData.Sheets(1).Range("A" & (usedRowCount1+1)).PasteSpecial -4163
Next 
```

**编辑：**行`UsedRange`数至少为 1，因此`usedRowCount1+1`在从第一张表复制数据时会产生空的第一行。该行仍然未使用（即它不包含在 中`UsedRange`），因此使用的行数比最后使用的行数少一。因此，您必须区分第一张纸和所有其他纸。

# c - 从特定时区获取日期 - C

> ID：15620951
> 
> 赞同：0
> 
> 时间：2013-03-25T17:21:01.033
> 
> 标签：c, date, time, timezone

我需要从特定时区获取日期/时间**而不**设置`TZ`变量。

我尝试用`gmtime`and加上小时差，我用这种方法得到的问题是时间变化，例如日光，或者由小时引起的中国/美国之间的天差，我需要处理所有其中，有什么方法/库或任何我可以用来获取包含这些变化的特定时区的方法吗？

我正在使用win32，如果它可以与所有东西一起使用会更好。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T20:50:59.980

执行此操作的最佳方法（如果我正确理解您的要求）是使用 Olson/IANA TZ 数据库。[Wikipedia 文章](http://en.wikipedia.org/wiki/Tz_database)指向[IANA](http://www.iana.org/time-zones)来源。

使用这个库不是单行的（尽管取决于您的平台，该库可能已经安装或易于安装）。但是（a）这是正确的做法，（b）它与您可能找到的其他任何东西一样强大和准确，并且（c）众所周知，我希望您在谷歌上搜索信息不会有什么困难和有关它的教程，如果你需要的话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T17:49:36.057

也许[`localtime()`](http://linux.die.net/man/3/localtime)会为你工作。

```
#include <stdio.h>      /* puts, printf */
#include <time.h>       /* time_t, struct tm, time, localtime */

int main ()
{
  time_t rawtime;
  struct tm * timeinfo;

  time (&rawtime);
  timeinfo = localtime (&rawtime);
  printf ("Current local time and date: %s", asctime(timeinfo));

  return 0;
} 
```

# c# - 如何使应用程序以全屏模式显示，覆盖开始菜单？

> ID：15620954
> 
> 赞同：1
> 
> 时间：2013-03-25T17:21:10.297
> 
> 标签：c#, winforms, windows-ce, smart-device

我正在为 Honeywell Dolphin 6100 开发一个应用程序，这是一款带有条形码扫描仪的移动计算机，它使用类似 Windows CE 5.0 的操作系统。

问题是我无法将应用程序全屏显示（屏幕下方的开始菜单坚持出现），我尝试了很多如下代码但不幸的是没有成功：

**解决方案 1**：

```
int w = Screen.PrimaryScreen.Bounds.Width;
int h = Screen.PrimaryScreen.Bounds.Height;
this.Location = new Point(0, 0);
this.Size = new Size(w, h); 
```

**解决方案 2**：

```
this.TopMost = true;
this.FormBorderStyle = FormBorderStyle.None;
this.WindowState = FormWindowState.Maximized; 
```

有人对此有解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T11:26:51.490

您可以通过`Start->Settings->Taskbar and Start Menu...`取消选择`Always on top`并选择来自动隐藏任务栏`Auto hide`。

如果这不是一个选项，那么有一种**危险**的方法可以防止`explorer.exe`在引导过程中加载。为此，`[HKEY_LOCAL_MACHINE\init]`不能写保护。为了防止`explorer.exe`加载您修改以下注册表项

```
[HKEY_LOCAL_MACHINE\init]
Launch50="explorer.exe" 
```

例如`no_explorer.exe`。输入`50`会`Launch50`因设备而异。

如果您在这里搞砸了，您将需要 telnet 访问您的设备，以便您可以`explorer.exe`手动启动或恢复出厂设置。建议您在尝试之前先将设备恢复出厂设置。请务必注意，您的应用程序必须从 OEM 启动器启动，或者通过将您自己的应用程序添加到设备的启动过程中来启动。有关如何执行此操作的信息，请参阅[http://msdn.microsoft.com/en-us/library/ms901773.aspx 。](http://msdn.microsoft.com/en-us/library/ms901773.aspx)

**编辑：**如果您将应用程序添加到引导过程中，则需要向系统发出应用程序已启动的信号。您可以在 C++ 中创建一个简单的引导程序来完成此操作。

```
#include "stdafx.h"
#include <Windows.h>
#include <iostream>

void StartMyAppFunction();

int WINAPI WinMain(HINSTANCE hInstance,
                   HINSTANCE hPrevInstance,
                   LPTSTR    lpCmdLine,
                   int       nCmdShow)
{
    StartMyAppFunction( );
    // Since this is application is launched 
    // through the registry HKLM\Init we need 
    // to call SignalStarted passing in 
    // the command line parameter
    SignalStarted(_wtol(lpCmdLine));
    return 0;
}

void StartMyAppFunction() ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:55:50.490

使用一些技术（WinCE`auto-hiding`中`task bar`已经存在哪个选项`control panel`。您可以参考）。

任务栏自动隐藏 = 全屏应用程序.. :)

# mysql - 用于在 Java 中对 mysql 进行分片的库

> ID：15620960
> 
> 赞同：0
> 
> 时间：2013-03-25T17:21:25.147
> 
> 标签：mysql, hibernate, sharding

很快，我们将分片我们的 mysql 数据库以实现水平扩展。我们的技术栈基于spring、hibernate。

但是，我还没有找到任何可以在应用程序级别支持分片的休眠替代方案。

我阅读了有关休眠分片的信息，但它不再维护，因此我不适合在生产中使用它。

此外，对于使用 mysql 分片的 facebook、twitter、digg 等公司，我很惊讶没有 GA hibernate 替代分片。

如果有人可以建议一些支持开箱即用的分片的Java持久性框架，我将不胜感激。

提前致谢！！！！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-26T22:32:41.480

免责声明：我为[ScaleBase](http://www.scalebase.com)工作，这是一个完整的 MySQL 横向扩展解决方案的提供商，如果你愿意的话，它是一个“自动分片机”。

我相信代码之外的解决方案。这样，整个生态系统，包括来自 MySQL 命令行的 ad-hoc 和管理查询以及 MySQLDump 等实用程序也“知道”分片。

这是 Hib Shards 或任何受限于持久层的分片框架在应用程序代码中的主要缺点。

我们的网站上有一些关于基于键的分片（散列、范围、列表）和数据分布的好资源：[http ://www.scalebase.com/products/database-sharding/](http://www.scalebase.com/products/database-sharding/) [http://www.scalebase.com/资源/网络研讨会/](http://www.scalebase.com/resources/webinars/) - （搜索“网络研讨会 – 10.23.12：自动数据分发的好处”）

我也邀请你看看我的博客：[http ://database-scalability.blogspot.com](http://database-scalability.blogspot.com)

希望我有所帮助。

# javascript - 遍历 MongoDB 中的所有文档或对象

> ID：15620967
> 
> 赞同：0
> 
> 时间：2013-03-25T17:21:39.453
> 
> 标签：javascript, node.js, mongodb

在 MongoDB 中显示第 n 个对象/文档的命令是什么？

假设我有 4000 个对象存储在数据库中，我想遍历所有 4000 个对象以对它们应用命令，我会这样做：

```
for(i=0;db.foo.count();i++){
    do something
} 
```

应该`i`是什么，`i`作为第一个索引。如何遍历 MongoDB 中的所有对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T17:24:48.080

这是`find`查询的签名。

```
var cursor = collection.find(query, [fields], options);
cursor.sort(fields).limit(n).skip(m).each(function(err, doc) {}); 
```

要访问第 n 个对象，请使用`skip`. 或者对于第 n 个对象之后的批次，您可以使用`limit`and `skip`。供大量收藏使用`stream`。

# c# - c#，使用.length方法

> ID：15620970
> 
> 赞同：0
> 
> 时间：2013-03-25T17:22:07.930
> 
> 标签：c#, arrays

我有一种方法需要根据数组的长度进行计算。我正在使用 .length 方法进行计算，但该方法正在使用数组的最大长度（我已声明为 10）进行算术运算。这是我用来从用户那里获取数据的循环。我知道这不是对数组数据进行排序的理想方法，但这是用于家庭作业，它围绕正确使用 .Split 方法（这不是我遇到的问题）。

```
for (int i = 0; i < MAX; i++)
{
    Console.Write("Enter a name and a score for player #{0}: ", (i + 1));
    string input = Console.ReadLine();
    if (input == "")
    {
        // If nothing is entered, it will break the loop.
        break; 
    }

    // Splits the user data into 2 arrays (integer and string).
    string[] separateInput = input.Split();
    name [i] = separateInput[0];
    score [i] = int.Parse(separateInput[1]);
} 
```

这是我用来计算平均分的方法：

```
static void CalculateScores(int[] score)
{
    int sum = 0;
    int average = 0;
    for (int i = 0; i < score.Length; i++)
    {
        sum += score[i];
        average = sum / score.Length;
    }

    Console.WriteLine("The average score was {0}", average); 
```

我正在调用这样的方法：

```
 CalculateScores(score); 
```

编辑：我的数组被声明：

```
 int[] score = new int[MAX]; //MAX == 10.
    string[] name = new string[MAX]; 
```

CalculateScores 方法在进行数学运算时，就像 score.Length 始终为 10 一样，无论我向控制台输入了多少不同的分数组合。我不知道是不是因为我收集输入的循环不正确，或者我的 CalculateScores 方法有缺陷。提前致谢。

编辑：澄清一下，我只是对为什么我不能从CalculateScores 中得到正确的值感到困惑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T17:26:58.023

`Length`总是表示数组的大小，如果你已经实例化为 10，那么无论你填充了多少项，它总是 10。

有很多方法可以解决您的问题，但我会选择一种简单的方法，即在计算中不使用长度，而只是将项目数存储在一个单独的变量中：

```
int numItems = 0;
for(int i=0;i<MAX;i++)
{
    Console.Write("Enter a name and a score for player #{0}: ", (i + 1));
    string input = Console.ReadLine();
    if (input == "")
    {
        break; // if nothing is entered, it will break the loop
    }
    numItems++;
    ...
}

static void CalculateScores(int[] score, int numItems)
{
    // don't use Length at all, use numItems instead
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T17:35:43.697

数组一般用于固定大小的数据，所以该`Length`属性反映了数组可以容纳多少项，而不是数组中元素的数量。最简单的解决方法是使用 a [`List(T)`](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)，它用于可变参数数据。

```
// A nice abstraction to hold the scores instead of two separate arrays.
public class ScoreKeeper
{
    public string Name { get; set; }
    public int Score { get; set; }
}

var scores = new List<ScoreKeeper>();

for (int i = 0; i < MAX; i++)
{
    Console.Write("Enter a name and a score for player #{0}: ", (i + 1));
    string input = Console.ReadLine();
    if (input == "")
    {
        // If nothing is entered, it will break the loop.
        break; 
    }

    // Splits the user data into 2 arrays (integer and string).

    string[] separateInput = input.Split();

    scores.Add(new ScoreKeeper { Name = separateInput[0], Score = int.Parse(separateInput[1]) });
}

static void CalculateScores(ICollection<ScoreKeeper> scores)
{
    // We take advantage of Linq here by gathering all the
    // scores and taking their average.
    var average = scores.Select(s => s.Score).Average();
    Console.WriteLine("The average score was {0}", average);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T17:33:51.837

手动检查：

```
int sum = 0;
int average = 0;
int length;
for (int i = 0; i < MAX; i++) {
    if(name[i]!=string.empty) {
        sum += score[i];
        length=i+1;
    }       
}
average = sum / length;
Console.WriteLine("The average score was {0}", average); 
```

# cakephp - HMBTM 字段上的表单验证 - CakePHP

> ID：15620975
> 
> 赞同：0
> 
> 时间：2013-03-25T17:22:26.347
> 
> 标签：cakephp, validation

我有一个我正在开发的 cakephp 2.2 应用程序，它允许用户提交费用索赔。费用报销由许多具有费用代码的费用组成。关系如下：

ExpenseClaim hasMany Expense Expense belongsTo ExpenseClaim Expense hasAndBelongsToMany ExpenseCode

我想添加验证以确保表单完成时，每个费用的费用代码都必须完整，但由于某种原因，向费用模型添加正常的验证规则不起作用，显然我遗漏了一些东西。

以下是费用模型中的验证：

```
class Expense extends AppModel {

/**
 * Display field
 *
 * @var string
 */
    public $displayField = 'id';

/**
 * Validation rules
 *
 * @var array
 */
    public $validate = array(
        'date' => array(
            'notempty' => array(
                'rule' => array('notempty'),
                'message' => 'Date cannot be blank',
            ),
        ),
        'sitename' => array(
            'notempty' => array(
                'rule' => array('notempty'),
                'message' => 'Sitename cannot be blank',
            ),
        ),
        'detail' => array(
            'notempty' => array(
                'rule' => array('notempty'),
                'message' => 'Details cannot be blank',
            ),
        ),
        'ExpenseCode' => array(
            'multiple' => array(
                'rule' => array('multiple', array('min' => 1)),
                'message' => 'You need to select at least one tag',
              ),
        ), 
```

当 $this->request->data 通过expenseClaim/add 方法提交时，它看起来像这样：

```
 /app/Controller/ExpenseClaimsController.php (line 179)

array(
    'submit' => 'Save',
    'Expense' => array(
        (int) 0 => array(
            'date' => array(
                'day' => '25',
                'month' => '03',
                'year' => '2013'
            ),
            'sitename' => '123',
            'detail' => 'test',
            'ExpenseCode' => array(
                'ExpenseCode' => ''
            ),
            'billable' => '1',
            'amount' => '100',
            'miles' => '',
            'total' => '100',
            'billable_mileage' => '',
            'recorded_global_mileage_rate' => '0.4'
        )
    ),
    'CashFloat' => array(
        'amount' => ''
    ),
    'ExpenseClaim' => array(
        'user_id' => '16',
        'claim_status_id' => '1',
        'date_submitted' => '2013-03-25 18:20:53'
    )
) 
```

如您所见，ExpenseCode 为空...我如何确保不是这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:26:54.263

我设法通过在我的费用模型中添加以下内容来解决这个问题：

```
function beforeValidate() {

    if (!isset($this->data['ExpenseCode']['ExpenseCode']) || empty($this->data['ExpenseCode']['ExpenseCode'])) {
        $this->invalidate('ExpenseCode', 'Type cannot be blank');
    }
    return true;
} 
```

希望对某人有所帮助。

# python - 在扭曲中顺序排队多个延迟

> ID：15620978
> 
> 赞同：4
> 
> 时间：2013-03-25T17:22:41.123
> 
> 标签：python, twisted

目前我还是一个扭曲的初学者，这让我很烦恼。

我正在通过 TCP 发送一系列命令并等待 lineRecieved 阅读器的响应，这可能需要几秒钟的时间来处理并到达，所以我将它包装在延迟中。第一个 deferred 工作正常，但第二个触发，因为第一个仍在处理导致垃圾，因为端点一次只能处理一个命令。asysc 系统中的预期行为，但不是我需要发生的。如果我有一个或两个命令，我可以使用 deferedChain 来处理，但由于我可能有几十个命令按顺序运行，我担心这会很快变成无法维护的意大利面条。

这样做的干净方法是什么？

非常感谢

**示例代码**

```
def connectionMade(self):
    self.fire_def('command1')
    print'fire command 2'
    self.fire_def('command2')#Fires when command one is running

def fire_def(self,request):
    d = self.getInfo(request)
    d.addCallback(self.print_result)
    return d

def print_result(result):
    print result

def getInfo(self,request):
    print 'sending', request
    self.d  = defer.Deferred()
    self.sendLine(request)
    return self.d

def lineReceived(self, line):
    line = line.strip()
     self.buffer.append(line)
    if self.d is None:
        return
    if  'result_I_want' in self.buffer:
        print 'Firing Callback'
        self.d.callback(self.buffer) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T13:39:53.000

您问题中的代码只知道如何跟踪一个`Deferred`. 如果应用程序代码调用`getInfo`两次而没有足够的干预时间让第一个动作完成并产生结果，那么它将破坏自己的内部跟踪状态：

```
def getInfo(self,request):
    print 'sending', request
    self.d  = defer.Deferred()
    self.sendLine(request)
    return self.d

d_foo = getInfo(foo)
d_bar = getInfo(bar) 
```

在这个序列中，`d_foo`和`d_bar`是不同的`Deferred`实例。但是，在第二次调用 时`getInfo`，属性的值`self.d`从 更改`d_foo`为`d_bar`。`d_foo` `Deferred`丢失了。后来，当 `lineReceived 运行时：

```
def lineReceived(self, line):
    line = line.strip()
    self.buffer.append(line)
    if self.d is None:
        return
    if  'result_I_want' in self.buffer:
        print 'Firing Callback'
        self.d.callback(self.buffer) 
```

`self.d``d_bar`即使该行可能是对foo*请求*的响应。这意味着`d_bar`将得到*foo*的响应，并且`d_foo`永远不会得到任何响应。

`Deferred`为了解决这个问题，在协议上保留一个实例列表（或队列）可能会有所帮助。当发出新的信息请求时附加到它，当收到响应时从它的前面弹出。（我不确定你正在实现什么协议，所以我不知道你将如何决定多少行足以构成响应。如果协议没有定义它，那么它就会被破坏，你可能想要切换到更好的协议。）

如果你解决了这个问题，那么响应至少会被传递到不同的`Deferred`实例。

您还描述了与强制顺序操作有关的问题。有几种方法可以解释这一点。一种方法是将其解释为您一次只希望一个请求在网络上“出色”。换句话说，您不想`getInfo`发送新的请求行，直到*将*`lineReceived`响应数据传递给*上一次*调用`Deferred`返回的.*`getInfo`*

 *在这种情况下，延迟链接就是这样。尽管您有 N 个 Deferred，但当您施加此顺序限制时，实际上您有一系列 2 个 Deferred。您有较早运行的 Deferred 和应仅在较早的结果后才运行的 Deferred。然后将其扩展到 N ，然后将较晚的 Deferred 视为新对中较早的 Deferred，第三个 Deferred 成为新的较晚的 Deferred。

或者换一种说法，如果你有 D1、D2、D3 和 D4，那么你可以像这样链接它们：

```
D2 is chained to D1 and only runs when D1 is complete
D3 is chained to D2 and only runs when D2 is complete
D4 is chained to D3 and only runs when D3 is complete 
```

然而，虽然这可以工作，但它实际上并不是实现序列化的最简单方法。相反，我建议在 : 中明确排队工作`getInfo`并明确取消排队`lineReceived`。

```
def _sendRequest(self, d, request):
    print 'sending', request
    self.d = d
    self.sendLine(request)

def getInfo(self,request):
    if self.d is None:
        d = defer.Deferred()
        self._sendRequest(d, request)
        return d
    else:
        queued_d = defer.Deferred()
        self._requests.append((request, queued_d))
        return queued_d

def lineReceived(self, line):
    line = line.strip()
    self.buffer.append(line)
    if self.d is None:
        return
    if  'result_I_want' in self.buffer:
        print 'Firing Callback'
        now_d = self.d
        self.d = None
        buffer = self.buffer
        self.buffer = []
        if self._requests:
            request, queued_d = self._requests.pop(0)
            self._sendRequest(queued_d, request)
        now_d.callback(buffer) 
```

请注意代码中如何注意在行*前*将`lineReceived`所有内容置于一致状态。这是一个微妙但重要的观点。可能存在影响协议的回调 - 例如，通过再次调用。在使该代码运行之前，协议处于一致状态很重要，否则它会混淆 - 可能是通过乱序发送请求，或者在实际发送请求时将请求排队。这是使代码安全防止*重入*的示例。这并不是使用 Twisted 的程序所独有的想法，但由于人们经常将重入的想法与线程程序联系起来，因此人们在编写基于 Twisted 的代码时往往会忽略这种可能性。*`now_d.callback(buffer)``now_d``getInfo`*

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T23:24:55.920

基本上，如果您希望它们一个接一个地执行，您就可以彼此返回延迟。

因此，您希望 d2 仅在 d1 完成后执行，那么，从 d1 的回调中返回 d2。

换句话说，根据您的示例，您需要在 command1 回调末尾附近的某个地方调用 command2。***

# delphi - Delphi TWriter.WriteListBegin

> ID：15620979
> 
> 赞同：-2
> 
> 时间：2013-03-25T17:22:44.697
> 
> 标签：delphi, delphi-xe

我有一个组件，它使用 TWriter 类将不同的信息写入 blob。问题是某些 blob 已不正确地保存到 blob 中（或在另一个数据序列下），我需要以某种方式纠正这些错误。当我期待[WriteListBegin](http://docwiki.embarcadero.com/Libraries/XE2/en/System.Classes.TWriter.WriteListBegin)或[WriteListEnd](http://docwiki.embarcadero.com/Libraries/XE2/en/System.Classes.TWriter.WriteListEnd)并且我收到 EReadError“无效的属性值”时，问题就出现了。我正在考虑逐字节读取流，并知道这些分隔符的位置。我怎么知道我遇到的是 WriteListBegin 还是 WriteListEnd？

LE：这个问题不能像评论所说的那么容易解决。我不知道供应商，所以我不能询问详细信息。关于 TWriter 机制背后的内容，这是下面的汇编例程，我不明白字节写的是什么

> 写入器对象的关联流的列表开始标记

过程 TWriter.Write(const Buf; Count: Longint); 汇编器；

可能我会开始编写自己的自定义 TReader 以修复虚假流。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T22:22:24.503

如果我很好地解决了您的问题，那么我了解您的数据已损坏，显然这些数据无法正确解析。具体来说，列表开始和结束标记丢失，或者顺序错误或位置错误。

我可以想到四种解决方案来解决这个问题：

1.  请参阅以获取未损坏的数据（询问供应商）。
2.  手动修复数据（如果在合理的大小范围内）。
3.  编写一个自己的自定义解析器来自动修复标记，并提前使用它。
4.  对每一行使用`TWriter`, 记住 current `Position`，检查当前行，重写，替换或忽略该行以防损坏，并在必要时返回旧位置。

如果多个数据块以相同的方式损坏，部分手动调查 (2) 可能会立即导致自定义解析器 (3)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:39:22.927

我通过读取数据类型直到读者解决了这个问题。[大多数 blob 的EndOfList](http://docwiki.embarcadero.com/Libraries/XE2/en/System.Classes.TReader.EndOfList)分隔符。

谢谢大家，尤其是-1

# html - 谷歌地图停留在左上角

> ID：15620986
> 
> 赞同：0
> 
> 时间：2013-03-25T17:23:09.880
> 
> 标签：html, css, google-maps, position

我想将谷歌地图定位在我的页面底部，但无论我插入什么数字，它都会一直停留在左上角并且不会让步。我可以调整它的大小，但我似乎无法移动定位。有什么帮助吗？

HTML：

```
<iframe 
    marginwidth="0" marginheight="0" scrolling="no" width="422" height="300"
    frameborder="0" scrolling="no" 
    src="https://maps.google.ca/maps?ie=UTF8&amp;cid=7805933538308657347&amp;q=Hibiscus&amp;gl=CA&amp;hl=en&amp;t=m&amp;z=16&amp;iwloc=A&amp;output=embed">
    </iframe> 
```

CSS：

```
 .iframe  {
    position: absolute; 
    padding-bottom: 65%;
    padding-top: 30px;
    overflow: hidden;
    top: 8000px;
    left: 400px;
    width: 100%;
    height: 100%;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T05:43:03.047

我认为你的问题在于你的 CSS。你有一个`.iframe`这意味着任何元素`class="iframe"`都将继承这些属性。您提供的 html 看起来不像任何地方都有 iframe 类。您可以保持您的 CSS 相同并添加`class="iframe"`到您的 iframe 或更改`.iframe`为`iframe`您的 CSS。就个人而言，我会选择`.iframe`并添加`class="iframe"`到，`iframe`但我会将类重命名为`.google-maps`

```
<iframe class="iframe" ...></iframe>

iframe /*or*/ .iframe{
    position: absolute; 
    padding-bottom: 65%;
    padding-top: 30px;
    overflow: hidden;
    top: 8000px;
    left: 400px;
    width: 100%;
    height: 100%;
} 
```

**编辑：** 再次查看您的问题，我建议尝试 position:{absolute, relative or fixed} 以查看是否更改可能解决您的问题的位置属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T17:42:20.813

只需将 iframe 放在页面的页脚标记中。

HTML

```
<html>

<body>
stuff...
</body>
<footer>
<iframe style="width:100%; height:100%; position:absolute;"
    marginwidth="0" marginheight="0" scrolling="no" width="422" height="300"
    frameborder="0" scrolling="no" 
    src="https://maps.google.ca/maps?ie=UTF8&amp;cid=7805933538308657347&amp;q=Hibiscus&amp;gl=CA&amp;hl=en&amp;t=m&amp;z=16&amp;iwloc=A&amp;output=embed">
    </iframe>
</footer>
</html> 
```

CSS

```
.iframe  {
position: absolute;
padding-bottom: 65%; //65% padding-bottom is massive... are you sure you want that much?
padding-top: 30px;
width: 100%;
height: 100%;
//overflow:hidden; Why that? Doesn't do anything usefull in this situation.
//left:400; Is it supposed to be 400px? If so, your page is pretty huge considering you have a map the size of your page.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T18:51:28.607

`bottom:0;`由于您正在实现绝对位置，我想如果您希望它始终位于页面底部，您可以添加iframe 类

```
.iframe  {
    position: absolute; 
    bottom:0;
    overflow: hidden;
    left: 400px; <-- do you want to set margin on the left side of the map?
    width: 100%;
    height: 100%;
    } 
```

# security - 如何在不提供 AWS 凭证的情况下签署 Amazon S3 请求？

> ID：15620987
> 
> 赞同：0
> 
> 时间：2013-03-25T17:23:22.697
> 
> 标签：security, amazon-s3

我们有一个 Java 产品，它可以从 Amazon S3 放置和获取数据。我们已经通过使用 Amazon SDK for Java 成功实现了一个负责该任务的类。

但是，据我所知，要通过库与 Amazon S3 交互，您必须`AmazonS3Client`通过提供访问密钥和密钥来实例化一个对象。

即使这种技术可以通过使用 Amazon IAM 相对安全，并将密钥的访问权限限制在您想要提取和放置数据的特定 S3 存储桶中，但从某种意义上说，它仍然是一个安全漏洞，有人可以反编译您的应用程序以提取密钥并使用它们来访问您的存储桶的数据。

有没有更安全的方法来做到这一点？我们可以避免在应用程序中嵌入 AWS 凭证吗？我们可以对我们的服务器进行 REST 调用以对请求进行签名（并保持密钥保密）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T03:33:00.410

查看[Amazon Secure Token Service](http://docs.aws.amazon.com/STS/latest/UsingSTS/Welcome.html) ( [JavaDoc](http://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/index.html?com/amazonaws/services/securitytoken/package-summary.html) ) 以及[Token Vending Machine](http://aws.amazon.com/articles/4611615499399490)，看看这些是否有助于解决您的问题。

# ios - 当有多行时，“手动”处理 UITextView 的文本和光标位置中断

> ID：15620988
> 
> 赞同：1
> 
> 时间：2013-03-25T17:23:26.950
> 
> 标签：ios, uiscrollview, uitextview

我有一个狭窄的`UITextView`（大约 1 行高），我只以编程方式添加文本，在`text`单击按钮时设置它的属性。我还手动处理光标位置，`selectedRange`在文本更改时设置。只要我只有一行文字，一切都很好。

当我有两行或多行文本并尝试在第一行插入文本时，文本已正确插入并且光标位置仍在正确位置但`UITextView`滚动到底部。然后，当我在顶部添加另一段文本时，它会向上滚动到“正确”位置。然后，此模式在除最后一行之外的每一行重复输入，使 UITextView 为每个按下的按钮向上和向下滚动。

`UITextView scrollRangeToVisible:`在设置新文本后，我还尝试调用将 selectedRange 属性作为参数传递。那也没有用。

`selectedRange`在设置`text`. 然后它可以正常工作，但只有在第`UITextView`一次向下滚动到底部 0.5 秒之后。这似乎表明`setText`UITextView 的方法在某种程度上是异步的，并且在我已经设置`selectedRange`或调用之后完成`scrollRangeToVisible`，并将 UITextView 重新调整到它认为是所需的。

谁能告诉我发生了什么，以及如何解决这个问题。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T21:32:22.050

s的自动滚动行为`UITextField`有时很烦人并且难以驾驭。

您是否需要用户手动编辑文本？如果没有，请使用 multiline `UILabel`。

如果是，也使用多线并在用户点击后`UILabel`即时交换它。`UITextView`重新打开它`didEndEditing`。这种技术在表格视图中对我很有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T08:57:29.097

我解决了这个问题！在开始创建自定义输入视图的迷宫时，我开始实现`UITextInput`并发现`UITextInput`协议声明了许多有趣的方法。令人敬畏的是`UITextView`实现了该协议。因此，即使它不在即时`UITextView`API 参考中，您也可以`UITextInput`调用`UITextView`. 例如`insertText:`（来自`UIKeyInput`协议）和`replaceRange:withText:`. 他们使以编程方式使用`UITextView`. 希望这也可以帮助其他人！

# r - 如何在 R 中逐个单元格地读取矩阵单元格（while 循环嵌套在两个 for 循环中）？

> ID：15620989
> 
> 赞同：0
> 
> 时间：2013-03-25T17:23:29.280
> 
> 标签：r

我需要从数据集中提取阵雨的长度和强度（数量）。数据是一个矩阵，其中每一行包含一天的数据。数据以 5 分钟的间隔拆分，因此每列是一个 5 分钟的间隔（288 列）。我现在想找到阵雨的开始，并将雨量和长度相加，直到它停止。因为阵雨可以延续到第二天，所以我需要能够在下一行继续求和。为了使我的循环正常工作，我将最后一列添加到矩阵的前面，但将其向下移动了一行（基本上将上一行的最后一个单元格添加到下一行的前面）：

```
# create an example matrix
Dat=matrix(1:25, 5, 5)
a=c(0,0,0,0,1) # last column added to the front
b=c(0,0,0,1,0) # last column
Dat=cbind(a,Dat,b,b)
e=c(0,0,0,0,0,0,0,0) # just another row
Dat=rbind(Dat,e) 
```

矩阵看起来像这样

```
0 1  6 11 16 21 0 0   
0 2  7 12 17 22 0 0  
0 3  8 13 18 23 0 0  
0 4  9 14 19 24 1 1  
1 5 10 15 20 25 0 0  
0 0  0  0  0  0 0 0 
```

现在我运行我的代码：

```
Rain=0
Length=0
results=data.frame()
i=1
j=2

for (i in 1:nrow(Dat)) { # rows
for (j in 2:ncol(Dat)) {  # cols

  if(Dat[i,j]==0){   # if there is no rain 
    print(c(i,j,"if"))
    j=j+1            # move on to next cell
       if(j==(ncol(Dat)+1)){ # at the end of the line,move to the next row
      i=i+1
      j=2 
    }} 
  else {print(c(i,j,"else")) # if there is rain

    if (Dat[i,j-1]==0) { # check if there was no rain before => start of rain)
     Rain=0 
     Length=0 
     while(Dat[i,j]>0){  # while it is raining, add up
        print(c(i,j,"while"))
        Rain=Rain+Dat[i,j]
        Length=Length+5
        j=j+1        # move to next cell
        if(j==(ncol(Dat)+1)){ # at the end of a row, move to the beginning of the next
         i=i+1
         j=2
         }
      }
      results_vector=c(Rain,Length) # save the results
      results=rbind(results, results_vector)
    }}}} 
```

这工作得很好（意味着加起来的结果还可以），但是，索引似乎没有从 while 循环传递到 for 循环，我不知道为什么。所以当 while 循环跳转到下一行时，for 循环会重复检查没有下雨的这一行，见输出：

```
>[1] "1"    "2"    "else"   
>[1] "1"     "2"     "while"   ** #enters while loop**  
>[1] "1"     "3"     "while"     
>[1] "1"     "4"     "while"   
>[1] "1"     "5"     "while"   
>[1] "1"     "6"     "while"   
>[1] "1"    "3"    "else"     **#exit while loop, but runs in if-else loop**   
>[1] "1"    "4"    "else"    
>[1] "1"    "5"    "else"   
>[1] "1"    "6"    "else"   
>[1] "1"  "7"  "if"  
>[1] "1"  "8"  "if"  
>[1] "2"    "2"    "else"      **# next line**  
>[1] "2"     "2"     "while"  
>[1] "2"     "3"     "while" 
```

......

> [1] "4" "5" "while" **# 在while循环中**
> [1] "4" "6" "while"
> [1] "4" "7" "while"
> [1] "4" "8" " while"
> [1] "5" "2" "while" **# 正确跳转到下一行**
> [1] "5" "3" "while"
> [1] "5" "4" "while"
> [1] "5" "5" "while"
> [1] "5" "6" "while"
> [1] "5" "3" "else" **# 在 if-else 循环中重复...**
> [1] "5" "4”“其他”
> [1]“5”“5”“其他”
> [1]“5”“6”“其他”
> [1]“5”“7”“如果”
> [1]“5”“8” "if"
> [1] "5" "2" "else" **# 在 if-else 循环中重复第 5 行！！！为什么？**
> [1]“5”“3”“其他”
> [1]“5”“4”“其他”
> [1]“5”“5”“其他”
> [1]“5”“6”“其他”
> [1 ] "5" "7" "if"
> [1] "5" "8" "if"
> [1] "6" "2" "if" **# 回到正轨...**
> [1] "6" "3" “如果”

感谢您阅读到底部！任何改进/解决此问题的帮助或建议都将受到高度赞赏，因为数据集非常大（多个站点以 5 分钟为间隔 60 年）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T17:46:37.500

如果您担心降雨事件开始的日期和时间，我会按照我在评论中给出的关于转换为`data.frame`. 如果不是，那么接下来是一个矢量化解决方案，它应该在大数据上快速。

如果您不关心天数，请先将数据转换为单个向量。

```
dat.t <- c(t(Dat)) 
```

现在您可以通过布尔检查获得序列：

```
rain_events <- dat.t != 0 
```

使用`rle`我们可以得到每个事件的持续时间：

```
rain_rled <- rle(rain_events)
# I'm using the fact that my values are logical.
# this is equivalent to rain_rled$values == TRUE.
rain_duration <- rain_rled$lengths[rain_rled$values] 
```

然后我们只需要确定数量。

```
total_rain <- cumsum(dat.t)
total_rain_shift <- c(total_rain[-1], 0)

sums <- unique(total_rain[total_rain == total_rain_shift])
rain_fall <- c(sums[1], sums[2:length(sums)] - sums[1:(length(sums)-1)])

out <- data.frame(rain_duration = rain_duration,
                  rain_fall = rain_fall) 
```

还有其他方法，但这是其中之一。如果你愿意，你也可以使用你的信息`rle`来确定雨开始和停止的位置，但我会把它作为练习留给读者......

# xcode - 如何让我的代码发现嵌入式实用程序？

> ID：15620992
> 
> 赞同：0
> 
> 时间：2013-03-25T17:23:34.330
> 
> 标签：xcode, macos, cocoa, frameworks

继续[这个](https://stackoverflow.com/questions/15613779/how-to-build-command-line-utility)问题。

我在框架中嵌入了一个命令行实用程序。第三方使用该实用程序来处理某些处理。我没有办法不能使用该实用程序。

我的问题是，我不知道如何在磁盘上找到我的实用程序。它捆绑在我的主应用程序中的一个框架中，但我不确定如何获得正确的路径。

哈普？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T22:09:11.267

如果您为 .framework`CFBundleIdentifier`的文件设置了正确的包标识符 ( ) 条目，则可以使用'方法获取表示框架的包，然后使用获取可执行文件的路径。只要确保你给框架一个唯一的包标识符（不同于你的主应用包的包标识符）。`Info.plist``NSBundle`[`bundleWithIdentifier:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSBundle_Class/Reference/Reference.html#//apple_ref/occ/clm/NSBundle/bundleWithIdentifier%3a)[`pathForResource:ofType:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSBundle_Class/Reference/Reference.html#//apple_ref/occ/instm/NSBundle/pathForResource%3aofType%3a)

例如，假设我有一个应用程序包`CoolApp.app`，其中`CFBundleIdentifier`包含`com.blah.CoolApp`. 它有一个`TextureKit.framework`框架，位于，`CoolApp.app/Contents/Frameworks/TextureKit.framework`并有一个`CFBundleIdentifier`。`com.blah.TextureKit.framework`在 的`Resources`文件夹内`TextureKit.framework`是一个名为 的可执行文件`textureUtility`。我可以使用以下代码获取完整路径`textureUtility`：

```
NSString *path = [[NSBundle bundleWithIdentifier:@"com.blah.TextureKit.framework"]
                           pathForResource:@"textureUtility"
                                    ofType:@""]; 
```

# python - 如何在 Python 中使用 cd 终端命令

> ID：15620996
> 
> 赞同：1
> 
> 时间：2013-03-25T17:23:41.383
> 
> 标签：python, linux, subprocess, raspberry-pi, cd

**问题**

如何使用`cd`和更改树莓派上的活动目录`subprocess module`？

**背景**

因为我非常*讨厌*使用命令行，所以我正在尝试创建一个基本的 GUI 文本编辑器，它也可以编译我的程序。现在，我只是想将目录更改为`Desktop`. 为此，我正在使用该`subprocess`模块。这是我当前的代码：

```
from subprocess import *
call(["cd","Desktop"]) 
```

在终端中，这一行 ( `cd Desktop`) 会将活动目录更改为`Desktop`. 奇怪的是，当我运行它时`subprocess`，我得到了这个错误：

```
OSError: [Errno 2] No such file or directory 
```

**技术规格**

树莓派 B 型

Raspbian“Wheezy”操作系统

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T17:26:18.397

我会尝试`os.chdir`

```
import os
os.chdir("/path/to/dir") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T17:31:57.363

我并不是要破坏最初的问题，但是如果您要尝试自动化很多任务，则可以使用该`fabric`模块。

它有一个相当简单的语法，如下所示：

```
with cd('/path/to/app'):
    with prefix('workon myvenv'):
        run('./manage.py syncdb') 
```

[http://docs.fabfile.org/en/1.6/api/core/context_managers.html](http://docs.fabfile.org/en/1.6/api/core/context_managers.html)

它专为通过 ssh 远程使用而设计，但许多人将其用于大量本地管理和部署

该`lcd`命令适用于您的本地计算机：

```
with lcd('/path/to/app'):
    with prefix('workon myvenv'):
        run('./manage.py syncdb') 
```

# javascript - 如何防止链接自动完成？

> ID：15620997
> 
> 赞同：-2
> 
> 时间：2013-03-25T17:23:44.687
> 
> 标签：javascript, hyperlink, cross-browser

这在 Firefox 和 chrome 中都会发生。我有一个非常普通的链接，如下所示：

```
<a href='somewhere'>this is my link</a> 
```

但是，浏览器将其转换为绝对链接，如下所示：

```
<a href='http://www.example.com/dir/page/somewhere'>this is my link</a> 
```

如何防止浏览器这样做？它引起了问题，因为我在页面上有 javascript 依赖于没有 http:// 前缀的 href 属性，并且当浏览器这样做时，这会破坏我的代码。那么，有没有办法防止这种情况发生呢？或者，有没有办法访问原始的 href 属性，就像浏览器修改它之前的方式一样？

我没有使用 jquery。我确实有可用的原型，但我更想知道如何在纯 javascript 中做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T17:35:48.440

DOM 对象上的属性数组保存页面 HTML 标记中发布的属性的实际原始值。因此

```
console.log(object.attributes.href.value)
or
console.log(object.getAttribute('href') 
```

会做的 ...

# php - 表单自动提交jquery

> ID：15620998
> 
> 赞同：-2
> 
> 时间：2013-03-25T17:23:47.310
> 
> 标签：php, javascript, forms

我有一个表单，它的动作设置为一个链接，[http://website.co.za/blablabla](http://website.co.za/blablabla)

我有一个 js 脚本可以在页面加载时自动提交它，而不是将它重定向到表单操作 url。但它不起作用，请帮忙。

我的代码：

以下代码将使其在页面加载时自动提交，但它将页面加载到表单操作 URL，并且不应重定向。

```
<script>
$(function(){
$("#myform2").submit();
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T18:01:14.000

```
$(function(){
  $.post($("#myform2").attr("action"), $("#myform2").serialize());
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-25T17:26:36.433

你打开了一个括号，所以关闭它。

```
$(function(){
    $("#myform2").submit(function(e){
        e.preventDefault();
    });
}); 
```