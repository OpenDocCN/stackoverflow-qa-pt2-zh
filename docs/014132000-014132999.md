# StackOverflow 问答 14132000-14132999

# ubuntu - Sublime Text：在 Ubuntu 下由非 root 用户运行 Sublime REPL 时权限被拒绝

> ID：14132001
> 
> 赞同：5
> 
> 时间：2013-01-03T01:44:53.897
> 
> 标签：ubuntu, sublimetext2, sublimerepl

尝试运行[Sublime REPL](https://github.com/wuub/SublimeREPL)时，我收到一个带有*权限被拒绝*错误的消息框：`IOError(13, 'Permission denied')`除非我以 root 权限 ( ) 启动 Sublime Text `sudo sublime`。它适用于任何 REPL 语言。

我使用的是 Ubuntu 12.10，Sublime 位于`/opt/`目录中。

由于我无法用谷歌搜索遇到此问题的其他人，因此我的文件系统权限可能在某处有些特殊。什么会导致 Sublime REPL 使用的文件受到保护？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-04T00:03:31.323

哦，那太愚蠢了。在`~/.config`具有 Sublime 设置的文件夹中，`sublime-text-2`有`root root`所有者，不知道为什么。不得不用 将所有者更改为我自己`chown`，仅此而已。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T15:53:06.827

此[错误](https://github.com/wuub/SublimeREPL/issues/107)（在 GitHub 上报告）可能与您所看到的行为有关。如果我是你，我会尝试隔离一个特定的用例，然后将其添加到错误报告中，以便 wuub 可以为你提供建议。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-02T02:39:41.940

在您的安装文件夹中：opt/sublime_text

```
marcelo@ubuntu:~$ sudo su
[sudo] password for marcelo: *******
root@ubuntu:/home/marcelo#
root@ubuntu:/home/marcelo# cd ..
root@ubuntu:/home# cd ..
root@ubuntu:/# cd opt/sublime_text
root@ubuntu:/opt/sublime_text# chmod 777 sublime_text 
```

完毕..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-10T19:12:48.533

[恢复到新安装的状态](https://www.sublimetext.com/docs/3/revert.html)对我有用：

```
sudo mv ~/.config/sublime-text-3 ~/sublime-text-3
subl 
```

`~/.config/sublime-text-3`它会以您的用户名作为所有者自动创建一个新副本。它应该解决所有`Permission denied`类型的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-14T22:25:01.210

在终端执行

`sudo chmod -R 777 ~/.config/sublime-text-3/`

这将递归地授予文件夹的所有权限

# emacs - emacs值得学习吗？

> ID：14132003
> 
> 赞同：9
> 
> 时间：2013-01-03T01:45:04.520
> 
> 标签：emacs

我目前主要使用 C/C++ 和 Java 进行编程。我在这里和那里做过一些其他语言，但我并不精通它们。我通常只对 java 使用 eclipse，对 C/C++ 使用 Microsoft Visual Studio。我读过很多人对emacs发誓，但我还没有真正使用过它。我尝试过一次，但它似乎比我已经使用的编辑器复杂得多，我放弃了它。但是，我想知道是否应该再给它一次机会，但我想知道您是否认为值得我花时间学习如何使用它？好处有那么大吗？在 4 或 5 年内它仍然最有用吗？我读到它已经存在了 20 多年。

另外，我对 unix 或 Linux 或任何其他方面都不是很熟练。你会推荐我学习它吗？如果是这样，为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T04:02:24.903

Emacs 非常值得学习。虽然我不喜欢幻灯片共享，但让我将您链接到[Matz 对此主题的看法](http://www.slideshare.net/yukihiro_matz/how-emacs-changed-my-life)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-03T09:08:56.407

我认为花时间在 Emacs 上绝对值得。也就是说，如果你有时间。前 2 个月你感觉不到真正的控制，尽管你学到的每一点都感觉像是一场胜利。现在，6 个月后，我对这些可能性感到惊讶，并写了这么多小调整。以前，我从来没有做过任何编程，现在我为 Emacs 写了一个小包。生活是美好的。

2019 年编辑：我不再推荐它。有一个陡峭的学习曲线，而且现在有很多优秀的编辑器，这不值得你花时间投资。特别是因为能够向 Emacs 添加新功能的人数将会减少（Emacs-Lisp 是一种糟糕的语言）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-03T04:17:56.270

了解 Vim 或 Emacs 绝对是*一件好事*。即使当我在 VS 中进行 C# 开发时，我也总是保留一个方便的 Emacs 窗口，以便快速进行文本转换、日志查看、IDL 编辑、Git 合并等。

如果你的编程经验只是 C 系列语言，那么接触 Emacs Lisp 肯定会对你有所帮助！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-03T01:51:35.317

这取决于你的目标是什么。如果您的目标是成为一名更好的程序员，那么不，emacs 不会帮助您。但是，如果您的目标是更舒适地处理文件并在 unix 系统上进行开发，尤其是在命令行上 - 那么是的，emacs 是一个很好的学习器。对于 vi 或 vim 也是如此。

Emacs 肯定会存在很长时间，就像 unix 命令行上的许多其他编辑器一样。它不会过时，所以不用担心。

我肯定会建议您学习各种命令行编辑器，因为熟悉 CLI（命令行界面）对于现实世界的开发人员来说是一项非常有用的技能。每当我面试开发人员职位的候选人时，CLI 舒适度是必须具备的。

# python - 为不带引号的函数获取字符串参数

> ID：14132006
> 
> 赞同：1
> 
> 时间：2013-01-03T01:45:27.660
> 
> 标签：python, string, function

我有一个功能，旨在从 URL 下载文件并将其写入磁盘，同时施加特定的文件扩展名。目前，它看起来像这样：

```
import requests
import os

def getpml(url,filename):
    psc = requests.get(url)
    outfile = os.path.join(os.getcwd(),filename+'.pml')
    f = open(outfile,'w')
    f.write(psc.content)
    f.close()
    try:
        with open(outfile) as f:
            print "File Successfully Written"
    except IOError as e:
        print "I/O Error, File Not Written"
    return 
```

当我尝试类似

`getpml('http://www.mysite.com/data.txt','download')`我得到了位于当前工作目录中的适当文件，download.pml。但是，当我为函数提供不带 ' 符号的相同参数时，Python 会说“NameError: name 'download' is not defined”（URL 产生语法错误）。如果在函数本身中使用`str(filename)`或类似的东西，甚至会发生这种情况。

我宁愿不必用引号字符输入函数的参数 - 它只会使输入 URL 等变得更加困难。有任何想法吗？我认为有一种简单的方法可以做到这一点，但我的 Python 技能参差不齐。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T01:47:08.340

不，那是做不到的。当您输入 Python 源代码时，您必须在字符串周围输入引号。否则 Python 无法判断字符串的开始和结束位置。

看来您也有更普遍的误解。不带引号调用`getpml(http://www.mysite.com)`不是用“不带引号的相同参数”调用它。根本没有任何争论。这不像有“带引号的参数”和“不带引号的参数”。Python 不像说一种自然的人类语言，你可以在其中发出任何声音，听者要弄清楚你的意思。Python 代码只能由某些构建块（对象名称、字符串、运算符等）组成，而 URL 不是其中之一。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T01:50:56.377

您可以以不同的方式调用您的函数：

```
data = """\
http://www.mysite.com/data1.txt download1
http://www.mysite.com/data2.txt download2
http://www.mysite.com/data3.txt download3
"""

for line in data.splitlines():
    url, filename = line.strip().split()
    getpml(url, filename) 
```

# c++ - 我可以从 C++ 中的 std::string 中分离缓冲区吗？

> ID：14132007
> 
> 赞同：3
> 
> 时间：2013-01-03T01:45:56.040
> 
> 标签：c++, string

我是 C++ 新手。我假设`std::string`使用引用计数来确定何时释放缓冲区。在下面的示例中，`s`缓冲区将在`f()`返回时被释放。如果我想将字符串缓冲区的所有权授予`give_ownership_of`而不是释放它怎么办？

```
void f() 
{ 
    string s = read_str();  
    give_ownership_of(s); 
} 
```

**更新**

让我在问题中添加更多细节。实际代码如下所示，

```
string read_str();

void write_str_async(const char *str, void (*free_fn)(const char*));

void f() {
  string s = read_str();
  // write_str_async() need to access the buffer of s after f() returns.
  // So I'm responsible to keep s alive until write_str_async() calls free_fn to release the buffer when the write is done.
  // The PROBLEM here is that s will be released when the variable scope ends. NOTE: I'm not able to change either read_str() or write_str_async() here.
  write_str_async(s.c_str(), my_free_fn);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T02:19:37.087

在 C++11 中，他们添加了类似的东西，称为移动。`std::string`有一个移动构造函数和一个移动赋值运算符。

这里的编译器可以确定`s`已经到了生命周期的尽头，所以`give_ownership_of`可以移动而不是复制进去，这基本上只是复制了一些整数/指针，而不是`std::string`. 请注意，这仍然比通过引用传递要慢，因此如果引用对您有用，那么无论如何您都应该更喜欢它。

[https://akrzemi1.wordpress.com/2011/08/11/move-constructor/](https://akrzemi1.wordpress.com/2011/08/11/move-constructor/)

我强烈建议不要`std::shared_ptr`为此使用，因为没有实际的所有权共享。

如果您想明确移动，那么您可以这样做：

```
give_ownership_of(std::move(s)); 
```

`std::move`请注意，从函数返回值时，您不需要（实际上也不应该）使用。只需正常返回值即可。编译器在很多情况下可以进行“返回值优化”，即不复制也不移动。它类似于通过引用传递值并分配给它，除了它实际上为优化器提供了更多空间（因为它知道这`std::string`是一个没有别名的唯一对象）。它也更容易阅读。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T01:54:13.650

没有标准的方法来获取 a 的基础数据的所有权`std::string`。通常，应该改为返回一个字符串对象本身或让调用者传入一个引用，例如

```
void f(std::string& s) {
    s = read_str();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T02:22:25.803

这个问题是模棱两可的，但下面的例子应该说明所有的选择。最后一个可能是你想要的，它是 C++11 中添加的一个新特性（`std::move`和右值引用）。

这允许您将缓冲区转移到相同类型的新对象，但您永远无法`std::string`完全消除。您可以忽略它`string`并将缓冲区内存视为字节，但必须通过销毁`string`.

```
// will retain s for duration of function
void give_ownership_of( std::string &s );

// will retain a copy of s for duration of function
void give_ownership_of( std::string s );

struct give_ownership_of {
     std::string s;

     // will retain a copy of in_s for object lifetime
     give_ownership_of( std::string const &in_s ) : s( in_s ) {}

     // will transfer buffer of in_s to s and retain that (C++11 only)
     // you would write give_ownership_of( std::move( s ) );
     give_ownership_of( std::string &&in_s ) : s( std::move( in_s ) ) {}
}; 
```

# java - JSP 中的焦点下拉菜单

> ID：14132009
> 
> 赞同：3
> 
> 时间：2013-01-03T01:46:04.770
> 
> 标签：java, javascript, jquery, jsp, struts

嗨，我有点新`JSP/Jquery/Javascript`。我现在正在研究struts。在我的 jsp 文件中，我需要关注`drop-down list`页面的加载/每次加载页面时，我都是这样做的：

```
<script type="text/javascript">

    $(document).ready(function(){
        $("#fault").focus();
    });
</script> 
```

然后在我的`body`，我使用`html`标签：

```
 <body onload="makeDisableEnable()">

    <s:form>
    <div class="list">
        <table>
            <colgroup>
                <col style="width: 120px;">
                <col style="width: 200px;">
                <col style="width: 120px;">
                <col>
                <col style="width: 120px;">
                <col>
            </colgroup>
            <tbody><tr>
            <th>DROPDOWN ONE<span class="font0">（※）</span></th>
                    <td><html:select property="failCnd" styleId="fault">
                    <html:option value=""></html:option>
                    <c:forEach var="failCnd" items="${failCndList}">
                    <html:option value="${failCnd.wideUseCd}">${f:h(failCnd.wideUseValueView)}</html:option>
                    </c:forEach>
                    </html:select>
                </td> 
```

这就是我所做的，但它不起作用。谁能告诉我我做错了什么？或者还有什么其他方法。非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T02:09:11.753

如果您想坚持使用 html5，则有一个 autofocus 属性。

尝试：

```
<html:select property="failCnd" styleId="fault" autofocus="autofocus"> 
```

[HTML 5 自动对焦](http://www.w3schools.com/html5/att_input_autofocus.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T02:04:00.590

我认为问题在于`<body onload="...">`打破了 jQuery。

[http://api.jquery.com/ready/](http://api.jquery.com/ready/)

> .ready() 方法通常与 <body onload="" > 属性不兼容。如果必须使用 load，请不要使用 .ready() 或使用 jQuery 的 .load() 方法将 load 事件处理程序附加到窗口或更具体的项目，如图像。

您可以直接`makeDisableEnable()`进入 jQuery“就绪”块：

```
<script type="text/javascript">
    $(document).ready(function(){
        $("#fault").focus();
        makeDisableEnable();
    });
</script> 
```

我不知道是什么，所以如果它更有意义`makeDisableEnable()`，请随时移动它。`$("#fault").focus();`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T04:55:50.687

试试下面的代码

```
 <script type="text/javascript">
     $(document).ready(function(){
        $("#fault").focus();
    });
 </script> 
```

代码

```
 <body onload="makeDisableEnable()"> 
```

至

```
 <body> 
```

检查这个工作[小提琴](http://jsfiddle.net/eTHwW/)

新编辑[的小提琴](http://jsfiddle.net/2ShhH/)

# java - contains() 按值比较，而不是参考？

> ID：14132016
> 
> 赞同：3
> 
> 时间：2013-01-03T01:47:18.983
> 
> 标签：java

我很惊讶地看到 equals() 显然被`ArrayList<String>`. 因为 Collection<> 中的 contains() 显然比较的是值，而不是引用。当然，对于`Collection<Object>`，会比较引用。在下面的程序中，我不应该在第二行得到错误吗？

```
public static void main(String[] args) {
    ArrayList<String> al = new ArrayList<String>();
    al.add("Obama");
    al.add("Reagan");
    al.add("Bush");
    al.add("Nyquist");
    StringBuffer sb = new StringBuffer();
    sb.append("Bush");

    System.out.println("compares values? using constants " + al.contains("Bush"));
    System.out.println("compares values? using local variable " + al.contains(sb.toString()));
}

run:
compares values? using constants true
compares values? using local variable true 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T01:56:57.100

这正是您应该期望的输出，并且`Collection<Object>`没有什么不同。`Collection`除非另有说明，否则所有类型都使用`.equals(Object)`，并且不同的实现违反了`Collection`合同。（需要明确的是，将 a 向上转换`String`为 an`Object`不会改变其`equals`方法的行为。）

有一些先例——参见例如`TreeSet`使用基于比较的相等的实现，以及`IdentityHashSet`使用引用相等的实现——但这些通常只应在相等的两个概念匹配时使用，或者用于重要且不寻常的需要。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T01:57:45.300

[列表的 Javdaocs](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#contains%28java.lang.Object%29)是你的朋友。`List.contains()`依赖于`.equals()`：

> **boolean contains(Object o)**
> 如果此列表包含指定元素，则返回 true。更正式地说，当且仅当此列表包含至少一个元素 e 满足 (o==null ? e==null : o.equals(e)) 时才返回 true。

[`String.equals()`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#equals%28java.lang.Object%29)比较`String`s 内容（字符）：

> **public boolean equals(Object anObject)**
> 将此字符串与指定对象进行比较。当且仅当参数不为 null 并且是表示与此对象相同的字符序列的 String 对象时，结果才为真。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T04:11:35.287

你可以试试 System.out.println(sb.toString().equals("Bush")); 在你的课堂上，看看它会返回什么。它将返回 true。所以在第二种情况下它返回/打印真实。

# css - 带有粗下划线的 CSS 菜单

> ID：14132025
> 
> 赞同：0
> 
> 时间：2013-01-03T01:48:56.907
> 
> 标签：css, menu, subitem

我试图模仿这个菜单的外观但修复错误。：http: [//349ghgg83g.weebly.com/](http://349ghgg83g.weebly.com/)

当您将鼠标悬停在“主页”上然后移至“投资组合”时，“投资组合”下会出现一条下划线。但是当您从“联系人”转到“投资组合”时，不会出现下划线。同样在我的版本中，我不能很好地从“portfolio”转到它的子项，因为子项会消失。我没有该页面的代码，因为它是 Weebly，但我试图在这里重现它：http: [//jsfiddle.net/247t1aW3b/DnRfR/](http://jsfiddle.net/247t1aW3b/DnRfR/)

```
<!DOCTYPE html>
<html lang="en-US">
<head>
     <link rel="stylesheet" href="home.css" type="text/css"/>
</head>

<body id="body1">  
<div id="nav-wrap">
    <ul id="nav">   
            <li><a href="/">Home</a></li>
            <li>
                <a href="#">Portfolio</a>
                <ul>
                    <li><a href="#">Item 1</a></li>
                    <li><a href="#">Item 2</a></li>
                </ul>
            </li>
            <li><a href="#">Contact</a></li>
    </ul><!-- END nav -->   
</div><!-- END nav-wrap -->    

<div id="content">
<p>Home content</p>
<p>Home content</p>
<p>Home content</p>
<p>Home content</p>
<p>Home content</p>
<p>Home content</p>
<p>Home content</p>
<p>Home content</p>
<p>Home content</p>
<p>Home content</p>
<p>Home content</p>
<p>Home content</p>
<p>Home content</p>
<p>Home content</p>
<p>Home content</p>
<p>Home content</p>
<p>Home content</p>
<p>Home content</p>
<p>Home content</p>
<p>Home content</p>
<p>Home content</p>
<p>Home content</p>
<p>Home content</p>
<p>Home content</p>
<p>Home content</p>
<p>Home content</p>
<p>Home content</p>
<p>Home content</p>
<p>Home content</p>
<p>Home content</p>
<p>Home content</p>
<p>Home content</p>
<p>Home content</p>
<p>Home content</p>
<p>Home content</p>
<p>Home content</p>
<p>Home content</p>
<p>Home content</p>
<p>Home content</p>
<p>Home content</p>
<p>Home content</p>
<p>Home content</p>
<p>Home content</p>
<p>Home content</p>
<p>Home content</p>
<p>Home content</p>
<p>Home content</p>
<p>Home content</p>
</div>

<div id="footer"></div>   

</body>
</html> 
```

CSS：

```
/* a[href="http://www.google.com"] {color: green;}   */

html {
   min-height: 100%;
}

body {
  width: 100%;  /*960px;*/
  /* padding:100px 0; */
  margin:0 auto;
  font-family:Calibri, sans-serif;
}

#body1 {
 background-image:url('speckle.jpg');
 background-repeat:repeat;
}

#content {
     width: 90%;
     margin-left: 3%;
     margin-top: 90px;
     margin-bottom: 45px;
}

#nav-wrap {
  position: fixed;
  top: 10px;
  width: 100%;
  height: 55px;
  /*background: #336699;*/
}    

#nav {
  /*border:1px solid #ccc;*/
  /*border-width:1px 0;*/
  list-style:none;
  margin: 0 auto 0 auto;
  padding:0;
  width: 400px;
  text-align:center;
}

#nav li {
  position:relative;
  display:inline;
}

#nav a {
  display:inline-block;
  /*padding:10px;*/
  padding: 8px;   /* 8 pixel padding all the way around the anchors */
}

#nav ul {
  position:absolute;
  /*top:100%; Uncommenting this makes the dropdowns work in IE7 but looks a little worse in all   other   browsers. Your call. */
  left:-9999px; /* hide the unordered list by moving it off-screen. */
  margin:0;
  padding:0;
  text-align:left;
}

#nav ul li {
  display:block;
}

#nav li:hover ul {
  left:0px; /* show the sub-items in the unordered list by moving it back under the list */
}

#nav li:hover a {  /* highlight the sub-items when you move over them */
  /*border-bottom:1px solid grey;*/
  /*text-decoration:underline;*/
  /*border-bottom-width: thick;*/
  /*background:#f1f1f1;*/
}

#nav li:hover ul a {
  text-decoration:none;
  background:#EEE;
  border-bottom:1px solid #aaa;  
}

#nav li:hover ul a:hover {
  /*text-decoration:underline;*/
  border-bottom:1px solid #aaa;
  /*background:#f1f1f1;*/
  background: #BEBEBE;
}

#nav ul a {
  white-space:nowrap;
  display:block;
  /*border-bottom:3px solid red;*/
}

a {
  /*color:#c00;*/
  color: black;
  text-decoration:none;
  /*font-weight:bold;*/
  font-weight: normal;
}

a:hover {
  /*text-decoration:underline;*/
  border-bottom: 3px solid #002EB8;
 /*background:#f1f1f1;*/
}

#footer {
  visibility: none;    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T02:03:31.840

您可以使用 Firebug 或 Chrome Javascript 控制台来检查页面。当您将鼠标悬停在投资组合上时，问题出在下拉列表中。未悬停时的下拉菜单为：

```
<div id="wsite-menus">
    <div style="position: absolute; left: 203.35px; display: none; top: 166px;" class="wsite-menu-wrap">
    </div>
</div> 
```

当您从“主页”悬停到“投资组合”时，“顶部”css 属性设置为“168px”，但是当您从“联系人”悬停到“投资组合”时，“顶部”属性保持在 166 像素。所以下拉菜单实际上是覆盖了下划线，下划线不是这里的问题。

# android - 将 TextView 大小定义为不与外部元素重叠

> ID：14132027
> 
> 赞同：0
> 
> 时间：2013-01-03T01:49:03.177
> 
> 标签：android, android-layout

我在列表项中有这个布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <ImageView
        android:id="@+id/poi_image"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_margin="20dp"
        android:contentDescription="@string/poi_image_descr" />

    <LinearLayout
        android:id="@+id/item_container"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_toRightOf="@+id/poi_image"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/poi_title"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginBottom="5dp"
            android:layout_marginTop="10dp"
            android:textSize="20sp" />

        <TextView
            android:id="@+id/poi_description"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginBottom="10dp" />

    </LinearLayout>

    <CheckBox
            android:id="@+id/checkbox"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:layout_alignParentRight="true" />

</RelativeLayout> 
```

这里的问题：第二个`TextView`（其 id 是`poi_description`）与外部重叠`CheckBox`。如何修改此布局以`TextView`动态更改其宽度和高度以不与外部重叠`CheckBox`？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T01:52:13.980

添加`android:layout_toLeftOf="@+id/checkbox"`到您的`LinearLayout`以防止任何重叠

# iis-7 - HTTP 错误 500.19 与 web.config 中的 IIS7“格式错误的 XML”上的 0x8007000d

> ID：14132029
> 
> 赞同：26
> 
> 时间：2013-01-03T01:49:11.010
> 
> 标签：iis-7, cfwheels

我被迫从出厂默认值重建我的机器。一切都应该相同，IIS 版本 (7.5)、操作系统 (Windows 7) 和我的网站文件。但是，有些不同，因为在配置我的网站并在浏览器中拉起本地网站后，我收到以下错误...

> **HTTP 错误 500.19 - 内部服务器错误**无法访问请求的页面，因为该页面的相关配置数据无效。错误代码 0x8007000d

当我[查找错误代码 0x800700d](http://support.microsoft.com/kb/942055)时，它告诉我...

> **分析：**出现此问题的原因是ApplicationHost.config 文件或Web.config 文件中包含格式错误的XML 元素。要解决此问题，请参阅解决方案 1。

然后提供一个分辨率...

> **建议的解决方案：**从 ApplicationHost.config 文件或 Web.config 文件中删除格式错误的 XML 元素。

但是我没有看到格式错误的 XML，当我完全删除 web.config 文件时，站点加载但 URL 重写不起作用（显然）。此外，即使我从 web.config 文件中删除所有 XML 并将其留空，我也会收到相同的错误。web.config 文件根本存在这一事实似乎存在问题。

作为参考，这是我的 web.config 的内容...

```
<?xml version="1.0" encoding="UTF-8"?>

<!-- this file can be deleted if you're not planning on using URL rewriting with IIS 7\. -->
<!-- you can add your own files and folders that should be excluded from URL rewriting by adding them to the "pattern" below. -->
<!-- please read the online documentation on http://cfwheels.org for more information about URL rewriting. -->

<!-- SET ENABLED TO TRUE BELOW TO TURN ON THE URL REWRITING RULES -->

<configuration>
<system.webServer>
    <rewrite>
        <rules>
            <rule name="ColdFusion on Wheels URL Rewriting" enabled="true">
                <match url="^(.*)$" ignoreCase="true" />
                <conditions logicalGrouping="MatchAll">
                    <add input="{SCRIPT_NAME}" negate="true" pattern="^/(flex2gateway|jrunscripts|cfide|cfformgateway|railo-context|files|images|javascripts|miscellaneous|stylesheets|robots.txt|sitemap.xml|rewrite.cfm)($|/.*$)" />
                </conditions>
                <action type="Rewrite" url="/rewrite.cfm/{R:1}" />
            </rule>
        </rules>
    </rewrite>
</system.webServer>
</configuration> 
```

有人对如何解决此问题有任何想法吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-04T01:33:35.020

你记得重新安装[重写模块](http://www.iis.net/downloads/microsoft/url-rewrite)吗？默认情况下，它不包含在 IIS 7.5 中。

除此之外，还有一个[类似的问题](https://stackoverflow.com/questions/1808680/web-application-problems-web-config-errors-http-500-19-with-iis7-5-and-asp-net)——我认为关于畸形的部分是一个红鲱鱼。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-06-13T19:30:04.387

经过这么多痛苦，我可以解决这个错误。我的实际原因是我在配置中使用了一些 url 重写。删除错误后消失了。以下是我从 web.config 中删除的代码。

```
 <serverRuntime frequentHitThreshold="1" frequentHitTimePeriod="10:00:00"/>
<rewrite>
  <rules>
    <rule name="HTTP to HTTPS redirect" stopProcessing="true">
      <match url="(.*)"/>
      <conditions>
        <add input="{HTTPS}" pattern="off" ignoreCase="true"/>
      </conditions>
      <action type="Redirect" redirectType="Permanent" url="https://wikigurus.com/{R:1}"/>
    </rule>
  </rules>
</rewrite> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-19T10:11:42.763

我与您寻找 XML 的情况相同。我找到了解决方案。在 web.config 文件中，在文件的顶部，有一个 xml 部分。删除下面的内容，这样就解决了我的问题，以后网站可以打开了。

```
<system.net>
<defaultProxy>
  <proxy autoDetect="true" />
</defaultProxy> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-04-20T08:07:05.090

这个问题也发生在我身上......试试这个错误代码0x8007000d。

```
<?xml version="1.0" encoding="UTF-8"?> 
```

从您的 web.config 文件中删除此行。

这是一个格式错误的 XML 元素。

删除它或评论它。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-07-24T01:14:12.080

只需创建新的网站集并将新的 web.config 替换为损坏的网站集，为我工作

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2021-04-13T16:23:27.150

请安装两个exe文件“dotnet-sdk-3.1.102-win-x64”和“dotnet-hosting-3.1.1-win”。

# git - git/svn 存储库管理 Web GUI

> ID：14132044
> 
> 赞同：0
> 
> 时间：2013-01-03T01:52:05.357
> 
> 标签：git, svn, repository

我想知道是否有人知道好的 Git 和 SVN 管理基于 Web 的 GUI，可能具有以下功能：

1.  创建/删除/修改存储库
2.  用户数据库和用户管理（创建/删除/修改用户）
3.  回购权限管理（为某些回购中的用户添加读/写权限）

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T03:08:58.620

如果您想在自己的服务器上管理存储库，如何尝试 gitlab 或 gitblit？
两者都是基于 Web 的存储库管理工具。
查看下面的链接。
[GITLAB](http://gitlabhq.com/)
[Gitblit](http://gitblit.com/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T05:47:52.313

[单片机经理](http://www.scm-manager.org/)

*   简单的
*   轻的
*   盒子里的 Git-SVN-Mercurial
*   丰富的插件集
*   BSD 许可

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T01:55:00.130

对我来说听起来像[GitHub](https://github.com/)？

显然，他们不久前添加了[SVN 支持](https://github.com/blog/626-announcing-svn-support)。他们还为企业做私人存储库。

# javascript - CSS + jQuery 切换菜单

> ID：14132050
> 
> 赞同：2
> 
> 时间：2013-01-03T01:52:42.523
> 
> 标签：javascript, jquery, html, css, menu

我正在使用 jQuery + CSS3 制作菜单。

我在菜单右侧有一个向上箭头，单击菜单时向上滑动，图像切换到向下箭头。

唯一的问题是，如果您单击向下箭头，它不会向下滑动，即使我提供了一段合法的代码以使其工作。

我是 jquery 的新手，所以非常感谢任何帮助！

**HTML：**

```
<nav id="tfc-new-nav">
    <div class="wrapper">
        <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="contact.html">Contact</a></li>
            <li><a href="cart.html">Shopping Cart</a></li>
            <li><a href="login.html">My Account</a></li>
        </ul>
    </div>
    <div class="hide-menu menu-active"></div>
</nav>​ 
```

**CSS：**

```
.wrapper {
    display: block;
    height: 100%;
    width: 1000px;
    position: relative;
    margin: 0 auto;
}

#tfc-new-nav {
    display: block;
    height: 45px;
    width: 100%;
    background: #808E91;
    position: relative;
    top: 50px;
}

#tfc-new-nav ul {
    list-style: none;
}

#tfc-new-nav ul li {
    display: block;
    height: 45px;
    width: 10%;
    float: left;
    text-align: center;
    line-height: 45px;
}

#tfc-new-nav ul li a {
    display: block;
    color: #fff;
    text-decoration: none;
    text-transform: uppercase;
    font-family: 'Felix Titling', serif;
    cursor: pointer;
    -webkit-transition: background .3s ease-in;
    -moz-transition: background .3s ease-in;
    -ms-transition: background .3s ease-in;
    -o-transition: background .3s ease-in;
    transition: background .3s ease-in;
}

#tfc-new-nav ul li a:hover {
    background: #50798D;
}

#tfc-new-nav .hide-menu {
    position: absolute;
    top: 20px;
    right: 10px;
    cursor: pointer;
}

#tfc-new-nav .hide-menu.menu-active {
    display: block;
    background-image: url('http://upload.wikimedia.org/wikipedia/commons/6/61/Black_Up_Arrow.png');
    background-size: 100% 100%;
    height: 7px;
    width: 7px;
}

#tfc-new-nav .hide-menu.menu-hidden {
    display: block;
    background-image: url('http://www.wpclipart.com/signs_symbol/BW/direction_arrows/down_arrow.png');
    background-size: 100% 100%;
    height: 7px;
    width: 7px;
}​ 
```

**JavaScript：**

```
$(document).ready(function() {

    $("#tfc-new-nav .hide-menu.menu-active").click(function() {

        $("#tfc-new-nav").animate({

            top: "30px"

        });

        $(this).removeClass("menu-active");
        $(this).addClass("menu-hidden");

        $(this).animate({
            top: "35px"
        });

    });

    $("#tfc-new-nav .hide-menu.menu-hidden").click(function() {

        $("#tfc-new-nav").animate({

            top: "95px"

        });

        $(this).removeClass("menu-hidden");
        $(this).addClass("menu-active");

        $(this).animate({
            top: "20px"
        });

    });

});​ 
```

# [现场演示](http://jsfiddle.net/ModernDesigner/Fma52/4/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T02:07:19.607

您应该委托您的活动，例如

```
$("#tfc-new-nav").on("click", ".menu-hidden", function() {
    ...
}); 
```

[**演示**](http://jsfiddle.net/Fma52/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T01:58:07.407

你应该能够调用`$.slideToggle()`来处理这个并缩小你的代码。

这是手动条目的链接：http: [//api.jquery.com/slideToggle/](http://api.jquery.com/slideToggle/)

这将在动画`display:none`完成时设置动画和设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T02:02:37.393

使用 .live() 代替 .click()

例子：

```
$("#tfc-new-nav .hide-menu.menu-hidden").live("click", function() {
    // Do stuff here
} 
```

这考虑了 DOM 的更新操作，经过测试和工作

# editor - 括号（编辑器）是否有像 textmate 这样的捆绑包

> ID：14132054
> 
> 赞同：1
> 
> 时间：2013-01-03T01:54:04.950
> 
> 标签：editor, twig, bundle, adobe-brackets

在听到最近关于编辑器的嗡嗡声后，我刚刚下载了括号。有一些开箱即用的非常酷/有用的功能。

我的很多项目都使用模板引擎，比如 twig。此编辑器是否支持其他文件类型的捆绑包？我使用 textmate 已经有一段时间了，只需下载树枝包，我就可以将突出显示和代码片段集成到编辑器中。我希望括号有类似的功能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T22:41:33.957

简短的回答是：还没有，但很快。

更长的答案：

*   用于添加新语法/语言的括号扩展 API[目前正在进行中](https://trello.com/card/0-research-language-extensibility/4f90a6d98f77505d7940ce88/712)，可能会在大约一个月内完成。
*   由于 Brackets 使用[CodeMirror 编辑器](http://codemirror.net)，语法高亮由 CodeMirror“模式”驱动。似乎还没有人制作 Twig 模式。但是构建一个可能并不难，无论是基于[Mustache 突出显示的示例代码](http://codemirror.net/demo/mustache.html)还是 CodeMirror 3 中的新[“多路复用模式”功能](http://codemirror.net/demo/multiplex.html)（Brackets 即将更新到 CodeMirror 3）。
*   括号最终可能会支持[直接导入 TextMate 语言包](https://trello.com/card/support-textmate-language-grammar-bundles/4f90a6d98f77505d7940ce88/602)，就像 Sublime 一样，但那还有很长的路要走。

作为权宜之计，您可以让 Brackets 将 Twig 文件突出显示为纯 HTML —— 总比没有颜色编码好。这对于即将推出的扩展 API 是可行的，但如果您喜欢冒险，您可以立即破解您当前的 Brackets 副本来执行此操作。只需深入 app 文件夹，打开*www/editor/EditorUtils.js*，然后在行后添加文件扩展名`case "html":`。

（ps - 我在 Brackets 核心团队工作。感谢您尝试 Brackets！）

# sublimetext2 - 你如何解决 sublime text 2 (typescript) 构建错误？

> ID：14132059
> 
> 赞同：1
> 
> 时间：2013-01-03T01:54:40.437
> 
> 标签：sublimetext2, typescript

我正在使用[这个问题](https://stackoverflow.com/questions/12779631/how-to-configure-a-sublime-build-system-for-typescript)的打字稿构建以及 sublime text 2 中的[构建保存](https://github.com/alexnj/SublimeOnSaveBuild)插件来尝试自动编译打字稿：

```
{
    "cmd": ["tsc","$file"],
    "file_regex": "(.*\\.ts?)\\s\\(([0-9]+)\\,([0-9]+)\\)\\:\\s(...*?)$",
    "selector": "source.ts",
    "osx": {
       "path": "/usr/local/bin:/opt/local/bin"
    }
} 
```

**由于以下错误，它永远不会构建。**有小费吗？

```
[Errno 2] No such file or directory
[cmd:  [u'tsc', u'/Users/dbrito/Sites/Prototypes/totem-tracker/client/views/layout.ts']]
[dir:  /Users/dbrito/Sites/Prototypes/totem-tracker/client/views]
[path: /usr/local/bin:/opt/local/bin]
[Finished] 
```

注意：node 和 npm 是使用 homebrew 安装的。打字稿是随`npm -g install typescript`. 我在 10.8.2 上安装了最新的 xcode 和命令行工具。以下是我的`.profile`：

```
export PATH="/usr/local/bin:/usr/local/sbin:~/node_modules/.bin:/usr/local/share/npm/bin:/usr/local/Library/Aliases:${PATH}"
export NODE_PATH="/usr/local/lib/node_modules:${NODE_PATH}" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T17:10:44.377

我的猜测是它找不到`tsc`或您的文件。您可以仔细检查错误中显示的文件是否存在，然后`which tsc`在终端中给出输出？

它在你之外`/usr/local/bin`吗？尝试删除`osx`路径设置的东西。

# javascript - Javascript 在引号中显示文本。如何删除它？

> ID：14132063
> 
> 赞同：-1
> 
> 时间：2013-01-03T01:55:16.557
> 
> 标签：javascript, jquery, tumblr

编辑：原来api会产生引号。

对不起，因为我对 js/jquery 几乎一无所知，但我找到了我想使用的代码。它使用 tumblr 的 api。[http://www.tumblr.com/docs/en/api/v1](http://www.tumblr.com/docs/en/api/v1)。

现在，问题是titles[i] 显示用引号括起来的文本。所以而不是

`<div class="relates">This is the titles i. I want this.</div>`,

表明

`<div class="relates">"This is the titles i. I don't want the quotes!"</div>`

在 html 中。我不希望那样（出于不值得解释的原因）。

有人可以帮我删除引号吗？

这是完整的代码。

```
(function() {
var config = new Object();
var titles = [];
var links = [];
var images = [];
var items = [];
var types = [];
var $j = jQuery.noConflict()

var scripts = document.getElementsByTagName('script');
var this_script = scripts[scripts.length - 1];
var params = this_script.src.replace(/^[^\?]+\??/,'').split('&');   

var url_base = ((typeof(config.url) == 'undefined') ? ('http://' + document.domain + '/') : ('http://' + config.url + '/'));

for(var i=0; i<params.length; i++) {
    var tmp = params[i].split("=");
    config[tmp[0]] = unescape(tmp[1]);
}

if(typeof(config.tags)=='undefined'){ error(0); return; }
if(typeof(config.num)=='undefined'){ config.num=8; }
if(typeof(config.len)=='undefined'){ config.len=60; }
if(typeof(config.title)=='undefined'){ config.title='Related Posts:'; }
if(typeof(config.type)=='undefined'){ config.type=''; }

switch(config.css) {
case ('simple'):
  document.write('<link rel="stylesheet" type="text/css" ' +
  'href="http://example.com/resource/simple.css" media="screen" />');
break;
case ('complete'):
  document.write('<link rel="stylesheet" type="text/css" ' +
  'href="http://example.com/resource/complete.css" media="screen" />');
break;
case ('light'):
  document.write('<link rel="stylesheet" type="text/css" ' +
  'href="http://example.com/resource/light.css" media="screen" />');
break;
case ('dark'):
  document.write('<link rel="stylesheet" type="text/css" ' +
  'href="http://example.com/resource/dark.css" media="screen" />');
break;}

  document.write(
    '<div id="tumblrinlink">' +
        '<div id="inlink-loading"></div>' +
        '<div id="inlink-title"></div>'+
        '<ul id="inlink-list"></ul>' +
        '' +
    '</div>'
);

var tags = config.tags.slice(0,-1).split(',');

$j(document).ready(function() {
    function getRelated() {
        var req;
        for(var i=0; i<tags.length; i++){
            req=$j.getJSON(url_base+'api/read/json?callback=?&filter=text&num='+config.num+'&start=0&type='+config.type+'&tagged='+escape(tags[i]), function(data) {
                $j(data.posts).each(function(i, post) {
                    var text='';
                    if(post.type=='regular') text=post['regular-title']+''+post['regular-body'];
                    else if(post.type=='link') text+=post['link-text'];
                    else if(post.type=='quote') text+=post['quote-text'];
                    else if(post.type=='photo') text+=post['photo-caption'];
                    else if(post.type=='conversation') text+=post['conversation-title'];
                    else if(post.type=='video') text+=post['video-caption'];
                    else if(post.type=='audio') text+=post['audio-caption'];
                    else if(post.type=='answer') text+=post['question'];
                    if(text.length>config.len){ text=text.slice(0,config.len); text+='...';}
                    var image ='';
                    if(post.type=='photo') image+=post['photo-url-100'];
                    else if(post.type=='link') image+=['link-text'];
                    else if(post.type=='quote') image+=['quote-text'];
                    else if(post.type=='photo') image+=['photo-caption'];
                    else if(post.type=='conversation') image+=['conversation-title'];
                    else if(post.type=='video') image+=['video-caption'];
                    else if(post.type=='audio') image+=['audio-caption'];
                    else if(post.type=='answer') image+=['question'];
                    titles.push(text);
                    links.push(post['url-with-slug']); 
                    images.push(image);
                    types.push(post['type'])
                });

            }).complete(getList);
        }

    }
    function getList(){
        for(var i=0; i<titles.length; i++){
            var regex = new RegExp('('+links[i]+')');
            var html = $j("#inlink-list").html();

            if(links[i]!=document.location&&!html.match(regex)){
                if(config.num--<=0) return;

                var item='<li class="inlink-item" id="'+types[i]+'"><a class="inlink-link" href="'+links[i]+'"><img src="'+images[i]+'" alt="'+titles[i]+'" /><div class="relates">'+titles[i]+'</div></a></li>';
                $j("#inlink-list").append(item);
            }
        }
        $j("#inlink-title").html('<h2>'+config.title+'</h2>');
        $j("#inlink-loading").html('');
    }
    getRelated();

});

function getError(e){
    var msg="error: ";
    switch(e){
        case 0: msg+='no tags defined'; break;
        case 1: msg+='tumblr API problem'; break;
    }
    $j("#inlink-loading").html(msg);
}})(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T02:07:35.390

我将假设引号来自 Tumblr API。在这种情况下，您只需要去掉引号：

```
<div class="relates">'+titles[i].substring(1, titles[i].length - 2)+'</div> 
```

`substring(1, titles[i].length - 2)`将从字符串中删除第一个字符（索引`0`）和最后一个字符（索引`length - 1`）。

[文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/substring)

# php - 从javascript函数解析链接

> ID：14132065
> 
> 赞同：0
> 
> 时间：2013-01-03T01:55:23.190
> 
> 标签：php, javascript, regex, parsing

我正在尝试从页面内的 javascript 函数中解析直接链接。我能够解析我需要的 html 信息，但对 javascript 部分感到困惑。这是用 php 和可能的正则表达式可以实现的吗？

```
function videoPoster() {
    document.getElementById("html5_vid").innerHTML = 
        "<video x-webkit-airplay='allow' id='html5_video' style='margin-top:" 
        + style_padding 
        + "px;' width='400' preload='auto' height='325' controls onerror='cantPlayVideo()' " 
        + "<source src='http://video-website.com/videos/videoname.mp4' type='video/mp4'>";
} 
```

我需要拉出的是链接“http://video-website.com/videos/videoname.mp4”。任何帮助或指示将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T02:27:52.760

`/http://.*\.mp4/``http://`将为您提供和之间的所有字符`.mp4`，包括在内。

[在行动中看到它。](http://regexr.com?339ol)

如果您需要会话 ID，请使用类似`/http://.*\.mp4?sessionid=\d+/`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T02:30:48.823

一般来说，没有。一个完整的 javascript 解析器总是会提取 url，即使这样你也会遇到不平凡计算的 url 的麻烦。

在实践中，通常最好使用适用于您实际需要解析的代码的最简单的捕获正则表达式。在这种情况下：

```
['"](http://[^'"]*)['"] 
```

如果您必须将该正则表达式作为字符串输入，请注意转义。

如果您在 url 中有未转义的引号，这将失败。这是有效的，但很少见。编写您正在解析的内容的人不太可能使用它们，因为它们使引用 javascript 中的 url 变得很痛苦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T02:49:15.880

对于您的特定情况，这应该有效，前提是 URL 中没有任何字符被转义。

```
preg_match("/src='([^']*)'/", $html, $matches);
$url = $matches[1]; 
```

请参阅[preg_match()](http://php.net/preg_match)手册页。您可能应该添加错误处理，确保函数返回 1（正则表达式匹配）并可能执行一些额外的检查（例如确保 URL 以`http://`和 contains开头`.mp4?`）。

（与所有 Web 抓取技术一样，您正在抓取的站点的所有者或维护者可能会在未来做出破坏您的脚本的更改，您应该为此做好准备。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T11:35:06.930

以下捕获您的 html 中的任何 url

```
$matches=array();
if (preg_match_all('/src=["\'](?P<urls>https?:\/\/[^"\']+)["\']/', $html, $matches)){
    print_r($matches['urls']);
} 
```

如果你想在 javascript 中做同样的事情，你可以使用这个：

```
var matches;
if (matches=html.match(/src=["'](https?:\/\/[^"']+)["']/g)){
//gives you all matches, but they are still including the src=" and " parts, so you would
//have to run every match again against the regex without the g modifier
} 
```

# php - PHP中奇怪的sprintf行为

> ID：14132066
> 
> 赞同：2
> 
> 时间：2013-01-03T01:55:25.977
> 
> 标签：php

我试图做`sprintf("<%s>", "Sat");`，但没有任何结果。当您删除小于符号时，它将重新开始工作。任何人都经历过这种行为以及是否预期？因为我认为这是一个错误。

您甚至可以在这里使用 printf 获得相同的结果..... [http://writecodeonline.com/php/](http://writecodeonline.com/php/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T01:57:07.443

您的浏览器可能会将其呈现为标签。查看来源以确认。

[http://codepad.org/g5FXZAwa](http://codepad.org/g5FXZAwa)

```
<?php

printf("<%s>", "Sat"); 
```

印刷`<Sat>`

* * *

为 Yogesh 编辑。

```
<?php

echo sprintf("<%s>", "Sat"); 
```

印刷`<Sat>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T01:57:27.217

我相信发生这种情况是因为`<Sat>`您的浏览器将其解释为标签。

# ruby-on-rails - 如何正确设置集合选择？

> ID：14132067
> 
> 赞同：0
> 
> 时间：2013-01-03T01:55:39.320
> 
> 标签：ruby-on-rails, ruby-on-rails-3, view

使用下面的代码，如果我点击搜索，它会将我带到这些网址

```
With FireFox > http://example.com/shop?utf8=%E2%9C%93&genre[]=1
With Safari  > http://example.com/shop?utf8=✓&amp;genre%5B%5D=1 
```

如何删除此“[]”和“%5B%5D”？
只有我想要的是“&genre=1”

**查看代码**

```
<%= form_tag communities_path, :method => :get, :class => 'form-search' do %>
   <div class="input-append">
    <%= collection_select :genre, nil, Genre.all, :id, :name %>
    <button type="submit" class="btn">Search</button>
   </div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T02:00:09.043

```
<%= select_tag :genre, options_for_select(Genre.all.map{ |g| [g.name, g.id] }) %> 
```

# java - 在休眠中使用复合键

> ID：14132068
> 
> 赞同：0
> 
> 时间：2013-01-03T01:55:46.197
> 
> 标签：java, hibernate, jpa

假设我想要一个复合键作为采购订单实体的街道、城市。

以下是我如何识别它，

```
 @Embeddable
    public class BillingAddress implements Serializable {

        private String street;
        private String city;

        public BillingAddress(){

        }

        public BillingAddress(String street, String city) {
            this.street = street;
            this.city = city;
        }
        //with getters and setters
}

@Entity
@IdClass(BillingAddress.class)
public class PurchaseOrder {

    public PurchaseOrder(BillingAddress billingAddress) {
        street = billingAddress.getStreet();
        city = billingAddress.getCity();

    }

    @Id
    @AttributeOverrides({
            @AttributeOverride(name = "street", column = @Column(name = "STREET")),
            @AttributeOverride(name = "city", column = @Column(name = "CITY")) })
    private String street;
    private String city;
    private String itemName;

    public String getItemName() {
        return itemName;
    }

    public void setItemName(String itemName) {
        this.itemName = itemName;
    }

} 
```

我想了解@AttributeOverrides 注释的真正作用是什么？即使我将列名更改为 STREET1，我仍然看到使用列名 STREET 创建的表。那么 column = @Column(name = "STREET")) 在这里做什么。

此外，我可以像 PurchaseOrder 类的字段一样拥有它，而不是使用 BillingAddress 的构造函数，

```
 public class PurchaseOrder {
     BillingAddress billingAddress;

} 
```

在这种情况下，这将如何改变？我还需要私人字符串街吗？私人字符串城市；在采购订单中？

最后我读到在新的数据库系统设计中应该避免使用复合键，使用复合主键适用于在不改变数据库表结构的情况下映射遗留数据库表的情况，对吗？该声明是否有效？

//编辑问题

保存账单地址在字段中的采购订单，

```
PurchaseOrder purchaseOrder = new PurchaseOrder();
purchaseOrder.setItemName("name");

BillingAddress billingAddress = new BillingAddress();
billingAddress.setCity("c1"); billingAddress.setStreet("s1");                                                              purchaseOrder.setBillingAddress(billingAddress); 
session.save(purchaseOrder); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T07:42:16.857

你问的问题很少，我试图通过所有这些问题并回答每个问题：

**@AnnotationOverride 有什么作用？**

在这里回答：[@AttributeOverride 是什么意思？](https://stackoverflow.com/questions/4432748/what-does-attributeoverride-mean)

**第二个问题对我来说有点不清楚，但我想您是在问是否必须在 PurchaseOrder 类中包含复合键中的所有字段。**

不，我不这么认为。这是我快速整理的一个示例：

```
@Entity
@Table(name = "PURCHASE_ORDER")
public class PurchaseOrder{

    @Id
    private BillingAddress billingAddress;

    //getters & setters

    @Embeddable
    public static class BillingAddress implements Serializable {
        @Column(name = "street")
        private String street;
        @Column(name = "city")
        private String city;
        @Column(name = "itemName")
        private String itemName;

        //getters & setters

    }
} 
```

不用担心语法，只需担心结构。您甚至可以在 PurchaseOrder 中添加额外的字段，这不是 id。

**我应该使用复合键吗？**

在这里回答：[我应该使用复合主键吗？](https://stackoverflow.com/questions/963809/should-i-use-composite-primary-keys-or-not)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T02:53:45.490

好吧，您的`PurchaseOrder`类没有从任何类型的映射实体扩展，您（当前）应用`@AttributeOverride`s 的属性也没有。因此，实际上没有什么可以覆盖，您的 JPA 提供者只是忽略了注释。我认为您正在尝试做的是为实体定义一个嵌入式 id，同时覆盖该 id 的一些列映射。您可以通过对当前代码进行一些修改来做到这一点：

```
@Entity
public class PurchaseOrder {
    @EmbeddedId
    @AttributeOverrides({
            @AttributeOverride(name = "street", column = @Column(name = "BILLING_STREET")),
            @AttributeOverride(name = "city", column = @Column(name = "BILLING_CITY")) })
    private BillingAddress billingAddress;

    private String itemName;

    // Constructors, Getters/Setters
} 
```

请注意，我已经更改了覆盖属性的名称，因为在您当前的示例中，嵌入的 id 名称和覆盖名称是相同的。

# c# - 如何在其他电脑上演示 ac# web 应用程序？

> ID：14132078
> 
> 赞同：-1
> 
> 时间：2013-01-03T01:57:06.390
> 
> 标签：c#, .net, web-applications, web-deployment

我开发了 c# .net web 应用程序，它建立在 .NET Framework 4.0 之上。

我必须在我朋友的 PC 上显示我的 Web 应用程序，而无需安装任何软件，例如 Microsoft Visual Studio 或 IIS。除了 Visual Studio，我还在我的应用程序中使用 MS SQL 2012。

有什么建议可以展示我的网络应用程序吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T02:05:37.467

**简而言之：**您的 Web 应用程序需要**托管**在某个服务器中（Web 服务器需要运行并可供尝试向其发出请求的 PC 访问），您朋友的 PC 可以访问该服务器。

否则，您必须在 PC 之间建立网络。

如果您从未发布要托管的 Web 应用程序，这里是一个很好的资源来查看 -[**如何将我的 C# asp.net 项目上传到网站（免费托管）**](http://forums.iis.net/t/1172179.aspx/1)

内容丰富的 ASP.NET Web 项目部署教程也可能对您有所帮助 -[**部署**](http://www.asp.net/web-forms/tutorials/deployment)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T02:07:26.810

因为您开发了一个 Web 应用程序..so

为了让其他人在没有安装任何东西的情况下访问您的网站。

您应该将您的 Web 应用程序发布到安装所有内容的服务器（可能是一些免费主机或虚拟主机。）

然后你的朋友就可以像访问一些普通网站一样访问它了。

# ruby-on-rails - db/seeds.rb 的配置

> ID：14132080
> 
> 赞同：0
> 
> 时间：2013-01-03T01:57:24.767
> 
> 标签：ruby-on-rails

我将我的待办事项列表应用程序推送到 github。

既没有创建用户，也没有创建管理员。数据库未上传到 github（也不应该）。所以我应该将所有初始设置添加到 db/seeds.rb 以确保所有 db 期望都到位。

此外，种子文件中没有创建角色，因此应用程序无法注册用户。

我尝试将所有初始设置添加到`db/seeds.rb`：

```
Role.create({name: "Admin"})
Role.create({name: "Woeker"})

user1 = User.create!(
    email: "admin2@gmail.com",
    password: "12345678",
    password_confirmation: "12345678"
    encrypted_password: "$2a$10$7aK4tZTsCDB64qQI/kl.d.nZGwjEJPh7YlUNE8/Ty.0JhAMS.ALX6"
    role_ids = [1]
)

user2 = User.create!(
    email: "worker2@gmail.com",
    password: "12345678",
    password_confirmation: "12345678"
    encrypted_password: "$2a$10$7aK4tZTsCDB64qQI/kl.d.nZGwjEJPh7YlUNE8/Ty.0JhAMS.ALX6"
    role_ids = [2]
) 
```

（encrypted_pa​​ssword 取自 rails 控制台：u = user.last..）

不幸的是，我不确定我是否添加了所有我必须添加的内容，以及我是否完全做到了。

在 的页面中`localhost:3000/users/sign_up`，我必须输入：电子邮件、密码和密码确认。

这些是迁移：

```
class DeviseCreateUsers < ActiveRecord::Migration
  def change
    create_table(:users) do |t|
      ## Database authenticatable
      t.string :email,              :null => false, :default => ""
      t.string :encrypted_password, :null => false, :default => ""

      ## Recoverable
      t.string   :reset_password_token
      t.datetime :reset_password_sent_at

      ## Rememberable
      t.datetime :remember_created_at

      ## Trackable
      t.integer  :sign_in_count, :default => 0
      t.datetime :current_sign_in_at
      t.datetime :last_sign_in_at
      t.string   :current_sign_in_ip
      t.string   :last_sign_in_ip

      t.timestamps
    end

    add_index :users, :email,                :unique => true
    add_index :users, :reset_password_token, :unique => true
  end
end

class Roles < ActiveRecord::Migration
  def self.up
    create_table :roles do |t|
      t.string :name
      t.timestamps
    end
  end

  def self.down
    drop_table :roles
  end
end

class UserRoles < ActiveRecord::Migration
  def self.up
    create_table :roles_users, :id => false do |t|
      t.references :role, :user
    end
  end

  def self.down
    drop_table :roles_users
  end
end 
```

任何帮助表示赞赏！

**更新：这是解决方案吗？**

```
Role.create({name: "Admin"})
Role.create({name: "Woeker"})

user1 = User.create!(
    email: "admin2@gmail.com",
    password: "12345678",
    password_confirmation: "12345678"
    role_ids = [1]
)

user2 = User.create!(
    email: "worker2@gmail.com",
    password: "12345678",
    password_confirmation: "12345678"
    role_ids = [2]
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T02:05:19.200

我有类似的东西。删除密码确认。就像您在登录表格中一样。

# django - django视图模型迭代

> ID：14132084
> 
> 赞同：0
> 
> 时间：2013-01-03T01:57:41.197
> 
> 标签：django, django-templates, django-views

模型：

```
class Subject(models.Model):
    name = models.CharField(max_length=50)
    places = models.IntegerField()

class Temp(models.Model):
    subject_r = models.ForeignKey(Subject) 
```

现在在我看来，我想做简单的事情：如果 Temp 表中存在 Subject id，则字段位置（整数）需要减 1，否则，它应该保持原样，然后我想显示正确的在我的模板中放置变量。请注意，我不想在数据库中保存新值，我只想让它在模板中正确显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T02:14:32.380

```
temp = Temp.objects.values_list('subject_r_id', flat=True)
subjects = Subject.objects.all()
for subject in subjects:
    if subject.id in temp:
        subject.places = subject.places - 1 
```

由于它仅用于显示，我实际上会设置一个任意的新属性，以便清楚您不是在尝试修改数据库。

```
temp = Temp.objects.values_list('subject_r_id', flat=True)
subjects = Subject.objects.all()
for subject in subjects:
    if subject.id in temp:
        subject.places_display = subject.places - 1
    else:
        subject.places_display = subject.places

{{ subject.places_display }} 
```

# c - 在 C 程序中使用汇编语言的目的是什么？

> ID：14132095
> 
> 赞同：11
> 
> 时间：2013-01-03T01:59:22.160
> 
> 标签：c, assembly, inline-assembly

在 C 程序中使用汇编语言的目的是什么？编译器已经能够生成汇编语言。在什么情况下写汇编比写 C 更好？性能是一个考虑因素吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-03T02:08:26.477

除了大家所说的：并非所有 CPU 功能都暴露给 C。有时，特别是在驱动程序和操作系统编程中，需要显式使用特殊寄存器和/或命令，否则这些是不可用的。

还有向量扩展。

在编译器内在函数出现之前尤其如此。这些在一定程度上减轻了对内联汇编的需求。

* * *

内联汇编的另一个用例与 C 与反射语言的接口有关。具体来说，如果您需要在编译时不知道其原型的情况下调用函数，则汇编几乎是必需的。换句话说，当该函数的参数的数量和数据类型只是运行时变量时。在这种情况下，C 可变参数函数和`stdarg`机器不会帮助您 - 它们会帮助您*解析*堆栈帧，但不会*构建*堆栈帧。另一方面，在组装中，这是非常可行的。

这不是操作系统/驱动程序方案。至少有两种技术——Java 的 JNI 和 COM 自动化——这是必须的。在自动化的情况下，我说的是 COM 运行时使用它们的类型库来编组双接口的方式。

我*可以*为此想到一个非常粗糙的 C 替代程序集，但它会像罪恶一样丑陋。

* * *

另一个用例：崩溃/运行时错误报告。对于事后调试，您希望在崩溃点尽可能多地捕获程序状态（即所有 CPU 寄存器），而汇编是比 C 更好的工具。

* * *

我只介绍了**需要**组装的情况。其他答案中涵盖了手动优化性能。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-03T02:03:55.160

在少数情况下，手动优化的汇编语言可以比 C 编译器从 C 源代码生成的汇编语言更有效地运行。此外，对于习惯于汇编语言的开发人员来说，有些东西似乎更容易用汇编语言编写。

对于这些情况，许多 C 编译器允许内联汇编。

然而，随着 C 编译器变得越来越好并产生高效的代码，这种情况变得越来越少，并且大多数平台对一些低级软件类型进行了限制，这些软件通常是从用汇编程序编写中受益最多的软件类型。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-03T02:05:30.237

一般来说，它是性能，但性能非常特殊。例如，编译器可能不会生成处理器的 SIMD 并行指令。通过利用处理器特定的数据格式，然后发出处理器特定的并行指令（例如 ARM NEON 或 Intel SSE），可以在图形或信号处理问题上出现非常快的性能。即使这样，一些编译器也允许使用内部函数在 C 中表达这些。

虽然过去常常使用汇编语言插入来手动优化关键功能，但那些日子已经基本完成。现代编译器非常好，而现代处理器具有非常复杂的时序要求，因此手动优化的代码通常不如预期的那么优化。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-03T03:04:15.840

用 C 编写内联程序集有多种原因。我们可以简单地将原因分为**必要**和**不必要**。

出于不必要的原因，可能是：

*   平台兼容性
*   表现有关
*   代码优化
*   等等

我认为上面是不必要的，因为有时它们可​​以被丢弃或通过纯 C 实现。例如平台兼容性，您可以完全为每个平台实现特定版本，但是，使用内联程序集可能会减少工作量。在这里我们不打算过多谈论不必要的原因。

出于必要的原因，它们可能是：

*   标准库的一些事情是不够的
*   编译器不支持某些指令集
*   目标代码生成不正确
*   编写堆栈敏感代码
*   等等

这些原因被认为是必要的，因为它们几乎不可能用纯 C 语言完成。例如，在旧的`DOS`es 中，软件中断`INT21`是**不可重入**的。如果要写一个**Virtual Dirve**完全使用`INT21`编译器支持，那是不可能的。在这种情况下，您需要挂钩原始`INT21`，并使其可重入。但是，编译后的代码会**使用 prolog/epilog 包装您的每个调用**。因此，您永远无法破坏受限制的东西，**或者您只是破坏了代码**。您可以通过使用带有库的纯 C 语言来尝试任何技巧；但即使你能成功找到一个技巧，那意味着**你找到了一个特定的订单**编译器生成机器代码；这意味着：您试图**让编译器将您的代码编译为完全机器码**。那么，**为什么不**直接编写内联程序集呢？

这个例子解释了上面所有必要的原因`instruction set not supported`，但我认为这很容易想到。事实上，编写内联程序集的理由更多，但现在你对它们有了一些想法，等等。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-05T00:33:37.287

出于好奇，我在这里添加一个具体示例，说明您只能在汇编中执行的不那么低级别的操作。我在大学时代的一本汇编书中读到了这一点，它被用来展示 C/C++ 的固有局限性，以及如何用汇编克服它。

问题是当参数的确切数量仅在运行时已知时，我如何*调用函数？*事实上，在 C/C++ 中，您可以轻松定义一个接受可变数量参数的函数，例如`printf`. 但是在调用该函数时，编译器想确切地知道必须传递多少个参数。您可能会通过比要求更多的参数，这不会造成任何伤害。但是，如果数量意外增长到 100 或 1000 个参数，并且必须从数组中挑选出来怎么办？解决方案当然是使用汇编，您可以在其中动态创建适当大小的堆栈帧，复制堆栈上的参数，调用函数，最后重置堆栈。

在实践中，这几乎不会是一个限制（除非您使用的库设计得非常糟糕）。像其他人在回答中指出的那样，在 C 中使用汇编的人有更好的理由这样做。不过，我认为这可能是一个有趣的事实。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-03T02:11:58.267

我宁愿将其视为为特定平台编写非常特定代码的一种方式，优化虽然仍然很常见，但现在使用较少。C 语言中汇编的知识和用法也被全色帽子练习。

# css - @font-face 在 IE8/9 中不工作，但在 IE7 中工作

> ID：14132097
> 
> 赞同：0
> 
> 时间：2013-01-03T01:59:54.083
> 
> 标签：css, font-face

我正在使用以下 CSS 代码作为自定义字体，基于 Paul Irish 的防弹 @font-face 语法：

```
@font-face {
    font-family: 'TradeGothic';
    src: url('tradegothiclt.eot');
    src: local('☺'),  
        url('tradegothiclt.otf') format('otf'),
        url('tradegothiclt.ttf') format('truetype');
} 
```

出于某种原因，这在 Firefox、Chrome 和 IE7 中完美运行，但在 IE 8/9 中不起作用。任何想法为什么会这样？我尝试了其他字体方法，每次都得到相同的结果。我不知道它是否相关，但这是通过 Wordpress 安装完成的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T11:07:24.357

将`@font-face`规则移出`@media`规则。

通过[一般的 CSS 语法](http://www.w3.org/TR/CSS2/syndata.html#tokenization)，at-rules 可能只出现在样式表的顶层，而不是嵌套在另一个 at-rule 中。IE 9 似乎强制执行此操作，您还可以使用[W3C CSS Validator](http://jigsaw.w3.org/css-validator/)进行检查（当嵌套规则时，它会给出一个模糊的错误消息“解析错误”）。

# ios - 应用程序与状态栏相遇的 iPad 角半径

> ID：14132102
> 
> 赞同：1
> 
> 时间：2013-01-03T02:00:28.520
> 
> 标签：ios, ipad, rounded-corners, cornerradius

我正在尝试为我的应用程序制作一些自定义艺术作品，这些艺术作品将显示在应用程序的顶部，就在状态栏的正上方。

为了使艺术看起来不错，我想知道下图所示的应用程序部分的圆角半径是多少：

![这个角半径是多少？](../Images/07038f07961c3a90e430f6712d4dd3df.png)

我想知道iOS使您的应用程序适合的半径是多少。

谢谢，

尔威软件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T02:14:31.833

它是关于`4.5`。我截取了模拟器的屏幕截图，放大了大约 2000%，并比较了各种值以将其拨入。

如果您在 Interface Builder 中创建 UIView 并`layer.cornerRadius`在 User Defined Runtime Attributes 中指定 ，那么 的值`5`就足够接近了。

# flash - 在 JavaFX WebEngine 中实现 Flash

> ID：14132105
> 
> 赞同：0
> 
> 时间：2013-01-03T02:00:54.917
> 
> 标签：flash, air, javafx-2

我知道 Adob​​e 有一个用于 Java 的 Flash API，称为 Air，但我会用它做什么，它是否适合 JavaFX `WebEngine`？我需要一些指向正确的方向。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T06:45:02.157

Air 不是 Java 的 Flash API。

根据 Adob​​e 的[什么是空气？](http://www.adobe.com/products/air/faq.html)常问问题：

> Adobe AIR 是一个跨操作系统的运行时，它允许开发人员结合 HTML、JavaScript、Adobe Flash® 和 Flex 技术以及 ActionScript。

空气用于：

> 在各种设备上部署富 Internet 应用程序 (RIA) ... AIR 允许开发人员... 构建他们的应用程序并轻松交付跨操作系统工作的单个应用程序安装程序。

试图整合 Air 和 JavaFX WebEngine 绝对是错误的方向。Air 不适合 JavaFX WebEngine，因为 JavaFX 没有 Air 运行时的概念。

# python - 使用 Python 将 DLA AI 绑定在一起

> ID：14132106
> 
> 赞同：-2
> 
> 时间：2013-01-03T02:01:05.713
> 
> 标签：python, scripting, artificial-intelligence

所以，我对编程完全陌生。在过去的几周里，我一直在学习基本的 Python。我一直想学习一门编程语言，但现在我钻研它的主要原因是为我的男人洞穴创建一个人工智能程序。以下是我的想法，我相信这些想法之前已经被考虑过很多次。他们只是我的目标：

我想使用一个预先建立的开源聊天机器人并将其绑定到自然语言进程，使其能够将我的语音转换为可以执行的文本命令，同时获取其文本输出并对其进行过滤通过听得见的语音样本（非常像 SIRI）。这样当我开启了自然语言响应功能后，我就可以和它进行基本的对话了。我还可以通过语音命令关闭对话方面，以便它唯一响应的是直接命令（例如“杰拉德，请打开一封电子邮件，执行。收件人，logan.wolf.ypher@gmail.com，主题，你好世界，身体，插入我说的文字。）

我还想让它在我的手机尝试连接到 wifi 时识别出我在那里。

我知道目前这对我来说可能有点复杂，但我听说学习一门语言的最佳方法是跳入你喜欢的项目。

有没有人有任何关于从哪里开始寻找基础 AI 的指示，或者你想给我的一般提示？我非常感谢这些信息。谢谢你。

-洛根

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T02:14:38.403

考虑到这一点`So, I am completely new to programming`，我建议您采取该项目的一小部分并成功实施它。例如，每 1 分钟检查一次的电子邮件帐户，您可以向其发送文本命令。从那里开始升级它以使用聊天、手机、语音到文本，最后是人工智能。我之所以这么说，是因为我知道当我在一个领域（电子、工程、编程、语言等）新手并且失败时开始一个过于雄心勃勃的项目的困难。成功，即使是一小步，也更好！

# java - 编写文档过滤器 - 找不到 super.insertString

> ID：14132118
> 
> 赞同：2
> 
> 时间：2013-01-03T02:03:03.833
> 
> 标签：java, ruby, jruby, documentfilter

您好，我正在使用 jruby 编写应用程序，但目前在实现`DocumentSizeFilter`. 目前我正在尝试解决两个问题。

1.  **调用 super.insertString （或我之前尝试过的 super.repalce ）不断触发 JRuby 中未找到的方法，但该方法正在被调用。**
2.  **另外为什么在插入时调用替换而不是插入？**

PS：这两个文件都是使用

```
jruby 1.7.1 (1.9.3p327) 2012-12-03 30a153b on OpenJDK 64-Bit Server VM 1.7.0_09-b30 [linux-amd64] 
```

以下是我目前正在使用的测试文件：

```
#JavaUtilities\DocumentSizeFilter.rb
module JavaUtilities
    class DocumentSizeFilter < DocumentFilter
        def initialize max_char
            super()
            @MAX_CHAR = max_char
        end
        def insertString(fb, offset, string, attrs) 
            puts 'doing insert'
            super.insertString(fb, offset, string, attrs)
        end
        def remove(fb, offset, length) 
            puts 'doing remove'
        end

        def replace(fb,  offset, length, text, attrs) 
            puts 'doing replace'
            super.insertString(fb, offset, text, attrs)
        end
    end
end 
```

```
 #test.rb
include Java
java_import java.awt.event.WindowEvent;
java_import javax.swing.JButton;
java_import javax.swing.border.Border;
java_import java.awt.Graphics;
java_import javax.swing.JFrame
java_import javax.swing.text.DocumentFilter;
java_import javax.swing.JTextArea;
require 'JavaUtilities/DocumentSizeFilter'
class JFrames < JFrame
    def initialize
        super "HI"
        self.setSize 500,500
        self.setDefaultCloseOperation JFrame::EXIT_ON_CLOSE
        self.setLayout nil
        add(area = (JTextArea.new ))
        area.setBounds 30,30,100,40
        area.getDocument.setDocumentFilter(JavaUtilities::DocumentSizeFilter.new 150) 
        self.setVisible true
    end
end

JFrames.new 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T02:32:43.800

您的困惑是`super`Ruby 中的内容：它不是参考，而是关键字。

您需要做的就是调用`super`，例如：

```
def replace(fb,  offset, length, text, attrs) 
  puts 'doing replace'
  super
end 
```

`super` with no args calls the superclass method with the current method's args. You can call with args, e.g., `super foo, bar`, or with no args (explicitly requires parens) e.g., `super()`.

# sql-server-2008 - 复制后的 Order Publisher 表

> ID：14132121
> 
> 赞同：1
> 
> 时间：2013-01-03T02:03:36.333
> 
> 标签：sql-server-2008, database-replication

我有两个数据库服务器。远程服务器复制到本地服务器。发送的数据基本上是事务的 XML 描述。两台数据库服务器将此 XML 数据编译到辅助数据库中，然后将基于文本的 XML 文件发送到另一台服务器，由于无法避免的原因，该服务器无法与其他两台服务器直接联系。为 XML 文件选择的行的顺序至关重要。基本上，如果服务器 A 生成一行，然后 B 生成 2 行，然后 A 生成第二行，我们需要能够选择“ABBA”。此时，行的来源并不重要，只有顺序。我知道一个标识列不能很好地排序，因为在复制中我们需要在两个不同的范围内播种该列。时间戳也不起作用，因为有几行非常快速地生成，几乎同时生成，并且时间戳没有足够的小数位来获得准确的顺序。复制后如何以正确的顺序获取行？

# javascript - 使用 JavaScript 在新窗口中打开 URL

> ID：14132122
> 
> 赞同：163
> 
> 时间：2013-01-03T02:03:46.160
> 
> 标签：javascript, new-window

我正在制作一个“分享按钮”来分享当前页面。我想获取当前页面的 URL 并在新窗口中打开它。我有当前的 URL 部分工作，但似乎无法让下一部分工作。

我在语法上苦苦挣扎。我想将新窗口大小指定为`width=520, height=570`.

就像是：

```
<a target="_blank"
   href="https://www.linkedin.com/cws/share?mini=true&amp;url=[sub]" 
   onclick="this.href = this.href.replace('[sub]',window.location)">
    LinkedIn
</a> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：269
> 
> 时间：2013-01-03T02:28:13.973

使用`window.open()`：

```
<a onclick="window.open(document.URL, '_blank', 'location=yes,height=570,width=520,scrollbars=yes,status=yes');">
  Share Page
</a> 
```

这将创建一个标题为`Share Page`在高度为 570、宽度为 520 的新窗口中打开当前 url 的链接。

* * *

## 回答 #2

> 赞同：75
> 
> 时间：2013-01-03T02:09:22.410

只用[`window.open()`](https://developer.mozilla.org/en-US/docs/DOM/window.open)函数？第三个参数允许您指定窗口大小。

### 例子

```
var strWindowFeatures = "location=yes,height=570,width=520,scrollbars=yes,status=yes";
var URL = "https://www.linkedin.com/cws/share?mini=true&amp;url=" + location.href;
var win = window.open(URL, "_blank", strWindowFeatures); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2020-01-10T23:22:47.877

不要混淆，如果您不提供任何 strWindowFeatures ，那么它将在新选项卡中打开。

```
window.open('https://play.google.com/store/apps/details?id=com.drishya'); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2021-12-15T19:00:55.090

The following is JavaScript to be used in a function: Note, I have 1's and 0's instead of yes and no.

```
var theTop=((screen.height/2)-(theHeight/2))/2;
var theLeft=(screen.width/2)-(theWidth/2);
var features = 'height=600,width=800,top='+theTop+',left='+theLeft+',toolbar=1,Location=0,Directories=0,Status=0,menubar=1,Scrollbars=1,Resizable=1';

window.open(in_uri, WindowName, features); 
```

# c# - Webclient 启动速度慢

> ID：14132126
> 
> 赞同：2
> 
> 时间：2013-01-03T02:04:02.927
> 
> 标签：c#, winforms, performance, download, webclient

这是我单击更新按钮时的下载时间：

*   第一次 = 5 秒
*   第一次之后 = 2 秒

为什么第一次需要更多时间？如果没有`wc.Proxy = null;`第一次需要 2 分钟，还有什么可以减慢它的速度吗？

```
Stopwatch sw = new Stopwatch();
sw.Start();
using (WebClient wc = new WebClient())
{
    wc.Proxy = null;
    wc.Headers.Add("user-agent", "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:17.0) Gecko/20100101 Firefox/17.0");
    wc.DownloadFile("http://example.com/folder/file.txt",@"folder/files/file.txt");
}
sw.Stop(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T02:36:29.553

**加速此过程的**一个可能解决方案是缓存。如果您正在下载的文件/数据的性质是静态的，最好将它们缓存在您的网络/应用服务器上。

**另一种解决方案是在不同的 UI 线程**中触发下载过程，并且可以使用异步过程来释放您的 UI 线程，以避免冻结应用程序 UI。

以下是一些可能有用的参考资料：

*   [UI线程](http://msdn.microsoft.com/en-us/library/ff647051.aspx)
*   [从 BackgroundWorker 线程访问 UI 控件 - C#](https://stackoverflow.com/q/4428817/1437962)
*   [线程 - UI 锁定](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/4caf2554-61e6-4dd1-b493-dadd74178703)

# objective-c - 在 .h 接口或 .m 文件的扩展名中声明属性？

> ID：14132129
> 
> 赞同：13
> 
> 时间：2013-01-03T02:04:47.497
> 
> 标签：objective-c, coding-style, declared-property

在 Objective-C 中，最好的做法是：

1.  在.h中声明按钮等对象，然后在.m中合成

    ```
    .h
    @interface SomeViewController : UIViewController  
      @property (strong, nonatomic) UIButton *someButton;  
    @end

    .m
    @implementation SomeViewController  
      @synthesize someButton = _someButton;  
    @end 
    ```

2.  或在 .m 中将它们声明为 ivars

    ```
    @interface SomeViewController ()  
      @property (strong, nonatomic) UIButton *someButton;  
    @end 
    ```

我注意到在很多 Apple 代码中，特别是他们的 Breadcrumbs 示例代码，他们的许多属性都在接口中声明。两者有区别吗？我还注意到，当在 中声明属性时`@interface`，它们会自动合成并带有下划线前缀，从而使`someButton = _someButton`合成无用。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-03T02:08:31.877

首先，[从 Xcode 4.4](https://developer.apple.com/library/ios/releasenotes/ObjectiveC/ObjCAvailabilityIndex/index.html)开始，不再需要`@synthesize`（除非您同时更改 setter 和 getter 方法），无论`@property`是在`@interface`or中声明`@implementation`.

如果`@property`只能从类中访问，则在 .m 文件`@property`的[类扩展中声明 。](https://developer.apple.com/library/ios/documentation/cocoa/conceptual/ProgrammingWithObjectiveC/CustomizingExistingClasses/CustomizingExistingClasses.html#//apple_ref/doc/uid/TP40011210-CH6-SW6 "苹果文档")这提供了封装，并且很容易看出`@property`没有从另一个类中使用。

如果它`@property`被其他类使用，按照设计，然后`@interface`在 .h 文件中定义它。

# c# - 服务定位器的变化

> ID：14132131
> 
> 赞同：1
> 
> 时间：2013-01-03T02:04:53.337
> 
> 标签：c#, generics, service-locator

```
IModificationRequst<Employee> req = new ModificationRequst();
Locator.Instance.GetService<IModificationRequstHandler<Employee>>().Handle(req); 
```

我有一个服务定位器，它可以定位返回实现 IModificationRequstHandler 的对象实例的服务。

我试图将其修改为而不是返回一个 IModificationRequstHandler 实现者，它只是在内部找到服务并调用它的处理程序方法，所以上面的 2 行看起来像这样：

```
IModificationRequst<Employee> req = new ModificationRequst();
Locator.Instance.HandleRequest<IModificationRequst<Employee>>(req); 
```

但是在使用泛型时遇到了困难，是否有一种已经建立的模式可以将请求重新分配给适当的请求处理程序并调用它们的处理，而不是获取一个处理程序然后从客户端调用它们的 Handle 方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T06:30:18.323

这违反了单一职责原则。您不应该让服务定位器为不同的服务实现逻辑。

如果你确实想使用静态类，你应该添加另一个：

```
public static class RequestHandler
{
    public static void Handle<T>(T request)
    {
        Locator.Instance.GetService<IModificationRequstHandler<T>>().Handle(req);
    }
} 
```

接着：

```
IModificationRequst<Employee> req = new ModificationRequst();
RequestHandler.Handle(req); 
```

（*旁注：您可能会查找[依赖注入和 IoC 容器](http://www.codeproject.com/Articles/386164/Get-injected-into-the-world-of-inverted-dependenci)，因为它使代码更易于维护*）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T04:47:37.547

您`HandleRequest`在定位器类中的方法应定义如下（假设`Handle`返回类型为`void`）：

```
public void HandleRequest<T>(IModificationRequest<T> req)
{
    IModificationRequstHandler<T> handler = GetService<IModificationRequest<T>>();
    handler.Handle(req);
} 
```

并且您的`IModificationRequstHandler`界面应定义如下：

```
public interface IModificationRequstHandler<T>
{
    void Handle(IModificationRequst<T> req);
} 
```

然后您的电话将变为：

```
Locator.Instance.HandleRequest(req); 
```

这里的泛型类型参数`Employee`是从参数值推断出来的`req`，因此不需要指定。

# iphone - UIPageViewController 在旋转时重置为第一页

> ID：14132132
> 
> 赞同：3
> 
> 时间：2013-01-03T02:04:58.610
> 
> 标签：iphone, objective-c, ios, ipad, uipageviewcontroller

当用户旋转他们的设备时，`UIPageViewController`它会从它显示的任何页面淡出回到第一页。这真的很烦人，尤其是当用户将多个页面放入文档时。它仅出现在 iOS 6 中。

当用户旋转他们的设备时，`spineLocationForInterfaceOrientation`被调用，这可能与问题有关。

```
- (UIPageViewControllerSpineLocation)pageViewController:(UIPageViewController *)pageViewController
               spineLocationForInterfaceOrientation:(UIInterfaceOrientation)orientation {

    return UIPageViewControllerSpineLocationMin;

} 
```

我总是希望脊椎在左侧。

你知道是什么导致`UIPageViewController`重置吗？[我在这里](http://openradar.appspot.com/12745144)发现了一个错误报告，但我一直无法在网上找到任何其他信息，让我认为我做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T02:43:33.820

我不知道存在这样的错误，但最坏的情况是，您可以覆盖

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration;
- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation; 
```

捕获旧状态并在转换完成后重新设置它。我很想相信还有其他原因导致了这个问题，但没有更多数据，我无法判断。你能发布更多的 UIPageViewController 代码吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T09:58:02.123

你`spineLocationForInterfaceOrientation`的不完整

它应该是这样的：

```
- (UIPageViewControllerSpineLocation)pageViewController:(UIPageViewController *)pageViewController
                   spineLocationForInterfaceOrientation:(UIInterfaceOrientation)orientation
{

        UIViewController *currentViewController = self.pageViewController.viewControllers[0];
        NSArray *viewControllers = @[currentViewController];
        [self.pageViewController setViewControllers:viewControllers direction:UIPageViewControllerNavigationDirectionForward animated:YES completion:NULL];

        return UIPageViewControllerSpineLocationMin;

} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-07T01:42:23.513

我遇到过同样的问题。我发现只是`spineLocationForInterfaceOrientation`为我删除了修复它的实现。

# java - 如何在新进程中执行 Jar 文件并关闭原始 Jar？

> ID：14132137
> 
> 赞同：1
> 
> 时间：2013-01-03T02:05:35.770
> 
> 标签：java, jar, runtime, execution, terminate

我有 2 个 jar 文件。我希望 Jar A 打开 Jar B 然后让 jar A 终止，让 Jar B 运行。我该怎么做呢？

编辑：我的意思是我希望 JarA 在 JVM 的一个实例中打开，然后我希望 JarA 在 JVM 的新实例中执行 JarB，然后 JarA 使用 system.exit(0)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T02:15:52.547

是否要启动一个新的 JVM 实例来运行另一个 Jar，然后终止？这并不常见。

或者，您可以只将 Jar B 包含到类路径中，并使用它在 Jar A 中的代码中提供的类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T02:26:01.360

要启动一个新的 JVM，你可以`java`像任何其他操作系统命令一样启动外部进程，查看[ProcessBuilder上的文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ProcessBuilder.html)

```
 ProcessBuilder pb = new ProcessBuilder("java", "-classpath", "B.jar", "B.BMain");
 Process p = pb.start(); 
```

在 Java 中启动外部进程有很多注意事项，你会在这里找到很多关于 SO 搜索`Process`和`ProcessBuilder`

* * *

`jar`文件不运行或终止；也就是说`jvm`，例如由命令启动`java`。例如，当您运行以下命令时：

```
java -classpath A.jar A.Main 
```

一个新`jvm`的启动并执行`main`该类的方法`A.Main`

现在该方法`Main.main()`，*可以*调用类的方法`B.jar`，如果它在类路径中。例如，如果命令是

```
java -classpath A.jar;B.jar pkg.A 
```

然后`A.Main.main`里面可以

```
 B.SomeClass.SomeMethod() 
```

`B`在哪里`B.jar`

当您说“打开 B.jar”时，这就是您的意思吗？请注意，这不会“关闭”另一个“A.jar”，无论这可能意味着什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T02:34:44.293

假设，即使在阅读了以下答案之后，您仍然想在未附加到父进程“JAR-A”的单独 JVM 进程中调用“JAR-B”，那么最好的选择可能是使用类似于“cmd / start”（对于 Windows）或使用 'sh ... &'（对于 *nix）（来自 JAR-A 中的 java 程序）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-26T16:04:05.927

我有一个可能的部分答案：

因此，如果您在 Windows 上使用 Java，那么您可以使用 `new ProcessBuilder("java", "-classpath", "B.jar", "B.Main").inheritIO().start();`

这不仅会启动进程，还会在同一个命令提示符窗口中启动它。要退出 JAR A，请`System.exit(0);`在创建进程 B 后立即在 JAR A 的 main 方法中包含 a。

对于 Linux 版本，我不太确定，因为我的程序遇到了相同/类似的问题。

[在Java中创建一个新进程，退出当前进程](https://stackoverflow.com/questions/63068015/create-a-new-process-in-java-exit-the-current-process)

编辑：我确实在我的上述问题中发布了我的答案。:)

# javascript - 从“后台堆栈”中删除页面

> ID：14132139
> 
> 赞同：0
> 
> 时间：2013-01-03T02:05:40.017
> 
> 标签：javascript, html, cordova

我正在为应用程序使用cordova，应用程序的一部分是我需要转到另一个屏幕，然后返回前一个屏幕并返回一些数据，我通过在获取请求中传递一些数据来做到这一点，这一切都很好，我的数据持久性正常工作，现在我面临的唯一问题是当有人按下并返回到单独的页面而不是“他们之前所在的页面”时。

有什么方法可以告诉用户按下返回以访问该页面。话虽如此，如果用户按下，有没有办法强制用户再次返回。

例如....

主屏幕 > 次要 > 从另一个屏幕选择日期 > 返回到次要 > 按返回 > 这应该是主屏幕。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T13:52:11.920

我这样做的方法是使用 javascript 实现我自己的后台堆栈，`History.js`并且`window.localStorage`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T12:52:12.600

我认为您可以使用 javascript 事件来自定义您对后退按钮的处理，类似于这些 -

```
 document.addEventListener("backbutton", function (e) {
          alert("back button pressed");          
           return(false) //not required if default behaviour is also intended  
       }); 
```

# android - actionbarsherlock 选项卡方向更改 json

> ID：14132140
> 
> 赞同：1
> 
> 时间：2013-01-03T02:05:43.810
> 
> 标签：android, tabs, orientation, actionbarsherlock

我目前正在使用 ActionBarSherlock 创建我的操作栏。现在，我有一个从先前活动中的 Id 中选择的数组创建的选项卡。默认情况下，应用程序在此页面上启动，并默认选择第一个数组的第一个选项卡。我遇到的问题是当方向改变时，活动被破坏并再次创建，导致第一个数组的第一个选项卡显示。我试图让标签在创建时显示保存的标签，但我得到了有趣但错误的结果。当谈到 Android 时，我不是一个向导，我希望这是一个简单的修复。

该应用程序所做的是用户从先前的活动中选择一个类别，并根据从意图发送的 id，有时需要或不需要不同的选项卡。所以我使用一个数组来构建类别的选项卡。选择选项卡后，它会执行 JSON 查询并获取信息并将其显示在列表视图中。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    getSupportActionBar().setDisplayHomeAsUpEnabled(true);
    getSupportActionBar().setHomeButtonEnabled(true);
    setContentView(R.layout.pt_section);

    //use array within array to make tabs
    ActionBar bar = getSupportActionBar();
    ActionBar.Tab tab =null;     
    getSupportActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);        
    String[][] section_id_name = {
            { "News", "Opinion", "Features", "Sports", "Sustainable Life"}
            ,{ "News", "Opinion", "Features", "Sports"}
            ,{ "News", "Features" }

            };

    String[][] section_id = {
            { "1", "4", "13", "41", "42"}
            ,{ "5", "7", "11", "12"}
            ,{ "8", "9" }

            };

                Intent intent = getIntent();
                //Check if sid is null
                 sid = intent.getStringExtra(PT_newspapers.INTENT_ID);  
                if (sid == null){
                    sid = "0";          
                }

                    sid_int = Integer.parseInt(sid);
                    for (int i = 0; i < section_id[sid_int].length; i++) { 
                        tab = getSupportActionBar().newTab();
                        tab.setText(section_id_name[sid_int][i]);
                        //sid = sid1id[i];
                        tab.setTag(section_id[sid_int][i]);
                        tab.setTabListener(this);
                        getSupportActionBar().addTab(tab); 
                        System.out.println(section_id[sid_int][i]);

            }

                    if (savedInstanceState != null) {

                        bar.setSelectedNavigationItem(savedInstanceState.getInt("tab", 1));
                        System.out.println("not null!"); 
                    }       

}//End onCreate method

@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putInt("tab", getSupportActionBar().getSelectedNavigationIndex());
}

    @Override
public void onTabSelected(Tab tab, FragmentTransaction ft) {
    // TODO Auto-generated method stub

    sectionid = tab.getTag().toString();
    System.out.println("Tab selected with id of :" + sectionid);       
    productsList = new ArrayList<HashMap<String, String>>();

    System.out.println("Now executing LoadAllProducts class");
    new LoadAllProducts().execute(); //Calls to class LoadAllProducts
    ListView lv = (ListView)findViewById(R.id.list2);
    lv.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {

            // getting values from selected ListItem

            String id2 = ((TextView) view.findViewById(R.id.id_tag)).getText()
                    .toString();

            // Starting new intent
            Intent in = new Intent(getApplicationContext(),PT_Article.class);
            // sending sid to next activity
           in.putExtra(INTENT_ID, id2);

            // starting new activity and expecting some response back
            //startActivity(in);

            startActivityForResult(in, 100);
            overridePendingTransition(0,0);
            //mError.setText("Error, No stories loaded");
        }

    }); 

} //End onTabSelected 
```

方向更改后，该应用程序可以在选项卡更改时显示正确的故事，但是当它最初切换时，它将保存当前选项卡，但显示错误的数据。

我整天都在试图弄清楚这一点，但没有运气，任何见解都将不胜感激。

# php - 重复的文章出现在网站上

> ID：14132141
> 
> 赞同：1
> 
> 时间：2013-01-03T02:06:05.237
> 
> 标签：php, html, mysql

我最近在我的网站上注意到一个新闻页面正在重复来自数据库中所有“五月”的新闻文章（您会在这里看到：[www.darlingtontowntwinning.co.uk/news_&_events](http://www.darlingtontowntwinning.co.uk/news_&_events)）

我知道编码很混乱并且可能已经过时，但是，该网站是为我们构建的，而我目前还没有技能（还 - 我正在学习！）来更改整个网站。

有没有办法阻止这种情况发生 - 因为我相信我已经限制了要显示的每条记录之一：

```
<div id="right" class="news">
<h3>Archive</h3>
<? $news=$session->getNews("","","",1);?>
<? while($article=mysql_fetch_array($news)){?>
<? 
$date = $article['thedate'];
$year = date('Y', $date);
$month = date('F', $date);
?>
<h4><?=$month." - ".$year;?></h4>
<nav class="small">
<? $innernews=$session->getNews("",$month,$year);?>
<? while($innerarticle=mysql_fetch_array($innernews)){?>
<a href="/news/<?=$innerarticle['ftitle']?>" <? if($title==$innerarticle['ftitle']){?> class="active"<? }?>><?=$innerarticle['title']?></a>
<? }?>
</nav>
<? }?>
</div> 
```

获取新闻功能是：

```
function getNews($title,$month,$year,$group){
global $database;
return $database->getNews($title,$month,$year,$group);} 
```

$database->getNews 函数是：

```
//get news
function getNews($title,$month,$year,$group){
   if($title){
       $q=$this->query("SELECT * FROM ".TBL_NEWS." WHERE ftitle = '$title'" );
       return mysql_fetch_array($q);
   }else if($year && $month){
     $q=mysql_query("SELECT * FROM ".TBL_NEWS." WHERE (FROM_UNIXTIME(thedate, '%Y') = '$year') AND (FROM_UNIXTIME(thedate, '%M') = '$month') ORDER BY thedate DESC");
     return $q;
     }else if($group){
         $q=$this->query("SELECT * FROM ".TBL_NEWS." GROUP BY (FROM_UNIXTIME(thedate, '%Y')),(FROM_UNIXTIME(thedate, '%M')) ORDER BY thedate DESC" );
       return $q;
     }else{
       $q=$this->query("SELECT * FROM ".TBL_NEWS." ORDER BY thedate DESC" );
       return $q;
   } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T04:22:44.210

该代码似乎正在运行

```
//get news from group 1

$news=$session->getNews("","","",1);

// for each article work out the date

while($article=mysql_fetch_array($news))
    $date = $article['thedate'];
    $year = date('Y', $date);
    $month = date('F', $date);
...

// then select everything again after working out the date (odd way of doing it)

$innernews=$session->getNews("",$month,$year);

// and output each 
```

所以，因为五月有两个事件，所以它输出了两次标题。让我过一遍...

*   获取按日期分组的新闻（据称）
    *   六月，仅 1 篇文章
    *   1：
        *   输出标题
        *   选择文章
    *   输出文章
    *   五月，2 篇文章
    *   1：
        *   输出标题
        *   选择文章
        *   输出文章
    *   2：
        *   输出标题
        *   选择文章
        *   输出文章

此 group by`SELECT * FROM ".TBL_NEWS." GROUP BY (FROM_UNIXTIME(thedate, '%Y')),(FROM_UNIXTIME(thedate, '%M')) ORDER BY thedate DESC`的行为不符合预期，并返回 5 月的两个结果

试试这个代码

```
<div id="right" class="news">
<h3>Archive</h3>
<? 
$news=$session->getNews();
$bydate=array(); // articles by date
while($article=mysql_fetch_array($news)){
    $k=date('YF', $date);
    if (!isset($bydate[$k])) $bydate[$k]=array(); // create sub array
    $bydate[$k][]=$article; // push article to this sub array
}
foreach ($bydate as $date->$articles){ // run through top array
    ?><h4><?= substr($date,4) . " - " . substr($date,0,4); ?></h4><nav class="small"><? 
    foreach ($articles as $innerarticle){ // now each article within this date
        ?><a href="/news/<?=$innerarticle['ftitle']?>" <? if($title==$innerarticle['ftitle']){?> class="active"<? }?>><?=$innerarticle['title']?></a><?
    }
    ?></nav><?
}
?></div> 
```

请改变

```
function getNews($title,$month,$year,$group){ 
```

至

```
function getNews($title=NULL, $month=NULL, $year=NULL, $group=NULL){ 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-03T03:44:42.743

韦尔普。有你的问题。

你的函数说，if($title)。由于 $title 作为函数中的必需参数出现，我认为 PHP 将其注册为，是的，这是一个已设置的变量。所以，基本上会发生什么，然后，你得到一个 mysql_fetch_array 结果，然后你第二次运行 mysql_fetch_array。

尝试：

```
//in your function getNews()
if($title){
   $q=$this->query("SELECT * FROM ".TBL_NEWS." WHERE ftitle = '$title'" );
   return $q;
}
//rest of function down here 
```

那可以工作。我看到的问题是，这样做，您将在任何其他调用该功能的地方引起问题。所以要小心！上面的修复是确保你让代码进入更好状态的修复。如果你想破解，试试这个：

```
<? $innernews=$session->getNews("",$month,$year);?>
<? foreach($innernews as $innerarticle) {?>
<a href="/news/<?=$innerarticle['ftitle']?>" <? if($title==$innerarticle['ftitle']){?> class="active"<? }?>><?=$innerarticle['title']?></a>
<? }?> 
```

foreach 循环应该给你你想要的！

# c# - 仅使用 C# 关闭 Google chrome 隐身窗口

> ID：14132142
> 
> 赞同：3
> 
> 时间：2013-01-03T02:06:15.750
> 
> 标签：c#, google-chrome, kill

我想创建一个小程序来关闭谷歌隐身窗口。

我有杀死所有 chrome 窗口的代码，但我不确定如何仅隔离隐身窗口

现有代码：

```
 Process[] proc = Process.GetProcessesByName("MyApp");
        foreach (Process prs in proc)
        {
            prs.Kill();
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T04:38:52.450

我玩了一点，但没有完全成功。我能够确定哪些窗口是隐身的，并从那里从技术上终止该进程。

但是，似乎必须杀死 chrome 可执行文件才能关闭实际窗口，不幸的是，这会关闭所有 chrome 窗口。

您可能能够获得类似 SendKeys 的东西来使用 Windows 句柄模拟 Alt-F4，或者如果我没记错的话，.Net 4.5 有一些额外的关闭例程您可以尝试。

尽管如此，这里是确定哪些窗口是 chrome 以及哪些是隐身的代码。然后他们“杀死”，但它不会关闭窗口，只是杀死浏览（Aw，Snap！正如 Chrome 所说）。

```
 [DllImport("user32.dll")]
        static extern int SendMessage(int hWnd, uint Msg, int wParam, int lParam);

        [DllImport("user32.dll")]
        static extern bool CloseWindow(IntPtr hWnd);

        [DllImport("user32")]
        private static extern bool SetForegroundWindow(IntPtr hwnd);

        public const int WM_SYSCOMMAND = 0x0112;
        public const int SC_CLOSE = 0xF060;

        private void button1_Click(object sender, EventArgs e)
        {
            var proc = Process.GetProcesses().OrderBy(x => x.ProcessName);

            foreach (Process prs in proc)
                if (prs.ProcessName == "chrome" && WmiTest(prs.Id))
                {
                    prs.Kill();

                    //To test SendKeys, not working, but gives you the idea
                    //SetForegroundWindow(prs.Handle);
                    //SendKeys.Send("%({F4})");
                }
        }

        private bool WmiTest(int processId)
        {
            using (ManagementObjectSearcher mos = new ManagementObjectSearcher(string.Format("SELECT CommandLine FROM Win32_Process WHERE ProcessId = {0}", processId)))
                foreach (ManagementObject mo in mos.Get())
                    if (mo["CommandLine"].ToString().Contains("--disable-databases"))
                        return true;
            return false;
        } 
```

# java - JSoup抓取HTML值返回null？

> ID：14132143
> 
> 赞同：0
> 
> 时间：2013-01-03T02:06:17.023
> 
> 标签：java, html-parsing, jsoup

我正在尝试使用 Jsoup java 库从在线随机词生成器中提取随机词。这是我的代码，随机词生成器的链接在那里：

```
public class getWord {

    public static void grabWord(){

Document doc = Jsoup.parse( "UTF-8", "http://watchout4snakes.com/CreativityTools/RandomWord/RandomWord.aspx");

Elements links = doc.getElementsByClass("randomWord");
 String linkText = links.text();
System.out.println(linkText);
}
} 
```

如果您进入随机词生成器链接并查看源代码，则其中包含随机词：

```
<span id="tmpl_main_lblWord" class="randomWord">indictment</span> 
```

如您所见，该类是随机词，我正在尝试使用 getElementsByClass 方法来获取该元素，因为它是页面上唯一具有随机词类的元素。我也尝试过使用`doc.select("span[class$=randomWord]")`That 产生了相同的结果，没有打印。有人可以帮我吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T02:14:02.343

您正在使用接受 HTML 内容的[parse](http://jsoup.org/apidocs/org/jsoup/Jsoup.html#parse%28java.lang.String,%20java.lang.String%29)方法。你需要使用一个 take a`URL`来代替。代替

```
Jsoup.parse("UTF-8", "http://watchout4snakes.com/CreativityTools/RandomWord/RandomWord.aspx"); 
```

和

```
Jsoup.parse(new URL("http://watchout4snakes.com/CreativityTools/RandomWord/RandomWord.aspx"), 4000); 
```

更方便的是：

```
Jsoup.connect("http://watchout4snakes.com/CreativityTools/RandomWord/RandomWord.aspx").get(); 
```

# javascript - JS如何在目标变量中获取变量名？

> ID：14132145
> 
> 赞同：0
> 
> 时间：2013-01-03T02:06:52.520
> 
> 标签：javascript, variables, parameters

我是js的初学者。我试图通过互联网找到解决方案，但我不能。

有没有办法知道变量的名称是什么？

在下面，我将每个参数的值......，请指教！！！

```
Object = { a: xxx, b : xxx };

for(var i in Object ) { if(/* i`s variable name is 'a'*/){ /* do something*/ }  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T02:09:25.097

根据您的示例：

```
obj = { a: 'aaa', b: 'bbb' };

for (var i in obj) {
    if (i === 'a') {
        //do something
    }
} 
```

另一种不循环对象的方法：

```
obj = { a: 'aaa', b: 'bbb' };

if ('a' in obj) {
    // do something
} 
```

# sql - SQL SELECT 仅最接近 15 分钟的时间戳

> ID：14132147
> 
> 赞同：1
> 
> 时间：2013-01-03T02:07:06.007
> 
> 标签：sql, select, timestamp, subquery, case

我想为最接近每个 15 分钟时间值的值执行 SQL SELECT。例如：

```
00:15,
00:30,
00:45,
01:00,
01:15 etc... 
```

基于时间戳（时间），如果已经设法将每个值向下舍入到最接近的 15 分钟，但我只想要最接近的一个，则使用以下标记的时间戳（时间）并不完全在 00 秒上

```
SELECT dateadd(minute, -1 * datediff(minute, 0, 
    cast(convert(varchar(20),[time],100) as smalldatetime)) % 15, 
    dateadd(minute, datediff(minute, 0, [time]), 0)) as [TIMESTAMP],
    cast(convert(varchar(20),[time],100) as smalldatetime), [time], 
    tagname , value
FROM hdata
INNER JOIN rtdata
    ON hdata.tag_id = rtdata.id
WHERE tagname = 'M1_WH_004'
order by [TIMESTAMP] desc 
```

（注意：我需要内部连接来提取标记名，因为它们不在 hdata 表中）

产生：

![示例数据](../Images/8c828ab99c77139ab6e7c272ed5bffc4.png)

因此，对于每 15 分钟，我只想要最接近 15 分钟边界的值。对于上述数据，09:45 和 09:30 的数据分别为 09:45:15.383 和 09:30:17.463。

我需要子查询或案例语句吗？任何帮助将不胜感激！

除此之外，a 已经有一个看起来像解决方案中的数据（每 15 分钟的数据）的表，并且子查询基于最后两个值执行计算，如下所示：

```
SELECT DD1.[TIME_STAMP] AS [TIME_STAMP], DD1.[kWh1] AS [kWh1], DD1.[kWh2] AS [kWh2], (DD1.[kWh1] + DD1.[kWh2]) AS [Total] FROM (SELECT a.ID
      ,a.TIME_STAMP
      ,(a.[1_M1_Wh] - (SELECT TOP 1 b.[1_M1_Wh] FROM TagCapture b WHERE b.TIME_STAMP = DATEADD(MINUTE, -15, a.TIME_STAMP))) * 0.04 AS kWh1
      ,(a.[1_M2_Wh] - (SELECT TOP 1 b.[1_M2_Wh] FROM TagCapture b WHERE b.TIME_STAMP = DATEADD(MINUTE, -15, a.TIME_STAMP))) * 0.04 AS kWh2
  FROM [TagCapture] a) DD1 
```

如何使用此查询中提供的解决方案？我对所有子查询有点困惑。

也就是说，根据 t 子查询定义的数据，从前一个中减去一个 15 分钟的计数值，然后乘以得到所需的值，我将在每个 FROM 子句中插入 t 子查询的位置？我似乎无法让它工作。以上只是 t 查询为“M1”和“M2”定义两个不同标记名的地方。

再次提前感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T02:25:22.137

看起来您正在使用 SQL Server。如果是这样，那么你可以用它`row_number()`来解决这个问题。

```
select t.*
from (select t.*, row_number() over (partition by tagname, time15 order by time) as seqnum
      from (SELECT dateadd(minute, -1 * datediff(minute, 0, cast(convert(varchar(20),[time],100) as smalldatetime)) % 15, dateadd(minute, datediff(minute, 0, [time]), 0)) as [TIMESTAMP], cast(convert(varchar(20),[time],100) as smalldatetime) as time15,
                   [time], tagname , value
            FROM hdata INNER JOIN rtdata
                 ON hdata.tag_id = rtdata.id
            WHERE tagname = 'M1_WH_004'
          ) t
    ) t
where seqnum = 1 
```

# php - CodeIgniter：提交带有按钮链接的表单

> ID：14132151
> 
> 赞同：-1
> 
> 时间：2013-01-03T02:07:27.967
> 
> 标签：php, codeigniter

我是codeigniter的新手。
我有带有 3 个文本字段和 1 个下拉列表的注册表单。注册按钮是一个链接按钮，它是用 CSS3 设计的。

```
<p><a class="button-link" href="#">Create Account</a></p> 
```

在控制器方法中添加了`form`助手类`autoload.php`并将其加载到控制器方法中，
`$this->load->helper(‘form’);`
我已经完成了一些 codeigniter 教程，但在这些教程中，所有字段和提交按钮都是使用表单 api 创建的。这就像是

```
echo form_input('first_name', set_value('first_name', 'First Name'));
echo form_input('last_name', set_value('last_name', 'Last Name'));
echo form_input('email_address', set_value('email_address', 'Email Address'));
echo form_submit('submit', 'Create Acccount'); 
```

但我的表单包含所有 html 字段。这是我的问题：

*   如何设置 html 表单输入字段值。
*   如何从链接按钮提交表单。
*   想做javascript验证提交表单。

    注意：我不想进行 ajax 调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T02:39:59.870

您可以将表单数据传递给具有索引以验证表单和另一个功能来检查数据库的控制器。

```
 <?php echo form_open('controllername'); ?>
     <label for="username">Username:</label>
     <input type="text" size="20" id="username" name="username"/>
     <br/>
     <label for="password">Password:</label>
     <input type="password" size="20" id="passowrd" name="password"/>
     <br/>
     <input type="submit" value="Login"/>
   </form> 
```

Check this [link](http://www.codefactorycr.com/login-with-codeigniter-php.html)

# ruby-on-rails - 复杂的查找条件以返回一条记录

> ID：14132153
> 
> 赞同：0
> 
> 时间：2013-01-03T02:07:50.023
> 
> 标签：ruby-on-rails

我正在查询我的预订模型以获取详细信息，包括 has_many 约会列表。

为此，我使用了一个范围：

```
scope :current_cart, 
Booking.includes(:appointments).where(:parent_id => 1).where(:complete =>nil).order("created_at DESC").limit(1) 
```

然后在视图中：

```
<%  @booking.appointments.each do |appointment| %>
  # info output
<% end %> 
```

为了让它工作，在控制器中，我必须这样做：

```
@booking = Booking.current_cart[0] 
```

这是我担心的 [0] 位。我想我正在使用一种想要返回集合的方法，这意味着我必须声明我想要第一个（唯一的）记录。如何声明更适合获取成员的类似范围？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T02:15:48.347

尝试将“.first”添加到示波器的末尾。范围只是常规的 AREL 查询，因此您可以像往常一样使用任何标准方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T02:26:25.883

将 .first 或 [0] 添加到范围会产生错误：

```
undefined method `default_scoped?' for 
```

谷歌搜索给出了这个：
[未定义的方法`default_scoped？在访问范围时](https://stackoverflow.com/questions/12365128/undefined-method-default-scoped-while-accessing-scope)

所以显然添加 .first 或 [0] 会阻止它被链接，所以它给出了一个错误。使用该答案，我做到了：

```
 scope :open_carts, 
   Booking.includes(:appointments).where(:parent_id => 1)
   .where(:complete =>nil).order("created_at DESC")

  def self.current_cart
   open_carts.first
  end 
```

有点乱，但我更喜欢我的模型乱七八糟，而且看起来并不荒谬。

# ruby-on-rails - 将 content_tag 与 HAML 一起使用

> ID：14132156
> 
> 赞同：3
> 
> 时间：2013-01-03T02:08:19.010
> 
> 标签：ruby-on-rails, haml, content-tag

我很难弄清楚如何`content_tag`使用 HAML。

如果没有 HAML，我会做这样的事情：

```
<%= content_tag "div", id: "instagrams", data: { instagrams: @instagrams } do %>
<% end %> 
```

我尝试了以下方法，但无济于事：

```
%div#instagrams{ instagrams: @instagrams }

%div{ id: "instagrams", data: { instagrams: @instagrams } } do

- haml_tag("div", id: "instagrams", data: { instagrams: @instagrams }) 
```

我试过谷歌，但仍然无法弄清楚。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T02:34:47.320

我想你想要的是这样的：

```
#instagrams{ data: { instagrams: @instagrams.to_json } } 
```

在 HAML 中，您不需要`%div`（这是标签的默认设置），因此您只需放置 id，您仍然需要定义`data:`数据属性而不仅仅是 HTML 属性。

此外，您应该`do`为任何不是 ruby​​ 代码执行的内容（如`haml_tag`或 rails helper like `form_for`）省略块部分。在 HAML 中，空白很重要，因此隐含了嵌套块结构。

您的示例的问题`haml_tag`可能是您使用`-`而不是`=`. 在 HAML 中，前者意味着执行不返回标记的 ruby​​，而后者应该返回标记。

# ruby - 通过操作行和列在 ruby 中重新格式化 csv

> ID：14132160
> 
> 赞同：0
> 
> 时间：2013-01-03T02:08:49.607
> 
> 标签：ruby, file, parsing, csv

我必须使用一个不能直接用于生成简单图表的 csv 文件。我需要将文件操作为“更干净”的东西并且遇到问题并且不确定我的整体策略是否正确，因为我只是在学习用 ruby​​ 解析文件......我这里的问题主要与我寻找从我找到或未找到匹配项的位置偏移的数据。在找到符合标准的行后，我需要从其后的 2 行中读取信息并对其进行操作（将某些内容从最后一列移到第二列）。

这是原始的 csv 文件：

```
component
quantity header,design1,design2,design3,Ref,Units
quantity type,#,#,#,ref#,unit value
component
quantity header,design1,design2,design3,Ref,Units
quantity type,#,#,#,ref#,unit value
component
quantity header,design1,design2,design3,Ref,Units
quantity type,#,#,#,ref#,unit value 
```

期望的输出：

```
Component Header,Quantity type Header,Units Header,design1 header,design2 header,design3 header,Ref header
component,quantity type,unit value,#,#,#,n/a
component,quantity type,unit value,#,#,#,n/a
component,quantity type,unit value,#,#,#,n/a
component,quantity type,unit value,#,#,#,n/a
component,quantity type,unit value,#,#,#,n/a 
```

我目前的红宝石脚本：

```
require 'csv'
f = File.new("sp.csv")
o = CSV.open('output.csv', 'w')

f.each_line do |l| #iterate through each line
    data = l.split
    if l !~ /,/ #if the line does not contain a comma it is a component
        o << [data,f.gets] #start writing data, f.gets skips next line but need to skip 2 and split the line to manipulate columns
    else
        o << ['comma'] #just me testing that I can find lines with commas
    end
end 
```

f.gets 跳过下一行，文档不清楚如何使用它来跳过 2。之后我认为我可以用逗号分隔该行并使用数组 [column] 操作行数据。除了这个抵消问题，我也不确定我的一般方法是否是一个好策略

**编辑**

这是真实文件中的一些行...。我将研究提供的答案，看看是否可以使所有工作正常进行。我的想法是逐行读取和写入，而不是将整个文件转换为数组然后读取和写入。我的想法是，当这些文件变大时，它们会占用更少的内存。

感谢您的帮助，我将解决答案并回复您。

```
DCB
Result Quantity,BL::BL,BL::BL_DCB-noHeat,DC1::DC1,DC2::DC2,noHS::noHS,20mmHS::20mmHS,Reference,Units
Avg Temperature,82.915,69.226,78.35,78.383,86.6,85.763,N/A,Celsius
RCB
Result Quantity,BL::BL,BL::BL_DCB-noHeat,DC1::DC1,DC2::DC2,noHS::noHS,20mmHS::20mmHS,Reference,Units
Avg Temperature,76.557,68.779,74.705,74.739,80.22,79.397,N/A,Celsius
Antenna
Result Quantity,BL::BL,BL::BL_DCB-noHeat,DC1::DC1,DC2::DC2,noHS::noHS,20mmHS::20mmHS,Reference,Units
Avg Temperature,69.988,65.045,69.203,69.238,73.567,72.777,N/A,Celsius
PCBA_fiberTray
Result Quantity,BL::BL,BL::BL_DCB-noHeat,DC1::DC1,DC2::DC2,noHS::noHS,20mmHS::20mmHS,Reference,Units
Avg Temperature,66.651,65.904,66.513,66.551,72.516,70.47,N/A,Celsius 
```

**编辑 2**

使用下面答案中的一些正则表达式，我开发了一种逐行策略来解析它。为了完整起见，我将其发布为答案。

感谢您提供帮助并让我了解开发解决方案的方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T02:30:44.017

如何将其切成 3 行组：

```
File.read("sp.csv").split("\n").each_slice(3) do |slice|
  o << [slice[0], *slice[2].split(',')]
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T04:56:49.967

我根据示例创建了一个名为“test.csv”的 CSV 文件。

从此代码开始：

```
data = File.readlines('test.csv').slice_before(/^component/) 
```

我得到了一个枚举器。如果我查看枚举器将返回的数据，我会得到：

```
pp data.to_a

[["component\n",
  "quantity header,design1,design2,design3,Ref,Units\n",
  "quantity type,#,#,#,ref#,unit value\n"],
["component\n",
  "quantity header,design1,design2,design3,Ref,Units\n",
  "quantity type,#,#,#,ref#,unit value\n"],
["component\n",
  "quantity header,design1,design2,design3,Ref,Units\n",
  "quantity type,#,#,#,ref#,unit value\n"]] 
```

那是一个数组数组，在“组件”行上分成子数组。我怀疑这些值并没有反映现实，但没有更准确的样本......好吧，[GIGO](http://en.wikipedia.org/wiki/GIGO)。

如果“组件”行实际上不是一堆重复的“组件”行，并且没有任何逗号，则可以改用它：

```
data = File.readlines('test.csv').slice_before(/\A[^,]+\Z/) 
```

或者：

```
data = File.readlines('test.csv').slice_before(/^[^,]+$/) 
```

结果将与当前样本相同。

如果您需要更复杂的正则表达式，您可以替换它，例如：

```
/^(?:#{ Regexp.union(%w[component1 component2]).source })$/i 
```

它返回一个模式，该模式将在`%w[]`数组中找到任何单词：

```
/^(?:component1|component2)$/i 
```

从那里我们可以遍历`data`数组并使用以下方法清除所有无关的标头：

```
data.map{ |a| a[2..-1] }.flatten 
```

它返回如下内容：

```
[
  "quantity type,#,#,#,ref#,unit value\n",
  "quantity type,#,#,#,ref#,unit value\n",
  "quantity type,#,#,#,ref#,unit value\n"
] 
```

如果需要，可以对其进行迭代并传递给 CSV 以解析为数组：

```
data.map{ |a| a[2..-1].map{ |r| CSV.parse(r) }.flatten }

[
  ["quantity type", "#", "#", "#", "ref#", "unit value"],
  ["quantity type", "#", "#", "#", "ref#", "unit value"],
  ["quantity type", "#", "#", "#", "ref#", "unit value"]
] 
```

这就是让您思考如何拆分 CSV 数据的所有背景知识。

使用此代码：

```
data.flat_map { |ary|
  component = ary[0].strip
  ary[2..-1].map{ |a|
    data = CSV.parse(a).flatten
    [
      component,
      data.shift,
      data.pop,
      *data[0..-2]
    ]
  }
} 
```

回报：

```
[
  ["component", "quantity type", "unit value", "#", "#", "#"],
  ["component", "quantity type", "unit value", "#", "#", "#"],
  ["component", "quantity type", "unit value", "#", "#", "#"]
] 
```

剩下要做的就是创建您要使用的标头，并将返回的数据传回 CSV 以使其生成输出文件。您应该可以使用 CSV 文档从这里到达那里。

* * *

编辑：

根据实际数据，这是一个稍作调整的代码版本及其输出：

```
require 'csv'
require 'pp'

data = File.readlines('test.csv').slice_before(/^[^,]+$/)

pp data.flat_map { |ary|
  component = ary[0].strip
  ary[2..-1].map{ |a|
    record = CSV.parse(a).flatten
    [
      component,
      record.shift,
      record.pop,
      *record[0..-2]
    ]
  }
} 
```

看起来像：

```
[["DCB",
  "Avg Temperature",
  "Celsius",
  "82.915",
  "69.226",
  "78.35",
  "78.383",
  "86.6",
  "85.763"],
["RCB",
  "Avg Temperature",
  "Celsius",
  "76.557",
  "68.779",
  "74.705",
  "74.739",
  "80.22",
  "79.397"],
["Antenna",
  "Avg Temperature",
  "Celsius",
  "69.988",
  "65.045",
  "69.203",
  "69.238",
  "73.567",
  "72.777"],
["PCBA_fiberTray",
  "Avg Temperature",
  "Celsius",
  "66.651",
  "65.904",
  "66.513",
  "66.551",
  "72.516",
  "70.47"]] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T00:25:15.493

我正在使用的代码创建包含所有操作的 csv 文件......感谢那些提供一些帮助的人。

```
require 'csv'

file_in = File.new('sp1.csv')
file_out = CSV.open('output.csv', 'w')

header = []
row = []

file_in.each_line do |line|

  case line
  when /^[^,]+$/ #Find a component (line with no comma)
    comp_header = file_in.gets.split(',') #header is after component and is split into an arry

    if header.empty? #header
      header.push("Component", comp_header[0], comp_header[-1].strip)
      comp_header[1..-3].each do |h|
        header.push(h)
      end
      file_out << header 

    end
    @comp = line.to_s.strip
    next
  when /,/ #when a row had commas
    puts @comp
    vals = line.split(',') #split up into vals array
    row.push(@comp, vals[0], vals[-1].strip) #add quantity and unit to row array
    vals[1..-3].each do |v| #for values (excluding quanity, units, reference info)
      row.push(v) #add values to row array
    end

  end
    file_out << row #write the current row to csv file
    row = [] #reset the row array to move on to the next component set

end 
```

# c# - ajaxfile在页面上上传多个输入

> ID：14132165
> 
> 赞同：3
> 
> 时间：2013-01-03T02:09:51.560
> 
> 标签：c#, ajaxcontroltoolkit

我正在使用此处描述的 ajaxFileUpload：[http ://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/AjaxFileUpload/AjaxFileUpload.aspx](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/AjaxFileUpload/AjaxFileUpload.aspx)

它工作正常，除非我在同一页面上有多个文件上传控件。具体来说，我正在尝试为不同的问题上传不同的文件。当我在页面上上传第一个时，它工作正常，但页面下方的那个只会将它的文件上传到第一个问题的答案中。

我不确定这是否有意义......所以它可以帮助您知道我的页面是使用 ascx 文件动态填充的问题。文档 ascx 文件如下所示：

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="Document.ascx.cs" Inherits="ScholarshipApplication.controls.questions.Document" %>

<ajaxToolkit:AjaxFileUpload OnUploadComplete="UploadComplete"  ID="FileUploadControl" MaximumNumberOfFiles="1" runat="server" AllowedFileTypes="png,jpg,jpeg,pdf,tiff,tif,gif" />
<asp:LinkButton ID="downloadButton" runat="server" CausesValidation="false" OnClick="downloadButton_Click" /> 
```

以及背后的代码：

```
public void UploadComplete(object sender, AjaxFileUploadEventArgs e)
        {
            entry.data = e.FileName;
            entry.setDocumentData(e.GetContents());

            this.downloadButton.Text = e.FileName;
        } 
```

我最初的想法是，我需要以某种方式帮助控件生成的 javascript 知道它应该在什么时候触发哪个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T22:10:20.507

I believe this is a bug in control or this was implemented by some non-obvious reason. Actually, this control doesn't support multiple instances on a page. Consider to use [AsyncFileUpload control](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/AsyncFileUpload/AsyncFileUpload.aspx) instead or customize a bit sources of the `AjaxFileUpload` control. If you prefer second option then you need to download sources from here: [http://ajaxcontroltoolkit.codeplex.com/SourceControl/BrowseLatest](http://ajaxcontroltoolkit.codeplex.com/SourceControl/BrowseLatest) and change AjaxFileUpload.cs file (here is a path: `/Server/AjaxControlToolkit/AjaxFileUpload/AjaxFileUpload.cs`). What you need to do is to change `ContextKey` constant to property for combining context key guid with unique id of control:

```
public class AjaxFileUpload : ScriptControlBase
{
    private const string ContextKeySuffix = "{DA8BEDC8-B952-4d5d-8CC2-59FE922E2923}";

    private string ContextKey
    {
        get { return this.UniqueID + "_" + ContextKeySuffix; }
    } 
```

Actually, if you'll look on `PreRender` method of `AjaxFileUpload` class you'll easy realize reson for such behavior of this control (the first control handle uploads from all sibling controls on a page).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T05:12:51.793

根据我的理解，您需要一个隐藏字段变量来识别您在 UserControl 中的问题 ID：

```
<input type="hidden" id="hdnQuestionId" runat="server"/> 
```

在填充/生成问题时，您需要设置此变量，当您上传文档时，获取此隐藏值并使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-30T21:23:46.843

I created a data attribute named "data-upload-type" on ALL AjaxFileUpload controls and set it to the name of the type. Then I set up the client call to grab that value and set a cookie with the same value. The cookie IS received on the server side functions and I branch based on the value I receive.

Here is an example:

 `````
function StartUpload(sender, args) {
    var t = $(sender._element).attr('data-upload-type');
    document.cookie = 'upload-type=' + $(sender._element).attr('data-upload-type') + ';';
}

<asp:AjaxFileUpload ID="afuUploader1" runat="server"  OnClientUploadStart="StartUpload" OnUploadComplete="UploadComplete" OnClientUploadComplete="UploadComplete" data-upload-type="UploadType2"></asp:AjaxFileUpload> 
````  `Then in your server side upload call simply check Response.Cookies("upload-type"). Works like a charm!``

# ios - 我们可以将普通的 imageView 用于 facebook 照片吗？

> ID：14132167
> 
> 赞同：-2
> 
> 时间：2013-01-03T02:09:55.717
> 
> 标签：ios, facebook, facebook-graph-api

该[教程](http://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/personalize/)说我应该使用：FBProfilePictureView

好吧，假设我想使用常规的 imageView，然后下载图像 URL。我将如何获得该 imageURL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T02:41:23.517

以下代码直接取自`FBProfilePictureView`实现。我只保留了允许您下载个人资料图片并将其存储在普通文件中的基本内容`UIImageView`。

```
#import "FBURLConnection.h"
#import "FBRequest.h"

//...

UIImageView * imageView = nil;
NSString * profileID = @"123456"; // the profile ID of the user you need to retrieve the image of;
FBURLConnectionHandler handler = ^(FBURLConnection *connection, NSError *error, NSURLResponse *response, NSData *data) {
     if (!error) {
         imageView.image = [UIImage imageWithData:data];
     }
};

NSString *template = @"%@/%@/picture";     
NSString *urlString = [NSString stringWithFormat:template, 
                           FBGraphBasePath,
                           profileID];
NSURL *url = [NSURL URLWithString:urlString];

[[FBURLConnection alloc] initWithURL:url
                   completionHandler:handler]; 
```

我仍然认为`FBProfilePictureView`比使用普通的`UIImageView`. 你为什么不想使用它？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T02:13:24.133

我假设您想获取用户的个人资料图片。

您可以从 Facebook OpenGraph 用户 API 调用获取 URL：[https ://developers.facebook.com/docs/reference/api/user/](https://developers.facebook.com/docs/reference/api/user/)

看`picture`属性。

# jquery - 未捕获的类型错误：对象 [对象对象] 没有方法“Jcrop”

> ID：14132170
> 
> 赞同：0
> 
> 时间：2013-01-03T02:11:21.913
> 
> 标签：jquery, ruby-on-rails-3, jcrop

一切似乎都已加载（jquery、jcrop 和我的 avatar.js 文件）。我似乎无法弄清楚发生了什么。我的脚本按以下顺序加载：

```
<script src="/assets/jquery.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery.Jcrop.js?body=1" type="text/javascript"></script>
<script src="/assets/gmaps4rails/gmaps4rails.base.js?body=1" type="text/javascript"></script>
<script src="/assets/gmaps4rails/gmaps4rails.googlemaps.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery-fileupload/vendor/jquery.ui.widget.js?body=1" type="text/javascript">         </script>
<script src="/assets/jquery-fileupload/jquery.iframe-transport.js?body=1" type="text/javascript">    </script>
<script src="/assets/jquery-fileupload/jquery.fileupload.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery-fileupload/basic.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery-fileupload/vendor/tmpl.js?body=1" type="text/javascript"></script>
<script src="/assets/avatars.js?body=1" type="text/javascript"></script> 
```

avatars.js.coffee 包含以下内容：

```
jQuery ->
  new AvatarCropper()

class AvatarCropper
  constructor: ->
    $('#cropbox').Jcrop
      aspectRatio: 1
      setSelect: [0, 0, 600, 600]
      onSelect: @update
      onChange: @update

  update: (coords) =>
      $('#avatar_crop_x').val(coords.x)
      $('#avatar_crop_y').val(coords.y)
      $('#avatar_crop_w').val(coords.w)
      $('#avatar_crop_h').val(coords.h)
      @updatePreview(coords)

    updatePreview: (coords) =>
      $('#preview').css
        width: Math.round(100/coords.w * $('#cropbox').width()) + 'px'
        height: Math.round(100/coords.h * $('#cropbox').height()) + 'px'  
        marginLeft: '-' + Math.round(100/coords.w * coords.x) + 'px'
        marginTop: '-' + Math.round(100/coords.h * coords.y) + 'px' 
```

在 javascript 控制台中，我得到：

```
Uncaught TypeError: Object [object Object] has no method 'Jcrop' 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T19:15:16.017

问题是 jQuery.noConflict(); 调用另一个脚本...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T13:47:15.747

我面临同样的问题。当我将 jquery 文件放在 jcrop.js 之前时，我的问题得到了解决。

# junit - 如何使用 Maven surefire 排除具有给定类别的所有 JUnit4 测试？

> ID：14132174
> 
> 赞同：19
> 
> 时间：2013-01-03T02:12:06.853
> 
> 标签：junit, maven-2, junit4, maven-surefire-plugin

我打算用 @Category 注释来注释我的一些 JUnit4 测试。然后，我想从在我的 Maven 构建上运行的那类测试中排除。

我从[Maven 文档](http://maven.apache.org/surefire/maven-surefire-plugin/examples/junit.html#Using_JUnit_Categories)中看到，可以指定**要**运行的测试类别。我想知道如何指定**不**运行的测试类别。

谢谢！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-03T04:22:12.507

您可以按如下方式执行此操作：

您的 pom.xml 应包含以下设置。

```
<configuration>
   <excludes>
       <exclude>**/TestCircle.java</exclude>
        <exclude>**/TestSquare.java</exclude>
   </excludes>
</configuration> 
```

如果你想要正则表达式支持，只需使用

```
<excludes>
    <exclude>%regex[.*[Cat|Dog].*Test.*]</exclude>
</excludes> 
```

[http://maven.apache.org/surefire/maven-surefire-plugin/examples/inclusion-exclusion.html](http://maven.apache.org/surefire/maven-surefire-plugin/examples/inclusion-exclusion.html)

如果要使用 Category 注解，则需要执行以下操作：

```
@Category(com.myproject.annotations.Exclude)
@Test
public testFoo() {
   ....
} 
```

在你的 Maven 配置中，你可以有这样的东西

```
<configuration>
  <excludedGroups>com.myproject.annotations.Exclude</excludedGroups>
</configuration> 
```

# regex - pig - 用正则表达式解析字符串

> ID：14132175
> 
> 赞同：3
> 
> 时间：2013-01-03T02:12:36.310
> 
> 标签：regex, apache-pig

我被困在 Pig 中的字符串解析上。

我查看了周围的文档`regex_extract`，`regex_extract_all`并希望使用其中一个功能。

我有文件`'/logs/test.log'`：

```
cat '/logs/test.log'
user=242562&friend=6226&friend=93856&age=35&friend=35900 
```

我想`friend`从 url 中提取标签，在这种情况下，我有 3 个相同的标签。`regex_extract`似乎只适用于第一个实例，这是我所期望的，而且对于`regex_extract_all`，似乎我已经知道整个字符串模式，它在源文件的每一行上都会发生变化。

看起来不错`regex_extract`，但这个选项只给了我第一个。

```
 [root@test]# pig -x local
 A = LOAD './test.log';
 B = FOREACH A GENERATE REGEX_EXTRACT($0, 'friend=([0-9]*)',1);
 dump B;
 (6226) 
```

我看到的示例`regex_extract_all`显示正则表达式，您可以在其中查找所有标签：

```
 B = FOREACH A GENERATE FLATTEN(REGEX_EXTRACT_ALL($0, 'user=([0-9]+?)&friend=([0-9]+?)&friend=([0-9]+?)&.+?'));
 dump B;
 (242562,6226,93856) 
```

这似乎可行，但我真的只想提取朋友 - (6226,93856,35900)。我也有每个用户可能有超过或少于 3 个朋友的情况。

有任何想法吗？

还考虑使用类似的东西`FLATTEN(TOKENIZE($0,'&'))`，然后以某种方式只过滤`SUBSTRING($0,0,INDEXOF($0,'=')) == 'friend'`或类似的东西，但想看看是否有人知道一个好的正则表达式方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-28T00:36:49.383

这可以通过简单的字符串操作来实现：

```
inputs = LOAD 'input' AS (line: chararray);
tokenized = FOREACH inputs GENERATE FLATTEN(TOKENIZE(line, '&')) AS parameter;
filtered = FILTER tokenized BY INDEXOF(parameter, 'friend=') != -1;
result = FOREACH filtered GENERATE SUBSTRING(parameter, 7, (int)SIZE(parameter)) AS   friend_number;
DESCRIBE tokenized;
DUMP tokenized;
DESCRIBE filtered;
DUMP filtered;
DESCRIBE result;
DUMP result; 
```

结果：

```
tokenized: {parameter: chararray}
(user=242562)
(friend=6226)
(friend=93856)
(age=35)
(friend=35900)
filtered: {parameter: chararray}
(friend=6226)
(friend=93856)
(friend=35900)
result: {friend_number: chararray}
(6226)
(93856)
(35900) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-04T15:15:57.227

尝试这个：

```
a = LOAD '/logs/test.log' USING PigStorage('&') as (f1, f2, f3, f4, f5);
b = FOREACH a GENERATE REGEX_EXTRACT(f2,'friend=([0-9]*)', 1), 
                       REGEX_EXTRACT(f3,'friend=([0-9]*)', 1),
                       REGEX_EXTRACT(f5,'friend=([0-9]*)', 1);
DUMP b; 
```

# apache - 在具有现有 Apache 服务器的服务器上安装 uberSVN

> ID：14132176
> 
> 赞同：0
> 
> 时间：2013-01-03T02:12:43.163
> 
> 标签：apache, svn, ubersvn

我正在使用现有 Apache 安装的 Ubuntu 服务器上安装 uberSVN。与其在不同的端口上使用 uberSVN 的内置 Apache 服务器来访问 SVN 存储库，不如在当前运行的存储库上使用虚拟主机。

有什么方法可以实现这一目标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T13:04:40.547

由于 uberSVN 旨在能够“开箱即用”运行，即使您已经安装了另一个实例，它也会使用它自己的 Apache 实例。这不是可配置的（至少不能从 UI 配置），并且不建议更改，因为如果有不同的用途或端口冲突，它可能会导致问题。使用 uberSVN 的实例是否存在问题的具体原因？

# shell - 如何为管道中的每个元素运行脚本？

> ID：14132179
> 
> 赞同：1
> 
> 时间：2013-01-03T02:13:40.620
> 
> 标签：shell, powershell

```
Get-ChildItem -recurse | Where {!$_.PSIsContainer -and `
$_.LastWriteTime -lt (get-date).AddDays(-31)} | Remove-Item -whatif

Get-ChildItem -recurse | Where {$_.PSIsContainer -and `
@(Get-ChildItem -Lit $_.Fullname -r | Where {!$_.PSIsContainer}).Length -eq 0} |
Remove-Item -recurse -whatif 
```

上面的脚本可以正常工作，现在我想把它和下面的脚本合并成一个脚本：

```
$path = "<path to file>"
$shell = new-object -comobject "Shell.Application"
$item = $shell.Namespace(0).ParseName("$path")
$item.InvokeVerb("delete") 
```

这是我的组合脚本：

```
Get-ChildItem -recurse | Where {$_.PSIsContainer -and `
@(Get-ChildItem -Lit $_.Fullname -r | Where {!$_.PSIsContainer}).Length -eq 0} |
$path = $_.Fullname
$shell = new-object -comobject "Shell.Application"
$item = $shell.Namespace(0).ParseName("$path")
$item.InvokeVerb("delete") -recurse -whatif 
```

但是，我总是收到错误消息：

```
Expressions are only allowed as the first element of a pipeline.
At line:3 char:7

You must provide a value expression on the right-hand side of the '-' operator.
At line:6 char:28

Unexpected token 'recurse' in expression or statement.
At line:6 char:29

Unexpected token '-whatif' in expression or statement.
At line:6 char:37 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T02:30:50.630

您需要`Foreach-Object`在管道的最后一部分使用 cmdlet（别名为 foreach）。此外，您不想每次都在管道中创建 Shell.Application 对象：

```
$shell = new-object -comobject "Shell.Application"
Get-ChildItem -recurse | 
    Where {$_.PSIsContainer -and `
           @(Get-ChildItem -Lit $_.Fullname -r | Where {!$_.PSIsContainer}).Length -eq 0} |
    Foreach {
        $item = $shell.Namespace(0).ParseName(($_.Fullname))
        $item.InvokeVerb("delete")
    } 
```

也就是说，我不确定您为什么不使用`Remove-Item`cmdlet，例如：

```
Get-ChildItem . -r | Where {$_.PSIsContainer -and !$(Get-ChildItem $_.fullname)} | 
    Remove-Item -WhatIf 
```

要使其成为脚本，只需将上述命令放入 .ps1 文件中，如下所示：

```
-- Contents of DeleteEmptyDirs.ps1 --
param([string]$path, [switch]$whatif)

Get-ChildItem $path -r | Where {$_.PSIsContainer -and !$(Get-ChildItem $_.fullname)} | 
    Remove-Item -WhatIf:$whatif 
```

然后像这样调用：

```
PS> .\DeleteEmptyDirs c:\temp -WhatIf 
PS> .\DeleteEmptyDirs c:\temp 
```

# regex - 修改文件中匹配 WORD1 和 NOT WORD2 的行 (Sed/Awk)

> ID：14132185
> 
> 赞同：3
> 
> 时间：2013-01-03T02:14:48.567
> 
> 标签：regex, sed, awk

我需要将内核参数添加到尚未包含它们的行中。（不想将它添加到所有行，以防它已经存在。）

我已经构建了这个`awk`命令来在缓冲区中执行它，但是由于 awk 缺乏像`sed`. （但是我不知道如何用 . 进行这种类型的匹配`sed`。）

`awk '/\tkernel/&&!/audit=1/ { print $0" audit=1"; }' /etc/grub.conf`

这会查找匹配“kernel”而**不是**“audit=1”的行（根据需要附加“audit=1”。）

标记为 sed/awk，但对其他建议持开放态度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T02:22:28.983

使用 sed：

```
sed -i '/kernel/{/audit=1/!s/$/ audit=1/}' /etc/grub.conf 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T02:40:18.307

的就地编辑功能`sed`使用没有后缀的临时文件来替换现有文件。例如，这个：

```
sed -i '/\tkernel/ { /audit=1/!s/$/ audit=1/ }' /etc/grub.conf 
```

与此相同：

```
sed '/\tkernel/ { /audit=1/!s/$/ audit=1/ }' /etc/grub.conf > tmp && mv tmp /etc/grub.conf 
```

旗帜只是为这个`-i`过程涂上了糖衣。因此，您可以简单地将相同的逻辑应用于您的`awk`命令：

```
awk '/\tkernel/ && !/audit=1/ { print $0, "audit=1"; next }1' /etc/grub.conf > tmp && mv tmp /etc/grub.conf 
```

# jquery-mobile - jQuery Mobile 可折叠列表视图向上展开

> ID：14132193
> 
> 赞同：2
> 
> 时间：2013-01-03T02:16:01.340
> 
> 标签：jquery-mobile

我试图让 jQuery Mobile 可折叠列表视图向上展开，而不是默认的向下方向。我拥有的列表视图代码是：

```
<div data-role="collapsible" data-mini="true" data-theme="a" data-inset="false" id="mpage1">
<h1>Menu</h1>
    <ul data-role="listview" id="lvpage1">
    <li data-icon="false"><a href="#page2">Page2</a></li>
    <li data-icon="false"><a href="#page3">Page3</a></li>
    <li data-icon="false"><a href="#page4">Page4</a></li>
</ul>
</div> 
```

单击菜单 h1 标记时，列表视图会向下扩展。我想要做的是让菜单展开菜单 h1 标记的顶部，因此菜单 h1 标记然后出现在列表视图的底部，上面的所有 li 项目。

我猜它与将 slideUp 效果（通常隐藏一个 div）绑定到展开事件有关，但无法弄清楚！

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T02:27:34.167

尝试在可折叠元素之前移动可折叠内容

这行得通吗？

*   [http://jsfiddle.net/SnRx8/](http://jsfiddle.net/SnRx8/)

JS：

```
$('.ui-collapsible-content').insertBefore('#mpage1'); 
```

HTML

```
<div data-role="page" class="type-home">
    <div data-role="content">

<div data-role="collapsible" data-mini="true" data-theme="a" data-inset="false" id="mpage1">
<h1>Menu</h1>
    <ul data-role="listview" id="lvpage1">
    <li data-icon="false"><a href="#page2">Page2</a></li>
    <li data-icon="false"><a href="#page3">Page3</a></li>
    <li data-icon="false"><a href="#page4">Page4</a></li>
</ul>
</div></div>
</div>
​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-12T23:36:56.623

对于我正在研究的一个项目，解决方案是设置底部位置。如果您设置绝对位置并定义底部距离，则这些部分将向上打开。

例如[http://jsfiddle.net/ea4duyfa/](http://jsfiddle.net/ea4duyfa/)

```
#test-set{
position: absolute;
top: 100px;}

<div data-role="collapsibleset" data-theme="a" data-content-theme="a" id="test-set">
<div data-role="collapsible">
    <h3>Section 1</h3>
<p>I'm the collapsible content for section 1</p>
</div>
<div data-role="collapsible">
    <h3>Section 2</h3>
<p>I'm the collapsible content for section 2</p>
</div>
<div data-role="collapsible">
    <h3>Section 3</h3>
<p>I'm the collapsible content for section 3</p>
</div> 
```

# amazon-web-services - 将下载的 NSImage 添加到 NSArrayController - AWS iOS 异步 S3 S3GetObjectRequest

> ID：14132194
> 
> 赞同：0
> 
> 时间：2013-01-03T02:16:18.293
> 
> 标签：amazon-web-services, amazon-s3, nsarraycontroller

我有一个包含三列“缩略图”、“文件名”和“日期修改”的 NSTableview。文件名列和修改日期列由 S3ListObjectResponse 的输出填充。而“缩略图”列图像是从机器的本地目录加载的。如果文件丢失，我会从 S3 云下载。问题是如何将数据插入到 NSArrayController 如果文件丢失并且我留下了一个空单元格作为缩略图？这是我现在的工作：

```
- (IBAction)checkCloud:(id)sender {
AmazonS3Client *s3 = [AmazonClientManager s3];

S3ListObjectsRequest* listObjectsRequest = [[S3ListObjectsRequest alloc] initWithName:@"hello-testing"];

NSRange range = NSMakeRange(0, [[_fileListAC arrangedObjects] count]);
[_fileListAC removeObjectsAtArrangedObjectIndexes:[NSIndexSet indexSetWithIndexesInRange:range]];

@try {

    S3ListObjectsResponse* response = [s3 listObjects:listObjectsRequest];

    NSMutableArray* objectSummaries = response.listObjectsResult.objectSummaries;

    //looping through the objSummary and add into the NSArrayController
    for ( S3ObjectSummary* objSummary in objectSummaries ) {

        NSImage *thumbnail = [[NSImage alloc] init ];

        NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];

        [dateFormatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'"];

        NSDate *s3date = [dateFormatter dateFromString:[objSummary lastModified]];

        NSArray *fileName =  [[objSummary key] componentsSeparatedByString:@"/"];
        if([[fileName objectAtIndex:0] localizedCaseInsensitiveCompare:@"Range"] == NSOrderedSame) {
            NSLog(@"file name %@ ",[fileName objectAtIndex:1]);

           // Check for files in side the bucket's folders 
           if([[fileName objectAtIndex:1] length]){

                NSString *thumbnailFile = [[fileName objectAtIndex:1] stringByAppendingString:@"_thumb.png"];

                BOOL isDir;

                NSFileManager *fileManager = [NSFileManager defaultManager];

                NSString *filePathPart1 = [@"/Users/" stringByAppendingString:[[NSHost currentHost] localizedName]];

                NSString *filePath = [[[[ filePathPart1 stringByAppendingString:@"/Documents/Test/" ] stringByAppendingString:@"Range" ] stringByAppendingString:@"/Thumbnail/"] stringByAppendingString:thumbnailFile];

               // If file exists then add into the thumbnail column
               if([fileManager fileExistsAtPath:filePath isDirectory:&isDir]){

                    thumbnail = [[NSImage alloc] initWithContentsOfFile:filePath];

                }else{

                     NSLog(@"file %@ not found",thumbnailFile);

                    //Downloading from the S3 Cloud Asynchronously

                    doneDownload = NO;
                    AmazonS3Client *s3 = [AmazonClientManager s3];
                    S3GetObjectRequest *gor = nil;
                    @try {

                        gor = [[S3GetObjectRequest alloc] initWithKey:[[@"Range/Thumbnail/"  stringByAppendingString:[fileName objectAtIndex:1]] stringByAppendingString: @"_thumb"] withBucket:@"thumbnail-pic" ];
                        gor.delegate = self;
                        [s3 getObject:gor];
                    }
                    @catch (AmazonClientException *exception) {
                        doneDownload = YES;
                    }

                    do {
                        [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:[NSDate distantFuture]];
                    } while (!doneDownload);
                    gor.delegate = nil;

                }

            }else{
                //If its the actual bucket folder and not file then load a default image 
                thumbnail = [NSImage imageNamed:@"Range.png"];
            }

        }

           [_fileListAC addObject:[NSMutableDictionary  dictionaryWithObjectsAndKeys:thumbnail,@"thumbnail", [objSummary key],@"Files",s3Date,@"Date Modified", nil]];

    }
}
@catch (NSException *exception) {
    NSLog(@"Cannot list S3 %@",exception);
}

//Display the table on loading the NSArrayController
[_cloudFileList makeKeyAndOrderFront:nil]; 

} 
```

我检查了委托方法

```
 -(void)request:(AmazonServiceRequest *)request didCompleteWithResponse:(AmazonServiceResponse *)response{
NSData *imageData = [response body];
_coreDataImageView.image = [[NSImage alloc] initWithData:imageData];
doneDownload = YES;
} 
```

coredataimageview 是一个测试图像。图像已下载，但我想将其添加回阵列控制器。问题是，如果本地目录中缺少 3 个文件，并且我无法将该文件名和日期修改值插入到数组控制器中，该怎么办。对此有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T17:21:14.357

如果您实现了一个委托对象（而不是使用 self），您可以将这些对象存储在一个数组中并稍后引用它们。委托对象可以跟踪您感兴趣的其他元数据，并可用于构建您的表格视图。

# java - JPA 中乐观锁定的表索引/pk

> ID：14132197
> 
> 赞同：4
> 
> 时间：2013-01-03T02:16:57.803
> 
> 标签：java, database, jpa, versioning, optimistic-locking

为支持乐观锁定的实体定义表索引的最佳实践是什么？

当然，实体 id 必须是数据库中某些索引的一部分，才能通过 id 进行快速查找。版本列呢？将其作为索引的一部分有意义吗？

如果我们不定义数据库主键，而是创建一个由实体 id + 版本列组成的索引怎么办？在数据库中有两行具有相同实体 ID 的风险？假设两个事务并行保留具有相同实体 ID 的两个实体？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T02:54:58.690

假设您有一个使用版本列定义的实体，如下所示：

```
@Entity
public class MyEntity implements Serializable {    

    @Id
    @GeneratedValue
    private Long id;

    private String name;

    @Version
    private Long version;

    //...
} 
```

更新时，带有注释的字段`@Version`将递增并添加到 WHERE 子句中，例如：

```
UPDATE MYENTITY SET ..., VERSION = VERSION + 1 WHERE ((ID = ?) AND (VERSION = ?)) 
```

如您所见，`WHERE`子句中使用了版本列，但 ID 列也是如此（它已经有索引，因为它是主键），所以**我认为添加VERSION 列的索引**。

# database - 最终一致的分布式数据库与幂等增加运算符？

> ID：14132199
> 
> 赞同：5
> 
> 时间：2013-01-03T02:17:29.690
> 
> 标签：database, nosql, cassandra, high-availability, eventual-consistency

是否存在支持对标量值进行幂等操作的分布式高可用性、最终一致的数据库？

如果我们使用正常更新，那么我们有可能在不同的节点上有 2 个不同的值，并且没有一个值是正确的，因为我们需要增加两个交易值的金额。

是否有一个分布式数据库，我可以在其中发送命令 increase(key, attribute[column], diff) 以便当我收到响应时，我可以确定无论帐户的当前值如何，该操作都会在其他副本上执行? 这样，即使 2 个不同的节点增加了不同的值，我也会对增加操作具有最终一致性，因为这种增加会传播到其他副本。

我不是在谈论条件更新，因为它不适用于像 cassandra 这样的高可用性数据库（这就是他们没有该功能的原因），我对原子增加操作感兴趣。

谢谢。

PS在幂等增加的情况下，我将有一个命令增加（key，attribute，diff，lock_key），这样如果db已经收到具有相同lock_key的相同命令，它就不会增加

**tl;博士：**

有没有办法在分布式 AP 类数据库中进行精确计数器？2 个问题： 1）如果我发送操作以增加计数器但我没有得到响应，我会再次发送该请求但不想增加计数器两次。2）如果该计数器在另一个副本上同时更新，我想最终结合这个增加，而不是覆盖这些值。那么是否有像 increase("John's balance", +5.67, "sdfsdfas") 这样的命令，其中 sdfsdfas 是一个用于丢弃重复更新的字符串。有没有复制这种命令的数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T02:24:38.573

在我看来，您在谈论两件不同的事情。幂等性意味着您可以发送多次`increase`指令，但计数器只会增加一次。原子性对单个操作没有意义（它对多个操作有意义，例如，以原子方式增加计数器和增加的日期；要么都被修改，要么都不修改）。

MongoDB 支持“文档”级别的原子操作（我不确定您是否需要），但显然增量运算符不是幂等的（根据定义！否则您将如何增加计数器？）。

你能澄清你的问题吗？

此外，您不能拥有一个“最终一致”的数据库，其中所有节点每次都具有相同的给定键值。这就是它“最终一致”的原因，因为它不能保证它们“现在”是相同的。

至于答案，如果您想使用 MongoDB 来维护增量运算符，请使用以下模式（来自他们的网站，示例`[$inc operator][1]`）：

```
db.collection.update( { age: 20 }, { $inc: { age: 1 } } );
db.collection.update( { name: "John" }, { $inc: { age: 1 } } ); 
```

在你的情况下，这将是`db.collection.update({$inc:{mycounter:1}});`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T05:05:32.457

好的，我看到问题 2 已经在 cassandra 中解决了[https://issues.apache.org/jira/browse/CASSANDRA-1072](https://issues.apache.org/jira/browse/CASSANDRA-1072) 分布式计数器将结合增加操作，因此最后一切都会保持一致。

问题 1（幂等性）是一个未解决的问题：[https ://issues.apache.org/jira/browse/CASSANDRA-4775](https://issues.apache.org/jira/browse/CASSANDRA-4775)

至少我知道人们会考虑这一点，这对我的场景非常重要，所以我会尽力帮助解决这个问题。

我希望这有助于澄清我的问题。

# ruby-on-rails - 如何使用环境变量设置 AWS 变量

> ID：14132204
> 
> 赞同：0
> 
> 时间：2013-01-03T02:19:57.390
> 
> 标签：ruby-on-rails, amazon-web-services, amazon-s3

我遵循本教程[http://pjambet.github.com/blog/direct-upload-to-s3/](http://pjambet.github.com/blog/direct-upload-to-s3/)。几乎停留在设置 AWS 变量中。tut 说我必须将变量设置如下

```
export S3_BUCKET=<YOUR BUCKET>
export AWS_ACCESS_KEY_ID=<YOUR KEY>
export AWS_SECRET_KEY_ID=<YOUR SECRET KEY> 
```

但它没有提到在哪里设置变量。谁能指出我？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T02:48:27.733

只需在命令行中键入即可。[导出命令。](http://bash.cyberciti.biz/guide/Export_Variables)

# variables - 如何解决引导 xml 中的刻录变量

> ID：14132205
> 
> 赞同：2
> 
> 时间：2013-01-03T02:20:15.323
> 
> 标签：variables, bootstrapper, burn

我创建引导项目的目标之一是设置默认日志位置。我希望该位置基于本地应用程序数据文件夹。我不知道如何引用内置的 Burn 变量 LocalAppDataFolder。我找到了有关如何在代码中引用这些变量的信息，但在 xml 中没有。

对属性的引用如下所示：

```
 <MsiPackage SourceFile="MyInstaller.msi"  LogPathVariable="[LogLocation]" /> 
```

属性设置如下：

```
<Variable Name="LogLocation" Value="[LocalAppDataFolder]MyLogFolder\Setup" Type="string"/> 
```

日志输出显示：

> 将字符串变量“LogLocation”初始化为值“[LocalAppDataFolder]MyLogFolder\Setup”

我缺少什么来解决 [LocalAppDataFolder] ？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-30T17:15:20.510

日志输出显示未格式化的值是正常的，因此该部分看起来是正确的。我认为您缺少的是 LogPathVariable 应该在不带括号的情况下指定。

```
<MsiPackage SourceFile="MyInstaller.msi"  LogPathVariable="LogLocation" /> 
```

# windows-store - 用于访问 Windows 应用商店的 API

> ID：14132207
> 
> 赞同：4
> 
> 时间：2013-01-03T02:20:46.470
> 
> 标签：windows-store

Windows 商店有 API 吗？

例如，当您打开“商店”应用程序时，会出现一个“热门免费”列表，其中将显示前 100 个最受欢迎的免费应用程序。该列表是否来自 Internet 上某处的 HTTP 端点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-22T21:06:47.930

没有用于访问 Windows 应用商店中内容的官方 API。我确信内容是通过 HTTP 或 HTTPS 端点从网络中提取的，但可能不建议使用这样的无证服务。看起来也没有记录用于启动商店的协议激活模式。我能找到的最接近的是 Windows Phone 中的 MarketplaceDetailTask​​。[http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.tasks.marketplacedetailtask(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.tasks.marketplacedetailtask(v=vs.105).aspx)

启动商店的唯一其他受支持的方式是使用导致商店打开的应用程序的链接。

# jquery - JavaScript ajax 中的消息来自

> ID：14132209
> 
> 赞同：0
> 
> 时间：2013-01-03T02:21:30.920
> 
> 标签：jquery, ajax

我对 jQuery 不是很熟悉，但遇到过此代码，用于通过使用来自站点的 jQuery 发送电子邮件。

我坚持的是，通常至少在 HTML/PHP 中，你会有一个 POST/GET 和一个 URL 来指向它。

最后有一行：

> $.ajax({ type: 'POST', url: options.url,

但我不知道如何在服务器端处理这个问题。任何想法或指示？

谢谢，新年快乐。

(函数($){

```
 //define the new for the plugin ans how to call it  
    $.fn.contactable = function(options) {
        //set default options  
        var defaults = {
            name: 'Name',
            email: 'Email',
            message : 'Message',
            subject : 'A contactable message',
            submit : 'SEND',
            recievedMsg : 'Thank you for your message',
            notRecievedMsg : 'Sorry but your message could not be sent, try again later',
            disclaimer: 'Please feel free to contact us',
            hideOnSubmit: false

        };

        //call in the default otions
        var options = $.extend(defaults, options);
        //act upon the element that is passed into the design    
        return this.each(function() {
            //construct the form
            var this_id_prefix = '#'+this.id+' ';
            $(this).html('<div id="contactable_inner"></div><form id="contactForm" method="" action=""><div id="loading"></div><div id="callback"></div><div class="holder"><p><label for="name">'+options.name+'<span class="red"> * </span></label><br /><input id="name" class="contact" name="name"/></p><p><label for="email">'+options.email+' <span class="red"> * </span></label><br /><input id="email" class="contact" name="email" /></p><p><label for="message">'+options.message+' <span class="red"> * </span></label><br /><textarea id="message" name="message" class="message" rows="4" cols="30" ></textarea></p><p><input class="submit" type="submit" value="'+options.submit+'"/></p><p class="disclaimer">'+options.disclaimer+'</p></div></form>');
            //show / hide function
            $(this_id_prefix+'div#contactable_inner').toggle(function() {
                $(this_id_prefix+'#overlay').css({display: 'block'});
                $(this).animate({"marginLeft": "-=5px"}, "fast"); 
                $(this_id_prefix+'#contactForm').animate({"marginLeft": "-=0px"}, "fast");
                $(this).animate({"marginLeft": "+=387px"}, "slow"); 
                $(this_id_prefix+'#contactForm').animate({"marginLeft": "+=390px"}, "slow"); 
            }, 
            function() {
                $(this_id_prefix+'#contactForm').animate({"marginLeft": "-=390px"}, "slow");
                $(this).animate({"marginLeft": "-=387px"}, "slow").animate({"marginLeft": "+=5px"}, "fast"); 
                $(this_id_prefix+'#overlay').css({display: 'none'});
            });

            //validate the form 
            $(this_id_prefix+"#contactForm").validate({
                //set the rules for the fild names
                rules: {
                    name: {
                        required: true,
                        minlength: 2
                    },
                    email: {
                        required: true,
                        email: true
                    },
                    message: {
                        required: true
                    }
                },
                //set messages to appear inline
                    messages: {
                        name: "",
                        email: "",
                        message: ""
                    },          

                submitHandler: function() {
                    $(this_id_prefix+'.holder').hide();
                    $(this_id_prefix+'#loading').show();
$.ajax({
  type: 'POST',
  url: options.url,
  data: {subject:options.subject, name:$(this_id_prefix+'#name').val(), email:$(this_id_prefix+'#email').val(), message:$(this_id_prefix+'#message').val()},
  success: function(data){
                        $(this_id_prefix+'#loading').css({display:'none'}); 
                        if( data == 'success') {
                            $(this_id_prefix+'#callback').show().append(options.recievedMsg);
                            if(options.hideOnSubmit == true) {
                                //hide the tab after successful submition if requested
                                $(this_id_prefix+'#contactForm').animate({dummy:1}, 2000).animate({"marginLeft": "-=450px"}, "slow");
                                $(this_id_prefix+'div#contactable_inner').animate({dummy:1}, 2000).animate({"marginLeft": "-=447px"}, "slow").animate({"marginLeft": "+=5px"}, "fast"); 
                                $(this_id_prefix+'#overlay').css({display: 'none'});    
                            }
                        } else {
                            $(this_id_prefix+'#callback').show().append(options.notRecievedMsg);
                            setTimeout(function(){
                                $(this_id_prefix+'.holder').show();
                                $(this_id_prefix+'#callback').hide().html('');
                            },2000);
                        }
                    },
  error:function(){
                        $(this_id_prefix+'#loading').css({display:'none'}); 
                        $(this_id_prefix+'#callback').show().append(options.notRecievedMsg);
                                        }
});     
                }
            });
        });
    };

})(jQuery); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T02:25:28.797

像接收表单一样在服务器上接收数据。

AJAX 请求发送的所有数据都在此处定义（AJAX 选项对象的一部分）：

```
data: {subject:options.subject, 
       name:$(this_id_prefix+'#name').val(), 
        email:$(this_id_prefix+'#email').val(),
         message:$(this_id_prefix+'#message').val()}, 
```

在 php 中：

```
$email=$_POST['email']; 
```

# linux - 使用 find 命令但排除两个目录中的文件

> ID：14132210
> 
> 赞同：99
> 
> 时间：2013-01-03T02:21:32.013
> 
> 标签：linux, shell, unix, find

我想查找以 结尾的文件`_peaks.bed`，但排除`tmp`和`scripts`文件夹中的文件。

我的命令是这样的：

```
 find . -type f \( -name "*_peaks.bed" ! -name "*tmp*" ! -name "*scripts*" \) 
```

但它没有用。文件夹中的`tmp`文件`script`仍将显示。

有人对此有想法吗？

* * *

## 回答 #1

> 赞同：209
> 
> 时间：2013-01-03T02:34:07.387

以下是您可以使用以下方式指定的方法`find`：

```
find . -type f -name "*_peaks.bed" ! -path "./tmp/*" ! -path "./scripts/*" 
```

**解释：**

*   `find .`- 从当前工作目录开始查找（默认递归）
*   `-type f`- 指定`find`您只希望结果中的文件
*   `-name "*_peaks.bed"`- 查找名称以结尾的文件`_peaks.bed`
*   `! -path "./tmp/*"`- 排除路径以开头的所有结果`./tmp/`
*   `! -path "./scripts/*"`- 同时排除路径以开头的所有结果`./scripts/`

**测试解决方案：**

```
$ mkdir a b c d e
$ touch a/1 b/2 c/3 d/4 e/5 e/a e/b
$ find . -type f ! -path "./a/*" ! -path "./b/*"

./d/4
./c/3
./e/a
./e/b
./e/5 
```

您非常接近，该`-name`选项仅考虑基本名称，其中`-path`考虑整个路径=）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-03T02:28:15.050

这是您可以做到的一种方法...

```
find . -type f -name "*_peaks.bed" | egrep -v "^(./tmp/|./scripts/)" 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2020-08-21T12:53:20.333

利用

```
find \( -path "./tmp" -o -path "./scripts" \) -prune -o  -name "*_peaks.bed" -print 
```

或者

```
find \( -path "./tmp" -o -path "./scripts" \) -prune -false -o  -name "*_peaks.bed" 
```

或者

```
find \( -path "./tmp" -path "./scripts" \) ! -prune -o  -name "*_peaks.bed" 
```

顺序很重要。它从左到右评估。始终从路径排除开始。

# 解释

不要使用`-not`（或`!`）排除整个目录。使用`-prune`. 如手册中所述：

```
−prune    The primary shall always evaluate as  true;  it
          shall  cause  find  not  to descend the current
          pathname if it is a directory.  If  the  −depth
          primary  is specified, the −prune primary shall
          have no effect. 
```

并在 GNU 查找手册中：

```
-path pattern
              [...]
              To ignore  a  whole
              directory  tree,  use  -prune rather than checking
              every file in the tree. 
```

实际上，如果您使用`-not -path "./pathname"`， find 将评估 下每个节点的表达式`"./pathname"`。

find 表达式只是条件评估。

*   `\( \)`- 分组操作（您可以使用`-path "./tmp" -prune -o -path "./scripts" -prune -o`，但它更详细）。
*   `-path "./script" -prune`- 如果`-path`返回 true 并且是一个目录，则为该目录返回 true 并且不要**进入**它。
*   `-path "./script" ! -prune`- 它评估为`(-path "./script") AND (! -prune)`。它将修剪的“始终正确”恢复为始终错误。它避免打印`"./script"`作为匹配项。
*   `-path "./script" -prune -false`- 因为`-prune`总是返回 true，你可以跟随它`-false`来做同样的 than `!`。
*   `-o`- OR 运算符。如果两个表达式之间没有指定运算符，则默认为 AND 运算符。

因此，`\( -path "./tmp" -o -path "./scripts" \) -prune -o -name "*_peaks.bed" -print`扩展为：

```
[ (-path "./tmp" OR -path "./script") AND -prune ] OR ( -name "*_peaks.bed" AND print ) 
```

打印在这里很重要，因为没有它会扩展到：

```
{ [ (-path "./tmp" OR -path "./script" )  AND -prune ]  OR (-name "*_peaks.bed" ) } AND print 
```

`-print`由 find 添加 - 这就是为什么大多数时候，您不需要在表达式中添加它。由于`-prune`返回 true，它将打印“./script”和“./tmp”。

在其他情况下没有必要，因为我们切换`-prune`到总是返回 false。

提示：您可以使用`find -D opt expr 2>&1 1>/dev/null`它来查看它是如何优化和扩展的，
`find -D search expr 2>&1 1>/dev/null`以查看检查了哪个路径。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-12-06T04:00:38.127

**你可以试试下面：**

```
find ./ ! \( -path ./tmp -prune \) ! \( -path ./scripts -prune \) -type f -name '*_peaks.bed' 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-03-25T18:18:22.397

对我来说，这个解决方案不适用于带有 find 的命令 exec，真的不知道为什么，所以我的解决方案是

```
find . -type f -path "./a/*" -prune -o -path "./b/*" -prune -o -exec gzip -f -v {} \; 
```

**解释：**与 sampson-chen 相同，但添加了

-prune - 忽略...的处理路径

-o - 如果不匹配则打印结果，（修剪目录并打印剩余结果）

```
18:12 $ mkdir a b c d e
18:13 $ touch a/1 b/2 c/3 d/4 e/5 e/a e/b
18:13 $ find . -type f -path "./a/*" -prune -o -path "./b/*" -prune -o -exec gzip -f -v {} \;

gzip: . is a directory -- ignored
gzip: ./a is a directory -- ignored
gzip: ./b is a directory -- ignored
gzip: ./c is a directory -- ignored
./c/3:    0.0% -- replaced with ./c/3.gz
gzip: ./d is a directory -- ignored
./d/4:    0.0% -- replaced with ./d/4.gz
gzip: ./e is a directory -- ignored
./e/5:    0.0% -- replaced with ./e/5.gz
./e/a:    0.0% -- replaced with ./e/a.gz
./e/b:    0.0% -- replaced with ./e/b.gz 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-03T02:31:49.167

尝试类似的东西

```
find . \( -type f -name \*_peaks.bed -print \) -or \( -type d -and \( -name tmp -or -name scripts \) -and -prune \) 
```

如果我弄错了，请不要太惊讶。如果目标是执行（而不是打印），只需将其替换到位。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-16T01:17:32.237

通过这些解释，您可以实现您的目标和**许多其他**目标。只需按照您的意愿加入每个部分。

模型

```
find ./\
 -iname "some_arg" -type f\ # File(s) that you want to find at any hierarchical level.
 ! -iname "some_arg" -type f\ # File(s) NOT to be found on any hirearchic level (exclude).
 ! -path "./file_name"\ # File(s) NOT to be found at this hirearchic level (exclude).
 ! -path "./folder_name/*"\ # Folder(s) NOT to be found on this Hirearchic level (exclude).
 -exec grep -IiFl 'text_content' -- {} \; # Text search in the content of the found file(s) being case insensitive ("-i") and excluding binaries ("-I"). 
```

例子

```
find ./\
 -iname "*" -type f\
 ! -iname "*pyc" -type f\
 ! -path "./.gitignore"\
 ! -path "./build/*"\
 ! -path "./__pycache__/*"\
 ! -path "./.vscode/*"\
 ! -path "./.git/*"\
 -exec grep -IiFl 'title="Brazil - Country of the Future",' -- {} \; 
```

**谢谢！**

[**参考文献：** https://unix.stackexchange.com/q/73938/61742]

* * *

**额外的：**

您可以将上面的命令与您喜欢的编辑器一起使用并分析找到的文件的内容，例如...

```
vim -p $(find ./\
 -iname "*" -type f\
 ! -iname "*pyc" -type f\
 ! -path "./.gitignore"\
 ! -path "./build/*"\
 ! -path "./__pycache__/*"\
 ! -path "./.vscode/*"\
 ! -path "./.git/*"\
 -exec grep -IiFl 'title="Brazil - Country of the Future",' -- {} \;) 
```

# ipython-notebook - 有哪些工具可用于将 ipython 笔记本导出为 PDF 文件？

> ID：14132213
> 
> 赞同：11
> 
> 时间：2013-01-03T02:22:26.673
> 
> 标签：ipython-notebook

我有一个格式很好的 ipython 笔记本，里面有 markdown 单元格之类的东西。我想知道在导出到 PDF 文件方面我的选择是什么。

到目前为止，我一直在`File > Print View`使用 chromium 的“保存到文件”功能将结果页面打印为 PDF。这在技术上*是可行*的，但它有一个主要的不便之处：我的数字、代码和降价单元格经常被分页符分割。

是否有其他解决方案可以让我拥有一个连续的 PDF 文件？

**编辑：** 我遇到了[nbconvert](https://github.com/ipython/nbconvert)，但是当我不断收到“找不到文件”错误时。有人对 nbconvert 有任何运气吗？该文档声称支持导出为 PDF，但是当我运行时`nbconvert.py -f pdf`，错误消息表明 PDF 格式实际上不受支持。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-01-30T00:55:50.007

您可以使用 ipython 来执行此操作，例如命令：

```
ipython nbconvert notebookname.ipynb --to latex --post pdf 
```

将 notebookname.ipynb 转换为 pdf。但是，它确实要求您运行最新版本的 texlive（即 texlive 2013）才能拥有支持软件。请注意，Ubuntu 12.04 随附来自其存储库的 texlive 2009。2013 可以直接从 CTAN 安装，只需按照[这些说明进行](http://www.tug.org/texlive/quickinstall.html)操作。然后你就可以开始运行了，它看起来很棒。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-18T09:22:36.497

您不能直接将ipynb转换为pdf，因此错误消息是正确的！您需要先将其转换为 latex:`nbconvert.py -f latex your_nb.ipynb`然后用于`pdflatex your_nb.tex`构建 pdf 文件。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-09-11T20:20:12.333

如果所有其他方法都失败了，因为 tex 可能会很喜怒无常...安装 wkhtmltopdf

\i 然后使用 nbconvert 创建一个 html，然后使用 wkhtmltopdf 创建 pdf。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-30T19:28:40.060

如果您经常转换笔记本，[这里有一个脚本](https://gist.github.com/CloudCray/994dd361dece0463f64a)，它使用 wkhtmltopdf 将选定的笔记本转换为 HTML 和 PDF。安装[wkhtmltopdf 后](http://wkhtmltopdf.org/downloads.html)，将此脚本保存在与笔记本相同的文件夹中，并在您想要快速转换笔记本时运行它。

# python - zip(,) 字符串浮动？

> ID：14132216
> 
> 赞同：1
> 
> 时间：2013-01-03T02:22:42.533
> 
> 标签：python, pandas, time-series

我正在尝试计算每日损益，在 .csv 中有 10 分钟的价格（每个日期有 42 次）---其中一天的买入次数和卖出次数可能不相等。如果它们不相等，则程序应使用该唯一日期的收盘价 df["price"][t] 减去（从/减去），具体取决于它是买入还是卖出。

```
import pandas as pd

df=pd.read_csv("file.csv", names="date time price mag signal".split())

s=df["signal"]=="S"
b=df["signal"]=="B"
ns=df["signal"]!="S"
nb=df["signal"]!="B"
t=df["time"]=="1620"

a1=df["price"][buy|(nb & t)]
b1=df["date"][buy|(nb & t)]

h=df["price"][s|(ns & t)]
g=df["date"][s|(ns & t)]

c1=zip(b1,a1)
c=zip(g,h) 
```

c1, c 是包含买卖数量及其各自日期的列表。这里的问题是 c1 & c 是字符串——一旦它们被压缩；因此不能减去。是否可以制作 a1, h 浮点数以便我可以区分它们？

我想匹配 c, c1 中的日期以减去 S_i-B_i 的价格，对于给定日期的所有 i，然后对所有日期求和并返回该值。我想在 h-a1 上区分价格，只有当日期匹配时。

一些样本数据：

日期时间价格磁信号

2007 年 1 月 3 日 930 1422.8
2007 年 1 月 3 日 940 1423.2 0 2007 年 1
月 3 日 950 1422.8 0 2007 年 1 月 3
日 1000 1420.5 0 2007 年 1 月 3
日 1010 1422.8 0
2007 年 1 月 3 日 1020 1

. . .

2007 年 1 月 3 日 1230 1424.2 -1 B

2007 年 1 月 3日 1240 1424.8 0
2007 年 1 月 3 日 1250 1425.8 1 秒

2007 年 1月 3 日 1300 1426 0 2007 年 1
月 3 日 1310 1425 0 2007 年 1 月
3 日 1320 1423.5 -1 B

2007 年1 月 3 日 1330 1421.8 0
2007 年 1 月 3 日 1340 1421.5 0
2007 年 1 月 3 日 1350 1420.5 0 2007 年 1
月 3 日 1400 1421 0 2007 年 1 月
3 日 1410 1417.2 -1 B

2007 年 1 月 3 日 1420 1412.8 -1 B

2007 年 1 月 3 日1430 1414.8 0
2007 年 1 月 3 日 1440 1413.5 0 2007 年 1 月 3
日 1450 1410 0 2007 年
1 月 3 日 1500 1407.2 -1 B

2007 年 1 月 3 日 1510 1410.2 1 秒

2007 年 1 月 3 日 1520 1409.5 -1 B

2007 年 1 月 3 日 1530 1410.5 1 秒

2007 年 1 月 3 日 1540 1412.5 0
...

2007 年 1 月 3 日 1610 1415.5 1 秒

2007 年 1 月 3 日 1620 1414 -1 B

2007 年 1 月 4 日930 1412.2 0 2007年 1 月 4
日 940 1411 0 2007 年 1 月 4 日
950 1413 0 2007 年 1
月 4 日 1000 1412.2 0 2007年 1 月 4 日
1010 1407.2 -1 B

zip 的结果，比如说，c1 应该是这样的：

```
[('1/3/2007', '1424.2'),
('1/3/2007', '1423.5'),
('1/3/2007', '1417.2'),
('1/3/2007', '1412.8'),
('1/3/2007', '1407.2'),
('1/3/2007', '1409.5'),
('1/3/2007', '1414'),

 etc - all dates in between

 ('8/30/2012','1324')] 
```

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T10:46:35.577

不要使用 zip，您可以将数据保存在 pandas 本机数据结构中。
这里的价格应该在 DataFrame 中正确读取为浮点数。

您可以执行类似[`sub`](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.Series.sub.html)groupby[的](http://pandas.pydata.org/pandas-docs/dev/groupby.html) `'date'`操作：

```
df['dif'] = a1.sub(h, fill_value=0)
g = df.groubpy('date')['dif'].sum() 
```

.

请注意，您可以将[`read_csv`](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.io.parsers.read_csv.html)关键字`parse_dates`用作日期时间对象：

```
df = pd.read_csv("file.csv",
                 names="date time price mag signal".split()
                 parse_dates=[['date','time']]) 
```

# c++ - 在模板类上覆盖赋值运算符时的奇怪行为

> ID：14132217
> 
> 赞同：1
> 
> 时间：2013-01-03T02:22:42.457
> 
> 标签：c++, templates, variable-assignment, operator-keyword

下面是一个重载赋值运算符的模板类的示例。给定这个类：

```
template<class Type>
class Attribute
{
public:

    Type operator=( const Type rhs )
    {
        mData = rhs;
        return mData;
    }

private:

    Type mData;
}; 
```

为什么下面的这段代码编译时没有任何错误？

```
Attribute<std::string> str;
str = 0; 
```

虽然看似矛盾，但这段代码：

```
std::string test;
test = 0; 
```

产生以下错误？

```
error C2593: 'operator =' is ambiguous 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T02:24:48.303

`std::string`已重载[operator=](http://en.cppreference.com/w/cpp/string/basic_string/operator=)，您的代码编译良好，但在执行字符串构造函数时具有未定义的行为，因为它不接受 NULL（感谢 Potatoswatter）

```
basic_string& operator=( const CharT* s ); 
```

注：`str = 0;`等于

```
std::string str = std::string(NULL);

std::string test;
test = 0; 
```

在这里，编译器不能推断`0`是 char 类型或指针，因此它与以下两个运算符重载有歧义：

```
basic_string& operator=( const CharT* s );
basic_string& operator=( CharT ch ); 
```

*手动`0`转换为 char 或`char*`应该编译你的代码，但你应该避免这样做。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T02:48:59.927

`std::string`有[两个赋值运算符](http://en.cppreference.com/w/cpp/string/basic_string/operator=)

```
basic_string& operator=( const CharT* s );
basic_string& operator=( CharT ch ) 
```

和 0 可以匹配前者和后者。如何？0 是一个有效的 char，[null char](http://www.asciitable.com/)，表示指针 NULL 值也是有效的。因此编译器抛出`error C2593: 'operator =' is ambiguous`.

至于为什么在你的`Attribute`类案例中接受它，编译器能够使用[这个构造函数构造一个 std::string](http://en.cppreference.com/w/cpp/string/basic_string/basic_string)

`basic_string( const CharT* s, const Allocator& alloc = Allocator() );`

并将其作为`rhs`您的函数中的传递`Type operator=( const Type rhs )`；这种行为是由于编译器执行的[隐式转换。](http://en.cppreference.com/w/cpp/language/implicit_cast)

# c - 如何使用内联汇编启用计数器控制位？

> ID：14132218
> 
> 赞同：0
> 
> 时间：2013-01-03T02:22:52.510
> 
> 标签：c, assembly, microcontroller

我使用内联汇编来启用计数器控制寄存器中的位。我正在寻找内联汇编中的 apt 代码。我将以下代码用于[英飞凌 TriCore](http://en.wikipedia.org/wiki/Infineon_TriCore)微控制器。

```
__asm("ENABLE CCTRL.CE"); 
```

请指导我编写正确的代码。在上面的代码中，我需要将`CE`计数器控制寄存器 ( `CCTRL`) 中的位设置为 1。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T03:14:58.057

快速扫描指令集表明该 `ENABLE`命令用于启用中断。您可能需要`ST.T`说明。SDK 中应该有一些东西可以将`CCTRL`寄存器映射到给定的内存地址或变量名。

# git - git如何将包含所有文件的文件夹指向远程存储库

> ID：14132219
> 
> 赞同：0
> 
> 时间：2013-01-03T02:23:08.363
> 
> 标签：git, version-control

> **可能重复：**
> [我可以将 .git 文件夹存储在我想要跟踪的文件之外吗？](https://stackoverflow.com/questions/505467/can-i-store-the-git-folder-outside-the-files-i-want-tracked)

我的同事有一个我们远程 git 存储库的 zip 存档。

因此，我们如何将他的目录指向存储库，而不是再次签出所有文件？我们正在使用乌龟 git。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T02:57:10.063

解压他的 zip 存档。现在你有 /the_app

现在`remote add`是远程存储库。

现在您可以`push`对遥控器进行更改和更改。
或者在遥控器上进行更改，然后`fetch`将它们放入。

# html - 需要添加提交按钮，将表单数据通过电子邮件发送给我

> ID：14132220
> 
> 赞同：0
> 
> 时间：2013-01-03T02:23:10.183
> 
> 标签：html, forms, email, web, submit

这是我的“表格” [http://www.confidentialpatient.com/js/index.html](http://www.confidentialpatient.com/js/index.html)

我需要为此添加一些内容：

*   该人完成添加“项目”后，单击“下一步”
*   在下一页上，给出了上一页中选择的项目的摘要（以列表格式）。基本上，这是一个确认页面
*   然后，他们可以单击“提交”，将表单数据通过电子邮件发送给我。

我知道这可能很多，但我非常感谢任何见解！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:33:23.847

如果没有服务器端脚本语言，您将无法做到这一点。您有几个选择是 PHP、ASP.NET、PERL 或 Python。

供您参考，我提到了一个测试脚本和 PHP 代码，用于提交只有一个字段的表单，然后在下一页接收该信息，然后在 h2 标记中将其显示给用户。

第 1 页的代码：

```
<form method="post" action="page2.html">
   <h1>This is a test form</h1>
   <label>Enter your full name</label>
   <input type="text" name="fullname" />
   <input type="submit" name="submit" value="Submit Form" />
</form> 
```

第 2 页的代码（接收页面）：

```
<?php
    $name = $_POST['fullname'];
?>
<h2>You submitted name is: <?php echo $name; ?> </h2> 
```

# ruby-on-rails-3 - 开发中跳过图像丢失路由错误

> ID：14132222
> 
> 赞同：0
> 
> 时间：2013-01-03T02:23:37.000
> 
> 标签：ruby-on-rails-3, routing

我定期将一些表从生产环境导入到开发环境。一张表与图像有关，当我运行开发时，这些图像都会导致`ActionController::RoutingError (No route matches [GET] "/uploads/xxx.jpg"):`.

列表页面显示了很多这样的图像，这些图像淹没了我的日志。我想知道是否可以在开发环境中跳过记录这些路由错误（仅用于丢失图像）？

我尝试过使用`rescue_from`，但它似乎不起作用，而且粒度不够细。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-03T03:18:11.413

在重新启动服务器之前，不会应用新的配置级别更改。重新启动服务器应该应用新路由。也分享`$ rake routes`终端中的结果。

# actionscript-3 - 绕过 if 循环.. actionscript 3

> ID：14132223
> 
> 赞同：1
> 
> 时间：2013-01-03T02:23:50.040
> 
> 标签：actionscript-3, if-statement

我正在制作一个基于选择的游戏..我每次都给用户不同的对象，他们点击的对象得到一个特定的值....

当我必须将其导出以显示他们的选择时，问题就出现了现在这变得非常混乱有人知道解决这个问题的方法吗？你能不能请你一步一步地向我解释，因为我在这方面还很新……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T02:27:15.303

根据您拥有的不同项目的数量，您可能可以保存位掩码，如下所示：

```
 items = 00001101110011 
```

其中 1 代表用户拥有的项目，0 代表他们没有的项目。

然后，您只需要一个循环，迭代`i`，然后检查是否`(1<<i) & items`并从数组中获取项目的数据。

# java - “Serializable 无法解析为类型”

> ID：14132224
> 
> 赞同：1
> 
> 时间：2013-01-03T02:24:02.867
> 
> 标签：java, eclipse, serialization

我正在使用 Eclipse 创建一个简单的项目。我正在尝试在我的 Java 类中实现 Serializable，但 Eclipse 没有识别出它说“Serializable 无法解析为一种类型”，并让我创建一个名为 Serializable 的接口。

```
public class Location implements Serializable { 
```

Serializable 不应该是内置接口吗？我如何让它工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T02:26:13.433

您需要从`java.io`包中导入它：

```
import java.io.Serializable; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T02:26:22.357

你必须`import java.io.Serializable`。

如果您单击 Eclipse 中的“错误图标”，在违规行的左侧，Eclipse 可以为您完成。或者只需按`Ctrl+Shift+O`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T02:25:51.707

是的，[`Serializable`](http://docs.oracle.com/javase/7/docs/api/java/io/Serializable.html)是一个接口。也许您未能正确配置构建路径？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-13T10:38:11.510

您只需右键单击您的项目 => buildpath => jre => 并指定正确的 jre，它将为您提供导入 java.io.Serialisable 的可能性；

# c++ - 如何批量升级和构建 VC++ 6 项目到 VC++ 2010？

> ID：14132225
> 
> 赞同：0
> 
> 时间：2013-01-03T02:24:15.033
> 
> 标签：c++, windows, visual-studio-2010

我有数千个 VC++ 6 项目，现在我想批量升级并将它们构建到 VC++ 2010。我不知道该怎么做。

**如果我必须手动升级和构建它们，我会很生气！**

任何机构可以帮助我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-23T14:01:29.780

给你：将 VC++ 6.0 项目升级到 VC++ 2010

```
@echo off
for /r %i in (*.dsp;) do ( vcupgrade "%i" -overwrite -nologo )
pause 
```

批量构建 VC++ 2010 项目

```
@echo off
for /r %i in (*.vcxproj;*.vcproj;) do ( devenv "%i" /Rebuild )
pause 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T02:47:10.740

我没有尝试过，但这看起来很有希望：

[http://blogs.msdn.com/b/vcblog/archive/2010/03/25/to-the-command-line-thermals-some-quick-know-hows-for-upgrading-to-vs-2010。 aspx](http://blogs.msdn.com/b/vcblog/archive/2010/03/25/to-the-command-line-enthusiasts-some-quick-know-hows-for-upgrading-to-vs-2010.aspx)

# css - 使用谷歌字体 API

> ID：14132226
> 
> 赞同：3
> 
> 时间：2013-01-03T02:24:20.943
> 
> 标签：css, webfonts

我是谷歌字体的新手。我从谷歌得到了这个网址：

`<link href='http://fonts.googleapis.com/css?family=Ubuntu:400,400italic,700,700italic' rel='stylesheet' type='text/css'>`

我的问题是，如何使用我选择的各种字体。如您所见，它们是 Ubuntu Normal 400、Ubuntu Normal 400 Italic、Ubuntu Bold 700 和 Ubuntu 700 italic。

我已经尝试了一切，但只能使用普通的“Ubuntu”而不能使用其他任何东西。

请帮忙！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T02:28:21.223

这是我使用的斜体版本：http: [//jsfiddle.net/6wzuy/](http://jsfiddle.net/6wzuy/)

```
font-family:ubuntu;
font-style:italic;
font-weight: 700; 
```

该技术是使用[CSS font-style 属性](http://www.w3schools.com/cssref/pr_font_font-style.asp)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T11:33:33.973

您使用的[Google 代码](http://fonts.googleapis.com/css?family=Ubuntu:400,400italic,700,700italic)将常规、斜体、粗体和粗斜体字体（特定字体）声明为字体（字体系列）“Ubuntu”的成员。这意味着您可以像使用普通字体一样使用斜体和粗体。

您可以使用`font-style: italic`请求斜体字体和`font-weight: bold`（或等效`font-weight: 700`地）请求粗体。请注意，许多 HTML 元素默认为斜体或粗体；例如，`h1`、`strong`和`th`元素意味着`font-weight: bold`。

还有其他使用方法，`@font-face`以便将每种字体声明为自己的字体系列；FotSquirrel 就是这样做的。但是 Google 采用的方法更符合逻辑，并且与 HTML 和 CSS 中通常使用的字体方式兼容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T02:28:29.110

```
font-family: 'Ubuntu', Arial, serif; font-weight: 700; 
```

编辑：您必须包含斜体和粗体的单独字体库，以便它们按预期工作。

如果您不包括斜体和粗体版本，浏览器将尝试进行补偿，但很可能会做得很差。更多关于这个的[列表分开文章](http://www.alistapart.com/articles/say-no-to-faux-bold/)。

如果您想为您的字体添加字体样式，请**始终**添加额外的字体样式并在您的文档中指定它。特别是在大衬线字体中，它可以产生巨大的差异。

# python - 美味派过滤外键相关资源

> ID：14132227
> 
> 赞同：2
> 
> 时间：2013-01-03T02:24:29.117
> 
> 标签：python, django, foreign-key-relationship, tastypie

我有一个问题，无论如何我都无法解决。

我想要的是，从 api/epg 获得其节目在现在和 2 小时后范围内的频道。不知何故，我得到了所有节目的所有频道，而不是时间范围内的任何东西。

我究竟做错了什么？

谢谢

模型.py

```
class Channels(models.Model):
    sort_order = models.IntegerField()
    name = models.CharField(max_length=200)

    def __unicode__(self):
        return self.name

class Events(models.Model):

    event_id = models.CharField(max_length=200, primary_key=True)
    channel = models.ForeignKey('Channels', related_name='events')
    start_time = models.DateTimeField( blank=True, null = True)
    end_time = models.DateTimeField( blank=True, null = True)

    def __unicode__(self):
        return self.title 
```

api.py

```
class EPGResource(ModelResource):
    events= fields.ToManyField('xyz.api.EventResource','events',  full=True)

    class Meta:
        now = datetime.now()
        later = now + timedelta(hours=2)
        queryset = Channels.objects.filter(events__start_time__range(now,later)).order_by('sort_order')
        resource_name = 'epg'
        filtering = {
          "start_time"  :   ['exact', 'range'],
          "name"  :   ['exact', 'range'],
          "events"  :   ['exact', 'range'],
          "channels": ALL_WITH_RELATIONS,
        }

class EventResource(ModelResource):

    class Meta:
        queryset = Events.objects.all()
        resource_name = 'events'

        filtering = {
          "start_time"  :   ['exact', 'range'],
          "genre"  :   ['exact', 'range'],
          "channel": ALL_WITH_RELATIONS,
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T04:00:38.237

不幸的是，您将需要在运行时进行过滤，`get_object_list`因为美味的资源不是在运行时构建的：

```
class EPGResource(ModelResource):
    events= fields.ToManyField('xyz.api.EventResource','events',  full=True)

    class Meta:
        now = datetime.now()
        later = now + timedelta(hours=2)
        queryset = Channels.objects.all()
        resource_name = 'epg'
        filtering = {
          "start_time"  :   ['exact', 'range'],
          "name"  :   ['exact', 'range'],
          "events"  :   ['exact', 'range'],
          "channels": ALL_WITH_RELATIONS,
        }

    def get_object_list(self, request):
        now = datetime.now()
        later = now + timedelta(hours=2)
        return super(EPGResource, self).get_object_list(request).filter(events__start_time__range(now,later)).order_by('sort_order') 
```

# php - mysqli准备好的语句不会登录

> ID：14132232
> 
> 赞同：0
> 
> 时间：2013-01-03T02:24:49.320
> 
> 标签：php, html, login, mysqli

出于某种原因，我一直尝试登录并不断收到错误消息，即用户名和密码无效。我已经尝试在编码中设置密码而不是使用 post 方法。有人有什么想法吗？

另外，我知道 md5 已经不行了，但是现在 idc 关于这一点，一旦我的所有功能完成，我将切换到 SHA-2，稍后我会对其进行加盐和哈希处理。

```
<?php
include_once"dbconnection.php";
session_start();
$mysqli = new mysqli($host, $username, $password, $database);
if(isset($_POST['login'])){
        if ($stmt = $mysqli->prepare("SELECT email, password FROM users WHERE email=? AND password=? LIMIT 1")) 
        {
            $email = $_POST['email'];
            $password = md5($_POST['password']);
            $stmt->bind_param('ss', $email, $password);
            $stmt->execute();
            $stmt->bind_result($email, $password);
            $stmt->fetch();
            if($stmt->fetch() == true)
            {
                $_SESSION['Logged'] = 1;
                $_SESSION['Email'] = $email;
                header('Location: blogzone.php');
                exit();
            } else {
                echo "Wrong Username or Password!";
            }
            $stmt->close(); 
        }
        else 
        {   

        }
    }
$mysqli->close();
?> 
```

我的 HTML

```
<form action="login.php" method="post" name="login">
   <input type="text" name="email" /><br />
   <input type="password" name="password" id="password"/><br />
   <input type="submit" value="Login" name="login" />
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T02:37:28.413

您已经`fetch()`在*mysqli 语句*`if`对象上调用过一次，然后在您的条件下再次调用它。

```
 $stmt->fetch();            // <---- Notice you already fetched the result
        if($stmt->fetch() == true) // <---- This is your problem right here
        {
            /* ... */
        } else {
            echo "Wrong Username or Password!";
        } 
```

请注意，一旦您获取结果，就没有更多的行要获取，然后`mysqli_stmt::fetch`将返回`NULL`。如果您想检查`if`条件中的结果或将调用结果存储`mysqli_stmt::fetch`在变量中并改为检查，请不要在第一次获取它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T02:58:22.373

我认为问题是没有获取所需的参数。试试这个代码（未经测试）

```
<?php
include_once"dbconnection.php";
session_start();
$mysqli = new mysqli($host, $username, $password, $database);
if(isset($_POST['login'])){
        $stmt = $mysqli->prepare("SELECT email, password FROM users WHERE email=? AND  password=? LIMIT 1");
        $email = $_POST['email'];
        $password = md5($_POST['password']);
        $stmt->bind_param('ss', $email, $password);
        $stmt->execute();
        $stmt->bind_result($email, $password);
        $stmt->store_result();
        if($stmt->num_rows == 1)  //To check if the row exists
            {
                while($stmt->fetch()) //fetching the contents of the row

                  {$_SESSION['Logged'] = 1;
                   $_SESSION['Email'] = $email;
                   header('Location: blogzone.php');
                   exit();
                   }

            }
            else {
                echo "Wrong Username or Password!";
            }
            $stmt->close();
            $stmt->free_result();
        }
        else 
        {   

        }
$mysqli->close();
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-25T05:57:00.250

我不知道你是否得到了答案，但试试这个：

打印出他们在登录表单（不是来自数据库）中插入的用户密码的散列版本，并查看它们是否匹配。

`echo md5($_POST['password']);`

它可能有助于确定。假设数据库中的匹配但最后缺少字符串，您就会知道您没有将 varchar 设置为足够大以容纳数据库中的行。

# javascript - Javascript 点餐计数器 .toFixed 加逗号

> ID：14132235
> 
> 赞同：1
> 
> 时间：2013-01-03T02:25:13.253
> 
> 标签：javascript, count, counter, decimal

```
<script>
var START_DATE = new Date("January 01, 2013 00:00:00");
var INTERVAL = 0.25;
var INCREMENT = 0.001;
var START_VALUE = 0;
var count = 0;
function addCommas(str){
   var arr,int,dec;
   str += '';

   arr = str.split('.');
   int = arr[0] + '';
   dec = arr.length>1?'.'+arr[1]:'';

   return int.replace(/(\d)(?=(\d{3})+$)/g,"$1,") + dec;
}window.onload = function(){
 var msInterval = INTERVAL * 1000;
 var now = new Date();
 count = parseInt((now - START_DATE)/msInterval) * INCREMENT + START_VALUE;
 document.getElementById('counter').innerHTML = addCommas(count);
 setInterval("count += INCREMENT; document.getElementById('counter').innerHTML =     addCommas(count);", msInterval);
}
</script>
<div id="counter"> 30k</div> 
```

我必须将 .toFixed(2) 放在哪里，以便我们的非营利组织的餐食柜台只显示小数点后两位。我尝试了许多不同的地方，但不确定 .toFixed 是否是正确的解决方案。请协助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T02:40:15.310

如果我运行：

```
count = 12345678.912;
formatted = count.toFixed(2).replace(/(\d)(?=(\d{3})+\.\d\d$)/g,"$1,"); 
```

格式化有字符串

```
12,345,678.91 
```

作为它的价值。

我认为这可以满足您的要求，而且更简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T02:44:44.880

把它放在你的`addCommas`函数中：

```
function addCommas(str){
    var arr,int,dec;
    str += '';

    arr = str.split('.');
    int = arr[0] + '';
    dec = arr.length>1?'.'+arr[1]:'';
    return int.replace(/(\d)(?=(\d{3})+$)/g,"$1,") + '.' + parseFloat(dec).toFixed(2).split('.')[1];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T02:41:33.083

试试这个

```
function addCommasWithDecimal(nStr, decPlcs) {
    nStr = parseFloat(nStr).toFixed(decPlcs);
    nStr += '';
    var x = nStr.split('.');
    var x1 = x[0];
    var x2 = x.length > 1 ? '.' + x[1] : '';
    var rgx = /(\d+)(\d{3})/;
    while (rgx.test(x1))
        x1 = x1.replace(rgx, '$1' + ',' + '$2');
    return x1 + x2;
} 
```

# c# - 使用inq LINQ检查多个矩形中一个点的存在

> ID：14132239
> 
> 赞同：1
> 
> 时间：2013-01-03T02:25:24.283
> 
> 标签：c#, linq

我有一个这样的正方形，分为 9 个矩形：

![在此处输入图像描述](../Images/be788e2412714bd43135401c805bba40.png)

所以我不想像这样列出一长串：

```
if(rectForward.Contains(touchPoint))
{
   return rectForward;
}
else if(rectForwardRight.Contains(touchPoint))
{
    return rectForwardRight;
}
//and so on! 
```

使用 linq 查询快速检查哪个`Rectangle`包含`Point`接触点。

好吧，我可以利用我花在这个问题上的时间来写 if/else 的东西，但我想看看它是如何进行的`linq`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T02:27:30.930

尝试将所有矩形存储在一个集合中，然后迭代它们变得微不足道：

```
return myRectangles.FirstOrDefault(rect => rect.Contains(touchPoint)) 
```

如果该点不包含在其中任何一个中，则取决于您要执行的操作，您可能只想使用（如果该点*不*`First`包含在其中任何一个中，则会引发异常）；`FirstOrDefault`将（假设您正在使用`System.Windows.Rect`该类）返回一个默认值`Rect`（位于size 处） `0,0`，`0`因此可能难以检查。

如果您不想将矩形存储在集合中，您可以编写一个简单的辅助方法来按顺序迭代它们并在需要时利用它：

```
private IEnumerable<Rect> GetSections()
{
    yield return rectForward;
    yield return rectForwardRight;
    yield return rectRight;
    ...
} 
```

您的 Linq 调用将使用的对象：

```
return GetSections().FirstOrDefault(rect => rect.Contains(touchPoint)) 
```

# android - 布局动画问题

> ID：14132241
> 
> 赞同：1
> 
> 时间：2013-01-03T02:25:34.543
> 
> 标签：android

首先，对不起我的英语，我是越南人，我的英语很差，所以请不要生气，好吧！

大家好，我必须使用布局动画（左推和右推）创建一个应用程序，这是我的代码：

```
ArrayList<LinearLayout>linear=new ArrayList<LinearLayout>();
Animation animLeft,animRight;

     for(int i=0;i<10;i++)
            {
                LinearLayout llayout=new LinearLayout(getApplicationContext());
                LinearLayout.LayoutParams lp=new       LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT,LinearLayout.LayoutParams.WRAP_CONTENT);
                lp.setMargins(0, 0, 0, 0);
                llayout.setLayoutParams(lp);
                llayout.setId(i);
                if(i%2==0)
                {
                    llayout.setAnimation(animLeft);
                    Log.d("SetAnimation,Left","i:"+i);
                    llayout.startLayoutAnimation();
                }
                else
                {
                    llayout.setAnimation(animRight);
                    Log.d("SetAnimation,Right","i:"+i);
                    llayout.startLayoutAnimation();
                }
                linear.add(llayout);
            } 
```

**//动画代码：**

**+左推**

```
 <?xml version="1.0" encoding="utf-8"?>
    <set xmlns:android="http://schemas.android.com/apk/res/android">
    <translate android:fromXDelta="100%p" android:toXDelta="0" android:duration="300"/>
    <alpha android:fromAlpha="0.0" android:toAlpha="1.0" android:duration="300" />
     </set> 
```

**+推右**

```
 <?xml version="1.0" encoding="utf-8"?>
    <set xmlns:android="http://schemas.android.com/apk/res/android">
    <translate android:fromXDelta="-100%p" android:toXDelta="0" android:duration="300"/>
    <alpha android:fromAlpha="0.0" android:toAlpha="1.0" android:duration="300" />
     </set> 
```

* * *

```
 public void CreateGame(int round)
{

    ///////////Load all method//////////////
    tvarray=TaoTextView(round);
    addTexttoLayoutbyRandom(round, tvarray);

    for(int i=0;i<round;i++)
    {
        Linearcenter.addView(linear.get(i));
        //linear.get(i).startLayoutAnimation();

    }
    ////////////////////////////////////////
    Linearcenter.startLayoutAnimation();
    iResult=RandomRound(round);
    iRound=round;
    //Linearcenter.startLayoutAnimation();
} 
```

我在 CreateGame 中设置`onCreate()`，请忽略一些无关的参数（如 round、iRound、iResult ..），当应用程序启动时，我只看到 1 个子布局效果，这是第一个布局，有`id = 0` 什么问题？请告诉我为什么？

# php - 日期范围之间的 MySQL

> ID：14132242
> 
> 赞同：1
> 
> 时间：2013-01-03T02:25:34.983
> 
> 标签：php, mysql

我有一个场景，我需要根据下表提取交货日期（示例）

```
job_id | delivery_date
1      | 2013-01-12
2      | 2013-01-25
3      | 2013-02-15 
```

我要做的是向用户显示所有从最早开始的交货日期（在本例中为 2013 年 1 月 12 日），然后再增加 21 天。基本上，我当然希望它显示的输出，最早的日期是开始日期 2013-01-12 和 2013-01-25。2 月之后的日期并不重要，因为它们不在我的 21 日期范围内。例如，如果它是一个 5 天的范围，那么当然不会包括 2013-01-25，而只会出现最早的日期。

这是我的主要 SQL 子句，它只显示从今年开始的工作：

```
SELECT date, delivery_date 
FROM `job_sheet` 
WHERE print_status IS NULL 
    AND job_sheet.date>'2013-01-01' 
```

是否可以使用 1 个 SQL 查询来完成此操作，或者我必须同时使用 PHP 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T02:29:11.163

```
SELECT date,
       delivery_date
FROM job_sheet
WHERE print_status IS NULL
AND job_sheet.date BETWEEN (SELECT MIN(date) FROM job_sheet) AND
                           (SELECT MIN(date) FROM job_sheet) + INTERVAL 21 DAY 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T02:31:08.057

您可以使用以下内容：

```
select *
from job_sheet
where print_status IS NULL
  and delivery_date >= (select min(delivery_date)
                        from job_sheet)
  and delivery_date <= (select date_add(min(delivery_date), interval 21 day)
                        from job_sheet) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/86ef1/2)

如果您担心日期不正确，如果您使用查询，那么最好将开始日期传递给您的查询，然后添加 21 天以获得结束日期。与此类似：

```
set @a='2013-01-01';

select *
from job_sheet
where delivery_date >= @a
  and delivery_date <= date_add(@a, interval 21 day) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/86ef1/12)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T04:47:30.473

```
SELECT j.job_id
     , j.delivery_date
  FROM `job_sheet` j
  JOIN ( SELECT MIN(d.delivery_date) AS earliest_date
           FROM `job_sheet` d
          WHERE d.delivery_date >= '2013-01-01'
       ) e
    ON j.delivery_date >= e.earliest_date
   AND j.delivery_date < DATE_ADD(e.earliest_date, INTERVAL 22 DAY)
   AND j.print_status IS NULL
 ORDER BY j.delivery_date 
```

* * *

（原始查询有一个谓词`job_sheet.date`；上面的查询引用`d.delivery_date`... 更改，如果它应该引用`date`列 instaed。）

如果意图仅显示`delivery_date`从今天开始的值，则将文字更改为`'2013-01-01'`返回当前日期的表达式，例如`DATE(NOW())`

# entity-framework-4 - 如何从 ObjectContext 获取 SQL 跟踪字符串？

> ID：14132253
> 
> 赞同：0
> 
> 时间：2013-01-03T02:27:11.920
> 
> 标签：entity-framework-4

是否可以从 EF 4 ObjectContext 获取将为更新语句执行的 sql？我知道如何从查询中获取它，而不是从更新/插入语句中获取它......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T03:52:02.253

不，不是直接的。您可以使用 SQL Server Profiler、第三方分析器和/或[跟踪提供程序](http://efwrappers.codeplex.com)。

# monodevelop - 适用于 Linux 和 MonoDevelop 的 DataGridView

> ID：14132256
> 
> 赞同：3
> 
> 时间：2013-01-03T02:27:27.380
> 
> 标签：monodevelop, gtk#

我想使用一些 GUI 对象来输出一些表的信息（这个信息是只读的）。Windows 窗体中有 DataGrid 和 DataGridView，但我找不到相同的 GTK# 的类似物。谁能告诉我我可以使用什么 MonoDevelop 和 Gtk# 的 DataGridView 类似物？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T19:14:26.367

这个[节点视图教程](http://www.mono-project.com/docs/gui/gtksharp/widgets/nodeview-tutorial/)应该让你开始如何使用它。AFAIK 这是可用于 Windows 窗体中的 DataGridView 的内容。这个[小指南](http://www.mono-project.com/docs/gui/gtksharp/tutorials/)也可以让您快速了解 MonoDevelop。干杯！

# actionscript-3 - AS3 Starling URLLoader 强制失败

> ID：14132258
> 
> 赞同：0
> 
> 时间：2013-01-03T02:27:30.937
> 
> 标签：actionscript-3, starling-framework

我正在尝试在我的八哥项目中使用 URLLoader 类，但是当我尝试时：

```
loader.addEventListener(starling.events.Event.COMPLETE 
```

我得到：

```
Error #1034: Type Coercion failed: cannot convert flash.events::Event@e696e49 to starling.events.Event. 
```

下面的代码：

```
var loader:URLLoader = new URLLoader();
var urlReq:URLRequest = new URLRequest("http://domain.com/file.php");
var urlVars:URLVariables = new URLVariables();          
loader.dataFormat = URLLoaderDataFormat.VARIABLES;
urlReq.method = URLRequestMethod.POST;
urlVars.txtVar = "12345";
urlReq.data = urlVars;
loader.addEventListener(starling.events.Event.COMPLETE, sendDataOnComplete);
loader.load(urlReq); 
```

我猜这是因为我正在尝试混合 Starling 事件和 Flash 事件，但我需要使用 Starling 并且我需要使用 URLLoader 从远程源 POST/GET 数据。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T03:05:41.827

我没有对starling 做过任何事情，但我知道它们对于我们通常在Flash 中使用的所有常用DisplayObjects 都有自己的等效类。但是，由于我假设您使用的是 Flash URLLoader 类（而不是 URLLoader 的 Starling 版本），所以您应该做的就是使用普通的 Flash Event.COMPLETE ... 因为这就是您的加载程序正在调度的内容。

# c++ - 在 Windows 中不使用 Unicode 有什么缺点？

> ID：14132260
> 
> 赞同：1
> 
> 时间：2013-01-03T02:27:38.987
> 
> 标签：c++, c, windows, winapi, unicode

在 Windows 上不使用 Unicode 有什么缺点？

我的意思是 Unicode`WCHAR`和广泛的 API 函数。（CreateWindowW、MessageBoxW 等）

不使用它会遇到什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T02:32:06.350

^(在处理系统 API 1)时，您的代码将无法正确处理当前所选代码页之外的字符。

典型的问题包括不支持的字符被转换为问号，无法处理带有特殊字符的文本，特别是名称/路径中带有“奇怪字符”的文件。

此外，一些较新的 API 仅存在于“宽”版本中。

最后，每个涉及文本的 API 调用都会稍微慢一些，因为`A`API 的“”版本通常只是围绕“ `W`”API 的薄包装器，它可以即时将参数转换为 UTF-16 - 所以，你有一些开销一个“普通”的`W`电话。

* * *

1.  没有什么能阻止您在应用程序中使用窄字符 Unicode 编码 (=>UTF-8)，但 Windows " `A`" API[不支持 UTF-8](https://stackoverflow.com/questions/166503/utf-8-in-windows)，因此您必须转换为 UTF-16 并调用`W`反正版本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T07:51:13.920

我相信最初问题的要点是“我应该用“#define _UNICODE”编译我所有的 Windows 应用程序吗？如果我不这样做有什么不好？

我最初的回答是“是的，你应该这样做。我们已经移动了 8 位 ASCII，并且 '_UNICODE' 是任何现代 Windows 代码的合理默认值。”

对于 Windows，我仍然认为这是相当不错的建议。但是我已经删除了我原来的回复。因为直到我重新阅读自己的链接时我才意识到“UTF-16 是一种相当可悲的事态”（正如 Matteo Italia 雄辩地指​​出的那样）。

例如：

> [http://utf8everywhere.org/](http://utf8everywhere.org/)
> 
> Microsoft ... 错误地将“Unicode”和“widechar”用作“UCS-2”和“UTF-16”的同义词。此外，由于 UTF-8 不能设置为窄字符串 WinAPI 的编码，因此必须使用 _UNICODE 而不是 _MBCS 编译她的代码。Windows C++ 程序员受过教育，Unicode 必须使用“widechars”来完成。由于这种混乱，他们现在是最困惑的人之一，关于什么是对文本做正确的事情。

我衷心推荐这三个链接：

*   [每个软件开发人员都应该知道的关于 Unicode 的绝对最低要求](http://www.joelonsoftware.com/articles/Unicode.html)

*   [UTF-16 应该被认为是有害的吗？](https://softwareengineering.stackexchange.com/questions/102205/should-utf-16-be-considered-harmful)

*   [UTF-8 无处不在](http://utf8everywhere.org/)

恕我直言...

# php - !class_exists 在 magento 中不起作用？

> ID：14132262
> 
> 赞同：2
> 
> 时间：2013-01-03T02:27:46.013
> 
> 标签：php, magento

当我运行 test.php 时，为什么总是在 !class_exists 行出错？

这是test.php：

```
<?php    //test.php
    require_once './app/Mage.php';
    Mage::app()->setCurrentStore(0);
    Mage::setIsDeveloperMode(true);

    require_once("test-class.php");
?> 
```

这是 test-class.php：

```
<?php    //test-class.php
        if (!class_exists("AClass")) {
            class AClass {
                public function AnAction() {
                   return 123;
                }
            }
         }
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T02:57:18.357

因为 Magento 引导*app/Mage.php* [注册了一个 autoloader](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/Mage.php#L53)，所以您对`class_exists()`triggers 的调用会尝试为这个类加载一个类定义。可以通过传递来更改此行为`false`：

```
<?php    //test-class.php
    if (!class_exists("AClass",false)) {
        class AClass {
            public function AnAction() {
               return 123;
            }
        }
     }
?> 
```

此外，引导程序设置包含路径参数以供自动加载器使用：

```
$paths[] = BP . DS . 'app' . DS . 'code' . DS . 'local';
$paths[] = BP . DS . 'app' . DS . 'code' . DS . 'community';
$paths[] = BP . DS . 'app' . DS . 'code' . DS . 'core';
$paths[] = BP . DS . 'lib'; 
```

将您的类定义放在上述任何目录中将允许在需要定义时对其进行定义。

# objective-c - mouseDown 在 NSTextField 上没有正确触发

> ID：14132264
> 
> 赞同：1
> 
> 时间：2013-01-03T02:27:55.517
> 
> 标签：objective-c, mouseevent

我尝试在此处实施此帖子中发布的第二个答案[。](https://stackoverflow.com/questions/684166/which-delegate-method-should-i-use-to-respond-to-clicks-on-an-nstextfield#684166)我有作为提出问题的人的愿望，但是我`mouseDown`没有工作/注册。这就是我所拥有的。

1.  AppDelegate.h
2.  AppDelegate.m
3.  MouseDownTextField.h
4.  MouseDownTextField.m

并有相关内容：

1.  AppDelegate.h

    ```
    #import <Cocoa/Cocoa.h>
    #import "MouseDownTextField.h"
    @interface AppDelegate : NSObject <MouseDownTextFieldDelegate> {
    NSWindow *window;
    IBOutlet NSMenu *statusMenu;
    NSStatusItem *statusItem;
    NSMutableArray *selector;
    NSMutableArray *display;
    NSTimer *timer;
    MouseDownTextField *quoteHolder; }
    @property IBOutlet MouseDownTextField *quoteHolder;
    @end 
    ```

2.  AppDelegate.m

    ```
    - (void)displayString:(NSString *)title {
      NSRect frame = NSMakeRect(50, 0, 200, 17);
      quoteHolder = [[MouseDownTextField alloc] initWithFrame:frame];
      [[self quoteHolder] setDelegate:self];
      [quoteHolder setStringValue:title];
      [quoteHolder setTextColor:[NSColor blueColor]];
      [test addSubview:quoteHolder];
      [statusItem setView:test]; }
      -(void)mouseDownTextFieldClicked:(MouseDownTextField *)textField {
         NSLog(@"Clicked");} 
    ```

3.  MouseDownTextField.h

    ```
    #import <Appkit/Appkit.h>
    @class MouseDownTextField;

    @protocol MouseDownTextFieldDelegate <NSTextFieldDelegate>
    -(void) mouseDownTextFieldClicked:(MouseDownTextField *)textField;
    @end

    @interface MouseDownTextField: NSTextField {
    }
    @property(assign) id<MouseDownTextFieldDelegate> delegate;
    @end 
    ```

4.  MouseDownTextField.m

    ```
    #import "MouseDownTextField.h"
    @implementation MouseDownTextField
     -(void)mouseDown:(NSEvent *)event {
    [self.delegate mouseDownTextFieldClicked:self]; }
    -(void)setDelegate:(id<MouseDownTextFieldDelegate>)delegate {
    [super setDelegate:delegate]; }
    -(id)delegate {
    return [super delegate]; }
    @end 
    ```

关于可能是错的或我做错了什么的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T02:46:03.577

您正在 IB 中创建 quoteHolder，您应该删除以下代码行，您应该没问题。

```
quoteHolder = [[MouseDownTextField alloc] initWithFrame:frame]; 
```

重新分配的结果`NSTextField`是您单击的那个不再是在代理中注册的那个。也不需要添加它`subview`，它已经添加到 IB 中的视图层次结构中。

此外，请确保在 IB 中，在 Accessibility 下，为`NSTextField`.

至于后续问题，你怎么会有多个？

如果您`NSTextField`在 IB 中添加多个实例，每个实例都将被引用为 @property，就像您对 quoteHolder 所做的那样。链接是在 IB 中完成的，就像这个[链接的答案](https://stackoverflow.com/a/3826990/1354100)一样。

这些都可以有相同的代表。按下时`mouseDownTextFieldClicked:`，您可以查询`NSTextField`一个唯一的 ID，该 ID 也可以在 IB 中分配。希望这可以帮助。

# javascript - 如果我投入 但随后删除的内容 onLoad()，浏览器会加载图片吗？

> ID：14132271
> 
> 赞同：4
> 
> 时间：2013-01-03T02:28:36.420
> 
> 标签：javascript, html

运行以下代码，浏览器是否会`bar.png`从服务器获取（无论您是否看到）？

```
<html>
<body onLoad=myLoadFunc()>
<script>
function myLoadFunc() { document.getElementById("foo").innerHTML = ""; }
</script>
<div id="foo"> <img src="bar.png"/> </div>
</body>
</html> 
```

顺便说一句，目的是在不运行脚本的浏览器上显示 bar.png。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T02:31:08.327

答案完全是偶然的。浏览器当然*可以*在运行脚本之前开始加载图像——我想它经常会这样——但无论哪种方式都不能保证。

考虑使用`<noscript>`标签。

# html - html/css 带有多个点的元素是什么意思

> ID：14132276
> 
> 赞同：1
> 
> 时间：2013-01-03T02:30:06.483
> 
> 标签：html, css

如果我想应用多个 css 类，我会使用`<div class = "c1 c2 c2">`
我正在查看一些代码。是什么`<div class = "c1.c2.c3">`意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T02:32:33.133

您拥有的代码是正确的，但是您不需要第二个`<div>`元素 ( `<div class='c1.c2.c3'></div>`) 中的点。（*除非您实际上有一个明确命名为 c1.c2.c3 的元素，这可能会导致 CSS 样式声明出现一些问题，除非您转义前导斜杠*）

圆点指的是 CSS 样式规则，表示一个元素有多个类，或者在本例中为类 c1、c2 和 c3。

```
.c1.c2.c3
{
    //Styles an element that has classes c1, c2 and c3
} 

.c1.c2
{
    //Styles an element that has classes c1 and c2
} 
```

而使用间距，它细化了范围：

```
.c1 .c2 .c3
{
    //Styles an element that has class c3 within an element c2, 
    //within an element c1.
} 
```

**[两种情况的示例](http://jsfiddle.net/uxyef/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T02:36:47.103

`<div class = "c1.c2.c3">`就是它的样子：这个 div 元素的类名是`c1.c2.c3`. 它的 CSS 选择器如下所示：

```
.c1\.c2\.c3 {
    // styles here
} 
```

这与 的 CSS 选择器非常不同`<div class="c1 c2 c3">`，看起来像这样：

```
.c1.c2.c3 {
    // styles here
} 
```

# regex - reg ex 从右到左

> ID：14132277
> 
> 赞同：1
> 
> 时间：2013-01-03T02:30:38.540
> 
> 标签：regex

把这个字符串

```
THX1138: The Movie 
```

通过这个正则表达式

```
(.)(.)(\d)(\d+) 
```

匹配这个

```
HX1138 
```

通过从比赛中省略 T，它似乎是从右到左移动，但我认为默认是从左到右。例如，人们提出了一些问题，询问如何使正则表达式从右向左移动，所以我认为默认值是从左到右。通过添加另一个 (.)

```
(.)(.)(.)(\d)(\d+) 
```

它匹配

```
THX1138 
```

确认从右到左的观察。那么，如果有多个捕获组，是否有规则在第一次捕获后从右向左移动？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T02:37:08.260

让我们分解它们

1.  `(.)(.)(\d)(\d+)`

    `(.)`: 匹配任何单个字符
    `(.)`: 匹配任何单个字符
    `(\d)`: 匹配任何单个数字
    `(\d+)`: 匹配一个或多个数字。

    在您的字符串`THX1138: The Movie`中，从左到右移动，前三个字符*无法*匹配，因为`X`不是数字。所以它向前移动一个字符，并找到一个匹配：`H`并`X`匹配“任何单个字符”的要求，`1`匹配“任何单个数字”，并且“138”被slurped到最后`\d+`。

2.  `(.)(.)(.)(\d)(\d+)`

    `(.)`: 匹配任何单个字符
    `(.)`: 匹配任何单个字符
    `(.)`: 匹配任何单个字符
    `(\d)`: 匹配任何单个数字
    `(\d+)`: 匹配一个或多个数字。

    现在，当它从左到右遍历您的字符串时，它会立即找到一个匹配项，因为`T`,`H`和`X`都匹配“任何单个字符”，并且再次`1`匹配“任何单个数字”，并被`138`吞入最终的`\d+`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T02:38:09.893

问题是，从捕获与否开始`THX1138`无法匹配。正则表达式引擎不会导致匹配失败，而是返回两个匹配的唯一匹配项，后跟至少两位数字，也就是`..\d\d+``T``HX1138`

# ssis - 模糊查找 SSIS 后更新

> ID：14132282
> 
> 赞同：0
> 
> 时间：2013-01-03T02:30:45.670
> 
> 标签：ssis

我有这个问题要问你。我正在研究这个包。我正在使用模糊查找。我有一个条件来区分基于机密性和相似性的匹配和不匹配以及**我想更新参考表**的不匹配。我不能使用 exec sql 任务..还有其他方法可以使用 ssis 吗？多谢你们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T22:57:16.970

您想要的是[OLEDB 命令](http://msdn.microsoft.com/en-us/library/ms141138.aspx)转换组件。它将为流经它的每一行运行一个 SQL 命令。

获取您的查找不匹配输出，将其映射到一个 OLEDB 命令，该命令根据查找输出的值更新您的参考表。

将 OLEDB 命令的 SQLCommand 设置为“UPDATE ReferenceTable set NoMatch=1 Where Value = ?” 或者您想运行任何不匹配的查询......您明白了。

# java - Java 方法：@Override 与抽象

> ID：14132285
> 
> 赞同：1
> 
> 时间：2013-01-03T02:30:59.910
> 
> 标签：java, oop

使用以下样式之一从抽象父类声明方法的优点/缺点是什么：

**选项1：**

家长班：

```
protected Object retrieve(String id, Object model){
        return null;
} 
```

儿童班：

```
@Override
public String retrieve(Object model) {
    if (model instanceof Car)
        // ... somehow get id ...
        return getInfo(id, (Car)model);
    return null;
} 
```

或者...

**选项 2：**

家长班：

```
protected abstract Object retrieve(String id, Object model); 
```

儿童班：

```
public String retrieve(String id, Object model) {
    if (model instanceof Car)
        return getInfo(id, (Car)model);
    return null;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T02:32:54.017

**使用抽象类，可以保证子类将覆盖抽象方法（如果有的话）（或者本身是抽象的）。它们也不能被实例化，这很重要，因为它们缺少功能（抽象方法）。**

另请参阅[http://wiki.answers.com/Q/Use_of_abstract_class_in_java](http://wiki.answers.com/Q/Use_of_abstract_class_in_java)：

> 抽象类类似于接口。你不能实例化它们，但你可以扩展它们。任何扩展抽象类的类都必须提供抽象方法的实现。因此，这些类可以用作可能需要一些通用功能的类似类的骨架。这样的功能也可以嵌入到这些类中。与接口不同，抽象类也可以有方法代码。所以它们非常有用。

这也可能有帮助：[https ://softwareengineering.stackexchange.com/questions/96947/why-should-i-declare-a-class-as-an-abstract-class](https://softwareengineering.stackexchange.com/questions/96947/why-should-i-declare-a-class-as-an-abstract-class)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T02:32:56.173

在我看来，**只有在所有子类都不会实现此功能时才需要第一种样式**（认为用接口可能会更好地表达）。如果它是必要的功能，**说抽象更清楚**，**更不容易出错**，因为编译器会唠叨你去实现它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T02:42:59.850

你在这里混合了苹果和橙子，可能还有一点：

*   `@Override`是编译时 ( `@Retention(value=SOURCE)`) 方法级 ( `@Target(value=METHOD)`) 注释，编译器使用它来检查给定方法是否：
    *   从`interface`（注意：JDK 1.6+）实现方法，或
    *   从一个类中实现一个`abstract`方法`abstract`，或者
    *   覆盖父类的非`final`方法（**无论该父类是否`abstract`）**；
*   `abstract`是可以在类级别或方法级别声明 的*语言关键字：*
    *   如果在类级别，这意味着该类不能直接实例化，因此您*必须*将其子类化（但是，这样的`abstract`类*可以*`static`承载返回自身子类的工厂方法）；
    *   如果在方法级别，该方法只有一个原型（见下文）并且子类*必须*实现该方法；

`abstract`请注意，如果类本身不是，则将方法声明为是非法的`abstract`。

另请注意，这是可能的：

```
public abstract class MustHaveToString
{
    // .toString() is implemented in Object, here we FORCE children of that class
    // to re-implement it. As the method is abstract, we only declare its 
    // prototype (its return type and method arguments, in this case, none).
    // As the method originates from one of our parents (Object), 
    // we can also @Override it!
    @Override
    public abstract String toString();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-03T02:54:10.607

首先，您的选项“1”是方法重载的一个示例。其次，假设您的意思是方法覆盖，在选项“1”中，您始终可以从覆盖的方法中调用“super.method”。这在技术上在选项“2”中是不允许的。因此，这两种技术没有“优点”或缺点。

更接近“选项 2”（不声明“抽象”）的方法如下：

```
public abstract class Parent {
  protected Object retrieve(String id, Object model) {
    throw new UnsupportedOperationException(...);
  }
} 
```

# python - 输入“python c:\Python27\Scripts\django-admin.py startproject mysite”的更短方式

> ID：14132288
> 
> 赞同：0
> 
> 时间：2013-01-03T02:31:09.367
> 
> 标签：python, django

是否有更短的输入“python c:\Python27\Scripts\django-admin.py startproject mysite”的方法？我的猜测是将它添加到某种路径中，但我不完全确定哪条路径或如何实际执行它。

我正在运行 Windows 7。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T02:33:22.677

看看[如何安装 Django](https://docs.djangoproject.com/en/dev/topics/install/)：

> 在 Windows 上，您可能需要调整`PATH`环境变量以包含 Python 可执行文件和其他脚本的路径。例如，如果您的 Python 安装在 中`C:\Python27\`，则需要将以下路径添加到`PATH`：
> 
> ```
> C:\Python27\;C:\Python27\Scripts; 
> ```

# php - CodeIgniter 将多个数组从控制器传递到视图

> ID：14132290
> 
> 赞同：1
> 
> 时间：2013-01-03T02:31:26.050
> 
> 标签：php, codeigniter, undefined

> **可能重复：**
> [PHP：“注意：未定义的变量”和“注意：未定义的索引”</a>](https://stackoverflow.com/questions/4261133/php-notice-undefined-variable-and-notice-undefined-index)
> 
> [](https://stackoverflow.com/questions/4261133/php-notice-undefined-variable-and-notice-undefined-index)

 [我正在尝试将会话数据和数据库查询都传递给 Codeigniter 中的视图。我的视图文件中出现错误：“消息：未定义的变量：数据”

问题在于 $idea 变量。变量注册一个未定义的错误。

控制器：

```
public function members() {

    if($this->session->userdata('is_logged_in')){
        $session = $this->session->all_userdata();
        $facebook_id = $data['id']; 

        $this->load->model('idea'); 
        $idea = $this->idea->get_idea($facebook_id); 

        //merge the two arrays to get data variable
        $data = $session + $idea; 
        $this->load->view('members', $data); 
    } else {
        redirect('main/login'); 
    }
} 
```

模型：

```
public function get_idea($facebook_id) {
    $data = array(
        'id' => '', 
        'idea' => '', 
        'facebook_id' => $facebook_id
    );

    $query = $this->db->get('idea', $facebook_id); 

    return $query->result_array(); 

} 
```](https://stackoverflow.com/questions/4261133/php-notice-undefined-variable-and-notice-undefined-index) 

[以下是我使用的一些资源：
-](https://stackoverflow.com/questions/4261133/php-notice-undefined-variable-and-notice-undefined-index)[使用 Code Igniter 控制器和视图创建 foreach 循环](https://stackoverflow.com/questions/3041616/creating-foreach-loops-using-code-igniter-controller-and-view)
- [codeigniter：将数组从控制器传递到视图](https://stackoverflow.com/questions/8756207/codeigniter-pass-array-from-controller-to-view)
- [http://blog.mattheufarmer.com/2010/building-a-website-in -codeigniter-part-ii-getting-data-and-using-it/](http://blog.mattheufarmer.com/2010/building-a-website-in-codeigniter-part-ii-getting-data-and-using-it/)

感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T02:34:10.277

```
$data = $session + $idea; 
```

不就是不。这不是你合并数组的方式。

一种更清洁、更周到的方法来做你想做的事：

```
$data = array( $session, $idea ); 
```

否则，

```
$data = array_merge($session, $idea); 
```

编辑：

您应该阅读此[http://ellislab.com/codeigniter/user-guide/general/views.html](http://ellislab.com/codeigniter/user-guide/general/views.html)

无论如何，除非您正在做一些完全愚蠢的事情，否则您应该能够做到这一点：

```
$data = array( 'sesssion' => $sesssion, 'idea' => $idea ); 
```

并将其传递给您的视图。然后在你看来，你可以用 $session 调用 session，用 $idea 调用 idea。为了显示：

```
$data = array('name' => 'josh', 'sex' => 'often');
$this->load->view('welcome', $data); 
```

然后在我看来：

```
<? echo "$name has sex $sex"; // returns josh has sex often ?> 
```

在视图中，键成为变量，值由这些变量访问（它们是 $data 中的键）。您不调用 $data，而是调用密钥。

```
$data = array('key' => 'value'); 
```

如果您有任何其他问题，请告诉我。:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T02:42:44.470

你可以这样做-

```
public function members() {

    if($this->session->userdata('is_logged_in')){
        $data['session'] = $this->session->all_userdata();
        $facebook_id = $data['id']; 

        $this->load->model('idea'); 
        $data['idea'] = $this->idea->get_idea($facebook_id); 

        $this->load->view('members', $data); 
    } else {
        redirect('main/login'); 
    }
} 
```

# google-apps-script - 谷歌图表对象错误

> ID：14132295
> 
> 赞同：0
> 
> 时间：2013-01-03T02:31:53.240
> 
> 标签：google-apps-script, google-sheets

我正在尝试创建一个简单电子表格的图形表示，但我收到一条错误消息，提示“没有对象类型与列类型匹配”。

```
function doGet() {

  var ss = SpreadsheetApp.openById("xyz");

  var data = ss.getDataRange();

  var segFilter = Charts.newStringFilter().setFilterColumnIndex(6).build();
  var execFilter = Charts.newCategoryFilter().setFilterColumnIndex(7).build();

  var tableChart = Charts.newTableChart()
    .setDataViewDefinition(Charts.newDataViewDefinition().setColumns([1,2,3,4,5,6,7,8,9,10,11,12,13]))
    .build();

  var dashboard = Charts.newDashboardPanel().setDataTable(data)
    .bind([segFilter, execFilter], [tableChart])
    .build();

  var app = UiApp.createApplication();
  var filterPanel = app.createVerticalPanel();
  var chartPanel = app.createHorizontalPanel();
  filterPanel.add(segFilter).add(execFilter).setSpacing(10);
  chartPanel.add(tableChart).setSpacing(10);

  dashboard.add(app.createVerticalPanel().add(filterPanel).add(chartPanel));
  app.add(dashboard);
  return app;
} 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T02:53:22.153

来自 Google 可视化 API 参考：

> 为每一列分配一个数据类型...每一列中的所有数据必须具有相同的数据类型。

这里的问题是数据表中的前导空白。当您创建 a`DataTable`时，`type`从第一行数据推测列的 ，然后假定所有后续行都是相同类型。在您的电子表格中，G2 为空白，这导致列类型为`string`。但是，G 列中的其余值属于 类型`number`。

![原始电子表格的插图](../Images/1d7409e9f10c3cfa7bc3516cc957eb0d.png)

在此示例中，删除空白行 2 后仍然会出现问题。看到 A3 是类型字符串，而 A4 是类型编号 - 任何尝试使用此范围的可视化都会抱怨类型不匹配。

因此，请确保您没有以空白值开始任何列，并确保您的类型在列内是一致的，您应该没问题。

* * *

评论中的其他提示：

*   您可以使用电子表格中的格式控件或以编程方式使用`setNumberFormat("@STRING@")`. 这在您不打算将其可视化为数字的列中会很好 - 例如，您的列 L 包含文本和数字的混合。但是，如果您正在考虑要绘制图表的列（例如在折线图中），那么转换为纯文本将是一个坏主意 - 它会阻止您执行可视化。

# c++ - 使用多个画布时，FTGL 纹理字体仅显示黑框

> ID：14132306
> 
> 赞同：4
> 
> 时间：2013-01-03T02:33:36.793
> 
> 标签：c++, opengl, ftgl

我在 FTGL 中使用纹理字体将字体渲染到多个画布中，作为轴等的标签。我的第一个情节很好。然而，所有后续的画布都将我的纹理字体呈现为简单的黑色方块。我还注意到某些数字不会显示在实际渲染的画布上。“中心时间”应显示 8.3956，但改为显示以下内容。

![在此处输入图像描述](../Images/e0dc6ac4e1bd5c79b62d95f7d50e497c.png)

字体渲染如下：

```
 glPolygonMode(GL_FRONT_AND_BACK, GL_FILL);
    PushGLMatrices();
            GrSetPixelProjection();
            glTranslatef(pixelX, pixelY, 0.0);
            glRotatef(ang, 0.0, 0.0, 1.0);
            savedFont->Render(label);
    PopGLMatrices(); 
```

在哪里

```
 void PushGLMatrices()
    {
            glMatrixMode(GL_PROJECTION);
            glPushMatrix();
            glMatrixMode(GL_MODELVIEW);
            glPushMatrix();
    }

void PopGLMatrices()
{
    glMatrixMode(GL_PROJECTION);
    glPopMatrix();
    glMatrixMode(GL_MODELVIEW);
    glPopMatrix();
} 
```

我尝试了一些方法，例如清除颜色和深度位，以及 glEnable(GL_TEXTURE_2D); glDisable(GL_DEPTH_TEST); 但这似乎没有帮助。出于某种原因，如果我将 FTTextureFont::FaceSize(int) 添加到我的一个返回文本宽度的例程中，一切都会正确显示（尽管速度很慢）。从 FTGL 源代码来看，除了 glDeleteTexture() 调用之外，FaceSize() 似乎不会操纵 openGL 参数，所以我有点困惑为什么会这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T11:53:46.940

当您绘制后续图时，似乎禁用了 alpha 混合。在渲染文本之前，请确保已启用它：

```
glEnable(GL_BLEND); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T13:22:11.277

它可能在以下情况下发生：

1.  opengl 渲染的线程和 ftgl::Render 的线程不一样。
2.  进入全屏模式（需要重置并重新加载所有纹理）。
3.  不正确的 Z 位置（顺序）。首先渲染字体然后图像或第一个图像然后字体。
4.  glDeleteTexture() 可以做到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-28T09:59:21.093

我有一个类似的问题，我通过添加这个*来解决它：*

```
_font->FaceSize(fontsize); 
```

更新要渲染的文本时。

此函数调用*删除旧纹理*和*新文本将显示正常*。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-14T19:04:33.390

IIRC，OpenGL 纹理是在一个上下文中创建的，每个窗口都有一个单独的上下文。由于 FTGL 不使用共享上下文的概念（我在某处读到有一种方法可以做到这一点），最简单的方法是为每个窗口实例化一个新的 FTTextureFont - 并在设置每个窗口后加载每个 FaceSize（通过调用例如，Freeglut 上的 glutSetWindow(id)。这将一次加载所有窗口/上下文的纹理。

FTTextureFont 的唯一问题是每次更改 FaceSize 时，它​​都会使用 FreeType 重新加载所有字形并再次生成纹理。这是非常缓慢的。有人应该在某个时候解决这个问题。我通过创建一个 FTTextureFont PER 窗口 PER 大小来解决这个问题，我需要在我的应用程序中使用它。

# css - iframe 样式高度问题

> ID：14132308
> 
> 赞同：0
> 
> 时间：2013-01-03T02:34:07.050
> 
> 标签：css, iframe

我有一个带有以下 iframe 代码的网页。

```
<div style="height: 300px;">
<iframe src="http://www.journaldev.com/wp-content/uploads/jquery/jquery-add.html" 
style="width: 300px;height: 300px;text-align:center;"></iframe>
</div> 
```

问题是当页面加载时，iframe 大小被转换为 304x154，我不确定它为什么会发生。我知道由于边框而添加了 4px，但不确定为什么高度会更改为 150px。我希望它是我在样式中指定的高度。

我的页面网址：[http ://www.journaldev.com/1028/jquery-add-selector-add-element-and-add-html-example](http://www.journaldev.com/1028/jquery-add-selector-add-element-and-add-html-example)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T02:40:13.927

```
<iframe src="http://www.journaldev.com/wp-content/uploads/jquery/jquery-add.html" <br />
style="width: 300px;height: 300px;text-align:center;"></iframe> 
```

你在 iframe 中间使用 BR 标签而不关闭它！

将其更改为

```
<iframe src="http://www.journaldev.com/wp-content/uploads/jquery/jquery-add.html"
style="width: 300px;height: 300px;text-align:center;"></iframe> 
```

作为说明：

你不需要在你的html源文件中使用br标签，它会在解析网页后影响

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T02:37:19.653

不确定是否`<div>`需要您的外部。

```
<div style="height: 300px;">
<iframe src="http://www.journaldev.com/wp-content/uploads/jquery/jquery-add.html" width="300" height="300" frameborder="0"></iframe>
</div> 
```

# android - 使用 android 从 lighttpd 服务器下载文件会显示 Untitled and download failed

> ID：14132315
> 
> 赞同：1
> 
> 时间：2013-01-03T02:35:15.467
> 
> 标签：android, linux, lighttpd

我在 linux 中有 lighttpd 下载服务器。我使用android内置浏览器下载文件。试过zip、pdf、exe文件类型无法下载。将显示无标题和下载失败。我该如何解决这个问题？

谢谢大家！

# php - 无法构建 xdebug

> ID：14132319
> 
> 赞同：5
> 
> 时间：2013-01-03T02:35:53.927
> 
> 标签：php, build, xdebug

我正在尝试在我的 Mac 上使用 MAMP 安装 xdebug。我下载`xdebug-2.2.1.tgz`并按照 xdebug 向导运行 phpize。我跑了，`make`然后我被告知`/Applications/MAMP/bin/php/php5.4.4/include/php/Zend/*`. 所以，我用谷歌搜索，我看到我必须下载 php5.4.4，然后将一些文件推送到我在`/Applications/MAMP/bin/php/php5.4.4/include/php`. 但是当我尝试再次构建时，我收到了以下消息：

```
/Applications/MAMP/bin/php/php5.4.4/include/php/Zend/zend.h:51:11: fatal error: 
      'zend_config.h' file not found
# include <zend_config.h> 
```

我该怎么办 ？我在哪里可以得到这个文件？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-03T11:07:34.387

我终于设法安装了xdebug。事实上，我必须安装 Xcode 开发工具，然后从中复制文件 `/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.7.sdk/usr/include/php into /Applications/MAMP/bin/php/php5.4.4/include`，然后它就可以工作了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-27T11:19:27.880

确实，我想也许make命令找不到头文件。所以我尝试更改makefile：

```
INCLUDES = -I/usr/include/php -I/usr/include/php/main -I/usr/include/php/TSRM -I/usr/include/php/Zend -I/usr/include/php/ext -I/usr/include/php/ext/date/lib 
```

到

```
INCLUDES = -I{Your Path to php_dir}/php -I{Your Path to php_dir}/php/main -I{Your Path to php_dir}/php/TSRM -I{Your Path to php_dir}/php/Zend -I{Your Path to php_dir}/php/ext -I{Your Path to php_dir}/php/ext/date/lib 
```

您可以参考这个问题来更改 makefile [描述 makefile 中的头文件位置](https://stackoverflow.com/questions/490803/describing-header-file-locations-in-makefile)

您可以使用此命令查找 php.h

```
sudo find / -name php.h 
```

如果你没有 php 头文件，你可以安装 xcode。

做完这些，现在一切都准备好了，尽情享受吧！

# php - 外部数据库和 Jquery 移动？

> ID：14132320
> 
> 赞同：-4
> 
> 时间：2013-01-03T02:36:05.090
> 
> 标签：php, sql, ajax, cordova, jquery-mobile

我正在用 Jquery mobile 编写一个应用程序，它是一个简单的猜谜游戏，是真是假。我希望能够定期添加/删除数据库以保持游戏新鲜，所以我想使用应用程序引用的外部数据库。完成后，我想利用电话间隙将应用程序投放市场。

对此的最佳做法是什么？我担心通过电话间隙运行程序时可能出现的问题，所以我想知道您的建议。如果我使用 PHP Ajax，做一些 db 的工作比其他的更好。

你的想法是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T12:44:20.137

我认为您需要的一切都在[Phonegap Storage Documentation](http://docs.phonegap.com/en/2.1.0/cordova_storage_storage.md.html#Storage)上。

# css - 似乎无法将我的链接集中在适当的 div 中

> ID：14132329
> 
> 赞同：-1
> 
> 时间：2013-01-03T02:37:35.387
> 
> 标签：css

我正在努力使这些标题链接在横幅中居中，但不知道为什么它们会卡在左边一点...

我在下面包含了代码和 JSFiddle 的链接：http: [//jsfiddle.net/bUNpX/](http://jsfiddle.net/bUNpX/)

这是HTML

```
<div id="container">

<div id="services">

            <div id="service1" class="serviceNavLink">
                <div id="wraparound">
                    <a href="#">Marketing Strategy</a>
                </div>
                <p></p>
            </div>

            <div id="service2" class="serviceNavLink">
                <div id="wraparound">
                    <a href="#">Outsourced Marketing</a>
                </div>
                <p></p>
            </div>                

            <div id="service3" class="serviceNavLink">
                <div id="wraparound">
                    <a href="#">Market Research</a>
                </div>
                <p></p>            
            </div> 
</div> 
```

这是CSS

```
#container {
width:500px;
margin-left: auto;
margin-right: auto;
}

#services {
/* background-color: #ff0000; */ /* DEBUG ONLY */
overflow:auto;
width:100%;
margin-left: auto;
margin-right: auto;
}

#wraparound {
position:relative;
padding:10px 30px;
margin:15px -10px 0 -10px;
border:0.5px solid #6f3368;
background:#902684;
color:#6A6340;
box-shadow: 0 4px 4px;
}

 #wraparound:before,
 #wraparound:after {
 content:" ";
 border-top:10px solid #452e43;
 position:absolute;
 bottom:-10px;
 } 

 #wraparound:before {
 border-left:10px solid transparent;
 left:0;
 }

 #wraparound:after {
 border-right:10px solid transparent;
 right:0;
 }

#service1 {
float:left;
width:50%;
margin-left:15px;
-webkit-border-radius: 10px;
border-radius: 10px;
-webkit-box-shadow:  -2px -3px 10px 1px rgba(5, 0, 0, .5);
box-shadow:  -2px -3px 10px 1px rgba(5, 0, 0, .5);
}

#service2{
/* background-color: blue; */ /* DEBUG ONLY */
float:left;
width:50%;
-webkit-border-radius: 10px;
border-radius: 10px;
-webkit-box-shadow:  -2px -3px 10px 1px rgba(5, 0, 0, .5);
box-shadow:  -2px -3px 10px 1px rgba(5, 0, 0, .5);
}

#service3{
/* background-color: blue; */ /* DEBUG ONLY */
float:left;
width:50%;
-webkit-border-radius: 10px;
border-radius: 10px;
-webkit-box-shadow:  -2px -3px 10px 1px rgba(5, 0, 0, .5);
box-shadow:  -2px -3px 10px 1px rgba(5, 0, 0, .5);
}

.serviceNavLink{
margin: 16px;
}

#services a:hover {
color: #FFF;
}

#services a {
margin: 0 1em 0 1em; /*top, right, bottom, left*/
text-decoration: none;
color:#FFF;
}

#services a:hover {
color: #000;
}

#services p {
font-size: 14px;
}​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T02:40:55.737

添加一个 text-align: center 为我工作。

```
#services {
/* background-color: #ff0000; */ /* DEBUG ONLY */
overflow:auto;
width:100%;
margin-left: auto;
margin-right: auto;
text-align: center;
} 
```

[http://jsfiddle.net/bUNpX/1/](http://jsfiddle.net/bUNpX/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T02:41:29.620

将以下代码添加到您的环绕 id

```
text-align: center 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T02:49:15.237

尝试`text-align:center`

```
#wraparound {
        position:relative;
        padding:10px 30px;
        margin:15px -10px 0 -10px;
        border:0.5px solid #6f3368;
        background:#902684;
        color:#6A6340;
        box-shadow: 0 4px 4px;
        text-align:center;
} 
```

示例：http: [//jsfiddle.net/bUNpX/2/](http://jsfiddle.net/bUNpX/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T14:52:13.630

添加：文本对齐：中心；到#wraparound 工作。

见下文

```
#wraparound {
    position:relative;
    padding:10px 30px;
    margin:15px -10px 0 -10px;
    border:0.5px solid #6f3368;
    background:#902684;
    color:#6A6340;
    box-shadow: 0 4px 4px;
    text-align:center;
    } 
```

# php - 通过 __get 访问 IDE 的文档变量

> ID：14132333
> 
> 赞同：2
> 
> 时间：2013-01-03T02:38:41.613
> 
> 标签：php, ide

`__get`有没有办法以IDE 可以识别它们的存在和返回类型的方式记录通过魔术方法访问的变量？

例如，我想公开`done`和`helper`通过，`__get`但也希望像 PHPStorm 这样的 IDE 能够知道它们的存在：

```
class Thing
{
    /** @var bool */
    private $done;

    /** @var HelperThing */
    private $helper;

    __get( $name )
    {
        if ( $name === "done" )
            return $done;

        if ( $name === "helper" )
            return $helper;
    }    
} 
```

我试图避免使用 psudeo-getter 方法，`$thing->getHelper()`因为我更喜欢`$thing->helper->someOtherMethod()`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T02:49:43.473

您可以将`@property`标签用于魔术属性和`@method`魔术方法文档。这些由 PHPStorm 支持。有关更多信息，请参阅[@property](http://www.phpdoc.org/docs/latest/for-users/phpdoc/tags/property.html)和[@method](http://www.phpdoc.org/docs/latest/for-users/phpdoc/tags/method.html)的文档。

# ruby - 在终端窗口上使用 ruby rake 在测试套件中运行一些脚本

> ID：14132336
> 
> 赞同：0
> 
> 时间：2013-01-03T02:39:56.270
> 
> 标签：ruby, selenium, webdriver, rake

目前我正在使用 ruby​​ rake 来运行我在我的测试套件中拥有的所有 selenium ruby​​ webdriver 脚本，所以我只需要在“使用 Ruby 启动命令提示符”窗口中运行命令“rake”，然后所有脚本都会运行。

但是，现在我只想在我的测试套件中运行一些脚本（不是所有脚本）。那么，我该如何完成这件事呢？我希望在 Ruby 终端窗口中输入类似：rake test1.rb test2.rb，然后系统将只运行我拥有的两个脚本。

```
task :default do
FileList['test*.rb'].each { |file|
system("ruby #{file} > #{directory_name}/#{file}.out")}
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T11:35:13.363

将要运行的测试文件作为 rake 任务的参数传递。如何传递参数：[如何将命令行参数传递给 rake 任务](https://stackoverflow.com/questions/825748/how-do-i-pass-command-line-arguments-to-a-rake-task)

# python - 使用 Web.py 的 HTTP POST 响应失败

> ID：14132343
> 
> 赞同：2
> 
> 时间：2013-01-03T02:40:16.970
> 
> 标签：python, http, wireshark, web.py

我想不用说我对以下内容感到困惑。这是我在此处查询的虚假延续：[HTTP 303 (SeeOther): GET Works, POST Fails](https://stackoverflow.com/questions/14024855/http-303-seeother-get-works-post-fails)我发布了另一个问题，因为另一个问题主要处理 HTTP 重定向，并且没有解决我现在认为的潜在问题.

我有一个非常简单的 web.py 类：

```
class user:
        def GET(self, id):
                """List a single user"""
                web.header('Cache-control', 'no-cache')
                return 'wtf!!'

        def POST(self, id):
                """Save an updated user"""
                web.header('Cache-control', 'no-cache')
                return 'wtf!!' 
```

如果我从这个资源中获取，我会收到我的愚蠢简单的 'wtf!!' 文本作为回应。

如果我发布到这个资源，我会根据请求的来源得到不同的结果。

*   **谷歌浏览器：**完全失败。使用开发者工具网络分析器，我可以看到请求出去了。大约 15 秒后，它说它失败了。
*   **IE9：**从技术上讲，它有效。等待约 15 秒后，预期的响应总会到达。
*   **PuTTY/Telnet：**完美运行。正如预期的那样，响应几乎是即时出现的。

考虑到 Web 浏览器可能添加了一些破坏 web.py 的标头，我决定打开 Wireshark 进行调查。我发现客户总是及时收到回复。但是，我确实注意到 Wireshark 没有将 POST 请求的响应识别为 HTTP（这是它对 GET 请求的响应会做的事情）。

**编辑：** 我一直在对此进行测试/故障排除，并且我有更多的发展。

GET 和 POST 响应都以“Transfer-encoding: chunked”的标题返回给客户端。这意味着它不会发送整个页面，而是会在它们准备好时发送点点滴滴。一般格式为：

```
200 OK, etc
{Headers}

5              # Num. of Chars in This Chunk (in hex)
Hello

200 OK, etc
{Headers}

0              # Signifies no more chunks to come 
```

我使用 Wireshark 来查找这些数据包。我注意到 GET 响应看起来应该如此，但 POST 响应似乎缺少最后一块。结果，连接保持打开状态，直到超时（因为它期望更多数据来自服务器）。

以下是涉及服务器端请求的内容。我不确定哪个负责“分块”数据。

*   阿帕奇
*   mod_cgi
*   扑通
*   网页.py
*   我的应用

**我现在的问题：**

哪个组件实际上“分块”了我的请求？

为什么无法发送最后一个块（仅适用于 POST 响应）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T10:30:35.893

我试图复制你的问题。一切正常。

班级：

```
class User:
    def GET(self, id):
        """List a single user"""
        web.header('Cache-control', 'no-cache')
        return 'GET' + str(id)

    def POST(self, id):
        """Save an updated user"""
        web.header('Cache-control', 'no-cache')
        raise web.seeother('/user/2') 
```

对于网址： `urls = ( r'/user/?(\d*)', "User", )`

当我做 POST（使用 FF）时，这一切都有效。

您使用任何中间件吗？

# c++ - C++ Unity 构建库文件，LNK2005

> ID：14132346
> 
> 赞同：0
> 
> 时间：2013-01-03T02:40:26.940
> 
> 标签：c++, build, lnk2005

我是统一构建的新手。我一直在做一些研究，并从以下方面获得了很好的信息：

*   [http://buffered.io/posts/the-magic-of-unity-builds/](http://buffered.io/posts/the-magic-of-unity-builds/)
*   [http://oj.blackapache.net.s3.amazonaws.com/UnityBuilds.html](http://oj.blackapache.net.s3.amazonaws.com/UnityBuilds.html)

但是，现在我开始对我的一些项目进行更改，我有点困惑。

为简单起见，假设我的解决方案中只有 2 个项目。一个库项目（它创建一个 .lib 文件）和一个可执行项目。我们称它们为 LibProj 和 ExecProj。

这是每个项目的样子：

```
LibProj
>include
>>Client.hpp<br>
>>Driver.hpp<br>
>>Verbose.hpp

>source
>>Client.cpp<br>
>>Verbose.cpp

ExecProj
>source
>>MyMainFile.cpp<br>
  Verbose.cpp 
```

`Verbose.cpp`用于调试目的。它包装了 ostream，所以我没有使用`cout <<`，而是使用`verbose <<`. 这样做是为了控制何时向控制台显示详细输出。在我的版本变体中，所有详细输出都被跳过。

我在两个项目中都有一个副本的原因`Verbose.cpp`是我可以在我的 ExecProj 中获得详细的输出，而无需在调试中构建 LibProj。

`Driver.hpp`并`Client.cpp`使用`verbose <<`. `MyMainFile.cpp`调用它们中的函数。

不用说，使用正常的构建方式，一切正常。

现在问题...

我`Unity.cpp`在 LibProj 中创建。它的内容是：

```
#include "Client.cpp"
#include "Verbose.cpp" 
```

LibProj 构建得很好。但是，当我构建 ExecProj 时，它会在链接过程中中断：

```
LibProj.lib(Unity.obj) : error LNK2005: "public: void __thiscall VerboseMonitor::print(char const *,int)"
(?print@VerboseMonitor@@QAEXPBDH@Z) already defined in Verbose.obj
LibProj.lib(Unity.obj) : error LNK2005: "public: __thiscall VerboseStream::VerboseStream(void)" 
(??0VerboseStream@@QAE@XZ) already defined in Verbose.obj
C:\Users\\...\ExecProj.exe : fatal error
LNK1169: one or more multiply defined symbols found 
```

所以基本上，它抱怨是因为我们正在重新定义 lib 文件中已经存在的详细函数。

我的问题是，为什么单独编译文件时它可以工作，但它不适用于统一构建？

是什么让一个 .lib 文件与另一个不同？我的意思是，从技术上讲，这两种构建案例`LibProj.lib`都有符号`VerboseMonitor::print`，这些符号由 ExecProj 重新定义。但是，统一构建案例失败了。

解决此问题的一种方法是创建另一个仅包含 Verbose.cpp 的 lib 文件并将其从两个项目中删除。但是，我想先了解为什么会发生这种情况。

另外，有人能想出更好的方法来解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T00:54:49.053

我想我知道发生了什么。

Unity.cpp 包含 Verbose.cpp 和 Client.cpp
-Verbose.cpp 具有*print*的实现。
-Client.cpp 包括 Verbose.hpp ，它引入了*print*的实现。
所以 Unity.obj 有 2 个*print*的实现。

这意味着库 (LibProj.lib) 包含**一个带有***打印*副本的.obj 文件。因此，当我们尝试链接到库时，编译器不知道要使用哪个*打印*。

这适用于常规构建的原因是，通常，Verbose.cpp 创建 Verbose.obj，其中包含*print的实现，Client.cpp 创建 Client.obj，其中也包含**print*的实现。这意味着库 (LibProj.lib) 包含**两个**.obj 文件，每个文件都定义了*print*，因此编译器选择了一个（不过我不知道如何）。

为了测试这个理论，我创建了 2 个 Unity 文件。
Unity.cpp 包括 Verbose.cpp
Unity2.cpp 包括 Client.cpp

通过这个实现，我可以构建。这是因为 LibProj.lib 现在有**两个**.obj 文件（Unity.obj 和 Unity2.obj），每个文件都包含一个*print*的实现，所以没有符号冲突。

这只是一个有根据的猜测，我保留错误的权利:)。但是，如果我错了，请纠正我。

谢谢。

# wpf - 在生成的实体框架类上实现 INotifyPropertyChanged

> ID：14132349
> 
> 赞同：17
> 
> 时间：2013-01-03T02:41:09.310
> 
> 标签：wpf, entity-framework, xaml

我有一个 SQL DB，并且正在实现一个 WPF UI 来更新它。如果我使用 EF5 从 DB 生成类，如何在生成的类和属性上实现 INotifyPropertyChanged，以便我可以使用 UI 轻松绑定到它们？有没有简单的方法来实现这一目标？

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-03T02:50:40.770

如果您遵循 WPF 的推荐[MVVM](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)模式，则可以将生成的类视为模型，然后编写实现 INotifyPropertyChanged 的​​ ViewModel 包装器。ViewModel 类将访问您的 DB 类并公开您可以在 XAML 中绑定到您的 UI 的属性。

正如您在评论中指出的那样，这可能会导致编写样板代码的大量工作，但有一些方法可以解决这个问题。有关一些想法，请参阅[此问题](https://stackoverflow.com/questions/1261371/reducing-boilerplate-code-in-mvvm-wpf-app-for-attached-properties-commands-etc)。

虽然一开始需要做更多的工作，但如果您需要进行任何中间格式化或处理，或者如果您需要在不影响 UI 的情况下更改数据库类，则 MVVM 模式绝对可以从长远来看得到回报。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-11-04T16:12:23.347

有一个名为 PropertyChanged.Fody 的 NuGet 包，它使将 INotifyPropertyChanged 添加到类属性非常简单。安装包后，只需将 [ImplementPropertyChanged] 属性添加到任何类或部分类，包就会为您添加 INotifyPropertyChanged。

这是一个简单的使用示例；

```
using PropertyChanged;

[ImplementPropertyChanged]
public partial class Order
{
} 
```

有关更多信息，请参阅[GitHub](https://github.com/Fody/PropertyChanged)。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-03T03:10:31.790

我最近需要做同样的事情，但使用 Winforms。如果您不想遵循 bde 建议的 MVVM 模式，您可以修改 t4 模板以在生成的实体上实现 INotifyPropertyChanged。

这个答案帮助了我：[https ://stackoverflow.com/a/12192358/1914530](https://stackoverflow.com/a/12192358/1914530)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-04-01T21:43:30.850

使所有 EF 生成的类都继承自实现`INotifyPropertyChanged`接口的类（使用您可能已经定义的非生成部分类）。`PropertyChanged`向此基类添加一个方法，该方法使用空字符串引发事件作为`PropertyName`. 然后，每次在 EF 生成的类实例上调用此方法时，其所有修改的属性都将在 WPF UI 中刷新。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-09-03T15:29:44.973

您可以编辑 EF 模板（.tt 文件）以在您的属性上生成 propertyChanged 内容，或者（有点冒险:)）来编辑生成的类。最后一个有点冒险，因为如果重新生成模型，所有更改都会丢失。所以也许包装类的变体或模板编辑（有点难：S）是最好的。

# android - 如何创建之字形布局？

> ID：14132350
> 
> 赞同：1
> 
> 时间：2013-01-03T02:41:13.130
> 
> 标签：android, android-layout

我想以之字形图案放置一些控件，如下所示。我怎样才能最好地做到这一点？

（使用安卓 2.2）

![之字形:)](../Images/f6c870654dc2fa8406560907a1765a08.png)

# node.js - express.js 静态资产管理

> ID：14132351
> 
> 赞同：0
> 
> 时间：2013-01-03T02:41:13.937
> 
> 标签：node.js, express, static-files

你用什么库来缩小和连接你的静态文件？可能丑化js？

在我开始使用它之前，我发现了一个名为[piler](https://github.com/epeli/piler)的产品，它看起来相当不错。它需要大量的修补才能使用 express 3。我让它工作了，但是让它工作的过程让我认为这可能不是一个想要在 prod 中使用的 lib id。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T02:59:02.220

我们使用 uglify。快速简单且可靠的 node.js 库。

简单方法是生成文件中的“构建”目标，但如果您的项目需要，您可以制作整个复杂的资产管道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T14:51:19.193

看看 grunt [http://gruntjs.com/](http://gruntjs.com/)

您可以使用它运行基于任务的命令，内置命令之一是缩小 JavaScript 文件（它们通过 Uglify.js 完成）[https://github.com/gruntjs/grunt/blob/0.3-stable/docs/ task_min.md](https://github.com/gruntjs/grunt/blob/0.3-stable/docs/task_min.md)

# algorithm - 在我的 Canny-Deriche 的 MATLAB 实现中无法获得干净的输出

> ID：14132356
> 
> 赞同：6
> 
> 时间：2013-01-03T02:41:53.000
> 
> 标签：algorithm, matlab, feature-detection, edge-detection

到目前为止，我的代码是：

```
function imgg = derichefilter1(x, k, a, b, c)
osize = size(x);
x = double(x);
a = double(a);
b = double(b);
c = double(c);
k = double(k);
y1 = zeros(osize(1),osize(2));
y2 = zeros(osize(1),osize(2));
y1(:,1) = a(1)*x(:,1);
y1(:,2) = a(1)*x(:,2) + a(2)*x(:,1) + b(1)*y1(:,1);
for ii=3:osize(2)
    y1(:,ii) = a(1)*x(:,ii) + a(2)*x(:,ii-1) + b(1)*y1(:,ii-1) + b(2)*y1(:,ii-2);
end

y2(:,osize(2)-1) = a(3)*x(osize(2));
for ii=(osize(2)-2):-1:1
    y2(:,ii) = a(3)*x(:,ii+1) + a(4)*x(:,ii+2) + b(1)*y2(:,ii+1) + b(2)*y2(:,ii+2);
end
imgg = c*(y1+y2);

function imgg = derichefilter2(x, k, a, b, c)
imgg = derichefilter1(x,k,a(1:4),b,c(1));
imgg = (derichefilter1(imgg',k,a(5:8),b,c(2)))';

function [mask magn] = nonmaxsupp(x, y)
magn = sqrt(x.^2 + y.^2);
argu = atan2(y,x);
argu = argu/pi*4;
argu = int32(round(argu));
argu(argu == 4) = 0;
argu(argu < 0) = argu(argu < 0) + 4;
mask = boolean(zeros(size(x)));
for ii = 2:(size(x,1)-1)
    for jj = 2:(size(x,2)-1)
        switch argu(ii,jj)
            case 0
                mask(ii,jj) = (max(magn(ii,jj+1),magn(ii,jj-1)) <= magn(ii,jj));
            case 1
                mask(ii,jj) = (max(magn(ii-1,jj+1),magn(ii+1,jj-1)) <= magn(ii,jj));
            case 2
                mask(ii,jj) = (max(magn(ii-1,jj),magn(ii+1,jj)) <= magn(ii,jj));
            case 3
                mask(ii,jj) = (max(magn(ii+1,jj+1),magn(ii-1,jj-1)) <= magn(ii,jj));
        end
    end
end

function imgg = hystthres(x,Tl,Th)
imgg = (x>Th);
limg = (x>=Tl);
osize = size(x);
nTh = 0;
for ii = 1:osize(1)
    for jj = 1:osize(2)
        if imgg(ii,jj)
            nTh = nTh + 1;
        end
    end
end
c = zeros(1,nTh); r = zeros(1,nTh); nTh=0;
for ii = 1:osize(1)
    for jj = 1:osize(2)
        if imgg(ii,jj)
            nTh = nTh + 1;
            c(nTh) = ii; r(nTh) = jj;
        end
    end
end
imgg = bwselect(limg,r,c,8);

function imgg = derichecomplete(x, alph, Tl, Th)
k = (1 - exp(-alph))^2/(1 + 2*alph*exp(-alph) - exp(-2*alph));
as = zeros(1,8);
as(1) = k;
as(2) = k*exp(-alph)*(alph-1);
as(3) = k*exp(-alph)*(alph+1);
as(4) = -k*exp(-2*alph);
as(5:8)=as(1:4);
b = zeros(1,2);
b(1) = 2*exp(-alph);
b(2) = -exp(-2*alph);
cs = [1,1];
ax = [0,1,-1,0,as(5:8)];
cx = [-(1 - exp(-alph))^2,1];
ay = [ax(5:8),ax(1:4)];
cy = [cx(2) cx(1)];

deriches = derichefilter2(x, k, as, b, cs);
derichex = derichefilter2(deriches, k, ax, b, cx);
derichey = derichefilter2(deriches, k, ay, b, cy);
[mask mag] = nonmaxsupp(derichex, derichey);
mag(~mask) = 0;
imgg = hystthres(mag,Tl,Th);

clc; clear all; close all;
imagepath = input('Enter the image path in single quotes: ');
alph = input('Enter the value of alpha to be used: ');
Tl = input('Enter the value of Tl to be used: ');
Th = input('Enter the value of Th to be used: ');
imgg = imread(imagepath);
szzz = size(size(imgg));
if szzz(2) == 3
    osize = size(imgg);
    hystf = boolean(zeros(osize(1:2)));
    for ii=1:3
        hystf = hystf | derichecomplete(imgg(:,:,ii),alph,Tl,Th);
    end
else    
    hystf = derichecomplete(imgg,alph,Tl,Th);
end
imshow(hystf); 
```

[我在Canny-Deriche Wikipedia 页面](http://en.wikipedia.org/wiki/Deriche_edge_detector "Deriche edge detector - Wikipedia")上的图像输出 ![图片](../Images/27c6dca95536b65f7dd036c15977e5dc.png) ![在此处输入图像描述](../Images/510fef4e95e8bc2907e91848767af95e.png)

我似乎找不到错误，因为我按照那里和[Canny 边缘检测器](http://en.wikipedia.org/wiki/Canny_edge_detector "Canny 边缘检测器 - 维基百科")页面上的说明进行操作。我刚刚实现了算法，但似乎仍然无法产生相同的输出。这些特征厚实而前卫，而不是像维基百科页面上那样平滑。

编辑：[Dropbox 链接](https://dl.dropbox.com/u/35186704/Deriche.zip)到代码/图像，因此您不必复制/粘贴它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T18:08:40.387

我认为您没有处理正确的文件。我将您的功能应用于全分辨率图像[http://upload.wikimedia.org/wikipedia/commons/5/5e/Sunflowers_in_July.jpg](http://upload.wikimedia.org/wikipedia/commons/5/5e/Sunflowers_in_July.jpg)，结果看起来不错

如果我将您的功能应用于 50K 预览文件，我会得到您在上面显示的结果。

# sql - 通过聚合的聚合过滤时避免重复计算？

> ID：14132357
> 
> 赞同：1
> 
> 时间：2013-01-03T02:42:05.033
> 
> 标签：sql, aggregate-functions, teradata

我正试图拉动在过去一年中至少有 6 个月每月销售额超过 10,000 件的商店的月销售额。我的源销售表是每天的。因此，我正在计算所有商店所有月份的销售额，然后找出哪些商店超过 10,000 个单位 6 次，并使用该商店列表作为查询的过滤器，在该查询中我计算过滤商店的所有月份。

因此，我基本上在同`sum(units_sold)`一个查询中进行了两次相同的聚合计算：

```
select
    store_location,
    sales_date - extract(day from sales_date) + 1 as sales_month,
    sum(units_sold) as monthly_sales,   /* I already calculated this!  How to re-use? */
    case when sum(units_sold) > 10000 then 1 else 0 end as exceeded_10000 

from
    daily_sales

where
    sales_date between '2012-01-01' and '2012-12-31' and
    store_location in (
        select
            store_location
        from (
                select
                    store_location,
                    sales_date - extract(day from sales_date) + 1 as sales_month,
                    case when sum(units_sold) > 10000 then 1 else 0 end as exceeded_10000   /* evaluated per month, per store */
                from
                    daily_sales
                where
                    sales_date between '2012-01-01' and '2012-12-31'
                group by
                    store_location,
                    sales_date - extract(day from sales_date) + 1
        ) a
        group by
            store_location
        having
            sum(exceeded_10000) > 6   /* which stores had 6 months over 10000 ? */ 
    )

group by
    store_location,
    sales_date - extract(day from sales_date) + 1 
```

这似乎效率低下——我已经`sum(units_sold)`在内部（过滤）查询中按月计算，但我想不出一种方法来重新使用这些月度总数。您会注意到，查询 b 必然不会按月分组，因为它会将销售额超过 10,000 的月数相加——这是我在标题中提到的聚合的总和。

Teradata 不支持 PIVOT 功能，我不希望使用大量的 CASE WHEN 来模拟枢轴，然后每月检查单行。

有没有办法让这个查询更有效率？要重新使用我已经在内部查询中计算的每月销售总额？它可以在不同的 RDBMS 平台而不是 Teradata 上进行简化吗？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T02:56:39.970

您的查询似乎不符合您的要求。外部查询按月分组，这不是必需的。

以下查询返回 6 个月以上销售额超过 10,000 的位置：

```
select store_location, sum(month_units_sold) as totalunits,
        sum(exceeded_10000) as months_over_10000
from (select store_location,
             sales_date - extract(day from sales_date) + 1 as sales_month,
             sum(units_sold) as month_units_sold
             (case when sum(units_sold) > 10000 then 1 else 0 end) as exceeded_10000   /* evaluated per month, per store */
      from daily_sales
      where sales_date between '2012-01-01' and '2012-12-31'
      group by store_location, sales_date - extract(day from sales_date) + 1
    ) t
group by store_location
having sum(exceeded_10000) >= 6 
```

如果您想按月了解每个商店的信息，请使用窗口函数计算超出的月数：

```
select *
from (select t.*,
             SUM(exceeded_10000) over (partition by store_location) s MonthsExceeded10000
      from (select store_location,
                   sales_date - extract(day from sales_date) + 1 as sales_month,
                   sum(units_sold) as month_units_sold
                   (case when sum(units_sold) > 10000 then 1 else 0 end) as exceeded_10000   /* evaluated per month, per store */
            from daily_sales
            where sales_date between '2012-01-01' and '2012-12-31'
            group by store_location, sales_date - extract(day from sales_date) + 1
          ) t
    ) t
where MonthsExceeded10000 
```

# authentication - 访问全局变量的用户实体

> ID：14132363
> 
> 赞同：0
> 
> 时间：2013-01-03T02:43:59.780
> 
> 标签：authentication, symfony

我是 Symfony2 的新手，所以请多多包涵。我正在创建一个 Web 应用程序，其中将有两个网站/父包共享一个公共包。捆绑包的一部分是我的`User`实体模型。对于这些网站，需要购买订阅，以便用户可以访问这些网站的程序部分。

我认为最好是使用`Roles`授权机制。我遇到了一个问题。问题是我无法访问该实体之外的变量/服务（意思是我的网站服务，其中包含有关当前网站会话的信息）——这确实是有道理的。有没有办法将`class User implements AdvancedUserInterface, \Serializable`我用于身份验证的标准 User ( ) 实体转换为服务？但这似乎存在问题，因为我正在为`User`返回类的类使用自定义存储库`User`。

**那么，如何将外部信息注入到`User`实体模型中呢？**- 我认为这就是我所要求的摘要。

## 编辑：

这是我对用户类的类定义：

```
class User implements AdvancedUserInterface, \Serializable 
```

这是我`security.yml`的网站：

```
providers:
    database:
        entity: { class: WebsiteCommonBundle:User } 
```

我想实现该`getRoles()`功能以提供用户所属的当前角色。挑战在于，这取决于要满足的某些标准（每个网站都不同）。这些信息来自 Symfony 服务，它就在那里，我只是不知道如何将这些信息推送到实体中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T23:05:13.610

仅仅拥有`Users`并不足以为 Web 应用程序分配角色/访问权限。为了处理这个问题，您还需要实现 a `UserProvider`。[文档](http://symfony.com/doc/2.0/cookbook/security/custom_provider.html)为该主题提供了一个很好的开端。

# hibernate - 在同步方法中使用 Grails 重复记录

> ID：14132367
> 
> 赞同：1
> 
> 时间：2013-01-03T02:45:07.337
> 
> 标签：hibernate, session, grails, synchronization, findby

我花了整个晚上试图弄清楚，此时我很绝望。我的 Grails 2.1.0 项目中有服务类。它对 Web 服务执行查询 - 查询是线程化的。一旦线程获得了数据，它就会调用`synchronized`方法`WriteToDB`，该方法又接受一个名称 ( `String field`) 并通过`findByName`. 如果记录存在，则不执行任何其他操作来创建新记录。

现在我检查了方法确实只允许一次调用一个线程，这里是日志示例：

> 错误 2013-01-02 21:29:47,408 [Thread-21] 错误 - WriteToDB START
> 
> 错误 2013-01-02 21:29:47,474 [Thread-21] 错误 - WriteToDB 已完成
> 
> 错误 2013-01-02 21:29:47,475 [Thread-20] 错误 - WriteToDB START
> 
> 错误 2013-01-02 21:29:47,571 [Thread-20] 错误 - WriteToDB 已完成
> 
> 错误 2013-01-02 21:29:47,581 [Thread-49] 错误 - WriteToDB START
> 
> 错误 2013-01-02 21:29:47,866 [Thread-49] 错误 - WriteToDB 已完成
> 
> 错误 2013-01-02 21:29:47,867 [Thread-45] 错误 - WriteToDB START
> 
> 错误 2013-01-02 21:29:48,202 [Thread-45] 错误 - WriteToDB 已完成
> 
> 错误 2013-01-02 21:29:48,203 [Thread-48] 错误 - WriteToDB START
> 
> 错误 2013-01-02 21:29:48,320 [Thread-48] 错误 - WriteToDB 已完成

但是，我得到重复的记录！！！每次我保存新记录时，我都会这样做`flush:true`。我不明白为什么它一直在发生？我手动测试 - 在测试之前将一条已知记录添加到数据库中，并且它从未被复制，但是，正在保存的新记录最多被复制 6 次。

请帮忙。我需要索引一些东西吗？或者以特殊的方式冲洗一些东西？为什么会这样？

**[2013 年 2 月 1 日更新]**：

这是我用来保存记录的代码：

```
 if(!f) { // Check if record doesn't exist then save, else nothing
          f = new Feature(name: featureName)
          if( !f.save(flush: true) ) {
              f.errors.each {
                  log.error it
              }
          }
      } 
```

还有错误示例：

> 错误 2013-01-02 22:25:58,868 [Thread-20] 错误 util.JDBCExceptionReporter - 键“名称”的重复条目“自动传输”
> 
> 错误 2013-01-02 22:25:58,873 [Thread-20] 错误 hibernate.AssertionFailure - 发生断言失败（这可能表明 Hibernate 中存在错误，但更有可能是由于会话使用不安全）消息：空 id在 Project2.Feature 条目中（发生异常后不要刷新 Session）

我可以这样解释（我在“保存”部分代码之前得到了 FindByName）：我查找记录但它不存在所以我正在创建它，现在它抱怨重复条目，我得到变量“f”的空值后来我将其作为关系插入到另一个表中。

我想我可能会尝试使用 try catch 块修复此代码......想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T05:52:30.697

好的，经过一些测试和研究，我发现了一个问题。

`Domain.save(flush:true)`- 由于线程而没有工作。

这是我的线程创建示例：

```
Thread.start {
    Domain.withTransaction {
         // Doing stuff and calling synchronization method to write data to DB
    }
} 
```

在这里找到了修复：[Grails、GPars 和数据持久性](https://stackoverflow.com/questions/14079194/grails-gpars-and-data-persistence)

我替换`Domain.withTransaction`为`Domain.withNewSession`：

```
Thread.start {
    Domain.withNewSession {
         // Doing stuff and calling synchronization method to write data to DB
    }
} 
```

并`save(flush: true)`开始写入 mySQL。由于数据被写入 mySQL，findBy... 开始返回正确的结果，因此我的应用程序不再尝试创建重复记录。问题解决了！

谢谢你，金兆武，你的建议很有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T03:02:15.840

这是一个简单的解决方案：只需添加

```
static constraints = {
    name unique: true
} 
```

到您的域类，然后在服务方法中捕获相关异常，而不是使用`findByName`.

或者您可能需要从您的服务方法中发布一些代码以找出重复的原因。

# c# - 这段代码的数据库应该在哪里？

> ID：14132368
> 
> 赞同：0
> 
> 时间：2013-01-03T02:45:29.317
> 
> 标签：c#, asp.net, sql-server, visual-studio-2010, mdf

我有以下 web.config 文件，其中包含如下代码：

`<connectionStrings> <add name="CustomerManagementConnectionString" connectionString="Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|CustomerManagement.mdf;Integrated Security=True;Connect Timeout=30;User Instance=True" providerName="System.Data.SqlClient" /> <add name="Entities" connectionString="metadata=res://*/App_Code.CustomerManagement.csdl|res://*/App_Code.CustomerManagement.ssdl|res://*/App_Code.CustomerManagement.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\CustomerManagement.mdf;Integrated Security=True;Connect Timeout=30;User Instance=True;MultipleActiveResultSets=True&quot;" providerName="System.Data.EntityClient" /> </connectionStrings>`

但是，当我运行 Visual Studio Web 应用程序项目时，它给了我以下信息：

```
“/CustomerManagement”应用程序中的服务器错误。
-------------------------------------------------- ------------------------------

由于启动用户实例的进程失败，无法生成 SQL Server 的用户实例。连接将被关闭。
说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.Data.SqlClient.SqlException：由于启动用户实例的进程失败，无法生成 SQL Server 的用户实例。连接将被关闭。

```

以前，它给我以下错误消息，我通过安装 SQL Express Edition 2005 解决了这个错误。

```
“/CustomerManagement”应用程序中的服务器错误。

建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）
说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.Data.SqlClient.SqlException：建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）

```

所以，我想知道如果错误指的是哪个数据库。它是指 SQL Server 中的数据库还是位于项目文件中的 mdf。

（请注意，这个项目是由另一个人完成的，我正在尝试了解数据库在哪里。谢谢）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T02:51:58.207

尝试删除以下目录的内容：

`C:\Users\<user name>\AppData\Local\Microsoft\Microsoft SQL Server Data\SQLEXPRESS.`

（将 替换为`<user name>`您当前登录的帐户。）

有关详细信息，请参阅：[错误：无法生成 SQL Server 的用户实例](https://stackoverflow.com/questions/281500/error-failed-to-generate-a-user-instance-of-sql-server)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T02:58:34.780

**简而言之：**确保您的默认 SQL 实例（主要是名为 的快速版本`.\SQLEXPRESS`）正在您的计算机上运行。您的计算机上似乎未设置默认 SQL 实例。

您可以通过 SSMS 工具进行检查。这是关于 - [SQL Server Management Studio (SSMS) Basics](http://learningsqlserver.wordpress.com/2011/02/04/sql-server-management-studio-ssms-basics/)的链接。

相关帖子 -[无法在 SQL Server 2008 中注册默认实例 MSSQLSERVER](https://stackoverflow.com/q/1960176/1437962)

# c++ - QAbstractSocket 没有这样的文件或目录

> ID：14132369
> 
> 赞同：2
> 
> 时间：2013-01-03T02:45:36.027
> 
> 标签：c++, qt, compiler-errors, spaces

我是 QT 编程的新手，这让我很困惑。我已经搜索了这个问题的答案，但我找到的答案并没有解决我的问题。一般来说，我在网上找到的答案都是说要添加`QT += network`到我的 .pro 文件中。但是，我的 .pro 文件中已经有了它，但尚未修复。

有什么建议么？

。轮廓

```
QT       += core gui network

greaterThan(QT_MAJOR_VERSION, 4): QT += widgets

TARGET = firstproject
TEMPLATE = app

SOURCES += main.cpp\
    mainwindow.cpp \
IB_API_with_Qt/src/IBClient.cpp \
IB_API_with_Qt/src/EQtClientSocket.cpp \
IB_API_with_Qt/src/EClientSocketBase.cpp

HEADERS  += mainwindow.h \
IB_API_with_Qt/include/TwsSocketClientErrors.h \
IB_API_with_Qt/include/ScannerSubscription.h \
IB_API_with_Qt/include/OrderState.h \
IB_API_with_Qt/include/Order.h \
IB_API_with_Qt/include/IBClient.h \
IB_API_with_Qt/include/Execution.h \
IB_API_with_Qt/include/EWrapper.h \
IB_API_with_Qt/include/EQtClientSocket.h \
IB_API_with_Qt/include/EClientSocketBaseImpl.h \
IB_API_with_Qt/include/EClientSocketBase.h \
IB_API_with_Qt/include/EClient.h \
IB_API_with_Qt/include/Contract.h \
IB_API_with_Qt/include/CommonDefs.h

FORMS    += mainwindow.ui 
```

错误发生在头文件中，它简单地说：

```
#include <QAbstractSocket> 
```

这就是编译输出为我提供的：

```
21:36:05: Running steps for project firstproject...
21:36:05: Configuration unchanged, skipping qmake step.
21:36:05: Starting: "C:\Qt\Qt5.0.0\Tools\QtCreator\bin\jom.exe" 
    C:\Qt\Qt5.0.0\Tools\QtCreator\bin\jom.exe -f Makefile.Debug
    cl -c -nologo -Zm200 -Zc:wchar_t -Zi -MDd -GR -W3 -w34100 -w34189 -EHsc -DUNICODE -DWIN32 -DQT_QML_DEBUG -
    DQT_DECLARATIVE_DEBUG -DQT_WIDGETS_LIB -DQT_GUI_LIB -DQT_CORE_LIB -DQT_OPENGL_ES_2 -DQT_OPENGL_ES_2_ANGLE -I"..\..\..
    \..\..\Qt\Qt5.0.0\5.0.0\msvc2010\include" -I"..\..\..\..\..\Qt\Qt5.0.0\5.0.0\msvc2010\include\QtWidgets" -I"..\..\..
    \..\..\Qt\Qt5.0.0\5.0.0\msvc2010\include\QtGui" -I"..\..\..\..\..\Qt\Qt5.0.0\5.0.0\msvc2010\include\QtCore" -I"debug"
    -I"." -I"." -I"..\..\..\..\..\Qt\Qt5.0.0\5.0.0\msvc2010\mkspecs\win32-msvc2010" -Fodebug\ @C:\Users\Terence\AppData
    \Local\Temp\mainwindow.obj.5272.47.jom
    mainwindow.cpp
    c:\users\terence\documents\qt projects\firstproject\IB_API_with_Qt/include/IBClient.h(6) : fatal error C1083: Cannot 
    open include file: 'QAbstractSocket': No such file or directory
    jom: C:\Users\Terence\Documents\QT Projects\firstproject-build-Desktop_Qt_5_0_0_MSVC2010_32bit_SDK-Debug
    \Makefile.Debug [debug\mainwindow.obj] Error 2
    jom: C:\Users\Terence\Documents\QT Projects\firstproject-build-Desktop_Qt_5_0_0_MSVC2010_32bit_SDK-Debug\Makefile 
    [debug] Error 2
21:36:08: The process "C:\Qt\Qt5.0.0\Tools\QtCreator\bin\jom.exe" exited with code 2.
    Error while building/deploying project firstproject (kit: Desktop Qt 5.0.0 MSVC2010 32bit (SDK))
    When executing step 'Make' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T06:45:47.100

如果项目路径包含空格或非 ASCII 字符，Qt 构建可能会失败。

[文档](http://doc.qt.digia.com/qt/platform-notes-windows.html)中提到您不应该将 Qt 安装到包含空格的目录中，但应该更好地记录并明确警告您的项目路径也可能影响构建过程。

在您的情况下，包含路径被设置为相对于项目路径（例如，`-I"..\..\..\..\..\Qt\Qt5.0.0\5.0.0\msvc2010\include\QtGui`），其中包含空间，因此`cl`无法找到标题。

> **相关问题：**
> [进程 qmake.exe 以代码 2 退出 - 第一次使用 Qt 和 Qt Creator](https://stackoverflow.com/questions/14095889/the-process-qmake-exe-exited-with-code-2-first-time-with-qt-and-qt-creator)

# .net - 我如何在 mvc4 中使用 jqx jquery 库？

> ID：14132371
> 
> 赞同：0
> 
> 时间：2013-01-03T02:45:54.400
> 
> 标签：.net, jquery-ui, asp.net-mvc-4

抱歉这个问题含糊不清，但这很简单。我不确定我是否正确设置了这个 jquery 库以与 mvc 4 一起使用。[http://www.jqwidgets.com](http://www.jqwidgets.com)

没有一个演示工作。没有错误，它根本没有做任何事情。例如：

```
@section pageScripts
{
    <!-- add the jQuery script -->
    <script type="text/javascript" src="~/scripts/jquery-1.8.2.min.js"></script>    
    <!-- add the jQWidgets framework -->
    <script type="text/javascript" src="~/jqwidgets/jqwidgets/jqxcore.js"></script>
    <!-- add one or more widgets -->
    <script type="text/javascript" src="~/jqwidgets/jqwidgets/jqxbuttons.js"></script>
    <!-- add one of the jQWidgets styles -->
    <link rel="stylesheet" href="~/jqwidgets/jqwidgets/styles/jqx.darkblue.css" type="text/css" />

    <script type="text/javascript">
        $(document).ready(function () {
            var theme = getTheme();
            var source = '@Model.Friends';
            $('#friendsList').jqxDropDownList({ source: source, selectedIndex: 1, width: '200', height: '25', theme: theme });
        });
    </script>
}

<div id='friendsList'></div> 
```

这是该站点给出的示例，但它没有做任何事情。我还注意到智能感知（VS2012）中没有弹出任何控件。

我怀疑有些东西需要在捆绑包中配置或在 _layout.cshtml 中呈现

我对此真的很陌生。我无法在网上给出很多直接的答案。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T07:33:53.347

有一个帮助主题演示了如何将小部件与 ASP .NET MVC4 - [asp.net-binding-to-sql-database-mvc4 一起使用](http://www.jqwidgets.com/jquery-widgets-documentation/documentation/asp.net-integration/asp.net-binding-to-sql-database-mvc4.htm)。

# jquery - JQPlot 多折线图 - 每小时数据比较

> ID：14132373
> 
> 赞同：3
> 
> 时间：2013-01-03T02:46:04.603
> 
> 标签：jquery, jqplot

我正在尝试用 2 行创建一个 JQ Plot。第一行包含第 1 天的每小时数据，第二行包含第 2 天的每小时数据。当我用这两条线创建图表时，我希望第二条线之上的一条线显示每小时数据比较。但我在图表上看到这两条线彼此相邻。

我[这里有样品](http://jsfiddle.net/arunpjohny/HFs5P/6/)

请让我知道如何调整图表选项以在另一条线之上显示一条线。谢谢你。

这是我的代码：

```
<html>
<head>
    <script src="http://www.jqplot.com/deploy/dist/jquery.min.js"></script>
    <script src="http://www.jqplot.com/deploy/dist/jquery.jqplot.min.js"></script>
    <script src=""></script>
    <link class="include" rel="stylesheet" type="text/css" href="http://www.jqplot.com/deploy/dist/jquery.jqplot.min.css" />
    <script class="include" type="text/javascript" src="http://www.jqplot.com/deploy/dist/plugins/jqplot.cursor.min.js"></script>
    <script class="include" type="text/javascript" src="http://www.jqplot.com/deploy/dist/plugins/jqplot.dateAxisRenderer.min.js"></script>
    <script class="include" type="text/javascript" src="http://www.jqplot.com/deploy/dist/plugins/jqplot.logAxisRenderer.min.js"></script>
    <script class="include" type="text/javascript" src="http://www.jqplot.com/deploy/dist/plugins/jqplot.canvasTextRenderer.min.js"></script>
    <script class="include" type="text/javascript" src="http://www.jqplot.com/deploy/dist/plugins/jqplot.canvasAxisTickRenderer.min.js"></script>
    <script type="text/javascript">
$(document).ready(function(){
    line1 = [["6/22/2009 10:00",425.32], ["6/22/2009 11:00",424.84], ["6/22/2009 12:00",417.23], ["6/22/2009 13:00",390], 
    ["6/22/2009 14:00",393.69], ["6/22/2009 15:00",392.24], ["6/22/2009 16:00",369.78], ["6/22/2009 17:00",330.16], ["6/22/2009 18:00",308.57], 
    ["6/22/2009 19:00",346.45], ["6/22/2009 20:00",371.28], ["6/22/2009 21:00",324.7]];

        line2 = [["6/23/2009 10:00",325.32], ["6/23/2009 11:00",324.84], ["6/23/2009 12:00",217.23], ["6/23/2009 13:00",190], 
    ["6/23/2009 14:00",593.69], ["6/23/2009 15:00",292.24], ["6/23/2009 16:00",369.78], ["6/23/2009 17:00",330.16], ["6/23/2009 18:00",308.57], 
    ["6/23/2009 19:00",446.45], ["6/23/2009 20:00",241.28], ["6/23/2009 21:00",624.7]];

    var plot1 = $.jqplot('chart1', [line1,line2], { 
        title: 'XYZ, Inc.', 
        series: [{ 
            label: 'XYZ, Inc.', 
            neighborThreshold: -1 
        }], 
        axes: { 
            xaxis: { 
                renderer:$.jqplot.DateAxisRenderer,
                tickRenderer: $.jqplot.CanvasAxisTickRenderer,
                tickOptions: {
                  angle: -30
                } 
            }, 
            yaxis: {  
                renderer: $.jqplot.LogAxisRenderer,
                tickOptions:{ prefix: '$' } 
            } 
        }, 
        cursor:{
            show: true, 
            zoom: true
        } 
    });
});
</script>

</head>
<body>
    <div id="chart1" style="height:200px; width:600px;"></div>
</body>
</html>​ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-26T20:54:35.413

我在同样的问题上苦苦挣扎。

解决方案是定义第二个 x 轴，我们将其命名为 x2axis。

然后在您的系列配置中，指定您的系列之一将使用第二个 x 轴。

```
var plot1 = $.jqplot('chart1', [line1,line2], { 
    title: 'XYZ, Inc.', 
    series: [{ 
        label: 'primary series', 
        neighborThreshold: -1,
        xaxis: 'xaxis'
    }, {
        label: 'comparative series',
        xaxis: 'x2axis'
    }], 
    axes: { 
        xaxis: { 
            renderer:$.jqplot.DateAxisRenderer,
            tickRenderer: $.jqplot.CanvasAxisTickRenderer,
            tickOptions: {
              angle: -30
            } 
        },
        x2axis: {
            renderer:$.jqplot.DateAxisRenderer,
            tickRenderer: $.jqplot.CanvasAxisTickRenderer,
            tickOptions: {
              angle: -30
            } 
        },
        yaxis: {  
            renderer: $.jqplot.LogAxisRenderer,
            tickOptions:{ prefix: '$' } 
        } 
    }, 
    cursor:{
        show: true, 
        zoom: true
    } 
}); 
```

这是一个[演示解决方案的 JS Fiddle](http://jsfiddle.net/ptk921/R92tG/4/ "解决方案示例")

如果你的数据集有不同的长度，就会有额外的问题需要解决。查看我关于该主题的[博客文章以获取更多详细信息。](http://philipkobernik.github.io/blog/2013/11/25/plotting-comparative-time-series-with-jqplot/ "菲利普·科伯尼克博客文章")

干杯!

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T11:54:04.220

它对我有用。

例子：

```
var line1=[['2008-06-30 8:00AM',4], ['2008-7-14 8:00AM',6.5], ['2008-7-28 8:00AM',5.7], ['2008-8-11 8:00AM',9], ['2008-8-25 8:00AM',8.2]];
var line2=[['2008-06-30 8:00AM',6], ['2008-7-14 8:00AM',8.5], ['2008-7-28 8:00AM',8.7], ['2008-8-11 8:00AM',12], ['2008-8-25 8:00AM',8.2]];

var plot2 = $.jqplot('chart3', [line1,line2], {
    title:'Customized Date Axis', 
    axes:{
        xaxis:{
          renderer:$.jqplot.DateAxisRenderer, 
          tickOptions:{formatString:'%b %#d, %#I %p'},
          min:'June 16, 2008 8:00AM', 
          tickInterval:'2 weeks'
        }
    },
    series:[{lineWidth:4, markerOptions:{style:'square'}}]
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T03:44:54.693

我认为如果您使用 dateAxisRenderer 是不可能的，一个可能的解决方案是使用没有 dateAxisRenderer 的折线图

前任：

```
line1 = [[10,425.32], [11,424.84], [12,417.23], [13,390], [14,393.69], [15,392.24], [16,369.78], [17,330.16], [18,308.57], [19,346.45], [20,371.28], [21,324.7]];

line2 = [[10,325.32], [11,324.84], [12,217.23], [13,190], [14,593.69], [15,292.24], [16,369.78], [17,330.16], [18,308.57], [19,446.45], [20,241.28], [21,624.7]];

var plot3 = $.jqplot('chart1', [line1, line2 ], { 
  title: 'XYZ, Inc.', 
    series: [{ 
        label: 'XYZ, Inc.', 
        neighborThreshold: -1 
    }], 
    axes: {
        xaxis: {
            min: 1,
            max: 24,
            tickInterval: 2,
            tickOptions:{ suffix: ':00' } 
        },
         yaxis: {  
            renderer: $.jqplot.LogAxisRenderer,
            tickOptions:{ prefix: '$' } 
        } 
    },
    cursor:{
        show: true, 
        zoom: true
    } 
}); 
```

# c - 为什么指针值被修改为值 1？

> ID：14132376
> 
> 赞同：1
> 
> 时间：2013-01-03T02:46:46.553
> 
> 标签：c, pointers

我很好奇为什么在这段代码中 *(ptr + 1) 的值在程序运行时变为 1 而不是 6。

```
#include <stdio.h>

int main (void)
 {
     int *ptr, content = 3;

     ptr = &content;

     *(ptr + 1) = 6;
     *(ptr + 2) = 10;
     *(ptr + 3) = 14;

     int i = 0;

     for (i = 0; i < 4; ++i)
      {
          printf("The address is %p and the content is %d \n", ptr+i, *(ptr+i));
      }

     return 0;
 } 
```

运行时 int 6 被修改为值 1。

```
*(ptr + 1) = 6; 
```

这是程序的输出：

```
The address is 0x7fff7b400a88 and the content is 3 
The address is 0x7fff7b400a8c and the content is 1 
The address is 0x7fff7b400a90 and the content is 10 
The address is 0x7fff7b400a94 and the content is 14 
```

我在 valgrind 中运行它并且没有出现任何错误或任何东西，还尝试使用谷歌搜索它，也许我正在寻找错误的东西但没有运气找到结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T02:49:09.367

您正在**修改未分配给您的内存**，因此这是未定义的行为。

**可能**发生的情况是变量**被`i`分配到该位置，**因为它是函数**中堆栈空间的下一次使用**。在这一点上**`i`是 1 。**所以**输出是 1**。

改变

```
int content = 3;
ptr = &content; 
```

到

```
int content[10] = {3};
ptr = &content[0]; //or ptr = content; but this may be harder to grasp if you are new to C 
```

（感谢@KeithThompson 修复了指针分配）

如果您只是尝试指针算术。`int`这将起作用，因为现在您拥有 10 s数组中的整个堆栈空间

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T02:49:21.537

该程序通过流氓指针修改内存。最有可能的是，指针最终指向`i`恰好存储的位置，因此它输出该`i`点的值。

修复错误，谜团就会消失。理解有缺陷的程序比理解正确的程序要复杂得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T02:50:36.273

看起来您正在将变量写入为`i`. 不知道为什么它对你很重要，因为你不应该覆盖你没有明确分配的数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T02:50:45.890

您正在移动 ptr 以指向尚未分配的内存，并获取编译器放在那里的任何内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-03T02:50:46.650

您的代码正在写入未作为数组的一部分分配的地址，因此正在调用未定义的行为。任何事情都可能发生，而且是正确的。

最有可能发生的事情是变量`i`存储在 0x7FFF7B400A8C 并且正在修改打印的内容。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-03T09:08:12.463

```
*(ptr + 1) = 6;
*(ptr + 2) = 10;
*(ptr + 3) = 14; 
```

上述语句中发生了堆栈损坏，这是一种未定义的行为。因为您的程序仅有权访问 *(ptr + 0)，所以幸运的是没有发生崩溃。

为什么`*(ptr + 1)`打印`1`是，它指向堆栈中声明的下一个变量。这意味着它的指向`i`。尝试在循环`*(ptr + 1)`之前打印`for`，它会打印 0。并尝试打印`i`它的地址将与`(ptr + 1)`.

在循环之后`int i = 0;`和之前`for`声明两个变量，如下所示，然后运行你不会得到`10`，`14`同时打印`*(ptr + 2)`和`*(ptr * 3)`

```
int i = 0;
int x = 2;
int y = 2;

printf("%d", *(ptr + 1)); //this will print 0

for (i = 0; i < 4; ++i)
{
....
} 
```

## 解决方案

解决您的问题的方法是，将`content`其设为大小为 4 的数组，如下所示。

```
...
int *ptr = NULL;
int content[] = {3, 0, 0, 0};
ptr = content;
... 
```

# php - WordPress 数据库错误：列 p.id 不存在 | 使用 Postgres 的 Wordpress

> ID：14132377
> 
> 赞同：2
> 
> 时间：2013-01-03T02:47:01.167
> 
> 标签：php, wordpress, postgresql

我似乎有这个错误：

```
WordPress database error ERROR:  column p.id does not exist LINE 1: SELECT p.id FROM wp_posts AS p  WHERE p.post_date > '2013-01... 
```

来自这个代码块：

```
<?php
$posts=$wpdb->get_results($wpdb->prepare(
 "SELECT post_id, meta_value FROM $wpdb->postmeta WHERE meta_key = %s " .
 "ORDER BY CHAR_LENGTH(meta_value) DESC, meta_value DESC LIMIT 5",
 '_wp-svbtle-kudos'
));
?> 
```

我正在使用带有 wordpress 的 postgresql。我实现[了这个](https://github.com/mhoofman/wordpress-heroku)，我正在使用[这个](https://github.com/gravityonmars/wp-svbtle)主题。问题来自[这里](https://github.com/gravityonmars/wp-svbtle/blob/master/wp-content/themes/svbtle/single.php)的第 78 行。

对于 post 数据库如下所示：

![在此处输入图像描述](../Images/16a71d5066d7a7117b99d029118832d9.png)

对于 postmeta，它看起来像这样：

![在此处输入图像描述](../Images/8f52df19fd13f018aa351a3c8ab00a6b.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T10:20:16.033

Postgres 对大写/无大写很挑剔。我安装的 wordpress 使用 ID 而不是 id 作为数据库中的列名。我做了一个 grep -r 'p/.id' * 并在 wp-includes/link-template.php 中找到了 p.id。在第 1177 行，我有 $query = "SELECT p.id FROM $wpdb->posts AS p $join $where $sort"; 我将其更改为 $query = "SELECT p.ID FROM $wpdb->posts AS p $join $where $sort"; 错误消失了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T03:01:15.953

根据错误消息，我怀疑 WordPress 创建了这样的表。

```
create table "wp_posts" (
  "ID" int8 primary key,
  ...
); 
```

在 PostgreSQL 中，如果在双引号中使用大写声明列名，则必须以相同的方式访问它。

```
SELECT p."ID" FROM wp_posts p ... 
```

# android - 有没有办法在eclipse中自动化模拟器android

> ID：14132379
> 
> 赞同：3
> 
> 时间：2013-01-03T02:47:27.007
> 
> 标签：android, eclipse, screenshot

我必须为 android 应用程序做测试计划。应用程序中有大约 120 个屏幕，我必须检查应用程序是否有几个模拟器。问题是它需要太多时间。我知道如何使用 Eclipse IDE 截屏。我想自动化这个过程。我找不到eclipse提供这样的设施。我真的厌倦了一张一张的截图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T02:56:06.800

您可以使用它**`Robotium`**来自动浏览屏幕并截取屏幕截图。

看[那里](http://code.google.com/p/robotium/wiki/QuestionsAndAnswers)：

我可以从 Robotium 内部截取屏幕截图吗？

是的你可以。用于`takeScreenshot()`将屏幕截图保存在“ `/sdcard/Robotium-Screenshots/`”中。请注意，此功能需要被测应用程序的写入权限 ( `android.permission.WRITE_EXTERNAL_STORAGE`) 。`AndroidManifest.xml`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T03:44:25.570

你应该看看[ManyMo](http://www.manymo.com/)。它非常简单，您可以获得不同设备的各种模拟器。

# openlayers - 如何使用 OpenStreetMap 检测 OpenLayers 中某个点的土地类型

> ID：14132380
> 
> 赞同：0
> 
> 时间：2013-01-03T02:47:36.443
> 
> 标签：openlayers, openstreetmap

我有一个 OpenStreetMap

我使用 OpenLayers

我想知道是否有办法在地图上获取特定坐标的土地类型（例如：水、平原等）。

我在文档中搜索但没有找到任何东西。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T10:36:30.133

您可以使用 Cloudmade API 进行地理编码： [Cloudmade.com Geocoding API](http://developers.cloudmade.com/wiki/geocoding-http-api/Documentation)

您可以提供坐标，例如查找给定坐标周围的道路： http://geocoding.cloudmade.com/8ee2a50541944fb9bcedded5165f09d9/geocoding/v2/find.html?object_type=road&around=51.51384, [-0.10952](http://geocoding.cloudmade.com/8ee2a50541944fb9bcedded5165f09d9/geocoding/v2/find.html?object_type=road&around=51.51384,-0.10952)

您也可以以 Json 格式返回此信息

# php - 如何从 PHPMyAdmin 获取图像并加载到网页中

> ID：14132384
> 
> 赞同：0
> 
> 时间：2013-01-03T02:48:32.503
> 
> 标签：php, phpmyadmin

我第一次做 PHP 并对此进行研究，但并不快乐。基本上，我正在尝试从我的 PHPMyAdmin 数据库中获取图像并将其上传到我创建的网页。除图像外，所有标题和文本都按预期显示。

我从数据库中获取图像的代码

```
 <?php
        include 'config.php';
        include 'opendb.php';
        $getdestinationdetails = mysql_query("SELECT *
        FROM tbldestinations
        WHERE destinationid = $_GET[destinationid]");
        while($row = mysql_fetch_array($getdestinationdetails))
        {
        echo "<h1>Visit " . $row['destinationname'] . "</h1>".
        "<imgsrc = 'images" . $row['destinationimage'] . "' />"  .
        "<br />
        <br />" .
        $row['destionationdesc'] .
        "<br />
        <br />
        Our holidays include:
        <ul>
            <li>Luxury coach travel from Shipley Town Centre</li>
            <li>Bed and Breakfast at a top hotel</li>
            <li>Free tea and coffee on board your coach</li>
            <li>The services of an experienced courier</li>
            <li>Free complimentary glass of champagne upon arrival at your hotel</li>
        </ul>
        <center><h2>Don't delay, book today!</h2></center>";
        }
        include 'closedb.php';
?> 
```

我尝试了所有的实验，但都是徒劳的。任何提示或建议将不胜感激。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T02:57:28.113

### 如果实际图像存储在数据库中，您有两种选择：

1.  制作另一个旨在仅从数据库加载图像的脚本。在此脚本中，您将设置`header('Content-Type: image/jpeg')`（或您将显示的任何图像类型。然后，您将输出内容。此选项可能不是首选，因为它需要额外调用数据库（http：/ /stackoverflow.com/questions/5525830/displaying-an-image-stored-in-a-mysql-blob)
2.  风险更大一点，为了浏览器的兼容性，就是对它进行base64编码，然后直接输出到图像标签中。（http://stackoverflow.com/questions/1207190/embedding-base64-images）

无论哪种选择，您都需要`<img />`在主页上保留一个标签。选项 1 需要一个`src`指向脚本的属性，包括在数据库中查找图像所需的任何标识符（**但要非常小心 XSS**）。选项 2 直接将其输出到图像标签中，因此在某些方面也更可取

### 如果它只是一个图像的链接：

您的上述代码应该可以正常工作，除非进行了以下修改：

```
echo "<h1>Visit " . $row['destinationname'] . "</h1>".
     "<img src=\"images/" . $row['destinationimage'] . "\" />"  .
... 
```

## 编辑：

我会做什么，这将是最简单的：在您的 php 文件中，输出您的图像（假设它是 jpg），如下所示：

```
...
echo '<img src="data:image/jpeg;base64,' . base64_encode($row['destinationimage']) . '" />';
... 
```

以上实际上将图像放入图像标签本身，而不是通过互联网下载。我认为这里的挂断是您在 PHPmyAdmin 中看到图像的事实。当您在那里看到图像时，确实无法将其从 PHPmyAdmin 中取出。我自己没有尝试过，但我会假设他们正在做与我在上面展示的类似的事情——只是在 HTML 标记中显示图像。

# php - 如何替换图片的标题

> ID：14132385
> 
> 赞同：1
> 
> 时间：2013-01-03T02:48:37.290
> 
> 标签：php, replace

拜托，谁能告诉我如何替换文件标题图像。我正在尝试弄清楚如何替换图像的标题部分

```
$rem = array('-','_','%','+','img','photo','photos','picture','pictures','image','images','jpg','jpeg','png','bmp','copy');
$title = str_replace($rem,' ',$title);
$title = preg_replace("@\\b[a-z0-9]\\b ?@i", "", $title); 
```

结果

```
2015_ferrari_f430_18_1600.jpg -- > 2015-ferrari-f430-18-1600.jpg
Wimmer-RS-Ferrari-F430-Scuderia-1.jpg --> wimmer-rs-ferrari-f430-scuderia.jpg
3-Ferrari-F430-Stradale-Spy_1035.jpg -- > ferrari-f430-stradale-spy-1035.jpg
Auto-Veloce-Ferrari-F430-SVR-3.jpg --> auto-veloce-ferrari-f430-svr.jpg
Auto-Veloce-Ferrari-F430-SVR-8-1024x692.jpg --> auto-veloce-ferrari-f430-svr-1024x692.jpg

how to can be it..
2015-ferrari-f430.jpg
wimmer-rs-ferrari-f430-scuderia.jpg
ferrari-f430-stradale-spy.jpg
auto-veloce-ferrari-f430-svr.jpg
auto-veloce-ferrari-f430-svr.jpg 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T02:54:37.547

更改您的正则表达式模式。

```
$title = preg_replace("/[_\-\d]+.jpg$/", ".jpg", $title); 
```

但这不适用于您的所有字符串，因为您没有标准的替换模式（例如，它不适用于`2015-ferrari-f430_18_1600.jpg`and `Auto-Veloce-Ferrari-F430-SVR-8-1024x692.jpg`）。

考虑到您想替换破折号后的任何最后一个数字（包括`x`in `1024x768`），您也可以尝试以下操作：

```
$title = preg_replace("/(?:-|_)[_x\-\d]+.jpg$/", ".jpg", $title); 
```

# c# - 为列表视图中的选定项目设置背景

> ID：14132390
> 
> 赞同：0
> 
> 时间：2013-01-03T02:49:11.660
> 
> 标签：c#, wpf, listview, listviewitem

我有一个列表视图，它通过数据模板显示行。当我选择一个项目时，我将所选项目添加到一个可观察的集合中，并将“CarIsSelected”的值设置为 true，以便我知道哪个被选中。我在如何为我选择的添加到 observablecollection 的项目设置背景颜色时遇到问题？我希望这是有道理的。以下是我到目前为止的代码。再举一个例子，如果我选择“item1”，我将“item1”添加到集合中并突出显示“item1”的行。然后我选择“item2”，将“item2”添加到集合中，并突出显示“item2”的行。因此应突出显示“item1”和“item2”。

xml:

```
<ListView Name="lstExistingProblemList" HorizontalAlignment="Left" VerticalAlignment="Bottom" 
          ItemsSource="{Binding Path=ListOfCars}" SelectedItem="{Binding SelectedCar}" 
          SelectionMode="Single" Width="391" Grid.ColumnSpan="2"> 

    <ListView.ItemTemplate>
        <DataTemplate>
            <Label Width="391" Margin="0,0,5,0" HorizontalAlignment="Left">
                <Label.Content>
                    <TextBlock>
                        <TextBlock.Text>
                            <MultiBinding StringFormat="{}{0}-{1}">
                                <Binding Path="Make" />
                                <Binding Path="Model" />
                             </MultiBinding>
                        </TextBlock.Text>
                    </TextBlock>
                </Label.Content>
            </Label>
        </DataTemplate>
    </ListView.ItemTemplate>
</ListView> 
```

视图模型：

```
ObservableCollection<CarsInfo> selectedCarsLists = new ObservableCollection<CarsInfo>();
List<CarsInfo> listOfCars = new List<CarsInfo>();
CarsInfo selectedCar;

public List<CarsInfo> ListOfCars
{
    get
    {       
        listOfCars = DataSource.GetCarInfo();
        return listOfCars;
    }
}

public ObservableCollection<CarsInfo> SelectedCarsLists
{
    get
    {
        return selectedCarsLists;
    }
}

public CarsInfo SelectedCar
{
    get
    {
        return selectedCar;
    }
    set
    {
        if (selectedCar != value)
        {
            selectedCar = value;
            selectedCar.CarIsSelected = true;
            selectedCarsLists.Add(selectedCar);
        }
    }
} 
```

班级：

```
public int Year { get; set; }
public string Description { get; set; }
public string Make { get; set; } 
public string Model { get; set; }
public bool CarIsSelected { get; set; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T03:30:06.367

`DataTrigger`您可以设置`CarIsSelected`属性，但您必须`INotifyPropertyChanged`在您的`CarsInfo`类中实现 UI 以反映更改。

xml:

```
 <ListView.ItemTemplate>
        <DataTemplate>
            <Label x:Name="label" Width="391" Margin="0,0,5,0" HorizontalAlignment="Left">
                <Label.Content>
                    <TextBlock>
                    <TextBlock.Text>
                        <MultiBinding StringFormat="{}{0}-{1}">
                            <Binding Path="Make" />
                            <Binding Path="Model" />
                         </MultiBinding>
                    </TextBlock.Text>
                    </TextBlock>
                </Label.Content>
            </Label>
            <DataTemplate.Triggers>
                <DataTrigger Binding="{Binding CarIsSelected }" Value="True" >
                    <Setter TargetName="label" Property="Background" Value="Red" />
                </DataTrigger>
            </DataTemplate.Triggers>
        </DataTemplate>
    </ListView.ItemTemplate>
</ListView> 
```

代码

```
public  class CarsInfo : INotifyPropertyChanged
{
    public int Year { get; set; }
    public string Description { get; set; }
    public string Make { get; set; }
    public string Model { get; set; }

    private bool _carIsSelected;
    public bool CarIsSelected 
    {
        get { return _carIsSelected; }
        set { _carIsSelected = value; NotifyPropertyChanged("CarIsSelected"); } 
    }

    public event PropertyChangedEventHandler PropertyChanged;
    private void NotifyPropertyChanged(string property)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(property));
        }
    }
} 
```

结果： ![在此处输入图像描述](../Images/f15077aad409d06661e5d179fbff799b.png)

# spring - 需要有关 Spring MVC3 中 jdbcTemplates 的帮助

> ID：14132394
> 
> 赞同：1
> 
> 时间：2013-01-03T02:49:26.230
> 
> 标签：spring

我正在研究 Spring MVC3，我正在考虑使用 JDBCTemplates 进行数据库交互。

任何人都可以帮助如何编写 context.xml 文件和 java 代码来访问它以进行连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T05:19:42.760

您需要在 web.xml 中定义 contextConfigLocation 参数，以便 spring 找到它的上下文文件。例如，在 WEB-INF/web.xml 中添加以下行：

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>classpath*:META-INF/spring/context.xml</param-value>
</context-param> 
```

并将您的 content.xml 放在 WEB-INF/classes/META-INF/spring 文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T06:47:39.483

你检查[过 Spring 文档](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/jdbc.html)吗？它有以下例子：

**1\. XML 方法：** 代码：

```
public class JdbcCorporateEventDao implements CorporateEventDao {

    private JdbcTemplate jdbcTemplate;

    public void setDataSource(DataSource dataSource) {
        this.jdbcTemplate = new JdbcTemplate(dataSource);
    }

    // JDBC-backed implementations of the methods on the CorporateEventDao follow...
} 
```

XML配置：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <bean id="corporateEventDao" class="com.example.JdbcCorporateEventDao">
        <property name="dataSource" ref="dataSource"/>
    </bean>

    <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
        <property name="driverClassName" value="${jdbc.driverClassName}"/>
        <property name="url" value="${jdbc.url}"/>
        <property name="username" value="${jdbc.username}"/>
        <property name="password" value="${jdbc.password}"/>
    </bean>

    <context:property-placeholder location="jdbc.properties"/>

</beans> 
```

**2.注解方式：**

```
@Repository
public class JdbcCorporateEventDao implements CorporateEventDao {

    private JdbcTemplate jdbcTemplate;

    @Autowired
    public void setDataSource(DataSource dataSource) {
        this.jdbcTemplate = new JdbcTemplate(dataSource);
    }

    // JDBC-backed implementations of the methods on the CorporateEventDao follow...
} 
```

**数据源配置：**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <!-- Scans within the base package of the application for @Components to configure as beans -->
    <context:component-scan base-package="org.springframework.docs.test" />

    <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
        <property name="driverClassName" value="${jdbc.driverClassName}"/>
        <property name="url" value="${jdbc.url}"/>
        <property name="username" value="${jdbc.username}"/>
        <property name="password" value="${jdbc.password}"/>
    </bean>

    <context:property-placeholder location="jdbc.properties"/>

</beans> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T03:01:08.940

你需要先创建一个`DataSource`bean

例如：使用弹簧[DriverManagerDataSource](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/jdbc/datasource/DriverManagerDataSource.html)。

```
<bean id="dataSource"
    class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName">
        <value>${jdbc.driverClassName}</value>
    </property>
    <property name="url">
        <value>${jdbc.url}</value>
    </property>
    <property name="username">
        <value>${jdbc.username}</value>
    </property>
    <property name="password">
        <value>${jdbc.password}</value>
    </property>
</bean> 
```

然后`JdbcTemplate`使用数据源创建 bean。

```
<bean id="jdbcTemplate" class="org.springframework.jdbc.core.JdbcTemplate">
    <constructor-arg ref="dataSource" />
</bean> 
```

# syntax - VHDL - 在计算通用参数后调整端口大小

> ID：14132396
> 
> 赞同：2
> 
> 时间：2013-01-03T02:49:48.743
> 
> 标签：syntax, vhdl, fpga

我希望在 VHDL 中的**通用参数**之后**调整**实体**端口的大小。**

 **这是我的**实体声明**：

```
library ieee;
use ieee.std_logic_1164.all;
use IEEE.math_real.all;
use ieee.numeric_std.all;

entity counter is
generic( 
    ticks   : natural := 10
);
port(
        clk : in  std_logic;
        f_v : in std_logic_vector(natural(FLOOR(LOG2(Real(ticks)))) downto 0); --forced value
        res : in std_logic;
          z : out std_logic_vector(natural(FLOOR(LOG2(Real(ticks)))) downto 0)
);
end counter; 
```

更具体地说，我想在实例化计数器实体时在函数 nest **natural(FLOOR(LOG2(Real(ticks))))之后调整****f_v**和**z的大小。**

 **代码可以编译，但是当我尝试生成符号文件时，我收到以下**错误消息**：

```
Error (10017): Can't create symbol/include/instantiation/component file for entity "counter" because port "f_v" has an unsupported type    

Error (10017): Can't create symbol/include/instantiation/component file for entity "counter" because port "z" has an unsupported type 
```

我正在使用**Altera Quartus II 9.1 Web Edition**。

我怎样才能得到这个工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T14:28:55.007

这适用于我使用 Quartus II 12.1（完整版）。您应该预先知道，当涉及到 VHDL 时，有效且看似可综合的代码与您的综合工具实际上可以理解的代码之间存在差异。当您尝试以非标准方式做某事或使用不常用的语言功能时，此类问题经常发生。在您的情况下，该工具很可能存在`real`类型问题。我会推荐：

1.  升级到最新版本的 Quartus II
2.  将端口的宽度作为通用传递
3.  [使用您自己的库中的 log2 函数](https://stackoverflow.com/questions/12750007/vhdl-use-the-length-of-an-integer-generic-to-determine-number-of-select-lines/12751341#12751341)（这就是我所做的。）****

# c++ - OpenGL VBO 不工作

> ID：14132397
> 
> 赞同：2
> 
> 时间：2013-01-03T02:49:51.270
> 
> 标签：c++, linux, opengl, vbo

在我决定改用更现代的教程之前，我一直在玩 NeHe 的 OpenGL 教程。然而，无论我选择哪个教程，我什至无法使用 VBO 和顶点数组渲染单个三角形。虽然即时渲染效果很好。

以[http://ogldev.atspace.co.uk/www/tutorial03/tutorial03.html](http://ogldev.atspace.co.uk/www/tutorial03/tutorial03.html)中的代码为例，将项目*制作*或复制到代码块以编译它会在我运行它时导致黑屏。
（请注意，本教程明确地将顶点数组的大小而不是字节数传递给 glBufferData 但即使修复了该错误，结果仍然保持不变）

我目前正在运行 Ubuntu（尽管我在同一台 PC 上运行 Windows 时遇到了这个问题）并且我目前使用的编译器是 GCC 4.7.2

我还认为我的视频卡（Mobility Radeon 4330）可能会因为根本不支持 VBO 而导致此错误，所以这是 glxinfo 的输出：

```
name of display: :0.0
display: :0  screen: 0
direct rendering: Yes
server glx vendor string: SGI
server glx version string: 1.4
server glx extensions:
    GLX_ARB_create_context, GLX_ARB_create_context_profile, 
    GLX_ARB_multisample, GLX_EXT_create_context_es2_profile, 
    GLX_EXT_import_context, GLX_EXT_texture_from_pixmap, GLX_EXT_visual_info, 
    GLX_EXT_visual_rating, GLX_MESA_copy_sub_buffer, GLX_OML_swap_method, 
    GLX_SGI_swap_control, GLX_SGIS_multisample, GLX_SGIX_fbconfig, 
    GLX_SGIX_pbuffer, GLX_SGIX_visual_select_group, GLX_INTEL_swap_event
client glx vendor string: Mesa Project and SGI
client glx version string: 1.4
client glx extensions:
    GLX_ARB_create_context, GLX_ARB_create_context_profile, 
    GLX_ARB_create_context_robustness, GLX_ARB_get_proc_address, 
    GLX_ARB_multisample, GLX_EXT_import_context, GLX_EXT_visual_info, 
    GLX_EXT_visual_rating, GLX_EXT_framebuffer_sRGB, 
    GLX_EXT_create_context_es2_profile, GLX_MESA_copy_sub_buffer, 
    GLX_MESA_multithread_makecurrent, GLX_MESA_swap_control, 
    GLX_OML_swap_method, GLX_OML_sync_control, GLX_SGI_make_current_read, 
    GLX_SGI_swap_control, GLX_SGI_video_sync, GLX_SGIS_multisample, 
    GLX_SGIX_fbconfig, GLX_SGIX_pbuffer, GLX_SGIX_visual_select_group, 
    GLX_EXT_texture_from_pixmap, GLX_INTEL_swap_event
GLX version: 1.4
GLX extensions:
    GLX_ARB_create_context, GLX_ARB_create_context_profile, 
    GLX_ARB_get_proc_address, GLX_ARB_multisample, GLX_EXT_import_context, 
    GLX_EXT_visual_info, GLX_EXT_visual_rating, 
    GLX_EXT_create_context_es2_profile, GLX_MESA_copy_sub_buffer, 
    GLX_MESA_multithread_makecurrent, GLX_MESA_swap_control, 
    GLX_OML_swap_method, GLX_OML_sync_control, GLX_SGI_make_current_read, 
    GLX_SGI_swap_control, GLX_SGI_video_sync, GLX_SGIS_multisample, 
    GLX_SGIX_fbconfig, GLX_SGIX_pbuffer, GLX_SGIX_visual_select_group, 
    GLX_EXT_texture_from_pixmap
OpenGL vendor string: X.Org
OpenGL renderer string: Gallium 0.4 on AMD RV710
OpenGL version string: 2.1 Mesa 9.0
OpenGL shading language version string: 1.30
OpenGL extensions:
    GL_ARB_multisample, GL_EXT_abgr, GL_EXT_bgra, GL_EXT_blend_color, 
    GL_EXT_blend_minmax, GL_EXT_blend_subtract, GL_EXT_copy_texture, 
    GL_EXT_polygon_offset, GL_EXT_subtexture, GL_EXT_texture_object, 
    GL_EXT_vertex_array, GL_EXT_compiled_vertex_array, GL_EXT_texture, 
    GL_EXT_texture3D, GL_IBM_rasterpos_clip, GL_ARB_point_parameters, 
    GL_EXT_draw_range_elements, GL_EXT_packed_pixels, GL_EXT_point_parameters, 
    GL_EXT_rescale_normal, GL_EXT_separate_specular_color, 
    GL_EXT_texture_edge_clamp, GL_SGIS_generate_mipmap, 
    GL_SGIS_texture_border_clamp, GL_SGIS_texture_edge_clamp, 
    GL_SGIS_texture_lod, GL_ARB_framebuffer_sRGB, GL_ARB_multitexture, 
    GL_EXT_framebuffer_sRGB, GL_IBM_multimode_draw_arrays, 
    GL_IBM_texture_mirrored_repeat, GL_ARB_texture_cube_map, 
    GL_ARB_texture_env_add, GL_ARB_transpose_matrix, 
    GL_EXT_blend_func_separate, GL_EXT_fog_coord, GL_EXT_multi_draw_arrays, 
    GL_EXT_secondary_color, GL_EXT_texture_env_add, 
    GL_EXT_texture_filter_anisotropic, GL_EXT_texture_lod_bias, 
    GL_INGR_blend_func_separate, GL_NV_blend_square, GL_NV_light_max_exponent, 
    GL_NV_texgen_reflection, GL_NV_texture_env_combine4, GL_S3_s3tc, 
    GL_SUN_multi_draw_arrays, GL_ARB_texture_border_clamp, 
    GL_ARB_texture_compression, GL_EXT_framebuffer_object, 
    GL_EXT_texture_compression_s3tc, GL_EXT_texture_env_combine, 
    GL_EXT_texture_env_dot3, GL_MESA_window_pos, GL_NV_packed_depth_stencil, 
    GL_NV_texture_rectangle, GL_ARB_depth_texture, GL_ARB_occlusion_query, 
    GL_ARB_shadow, GL_ARB_texture_env_combine, GL_ARB_texture_env_crossbar, 
    GL_ARB_texture_env_dot3, GL_ARB_texture_mirrored_repeat, 
    GL_ARB_window_pos, GL_EXT_stencil_two_side, GL_EXT_texture_cube_map, 
    GL_NV_depth_clamp, GL_NV_fog_distance, GL_APPLE_packed_pixels, 
    GL_APPLE_vertex_array_object, GL_ARB_draw_buffers, 
    GL_ARB_fragment_program, GL_ARB_fragment_shader, GL_ARB_shader_objects, 
    GL_ARB_vertex_program, GL_ARB_vertex_shader, GL_ATI_draw_buffers, 
    GL_ATI_texture_env_combine3, GL_ATI_texture_float, GL_EXT_shadow_funcs, 
    GL_EXT_stencil_wrap, GL_MESA_pack_invert, GL_NV_primitive_restart, 
    GL_ARB_depth_clamp, GL_ARB_fragment_program_shadow, 
    GL_ARB_half_float_pixel, GL_ARB_occlusion_query2, GL_ARB_point_sprite, 
    GL_ARB_shading_language_100, GL_ARB_sync, GL_ARB_texture_non_power_of_two, 
    GL_ARB_vertex_buffer_object, GL_ATI_blend_equation_separate, 
    GL_EXT_blend_equation_separate, GL_OES_read_format, 
    GL_ARB_color_buffer_float, GL_ARB_pixel_buffer_object, 
    GL_ARB_texture_compression_rgtc, GL_ARB_texture_float, 
    GL_ARB_texture_rectangle, GL_ATI_texture_compression_3dc, 
    GL_EXT_packed_float, GL_EXT_pixel_buffer_object, 
    GL_EXT_texture_compression_dxt1, GL_EXT_texture_compression_rgtc, 
    GL_EXT_texture_mirror_clamp, GL_EXT_texture_rectangle, 
    GL_EXT_texture_sRGB, GL_EXT_texture_shared_exponent, 
    GL_ARB_framebuffer_object, GL_EXT_framebuffer_blit, 
    GL_EXT_framebuffer_multisample, GL_EXT_packed_depth_stencil, 
    GL_ARB_vertex_array_object, GL_ATI_separate_stencil, 
    GL_ATI_texture_mirror_once, GL_EXT_draw_buffers2, GL_EXT_draw_instanced, 
    GL_EXT_gpu_program_parameters, GL_EXT_texture_array, 
    GL_EXT_texture_compression_latc, GL_EXT_texture_integer, 
    GL_EXT_texture_sRGB_decode, GL_EXT_timer_query, GL_OES_EGL_image, 
    GL_MESA_texture_array, GL_ARB_copy_buffer, GL_ARB_depth_buffer_float, 
    GL_ARB_draw_instanced, GL_ARB_half_float_vertex, GL_ARB_instanced_arrays, 
    GL_ARB_map_buffer_range, GL_ARB_texture_rg, GL_ARB_texture_swizzle, 
    GL_ARB_vertex_array_bgra, GL_EXT_separate_shader_objects, 
    GL_EXT_texture_swizzle, GL_EXT_vertex_array_bgra, 
    GL_NV_conditional_render, GL_AMD_conservative_depth, 
    GL_AMD_draw_buffers_blend, GL_AMD_shader_stencil_export, 
    GL_ARB_ES2_compatibility, GL_ARB_blend_func_extended, GL_ARB_debug_output, 
    GL_ARB_draw_buffers_blend, GL_ARB_draw_elements_base_vertex, 
    GL_ARB_explicit_attrib_location, GL_ARB_fragment_coord_conventions, 
    GL_ARB_provoking_vertex, GL_ARB_sampler_objects, GL_ARB_seamless_cube_map, 
    GL_ARB_shader_stencil_export, GL_ARB_shader_texture_lod, 
    GL_ARB_texture_rgb10_a2ui, GL_ARB_vertex_type_2_10_10_10_rev, 
    GL_EXT_provoking_vertex, GL_EXT_texture_snorm, 
    GL_MESA_texture_signed_rgba, GL_NV_texture_barrier, GL_ARB_robustness, 
    GL_ARB_shader_bit_encoding, GL_ARB_transform_feedback2, 
    GL_ARB_transform_feedback3, GL_ARB_base_instance, 
    GL_ARB_conservative_depth, GL_ARB_texture_storage, 
    GL_ARB_transform_feedback_instanced, GL_EXT_transform_feedback, 
    GL_ARB_invalidate_subdata 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T03:41:37.647

您的显卡[Mobility Radeon 4330](http://www.amd.com/us/products/notebook/graphics/ati-mobility-hd-4000/hd-4300/Pages/hd-4300-specs.aspx)的驱动程序目前是 Mesa，它支持 OpenGL 2.1，而现代 OpenGL 教程需要 3.1+ OpenGL 支持。

具体来说，虽然[http://www.opengl.org/sdk/docs/man2/xhtml/glVertexAttribPointer.xml](http://www.opengl.org/sdk/docs/man2/xhtml/glVertexAttribPointer.xml)说版本 2.0+ 就足够了，但有些驱动程序并不完全支持它。我建议您将显卡的最新驱动程序升级到 OpenGL 3.2，您可以愉快地尝试[OGL](http://ogldev.atspace.co.uk)或[Arcsynthesis](http://www.arcsynthesis.org/gltut/)等现代教程中的所有练习。

# regex - 正则表达式只接受数字。第一个字符不能为 0

> ID：14132404
> 
> 赞同：33
> 
> 时间：2013-01-03T02:51:35.493
> 
> 标签：regex

我有一个使用 .NET 创建的文本框。

通过使用该文本框，用户只能输入数字。但不是从 0 开始。从 1-9 开始。用户在第一个字符处输入 1-9 后，用户可以输入 0。

```
Regex reg = null;
reg = new System.Text.RegularExpressions.Regex("^[1-9][0-9]*$")
return reg.IsMatch(str); 
```

那是我的正则表达式。通过使用它，我无法键入 1-9。但只有 0 和字母表。但是如果我使用 ^[1-9] 我可以输入数字，但不能输入 0。

我已经尝试了你们所有人建议的所有答案。但仍然无法工作。这不像我没有阅读你所有的答案。

这是图片..

![在此处输入图像描述](../Images/691880628dc12b5cb8ba85f563beb31d.png)

我想第一次验证，用户只能输入数字，但从不是 0 或字母而是 1-9 的值开始。在第一个字符之后，用户只能键入 0-9。

我确实使用了 Int.TryParse，但我在按下按钮进行处理后使用它。

```
reg = new System.Text.RegularExpressions.Regex("^[^0-9]"); 
```

该正则表达式只接受从 0 到 9 的数字。

```
reg = new System.Text.RegularExpressions.Regex("^[^1-9]"); 
```

该正则表达式只接受从 1 到 9 的数字。

如何在第二个字符的正则表达式中添加更多表达式，直到其余只接受数字 0-9？

顺便说一句，我不在乎 0.99，因为在这里，价格是固定的。不是 0.99 或 0.123..

还有其他方法吗？谢谢。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-01-03T02:53:06.410

如果您正在查看价格之类的东西，则需要考虑这`0.99`可能是完全有效的。对于类似的事情，我会简单地从一个不复杂的开始`^[0-9]*(\.[0-9]{0,2})?$`（同样可能有一些边缘情况可能会使其更复杂，比如小数点后三位等等）并*允许*前导零，因为它们不会“损坏“无论如何，价值。

它*必须*以非零开头，只需将初始更改`[0-9]*`为 a `[1-9][0-9]*`。仅对于整数（如您添加的示例数据所示），这将是：

```
^[1-9][0-9]*$ 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-01-03T02:55:58.483

要匹配以除零以外的任何数字开头的数字：

```
^[1-9][0-9]*$ 
```

如果你也想匹配 0 ：

```
^([1-9][0-9]*)|([0]+)$ 
```

如果您只想要一个零，请删除最后一个加号

在第一个非零之后允许任何字母数字：

```
^[1-9a-zA-Z][0-9a-zA-Z]*$ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T02:53:28.050

由于您的代码是 .NET，因此您**不应使用正则表达式来解析 Integer**。只需使用[UInt32.TryParse()](http://msdn.microsoft.com/en-us/library/system.uint32.tryparse.aspx)方法

```
uint num=0;
if(UInt32.TryParse(str, out num)){
    Console.WriteLine("Converted '{0}' to {1}.", str, num);   
}else{
    Console.WriteLine("conversion of '{0}' failed.", value==null? "": value);
} 
```

### 旧答案

这个简单的正则表达式就可以了`^[1-9]\d*$`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-09-21T09:24:41.953

这对我来说最有效：

```
^(?!(0))[0-9]$ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-01T13:13:18.460

这是你想要的：

```
^(([1-9]\d*)|([0]{1}))(\.\d+)?$ 
```

它也接受像这些数字这样的小数：

```
423423.423423

0.4234

0 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-04-06T02:14:58.683

有时，正则表达式甚至无法在某些浏览器中工作。因此这里有一个类似的逻辑：

```
function name(e)
{

var key = window.event ? e.keyCode : e.which;
var keychar = String.fromCharCode(key);
var reg = /\d/;

var textField=document.getElementById("ID").value;

if(key==48)
{
if(textField==""||textField==null)
{
e.preventDefault();
return false;
}

else{
return true;
}
}

else
{
var reg = /\d/;
return reg.test(keychar);
}
} 
```

# c# - 从txt文件读取和写入？

> ID：14132406
> 
> 赞同：0
> 
> 时间：2013-01-03T02:51:46.617
> 
> 标签：c#, stringwriter, stringreader

我正在用 c# 创建一个游戏，但我遇到了一个问题。我希望我的游戏将窗帘标签保存到 txt 文件中，这里举个例子：

```
Label1.Text = "Character Name: "
Label2.Text = "Level: "
Label3.Text = "Exp: " 
```

现在我想做的是从 txt 文件中检索“字符名称：[名称]”？但我也想在退出游戏时将名称保存到 txt 文件中。所以这可能是一个更好的例子：

我想从 txt 文件中检索 Level: [LVL]，当玩家完成并退出我的游戏时，我希望它用新级别覆盖现有的行？

我想我需要使用`StringReader`or `StringWriter`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T03:27:42.737

这是一个使用 XML 序列化和数据模型的快速示例。确保`using System.Xml.Serialization;`文件顶部有一个命名空间导入行。

将您希望保存/加载的数据声明为一个简单的类，例如：

```
public class SaveData
{
    public string CharacterName { get; set; }
    public int Level { get; set; }
    public int Experience { get; set; }
} 
```

当您要保存时，请构建该数据模型：

```
SaveData saveState = new SaveData()
{
    CharacterName = myCharacter.Name,
    Level = myCharacter.Level,
    Experience = myCharacter.Experience
}; 
```

要保存到文件，请使用`XmlSerializer`该类并打开文件流以将其序列化为：

```
public void SaveStateToFile(SaveData state)
{
    XmlSerializer serializer = new XmlSerializer(typeof(SaveData));
    using (TextWriter writeFileStream = new StreamWriter(@"C:\savefile.xml"))
    {
        serializer.Serialize(writeFileStream, state);
    }
} 
```

这将创建一个包含以下内容的 xml 文件，例如：

```
<?xml version="1.0" encoding="utf-8"?>
<SaveData xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <CharacterName>John</CharacterName>
  <Level>10</Level>
  <Experience>9001</Experience>
</SaveData> 
```

因此，如果需要，这应该很容易编辑。要重新加载数据：

```
public SaveData LoadStateFromFile()
{
    XmlSerializer serializer = new XmlSerializer(typeof(SaveData));
    using (FileStream readFileStream = new FileStream(@"C:\savefile.xml", FileMode.Open, FileAccess.Read, FileShare.Read))
    {
        return (SaveData)serializer.Deserialize(readFileStream);
    }
} 
```

这应该为您提供一个很好的类型安全数据模型，然后根据需要重新绑定您的 GUI：

```
SaveData loadedData = LoadStateFromFile();
Console.WriteLine(loadedData.CharacterName); //John
Console.WriteLine(loadedData.Level); //10
Console.WriteLine(loadedData.Experience); //9001

Label1.Text = "Character Name: " + loadedData.CharacterName;
Label2.Text = "Level: " + loadedData.Level;
Label3.Text = "Exp: " + loadedData.Experience; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T03:03:37.143

您可以尝试使用 XML 作为设置文件。这是一个非常简单的例子：

创建一个新的 XML 文件，用字符名称填充它并保存：

```
XElement x = new XElement("Settings");
x.Add(new XElement("CharacterName", "John Doe"));
x.Save("1.xml"); 
```

加载保存的 xml 并打印输出：

```
XElement loaded = XElement.Load("1.xml");
Console.WriteLine(loaded.Element("CharacterName").Value); 
```

这是一篇 MSDN 文章开头：[LINQ to XML](http://msdn.microsoft.com/en-us/library/bb387098.aspx)

* * *

如果 .NetFramework 3.5 及更高版本不可用，您可以使用`System.Xml`命名空间中的类。看

1.  [.NET 中的 XML：.NET Framework XML 类和 C# 提供简单、可扩展的数据操作](http://msdn.microsoft.com/en-us/magazine/cc302158.aspx)
2.  [使用 XPath 和 XmlDocument 操作 XML 数据](http://www.codeproject.com/Articles/9494/Manipulate-XML-data-with-XPath-and-XmlDocument-C)
3.  [使用 XmlDocument 类编写 XML](http://csharp.net-tutorials.com/xml/writing-xml-with-the-xmldocument-class/)

...只是用*C# xmldocument*谷歌。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T02:56:36.070

你可以试试[SQLite](http://www.sqlite.org/)。它是保存在文本文件中的数据库。您将能够比使用自己的纯文本更好地组织数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T03:18:46.643

另一种选择是使用旧的 INI 文件。这是一个很棒[的使用 C#](http://www.codeproject.com/Articles/1966/An-INI-file-handling-class-using-C)示例的 INI 文件处理类，它将帮助您处理它。这是一个使用它的例子：

像这样创建一个INIFile

```
INIFile ini = new INIFile("C:\\test.ini"); 
```

用于`IniWriteValue`将新值写入节中的特定键或用于`IniReadValue`从特定节中的键读取值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-03T11:20:30.273

这是我最终使用的代码，它工作正常：

```
XmlDocument xmlDoc = new XmlDocument();
XmlNode rootNode = xmlDoc.CreateElement("Info");
xmlDoc.AppendChild(rootNode);

XmlNode userNode = xmlDoc.CreateElement("Username");
userNode.InnerText = Username.Text;
rootNode.AppendChild(userNode);

xmlDoc.Save(gameFolder + Username.Text + ".sav"); 
```

我使用了来自@Konstantin Vasilcov 的资源

# php - PHP 保护网页：受限区域

> ID：14132407
> 
> 赞同：-4
> 
> 时间：2013-01-03T02:51:49.350
> 
> 标签：php, html, mysql

我的登录不是很安全，我只想在登录时显示页面，但我可以从浏览器显式调用它们。我怎样才能轻松地限制这些页面，所以没有人看到是否已注销:-(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T02:54:05.047

您必须学习 PHP 的基本子集，包括会话管理。或者，同时，您可以使用 .htaccess 来保护目录

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T02:56:22.400

```
session_start();
$session = $_SESSION['userID'];

if(!isset($session))
{
 die("You must be logged in"); //Or whatever else you may do, such as take them to the homepage.
} 
```

同样，这是非常基础的 - 很明显，您对 PHP、安全性或任何相关知识都没有很高的了解。

# java - java对Thread.interrupted()的困惑

> ID：14132409
> 
> 赞同：0
> 
> 时间：2013-01-03T02:52:07.900
> 
> 标签：java, interrupt

我正在阅读关于线程的 oracle java 教程，我看到了这个例子

源代码：http : [//docs.oracle.com/javase/tutorial/essential/concurrency/interrupt.html](http://docs.oracle.com/javase/tutorial/essential/concurrency/interrupt.html)

*如果一个线程很长时间没有调用抛出 InterruptedException 的方法怎么办？然后它必须定期调用 Thread.interrupted，如果收到中断则返回 true。例如：*

```
for (int i = 0; i < inputs.length; i++) {
      heavyCrunch(inputs[i]);
      if (Thread.interrupted()) {
           // We've been interrupted: no more crunching.
      return;
} 
```

本教程补充说： *中断机制是使用称为中断状态的内部标志实现的。调用 Thread.interrupt 设置此标志。当线程通过调用静态方法 Thread.interrupted 检查中断时，中断状态被清除。一个线程用来查询另一个线程的中断状态的非静态 isInterrupted 方法不会改变中断状态标志。*

*按照惯例，任何通过抛出 InterruptedException 退出的方法都会在这样做时清除中断状态。然而，中断状态总是有可能被另一个线程调用中断立即再次设置。*

现在我很困惑。什么时候发生？如果有中断，线程不应该收到 InterruptedException 吗？

什么时候有人可能会使用这些方法来检查他们的代码？Thread.interrupt（标志）是静态的，所以通过上面的检查，我们实际上检查是否有任何线程被中断？即使是这种情况，根据教程，**当线程通过调用静态方法 Thread.interrupted 检查中断时，中断状态将被清除。** 或**任何通过抛出 InterruptedException 退出的方法都会在这样做时清除中断状态**

那么，我错过了什么吗？或者这只是有用的，如果某个线程收到了一个中断，但没有检查它，或者没有抛出它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T04:26:45.640

这是 Thread.interrupted 实现

```
public static boolean interrupted() {
    return currentThread().isInterrupted(true);
}

private native boolean isInterrupted(boolean ClearInterrupted); 
```

如您所见，它只能检查/重置当前线程的中断状态。如果它不是静态的，您可以在其他线程上调用它并重置它们的状态，这是 API 不允许的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T02:55:43.920

并非所有方法 in 都会`Thread`抛出`InterrupedException`s。它最常见于睡眠和等待，或任何耗时的方法。这就是 Java 实现它的方式。（`sleep(...)`是`native`代码，所以我不能告诉你来源。）

例如：

```
try {
    Thread.sleep(1000); // one sec
} catch(InterruptedException e){
} 
```

但是您不能强制在子句中包含一个简单的`for`循环。`try..catch`

如果您子类`Thread`化，则应遵循已发布的约定。

* * *

对于您的第二个问题，关于该`static`方法，这是内部代码：

```
public static boolean interrupted() {
    return currentThread().isInterrupted(true);
} 
```

所以你可以看到，它只是在当前线程中设置了一个*实例。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T03:11:03.110

很多时候一个线程正在做很多等待或*阻塞*。在几乎所有这些情况下，执行阻塞的方法都支持 InterruptedException。一些例子：

1.  Thread.sleep(毫秒);
2.  obj = arrayBlockingQueue.take();
3.  obj.wait();

参考文章指出的是，如果您的线程没有阻塞，这意味着没有支持 InterruptedException 的方法，那么您有责任检查您的线程是否已被中断。这是通过测试来完成的`Thread.interrupted()`。

该方法`Thread.interrupt()`实际上不是静态的，而是从另一个线程调用以中断该线程。请参阅以下内容：

[线程中断（）](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#interrupt%28%29)

那有意义吗？

# dojo - 如何以编程方式创建 dojo.mobile.view ？

> ID：14132410
> 
> 赞同：0
> 
> 时间：2013-01-03T02:52:16.950
> 
> 标签：dojo

我现在正在开发一个应用程序，我需要使用动态 ID 创建 dojo.mobile.view，我需要有关如何在单击事件中的 dojo 视图中创建视图的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T05:04:30.060

这是来自[http://dojotoolkit.org/reference-guide/1.8/dojox/mobile/View.html的 dojo 参考指南的代码片段](http://dojotoolkit.org/reference-guide/1.8/dojox/mobile/View.html)

它为您提供了足够的信息来在运行时创建视图。

```
var view1 = new View(null, "view1");

var heading1 = new Heading({
  label: "View 1"
});
view1.addChild(heading1);

var categ1 = new RoundRectCategory({
  label: "Documents"
});
view1.addChild(categ1);

var list1 = new RoundRectList();
view1.addChild(list1);

var counter = 4;
for(var i = 1; i <= 3; i++){
  var item1 = new ListItem({
    icon: "images/i-icon-"+i+".png",
    label: "Document 000"+counter,
    moveTo: "view2"
  });
  list1.addChild(item1);
  counter++;
}

view1.startup(); 
```

# html - 如何使用 CSS 制作子菜单？

> ID：14132412
> 
> 赞同：0
> 
> 时间：2013-01-03T02:52:48.550
> 
> 标签：html, css, drop-down-menu, submenu

[http://i.imgur.com/DbMCI.jpg](http://i.imgur.com/DbMCI.jpg)

[http://i.imgur.com/i9r6N.jpg](http://i.imgur.com/i9r6N.jpg)

请看上图，我想要做的是把“手套”和“靴子”标签推到“blah UGG”的左边

我试图将子菜单设置为相对位置，将子子菜单设置为绝对位置，但是子子菜单消失了，如何将子子菜单推到子菜单的左侧？

这是我的 HTML：

```
<div id="nav-bar" class="cf">
                <nav class="cf">
                    <ul class="topmenu">
                        <li class="hometop"><a href="#"class="hometop">Home</a></li>
                        <li ><a href="#" >Catagory</a>
                            <ul class="submenu">
                                <li><a href="#">Blah Blah</a></li>
                                <li><a href="#">Blah UGGdfddfdf</a>
                                    <ul>
                                        <li>Boots</li>
                                        <li>Gloves</li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                        <li ><a href="#">About</a></li>
                        <li ><a href="#">How To Order</a></li>
                    </ul>
                </nav>

            </div> 
```

这是我的CSS：

```
.cf ul li{
float:left;
margin: 0;
padding: 0;
list-style:none;
font-family:"open sans", sans-serif;

}

.cf li a {
display:block;
padding:0 1em;
line-height: 2.5em;
color:#FFFFFF;
}

.cf li a:hover {
background-color:#ffa627;
}

li{
position:relative;
}
ul.submenu {
float:none;
background: #222;
position:absolute;
left:-9000em;
z-index:1;
width:200px;
height:auto;
}

.topmenu li:hover ul{
left:0;
}   

ul.submenu li {
float:none;
font-size: 12px;
position:relative;

}

.submenu li ul li {
float:none; 
color:#FFFFFF;
display:block;
padding:0 1em;
line-height: 2.5em;

}

#nav-bar nav {
background-color: #222;

}

.cf:before,
.cf:after {
content: " "; /* 1 */
display: table; /* 2 */
}

.cf:after {
clear: both;
}

/**
 * For IE 6/7 only
 * Include this rule to trigger hasLayout and contain floats.
 */
.cf {
    *zoom: 1;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T02:56:06.380

您可能需要考虑将其更改`float: left;`为`float: right`：

```
.cf ul li{
float:right;
margin: 0;
padding: 0;
list-style:none;
font-family:"open sans", sans-serif;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T03:48:42.813

您不需要所有这些嵌套标签和 clearfixes。看看这个[codepen](http://codepen.io/joe/pen/rtnDu)。
每当您有浮动元素时，请`overflow: hidden`在其父级上使用。这使得父级适合其子级的内容。

# python - 为什么我尝试向 pypi 注册时 setup.py 失败？

> ID：14132413
> 
> 赞同：1
> 
> 时间：2013-01-03T02:53:03.700
> 
> 标签：python, markdown, setuptools, restructuredtext, pypi

我在用 PyPI 注册我的最新项目时遇到了一些麻烦，我希望你们中的一个人能告诉我我做错了什么。

我的目录结构如下：

```
Scrappy/
|-- README.md
|-- setup.py
|-- manifest.in
|-- scrappy
|   |-- __init__.py
|   |-- core.py
|   |-- formatters.py
|   |-- docopty.py
|   |-- gui.py
|   |-- scrappy.py
|   |-- scrappy.conf 
```

我的`manifest.in`文件结构如下：

```
include README.md
include scrappy/scrappy.conf 
```

我的 setup.py 文件结构如下：

```
from setuptools import setup

setup(
    name='Scrappy',
    version='0.2.1 alpha',
    author='Blz McBlz',
    author_email='xxxx@xxxx.com',
    packages=['scrappy'],
    include_package_data=True,
    install_requires=['guessit', 'tvdb_api', 'ez_setup', 'titlecase', 'hachoir-metadata'],
    url='https://github.com/louist87/scrappy',
    license='GPL 3.0',
    description='Rename video files based on information scraped from thetvdb.com',
    keywords=["TVDB", "thetvdb", "rename", "broadcatching", "media"],
    long_description=open('README.md').read()
) 
```

完整的追溯可以在[这里找到](http://paste.ubuntu.com/1490510/)

我尝试`README.md`通过`lines = open('README.md').read()`. 没有引发错误，并且文本确实在`lines`变量中，如预期的那样。

**编辑：** [这](http://paste.ubuntu.com/1492206/)是有`README.md`问题的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T00:36:44.927

问题是 setuptools 在 long_description 字段中需要 reStructuredText 而不是 markdown 语法。

# excel - 在 vba 模块中使用 target.row 时出错

> ID：14132420
> 
> 赞同：2
> 
> 时间：2013-01-03T02:53:39.497
> 
> 标签：excel, vba

我正在创建一个 excel 2007 应用程序，它使用完全相同的 VBA 代码在 2 列中强制使用大写字母。此代码用于 8 个不同的工作表。我试图在一个模块中创建一个子例程，以便我可以在 8 个工作表中的每一个下调用该子例程，但它不起作用。

当我直接在每个工作表下添加以下代码时，它起作用了：

```
Private Sub Worksheet_Change(ByVal Target As Range)
Dim TargetRowNumber  As Integer
Dim targetColumnNumber As Integer

If (Target.Row >= 6 And Target.Row <= 500) Then

    If (Not Intersect(Target, Range("F6:F500")) Is Nothing) Then
      If Target.Column = 6 Then
       Application.EnableEvents = False
       Range("$F" & Target.Row).Value = UCase(Range("$F" & Target.Row).Value)
       Application.EnableEvents = True
      End If
    End If

    If (Not Intersect(Target, Range("K6:K500")) Is Nothing) Then
      If Target.Column = 11 Then
        Application.EnableEvents = False
        Range("$K" & Target.Row).Value = UCase(Range("$K" & Target.Row).Value)
        Application.EnableEvents = True
      End If
    End If

end if

end sub 
```

但是，如果我使用相同的代码创建一个模块并尝试调用每个工作表下的子例程，我会收到以下错误：运行时错误“424”：需要对象。

模块中的代码：

```
Sub convert_upper()
Dim TargetRowNumber  As Integer
Dim targetColumnNumber As Integer

If (Target.Row >= 6 And Target.Row <= 500) Then

    If (Not Intersect(Target, Range("F6:F500")) Is Nothing) Then
      If Target.Column = 6 Then
       Application.EnableEvents = False
       Range("$F" & Target.Row).Value = UCase(Range("$F" & Target.Row).Value)
       Application.EnableEvents = True
      End If
    End If

    If (Not Intersect(Target, Range("K6:K500")) Is Nothing) Then
      If Target.Column = 11 Then
        Application.EnableEvents = False
        Range("$K" & Target.Row).Value = UCase(Range("$K" & Target.Row).Value)
        Application.EnableEvents = True
      End If
    End If

End If

End Sub 
```

每个工作表下的代码以调用子例程：

```
Private Sub Worksheet_Change(ByVal Target As Range)

   convert_upper

End Sub 
```

这是我第一次尝试在 vba 中编程。我试图在网上找到解决方案，但没有成功。如果有人可以帮助我，我将不胜感激。

太感谢了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T03:20:18.443

Chris 有一个很好的答案来让您的个人事件子例程正常工作。

但是，更简单的方法是使用工作簿级别的`SheetChange`事件。这与工作表级事件的工作方式相同，只是每次更改工作簿中的任何工作表时都会触发它。它的参数还包括`Sh`，`Target`以便您可以测试触发事件的工作表。假设您不希望工作簿中的每张工作表都触发事件，您会想要这样做。

这是我认为对您有用的一些代码。我也加强了你的逻辑。将其粘贴到工作簿的`ThisWorkbook`模块中：

```
Private Sub Workbook_SheetChange(ByVal Sh As Object, ByVal Target As Range)
Dim RangeToUpper As Excel.Range
Dim AreaToUpper As Excel.Range

Select Case Sh.Name
Case "Sheet1", "Sheet2"
    If (Not Intersect(Target, Sh.Range("F6:F500")) Is Nothing) Or _
       Not Intersect(Target, Sh.Range("K6:K500")) Is Nothing Then
        Set RangeToUpper = Intersect(Target, Union(Sh.Range("F6:F500"), Sh.Range("K6:K500")))
        On Error GoTo Err_Handler
        Application.EnableEvents = False
        For Each AreaToUpper In RangeToUpper.Areas
            AreaToUpper.Value = UCase(AreaToUpper.Value)
        Next AreaToUpper
    End If
End Select

Err_Handler:
Application.EnableEvents = True
End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T03:09:45.743

你需要考虑`Variable Scope`

`Sub`将您的声明更改为

```
Sub convert_upper(Target as Range) 
```

并将其称为

```
convert_upper Target 
```

您还需要限定`Range`您共同的引用`Sub`（否则代码指的是`ActiveSheet`）。例如（适用于 的所有用途`Range`）

```
With Target.Parent
    .Range("$F" & Target.Row).Value = UCase(.Range("$F" & Target.Row).Value)
End With 
```

# jquery - “无法识别的表达式：。”带过滤器

> ID：14132421
> 
> 赞同：0
> 
> 时间：2013-01-03T02:53:44.313
> 
> 标签：jquery, filter

我有时会收到一个错误...

> 未捕获的错误：语法错误，无法识别的表达式：div。

代码是

```
divs.filter('div.' + menuID).show('slide', {direction: 'right'}, 200); 
```

我也试过

```
divs.filter('.' + menuID).show('slide', {direction: 'right'}, 200); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T02:57:38.547

menuID 为 null，或者当强制转换为字符串时变为 '' 的其他内容。

您应该添加保护以确保在 menuID 为 null、未定义或空字符串时不会运行此代码。

# html - 如何使用 CSS 将两个元素设置在同一行

> ID：14132428
> 
> 赞同：-2
> 
> 时间：2013-01-03T02:54:12.250
> 
> 标签：html, css

```
.image{
position:absolute;
display:inline-block;
} 
```

目前我有 2 张大小相同的图像，我想让它们同样共享屏幕。左边是img a，右边是img b。问题是如果我将它设置为类，即使我使用内联块，两个图像也会重叠。限制是我不能使用相对。因此，有没有办法实现这一目标？我是否需要为每个图像设置一个 id 才能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T03:09:59.420

您是否试图让它们的宽度共享视口的 50%，而高度是视口的 100%？这可以通过这种方式实现：

HTML：

```
<img src="source.html" />
<img src="source.html" /> 
```

CSS：

```
html, body {
    width: 100%;
    height: 100%;
}

img {
    ​width: 50%;
    height: 100%;
    float: left;
}​ 
```

[JS 小提琴示例](http://jsfiddle.net/UrfTu/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T03:03:26.117

这是我尝试过的示例代码。

```
<div id="container">
    <img src="http://www.rational-animal.org/wp-content/uploads/2012/02/Facebook-logo-small-300x300.png" height="100" width="100" />
    <img src="http://www.rational-animal.org/wp-content/uploads/2012/02/Facebook-logo-small-300x300.png" height="100" width="100" />
</div> 
```

这将是 CSS

```
img {
    width: 50%;
    height: 100%;
    float: left;
    display: inline-block
} 
```

![在此处输入图像描述](../Images/193cabccba9e8aa8541527e68bad1029.png)

以上结果。那是你要找的吗？

PS：由于绝对定位，您的图像会重叠。

希望这可以帮助。

# ios - 仅在设备上出现 RestSharp/MonoTouch 错误

> ID：14132430
> 
> 赞同：2
> 
> 时间：2013-01-03T02:54:48.800
> 
> 标签：ios, xamarin.ios, restsharp

我遇到了这个错误，它只发生在设备上而不是模拟器上。我正在尝试保存包含以下字段的用户配置文件：名字、姓氏、电子邮件、性别、出生日期和可选照片（字节 []）。

无论我是否使用照片，都会调用 API，然后我立即收到此错误。看起来该错误与 Rest 反序列化有关。

```
Stacktrace:

at RestSharp.RestClient.Deserialize<T> (RestSharp.IRestRequest,RestSharp.RestResponse) <0x001ab>
at RestSharp.RestClient/<ExecuteAsync>c__AnonStorey9`1.<>m__19 (RestSharp.RestResponse,RestSharp.RestRequestAsyncHandle) <0x00147>
at RestSharp.RestClient.ProcessResponse (RestSharp.HttpResponse,RestSharp.RestRequestAsyncHandle,System.Action`2<RestSharp.RestResponse, RestSharp.RestRequestAsyncHandle>) <IL 0x0000b, 0x000db>
at RestSharp.RestClient/<ExecuteAsync>c__AnonStorey8.<>m__15 (RestSharp.HttpResponse) <IL 0x00013, 0x0009b>
at RestSharp.Http.ExecuteCallback (RestSharp.HttpResponse,System.Action`1<RestSharp.HttpResponse>) <IL 0x00002, 0x00093>
at RestSharp.Http/<ResponseCallback>c__AnonStorey6.<>m__5 (System.Net.HttpWebResponse) <IL 0x00018, 0x000c3>
at RestSharp.Http.GetRawResponseAsync (System.IAsyncResult,System.Action`1<System.Net.HttpWebResponse>) <IL 0x0005f, 0x0078b>
at RestSharp.Http.ResponseCallback (System.IAsyncResult,System.Action`1<RestSharp.HttpResponse>) <IL 0x00060, 0x00363>
at RestSharp.Http/<RequestStreamCallback>c__AnonStorey5.<>m__4 (System.IAsyncResult) <IL 0x0000d, 0x00093>
at System.Net.WebAsyncResult.CB (object) [0x00000] in /Developer/MonoTouch/Source/mono/mcs/class/System/System.Net/WebAsyncResult.cs:148
at (wrapper runtime-invoke) object.runtime_invoke_dynamic (intptr,intptr,intptr,intptr) <0xffffffff>

Native stacktrace:

0   ScrapBoomiPhone                     0x00f5c5e5 mono_handle_native_sigsegv + 244
1   ScrapBoomiPhone                     0x00f7560d sigabrt_signal_handler + 112
2   libsystem_c.dylib                   0x34e5ce93 _sigtramp + 42
3   libsystem_c.dylib                   0x34e53123 pthread_kill + 58
4   libsystem_c.dylib                   0x34e8f973 abort + 94
5   ScrapBoomiPhone                     0x010160bb monoeg_g_log + 122
6   ScrapBoomiPhone                     0x00f52383 get_numerous_trampoline + 134
7   ScrapBoomiPhone                     0x00f5264b mono_aot_get_imt_thunk + 34
8   ScrapBoomiPhone                     0x00fc5e05 initialize_imt_slot + 72
9   ScrapBoomiPhone                     0x00fc6bcb build_imt_slots + 642
10  ScrapBoomiPhone                     0x00fc6ca5 mono_vtable_build_imt_slot + 80
11  ScrapBoomiPhone                     0x00f5e60d mono_convert_imt_slot_to_vtable_slot + 212
12  ScrapBoomiPhone                     0x00f5e7b9 common_call_trampoline + 180
13  ScrapBoomiPhone                     0x00f5d48b mono_vcall_trampoline + 158
14  ScrapBoomiPhone                     0x00752bd8 generic_trampoline_vcall + 136
15  ScrapBoomiPhone                     0x002656bc RestSharp_RestClient__ExecuteAsyncc__AnonStorey9_1__m__19_RestSharp_RestResponse_RestSharp_RestRequestAsyncHandle + 328
16  ScrapBoomiPhone                     0x0020d7a4 RestSharp_RestClient_ProcessResponse_RestSharp_HttpResponse_RestSharp_RestRequestAsyncHandle_System_Action_2_RestSharp_RestResponse_RestSharp_RestRequestAsyncHandle + 220
17  ScrapBoomiPhone                     0x002651a8 RestSharp_RestClient__ExecuteAsyncc__AnonStorey8__m__15_RestSharp_HttpResponse + 156
18  ScrapBoomiPhone                     0x001fe7d0 RestSharp_Http_ExecuteCallback_RestSharp_HttpResponse_System_Action_1_RestSharp_HttpResponse + 148
19  ScrapBoomiPhone                     0x00264c74 RestSharp_Http__ResponseCallbackc__AnonStorey6__m__5_System_Net_HttpWebResponse + 196
20  ScrapBoomiPhone                     0x001fe020 RestSharp_Http_GetRawResponseAsync_System_IAsyncResult_System_Action_1_System_Net_HttpWebResponse + 1932
21  ScrapBoomiPhone                     0x001fe41c RestSharp_Http_ResponseCallback_System_IAsyncResult_System_Action_1_RestSharp_HttpResponse + 868
22  ScrapBoomiPhone                     0x00264a9c RestSharp_Http__RequestStreamCallbackc__AnonStorey5__m__4_System_IAsyncResult + 148
23  ScrapBoomiPhone                     0x0035ad4c System_Net_WebAsyncResult_CB_object + 48
24  ScrapBoomiPhone                     0x006f7ff0 wrapper_runtime_invoke_object_runtime_invoke_dynamic_intptr_intptr_intptr_intptr + 200
25  ScrapBoomiPhone                     0x00f4a22f mono_jit_runtime_invoke + 1054
26  ScrapBoomiPhone                     0x00fc55ff mono_runtime_invoke + 90
27  ScrapBoomiPhone                     0x00fc5705 mono_runtime_delegate_invoke + 92
28  ScrapBoomiPhone                     0x00ff5ac1 async_invoke_thread + 2480
29  ScrapBoomiPhone                     0x00ff9c87 start_wrapper + 306
30  ScrapBoomiPhone                     0x0100ba5d thread_start_routine + 96
31  ScrapBoomiPhone                     0x00fdf939 gc_start_thread + 60
32  libsystem_c.dylib                   0x34e35311 <redacted> + 308
33  libsystem_c.dylib                   0x34e351d8 thread_start + 8

=================================================================
Got a SIGABRT while executing native code. This usually indicates
a fatal error in the mono runtime or one of the native libraries 
used by your application.
================================================================= 
```

我将非常感谢对此的任何见解。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T13:51:48.450

> 5 ScrapBoomiPhone 0x010160bb monoeg_g_log + 122

从您的堆栈跟踪中，该行暗示 Mono 运行时在崩溃之前尝试显示（记录）某些内容。在这种情况下，您应该使用 Xcode 的管理器来查看控制台日志。将打印一些文本，告诉您出了什么问题。

最常见的情况（6.0.8 之前）是缺少蹦床（0、1 或 2 型）。考虑到下面的堆栈帧，这更有可能：

> 6 ScrapBoomiPhone 0x00f52383 get_numerous_trampoline + 134

有关说明以及如何修复它，请参见[此处](http://docs.xamarin.com/ios/troubleshooting#Ran_out_of_trampolines_of_type_0)（但您仍然需要阅读控制台以了解需要哪种蹦床类型 - 或者它可能是其他东西）。

注意：（刚刚发布的）[MonoTouch 6.0.8的](http://docs.xamarin.com/ios/releases/MonoTouch_6/MonoTouch_6.0#MonoTouch_6.0.8) **主要**新功能之一是它消除了（开发人员）更改此设置的需要（它会自动适应）。希望它的存在很快就会被完全遗忘。

# ruby-on-rails - 嵌套模型的复选框字段

> ID：14132438
> 
> 赞同：1
> 
> 时间：2013-01-03T02:55:42.240
> 
> 标签：ruby-on-rails, forms

我有一个表格`fields_for`，每个人都有一个嵌套表格。这个想法是用户可以使用复选框选择要添加到预订中的人

```
<%= form_for(@booking) do |f| %>    
  <% people.each do |person| %>
    <%= f.fields_for :appointments do |builder| %>
      <p>                                     
        <%= builder.hidden_field :event_id, :value => @event.id %>  
        <%= builder.check_box :person_id, :value => person.id %>
      </p>
    <% end %>
  <% end %>
<% end %> 
```

问题是，复选框值始终为“1”如果我用 text_field 替换 check_box，我会正确显示所有字段，并使用正确的值，并且提交表单以创建预订。

如何让`check_box`字段以`person.id`非 1 作为值显示？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T03:05:59.567

您将不正确的参数传递给[`check_box`辅助函数](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-check_box)。

试试这个：

```
<%= builder.check_box :person_id, {}, person.id %> 
```

# php - 选择的查询结果放置在更多的 DIV 中

> ID：14132442
> 
> 赞同：0
> 
> 时间：2013-01-03T02:55:58.560
> 
> 标签：php, mysql

我试图从数据库中一次选择 3 个推荐。这对我来说没问题。但我的问题是我需要将这 3 个推荐同时放在 3 个 DIV 中。有人可以告诉我该怎么做吗？

```
 $q = "SELECT * FROM testimonials ORDER BY RAND() LIMIT 1";
        $r = mysqli_query($dbc, $q);

   while ( $row = mysqli_fetch_array($r, MYSQL_ASSOC) ) {

   }

 echo '<div class="testimonial-1">
                   <p>'. $testimonial. '</p>
                  </div>';

 echo '<div class="testimonial-2">
                   <p>'. $testimonial. '</p>
                  </div>';

 echo '<div class="testimonial-3">
                   <p>'. $testimonial. '</p>
                  </div>'; 
```

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T03:03:12.367

我对 mysqli 不是很熟悉，因为我仍在使用 mysql ..但我仍然可以就你的问题给你我个人的方法：

```
$class_ctr = 1;
while ( $row = mysqli_fetch_array($r, MYSQL_ASSOC) ) {
    echo '<div class="testimonial-'.$class_ctr.'">
        <p>'. $row['column_name_to_display']. '</p>
    </div>';
    $class_ctr++;
}
?> 
```

希望这能给你这个想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T03:17:00.727

```
$maxTestimonials = 3;
$query = "SELECT * FROM testimonials ORDER BY RAND() LIMIT $maxTestimonials";
$results = mysqli_query($databaseConnection, $query);

$count = 0;
$testimonialsTemplate = '<div class="testimonial-%d"><p>%s</p></div>';
while ($row = mysql_fetch_array($results, MYSQL_ASSOC))
{
    $count++;
    echo sprintf($testimonialsTemplate, $count, $row['column_name_to_display']);
} 
```

我还建议您研究[关注点分离](http://en.wikipedia.org/wiki/Separation_of_concerns)和[模型-视图-控制器](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)，这将帮助您以更易于维护（和可重用）的方式构建代码。

# arrays - 在clojure中循环并存储到数组

> ID：14132449
> 
> 赞同：0
> 
> 时间：2013-01-03T02:56:42.747
> 
> 标签：arrays, clojure

我在java中有这段代码

```
public class read{ 
   private ArrayList <String[]> test = new ArrayList<String[]>(); 

    //arr is a valid array 
//br is a buffered reader
while(br.readline())
    test.add(store(arr[]));

public String[] store (String[] str_arr) {
    String a; 
    new_str_arr[] = new String[2];
    new_str_arr[1] = str_arr[0];
    new_str_arr[0] = "Header";
    return new_str_arr;
} 
```

我怎么能把它转换成clojure？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T03:50:28.083

不清楚你想要什么，但是，如果想读取文本文件并将每一行存储到一个元素数组中，并且如果文件不是很大，你可以试试这个：

```
(use '[clojure.string :only (split)])
(split (slurp "file_name.txt") #"\r\n")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T09:40:34.393

不确定您要完成什么。您不会将 br.readLine() 的结果存储到 String 变量中，因此在您的程序中可能不会发生任何有趣的事情。从您提供的文字来看，也许这很接近：

```
(use 'clojure.java.io)
(with-open [rdr (reader "/tmp/test.txt")]
  (doall (map vector (line-seq rdr))))

Input file:
123
12
123
12
123
12
123
12
123

Output:
(["123"] ["12"] ["123"] ["12"] ["123"] ["12"] ["123"] ["12"] ["123"]) 
```

该文件是逐行读取的，而不是一次全部在内存中。然而结果是。`doall`是必需的，因为`map`返回一个惰性序列。当惰性序列的一个元素在 with-open 之外实现时，该文件将已经关闭。

# iphone - 更改了 Xcode 中的目标名称现在它运行黑屏

> ID：14132455
> 
> 赞同：1
> 
> 时间：2013-01-03T02:57:54.090
> 
> 标签：iphone, objective-c, ios, xcode, ipad

因此，出于某种愚蠢的原因，我在 xcode 中更改了目标的名称，然后立即将其更改回来，我的应用程序将无法运行。模拟器只是显示黑屏。

这让我压力很大。在这一点上愿意尝试任何事情

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T03:01:35.420

当它提示您允许快照时，您是否说“是”？

如果是这样，您可以尝试通过转到“文件”>“还原快照”来恢复此更改。

**编辑**

对“不”的答案感到沮丧......

不过，根据您的评论，您的计划可能会搞砸。试试这个：

1）点击项目名称下拉菜单（停止按钮右侧）

2) 点击“管理方案”

3）选择所有方案并按删除

4）点击右上角的“立即自动创建方案”

5）清理，然后尝试再次构建和运行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T03:01:43.847

删除应用程序，清理，重新打开 xCode。是的，xCode 有时很愚蠢

# .htaccess - .htaccess 重定向 www 冲突其他规则

> ID：14132456
> 
> 赞同：0
> 
> 时间：2013-01-03T02:58:08.587
> 
> 标签：.htaccess

您好，我正在尝试将非 www 重定向到 www。通常我用这段代码得到它

```
RewriteCond %{HTTP_HOST} ^example.com
RewriteRule (.*) http://www.example.com/$1 [R=301] 
```

但是我在我的 htaccess 上有这个，所以我遇到了问题。

```
# SEO URL Settings

RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]+)/index.php(.*)$ index.php$2

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]+)/*$ index.php

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]+)/find/(.+)$ index.php?_route_=$2 [QSA]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^find/(.+)$ index.php?_route_=$1 [QSA]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]*)/admin(/*)$ admin/index.php

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]*)/admin(.*)$ admin/$2 
```

我知道我只需要将 www 添加到该规则中（也许）我尝试过但没有运气=（

问题：

我应该得到 www.example.com/user1/ 或 www.example.com/user2/ 我得到 www.example.com/user1/user1/user1/user1/user1/user1/user1/user1/ 错误

它在这种情况下很好用 example.com 到 www.example.com

我也无法登录到管理员 example.com/admin/ 使用 www 重定向到相同的 URL，但我从未登录 =(

解决方案： ：：：：：：：：：

我加了这个

```
# REDIRECT HTTP://WWW TO HTTP://.
#RewriteCond %{HTTPS} off
RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]
RewriteRule ^(.*)$ http://%1/$1 [R=301,L] 
```

它的工作很棒在这里找到了它。：`http://forum.opencart.com/viewtopic.php?t=57274`

希望任何人都可以告诉我如何反转我刚刚添加的最后一条规则

所以所有页面都有www。

# objective-c - 在 ObjC 中将对象设置为另一个对象的值的正确方法是什么？

> ID：14132460
> 
> 赞同：0
> 
> 时间：2013-01-03T02:58:49.380
> 
> 标签：objective-c, object

我在一个`ViewController`使用名为 dates 的属性的类中工作，它是一个`NSArray`，所以在代码中我使用以下方法创建它：

```
self.dates = someFunctionThatReturnsAnNSArray; 
```

这`self.dates`将继续用于`UITableView`可搜索的内容。

我还想获取该`self.dates`数组的副本并使用它来填充`AppDelegate`名为 globalArray 的属性。所以在我的`ViewController`我导入 my`AppDelegate`并调用它的`sharedApplication`方法，然后这样做：

```
AppDelegate *myDelegate = [[UIApplication sharedApplication] delegate];
myDelegate.globalArray = self.dates; 
```

我的问题是，这是正确的方法吗？复制或保留呢？

```
myDelegate.globalArray = [self.dates copy];
myDelegate.globalArray = [self.dates retain]; 
```

或者怎么样`globalArray = arrayWithArray`？

```
myDelegate.globalArray = [NSArray arrayWithArray:self.dates]; 
```

推荐的格式是什么，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T03:07:29.693

您的问题的答案在某种程度上取决于所讨论的数组是可变的还是不可变的，以及正在考虑哪种并发性考虑因素（数组是否会被多个线程访问和/或修改）。

您似乎也在使用非 ARC 语法，并且可能要考虑使用 ARC。

如果数组是不可变的，那么保留数组的副本应该没问题。如果它们是可变的（并且您希望能够分别跟踪两个数组），那么您将需要进行复制。

如果意图确实是应该全局使用一组数据（一个，主数组），那么您可能只想在访问主数组的视图控制器上放置一些方便的方法（并避免有两个单独的指针）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T03:48:23.873

按顺序处理您的问题（包括隐含的问题）

> self.dates = someFunctionThatReturnsAnNSArray 有什么作用？

如果该属性被声明为强（ARC）或保留（非 ARC），那么生成的 setter（即您使用点符号使用的）将添加到数组的保留计数中，因此不会垃圾收集。使用综合设置器，您不需要对该语句进行任何进一步的内存管理修饰。

> 我希望在我的 AppDelegate 中保留一个全局副本。这是一个好主意吗？

“复制”在 OO 中可能是一个棘手的术语。这可能意味着您通过说 . 得到的相同项目的另一个不同的集合`[array copy]`。这可能意味着所有项目的副本的新集合。你可能不想要这些。我的猜测是你只想要一个指向不同范围内可用数组的指针。这通常称为“分配”数组。

无论如何，应用程序委托可能不是保存它的好地方。应用程序委托是一个单例，因此很容易将其作为真正应该在应用程序模型中拥有一个家的全局变量的垃圾场。

> 假设我希望另一个对象具有相同的数组作为属性，我该怎么做？

其他对象（例如应用程序委托，即使我不同意该设计）也可以以与原始对象相同的方式声明属性：非原子、强或保留。当您使用点运算符进行分配时，无需进一步保留。

> 怎么样`someArray = [NSArray arrayWithArray:self.dates]`？那有什么不同？

这就像复制一样。它将创建一个新的、不同的集合，其中包含 self.dates 中的相同项目。我对您的问题的猜测是，您真的只想在不同的范围内共享相同的数据。为此，不需要复制或arrayWithArray。

# android - 如何在调用活动 onResume() 时阻止 AutoCompleteTextView 显示建议？

> ID：14132462
> 
> 赞同：2
> 
> 时间：2013-01-03T02:59:37.993
> 
> 标签：android, textview, autocompletetextview

在我的应用程序中，其中一个活动有两个`AutoCompleteTextView`. 我从建议列表中为它们选择值并按下 OK 按钮。OK 按钮引导我一个新的活动，用于显示 AutoCompleteTextView 值的结果基础。但是如果我现在按下返回按钮并返回到具有两个 AutoCompleteTextView Textview 的活动，他们都开始显示建议列表。我希望他们不要显示建议列表，因为建议列表仅包含单个项目，即已经在 textViews 中的项目。我尝试将适配器设置为 NULL，然后设置回原始数组，但这并不能阻止 AutoCompleteTextView 显示建议列表。

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.find_path);
        initializeElements();
        GetAllPathList();
        adapter = new ArrayAdapter<Path>(this, R.layout.dropdown_list_item,
                pathArray);
        startPathAutocomplete.setAdapter(adapter);
        endPathAutocomplete.setAdapter(adapter);
    } 
```

> ```
> public class Path {
> 
>   private String _id;
>   private String pathName;
>   private String pathLine;
> 
>   public Station(String _id, String pathName, String pathLine) {
>       this._id = _id;
>       this.pathName= pathName;
>           this.pathLine = pathLine;
>   }
> //getter setter methods for variables
> 
> } 
> ```

```
@Override
    protected void onResume() {
        super.onResume();
        stationArray = null;
        adapter.notifyDataSetChanged();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T04:36:05.033

`Activity` **当你从另一个onResume()**方法回来时被调用。所以无论你想设置什么，你`Adapter`都应该在**onResume()**方法中设置它。只需通知您的适配器数据已更改。就是这样 ：）

**EDITED** pathArray 和 stationArray 的想法是一样的

```
@Override
protected void onResume() {
    super.onResume();
    stationArray = null;
     adapter = new ArrayAdapter<Path>(this, R.layout.dropdown_list_item,
            stationArray);
    adapter.notifyDataSetChanged();
    startPathAutocomplete.setAdapter(adapter);
    endPathAutocomplete.setAdapter(adapter);
} 
```

# java - 如何将正确的对象传递给 mapper.readValue()

> ID：14132463
> 
> 赞同：0
> 
> 时间：2013-01-03T02:59:47.543
> 
> 标签：java, jackson

我正在尝试将 json api 响应映射到一个对象，而 IntelliJ 正在抱怨。它在说`cannot resolve method readValue(java.lang.String, java.lang.Object[]);`。我意识到我没有传递正确的参数，但我尝试过但`responseClass.class`没有`responseClass.getClass()`运气。

用法：

```
MyClass myClass = new MyClass();
myClass.setResponseClass(User.class); 
```

定义：

```
MyClass {
    private Object responseClass;

    public void setResponseClass(Object responseClass) {
        this.responseClass = responseClass;
    }

    public Object getResponseClass() {
        return responseClass;
    }

    public void getApiResponse() {
        //some code here

        ObjectMapper mapper = new com.MyApp.Utility.ObjectMapper();

        //some code here

        //I've tried responseClass.class and responseClass.getClass(), it didn't like either of them
        mapper.readValue(response, responseClass);

        //more code here
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T03:14:42.343

这是使用 Jackson 将 JSON 响应映射到对象的一种非常奇怪的方式。我假设您只想能够使用实用程序类映射任意类？这是一个更简单的方法来完成此操作的示例。请注意，这使用了`ObjectMapper`Jackson 发行版附带的类：

```
public class JSONUtil {
    private ObjectMapper mapper = new ObjectMapper();

    public JSONUtil() {
        super();
        // Set ObjectMapper configuration and properties here
    }

    public <T> T deserialize(final String response, final Class<T> responseClass) {
        if(response == null || responseClass == null) return null;

        return mapper.readValue(response, responseClass);
    }
} 
```

现在，您仍然*可以*使用您发布的类映射来自 JSON 的响应，并进行一些修改：

```
public class MyClass<T> {
    private Class<T> responseClass;

    public MyClass(final Class<T> responseClass) {
        super();
        this.responseClass = responseClass;
    }

    public void getApiResponse(final String response) {

        final ObjectMapper mapper = new ObjectMapper();
        final T values = mapper.readValue(response, responseClass);

        //more code here
    }
} 
```

并像这样使用它：

```
MyClass<User> myClass = new MyClass<User>(User.class);
myClass.getApiResponse(someJsonString); 
```

# c# - 没有记录时如何在gridview“未找到记录”中显示文本

> ID：14132464
> 
> 赞同：18
> 
> 时间：2013-01-03T02:59:54.640
> 
> 标签：c#, asp.net, gridview

我有 iframe，我有几个图表和网格视图，其中图表和网格视图正在从数据库中获取数据。当记录没有发现问题但对于某些用户没有记录的网格视图之一时，我必须显示一条消息“未找到记录”。

请就此向我提出建议。我尝试了下面的代码，它显示了一条消息，但它显示在小框中，但我需要在 gridview 中显示。

```
 <FooterStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
   <PagerStyle BackColor="#284775" ForeColor="White" HorizontalAlign="Center" />
       <SelectedRowStyle BackColor="#E2DED6" Font-Bold="True" ForeColor="#333333" />
       <HeaderStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
 <EditRowStyle BackColor="#999999" />
 <AlternatingRowStyle BackColor="White" ForeColor="#284775" />
  <EmptyDataTemplate>No records Found</EmptyDataTemplate> 
```

在这里我没有显示网格标题，但我必须！

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-03T03:29:10.000

将`ShowHeaderWhenEmpty`GridView 上的属性设置为`true`.

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.showheaderwhenempty.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.showheaderwhenempty.aspx)

但是您仍然必须对gridview 进行DataBind。此代码段对我有用：

```
 <asp:GridView ID="GridView1" runat="server" ShowHeaderWhenEmpty="True" EmptyDataText="No records Found">
    <Columns>
          <asp:boundfield datafield="CustomerID" headertext="Customer ID"/>
          <asp:boundfield datafield="Name" headertext="Name"/>
    </Columns>
   </asp:GridView> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-03T03:35:37.837

尝试设置 `emptydatatext`和 `ShowHeaderWhenEmpty`

```
<asp:gridview id="GridView" 
        datasourceid="DataSource" 
        autogeneratecolumns="true"
        emptydatatext="No data in the data source."
        runat="server"
        ShowHeaderWhenEmpty="True">
      </asp:gridview> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T04:32:36.220

我对 gridview 使用的未找到记录的方法是，当数据库中没有记录时，我清除网格中的所有行并在网格中添加一个新行作为未找到记录的文本，或者您可以创建一个函数对于没有找到结果，然后在gridview的绑定函数中使用它。当没有记录时，您可以调用该函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-24T05:26:20.963

对于仍在使用 ASP.net 2 或 3.5 的用户，该`ShowHeaderWhenEmpty`属性不存在。要解决这个问题，只需简单地使用该`EmptyDataText="..."`属性并仅在找到数据时才使 gridview 可见（在后面的代码中）。

# linux - 如何阅读redhat linux的包

> ID：14132465
> 
> 赞同：0
> 
> 时间：2013-01-03T02:59:57.820
> 
> 标签：linux, linux-kernel, redhat

nspluginwrapper-1.4.4-1.el6_3.x86_64

我有疑问

1.4.4-1.el6_3

如何阅读它是 1.4.4-1 的意思，是 1.4.4.1 还是别的什么

也在

el6_3 表示 el6.3 与否

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T03:12:26.263

nspluginwrapper-1.4.4-1.el6_3.x86_64 可以拆分为：

*   `nspluginwrapper`: 短包名
*   `1.4.4`：由原始开源维护者（不是发行版维护者）提供的包版本。
*   `1`：包构建修订版（由发行版提供）。如果发行版应用了一些补丁以使该软件在此发行版下更好地工作，这将大不相同。任何新修订的增加。
*   `el6_3`: 发行版 ID
*   `x86_64`： 建筑学。也许`i686`（32 位 x86）、`x86_64`（64 位 x86）、其他一些以及`noarch`（包不依赖于拱门，适用于任何拱门）。

# web-services - 是否可以在不使用 Web 服务的情况下以编程方式访问 Sabre？

> ID：14132466
> 
> 赞同：4
> 
> 时间：2013-01-03T03:00:28.127
> 
> 标签：web-services, api, networking, sabre

我正在研究使用 GDS Sabre 开发预订系统。我可以通过终端访问他们的正常系统，但是他们的 Web 服务太贵了，我正在寻找一种解决方法。

任何有使用该系统经验的人都知道是否可以以编程方式访问他们的终端？我正在考虑做一个简单的程序，可以使用终端命令在 Sabre 中搜索信息，但我不知道与 Sabre 服务器的连接是如何工作的。（一个简单的 TCP 连接将是理想的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-05T18:07:09.630

你想要什么都是可能的，我们可以帮助你。您将需要 Sabre 的 MySabre API 或 Emulator API 许可证。

# c# - 如何使用 C# 获取 Excel 单元格填充模式？

> ID：14132468
> 
> 赞同：0
> 
> 时间：2013-01-03T03:00:40.833
> 
> 标签：c#, format, excel-interop

在 Excel 文件中，如何检索单元格的填充模式？根据单元格是否具有填充模式，我想填充数据。以下是我迄今为止尝试过的，但无论单元格是什么样子，总是返回“xlPatternNone”。谢谢。

```
Excel.Worksheet workSheet = (Excel.Worksheet)workBook.Sheets[sheetName];
        Excel.Range cell = (Excel.Range)workSheet.Range[column + row.ToString()];
        if ((Excel.XlPattern)((Excel.Style)cell.Style).Interior.Pattern == Excel.XlPattern.xlPatternNone)
            cell.Value = value; 
```

信息：Excel 2007、c#、Microsoft 互操作库

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T04:08:09.103

这绝对有效：

```
var workSheet = (Worksheet) workBook.Sheets["Sheet1"];
var cell = workSheet.Range["A1"];
var style = (XlPattern) cell.Interior.Pattern; 
```

因此，我建议您忽略`Style`单元格上的属性，直接访问单元格`Interior`。如果这不起作用，我建议确保它`column + row.ToString()`肯定指向正确的单元格。

# node.js - 为什么下载文件会产生 EADDRNOTAVAIL 错误？

> ID：14132473
> 
> 赞同：1
> 
> 时间：2013-01-03T03:01:22.437
> 
> 标签：node.js

我正在尝试使用以下脚本使用 node.js 下载文件：

```
var http = require('http');
var fs = require('fs');

var file = fs.createWriteStream("google.html");
var request = http.get("http://www.google.com/", function(response) {
  response.pipe(file);
}); 
```

我在 Windows 7 上不断收到以下错误：

```
node.js:201
        throw e; // process.nextTick error, or 'error' event on first tick
              ^
Error: connect EADDRNOTAVAIL
    at errnoException (net.js:670:11)
    at Object.afterConnect [as oncomplete] (net.js:661:19)
Press any key to continue . . . 
```

...以及 Linux Mint 13 上的以下错误：

```
node.js:201
        throw e; // process.nextTick error, or 'error' event on first tick
              ^
Error: connect ECONNREFUSED
    at errnoException (net.js:646:11)
    at Object.afterConnect [as oncomplete] (net.js:637:18) 
```

此错误的最可能原因是什么，我该如何解决？该 url 在我的网络上没有被阻止，所以我不确定为什么这不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T06:38:01.020

尝试这个。

```
var http = require('http');

var options = {
  hostname: 'www.google.com',
  port: 80,
  path: '/index.html',
  method: 'GET'
};   

var req = http.request(options, function(res) {
  console.log('STATUS: ' + res.statusCode);
  console.log('HEADERS: ' + JSON.stringify(res.headers));
  res.setEncoding('utf8');
  res.on('data', function (chunk) {
    console.log('BODY: ' + chunk);
  });
});

req.on('error', function(e) {
  console.log('problem with request: ' + e.message);
});

req.end(); 
```

# html - CSS 无法作用于 div 类

> ID：14132481
> 
> 赞同：0
> 
> 时间：2013-01-03T03:02:43.333
> 
> 标签：html, css

我试图弄清楚为什么我的 css 不能在 .build 类 div 上工作。我不知道我哪里出错了。HTML：

```
<!DOCTYPE HTML>
<html>
<head>
        <title> Build Projects

    (bryan22)

    </title>
<link href = 'obpstyle.css' rel = 'stylesheet' type = 'text/css' />
</head>
<body>
    <h1> Build Projects </h1>   
    <strong> bryan22 </strong>
    <a class = 'navbut' href = 'index2.php'>Home</a>
    <a class = 'navbut' href = 'obpmembers.php'>Members</a>
    <a class = 'navbut' href = 'obpfriends.php'>Friends</a>
    <a class = 'navbut' href = 'obpmessages.php'>Messages</a>
    <a class = 'navbut' href = 'obpmembers.php?view=bryan22'>Profile</a>
    <a class = 'navbut' href = 'obpbrowse.php'>Browse Builds</a> 
    <a class = 'navbut' href = 'obplogout.php'>Log Out</a>

    <div class = 'showProfile'> <h3 class = 'heading'>Your Page</h3>
        <div id = 'profimg'>
            <img src = '../website/users/bryan22/bryan22.jpg' />
        </div>
        <p class = 'usertext'>
            I'm Bryan!
        </p>
        <form action = '' method = 'post'>
            <input type = 'submit' name = 'edit' value = 'Edit' />
        </form>
    </div>
    <div class = 'builds'>
        <a href = 'obpbuilds.php?view=bryan22&build=The Danger Ranger'>
            <strong>The Danger Ranger</strong>
            <br />
        </a>
<img src = '../website/users/bryan22/The Danger Ranger/The Danger Ranger.jpg' />
    </div>
    <div class = 'builds'>
        <a href = 'obpbuilds.php?view=bryan22&build=450 monster'>
            <strong>450 monster</strong>
            <br />
        </a>
    <img src = '../website/users/bryan22/450 monster/450 monster.jpg' />
    </div>
    <a href = 'obpmessages.php?view=bryan22'> Your Messages</a> 
    <a href = 'obpfriends.php?view=bryan22'> Your Friends</a></body>
</html> 
```

CSS：

```
.builds
{
float:right; !important;
font-family:helvetica;
background-color:red !important;
}
.showProfile
{
/*float:left;*/
background-color:red
} 
```

我真的只是希望构建 div 浮动在 showProfile div 旁边，但甚至背景颜色都不起作用。请给我一些见解。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T07:57:09.453

使用应用类创建 div 的 PHP 循环应该没有问题。CSS 应该被拾取并用于循环的每次迭代。

如果 HTML/CSS 在您的小提琴中正常工作，正如您所评论的，那么 HTML、CSS 或 PHP 肯定存在其他问题，导致代码格式错误或被取代。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-03T03:22:49.713

我为你做了一个简单的布局。希望这是您正在寻找的：[codepen](http://codepen.io/joe/pen/KEbzd)。

# javascript - 检查 javascript 源是否使用了禁止的功能

> ID：14132489
> 
> 赞同：0
> 
> 时间：2013-01-03T03:03:40.650
> 
> 标签：javascript, parsing

我想在网站上运行用户提供的 javascript，但在此之前，我需要（从算法上）检查提供的 javascript 源是否遵循一组规则（例如，不使用 eval() 函数，不使用 setTimeout()/setInterval() 函数等.)。

另外一件好事是检查来源是否有效。用于此的工具可以是任何东西，因为在服务器端执行。您有什么想法可能对此有用吗？

编辑：代码将在 web worker 环境中执行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T03:06:24.920

仅仅通过扫描源代码是不可能判断脚本是否会使用被禁止的功能的。您已经更改了脚本执行的环境。

您所做的不是简单的文本搜索。JavaScript 是一种非常动态的语言，您可以有效地调用“禁止”函数，而无需在源代码中包含该函数的名称！

```
window['e'+'v'+'a'+'l'] 
```

也不可能简单地执行脚本并跟踪访问了哪些函数，因为您将无法访问所有代码路径。

要禁止使用特定功能，您必须在不存在这些功能的沙箱中运行代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T03:08:39.670

如果你在服务器端运行它（在 Node.js 或 Rhino 或类似的东西上），*你*可以控制全局命名空间。拿走`eval`它`setTimeout`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T03:34:18.833

如果 JavaScript 在 Web 浏览器中运行，请在 iframe 中从单独域（“exampleusercontent.com”）加载的页面上执行它。然后使用[window.postMessage()](https://developer.mozilla.org/en-US/docs/DOM/window.postMessage)允许与父窗口通信（来自“example.com”）。这或多或少是 Facebook 应用程序的工作方式。

不幸的是，不受信任的 JavaScript 将能够做一些事情，例如将用户重定向到另一个网站或挂起用户的浏览器；但是，它应该无法将代码注入“example.com”或窃取用户的“example.com”cookie。

[Google Caja](http://code.google.com/p/google-caja/)是一个开源编译器，用于对第三方 JavaScript 进行沙盒处理，但有时会发现其中的漏洞。

# spring-mvc - AppFuse 项目正在重写我的 URL。如何？为什么？

> ID：14132491
> 
> 赞同：0
> 
> 时间：2013-01-03T03:04:01.017
> 
> 标签：spring-mvc, appfuse

我使用 AppFuse 创建了一个项目（我一点也不熟悉）。我发现当页面`http://machine/foo`包含这样的链接时：`<a href="/bar">`浏览器没有导航到`http://machine/bar`. 相反，它发出一个请求`http://machine/bar?ajax=true`，然后浏览器似乎已导航到`http://machine/foo#bar?ajax=true`. 我怀疑这是由他们包含的一些库引起的，也许是允许它通过 ajax 加载内容部分而无需重新加载导航和侧边栏。哪个可能有用，也可能没有。首先，我想了解这是做什么的，以及如何关闭它（如何使用它也可能有用）。

有人认识这种行为吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T17:22:23.843

如果有人可以提供一个更好的答案，我会很乐意接受，但为了后代，这是我学到的：

该功能由`src/main/webapp/scripts/global.js`. 它修饰页面中的 URL 以用 ajax 调用替换它们。显然，原因是为了避免重新生成和重新渲染不变的页眉、页脚和导航。我不完全理解它是如何工作的（或者更重要的是，为什么它对我不起作用），但知道行为是从该文件生成的，可以通过仔细阅读源代码来确定它。

此外，可以在[此处](http://raibledesigns.com/rd/entry/ajaxified_body)找到一些文档。

# git - 当我推送到有效的 SSH 地址时，为什么 git 无法解析主机名？

> ID：14132492
> 
> 赞同：6
> 
> 时间：2013-01-03T03:04:10.433
> 
> 标签：git, heroku, ssh, ssh-keys, git-remote

我正在 Heroku 上部署一个应用程序，所以我从一个 repo 创建了一个 Heroku 应用程序，然后做了`git push heroku master`。当我这样做时，它不断给我错误：

```
!  Your key with fingerprint xxx is not authorized to access heroku-app.

fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists. 
```

我尝试了各种方法来更改我的 SSH 密钥，包括将它们全部删除并创建新的。它仍然给我同样的错误。我已将密钥添加到 Heroku。

然后我尝试运行`ssh -vT git@heroku.com:heroku-app.git`，结果是：

```
OpenSSH_5.9p1, OpenSSL 0.9.8r 8 Feb 2011
debug1: Reading configuration data /etc/ssh_config
debug1: /etc/ssh_config line 20: Applying options for *
debug1: /etc/ssh_config line 53: Applying options for *
ssh: Could not resolve hostname heroku.com:heroku-app.git: nodename nor servname provided, or not known 
```

我无法弄清楚该错误指向什么。主机名绝对有效。是否有可能我在 SSH 配置文件中没有我需要的东西？任何想法都会很棒，因为我今天花了好几个小时试图让这个工作无济于事。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-03T07:23:48.610

`git@heroku.com:heroku-app.git`是此 ssh 地址的[SCP 格式](http://en.wikipedia.org/wiki/Secure_copy)。

它依赖于一个`~/.ssh/config`带有“heroku.com”条目的文件，该条目指定用户、实际主机名，如果需要，还可以指定私钥/公钥路径。

```
host heroku.com
     user git
     hostname heroku.com
     identityfile ~/.ssh/yourPrivateKey 
```

再说一遍：`heroku.com`in ' `heroku.com:heroku-app.git`'*不是*主机名：它是 ssh 配置文件中的一个条目。
您可以替换`heroku.com`为`xxx`: ，前提是您在文件`git push xxx:heroku-app.git`中有 xxx 条目。`~/.ssh/config`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-01T11:38:56.657

它也很简单：

1.  $ heroku 登录
2.  $ heroku git:clone -a appname （这行在这里为我解决了它）
3.  $ 混帐添加。
4.  $ git commit -am “让它变得更好”
5.  $ git push heroku 大师

在确保 $ heroku git:remote -a appname 之后（heroku 和 git 之间没有名称冲突）

# android - 如何在android中使用sqlite数据库显示唯一数据？

> ID：14132497
> 
> 赞同：1
> 
> 时间：2013-01-03T03:05:07.353
> 
> 标签：android, sqlite

我在 SQLiteOpenHelper 类中创建了数据库。我还在`Button click`其他活动（`InsertActivity.java`）中的事件中插入了数据库。现在，当我在 listview 上显示数据时，会生成两个相同的条目。如何显示不同的记录`listview`？

**ListActivity.java**

```
public class ListActivity extends Activity {
    ListView lv;
    ArrayList<String> items = new ArrayList<String>();
    ArrayList<String> items_id = new ArrayList<String>();
    dbhelper dh;
    SQLiteDatabase db;
    int index_id;
    Button btn;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_list);
        Button btn;
        btn = (Button)findViewById(R.id.newProjectlist);
        btn.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub

                    Intent intent= new Intent(ListActivity.this,NewProject.class);
                startActivity(intent);
            }
        });  
        lv = (ListView)findViewById(R.id.projectListView);
        setUpList();
        dh = new dbhelper(this);

        Cursor c = getAllData();
        showAllData(c);  
        registerForContextMenu(lv);      
    }

  @Override
    public void onCreateContextMenu(ContextMenu menu, View v,
            ContextMenuInfo menuInfo) {
        // TODO Auto-generated method stub
        super.onCreateContextMenu(menu, v, menuInfo);

        if(v.getId() == R.id.projectList){
            menu.setHeaderIcon(R.drawable.ic_launcher);
            menu.setHeaderTitle("Record List");
            menu.add(0,1,menu.NONE,"Delete Record");
            menu.add(0,2,menu.NONE,"Show Record");
        }
    }

    @Override
public boolean onContextItemSelected(MenuItem item) {
    // TODO Auto-generated method stub
        int itemId = item.getItemId();
        if(itemId == 1)
        {
            AdapterView.AdapterContextMenuInfo menuinfo = (AdapterContextMenuInfo) item.getMenuInfo();
            int poistion = menuinfo.position;
            String id_string = items_id.get(poistion);
            long id = Long.valueOf(id_string);

            //menuinfo = (AdapterContextMenuInfo) item.getMenuInfo();
            //index_id = menuinfo.position;
            deleteUserData(index_id);
            items_id.remove(poistion);
        }
        if(itemId == 2){
            AdapterView.AdapterContextMenuInfo menuinfo;
            menuinfo = (AdapterContextMenuInfo) item.getMenuInfo();
            index_id = menuinfo.position;
            editUserData(index_id);
        }
    return super.onContextItemSelected(item);
}

    private void editUserData(int indexid) {
        // TODO Auto-generated method stub
        String user_id = items_id.get(indexid);
        Intent intEdit = new Intent(ListActivity.this, MainActivity.class);
        intEdit.putExtra("EditID", user_id);
        startActivityForResult(intEdit, 1);
    }

    private void deleteUserData(int indexid) {
        // TODO Auto-generated method stub
//      String user_id = items_id.get(indexid);
        //Toast.makeText(getApplicationContext(), "id " + user_id, 1).show();
        db = dh.getWritableDatabase();
        db.delete("timer","_ID" + "=" + indexid, null);
        finish();
//      Toast.makeText(getApplicationContext(), "Record deleted successfully", 1).show();
    }

    private void showAllData(Cursor c) {
        // TODO Auto-generated method stub
        while(c.moveToNext())
        {
            int id = c.getInt(0);
            String name = c.getString(1);
            String timerpoint1 = c.getString(2);
            String timerpoint2 = c.getString(3);
            String timerpoint3 = c.getString(4);
            String servicetime1 = c.getString(5);
            String servicetime2 = c.getString(6);
            items.add("" + name);
            items_id.add(""+id);
        }
        setUpList();
    }

    private Cursor getAllData() {
        // TODO Auto-generated method stub
        db = dh.getReadableDatabase();
        //String sortorder = dh.Name + "DESC";
    //  String query ="SELECT DISTINCT name FROM timer";
    //  Cursor c = db.rawQuery(query, null);
    //   if (c != null) {
    //            c.moveToFirst();
    //        }
//      String[] cols = new String[] {"name"};
        Cursor c = db.query(true, "timer",null,null,null,null,null,null,null);   
        //Cursor cur = db.query(Distinct,"timer", null, null, null, null, null, null, null);
        startManagingCursor(c);
    //  Cursor c=db.rawQuery("select distinct Name from timer;",null);
        return c;   
        }     
    private void setUpList() {
        // TODO Auto-generated method stub
        lv.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,items));
    }   

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T05:19:49.583

**如何避免在 ListView 中重复输入？？？**

避免重复使用 addRecord 方法（）。因为当您在 addRecord() 中调用 insert() 时，只需在 onClick() 中定义一次 addRecord()，最后您就可以避免在 Listview 中使用相同的记录条目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T03:28:18.403

尝试使用`GROUP BY`. 如果您仍然没有找到想要的结果，请检查您是否在任何地方执行 sqlite 查询时出错并告诉我。

```
SELECT Name 
FROM timer
GROUP BY Name 
```

# asp.net - asp.net 中的列表框自动填充功能

> ID：14132503
> 
> 赞同：1
> 
> 时间：2013-01-03T03:05:48.023
> 
> 标签：asp.net

我有一个列表框，其中的项目是从数据库表中加载的“名字”，

1.  现在我想要一个自动填充功能，如果用户键入“a”，所有以“a”名字开头的名字都应该显示在列表框中
2.  并在单击某个按钮后，应将原始数据重新填充到列表框中

第二个，即。重新填充希望我可以用下面的代码做

```
protected void btnRePopulate_Click(object sender, EventArgs e)
{
    DataSet oDs = ReadDataSet();
    Listbox1.DataTextField = "Name";
    Listbox1.DataValueField = "ID";
    Listbox1.DataSource = oDs;
    Listbox1.DataBind();
} 
```

但对于第一个我有一些我正在工作的事情（我正在使用文本框 keyup 事件在用户键入“a”或其他内容时触发）

1.  清除列表框并添加以“a”开头的名称，但不确定是否可以从客户端
2.  或设置另一个可见的列表框，其名称从原始列表框过滤并隐藏原始列表框，我无法从 js 或代码隐藏设置可见属性
3.  不，我不想使用 ajax 自动填充

除了以上两种，还有更好的选择吗...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T05:11:08.923

这种过滤和重置最好在客户端本身完成。这样您就不会进行不必要的服务器调用。这是jQuery中的扩展方法。

```
$(function() {
  $('#select').filterByText($('#textbox'), true);
}); 
```

扩展方法：

```
jQuery.fn.filterByText = function(textbox, selectSingleMatch) {
  return this.each(function() {
    var select = this;
    var options = [];
    $(select).find('option').each(function() {
      options.push({value: $(this).val(), text: $(this).text()});
    });
    $(select).data('options', options);
    $(textbox).bind('change keyup', function() {
      var options = $(select).empty().scrollTop(0).data('options');
      var search = $.trim($(this).val());
      var regex = new RegExp(search,'gi');

      $.each(options, function(i) {
        var option = options[i];
        if(option.text.match(regex) !== null) {
          $(select).append(
             $('<option>').text(option.text).val(option.value)
          );
        }
      });
      if (selectSingleMatch === true && 
          $(select).children().length === 1) {
        $(select).children().get(0).selected = true;
      }
    });
  });
}; 
```

我在 Lessan Vaezi 的博客上找到了这个，其中有一个关于如何做到这一点的[现场演示。](http://www.lessanvaezi.com/filter-select-list-options/)

# facebook-c#-sdk - C# Facebook sdk 配置测试环境

> ID：14132505
> 
> 赞同：1
> 
> 时间：2013-01-03T03:06:05.557
> 
> 标签：facebook-c#-sdk

在文档 ( [http://cshapsdk.org/docs/web/getting-started](http://csharpsdk.org/docs/web/getting-started) ) 中，配置 Facebook C# SDK 提到在网站设置下更改站点 URL。我一直在寻找这个设置，但找不到它。我正在使用 VS 2010。

项目运行但处理程序不起作用。必须上传到我们的主机，它在那里工作正常。我想在本地进行所有测试，我一直在上传进行测试，将调试排除在外。除了上述内容外，我按照医生所说的做了所有事情。

嗯，由于 facebook 要求提供应用程序的 url，我是否需要使用主机文件来伪造它以指向本地机器，即 127.0.0.1 myapp.com？

谢谢

瑞克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T12:38:22.377

对，我想通了：

当 Facebook C# SDK 文档引用网站设置下的站点 URL 时，他们指的是开发人员控制台 ( [https://developers.facebook.com/](https://developers.facebook.com/) ) 上的 Facebook 应用程序设置。最后，文档建议输入“http://localhost:[test env port]/”作为应用程序的站点 URL，以允许您从开发环境发出请求。

在我看来，这不是处理事情的特别好方法，但我想它必须这样做——我可能会设置一个“开发”应用程序来反映用于开发的实时应用程序。如果有人有更好的建议，我愿意接受更好的解决方案。

# android - Android：- 使用动画顺序更改按钮上的文本

> ID：14132509
> 
> 赞同：-2
> 
> 时间：2013-01-03T03:06:35.150
> 
> 标签：android, animation, button, text

我在 android 中有一系列按钮，我需要按顺序更改这些按钮的文本（慢慢地一个一个地）我怎样才能做到这一点？我不能在这里应用任何动画？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T04:45:35.017

```
Handler myHandler = new Handler(); 
```

// 你的按钮是这样的

```
int[] ButtonArray = {R.id.button1,R.id.button2.....};
String[] stringArray = {"Hi","Hello","oi"....};

 // get all the button
 private Button[] myButtons=new Button[buttonArray.length];

 for(int i = 0; i < buttonArray.length ; i++){
      myButtons[i] = (Button) findViewById(mAlphabetsId[i]); 

 } 
```

//处理重复性任务的处理程序

............. 开始重复性任务

```
counterValue = 0;
Size =buttonArray.length; //Number of buttons
 myHandler.postDelayed(mMyRunnable, speed); 
```

.....................................

```
 private Runnable mMyRunnable = new Runnable()
{

    public void run()
    { 
        if(counterValue<Size){  
           myButtons[counterValue].setText(stringArray[CounterValue]);    
          myHandler.postDelayed(mMyRunnable, 1000);  //Call again with 1 sec delay
         counterValue++;
        }else{
             myHandler.removeCallbacks(mMyRunnable);
             counterValue=0;    
        }

    }
}; 
```

这段代码可能包含错误，因为我很匆忙。先试试看。

如果您遇到困难，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T03:57:33.960

真的很难确切地说出你想在这里做什么，但一种选择可能是使用[TimerTask](http://developer.android.com/reference/java/util/TimerTask.html)你可以以你想要的任何间隔重复更改按钮的文本。您可以使用 a`for loop`来遍历按钮

# r - 如何计算 R 中多个位置和日期的日出方位角？

> ID：14132513
> 
> 赞同：1
> 
> 时间：2013-01-03T03:08:09.833
> 
> 标签：r, azimuth, maptools

我正在使用鸟带（欧洲人响铃）记录来研究日出方位角和迁徙航向之间的关系。我有来自欧洲和北美的几千只鸟在 1935 年至 1990 年期间的条带（振铃）位置。我的初步分析表明，日出方位角、中午太阳高度和鸟类在秋季迁徙的方向之间存在关系.

这种关系随日期而变化，因此我最初使用美国海军天文台计算器 ( [http://aa.usno.navy.mil/data/docs/AltAz.php](http://aa.usno.navy.mil/data/docs/AltAz.php) ) 的计划变得非常耗时。我查看了包`maptools`和`moonsun`in `R`，但无法弄清楚如何使用**矩阵**而不是**单个日期和位置**运行它们各自的命令。

另外，我不需要日出的时间，只需要方位角。这些值也不必精确到一定程度。如果有人有任何建议，我很乐意听取您的意见。

# assembly - ARM 汇编程序指令（宏）IF 语句

> ID：14132514
> 
> 赞同：0
> 
> 时间：2013-01-03T03:08:35.537
> 
> 标签：assembly, arm

我在编译我的汇编程序时使用了一些 ARM 汇编程序指令。

这就是我正在做的事情：

```
 GBLA count
count           SETA 0

                WHILE count <=1024

                IF count = {50}
                    ; Do something special here
                ENDIF

count           SETA count+1
                ; Repetitive code here

                WEND 
```

但我收到错误消息：错误：AA1198E：未知操作数。

我已经尝试在 IF 语句前加上 count，以防万一，但我得到了一个不同的错误。

不幸的是，关于这方面的[ARM 文档](http://www.keil.com/support/man/docs/ARMASMREF/armasmref_cacbjgdb.htm)不是很好（或者我不是很聪明，这很可能是呵呵）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T19:47:43.617

将 { } 从 50 左右移开。

```
IF count = 50 
```

# image - iPhone5中的HTML5 FileReader API没有从相机中获取照片

> ID：14132517
> 
> 赞同：0
> 
> 时间：2013-01-03T03:09:06.663
> 
> 标签：image, html, file-io, iphone-5

我正在建立一个移动网站，让用户可以从他们的相机上传照片。

我可以从用户相册中获取图像，当用户在 iPhone4 和 Android 4 上的 iOS6 中拍照时，我可以获取图像，但是当用户使用 iPhone5（也使用 iOS6）拍照时，我什么也得不到。我可以从用户的相册中获取图像，但在拍照时不能。

这是下面的代码和jsfiddle

```
$('input#file_api').change(function(evt){
    var image = evt.target.files[0];
    var reader = new FileReader();
    reader.onerror  = (function(){alert('error reading file')});
        reader.onload = (function(theFile) {
        return function(e) {
          // Render thumbnail.
          var tempImg = new Image();

          tempImg.src = reader.result;
          tempImg.onload = function(){
             var canvas = document.createElement('canvas');
                   canvas.width=tempImg.width;
            canvas.height=tempImg.height;
             var ctx = canvas.getContext("2d");

                ctx.drawImage(tempImg,0,0);

               $('body').append(canvas);
})(image);
      reader.readAsDataURL(image); 
```

我在这里有一个例子[http://jsfiddle.net/8DJUy/4/](http://jsfiddle.net/8DJUy/4/)

如果您使用文件选择器获取照片，它会将照片附加到页面。如果你用 iPhone5 拍照，它不会附加任何东西。但同时，它也不会出错。

关于如何解决这个问题的任何建议？

我不太清楚抓照片有什么问题。

我这样抓照片的原因是直接从手机上传时文件很大，用例不需要高分辨率图像，所以我在上传之前使用画布调整图像大小.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T03:54:15.190

试试这个：

```
ctx.drawImage(tempImg, 0, 0, canvas.width, canvas.height); 
```

# ruby-on-rails-3 - validates_uniqueness_of ：用户名不区分大小写

> ID：14132518
> 
> 赞同：0
> 
> 时间：2013-01-03T03:09:31.513
> 
> 标签：ruby-on-rails-3, validation

我刚刚发现，即使使用 validates_uniqueness_of :email, :username 客户也可以创建具有不同大小写相似值的新帐户。

例子：

```
username
USERNAME

email@email.com
EMAIL@EMAIL.COM 
```

这是设计使然还是我遗漏了什么？

我的模型中有这条验证线

```
validates_uniqueness_of :email, :username 
```

它确实按预期工作，具有相似的值：

```
username
username 
```

我正在使用导轨 3.2.9

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T03:18:39.480

是的，这是设计使然。 **email@email.com**和**EMAIL@EMAIL.COM**不是同一个字符串，您想要在您的情况下关闭区分大小写。

```
validates_uniqueness_of :email, :case_sensitive => false
validates_uniqueness_of :username, :case_sensitive => false 
```

# java - 将多个值与单个键关联并保持值的顺序

> ID：14132519
> 
> 赞同：1
> 
> 时间：2013-01-03T03:09:32.707
> 
> 标签：java

我有一个包含以下成员的类

```
private String patientName;
private String patientPhoneNumber; 
```

现在我有多个名字附在电话号码上，例如

```
1234567, AAA
1234567, BBB
8765432, CCC
8765432, GGG 
```

现在我想将它们存储在地图中，但电话号码应该是具有多个值的键，对于 1234567，我应该具有值 AAA 和 BBB，请告诉我如何在地图中使用单个键存储多个值我的键是电话号码，然后请让我知道我是否想在控制台中打印然后我将遍历地图

另外请不要说我想维持订单也让我先得到价值 AAA 然后 BBB 所以我也应该维持这些订单，因为我得到这只是一个例子，但在我的场景中，我将从后端获得这个值所以维持秩序也是必要的，请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T03:16:00.190

你可以尝试这样的事情：

```
HashMap<String,LinkedList<String>> map 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T03:16:39.113

```
new Map<String, TreeSet<String>>() 
```

将允许您将值存储在`TreeSet`（排序的...）中。

要打印它们：

```
for(Map.Entry entry : phoneBook.entries()){
    System.out.println(entry.key() + ":");
    TreeSet names = entry.value();
    for(String name : names){
        System.out.println("\t" + name);
    }
} 
```

如果您想要不区分大小写的排序，您可以像这样添加：

```
TreeSet<String> nameSet = new TreeSet<String>(String.CASE_INSENSITIVE_ORDER);
phoneBook.add(number, nameSet); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T03:17:58.000

```
private Map<String,List<String>> patients;

public void setPatientNumber(String number, String patient){
    List<String> list = patients.get(number);
    if(list == null){
        list = new ArrayList<String>();
        patients.put(number,list);
    }
    list.add(patient);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-03T03:14:01.833

对每个值使用 a[`LinkedHashMap`](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html)和 an ：[`ArrayList`](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)

```
LinkedHashMap<String,ArrayList<String>> phoneNumbers = new LinkedHashMap<String,ArrayList<String>>();

// register new phone number
phoneNumbers.put("1234567", new ArrayList<String>());

// add names to the phone number
phoneNumbers.get("1234567").add("AAA");
phoneNumbers.get("1234567").add("BBB"); 
```

两个集合都保留了插入顺序。

****编辑****

在这里，这大致就是您所需要的（这是在没有太多测试的情况下在现场完成的，但您应该明白这一点）。由于您的订购可能会有所不同，我认为限制重复并提供订购比较器应该是可取的（正如其他答案所建议的那样）：

```
public class LinkedMultiMap<K,V> {

    private Comparator<V> comparator;
    private LinkedHashMap<K,Set<V>> entries;

    public LinkedMultiMap() {
        this(null);
    }

    public LinkedMultiMap(Comparator<V> comparator) {
        this.comparator = comparator;
        this.entries = new LinkedHashMap<K, Set<V>>();
    }

    public boolean add(K key, V value) {
        if (!entries.containsKey(key)) {
            entries.put(key, new TreeSet<V>(comparator));
        }

        return entries.get(key).add(value);
    }

    public Collection<V> get(K key) {
        return entries.get(key);
    }

    public boolean remove(K key, V value) {
        boolean removed = false;
        if (entries.containsKey(key)) {
            removed = entries.get(key).remove(value);

            if (entries.get(key).isEmpty()) {
                entries.remove(key);
            }
        }
        return removed;
    }

    public Collection<V> removeAll(K key) {
        return entries.remove(key);
    }

    public Iterator<K> keyIterator() {
        return entries.keySet().iterator();
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-03T03:14:26.370

> 将多个值与单个键关联

那是一个[Multimap](http://google-collections.googlecode.com/svn/trunk/javadoc/index.html?com/google/common/collect/Multimap.html)：

> 类似于 Map 的集合，但可以将多个值与单个键相关联。

[来自 Google Collections 的LinkedHashMultimap](http://google-collections.googlecode.com/svn/trunk/javadoc/com/google/common/collect/LinkedHashMultimap.html)似乎符合要求：

> Multimap 的实现，它不允许重复的键值条目，并返回其迭代器遵循将数据添加到 multimap 的顺序的集合。

如果不想添加依赖，可以使用集合作为值类型：

```
Map<String /*number*/, List<String> /*names*/> numbers; 
```

请注意，前者仅允许按插入顺序检索，如果您希望能够更改它，则必须使用后者的手动解决方案

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-03T03:14:18.013

使用 a`Map`来存储您的数据。键应该是`String`对象，值应该是`List`对象。使用 a`List`作为映射条目值允许将多个值与单个键相关联。A`List`还将保持添加元素的顺序。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-08-08T06:04:17.283

```
public static void main(String[] args) {

      Map<Integer,List<String>> map = new HashMap<Integer,List<String>>();

        //insert values into list one
        List<String> list1 = new ArrayList<String>();
        list1.add("AAA");
        list1.add("BBB");

        //insert values into list one
        List<String> list2 = new ArrayList<String>();
        list2.add("CCC");
        list2.add("GGG");

        //insert values to keys
        //single key multiple values
        map.put(1234567, list1);
        map.put(8765432, list2);

        //iterating and displaying the values
        for(Map.Entry<Integer,List<String>> entry: map.entrySet() ) {

            Integer key = entry.getKey();
            List<String> values = entry.getValue();
            System.out.println("Value of " +key+ " is " +values);
            //System.out.println("Value of " +key+ " is " +values.get(0));
            //System.out.println("Value of " +key+ " is " +values.get(1));

        }
} 
```

# php - 如何在 magento 中复制 authorize.net 模块？

> ID：14132520
> 
> 赞同：1
> 
> 时间：2013-01-03T03:09:36.213
> 
> 标签：php, magento, duplicates, payment, authorize.net

我已经坚持了几天了。出于某种原因，复制 Magento Authorize.net (Mage_Paygate) 模块在前端不起作用。我已经成功地复制了该模块，并让它在后端显示了自己的配置选项，但在结账时我无法让付款方式显示在前端。

到目前为止，我已经尝试复制模块并更改模型名称的每个实例以避免冲突，我已经从头开始多次这样做，所以我相信这不是无效类调用的问题......

我缺少某种神奇的按钮。我真的很希望听到成功复制核心支付模块的人的消息，特别是 Authorize.net

我需要为会计目的创建副本。除了复制 authorize.net 模块之外，没有其他解决方案。

谢谢

编辑：关于为什么我需要多个 authorize.net 模块副本的一些见解：我的公司处理大量销售，比大多数商家服务所允许的要多。我们的想法是，我们将有几个 authorize.net 模块预加载多个 authorize.net API 凭证，每个凭证对应一个不同的商家，这样当一个商家上限时，我们可以禁用该支付方式并启用下一个.

我不能只在单个 authorize.net 模块中切换信息的原因是我们需要将每张信用卡的资金存入单独的银行账户 - ECC，我们用来将数据从 magento 传输到 quickbooks 的软件，接受基于 Title 字段的付款方式。为了区分我们为哪个信用卡处理器转账，我们在标题字段中附加了一个 (ACRONYM)。当这个标题字段发生变化时，ECC 会自己大便，因为它突然不知道它正在下载的交易的资金来自哪里。

我们尝试了各种方法，并认为制作 authorize.net 模块的副本将是最好的解决方案。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T08:07:55.067

我设法弄清楚了，这就是我所做的以防其他人遇到这种情况，能够复制遵循不同规则的支付和运输模块非常方便，而不必依赖商店视图的更改：

创建新模块 Namespace_Modulename ，我使用 Mage_Paygate1 直到我的概念被证明。从您要复制的模块中复制 etc 文件夹复制主模型文件，在我的情况下为 Mage/Paygate/Model/Authorizenet.php

编辑 system.xml：更改组名，以便在管理面板配置中出现新的配置选项块，保留 module="" 单独。我们将参考原始模块文件而不是复制它们。我使用了authorizenet1。

为清楚起见，如果您愿意，可以更改标签节点。就我而言，我将副本命名为 Authorize.net（处理器名称）

编辑config.xml：模块名，改成Namespace_Modulename，我用的是Mage_Paygate1。

如果原始 config.xml 没有块声明，请确保存在块声明。我们要引用原始模块中的 blocks 文件夹，即：

```
<blocks>
<directpost><class>Mage_Paygate_Block</class></directpost>
</blocks> 
```

更改下底部的节点

```
<default><section> (<default><payment>) to the group name used in system.xml 
(authorizenet1) 
```

确保模型节点正确指向新模块，而不是旧模块。(paygate1/authorizenet)

现在编辑新模型，（Authorizenet.php）：

重命名类以匹配新的 Namespace_Modulename (Mage_Paygate1)

确保 $_code 等于 config.xml 文件 (authorize1) 中的组名

这对我有用。这个想法是只复制更改模块配置的部分并回收所有原始代码。

可能有一种更清洁的方法可以做到这一点，但无论如何我都不是 magento 大师，所以我非常欢迎任何关于如何在未来证明这种黑客攻击的建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-19T12:12:35.597

除了下面的代码，我们还需要在 config.xml 中更改模型。如果您不进行以下更改，结帐时将不会显示新的付款方式

```
<models>
  <authorizenet1>
    <class>Mage_Paygate1_Model</class>        
  </authorizenet1>       
</models> 
```

# asp.net - 在 asp.net 中连接 Flash 编程 SWF 文件，需要在数据中存储一些值

> ID：14132523
> 
> 赞同：2
> 
> 时间：2013-01-03T03:10:13.263
> 
> 标签：asp.net, database, sql-server-2008, flash, flash-cs5

我对 flash、asp.net 和 SQL 或任何数据库连接有一些疑问：

*   首先，我创建了一个带有一些文本框和按钮的 swf flash 程序
*   其次，如果我单击该按钮意味着它将需要保存在数据库中
*   第三，如何连接asp.net和数据库中创建的swf文件。

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T03:37:00.060

**简而言之：**您描述的所有步骤确实总结了在**flash swf 和 asp.net 之间传递数据**的概念。您可以使用很多参考资料，但是，这里有一些不错的帖子可供参考：

*   [在 Flash 和 Asp.net 之间传递值](http://social.msdn.microsoft.com/Forums/eu/csharpgeneral/thread/9dc40276-0cd3-4346-8abd-90b3aa7d5cb7)
*   [主题：将变量传递给 Flash](http://www.aspmessageboard.com/showthread.php?230681-Passing-variables-to-Flash)
*   [将变量从 asp.net 传递到 flash](http://www.kirupa.com/forum/showthread.php?360922-Passing-variables-from-asp-net-to-flash)
*   [从 C# 传递 FlashVars 以在播放器中运行 swf](http://allitinfo.wordpress.com/2010/10/19/passing-flashvars-from-c-to-run-swf-in-a-player/)

# html - sencha-touch 应用程序不工作

> ID：14132529
> 
> 赞同：0
> 
> 时间：2013-01-03T03:11:02.677
> 
> 标签：html, extjs, sencha-touch, datastore, datamodel

我无法在我编写的以下 sencha-touch 代码中找出问题所在。它没有显示任何错误，但是当我运行它时，它仍然不起作用。应用程序还需要更多文件或类吗？我正在使用 linux 机器在 chrome 上运行它。

```
 var App = new Ext.application({
    requires: [
             'Ext.tab.Panel' ,'Ext.List', 'Ext.data.Store', 'Ext.data.Model'
         ],
        name : 'notesapp',
        useLoadMask : true,
        launch : function () {

    Ext.regModel('note',{
    idProperty:'id',
    fields:[{name :'id', type:'int'},
        {name : 'date', type: 'date', dateFormat:'c'},
        {name : 'title', type: 'string'},
        {name : 'narrative' , type:'string'}],
    validations:[{type: 'presence', field: 'id'},
            {type: 'presence', field: 'title'}  ]
        });

    Ext.regStore('notestore', {
    model:'note',
    sorters:[{
    property:'date',
    direction:'DESC'
    }],

    proxy:[{
    type:'localstorage',
    id:'notes-app-local-store'
    }],

    data: [
        { id: 1, date: new Date(), title: 'Test Note', narrative: 'This is simply a test note' }
        ]

    }
    );

var notelist= new Ext.List({
    id:'notelist',
    store:'notestore',
    itemTpl:
    '<div class= "list-item-title">{title}</div>'
    + '<div class="list-item-narrative">{narrative}</div>'

    });

var noteslisttoolbar = new Ext.Toolbar({

    id:'noteslisttoolbar',
    title:'MyNotes'
    });

var noteslistcontainer=  new Ext.Panel({

    id:'noteslistcontainer',
    layout:'fit',

    dockedItems:[noteslisttoolbar],
    items:[notelist]

        });
    this.viewport = new Ext.Panel({
    fullscreen: true,
    layout:'card',
    cardAnimation:'slide',
    items:[noteslistcontainer]

    });

        }
}) 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-01-03T05:11:45.947

你得到一个错误

```
 proxy:[{
            type:'localstorage',
            id:'notes-app-local-store'
        }], 
```

请检查那里..没有那个代码sencha应用程序运行良好

见[http://www.senchafiddle.com/#j2f0i](http://www.senchafiddle.com/#j2f0i)

# android - Eclipse：Android 项目中 JDK 类的 java.lang.NoClassDefFoundError

> ID：14132532
> 
> 赞同：4
> 
> 时间：2013-01-03T03:11:59.303
> 
> 标签：android, eclipse, adt, noclassdeffounderror

首先，我想提一下，我阅读**了许多关于****NoClassDefFoundError**的stackoverflow 帖子，并且我还在**许多**其他博客和网站上阅读了它，但人们提供的解决方案并没有解决它。

我在**Ubuntu 12.10 64-bit**上运行带有 ADT 插件版本 v21.0.1-543035 的**Eclipse 64** -bit 。一切都是 64 位的，Ubuntu、Eclipse 以及我使用的 JRE 和 JDK (jdk1.6.0_38)。

 **我编写了一个非常小的 Android 应用程序，它需要 JDK 中的一个类才能运行。

我稍微隔离了这个问题，并通过创建一个新的“Android 应用程序项目”来重新创建它，其中**只有一行我的代码**（在 onCreate 方法的主类中）。这一行：

> BufferedImage buff = new BufferedImage(100,100,BufferedImage.TYPE_INT_RGB);

Eclipse 自动添加必要的导入：

> 导入 java.awt.image.BufferedImage；

但要求我为这个类添加 jars/JRE。

我在“已安装的 JRE”中将 jdk1.6.0_38 添加到 Eclipse（[就像他们在 Eclipse 帮助页面上指示的那样](http://help.eclipse.org/indigo/topic/org.eclipse.jdt.doc.user/tasks/task-add_new_jre.htm)）。

在项目的“Java Build Path”中，我通过“Add library”->“JRE system library”->“Workspace default JRE”添加了它。它自动将 JDK 添加到项目的构建路径中。

在编译期间，我没有收到任何错误。只有在 android 模拟器（任何 AVD）中运行应用程序时，我才会收到以下错误：

```
E/dalvikvm(828): Could not find class 'java.awt.image.BufferedImage', referenced from method com.example.usejdk.MainActivity.onCreate
W/dalvikvm(828): VFY: unable to resolve new-instance 467 (Ljava/awt/image/BufferedImage;) in Lcom/example/usejdk/MainActivity;
D/dalvikvm(828): VFY: replacing opcode 0x22 at 0x0009
D/dalvikvm(828): DexOpt: unable to opt direct call 0x0cdc at 0x0c in Lcom/example/usejdk/MainActivity;.onCreate
D/AndroidRuntime(828): Shutting down VM
W/dalvikvm(828): threadid=1: thread exiting with uncaught exception (group=0x40a70930)
E/AndroidRuntime(828): FATAL EXCEPTION: main
E/AndroidRuntime(828):   java.lang.NoClassDefFoundError: java.awt.image.BufferedImage
E/AndroidRuntime(828):   at com.example.usejdk.MainActivity.onCreate(MainActivity.java:16)
E/AndroidRuntime(828):   at android.app.Activity.performCreate(Activity.java:5104)
E/AndroidRuntime(828):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
E/AndroidRuntime(828):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
E/AndroidRuntime(828):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
E/AndroidRuntime(828):   at android.app.ActivityThread.access$600(ActivityThread.java:141)
E/AndroidRuntime(828):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
E/AndroidRuntime(828):   at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(828):   at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(828):   at android.app.ActivityThread.main(ActivityThread.java:5039)
E/AndroidRuntime(828):   at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(828):   at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(828):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
E/AndroidRuntime(828):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
E/AndroidRuntime(828):   at dalvik.system.NativeStart.main(Native Method) 
```

以下是我尝试**但不起作用**的事情：

1.  在“ **eclipse.ini** ”中添加 jdk 的位置（“-vm /usr/lib/jvm/jdk1.6.0_38/bin”在 2 个单独的行中）。
2.  我添加了路径“-Djava.library.path=/usr/lib/jvm/jdk1.6.0_38/jre/lib”的“默认 VM 参数”。
3.  使用 32 位 JRE 和 JDK 以及 JRE/JDK7 - 不起作用（当然）。
4.  我尝试将 jdk jar 文件**手动**添加到“libs”文件夹并标记“添加到 buildpath” - 没有用。
5.  我使用 ADT 和 Android SDK 再次卸载并安装了 Eclipse ......

没有什么能解决这个烦人的错误......

请同时注意这些：

1.  我确保我的**.classpath**文件包含默认的 JRE 条目（[就​​像他们在这里说](http://maven.apache.org/plugins/maven-eclipse-plugin/trouble-shooting/jdk-being-used-is-different-than-expected.html)的那样）
2.  我尝试将**其他**jar 文件添加到“libs”文件夹+“添加到路径”，并使用它们 - 它工作正常。
3.  我尝试使用“import java.awt.image.BufferedImage;”运行相同的代码（一行）在一个**常规**的java 项目（**不是一个 android 项目**）中，并使项目“使用默认 JRE”——它**工作得很好！**为什么它适用于常规 Java 项目而不适用于 Android 项目？

我想这意味着我的 Eclipse 安装**确实**能够使用 jdk 类，但**不能在 android applications 中使用**。

那么我必须做些什么才能让这行代码**在 android 应用程序**中运行呢？

非常感谢任何帮助。提前谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-03T03:22:27.110

> 那么我要怎么做才能让这行代码在 android 应用程序中运行呢？

简短的回答是：什么都没有，因为你*对此*无能为力。整个`java.awt.*`框架不是 Android SDK 的一部分，包括`BufferedImage`，因此不受模拟器或物理设备的支持。Android 有自己的加载和渲染图形的实现。

在不知道您需要什么`BufferedImage`的情况下，很难说您应该考虑什么替代方案。您很可能正在尝试进行某种图像处理，包括访问图像的各个像素？如果是这种情况，请查看[`Bitmap`](http://developer.android.com/reference/android/graphics/Bitmap.html)和[`BitmapFactory`](http://developer.android.com/reference/android/graphics/BitmapFactory.html)类。

这一切都归结为`Java SDK != Android SDK`。无论如何，也可以考虑在 SO 上进行搜索；你不是第一个犯这个错误的人。**

# c# - 在 asp.net mvc 的视图中计算它的部分视图

> ID：14132534
> 
> 赞同：1
> 
> 时间：2013-01-03T03:13:04.283
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-partialview

我在我的 asp.net mvc 项目中有一个视图：

```
 <div id="featured">
       <% Html.RenderPartial("../Shared/UserControls/RelatedProduct", Model.ProductDetail); %>
 </div> 
```

控制器：

```
 public ActionResult ProductSpec(int id, int dep, int cat, int tab)
 {
    var pvc = new CMSViewModel()
    {
       ItemDetail = new ProductVM()
       {
          GetItemReference = DataContext.GetItemReferences()
       }
    };
    return View(pvc);
} 
```

这是我的部分观点：

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<Web.ModelView.ProductVM>" %>
    <ul class="ui-tabs-nav">
    <%        
        for(int i=0; i<(Model.GetItemReference.Count());i++) {
           //list all item from model
        } 
    %>
    </ul> 
```

问题：当部分视图中的项目为空时，视图将为空白。我想统计View中的部分视图项，所以如果它是空白的，我会用另一个Null Image替换它。

谁能告诉我如何在 View 的部分视图中计算项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T03:23:31.750

**简而言之：**在呈现之前检查集合中元素的可用性是个好主意。正确的`System.Linq`方法是`.Any()`。

这是一个演示该概念的示例：

```
 <%     
    if(Model.GetItemReference.Any())
    {
       // Render your content
        for(int i=0; i<(Model.GetItemReference.Count());i++) {
           //list all item from model
        }
     }
    else {
     //
     // Render your content when NO Items
    } 
    %> 
```

# php - 是什么导致数据没有插入到 db 表中？

> ID：14132536
> 
> 赞同：0
> 
> 时间：2013-01-03T03:13:32.643
> 
> 标签：php, jquery, ajax, mysqli

我想在数据库中执行插入操作，以便数据库表`Individual Answer`包含以下数据：

Individual_Answer 表：

```
AnswerId  AnswerMarks
295       2
296       1
297       1
298       3
299       3 
```

问题是它没有插入数据库。是导致问题的php / mysqli代码还是没有访问正在执行插入（`insertmarks.php`）的php页面的ajax？

下面是我在 php/mysqli 中的代码：

```
<?php

 // connect to the database
 include('connect.php');

  /* check connection */
  if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    die();
  }

var_dump($_POST);  

 $answersql = "INSERT INTO Individual_Answer (AnswerId, AnswerMarks) 
    VALUES (?, ?)";

if (!$insertanswer = $mysqli->prepare($answersql)) {
    // Handle errors with prepare operation here
    echo __LINE__.': '.$mysqli->error;
}

//make sure both prepared statements succeeded before proceeding
if($insertanswer)
{
   $c = count($_POST['answerId']);

    for($i = 0;  $i < $c; $i++ )
    {

$insertanswer->bind_param('ii', $_POST['answersId'][$i], $_POST['answerMarks'][$i]);

}
    //close your statements at the end

    $insertanswer->close();
}

?> 
```

下面是`var_dump($_POST)`输出：

```
array(7) { 
["q1_ans_org"]=> string(1) "4" 
["q1_ans"]=> string(1) "0" 
["answerMarks"]=> array(5) 
{ 
[0]=> string(1) "2" 
[1]=> string(1) "1" 
[2]=> string(1) "1" 
[3]=> string(1) "3" 
[4]=> string(1) "3" } 
["q2_ans_org"]=> string(1) "6" 
["q2_ans"]=> string(1) "0" 
["num_groups"]=> string(1) "2" 
["submitMarks"]=> string(12) "Submit Marks" 
} 
```

下面是假设访问 insertmarks.php 的 html 和 jquery/ajax 代码：

```
<form id="Marks" action="penalty.php" method="post">

...

<p>
<input type='hidden' id='num_groups' name='num_groups' value='<?php echo$questionId?>'>
<input id="submitBtn" name="submitMarks" type="submit" value="Submit Marks" />
</p>

</form>

...

<script type="text/javascript">

myClickHandler = function(e) {
       var ng = $('#num_groups').val();
       for (var group = 1; group <= ng; group++) {
         if (!validation(group)) return false;
       }
       if (confirm("Make sure that your marks are correct, once you proceed after this stage you would not be able to go back and change any of your marks for this Assessment." + "\n" + "\n" + "Are you sure you want to Proceed?" + "\n")) {
         $.ajax({
           url: "insertmarks.php",
           data: $("#Marks").serialize(),
           async: false,
           type: "POST"
         });
         return true;
      } else {
        return false;
      }
    };

    $('#Marks').submit(myClickHandler);

});

</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T03:16:41.937

你没有[执行](http://php.net/manual/en/mysqli-stmt.execute.php)查询，

```
$insertanswer->execute(); 
```

# iphone - NSMutableArray 来自以逗号分隔的 plist 键值

> ID：14132542
> 
> 赞同：2
> 
> 时间：2013-01-03T03:14:50.117
> 
> 标签：iphone, ios5, theos

我有一个存储缓存颜色的 plist 文件，它看起来像这样

```
<key>CachedColors</key>
<dict>
    <key>com.Halfbrick.Fruit</key>
    <string>0.00000,0.00000,0.00000</string>
    <key>com.apple.Preferences</key>
    <string>0.28824,0.37059,0.48235</string>
</dict> 
```

我想要做的是使用 3 个值来创建 UIColor，UIColor 将根据捆绑 id 改变，值是红色、绿色和蓝色

但我希望 UIColor 在捆绑 ID 更改时自动更改，我将其用作横幅的背景颜色，并说如果我在主屏幕上并收到通知，则背景为白色，但是如果我打开“设置”应用程序，我希望它从 plist 中更改为 com.apple.Preferences 的 RGB 值，类似于在 iOS 6 中打开应用程序以匹配 UINavigationBar 时状态栏背景如何自动更改

我用了：

```
SBApplication *frontApp = [(SpringBoard*)[UIApplication sharedApplication] _accessibilityFrontMostApplication];
NSDictionary *statusBarCachedColors = [NSDictionary dictionaryWithContentsOfFile:@"/var/mobile/Library/Preferences/cc.tweak.statuscolor.plist"];
NSString *colorString = [statusBarCachedColors objectForKey:frontApp];
NSArray *components = [colorString componentsSeparatedByString:@","];
UIColor *tintColor = [UIColor colorWithRed:[components[0] floatValue] green:[components[1] floatValue] blue:[components[2] floatValue] alpha:1.0]; 
```

我正在为越狱设备开发

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T03:20:47.847

从 plist 中获取该字符串后：

```
NSArray *components = [string componentsSeparatedByString:@","];
UIColor *color = [UIColor colorWithRed:[components[0] floatValue] green:[components[1] floatValue] blue:[components[2] floatValue] alpha:1]; 
```

...或者在旧的编译器上

```
UIColor *color = [UIColor colorWithRed:[[components objectAtIndex:0] floatValue]
                                 green:[[components objectAtIndex:1] floatValue]
                                  blue:[[components objectAtIndex:2] floatValue] alpha:1]; 
```

如果问题包含其他内容，则很难遵循标点符号

# ios - 在 ftp 上 POST 后图像损坏

> ID：14132544
> 
> 赞同：1
> 
> 时间：2013-01-03T03:15:37.373
> 
> 标签：ios, xcode, file-upload, http-post, nsurlrequest

我正在尝试使用 http-post 请求从我保存的照片（iPhone 4）上传图像。我得到了 uploader.php，它可以很好地将 $_FILES 移动到正确的位置。但最后，当图片上传时，我看到了这个：

![POST 成功后来自 ftp 的图像我 dl](../Images/1d86c736001daabc810cbcdba4c43007.png)

我花了几个小时试图解决这个问题并在这里寻找相关的问题，但对我没有任何帮助。

```
-(void)sendImage:(UIImage*)image{
    NSString *url = @"http://www.mypage.vv.si/uploader.php";
    url = [url stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];

    NSMutableURLRequest *theRequest=[NSMutableURLRequest requestWithURL:[NSURL URLWithString:url]
                                                            cachePolicy:NSURLRequestUseProtocolCachePolicy
                                                        timeoutInterval:60.0f];
    [theRequest setHTTPMethod:@"POST"];

    NSString *boundary = @"UVYDTNFMLFUVTTCECELPLCPELCPE";
    NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@", boundary];
    [theRequest addValue:contentType forHTTPHeaderField:@"Content-Type"];

    NSData *imageData = UIImageJPEGRepresentation(image, 1);
    if (imageData)
    {
        NSMutableData *body = [NSMutableData data];

        [body appendData:[[NSString stringWithFormat:@"Content-Length %d\r\n\r\n", [imageData length] ] dataUsingEncoding:NSUTF8StringEncoding]];
        [body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];

        NSString *timeStr = [NSString stringWithFormat:@"%f",[[NSDate date] timeIntervalSince1970]];
        timeStr = [timeStr stringByReplacingOccurrencesOfString:@"." withString:@""];
        NSString *uniqueFileName = [NSString stringWithFormat:@"img%@.jpg", timeStr];
        NSString *contDispos = [NSString stringWithFormat:@"Content-Disposition: form-data; name=\"userfile\"; filename=\"%@\"\r\n", uniqueFileName];

        [body appendData:[contDispos dataUsingEncoding:NSUTF8StringEncoding]];
        [body appendData:[@"Content-Type: application/octet-stream\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];    
        [body appendData:imageData];

        [body appendData:[@"\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
        [body appendData:[[NSString stringWithFormat:@"--%@--\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
        [theRequest setHTTPBody:body];

        NSString *postLength = [NSString stringWithFormat:@"%d", [body length]];
        [theRequest setValue:postLength forHTTPHeaderField:@"Content-Length"];
        NSURLConnection *connection = [NSURLConnection connectionWithRequest:theRequest delegate:self];
        if (connection) {
            self.infoData = [NSMutableData data];
        } else {
            NSLog(@"Connection failed");
        }
    }
    else
        NSLog(@"No Data!");
} 
```

# python - itertools.accumulate() 与 functools.reduce()

> ID：14132545
> 
> 赞同：28
> 
> 时间：2013-01-03T03:15:43.837
> 
> 标签：python, itertools, python-3.3, functools

在 Python 3.3 中[`itertools.accumulate()`](http://docs.python.org/3.3/library/itertools.html#itertools.accumulate)，通常重复地对提供的迭代应用加法运算，现在可以将函数参数作为参数；这意味着它现在与[`functools.reduce()`](http://docs.python.org/3.3/library/functools.html#functools.reduce). 粗略一看，现在两者之间的主要区别似乎是：

1.  `accumulate()`默认为求和，但不允许您显式提供额外的初始条件，`reduce()`而不默认为任何方法，但允许您提供用于 1/0 元素序列的初始条件，并且
2.  `accumulate()`先取可迭代，先`reduce()`取函数。

两者之间还有其他区别吗？或者这只是两个函数的行为问题，最初不同的用途开始随着时间的推移而收敛？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-03T03:26:32.197

似乎`accumulate`保留了以前的结果，而`reduce`（在其他语言中称为折叠）不一定。

例如`list(accumulate([1,2,3], operator.add))`会返回`[1,3,6]`，而普通折叠会返回`6`

另外（只是为了好玩，不要这样做）你可以定义`accumulate`为`reduce`

```
def accumulate(xs, f):
    return reduce(lambda a, x: a + [f(a[-1], x)], xs[1:], [xs[0]]) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-03T03:28:11.217

您可以在文档中看到有什么区别。 `reduce`返回序列的*单个*结果、总和、乘积等。 *返回所有*中间结果`accumulate`的迭代器。基本上，在操作的每个步骤的结果上返回一个迭代器。*`accumulate``reduce`*

 ** * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-05-14T16:24:27.047

`itertools.accumulate` 就像`reduce`但返回一个生成器*而不是一个值。该生成器可以为您提供所有中间步骤值。所以基本上 reduce 给了你积累的最后一个元素。

*生成器类似于迭代器，但只能迭代一次。*

# ruby-on-rails - 加载目录中的每个文件并在 ruby /rails 中从该文件运行一个函数

> ID：14132552
> 
> 赞同：0
> 
> 时间：2013-01-03T03:16:54.863
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

我正在尝试从一堆不同的网站上抓取音乐会数据。我编写了几个脚本，每个脚本都从特定网站抓取数据并将其组织成具有可预测结构的散列。这些脚本中的每一个都具有`scrape`完成此任务的功能。我在一个目录中有所有这些爬虫脚本。然后我想编写一个主脚本，对于目录中的每个脚本，调用该脚本`scrape`并将数据添加到数据库中。

我计划让这个主脚本成为 Resque 工作人员，以便该站点每天在后台抓取每个站点。

如何在主脚本中完成此操作？现在我像这样浏览目录：

```
Dir.glob(/app/workers/scraped_venues/*.rb) do |venue_scraper|
  # call that script's `scrape` function
  # use data from that `scrape` call
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T11:31:30.750

我会做一个 rake 任务来进行抓取：

耙子教程：http: [//jasonseifer.com/2010/04/06/rake-tutorial](http://jasonseifer.com/2010/04/06/rake-tutorial)

并使用when gem 每天运行刮擦。应该很容易从文档中找出：

[https://github.com/javan/无论何时](https://github.com/javan/whenever)

如何在 Rails 中在后台运行东西：[Ruby on Rails：如何在后台运行东西？](https://stackoverflow.com/questions/897605/ruby-on-rails-how-to-run-things-in-the-background)

# php - MySQL SELECT COUNT with if 语句 - 最佳实践是什么？

> ID：14132555
> 
> 赞同：0
> 
> 时间：2013-01-03T03:17:08.427
> 
> 标签：php, mysql, if-statement, count

我得到的结果与我这样做的方式不一致，所以我想我会问这里的天才你的想法。这就是我正在做的...

```
$ccquerycount = "SELECT COUNT(*) as `count` FROM payments_cc_info WHERE user_id=$userid";
....
....
if ($row['count'] == "1") {
} else {
} 
```

有没有更好的方法来设计 if 语句以获得一致的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T04:10:08.840

您还可以在 mysql 查询中添加 if 条件，如下所示。

```
SELECT 
   rating,
   trade_service_id,
   ifnull(round(sum(belonging_product_ratings.rating)/count(*),0),0) AS avg,
   count(*) AS count
FROM
   belonging_product_ratings WHERE trade_service_id != 0
GROUP BY
   belonging_product_ratings.trade_service_id
```

**其他选择如下**

```
select
   BelongingProductRating.*,
   User.*
from
   belonging_product_ratings AS BelongingProductRating
LEFT OUTER JOIN
   users AS User ON
   IF( BelongingProductRating.rated_user_id != '$userID', BelongingProductRating.rated_user_id, BelongingProductRating.user_id) = User.id
```

您可以说mysql查询中的if条件与三元if相同。
您也可以根据您的 php 变量设置查询。

我正在分享我最终得到的这段代码。您需要做的就是根据您的表格字段和条件进行设置。随时问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T03:25:02.617

尝试这个

```
 $ccquerycount = "SELECT * FROM payments_cc_info WHERE user_id=$userid";
    $result = mysql_query($ccquerycount)
    if (mysql_num_rows($result)==1) {
    } else {
    } 
```

**[mysql_num_rows()](http://php.net/manual/en/function.mysql-num-rows.php) 获取结果中的行数**

**警告 mysql_ 扩展正在被弃用。相反，应该使用 MySQLi 或 PDO_MySQL 扩展。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T03:25:02.577

我假设您正在执行查询、检索结果集、获取行并在 if 语句之前提取值（如果没有，那么也许您需要先这样做！这是[PHP-MySql 的开始](http://php.net/manual/en/book.mysql.php)。

如果您已经这样做并且忘记在您的帖子中提及这一点（我总是说在被证明有罪之前是无辜的！！:)），那么当您得到不一致的结果时，您能否向我们提供更多关于哪些不同数据集的数据？

# java - 尝试在 Tomcat 7 中使用 Jersey (JAX-RS) 和 Weld (CDI)。为 javax.annotation.ManagedBean 获取 noClassDefFoundError

> ID：14132556
> 
> 赞同：1
> 
> 时间：2013-01-03T03:17:34.523
> 
> 标签：java, tomcat, jersey, cdi, jboss-weld

我试图让 Weld 在 Tomcat 7.0.34 上与 Jersey 一起工作，但似乎遇到了这个问题。实际的例外是

```
java.lang.NoClassDefFoundError: javax/annotation/ManagedBean 
```

但是我没有用@ManagedBean 注释明确地注释任何东西，所以我猜Weld 隐含地这样做了。Weld 是否应该提供此注释，或者我是否缺少其他一些依赖项？

我的 pom.xml 文件包含：

```
<dependency>
    <!-- CDI implementation -->
    <groupId>org.jboss.weld.servlet</groupId>
    <artifactId>weld-servlet</artifactId>
    <version>${weld.version}</version>
</dependency> 
```

我是否遗漏了什么，或者尝试使用 Weld 和 Jersey 是否存在更大的问题？

* * *

catalina.out 部署我的网络应用程序时：

```
...
Jan 03, 2013 2:21:21 AM org.apache.catalina.startup.HostConfig deployWAR
INFO: Deploying web application archive /usr/local/Cellar/tomcat/7.0.34/libexec/webapps/tracker.war
Jan 03, 2013 2:21:22 AM org.jboss.weld.bootstrap.WeldBootstrap <clinit>
INFO: WELD-000900 1.1.10 (Final)
Jan 03, 2013 2:21:22 AM org.jboss.weld.bootstrap.WeldBootstrap startContainer
INFO: WELD-000101 Transactional services not available. Injection of @Inject UserTransaction not available. Transactional observers will be invoked synchronously.
Jan 03, 2013 2:21:22 AM org.jboss.weld.environment.tomcat7.Tomcat7Container initialize
INFO: Tomcat 7 detected, CDI injection will be available in Servlets and Filters. Injection into Listeners is not supported
Jan 03, 2013 2:21:22 AM org.jboss.weld.interceptor.util.InterceptionTypeRegistry <clinit>
WARNING: Class 'javax.ejb.PostActivate' not found, interception based on it is not enabled
Jan 03, 2013 2:21:22 AM org.jboss.weld.interceptor.util.InterceptionTypeRegistry <clinit>
WARNING: Class 'javax.ejb.PrePassivate' not found, interception based on it is not enabled
Jan 03, 2013 2:21:22 AM com.sun.jersey.api.core.PackagesResourceConfig init
INFO: Scanning for root resource and provider classes in the packages:
...
Jan 03, 2013 2:21:22 AM com.sun.jersey.server.impl.cdi.CDIComponentProviderFactoryInitializer initialize
INFO: CDI support is enabled
Jan 03, 2013 2:21:22 AM com.sun.jersey.server.impl.application.WebApplicationImpl _initiate
INFO: Initiating Jersey application, version 'Jersey: 1.16 11/28/2012 02:09 PM' 
```

使用 @Inject 注释向 servlet 发出 HTTP 请求时的 catalina.out

```
Jan 03, 2013 2:23:12 AM com.sun.jersey.api.core.PackagesResourceConfig init
INFO: Scanning for root resource and provider classes in the packages:
  substrate.tracker.api
Jan 03, 2013 2:23:12 AM com.sun.jersey.api.core.ScanningResourceConfig logClasses
INFO: Root resource classes found:
  class substrate.tracker.api.ProjectsResource
  class substrate.tracker.api.UsersResource
  class substrate.tracker.api.IssuesResource
  class substrate.tracker.api.PingResource
Jan 03, 2013 2:23:12 AM com.sun.jersey.api.core.ScanningResourceConfig logClasses
INFO: Provider classes found:
  class substrate.tracker.api.exception.ParameterExceptionMapper
Jan 03, 2013 2:23:12 AM com.sun.jersey.server.impl.cdi.CDIComponentProviderFactoryInitializer initialize
INFO: CDI support is enabled
Jan 03, 2013 2:23:12 AM com.sun.jersey.server.impl.application.WebApplicationImpl _initiate
INFO: Initiating Jersey application, version 'Jersey: 1.16 11/28/2012 02:09 PM' 
```

servlet 使用 500 HTTP 状态代码响应请求。根本原因堆栈跟踪：

```
java.lang.NoClassDefFoundError: javax/annotation/ManagedBean
com.sun.jersey.server.impl.cdi.CDIComponentProviderFactory.getComponentProvider(CDIComponentProviderFactory.java:116)
com.sun.jersey.server.impl.cdi.CDIComponentProviderFactory.getComponentProvider(CDIComponentProviderFactory.java:103)
com.sun.jersey.core.spi.component.ioc.IoCProviderFactory._getComponentProvider(IoCProviderFactory.java:89)
com.sun.jersey.core.spi.component.ProviderFactory.getComponentProvider(ProviderFactory.java:153)
com.sun.jersey.core.spi.component.ProviderServices.getComponent(ProviderServices.java:251)
com.sun.jersey.core.spi.component.ProviderServices.getProviders(ProviderServices.java:148)
com.sun.jersey.server.impl.application.ExceptionMapperFactory.init(ExceptionMapperFactory.java:74)
com.sun.jersey.server.impl.application.WebApplicationImpl._initiate(WebApplicationImpl.java:1307)
com.sun.jersey.server.impl.application.WebApplicationImpl.access$700(WebApplicationImpl.java:168)
com.sun.jersey.server.impl.application.WebApplicationImpl$13.f(WebApplicationImpl.java:774)
com.sun.jersey.server.impl.application.WebApplicationImpl$13.f(WebApplicationImpl.java:770)
com.sun.jersey.spi.inject.Errors.processWithErrors(Errors.java:193)
com.sun.jersey.server.impl.application.WebApplicationImpl.initiate(WebApplicationImpl.java:770)
com.sun.jersey.server.impl.application.WebApplicationImpl.initiate(WebApplicationImpl.java:765)
com.sun.jersey.spi.container.servlet.ServletContainer.initiate(ServletContainer.java:489)
com.sun.jersey.spi.container.servlet.ServletContainer$InternalWebComponent.initiate(ServletContainer.java:319)
com.sun.jersey.spi.container.servlet.WebComponent.load(WebComponent.java:609)
com.sun.jersey.spi.container.servlet.WebComponent.init(WebComponent.java:210)
com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:374)
com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:557)
javax.servlet.GenericServlet.init(GenericServlet.java:160)
org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
java.lang.Thread.run(Thread.java:722) 
```

奇怪的是，堆栈跟踪没有显示在 catalina.out 中，相反，日志文件显示了正在重新部署的应用程序的样子！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T10:12:04.173

我遇到了同样的问题，一旦我按照以下说明覆盖了 ServletContainer： [Weld + Jersey + Tomcat？](http://jersey.576304.n2.nabble.com/Weld-Jersey-Tomcat-td5959010.html)

为了能够让它运行，我用 @RequestScoped 注释了我的球衣服务类，然后注入工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T15:51:26.093

我遇到了完全相同的问题，我通过删除当前版本的球衣 1.16 并使用旧版本 1.8 解决了这个问题。使用旧版本后，我不再有此错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T14:49:22.457

只需查看球衣罐（我使用球衣 1.14），特别是 pom 文件。您会看到它需要一些提供的依赖项，其中之一是 javax.ejb 3.1：

```
<dependency>
    <groupId>org.glassfish</groupId>
    <artifactId>javax.ejb</artifactId>
    <version>3.1</version>
    <scope>provided</scope>
</dependency> 
```

这个 jar 包含必要的类：javax.annotation.ManagedBean。如果您导入包含此类的任何其他 jar 将不起作用。那是因为球衣罐的捆绑方式，但那是另一回事了。

只需在您的 pom 中添加此依赖项，一切都会正常。

尼库

# android - 使用与生成的视频文件不同的预览大小录制视频

> ID：14132558
> 
> 赞同：28
> 
> 时间：2013-01-03T03:17:57.267
> 
> 标签：android, android-camera, mediarecorder

我试图允许用户录制与他们在录制时可以看到的实际屏幕预览不同大小的视频。这似乎可以从[有关以下功能的`getSupportedVideoSizes`功能](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#getSupportedVideoSizes%28%29)的文档中获得：

> 如果返回的列表不为空，则返回的列表将包含至少一个 Size，并且如果使用相机作为视频源，则返回列表中的其中一个尺寸必须传递给 MediaRecorder.setVideoSize() 用于摄像机应用程序。**在这种情况下，预览的大小可能与视频录制期间录制的视频的分辨率不同。**

这表明某些手机会从此 fn 返回 null（根据我的经验 Galaxy SIII 会），但对于那些不这样做的人，可以提供与实际视频不同分辨率的预览。这种理解正确吗？有些手机允许这种行为而其他手机不允许吗？

**尝试解决方案：**

在[漫长的录像设置过程中](http://developer.android.com/guide/topics/media/camera.html#capture-video)使用的该功能的[官方说明中`setPreviewDisplay`](http://developer.android.com/reference/android/media/MediaRecorder.html#setPreviewDisplay%28android.view.Surface%29)提到：

> 如果此方法以空表面调用或根本不调用，媒体记录器将不会更改相机的预览表面。

这似乎是我想要的，但不幸的是，如果我这样做，整个视频录制过程就完全搞砸了。我假设在录制视频的过程中，这个函数不能传递 null 或根本不调用。也许在其他情况下这是可以的。不幸的是，这似乎对我没有帮助。

我接下来的唯一步骤是查看`TextureView`s 并使用预览纹理而不是典型的 SurfaceView 实现，以便使用 openGL 将纹理拉伸到与实际分辨率不同的所需大小（并裁剪屏幕上多余的部分） ，然后用 Surface`setPreviewDisplay`的构造函数为函数`Surface(SurfaceTexture surfaceTexture)`构造一个 Surface。由于在 ICS 下不兼容，我想避免使用 a `TextureView`，因为这会增加显着的复杂性。

这似乎是一个微妙的过程，但我希望有人可以在这方面提供一些建议。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T11:23:34.913

a.假设用户将x,y的大小设置为视频大小

b.现在使用 getSupportedVideoSizes 函数获取整个列表并查看 x,y 是否属于其中之一并设置 MediaRecorder.setVideoSize()。如果 x,y 不属于 getSupportedVideoSizes 列表，则设置视频的默认配置文件记录。

这是关于视频大小

现在来到预览大小，没有太多的解决方法选项。取一个保存 SurfaceView 的 RelativeLayout。

```
<android.view.SurfaceView xmlns:android="http://schemas.android.com/apk/res/android"
 android:id="@+id/preview"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 /> 
```

preview 是 SurfaceView 的名称。在这里，我给出了一个将其重新调整为宽度和高度一半的示例。

```
resetCamera();  //reset the camera   

ViewGroup.LayoutParams params = preview.getLayoutParams();
RelativeLayout myRelLayout = (RelativeLayout) findViewById(R.id.myRelLayout);
params.width = (int) (myRelLayout.getWidth()/2);
params.height = (int)(myRelLayout.getHeight()/2);
preview.setLayoutParams(params);

initCamera(); //initiate the camera(open camera, set parameter, setPreviewDisplay,startPreview) 
```

请查看预览的分辨率，然后根据视频大小相应地缩小高度或宽度。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T20:28:39.317

正如您所提到的，这只有在 getSupportedVideoSizes() 返回非空列表时才有可能。

但是，如果您确实看到了一个非空列表，那么这个简单的方法应该可以工作：

1.  [使用setPreviewSize](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#setPreviewSize%28int,%20int%29)设置所需的预览分辨率；[您选择的尺寸必须是getSupportedPreviewSizes](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#getSupportedPreviewSizes%28%29)给定的尺寸之一。

2.  [分别使用setPreviewDisplay](http://developer.android.com/reference/android/hardware/Camera.html#setPreviewDisplay%28android.view.SurfaceHolder%29)或[setPreviewTexture](http://developer.android.com/reference/android/hardware/Camera.html#setPreviewTexture%28android.graphics.SurfaceTexture%29)将预览显示设置为 SurfaceView 或 SurfaceTexture 。

3.  开始预览。

4.  创建媒体记录器，并使用[getSupportedVideoSizes](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#getSupportedVideoSizes%28%29)中的一种尺寸直接使用[setVideoSize](http://developer.android.com/reference/android/media/MediaRecorder.html#setVideoSize%28int,%20int%29)设置其视频大小，或者使用预定义的[摄像机配置文件](http://developer.android.com/reference/android/media/CamcorderProfile.html)之一为给定的质量/大小配置所有媒体记录器设置。

5.  将相机对象传递给 MediaRecorder 的[setCamera](http://developer.android.com/reference/android/media/MediaRecorder.html#setCamera%28android.hardware.Camera%29)调用，配置媒体记录器的其余部分，然后开始录制。

在具有非空 getSupportedVideoSizes 列表的设备上，这应该会导致预览保持在 setPreviewSize 调用设置的分辨率，并以设置的视频大小/摄像机配置文件分辨率进行录制。在不支持视频大小的设备上，MediaRecorder 将重置预览大小以匹配录制大小。您应该能够通过设置非常低的预览分辨率和高录制分辨率（例如，160x120 用于预览，720p 用于录制）来测试这一点。如果 MediaRecorder 在录制开始时将预览分辨率切换到 720p，这应该很明显，因为预览质量会大幅提升。

注意预览尺寸不直接与显示SurfaceView的尺寸挂钩；相机预览的输出将被缩放以适应 SurfaceView，因此如果您的 SurfaceView 的尺寸由于您的布局和设备而为 100x100 像素，那么无论您使用的预览分辨率如何，都将被缩放为 100x100 以进行显示。所以你仍然需要确保保持 SurfaceView 的纵横比正确，这样预览才不会失真。

并且为了能效，您不应该使用远高于 SurfaceView 中实际像素数的预览分辨率，因为在将预览拟合到 SurfaceView 时会丢失额外的分辨率。当然，只有当 getSupportedVideoSizes() 返回非空值时才可能进行录制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T13:39:26.203

首先，我将尝试回答您的具体问题。

1.  可以提供与实际视频不同分辨率的预览。这种理解正确吗？

是的，预览大小通常与录制大小不同。预览尺寸通常与您的显示尺寸无关。因此，如果手机显示 CIF (352 x 288)，但能够录制 D1 (720 x 480)，则预览大小和录制大小会有所不同。我觉得其他专家在这一点上已经给出了充分的回答。

1.  有些手机允许这种行为而其他手机不允许吗？

大多数最新款手机都支持此功能，可能只有少数低端手机。

除了`setPreviewDisplay`，我们还必须考虑这一点：

一个例外是，如果在调用 startPreview() 之前未设置预览表面（或设置为 null），则可以使用非 null 参数调用此方法一次以设置预览表面。（这允许相机设置和表面创建并行进行，从而节省时间。）预览表面可能不会在预览运行时更改。

您能否分享一下您在`setPreviewDisplay`使用表面调用时面临的问题`NULL`？

# hibernate - Hibernate：更改子类的 DiscriminatorValue 会引发 org.hibernate.WrongClassException

> ID：14132561
> 
> 赞同：2
> 
> 时间：2013-01-03T03:18:05.333
> 
> 标签：hibernate, jpa

我有**A**类，子类**B**和**C**。
我正在使用**InheritanceType.SINGLE_TABLE**并且一列**type**被用作 DiscriminatorColumn。

早些时候，**B**类有**DiscriminatorValue("1")**，**C**类有**DiscriminatorValue("2")**。我在表中有大约 100 多个条目，并且一切正常。

现在，我又创建了一个**A**、**D**的子类。但我希望它有**DiscriminatorValue("1")**，所以我将**B**和**C**的 DiscriminatorValues分别更改为 2 和 4。我还用适当的值
更新了数据库列**类型。**

但是现在当我运行应用程序时，我得到了以下异常：

```
org.hibernate.WrongClassException: Object with id: 9 was not of the 
specified subclass: com.example.D (Discriminator: 1) 
```

会有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T03:19:59.690

没关系。我解决了这个问题。**persistence.xml**文件中的 D 类条目丢失。现在，它工作正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-21T19:20:04.943

在我的例子中，我在数据库中添加了一些硬编码的值，并为插入查询中的鉴别器值编写了“Guest”。

我的错误是我将Guest类注释为具有“guest”（小“g”）作为鉴别器值，并将客人添加到具有“Guest”鉴别器值的数据库中。

与一些可能的解决方案的良好链接：[这里](https://hibernate.atlassian.net/browse/HHH-1621)

我真的希望这可以帮助某人。

# php - 使用 PHP 检索 URL 中显示的用户 ID

> ID：14132564
> 
> 赞同：1
> 
> 时间：2013-01-03T03:18:42.410
> 
> 标签：php, mysql

我有一个页面，管理员可以看到所有注册的成员，这意味着他们的信息存储在数据库中。它采用表格形式，每个名称旁边显示更新链接，这些链接重定向到我的带有表单的 update.php 页面。单击更新链接后，我被重定向到我的 update.php 并且 URL 显示我需要更新的用户 ID：`clinic/update.php?res_id=3`

现在，我的 update.php 中有一个表单，我需要将它`res_id=3`显示在 URL 中，以便也包含在我的操作脚本 add_assessment.php 中的 MySQL INSERT STATEMENT 中。我尝试过使用`$ID=$_GET['res_id']`，`$ID=$_POST['res_id']`但没有一个有效。谁能告诉我我必须使用哪一行代码？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T03:23:50.120

如果没有您的任何代码可以通过，我只能建议逐步完成您的工作流程并`var_dump`在两者上使用`$_GET`，`$_POST`并确保在`res_id`页面之间传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T03:24:25.417

您没有将值传递给表单，因此`$_POST`or`$_GET`上的值`update.php`将不可用于`add_assessment.php`。

* * *

在`clinic/update.php?res_id=3`输出`$_GET['res_id']`中作为隐藏表单字段中的值，如下所示：

```
<input type='hidden' name='res_id' value='<?php echo htmlspecialshars($_GET['res_id']); ?>' /> 
```

然后`add_assessment.php`使用`$_POST['res_id']`

**或者**

`action='add_assessment.php'`以如下形式将其附加到：

```
<form action='add_assessment.php?res_id=<?php echo htmlspecialshars($_GET['res_id']); ?>' method='post'> 
```

然后`add_assessment.php`使用`$_GET['res_id']`

# wcf - 客户端以某种方式在 WCF 中检测到服务器的时区

> ID：14132566
> 
> 赞同：2
> 
> 时间：2013-01-03T03:18:44.877
> 
> 标签：wcf, datetime

我有这种情况：

服务器位于 (GMT +3) 时区

客户在 (GMT -5) 时区

服务器向客户端返回一个`DateTime`，假设它是“10JAN2013 00:00”并且 AFAIK`DateTime`没有附加时区信息。客户端的时间转换为客户端的时区，即“09JAN2013 16:00”！DTK 被指定为 DTK.Unspecified。

我的问题，如果`DateTime`没有时区信息，客户端如何知道服务器的时区？这让我很困惑！它是在 SOAP 的标头中发送的还是类似的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T03:37:21.967

他们可能知道也可能不知道。当`DateTime`对象在客户端和服务器之间传递时，它们被序列化为双方都能理解的某种通用格式。在其中一些格式中，例如 XML，时区信息是通过网络发送的：如果您有`DateTime`with `DateTimeKind.Utc`，则将在序列化日期后附加一个 'Z'；for`Local`时区会被添加，for`Unspecified`不会被添加，所以对方知道使用哪种格式。在其他格式中，例如 JSON，如果 kind 是 ，服务器将不会在日期时间发送任何内容`Utc`，但会为其他类型添加本地时区信息（对于`Local`and的 JSON 格式没有区别`Unspecified`；IIRC 接收方将此类信息视为`Local`)。

如果您想查看网络上发生了什么，您可以运行下面的程序，同时拥有 Fiddler 等网络捕获工具，以查看客户端向服务器发送的内容。

```
public class StackOverflow_14132566
{
    [ServiceContract]
    public interface ITest
    {
        [OperationContract]
        [WebInvoke(RequestFormat = WebMessageFormat.Json, 
                   ResponseFormat = WebMessageFormat.Json,
                   BodyStyle = WebMessageBodyStyle.WrappedRequest)]
        DateTime Add10Hours(DateTime input, string description);
    }
    public class Service : ITest
    {
        public DateTime Add10Hours(DateTime input, string description)
        {
            return input.AddHours(10);
        }
    }
    public static void Test()
    {
        string baseAddress = "http://" + Environment.MachineName + ":8000/Service";
        ServiceHost host = new ServiceHost(typeof(Service), new Uri(baseAddress));
        host.AddServiceEndpoint(typeof(ITest), new BasicHttpBinding(), "basic");
        host.AddServiceEndpoint(typeof(ITest), new WebHttpBinding(), "web").Behaviors.Add(new WebHttpBehavior());
        host.Open();
        Console.WriteLine("Host opened");

        ChannelFactory<ITest> factory = new ChannelFactory<ITest>(new BasicHttpBinding(), new EndpointAddress(baseAddress + "/basic"));
        ITest proxy = factory.CreateChannel();
        Console.WriteLine(proxy.Add10Hours(new DateTime(2013, 1, 2, 19, 29, 0, DateTimeKind.Utc), "XML, UTC"));
        Console.WriteLine(proxy.Add10Hours(new DateTime(2013, 1, 2, 19, 29, 0, DateTimeKind.Local), "XML, Local"));
        Console.WriteLine(proxy.Add10Hours(new DateTime(2013, 1, 2, 19, 29, 0, DateTimeKind.Unspecified), "XML, Unspecified"));

        ((IClientChannel)proxy).Close();
        factory.Close();

        factory = new ChannelFactory<ITest>(new WebHttpBinding(), new EndpointAddress(baseAddress + "/web"));
        factory.Endpoint.Behaviors.Add(new WebHttpBehavior());
        proxy = factory.CreateChannel();
        Console.WriteLine(proxy.Add10Hours(new DateTime(2013, 1, 2, 19, 29, 0, DateTimeKind.Utc), "JSON, UTC"));
        Console.WriteLine(proxy.Add10Hours(new DateTime(2013, 1, 2, 19, 29, 0, DateTimeKind.Local), "JSON, Local"));
        Console.WriteLine(proxy.Add10Hours(new DateTime(2013, 1, 2, 19, 29, 0, DateTimeKind.Unspecified), "JSON, Unspecified"));

        ((IClientChannel)proxy).Close();
        factory.Close();

        Console.Write("Press ENTER to close the host");
        Console.ReadLine();
        host.Close();
    }
} 
```

# java - 多次绑定到同一个端口？

> ID：14132568
> 
> 赞同：2
> 
> 时间：2013-01-03T03:18:52.413
> 
> 标签：java, windows, sockets, networking, windows-networking

为什么以下代码不抛出“java.net.BindException：地址已在使用：JVM_Bind”异常？

```
import java.net.InetSocketAddress;
import java.net.ServerSocket;

public class Test
{
    public static void main(String[] args) throws Exception
    {
        try (ServerSocket socket1 = new ServerSocket();
             ServerSocket socket2 = new ServerSocket();
             ServerSocket socket3 = new ServerSocket())
        {
            int port = 10000;

            socket1.setReuseAddress(false);
            socket1.bind(new InetSocketAddress("0.0.0.0", port));

            socket2.setReuseAddress(false);
            socket2.bind(new InetSocketAddress("127.0.0.1", port));

            socket3.setReuseAddress(false);
            socket3.bind(new InetSocketAddress("127.0.0.2", port));

            Thread.sleep(Long.MAX_VALUE);
        }
    }
} 
```

之后运行“netstat”显示：

```
C:\用户\管理员>netstat -a -n | 找到str 10000
  TCP 0.0.0.0:10000 0.0.0.0:0 监听
  TCP 127.0.0.1:10000 0.0.0.0:0 监听
  TCP 127.0.0.2:10000 0.0.0.0:0 监听
  TCP [::]:10000 [::]:0 监听

```

我在 Windows Server 2008 R2（64 位）上运行它，并且“ipconfig /all”仅显示一个网络适配器/接口（其他网络适配器被禁用）。但是，在其他一些机器上，这个程序实际上确实抛出了预期的“java.net.BindException：地址已经在使用：JVM_Bind”！

会发生什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T06:32:24.200

您可以在不同的 IP 地址上绑定相同的端口号。操作系统可以通过它们的目标 IP 地址以及它们的 TCP 端口号来区分传入的数据包。

操作系统为`127.0.0.1:1000`和保留单独的 serverSocket 没有问题`127.0.0.2:1000`。它知道每个数据包属于哪里——即使它打开了一个新连接。

请注意，IP 地址`0.0.0.0`就是这样 - IP 地址（它不是一个*有效*的IP 地址，因为 IP 数据包可以在那里发送，但我不能支持`0.0.0.0 == any`任何一个）。如果要侦听所有地址，请改为提供`null`给 InetSocketAddress。此时，您有更大的机会获得所需的异常（除非操作系统决定通配符侦听具有较低的优先级并且不会真正重叠特定的侦听，因此它们可以绑定两者）。

另请注意，设置`setReuseAddress`不会影响绑定。它只会影响连接被拒绝或接受的一些细节。

作为旁注 - 等待三亿年有什么意义？

# javascript - JS判断event.target是否有“[ref=xxxx]”

> ID：14132573
> 
> 赞同：1
> 
> 时间：2013-01-03T03:19:45.807
> 
> 标签：javascript, jquery, events

请告知如何知道 event.target 是否是具有 ref="xxxx" 的元素

我试过了，

```
if(event.target.hasAttribute("[ref=xxxx]")) 
```

，它没有工作。

非常感谢。

HTML

```
<div ref="xxxx"> xxxxxxxxxxxxxxxxx</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T03:21:41.297

如果你使用 jquery，你应该使用 jquery :)

测试目标的 ref 属性是否为 'xxxx'

```
if($(event.target).attr("ref") === "xxxx"){

} 
```

或者，看看它是否真的有一个属`ref`​​性：

```
if($(event.target).filter("*[ref]").length){

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T03:22:39.753

由于您使用的是 jQuery（基于问题标签），您可以执行以下操作：

```
if ($(event.target).is("[ref='xxx']")) {  // or possibly $(this)...
  //...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T03:36:12.867

`hasAttribute()`将返回一个布尔值，语法为`hasAttribute( attributeName)`

你要`getAttribute()`

```
if(event.target.getAttribute("ref") =="xxxx") 
```

# uiscrollview - scrollRectToVisible UITextField 不使用自动布局滚动

> ID：14132574
> 
> 赞同：2
> 
> 时间：2013-01-03T03:19:49.873
> 
> 标签：uiscrollview, uitextfield, autolayout

```
[self.scrollView scrollRectToVisible:textField.bounds animated:YES]; 
```

我似乎根本无法让我的 UIScrollView 滚动，以免它掩盖我的 UITextField。我认为 scrollRectToVisible 将是我的救星，但看起来不行。也许我错过了将我的 textField 坐标转换为我的滚动视图之类的东西。无论哪种方式，请查看我的示例项目。

[https://github.com/stevemoser/Programming-iOS-Book-Examples/tree/master/ch20p573scrollViewAutoLayout2](https://github.com/stevemoser/Programming-iOS-Book-Examples/tree/master/ch20p573scrollViewAutoLayout2)

哦，这个项目可能缺少委托连接，但我检查了它仍然没有滚动。

我见过与此类似的其他问题，但没有提到 Autolayout。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-09T08:13:26.810

`scrollRectToVisible::`转换为自动布局后，我也遇到了问题。我只是将其更改为直接调用，`setContentOffset::`然后它又开始工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-28T13:18:18.870

我遇到了同样的问题，我想将自动布局的 UITextEdit 滚动到视图中，而不使其成为第一响应者。

对我来说，问题是 UITextField 的边界是稍后在自动布局传递期间设置的，因此如果您在设置布局后立即执行此操作，则边界还无效。

要解决方法，我确实创建了 UITextField 的后代，并覆盖`setBounds:`并添加了一个 0 计时器以“稍后”滚动到视图中（你不能在那一刻滚动，因为系统的自动布局通道可能还没有完成）

```
@interface MyTextField: UITextField
{
  bool _scrollIntoView;
}
..
@end
@implementation MyTextField
-(void)setBounds:(CGRect)bounds
{
  bool empty=CGRectIsEmpty(self.bounds);
  bool isFirstResponder=self.isFirstResponder;
  [super setBounds:bounds];
  if (empty && !isFirstResponder && _scrollIntoView) 
    [self performSelector:@selector(scrollIntoViewLater) withObject:nil afterDelay:0];
  else if (empty && isFirstResponder)
    [self performSelector:@selector(becomeFirstResponder) withObject:nil afterDelay:0];
}

-(void)scrollIntoViewLater
{
  CGRect r=[scrollView convertRect:self.bounds fromView:self];
  [scrollView scrollRectToVisible:r animated:TRUE];
}
@end 
```

如果该字段应该可以使用屏幕键盘进行额外编辑，只需稍后调用 becomeFirstResponder：它会使用私有`scrollTextFieldToVisible`API自动滚动到键盘上方的视图中，然后调用滚动视图`scrollRectToVisible:animated:`。

顺便说一句，您的示例链接已损坏...

# php - cakephp 验证规则不保留提交

> ID：14132583
> 
> 赞同：0
> 
> 时间：2013-01-03T03:21:26.533
> 
> 标签：php, cakephp

**用户模型**

```
//...

public $validate = array(
    "username" => array(
        "alpha-numeric" => array(
            'rule'     => 'alphaNumeric',
            'required' => true,
            'message'  => 'Username must contain only numbers and letters.'                 
        ),
        "between" => array(
            "rule" => array("between", 4, 25),
            "message" => "Username must contain between 4 to 25 characters."
        )
    ),

//... 
```

**用户控制器**

```
public function index() {
    debug($this->data); // displays values as expected
    debug($this->User->validates()); // always false, unless I remove alphanumeric rule
} 
```

提交时，`username`无论文本中包含什么内容，我的表单都会始终将该字段验证为 false（触发其相​​应的消息）。其余字段也未验证。如果我`username`一起删除验证规则，其余字段仍未验证。（提交表格如同经过验证）

我在这里想念什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T03:59:21.963

在手动调用之前`$this->User->validates()`，您必须调用模型的`set`方法并提供表单的数据。

```
public function index() {
    $this->User->set($this->request->data); // Only way the next method will work.
    debug($this->User->validates());
} 
```

# mongodb - Mongodb服务器规格

> ID：14132585
> 
> 赞同：0
> 
> 时间：2013-01-03T03:21:37.903
> 
> 标签：mongodb

请问mongodb最好的服务器规格是什么？

初始请求为 5k - 10k 读/写。

我对此一无所知，请帮助我。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T03:32:40.423

一个普通的配置桌面应该能够处理这个要求。但可能不推荐用于生产部署。

但是 10Gen，mongodb 公司推荐 7000 美元到 10000 美元范围的盒子以获得最佳性能（在一个月前提供的免费课程中）。您可以观看有关[MongoDB DBA 教程](http://muruga.yoksha.com/mongodb-dba-video-tutorials.html)或[硬件要求](http://www.youtube.com/watch?v=19VZJ9H3LmQ&list=PL-mmKfP9K7p-EjmZg2vke86WUooEgNIDs)的播放列表 7 的第 9 个视频。

同样，它会根据不同的事实而有所不同，您可以从这些视频中获取一些提示以继续前进。

# python - 脚本无法导入模块，在 shell 中导入工作正常

> ID：14132594
> 
> 赞同：2
> 
> 时间：2013-01-03T03:23:22.507
> 
> 标签：python, import, flask

我最近在我的开发箱上遇到了一个问题。我可以在交互式 shell 中逐行运行我的脚本，但是在从命令行运行脚本时尝试导入模块时它会失败。

具体来说，我正在尝试使用：`from flask import Flask`

我得到的错误是：

```
from flask import Flask
ImportError: cannot import name Flask 
```

几天前它工作得非常好，我没有对系统进行任何更改（我记得）所以我不知道这是否是我的 python shell 或烧瓶的问题。

我检查过/尝试过的事情：

*   通过 pip 删除/重新安装烧瓶
*   确认 C:\Python27\lib\site-packages 在我的系统路径中
*   清除并重新添加我的 PATH 环境变量中的目录
*   卸载/重新安装 Python 2.7.3
*   成功运行以下脚本来测试我的 python shell：

    ```
    from time import gmtime, strftime
    print strftime("%a, %d %b %Y %H:%M:%S +0000", gmtime()) 
    ```

我愿意接受任何新的故障排除建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T03:36:24.577

我最初调用了文件flask.py，并且在同一目录中有一个旧编译的flask.pyc。当我将它移到另一个目录以及删除旧的 flask.pyc 时，它就可以正常工作了。

感谢 timc 和 BrenBarn 的快速评论！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-23T14:00:39.783

我在命名脚本文件时犯了一个愚蠢的错误`nltk.py`。所以当我导入时`nltk`，它没有显示错误。当我尝试调用任何函数时，它显示一个错误。

确保不会发生这种情况。

# php - PHP 显示 JSON 和 XML

> ID：14132595
> 
> 赞同：0
> 
> 时间：2013-01-03T03:23:23.197
> 
> 标签：php

我正在使用可用的 API 来发送请求并接收 json 和 xml 格式的结果。我可以这样做，但如何正确显示返回的数据？

我使用 json_decode 并将 xml 数据分配给一个数组和 print_r 那些。它出现在大量的垃圾数据中。

如何在表格中显示它？或者我必须在显示之前先将数据保存到单个文件或数据库中吗？

我是 PHP 新手，因此不确定如何实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T03:31:10.203

JSON 是一个多维数组，在我看来，查看它的最简单方法就是

```
var_dump($json_array); 
```

不过，这可能是您所指的数据块。

这不是一种非常适合表格的格式，因为表格本质上是二维的，而 JSON 可以是多维的。

您可以展平阵列，然后将其显示为表格。

```
function flatten_json($json, &$flat, $key) {

    // First check the base case: if the arg is not an array,
    //   then it's data to be inserted in the flat array.
    if (!is_array($json)) {
        $flat[$key] = $json;
    } else {

        // It's an array, to reduce the depth of the json,
        // we remove this array, by iterating through it,
        // sending the elements to be checked if they're also arrays,
        // or if they're data to be inserted into the flat array.

        foreach ($json as $name => $element) {
            flatten_json($element, $flat, $key.'_'.$name);
        }
    }
} 
```

要使用这个函数，你首先声明你的平面数组：

```
$flat = array(); 
```

然后将它传递给函数，使用你的 json 和一个你想成为外键的键，如果你确定你的 json 是一个数组，这几乎可以保证，你可以将键留空。

```
flatten_json($json_array, $flat, ''); 
```

现在 $flat 将具有扁平化的 json，您可以将其打印为表格，如果您有许多 json 结果要打印，可能会打印到 csv 中。

如果你的 json 是：

```
array(
    'person' => array(
        'name' => 'timmy',
        'age' => '5'
    ),
    'car' => array(
        'make' => 'ford',
        'engine' => array(
            'hp' => 260,
            'cyls' => 8
        )
     )
 ) 
```

然后 $flat 将如下所示：

```
array(
    'person_name' => 'timmy',
    'person_age' => 5,
    'car_make' => 'ford',
    'car_engine_hp' => 260,
    'car_engine_cyls' => 8
) 
```

如果你想打印在一个漂亮的 html 表中：

```
echo "<table><tr>";
foreach ($flat as $header => $value) {
    echo "<th>$header</th>;
}

echo "</tr><tr>";

foreach ($flat as $header => $value) {
    echo "<td>$value</td>";
}

echo "</tr></table>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T04:00:47.060

我有点困惑。但如果你指的是一个 xml 文件，它会像这样出现：

```
 <books> 
  <book published="2011-07-24 19:40:26"> 
  <title>I left my heart on Europa</title> 
   <author>Ship of Nomads</author>
 < /book>
  <book published="2011-07-24 19:40:26"> 
  <title>I left my liveron Europa</title> 
   <author>Ship of Nomads</author>
 < /book> 
</books> 
```

您可以在这里使用**simplexml_load_file**做一些 php 技巧。来自上述 xml 的示例，您可以使用以下代码：

```
 $mybooks= simplexml_load_file('books.xml'); 
echo "<ul id="booklist">"; 
foreach ($mybooks as $bookinfo):
 $title=$bookinfo->title; 
$author=$bookinfo->author; 
$date=$bookinfo['published']; 
echo "<li><div class="title">".$title."</div><div class="author">by ".$author."</div><b>".$date."</b></li>";
 endforeach; echo "</ul>"; 
```

希望这可以帮助。

# html - 如何将 HTML 中的标题和列表项内容提取到逗号分隔的列表中？

> ID：14132598
> 
> 赞同：1
> 
> 时间：2013-01-03T03:23:46.307
> 
> 标签：html, regex, sed

遗憾的是，我的 regex-fu 缺乏，虽然我正在阅读“掌握 Regex”并阅读一些在线教程，但我一无所获，所以希望如果有人能给我一个针对我的情况的实际例子，它会帮助我开始。

输入文件大致如下所示：

```
<html>
 <head>
  <title>My Title</title>
 </head>
<body>
 <p>Various random text...</p>
 <ul>
  <li>One</li>
  <li><a href="example.com">Two</a></li>
  <li>Three</li>
 </ul>
 <p>Various random text...</p>
 </body>
</html> 
```

我的最终目标是输出：

```
My Title,One,<a href="example.com">Two</a>,Three 
```

例如，逗号分隔的值和标题，以及 li 标签的内容

第一步是尝试删除之前的所有内容（包括标题），所以当我决定使用 sed（我在 Windows 上运行 GNU sed 4.2 版）时，我尝试如下：

计算我需要匹配“所有内容”，包括标题标签的换行符并替换为任何内容：

用点匹配每个字符，还有换行符 /n 所以把它变成一个类并用 * 重复，这意味着 [.\n]* 后跟标题标签替换为空

所以

```
type file.html | sed "s/[.\n]*<title>//" 
```

但这不起作用，它只是删除了字符串标题，而不是之前的内容。

我哪里错了？我想明白。

任何建议表示赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T03:33:57.803

使用 sed（和 tr，和 sed...）：

```
sed -n -e '/<title>\|<li>/{s/^[ ]*<[^>]*>//;s/<[^>]*>[ ]*$//p}' input | \
    tr '\n' , | sed 's/,$/\n/' 
```

使用单个 sed 表达式：

```
sed ':a;N;$!ba;s/\n//g;        # loop, read-in all file, remove newlines 
     s/.*<title>//;            # remove everything up to, including <title>
     s/title>.*<ul>/title>/;   # remove everything between </title> and <ul>
     s!</ul>.*!!;              # remove everything after </ul>, inclusive
     s!</li>\|</title>!,!g;    # substitute closing tags with commas
     s/<li>//g;                # remove <li> tags
     s/,[ ]*$//                # delete the trailing comma
     ' input 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T06:40:50.373

### 红宝石解决方案

你可以通过多种方式做你想做的事，有些方式比其他方式更优雅。这是一种使用单个 Ruby 单行代码获得预期结果的快速而简单的方法。

```
ruby -ne 'BEGIN { output = "" }
          output << $1 + ?, if %r{<(?:title|li)>(.*)</\1?}
          END { puts output.sub(/,$/, "") }' /tmp/foo.html 
```

此脚本将以原始问题中描述的格式打印结果。例如，使用提供的示例文本打印：

```
My Title,One,<a href="example.com">Two</a>,Three 
```

# python - 为什么 pytz 似乎没有任何时区信息？

> ID：14132600
> 
> 赞同：3
> 
> 时间：2013-01-03T03:24:02.387
> 
> 标签：python, timezone, pytz

我刚刚加载了 pytz。我可以导入它没有问题。但是当我打电话时，`pytz.all_timezones`我得到一个空数组（`[ ]`）。我以前用过这个包，它列出了所有的区域。什么会导致这没有列出时区？

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-30T17:52:26.980

这看起来确实很奇怪，但如果您还没有这样做，我认为最好的做法是尝试使用 setuptools 进行安装，更具体地说，运行以下命令：

```
easy_install --upgrade pytz 
```

如果您尚未检查，此页面包含更多信息： http: [//pytz.sourceforge.net/](http://pytz.sourceforge.net/)

要尝试的另一件事是查看该`all_timezones_set`集合是否也返回空，如果不是，请查看您是否可以使用该集合而不是`all_timezones`

# java - 线程“主”java.lang.NoClassDefFoundError 中的异常：HelloWorld

> ID：14132602
> 
> 赞同：5
> 
> 时间：2013-01-03T03:24:38.920
> 
> 标签：java, linux, compilation, terminal

我已经为此工作了大约一个小时，并浏览了 stackoverflow 上的问答，但我还没有找到解决我问题的建议。如果这是重复的，我很抱歉，但我找不到任何重复的问题，其答案可以解决我的具体问题。

我第一次尝试从终端编写和编译一个 java 程序（到目前为止，我一直使用 Eclipse for java 和 VIM 来处理其他一切，但我觉得是时候完全切换到 VIM 了）。这是我当前的 HelloWorld 代码：

```
package main;

public class HelloWorld {
    public static void main(String args[]) {
        System.out.println("Hello World!");
    }
} 
```

我使用以下命令编译并运行（指定类路径以确保这不是问题）：

```
javac -cp "./" HelloWorld.java
java -cp "./" HelloWorld 
```

这给了我以下错误消息：

```
Exception in thread "main" java.lang.NoClassDefFoundError: HelloWorld (wrong name: main/HelloWorld)
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:791)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:449)
    at java.net.URLClassLoader.access$100(URLClassLoader.java:71)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:361)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    at sun.launcher.LauncherHelper.checkAndLoadMain(LauncherHelper.java:480) 
```

我知道它正在查看文件 HelloWorld.class 并尝试访问 HelloWorld 类，因为如果我将运行命令更改为：

```
java -cp "./" Foo 
```

我收到一条完全不同的错误消息：

```
Error: Could not find or load main class Foo 
```

我已经尝试了几十页的故障排除，但都失败了，包括以下内容：

[线程“main”中的异常 java.lang.NoSuchMethodError: main](https://stackoverflow.com/questions/3540065/exception-in-thread-main-java-lang-nosuchmethoderror-main)

[http://introcs.cs.princeton.edu/java/15inout/mac-cmd.html](http://introcs.cs.princeton.edu/java/15inout/mac-cmd.html)

`java -version`产量：

```
java version "1.7.0_07"
Java(TM) SE Runtime Environment (build 1.7.0_07-b10)
Java HotSpot(TM) Client VM (build 23.3-b01, mixed mode) 
```

我的操作系统是 LinuxMint 并`uname -a`产生：

```
Linux will-Latitude-D620 2.6.38-8-generic #42-Ubuntu SMP Mon Apr 11 03:31:50 UTC 2011 i686 i686 i386 GNU/Linux 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-03T03:36:58.037

> 主包；

这意味着您的类驻留在`main`包中，其规范名称是`main.HelloWorld`.

Java 要求包名也应该反映在目录结构中。这意味着：

1.  您的`HelloWorld.java`文件应位于名为`main`
2.  您应该从包含的目录执行`javac`and ，而不是从它本身`java``main``main`
3.  类路径应该包含目录所在的`main`目录，而不是`main`它本身
4.  `java`期望执行的类的规范名称，所以`main.HelloWorld`

所以，回顾一下：

你应该有类似的东西`myproject/main/HelloWorld.java`

从`myproject`, 运行`javac main/HelloWorld.java`

从`myproject`, 运行`java -cp ./ main.HelloWorld`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-03T03:30:51.680

您已将您的类放在名为“main”的包中，但您试图将其视为不在包中。由于您放在`package main;`源文件的顶部，因此您需要将 HelloWorld.java 放在 ./main 中，然后 run `javac ./main/HelloWorld.java`，然后是`java -cp . main.HelloWorld`.

这些命令将为您提供您正在尝试构建的工作示例：

```
mkdir main
echo 'package main; public class HelloWorld { public static void main(String... args) { System.out.println("Hello World"); } }' > main/HelloWorld.java
javac main/HelloWorld.java
java -cp . main.HelloWorld 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-04T21:19:07.710

作为初学者，您可能会遇到错误输出相同的非常相似的情况。您尝试编译并运行您的简单程序（没有设置任何包），然后执行以下操作：

```
javac HelloWorld.java
java HelloWorld.class 
```

这会给你同样的 java.lang.NoClassDefFoundError 因为 java 认为 HelloWorld 是你的**包**和类你的**类名**。要解决它，只需使用

```
javac HelloWorld.java
java HelloWorld 
```

请参阅 Java 页面 -[课程：常见问题（及其解决方案）](http://docs.oracle.com/javase/tutorial/getStarted/problems/index.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T03:28:52.607

**问题：** 基本上，线程“main”中的异常`java.lang.NoClassDefFoundError`：

表示在类路径中找不到您尝试运行的类。

**解决方案**：您需要将`.jar`包含此类的类或文件添加到 java 类路径中。从命令行运行 java 类时，需要添加点 (.)

```
java YourSingleClass -cp . 
```

进入告诉JVM在实际目录中搜索类的类路径。

如果您从 .jar 文件运行类，则需要将此 jar 文件添加到类路径中：

```
java org.somepackage.SomeClass -cp myJarWithSomeClass.jar 
```

# c# - 如何在 C# 中按名称区分用户设置？

> ID：14132603
> 
> 赞同：3
> 
> 时间：2013-01-03T03:24:53.510
> 
> 标签：c#, windows, winforms, settings.settings, settings

在*[CodeProject](http://www.codeproject.com/Articles/29130/Windows-Forms-Creating-and-Persisting-Custom-User)*和*[StackOverflow.105932](https://stackoverflow.com/questions/105932/how-to-record-window-position-in-winforms-application-settings%20StackOverflow)*（以及其他一些，例如*[StackOverflow.1873658](https://stackoverflow.com/questions/1873658/net-winforms-remember-windows-size-and-location)*和 MSDN 文章）之后，我有一个主窗体，其大小、位置和 WindowState 保存在并从中读取`Properties.Settings.Default.<name>`，例如，`Properties.Settings.Default.WindowState = WindowState;`这对于这个窗体非常有用。我出现的每个代码示例似乎都认为 WindowState 将只有一个全局设置，它们都没有说明如何区分每个实例的这些设置。

但是，我在表单的超类中编写了代码，因为我希望此应用程序中的所有表单都继承自该类，以便它们都能够保存/读取自己的大小、位置和状态。

我想做的只是用继承形式的类名替换上面键路径中的“默认”一词。这是伪代码，如果它有效（它不起作用，我找不到有效的变体）会很棒：

`Properties.Settings[this.ToString()].WindowState = WindowState;`

我怎样才能正确、可重用、可维护、防熵地做到这一点？

编辑：“配置部分”会是答案吗？（也许为每个 Form 子类创建一个部分？）

编辑：不，不是配置部分，但我认为[这个类](http://msdn.microsoft.com/en-us/library/system.configuration.applicationsettingsbase.settingskey%28v=vs.90%29.aspx)必须是正确解决方案的一部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T16:18:33.187

好吧，从本质上讲，这并不是 .NET 中默认设置的工作方式。Scope = User 的设置文件被小心地隐藏在一个私有的 AppData 文件夹中，其名称难以描述。通过散列主要 EXE 的各种属性创建的名称，包括其名称、位置和 [AssemblyVersion]。防止程序意外覆盖彼此的设置文件很重要。没有记录的方法可以从另一个程序获取该文件。主要是因为您没有很好的方法来猜测另一个程序的这些属性值。

有一些解决方法，您可以创建自己的从 SettingsProvider 派生的类，而不是默认的 LocalFileSettingsProvider 类。有点痛苦，System.Configuration 并不是 .NET 中最好的命名空间。一个很好的入门方法是使用[RegistrySettingsProvider SDK 示例](http://msdn.microsoft.com/en-us/library/ms181001%28v=vs.90%29.aspx)。

或者只是解决问题，只需创建您自己的 XML 文件，并将其存储在 AppData 文件夹中，您可以随时从任何应用程序访问该文件夹。这通常是一个好主意，因为当许多应用程序共享一个公共数据文件时，您往往会被版本控制问题所困扰。您需要在其自己的程序集中声明一个可序列化 XML 的类来存储这些属性。上面有一个沉重的“不先跟我说话就不要改变”的评论。

# lucene - Luke(4.0.0-ALPHA)为什么打不开Lucene4.0的索引文件？

> ID：14132606
> 
> 赞同：1
> 
> 时间：2013-01-03T03:25:09.107
> 
> 标签：lucene, luke

我使用Lucene4.0制作索引文件：

```
File directorycreate = new File(indexpath);         
                Directory dir = new SimpleFSDirectory(directorycreate);
                Analyzer analyzer = new IKAnalyzer(true);
                IndexWriterConfig conf = new IndexWriterConfig(Version.LUCENE_40, analyzer);
                IndexWriter writer = new IndexWriter(dir,conf);
                    Document document = new Document();
                    FieldType fieldtype = new FieldType();
                    fieldtype.setIndexed(true);
                    fieldtype.setTokenized(true);
                    fieldtype.setStored(true);
                    fieldtype.setStoreTermVectorPositions(true);
                    fieldtype.setStoreTermVectors(true);
                    document.add(new Field("title",name,fieldtype));
                    document.add(new Field("content",description,fieldtype));
                    document.add(new Field("contenttype", "product",TextField.TYPE_STORED));
                    document.add(new Field("doctype","product",TextField.TYPE_STORED));

        This is my index files:
        2013/01/03  10:49    <DIR>          .
        2013/01/03  10:49    <DIR>          ..
        2013/01/03  10:49                20 segments.gen
        2013/01/03  10:49                69 segments_1
        2013/01/03  10:49        16,566,094 _0.fdt
        2013/01/03  10:49           526,786 _0.fdx
        2013/01/03  10:49               459 _0.fnm
        2013/01/03  10:49               357 _0.si
        2013/01/03  10:49           307,358 _0.tvd
        2013/01/03  10:49        17,926,810 _0.tvf
        2013/01/03  10:49         1,053,537 _0.tvx
        2013/01/03  10:49         2,946,878 _0_Lucene40_0.frq
        2013/01/03  10:49         2,548,982 _0_Lucene40_0.prx
        2013/01/03  10:49            18,903 _0_Lucene40_0.tim
        2013/01/03  10:49               332 _0_Lucene40_0.tip
        2013/01/03  10:49               165 _0_nrm.cfe
        2013/01/03  10:49           329,336 _0_nrm.cfs 
```

但是 lukeall-4.0.0-ALPHA.jar (http://code.google.com/p/luke/downloads/list) 无法打开这些索引文件，出现错误：不支持格式版本（资源：SimpleFSIndexInput (path="D:\myProjectPro\Java\createIndex\product_0.tvx"))：1（需要在 0 和 0 之间）。

有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:44:38.227

我对 Luke 不是很熟悉，但看起来这个版本的 Luke 是在术语向量支持有效负载之前构建的（当 tvx 版本号从 0 上升到 1 时），请参阅[https://issues.apache.org/jira/浏览/LUCENE-1888](https://issues.apache.org/jira/browse/LUCENE-1888)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T13:13:56.863

我猜这个问题是版本不匹配。看起来最新的 Luke - lukeall-4.0.0-ALPHA 仅使用 Lucene 4.0 ALPHA 位（2012 年 7 月）构建，我假设您正在使用官方 Lucene 4.0 版本（2012 年 10 月）来创建索引。我认为此时您有两种可能的选择：

1.  使用 Lucene 4.0 ALPHA 创建索引 - 从[Lucene Archives](http://archive.apache.org/dist/lucene/java/)获取 jars 。
2.  似乎是 BETA 版本的 Luke 签入源代码 -[更改 r86](http://code.google.com/p/luke/source/detail?r=86)。拉取[最新源代码](http://code.google.com/p/luke/source/checkout)，在本地构建 Luke 并试用 BETA 版本。

# android - 坚持为什么我的程序无法工作......？

> ID：14132613
> 
> 赞同：0
> 
> 时间：2013-01-03T03:25:50.230
> 
> 标签：android

我一直在尝试为我和我的女朋友制作一个应用程序，它可以让我们输入消息，然后让其他人阅读它，然后单击下面的按钮给出回复并保持这个来回。我猜我已经走得很远了，但我完全不知道为什么它现在不起作用。我一直在根据这段[代码](http://developer.android.com/training/basics/activity-lifecycle/index.html)的骨架工作。

最初，代码允许我打开应用程序，然后一旦我按下底部的按钮，它会给我一个错误，说程序不再能够运行，我必须“强制关闭”它。我修复了这个问题，但是当我这样做时，当我单击按钮时 MainActivity 窗口会不断重新出现。我试图解决这个问题，但现在应用程序不再打开

我尝试了调试器，但我还不够先进，无法弄清楚它的真正含义......

如果您想要项目文件夹或以某种方式在此处上传，我可以这样做。只是想把这个作为我女儿的小礼物。提前致谢！

[编辑] 我应该提到没有语法错误

[编辑] 清单代码

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.chatfriends"
    android:versionCode="1"
    android:versionName="1.0" xmlns:tools="http://schemas.android.com/tools" tools:ignore="OldTargetApi">

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" tools:ignore="MissingPrefix"/>

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                 <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Activity__alex" />
    </application>

</manifest> 
```

[编辑] MainActivity：

```
package com.chatfriends;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.layout.activity_main, menu);
        return true;
    }

    protected void onStart() {
        super.onStart();
    }
    @Override
    protected void onRestart() {
        super.onRestart();
    }

    @Override
    protected void onResume() {
        super.onResume();
    }

    @Override
    protected void onPause() {
        super.onPause();
    }

    @Override
    protected void onStop() {
        super.onStop();
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
    }

     public void startActivity_alex(View v){
         Intent intent = new Intent(MainActivity.this, Activity__alex.class);
         startActivity(intent);
    }
 } 
```

**编辑：**现在应用程序运行，但是当我点击下面的按钮时，它给了我一个错误。

[这是目录](http://imgur.com/dj3xu)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T03:43:34.743

改变

```
 <activity
        android:name=".chatfriends.MainActivity" 
```

至

```
<activity
        android:name=".MainActivity" 
```

在你的里面，`manifest`因为你 MainActivity 在`com.chatfriends`包里面而不是在里面`com.chatfriends.chatfriends`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T03:40:57.110

您应该在`Manifest`文件中将您的活动名称定义为：

```
android:name=".MainActivity" 
```

代替`android:name=".chatfriends.MainActivity"`

因为*`com.chatfriends.chatfriends.MainActivity`*找不到说明类的错误，并且您的`MainActivity`类直接在*`com.chatfrieds`*包下。

**编辑**

错误消息告诉您**"NoSuchMethodException"** `onClick(View)`。您似乎在XML 文件中定义`onClick`了处理程序或按钮。`layout`

您需要在活动中添加此功能：

```
public void onClick(View view){

  // Add your code here for button click

} 
```

# c++ - 如何将 char * 转换为双打？

> ID：14132616
> 
> 赞同：1
> 
> 时间：2013-01-03T03:26:21.150
> 
> 标签：c++

我有一个 x,y,z 作为双精度类型的结构。我试图用空格分隔行，然后将该数组的值放入我的结构中，但它无法正常工作，有人可以告诉我该怎么做吗？

```
#include "_externals.h"
#include <vector>

typedef struct
{
    double X, Y, Z;
} p;

p vert = { 0.0, 0.0, 0.0 };

int main()
{
    char *path = "C:\\data.poi";    

    ifstream inf(path);
    ifstream::pos_type size;
    inf.seekg(0, inf.end);
    size = inf.tellg();

    double x, y, z;
    char *data;

    data = new char[size];
    inf.seekg(inf.beg);
    inf.read(data, size);
    inf.seekg(inf.beg);

    char** p = &data;
    char *line = *p;    

    for (int i = 0; i < strlen(data); ++i)
    {
        const char *verts = strtok(line, " ");

        //this isnt working
        vert.X = verts[0];
        vert.Y = verts[1];
        vert.Z = verts[2];

        ++*line;
    }

} 
```

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T03:45:01.303

您不能（有意义地）**将**a转换`char*`为 a `double`，但您可以从*流*中提取到 a `double`。

由于您在空格上分割输入行，典型的习惯用法是这样的......对于文件中的每一行，创建一个[**`istringstream`**](http://en.cppreference.com/w/cpp/io/basic_istringstream)对象并使用它来填充您的结构。

如果[`operator >>()`](http://en.cppreference.com/w/cpp/io/basic_istream/operator_gtgt)失败（例如，如果在需要数字的地方输入了字母），则目标值保持不变并被[**`failbit`**](http://en.cppreference.com/w/cpp/io/ios_base/iostate)设置。

例如：

```
#include <iostream>
#include <fstream>
#include <sstream>
#include <vector>

struct coords
{
    double X, Y, Z;
};

int main()
{
    std::ifstream inf("data.poi");
    std::vector<coords> verts;
    std::string line;
    while (std::getline(inf, line))
    {
        std::istringstream iss(line);
        coords coord;

        if (iss >> coord.X >> coord.Y >> coord.Z)
        {
            verts.push_back(coord);
        }
        else
        {
            std::cerr << "Could not process " << line << std::endl;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T03:28:37.060

与使用 atoi 处理整数的方法相同。

对于从 char* 到 double 的转换，只需使用：

> 阿托夫

[atof 示例](http://www.cplusplus.com/reference/cstdlib/atof/) 。

# java - 解析 SWIG 接口文件的结构属性

> ID：14132617
> 
> 赞同：0
> 
> 时间：2013-01-03T03:26:23.300
> 
> 标签：java, c, swig

这是我不久前提出的问题的延续。[为通过参数返回的函数创建类型映射](https://stackoverflow.com/questions/12793973/create-a-typemap-for-a-function-that-returns-through-arguments)

上一题的接口文件如下：

```
%module test

%{
#include "header.h"
%}

%inline %{
  %immutable;
  struct FieldFetch {
    int status;
    int type;
    char *value;
  };
  %mutable;

  struct FieldFetch gaiaTextReaderFetchField(gaiaTextReaderPtr reader, int field_num) {
    struct FieldFetch result;
    result.status = gaiaTextReaderFetchField(reader, field_num, &result.type, &result.value);
    return result;
  }
%}

%ignore gaiaTextReaderFetchField;
%include "header.h" 
```

我现在必须解析 gaiaTextReaderPtr 结构，它位于 structs.h 中。该结构位于以下代码的底部，尽管我也包含了其中的其他结构以提供完整的图片。

我在创建 SWIG 不透明数据类型的行下划线

```
/** Virtual Text driver: MAX number of fields */
#define VRTTXT_FIELDS_MAX   65535
/** Virtual Text driver: MAX block size (in bytes) */
#define VRTTXT_BLOCK_MAX 65535

/** Virtual Text driver: TEXT value */
#define VRTTXT_TEXT     1
/** Virtual Text driver: INTEGER value */
#define VRTTXT_INTEGER  2
/** Virtual Text driver: DOUBLE value */
#define VRTTXT_DOUBLE   3
/** Virtual Text driver: NULL value */
#define VRTTXT_NULL 4

/**
 Container for Virtual Text record (line)
 */
    struct vrttxt_line
    {
/* a struct representing a full LINE (aka Record) */
/** current offset (parsing) */
    off_t offset;
//__^________________________________________________________SWIGTYPE_p_off_t
/** line length (in bytes) */
    int len;
/** array of field offsets (where each field starts) */
    int field_offsets[VRTTXT_FIELDS_MAX];
//__^________________________________________________________SWIGTYPE_p_int
/** number of field into the record */
    int num_fields;
/** validity flag */
    int error;
    };

/**
 Container for Virtual Text record (line) offsets 
 */
    struct vrttxt_row
    {
/* a struct storing Row offsets */
/** Line Number */
    int line_no;
/** start offset */
    off_t offset;
//__^________________________________________________________SWIGTYPE_p_off_t
/** record (line) length (in bytes) */
    int len;
/** number of fields into this record */
    int num_fields;
    };

/**
 Container for Virtual Text block of records
 */
    struct vrttxt_row_block
    {
/*
/ for efficiency sake, individual Row offsets 
/ are grouped in reasonably sized blocks
*/
/** array of records [lines] */
    struct vrttxt_row rows[VRTTXT_BLOCK_MAX];
/** number of records into the array */
    int num_rows;
/** min Line Number */
    int min_line_no;
/** max Line Number */
    int max_line_no;
/** pointer to next item [linked list] */
    struct vrttxt_row_block *next;
    };

/** 
 Container for Virtual Text column (field) header
 */
    struct vrttxt_column_header
    {
/* a struct representing a Column (aka Field) header */
/** column name */
    char *name;
/** data type: one of GAIA_NULL_VALUE, GAIA_INT_VALUE, GAIA_DOUBLE_VALUE, GAIA_TEXT_VALUE */
    int type;
    };

/**
 Container for Virtual Text file handling
 */
    typedef struct vrttxt_reader
    {
/* the main TXT-Reader struct */
/** array of columns (fields) */
    struct vrttxt_column_header columns[VRTTXT_FIELDS_MAX];
/** FILE handle */
    FILE *text_file;
//__^________________________________________________________SWIGTYPE_p_FILE
/** handle to ICONV converter object */
    void *toUtf8;       /* the UTF-8 ICONV converter */
//__^________________________________________________________SWIGTYPE_p_void
/** field separator character */
    char field_separator;
/** text separator character (quote) */
    char text_separator;
/** decimal separator */
    char decimal_separator;
/** TRUE if the first line contains column names */
    int first_line_titles;
/** validity flag */
    int error;
/** pointer to first block of records [linked list] */
    struct vrttxt_row_block *first;
/** pointer to last block of records [linked list] */
    struct vrttxt_row_block *last;
/** array of pointers to individual records [lines] */
    struct vrttxt_row **rows;
//__^________________________________________________________SWIGTYPE_p_p_vrttxt_row
/** number of records */
    int num_rows;
/** current Line Number */
    int line_no;
/** max number of columns (fields) */
    int max_fields;
/** current buffer size */
    int current_buf_sz;
/** current buffer offset [parsing] */
    int current_buf_off;
/** I/O buffer */
    char *line_buffer;
/** current field buffer */
    char *field_buffer;
/** array of field offsets [current record] */
    int field_offsets[VRTTXT_FIELDS_MAX];
//__^________________________________________________________SWIGTYPE_p_int
/** array of field lengths [current record] */
    int field_lens[VRTTXT_FIELDS_MAX];
//__^________________________________________________________SWIGTYPE_p_int
/** max field [current record] */
    int max_current_field;
/** current record [line] ready for parsing */
    int current_line_ready;
    } gaiaTextReader;
/**
 Typedef for Virtual Text file handling structure

 \sa gaiaTextReader
 */
    typedef gaiaTextReader *gaiaTextReaderPtr; 
```

任何帮助将不胜感激！问候汉克

**第二部分第**

**1 部分：**其中一位开发人员对 void toUtf8 有这样的看法：

> 嗨，汉克，
> 
> “void *”指针只是一个通用的不透明内存指针；它基本上是一个手柄。
> 
> 在特定上下文中，“void *toUtf8”引用了 ICONV 所需的内部结构。引用的对象必须通过先前调用 gaiaCreateUTF8Converter() 来创建，并且预计在调用 gaiaFreeUTF8Converter() 之前或之后被销毁；对 gaiaFreeUTF8Converter() 的每次调用都需要将此指针作为参数传递。
> 
> 从您的 Java/SWIG 角度来看，它只是一个常量值，可以完全按原样来回传递。（任何直接更改、访问或取消引用此指针的尝试都可能很容易导致一些灾难 == 系统崩溃）
> 
> 再见桑德罗

**2：** 我有几个其他结构，**这些是**gg_structs.h 中的最后一个，它们在使用以下内容时遇到问题。

```
/** COORDs mem-array */
double *Coords;               /* X,Y [vertices] array */ 
```

目前我刚刚提出：

```
%apply double[] {double *}; 
```

这已经清除了它，但是我不确定这是否正确。我应该单独针对阵列吗？实际上，我很确定这是不正确的，只是查看了它创建的类并显示：

```
 public void setCoords(double[] value) {
    gg_structsJNI.gaiaLinestring_Coords_set(swigCPtr, this, value);
  }

  public double[] getCoords() {
    return gg_structsJNI.gaiaLinestring_Coords_get(swigCPtr, this);
  } 
```

这不应该有一个： int 索引才能正常工作吗？对于双重我这样做：

```
%ignore Coords;
%include "gg_structs.h"

%extend gaiaLinestring {
  void setCoords(int index, double value) {
    $self->Coords[index] = value;
  }

  double getCoords(int index) {
    return $self->Coords + index;
  }
} 
```

**3：**我有兴趣了解更多关于提供实现 AbstactSequentialList 的代理的信息。这就是所谓的动态代理吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T10:55:37.150

其中一些类型很容易映射到 Java 中简单直观的东西上：

1.  因为`off_t`你可以使用：

    ```
    %apply int { off_t }; 
    ```

    `off_t`告诉 SWIG像`int`在 Java中一样对待。除非您期望`off_t`比 int 大，否则这可能有效。对于一些常见的 typedef，SWIG 已经在库中提供了适当的映射，我有点惊讶 off_t 不是其中之一。

    （你也可以选择在你的接口文件中显示 SWIG 一个 typedef 而不是使用`%apply`）

2.  对于“简单”数组（即不是结构的事物的数组）执行：

    ```
    %include <arrays_java.i> 
    ```

    足以生成一个直观的 Java 接口，例如添加导致`int field_offsets[VRTTXT_FIELDS_MAX]`被包装为 `public void setField_offsets(int[] value)`和相应的 get。在为 setter 生成的代码中，有一个检查大小匹配的测试——如果不匹配，这将在运行时抛出异常，因为 Java 中没有编译时数组大小的概念。

3.  这个答案讨论了[从 Java](https://stackoverflow.com/questions/8320605/swig-configuration-to-handle-a-file-c-input-parameter-in-java/8325243#8325243)[包装`FILE*`](https://stackoverflow.com/questions/8320605/swig-configuration-to-handle-a-file-c-input-parameter-in-java/8325243#8325243)。在这种情况下，最简单的解决方案是使用类似的东西：

    ```
    %ignore text_file
    %include "header.h"
    %extend gaiaTextReader {
      void setTextFile(const char *fn) {
        $self->text_file = fopen(fn, "r");
      }
    } 
    ```

    它隐藏了自动设置/获取`text_file`，而是公开了一个接受字符串并调用的设置器`fopen`。

    显然，您可以选择链接答案中更复杂的实现，或者您可以改用`%inline`提供`SWIGTYPE_p_FILE`在 Java 中创建 a 的替代方法。

4.  关于结构数组，最简单的解决方案是再次使用`%ignore`，`%extend`例如`columns`：

    ```
    %ignore columns;    
    %include "header.h"

    %extend gaiaTextReader {
      struct vrttxt_column_header *getColumn(int i) {
        return $self->columns + i;
      }

      void setColumn(struct vrttxt_column_header *c, int i) {
        $self->columns[i] = *c;
      }
    } 
    ```

    这比编写类型映射更简单（这将涉及大量 JNI 调用以将`Object`数组复制到结构数组中）。

    一个更优雅的解决方案可能是用 Java 编写扩展的东西[`AbstractList`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/AbstractList.html)（使用[Java 代码类型映射](http://www.swig.org/Doc2.0/Java.html#Java_code_typemaps)，具体取决于你想怎么做），并通过你暴露的东西返回代理`%extend`

5.  `%extend`可以对成员采取相同的方法`toUtf8`：

    ```
    %ignore toUtf8;
    %include "header.h"

    %extend gaiaTextReader {
      void setToUtf8(const char *from) {
        $self->toUtf8 = iconv_open("tocode", from);
      }
    } 
    ```

    （我不确定我是否完全正确地使用了该字段，但无论如何该原则都适用）。

6.  您的链表已经可以从 Java 中“自然地”遍历，尽管再次提供实现[`AbstractSequentialList`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/AbstractSequentialList.html).

7.  因为`int`那真的是`enum`你仍然可以使用[适当的 Java 枚举](http://www.swig.org/Doc2.0/Java.html#Java_proper_enums_classes)来表示它：

    ```
    %include <enums.swg>
    %javaconst(1);

    enum Type;
    %typemap(jstype) int type "$typemap(jstype,enum Type)"
    %typemap(javain) int type "$typemap(javain,enum Type)"

    %include "header.h"

    enum Type { TEXT=VRTTXT_TEXT,
                INTEGER=VRTTXT_INTEGER,
                DOUBLE=VRTTXT_DOUBLE,
                NONE=VRTTXT_NULL }; 
    ```

    （这里的顺序很重要 - 伪造`enum`需要在 之后发生`%include`，但类型映射和前向声明需要在它之前发生）。

# list - 过滤元组列表中元素的Scala条件总和

> ID：14132619
> 
> 赞同：0
> 
> 时间：2013-01-03T03:26:34.240
> 
> 标签：list, scala, filter, sum

我是 Scala 的新手，需要一些关于如何组合过滤器和对元组列表求和的帮助。

我需要的是过滤后的元组列表的整数之和，它基本上是问题的答案：

所有设定权重的总和是多少？

以下示例列表的结果应为 20

该列表非常简单：

```
 val ln = List( ("durationWeight" , true, 10),
                    ("seasonWeight"   , true, 10),
                    ("regionWeight"   , false, 5),
                     ("otherWeight"   , false, 5) 
```

根据布尔标志过滤列表很简单：

```
 val filtered = ln.filter { case(name, check, value) => check == true  } 
```

它返回了我想要的元组。获得所有它们的总和似乎可以使用地图，然后是总和：

```
 val b = filtered.map{case((name, check, value) ) => value}.sum 
```

这返回了我想要的所有设定权重的总和。

但是，我如何一步结合过滤器、映射和求和来完成所有这些工作，最好是在一个优雅的单列中？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T03:34:27.883

```
ln.collect{ case (_, true, value) => value }.sum 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T03:48:15.940

另一种解决方法：

```
(0 /: ln)((sum,x) => if (x._2) sum + x._3 else sum) 
```

# ios - 游戏中的渲染循环

> ID：14132621
> 
> 赞同：0
> 
> 时间：2013-01-03T03:27:03.087
> 
> 标签：ios, sparrow-framework

我需要通过特定方式在我的应用程序中组织渲染循环（这是有原因的）。

假设我有

```
Sprite *sprite = [[Sprite alloc] initWithContentsOfFile:@"sprite.png"]; // some sprite

while (true) {
    [Graphics update];
    sprite.x = (sprite.x + 1) % 1024 // moving sprite by one pixel each frame
    [Input update];
    [self update];
} 
```

**Graphics.update**应该渲染一帧并延迟执行（不渲染）直到下一帧

```
@interface Graphics () {
    static BOOL _frozen;
    static int _count;
    static int _frameCount;
    static float _frameRate;
    static double _lastFrameTimestamp;
}

@end

@implementation Graphics

+ (void)initialize {
    _frozen = NO
    _count = 0
    _frameCount = 0
    _frameRate = 30.0
    _lastFrameTimestamp = CACurrentMediaTime()
}

+ (void)freeze {
    _frozen = YES;
}

+ (void)update {
    if _frozen
      return
    end

    Video.nextFrame // some OpenGL ES magic to render next frame

    _count++

    now = CACurrentMediaTime()
    waitTill = _lastFrameTimestamp + _count * (1.0 / _frameRate)

    if now <= waitTill
      sleep(waitTill - now)
    else
      _count = 0
      _lastFrameTimestamp = CACurrentMediaTime()
    end

    _frameCount++
}

@end 
```

它以某种方式工作并且精灵正在移动。但是当我回家时 applicationWillResignActive 没有被调用，当我回到应用程序时出现黑屏，一段时间后应用程序崩溃。

这是我尝试移植的内容：[https](https://bitbucket.org/lukas/openrgss/src/7d9228cc281207fe00a99f63b507198ea2596ead/src/graphics.c) ://bitbucket.org/lukas/openrgss/src/7d9228cc281207fe00a99f63b507198ea2596ead/src/graphics.c （**Graphics_update**函数）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T10:32:37.770

您可以尝试使用 Core Animation DisplayLink 而不是 while 循环。这就是它通常在图形框架中完成的方式。currentRunLoop 每 1/60 秒调用一次更新方法。

如果使用 NSRunLoop，您应该删除更新中的睡眠调用。

```
CADisplayLink *displayLink;

// Set your update method
displayLink = [CADisplayLink displayLinkWithTarget:[Graphics class] 
                                          selector:@selector(update)];
// Set fps to device refresh rate (60)
[displayLink setFrameInterval:1.0f];

// Add your display link to current run loop
[displayLink addToRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];

// Stop updating
[displayLink invalidate]; 
```

最后一行停止执行，所以在完成循环之前不要调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T17:27:09.517

如果你使用 Sparrow，你应该这样处理它：

```
SPSprite *sprite = [[SPSprite alloc] initWithContentsOfFile:@"sprite.png"]; // some sprite

[self addEventListener:@selector(enterFrame:) atObject:self forType:SP_EVENT_TYPE_ENTER_FRAME];

-(void)enterFrame:(SPEnterFrameEvent*)e {
    [Graphics update];
    sprite.x += 1; // moving sprite by one pixel each frame
    [Input update];
    [self update];
} 
```

Sparrow 使用 SP_ENTER_FRAME_EVENT 为您管理游戏循环。每次需要再次渲染时都会调用它。大约每秒 30 次（尽管可以配置）。

# java - 在 Java 中实现拖放接口

> ID：14132622
> 
> 赞同：3
> 
> 时间：2013-01-03T03:27:21.093
> 
> 标签：java, events, user-interface, architecture, drag-and-drop

我试图从头开始为可以使用某种 EventListener 拖放的对象创建某种接口。我不能直接使用任何 javax.swing 类，因为我不处理组件；但是，我通过扩展 EventObject 制作了自己的自定义 ActionEvent 类，所以做类似的事情对我来说是公平的。

这是针对游戏引擎的，更具体地说是针对游戏中的库存。拖动的项目是 Sprite，但我希望它足够通用，以允许拖动非常基本的类。项目持有人称为 ItemHolder 并包含一个 Sprite。

我只是想对此提出一些一般性建议；也许是一些例子的链接。这在 Java 中可能不会成为一个非常流行的话题，所以使用不同语言的东西也可以。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T04:01:51.967

如果您不在浏览器中执行此操作，则可以使用 Swing 用户界面执行此操作。

如果您正在使用 Web 浏览器开发 Java 应用服务器端，我的建议是使用 Yahoo 用户界面 (YUI) 框架或 jQuery 框架及其拖放功能。如果您希望它在所有浏览器中工作，那么您在自己开发某些东西时会遇到很多跨浏览器兼容性问题，如果已经有可用资源，那可能不值得您花时间。只是一个建议。

# c++ - 我可以在没有 IntelliSense 淹没的情况下使用 Boost 库吗？

> ID：14132628
> 
> 赞同：4
> 
> 时间：2013-01-03T03:28:11.733
> 
> 标签：c++, visual-c++, boost, visual-studio-2012, intellisense

我包含了用于 dynamic_bitset 的 Boost 库，现在我的 IntelliSense 充满了大量的 Boost 东西。有什么办法可以阻止这一切？我正在使用 VS2012

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T09:11:41.430

Intellisense 应该只列出当前命名空间中的函数。您很可能使用 using 指令。

# javascript - 在javascript中将onclick事件添加到新创建的表头，但是onclick函数被添加到页面上的所有内容中，而不仅仅是我想要的

> ID：14132634
> 
> 赞同：1
> 
> 时间：2013-01-03T03:28:53.133
> 
> 标签：javascript, html

我在 js 中生成一个表，并为一些标题使用如下函数：

```
function generateTableHeader(table) {
    var tr = document.createElement('tr');

    var th = document.createElement('th');

    th.onclick = function(){
        toggleHidden("hide_header_" + table_count);
    };

    th.appendChild(document.createTextNode(key));
    tr.appendChild(th);    

    table.appendChild(tr);
} 
```

我的切换隐藏功能只是隐藏了“hide_header_{some number}”类的所有元素。它工作正常。

问题是，我多次调用此 generateTableHeader 函数，为多个表创建标题 - 每次调用 table_count （全局变量）时都会递增，我希望此函数仅隐藏具有 onclick 事件时具有的数字的元素类被建造。相反，每当我单击任何标题时，它们总是隐藏最后创建的元素。

该函数被调用 4 次以在 4 个不同的表中创建 4 个表头 - 每个表都有一个具有正确类名的 td 列（即“hide_header_1”、“hide_header_2”等）。当我单击第一个标题时，第四个表格列被隐藏/显示。当我单击第二个、第三个或第四个时，仍然只有第四列被隐藏/显示。我希望每次单击都只隐藏该表中的 td。

就好像我正在创建的第 onclick 事件每次调用此函数时都会被覆盖，不知道为什么。有任何想法吗？

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T03:35:19.853

这是一个关闭问题，您在所有点击处理程序中使用相同的变量。相反，您可以在设置单击事件时使用具有全局变量值的局部变量。

```
function generateTableHeader(table) {
    var tr = document.createElement('tr');

    var th = document.createElement('th');

    var local_table_count = table_count;
    th.onclick = function(){
        toggleHidden("hide_header_" + local_table_count);
    };

    th.appendChild(document.createTextNode(key));
    tr.appendChild(th);    

    table.appendChild(tr);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T03:35:43.423

我认为答案可能在您自己的描述中。`table_count`是一个全局变量。每次增加它时，所有事件侦听器都在该行中使用的引用：

```
th.onclick = function(){
    toggleHidden("hide_header_" + table_count);
}; 
```

正在更新参考。

# cakephp - CakePHP 2.0：奇怪的身份验证登录问题

> ID：14132636
> 
> 赞同：2
> 
> 时间：2013-01-03T03:29:20.843
> 
> 标签：cakephp

当我尝试使用 CakePHP 2.0 学习和编程网站时，我遇到了一个奇怪的问题。我过去曾使用 1.3 版，但以前从未见过这个问题。我正在运行 Cookbook (p.638) 中的简单身份验证和授权应用程序教程，并且我已经检查并仔细检查以确保它是相同的。

我遇到的问题是，当我调用 /users/login 并使用虚假信息填写表格或将其留空时。Auth 将其登录，如果我这样做，`if($this->Auth->user())`我将收到 true。

我已经放弃试图理解为什么会发生这种情况。它很奇怪....

/用户/登录

```
public function login(){
        if($this->request->is('post')){
            if($this->Auth->login($this->request->data)){
                $this->redirect($this->Auth->redirect());
            }else{
                $this->Session->setFlash('Wrong login credentials!', 'default', array('class' => 'notification error closeable')); 
            }
        }
} 
```

// Appcontroller.php ---- 认证配置

```
class AppController extends Controller {

public $components = array(
    'Session',
    'Auth' => array(
        'authenticate' => array(
            'Form' => array(
                'fields' => array('username' => 'email')
            )
        ),
        'logoutRedirect' => array('controller' => 'pages', 'action' => 'home'),
        'authorize' => array('Controller')
    )
);

 public function isAuthorized($user){
    if(isset($user['role']) && $user['role'] === 'admin'){
        return true;
    }
    return false;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T03:54:04.840

好的。好像我知道问题出在哪里。尝试做：

```
if($this->Auth->login()) 
```

而不是传递它 CakeRequest 对象。

原因是：

在 2.0`$this->Auth->login($this->request->data)`中将使用发布的任何数据登录用户，而在 1.3`$this->Auth->login($this->data)`中将首先尝试识别用户并且仅在成功时登录。也许这就是为什么您无需任何数据即可登录的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T04:11:31.280

```
public $components = array(
    'Session',
    'Auth' => array(
        'authenticate' => array(
            'Form' => array(
                'fields' => array('username' => 'email')
            )
        ),
        'loginAction' => array('admin' => false, 'controller' => 'users', 'action' => 'login')
        'logoutRedirect' => array('controller' => 'pages', 'action' => 'home'),
        'authorize' => array('Controller')
    )
); 
```

还可以尝试`debug($user);`在 AppController 中开始你的 isAuthorized 方法，看看它是否没有从那里得到错误。

# android - opengles2 屏幕截图

> ID：14132639
> 
> 赞同：1
> 
> 时间：2013-01-03T03:30:00.270
> 
> 标签：android, opengl-es-2.0

我正在尝试捕获屏幕上呈现的内容的屏幕截图。我曾尝试使用 glreadpixels，但结果全为零。我很高兴知道是否还有其他方法可以捕获 glsurfaceview。非常感谢！

以下是我从另一个线程获得的代码片段：

```
public Bitmap savePixels(int x, int y, int w, int h){
        int b[]=new int[w*(y+h)];
        int bt[]=new int[w*h];
        IntBuffer ib=IntBuffer.wrap(b);
        ib.position(0);

        GLES20.glReadPixels(x, 0, w, y+h, GLES20.GL_RGBA, GLES20.GL_UNSIGNED_BYTE, ib);

        for(int i=0, k=0; i<h; i++, k++)
        {//remember, that OpenGL bitmap is incompatible with Android bitmap
        //and so, some correction need.        
                for(int j=0; j<w; j++)
                {
                        int pix=b[i*w+j];
                        int pb=(pix>>16)&0xff;
                        int pr=(pix<<16)&0x00ff0000;
                        int pix1=(pix&0xff00ff00) | pr | pb;
                        bt[(h-k-1)*w+j]=pix1;

                    int test = pix;
                    if (pix > 0)    
                        System.out.println(test%256 + " " + (test/256)%256 + " " + (test/256/256)%256 + " " + test/256/256/256);
                }
        }
        return Bitmap.createBitmap(bt, w, h, Bitmap.Config.ARGB_8888);
} 
```

# java - 如何与许多墙壁（迷宫）进行碰撞检测？

> ID：14132645
> 
> 赞同：1
> 
> 时间：2013-01-03T03:30:33.417
> 
> 标签：java, collision-detection, maze

在我的游戏中，玩家在迷宫中导航。我不知道如何对墙壁进行正确的碰撞检测。停留在某个区域很容易进行碰撞检测：

```
if (x > rightWallX - playerWidth) x = rightWallX - playerWidth;
if (x < leftWallX) x = leftWallX;
//... 
```

但是我将如何对许多墙壁进行碰撞检测？

我可以在不进行校正的情况下进行简单的碰撞检测（如`if (intersecting) return true;`），但我无法正确校正。如果我只是存储旧的`x`并`y`重置它们，那么

1.  该物体从未真正接触过墙壁
2.  如果物体可以上升但向右阻挡，它不会上升，它不会移动。

迷宫中的碰撞检测是如何完成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T04:00:49.423

最简单的方法，一旦你解决了碰撞*检测*，*修复*碰撞就是将actor移动到最接近actor所在位置的有效位置，如果它不是与它碰撞的对象。这假设没有惯性，但对于类似迷宫的游戏或自上而下的地图爬行游戏来说已经足够了。

如果您想进一步简化计算，您可以限制自己检测是否更改演员`x`或`y`坐标会更好。如果你的actor有一个轴对齐的矩形hit-box并且所有的障碍物也是轴对齐的矩形（最简单的情况），这个假设确实是正确的。然而，在其他一些情况下，结果可能并不令人满意（潜在的神器：滑行对角墙的速度提升——在大多数迷宫游戏中并非如此）。

请记住，多个碰撞可能同时发生（推向两堵墙）。如果演员可以相交的两堵墙之间没有锐角（例如，如果您的所有障碍物都轴对齐并且间隔足够大），则依次修复每个碰撞就足够了 - 只是不要在第一次碰撞后停止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-03T08:48:49.290

您可以使用 Rectangle.intersects() 方法：

```
 public Rectangle Player(){
         return new Rectangle(PlayerX,PlayerY,PlayerWidth,PlayerHeight);
         //we do this for getting players x and y values every tick
    }

    if(Player().intersects(new Rectangle(0,0,100,50)))//if(player touching wall) 
```

new Rectangle(0,0,100,50) 只是一个你可以改变它的例子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T04:28:06.060

好的，所以我目前正在制作 2D 自上而下的视图游戏，但我不确定您是如何创建迷宫的。但是，在我的游戏中，我的关卡是从 Tile[][] tiles = new Tile[levelWidth][levelHeight]; 创建的。大批。我处理碰撞检测的方法是检查周围的瓷砖，看看它们是否坚固。

这是我的 getTile 方法。

```
public Tile[][] getTile(int x, int y) {
    if (x < 0 || x >= getWidth() || y < 0 || y >= getHeight()) {
    return new VoidTile();
} else {
    return tiles[x][y];
}
} 
```

在我的 Tile.java 类中，我有一个 isSolid() 方法，它返回瓷砖是否是实心的。我所有的图块都扩展了我的 Tile.java，所以它们继承了这个方法，我在它们的构造函数中重写了它。正如我之前所说，我不确定您是否使用与我相同的关卡实现方式。但是，这样做是一种很好的做法:)

就个人而言，我不太喜欢使用 .intersects() 和 .contains() 方法进行 Sprite 碰撞检测。我主要将它们用于按钮等。

好的，在我的 player.java 类中，我有一个 checkBlockedDirection(int x, int y) 方法，它看起来像这样。

```
 public void checkBlockedDirection(int x, int y) {
    boolean u = map.getTile(x, y - 1).isSolid();
    boolean d = map.getTile(x, y + 1).isSolid();
    boolean l = map.getTile(x - 1, y).isSolid();
    boolean r = map.getTile(x + 1, y).isSolid();

    if (u) {
        uBlocked = true;
        System.out.println("up tile blocked");
    } else {
        uBlocked = false;
    }
    if (d) {
        dBlocked = true;
        System.out.println("down tile blocked");
    } else {
        dBlocked = false;
    }
    if (l) {
        lBlocked = true;
        System.out.println("left tile blocked");
    } else {
        lBlocked = false;
    }
    if (r) {
        rBlocked = true;
        System.out.println("right tile blocked");
    } else {
        rBlocked = false;
    }
} 
```

然后在我的播放器更新方法中我有这个

```
public void tick() {
    float dx = 0;
    float dy = 0;

    if (input.up.isPressed()) {
        direction = 0;
    } else if (input.down.isPressed()) {
        direction = 2;
    } else if (input.left.isPressed()) {
        direction = 3;
    } else if (input.right.isPressed()) {
        direction = 1;
    } else {
        direction = 4; // standing
    }

    checkBlockedDirection((int)x, (int)y);

    if (input.up.isPressed() && y > 0 && !uBlocked) {
            dy += -speed;
    } else if (input.down.isPressed() && y < map.getHeight() - 1 && !dBlocked) {
            dy += speed;
    } else if (input.left.isPressed() && x > 0 && !lBlocked) {
            dx += -speed;
    } else if (input.right.isPressed() && x < map.getWidth() - 1 && !rBlocked) {
            dx += speed;
    }
    x += dx;
    y += dy;

} 
```

基本上它只是检查上、下、左或右的块是否是实心的。如果它们是实心的，那么它不会移动，如果它们不是实心的，那么您可以朝所需的方向移动。

不确定这是否有帮助，但这只是我对这种网格碰撞检测的看法:)

希望这可以帮助 ：）

享受

# c# - 通过使用 firebug 删除“禁用”属性在 C# 中启用按钮

> ID：14132647
> 
> 赞同：1
> 
> 时间：2013-01-03T03:30:55.610
> 
> 标签：c#, asp.net

我有一个关于禁用按钮 (C#) 的问题，需要您的帮助。

在 Asp.net (C#) 中，禁用按钮代码：

```
 Button btn = new Button();
    btn.click += new EventHandler(btn_click);
    btn.Enabled = false;
    btn.UseSubmitBehavior = false; 
```

生成的 HTML： **<input type="button" disabled="disabled">**

该按钮被禁用，直到我使用**firebug**并**删除“禁用”属性**并将**类型属性更改为提交**（**<input type="submit">**）然后用户可以单击 btn 并且它可以执行**btn_click**方法（回发）。

我们怎样才能防止这个问题？我尝试使用 CommandName (disable, enable) 来标记禁用按钮，在 btn_click 方法中，我检查**CommandName== "disable"**然后停止该功能，但它非常混乱。

谢谢你的帮助。
范

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T03:49:56.087

客户端可以移除 Disabled 属性但不能更改控件 ViewState。在服务器端，您可以这样做：

```
protected void btn_Click(object sender, EventArgs e)
{
     if (btn.Enabled)
     {
           // do something         
     }
}

<asp:Button ID="btn" runat="server" Enabled="false" OnClick="btn_Click" Text="Test" /> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T03:39:57.427

您无法控制用户的行为。您需要做的是在服务器端处理这些事情。

你可以在btn_click中判断按钮的状态..然后做一些工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T03:50:45.717

@旁观者是对的。您需要在服务器上检查该条件是否正确。你不能指望客户是 100% 万无一失的，这就是原因。

您可以隐藏控件，并在将来的回发中重新启用它吗？隐藏实际上根本不会将控件呈现给客户端。

# php - 在 CButtonColumn 中添加 ID 属性不起作用

> ID：14132650
> 
> 赞同：0
> 
> 时间：2013-01-03T03:31:10.313
> 
> 标签：php, yii, cgridview, cbuttoncolumn

```
<?php 
        $this->widget('zii.widgets.grid.CGridView', array(
            'id'=>'material-logs-grid',
            'dataProvider'=>$materialLogSearch->search(),
            'filter'=>$materialLogSearch,
            'ajaxUpdate'=> true,
            'columns'=>array(
                'po_number',
                'qty_ordered',
                array(
                    'name'=>'price',
                    'value'=>'number_format($data->price,2)',
                    'type'=>'raw'
                ),
                array(
                    'name'=>'price',
                    'header'=>'Amount',
                    'value'=>'number_format($data->price*$data->qty_ordered,2)',
                    'type'=>'raw'
                ),
                'date_ordered',
                'note',
                array(
                    'class'=>'CButtonColumn',
                    'template'=>'{update}{delete}',
                    'buttons'=>array(
                        'update'=>array(
                            'options'=>array(
                                'id'=>"myID-$data->idMaterial_logs",
                            ),
                        ),
                    ),
                    'updateButtonUrl'=>"Yii::app()->createUrl(\"materialLogs/update\",array(\"id\"=>\$data->idMaterial_logs,\"pid\"=>\"$project_details->idProject\",\"mid\"=>\$data->idMaterials))",
                    'deleteButtonUrl'=>'Yii::app()->createUrl("/materialLogs/delete",array("id"=>$data->idMaterial_logs))',
                ),
            ),
        ));
        ?> 
```

我收到此错误

```
Undefined variable: data 
```

错误发生在这一行：

```
'id'=>"myID-$data->idMaterial_logs", 
```

在 CButtonColumn 上添加 ID 属性的正确方法是什么？我只是希望更新按钮有一个自定义 ID，其对应的 ID 来自我的数据库（`$data->idMaterials`）；

例如：id 应该是“myID-1”，其中 1 是 idMaterial_logs 的值，这就是我使用 $data->idMaterial_logs 的原因，在这种情况下它不起作用。

您的帮助将不胜感激和奖励！谢谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T12:41:25.240

问题是您使用双引号 (") 而不是单引号 (') 因此，文件将在视图中查找 $data。它不存在那里。

尝试这个

```
<?php
'id' => '"myID-".$data->idMaterial_logs', 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T07:38:25.863

尝试删除 myID

```
'id'=>"myID-$data->idMaterial_logs", 
```

成为

```
'id'=>'$data->idMaterial_logs', 
```

# javascript - 如果没有选择单选按钮，则显示 alert()

> ID：14132651
> 
> 赞同：0
> 
> 时间：2013-01-03T03:31:20.783
> 
> 标签：javascript, radio-button

单击“删除”按钮后，如果未选择任何单选按钮，如何显示警报。我的html表单

```
<form name="Action" method="post" action="RequestAction">
                    <table width="800px" cellpadding="5" style="color:black; border-top:1px solid #ccc;" border="0">
                    </table>
                    <div id="container">
                    <div id="demo_jui">
                    <table id="requestList" class="display" cellpadding="0" cellspacing="0" border="0" style="font-size:12px;" >
                    <thead id="headed">
                        <tr>
                            <th  align="center" title="Employee">Employee</th>
                            <th  align="center" title="Number of Days">Number of Days</th>
                            <th  align="center" title="Start Date">Start Date</th>
                            <th  align="center" title="End Date">End Date</th>
                            <th  align="center" title="Leave Type">Leave Type</th>
                            <th  align="center" title="Remark">Remark</th>
                            <th  align="center">Approve</th>
                            <th  align="center">Reject</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                    </table>
                    </div>
                    </div>
                        <table>                 
                        <tr>
                            <td style="padding-left:0px;" colspan="3">
                                <a href="#"><img src="images/Submit.png" style="border:none;" onClick="javascript:Go()"
                                onmouseover="this.src='images/Submit_Hover.png'" onmouseout="this.src='images/Submit.png'"/></a>
                                &nbsp;&nbsp;&nbsp;
                                <a href="#"><img src="images/Reset.png" style="border:none;" onClick="javascript:clearForm()"
                                onmouseover="this.src='images/Reset_Hover.png'" onmouseout="this.src='images/Reset.png'"/></a>
                            </td>
                        </tr>
                    </table>
                </form> 
```

单选按钮值将在表中检索。当我测试它时，如果单击提交按钮而不选择任何单选按钮，我会得到错误

在函数 Go() 中，验证单选按钮的方式是否正确？谢谢

```
function Go() {
                if( $('form[name=Action] input[name=statusList]:checked').length == 0)
                {
                    $('form[name=Action]').submit();
                }
                else
                {
                    alert("Please select at least one to delete");
                }
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T03:47:44.960

也许检查“已检查”状态不起作用？

```
//read value of radio button
alert($("input[name='radio-button-group']:checked").val());

//get bool, if radio button is checked
alert(typeof $("input[name='radio-button-group']:checked").val() != 'undefined'); 
```

资料来源（德语）： http: [//mabraham.de/jquery-radio-buttons-auslesen-und-manipulieren/](http://mabraham.de/jquery-radio-buttons-auslesen-und-manipulieren/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T06:39:50.063

使用下面的代码片段

```
var IsChecked = $('take id or classname of radiogroup').is(':checked');

if(!IsChecked)
{
alert("select some thing");
} 
```

# jquery-mobile - 链接到下拉 UL 时，jQuery Mobile 后退按钮不显示

> ID：14132660
> 
> 赞同：0
> 
> 时间：2013-01-03T03:33:02.593
> 
> 标签：jquery-mobile

所以我有一个工作得很好的页面，我实际上是在以编程方式创建链接，任何链接到带有工作后退按钮的页面都很好 - 我可以看到后退按钮没问题，但是我有一个下拉菜单那只是 UL 的链接，我从那里链接到的两个页面没有显示后退按钮。

这是工作页面的顶部。

```
<div data-role="page" id="detailsPage" data-add-back-btn="true">
 <div data-role="header">
  <h1 id="title"></h1>
 </div> 
```

这里有一个不起作用。

```
<div data-role="page" id="calendarPage" data-add-back-btn="true">
  <div data-role="header">
   <h1 id="title">Calendar</h1>
  </div> 
```

这是具有指向不显示后退按钮的日历页面的链接的 UL。

```
<div class="ui-block-b">
 <ul data-role="menu" id="optionsDropDown">
  <li>
   <span data-role="button" data-icon="arrow-d" data-iconpos="right" data-iconpos="left">Calendar</span>
    <ul data-role="listview" data-inset="true">
     <li data-icon="false">
         <a href="#" id="thursdayFilter">Thursday</a>
      </li>
      <li data-icon="false">
         <a href="#" id="fridayFilter">Friday</a>
      </li>
      <li data-icon="false">
          <a href="#" id="listAllSessions">List All Sessions</a>
      </li>
      <li data-icon="calendar">
          <a href="#calendarPage" >Calendar</a>
      </li>
      <li data-icon="gear">
          <a href="#settingsPage" >Settings</a>
      </li>
    </ul>
  </li>
</ul>
</div> 
```

detailsPage 上的后退按钮始终有效，calendarPage 上的后退按钮永远不会出现。我已经控制了该网站，但是当人们弄乱我没有触及的 changeHash 时，他们似乎遇到了问题。

我可以在 JS 中搞砸什么吗？我看不到任何明显的东西，我可以发布我的整个 JS 文件，但我什至不从那里触摸这些页面或弄乱链接或任何东西。我想可能是因为该列表上的显示设置为无，我刚刚在上面向您展示了它不起作用，但后来我尝试更改它 - 如果您最初能看到它，它没有任何区别。我在控制台中没有任何错误。我现在很难过。我希望有人能帮帮忙。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T04:41:32.647

不确定这是否是可能的原因，但根据文档，`data-role="button"`仅在`<a>`,`<button>`和`<input>`type 元素上有效。我没有看到`<span>`那里列出并想知道这是否会影响您的导航？

也没有`data-role="menu"`列出有效的属性。

您使用的是什么版本的 jQuery Mobile？您是否依赖任何第三方小部件？

# java - Java 正则表达式性能问题

> ID：14132664
> 
> 赞同：6
> 
> 时间：2013-01-03T03:33:27.530
> 
> 标签：java, regex

我正在尝试用 Java 制作一个函数绘图程序，它涉及获取用户对将要绘制的函数的输入、解析它并绘制它。例如，用户可能输入 x^2 - y^2、cos(x + y)、log(x) - sqrt(y) 等。该程序同时使用中缀二进制操作（+、- 等.) 和一元运算（cos、sqrt 等）。

简而言之，为了评估一元运算，我必须确保给定的表达式遵循单个一元运算的格式。例如，cos(x)、sqrt(x + y) 和 log(exp(y) - x) 都适合这种格式，因为它们是一元运算，其操作数为某个表达式；但是，诸如 sin(x)*cos(y) 和 1 + log(x) 之类的字符串不遵循这种格式。为了检查，我为这种格式做了一个正则表达式：

```
String unaryName = "((productlog)|(zeta)|(log)|(sqrt)|(cos)|(sin)|(tan)|(sec)|(csc)|(csc)|(abs)|(arccos)|(arcsin)|(arctan)|(arcsec)|(arccsc)|(arccot)|(gamma)|(exp))"; 
```

（这只是一个正则表达式，用于检查给定字符串是否是预定义一元操作的名称）

```
String unaryOperation = unaryName + "\\(([^\\(\\)]*(\\(.*\\))*[^\\(\\)]*)+\\)" 
```

我来解释一下。此正则表达式正在寻找一元操作之一的名称。之后，它会寻找一个左括号。之后，它会查找一些不是括号的字符序列，然后是一些以左括号开始并以右括号结束的序列。后者防止诸如“sin(x) + cos(y)”之类的字符串匹配。

据我所知，这个正则表达式总是给出想要的结果。然而，在其使用中，出现了一个问题。考虑这种情况：

```
String s = "cos(3) + sin(4)";
System.out.println(s.matches(unaryOperation)); 
```

显然，如果正则表达式有效，这应该返回 false，它确实如此。这个例子也是如此：

```
String s = "cos(3.000) + sin(4)";
System.out.println(s.matches(unaryOperation)); 
```

从模式上看，没有什么真正改变。然而，连续将零添加到 3，匹配似乎需要指数级更长的时间来评估。对我来说，12 个零大约需要 13 秒。由于我的程序将在图表上绘制许多点，因此每次绘制图形时都必须计算数千个表达式，所以这是一个致命的缺陷。

我已经找到了一种不必使用这个正则表达式的方法，并且我的程序运行得很好，但我仍然想知道：为什么这个正则表达式需要这么长时间才能处理大量输入，有什么方法可以改变正则表达式来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T04:14:46.110

你可以使用这个正则表达式

```
unaryName+"\\([^)]*(\\([^()]*\\))?[^(]*\\)"
                    ------------
                         |->starting from center. 
```

在这里，我正在检查圆括号是否正确**平衡**..那应该可以解决您的问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T03:42:31.827

我怀疑问题在于您的表达式由于位于模式的中间而进行了*很多*回溯。`.*`尝试用不情愿的量词替换它：`.*?`或者，更好的是（如果我理解逻辑），用`[^\\)]*`.

实际上，这不是诀窍吗：

```
String unaryOperation = unaryName + "\\([^\\)]*\\)"; 
```

这会查找名称、左括号、任意数量的非右括号字符，然后是右括号。这假设您不想匹配类似的东西

```
"cos(3 * (4 + x))" 
```

（您的模式也不匹配）。

# iphone - Cocos2d 更新方法效率

> ID：14132666
> 
> 赞同：2
> 
> 时间：2013-01-03T03:33:30.710
> 
> 标签：iphone, objective-c, cocos2d-iphone

在一个相当小的游戏中，我在大型计划更新方法中更新了所有内容（精灵、速度、背景等）。我想知道只有一个大型计划更新或几个只更新几个精灵之间是否存在性能差异？

我还想知道以下之间是否存在性能差异：

```
 sprite.position = ccpAdd(sprite.postion, (delta*10, delta*5)); 
```

和

```
 sprite.position = ccp(sprite.position.x + delta*10, sprite.position.y + delta*5); 
```

通过 ccp 与 CGPointMake 分配职位之间是否存在性能差异？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T11:54:02.650

无所谓。

如果你真的，真的想知道，[测量它](http://www.learn-cocos2d.com/2011/11/depth-ios-cocos2d-performance-analysis-test-project/)。

这些都是细枝末节。这就像问你的车打蜡后是否跑得更快。可能会，也可能不会。在 99.99999% 中，这根本不重要，因为差异可以忽略不计，并且其他影响因素的权重更大（汽车：交通和道路状况/游戏：在屏幕上绘制东西）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T06:10:59.953

`ccpAdd`被解析`ccp`为然后被解析为，`CGPointMake`因此它们在您的编译代码中是相同的。它们都是`#define`在预处理器中完成的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T11:54:37.510

实际上，`ccpAdd`&`ccp`在您的编译代码中是相同的。

至于您的性能问题，如果您有很多精灵要更新，您可能希望生成一个后台线程来在那里进行部分更新。 [performSelectorInBackground:withObject:](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/Reference/Reference.html)并且不要忘记将代码添加到[自动释放池中](https://stackoverflow.com/a/8631611/1270586)

# google-drive-api - Google Drive SDK API：如何将文件从根目录移动到文件夹？

> ID：14132667
> 
> 赞同：4
> 
> 时间：2013-01-03T03:33:45.517
> 
> 标签：google-drive-api

如何使用 Google Drive SDK API 将文件从根目录移动到文件夹？

我试过这个，但它从来没有工作！

1）将文件ID插入文件夹。
**方法：** [https ://developers.google.com/drive/v2/reference/children/insert](https://developers.google.com/drive/v2/reference/children/insert)
**结果：**文件可以插入到文件夹中，但文件也显示在根目录中。

2）从父级删除文件ID。
**方法：** [https ://developers.google.com/drive/v2/reference/parents/delete](https://developers.google.com/drive/v2/reference/parents/delete)
**结果：**奇怪的结果。它应该删除父文件，但这删除了文件夹中的子文件。

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T02:17:08.297

更简单的方法是使用 patch 将 parents 字段更新为新文件夹的 id。

[https://developers.google.com/drive/v2/reference/files/patch](https://developers.google.com/drive/v2/reference/files/patch)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-15T10:56:50.440

[这是使用Patch](https://developers.google.com/drive/v2/reference/files/patch)和[PHP 客户端库](https://developers.google.com/drive/downloads)将文件移动到新文件夹的一步方法：

```
/**
 * Move a file.
 *
 * @param Google_Service_Drive_DriveFile $service Drive API service instance.
 * @param string $fileId ID of the file to move.
 * @param string $newParentId Id of the folder to move to.
 * @return Google_Service_Drive_DriveFile The updated file. NULL is returned if an API error occurred.
 */
function moveFile($service, $fileId, $newParentId) {
  try {
    $file = new Google_Service_Drive_DriveFile();

    $parent = new Google_Service_Drive_ParentReference();
    $parent->setId($newParentId);

    $file->setParents(array($parent));

    $updatedFile = $service->files->patch($fileId, $file);

    return $updatedFile;
  } catch (Exception $e) {
    print "An error occurred: " . $e->getMessage();
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-13T13:41:33.893

我认为正确的方法是“文件：补丁”（[https://developers.google.com/drive/v2/reference/files/patch](https://developers.google.com/drive/v2/reference/files/patch)）。
您可以通过设置可选参数 addParents、removeParents 来移动文件。

如果我将“0B2H_JyuGzV0AQmpOTjdTNDZXM00”从“0B2H_JyuGzV0AZHFUUzE4cXh3aXM”移动到根文件夹，请执行此操作。

```
Request URL:https://content.googleapis.com/drive/v2/files/0B2H_JyuGzV0AQmpOTjdTNDZXM00?removeParents=0B2H_JyuGzV0AZHFUUzE4cXh3aXM&addParents=root&key=AIzaSyCFj15TpkchL4OUhLD1Q2zgxQnMb7v3XaM&alt=json
Request Method:PATCH 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T05:29:32.347

我找到了解决方法

1) 将原始文件复制到目标文件夹。
**方法：** [https ://developers.google.com/drive/v2/reference/files/copy](https://developers.google.com/drive/v2/reference/files/copy)

2) 删除原始文件。
**方法：** [https ://developers.google.com/drive/v2/reference/files/delete](https://developers.google.com/drive/v2/reference/files/delete)

# google-chrome - 是否可以让您的相机在谷歌浏览器中自动开启？

> ID：14132673
> 
> 赞同：0
> 
> 时间：2013-01-03T03:34:31.440
> 
> 标签：google-chrome, html5-canvas, ip-camera

我正在使用 HTML5 画布，用于面部检测程序。每次我打开页面时，Chrome 都会询问我是否要允许访问我的摄像头。我想允许它并让 Chrome 记住，这样我就不必继续确认提示了。我已经看过[这个链接](http://support.google.com/chrome/bin/answer.py?hl=en&answer=2693767)，但它对我不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T04:05:48.000

是的，当 Chrome 要求您允许网络应用使用摄像头和麦克风时。用户必须单击选项下拉菜单并选择“始终允许此站点使用此麦克风和此摄像头”，而不是单击“允许”或“拒绝”按钮。

# mysql - 如何在 mysql 5.5 中设置多个转义字母

> ID：14132674
> 
> 赞同：0
> 
> 时间：2013-01-03T03:35:06.370
> 
> 标签：mysql

如何在 MySQL 5.5 中设置多个转义字母。当我在 MySQL 5.0.22 中设置多个字母 ('\",\r,\015\n,\n,\b') 时没问题，但在 MySQL 5.5.28 中给出错误代码' **ERROR 1083 (42000) ：字段分隔符参数不是预期的；检查手册**'我的查询如下，

```
select ID,MSISDN,IFNULL(TITLE,''),IFNULL(SECONDARY_TITLE,''),IFNULL (NAME,''),IFNULL(ACTIVATION_DATE,''),IFNULL(CREDIT_EXPIRY_DATE,''),
IFNULL(FIRST_VOICE_CALL_DATE,''),IFNULL(FIRST_SMS_DATE,''),IFNULL(FIRST_MMS_DATE,''),
IFNULL(FIRST_WAP_DATE,''),IFNULL(FIRST_TOPUP_DATE,''),IFNULL(TOTAL_USAGE,''),
IFNULL(TOTAL_TOPUP_AMOUNT,''),IFNULL(TOTAL_TOPUP_COUNT,''),IFNULL(LAST_TOPUP_DATE,''),
IFNULL(ACCOUNT_BALANCE,''),IFNULL(TARIFF_PLAN,''),IFNULL(DATE_OF_BIRTH,''),IFNULL(ADDRESS,''),
IFNULL(COUNTRY,''),IFNULL(CITY,''),IFNULL(POSTCODE,''),IFNULL(IC_NUMBER,''),
GENDER,IFNULL(FIXED_LINE_PHONE,''),IFNULL(EMAIL,''),IFNULL(PROFESSION,''),
IFNULL(EMPLOYER_NAME,''),IFNULL(EMPLOYER_ADDRESS,''),IFNULL(EMPLOYER_PHONE_NUMBER,''),
IFNULL(EMPLOYER_FAX_NUMBER,''),IFNULL(SIM_STATE,''),
IFNULL(ADDITIONAL_INFORMATION,'')  INTO OUTFILE '/tmp/SUBSCRIBER_PROFILE.txt'  
FIELDS ESCAPED BY '\",\\r,\\015\n,\\n,\\b' TERMINATED BY '|' 
OPTIONALLY ENCLOSED BY '\"' LINES TERMINATED BY '\n'  FROM  SUBSCRIBER_PROFILE; 
```

但是当我在“escape by”选项中只设置一个字母时，它可以工作

请帮我解决这个问题。谢谢，达努什卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T03:57:39.420

在您的情况下，转义字符应该只是“\”，因为您正在使用 \ 来转义字符。它不是要求您要转义的序列列表，只是让它知道它正在被转义的字符，在这种情况下是 \。

～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 使用 MySQL 5.0.21

```
mysql> select ID,MSISDN,IFNULL(TITLE,''),IFNULL(SECONDARY_TITLE,''),IFNULL(NAME,''),IFNULL(ACTIVATION_DATE,''),IFNULL(CREDIT_EXPIRY_DATE,''), 
    -> IFNULL(FIRST_VOICE_CALL_DATE,'') ,IFNULL(FIRST_SMS_DATE,''),IFNULL(FIRST_MMS_DATE,''),IFNULL(FIRST_WAP_DATE,''),
    -> IFNULL(FIRST_TOPUP_DATE,''),IFNULL(TOTAL_USAGE,''),IFNULL(TOTAL_TOPUP_AMOUNT,''),IFNULL(TOTAL_TOPUP_COUNT,''),
    -> IFNULL(LAST_TOPUP_DATE,''),IFNULL(ACCOUNT_BALANCE,''),IFNULL(TARIFF_PLAN,''), IFNULL(DATE_OF_BIRTH,''),IFNULL(ADDRESS,''),
    -> IFNULL(COUNTRY,''),IFNULL(CITY,''),IFNULL(POSTCODE,''),IFNULL(IC_NUMBER,''), GENDER,IFNULL(FIXED_LINE_PHONE,''),IFNULL(EMAIL,''),
    -> IFNULL(PROFESSION,''),IFNULL(EMPLOYER_NAME,''),IFNULL(EMPLOYER_ADDRESS,''), IFNULL(EMPLOYER_PHONE_NUMBER,''),
    -> IFNULL(EMPLOYER_FAX_NUMBER,''),IFNULL(SIM_STATE,''),IFNULL(ADDITIONAL_INFORMATION,'')  INTO OUTFILE '/tmp/SUBSCRIBER_PROFILE.txt' 
    ->  ***FIELDS ESCAPED BY '\",\\r,\\015\n,\\n,\\b'*** TERMINATED BY '|' OPTIONALLY ENCLOSED BY '\"' LINES TERMINATED BY '\n'  FROM  SUBSCRIBER_PROFILE;         
*Query OK, 345812 rows affected (7.77 sec*) 
```

～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 不适用于 MySQL 5.5.28

```
mysql> select ID,MSISDN,IFNULL(TITLE,''),IFNULL(SECONDARY_TITLE,''),IFNULL(NAME,''),IFNULL(ACTIVATION_DATE,''),IFNULL(CREDIT_EXPIRY_DATE,''), 
    -> IFNULL(FIRST_VOICE_CALL_DATE,'') ,IFNULL(FIRST_SMS_DATE,''),IFNULL(FIRST_MMS_DATE,''),IFNULL(FIRST_WAP_DATE,''),
    -> IFNULL(FIRST_TOPUP_DATE,''),IFNULL(TOTAL_USAGE,''),IFNULL(TOTAL_TOPUP_AMOUNT,''),IFNULL(TOTAL_TOPUP_COUNT,''),
    -> IFNULL(LAST_TOPUP_DATE,''),IFNULL(ACCOUNT_BALANCE,''),IFNULL(TARIFF_PLAN,''),IFNULL(DATE_OF_BIRTH,''),IFNULL(ADDRESS,''),
    -> IFNULL(COUNTRY,''),IFNULL(CITY,''),IFNULL(POSTCODE,''),IFNULL(IC_NUMBER,''),GENDER,IFNULL(FIXED_LINE_PHONE,''),IFNULL(EMAIL,''),
    -> IFNULL(PROFESSION,''),IFNULL(EMPLOYER_NAME,''),IFNULL(EMPLOYER_ADDRESS,''),IFNULL(EMPLOYER_PHONE_NUMBER,''),
    -> IFNULL(EMPLOYER_FAX_NUMBER,''),IFNULL(SIM_STATE,''),IFNULL(ADDITIONAL_INFORMATION,'')  INTO OUTFILE '/tmp/SUBSCRIBER_PROFILE.txt' 
    ->  **FIELDS ESCAPED BY '\",\\r,\\015\n,\\n,\\b'** TERMINATED BY '|' OPTIONALLY ENCLOSED BY '\"' LINES TERMINATED BY '\n'  FROM  SUBSCRIBER_PROFILE;
*ERROR 1083 (42000): Field separator argument is not what is expected; check the manual* 
```

# javascript - 滑动切换？不确定名字

> ID：14132680
> 
> 赞同：-4
> 
> 时间：2013-01-03T03:36:04.513
> 
> 标签：javascript, jquery, slidetoggle

由于问题格式不正确而被删除

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T03:42:22.340

你不需要插件：

HTML：

```
<div><a id="close" href="javascript:void(0);">close</a></div>
<div id="content">content</div> 
```

JavaScript

```
$(function() {

   $('#close').click(function() { $('#content').slideUp(1000); });

}); 
```

工作示例：http: [//jsfiddle.net/KusAk/](http://jsfiddle.net/KusAk/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T03:44:02.133

是的，你是对的，它是`slideToggle`。例子：

HTML：

```
<html>
<head> ... </head>
  <body>
      <div id="flip">Click to slide the panel down or up</div>
      <div id="panel">Hello world!</div>   
   </body>
</html> 
```

jQuery：

```
 $(document).ready(function(){
      $("#flip").click(function(){
        $("#panel").slideToggle("slow");
      });
 }); 
```

CSS：

```
#panel,#flip {
   padding:5px;
   text-align:center;
   background-color:#e5eecc;
   border:solid 1px #c3c3c3;
}
#panel {
   padding:50px;
   display:none;
} 
```

参考： [http ://api.jquery.com/slideToggle/](http://api.jquery.com/slideToggle/)

# matlab - 使用 worksheet.saveas 保存 Excel 文件时出错

> ID：14132691
> 
> 赞同：1
> 
> 时间：2013-01-03T03:37:28.820
> 
> 标签：matlab, excel, vba

我有一个 Excel 模板文件。基于Excel版本，我想通过Matlab另存为Temp.xlsm。

这是我用来保存模板文件的代码：

```
if(XLversion >= 12.0)
    Workbook = invoke(Excel.Workbooks,'Open',tempxls);
    tempxls1 = [pwd '\utils\temp.xlsm'];
    Workbook.SaveAs(tempxls1,1);
    tempxls = tempxls1;
    extn = 'xlsm';
end 
```

代码工作正常。但是，当我尝试打开文件时，出现以下错误：

![在此处输入图像描述](../Images/b7cea0d6384e39247ac3d1fb95d6878c.png)

但是，当通过 SaveAs 菜单将 temp.xls 保存到 temp.xlsm 时，它会打开而没有任何错误。

任何想法可能是代码中的错误或如果我遗漏了什么。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T04:02:14.350

您可以尝试以下代码并发表评论。您可以调用它`sub-routine`来保存文件。

```
Private Sub Workbook_BeforeSave(ByVal SaveAsUI As Boolean, Cancel As Boolean)
Dim FileNameVal As String
If SaveAsUI Then
    FileNameVal = Application.GetSaveAsFilename(, "Excel Macro-Enabled Workbook (*.xlsm), *.xlsm")
    Cancel = True
    If FileNameVal = "False" Then 'User pressed cancel
        Exit Sub
    End If
    Application.EnableEvents = False
        If Right(ThisWorkbook.Name, 5) <> ".xlsm" Then
            ThisWorkbook.SaveAs Filename:=FileNameVal & ".xlsm", FileFormat:=xlOpenXMLWorkbookMacroEnabled
        Else
            ThisWorkbook.SaveAs Filename:=FileNameVal, FileFormat:=xlOpenXMLWorkbookMacroEnabled
        End If
    Application.EnableEvents = True
End If
End Sub 
```

[参考：](https://stackoverflow.com/questions/12111491/force-save-as-xlsm-while-maintaining-file-structure)

# php - 在 PHP 中从 AWS S3 中的文件创建 zip 的最佳方法？

> ID：14132696
> 
> 赞同：3
> 
> 时间：2013-01-03T03:38:45.397
> 
> 标签：php, amazon-s3, zip

我出售在 S3 中托管的歌曲。人们选择它们并可以下载，但如果他们购买整张 CD，则可以将其下载为 zip 文件。问题是我必须即时创建 zip 文件，这非常慢。我正在使用 Zip 库，从带有文件获取内容的字符串中添加文件，然后（可能需要一些时间），用户客户端会为下载添加星标，这需要很多时间。有没有另一种方法可以更快地提供它，也许还有其他一些库？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T04:20:17.757

创建一次 zip 文件，最好是在将曲目放在一起时，然后将其与单个曲目一起上传。没有必要把事情复杂化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T04:14:41.787

以下是一些有用的链接，可以提供一些关于如何更好地做到这一点的见解：

[使用php压缩大文件](https://stackoverflow.com/questions/552516/use-php-to-zip-large-files)

[LAMP：如何即时为用户创建大文件的 .Zip，而不会出现磁盘/CPU 抖动](https://stackoverflow.com/questions/4357073/on-the-fly-zipping-streaming-of-large-files-in-php-or-otherwise)

# javascript - 关于 John Resig 简单继承的属性的奇怪问题

> ID：14132697
> 
> 赞同：3
> 
> 时间：2013-01-03T03:39:01.117
> 
> 标签：javascript, prototype, prototypal-inheritance

我指的是[这篇文章](http://ejohn.org/blog/simple-javascript-inheritance/)。我基本上是在创建一个具有`init`设置`options`属性的函数的类。有关工作示例，请参见[http://jsbin.com/usaboh/1/edit （启用控制台以查看输出）。](http://jsbin.com/usaboh/1/edit)

下面的第一个示例工作正常，但是第二个仍然获得`options`第一个“实例”的值。

按预期工作：

```
var Person = Class.extend({
    options: {value: 2},
    init: function(options){
        if(options) {
            this.options = options;
        }
    }
});

var p = new Person({value: 5});
console.log(p.options); //{"value": 5} (ok)

var p2 = new Person();
console.log(p2.options); //{"value": 2} (ok) 
```

没有按预期工作：

```
var Person = Class.extend({
    options: {value: 2},
    init: function(options){
        if(options) {
            for (var name in options) {
                this.options[name] = options[name];
            }
        }
    }
});

var p = new Person({value: 5});
console.log(p.options); //{"value": 5} (ok)

var p2 = new Person();
console.log(p2.options); //{"value": 5} (why 5 ??? shouldn't be 2 ?) 
```

为什么`options`第二个例子中的值`{"value": 2}`不像第一个例子？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T03:46:28.287

那是因为`options`是类的属性（在其原型上），而不是对象。

通过将其添加到第二个示例的底部来验证它：

```
console.log( p.options == p2.options ); // true 
```

* * *

# 解释：

使用抽象层时，记住底层原理非常重要，这样您就不会被[抽象的泄漏](http://www.joelonsoftware.com/articles/LeakyAbstractions.html)所困扰。

## 你的第一个例子：

让我们用常规的原型继承重写你的类定义：

```
var Person = function (options) {
    if (options) {
        this.options = options;
    }
};

Person.prototype.options = {value: 2};

var john = new Person(); 
```

`john`现在将是一个新实例，并且`Person`没有*属性*`options`：

```
john.hasOwnProperty('options'); // false 
```

尝试访问`options`via`john.options`时，您将从`{value: 2}`原型链中获得 。

但是，如果您要通过向构造函数提供您来创建这个新`Person`对象：`options`

```
var michael = new Person({value:5}); 
```

`michael` *将*有一个`options`属性：

```
michael.hasOwnProperty('options'); // true 
```

这是一个比较两者的简单测试：

```
john.options == Person.prototype.options // true
michael.options == Person.prototype.options // false 
```

* * *

## 你的第二个例子：

现在考虑你的第二个例子，用原生原型继承编写：

```
var Person = function (options) {
    if (options) {
        for (var name in options) {
            this.options[name] = options[name];
        }
    }
};

Person.prototype.options = {value: 2}; 
```

不管你是否传入`options`构造函数，你的新对象永远不会有自己的`options`属性。你所做的只是`options`在原型上增加：

```
var john = new Person();
john.options // {value:2}
john.hasOwnProperty('options'); // false
john.options == Person.prototype.options // true

var michael = new Person({value:5});
michael.options // {value:5}
michael.hasOwnProperty('options'); // false
michael.options == Person.prototype.options // true

john.options // {value:5}
// Why? Because they share the same `options` property from the prototype
john.options == michael.options // true 
```

如果您随后将新对象分配给`john`，则不会影响`options`原型上的 ：

```
john.options = {value:10};
john.options // {value:10}
john.options == Person.prototype.options // false
michael.options // {value:5}
michael.options == john.options // false
michael.options == Person.prototype.options // true 
```

* * *

# 解决方案：

要在第二个示例中获得所需的功能，您必须执行以下步骤：

1.  `options`从构造函数（`init`方法）中创建一个新属性。
2.  复制所有属性`Person.prototype.options`。
3.  最后，复制`options`参数中的所有属性。

您可以这样做：

```
var Person = Class.extend({
    options: {value: 2},
    init: function(options) {
        if (options) {
            var name, prototypeOptions = Person.prototype.options;
            this.options = {};

            for (name in prototypeOptions) {
                this.options[name] = prototypeOptions[name];
            }

            for (name in options) {
                this.options[name] = options[name];
            }
        }
    }
}); 
```

如果你使用[jQuery](http://api.jquery.com/jQuery.extend/)或[underscore](http://underscorejs.org/#extend)，你可以使用他们的`extend`方法，这使得这一切变得微不足道：

```
var Person = Class.extend({
    options: {value: 2},
    init: function(options) {
        if (options) {
            this.options = $.extend({}, Person.prototype.options, options);
        }
    }
}); 
```

* * *

## 更简单的解决方案：

根据您的需要，您甚至可能一开始就不需要`options`在原型上。只需将它添加到构造函数（`init`方法）中的对象中，然后完成它：

```
var Person = Class.extend({
    init: function(options) {
        this.options = {value: 2};
        if (options) {
            for (var name in options) {
                this.options[name] = options[name];
            }
        }
    }
}); 
```

再一次，如果您使用 jQuery 或下划线，这将变得更加简单：

```
var Person = Class.extend({
    init: function(options) {
        this.options = _.extend({value: 2}, options);
    }
}); 
```

# c++ - DLL 注入 | GetProcAddress 返回 NULL

> ID：14132700
> 
> 赞同：0
> 
> 时间：2013-01-03T03:39:13.867
> 
> 标签：c++, winapi, dll-injection

好的，我会尽量让它快点。我正在尝试学习如何在另一个进程中注入 DLL。目前，我只是在尝试检测打开计算器时何时输出消息。我编写了以下 DLL：

```
#include <windows.h>
#include <iostream>

using namespace std;
extern "C"{
    LRESULT CALLBACK CBTProc(int nCode, WPARAM wParam, LPARAM lParam)
    {       
       cout << "I'M NOT WORKING " << endl;
       // Bunch of code...
       return CallNextHookEx(0, nCode, wParam, lParam);
    } 
    void ASimpleFunc(){
        cout << "DLL WORKING" << endl;
    }
} 
```

这是我的注入器（嗯……它现在只是试图加载 DLL）。

```
#include <windows.h>
#include <iostream>

using namespace std;
typedef LRESULT (*CBTProc)(int,WPARAM,LPARAM); 
typedef void (*ASimpleFunc)(); 
int main()
{   
    // My two functions... 
    LRESULT _CBTProc;
    ASimpleFunc _ASimpleFunc;

   HMODULE hDll = LoadLibrary("myDLL.dll");
   if(!hDll){
       cout << "DLL FAILED TO LOAD" << endl;
   }else{
       cout << "DLL LOAD SUCCESS" << endl;

       // This one is working
       _ASimpleFunc = (ASimpleFunc)GetProcAddress(hDll, "ASimpleFunc");

       // This one is not working
        _CBTProc = (CBTProc)GetProcAddress(hDll, "CBTProc");
        if(!_ASimpleFunc || !_CBTProc){
            cout << "UNABLE TO CALL HOOK" << endl;
        }else{
            // other code...
        }
    }
   return 1;
} 
```

有任何想法吗？

编辑：这不是 100% 的代码。我取出了明显的东西，比如 DLLMain 和所有不直接与我的问题交互的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T03:48:11.420

该`CALLBACK`宏给出了`CBTProc`stdcall 调用约定，因此它的名称将使用前导下划线和字节数进行注释（例如，它可能是`_CBTProc@12`）。您需要`GetProcAddress`使用导出的确切名称进行调用。可以使用 dumpbin 工具找到该名称。

请注意，您的函数指针也必须带有注释，`CALLBACK`以便当您通过函数指针调用函数时，使用正确的调用约定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T03:44:26.820

您需要实际让 DLL 加载到其他进程中才能正常工作。您可以通过在将加载您的 DLL 的其他进程中创建一个远程线程来执行此操作。

然后你需要在加载的时候执行你的钩子`DLLMain`来钩住你想要钩住的函数。

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms682583(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682583(v=vs.85).aspx)

[http://en.wikipedia.org/wiki/DLL_injection](http://en.wikipedia.org/wiki/DLL_injection)

这两个链接应该为您指明正确的方向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T03:44:51.063

我不知道为什么其中一个可以在没有这个的情况下工作，但是如果你想从 DLL 中导出一个函数，你必须显式地导出它。有两种方法可以做到这一点：

1.  **通过一些特定于编译器的方式**告诉编译器。****

     **对于**Visual C++**，[使用`__declspec(dllexport)`](http://msdn.microsoft.com/en-us/library/d91k01sh.aspx).** 
***   **[使用模块定义文件。](http://msdn.microsoft.com/en-us/library/d91k01sh.aspx)****

# vb.net - 取决于用户计算机的日期格式错误

> ID：14132703
> 
> 赞同：0
> 
> 时间：2013-01-03T03:39:37.303
> 
> 标签：vb.net

这是我的问题。我从数据库中获取的日期包含“2013 年 12 月 31 日”。基于此日期，格式为 mm/dd/yy。现在的问题是我如何使它无论用户计算机中的日期格式是什么格式，他们总是将日期“12/31/2013”​​读取为 mm/dd/yy 而不是示例 dd/mm/yy当它读取时，由于没有 31 个月，它包含错误。我在从数据库收到的日期尝试拆分方法，但我无法确认独立于用户计算机的格式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T04:50:18.217

您的日期是以实际`date`格式还是字符串形式存储在数据库中？

请记住，`DateTime.Parse`默认情况下，使用当前用户的当前系统日期/时间格式设置（因此英国用户是 dd/MM/yyyy，但美国用户是 MM/dd/yyyy）。如果您想要统一解析，请使用`DateTime.ParseExact`并指定精确的解析格式字符串。

一个有用的经验法则是“如果你曾经使用过`String.Split`，你可能做错了什么”（我会为快速和肮脏的设计程序例外，但对于解析格式字符串、正则表达式或有限状态机性能更高（字符串分配更少）且更不脆弱。

回到主题，如果您的数据库将对象存储为 a`date`或者`datetime`根本不使用字符串。使用 EF 类的`.GetDateString(int)`方法`IDataReader`或类型字段属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T04:41:05.860

不清楚您是想从数据库中读取相同的格式还是将其显示在屏幕（UI）上

如果它来自 sql server，请考虑使用[convert](http://www.sql-server-helper.com/tips/date-formats.aspx) <-follow this link

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T04:50:03.930

您是如何从数据库中获取日期的？您是否将日期存储为字符串？如果可能，请考虑将日期保留为`DateTime`变量而不是字符串。如果不可能，请查看`DateTime.TryParse`支持国际化的方法，并且应该能够理解用户的 UI 本地化设置。

# visual-studio-2012 - 在没有模拟器的情况下为 Windows Phone 8 应用程序创建屏幕截图

> ID：14132704
> 
> 赞同：2
> 
> 时间：2013-01-03T03:39:42.700
> 
> 标签：visual-studio-2012, windows-phone-8

我的笔记本电脑的处理器不支持 SLAT，所以我无法在笔记本电脑上运行 WP8 模拟器并使用它来截屏。

我有一台 Lumia 920，我可以用它截屏，但仅限于 Windows Phone 上可用的三种屏幕尺寸之一。

在这种情况下，有没有办法为所有不同的屏幕尺寸截屏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:13:06.740

我有同样的问题。如果这是您所要求的，则无法让您的 Lumia 920 以不同的分辨率进行渲染。这使得验证这些决议非常困难。它确实使您必须相信您的应用程序可以正确扩展的布局。

为了获得屏幕截图，我使用 Lumia 920 进行屏幕截图，然后使用paint.net 将图像调整为适合商店要求的正确尺寸。这对用户来说有点误导，但这是您在没有需要测试的设备的情况下所能做的一切。

其他选择是联系您当地的 Microsoft 开发人员宣传员，看看您是否可以获得设备来测试这些分辨率。然后，如果所有其他方法都失败了，并且您仍然不愿意在不测试这些分辨率的情况下发布您的应用程序，您总能找到愿意在他们的模拟器上运行您的应用程序的开发人员朋友。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-21T13:54:44.337

如果您使用的是 Windows Phone 8，您只需同时按下电源和开始按钮即可截取屏幕截图。

# ruby - 为什么分配属性与 has_many 关联的 id 数组仅关联一个对象？

> ID：14132706
> 
> 赞同：1
> 
> 时间：2013-01-03T03:40:03.247
> 
> 标签：ruby, ruby-on-rails-3, activerecord, has-and-belongs-to-many

我有一个表单，用户可以使用 ajax 上传资产。这会创建许多 Asset 对象，然后我想在创建 Post 对象时将它们关联起来。我有一个名为asset_ids 的form_field，我在创建资产ID 时对其进行更新。当我创建 Post 对象并使用 assign_attributes 填充其数据时，无论有多少个 id，都只会创建一个关联。

资产模型：

```
class Asset < ActiveRecord::Base

  attr_accessible :caption, :image
  belongs_to :post
  has_attached_file :image, :styles => { :large => "600x600>", :medium => "300x300>", :thumb => "100x100>" }

end 
```

岗位型号：

```
class Post < ActiveRecord::Base

    attr_accessible :content, :post_date, :status, :title, :tag_list, :asset_ids, :as => :admin
    has_many :assets, :dependent => :destroy
    has_and_belongs_to_many :tags

    validates :content, :post_date, :title, :presence => true

end 
```

发布数据哈希的示例：

```
{"title"=>"Test post", "status"=>"true", "post_date"=>"01/02/2013", "content"=>"&nbsp;Some content", "tag_list"=>"", "asset_ids"=>"97,102"} 
```

当我像这样分配属性时，上面的示例仅将一个资产（id 97）分配给新帖子：

```
@post = Post.new
@post.assign_attributes params[:post], :as => :admin 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T04:45:01.303

我必须确保将 id 分配为数组：

```
@post.asset_ids = params[:post][:asset_ids].split(",") 
```

# ruby-on-rails - 如何在 Rails 中真正输入模型？

> ID：14132708
> 
> 赞同：0
> 
> 时间：2013-01-03T03:40:13.073
> 
> 标签：ruby-on-rails, ruby, activerecord

我有一个 Item 作为超类，它下面有两个子类。

当用户**第一次**输入信息时，输入的参数都包含在hash中`params[:item]`。我根据输入实例化具体类型。

```
# instantitate the concrete type according to the input
type_of_item = Object::const_get(inputs[:type])
@item = type_of_item.new 
```

当验证失败时，我将用户放回新页面。用户再次输入数据

**但是**，这一次，输入参数将被包含在`params[:bidding_item]`或`params[:direct_item`其中bidding_item和direct_item是**Item的子类的hash中**

我尝试做类似的事情：

```
format.html do
  @item.becomes(Item)
  render :action=>"new"
end 
```

我希望每次都包含输入参数，`params[:item]`以便我每次都能以相同的方式获取数据，但它不起作用。

现在，我解决了我的问题。但我认为这根本不是一个好习惯。

```
# form input
inputs = params[:item] || params[:bidding_item] || params[:direct_item] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T03:46:07.467

在您的`new`视图文件中，您可以将`:as`选项添加到`form_for`标签。

```
form_for @item, :as => :item do |form| 
```

这意味着参数将始终`params[:item]`独立于对象类型。

# python - 'Return' 关键字只返回循环中的一个元素？

> ID：14132723
> 
> 赞同：4
> 
> 时间：2013-01-03T03:42:12.563
> 
> 标签：python, return

我有一个简单的函数来读取 csv 文件并从中提取第一个列：

```
import csv 

def pass_username():
    with open('test.csv', 'r') as csvfile:
        spamreader = csv.reader(csvfile, delimiter=',')
        for row in spamreader:
            return row[0] 
```

当我将此函数称为：

```
a = pass_username()
print a 
```

这仅打印第一个元素。但是，当我用as替换`return`word并调用该函数时，它会打印所有元素。我想将该函数分配给一个变量，因此我想使用 return。如何解决？`print``print row[0]``pass_username()`

test.csv 的内容：

```
"test@gmail.com","rockon"
"hello@gmail.com","hey"
"hithere@gmail.com","ok"
"hellosir@gmail.com","password" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T03:48:16.883

正如其他回答的人所说，您可以将结果累积到一个列表中并返回。但是，另一种方法是替换`return`为`yield`which 会导致您的函数返回一个可迭代类型对象，该对象会在您决定稍后迭代它时生成您产生的项目（可能使用 for 循环）。

请参阅：[Python 中的“yield”关键字有什么作用？](https://stackoverflow.com/questions/231767/the-python-yield-keyword-explained)

以下是您将如何在代码中使用它：

```
import csv 

def pass_username():
    with open('test.csv', 'r') as csvfile:
        spamreader = csv.reader(csvfile, delimiter=',')
        for row in spamreader:
            yield row[0]

username_generator = pass_username()

# iterate through the usernames with a for loop
for name in username_generator:
    print name
# call the list constructor which causes it to produce all of the names
print list(pass_username()) 
```

请记住，用户名是*根据需要*生成的，因此您可以，例如，`username_generator.next()`生成下一个用户名，而不必生成所有用户名。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T03:45:41.773

当您调用时`return`，它会自动退出函数，因此在到达`return`语句后它不会处理任何内容。

您可能希望`append`将结果放到一个列表中，然后`return`是列表。

在您的情况下，您甚至可能想使用 a `list comprehension`，因此不要使用 for 循环，而是使用以下命令：

```
return [row[0] for row in spamreader] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T03:44:39.843

一个函数只能返回一次。当它回来时，它就结束了。当你的函数第一次返回时，它就结束了，所以它只返回一个值。

如果要返回所有值，请将它们累积到一个列表中并返回该列表。

# c# - 物业信息有什么优势？

> ID：14132725
> 
> 赞同：2
> 
> 时间：2013-01-03T03:42:24.640
> 
> 标签：c#, c#-4.0, c#-3.0, expression, c#-2.0

在 .net FrameWork 3.5 中，我们可以使用下面提到的代码获取属性信息。

```
using System;
using System.Linq.Expressions;
using System.Reflection;

class Foo
{
    public string Bar { get; set; }
}
static class Program
{
    static void Main()
    {
        PropertyInfo prop = PropertyHelper<Foo>.GetProperty(x => x.Bar);
    }
}
public static class PropertyHelper<T>
{
    public static PropertyInfo GetProperty<TValue>(
        Expression<Func<T, TValue>> selector)
    {
        Expression body = selector;
        if (body is LambdaExpression)
        {
            body = ((LambdaExpression)body).Body;
        }
        switch (body.NodeType)
        {
            case ExpressionType.MemberAccess:
                return (PropertyInfo)((MemberExpression)body).Member;
            default:
                throw new InvalidOperationException();
        }
    }
} 
```

这也可以通过创建类的实例并访问属性成员来完成。那么Property Info有什么优势呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T03:46:59.703

`PropertyInfo`用于获取类的属性信息。不需要创建实例。优点是它消除了输入错误的可能性。

`Expressions`是完全不同的概念（在内部使用反射）。表达式用于将方法体表示为树结构。这允许在运行时灵活地创建/调整方法定义。

[Queryable](http://msdn.microsoft.com/en-us/library/system.linq.queryable.aspx)类利用 Expressions 的这种功能在远程源构建/执行动态查询。

例如，考虑`INotifyPropertyChanged`接口。它用于属性更改通知。

通常的实现将属性名称作为字符串参数。因此，在运行时检测到键入错误。重构也可以破坏代码（虽然智能重构工具会处理这个问题）。

```
 void RaisePropertyChanged(PropertyChangedEventArgs args)
    {
        var handler = PropertyChanged;
        if (handler != null)
            handler(this, new PropertyChangedEventArgs(propertyName));
    }

    public string Name
    {
        set
        {
            _name = value;
            RaisePropertyChanged("Name"); // Property name is specified as string
        }
    } 
```

更好的实现（虽然不是性能效率）将属性名称作为`Expression`.

```
 void RaisePropertyChanged<T>(Expression<Func<T>> selectorExpression)
    {
        var handler = PropertyChanged;
        if (handler != null)
        {
            MemberExpression body = selectorExpression.Body as MemberExpression;

            handler(this, new PropertyChangedEventArgs(body.Member.Name));
        }
    }

    public string Name
    {
        set
        {
            _name = value;
            RaisePropertyChanged( () => this.Name); // Property is specified instead of name that removes typing error
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T04:00:48.607

通过剖析表达式获取 PropertyInfo 的优点是它可以为您提供编译时检查并提供更好的重构支持。

例如，如果您将属性名称从 Bar 更改为 Barr，您的代码将不再编译，从而允许您在不实际运行应用程序的情况下捕获无效的成员访问错误。

如果您知道需要提前访问哪个确切的属性，那么表达式就是您要走的路。

我发现表达式在需要指定要绑定到网格列或列表控件的属性名称的数据绑定场景中特别有用。在这种情况下使用表达式可以降低维护成本。

这是一个使用表达式通过您自己的 PropertyHelper 类执行网格列格式化的示例。

跳转到 GridForm.FormatGrid() 以查看重要的位。

```
using System;
using System.Collections.Generic;
using System.Drawing;
using System.Linq.Expressions;
using System.Reflection;
using System.Windows.Forms;

namespace ExpressionSample
{
    public class TestEntity
    {
        public int ID { get; set; }
        public string Text { get; set; }
        public decimal Money { get; set; }
    }

    public partial class GridForm : Form
    {
        public GridForm()
        {
            this.InitializeComponent();
        }

        private void GridForm_Load(object sender, EventArgs e)
        {
            this.FillGrid();
            this.FormatGrid();
        }

        private void FillGrid()
        {
            this.DataGridView.DataSource = TestDataProducer.GetTestData();
        }

        private void FormatGrid()
        {
            var redCellStyle = new DataGridViewCellStyle() { ForeColor = Color.Red };
            var moneyCellStyle = new DataGridViewCellStyle() { Format = "$###,###,##0.00" };

            this.GridColumn(e => e.ID).Visible = false;
            this.GridColumn(e => e.Text).DefaultCellStyle = redCellStyle;
            this.GridColumn(e => e.Money).DefaultCellStyle = moneyCellStyle;
        }

        private DataGridViewColumn GridColumn<TProperty>(Expression<Func<TestEntity, TProperty>> expr)
        {
            var propInfo = PropertyHelper<TestEntity>.GetProperty(expr);
            var column = this.DataGridView.Columns[propInfo.Name];

            return column;
        }
    }

    public static class PropertyHelper<T>
    {
        public static PropertyInfo GetProperty<TValue>(
            Expression<Func<T, TValue>> selector)
        {
            Expression body = selector;
            if (body is LambdaExpression)
            {
                body = ((LambdaExpression)body).Body;
            }
            switch (body.NodeType)
            {
                case ExpressionType.MemberAccess:
                    return (PropertyInfo)((MemberExpression)body).Member;
                default:
                    throw new InvalidOperationException();
            }
        }
    }

    public static class TestDataProducer
    {
        public static IList<TestEntity> GetTestData()
        {
            var entities = new List<TestEntity>();

            for (var i = 1; i <= 10; i++)
            {
                var testEntity = new TestEntity {
                    ID = i,
                    Text = "Entity " + i.ToString(),
                    Money = i * 100m
                };

                entities.Add(testEntity);
            }

            return entities;
        }
    }
} 
```

# ruby-on-rails - rails carrierwave_direct 无法呈现 direct_upload_form_for 表单

> ID：14132726
> 
> 赞同：4
> 
> 时间：2013-01-03T03:42:26.150
> 
> 标签：ruby-on-rails, file-upload, amazon-s3, carrierwave, fog

我正在尝试为我的 rails 3.2 应用程序中的某些图像上传设置carrierwave_direct，但似乎无法使用direct_upload_form_for 标签呈现表单。

加载包含表单的页面时，我收到错误“#< PostmarkerImage:0x007fdbe07b39f0 > 的未定义方法`direct_fog_url'”。

PostmarkerImage 是我安装上传器的模型，如下所示：

```
class PostmarkerImage < ActiveRecord::Base
  attr_accessible :image, :image_cache

  belongs_to :postmarker

  validates :image, :presence => true

  mount_uploader :image, PostmarkerImageUploader
end 
```

图像列是一个字符串，我还确保已运行迁移以创建该列。上传器现在看起来像这样：

```
class PostmarkerImageUploader < CarrierWave::Uploader::Base
  include CarrierWaveDirect::Uploader

  # Include RMagick or MiniMagick support:
  # include CarrierWave::RMagick
  include CarrierWave::MiniMagick

  # Include the Sprockets helpers for Rails 3.1+ asset pipeline compatibility:
  include Sprockets::Helpers::RailsHelper
  include Sprockets::Helpers::IsolatedHelper

  # Choose what kind of storage to use for this uploader:
  # storage :file
  # storage :fog

  include CarrierWave::MimeTypes
  process :set_content_type

  # Provide a default URL as a default if there hasn't been a file uploaded:
  # def default_url
  #   # For Rails 3.1+ asset pipeline compatibility:
  #   # asset_path("fallback/" + [version_name, "default.png"].compact.join('_'))
  #
  #   "/images/fallback/" + [version_name, "default.png"].compact.join('_')
  # end

  # Process files as they are uploaded:
  # process :scale => [200, 300]
  #
  # def scale(width, height)
  #   # do something
  # end

  # Create different versions of your uploaded files:
  # version :thumb do
  #   process :scale => [50, 50]
  # end

  # Add a white list of extensions which are allowed to be uploaded.
  # For images you might use something like this:
  def extension_white_list
    %w(jpg jpeg gif png)
  end

  # Override the filename of the uploaded files:
  # Avoid using model.id or version_name here, see uploader/store.rb for details.
  # def filename
  #   "something.jpg" if original_filename
  # end

end 
```

我还确保已经安装了carrierwave_direct、fog、mini_magick 和Imagemagick。我可以知道我还错过了什么吗？似乎上传器的安装没有正确完成。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T04:07:07.813

设法弄清楚:)以防万一有人遇到这个问题：

我正在实现一个单独的模型来保存我的图像，而不是在现有表中添加一列。所以direct_upload_form_for 期望**列**（例如Image.new.image）而不是我返回的**对象（例如Image.new）。**我想我被 form_for 部分抛弃了，它通常需要一个**Object**！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-11T04:27:57.150

对于遇到此错误的任何其他人，您可能没有将正确的对象传递给 direct_upload_form_for。假设我们有一个带有头像列的用户模型。它应该看起来像。

模型：

```
class User < ActiveRecord::Base
  mount_uploader :avatar, AvatarUploader
end 
```

控制器：

```
def edit # Could be any action, but I always direct upload to existing objects
  @uploader = @user.avatar
  @uploader.success_action_redirect = edit_registration_url(resource)
end 
```

查看（erb）：

```
<%= direct_upload_form_for @uploader do |f| %>
  <%= f.file_field :image %>
<% end %> 
```

注意@uploader 对象实际上是@user.avatar*列，而不是@user**对象*。这就是OP在他的回答中所说的。在他的情况下更令人困惑，因为该对象不是用户，而是 PostmarkerImage，我认为它是一个仅用于保存图像的模型。当您希望一个对象（即邮戳）有多个图像时，这很常见。因此，您仅为图像创建模型，并`has_many`在它们之间建立关系。

**陷阱：**我在生产中也经常遇到这个错误，因为我忘记将控制器中的代码从`edit`动作复制到`update`动作。如果由于验证（如文件类型）导致上传失败，您需要记住再次设置@uploader！同样，如果您的上传者位于 中`new`，请记住也将 @uploader 分配到 中`create`。

# java - 如何抛出并捕获和超时异常

> ID：14132733
> 
> 赞同：0
> 
> 时间：2013-01-03T03:43:44.830
> 
> 标签：java

在等待一段时间后看到一个 webelement 后，我​​尝试 catch() 超时异常。但是java说超时异常永远不会被抛出。

下面的方法等待任何 web 元素一段时间（给定）。即使时间过去了，也看不到 web 元素，Catch 块也会被执行。``

我想确切地知道此方法是否由于仅超时异常而失败。因此，我尝试使用以下方法捕获它：

```
Catch(TimeoutException te). 
```

但是Java说，这个异常是不可抛出的。

```
public boolean waitForElement(final String id, String[] resultsValues)
throws  Exception {
boolean returnValue = false;
try {
returnValue = new WebDriverWait......
}
catch(Exception e)
{
System.out.println(e.toString());
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T03:54:34.060

该`WebDriverWait` `until`方法是抛出 的方法`TimeoutException`，而不是构造函数。此外，请确保您尝试捕获 WebDriver [TimeoutException](http://selenium.googlecode.com/svn/trunk/docs/api/java/index.html)，而不是 java.util.concurrent [TimeoutException](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/TimeoutException.html)。

# asp.net - SQL Server 和 ASP.NET：使用 DropDownList 过滤 SqlDataSource (FilterExpression) 中的“位”数据类型

> ID：14132737
> 
> 赞同：0
> 
> 时间：2013-01-03T03:44:14.120
> 
> 标签：asp.net, .net, sql-server, bit

我有`Gridview`它使用它`SqlDataSource`作为`DataSource`

```
<asp:SqlDataSource ID="dsMetal" runat="server" 
        ConnectionString="<%$ConnectionStrings:connStr%>"
        SelectCommand="select MetalName, MetalID, IsAvailable from Metal Where IsDeleted = 0" FilterExpression="IsAvailable like '%{0}%'>
   <asp:ControlParameter Name="IsAvailable" ControlID="ddlIsMetalAvailable" PropertyName="SelectedValue" Type="Boolean" />
</asp:SqlDataSource> 
```

这是我的下拉列表：

```
<asp:DropDownList ID="ddlIsMetalAvailable" DataValueField="IsAvailable"
     AppendDataBoundItems="true" AutoPostBack="true" runat="server" Width="150">
                        <asp:ListItem Text="True"  Value="True" />
                        <asp:ListItem Text="False"  Value="False" />
</asp:DropDownList> 
```

我收到一个错误：

> *无法对 System.Boolean 和 System.String 执行“点赞”操作。*

我也试过这个过滤器表达式，但它对我没有帮助：

```
FilterExpression="Convert(IsAvailable, 'System.Boolean') like '%{0}%' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T06:16:41.783

只需阅读错误消息 - 它清楚地说明了问题所在：

> *无法对 System.Boolean 和 System.String 执行“点赞”操作。*

您**不能**使用`LIKE`布尔值 - 您需要使用完全匹配。

因此，将您的标记更改为：

```
<asp:SqlDataSource ID="dsMetal" runat="server" 
        ConnectionString="<%$ConnectionStrings:connStr%>"
        SelectCommand="select MetalName, MetalID, IsAvailable from Metal Where IsDeleted = 0" 
        FilterExpression="IsAvailable = {0}'>   <=== HERE - use = {0} instead of LIKE
   <FilterParameters>
      <asp:ControlParameter Name="IsAvailable" ControlID="ddlIsMetalAvailable" 
                            PropertyName="SelectedValue" Type="Boolean" />
   </FilterParameters>
</asp:SqlDataSource> 
```

通过此更改，事情应该可以正常工作。

# c++ - 监控过程的最优数据存储方案

> ID：14132740
> 
> 赞同：0
> 
> 时间：2013-01-03T03:44:37.427
> 
> 标签：c++, api, charts, monitoring, simulation

我想通过商业软件包监控模拟过程。该商业软件提供了 C API 接口，该接口具有用于进程的初始化回调函数以及在模拟过程的每个步骤中执行的回调函数。在每个步骤中，我想监视/绘制回调函数中可用的大约 10 个浮点值。我计划使用诸如 LightningChart、[http://www.arction.com/](http://www.arction.com/)之类的绘图工具来监控和查看值。我将使用 C++/CLI 包装器在更新图表的每个步骤中调用 .NET 图表库。

我已经创建了一个简单的 dll，利用 API 回调函数将值输出到一个文本文件，完成后我将在该文件中执行绘图和分析。虽然我的目标是实时查看数据。

我的问题是，如何在模拟过程初始化回调中调用一个在整个过程中保持不变的表单，并且我可以在每个步骤中进行更新。此外，存储过程参数值的理想数据结构是什么？当使用 C++ 将数据值写入带有回调函数的文本文件时，我的 i7 处理器上的速度约为每秒 1700 步。在不使用 API 和回调函数存储数据的情况下，模拟速度约为每秒 4000 步。我显然希望在绘制实时数据时这会显着变慢，这是可以接受的。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T06:27:02.950

当您打算绘制实时数据时，我建议您使用内存映射文件在模拟过程和回调函数之间共享数据。这将比在物理文件上执行 I/O 操作更快，并且您将能够共享数据。在初始化函数中，您可以创建表单并使用内存映射文件从回调中更新其上的值。这里有一些关于内存映射文件的链接[link1](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366551%28v=vs.85%29.aspx) [link2](http://technet.microsoft.com/en-us/subscriptions/dd997372.aspx)

# security - 如何防止tomcat被黑客攻击？

> ID：14132747
> 
> 赞同：-1
> 
> 时间：2013-01-03T03:45:12.180
> 
> 标签：security, tomcat

今天我发现我的 tomcat 6.0 已经部署了一个奇怪的 webapp，叫做 jFoler 0.9。环顾四周，我意识到这个webapp也可以上传、下载、删除服务器和计算机系统上的文件。它还可以做一些cmd控制，所以我认为如果再次发生这种情况对我的公司来说是非常危险的。

那么如何保护我的服务器免受黑客攻击呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T03:48:22.927

1 安装防火墙

2 将tomcat盒子放在防火墙后面

3 将防火墙配置为只允许外部设备和非管理员内部设备访问tomcat机器上的80端口。

# c++ - Win32混淆闪烁

> ID：14132754
> 
> 赞同：0
> 
> 时间：2013-01-03T03:46:25.490
> 
> 标签：c++, winapi

我有一个函数，其中一堆东西被绘制到屏幕外缓冲区中。在函数结束时，它调用 InvalidateRect。由于某种原因，有时它会在函数中途重绘，导致闪烁。这是该函数的代码：

```
// Side Info
HBITMAP side = LoadBitmap(hInst, MAKEINTRESOURCE(IDB_SIDEINFO));
hdcold = (HBITMAP)SelectObject(hbcmem, side);
BitBlt(hdcmem, 339, 26, 154, 300, hbcmem, 0, 0, SRCCOPY);
DrawLevelNumber(game.levelnumber);

if (color)
    sprites = LoadBitmap(hInst, MAKEINTRESOURCE(IDB_COLOR_SPRITES));
else sprites = LoadBitmap(hInst, MAKEINTRESOURCE(IDB_BLACKWHITE_SPRITES));
hdcold = (HBITMAP)SelectObject(hbcmem, sprites);

// Find x and y coordinate for the top left of the visible screen
int x = game.Player_x, y = game.Player_y, ypos = 0;
if (x < 4)  x = 4;
if (x > 27) x = 27;
if (y < 4)  y = 4;
if (y > 27) y = 27;
x -= 4;
y -= 4;

// Draw lower layer
for (int i = 0; i < 9; i++)
{
    for (int j = 0; j < 9; j++)
    {
        if (game.Layer_Two[x + i][y + j] != 0)
        {
            int xpos = game.get_pos(game.Layer_Two[x + i][y + j], ypos, false);
            BitBlt(hdcmem, (i * 32) + 32, (j * 32) + 32, 32, 32, hbcmem, xpos, ypos, SRCCOPY);
        }
    }
}

// Draw upper layer
for (int i = 0; i < 9; i++)
{
    for (int j = 0; j < 9; j++)
    {
        if ((game.Layer_Two[x + i][y + j] != 0 && game.Layer_One[x + i][y + j] >= 64 && game.Layer_One[x + i][y + j] <= 111))
        {
            int xpos = game.get_pos(game.Layer_One[x + i][y + j], ypos, true);
            BitBlt(hdcmem, (i * 32) + 32, (j * 32) + 32, 32, 32, hbcmem, xpos + 96, ypos, SRCPAINT);
            BitBlt(hdcmem, (i * 32) + 32, (j * 32) + 32, 32, 32, hbcmem, xpos, ypos, SRCAND);
        } else {
            int xpos = game.get_pos(game.Layer_One[x + i][y + j], ypos, false);
            BitBlt(hdcmem, (i * 32) + 32, (j * 32) + 32, 32, 32, hbcmem, xpos, ypos, SRCCOPY);
        }
    }
}

// If it isn't started, show title
if (!game.started)
{

    HDC tmphdc = CreateCompatibleDC(hdcmem);
    HDC tmp = CreateCompatibleDC(tmphdc);
    RECT rc;
    GetClientRect(hWnd, &rc);
    string str = game.leveltitle.substr(0, game.leveltitle.length() - 1) + "\nPassword: " + game.password;
    TCHAR* tch = new TCHAR[str.length()];
    mbstowcs_s(NULL, tch, _tcslen(tch), str.c_str(), str.length());
    HFONT font = CreateFont(25, 0, 0, 0, FW_BOLD, false, false, false, ANSI_CHARSET, OUT_DEFAULT_PRECIS, CLIP_DEFAULT_PRECIS, DEFAULT_QUALITY, FF_DONTCARE, NULL);
    SelectObject(tmp, font);
    DrawText(tmp, tch, str.length(), &rc, DT_CALCRECT);
    rc.right += 16;
    HBITMAP tmpbm = CreateCompatibleBitmap(hdcmem, rc.right, rc.bottom);
    HBITMAP tmpold = (HBITMAP)SelectObject(tmphdc, tmpbm);

    HBRUSH hbr = CreateSolidBrush(RGB(255, 255, 255));
    HPEN pen = CreatePen(PS_SOLID, 1, RGB(255, 255, 255));
    SelectObject(hdcmem, pen);
    SelectObject(hdcmem, hbr);
    Rectangle(hdcmem, 176 - (rc.right / 2), 243, 177 + (rc.right / 2), 248);
    hbr = CreateSolidBrush(RGB(128, 128, 128));
    pen = CreatePen(PS_SOLID, 1, RGB(128, 128, 128));
    SelectObject(hdcmem, pen);
    SelectObject(hdcmem, hbr);
    Rectangle(hdcmem, 176 - (rc.right / 2), 294, 177 + (rc.right / 2), 299);

    HBITMAP left = LoadBitmap(hInst, MAKEINTRESOURCE(IDB_LEFT));
    hdcold = (HBITMAP)SelectObject(hbcmem, left);
    BitBlt(hdcmem, 176 - (rc.right / 2) - 4, 243, 4, 56, hbcmem, 0, 0, SRCCOPY);
    HBITMAP right = LoadBitmap(hInst, MAKEINTRESOURCE(IDB_RIGHT));
    hdcold = (HBITMAP)SelectObject(hbcmem, right);
    BitBlt(hdcmem, 176 + (rc.right / 2) + 1, 243, 4, 56, hbcmem, 0, 0, SRCCOPY);

    SelectObject(tmphdc, font);
    SetTextColor(tmphdc, RGB(255, 255, 0));
    SetBkColor(tmphdc, RGB(0, 0, 0));
    DrawText(tmphdc, tch, str.length(), &rc, DT_CENTER);
    BITMAP structBitmapHeader;
    memset( &structBitmapHeader, 0, sizeof(BITMAP) );
    HGDIOBJ hBitmap = GetCurrentObject(tmphdc, OBJ_BITMAP);
    GetObject(hBitmap, sizeof(BITMAP), &structBitmapHeader);
    BitBlt(hdcmem, 176 - (rc.right / 2), 247, structBitmapHeader.bmWidth, structBitmapHeader.bmHeight, tmphdc, 0, 0, SRCCOPY);
}

// If paused
if (game.paused)
{
    RECT rc;
    rc.top = 32;
    rc.left = 32;
    rc.bottom = 330;
    rc.right = 330;
    BitBlt(hdcmem, 32, 32, 288, 288, NULL, 0, 0, BLACKNESS);
    HFONT font = CreateFont(50, 0, 0, 0, FW_NORMAL, false, false, false, ANSI_CHARSET, OUT_DEFAULT_PRECIS, CLIP_DEFAULT_PRECIS, DEFAULT_QUALITY, FF_DONTCARE, NULL);
    SelectObject(hdcmem, font);
    SetTextColor(hdcmem, RGB(255, 0, 0));
    SetBkColor(hdcmem, RGB(0, 0, 0));
    DrawText(hdcmem, L"PAUSED", 6, &rc, (DT_CENTER + DT_SINGLELINE + DT_VCENTER));
}

nums = LoadBitmap(hInst, MAKEINTRESOURCE(IDB_NUMBERS));
hdcold = (HBITMAP)SelectObject(hbcmem, nums);
for (int i = 100; i > 0; i /= 10) // Coins left
{
    int tmp;
    if (i == 100)
        tmp = game.coinsleft / 100;
    if (i == 10)
        tmp = ((game.coinsleft % 100) - (game.coinsleft % 10)) / 10;
    if (i == 1)
        tmp = game.coinsleft % 10;
    if (game.coinsleft < i && i > 1)
        tmp = 10;
    int ypos = game.get_num_pos(tmp, (game.coinsleft == 0));
    BitBlt(hdcmem, 369 + ((3 - log10((double)i)) * 17), 215, 17, 23, hbcmem, 0, ypos, SRCCOPY);

    if (i == 100)
        tmp = game.timeleft / 100;
    if (i == 10)
        tmp = ((game.timeleft % 100) - (game.timeleft % 10)) / 10;
    if (i == 1)
        tmp = game.timeleft % 10;
    if (game.timeleft < i && i > 1)
        tmp = 10;
    if (game.timelimit == 0)
        tmp = 11;
    ypos = game.get_num_pos(tmp, (game.timeleft < 16 || game.timelimit == 0));
    BitBlt(hdcmem, 369 + ((3 - log10((double)i)) * 17), 125, 17, 23, hbcmem, 0, ypos, SRCCOPY);
}

if (game.onhint)
{
    HBITMAP sidebg = LoadBitmap(hInst, MAKEINTRESOURCE(IDB_SIDEBG));
    hdcold = (HBITMAP)SelectObject(hbcmem, sidebg);
    BitBlt(hdcmem, 353, 165, 127, 146, hbcmem, 0, 0, SRCCOPY);
} else {
    hdcold = (HBITMAP)SelectObject(hbcmem, sprites);                // LOWER SIDE INFO
    if (game.key1 > 0)
        BitBlt(hdcmem, 352, 247, 32, 32, hbcmem, 192, 160, SRCCOPY);
    else BitBlt(hdcmem, 352, 247, 32, 32, hbcmem, 0, 0, SRCCOPY);
    if (game.key2 > 0)
        BitBlt(hdcmem, 384, 247, 32, 32, hbcmem, 192, 128, SRCCOPY);
    else BitBlt(hdcmem, 384, 247, 32, 32, hbcmem, 0, 0, SRCCOPY);
    if (game.key3 > 0)
        BitBlt(hdcmem, 416, 247, 32, 32, hbcmem, 192, 224, SRCCOPY);
    else BitBlt(hdcmem, 416, 247, 32, 32, hbcmem, 0, 0, SRCCOPY);
    if (game.key4)
        BitBlt(hdcmem, 448, 247, 32, 32, hbcmem, 192, 192, SRCCOPY);
    else BitBlt(hdcmem, 448, 247, 32, 32, hbcmem, 0, 0, SRCCOPY);
    if (game.water)
        BitBlt(hdcmem, 352, 279, 32, 32, hbcmem, 192, 256, SRCCOPY);
    else BitBlt(hdcmem, 352, 279, 32, 32, hbcmem, 0, 0, SRCCOPY);
    if (game.fire)
        BitBlt(hdcmem, 384, 279, 32, 32, hbcmem, 192, 288, SRCCOPY);
    else BitBlt(hdcmem, 384, 279, 32, 32, hbcmem, 0, 0, SRCCOPY);
    if (game.ice)
        BitBlt(hdcmem, 416, 279, 32, 32, hbcmem, 192, 320, SRCCOPY);
    else BitBlt(hdcmem, 416, 279, 32, 32, hbcmem, 0, 0, SRCCOPY);
    if (game.suction)
        BitBlt(hdcmem, 448, 279, 32, 32, hbcmem, 192, 352, SRCCOPY);
    else BitBlt(hdcmem, 448, 279, 32, 32, hbcmem, 0, 0, SRCCOPY);
}

RECT rc;
rc.left = 0;
rc.top = 0;
rc.right = 518;
rc.bottom = 401;
InvalidateRect(hWnd, &rc, false); 
```

是什么导致闪烁？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T04:21:52.383

1.  确保您处理 WM_ERASEBKGND 消息并返回 TRUE，这将阻止窗口基类绘制背景。

2.  不要在绘图例程结束时调用 InvalidateRect，而是将绘图代码放在 WM_PAINT 消息处理程序中，这样可以确保在重新绘制窗口时调用绘图代码。

# google-apps-script - 获取当前页面url

> ID：14132760
> 
> 赞同：8
> 
> 时间：2013-01-03T03:47:14.863
> 
> 标签：google-apps-script

在使用 GAS HtmlService 的网络应用程序上，我需要获取当前页面的 url 以在模板中构建新链接。

该网络应用程序将在 Google 网站页面（GAS 作为小工具）中运行，但也可以独立运行

我正在尝试“var pageUrl = document.location.href”，然后在 Html 模板中使用 pageUrl，如下所示。我知道这是错的，但我迷路了，对不起。

```
<a href="<?= pageUrl + "?item=xyz" ?>" >Item xyz link</a> 
```

谢谢，福斯托

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-03T04:15:18.400

您可以通过 ScriptApp 获取 webapp 的 url：

```
<a href="<?= ScriptApp.getService().getUrl() + "?item=xyz" ?>" >Item xyz link</a> 
```

您可以通过 SitesApp 获取站点中的 url：

```
SitesApp.getActivePage().getUrl() 
```

尽管我认为这对于您所描述的内容实际上并没有用，因为您无法向其中添加有用的查询参数。脚本在 iframe 中运行，因此尽管您可以在客户端上使用 document.location，但无论如何它对您没有帮助。URL 被清理，服务 ID 被删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T04:16:33.820

你能负担得起 jQuery 路线吗？

```
$(document).ready( function() {

var currentURL = window.location;

$('#myLink').prop('href', currentURL);

}); 
```

然后...

```
<a id="myLink" href="">Link to somewhere</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-28T07:50:16.083

如今（自 2016 年站点发生变化以来）答案有点简单：

```
var current_url = DocumentApp.getActiveDocument().getUrl(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-07T06:29:41.950

这个对我有用：

```
function doGet(e){
  Logger.log(ScriptApp.getService().getUrl());
} 
```

然后加载您的网页应用程序页面，然后检查您的 appscript 中的日志！

# ios - 在 iOS 应用程序中使用情节提要视图控制器和场景的正确方法是什么？

> ID：14132762
> 
> 赞同：1
> 
> 时间：2013-01-03T03:47:22.370
> 
> 标签：ios, xcode, uiviewcontroller, uistoryboard, segue

我已经在 iOS 应用程序上工作了一段时间，我想我没有使用我为我的应用程序创建的故事板文件/场景正确创建的视图控制器。

就目前而言，我有两个故事板文件，一个用于 iPhone，另一个用于 iPad。在**AppDelegate**实现文件中有一个方法叫做，

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
```

我一直在从这个方法中加载一个 ViewController 来启动我的应用程序的加载过程。

由于我现在有两个故事板文件，因此我获取了一些条件代码来根据运行应用程序的设备加载特定的故事板文件。

加载情节提要文件的正确方法是什么？

加载故事板文件后，我是否初始化根视图控制器？

一旦我的根视图控制器被加载，它应该加载根场景中指定的元素吗？

如果我选择通过单击根场景中的按钮从根场景加载另一个场景，我应该关闭根场景并加载新场景，还是新场景是父场景的子类？ *在场景之间过渡的正确方法是什么？*

基本上，我的应用程序中的每个场景都有一个单独的视图控制器，并且我已经指定了一个与 IB 中的每个场景关联的视图控制器。

现在我有一个按钮，可以从开始/根场景按下以加载与另一个视图控制器关联的另一个场景。在这个新场景中，我有一个**完成**按钮，它返回到根视图控制器。

如果我通过反复单击按钮来重复单击这两个按钮，我是在创建视图控制器的新对象还是在重用已经创建的对象？

我知道这不仅仅是一个问题，但我试图很好地掌握视图生命周期，视图控制器与场景的关系，以及加载第一个视图控制器的正确方法，它应该在应用程序中加载第一个场景假设。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T00:13:33.883

加载情节提要文件的正确方法是什么？

在类导航器中单击您的项目。这是您可以在其中单击的最上面的内容，上面有您的应用程序的名称。一些配置文件将在您的源代码所在的位置打开，您需要找到可以为不同设备指定情节提要的文件。我认为它是左侧的第二个选项卡，但我现在无法检查。您只需指定一个用于 iphone 的故事板和一个用于 ipad 的故事板，就可以了。

编辑：您还需要为两个故事板文件指定一个 initailView。这可以通过简单地在情节提要中打开身份检查器（我认为）并选中有问题的视图并选中“是初始视图”旁边的框来完成。如果我记错了，请尝试所有四个检查员。它会在那里，我保证；）

在场景之间过渡的正确方法是什么？

在大多数情况下，您将使用 segue。这些东西在故事板中是新的，它们就是炸弹。有一种方法可以实现，称为

```
-(void)prepareForSegue:(UIStoryboardSegue *) sender:(id)sender 
```

您可以在其中检查 segue 的标识符，然后直接操作destinationViewController-properties。这是一个很好的教程： http: [//www.appcoda.com/storyboards-ios-tutorial-pass-data-between-view-controller-with-segue/](http://www.appcoda.com/storyboards-ios-tutorial-pass-data-between-view-controller-with-segue/)

但是，如果您不能使用 segue，那么您将需要一个 rootViewController 来显示比模态视图更多的内容。基本上，rootViewControllers 管理一堆视图，而不是你的事。根据您的 UI，您可能需要 NavigationViewController 或 TabBarViewController，只需 google 两者，看看最适合您的。

有任何问题都可以提出来，很高兴能帮到你。玩得开心

# c++ - win32 C/C++ 从“锁定”文件中读取数据

> ID：14132767
> 
> 赞同：2
> 
> 时间：2013-01-03T03:47:31.690
> 
> 标签：c++, c, winapi

知道如何从被另一个进程锁定的文件中读取数据吗？

当我尝试 fopen() 或 CreateFile() 或 OpenFile() 时，我得到共享冲突。

但是，如果我转到命令提示符并执行“c：> more blah.h”，我可以看到该文件。所以“更多”可以以某种方式读取文件。知道它是如何实现的吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T06:20:46.147

> 我正在尝试将其打开为“只读”。IE。fopen() 中的“r”和创建文件中的 GENERIC_READ、FILE_SHARE_READ

显然文件没有被锁定读取，否则*more*命令无法工作。因此，该进程在创建文件时确实指定了读取共享。错误只是在您自己尝试打开文件时指定 FILE_SHARE_READ。那否认写共享。那行不通，该进程已经获得了对该文件的写访问权，您不能拒绝它。相反，您将因共享冲突而被拒绝访问。您还**必须**指定 FILE_SHARE_WRITE 才能访问该文件。

这将解决您的问题。唯一的另一个问题是您将从正在写入的文件中读取。因此文件中的数据完全无法预测地发生变化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T05:43:20.023

一种方法是将文件复制到一个新的临时文件并读取它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T06:03:53.900

fopen 已弃用，msdn 建议使用 fopen_s，但未为此启用共享。

> fopen_s 和 _wfopen_s 打开的文件不可共享。如果您要求文件可共享，请使用 _fsopen、_wfsopen 和适当的共享模式常量（例如，_SH_DENYNO 用于读/写共享）。

使用 _fsopen 打开文件并启用共享标志 (_SH_DENYNO) 以提供共享访问权限。

[开放式](http://msdn.microsoft.com/en-us/library/8f30b0db.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T03:54:27.843

请阅读此内容 - [http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858(v=vs.85).aspx) 当您说“访问冲突”时，您的意思是 Win32 0xc000005 错误吗， 或者是其他东西？

# c# - 在 MVC 中使用 ELMAH 处理错误

> ID：14132774
> 
> 赞同：0
> 
> 时间：2013-01-03T03:48:18.160
> 
> 标签：c#, error-handling, asp.net-mvc-4, elmah.mvc

我一直在 MVC4 应用程序中使用 ELMAH。我从 Nuget 下载了 ELMAH，它为我设置了配置。我知道 MVC 的 ELMAH 会捕获控制器中的错误，但是其他地方的错误呢？例如 Application_Start 中的错误？我已经设法[在 Application_Error 中使用 ELMAH 记录错误，](https://stackoverflow.com/questions/2108404/elmah-exceptions-without-httpcontext)但无法将其重定向到 /Shared/ 文件夹中的 MVC 4 错误页面。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T03:53:13.290

是的 - 对于本地环境，除非您将 web.config 设置为 customErrors mode="On" defaultRedirect="Error"，然后您需要禁用全局过滤器 HandleError，否则重定向将不起作用。注释掉 RegisterGlobalFilters 中的 HandleErrorAttribute 行。

```
public static void RegisterGlobalFilters(GlobalFilterCollection filters)
{
    //filters.Add(new HandleErrorAttribute());
} 
```

# ruby - 将一个类的方法分配给另一个类的实例

> ID：14132782
> 
> 赞同：4
> 
> 时间：2013-01-03T03:49:14.203
> 
> 标签：ruby, metaprogramming

正如标题所示，我想将一个类上定义的所有实例方法分配给另一个类。我知道我可以得到一个我想要复制的方法列表，`ClassA`如下`ClassB`所示：

```
ClassA.instance_methods(false) 
```

我想我可以这样定义它们`ClassB`：

```
ClassA.instance_methods(false).each do |method_name|
  ClassB.method_define(method_name, [body here??])
end 
```

有没有办法得到对应的方法体，如果有，这个方法能用吗？如果没有，有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-03T06:16:52.677

其他人已经告诉你要子类化。但是要回答您的字面问题，我们将涉及`UnboundMethod`对象：

```
class Object
  def kokot; 'kokot' end
end

o = Object.new
o.kokot
#=> kokot

3.kokot
#=> kokot 
```

到目前为止，一切都很好。现在让我们重新定义`kokot`方法`Numeric`：

```
class Numeric
  def kokot; 'pica' end
end

o.kokot
#=> kokot
3.kokot
#=> pica 
```

但是，如果我们决定，新`kokot`方法对数字很有用，但复数应该继续使用旧`kokot`方法。我们可以这样做：

```
um = Object.instance_method :kokot
#=> #<UnboundMethod: Object#kokot>
Complex( 2, 3 ).kokot # gives the redefined kokot method
#=> pica
Complex.module_exec { define_method :kokot, um }
# Now we've just bound the old kokot to Complex
Complex( 2, 3 ).kokot
#=> kokot 
```

简而言之，有一种方法可以在相关类之间“复制和粘贴”方法。**要求目标是未绑定方法源的子类。**方法`#source_location`显示文件和`#kokot`已定义的行：

```
um.source_location
#=> ["(irb)", 2] 
```

对于内置方法，`#source_location`返回`nil`. 在 Ruby 2.0 中，`RubyVM`类有方法`#disassemble`：

```
RubyVM::InstructionSequence.disassemble( um )
#=> ( program listing goes here ) 
```

无论如何，Ruby 字节码看起来并不是那么漂亮。回到您最初的需求，甚至不能`#define_method`或`UnboundMethod#bind`不能将方法绑定到不兼容的对象。这不能被重新定义之类的技巧所欺骗`#kind_of?`，必须在本机代码中欺骗 CLASS_OF() 函数......

在可用的 gem 中，[Sourcify](https://github.com/ngty/sourcify)、[RubyParser](https://github.com/seattlerb/ruby_parser)和[Sorcerer](https://github.com/jimweirich/sorcerer)很有趣。（谢谢，@Casper。）使用这些，理论上可以通过`#eval`-ling 提取的方法源在不兼容的对象之间移植代码。很长的路要走，这种技术仍然无法实现可靠的方法传输，因为只要源在运行时不可用（例如，自修改源），它就会失败。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T04:45:55.350

看起来你可能想要的是混合：

取自[http://www.ruby-doc.org/docs/ProgrammingRuby/html/tut_modules.html](http://www.ruby-doc.org/docs/ProgrammingRuby/html/tut_modules.html)

```
module Debug
  def whoAmI?
    "#{self.type.name} (\##{self.id}): #{self.to_s}"
  end
end
class Phonograph
  include Debug
  # ...
end
class EightTrack
  include Debug
  # ...
end
ph = Phonograph.new("West End Blues")
et = EightTrack.new("Surrealistic Pillow")
ph.whoAmI?  »   "Phonograph (#537766170): West End Blues"
et.whoAmI?  »   "EightTrack (#537765860): Surrealistic Pillow" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-10T17:13:49.680

In ruby 2.0 you can use modules. Matz explicitly [forbade this behavior from classes](http://bugs.ruby-lang.org/issues/4254).

But you can use instance_methods from modules.

```
ModuleA.instance_methods(false).each do |name|
  meth = ModuleA.instance_method(name)
  ClassB.send(:define_method, name, meth)
end 
```

`define_method` is a private method, so that's why you use `send` here.

But why do this? Just include the module.

If you want to just apply behavior to an object you can unbind a method from any module and bind it to any object.

```
ModuleA.instance_method(:something).bind(some_object).call(args) 
```

If this is what you want, take a look at `casting`, a [gem that adds a convenience to doing delegation](https://github.com/saturnflyer/casting) like this as well as adding methods to an object only for the life of a block.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T04:55:45.523

在这种情况下，`classB`应该继承`classA`.

# c# - 连续打开和关闭连接后无法连接到本地主机上的 MySql Server

> ID：14132784
> 
> 赞同：1
> 
> 时间：2013-01-03T03:49:44.783
> 
> 标签：c#, asp.net, mysql, sql

我有一些 mysql 问题，我有一个名为“transactionNumber”和“counter”的列。

transactionNumber 值可以是这样的：（不包括字母）

```
a. 12345, 1234566
b. 9876, 98332, 23423
c. 12347
d. - 
```

'counter' 列是一个字段，用于计算一行中有多少个 transactionNumber。例如上面的字母'a'有2个transactionNumber，字母'b'有3个等等。字母'd'算作1。

但是当应用程序启动时计数器列是空的。所以我创建了一个方法来计算每行的 transactionNUMer 并更新计数器列。

这是我的方法：

```
private void TransactionNumberCounter(DataSet dsData)
{
    for (int i = 0; i < dsData.Tables["data"].Rows.Count; i++)
    {
        DataRow dRow = dsData.Tables["data"].Rows[i];

        string tNumber = dRow.ItemArray.GetValue(1).ToString();
        string id = dRow.ItemArray.GetValue(0).ToString();

        string[] numbers = tNumbers.Split(',');

        char[] arr = new char[] { '\t', '\n' };
        int tNumberCounter= 0;

        List<string> listAccNumbers = new List<string>();

        foreach (string number in numbers)
            listAccNumbers.Add(number.TrimStart(arr));

        tNumberCounter = listAccNumbers.Count;

        string query = @"UPDATE bartran SET aNumberCounter = ? WHERE id = ?;";

        OdbcParameter[] parameters = new OdbcParameter[]{
        new OdbcParameter("?", aNumberCounter),
        new OdbcParameter("?", id)
        };

        DBServer.ExecuteQuery(query, "database_name", parameters);
    }
} 
```

这种方法有效。但是，如果要计算数千行，我会收到错误消息：

```
Can't connect to MySQL server on "localhost" (10061)" 
```

所以我在这里尝试为你们寻求帮助。我如何计算 t.Number 并根据页面加载计数更新计数器字段。提前致谢！

还有其他可行的方法吗？

```
EDIT: 
```

这是 DBServer 类：

```
using System;
using System.Data;
using System.Data.Odbc;

public static class DBServer
{
//Test
private const string Server = "localhost";
private const string Uid = "root";
private const string Pwd = "defaultpass";

//LIVE
//private const string Server = "ipaddress";
//private const string Uid = "root";
//private const string Pwd = "password";

public static DataTable GetTable(string query, string database)
{
    using (OdbcConnection cn = new OdbcConnection(
        string.Format("Driver={{MySQL ODBC 5.1 Driver}};Server={0};dataBase={1};User={2};Password={3};Option=3;",
        Server, database, Uid, Pwd)))
    {

        using (OdbcCommand cmd = new OdbcCommand(query, cn))
        {
            DataTable dt = new DataTable();

            cn.Open();

            using (OdbcDataReader rdr = cmd.ExecuteReader())
            {
                dt.Load(rdr);

                return dt;
            }
        }
    }
}

public static DataTable GetTable(string query, string database, OdbcParameter[] parameters)
{
    using (OdbcConnection cn = new OdbcConnection(
        string.Format("Driver={{MySQL ODBC 5.1 Driver}};Server={0};database={1};User={2};Password={3};Option=3;",
        Server, database, Uid, Pwd)))
    {
        using (OdbcCommand cmd = new OdbcCommand(query, cn))
        {
            if (parameters != null)
                cmd.Parameters.AddRange(parameters);

            DataTable dt = new DataTable();

            cn.Open();

            using (OdbcDataReader rdr = cmd.ExecuteReader())
            {
                dt.Load(rdr);

                return dt;
            }
        }
    }
}

/// <summary>
/// Executes query to the database (Parameterized)
/// </summary>
/// <param name="query">Query String</param>
/// <param name="database">Target Database</param>
/// <param name="parameters">Collection of parameters</param>
/// <returns>Number of affected records</returns>
public static int ExecuteQuery(string query, string database, OdbcParameter[] parameters)
{
    using (OdbcConnection cn = new OdbcConnection( string.Format("Driver={{MySQL ODBC 5.1 Driver}};Server={0};database={1};User={2};Password={3};Option=3;",
        Server, database, Uid, Pwd)))
    {
        using (OdbcCommand cmd = new OdbcCommand(query,cn))
        {
            if (parameters != null)
                cmd.Parameters.AddRange(parameters);

            cn.Open();

            return cmd.ExecuteNonQuery();
        }
    }
}

/// <summary>
/// Check if the query has record (Parameterized)
/// </summary>
/// <param name="query">Query string</param>
/// <param name="database">Target database</param>
/// <param name="parameters">Collection of parameters</param>
/// <returns>true if has record else false</returns>
public static bool HasRecord(string query, string database, OdbcParameter[] parameters)
{
    using (OdbcConnection cn = new OdbcConnection( string.Format("Driver={{MySQL ODBC 5.1 Driver}};Server={0};database={1};User={2};Password={3};Option=3;",
        Server, database, Uid, Pwd)))
    {
        using (OdbcCommand cmd = new OdbcCommand(query,cn))
        {
            if (parameters != null)
                cmd.Parameters.AddRange(parameters);               

            cn.Open();

            using (OdbcDataReader reader = cmd.ExecuteReader())
            {
                return reader.HasRows;
            }
        }
    }
}

/// <summary>
/// Check if the query has record
/// </summary>
/// <param name="query">Query string</param>
/// <param name="database">Target database</param>
/// <returns>true if has record else false</returns>
public static bool HasRecord(string query, string database)
{
    using (OdbcConnection cn = new OdbcConnection(string.Format("Driver={{MySQL ODBC 5.1 Driver}};Server={0};database={1};User={2};Password={3};Option=3;",
        Server, database, Uid, Pwd)))
    {
        using (OdbcCommand cmd = new OdbcCommand(query, cn))
        {
            cn.Open();

            using (OdbcDataReader reader = cmd.ExecuteReader())
            {
                return reader.HasRows;
            }
        }
    }
}

public static DataTable CallStoredProcedure(string query, string database, OdbcParameter[] parameters)
{
    using (OdbcConnection cn = new OdbcConnection(
        string.Format("Driver={{MySQL ODBC 5.1 Driver}};Server={0};database={1};User={2};Password={3};Option=3;",
        Server, database, Uid, Pwd)))
    {
        cn.Open();
        using (OdbcCommand cmd = new OdbcCommand(query, cn))
        {
            cmd.CommandType = CommandType.StoredProcedure;

            if (parameters != null)
                cmd.Parameters.AddRange(parameters);

            OdbcDataReader rdr = cmd.ExecuteReader();

            DataTable dt = new DataTable();

            dt.Load(rdr);

            return dt;
        }
    }
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T04:35:45.723

如果我是你，我将首先在循环内准备我的查询，并在循环后执行一次。这样，您将避免在数据库上进行多次往返。我在这里有一个具有相同想法的示例，但使用的是 VB.NET 和其他数据库类，而不是 ODBC。

```
Dim Command As New SqlCommand(_
        "insert into hilmarc_cem_items " & _
        "(CEMID, " & _
        "ItemCode, " & _
        "UnitPrice, " & _
        "Quantity, " & _
        "UOM) ", Connection)     

Dim ItemCodes() As String = Request.Form.GetValues("ItemCode")
Dim UnitPrices() As String = Request.Form.GetValues("UnitPrice")
Dim Quantities() As String = Request.Form.GetValues("Quantity")
Dim UOMs() As String = Request.Form.GetValues("UOM")

'Prepare query, do not execute yet!'
For Counter = 0 To ItemCodes.Length - 1
    Command.CommandText &= "select @CEMID, @ItemCode" & Counter & ", @UnitPrice" & Counter & ", @Quantity" & Counter & ", @UOM" & Counter & " "
    Command.Parameters.Add("@ItemCode" & Counter, Data.SqlDbType.NVarChar).Value = ItemCodes(Counter)
    Command.Parameters.Add("@Quantity" & Counter, Data.SqlDbType.Decimal).Value = Quantities(Counter)
    Command.Parameters.Add("@UOM" & Counter, Data.SqlDbType.NVarChar).Value = UOMs(Counter)
    Command.Parameters.Add("@UnitPrice" & Counter, Data.SqlDbType.Decimal).Value = UnitPrices(Counter)
    If Not Counter = ItemCodes.Length - 1 Then
        Command.CommandText &= "union all "
    Else
        Command.CommandText &= ";"
    End If
Next

'After the preparation, execute the query'
Connection.Open()
Command.ExecuteNonQuery() 
```

这个想法是有一个单一的查询，从数组中获取所有数据并将它们作为参数添加到 sqlCommand 中。在循环之后，您将执行命令 ONCE。查询将如下所示：

```
insert into myTable 
    (CEMID, 
    ItemCode,
    UnitPrice,
    Quantity, 
    UOM) 
select @CEMID, @ItemCode0, @UnitPrice0, @Quantity0, @UOM0
union all
select @CEMID, @ItemCode1, @UnitPrice1, @Quantity1, @UOM1
union all
select @CEMID, @ItemCode1, @UnitPrice1, @Quantity1, @UOM1
union all 
```

上面的代码，做批量插入，可以修改更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T04:40:32.363

不要实例化`Command`对象，也不要在每次迭代时定义*参数。*您应该尝试编写如下代码：

```
 string query = @"UPDATE bartran SET aNumberCounter = ? WHERE id = ?;";
   string cnstr=@"Driver={{MySQL ODBC 5.1 Driver}};Server=localhost;dataBase=database_name;User=root;Password=;Option=3;";
   using(OdbcConnection connection=new OdbcConnection(cnstr))
   {
    using(OdbcCommand cmd=new OdbcCommand(query,connection))
    {
    cmd.Parameters.Add("?",OdbcType.Int);
    cmd.Parameters.Add("?",OdbcType.Int);
    connection.Open();
    for (int i = 0; i < dsData.Tables["data"].Rows.Count; i++)
     {
      ...
      cmd.Parameters[0].Value=aNumberCounter;
      cmd.Parameters[1].Value=id;
      cmd.ExecuteNonQuery();
      }
    connection.Close();
    }
   } 
```

PS：你应该使用`MySql Provider API`而不是`Odbc API`.

# c# - 自定义类，将子添加到子列表并抛出异常

> ID：14132785
> 
> 赞同：2
> 
> 时间：2013-01-03T03:49:51.563
> 
> 标签：c#, exception

示例代码：

```
 public class ElementList
  {
        // some code...

        public ElementList (Element owner)
        {
              // some code...
        }

        public void Add (Element e)
        {
              if (e == owner) // cannot add child which will be self-parent
              {
                    throw new SomeException (); // main problem here
              }

              childList.Add (e);
        }
  } 
```

现在我应该抛出什么样的异常？如果您建议自定义异常，请告诉我一个好名字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T03:52:50.280

这看起来像是[ArgumentException](http://msdn.microsoft.com/en-us/library/system.argumentexception.aspx)的工作。最好将它子类化并创建自己的 - 像 ParentElementArgumentException 这样的名称将是一个足够清晰的名称 - 这样您就可以测试这个特定条件以及一般的 arg 异常（比如有人传入元素以外的东西）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T03:52:53.150

我建议`ArgumentException`，因为异常将由您的论点引起`e`

```
if (e == owner) // cannot add child which will be self-parent
{
    throw new ArgumentException(/* Include more exception details here */);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T03:54:19.963

**简而言之：** `ArgumentException`会成功的。但是，抛出可以在代码中轻松管理的异常并不是一个好习惯。

我建议重写您的代码，例如：

```
public void Add (Element e)
        {
              if (e != owner)
              {
                  // Not the owner, do your operation
                   childList.Add (e);
              }
              else {
                    // Log error message or display warning to user
                 }              
        } 
```

但是，如果您**想继续处理异常情况**，则代码可能如下所示：

```
if (e == owner) // cannot add child which will be self-parent
{
    throw new ArgumentException("Can not add child which will be self-parent");
} 
```

**编辑：**作为参考，您当然可以使用[**MSDN 文章**](http://msdn.microsoft.com/en-us/library/system.argumentexception.aspx) 进行详细了解。

# php - 32位上的PHP左移位问题

> ID：14132787
> 
> 赞同：1
> 
> 时间：2013-01-03T03:50:18.803
> 
> 标签：php, bit-shift

我遇到了一个问题，我需要在 32 位机器上执行 << 并且这个数字已经很大了。如果我改变这个大数字，答案是不正确的，有什么办法可以克服这个问题吗？

我很确定笔记本电脑正在运行 Windows7 64 位，但 PHP_INT_MAX 产生 2147483647。有没有办法将 php 设置为使用 64 位？我在这台笔记本电脑上运行 XAMPP 服务器，我必须对数字进行一些移位，如果数字移位太多次，我会得到不正确的答案。

提前致谢。杰克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T04:03:56.380

[从参考](http://php.net/manual/en/language.types.integer.php)

> 整数的大小取决于平台，尽管通常值约为 20 亿的最大值（即 32 位有符号）。64 位平台的最大值通常约为 9E18。PHP 不支持无符号整数。自 PHP 4.4.0 和 PHP 5.0.5 起，可以使用常量 PHP_INT_SIZE 确定整数大小，使用常量 PHP_INT_MAX 确定最大值。

所以不，您不能将其设置为使用 64 位。

似乎[GMP 功能](http://php.net/manual/en/intro.gmp.php)可能是您需要的。有人在[此页面](http://php.net/manual/en/ref.gmp.php)上发布了使用它们进行位移的提示：

> 此外，对于那些希望进行按位移位的人来说，这很简单......向左移动，只需将数字乘以 pow(2,x)，然后向右移动，除以 pow(2,x)。

```
<?php 
function gmp_shiftl($x,$n) { // shift left 
  return(gmp_mul($x,gmp_pow(2,$n))); 
} 

function gmp_shiftr($x,$n) { // shift right 
  return(gmp_div($x,gmp_pow(2,$n))); 
} 
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-03T08:54:40.563

```
function logical_right_shift( $val , $shft ) {
    return floor(($val / pow(2,$shft)));
}

function logical_left_shift( $val , $shft ) {
    return ($val * pow(2,$shft));
} 
```

# python - 十亿次相对进口

> ID：14132789
> 
> 赞同：1247
> 
> 时间：2013-01-03T03:50:40.633
> 
> 标签：python, import, relative-path, python-packaging, relative-import

我来过这里：

*   [http://www.python.org/dev/peps/pep-0328/](http://www.python.org/dev/peps/pep-0328/)
*   [http://docs.python.org/2/tutorial/modules.html#packages](http://docs.python.org/2/tutorial/modules.html#packages)
*   [Python 包：相对导入](https://stackoverflow.com/questions/10059002/python-packages-relative-imports)
*   [python相对导入示例代码不起作用](https://stackoverflow.com/questions/9123062/python-relative-import-example-code-does-not-work)
*   [python 2.5中的相对导入](https://stackoverflow.com/questions/8299270/ultimate-answer-to-relative-python-imports)
*   [Python 中的相对导入](https://stackoverflow.com/questions/4175534/relative-imports-in-python)
*   [Python：禁用相对导入](https://stackoverflow.com/questions/13233931/python-disabling-relative-import?rq=1)

还有很多我没有复制的 URL，一些在 SO 上，一些在其他网站上，当我认为我会很快找到解决方案时。

永远重复出现的问题是：如何解决这个“尝试在非包中进行相对导入”消息？

```
ImportError: attempted relative import with no known parent package 
```

我在 pep-0328 上构建了该软件包的精确副本：

```
package/
    __init__.py
    subpackage1/
        __init__.py
        moduleX.py
        moduleY.py
    subpackage2/
        __init__.py
        moduleZ.py
    moduleA.py 
```

导入是从控制台完成的。

我确实在相应的模块中创建了名为 spam 和 egg 的函数。自然，它没有奏效。答案显然在我列出的第 4 个 URL 中，但对我来说都是校友。我访问的其中一个 URL 上有这样的响应：

> 相对导入使用模块的名称属性来确定该模块在包层次结构中的位置。如果模块的名称不包含任何包信息（例如，它被设置为'main'），那么无论模块实际位于文件系统上的什么位置，相对导入都会被解析为好像该模块是顶级模块一样。

上面的回复看起来很有希望，但对我来说都是象形文字。所以我的问题是，如何让 Python 不返回给我“尝试在非包中进行相对导入”？据说有一个涉及-m的答案。

有人可以告诉我为什么 Python 会给出该错误消息，“非包”是什么意思，为什么以及如何定义“包”，以及*用幼儿园儿童容易理解的术语给出的准确答案*。

* * *

## 回答 #1

> 赞同：1656
> 
> 时间：2013-01-03T04:06:37.593

**脚本与模块**

这是一个解释。简短的版本是直接运行 Python 文件和从其他地方导入该文件之间存在很大差异。 **仅仅知道文件在哪个目录并不能确定 Python 认为它在哪个包中。** 另外，这取决于您如何将文件加载到 Python 中（通过运行或通过导入）。

有两种方法可以加载 Python 文件：作为顶级脚本或作为模块。`python myfile.py`如果您直接执行文件，例如通过在命令行上键入，文件将作为顶级脚本加载。`import`当在其他文件中遇到语句时，它会作为模块加载。一次只能有一个顶级脚本；顶层脚本是你运行的 Python 文件。

**命名**

当一个文件被加载时，它被赋予一个名称（存储在它的`__name__`属性中）。如果它是作为顶级脚本加载的，它的名字是`__main__`. 如果它作为一个模块加载，它的名称是文件名，前面是它所属的任何包/子包的名称，用点分隔。

因此，例如在您的示例中：

```
package/
    __init__.py
    subpackage1/
        __init__.py
        moduleX.py
    moduleA.py 
```

如果您导入`moduleX`（注意：*导入*，而不是直接执行），它的名称将是`package.subpackage1.moduleX`. 如果您导入`moduleA`，它的名称将是`package.moduleA`. 但是，如果您*直接从命令行运行* `moduleX`，它的名称将改为`__main__`，如果您直接从命令行运行`moduleA`，它的名称将是`__main__`. 当一个模块作为顶级脚本运行时，它会丢失其正常名称，而改为`__main__`.

**不通过其包含的包访问模块**

还有一个额外的问题：模块的名称取决于它是从它所在的目录“直接”导入还是通过包导入的。仅当您在目录中运行 Python 并尝试在同一目录（或其子目录）中导入文件时，这才会有所不同。例如，如果您在目录中启动 Python 解释器，`package/subpackage1`然后执行`import moduleX`，则名称`moduleX`将只是`moduleX`，而不是`package.subpackage1.moduleX`。这是因为 Python 在交互输入解释器时会将当前目录添加到其搜索路径中；如果它在当前目录中找到要导入的模块，它就不会知道该目录是包的一部分，包信息也不会成为模块名称的一部分。

一种特殊情况是，如果您以交互方式运行解释器（例如，只需键入`python`并即时开始输入 Python 代码）。在这种情况下，该交互式会话的名称是`__main__`。

现在这是您的错误消息的关键：**如果模块的名称没有点，则它不被认为是 package 的一部分**。文件在磁盘上的实际位置并不重要。重要的是它的名字是什么，它的名字取决于你如何加载它。

现在看看您在问题中包含的报价：

> 相对导入使用模块的名称属性来确定该模块在包层次结构中的位置。如果模块的名称不包含任何包信息（例如，它被设置为'main'），那么无论模块实际位于文件系统上的什么位置，相对导入都会被解析为模块是顶级模块。

**相对进口...**

相对导入使用模块的*名称*来确定它在包中的位置。当您使用类似的相对导入`from .. import foo`时，圆点表示在包层次结构中提升一些级别。例如，如果您当前模块的名称是`package.subpackage1.moduleX`，则`..moduleA`表示`package.moduleA`. 为了使 a`from .. import`起作用，模块的名称必须至少与`import`语句中的点一样多。

**...仅在包中是相对的**

但是，如果您的模块名称是`__main__`，则它不会被视为在包中。它的名字没有点，因此你不能`from .. import`在里面使用语句。如果您尝试这样做，您将收到“非包中的相对导入”错误。

**脚本无法导入相对**

您可能所做的是尝试从命令行运行`moduleX`或类似操作。当你这样做时，它的名字被设置为`__main__`，这意味着它里面的相对导入将会失败，因为它的名字并没有表明它在一个包中。请注意，如果您从模块所在的同一目录运行 Python，然后尝试导入该模块，也会发生这种情况，因为如上所述，Python 会“过早”在当前目录中找到该模块而没有意识到它是包的一部分。

还要记住，当您运行交互式解释器时，该交互式会话的“名称”始终是`__main__`. 因此**，您不能直接从交互式会话中进行相对导入**。相对导入仅用于模块文件中。

**两种解决方案：**

1.  如果您确实想`moduleX`直接运行，但仍希望将其视为包的一部分，则可以执行`python -m package.subpackage1.moduleX`. 告诉 Python将`-m`其作为模块加载，而不是作为顶级脚本加载。

2.  或者，也许您实际上并不想*运行* `moduleX`，您只想运行一些其他脚本，例如`myfile.py`，*使用*内部函数`moduleX`。如果是这种情况，请将其放在`myfile.py` *其他*位置（*不在*`package`目录中）并运行它。如果`myfile.py`你在里面做类似的事情`from package.moduleA import spam`，它会工作得很好。

**笔记**

*   对于这些解决方案中的任何一个，包目录（`package`在您的示例中）必须可以从 Python 模块搜索路径 ( `sys.path`) 访问。如果不是，您将根本无法可靠地使用包中的任何内容。

*   从 Python 2.6 开始，用于包解析目的的模块“名称”不仅取决于其`__name__`属性，还取决于`__package__`属性。这就是为什么我避免使用显式符号`__name__`来引用模块的“名称”。由于 Python 2.6 模块的“名称”是有效的`__package__ + '.' + __name__`，或者只是`__name__`如果`__package__`是`None`。）

* * *

## 回答 #2

> 赞同：70
> 
> 时间：2018-03-25T19:50:43.227

这确实是python中的一个问题。**混淆的根源是人们错误地将相对导入作为路径相对而不是相对路径。**

例如，当您在*faa.py*中编写时：

```
from .. import foo 
```

仅当*faa.py*在执行期间被python*识别并加载*为包的一部分时，这才有意义。在这种情况下，faa.py 的*模块***名称**将是 例如*some_packagename.faa*。如果文件仅仅因为它在当前目录中而被加载，那么当 python 运行时，它的名称将不会引用任何包，最终相对导入将失败。

 **在当前目录中引用模块的一个简单解决方案是使用：

```
if __package__ is None or __package__ == '':
    # uses current directory visibility
    import foo
else:
    # uses current package visibility
    from . import foo 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2018-10-05T01:08:26.917

因此，在与许多其他人一起讨论了这个问题之后，我发现了[Dorian B](https://stackoverflow.com/users/5420054/dorian-b)在[本文](https://stackoverflow.com/questions/5286210/is-there-a-way-to-access-parent-modules-in-python)中发布的一个注释，它解决了我在开发用于 Web 服务的模块和类时遇到的特定问题，但我也想成为能够在我编码时使用 PyCharm 中的调试器工具对它们进行测试。要在自包含类中运行测试，我会在类文件的末尾包含以下内容：

```
if __name__ == '__main__':
   # run test code here... 
```

但是如果我想在同一个文件夹中导入其他类或模块，我将不得不将我的所有导入语句从相对符号更改为本地引用（即删除点 (.)）但是在阅读了 Dorian 的建议后，我尝试了他的'单线'，它的工作！我现在可以在 PyCharm 中进行测试，当我在另一个被测类中使用该类时，或者在我的 Web 服务中使用它时，我可以保留我的测试代码！

```
# import any site-lib modules first, then...
import sys
parent_module = sys.modules['.'.join(__name__.split('.')[:-1]) or '__main__']
if __name__ == '__main__' or parent_module.__name__ == '__main__':
    from codex import Codex # these are in same folder as module under test!
    from dblogger import DbLogger
else:
    from .codex import Codex
    from .dblogger import DbLogger 
```

if 语句检查我们是否将此模块作为**main**运行，或者它是否正在另一个正在作为**main**测试的模块中使用。也许这很明显，但我在此处提供此注释，以防其他人对上述相关导入问题感到沮丧，可以使用它。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2017-05-06T02:08:15.153

这是一个通用配方，经过修改以适合作为示例，我现在正在使用它来处理作为包编写的 Python 库，其中包含相互依赖的文件，我希望能够在其中零碎地测试它们的一部分。让我们称之为它`lib.foo`并说它需要访问`lib.fileA`for 函数`f1`和`f2`, 和`lib.fileB`类`Class3`。

我已经包括了一些`print`电话来帮助说明这是如何工作的。在实践中，您可能希望删除它们（也许还有这`from __future__ import print_function`条线）。

这个特殊的例子太简单了，以至于我们真的需要在`sys.path`. （在我们*确实*需要它的情况下，请参阅[Lars 的回答](https://stackoverflow.com/a/38455936/1256452)，当我们有两个或更多级别的包目录时，然后我们使用- 但在这里也没有真正的*伤害*。）在没有测试。但是，如果每个导入的文件都插入相同的路径——例如，如果两者都想从包中导入实用程序——这会多次使用相同的路径，所以在样板文件中包含 是很好的。*`os.path.dirname(os.path.dirname(__file__))`*`if _i in sys.path``fileA``fileB``sys.path``if _i not in sys.path`**

 **```
from __future__ import print_function # only when showing how this works

if __package__:
    print('Package named {!r}; __name__ is {!r}'.format(__package__, __name__))
    from .fileA import f1, f2
    from .fileB import Class3
else:
    print('Not a package; __name__ is {!r}'.format(__name__))
    # these next steps should be used only with care and if needed
    # (remove the sys.path manipulation for simple cases!)
    import os, sys
    _i = os.path.dirname(os.path.abspath(__file__))
    if _i not in sys.path:
        print('inserting {!r} into sys.path'.format(_i))
        sys.path.insert(0, _i)
    else:
        print('{!r} is already in sys.path'.format(_i))
    del _i # clean up global name space

    from fileA import f1, f2
    from fileB import Class3

... all the code as usual ...

if __name__ == '__main__':
    import doctest, sys
    ret = doctest.testmod()
    sys.exit(0 if ret.failed == 0 else 1) 
```

这里的想法是这样的（请注意，这些在 python2.7 和 python 3.x 中都具有相同的功能）：

1.  如果作为`import lib`或`from lib import foo`作为从普通代码导入的常规包运行，`__package`则 is`lib`和`__name__`is `lib.foo`。我们采用第一个代码路径，导入 from`.fileA`等。

2.  如果运行为`python lib/foo.py`，`__package__`将是 None 并且`__name__`将是`__main__`。

    我们采用第二条代码路径。该`lib`目录已经存在，`sys.path`因此无需添加它。`fileA`我们从等进口。

3.  如果在`lib`目录中运行 as `python foo.py`，则行为与案例 2 相同。

4.  如果在`lib`目录中运行 as `python -m foo`，行为类似于情况 2 和 3。但是`lib`目录的路径不在 中`sys.path`，所以我们在导入之前添加它。如果我们运行 Python 然后`import foo`.

    （由于`.` *是*in `sys.path`，我们实际上不需要在此处添加绝对版本的路径。这是我们想要做的更深的包嵌套结构产生影响的地方`from ..otherlib.fileC import ...`。如果您不这样做，您可以完全省略所有`sys.path`操作。）

### 笔记

仍然有一个怪癖。如果你从外面运行这整个事情：

```
$ python2 lib.foo 
```

或者：

```
$ python3 lib.foo 
```

行为取决于`lib/__init__.py`. 如果存在且*为空*，则一切正常：

```
Package named 'lib'; __name__ is '__main__' 
```

但是，如果`lib/__init__.py` *它自己*导入`routine`以便它可以`routine.name`直接导出为`lib.name`，你会得到：

```
$ python2 lib.foo
Package named 'lib'; __name__ is 'lib.foo'
Package named 'lib'; __name__ is '__main__' 
```

也就是说，模块会被导入两次，一次通过包导入，然后再次导入，`__main__`以便它运行您的`main`代码。Python 3.6 及更高版本对此发出警告：

```
$ python3 lib.routine
Package named 'lib'; __name__ is 'lib.foo'
[...]/runpy.py:125: RuntimeWarning: 'lib.foo' found in sys.modules
after import of package 'lib', but prior to execution of 'lib.foo';
this may result in unpredictable behaviour
  warn(RuntimeWarning(msg))
Package named 'lib'; __name__ is '__main__' 
```

*警告*是新的，但警告的行为不是。这是一些人所说[的双重进口陷阱的](http://python-notes.curiousefficiency.org/en/latest/python_concepts/import_traps.html#the-double-import-trap)一部分。（有关更多详细信息，请参阅[issue 27487](https://bugs.python.org/issue27487)。） Nick Coghlan 说：

> 下一个陷阱存在于所有当前版本的 Python 中，包括 3.3，并且可以总结为以下一般准则：“永远不要将包目录或包内的任何目录直接添加到 Python 路径”。

请注意，虽然我们在此处违反了该规则，但*仅*当正在加载的文件*未*作为包的一部分加载时才这样做，并且我们的修改是专门为允许我们访问该包中的其他文件而设计的。（而且，正如我所指出的，我们可能根本不应该对单级包这样做。）如果我们想要更加干净，我们可以将其重写为，例如：

```
 import os, sys
    _i = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))
    if _i not in sys.path:
        sys.path.insert(0, _i)
    else:
        _i = None

    from sub.fileA import f1, f2
    from sub.fileB import Class3

    if _i:
        sys.path.remove(_i)
    del _i 
```

也就是说，我们修改`sys.path`了足够长的时间以实现我们的导入，然后将其恢复原状（`_i`当且仅当我们添加了 的一份副本时才删除一份`_i`）。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-06-21T02:06:19.723

这是我不推荐的一种解决方案，但在某些根本没有生成模块的情况下可能很有用：

```
import os
import sys
parent_dir_name = os.path.dirname(os.path.dirname(os.path.realpath(__file__)))
sys.path.append(parent_dir_name + "/your_dir")
import your_script
your_script.a_function() 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2021-01-06T03:33:12.557

一门外语有太多太长的答案。所以我会尽量缩短。

如果你写`from . import module`的，与你想的相反，`module`不会从当前目录导入，而是从你的包的顶层导入！如果您将 .py 文件作为脚本运行，它根本不知道顶层在哪里，因此拒绝工作。

`py -m package.module`如果你从上面的目录这样启动它`package`，那么 python 就知道顶层在哪里。这与java非常相似：`java -cp bin_directory package.class`

* * *

下一个问题：如何从当前级别导入？

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-08-08T23:18:56.890

@BrenBarn 的回答说明了一切，但如果你像我一样，可能需要一段时间才能理解。这是我的案例以及@BrenBarn 的答案如何适用于它，也许它会对您有所帮助。

**案子**

```
package/
    __init__.py
    subpackage1/
        __init__.py
        moduleX.py
    moduleA.py 
```

使用我们熟悉的示例，并添加 moduleX.py 对 ..moduleA 的相对导入。鉴于我尝试在导入 moduleX 的 subpackage1 目录中编写测试脚本，但随后得到了 OP 描述的可怕错误。

**解决方案**

将测试脚本移动到与包相同的级别并导入 package.subpackage1.moduleX

**解释**

如前所述，相对导入是相对于当前名称进行的。当我的测试脚本从同一目录导入 moduleX 时，moduleX 中的模块名称为 moduleX。当遇到相对导入时，解释器无法备份包层次结构，因为它已经在顶部

当我从上面导入moduleX时，moduleX里面的名字是package.subpackage1.moduleX，可以找到相对导入

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-01-03T04:01:16.457

`__name__`取决于相关代码是在全局命名空间中运行还是作为导入模块的一部分运行。

如果代码不在全局空间中运行，`__name__`将是模块的名称。如果它在全局命名空间中运行——例如，如果你在控制台中输入它，或者使用`python.exe yourscriptnamehere.py`then将模块作为脚本运行，那么`__name__`就变成`"__main__"`.

你会看到很多 python 代码 `if __name__ == '__main__'`用于测试代码是否从全局命名空间运行——这允许你拥有一个兼作脚本的模块。

您是否尝试从控制台进行这些导入？

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-07-19T10:28:28.483

我有一个类似的问题，我不想更改 Python 模块搜索路径，并且需要*从脚本*相对加载模块（尽管BrenBarn 在上面很好地解释了*“脚本无法导入相对于所有内容” ）。*

所以我使用了以下技巧。不幸的是，它依赖于`imp`自 3.4 版以来被弃用的模块，以支持`importlib`. （这也可能`importlib`吗？我不知道。）不过，黑客现在仍然有效。

从位于文件夹中的脚本访问`moduleX`in成员的示例：`subpackage1``subpackage2`

```
#!/usr/bin/env python3

import inspect
import imp
import os

def get_script_dir(follow_symlinks=True):
    """
    Return directory of code defining this very function.
    Should work from a module as well as from a script.
    """
    script_path = inspect.getabsfile(get_script_dir)
    if follow_symlinks:
        script_path = os.path.realpath(script_path)
    return os.path.dirname(script_path)

# loading the module (hack, relying on deprecated imp-module)
PARENT_PATH = os.path.dirname(get_script_dir())
(x_file, x_path, x_desc) = imp.find_module('moduleX', [PARENT_PATH+'/'+'subpackage1'])
module_x = imp.load_module('subpackage1.moduleX', x_file, x_path, x_desc)

# importing a function and a value
function = module_x.my_function
VALUE = module_x.MY_CONST 
```

一种更简洁的方法似乎是修改 Federico 提到的用于加载模块的 sys.path。

```
#!/usr/bin/env python3

if __name__ == '__main__' and __package__ is None:
    from os import sys, path
    # __file__ should be defined in this case
    PARENT_DIR = path.dirname(path.dirname(path.abspath(__file__)))
   sys.path.append(PARENT_DIR)
from subpackage1.moduleX import * 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-02-24T16:11:58.920

> 相对导入使用模块的名称属性来确定该模块在包层次结构中的位置。如果模块的名称不包含任何包信息（例如，它被设置为'main'），那么无论模块实际位于文件系统上的什么位置，相对导入都会被解析为好像该模块是顶级模块一样。

向 PyPi 写了一个小 Python 包，可能会帮助这个问题的观众。如果希望能够从包/项目中运行包含包含上层包的导入的 python 文件，而不直接在导入文件的目录中，则该包充当解决方法。[https://pypi.org/project/import-anywhere/](https://pypi.org/project/import-anywhere/)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2022-02-26T02:25:46.650

将[我的 SO 答案](https://stackoverflow.com/questions/63145047/cannot-get-import-to-work-with-subpackages)添加到相同的问题，因为对于包开发人员需要如何构建其导入语句与最终用户之间存在一个关键区别。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2020-11-21T00:32:50.087

另一个肮脏但有效的解决方法。假设您处于包裹的顶层。

```
import sys
from os.path import dirname, basename

if __package__ is None:
    sys.path.insert(0, '..')
    __package__ = basename(dirname(sys.argv[0]))

from . import your_module 
```

与此处的另一个答案相比，优势在于您不需要更改由 IDE 自动生成的导入。

编辑：注意！陷阱！！

*   如果您使用`sys.path.append('..')`而不是`sys.path.insert(0, '..')`，这将在此文件结构上失败。在这种情况下，`your_module.py`将被导入而不是`your_module`.

```
 your_module
      your_module.py 
```

*   你**需要**在`__init__.py`你的目录中。

* * *

## 回答 #13

> 赞同：-2
> 
> 时间：2019-01-06T10:30:00.123

为了让 Python 不返回给我“尝试在非包中进行相对导入”。

```
package/
   __init__.py
    subpackage1/
        __init__.py
        moduleX.py
        moduleY.py
    subpackage2/
        __init__.py
        moduleZ.py
    moduleA.py 
```

仅当您对父文件应用相对导入时，才会出现此错误。例如`__main__`，在您编码后 `print(__name__)`父文件已经返回`moduleA.py`

所以这个文件已经`__main__`不能再返回任何父包了。

包文件中需要相对导入，`subpackage1`并且`subpackage2`

您可以使用`..`来引用父目录或模块。但是，如果父级已经是顶级包，则它不能进一步超出该父目录（包）。您对父级应用相对导入的此类文件只能与绝对导入应用一起使用。

如果您在父包中使用绝对导入，则不会出现错误，因为即使您的文件位于子包中，python 也知道谁在包的顶层，因为`$PYTHONPATH`它定义了项目的顶层。

* * *

## 回答 #14

> 赞同：-2
> 
> 时间：2021-07-15T12:11:15.303

按照示例：

```
package/
    __init__.py
    subpackage1/
        __init__.py
        moduleX.py
    moduleA.py 
```

*   在脚本顶部添加以下行。

    ```
    # For relative imports to work
    import sys 
    ```

*   现在根据您要从哪里导入模块，添加以下行并在每次导入之前修改点。在我们的示例中，我们`moduleA`从`moduleX`.

    ```
    sys.path.append("..")
    import moduleA 
    ```

自从 OP 提出这个问题以来已经 8 年了，并且在这些年之后，Python 并没有在他们的更新中解决这个问题。

相对导入不起作用，因为在运行脚本时，它认为它的名字是`__main__`而不是`filename.py`。****

# asp.net - SimpleMembership 与 ASP.Net Web 应用程序（没有 MVC，没有 RAZOR。只是标准的 .net Web 项目）

> ID：14132790
> 
> 赞同：0
> 
> 时间：2013-01-03T03:50:40.033
> 
> 标签：asp.net, web-applications, security, simplemembership

我在我的项目中实施 SimpleMembership 时遇到问题。基本上，我找不到任何有关限制访问页面的信息。这是我到目前为止所做的：

1.  我有一个名为 default.aspx 的登录页面。通过将其添加到 web.config，我已经能够将 SimpleMembership 配置为识别 default.aspx 作为我的登录页面：

> ```
> <appSettings>
>     <add key="loginUrl" value="default.aspx" />
> </appSettings> 
> ```

1.  我的 default.aspx 中有一个 WebMethod，用于通过 WebSecurity.Login 验证用户凭据。我通过 jquery ajax 调用 WebMethod：

> ```
> [WebMethod, ScriptMethod]
> public static bool Login(string userName, string password)
> {
>     return SecurityManager.Instance.Login(userName: userName, password: password);
> } 
> ```

1.  在我的 jquery 代码的 ajax 成功处理程序中，我将用户重定向到另一个应受保护的页面（home.aspx）：

> ```
> success: function (data, textStatus, jqXHR) {
>     if (data.d) {
>         window.location.href = "home.aspx";
>     }
>     else {
>         $("#invalidCredentialsBox").css("visibility", "visible");
>     }
> }, 
> ```

问题是，如果我尝试直接（从浏览器）访问 home.aspx，它实际上会加载。那么，我该怎么做才能使 SimpleMembership 限制对 home.aspx 的访问，直到用户成功登录？

我必须做的，不知道它是否是正确的解决方案，它是在 app_code 文件夹中创建一个基类。该类继承自*System.Web.UI.Page*，然后我将 home.aspx 更改为从该基类继承。在基类的构造函数中，我正在检查 WebSecurity.IsAuthenticated 属性，如果它为*假*，那么我对我的 error.aspx 页面执行 Response.Redirect：

> ```
> namespace MyProject
> {
>     public class BasePage : System.Web.UI.Page
>     {
>         public BasePage()
>         {
>             if (!SecurityManager.Instance.IsAuthenticated())
>             {
>                 HttpContext.Current.Response.Redirect("error.aspx");
>             }
>         }
>     }
> } 
> ```

以这种方式，它可以工作，但我觉得这不是实现它的正确方法。我发现的所有示例都使用 MVC，但我不是，实际上我对 MVC 几乎一无所知。请有人给出一些想法或指出我与.net web 项目一起使用 SimpleMembership 的相同文档/示例吗？

此外，还有哪些其他属性对 SimpleMembership 有效，我可以添加到 web.config 的 appSettings 部分？并且，如何设置 web.config 的身份验证部分以使用 SimpleMembership（我在 MVC 4 模板中看到，即使它使用 SimpleMembership，它仍然在 web.config 中设置表单身份验证部分）

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T04:13:47.843

不要将授权与身份验证混淆。

授权决定谁可以访问什么。

你可以设置如下

```
<authorization>
  <allow users="Kim"/>
  <allow roles="Admins"/>
  <deny users="John"/>
  <deny users="?"/>
</authorization> 
```

参考：[Asp.net 授权](http://msdn.microsoft.com/en-us/library/wce3kxhd%28v=vs.100%29.aspx)

成员资格提供者负责[身份验证](http://msdn.microsoft.com/en-us/library/eeyk640h%28v=vs.100%29.aspx)。它的职责只是验证用户是他声称的那个人。

如果您网站的某个部分需要不同的授权规则，例如登录页面、默认页面或每个人都可以访问的公共文件夹，您可以使用[location](http://msdn.microsoft.com/en-us/library/b6x6shw7%28v=vs.71%29.aspx)元素为其创建一个部分。

这将允许所有用户访问 Logon.aspx，即使站点的其余部分受到限制。

```
 <location path="Logon.aspx">
      <system.web>
         <authorization>
            <allow users="*"/>
         </authorization>
      </system.web>
   </location> 
```

# mysql - 如何从两个不同的表中触发？

> ID：14132793
> 
> 赞同：0
> 
> 时间：2013-01-03T03:51:01.710
> 
> 标签：mysql, sql, database, triggers

如何使触发器从两个不同表中的两个单独属性中读取，然后进行计算。

这是我想要制作的代码，但 mysql 说它有问题

```
CREATE TRIGGER `fee_calculate` BEFORE INSERT ON `BookingRoom`
FOR EACH ROW BEGIN 
SET NEW.fee = `Booking.Night_Qty` *  `Room.RoomPrice` ;
END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T04:51:25.963

我认为它应该可以帮助你

我做了一些假设：

1.  我假设您想使用与 Products 表匹配的 productID 更新 reorders 表。（您可以进行插入，但可能会遇到 PK 问题，具体取决于您设置表格的方式）。
2.  我假设重新订购的金额将放在那里。
3.  我没有包括交易语句，我建议添加这些以便记录。

CREATE trigger updateprod on Products for update as begin 声明 @qtyonhand int, @reorder int if update(QtyonHand) begin select @qtyonhand = QtyonHand,@reorder = ReorderAmount from insert if @qtyonhand < @reorder begin update Reorders set ReorderAmount = @reorder, ReorderDate = getdate() end else if @qtyonhand >= @reorder begin 从重新订购中删除 ProductID = ProductID end end end

# java - 如何将 google 身份验证令牌（在 iOS 中获得）传递给 google-app-engine web servlet？

> ID：14132795
> 
> 赞同：2
> 
> 时间：2013-01-03T03:51:13.633
> 
> 标签：java, objective-c, ios, google-app-engine, oauth-2.0

我是网络服务器编程的新手，所以也许我做错了，但这就是我想要做的：

1.  用户使用本机 iOS 应用对服务器“https://www.googleapis.com/auth/plus.me”进行身份验证。我正在使用 [GTMOAuth2 类](http://code.google.com/p/gtm-oauth2/)来处理授权。我已成功检索到有效令牌，因此这部分有效。

2.  我现在正在尝试使用我在步骤 1 中获得的身份验证令牌将 JSON 数据作为经过身份验证的用户发布到 google-app-engine web servlet。这是我正在使用的代码：

    ```
    - (void)postDictionary:(NSMutableDictionary *)dict toURL:(NSMutableString *)urlString     withAuthToken:(GTMOAuth2Authentication *)authToken delegate:(id)connectDelegate
    {

    if( ![NSJSONSerialization isValidJSONObject:dict] )
    {
        NSLog(@"JSON Data is Invalid!");
        return;
    }
    NSData *jsonData = [NSJSONSerialization dataWithJSONObject:dict
                                                   options:0 error:nil];
    NSMutableString *serverURL = [[NSMutableString alloc] initWithString:urlString];
    //DEBUG
    NSLog(@"sent URL: %@", serverURL);

    NSURL *url = [[NSURL alloc] initWithString:serverURL];
    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:url];

    // Execute URL Asynchronously
    // Make sure we "Post" the data to the server
    [request setHTTPMethod:@"POST"];
    [request setHTTPBody:jsonData];
    [request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
    [request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
    [request setValue:@"json" forHTTPHeaderField:@"Data-Type"];
    [request setValue:[NSString stringWithFormat:@"%d",
                   [jsonData length]] forHTTPHeaderField:@"Content-Length"];

    // We need to send the authentication information to the server.
    [request setValue:CLIENT_ID forHTTPHeaderField:@"client_id"];
    [request setValue:CLIENT_SECRET forHTTPHeaderField:@"client_secret"];
    [request setValue:authToken.accessToken forHTTPHeaderField:@"Authorization: GoogleLogin auth"];
    // Make sure we can authenticate on HTTP instead of just HTTPS
    authToken.shouldAuthorizeAllRequests=YES;   // USED FOR TESTING ON LOCALHOST ONLY!!!

    // Let's Try the Fetcher method...
    GTMHTTPFetcher* myFetcher = [GTMHTTPFetcher fetcherWithRequest:request];
    [myFetcher setAuthorizer:authToken];
    [myFetcher beginFetchWithDelegate:self
                didFinishSelector:@selector(myFetcher:finishedWithData:error:)];
     return;
    } 
    ```

目前我试图发布到的服务器正在“http://localhost:8888/mywebapp”上运行。

1.  在 Web 服务器上，我正在尝试使用以下 java 代码对用户进行身份验证：

    ```
    public void doPost(HttpServletRequest req, HttpServletResponse resp)
                throws IOException {
    // Perform Authentication...
    UserService userService = UserServiceFactory.getUserService();
    User user = userService.getCurrentUser();

    if( user != null ) {
        System.out.println("User: "+user.getNickname());
    } else {
        sendError( "You must login first!",  resp );
        return;
    }
    ... 
    ```

UserService 从不表示用户已登录。我尝试了几种不同的方法，但都没有成功。我的应用程序刚刚收到“您必须先登录！” 错误信息。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T21:22:53.970

我解决了我的问题。

1.  我不得不切换到 OAuth 1 协议而不是 OAuth 2 协议。根据我阅读的文档，Google App Engine 尚不支持 OAuth 2（有人知道不同吗？）。所以我在我的 iOS 应用程序中使用了库[GTM-OAUTH而不是 GTM-OAUTH2 库。](http://code.google.com/p/gtm-oauth/ "GTM-OAUTH")我使用“OAuthSampleTouch”示例作为使用该库的基础。

2.  [我需要使用https://accounts.google.com/managedomains](https://accounts.google.com/managedomains)向 Google 注册我的 google-app-engine URL 。这给了我一个 ConsumerKey 和 ConsumerSecret，我可以在调用 GTM-OAUTH 库时在我的 iPhone 应用程序中使用。

3.  我修改了我的 GAE 服务器代码以使用 OAUTH 令牌：

    ```
    public void doPost(HttpServletRequest req, HttpServletResponse resp)
        throws IOException {
    // Perform Authentication...
      User user = null;
      try {
      OAuthService oathService = OAuthServiceFactory.getOAuthService();
      user = oathService.getCurrentUser();
      System.out.println("Logged in! YAY!!!");
      } catch (OAuthRequestException e) {
         System.out.println("Authentication Failed! "+e);
      }
      ... 
    ```

我还将令牌附加到 URL 中，我不确定这是否需要......

示例：URL="https://my-app.appspot.com/myservlet?token=XXXXXXXXXXXXXXXX"

# sharepoint - 属性问题后具有自定义内容类型的 SharePoint 工作流任务

> ID：14132802
> 
> 赞同：1
> 
> 时间：2013-01-03T03:52:37.910
> 
> 标签：sharepoint, sharepoint-workflow

我为“纠正措施”制定了工作流程。在这里，颁发者将向用户颁发 CA。如果他对此作出答复，则批准人应对其进行审查。在这里，对于审批者，我为任务创建了一个名为“CA Review”的内容类型，我在其中添加了一个下拉字段“Outcome”。

在工作流中，对于审阅任务，在调用方法中，我将内容类型附加到任务。这工作正常，我可以在任务编辑表单中看到“结果”。

如果任务更改，我需要“结果”的值来设置其他字段。在这里，我正在使用任务更改事件的属性之后。但这会返回“null”。这是我获取结果值的代码。

```
private void checkTheRespondeApproval(object sender, ConditionalEventArgs e)
    {
        var props = this.onReviewTaskChanged_AfterProperties1.ExtendedProperties[GetWorkflowFieldId("Outcome")];
        e.Result = (props.ToString() == "Approved");
    } 
```

这里的“道具”正在变得“空”。请帮助我获得结果值。“GetWorkflowFieldID”的代码如下；

```
private Guid GetWorkflowFieldId(string pFieldName)
    {
        foreach (SPField item in workflowProperties.Item.Fields)
        {
            if (item.Title == pFieldName)
                return item.Id;
        }

        return Guid.Empty;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T02:40:54.353

好了朋友们，

我找到了答案。问题在于我正在寻找错误集合的字段 ID。我应该得到内容类型的字段 id。下面是我写的获取ID的函数。它现在正在工作。

```
private Guid GetContentTypeFileID(string pFieldName)
    {
        foreach (SPField item in workflowProperties.Web.ContentTypes["CAReview"].Fields)
        {
            if (item.Title == pFieldName)
                return item.Id;
        }

        return Guid.Empty;
    } 
```

我希望这对你也有帮助。

# php - 将正确的参数传递给 PHP 中的变量方法

> ID：14132805
> 
> 赞同：0
> 
> 时间：2013-01-03T03:53:11.403
> 
> 标签：php, api-design

我正在设置一个 PHP API，它将向我的用户公开功能并向我的用户提供数据，并且我正在寻找一种优雅的方式来将我的用户“传递”给我的参数传递给我的函数。我可以确定我的用户正在调用什么方法 ($_POST['method'])，并且根据方法，该方法的零个或多个参数。我使用元数据数组验证它们。例如：

```
$methods = array(
   'say_hello' => array('name'),
   'say_goodbye' => array(),
   'do_something' => array( 'foo', 'bar' )
); 
```

我对这些有相应的功能：

```
function say_hello( $name ) { printf( "Hello, %s, $name ); }
function say_goodbye() { printf( "Goodbye!" ); }
function do_something( $foo, $bar ) { printf( "%d + %d = %d.", $foo, $bar, $foo+$bar ); } 
```

当一个 POST 进来时，我检查他们请求的方法是我的一个数组键（所以他们没有传入 $_POST['method'] = 'exec' 或任何邪恶的东西），我可以做实际调用为：

```
$method = $_POST['method'];
$method(); // make the call 
```

并且知道该方法还可以让我确定应该包含哪些参数（如果有的话）：

```
$args = $methods[ $method ]; // an array of 0-2 items 
```

但是有没有一个好方法可以让我在没有大的 if-elseif-elseif-... 的情况下结合它？

```
if( 'say_hello'==$method )
    $method( $_POST['name'] );
elseif( ... )
   ... 
```

我想要做的是像 Python 这样的`myfunc(*args)`东西，这会让我以某种方式完成：

```
$method = $_POST['method'];
$args = $methods[ $method ];
$method( $args ); 
```

现在，我最好的办法是在方法中加载参数：

```
function do_something()
{
     $foo = $_POST['foo'];
     $bar = $_POST['bar'];
     ... 
```

# javascript - Kinetic JS：将填充图像应用于多边形时淡入淡出？

> ID：14132808
> 
> 赞同：2
> 
> 时间：2013-01-03T03:53:32.190
> 
> 标签：javascript, canvas, html5-canvas, kineticjs

我现在正在玩 Kinetic JS，下面是一个例子：

[http://jsfiddle.net/r8rtJ/4/](http://jsfiddle.net/r8rtJ/4/)

```
var yoda = new Kinetic.Image({
    x: 0,
    y: 0,
    image: imageObj,
    width: 106,
    height: 118,
    scale: 2
});
poly.setFill({
image: imageObj,
offset: {x: 0, y: 0}
}); 
```

而且我想知道一旦加载了对象，是否有办法**淡化图像填充的不透明度？**目前它只适用于多边形，我似乎无法弄清楚如何独立于对象本身设置填充的不透明度。

干杯!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T10:25:51.010

`setFill`只是告诉多边形对象在应该绘制自己时应该用什么填充自己。这可以是图像或颜色。

要设置绘制多边形的不透明度，您拥有该`opacity`属性。您可以通过将超时与增加多边形不透明度并重绘它的函数相结合来实现您想要实现的目标。

```
var fadeIn = function(shape) {
    var o = shape.getOpacity();
    o = o + 0.1 >=1 ? 1 : o + 0.1;
    shape.setOpacity(o);
    shape.getLayer().draw();
    if(o !== 1) {
        setTimeout(function() {
                fadeIn(shape);
            }, 120);
    }
}; 
```

**[例子](http://jsfiddle.net/yhxPW/)**。

**编辑**：

目前在 KinectJS 中似乎没有办法设置填充的不透明度。不过，我一直在尝试查看是否可以找到解决方法。

正如您所提到的，一种方法是绘制另一个仅具有笔划的多边形，并在具有填充的多边形上空填充，并在淡入完成后删除笔划多边形。

**[例子](http://jsfiddle.net/X42VS/8/)**。

另一种方法是更改`drawFunc`​​特定多边形的 。

每当调用特定层的`draw`函数时`drawScene`，`drawHit`都会为其所有子层调用函数。`drawScene`和调用对象的`drawHit`函数。在调用之前根据形状的不透明度设置.`Kinetic.Shape``drawFunc``drawScene``globalAlpha``drawFunc`

设置的方式`drawFunc`是`Kinetic.Polygon`首先在多边形的边的上下文上形成一条路径。然后它被填充，然后是描边。填充的方式就是简单的`fillStyle`根据多边形的填充设置上下文的，然后`context.fill`调用。

图像的填充样式是如何设置的？当`setFill`为多边形调用并且作为参数传递的对象具有属性`image`时，`fillType`被认为是`'PATTERN'`。当`drawFunc`要填充路径时，使用图像创建图案`context.createPattern`并将其设置为填充样式。从不考虑不透明度。

但是，我们可以通过改变它来让一个特定的多边形考虑填充的不`drawFunc`透明度`setDrawFunc`。我只是`drawFunc`从 KinectJS 源中复制了`setFill`.

**[例子](http://jsfiddle.net/6Udzj/2/)**。

请注意，尽管如此，这会`mouseover`因某种原因中断事件。最好坚持方法一，直到我或其他人，就此而言，弄清楚是什么导致更改`mouseover`时不起作用。`drawFunc`

**编辑 2**：

我设法弄清楚了！

多边形的`drawHitFunc`与其 相同`drawFunc`。因此，当我们更改 时`drawFunc`，我们最终会更改 ，`drawHitFunc`这会在需要命中检测时产生问题——就像`mouseover`事件一样。

因此，当我们更改`drawFunc`多边形的 时，如果我们也更改`drawHitFunc`with`setDrawHitFunc`以使其与**原始** `drawFunc`相同，我们可以避免破坏命中检测。

**[例子](http://jsfiddle.net/hZqeA/)**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T03:41:44.087

是的，有办法做到这一点。使用 transitionTo 方法来淡化形状不透明度，如下所示：

[http://www.html5canvastutorials.com/kineticjs/html5-canvas-linear-transition-tutorial-with-kineticjs/](http://www.html5canvastutorials.com/kineticjs/html5-canvas-linear-transition-tutorial-with-kineticjs/)

如果你想应用一个笔触，它一直保持不透明，你可以简单地创建另一个形状，只有一个笔触，它位于填充有图像的形状的顶部

# php - MySQL where 条件子句显示特定年龄

> ID：14132810
> 
> 赞同：0
> 
> 时间：2013-01-03T03:53:35.480
> 
> 标签：php, mysql, conditional-statements

所有 Mysql 查询似乎都适用于我表中“年龄”的完美预期条件。例如我需要年龄来过滤这个条件从`age >=20`to `age <=30`，everting 似乎工作但不是年龄。

例如检查这里[的链接一个链接](http://shaadimubarakh.com/display_Search.php)

```
$sql = "SELECT * FROM  `file_records` 
           WHERE  (`country` = '$country' OR '$country' IS NULL) 
               OR (`gender` = '$gender' OR'$gender' IS NULL) 
               OR (`cast` = '$cast' OR '$cast' IS NULL) 
               OR (
                   (`age` >= '$age_from' OR   '$age_from' IS NULL) 
                     AND (`age` <= '$age_to' OR '$age_to' IS NULL)
                  ) 
           LIMIT 0 , 30"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T03:57:00.400

您可以使用 mysql [BETWEEN](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#operator_between)函数，例如

```
age BETWEEN 20 AND 30 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T03:58:24.083

您正在检查 >= 的 from 和 to date .. 试试这个 ..

```
$sql = "SELECT * FROM  `file_records` 
         WHERE (`country` = '$country' OR '$country' IS NULL) 
           OR (`gender` = '$gender' OR' $gender' IS NULL) 
           OR (`cast` = '$cast' OR '$cast' IS NULL) 
           OR ((`age` >= '$age_from' OR '$age_from' IS NULL) 
                AND (`age` <= '$age_to' OR '$age_to' IS NULL)) 
         LIMIT 0 , 30"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T03:59:39.790

您可以像这种格式一样在和运算符之间选择年龄

```
SELECT column_name(s)
FROM table_name
WHERE age
BETWEEN age >=20 and age <=30 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T04:11:50.920

如果你`echo $sql;`，你会发现这是不可能的 `'' IS NULL`。

你想要类似的东西

```
OR ((`age` >= '$age_from' OR '$age_from' = '') 
            AND (`age` <= '$age_to' OR '$age_to' = '')) 
```

# mysql - MySQL - 根据另一个表从一个表中选择

> ID：14132811
> 
> 赞同：0
> 
> 时间：2013-01-03T03:53:45.053
> 
> 标签：mysql

我在数据库中有 10 个用户。每个用户都可以发布任意数量的链接。每个用户都可以看到其他用户发布的所有链接。

如果一个用户点击一个链接，例如：google.com，他将不会再看到它，但那些没有点击该链接的用户，他们仍然可以点击该链接。

为此，我有 2 个表（也许它们构建得很糟糕，除了它们与外键无关）。

链接已发布

```
id   |   link   |   user
1        g.com      john
2        h.com      patrick
... 
```

点击次数

```
id   |   link   |   user
1        g.com      jack
2        h.com      nick
... 
```

因此，所有发布的链接都可以被其中的所有用户看到。每次发布链接时，都会将其添加到 linksPosted 表中。好的。然后，例如，如果 Jack 点击 g.com，Jack 将能够看到来自其他用户的其他链接，但 g.com 不会再次为他出现，因为他已经点击了它，但 Nick 将能够点击 g。 com，因为他没有点击它。

如何在 SQL 查询中执行此操作？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T05:02:44.793

要获取对 jack 可见的链接，请使用以下查询

```
 select * from linksposted linktbl where linktbl.link not in(select 
    clickstbl.link from clicksmade clickstbl where clickstbl.user='jack') 
```

或者你可以使用

```
 select linktbl.id,linktbl.link,linktbl.`user` from linksposted linktbl 
   left join clicksmade clickstbl on linktbl.link=clickstbl.link and
   clickstbl.user='jack' where clickstbl.link is null 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T04:00:29.187

我认为您可以通过在选择中添加“NOT IN”来解决这个问题...“例如，从 id NOT IN 的 linksPosted 中选择 *（SELECT id FROM clicks made where user = $myuser）”请注意，这真的很快和肮脏的解决方案......更好的解决方案是外部连接。我认为这类似于 select * from linksposted l right outer join clicksmade c on c.id = l.id 但你必须对此进行一些研究......但这将是正确的方向

# ruby-on-rails - 试图安装橡胶宝石，Nokogiri 搞砸了？

> ID：14132812
> 
> 赞同：4
> 
> 时间：2013-01-03T03:53:53.190
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, gem, nokogiri

我正在尝试安装橡胶宝石。几天前，我在玩弄 Nokogiri，但无法正确安装。我忘了它，因为它不紧迫。好吧，现在我正在尝试安装橡胶宝石，并且遇到了这些让我感到困惑的错误，它们似乎与 Nokogiri 有关，据我所知没有安装。帮帮我，谢谢。

```
@THRILLHO:~$ gem install rubber
Building native extensions.  This could take a while...
ERROR:  Error installing rubber:
    ERROR: Failed to build gem native extension.

        /home/noonan/.rvm/rubies/ruby-1.9.3-p327/bin/ruby extconf.rb
checking for libxml/parser.h... no
-----
libxml2 is missing.  please visit http://nokogiri.org/tutorials/installing_nokogiri.html for help with installing dependencies.
-----
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/home/noonan/.rvm/rubies/ruby-1.9.3-p327/bin/ruby
    --with-zlib-dir
    --without-zlib-dir
    --with-zlib-include
    --without-zlib-include=${zlib-dir}/include
    --with-zlib-lib
    --without-zlib-lib=${zlib-dir}/lib
    --with-iconv-dir
    --without-iconv-dir
    --with-iconv-include
    --without-iconv-include=${iconv-dir}/include
    --with-iconv-lib
    --without-iconv-lib=${iconv-dir}/lib
    --with-xml2-dir
    --without-xml2-dir
    --with-xml2-include
    --without-xml2-include=${xml2-dir}/include
    --with-xml2-lib
    --without-xml2-lib=${xml2-dir}/lib
    --with-xslt-dir
    --without-xslt-dir
    --with-xslt-include
    --without-xslt-include=${xslt-dir}/include
    --with-xslt-lib
    --without-xslt-lib=${xslt-dir}/lib
    --with-libxslt-config
    --without-libxslt-config
    --with-pkg-config
    --without-pkg-config
    --with-libxml-2.0-config
    --without-libxml-2.0-config
    --with-libiconv-config
    --without-libiconv-config

Gem files will remain installed in /home/noonan/.rvm/gems/ruby-1.9.3-p327/gems/nokogiri-1.5.6 for inspection.
    Results logged to /home/noonan/.rvm/gems/ruby-1.9.3-p327/gems/nokogiri-1.5.6/ext/nokogiri    /gem_make.out 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T04:04:12.380

这样做：`sudo apt-get install libxslt-dev libxml2-dev`然后再次安装橡胶

错误信息非常清楚：缺少 libxml2。请访问[http://nokogiri.org/tutorials/installing_nokogiri.html](http://nokogiri.org/tutorials/installing_nokogiri.html)以获取安装依赖项的帮助。

# python - 什么可能导致这个生成器表达式被破坏？

> ID：14132819
> 
> 赞同：1
> 
> 时间：2013-01-03T03:54:32.460
> 
> 标签：python, ipython

> **可能重复：**
> [带有生成器的 Python 内置“全部”](https://stackoverflow.com/questions/7491951/python-builtin-all-with-generators)

我在 IPython 中遇到了以下可重现的行为：

```
def test(lst):
    for val in (v is not None for v in lst):
        print val
    print all(v is not None for v in lst)
    print
    print [v is not None for v in lst]
    print all([v is not None for v in lst])
    print
    print
    for val in (v is None for v in lst):
        print val
    print all(v is None for v in lst)
    print
    print [v is None for v in lst]
    print all([v is None for v in lst])

>>> test([1])
True
True

[True]
True

False
True

[False]
False 
```

该错误最初出现在一个更大的算法中，但它减少到上述测试用例。

现在这个输出显然是错误的，但我不知道发生了什么。如果我在标准 python shell 中重复，它会给出预期的输出。

## 补充说明

第三组打印语句显示错误： `all(v is None for v in [1])`应该返回**True**，而不是 False。

IPython 运行时加载了很多对象（价值约 1.5GB，大多数低于一个父对象）。如果我关闭所有内容并重新启动，错误就会消失，但如果重新加载我的数据，它会再次出现。

我的想法是肯定发生了一些内存损坏，但我对它可能是什么感到困惑。有任何想法吗？

# android - 亚马逊在应用计费中未调用回调

> ID：14132824
> 
> 赞同：3
> 
> 时间：2013-01-03T03:55:04.917
> 
> 标签：android, amazon, in-app-billing

我已经被这个问题困扰了好几个小时了。我在应用计费库中使用亚马逊。我已经成功设置了 Amazon App Tester，并且正在使用 buttonclicker 示例的 sdktester.json 文件。

在我的代码中，我注册了 BasePurshasingObserver，但除了 onSdkAvailable 之外不调用回调。

PurchasingManager.registerObserver(new BillingObserver(context .getApplicationContext()));

类 BillingObserver 扩展 BasePurchasingObserver {

```
 public BillingObserver(Context arg0) {
        super(arg0.getApplicationContext());
    }

    @Override
    public void onGetUserIdResponse(GetUserIdResponse arg0) {
        // TODO Auto-generated method stub
        super.onGetUserIdResponse(arg0);
    }

    @Override
    public void onItemDataResponse(ItemDataResponse arg0) {
        // TODO Auto-generated method stub
        super.onItemDataResponse(arg0);
    }

    @Override
    public void onPurchaseResponse(PurchaseResponse arg0) {
        // TODO Auto-generated method stub
        super.onPurchaseResponse(arg0);
    }

    @Override
    public void onPurchaseUpdatesResponse(PurchaseUpdatesResponse arg0) {
        // TODO Auto-generated method stub
        super.onPurchaseUpdatesResponse(arg0);
    }

    @Override
    public void onSdkAvailable(boolean arg0) {
        // TODO Auto-generated method stub
        super.onSdkAvailable(arg0);
        PurchasingManager.initiateGetUserIdRequest();

    }

} 
```

我无法获取对象 GetUserIdResponse，因为未调用回调 onGetUserIdResponse，即使当我尝试购买时，我也看到黑色插页式广告，单击，查看 sdk 测试器中的交易，但也未调用 onPurshaseResponse。

我已将接收器放在清单中，（还有一个谷歌计费接收器，我试图将其删除但没有任何反应）

我删除了 progard.cfg 文件，因为我认为 mybe 混淆是没有成功的问题。任何想法，我都没有选择了:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:02:14.833

您必须在清单中声明您的接收器，并且通常它会起作用

```
<receiver android:name="*************************">
            <intent-filter>
                <action android:name="*********************"
                    android:permission="**************" />
            </intent-filter>
        </receiver> 
```

# android - 运行此代码时出现 NullPointerException

> ID：14132828
> 
> 赞同：1
> 
> 时间：2013-01-03T03:55:36.390
> 
> 标签：android, nullpointerexception

所以在这段代码中，我试图根据通过我的查询检索一个游标`showResults()`，然后创建一个`adapter`and `loadermanager`。我觉得问题是由我的`SimpleCursorAdapter`构造函数中的布局和 id 引起的，因为错误是在我创建布局和 id 时开始的。我使用 Log 和 if 语句来查看游标是否为 null 并且 logcat 上没有显示任何内容，所以这一定意味着游标很好。

```
public class SearchResultsActivity extends FragmentActivity implements LoaderManager.LoaderCallbacks<Cursor> {

private ListView list;
private DatabaseTable db;
private SimpleCursorAdapter mAdapter;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_search_results);
    db = new DatabaseTable(this);
    handleIntent(getIntent());
}

public void onNewIntent(Intent intent) {
    setIntent(intent);
    handleIntent(intent);
}

private void handleIntent(Intent intent) {
     if (Intent.ACTION_SEARCH.equals(intent.getAction())) {
        String query = intent.getStringExtra(SearchManager.QUERY);
        showResults(query);
    }

}

private void showResults(String query) {
    db = new DatabaseTable(this);
    Cursor cursor = db.getContactMatches(query, null);
    list = (ListView)findViewById(android.R.id.list);
    mAdapter = new SimpleCursorAdapter(this, android.R.layout.simple_list_item_1, 
            null, new String[] {DatabaseTable.COL_NAME}, new int[] {android.R.id.text1}, 0);
    getLoaderManager().initLoader(0, null, this);
    list.setAdapter(mAdapter);
    list.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
            Intent contactIntent = new Intent(getApplicationContext(), ContactActivity.class);
            contactIntent.setData(getIntent().getData());
            startActivity(contactIntent);
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T04:04:00.877

由于您的代码在线崩溃`list.setAdapter(mAdapter);`，`list`因此给您一个空指针是唯一有意义的对象。

经过进一步检查，很明显您`list`在最初声明后没有分配。`onCreate()`您需要在之后添加类似这样的内容`setContentView()`：

```
list = (ListView) findViewById(android.R.id.list); 
```

*（如果您的对象有 ，这就是您访问它的方式`android:id="@android:id/list"`；如果您分配了自己的 ID，请`R.id.your_id_here`改用。）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T04:04:02.610

这可能是您的错误：

```
mAdapter = new SimpleCursorAdapter(this, android.R.layout.simple_list_item_1, 
            null, new String[] {DatabaseTable.COL_NAME}, new int[] {android.R.id.text1}, 0); 
```

该适配器需要`Cursor`在您传入`null`参数的位置传入构造函数，如下所示：

```
mAdapter = new SimpleCursorAdapter(this, android.R.layout.simple_list_item_1, 
            cursor, new String[] {DatabaseTable.COL_NAME}, new int[] {android.R.id.text1}, 0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T04:04:28.783

在查询之前先尝试获取可读数据库：

```
db = new DatabaseTable(this);
Cursor cursor = db.getReadableDatabase().getContactMatches(query, null); 
```

# html - 纯 HTML 提交按钮仅在第二次单击后传递给控制器

> ID：14132829
> 
> 赞同：0
> 
> 时间：2013-01-03T03:55:39.663
> 
> 标签：html, spring-mvc

我的纯 HTML 中有许多提交按钮。一个不起作用如下：- 另一个与下面相同

```
<form:submit cssClass="action-button" name="excelBTNX" value="Excel" id="excelBTNX" />
```

控制器中上述按钮的功能是创建一个excel表并放入会话（我可以从cookies下载）并返回。

Controller中对应方法的定义与其他正常工作的按钮相同。

问题是，它仅在偶数命中时有效。当我第一次单击页面时，页面会被刷新。当我第二次单击时，控制权传递给控制器​​，我的 excel 以 cookie 的形式出现。

我尝试使用 javaScript 代码跟踪提交是否有效

```
     $('form').submit(function(){
     alert("事件被触发");
});

```

并为这两种情况发出警报。

我已经从控制器（手动）完成了验证部分，因此不使用本地内置验证器。所以我相信他们不是这样的。

我如何解决它 ？

控制器代码：-

```
 @RequestMapping(value = "execute.action", method = RequestMethod.POST, params = "excelBTNX")
public String excelOut(HttpServletRequest request, HttpServletResponse response,
        @ModelAttribute("mymodel") myModel model, BindingResult bindingResult, ModelMap modelmap) {

    scr14(request).initializeSomeCalculation(model);// some innercalss called to manupulate model
    HttpSession session = request.getSession(false);

    if(1=1){//CRUD condition here true in READ mode.
        model= new myModel ();
    }

    byte[] excel = createExcelS14(model,request);
    String fileName = getExcelName() + ".xls";
    String filepath = myFrameWorkUtils.createTempFile(excel, fileName);
    if (session != null) {
        session.setAttribute(fileDownload, filepath);
    }
  scr14(request).initializeSomeCalculation(model);
    model.setDate(somedate);
    return "myPanel";} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T04:28:12.517

以下是一些步骤：

*   检查此问题是否与您的 Excel 处理有关，或者是否与您的控制器有关。我假设你有类似的东西

> ```
> @RequestMapping(..., params = "excelBTNX")
> public ModelAndView next(...) 
> { <EXCEL FUNCTIONALITY> } 
> ```

只需注释掉 Controller 中的 并验证每次都调用该方法。请对此进行测试，**让我们知道这是否有效**。

*   发生了什么让您认为 Controller 仅在第二次单击时被调用？也许您正在查看的迹象并不意味着控制器仅在每秒钟点击一次时被调用。**请解释**。

*   修复`if (1=1)`代码。`=`在Java中是赋值运算符，`==`是比较运算符。我假设你想做一个比较。您似乎还简化了这部分代码，但实际上可能是问题所在。**请在此处发布实际代码**。

*   我在这里没有看到任何关于 cookie 的信息。在我看来，您正在创建一个临时 Excel 文件，并在会话中设置文件的名称。

`session.setAttribute(fileDownload, filepath)`无法工作，因为会话属性映射的键是字符串类型。应该是`session.setAttribute("fileDownload", filepath)`。

*   你能看到每次点击是否都会生成一个新的临时 Excel 文件吗？您应该能够通过时间戳来判断。

这可能仍然没有指出问题，但它肯定会让我们更接近。

# javascript - 获取层次结构的级别

> ID：14132831
> 
> 赞同：6
> 
> 时间：2013-01-03T03:56:21.280
> 
> 标签：javascript, algorithm, sorting, hierarchy, dataflow

我有一个对象数组，其中每个对象都有一个`id`和一个`ParentId`属性（因此它们可以排列在树中）。它们没有特定的顺序。

请注意`id`'s 和`parentId`'s 不会是整数，它们将是字符串（只是想让示例代码更清晰..）

只有一个根：假设它的`id`:1 数据如下所示：

```
 data = [
   {
        id:"id-2",
        parentId:"id-3"
    },
    {
        id:"id-4",
        parentId:"2"
    },
    {
        id:"id-3",
        parentId:"id-4"
    },
    {
        id:"id-5",
        parentId:"id-4"
    },
    {
        id:"id-6",
        parentId:"id-1"
    },
    {
        id:"id-7",
        parentId:"id-1"
    }
    // and so on...
] 
```

我正在寻找一种有效的方法来给每个对象一个`level`属性，该属性应该指定它的嵌套级别......

然后它们应该如下所示：

```
data = [
    {
        id:"id-2",
        parentId:"id-1",
        level:2
    },
    {
        id:"id-3",
        parentId:"id-4",
        level:5

    },
    {
        id:"id-4",
        parentId:"id-2",
        level:3

    },
    {
        id:"id-5",
        parentId:"id-4",
        level:5
    },
    {
        id:"id-6",
        parentId:"id-1",
        level:2

    },
    {
        id:"id-7",
        parentId:"id-3",
        level:4
    }
    // and so on...
] 
```

### 简而言之：

我希望`level`通过遍历数组并找出层次结构来动态添加它。

此外，（如果可能的话）它们应该根据那里的顺序进行排序，例如，`level:3`来自同一个父级的所有对象应该彼此相邻，而不是应该有同一个父级的兄弟姐妹彼此相邻而不是3级的两个表兄弟挨着。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T06:20:50.833

以下代码的工作示例位于[jsFiddle](http://jsfiddle.net/j7jQP/3/)上。

按 id 索引树并从每个节点向上遍历它，然后计数直到找到根。通过首先索引，我们接近 O(n) 时间复杂度（取决于树密度）。****更新以满足排序要求，并允许排除根节点***：

```
function levelAndSort(data, startingLevel) {
    // indexes
    var indexed = {};        // the original values
    var nodeIndex = {};      // tree nodes
    var i;
    for (i = 0; i < data.length; i++) {
        var id = data[i].id;
        var node = {
            id: id,
            level: startingLevel,
            children: [],
            sorted: false
        };
        indexed[id] = data[i];
        nodeIndex[id] = node;
    }

    // populate tree
    for (i = 0; i < data.length; i++) {
        var node = nodeIndex[data[i].id];
        var pNode = node;
        var j;
        var nextId = indexed[pNode.id].parentId;
        for (j = 0; nextId in nodeIndex; j++) {
            pNode = nodeIndex[nextId];
            if (j == 0) {
                pNode.children.push(node.id);
            }
            node.level++;
            nextId = indexed[pNode.id].parentId;
        }
    }

    // extract nodes and sort-by-level
    var nodes = [];
    for (var key in nodeIndex) {
        nodes.push(nodeIndex[key]);
    }
    nodes.sort(function(a, b) {
        return a.level - b.level;
    });

    // refine the sort: group-by-siblings
    var retval = [];
    for (i = 0; i < nodes.length; i++) {
        var node = nodes[i];
        var parentId = indexed[node.id].parentId;
        if (parentId in indexed) {
            var pNode = nodeIndex[parentId];
            var j;
            for (j = 0; j < pNode.children.length; j++) {
                var child = nodeIndex[pNode.children[j]];
                if (!child.sorted) {
                    indexed[child.id].level = child.level;
                    retval.push(indexed[child.id]);
                    child.sorted = true;
                }
            }
        }
        else if (!node.sorted) {
            indexed[node.id].level = node.level;
            retval.push(indexed[node.id]);
            node.sorted = true;
        }
    }
    return retval;
} 
```

# 例子：

```
// level 0 (root) excluded
var startingLevel = 1;
var someData = [
    {id : "id-1", parentId : "id-0"},
    {id : "id-2", parentId : "id-0"},
    {id : "id-3", parentId : "id-2"},
    {id : "id-4", parentId : "id-3"},
    {id : "id-5", parentId : "id-4"},
    {id : "id-6", parentId : "id-4"},
    {id : "id-7", parentId : "id-0"},
    {id : "id-8", parentId : "id-1"},
    {id : "id-9", parentId : "id-7"},
    {id : "id-10", parentId : "id-1"},
    {id : "id-11", parentId : "id-1"},
    {id : "id-12", parentId : "id-1"}
];
var outputArray = levelAndSort(someData, startingLevel); 
```

# 输出：

![在此处输入图像描述](../Images/4b6b6a7dfcb8e30e09b140064e130aa8.png)

# 笔记

如果您更改输入顺序，排序结果会有所不同，但仍然是正确的（即，按级别顺序，按兄弟姐妹分组）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T04:14:22.323

我不确定你从哪里得到这个值，`level`所以我假设它只是一个整数。顺便说一句，您可以通过循环将 level 属性添加到数组的每个项目中。

```
for (var i = 0, l = data.length; i < l; i++) { 
    data[i].level = i
} 
```

这会给

```
data = [{id:"1", parentId:"3", level:0 }, {id:"2", parentId:"1", level:1 } ...] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T06:18:14.243

这是您的工作代码。级别从 2 开始。

警告：如果无法计算级别，应用程序可能会进入无限循环。因此，请确保`parentId`对所有对象都有效，并且其中至少一个具有`parentId="id-1"`.

```
<script type="text/javascript">
    data = [
        {
            id:"id-2",
            parentId:"id-3"
        },
        {
            id:"id-4",
            parentId:"id-2"
        },
        {
            id:"id-3",
            parentId:"id-5"
        },
        {
            id:"id-5",
            parentId:"id-1"
        }
    ];

    function processData() {
        flag = true;

        while(flag) {
            flag = false;

            for(var i = 0; i < data.length; i++) {
                if(data[i].parentId == "id-1") {
                    data[i].level = 2;
                } else {
                    l = getLevel(data[i].parentId);
                    if(l > 0) {
                        data[i].level = l + 1;
                    } else {
                        flag = true;
                    }
                }
            }
        }
    }

    function getLevel(id) {
        for(var i = 0; i < data.length; i++) {
            if(data[i].id == id) {
                if(data[i].level) {
                    return data[i].level;
                } else {
                    return 0;
                }
            }
        }

        return 0;
    }

    processData();

    console.log(data);

</script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-03T18:30:02.090

无需递归即可解决此问题的一种方法是创建 DOM 层次结构。对于数组中的每个项目，创建一个 div 并将其附加到其父级。然后遍历 DOM 并分配级别（顶部是级别 1，然后为每个孩子添加 1）。

我在这里设置了一个粗略的演示：http: [//jsfiddle.net/4AqgM/](http://jsfiddle.net/4AqgM/)

代码摘录：

```
top.dataset.level="1";
var topChildren=top.getElementsByTagName("div");
for (var i=0;i<topChildren.length;i++) {
topChildren[i].dataset.level=parseInt(topChildren[i].parentNode.dataset.level)+1;
} 
```

# jquery - 当用户将鼠标悬停在图像上时，如何在图像上获得缩放效果？

> ID：14132833
> 
> 赞同：0
> 
> 时间：2013-01-03T03:56:47.470
> 
> 标签：jquery, css, web, css-transitions

这是我在[尼康](http://ashton.nikonusa.com/Digital-SLR/Cameras/D3200exp.aspx)网站上发现的一个非常视觉上令人愉悦的效果。当我将鼠标悬停在图像上时，图像往往会放大。

是否可以使用 CSS 来实现这一点？如果有怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T04:00:09.017

CSS 悬停的好例子。请参阅缩放和平移部分：“缩放和平移”

检查[这个](http://designshack.net/articles/css/joshuajohnson-2/)和[这个](http://designshack.net/tutorialexamples/imagehovers/zoomandpan.html)链接

```
/*GROW*/
.grow img {
    height: 300px;
    width: 300px;
    -webkit-transition: all 1s ease;
    -moz-transition: all 1s ease;
    -o-transition: all 1s ease;
    -ms-transition: all 1s ease;
    transition: all 1s ease;
}

.grow img:hover {
    width: 400px;
    height: 400px;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T04:00:28.087

[这](http://tympanus.net/codrops/2011/11/02/original-hover-effects-with-css3/)可能是您正在寻找的东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T04:04:52.830

此链接将为您提供帮助 [http://www.jacklmoore.com/zoom](http://www.jacklmoore.com/zoom)

Zoom 将 html 附加到分配给它的元素内，因此该元素必须能够接受 html，如`<a>`、`<span>`、`<li>`、`<div>`等。这不包括`<img>`元素（见下文）。

```
 $(document).ready(function(){
        $('a.photo').zoom({url: 'photo-big.jpg'});
    });

    // Using ColorBox with Zoom
    $(document).ready(function(){
        $('a.photo').zoom({
            url: 'photo-big.jpg', 
            callback: function(){
                $(this).colorbox({href: this.src});
            }
        });

}); 
```

要将缩放与 img 元素一起使用，它们需要用另一个元素包裹。无法从 JavaScript 中读取一些与布局相关的 CSS 样式（基于百分比的宽度和高度，边距设置为自动等），因此安全的做法是将这种更改推迟到各个站点所有者。以下是某些情况下所需的全部内容：

```
$(document).ready(function(){
    $('img')
        .wrap('<span style="display:inline-block"></span>')
        .css('display', 'block')
        .parent()
        .zoom();
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-03T04:13:07.280

你当然可以！将 css3 的`transform: scale()`属性与 css3 转换结合使用非常简单。

```
.thumbnail:hover img {
     transform: scale(1.15);
    -o-transform: scale(1.15);
    -ms-transform: scale(1.15);
    -moz-transform: scale(1.15);
    -webkit-transform: scale(1.15);
} 
```

**[JSFiddle](http://jsfiddle.net/szqzF/)**

# webview - WebView 的方向 - Monotouch

> ID：14132839
> 
> 赞同：1
> 
> 时间：2013-01-03T03:57:46.130
> 
> 标签：webview, xamarin.ios, orientation

我有一个似乎无法旋转的 UIWebView。到目前为止，我的应用程序中的所有内容似乎都可以正常工作，但方向除外（我希望支持所有方向）。

在下面的代码中，我使用 WebViewDelegate 来向用户展示他们想要打开从网站下载的文件而不是将其交给 Safari 的本地应用程序）。

在我的 UIViewController 中，这是设置的（据我所知）

```
public override bool ShouldAutorotateToInterfaceOrientation (UIInterfaceOrientation toInterfaceOrientation)
{
    return true;        
} 
```

这是我的 AppDelegate。

```
Register ("AppDelegate")] public partial class AppDelegate : UIApplicationDelegate { // class-level declarations UIWindow window; UIWebView webView;

public override bool FinishedLaunching (UIApplication app, NSDictionary options)
{
    // create a new window instance based on the screen size
    window = new UIWindow (UIScreen.MainScreen.ApplicationFrame);

    webView = new UIWebView (window.Bounds);
    window.AddSubview (webView); 

    string url = "https://www.myURL.com";
    webView.LoadRequest(new NSUrlRequest (new NSUrl (url)));
    webView.WeakDelegate = new WebViewDelegate();
    webView.ScalesPageToFit = true;

    var keys = new object[] { "UserAgent" };
    var objects = new object[] { "Mozilla/5.0 (iPhone; CPU iPhone OS 5_0 like Mac OS X) AppleWebKit/534.46 (KHTML, like Gecko) Version/5.1 Mobile/9A334 Safari/7534.48.3" };
    var dictionnary = NSDictionary.FromObjectsAndKeys(objects, keys);

    NSUserDefaults.StandardUserDefaults.RegisterDefaults(dictionnary);

    // make the window visible
    window.MakeKeyAndVisible ();

    return true;
}

}
public class WebViewDelegate: UIWebViewDelegate{

UIDocumentInteractionController docControl;

public WebViewDelegate () : base()
{ 

}

public override bool ShouldStartLoad (UIWebView webView, MonoTouch.Foundation.NSUrlRequest request, UIWebViewNavigationType navigationType)
{

    var docString = request.Url.ToString ();
    Uri uri = new Uri (docString);
    string ext = Path.GetExtension (uri.ToString ()).ToLower();
    var canShow = false;

    switch (ext) {
    case ".xls":
    case ".xlxs":
    case ".doc":
    case ".docx":
    case ".pdf":
    case ".jpeg":
    case ".jpg":
    case ".gif":
    case ".png":
    case ".mov":
    case ".mp4":
    case ".ogv":
    case ".webm":
    case ".avi":
    case ".mpeg":
    case ".mp3":
    case ".wmv":
        canShow = true;
        break;
    }

    if (canShow) {

        WebClient _webClient = new WebClient();
        _webClient.Headers.Add("SecretKey","SecretKey");

        string filename = Path.GetFileName(uri.ToString());

        string path = Environment.GetFolderPath(Environment.SpecialFolder.Personal);
        string filePath = Path.Combine(path, filename);

        _webClient.DownloadFileAsync(uri,filePath);
        _webClient.DownloadFileCompleted +=  (sender, e) => {

            var docData = File.ReadAllBytes(filePath);
            File.WriteAllBytes(filePath, docData);

            InvokeOnMainThread(delegate {
                docControl = UIDocumentInteractionController.FromUrl(NSUrl.FromFilename(filePath));
                docControl.Delegate = new UIDocumentInteractionControllerDelegate();
                docControl.PresentOptionsMenu(new Rectangle(0,-260,320,320),webView,true);
            });
        };

        //open it in safari...
        //UIApplication.SharedApplication.OpenUrl(request.Url);

        return false;
    }

    return true;

    }

} 
```

当然，在我的 Info.plist 文件中，我确实支持 iPhone 和 iPad 的所有内容（包括肖像和风景）。

任何人都可以提供的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-12T15:16:35.997

[通过使用自定义渲染器在此处](http://www.tipsabc.com/2015/xamarin-forms-how-to-resize-the-webview-after-rotation-in-ios/)找到解决方案，但在 iOS 7 中不起作用。

```
[assembly: ExportRenderer(typeof(MyWebView), typeof(MyWebViewRenderer))]
namespace iOS {
public class MyWebViewRenderer: WebViewRenderer {
    protected override void OnElementChanged(VisualElementChangedEventArgs e) {

        base.OnElementChanged(e);
        this.AutoresizingMask = UIViewAutoresizing.FlexibleDimensions;
        this.AutosizesSubviews = true;
    }

    public override void LayoutSubviews() {
        base.LayoutSubviews();

        var screenBound = UIKit.UIScreen.MainScreen.Bounds;
        var offSetH = GetStatusBarHeight();

        NativeView.Bounds = new CoreGraphics.CGRect(
            screenBound.X,
            screenBound.Y + offSetH,
            screenBound.Width,
            screenBound.Height - offSetH);
    }
}
} 
```

# php - 如何在 PHP 中将现有数组转换为二维数组？

> ID：14132844
> 
> 赞同：1
> 
> 时间：2013-01-03T03:58:13.180
> 
> 标签：php, arrays

```
$i=0;
$array=array("one","two");
foreach($array as &$point)
{
   $point[$i]=array($point[$i], $i);
   $i++;
}

var_dump($array); 
```

产量：

> **数组(2) { [0]=> 字符串(3) "Ane" [1]=> &string(3) "tAo" }**

我期待更多类似的东西：

> [0]=> [0]=> “一” [1]= 1
> [1]=> [0]=> “二” [1]= 2

我是在`foreach`做错的内部块，还是应该使用另一种方法从单个数组变为二维数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T04:02:26.177

你的意思是这样的：

```
$i=1;
$array=array("one","two");
foreach($array as $j => $point)
{
   $array[$j]=array($point, $i);
   $i++;
}

var_dump($array); 
```

输出：

```
array(2) {
  [0]=>
  array(2) {
    [0]=>
    string(3) "one"
    [1]=>
    int(1)
  }
  [1]=>
  array(2) {
    [0]=>
    string(3) "two"
    [1]=>
    int(2)
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T04:03:51.593

```
$array = array("one","two");
foreach($array as $i => &$point)
{
   $point = array($point, $i + 1);
}

var_dump($array); 
```

您的代码中有几个错误：

1.  你应该分配给`$point`
2.  你应该访问`$point`，而不是`$point[$i]`
3.  如果您打开了错误输出（或者您查看错误日志），您会看到`Array to string conversion`代码错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T04:07:41.073

您可以使用它在 PHP 中定义一个二维数组

```
$array = array(
  array(0, 1, 2),
  array(3, 4, 5),
); 
```

# html-agility-pack - 需要一些关于开始使用 HTML Agility Pack 的说明

> ID：14132847
> 
> 赞同：2
> 
> 时间：2013-01-03T03:58:49.643
> 
> 标签：html-agility-pack

**我的背景**：

在 HTML 清理方面，我是新手。自从我使用 C# 为 html 编写唯一的工作以来，已经过去了大约四年。不久前，我使用 C# 进行的其他编码是用于表单来操作 SQL Server 数据库中的数据。

**我为尝试开始使用 HTML Agility Pack (HAP) 所做的工作**：

我花了几天时间试图理解从各种在线资源中找到的关于如何开始使用 HTML Agility Pack 的说明。到目前为止，我发现的一些内容如下：

*   www.4guysfromrolla.com/articles/011211-1.aspx
*   olussier.net/2010/03/30/easy-parse-html-documents-in-csharp/
*   stackoverflow.com/questions/846994/how-to-use-html-agility-pack
*   shatalov.su/en/articles/web/parser_1.php
*   下面还有更多的提到......

**到目前为止我的结果**：

我发现这些材料与每个来源似乎都在告诉我一些不同的东西。我所有的尝试都走到了尽头。

* * *

为了方便大家高效的理清我的困惑，回复我的具体情况，我将在下面我的项目、我的环境和我的问题三个部分进行描述；

**我的项目**

我的任务是创建一个从 html 文件中清除数据的过程。我很了解这些文件。这些文件将驻留在机器本地的文件系统中。html 文件将由我们不拥有的进程在其他地方创建，并将放置在我刚才提到的本地文件夹中。（仅供参考 - 虽然这不是我的问题的一部分，但我希望创建一个项目或应用程序，该项目或应用程序将按计划运行以执行清理任务，然后将收集的数据输入到数据库表中。）

**我的环境**

如上所述，要处理的 html 文件将驻留在本地计算机上。我在这台机器上新安装了 Visual Studio 2010 Professional 来为这个项目编写代码。该机器现在可以通过文件共享访问 HTML Agility Pack。

在 REGEIT 下： HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\NET Framework Setup\NDP 列出了以下指示本机上安装的 .NET 框架的版本；

*   CDF
*   V2.0.50727
*   V3.0
*   V3.5
*   V4
*   V4.0

**我的问题**

1.) 一些网站告诉我下载 HTML Agility Pack 并使用文件“HtmlAgilityPack.dll”，但是 zip 文件包含九个文件夹，每个文件夹都有该文件的不同副本。我想要哪一个？

这是文件夹的名称；

*   网20
*   网40
*   Net40-客户端
*   网45
*   sl3-wp
*   SL4
*   sl4-windowsphone71
*   SL5
*   winrt45

2.) 在 stackoverflow.com/questions/846994/how-to-use-html-agility-pack 上对论坛问题“我如何使用 HTML 敏捷包”的回答指示提问者“下载并构建 HTML 敏捷包” Pack Solution”，并将提问者定向到站点 htmlagilitypack.codeplex.com，然后该站点具有指向 nuget.org/packages/HtmlAgilityPack 的链接，该链接表示通过运行命令“PM> Install-Package HtmlAgilityPack”来“安装”HTMLAgilityPack。 “包管理器控制台”</p>

这是什么意思呢？其他网站说要在 bin 文件夹中找到 dll。那是在告诉我该怎么做？请更详细地解释让我开始。

3.) 假设我使用 C# 我应该创建什么样的项目？

4.) 请指导我找到您认为适用于我的项目的任何其他资源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T18:11:22.937

看起来您可以创建一个 .NET 4.0 项目，因为您已在计算机上安装了 .NET 框架版本。什么类型的项目取决于您希望应用程序如何运行。我个人会选择创建一个包含加载 html 和清理代码的 C# 类库项目，然后将其托管在您想要用来实际打开文件的任何机制中。

要从 FileSystem 打开文件，请使用`File.OpenRead`或`File.ReadAllText`从[`System.IO.File`](http://msdn.microsoft.com/en-us/library/system.io.file.aspx). 您可以将流或文件内容传递给`HtmlDocument.Load/LoadHtml`方法。

```
 HtmlDocument doc = new HtmlDocument();

 // Use File.ReadAllText
 string contents = File.ReadAllText("PathToFileName");
 doc.LoadHtml(contents);

 // Or use a stream
 using (var contents = File.OpenRead("PathToFileName"))
 {
     doc.Load(contents);
 } 
```

托管的可能性很多。控制台应用程序（可以从命令行或通过任务计划程序调用），Windows 服务（可以在 Windows 中加载，即使没有人登录到机器也可以在后台运行，并且可以潜在地使用`FileSystemWatcher`自动获取文件, 或 Windows Forms/WPF 应用程序，它允许用户选择要处理的文件，然后以某种方式显示结果。

至于如何使用它，这是 Html Agility Pack 的主要问题之一。随着时间的推移，已经添加了新的使用方式，因此实际的库有多种使用方式。您可以采用老式的 XPath 查询路由（这是原始 API），也可以使用 Linq-to-HTML/XML 路由（这是较新的方式）。没有一个比另一个更好，它们都有各自的优势。XPath 解决方案允许您轻松地将查询存储在文本文件中，因此它非常适合可配置的系统，而从开发人员的角度来看，Linq-To-HTML 版本更容易理解。

至于如何下载，这里也有很多选择。

*   您确实[可以从 CodePlex 网站下载源代码](http://htmlagilitypack.codeplex.com/)。无论您如何进行，您可能希望以任何方式执行此操作，它允许您深入了解并弄清楚为什么某些东西会以它的方式工作，即使您自己不编译库。
*   您可以从 CodePlex 下载二进制文件并将它们与您的项目一起存储，在创建 NuGet 等服务之前，这是开发人员分发其库的唯一简单方法。
*   我个人会选择走 NuGet 路线。使用 Visual Studio 2012 时，NuGet 已与 Visual Studio 集成。使用 Visual Studio 2010 时，[必须安装 NuGet 扩展](http://docs.nuget.org/docs/start-here/installing-nuget)才能获得相同的功能。安装后，您可以[从 Visual Studio 中打开 Nuget 包管理器控制台](http://docs.nuget.org/docs/start-here/using-the-package-manager-console)。打开 Visual Studio 解决方案并在解决方案资源管理器中选择新创建的类库，然后继续输入`Install-Package HtmlAgilityPack`命令，让 Visual Studio 为您的项目下载并安装正确版本的 HTML Agility Pack。不用担心选择哪个库，Visual Studio 会为您完成。

既然您已经安装了该库，那么如何使用它完全取决于您所追求的 HTML 清理类型以及您是选择 XPath 还是 Linq-to-HTML 路由。但它通常归结为加载 HTML 文档：

```
 HtmlDocument doc = new HtmlDocument();
 doc.Load(/* path to file or stream */); or doc.LoadHtml(/*string*/); 
```

在加载文件并捕获任何可能发生的解析错误后，继续使用 XPath 查询 HTML，就像内容实际上是 XML 一样（[来自 MSDN 的 XML/XPath 文档实际上适用于此处](http://msdn.microsoft.com/en-us/library/ms256115%28v=vs.100%29.aspx)）：

```
 var nodes = doc.DocumentNode.SelectNodes("//table/tr/td"); 
```

或者使用 Linq-to-HTML 进行相同的查询：

```
 var nodes = doc.DocumentNode.Descendants("table")
           .Select(table => table.Elements("tr").Select(tr => tr.Elements("td"))); 
```

或者使用带有 Linq 查询语法的 Linq-to-Html：

```
var tds = from tables in doc.DocumentNode.Descendants("table")
            from tr in tables.Elements("tr")
            from td in tr.Elements("td")
            select td; 
```

您可以随心所欲地进行查询。该语法类似于`XPathnavigator`.NET Framework 中的标准语法（使用`SelectNodes`/ `SelectSingleNode`/ `Children`etc）或 Linq-to-XML 语法（使用`.Descendants`/ `.Ancesters`/`.Element(s)`和标准 Linq）。

也可以看看：

*   [Linq to XML 文档](http://msdn.microsoft.com/en-us/library/bb387098.aspx)
*   [XPathNavigator/IXPathNavigable 文档](http://msdn.microsoft.com/en-us/library/system.xml.xpath.xpathnavigator_methods.aspx)

# java - 为什么不使用接口类型的这些变量来实例化新对象？

> ID：14132849
> 
> 赞同：0
> 
> 时间：2013-01-03T03:59:16.410
> 
> 标签：java

我正在使用[这个](http://javadoc.jlibav.googlecode.com/git/index.html)api，并且遇到了一些让我感到困惑的代码示例。我知道我可以使用“new”将对象分配给接口，因为接口是一种数据类型。我从下面的代码中不明白的是为什么变量：“cc”和“audioDecoder”被赋予了它们被赋予的值。据我所知，这些变量应该分配给新对象。有人可以解释这里发生了什么吗？

```
try {
// open media file 
DefaultMediaPlayer player = new DefaultMediaPlayer("/home/me/walking.wav");

// get some properties of the first audio stream 
IDecoder audioDecoder = player.getAudioStreamDecoder(0);
ICodecContextWrapper cc = audioDecoder.getCodecContext();

int sampleFormat = cc.getSampleFormat();
int sampleRate = cc.getSampleRate();
int bytesPerSample = AVSampleFormat.getBytesPerSample(sampleFormat);
long channelLayout = cc.getChannelLayout();
int channelCount = AVChannelLayout.getChannelCount(channelLayout);
AudioFormat.Encoding encoding;

if (AVSampleFormat.isPlanar(sampleFormat) || AVSampleFormat.isReal(sampleFormat))
    throw new LibavException("unsupported output sample format");
else if (AVSampleFormat.isSigned(sampleFormat))
    encoding = AudioFormat.Encoding.PCM_SIGNED;
else
    encoding = AudioFormat.Encoding.PCM_UNSIGNED;

// create Java InputStream for audio stream raw data
SampleInputStream sis = new SampleInputStream(sampleRate * bytesPerSample * channelCount, true);

// create AudioInputStream from the SampleInputStream
AudioInputStream audioStream = new AudioInputStream(sis, new AudioFormat(encoding, sampleRate,
    bytesPerSample * 8, channelCount, bytesPerSample * channelCount, sampleRate, 
    ByteOrder.BIG_ENDIAN.equals(ByteOrder.nativeOrder())), -1);

// create adapter between Libav audio frames and the SampleInputStream
Frame2AudioFrameAdapter resampler = new Frame2AudioFrameAdapter(channelLayout, channelLayout, sampleRate, 
    sampleRate, sampleFormat, sampleFormat);

// get audio mixer for the audio stream format
PlaybackMixer audioMixer = PlaybackMixer.getMixer(audioStream.getFormat());

// connect all streams
audioDecoder.addFrameConsumer(resampler);
resampler.addAudioFrameConsumer(sis);
audioMixer.addInputStream(audioStream); 

// enable audio stream decoding
player.setAudioStreamDecodingEnabled(0, true);

// start playback
audioMixer.play();
player.play();

// wait until the playback stops
player.join();

// release system resources
player.close();
resampler.dispose();
PlaybackMixer.closeAllMixers();
} catch (Exception ex) {
    Logger.getLogger(PlaybackSample.class.getName()).log(Level.WARNING, "unable to play audio", ex);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T04:08:07.967

您不需要像这样一直创建对象

```
SomeClass obj=new SomeClass(); 
```

你可以有这样的情况

```
public class OtherClass
{
  public SomeClass getSomeClassObject()
 {
    return new SomeClass();
 }
} 
```

`given that SomeClass is accesible within OtherClass`

你可以像下面这样使用它

```
OtherClass other=new OtherClass();
SomeClass come=other.getSomeClassObject(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T04:08:30.960

如果您已经阅读了 API 文档。[DefaultMediaPlayer.getAudioStreamDecoder](http://javadoc.jlibav.googlecode.com/git/index.html)方法

正在返回*IDecoder*类型的实例。这就是为什么在 src 中他们将返回类型分配给*IDecoder类型的**audioDecoder*变量。

 *```
// get some properties of the first audio stream 
IDecoder audioDecoder = player.getAudioStreamDecoder(0);
ICodecContextWrapper cc = audioDecoder.getCodecContext(); 
```

没有规则说您只能使用 将对象分配给接口类型`new`。您可以从方法返回类型分配对象实例。

同样，该方法返回分配给变量`IDecoder.getCodecContext()`的实例对象。`ICodecContextWrapper``cc`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T04:09:33.283

```
ICodecContextWrapper cc = audioDecoder.getCodecContext(); 
```

getCodecContext 可能是这样的：

```
ICodecContextWrapper getCodecContext() {

return new ICodecContextWrapper() {
  //override methods
};

} 
```*

# forms - Delphi XE3 窗体打开和关闭

> ID：14132852
> 
> 赞同：1
> 
> 时间：2013-01-03T03:59:38.777
> 
> 标签：forms, delphi

有人可以帮我弄这个吗：

我有表格1和表格2

```
in form1 1 :use form2.
in form1 put a button with code Form2.Showmodal;
form2 is made invisible
form2 has one button: 
```

*   form2.close = 有效但不关闭只是隐藏表单。-form2.free - 访问冲突或关闭并且 form1 被冻结（taskmngr 杀死它）
*   表格 2。释放 - 访问冲突或关闭..如果我单击 form1 上的打开按钮重新打开它会导致访问冲突..
*   Form2.close + onClose 动作 :=cafree; - 访问冲突..
*   Form2.closemodal - 没有效果..

如何处理和重用从 form1 显示为模态的 form2？

谢谢一堆..它必须是一些简单的我可以忽略的东西。

s

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T05:17:02.660

> form2.close = 有效但不关闭只是隐藏表单。

是的，它确实关闭了表单。这就是封闭形式的默认行为——隐藏自身。在模态表单的情况下，`Close()`只需将表单设置`ModalResult`为非零值，这会导致`ShowModal()`退出并关闭/隐藏表单。

> form2.free - 访问冲突或关闭并且 form1 被冻结（taskmngr 杀死它）

`Free()`来自属于同一表单的事件处理程序内部的表单是不安全的。在事件处理程序退出后，VCL 仍然需要访问表单对象。为了安全地释放表单，您必须`Release()`改用它，它指示表单在以后安全的时候自动释放自己。

> 表格 2。释放 - 访问冲突或关闭..如果我单击 form1 上的打开按钮重新打开它会导致访问冲突..

导致 AV的唯一方法`Release()`是使用无效的表单指针调用它。如果重新打开表单会导致 AV，那么您的代码中有一些严重的错误。

> Form2.close + onClose 动作 :=cafree; - 访问冲突..

`caFree`导致表单调用`Release()`自身。看上面。

> Form2.closemodal - 没有效果..

你不应该`CloseModal()`直接打电话。改为使用`Close()`或设置`ModalResult`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T04:07:09.060

首先，从自动创建中删除 Form 2。

```
Project > Options > Forms 
Remove Form 2 from "Auto-create forms" 
```

这确保不会自动创建此表单。

当您创建它的实例时，不要通过它的名称（例如`Form2`）来引用它。相反，创建一个临时变量。如果您想以模态状态显示它，请执行以下操作：

```
procedure Button1Click(Sender: TObject);
var
  F: TForm2;
begin
  F:= TForm2.Create(nil);
  try
    F.ShowModal;
  finally
    F.Free;
  end;
end; 
```

不要使用您可能给它起的任何名称来引用您的表单，例如`Form2`. 如果您将它实例化为如上所示的另一个变量（使用`F`），请确保您对其进行的所有调用都是通过此变量进行的。实际上，只要您从自动创建的表单中删除此表单，您就可以完全删除此表单的声明：

```
var
  Form2: TForm2; 
```

如果您希望它以非模态状态显示，而主窗体仍可访问，则必须以完全不同的方式完成。让我知道这是否是您需要的，我会调整我的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-20T10:26:16.203

```
//this script for showing Form through Button with position 
//change position by changing left or top by changing 120 and 300
//in Delphi 10.3 and above 
// add form2 unit name in main unit in implementation as uses 
```

//例子 //实现 //使用main; 程序 Button1Click(Sender: TObject); 变量 F：TForm2；// 调用或显示的所需表单 begin F:= TForm2.Create(nil); 试试 F.Left :=left+120; //所需表格的左侧位置 F.Top :=top+300; //所需表单的顶部位置 F.ShowModal; 最后 F.Free; 结尾; 结尾;

# python - Python：使用先前出现的索引进行映射

> ID：14132855
> 
> 赞同：1
> 
> 时间：2013-01-03T03:59:45.473
> 
> 标签：python

我经常遇到类似以下问题的问题，并且很难编写干净的代码来解决它。通常，我有一些涉及临时变量和 for 循环的东西，但有更优雅的方法吗？

假设我有一个布尔值或评估为布尔值的值列表：

```
[True, False, True, False, False, True] 
```

我如何将它映射到一个值列表，其中包含前一个 True 的索引？

```
[0, 0, 2, 2, 2, 5] 
```

[编辑] 尝试过一些类似的东西：

```
def example(lst):
    rst, tmp = [], None
    for i in range(len(lst)):
        if lst[i]:
            tmp = i
        rst.append(tmp)   
    return rst 
```

假设列表的第一个元素始终为 True。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T04:08:26.390

虽然它仍然使用 for 循环和临时变量，但我认为它仍然相对干净。如果需要，您可以替换`yield`并附加到列表并返回。

```
def get_indexes(booleans):
    previous = 0
    for index, b in enumerate(booleans):
        if b:
            previous = index
        yield previous

>>> b = [True, False, True, False, False, True]
>>> list(get_indexes(b))
[0, 0, 2, 2, 2, 5] 
```

这甚至更短（尽管可能不太可读）：

```
def get_indexes(booleans):
    previous = 0
    for index, b in enumerate(booleans):
        previous = index if b else previous
        yield previous 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T04:12:07.433

尝试这个：

```
index = 0
bools = [True, False, True, False, False, True]
result = []
for i in range(len(bools)):
    index = i if bools[i] else index
    result.append(index) 
```

未经测试，但应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T04:45:28.127

```
[i if b else i-lst[i::-1].index(True) for i,b in enumerate(lst)] 
```

# c++ - C++ sprintf 拳击...怎么样？

> ID：14132856
> 
> 赞同：-3
> 
> 时间：2013-01-03T03:59:57.377
> 
> 标签：c++, printf

我想在 C++ 中创建自己的字符串格式化函数，并且我想让该函数在不指定它的情况下确定它自己的类型有多大，比如 sprintf。它是通过作弊起作用还是我也可以做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T04:04:52.687

将对象输出到字符串可能应该使用常规的`stringstream`东西来完成，这样您就可以使用 c++ 中存在的所有精彩功能*而无需*重新开发轮子。

已经花费了相当多的时间来使其正常工作，我不确定重复这种努力的理由。也许如果您告诉我们绕过已经存在的东西的*真正*要求（并且“我只想自己做”很少是一个很好的理由），我们可以提出更有针对性或适用的答案。

# java - 如何在鼠标单击时启动粒子从舞台上的任何位置生长？

> ID：14132858
> 
> 赞同：-1
> 
> 时间：2013-01-03T04:00:04.190
> 
> 标签：java, processing, mouselistener

我希望能够从我在舞台上单击的任何位置创建新粒子。我只是坚持添加鼠标部分，我试图添加/传递参数，但我在尝试设置参数时总是出错。有什么建议么？

这是我当前的代码：

```
float parSpeed = 1; //speed of particles
int   nParticles = 1000; //# of particles
Particle[] particles;

void setup() {
  size(700,700); //size of image (8.5 x 11 @ 300px) is 3300,2550)
  frameRate(60); //framerate of stage
  background(0); //color of background
  particles = new Particle[nParticles];

//start particle array
for(int i=0; i<nParticles; i++) {
    particles[i] = new Particle();
  }
}

void draw() {
  fill(0,0,0,5); //5 is Alpha
  rect(0,0,width,height); //color of rectangle on top?
  translate(width/2, height/2); //starting point of particles

//start particle array
  for(int i=0; i<nParticles; i++) {
    particles[i].update();
    particles[i].show();
  }
}

//Particle Class
class Particle {
  PVector pos; //position
  float angle; //angle
  float dRange; //diameter range
  float dAngle; //beginning angle?
  color c; //color

  Particle() {
    pos = new PVector(0,0);//new position for the particles.
    angle  = 1; //controls randomization of direction in position when multiplied
    dRange = 0.01; // how big of a circle shold the particles rotate on
    dAngle = 0.15; // -- maximum angle when starting
    c = color(0,0,random(100, 255)); //set color to random blue
  }

  void update() {
    float cor = .25*dRange*atan(angle)/PI; 
    float randNum = (random(2)-1)*dRange-cor;  //Random number from (-dRange, dRange)
    dAngle+=randNum;                       //We don't change the angle directly
                                       //but its differential - source of the smoothness!

    angle+=dAngle;                         //new angle is angle+dAngle -- change angle each frame

    pos.x+=parSpeed*cos(angle);//random direction for X axis multiplied by speed
    pos.y+=parSpeed*sin(angle);//rabdin durectuib for y axis multiplied by speed
  }

void show() {
    fill(c); //fill in the random color
    noStroke(); //no stroke
    ellipse(pos.x,pos.y,10,10); //make the shape
    smooth(); //smooth out the animation
  }
}

void keyPressed() {
  print("pressed " + int(key) + " " + keyCode);
  if (key == 's' || key == 'S'){
    saveFrame("image-##.png");
  }
}

void mouseReleased() {
   print("mouse has been clicked!"); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T04:18:25.523

覆盖[mouseReleased](http://processing.org/reference/mouseReleased_.html) ()方法：

在那里你需要：

1.  捕捉鼠标的位置
2.  创建新粒子
3.  更新新创建的粒子的位置。
4.  将其添加到数组（粒子系统）

这可能看起来很简单，但您必须记住数组不能更改大小。我建议您创建一个 ParticleSystem 类，该类负责在系统中添加和删除粒子。

**编辑：**您可能需要考虑使用 ArrayList 而不是粒子数组。看看[这个](http://processing.org/reference/ArrayList.html)

在伪代码中，它看起来像这样：

```
void mouseReleased() {
    int particleX = mouseX;
    int particleY = mouseY;

    Particle P = new Particle(); 
    P.setPos ( new PVector ( particleX, particleY ) ); // this needs to be implemented

    ParticleSystem.add ( P ); // this needs to be implemented
} 
```

我希望这将是一个好的开始。

啊

# actionscript-3 - Usinc 命令提示符 / Shell in Action 脚本 3

> ID：14132859
> 
> 赞同：2
> 
> 时间：2013-01-03T04:00:07.013
> 
> 标签：actionscript-3, command-prompt

作为标题，我可以使用什么命令/类？如果该函数存在，是否函数从命令行获取回调？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T05:05:21.920

[您可以按照本文](http://help.adobe.com/en_US/as3/dev/WSb2ba3b1aad8a27b060d22f991220f00ad8a-8000.html)运行并与 AIR 中的其他进程通信。

因此，如果您想运行 Windows 命令提示符，则必须提供 cmd.exe 的位置，即“%windir%\system32\cmd.exe”。不幸的是，AIR 不会理解 %windir%，因此您必须实际提供 Windows 目录的完整路径（通常是 C:，但您必须弄清楚如何处理不是 C: 的情况）。

恼人的是，命令提示符似乎不像正常的输入流。我在尝试写入时收到错误。可能有一些我不知道的方法。但是，您可以使用您的参数启动命令提示符。

例如，以下代码将启动命令提示符（假设 Windows 在 C 上），打印“hello”并跟踪输出（在这种情况下将只是“hello”）。

```
var nativeProcessStartupInfo:NativeProcessStartupInfo = new NativeProcessStartupInfo(); 
var file:File = File.applicationDirectory.resolvePath("C:\\Windows\\System32\\cmd.exe"); 
nativeProcessStartupInfo.executable = file; 
var processArgs:Vector.<String> = new Vector.<String>(); 
processArgs.push("/C echo 'hello'");
nativeProcessStartupInfo.arguments = processArgs; 
process = new NativeProcess(); 
process.addEventListener(ProgressEvent.STANDARD_OUTPUT_DATA, onOutputData); 
process.start(nativeProcessStartupInfo);

public function onOutputData(event:ProgressEvent):void 
{ 
    trace("Got: ", NativeProcess(event.target).standardOutput.readUTFBytes(process.standardOutput.bytesAvailable)); 
} 
```

# primefaces - 在 Mozilla Firefox 中移动 Primefaces 选项列表中的所有项目时发出警告

> ID：14132862
> 
> 赞同：0
> 
> 时间：2013-01-03T04:00:24.347
> 
> 标签：primefaces, mozilla

我有一个 Primefaces 选项列表，当我尝试将所有项目从源列表移动到目标列表（全部向右移动）或从目标到源（全部向左移动）时，我在使用 Mozilla Firefox 时收到警告 -

```
Warning - Unresponsive Script. 
A script on this page may be busy, or it may have stopped responding. You can stop the script now, or you can continue to see if the script will complete.

Script: http://localhost:9090/...../faces/javax.faces.resource/jquery/jquery.js?ln=primefaces:23 
```

然后它提示我`Continue`，或

```
Stop Script 
```

仅当列表中的项目数量非常大时才会发生这种情况。在我的情况下，我有近 260 个项目。此外，此问题仅在 Mozilla Firefox 中出现，在我使用 Google Chrome 时不会出现。这是我的选择列表代码 -

```
<p:pickList id="picklist1"
            value="#{picklistFields}"
            iconOnly="true" var="layout" itemLabel="#{layout}"
            itemValue="#{layout}" showTargetControls="true"
            effect="highlight">
            <f:facet name="sourceCaption">Source</f:facet>
            <f:facet name="targetCaption">Target</f:facet>
        </p:pickList> 
```

如果有办法避免警告，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T05:22:46.280

想出了解决办法！

当我在警告消息中单击时`Continue`，将所有项目从源移动到目标（或从目标移动到源）运行良好。这意味着脚本需要更多时间来处理，所以这就是我必须做的 -

1.  输入`about:config`Mozilla Firefox 地址栏
2.  查找`dom.max_script_run_time`，并将值重置为 20（这是对我有用的整数值，如果需要，您可以将其重置为更高的值）

当我在完成上述设置后尝试移动所有项目时，我没有再次收到警告消息。

# java - 弹性风暴拓扑 / Storm-Hadoop 共存

> ID：14132871
> 
> 赞同：9
> 
> 时间：2013-01-03T04:01:24.213
> 
> 标签：java, hadoop, mapreduce, distributed-computing, apache-storm

我们正在评估部署 Storm，但我有点担心。我们目前运行 Hadoop MapReduce，并且希望将我们的一些处理从 MapReduce 转换到 Storm 进程。请注意，这是一些，但不是全部。我们仍然会有一些 MapReduce 功能。

我找到了 Mesos，它可以（可能）允许我们在同一硬件上维护 Storm 和 Hadoop 部署，但还有一些其他问题：

*   我设想理想的情况是能够在 Storm 和 Hadoop 之间任意“借用”插槽。前任。两者都将根据需要使用相同的资源。不幸的是，这是一个固定部署，而不是像 EC2 之类的“基于云”。

*   我想避免 Storm 环境中的瓶颈。一个理想的情况是根据需要“旋转”（或相反）更多 Bolts 实例。这可能/现实吗？

*   “重新启动”拓扑似乎是一项相当昂贵的操作，我不确定这是否真的是一种选择。理想情况下，我希望它尽可能无缝。

我们是否正确地处理了这个问题？本质上，Storm 拓扑会“提供”一个 MapReduce 批处理作业。我们的一些处理可以流式处理，作为 Storm 拓扑会更好，而其中一些需要批处理。

欢迎任何一般性反馈，即使它没有解决我的具体问题。在这一点上，这更像是一个探索阶段，我可能完全走错了路。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T19:37:48.260

一些想法，以及迄今为止我在进行类似实验时的经验（在 Sprint 期间在 Spike 中完成）：

*   根据我的经验（我可能是错的），随着需求的增加，您并没有真正启动更多的螺栓，而是调整拓扑中每个螺栓的并行度配置。拓扑不是通过添加更多 Bolt 来扩展的，而是通过增加任何 Bolt 是瓶颈*的并行度来扩展拓扑。*以字数问题为例：

> ```
> builder.setBolt(4, new MyBolt(), 12)
>     .shuffleGrouping(1)
>     .shuffleGrouping(2)
>     .fieldsGrouping(3, new Fields("id1", "id2")); 
> ```

最后一个参数（“12”）是那个螺栓的平行度。如果它是拓扑中的瓶颈并且您需要扩展以满足需求，则可以增加它。并行度为 12 意味着它将导致 12 个线程在风暴集群中并行执行螺栓。

*   在 0.8.0 中，您可以使用“执行器”，它还允许“动态”调整以帮助向上/向下缩放螺栓/等。例子：

> builder.setBolt(new MyBolt(), 3) .setNumTasks(64) .shuffleGrouping("someSpout");

这里的executor（线程）数`MyBolt()`为3，可以动态改变线程数，不影响拓扑。 `storm rebalance`用于此：

```
$ storm rebalance someTopology -n 6 -e mySpout=4 -e myBolt=6 
```

这会将“someTopology”拓扑的工作线程数更改为 6，将 mySpout 的执行程序/线程数更改为 4，并将 myBolt 的执行程序/线程数更改为 6。

*   听起来您的风暴拓扑将处理流数据。需要批处理的数据将在持久保存到您正在使用的任何数据存储 (HDFS) 后启动。在这种情况下，您将包装一个螺栓来对数据存储进行持久性，以获取所需的任何数据。
*   另一方面，如果您想在您已经拥有的任何数据存储之上进行某种增量处理（并保持有状态），请使用 Trident ( [https://github.com/nathanmarz/storm/wiki/Trident-tutorial](https://github.com/nathanmarz/storm/wiki/Trident-tutorial)）。三叉戟实际上可能会解决您的很多问题。

# xaml - 如何将无线 WiFi IP 摄像机视频流式传输到我的应用程序中？

> ID：14132873
> 
> 赞同：0
> 
> 时间：2013-01-03T04:01:38.913
> 
> 标签：xaml, c#-4.0, windows-8, windows-runtime, winrt-xaml

我想开发一个无线 WiFi IP 摄像头的接口，并在我的应用程序的帧中流式传输其视频。我从来没有做过这样的事情，并会感谢任何指示。

我应该如何处理这项任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T23:12:53.277

看看我在 CodePlex 上的[MJPEG 解码器。](http://mjpeg.codeplex.com/)您将找到几乎所有 Windows 平台（WinForms、WPF、Windows 运行时等）的源代码 + 二进制文件以及示例。如果您有任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T04:21:38.163

您可以考虑几个选项。但是，定义视频发送器的流/源非常重要。

*   [如何在 C# 中通过 .NET Framework 4.0 和 Microsoft Expression Encoder 4 使用网络摄像头](http://www.codeproject.com/Articles/202464/How-to-use-a-WebCam-in-C-with-the-NET-Framework-4)
*   [从 CaptureElement 和 MediaCapture 执行实时视频流处理](https://stackoverflow.com/q/12836017/1437962)
*   [用于在 WPF 中查看网络摄像头的视频面板控件 XAML 描述](http://www.microsoftfaqs.com/Articles/14911930/Video_Panel_control_XAML_description_for_Viewing_Webcam_in_WPF)

# java - 按每个可能的顺序排列数组

> ID：14132877
> 
> 赞同：6
> 
> 时间：2013-01-03T04:02:09.597
> 
> 标签：java, arrays

我有一些复杂的计算算法，基本上可以测试一些较小的矩阵是否适合另一个大矩阵。
如果所有小矩阵都适合大矩阵，则取决于较小矩阵的顺序。如果小矩阵不适合，它应该重新排列 ArrayList 并重试，直到测试所有可能的顺序/序列。

如果我有 5 个小矩阵，那么总共有**5 个！(= 120)**数组可以有的可能顺序。

我的问题是我不知道如何重新排列这些对象（矩阵），所以我可以测试每个可能的顺序。我希望有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-03T05:24:42.560

对于`n`对象有`n!`排列。考虑一个集合：

```
S = {a1, a2, a3 ..., an}; 
```

找到上述集合的排列的算法可能是：

```
foreach(item i : S) {
   /* all other item except i1 and i */
   foreach(item i1 : S - {i}) {
       foreach(item i2 : S - {i, i1}) {
          .
          .
          .
          foreach(item in : S - {i, i2, .... in-1}) {
             /* permutation list */
             P = { i1, i2, ...., in-1, in }; 
          }
       }
   }
} 
```

显然我们不能有`n` `for`循环，但我们可以递归地构造这个算法，直到我们得到`n`list 中的元素`P`。下面是使用上述算法进行排列的实际 java 代码：

```
public static void 
permutations(Set<Integer> items, Stack<Integer> permutation, int size) {

    /* permutation stack has become equal to size that we require */
    if(permutation.size() == size) {
        /* print the permutation */
        System.out.println(Arrays.toString(permutation.toArray(new Integer[0])));
    }

    /* items available for permutation */
    Integer[] availableItems = items.toArray(new Integer[0]);
    for(Integer i : availableItems) {
        /* add current item */
        permutation.push(i);

        /* remove item from available item set */
        items.remove(i);

        /* pass it on for next permutation */
        permutations(items, permutation, size);

        /* pop and put the removed item back */
        items.add(permutation.pop());
    }
} 
```

下面是主要方法：

```
public static void main(String[] args) {
    // TODO Auto-generated method stub

    Set<Integer> s = new HashSet<Integer>();
    s.add(1);
    s.add(2);
    s.add(3);

    permutations(s, new Stack<Integer>(), s.size());
} 
```

它打印了结果：

```
[1, 2, 3]
[1, 3, 2]
[2, 1, 3]
[2, 3, 1]
[3, 1, 2]
[3, 2, 1] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-29T20:05:13.897

如果您使用的是 Java > 8，则有一个更智能的解决方案：

```
static Stream<List<Integer>> permutations(List<Integer> input) {
    if (input.size() == 1) {
        return Stream.of(new LinkedList<>(input));
    }
    return input.stream()
            .flatMap(first -> permutations(input.stream()
               .filter(a -> !a.equals(first))
               .toList())
            .map(LinkedList::new)
            .peek(l -> l.addFirst(first)));
} 
```

# ruby - 访问单例类

> ID：14132883
> 
> 赞同：4
> 
> 时间：2013-01-03T04:02:35.347
> 
> 标签：ruby

将以下代码添加到对象应该允许我检索任何对象的单例类。

```
class Object
    def singleton_class
        class << self; self; end
    end
end 
```

我有一个强力球类，我以这种方式实例化

```
puts Powerball.new.singleton_class
puts Powerball.new.singleton_class
puts Powerball.singleton_class
puts Powerball.singleton_class 
```

它给了我这个输出

```
#<Class:#<Powerball:0x007fd333040548>>
#<Class:#<Powerball:0x007fd333040408>>
#<Class:Powerball>
#<Class:Powerball> 
```

因此，powerball 类的两个实例具有唯一的 id，而直接在该类上调用 singleton_class 不会产生对象 id。

问题

1.  id 是唯一的，因为每个*实例*都有一个单例类吗？

2.  我知道`self`在一个类中只返回一个类，即类：强力球，但由于一个类是一个对象，它不应该也有一个 id 吗？有没有办法访问该ID？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T04:08:52.050

您必须了解单例类属于一个实例。代码中的前两个单例属于两个不同的强力球实例。（是的，每个实例都有自己的单例类——它被称为*单例*，因为只有一个实例属于它。）第三个和第四个单例是相同的——强力球类本身的单例类，当然，它是在这两种情况下相同的对象。

你为什么不尝试自己调查：

```
class Kokot; end
puts Kokot.object_id
puts Kokot.singleton_class.object_id 
```

而且，在 Ruby 1.9.x 中，#singleton_class 是一个内置方法。

# iphone - 在ios中将html转换为图像

> ID：14132886
> 
> 赞同：1
> 
> 时间：2013-01-03T04:03:31.637
> 
> 标签：iphone, html, objective-c, ios, ipad

我在我的应用程序中使用多个 .html 文件并在 webview 中打开它，我还需要将 html 页面显示为缩略图视图，是否可以将 html 页面转换为图像或任何其他方法来显示 html 文件作为预览。如果有人知道请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T04:05:14.347

```
-(void) webViewDidFinishLoad:(UIWebView *)webView { 

UIGraphicsBeginImageContext(CGSizeMake(webView.layer.frame.size.width, webView.layer.frame.size.height));
[webView.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

UIGraphicsBeginImageContext(CGSizeMake(70,100));
[image drawInRect:CGRectMake(0, 0, 70,100)];
image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

//image is now a 70x100 thumbnail. make sure you include CoreGraphics
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-26T13:47:25.637

WKWebView 现在有一种更方便的方法

```
class WebviewDelegate: NSObject, WKNavigationDelegate {

    var completion: ((UIImage?) -> ())?

    func webView(_ webView: WKWebView, didFinish navigation: WKNavigation!) {
        webView.evaluateJavaScript("document.body.offsetHeight;") { (result, error) in
            if let height = result as? CGFloat {
                let config = WKSnapshotConfiguration()
                config.rect = CGRect(x: 0, y: 0, width: webView.scrollView.contentSize.width, height: height)

                webView.takeSnapshot(with: config) { (image, error) in
                    self.completion?(image)
                }
            }
        }
    }
} 
```

# python - 在 mac Mountain Lion 上为 pil 和 Google 应用引擎安装 libjpeg

> ID：14132890
> 
> 赞同：3
> 
> 时间：2013-01-03T04:03:56.870
> 
> 标签：python, jpeg, python-imaging-library, libjpeg, installation

我敢肯定在外面的某个地方有这个副本，但我看了看，我已经走到了尽头。我正在尝试让 PIL 在我的 mac OS X 10.8 上运行，以便我可以`dev_appserver.py`用来测试成像功能。首先我在安装 PIL 时遇到了麻烦，直到我得到 Homebrew 并使用`brew install pil`. 我认为 brew 安装了所有必要的依赖项，但是当我尝试在我的应用程序中调整 jpeg 的大小时，它显示`IOError: decoder jpeg is not available`. 所以我在网上看了看，大多数地方都说我需要（1）卸载 PIL，（2）从源代码安装 libjpeg 和（3）重新安装 PIL。所以，我`brew uninstall PIL`，然后

```
curl -O www.ijg.org/files/jpegsrc.v7.tar.gz
tar zxvf jpegsrc.v7.tar.gz
cd jpeg-7d/
./configure
make
make install 
```

最后`brew install pil`。我重新启动 dev_appserver.py 并在 localhost 上重新加载页面，但同样的错误。我`python`从命令行测试了 pil

```
>>> from PIL.Image import Image
>>> f = open("someimagefile", "rb")
>>> i = Image()
>>> i.fromstring(f.read(), decoder_name="jpeg")
Traceback blah blah blah
IOError: decoder jpeg not available 
```

我没有太多从命令行安装实用程序的经验，所以我可能错过了一些明显的东西。再一次，对不起，如果有重复，但就像我说的，我看了看，找不到任何似乎有效的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T04:21:51.270

终于让它工作了！感谢@zgoda 和这个[链接](https://sites.google.com/site/asidoothings/python-pil)。以下是我为那些有同样问题的人最终采取的步骤：

首先确保没有安装 PIL。[从http://www.ijg.org/files/jpegsrc.v8c.tar.gz](http://www.ijg.org/files/jpegsrc.v8c.tar.gz)下载 libjpeg ，解压`./configure`，`make`. 当我尝试`make install`它时找不到存储手册页的目录，因此安装失败。我查看了上面链接上的信息并决定

`cp -r ~/Downloads/jpeg-6d/ /usr/local/jpeg`

我怀疑安装是否顺利而不是那条线是没有必要的。

然后在 PIL 的 setup.py 中编辑以下行：

```
JPEG_ROOT = None 
```

至

```
JPEG_ROOT = "/usr/local/jpeg" 
```

最后：

```
$ python setup.py build
$ python setup.py install 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T14:17:47.813

PIL 在编译期间没有找到 libjpeg 头文件。有关如何指定标头（“包含”）位置的信息，请参阅您的构建系统文档，例如。作为环境变量。

# html - 如何在 XML 属性中存储上标并使用 XSL 读取？

> ID：14132894
> 
> 赞同：1
> 
> 时间：2013-01-03T04:04:10.660
> 
> 标签：html, xml, xslt, superscript

我有一个需要动态创建 XML 文档的要求。这个 XML 的节点的一些属性包含上标 Reg 等。我的问题是我应该如何将这些上标字符存储在 XML 中，然后使用 XSL 读取它以呈现为 HTML。示例 XML 如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<node name="Some text <sup>®</sup>"/> 
```

我知道这不能存储在属性内的 sup 标记下，因为它会破坏 XML。我尝试使用`&lt;sup&gt;`也代替开始和结束标签。但随后它们被呈现为`<sup>`HTML，而不是实际使其成为上标。请让我知道这个问题的解决方案。我可以控制 XML 的生成。如果我知道存储上标的正确方法是什么，我可以用正确的方式编写它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T06:01:26.583

由于您使用 XSL 将输入转换为 HTML，因此我建议使用不同的方法来编码某些东西需要上标的事实。制作自己的简单标记，例如

```
<node name="Some text [[®]]"/> 
```

标记可以是您以后可以唯一标识的任何内容，并且不会自然地出现在您的数据中。然后在您的 XSL 过程中，可以使用自定义模板包含此标记的属性值，该模板将特殊标记转换为`<sup>`和`</sup>`。这允许您保持文档结构（即不将这些字符串值移动到文本节点）并仍然实现您的目标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T04:35:33.663

> 请让我知道这个问题的解决方案。我可以控制 XML 的生成。如果我知道存储上标的正确方法是什么，我可以用正确的方式编写它。

**因为属性只能包含值（没有节点），所以解决方案是在元素内存储标记（节点）**：

```
<node>
 <name>Some text <sup>®</sup></name>
</node> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T07:09:54.080

如果只有像 ® 这样的单个字符需要制作上标，那么您可以让 XML 没有骗子 like `<sup>`，即 like

```
<node name="Some text ®"/> 
```

并在处理过程中查找待上标字符。像这样的模板可能会有所帮助：

```
<xsl:template match="node/@name">
  <xsl:param name="nameString" select="string()"/>
  <!-- We're stepping through the string character by character -->
  <xsl:variable name="firstChar" select="substring($nameString,1,1)"/>

  <xsl:choose>
    <!-- '®' can be extended to be a longer string of single characters
         that are meant to be turned into superscript -->
    <xsl:when test="contains('®',$firstChar)">
      <sup><xsl:value-of select="$firstChar"/></sup>
    </xsl:when>
    <xsl:otherwise>
      <xsl:value-of select="$firstChar"/>
    </xsl:otherwise>
  </xsl:choose>

  <!-- If we we didn't yet step through the whole string,
       chop off the first character and recurse. -->
  <xsl:if test="$firstChar!=''">
    <xsl:apply-templates select=".">
      <xsl:with-param name="nameString" select="substring($nameString,2)"/>
    </xsl:apply-templates>
  </xsl:if>
</xsl:template> 
```

然而，这种方法不是很有效，特别是如果你有很多`name`属性和/或很长的`name`属性。如果您的应用程序对性能至关重要，那么最好做一些测试对处理时间的影响是否合理。

# c++ - GCC -Wuninitialized / -Wmaybe-uninitialized 问题

> ID：14132898
> 
> 赞同：15
> 
> 时间：2013-01-03T04:04:36.550
> 
> 标签：c++, c, gcc, compiler-optimization, gcc-warning

我在使用`gcc-4.7 (Ubuntu/Linaro 4.7.2-11precise2) 4.7.2`. 我无法在没有警告的情况下编译以下有效代码：

```
extern void dostuff(void);

int test(int arg1, int arg2)
{
    int ret;

    if (arg1) ret = arg2 ? 1 : 2;

    dostuff();

    if (arg1) return ret;

    return 0;
} 
```

编译选项和输出：

```
$ gcc-4.7 -o test.o -c -Os test.c -Wall
test.c: In function ‘test’:
test.c:5:6: warning: ‘ret’ may be used uninitialized in this function [-Wmaybe-uninitialized] 
```

但是，以下代码编译时没有警告（尽管汇编效率稍低）：

```
extern void dostuff(void);

int test(int arg1, int arg2)
{
    int ret;

    if (arg1 && arg2) ret = 1;
    if (arg1 && !arg2) ret = 2;

    dostuff();

    if (arg1) return ret;

    return 0;
} 
```

我有点卡住了，正在考虑这是一个编译器错误。有什么想法吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-03T04:06:31.963

事实上，这是 gcc 中的一个已知问题。
gcc 因报告**[不正确的未初始化变量](http://gcc.gnu.org/bugzilla/buglist.cgi?quicksearch=may%20be%20uninitialized)**而臭名昭著。
缺点已被适当指出，并且有一个克服缺点的主动性：
**[更好的未初始化警告](http://gcc.gnu.org/wiki/Better_Uninitialized_Warnings)：**

> GNU Compiler Collection 警告使用带有选项的未初始化变量`-Wuninitialized`。然而，当前的实现有一些明显的缺点。一方面，一些用户想要更详细和一致的警告。另一方面，一些用户希望得到尽可能少的警告。该项目的目标是实现这两种可能性，同时提高当前的能力。

该计划旨在提供更好的警告，并引用了与您的案例类似的示例案例。相关部分是：

> 对于特定用户，用户理解为误报的内容可能不同。一些用户对由于优化器的操作与当前环境相结合而隐藏的案例感兴趣。但是，许多用户不是，因为这种情况是隐藏的，因为它不会出现在编译的代码中。典型的例子是

```
int x;
if (f ())
     x = 3;
return x; 
```

> 其中 'f' 对于当前环境总是返回非零值，因此，它可能会被优化掉。在这里，一组用户希望得到一个未初始化的警告，因为 'f' 在别处编译时可能返回零。然而，其他用户组会认为虚假警告是关于正在编译的可执行文件中不会出现的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-12-24T20:54:40.850

不知道`gcc`在此期间是否已修复。如果没有，您可能想尝试一下`clang`。恕我直言，它是更好的编译器，并且可以进行更好的代码分析。

仅仅因为一些评论声称编译器是正确的，`ret`可能会在未初始化的情况下使用，这是相反的证明。编码

```
int test(int arg1, int arg2)
{
    int ret;
    if (arg1) ret = arg2 ? 1 : 2;
    dostuff();
    if (arg1) return ret;
    return 0;
} 
```

只需将两个相同的`if`语句合并为一个，就可以轻松地将其转换为以下代码：

```
int test(int arg1, int arg2)
{
    if (arg1) {
        int ret = arg2 ? 1 : 2;
        dostuff();
        return ret;
    }
    dostuff();
    return 0;
} 
```

这是等效的代码，现在应该很明显了，它`ret`永远不能在未初始化的情况下使用。编译器错误，警告毫无意义。

但话又说回来，代码可以进一步简化：

```
int test(int arg1, int arg2)
{
    dostuff();
    return (arg1 ? (arg2 ? 1 : 2) : 0);
} 
```

问题解决了，`ret`没了。

# credentials - 如何在地址栏不显示凭据的情况下将凭据从站点 A 传递到站点 B

> ID：14132899
> 
> 赞同：0
> 
> 时间：2013-01-03T04:04:44.243
> 
> 标签：credentials

我有 3 个站点。

*   站点 A：只是一个登录表单。
*   站点 B：爱思华宝网络邮件
*   站点 C：Lotus 多米诺邮件

现在，我不想在我的问题中包含站点 C。它仅适用于站点 A 和站点 B

我希望用户登录到站点 A，然后自动重定向到站点 B。如何在不显示用户名和密码的情况下安全地传递凭据？

我当前的脚本如下： 这是用户登录站点 A，然后传递凭据时的脚本。

```
if ($mailhost == "icewarp")
                      {
                            Header("refresh:0;url=Site B icewarp URL/webmail/index.html?!#$pid:$credential");
                            exit;
                      }
                    elseif ($mailhost == "domino")
                      {
                           Header("refresh:0;url=Site C Domino URL/mail/domadmin.nsf?Login&Username=$pid&Password=$credential");
                            exit;
                      } 
```

系统工作正常，但问题是用户凭据显示在地址栏上。如何以其他方式发送用户凭据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T04:08:10.857

您可能想要加密凭据。可能是唯一真正安全的方式。

您可以使用以下命令对其进行加密：[mcrypt-encrypt](http://php.net/manual/en/function.mcrypt-encrypt.php)。然后，解密：[mcrypt-decrypt](http://php.net/manual/en/function.mcrypt-decrypt.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T04:09:32.727

您可以尝试将值发布到 Domino 登录表单，而不是将它们放在形成 GET 请求的地址栏中。

对于 PHP - 三个不同的是发出 POST 请求。
[http://www.lornajane.net/posts/2010/three-ways-to-make-a-post-request-from-php](http://www.lornajane.net/posts/2010/three-ways-to-make-a-post-request-from-php)

# codeigniter - codeigniter 中的输出缓存显示空白页

> ID：14132907
> 
> 赞同：0
> 
> 时间：2013-01-03T04:05:58.113
> 
> 标签：codeigniter, caching

我已经阅读了很多关于此的讨论，但没有运气。

我有一个控制器：

```
function get_list() {

$data['promoname'] = $this->Default_model->get_promo($this->input->post('year'));

$this->output->cache(10);

// Render view

$this->layout->render(get_platform().'/promo/promo_view', $data);

}

And in my Default_model:

function get_promo($year = NULL) {

$this->db->cache_on();

//query here

} 
```

首次加载页面时，数据完美显示。但是当我尝试再次加载它以检查它是否被缓存时，它什么也不显示，一个空白页。错误报告已启用。

在 下创建了一个文件`application/cache`，这意味着没有权限问题。但是创建的文件包含'1357184142TS--->'。

尝试删除 $this->db->cache_on()，但行为仍然相同。似乎是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T04:23:26.327

检查您的视图文件以查看是否有任何标签丢失或任何值在两者之间被中断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-30T14:00:46.717

正如文档[https://ellislab.com/codeigniter/user-guide/general/caching.html](https://ellislab.com/codeigniter/user-guide/general/caching.html)所说：

> 由于 CodeIgniter 存储输出内容的方式，只有在为带有视图的控制器生成显示时，缓存才会起作用。

所以你必须打电话：

`$this->load->view(get_platform().'/promo/promo_view', $data)`

代替

`$this->layout->render(get_platform().'/promo/promo_view', $data);`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-02-25T06:23:43.243

我有同样的问题。我还没有正确测试它。我认为空白页是由于`($this->db->last_query())`在带有嵌套查询的代码中使用引起的。

尝试将 更改`$db['default']['db_debug'] = TRUE;`为`false`。如果其他系统查询没有运行，它可能会解决问题。

# c# - C# 帮助 - 检查文件是否存在并使用结果更新 SQL 表

> ID：14132908
> 
> 赞同：-5
> 
> 时间：2013-01-03T04:06:15.910
> 
> 标签：c#

我正在尝试将一个部分添加到 C# 脚本中，以检查文件是否存在，然后使用是或否更新 SQL 表作为检查的结果。我找到了如何检查文件是否存在，以及如何更新 SQL 表，但在将 2 连接在一起并与原始脚本集成时遇到了麻烦。

有人可以在这里帮助我吗？我觉得这应该是一件简单的事情，但我真的不知道 C# 只是糊里糊涂地通过它。

最终有效的代码：

if (File.Exists("D:\DPL\ALS\TempPDFStore\"+docnum+".pdf")) {

```
 // connect to database

                SqlConnection objSqlConnection=new SqlConnection("Server=123.456.789.0;Database=DB;User ID=sa;Password=pw;Trusted_Connection=False;");

                objSqlConnection.Open();  

                try  
                {  
                    string strINSERT = string.Format("UPDATE testwalog SET status = 'yes' WHERE docnum = '{0}'", docnum);
                    SqlCommand sqlcom = new SqlCommand(strINSERT, objSqlConnection);
                    sqlcom.ExecuteNonQuery();  
                }

                catch (System.Exception ex)
                {

                }

                finally
                {
                    objSqlConnection.Close();
                }
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T04:16:05.897

```
if (File.Exists("your file path"))
 {

    // connect to database

  SqlConnection objSqlConnection=new  SqlConnection("server=127.0.0.1;uid=sa;pwd=;database=test");  

  objSqlConnection.Open();  

  try  
   {  
     SqlCommand sqlcom=new SqlCommand("your update sql statement here,objSqlConnection);  
     sqlcom.ExecuteNonQuery();  
   }

 catch (System.Exception ex)
   {

   }

finally
   {
     objSqlConnection.Close();
   }
} 
```

# iphone - 如何将 NSUserDefaults 同步到 Twitter 消息中？

> ID：14132909
> 
> 赞同：-1
> 
> 时间：2013-01-03T04:06:24.997
> 
> 标签：iphone, ios, xcode, twitter, nsuserdefaults

有没有办法可以`NSUserDefaults`在消息中同步数据`Twitter`？

```
 if([SLComposeViewController isAvailableForServiceType:SLServiceTypeTwitter]) {

        SLComposeViewController *controller = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeTwitter];

        SLComposeViewControllerCompletionHandler myBlock = ^(SLComposeViewControllerResult result){
            if (result == SLComposeViewControllerResultCancelled) {

                NSLog(@"Cancelled");

            } else

            {
                NSLog(@"Done");
            }

            [controller dismissViewControllerAnimated:YES completion:Nil];
        };
        controller.completionHandler =myBlock;

        [controller setInitialText:@""];
        [controller addURL:[NSURL URLWithString:@""]];
        [controller addImage:[UIImage imageNamed:@""]];

        [self presentViewController:controller animated:YES completion:Nil];

    } 
```

我需要设置初始文本来接受 nsuserdefaults，因为我有一些用户设置的借口。这是 nsuserdefaults。

```
 NSString *savestring =field.text;
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults setObject:savestring forKey:@"savedstring"];
[defaults synchronize]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T04:10:03.833

```
 [controller setInitialText:[[NSUserDefaults standardUserDefaults] valueForKey:@"savedstring"]]; 
```

如果您想要从用户默认值返回字典的字符串值，那么您可以使用 JSON 将其转换为字符串。

# javascript - 变量不更新其值

> ID：14132916
> 
> 赞同：-1
> 
> 时间：2013-01-03T04:06:55.647
> 
> 标签：javascript

```
var canAssignMultiple="true";
var canWithdrawMultiple="true";

function onCheckUncheck() 
{
    if($(':checkbox[name^="checkedRecords"]:checked').length>0)
    {
        $("input[name='checkedRecords']:checked").each(function()
        {
            debugger;
            var canAssign = $(this).attr("canAssign").toLowerCase();
            var canWithdraw = $(this).attr("canWithdraw").toLowerCase();
            canAssignMultiple= canAssignMultiple && canAssign;
            canWithdrawMultiple= canWithdrawMultiple && canWithdraw;
            if (canAssignMultiple == "false") 
                $("#assaignbutton").attr("disabled", "disabled");
            else 
                $("#assaignbutton").removeAttr("disabled");

            if (canWithdrawMultiple == "false") 
                $("#withdrawbutton").attr("disabled", "disabled");
            else
                $("#withdrawbutton").removeAttr("disabled");
        });
    }          
    else
    {
        $("#assaignbutton").attr("disabled", "disabled");
        $("#withdrawbutton").attr("disabled", "disabled");
    }
} 
```

当 each() 函数被第二次调用时，变量 canAssignMultiple 变为 true，尽管它的值在第一次迭代中变为 false。它应该在每次循环运行时保持其值。如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T04:30:17.590

你的 HTML 看起来像这样吗？

```
<input canAssign="false" ...>
<input canAssign="true" ...> 
```

如果是这样，并且您无法更改 HTML，我建议更改此内容：

```
canAssign = $(this).attr("canAssign").toLowerCase() 
```

对此（从那时起使用布尔值）：

```
canAssign = $(this).attr("canAssign") == "true" 
```

和这个：

```
if(canAssignMultiple == "false") 
```

对此（因为它现在是一个真正的布尔值）：

```
if(canAssignMultiple) 
```

如果您*可以*更改 HTML，我建议您以符合 HTML5 的方式进行。首先，你所有的组成属性都应该加上前缀`data-`。您还可以将 camelCase 更改为连字符大小写。JQuery，在加载你的数据属性时，如果可能的话，将[执行](http://api.jquery.com/data/)从字符串的转换：

```
<input data-can-assign="false" ...>
<input data-can-assign="true" ...> 
```

然后 jQuery 会从这个调用中给你你想要的布尔值：

```
canAssign = $(this).data("canAssign") 
```

* * *

当然，同样的修复也应该适用于所有其他字符串伪布尔值（不能完全与布尔运算符一起使用）。

原因是：`"false"`不完全是`false`。`"false" && x`将评估为`x`（不是`"false"`您期望的）。另一方面，`false && x`将评估为`false`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T04:13:30.330

`boolean`(false, true) 值不同于`strings`("false", "true")

尝试

```
var canAssignMultiple = true;
var canWithdrawMultiple = true;

function onCheckUncheck() {
    if ($(':checkbox[name^="checkedRecords"]:checked').length > 0) {
        $("input[name='checkedRecords']:checked").each(function() {
            debugger;
            var canAssign = $(this).attr("canAssign").toLowerCase() == "true"; // make this a boolean expression
            var canWithdraw = $(this).attr("canWithdraw").toLowerCase() == "true"; // make this a boolean expression
            canAssignMultiple = canAssignMultiple && canAssign;
            canWithdrawMultiple = canWithdrawMultiple && canWithdraw;
            if (canAssignMultiple === false) $("#assaignbutton").attr("disabled", "disabled"); // use false (instead of "false")
            else $("#assaignbutton").removeAttr("disabled");
            if (canWithdrawMultiple === false) $("#withdrawbutton").attr("disabled", "disabled"); // use false (instead of "false")
            else $("#withdrawbutton").removeAttr("disabled");
        });
    }
    else {
        $("#assaignbutton").attr("disabled", "disabled");
        $("#withdrawbutton").attr("disabled", "disabled");
    }
}​ 
```

在进行更改的地方留下评论

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T04:15:22.503

正如其他人所指出的，字符串`"true"`和`"false"`的功能与布尔值`true`和不同`false`。如果您尝试在`if`语句中使用字符串或使用诸如 之类的逻辑运算符`&&`，则该字符串将被转换为布尔值；并且所有非空字符串都被转换为`true`（即它们是“真实的”）。这意味着字符串`"false"`将与您期望的相反，例如 in`("false" && x)`或 in `if ("false") {...}`。

修复代码的一种方法是更改​​此行

```
 canAssignMultiple = canAssignMultiple && canAssign; 
```

`canAssign`以明确且正确的方式转换为布尔值：

```
 canAssignMultiple = canAssignMultiple && (canAssign == "true"); 
```

然后`&&`运算符将正常工作，`canAssignMultiple`并将保存一个实际的布尔值。

并且（正如@mdmullinax 指出的那样，但我会以不同的方式做）一旦 canAssignMultiple 实际上是一个布尔值，您可以更改您的`if`语句以这样对待它们：

```
if (canAssignMultiple == "false") 
```

应该成为

```
if (!canAssignMultiple) 
```

与相应的`withdraw`东西类似。

# android - 如何在 Android 中向 MapView 添加位置精确定位

> ID：14132920
> 
> 赞同：1
> 
> 时间：2013-01-03T04:07:38.620
> 
> 标签：android, location, android-mapview

一直在搜索谷歌几个小时和 Android 文档无济于事。我已成功获得要显示的地图视图，但需要在地图视图的右上角添加一个位置精确定位按钮（如官方 Android 地图应用程序所示）。我正在寻找代码示例，因为我对整个 Android 世界都很陌生。

来自 iOS，所以看到在这方面几乎没有帮助是相当令人震惊的。我在想它要么很简单，要么是我想念的东西，要么是不可能的......

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T04:21:56.470

如果您使用的是 v2，那么您需要做的就是添加：

```
getMap().setMyLocationEnabled(true); 
```

在您的`onViewCreated()`方法中（在最后添加）。

# android - Eclipse 比较项目与本地历史不可用？

> ID：14132922
> 
> 赞同：0
> 
> 时间：2013-01-03T04:07:47.160
> 
> 标签：android, eclipse

我一直在寻找一种在 eclipse 中备份 android 项目的简单方法，发现了这个问题：[Android 是否有一种简单的方法来备份你的 android 项目？](https://stackoverflow.com/questions/5274757/android-is-there-a-easy-way-to-back-up-your-android-project)选定的答案指出`"You can also revert to a previous version if you are using Eclipse. Eclipse has this nice functionality called Local history that allows it. Right click on a file and use "compare with..." -> "Local History"."`

但是，当我右键单击项目并单击比较时，我只看到禁用选项“彼此”

我检查过`Preferences > General > Workspace > Local History`，但一切似乎都很好。

为什么 Eclipse 不备份我的项目？我该怎么做才能启用与本地历史比较的选项？

* * *

编辑我单击项目文件夹并意识到此功能仅适用于单个文件，我正在寻找的是恢复整个项目。是否可以在 Eclipse 上启用此功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T04:19:42.890

不，它只是按文件归档。Eclipse 并不打算用作版本控制机制。请注意，即使这是“接受”的答案，它也只有一个赞成票。在这种情况下，您正在寻找更多赞成票的人。只需花一点时间来使用真正的版本控制机制（如 Git）。

此外，Eclipse 不会真正“备份”任何东西，因为一切仍然是本地的，如果你的硬盘驱动器崩溃，一切都会再见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T04:22:58.700

你反对SVN吗？我使用[Subversive](http://www.eclipse.org/subversive/)，它似乎可以很好地备份/创建新项目以及在必要时更新/恢复到旧版本。您可以在单独的 Web 服务器或本地文件服务器上设置存储库。你可以得到[当地的历史](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.platform.doc.user%2FgettingStarted%2Fqs-55.htm)，但我不相信这是非常可靠的。我会使用常规备份或设置 SVN。设置好并安装插件后，它运行良好。

# css - Apache别名不起作用，WAMP

> ID：14132923
> 
> 赞同：3
> 
> 时间：2013-01-03T04:07:55.787
> 
> 标签：css, apache, wamp, alias, httpd.conf

我正在使用 WAMP。

我编辑了 httpd.conf 文件以包括：

```
Alias /static "c:/he/sites/browsbyboodah.com/htdocs/static" 
```

链接我的 .css 时，我使用以下路径：

```
<link rel="stylesheet" type="text/css" href="/static/css/reset.css" /> 
```

由于某种原因，我无法像这样加载 .css。我忘记了什么？

谢谢。

/* 编辑 */

经过一点调试后，我从查看页面源中找到以下内容并单击 css 文件：

```
Page not found (404)
Request Method: GET
Request URL http://127.0.0.1:8000/static/css/reset.css
css\reset.css could not be found 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T04:32:05.453

检查是否安装了 Apache`mod_alias`模块？并删除`"`

```
Alias /static/ /sites/browsbyboodah.com/htdocs/static/ 
```

或者，您可以使用**AliasMatch 指令**

> Alias 和 AliasMatch 之间的一个细微差别是 Alias 会自动将 URI 的任何其他部分复制到右侧文件路径的末尾。AliasMatch 没有。

```
 AliasMatch ^/static/(.*)$  /sites/browsbyboodah.com/htdocs/static/$1 
```

阅读本文[`article`](http://net.tutsplus.com/tutorials/apache-aliasing-and-redirection/)以获得更多帮助

# linux - 虚拟机上没有设备文件/dev/mem，如何创建一个

> ID：14132924
> 
> 赞同：0
> 
> 时间：2013-01-03T04:08:00.320
> 
> 标签：linux, driver, device

租用 VPS（Ubuntu 12.04），具有 root 访问权限，但是看不到设备文件 /dev/mem。有没有办法创建它来访问 BIOS 信息。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-09T10:48:18.323

```
mknod /dev/mem c `sed -n 's/ mem$//p' /proc/devices` 1 
```

# asp.net - Monotouch 使用 WebAPI FileContentResult

> ID：14132931
> 
> 赞同：2
> 
> 时间：2013-01-03T04:08:47.207
> 
> 标签：asp.net, xamarin.ios

有没有人有任何使用 ASP.NET WebApi 调用的经验，该调用为 MonoTouch 应用程序中的图像返回 FileContentResult？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T04:16:37.937

**简而言之：**是的，它是可行的，而且你几乎没有选择让它工作：

一篇完整的讨论它的文章是 - [Xamarin - Introduction to Web Services](http://docs.xamarin.com/ios/Guides/Application_Fundamentals/Introduction_to_Web_Services)。

此外，这里有一篇关于这个主题的 SP 帖子，似乎解决了您的问题 - [Monotouch 消费 ASP.NET Web Api](https://stackoverflow.com/q/12567232/1437962)。

# email - 以电子邮件形式发送 PDF

> ID：14132933
> 
> 赞同：1
> 
> 时间：2013-01-03T04:09:18.280
> 
> 标签：email, pdf, gridview, itextsharp, itext

我有以下代码，可以让我将 gridview 和 detailview 附加为 PDF 文件但我希望实现的不是下载它，而是将其作为电子邮件附加以发送给指定用户。有什么办法可以修改代码，以便我可以将其作为电子邮件发送而不是下载。

```
 Dim strQuery As String = "SELECT * FROM [PointOrder] WHERE PointOrderId =" & Session("PointOrder")
    Dim cmd As New SqlCommand(strQuery)
    Dim dt As DataTable = GetData(cmd)

    Dim DetailsView1 As New DetailsView()
    DetailsView1.AllowPaging = False
    DetailsView1.DataSource = dt
    DetailsView1.DataBind()

    Dim strQuery2 As String = "SELECT PointsOrderDetail.RedeemId, Redeem.RedeemName, Redeem.RedeemPoints, PointsOrderDetail.RedeemOrderQuantity, Redeem.RedeemPoints * PointsOrderDetail.RedeemOrderQuantity AS Total_Points FROM PointsOrderDetail INNER JOIN Redeem ON PointsOrderDetail.RedeemId = Redeem.RedeemId WHERE PointsOrderDetail.PointOrderId = " & Session("PointOrder")
    Dim cmd2 As New SqlCommand(strQuery2)
    Dim dt2 As DataTable = GetData(cmd2)

    Dim GridView1 As New GridView()
    GridView1.AllowPaging = False
    GridView1.DataSource = dt2
    GridView1.DataBind()

    Response.ContentType = "application/pdf"
    Response.AddHeader("content-disposition", "attachment;filename=" & Session("ID") & "-" & Session("PointOrder") & "-RedeemConfirm.pdf")
    Response.Cache.SetCacheability(HttpCacheability.NoCache)
    Dim sw As New StringWriter()
    Dim hw As New HtmlTextWriter(sw)
    DetailsView1.RenderControl(hw)
    GridView1.RenderControl(hw)
    Dim sr As New StringReader(sw.ToString())
    Dim pdfDoc As New Document(PageSize.A4, 10.0F, 10.0F, 10.0F, 0.0F)
    Dim htmlparser As New HTMLWorker(pdfDoc)
    PdfWriter.GetInstance(pdfDoc, Response.OutputStream)
    pdfDoc.Open()
    htmlparser.Parse(sr)
    pdfDoc.Close()
    Response.Write(pdfDoc)
    Response.End()

Private Function GetData(ByVal cmd As SqlCommand) As DataTable
    Dim dt As New DataTable()
    Dim strConnString As [String] = System.Configuration.ConfigurationManager.ConnectionStrings("LegacySGConnectionString").ConnectionString()
    Dim con As New SqlConnection(strConnString)
    Dim sda As New SqlDataAdapter()
    cmd.CommandType = CommandType.Text
    cmd.Connection = con
    Try
        con.Open()
        sda.SelectCommand = cmd
        sda.Fill(dt)
        Return dt
    Catch ex As Exception
        Throw ex
    Finally
        con.Close()
        sda.Dispose()
        con.Dispose()
    End Try
End Function 
```

# php - Google Translate API 错误“无法执行翻译：请使用 Translate v2。请参阅 http://code.google.com/apis/language/translate/overview.html”

> ID：14132937
> 
> 赞同：1
> 
> 时间：2013-01-03T04:09:50.193
> 
> 标签：php, api, google-translate

我正在使用谷歌的 GTranslate 我已经按照步骤创建帐户并使用了 api 密钥，但我在这部分感到困惑。任何人？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T04:49:49.953

您正在使用已弃用的 API。

Google 关闭了免费版翻译器，并要求用户在 2011 年之前切换到付费版。

[详情在这里](http://www.gts-translation.com/blog/2011/12/06/google-translate-api-casualties/)

[在这里](https://developers.google.com/translate/)谷歌正式宣布了它。

*Google Translate API 作为付费服务提供。有关详细信息，请参阅定价和常见问题页面。*

# django - 自删除模型对象 Django

> ID：14132941
> 
> 赞同：0
> 
> 时间：2013-01-03T04:10:28.250
> 
> 标签：django

如何让模型对象在初始化 60 秒后自行删除？我知道您可以覆盖 delete() 方法，让它在实际删除对象之前休眠 60 秒。但是，如果我在视图中对 delete() 进行了方法调用。它不会在继续之前将视图停止 60 秒吗？

那么我怎样才能做到这一点而不必担心这些摊​​位呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T10:29:09.280

在模型中放置一个“to_be_deleted”布尔字段，并设置一个 cron 作业以每 60 秒运行一次，以删除所有设置了标志的实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T04:19:23.697

可能您可以启动新线程，等待 60 秒并删除对象。所以视野不会被挡住。

另一种方法是使用像[Celery](http://celeryproject.org/)这样的异步任务管理器来启动一个新任务以在 60 秒后删除对象。

# ios - iOS：如何针对不同的目标进行开发

> ID：14132943
> 
> 赞同：2
> 
> 时间：2013-01-03T04:11:04.457
> 
> 标签：ios, xcode, targets

我有一个 Xcode 项目，其中包含三个不同的目标（例如足球、棒球、篮球），从而产生了三个不同的应用程序。大多数代码是相同的，但有时它是特定于目标的。

实现特定于目标的方法的最佳方法是什么？我想避免

```
if ([AppDelegate isSoccerTarget] {
   ...
} else if () {
   ...
} else if () {
   ...
} 
```

我正在考虑使用仅存在于三个目标之一中的类别，但是我不能使用默认实现。而且我想避免继承，因为某些类已经在类层次结构中，并且我想保持简单（避免人员 => 球员、经理导致足球运动员、篮球运动员等）。

你这样做的方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T04:21:37.440

我处理它的方式是将任何类似的东西放在一个添加到所有目标的超类中，然后我创建一个对每个目标都不同的新类（例如“Player”）。

所以在源目录中我会有子目录和文件：

篮球/Player.m 棒球/Player.m ...

然后我会选择篮球/Player.m 的“目标会员”作为“篮球”目标。

这样我只需要实例化一个 Player 类一次，根据我的目标，它会自动创建正确的类。希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T04:42:57.003

您将在 Xcode 项目窗格（最顶部的文件）中创建目标，然后在每个目标的其中一个选项卡中（我忘记是哪个选项卡）在**预处理器宏**中添加一些值（可能是预编译器宏） . 然后，在您的代码中，您可以这样做：假设棒球目标的预处理器宏称为 BASEBALL，而足球则称为 SOCCER。您的代码如下所示：

```
...blablablaothercode...
#ifdef BASEBALL
      NSLog(@"Baseball!");
#endif
#ifdef SOCCER
      NSLog(@"Soccer!");
#endif
...blablablaothercode... 
```

这些可以在任何可以使用普通代码的地方使用。把它想象成一个'switch'语句，编译器可以使用它来查看每个目标使用什么代码。

# sencha-touch-2 - 居中对齐视口

> ID：14132944
> 
> 赞同：1
> 
> 时间：2013-01-03T04:11:27.343
> 
> 标签：sencha-touch-2, viewport

我创建了一个在启动时启动视口的应用程序。这覆盖了整个屏幕。所以我为它提供了一个宽度和高度。下一个要求是应用在屏幕中居中对齐。

我使用的代码是：

```
//<debug>
 Ext.Loader.setConfig({disableCaching:false});
 Ext.Loader.setPath({
'Ext': 'sdk/src'
});
//</debug>

Ext.application({
name: 'SEPA',
controllers: ["MainController"],
requires: [
    'Ext.MessageBox'
],

controllers:['MainController'],

icon: {
    57: 'resources/icons/Icon.png',
    72: 'resources/icons/Icon~ipad.png',
    114: 'resources/icons/Icon@2x.png',
    144: 'resources/icons/Icon~ipad@2x.png'
},

phoneStartupScreen: 'resources/loading/Homescreen.jpg',
tabletStartupScreen: 'resources/loading/Homescreen~ipad.jpg',
fullscreen: false,
//centered:true,
 // margin: 100,

launch: function() {
    Ext.Viewport.setWidth(320);
    Ext.Viewport.setHeight(480);

    //Ext.Viewport.setCentered(false);
   // Ext.Viewport.setRight(2);

    // Destroy the #appLoadingIndicator element

},

onUpdated: function() {
    Ext.Msg.confirm(
        "Application Update",
        "This application has just successfully been updated to the latest version. Reload now?",
        function() {
            window.location.reload();
        }
    );
}
 }); 
```

如您所见，该应用程序位于浏览器的最左角。我怎样才能让它在屏幕的中心？

![在此处输入图像描述](../Images/34049476cf9afca12b5215d12942acd0.png)

任何帮助表示赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T04:57:16.733

将此添加到您的`css`or`scss`文件中：

```
body {
    position:absolute;
    left:50%;
    top:50%;
    margin-left:-160px;
    margin-top:-240px;
} 
```

希望能帮助到你 ：）

# vba - 需要在所有行的公式中应用查找方法

> ID：14132949
> 
> 赞同：1
> 
> 时间：2013-01-03T04:11:34.957
> 
> 标签：vba, find, formula

我在宏的公式中使用 vlookup 。但是如果应用于包含超过 90k 行的工作表则需要太多时间。

相反，我喜欢使用 find 或 Instr 方法来减少时间。但是如果我使用“查找：方法”，我会收到错误消息。我不知道如何使用“Instr”

```
Sub testt()

Dim l As Long

l = Sheets(1).Range("A1:A" & Sheets(1).Cells(Sheets(1).Rows.Count, "A").End(xlUp).Row).Count
    With Sheets("Sheet1")
        .Range("d1").Formula = "=IF(iferror(vlookup(c1,$D:$D,1,false),"""")="""","""",1)"
        .Range("d1").AutoFill Destination:=Range("d1:d" & l), Type:=xlFillDefault
    End With
End Sub 
```

这是我的 vlookup 公式。但我需要用 find 替换 vlookup

```
l = Sheets(1).Range("A1:A" & Sheets(1).Cells(Sheets(1).Rows.Count, "A").End(xlUp).Row).Count
    With Sheets("Sheet1")
        .Range("d1").Formula = "=IF(iferror(range("A1:A" & l).find(c1),"""")="""","""",1)"
        .Range("d1").AutoFill Destination:=Range("d1:d" & l), Type:=xlFillDefault
    End With 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T17:33:53.840

我所知道的 Excel 中没有 FIND 函数。但是，您可以编写一个 VBA 函数来查找查找列中的每个相关单元格。这是相关的代码：

```
Function IfFound(SearchText As String) As String

Dim FoundCell As Range

'look in particular column for a value
Set FoundCell = Columns("A:A").Find(What:=SearchText, lookat:=xlWhole)

'if found, return value in cell to its right
If FoundCell Is Nothing Then
    IfFound = ""
Else
    IfFound = FoundCell.Offset(0, 1).Value
End If 
```

结束功能

你可以这样称呼它：

```
Sub TestFunction()

'make sure word TEST is in column A somewhere
MsgBox IfFound("test") 
```

结束子

不确定这是否是您要查找的内容，但它的运行速度会比 VLOOKUP 快得多。唯一的问题是，当工作表中发生任何更改时，您必须找到一种自动运行它的方法。

# c++ - 如何从 LogPolar 变换中获取比例和旋转角度

> ID：14132951
> 
> 赞同：11
> 
> 时间：2013-01-03T04:11:46.163
> 
> 标签：c++, opencv

我正在尝试使用 LogPolar 变换从两个图像中获取比例和旋转角度。下面是两张 300x300 的示例图像。第一个矩形是 100x100，第二个矩形是 150x150，旋转 45 度。

![在此处输入图像描述](../Images/42dff261f5a1bfc28577b3dd7d05ecc3.png) ![在此处输入图像描述](../Images/84a4c12ffccf4d1c1e8099ffcff949d3.png)

算法：

1.  将两个图像都转换为 LogPolar。
2.  使用相位相关查找平移偏移。
3.  将平移转换为比例和旋转角度（如何做到这一点？）。

我的代码：

```
#include <opencv2/imgproc/imgproc.hpp>
#include <opencv2/imgproc/imgproc_c.h>
#include <opencv2/highgui/highgui.hpp>
#include <iostream>

int main()
{
    cv::Mat a = cv::imread("rect1.png", 0);
    cv::Mat b = cv::imread("rect2.png", 0);
    if (a.empty() || b.empty())
        return -1;

    cv::imshow("a", a);
    cv::imshow("b", b);

    cv::Mat pa = cv::Mat::zeros(a.size(), CV_8UC1);
    cv::Mat pb = cv::Mat::zeros(b.size(), CV_8UC1);
    IplImage ipl_a = a, ipl_pa = pa;
    IplImage ipl_b = b, ipl_pb = pb;
    cvLogPolar(&ipl_a, &ipl_pa, cvPoint2D32f(a.cols >> 1, a.rows >> 1), 40);
    cvLogPolar(&ipl_b, &ipl_pb, cvPoint2D32f(b.cols >> 1, b.rows >> 1), 40);

    cv::imshow("logpolar a", pa);
    cv::imshow("logpolar b", pb);

    cv::Mat pa_64f, pb_64f;
    pa.convertTo(pa_64f, CV_64F);
    pb.convertTo(pb_64f, CV_64F);

    cv::Point2d pt = cv::phaseCorrelate(pa_64f, pb_64f);

    std::cout << "Shift = " << pt 
              << "Rotation = " << cv::format("%.2f", pt.y*180/(a.cols >> 1)) 
              << std::endl;

    cv::waitKey(0);

    return 0;
} 
```

日志极坐标图像：

![在此处输入图像描述](../Images/f90887f7c3fb57deb572173c4cba973c.png) ![在此处输入图像描述](../Images/a23d3848f17cfc2a64fd1caabfc0beeb.png)

对于上面的示例图像图像，平移位移为`(16.2986, 36.9105)`。我已经成功获得了旋转角度，即`44.29`. 但我很难计算规模。如何转换给定的平移位移以获得比例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T22:48:02.903

您有两个图像*f1*，*f2*与*f1(m, n) = f2(m/a , n/a)*即*f1*按因子 a 缩放

在等效于*f1(log m, log n) = f2(logm − log a, log n − log a) 的*对数符号中，其中*log a*是相位相关图像的偏移。

比较*BS Reddy，BN Chatterji：一种基于 FFT 的平移、旋转和尺度不变图像配准技术，IEEE Transactions On Image Processing Vol。5 第 8 期，IEEE，1996*

[http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.185.4387&rep=rep1&type=pdf](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.185.4387&rep=rep1&type=pdf)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-30T08:13:09.767

[这是python版本](http://www.lfd.uci.edu/~gohlke/code/imreg.py.html)

这告诉

```
ir = abs(ifft2((f0 * f1.conjugate()) / r0))
    i0, i1 = numpy.unravel_index(numpy.argmax(ir), ir.shape)
    angle = 180.0 * i0 / ir.shape[0]
    scale = log_base ** i1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-24T07:54:22.083

比例因子的值确实是`exp(pt.y)`。**但是，由于您为cvLogPolar**函数使用了 40 的“幅度比例参数” ，因此您现在需要将 pt.x 除以 40 以获得正确的位移值：

```
Scale = exp( pt.x / 40) = exp(16.2986 / 40) = 1.503 
```

**cvLogPolar**函数的“幅度比例参数”的值不会影响旋转角度 pt.x 产生的位移，因为根据数学计算，它抵消了。因此，您的旋转公式给出了正确的值。

另一方面，我认为轮换的公式实际上应该是：

旋转 = pt.y*360/(a.cols)

但是，由于某些奇怪的原因，您添加的“>> 1”导致结果乘以 2（我相信您通过乘以 180 而不是 360 来补偿？）删除它，你会看到什么我是说。

此外，“>>1”会导致除以 2：

cvPoint2D32f(a.cols >> 1, a.rows >> 1)

如果将 cvLogPolar 函数的 center 参数设置为图像的中心（这是你想要的）：

cvPoint2D32f(a.cols/2, a.rows/2)

和

cvPoint2D32f(b.cols/2, b.rows/2)

然后，您还将获得正确的旋转值（即与您获得的值相同）和比例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-29T11:58:58.397

该线程有助于我开始研究旋转不变相位相关，因此我希望我的输入将有助于解决任何挥之不去的问题。

我们的目标是计算比例和旋转（在代码中计算不正确）。让我们首先从[logPolar 文档](http://docs.opencv.org/3.2.0/da/d54/group__imgproc__transform.html#gaec3a0b126a85b5ca2c667b16e0ae022d)中收集方程。他们在那里声明如下：

```
(1) I = (dx,dy) = (x-center.x, y-center.y)
(2) rho = M * ln(magnitude(I))
(3) phi = Ky * angle(I)_0..360 
```

*注意：在上面的代码中，rho 是 pt.x，phi 是 pt.y*

我们也知道

```
(4) M = src.cols/ln(maxRadius)
(5) Ky = src.rows/360 
```

首先，让我们解决规模问题。求解等式 2 中的幅度（I）（即比例），我们得到

```
(6) magnitude(I) = scale = exp(rho/M) 
```

然后我们代入 M 并简化得到

```
(7) magnitude(I) = scale = exp(rho*ln(maxRadius)/src.cols) = pow(maxRadius, rho/src.cols) 
```

现在让我们解决旋转问题。求解方程 3 中的角度（I）（即旋转），我们得到

```
(8) angle(I) = rotation = phi/Ky 
```

然后我们代入 Ky 并简化得到

```
(9) angle(I) = rotation = phi*360/src.rows 
```

因此，可以分别使用等式 7 和 9 计算比例和旋转。可能值得注意的是，您应该使用等式 4 来计算 M 和`Point2f center( (float)a.cols/2, (float)a.rows/2 )`计算中心，而不是上面代码中的内容。[这个logpolar 示例 opencv 代码](http://docs.opencv.org/3.2.0/dc/d5e/polar_transforms_8cpp-example.html#a12)中有一些很好的信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-08T06:17:17.700

从相位相关的值来看，坐标是直角坐标，因此 (16.2986, 36.9105) 是 (x,y)。规模计算为

scale = log((x^2 + y^ 2)^0.5) 约为 1.6（接近 1.5）。

当我们使用公式计算角度时，theta = arctan(y/x) = 66(approx)。theta 值是实际值的方式（在这种情况下为 45）。

# javascript - this.appendChild 不是函数

> ID：14132953
> 
> 赞同：0
> 
> 时间：2013-01-03T04:12:02.790
> 
> 标签：javascript, jquery, html, jquery-ui

我在下面有 JS，一旦单击图像下方的图像，我试图显示一个菜单项，一旦单击一个项目，它就会消失。我有多个图像，这就是我构建这个动态内容菜单的原因。我打算通过在 userMenuContent 中添加一堆 html 元素

```
using var userMenuContent ="<div><form>...</<form></div>"; 
```

但首先我的小测试失败了

```
function userMenu() {
    var userMenudiv = document.createElement("div");
    userMenudiv.setAttribute("class", "statusContainer");
     var userMenuContent = "<p>test</p>";
    $(userMenudiv).append($(userMenuContent));
    $(userMenudiv).hide();
    this.appendChild(userMenudiv);
    $(userMenudiv).slideDown();
}

    <img  class="icon" src="image.png" onclick="userMenu()"/> 
```

当我单击图像时，我得到 TypeError: this.appendChild is not a function。我正在使用 jquery 1.8.3 和 jquery-ui1.8.24

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T04:43:30.303

'this' 指的是窗口对象，而不是图像。

不要使用内联事件处理程序。给 DOM 元素一个 id 并以这种方式选择它。

您不能将 div 添加到图像中。相反，您需要指定另一个目标元素

由于您使用的是 jQuery，因此只需使用 jQuery 方式即可。

```
$(document).ready(function(){

    $('#userMenuImg').click(function(){

        $('#target')
            .append('<div class="statusContainer"><p>test</p></div>')
            .slideDown();

    });

});
<img id="userMenuImg" class="icon" src="https://encrypted-tbn2.gstatic.com/images?q=tbn:ANd9GcRMKbTxKTOJbJvVTt2SZak49lARNnCU4D7ECfZn1KspIn6SXDHz3A">

<div id="target"></div> 
```

​ ​</p>

# localization - 为每个语言环境使用 gettext 与单独的动态库的优缺点是什么？

> ID：14132956
> 
> 赞同：0
> 
> 时间：2013-01-03T04:12:17.940
> 
> 标签：localization, translation, gettext

我与另一个 SO 用户讨论了[GNU gettext](http://www.gnu.org/software/gettext/)及其限制等问题。他认为 gettext 是“不足的”，不适合其他语言的惯用输出，正确的方法是“为每个语言环境编写一个单独的 DLL/类”。我认为这值得一个单独的问题，那么使用 gettext 与为每个语言环境使用单独的动态库有什么优点和缺点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T15:13:40.880

老实说，我看不出单独的动态库会做什么？

本地化的问题通常不在于 gettext，而更多在于实现和翻译。

例如，如果您有这样的文字：“我有”+i+“汽车”，那么很难翻译。
但这不是 gettext 问题。

# javascript - 获取数组中最长的路径，函数式

> ID：14132967
> 
> 赞同：0
> 
> 时间：2013-01-03T04:13:40.513
> 
> 标签：javascript, svg, functional-programming, geometry

我有一组代表三角形边的 SVG 线，我想为最长的一条（斜边）着色。假设`ab`和是 SVG元素`bc`...`ca``line`

```
var hypotenuse = [ab, bc, ca].sort(getLineLength)[0];
hypotenuse.setAttribute("stroke-width", 5);

function getLineLength(el) {
    var x1 = el.getAttribute("x1");
    var x2 = el.getAttribute("x2");
    var y1 = el.getAttribute("y1");
    var y2 = el.getAttribute("y2");
    var xs = x2 - x1;
    var ys = y2 - y1;
    xs = xs * xs;
    ys = ys * ys;
    return Math.sqrt(xs + ys);
}​ 
```

这不起作用，它似乎总是抓住第一个元素。它看起来也不是很直观。在Javascript中实现这一目标的正确方法是什么？我知道如何在循环中做到这一点，但我想知道是否有一些功能性习语可以让我实现这一点。

JSFiddle 在这里：http: [//jsfiddle.net/btbkd/](http://jsfiddle.net/btbkd/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T04:30:10.413

当您将函数传递给 sort() 时，该函数必须接受两个参数并返回比较它们的结果（-1、0 或 1），或者如果比较数字，则只需减去两个参数：[Mozilla Array。排序参考](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort "Mozilla Array.sort 参考")

使您的示例工作的简单方法应该是这样的：

```
var hypotenuse = [ab, bc, ca].sort(function(lineOne, lineTwo) {
    return getLineLength(lineTwo) - getLineLength(lineOne);
})[0]; 
```

然后剩下的就像你已经拥有的一样。请注意，减法的顺序很重要，因为它将是从最低到最高或从最高到最低排序之间的差异。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T04:33:29.863

因为`function`in`array.sort(function)`需要两个参数，你应该返回一个整数，它是

*   小于零（表示第一个应该在第二个之前）；
*   零（表示两者相等）；
*   大于零（表示第二个比第一个早）。

[MDN 文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort)

你也忘了重置线宽。

[JSFiddle](http://jsfiddle.net/btbkd/2/)

**编辑**：

请注意，我`Math.sqrt`从您的函数中删除了部分`getLineLength`，因为如果比较是您对该函数的期望，则不需要计算平方根，删除它可能会使其更快一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T04:38:06.160

我不记得 JavaScript 语法，所以语法可能是错误的，但如果我正确理解你的问题，就不需要 sort() 并且你应该能够做到：

```
var maxLength = 0;
var longestElement = -1;
for (var i = 0; i < array.length; i++) {
    if( getLineLength(array[i]) > maxLength )
        longestElement = i;
} 
```

如果longestElement 为-1，则没有长度大于0 的线。否则，斜边为array[longestElement]。

请注意，这和 sort() 示例都没有对等长的线（例如等边三角形）进行任何特殊处理。

# mysql - MySQL COUNT 查询在数据库为空时返回行

> ID：14132969
> 
> 赞同：0
> 
> 时间：2013-01-03T04:13:46.467
> 
> 标签：mysql, count

我这样做的方式有什么问题吗，因为我清空了数据库表来测试这段代码，它为 $cc_rows 返回了一个值“1”......

```
$ccquerycount = "SELECT COUNT(*) FROM payments_cc_info WHERE user_id=$userid";
                $ccresult = mysql_query($ccquerycount) or die(mysql_error());
                $cc_rows = mysql_num_rows($ccresult);

                echo $cc_rows;

                if ($cc_rows > 0) {
                echo '<div class="message_success" align="center">Credit Card info on file.<br />Edit settings to change.</div>';
                } else {
                echo '<div class="message_error" align="center">No Credit Card info on file.<br />Edit settings to change.</div>';
                } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T04:15:17.673

您将得到一行，一列，该列的值为零。

您需要执行`SELECT * FROM payments_cc_info WHERE user_id=$userid`并计算那里的行数，或者获取`COUNT(*)`并检查它的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T04:28:01.940

由于我们使用 mysql_num_rows，它总是会在 count( *) 查询中返回值“1”，但需要注意的是，1 是查询返回的总行数，而不是 count(* ) 的值。

使用 mysql_fetch_row 应该可以解决问题。

```
$ccquerycount = "SELECT COUNT(*) FROM payments_cc_info WHERE user_id=$userid";
$ccresult = mysql_query($ccquerycount) or die(mysql_error());

$row = mysql_fetch_row($ccresult);
$cc_rows = $row[0];

mysql_close($con);

echo $cc_rows;

if ($cc_rows > 0) {
                echo '<div class="message_success" align="center">Credit Card info on file.<br />Edit settings to change.</div>';
                } else {
                echo '<div class="message_error" align="center">No Credit Card info on file.<br />Edit settings to change.</div>';
                } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T04:25:47.437

Insted of `count`,`Exists`更快:)

您也可以尝试以下方法。

```
SELECT IF(EXISTS(SELECT * FROM payments_cc_info WHERE user_id=$userid),1,0) AS result 
```

参考帖子：[测试 MySQL 表中是否存在行的最佳方法](https://stackoverflow.com/questions/1676551/best-way-to-test-if-a-row-exists-in-a-mysql-table)。

# ruby - 尝试运行 Heroku 应用程序时出错

> ID：14132971
> 
> 赞同：0
> 
> 时间：2013-01-03T04:14:10.433
> 
> 标签：ruby, heroku, heroku-toolbelt

我一直在尝试部署我的第一个 Heroku 应用程序，但一个又一个问题继续遇到问题。我会继续粘贴我遇到的错误代码。

在 heroku.open 上：

> 打开secure-reef-1182...失败！Heroku 客户端内部错误。！在以下位置搜索帮助：[https](https://help.heroku.com) ://help.heroku.com ！或报告错误：[https ://github.com/heroku/heroku/issues/new](https://github.com/heroku/heroku/issues/new)
> 
> 错误：未定义的方法`licenses=' for #<Gem::Specification name=multi_json >version=1.5.0> (NoMethodError) Backtrace: /usr/local/lib/site_ruby/1.9.1/rubygems/source_index.rb:74:in`eval' /usr/local/lib/site_ruby/1.9.1/rubygems/specification.rb:388:in
> 
> 版本：heroku-toolbelt/2.33.5 (x86_64-linux) ruby​​/1.9.3

在 heroku.ps 上

> === web: `bundle exec rails server -p $PORT` web.1: 崩溃 2013/01/02 21:07:51 (~ 4m 前)

在我的 heroku.logs 中，我收到这些类型的错误消息

> at=error code=H10 desc="App crashed" method=GET path=/ host=secure-reef-1182.herokuapp.com >fwd=50.134.210.222 dyno= queue= wait= connect= service= status=503 bytes=

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T19:03:15.133

> “Web 进程崩溃或 Web 进程启动超时将出现此错误。”

*   确保您首先在开发环境中测试所有内容。
*   如果您的应用在本地运行，请检查需要在 heroku 中设置的全局配置。

# c# - (datagridview) 根据列值更新行的字体颜色

> ID：14132980
> 
> 赞同：5
> 
> 时间：2013-01-03T04:15:34.243
> 
> 标签：c#, winforms

我想问一行如何根据`dataGridView`.

例如，一个表有 4 列，它们是：`id, name, rentPayMent and check`.

检查每一行是否有任何值`check == 0` If yes, then this row's font `color = red` Else`do nothing`

在运动中，我使用以下代码，但它会导致错误

> 对象引用未设置为对象的实例，System.NullReferenceException 未处理

```
private void dataGridView1_DataBindingComplete(object sender, DataGridViewBindingCompleteEventArgs e)
{
    foreach (DataGridViewRow row in dataGridView1.Rows)
    {
        if (row.Cells[3].Value.ToString() == "0") //**Object reference not set to an instance of an object**
        {
            row.DefaultCellStyle.BackColor = Color.Red;  //then change row color to red
        }
    }
} 
```

**谢谢大家，我已经得到了解决方案。**

```
 private void dataGridView1_CellFormatting(object sender, DataGridViewCellFormattingEventArgs e)
    {
        if (dataGridView1.Rows[e.RowIndex].Cells[3].Value != null && !string.IsNullOrWhiteSpace(dataGridView1.Rows[e.RowIndex].Cells[3].Value.ToString()))
        {
            if (dataGridView1.Rows[e.RowIndex].Cells[3].Value.ToString().Trim() == "0")
                dataGridView1.Rows[e.RowIndex].DefaultCellStyle = new DataGridViewCellStyle { ForeColor = Color.Red };
        }
        else
        {
            dataGridView1.Rows[e.RowIndex].Cells[3].Style = dataGridView1.DefaultCellStyle;
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T04:21:49.980

```
private void dataGridView1_CellFormatting(object sender, DataGridViewCellFormattingEventArgs e)
{
    if (dataGridView1.Rows[e.RowIndex].Cells[e.ColumnIndex].Value != null && !string.IsNullOrWhiteSpace(dataGridView1.Rows[e.RowIndex].Cells[e.ColumnIndex].Value.ToString()))
    {
        dataGridView1.Rows[e.RowIndex].Cells[e.ColumnIndex].Style = new DataGridViewCellStyle { ForeColor = Color.Orange, BackColor = Color.Blue };
    }
    else
    {
        dataGridView1.Rows[e.RowIndex].Cells[e.ColumnIndex].Style = dataGridView1.DefaultCellStyle;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T04:30:55.897

我在winform上做到了。

在下面尝试我的代码：

```
private void dataGridView1_DataBindingComplete(object sender, DataGridViewBindingCompleteEventArgs e)
        {

            foreach (DataGridViewRow row in dataGridView1.Rows)
            {

                if (row.Cells["YourDatagridColumnName"].Value.ToString() == "0") //if check ==0
                {
                    row.DefaultCellStyle.BackColor = Color.Red;  //then change row color to red
                } 

            }

        } 
```

此致

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T23:05:25.527

我使用类似的东西：

```
private void dataGridView1_DataBindingComplete(object sender, DataGridViewBindingCompleteEventArgs e)
{
    foreach (DataGridViewRow row in dataGridView1.Rows)
    {
        if(!string.IsNullOrEmpty(row.Cells[3].Value.ToString()))  // make sure the value is present
        (
          if (row.Cells[3].Value.ToString() == "0") 
          {
              row.DefaultCellStyle.BackColor = Color.Red;  //then change row color to red
          }
        )
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-20T15:16:33.380

最好在 dataGridView 中命名列。例如，将列检查命名为 colCheck。使用 CellFormatting 方法改变行字体颜色如下

```
private void dataGridView1_CellFormatting(object sender, DataGridViewCellFormattingEventArgs e)
{

    if (e.RowIndex > -1 && e.ColumnIndex == dataGridView1.Columns["colCheck"].Index)
        {
            if (e.Value != null)
            {

                if (dataGridView1.Rows[e.RowIndex].Cells["colCheck"].Value.ToString() == "1")
                {
                    for (int i = 0; i < this.dataGridView1.Columns.Count; i++ )
                    {
                        this.dataGridView1.Rows[e.RowIndex].Cells[i].Style.ForeColor = Color.Red;
                    }

                }
                else
                {
                    for (int i = 0; i < this.dataGridView1.Columns.Count; i++ )
                    {
                        this.dataGridView1.Rows[e.RowIndex].Cells[i].Style.ForeColor = Color.Black;
                    }
                }
            }
        }

} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-03T04:43:08.250

我个人会使用 JavaScript 来处理这个逻辑。但是，如果绝对必须将它放在 CodeBehind 中，我会检查单元格的值是否为“0”。如果是这样，我会添加一个“红色”（或您选择的任何名称）的 CssClass，然后编写 CSS 以获得颜色值。这至少会使维护变得更容易，而不是让服务器端处理颜色。

# android - android更新小部件外观

> ID：14132982
> 
> 赞同：0
> 
> 时间：2013-01-03T04:15:37.253
> 
> 标签：android, android-widget, remoteview

我想在用户单击它时更改 android 小部件的视觉元素之一。这是在小部件的 xml 中

```
 <ImageView
      android:id="@+id/bg"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_centerInParent="false"
      android:layout_marginLeft="20dp"
      android:layout_marginTop="18dp"
      android:src="@drawable/seal" /> 
```

我想根据 ID 更改 src，所以我计划从小部件中发送 remoteView 一个点击`listener`

```
 Intent bgSwitch = new Intent(widgetContext, MainActivity.class);
 bgSwitch.putExtra("jurisdiction", "bg");
 PendingIntent bgIntent = PendingIntent.getActivity(widgetContext,
 6, bgSwitch, PendingIntent.FLAG_UPDATE_CURRENT);
 remoteView.setOnClickPendingIntent(R.id.bg, bgIntent); 
```

在一个透明的活动中（或在小部件本身）我想以某种方式改变`imageview`' 的来源。

我不想只是翻转一堆`imageviews`.

这将如何实现？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T06:40:26.883

你可以这样试试：

```
public class SwitchWidget extends AppWidgetProvider {
public static String SWITCH_WIDGET_UPDATE = "MainActivity.Switch";
public static String WIFI = "wifi";

@Override
public void onUpdate(Context context, AppWidgetManager appWidgetManager,
        int[] appWidgetIds) {
    // TODO Auto-generated method stub
    super.onUpdate(context, appWidgetManager, appWidgetIds);
    updateSwitch1(context, appWidgetManager, appWidgetIds[0]);
}

@Override
public void onReceive(Context context, Intent intent) {
    // TODO Auto-generated method stub
    super.onReceive(context, intent);
    Log.d("SWitch Widget", "On Receive");

    WifiManager wifiManager = (WifiManager) context
            .getSystemService(Context.WIFI_SERVICE);

    RemoteViews remoteViews;

    AppWidgetManager appWidgetManager = AppWidgetManager
            .getInstance(context);

    if (SWITCH_WIDGET_UPDATE.equals(intent.getAction())) {
        Log.d("SWitch Widget", "Widget Choose");
        ComponentName thisAppWidget = new ComponentName(
                context.getPackageName(), getClass().getName());

        int ids[] = appWidgetManager.getAppWidgetIds(thisAppWidget);
        for (int appWidgetID : ids) {

                updateSwitch1(context, appWidgetManager, appWidgetID);
            } 

        }

    }
    if (intent.getAction().equals(WIFI)) {

            if(wifiManager.isWifiEnabled())
                wifiManager.setWifiEnabled(false);
            else
                wifiManager.setWifiEnabled(true);

        // appWidgetManager.updateAppWidget(1, remoteViews);
    }
    else if (intent.getAction().equals(WifiManager.WIFI_STATE_CHANGED_ACTION)) {

            remoteViews = new RemoteViews(context.getPackageName(),
                    R.layout.widget1);
            wifiManager = (WifiManager) context
                    .getSystemService(Context.WIFI_SERVICE);
            if (wifiManager.isWifiEnabled()) {
                remoteViews.setImageViewResource(R.id.button_one,
                        R.drawable.switch_1_wifi_on);
            } else {

                remoteViews.setImageViewResource(R.id.button_one,
                        R.drawable.switch_1_wifi_off);
            }
            appWidgetManager.updateAppWidget(new ComponentName(context,
                    SwitchWidget.class), remoteViews);

    }

private void updateSwitch1(Context context,
        AppWidgetManager appWidgetManager, int appWidgetId) {
    // TODO Auto-generated method stub
    Log.d("SWitch Widget", "Switch1");
    RemoteViews remoteViews = new RemoteViews(context.getPackageName(),
            R.layout.widget1);

    WifiManager wifi = (WifiManager) context
            .getSystemService(Context.WIFI_SERVICE);
    if (wifi.isWifiEnabled())
        remoteViews.setImageViewResource(R.id.button_one, R.drawable.switch_1_wifi_on);
    else
        remoteViews
                .setImageViewResource(R.id.button_one, R.drawable.switch_1_wifi_off);

    Intent wifiIntent = new Intent(context, SwitchWidget.class);
    wifiIntent.putExtra("ID", appWidgetId);
    wifiIntent.setAction(WIFI);
    PendingIntent wifiPendingIntent = PendingIntent.getBroadcast(context,
            0, wifiIntent, 0);
    remoteViews.setOnClickPendingIntent(R.id.button_one, wifiPendingIntent);

    appWidgetManager.updateAppWidget(appWidgetId, remoteViews);
    }

  } 
```

并且不要忘记在清单文件中添加操作并为此添加权限。

```
 <action android:name="android.net.wifi.WIFI_STATE_CHANGED" />
            <action android:name="wifi" /> 
```

# ios - 使用 FMDB 从 sqlite 显示数据到标签

> ID：14132984
> 
> 赞同：1
> 
> 时间：2013-01-03T04:16:00.407
> 
> 标签：ios, sqlite, ios5, ios6, fmdb

如何使用 FMDB 将 SQLite 中的数据显示到标签，如下所示：

![在此处输入图像描述](../Images/a776196b2cf82b670a572351e693948b.png)

我想以这种格式显示任何输出供用户查看。没有互动。仅显示`select`查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T04:43:33.337

*您可以通过使用UITableView*和**自定义** *UITableViewCells*来完成上述操作。

您可以维护一个数组，该数组将充当视图控制器的数据源。

考虑到您希望拥有与共享相同的布局（每行有四个标签），您将从数据库中获取数据。

由于从数据库中获取的数据可能会不断增加，UITableView 是显示长数据列表时的最佳选择，因为内存管理和单元格创建是自动处理的。

如果您打算只使用标签，那么事情对您来说可能会变*得很棘手*。因为如果您使用查询获取的行数`select`过多，那么您最终将创建大量视图，这将导致内存问题。

而且，如果您不希望用户与任何行进行交互，请实现以下方法：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
     [tableView deselectRowAtIndexPath:indexPath animated:YES];
} 
```

这是创建自定义单元格的链接：

[http://www.appcoda.com/customize-table-view-cells-for-uitableview/](http://www.appcoda.com/customize-table-view-cells-for-uitableview/)

这是使用表格视图的链接：

[http://www.appcoda.com/ios-programming-tutorial-create-a-simple-table-view-app/](http://www.appcoda.com/ios-programming-tutorial-create-a-simple-table-view-app/)

祝你好运！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T05:03:55.197

如果您想添加`UILabel`对象，只需遍历您的结果集，将标签添加到您的视图。就像是：

```
NSInteger rowNum = 0;
NSArray *columnWidths = @[@(50), @(120), @(75), @(75)];
CGFloat rowHeight = 24.0;

FMResultSet *rs = [db executeQuery:sql];

while ([rs next])
{
    CGFloat x = 0.0;
    NSInteger colNum = 0;
    for (NSNumber *columnWidth in columnWidths)
    {
        UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(x,
                                                                    rowHeight * rowNum, 
                                                                    [columnWidth floatValue], 
                                                                    rowHeight)];
        label.textAlignment = NSTextAlignmentCenter;
        label.layer.borderColor = [UIColor blackColor].CGColor;
        label.layer.borderWidth = 1.0;
        label.text = rs[colNum++];
        [self.view addSubview:label];
        x += [columnWidth floatValue];
    }
    rowNum++;
}

[rs close]; 
```

我刚刚输入了它，所以我确定那里有错别字，但希望它足以让您了解它的外观。如果屏幕上放不下太多行，您可以在视图中添加一个滚动视图，然后将标签作为子视图添加到该视图中。

我也认为 tableview 是一个很好的方法。或者动态构建您在`UIWebView`. 这里有很多选择。这在一定程度上取决于您的最终目标是什么，数据的性质，您想要什么样的用户交互。

# iphone - NSString isEqualToString 问题

> ID：14132993
> 
> 赞同：0
> 
> 时间：2013-01-03T04:17:27.350
> 
> 标签：iphone, objective-c, ios, cocoa-touch, nsstring

我正在制作一个应用程序，并尝试使用 isEqualToString 与我知道相同的字符串进行比较。但是，此代码不起作用

```
- (void)uui {
    array2 = [NSMutableArray arrayWithContentsOfFile:Path2];
    string = [NSString stringWithFormat:@"%@", [array2 objectAtIndex:3]];
    NSString *string2 = [NSString stringWithFormat:@"Partly Cloudy"];
    NSLog(@"%@ , %@", string, string2);
    if ([string isEqualToString:string2]) {
        NSLog(@"frack");
    }
} 
```

这是我在日志中得到的

```
2013-01-02 23:13:27.512 My Sky[3788:907] Partly Cloudy  , Partly Cloudy 
```

如您所见，它们是相同的。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-03T04:19:56.560

不，字符串不相等。从您的日志中：

```
Partly Cloudy  , Partly Cloudy 
```

第一个字符串之后有一个额外的空格。检查此代码：

```
- (void)uui
{
  array2 = [NSMutableArray arrayWithContentsOfFile:Path2];
  string = (NSString *)[array2 objectAtIndex:3];
  NSString *string2 = @"Partly Cloudy";  
  NSString *trimmedString = [string stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
  NSLog(@"%@ , %@", trimmedString, string2);
   if ([trimmedString isEqualToString:string2])
   {
     NSLog(@"frack");
   }
} 
```

# c - ISO C 中的跨平台并发库

> ID：14132995
> 
> 赞同：1
> 
> 时间：2013-01-03T04:18:20.143
> 
> 标签：c, multithreading, cross-platform, iso

我想为 C 制作或找到一个简单的、独立于平台的并发（又名线程）库。我想在不使用依赖于操作系统的线程 API 的情况下实现它。它不需要是“真正的线程”，这就是我避免使用该术语的原因。实现此库的程序应该作为操作系统的单个进程出现。

我研究了一些选项，例如 OpenMP、Windows 的 hacky pthreads 实现、Intel Cilk Plus、Duff 设备的变体（看起来很有希望）等等。我已经在这个网站上搜索了线索。是时候打造我自己的方式了。

我已经缩小了范围。我想在尽可能接近标准的 C 中执行此操作（更喜欢避免使用 C11、Boost 等）。理想情况下，我希望完全不使用外部库来执行此操作。如果必须使用它们，则它们不得使用运行时。

如果我知道从哪里开始，我完全有信心可以完成这项工作。我不是 C 方面的专家，但我是一个非常有能力的自学老师。我正在寻找的是关于实现这个库的建议、指示或想法。

目前的想法：我应该伪造或重新实现程序集的共享内存模型，使用程序计数器，返回指针等。叫我疯了......

相关：[线程实现](https://stackoverflow.com/questions/9864240/threading-implementation)（第一个答案。）我正在寻找更多这样的。

也相关：[http ://www.avrfreaks.net/index.php?name=PNphpBB2&file=viewtopic&t=54489](http://www.avrfreaks.net/index.php?name=PNphpBB2&file=viewtopic&t=54489)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T04:26:10.333

我曾经在 Turbo C 中使用 setjmp 和 longjmp 构建了一个线程子系统（合作）（当然还有一点用于处理堆栈的 asm）——这不是我会再做的事情。可以做到，但我认为您不使用非标准 C 的愿望是不明智的。

我们使用 pthreads（并且 pthreads w32 在 Windows 平台上绰绰有余），这几乎是跨平台的，直到所有那些美妙的 C11 线程功能在所有地方都得到支持。我的建议是重新考虑你的厌恶——你正在为一个痛苦的世界做好准备。

# ruby-on-rails - Rails UTC显示日期自定义

> ID：14132996
> 
> 赞同：0
> 
> 时间：2013-01-03T04:18:21.543
> 
> 标签：ruby-on-rails, ruby-on-rails-3, datetime, time, utc

我将其发送到我的视图：

```
<%= @venue.eventdate %> 
```

显示 UTC 日期时间。例如*2013-01-10 17:15:00 UTC*

我[为 strftime 命令找到了这个站点](http://www.foragoodstrftime.com/)并创建了一个自定义构建。在我看来，我愚蠢地将它添加到我的对象的末尾：

```
<%= @venue.eventdate.strftime(%A, %e %B %Y at %l:%M %p) %> 
```

例如（理想情况下）*2013 年 1 月 3 日星期四凌晨 4:08*

当然它没有用。任何人都知道如何以简单的方式进行正确的转换？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T04:27:46.457

鉴于客户端更了解自己的语言环境，这通常由客户端处理，例如 JS。

[使用 JavaScript 将 UTC 日期时间转换为本地日期时间](https://stackoverflow.com/questions/6525538/convert-utc-date-time-to-local-date-time-using-javascript)

如果你一心想做这个服务器端

[在视图中显示当地时间](https://stackoverflow.com/questions/3793324/display-local-time-in-view)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T18:24:26.857

通常，您可以创建自定义日期方法。首先，您在 config/initializers 中创建一个 date_formats.rb 文件，例如创建一个时间格式，如下所示：

```
Time::DATE_FORMATS[:day_month_year] = "%A, %e %B %Y" 
```

并在“to_formatted_s(:day_month_year)”等视图文件中使用此方法

```
<%= object.eventdate.to_formatted_s(:day_month_year)%> <%= object.created_at.strftime("%I:%M %p")%> 
```

添加 date_formats.rb 文件后不要忘记重启 rails 服务器。