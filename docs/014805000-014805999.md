# StackOverflow 问答 14805000-14805999

# oracle - 如何更新过程中重复的 PL/SQL 记录

> ID：14805001
> 
> 赞同：0
> 
> 时间：2013-02-11T02:13:45.053
> 
> 标签：oracle, plsql, duplicates

我有一个名为 sales_staff_08 的表，名字、姓氏、用户名是 3 个列。

用户名使用名字和姓氏连接。

因为它可能会被复制。因此，我想通过添加一些数字来避免。

当前表

```
USERNAME   
---------- 
JOHSMITH1 
TOMNGUYE1
STEREDMO1
BOBJOHN1
CARJONES1
DANCREIG1
STEREDMO1
TOMNGUYE1 
```

我想更新重复的 RECORD，它应该显示如下：

```
USERNAME   
---------- 
JOHSMITH1
TOMNGUYE1
STEREDMO1
BOBJOHN1
CARJONES1
DANCREIG1
STEREDMO2
TOMNGUYE2 
```

我第一次尝试更新记录

```
 CREATE OR REPLACE PROCEDURE proc_concate_names IS 

 vc_username VARCHAR(25);
 v_number NUMBER (2) := 1;

 CURSOR cur_concate_username IS 
 SELECT firstname, surname, username FROM sales_staff_08; 

 BEGIN

    FOR rec_cur_concate IN cur_concate_username 

    LOOP

    vc_username := rec_cur_concate.firstname || rec_cur_concate.surname || v_number;

    UPDATE sales_staff_08 ss
    SET username = vc_username
    WHERE ss.username = rec_cur_concate.username;

 END LOOP; 

 END proc_concate_names;
 / 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T06:53:52.363

你可以用一个命令来做到这一点：

```
merge into sales_staff_08 d
using (select firstname ||surname || row_number() 
           over (partition by username order by firstname) un, rowid 
       from sales_staff_08 ) s
on (d.rowid = s.rowid)
when matched then update set d.username = s.un; 
```

[这是一个 sqlfiddle 演示](http://www.sqlfiddle.com/#!4/466cc/1)

正如@Plouf 所说，这也可以作为更新命令来完成：

```
update sales_staff_08 d
set d.username = (
  select un from (
    select firstname ||surname || row_number() 
            over (partition by firstname, surname order by firstname) un 
     from sales_staff_08
  ) s
  where s.rowid = d.rowid
) 
```

[这是另一个 sqlfiddle](http://www.sqlfiddle.com/#!4/466cc/3)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T09:47:42.647

A.B.Cade answer is more reliable. First, merge and update will work faster if there are millions of rows. Because in first case, you are using both plsql engine and sql engine for operation. It means in each loop of plsql engine, it will call sql engine. In second case it will use full independent sql engine which is faster.

# transactions - 非事务性数据库上的应用程序级事务

> ID：14805002
> 
> 赞同：1
> 
> 时间：2013-02-11T02:14:04.477
> 
> 标签：transactions, distributed-transactions, acid, cap

使用非事务性数据库在应用程序级别实现**部分事务支持的技术是什么？**

您能否分享此类技术的链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:22:59.663

有一种称为**Last Resource Commit Optimization**的技术。JBoss Transactions[在这里](https://community.jboss.org/wiki/Multiple1PC)和[这里](https://access.redhat.com/knowledge/docs/en-US/JBoss_Enterprise_Application_Platform/5/html/Transactions_Development_Guide/ch11.html)记录了一些细节。它不适用于非事务性数据库，而是适用于非 XA 支持的数据库，但我相信该模式可能足以应用。

# c++ - C++ 为类模板提供初始化列表构造函数

> ID：14805005
> 
> 赞同：5
> 
> 时间：2013-02-11T02:14:19.543
> 
> 标签：c++, c++11, variadic-templates, initializer-list, make-shared

我有一个带有模板参数 T 的类模板 Templ，而 Templ 类有一个类型为 T 的数据成员，称为 obj。我写了一个可变参数构造函数模板，它将参数转发给 obj 的构造函数：

```
template <class T>
class Templ
{
public:
     template <class... Args> explicit Templ (Args&&... args)
     : obj (std::forward<Args>(args)...)
     {
     }
private:
     T obj;
}; 
```

现在我意识到类型 T 可能是一个带有初始化列表构造函数的类，我希望它可以通过 Templ 访问。所以我检查了什么`std::list::emplace`和`std::make_shared`做什么。他们有一个像我一样的可变参数函数，但他们没有覆盖初始化列表。由于某些原因。

所以第一个问题：为什么？我的意思是，如果我将某个类 T 与一个 init-list ctor 一起使用，然后我使用`std::list<T>`? 为什么 list::emplace 没有采用 initializer_list 的版本？也许我也应该这样做是有充分理由的……所以我想知道。

另外，不管 STL 做什么——我应该提供一个 init-list ctor 作为好的设计吗？我的意思是，它就像可变参数 ctor，对吧？允许用户选择任何类型或类 T 与 Templ<> 一起使用并直接调用为 T 定义的任何 ctor。即使它是一个采用 init-list 的 ctor。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T12:09:29.723

转发`initializer_list`构造函数的问题是除了最琐碎的参数类型之外的所有参数类型都不可推导（[模板并不总是猜测初始化列表类型](https://stackoverflow.com/questions/7699963/templates-dont-always-guess-initializer-list-types?rq=1)）：

```
#include <map>
template<typename T> struct U {
   T t;
   template<typename...A> explicit U(A&&...a): t(std::forward<A>(a)...) {}
   template<typename L, typename = typename std::enable_if<
      std::is_constructible<T, std::initializer_list<L>>::value>::type>
      explicit U(std::initializer_list<L> l): t(l) {}
};
U<std::map<int, int>> m{{{0, 1}, {2, 3}}};  // fails, couldn't deduce 'L' 
```

由于您`m{std::initializer_list<...>{...}}`在大多数情况下都必须编写，因此只为原语提供它没有多大意义，当然也不是为标准提供。

如果您认为任何有趣`initializer_list`的论点都可能是针对容器类型的，您可以查看[可选地支持模板的 initializer_list 构造中采用的方法，可能是包装容器](https://stackoverflow.com/questions/13567370/optionally-supporting-initializer-list-construction-for-templates-maybe-wrapping)。

# c++ - 如何使用 type_traits 检测字符串文字？

> ID：14805011
> 
> 赞同：13
> 
> 时间：2013-02-11T02:14:50.090
> 
> 标签：c++, c++11, string-literals, typetraits

我如何可靠地 static_assert 对任何不是字符串文字的东西？

例如，在下面的代码中，我尝试包装标准断言宏，但静态拒绝任何不是字符串文字的消息（因为当断言触发时，除了字符串文字之外的任何内容都不会在运行时显示）。

```
#include <cassert>
#include <string>
#include <type_traits>

#define my_assert(test, message)\
    static_assert(\
        (\
            !std::is_pointer<decltype(message)>::value &&\
            !std::is_array<decltype(message)>::value\
        ),\
        "literal string required"\
    );\
    assert((message, (test)));

int main() {
    my_assert(1 == 1, "one equals one");
    my_assert(1 == 2, "one equals two");

    {
        const char *msg = "one equals one";
        //my_assert(1 == 1, msg); // triggers static_assert
    }

    {
        const char msg[] = "one equals one";
        //my_assert(1 == 1, msg); // triggers static_assert
    }

    {
        const std::string msg = "one equals one";
        //my_assert(1 == 1, msg.c_str()); // triggers static_assert
    }

    {
        const int msg = 3;
        my_assert(1 == 1, msg); // should trigger static_assert
    }
} 
```

如您所见，测试是通过 type_traits 标头提供的测试完成的，并且 *大部分*情况下，此代码按预期工作（使用 gcc 4.7.2 测试）。但是，它并没有专门寻找字符串文字，而只是拒绝了程序员可能就地使用的常见事物。

对于上面的示例，我的解决方案可能已经足够好了，但我也想在其他情况下使用它，或者类似的技术。

所以问题是，我如何可靠地使用 type_traits （或其他标准机制）来 static_assert除了字符串文字之外的*任何东西？*

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-11T02:36:40.120

这是我能得到的最好的，它似乎拒绝我扔给它的任何东西，但仍然接受文字字符串：

```
#define my_assert(test, message)\
    static_assert(\
        (\
             std::is_convertible      <decltype(message), const char *>::value &&\
            !std::is_rvalue_reference <decltype(message)>::value &&\
            !std::is_pointer          <decltype(message)>::value &&\
            !std::is_array            <decltype(message)>::value &&\
            !std::is_class            <decltype(message)>::value\
        ),\
        "string literal required"\
    );\
    assert((message, (test))) 
```

我很想知道这是否*真的*完全正确，和/或是否有更简单的方法来进行这种检测。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-07T21:16:40.753

字符串文字的 'decltype("some string")' 返回 "const char (&)[n]" 类型。[因此，与以下答案](https://stackoverflow.com/a/14805137)相比，似乎有更简洁的检测方法：

```
template<typename T>
struct IsStringLiteral :
    std::is_same<
        T,
        std::add_lvalue_reference_t<const char[std::extent_v<std::remove_reference_t<T>>]>
    >
{}; 
```

（[在线演示](http://coliru.stacked-crooked.com/a/84002237e7bcaf5c)）

注意：可以创建一个`const char (&)[n]`类型的变量来欺骗这个实现：

```
const auto &msg1 = "some string";

const char c[4]{};
auto& msg2 = c;

// msg1 and msg2 is recognized by IsStringLiteral as string literals
static_assert(is_string_literal<decltype(msg1)>::value, "");
static_assert(is_string_literal<decltype(msg2)>::value, ""); 
```

# ios - Trigger.io 如何处理不同平台的条码扫描？

> ID：14805012
> 
> 赞同：1
> 
> 时间：2013-02-11T02:14:56.580
> 
> 标签：ios, trigger.io

Trigger.io 条码扫描仪的文档 ( [http://docs.trigger.io/en/v1.4/modules/barcode.html](http://docs.trigger.io/en/v1.4/modules/barcode.html) ) 没有明确说明如何处理条码扫描。

从体验来看，他们似乎是通过意图调用使用[ZXing for Android，这意味着用户必须先下载该应用程序。](http://code.google.com/p/zxing/)但是，我不确定 iOS 和其他平台是如何处理的。条形码功能是否与应用程序捆绑在一起，还是用户必须安装其他应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T17:25:11.627

正如您在 Android Trigger 上发现的那样，使用条形码意图，如果用户没有安装 ZXing，他们将被提示安装它（大多数用户确实安装了某种形式的条形码扫描仪）。

在 iOS 上，ZXing 库内置在应用程序中，因此不需要额外的应用程序。

# firefox - 从 firefox add-on contentscript 到周围页面的消息

> ID：14805014
> 
> 赞同：1
> 
> 时间：2013-02-11T02:15:30.340
> 
> 标签：firefox, firefox-addon

我正在将 Chrome 扩展移植到 Firefox，它使用内容脚本通过 postMessage 调用周围页面中的方法。该页面包含一个事件侦听器，例如

```
window.addEventListener('message', function(event) {
   console.log(event)
}, false); 
```

我正在尝试使用调用从 firefox 附加 sdk 内容脚本发送消息：

```
self.postMessage({toPage: true, type: "initAck"}, "*"); 
```

**顺便说一句**，我尝试直接使用 windows.postMessage 但我得到一个异常说我应该使用`self.postMessage`

我在插件上收听此消息`main.js`并通过该`worker.postMessage`方法发布，但该消息从未到达页面的事件侦听器：

```
pageMod.PageMod({
   include: "*",
   contentScriptWhen: "start",
   contentScriptFile: [self.data.url("jquery.min.js"),
                       self.data.url("myscript.js")],
   onAttach: function(worker) {
      worker.on("message", function(addonMessage) {
           worker.postMessage(addonMessage, "*");
      });
   }
}); 
```

一般来说，火狐上下文脚本有没有办法访问周围的页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:38:34.180

不确定我是否收到您的问题，但是在[文档](https://addons.mozilla.org/en-US/developers/docs/sdk/1.13/dev-guide/guides/content-scripts/communicating-with-other-scripts.html)中描述了如何将消息从内容脚本发送到页面脚本：

```
document.defaultView.postMessage("Message from content script", "http://my-domain.org/"); 
```

希望能帮助到你！

# node.js - 节点将隐藏数据传递给其他路由

> ID：14805015
> 
> 赞同：0
> 
> 时间：2013-02-11T02:15:31.117
> 
> 标签：node.js, express, routes, hidden

我在 express( `item/update/`) 中有一条路线，然后我想将它们发送回`/`，我还想`/`用“成功”或“失败”显示警报。我不想使用查询字符串或哈希，因为我希望它对用户隐藏。我也不想渲染`/`，`items/update`因为这似乎是个坏主意。另外，我已经尝试过 javascript history api，但这似乎是一个 hack，因为 history api 是用于其他用途的。

如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T08:53:32.517

你可以做几种方法，

1.您可以使用查询字符串重定向到“/”网址。由于您不喜欢在查询字符串中添加数据，因此备用选项是会话。

例如，

```
function itempUpdateHandler(request,response){
 //Do some stuff
 request.session.displayMsg = "update done successfully";
 response.setHeader("Location: http://yourdomain.com/");
 response.end();
}

function homepageHandler(request,response){
//Display message here which is read from session.
if(request.session.displayMsg){
  console.log(request.session.displayMsg);
  delete request.session.displayMsg;
}
//Do your regular suff here.
} 
```

2.在下面的方法中你必须多加注意，这里你不打算重定向，但你需要修改你的处理函数，如下所示，

```
function itempUpdateHandler(request,response){
 //Do some stuff
 //response.setHeader("Location: http://yourdomain.com/"); //no need here
 homepageHandler(request,response, {display:true, msg: "update done successfully"});
}

function homepageHandler(request,response, moreArgs){
//Display message here which is read from session.
  if(moreArgs.display){
       console.log(moreArgs.msg);
  }
//Do your regular suff here.
} 
```

注意：假设您使用的是 express

# asp.net-mvc - 什么是 IIS8 中的最佳“动态 IP 限制设置”

> ID：14805016
> 
> 赞同：24
> 
> 时间：2013-02-11T02:15:35.397
> 
> 标签：asp.net-mvc, azure-web-roles, iis-8

因此，我在我的 Azure 云服务站点中打开了此功能，以尝试减轻蜘蛛和机器人对我们的攻击次数荒谬的次数。

有没有人对这些设置有任何经验？

根据并发请求数拒绝IP地址：最大并发请求数？

根据一段时间内的请求数拒绝 IP 地址：最大请求数？时间段（以毫秒为单位）？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-01-29T15:05:14.223

### 一种寻找合理设置的实验方法

我最近一直在尝试使用这些设置来决定我们生产站点的值。

**我们确定了单个（请求繁重的）页面生成的最大请求数，并将其乘以 2.5 以获得随时间推移的最大请求数。对于时间值，我选择了 200 毫秒。**

手动测试表明这些设置对于“正常”使用效果很好。当我们同时在浏览器的 5 个或更多选项卡中重新加载页面时，我们设法获得了一些 403 Forbidden。

您必须记住的是，您网站的许多用户可能坐在同一个代理后面，因此动态 IP 限制仅将这些用户视为一个。由于 200 毫秒的相当短的窗口，我预计这不会成为问题，同时仍能在一定程度上阻止激进的 DoS 攻击。

**此外，我们不限制同时连接的数量。在这里找到一个合理的数字几乎是不可能的，因为*不同*客户的数量可能是无限的。**

请注意，请求单个页面（获取请求最多的页面）与获取有用设置高度相关。例如，如果您的首页的页面加载向您的服务器生成 10 个请求，这些请求将在很短的时间跨度内出现，因此您的限制必须具有更高的阈值。

### 2015 年 4 月更新

我们的服务在这些设置下已经运行了一年多，到目前为止我们很高兴。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-07-09T21:06:47.630

有些人无法访问服务器，或者像我一样对动态 IP 限制不满意，所以我为 asp classic 制作了一个脚本。

您可以将其放置在您想要的网页上（主页和/或内部）。它使用 Mysql 数据库。在示例中，我为每个 ip 在 3 秒内加载 3 个网页设置了禁令（这不是正常活动）。我只是想阻止对我网站的所有洪水、愿望脚本、ddos、bot 或烦人的访问。

1.  您需要创建一个 MYSQL 数据库：

```
    创建表`banip`（
      `id` int(11) NOT NULL auto_increment,
      `IP` char(15) 默认为 NULL，
      `dtime` 时间默认为 NULL，
      主键（`id`），
      KEY `IP`（`IP`）
    ) 引擎=MyISAM 默认字符集=latin1；

```

2.  您需要将 ASP 代码放在需要的地方

3.  加上一个小管理员网页 mybanipadm.asp（可以更改文件名）

ASP 经典代码：

```
<%
' ***PUT THIS CODE AT THE TOP OF YOUR WEBPAGE YOU WANT TO PROTECT***
' COULD BE HOME PAGE AND/OR INTERNAL PAGE
' THE BAN IS PERSISTANT UNTIL THE SERVER RESTART

response.buffer = true
IP = Request.ServerVariables("REMOTE_ADDR")

'IP WHITELIST - SEPARATE EACH IP WITH A |
IPWL = "127.0.0.1|"

if instr(IPWL,IP) then
'do nothing the ip is whitelisted
else

'CHECK IF THERE IS A BAN THAT MATCH THE CURRENT IP
if Application("mybanip") <> "" then
if instr(Application("mybanip"),IP) then

' RESPONSE EXAMPLE WHEN ACCESS DENIED (CHOOSE ONE OR MAKE YOUR)
'Response.Status = "403 Forbidden"
'Response.Status = "404 Not Found"
'response.redirect "banned.html"
response.write "You are going too fast !"

session.abandon
response.end
end if
end if

' THE TIME NOW
dtime = FormatDateTime(now(),3)

'we can decide to run it at speficied time
'if dtime >= "00:00:00" and dtime < "05:00:00" then

' PREPARE TO CHECK DATABASE FOR THE LAST 3 SECONDS ACTIVITY
secfrom = DateAdd("s",-3,now()) 'value you can change is -3 (seconds)
secfrom = FormatDateTime(secfrom,3)

' ***OPEN THE CONNEXION STRING (USE YOUR ONE OR MODIFY THIS)***
Set conn = Server.CreateObject("ADODB.Connection")
conn.Open "DRIVER={MySQL ODBC 3.51 Driver};server=127.0.0.1;uid=LOGIN;pwd=PSW;Database=DBNAME;"

' ***EVERYTHING BELOW MUST BE PUT AFTER THE CONNEXION STRING OPENED***

' POPULATE DATABASE WHIS THE CURRENT IP AND TIME
SQL = "INSERT INTO BANIP (IP,DTIME) values('" & IP & "','" & dtime & "')"
conn.execute(SQL)

' CHECK IF THERE IS A SPAM ACTIVITY FOR THE CURRENT IP
SQL = "SELECT COUNT(IP) as nbfound FROM BANIP WHERE IP='" & IP & "' AND dtime BETWEEN '" & secfrom & "' AND '" & dtime & "'"
set rsIPCount = conn.Execute(SQL)
if not rsIPCount.Eof then
ipcount = clng(rsIPCount("nbfound"))
else
ipcount = "0"
end if
rsIPCount.Close
set rsIPCount = nothing

' IF THERE IS AT LEAST 3 WEBPAGE LOADED IN 3 SECONDS ACTIVITY THEN SET A BAN
if ipcount >= 3 then 'value you can change is 3 (webpage)
application.lock
Application("mybanip") = Application("mybanip") & IP & "|"
application.unlock
end if

' DELETE ALL ENTRY EVERY 2 MINUTES FOR PERFORMANCE
if Application("mybanipdel") = "" then
Application("mybanipdel") = dtime
elseif datediff("n", Application("mybanipdel"), dtime) >= 2 or datediff("n", Application("mybanipdel"), dtime) < 0 then 'value you can change is 2 (minutes)
conn.execute "DELETE FROM BANIP"
Application("mybanipdel") = FormatDateTime(now(),3)
end if

SQL = ""
IP = ""
end if

%> 
```

管理页面 mybanipadm.asp

```
<html>
<head>
<title>My admin</title>
</head>
<body><%

if request.querystring("disconnect")="yes" then
session("adm") =""
elseif request.querystring("clear")="yes" then
Application("mybanip") = ""
end if

' ***CHANGE THIS VALUES***
login = "login"
passw = "pass"

if request.form("LogMe")<>"" and (request.form("login")=login and request.form("passw")=passw) then
session("adm") = "loggued"
elseif session("adm") = "" then
response.write "<p>Please log-in :</p> <form method=""post""><input type=""text"" size=""15"" name=""login"" placeholder=""login""> <input type=""password"" size=""15"" name=""passw"" placeholder=""password""><input type=""submit"" name=""LogMe""></form>"
response.end
end if

response.write "<p><a href=""?disconnect=yes"">Disconnect from the admin</a> - <a href=""?clear=yes"">Clear all ip</a></p>"

if request.form("unban")<>"" and request.form("ipban")<>"" then
application.lock
Application("mybanip") = replace(Application("mybanip"),request.form("ipban") & "|","")
application.unlock
response.write "<p>IP : <b>" & request.form("ipban") & "</b> has been unbanned !</p>"
end if

response.write "Unban this IP : <form method=""post""><input type=""text"" size=""15"" maxlenght=""15"" name=""ipban"" placeholder=""000.000.000.000""> <input type=""submit"" name=""Unban"" value=""Unban""></form>" 
response.write "<p>IP CURRENTLY BANNED</p>" & replace(Application("mybanip"),"|","<br>")

%>
</body>
</html> 
```

# sql - 在 Oracle 中使用 ROWNUM 获得前 5 个结果

> ID：14805018
> 
> 赞同：1
> 
> 时间：2013-02-11T02:15:52.040
> 
> 标签：sql, oracle, top-n

我的查询有问题吗？我在下面使用 AUDIT_ACTN 排序的前 5 个结果，然后是 AUDIT_STAMP。

```
SELECT * FROM (SELECT * FROM TABLE_SAMPLE ORDER BY AUDIT_ACTN  
ASC,AUDIT_STAMP ASC)
WHERE ROWNUM <= 5 
```

我用它来检查我是否得到了正确的行。

```
SELECT * FROM TABLE_SAMPLE  ORDER BY 
AUDIT_ACTN,AUDIT_STAMP 
```

问题是第二个查询的前 5 行与第一个查询的结果略有不同。只有 3 行是相同的，根据我的观察，另外 2 行是第二个查询的 rownum1 和 2。我希望你理解我的问题我真的需要帮助。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T02:30:34.540

我记得读过`ORDER BY`子查询不能保证，但这里有一个替代解决方案，它`ROW_NUMBER`包括`ORDER BY`in it's`OVER`子句：

```
SELECT * FROM 
(SELECT Field1, Field2, ROW_NUMBER() OVER (ORDER BY Field2,Field1) AS RN 
 FROM TABLE_SAMPLE 
 ) t 
WHERE RN <= 5 
```

这是[小提琴](http://sqlfiddle.com/#!4/c653d/1)。

这里有一些关于 Oracle、子查询和 ORDER BY 的文档：

[http://docs.oracle.com/javadb/10.8.2.2/ref/rrefsqlj13658.html](http://docs.oracle.com/javadb/10.8.2.2/ref/rrefsqlj13658.html)

> 在子查询中，ORDER BY 子句是没有意义的，除非它带有结果偏移量和 fetch first 子句中的一个或两个，或者与 ROW_NUMBER 函数一起使用，因为不能保证在外部结果集中保留顺序。允许将外部查询中的 ORDER BY 与子查询中的 ORDER BY 结合起来。

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T05:11:47.510

试试这个：这个查询返回前 5 条记录。

```
 SELECT * FROM 
    (SELECT Field1, Field2, rank() OVER (ORDER BY Field1,Field2) AS rank
     FROM TABLE_SAMPLE 
     ) t 
    WHERE t.rank <= 5 
```

# google-closure-library - 如何集成 Google Closure Template (Soy) 的打印指令

> ID：14805022
> 
> 赞同：0
> 
> 时间：2013-02-11T02:16:26.153
> 
> 标签：google-closure-library, google-closure-templates

如果可以的话，我想知道**如何**一步一步地集成 Google Closure Template 的打印插件，也就是 Soy，主要是因为我对 Java 很不好。下面的页面解释了如何做到这一点，但我需要更详细的一个。

[https://developers.google.com/closure/templates/docs/plugins](https://developers.google.com/closure/templates/docs/plugins)

*   print 指令可以简单地用作` {myprintformat $var} '，这很好。
*   （附加问题）您认为我们可以将 `goog.require('xxx')' 语句编译成 javascript 吗？如果可以，我们可以提供函数并从 soy.js 中请求它。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-02T05:28:17.387

您需要查看 Clojure 源代码，了解它如何创建自己的指令。这很容易。

首先，您需要了解如何实施指令。为此，请参阅示例。下载[clojure 模板源代码](http://closure-templates.googlecode.com/files/closure-templates-for-java-latest.zip)并查看：

./java/tests/com/google/template/soy/basicdirectives/TruncateDirective.java

然后，您需要了解一点[Google Guice](https://code.google.com/p/google-guice/)。创建一个 Guice 模块来添加你的指令：

```
public class MySoyModule extends AbstractModule {

    @Override
    protected void configure() {        
        Multibinder<SoyPrintDirective> soyDirectivesSetBinder = Multibinder.newSetBinder(binder(), SoyPrintDirective.class);        
        soyDirectivesSetBinder.addBinding().to(DateDirective.class);
    }

} 
```

然后，使用 Guice 注入器实例化您的构建器，如下所示：

```
Injector injector = Guice.createInjector(new SoyModule(), new MySoyModule());
SoyFileSet.Builder sfsBuilder = injector.getInstance(SoyFileSet.Builder.class);
SoyFileSet sfs = sfsBuilder.add(SoyUtils.class.getResource(source)).build(); 
```

现在您可以调用您的模板：

```
SoyTofu simpleTofu = sfs.compileToTofu().forNamespace("soy.examples.simple"); 
```

而已。

# php - 自定义 MY_Loader 加载一组视图

> ID：14805025
> 
> 赞同：1
> 
> 时间：2013-02-11T02:16:47.843
> 
> 标签：php, codeigniter

我想使用一个自定义的加载->视图，一旦创建就会为页面加载一组视图。它将具有与 $this->load->view() 相同的功能，但也可以预加载其他视图。我将如何写这个并让它工作？谢谢

```
<?php

class MY_Loader extends CI_Loader
{
    function __construct()
    {
        parent::__construct();
    }

    function admin_view($load_page, $vars=array())
    {
        $this->load->view('admin/header');
        $this->load->view($load_page);
        $this->load->view('admin/footer');
    }

    function members_view()
    {
        //same purpose as admin view
    }

    function public_view()
    {
        //same purpose as admin view
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T04:02:11.523

这看起来不错，除了您不需要调用`$this->load`，因为您已经“进入” CI_Loader（通过您的扩展程序），所以您可以尝试：

```
function admin_view($load_page, $vars=array())
{
    $this->view('admin/header');
    $this->view($load_page);
    $this->view('admin/footer');
} 
```

这意味着您可以访问 the 的`view`方法，`CI_Loader`因为您已经用您的类扩展了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T08:59:26.173

我曾经在views/_includes中有一个template.php，如下所示：

```
<?php
    $this->load->view('_includes/header');
    $this->load->view($view);
    $this->load->view('_includes/footer'); 
```

所以我要加载的 $view 是通过控制器传递的。例如：

```
class News extends MY_Controller {
    public function index()
    {
        $data['view'] = 'admin/news/index';
        $data['results'] = $this->news_model->get_all);
        $this->load->view('admin/_includes/template', $data);
    } 
```

# python - Postgresql 中的 RRULE 解析

> ID：14805026
> 
> 赞同：3
> 
> 时间：2013-02-11T02:16:57.297
> 
> 标签：python, postgresql, icalendar, rrule, libical

**目标：**从 RRULE 字符串（即`FREQ=WEEKLY;INTERVAL=2;COUNT=8;WKST=SU;BYDAY=TU,TH`）和起始时间戳生成时间戳列表，每个时间戳代表一个事件发生。由于这些时间会随用户的心血来潮而改变，因此需要 postgresql，因为 (1) 它具有严格的业务逻辑质量和 (2) 触发器（值更改时自动更新行）

**替代解决方案：**

我最终使用了 plpythonu（postgresql 的 python 语言）。dateutil[库](http://labix.org/python-dateutil)有一个很棒的规则解析器。

```
mydatabase=# CREATE FUNCTION parse_occurrences(rule text, start timestamp) RETURNS timestamp[] AS
mydatabase-# 'from dateutil.rrule import *
mydatabase'# from dateutil.parser import *
mydatabase'# import datetime
mydatabase'# dates = list(rrulestr(rule, dtstart=parse(start)))
mydatabase'# return [str(a)[0:10] for a in dates]'
mydatabase-# LANGUAGE plpythonu;
CREATE FUNCTION
mydatabase=# SELECT parse_occurrences('FREQ=WEEKLY;INTERVAL=2;COUNT=8;WKST=SU;BYDAY=TU,TH'::text, now()::timestamp);                                                                  
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 {"2013-02-14 00:00:00","2013-02-26 00:00:00","2013-02-28 00:00:00","2013-03-12 00:00:00","2013-03-14 00:00:00","2013-03-26 00:00:00","2013-03-28 00:00:00","2013-04-09 00:00:00"} 
```

**（原始）努力：**将[C-library libical](https://github.com/Marketcircle/libical)与[Postgresql C-Extensions](http://www.postgresql.org/docs/9.2/static/xfunc-c.html)连接起来。这需要专门的 C 程序来执行以下操作：(1) 将 postgresql 数据类型转换为 C 数据类型，(2) 执行所有必要的 C 库函数，以及 (3) 使用头文件以 postgresql 格式返回数据“ postgres.h”。

**连接器文件：ical_recur.c**

```
#include "postgres.h"
#include "icalrecur.h"
#include <time.h> /* for time() */
#include "fmgr.h"

#ifdef PG_MODULE_MAGIC
PG_MODULE_MAGIC;
#endif

PG_FUNCTION_INFO_V1(get_occurrences);

Datum
get_occurrences(PG_FUNCTION_ARGS)
{
        //char*        rule; /* rule string */
        time_t      start; /* start time */
        int         count;
        char        *rrule;

       // *rule = PG_GETARG_CHAR(0);
        start = (time_t) PG_GETARG_INT32(1);
        count = (int) PG_GETARG_INT32(2);
        *rrule = PG_GETARG_CHAR(0);

        time_t   *result[count]; /* output array */

        icalrecur_expand_recurrence(rrule, start, count, *result);

        PG_RETURN_INT32(*result);
} 
```

**准备连接器文件：**

步骤 1：编译到目标文件，创建共享对象，复制到 postgresql 查找 C-extensions 的位置

```
sudo gcc -I/usr/local/libical/lib -lical -I/usr/include/postgresql/9.2/server -fpic -c ical_recur.c
sudo gcc -shared -L/usr/local/libical/lib -lical -o ical_recur.so ical_recur.o
sudo cp ical_recur.so /usr/lib/postgresql/9.2/lib/ 
```

步骤 2：添加 C 找到的 libical lib 文件夹并重新加载配置

```
sudo echo "/usr/local/libical/lib" >> /etc/ld.so.conf.d/libc.conf
sudo ldconfig 
```

**测试连接器文件：**

第 1 步：加载 psql 并创建函数

```
psql
mydatabase=# CREATE FUNCTION get_occurrences(text, integer, integer) RETURNS int[]
mydatabase=- AS '$libdir/ical_recur', 'get_occurrences'
mydatabase=- LANGUAGE C STRICT;
CREATE FUNCTION
mydatabase=# 
```

**当前的障碍：**

C 函数使 postgresql 服务器崩溃。

```
psql (9.2.3)
Type "help" for help.

mydatabase=# SELECT get_occurrences('FREQ=WEEKLY;INTERVAL=2;COUNT=8;WKST=SU;BYDAY=TU,TH', now()::timestamp, 5);
The connection to the server was lost. Attempting reset: Failed.
!> 
```

日志...

```
2013-02-11 22:03:33 UTC LOG:  server process (PID 22733) was terminated by signal 11: Segmentation fault

2013-02-11 22:03:33 UTC DETAIL:  Failed process was running: SELECT get_occurrences('FREQ=WEEKLY;INTERVAL=2;COUNT=8;WKST=SU;BYDAY=TU,TH', now()::timestamp, 5);
2013-02-11 22:03:33 UTC LOG:  terminating any other active server processes
2013-02-11 22:03:33 UTC WARNING:  terminating connection because of crash of another server process
2013-02-11 22:03:33 UTC DETAIL:  The postmaster has commanded this server process to roll back the current transaction and exit, because another server process exited abnormally and possibly corrupted shared memory.
2013-02-11 22:03:33 UTC HINT:  In a moment you should be able to reconnect to the database and repeat your command.
2013-02-11 22:03:33 UTC LOG:  all server processes terminated; reinitializing
2013-02-11 22:03:33 UTC FATAL:  the database system is in recovery mode
2013-02-11 22:03:33 UTC LOG:  database system was interrupted; last known up at 2013-02-11 21:47:26 UTC
2013-02-11 22:03:33 UTC LOG:  database system was not properly shut down; automatic recovery in progress
2013-02-11 22:03:33 UTC LOG:  redo starts at 0/1903A0C
2013-02-11 22:03:33 UTC LOG:  record with zero length at 0/190E1E0
2013-02-11 22:03:33 UTC LOG:  redo done at 0/190E1B8
2013-02-11 22:03:33 UTC LOG:  last completed transaction was at log time 2013-02-11 22:03:29.641161+00
2013-02-11 22:03:33 UTC LOG:  database system is ready to accept connections
2013-02-11 22:03:33 UTC LOG:  autovacuum launcher started 
```

**更新：**

我已经更新了方法来解决一些建议。

```
#include "postgres.h"
#include "icalrecur.h"
#include <time.h> /* for time() */
#include "fmgr.h"

#ifdef PG_MODULE_MAGIC
PG_MODULE_MAGIC;
#endif

PG_FUNCTION_INFO_V1(get_occurrences);

Datum
get_occurrences(PG_FUNCTION_ARGS)
{
        time_t start = (time_t) PG_GETARG_INT32(1); /* convert int to time_t */
        int count = PG_GETARG_INT32(2);
        char rrule = PG_GETARG_CHAR(0);

        char *_rrule = &rrule; /* icalrecur wants a pointer to the rrule */

        time_t  result[count]; /* instantiate the output array */

        int success = icalrecur_expand_recurrence(_rrule, start, count, result);

        /* convert time_t values to int */
        int *output = malloc(sizeof(result));

        int i;
        for(i = 0; i < (int) (sizeof(result) / sizeof(result[0]) - 1); i++){
                output[i] = (int) result[i];
        }

        if(success != 1){
                PG_RETURN_INT32(0);
        } else {
                PG_RETURN_INT32(output);
        }
} 
```

建筑与..

```
sudo gcc -Wall -Wextra -l/usr/local/libical/lib/ical -I/usr/local/libical/include/libical -I/usr/include/postgresql/9.2/server -fpic -c ical_recur.c
sudo gcc -Wall -shared -static -L/usr/local/libical/lib -lical -o ical_recur.so ical_recur.o
sudo cp libical.so /usr/lib/postgresql/9.2/lib/ 
```

进入数据库并执行..

```
mydb=# CREATE FUNCTION get_occurrences(text, integer, integer) RETURNS int[]
AS '$libdir/ical_recur', 'get_occurrences'
LANGUAGE C STRICT;
CREATE FUNCTION
mydb=# SELECT get_occurrences('FREQ=WEEKLY;INTERVAL=2;COUNT=8;WKST=SU;BYDAY=TU,TH', 1360690024, 5);
The connection to the server was lost. Attempting reset: Failed.
!> \q 
```

相同的日志输出。[文档](http://libical.sourcearchive.com/documentation/0.43-3/icalrecur_8c_488780da8434731021af8d791b087b77.html#488780da8434731021af8d791b087b77)说明了参数：

> int icalrecur_expand_recurrence(char * rule, time_t start, int count, time_t * array)

**问题：**我们怎样才能让它在没有 postgres 崩溃的情况下工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T14:58:35.960

显示的代码中有两个明显的与指针相关的缺陷：

**第一的：**

```
 *rrule = PG_GETARG_CHAR(0); 
```

在这个执行点，`rrule`是一个未初始化的指针，并且这条指令试图将一个字符写入它指向的随机位置。这通常会导致您看到的那种崩溃。

**第二：**

```
time_t   *result[count]; /* output array */

icalrecur_expand_recurrence(rrule, start, count, *result); 
```

`result`应该是 的数组`time_t`，而不是 的数组`time_t*`，并且应该作为 传递`result`，而`*result`不是此时未初始化的数组。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-15T07:18:31.037

现在您可以[将此](https://github.com/petropavel13/pg_rrule)扩展用于 postgresql。

示例用法：

```
SELECT * FROM
     unnest(
         rrule_get_occurrences('FREQ=WEEKLY;INTERVAL=1;WKST=MO;UNTIL=20200101T045102Z;BYDAY=SA;BYHOUR=10;BYMINUTE=51;BYSECOND=2'::rrule,
             '2019-12-07 10:51:02+00'::timestamp with time zone)
     );

          unnest
 ------------------------
  2019-12-07 10:51:02+00
  2019-12-14 10:51:02+00
  2019-12-21 10:51:02+00
  2019-12-28 10:51:02+00
 (4 rows) 
```

# struts2 - Struts2 - 使用注释将动作成员变量作为参数传递

> ID：14805027
> 
> 赞同：2
> 
> 时间：2013-02-11T02:16:58.877
> 
> 标签：struts2

简而言之，我有一个带有名为 bestTutorialSite 的实例变量的操作类。该变量可以按如下方式传递给 JSP：

```
<package name="tutorial1" namespace="/" extends="struts-default">
    <action name="getTutorial" class="org.tutorial.struts2.action.TutorialAction">
        <result name="success" type="redirectAction">
            <param name="actionName">getTutorialPage</param>
            <param name="namespace">/tutorials</param>
            <param name="message">${bestTutorialSite}</param>
        </result>
        <result name="error" type="redirectAction">
            <param name="actionName">getErrorPage</param>
            <param name="namespace">/tutorials</param>
            <param name="message">${bestTutorialSite}</param>
        </result>
    </action>
</package>

<package name="tutorial2" namespace="/tutorials" extends="struts-default">
    <action name="getTutorialPage">
        <result>/success.jsp</result>
    </action>
    <action name="getErrorPage">
        <result>/error.jsp</result>
    </action>
</package> 
```

使用 XML 方式没有问题。问题是我如何使用注释来做到这一点，因为带注释的参数需要常量表达式（实例变量 bestTutorialSite 不是常量表达式）。

更多信息：success.jsp

```
<body>
  Success Page!!
<br/>
 <s:property value="$parameters['message']"/>
</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T06:20:10.193

```
@Results({
   @Result(name = "success", type = "redirectAction", params = {"namespace", "/tutorials", "actionName", "getTutorialPage", "message", "${bestTutorialSite}"}),
   @Result(name = "error", type = "redirectAction", params = {"namespace", "/tutorials", "actionName", "getErrorPage", "message", "${bestTutorialSite}"})
})
public class TutorialAction extends ActionSupport... 
```

**注意**：作为依赖项，您将需要 struts2 约定插件。有关更多示例和参考，请参阅：[http ://struts.apache.org/2.2.3/docs/convention-plugin.html#ConventionPlugin-Actionannotation](http://struts.apache.org/2.2.3/docs/convention-plugin.html#ConventionPlugin-Actionannotation)

**编辑**：在解决评论中提出的动作名称问题。

约定使用以连字符分隔的操作名称。也就是说，我们不会调用一个动作*getTutorial*而是*get-tutorial*。

动作*获取教程*可能有一个动作类。根据您的 xml，动作类必须位于根命名空间中。但是，当前的命名空间`org.tutorial.struts2.action.TutorialAction`不会在默认命名空间中，因为约定将搜索带有*struts2*或*action*的包，并且层次结构更下方的包被解释为 struts2 包。

因此，约定会将您的`org.tutorial.struts2.action.TutorialAction`类解释为位于`/action/tutorial`名称空间中。我们应该将包名称更改为`org.tutorial.myapp.action.GetTutorialAction`或类似名称以避免此问题。

注意，`Get`已附加到*TutorialAction*，因此 struts 会将动作定位为`/get-tutorial`.

视图遵循并行模式来封装名称。根据您当前的操作，您需要将您的视图定位在`/WEB-INF/content/action/tutorial.jsp`（约定还能够通过文件扩展名识别 freemarker 和速度视图）。您还可以将结果的名称考虑到视图中，例如`/WEB-INF/content/action/tutorial-success.jsp`, `/WEB-INF/content/action/tutorial-error.jsp`，`/WEB-INF/content/action/tutorial-input.jsp`因此如果执行返回“成功”，您将获得前者，如果“错误”则获得后者。类名当然是驼峰式（根据 Java 命名约定），但是视图都是小写的，连字符会出现在单词之间。

一个非常有用的技术是将所有输入表单创建为“*-input.jsp”，您可以直接转到视图（绕过动作类），例如使用定义为的锚点：

`<s:a namespace="/employee" action="person-input">Go to Person Input</s:a>`

如果没有一个名为`PersonInput`or的类`PersonInputAction`（记住不必将*Action*放在最后），那么视图将按原样呈现，表单的视图将指向 Person Action，如下所示：

如果表单验证失败（返回输入），则 Person 操作将首先尝试“person-input”，然后您将返回表单。这非常有用。

使用约定时，对注释的最大需求应该是：

*   重用视图
*   采取行动后，使用 redirectAction 将您放回某个地方。也许更新后的列表。
*   不太常见：使用不同的结果类型（json、流）

因此@Result 和@Results 注释是最常见的。@Action 注释通常在您尝试违反约定时出现，但请记住您不需要编写注释，除非偏离预期。因此，您实际上是在为自己工作。

动作注释的一个很好的用途是在同一个类中声明多个动作方法（对于单个实体的某些 crud 操作可能很有用）。我个人更喜欢每个动作一个类的策略，但可以欣赏动作注释的这种使用，但是正如提到的使用它来产生动作同义词或覆盖我不喜欢的约定。

要命名您的操作而不是诸如“getTutorial”之类的约定，您会说：

```
@Action(value="/getTutorial", 
    results={
       @Result(name = "success", type = "redirectAction", params = {"namespace", "/tutorials", "actionName", "getTutorialPage", "message", "${bestTutorialSite}"}),
       @Result(name = "error", type = "redirectAction", params = {"namespace", "/tutorials", "actionName", "getErrorPage", "message", "${bestTutorialSite}"})
}) 
```

如前所述，不建议这样做。

# c - CMake 通过 shell 脚本生成 C 头文件

> ID：14805029
> 
> 赞同：1
> 
> 时间：2013-02-11T02:17:34.900
> 
> 标签：c, cmake, build-automation

我有一个 shell 脚本，它接收一个 JSON 文件并输出一个`.h`我的目标之一所依赖的文件。看来 CMake`add_custom_command`是我完成此任务所需的，但我无法生成头文件。我已经尝试了几乎所有我能想到的使用[这篇文章](https://stackoverflow.com/questions/4225005/how-to-generate-a-header-in-source-with-cmake)和[这篇文章](https://stackoverflow.com/questions/9827208/run-a-shell-command-ctags-in-cmake-and-make)中的信息的组合。

下面是我可以创建的最简单的方法来重现我遇到的问题。

我的项目结构如下：

```
.
├── CMakeLists.txt
├── main.c
└── 资源
    ├── 生成.sh
    └── input.json

```

### CMakeLists.txt

* * *

```
cmake_minimum_required(VERSION 2.8)
project(test)

set(TEST_DATA_OUTPUT ${CMAKE_CURRENT_BINARY_DIR}/test_data.h)
add_custom_command(
    OUTPUT ${TEST_DATA_OUTPUT}
    COMMAND res/generate.sh h res/input.json ${TEST_DATA_OUTPUT}
    WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}
    COMMENT "Generates the header file containing the JSON data."
)

# add the binary tree to the search path for include files so we
# will fine the generated files
include_directories(${CMAKE_CURRENT_BINARY_DIR})

set(SRCS main.c)
add_executable(test ${SRCS}) 
```

### 主程序

* * *

```
#include <stdio.h>

#include "test_data.h"

int main(int argc, char** argv)
{
    printf("%s\n", TEST_DATA);
    return 0;
} 
```

### 资源/生成.sh

* * *

```
#!/bin/sh
#
# Converts the JSON to a C header file to be used as a resource file.

print_usage()
{
cat << EOF
USAGE:
    $0 h INPUT

DESCRIPTION:
    Outputs JSON data to another format.

EOF
}

to_h()
{
cat << EOF
#ifndef TEST_DATA_H
#define TEST_DATA_H

static const char* TEST_DATA =
"$(cat "$1" | sed 's/"/\\"/g' | sed ':a;N;$!ba;s/\n/"\n"/g')";

#endif // TEST_DATA_H
EOF
}

case "$1" in
h)
    if [ $# -eq 3 ] ; then
        to_h "$2" > "$3"
    elif [ $# -eq 2 ] ; then
        to_h "$2"
    else
        echo "no input file specified" 1>&2
    fi
    ;;
*)
    print_usage
    ;;
esac

exit 0 
```

### res/input.json

* * *

```
{
    "1": {
        "attr1": "value1",
        "attr2": "value2"
    },
    "2": {
        "attr1": "value1",
        "attr2": "value2"
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:38:45.773

这是一个示例 CMakeLists.txt，它使用[Ragel](http://www.complang.org/ragel/)读取输入文件 ( `nstrip.rl`)，生成输出文件 ( `nstrip.c`)，并将输出文件编译/链接到二进制文件中。

```
set(RAGEL_OUTPUT ${CMAKE_CURRENT_BINARY_DIR}/nstrip.c)

add_executable(
  nstrip
    ${RAGEL_OUTPUT}
  )
set_target_properties(
  nstrip
  PROPERTIES
    COMPILE_FLAGS -std=c99
  )

find_program(RAGEL ragel)
add_custom_command(
  OUTPUT             ${RAGEL_OUTPUT}
  COMMAND            ${RAGEL} -G2 -o ${RAGEL_OUTPUT} nstrip.rl
  DEPENDS            nstrip.rl
  WORKING_DIRECTORY  ${CMAKE_CURRENT_SOURCE_DIR}
  COMMENT            "Ragel: Generating Statemachine"
  VERBATIM
  ) 
```

笔记：

*   with`DEPENDS`该命令仅在依赖项实际更改时才会执行。
*   这是为源外构建准备的，因为它将生成的文件放入`CMAKE_CURRENT_BINARY_DIR`（即*构建树中与**源*树中上述 CMakeLists.txt 的位置相对应的目录），并将其用作可执行。
*   同样，它还使用`WORKING_DIRECTORY`设置为上述 CMakeLists.txt 所在位置的命令执行命令，因此您可以`nstrip.rl`使用相对路径引用源文件（此处）（您也可以反过来执行）。

对于您的情况，您需要告诉 CMake 在哪里可以找到标头：

```
# assuming you generate into the build tree
include_directories("${CMAKE_CURRENT_BINARY_DIR}")` 
```

此外，如果生成的可执行文件是位于源代码树而`$PATH`不是. 每当您更改输入文件 (json)*或*脚本本身时，CMake 都会自动触发头文件的重建。`find_program``DEPENDS`

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-14T01:51:46.387

现在我已经获得了更多的 CMake 经验，我回来看看我是否可以让它工作。下面显示了需要更改的 2 行。

```
diff --git a/CMakeLists.txt b/CMakeLists.txt
index 6aa2ac6..5d80124 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -2,8 +2,7 @@ cmake_minimum_required(VERSION 2.8)
 project(test)

 set(TEST_DATA_OUTPUT ${CMAKE_CURRENT_BINARY_DIR}/test_data.h)
-add_custom_command(
-    OUTPUT ${TEST_DATA_OUTPUT}
+add_custom_target(generate
     COMMAND res/generate.sh h res/input.json ${TEST_DATA_OUTPUT}
     WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}
     COMMENT "Generates the header file containing the JSON data."
@@ -15,3 +14,4 @@ include_directories(${CMAKE_CURRENT_BINARY_DIR})

 set(SRCS main.c)
 add_executable(test ${SRCS})
+add_dependencies(test generate) 
```*

# file - VBS 脚本抓取所有图像并为重复项添加价值

> ID：14805035
> 
> 赞同：0
> 
> 时间：2013-02-11T02:18:22.670
> 
> 标签：file, vbscript, directory

我希望在不指定文件夹的情况下从 E:\ 驱动器中获取所有文件。我希望脚本只抓取 E: 驱动器中的所有文件。这是我的脚本。我尝试了多种方法来编写它，但无法让它工作。这是我的脚本，它通过抓取驱动器内的文件夹来工作。第二个是我尝试修改以使其正常工作的那个。任何帮助将不胜感激。

```
 Set fso = CreateObject("Scripting.FileSystemObject")

testfolder = ".\allpictures"
'fso.CreateFolder(testfolder)

CopyFiles fso.GetFolder("C:\Users\virix\Desktop\mytest") 

Sub CopyFiles(fldr)
  For Each f In fldr.Files
    basename  = fso.GetBaseName(f)
    extension = fso.GetExtensionName(f)
    If LCase(extension) = "jpg" or LCase(extension) = "jpeg" Then
      dest  = fso.BuildPath(testfolder, f.Name)
      count = 0
      Do While fso.FileExists(dest)
        count = count + 1
        dest  = fso.BuildPath(testfolder, basename & "_" & count & "." _
          & extension)
      Loop
      f.Copy dest
    End If
  Next

  For Each sf In fldr.SubFolders
    CopyFiles sf
  Next
End Sub 
```

这是我修改的，但无法开始工作。

```
Set fso = CreateObject("Scripting.FileSystemObject")

testfolder = ".\allpictures"
'fso.CreateFolder(testfolder)

StartCopy fso.GetDrive("E:\")

Sub StartCopy(fldr)
  For Each f In fldr.Files 
    basename  = fso.GetBaseName(f)
    extension = fso.GetExtensionName(f)
    If LCase(extension) = "jpeg" or LCase(extension) = "jpg" Then
      dest  = fso.BuildPath(testfolder, f.Name)
      count = 0
      Do While fso.FileExists(dest)
        count = count + 1
        dest  = fso.BuildPath(testfolder, basename & "_" & count & "." _
          & extension)
      Loop
      f.Copy dest
    End If
  Next

  For Each sf In fldr.SubFolders
    StartCopy sf
  Next
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T02:45:21.267

尝试这个 ：

```
Set fso = CreateObject("Scripting.FileSystemObject")

testfolder = ".\allpictures"
'fso.CreateFolder(testfolder)

StartCopy fso.GetFolder("E:\")

Sub StartCopy(fldr)
  For Each Subfolder in fldr.SubFolders
  For Each f In fldr.Files 
    basename  = fso.GetBaseName(f)
    extension = fso.GetExtensionName(f)
    If LCase(extension) = "jpeg" or LCase(extension) = "jpg" Then
      dest  = fso.BuildPath(testfolder, f.Name)
      count = 0
      Do While fso.FileExists(dest)
        count = count + 1
        dest  = fso.BuildPath(testfolder, basename & "_" & count & "." _
          & extension)
      Loop
      f.Copy dest
    End If
  Next
   StartCopy Subfolder
  Next

  For Each sf In fldr.SubFolders
    StartCopy sf
  Next
End Sub 
```

# javascript - 使用 jquery 触发器处理自定义事件中的错误

> ID：14805039
> 
> 赞同：0
> 
> 时间：2013-02-11T02:18:43.680
> 
> 标签：javascript, jquery

使用 JQuery 触发事件时如何控制错误处理？

我们发现，如果在处理程序函数中抛出错误，它会阻止调用其他处理程序。

请看这个[小提琴](http://jsfiddle.net/VPudu/)。

问题复制如下：

```
$(document).on('customEvent', function()
{
  thisIsUndefined.yetIDereferencedIt;
});

$(document).on('customEvent', function()
{
  // Something useful happens here.
  alert('something');
});

$(document).trigger('customEvent'); 
```

在上面的示例中，我希望显示警报。因为我不能保证我可以完全控制所有事件处理程序，所以我想要一种方法来挂钩触发器并处理每个事件侦听器的错误。

当然，欢迎替代设计选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T03:25:56.880

如果某个库已经定义了事件，并且您根本无法控制该事件，我将在取消绑定该事件后重新触发该事件，如下所示。

[http://jsbin.com/uvivat/2/edit](http://jsbin.com/uvivat/2/edit)

```
$("a").on("click", function() {
  Undefined.badFunc
});

var prevClickEvent = $._data($("a")[0], "events")["click"][0]["handler"];

//console.log(prevClickEvent);

$("a").unbind("click").on("click", function() {
    try {
       prevClickEvent.apply(this);
    } catch(e) {
       console.log(e);
    }
    alert("hi");
    return false;
}) 
```

- - - 编辑 - -

要完成所有注册的功能，

```
var prevClickEvents = $.extend({},$._data( $("a")[0], "events")["click"]);

$("a").unbind("click").on("click", function() {
  var keys = Object.keys(prevClickEvents);
  for (var i=0; i< keys.length; i++) {
    try {
      prevClickEvents[keys[i]]["handler"].call(this);
    } catch(e) {
      console.log(e);
    }
  }
}); 
```

# javascript - SignalR 将 0.5.3 升级到 1.0.x 问题

> ID：14805042
> 
> 赞同：0
> 
> 时间：2013-02-11T02:19:17.253
> 
> 标签：javascript, asp.net-mvc, signalr

我最近/正在从 signalR 0.5.3 升级/升级到 1.0.x rc2 并且在创建连接时遇到问题。

问题是我遇到了异常：

类型错误：res 为空

连接.appRelativeUrl = res.Url;

我创建连接的脚本已被剥离回默认演示代码：

```
 var connection = $.connection('/signalr');

        connection.start(function () {
            console.log("connection started!");
        }); 
```

我仍然得到错误。当我进入 jquery.signalr.js 文件时，我点击了连接代码：

```
 var url = connection.url + "/negotiate";
 connection.log("Negotiating with '" + url + "'.");
 $.ajax({
         url: url,
         global: false,
         cache: false,
         type: "GET",
         data: {},
         dataType: connection.ajaxDataType,
         error: function (error) {
              $(connection).triggerHandler(events.onError, [error.responseText]);
              deferred.reject("SignalR: Error during negotiation request: " + error.responseText);
              // Stop the connection if negotiate failed
              connection.stop();
          },
          success: function (res) {
               var keepAliveData = connection.keepAliveData; 
               connection.appRelativeUrl = res.Url; 
```

我到了最后一行，res 参数为空，这正在破坏我的连接尝试。我已经更新了所有 signalR 依赖项，更改了所有集线器客户端调用以使用集线器中的其他客户端/服务器属性。

我的 /signalr/hubs js 脚本正在创建中，并且所有正确的方法都映射到我期望可用的服务器端集线器方法。js文件如下：

```
 /*!
    * ASP.NET SignalR JavaScript Library v1.0.0
    * http://signalr.net/
    *
    * Copyright Microsoft Open Technologies, Inc. All rights reserved.
    * Licensed under the Apache 2.0
    * https://github.com/SignalR/SignalR/blob/master/LICENSE.md
    *
    */

   /// <reference path="..\..\SignalR.Client.JS\Scripts\jquery-1.6.4.js" />
   /// <reference path="jquery.signalR.js" />

      (function ($, window) {
       /// <param name="$" type="jQuery" />

   "use strict";

    if (typeof ($.signalR) !== "function") {
        throw new Error("SignalR: SignalR is not loaded. Please ensure jquery.signalR-x.js is referenced before ~/signalr/hubs.");
    }

    var signalR = $.signalR;

    function makeProxyCallback(hub, callback) {
        return function () {
            // Call the client hub method
            callback.apply(hub, $.makeArray(arguments));
        };
    }

    function registerHubProxies(instance, shouldSubscribe) {
        var key, hub, memberKey, memberValue, subscriptionMethod;

        for (key in instance) {
            if (instance.hasOwnProperty(key)) {
                hub = instance[key];

                if (!(hub.hubName)) {
                    // Not a client hub
                    continue;
                }

                if (shouldSubscribe) {
                    // We want to subscribe to the hub events
                    subscriptionMethod = hub.on;
                }
                else {
                    // We want to unsubscribe from the hub events
                    subscriptionMethod = hub.off;
                }

                // Loop through all members on the hub and find client hub functions to subscribe/unsubscribe
                for (memberKey in hub.client) {
                    if (hub.client.hasOwnProperty(memberKey)) {
                        memberValue = hub.client[memberKey];

                        if (!$.isFunction(memberValue)) {
                            // Not a client hub function
                            continue;
                        }

                        subscriptionMethod.call(hub, memberKey, makeProxyCallback(hub, memberValue));
                    }
                }
            }
        }
    }

    $.hubConnection.prototype.createHubProxies = function () {
        var proxies = {};
        this.starting(function () {
            // Register the hub proxies as subscribed
            // (instance, shouldSubscribe)
            registerHubProxies(proxies, true);

            this._registerSubscribedHubs();
        }).disconnected(function () {
            // Unsubscribe all hub proxies when we "disconnect".  This is to ensure that we do not re-add functional call backs.
            // (instance, shouldSubscribe)
            registerHubProxies(proxies, false);
        });

        proxies.chatHub = this.createHubProxy('chatHub'); 
        proxies.chatHub.client = { };
        proxies.chatHub.server = {
            exitChat: function (chatId) {
            /// <summary>Calls the ExitChat method on the server-side ChatHub hub.&#10;Returns a jQuery.Deferred() promise.</summary>
            /// <param name=\"chatId\" type=\"String\">Server side type is System.String</param>
                return proxies.chatHub.invoke.apply(proxies.chatHub, $.merge(["ExitChat"], $.makeArray(arguments)));
             },

            getChat: function (chatId) {
            /// <summary>Calls the GetChat method on the server-side ChatHub hub.&#10;Returns a jQuery.Deferred() promise.</summary>
            /// <param name=\"chatId\" type=\"String\">Server side type is System.String</param>
                return proxies.chatHub.invoke.apply(proxies.chatHub, $.merge(["GetChat"], $.makeArray(arguments)));
             },

            joinChat: function (chatId, inviteeUserIds, groupId) {
            /// <summary>Calls the JoinChat method on the server-side ChatHub hub.&#10;Returns a jQuery.Deferred() promise.</summary>
            /// <param name=\"chatId\" type=\"String\">Server side type is System.String</param>
            /// <param name=\"inviteeUserIds\" type=\"Object\">Server side type is System.String[]</param>
            /// <param name=\"groupId\" type=\"String\">Server side type is System.String</param>
                return proxies.chatHub.invoke.apply(proxies.chatHub, $.merge(["JoinChat"], $.makeArray(arguments)));
             },

            sendChatMessage: function (chatId, messageId, message) {
            /// <summary>Calls the SendChatMessage method on the server-side ChatHub hub.&#10;Returns a jQuery.Deferred() promise.</summary>
            /// <param name=\"chatId\" type=\"String\">Server side type is System.String</param>
            /// <param name=\"messageId\" type=\"String\">Server side type is System.String</param>
            /// <param name=\"message\" type=\"String\">Server side type is System.String</param>
                return proxies.chatHub.invoke.apply(proxies.chatHub, $.merge(["SendChatMessage"], $.makeArray(arguments)));
             },

            typing: function (chatId, isTyping) {
            /// <summary>Calls the Typing method on the server-side ChatHub hub.&#10;Returns a jQuery.Deferred() promise.</summary>
            /// <param name=\"chatId\" type=\"String\">Server side type is System.String</param>
            /// <param name=\"isTyping\" type=\"\">Server side type is System.Boolean</param>
                return proxies.chatHub.invoke.apply(proxies.chatHub, $.merge(["Typing"], $.makeArray(arguments)));
             }
        };

        proxies.debugHub = this.createHubProxy('debugHub'); 
        proxies.debugHub.client = { };
        proxies.debugHub.server = {
            registerWithDebugger: function () {
            /// <summary>Calls the RegisterWithDebugger method on the server-side DebugHub hub.&#10;Returns a jQuery.Deferred() promise.</summary>
                return proxies.debugHub.invoke.apply(proxies.debugHub, $.merge(["RegisterWithDebugger"], $.makeArray(arguments)));
             }
        };

        proxies.groupHub = this.createHubProxy('groupHub'); 
        proxies.groupHub.client = { };
        proxies.groupHub.server = {
            joinGroup: function (userId, groupId) {
            /// <summary>Calls the JoinGroup method on the server-side GroupHub hub.&#10;Returns a jQuery.Deferred() promise.</summary>
            /// <param name=\"userId\" type=\"String\">Server side type is System.String</param>
            /// <param name=\"groupId\" type=\"String\">Server side type is System.String</param>
                return proxies.groupHub.invoke.apply(proxies.groupHub, $.merge(["JoinGroup"], $.makeArray(arguments)));
             },

            joinGroups: function (userId) {
            /// <summary>Calls the JoinGroups method on the server-side GroupHub hub.&#10;Returns a jQuery.Deferred() promise.</summary>
            /// <param name=\"userId\" type=\"String\">Server side type is System.String</param>
                return proxies.groupHub.invoke.apply(proxies.groupHub, $.merge(["JoinGroups"], $.makeArray(arguments)));
             },

            leaveGroup: function (userId, groupId) {
            /// <summary>Calls the LeaveGroup method on the server-side GroupHub hub.&#10;Returns a jQuery.Deferred() promise.</summary>
            /// <param name=\"userId\" type=\"String\">Server side type is System.String</param>
            /// <param name=\"groupId\" type=\"String\">Server side type is System.String</param>
                return proxies.groupHub.invoke.apply(proxies.groupHub, $.merge(["LeaveGroup"], $.makeArray(arguments)));
             }
        };

        proxies.userHub = this.createHubProxy('userHub'); 
        proxies.userHub.client = { };
        proxies.userHub.server = {
            registerUserClient: function (userId) {
            /// <summary>Calls the RegisterUserClient method on the server-side UserHub hub.&#10;Returns a jQuery.Deferred() promise.</summary>
            /// <param name=\"userId\" type=\"String\">Server side type is System.String</param>
                return proxies.userHub.invoke.apply(proxies.userHub, $.merge(["RegisterUserClient"], $.makeArray(arguments)));
             },

            updateUserClientStatus: function (userId, latestHeartbeat, latestInteractivity) {
            /// <summary>Calls the UpdateUserClientStatus method on the server-side UserHub hub.&#10;Returns a jQuery.Deferred() promise.</summary>
            /// <param name=\"userId\" type=\"String\">Server side type is System.String</param>
            /// <param name=\"latestHeartbeat\" type=\"Object\">Server side type is System.DateTime</param>
            /// <param name=\"latestInteractivity\" type=\"Object\">Server side type is System.DateTime</param>
                return proxies.userHub.invoke.apply(proxies.userHub, $.merge(["UpdateUserClientStatus"], $.makeArray(arguments)));
             }
        };

        return proxies;
    };

    signalR.hub = $.hubConnection("/signalr", { useDefaultPath: false });
    $.extend(signalR, signalR.hub.createHubProxies());

   }(window.jQuery, window)); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T12:39:22.117

事实证明上面的代码没有任何问题。从 SignalR 0.5.3 到 1.0.x 的迁移顺利进行。问题是我的开发环境非常混乱。

在我们的案例中存在一个巨大的问题——我们也在使用 RavenDB。两者都依赖于不同版本的 NewtonSoft JSON。

如果您同时使用这两种技术，请注意将以前版本的 NewtonsoftJson 格式化的 JSON 对象从一个传递到另一个，因为生成的 JSON 序列化对象不向后兼容。

从 Raven 传递到 SignalR js 客户端时，您必须手动映射它们。

# javascript - 禁用地理定位时，谷歌地图不以位置为中心

> ID：14805043
> 
> 赞同：1
> 
> 时间：2013-02-11T02:19:18.527
> 
> 标签：javascript, google-maps, google-maps-api-3

我遇到了一个问题，如果禁用地理定位，那么地图应该以指定位置为中心，但禁用时没有加载任何内容。`if`启用地理定位后，语句的第一部分可以正常工作。为什么`else`禁用时该部分不工作？

```
if (navigator.geolocation) {
  navigator.geolocation.getCurrentPosition(function (position) { 
    var latitude = position.coords.latitude;                    
    var longitude = position.coords.longitude;               
    var coords = new google.maps.LatLng(latitude, longitude);
    var directionsService = new google.maps.DirectionsService();
    var directionsDisplay = new google.maps.DirectionsRenderer();
    var mapOptions = 
    {
      zoom: 15,  
      center: coords, 
      mapTypeControl: true, 
      navigationControlOptions:
      {
        style: google.maps.NavigationControlStyle.SMALL 
      },
      mapTypeId: google.maps.MapTypeId.ROADMAP 
    };
    map = new google.maps.Map(document.getElementById("mapContainer"), mapOptions);
    directionsDisplay.setMap(map);
    directionsDisplay.setPanel(document.getElementById(''));
    var request = {
      origin: coords,
      destination: 'BT42 1FL',
      travelMode: google.maps.DirectionsTravelMode.DRIVING
    };
    directionsService.route(request, function (response, status) {
      if (status == google.maps.DirectionsStatus.OK) {
        directionsDisplay.setDirections(response);
      }
    });
  });
}
else {
  alert("Geolocation API is not supported in your browser.");
  var mapOptions =
  {
    zoom: 15,  
    center: 'BT42 1FL',
    mapTypeControl: true, 
    navigationControlOptions:
    {
      style: google.maps.NavigationControlStyle.SMALL 
    },
    mapTypeId: google.maps.MapTypeId.ROADMAP
  };
  map = new google.maps.Map(document.getElementById("mapContainer"), mapOptions);
} 
```

`alert`也不提醒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T02:38:26.753

至少在 Chrome 24 中，当地理定位被用户拒绝时，这`navigator.geolocation`不是虚假的。

如果用户拒绝地理定位，将调用*失败*回调（的第二个参数[`getCurrentPosition`](http://dev.w3.org/geo/api/spec-source.html#get-current-position)）。这当然也会发生在任何其他未能获得该位置的情况下。使用以下代码（在[jsfiddle](http://jsfiddle.net/NgDRk/)中可用）：

```
function success() {
    alert("success!");
}

function failure() {
    alert("failure!");
}

if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(success, failure);
    alert("truthy!");
} else {
  alert("falsy!");
} 
```

在我的浏览器上，如果我单击“拒绝”按钮，则会提示“真实”，然后是“失败”。如果您想提供相同的行为，无论地理定位失败还是用户拒绝它，我建议使用如下代码：

```
function noGeoInfo() {
    alert("couldn't get your location info; making my best guess!");
}

function geoInfo(position) {
    alert("hey your position is " + position + " isn't that swell?");
}

if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(geoInfo, noGeoInfo);
} else {
    noGeoInfo();
} 
```

# c++ - 编译器窃取的代码，我如何规避它的犯罪方式

> ID：14805048
> 
> 赞同：1
> 
> 时间：2013-02-11T02:21:10.773
> 
> 标签：c++, multithreading, compiler-construction, for-loop, compiler-optimization

我想在工作的新计算机上强调处理器。我想一个好的方法是为每个处理器打开一个线程，该函数具有以下功能：

```
void soStressful() {
    int j = 0;
    for (int i = 0; i < 10000; ++i) {
        j += i;
    }
} 
```

但是由于某种原因，编译器会删除此代码。（因为无论计算的复杂性或 i 的大小如何，程序都会立即运行）而且我们还记录了非常少的 cpu 使用情况。

**如何停止编译器编译此代码？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T02:25:39.677

您的函数不接受输入，也不提供输出。所以编译器很容易发现它什么都不做。

我建议在你的循环中修改一个全局变量，最好声明为 volatile。然后编译器将无法假定它没有被使用。

此外，如果处理器速度很快，您将需要超过 10000 次迭代循环才能获得任何有意义的 CPU 使用率。

您可能想看看那里的一些基准测试代码 - dhrystone 就是其中之一。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-11T02:41:00.613

只需`j`从您的函数返回并在调用者中对其进行处理。但这是对处理器施加压力的一种不好的方法，因为它只加载处理器的一个非常有限的子集。根据您想要加载处理器的原因（您想确保它正常工作吗？您想尽可能地加热它吗？）您应该选择一个专门设计用于执行您想要的程序。[Prime95](http://en.wikipedia.org/wiki/Prime95)是一种常见的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-11T02:25:18.943

尝试在变量上使用“ [volatile](http://en.wikipedia.org/wiki/Volatile_variable) ”关键字。这当然是忽略了你需要做更多的事情来给你的电脑带来压力的事实。您可能会发现[这个答案](https://stackoverflow.com/a/8391601/13760)很有用，尽管我会非常认真地对待该代码的警告。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-12T00:08:51.783

If you *really* want to stress the processor:

```
tan(atan(tan(atan(tan(atan(tan(atan(tan(atan(tan(atan(tan(atan(tan(atan(tan(atan(tan(atan(tan(atan(0.5d)))))))))))))))))))))); 
```

Add a whole lot more levels, and put it into a loop.

This was a soak-test for the PDP-11 many years ago.

# php - 发帖到粉丝专页到错误的位置

> ID：14805049
> 
> 赞同：0
> 
> 时间：2013-02-11T02:21:12.550
> 
> 标签：php, facebook, facebook-page

以下内容可以很好地发布到 Facebook 粉丝页面，但仅限于“其他人在...上发布的最新帖子”部分。如果我发布到普通的 FACEBOOK 页面，编码效果很好，而不是 FAN PAGE。

我已经尝试了所有我能找到的关于发布到粉丝页面的帖子。似乎没有任何效果。我的想法是我没有获得只有用户的实际页面的访问令牌。或者我没有获得具有 manage_pages 权限的返回令牌。

感谢您的任何帮助，您可以提供。

```
<?php 
$app_id = xxxxxxxxxx; // APP ID
$app_secret = xxxxxxxxxxxx;
$my_url = "http : // www . afakewebsitefordemoonly.com/thispageURL.php";
$fb_id = xxxxxxxxxxx; // ACTUAL FAN PAGE NUMBER

// known valid access token stored in a database
$access_token = MANUAL_ACCESS_TOKEN; // GOT MANUAL ACCESS TOKEN FROM API Explorer - expires in about 90 minutes but good enough to request a new token. THE original TOKEN HAS manage_pages and publish_stream permissions.

$code = $_REQUEST["code"];

// If we get a code, it means that we have re-authed the user
//and can get a valid access_token.

if (isset($code)) {

    $token_url="https : // graph.facebook.com/oauth/access_token?client_id="
    . $app_id . "&redirect_uri=" . urlencode($my_url)
    . "&client_secret=" . $app_secret
    . "&code=" . $code . "&display=popup";
    $response = file_get_contents($token_url);
    $params = null;
    parse_str($response, $params);
    $access_token = $params['access_token'];
}

// Attempt to query the graph:
$graph_url = "https : //graph.facebook.com/me?" . "access_token=" . $access_token;
$response = curl_get_file_contents($graph_url);
$decoded_response = json_decode($response);

//Check for errors
if ($decoded_response->error) {
    // check to see if this is an oAuth error:
    if ($decoded_response->error->type== "OAuthException") {
        // Retrieving a valid access token.
        $dialog_url= "https : // www . facebook.com/dialog/oauth?"
        . "client_id=" . $app_id
        . "&redirect_uri=" . urlencode($my_url);
        echo("<script> top.location.href='" . $dialog_url
        . "'</script>");
    }
    else {
        echo "other error has happened";
    }
}
else {
    // success
    //echo("success" . $decoded_response->name);
    //echo($access_token);
    /******************************/
    //$data['from'] = $fb_id;
    //$data['picture'] = "http :// www. URL_TO_PHOTO.jpg";
    $data['link'] = "http  :// www .fakewebsitefortesting.com/"; // static link I want to put on post on my site.
    $data['message'] = "Message here.";
    $data['subject'] = 'Some Subject';
    $data['title'] = 'Fancy Title here';
    $data['description'] = "Description is more info here.";
    $data['access_token'] = $access_token;

    $post_url = 'https : // graph.facebook.com/'. $fb_id . '/feed';

    echo "Post URL: ". $post_url . "<br />";
    echo "Data: " . $data . "<br />";
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $post_url);
    curl_setopt($ch, CURLOPT_POST, 1);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    $return = curl_exec($ch);
    curl_close($ch);
    echo "Return: ". $return . "<br />";
    /******************************/

}

// note this wrapper function exists in order to circumvent PHP’s
//strict obeying of HTTP error codes.  In this case, Facebook
//returns error code 400 which PHP obeys and wipes out
//the response.
function curl_get_file_contents($URL) {
    $c = curl_init();
    curl_setopt($c, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($c, CURLOPT_URL, $URL);
    $contents = curl_exec($c);
    $err  = curl_getinfo($c,CURLINFO_HTTP_CODE);
    curl_close($c);
    if ($contents) return $contents;
    else return FALSE;
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T06:53:01.480

您没有使用页面的访问令牌，因此 Facebook 将您视为普通用户（而不是页面管理员）并将您的帖子添加到“其他人最近发布的帖子”中。

要以页面管理员身份发布到页面，请使用页面的适当访问令牌。[您可以通过对https://graph.facebook.com/me/accounts?access_token=YOUR_ACCESS_TOKEN](https://graph.facebook.com/me/accounts?access_token=YOUR_ACCESS_TOKEN)进行 api 调用来找到所有页面和访问令牌

# c# - 使用 asp.net 验证器验证 asp.net 日历日期是否在将来

> ID：14805051
> 
> 赞同：0
> 
> 时间：2013-02-11T02:21:40.797
> 
> 标签：c#, asp.net, calendar, validation

所以我想使用 CompareValidator 来确保 ASP 日历对象选择的日期是未来的日期。我不知道该怎么做，但这是我到目前为止所拥有的。当我尝试执行此操作时，它告诉我无法验证日历对象？

.aspx 代码：

```
 <asp:CompareValidator ID="ValidateEventDate" ControlToValidate="Calendar1" Operator="GreaterThanEqual"
    Type="Date" runat="server" ErrorMessage="Can't pick a date in the past">

  <asp:Label ID="eventDate" ForeColor="Black" runat="server" 
   Text="Select a Date"></asp:Label>

<asp:Calendar ID="Calendar1" runat="server" 
    onselectionchanged="Calendar1_SelectionChanged" BackColor="#FF0000"></asp:Calendar>
<br /> 
```

这是我背后的代码：

```
 protected void Calendar1_SelectionChanged(object sender, EventArgs e)
    {
        ValidateEventDate.ValueToCompare = DateTime.Now.ToString("dd/MM/yyyy");

    } 
```

任何想法如何实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T02:27:59.180

看看这个问题：[Calendar Custom Validator](https://stackoverflow.com/questions/9415206/calendar-custom-validator)
标准的验证器对于日历控件不是很有用。

# ruby-on-rails - Rails update_attribute

> ID：14805054
> 
> 赞同：0
> 
> 时间：2013-02-11T02:21:57.033
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我目前有以下控制器方法：

```
def update_all

    params[:users].each do |product, user|
       @product = Product.find(product)
       @product.update_attribute(:user_id, user)
    end
    redirect_to :back, :flash => { :notice => "Updated users" }
  end 
```

这可以按预期工作，但是问题是参数是通过具有默认值的 select_tag 传递的-因此，如果仅更改了一个 select 标记并提交了表单，则所有其他记录都将更新为默认值价值。如何检查属性是否已从其先前的值更改，并且仅当它已更改以更新它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T02:44:42.717

您可以检查脏属性和存在

```
params[:users].each do |product, user_id|
  @product = Product.find(product)

  if user_id != '--' && user_id != @product.user_id
    @product.update_attribute :user_id, user
  end

  # or
  # if user_id != '--'
  #   @product.user_id = user_id
  #   @product.save if @product.user_id_changed?
  # end
end 
```

或在您的选择标签中设置默认值（来自[通过 select_tag 发送额外的参数值](https://stackoverflow.com/questions/14802018/sending-extra-param-value-via-select-tag)）

```
<%= collection_select :user, :id, User.all, :id, :name, { selected: product.user_id }, { name: "users[#{product.id}]" } %> 
```

所以你不必担心默认值。

# opengl - Blitting 模板缓冲区到颜色缓冲区。是否可以？

> ID：14805062
> 
> 赞同：1
> 
> 时间：2013-02-11T02:23:20.247
> 
> 标签：opengl, blit

我正在尝试通过 GLSL 渲染模板缓冲区纹理，但我找不到它可能。模板纹理使用 GL_DEPTH24_STENCIL8 格式与深度纹理打包在一起。我发现您无法渲染该纹理，至少不能渲染模板数据，但深度数据可以使用纹理的 x/y/z 值进行渲染。所以我想出了一个超级想法，尝试将模板缓冲区 blit 为 GL_RED 纹理。这在某种程度上可能吗？

以下是如何将模板缓冲区从 FBO1 位块传输到 FBO2：

```
glBindFramebufferEXT(GL_READ_FRAMEBUFFER_EXT, FBO1 );
glBindFramebufferEXT(GL_DRAW_FRAMEBUFFER_EXT, FBO2 );
glBlitFramebufferEXT(0, 0, X, Y, 0, 0, X, Y, GL_STENCIL_BUFFER_BIT, GL_NEAREST );
glBindFramebufferEXT(GL_READ_FRAMEBUFFER_EXT, 0); 
```

这就是我卡住的地方。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T02:56:46.937

您只能将一种类型的数据blit 到它自己的数据类型中。您不能将颜色数据粘贴到 中`GL_DEPTH_COMPONENT`，也不能将深度数据粘贴到颜色中。你也不能把模板涂成颜色。

做你想做的事情的唯一方法是使用[ARB_stencil_texturing](http://www.opengl.org/wiki/Texture#Stencil_texturing)，它是 GL 4.3 的一部分。它是否可用于您的硬件取决于您的硬件。

# html - css：用文本填充框，除了选定区域

> ID：14805064
> 
> 赞同：-1
> 
> 时间：2013-02-11T02:23:28.837
> 
> 标签：html, css

我这里有插图。

![在此处输入图像描述](../Images/4d53103716a76973f53242ec22dc9380.png)

我可以知道如何实现这种格式吗？

一个容器框，除了所选区域外，还装满了文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T06:14:46.037

[在这里](http://www.w3schools.com/css/css_float.asp)查看 css`float`属性

您可以像 this fiddle 中演示的那样将图像添加`float:right`到普通段落中。

[http://jsfiddle.net/rhvaU/](http://jsfiddle.net/rhvaU/)

# c - 在C中将字符串的第一个字符读取为整数

> ID：14805066
> 
> 赞同：2
> 
> 时间：2013-02-11T02:23:39.743
> 
> 标签：c, string, atoi

我将如何将该字符串的第一个字符读取为整数？

```
char *p = argv[1]; 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T02:31:00.240

你的问题模棱两可。以下是三种可能的解释及其答案。

1.  C 中“字符串”的每个字符实际上都是一个小整数，您可以通过简单地索引数组来检索它。

    ```
    int first = p[0]; 
    ```

2.  如果您知道字符串的第一个字符是 digit 并且您希望它的值*是 digit*，您可以利用这样一个事实，即`'0'`through的字符代码`'9'`保证是连续的并且不断增加：

    ```
    int first_dv = -1;
    if (p[0] >= '0' && p[0] <= '9')
        first_dv = p[0] - '0'; 
    ```

3.  如果您说错了，并且您实际上想将*整个字符串*处理为十进制数，请使用 执行此操作`strtol`，或者`strtoul`该数字不应被解释为负数：

    ```
    char *endp;
    errno = 0;
    long numeric_value = strtol(p, &endp, 10);
    if (endp == p || *endp) {
        fprintf(stderr, "junk after number: %s\n", endp);
    } else if (errno) {
        fprintf(stderr, "%s: invalid number (%s)\n", p, strerror(errno));
    } 
    ```

    这些在`<stdlib.h>`. 您不要*使用*or 执行此操作，与`atoi`许多`sscanf`其他人会告诉您的相反：`atoi`不会告诉您数字后面是否有垃圾，`sscanf`不仅不会告诉您，还允许您的程序在数字溢出时崩溃.

# c - 将一维二进制数组分解为多个较小的 MPI 数组，不填充适当的数据，缺少什么？

> ID：14805073
> 
> 赞同：0
> 
> 时间：2013-02-11T02:24:54.700
> 
> 标签：c, arrays, mpi

我正在做一个导入 32x32 或 64x64 PBM 图像文件的项目。示例如下：

```
P1
# CREATOR: GIMP PNM Filter Version 1.1
32 32
01111110000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000001000000000000
00000000000001100000000000000000
00001100000000100011100000000000
00001100000000000000000000000000
00000011000000000000000000000000
00000011000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000011100000
01000101001000000000000000000000
01000101010000011100000000000000
01000101100000111000000000000000
01000101010000000000000000000000
01000101001000000000000000000000
00111001001000000000000001000000
00000000000000000000000001000000
00000000000000000000000001000000
00000000000000000000000000000000
00000000010000000000000000000000
00000000001000000000000000000000
00000000111000000000000000000000
00000000000000000000000110000000
00000000000000000000001001000000
00110000000000000000000110000000
01100000000000000110000000001000
00100000000000000110000000001100
00000000000000011000000000001100
00000000000000011000000000000100
00000000000000000000000000000000 
```

这被读入一维数组并按顺序处理。我试图将一维数组以 4x4 模式分解为多个数组。一旦分成“块”，临时较小的阵列将分布到多个处理元件。在处理完每个较小的块后，“块”将被发送回主节点以进行重组。

这是以顺序方式工作的完整代码：

```
/*  life.c

    Play Conway's Game of Life

    Reads a P1 file in, outputs a P1 file.

    Does as many timesteps as stated on the command line.

    Uses a classic 1-element fake zone internally.

    Jan. 30, 2013 by H. Dietz
*/

#include <stdio.h>
#include <stdlib.h>
#include <mpi.h>

unsigned char *
read_P1(int *xdim, int *ydim)
{
    register int c, x, y;
    register unsigned char *p;

    if ((c = getchar()) != 'P') {
pbm_bad:
        fprintf(stderr, "Bad PBM input\n");
        exit(1);
    }
    if ((c = getchar()) != '1') goto pbm_bad;
    c = getchar();

#define Eat_Space \
    while ((c == ' ') || \
           (c == '\t') || \
           (c == '\n') || \
           (c == '\r') || \
           (c == '#')) { \
        if (c == '#') while ((c = getchar()) != '\n') ; \
        c = getchar(); \
    }

    Eat_Space;      /* Eat white space and comments */

#define Get_Number(n) \
    { \
        if ((c < '0') || (c > '9')) goto pbm_bad; \
 \
        n = (c - '0'); \
        c = getchar(); \
        while ((c >= '0') && (c <= '9')) { \
            n *= 10; \
            n += (c - '0'); \
            c = getchar(); \
        } \
    }

    Get_Number(*xdim);  /* Get image width */

    Eat_Space;      /* Eat white space and comments */
    Get_Number(*ydim);  /* Get image height */

    p = ((unsigned char *)
         calloc(((*xdim + 2) * (*ydim + 2)),
            sizeof(unsigned char)));
    if (p == 0) goto pbm_bad;

    Eat_Space;

    for (y=0; y<*ydim; ++y) {
        for (x=0; x<*xdim; ++x) {
            Eat_Space;
            switch (c) {
            case '1':   p[x+1+((y+1)*(*xdim+2))] = 1; break;
            case '0':   /* 0 from calloc() */ break;
            default:    goto pbm_bad;
            }
            c = getchar();
        }
    }

    return(p);
}

#undef  Eat_Space
#undef  Get_Number

write_P1(register int xdim,
register int ydim,
register unsigned char *p)
{
    register int x, y, pos = 0;

    printf("P1\n"
           "# CREATOR: P1IO\n"
           "%d %d\n",
           xdim,
           ydim);

    for (y=0; y<ydim; ++y) {
        for (x=0; x<xdim; ++x) {
            int c = "01"[ p[x+1+((y+1)*(xdim+2))] != 0 ];
            putchar(c);

            /* Keep lines even matrices */
            if ( (++pos)%xdim == 0) {
                putchar('\n');
            }
        }
    }
    putchar('\n');
}

int main(int argc, char **argv)
{
    if(MPI_Init(&argc, &argv) != MPI_SUCCESS){
        exit(1);
    }

    int xdim, ydim;
    int iproc, nproc;
    register unsigned char *p, *q, *masterP;
    register int x, y, i, j, t, divisions, timesteps;

    divisions = 4;

    MPI_Comm_size(MPI_COMM_WORLD, &nproc); //nproc = number of PE
    MPI_Comm_rank(MPI_COMM_WORLD, &iproc); //iproc = position out of nproc

    if (argc != 2) {
        fprintf(stderr, "Usage: %s timesteps\n", argv[0]);
        exit(2);
    }
    timesteps = atoi(argv[1]);

    /* Carve p into 4x4 and send to 15 processing elements. PE0 will
    handle one chunk on its own */
    //if(iproc == 0){
        int masterx, mastery;
        /* Read the initial state image */
        masterP = read_P1(&masterx, &mastery);
        xdim = (masterx/divisions);
        ydim = (mastery/divisions);

        /* Make a temporary array to send each chunk of the image */
        p = ((unsigned char *)calloc((((xdim)+2) * ((ydim)+2)), 
            sizeof(unsigned char)));
        if (p == 0) {
        fprintf(stderr, "Calloc failed\n");
        exit(3);
        }

        printf("Check master P\n");
        write_P1(masterx, mastery, masterP);

        int loopx , loopy;
        int cnt = 0;
        for(loopy = 0; loopy < divisions; ++loopy){
            for(loopx = 0; loopx < divisions; ++loopx){
                x=1;
                //Fill p
                for (j=(loopy*ydim)+1; j<((loopy+1)*ydim+2); ++j){
                    for( i=(loopx*xdim)+1; i<((loopx+1)*xdim+2); ++i){
                        //printf("j: %d i: %d\n",j,i);
                        p[x]=masterP[i+(loopy*j)+1];
                        printf("%d",p[x]);
                        x++;
                    }
                }
                //Print P contents
                printf("\nIteration Y:%d X:%d\n",loopy, loopx);
                write_P1(xdim, ydim, p);

            }
        }

        //MPI_Send(p, sizeof(temp), MPI_UNSIGNED_CHAR, pe_num, 0, MPI_COMM_WORLD);
        //++pe_num;

    //}/* End IProc 0's business */

    /* Make a target image (with blank fake zone) */
    q = ((unsigned char *)
         calloc(((xdim + 2) * (ydim + 2)),
            sizeof(unsigned char)));
    if (q == 0) {
        fprintf(stderr, "Calloc failed\n");
        exit(3);
    }

    /* Iterate over the timesteps */
    for (t=0; t<timesteps; ++t) {
#ifdef  VERBOSE
        fprintf(stderr, "Timestep %d...\n", t);
#endif

        for (y=0; y<ydim; ++y) {
            for (x=0; x<xdim; ++x) {

#define FAKE(P, X, Y) P[((X)+1)+(((Y)+1)*(xdim+2))]

                register int live = FAKE(p, x-1, y-1) +
                            FAKE(p, x, y-1) +
                            FAKE(p, x+1, y-1) +
                            FAKE(p, x-1, y) +
                            FAKE(p, x+1, y) +
                            FAKE(p, x-1, y+1) +
                            FAKE(p, x, y+1) +
                            FAKE(p, x+1, y+1);

                /* Apply Conway's rules...
                   (yes, I know this is clever code!)
                */
                FAKE(q, x, y) = ((live == 3) ||
                         ((live == 2) &&
                          FAKE(p, x, y)));
            }
        }

        /* Swap our notion of p and q...
           this saves us copying every timestep
        */
        {
            register unsigned char *pt = p;
            p = q;
            q = pt;
        }
    } /* End iterate timestep for block */

    /* Done; write-out results */
    write_P1(masterx, mastery, q);
    exit(0);
} 
```

以下应将大数组`masterP`分解为 4x4“块”：

```
int loopx , loopy;
int cnt = 0;
for(loopy = 0; loopy < divisions; ++loopy){
    for(loopx = 0; loopx < divisions; ++loopx){
        x=1;
        //Fill p
        for (j=(loopy*ydim)+1; j<((loopy+1)*ydim+2); ++j){
            for( i=(loopx*xdim)+1; i<((loopx+1)*xdim+2); ++i){
                //printf("j: %d i: %d\n",j,i);
                p[x]=masterP[i+(loopy*j)+1];
                printf("%d",p[x]);
                x++;
            }
        }
        //Print P contents
        printf("\nIteration Y:%d X:%d\n",loopy, loopx);
        write_P1(xdim, ydim, p);

    }
} 
```

但是，我得到的数组都是0。说起来不妥当吗

```
 p[x]=masterP[i+(loopy*j)+1]; 
```

Array`p`是一个创建为 4x4 “块”的数组`masterP`。

样本输出：

```
P1  
# CREATOR: GIMP PNM Filter Version 1.1
32 32
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000001000000000000
00000000000001100000000000000000
00001100000000100011100000000000
00001100000000000000000000000000
00000011000000000000000000000000
00000011000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000011100000
01000101001000000000000000000000
01000101010000011100000000000000
01000101100000111000000000000000
01000101010000000000000000000000
01000101001000000000000000000000
00111001001000000000000001000000
00000000000000000000000001000000
00000000000000000000000001000000
00000000000000000000000000000000
00000000010000000000000000000000
00000000001000000000000000000000
00000000111000000000000000000000
00000000000000000000000110000000
00000000000000000000001001000000
00110000000000000000000110000000
01100000000000000110000000001000
001000000000000001100000000000001100
00000000000000011000000000000100
00000000000000000000000000000000
Check master P
P1
# CREATOR: P1IO
32 32
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000001000000000000
00000000000001100000000000000000
00001100000000100011100000000000
00001100000000000000000000000000
00000011000000000000000000000000
00000011000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000011100000
01000101001000000000000000000000
01000101010000011100000000000000
01000101100000111000000000000000
01000101010000000000000000000000
01000101001000000000000000000000
00111001001000000000000001000000
00000000000000000000000001000000
00000000000000000000000001000000
00000000000000000000000000000000
00000000010000000000000000000000
00000000001000000000000000000000
00000000111000000000000000000000
00000000000000000000000110000000
00000000000000000000001001000000
00110000000000000000000110000000
01100000000000000110000000001000
00100000000000000110000000001100
00000000000000011000000000001100
00000000000000011000000000000100
00000000000000000000000000000000

000000000000000000000000000000000000000000000000000000000000000000000000000000000
Iteration Y:0 X:0
P1
# CREATOR: P1IO
8 8
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000

000000000000000000000000000000000000000000000000000000000000000000000000000000000
Iteration Y:0 X:1
P1
# CREATOR: P1IO
8 8
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000

000000000000000000000000000000000000000000000000000000000000000000000000000000000
Iteration Y:0 X:2
P1
# CREATOR: P1IO
8 8
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000

000000000000000000000000000000000000000000000000000000000000000000000000000000000
Iteration Y:0 X:3
P1
# CREATOR: P1IO
8 8
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000

000000000000000000000000000000000000000000000000000000000000000000000000000000000
Iteration Y:1 X:0
P1
# CREATOR: P1IO
8 8
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000

000000000000000000000000000000000000000000000000000000000000000000000000000000000
Iteration Y:1 X:1
P1
# CREATOR: P1IO
8 8
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000

000000000000000000000000000000000000000000000000000000000000000000000000000000000
Iteration Y:1 X:2
P1
# CREATOR: P1IO
8 8
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000

000000000000000000000000000000000000000000000000000000000000000000000000000000000
Iteration Y:1 X:3
P1
# CREATOR: P1IO
8 8
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000

000000000000000000000000000000000000000000000000000000000000000000000000000000000
Iteration Y:2 X:0
P1
# CREATOR: P1IO
8 8
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000

000000000000000000000000000000000000000000000000000000000000000000000000000000000
Iteration Y:2 X:1
P1
# CREATOR: P1IO
8 8
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000

000000000000000000000000000000000000000000000000000000000000000000000000000000000
Iteration Y:2 X:2
P1
# CREATOR: P1IO
8 8
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000

000000000000000000000000000000000000000000000000000000000000000000000000000000000
Iteration Y:2 X:3
P1
# CREATOR: P1IO
8 8
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000

000000000000000000000000000000000000000000000000000000000000000000000000000000000
Iteration Y:3 X:0
P1
# CREATOR: P1IO
8 8
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000

000000000000000000000000000000000000000000000000000000000000000000000000000000000
Iteration Y:3 X:1
P1
# CREATOR: P1IO
8 8
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000

000000000000000000000000000000000000000000000000000000000000000000000000000000000
Iteration Y:3 X:2
P1
# CREATOR: P1IO
8 8
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000

000000000000000000000000000000000000000000000000000000000000000000000000000000000
Iteration Y:3 X:3
P1
# CREATOR: P1IO
8 8
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000

P1
# CREATOR: P1IO
32 32
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000100000
11011100011111100111110000000000
11110001111110011111000111111000
00000000000101111100000000000111
00000000000000000010000000110111
01111110010000000100000001111110
00000100000000100000001101110000
00000000000000000000000000000000
00000000000000000001111100011111
01111100011111000111110001111100
11110000111100011111000111110001
11000111111001111100011111100111
00011111100111110001111110011111
01111110011111000111111001111100
11111001111100011111100111110001
11100111110001111110011111000111
10011111000111111001111100011111
01111100000000000111110001111110
11110001111110000000000000000100
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T13:14:41.630

您可以使用 MPI 派生的数据类型以更优雅的方式做到这一点。看看`MPI_Type_vector`。它创建一个派生数据类型，指示 MPI 获取旧数据类型`count`的元素块，`blocklength`每个元素块由`stride`元素分隔：

```
block 1      block 2      block 3 ..... block count
   |            |            |             |
   V            V            V             V
+-----+------+-----+------+-----+-------+-----+------
|XXXXX|      |XXXXX|      |XXXXX|       |XXXXX|
+-----+------+-----+------+-----+-------+-----+------
|<- stride ->|            |     |
                        ->|-----|<-
                        blocklength 
```

现在，如果您设置`count`为 4、4`blocklength`和`stride`一行的长度，那么这正是从大数组中取出 4x4 块的数据类型。您可以在发送和接收操作中使用此数据类型，并使用一些 MPI 类型的按摩魔法（特别是使用 调整类型的大小`MPI_Type_create_resized`），您甚至可以在分散/收集操作中使用它。

例如，要在第二个 4 行上发送第二个块，假设每行有`row4cols`4 列：

```
MPI_Datatype block4type;

MPI_Type_vector(4, 4, 4*rows4cols, MPI_UNSIGNED_CHAR, &block4type);
MPI_Type_commit(&block4type);

MPI_Send(&masterP[(2-1)*(4*4*rows4cols) + (2-1)*4], 1, block4type,
         dest_rank, 0, MPI_COMM_WORLD); 
```

这将发送一条包含 16 个类型元素的消息`MPI_UNSIGNED_CHAR`。接收器可以简单地将其接收到一个 4x4 数组中：

```
unsigned char block[4][4];
MPI_Status status;

MPI_Recv(block, 4*4, MPI_UNSIGNED_CHAR,
         master_rank, 0, MPI_COMM_WORLD, &status); 
```

这也适用于另一个方向——worker 发送 16 个元素，`MPI_UNSIGNED_CHAR`master 用于`block4type`接收 4x4 块中适当位置的数据`masterP`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T02:41:55.110

你永远不会增加`x`. 看起来你打算这样做。因此，您总是将数据分配给`p[1]`. 看起来`p[x]`你真的应该分配给，而不是分配给`p[cnt]`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T02:13:02.693

感谢大家的支持！当然帮助我朝着正确的方向前进。我终于整理了一些源自我的索引的问题。

对于 32x32 图像，一维数组应该有 1024 个元素，但是我们的处理函数在 32x32 图像的 4x4 块周围设置了一个“假区域”或缓冲区。对于假区域，尺寸为 (x+2)x(y+2)，因此对于 32x32 图像，我应该期望 1d 数组中有 1156 个元素。以前我没有正确处理假区域添加的环绕和额外缓冲区空间。

我使用 4 个 for 循环遍历较大的 32x32 图像以生成 16 个 8x8 图像块。我相信使用 2d 矩阵会更容易，但是我们的处理函数设置为接受 1d 数组。与为 1d 操作导出正确的索引模式相比，将处理函数转换为接受 2d 数组会产生更多开销。下面提供了使用的 4 个 for 循环：

```
 int loopx , loopy, pe_num;
int cnt = 0;

for(loopy = 0; loopy < divisions; loopy++){
    for(loopx = 0; loopx < divisions; loopx++){
        //Fill p
        cnt=(xdim+3); //Reinitialize the first index for every new p to xdim+2
        for (j=0; j<(ydim); j++){
            for( i=0; (i<xdim); i++){
                p[cnt]=masterP[((masterx+2)+(j*(masterx+2))+(loopy*(masterx+2)*ydim)+(loopx*xdim)+i+1)];
                //printf("%d",masterP[((masterx+2)+(j*(masterx+2))+(loopy*(masterx+2)*ydim)+(loopx*xdim)+i)]);  
                if( ((cnt+1)%(xdim+2))==0) //skip over fake zone
                    cnt = cnt+3;
                else
                    cnt++;
            }
        }
        pe_num = ((loopy*divisions)+loopx);
        //Print "chunk" p contents
        printf("\nPE #%d\n",pe_num);
        write_P1(xdim, ydim, p);
        //MPI_Send(p, sizeof(p), MPI_UNSIGNED_CHAR, pe_num, 0, MPI_COMM_WORLD);
    }
} 
```

对于输入：

```
P1
# CREATOR: GIMP PNM Filter Version 1.1
32 32
01111111111110000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000001000000000000
00000000000001100000000000000000
00001100000000100011100000000000
00001100000000000000000000000000
00000011000000000000000000000000
00000011000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000011100000
01000101001000000000000000000000
01000101010000011100000000000000
01000101100000111000000000000000
01000101010000000000000000000000
01000101001000000000000000000000
00111001001000000000000001000000
00000000000000000000000001000000
00000000000000000000000001000000
00000000000000000000000000000000
00000000010000000000000000000000
00000000001000000000000000000000
00000000111000000000000000000000
00000000000000000000000110000000
00000000000000000000001001000000
00110000000000000000000110000000
01100000000000000110000000001000
00100000000000000110000000001100
00000000000000011000000000001100
00000000000000011000000000000100
00000000000000000000000000000000 
```

我成功地分成了 16 个块，形成了原始图像的 4x4 网格：

```
Check master P
P1
# CREATOR: P1IO
32 32
01111111111110000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000001000000000000
00000000000001100000000000000000
00001100000000100011100000000000
00001100000000000000000000000000
00000011000000000000000000000000
00000011000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000011100000
01000101001000000000000000000000
01000101010000011100000000000000
01000101100000111000000000000000
01000101010000000000000000000000
01000101001000000000000000000000
00111001001000000000000001000000
00000000000000000000000001000000
00000000000000000000000001000000
00000000000000000000000000000000
00000000010000000000000000000000
00000000001000000000000000000000
00000000111000000000000000000000
00000000000000000000000110000000
00000000000000000000001001000000
00110000000000000000000110000000
01100000000000000110000000001000
00100000000000000110000000001100
00000000000000011000000000001100
00000000000000011000000000000100
00000000000000000000000000000000

PE #0
P1
# CREATOR: P1IO
8 8
01111111
00000000
00000000
00000000
00000000
00001100
00001100
00000011

PE #1
P1
# CREATOR: P1IO
8 8
11111000
00000000
00000000
00000000
00000110
00000010
00000000
00000000

PE #2
P1
# CREATOR: P1IO
8 8
00000000
00000000
00000000
00010000
00000000
00111000
00000000
00000000

PE #3
P1
# CREATOR: P1IO
8 8
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000

PE #4
P1
# CREATOR: P1IO
8 8
00000011
00000000
00000000
00000000
01000101
01000101
01000101
01000101

PE #5
P1
# CREATOR: P1IO
8 8
00000000
00000000
00000000
00000000
00100000
01000001
00000011
01000000

PE #6
P1
# CREATOR: P1IO
8 8
00000000
00000000
00000000
00000000
00000000
01000000
00000000
00000000

PE #7
P1
# CREATOR: P1IO
8 8
00000000
00000000
00000000
01100000
00000000
00000000
00000000
00000000

PE #8
P1
# CREATOR: P1IO
8 8
01000101
00111001
00000000
00000000
00000000
00000000
00000000
00000000

PE #9
P1
# CREATOR: P1IO
8 8
00100000
00100000
00000000
00000000
00000000
01000000
00100000
01100000

PE #10
P1
# CREATOR: P1IO
8 8
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000

PE #11
P1
# CREATOR: P1IO
8 8
00000000
01000000
01000000
01000000
00000000
00000000
00000000
00000000

PE #12
P1
# CREATOR: P1IO
8 8
00000000
00000000
00110000
01100000
00100000
00000000
00000000
00000000

PE #13
P1
# CREATOR: P1IO
8 8
00000000
00000000
00000000
00000000
00000000
00000001
00000001
00000000

PE #14
P1
# CREATOR: P1IO
8 8
00000001
00000010
00000001
01100000
01100000
00000000
00000000
00000000

PE #15
P1
# CREATOR: P1IO
8 8
10000000
01000000
00000000
00001000
00001100
00001100
00000100
00000000 
```

再次感谢那些做出贡献的人。Hristo，我很有兴趣尝试您提出的建议，我相信这是一种更有效的方法！

# razor - 具有多个部分的剃刀视图页面设置

> ID：14805074
> 
> 赞同：1
> 
> 时间：2013-02-11T02:25:02.227
> 
> 标签：razor, view, asp.net-mvc-4

我浏览了各种教程，但我对如何执行我的想法感到非常困惑，并希望得到一些帮助来澄清我的想法。

我将有一个名为的剃须刀视图页面`Profile`；在该个人资料页面上，我有四个不同的部分：

1.  密码更改
2.  设置密码
3.  用户名
4.  传。

我正在考虑将四个部分中的每一个都创建为部分部分，每个部分都有文本框和一个保存按钮，允许用户添加或更改信息。

```
@model Projects.Models.PasswordModel
@{
    ViewBag.Title = "Profile Account";
}

<hgroup class="title">
    <h1>@ViewBag.Title.</h1>
</hgroup>

<p class="message-success">@ViewBag.StatusMessage</p>

<div id="wrap">
    <div id="right">
        @if (ViewBag.HasLocalPassword)
        {
            @Html.Partial("_ChangePasswordPartial")
        }
        else
        { 
            @Html.Partial("_SetPasswordPartial")
        }
    </div>

    <div id="left">
        @Html.Partial("_UserNamePartial")
        @Html.Partial("_BiographyPartial")
    </div>
</div> 
```

如何正确设置主视图页面并正确显示四个部分并正常运行？我让它们显示出来，但是当我尝试保存对用户名所做的更改时，我会收到一个不同模型的错误——比如传记模型。我觉得他们在不应该连接的时候被连接了。我真的在寻找一个关于如何去做的清晰的教程，希望我能在弄清楚这一点后做出一个。

这是我的部分用户名

```
@model Project.Models.UsernameModel

@using (Html.BeginForm("_UsernamePartial", "Account")) {
    @Html.AntiForgeryToken()
    @Html.ValidationSummary()

       <p>Username</p>
       @Html.TextBoxFor(m=>m.Username)

    <button class="btn btn-small" type="submit" value="Save Username">Save</button>
} 
```

**我的控制器**

得到：

```
public ActionResult _UsernamePartial()
        {
            var usernameModel = new UsernameModel();
            using (var db = new DataContext())
            {
                usernameModel.Nickname = (from u in db.Users
                                              where u.ID == WebSecurity.CurrentUserId
                                              select u.Username).FirstOrDefault();
            }
            return View(usernameModel);
        } 
```

邮政：

```
[HttpPost]
        public ActionResult _UsernamePartial(UsernameModel usernameModel, string returnUrl)
        {
            if (ModelState.IsValid)
            {
                using (var db = new DataContext())
                {
                     User user = db.Users.FirstOrDefault(m => m.ID == WebSecurity.CurrentUserId);
                     user.Username = usernameModel.Username;
                     db.SaveChanges();
                 }
                return RedirectToAction("_UsernamePartial");
            }
            return View(returnUrl);
        } 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T03:35:03.707

您需要确保您的视图输入到正确的模型。您的视图当前输入到`PasswordModel`模型中，这似乎是您页面的一部分。如果您为每个部分创建一个由模型组成的模型，它将使这更容易：

```
class ProfileModel {
    PasswordModel Password { get; set; }
    BiographyModel Biography { get; set; }
    ...
} 
```

然后，您可以将 Profile 视图设置为`ProfileModel`. 然后您可以将每个模型传递给部分：

```
@Html.Partial("_BiographyPartial",Model.Biography) 
```

一个例子 _BiographyPartial 看起来像：

```
@model Projects.Models.BiographyModel
...
<h1>@Model.SomeBiographyProperty</h2> 
```

您应该小心检查您的验证（假设您有一些验证）是否在此设置下正常工作。

或者，您可以将所有数据放入一个平面模型中，并将整个模型传递给每个局部视图。

**编辑**：部分视图不受控制器和操作的支持，它们只是使用您从调用视图传递给它们的数据呈现的视图。你现在要做的是渲染`_UsernamePartial`动作。如果你想这样做，你可以尝试使用`Action`而不是`Partial`：

```
<div id="left">
    @Html.Action("_UserNamePartial")
    ...
</div> 
```

并将该动作呈现为局部视图：

```
public ActionResult _UsernamePartial()
{
    var usernameModel = new UsernameModel();
    using (var db = new DataContext())
    {
        usernameModel.Nickname = (from u in db.Users
                                  where u.ID == WebSecurity.CurrentUserId
                                  select u.Username).FirstOrDefault();
    }
    return PartialView(usernameModel);
} 
```

# php - 会话并非在所有页面中都存在

> ID：14805077
> 
> 赞同：0
> 
> 时间：2013-02-11T02:25:38.763
> 
> 标签：php, session

我是会话的初学者。我正在尝试构建一个身份验证系统，如果用户可以成功登录，它会为用户提供一个会话，并且该会话用于识别当前用户的身份。因此，如果登录成功：

```
$_SESSION['id'] = $username; 
```

我还将 session_start() 放在 header.php 文件中，该文件包含在用户浏览的每个页面中。但是，在分配会话后，当我尝试检查它时，

```
isset($_SESSION['id']) 
```

每次都返回 false。为了维持会话，我有什么特别要做的吗？谢谢和抱歉，这是一个菜鸟问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T02:30:10.820

确保[`session_start()`](http://us3.php.net/manual/en/function.session-start.php)在所有页面的顶部调用。

[有关基本用法，请参阅手册](http://us3.php.net/manual/en/session.examples.basic.php)：

> 会话是根据唯一会话 ID 为单个用户存储数据的简单方法。这可用于在页面请求之间保持状态信息。会话 ID 通常通过会话 cookie 发送到浏览器，并且 ID 用于检索现有的会话数据。ID 或会话 cookie 的缺失让 PHP 知道要创建一个新会话，并生成一个新的会话 ID。
> 
> 会话遵循简单的工作流程。当会话启动时，PHP 将使用传递的 ID 检索现有会话（通常来自会话 cookie），或者如果没有传递会话，它将创建一个新会话。PHP 将在会话开始后使用任何会话数据填充 $_SESSION 超全局变量。当 PHP 关闭时，它会自动获取 $_SESSION 超全局变量的内容，将其序列化，并使用会话保存处理程序将其发送到存储中。
> 
> 默认情况下，PHP 使用由 session.save_handler 设置的内部文件保存处理程序。这会将会话数据保存在服务器上 session.save_path 配置指令指定的位置。
> 
> 可以使用 session_start() 函数手动启动会话。如果 session.auto_start 指令设置为 1，会话将在请求启动时自动启动。
> 
> 会话通常在 PHP 完成执行脚本时自动关闭，但可以使用 session_write_close() 函数手动关闭。
> 
> Example #1 使用 $_SESSION 注册一个变量。

```
<?php
session_start();
if (!isset($_SESSION['count'])) {
  $_SESSION['count'] = 0;
} else {
  $_SESSION['count']++;
}
?> 
```

# c# - 如何从 wpf Image 控件的 dll 中检索嵌入的图像？

> ID：14805080
> 
> 赞同：1
> 
> 时间：2013-02-11T02:26:03.473
> 
> 标签：c#, wpf, dll

```
 public partial class MainWindow : Window
    {
        System.Reflection.AssemblyName aName;
        System.Reflection.Assembly asm;
        public MainWindow()
        {
            InitializeComponent();

            aName = System.Reflection.AssemblyName.GetAssemblyName(
            @"C:\Users\Adam\Documents\Visual Studio 2012\Projects\WPFResources\WPFResources\bin\Release\WPFResources.dll");

            asm = System.Reflection.Assembly.Load(aName);

            string[] manifest = asm.GetManifestResourceNames();
            image1 =
        } 
```

这就是我不知道如何让它工作的地方。在 Winforms 中，我只需创建一个新位图，并在位图的构造函数中传入来自 DLL 的流及其清单位置...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T06:48:33.380

您可以使用[`BitmapImage.StreamSource`](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapimage.streamsource%28v=vs.100%29.aspx)它将允许您从 System.IO.Stream 创建图像。

看看这是否适合你

```
asm = System.Reflection.Assembly.Load(aName)
string[] manifest = asm.GetManifestResourceNames();

using (UnmanagedMemoryStream stream = (UnmanagedMemoryStream)asm.GetManifestResourceStream(manifest[0]))//The Index of the Image you want to use
{
    using (MemoryStream ms1 = new MemoryStream())
    {
        stream.CopyTo(ms1);
        BitmapImage bmi = new BitmapImage();
        bmi.BeginInit();
        bmi.StreamSource = new MemoryStream(ms1.ToArray());
        bmi.EndInit();
        image1.Source  = bmi; //The name of your Image Control
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T03:11:22.217

创建一个`ResourceManager`，在 ctor 中为他提供“基本名称”-资源文件的名称（一个程序集可以包含许多资源集），以及该程序集在哪里寻找资源。

```
ResourceManager resMan= new ResourceManager("MainWindowResources",asm);
Stream imageStream= resMan.GetStream("Image1"); 
```

# image-processing - smooth() 方法级别参数

> ID：14805084
> 
> 赞同：0
> 
> 时间：2013-02-11T02:26:23.333
> 
> 标签：image-processing, processing, smooth, java

我一直在检查我的一个项目的一些代码，并在与 Smooth() 方法相关的 PApplet 和 PGraphics 类中看到了一些有趣的东西

下面是来自 PAppplet.java 的一段代码

```
public void smooth() {
  if (recorder != null) recorder.smooth();
  g.smooth();
}

public void smooth(int level) {
  if (recorder != null) recorder.smooth(level);
  g.smooth(level);
} 
```

这里 g 和 recorder 对象都是 PGraphics.java 类的实例，在该类中，这里是平滑方法：

```
public void smooth() {
  smooth = true;
}
/**
 *
 * @param level either 2, 4, or 8
 */
public void smooth(int level) {
  smooth = true;
} 
```

基本上，设置不同级别的平滑似乎不起作用。我试图输入不同的数字，如 32 64 8 等，但结果根本没有改变。并且您可以检查[http://processing.org/reference/smooth_.html](http://processing.org/reference/smooth_.html)上的 api 页面，它说平滑级别应该可以工作，但根本不是。

谁能解释为什么上面的代码虽然是用 API 编写的，但对关卡没有任何作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T15:52:25.467

您不是在查看公共 API，该代码是用于编译处理解释器的内部代码。所以：欢迎来到现实世界，文档和代码并不总是一致的，特别是当一个项目正在为一个新的、完整的修订版本准备时。如果您想从开发人员那里得到答案，您可能想通过在新的 github 代码库上发布问题来直接询问他们：[https ://github.com/processing/processing](https://github.com/processing/processing)

（供将来参考：API 记录在[http://processing.org/reference](http://processing.org/reference)上。如果那里没有提到，即使它在源代码中，它也不是 API 的一部分。它在那里让解释器做它的由Java编译时的工作）

# javascript - 前瞻断言 JavaScript

> ID：14805085
> 
> 赞同：0
> 
> 时间：2013-02-11T02:26:31.093
> 
> 标签：javascript, regex

我正在尝试用正则表达式解决我的问题，我相信前瞻断言可能是最好的答案（或者我认为），但我不确定如何使用它们。

对于输入示例`int a = 5;`，我将`5`使用 RegEx 获取 int 标识符的值。具体来说，我正在寻找一个正则表达式来匹配标识符和等号之后但分号之前的值。

有人可以为我提供一个详细的示例，以便我可以学习如何使用前瞻断言（如果这是执行此类操作的最佳方法）？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T02:30:23.953

正则表达式`/=\s*(\d+)\s*;/`是最好的，因为它允许元素之间有任意数量的空格，并捕获数字。在返回的数组中，`[1]`将是数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T02:39:46.150

您可以将前瞻与以下代码段一起使用：

```
var input = "a = 12345;"
var inputValue = input.replace(/\w+\s*=\s*(\d+)\s*(?=;).*/, "$1"); 
```

在示例结果是 12345 使用`"a = 5;"`给出 5

# java - 使用 Switch 语句变量继续循环

> ID：14805087
> 
> 赞同：0
> 
> 时间：2013-02-11T02:27:45.593
> 
> 标签：java, date, loops, printing, switch-statement

我试图让这个程序在单独的一行上连续读出 1/1 到 12/31 的日期。到目前为止，我已经成功地打印了 1/1 到 1/31，但我不知道如何继续我的循环，以便它将包括其余的月/日。我知道使用日历有一种更简单的方法可以做到这一点，但我正在避开这条路线。

```
public class LoopDate {

public static void main(String[] args) {

    int startingDayOfWeek = 2;

    boolean isLeapYear = false;

    int month = 1;
    int year = 2000;
    int numDays = 0;
    switch (month) {
    case 1:
    case 3:
    case 5:
    case 7:
    case 8:
    case 10:
    case 12:
        numDays = 31;
        break;
    case 4:
    case 6:
    case 9:
    case 11:
        numDays = 30;
        break;
    case 2:
        if (((year % 4 == 0) && !(year % 100 == 0)) || (year % 400 == 0))
            numDays = 29;
        else
            numDays = 28;
        break;
    default:
        System.out.println("Invalid month.");
        break;
    }
    int start = 1;

    do {
        System.out.println(month + "/" + start);
        start++;
    } while (start <= numDays);

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T02:31:56.663

您需要使用 switch 语句并将其放入循环中 - 或者甚至更好地将其放入您从循环中调用的单独方法中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T02:32:40.887

添加封闭循环。

```
public class LoopDate {

public static void main(String[] args) {

    int startingDayOfWeek = 2;

    boolean isLeapYear = false;
    int year = 2000;
    int numDays = 0;
    for(int month = 1; month <= 12;month++){
        switch (month) {
        case 1:
        case 3:
        case 5:
        case 7:
        case 8:
        case 10:
        case 12:
            numDays = 31;
            break;
        case 4:
        case 6:
        case 9:
        case 11:
            numDays = 30;
            break;
        case 2:
            if (((year % 4 == 0) && !(year % 100 == 0)) || (year % 400 == 0))
                numDays = 29;
            else numDays = 28;
            break;
        default:
            System.out.println("Invalid month.");
            break;
        }
        for(int start=1;start<=numDays;start++) System.out.println(month + "/" + start);

    }
}
} 
```

# c# - 我需要网络服务的想法（上传数据）

> ID：14805095
> 
> 赞同：0
> 
> 时间：2013-02-11T02:28:39.673
> 
> 标签：c#, asp.net, web-services

我正在尝试对我的系统使用差异方法，然后我使用 ssis 从 excel 文件中提取数据（此 excel 文件由另一个系统生成，我们称之为 excel 生成器系统），然后通过存储过程将其上传到数据库，现在我们想要的是消除 excel 数据以避免解析等.. 我的问题是，我能做些什么来消除 excel 的使用我可以向 excel 生成器系统的制造商建议什么，让他们上传数据立即发送到我的网络服务。excel生成器系统输出应该是什么？列表？数据表？

excel文件包含ff列：

emp id、名字、中间名、姓氏等

我需要一些关于如何创建我的 web 服务以及 excel 生成器系统应该是什么输出的想法。因为我将使用它从这个excel数据系统获得的任何输出，然后根据它的列名选择它，然后将它保存到一个数据库中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T02:41:00.790

两种选择，

1.  使用员工数组（创建一个员工类并将其标记为可序列化），在您的 Web 服务中获取员工数组对象的参数。这种方法允许与非 MS 解决方案的互操作性。

    例如 bool SendEmployeeData(employee[] emp) // 如果上传成功返回 true。

2.  或者在您的网络服务中获取数据集的参数（默认情况下它是可序列化的），然后在代码中提取数据表和记录，您和上传者必须就数据格式达成一致。

# javascript - 如何使用 Ember.js 显示（在视图中）列表子集？

> ID：14805099
> 
> 赞同：1
> 
> 时间：2013-02-11T02:29:28.263
> 
> 标签：javascript, ember.js

我有一个对象列表，通过 Ajax 从 API 获取。这与此类似：

```
App.Card = Ember.Object.extend({
  name: "",
  color: ""
});

App.cardsController = Ember.ArrayController.create({
  content: [],

  createCard: function(data) {
    this.pushObject(App.Card.create(data));
  },

  loadCards: function() {
    // Fetch API and use createCard
  }
}); 
```

当我使用 时`{{#each App.cardsController}}`，我列出了我的控制器内的所有卡。

**但我想按颜色过滤它们。如何过滤列表（在控制器的内容中）并显示它们？**

我尝试了这种方法：

在里面添加了这段代码`App.cardsController`：

```
 filterCardsByColor: function() {
    array = this.get('content').filter(function(item, index) {
      return item.get('color') == 'red';
    });
    return array;
  }.property('content.@each') 
```

并添加`{{#each App.cardsController.filterCardsByColor}}`到我的观点。

但我的 Chrome 控制台出现以下错误：

```
Uncaught TypeError: Object [object Object] has no method 'addArrayObserver' ember.min.js:18 
```

我做错了什么？或者我应该怎么做？我应该将该逻辑移至视图吗？如何？我什至尝试包裹`array`在里面`Ember.Array.create(array)`，但它并没有解决我的问题。

*奖励：是否可以向 filterCardsByColor 发送参数，以便我可以要求`'red'`卡片或`'yellow'`卡片等？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T10:27:19.167

最好的方法是存储一个数组，该数组将保存要过滤掉的颜色*（或过滤，如果您愿意）*，并通过指定每次`length`更改计算属性时更新计算属性`.property('colours.length');`：

```
filteredContent: function() {
    // Triggered every time a colour is added/removed.
    var colours = this.get('colours');
    return this.get('content').filter(function(model) {
        // Determine whether the current model's colour is in the array of those filtered.
        return Boolean(jQuery.inArray(model.get('colour'), colours) == -1);
    });
}.property('colours.length') 
```

然后，我们只需要一种方法让我们的视图能够传递颜色以添加到该数组中。我们可以使用一个不同的函数来完成此操作，该函数`applyFilters`将接受一个参数——我们希望排除的颜色。`{{action}}`您可以像这样传递这种颜色`<a {{action "applyFilter" "red"}}>`：

```
applyFilter: function(colour) {
    var colours = this.get('colours');
    if (!colour) {
        // Clear all of the colours if we're clearing the filters.
        colours.clear();
        return;
    }

    // Otherwise we can push the new colour into the array, which will trigger
    // an update of the filteredContent computed property.
    colours.pushObject(colour);
} 
```

完全工作的 JSFiddle 供您使用：http: [//jsfiddle.net/9XmqL/](http://jsfiddle.net/9XmqL/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-03T14:58:05.090

不幸的是，我不认为 WildHoney 是最好的答案。

将以下内容添加到他们的 CSS 中：

```
@-webkit-keyframes onUpdate { 
    from { background: yellow; }
}
@keyframes onUpdate { 
    from { background: yellow; }
}
* { 
    -webkit-animation: onUpdate 1s; 
    animation: onUpdate 1s;
} 
```

我可以看到，当内容更新时，整个列表都会重新绘制。对于非常长的列表，这可能会严重影响性能。

为避免这种情况，您应该只生成一次提供filteredContent 的数组 - 当指向内容的指针更改时 - 并根据对子集的更改以有针对性的方式更新它。

见[http://jsfiddle.net/wRzRn/2/](http://jsfiddle.net/wRzRn/2/)

# objective-c - CFBridgingRetain 的静态分析仪泄漏警告

> ID：14805100
> 
> 赞同：2
> 
> 时间：2013-02-11T02:29:48.760
> 
> 标签：objective-c, ios6, core-foundation

有人可以告诉我为什么会泄漏吗？我正在使用 CFRelease()，我认为它会发布 CFURLRef soundFileURLRef

**调用函数“CFBridgingRetain”返回一个具有 +1 保留计数的核心基础对象
对象泄漏：在此执行路径中稍后未引用分配的对象，并且保留计数为 +1**

```
 -(void) playGuitarNote:(NSString *)noteVal {

    AudioServicesDisposeSystemSoundID(soundId);
    CFBundleRef mainBundle = CFBundleGetMainBundle();
    CFURLRef soundFileURLRef = CFBundleCopyResourceURL(mainBundle,CFBridgingRetain(noteVal), CFSTR("aiff"), NULL);
    AudioServicesCreateSystemSoundID(soundFileURLRef, &soundId);
    AudioServicesPlaySystemSound(soundId);
    CFRelease(soundFileURLRef);
    noteVal = nil;

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T02:42:29.553

你不应该在`CFBridgingRetain()`那里打电话。您应该只使用`__bridge`演员表：

```
CFURLRef soundFileURLRef = CFBundleCopyResourceURL(mainBundle,(__bridge CFStringRef)noteVal, CFSTR("aiff"), NULL); 
```

您没有更改 的所有权`noteVal`，您只是传递它并告诉编译器将其视为不同（但兼容）的类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T02:40:29.353

您必须调用`CFBridingRelease()` 以减少保留计数。所以存储一个指向返回的对象的指针，`CFBridgingRetain()`当你不再需要它时释放它。

请参阅[有关基础功能的文档](https://developer.apple.com/library/mac/documentation/cocoa/reference/foundation/miscellaneous/foundation_functions/reference/reference.html#//apple_ref/c/func/CFBridgingRetain)

或者，您可以使用桥接而不是调用`CFBridgingRetain()`

# javascript - OrientDB 安全 - Javascript

> ID：14805104
> 
> 赞同：3
> 
> 时间：2013-02-11T02:30:22.147
> 
> 标签：javascript, json, rest, orientdb

我们使用 OrientDB 服务器作为我们移动应用程序的数据库。

由于我们使用 Javascript 和 REST Api 在 OrientDB 和我们的应用程序之间进行通信，我们的用户名和密码并不安全，因为任何用户都可以查看源代码并查看我们所有的帐户凭据来访问 orientDB。

我们将如何处理这种情况？我们可以保护我们的服务器对匿名用户？

谢谢！

非常感谢任何回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T08:14:19.357

您应该使用一些后端技术/框架来抽象对 OrientDB 的直接访问，以便用户无法直接操作您的数据库。例如，如果您喜欢使用 JavaScript，可以尝试查看[node.js。](http://nodejs.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-13T11:23:55.630

我建议不要让前端直接与数据库通信，因为这会增加安全性和防止注入的难度。

使用一些后端代码会更适合与数据库通信。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T10:02:12.590

您可以要求客户输入用户名/密码，然后让“访客”用户查看公共页面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-10T13:56:10.627

您可以为阅读器ORole设置默认的用户名和密码，这将只允许读取数据库，他们在注册和登录之前不能写入任何内容。在他们注册并登录后，将使用他们自己的密码而不是默认密码。此时您只需将数据库设置为 ORestricted。

ORoles 应该允许您以这样的方式设置用户，即使他们看到各种数据库条目，他们也只能删除自己的条目，而不是其他作者。每次收到命令时，数据库都会检查是否允许用户进行更改。查看[记录级别安全性](http://orientdb.com/docs/2.0/orientdb.wiki/Security.html#record_level_security)以获得更详细的说明。

# java - 快速排序代码示例。需要一点说明

> ID：14805107
> 
> 赞同：0
> 
> 时间：2013-02-11T02:30:53.197
> 
> 标签：java, algorithm, sorting, quicksort

我是编程和java的新手，我试图理解一个实现“quickSort”算法对数组进行排序的代码。
现在..我了解了快速排序的基本思想，所以问题主要是关于代码本身。
在下面的代码（partition() 方法）中，我们有一个主循环（while(i<=j)）和两个循环，而不是另一个决策。我不明白的是，在主循环的每次迭代中没有执行循环下方交换的决定的原因是什么。简而言之，在最后一个while循环之后（while（arr [j]>pivot）j--;）为什么下面的条件没有被执行？他们做 j++ 并且代码应该在循环之外移动，不是吗？正如我从这个例子中了解到的......它没有！

这是我正在谈论的代码：

```
public  class QuickSort {

    public static int list[] = {1,56,7,34,1,1,4,25,100,85,250};

    public static int partition(int arr[],int left,int right){

        int i = left;
        int j = right;
        int tmp;
        int pivot = arr[(left + right) / 2];

        while(i<=j){
             while(arr[i]<pivot){
                 i++;
             }
             while(arr[j]>pivot){
                 j--;
             }
             if(i<=j){
                 tmp = arr[i];
                 arr[i] = arr[j];
                 arr[j] = tmp;
                 i++;
                 j--;
             }
        }
        return i;
    }

    public static void quickSort(int arr[],int left,int right){
        int index = partition(arr,left,right);
        if(left<index-1){
            quickSort(arr,left,index-1);
        }
        if(index<right){
            quickSort(arr,index,right);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T03:30:01.883

如果我正确理解您的问题，那么您只是在谈论分区循环的最后一次迭代。

如果是这种情况，那么不执行交换块的原因仅仅是因为 if 条件不再成立，因为 i 已经停止了 j 右侧的一个位置。

# c# - 何时在 WPF 中使用 Rx 处理鼠标事件

> ID：14805109
> 
> 赞同：2
> 
> 时间：2013-02-11T02:31:10.813
> 
> 标签：c#, wpf, system.reactive

给定以下代码：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();

        var mouseMove = Observable
            .FromEventPattern<MouseEventHandler, MouseEventArgs>(
            eventHandler => this.MouseMove += eventHandler,
            eventHandler => this.MouseMove -= eventHandler);

        var mouseMoveSubscription = mouseMove.Subscribe(args =>
        {
            //Do Something
        });
    }
} 
```

鉴于我希望订阅遵循 MainWindow 的生命周期，从 mouseMoveSubscription 中处理\取消订阅的正确\最佳位置在哪里。我主要担心的是我不会导致持续超过 Windows 生命周期的内存泄漏。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T09:55:43.960

要使用 Rx 以更可组合的方式执行此操作，请考虑从上面提到的“CloseEvent”创建一个 Observable 流。

例如 var closingObservable = Observable.FromEventPattern(this.Closing... etc) 然后，修改您的查询以使用 TakeUntil： mouseMove.TakeUntil(closingObservable).Subscribe(args =>

然后，您不必担心自己的显式处置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T03:00:25.860

我认为从窗口生命周期的角度来看，最好的地方是**[`Closing`](http://msdn.microsoft.com/en-us/library/system.windows.window.closing.aspx)**事件。

这是窗口关闭过程的开始（如此处或**[此处所示） - 我发现最好](http://msdn.microsoft.com/en-us/library/ms748948.aspx#Window_Lifetime_Events)****[在](http://www.codeproject.com/Articles/403418/Lifetime-events-of-a-WPF-application)**知道要卸载（或在这种情况下取​​消订阅）后立即卸载所有内容。如果您出于任何原因需要尽可能长时间地订阅，请使用`Closed`even 代替。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T16:10:22.740

我通常同意@Honza，这`Closing`是执行此操作的合适位置-但我通常遵循这种模式来“托管” `IDisposables`；它在某些地方可能有点矫枉过正，但我​​发现它是一个足够轻量级的模式，它通常适用：

```
// Window, application, etc - some longish-living object
public class Something : IDisposable
{
    CompositeDisposable _disposables = new CompositeDisposable();

    public Something()
    {
         // A composite disposable acts like a "bucket" of IDisposables
         // that are all disposed when the bucket is disposed.
          _disposables.Add(SomeObservable.Subscribe(...));
          _disposables.Add(SomeOtherObservable.Subscribe(...));
          _disposables.Add(YetAnotherObservable.Subscribe(...));

         // Here, optionally wire some "Yo, I should dispose when this happens" handler
         this.Closed += (o,e) => Dispose();
    }

    public void Dispose()
    {
        Dispose(true);
        GC.SuppressFinalize(this);
    }

    protected virtual void Dispose(bool disposing)
    {
        if (disposing)
        {
            // clean up managed resources here
            if(_disposables != null)
            {
                _disposables.Dispose();
            }
        }   
        // clean up unmanaged resources here
    }

    ~Something()
    {
        Dispose(false);
    }
} 
```

# arrays - 在numpy中生成一个数组

> ID：14805112
> 
> 赞同：1
> 
> 时间：2013-02-11T02:31:15.117
> 
> 标签：arrays, matlab, numpy

在 Matlab 中我可以生成这样一个数组

```
a = [1, 3, 9:100, 201, 202]; 
```

这`9:100`会给我`9,10,...,100`，所以我不必一一输入。在 numpy 中是否有等效的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T02:39:45.963

是的。

```
In [3]: numpy.r_[1,3,9:100,201,202]
Out[3]: array([  1,   3,   9,  10, 11,  12,  13,  14,  15,  16,  17,  18,  19,
                20,  21,  22,  23,  24,  25,  26,  27,  28,  29,  30,  31,  32,
                33,  34,  35,  36,  37,  38,  39,  40,  41,  42,  43,  44,  45,
                46,  47,  48,  49,  50,  51,  52,  53,  54,  55,  56,  57,  58,
                59,  60,  61,  62,  63,  64,  65,  66,  67,  68,  69,  70,  71,
                72,  73,  74,  75,  76,  77,  78,  79,  80,  81,  82,  83,  84,
                85,  86,  87,  88,  89,  90,  91,  92,  93,  94,  95,  96,  97,
                98,  99, 201, 202]) 
```

请注意，切片在 numpy 中是右排他的，因此`9:100`包括 9，但不包括 100。`9:101`如果要包括 100，请使用。

# android - 当我的服务发出警报对话框时，为什么我的应用程序会崩溃？

> ID：14805113
> 
> 赞同：2
> 
> 时间：2013-02-11T02:31:21.360
> 
> 标签：android, android-service, android-alertdialog

您好我正在尝试在用户投入一定时间后在后台运行的服务。在那段时间之后，出现一个 alartDialog 并且用户选择的铃声响起，直到他们取消它。不幸的是，我收到一个错误，导致我的应用程序崩溃。如果您需要更多信息，请询问:)

我的服务等级

```
import java.util.Timer;
import java.util.TimerTask;

import org.holoeverywhere.app.AlertDialog;
import org.holoeverywhere.preference.PreferenceManager;
import org.holoeverywhere.preference.SharedPreferences;

import android.app.Service;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.media.Ringtone;
import android.media.RingtoneManager;
import android.net.Uri;
import android.os.IBinder;
import android.os.Vibrator;
import android.util.Log;

public class CountDownService extends Service {

@Override
public void onCreate() {

    super.onCreate();
}

int hour = 990;
int min = 990;
int sec = 990;
Context c;
AlertDialog alertDialog;
SharedPreferences getPrefs;
Vibrator v;
Ringtone r;
@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    String input = intent.getStringExtra("timeLeft");
    String[] strArray = input.split(",");
    c = this.getApplicationContext();
    getPrefs = PreferenceManager.getDefaultSharedPreferences(c);
    v = (Vibrator) c.getSystemService(Context.VIBRATOR_SERVICE);
    build();
    for (String t : strArray) {

        if (hour == 990) {
            hour = Integer.parseInt(t);
        } else {
            if (min == 990) {
                min = Integer.parseInt(t);
            }else{
                if (sec == 990) {
                    sec = Integer.parseInt(t);
                }
            }
        }

    }

    Timer timer = new Timer();
    TimerTask tt = new TimerTask() {
        @Override
        public void run() {
            sec--;
            updateTime();
        }

    };
    timer.schedule(tt, 0, 1000);

    return START_STICKY;
}

private void build() {
    AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(c);

    // set title
    alertDialogBuilder.setTitle("Time's up!!!");

    // set dialog message
    alertDialogBuilder.setMessage("Press OK to stop alarm")
            .setCancelable(true)
            .setNeutralButton("OK", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {

                    if (r != null) {

                        if (r.isPlaying()) {
                            r.stop();
                        }
                    }

                    alertDialog.cancel();

                    alertDialog.cancel();
                }
            });
    alertDialog = alertDialogBuilder.create();

}

@Override
public IBinder onBind(Intent arg0) {

    return null;
}
private void updateTime() {
    if (hour  <= 0 && min  <= 0 && sec  <= 0) {
        done();

    }
    if (sec  < 0) {
        min --;
        sec  = 59;
    }
    if (min  < 0) {
        hour --;
        min  = 59;
    }

}

private void done() {
    Uri uri;

        boolean notmuted = getPrefs.getBoolean("Muted", true);
        boolean viberate = getPrefs.getBoolean("Viberate", true);
        String strRingtonePreference = getPrefs.getString("app_ringtone",
                null);
        Log.v("Alarm", "a " + strRingtonePreference);

        if (viberate) {
            v.vibrate(1000);
        }
        if (notmuted) {
            if (strRingtonePreference != null) {
                uri = Uri.parse(strRingtonePreference);
                Log.v("Alarm", "was parsed");
            } else {
                Log.v("Alarm", "was not parsed");
                uri = null;
            }
            playSound(this.getApplicationContext(), uri);
        }

}

private void playSound(Context context, Uri alert) {

    r = RingtoneManager.getRingtone(context, alert);

    if (r != null) {
        r.play();
        Log.v("Alarm", "was not null");
    } 

    alertDialog.show();

}
} 
```

我的日志

```
02-10 19:13:07.875: E/AndroidRuntime(23231): FATAL EXCEPTION: Timer-0
02-10 19:13:07.875: E/AndroidRuntime(23231): java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
02-10 19:13:07.875: E/AndroidRuntime(23231):    at android.os.Handler.<init>(Handler.java:121)
02-10 19:13:07.875: E/AndroidRuntime(23231):    at android.view.ViewRootImpl.<init>(ViewRootImpl.java:371)
02-10 19:13:07.875: E/AndroidRuntime(23231):    at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:267)
02-10 19:13:07.875: E/AndroidRuntime(23231):    at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:215)
02-10 19:13:07.875: E/AndroidRuntime(23231):    at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:140)
02-10 19:13:07.875: E/AndroidRuntime(23231):    at android.app.Dialog.show(Dialog.java:278)
02-10 19:13:07.875: E/AndroidRuntime(23231):    at com.chair49.holotimer.CountDownService.playSound(CountDownService.java:169)
02-10 19:13:07.875: E/AndroidRuntime(23231):    at com.chair49.holotimer.CountDownService.done(CountDownService.java:147)
02-10 19:13:07.875: E/AndroidRuntime(23231):    at com.chair49.holotimer.CountDownService.updateTime(CountDownService.java:113)
02-10 19:13:07.875: E/AndroidRuntime(23231):    at com.chair49.holotimer.CountDownService.access$0(CountDownService.java:111)
02-10 19:13:07.875: E/AndroidRuntime(23231):    at com.chair49.holotimer.CountDownService$1.run(CountDownService.java:67)
02-10 19:13:07.875: E/AndroidRuntime(23231):    at java.util.Timer$TimerImpl.run(Timer.java:284) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T02:38:57.320

你不能从后台线程调用 UI 的东西。您可以使用[runOnUiThread()](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29 "runOnUiThread")。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T21:48:36.880

我终于明白了。我必须做的是开始一个新活动并从那里创建警报对话框和声音，然后结束活动。

# windows-xp - 将文件从云存储暂存到 Windows 机器的最佳方式

> ID：14805114
> 
> 赞同：0
> 
> 时间：2013-02-11T02:31:43.603
> 
> 标签：windows-xp, quickbooks

我想在云中存储 Quickbooks 的数据文件。我知道数据文件更像是文件中的数据库，所以我知道我不想简单地将数据文件本身放在云目录中。

当我说“云”时，我指的是 Google Drive 或 box.com 之类的东西。

我看到的工作是我想编写一个脚本（bat 文件，或者他们有一些针对 Windows XP 的新的和改进的东西，比如一些 .net 废话什么的？）

该脚本将：

1）从云存储下载数据文件的最新副本，并放在本地机器上的一个目录中

2) 使用该数据文件启动 Quickbooks

3) 当用户退出 Quickbooks 时，将数据文件备份到云存储中。

4) 欢喜。

所以，我的问题......有没有什么已经做到了？是否有一个易于编写脚本的界面来使用云存储选项？在我的理想世界中，我可以说 'scp google-drive://blah/blah.dat localdir' 并让它将文件复制下来，并在运行 QB 后执行相反的操作。我猜我不会得到那个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T14:05:09.337

Intuit 已经提供了一个产品来做到这一点。它被称为 Intuit Data Protect，它为您将 Quickbooks 公司文件备份到云中。

[http://appcenter.intuit.com/intuitdataprotect](http://appcenter.intuit.com/intuitdataprotect)

问候，
杰瑞德

# python - Python 查找设备磁盘

> ID：14805117
> 
> 赞同：-1
> 
> 时间：2013-02-11T02:32:43.530
> 
> 标签：python, volume

嗨，我试图从卷名中查找设备磁盘，例如。

我输入为“共享”作为卷名

返回是什么磁盘

我目前有以下卸载闪存卡。我需要它是什么磁盘，以便我可以将图像添加到它。

```
 #!/bin/py

import os
import subprocess

# enter flash card name
cardName = raw_input('Enter your name of Card: ')

# unmount flash card
subprocess.call(['sudo' ,'umount', '/Volumes/' + cardName]) 
```

目前在 OSX 上尝试这个，但理想情况下希望它是通用的，或者至少能够在 Rasbian 上运行，但这是一个很好的功能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T02:42:51.223

您可以像这样按卷名查找设备磁盘。

```
DISK_BY_LABEL = '/dev/disk/by-label/'
filename = DISK_BY_LABEL + VolumeName
devfile = DISK_BY_LABEL + os.readlink(filename) 
```

注意： /dev/disk/by-label 目录由 udev 守护进程创建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T03:20:05.430

不，您无法可靠地将卷标（根本不需要存在）转换为操作系统设备名称，更不用说以跨平台的方式。

# java - 成功创建文件夹后为什么会收到 FolderNotFoundException？

> ID：14805119
> 
> 赞同：0
> 
> 时间：2013-02-11T02:33:03.247
> 
> 标签：java, imap, jakarta-mail

如果文件夹不存在，我正在尝试创建一个文件夹，然后将消息从另一个文件夹复制到目标文件夹。我发现一些我无法理解的奇怪行为。鉴于以下摘录：

```
// messages is an array of Message instances.
// Source is the source folder
// destination is a string of the destination folder.
Folder dest = null;
try {
    dest = store.getFolder(destination);
    if (!dest.exists()) {
        dest.create(Folder.HOLDS_MESSAGES | Folder.HOLDS_FOLDERS);
        // Since folder's are not meant to cache I thought I'd get it again
        // though this does not work either.
        //dest.close(false);
        //dest = store.getFolder(destination);
    }
    dest.open(Folder.READ_WRITE);
    // Fails here
    source.copyMessages(messages, dest);
    source.setFlags(messages, new Flags(Flags.Flag.DELETED), true);
} catch (MessagingException ex) {
    throw new MailProcessorException(ex.getMessage(), ex);
} finally {
    if (dest != null) {
        try {
            dest.close(false);
        } catch (MessagingException ex) {
            System.err.println("Couldn't close destination folder.");
        }
    }
} 
```

检查以下行为：

*   如果文件夹不存在：
    1.  文件夹被创建
    2.  在 处引发异常`source.copyMessages`。
*   如果文件夹确实存在：
    1.  消息按预期复制。
    2.  消息被标记为删除。

我正在使用 JavaMail 1.4.6，也尝试使用 1.6.5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T03:08:49.727

这**真的很**奇怪。查看您的代码并阅读文档，应该不可能发生这种情况......

会不会是邮件服务器有问题？一些数据库使用的一致性模型（例如，参见[http://en.wikipedia.org/wiki/Eventual_consistency](http://en.wikipedia.org/wiki/Eventual_consistency)）并不总是按照您天真期望的方式运行。您是否有机会在不同的邮件服务器上尝试您的代码？`Thread.sleep(...)`或者，试着在你的电话之前放一个很长的时间（30 秒？）`copyMessages(...)`，看看是否能解决问题。

如果是这样，则发生的情况是您的服务器在一个请求中创建了该文件夹，但是这种创建需要一段时间才能到达处理消息复制的服务器代码部分。然后，不幸的是，如果复制失败或人为延迟（这很糟糕），我不确定除了重试之外你还能做些什么。

*旁白：文档似乎说，`dest.open(Folder.READ_WRITE);`如果你愿意*，你可以跳过.

# camera - 如何修改 DirectX 摄像头

> ID：14805120
> 
> 赞同：2
> 
> 时间：2013-02-11T02:33:13.760
> 
> 标签：camera, directx, direct3d

假设我有一个 3D（但不是立体的）DirectX 游戏或程序。有没有办法让第二个程序（或驱动程序）改变游戏中的相机位置？

我正在尝试构建一个可用于我的 DirectX 游戏/程序的头部跟踪插件或驱动程序。惯性运动传感器会给我头部的位置，但我的问题是使用该位置数据来改变相机位置，而不是头部跟踪的硬件/数学问题。

到目前为止，我还没有找到任何关于如何做到这一点的信息，但是 iZ3D 能够在原始相机附近创建两个相机并将其用于立体效果，所以我知道 DirectX 中存在一些挂钩/链接/连接使通过第二个程序操作相机成为可能。

如果我能够让它工作，我会发布代码。

-谢恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:03:25.127

挂钩 Direct3D 调用本质上就是挂钩 DLL 调用。即它对 D3D 来说不是什么特别的东西，而只是一种通用技术。尝试在谷歌上搜索“hook dll”或从这里开始：[[C++] Direct3D hooking sample](http://www.gamedev.net/topic/359794-c-direct3d-hooking-sample/)。由于它总是发生在钩子上，因此有很多警告，你必须制作一个非常大的样板来满足钩子应用程序的所有需求。

但是，在游戏中使用相机进行操作通常不会产生好的结果。现代 PC 游戏至少有两个关键特性会严重限制你的想法：

1.  预剪裁。几乎所有游戏引擎都会过滤掉观察平面后面的对象。因此，当您将相机旋转到一侧时，您将看不到您希望在现实世界中看到的对象——它们只是没有发送到 D3D，因为游戏不知道观察平面已经改变。
2.  多遍渲染。许多流行的后期处理效果都是在额外的通道中完成的（通过整个场景或只是其中的一部分）。镜子和“屏幕”是最广为人知的此类效果。在不知道您正在使用什么相机的情况下，您很可能会破坏场景。

顺便说一句，#2 是立体模式不是 100% 兼容所有游戏的原因。例如，在 Source 引擎中，HDR 场景分三遍渲染，如果您不知道如何区分它们，您只会破坏游戏。看看 nVidia 是如何实现他们的立体模式的：他们为每个流行的游戏制作了一个单独的钩子，即使使用这种方法，也并不总是可以获得预期的结果。

# sql-server-2012 - SQL Server 2012 - SQL Server 数据工具

> ID：14805121
> 
> 赞同：0
> 
> 时间：2013-02-11T02:33:23.897
> 
> 标签：sql-server-2012, sql-server-2012-datatools

我已经安装了 VS2012 Ultimate。在已安装的产品中，它指出我有 SQL Server Data Tools 11.1。当我转到 SQL Server 2012 并单击 SQL Server Data Tools 菜单选项时，VS2010 启动。

我将目标更改为指向`C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\devenv.exe`而不是`C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\devenv.exe`

所以现在 VS2012 启动了，但是在新项目下我没有选择创建新的 SSIS 包。也没有从网上下载数据工具的选项。

我确实通过了 VS2010 并下载了 2010 的 DataTools 并选择了 2012 的下载。VS2010 现在有商业智能，但 VS2012 仍然没有这个模板。

请帮忙。慢慢的发疯。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T17:44:13.167

用于商业智能（SSAS、SSIS、SSRS）的 SQL Server 数据工具部分已于 2013 年 3 月作为 Visual Studio 2012 的附加组件发布。

可以在[这里下载](http://blogs.msdn.com/b/analysisservices/archive/2013/03/06/sql-server-data-tools-business-intelligence-for-visual-studio-2012-released-online.aspx)

如果您在 64 位系统上运行并且有任何错误消息，请在安装期间使用选项 1（全新安装）。它只会添加 BI Studio 而不会尝试重新安装其他任何东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T12:59:47.593

令人惊讶的是，微软有两种不同的产品，称为 SQL 服务器数据工具，一种来自安装媒体，它为您提供 VS2010 中的 BI 模板，另一种可以下载，它只是将数据库项目类型添加到 VS2010/12。目前没有可用于 VS2012 的 BI 模板，这非常令人沮丧，这是由于安装程序上的工具使用的 Visual Studio Shell 版本仅支持 2010。我想我们只需要等待更新即可:(

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-23T14:18:53.910

截至 2019 年 1 月的新下载和更多兼容语言。

[Visual Studio 2012 中的 SQL Server 数据工具](https://msdn.microsoft.com/en-us/jj650015?f=255&MSPPError=-2147217396)

支持的操作系统：

*   Windows 10（x86 和 x64）
*   Windows 8、8.1（x86 和 x64）
*   Windows 7 SP1（x86 和 x64）
*   Windows Server 2012 (x64)、R2 (x64)
*   Windows Server 2008 R2 SP1 (x64)

# java - 如何在 Java 中设置文本字段的高度和宽度？

> ID：14805124
> 
> 赞同：12
> 
> 时间：2013-02-11T02:33:44.447
> 
> 标签：java, swing, jtextfield, jcreator

我试图让我的 JTextField 填充宽度并为其设置高度，但仍然失败。我尝试添加代码`setPreferredSize(new Dimension(320,200));`但仍然失败。有什么办法可以让我的 JTextField 填充宽度并将高度设置为 200 或其他什么？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-11T02:40:54.563

你不应该玩高度。让文本字段根据使用的字体确定高度。

如果要控制文本字段的宽度，则可以使用

```
textField.setColumns(...); 
```

让文本字段确定首选宽度。

或者，如果您希望宽度是父面板的整个宽度，那么您需要使用适当的布局。可能是 BorderLayout 的 NORTH。

有关更多信息，请参阅[布局管理器上的 Swing 教程。](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-11T05:04:04.220

> 将高度设置为 200

将 设置`Font`为较大的变体（150+ px）。如前所述，使用列控制宽度，并使用尊重首选宽度和高度的布局管理器（或约束）。

![大文本字段](../Images/dab66ad18e4c0a7e62741754a9a7a5e4.png)

```
import java.awt.*;
import javax.swing.*;
import javax.swing.border.EmptyBorder;

public class BigTextField {

    public static void main(String[] args) {
        Runnable r = new Runnable() {

            @Override
            public void run() {
                // the GUI as seen by the user (without frame)
                JPanel gui = new JPanel(new FlowLayout(5));
                gui.setBorder(new EmptyBorder(2, 3, 2, 3));

                // Create big text fields & add them to the GUI
                String s = "Hello!";
                JTextField tf1 = new JTextField(s, 1);
                Font bigFont = tf1.getFont().deriveFont(Font.PLAIN, 150f);
                tf1.setFont(bigFont);
                gui.add(tf1);

                JTextField tf2 = new JTextField(s, 2);
                tf2.setFont(bigFont);
                gui.add(tf2);

                JTextField tf3 = new JTextField(s, 3);
                tf3.setFont(bigFont);
                gui.add(tf3);

                gui.setBackground(Color.WHITE);

                JFrame f = new JFrame("Big Text Fields");
                f.add(gui);
                // Ensures JVM closes after frame(s) closed and
                // all non-daemon threads are finished
                f.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
                // See http://stackoverflow.com/a/7143398/418556 for demo.
                f.setLocationByPlatform(true);

                // ensures the frame is the minimum size it needs to be
                // in order display the components within it
                f.pack();
                // should be done last, to avoid flickering, moving,
                // resizing artifacts.
                f.setVisible(true);
            }
        };
        // Swing GUIs should be created and updated on the EDT
        // http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html
        SwingUtilities.invokeLater(r);
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-15T16:32:29.363

有一种方法可能并不完美，但可以满足您的要求。这里的要点是使用特殊尺寸来限制高度。但同时，宽度实际上是免费的，因为最大宽度足够大。

```
package test;
import java.awt.*;
import javax.swing.*;

public final class TestFrame extends Frame{
    public TestFrame(){
        JPanel p = new JPanel();
        p.setLayout(new BoxLayout(p, BoxLayout.X_AXIS));
        p.setPreferredSize(new Dimension(500, 200));
        p.setMaximumSize(new Dimension(10000, 200));
        p.add(new JLabel("TEST: "));

        JPanel p1 = new JPanel();
        p1.setLayout(new BoxLayout(p1, BoxLayout.X_AXIS));
        p1.setMaximumSize(new Dimension(10000, 200));
        p1.add(new JTextField(50));

        p.add(p1);

        this.setLayout(new BorderLayout());
        this.add(p, BorderLayout.CENTER);
    }
    //TODO: GUI CREATE
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-11T06:08:01.920

```
 f.setLayout(null); 
```

添加以上行（**f**是 您添加 **JTestField的****JFrame** 或**Container**）

 **但是尝试在 java 中学习“LayoutManager”；请参阅教程链接的其他答案。或者试试这个[http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-11T02:40:28.073

您将什么类型的 LayoutManager 用于要添加 JTextField 的面板？

不同的布局管理器以不同的方式处理它们上的元素大小，一些尊重 SetPreferredSize()，而另一些则会缩放组件以适应其容器。

请参阅：[http ://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)

附言。这与eclipse无关，它的java。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-28T18:51:55.527

```
package myguo;
import javax.swing.*;

public class MyGuo {

    JFrame f;
    JButton bt1 , bt2 ;
    JTextField t1,t2;
    JLabel l1,l2;

    MyGuo(){

        f=new JFrame("LOG IN FORM");
        f.setLocation(500,300);
        f.setSize(600,500);
        f.setLayout(null);
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        l1=new JLabel("NAME");
        l1.setBounds(50,70,80,30);

        l2=new JLabel("PASSWORD");
        l2.setBounds(50,100,80,30);

        t1=new JTextField();
        t1.setBounds(140, 70, 200,30);

         t2=new JTextField();
        t2.setBounds(140, 110, 200,30);

        bt1 =new JButton("LOG IN");
        bt1.setBounds(150,150,80,30);

        bt2 =new JButton("CLEAR");
        bt2.setBounds(235,150,80,30);

         f.add(l1);
        f.add(l2);
         f.add(t1);
         f.add(t2);
         f.add(bt1);
         f.add(bt2);

    f.setVisible(true);

    }
    public static void main(String[] args) {
        MyGuo myGuo = new MyGuo();
}
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-05-01T07:01:03.773

xyz.setColumns() 方法是控制TextField 的宽度。

```
import java.awt.*;
import javax.swing.*;

class miniproj extends JFrame {

  public static void main(String[] args)
  {
    JFrame frame=new JFrame();
    JPanel panel=new JPanel();
    frame.setSize(400,400);
    frame.setTitle("Registration");

    JLabel lablename=new JLabel("Enter your name");
    TextField tname=new TextField(30);
    tname.setColumns(45);

    JLabel lableemail=new JLabel("Enter your Email");
    TextField email=new TextField(30);
    email.setColumns(45);
    JLabel lableaddress=new JLabel("Enter your address");
    TextField address=new TextField(30);
    address.setColumns(45);
    address.setFont(Font.getFont(Font.SERIF));
    JLabel lablepass=new JLabel("Enter your password");
    TextField pass=new TextField(30);
    pass.setColumns(45);

    JButton login=new JButton();
    JButton create=new JButton();
    login.setPreferredSize(new Dimension(90,30));
    login.setText("Login");
    create.setPreferredSize(new Dimension(90,30));
    create.setText("Create");

    panel.add(lablename);
    panel.add(tname);
    panel.add(lableemail);
    panel.add(email);
    panel.add(lableaddress);
    panel.add(address);
    panel.add(lablepass);
    panel.add(pass);
    panel.add(create);
    panel.add(login);

    frame.add(panel);
    frame.setVisible(true);
  }
} 
```

[![在此处输入图像描述](../Images/42b54cb4d9ed57ffd72e207a693dc542.png)](https://i.stack.imgur.com/pXVNN.png)

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2021-07-20T17:00:11.830

setBounds 仅在 BorderLayout 中工作，将 BorderLayout 用于框架或容器或面板，并使用 setBounds 设置文本字段的宽度和高度。看到这个代码简单的代码

```
 import java.awt.*;
 import javax.swing.*;

   class uni1
   {
     public static void main(String[] args)
{
    JFrame frm = new JFrame();
    TextField txt = new TextField();
    txt.setBounds(0, 0, 1200, 400);
    frm.add(txt,BorderLayout.NORTH);
    frm.setLayout(new BorderLayout());
    frm.setVisible(true);
    frm.setDefaultCloseOperation(frm.EXIT_ON_CLOSE);
} 
```

}**

# python - Python int 到百分比

> ID：14805130
> 
> 赞同：-1
> 
> 时间：2013-02-11T02:35:36.300
> 
> 标签：python, range, percentage

我需要按百分比表示每月付款，所以我需要 range = [0.04, 0.05, 0.06, 0.07, 0.08] 而不是 range = [4, 5, 6, 7, 8]

你知道怎么做吗，仍然从totalPayment中得到计算

```
import math 

loanAmt=int(input("Enter the Amount (greater then 0) of the Loan: "))

numYears=int(input("Enter the number of years as an integer: "))

for monthlyRate in range(4,9):

   monthlyPayment = loanAmt * monthlyRate / (1 - math.pow(1 / (1 + monthlyRate), numYears * 12))

   totalPayment = monthlyPayment * numYears * 12
   print("{0:.0f}%".format(monthlyRate),'\t','$%.2f' %monthlyPayment,'\t','\t','$%.2f' %totalPayment) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T02:37:45.337

你可以使用这个：

```
for monthlyRate in (x/100.0 for x in range(4,9)):
    print monthlyRate

0.04
0.05
0.06
0.07
0.08 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T02:45:39.160

或者您也可以使用[列表推导](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)

```
percent_rate = [rate/100.0 for rate in monthly_rate]
# where monthly_rate is the list of all ints like [4, 5, 6, 7, 8] 
```

# jquery - 暂时禁用全日历中的寻呼机/月/周/日视图

> ID：14805132
> 
> 赞同：0
> 
> 时间：2013-02-11T02:35:57.937
> 
> 标签：jquery, fullcalendar

我正在尝试暂时禁用寻呼机左/右控件和日历中的月/周/日视图按钮。我不想永久禁用日历，而只是暂时禁用它，因为我必须等待它刷新一些内容。呈现的 HTML 中有一些 HTML，所以我想我会特别问我需要做什么才能以编程方式禁用这些功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T03:02:25.370

每个文档的标题：

可以将整个标头的任何属性设置为`false`，或者根本不包含标头，因为默认值为`false`

仅标题示例：

```
header: {
    left: false,
    center: 'title',
    right: false
} 
```

API 参考：[http ://arshaw.com/fullcalendar/docs/display/header/](http://arshaw.com/fullcalendar/docs/display/header/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T07:34:47.663

`$(".fc-header-left span.fc-button").addClass("ui-state-disabled");`, 同样对于`.fc-header-right`...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T10:09:12.693

我想我已经做到了，但只是通过使用基于函数的事件源，所以在获取任何数据时，我在整个页面上放置了一个 div（以显示数据加载效果/动画），并在获取完成后立即将其删除。以下是代码：

```
 var eventSource = {
                events: function (start, end, callback) {
                    showHideloader(true, '');
                    $.ajax({
                        url: "my.aspx/myEvents",
                        type: "POST",
                        headers: { "cache-control": "no-cache" },
                        data: "{mydata:blabla}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        async: true,
                        success: function (data) {
                            var events = [];
                            var dateTime = new Date();
                            var jobs = eval("(" + data.d + ")");
                            $.each(jobs, function (i, val) {
                                events.push({
                                    id: jobs[i].TaskID,
                                    title: jobs[i].title,
                                    start: new Date(jobs[i].startDate)
                                });
                            });
                            callback(events);
                            showHideloader(false, '');
                        },
                        error: function (x, e) {
                            showMessage('error', 'failure loading tasks in calendar', x, e, true);
                            showHideloader(false, '');
                        }
                    });
                }
            }//event source

    //put a div on the page to show the data loading effect
    function showHideloader(_show) {
        if (_show) {
            $('#loader').height($(window).height());
            $('#loader').width($(window).width());
            $('#loader').css('top', '0');

            $('#loader').css('left', '0');
            //setting max possible z-index value to always show it in front
            $('#loader').css('z-index', '2147483640');
        }
        $('#loader').css('display', (_show) ? '' : 'none');
    } 
```

我已经创建了一个事件源对象（如果您已经在日历调用中这样做，则无需这样做）并在 ajax 调用之前使用 showHideloader 并再次使用它在成功和失败情况下启用页面。

对于您的参考，我已经包含了 showHideloader 的代码，其中 id='loader' 的潜水用于操作禁用/启用页面效果。

# jquery - 强制/模拟更改事件在上/下键上 我有什么：我有一个框，可以根据选择切换各种 div 的显示。我需要什么：当使用向上/向下箭头键在视觉上更改选项时，我需要另外发生更改事件。注意：我还需要该框正常运行，即通过鼠标单击。我的问题：正如你们大多数人已经知道的那样，当使用向上/向下箭头键在视觉上更改选项时不会触发更改事件。我的代码：http://jsfiddle.net/GK49r/ HTML： <select id="somemenu"><option value="A">ID：14805135 赞同：1 时间：2013-02-11T02:36:08.967 标签：jquery, select, onchange 回答 #1 赞同：1 时间：2013-02-11T02:44:13.243 $( document ).ready( function () { var index = 0, length = $( '#somemenu option' ).length; $( '#somemenu' ).on({ change: function () { if ( this.value === 'Trigger' ) { $( '#togglethis').slideDown( 'slow', function() { // Animation complete. }); } else { $( '#togglethis' ).hide(); } }, keydown: function ( event ) { if ( event.which === 38 ) { index--; if ( index < 0 ) { index = length - 1; } } else if ( event.which === 40 ) { index++; if ( index >= length ) { index = 0; } } // Now index refers to the current index of the option element. // You can now run your required animation // Eg: animate( index ); } }); }); 您可以做的是在（38 为 up 和 40 为 down ）'#somemenu'的基础上监听 keydown 事件，以这种方式运行您的事件event.which 回答 #2 赞同：1 时间：2013-02-11T12:20:05.483 发表我的评论作为答案： 我测试了你的代码，我觉得它的行为符合我的预期。如果您下拉选项列表并使用光标键上下移动突出显示，则不会触发更改事件，因为选择不是最终的，直到您按 Enter 使当前突出显示的选项成为选定选项。 如果您想“预览”选择的效果，也许您可​​以连接到选择的 keyup/keydown 或 keypress 事件，并在其中检查键是否是向上/向下箭头键，然后使用它来执行您的 UI 更新.</option></select>

# javascript - 在three.js中制作表面

> ID：14805140
> 
> 赞同：0
> 
> 时间：2013-02-11T02:36:44.990
> 
> 标签：javascript, three.js, webgl

我有 3D 点云。我想在three.js中制作表面。我用 Vector3 在几何中添加了点。

```
for(var key in dt)
{
var hole = dt[key];
var pX = hole['x'] - planeMinX;
var pY = hole['y'] - planeMinY;
var pZ = hole['z'];
gPlane.vertices.push(new THREE.Vector3(pX, pY, pZ));
} 
```

如何计算人脸？或者有没有更简单的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T07:25:32.523

点云就是这样。如果您没有面部连接信息，则无法计算它。有，但这是一个算法问题。如果您的点云非常密集，那么为了可视化您的数据，您可能不必计算人脸。您可以按原样可视化这些点。您可以使用 three.js 中的粒子系统来了解您的数据。看一下示例 webgl_buffergeometry_particles.html

# sql - 使用自动生成的列填充另一列

> ID：14805147
> 
> 赞同：3
> 
> 时间：2013-02-11T02:37:58.200
> 
> 标签：sql, sql-server, tsql

如何在`INSERT`语句期间使用自动生成的列填充另一列？

长话短说：我们正在重用一个数据库表和一个相关的 ASP 页面来显示与最初预期完全不同的数据。

我有一个类似于以下结构的表。它的结构是我无法控制的。

```
ID       int          NON-NULL, IDENTITY(1,1)
OrderNo  varchar(50)  NON-NULL, UNIQUE
More     ... 
```

该表已被重新利用，我们没有使用该`OrderNo`列。然而，它是`NON-NULL`和`UNIQUE`。作为虚拟数据，我想用行的`ID`列填充它。

到目前为止，我有以下 SQL，但无法弄清楚如何使用该行的 generated `ID`.

```
INSERT INTO MyTable (OrderNo, More)
OUTPUT INSERTED.ID
VALUES (CAST(ID AS varchar(50))) 
```

这只是给出：

> *消息 207，级别 16，状态 1，第 3 行
> 无效的列名称“ID”。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T03:02:09.040

一种选择是：

```
create trigger YourTable_Trigger
on YourTable
INSTEAD OF INSERT
as begin

   INSERT INTO YourTable (OrderNo, AnotherField)
   SELECT 0, AnotherField FROM Inserted

   UPDATE YourTable SET OrderNo = SCOPE_IDENTITY() WHERE ID = SCOPE_IDENTITY()
end; 
```

这是[小提琴](http://sqlfiddle.com/#!3/0aa35/1)。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T04:49:08.483

这是使用 OUTPUT 子句的解决方案。不幸的是，您无法在单个语句中完成此操作。

```
CREATE TABLE Orders (
   ID      int         not null identity(1,1),
   OrderNo varchar(50) not null unique
)

CREATE TABLE #NewIDs ( ID int )

INSERT Orders (OrderNo)
   OUTPUT INSERTED.ID INTO #NewIDs
SELECT 12345

UPDATE o
   SET o.OrderNo = i.ID
FROM Orders o
JOIN #NewIDs i
   ON i.ID = o.ID

SELECT * FROM Orders 
```

# php - 回复消息：更新id匹配的mysql表？

> ID：14805150
> 
> 赞同：0
> 
> 时间：2013-02-11T02:38:17.387
> 
> 标签：php, mysql

我的网站上有一个消息传递系统，允许用户相互发送和接收消息。

我现在正在研究的一点是，如果用户向另一个用户发送消息并且用户阅读了此消息，他们可以回复它。

目前我的 html 表单设置为在文本区域中回显消息内容，然后用户可以从文本区域中删除此内容并重新键入他们想要的内容。

然后，一旦他们点击提交，那么应该转到 message_reply.php，这应该在原始消息 id 存在的地方插入新的消息内容，并将其发送回它来自的用户，这意味着再次更新 id 所在的消息内容， user_to_id 和 user_from_id 匹配，它应该插入带有 :reply 后缀的原始主题，并更新“read_message”并将枚举值从 1 设置回 0（如未读）。

我正在为此苦苦挣扎，因为我是 php 和 mysql 的新手。请有人告诉我我需要做什么。

我的 mysql 表称为“ptb_messages”，其布局如下：

```
id  |  from_user_id(the person who sent msg) | to_user_id (recipient) | content | date_sent | read_message | deleted_to | deleted_from | 
```

这是我的html表单：

```
<form action="message_reply.php?to=<?php echo "$profile_id"; ?>" method="post">
  <textarea name="textarea" id="textarea">
    <?php echo  "{$message['content']}"; ?>
  </textarea>
  <?php
    }
  ?>
  <input type="image" src="assets/img/icons/email_send.png"
         width="50" height="34" name="send_button" id="send_button">
</form> 
```

mysql 函数 (message_reply.php)

```
<?php 
//We check if the form has been sent
if(isset($_POST['textarea'])) {
  $textarea = $_POST['textarea'];
  //We remove slashes depending on the configuration
  if(get_magic_quotes_gpc()) {
    $textarea = stripslashes($textarea);
    }
  //We check if all the fields are filled
  if($_POST['textarea']!='') {
    $sql = "UPDATE ptb_messages SET (id, from_user_id, to_user_id, textarea) VALUES (NULL, '".$_SESSION['user_id']."', '".$message['from_user_id']."', '".$textarea."');";
    mysql_query($sql, $connection);

    echo "<div class=\"infobox1\">The message has successfully been sent.</div>";
    }
  }

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T02:57:04.873

在您的 HTML 代码中，图像不会提交表单，因此单击它时不会发生任何事情。您需要添加`onclick`或使用`submit`按钮（您可以使用 CSS 在提交按钮中显示图像）：

点击示例：

```
<form id="need_an_id_here"
   action="message_reply.php?to=<?php echo "$profile_id"; ?>"
   method="post">
   ... your textarea
  <input type="image" src="assets/img/icons/email_send.png"
     width="50" height="34" name="send_button" id="send_button"
     onclick="document.getElementById('need_an_id_here').submit();">
</form> 
```

此外，虽然这不是您的直接问题，但您的代码容易出现安全问题（SQL 注入、XSS ......）。您应该查找一些有关准备好的语句的教程并将其应用到您的代码中。

# java - 数组长度；是正确的

> ID：14805152
> 
> 赞同：0
> 
> 时间：2013-02-11T02:38:40.270
> 
> 标签：java, arrays, string, date, split

大家好，我有一个有趣的问题。这是我学习面向对象编程的第二个学期。我在 Java 入门课程中的第一个项目涉及创建一个 Date 类，该类会计算从当年 1 月 1 日起经过的天数。我显然必须检查闰年并验证不正确的输入。我目前正在尝试检查用户输入的元素是否太少或太多（在一个字符串中）。这就是我所拥有的，但逻辑在某处存在缺陷。当我输入的元素太少时，它会显示错误并再次读取。然后我输入太多它会显示错误并再次读取。然后，当我输入三个元素时，它会显示上一个错误。在一个错误之后，它不接受只输入了 3 个元素。请帮忙。

```
/* Accepts a string as an argument and splits it into 3 sections
 * month,day, and year
 */
void setDateFields(String dateString){ 
    String [] a  = {null};              // Array created to hold dateString
           a = dateString.split(" ");   // Split dateString into three sections
                                        // each ending with a white space

    // While to check if user entered month day and year
    while (a.length != 3){
             if(a.length < 3)
                  System.out.println("Insufficient number of elements\n" +
                                     "Enter a new date in the format of MM DD YYYY");
             else if(a.length > 3) 
                  System.out.println("Too many elements entered\n" +
                                     "Enter a new date in the format of MM DD YYYY");
            readDate();
            a = dateString.split(" ");
        }
    monthText = a[0];                   // The monthText is assigned the first index of the array
    dayText = a[1];                     // The dayText is assigned the second index of the array
    yearText = a[2];                    // The yearText is assigned the third index of the array4

    numericMonth = Integer.valueOf(monthText);
    numericDay = Integer.valueOf(dayText);
    numericYear = Integer.valueOf(yearText);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T02:43:10.760

您的函数 setDateFields 始终使用您传入的第一个字符串。您需要从用户那里获取另一个字符串（我认为 readDate() 会这样做，但它不能修改 setDateFields() 中的任何内容）。

您的主线代码应如下所示：

```
 do {
   dateString = readDate();
} while(!checkDateString(dateString)); 
```

checkDateString() 应该只检查传入的字符串并返回真或假。

# c - malloc.c:2451：C 中的 SYSMALLOc 断言失败

> ID：14805163
> 
> 赞同：1
> 
> 时间：2013-02-11T02:41:17.777
> 
> 标签：c, memory-management, malloc, free

我不断收到此错误`vidprocess: malloc.c:2451: sYSMALLOc: Assertion (old_top == (((mbinptr) (((char *) &((av)->bins[((1) - 1) * 2])) - __builtin_offsetof (struct malloc_chunk, fd)))) && old_size == 0) || ((unsigned long) (old_size) >= (unsigned long)((((__builtin_offsetof (struct malloc_chunk, fd_nextsize))+((2 * (sizeof(size_t))) - 1)) & ~((2 * (sizeof(size_t))) - 1))) && ((old_top)->size & 0x1) && ((unsigned long)old_end & pagemask) == 0)' failed.`

我在这一步只释放一次内存：

```
DIR *dp;
struct dirent *ep;     
dp = opendir (folder_input);
if (dp != NULL) {
    while ( (ep = readdir (dp)) && MAXVIDS != 0 ) {
        char *filename;
        filename = malloc(sizeof(char) * strlen(ep->d_name));
        strcpy(filename, ep->d_name);
        int len = strlen(filename);
        char *last_three = &filename[len-3];
        char trailer_file_name[100];
        int in_if = 0;
        if (strcasecmp(last_three, "MOV")  == 0) {
            strcpy(trailer_file_name, ep->d_name);
            MAXVIDS--;
            in_if = 1;
        }
        else if (strcasecmp(last_three, "MP4")  == 0) {
            strcpy(trailer_file_name, ep->d_name);
            MAXVIDS--;
            in_if = 1;
        }
        free(filename); 
```

这是我唯一使用的地方`free()`。如果我不使用这部分，我不会收到上面的错误，所以我只是假设由于内存释放而出现错误，但我不明白为什么这是错误的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T02:45:13.407

您没有为以下内容分配足够的内存`filename`：

```
 filename = malloc(sizeof(char) * strlen(ep->d_name)); 
```

这不会为终止的空字节分配空间，您需要`strlen(ep->d_name) + 1`字节。另外，作为旁注，`sizeof(char) == 1` *总是*.

此外，对于此类错误，一个好的内存调试器将为您节省大量时间。如果它适用于您的平台/拱门，我建议使用类似 valgrind 的东西，或者其他类似的工具。

通过超出分配的缓冲区，您可能会损坏用于`malloc()`记账的内部数据结构，这就是您在`free()`.

# range - 获取范围内起始容器的标签名称

> ID：14805166
> 
> 赞同：0
> 
> 时间：2013-02-11T02:41:58.223
> 
> 标签：range, contenteditable, tagname

我在这方面绝对是新手，所以请原谅这个问题的简单性。我有一个内容可编辑的 div。此 div 中的所有文本都包含在链接标签中。

如果用户做出的选择跨越了 2 个或更多这些链接节点，我想在 startContainer 和 endContainer 处标识链接标记的名称。

不幸的是，startContainer 节点通常是一个格式化节点，例如段落或粗体标记，如下面的示例 html 所示。

```
<div id="myarea" onmouseup="getSelectionHtml();" contenteditable="true">

<a id="1" href=#>text1 <b>text1 text1 </b></a>
<a id="2" href=#>text2 <b>text2 text2 </b></a>
<a id="3" href=#>text3 <b>text3 text3 </b></a>

</div> 
```

所以我认为我的方法应该是首先找到startContainer的nameTag。如果它不是链接标签，则查询它的父节点。如果那不是链接标签，请再次查询层次结构中的下一个节点，直到我找到链接标签并可以获得它的 ID。

尽管它很短，但这是我到目前为止所拥有的所有代码。我希望找到 startContainer 的 tagName，但我收到“未定义”的警报。我一直在尽可能多地阅读有关 range 对象的文档，但这些文档都很分散，我有点难以理解。

```
function getSelectionHtml() {
    var userSelection;
       if (window.getSelection) {
          userSelection = window.getSelection();        
          var selRange = userSelection.getRangeAt(0);   
              alert(selRange.startContainer.tagName);
       } 
```

顺便说一句，如果有人有更好的概念解决方案来获取 contentEditable 选择的开头和结尾的链接标签，我将非常感激。

蒂亚

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T09:50:56.077

范围`startContainer`和`endContainer`属性可以是对文本节点或元素的引用。当你得到一个未定义的`tagName`属性时，那是因为你有一个文本节点。

这是一个获取`<a>`包含节点的元素的简单函数：

```
function getAncestorWithTagName(node, tagName) {
    tagName = tagName.toUpperCase();
    while (node) {
        if (node.nodeType == 1 && node.tagName.toUpperCase() == tagName) {
            return node;
        }
        node = node.parentNode;
    }
    return null;
} 
```

例子：

```
var link = getAncestorWithTagName(selRange.startContainer);
if (link) {
   alert("Start is inside link with ID " + link.id);
} 
```

# emacs - 使用参数定义键绑定

> ID：14805167
> 
> 赞同：6
> 
> 时间：2013-02-11T02:42:17.027
> 
> 标签：emacs, elisp

我想将 Cf Cb 映射为向前和向后移动文件中固定数量的行。

我这样做了：

```
(global-set-key (kbd "C-f") 'next-line)
(global-set-key (kbd "C-b") 'previous-line) 
```

但我不知道如何在`next-line`命令之前指定一个参数。我想我应该使用`digit-argument`，但我无法以正确的方式编写命令。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-11T04:27:39.027

您已将问题更改为关于如何直接绑定到键序列

这绑定`C-c l`到`C-u 5 C-n`

```
(global-set-key (kbd "C-c l") (kbd "C-u 5 C-n")) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-11T04:21:24.587

一种可能的选择是定义一个新函数：

```
(defun my-next-line ()
  (interactive)
  (next-line 5))

(global-set-key (kbd "C-f") 'my-next-line) 
```

否则，如果它只是你可以用你可能想要使用的键盘完成的事情

```
M-x name-last-kbd-macro 
```

并将其保存在您的 .emacs 文件中

```
M-x insert-kbd-macro 
```

并让 emacs 为您实现该功能。它只会获取您在调用 name-last-kbd-macro 时提供的名称

# android - 如何修改achartengine中的平移灵敏度？

> ID：14805169
> 
> 赞同：2
> 
> 时间：2013-02-11T02:42:25.873
> 
> 标签：android, achartengine

这是一个简单的问题。有什么方法可以修改平移灵敏度以移动 XYChart？更快地移动它或“加速”移动以快速滚动它。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T07:23:26.517

平底锅以“自然”的方式工作。这意味着它移动的幅度与您在屏幕上拖动的幅度一样多。因此，您不能更快或更慢地移动它。

# magento - 如何调用产品信息？

> ID：14805173
> 
> 赞同：0
> 
> 时间：2013-02-11T02:42:43.630
> 
> 标签：magento

我正在尝试获取一个静态块来提取信息。使用 Magento 1.7 CE。

在静态框中，我使用以下代码：

```
<div>{{block type="catalog/product_list" category_id="6" template="catalog/product/listmenu.phtml"}}</div> 
```

我希望它显示产品名称、价格和图像...我在 listmenu.phtml 中列出什么以便提取正确的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T10:27:23.073

鉴于块类型是“catalog/product_list”，您可以访问块的功能`Mage_Catalog_Block_Product_List`，即由类别 id 加载的产品集合。因此，输出产品列表及其名称、图像和价格的近似代码将是：

```
<?php
$_productCollection=$this->getLoadedProductCollection();
foreach ($_productCollection as $_product): ?>
<div>
<h4><?php echo $this->stripTags($_product->getName());?></h4>
<img src="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->resize(135); 
?>" width="135" height="135" alt="<?php 
echo $this->stripTags($this->getImageLabel($_product, 'small_image'), null, true) ?>" />
<?php echo $this->getPriceHtml($_product, true) ?>
</div>
<?php endforeach; ?> 
```

# ios - 在 Objective-C 中释放静态资源

> ID：14805175
> 
> 赞同：1
> 
> 时间：2013-02-11T02:42:55.167
> 
> 标签：ios, objective-c, macos, memory-management, singleton

如果我在 Objective-C 类中使用静态资源，我会不会因为不释放它而造成内存泄漏？类似于以下内容：

```
@interface MyClass : NSObject

+ (MyClass *)sharedInstance;

@end

@implementation MyClass

+ (MyClass *)sharedInstance
{
    static MyClass * inst;
    if (!inst)
        inst = [MyClass new];
    return inst;
}

@end 
```

A) 是否存在使用此类的应用程序关闭并且此静态声明会造成内存泄漏的情况？

`+ (void)unloadClassDefinition`B）当从内存中清除类定义时，是否有任何类方法被调用？（这甚至会发生吗？）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T02:45:49.317

泄漏是您丢失了所有指针的一块内存。你总是有一个指向这个对象的指针，因为这个变量在你的过程中存在。只要在不破坏旧对象的情况下不将新对象重新分配给该指针，就永远不会发生泄漏。

A）当它终止时，你的所有进程的内存都会被回收。没有泄漏这样的事情可以持续到您的应用程序结束之后。

B) 一旦在 Apple 的 ObjC 运行时加载，类就永远不会被卸载。

如果您希望能够销毁此对象，则必须将变量移出该方法，以便您可以从另一个方法访问它，并按照以下方式执行操作：

```
static MyClass * inst;
+ (MyClass *)sharedInstance
{
    if (!inst)
        inst = [MyClass new];
    return inst;
}

// Under ARC; under MRR you might monkey around with retain and release
// This won't actually immediately destroy the instance if there are other
// strong references to it.
+ (void)destroySharedInstance
{
    inst = nil;
} 
```

但一般来说，如果您使用的是单例，您可能希望在应用程序的整个生命周期中都使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T02:46:44.373

它在技术上并不构成泄漏，因为您仍然有对内存的引用（静态的）。在您设置 inst = nil 之前，内存将一直被占用。最佳做法是在您知道已完成使用该对象时执行此操作。

# cakephp - 如何通过 jQuery 从另一个输入选择中以一种形式更新输入数据？

> ID：14805178
> 
> 赞同：0
> 
> 时间：2013-02-11T02:43:11.520
> 
> 标签：cakephp

I am trying to transfer a value automatically from selection input area to another input area when the selection input has changed. 但是我不能。请帮我。代码在这里：

```
<?php
        echo $this->Form->input('treatment', 
            array('options' => $types, 'id' => 'treatment_foo'));
        echo $this->Form->input('fee', array('id' => 'fee_foo'');

        echo $this->Js->get('#treatment_foo')->event('change',
            $this->Js->request(
                array( 
                    'update' => '#fee_foo',
                    'dataExpression' => true,
                    'data' => '10'))
            );

    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T18:28:12.190

只需使用一些 JQuery

```
$(document).ready(function() {
    $('#treatment_foo').change(function() {
        $('#fee_foo').val($('#treatment_foo').val());
    });
}); 
```

# mysql - 使用子选择更改表

> ID：14805179
> 
> 赞同：3
> 
> 时间：2013-02-11T02:43:41.097
> 
> 标签：mysql

我有两张桌子。一个是字段信息表，另一个是字段数据表。

默认情况下，所有字段数据表列都设置为某种类型的文本字段（varchar、文本等）

我想做的是这个。而不是创建手动 ALTER TABLE 查询：

```
ALTER TABLE `field_data` 
CHANGE COLUMN `field_id_2` `field_id_2` decimal NOT NULL, 
CHANGE COLUMN `field_id_3` `field_id_3` decimal NOT NULL,
CHANGE COLUMN `field_id_22` `field_id_22` decimal NOT NULL,
CHANGE COLUMN `field_id_23` `field_id_23` decimal NOT NULL,
CHANGE COLUMN `field_id_25` `field_id_25` decimal NOT NULL,
CHANGE COLUMN `field_id_27` `field_id_27` decimal NOT NULL,
CHANGE COLUMN `field_id_30` `field_id_30` decimal NOT NULL,
CHANGE COLUMN `field_id_66` `field_id_66` decimal NOT NULL,
CHANGE COLUMN `field_id_72` `field_id_72` decimal NOT NULL; 
```

我想编写一个基于 field_info 表的动态 ALTER TABLE 查询，现在我通过执行以下查询来获取这些字段 ID：

```
SELECT field_id FROM `field_info` WHERE `field_type` = 'a_decimal_field' 
```

它返回值：2、3、22、23 等。

所以我需要一个查询（如果可能的话），它根据子选择连接 field_id_ 到每个子选择的结果来更改表，并将该列的类型更改为十进制。

我知道我可以通过构建查询在 php 中做到这一点，但如果可能的话，我特意寻找一个纯 mysql 解决方案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-11T02:57:14.033

```
SELECT CONCAT('ALTER TABLE `field_data` ', 
  GROUP_CONCAT(' CHANGE COLUMN `field_id_', field_id, '` ',
    ' `field_id_', field_id, '` DECIMAL NOT NULL')) 
FROM `field_info` 
WHERE `field_type` = 'a_decimal_field'
INTO @sql;

PREPARE stmt FROM @sql;

EXECUTE stmt; 
```

# php - 从数组更新查询

> ID：14805184
> 
> 赞同：0
> 
> 时间：2013-02-11T02:44:46.370
> 
> 标签：php

我想从数组更新查询。问题是当我运行代码时，数据库中的更新数据只是第一个数据..

例子..

该数组由整数类型 = [1,2]

当我运行代码时，数据库中的数据只运行了第一个数据（只有 1 个）..我该如何解决这个问题？

**PHP 文件**

```
$query_edit_paket = "select nama_menu from menu where id_menu = 149 ";
        $query_exec_edit_paket = mysql_query($query_edit_paket) or die(mysql_error());  
        $nama_menu_query = reset(mysql_fetch_assoc($query_exec_edit_paket));

     $_fbexclude = mysql_query("select id_paket from detail_paket where menu_paket = '$nama_menu_query' ");
    $fbexcludearray = array();
    while ($row = mysql_fetch_assoc($_fbexclude)) {
      $fbexcludearray[] = $row['id_paket'];
    }

    $excludes = implode(',', $fbexcludearray);
    echo $excludes;

    for($i=0;$i<count($excludes);$i++)  
    {           
        if($excludes != "")  
        {           
            $strSQL = "update paket set ketersediaan_paket ='kosong' ";  
            $strSQL .="WHERE id_paket = '$excludes' ";  
            $objQuery = mysql_query($strSQL);
        }
    } 
```

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T02:55:56.440

尝试使用`IN`

改变

```
$strSQL .="WHERE id_paket = '$excludes' "; 
```

到

```
$foo = '';
for($i=0; $i < count($fbexcludearray); $i++){
  $foo.= $i == 0? $fbexcludearray[$i]: ','.$fbexcludearray[$i];
}
    $strSQL .="WHERE id_paket IN ($foo) "; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T02:58:42.610

如果你要打印你的 $strSQL 你会看到你的查询是这样的

```
update paket set ketersediaan_paket ='kosong' WHERE id_paket = '1,2' 
```

这不是您想要的查询。你想要的更像是这样的

```
update paket set ketersediaan_paket ='kosong' WHERE id_paket = '1' OR WHERE id_paket = '2' 
```

所以你需要重组你的 for 循环或改变你的查询。

# meteor - 从集合创建数组时如何保持数据“反应性”

> ID：14805189
> 
> 赞同：3
> 
> 时间：2013-02-11T02:45:14.993
> 
> 标签：meteor

我正在将[fullCalendar](http://arshaw.com/fullcalendar/)集成到我的流星应用程序中。fullCalendar 需要特定的[数据格式](http://arshaw.com/fullcalendar/docs/event_data/)。我可以从我的收藏中创建该数据。然而，数据不再是被动的。

有什么方法可以使我从 Collection 转换为 Array 的数据“反应”？

谢谢。

客户端html：

```
<template name="carpool_calendar">
  <div id="calendar"></div>
</template> 
```

客户端JS：

```
Template.carpool_calendar.rendered = function () {  
  //initialize the calendar in this template
  $('#calendar').fullCalendar({    
    events: function(start, end, callback) {
      var events = [];      
      var calendarEvents = Carpool_Events.find();

      calendarEvents.forEach(function (carpool_event) {
    events.push({
          title: carpool_event.owner,
          start: carpool_event.eventDate
    });
    console.log("Event owner " + ": " + carpool_event.owner);
      });
      callback(events);
    },
    header: {
      left: 'prev,next today',
      center: 'title',
      right: 'month,basicWeek,basicDay'
    }, 
    weekends: false, // will hide Saturdays and Sundays
    editable: true
  });
}; 
```

更新了客户端 JS（这还不完全正确。它会在每次数据更改时重新创建日历......页面会随着新的日历实例变得越来越长）：

```
Template.carpool_calendar.rendered = function () {  
  Meteor.autorun(function() {
    //initialize the calendar in this template
    $('#calendar').fullCalendar({    
      events: function(start, end, callback) {
    var events = [];      
    var calendarEvents = Carpool_Events.find();

    calendarEvents.forEach(function (carpool_event) {
      events.push({
            title: carpool_event.owner,
            start: carpool_event.eventDate
      });
      console.log("Event owner " + ": " + carpool_event.owner);
    });
    callback(events);
      },
      header: {
    left: 'prev,next today',
    center: 'title',
    right: 'month,basicWeek,basicDay'
      }, 
      weekends: false, // will hide Saturdays and Sundays
      editable: true
    });
  })}; 
```

客户端 JS 完全工作的“反应式”全日历：

```
Template.carpool_calendar.rendered = function () {  
  //initialize the calendar in this template
  $('#calendar').fullCalendar({    
    events: function(start, end, callback) {
      var events = [];      
      var calendarEvents = Carpool_Events.find();

      calendarEvents.forEach(function (carpool_event) {
    events.push({
          title: carpool_event.owner,
          start: carpool_event.eventDate
    });
    console.log("Event owner " + ": " + carpool_event.owner);
      });
      callback(events);
    },
    header: {
      left: 'prev,next today',
      center: 'title',
      right: 'month,basicWeek,basicDay'
    }, 
    weekends: false, // will hide Saturdays and Sundays
    editable: true
  });

  Meteor.autorun(function() {
    var calendarEvents = Carpool_Events.find();
    $('#calendar').fullCalendar('refetchEvents');
  });

}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T07:22:50.710

就像 TimDog 说的，你不能给 UI 元素一个反应数组，让它来处理剩下的事情。但是另一个选项是你可以使用`Meteor.autorun`，所以当你的集合发生变化时，它可以触发一个 JS 函数来创建一个更新的数组，从而使它有点反应。

我不确定如何准确使用此日历，但将其添加到您的客户端代码中可能会有所帮助。

```
Meteor.autorun(function() {
    calendarEvents = Carpool_Events.find();

    $('#calendar').fullCalendar({    
        events: function(start, end, callback) {
            var events = [];      

            calendarEvents.forEach(function (carpool_event) {
                events.push({
                title: carpool_event.owner,
                start: carpool_event.eventDate
            });
       });
      callback(events);
    }
  });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T04:58:58.503

这是关于如何为 Meteor 正确创建 UI 组件以确保响应式数据上下文的更大问题的一部分。这是一个很好的问题，而且[之前有人问过](https://groups.google.com/forum/?fromgroups=#!topic/meteor-talk/hm27ylqgCfo)。

简短的回答是目前还没有标准化的框架——比如 Meteor.UI 智能包。然而，在此期间，最好的办法是使用 {{#each}} 帮助[源](https://github.com/meteor/meteor/blob/master/packages/handlebars/evaluate.js#L33)作为指导来破解 fullCalendar 小部件。您需要注意如何使用[Spark](http://meteor.com/blog/2012/08/31/introducing-spark-a-new-live-page-update-engine)标记数据元素：

```
 'each': function (data, options) {
    var parentData = this;
    if (data && data.length > 0)
      return _.map(data, function(x, i) {
        // infer a branch key from the data
        var branch = (x._id || (typeof x === 'string' ? x : null) ||
                      Spark.UNIQUE_LABEL);
        return Spark.labelBranch(branch, function() {
          return options.fn(x);
        });
      }).join('');
    else
      return Spark.labelBranch(
        'else',
        function () {
          return options.inverse(parentData);
        });
  }, 
```

# c++ - 具有默认值的 C++ 可变参数模板函数参数

> ID：14805192
> 
> 赞同：27
> 
> 时间：2013-02-11T02:45:39.473
> 
> 标签：c++, c++11, default-value, variadic-templates, variadic-functions

我有一个函数，它接受一个具有默认值的参数。现在我还希望它采用可变数量的参数并将它们转发给其他函数。具有默认值的函数参数必须放在最后，所以...我可以将该参数放在可变参数包之后，编译器会在调用函数时检测我是否提供它？

（假设包不包含最后一个参数的类型。如果有必要，我们可以假设，因为该类型通常不应该为用户所知，否则无论如何它都被认为是我的界面的错误使用.. ..)

```
template <class... Args>
void func (Args&&... args, SomeSpecialType num = fromNum(5))
{
} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-11T02:48:01.470

不，包必须放在最后。

但你可以伪造它。您可以检测到包装中的最后一种类型是什么。如果是`SomeSpecialType`，你可以运行你的函数。如果不是，您可以使用转发和附加`SomeSpecialType`的参数递归调用自己。`fromNum(5)`

如果您想花哨的话，可以使用 SFINAE 技术在编译时（即不同的重载）完成此检查。但这可能不值得麻烦，考虑到“运行时”检查将在给定的过载情况下保持不变，因此几乎肯定会被优化，并且不应轻易使用 SFINAE。

这不会给你你想要的签名，但它会给你你想要的行为。您必须在评论中解释预期的签名。

像这样，在你删除错别字等之后：

```
// extract the last type in a pack.  The last type in a pack with no elements is
// not a type:
template<typename... Ts>
struct last_type {};
template<typename T0>
struct last_type<T0> {
  typedef T0 type;
};
template<typename T0, typename T1, typename... Ts>
struct last_type<T0, T1, Ts...>:last_type<T1, Ts...> {};

// using aliases, because typename spam sucks:
template<typename Ts...>
using LastType = typename last_type<Ts...>::type;
template<bool b, typename T=void>
using EnableIf = typename std::enable_if<b, T>::type;
template<typename T>
using Decay = typename std::decay<T>::type;

// the case where the last argument is SomeSpecialType:
template<
  typename... Args,
  typename=EnableIf<
    std::is_same<
      Decay<LastType<Args...>>,
      SomeSpecialType
    >::value
  >
void func( Args&&... args ) {
  // code
}

// the case where there is no SomeSpecialType last:    
template<
  typename... Args,
  typename=EnableIf<
    !std::is_same<
      typename std::decay<LastType<Args...>>::type,
      SomeSpecialType
    >::value
  >
void func( Args&&... args ) {
  func( std::forward<Args>(args)..., std::move(static_cast<SomeSpecialType>(fromNum(5))) );
}

// the 0-arg case, because both of the above require that there be an actual
// last type:
void func() {
  func( std::move(static_cast<SomeSpecialType>(fromNum(5))) );
} 
```

或类似的东西。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-09-28T07:32:51.143

另一种方法是通过元组传递可变参数。

```
template <class... Args>
void func (std::tuple<Args...> t, SomeSpecialType num = fromNum(5))
{
  // don't forget to move t when you use it for the last time
} 
```

优点：接口更简单，重载和添加默认值参数非常容易。

`std::make_tuple`缺点：调用者必须在or调用中手动包装参数`std::forward_as_tuple`。此外，您可能不得不诉诸`std::index_sequence`技巧来实现该功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-12-26T07:33:43.027

这有点晚了，但在 C++17 中你可以做到这一点，`std::tuple`总体上会很好。这是对@xavlours 答案的扩展：

```
template <class... Args>
void func (std::tuple<Args&&...> t, SomeSpecialType num = fromNum(5))
{
    // std::apply from C++17 allows you to iterate over the tuple with ease
    // this just prints them one by one, you want to do other operations i presume
    std::apply([](auto&&... args) {((std::cout << args << '\n'), ...);}, t);
} 
```

然后，制作一个简单的函数来准备它们：

```
template<typename... Args>
std::tuple<Args&&...> MULTI_ARGS(Args&&... args) {
    return std::tuple<Args&&...>(args...);
} 
```

现在您可以像这样调用该函数：

```
func(MULTI_ARGS(str1, int1, str2, str3, int3)); // default parameter used
func(MULTI_ARGS(str1, int1, str2));  // default parameter used
func(MULTI_ARGS(str1, int1, str2, str3, int3, otherStuff), fromNum(10)); // custom value instead of default 
```

免责声明：我在设计记录器时遇到了这个问题，并希望有一个默认参数，其中包含`std::source_location::current()`并且据我所知，这是确保调用者信息准确传递的唯一方法。制作函数包装器将更改`source_location`信息以表示包装器而不是原始调用者。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-11T15:41:30.737

[由于 C++17 可以通过使用类模板参数推导](https://en.cppreference.com/w/cpp/language/class_template_argument_deduction)和[用户定义的推导指南](https://en.cppreference.com/w/cpp/language/class_template_argument_deduction#User-defined_deduction_guides)来解决此限制。

这对于 C++20 [std::source_location](https://en.cppreference.com/w/cpp/utility/source_location)尤其有用。

这是 C++17 演示：

```
#include <iostream>

int defaultValueGenerator()
{
    static int c = 0;
    return ++c;
}

template <typename... Ts>
struct debug
{    
    debug(Ts&&... ts, int c = defaultValueGenerator())
    {
        std::cout << c << " : ";
        ((std::cout << std::forward<Ts>(ts) << " "), ...);
        std::cout << std::endl;
    }
};

template <typename... Ts>
debug(Ts&&...args) -> debug<Ts...>;

void test()
{
    debug();
    debug(9);
    debug<>(9);
}

int main()
{
    debug(5, 'A', 3.14f, "foo");
    test();
    debug("bar", 123, 2.72);
} 
```

[现场演示](https://godbolt.org/z/r1Wro43v3)

[带有 source_location 的演示](https://godbolt.org/z/veEsGEaxb)（应该从 C++20 开始可用，但对于编译器来说仍然是实验性的）。

# git - 在另一台计算机上使用 Github

> ID：14805196
> 
> 赞同：1
> 
> 时间：2013-02-11T02:46:10.797
> 
> 标签：git, github, ssh

我一直在使用计算机 A 并想在另一台计算机上处​​理我的一个 Github 项目（我们称之为计算机 B），但我不知道如何导入它。现在我正在尝试做

计算机 B 上的 git clone ssh://github.com/username/projectname.git

但它说权限被拒绝（公钥）。

我应该在这里做什么？我应该在计算机 B 上生成一个 SSH 密钥并将其上传到我的 github 帐户吗？那么每台电脑都有自己的SSH key来连接github？那是我应该做的吗？如何生成 SSH 密钥？

谢谢 - 到目前为止，git/github 对我来说一直很痛苦，我将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T02:47:49.143

是的。在您的另一台计算机上生成第二个 SSH 密钥，并通过 GitHub 帐户设置界面添加其 pubkey。然后你就可以从那里克隆了。

这就是公钥认证系统的工作方式——你要授予访问权限的每台机器都有自己的密钥；这允许您独立授予和撤销对每台机器的访问权限，而不必在机器之间复制密钥（可能使其容易在此过程中被拦截）。

# processing.js - 将图像从处理传递到 Javascript，然后使用 AJAX/PHP 将所述图像保存回服务器？

> ID：14805198
> 
> 赞同：0
> 
> 时间：2013-02-11T02:46:40.830
> 
> 标签：processing.js

我正在做一个项目，我想将处理草图加载到画布中，当用户将鼠标悬停在图像上时（得到该部分），图像会发生一些事情，然后当他们离开画布时，将图像保存回服务器。

我已经查看了这些其他问题，但无法完全弄清楚：

> [HTML5 CANVAS：如何从服务器保存和重新打开图像](https://stackoverflow.com/questions/5571303/html5-canvas-how-to-save-and-reopen-image-from-server)
> 
> 这对我来说真的不起作用。
> 
> [将“画布”图像数据上传到服务器](https://stackoverflow.com/questions/1590965/uploading-canvas-image-data-to-the-server)
> 
> 我不完全明白把所有东西放在哪里。
> 
> [http://j-query.blogspot.in/2011/02/save-base64-encoded-canvas-image-to-png.html](http://j-query.blogspot.in/2011/02/save-base64-encoded-canvas-image-to-png.html)
> 
> 从 Stackoverflow 之外，但我从这里到达那里。

## 版本 1

这一路不行，感觉接近了，处理sketch在工作，踢出一张图片，就是用JS抓不到，然后不知道怎么办用它把它送回服务器。

```
 <!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>My Processing Page</title>
    <script type="text/javascript" src="../../processingjs/processing.js"></script>
    <script type="text/javascript"> //This is for communicating between Processing and Javascript
       function showXYCoordinates(x, y) {
         document.getElementById('xcoord').value = x;
         document.getElementById('ycoord').value = y;
       }

       var bound = false;

       function bindJavascript(instance) {
         var pjs = Processing.getInstanceById(instance);
         if(pjs != null) {
           pjs.bindJavascript(this);
           bound = true; 
           }
         if(!bound) {
              setTimeout(bindJavascript, 250);
         }
       }

       bindJavascript('B_103');

       var processingOutput = Processing.getInstanceByID('B_103');
       var img = processingOutput.mouseOut();
    </script>
</head>
    <body>
    <canvas id="B_103" data-processing-sources="B_103/B_103.pde" width="300px" height="300px"></canvas>

<?php
    // requires php5
    echo $_GET['img'];
    define('UPLOAD_DIR', 'B_103/data/');
    $img = $_POST['img'];
    // $img = str_replace('data:image/png;base64,', '', $img);
    // $img = str_replace(' ', '+', $img);
    // $data = base64_decode($img);
    $file = UPLOAD_DIR . 'image.jpg';
    $success = file_put_contents($file, $data);
    print $success ? $file : 'Not able to save the file.';
?></body>
</html> 
```

然后是这样的：

## 版本 2

```
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>My Processing Page</title>
    <script type="text/javascript" src="../../processingjs/processing.js"></script>
    <script type="text/javascript"> //This is for communicating between Processing and Javascript
       function showXYCoordinates(x, y) {
         document.getElementById('xcoord').value = x;
         document.getElementById('ycoord').value = y;
       }

       var bound = false;

       function bindJavascript(instance) {
         var pjs = Processing.getInstanceById(instance);
         if(pjs != null) {
           pjs.bindJavascript(this);
           bound = true; 
           }
         if(!bound) {
              setTimeout(bindJavascript, 250);
         }
       }

       bindJavascript('B_103');

       //var processingOutput = Processing.getInstanceByID('B_103');
       //var img = processingOutput.mouseOut();

        function save(){      //saves the canvas into a string as a base64 png image.   jsvalue is sent to the server by an html form
          var b_canvas = document.getElementById("B_103");
          var b_context = b_canvas.getContext("2d");
          var img = b_canvas.file_put_contents('backpicture.png',base64_decode(substr($str,22))); 
        }
    </script>
</head>
    <body>
    <canvas id="B_103" data-processing-sources="B_103/B_103.pde" width="300px" height="300px"></canvas>

<?php
  echo $_GET['img'];
  $str=$_POST['img'];
  $file=fopen("B_103/data/image.txt","w");
  if(isset($_POST['submit']))
      fwrite($file,$str);
  fclose($file) 
 ?>

</body>
</html> 
```

所以这个是向后保存文件，但文件中没有任何内容。我可以处理 Base64（关于在处理中使用它的一个问题的答案），但该文件中没有它。

任何想法表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T15:43:42.410

那里的代码太多了=）

Canvas 可以通过单个函数调用为您提供 base64 编码的图像，因此只需使用 canvas.toDataURL("image/png") 或 canvas.toDataURL("image/jpg") 获取该字符串，然后将其保存到您的服务器使用正常的 POST 操作。

当再次需要它时，使用您的 GET 请求采用的任何格式向您的服务器询问数据，然后将其解压缩为图像，然后将该图像绘制到您的草图上：

```
var dataURI = /* get the string from your server */
var img = new Image();
img.src = dataURI;
sketch.image(img,0,0); 
```

我们应该很高兴。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T07:29:08.397

谢谢迈克，它正在工作。这就是我所做的。

```
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>My Processing Page</title>
<script type="text/javascript" src="../../processingjs/processing.js"></script>
<script type="text/javascript"> //This is for communicating between Processing and Javascript
   function showXYCoordinates(x, y) {
     document.getElementById('xcoord').value = x;
     document.getElementById('ycoord').value = y;
   }

   var bound = false;

   function bindJavascript(instance) {
     var pjs = Processing.getInstanceById(instance);
     if(pjs != null) {
       pjs.bindJavascript(this);
       bound = true; 
       }
     if(!bound) {
          setTimeout(bindJavascript, 250);
     }
   }

   bindJavascript('B104');

   //var processingOutput = Processing.getInstanceByID('B_104');
   //var img = processingOutput.mouseOut();

    function postAjax(){
        var canvasB104 = document.getElementById('B104');
        var canvasData = canvasB104.toDataURL('image/png');
        var ajax = new XMLHttpRequest();
        ajax.open("POST",'testSave.php',false);
        ajax.setRequestHeader('Content-Type', 'application/upload');
        ajax.send(canvasData);      
    }
</script>
</head>
<body>
<canvas id="B104" data-processing-sources="B_104/B_104.pde" width="300px" height="300px" onmouseout="postAjax()"></canvas> 
```

另外，我有一个从本教程获得的 PHP 文件：http: [//permadi.com/blog/2010/10/html5-saving-canvas-image-data-using-php-and-ajax/](http://permadi.com/blog/2010/10/html5-saving-canvas-image-data-using-php-and-ajax/)

我搞砸的一件事，这可能是新手要做的事情，是我在引号中加上了变量 canvasData，我现在看到的当然是不正确的（因为我想要字符串而不是实际的单词 'canvasData'）

如果有人想看到它工作： http: [//graphic-interaction.com/mfa-thesis/testing-group02/pro-ex-07.php](http://graphic-interaction.com/mfa-thesis/testing-group02/pro-ex-07.php)

# iphone - 使用手动加密消息的 iphone 呼叫网络服务

> ID：14805201
> 
> 赞同：1
> 
> 时间：2013-02-11T02:47:14.917
> 
> 标签：iphone, ios, wcf, wshttpbinding, wsdl2objc

我正在开发一个将调用 Web 服务操作的 ios 应用程序。现有 Web 服务配置了 wsHttpBinding 安全设置为 TransportWithMessageCredential。

我已经使用 wsdl2objc 生成实现文件（来自 wsdl）并设置了一个小应用程序用于测试目的。不过，我无法让应用程序正确地与 Web 服务对话，而且从我所读到的内容来看，使用这些 Web 配置设置（wsHttpBinding、传输和消息安全）似乎几乎不可能。

我已经进行了大量研究，并在此站点（和其他站点）上找到的信息的帮助下，我设法找出了 SOAP 请求应该是什么样子。我基本上使用 WCF 测试客户端和 Fiddler 来监控流量。我也尝试了soapUI，它没有我希望的那么成功。

我确实在本地设置了一个测试 Web 服务并且我可以成功使用，但只有当 Web 配置使用 BasicHttpBinding 或 wsHttpBinding 安全模式 =“none”（我理解就像 basicHttpBinding 一样）具有安全性时。

我的解决方案（我希望）是……如果我编写一个 Web 服务来调用这个 Web 服务呢？两种 Web 服务都将驻留在服务器上，但 iphone 将使用的 Web 服务配置了 SSL。然后，想法是使用 ios 安全框架 (HMAC) 或其他散列算法手动加密操作（和必要的属性），并让 SSL Web 服务解密，然后从现有的 Web 服务调用请求的操作。这有意义吗？我在想这似乎太简单了，我一定错过了一些东西。有人看到这有什么真正的问题吗？

谢谢。

**编辑**我只是想稍微澄清一下我的情况：我的应用程序无法使用配置的现有 Web 服务。我的想法是创建一个可以与这个对话的网络服务。新的 Web 服务将简单地解密传入的数据并调用现有 Web 服务上的方法。收到响应后，新的 Web 服务将加密数据并将其发送回 iphone 应用程序。对不起，如果我不清楚。

**更新**

这是肥皂信封（来自 Fiddler）：

`<s:Envelope xmlns:s="http://www.w3.org/2003/05/soap-envelope" xmlns:a="http://www.w3.org/2005/08/addressing" xmlns:u="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">`

```
<s:Header>
    <a:Action s:mustUnderstand="1">http://tempuri.org/IService/ValidateMe</a:Action>
    <a:MessageID>urn:uuid:81d70393-5356-4e3a-b209-49ea53068935</a:MessageID>
    <a:ReplyTo>
        <a:Address>http://www.w3.org/2005/08/addressing/anonymous</a:Address>
    </a:ReplyTo>
    <a:To s:mustUnderstand="1">https://mibe.stpa.com/WCFService/IVService.svc/ValidationService</a:To>
    <o:Security xmlns:o="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" s:mustUnderstand="1">
        <u:Timestamp u:Id="_0">
            <u:Created>2013-02-10T04:48:18.646Z</u:Created>
            <u:Expires>2013-02-10T04:53:18.646Z</u:Expires>
        </u:Timestamp>
        <c:SecurityContextToken xmlns:c="http://schemas.xmlsoap.org/ws/2005/02/sc" u:Id="uuid-0191ec20-905d-4ef0-a818-3eced0e02ecf-32">
            <c:Identifier>urn:uuid:06bd1d3e-97e5-41bc-afce-3993736f202d</c:Identifier>
        </c:SecurityContextToken>
        <Signature xmlns="http://www.w3.org/2000/09/xmldsig#">
            <SignedInfo>
                <CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
                <SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#hmac-sha1"/>
                <Reference URI="#_0">
                    <Transforms>
                        <Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
                    </Transforms>
                    <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
                    <DigestValue>/RpEprwYbnSypHXVF/rdxn3nkRo=</DigestValue>
                </Reference>
            </SignedInfo>
            <SignatureValue>ya8hHooO129dNOHplhY3xRndoDk=</SignatureValue>
            <KeyInfo>
                <o:SecurityTokenReference>
                    <o:Reference ValueType="http://schemas.xmlsoap.org/ws/2005/02/sc/sct" URI="#uuid-0191ec20-905d-4ef0-a818-3eced0e02ecf-32"/>
                </o:SecurityTokenReference>
            </KeyInfo>
        </Signature>
    </o:Security>
</s:Header>
<s:Body>
    <ValidateMe xmlns="http://tempuri.org/">
        <memberId>950470173</memberId>
    </ValidateMe>
</s:Body> 
```

`</s:Envelope>`

# python - python循环字典值引用更新所有值

> ID：14805203
> 
> 赞同：3
> 
> 时间：2013-02-11T02:47:48.383
> 
> 标签：python, variables, dictionary, nested

我在 python 中更新字典中的值时遇到问题。我正在尝试更新单个第一级键的嵌套值（作为 int 或列表），但我更新了所有第一级键的值。

我首先创建字典：

```
kmerdict = {}
innerdict = {'endcover':0, 'coverdict':{}, 'coverholder':[], 'uncovered':0, 'lowstart':0,'totaluncover':0, 'totalbases':0}
for kmer in kmerlist: # build kmerdict
    kmerdict [kmer] = {}
    for chrom in fas:  #open file and read line
        chromnum = chrom[3:-3]
        kmerdict [kmer][chromnum] = innerdict 
```

然后我从一个列表（fas，未显示）中遍历染色体（作为纯文本文件），并以 7mer 字符串（k=7）作为键。如果该键在我正在寻找的键列表中（kmerlist）并尝试使用它来引用嵌套在字典中的单个值：

```
for chrom in fas:  #open file and read line
    chromnum = chrom[3:-3]
    p = 0  #chromosome position counter
    thisfile = "/var/store/fa/" + chrom
    thischrom = open(thisfile)
    thischrom.readline()
    thisline = thischrom.readline()
    thisline = string.strip(thisline.lower())
    l=0  #line counter
    workline = thisline
    while(thisline):
        if len(workline) > k-1:
            thiskmer = ''
            thiskmer = workline[0:k] #read five bases
            if thiskmer in kmerlist:
                thisuncovered = kmerdict[thiskmer][chromnum]['uncovered']
                thisendcover =  kmerdict[thiskmer][chromnum]['endcover']
                thiscoverholder = kmerdict[thiskmer][chromnum]['coverholder']
                if p >= thisendcover:
                    thisuncovered += (p - thisendcover)
                    thisendcover = ((p+k) + ext)
                    thiscoverholder.append(p)
                elif p < thisendcover:
                    thisendcover = ((p+k) + ext)
                    thiscoverholder.append(p)
            print kmerdict[thiskmer]
            p += 1
            workline = workline[1:]
        else:
            thisline = thischrom.readline()
            thisline = string.strip(thisline.lower())
            workline = workline+thisline
            l+=1
print kmerdict 
```

但是当我打印字典时，所有“thiskmer”级别都将使用相同的值进行更新。我的字典不是很好，我看不到我的方式的错误，但它们是深刻的！任何人都可以启发我吗？

希望我已经足够清楚了。我一直在修改这段代码太久了:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T02:51:05.930

*坦白*——我没有花时间弄清楚你所有的代码——只有第一部分。您遇到的第一个问题是在设置中：

```
kmerdict = {}
innerdict = {'endcover':0, 'coverdict':{}, 'coverholder':[], 'uncovered':0, 
             'lowstart':0,'totaluncover':0, 'totalbases':0}
for kmer in kmerlist: # build kmerdict
    kmerdict [kmer] = {}
    for chrom in fas:  #open file and read line
        chromnum = chrom[3:-3]
        kmerdict [kmer][chromnum] = innerdict 
```

您创建`innerdict`一次，然后继续重复使用**同一个字典**。换句话说，every`kmerdict[kmer][chromnum]`指的是相同的对象。也许将最后一行更改为：

```
kmerdict [kmer][chromnum] = copy.deepcopy(innerdict) 
```

`copy`会有所帮助（在文件顶部适当导入）？或者，您可以将 of 的创建移到`innerdict`注释中指出的内部循环中：

```
def get_inner_dict():
    return {'endcover':0, 'coverdict':{}, 'coverholder':[], 'uncovered':0, 
            'lowstart':0,'totaluncover':0, 'totalbases':0}

kmerdict = {}
for kmer in kmerlist: # build kmerdict
    kmerdict [kmer] = {}
    for chrom in fas:  #open file and read line
        chromnum = chrom[3:-3]
        kmerdict [kmer][chromnum] = get_inner_dict() 
```

-- 我决定使用一个函数来使它更容易阅读:)。

# javascript - 显示类的 Javascript：无，如果选项卡类打开或关闭（可折叠面板）

> ID：14805207
> 
> 赞同：0
> 
> 时间：2013-02-11T02:48:02.340
> 
> 标签：javascript, drop-down-menu

我正在开发一个可折叠的面板菜单。除了可折叠面板选项卡中的标题外，一切看起来都很棒。所以，这就是我想要做的，如果可折叠面板内容打开，我希望可折叠面板选项卡显示特定的跨度类。例如，如果它打开，它将显示减号或 (-) 符号。如果接近，它将显示一个加号或 (+) 号。

这是代码：

```
<div id="CollapsiblePanel1" class="CollapsiblePanel">
    <div class="CollapsiblePanelTab" tabindex="0">
       <span class="closedmenu">+</span>
       <span class="openmenu">-</span>
    </div>
    <div class="CollapsiblePanelContent"> 
       <ul>
          <li><a href="LINK1urlHERE">LINK1titleHERE</a></li>
          <li><a href="LINK2urlHERE">LINK2titleHERE</a></li>
       </ul>
    </div>
</div>
<script type="text/javascript">
var CollapsiblePanel1 = new Spry.Widget.CollapsiblePanel("CollapsiblePanel1", {contentIsOpen:false});
</script> 
```

或者，如果可折叠面板内容是打开的，我希望 .closedmenu 类具有 display:none 的 css。并且如果可折叠面板内容关闭，则 .openmenu 类的 css 为 display:none。

在 css 中，这个想法是这样的：

```
.CollapsiblePanelOpen .CollapsiblePanelTab {
   .closedmenu {display:none;} }
.CollapsiblePanelClosed .CollapsiblePanelTab {
   .openmenu {display:none;} } 
```

但是，当然，这是行不通的。所以，我认为需要一个javascript。

我需要一个非常简单的答案，如果有人可以，请。谢谢！我希望这个问题是清晰易懂的。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T03:09:25.227

我不熟悉你可以在 Spry 中使用的钩子，但你可以像这样运行：

```
function clickPlus() {
    document.getElementById("openButton").style.display = "none";
    document.getElementById("closeButton").style.display="inline";
}

function clickMinus() {
    document.getElementById("openButton").style.display = "inline";
    document.getElementById("closeButton").style.display="none";
} 
```

在你的跨度上做这样的事情：

```
<span id="openButton" onclick="clickPlus();">+</span>
<span id="closeButton" onclick="clickMinus();">-</span> 
```

这一切都假设您从`display:none;`在 css 中指定`closeButton`.

**编辑**：我将代码更改为更具体一点，并注意到`display:none;`css 中的要求

# c# - 用C#将xml文件上传到ftp服务器，文件上传成功但里面没有内容？

> ID：14805208
> 
> 赞同：1
> 
> 时间：2013-02-11T02:48:11.810
> 
> 标签：c#, xml, ftpwebrequest

我的问题是，当我在我的 ftp 服务器上查看上传的文件时，上面没有内容，它是空的。为什么会发生这种情况，我的代码中缺少某些内容？

```
if (File.Exists("main.xml"))
{
    using (Stream stream = new MemoryStream())
    {
        stream.Position = 0;
        stream.Seek(0, SeekOrigin.Begin);

        string uri = String.Format("ftp://{0}/{1}/{2}", "host", "wwwroot", "main.xml");

        FtpWebRequest request = (FtpWebRequest)FtpWebRequest.Create(new Uri(uri));

        request.Credentials = new NetworkCredential("user", "pass");
        request.Method = WebRequestMethods.Ftp.UploadFile;
        request.KeepAlive = false;
        request.UseBinary = true;
        request.UsePassive = true;
        request.ContentLength = stream.Length;
        request.EnableSsl = false;

        int bufferLength = 2048;
        byte[] buffer = new byte[bufferLength];
        int contentLength;

        Stream ftpStream = request.GetRequestStream();
        contentLength = stream.Read(buffer, 0, bufferLength);
        while (contentLength != 0)
        {
            ftpStream.Write(buffer, 0, contentLength);
            contentLength = stream.Read(buffer, 0, bufferLength);
        }

        ftpStream.Flush();
        ftpStream.Close();
    }
}
else
{
    MessageBox.Show("No file found.");
} 
```

但是当我尝试在上面插入这行代码时

```
MessageBox.Show(XDocument.Load("main.xml").ToString()); 
```

它有一个输出，

但是当我尝试设置断点时，当它到达`while (contentLength != 0)`它时不会进入它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T03:18:09.663

如果您正在编写的文件总是空的，那么听起来您实际上并没有得到任何文件。首先要检查的是看是否`while (contentLength != 0)`曾经输入过。

更新：另外，正如约翰指出的那样，请求流分配很糟糕！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T03:18:11.380

**编辑**

好的，这应该是

```
using (Stream stream = File.Open("main.xml", FileMode.Open)) 
```

# iphone - 允许经过身份验证的 IOS 游戏中心用户进行自动身份验证

> ID：14805210
> 
> 赞同：2
> 
> 时间：2013-02-11T02:48:48.610
> 
> 标签：iphone, ios, authentication, networking, security

我正在制作一个 iphone 应用程序（游戏），虽然它不是我的第一款游戏，但它将是我的第一款使用网络连接的游戏（我打算添加一些乘数功能）所以，现在我的问题。我希望玩家能够打开我的应用程序，登录游戏中心，然后使用它连接到我的服务器。这可能吗？换句话说：

```
Player signs in to game center
Sends username to my server
if (game center username doesnt exist)
{
Add their username to my sql database
}
else if (username does exist)
{
Send sign in successful message to device.
} 
```

我相信我不久前阅读了另一个问题，询问如何执行此操作，但答案中提到了有关使用设备 UDID 的内容，我不想这样做（如果您阅读与技术相关的新闻，原因很明显）。

所以无论如何，有没有一种值得信赖的方式，我可以确定用户是他们所说的身份，一旦他们通过游戏中心进行身份验证，我可以使用它来针对我的服务器对他们进行身份验证？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T09:15:19.627

我认为您可以使用 GKPlayer.playerID 而不是 UDID，它对每个游戏中心帐户都是唯一的。出于其他目的，您可以自定义身份验证处理程序的完成块

```
GKLocalPlayer * __weak localPlayer = [GKLocalPlayer localPlayer];

    localPlayer.authenticateHandler = ^(UIViewController *viewController, NSError *error)
    {
        if (viewController != nil)
        {
            [currentViewController presentViewController:viewController animated:YES completion:nil];

        }
        else if (localPlayer.isAuthenticated)
        {
            NSLog(@"Player authenticated");

            /* Your custom methods here
            Sends username to my server -- send localPlayer.playerID to your server
            if (game center username doesnt exist)
            {
            Add their username to my sql database
            }
            else if (username does exist)
            {
            Send sign in successful message to device.
            }
            */   
        }
        else
        {
            NSLog(@"Player not authenticated");
            //disableGameCenter
        }
        NSLog(@"Error: %@",error);

    }; 
```

# ios - 有没有办法在 MonoTouch 中制作原生可可类库？

> ID：14805211
> 
> 赞同：4
> 
> 时间：2013-02-11T02:48:51.387
> 
> 标签：ios, cocoa-touch, xamarin.ios, class-library

我知道 MonoTouch 将代码编译为本机机器代码。有没有使用 MonoTouch 制作本机 (.a) 类库？为了清楚起见，我不希望在两者之间共享代码，因为我知道这是不可能的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T07:53:43.567

I believe it might be possible, but it would be hard work, and it's a long way from shrink-wrapped out-of-the-box functionality.

For reference, take a look through the answers on [Is there a way to mix MonoTouch and Objective-C?](https://stackoverflow.com/questions/1522260/is-there-a-way-to-mix-monotouch-and-objective-c) - that question is about how to bootstrap and then call into mt from an obj-c application. I think the same approach would just about work for a .a library.

# javascript - Javascript 状态循环

> ID：14805213
> 
> 赞同：0
> 
> 时间：2013-02-11T02:49:03.573
> 
> 标签：javascript, loops

好的，javascript 中的简单事情，我什至在网上搜索都无法解决。我想我什至找到了正确的东西，但无法放在正确的位置。

此代码告诉我流是在线还是离线。但是我该如何处理状态并保持每 5 秒更新一次呢？

```
$(function () {
    $.ajax({
        type: 'GET',
        url: "http://xmychannelx.api.channel.livestream.com/2.0/livestatus.json?callback=?",
        dataType: 'jsonp',
        success: function (jsonp) {
            // parse the JSON data on success
            var channel = eval(jsonp);
            liveChannel = channel.channel.isLive;

            if (liveChannel == true) {
                document.getElementById('mydiv').innerHTML = '<p style="color: #00FF00">Online!</p>';
            } else {
                document.getElementById('mydiv').innerHTML = '<p style="color: #C0C0C0">Offline!</p>';
            }

        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T02:51:50.440

使用设置超时功能

```
setTimeout(function(){
  //your function
  foo();
},1000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T02:53:13.627

例子 ：

```
var myAjaxCall = function() {
$.ajax({
    type: "GET",
    url: options.feedUrl,
    dataType: "xml",
    async:options.sync,
    success: function(xml) {
        // todo
    }
};

var ResInterval = window.setInterval(myAjaxCall, 60000); // 60 seconds 
```

停止：

```
window.clearInterval(ResInterval); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T02:54:26.200

试试这个：

```
function checkStatus() {
    $.ajax({
        type: 'GET',
        url: "http://xmychannelx.api.channel.livestream.com/2.0/livestatus.json?callback=?",
        dataType: 'jsonp',
        success: function (jsonp) {
            // parse the JSON data on success
            var channel = eval(jsonp);
            liveChannel = channel.channel.isLive;

            if (liveChannel == true) {
            document.getElementById('mydiv').innerHTML = '<p style="color: #00FF00">Online!</p>';
             } else{
                document.getElementById('mydiv').innerHTML = '<p style="color: #C0C0C0">Offline!</p>';
            }
        }
    });
}

$(function() {
    setInterval(checkStatus, 5000);
}); 
```

这将`checkStatus`每 5000 毫秒（5 秒）调用一次函数。

# asp.net - 使用 Microsoft 的 WebAPI，是否可以在一个控制器中拥有多个 POST 方法？

> ID：14805215
> 
> 赞同：1
> 
> 时间：2013-02-11T02:49:39.453
> 
> 标签：asp.net, asp.net-mvc-4, asp.net-web-api

我注意到脚手架创建的方法称为 POST 并且上面没有 [HttpPost] 属性。如果我想创建多个 POST 方法，比如在我的情况下，我想要一个名为“Register”的控制器，并且我想要一个名为“RegisterAttendee”的方法和另一个名为“RegisterSpeaker”的方法。我希望它们具有不同的保护级别，所以我想要两个不同的方法调用。

使用具有 [HttpPost] 属性的平面旧 MVC 控制器之类的 WebAPI 是否可行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T03:43:19.273

是的，您可以使用 [httppost] 属性在控制器中定义多个帖子。但是，当您的方法名称不以 Post 开头时，您只需要使用该属性。您可以通过不同数量的参数和/或通过在配置中定义路由来区分不同的 Post 调用。

希望这可以帮助。

# objective-c - 使用 xib 初始化视图

> ID：14805217
> 
> 赞同：1
> 
> 时间：2013-02-11T02:49:43.603
> 
> 标签：objective-c, xib, nib

我想用 xib 初始化一个视图。那是一个 UIView。所以我有一个 xib 和一个 UIView 子类，下面粘贴了初始化代码（initWitFrame nibName）。创建视图时，我将 xib 名称从视图控制器提供给初始化代码。

```
SubclassUIView *view = [[SubclassUIView alloc]initWithFrame:self.view.bounds nibName:@"xibName"]; 
```

我在正确的轨道上吗？到目前为止，xib 的内容并未随视图一起加载。

顺便说一下，xib 中的主视图设置为我的 UIView 子类的类类型。

```
- (id)initWithFrame:(CGRect)frame nibName:(NSString*)nibName
{
    self = [super initWithFrame:frame];
    if (self)
    {
        [[NSBundle mainBundle] loadNibNamed:nibName owner:self options:nil];
        [self addSubview:self.view];
    }
    return self;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-22T12:06:50.733

从 NSBundle 返回的是一个 NSArray（视觉控件，主要是 UIViews）。Appart的代码似乎是正确的。看一个有效的例子：

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {

        NSArray* nibViews = [[NSBundle mainBundle] loadNibNamed:@"TestView" 
                                                          owner:self 
                                                        options:nil];

        UIView* mainView = (UIView*)[nibViews objectAtIndex:0];

        [self addSubview:mainView];
    }
    return self;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-13T18:09:58.423

@Mike M：这种行为可能会导致随机崩溃。有时一个 NSApplication 对象会是 firstObject -> crash

苹果文档： [https ://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/LoadingResources/CocoaNibs/CocoaNibs.html](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/LoadingResources/CocoaNibs/CocoaNibs.html)

“无法保证 nib 加载代码调用对象的 awakeFromNib 方法的顺序。在 OS X 中，Cocoa 尝试最后调用 File's Owner 的 awakeFromNib 方法，但不保证该行为。如果您需要在在加载 nib 文件时，最合适的时间是在您的 nib-loading 调用返回之后。此时，所有对象都已创建、初始化并准备好使用。

# r - sqldf 和 rmysql 的区别？

> ID：14805218
> 
> 赞同：1
> 
> 时间：2013-02-11T02:49:44.290
> 
> 标签：r, rmysql, sqldf

[sqldf](https://code.google.com/p/sqldf/)和[RMySQL](http://cran.r-project.org/web/packages/RMySQL/RMySQL.pdf)都是允许访问 MySQL 数据库的 R 包（前者使用后者）。它们都允许这样的语句：

RMySQL：“运行任意 SQL 语句并提取其所有输出（返回 data.frame）：”

```
dbGetQuery(con, "select count(*) from a_table")
dbGetQuery(con, "select * from a_table") 
```

sqldf：

```
library(sqldf)
sqldf("select * from iris limit 5")
sqldf("select count(*) from iris")
sqldf("select Species, count(*) from iris group by Species")
# create a data frame
DF <- data.frame(a = 1:5, b = letters[1:5]) 
```

那么有什么区别呢？sqldf 提供了 RMySQL 不提供的什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-11T02:56:42.313

`sqldf`用于发出 SQL 语句，并让它们作用于数据帧。 `iris`不是数据库表，而是内置数据集。

```
> head(iris, n=3)
  Sepal.Length Sepal.Width Petal.Length Petal.Width Species
1          5.1         3.5          1.4         0.2  setosa
2          4.9         3.0          1.4         0.2  setosa
3          4.7         3.2          1.3         0.2  setosa 
```

`sqldf`不用于连接数据库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T04:11:10.353

Besides the observation by Lundberg that dataframes are acceptable targets for SQL-commands, there is also the point that `sqldf` can go against any (disk-resident) table in SQLite (the default), H2, MySQL, or postgresSQL: [https://code.google.com/p/sqldf/](https://code.google.com/p/sqldf/)

# android - 无法基于 Atom x86 Sysytem Image 为 Android 2.3.3 创建 AVD

> ID：14805220
> 
> 赞同：2
> 
> 时间：2013-02-11T02:50:07.047
> 
> 标签：android, android-emulator

我通过 Android SDK Manager 下载了 Intel Atomx86 System Image (Intel Corporation) – API Level 10，还安装了 HAXM Extra。HAXM 运行正常。但是当我想创建一个 AVD 时，我在目标下拉列表中找不到 Intel Atomx86 System Image (Intel Corporation) – API Level 10 选项。所以我可以只选择 Android 2.3.3 - API Level 10 系统映像并为 CPU/ABI 选择 Intel Atom (x86)，但我刚刚收到此消息“[2013-02-11 10:27:28 - SDK Manager] Unable为 ABI x86 找到一个 'userdata.img' 文件以复制到 AVD 文件夹中。” 在console.I也下载了我下载的Intel Atomx86 System Image (Intel Corporation) – API Level 17，适用于Android4.2，找不到具体的System Image。我选择 Android 4.2 - API Level 17 系统映像并为 CPU/ABI 选择 Intel Atom (x86)，那么我可以成功创建该 AVD。如何基于 Atom x86 系统映像为 Android 2.3.3 创建 AVD？为什么事情不会像英特尔文档中所说的那样发生[http://software.intel.com/en-us/articles/installing-the-intel-atom-tm-android-x86-emulator-image-add-on-from-the-android-sdk-manager](http://software.intel.com/en-us/articles/installing-the-intel-atom-tm-android-x86-emulator-image-add-on-from-the-android-sdk-manager) ？有什么帮助吗？顺便说一句，我已经使用了最新的 ADT。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T20:41:26.383

似乎版本 2.3.3 已将文件错误地放置到内部目录中。假设您已经下载了 x86 映像，请在 sdk/system-images/android-10/x86 目录中创建链接（我使用 'ln -s' 创建符号）。这是我的目录的样子：

```
Rafaels-MacBook-Pro:x86 rafa$ pwd
/Users/rafa/Mobile/Android_adt-bundle-mac-x86_64/sdk/system-images/android-10/x86

Rafaels-MacBook-Pro:x86 rafa$ ls -l
-rw-r--r--@  1 rafa  staff   6148 Feb 18 17:07 .DS_Store
-rw-r--r--   1 rafa  staff   2491 Feb 18 04:40 ReleaseNotes.txt
lrwxr-xr-x   1 rafa  staff     21 Feb 18 17:05 build.prop -> images/x86/build.prop
drwxr-xr-x   3 rafa  staff    102 Feb 18 04:40 docs
-rw-r--r--   1 rafa  staff    181 Feb 18 04:40 hardware.ini
drwxr-xr-x   3 rafa  staff    102 Feb 18 04:40 images
lrwxr-xr-x   1 rafa  staff     22 Feb 18 17:05 kernel-qemu -> images/x86/kernel-qemu
-rw-r--r--   1 rafa  staff    233 Feb 18 04:40 manifest.ini
lrwxr-xr-x   1 rafa  staff     22 Feb 18 17:05 ramdisk.img -> images/x86/ramdisk.img
drwxr-xr-x   9 rafa  staff    306 Feb 18 04:40 skins
-rw-r--r--   1 rafa  staff  13180 Feb 18 04:40 source.properties
lrwxr-xr-x   1 rafa  staff     21 Feb 18 17:06 system.img -> images/x86/system.img
lrwxr-xr-x   1 rafa  staff     23 Feb 18 17:04 userdata.img -> images/x86/userdata.img 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-29T21:35:25.353

注意到此处列出的问题后，我们修复了 SDK 存储库中的系统映像。如果您打开 SDK 管理器并安装适用于 API 10 的英特尔 x86 系统映像的修订版 2，它现在应该可以正常工作，而无需四处移动文件。尽管存在打包问题，但系统映像是相同的。模拟器会显示“Android 2.3.7”（Android 2.3.3 和 2.3.7 都是 API 10。）

# windows-8 - 在不运行应用程序的情况下以固定间隔更新动态磁贴

> ID：14805223
> 
> 赞同：1
> 
> 时间：2013-02-11T02:51:09.607
> 
> 标签：windows-8, microsoft-metro, winjs, live-tile

如何使用 JavaScript 以固定的时间间隔（例如半天）更新我的应用程序的动态磁贴？

此外，即使应用程序本身没有运行，它也必须能够更新（例如天气应用程序）

编辑：我想在本地更新它而不必连接到互联网。请在 JavaScript 中给出一些示例，而不是 C#！

更具体地说，例如，如何将磁贴设置为每天更新一次，显示当前日期？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T05:00:02.217

如果磁贴上的内容将是日期，计划磁贴更新是一个不错的选择（请参阅MSDN 上[`ScheduledTileNotification`](http://msdn.microsoft.com/en-us/library/windows/apps/hh701637.aspx?cs-save-lang=1&cs-lang=javascript#code-snippet-1)的[JavaScript 预定通知示例](http://code.msdn.microsoft.com/windowsapps/Scheduled-notifications-da477093/sourcecode?fileId=50990&pathId=1472032281)）。您可以安排以日期为内容的通知每天发生一次。

如果您可以建立 Web 服务，定期更新将是一个不错的选择。使用这种方法，无论应用程序是否正在运行，磁贴都会以固定的时间间隔更新。或者，您可以使用推送，或使用后台任务更新磁贴。

MSDN 有一篇关于选择正确的通知传递机制的好文章，以及相关代码示例的链接：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh779721.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh779721.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T04:46:58.383

您可以按计划使用后台任务，间隔时间超过 15 分钟。这些任务被设计为由与您的应用程序分开的操作系统运行，因此如果它不活动或未打开，则会执行。这是关于后台任务入门的详细博客文章：[http ://www.silverlightshow.net/items/Windows-8-metro-make-your-app-alive-with-background-tasks.aspx](http://www.silverlightshow.net/items/Windows-8-metro-make-your-app-alive-with-background-tasks.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-27T13:40:41.803

注册一个每 12 小时执行一次的后台任务并更新您的磁贴。

```
var RegisterBackgroundTask = function (taskEntryPoint, taskName, trigger, condition) {
    UnregisterTask(taskName);
    Windows.ApplicationModel.Background.BackgroundExecutionManager.requestAccessAsync();

    var TaskBuilder = new Windows.ApplicationModel.Background.BackgroundTaskBuilder();

    TaskBuilder.name = taskName;
    TaskBuilder.taskEntryPoint = taskEntryPoint;
    TaskBuilder.setTrigger(trigger);

    if (condition !== null) {
        TaskBuilder.addCondition(condition);
        // If the condition changes while the background task is executing then it will be canceled.
        TaskBuilder.cancelOnConditionLoss = true;
    }

    var task = TaskBuilder.register();

    // Remove previous completion status from local settings.
    var settings = Windows.Storage.ApplicationData.current.localSettings;
    settings.values.remove(taskName);
};

var UnregisterBackgroundTask = function (sTaskName) {
    var iter = Windows.ApplicationModel.Background.BackgroundTaskRegistration.allTasks.first();
    var hascur = iter.hasCurrent;
    while (hascur) {
        var cur = iter.current.value;
        if (cur.name === sTaskName) {
            cur.unregister(true);
        }
        hascur = iter.moveNext();
    }
} 
```

像这样注册任务：

```
RegisterTask(
                    "App_JS\\LiveTileTask.js",
                    "Task.LiveTileTask",
                    new Windows.ApplicationModel.Background.TimeTrigger(15, false),
                    new Windows.ApplicationModel.Background.SystemCondition(Windows.ApplicationModel.Background.SystemConditionType.internetAvailable));  // 15 min are minimum 
```

在专用文件“LiveTileTask.js”中，您编写 Live Tile Updater 的代码：

```
(function () {
    "use strict";

    importScripts("//Microsoft.Phone.WinJS.2.1/js/base.js");
    var backgroundTaskInstance = Windows.UI.WebUI.WebUIBackgroundTaskInstance.current;

    var Notifications = Windows.UI.Notifications;
    var tileUpdateManager = Notifications.TileUpdateManager.createTileUpdaterForApplication();
    tileUpdateManager.clear();
    tileUpdateManager.enableNotificationQueue(true);

    for (var i = 0; i < 6; i++) {
        var tileWideXml = Notifications.TileUpdateManager.getTemplateContent(Notifications.TileTemplateType.tileSquare150x150Text04),
            tileAttributes = tileWideXml.getElementsByTagName("text");
        tileAttributes[0].appendChild(tileWideXml.createTextNode("My Live Tile Text No. " + i));

        var currentTime = new Date(),
            dueTime = new Date(currentTime.getTime() + 30),
            tileNotification = new Notifications.ScheduledTileNotification(xmlTile, dueTime),
            tileUpdater = Notifications.TileUpdateManager.createTileUpdaterForApplication();

        tileUpdater.addToSchedule(tileNotification);
    }

    backgroundTaskInstance.succeeded = true;
    close();
})(); 
```

最后不要忘记在你的 appxmanifest 中注册 backgroundtask。在“声明”下选择“后台任务”并激活“计时器”并将“起始页”设置为“App_JS\LiveTileTask.js”。这样你应该能够更新你的瓷砖。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T04:21:09.017

您使用 Azure 和推送通知向所有应用程序用户发送通知：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh465460.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh465460.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-11T15:22:08.243

我建议您创建一个**Azure 移动服务**。它非常简单且便宜，意味着您可以获得单独推送服务（而不是设备上的预定磁贴通知）的所有优势来发送您的推送通知，但无需完成所有工作。如果您愿意，可以注册免费试用并免费创建多达 10 个移动服务。您只需创建一个移动服务，然后创建一个每 12 小时运行一次的计划脚本，并在脚本中编写一些服务器端 JavaScript 代码来执行您的推送。这只是移动服务为您提供的其中一项功能。您还可以获得数据、身份验证等。www.windowsazure.com

# javascript - “mouseup”和“click”事件有什么区别？

> ID：14805225
> 
> 赞同：41
> 
> 时间：2013-02-11T02:51:24.037
> 
> 标签：javascript, jquery

使用 jQuery，我经常喜欢将`mousedown`和`mouseup`事件结合起来用于可按下的按钮。

但是，在每种情况下，我都使用了该`mouseup`事件，而是绑定该`click`事件似乎会产生相同的结果。

以下两种方法有什么实质性区别吗？

```
// Method 1
$('.myButton').bind('click', callback);

// Method 2
$('.myButton').bind('mouseup', callback); 
```

*请注意，我正在寻求有关使用这两种方法之间差异的技术解释。这与被标记为欺骗的问题无关：[区分点击与鼠标按下/鼠标](https://stackoverflow.com/questions/12572644/differentiate-click-vs-mousedown-mouseup)*

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2013-02-11T02:52:46.690

使用 mouseup 事件，您可以单击屏幕上的其他位置，按住单击按钮，然后将指针移动到 mouseup 元素，然后释放鼠标指针。

单击事件需要在该元素上发生 mousedown 和 mouseup 事件。

正常的期望是单击需要 mousedown 和 mouseup 事件，所以我建议单击事件。

从可能的重复中，mouseup 和 mousedown 事件似乎也可能由鼠标按钮而不是左键单击按钮引起。这与一般用户所期望的非常不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-04-18T05:37:00.590

我认为 Mouse Down 和 Mouse Up 事件可以让您进一步控制 click 事件。它将点击事件分成另外两个事件，以便可以为每个事件编码更多细节。单击事件限制鼠标单击并强制您在同一函数中编写两个事件。

如果您尝试进行自己的拖动行为，您可以理解此限制。

1.  拖动需要鼠标按下事件才能开始拖动行为。你不能用点击事件来做到这一点。而且由于您需要一个单独的鼠标按下事件。单独的鼠标向上事件的要求变得很明显。
2.  一旦开始拖动（您尚未释放鼠标按钮），您需要对象根据光标位置更改位置。这也只需要在鼠标按下事件中进行编码。

但是，如果我们可以改变人们拖动对象的方式，您也可以使用点击事件。例如，click-1 开始拖动，click-2 停止拖动并将对象放在另一个位置。但是我看到了两个问题：

1.  它看起来不自然。就像在现实世界中一样，我们习惯于按下对象并拖动它。
2.  仅通过单击和鼠标移动来移动繁重的图形可能是过程密集型的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-03T00:07:26.230

我的理解是“点击”隐藏了很多复杂性（例如确保鼠标按下/向上发生在同一个元素上，用 ESC/右键单击取消）。应该首选使用“click”而不是“mousedown/up”。

一种情况是，当应用程序经常更新内容时，“点击”似乎不起作用，以至于底层 DOM 元素被替换。在这种情况下，不会触发“点击”，可能会导致客户体验不佳。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T02:55:13.547

影响我编码方式的最大区别是： HTML 标记`click`上的事件`a`负责更改 URL。相反，`mousedown`and`mouseup`事件不会实现这一点

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-06T20:43:19.803

我想添加其他答案，即`click`事件在*启用触摸的*设备上有效，而`mouseup`/`mousedown`不（显然是因为没有“鼠标”）

请注意，触摸设备上的事件有[300 毫秒的延迟。](https://stackoverflow.com/a/9634715/104380)`click`

# mysql - mysql 无法启动 - innoDB：数据库未正常关闭

> ID：14805226
> 
> 赞同：0
> 
> 时间：2013-02-11T02:51:26.610
> 
> 标签：mysql

我办公室的mysql服务器突然宕机，无法启动。我使用了 XAMPP。当查看日志时，它显示如下：

```
130211  9:45:04 [Note] Plugin 'FEDERATED' is disabled.
130211  9:45:04 InnoDB: The InnoDB memory heap is disabled
130211  9:45:04 InnoDB: Mutexes and rw_locks use Windows interlocked functions
130211  9:45:04 InnoDB: Compressed tables use zlib 1.2.3
130211  9:45:04 InnoDB: Initializing buffer pool, size = 16.0M
130211  9:45:04 InnoDB: Completed initialization of buffer pool
130211  9:45:04 InnoDB: highest supported file format is Barracuda.
InnoDB: The log sequence number in ibdata files does not match
InnoDB: the log sequence number in the ib_logfiles!
130211  9:45:04  InnoDB: Database was not shut down normally!
InnoDB: Starting crash recovery.
InnoDB: Reading tablespace information from the .ibd files...
InnoDB: Restoring possible half-written data pages from the doublewrite
InnoDB: buffer... 
```

有谁知道为什么会这样？我真的需要建议，我的老板生气了.. :D

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T03:08:07.567

这是崩溃后的正常输出。InnoDB 旨在在这些情况下自动恢复，但可能需要一些时间。通常是几分钟，但如果崩溃发生在内存中有数千页已修改数据并且磁盘速度很慢时，则可能是几小时。

尽管@tadman 说了什么，但它不一定会破坏您的数据。InnoDB 在大多数情况下可以自行恢复，不会丢失数据。

InnoDB 有可能在崩溃中被更严重地损坏，并且它可能无法在所有情况下恢复。但是您显示的错误日志输出未显示任何不可恢复损坏的报告。崩溃后启动 MySQL 服务时，这些消息是正常输出的。等待它完成，直到它显示“准备连接”，然后连接并执行一些临时查询以检查数据是否对您来说正确。

至于造成坠机的原因，可能的原因有很多。例如，如果您突然关闭计算机电源，就会发生这种情况。或者如果你杀死了 MySQL 服务。您在另一条评论中询问了病毒。理论上，病毒可以故意杀死 MySQL 服务。

或者可能是由于 MySQL 中的软件错误。

没错——所有软件都包含错误！你的老板可能会生气，他甚至可以要求放弃 MySQL 并切换到其他数据库。但是世界上没有任何数据库软件可以 100% 避免导致崩溃的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T02:55:28.587

您通过硬崩溃破坏了服务器的 InnoDB 表。有时您需要调整设置`my.cnf`以启用[恢复模式](http://dev.mysql.com/doc/refman/5.5/en/forcing-innodb-recovery.html)。通常这些表处于只读模式，因此您必须进行备份，清除 MySQL 数据目录，并重新初始化 MySQL 以`mysql-install-db`从头开始。

这应该作为备份任何和所有重要数据的提醒。

# java - 如何从 Java 数据库打印 MAX 和描述

> ID：14805228
> 
> 赞同：1
> 
> 时间：2013-02-11T02:51:57.110
> 
> 标签：java, sql

我开始学习如何通过 Java 程序连接到数据库。我有一个名为 City 的表，它只包含两列：CityName 和 Population。我想找到最高的人口，然后给出该人口以及相应城市的名称。

我知道如何获得最多的人口（见下文，我知道这可能并不理想，但至少对我有用）：

```
 double max = 0.0;
            String sqlStatement = "SELECT MAX(Population) FROM City"; 
            ResultSet result = stmt.executeQuery(sqlStatement);
            if (result.next())
            {
                   highest = result.getDouble(1);
            }
            System.out.printf("Highest population: %,.0f", highest); 
```

我很确定要获得最高人口加上相应城市的名称，我的 Sql 语句应该 eb 更改为：

`"SELECT CityName, MAX(Population) FROM City GROUP BY CityName";`

但除此之外，我无法让它发挥作用。我想我可以添加类似的东西

`String highestCity = result.getString(2)`

然后将highestCity 添加到System.out.printf 输出行，但这不起作用。

任何人都可以帮忙吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T03:05:27.050

这个怎么样 ？

```
 String sqlStatement = "SELECT CityName, Population FROM City WHERE Population IN (SELECT MAX(Population) FROM City)"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T03:02:58.453

您希望按人口降序对结果进行排序，并将查询限制为仅返回一个结果。就像是：

```
SELECT * FROM city ORDER BY population DESC LIMIT 1; 
```

# objective-c - 当我用大视图替换占位符 NSView 时，窗口无法适应

> ID：14805231
> 
> 赞同：0
> 
> 时间：2013-02-11T02:52:39.923
> 
> 标签：objective-c, macos, cocoa

我有一个带有按钮的小窗口和一个小的占位符 cusom NSView，当单击该按钮时，我将自定义视图与另一个从 xib 文件创建的视图一起重新创建。

新视图显示良好，但由于窗口尺寸较小而被裁剪。我怎样才能使窗户变宽，以便我的新视图适合..

// 这段代码写在控制器内部 _connectWindow 是指向我的窗口的指针，其中有一个按钮和 _custom 占位符。_progView 是我从 xib 文件加载的 NSView

```
 -(IBAction)connect:(id)sender
     {
     if(!_progView)
     {
       [NSBundle loadNibNamed:@"ConnectionStatusView" owner:self];               
     }           

     [[_connectionWindow contentView] replaceSubview:_custom with:_progView]; 
```

我希望得到更具体的回应，我已经阅读了这篇文章[http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaViewsGuide/WorkingWithAViewHierarchy/WorkingWithAViewHierarchy.html](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaViewsGuide/WorkingWithAViewHierarchy/WorkingWithAViewHierarchy.html)但它并没有太大帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T02:58:43.283

我认为你不需要`replaceSubview:with:`这里。看起来你应该只是使用[`addSubview:`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSView_Class/Reference/NSView.html#//apple_ref/doc/uid/20000014-BBCCCEII). [`setFrame:display:`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSWindow_Class/Reference/Reference.html#//apple_ref/doc/uid/20000013-BCICJEFA)您可以通过设置其 frame:或来调整窗口大小`setFrame:display:animate:`。

# java - 在spring中使用.properties而不使用xml配置

> ID：14805232
> 
> 赞同：3
> 
> 时间：2013-02-11T02:52:46.547
> 
> 标签：java, spring

[我从这篇](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-java-composing-configuration-classes)文章中找到了一种在 spring 中使用基于 Java 的配置和 xml 时使用 .properties 文件的方法。插图如下。我的问题是“**有没有办法只使用基于 Java 的配置而不使用 xml 文件来使用 .properties 文件？** ”

即有没有办法`@ImportResource`在下面的代码中省略并使用纯基于Java的配置？

```
@Configuration
@ImportResource("classpath:/com/acme/properties-config.xml")
public class AppConfig {
   private @Value("${jdbc.url}") String url;
   private @Value("${jdbc.username}") String username;
   private @Value("${jdbc.password}") String password;

   public @Bean DataSource dataSource() {
      return new DriverManagerDataSource(url, username, password);
   }
} 
```

属性-config.xml

```
<beans>
   <context:property-placeholder location="classpath:/com/acme/jdbc.properties"/>
</beans> 
```

jdbc.properties

```
jdbc.url=jdbc:hsqldb:hsql://localhost/xdb
jdbc.username=sa
jdbc.password= 
```

示例主要方法

```
public static void main(String[] args) {
   ApplicationContext ctx = new AnnotationConfigApplicationContext(AppConfig.class);
   TransferService transferService = ctx.getBean(TransferService.class);
   // ...
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T04:10:35.153

try like this

```
@Configuration
@PropertySource("/app.properties")
public class Test {
    @Value("${prop1}")
    String prop1;

    @Bean
    public static PropertySourcesPlaceholderConfigurer getPropertySourcesPlaceholderConfigurer() {
        return new PropertySourcesPlaceholderConfigurer();
    }
} 
```

or using Environment

```
@Configuration
@PropertySource("/app.properties")
public class Test {
    @Autowired
    Environment env;

    @Bean
    public DataSource dataSource() {
        return new DriverManagerDataSource(env.getProperty("url"), env.getProperty("username"), env.getProperty("password"));
    }
} 
```

read this article [http://blog.springsource.org/2011/02/15/spring-3-1-m1-unified-property-management/](http://blog.springsource.org/2011/02/15/spring-3-1-m1-unified-property-management/) for more info

# php - sql语句选择最后一个条目中字段的值

> ID：14805235
> 
> 赞同：0
> 
> 时间：2013-02-11T02:53:32.493
> 
> 标签：php, mysql

我创建了一个 mysql 数据库表，它有两个字段，`serial # (primary key, auto increment)`并且`version.`

我想要做的是对于我对该数据库执行的每次插入，将`version`值设置为 1，然后设置为 2、3、4、5，然后再次返回到 1。

我可以想象通过在插入之前拉出表中的最后一个条目来做到这一点。我怎样才能做到这一点？有没有更简单的方法？我正在使用 PHP。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T02:59:36.600

您可以使用内置的 MySQL 触发器：[http ://dev.mysql.com/doc/refman/5.0/en/triggers.html](http://dev.mysql.com/doc/refman/5.0/en/triggers.html)

您可以创建一个数据库触发器来执行您想要的操作。语法是这样的：

```
CREATE
TRIGGER `event_name` BEFORE/AFTER INSERT/UPDATE/DELETE
ON `database`.`table`
FOR EACH ROW BEGIN
    -- trigger body
    -- this code is applied to every
    -- inserted/updated/deleted row
END; 
```

**编辑：**

触发器直接在数据库端创建。您可以使用 MySQL CLI 或 PHPMyAdmin 进行连接以运行查询。

此外，一个懒惰的解决方案可能是使用类似于 aaaaaa123456789 建议的查询：

```
SELECT (
    (SELECT version FROM <table name here> ORDER BY id DESC LIMIT 0, 1) % 5
) + 1 as version; 
```

模 (%) 运算符返回两个数字除法的其余部分，可用于限制增量。

前任。：

```
 1 % 5 = 1
 2 % 5 = 2
 3 % 5 = 3
 5 % 5 = 0
 7 % 5 = 2 
10 % 5 = 0 
```

PS.：我没有尝试过这个查询，因为我不在我的开发机器上，但在我看来它有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T03:02:34.390

正如 rcdmk 建议的那样，最简单的方法是在数据库本身中编写一个触发器，用相应的值更新版本字段。

如果触发器出于某种原因刚刚超出窗口，那么您可以只`SELECT version FROM <table name here> ORDER BY id DESC LIMIT 0, 1`获取最后一个值。实际上，将其括起来（如将其放在括号之间）并将其作为插入值发送`1 + (query here)`到`INSERT`查询可能是最好的方法，因为它避免了竞争条件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T03:03:11.487

```
$next_increment     = 0; 
$qShowStatus         = "SHOW TABLE STATUS LIKE 'yourtable'"; 
$qShowStatusResult     = mysql_query($qShowStatus) or die ( "Query failed: " . mysql_error() . "<br/>" . $qShowStatus ); 

$row = mysql_fetch_assoc($qShowStatusResult); 
$next_increment = $row['Auto_increment']; 
```

# distutils - 将 F2PY 编译步骤翻译成 setup.py

> ID：14805236
> 
> 赞同：6
> 
> 时间：2013-02-11T02:53:43.570
> 
> 标签：distutils, gfortran, f2py

我继承了一个 Fortran 77 代码，它实现了几个子例程，这些子例程通过一个程序块运行，每次运行程序时都需要通过交互式命令提示符进行大量用户输入。由于我想自动运行代码，我将所有子例程移到一个模块中，并通过 F2PY 编写了一个包装器代码。两步编译后一切正常：

```
gfortran -c my_module.f90 -o my_module.o -ffixed-form
f2py -c my_module.o -m my_wrapper my_wrapper.f90 
```

这最终会创建三个文件：`my_module.o`、`my_wrapper.o`、`my_module.mod`和`my_wrapper.so`. 这`my_wrapper.so`是我导入 Python 以访问旧版 Fortran 代码的模块。

我的目标是将此代码包含在更大的科学代码包中，该代码包已经`setup.py`用于`distutils`构建 Cython 模块。暂时完全忽略了 Cython 代码，我应该如何将 2 步构建转换为`setup.py`? 我已经能够弄清楚的关闭看起来像：

```
from numpy.distutils.core import setup, Extension
wrapper = Extension('my_wrapper', ['my_wrapper.f90', ])
setup(
    libraries = [('my_module', dict(sources=['my_module.f90']],
                                    extra_f90_compile_args=["-ffixed-form", ])))],
    ext_modules = [wrapper, ]
) 
```

但是，这不起作用。我的编译器在 . 上抛出了许多警告`my_module.f90`，但它仍然可以编译（如果我使用上面的编译器调用，它不会抛出任何警告）。但是，当它尝试编译包装器时`my_module.mod`，即使它已成功创建，它也找不到 .

有什么想法吗？我有一种感觉，我错过了一些微不足道的东西，但文档似乎不够充实，无法表明它可能是什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-12T08:57:01.503

可能有点晚了，但是您的问题是您在`my_module`构建时没有链接`my_wrapper`：

```
wrapper = Extension('my_wrapper', sources=['my_wrapper.f90'], libraries=['my_module'])

setup(
    libraries = [('my_module', dict(sources=['my_module.f90'],
                                    extra_f90_compile_args=["-ffixed-form"]))],
    ext_modules = [wrapper]
) 
```

如果您只使用`my_module`is for `my_wrapper`，您可以简单地将其添加到 的来源中`my_wrapper`：

```
wrapper = Extension('my_wrapper', sources=['my_wrapper.f90', 'my_module.f90'],
                                  extra_f90_compile_args=["-ffixed-form"])
setup(
    ext_modules = [wrapper]
) 
```

请注意，这也会将所有内容导出`my_module`到 Python 中，这可能是您不想要的。

我正在处理 Python 之外的这种两层库结构，`cmake`用作顶级构建系统。我已经设置好了，以便`make python`调用 distutils 来构建 Python 包装器。s 可以安全地假设所有外部库`setup.py`都已构建和安装。如果想要拥有在系统范围内安装的通用库，然后为不同的应用程序（例如`Python`、`Matlab`、`Octave`、`IDL`......）包装，这种策略是有利的，这些应用程序都有不同的方式来构建扩展。

# asp.net - 从字符串生成条件代码

> ID：14805237
> 
> 赞同：1
> 
> 时间：2013-02-11T02:53:59.620
> 
> 标签：asp.net, vb.net, string, code-generation, conditional

我想生成字符串的条件代码，它将检查字符串。一个例子是下面的字符串 **sampleString = "C123 A091 A111 A122 B120 B309 C000"** 我有条件字符串的例子如下

示例 1： **A123 + B123**我将生成为

```
if sampleString.contains ("A123") And sampleString.contains ("B123") Then
'doSomething
else
'doSomething
end if 
```

示例 2： **A111+A122+(B120/-C123)**

```
if sampleString.contains ("A111") And sampleString.contains ("A122") And (sampleString.contains ("B120") Or Not sampleString.contains ("C123")) Then
'doSomething
else
'doSomething
end if 
```

*   加号 (+) 表示 AND
*   减号 (-) 表示不
*   斜线 (/) 表示或

我可以在 VB.Net 中做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:00:27.693

用于通过查找匹配项并将其替换为 1 或 0`Regex`来解决问题。`Contains`

```
Dim sample As String = "C123 A091 A111 A122 B120 B309 C000"
Dim input As String = "A111 +  A122 + ( B120/- C123)"

Dim nRegex As New Regex("\w+", RegexOptions.IgnoreCase)
Dim nMatches As MatchCollection = nRegex.Matches(input)

For Each nMatch As Match In nMatches

    input = input.Replace(nMatch.Value, IIf(sample.Contains(nMatch.Value), "1", "0"))

Next 
```

现在将您拥有的特殊字符替换为在作为数学表达式评估时实际上可以为您提供正确结果的特殊字符（因为逻辑最初是数学）。

```
input = input.Replace(" ", "")
input = input.Replace("+", "*")
input = input.Replace("/", "+")
input = input.Replace("-1", "0").Replace("-0", "1") 
```

毕竟这你会得到这个表达式：

```
1*1*(1+0) 
```

您现在可以使用此[答案](https://stackoverflow.com/a/6604851/799558)中建议的任何数学评估器。如果你得到的结果大于零意味着它的逻辑`True`。否则`False`

# python - “模块”对象没有属性“getusersitepackages”

> ID：14805239
> 
> 赞同：1
> 
> 时间：2013-02-11T02:54:10.037
> 
> 标签：python, cygwin

我正在阅读[python 教程](http://docs.python.org/2/tutorial/interpreter.html#the-customization-modules)，似乎缺少一些非常基本的东西。该教程有：

```
>>> import site
>>> site.getusersitepackages()
'/home/user/.local/lib/python3.2/site-packages' 
```

但我得到以下信息：

```
$ python
Python 2.6.8 (unknown, Jun  9 2012, 11:30:32) 
[GCC 4.5.3] on cygwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import site
>>> site.getusersitepackages()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'module' object has no attribute 'getusersitepackages' 
```

正如上面所说，我正在`Python 2.6.8`运行`cygwin`.

这是安装错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T02:55:55.853

[根据文档](http://docs.python.org/2/library/site.html#site.getusersitepackages)，这个特性/功能是在 python2.7 中添加的——你仍然在 python 2.6

# python - python中的元组等价

> ID：14805243
> 
> 赞同：0
> 
> 时间：2013-02-11T02:55:13.000
> 
> 标签：python

1.  python中元组等价的定义是什么？
2.  如果两个元组无论顺序如何都具有相同的元素，它们是等价的元组吗？

我查看了有关元组等价的python文档，但是描述不是很清楚。 [http://docs.python.org/2/tutorial/datastructures.html](http://docs.python.org/2/tutorial/datastructures.html)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-11T02:58:22.100

这些东西是在[语言参考](http://docs.python.org/2/reference/expressions.html#not-in)中定义的，而不是在教程中。

> 元组和列表使用对应元素的比较按字典顺序进行比较。这意味着要比较相等，每个元素必须比较相等，并且两个序列必须是相同的类型并且具有相同的长度。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-11T02:56:51.317

如果按顺序排列的元组中的项目相等，则两个元组相等。

# icalendar - 如何为移动到相邻工作日的假期制作 iCal 提要？

> ID：14805248
> 
> 赞同：0
> 
> 时间：2013-02-11T02:56:01.103
> 
> 标签：icalendar, rfc2445, rfc5545

我正在尝试为不需要每年更新的工作假期制作 iCal 提要（ [RFC 2445 ），方法是根据其定义列出假期，而不是在特定年份出现的日期。](http://www.ietf.org/rfc/rfc2445.txt)

像[阵亡将士纪念日](http://en.wikipedia.org/wiki/Memorial_Day)（五月的最后一个星期一）这样的假期当然不需要任何特殊待遇

```
BEGIN:VEVENT
DTSTAMP:20130210T211949Z
UID:20130210-memorial-day@usa.gov
DTSTART;VALUE=DATE:20130527
DTEND;VALUE=DATE:20130527
SUMMARY:Memorial Day
RRULE:FREQ=YEARLY;BYMONTH=5;BYDAY=-1MO;WKST=SU
END:VEVENT
```

...但是当谈到像元旦这样的基于日期的假期时，如何在 1 月 1 日的周末对日差进行编码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T08:16:43.790

您应该知道，即使 google 日历遵循 RFC2445，它也已被 RFC5545 淘汰，这使得 EXRULE 已过时（RFC2445 中已[弃用的功能](https://www.rfc-editor.org/rfc/rfc5545#appendix-A.3)）。

在英国新年的情况下，它是：

```
BEGIN:VCALENDAR
VERSION:2.0
METHOD:PUBLISH
PRODID:pyICSParser
BEGIN:VEVENT
DTSTART;VALUE=DATE:20070101
RRULE:FREQ=YEARLY;BYMONTH=1;BYDAY=MO,TU,WE,TH,FR;BYMONTHDAY=1,2,3;BYSETPOS=1
UID:UIDnewyear_SO14805248@stackeroverflow.com
DTSTAMP:19970714T170000Z
SUMMARY: new year
END:VEVENT
END:VCALENDAR 
```

它在谷歌日历、outlook.com(/hotmail/...)、雅虎日历和从谷歌日历同步的 iOS 设备上就像一个魅力。

**更新：美国新年**

这将是 2 RRULE 的组合（RFC 说`SHOULD NOT occur more than once`这似乎留下了 2 RRULE 事件的可能性：

```
RRULE:FREQ=YEARLY;BYMONTH=1;BYDAY=MO,TU,WE,TH,FR;BYMONTHDAY=1,2;BYSETPOS=1
RRULE:FREQ=YEARLY;BYMONTH=12;BYDAY=FR;BYMONTHDAY=-1 
```

Google 日历支持它，但看起来 yahoo 和 hotmail/outlook.com 不支持，因此需要创建 2 个事件（每个 RRULE 一个）。如果需要，使用 RELATED-TO 属性可以帮助跟踪他们的关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T02:56:01.103

**注意：以下答案演示了如何使用*已弃用*的RFC！我把它留作参考，以防有人需要。请参阅正确答案以获取更多有用的事实！**

您可以通过添加相应的每年重复相邻星期五和相邻星期一规则来做到这一点，这些规则仅显示日期具有相应工作日的年份：

```
BEGIN:VEVENT
DTSTAMP:20130210T211949Z
UID:20130210-new-years-day-less-1@usa.gov
DTSTART;VALUE=DATE:20121231
DTEND;VALUE=DATE:20121231
SUMMARY:New Year’s Day (moved from a Saturday)
RRULE:FREQ=YEARLY;BYMONTH=12;BYMONTHDAY=31
EXRULE:FREQ=YEARLY;BYMONTH=12;BYMONTHDAY=31;BYDAY=MO,TU,WE,TH,SA,SU
END:VEVENT
```

```
BEGIN:VEVENT
DTSTAMP:20130210T211949Z
UID:20130210-new-years-day-plus-1@usa.gov
DTSTART;VALUE=DATE:20130102
DTEND;VALUE=DATE:20130102
SUMMARY:New Year’s Day (moved from a Sunday)
RRULE:FREQ=YEARLY;BYMONTH=1;BYMONTHDAY=2
EXRULE:FREQ=YEARLY;BYMONTH=1;BYMONTHDAY=2;BYDAY=TU,WE,TH,FR,SA,SU
END:VEVENT
```

连同原始事件（`BYDAY=MO,TU,WE,TH,FR`如果您不希望实际假期显示在您的提要中，您可以类似地过滤此事件），您可以覆盖所有年份，而不会在不需要移动时间的年份出现误报到工作日：

```
BEGIN:VEVENT
DTSTAMP:20130210T211949Z
UID:20130210-new-years-day@usa.gov
DTSTART;VALUE=DATE:20130101
DTEND;VALUE=DATE:20130101
SUMMARY:New Year’s Day
RRULE:FREQ=YEARLY;BYMONTH=1;BYMONTHDAY=1
END:VEVENT
```

Google 日历愉快地使用并理解我的[示例 iCalendar 提要](https://gist.github.com/johan/5495a70e2fa932da4a8e/raw/281200e28d3e69f39adf96a67aa22787ab9e93ef/groupon-holidays.ics)。不幸的是，当前的 iCal（以及从导入此提要的 Google 日历同步的 iOS 设备）有一些错误（归档为[ 错误 13188350](https://bugreport.apple.com/cgi-bin/WebObjects/RadarWeb.woa/18/wo/XPtEHAitmtWdmmcO7REmeg/11.66) [链接可能仅适用于记者]），并且无法应用指定的工作日过滤器。

但希望这也能很快得到解决。

# linq - 模型重映射和 Linq2SQL

> ID：14805250
> 
> 赞同：0
> 
> 时间：2013-02-11T02:56:25.317
> 
> 标签：linq, linq-to-sql, model, lambda

我正在尽最大努力尝试创建一个模型映射器，该模型映射器通过 Linq2SQL 将任何表达式直接传递回 SQL，到目前为止，我已经设法将表达式树中的所有属性重新映射回原始模型。我遇到的问题是，每当我尝试将表达式树与 Linq2SQL 一起使用时，它都会失败并出现以下错误：

“参数 'modelParamName' 未绑定在指定的 LINQ to Entities 查询表达式中。”

我的代码如下（对于表达式重新映射器 - 我确实有很多扩展函数）：

```
// Converting all members from using TModel to TElement
internal class ExpressionModifier<TModel, TElement> : ExpressionVisitor {

    #region Members

    #region Constructors

    internal ExpressionModifier(IQueryable source) { this.source = source; }

    #endregion

    #region Variables

    private IQueryable source;

    #endregion

    #region Methods

    internal Expression Modify(Expression expression) { var result = this.Visit(expression); return result; }

    protected override Expression VisitParameter(ParameterExpression node) {
        if(node.Type == typeof(TModel)) { return Expression.Parameter(typeof(TElement), node.Name); }
        return base.VisitParameter(node);
    }

    protected override Expression VisitConstant(ConstantExpression node) {
        if(node.Value is IQueryable) { return Expression.Constant(this.source); }
        return base.VisitConstant(node);
    }

    protected override Expression VisitMethodCall(MethodCallExpression node) {
        var arguments = node.Arguments.Select(arg => this.Visit(arg));
        var genericTypes = node.Method.GetGenericArguments().Select(arg=>this.VisitParameter(Expression.Parameter(arg)).Type);
        var newMethod = typeof(Queryable).GetMethods().SingleOrDefault(method => method.MetadataToken == node.Method.MetadataToken);
        return Expression.Call(newMethod.MakeGenericMethod(genericTypes.ToArray()), arguments);         
    }

    protected override Expression VisitLambda<T>(Expression<T> node) {
        var body = this.Visit(node.Body);
        var parameters = node.Parameters.Select(parameter => this.VisitParameter(parameter) as ParameterExpression);
        return Expression.Lambda(body, parameters.ToArray());
    }

    protected override Expression VisitMember(MemberExpression node) {
        var memberName = node.Member.Name;
        var modelAttribute = node.Member.GetAllAttributes().OfType<ModelAttribute>().SingleOrDefault();
        if(modelAttribute != null && modelAttribute.Name.IsNotNull()) { memberName = modelAttribute.Name; }
        var newMember = typeof(TElement).GetAllProperties().SingleOrDefault(property => property.Name == memberName);
        if(newMember != null) { return Expression.MakeMemberAccess(Visit(node.Expression), newMember); }
        return base.VisitMember(node);
    }

    #endregion

    #endregion

} 
```

任何帮助确定我可能做错了什么都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T22:16:39.090

终于弄清楚了哪里出了问题；但这不是我所期望的。在对可以“按原样”传递的查询使用消除过程后，我删除了所有访问方法。这行得通，但是，表达式与我所有的访问方法*完全相同*，但是当添加回来时，查询不起作用。

在我添加回 VisitParameter 方法后，它终于发现它停止工作了。一段时间后，我意识到从 Expression.Parameter 创建一个新的 ParameterExpression 实例，即使具有相同的名称，也是问题所在 - 如果它在相关的表达式块（或更具体地说是范围）中出现不止一次。即使它具有相同的名称，它在实例化时在技术上完全代表一个不同的参数。

例如：

```
param => param + 1 
```

如果您在此处使用 Expression.Parameter(node, "param") 两次，则每个实例完全是不同的变量。这是设计使然吗？表达式树（在同一范围内）中具有相同类型和名称的参数肯定是同一个变量吗？

我解决这个问题的唯一方法是创建一个类型为 string 和 ParameterExpression 的字典，因此如果再次出现相同的命名参数，我将使用先前创建的参数实例。

我现在只需要弄清楚如何让这本字典中的参数只适用于它们自己的范围 - 嗯，如果它太容易我可能会感到无聊。

# java - IDocumentFilter 使用 HashMap 作为字典 Menu ，在 JTextField 上进行验证

> ID：14805251
> 
> 赞同：0
> 
> 时间：2013-02-11T02:56:40.363
> 
> 标签：java, swing, validation, hashmap, jtextfield

我有一个 Hashmap，其中填充了 Sybase 中表中的信息，具有这种结构

-索引 - 字符

----1---- 1234567890

-----2----- abcdefg..

我正在尝试设置一个从 JtextField 扩展的新 CustomJTextField，因此该控件将具有一个名为 MASK 的属性，我可以在此属性中设置 Mask number ，如下所示：

```
 customtextField = new CustomTextField(20);
 customtextField.set_MASK(1); 
```

我已经让 customtextField 使用了一些额外的属性，掩码属性的行为不会让用户写不包含在表中的字母，所以如果 customtextField 设置为 MASK(1)，用户将只能能够只写数字

我需要使用 DocumentFilter 的帮助，或任何建议，我需要从数据库的表中获取字典，（用户要求），

编辑*

通过建议，我试图获取一个 DocumentFilter 的示例，它只允许使用包含在数组中的类型字符（从 HAshMap 创建）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T03:05:09.490

您可能希望改用[文档过滤器](http://docs.oracle.com/javase/tutorial/uiswing/components/generaltext.html#filter)。

这将允许您构建过滤器来限制用户实际键入的内容，而不是依赖于后验证。

[在此处](http://www.jroller.com/dpmihai/entry/documentfilter)查看一些示例

**更新**

这非常简单。使用我链接的示例。我相信您将能够根据您的需要调整它们。

![在此处输入图像描述](../Images/5103b2f18308960f4d659c3d03bf0285.png)

```
public class TestDocumentFilter01 {

    public static void main(String[] args) {
        new TestDocumentFilter01();
    }

    public TestDocumentFilter01() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }

        });
    }

    public class TestPane extends JPanel {

        public TestPane() {
            setLayout(new GridBagLayout());
            GridBagConstraints gbc = new GridBagConstraints();
            gbc.gridwidth = GridBagConstraints.REMAINDER;
            add(createField("1234567890"), gbc);
            add(createField("stackoverflow"), gbc);
            add(createField("abcdefghijklmnopqrstuvwxyz "), gbc);
        }

        protected JTextField createField(String mask) {
            JTextField field = new JTextField(10);
            MaskFilter df = new MaskFilter();
            df.setMask(mask);
            ((AbstractDocument) (field.getDocument())).setDocumentFilter(df);
            return field;
        }

    }

    public class MaskFilter extends DocumentFilter {

        private char[] maskSet;
        private String mask;

        public void setMask(String mask) {
            this.mask = mask;
            this.maskSet = mask.toCharArray();
            Arrays.sort(this.maskSet);
        }

        public String getMask() {
            return mask;
        }

        public void insertString(DocumentFilter.FilterBypass fb, int offset,
                                                         String string, AttributeSet attr)
                        throws BadLocationException {
            StringBuffer buffer = new StringBuffer(string);
            for (int i = buffer.length() - 1; i >= 0; i--) {
                char ch = buffer.charAt(i);
                if (Arrays.binarySearch(maskSet, ch) < 0) {
                    buffer.deleteCharAt(i);
                }
            }
            super.insertString(fb, offset, buffer.toString(), attr);
        }

        public void replace(DocumentFilter.FilterBypass fb,
                                                int offset, int length, String string, AttributeSet attr) throws BadLocationException {
            if (length > 0) {
                fb.remove(offset, length);
            }
            insertString(fb, offset, string, attr);
        }
    }
} 
```

# java - 使用 JScrollPane

> ID：14805256
> 
> 赞同：0
> 
> 时间：2013-02-11T02:57:07.657
> 
> 标签：java, swing, jscrollpane

我的程序需要能够在屏幕上显示未知数量对象的数据。

我正在使用 Netbeans GUI 创建器，但我不知道如何将这些对象的数据显示在`JScrollPane`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T03:02:49.257

你的问题很模糊。您没有提供有关“如何”显示这些对象的任何信息。

首先阅读[如何使用滚动窗格](http://docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html)。

您还应该看看[如何使用列表](http://docs.oracle.com/javase/tutorial/uiswing/components/list.html)和[如何使用表格](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)，它们提供了不同的数据显示方式。

基本上，您需要为滚动提供一个“视图”。这将是您的基础组件，其他组件将添加到该组件上。

# php - Kohana 模型 - 添加其他属性

> ID：14805258
> 
> 赞同：1
> 
> 时间：2013-02-11T02:57:21.257
> 
> 标签：php, class, kohana

我正在尝试向我的 Kohana (v3.3) 模型添加额外的属性。

```
class Model_mymodel extends ORM {
    protected $_myvar = NULL;

    public function set_myvar() {
        $this->_myvar = new Newclass();
    }

    public function get_myvar() {
        return $this->_myvar;
    }
} 
```

然后我尝试设置它

```
$inst = ORM::factory('mymodel', 1)->find();
$inst->set_myvar();
var_dump($inst->get_myvar()); 
```

这将返回 NULL。我不明白为什么这会是一个问题。有什么我想念的吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T10:04:30.993

扩展`__get`方法

```
class Model_mymodel extends ORM {
   protected $_myvar = NULL;

   function __get($name) {
      if ($name === 'myvar'){
         if (!($this->_myvar instanceof Newclass){
            $this->_myvar = new Newclass;
         }
         return $this->_myvar;
      }
      return parent::__get($name);
   }
} 
```

这样，`Newclass`如果它还不存在，它就会自动实例化，一次解决两个问题。

# iphone - 网络在模拟器上工作不适用于 iPhone 设备

> ID：14805259
> 
> 赞同：1
> 
> 时间：2013-02-11T02:57:22.447
> 
> 标签：iphone, ios, afnetworking, simulator

此代码在模拟器上完美运行，写出文件。

但是，在 iPhone 上，它不会将文件写出。

```
DLog(@"");

timeStart  = [NSDate date];

NSURL *url = [NSURL URLWithString:SAT_URL];
NSURLRequest *request = [NSURLRequest requestWithURL:url];

AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];

NSString *path = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:FILE_NAME];
operation.outputStream = [NSOutputStream outputStreamToFileAtPath:path append:NO];

[operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {

    DLog(@"updated words to: %@",path);
    //DLog(@"response: %@",responseObject);

    [self processWords];

} failure:^(AFHTTPRequestOperation *operation, NSError *error) {

    // Deal with failure
}];

[operation start]; 
```

rawWords 和 lines 在设备上都是空的：

```
NSString *path = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:FILE_NAME];
NSString *rawWords = [NSString stringWithContentsOfFile:path encoding:NSUTF8StringEncoding error:nil];
NSArray *lines = [rawWords componentsSeparatedByString:@"\n"]; 
```

这使用 AFNetworking 库，我尝试从不同的主机获取文件。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T03:01:23.267

您不能写入捆绑包（绝对不是在设备上，也许在模拟器中是可能的）。您可以写入一些预定义的目录（缓存、文档）。查看 StackOverflow 上的以下帖子：[NSSearchPathForDirectoriesInDomains 解释混淆](https://stackoverflow.com/questions/7627177/nssearchpathfordirectoriesindomains-explanation-confused)

# javascript - 通过 ajax 包含的 Javascript 未显示在源代码中

> ID：14805262
> 
> 赞同：0
> 
> 时间：2013-02-11T02:58:35.133
> 
> 标签：javascript, jquery, ajax

不是真正的问题，而是更普遍的问题。

假设我有一个由 ajax 调用的 php 脚本……在该 php 脚本中，有更多的 javascript 会在成功时加载到 dom 中……

说javascript运行，一切正常，但源代码没有显示javascript。我知道使用 Firefox，要显示插入 dom 的内容，您需要选择然后“查看选择源”，这将显示动态内容....

为什么从 ajax 调用动态加载的 javascript 没有显示在源代码中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T03:21:58.957

浏览器的“查看页面源代码”功能只会按原样显示主页的源代码，即最初下载的源代码。任何后续的动态添加或操作将仅在内存中执行（例如通过动态添加“<script>”标签或 eval(“some fetched javascript string”)），不会反映在“查看页面源代码”中。

这不是某些人可能认为的“遗留”情况，因为 Web 开发人员在进行故障排除时会希望查看“静态”页面源来验证原始页面是否首先正确呈现。

要查看动态最终结果，可以使用[Firebug 插件](https://addons.mozilla.org/en-US/firefox/addon/firebug/)（在 Firefox 上）或 Chrome 的 Web 开发工具（按 F12）

# php - 获取同一个类的两个不同div的id值

> ID：14805266
> 
> 赞同：0
> 
> 时间：2013-02-11T02:59:14.120
> 
> 标签：php, jquery, ajax, html

好的，我正在制作一个私人消息系统，并且我已将 php 设置为回显具有相同类的 div，但将 id = 设置为行 ID，请检查下面的代码。

```
function Load()
{

$Connect = new mysqli("localhost", "root", "", "Data");
session_start();
$User = $_SESSION['Username'];
$Stats = 'SELECT * FROM Messages WHERE User="'.$User.'"';

if($Result = $Connect->query($Stats))
{
    while($Row = $Result->fetch_assoc())
    {
        $From = $Row['FUser'];
        $Date = $Row['Date'];
        $Title = $Row['Title'];
        $ID = $Row['ID'];

        echo '<div id="'.$ID.'" class="String"><label class="TText" style="cursor:pointer;">From: ' . $From . ' - ' . $Date . ' - ' . $Title .'</label></div>';
    }
} 
```

}

我的查询：

```
$('.String').click(function()
{
    var Msg = $('#MMsg');
    var Back = $('#Back');
    var Str = $('.String');
    Str.fadeOut('fast', function()
    {
        Msg.fadeIn('fast');
        Back.fadeIn('fast');
        var ID = $('.String').attr('id');

        $.ajax
        ({
            url:'MLoad.php',
            type:'POST',
            data:{ID:ID},
            dataType:'json',
            success:function(MText)
            {
                $('#MMBox').html(MText.T);
            }
        });
    });
}); 
```

当我提醒 var ID 时，两个 div 的结果相同，但在 html 中，每个 div 的 ID 不同。即警报框每次都给我第一个ID。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T03:04:42.613

使用 $(this) 获取正在应用淡出的元素的 ID。否则，您只会获得第一个匹配 div 的 ID。

var ID = $(this).attr('id');

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T03:08:54.793

当您处于点击功能时，`this`指的是被点击的项目。因此，您可以使用`$(this).attr('id')`来检索`.String`被点击的 ID。

```
$('.String').click(function()
{
    var id = $(this).attr('id');
    var Msg = $('#MMsg');
    var Back = $('#Back');
    var Str = $('.String');
    Str.fadeOut('fast', function()
    {
        Msg.fadeIn('fast');
        Back.fadeIn('fast');

        $.ajax
        ({
            url:'MLoad.php',
            type:'POST',
            data:{ID:id},
            dataType:'json',
            success:function(MText)
            {
                $('#MMBox').html(MText.T);
            }
        });
    });
}); 
```

# .htaccess - mod_rewrite：通过 %{HTTP_HOST} 将子域重写到目录时出错

> ID：14805267
> 
> 赞同：0
> 
> 时间：2013-02-11T02:59:17.587
> 
> 标签：.htaccess, mod-rewrite, subdomain

# 问题`mod_rewrite`

当谈到 Apache 的`mod_rewrite`. 我已经就此事发布了一个问题，并且已经澄清，但我继续收到错误，我在配置中看不到任何逻辑错误。任何帮助将不胜感激！

`.htaccess`我正在使用的是以下内容：

```
# Begin Rewrite Module for http://*.example.com/
# ==============================================
<IfModule mod_rewrite.c>

    # Turn the rewrite engine on and set the base path.
    RewriteEngine On
    RewriteBase /

    # Map subdomains to their respective directories.
    RewriteCond %{HTTP_HOST} ^([^\.]+)\.example\.com$ [NC]
    RewriteRule ^(.*)$ public_subdomains/%1/$1 [L]

</IfModule> 
```

由于内部重定向太多，这不起作用，导致`500 Internal Server Error`- 这是它的调试日志：

```
[Fri Feb 15 16:49:30.318509 2013] [core:error] [pid 2316:tid 1708] [client 127.0.0.1:9141] AH00124: Request exceeded the limit of 10 internal redirects due to probable configuration error. Use 'LimitInternalRecursion' to increase the limit if necessary. Use 'LogLevel debug' to get a backtrace.
[Fri Feb 15 16:49:30.318509 2013] [core:debug] [pid 2316:tid 1708] core.c(3502): [client 127.0.0.1:9141] AH00121: r->uri = /public_subdomains/sub1/public_subdomains/sub1/public_subdomains/sub1/public_subdomains/sub1/public_subdomains/sub1/public_subdomains/sub1/public_subdomains/sub1/public_subdomains/sub1/public_subdomains/sub1/public_subdomains/sub1/index.php
[Fri Feb 15 16:49:30.318509 2013] [core:debug] [pid 2316:tid 1708] core.c(3508): [client 127.0.0.1:9141] AH00122: redirected from r->uri = /public_subdomains/sub1/public_subdomains/sub1/public_subdomains/sub1/public_subdomains/sub1/public_subdomains/sub1/public_subdomains/sub1/public_subdomains/sub1/public_subdomains/sub1/public_subdomains/sub1/index.php
[Fri Feb 15 16:49:30.318509 2013] [core:debug] [pid 2316:tid 1708] core.c(3508): [client 127.0.0.1:9141] AH00122: redirected from r->uri = /public_subdomains/sub1/public_subdomains/sub1/public_subdomains/sub1/public_subdomains/sub1/public_subdomains/sub1/public_subdomains/sub1/public_subdomains/sub1/public_subdomains/sub1/index.php
[Fri Feb 15 16:49:30.318509 2013] [core:debug] [pid 2316:tid 1708] core.c(3508): [client 127.0.0.1:9141] AH00122: redirected from r->uri = /public_subdomains/sub1/public_subdomains/sub1/public_subdomains/sub1/public_subdomains/sub1/public_subdomains/sub1/public_subdomains/sub1/public_subdomains/sub1/index.php
[Fri Feb 15 16:49:30.318509 2013] [core:debug] [pid 2316:tid 1708] core.c(3508): [client 127.0.0.1:9141] AH00122: redirected from r->uri = /public_subdomains/sub1/public_subdomains/sub1/public_subdomains/sub1/public_subdomains/sub1/public_subdomains/sub1/public_subdomains/sub1/index.php
[Fri Feb 15 16:49:30.318509 2013] [core:debug] [pid 2316:tid 1708] core.c(3508): [client 127.0.0.1:9141] AH00122: redirected from r->uri = /public_subdomains/sub1/public_subdomains/sub1/public_subdomains/sub1/public_subdomains/sub1/public_subdomains/sub1/index.php
[Fri Feb 15 16:49:30.318509 2013] [core:debug] [pid 2316:tid 1708] core.c(3508): [client 127.0.0.1:9141] AH00122: redirected from r->uri = /public_subdomains/sub1/public_subdomains/sub1/public_subdomains/sub1/public_subdomains/sub1/index.php
[Fri Feb 15 16:49:30.318509 2013] [core:debug] [pid 2316:tid 1708] core.c(3508): [client 127.0.0.1:9141] AH00122: redirected from r->uri = /public_subdomains/sub1/public_subdomains/sub1/public_subdomains/sub1/index.php
[Fri Feb 15 16:49:30.318509 2013] [core:debug] [pid 2316:tid 1708] core.c(3508): [client 127.0.0.1:9141] AH00122: redirected from r->uri = /public_subdomains/sub1/public_subdomains/sub1/index.php
[Fri Feb 15 16:49:30.318509 2013] [core:debug] [pid 2316:tid 1708] core.c(3508): [client 127.0.0.1:9141] AH00122: redirected from r->uri = /public_subdomains/sub1/index.php
[Fri Feb 15 16:49:30.318509 2013] [core:debug] [pid 2316:tid 1708] core.c(3508): [client 127.0.0.1:9141] AH00122: redirected from r->uri = / 
```

我找到了一种解决方案，通过替换 RewriteRule 上的`[L]`标志的`[END]`标志，它完美地将请求 URI 映射到子域目录中的相应文件。

不幸的是，它工作得太完美了。当它应该重写为（假设设置为 DirectoryIndex）时，调用`subdomain.example.com/folder/`interally rewrites`example.com/public_subdomains/subdomain/folder/`而不考虑DirectoryIndex。`example.com/public_subdomains/subdomain/folder/index.php``index.php`

如果有人可以帮助我阐明这一点，我将永远感激不尽！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T17:50:52.710

好吧，有一个逻辑错误好吧。[让我向您推荐文档](https://i.stack.imgur.com/8rO3E.png)中精彩的控制流程图：

![关于 mod_rewrite 工作的控制流程图](../Images/f1151ce1ff04c87d1a4ff940f7195cc9.png)

你看，内部重定向也是一个请求，所以它再次被任何和所有重写规则处理。因此，假设用户请求 something.example.com/x: RewriteRule macthes，RewriteCond 已完成，因此进行了到 public_subdomains/something/x 的内部重定向。新的请求是到something.example.com/public_subdomains/something/x：RewriteRule 匹配，RewriteCond 已经完成......你有无限循环。

[L] 标志仅停止处理当前请求：无论如何，该请求将在第二遍中处理。[END] 标志确实停止了循环，但它是一个蛮力的事情，因为你已经注意到它有副作用，所以最好加入一个停止递归的条件。像这样的东西：

```
RewriteCond %{HTTP_HOST} ^([^\.]+)\.example\.com$ [NC]
RewriteCond %{REQUEST_URI} !^/public_subdomains/%1
RewriteRule ^(.*)$ public_subdomains/%1/$1 [L] 
```

添加的 RewriteCond 将检查请求的 uri 是否已经以“public_subdomains/something”开头。

它未经测试，因此可能存在问题，但这是基本思想。

# c# - 计算重叠时间的时间差

> ID：14805269
> 
> 赞同：1
> 
> 时间：2013-02-11T02:59:51.470
> 
> 标签：c#

我只是想找到解决这个问题的逻辑，但被卡住了。

我的数据库中有 6 个日期时间列。像下面

```
StartDate =  {14/1/2012 11:00:00 AM}
EndDate=     {14/1/2012 11:30:00 AM}

**Break between start and End Date is 30 mins**

StartDate2 = {14/1/2012 11:30:00 AM}
EndDate2=    {14/1/2012 12:30:00 PM}

**Break between start1 and End1 Date is 1hr**

StartDate3 = {14/1/2012 12:00:00 PM}
EndDate3=    {14/1/2012 01:30:00 PM}
**Break between start2 and End2 Date is 1hr is 1hr** 
```

我试图找到每个日期集之间的休息时间并总结决赛。

例如：

```
StartDate =  {14/1/2012 11:00:00 AM}
EndDate=     {14/1/2012 11:30:00 AM} 
```

开始和结束日期之间的休息时间为 30 分钟。

但是，如果您看到开始日期和结束日期 2 和 3，则时间重叠。所以不确定时间跨度在这种情况下会有多大帮助。

**所有三个时间戳之间的总休息时间和总和应该是 2 小时 30 分钟**

请有人提出一些想法来解决这个问题。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T03:05:54.947

> 不确定时间跨度在这种情况下会有多大帮助。

`TimeSpan`通过从较早的时间中减去较晚的时间产生的结果将是负数。例如，

```
var dt1 = DateTime.Parse("02/10/2013 12:20");
var dt2 = DateTime.Parse("02/10/2013 12:00");
Console.WriteLine(dt2.Subtract(dt1)); 
```

[打印`-00:20:00`](http://ideone.com/0mEtav)。

您可以检查间隔是否为负以检测重叠。一种方法是检查`Ticks`属性是否为负：

```
var dt1 = DateTime.Parse("02/10/2013 12:20");
var dt2 = DateTime.Parse("02/10/2013 12:00");
var diff = dt2.Subtract(dt1);
if (diff.Ticks < 0) {
    Console.WriteLine("An overlap is detected.");
} 
```

# android - 添加自定义后退按钮时丢失 ActionBar 标题

> ID：14805270
> 
> 赞同：1
> 
> 时间：2013-02-11T03:00:23.240
> 
> 标签：android, actionbarsherlock

所有- 我在我的 ActionBar Sherlock 中添加了一个自定义后退按钮以适合我的橙色主题： ![在此处输入图像描述](../Images/8b36de0afc8feb39fddbf7ff87091d52.png) 问题是这样做会使标题消失。这就是它应该看起来加上胡萝卜的样子： ![在此处输入图像描述](../Images/c97b7cb41cea6078b99ace68075c3c7f.png)

我也更改了图标，但我将问题缩小到胡萝卜而不是图标。有人也遇到了这个问题，所以可以解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T03:18:23.107

只是通过继续我的下一个任务，我偶然发现了我的答案。对于那些可能有同样问题的人，这里是你的答案：

```
 <style parent="@style/Widget.Sherlock.Light.ActionBar.Solid" name="example_solid_ActionBar">  
        <item name="android:displayOptions">showHome|useLogo|showTitle</item> 
//...
</style> 
```

# php - 从 PHP 数组循环遍历 Javascript 中的数组

> ID：14805271
> 
> 赞同：0
> 
> 时间：2013-02-11T03:00:23.980
> 
> 标签：php, javascript, arrays, alert

我在 PHP 变量中有一个数组，名为：$TillArray

我想将此值传递给 Javascript 函数并为数组中的每个项目显示一个警报。

这是我的代码：

```
<script type="text/javascript">
    ArrayFunction(<?= $TillArray ?>);
</script> 
```

这是功能代码：

```
function ArrayFunction(MyArray)
{
    for (var i = 0; i < MyArray.length; i++) 
    {
        alert(MyArray[i]);
    }
} 
```

该函数显示“未定义”消息。

我可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T03:02:20.587

因为你不能那样做。您必须通过将数组转换为 JS 可以使用的数组来使数组可以被 JS 循环使用。您可以将其转换为 JSON，但这取决于您创建数组的方式。如果所有索引都是数字，`json_encode`则将其转换为 JS 数组，并且 3 个基本循环中的任何一个都可以对其进行迭代。但是如果它是一个关联数组，它将把它变成一个 JS 对象，你将不得不使用`for-in`循环。

```
ArrayFunction(<?= json_encode($TillArray) ?>); 
```

# android - 如何限制 Android Google Maps API v2 中的标记数量？

> ID：14805274
> 
> 赞同：0
> 
> 时间：2013-02-11T03:00:55.953
> 
> 标签：android, google-maps-api-2, android-maps-v2

我的问题是指 Android 中新的 Google Maps API v2。

如果设置如下，我们可以很容易地在谷歌地图上获得 LatLng(point)；

```
@Override
    public void onMapClick(LatLng point) {

    } 
```

如果想在触摸谷歌地图时添加标记，我们执行以下操作；

```
@Override
    public void onMapClick(LatLng point) {

        googleMap.addMarker(
                new MarkerOptions().
                position(point).
                title("Hello World"));
    } 
```

然后我们可以获得我们在地图上触摸的标记和 LatLng(point)。

但问题是，只要在地图上触摸，所有标记都**不会消失。**

**问题 1**：每当我触摸地图时，我只想添加地图上的最后一个标记。您可能知道，为此，我们可以在代码中添加“addmarker()”之前添加“googleMap.clear()”。但是是否存在另一种方法？

**问题 2**：当地图上只有一个标记时，我想通过触摸地图“onMapClick”在地图上添加我的第二个标记。简而言之，我不想在“public void onMapClick(LatLng point){}”内的地图上添加第三个标记。如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T13:40:25.063

**问题 1：**`googleMap.clear()`在添加新标记之前尝试。

**问题 2：**将要保留的标记存储在 a 中`List`并根据需要添加它们。

**编辑：** 那么我会向您推荐这个问题：[如何使用 Google Maps V2 删除单个标记？](https://stackoverflow.com/questions/13702379/how-to-remove-single-marker-using-google-maps-v2)

# backbone.js - 骨干说未定义的方法method_name，即使它已定义

> ID：14805275
> 
> 赞同：0
> 
> 时间：2013-02-11T03:00:56.403
> 
> 标签：backbone.js, undefined-function

我有一个employee_collection、employee_model、employee_collection_view 和employee_view，如下所示。

employee_collection 的 Javascript

```
var EmployeeCollection = Backbone.Collection.extend({
  url: "/employees"
}) 
```

对于employee_model

```
var Employee = Backbone.Model.extend({

  toogleStatus: function(){
    if(this.get('fired') === true){
      this.set({fired: false});
    }else{
      this.set({fired: true});
    }
    this.save();
  }
}); 
```

对于employee_collection_view

```
var EmployeeListView = Backbone.View.extend({
  tagName: 'table',
  className: "table table-striped",
  initialize: function(options){
    this.display_type = options.display_type
  },

  render: function(){
    this.collection.models.forEach(this.addOne, this);
  },
  addOne: function(employee){
    console.log(this.display_type);
      var employeeView = new EmployeeView({model: employee});
      employeeView.render();
      this.$el.append(employeeView.el);
  }
}); 
```

对于employee_view

```
var EmployeeView = Backbone.View.extend({
  tagName: "tr",
  template: _.template("<td><%= first_name %></td><td><%= last_name %> </td><td> <%= address %></td><td> <%= phone %></td><td><%= fired %></td><td><input type='button' value=<% (fired === true) ? print('hire') : print('fire') %> /></td>"),
  initialize: function(){
    this.model.on('change', this.render, this);
  },
  events: {
    'click input[type="button"]': 'toogleStatus'
  },

  toogleStatus: function(){
    console.log(this.model);
    this.model.toogleStatus();
  },
  render: function(){
    this.$el.html(this.template(this.model.toJSON()));
    console.log(this.$el.html());
  },
  setupView: function(){
    console.log($("#employees_list").html());
  }
}); 
```

页面加载后，我可以在主页中看到员工列表，最后一列有一个按钮，如果解雇属性为真，则雇用，如果解雇状态为假，则解雇。

但是让我烦恼的是，当我按下按钮（解雇/雇用）时，employee_view 的工具状态被触发但错误弹出

```
this.model.toogleStatus(); 
```

说

```
TypeError: this.model.toogleStatus is not a function
this.model.toogleStatus(); 
```

我记录了 this.model，它被打印出来了。

即使我在 employee_model 中定义了 toogleStatus() 方法，它也说它不是一个函数。我在做一些破旧的事吗？

application.js 有以下代码。

```
$(function(){
  var router = new Router();

  router.on('route:home', function(){
    var employeeCollection = new EmployeeCollection();
    employeeCollection.fetch({
      success: function(employees){
        var employeeListView = new EmployeeListView({collection: employees, display_type: "grid"});
        employeeListView.render("table");
        $('.page').html(employeeListView.el);
      }
    });

  });
  Backbone.history.start();
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T05:01:04.070

您需要`EmployeeCollection`像这样告诉要使用哪个模型子类：

```
var EmployeeCollection = Backbone.Collection.extend({
  url: "/employees",
  model: Employee
}) 
```

默认情况下，集合将实例化基本`Backbone.Model`父类，因此不会有任何子`Employee`类的自定义方法。

# wpf - 如何将窗口形式的图像转换为WPF

> ID：14805276
> 
> 赞同：0
> 
> 时间：2013-02-11T03:01:09.227
> 
> 标签：wpf

窗口形式的这个 conde：

```
using (WebClient ownPicLoader = new WebClient())
pbOwnImage.Image = Image.FromStream(new MemoryStream(ownPicLoader.DownloadData("https://graph.facebook.com/" + _client.ClientNick + "/picture?width=200&height=200"))); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T03:29:45.600

在 WPF 中，您可以直接使用链接作为`ImageSource`

例子：

代码：

```
public partial class MainWindow : Window, INotifyPropertyChanged
{
    public MainWindow()
    {
        InitializeComponent(); 
    }

    private string image;
    public string Image
    {
        get { return image; }
        set { image = value; NotifypropertyChanged("Image"); }
    }

    private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        Image = "http://icons.iconarchive.com/icons/chromatix/keyboard-keys/128/0-icon.png";
    }

    public event PropertyChangedEventHandler PropertyChanged;
    private void NotifypropertyChanged(string property)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(property));
        }
    }
 } 
```

xml:

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="252.351" Width="403.213" Name="UI" >
    <Grid>
        <StackPanel HorizontalAlignment="Left" Height="177" Margin="23,10,0,0" VerticalAlignment="Top" Width="191">
            <Image Source="{Binding ElementName=UI, Path=Image, IsAsync=True}" Stretch="Uniform" />
            <Button Click="Button_Click_1" Content="Get Image" />
        </StackPanel>
    </Grid>
</Window> 
```

或者，您可以像在 winforms 应用程序中一样下载并显示图像。

```
public partial class MainWindow : Window, INotifyPropertyChanged
{
    public MainWindow()
    {
        InitializeComponent(); 
    }

    private BitmapImage image;
    public BitmapImage Image
    {
        get { return image; }
        set { image = value; NotifypropertyChanged("Image"); }
    }

    private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        using (WebClient ownPicLoader = new WebClient())
        {
            ownPicLoader.DownloadDataCompleted += (s, args) =>
            {
                var downloadImage = new BitmapImage();
                downloadImage.BeginInit();
                downloadImage.StreamSource = new MemoryStream(args.Result);
                downloadImage.EndInit();
                Image = downloadImage;
            };
            ownPicLoader.DownloadDataAsync(new Uri("http://icons.iconarchive.com/icons/chromatix/keyboard-keys/128/0-icon.png"));
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    private void NotifypropertyChanged(string property)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(property));
        }
    }
 } 
```

# c - 使用 malloc 时遇到问题

> ID：14805279
> 
> 赞同：0
> 
> 时间：2013-02-11T03:02:01.570
> 
> 标签：c, malloc, c-strings

在 GDB 中运行这个程序，在它通过 target/replace malloc 语句之后，[1] 元素总是被赋予一个尴尬的值。

例如（使用 GDB）：

```
(gdb) p target[0]

$1 = -48 '\320'

(gdb) p target[1]

$2 = 101 'e'

(gdb) p target[2]

$3 = -4 '\374'

(gdb) p target[3]

$4 = -73 '\267' 
```

对于另一个变量，它的值是：replace[1] = 'd'

为什么要这样做？如果我遗漏了任何其他重要信息，请告诉我。

```
void replace(char** list, int wordLine, int targetAmount)
{
    char** final;
    char* target;
    char* replace;
    int wCounter, cCounter, i, hashCounter = 0, addLetter = 0;
    int copyWord, countChars, numOfWords, finalWords = 0;

    target = (char*)malloc(targetAmount);   //allocating memory for 
    replace = (char*)malloc(targetAmount);  //these char*'s
    // other stuff here
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T03:09:27.617

`malloc`只分配内存；它不保证内容是什么。如果你想用 0 初始化内存内容，试试[`calloc`](http://www.cplusplus.com/reference/cstdlib/calloc/).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T03:10:48.880

`malloc`不会清除内存，因此您会在分配的块中获得垃圾。您可以使用`calloc`自动清除内存或`memset`手动清除它。

# android - 在片段中实现层的简单方法？

> ID：14805280
> 
> 赞同：0
> 
> 时间：2013-02-11T03:02:07.620
> 
> 标签：android, fragment, layer

Activity 类有一个名为的方法`addContentView()`，可用于轻松添加额外的视图层。我想创建自己的`BaseFragment`类，其方法类似于`addContentView()`. 有没有一种简单的方法可以用最少的代码来实现这一点？`Fragment.getView()`如果我可以一直依赖它会很好，`NoSaveStateFrameLayout`因为我可以使用它，但我猜这可能会随着 Android 的不同实现而改变。

我知道我可以创建一个以 a`FrameLayout`作为根的自定义布局，但理想情况下，我希望该解决方案是一个可重用的框架，而不是特定于特定`Fragment`类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-28T17:24:56.943

据我所知，没有一种干净、优雅的方式来做到这一点。

我所采取的是这样的：

我创建了一个名为 wrapInFrame(View) 的实用程序方法，它获取一个视图并包裹在 Frame 布局中，然后返回 FrameLayout 作为结果（我从支持库源中窃取了基本实现）。必须从 onCreateView 方法调用此方法才能包装您自己的自定义视图。

一旦在片段视图层次结构的根部有了 FrameLayout，实现分层就变得非常容易。

# html - 如何通过CSS在textareas的右下角添加一个图标？

> ID：14805287
> 
> 赞同：2
> 
> 时间：2013-02-11T03:02:31.817
> 
> 标签：html, css, textarea

我需要在某些文本区域的右下角显示一个“Enter”图标，以指示用户可以按 Enter 来处理他的输入。这就是它需要的样子：

![在此处输入图像描述](../Images/eea617270ff99358d6550bea4fc47e82.png)

如何才能做到这一点？它必须适用于多种大小的文本区域，所以我更喜欢灵活的东西，而不是通过位置：绝对

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T03:16:25.753

使用`background-position: bottom right`背景图片就可以了：http: [//jsfiddle.net/ybG53/](http://jsfiddle.net/ybG53/)

这应该可行，除非你想在没有背景图像的情况下这样做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T03:20:42.777

这是一种方法，将文本区域包围在包装器中，并在伪元素上使用绝对定位来绘制图像。伪元素似乎不适用于文本区域。

```
<div id="container">
    <textarea></textarea>
</div>

#container {
    position:relative;
    display:inline-block;
}

#container:before {
    position:absolute;
    display:block;
    right:0%;
    bottom:0%;
    width:10px;
    height:10px;
    content:"";
    background-color:#F00;
} 
```

[http://jsfiddle.net/kafNg/1/](http://jsfiddle.net/kafNg/1/)

# backbone.js - 木偶 todomvc 扩展错误

> ID：14805288
> 
> 赞同：0
> 
> 时间：2013-02-11T03:02:34.293
> 
> 标签：backbone.js, coffeescript, requirejs, marionette, todomvc

```
TodoMVC.module "TodoList", (TodoList, App, Backbone, Marionette, $, _) ->

  # TodoList Router
  # ---------------
  #
  # Handle routes to show the active vs complete todo items
  TodoList.Router = Marionette.AppRouter.extend
    appRoutes: "*filter": "filterItems"

  # TodoList Controller (Mediator)
  # ------------------------------
  #
  # Control the workflow and logic that exists at the application
  # level, above the implementation detail of views and models
  TodoList.Controller = ->
    @todoList = new App.Todos.TodoList()

  _.extend TodoList.Controller::,

    # Start the app by showing the appropriate views
    # and fetching the list of todo items, if there are any
    start: ->
      @showHeader @todoList
      @showFooter @todoList
      @showTodoList @todoList
      App.bindTo @todoList, "reset add remove", @toggleFooter, this
      @todoList.fetch()

    showHeader: (todoList) ->
      header = new App.Layout.Header(collection: todoList)
      App.header.show header

    showFooter: (todoList) ->
      footer = new App.Layout.Footer(collection: todoList)
      App.footer.show footer

    showTodoList: (todoList) ->
      App.main.show new TodoList.Views.ListView(collection: todoList)

    toggleFooter: ->
      App.footer.$el.toggle @todoList.length

    # Set the filter to show complete or all items
    filterItems: (filter) ->
      App.vent.trigger "todoList:filter", filter.trim() or ""

  # TodoList Initializer
  # --------------------
  #
  # Get the TodoList up and running by initializing the mediator
  # when the the application is started, pulling in all of the
  # existing Todo items and displaying them.
  TodoList.addInitializer ->
    controller = new TodoList.Controller()
    new TodoList.Router(controller: controller)
    controller.start() 
```

未捕获的 NoMethodError：在控制器上找不到方法“filterItems”

我采用了[Marionette 的 TodoMVC 示例，并使用](https://github.com/derickbailey/todomvc/tree/marionette/labs/architecture-examples/backbone_marionette)[js2coffee](http://js2coffee.org/)将其转换为 CoffeeScript ，我正在使用 requirejs。我不确定为什么会这样，因为我没有添加真正的自定义代码。如果我可以包含任何其他信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T16:48:25.410

我也有这个错误。

问题出在以下代码中：

```
TodoList.Controller = ->
    @todoList = new App.Todos.TodoList() 
```

一旦转换为 JS ，它将`return`在第二行前面添加。对我来说，添加`true`为下一行解决了这个问题。

```
TodoList.Controller = ->
    @todoList = new App.Todos.TodoList()
    true 
```

# c - 使用 linux 帧缓冲区进行图形但禁用控制台文本

> ID：14805294
> 
> 赞同：6
> 
> 时间：2013-02-11T03:03:24.017
> 
> 标签：c, linux, framebuffer

我有一些在 linux 帧缓冲区控制台上绘制简单图形的 c 代码。我也在使用树莓派，它是复合视频输出。操作系统是 raspbian，我正在做一个不使用 X 的低级解决方案。

我的图形运行良好，我还能够读取 USB 键盘并响应按键。

目前有一个 tty 终端，我的图形被覆盖。tty 仍处于活动状态，并且按键会回显到屏幕上。

我想要实现的是禁用帧缓冲区上的所有控制台消息和 tty，以便只显示我的图形。有没有人有这样做的好方法？也许禁用该虚拟控制台上的 tty？

抢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T04:25:02.120

我想你要找的是`ioctl(fd, KDSETMODE, KD_GRAPHICS)`. 您需要在退出之前将其重新设置。

# c - 来自不兼容指针类型的赋值 (C)

> ID：14805295
> 
> 赞同：0
> 
> 时间：2013-02-11T03:03:29.130
> 
> 标签：c

我在下面编码， rb_gst_get_encoding_profile 是否没有像 rec_settings.profile 期望的那样返回 gchar* 。

```
typedef struct Recording_Settings recording_settings;
struct Recording_Settings
{
    gchar *profile;
    gchar *destination;
};
recording_settings rec_settings;

typedef struct _GstEncodingProfile GstEncodingProfile;
GstEncodingProfile *rb_gst_get_encoding_profile (const char *media_type); 
```

警告：来自不兼容的指针类型的赋值：

```
rec_settings.profile = gconf_client_get_string(client, "/apps/sound/recording/profile", NULL);
if (!rec_settings.profile)
    rec_settings.profile = g_strdup("audio/x-vorbis");

static void profile_combo_change_cb(GtkComboBox *combo, gpointer userdata)
{
    GtkTreeIter iter;
    GtkTreeModel *model;

    /* Grab the encoding profile choosen */
    model = gtk_combo_box_get_model (GTK_COMBO_BOX (combo));
    if (gtk_combo_box_get_active_iter(GTK_COMBO_BOX(combo), &iter)) {
        gchar *media_type;
        gtk_tree_model_get(GTK_TREE_MODEL(model), &iter, 0, &media_type, -1);
        rec_settings.profile = rb_gst_get_encoding_profile(media_type); // Warning: assignment from incompatible pointer type
        g_free (media_type);
    }
} 
```

我尝试修复它们。这样做的方法是什么？

谢谢

```
audio_profile_combo = audio_profile_chooser_new();
gchar *media_type;
media_type = rb_gst_encoding_profile_get_media_type(rec_settings.profile); // Warning: assignment from incompatible pointer type
audio_profile_chooser_set_active(audio_profile_combo, media_type);
g_free (media_type); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T03:06:23.403

在这一行：

```
rec_settings.profile = rb_gst_get_encoding_profile(media_type); 
```

`media_type`是 a `gchar *`，但函数`rb_gst_get_encoding_profile`需要 a `const char *`。这就是错误的原因。

**编辑：**更不用说函数本身返回 a `GstEncodingProfile *`，并且您正试图将其分配给`rec_settings.profile`，这是 a `gchar *`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T03:08:32.787

将 Recording_Settings 结构更改为：

```
struct Recording_Settings
{
    GstEncodingProfile *profile;
    gchar *destination;
}; 
```

至少，这就是我应该从可用的小信息中获得的。

# actionscript-3 - as3 如何用两个按钮更改数字

> ID：14805296
> 
> 赞同：0
> 
> 时间：2013-02-11T03:04:00.277
> 
> 标签：actionscript-3, flash, air

我需要使用两个按钮 - 和 + 更改数字（动态文本）。如果在动态文本上按+（加号）必须加1，依此类推。

例如：

```
text = i

on (release) {

    text =i+1;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T03:08:58.663

仅供参考，您的代码在 ActionScript 2 中，您应该学习 ActionScript 3。

无论如何，首先创建两个`Buttons`和一个动态`TextField`。将它们命名为`btn_minus`,并在`btn_plus`中`tf`写入 0 `TextField`。

试试这个：

```
import flash.events.MouseEvent;

btn_minus.addEventListener(MouseEvent.CLICK, onMinus);
btn_plus.addEventListener(MouseEvent.CLICK, onPlus);

var count:int = 0;
function onMinus(e:MouseEvent):void
{
    count --;
    tf.text = String(count); 
}

function onPlus(e:MouseEvent):void
{
    count ++;
    tf.text = String(count);
} 
```

# javascript - 焦点提交按钮并在 chrome 中选择正确的选项卡不起作用

> ID：14805300
> 
> 赞同：0
> 
> 时间：2013-02-11T03:04:57.233
> 
> 标签：javascript, tabs, focus, next

它只选择正确的选项卡，但不关注提交按钮：

```
function(tab) {
  var winid = tab.windowId;
    var tabid = tab.id;

        chrome.tabs.getAllInWindow(winid, function(tabs) {
      for (var j = 0; j < tabs.length;++j) {
        if (tabs[j].id == tabid) {
            chrome.tabs.executeScript(null, { code: "document.getElementById('submit').focus()" });
             chrome.tabs.update(tabs[(j + 1) % tabs.length].id, {
            'selected': true
          });
          break;
        }
      }
    }); 
```

# java - 从字节数组问题编码字符串

> ID：14805304
> 
> 赞同：0
> 
> 时间：2013-02-11T03:05:19.323
> 
> 标签：java, eclipse, gwt

我有以下方法：

```
 /**
  * Encodes the byte array into base64 string
  * @param imageByteArray - byte array
  * @return String a {@link java.lang.String}
  */
public static String encodeImage(byte[] imageByteArray) {
    return Base64.encodeBase64URLSafeString(imageByteArray);
} 
```

我正在导入“org.apache.commons.codec.binary.Base64;” 但是，我收到错误：

此行有多个标记 - 未定义 Base64 类型的方法 encodeBase64URLSafeString(byte[]) - Line breakpoint:MySQLConnection [line: 287] - encodeImage(byte[])

我已经从“ [http://www.myjeeva.com/2012/07/how-to-convert-image-to-string-and-string-to-image-in-java/](http://www.myjeeva.com/2012/07/how-to-convert-image-to-string-and-string-to-image-in-java/) ”复制了这段代码。我正在使用 Eclipse Juno（完全更新）和 GWT。

有谁知道我在这里做错了什么？

问候，

格林

谢谢 Markus A。我现在根据您的信息创建了这个类：

```
package org.AwardTracker.server;

public class Base64Decode {
private final static String base64chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";

public static byte[] decode(String s) {

    // remove/ignore any characters not in the base64 characters list
    // or the pad character -- particularly newlines
    s = s.replaceAll("[^" + base64chars + "=]", "");

    // replace any incoming padding with a zero pad (the 'A' character is
    // zero)
    String p = (s.charAt(s.length() - 1) == '=' ? (s.charAt(s.length() - 2) == '=' ? "AA"
            : "A")
            : "");

    s = s.substring(0, s.length() - p.length()) + p;
    int resLength = (int) Math.ceil(((float) (s.length()) / 4f) * 3f);
    byte[] bufIn = new byte[resLength];
    int bufIn_i = 0;

    // increment over the length of this encrypted string, four characters
    // at a time
    for (int c = 0; c < s.length(); c += 4) {

        // each of these four characters represents a 6-bit index in the
        // base64 characters list which, when concatenated, will give the
        // 24-bit number for the original 3 characters
        int n = (base64chars.indexOf(s.charAt(c)) << 18)
                + (base64chars.indexOf(s.charAt(c + 1)) << 12)
                + (base64chars.indexOf(s.charAt(c + 2)) << 6)
                + base64chars.indexOf(s.charAt(c + 3));

        // split the 24-bit number into the original three 8-bit (ASCII)
        // characters

        char c1 = (char) ((n >>> 16) & 0xFF);
        char c2 = (char) ((n >>>8) & 0xFF);
        char c3 = (char) (n & 0xFF);

        bufIn[bufIn_i++] = (byte) c1;
        bufIn[bufIn_i++] = (byte) c2;
        bufIn[bufIn_i++] = (byte) c3;

    }

    return bufIn;
}

} 
```

并将调用改为：import org.AwardTracker.server.Base64Decode；

```
public static String encodeImage(byte[] imageByteArray) {
    return Base64Decode(imageByteArray); [Error on this line]
} 
```

我现在得到错误：

此行有多个标记 - MySQLConnection 类型的方法 Base64Decode(byte[]) 未定义

非常感谢您的帮助。

问候，

格林

**第三轮**

好的，所以我的加密和解密方式错误。现在已更正并放置在正确的库中。但是我在 encodeImage 方法中仍然有错误。这是我用来调用 encodeImage 方法的方法。我怀疑这些行：

```
java.sql.Blob imageBlob = result.getBlob(1);
byte[] imageData = imageBlob.getBytes(1, (int) imageBlob.length()); 
```

不正确。但是，我已将 ImageData 定义为 byte[]，所以我不明白为什么 encodeImage 认为它是一个字符串？

```
public String getImageData(String id){
    ResultSet result = null;
    PreparedStatement ps = null;
    String imageDataString = null;
    try {
        // Read in the image from the database.
        ps = conn.prepareStatement(
              "SELECT at_cub_details.cd_photograph " +
                      "FROM at_cub_details " + 
                      "WHERE at_cub_details.cd_id = \"" + id + "\"");
        result = ps.executeQuery();
        while (result.next()) {
            java.sql.Blob imageBlob = result.getBlob(1);
            byte[] imageData = imageBlob.getBytes(1, (int) imageBlob.length());

            //Convert Image byte array into Base64 String
            imageDataString = encodeImage(imageData);
        }

    } 
```

导致以下错误：

```
public static String encodeImage(byte[] imageByteArray) {
    return Base64Encode.encode(imageByteArray); [Error on this line]
} 
```

“Base64Encode 类型中的方法 encode(String) 不适用于参数 (byte[])”

感谢你的帮助。

问候，

格林

ps，当我完成后，我认为这值得一个博客，因为我在这方面找不到任何明确的工作，我认为这会经常使用。我的下一个项目。

**编码类是：**

```
package org.AwardTracker.server;

public class Base64Encode {
private final static String base64chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";

public static String encode(String s) {

    // the result/encoded string, the padding string, and the pad count
    String r = "", p = "";
    int c = s.length() % 3;

    // add a right zero pad to make this string a multiple of 3 characters
    if (c > 0) {
        for (; c < 3; c++) {
            p += "=";
            s += "\0";
        }
    }

    // increment over the length of the string, three characters at a time
    for (c = 0; c < s.length(); c += 3) {

        // we add newlines after every 76 output characters, according to
        // the MIME specs
        if (c > 0 && (c / 3 * 4) % 76 == 0)
            r += "\r\n";

        // these three 8-bit (ASCII) characters become one 24-bit number
        int n = (s.charAt(c) << 16) + (s.charAt(c + 1) << 8)
                + (s.charAt(c + 2));

        // this 24-bit number gets separated into four 6-bit numbers
        int n1 = (n >> 18) & 63, n2 = (n >> 12) & 63, n3 = (n >> 6) & 63, n4 = n & 63;

        // those four 6-bit numbers are used as indices into the base64
        // character list
        r += "" + base64chars.charAt(n1) + base64chars.charAt(n2)
                + base64chars.charAt(n3) + base64chars.charAt(n4);
    }

    return r.substring(0, r.length() - p.length()) + p;
}
} 
```

**解码类是：**

```
package org.AwardTracker.server;

public class Base64Decode {
private final static String base64chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";

public static byte[] decode(String s) {

    // remove/ignore any characters not in the base64 characters list
    // or the pad character -- particularly newlines
    s = s.replaceAll("[^" + base64chars + "=]", "");

    // replace any incoming padding with a zero pad (the 'A' character is
    // zero)
    String p = (s.charAt(s.length() - 1) == '=' ? (s.charAt(s.length() - 2) == '=' ? "AA"
            : "A")
            : "");

    s = s.substring(0, s.length() - p.length()) + p;
    int resLength = (int) Math.ceil(((float) (s.length()) / 4f) * 3f);
    byte[] bufIn = new byte[resLength];
    int bufIn_i = 0;

    // increment over the length of this encrypted string, four characters
    // at a time
    for (int c = 0; c < s.length(); c += 4) {

        // each of these four characters represents a 6-bit index in the
        // base64 characters list which, when concatenated, will give the
        // 24-bit number for the original 3 characters
        int n = (base64chars.indexOf(s.charAt(c)) << 18)
                + (base64chars.indexOf(s.charAt(c + 1)) << 12)
                + (base64chars.indexOf(s.charAt(c + 2)) << 6)
                + base64chars.indexOf(s.charAt(c + 3));

        // split the 24-bit number into the original three 8-bit (ASCII)
        // characters

        char c1 = (char) ((n >>> 16) & 0xFF);
        char c2 = (char) ((n >>>8) & 0xFF);
        char c3 = (char) (n & 0xFF);

        bufIn[bufIn_i++] = (byte) c1;
        bufIn[bufIn_i++] = (byte) c2;
        bufIn[bufIn_i++] = (byte) c3;

    }

    return bufIn;
}

} 
```

**我终于找到了一个有效的编码类：**

```
package org.AwardTracker.server;

public class Base64Encode2 {
 private final static char[] ALPHABET = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".toCharArray();

    private static int[]  toInt   = new int[128];

    static {
        for(int i=0; i< ALPHABET.length; i++){
            toInt[ALPHABET[i]]= i;
        }
    }

/**
 * Translates the specified byte array into Base64 string.
 *
 * @param buf the byte array (not null)
 * @return the translated Base64 string (not null)
 */
public static String encode(byte[] buf){
    int size = buf.length;
    char[] ar = new char[((size + 2) / 3) * 4];
    int a = 0;
    int i=0;
    while(i < size){
        byte b0 = buf[i++];
        byte b1 = (i < size) ? buf[i++] : 0;
        byte b2 = (i < size) ? buf[i++] : 0;

        int mask = 0x3F;
        ar[a++] = ALPHABET[(b0 >> 2) & mask];
        ar[a++] = ALPHABET[((b0 << 4) | ((b1 & 0xFF) >> 4)) & mask];
        ar[a++] = ALPHABET[((b1 << 2) | ((b2 & 0xFF) >> 6)) & mask];
        ar[a++] = ALPHABET[b2 & mask];
    }
    switch(size % 3){
        case 1: ar[--a]  = '=';
        case 2: ar[--a]  = '=';
    }
    return new String(ar);
}

} 
```

感谢您对 Markus A 的所有帮助。非常感谢。

问候，

格林

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T03:39:39.093

GWT 不提供 apache commons 包，所以我认为你不能只在代码中使用这个函数。

以下是您可以在 GWT 中使用的内容：

[https://developers.google.com/web-toolkit/doc/latest/RefJreEmulation](https://developers.google.com/web-toolkit/doc/latest/RefJreEmulation)

如果您确实想使用它，您实际上需要拥有 Base64 类（及其所有依赖项）的源代码，并将其放入您的项目中 GWT 编译器可以访问它以将其转换为 JavaScript 的地方。

有关进行编码的其他方法，请参见此处：

[如何使用 GWT 将短字符串编码/解码为 Base64？](https://stackoverflow.com/questions/2250421/how-do-i-encode-decode-short-strings-as-base64-using-gwt)

**添加到原始帖子的新问题的补充：**

对于初学者，您需要在这样的类上调用静态函数：

```
return Base64Decode.decode(imageByteArray); 
```

但你似乎也有你的类型倒退：encodeImage 接受一个字节 [] 并返回一个字符串，而 Base64Decode.decode 接受一个字符串并返回一个字节 []。您可能需要使用等效的 Base64Encode.encode 函数而不是 decode 函数。

# python - TypeError：“int”对象不支持项目分配

> ID：14805306
> 
> 赞同：17
> 
> 时间：2013-02-11T03:05:26.917
> 
> 标签：python, typeerror

为什么我会收到此错误？

```
 a[k] = q % b
 TypeError: 'int' object does not support item assignment 
```

代码：

```
def algorithmone(n,b,a):
     assert(b > 1)
     q = n
     k = 0
     while q != 0:
        a[k] = q % b
        q = q / b
        ++k

     return k

print (algorithmone(5,233,676))
print (algorithmone(11,233,676))
print (algorithmone(3,1001,94))
print (algorithmone(111,1201,121)) 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-11T03:07:14.110

您将整数作为`a`. 然后，您尝试将其分配为： `a[k] = ...`但这不起作用，因为`a`它是标量...

就像您尝试过的一样：

```
50[42] = 7 
```

这种说法没有多大意义，python 会以同样的方式对你大喊大叫（大概）。

此外，`++k`没有做你认为它做的事情——它被解析为`(+(+(k)))`——即字节码只有`UNARY_POSITIVE`两次。你真正想要的是`k += 1`

最后，请注意以下语句：

```
q = q / b 
```

您在 print 中使用的括号暗示您想在某个时候在 python3.x 上使用它。但是，`x/y`在 python3.x 上的行为与在 python2.x 上的行为不同。看看算法，我猜你想要*整数除法*（因为你检查`q != 0`了浮点数很难满足）。如果是这种情况，您应该考虑使用：

```
q = q // b 
```

它在 python2.x 和 python3.x 上执行整数除法。

# arrays - 处理：数组索引超出范围

> ID：14805310
> 
> 赞同：-2
> 
> 时间：2013-02-11T03:06:12.843
> 
> 标签：arrays, processing, indexoutofboundsexception

我是处理新手，正在创建一个草图，其中一个 600 像素 x 600 像素的画布填充了我`orange[]`调色板中随机颜色的 50 像素矩形。块的随机形成需要位于`draw()`函数内部，以便在我稍后放入的一些条件下正确操作。

我得到的错误是**ArrayIndexOutOfBoundsException: 12**在这一行：

```
randomSize[varCreator] = sIncrement[int(random(0,sIncrement.length-1))]; 
```

我似乎无法弄清楚为什么会发生此错误。我已经研究过相关的问题，也许只是因为我太新了，但我无法弄清楚：

```
int x; //x coordinate
int y; //y coordinat
int s = 50; //rect size
int wide = 600; //canvas width
int tall = 600; //canvas height
int[] sIncrement = new int[12];//{s, s*2, s*3, s*4, s*5, s*6};

//colors
int[] oranges = {
  #773600, #5f3613, #552700, #9c5215, #9c5c26
};
int[] blues = {
  #004848, #0c3939, #003333, #107979, #1e7979
};
int[] palette = oranges;//holds current color pallete

//random
int fillColor = palette[int(random(0, palette.length))]; //random starting fill color
int changeColor = palette[int(random(0, palette.length))]; //random new color
int[] randomSize = new int[sIncrement.length]; //array of lots of random s values to place newly color changed blocks

//setup
void setup(){
  size(wide, tall);
  background(255);
  noStroke();
  frameRate(24);

  /*fills sIncrement array with incrementing s values (i.e. if s = 50 then array 
   contains 50, 100, 150, etc...) from 0 to canvas width for use in a conditional statement*/
  for(int i = 0; i <= sIncrement.length-1; i++){
    sIncrement[i] = s*i;
  }

 //creates multiple randomSize variables for if() x or y == randomSize[varCreator] 
 for(int varCreator = 0; varCreator <= (width/s)+(height/s); varCreator++){
   randomSize[varCreator] = sIncrement[int(random(0,sIncrement.length-1))];
 }
}

//draw
void draw(){
  fill(fillColor); //selects random color from palette

  //draws grid colored boxes with s size
  for (y = 0; y <= height; y+= s) {
    for (x = 0; x <= width; x+= s) {
      if(x == sIncrement[randomSize[1]] && y == sIncrement[randomSize[3]]){
        fill(changeColor); //selects random color from palette
        rect(x, y, s, s);
      }

      else{
      fill(fillColor);
     // fill(palette[int(random(0, palette.length))]); //selects random color from palette
      rect(x, y, s, s);
      }
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T03:17:23.933

跟踪你的代码你有这个：

```
int[] sIncrement = new int[12];                    // sIncrement initialized with size 12
int[] randomSize = new int[sIncrement.length];     // randomSize initialized with size 12
for(... ; varCreator <= (width/s)+(height/s); ...) // varcreator <= 24!
randomSize[varCreator] = ...                       // Problem line 
```

当`varcreator >= 12`你得到一个数组索引越界异常。从那里开始并修复您的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T03:20:24.617

您正在访问数组的元素`randomSize`。这个数组有多长？让我们看看它的声明：

```
int[] randomSize = new int[sIncrement.length]; 
```

因此，它与数组的长度相同`sIncrement`。如果我们早一点看：

```
int[] sIncrement = new int[12]; 
```

的长度`sIncrement`，因此 的长度`randomSize`为 12。

在这段代码中：

```
for(int varCreator = 0; varCreator <= (width/s)+(height/s); varCreator++){
    randomSize[varCreator] = sIncrement[int(random(0,sIncrement.length-1))];
} 
```

用于访问数组元素的索引`randomSize`在变量`varCreator`中，从 0 到`(width/s)+(height/s)`. 由于 的长度`randomSize`是 12，所以只能使用 0 到 11 的索引来访问元素，否则会报错。

所以，如果`(width/s)+(height/s)`不应该是 12 或更多。这个多少钱 ？

这就是我们陷入困境的地方，因为您的代码中没有任何内容告诉我们在哪里声明`width`和`height`声明。我们只知道`s`是50。

但是你有这些变量`wide`和`tall`，每个都等于 600。我将大胆猜测并估计在你的代码中的某个地方你有`width = wide`和`height = tall`。

所以`(width/s)+(height/s) = (600/50) + (600/50) = 12 + 12 = 24`

就是这样。`varCreator`从 0 到 24（包括在内），因此您超出了数组的范围。

# c++ - 关于正则表达式

> ID：14805313
> 
> 赞同：2
> 
> 时间：2013-02-11T03:06:44.497
> 
> 标签：c++, regex

我在解决这个问题时遇到了问题：[http ://regexone.com/lesson/13](http://regexone.com/lesson/13)

我试图做类似的事情：`(\d+x\d+)`

但为什么它不起作用？无论如何，我们如何使用“分组”？谢谢！

```
input text  required capturing group result
1280x720    1280, 720
1920x1600   1920, 1600
1024x768    1024, 768 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T03:10:34.163

捕获组用括号`(`和`)`.

在您的 regex`(\d+x\d+)`中，有一个捕获组 - 整个`\d+x\d+`事物，因为整个 regex 都被一个捕获组包围。

特别是在那个问题中，您想获得两个单独的数字。因此，一组应“捕获”一个数字，另一组“捕获”另一个数字。

因此，对于第一组，您将仅捕获第一个数字（字符序列） - `(\d+)`。第二个也是一样。

此外，您不需要`x`，因此您可以将其放在任何捕获组之外。

因此，`(\d+)x(\d+)`将是你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T03:10:41.323

该练习是关于*捕获组*的。要求是分别捕获*两个*数字序列，并跳过`x`，如下所示：

```
(\d+)x(\d+) 
```

另一方面，您的解决方案将整个输入捕获到由括号表示的单个捕获组中。

当您需要处理正则表达式捕获的输入的各个部分时，捕获组的概念非常重要，而不是处理整个捕获。在链接的示例中，您可以获取分辨率的水平分量的第一组，以及分辨率的垂直分量的第二组。如果没有两个单独的捕获组，您将需要`x`在代码中找到并进行额外的拆分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T03:12:15.273

您想要匹配两个特定的东西 - x 和 y 分辨率。这意味着，您需要两组。

所以，你知道你需要：`()()`

您不希望捕获 x 并且 x 位于您想要捕获的内容之间： `()x()`

最后，我们需要填写我们要搜索的内容。我们需要*一个或多个*(+) 数字 (\d)。因此，完成的正则表达式为：

`(\d+)x(\d+)`

# php - 如何用 mysql_select_db 访问这种结构

> ID：14805314
> 
> 赞同：0
> 
> 时间：2013-02-11T03:06:45.740
> 
> 标签：php, mysql

抱歉，这听起来像是一个愚蠢的问题，但甚至不知道如何在 Google 上查找有关此的术语，这是图片：

[一只忙碌的猫 http://img259.imageshack.us/img259/5041/structure.png](http://img259.imageshack.us/img259/5041/structure.png)

我正在尝试访问数据库_users，

尝试使用以下内容：

```
mysql_select_db("_users");
mysql_select_db("thedrive_users");
mysql_select_db("thedrive"); 
```

没有一个允许我对 _users 内的任何表执行查询，所有关于它不是 mysql 的有效资源的警告。

顺便说一句，连接很好，指向资源而不是错误的

```
mysql_connect 
```

我也知道我应该继续使用 PDO，但要非常习惯这种语法。

我在 phpmyadmin 的生活中从未见过这样的子集，这就是问题所在。例如，我可以毫无问题地访问 information_schema

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T03:12:26.797

这是：

```
<?php
$link = mysql_connect('localhost', 'mysql_user', 'mysql_password');
if (!$link) {
    die('Could not connect: ' . mysql_error());
}
echo 'Connected successfully';
mysql_close($link);
?> 
```

mysql连接。首先，您必须连接 mysql 数据库。连接到数据库后，您可以从数据库中获取行。

一个简单的例子：users表名为users：第一行：id，第二行：名字第三行：密码

你可以像这样得到它们：

```
$query = mysql_query('SELECT * FROM users');

while ($i = mysql_fetch_assoc($query))
{
print('id:'.$i["id"].' name:'.$i["name"]);
} 
```

你明白吗？但是有一个很好的教程： http: [//www.learnphpin24hours.org/](http://www.learnphpin24hours.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T03:15:47.950

你试过用

```
 $hostname = "localhost";
 $database = "thedrive_users";
 $username = "username";
 $password = "password";
 $Connect_db = mysql_pconnect($hostname, $username, $password) or             trigger_error(mysql_error(),E_USER_ERROR);

 mysql_select_db($database, $Connect_db); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T03:17:37.020

您无需选择数据库，`mysql_select_db`只需确保在查询中引用数据库即可：

```
mysql_query('SELECT * FROM thedrive_users.table_name'); 
```

如果这不起作用，您可能无权使用您提供的登录详细信息访问数据库。

而且，是的，通常是关于不使用`mysql_*`等等等等。

# javascript - jQuery / Javascript 将选项项附加到 IE7/8 中的选择

> ID：14805317
> 
> 赞同：0
> 
> 时间：2013-02-11T03:07:03.513
> 
> 标签：javascript, jquery, json, internet-explorer-8, internet-explorer-7

我有以下代码，它从 json 请求中获取名称和值的数组，并将它们附加到 html 页面中的选择项。

到目前为止，它在除 IE 之外的所有浏览器中都适用于我，而不是预期的结果

```
<option value="211">Bakery and Cafe</option> 
```

我得到一个结果

```
<option value="211"/> 
```

Javascript：

```
$.getJSON(link,function(data) {
                $('#CltOrgType').find('option').remove().end();
            for (key in data){
                alert(data[key][0],data[key][1]);
                var option = new Option(data[key][0],data[key][1],false,false);
                $('#CltOrgType').append(option);
            }
        }); 
```

JSON 响应如下所示

```
[[ "Asian Cuisine" , "200" ], [ "Bakery and Cafe" , "211" ], [ "Breakfast, Lunch & Snacks" , "215" ], [ "Cafe" , "195" ], [ "Fully Licensed Restuarant" , "205" ], [ "Japanese Cuisine" , "210" ], [ "Licensed Italian Cuisine" , "206" ], [ "Middle Eastern Cuisine" , "209" ], [ "Pizza Restaurant" , "199" ], [ "Salads, Soups & Sandwiches" , "213" ], [ "Sandwiches and Wraps" , "207" ], [ "Sushi" , "214" ], [ "Take Away" , "208" ], [ "Yoghurt and Salads" , "212" ]] 
```

并且所有浏览器都使用 console.log(data[key][0] +","+data[key][1]) 或 alert(data[key][0] +","+data[key ][1])

任何想法、解决方案或想法将不胜感激！因为这个让我卡了一段时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T03:13:01.923

为什么要在数组上使用 for-in？您知道您可以使用 jquery 即时创建元素吗？

```
$.getJSON(link,function(data) {

  var cot = $('#CltOrgType');

  cot.empty();

  $.each(data,function(i,val){
    $('<option/>',{
      value : val[1]
    })
    .text(val[0])
    .appendTo(cot);
  });
}); 
```

# android - Android BatteryManager 仅返回 1

> ID：14805318
> 
> 赞同：3
> 
> 时间：2013-02-11T03:07:03.807
> 
> 标签：android, broadcastreceiver, battery, repeatingalarm

当我的重复警报广播被调用时，我正在尝试读取 Android 电池的状态，我有以下设置：

```
public class RepeatingAlarm extends BroadcastReceiver {

    @Override       
    public void onReceive(Context context, Intent intent)
    {

            // Acquire the make of the device
            final String PhoneModel = android.os.Build.MODEL;
            final String AndroidVersion = android.os.Build.VERSION.RELEASE;

            // Grab the battery information
            int level = intent.getIntExtra(BatteryManager.EXTRA_LEVEL, -1);
            int scale = intent.getIntExtra(BatteryManager.EXTRA_SCALE, -1);
            final float batteryPct = level / (float)scale; 
    }

} 
```

但我不明白为什么它会返回那个`batteryPct = 1`. 我在这里缺少什么吗？我根据 android Google 页面添加了正确的权限，但这似乎没有帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-11T03:22:13.150

你得到`-1`了`level`和`scale`。那是因为您可能正在尝试`ACTION_BATTERY_CHANGED`在清单中进行广播。

`ACTION_BATTERY_CHANGED`是一个粘性意图，您不能在清单中注册接收器。尝试以下

```
 Intent i = new ContextWrapper(applicationContext).registerReceiver(null, new IntentFilter(Intent.ACTION_BATTERY_CHANGED));
 // now you can get the level and scale from this intent variable
int level = i.getIntExtra(BatteryManager.EXTRA_LEVEL, -1);
int scale = i.getIntExtra(BatteryManager.EXTRA_SCALE, -1);

float battPct = level/(float)scale; 
```

您不需要为此意图设备接收器，只需使用上述方式，无论您想在哪里使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T03:11:27.160

您可能会得到 -1`level`和`scale`变量（您指定的默认值），因此请尝试打印它们的值以确保`intent`正确设置了这些值。

您应该听听以`ACTION_BATTERY_CHANGED`获取[Android 中的电池电量](https://stackoverflow.com/questions/3661464/get-battery-level-before-broadcast-receiver-responds-for-intent-action-battery-c)

# ruby-on-rails - 电子邮件正文中的真实性令牌

> ID：14805320
> 
> 赞同：0
> 
> 时间：2013-02-11T03:07:37.883
> 
> 标签：ruby-on-rails, ruby

我有一个 Rails 应用程序，我有一个按钮，可以让用户使用 mailto 发送电子邮件。

这是代码：

```
<%= button_to('e-mail Us', href="mailto:<email address>?subject=Private Lessons", :class => 'btn btn-large btn-success') %> 
```

它工作正常，但是当电子邮件打开时，电子邮件正文中包含此内容。

```
authenticity_token=8wK4ulAWh4MedTQ7FwZw0YRyLCJtNpjnP040atdFnxA%3D 
```

我绝对不需要它在电子邮件中。我该怎么做才能让它不出现？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T03:37:07.877

您可以改用 mail_to 辅助方法：

`<%= mail_to "test@test.com","email-Us", :subject => "Private Lessons" %>`

您可以在此处找到更多示例：http: [//api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-mail_to](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-mail_to)

问候，

-费尔南多

# php - 如何从 MySQL 表中遍历数组

> ID：14805321
> 
> 赞同：1
> 
> 时间：2013-02-11T03:08:03.080
> 
> 标签：php, mysql

我在一个类似于这个的 MySQL 表中有一个输入...

```
1234567899, 3216549877, 6549873211, 9876543214, 1472583699 
```

...当我用 PHP 检索它时，它返回为 ...

```
Array([0] => 1234567899, 3216549877, 6549873211, 9876543214, 1472583699) 
```

我不应该对此有任何麻烦，但是我的大脑在放屁，我想不通！我如何获得个人价值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T03:09:19.090

爆炸值应该可以解决问题：

[http://php.net/explode](http://php.net/explode)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T03:21:53.790

您可以使用[explode()](http://php.net/manual/en/function.explode.php)一个适合您的示例：

```
$mysql_result = "1234567899, 3216549877, 6549873211, 9876543214, 1472583699";
$array = explode(", ",$mysql_result);

foreach($array as $key=>$value){
    echo $value."<br />";
    //$value will equal each of the elements that are seperate by a comma and a space above
}
/*

Result will look like this:
1234567899
3216549877
6549873211
9876543214
1472583699
*/ 
```

# web-services - CXF、蓝图、OSGI：保护我的 Web 服务

> ID：14805325
> 
> 赞同：1
> 
> 时间：2013-02-11T03:08:35.850
> 
> 标签：web-services, rest, cxf, blueprint

请原谅我这个非常愚蠢的问题。

我目前在 CXF 上运行了一些 RESTful/SOAP Web 服务。（实际上是三个）这是一个示例

```
<blueprint ...>
 <reference id="myWebServiceRef"
  interface="com.keeboi.samples.MyWebService" />
 <jaxrs:server address="/my-web-service" id="myWebService">
  <jaxrs:serviceBeans>
   <ref component-id="myWebServiceImpl" />
  </jaxrs:serviceBeans>
 </jaxrs:server>
 <bean id="myWebServiceImpl"
  class="com.keeboi.samples.MyWebServiceImpl">
  <property name="myWebService" ref="myWebServiceRef" />
 </bean>
</blueprint> 
```

我通过 ajax 调用访问它们

```
$.ajax({
    url : ws_url + id,
    type : "GET",
    dataType : 'text',
}).done(function(data) {
    // Magic happens
}); 
```

我希望这些 Web 服务在内部使用时无法被用户完成的请求访问。如何保护这些 Web 服务？

添加：

```
<jaxrs:properties>
  <entry key="org.apache.cxf.endpoint.private" value="true" />
</jaxrs:properties> 
```

将它们设为私有但无法访问我的 ajax 请求......我显然在这里遗漏了一些东西。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-29T05:16:27.330

我不确定ajax部分。但是尝试回答 cxf 安全部分

在蓝图配置中添加以下配置：

```
 <httpj:engine-factory bus="cxf">
 <httpj:engine port="9081">
<httpj:tlsServerParameters>
  <sec:keyManagers keyPassword="skpass">
       <sec:keyStore type="JKS" password="sspass"
             resource="keystore/serviceKeystore.jks"/>
  </sec:keyManagers>
  <sec:trustManagers>
      <sec:keyStore type="JKS" password="sspass"
            resource="keystore/serviceKeystore.jks"/>
  </sec:trustManagers>
  <sec:cipherSuitesFilter>
    <sec:include>.*_EXPORT_.*</sec:include>
    <sec:include>.*_EXPORT1024_.*</sec:include>
    <sec:include>.*_WITH_DES_.*</sec:include>
    <sec:include>.*_WITH_AES_.*</sec:include>
    <sec:include>.*_WITH_NULL_.*</sec:include>
    <sec:exclude>.*_DH_anon_.*</sec:exclude>
  </sec:cipherSuitesFilter>
  <sec:clientAuthentication want="false" required="false"/>
</httpj:tlsServerParameters> 
```

您可以参考 [配置 SSL] 了解更多信息[1](http://cxf.apache.org/docs/standalone-http-transport.html)

# cocos2d-iphone - CCMenu 在其他地方触摸时响应触摸

> ID：14805334
> 
> 赞同：1
> 
> 时间：2013-02-11T03:10:28.093
> 
> 标签：cocos2d-iphone, touch, ccmenuitem, ccmenu

这是我用来显示菜单的代码。

```
CCMenu *topMenu = [CCMenu menuWithItems:menuItem1, menuItem2, menuItem3, menuItem4, menuItem5, menuItem6, menuItem7, menuItem8, nil];
[topMenu alignItemsHorizontallyWithPadding:0.0f];
topMenu.position = ccp(winSize.width/2, 725);
[self addChild:topMenu]; 
```

我确信这个菜单只会被添加一次。但是由于一些奇怪的原因，触摸附图中显示的区域会激活我的菜单。（当我的手指完全在其他地方时，您可以看到选择的“主页”菜单项。

![触摸其他地方时，CCMenu 显示 Home 按钮处于按下状态的触摸问题](../Images/fe228d86db70799197dfe55e94262b10.png)

触摸稍微向右的区域会激活“级别”菜单，触摸更右侧的区域会激活“章节”菜单。似乎添加了另一个“不可见”菜单。

右侧窗格是来自 XIB 的 UIViewController 添加到 CCDirector 的视图。我目前正在这个视图控制器中进行触摸以避免上述行为。任何想法为什么会发生这种情况？

# php - 用于 CSV 数据映射的 CakePHP 数组合并

> ID：14805336
> 
> 赞同：1
> 
> 时间：2013-02-11T03:10:38.690
> 
> 标签：php, cakephp

我有一个读取 CSV 文件的应用程序（使用 CakeDC CsvImportBehavior），然后显示一个屏幕供用户将 CSV 文件中找到的字段映射到数据库表。这一切都很好。我创建了一个显示数据库模型表单字段的视图，并带有选择框来选择与该模型行关联的 CSV 行。保存时有 3 个数组：

1.  字段映射数组：

    ```
    array(
    'Map' => array(
        'name' => '0',
        'address' => '5',
        'city' => '6',
        'use_city' => '1',
        'state' => '7',
        'use_state' => '1',
        'zip' => '8',
        'use_zip' => '1',
        'details' => '12'
    ) 
    ```

    )

2.  CSV 标头数组

    ```
    array(
    (int) 0 => 'Name',
    (int) 1 => 'Email',
    (int) 2 => 'HR',
    (int) 3 => 'HR Email',
    (int) 4 => 'Company',
    (int) 5 => 'Address',
    (int) 6 => 'City',
    (int) 7 => 'State',
    (int) 8 => 'Zip',
    (int) 9 => 'Phone',
    (int) 10 => 'Number',
    (int) 11 => 'Frequency',
    (int) 12 => 'Details',
    (int) 13 => 'Date Signed' 
    ```

    )

3.  具有 CSV 标头作为属性的模型数组（这是需要修改的模型）

    ```
    array(
    (int) 0 => array(
        'Marker' => array(
        'Name' => 'Randy Watson',
        'Email' => ' @SBCGlobal.net',
        'HR' => 'Randy Watson',
        'HR_Email' => 'bogusjunk@sbcglobal.net',
        'Company' => 'Secure Financial, Inc.',
        'Address' => '2865 Sombrero Circle',
        'City' => 'San Ramon',
        'State' => 'CA',
        'Zip' => '94583',
        'Phone' => '925-973-1088',
        'Number' => '6',
        'Frequency' => '$60',
        'Details' => '',
        'Date_Signed' => 'Mar 6, 11:10 2011'
        )
    ), 
    ```

    ...

所以基本上我必须让数组 #3 的键代表数组 #1 中所做的选择，以便它们匹配并且可以通过 model->save() 保存......非常感谢任何输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T08:42:51.907

我不确定，也许这有任何帮助： [http ://dev.mysql.com/doc/refman/5.1/en/load-data.html](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)

# c++ - 标记为“显式”的 C++11 initializer_list 构造函数

> ID：14805338
> 
> 赞同：8
> 
> 时间：2013-02-11T03:10:45.440
> 
> 标签：c++, c++11, initializer-list, explicit-constructor

我可以将显式与 init-list ctor 一起使用来确保像 {a} 这样的表达式不会导致意外的隐式转换吗？还有一个想法：我**应该**担心吗？与简单的相比，编写`{a}`错误的可能性更小`a`，但另一方面，从代码中可能仍不清楚我们正在通过隐式转换构造对象。

```
class Foo
{
    explicit Foo (std::initializer_list<Bar> ilist) { /*...*/}
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T22:15:55.143

你不能。它*确实会*导致意外的隐式转换。

但是，不允许意外的隐式转换，编译器将拒绝您的程序。然而，这并不能阻止编译器选择或考虑它。例子

```
 void f(Foo);
 void f(std::vector<Bar>);

 int main() {
   // ambiguous
   f({bar1, bar2, bar3});
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T03:17:45.060

你当然可以。是否真的应该取决于情况，尽管我认为一般来说很少见。

# php - PDO PHP 错误 - 参数号无效

> ID：14805340
> 
> 赞同：-1
> 
> 时间：2013-02-11T03:11:00.603
> 
> 标签：php, pdo

我收到以下错误。有人在我的代码中看到问题吗？谢谢。

警告：PDOStatement::execute() [pdostatement.execute]: SQLSTATE[HY093]: Invalid parameter number: parameter was not defined in (my file) on line 309 (the execute line)

注意：名称中带有“array”的变量不是实际的数组。

```
$STH = $DBH->prepare("select jp.jobpost_id,jp.zipcode FROM jobposts jp JOIN zipcodes zc ON jp.zipcode=zc.zipcode JOIN employers em ON jp.employerid=em.employerid WHERE MATCH (jp.description) AGAINST (:keyword IN BOOLEAN MODE) AND
                                   jp.empstage LIKE :active
                               AND jp.title LIKE :title
                               AND jp.level >= :minlevel
                               AND jp.level <= :maxlevel
                               AND jp.experience >= :minexperience
                               AND jp.experience <= :maxexperience
                               AND jp.travel >= :mintravel
                               AND jp.travel <= :maxtravel
                               AND jp.education >= :mineducation
                               AND jp.education <= :maxeducation
                               AND jp.clearance >= :minclearance
                               AND jp.clearance <= :maxclearance
                               AND jp.hiredate >= :minhiredate
                               AND jp.hiredate <= :maxhiredate
                               AND jp.startdate >= :minstartdate
                               AND jp.startdate <= :maxstartdate
                               AND jp.probhire >= :minprobhire
                               AND jp.probhire <= :maxprobhire
                               AND jp.probstaff >= :minprobstaff
                               AND jp.probstaff <= :maxprobstaff
                               AND jp.salaryhigh >= :minsalaryhigh
                               AND jp.salaryhigh <= :maxsalaryhigh
                               AND jp.hourlyhigh >= :minhourlyhigh
                               AND jp.hourlyhigh <= :maxhourlyhigh
                               AND jp.salaryfee >= :minsalaryfee
                               AND jp.salaryfee <= :maxsalaryfee
                               AND jp.hourlyfee >= :minhourlyfee
                               AND jp.hourlyfee <= :maxhourlyfee
                               AND jp.shortcontractor LIKE :array_shortcontractor
                               AND jp.longcontractor LIKE :array_longcontractor
                               AND jp.tempperm LIKE :array_tempperm
                               AND jp.permplacement LIKE :array_permplacement
                               AND jp.open LIKE :like
                               AND em.staffingco NOT LIKE :staffingco
                               ");

                                ////// get results not factoring in zip code
                                $STH->bindValue(':keyword', $keyword);
                                $STH->bindValue(':active', 'active');
                                $STH->bindValue(':title', $title);
                                $STH->bindValue(':minlevel', $minlevel);
                                $STH->bindValue(':maxlevel', $maxlevel);
                                $STH->bindValue(':minexperience', $minexperience);
                                $STH->bindValue(':maxexperience', $maxexperience);
                                $STH->bindValue(':mintravel', $mintravel);
                                $STH->bindValue(':maxtravel', $maxtravel);
                                $STH->bindValue(':mineducation', $mineducation);
                                $STH->bindValue(':maxeducation', $maxeducation);
                                $STH->bindValue(':minclearance', $minclearance);
                                $STH->bindValue(':maxclearance', $maxclearance);
                                $STH->bindValue(':minhiredate', $minhiredate);
                                $STH->bindValue(':maxhiredate', $maxhiredate);
                                $STH->bindValue(':minstartdate', $minstartdate);
                                $STH->bindValue(':maxstartdate', $maxstartdate);
                                $STH->bindValue(':minprobhire', $minprobhire);
                                $STH->bindValue(':maxprobhire', $maxprobhire);
                                $STH->bindValue(':minprobstaff', $minprobstaff);
                                $STH->bindValue(':maxprobstaff', $maxprobstaff);
                                $STH->bindValue(':minsalaryhigh', $minsalaryhigh);
                                $STH->bindValue(':maxsalaryhigh', $maxsalaryhigh);
                                $STH->bindValue(':minhourlyhigh', $minhourlyhigh);
                                $STH->bindValue(':maxhourlyhigh', $maxhourlyhigh);
                                $STH->bindValue(':minsalaryfee', $minsalaryfee);
                                $STH->bindValue(':maxsalaryfee', $maxsalaryfee);
                                $STH->bindValue(':minhourlyfee', $minhourlyfee);
                                $STH->bindValue(':maxhourlyfee', $maxhourlyfee);
                                $STH->bindValue(':array_shortcontractor', $array_shortcontractor);
                                $STH->bindValue(':array_longcontractor', $array_longcontractor);
                                $STH->bindValue(':array_tempperm', $array_tempperm);
                                $STH->bindValue(':array_permplacement', $array_permplacement);
                                $STH->bindValue(':open', $open);
                                $STH->bindValue(':staffingco', $staffingco);
                                $STH->execute(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T03:20:45.510

这是 MySQL 的一个奇怪特性，但您不能在`MATCH() AGAINST()`.

您必须在之前插入字符串，`prepare()`因此它是 SQL 查询中的字符串文字。请务必使用`PDO::quote()`以确保正确转义特殊字符。

例子：

```
$keyword_quoted = $DBH->quote($keyword);

$STH = $DBH->prepare("select jp.jobpost_id,jp.zipcode 
  FROM jobposts jp 
  JOIN zipcodes zc ON jp.zipcode=zc.zipcode 
  JOIN employers em ON jp.employerid=em.employerid 
  WHERE MATCH (jp.description) AGAINST ($keyword_quoted IN BOOLEAN MODE) AND
  . . . 
```

当然你也可以跳过`bindValue($keyword)`。

# c# - 从计算机设置 Windows Mobile 设备系统时间？

> ID：14805345
> 
> 赞同：0
> 
> 时间：2013-02-11T03:11:59.817
> 
> 标签：c#, windows-mobile, compact-framework

我正在尝试将设备的系统日期和时间同步到它所停靠的桌面，我正在使用紧凑型框架 (C#)。

我的目标是检测设备上次同步到桌面计算机上的数据库的时间。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T14:44:08.310

这是我一直在使用的。我让我的设备在第一次启动数据库对象时同步。

```
#if PocketPC
[DllImport("coredll.dll")]
#else
[DllImport("kernel32.dll")]
#endif
private static extern bool SetLocalTime([In] ref SYSTEMTIME lpLocalTime); 
```

...是的，我对我的 Windows PC 使用与我的 WinMobile PC 相同的代码。

这个`NODATE`变量对我的整个项目都是全局的，定义为 1900 年 1 月 1 日。希望这家公司在那一天的 SQL Server 中没有发生任何事情！

从一个结构开始：

```
/// <summary>
/// SYSTEMTIME structure with some useful methods
/// </summary>
public struct SYSTEMTIME {
  public short Year, Month, DayOfWeek, Day, Hour, Minute, Second, Millisecond;
  /// <summary>
  /// Convert form System.DateTime
  /// </summary>
  /// <param name="time">Creates System Time from this variable</param>
  public void FromDateTime(DateTime time) {
    Year = (short)time.Year;
    Month = (short)time.Month;
    DayOfWeek = (short)time.DayOfWeek;
    Day = (short)time.Day;
    Hour = (short)time.Hour;
    Minute = (short)time.Minute;
    Second = (short)time.Second;
    Millisecond = (short)time.Millisecond;
  }
  /// <summary>
  /// Convert to System.DateTime
  /// </summary>
  public DateTime ToDateTime() {
    return new DateTime(Year, Month, Day, Hour, Minute, Second, Millisecond);
  }
  /// <summary>
  /// STATIC: Convert to System.DateTime
  /// </summary>
  public static DateTime ToDateTime(SYSTEMTIME time) {
    return time.ToDateTime();
  }
} 
```

然后就像我在这个方法中那样使用那个结构来进行调用（我与我们的 SQL Server 同步）。

```
/// <summary>
/// Synchronize the Time on the SQL Server with the time on the device
/// </summary>
public static int SyncWithSqlTime() { // pass in SQL Time and set time on device
  SYSTEMTIME st = new SYSTEMTIME();
  DateTime sqlTime = Global.NODATE;
  using (SqlCommand cmd = new SqlCommand("SELECT GETDATE() AS CurrentDateTime;", new SqlConnection(DataSettings.DatabaseConnectionString))) {
    try {
      cmd.Connection.Open();
      SqlDataReader r = cmd.ExecuteReader();
      while (r.Read()) {
        if (!r.IsDBNull(0)) {
          sqlTime = (DateTime)r[0];
        }
      }
    } catch (Exception) {
      return -1;
    }
  }
  if (sqlTime != Global.NODATE) {
    st.FromDateTime(sqlTime); // Convert to SYSTEMTIME
    if (SetLocalTime(ref st)) { //Call Win32 API to set time
      return 1;
    }
  }
  return 0;
} 
```

`if`底部的最后一个条件是我使用`SetLocalTime`.

希望这能让你有所收获，
~乔

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T06:04:31.813

我不确定最后一个问题是什么。如果您问，如何在设备对接时将设备时间与 PC 时间同步，那么您可以使用免费的 ITSUtils 和 PC 上的一些注册表更改来自动执行时间同步：注册表更改是

```
REGEDIT4
[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows CE Services\AutoStartOnConnect]
"OnConnect"="\"c:\\windows\\system32\\cmd.exe\" /c d:\\OnConnect\\install.bat" 
```

也见[这里](http://www.hjgode.de/wp/2010/02/26/pc-activesync-can-be-used-to-automate-tasks-on-device-connection/)和[这里](http://www.hjgode.de/dev/tipps.html#PC%20ActiveSync%20can%20be%20used%20to%20automate%20tasks%20on)和[这里](http://www.hjgode.de/dev/activesync/index.htm)

如果您有访问权限，您还可以查看我在[专家交流](http://www.experts-exchange.com/Programming/Handhelds_-_PDAs/Windows_Mobile/Q_26717185.html)中的帖子。

您可以使用任何 bat 或 cmd 文件代替 install.bat。itsutils包含一个名为[psynctime](http://www.xs4all.nl/~itsme/projects/xda/tools.html)的 PC 应用程序。您只需要在您在注册表中创建和链接的 bat/cmd 文件中启动 psynctime。然后设备时间将与您的 PC 时间同步。确保 bat 文件可以访问 itsutil 文件，或者将 itsutils 放在 PATH 环境的目录中或在 bat/cmd 的目录中。

作为替代方案，您必须编写一个 DLL 和一个 activesync 远程调用代码来同步时间。所以更容易使用 psynctime 工具。

您知道该设备可以通过您的 PC 的互联网连接使用互联网吗？请参阅 ActiveSync 连接设置并查找“PC 已连接到 Work/Internet/Automatic”。如果设置为自动或 Internet，您的设备应该能够通过 ActiveSync 连接访问 Internet。只需在设备上尝试 Internet Explorer Mobile 即可进行测试。如果它适合您，您还可以使用 Mitch 提供的代码使用 SNTP 服务。但是，您还必须添加检测设备何时通过 ActiveSync 连接的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T03:18:08.953

为什么不使用 SNTP（网络时间协议）将两者同步到国际标准时间：

[C# SNTP 客户端](http://www.codeguru.com/csharp/csharp/cs_date_time/timeroutines/article.php/c4207/C-SNTP-Client.htm)

然后你可以检查数据库上次更新时间。[我在移动设备上使用了链接代码]

该代码的使用方式如下（每小时调用一次，或您需要的任何刷新间隔）：

```
 SNTPClient client = new SNTPClient(sntpTimeServerString);
   client.Connect(5000, true);

   // Set system clock to timenow 
   DateTime timenow = client.ToTime(); 
```

更新（基于 OP 的评论）：由于您没有互联网连接，我认为您需要使用除时间以外的其他时间来确定上次同步。例如，使用最后一个序列 ID 来确定设备的本地数据库与桌面相比是否有变化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-25T10:02:05.440

远程 API 2 (RAPI2)。=> 你启动了两个 rapi.CreateProcess，一个用于日期，一个用于时间。

```
rapi.CreateProcess("cmd", "/c date " + DateTime.Now.ToString("dd-MM-yyyy"));
rapi.CreateProcess("cmd", "/c time " + DateTime.Now.ToString("HH:mm:ss")); 
```

它将打开两个窗口命令提示符以将手机与 PC 上的时钟同步。

# django - 拯救 Django 向导：不是很神奇

> ID：14805349
> 
> 赞同：0
> 
> 时间：2013-02-11T03:12:47.477
> 
> 标签：django, forms

谁能帮我弄清楚如何保存我的 django `FormWizard`？我已经搜索并阅读了几天的文档，但无法弄清楚为什么我的向导不会保存。

形式：

```
from django.contrib.formtools.wizard.views import SessionWizardView
from django.core.files.storage import FileSystemStorage

class StepOneForm(forms.Form):
    year = forms.ChoiceField(choices=YEAR_CHOICES)
    ....

class StepTwoForm(forms.Form):
    main_image = forms.ImageField()
    ....

class CreateWizard(SessionWizardView):
    file_storage = FileSystemStorage(location=os.path.join(settings.MEDIA_ROOT))
    def done(self, form_list, **kwargs):
        instance = MyModel()
        for form in form_list:
            for field, value in form.cleaned_data.iteritems():
                setattr(instance, field, value)
        instance.save()
        return render_to_response('wizard-done.html', {
            'form_data': [form.cleaned_data for form in form_list],
        }) 
```

楷模：

```
class MyModel(models.Model):
    user = models.ForeignKey(User)
    year = models.IntegerField(('year'), max_length=4, choices=YEAR_CHOICES, default=datetime.datetime.now().year)
    main_image = models.ImageField(upload_to='photos/main/')
    .....

    def save(self, **kwargs):
        slug = '%s %s %s %s' % (self.user, self.year, self.model, self.series)
        unique_slugify(self, slug)
        super(MyModel, self).save()
    def __unicode__(self):
        return '%s %s' % (self.user, self.year) 
```

回溯表明该错误来自我的模型，我在其中覆盖了 save 方法以创建 slug。这在我使用 . 时工作正常`ModelForm`，但似乎导致`FormWizard`.

```
Traceback:
File "/lib/python2.7/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/lib/python2.7/django/views/generic/base.py" in view
  48\.             return self.dispatch(request, *args, **kwargs)
File "/lib/python2.7/django/contrib/formtools/wizard/views.py" in dispatch
  223\.         response = super(WizardView, self).dispatch(request, *args, **kwargs)
File "/lib/python2.7/django/views/generic/base.py" in dispatch
  69\.         return handler(request, *args, **kwargs)
File "/lib/python2.7/django/contrib/formtools/wizard/views.py" in post
  286\.                 return self.render_done(form, **kwargs)
File "/lib/python2.7/django/contrib/formtools/wizard/views.py" in render_done
  328\.         done_response = self.done(final_form_list, **kwargs)
File "/myproject/myproject/forms.py" in done
  55\.         instance.save()
File "/myproject/myproject/models.py" in save
  95\.         slug = '%s %s %s %s' % (self.user, self.year, self.model, self.series)
File "/lib/python2.7/django/db/models/fields/related.py" in __get__
  343\.                 raise self.field.rel.to.DoesNotExist

Exception Type: DoesNotExist at /wizard/
Exception Value: 
```

你能帮我弄清楚如何保存向导，或者如何解决这个错误吗？谢谢你的想法！

* * *

编辑：在实施@Rohan 的建议之后。

```
Traceback:
File "/lib/python2.7/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/lib/python2.7/django/views/generic/base.py" in view
  48\.             return self.dispatch(request, *args, **kwargs)
File "/lib/python2.7/django/contrib/formtools/wizard/views.py" in dispatch
  223\.         response = super(WizardView, self).dispatch(request, *args, **kwargs)
File "/lib/python2.7/django/views/generic/base.py" in dispatch
  69\.         return handler(request, *args, **kwargs)
File "/lib/python2.7/django/contrib/formtools/wizard/views.py" in post
  286\.                 return self.render_done(form, **kwargs)
File "/lib/python2.7/django/contrib/formtools/wizard/views.py" in render_done
  328\.         done_response = self.done(final_form_list, **kwargs)
File "/myproject/myproject/forms.py" in done
  56\.         instance.save()
File "/myproject/myproject/models.py" in save
  97\.         super(MyModel, self).save()
File "/lib/python2.7/django/db/models/base.py" in save
  463\.         self.save_base(using=using, force_insert=force_insert, force_update=force_update)
File "/lib/python2.7/django/db/models/base.py" in save_base
  551\.                 result = manager._insert([self], fields=fields, return_id=update_pk, using=using, raw=raw)
File "/lib/python2.7/django/db/models/manager.py" in _insert
  203\.         return insert_query(self.model, objs, fields, **kwargs)
File "/lib/python2.7/django/db/models/query.py" in insert_query
  1593\.     return query.get_compiler(using=using).execute_sql(return_id)
File "/lib/python2.7/django/db/models/sql/compiler.py" in execute_sql
  910\.             cursor.execute(sql, params)

Exception Type: InternalError at /wizard/
Exception Value: current transaction is aborted, commands ignored until end of transaction block 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T04:43:18.867

我认为最有可能`self.user`的`save()`方法是给您带来问题。当您尝试创建实例然后保存它时，它没有被设置。

在您的`done()`方法中，您需要`instance.user`在保存之前设置为预期值。

# symfony - 如何显示空白表格的集合？

> ID：14805351
> 
> 赞同：2
> 
> 时间：2013-02-11T03:13:12.840
> 
> 标签：symfony, symfony-2.1, symfony-forms

我了解如何显示表单域的集合，但是如何显示空白以将表单创建为空？我想做的是“Anagrafic”与“MailTelCont”具有一对多关系的表格。一个“Anagrafic”可以插入多个联系人（电子邮件、电话、传真等）。

```
->add('mailTelContacts', 'collection', array('type' => new MailTelContType(), 
                'allow_add' => true,
                'by_reference' => true
            )) 
```

我的模板：

```
{{ form_row(form3.mailTelContacts) }} 
```

当我查看空白表单时，此字段不显示！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T06:31:43.887

如果您尝试这样做：

* * *

![显示表单集合](../Images/e3957d55d382ff57aed9799af1eb9b60.png)

* * *

您需要使用原型，您正在寻找的是在食谱中：

[如何嵌入表单集合](http://symfony.com/doc/2.0/cookbook/form/form_collections.html)

特别注意[允许带有原型的新标签](http://symfony.com/doc/2.0/cookbook/form/form_collections.html#allowing-new-tags-with-the-prototype)。

## 编辑

```
How can I have an empty field when loading the page? 
```

`addTagForm(collectionHolder, $newLinkLi);`只需在 jQuery 脚本的末尾添加等效的，以便在加载页面时自动添加一行。

这将给出：

```
jQuery(document).ready(function() {
    // ...

    // Add empty form on page loading
    addTagForm(collectionHolder, $newLinkLi);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T09:16:34.900

您可以在 createForm() 调用中添加一个空的虚拟对象

```
$this->createForm(new CustomFormType(),$dummy); 
```

如果设置`by_reference`为 false 会发生什么？

# xcode - Xcode 无法从我的自定义库中识别 ViewContoller

> ID：14805353
> 
> 赞同：0
> 
> 时间：2013-02-11T03:13:21.783
> 
> 标签：xcode, viewcontroller, i386

我有几个项目共享许多相同的类和自定义视图/视图控制器，因此我创建了一个自定义静态库，其中包含这些通用类，可直接在我的客户端项目中使用。

这些是我采取的步骤：

1.  我创建并编译了静态库，将生成的 .a 和公共 .h 文件复制到我桌面上的文件夹 (myLib) 中。

2.  我将 myLib 文件夹拖放到我的客户端项目中。我通过引用复制，并没有复制我的客户项目下的物理文件。正如预期的那样，目标的构建阶段“将二进制文件与库链接”阶段自动包含 .a 文件。

3.  我使用客户端项目的故事板引用了 View Contollers。这些类按预期自动完成，因此 Xcode 识别它们的存在。

4.  我在我的客户端项目构建设置和目标构建设置下设置了 -ObjC 和 -all_load 链接器标志。

5.  我成功地清理并构建了客户端项目。

6.  我运行了客户端项目，但自定义视图没有加载，引用了“Interface Builder 文件中的未知类 [myViewController]”。

第6步是我现在面临的问题。以下是一些可能有用的其他观察结果：

*   在文件检查器中，标题的目标成员资格是空白的；客户项目列在 Target Membership 标题下，但该复选框已禁用且未选中。然而，myLib.a 目标成员资格被选中。

*   我尝试在客户端项目中创建 myViewController (clientViewController) 的子类，并改为引用此类。当我构建客户端项目时，我收到一个错误：

    > “警告：找不到选项‘-L/Users/[me]/Desktop/Projects/[clientProject]/[myLib] 的目录；架构 i386 的未定义符号：[clientViewController.o] 中的 [clientViewController]。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T03:18:02.563

构建时的模拟器选项，看起来你错过了。就用这个。这是制作一个通用框架就像制作一个常规库一样容易： [iOS-Universal-Framework](https://github.com/kstenerud/iOS-Universal-Framework)

另请阅读这篇文章：[如何在 Xcode 4 上创建通用静态库：传统方式](http://blog.boreal-kiss.net/2011/03/15/how-to-create-universal-static-libraries-on-xcode-4/)

# ruby-on-rails - 未定义的方法“角色？” 对于零：NilClass

> ID：14805354
> 
> 赞同：0
> 
> 时间：2013-02-11T03:14:13.350
> 
> 标签：ruby-on-rails, cancan

我正在尝试在我的 rails 应用程序上使用 CanCan。我遵循了我之前在其他项目中使用的相同教程并得到了这个工作。我的以下设置如下：

似乎当我尝试访问我的应用程序时，我得到了

```
undefined method `role?' for nil:NilClass 
```

这指向我的以下行`application/layout.html.erb`

```
 <% if @user.role? :administrator %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T03:36:26.140

问题是它`@user`并不总是在每个控制器动作中定义，但是您的布局正在呈现在每个控制器动作上，因此`@user`有时会为空。要解决此问题，只需检查您的 if 语句中是否定义了 @user，如下所示：

```
<% if @user && @user.role?(:administrator) %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T03:56:26.167

问题是@user 方法似乎为零。并且根据 cancan 文档，它期望存在[current_user](https://github.com/ryanb/cancan#getting-started)方法，

而且我可以看到你已经注释掉了

[before_filter :authenticate_user！](https://github.com/ryanb/cancan#getting-started)，使其启用，以便创建当前用户，

并启用`load_and_authorize_resource`, for cancan 正常工作。

# matlab - 创建对角矩阵（更高维度）

> ID：14805355
> 
> 赞同：2
> 
> 时间：2013-02-11T03:14:26.733
> 
> 标签：matlab

我有一个`n`*`m`矩阵，比如说`A`。我想创建以下`m`* `m`*`n`矩阵，比如说`B`

```
for j=1:n
    B(:,:,j)=diag(A(j,:));
end 
```

我如何做到这一点而不必循环？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T03:46:44.383

**更新：**我已经编辑了问题以修复示例代码中的拼写错误。

我相当确定您的示例代码包含几个拼写错误，因为目前矩阵`A`没有任何用途，您的循环下标也没有`j`。但是，您实际上想问的是：如何构建一个 3d 数组，其中每个对角线（沿第 3 维移动）都是来自 的一行`A`，而不进行循环？

如果这是正确的，那么一个答案如下：

```
%# A loop-less solution
Soln2 = zeros(M, M, N);
Soln2(bsxfun(@plus, (1:M+1:M*M)', (0:M^2:(N-1)*M^2))) = A'; 
```

基本上我所做的只是预先分配解决方案 3d 数组，然后用于`bsxfun`构造所有对角线的线性索引，沿第三维移动。然后我将（因为你想要行而不是列）的转置分配给`A`解决方案数组中的线性索引。

请注意，我在下面粘贴了一些示例代码用于测试目的。请确认我对基于循环的解决方案的解释是您真正想要的。

```
%# Set some parameters and create a random matrix A
N = 3;
M = 4;
A = randi(5, N, M);

%# Your loop based solution
Soln1 = nan(M, M, N);
for n = 1:N
    Soln1(:,:,n) = diag(A(n,:));
end

%# A loop-less solution
Soln2 = zeros(M, M, N);
Soln2(bsxfun(@plus, (1:M+1:M*M)', (0:M^2:(N-1)*M^2))) = A'; 
```

# javascript - 停止用户在页面上按 Shift+F5

> ID：14805360
> 
> 赞同：0
> 
> 时间：2013-02-11T03:15:25.197
> 
> 标签：javascript, jquery

这里有人知道如何通过 JavaScript 或 jQuery 阻止用户在页面上使用 Shift+F5 或 F5（刷新页面）吗？

原因只是在用户单击“提交”按钮然后再次按 F5 后停止页面以将相同的变量重新提交到服务器端。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T04:13:33.267

答案不是停止页面刷新，而是让它刷新不会再次发布数据：通过让您的服务器脚本[在处理表单后发出重定向](http://en.wikipedia.org/wiki/Post/Redirect/Get)来做到这一点。然后浏览器将获取指定的 url（它甚至可能是相同的 URL），因此刷新不再发出 POST，而是发出 GET。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T03:18:59.967

已编辑.. 很遗憾地说，但没有比这更好的解决方案了。

```
<script type="text/javascript">
    window.onbeforeunload = function(event)
    {
        event = event || window.event;

        // For IE and Firefox (older versions)
        if (event) {
            event.returnValue = 'Are you sure you want to do this?';
        }

        // For Safari
        return 'Are you sure you want to do this?';
    }
</script> 
```

--- 只想添加以下内容：

嘿，我一直在玩我上面发布的代码.. 我没注意到它实际上仍在刷新.. 唯一可能的解决方案是提高弹出对话框，如果他们真的从用户那里确认想要离开/刷新页面。

我正在更新我的代码以反映我刚才所说的内容。

# java - 通过将值作为参数传递来从排序列表中删除节点

> ID：14805362
> 
> 赞同：0
> 
> 时间：2013-02-11T03:15:33.707
> 
> 标签：java

您好我正在尝试通过将值作为参数传递来从有序列表中删除一个节点，但我总是得到空指针异常。以下是我用来执行此操作的方法。

```
public void sortedDelete(int social){
    if(sortedIsEmpty()){
        System.out.println("List is Empty");
    }
    else if(sortedSize() == 1){
        if(head.getData() == social)
            head = null;
    }else{
        SocialNode x = head;
        if(x.getData() == social)
            head = head.getNext();
        else{
            int count = 1;
            x = x.getNext();
            while(x!= null){
                if(x.getData() == social && x.getNext() != null){
                    sortedGet(count-1).setNext(sortedGet(count+1));
                }else if(x.getData() == social && x.getNext() == null){
                    sortedGet(count-1).setNext(null);
                }
                x = x.getNext();
                count ++;
            }
        }
    }
} 
```

完整的类代码在这里 [用Java实现一个列表](https://stackoverflow.com/questions/14804680/implementation-of-a-list-in-java/14804705#comment20735662_14804705)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T03:37:01.873

使用 arrayList 的更好方法，但我可以看到在您的情况下不允许使用 arrayList。在这种情况下，您需要删除旧数组并创建一个大小比原始数组小 1 的新数组，并将旧数组复制到新数组。您可以参考以下代码。

```
package com.rais;

public class ArrayExample {

    public static void main(String[] args) {
        int[] numbers = {1,2,3,4,5,6,7};

        numbers = remove(numbers, 4);

        for (int i : numbers) {
            System.out.println(i);
        }

    }

    public static int[] remove(int[] originalArray, int elemntToDelete)
    {
        for (int i = 0; i < originalArray.length; i++)
        {
            if (originalArray[i] == elemntToDelete)
            {
                int[] newArray = new int[originalArray.length-1];
                System.arraycopy(originalArray, 0, newArray, 0, i);
                System.arraycopy(originalArray, i+1, newArray, i, originalArray.length-i-1);
                return newArray;
            }
        }
        return originalArray;
    }

} 
```

# javascript - 在 jQuery 中查找下一个元素

> ID：14805369
> 
> 赞同：1
> 
> 时间：2013-02-11T03:17:32.433
> 
> 标签：javascript, jquery, dom

我有这样的事情：

```
<div class='span6'>
    <div class='row-fluid'>
       <div class='span2 search'>
          <img src='img.png'/> <!-- when clicked -->
       </div>
       <div class='span10'>
          <div class='name-info' id="test">  <!-- get this id -->
            <h4 class="name"><?php echo $name;?></h4>
            <div class='address'>
              <?php echo $location;?>
           </div>
         </div> <!-- end name-info -->
      </div>
    </div> <!-- end name-block -->
</div>
<div class='span6'>
    <div class='row-fluid'>
       <div class='span2 search'>
          <img src='img.png'/>  <!-- when clicked -->
       </div>
       <div class='span10'>
          <div class='name-info' id="test">  <!-- get this id -->
            <h4 class="name"><?php echo $name;?></h4>
            <div class='address'>
              <?php echo $location;?>
           </div>
         </div> <!-- end name-info -->
      </div>
    </div> <!-- end name-block -->
</div>

$('.search img').on('click',function(){
    alert($(this).next('.name-info').attr("id"));
}); 
```

我有两个确切的 div，我正在尝试单击一个 img，当我单击图像时，它应该能够获取 class 的 id，`name-info`我该怎么做？我尝试了一些函数，但不熟悉所有 jQuery 函数。请问需要帮助吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T03:23:44.727

```
$(".span2 img").on('click', function () {
    console.log($(this).parent().next().find('.name-info').attr('id'));
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T03:25:34.150

这应该做

```
$('.search img').on('click',function(e){
    alert($(this).parent().next().find('.name-info').attr('id'))
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/ZgT7u/)

由于您正在单击`img`元素，因此您需要获取`next slibling`父元素的 ，然后找到具有 class 的元素`name-info`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T03:20:49.193

我认为 $('.searchimg') 应该是 $('.search img') 你正在尝试做的事情......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T03:32:47.203

试试这个：

```
$('.searchimg').on('click',function(){
    alert($(this).parent().next().children('.name-info').attr("id"));
}); 
```

# release - 发布软件时要随二进制文件一起提供哪些文件？

> ID：14805371
> 
> 赞同：-1
> 
> 时间：2013-02-11T03:17:36.283
> 
> 标签：release, production

我是一名大学生，知道如何用 C++、C#.NET 和 Java 编写代码。

问题是我们可以创建程序，让它们工作，等等。（对不起，如果这听起来含糊不清）

但是，在向客户发送二进制文件时，是否遵循了行业范围的标准？不用担心许可证，但是，例如，在 C:\Program Files\MyApp\ 中查看我的应用程序（与安装程序捆绑时），您可能会找到我的可执行文件和其他必要的 DLL/二进制文件，但是，请查看其他一些包（专业）用 Java/C#.NET 制作，

一个人会发现许多文件，目录井井有条。

我关心的是，如何制作可以交付给用户的“专业”发布软件（以及要包含的所有额外文件以及原因）？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T03:28:08.500

通常，通过在 Internet 上分发，您希望提供一个安装程序文件，该文件将解压您的程序所需的任何库和资源。您的程序非常简单，并且不依赖于多个外部模块，因此您无需在分发包中包含多个文件，只需包含可执行文件即可。当您开始生成需要访问 3rd 方 API 的应用程序时，您需要将它们绑定到安装包。

# matlab - 按下按钮中的新图形

> ID：14805374
> 
> 赞同：0
> 
> 时间：2013-02-11T03:17:45.077
> 
> 标签：matlab

任何人都知道在 gui 模式下按下按钮时打开新图形的正确语法是什么？

如何在 gui 中实现此代码？

```
 function GUI1
    fig1 = figure('Name', 'GUI 1');
    uicontrol('String', 'Start GUI2', 'Callback', 'GUI2');
  return; 
```

与图二相同的代码，

如果您有其他易于理解的代码，我将不胜感激。

我是matlab的新手，我在这方面遇到了麻烦，在此先感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T04:59:59.870

如果您只是在按钮的回调中单独使用命令“figure”，它将默认创建一个新图形。要获得图形的句柄，您可以使用“gcf”。

# php - jQuery ajax 即使连接也会出错

> ID：14805375
> 
> 赞同：1
> 
> 时间：2013-02-11T03:17:54.400
> 
> 标签：php, jquery, ajax

这可能是一件非常小而愚蠢的事情，但问题是：我目前在我正在构建的一种在线文件管理器中使用 AJAX。它使用 AJAX 在服务器上的目录中列出文件，并且该调用工作得很好。我现在正在尝试为文件修改（重命名和删除）添加 AJAX 调用。使用 $.ajax，它成功地将数据发送到服务器，它完成了它应该做的事情。它成功地能够重命名和删除文件。但是，ajax 方法仍然执行错误代码。这是电话：

```
$.ajax({
    url: "server.php",
    data: {
        action: action,
        filepath: filename,
        newname: entName
    },
    type: "POST",
    dataType: "json",
    success: function (jd) {
        if (jd.status === "error") {
            if (debug) console.log("AJAX connection error");
            window.alert("AJAX error. Please try again later.");
        } else {
            if (debug) console.log("AJAX connection success for modification.");
            if (debug) console.log("JSON data:");
            if (debug) console.log(jd);
            //changeContent(filename, action);
        }
    },
    error: function () {
        window.alert("Unable to connect. Please try again.");
        //This gets executed
    },
}); 
```

我认为可能是服务器没有返回任何数据，所以我尝试了这段代码来测试它：

```
if ($action == "load") { //It isn't in this case - I use this to load content
    $files = glob("media/" . "*");

    echo json_encode($files);

} else {
    $files = glob("media/" . "*");
    echo json_encode($files);
} 
```

...而且我仍然收到一条错误消息。这里有什么问题？

# java - 如何从数组中删除一个元素？

> ID：14805378
> 
> 赞同：1
> 
> 时间：2013-02-11T03:18:02.107
> 
> 标签：java, arrays

我正试图从课程中删除一个学生，这就是我到目前为止所得到的......

```
public void dropStudent() {

 String id;     
 System.out.println(" Enter student ID " );     
 id = Keyboard.readString();

  for ( int i = 0; i <= students.length - 1; i++)   
  {
      if (id.equals(students[i].displayId()))
      {
          for (int j = i; j <= students.length - 1; j++)
          {
          students[i] = students[i+1];

          }

      }      
   } 
} 
```

所以第一个循环是针对数组的每个元素，if 语句是检查输入的 id 是否与数组中的学生 id 匹配。第二个“For”是将元素移回。当我尝试它时，它确实删除了一个特定的学生。但不是将元素移回，它只是在两个地方复制下一个元素。我试图将元素设置为 null，但它不起作用。

所以有什么建议吗？我也不允许使用数组列表或其他东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T03:32:57.767

实例化后无法更改 Java 数组的大小。如果只需要返回一个没有学生 ID 的数组。您想创建一个元素较少的新数组，并迭代原始数组，复制除您要删除的 id 之外的所有内容。

通常，您需要为此使用列表。但是鉴于您的限制，这就是我要解决的问题。

就像是：

```
public String[] dropStudent(String delete, String[] students){
    int length=students.length-1, i=0;
    String[] remainingStudents= new String[length];

    for(String student: students){
        // catch the edge case where 'delete' is not found, and avoid the ArrayIndexOutOfBoundsException
        if(i==remainingStudents.length){
            return students;
        }
        // Add the any non-matching students to the final array.
        if(!student.equals(delete)){
            remainingStudents[i]=student;
            i++;
        }
    }
    return remainingStudents;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T03:26:02.523

**替换**：

```
students[i] = students[i+1]; 
```

和：

```
students[j] = students[j+1]; 
```

实际上，您希望使用循环变量遍历数组的所有其余部分，`j`而不是使用`i`它表示要删除的学生的索引。

此外，您需要**更换循环**：

```
for (int j = i; j <= students.length - 1; j++) 
```

和

```
for (int j = i; j <= students.length - 2; j++) 
```

（注意 1 变成了 2）

原因是您使用`students`索引 j+1 进行访问，如果 j == students.length - 1，它将等于 students.length，因此您将遇到 ArrayOutOfBounException。

最后，您必须**将数组的最后一个元素设置为 null**（否则最后一个学生将被复制）。或者更好的是，您可以调整数组的大小（即创建一个新数组并复制其中的新学生列表）。

此外，如果您在数组中有多个学生副本并且您只想删除第一个，则必须`break`在找到要删除的元素时添加。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T03:30:17.833

您可以执行以下操作之一：

1.  如果要消除数组给定“x”位置的元素，只需将数组下一个位置的所有元素左移即可。保持一个大小变量并减小它；

2.  您可以有一个标志（在有学生信息的班级上），用于标记对象是否被删除。假 -> 已删除，真 -> 未删除。

3.  您可以使用 ArrayList 而不是数组。

如果订单无关紧要，您可以简单地执行以下操作：

```
 for ( int i = 0; i <= students.length - 1; i++)   
      if (id.equals(students[i].displayId()))
          students[i] = students[students.length-1]; 
```

只需取最后一个元素并将其放入实际间隙中即可。但是，您必须对最后一个位置做一些事情，以某种方式将其标记为空（例如，您可以设置为 null）。

如果顺序确实很重要，那么您可以使用辅助数组：

```
Students [] removeFrom(Students [] old_array, int pos){
     Students [] new_array = new Students[old_array-1];

      for (int j = 0; j < i ; j++) new_array[j] = old_array[j];

      for (int j = i; j < new_array.length; j++) new_array[j] = old_array[j+1];

      return new_array;      
} 
```

在 ：

```
for ( int i = 0; i <= students.length - 1; i++)   
      if (id.equals(students[i].displayId()))
          students = removeFrom(students, i); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-11T03:40:47.320

1.  在第二个循环中使用变量“j”
2.  修复您的逻辑，以便“j+1”不会导致数组索引超出范围

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-28T17:22:54.250

我有点担心这个问题的所有回答是如何试图“解决”这个问题的，但是没有人提到这是一个糟糕的解决方案，并且有更好的方法来解决这个问题。

尝试接受对此[问题](https://stackoverflow.com/questions/29153764/remove-an-object-from-an-arraylist-given-only-one-attribute)的答复。

# javascript - Javascript - onKeyPress 事件的 W 字符代码不起作用

> ID：14805386
> 
> 赞同：0
> 
> 时间：2013-02-11T03:19:01.700
> 
> 标签：javascript, ascii, keypress

这适用于 enter 键，但似乎不适用于 w。下面是我的代码。

```
function onKeyPress(event){
    keyCode = event.keyCode;
    switch(keyCode){
        case 87: //w
            console.log("w");
        break;
    }
}

window.addEventListener("keypress", onKeyPress, false); 
```

为什么这对 W 键不起作用？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T03:21:48.363

小写`w`为**119**，大写`W`为**87**。

```
function onKeyPress(event){
    keyCode = event.keyCode;
    switch(keyCode){
        case 119: //w
            console.log("w");
            break;
        case 87: // W
            console.log('W');
            break;
    }
} 
```

[ASCII 表](http://www.theasciicode.com.ar/ascii-printable-characters/lowercase-letter-w-minuscule-ascii-code-119.html)

# jdbc - JDBC 抛出 java.lang.NullPointerException

> ID：14805388
> 
> 赞同：0
> 
> 时间：2013-02-11T03:19:25.637
> 
> 标签：jdbc

我不确定为什么会发生此错误，因为该列中有数据，并且我可以使用 Toad 执行此语句

```
 try
    {
      System.out.println("Executing SQL");
      String r = "select ID from PA_STR_RTL";
      System.out.println("Starting Executing SQL");
      st = con.createStatement();

      ResultSet rs = st.executeQuery(r);

      while(rs.next())
        {
             int r1 = rs.getInt("ID");
             System.out.println(r1);
         }
     }
  catch(SQLException e)
      {

       e.printStackTrace();

      } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T03:33:05.907

正如我所怀疑的，连接是空的。这意味着问题不在您发布的任何代码中。在那之前，当您获得连接时。

通常这意味着您在创建连接时有尝试/捕捉并忽略错误。最常见的错误是类路径中没有数据库驱动程序 jar（找不到类）或没有有效的连接字符串。

# iphone - 核心数据和文本格式

> ID：14805389
> 
> 赞同：0
> 
> 时间：2013-02-11T03:19:37.333
> 
> 标签：iphone, ios, ipad

我正在制作一个包含文本视图的应用程序。我有一些简单的文本格式（粗体、斜体、下划线）。但是当我格式化文本时，它不会保存格式。我想知道格式化后是否有办法保存文本？

不是让您编写代码，只是想知道它是否可能，也许您是否愿意为我指出一些文档的正确方向。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T03:36:54.077

你试着做这样的事情。将 UIFont 信息存储到 NSDictionary：

```
UIFont *myFont = [UIFont fontWithName:@"HelveticaNeue-Bold" size:16.0f];
NSDictionary *myFontInformation = 
                         [NSDictionary dictionaryWithObjectsAndKeys:
                           myFont.name, "fontName",
                           [NSNumber numberWithFloat:myFont.pointSize], @"fontSize", nil]; 
```

并保存到 CoreData。

如果您检索到 NSDictionary 并重新创建 UIFont。

CoreData 教程阅读了这篇文章：[CoreData on iOS5 Tutorial](http://www.raywenderlich.com/934/core-data-on-ios-5-tutorial-getting-started)

# iphone - 将图像添加到 MapViewAnnotation

> ID：14805390
> 
> 赞同：2
> 
> 时间：2013-02-11T03:19:42.887
> 
> 标签：iphone, ios, objective-c, mkmapview, mapkit

我正在尝试将图像添加到我的 MKAnnotation。我有下面的代码。我将如何添加 @"map_icon.png" 到这个？任何帮助都会很棒。谢谢！

**mapView.m 文件：**

```
// retrieve latitude and longitude from the dictionary entry

location.latitude = [dictionary[@"placeLatitude"] doubleValue];
location.longitude = [dictionary[@"placeLongitude"] doubleValue];

// create the annotation

newAnnotation = [[MapViewAnnotation alloc] initWithTitle:dictionary[@"name"]
                                               andCoordinate:location]; 
```

**MapViewAnnotation.m 文件**

```
- (id)initWithTitle:(NSString *)ttl andCoordinate:(CLLocationCoordinate2D)c2d 
{
title = ttl;
coordinate = c2d;
return self;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T03:29:36.000

您可以通过回复来做到这一点`mapView:viewForAnnotation`，例如：

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation
{
    if ([annotation isKindOfClass:[MapViewAnnotation class]])
    {
        MKAnnotationView* annotationView = [[MKAnnotationView alloc] initWithAnnotation:annotation
                                                                        reuseIdentifier:@"MyCustomAnnotation"];
        annotationView.image = [UIImage imageNamed:@"map_icon.png"];
        annotationView.canShowCallout = YES;

        // If you've added the QuartzCore.framework to your project, you can also add a shadows/borders/etc.
        // For example, this code adds a shadow
        //            
        // [annotationView.layer setShadowColor:[UIColor blackColor].CGColor];
        // [annotationView.layer setShadowOpacity:0.8f];
        // [annotationView.layer setShadowRadius:5.0f];
        // [annotationView.layer setShadowOffset:CGSizeMake(0, 0)];
        // [annotationView setBackgroundColor:[UIColor whiteColor]];

        return annotationView;
    }

    // Note, if the annotation isn't your custom annotation (e.g. a `MKUserAnnotation`)
    // then return nil so default behavior will take place.

    return nil;
} 
```

有关更多信息，请参阅*位置感知编程指南的*[向地图添加注释](http://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/LocationAwarenessPG/AnnotatingMaps/AnnotatingMaps.html#//apple_ref/doc/uid/TP40009497-CH6-SW33)部分。

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T03:29:57.933

在你的 mapView 控制器中实现 MKMapViewDelegate

```
myMapView = [[MKMapView alloc] initWithFrame:self.view.bounds];
myMapView.delegate = self; 
```

在您的 mapView 控制器中实现该方法

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation{ 
```

如果您想要自定义图像来替换默认图钉

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation{

if ([annotation isKindOfClass:[MapViewAnnotation class]])
{
    MKAnnotationView *annotationView = [[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"annotation"];
    [annotationView setImage:[UIImage imageNamed:@"map_icon.png"]];
    return annotationView;
}
return nil;
} 
```

如果您想要标注气泡中的图像

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation{
if ([annotation isKindOfClass:[MapViewAnnotation class]])
{
    MKAnnotationView *annotationView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"annotation"];
    UIImageView *pin = [[UIImageView alloc] initWithFrame:CGRectMake(-5, -5, 10, 10)];
    [pin setImage:[UIImage imageNamed:@"map_icon.png"]];
    annotationView.leftCalloutAccessoryView = pin;
    return annotationView;
}
return nil;
} 
```*

# c# - RX：序列的有状态变换，例如指数移动平均

> ID：14805392
> 
> 赞同：6
> 
> 时间：2013-02-11T03:20:21.233
> 
> 标签：c#, system.reactive

如何在 RX 中对序列进行简单的、有状态的转换？

假设我们想要对 IObservable 噪声序列进行指数移动平均变换。

每当噪声序列滴答时，emaSequence 应该滴答并返回值 (previousEmaSequenceValue*(1-lambda) + latestNoisySequenceValue*lambda)

我想我们使用主题，但究竟如何？

```
 public static void Main()
    {

        var rand = new Random();

        IObservable<double> sequence  = Observable
            .Interval(TimeSpan.FromMilliseconds(1000))
            .Select(value => value + rand.NextDouble());

        Func<double, double> addNoise = x => x + 10*(rand.NextDouble() - 0.5);

        IObservable<double> noisySequence = sequence.Select(addNoise);

        Subject<double> exponentialMovingAverage = new Subject<double>(); // ??? 

        sequence.Subscribe(value => Console.WriteLine("original sequence "+value));
        noisySequence.Subscribe(value => Console.WriteLine("noisy sequence " + value));
        exponentialMovingAverage.Subscribe(value => Console.WriteLine("ema sequence " + value));

        Console.ReadLine();
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T14:20:27.960

这就是您可以将状态附加到序列的方式。在这种情况下，它计算最后 10 个值的平均值。

```
var movingAvg = noisySequence.Scan(new List<double>(),
(buffer, value)=>
{
    buffer.Add(value);
    if(buffer.Count>MaxSize)
    {
        buffer.RemoveAt(0);
    }
    return buffer;
}).Select(buffer=>buffer.Average()); 
```

但是您也可以使用 Window （其中 Buffer 是一种概括）来获得您的平均值。

```
noisySequence.Window(10)
   .Select(window=>window.Average())
   .SelectMany(averageSequence=>averageSequence); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-11T03:32:45.700

对于许多这些类型的计算，`Buffer`是最简单的方法

```
var movingAverage = noisySequence.Buffer(/*last*/ 3,
    /*move forward*/ 1 /*at a time*/)
    .Select(x => (x[0] + x[1] + x[2]) / 3.0); 
```

如果您需要携带状态，请使用`Scan`运算符，这就像`Aggregate`它每次迭代都会产生值一样。

编辑：固定评论语法

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T15:16:09.493

谢谢！这是使用扫描的解决方案

```
 const double lambda = 0.99;
    IObservable<double> emaSequence = noisySequence.Scan(Double.NaN, (emaValue, value) =>
        {
            if (Double.IsNaN(emaValue))
            {
                emaValue = value;
            }
            else
            {
                emaValue = emaValue*lambda + value*(1-lambda);
            }
            return emaValue;
        }).Select(emaValue => emaValue); 
```

# sqlite - 安装 Sqlite Browsers V 1.1 时出现致命错误

> ID：14805401
> 
> 赞同：3
> 
> 时间：2013-02-11T03:20:54.357
> 
> 标签：sqlite, qt, browser, compiler-errors

我正在尝试在 Ubuntu 12.10 上安装 1.1 版的 sqlite 浏览器，因为每次我尝试打开 sqlite3 数据库时，程序都会抛出错误。显然，修复是安装 1.1 版。无论如何，我是 Linux 新手，但我尝试按照安装说明进行操作。我首先运行 qmake（它没有返回任何东西）然后运行 ​​make。我遇到了以下错误。我该如何解决？谢谢。

```
gerard@gerard-VirtualBox:/usr/local/src/trunk/sqlitebrowser$ make
cd sqlitebrowser/ && make -f Makefile 
make[1]: Entering directory `/usr/local/src/trunk/sqlitebrowser/sqlitebrowser'
g++ -c -pipe -O2 -Wall -W -D_REENTRANT -DQT_NO_DEBUG -DQT_QT3SUPPORT_LIB -DQT3_SUPPORT -DQT_GUI_LIB -DQT_CORE_LIB -I/usr/share/qt4/mkspecs/linux-g++ -I. -I/usr/include/qt4/QtCore -I/usr/include/qt4/QtGui -I/usr/include/qt4/Qt3Support -I/usr/include/qt4 -Isqlite_source -I.moc -o .obj/extendedmainform.o extendedmainform.cpp
In file included from extendedmainform.h:4:0,
                 from extendedmainform.cpp:1:
form1.h:4:22: fatal error: qvariant.h: No such file or directory
compilation terminated.
make[1]: *** [.obj/extendedmainform.o] Error 1
make[1]: Leaving directory `/usr/local/src/trunk/sqlitebrowser/sqlitebrowser'
make: *** [sub-sqlitebrowser-make_default] Error 2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T19:12:50.790

1.  修复 sqlitedb.h： http: [//sourceforge.net/projects/sqlitebrowser/forums/forum/301849/topic/4545126](http://sourceforge.net/projects/sqlitebrowser/forums/forum/301849/topic/4545126)见评论 #2

2.  编辑 Makefile：添加

> -ldl

在以 LIBS = 开头的行的末尾

帕普拉

# c++ - 覆盖二进制文件中的字段

> ID：14805402
> 
> 赞同：1
> 
> 时间：2013-02-11T03:21:03.607
> 
> 标签：c++

我正在编写一个将结构写入二进制文件的程序，然后为用户提供编辑文件的选项。然后程序应该重写文件中写入原始结构的那个部分。代码：

```
struct Record
{
    char name     [16];
    char phoneNum [16];
    float balance;
};

int edit     ( fstream& ref)
{
    char searchVal[16];
    cout << "Enter customer name: ";
    cin.ignore();
    cin.getline(searchVal, sizeof(searchVal));
    int position = -1;
    Record buffer;
    bool found = false;

    while(!ref.eof() && !found)
    {
        position = ref.tellg();
        ref.read(reinterpret_cast<char*>(&buffer), RECORD_SIZE);
        if((strcmp(buffer.name,searchVal) == 0))
        {
            found = true;

            cout << buffer.name << " found! " << endl;

            cout << "Enter new customer name: ";
            cin.getline(buffer.name, sizeof(buffer.name));
            cout << "Enter new customer phone number: ";
            cin.getline(buffer.phoneNum, sizeof(buffer.phoneNum));
            cout << "Enter new customer balance: ";
            cin >> buffer.balance;

            ref.seekg(-(RECORD_SIZE), ios::cur);
            ref.write(reinterpret_cast<char*>(&buffer), RECORD_SIZE);

            position = ref.tellp();
            break;
        }
    }   
    if(!found)
    {
        cout << "Record not found" << endl;
    }

    ref.clear();
    ref.seekg(0L, ios::beg);
    return position;
} 
```

基本上，找到记录并且用户可以“编辑”它，但它写在文件的末尾，我不知道为什么。感谢您在这方面的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T03:58:01.137

`ios::app`打开文件时不要使用该模式。这种模式意味着输出应该附加到文件而不是覆盖。相反，使用`ios::ate`，它告诉它在打开文件时寻找文件的末尾，因此它不会截断。

# ios - 核心数据：获取

> ID：14805408
> 
> 赞同：-1
> 
> 时间：2013-02-11T03:21:58.143
> 
> 标签：ios, uitableview, core-data, nsfetchrequest, nsfetchedresultscontroller

我有 5 个屏幕。每个屏幕都有用户选择的选项，即通过时间和日期选择器，以及用户将输入的一些 UIFields。所以我创建了一个实体并添加了所有属性 (25)。我创建了一个名为 LM 的 NSObjectSubClass

在每个场景中，我都在执行以下操作：

```
@property (nonatomic, strong) LM *lMData;

NSString *date = [[NSString alloc] initWithFormat:@"%@", [dateFormatter stringFromDate:selectedDate]];
            DateLabel.text = date;
            self.lMData.dateLabel = date;

self.lmData.nameField5 = UITextFieldName5.text; 
```

在用户转到下一个屏幕之前，我有：

```
NSError *error;
NSManagedObjectContext *context = self.managedObjectContext;

 if (![context save:&error])
      {
           NSLog(@"There was an error in Save:%@",error);
      } 
```

现在要获取，我要做的就是在自定义的 UITableViewController 中显示数据。这有 12 个部分，每个部分将显示 2 个单元格。我真的不需要排序。我只想让单元格显示在正确的部分。

要获取，我有以下方法：

```
-(NSFetchedResultsController *) fetchResultsController
{
    if (_fetchResultsController !=nil)
{
    return _fetchResultsController;
}

NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"LM"
                                          inManagedObjectContext:self.managedObjectContext];
[fetchRequest setEntity:entity];

NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"startTimeLabel" ascending:YES];
NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sortDescriptor, nil];
[fetchRequest setSortDescriptors:sortDescriptors];

_fetchResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self.managedObjectContext sectionNameKeyPath:nil cacheName:nil];

return _fetchResultsController; 
```

}

从我读到的内容看来，为了让我获取，我必须对以下行进行排序：

```
NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"startTimeLabel" 
```

我的实体中有一个名为“startTimeLabel”的属性。但我有它，因为我被迫排序。但是，我真的不需要排序。

现在显示，此时不显示任何内容：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{

  return [[self.fetchResultsController sections] count];   //I need 10 sections here;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

    id<NSFetchedResultsSectionInfo> secInfo = [[self.fetchResultsController   sections]objectAtIndex:section];
    return [secInfo numberOfObjects]; //I need 2 rows in each section here
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (!cell) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    LM *letsMeetData = [self.fetchResultsController objectAtIndexPath:indexPath];
    cell.textLabel.text = letsMeetData.dateLabel;

    return cell;
} 
```

问题：

1.  我要保存和获取的代码是否正确？

2.  我能做些什么来摆脱排序？我不需要排序。

3.  我知道我在 UITableView 中显示获取的数据的代码是错误的。请指教。

4.  最后，我还需要将这些表单中的每一个保存为对象，以便用户稍后可以将它们拉出来。我是否需要创建另一个实体来存储 LM 对象？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T05:15:23.993

嘿，要使用 coredata，您需要从 NSManagedObject 创建一个实体类。

(1)您可以使用实体类保存和检索数据。

```
LM_Entity *lm = [NSEntityDescription insertNewObjectForEntityForName:@"LM_Entity" inManagedObjectContext:self.managedObjectContext];
//Your code
lm.nameField5 = UITextFieldName5.text;
//Now save
[self.managedObjectContext save:&error]; 
```

检索使用时

```
NSEntityDescription *entity = [NSEntityDescription entityForName:@"LM_Entity"
                                      inManagedObjectContext:self.managedObjectContext];
[fetchRequest setEntity:entity]; 
```

(2)您**需要**在使用**NSFetchedResultsController**时指定一个排序描述符。

(3)您的代码对于显示获取的数据是正确的

(4) 是的，您需要创建一个实体类来保存和检索数据。（参见 1）。

按照本[教程](http://www.raywenderlich.com/934/core-data-on-ios-5-tutorial-getting-started)了解有关 coredata 的更多信息。

# sql - 通过 user_ids 排除给定类型的记录集。得到了where查询，需要相反的

> ID：14805413
> 
> 赞同：0
> 
> 时间：2013-02-11T03:22:37.053
> 
> 标签：sql, ruby-on-rails, activerecord

如果我有一个续集语句选择我想要排除的内容，如下所示：

```
e.where("events.user_id in (?) and type = 'Post'", some_ids) 
```

我如何编写排除这些的语句？我可以将它写在一行中，还是必须存储它们并通过 id 排除这些事件？

some_ids 是一个 user_ids 数组

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T03:25:25.693

```
e.where("events.user_id not in (?) or type <> 'Post'", some_ids) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T03:26:14.040

“哪里不存在”是你最喜欢的三个词。例如，

```
select whatever
from wherever
where not exists 
(subquery goes here) 
```

# c# - 如何在 GridView 中的编辑链接附近添加新按钮？

> ID：14805414
> 
> 赞同：0
> 
> 时间：2013-02-11T03:22:38.223
> 
> 标签：c#, asp.net, gridview

我有一个由“AutoGenerateEditButton”生成的带有编辑按钮的gridview。现在我需要在此编辑按钮附近添加带有新事件的按钮。

如何将按钮放在那里： ![在此处输入图像描述](../Images/822ea3e573d8b3236429d27446483db9.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T05:48:18.480

您可以创建一个`TemplateField`并将您的按钮放在`ItemTemplate`. 如果您希望编辑链接按钮和另一个控件位于**同一列**中，只需将它们放在一个`<td>`元素中即可。请注意，当使用这种方法时，您不再`AutoGenerateEditButton="true"`需要手动实现它。如果您想保留现有功能 ( `AutoGenerateEditButton="true"`)，请考虑使用 javascript 实现此功能

**ASPX：**

```
 <asp:GridView ID="GridView1" AutoGenerateColumns="false" runat="server">
        <Columns>
            <asp:TemplateField>
                <ItemTemplate>
                    <table>
                        <tr>
                            <td>
                                <asp:LinkButton ID="lnkEdit" runat="server" Text="Edit" /> <br />
                                <asp:Button ID="btnGreet" runat="server" OnCommand="Greet" CommandArgument='<%# Eval("Name") %>'
                                    Text="Greet" />
                            </td>
                            <td>
                                <asp:Label ID="lblName" runat="server" Text='<%# Eval("Name") %>' />
                            </td>
                        </tr>
                    </table>
                </ItemTemplate>
            </asp:TemplateField>
        </Columns>
    </asp:GridView> 
```

**后面的代码：**

```
protected void Greet(object sender, CommandEventArgs e)
{
    Response.Write("Hello " + e.CommandArgument);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T04:40:45.817

您可以创建自己的模板。最简单的方法是转到gridview编辑器并找到自动按钮部分并右键单击并说“转换为模板”。您最终会单独看到所有按钮，并且可以在其中添加任何您想要的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T07:32:05.473

使用 gridview 的**模板字段**添加您的编辑按钮。

```
 <asp:GridView ID="gvproddet" runat="server" AutoGenerateColumns="false">
            <Columns>
            <asp:TemplateField>
            <ItemTemplate>
            <asp:ImageButton ID="imgmodify" runat="server"  ImageUrl="~/database/images/edit.jpg"/>
            </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Remove">
            <ItemTemplate>
            <asp:ImageButton ID="imgbtnDelete"  runat="server" ImageUrl="~/database/images/DeleteRed.jpg" />
            </ItemTemplate>
            </asp:TemplateField>
            </Columns>  
       </asp:GridView> 
```

**注意**：使用**AutoGenerateColumns**属性为 false。如果您希望同一列中的两个按钮放在相同的位置`<td>`。

# windows - 写入实际的 git 存储库时使用了哪些行尾？

> ID：14805415
> 
> 赞同：3
> 
> 时间：2013-02-11T03:23:01.790
> 
> 标签：windows, git

对于包含不一致行结尾以及带有 ascii 和 UTF-8（带 BOM）的文件编码的大型现有存储库...

关键是当前的文件集相当不一致。它们的编码不同。（让我们暂时忽略 UTF-16，尽管我也有一些）。它们的行尾因文件而异，而且文件本身的行尾也不同，尽管我怀疑它们中的大多数都以 crlf 行尾存储在 git 中。

这里有两个主要问题：

1）使用相同存储库的不同人可以查看更改，他们会看到一组不同的更改。有时，由于规范化的行结尾，“整个文件”已被更改。有时只更改了文件的一部分。这似乎主要取决于 core.autocrlf 是否已设置为 true 或 false，并且似乎还受到使用 .gitattributes 文件的影响。

2）我希望所有人都能够将文件提交到 git 存储库，而不必费力地关注他们的特定 git 配置是否已设置为进行 crlf 转换，或者他们的文本编辑器、IDE 或他们决定使用的任何工具采用。（尽管这种行为可能在 Windows 上被破坏，但我们需要忍受它......）

* * *

主要问题是：我如何确定 'gitk'、'git diff'、'git show' 等显示的输出与显示的更改绝对一致。我不太关心这里的行尾，更关心的是确保给定提交的“更改”与所有开发人员看到的更改相同。我不希望一个人看到一个变化，看到“所有的行都变了”（即行尾都变了），而另一个人看到了同样的变化，说：“三行都变了”。

*   注意：有些人使用 github 来查看更改。

也就是说，我想有信心知道如何关注行尾，所以我最终要问的是如何*知道*行尾会发生什么。例如，如果我在 .gitattributes 中为给定文件指定“eol=crlf”，这是否意味着该文件使用该设置提交给 git？如果我检查在设置 .gitattributes 文件之前提交的该文件的早期版本，会发生什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T17:35:27.767

好的，这是正在发生的事情：

第一：差异看起来总是一样的，不依赖于本地 git 配置。您可以尝试：`git diff HEAD^ HEAD`在您的所有机器上看起来都一样（假设它们具有相同的 HEAD）。

但是为什么差异在你的机器上看起来不一样呢？假设您的存储库中有一个文件，看起来完全像这样：

```
two \r\n lines 
```

签出在每台机器上都是这样的。但在办理登机手续时，有两种选择：

1.  行尾归一化已打开。该文件现在将检入为：

    ```
    two \n lines 
    ```

    并且`git diff`会报告说会有变化

2.  行尾归一化已关闭。该文件将检入为：

    ```
    two \r\n lines 
    ```

    并且`git diff`不会报告任何更改。

* * *

现在，您如何确保每个人都看到相同的变化？我建议为每个人启用行尾标准化。为此`.gitattributes`，请使用以下内容在您的存储库的根目录中创建一个：

```
*   text=auto 
```

并将这个文件提交到每个分支。一旦每个人都取消了这个提交，差异在任何地方都会看起来一样。

* * *

最后说明：`core.eol`对此没有任何影响。它只会更改工作目录中的行尾。`git diff`不会将工作目录与索引进行比较，但会区分*将*针对索引提交的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T03:43:19.517

我假设你会用谷歌搜索“git line endings”来了解如何进行基本的 repo 设置。

你根本无法影响任何已经承诺的事情。您唯一能做的就是使用您喜欢的任何固定文件内容进行新的提交。

从您在下面的评论中，您所追求的是能够完全忽略行尾差异。请参阅[此处](https://stackoverflow.com/a/862920/1290731)和[此处](https://stackoverflow.com/a/12194759/1290731)，了解我能找到的最好的以前的 stackoverflow 答案。

# ruby - 使用 Javascript 加载内容时，如何使用 Nokogiri 解析页面？

> ID：14805416
> 
> 赞同：1
> 
> 时间：2013-02-11T03:23:03.667
> 
> 标签：ruby, ruby-on-rails-3, nokogiri

我正在尝试解析[Twitch.tv 网站上](http://es.twitch.tv/directory/game/League%20of%20Legends)的一些内容，作为 Nokogiri 的学习练习。

获取 HTML 文档时，我没有在 Google Chrome 上看到源代码，似乎内容是通过 Javascript 加载的，而不是在初始 GET 请求中加载的。

如何使用 Nokogiri 解析来自该网站的流列表？或者更一般地说，如何解析在 DOM 完成加载后动态加载的内容？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T03:37:14.360

数据是 json，所以你不要使用 nokogiri。例如：

```
require 'open-uri'
require 'json'
hash = JSON.parse open('http://api.twitch.tv/kraken/games/top?limit=10&on_site=1').read 
```

# php - MySQL PHP - substr() 导致在空表单字段的数据库中输入 0 个零

> ID：14805419
> 
> 赞同：2
> 
> 时间：2013-02-11T03:23:56.147
> 
> 标签：php, mysql, database, substring

`substr(trim('SOME_FORM_VALUE'),0,7),`在将它们提交到数据库之前，我正在使用一些表单值。

已提交空白的表单字段在数据库中最终为**0** *（零）*。如果我删除**substr()**一切都很好，并且数据库中没有任何价值。数据库 (InnoDB) 列设置为**VARCHAR**而**不是 null**。

代码示例：

```
$data_Arr = array(
'SOME_TABLE_COLUMN1' => substr(trim('SOME_FORM_VALUE1'),0,7),
'SOME_TABLE_COLUMN2' => substr(trim('SOME_FORM_VALUE2'),0,50)
);

$this->db->update('SOME_TABLE', $data_Arr); 
```

最后一个 MySQL 查询最终看起来像这样：

```
INSERT INTO `SOME_TABLE` (`SOME_TABLE_COLUMN1`, `SOME_TABLE_COLUMN2`)
VALUES (0, 0); 
```

*   为什么**0** *（零）*是 substr() 在空表单字符串上的结果？
*   知道如何防止输入 **0** *（零）*吗？

谢谢大家:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T03:28:24.600

[`substr()`](http://php.net/manual/en/function.substr.php)：

> 返回提取的字符串部分；**或 FALSE 失败**，或空字符串。

因此，如果您尝试返回超出范围的字符串部分，您可能会将错误值转换为 0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T03:31:07.110

我认为您可以尝试在 substr 之前使用 if 进行测试

```
 if (strlen($string) > 7){
    $file_name= substr(trim($string,0,$max)); 
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-30T08:53:57.867

使用的 'mb_strimwidth' - 在空字符串的情况下不会解析为零。

```
<?php
echo mb_strimwidth("Hello World", 0, 10);
// outputs Hello W
?> 
```

# java - 加载 XML 配置文件时出现 Log4j2 错误

> ID：14805420
> 
> 赞同：6
> 
> 时间：2013-02-11T03:24:04.957
> 
> 标签：java, xml, configuration, load, log4j2

我正在尝试为嵌入在我的 Java 应用程序中的 Log4j2 使用 XML 配置文件，但它不起作用。

编码：

```
ConfigurationSource source = new ConfigurationSource(Main.class.getResourceAsStream("/in/gunbound/prelauncher/server/log4j2/log4j2.xml"));
ConfigurationFactory factory = (ConfigurationFactory) XMLConfigurationFactory.getInstance().getConfiguration(source);
ConfigurationFactory.setConfigurationFactory(factory); 
```

错误：

> 线程“主”java.lang.ClassCastException 中的异常：org.apache.logging.log4j.core.config.XMLConfiguration 无法在 in.gunbound.prelauncher.server 中转换为 org.apache.logging.log4j.core.config.ConfigurationFactory .Main.main(Main.java:62)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T14:34:38.923

我有类似的问题。这是帮助我的示例：[https ://svn.apache.org/repos/asf/logging/log4j/log4j2/trunk/core/src/test/java/org/apache/logging/log4j/FormatterLoggerManualExample.java](https://svn.apache.org/repos/asf/logging/log4j/log4j2/trunk/core/src/test/java/org/apache/logging/log4j/FormatterLoggerManualExample.java)

在您的情况下，它应该如下所示：

```
URI configuration = Main.class.getResource("/in/gunbound/prelauncher/server/log4j2/log4j2.xml").toURI();
Configurator.initialize("config", null, configuration); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-19T08:14:31.333

遇到了同样的问题，这样解决：

```
import java.io.InputStream;

import org.apache.logging.log4j.LogManager;
import org.apache.logging.log4j.Logger;
import org.apache.logging.log4j.core.LoggerContext;
import org.apache.logging.log4j.core.config.Configuration;
import org.apache.logging.log4j.core.config.ConfigurationFactory.ConfigurationSource;
import org.apache.logging.log4j.core.config.XMLConfigurationFactory;

public class Log
{

    private Logger logger;

    public Log(String name)
    {
        InputStream is = Application.class.getResourceAsStream("log-config.xml");
        ConfigurationSource source = new ConfigurationSource(is);
        Configuration config = XMLConfigurationFactory.getInstance().getConfiguration(source);
        LoggerContext ctx = (LoggerContext) LogManager.getContext(true);

        ctx.stop();
        ctx.start(config);

        logger = ctx.getLogger(name);
    }

    public Logger getLog()
    {
        return logger;
    }

} 
```

我目前正在使用带有 databaseAppender 的 log4j2 beta 9 来写入 ora db。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-09T10:14:22.860

`ConfigurationFactory`使用 XML 配置文件时不需要使用。只需确保您的 XML 文件设置正确。

文件名必须是`log4j2.xml`

我必须将该文件添加到类路径中。

在您的应用程序中获取具有正确名称的记录器，与您在 xml 文件中设置记录器时使用的名称相同，[看看这里](https://stackoverflow.com/a/13235751/1515052)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-01-10T19:55:04.113

最短方式（不创建工厂、源或 url 对象）：

```
Configurator.initialize("configName", "logging.xml"); 
```

即使配置文件未命名为“log4j2.*”，这也有效。

# mysql - 当前插入在单元格中的 Auto_Increment 的使用值

> ID：14805422
> 
> 赞同：1
> 
> 时间：2013-02-11T03:24:11.183
> 
> 标签：mysql, insert, auto-increment

如何获取 MySQL 为当前插入行生成的 auto_increment 值，以便在插入命令中使用它？例如：

```
INSERT INTO aTable (aField) VALUES ( AUTOINCVALUEHERE ) 
```

这似乎不是一个复杂的操作，但我一直无法在这里、在 MySQL 文档或其他地方找到任何解决方案。我知道执行 UPDATE 的潜力，但如果我不需要运行多个查询来完成此操作，我会更喜欢。

我已经尝试过 LAST_INSERT_ID() - 它不起作用，文档说它只是为了给出最后一个执行查询的值，而不是当前查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T06:40:42.807

您需要在表中有另一个唯一字段，例如 -email-id ，这样您就可以从该行获取相应的 autoincremented_id 。但仍然混淆为什么要在插入查询中使用它？

```
 "select autoincremented_id from Table where somthing_unique = value" ; 
```

# vb.net - 如何从 VB.Net dll 在 VB.NET exe 中设置文本框

> ID：14805423
> 
> 赞同：0
> 
> 时间：2013-02-11T03:24:13.240
> 
> 标签：vb.net

我想在 VB.Net dll 的 VB.Net exe 的文本框中设置文本。

这可能看起来很奇怪，但 dll 是从另一个程序内联调用的。

我的 exe 将始终在运行 dll 之前运行，名为“BA_SyncNet.exe”，主类只是“Form1”，窗口标题为“BA Sync”，文本框名为“DummyText”

我已经尝试从我的“BA_SyncNetChat.dll”对 FindWindow、FindWindowEx 和 SendMessage 进行 API 调用，但没有取得多大成功。也许还有比这更好的方法。

如果有人可以提供帮助，我将不胜感激！亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T07:43:03.500

显然，对于我的特定解决方案来说，这是一个糟糕的方法，因为 API 绕过了 .Net 事件。需要触发。

如果我不需要事件，那将是一个解决方案……也许不是最好的。

# css - 为 div 添加特异性（覆盖现有的 CSS）

> ID：14805424
> 
> 赞同：1
> 
> 时间：2013-02-11T03:24:29.783
> 
> 标签：css, less

我有一个使用 CSS LESS 的网站。为了覆盖一些 CSS，我被告知要添加一点 css 特异性。

我有：`<div class="rt-bg2">`在我的代码中。

我在 firebug 中找到了这种 CSS 样式：

`.main-bg-blue .rt-bg2 { background-image: url("../images/backgrounds/blue/top-bg-texture.png"); }`

我想覆盖输出此图像的设置。所以我知道我必须添加一个 css 特异性。我已阅读有关它的文章，并相信我了解它的工作原理，但我无法让我的覆盖工作。

谁能告诉我，在一个例子中，我如何在上面的代码中添加一个 css 特异性？

谢谢雷金

（顺便说一句，我正在使用来自rockettheme.com 的模板，其中覆盖LESS 文件是通过创建custom.css 文件完成的，其中放置了应该覆盖原始文件的代码。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T03:49:44.200

在开始深入研究之前，您绝对应该先阅读这些文章。

[安迪克拉克关于特异性](http://www.stuffandnonsense.co.uk/archives/css_specificity_wars.html)

[关于特异性的 HTML 狗](http://www.htmldog.com/guides/cssadvanced/specificity/)

基于您的代码的基本示例。[示例小提琴](http://jsfiddle.net/BRANIS/HmAxa/)

```
<div id="grandparent">
    <div class="main-bg-blue">
        <div class="rt-bg2">&nbsp;</div>
    </div>
</div>

div {width:100px; height:100px} /* let us see the div how we want */

     #grandparent .rt-bg2 { background-image: url("http://dummyimages.com/100x100/000000/ffffff.png&text=dolor"); }
    .main-bg-blue .rt-bg2 { background-image: url("http://dummyimages.com/100x100/000000/ffffff.png&text=ipsum"); }
    /* .rt-bg2 { background-image: url("http://dummyimages.com/100x100/000000/ffffff.png&text=lorem"); } */ 
```

为了绝对确保您的新规则将覆盖示例中的旧规则，而不在现有代码中添加类或 ID，您应该在我的示例 ID“祖父母”或类“祖父母”中找到父元素，并使用该规则设置规则包括类或 ID。

ID 比类具有更大的特异性。

```
#grandparent .main-bg-blue .rt-bg2 { background-image: url("http://some-other-image-or-similar"); } 
```

这当然是一种方法。这实际上取决于您的 html 代码等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T03:29:13.927

怎么加`style="background-image: url("whatever");"`

之后`class="rt-bg2"` ？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T03:40:20.067

为什么不加

```
.main-bg-blue .rt-bg2 {
    background-image: url("<url of your image>");
} 
```

如果要全局应用，则添加到自定义 css 文件。

或者

`rt-bg2-special`像">`这样的元素添加一个额外的类`<div class="rt-bg2 rt-bg2-special`，然后将以下内容添加到自定义css文件中

```
.main-bg-blue .rt-bg2.rt-bg2-special {
    background-image: url("<url of your image>");
} 
```

# objective-c - 无法从 SLRequest 块内部更改 __block 变量

> ID：14805425
> 
> 赞同：0
> 
> 时间：2013-02-11T03:24:52.567
> 
> 标签：objective-c, xcode, scope, objective-c-blocks, block

我正在尝试更改块内 int 的值。（在这个代码示例中，SLRequest 本身只是我完整应用程序的上下文设置，预计不会在这里工作 - 只需编译并运行即可，以便我可以测试设置 int。Socialframework 需要包含在项目中为此编译示例。输出包括在下面。）

```
#import "MainViewController.h"
#import <Social/Social.h>

@interface MainViewController ()

@end

@implementation MainViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    // This SLRequest stuff is just to provide the context for the block in question below
    NSString * theURLstr = @"http://someurl";
    NSURL * theNSURL = [[NSURL alloc] initWithString:theURLstr];
    SLRequest *theRequest = [SLRequest requestForServiceType: SLServiceTypeFacebook requestMethod:SLRequestMethodGET URL:theNSURL parameters:nil];
    [theRequest setAccount:nil]; // 

    // This is our test value.  We expect to be able to change it inside the following block
    __block int test = 44;
    NSLog(@"(BEFORE block) test is: %d", test);

    [theRequest performRequestWithHandler:
     ^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error2)
     {
         // We get here late.
         test = 27;
         NSLog(@"(INSIDE block) test is: %d", test);

     }];
    // We get here fine, but test isn't changed
    NSLog(@"(AFTER block) test is: %d", test); 
} 
```

// - - 输出：

```
2013-02-10 19:13:53.283 debugExp1[92743:c07] (BEFORE block) test is: 44
2013-02-10 19:13:53.285 debugExp1[92743:c07] (AFTER block) test is: 44
2013-02-10 19:13:53.312 debugExp1[92743:1303] (INSIDE block) test is: 27 
```

注意无序的输出行。它在执行中间之前开始和结束。我怎样才能解决这个问题？我只想更改该位置的 int 值并让它在块外使用。

=== 更新 ===

我在网上找到了这个问题的多个切线版本，但对我的目的来说是不可用的形式。所以也许我以一种无法回答的方式提出我的问题。让我尝试添加一些上下文。

我的应用程序正在组装来自 Twitter 指定的不同类型的多个 Twitter API 调用的数据。我不是为了展示而建表。我只想要 ivars 中的数据并最终管理对象。除了获取 Twitter 数据之外，该应用程序还有很多工作要做，因此我不想将太多的应用程序结构放在单个 performRequestWithHandler 块中，这样我就可以在某个时候访问它返回的数据。对我来说，从网上获取数据是一种实用操作，而不是唯一的应用程序设计决定因素。我的一些 API 调用特别依赖于从之前以特定顺序执行的其他类型的 API 调用收集的数据。

我需要知道这些先前的调用何时完成，以便我可以使用从它们的数据对象中设置的 ivar 值。

也就是说，我需要一种方法来进行 API 调用#1，将各种返回数据分配给 ivars，在 performRequestWithHandler 块之外使用 ivars 做其他事情，根据调用 #1 进行 API 调用#2 和 #3 等和后续的 API 调用返回，并最终洗牌到其他 viewController 以各种方式显示来自多个 API 调用的返回值的处理数据。

我完全明白 performRequestWithHandler 是在一个未指定的线程上执行的，该线程将在我不知道何时执行。我不担心由于同步网络访问延迟而导致 UI 长时间等待，因为我打算指定非常短的等待时间。我不会让我的用户坐等慢速网络连接！如果连接速度很慢，我会短暂显示一个活动指示器并放弃快速等待以显示警报。应用程序的那部分不是我在这里关注的挑战。

我的挑战是在部分或全部完成*后将*来自多个 performRequestWithHandler 调用的返回数据组装在一个地方。

在我看来，performRequestWithHandler 的调用级别可能太高，无法实现我需要的那种同步控制和数据访问。我不知道。

上面的代码示例只是我能想到的以一种简单的编译方式隔离和演示我的问题的最简单方法。我已经尝试了很多变种，但到目前为止没有任何乐趣。

希望这有助于澄清我正在使用的设计理念。

感谢您提供的任何具体帮助、线索或想法。在这一点上，一个微小的工作代码示例将是天赐之物，但如果/当我找到一个解决方案时，我会继续努力并发布解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T03:30:04.380

我认为你已经回答了你自己的问题，正如你所看到的，你在块甚至执行之前读取了 __block 变量（两次）。

这是您正在调用的异步方法。它将在`viewDidLoad`返回后的某个时间完成。所以日志输出完全没有乱序。您所看到的是这些电话如何发挥作用的现实。

您应该考虑您的设计并意识到此请求可能需要很长时间才能完成，特别是如果用户在慢速网络等情况下。因此您需要决定在请求进行时向用户呈现的内容，然后在请求最终完成时如何更新用户。

**编辑**

根据您的评论，让我尝试给您举一个小例子，希望能让您摆脱困境。我不一定要在这里为您编写一个完整的工作示例，该示例考虑了所有可能的并发性、内存管理和设计含义。但是，一种*简单*的开始方法是安排一个块，它只更新视图控制器上的某些属性（假设您的视图控制器足够长，可以让请求完成或失败！）

```
[theRequest performRequestWithHandler:
 ^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error2)
 {
     int test = 27;
     NSLog(@"(INSIDE block) test is: %d", test);

     // now schedule a block on the main queue which will update our UI with this
     // new data "27"
     dispatch_async(dispatch_get_main_queue(), ^{
         // here we are on the main queue, ready to read our test and do something with it.
         NSLog(@"(updating the UI) test is: %d", test);

         // now that we know we can read the data, we can save that data, update the UI, do
         // whatever is appropriate for your app
         // maybe this is as simple as:
         self.someProperty = test;

         // yes, there is a possible retain cycle here. Worry about that after
         // you have the basic mechanics of this understood.

     });

 }]; 
```

我希望这能为您指明正确的方向。**除此之外，我建议有很多很好的课程（免费和付费）可以帮助您理解这些对移动开发（在 Android或**iOS 上）非常重要的基本概念。处理异步方法和事件对于移动设备上的“hello world”之外的任何事情都是不言而喻的。

**另一个编辑**

我看到您对问题的新编辑。这确实有助于解释这里的上下文。如果您有很多不同的异步调用发生，那么您可能希望将其从您的视图控制器中取出并放入一些数据控制器中，该控制器完成所有这些工作并组装您的结果。在这种情况下，同样的基本原则也适用，您只需考虑更多的调用和更多的排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T02:08:47.117

这是我根据 Firoze 关于 NSNotification 的建议提出的一种解决方案。在这个版本中，我使用的是字符串而不是 int，但对于我的测试目的，它是相同的区别。NSNotification 实际上比我希望的要好！它将对象从一个线程传输到另一个线程的能力将有很大帮助，尽管我在这里只使用 nil。输出如下。

```
- (void)viewDidLoad
{
[super viewDidLoad];

// Test SLRequest wireframe
NSString * theURLstr = @"http://someurl";
NSURL * theNSURL = [[NSURL alloc] initWithString:theURLstr];
SLRequest *theRequest = [SLRequest requestForServiceType: SLServiceTypeFacebook requestMethod:SLRequestMethodGET URL:theNSURL parameters:nil];
[theRequest setAccount:nil];

// Set default
self.myNewTestStr = @"default";
NSLog(@"In viewDidLoad, self.myNewTestStr DEFAULT is %@", self.myNewTestStr);

// Listen on "weGotOurValue"
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(gotOurValue) name:@"weGotOurValue" object:nil];
// [ActivityAlert presentWithText:@"Please wait"];

// Pretend to get some data from the net
[theRequest performRequestWithHandler:
 ^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error2)
 {
     // Not sure I need this dispatch, btw
     dispatch_async(dispatch_get_main_queue(), ^{

         // Change the ivar
         self.myNewTestStr = @"changed";

         // Post notification "weGotOurValue" 
         [[NSNotificationCenter defaultCenter] postNotificationName:@"weGotOurValue" object:nil];
         // [ActivityAlert dismiss];
     });
 }];
}

// Called by NSNotificationCenter when it receives
// a postNotificationName:@"weGotOurValue" message
- (void) gotOurValue {
    NSLog(@"In gotOurValue, self.myNewTestStr is %@", self.myNewTestStr);
} 
```

输出：

```
2013-02-12 17:44:52.300 debugExp1[5549:c07] In viewDidLoad, self.myNewTestStr DEFAULT is default
2013-02-12 17:44:52.354 debugExp1[5549:c07] In gotOurValue, self.myNewTestStr is changed 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-07-23T20:01:24.887

-（无效）重新加载配置文件{

```
// 1

SLRequest *request = [SLRequest
                      requestForServiceType:SLServiceTypeFacebook
                      requestMethod:SLRequestMethodGET
                      URL:[NSURL URLWithString:@"https://graph.facebook.com/me"]
                      parameters:@{ @"fields" : @"id,first_name,last_name,gender,birthday,email,picture"}];

// 2
request.account = [FacebookController sharedFacebookController].facebookAccount;
// 3
__block NSDictionary *jsonDictD;
[request performRequestWithHandler:^(NSData *responseData,
                                     NSHTTPURLResponse *urlResponse, NSError *error) {
    if (error)
    {
        // 4
        [AppHelper showAlertViewWithTag:123 title:APP_NAME message:@"There was an error reading your Facebook account." delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil];
    }
    else
    {
        // 5
        NSString *decodedString = [[[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding] autorelease];
        // NSLog(@"%@",decodedString);
        jsonDictD = [decodedString JSONValue];
        NSLog(@"%@",jsonDictD);
        if (jsonDictD)
        {
            [AppHelper saveToUserDefaults:[jsonDictD objectForKey:@"email"] withKey:@"email"];
            [AppHelper saveToUserDefaults:[jsonDictD objectForKey:@"id"] withKey:@"facebook_id"];

            [userImage setImageWithURLRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:[[[jsonDictD objectForKey:@"picture"] objectForKey:@"data"] objectForKey:@"url"]]]
                             placeholderImage:[UIImage imageNamed:@"DefaultPic.png"] success:^(NSURLRequest *request, NSHTTPURLResponse *response, UIImage *image)
             {

                 userImage.image=image;
                 dummyImg=image;
                 [dummyImg retain];

             }
            failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error)
             {

             }];

            self.firstNameTextField.text=[jsonDictD objectForKey:@"first_name"];
            self.lastNameTextField.text=[jsonDictD objectForKey:@"last_name"];
            self.emailTextField.text=[jsonDictD objectForKey:@"email"];

            self.dobTextField.text=[jsonDictD objectForKey:@"birthday"];

            if ([[jsonDictD objectForKey:@"gender"] isEqualToString:@"male"])
            {
                gender=@"Male";
            }
            else
            {
                gender=@"Female";
            }
            //  [[NSNotificationCenter defaultCenter] postNotificationName:@"Get FB" object:nil];
            dispatch_async(dispatch_get_main_queue(), ^{
                [self.tableView reloadData];
                [[DubitAppDelegate getAppDelegate] hideActivityViewer];

            });
        }
    }
}]; 
```

}

# javascript - 单击按钮以在其他页面上加载谷歌地图（jquery mobile/javascript）

> ID：14805428
> 
> 赞同：1
> 
> 时间：2013-02-11T03:25:12.947
> 
> 标签：javascript, jquery, google-maps, cordova

所以我正在尝试制作一个带有湖页面的移动应用程序。我希望能够点击一个按钮链接并被带到一个有地图的页面。这一切都是在 Jquery mobile 中完成的，我不想要外部页面。（比如“#map-page”）

我已经完成了我想要通用的代码。但就让它在点击事件上启动而言，我没有运气。我经历过多个例子等等。我希望当我在页面上时加载地图，这样移动应用程序就不需要加载大量的地图。

我在 jsFiddle 上做了一个例子。

[http://jsfiddle.net/Ajfvr/](http://jsfiddle.net/Ajfvr/)

因此，当您单击页面的链接时，我需要它在另一个嵌套页面（全屏）上加载，而不是使用 onload 属性加载。因此，在他们单击链接之前，js 不会启动。

请帮助<3谢谢。

编码：

```
<!DOCTYPE html>
<html>    
  <head> 
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <script type="text/javascript" src="../jquery/jquery-1.4.4.min.js"></script>        
    <script type="text/javascript" src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?v=3&sensor=false&language=en"></script>
    <script type="text/javascript" src="../cordova-2.3.0.js"></script>
        <style>
      html, body, #map_canvas {
        margin: 0;
        padding: 0;
        height: 100%;
      }
    </style>

<script type="text/javascript">
    function detectBrowser() {
    var useragent = navigator.userAgent;
    var mapdivMap = document.getElementById("map_canvas");

    if (useragent.indexOf('iPhone') != -1 || useragent.indexOf('Android') != -1 ) {
        mapdivMap.style.width = '100%';
        mapdivMap.style.height = '100%';
        initialize();
    } else {
        mapdivMap.style.width = '600px';
        mapdivMap.style.height = '800px';
        initialize();
        }
    };

    function initialize() {
        var mapOptions = {
        zoom: 8,
        center: new google.maps.LatLng(43.464258,-80.52041),
        mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(document.getElementById('map_canvas'),
            mapOptions);

        var marker = new google.maps.Marker({
            position: map.getCenter(),
            map: map,
            title: 'Waterloo'
        });
    }

      google.maps.event.addDomListener(window, 'load', detectBrowser);
    </script> 
  </head>
  <body onload="detectBrowser()">
    <div id="map_canvas"></div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T06:44:43.100

我从你的问题中了解到，你想在一个全新的页面中加载地图。或者，如果您想在同一页面上加载地图，但延迟加载地图，您只需单击按钮调用该函数并使用 Javascript 将地图加载到叠加 DIV 中。

jQuery Mobile 有一种预取（提前加载）页面的方法。如果您尝试提前加载地图，您也可以研究一下。

# php - 多个文件上传和最大大小问题

> ID：14805429
> 
> 赞同：2
> 
> 时间：2013-02-11T03:25:13.993
> 
> 标签：php, file-upload, max-size

我遇到了以下两个问题： 1\. 脚本的下面一行没有检查最大文件大小，而是显示`Please Select a Photo`.

```
//Check that the file is not too big
if ($_FILES[$file_field]['size'] > $max_size) {
    $out['error'][] = "File is too big";
  } 
```

2.我想让用户上传五张照片，但需要一张照片，这意味着用户有权上传1-5张照片但需要一张照片，他/她不能提交所有输入的表格空的。我该如何解决这两个问题？

```
<?php

function uploadFile ($file_field = null, $check_image = false, $random_name = false) {

//Config Section    
//Set file upload path
$path = 'Productpic/'; //with trailing slash
//Set max file size in bytes
$max_size = 2097152;
//Set default file extension whitelist
$whitelist_ext = array('jpg','png','gif', 'JPG');
//Set default file type whitelist
$whitelist_type = array('image/jpeg', 'image/png','image/gif');

//The Validation
// Create an array to hold any output
$out = array('error'=>null);

if (!$file_field) {
$out['error'][] = "Please specify a valid form field name";           
}

if (!$path) {
$out['error'][] = "Please specify a valid upload path";               
}

if (count($out['error'])>0) {
return $out;
}

//Make sure that there is a file
if((!empty($_FILES[$file_field])) && ($_FILES[$file_field]['error'] == 0)) {

// Get filename
$file_info = pathinfo($_FILES[$file_field]['name']);
$name = $file_info['filename'];
$ext = $file_info['extension'];

//Check file has the right extension           
if (!in_array($ext, $whitelist_ext)) {
  $out['error'][] = "Invalid file Extension";
}

//Check that the file is of the right type
if (!in_array($_FILES[$file_field]["type"], $whitelist_type)) {
  $out['error'][] = "Invalid file Type";
}

//Check that the file is not too big
if ($_FILES[$file_field]['size'] > $max_size) {
    $out['error'][] = "File is too big";
  }

//If $check image is set as true
if ($check_image) {
  if (!getimagesize($_FILES[$file_field]['tmp_name'])) {
    $out['error'][] = "The file you trying to upload is not an Image, we only accept images";
  }
}

//Create full filename including path
if ($random_name) {

  // Generate random filename
  $tmp = str_replace(array('.',' '), array('',''), microtime());

  if (!$tmp || $tmp == '') {
    $out['error'][] = "File must have a name";
  }     
  $newname = $tmp.'.'.$ext;                                
} else {
    $newname = $name.'.'.$ext;
}

//Check if file already exists on server
if (file_exists($path.$newname)) {
  $out['error'][] = "The image you trying to upload already exists, please upload only once";
}

if (count($out['error'])>0) {
  //The file has not correctly validated
  return $out;
} 

if (move_uploaded_file($_FILES[$file_field]['tmp_name'], $path.$newname)) {
  //Success

  $out['filepath'] = $path;
  $out['filename'] = $newname;
  return $out;
} else {
  $out['error'][] = "Server Error!";
}

} else {
$out['error'][] = "Please select a photo";
return $out;
}      
}
?>

<?php

if (isset($_POST['submit'])) {

$file = uploadFile('file', true, false);
if (!is_array($file['error'])) {
$message = '';
$sub=1;
$message = "File uploaded successfully";
echo $message;
} 

}
?>

<form action="" method="post" enctype="multipart/form-data" name="form1" id="form1">
<?php
ini_set( "display_errors", 0);
if($sub==0)
{
?>
<input name="file" type="file" size="20" /><span><?php

if (isset($_POST['submit'])) {

$file = uploadFile('file', true, false);
if (is_array($file['error'])) {
$message = '';
foreach ($file['error'] as $msg) {
  $message = $msg;    
}
} 
echo $message;
}
?></span> <br>
<input name="submit" type="submit" value="Upload" />
<?php
}
?>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T05:54:56.100

确保有关文件路径。如果路径为真，您就可以完成这项工作。我建议您使用 exif_imagetype() 函数检查文件属性，它比 getimage size 更快更好。在最大文件问题中，您应该使用 filesize() 函数。在检查之前需要确保是文件上传？上传的文件是 $_FILES('tmp_name')。

# html - 在 html5 网络应用程序中使用本机日期选择器时，我们是否可以控制日期？

> ID：14805432
> 
> 赞同：0
> 
> 时间：2013-02-11T03:25:41.810
> 
> 标签：html, datepicker, responsive-design

这是场景..

我正在建立一个响应式网站，它将接受预订 - 因此我需要限制可用日期（不太复杂，只需每月禁用少数几个日期）。

我传统上使用 Jquery Datepicker 实现此功能，但是当尝试为移动用户创建流畅的体验时 - 本地日期选择器（例如 iphone 旋转轮）在移动平台上提供了比 Jquery Datepicker 更好的界面。

**所以我的问题是，有没有办法在本地日期选择器**中操纵显示的日期（比如禁用特定日期） ？

 **如果没有，任何人都可以推荐一个好的跨浏览器日期选择器作为不重达一吨的移动设备的后备。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:20:14.683

遗憾的是，原生 HTML5`<input type="date"...>`不支持任何格式或限制。你最好坚持使用 jQuery 或类似的东西来控制样式和验证**

# c++ - 二进制补码函数的问题

> ID：14805433
> 
> 赞同：0
> 
> 时间：2013-02-11T03:25:50.263
> 
> 标签：c++, bit-manipulation, twos-complement

试图实现一个函数来返回一串位的二进制补码。我尝试了两个品种并得到了奇怪的结果。

版本 1（进行反转但不是“+1”）： string twosComp(signed int number) {

```
string twosComp(signed int number) {

     if ( number == 0 ) { return "1"; }
     if ( number == 1 ) { return "0"; }

     if ( number % 2 == 0 ) {
         return twosComp(number / 2) + "1";
     }
     else {
         return twosComp(number / 2) + "0";
     }
} 
```

版本 2（反转并尝试“+1”，但并不总是正确）

```
string twosComp(signed int number) {

    bool bit = 0;
    int size = 3; // not sure what to do about this, value could be -32768 to 32767
    string twos;
    number = ~abs(number) + 1;

    for(int i = 0; i < size; i++) {

        //Get right-most bit
        bit = number & 1;
        if(bit) {
            twos += '1';
        }
        else {
            twos += '0';
        }

        //Shift all bits right one place
        number >>= 1;
    }

    return twos;
} // end twosComp 
```

我一直在尝试这两个功能的各种迭代。我对此已经筋疲力尽了。如果有人有更好的选择——我现在非常愿意接受建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T03:30:04.817

怎么样`(abs(number) ^ 0xffffffff) + 1`，然后将该值转换为字符串？

编辑：还有，为什么`size = 3`？整数是 32 位，通常

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T03:59:48.350

以下代码可以满足您对短（16 位）int 的要求：注意 - 我用 C 而不是 C++ 编写的...

```
char* twosComplement(signed int n) {
    static char s[17];  // static so the variable persists after the call
    unsigned int i;
    int j;
    i = (2<<16)-n; // definition of twos complement

    for(j=0;j<16;j++){
        s[15-j] = ((i&1)==0)?'0':'1'; // test lowest bit
        printf("%c", s[15-j]);        // print for confirmation
        i=i>>1;                       // right shift by one
    }
    printf("\n"); // just to make output look clean
    s[16]='\0';   // terminate the string
    return s;
}

int main() {
printf("the string is %s\n", twosComplement(15)); // just an example
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-11T01:11:25.397

作为参考，您可以查看以下链接，使用 bitset 在 C++ 中将整数转换为 2 的补码：http: [//2scomplimentcpp.blogspot.com.au/](http://2scomplimentcpp.blogspot.com.au/)

```
#include <iostream>
#include <bitset>

using namespace std;

int disp_number()
{
    int i = 0;
    cout << "Enter Intiger : " ;
    cin >> i;
    cout << "decimal : " << std::dec << i << endl; 
    cout << "hex : " << std::hex << i << endl;
    cout << "oct : " << std::oct << i << endl;
    cout << "Binary : " << (bitset<16>)i << endl;
    cout << "Inverse : " << bitset<16>(~i) << endl;
    i = (0 <= i)?i:(-1)*i;
    cout << "One's compliment : " << ~(bitset<16>)i << endl;
    int d = ((bitset<16>)i).flip().to_ulong();
    cout << "Two's compliment : " << bitset<16>(++d) << endl;
    return 0;
} 
```

您可以使用 bitset 的 to_string() 方法将表示形式转换为字符串。

# php - 如果行为空，则回显默认文本，否则回显显示数据

> ID：14805441
> 
> 赞同：2
> 
> 时间：2013-02-11T03:26:30.780
> 
> 标签：php, mysql

如果addition_1在数据库中为空，我想显示“未提供”，如果数据库中不为空，我想显示数据？我已经尝试了几种组合，但看不出我错过了什么。

```
<?php
if (empty($row[addition_1])) {
    echo "Not Provided";
} 
else {
    echo $row[addition_1];
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T03:28:19.267

尝试在数组键中添加引号，例如更改：

```
$row[addition_1] 
```

至

```
$row['addition_1'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T03:36:04.623

一种替代方法是将其添加到您的 SQL 中`COALESCE`：

```
SELECT COALESCE(addition_1, 'Not Provided')... 
```

只是另一种选择。这确实假设数据库中的 addition_1 为 NULL ...

如果它是空白而不是 NULL，那么试试这个：

```
SELECT COALESCE(NULLIF(addition_1,''), 'Not Provided')... 
```

祝你好运。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T03:36:28.633

我总是使用组合：

```
if (isset($row['addition_1']) && trim($row['addition_1'])) 
```

请记住，您不能根据文档在 empty() 函数中使用任何函数，这就是我使用它的原因。如果你 100% 确定 add_1 总是 isset，你可以跳过它。

# ios - 如何使 UIButton 自行删除

> ID：14805445
> 
> 赞同：1
> 
> 时间：2013-02-11T03:27:37.643
> 
> 标签：ios, objective-c, cocoa-touch

所以这是我的代码：

```
for (int x = 1; x < 100; x++) {
        int randomX = arc4random() %280;
        int randomY = arc4random() %500;

        UIButton *myButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
        [myButton setTitle:string forState:UIControlStateNormal];
        myButton.frame = CGRectMake(randomX, randomY, 40.0, 40.0);
        [myButton addTarget:self action:@selector(buttonUp) forControlEvents:UIControlEventTouchUpInside];

        [self.view addSubview:myButton]; 
```

放开时如何使按钮自行删除？

谢谢，波格丹

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T03:33:57.280

将选择器更改为

```
@selector(buttonUp:) 
```

然后在你的方法定义中

```
- (void)buttonUp:(UIButton*)sender 
```

添加

```
[sender removeFromSuperview] 
```

# javascript - Jquery：两个不同链接上的相同班级编号

> ID：14805449
> 
> 赞同：0
> 
> 时间：2013-02-11T03:28:21.250
> 
> 标签：javascript, jquery

我有以下功能

```
$('.link1-**number**').click( function() {
    $(".link2-**number**").hide()
}); 
```

当我点击 link1- **number**时，我想隐藏 link2- **number**，但前提是**number**是相同的值。

所以 `<a class="link1-1987">Link 1</a>`
隐藏`<a class="link2-1987">Link 2</a>`

`<a class="link1-1">Link 1</a>`
生皮`<a class="link2-1">Link 2</a>`

`<a class="link1-5">Link 1</a>`
生皮`<a class="link2-5">Link 2</a>`

ETC

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T03:32:17.513

你的问题太模糊了，但我相信你正在寻找从选择器开始的问题：

```
$('a[class^="b-"]').click(); 
```

它将匹配所有`<a>`具有以`b-`.

[**演示**](http://jsfiddle.net/QP2sW/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T04:08:10.757

回答您的编辑：

```
$('a[class^=link1]').click(function(){
    var number = this.className.split('-')[1];
    $('a.link2-' + number).hide();
}); 
```

[**演示**](http://jsfiddle.net/ZJtup/)

请注意，它仅在以下情况下有效：

1.  `link1`锚点只有一类。
2.  该锚点没有超过一个连字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T04:08:38.557

使用来自@gdoron 的选择器，怎么样：

```
$('a[class^="link1-"]').click(function() {
    var className = $(this).attr('class');
    var i = className.indexOf('-');
    if (i >= 0) {
        var number = className.substring(i + 1);
        $(".link2-" + number).hide()
    }
}); 
```

注意：这仅适用于“link1-###”元素具有单个类名的情况。必须对其进行增强以支持它们具有多个类名，但即便如此，“link1-###”类名也必须放在第一位。

[jsfiddle 上的现场演示](http://jsfiddle.net/john_s/7zS8x/)

**编辑：**再看一遍，由于与选择器匹配的类名必须至少包含一个破折号，因此可以将代码缩短为：

```
$('a[class^="link1-"]').click(function() {
    var className = $(this).attr('class');
    var number = className.substring(className.indexOf('-') + 1);
    $(".link2-" + number).hide()
}); 
```

# android - ScrollView 不适用于整个布局

> ID：14805451
> 
> 赞同：0
> 
> 时间：2013-02-11T03:28:26.463
> 
> 标签：android, android-linearlayout, android-xml, android-scrollview, android-gridlayout

我想在`LinearLayout`其中`ScrollView`的孩子`LinearLayout`是一堆`GridLayouts`包含 4 列的地方添加一个。中的项目`GridLayout`是从代码中动态填充的。根据`GridLayout`MainRows 类中设置的内容数量，可以有 2 行或 1 行。

现在，由于可以有很多组`GridLayout`，所以 a`ScrollView`是必需的。问题是，`ScrollView`只能滚动 2 行网格。如果有意义的话，这 2 行位于一组 MainRows 中。我想滚动布局中包含的所有网格。

这是我的**activity_main.xml**：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView 
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" 
        android:id="@+id/parent">

        <TextView
            android:id="@+id/textView1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:gravity="center"
            android:text="@string/topEight"
            android:layout_marginTop="5dp">
        </TextView>
    </LinearLayout>
</ScrollView> 
```

**single_video_grid.xml**：

```
<?xml version="1.0" encoding="utf-8"?>
<GridView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/gridview0"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:gravity="center"
        android:layout_marginTop="8dp"
        android:numColumns="4">
</GridView> 
```

从代码中我动态添加和设置视图，如下所示：

```
 ArrayList<MainRows> rows = JSONVideoDataHandler.getRowElements();
            for (MainRows row : rows) {
                LinearLayout parentLayout = (LinearLayout) findViewById(R.id.parent);
                if(row instanceof Ads){
                    // TODO implement ads layout
                }else{
                    int numberOfItems = row.getNumberOfItems();
                    LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                    if(numberOfItems > 4){
                        GridView gridview = (GridView) inflater.inflate(R.layout.single_video_grid, null);
                        // if number of vids exceeds 4, 2 rows are required.
                        // therefore setting 8 imageplaceholders.
                        gridview.setAdapter(new ImageAdapter(this, row, 8));
                        gridview.setOnItemClickListener(new OnItemClickListener() {
                            public void onItemClick(AdapterView<?> parent, View v,
                                    int position, long id) {
                                Toast.makeText(activity, "haha " + position,
                                        Toast.LENGTH_SHORT).show();
                            }
                        });
                        parentLayout.addView(gridview);
                    }else{
                        GridView gridview = (GridView) inflater.inflate(R.layout.single_video_grid, null);
                        // if number of vids does not exceed 4, 1 row is required.
                        // therefore setting 4 imageplaceholders.
                        gridview.setAdapter(new ImageAdapter(this, row, 4));
                        gridview.setOnItemClickListener(new OnItemClickListener() {
                            public void onItemClick(AdapterView<?> parent, View v,
                                    int position, long id) {
                                Toast.makeText(activity, "haha " + position,
                                        Toast.LENGTH_SHORT).show();
                            }
                        });
//                      linearLayout = (LinearLayout) findViewById(R.id.parent);
                        parentLayout.addView(gridview);
                    }
                } 
```

Let me know if the question is not clear enough. I would appreciate any kind of help. Thank you!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T04:31:31.533

If I am understanding correctly, youare running into issues because a GridView inherently has a scroll view within itself. So putting a GridView inside a ScrollView really nullifies the purpose of the SrollView as the GridView's scrolling behavior trumps. Take a look at this question and answer as it addresses this very problem. [How to put GridView inside ScrollView](https://stackoverflow.com/questions/12859250/how-to-put-gridview-inside-scrollview)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T04:46:45.843

I don't see why you exclusively have to use Grid Layouts. Why not do like this, just make sure framelayout's width is screenWidth / 4.

```
<scrollview>
 <linearlayout> // vertical
  for i < categories {
   <linerlayout> // horizontal
    for j < videos {
     <framelayout>
      // the content you want to show
     </framelayout>
    }
   </linearlayout>
  }
 </linearlayout>
</scrollview> 
```

# c++ - 复合函数调用和独立函数调用之间的不同行为？

> ID：14805453
> 
> 赞同：0
> 
> 时间：2013-02-11T03:29:03.193
> 
> 标签：c++, operator-overloading

下面的代码编译并运行得很好。但是，如果我更换线路

```
int d=xgcd(x,y,&m,&n);
cout<<d << " = "<<m<<" * "<<x<<" + "<<n<<" * "<<y<<endl; 
```

和

```
 cout<< xgcd(x,y,&m,&n) << " = "<<m<<" * "<<x<<" + "<<n<<" * "<<y<<endl; 
```

然后，`m`并且`n`将是零，而不是他们应该是什么。所以我想知道这种行为差异背后的原因是什么。我错过了什么吗？

这是用 C++ 编写的代码，我使用的是带有标志 -O0 的 gcc 4.72。

* * *

测试XGCD.cpp：

```
#include"xgcd.h"
#include<iostream>
#include<cstdlib>
using namespace std;
int main(int argc, char** argv) {
    // Read the command line parameter
    int x=atoi(argv[1]), y=atoi(argv[2]);
    int m=0,n=0;
    int d=xgcd(x,y,&m,&n);
    // Output the result;
    cout<<d << " = "<<m<<" * "<<x<<" + "<<n<<" * "<<y<<endl;
} 
```

* * *

xgcd.h:

```
#ifndef XGCD
#define XGCD
#include<vector>
    // Perform the extended Euclidean Algorithm.
    // Find (m,n) and return it. pp and qp are two pointers to store the
    // coefficients of m and n so 1 = pm + qn.
    const int xgcd(int m, int n, int* pp = 0, int* qp = 0) {
        // The temp variable to store the remainder.
        int temp;
        // Create a container to store the quotients.
        std::vector<int> quotients;
        // Start the Euclidean algorithm.
        while(!(m==0)) {
        // store the quotient for the extended Euclidean algorithm.
            quotients.push_back(n/m);
            temp = m;
            m = n%m;
            n = temp;
        }
        // Before performing the magic pattern Bud Brown showed us in class, 
        // put base value 0 and 1 to the end.
        quotients.back() = 1;
        quotients.push_back(0);
        // Create an iterator to traverse the quotients and do the trick.
        typename std::vector<int>::reverse_iterator rip = quotients.rbegin();
        rip+=2;
        // Do the trick here!
        while(rip!=quotients.rend()) {
            *rip=*rip * *(rip-1) + *(rip-2);
            rip++;
        }
        // If there are odd number of quotients, the last value should be
        // it's negative. Otherwise, the second last value should be negative.
        if(quotients.size() % 2) {
            if(pp!=0)
            *pp=-quotients[0];
            if(qp!=0)
            *qp=quotients[1];
        }else{
            if(pp!=0)
            *pp=quotients[0];
            if(qp!=0)
            *qp=-quotients[1];
        }
        return temp;
    }
    #endif 
```

* * *

我为 xgcd.h 使用了头文件而不是 c 文件，因为我修改了我的原始模板实现，并且不费心为我的作业问题创建另一个单独的实现文件。

有谁知道为什么会有这样的差异？

# ios - %@ 这些东西叫什么——它们在任何地方都被索引了吗？

> ID：14805459
> 
> 赞同：0
> 
> 时间：2013-02-11T03:29:49.623
> 
> 标签：ios, objective-c, string, variables

我们在字符串中使用的这些东西称为：

•<code>%@ - 字符串

•<code>%i - 整数

•<代码>%f - 浮点数

他们有名字吗？是否有`%___`任何地方所有可能值的索引？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T03:31:14.470

它们被称为字符串格式说明符：这是列表。

[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Strings/Articles/formatSpecifiers.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Strings/Articles/formatSpecifiers.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T03:36:47.790

它们是继承自 C 的特性，被称为字符串格式化程序，或者用苹果的术语来说，格式说明符。在 C 中，它们用于格式化`printf`输出。

[您可以在Wikipedia](http://en.wikipedia.org/wiki/Printf_format_string)、[cplusplus](http://www.cplusplus.com/reference/cstdio/printf/)或[ADC](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Strings/Articles/formatSpecifiers.html)上找到更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T03:40:03.477

它的**NSString 格式化方法**和**CFString 格式化函数**遵循**IEEE** printf 规范；

例子

```
NSLog(@"%@",yourString];
NSLog(@"%d",yourInt];
NSLog(@"%f",yourFloat]; 
```

# python - 二维数组结构python

> ID：14805466
> 
> 赞同：1
> 
> 时间：2013-02-11T03:30:25.187
> 
> 标签：python, multidimensional-array

我正在上python课，没有python经验。讲师只教文档，拒绝给出代码示例。我了解 C++，但我对 python 感到非常沮丧，因为我基本上是在自学。

我想打开一个文本文件，其中每行包含一串随机字符。例如，长度可以是 8、10、15 或 20 个字符。它必须是灵活的。文本文件中可以有未指定数量的字符串（行）。

例如，文本文件可能如下所示：

```
HGAMONIHRA
AOMOKAWONS
NFROLBOBDN
ARFSIHCAGE
LNIEEWONOK
GOLFUNDTHC
KOCATAOHBI
AMRERCGANH
SLGFAMALLC
ALLIGATORX 
```

我只是想弄清楚如何将每个字符放在一个类似数组的结构中，我可以像访问二维数组一样访问它——>我的数组 [2] [3]，例如。

我正在用字典练习只是为了测试行为。我认为我可以使用带有嵌套 for 循环的字典，然后使用元组作为键并将字符串中的解析字符作为值传递。我在想这可能有用，但是当我尝试用一​​行来制作字典时，我的打印语句只给了我一个键和一个值，而不是列表。我真的很困惑。我知道这很痛苦，但有人可以简单地教我吗？蟒蛇在我嘴里留下难闻的味道。

这是我仅针对文本文件的一行的测试代码：

```
count = 0
text = open("puzzle.txt")
line = text.readline()
for i in line:  #this is probably the problem
    mydict = dict()
    mydict.update({count:line[count-1]}) #was hoping to make many keys and values.
    count += 1

print mydict.values() #want to see there are multiple dict values, each as a char.
print count #just checking to see what count value was 
```

有人可以教我吗，因为我的老师不会，我真的很想学习。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T04:00:16.813

乍一看，您的代码有一个明显的问题 -`mydict`每次通过循环时，您都会重置为一个空的字典，您的行：

```
 mydict = dict() 
```

如果您将其移动到循环之前，您可以进一步测试以查看是否还有其他问题需要修复。

但是，有一种更直接的方法可以实现您想要的：

```
>>> with open("puzzle.txt") as f:
...     puzzle = [list(line.strip()) for line in f] 
```

这将打开您的文件`puzzle.txt`并将其分配给变量`f`，然后将文件中的每一行读入字符串变量`line`，去除所有空格（包括末尾的换行符），将生成的字符串转换为字符列表，最后收集每个这些列表中的另一个列表，它分配给变量`puzzle`。最后，因为所有这些都是在`with`语句中完成的，所以文件会自动关闭。

上面的代码中有几个重要的 Python 概念：

*   [使用 with 语句，并遍历文件的行](http://docs.python.org/2/tutorial/inputoutput.html#methods-of-file-objects)
*   [列表推导](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)

如果使用 pprint 模块中的[pprint](http://docs.python.org/2/library/pprint.html#pprint.pprint)函数可以更清楚地看到这段代码的结果：

```
>>> from pprint import pprint
>>> pprint(puzzle)
[['H', 'G', 'A', 'M', 'O', 'N', 'I', 'H', 'R', 'A'],
 ['A', 'O', 'M', 'O', 'K', 'A', 'W', 'O', 'N', 'S'],
 ['N', 'F', 'R', 'O', 'L', 'B', 'O', 'B', 'D', 'N'],
 ['A', 'R', 'F', 'S', 'I', 'H', 'C', 'A', 'G', 'E'],
 ['L', 'N', 'I', 'E', 'E', 'W', 'O', 'N', 'O', 'K'],
 ['G', 'O', 'L', 'F', 'U', 'N', 'D', 'T', 'H', 'C'],
 ['K', 'O', 'C', 'A', 'T', 'A', 'O', 'H', 'B', 'I'],
 ['A', 'M', 'R', 'E', 'R', 'C', 'G', 'A', 'N', 'H'],
 ['S', 'L', 'G', 'F', 'A', 'M', 'A', 'L', 'L', 'C'],
 ['A', 'L', 'L', 'I', 'G', 'A', 'T', 'O', 'R', 'X']] 
```

...并且您可以完全按照您在问题中提出的方式访问单个字符：

```
>>> puzzle[2][3]
'O' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T03:38:18.350

Python 字符串被视为不可变集合（类似于元组），因此您只需要保存每行的一组字符串。

```
count = 0
text = open("puzzle.txt", 'r')
myLines = text.readlines()

#Usage;
print myLines[0][0]
# Prints the first character 
```

因为 python 字符串是不可变的，所以您需要将整个索引设置为新字符串

```
myLines[0] = mylines[0:1] + 'G' + myLines[2:] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T03:37:31.423

您可以使用列表列表来做到这一点：

```
>>> with open('puzzle.txt') as f:
...   a = [list(line.rstrip()) for line in f]
... 
>>> a[0,3]
>>> a[0][3]
'M'
>>> a[1][0]
'A' 
```

# python - python：不能实例化超过一个或两个变量（引发 SyntaxError）

> ID：14805468
> 
> 赞同：0
> 
> 时间：2013-02-11T03:30:40.787
> 
> 标签：python, variables, vim, syntax-error

从昨天开始，我在测试新的 Python 脚本时遇到了一个奇怪的问题。运行脚本时，我在第一个变量赋值中得到一个“语法错误：无效语法”。

例如，我为从文本文件（存在于同一目录中）加载屏幕选项而编写的这个简单代码：

```
#!/usr/bin/env python2.7

import ConfigParser

config = ConfigParser.RawConfigParser()
config.read('config.txt')
fullscreen = bool(config.get('Screen', 'fullscreen')
width = int(config.get('Screen', 'width')
height = int(config.get('Screen', 'height')
... 
```

在终端中运行时，返回：

```
File "./config.py", line 8
width = int(config.get('Screen', 'width')
    ^
SyntaxError: invalid syntax 
```

更奇怪的是，当我将全屏行注释掉时，我得到了同样的错误......但在下一行（高度 = ...）。意思是最后一个确实是语法有效的？此外，问题仅出现在新文件上，旧文件完美运行（好吧，至少没有错误:)）。而且，最后但同样重要的是......当我使用另一个文本编辑器（如 kate，我通常使用 vim）时，编写完全相同的代码也不会引发错误

我试图重新安装 vim，因为我认为这就是问题所在，但它仍然是一样的。

谢谢你的时间，对不起我的英语，查尔斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T03:32:08.503

您缺少要关闭的右括号`bool`：

```
fullscreen = bool(config.get('Screen', 'fullscreen'))
                                                    ^ 
```

和同样的`int`：

```
width = int(config.get('Screen', 'width'))
                                         ^
height = int(config.get('Screen', 'height'))
                                           ^ 
```

# jquery - FancyBox 不工作。获取“RangeError：超出最大调用堆栈大小”

> ID：14805473
> 
> 赞同：2
> 
> 时间：2013-02-11T03:31:15.610
> 
> 标签：jquery, fancybox

我正在尝试以最简单的形式使用 FancyBox，但它不起作用——单击图像缩略图后，我在开发者控制台中看到以下内容：`RangeError: Maximum call stack size exceeded`

这是HTML：

```
<a class="fancybox" href="/site_media/some_image.jpg">
    <img src="/site_media/some_image_thumbnail.jpg">
</a> 
```

以及激活 FancyBox 的 jQuery 调用：

```
$('.fancybox').fancybox(); 
```

再简单不过了……我正在使用 jQuery 1.9.1 和 FancyBox 2.1.4。大量的研究使我在这里没有任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T18:49:39.503

发现了问题——Bootstrap 2.3 破坏了 fancyBox 支持，他们不愿意修复它。更多信息在这里：

[https://github.com/twitter/bootstrap/issues/6862](https://github.com/twitter/bootstrap/issues/6862)

Yohn 在该线程中建议的代码更改为我解决了这个问题，我还没有看到引导程序的任何副作用。也很有趣——Bootstrap 2.3 似乎也破坏了 LightBox，但发生了完全相同的异常。

编辑：见下面亚当的评论。此 Bootstrap 错误已在 2.3.1 版中修复

# iphone - 带有 UISegmented Control 的自动布局显示奇怪的布局和交互行为

> ID：14805477
> 
> 赞同：0
> 
> 时间：2013-02-11T03:31:37.893
> 
> 标签：iphone, ios, xcode, uisegmentedcontrol, autolayout

我认为这可能是 Xcode 问题（意思是我的问题），尽管我认为它可能会超出范围。我有一个使用 UISegmentedControl 在类别之间翻转的应用程序。然而，在布局过程中，我无法将控件放置在我想要的位置。如果我将它移动到我想要的位置并固定定位，那么模拟器和我的手机中的控件都会向相反的方向移动。如果我将控件固定到其上方的滚动视图，然后将其间隔到我喜欢的位置，则控件不再响应点击。我已经包含了一个屏幕截图，希望能说明我遇到的问题。我承认我没有太多机会使用 Autolayout 功能，所以它对我来说是新的。但我相信我理解这些原则。

抱歉，我还不能发布图片……这是一张试图说明我遇到的问题的图片。 [http://www.uglyyellowbunny.com/images/stackoverflow/screenshots.png](http://www.uglyyellowbunny.com/images/stackoverflow/screenshots.png)

视图看起来正确，但按钮根本不会响应任何用户交互。用游戏术语来说，感觉就像“命中框”不再位于正确的位置。显示行为是所有 iPhone 的标准行为，但只有 4 和 4s 出现控件拒绝响应触摸的交互问题。

你们之前有没有遇到过这样的问题？如果我没有很好地解释自己，我很抱歉，并且很乐意回答任何问题。这似乎是一个残酷的笑话，将控件向下移动，显示器越往上移动……尝试将其锁定到位，然后……它将不再起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T04:43:45.653

我猜我会说另一个 UI 元素覆盖了分段控件，这将导致它不响应触摸。也许滚动视图正在扩展以覆盖控件。尝试更改元素的顺序，使分段控件成为顶级元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T13:51:22.773

为了回答这个问题，同时提供一种方法来提醒自己在忘记时如何解决这个问题，这里是简单的答案。

在为 iPhone 设计布局时，请始终使用 iPhone 5 的屏幕尺寸。使用 iPhone 5 的视图大小时 - 所有元素都会正确调整大小和格式，并保持交互。

# android - Android - addToBackStack() 不起作用？

> ID：14805478
> 
> 赞同：14
> 
> 时间：2013-02-11T03:31:54.767
> 
> 标签：android, android-fragments

这是负责将片段添加到后台堆栈的函数：

```
public void populateContent(File f)
{

    ContentFragment cf = new ContentFragment(ctx, ac, this);
    FragmentTransaction transaction = ac.getSupportFragmentManager().beginTransaction();;
    cf.updateView(f);

    transaction.replace(R.id.contentFragment, cf);

    transaction.addToBackStack(null);

    transaction.commit();

} 
```

当我单击后退按钮时，最后一个片段没有被加载（没有任何反应）。

知道可能是什么原因造成的吗？

编辑：片段管理器日志。

[http://pastebin.com/mYnVdkLG](http://pastebin.com/mYnVdkLG)

在我看来，好像我的应用程序正在保存第二个视图两次，而不是保存第一个视图然后保存第二个视图。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2014-10-28T03:29:40.900

似乎在片段事务上调用 addToBackStack() 是不够的，我们必须处理自己按下返回按钮时弹出返回堆栈。我将此添加到我的活动中，它按预期工作：

```
@Override
public void onBackPressed() {
    if (getFragmentManager().getBackStackEntryCount() > 0 ){
        getFragmentManager().popBackStack();
    } else {
        super.onBackPressed();
    }
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-11T06:43:29.783

我不确定实际的解决方案，但我可以为您提供一些指导，也许您可​​以找出问题所在。

您实际上是在替换两个片段吗？如果您不这样做，则没有交易可恢复。也是你第一次`Fragment`从 XML 添加？经理不会知道这个片段，您可能还需要`Fragment`使用事务添加第一个片段。

小心检查，`if (savedInstanceState == null) performFirstTransaction()`否则你最终会添加你的第一个`Fragment`两次。

一个好主意是`enableDebugLogging`在`FragmentManager`. 这将告诉您经理知道哪些片段。

看到这个： http: [//developer.android.com/reference/android/app/FragmentManager.html#enableDebugLogging(boolean)](http://developer.android.com/reference/android/app/FragmentManager.html#enableDebugLogging(boolean))

作为旁注，不建议为您的`Fragment`. 那是因为如果您的应用程序被操作系统杀死并重新实例化，它将调用空构造函数。

您应该使用静态方法，例如`ContentFragment.getInstance(<params>)`创建您的`Fragment`.

在“类概述”部分查看更多信息： http: [//developer.android.com/reference/android/app/Fragment.html 。](http://developer.android.com/reference/android/app/Fragment.html)

我希望我的回答可以帮助您找到问题所在。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-19T16:19:03.820

我是在添加，而不是替换，但我必须在 add() 之前调用 addToBackStack(null)，而不是之后，在将关闭的片段上，而不是在将保持打开的片段上。

A类（先开）

```
FragmentTransaction ft = fm.beginTransaction();
ft.add(R.id.layout_a, f, Constants.FRAGMENT_KEY);
ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
ft.commit(); 
```

B级（A级开）

```
FragmentTransaction ft = fm.beginTransaction();
ft.addToBackStack(null);
ft.add(R.id.layout_b, f, Constants.FRAGMENT_KEY);
ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
ft.commit(); 
```

# cmake - cmake - 查找未编译的库

> ID：14805481
> 
> 赞同：2
> 
> 时间：2013-02-11T03:32:20.977
> 
> 标签：cmake

我正在构建一个使用 Ogre 和 CEGUI 的项目，而 cmake 有一个构建工具。我目前遇到了一些问题：CEGUI 找不到它的未编译依赖项，而 Ogre 确实找到了它们。项目的一般结构是：

```
Base
   BaseLevelCmake
   Deps
   CEGUI
     UpperLevelCmake
   Ogre
     UpperLevelCmake
   There deps
Project
   MyProjectCmakelist 
```

所以这个问题是一个两方面的问题：

1.  如何让 Cmake 找到未编译的代码？
2.  如何在不修改上层 Cmake 列表的情况下提示部门的位置？«

我的目标是从 SCM 中获取 Base 文件夹，启动 GetDeps(.sh/.bat) 来获取所有 deps，然后调用 cmake，这将为所有内容生成构建文件并配置 Ogre 和 CEGUI。

现在，我必须手动构建几乎所有的 deps 并添加到环境的路径，以便可以找到它们。如果一切都是自动的，那将很有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T06:36:14.930

如果您不开发/维护 CEGUI，而是自己跟踪未编译的源，为什么不使用上游提供的任何构建和安装脚本呢？您可以使用

```
ADD_CUSTOM_COMMAND(OUTPUT CEGUIlib 
    COMMAND CEGUI build script
    COMMAND CEGUI install script
) 
```

或 ADD_CUSTOM_TARGET(CEGUIlib_build_install COMMAND CEGUI build script COMMAND CEGUI install script )

如果您开发/维护 CEGUI，并希望将所有源文件放在一个数组中，您可以使用

```
FILE(GLOB ...) 
```

或者

```
FILE(GLOB_RECURES ...) 
```

捕获所有源文件，此外还可以使用

```
LIST(APPEND ... )
LIST(REMOVE_ITEM ...) 
```

从列表中添加/删除源代码。

对于查找库，您可以使用

```
FIND_LABRARY(...) 
```

要做到这一点。

# c++ - 如何在不检查每个元素的情况下立即检查结构的零值？

> ID：14805482
> 
> 赞同：4
> 
> 时间：2013-02-11T03:32:25.830
> 
> 标签：c++, performance, structure, zero

假设我有一个`byte`结构，如下所示：

```
struct one_byte
{
char b1 : 1,
     b2 : 1,   
     b3 : 1,   
     b4 : 1,   
     b5 : 1,   
     b6 : 1,   
     b7 : 1,   
     b8 : 1;   
}foo; 
```

在某些情况下，我需要检查`(foo == 0)`，然后我必须执行八个命令：

```
if(foo.b1 == 0 &&
   foo.b2 == 0 &&
   foo.b3 == 0 &&
...and so on 
```

是否有任何便携且方便的方法可以仅通过单个命令立即检查零值？我尝试了函数和模板，它们的执行速度非常慢。我试过联合，我的编译器不支持位[数组] ....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T03:47:13.747

使用[union](https://stackoverflow.com/questions/252552/why-do-we-need-c-unions)，这就是它的用途

```
union {
  struct {
    char b1:1,b2:1,b3:1,b4:1,b5:1,b6:1,b7:1,b8:1; 
  } bits;
  unsigned char byte;
} u; 
```

那么您可以直接分配*字节*

```
u.byte = 15; 
```

或单独的位

```
u.bits.b3 = 1; 
```

*示例*

```
int main() {
  u.byte = 0;
  printf("%x\n", u.byte);
  u.bits.b3 = 1;
  u.bits.b4 = 1;
  printf("%x\n", u.byte);
  return 0;
} 
```

将输出

```
0
c  // 12 in decimal, since b3 and b4 are set to 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T03:52:25.273

```
struct one_byte zero = { 0 };

!memcmp (&variable_1, &zero, sizeof (struct one_byte)) 
```

可能是一个解决方案，但我不知道这是否是一个聪明的主意。也许只是取消或多或少标准的位设置方式会做得更好：

```
#define SET_BIT(v, n) (v) |= (1<<n)
#define CLR_BIT(v, n) (v) &= ~(1<<n)
#define GET_BIT(v, n) ((v) & ~(1<<n) == 0)

char foo;

if (foo == 0)
   so_what (); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T03:39:10.160

我认为这不会带来任何显着的性能提升。

```
if (memcmp(&foo, "\0", 1) == 0)
{
    // all zero
} 
```

我手头没有 C++ 规范，但 C99 规范 6.7.2.1/13 说（强调我的）：

> 在结构对象中，非位域成员和位域所在的单元的地址按声明顺序递增。指向结构对象的指针，经过适当转换，**指向其初始成员（或者如果该成员是位域，则指向它所在的单元）**，反之亦然。结构对象内可能有未命名的填充，**但不是在其开头**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T03:43:30.053

```
#include <iostream>
#include <cstring>

using namespace std;
struct one_byte{
  char b1:1;
  char b2:1;
  char b3:1;
  char b4:1;
  char b5:1; 
  char b6:1;
  char b7:1;
  char b8:1;
    }__attribute__((packed));

int main(int argc, char *argv[])
{
  one_byte b1;
  int j;
  memcpy(&j, &b1, sizeof(b1)); 
  if(j == 0) cout << "Its 0";
  else cout << "It's not 0";
  return 0;
} 
```

上面的程序呢？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-11T03:44:03.667

```
!*((unsigned char *) &foo) 
```

应该做的伎俩。请注意，我使用`!`运算符来检查零值——如果您不喜欢这样，请随意使用`== 0`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-11T03:45:06.513

听起来你想变得肮脏，那么如何：

```
struct one_byte Other; // a real variable
...   
if(*(char*)&Other == '\0') 
```

# django - 在管理员中嵌入 WYMEditor

> ID：14805493
> 
> 赞同：0
> 
> 时间：2013-02-11T03:33:23.007
> 
> 标签：django, django-admin, wymeditor

如何将 WYMEditor 添加到管理面板？我将它用于我的用户对用户消息传递应用程序，并且我想将我的 textarea 替换为文本编辑器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T03:39:03.063

首先，在这里下载 WYMEditor 包[http://www.wymeditor.org/download/](http://www.wymeditor.org/download/)

创建**小部件.py**

```
from django import forms
from django.conf import settings
from django.utils.safestring import mark_safe

class WYMEditor(forms.Textarea):
    #change this for the exact location of your package in your staticfiles
    class Media:
        js = (
            'js/jquery.js', 
            'wymeditor/jquery.wymeditor.pack.js',
        )

    def __init__(self, language=None, attrs=None):
        self.language = language or settings.LANGUAGE_CODE[:2]
        self.attrs = {'class': 'wymeditor'}
        if attrs:
            self.attrs.update(attrs)
        super(WYMEditor, self).__init__(attrs)

    def render(self, name, value, attrs=None):
        rendered = super(WYMEditor, self).render(name, value, attrs)
        return rendered + mark_safe(u'''<script type="text/javascript">
            jQuery('#id_%s').wymeditor({
                updateSelector: '.submit-row input[type=submit]',
                updateEvent: 'click',
                lang: '%s',
            });
            </script>''' % (name, self.language)) 
```

更新您的 forms.py 以获取消息表单，如下所示：

```
from app_name.widgets import WYMEditor

class MessageAdminForm(forms.ModelForm):
    .....
    body = forms.CharField(widget=WYMEditor())
    ..... 
```

就是这样，记住把你的包裹的确切位置

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T16:33:59.177

我建议不要重新发明这个轮子，而是使用[django-wymeditor 之](https://github.com/schepelin/django-wymeditor)类的东西。

要使用它，以[包含的示例为例](https://github.com/schepelin/django-wymeditor/blob/master/example/admin.py)，只需添加一个`admin.py`：

```
from django.contrib import admin
from wymeditor.admin import RichTextAdmin
from example.models import TestModel

class TestModelAdmin(RichTextAdmin):
    pass

admin.site.register(TestModel, TestModelAdmin) 
```

# ruby - Ruby/Sinatra 挂起 HTTP 请求

> ID：14805494
> 
> 赞同：1
> 
> 时间：2013-02-11T03:33:37.583
> 
> 标签：ruby, sinatra

红宝石新手

全新安装 ubuntu、ruby、rvm、gems、sinatra、nginx、passenger

尝试运行简单的 hello world 应用程序。我可以让应用程序使用瘦运行，即 rackup config.ru。无法通过 nginx/passenger 运行任何东西。如果我在 config.ru 文件中创建错误，那么我会从乘客那里获得错误页面。让我相信这个问题与 nginx 无关。

我的猜测是 config.ru 中的 run 行存在一些问题，我对 ruby​​ 的了解不足是造成原因的障碍。最重要的是，在网上找不到任何类似的问题。

编辑：为了澄清，通过“无法运行任何东西”，我对服务器的 http 请求被忽略，浏览器将永远坐在那里试图加载。

应用程序.rb

```
require 'rubygems'
require 'sinatra'

get '/' do
  "Hello and Goodbye"
end 
```

配置.ru

```
require 'rubygems'
require 'sinatra'

require './app'
run Sinatra::Application 
```

nginx 配置

```
http {
passenger_root /usr/local/rvm/gems/ruby-1.9.3-p385/gems/passenger-3.0.19;
passenger_ruby /usr/local/rvm/wrappers/ruby-1.9.3-p385/ruby;

include       mime.types;
default_type  application/octet-stream;

sendfile        on;

keepalive_timeout  65;

server {
    listen       80;
    server_name  localhost;

    access_log  /srv/www-logs/test.access.log;
    error_log /srv/www-logs/test.error.log;
    root /srv/www/test/public;
    passenger_enabled on;

    location /static {
        root   /srv/www/test/public;
        index  index.html;
    }
} 
```

# android - Corona sdk局部变量未获取场景内的设置数据

> ID：14805499
> 
> 赞同：1
> 
> 时间：2013-02-11T03:34:35.420
> 
> 标签：android, coronasdk, corona-storyboard

我是电晕的新手，我正在尝试在标签场景中创建一个 gps。我创建了一个局部变量 loc 将放置位置数据字符串的位置

```
local loc = "Loading" -- as initial value

then a location handler put a new value to it

local function locationHandler( event )
...
    loc = "the gps location"
end

function scene:createScene( event )
    local group = self.view

    -- create a white background to fill screen
    local bg = display.newRect( 0, 0, display.contentWidth, display.contentHeight )
    bg:setFillColor( 255 )  -- white

    local title = display.newRetinaText(loc, 0, 0, native.systemFont, 20 )
    -- this is where the loc is placed in the title

    title:setTextColor( 0 ) -- black
    title:setReferencePoint( display.CenterReferencePoint )
    title.x = display.contentWidth * 0.5
    title.y = 170
end 
```

问题是 loc 在它在模拟器中运行的设备中运行时仍然包含“加载”。我已经检查并且 gps 工作正常，应该放在 loc 变量中的文本已准备好进入内部处理程序，使用 logcat 检查。

我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T15:51:32.360

这段代码：

```
local title = display.newRetinaText(loc, 0, 0, native.systemFont, 20 ) 
```

复制**loc**变量并将其传递给 RetinaText。更改标题使用

```
title.text = "new text" 
```

考虑这个例子：

```
local test = "1"
local function change( test )
    test = "2"
end
print(test)
change(test)
print(test) 
```

它打印：

```
1
1 
```

# iphone - iPhone SDK：在任何地方调用tableview函数

> ID：14805504
> 
> 赞同：0
> 
> 时间：2013-02-11T03:35:05.173
> 
> 标签：iphone, ios, xcode, uitableview

我想知道是否有办法在整个程序的任何地方调用 tableview 函数。我的意思是我想调用这个函数：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath { 
```

在我的代码中的任何地方。有没有使用 self 功能或任何东西，或者如果它可能的话？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T03:39:06.713

你当然可以。您只需能够将`NSIndexPath`对象传递给它，如下所示：

```
UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:indexPath]; 
```

一旦`cellForRowAtIndexPath`返回您的单元格对象，您就可以访问其属性等，例如：

```
cell.backgroundView.alpha = 0.0; 
```

此外，如果您使用的是自定义 UITableViewCell，则可以通过类型转换调用返回自定义单元格：

```
MyCustomCellClass *cell = (MyCustomCellClass *)[self.tableView cellForRowAtIndexPath:indexPath]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T04:59:04.227

你可以这样做：

```
 // First do modifications in the datasource for table     
    // And then you can reload the specific row like this:

NSIndexPath *indexPath = [NSIndexPath indexPathForRow:0 inSection:0];

[self.tableView reloadRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationAutomatic]; 
```

而你的 cellForRowAtIndexPath 没有调用的原因可能是因为你没有设置委托或者 UI 上没有可见的行来显示，因为 Table 为屏幕上可见的行调用了这个函数，所以也要检查你的表格的框架。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T04:15:58.847

你可以调用 [tableview reloadData]; 这将调用索引路径处的行单元格。

# jquery - 根据javascript的结果在highchart中分配颜色

> ID：14805506
> 
> 赞同：0
> 
> 时间：2013-02-11T03:35:29.773
> 
> 标签：jquery, highcharts

我需要根据javascript的返回值分配highchart的颜色

这是我的代码...

```
var chart = new Highcharts.Chart({
chart: {
    renderTo: 'container'
},
xAxis: {
    type: 'datetime'
},

series: [{
    name: 'John',
    color: '#EDF249',/*(function() {
            return '#EDF249';
        }),*/
    dashStyle: 'ShortDash',
    data: [
        [Date.UTC(2010, 0, 1), 29.9], 
        [Date.UTC(2010, 2, 1), 71.5], 
        [Date.UTC(2010, 3, 1), 106.4]
    ]
},{
    name: 'Mary',
    color: '#FF0000',
    data: [
        [Date.UTC(2010, 0, 1), 60.9], 
        [Date.UTC(2010, 1, 1), 40.5],
        [Date.UTC(2010, 2, 1), 90.0], 
        [Date.UTC(2010, 3, 1), 80.4]
    ]
}]
}); 
```

如果我将直接分配颜色，它将起作用，但如果我将根据 javascript 的返回值分配颜色，则它不起作用......任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T08:02:07.790

根据 musefan 的评论，只需调用您在那里的函数：

```
color: (function() {
    return '#EDF249';
})(), //the last () calls the function 
```

# java - 您如何在客户端 Web 上打破 JavaScript 中的全局空间？

> ID：14805507
> 
> 赞同：0
> 
> 时间：2013-02-11T03:35:44.340
> 
> 标签：java, javascript, jsp, quirks-mode, x-ua-compatible

**情况**

我有一个 JSPF 文件（一个 java jsp“片段”——不确定它的处理方式是否与典型的 JSP 有任何不同——我认为这只是命名法，但我发现的文档甚至堆栈答案都不清楚）。

我可以在内联脚本标签中警告这个 JSPF 文件顶部和底部的字符串，这样标签就不会被其他 HTML 恶作剧破坏或破坏。

但是，如果我在顶部脚本标记中声明一个 var，它将在底部不可用并警告“未定义”。

但是，我可以分配给窗口对象的属性，并按预期在底部脚本标记中显示该属性警报。似乎没有任何东西在修改窗口对象。它显示了正确的类型和窗口方法仍然按预期在此 JSP 文件的顶部和底部触发。

**这个页面上显然很糟糕的事情：**

*   我们正在使用大约 2007 年的prototype.js 库。我认为这是在原型做了非常丑陋的事情之后，我没有看到它与对象原型或类似的东西混在一起。

*   负载均衡器以 X-UA 兼容性 = IE7 模式提供所有内容，不允许 HTML 覆盖。但是，这绝对是所有内容的响应标头。图像、js 文件、CSS 文件。我曾经认为文档类型只会影响 CSS/HTML 问题，但似乎当您将其放在链接的 JS 文件上或 HTML 中有 JS 时，我们会回到 IE7 模式或其他方式。那个或其他东西正在破坏应该在 IE8 中工作但不在这些页面上的 querySelectorAll 方法。

*   响应标头都应用 IE7 模式，但 HTML 文档本身正在切换到怪癖模式，这让我感到困惑，因为我认为您所需要的只是尝试设置 doctype 以建立通用标准模式。在我们的例子中，文档类型上方有空格，它只是前半部分：

> <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 过渡//EN" " [http://www.w3.org/TR/html4/loose.dtd](http://www.w3.org/TR/html4/loose.dtd) ">

所以这就是我们实际拥有的：

> <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 过渡//EN" >

这可能是怪癖模式的原因，但我认为 IE8（不确定 IE7 模式下的 IE8）只是寻找任何旧的 doctype 来建立标准模式，并且它允许在 doctype 前面有空格。更不用说我认为第二部分是针对验证者的。无论如何，我仍然不明白为什么全球空间被核爆了。它也可能是带有不正确 HTML 位置的表格（错误的标签，而不是嵌套失败）。

*   可能不相关，但 java 模板是一场彻底的灾难。嵌套包括与 ajax 请求混合，提供嵌套 9 层的内容。您必须查看几十个 XML、JSP 和 Java 文件才能弄清楚这个页面是如何构建的。6个XML配置文件只是为了整理一个模态等等......

**我已经排除的事情：**

*   没有以不同方式设置元标记的条件 IE 注释。您可以在非 IE 浏览器中看到相同的响应标头。

*   混合中没有帧或 iframe 导致此问题。如果有的话，我不希望窗口对象属性携带相同的值。

*   窗口对象似乎没有以任何方式被破坏或覆盖。

*   不，在这个特定的代码库中没有什么比咖啡脚本更近的了。它主要是原型和通过内联脚本直接插入到 JS 中的 taglib 数据的邪恶联合，以及主要由通才/服务器端开发人员编写的一堆非常糟糕的 JavaScript。

*   我不认为这是一个内存问题，尽管我还没有尝试过分析它。我已经在页面上花费了足够的时间来知道它相当稳定。鉴于在页面甚至可以加载之前必须在服务器上解决的大量废话，性能很糟糕，但是当页面打开时，我并没有耗尽内存或崩溃/冻结或任何事情。这是一个使用率很高的页面，我们正在为生产中的汽车经销商提供服务，所以我认为不需要一台 ace 机器来处理这个页面，否则我们会听到更多关于它的信息。

我还没有弄清楚在我们的开发版本的代码库中我需要去杀死正在设置文档类型的负载均衡器设置等效项，但它可能是链接文件中的 quirksmode 内联 HTML JavaScript 和 IE7 JavaScript 导致某种破坏全球空间的冲突？但是你如何在不破坏窗口对象的情况下对全局空间进行核攻击呢？或者我不知道的prototype.js的某些方面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T04:25:06.057

好的，所以你在一个脚本标签中声明了一些东西，它应该是全局的，但是当第二个脚本标签运行时它不存在。对于给定的页面，您*不能*将（javascript）全局空间“分解”成多个部分。如果你有一个 iframed 页面......那就不同了，因为那是*两个*页面。与 javascript 或一些执行重定向的元标记相同；您正在处理两个单独的页面。我怀疑，这可能就是这里发生的事情——你有一个 javascript 重定向；一些脚本将其设置`document.location`到另一个页面，或者相同的页面但具有不同的参数，导致不同的脚本标签显示在文档或其他内容中。

对于任何*单个*页面，您只有本地和全局声明。如果不放松单页的含义（正如我之前所说的），我真的想不出任何其他情况下您会拥有更多。

（编辑：我再说一遍，你不能“打破”全局空间。这样命名这个问题可能就是为什么你的问题被否决了，因为它相当荒谬；“打破全局空间”只有在我可以隐喻地解释这个短语时才有意义并且可以提出一些用例，当您实际看到两个不同的全局空间时，全局空间可能看起来“一分为二”。）

由于您拥有包括 JSP 和一大堆脚本标签在内的 JSP，在我看来，真正确定发生了什么的唯一方法是使用 Fiddler2 之类的 HTTP 跟踪器，捕获有关何时加载的所有流量您认为给定页面已加载，`debug`在最顶层的脚本块中添加一些语句（可能只是），以允许调试到任何页面以查看何时加载（为事件处理程序添加断点），然后只是观看，跳过，和评估。我知道这是一个痛苦的过程，但是当您将服务器端代码与客户端代码混杂在一起时，这就是您必须做的事情。这不是开发网站的好方法。

# entity-framework - 实体框架客户/地址关系

> ID：14805508
> 
> 赞同：0
> 
> 时间：2013-02-11T03:35:46.700
> 
> 标签：entity-framework

所以我有一种情况，我有一个`Customer`拥有 a`BillingAddress`和 a的实体`ShippingAddress`。也就是说`Customer`，地址簿中可以有多个，这样他们就可以决定运送/账单到哪里。

我也有一个实体，`SalesOrder`它也有 a`BillingAddress`和 a `ShippingAddress`。

我的问题是，我是否应该`Address`为`BillingAddress`and设置一个复杂类型`ShippingAddress`，然后说`AddressBookAddress`从 the 继承`Address`，然后在 上拥有它的集合`Customer`？

我在这里有这个问题：[实体框架 5.0 关系](https://stackoverflow.com/questions/14699976/entity-framework-5-0-relationships)

这解决了`Customer`帐单和送货地址问题，但似乎我最终会得到几个在大多数情况下相同的不同类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T11:16:15.453

我会创建一个`Address`实体来存储所有地址。

一个`Customer`实体可以通过中间表拥有 0..n 个地址`Customer_Address`。

一个`SalesOrder`实体可以有 a`BillingAddress`和 a `ShippingAddress`，每一个都是一个`Address`实体的链接。

# grammar - 证明歧义

> ID：14805509
> 
> 赞同：0
> 
> 时间：2013-02-11T03:35:49.190
> 
> 标签：grammar, context-free-grammar, ambiguity

我一直试图证明语法模棱两可，据我了解不是，而是根据问题；它应该是模棱两可的。语法是

```
S -> AB | aaB
A -> a | Aa
B -> b 
```

我一直在使用的字符串是 aaab。从表面上看，我看不出左右树有什么不同。以字符串开头是 AB 或 aaB 形式，如果是 aaB 形式，则游戏结束，如果是 AB 形式，您可以以 a 结尾，或者继续 Aa 中的另一个分支。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T04:37:43.107

据我所知，恰好有一个字符串具有不止一个解析树（或等效地，不止一个最左边的推导）：aab

```
S -> AB -> AaB -> aaB -> aab

or

S -> aaB -> aab 
```

这一个字符串使语法模棱两可。

# css - 如何使用浮动来定位列？

> ID：14805511
> 
> 赞同：1
> 
> 时间：2013-02-11T03:36:10.300
> 
> 标签：css, position, css-float, multiple-columns

此处如何使用浮动将联系人信息栏定位在照片下方。我大部分时间都在左边，但我想知道如何将最后的联系信息贴在图片上。

![在此处输入图像描述](../Images/41f601c81a35dd33d817755564692488.png)

这是我希望它向上移动的地方，我无法这样做。这是当前的设置：

```
<div id='post'><div id='vpPhotos'>
  <img src='Images/img.jpg'/><img src='Images/default.png'/><img src='Images/default.png'/><img src='Images/default.png'/></br><a id='posttitle' href='#?photoID=$photoID'>View More Pictures</a>
  </div>
    <div id='vpTitle'>
            <h3>$eventTlt</h3>
        </div>
    <div id='vpprice'><b>Price: </b>$priceOfEvent</div>
  <div id='vpdate'>
  </br><b>Start Date:</b>  <div class='float-right'>$eventSD </div>
  </br><b>End Date:</b>  <div class='float-right'>$eventED</div>
  </br><b>Start Time:</b> <div class='float-right'> $eventTime </div>  
  <br/><b>Location Of Event:</b> <div class='float-right'>$location</div>
  <br/><b>Address Of Location:</b> <div class='float-right'>$locationAddress</div></div>
  <div id='eventdesc'>
  </br></br><b>Description:</b> &nbsp&nbsp$eventDesc </div>
<div id='vpcontact'>
  </br><h3 align='left'><b>Contact Information</b></h3> &nbsp&nbsp
  </br><b>Name:</b> &nbsp&nbsp$contactName
  </br></br><b>Email:</b> $emailAddress</div>

<div style='clear:both;'/>
</div> 
```

我都在漂浮着。在我所有其他 div 都向左浮动之后，我不确定那是正确的。`#post`是最外层的，其余的基本可以用名字来形容。

```
#post{
border:3px inset red;
margin-right:20px;
}
#vpPhotos{
border:3px outset blue;
float:left;
width:25%;
}
#vpTitle{
float:left;
border:3px inset green;
}
#vpdate{
float:left;
width: 20%;
border:3px inset blue;
margin-right:100px;
padding-right:300px;
}
#eventdesc{
float:left;
width: 73.74%;
border:3px inset green;
}
#vpcontact{
float:left;
width: 24%;
border:3px inset red;
}
#vpprice{
float:right;
width: 15%;
border:3px inset black;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T03:48:19.300

为此，您需要将照片和联系人 div 放在单独的 div 中，将其浮动并将所有其他 div 放在另一个也浮动的 div 中。

[JS Bin 上的工作示例](http://jsbin.com/uwiqul)。

更新代码：

HTML：

```
 <div id='post'>
    <div id='column-one'>
      <div id='vpPhotos'>
        <img src='Images/img.jpg'/><img src='Images/default.png'/><img src='Images/default.png'/><img src='Images/default.png'/></br><a id='posttitle' href='#?photoID=$photoID'>View More Pictures</a>
        </div>
        <div id='vpcontact'>
         <h3 align='left'><b>Contact Information</b></h3> &nbsp&nbsp
          </br><b>Name:</b> &nbsp&nbsp$contactName
          </br></br><b>Email:</b> $emailAddress
        </div>
      </div>

       <div id="column-two">
  <div id='vpTitle'>
              <h3>$eventTlt</h3>
          </div>
      <div id='vpprice'><b>Price: </b>$priceOfEvent</div>
    <div id='vpdate'>
    </br><b>Start Date:</b>  <div class='float-right'>$eventSD </div>
    </br><b>End Date:</b>  <div class='float-right'>$eventED</div>
    </br><b>Start Time:</b> <div class='float-right'> $eventTime </div>  
    <br/><b>Location Of Event:</b> <div class='float-right'>$location</div>
    <br/><b>Address Of Location:</b> <div class='float-right'>$locationAddress</div></div>
    <div id='eventdesc'>
    </br></br><b>Description:</b> &nbsp&nbsp$eventDesc </div>
</div>

<div style='clear:both;'/>
</div> 
```

CSS：

```
#post {
    border: 3px inset red;
    margin-right: 20px;
}

#column-one,
#column-two {
    float: left;
    width: 24%;
}

#column-two {
    width: 76%;
}

#vpPhotos {
    border: 3px outset blue;
  width: 98%;
  float: left;
}

#vpTitle {
    float: left;
    width: 80%;
    border: 3px inset green;
}

#vpdate {
    width: 99%;
    float: left;
    border: 3px inset blue;
}

#eventdesc {
    float: left;
    width: 99%;
    border: 3px inset green;
}

#vpcontact {
    float: left;
  width: 98%;
    border: 3px inset red;
}

#vpprice {
    float: right;
    width: 15%;
    border: 3px inset black;
} 
```

# php - 如何重命名对象名称？

> ID：14805514
> 
> 赞同：1
> 
> 时间：2013-02-11T03:36:37.183
> 
> 标签：php, object

我正在使用融合图表。

我有这样的代码

```
function get_improvement_areas_graph($param1, $param2, $repetitions, $report_type, $report_date, $sid, $graphurl)
{
$nxml=generate_improvement_areas_xml($sid,$param1,$report_type,$report_date,"graphurl");
    $graphurl = preg_replace("/\.jpg$/i", "", $graphurl); 

file_put_contents("export/$graphurl.xml", $nxml);
echo renderChart("FusionCharts/MSColumn3D.swf", "", $nxml, "$graphurl", 550, 420);
} 
```

函数调用处于循环中。这里 $nxml 是一个对象。在传递相同的对象时，图表不起作用。

我的问题是如何为每次通话重命名它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T03:46:46.633

Flash 文件被缓存。重新加载页面不会下载更新的 swf。您必须删除临时 Internet 文件才能获得新版本。解决此问题的一种方法是向 swf url 添加一个动态变量。

```
FusionCharts/MSColumn3D.swf?random=123 
```

# iphone - 可以从 NSAttributedString 中获取超链接功能吗？

> ID：14805524
> 
> 赞同：1
> 
> 时间：2013-02-11T03:37:37.273
> 
> 标签：iphone, ios, objective-c, cocoa-touch, nsattributedstring

是否可以创建超链接`NSAttributedString`？我需要在具有类似推特`@username`风格的文本字段中显示用户名，并且需要在点击它以显示新的视图控制器时进行回调。我搜索文档但找不到任何东西。

这是否可能，如果没有，还有哪些其他选择？

谢谢

# javascript - 使用 Google 脚本从 html 中抓取表格

> ID：14805527
> 
> 赞同：4
> 
> 时间：2013-02-11T03:38:21.423
> 
> 标签：javascript, html, dom, google-apps-script, web-scraping

嗨，我正在尝试获取此网页并将其存储到表格中……任何表格。我正在使用谷歌脚本。

```
var fetchString="http://www.airchina.com.cn/www/en/html/index/ir/traffic/"
var response = UrlFetchApp.fetch(fetchString); 
```

我需要一些关于代码的帮助才能开始。我正在寻找“交通数据”表。如果可能的话，我想把它放到一个二维数组中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T04:29:33.990

Google 提供[XML 解析/操作服务](https://developers.google.com/apps-script/service_xml)。您可以使用它来解析该表中的 html。

请注意，如果您调查该 html 的实际来源，您会发现它实际上来自不同的 url。 [http://www.airchina.com.cn/www/jsp/airlines_operating_data/exlshow_en.jsp](http://www.airchina.com.cn/www/jsp/airlines_operating_data/exlshow_en.jsp)

所以这就是我为你准备的。它工作得很好。希望这对您来说已经足够了。

```
function fetchIt() {
  var fetchString="http://www.airchina.com.cn/www/jsp/airlines_operating_data/exlshow_en.jsp"
  var response = UrlFetchApp.fetch(fetchString);

  var xmlDoc = Xml.parse(response.getBlob().getDataAsString(),true);
  var b = xmlDoc.getElement().getElement("body");
  var table = b.getElement("div").getElement("div").getElement("div").getElements("div")[1].getElement("table");

  var rows = [];
  var trs = table.getElements("tr");
  for (var r=0,rlength=trs.length; r<rlength; r++) {
    var tds = trs[r].getElements("td");
    var row = [];
    for (var c=0,clength=tds.length; c<clength; c++) {
      row.push(tds[c].getText());
    }
    rows.push(row);
  }

  Logger.log(Utilities.jsonStringify(rows));

} 
```

# css - chrome和firefox之间的div大小不一致

> ID：14805529
> 
> 赞同：4
> 
> 时间：2013-02-11T03:38:59.233
> 
> 标签：css, html

我遇到了一个有趣的问题，即带有文本的 DIV 在 Firefox 和 Chrome 中占用空间。我有一个水平扩展的条形图，每个条形图由一个垂直条形和下面的标题组成。

```
<div class="verticalChart">
  <div class="singleBar">
    <div class="bar"><!-- contents set by javascript, equal size for all bars--></div>
    <div class="title">What is a fraction</div>
  </div>
  <div class="singleBar">
    <div class="bar"></div>
    <div class="title">Unit Fractions on Number Line</div>
  </div>
[...] <!-- more bars -->
</div> 
```

我将以下 CSS 应用于每个条形下方的标题，以确保它们的底部位于相同的 y 坐标处。我允许文本最多占用 3 行，然后超出可见框：

```
.verticalChart .singleBar .title {
  font-size: 10px;
  line-height: 1.0em;
  min-height: 3.0em;
  max-height: 3.0em;
  overflow: hidden;
  margin-top: 5px;
  text-align: center;
  white-space: normal;
} 
```

我基本上需要标题栏的高度始终相同，否则条形将错位。有趣的是，这似乎在 Firefox 中运行良好：

![火狐](../Images/544c33af55600cfdbab86f8fd5d2fb92.png)

但在 Chrome 上是不行的：

![铬合金](../Images/6da8cc2ada4b6e842ff650b10d8c4a60.png)

基于摆弄数字，我的怀疑是 Firefox 中的 min-height 与 Chrome 中的 min-height 行为不同：

*   在 Firefox 中，将 min-height 降低到 3em 以下将从标题 div 中删除不需要它的多余行，从而使它们上方的条不对齐。
*   在 Chrome 中，更改 min-height 只会将下方的滚动条推得更近或更远。带有 bar + title 的 div 不会以任何方式相对于彼此移动。

这里到底发生了什么？我是否以错误的方式实现了标题栏的“最小高度”效果？是否有更跨浏览器友好的方法？

非常感谢！

编辑：

JSFiddle 根据大众需求：http: [//jsfiddle.net/YJHrY/4/](http://jsfiddle.net/YJHrY/4/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T04:41:00.727

正如我所料，您正在使用值为 inline-block 的显示属性，默认情况下这些属性与底部对齐。
[http://jsfiddle.net/YJHrY/5/](http://jsfiddle.net/YJHrY/5/)

添加一个垂直对齐：顶部到您的 .verticalChart .singleBar

```
.verticalChart .singleBar {
    /* FrontRow Edits */
    width: 4.4%;
    display: inline-block;
    margin:0 1% 0% 1%;
    float: none;
    vertical-align: top;
} 
```

# c++ - 尝试构建 SFML 示例时出错

> ID：14805532
> 
> 赞同：1
> 
> 时间：2013-02-11T03:39:09.053
> 
> 标签：c++, linux, debian, sfml

可以这么说，我是一个“菜鸟”，我正在尝试在我的 64 位 crunchbang linux 笔记本电脑上进行这个简单的 SFML 窗口测试。

```
 #include <SFML/Window.hpp>

    int main()
    {
         // Create the main window
         sf::Window App(sf::VideoMode(800, 600, 32), "SFML Window");

         // Start main loop
         bool Running = true;
         while (Running)
         {
              App.Display();
         }

         return 0;
    } 
```

所以，这就是我要编译和构建的文件。当我把它带到控制台时，这就是发生的事情。

```
 drdeviation@521463:~/cpp/test1$ g++ -c window-window.cpp
    drdeviation@521463:~/cpp/test1$ g++ -o window-window.o -lsfml-window -lsfml-system
    /usr/lib/gcc/x86_64-linux-gnu/4.4.5/../../../../lib/crt1.o: In function `_start':
    (.text+0x20): undefined reference to `main'
    collect2: ld returned 1 exit status
    drdeviation@521463:~/cpp/test1$ 
```

所以，我真的不知道是什么导致了这个问题......我一直在绞尽脑汁试图解决这个问题。某人。暂停。抱歉，如果我忽略了一些愚蠢的事情...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T03:44:49.147

尝试：

```
g++ -c window-window.cpp
g++ -o test window-window.o -lsfml-window -lsfml-system 
```

或者

```
g++ -o test window-window.cpp -lsfml-window -lsfml-system 
```

# ruby-on-rails - 使用 rspec Ruby 测试调用错误

> ID：14805535
> 
> 赞同：0
> 
> 时间：2013-02-11T03:39:48.177
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我将如何实施`rspec`应该引发错误的测试？下面我有一个具有以下字段定义的类

```
attr_accessor :name
attr_accessor :title
attr_writer :salary 
```

下面是测试。基本上，您应该能够为`:name`and输入新值`:title`，但`:salary`只能实例化一次且仅实例化一次（在构造函数中）。

```
it 'does not respong to :salary=' do
  (subject.salary=100).should raise_error
end 
```

这是我第一次尝试通过此测试，但是我仍然收到错误

```
def :salary=(input)
  nil
end 
```

错误信息：

```
def :salary=(input)
     ^ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T03:43:22.120

用于对错误进行断言的 RSpec 语法（至少是最新版本）应该类似于：

```
it 'does not respond to :salary=' do
  expect { subject.salary = 100 }.to raise_error
end 
```

您还会收到语法错误（不是所需的错误）。省略冒号。

```
def salary=(value)
end 
```

# javascript - 异步访问 window.external (JavaScript)

> ID：14805536
> 
> 赞同：1
> 
> 时间：2013-02-11T03:39:55.293
> 
> 标签：javascript

我正在协助开发嵌入到外部供应商软件产品中的 JavaScript Web 应用程序。***我们的 Web 应用程序通过调用window.external***获得了对父应用程序数据的标准访问权限。

我们发现，当父应用程序（例如`window.external.getMyDate("big data")`）中的操作运行缓慢时，它会锁定我们的浏览器窗口。我们无法控制界面或父应用程序，但是有什么方法可以在 JavaScript 中运行这样的异步调用（使用类似于 AJAX 调用的回调）？

目标是我们的 Web 应用程序在我们访问父数据时不会锁定。

# php - 如何通过 Amazon SES 发送海量电子邮件？

> ID：14805538
> 
> 赞同：0
> 
> 时间：2013-02-11T03:40:03.280
> 
> 标签：php, codeigniter, amazon

我正在使用 Amazon SES 服务向我的用户发送电子邮件。我们的网站有大约 80,000 名活跃用户。我想通过 Amazon SES 发送通知电子邮件。

我的帐户每秒可以发送 20 封电子邮件，每天可以发送 100,000 封电子邮件。但是，当我从服务器发送大量电子邮件时，它会阻止我。我的服务器使用 CodeIgniter 和 PHP foreach 同时发送多封电子邮件。

我在想，如果我每秒发送一封电子邮件，它就会起作用。有没有办法在 PHP 平台上发送大量电子邮件？

# javascript - 建立 WebSockets 连接时 100% CPU 消耗

> ID：14805540
> 
> 赞同：2
> 
> 时间：2013-02-11T03:40:14.497
> 
> 标签：javascript, performance, websocket, cpu-usage, readystate

我尝试编写一个连接到 WebSocket 服务器的函数。此服务器关闭时会出现此问题。这个函数应该等待它，即使很长时间，但它不应该消耗 100% 的 CPU。这是我的代码：

```
var state = {
    connected: false
};

var settings = {
    host: 'localhost',
    port: 1988
};

function connect(settings) {
    try {
        var socket;
        var host = 'ws://' + settings.host + ':' + settings.port;
        var socket = new WebSocket(host);

        socket.onopen = function() {
            state.connected = true;
        }
        // socket.onmessage
        socket.onclose = function() {
            state.connected = false;
            connect(settings);
        }

    } catch(e){
        console.log(e);
    }
} 
```

所以我需要以某种方式将一个间隔传递给 WebSocket 构造函数，看起来它只是试图在循环中打开一个连接，从而降低性能。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T03:52:13.177

当您尝试连接时，套接字会立即关闭，从而导致您再次尝试连接。在尝试之间添加间隔：

```
socket.onclose = function() {
    state.connected = false;
    setInterval(function() {
        connect(settings);
    }, 1000);
} 
```

# ruby - 为什么 Ruby 的 stdlib 有一个 DateTime 类？

> ID：14805542
> 
> 赞同：2
> 
> 时间：2013-02-11T03:40:35.073
> 
> 标签：ruby, datetime

不久前，我深入研究了[Ruby 类时间类之间的差异](https://stackoverflow.com/questions/5941613/are-the-date-time-and-datetime-classes-necessary/14007547#14007547)。在四处询问之后，我得出的结论是**没有充分的理由使用 DateTime**，永远。

这个问题本质上与上面提出的问题相反：

`DateTime`当 Date 和 Time 可以做得很好，更好的时候，为什么最初被添加到 stdlib 中？谁实际使用 DateTime（以及为什么）以使其继续在 stdlib 中占有一席之地？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T03:55:59.023

DateTime 作为 Rails 的东西被普及，它被创建为环绕`DATETIME`数据库中的等效列。这些列比日期范围要灵活得多`Time`，因此需要一种新类型来捕获所有可能的值。在 Ruby 1.8.6 和 1.8.7 的早期版本中，仅限于标准的 1901-2038 范围，内部表示为无符号长（32 位）数字。

现在差异大多很小，尽管在 Rails 中大多数时间计算方法只是 DateTime。

我真的不会担心您使用哪个 DateTime 或 Time ，除非您有特别好的理由更喜欢其中一个。如果您从 Rails 获取 DateTime 对象，请顺其自然并使用它们。如果您正在构建自己的 Ruby 应用程序，那么您可以做任何您想做的事情。

# winrt-xaml - Windows 8 App 应用程序调用了为不同线程编组的接口

> ID：14805543
> 
> 赞同：6
> 
> 时间：2013-02-11T03:40:40.660
> 
> 标签：winrt-xaml

我正在使用 c#/XAML 开发 Windows 8 应用程序。除了这个事件处理程序之外，一切都在工作，我在这一行收到以下错误。

```
等待 RefreshUserInfoAsync();
```

**应用程序调用了为不同线程编组的接口。（来自 HRESULT 的异常：0x8001010E (RPC_E_WRONG_THREAD)）**

此 Observable Collection 正在从应用程序类中的推送通知处理程序更新，并且此事件处理程序在我的视图模型中。我没有使用任何像 MVVM Light 这样的框架。我查看了其他一些关于此的帖子并尝试创建自己的 Dispatcher Helper，但我收到了另一个错误，其中 Window.Current.Dispatcher 为空。任何想法如何使这项工作？

```
 ```
 private async void PushActions_CollectionChanged(object sender, System.Collections.Specialized.NotifyCollectionChangedEventArgs e)
    {
        string action = e.NewItems[0] as string;
        if(action != null)
        {
             await RefreshUserInfoAsync();
        }
    }

    private async Task RefreshUserInfoAsync()
    {
        var userInfos = await SessionRepository.GetSessionUsersWithInfoAsync(SessionGuid, RoundGuid);
        this.UserInfoList = new ObservableCollection<UserInfo>(userInfos);
    } 
``` 
```

`强调文本

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-19T17:50:27.057

I talked with [Jeffrey Richter](https://rads.stackoverflow.com/amzn/click/com/0735667454) and he gave me the answer. From the View Model, I can get to the Dispatcher via CoreApplication.MainView.CoreWindow.

Here is the update:

```
var dispatcher = CoreApplication.MainView.CoreWindow.Dispatcher;

await dispatcher.RunAsync(Windows.UI.Core.CoreDispatcherPriority.Normal, () => {
    this.UserInfoList = new ObservableCollection<UserInfo>(userInfos);
}); 
```

I hope this helps someone else.

Mike`

# c - 在C中查找数组的长度

> ID：14805545
> 
> 赞同：1
> 
> 时间：2013-02-11T03:41:05.060
> 
> 标签：c, arrays, pointers

我正在尝试查找我定义的“标题”结构数组的长度（标题仅包含一些信息 int 成员，如果这与此处相关）。我通过传递`fl`、指向数组开头的指针和 来`idx`尝试这样`fl_tails`做指向末尾的指针）：

```
int arr_size(header* fl, int idx){

  int cnt = 1; /* Anything passed guaranteed to have at least 1 */ 

  while(fl != fl_tails[idx]){
    fl++; 
    cnt++;
  }
} 
```

我认为这只会推进`fl`指针并正确生成计数，直到到达终点，但它进入了无限循环。我想知道这是由这个函数中的某些东西引起的，还是我需要在其他地方找到的东西引起的。当我将开头和结尾的地址打印为无符号整数时，它们似乎是无害的——分别是 16777216 和 16777344。也许我对`header`结构及其大小/对台阶的影响的理解也有问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T03:47:02.640

我正在查看您的 while 循环，您正在将内存地址与索引处的值进行比较。这将始终评估为真。我相信这就是你得到无限循环的原因。

至于数组的长度，您是否考虑过使用 sizeof() 运算符/函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T03:44:59.053

你想比较地址，所以：

```
while(fl != &fl_tails[idx])
            ^ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T03:56:42.640

请记住：

```
 while(fl != fl_tails[idx]) 
```

相当于：

```
 while(fl != *(fl_tails + idx)) 
```

所以你正在做的是将指针 fl 与实际值进行比较，因为 (fl_tails + idx) 是一个指针，*(fl_tails + idx) 正在取消引用这个指针以获取它指向的值。

因此，如果您只是比较指针地址以查找数组的末尾，我将更改为：

```
while(fl != &fl_tails[idx]) 
```

这样您就可以将指针与指针进行比较。

至于你得到的值，请记住一个没有指针的指针可以有一个指针持有一个初始化值（来自一些旧程序的一些旧值）。我推荐看这个视频：

[http://www.youtube.com/watch?v=f-pJlnpkLp0](http://www.youtube.com/watch?v=f-pJlnpkLp0)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T03:54:06.567

问题是`fl_tails[idx]`返回不同的指针类型并且`fl`是不同的指针类型。它们永远不会指向同一个位置（除非它们在联合中），所以我认为程序进入了无限循环。

# javascript - JavaScript XMLHttpRequest 无法将参数传输到服务器

> ID：14805546
> 
> 赞同：0
> 
> 时间：2013-02-11T03:41:09.683
> 
> 标签：javascript, ajax, xmlhttprequest

我检查了服务器端，直接使用浏览器 GET 或 jquery.ajax GET 调用，它都可以返回正确的页面。也就是说，服务器端没有问题。

但是当我尝试使用以下代码进行 ajax 调用时，我总是收到 500 内部服务器错误。奇怪的是我查看了控制台日志，似乎参数没有成功传输到服务器。到达服务器时的 'type' 和 'source' 参数都为空。

相关代码如下。newXMLHttpRequest() 只是一种为不同浏览器返回正确对象的方法，已被验证为正确。

有人对出了什么问题有任何想法吗？

```
function updatePage(html){
    var change =html;
    var contents = document.getElementById("contents");
        contents.innerHTML = change;
}

function submit(){
    var t = document.getElementById("type").value;
    var source = document.getElementById("src").value;

    var req = newXMLHttpRequest();
    req.onreadystatechange = getReadyStateHandler(req, updatePage);
    req.open("GET", "RSSFetchServlet.do",true);
    req.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
    req.send("type="+t+"&source="+source);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T03:42:42.970

[5xx 错误](http://www.checkupdown.com/status/E500.html)意味着您的服务器端脚本有问题，而不是您的客户端脚本。检查语法错误、丢失`;`或可能丢失的声明。

> 修复 500 错误 - 常规
> 
> 此错误只能通过修复 Web 服务器软件来解决。这不是客户端问题。由 Web 服务器站点的操作员来定位和分析应该提供有关错误的更多信息的日志。

* * *

尝试在 url 上附加参数。

```
req.open("GET", "RSSFetchServlet.do?type="+t+"&source="+source,true);
req.send(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T04:20:18.697

实际问题是只有在使用 POST 时才能使用 request.send 方法发送参数。否则，req 不会将数据封装到 URL 中。

# java - 在 Java 中运行构造函数代码之前是否已初始化字段？

> ID：14805547
> 
> 赞同：78
> 
> 时间：2013-02-11T03:41:22.190
> 
> 标签：java, constructor, initialization

谁能解释以下程序的输出？我认为构造函数是在实例变量之前初始化的。所以我期待输出是“XZYY”。

```
class X {
    Y b = new Y();

    X() {
        System.out.print("X");
    }
}

class Y {
    Y() {
        System.out.print("Y");
    }
}

public class Z extends X {
    Y y = new Y();

    Z() {
        System.out.print("Z");
    }

    public static void main(String[] args) {
        new Z();
    }
} 
```

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2013-02-11T05:21:49.663

正确的初始化顺序是：

1.  静态变量初始化器和静态初始化块，按文本顺序，如果该类之前没有被初始化。
2.  构造函数中的 super() 调用，无论是显式的还是隐式的。
3.  实例变量初始化器和实例初始化块，按文本顺序。
4.  super() 之后的构造函数的剩余部分。

请参阅[Java 虚拟机规范的第 2.17.5-6](http://docs.oracle.com/javase/specs/jls/se8/html/jls-12.html#jls-12.5)节。

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2013-02-11T03:47:10.107

如果你看一下类文件的反编译版本

```
class X {
    Y b;

    X() {
        b = new Y();
        System.out.print("X");
    }
}

class Y {
    Y() {
        System.out.print("Y");
    }
}

public class Z extends X {

    Y y;

    Z() {
        y = new Y();
        System.out.print("Z");
    }

    public static void main(String args[]) {
        new Z();
    }
} 
```

可以发现实例变量`y`在构造函数内部被移动了，所以执行顺序如下

1.  调用构造函数`Z`
2.  它触发的默认构造函数`X`
3.  调用`X`构造函数的第一行。`new Y()`
4.  打印 Y
5.  打印 X
6.  调用构造函数 Z 中的第一行`new Y()`
7.  打印`Y`
8.  打印 Z

所有实例变量都使用构造函数语句进行初始化。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-08-06T18:21:31.677

**当您调用构造函数时，实例变量初始化程序在构造函数的主体之前运行。**您认为以下程序的输出是什么？

```
public class Tester {
    private Tester internalInstance = new Tester();
    public Tester() throws Exception {
        throw new Exception("Boom");
    }
    public static void main(String[] args) {
        try {
            Tester b = new Tester();
            System.out.println("Eye-Opener!");
        } catch (Exception ex) {
            System.out.println("Exception catched");
        }
    }
} 
```

main 方法调用 Tester 构造函数，该构造函数引发异常。您可能希望 catch 子句捕获此异常并打印*Exception catched*。但是，如果您尝试运行它，您会发现它没有执行任何此类操作，并且会抛出一个`StackOverflowError`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-02-18T03:27:23.560

为了澄清对静态的误解 - 我将简单地参考这一小段代码：

```
public class Foo {
  { System.out.println("Instance Block 1"); }
  static { System.out.println("Static Block 1"); }
  public static final Foo FOO = new Foo();
  { System.out.println("Instance Block 2"); }
  static { System.out.println("Static Block 2 (Weird!!)"); }
  public Foo() { System.out.println("Constructor"); }
  static public void main(String p[]) {
    System.out.println("In Main");
    new Foo();
  }
} 
```

惊喜的是输出如下：

```
Static Block 1
Instance Block 1
Instance Block 2
Constructor
Static Block 2 (Weird!!)
In Main
Instance Block 1
Instance Block 2
Constructor 
```

请注意，我们有一个在两个实例*之后*`static {}`调用的。发生这种情况是因为我们在中间抛出了构造函数，在第一次调用构造函数时插入了执行顺序。*`{}`*

 *在我处理这个答案时发现了这一点 - [https://stackoverflow.com/a/30837385/744133](https://stackoverflow.com/a/30837385/744133)。

基本上我们观察到这种情况发生：

1.  在第一次初始化对象期间，根据出现的顺序为静态和实例初始化混合初始化当前对象

2.  对于所有接下来的初始化，仅按发生顺序进行实例初始化，因为静态初始化已经发生。

我需要研究继承的混合，以及对 super 的显式和隐式调用，这将如何影响这一点，并将根据发现进行更新。它可能与其他提供的答案相似，只是他们在静态初始化时弄错了。

* * *

## 回答 #5

> 赞同：-6
> 
> 时间：2016-01-11T09:28:23.630

JLS 12.5 中指定了初始化顺序：

1.首先为新对象分配内存

2.然后将对象中的所有实例变量（包括该类及其所有超类中定义的实例变量）初始化为其默认值

3.最后调用构造函数。

[https://stackoverflow.com/questions/26552799/which-run-first-default-values-for-instance-variables-or-super-constructors](https://stackoverflow.com/questions/26552799/which-run-first-default-values-for-instance-variables-or-super-constructors)*

# php - 如果 Post 值不为空，则更新数据库

> ID：14805548
> 
> 赞同：3
> 
> 时间：2013-02-11T03:41:31.453
> 
> 标签：php, mysql, sql

*仅当 $_POST[ value* ] 不为空时，我才尝试更新表 Users 。如果它为空，则应该保留列中已有的值。

```
$query = "UPDATE `Users` 
SET FirstName = COALESCE(:firstName, FirstName), LastName = ISNULL(:lastName, LastName), City = :city, State = :state WHERE Email = :email";
$stmt = $dbh->prepare($query);
$stmt->bindValue(':firstName', $firstName);
$stmt->bindValue(':lastName', $lastName);
$stmt->bindValue(':city', $city);
$stmt->bindValue(':state', $state);
$stmt->bindValue(':email', $email);
$stmt->execute(); 
```

我为 FirstName 列尝试了 COALESCE，为 LastName 尝试了 ISNULL。COALESCE 用空白（NULL）替换我的值，这与我想要完成的完全相反，并且 ISNULL 似乎不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T03:44:02.377

假设您`COALESCE`的意思是用空白 ('') 替换 FirstName，然后尝试使用`NULLIF`：

```
UPDATE `Users` 
SET FirstName = COALESCE(NULLIF(:firstName,''), FirstName) ... 
```

我假设 POST 发布的是空白。

祝你好运。

# python - 输入数据类型错误

> ID：14805550
> 
> 赞同：0
> 
> 时间：2013-02-11T03:41:50.330
> 
> 标签：python

我有一个程序，它接受一个字符串并将其转换为如下所示的列表 - `['CTTC', 'CGCT', 'TTTA', 'CATG']`。（它实际上比这长得多）。现在我需要找出这些列表元素中有多少是`C or A or T or G`第一个字母。这需要从终端获取，即使用该`input`功能。

现在据我所知，在 python 3.2 中，输入函数的数据类型默认为字符串 ( `str`) 而不是整数 ( `int`)（可以通过 using 看到`isinstance`）。但是，由于我使用的是大学服务器，python 版本较旧（我认为 2.7 或更高版本但低于 3.0）。在这种情况下，当我使用输入功能要求用户选择一个 `initial = input("Choose a letter:")`字母时，当我输入任何字母（A、T、G 或 C）时，它会给我一个错误`NameError: name 'C' is not defined`。当我使用 . 检查数据类型时`isinstance`，我意识到 python 版本将输入的数据类型作为`int`. 当我尝试将其转换为字符串时，它会给出相同的错误。是版本的问题还是我做错了什么。我的代码如下。

```
import sys
#import random

file = open(sys.argv[1], 'r')
string = ''
for line in file:
    if line.startswith(">"):
        pass
    else:
        string = string + line.strip()

w = input("Please enter window size:")
test = [string[i:i+w] for i in range (0,len(string),w)]
#seq = input("Please enter the number of sequences you wish to read:")
#first = random.sample((test), seq)
print test
l = input("Enter letter for which you wish to find the probability:")
lin = str(l)
print lin 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T04:14:09.087

使用`raw_input`，不使用`input`。在 Python 2.x 中，`input`需要有效的 Python 代码，其中 as`raw_input`会将输入转换为字符串。在 Python 3.x`input`中的工作方式与`raw_input`.

要解决您的*实际*问题，即计算首字母的数量，您可以使用 a[`defaultdict`](http://docs.python.org/2/library/collections.html#collections.defaultdict)或 a [`Counter`](http://docs.python.org/2/library/collections.html#collections.Counter)。`Counter`仅当您的 Python 版本为 2.7 及更高版本时才可用。`defaultdict`在 2.5 中添加。

```
>>> from collections import Counter
>>> i = ['CTTC','CGCT','TTTA','CATG','ABCD']
>>> c = Counter(x[0] for x in i)
>>> c['C']
3 
```

这是`defaultdict`方法：

```
>>> from collections import defaultdict
>>> d = defaultdict(int)
>>> for x in i:
...    d[x[0]] += 1
...
>>> d['C']
3 
```

# php - PHPDkim - 在 Gmail 中获取 dkim=hardfail

> ID：14805552
> 
> 赞同：0
> 
> 时间：2013-02-11T03:41:54.713
> 
> 标签：php, email, dkim, spf

我正在尝试使用 SPF 和 DKIM 验证我的外发邮件。

我已经为域 imhadoop.com 配置了 SPF 和 DKIM 条目。

我正在使用 PHPDkim 库发送电子邮件。

我在 Gmail 中看到以下内容：

```
Delivered-To: xxx@gmail.com
Received: by 10.64.35.73 with SMTP id f9csp37326iej;
    Sun, 10 Feb 2013 19:27:12 -0800 (PST)
X-Received: by 10.68.244.35 with SMTP id xd3mr15213610pbc.28.1360553232375;
    Sun, 10 Feb 2013 19:27:12 -0800 (PST)
Return-Path: <xxx@imhadoop.com>
Received: from sg2nlvphout02.shr.prod.sin2.secureserver.net    (sg2nlvphout02.shr.prod.sin2.secureserver.net. [182.50.132.196])
    by mx.google.com with SMTP id d10si39427959paz.321.2013.02.10.19.27.11;
    Sun, 10 Feb 2013 19:27:12 -0800 (PST)
Received-SPF: pass (google.com: domain of xxx@imhadoop.com designates 182.50.132.196 as  permitted sender) client-ip=182.50.132.196;
Authentication-Results: mx.google.com;
   spf=pass (google.com: domain of xxx@imhadoop.com designates 182.50.132.196 as permitted sender) smtp.mail=xxx@imhadoop.com;
   dkim=hardfail header.i=@imhadoop.com
Received: (qmail 7920 invoked from network); 11 Feb 2013 00:26:47 -0000
Received: from unknown (HELO ip-182-50-154-44.ip.secureserver.net) (182.50.154.44)
by sg2nlvphout02.shr.prod.sin2.secureserver.net (182.50.132.196) with ESMTP; 11 Feb   2013 00:26:47 -0000
Received: by ip-182-50-154-44.ip.secureserver.net (Postfix, from userid 0)
id C69847DEE38; Sun, 10 Feb 2013 20:27:10 -0700 (MST)
To: xxx@gmail.com
Subject: test
X-PHP-Originating-Script: 500:dkim-test.php
X-DKIM: php-dkim.sourceforge.net
DKIM-Signature: v=1; a=rsa-sha1; q=dns/txt; l=2; s=imhadoop;
t=1360553230; c=relaxed/simple;
h=From:To:Subject;
d=imhadoop.com;
z=From:=20"Fresh=20DKIM=20Manager"=20<xxx@imhadoop.com>
|To:=20xxx@gmail.com
|Subject:=20test;
bh=uoq1oCgLlTqpdDX/iUbLy7J1Wic=;
b=Ps2QRGG74dT8WCpDUS5qliXzHM9mpWze7qhdeOML39oB1puFUXNnFHuAUpy6MSSYAzTYRxKUKCYRyGc8T obL9rP6iLzaGbq507aF7s5W00ayq3HQjHJ+oNPGPZxsEqob/jg4+6meaBm2Dc2nGaJWAymdS5nICOmg1k5QvOlx6P8=
From: "Fresh DKIM Manager" <xxx@imhadoop.com>
To: xxx@gmail.com
Reply-To: xxx@imhadoop.com
Content-Type: text/html
MIME-Version: 1.0
Message-Id: <20130211032710.C69847DEE38@ip-182-50-154-44.ip.secureserver.net>
Date: Sun, 10 Feb 2013 20:27:10 -0700 (MST) 
```

尽管邮件通过了 SPF 检查，但 Gmail 显示 DKIM hardfail。

# haskell - Haskell hClose 阻塞

> ID：14805553
> 
> 赞同：6
> 
> 时间：2013-02-11T03:41:56.323
> 
> 标签：haskell

我正在用 Haskell 编写服务器，我想在客户端断开连接后显式关闭它们。当我调用`hClose`时，线程将阻塞，直到客户端关闭它们的句柄。有没有办法让它在不阻塞的情况下关闭？

提前致谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-11T04:06:52.047

当然，只需在另一个线程中运行它：

```
import Control.Concurrent (forkIO)

forkIO (hClose handle) 
```

正如 jozefg 所说，您可以使用更高级的解决方案，例如在 中找到的解决方案`async`，但我认为在这种情况下没有理由这样做。

# c# - 在 DatagridView 中，按列，我想让列的 ToolTipText 从同一行中的其他列收集数据？

> ID：14805554
> 
> 赞同：0
> 
> 时间：2013-02-11T03:41:58.787
> 
> 标签：c#, winforms, datagridview, datagridviewcolumn

我有一列有一个约会开始的时间和两到三个其他的行约会的长度，具体取决于类型。我想设置开始时间的工具提示，以显示该约会的结束时间等于开始时间+columna.int+columnb.int+columnc.int。是否有可能以相对简单的方式让工具提示显示约会应该结束的时间？它将基于同一行中的另一列。

感谢您的帮助，斯科特巴顿

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T05:31:08.167

您可以通过编程将工具提示设置为您可以通过编程访问的任何内容。不过，我不确定这是一种好的编程习惯。工具提示需要一些时间才会出现。

在下面的示例中，我正在创建一些数据集来填充 datagridview。我没有使用日期时间，而只是为第 2 列和第 3 列中字符串总和的第一列组成了工具提示。

```
 DataTable dt = new DataTable();

    private void button1_Click(object sender, EventArgs e)
    {
        //put some data into a table
        int[,] time = new int[,] { { 0, 4, 1 }, { 1, 5, 2 }, { 15, 10, 3 } };

        dt.Columns.Add("x");
        dt.Columns.Add("y");
        dt.Columns.Add("z");

        for (int i = 0; i < 3; i++)
        {
            DataRow dr = dt.NewRow();
            dr[0] = time[i, 0];
            dr[1] = time[i, 1];
            dr[2] = time[i, 2];
            dt.Rows.Add(dr);
        }

       dataGridView1.DataSource = dt;

    }

    private void dataGridView1_CellEnter(object sender, DataGridViewCellEventArgs e)
    {
        dataGridView1.ShowCellToolTips = true;

        Point loc = dataGridView1.CurrentCellAddress;
        if (loc.X == 0)
        {
            dataGridView1.CurrentCell.ToolTipText = String.Format("{0} ",
                dt.Rows[loc.Y][loc.X + 1].ToString() + dt.Rows[loc.Y][loc.X + 2].ToString());
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T07:52:35.550

`.MouseMove`您可以在事件中完成您的任务和`.HitTest Method`

```
 private void dataGridView1_MouseMove(object sender, MouseEventArgs e)
    {
        var hitTest = dataGridView1.HitTest(e.X, e.Y);
        if (hitTest.Type == DataGridViewHitTestType.ColumnHeader)
        {
            List<string> data = new List<string>();
            //var getRows = dataGridView1.Rows.Cast<DataGridViewRow>().ToList();
            //foreach (var item in getRows)
            //    data.Add(item.Cells[1].EditedFormattedValue.ToString());

            if (dataGridView1.CurrentCell == null) return;
            var currentRowIndex = dataGridView1.CurrentCell.RowIndex;
            var getRows = dataGridView1.Rows[currentRowIndex].Cells.Cast<DataGridViewCell>().ToList();
            foreach (var item in getRows)
                data.Add(item.EditedFormattedValue.ToString());

            string[] data1 = data.ToArray();
            dataGridView1.Columns[hitTest.ColumnIndex].ToolTipText = string.Join(", ", data1);
        }
    } 
```

# java - 拆分操作栏不透明

> ID：14805555
> 
> 赞同：1
> 
> 时间：2013-02-11T03:41:59.583
> 
> 标签：java, android, android-layout, user-interface, android-widget

我应用了一个自定义主题来使我的选项卡和操作栏透明。但是当我将 splitActionBarWhenNarrow 属性添加到清单时，底部操作栏不再透明。有谁知道如何使拆分操作栏保持我应用的样式？

谢谢！

![在此处输入图像描述](../Images/8f1da04350f05e3ef68f4c4799bc511a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:44:56.510

您是否同时设计了常规操作栏和拆分操作栏？两者实际上是分开设计的。

常规操作栏的样式为 ，`actionBarStyle`而拆分操作栏的样式为`actionBarSplitStyle`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-06T04:00:48.540

为属性设置透明颜色`android:backgroundSplit`将起作用。

# ruby-on-rails - 在 Ruby/Rails 中需要

> ID：14805556
> 
> 赞同：0
> 
> 时间：2013-02-11T03:42:14.263
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在尝试对一个名为`UserModel`. 我的 RSpec 代码是：

```
# user_model.rb
require 'user_model'

describe UserModel do
   result = UserModel.add("test","test")
   result.should eq(1)
end 
```

该行`require 'user_model'`引发错误：

```
ERROR : `./user_model.rb:1: uninitialized constant ActiveRecord (NameError)` 
```

那条线是用来导入类的`UserModel`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T03:52:06.877

如果您没有在测试系统中包含 Rails 环境，那么结果将是不可预测的。一个典型的测试`test_helper`至少包括默认情况下加载到 Rails 中并设置正确的数据库连接。

创建时使用的每个模型`rails generate model`都将附带一个您可以自定义的示例测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T03:53:19.507

该消息表明您正在使用该常量，但未加载`ActiveRecord`提供它的库。`activerecord`

如果您使用的是最新版本的 RSpec，请确保您已运行 rspec 生成器`rails g rspec:install`来创建标准的 spec_helper，它将加载 Rails 环境（包括 activerecord）。在您的顶部是 user_model_spec，您只需要`require 'spec_helper'`.

# asp.net - 在 C# 的数据库中将新的下拉列表项值分配为 NULL

> ID：14805559
> 
> 赞同：1
> 
> 时间：2013-02-11T03:42:32.123
> 
> 标签：asp.net, c#-4.0, drop-down-menu, null, webforms

我的 asp.net Web 表单中有一个下拉菜单`ddlInstructorAllocated`，它从数据库中获取列表中的所有项目。我插入了另一个项目以显示为“请选择讲师”，以便用户知道该怎么做。保存此表单时，它会填充输入到数据库中的信息。对应的列`ddlInstructorAllocated`不是必填字段，可以保留为 NULL。我要做的是默认选择“请选择讲师”时，其值为NULL。我尝试了很多方法，但似乎无法弄清楚。以下是我尝试过的方法之一。请帮忙。对于从列表中选择讲师的实例，返回其 ID，将其转换为字符串，然后保存到数据库中。

```
 private void DisplayInstructors()
    {
        ListItem li;
        li = new ListItem("Please Select Instructor");
        li.Value = null;
        ddlInstructorAllocated.Items.Add(li);

        var instructors = EmployeeRepository.GetInstructors();

        foreach (var i in instructors)
        {
            ddlInstructorAllocated.Items.Add(new ListItem(string.Format("{0} {1}", i.FirstName, i.LastName), i.EmployeeID.ToString()));
        }
    } 
```

数据库中的 ID 存储为 int，我`EmployeeID = int.Parse(ddlInstructorAllocated.SelectedValue)`稍后会这样做，我收到输入字符串格式不正确的异常

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T03:50:20.287

```
int id;
EmployeeID = int.TryParse(ddlInstructorAllocated.SelectedValue, out id)
                   ? id 
                   : (int?)null; 
```

TryParse 尝试将值解析为 int，如果您可以成功转换，则您正在分配该值。如果不是，则分配空值。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-11T03:53:27.890

尝试将您的陈述“请选择讲师”放在下拉列表的索引 0 上。选择索引零时。而不是放置null。你可以在这里做一些事情：

1.  放置类似 n/a 或空字符串的内容。
2.  如果您真的想为空，请尝试使用 dbnull 或创建您的属性可为空。

我认为这对我有帮助。

# scheme - 如何使用方案宏来显示评估树

> ID：14805565
> 
> 赞同：7
> 
> 时间：2013-02-11T03:42:56.587
> 
> 标签：scheme, graphviz, sicp

我修改了`count-change`SICP 中函数的代码，以便在函数递归时显示一对。该对的形式为`"(cc a k)" -> "(cc a (- k 1))"`or `"(cc a k)" -> "(cc (- a (d k)) k)"`，我的目标是构建一个 DOT 文件以使用 GraphViz 显示树递归。

这是一个示例图像，由以下代码生成： ![在此处输入图像描述](../Images/2a596a1c9ebce13b094aa9af10b1914c.png)

这是方案代码：

```
 ; Count Change

    (define (count-change amount)
      (cc amount 5))

    (define (cc amount kinds-of-coins)
      (begin
        (cond ((= amount 0) 1)
          ((or (< amount 0) (= kinds-of-coins 0)) 0)
          (else (+ 
             (begin 
               (display "\"")
               (display `(cc ,amount ,kinds-of-coins))
               (display "\"")
               (display " -> ")
               (display "\"")
               (display `(cc ,amount ,(- kinds-of-coins 1)))
               (display "\"")
               (display "\n")
               (cc amount (- kinds-of-coins 1))
               )
             (begin 
               (display "\"")
               (display `(cc ,amount ,kinds-of-coins))
               (display "\"")
               (display " -> ")
               (display "\"")
               (display `(cc ,(- amount (first-denomination kinds-of-coins)) ,kinds-of-coins))
               (display "\"")
               (display "\n")
               (cc (- amount (first-denomination kinds-of-coins)) kinds-of-coins)
               )
             )
            ))))

                        ; first-denomination takes the number of kinds of coins and returns the denomination of the first kind
      (define (first-denomination kinds-of-coins)
        (cond ((= kinds-of-coins 1) 1)
          ((= kinds-of-coins 2) 5)
          ((= kinds-of-coins 3) 10)
          ((= kinds-of-coins 4) 25)
          ((= kinds-of-coins 5) 50)))

    (count-change 11) 
```

原始代码在[这里](http://c2.com/cgi/wiki?SicpIterationExercise)。

我已经阅读了有关方案宏的信息，我认为它们可以通过允许我在`begin`带有显示的语句中“包装”对 (cc . .) 的调用来解决这个问题，以输出递归时发生的情况。

如何使用 Scheme 宏来做到这一点？

注意：我知道我的图像不准确，我需要找到一种使节点不同的方法，以便图是一棵树，而不仅仅是一个 DAG。但是，这超出了这个问题的范围。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T04:59:54.590

宏不是你想要的。更适合这项工作的工具是一个简单的本地函数，它知道新旧参数`cc`并处理打印出 graphviz 文本并进行递归调用：

```
(define (cc amount kinds-of-coins)
  (let ((recur (lambda (new-amount new-kinds)
                 (begin
                   (display "\"")
                   (display `(cc ,amount ,kinds-of-coins))
                   (display "\"")
                   (display " -> ")
                   (display "\"")
                   (display `(cc ,new-amount ,new-kinds))
                   (display "\"")
                   (display "\n")
                   (cc new-amount new-kinds)))))
    (cond ((= amount 0) 1)
          ((or (< amount 0) (= kinds-of-coins 0)) 0)
          (else (+ 
                 (recur amount (- kinds-of-coins 1))
                 (recur (- amount (first-denomination kinds-of-coins)) kinds-of-coins)))))) 
```

您没有说您正在使用什么 Scheme 实现，但是对于某些实现，也可以进行一些小的语法清理以使此代码看起来更好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T18:00:59.370

这是一种抽象 jacobm 建议的模式的方法：

```
;; Add graphviz tracing to a definition:
(define-syntax define/graphviz-trace
  (syntax-rules ()
    [(_ (id args ...) body ...)
     (define (id args ...)
       (let* ([real-id id]
              [old-args (list args ...)]
              [id (lambda (args ...)
                    (define new-args (list args ...))
                    (print-trace 'id old-args new-args)
                    (real-id args ...))])
         body ...))]))

;; print-trace: symbol list list -> void
(define (print-trace id old-args new-args)
  (display "\"")
  (display `(id ,@old-args))
  (display "\"")
  (display " -> ")
  (display "\"")
  (display `(id ,@new-args))
  (display "\"")
  (display "\n"))

; first-denomination takes the number of kinds of coins and
; returns the denomination of the first kind
(define (first-denomination kinds-of-coins)
  (cond ((= kinds-of-coins 1) 1)
        ((= kinds-of-coins 2) 5)
        ((= kinds-of-coins 3) 10)
        ((= kinds-of-coins 4) 25)
        ((= kinds-of-coins 5) 50)))

;; Example:
(define/graphviz-trace (cc amount kinds-of-coins)
  (cond ((= amount 0) 1)
        ((or (< amount 0) (= kinds-of-coins 0)) 0)
        (else (+ (cc amount (- kinds-of-coins 1))
                 (cc (- amount (first-denomination kinds-of-coins))
                     kinds-of-coins))))) 
```

# mysql - 在命令提示符下获取 MySQL 路径

> ID：14805567
> 
> 赞同：19
> 
> 时间：2013-02-11T03:43:14.510
> 
> 标签：mysql, windows, command-prompt

如何在windows中使用命令提示符获取mysql安装路径到bin文件夹。是否有任何命令可以获取mysql安装路径的位置？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-03-19T01:14:08.100

*（如果我正确地回答了您的问题）* 就像您将任何其他目录添加到路径一样

> 设置 PATH=%PATH%;C:\DirectoryToAdd\ToPath

如果您在 beginig 或末尾添加 %PATH% 没有关系，但**您必须**添加它，否则您的路径将只是您的新目录。

找到 mySql 安装目录（例如 C:\Program Files\MySQL\MySQL Server 5.6\bin）然后输入上面的命令 set PATH=%PATH%;C:\Program Files\MySQL\MySQL Server 5.6\bin

*提示：*

*   在 cmd 中使用 PATH 来查看你的路径（我认为每个人都知道这一点，但它不会受到伤害）并查看更多关于[PATH](http://ss64.com/nt/path.html)命令的信息

*   您的 mySql 服务必须打开才能执行命令。

*   在 Windows 资源管理器中，如果您在 Windwos Explorer 地址栏中键入 cmd.exe，您将从该目录运行 cmd。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-03-19T01:37:36.020

在 MySQL 客户端中，您可以通过执行以下操作获取基本目录和数据目录：

```
select @@basedir
select @@datadir 
```

您可以从这些路径中重建所有其他路径。因此，如果您完全可以使用 MySQL，那应该可以。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-11T05:08:23.977

通常它安装在辅助程序文件中，这是您可以找到 bin 的正常路径`C:\Program Files\MySQL\MySQL Server 5.5\bin`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-04-22T21:36:12.023

**首先：**

编辑系统路径变量时要格外小心；意外删除或修改现有路径值的任何部分都可能导致系统出现故障甚至无法使用。

接下来，我想我需要解释一下如何编辑 Windows 路径变量。那么，让我们开始吧。

**Windows 路径变量**

首先，我们需要编辑路径系统变量，但是我们如何编辑它呢？简单的！转到您的**计算机**并单击其图标，然后单击**属性**。

Step-01

[![在此处输入图像描述](../Images/b855022be49d18c2d4f5a90aba699ed2.png)](https://i.stack.imgur.com/KLSf6.png)

或者您可以按`Windows + Pause/Break`，然后应该打开此窗口：

步骤-01.1

[![在此处输入图像描述](../Images/d4a157f351402bbbbe5e191ad7883e37.png)](https://i.stack.imgur.com/d7eB6.png)

然后单击**Advanced System Settings**或类似的东西，如下图所示：

Step-02

[![在此处输入图像描述](../Images/a68b8faa138271384063f80c805ab6f6.png)](https://i.stack.imgur.com/EdoTB.png)

之后，单击刚刚打开的窗口上的**系统变量按钮。**

Step-03

[![在此处输入图像描述](../Images/fa5fbbcc08b0ebb3ea22e444f92f4065.png)](https://i.stack.imgur.com/zwAdM.png)

在这个新窗口中，您会发现两个区域，分别是顶部和底部；现在让我们专注于底部的一个。搜索名称为**Path**的变量。单击它（选择它），单击“**编辑**”按钮，应该会出现如下所示的窗口。

Step-04

[![在此处输入图像描述](../Images/cc836aa4585a7363f21b13ca60460f25.png)](https://i.stack.imgur.com/rbQVa.png)

PS.：重要的是要记住，如果您使用的 Windows 版本早于 8 或 8.1，则不会向您打开这样的窗口，我记得。可以改的，不过不知道

如果您看到此窗口，您现在可以通过添加或删除目录来编辑路径系统变量，现在单击“**编辑文本**”按钮。在这个打开的新窗口中，在**value field**上，在已经存在的文本的最后，您应该输入：

```
C:\Program Files\MySQL\MySQL Server <version>\bin 
```

听着，这是我使用的 MySQL 服务器的默认安装位置。现在你需要知道你在哪里安装它。如果您安装在默认位置但您不知道您正在使用的版本，您可以转到：

```
C:\Program Files\MySQL 
```

并亲自查看您已安装的版本，然后将其放在上面的路径中。对我来说，我使用了以下内容：

```
C:\Program Files\MySQL\MySQL Server 5.7\bin 
```

我使用它是因为我的 MySQL 版本是 5.7。我希望你明白了。

现在单击**确定**按钮，直到您看不到我们打开的任何窗口。

重新打开您的 CMD（或 Powershell），现在您可以直接从 CMD 使用您的 MySQL。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-07-11T05:42:28.830

我知道这个问题很老了。但我只是想指出这里的所有答案如何完全误解了 OP 的问题。

Hes 不问如何改变路径。他在问是否有办法获得 MYSQL 安装目录的路径（因为它可能因 PC 到 PC、x64 x86、驱动程序字母等而异）。GOAL 类似于 MySQL 中的 @@basedir 系统变量（但这需要您连接到 MySQL）。

我认为 OP 想要做的和我想要做的是类似的。我们想获取 MySQL 目录中的 BIN 文件夹，以便调用 mysqldump.exe。（请不要告诉我只使用 $ mysqldump.exe，因为它用于 MySQL 提示而不是 DOS 提示）

例如 %MYSQLDIRECTORY% / BIN / mysqldump.exe <--- %MYSQLDIRECTORY% 只是示例

*   我们不必担心它在哪个 PROGRAMFILES 文件夹或驱动器上
*   如果安装程序在安装时更改了 MySQL 文件夹的名称，请不要担心。
*   不必运行 MySQL COMMAND PROMPT 来获取路径。仅使用 WINDOWS DOS 提示符。

我们只需要运行 mysqldump.exe 并在那里输入一些参数。目前我只是将 mysqldump.exe 复制到我的应用程序文件夹中，但这也是一个坏主意，因为它可能与操作系统中安装的版本不同。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-11T07:26:33.853

如果您正确安装 mysql，则 mysql 路径会自动添加到环境变量中。`path`在命令提示符中检查此类型。如果可以在其中看到 mysql 路径，则可以从任何命令提示符位置运行 mysql 可执行文件。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-05-24T05:11:56.170

这对我有用，而且非常简单。

首先，我下载了 mysql 并进行了完整安装，然后执行以下步骤。

1.  在 Windows 桌面上，右键单击我的电脑图标，然后选择属性。

2.  接下来从出现的系统属性菜单中选择高级选项卡，然后单击环境变量按钮。

3.  在系统变量下，选择路径，然后单击编辑按钮。应出现“编辑系统变量”对话框。

4.  将光标放在标记为变量值的空间中出现的文本末尾。（使用 End 键确保您的光标位于该空间中文本的最末尾。）然后输入 MySQL bin 目录的完整路径名（例如，C:\Program Files\MySQL\MySQL Server 5.1 \垃圾桶）

**笔记**

必须有一个分号将此路径与该字段中存在的任何值分开。

通过单击“确定”直到所有打开的对话都被关闭，依次关闭此对话和每个对话。

--

现在在控制台中输入“mysql - version”，如果它显示已安装的版本，则一切正常。

*** 如果您在同一台机器上运行多个 MySQL 服务器，则不应将 MySQL bin 目录添加到 Windows PATH。**

来自 MySQL 官网：http: [//dev.mysql.com/doc/mysql-windows-excerpt/5.1/en/mysql-installation-windows-path.html](http://dev.mysql.com/doc/mysql-windows-excerpt/5.1/en/mysql-installation-windows-path.html)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-04-26T10:50:02.413

正如@Peter Lionhart 正确指出的那样，问题是**如何获取**`mysql.exe`和`mysqldump.exe`实用程序所在目录的路径。

MySQL 是一个 Windows 服务，通常命名为 MySQL[version]。知道了这一点，你可以很容易地找到它实际安装的目录。这可以手动完成，也可以使用 PowerShell 命令完成。

## 手动：

1.  按win + r
2.  进入`services.msc`
3.  在列表中找到名为 MySQL 的服务
4.  右键单击它并选择属性
5.  Path to the executable 字段将包含您需要的目录的路径。

[![在此处输入图像描述](../Images/e21bba9b7be260110e6fb2fe981bac27.png)](https://i.stack.imgur.com/Uuo6N.png)

红色下划线是可以复制的文本。此行还包含`--defaults-file`指定路径的参数`mysql.ini`

## 使用 PowerShell

Windows，可以通过 UI 完成的所有操作都可以使用 PowerShell 命令重复。下一个命令返回：

```
$service_path = Get-WmiObject win32_service | ?{$_.Name -like '*mysql*'} | Select-Object -Property PathName -First 1 | Format-Table -HideTableHeaders | Out-String; $service_path.split('"')| Where-Object {$_ -like "*mysqld.exe*"}  | %{$_.replace('mysqld.exe','').trim() } 
```

[![在此处输入图像描述](../Images/1f290b8306979d0e91d5a9306059eda5.png)](https://i.stack.imgur.com/P75cC.png)

[在这里](https://sqlbak.com/blog/how-to-find-path-to-mysql-installation-directory-on-windows-and-add-it-to-path-environment-variable)查看更多

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-08-10T07:43:54.523

为了更容易调用 MySQL 程序，您可以将 MySQL bin 目录的路径名添加到 Windows 系统 PATH 环境变量中：

• 在Windows 桌面上，右键单击我的电脑图标，然后选择属性。

• 接下来从出现的系统属性菜单中选择高级选项卡，然后单击环境变量按钮。

• 在系统变量下，选择路径，然后单击编辑按钮。应出现“编辑系统变量”对话框。

• 将光标放在标记为变量值的空间中出现的文本末尾。（使用 End 键确保您的光标位于此空间中文本的最末尾。）然后输入 MySQL bin 目录的完整路径名（例如，C:\Program Files\MySQL\MySQL Server 5.1 \垃圾桶）

参考= [http://dev.mysql.com/doc/mysql-windows-excerpt/5.1/en/mysql-installation-windows-path.html](http://dev.mysql.com/doc/mysql-windows-excerpt/5.1/en/mysql-installation-windows-path.html)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-04-26T12:51:21.177

当你使用***WAMP*** 路径是这个 **C:\wamp\bin\mysql\mysql5.6.12\bin**

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-02-11T05:14:07.537

要从命令行启动 mysql 服务器，您应该启动一个控制台窗口（或“DOS 窗口”）并输入以下命令：

外壳> "C:\Program Files\MySQL\MySQL 服务器 5.5\bin\mysql"

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-09-26T06:00:23.203

要在命令提示符下运行 mysql，请按照以下步骤操作：

```
1\. Run cmd command
2\. Type c: or d: on command prompt. This will be based on your WAMP server installations.
3\. Assuming you have installed wamp on c: drive.
4\. c:\>cd wamp
4\. c:\wamp>cd bin
5\. c:\wamp\bin>cd mysql
6\. c:\wamp\bin\mysql>cd mysql15.1.36
7\. c:\wamp\bin\mysql\mysql15.1.36>cd bin
8\. c:\wamp\bin\mysql\mysql15.1.36\bin>mysql.exe -u root 
```

这些是在命令行上运行 mysql 的主要步骤。

另一种直接将mysql命令运行到CMD的方法：

确保您的 mysql\bin 文件夹是 $PATH 变量的一部分：

```
1\. Go to Control Panel -> System -> Advanced
2\. Click Environment Variables
3\. Under System Variables find PATH and click on it.
4\. In the Edit windows, find the end of the string of paths (each path needs to be separated by a semi-colon ";" so you may need to add that to the end) add the path to your mysql\bin folder to the end paths.
5\. Go back to Desktop
6\. Close any command prompts you may have open Got to do this so the new $PATH variable will load.
7\. Re-open command prompt. Try running mysql -uroot and if the path was set correctly, mysql will now run. 
```

让我知道这是否可以解决！

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-10-17T17:07:24.737

如果您知道版本，您可以查询注册表。

```
FOR /F "usebackq tokens=2,* skip=2" %L IN (`REG QUERY "HKLM\SOFTWARE\Wow6432Node\MySQL AB\MYSQL Server 8.0" /V Location`) DO SET SQLPath=%M

Set binloc=%SQLPath%bin
echo %binloc% 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-02-14T17:21:14.503

我相信这也会有所帮助：单击[如何编辑系统 PATH 以便在 WINdows 中轻松进行命令行访问](https://www.howtogeek.com/118594/how-to-edit-your-system-path-for-easy-command-line-access/)。注册 mysql.exe 的路径后，您不必再输入命令的完整路径，只需输入 `mysql`您的 cmd。

# android - 在 Android 地图 v2 片段和列表片段之间交换

> ID：14805569
> 
> 赞同：5
> 
> 时间：2013-02-11T03:43:17.603
> 
> 标签：android, android-maps-v2

我希望能够通过用户按下操作栏按钮在列表片段和地图片段之间切换。目前我可以很好地在它们之间进行交换，但是在尝试从片段中获取实际的 GoogleMap 对象时遇到了空指针。当我尝试移动相机时，它不会移动，因为 GoogleMap 对象为空并跳过了该代码。我不确定这是否是由于我从未真正从 xml 创建 Fragment 而是仅使用代码？我的代码如下：

```
public class MapFragment extends SherlockMapFragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View root = super.onCreateView(inflater, container, savedInstanceState);
        return root;
    }

}

    @Override
    public void swapFragments() {
        FragmentManager fm = getSupportFragmentManager();
        FragmentTransaction transaction = fm.beginTransaction();
        if (listFragment.isVisible()) {
            sm.setTouchModeAbove(SlidingMenu.TOUCHMODE_MARGIN);
            transaction.replace(R.id.root, mapFragment);
        } else {
            sm.setTouchModeAbove(SlidingMenu.TOUCHMODE_FULLSCREEN);
            transaction.replace(R.id.root, listFragment);
        }
        transaction.commit();
    }

    @Override
    public void setupMapFragment() {
        mapFragment = new MapFragment();
        mMap = mapFragment.getMap();
        if (mMap != null) {
            mMap.moveCamera(CameraUpdateFactory.newLatLngZoom(
                    new LatLng(BuzzbabaApplication.latitude,
                            BuzzbabaApplication.longitude), 14));
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T03:52:05.157

我也遇到了这个问题。正如您所提到的，问题是由于您正在动态加载 MapView 引起的。这意味着 MapView 在 GoogleMap 对象加载之前已经完成加载。

> 只有在加载了底层地图系统并且片段中存在底层视图时，才能使用 getMap() 获取 GoogleMap

（[http://developer.android.com/reference/com/google/android/gms/maps/SupportMapFragment.html](http://developer.android.com/reference/com/google/android/gms/maps/SupportMapFragment.html)）

我的解决方案是在 XML 中创建一个地图片段。这意味着当 View 完成加载后，GoogleMap 对象也已加载并可以被引用。

# c++ - 为什么我的 Makefile 没有创建可执行文件？

> ID：14805572
> 
> 赞同：0
> 
> 时间：2013-02-11T03:43:19.410
> 
> 标签：c++, makefile

老实说，我对以下代码的理解相当有限。但是，据我所知，它应该创建某种可执行文件，以便我可以“测试”该程序。但我要么不确定可执行文件的外观，要么不确定如何运行它。或者有些东西不工作。makefile 所做的只是创建一个 testBSTree.o，我真的不知道如何处理该文件。

```
#  Makefile
#    a makefile for the stack example.
#

#            SHELL =    /bin/sh

#              TOP = .
#      CURRENT_DIR = .

#              CPP = /lib/cpp $(STD_CPP_DEFINES)
              CXX  = g++

#        CCOPTIONS =
#           CFLAGS = $(CDEBUGFLAGS) $(CCOPTIONS) $(ALLDEFINES)
#           RM_CMD = $(RM) *.o core

SRCS=   testBSTree.cpp  \
    BSTree2.cpp

OBJS=   testBSTree.o    \
    BSTree2.o       

testBSTree.o:   BSTree2.h

BSTree2.o:  BSTree2.h      #?

#link.o:    link.h                  #?

PROGRAMS = testBSTree

all::  $(PROGRAMS)

testBSTree: $(OBJS)
    $(CXX) -o $@ $(OBJS)
#$(CXX) -o $@ $(OBJS) $(LDOPTIONS) $(LOCAL_LIBRARIES) $(LDLIBS)  $(EXTRA_LOAD_FLAGS)

clean::
    $(RM) testBSTree

latex::
    latex BSTree2.tex

###########################################################################
# common rules for all Makefiles - do not edit

emptyrule::

clean::
        rm *.o 
```

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T04:04:27.997

尝试：

```
make all 
```

编译一切。

或者把`all::`目标放在前面`testBSTree.o:`，然后你就可以键入`make`。如果不指定目标，`make`则默认为 makefile 中的第一个目标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T04:04:33.113

你用 make all 运行它了吗

否则，Make 只会选择您的第一个目标 testBSTree.o：BSTree2.h

发现 testBSTree.o 不是最新的，构建它并愉快地完成它的工作。

作为替代方案，您可能希望将所有目标作为第一个目标，因此您只需运行 make。这就是通常的做法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T04:10:58.667

Try this Makefile, it works for me:

```
OBJS=testBSTree.o BSTree2.o

PROGRAMS = testBSTree

all:  $(PROGRAMS)

testBSTree: $(OBJS)
    $(CXX) -o $@ $^

clean:
    rm *.o 
```

(Note that the indented lines should be intended with a tab, not with spaces!)

# django - 使用 Django 编辑用户的最简单界面

> ID：14805579
> 
> 赞同：0
> 
> 时间：2013-02-11T03:43:50.877
> 
> 标签：django, user-interface, django-admin

我正在为非专家用户开发一个带有 Django 的网站，并打扰我创建新用户的第 2 步。我希望创建用户的过程将在第一步完成。为我的客户创建或编辑用户提供最简单的方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T03:50:40.900

对于新用户的注册：

**register.html** {{状态}}

```
<form method="post">{% csrf_token %}
    First Name: <input type="text" name="fname">
    Last Name: <input type="text" name="lname">
    Email: <input type="email" name="email">
    Username: <input type="text" name="username">
    Password: <input type="password" name="password">

    <input type="submit" value="Register">
</form> 
```

**视图.py**

```
from django.contrib.auth import authenticate, login
from django.contrib.auth.models import User
from django.core.urlresolvers import reverse
from django.http import HttpResponseRedirect
from django.shortcuts import render    

def register(request, state=""):
    if request.method == 'POST':
        username = request.POST.get('username')
        password = request.POST.get('password')
        email    = request.POST.get('email')
        fname    = request.POST.get('fname')
        lname    = request.POST.get('lname')

        username_exist = User.objects.filter(username=username)
        email_exist = User.objects.filter(email=email)

        if username_exist and email_exist:
            state = "Username and Email are already exists. Please enter another."
        elif username_exist:
            state = "Username is already exist. Please try another one."
            email_session = email
        elif email_exist:
            state = "Email is already exist. Please use other account."
            username_session = username
        else:
            add_user = User.objects.create_user(username=username,
                    password=password, email=email )
            add_user.is_active = True
            add_user.first_name = fname
            add_user.last_name = lname
            add_user.save()

            user = authenticate(username=username, password=password)
            login(request, user)
            return HttpResponseRedirect(reverse('app_name:url_name'))

    return render(request, 'register.html', {'state':state}) 
```

* * *

要更新用户，请在显示其基本信息的位置创建 profile.html，然后创建用于更新配置文件的按钮。

# sql - 从列中选择最大值并将多列相加

> ID：14805580
> 
> 赞同：2
> 
> 时间：2013-02-11T03:44:01.160
> 
> 标签：sql, sql-server

我有一个名为“Patients”的表格，看起来像

```
 PatientName    DateOftest    Eye     L1    L2    L3    L4     L5
    Mike         17-02-2009     L      23    25    40    32     30
    Mike         17-02-2009     R      25    30    34    35     24
    Bill         08-03-2006     L      20    24    30    24     25
    Bill         08-03-2006     R      18    25    27    30     24 
```

现在，我会在结果之后选择患者姓名和测试日期，并将眼睛选择为“双目”和“总和”，这是该测试日期 L1、L2、L3、L4、L5 的最高值的总和。

结果：

```
 PatientName    DateOftest      Eye          Sum
    Mike         17-02-2009    Binocular      160    
    Bill         08-03-2006    Binocular      130 
```

这里的“sum”是 Mike 左右眼的最高值之​​和，即 160，Bill 为 130。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T05:55:58.990

```
DECLARE @Data AS TABLE
(
    PatientName varchar(10) NOT NULL,
    DateOfTest  date NOT NULL,
    Eye         char(1) NOT NULL,
    L1          tinyint NOT NULL,
    L2          tinyint NOT NULL,
    L3          tinyint NOT NULL,
    L4          tinyint NOT NULL,
    L5          tinyint NOT NULL
)

INSERT @Data
VALUES 
    ('Mike', '20090217', 'L', 23, 25, 40, 32, 30),
    ('Mike', '20090217', 'R', 25, 30, 34, 35, 24),
    ('Bill', '20060308', 'L', 20, 24, 30, 24, 25),
    ('Bill', '20060308', 'R', 18, 25, 27, 30, 24);

SELECT
    d.PatientName,
    d.DateOfTest,
    Eye = 'Binocular',
    [Sum] = MAX(L1) + MAX(L2) + MAX(L3) + MAX(L4) + MAX(L5)
FROM @Data AS d
GROUP BY
    d.PatientName,
    d.DateOfTest; 
```

![输出](../Images/6603ac52b6c72cb464f552d07ad306fe.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T03:49:10.353

```
 SELECT PatientName, DateOfTest, "Binocular" AS Eye,
         MAX(L1 + L2 + L3 + L4 + L5) AS [Sum]
    FROM Patients
GROUP BY PatientName, DateOfTest, Eye 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T03:51:10.273

尝试使用`GROUP BY`and `MAX`：

```
SELECT PatientName, 
   DateOfTest,
   MAX(L1) + MAX(L2) + MAX(L3) + MAX(L4) + MAX(L5) SummedVal,
   'Binocular' Eye
FROM Patients
GROUP BY PatientName, DateOfTest, Eye 
```

这是一个快速的[Fiddle](http://sqlfiddle.com/#!2/d166b/2)。

请注意使用 MAX(L1+L2...) 与 MAX(L1) + MAX(L2) ... 的区别 - 第一个不会产生正确的结果。

祝你好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T05:39:16.327

这不会搜索整个列，而是搜索特定日期和特定患者的最大值。因为我们在这里使用 group by。

```
select PatientName,
       DateOftest,
       Max(L1)+Max(L2)+Max(L3)+Max(L4)+Max(L5) as Sum,
      'Binocular' Eye 
from table 
group by PatientName,DateOftest,Eye 
```

# algorithm - 将 n 个点均匀地分散在球面上

> ID：14805583
> 
> 赞同：18
> 
> 时间：2013-02-11T03:44:04.477
> 
> 标签：algorithm, math, geometry, integrate

我试图在一个球体上分散 n 个点，使每个点都有“围绕”它的“相同”区域。基本上，我试图通过评估 n 点并假设每个区域元素相同（并且等于 4pi r^2/n）来在球体上集成一个函数。

[我的问题与这个](https://stackoverflow.com/questions/9600801/evenly-distributing-n-points-on-a-sphere)问题非常相关，但我似乎不同意“已接受”答案中提供的代码按预期工作（见附图，通过选择 R = 1000，nx = ny = 40 生成）。显然，我的观点更加集中在两极，而在赤道沿线非常不集中。

有什么建议么？ ![](../Images/a32e4056fc0a38e83788121b6b90b778.png)

编辑：作为参考，我确实找到[了一些生成网格的软件](http://persson.berkeley.edu/distmesh/)，使得每个点在其周围具有相等的“面积”（向下滚动以查看球体上的均匀区域分布），但我没有实现他们的代码，而是使用了一个 less-耗时的方法：我简单地迭代方位角和极角（[0,2pi] 和 [0,pi]）并计算每个补丁的“无穷小”区域（da = r^2 sin theta dtheta dphi）。这基本上是我在球体上进行集成所需的全部内容，我只是希望均匀区域分布不会那么难以实现。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-11T07:33:50.410

背景资料：

一个球体中有 4 个 pi 球面度，这是球体中的总“度数”，但我仅在相对意义上使用该术语，因为球面度与圆形中的常规弧度非常不同，一方面，它们是 3 维的，因此是坚实的。只需将它们视为球体中的冰淇淋形状的角度。 ![在此处输入图像描述](../Images/13ccf731f15dda0d3095613580ec97a9.png)

[http://en.wikipedia.org/wiki/Steradian](http://en.wikipedia.org/wiki/Steradian)提供了一个很好的例子。

它们与半径有直接关系，就像圆中的弧度一样。1 球面度 = 1 个单位半径平方。

因此，首先找出需要在球体上绘制多少项目。让那个数字成为`n`。 `sr`= 球面度（测量单位）= `r^2`（半径平方）

`4 pi / n sr = x`

`x`是分配给每个点的球面度数。

比方说4分。

`4 pi / 4 sr = x`

`pi sr = x` 所以每个点都会得到一个分配的空间`pi sr`。

现在考虑这个......因为您正在绘制点，我们将考虑将每个点放置在分配空间的中间......也就是说，在锥形区域的中间，这就是什么`sr`。现在你需要考虑一下，是否可以用圆圈完全填充一个区域？说真的，想想这个……不是吗？实心圆圈将始终在某些位置之间留出空间。想一想足球。它由可以组合在一起以提供均匀分布的形状构成。这个想法的重点是让你意识到所有的点不可能完全相隔一定的距离——就像圆有半径一样。然而，足球正方形的中心非常接近并且是均匀的。

如果我是你，我会做的是尝试编写一个算法来识别最有效的“形状”，将这些分配的球形空间“块”中的每一个放入......就像足球一样。否则，我认为这可能是您将得到的最佳答案... `4 pi / n sr = x`...，没有办法绘制每个点，因此它们之间的距离完全相同，（在某些配置中除外，即可能有特殊数量的点），可能有一种算法可以找到所有特殊情况。

我正在编辑此答案以详细说明特殊情况，我认为在这里提供一些额外的信息会很好。点等距离的特殊情况是它们可能形成柏拉图立体的顶点。只有 5 种基本的柏拉图立体形状，所有其他的都是由这些构成的。

阅读此页面以获取更多信息和证明 [https://www.uwgb.edu/dutchs/symmetry/platonic.htm](https://www.uwgb.edu/dutchs/symmetry/platonic.htm)

现在我不能相信，我做了一些快速研究，发现了一个类似的帖子 [https://math.stackexchange.com/questions/279544/return-an-array-of-evenly-distributed-points-on-a-球体半径和原点](https://math.stackexchange.com/questions/279544/return-an-array-of-evenly-distributed-points-on-a-sphere-give-radius-and-origin)

使用欧拉的多面体公式 [http://plus.maths.org/content/eulers-polyhedron-formula](http://plus.maths.org/content/eulers-polyhedron-formula)

事实上，多面体上只存在三种基本形状，“三角形、正方形和六边形”，您可以创建一种算法来将要绘制的点数四舍五入到最接近的多面体形状并均匀地绘制每一个。

![在此处输入图像描述](../Images/fe0bf9f7da9fca827ae1a17a63692ef3.png)

哦，看看这篇很棒的文章，它比我更好地解释了球面度和 3 维“度数”。[http://mathforum.org/library/drmath/view/55358.html](http://mathforum.org/library/drmath/view/55358.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-11T04:04:21.973

这是我刚刚在 python 中创建的示例算法：

```
from numpy import random, cos, sin, sqrt, pi
from mpl_toolkits.mplot3d import Axes3D
import matplotlib.pyplot as plt

def rand_sphere(n):
  """n points distributed evenly on the surface of a unit sphere""" 
  z = 2 * random.rand(n) - 1   # uniform in -1, 1
  t = 2 * pi * random.rand(n)   # uniform in 0, 2*pi
  x = sqrt(1 - z**2) * cos(t)
  y = sqrt(1 - z**2) * sin(t)
  return x, y, z

x, y, z = rand_sphere(200)
fig = plt.figure()
ax = fig.add_subplot(111, projection='3d')
ax.scatter(x, y, z)
plt.show() 
```

![在此处输入图像描述](../Images/a36d04e45a7434f04be45139824fafe3.png)

再次获得 10000 分：

![在此处输入图像描述](../Images/66a280016c84b10a1f932afdcafab510.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T08:35:38.673

可能是错的，但如果

1.  将两点之间的交互设置为 I(a,b) = (ab) / (|ab|)^3, a,b 作为 3D 空间中的向量受到威胁
2.  对于第一次迭代，像往常一样放置点（在相等的角度距离，它是如何在 wim 帖子中提到的）
3.  在算法的每个步骤中，您将根据 I 总和的梯度（从 1 开始）移动每个点，其中 I 仅在直接邻居上计算
4.  重复 3 直到每个点的梯度变为 0。

该算法将收敛到您需要的配置。这很耗时，但您可以缓存不同数量的点的结果。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-07-28T16:18:47.673

有一个软件可以定义球体的均匀像素化，使得每个点都被相同数量的立体角包围。结帐： [http](http://healpix.jpl.nasa.gov/) : //healpix.jpl.nasa.gov/ 他们还提供了几个例程来在 fortan、C、C++、python、mathlab 等中进行一些有用的计算......

# jquery - 如何将多个用户提交到数据库中

> ID：14805586
> 
> 赞同：1
> 
> 时间：2013-02-11T03:44:51.943
> 
> 标签：jquery, html, ajax, forms

*   首先，我有一个创建用户信息表单的按钮。
*   第二个用户填写表格。
*   第三，我将该用户添加到列表和新表单中。
*   最后我想将该用户列表提交到数据库。

我被困在最后一部分。由于每个参与者都有 first_name、last_name 和 Workshop_id。我如何向数据库提交类似的东西？我通常使用 ajax 将其发送到数据库处理页面。但这通常只是一个用户。我真的不知道如何设置要提交的数据字符串。

```
<form id="participants">
    <div class="participant">
        <input type="text" name="workshop_id" class="workshop_id"  />
        <input type="text" name="first_name" class="first_name" />
        <input type="text" name="last_name" class="first_name" />
    </div>
    <div class="participant">
        <input type="text" name="workshop_id" class="workshop_id"  />
        <input type="text" name="first_name" class="first_name" />
        <input type="text" name="last_name" class="first_name" />
    </div>
    <div class="participant">
        <input type="text" name="workshop_id" class="workshop_id"  />
        <input type="text" name="first_name" class="first_name" />
        <input type="text" name="last_name" class="first_name" />
    </div>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T03:49:10.530

您将需要通过发送一组值`$.ajax`

```
<form id="participants">
    <div class="participant">
        <input type="text" name="workshop_id[]" class="workshop_id"  />
        <input type="text" name="first_name[]" class="first_name" />
        <input type="text" name="last_name[]" class="first_name" />
    </div>
    <div class="participant">
        <input type="text" name="workshop_id[]" class="workshop_id"  />
        <input type="text" name="first_name[]" class="first_name" />
        <input type="text" name="last_name[]" class="first_name" />
    </div>
    <div class="participant">
        <input type="text" name="workshop_id[]" class="workshop_id"  />
        <input type="text" name="first_name[]" class="first_name" />
        <input type="text" name="last_name[]" class="first_name" />
    </div>
</form> 
```

该帖子将是正常的，但后端语言会将其转换为数组。例如：在 php

`$_POST['workshop_id'][0];`

[我在这里](http://us2.php.net/manual/en/faq.html.php#faq.html.arrays)找到了更多信息

# bash - 如何在 UNIX 中将“19-FEB-12”之类的字符串转换为纪元日期

> ID：14805591
> 
> 赞同：25
> 
> 时间：2013-02-11T03:45:16.953
> 
> 标签：bash, unix, date, unix-timestamp

在 UNIX 中如何转换为纪元毫秒日期字符串，如：

```
19-FEB-12
16-FEB-12
05-AUG-09 
```

我需要这个来将这些日期与服务器上的当前时间进行比较。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-02-11T04:00:29.487

要将日期转换为纪元以来的秒数：

```
date --date="19-FEB-12" +%s 
```

当前时代：

```
date +%s 
```

因此，由于您的日期是过去的：

```
NOW=`date +%s`
THEN=`date --date="19-FEB-12" +%s`

let DIFF=$NOW-$THEN
echo "The difference is: $DIFF" 
```

* * *

使用 BSD 的`date`命令，你需要

```
$ date -j -f "%d-%B-%y" 19-FEB-12 +%s 
```

与 GNU 的区别`date`：

1.  `-j`防止`date`尝试设置时钟
2.  输入格式必须明确设置`-f`
3.  输入日期是一个常规参数，而不是一个选项（即。`-d`）
4.  如果没有为日期指定时间，请使用当前时间而不是午夜。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T04:35:27.397

这是使用`GNU awk`. 跑步：

```
awk -f script.awk file 
```

内容`script.awk`：

```
BEGIN {

    n = systime()

    FS="-"
}

{
    t = mktime(sprintf("%d %d %d %d %d %d", "20" $3, convert($2), $1, 0, 0, 0))    

    printf "%.1f days ago\n", (n - t) / 60 / 60 / 24
}

function convert(m) {

    return(((index("JANFEBMARAPRMAYJUNJULAUGSEPOCTNOVDEC", m) - 1) / 3) + 1)
} 
```

结果：

```
358.6 days ago
361.6 days ago
1286.6 days ago 
```

# java - 在 Java 中比较两个日期，一个从 MySQL 获得

> ID：14805592
> 
> 赞同：3
> 
> 时间：2013-02-11T03:45:28.850
> 
> 标签：java, mysql, timestamp

我需要比较 Java 中的两个日期，但是从数据库中获取的日期与插入的日期不同。

```
@Test
public void testCompareHoraHardcore() {
    String sql = "update solicitacao_viagem set "
            + "hora_retorno=?, id_veiculo=?, id_responsavel_solicitacao=?, "
            + "id_responsavel_autorizante=? where id_solicitacao_viagem=? ";
    Timestamp timestamp1 = new Timestamp(System.currentTimeMillis());
    try {
        PreparedStatement stmt = connection.prepareStatement(sql);
        stmt.setTimestamp(1, timestamp1);
        stmt.setInt(2, 90);
        stmt.setInt(3, 337);
        stmt.setInt(4, 337);
        stmt.setInt(5, 91);
        stmt.executeUpdate();
        stmt.close();
    } catch (SQLException e) {
        e.printStackTrace();
    }
    Timestamp timestamp2 = null;
    try {
        sql = "select * from solicitacao_viagem where id_solicitacao_viagem=?";
        PreparedStatement stmt = connection.prepareStatement(sql);
        stmt.setInt(1, 91);
        stmt.executeQuery();
        ResultSet rs = stmt.executeQuery();
        rs.next();
        timestamp2 = rs.getTimestamp("hora_retorno");
        stmt.close();
    } catch (SQLException e) {
        e.printStackTrace();
    }

    assertEquals(timestamp1.getTime(), timestamp2.getTime());
} 
```

该测试返回：

```
Testcase: testCompareHoraHardcore(com.model.dao.SolicitacaoViagemDAOTest):  FAILED
expected:<1360553289573> but was:<1360553289000>
junit.framework.AssertionFailedError: expected:<1360553289573> but was:<1360553289000>
at com.model.dao.SolicitacaoViagemDAOTest.testCompareHoraHardcore(SolicitacaoViagemDAOTest.java:349) 
```

为什么 MySQL 会削减最后三个数字？

我正在使用 MySQL 5.5.22 和 Java(TM) SE 运行时环境（构建 1.7.0_11-b21）。

“hora_retorno”列是 TIMESTAMP。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T03:57:33.483

MySql 存储`DATETIME`和**秒**精度`TIMESTAMP`。[这是文档](http://dev.mysql.com/doc/refman/5.1/en/datetime.html)中的引用

 **```
A DATETIME or TIMESTAMP value can include a trailing fractional seconds
part in up to microseconds(6 digits) precision. 

Although this fractional part is recognized, 
it is discarded from values stored into DATETIME or TIMESTAMP columns 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T03:57:01.713

据此，MySQL 不会在 Timestamp 列（或其他日期时间类型）中存储小数秒。 [http://dev.mysql.com/doc/refman/5.0/en/fractional-seconds.html](http://dev.mysql.com/doc/refman/5.0/en/fractional-seconds.html)**

# meteor - 钩入流星重置

> ID：14805595
> 
> 赞同：1
> 
> 时间：2013-02-11T03:45:38.617
> 
> 标签：meteor

有可能勾搭[`meteor reset`](http://docs.meteor.com/#meteorreset)吗？我想在运行此命令时删除所有用户上传。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T11:18:46.487

请记住，它`meteor reset`在已部署的应用程序中不可用，认为这不是 100% 肯定的。

虽然你不能在不修改meteor.js的情况下直接连接到它，但重置功能非常简单，你可以用不同的方式模仿它：

**方法一**

所有流星重置所做的就是删除`yourproject/.meteor/local`您可以使用 bash 脚本执行此操作的所有文件，或者创建另一个执行相同操作的节点 js 文件：

流星重置功能的来源（如果您决定在节点中制作）：

```
var local_dir = path.join(app_dir, '.meteor', 'local');
files.rm_recursive(local_dir); 
```

**方法二**

此方法将在生产模式下工作。看到流星重置只是清除数据库，您可以手动执行（而流星也在运行！）：

服务器js

```
Meteor.methods({
    resetme: function(password) {
        var require = meteor_bootstrap.require;
        var path = require('path');

        if(password=="1234") {
            Collection1.remove({});
            Collection2.remove({});
            Collection3.remove({});

            var local_dir = path.join(app_dir, 'yourfiledirectory');

            //recursively delete your files in local_dir
            return true;
         }
         else
         {
             return false;
         }
    }
}); 
```

客户（如果需要）

```
Meteor.call("resetme", "1234", function(err,result) { if(err) { console.log("Error resetting"); } else { if(result) {console.log("Reset complete")}}); 
```

**方法3**（更多的钩子）

您可以捆绑您的应用程序并编辑meteor.js 以添加您想要的功能。然而，更新将破坏钩子。

# mysql - mySQL 从一个类别及其子类别中选择项目

> ID：14805597
> 
> 赞同：2
> 
> 时间：2013-02-11T03:45:46.210
> 
> 标签：mysql, parent, categories

我有 2 个用于项目和类别的表。类别表是自联合表。

项目表具有以下列 **ID、Item_Name、CategoryID**

类别表具有以下列 CATID、category_name、parent_ID

我需要选择在一个类别和该主类别的子类别下列出但不起作用的项目。这是mysql，它只返回子。

```
Select * from 
 Items A
where 
 A.CategoryID in(select CATID from categories 
    where CATID= %value% or parent_ID=%value%) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T04:13:51.747

Since the fields are related, use joins. If you have some one-to-many relationships going on with the Categories table, use `select distinct`.

```
select distinct Items.*
from Items
join Categories as self_cat
    on (Items.CategoryID = self_cat.CATID)
left join Categories as parent_cat
    on (self_cat.parent_id = parent_cat.CATID)
where %value% in (self_cat.CATID, parent_cat.CATID) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T04:22:28.407

尝试使用表的**自连接**，`tbl_category`然后使用内部连接`tbl_item`

```
SELECT i.ID as ItemID,
           i.item_name,
           c.catid AS categoryID,
           c.category_name AS categoryName,
           p.catid AS parentCategoryID,
           p.category_name as ParentCategoryName
 FROM tbl_item i
 INNER JOIN tbl_category p ON  p.catid = i.category_id 
 INNER JOIN tbl_category c ON  c.parent_id = p.catid 
 WHERE %value%  = p.cat_id  OR  %value%  = c.cat_id 
```

# google-maps-api-3 - 在 Google 地图中禁用键盘导航

> ID：14805599
> 
> 赞同：11
> 
> 时间：2013-02-11T03:46:17.620
> 
> 标签：google-maps-api-3

我有一个内嵌的谷歌地图，点击它时，可以使用键盘箭头键进行导航。这不允许人们使用箭头键滚动实际页面，除非他们首先单击页面上的其他位置。有没有办法通过箭头键禁用此导航？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-11T13:33:59.103

`keyboardShortcuts`将地图的选项设置为`false`

# orchardcms - 访问固定链接

> ID：14805602
> 
> 赞同：1
> 
> 时间：2013-02-11T03:46:43.980
> 
> 标签：orchardcms

为了继续学习 Orchard 并创建我的第一个主题，我已经覆盖了 Content-BlogPost。

如何访问完整博客文章的链接？我正在渲染一个博客文章列表，效果很好，但我需要能够链接到完整的文章。

我最初的想法是：

Model.ContentItem.Permalink.Url，或类似的东西。但我知道永久链接不存在。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T05:23:56.250

`@Url.ItemDisplayUrl(Model.ContentItem)`应该做的伎俩。

# html - XSLT：使用 xsl 从部分属性中提取输出内容

> ID：14805610
> 
> 赞同：0
> 
> 时间：2013-02-11T03:47:15.713
> 
> 标签：html, xml, xslt, xslt-1.0

我有一个我之前问过的关于根据给定的类和内容的输入提取特定的问题的变体。

我有@Kirill Polishchuk 提供的示例解决方案。我如何为一个特定的部分实现细微的变化。

[使用 xsl 从部分属性中提取类](https://stackoverflow.com/questions/13466641/extracting-a-class-from-the-section-attribute-using-xsl)

我正在使用 XSLT1.0，我已经概述了一个可能的解决方案，但如果这是最佳实践，我不是。我完全不知道如何解决这个问题，任何建议和帮助都将不胜感激。

输入：

```
<root>
  <page number="1" section="Arsenal_Stadium">Arsenal_Stadium</page> 
  <page number="2" section="Arsenal_Stadium">Arsenal_Stadium</page> 
  <page number="3" section="Arsenal_Stadium">Arsenal_Stadium</page> 
  <page number="4" section="Arsenal_Stadium">Arsenal_Stadium</page> 
  <page number="5" section="Arsenal_Stadium">Arsenal_Stadium</page> 
  <page number="6" section="Arsenal_Stadium">Arsenal_Stadium</page> 
  <page number="7" section="Arsenal_Stadium">Arsenal_Stadium</page> 
  <page number="8" section="Arsenal_Crowds">Arsenal_Crowds</page> 
  <page number="9" section="Arsenal_Crowds">Arsenal_Crowds</page> 
  <page number="10" section="Arsenal_Crowds">Arsenal_Crowds</page> 
  <page number="11" section="Arsenal_Crowds">Arsenal_Crowds</page> 
  <page number="12" section="Arsenal_Crowds">Arsenal_Crowds</page> 
  <page number="13" section="Arsenal_Finances">Arsenal_Finances</page> 
  <page number="14" section="Arsenal_Finances">Arsenal_Finances</page> 
  <page number="15" section="Arsenal_Finances">Arsenal_Finances</page> 
  <page number="16" section="Arsenal_Finances">Arsenal_Finances</page> 
  <page number="17" section="Arsenal_Finances">Arsenal_Finances</page> 
  <page number="18" section="Arsenal_Finances">Arsenal_Finances</page> 
  <page number="19" section="Arsenal_Finances">Arsenal_Finances</page> 
  <page number="20" section="Arsenal_Outlook">Arsenal_Outlook</page> 
  <page number="21" section="Arsenal_Outlook">Arsenal_Outlook</page> 
  <page number="22" section="Arsenal_Outlook">Arsenal_Outlook</page> 
  <page number="23" section="Arsenal_Outlook">Arsenal_Outlook</page> 
  <page number="24" section="Arsenal_Outlook">Arsenal_Outlook</page> 
 </root> 
```

输出

```
<table>
<tr>
<td class="Stadium">Stadium</td>
<td></td>
<td class="Crowds">Crowds</td>
<td></td>
<td class="Finances">Finance’s Today</td>
<td></td>
<td class="Outlook">Outlook</td>
<td></td>
</tr>
<tr>
<td>1</td>
<td>7</td>
<td>8</td>
<td>12</td>
<td>13</td>
<td>19</td>
<td>20</td>
<td>24</td>
</tr>
</table> 
```

可能的解决方案

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" omit-xml-declaration="yes" indent="yes"/>

  <xsl:key name="k" match="page" use="@section"/>

  <xsl:template match="/root">
    <table>
      <tr>
        <xsl:apply-templates select="page[generate-id() = generate-id(key('k', @section))]"/>
      </tr>
      <tr>
        <xsl:apply-templates select="page[generate-id() = generate-id(key('k', @section))]" mode="page"/>
      </tr>
    </table>
  </xsl:template>

  <xsl:template match="page">
    <td class="{substring-after(@section, '_')}">
      <xsl:choose>
            <xsl:when test="contains(@section, '_Finances')">Finance’s Today
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="substring-after(@section, '_')"/>: 
            </xsl:otherwise>
        </xsl:choose>
    </td>
    <td></td>
  </xsl:template>

  <xsl:template match="page" mode="page">
    <td>
      <xsl:value-of select="@number"/>
    </td>
    <td>
      <xsl:value-of select="key('k', @section)[last()]/@number"/>
    </td>
  </xsl:template>

</xsl:stylesheet> 
```

问候JJ。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T08:21:23.630

这是一种更具可扩展性的方法：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" omit-xml-declaration="yes" indent="yes"/>

  <xsl:key name="k" match="page" use="@section"/>

  <xsl:variable name="rename">
    <item from="Arsenal_Finances" to="Finance’s Today" />
  </xsl:variable>

  <xsl:template match="/root">
    <xsl:variable name="uniqueSections"
                  select="page[generate-id() = generate-id(key('k', @section))]" />
    <table>
      <tr>
        <xsl:apply-templates select="$uniqueSections"/>
      </tr>
      <tr>
        <xsl:apply-templates select="$uniqueSections" mode="page"/>
      </tr>
    </table>
  </xsl:template>

  <xsl:template match="page">
    <xsl:variable name="sectionTrimmed"
                  select="substring-after(@section, '_')" />
    <td class="{$sectionTrimmed}">
      <xsl:variable name="renameItem"
                    select="document('')//xsl:variable[@name = 'rename']
                            /item[@from = current()/@section]" />
      <xsl:choose>
        <xsl:when test="$renameItem">
          <xsl:value-of select="$renameItem/@to"/>
        </xsl:when>
        <xsl:otherwise>
          <xsl:value-of select="$sectionTrimmed"/>
        </xsl:otherwise>
      </xsl:choose>
    </td>
    <td></td>
  </xsl:template>

  <xsl:template match="page" mode="page">
    <td>
      <xsl:value-of select="@number"/>
    </td>
    <td>
      <xsl:value-of select="key('k', @section)[last()]/@number"/>
    </td>
  </xsl:template>

</xsl:stylesheet> 
```

在这里`xsl:variable`，您可以列出 1 个或多个应重命名为其他名称的项目名称。如果找到匹配项，则`@to`使用该值。如果没有，则`substring-after(@section, '_')`使用。我还使用变量来捕获在单个模板中多次使用的两个公式的值。

# linux - Linux：直接与 USB 键盘接口

> ID：14805616
> 
> 赞同：4
> 
> 时间：2013-02-11T03:48:51.647
> 
> 标签：linux, keyboard, usb

我购买了一个 USB 数字键盘，它的功能似乎与普通 USB 键盘相同，但只有数字键盘键和 LED。它在 Linux 下正常工作，我可以用它和我的实际键盘输入数字。我想编写一个可以直接与其交互的应用程序（响应击键并控制 LED），而不必有一个窗口，并防止其他应用程序响应它。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T23:56:35.757

好吧，伊格纳西奥的评论确实帮助我指出了正确的方向。我需要从 gdk_display_get_default() 获取显示，然后使用 gdk_display_get_device_manager()，使用 gdk_device_manager_list_devices() 找到设备，最后使用 gdk_device_grab() 抓取它。（或者，如果我真的想要的话，我可以直接使用 X API……）这让我可以将键盘的事件定向到我的窗口，而不管焦点如何。

我遇到的一个障碍是窗口必须是“可见的”才能接收事件——而不是隐藏、最小化或在不同的工作区。我能做的最好的隐藏它是让它 1x1 像素未装饰并将它贴在屏幕外的某个地方（尽管有些 WM 不会让它真正离开屏幕，因此尺寸也很小）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-15T17:57:13.780

查看事件设备接口`/dev/input`。

一个不错的 Python 接口是[http://pythonhosted.org/evdev/](http://pythonhosted.org/evdev/)

更多信息：
使用输入子系统，第二部分
Linux 期刊，第 107 期，2003 年 3 月
[http://www.linuxjournal.com/article/6429](http://www.linuxjournal.com/article/6429)

我正在做一个类似的项目，可能会使用 evdev 来捕获键盘事件，但 XTest（在 Xlib 层中）会生成虚拟键盘事件。

由于`/dev/input`低于 X，因此不需要聚焦/显示窗口。

更新（2014 年 1 月 17 日）：

这是一种完全不同的方法，通过命令行。

1) 使用 列出可用的输入设备（及其 ID）`xinput --list`。

2) 用 .“浮动”目标输入设备`xinput --float <device_id>`。浮动设备后，它生成的输入事件将不再被任何正在运行的应用程序听到。因此，在测试/开发期间，您可能希望插入两个键盘（和/或鼠标），一个浮动，另一个连接。（您可以使用 重新连接浮动设备`xinput --reattach <device_id> <master_id>`。）

3）设备浮动后，您可以通过运行“查看”它生成的事件`xinput --test <device_id>`。

您可以查看 xinput 的源代码以了解这是如何在 C 中完成的。
[http://anonscm.debian.org/gitweb/?p=pkg-xorg/app/xinput.git;a=tree](http://anonscm.debian.org/gitweb/?p=pkg-xorg/app/xinput.git;a=tree)

# sql - 《SQL 社交网络修改练习》（Stanford DB 公开课）

> ID：14805617
> 
> 赞同：-2
> 
> 时间：2013-02-11T03:49:00.553
> 
> 标签：sql, database, sqlite

对于 A 与 B 的朋友，B 与 C 的朋友的所有情况，为 A 和 C 对添加新的友谊。不要添加重复的友谊、已存在的友谊或与自己的友谊。

我的尝试如下，导致语法错误：

```
insert into Friend 
  select F1.ID1, F2.ID2
  from Friend F1, Friend F2 
  where F1.ID2 = F2.ID1 and F1.ID1 <> F2.ID2 and (F1.ID1, F2.ID2) not in (
    select * from Friend
); 
```

预期的查询结果应该是（不能从上述查询中产生）：

```
1025    John    12  2
1101    Haley   10  3
1247    Alexis  11  7
1304    Jordan  12  8
1316    Austin  11  6
1381    Tiffany 9   6
1468    Kris    10  6
1501    Jessica 11  7
1510    Jordan  9   5
1641    Brittan 10  3
1661    Logan   12  4
1689    Gabriel 9   8
1709    Cassand 9   7
1782    Andrew  10  10
1911    Gabriel 11  5
1934    Kyle    12  7 
```

数据库架构和数据是：

```
Highschooler
ID      name       grade
1510    Jordan     9
1689    Gabriel    9
1381    Tiffany    9
1709    Cassandra  9
1101    Haley      10
1782    Andrew     10
1468    Kris       10
1641    Brittany   10
1247    Alexis     11
1316    Austin     11
1911    Gabriel    11
1501    Jessica    11
1304    Jordan     12
1025    John       12
1934    Kyle       12
1661    Logan      12

Friend
ID1     ID2
1510    1381
1510    1689
1689    1709
1381    1247
1709    1247
1689    1782
1782    1468
1782    1316
1782    1304
1468    1101
1468    1641
1101    1641
1247    1911
1247    1501
1911    1501
1501    1934
1316    1934
1934    1304
1304    1661
1661    1025
1381    1510
1689    1510
1709    1689
1247    1381
1247    1709
1782    1689
1468    1782
1316    1782
1304    1782
1101    1468
1641    1468
1641    1101
1911    1247
1501    1247
1501    1911
1934    1501
1934    1316
1304    1934
1661    1304
1025    1661

Likes
ID1     ID2
1689    1709
1709    1689
1782    1709
1911    1247
1247    1468
1641    1468
1316    1304
1501    1934
1934    1501
1025    1101 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T04:21:07.987

你可以这样做，

```
insert into Friend
select distinct F1.ID1, F2.ID2
from Friend F1, Friend F2
where F1.ID2 = F2.ID1 and F1.ID1<>F2.ID2 
      and F1.ID1 not in (select F3.ID1 from Friend F3 where F3.ID2=F2.ID2); 
```

# php - 3维数组php中的多排序

> ID：14805623
> 
> 赞同：0
> 
> 时间：2013-02-11T03:49:47.483
> 
> 标签：php, multidimensional-array, sorting

我有这样的多维数组：

```
array(1) {
  ["category_content"]=>
  array(3) {
    [0]=>
    array(5) {
      ["content_id"]=>
      string(1) "2"
      ["content_title"]=>
      string(6) "coolas"
      ["grade"]=>
      string(1) "1"
      ["content_order"]=>
      string(1) "1"
      ["kind"]=>
      string(7) "article"
    }
    [1]=>
    array(5) {
      ["content_id"]=>
      string(1) "1"
      ["content_title"]=>
      string(16) "Zango Restaurant"
      ["grade"]=>
      string(1) "2"
      ["content_order"]=>
      string(1) "2"
      ["kind"]=>
      string(8) "business"
    }
  }
} 
```

我想按 content_order 排序。如何使用多重排序对这个数组进行排序？以及如何提供用于排序的标志？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T04:01:02.200

```
$category_content_array = $data_array; // your actual data array
$content_order_array = array();  // new array as a column to sort collector

foreach ($category_content_array as $content) {
$content_order_array[] = $content['content_order'];
}

array_multisort($content_order_array, SORT_ASC, $category_content_array); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T03:54:05.750

这将帮助您解决问题。

```
<?php
function CustomSort (&$array, $key)
{
    $sorter=array();
    $ret=array();

    reset($array);

    foreach ($array as $ii => $va)
    {
        $sorter[$ii]=$va[$key];
    }

    asort($sorter);

    foreach ($sorter as $ii => $va)
    {
        $ret[$ii]=$array[$ii];
    }

    $array=$ret;
}

CustomSort($your_array,"content_id");

?>
```

另一个是

```
$contentID = array();
foreach ($your_array as $key => $row)
{
    $contentID[$key] = $row['content_id'];
}
array_multisort($contentID, SORT_DESC, $your_array);
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T03:57:29.597

[http://www.php.net/manual/en/function.array-multisort.php](http://www.php.net/manual/en/function.array-multisort.php)

示例＃3，

```
<?php
$data[] = array('volume' => 67, 'edition' => 2);
$data[] = array('volume' => 86, 'edition' => 1);
$data[] = array('volume' => 85, 'edition' => 6);
$data[] = array('volume' => 98, 'edition' => 2);
$data[] = array('volume' => 86, 'edition' => 6);
$data[] = array('volume' => 67, 'edition' => 7);

foreach ($data as $key => $row) {
    $volume[$key]  = $row['volume'];
    $edition[$key] = $row['edition'];
}

// Sort the data with volume descending, edition ascending
// Add $data as the last parameter, to sort by the common key
array_multisort($volume, SORT_DESC, $edition, SORT_ASC, $data);
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T03:59:58.660

你也可以使用[`usort()`](http://php.net/usort). 例如，

```
<?php
$array = array (
    '1' => array('sortBy' => 10),
    '2' => array('sortBy' => 4),
    '3' => array('sortBy' => 50),
    '4' => array('sortBy' => 8),
    '5' => array('sortBy' => 2),
    '6' => array('sortBy' => 100),
);

function comp($a, $b) {
    return $a['sortBy'] > $b['sortBy'];
}

usort($array, comp);
?> 
```

# websphere - 停止作为服务启动的 Websphere 7 Server

> ID：14805629
> 
> 赞同：0
> 
> 时间：2013-02-11T03:50:47.667
> 
> 标签：websphere

不知何故，没有一个搜索引擎可以帮助我进行此搜索。我系统上的 Websphere 7 服务器在 Windows 启动时启动。如何阻止服务器随 Windows 启动而启动。我想在需要时手动启动它。请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T05:26:59.333

去`control Panel --> Administrative tools --> Services`。搜索`IBM WebSphere Application Server 7.0`服务并更改其`Start up Type`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T08:14:29.467

您可以使用 WASService 命令将 WebSphere 应用程序服务器作为服务永久删除。语法是`WASService.exe -remove service_name`（您需要从控制面板中找出服务的名称）。InfoCenter 中有完整的[命令参考](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/topic/com.ibm.websphere.express.doc/info/exp/ae/rins_wasservice.html)。

# java - 如果条件为真，则复制文件

> ID：14805631
> 
> 赞同：0
> 
> 时间：2013-02-11T03:51:40.600
> 
> 标签：java, file, apache-camel

骆驼。文件组件。我需要配置路由，以便仅在没有发生错误时才复制文件。是）我有的：

```
<route id="importFile" autoStartup="{{fdr.import.enabled}}">
            <from uri="direct:startImportFile"/>
            <from uri="file://{{fdr.folder.working}}?delete=true&amp;readLock=changed"/>
            <transacted ref="fdrTxRequired"/>
            <doTry>
                <to uri="file://{{fdr.folder.done}}"/> <!--1-->
                <bean ref="transactionsProcessor"/>
                <bean ref="transactionsFinalizer"/>
                <!--2-->
                <doCatch>
                    <exception>java.lang.Exception</exception>
                    <to uri="file://{{fdr.folder.failed}}"/>
                    <bean ref="exceptionProcessor"/>
                </doCatch>
                <doFinally>
                    <bean ref="responsePublisher"/>
                </doFinally>
            </doTry>
        </route> 
```

所需逻辑：如果在 transactionsProcessor 和 transactionsFinalizer 中处理一切正常，那么我们只需将文件从文件夹“工作”移动到文件夹“完成”如果在 transactionProcessor 或 transactionsFinalizer 中发生错误，那么我们将文件从“工作”移动到“失败”和“完成”必须为空如果我将第 1 行放到占位符 2 中，则在我的自定义处理器中处理后，我无法将文件重新定位为 InputStream。也许我们可以从“工作”转向“完成”。然后我们处理文件，如果可以，那么就可以了。如果发生错误，则从“完成”移动到“失败”。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T05:29:03.823

ou，我找到了解决方案 - 使用 stopOnExeption 进行多播

```
<routeContext id="fileImportOnlyRouteContext" xmlns="http://camel.apache.org/schema/spring">
        <route id="importFile" autoStartup="{{fdr.import.enabled}}">
            <from uri="direct:startImportFile"/>
            <from uri="file://{{fdr.folder.working}}?delete=true&amp;readLock=changed"/>
            <transacted ref="fdrTxRequired"/>
            <doTry>
                <multicast stopOnException="true">
                    <to uri="direct:startFileImporter"/>
                    <to uri="file://{{fdr.folder.done}}"/>
                </multicast>
                <doCatch>
                    <exception>java.lang.Exception</exception>
                    <to uri="file://{{fdr.folder.failed}}"/>
                    <bean ref="exceptionProcessor"/>
                </doCatch>
                <doFinally>
                    <bean ref="responsePublisher"/>
                </doFinally>
            </doTry>
        </route>

        <route id="fileImporterRoute">
            <from uri="direct:startFileImporter"/>
            <bean ref="transactionsProcessor"/>
            <bean ref="transactionsFinalizer"/>
        </route>
    </routeContext> 
```

# opengl - OpenGL使用GL_TRIANGLE_FAN将圆放在椭圆内？

> ID：14805632
> 
> 赞同：2
> 
> 时间：2013-02-11T03:51:41.100
> 
> 标签：opengl

当然，我正在尝试绘制一个椭圆并在其中放置一个圆圈，使用不同的颜色。我可以自己绘制形状，但不能让它们同时出现在屏幕上。

这是我到目前为止的代码：

```
#ifdef __APPLE__
#include <GLUT/glut.h>
#else
#include <GL/glut.h>
#endif

#include <stdlib.h>

#include <math.h>

#define PI 3.14159

const int ScreenWidth = 640;
const int ScreenHeight = 480;

void myInit(void)
{
    glPointSize(1.0);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    gluOrtho2D(0.0, (GLdouble)ScreenWidth, 0.0, (GLdouble)ScreenHeight);
}

void drawFilledElipse(GLfloat x, GLfloat y, GLfloat radius)
{
    int i;
    int triangleAmount = 20; //# of triangles used to draw circle
    glColor3f(0.0f, 0.0f, 0.0f);

    GLfloat twicePi = 2.0f * PI;

    GLint x1 =320, y1 = 240, r1 = 75;

    glBegin(GL_TRIANGLE_FAN);
    glVertex2f(x, y); // center of circle
    for (i = 0; i <= triangleAmount; i++) {
        glVertex2f(
            1.4   * ( x + (radius * cos(i *  twicePi / triangleAmount))),
            1.111 * (y + (radius * sin(i * twicePi / triangleAmount)))
        );
    }

    glutSwapBuffers();
}

void drawFilledCircle(GLfloat x, GLfloat y, GLfloat radius)
{
    int i;
    int triangleAmount = 20; //# of triangles used to draw circle
    glColor3f(1.0f, 0.0f, 0.0f);

    GLfloat twicePi = 2.0f * PI;

    glBegin(GL_TRIANGLE_FAN);
    glVertex2f(x, y); // center of circle
    for(i = 0; i <= triangleAmount;i++) 
    {
        glVertex2f(
            (x + (radius * cos(i * twicePi / triangleAmount))),
            (y + (radius * sin(i * twicePi / triangleAmount)))
        );
    }

    glutSwapBuffers();
}

void myDisplay(void)
{
    glClearColor(1.0, 1.0, 1.0, 0.0);
    glClear(GL_COLOR_BUFFER_BIT);

    drawFilledCircle(320,240,75);
    drawFilledElipse(225,240,100);

    glEnd();
    glFlush();
}

int main(int argc, char ** argv)
{
    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGB);
    glutInitWindowSize(ScreenWidth, ScreenHeight);
    glutInitWindowPosition(100, 150);
    glutCreateWindow("Random dots...");
    glutDisplayFunc(myDisplay);
    myInit();
    glutMainLoop();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T05:47:10.343

除了 Nicol 的评论之外，您还没有将您的`glBegin`呼叫与您的`glEnd`呼叫匹配。您的`drawFilledCircle`和`drawFilledElipse`例程应该以调用`glEnd`每个结束。`glBegin`在`glBegin`没有干预的情况下调用是 OpenGL 中的错误`glEnd`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T03:54:32.213

当您将绘图分成两个单独的函数时，您犯了一个复制和粘贴错误。你两个都打*了*`glutSwapBuffers`电话。您只想在绘制完*所有内容*后交换缓冲区，而不仅仅是一个对象。

# c - xcode scanf不工作c

> ID：14805635
> 
> 赞同：1
> 
> 时间：2013-02-11T03:52:05.893
> 
> 标签：c, if-statement, for-loop

为什么这段代码不起作用？

基本思路：

每辆车可以坐4个人。每列火车的第一节车厢长 10 英尺，随后的每节车厢长 8 英尺。火车只能占据总轨道长度的25%。
目标是打印出可以填充火车轨道的最大人数，用户输入最大轨道长度和最大火车长度。

```
//Roller Coaster Capacity
//Justin Castillo, Section 1, COP 3223, 2/9/2013
//This program calculates the maximum number of people that can be on the
//track at one time.  

int main(void) {

    int max_people_train;
    int num_cars_train;
    int total_num_trains;
    int max_length_track;
    int max_length_train;
    int max_people_track;
    int prev_max_people_track;
    int prev_total_num_trains, i;

    printf("Please enter the track length:\n");
    scanf("%d", &max_length_track);

    printf("Please enter the max length of the train:\n");
    scanf("%d", &max_length_train);

    for (i=10; i<=max_length_train; i+8) {
        num_cars_train = ((i-10)/8 +1);
        max_people_train = (num_cars_train)*4;
        total_num_trains = max_length_track/i;
        max_people_track = total_num_trains*max_people_train;

        prev_max_people_track = prev_total_num_trains * max_people_train;
        prev_total_num_trains = max_length_track/(i-8);

        if (prev_max_people_track > max_people_track)
            max_people_track = prev_max_people_track;
    }

    printf("Your ride can have at most %d people on the track,\n", max_people_track);
    printf("This can be achieved with trains of %d cars.\n", num_cars_train);

    system("pause");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T03:56:39.937

我猜这与此有关：

```
for (i=10; i<=max_length_train; i+8) {
//  ============================^^^ WTF ? 
```

尝试：

```
for (i=10; i<=max_length_train; i+=8) { 
```

# php - 更新 id =? 的列

> ID：14805637
> 
> 赞同：-2
> 
> 时间：2013-02-11T03:52:10.027
> 
> 标签：php, mysql

我试图更新我的表（'ptb_messages'）中的一列（'content'），其中消息的'id'与提交时在我的表单中回显的相同，因此 WHERE id='".$message_id。 " 这是一个全局函数集。消息的 id 被很好地回显，问题出在函数或 mysql 脚本中。

有人可以告诉我我哪里出了问题。谢谢

html表单：

```
 <form id="reply" action="message_reply.php?to=<?php echo "".$message_id.""; ?>" method="post">
    <textarea name="textarea" id="textarea"><?php echo  "{$message['content']}"; ?></textarea>
    <?php
    }
    ?>
    <input type="image" src="assets/img/icons/email_send.png"
         width="50" height="34" name="send_button" id="send_button">
    </form>

mysql function:

 <?php
    require_once("includes/session.php"); 
    require_once("includes/functions.php");
    require('includes/_config/connection.php');
    ?>
    <?php 

    session_start();

    include 'includes/_config/connection.php'; 

    $textarea = $_POST['textarea'];

    $result = mysql_query("SELECT content FROM ptb_messages WHERE id='".$message_id."'");

    if(!$result) 
    { 
    echo "The username you entered does not exist"; 
    } 
    else 
    if($textarea!= mysql_result($result, 0)) 
    { 
    echo ""; 

        $sql=mysql_query("UPDATE ptb_messages SET content ='".addslashes($textarea)."' WHERE id='".$message_id."'"); 
    }
        if($sql) 
        { 

    }
    header("Location: {$_SERVER['HTTP_REFERER']}");
    ?> 
```

我收到这些错误：

```
Warning: mysql_result() [function.mysql-result]: Unable to jump to row 0 on MySQL result index 9 in /Applications/XAMPP/xamppfiles/htdocs/ptb1/message_reply.php on line 25

Warning: Cannot modify header information - headers already sent by (output started at /Applications/XAMPP/xamppfiles/htdocs/ptb1/message_reply.php:25) in /Applications/XAMPP/xamppfiles/htdocs/ptb1/message_reply.php on line 37 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T04:03:56.037

改变这个

```
<form id="reply" action="message_reply.php?to=<?php echo "".$message_id.""; ?> 
```

至

```
<form id="reply" action="message_reply.php?to=<?php echo $message_id; ?> 
```

并`message_id`使用此访问

```
$result = mysql_query("SELECT content FROM ptb_messages WHERE id='".$GET['to']."'"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T04:06:28.670

在这种情况下，我看不到带有 message_id 的行是否真的存在。如果没有，可能会有问题。如果查询有效但没有返回结果，则 Select 不会返回 false。你应该使用：

```
if (!$result || !mysql_num_rows($result)) {
    echo 'not exists';
} 
```

也许这会解决你的问题。

还有一点需要注意：我看到您在标题之前使用了一些回声。这不应该是因为 header 函数会导致错误。在这种情况下使用输出缓冲或在使用 header 函数后移动 echo。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T05:03:37.593

您是否尝试过声明 $message_id？

```
 <?php 

    session_start();

    include 'includes/_config/connection.php'; 

    $message_id=$_GET['to'];

    $textarea = $_POST['textarea'];

    $query = mysql_query("SELECT content FROM ptb_messages WHERE id='".$message_id."'");

 $results=mysql_fetch_array($query);

 $result=$results['0'];

    if($result && $textarea) {

        $sql = mysql_query("UPDATE ptb_messages SET content ='".addslashes($textarea)."' WHERE id='".$message_id."'"); 
  echo 'done';
  }

  else

    { 
    echo "The username you entered does not exist"; 
    }         

    ?> 
```

# jquery - 如何将 jquery 自动完成组合框连接到 PHP mysql 数据源

> ID：14805640
> 
> 赞同：0
> 
> 时间：2013-02-11T03:52:41.133
> 
> 标签：jquery, jquery-autocomplete

我需要将我的**jquery 自动完成**组合框连接到以下数据源。每次按下一个字母时，我都需要填充数据组合框。

```
 if( isset( $_POST['catogery'] ) ) {   
      include('../DBConnection.php');
      $cat=$_POST['catogery']; 
      header('Content-type: application/json');  
      $result = mysql_query("SELECT SUBJECTCODE  FROM subjectmaster WHERE CATCODE = '$cat'"); 
      $return_arr = array(); 
      while( $row = mysql_fetch_array( $result ) ) {
          $row_array['id']=$row[0];
          array_push( $return_arr, $row_array );
      }
     echo json_encode($return_arr);

function getclassno(cat){
   $.ajax({
      type: "POST", 
      url:"reg/data/data.php", 
      async: false,
      data:{
         catogery:cat 
      },
      success: function(data){
         $.each(data, function (i, elem) {
            $('#classno').append( new Option(elem.id) );
         });
      }         
   });
} 
```

函数get class no是用combobox填充数据。它工作正常。但我需要根据输入的字母从数据库中动态搜索项目。我应该在哪里改变做那件事。因为我有超过3000个数据加载到组合框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T04:35:40.937

你必须尝试`jquery ui autocomplete`

这是文档[http://api.jqueryui.com/autocomplete/](http://api.jqueryui.com/autocomplete/)

工作演示是[http://jqueryui.com/resources/demos/autocomplete/remote.html](http://jqueryui.com/resources/demos/autocomplete/remote.html)

您需要创建一个类似的页面，该页面`search.php`将返回一个类似的数组 `[{"id":"Ciconia ciconia","label":"White Stork","value":"White Stork"}]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-10T06:06:28.977

我认为这是 jquery 自动完成厘米

例子

[http://jqueryui.com/autocomplete/#combobox](http://jqueryui.com/autocomplete/#combobox)

另一个例子

[http://test.cita.illinois.edu/aria/combobox/combobox2.php](http://test.cita.illinois.edu/aria/combobox/combobox2.php)

# c++ - 为什么在函数参数中将 `const ull` 更改为 `const ull&` 会导致性能提升？

> ID：14805641
> 
> 赞同：28
> 
> 时间：2013-02-11T03:53:12.447
> 
> 标签：c++, performance, optimization, gcc, c++11

因此，使用以下代码，将参数的类型`x`从更改`const ull`为`const ull&`(with `typedef unsigned long long ull`) 会在使用 gcc 4.7.2 和 flags 编译时产生大约 25% 的加速`-O3 -std=c++11 -g`，我不明白为什么这会产生如此大的差异。

```
static void inline single_mult(const std::vector<ull>::iterator& data,
                  const std::vector<ull>::const_iterator& rbegin,
                  const std::vector<ull>::const_iterator& rend,
                  const ull x) {
        ull tmp=0, carry=0, i=0;
        for (auto rhs_it = rbegin; rhs_it != rend; ++rhs_it) {
                tmp = x*(*rhs_it) + data[i] + carry;
                if (tmp >= imax) {
                        carry = tmp >> numbits;
                        tmp &= imax - 1;
                } else { 
                        carry = 0;
                }
                data[i++] = tmp;
        }
        data[i] += carry;
} 
```

它在以下函数中调用（用于做课本长乘法）

```
static void naive(std::vector<ull>::iterator data, 
              std::vector<ull>::const_iterator cbegin,
              std::vector<ull>::const_iterator cend  ,
              std::vector<ull>::const_iterator rbegin,
              std::vector<ull>::const_iterator rend) {

    for (auto data_it  = cbegin;
          data_it != cend; ++data_it) {
        if (*data_it != 0) {
            single_mult(data, rbegin, rend, *data_it);
        }
        ++data;
    }
} 
```

计时是通过调用`clock()`一个循环来测量它需要多长时间来完成的。不是最准确/最精确的方式，但我认为一致的 25% 差异意味着差异具有统计学意义。

完整的工作代码块：

```
#include <vector>
#include <limits>
#include <ctime>
#include <iostream>

typedef unsigned long long ull;
typedef unsigned int uint;
const ull numbits = (ull) std::numeric_limits<uint>::digits;        
const ull imax = 1LL << numbits;     

static void inline single_mult(const std::vector<ull>::iterator& data,
              const std::vector<ull>::const_iterator& rbegin,
              const std::vector<ull>::const_iterator& rend,
              const ull x) {
    ull tmp=0, carry=0, i=0;
    for (auto rhs_it = rbegin; rhs_it != rend; ++rhs_it) {
            tmp = x*(*rhs_it) + data[i] + carry;
            if (tmp >= imax) {
                    carry = tmp >> numbits;
                    tmp &= imax - 1;
            } else {
                    carry = 0;
            }
            data[i++] = tmp;
    }
    data[i] += carry;
}

static void naive(std::vector<ull>::iterator data,
              std::vector<ull>::const_iterator cbegin,
              std::vector<ull>::const_iterator cend  ,
              std::vector<ull>::const_iterator rbegin,
              std::vector<ull>::const_iterator rend) {

    for (auto data_it  = cbegin; data_it != cend; ++data_it) {
            if (*data_it != 0) {
                    single_mult(data, rbegin, rend, *data_it);
            }
    ++data;
    }
}

int main() {
    int N = 10000;
    std::vector<ull> vec(N);
    for (int i=0; i<N; ++i) {
        vec[i] = i;
    }

    auto s1 = clock();
    int num = 10;
    std::vector<ull> result(2*N);
    for (int i=0; i<num; ++i) {
    //Need to zero out the vector or the result will be different.
        std::fill(result.begin(), result.end(), 0);
        naive(result.begin(), vec.cbegin(), vec.cend(), vec.cbegin(), vec.cend());
    }
    s1 = (clock() - s1);
    std::cout << "Took " << float(s1)/CLOCKS_PER_SEC << "seconds total." << std::endl;
} 
```

和运行时（我命名了传递值`value.cpp`和引用的文件`reference.cpp`）

```
$ g++ -O3 -std=c++11 -g -o reference reference.cpp
$ g++ -O3 -std=c++11 -g -o value value.cpp
$ ./reference                                                                                                                                           
Took 1.05seconds total.                                                                        
$ ./value                                                                 
Took 1.83seconds total. 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-11T20:06:40.487

我能够重现您对加速的观察，这对我来说更加明显（快 1.75 倍）。问题似乎在于，当您通过值传递 x 时，它使编译器能够执行原本不会执行的优化，而这些优化适得其反，它们显然会在处理器中引入意外的停顿。编译器生成几个条件移动，背靠背，而不是比较和分支。比较和分支比背靠背条件移动运行得快得多。

我可以通过简化编译器遇到问题的代码来避免这种情况，即

```
if (tmp >= imax) {
    carry = tmp >> numbits;
    tmp &= imax - 1;
} else {
    carry = 0;
} 
```

可以简化为

```
carry = tmp >> numbits;
tmp &= imax - 1; 
```

这是我正在使用的 gcc 版本

```
g++ --version
g++ (GCC) 4.6.3 20120306 (Red Hat 4.6.3-2) 
```

这些是我使用的命令，`perf record`将分析您的代码，`perf report`并将使用分析结果注释源代码和反汇编

```
 g++ -std=gnu++0x -O3 -g single_mult.cpp -o single_mult
 perf record ./single_mult
 perf report 
```

一旦在性能报告中按下`enter`并`main`选择`Annotate main`，您将看到程序的反汇编以及源代码以及分析器发现您的程序在函数中的每条指令处运行的时间百分比......实际上这些数字必须被视为仅作为提示，通常您会看到计数很大的指令，而实际上它是前一条指令停止或在缓存中丢失，或者存在错误预测的分支等。因此，当您看到大量计数时，请回头查看看看可能是什么原因造成的。原因是配置文件是统计的，它以恒定的速率中断您的程序并查看指令指针的位置，并且通常在处理器由于缓存未命中或错误预测的分支或某些内部原因而停止时发生中断数据依赖。

我增加了迭代次数，以便为分析器留出更多时间

```
int N = 20000; 
```

当 x 按值传递时`Took 11.58seconds total`，这就是我所看到的，请注意`cmovbe`说明

```
 :            ull tmp=0, carry=0, i=0;                                                                                                                                                     
       :            for (auto rhs_it = rbegin; rhs_it != rend; ++rhs_it) {                                                                                                                       
       :                    tmp = x*(*rhs_it) + data[i] + carry;                                                                                                                                 
 11.10 :          400b40:       4c 89 c9                mov    %r9,%rcx                                                                                                                          
  0.00 :          400b43:       48 89 fa                mov    %rdi,%rdx                                                                                                                         
  0.01 :          400b46:       48 03 14 c6             add    (%rsi,%rax,8),%rdx                                                                                                                
 11.65 :          400b4a:       48 0f af 0c c3          imul   (%rbx,%rax,8),%rcx                                                                                                                
  0.99 :          400b4f:       48 01 ca                add    %rcx,%rdx                                                                                                                         
       :                    if (tmp >= imax) {                                                                                                                                                   
       :                            carry = tmp >> numbits;                                                                                                                                      
  2.25 :          400b52:       48 89 d7                mov    %rdx,%rdi                                                                                                                         
       :                            tmp &= imax - 1;                                                                                                                                            
 10.99 :          400b55:       48 89 d1                mov    %rdx,%rcx                                                                                                                         
       :                      const ull x) {                                                                                                                                                     
       :            ull tmp=0, carry=0, i=0;                                                                                                                                                     
       :            for (auto rhs_it = rbegin; rhs_it != rend; ++rhs_it) {                                                                                                                       
       :                    tmp = x*(*rhs_it) + data[i] + carry;                                                                                                                                 
       :                    if (tmp >= imax) {                                                                                                                                                    
       :                            carry = tmp >> numbits;                                                                                                                                      
  0.69 :          400b58:       48 c1 ef 20             shr    $0x20,%rdi                                                                                                                        
       :                            tmp &= imax - 1;                                                                                                                                              
  9.54 :          400b5c:       83 e1 ff                and    $0xffffffff,%ecx                                                                                                                   
  9.05 :          400b5f:       4c 39 c2                cmp    %r8,%rdx                                                                                                                          
 10.78 :          400b62:       49 0f 46 fb             cmovbe %r11,%rdi                                                                                                                          
       :                    } else {                                                                                                                                                              
       :                            carry = 0;                                                                                                                                                    
       :                    }                                                                                                                                                                     
       :                    data[i++] = tmp;                                                                                                                                                     
 20.73 :          400b66:       48 83 c0 01             add    $0x1,%rax                                                                                                                          
  0.02 :          400b6a:       4c 39 c2                cmp    %r8,%rdx                                                                                                                           
  0.17 :          400b6d:       48 0f 46 ca             cmovbe %rdx,%rcx                                                                                                                         
       :        static void inline single_mult(const std::vector<ull>::iterator& data,                                                                                                            
       :                      const std::vector<ull>::const_iterator& rbegin,                                                                                                                    
       :                      const std::vector<ull>::const_iterator& rend,                                                                                                                      
       :                      const ull x) {                                                                                                                                                     
       :            ull tmp=0, carry=0, i=0;                                                                                                                                                     
       :            for (auto rhs_it = rbegin; rhs_it != rend; ++rhs_it) {                                                                                                                       
 11.47 :          400b71:       4c 39 d0                cmp    %r10,%rax                                                                                                                         
       :                            carry = tmp >> numbits;                                                                                                                                      
       :                            tmp &= imax - 1;                                                                                                                                             
       :                    } else {                                                                                                                                                             
       :                            carry = 0;                                                                                                                                                   
       :                    }                                                                                                                                                                    
       :                    data[i++] = tmp;                                                                                                                                                     
  0.01 :          400b74:       48 89 4c c6 f8          mov    %rcx,-0x8(%rsi,%rax,8)                                                                                                            
       :        static void inline single_mult(const std::vector<ull>::iterator& data,                                                                                                           
       :                      const std::vector<ull>::const_iterator& rbegin,                                                                                                                    
       :                      const std::vector<ull>::const_iterator& rend,                                                                                                                      
       :                      const ull x) {                                                                                                                                                     
       :            ull tmp=0, carry=0, i=0;                                                                                                                                                     
       :            for (auto rhs_it = rbegin; rhs_it != rend; ++rhs_it) {                                                                                                                       
  0.53 :          400b79:       75 c5                   jne    400b40 <main+0x250>                                                                                                               
       :                    } else {                                                                                                                                                             
       :                            carry = 0;                                                                                                                                                   
       :                    }                                                                                                                                                                    
       :                    data[i++] = tmp;                                                                                                                                                     
       :            }                                                                                                                                                                             
       :            data[i] += carry;                                                                                                                                                            
  0.00 :          400b7b:       4a 01 3c d6             add    %rdi,(%rsi,%r10,8)                                                                                                                
  0.01 :          400b7f:       48 83 c5 08             add    $0x8,%rbp 
```

当 x 通过引用传递时`Took 6.59seconds total`，这就是我所看到的

```
 :            ull tmp=0, carry=0, i=0;                                                                                                                                                     
       :            for (auto rhs_it = rbegin; rhs_it != rend; ++rhs_it) {                                                                                                                       
 20.90 :          400b30:       48 8b 17                mov    (%rdi),%rdx                                                                                                                       
       :                    tmp = x*(*rhs_it) + data[i] + carry;                                                                                                                                 
  1.38 :          400b33:       49 0f af 14 c1          imul   (%r9,%rax,8),%rdx                                                                                                                   
  4.82 :          400b38:       48 03 0c c6             add    (%rsi,%rax,8),%rcx                                                                                                                
 22.41 :          400b3c:       48 01 ca                add    %rcx,%rdx                                                                                                                         
       :                    if (tmp >= imax) {                                                                                                                                                   
       :                            carry = tmp >> numbits;                                                                                                                                      
       :                            tmp &= imax - 1;                                                                                                                                               
       :                    } else {                                                                                                                                                             
       :                            carry = 0;                                                                                                                                                   
  2.95 :          400b3f:       31 c9                   xor    %ecx,%ecx                                                                                                                         
       :                      const std::vector<ull>::const_iterator& rend,                                                                                                                      
       :                      const ull &x) {                                                                                                                                                    
       :            ull tmp=0, carry=0, i=0;                                                                                                                                                     
       :            for (auto rhs_it = rbegin; rhs_it != rend; ++rhs_it) {                                                                                                                       
       :                    tmp = x*(*rhs_it) + data[i] + carry;                                                                                                                                 
       :                    if (tmp >= imax) {                                                                                                                                                   
  0.23 :          400b41:       4c 39 d2                cmp    %r10,%rdx                                                                                                                         
  0.00 :          400b44:       76 0a                   jbe    400b50 <main+0x260>                                                                                                               
       :                            carry = tmp >> numbits;                                                                                                                                      
  2.27 :          400b46:       48 89 d1                mov    %rdx,%rcx                                                                                                                         
       :                            tmp &= imax - 1;                                                                                                                                             
  1.29 :          400b49:       83 e2 ff                and    $0xffffffff,%edx                                                                                                                  
       :                      const ull &x) {                                                                                                                                                    
       :            ull tmp=0, carry=0, i=0;                                                                                                                                                     
       :            for (auto rhs_it = rbegin; rhs_it != rend; ++rhs_it) {                                                                                                                       
       :                    tmp = x*(*rhs_it) + data[i] + carry;                                                                                                                                 
       :                    if (tmp >= imax) {                                                                                                                                                   
       :                            carry = tmp >> numbits;                                                                                                                                      
  0.26 :          400b4c:       48 c1 e9 20             shr    $0x20,%rcx                                                                                                                        
       :                            tmp &= imax - 1;                                                                                                                                             
       :                    } else {                                                                                                                                                             
       :                            carry = 0;                                                                                                                                                   
       :                    }                                                                                                                                                                    
       :                    data[i++] = tmp;                                                                                                                                                     
 19.67 :          400b50:       48 83 c0 01             add    $0x1,%rax                                                                                                                         
       :        static void inline single_mult(const std::vector<ull>::iterator& data,                                                                                                           
       :                      const std::vector<ull>::const_iterator& rbegin,                                                                                                                    
       :                      const std::vector<ull>::const_iterator& rend,                                                                                                                      
       :                      const ull &x) {                                                                                                                                                    
       :            ull tmp=0, carry=0, i=0;                                                                                                                                                     
       :            for (auto rhs_it = rbegin; rhs_it != rend; ++rhs_it) {                                                                                                                       
  0.53 :          400b54:       4c 39 c0                cmp    %r8,%rax                                                                                                                          
       :                            carry = tmp >> numbits;                                                                                                                                      
       :                            tmp &= imax - 1;                                                                                                                                             
       :                    } else {                                                                                                                                                             
       :                            carry = 0;                                                                                                                                                   
       :                    }                                                                                                                                                                      
       :                    data[i++] = tmp;                                                                                                                                                     
  0.39 :          400b57:       48 89 54 c6 f8          mov    %rdx,-0x8(%rsi,%rax,8)                                                                                                            
       :        static void inline single_mult(const std::vector<ull>::iterator& data,                                                                                                           
       :                      const std::vector<ull>::const_iterator& rbegin,                                                                                                                    
       :                      const std::vector<ull>::const_iterator& rend,                                                                                                                      
       :                      const ull &x) {                                                                                                                                                    
       :            ull tmp=0, carry=0, i=0;                                                                                                                                                     
       :            for (auto rhs_it = rbegin; rhs_it != rend; ++rhs_it) {                                                                                                                       
 22.91 :          400b5c:       75 d2                   jne    400b30 <main+0x240>                                                                                                               
       :                    } else {                                                                                                                                                             
       :                            carry = 0;                                                                                                                                                   
       :                    }                                                                                                                                                                    
       :                    data[i++] = tmp;                                                                                                                                                     
       :            }                                                                                                                                                                            
       :            data[i] += carry;                                                                                                                                                            
  0.00 :          400b5e:       4a 01 0c c6             add    %rcx,(%rsi,%r8,8)                                                                                                                 
  0.00 :          400b62:       48 83 c7 08             add    $0x8,%rdi 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T14:12:50.430

没有看到汇编代码，很难确定，但总的来说：`unsigned long long`按值传递可能需要编译器生成额外的代码来将值复制到堆栈上。

通过引用传递它允许编译器简单地传递指针，它可能已经在一个方便的寄存器中。

# java - EclipseLink DDL 生成错误

> ID：14805646
> 
> 赞同：0
> 
> 时间：2013-02-11T03:53:31.103
> 
> 标签：java, jpa, eclipselink

`EclipseLink`当一个`Embeddable`类有另一个`Entity`O/R 映射注释时，我无法使用 生成 DDL 。如何为我的 O/R 映射生成 DDL？

公司.java

```
@Entity
public class Company implements Serializable {
    .....

    @Embedded
    private CompanyAddress address;
} 
```

公司地址.java

```
@Embeddable
public class CompanyAddress implements Serializable {
    .....

    @Embedded
    @OneToOne(fetch = FetchType.EAGER)
    @JoinColumn(name = "TOWNSHIP_ID", referencedColumnName = "ID")
    private Township township;
} 
```

乡镇.java

```
@Entity
public class Township implements Serializable {
    .....
} 
```

当我生成时，我收到以下错误，

```
Exception [EclipseLink-195] (Eclipse Persistence Services - 2.1.2.v20101206-r8635): org.eclipse.persistence.exceptions.DescriptorException
Exception Description: The shared class org.ace.insurance.system.common.company.CompanyAddress must not reference the isolated class org.ace.insurance.system.common.township.Townsh
ip.
Mapping: org.eclipse.persistence.mappings.OneToOneMapping[township]
Descriptor: RelationalDescriptor(org.ace.insurance.system.common.company.CompanyAddress --> [DatabaseTable(COMPANY)]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T07:03:33.237

如果我理解正确，您希望 Township 成为一个正常的独立实体。在这种情况下，您应该从 CompanyAddress 的 township 字段中删除 @Embedded 注释。如果您希望它被嵌入，那么 Township 将需要一个 @Embeddable 注释而不是 @Entity。

# javascript - Javascript/HTML5 Game dev - 实现一个简单的跳转。第一次工作，而不是之后

> ID：14805650
> 
> 赞同：0
> 
> 时间：2013-02-11T03:54:25.617
> 
> 标签：javascript, html5-canvas

第一次触发时，这就像一个魅力。但在那之后，它只会在每次触发时将 playerYPos 增加 8。我已经尝试了我能想到的一切，但似乎无法弄清楚为什么。

```
var playerYPos = 188;
var playerJumpSpeed = 8;
var playerJumpVelocity = playerJumpSpeed;

function jump(){
    playerYPos -= playerJumpVelocity;

    //Hits top
    if(playerYPos < 40){
        playerJumpVelocity = -playerJumpSpeed;
    }
    if(playerYPos >= 188){
        keyW = false;
    }
} 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:22:33.040

是不是因为`playerJumpVelocity`下次调用函数时变量没有被重置？IE：

```
function jump()
{
    var playerJumpVelocity = playerJumpSpeed;
    playerYPos -= playerJumpVelocity;

    //Hits top
    if(playerYPos < 40){
        playerJumpVelocity = -playerJumpSpeed;
    }
    if(playerYPos >= 188){
        keyW = false;
    }
} 
```

# javascript - 循环从 webmethod 获取的 JSON 成功数据

> ID：14805653
> 
> 赞同：0
> 
> 时间：2013-02-11T03:55:39.287
> 
> 标签：javascript, ajax, vb.net, arraylist, webmethod

我正在尝试使用 ajax 调用来调用 webmethod，如下所示：

```
<script type="text/javascript">
$(document).ready(function () {
   $("#getdetails").click(function () {
       $.ajax({
          type: "POST",
          url: "Default.aspx/Gettext",
          data: JSON.stringify({SampleText: $('#sampletext').val(), FontType: $('#fonttype').val() }),
          contentType: "application/json; charset=utf-8",
          dataType: "json",
          success: function (response) {
          $("#Result").html(response.d);
          }//success
      });//ajax call
   });//button click

  $("#FontLists").change(function () {
  $('#fonttype').val($('#FontLists option:selected').text());
  });
});//document 
```

网络方法：

```
<WebMethod()> _
<ScriptMethod(ResponseFormat:=ResponseFormat.Json)>
Public Shared Function Gettext(ByVal SampleText As String, ByVal FontType As String) As String
    Dim List1 As New ArrayList()
    List1.Add(SampleText)
    List1.Add(FontType)
    For Each Str As String In List1
        Return Str
    Next
End Function 
```

现在的问题是，当我单击按钮时，响应只显示文本而不是选定的字体。但是当我通过在 List1 放置断点看到它时，它显示了我，如下面的屏幕截图所示：

![在此处输入图像描述](../Images/a06025895a5008cea20027f9e5754a1a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T05:17:28.343

我找到了一种方法来做到这一点：

```
 success: function (response) {
           var result1 = (response.d.SampleText), result2 =(response.d.FontType),
           result = "SampleText: " + result1 + " FontType: " + result2;
           $("#Result").html(result);
  } 
```

在此之前我是按照这种[方式](https://stackoverflow.com/questions/14796266/ajax-return-multiple-values/14796275#14796275)实现的

# java - 无法访问tomcat中appbase子文件夹中的文件

> ID：14805657
> 
> 赞同：0
> 
> 时间：2013-02-11T03:56:03.887
> 
> 标签：java, tomcat

我有一个非常简单的 Tomcat Web 应用程序。

此应用程序部署到 ${catalina.home}/webapps/myapp。在 myapp 下有两个文件夹：
1\. WEB-INF - 包含一个包含最少内容的单个 web.xml 文件。
2\. document - 包含一个名为data的文件夹。

我的目标是访问文件夹下的任何文件。

现在我可以毫无问题地访问文件夹下的文件。即`http://hostname:8080/myapp/document/abc.txt`在浏览器中打开将显示文本文件内容。

但是我无法访问document/data下的文件，即`http://hostname:8080/myapp/document/data/xyz.txt`在浏览器中打开会得到404错误。

有没有我错过的配置？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T04:10:05.220

这解决了。我相信问题出在 web.xml 上。我所做的是从 tomcat/webapps/docs/WEB-INF 复制示例 web.xml。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-09T16:38:19.443

我遇到了这个问题，因为我的 URL 模式只包含根目录

我在 web.xml 中改变了这个

```
<servlet-mapping>
  <servlet-name>webdav</servlet-name>
  <url-pattern>/</url-pattern>
</servlet-mapping> 
```

对此

```
<servlet-mapping>
  <servlet-name>webdav</servlet-name>
  <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

（我在 url 模式中的斜杠后添加了一个星号）

# javascript - dust.js - 我可以使用帮助器循环逗号分隔值吗？

> ID：14805659
> 
> 赞同：1
> 
> 时间：2013-02-11T03:56:28.943
> 
> 标签：javascript, dust.js

我是dust.js的新手。

我正在使用的 JSON 对象中的值之一是“foo,bar,baz”。我可以编写一个帮助器来遍历这些值，例如 # 部分吗？还是有另一种方法可以在不预处理 JSON 对象的情况下做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T18:57:48.160

答案是肯定的。作为无逻辑模板引擎，dust.js 处理助手内部的所有逻辑。在您的示例中，只需拆分值，在渲染内容时循环值，然后在函数末尾返回所有内容就足够了。

例子：

```
function($, dust) {
    // helpers object
    var helpers = {
        'h_value' : function(chunk, ctx, bodies, params) {
            var values = ctx.current()
                            .value
                            .split(',');

            for (var i = 0, l = values.length; i < l; i++) {
                chunk.write('<li>'+ values[i] +'</li>');
            }                
        }
    }

    // create a new base context
    // helpers will be part of context now
    var base = dust.makeBase(helpers);

    // this is only an example, you should work with a separate template file    
    var source = '{#sections}<ul>{#h_value}<li>{.}</li>{/h_value}</ul>{/sections}';
    // and template should be compiled on server side (in most cases)
    var compiled = dust.compile(source, 'test');
    dust.loadSource(compiled);

    var sectionsData = {
        sections : [
            { value : 'foo,bar,baz'},
            { value : 'bar,baz,foo'},
            { value : 'baz,foo,bar'}
        ] 
    };

    dust.render('test', base.push(sectionsData), function(err, content) {
        $('body').append(content); 
    });
} 
```

# javascript - Jquery/Json - 我怎样才能得到最后一个 在这个 JSON 对象中？

> ID：14805660
> 
> 赞同：0
> 
> 时间：2013-02-11T03:56:35.090
> 
> 标签：javascript, jquery, json

通常的 .last 或 :last jquery 选择器不适合我。我有一个`content.object`包含 HTML的对象

```
<P>
item 1
</P>
<P>
item 2
</P>
<P>
item 3
</P> 
```

我努力了

```
var lastItem = $(content.object).find('p:last'); 
```

和

```
var lastItem = $(content.object).find('p').last(); 
```

但这些并没有起到作用，我不断收到错误。我怎样才能得到最后的文字

?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T04:00:12.323

find 方法不起作用，因为您已经在与`p tags`

如果您的 JSON 对象看起来像这样

```
var content = {
    object: '<P>item 1</P><P>item 2</P><P>item 3</P>'
}; 
```

您可以像这样访问最后一个 p：

```
var lastItem = $( content.object ).last(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T04:05:01.887

您需要使用[过滤器](http://api.jquery.com/filter/)

```
var lastItem = $(content.object).filter('p:last'); 
```

[.filter](http://api.jquery.com/filter/)：将匹配元素的集合减少为匹配选择器或通过函数测试的元素。 [.find](http://api.jquery.com/find/)：获取当前匹配元素集中每个元素的后代，由选择器、jQuery 对象或元素过滤。

演示：[小提琴](http://jsfiddle.net/arunpjohny/YyKW8/)

# fonts - SVG 字体字形：见过包含路径的吗？

> ID：14805665
> 
> 赞同：0
> 
> 时间：2013-02-11T03:57:03.267
> 
> 标签：fonts, svg, path, glyph

我有一个由程序 potrace 创建的 SVG 文件源，它为多段字符的每个组件创建了一个单独的组件。如果我使用这些相同的 <path> 简单地创建字形定义，则字符将不会显示。如果我将所有路径指令都塞进 <glyph> 的“d=”属性中，字符就会显示出来。

SVG 规范*说*<glyph> 元素是容器，并明确表示它们可以包含 <path> 元素。它只是不起作用（在 Chrome、Opera、Safari 中测试）。

这是我可以简化为的最小示例：

```
<html>
<head>
  <meta charset="utf-8" />
  <title>SVG font test sample04</title>
  <style type="text/css">
     @font-face {
       font-family: 'sample04';
       src: url('sample04.svg#sample04') format('svg');
     }
    .sample04 { font-family: "sample04", verdana, helvetica; }
  </style>
</head>
<body class="sample04"> xE014  | &#xE014; | &#xE015; | </body>
</html> 
```

样本04.svg

```
<?xml version="1.0" encoding="UTF-8" ?>
<svg version="1.1" xmlns = 'http://www.w3.org/2000/svg'>
  <defs>
    <font id="sample04" horiz-adv-x="800">
      <font-face font-family="sample04" />
      <glyph unicode="&#xE014;" horiz-adv-x="800" 
              d="M0,0h200v200h-200z M400,0h200v200h-200z"/>
      <glyph unicode="&#xE015;" horiz-adv-x="800">
        <path d="M0,0h200v200h-200z"/>
        <path d="M400,0h200v200h-200z"/>
      </glyph>
    </font>
  </defs>
</svg> 
```

请注意，这两个字形具有相同的信息，第一个完全包含在 <glyph> d= 属性中，第二个将信息分成两个 <path> 元素。我只尝试了一个 <path> 元素，但没有更好的结果。

那么这只是另一种规格闪闪发光而浏览器不符合要求的情况吗？

注意：我如此关心的原因是我有将近 5000 个这些 SVG 文件要嵌入到字体中，并且真的不想如此深入地进行 XML 转换以转换源...

# linq - Linq & Entityframework，ISNull 并从连接中获取单个值

> ID：14805671
> 
> 赞同：0
> 
> 时间：2013-02-11T03:57:41.100
> 
> 标签：linq, odata, entity-framework-4.3

我正在尝试在 linq 中复制以下 SQL 查询：

```
Select
     l.*,
    ISNULL( i.InterestPercentage,0)
     as InterestPercentage
FROM properties l
LEFT JOIN interest i on i.ListingKey = l.ListingKey
Where i.userId = {0} 
```

目前我真的没什么可做的：

```
var results = from l in context.properties
              join s in context.interest on l.ListingKey equals s.ListingKey
              where s.userId == ""; 
```

这会返回一个完全连接，但我想返回带有单个附加值的属性，即`InterestPercentage`. 我想我可能需要创建一个新对象，它是所有属性列以及一个额外的 InterestPercentage 属性。然后添加`select new MyObject { tons of property setters }`.

此外，虽然我试图通过 Odata 公开这一点，但这样做会失去可查询的能力吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T04:05:27.967

您可以尝试返回

```
new {MainObj = l, InterestPercentage = (your calculated field)} 
```

或者创建一个与上述结构相似的对象。这将帮助您避免所有属性设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T09:41:00.350

当您通过 OData 公开此查询时，您将不得不重写它以不使用联接。OData 不支持连接，但支持扩展，即在单个请求中获取相关集合。为了能够扩展您的 OData 查询，您需要在元数据中定义相应的关系，即，如果您想使用 ListingKey 作为连接字段从 Properties 和 Interest 获取数据，您将需要基于这些表之间的关系在ListingKey（或引用这两个的另一个表）上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T13:18:13.433

您不必*使用*，您可以通过创建自己的显式连接来`join`模拟连接：

```
var results = from prp in context.properties
              from inr in context.interest // cross join

              // your own join phrase
              where inr.ListingKey == (prp.InterestPercentage ?? 0)
                    && inr.userId == ""
              select new { ... }; 
```

# c++ - 唯一的头文件代码：是否有效

> ID：14805674
> 
> 赞同：-1
> 
> 时间：2013-02-11T03:58:06.120
> 
> 标签：c++, syntax, header

我遇到了一个由其他人编写的 C++ 头文件，它有一些我以前从未见过的编码约定。下面的代码在头文件中是否有效，如果有效，这种技术叫什么，为什么要使用它？

```
#if 0
    int test()
        return values = 0
                      = 1

#endif 
```

请注意没有分号，没有大括号，并且在头文件中之前的任何地方都没有定义值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T03:59:40.343

它被称为注释代码。
`#if 0`注释掉后面的所有代码，直到`#endif`遇到 an。

也许有人从一些伪代码开始，然后将其留待将来使用。

好读：
**[#IF ... #ENDIF 预处理器指令](http://msdn.microsoft.com/en-us/library/fyscbeay%28v=vs.80%29.aspx)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T04:01:04.337

这段代码永远不会被执行。`#if 0`说，当*0 为真时，将以下代码块放入最终文件中*。由于 0 始终为 false，因此该代码被有效地注释掉了。

```
int main(){
    #if 0
    lfaksjdf;lakjf;alskdjfa;lsdjf
    #endif
    return 0;
} 
```

是完全合法的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T04:01:26.860

```
#if 0
    anything you want
#endif 
```

'#if 0' 是一种注释代码的方法。它告诉预处理器不要在#if 和#endif 之间包含任何内容。

所以这只是一些伪代码，不需要有效。

# qt - 调用 SOAP 服务时出现“a:InternalServiceFault”错误

> ID：14805679
> 
> 赞同：-2
> 
> 时间：2013-02-11T03:59:37.240
> 
> 标签：qt, soap, blackberry-10, blackberry-cascades

朋友们..

我正在实现 SOAP 网络服务..

我正在使用下面的代码..

```
QtSoapMessage request;
request.setMethod(QtSoapQName("Method_Name", "http://tempuri.org/*****/"));

request.addMethodArgument("key1", "", "value1");
request.addMethodArgument("key2", "", "value2");

QString action ="http://tempuri.org/****/MethodName";

QString host ="host name";
QString prefix ="/****/****.svc"; 
```

我收到如下回复..

```
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xmlns:xsd="http://www.w3.org/1999/XMLSchema">
<SOAP-ENV:Body xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
<SOAP-ENV:Fault xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
<faultcode xsi:type="xsd:string" xmlns:xsi="http://www.w3.org/1999/XMLSchema-instance">a:InternalServiceFault</faultcode> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T14:36:41.227

看起来您应该在 addMethodArgument 中需要 URI。此外，您如何运行请求？这是所有的代码吗？

# java - java else没有if错误

> ID：14805680
> 
> 赞同：0
> 
> 时间：2013-02-11T03:59:37.753
> 
> 标签：java

我已经用java写了这个并且不断得到一个没有if错误的else。我一遍又一遍地检查它，找不到错误。如果他们与程序的其余部分有问题，这真的是一个缺失吗？

```
public class Password {

     public static void main(String[] args) {

        //int Counter = 0;

         String[] UserName = {
            "William Whitcomb" , "Pamela Healy" ,
            "Dennis Clark" , "Troy Bingham" ,
            "Bill Mauler"
         };
        String[] Password = {
            "WWhit0523" , "PHeal0854" ,
            "DClar1053" , "TBing1272" ,
            "BMaul0968"
         };
          String EnterName = JOptionPane.showInputDialog ( "Enter a valid user name.",     //Name pane window
          "User Name");
          String EnterPassword = JOptionPane.showInputDialog ( "Enter a valid password.",       //Age pane window
          "Password");
          for (int Counter = 0; Counter < UserName.length;){
            Validate();
            if (Validate() = true) {
                JOptionPane.showMessageDialog (null, "You entered the User Name of " + UserName[Counter] +
                "and the password of " + Password[Counter]);  //Results pane
                }
            }   //End of for
        }  //End of Method

        Boolean Validate(String EnterName , String EnterPassword){
                Boolean Condition = false;

                    if (EnterName.equals(UserName[Counter])) {
                        if (EnterPassword.equals(Password[Counter])) {
                        Condition = true;
                        return //Condition;
                        } else {
                            JOptionPane.showMessageDialog (null, "You have entered an invalid password.");
                            Counter += 1;
                                }    //End of Inner Else

                    } else {
                        JOptionPane.showMessageDialog (null, "You have entered an invalid user name.");
                        Counter += 1;
                        }  //End of Outer Else
                } //End of outer if
            }  //End of Method
    }   //End of Class 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T04:02:06.597

我认为问题出在这一行：

```
return //Condition; 
```

您不小心将分号注释掉了，随后又引发了一个不相关的解析错误。

在一些相关的说明中，当您的函数返回 a 时`boolean`，您不应将结果与`true`or进行比较`false`。只是写`if (Validate())...`或`if (!Validate())...`代替。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T04:01:01.540

我看到至少一个错误： `Validate() = true`应该是`Validate() == true`. 您正在分配而不是使用比较。

甚至更短，`if(Validate())`也会起作用。

但是错误本身很可能是由于返回后缺少分号造成的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T04:06:04.787

你不需要

```
} //End of outer if 
```

因为你之前已经关闭了它`else`。删除此行。

查看代码的格式化版本

```
Boolean Validate(String EnterName, String EnterPassword) {
    Boolean Condition = false;

    if (EnterName.equals(UserName[Counter])) {
        if (EnterPassword.equals(Password[Counter])) {
            Condition = true;
            return Condition;
        } else {
            JOptionPane.showMessageDialog(null,
                    "You have entered an invalid password.");
            Counter += 1;
        } // End of Inner Else

    } else {
        JOptionPane.showMessageDialog(null,
                "You have entered an invalid user name.");
        Counter += 1;
    } // End of Outer Else
--> } //End of outer if                 <-- You don't want this line
} // End of Method 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T04:08:18.887

以下是您需要更改的内容列表：

*   在你的课结束时你有一个额外的支架。去掉它。
*   您的`Validate`方法正在使用变量`UserName`，`Counter`并且`Password`从未在任何地方声明过
*   您的`Validate`方法有一个`return`不以分号结尾的语句
*   您的 main 方法，在 for 循环中，两次调用`Validate`都没有参数（您需要其中两个）
*   您的主要方法，您的第一次调用`Validate`实际上是一个无操作（您不对返回值做任何事情）。去掉它。

所有这些问题都会被一个中规中矩的 IDE 突出显示。我强烈推荐使用一个。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-11T04:05:47.953

我在方法 validate 中看到了一个额外的 }。我的意思是还有一个 } 在方法 validate() 中。请仔细查看您的代码。请删除它。和 ; return 语句中缺少。该方法应为

```
Boolean Validate(String EnterName , String EnterPassword){
            Boolean Condition = false;
                if (EnterName.equals(UserName[Counter])) 
                {
                    if (EnterPassword.equals(Password[Counter])) 
                    {
                    Condition = true;
                    return;
                    } 
                else 
                    {
                        JOptionPane.showMessageDialog (null, "You have entered an invalid password.");
                        Counter += 1;
                    }    //End of Inner Else

                } // if closed here
                else {
                    JOptionPane.showMessageDialog (null, "You have entered an invalid user name.");
                    Counter += 1;
                    }  //End of Outer Else
        }  //End of Method 
```

# jquery - 一次加载所有数据，但只显示 15 个 - JQGrid

> ID：14805689
> 
> 赞同：0
> 
> 时间：2013-02-11T04:00:17.640
> 
> 标签：jquery, json, jqgrid

是否可以一次加载所有表格内容但每页仅显示 15 个？例如，我的记录总数为 30，但是当我启动并`JqGrid`用数据填充表时`JSON`，它将加载所有 30 行，但在第一页上只显示 15 行，在另一页上显示 15 行。

这个问题背后的原因是当您`multiselect`打开并单击标题复选框时，它只会检查当前页面中的那些，而不会包括其他页面上的那些。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T04:04:59.360

是的，jqGrid 中有属性`loadonce:true`并设置您的`rowNum:15`

# java - 根据 Java 中的预定日期和持续时间检查项目的时间状态

> ID：14805696
> 
> 赞同：0
> 
> 时间：2013-02-11T04:01:04.320
> 
> 标签：java, date, compare

我目前正在做一个项目，其中包括检查项目是否提前或超出了分配的时间。

我从数据库中检索项目的开始日期 (yyyy-MM-dd) 和项目应持续的月数。我还使用检索今天的日期`Calendar.getInstance()`。

我需要的是一种方法来检查今天的日期是否在预计的时间内。

任何帮助将不胜感激！

不要让所有其他不相关的代码让您感到厌烦，这是我正在处理的部分。

```
DateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd");
Calendar cal = Calendar.getInstance();

String today =  dateFormat.format(cal.getTime());
String startdate = project.getStart();
String duration = project.getDur(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T04:09:23.990

So something along the lines of...

```
Calendar cal = Calendar.getInstance();
cal.setTime(startDate);
cal.add(Calendar.MONTH, duration);

Date endDate = cal.getTime();
Date today = new Date();

// You also want to check for today.equals(endDate)
if (today.before(endDate)) {
    // All is good...
} else {
    // PANIC NOW!!
} 
```

Note. This takes into account the time as well...

If the time is not a factor in your calculations, I tend to move it to either the start of the day or end of the day, depending on what your requirements would be...

```
public static Date toEndOfDay(Date date) {

    Calendar cal = Calendar.getInstance();
    cal.setTime(date);
    // Move the time to end of the day...
    cal.set(Calendar.HOUR_OF_DAY, 23);
    cal.set(Calendar.MINUTE, 59);
    cal.set(Calendar.MILLISECOND, 999);

    return cal.getTime();

}

public static void main(String[] args) {

    Calendar cal = Calendar.getInstance();
    cal.setTime(startDate);
    cal.add(Calendar.MONTH, duration);

    Date endDate = toEndOfDay(cal.getTime());
    Date today = toEndOfDay(new Date());

    // You also want to check for today.equals(endDate)
    if (today.before(endDate)) {
        // All is good...
    } else {
        // PANIC NOW!!
    }

} 
```

# recursion - 如何对二叉树进行尾递归？

> ID：14805700
> 
> 赞同：5
> 
> 时间：2013-02-11T04:01:41.683
> 
> 标签：recursion, language-agnostic, binary-tree, tail-recursion

如果你有一棵二叉树，你如何使用尾递归迭代（按顺序使用）它？我知道尾递归涉及您在迭代时计算新值，然后当您到达基本情况时，您只需返回累积值。但是，当您必须调用函数调用两次时，如何为树执行此操作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-11T04:05:41.867

假设深度优先从左到右遍历，您不能将尾递归用于左侧分支，但您可以将其用于右侧分支。

示例方案代码（假设您`tree`具有三个访问器函数`value`、`left`和`right`）：

```
(define (collect-in-order tree)
  (define (collect node result)
    (if node
        (collect (right node)
                 (cons (value node)
                       (collect (left node) result)))
        result))
  (reverse (collect tree '()))) 
```

处于尾部位置，因此这`(collect (right node) ...)`是尾部调用。

您还可以进行从右到左的遍历，在这种情况下，向左下降是尾递归的：

```
(define (collect-in-order tree)
  (let collect ((node tree)
                (result '()))
    (if node
        (collect (left node)
                 (cons (value node)
                       (collect (right node) result)))
        result))) 
```

# c++ - C++ 中的指针/多维数组

> ID：14805701
> 
> 赞同：1
> 
> 时间：2013-02-11T04:01:52.947
> 
> 标签：c++, arrays, pointers

我在理解指针时遇到了一点麻烦。如果我声明了一个多维数组`char ma[10][30]`。元素的地址是什么`"ma[2][20]"`？如果必须将地址分配给指针变量，那不是`"p = &ma[2][20]"`。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T04:03:10.110

`ma[2][20]`is `ma[2] + 20` since的地址`ma`是一个字符数组

或者`p = &(ma[2][20])`- 很确定括号很重要......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T04:05:58.357

多维数组实际上只是一块连续的内存。在这种情况下，数组是一块大小为 10*30 = 300 字节的字符（字节）。编译器通过两个“维度”处理对该数组的访问。

ma[2][20] 的地址是 'ma' + 2*30 + 20 或 'ma+80' 字节的地址。'ma' 是表示数组的内存块的起始地址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T14:50:11.627

在静态数组中，内存分配是连续的。可以通过以下示例进行详细说明 int arr[2][5]= { {1,2,3,4,5}, {6,7,8,9,10}}; cout<

# python - QFile 无法打开包含 unicode 字符的文件名

> ID：14805706
> 
> 赞同：3
> 
> 时间：2013-02-11T04:03:09.387
> 
> 标签：python, qt, pyside

我遇到了 PySide 的问题。我正在处理一些图像，使用`QtCore.QImage`并注意到路径名中包含 unicode 字符的图像文件没有被打开。
所以我开始调查并发现它`QFile`提出了同样的问题。

我试过给它一个'utf8'编码的字节串和一个解码的unicode字符串，同样的区别。
我也尝试使用这些`QFile.encodeName`和`QFile.decodeName`函数，但所做的只是从文件名中删除非 ascii 字符。

我制作了这个脚本来演示：

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

import os

from PySide.QtCore import QFile, QIODevice

try:
    os.makedirs(u'/tmp/qttest')
except:
    pass #probably dir just exists
os.chdir(u'/tmp/qttest')

def make_file(fn):
    f = open(fn, 'w')
    f.close()

def check_file(fn):
    f = QFile(fn)
    f.open(QIODevice.ReadOnly)
    return f.isReadable()    

fna = u'somefile.txt'
fnu = u'einhverskrá.txt'

make_file(fna)
make_file(fnu)

print fna+u' was opened successfully: ', check_file(fna)
print fnu+u' was opened successfully: ', check_file(fnu)

print fna+u' exists: ', os.path.exists(fna)
print fnu+u' exists: ', os.path.exists(fnu) 
```

输出

```
somefile.txt was opened successfully:  True
einhverskrá.txt was opened successfully:  False
somefile.txt exists:  True
einhverskrá.txt exists:  True 
```

有人可以解释一下吗？

**更新** 查看源代码后，我发现`QFile.open()`在unix上总是通过这个函数传递文件名：

```
static QString locale_decode(const QByteArray &f)
{
#if defined(Q_OS_DARWIN)
    // Mac always gives us UTF-8 and decomposed, we want that composed...
    return QString::fromUtf8(f).normalized(QString::NormalizationForm_C);
#elif defined(Q_OS_SYMBIAN)
    return QString::fromUtf8(f);
#else
    return QString::fromLocal8Bit(f);
#endif
} 
```

这总是会导致从字符串中删除 unicode 字符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T16:53:37.850

是的，我相信我已经找到了解决自己问题的方法。

```
from PySide.QtCore import QTextCodec
QTextCodec.setCodecForLocale(QTextCodec.codecForName('UTF-8')) 
```

之后，Unicode 文件名似乎可以正确解析。

我必须看看这个修复是否会对其他平台产生负面影响。

# html - 如何在 Chrome 和 Safari 中指定分页符？

> ID：14805708
> 
> 赞同：4
> 
> 时间：2013-02-11T04:03:15.053
> 
> 标签：html, google-chrome, safari, cross-browser, page-break

我想在我的网站上添加分页符，这样当用户尝试打印页面时，其他元素就不会被切成两半。我试过添加css“page-break-after：always”，但它只适用于Firefox，找不到任何其他解决方案。

有几个类似的问题（一个在这里：[Google Chrome Printing Page Breaks](https://stackoverflow.com/questions/1630819/google-chrome-printing-page-breaks)）但它们已经很老了（2009）并且解决方案不再有效。

有谁知道如何使用当前版本的 Safari 和 Chrome 来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T04:20:01.233

我有一个类似的问题，但我最终找到了解决方案。我有溢出-x：隐藏；应用于标签，所以无论我在 DOM 下面做什么，它都不会允许分页符。通过恢复到溢出-x：可见；它工作得很好。

希望这可以帮助那里的人。

# ruby-on-rails - Google Maps API 文本搜索位置

> ID：14805711
> 
> 赞同：0
> 
> 时间：2013-02-11T04:03:35.160
> 
> 标签：ruby-on-rails, google-maps, geolocation

我在我的屏幕上设置了一个谷歌地图，但我想要的是允许用户输入一个位置，然后将重定向到这个位置。我在以下页面上有一个示例[https://developers.google.com/maps/location-based-apps](https://developers.google.com/maps/location-based-apps)在第一张地图中，您可以在其中输入位置。我目前拥有的代码是这样的，但我找不到有关如何输入文本框以允许使用新位置刷新地图的信息。

```
<script type="text/javascript">

    //Javascript used to add Elements to the maps
    // Arguments latitude, longitude, name
    function addMarkersToMap(eventTitle,eventLongitude,eventLatitude)
    {
        markers.push({ lat: eventLatitude, lng: eventLongitude, name: eventTitle });
    }

    function initialize() 
    {
        // Create the map
        var lat, lon, myOptions;
        if(navigator.geolocation)
        {
            navigator.geolocation.getCurrentPosition(function(position)
            {           
                lat = <%= @event.latitude %>;
                lon = <%= @event.longitude %>;
                myOptions = 
                {
                    center: new google.maps.LatLng(lat, lon),
                    zoom: 12,
                    mapTypeId: google.maps.MapTypeId.ROADMAP
                };
                var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

                // Create the markers ad infowindows.
                for (index in markers) addMarker(markers[index]);
                function addMarker(data) 
                {
                    // Create the marker
                    var marker = new google.maps.Marker(
                    {
                        position: new google.maps.LatLng(data.lat, data.lng),
                        map: map,
                        title: data.name
                    });

                    // Create the infowindow with two DIV placeholders
                    // One for a text string, the other for the StreetView panorama.
                    var content = document.createElement("DIV");
                    var title = document.createElement("DIV");
                    title.innerHTML = data.name;
                    content.appendChild(title);
                    var streetview = document.createElement("DIV");
                    streetview.style.width = "200px";
                    streetview.style.height = "200px";
                    content.appendChild(streetview);
                    var infowindow = new google.maps.InfoWindow(
                    {
                        content: content
                    });

                    // Open the infowindow on marker click
                    google.maps.event.addListener(marker, "click", function() 
                    {
                        infowindow.open(map, marker);
                    });

                    // Handle the DOM ready event to create the StreetView panorama
                    // as it can only be created once the DIV inside the infowindow is loaded in the DOM.
                    google.maps.event.addListenerOnce(infowindow, "domready", function() 
                    {
                        var panorama = new google.maps.StreetViewPanorama(streetview, 
                        {
                            navigationControl: false,
                            enableCloseButton: false,
                            addressControl: false,
                            linksControl: false,
                            visible: true,
                            position: marker.getPosition()
                        });
                    });
                }
            },
            function(error)
            {
                alert('Error: An error occur while fetching information from the Google API');
            });
        }
        else 
        {
            alert("Your browser doesn't support geolocations, please consider downloading Google Chrome");
        }
    }

</script>

<div id="map_canvas" style="width:100%; height:400px"></div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T21:41:30.350

您正在寻找的是[**地理编码**](https://developers.google.com/maps/documentation/javascript/geocoding)而不是**地理定位。**

下面的函数`findLocation()`使用地理编码从 textbox 中查找位置`address`。它在接受的答案中使用 API**版本 3**，而不是**V2 。**[**Maps API 的第 2 版**](https://developers.google.com/maps/documentation/javascript/v2/)已弃用，仅在 2013 年 5 月 19 日之前提供保修，不应在新应用程序中使用。

```
function findLocation() {
    var address = document.getElementById('address').value;
    geocoder.geocode( { 'address': address}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        map.setCenter(results[0].geometry.location);
        var marker = new google.maps.Marker({
            map: map,
            position: results[0].geometry.location
        });
      } else {
        alert('Location not found: ' + status);
      }
    });
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T06:21:42.963

你可以试试这样...

```
<html>
<head>
    <title>Google Maps API Example: Simple Geocoding</title>
<script src="http://maps.google.com/maps?file=api&amp;v=2&amp;key=ABQIAAAAjU0EJWnWPMv7oQ-jjS7dYxSPW5CJgpdgO_s4yyMovOaVh_KvvhSfpvagV18eOyDWu7VytS6Bi1CWxw"
  type="text/javascript"></script>
<script type="text/javascript">

var map = null;
var geocoder = null;

function initialize() {
  if (GBrowserIsCompatible()) {
    map = new GMap2(document.getElementById("map_canvas"));
    map.setCenter(new GLatLng(17.445824,78.377395), 1);
    map.setUIToDefault();
    geocoder = new GClientGeocoder();
  }
}

function showAddress(address) {
  if (geocoder) {
    geocoder.getLatLng(
      address,
      function(point) {
        if (!point) {
          alert(address + " not found");
        } else {
          map.setCenter(point, 15);
          var marker = new GMarker(point, {draggable: true});
          map.addOverlay(marker);
          GEvent.addListener(marker, "dragend", function() {
            marker.openInfoWindowHtml(marker.getLatLng().toUrlValue(6));
          });
          GEvent.addListener(marker, "click", function() {
            marker.openInfoWindowHtml(marker.getLatLng().toUrlValue(6));
          });
      GEvent.trigger(marker, "click");
        }
      }
    );
 }
}
</script>
</head>

<body onload="initialize()" onunload="GUnload()">
<form action="#" onsubmit="showAddress(this.address.value); return false">

  <p>
    <input type="text" style="width:350px" name="address" value="hitech city,         Hyderabad"/>
    <input type="submit" value="Search" />
  </p>
  <div id="map_canvas" style="width: 600px; height: 400px"></div>
</form>

</body>
</html> 
```

相应地进行更改..///

# nav - 100% 水平导航菜单

> ID：14805718
> 
> 赞同：0
> 
> 时间：2013-02-11T04:04:33.243
> 
> 标签：nav

我试过使用：

```
.main-navigation ul {display:table; width:100%;} 
.main-navigation li {display:table-cell;} 
```

在我的网站上：[http](http://ranchocordovaeventscenter.com/) ://ranchocordovaeventscenter.com/使用 WordPress。

当我对网站进行这些更改时，菜单不会伸展。当我将 li 更改为 table-cell 时，它会删除子菜单上的块样式。

有什么建议可以帮助我让导航菜单扩展到整个网站的宽度吗？

我现在已经恢复到链接上的原始填充。

提前致谢！马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T04:12:30.307

```
#menu-main-navigation { display: table !important; }
#menu-main-navigation ul { display: table-cell; }
#menu-main-navigation a { display: block; text-align: center; } 
```

I just applied this CSS to your website and it worked fine for me

# javascript - ToLowerCase if 语句不起作用？

> ID：14805719
> 
> 赞同：0
> 
> 时间：2013-02-11T04:04:37.050
> 
> 标签：javascript, html

好的，所以除了我的 toLowerCase 之外，我得到了所有这些工作。它不起作用，因此如果区分大小写，它将不会拆分。我正在使用下拉框来选择我的分隔符。

已经发布了js代码来帮助大家指出问题。我仔细检查了它，但我认为它需要一双新的眼睛。

```
window.onload = function()  { 
document.getElementById("change").onclick = function () {
var paragraph = document.getElementById('box').value;
var x = document.getElementById("changeCase");
var getInfo = document.getElementById('ParaWrite');
var LowerCase = " ";
var LowerCase2 = " ";
var splitAT = " ";
var options = document.getElementById("split").value;
alert("above the for loop");

if (x.checked === true)
{
    LowerCase = paragraph.toLowerCase();
} 
else 
{
    LowerCase = paragraph;
}

for (var i = 0; i < document.form1.split.options.length; i++)
{
    if (document.form1.split.options[i].selected === true)
    {
        splitAT = paragraph.split(options);
        alert("splitAT[" + i + "]=" + splitAT[i]);

    }
}
console.log(document.form1.split.options);
document.write(splitAT +" " +splitAT.length);
} 
```

HTML 代码

```
<!doctype html>
<html>
<head>
<meta charset="utf-8">

<title>Paragraph</title>

<link rel="stylesheet" href="normalize.css">
<link rel="stylesheet" href="Textbox.css">

</head>

<body>
<h1>Please enter some Text</h1>
<form name="form1" id="form1">

<textarea type="text" id="box" value=""/></textarea>
<label for="write">Case Sensitive checkbox</label>
<input type='checkbox' name='write' id='changeCase' value='Check'/><br>

<input  type='button' value="Count" id="change"/>
<select name="split" id="split">
        <option value="like">like</option>
        <option value="monkey">monkey</option>
        <option value="I">I</option>
        <option value=".">.</option>
        <option value=",">,</option>
        <option value="?">?</option>
        <option value=" ">[Space]</option>
    </select>    
</form>
<div id="ParaWrite">
</div>
<script type="text/javascript" src="die.js"></script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T04:19:20.703

我会尝试

```
If (x.checked) 
```

避免 === true，以防它不是纯布尔值

或检查值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T05:14:13.013

一些评论：

```
> <!doctype html> 
```

字符串[“doctype”](http://www.w3.org/QA/2002/04/valid-dtd-list.html) **必须**是大写才能达到预期的效果：

```
<!DOCTYPE html>

> <form name="form1" id="form1"> 
```

如果表单有 ID，则不需要名称。您可以使用集合访问表单`forms`（就像您在一个地方一样）：

```
var theForm = document.forms.form1; 
```

然后访问所有表单控件作为表单的命名属性。

```
> <textarea type="text" id="box" value=""/></textarea> 
```

Textarea 元素没有类型或值属性，它们的值就是它们的内容。您不能将 SHORTAG 语法用于**必须**具有结束标记的元素，并且如果 DOCTYPE 是 HTML，则不要将它们用于没有内容的元素。此外，表单控件必须有一个名称才能成功。如果他们有名字并且在表格中，他们不需要 ID：

```
<textarea type="text" name="box" value=""></textarea> 
```

你在哪里：

```
> <input type='checkbox' name='write' id='changeCase' value='Check'> 
```

让表单控件的 name 和 id 属性具有不同的值并不是一个好主意。最好只使用名称（并且不要在 HTML 文档中使用 XML 语法）：

```
<input type='checkbox' name='write' value='Check'> 
```

还：

```
> document.write(splitAT +" " +splitAT.length); 
```

这将擦除整个文档（包括所有头部和脚本内容）并将其替换为 document.write 的参数。你真的想这样做吗？

您的代码还有许多其他问题，也许您应该直接说出您想要它做什么，然后您可能会获得更多帮助。

### 编辑

工作代码：

```
<script>
  window.onload = function()  { 
    var form = document.forms.form1;

    form.change.onclick = function () {
      var paragraph = form.box.value;
      var getInfo = document.getElementById('ParaWrite');
      var splitAt = form.split.value;

      if (form.write.checked) {
         paragraph = paragraph.toLowerCase();
      }

      getInfo.innerHTML = paragraph.split(splitAt) + '<br>' +
                          paragraph.split(splitAt).length;
    }
  }
</script>

<form name="form1">
  <textarea name="box"></textarea>
  <label for="write">Make lower case</label>
  <input type='checkbox' name='write' id="write" value='Check'><br>
  <input  type='button' value="Count" name="change">
  <select name="split">
        <option value="like">like</option>
        <option value="monkey">monkey</option>
        <option value="I">I</option>
        <option value=".">.</option>
        <option value=",">,</option>
        <option value="?">?</option>
        <option value=" ">[Space]</option>
  </select>    
</form>
<div id="ParaWrite"></div> 
```

# php - 登录后的警告框，表中插入了一条新记录

> ID：14805721
> 
> 赞同：1
> 
> 时间：2013-02-11T04:04:46.033
> 
> 标签：php, mysql

我正在研究这个员工管理系统及其休假系统功能。一旦员工提出请假请求，并且当管理员登录 EMS 时，他将被提醒有新的请假请求。

那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T04:19:44.247

管理员登录后，您需要调用 ajax 函数来检查是否添加了新的休假条目。示例代码如下。

```
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript">

    (function($)
    {
        $.ajax(
        {
            url         : 'server.php',
            dataType    : 'json',
            beforeSend  : function()
            {
                // show loading or else
            },
            success     : function(response)
            {
                if(response)
                {
                    // display it in right side div.
                }
            }
        });
    });

</script>
```

**服务器.php**

```
<?php
    //database connections

    $query = mysqli_query("select * from leave_table where status = 0")or die(mysqli_error());
    //status 0 to check if entry is previously seen or not. 
    $response = array();

    while($row = mysql_fetch_assoc($query))
    {
        $response = $row;
    }
    echo json_encode($response);
    exit;
?>
```

为了每次检查新条目，您需要做的就是将 ajax 调用作为函数并 setInterval 以根据需要调用该函数的秒数。

看看[SetInterval](http://www.w3schools.com/jsref/met_win_setinterval.asp)

另一种选择是使用**COMET AJAX**。

随时问。

# python - 从 mongo 数组中删除空元素

> ID：14805724
> 
> 赞同：8
> 
> 时间：2013-02-11T04:05:00.573
> 
> 标签：python, arrays, mongodb, pymongo

```
{
        "_id" : 160,
        "info" : [
            {
                'name': 'Serg',
                'proff': 'hacker'
            },
            null,
        ]
    } 
```

如您所见，我的数组中有空元素，我需要一个通用的解决方案来从 info 数组中删除空元素。

我试过这个：

```
for doc in iter:
    people.update({ '_id' : doc['_id']}, { '$pull' : { 'info' : 'null' }}) 
```

where`iter`是文档的集合。并且`people`是一个集合

我也在shell中试过这个：

```
> db.people.findAndModify({ query: {}, update: {'$pull': {info:null} } } ) 
```

但是以上示例都没有从我的文档中删除这个 null ！！))

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-11T04:34:37.803

这应该适合你。在 python 中，null 被称为 None。

```
 for doc in iter:
        people.update({'_id':doc[id]},{'$pull':{'info':None}}) 
```

[Python中的空对象？](https://stackoverflow.com/questions/3289601/nulls-object-in-python)

同样在 mongo shell 中，这应该可以解决：

```
 db.people.update({_id:160},{$pull:{info:null}}) 
```

如果您希望更新运算符一次更新多个文档，即从多个文档中提取空值，那么您必须提供 multi:true 选项。因为默认情况下，如果查询arguemnt 留空，即{} 并且未提供mulit:true，则更新运算符将处理它找到的第一个文档

```
 db.people.update({},{$pull:{info:null}},{multi:true}) 
```

# gwt - 使用 gwt 进行简单对齐

> ID：14805726
> 
> 赞同：0
> 
> 时间：2013-02-11T04:05:21.660
> 
> 标签：gwt, uibinder, gwt2

![水平面板和两个选择项](../Images/50fa537a0a4d4e4fb7fff167b9b9c97e.png)

图像中是一个**水平面板，其中有两个垂直面板**，

> 应用程序标签和选择项

下面是一个垂直面板和

> 环境和选择项

下面是另一个垂直面板，它被添加到水平面板，我想要两个垂直面板之间的间隙我尝试设置间距它不起作用请帮助，提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T04:29:03.143

将面板的宽度设置为比文本框的宽度更宽。

# objective-c - Objective-C 代码解释

> ID：14805727
> 
> 赞同：-1
> 
> 时间：2013-02-11T04:05:22.293
> 
> 标签：objective-c

任何人都可以帮助解释为什么如果遵循 if 我不能拥有 else 吗？错误是说预期的表达，但我不知道这意味着什么

// 将变量声明为整数 int account, depAmount, withAmount;

```
 Account *Account1=[[Account alloc] init];

    // Prompt user to input account number
    NSLog(@"Please input your account number here: ");
    scanf("%i", &account); // Accept user input

    if (account==1000)
        NSLog(@"How much do you want to deposit: ");
        scanf("%i", &depAmount);

        [Account1 setaccountNumber: account];
        [Account1 setbegBalance: 900.50];
        [Account1 addDeposit: depAmount];

        NSLog(@"How much do you want to withdrawl: ");
        scanf("%i", &withAmount);
        [Account1 setnewbegBalance: 900.50 + depAmount];
        [Account1 subtractWithdrawal: withAmount];

    NSLog(@"Your account number is: %i\nBeginning balance: %f\nNew balance is: %f", [Account1 accountNumber], [Account1 begBalance], [Account1 newBalance]);

    else if (account==2000)
        NSLog(@"How much do you want to deposit: ");
        scanf("%i", &depAmount);

        [Account1 setaccountNumber: account];
        [Account1 setbegBalance: 700.75];
        [Account1 addDeposit: depAmount];

        NSLog(@"Your account number is: %i\nBeginning balance: %f\nNew balance is: %f", [Account1 accountNumber], [Account1 begBalance], [Account1 newBalance]);

    else if (account==3000)
        NSLog(@"How much do you want to deposit: ");
        scanf("%i", &depAmount); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T04:08:39.587

您需要花括号来表示要作为 if 条件的一部分执行的指令。如果没有大括号，则只会执行 if 语句后面的 1 语句。所以添加这样的花括号：

```
if (account==1000)
{
    NSLog(@"How much do you want to deposit: ");
    scanf("%i", &depAmount);

    [Account1 setaccountNumber: account];
    [Account1 setbegBalance: 900.50];
    [Account1 addDeposit: depAmount];

    NSLog(@"How much do you want to withdrawl: ");
    scanf("%i", &withAmount);
    [Account1 setnewbegBalance: 900.50 + depAmount];
    [Account1 subtractWithdrawal: withAmount];

NSLog(@"Your account number is: %i\nBeginning balance: %f\nNew balance is: %f", [Account1 accountNumber], [Account1 begBalance], [Account1 newBalance]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T04:06:43.473

您在 . 块周围缺少花括号`if`。当一个块中有多个语句时，*必须*在所有语句周围加上花括号。与 Python 等其他一些编程语言不同，Objective C 中的缩进是微不足道的。相关块中的所有语句分组都由花括号完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T04:25:40.847

在一个`if`和`else`之间应该只有一个语句。

你的**`one statement`可以是

A.) 单个语句，例如`a = b;`
B.) 分组在一个块中的多个语句。

```
{
    a = b;
    b = 20;
} 
```

# c - C - 如果最大长度大于 50，则返回变量始终为空

> ID：14805732
> 
> 赞同：0
> 
> 时间：2013-02-11T04:05:49.370
> 
> 标签：c, return-value, fgets

我真的被这个难住了。

我在 c 中编写了一个简单的程序，用于从用户键盘输入中检索名字、姓氏和 YOB（出生年份）（我还没有时间将年龄解析为整数）并且我设置了最大字符数为输入。

但是，每当我允许字段的最大字符数为 50 或更大时，返回值始终为空白。

这是代码（60 行），输出如下。引起问题的函数是倒数第二个函数getInputNoNewLine：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

void flushBuffer();
char *getInput(int max, char message[]);
char *getInputNoNewline(int max, char message[]);

typedef struct Person {
    char *firstName;
    char *lastName;
    int yob;
} Person;

void flushBuffer() {
    int ch; 
    while ((ch = getchar()) != '\n' && ch != EOF); //flush the input buffer
}

char *getInput(int max, char message[]) {
    char in[max];
    char *input;
    do {
        printf("%s", message);
        input = fgets(in, max + 2, stdin); //max + 2 accounts for characters fgets adds
        if (input[strlen(input)-1] != '\n') {
            printf("Sorry, maximum %d characters\n", (max));
            flushBuffer();
        }
    } while (input[(strlen(input)-1)] != '\n');
    printf("input: %s", input); //debug
    return input;
}

//OFFENDING FUNCTION
char *getInputNoNewline(int max, char message[]) {
    char *input;
    input = getInput(max, message);
    printf("raw input : %s", input); //debug
    if (input[strlen(input) - 1] == '\n') { //strip new line character
        input[strlen(input) - 1] = '\0';
    }
    printf("final input: '%s'\n", input); //debug
    return input;
}

int main(int argc, char *argv[]) {
    int numPlayers = 3;
    char *intIn;
    int i = 0;
    Person players[numPlayers]; 
    printf("Hello world Game\n");
    for (i = 0; i < numPlayers; ++i) {
        players[i].firstName = getInputNoNewline(50, "What is your first name: "); //50 will return blank
        players[i].lastName = getInputNoNewline(49, "What is your last name: "); //49 will return fine
        intIn = getInputNoNewline(4, "What is your YOB: "); //TODO: convert number to integer with sscanf
        printf("-----------------------------------\n");
    }
    printf("Finished\n");
    return 0;
} 
```

这是输出，您可以看到 jim 的第一个输入是从 fgets 接收的，但返回值为空白（原始输入：）。如果我要将最大值从 50 减少到 49，根据姓氏字段的情况，它工作得很好。有什么想法吗？

```
Hello world Game
What is your first name: jim
input: jim
raw input : final input: ''
What is your last name: smith
input: smith
raw input : smith
final input: 'smith'
What is your YOB: 1984
input: 1984
raw input : 1984
final input: '1984'
----------------------------------- 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T04:07:45.923

您的代码具有**未定义的行为**。
您正在返回一个指向本地分配数组的指针。

```
char *getInput(int max, char message[])
{
    char in[max];
    ....
    ....
    return input;
} 
```

`in`是函数局部的数组，并且保证仅在函数作用域之前有效`{``}`。为了能够在函数范围之外访问此数组的内容，您需要通过以下方式增加数组的生命周期：

*   `malloc`使用或动态分配它
*   使其`static`或全球

如果您使用`malloc`，请不要忘记在使用后通过调用释放数组，`free`否则最终会导致内存泄漏。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T04:08:27.813

既然你分配`in`了 50 个字符的长度，而你允许读取 52 个字符，你就会遇到麻烦！你想用

```
static char* in;
if(in!=NULL) free(in);
in = (char*)malloc(max + 2); 
```

这既解决了 Alok 提出的问题（关于函数返回后未定义本地范围指针），也解决了您的函数允许`fgets`将`max+2`字符写入缓冲区的事实`in`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T04:13:07.870

您遇到了许多内存管理问题。fgets 调用请求崩溃，因为您传递的长度比分配的内存大 2 个字节。您还将返回从 fgets 返回的 char * 并将其视为分配的内存。

您应该复制从 fgets 返回的缓冲区并将其存储在您的 Person 结构中。

真的，我认为你应该回顾一下基本的 C 内存分配和销毁。

# android-broadcast - 调度随机活动或服务

> ID：14805736
> 
> 赞同：1
> 
> 时间：2013-02-11T04:06:27.890
> 
> 标签：android-broadcast

我正在尝试创建一个执行特定任务的服务，为了简单起见，我们假设一个简单的 Toast 消息，然后安排自己在未来的随机时间再次运行。

我正在使用具有时间延迟的警报管理器来运行服务的第一个实例。然后，该服务为广播设置一个新警报，该警报将触发该服务再次运行。

我采取的方法如下：

1.  主活动设置警报以指定时间间隔运行广播
2.  接收到广播并设置新警报以再次运行广播，然后运行所需的服务。
3.  所需服务完成任务并自行关闭。

有人可以就这是否可行的方法提供建议吗？

我似乎无法收到广播。

我已经在我的清单文件中注册了接收器：

任何建议将不胜感激。

```
public class MainActivity extends Activity 
{
    protected void onCreate(Bundle savedInstanceState) 
        {
             CustomAlarmManager am = new CustomAlarmManager(context);
             am.setNextSchedule((long) StaticMethod.getRandomTimeDelay());
        }
}
public class CustomAlarmManager extends Activity 
{
     public CustomAlarmManager(Context context) 
     {
          alarmMngr = (AlarmManager)context.getSystemService(Context.ALARM_SERVICE);
          intent = new Intent(context, CustomReceiver.class);
          pendingIntent = PendingIntent.getBroadcast(context, 0, intent, 0);
     }
     setNextSchedule(long timeDelay)
     {
          alarmMngr.set(AlarmManager.RTC_WAKEUP, timeDelay, pendingIntent);
     }
}

public class CustomReceiver extends BroadcastReceiver 
{
     @Override
    public void onReceive(Context context, Intent intent)    
        {
             Intent i = new Intent(context, CustomService.class);
             CustomAlarmManager am = new CustomAlarmManager(context);
             am.setNextSchedule((long) getRandomTimeDelay());   
             context.startService(i);
        }
}

public class CustomService extends Service 
{
     @Override
    public int onStartCommand(final Intent intent, int flags, int startId) 
        {
             displayToastMessage();
             stopService(intent);
        }
}
Manifest File:
<receiver android:name="packageName.CustomReceiver" android:enabled="true"> 
```

# mysql - Cronjob 或 MySQL 事件？

> ID：14805742
> 
> 赞同：30
> 
> 时间：2013-02-11T04:07:36.503
> 
> 标签：mysql, cron, mysql-event

我必须每小时更新一次 MySQL 数据库，我想知道使用 cronjob VS MySQL 事件的优点/缺点是什么？例如，哪个更快？哪个更安全？谢谢！

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-11T04:13:32.977

我总是会去做 cron 工作，因为：

*   这就是系统管理员所期望的（这一点不容小觑）
*   crontab 是防弹的、经过时间考验的、被广泛使用和理解的
*   您可以自由地在您想要的地方直接/分析错误/成功消息
*   一些数据库任务需要/更喜欢 mysql 离线（例如完全备份），所以你必须使用 cron 来完成这些任务 - 使用 cron 完成一些任务而使用 mysql 完成一些任务是个坏主意；你会不确定在哪里看
*   如果你有一个 shell 脚本，你可以链接其他应该遵循的事件

最后，仅仅因为你*可以*做某事，并不意味着这是一个好主意。Mysql擅长数据的东西。不要将它用于“外壳”的东西。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-02-11T04:58:22.290

MySQL Event Scheduler – 一个很好的 cron 替代品。

我们都知道 cron，这是一种安排某些进程的简单方法，例如每周截断 MySQL 数据库中的日志表。

在 MySQL 5.1 中，MySQL 的人引入了一个很酷的新特性：MySQL 事件调度器！

使用 Event Scheduler，您可以安排要在数据库上执行的任务。这对于无法在其网站空间上创建 cron 作业的 Web 开发人员来说非常有用，因为他们的主机不会让他们这样做！它确实是 cron 的绝佳替代品！

几个例子：

您想每周截断您的应用程序日志表，这就是您的事件时间表应该是这样的：

```
CREATE EVENT PurgeLogTable
ON SCHEDULE EVERY 1 WEEK
DO
BEGIN
DELETE FROM `logs` WHERE `LogTime` <= DATE_SUB(CURRENT_TIMESTAMP,INTERVAL 1 WEEK);
INSERT INTO `audit` (`AuditDate`, `Message`) VALUES(NOW(), "Log table purged succesfully!");
END 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-11-04T13:58:28.773

Mysql 引入了 Event scheduler，我们可以使用它来替代 Cronjob。与 cronjob 相比有许多优点，例如：

1）直接写在Mysql Server上。

2）这是平台无关的。您的应用程序可以用任何无关紧要的语言编写。你只需要知道mysql。

3) 我们可以在需要定期更新或清理数据库时使用它们。

4) 无需每次都编译查询，从而提高性能。

5）错误可以登录日志文件。句法：

```
DELIMITER //
CREATE EVENT eventName
ON SCHEDULE EVERY 1 WEEK
STARTS 'Some Date to start'
ENDS 'End date If any' 

DO
BEGIN
   // Your query will be here
END//
DELIMITER ; 
```

欲了解更多信息，您可以访问官方网站：[http ://dev.mysql.com/doc/refman/5.1/en/create-event.html](http://dev.mysql.com/doc/refman/5.1/en/create-event.html)

详细博客：http: [//goo.gl/6Hzjvg](http://goo.gl/6Hzjvg)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-11T08:04:00.363

我将使用 mysql 事件计划

因为我们不必为它编写一个额外的文件，我们的目的可以通过编写一个查询来实现。

如果只需要数据库相关操作，那么 mysql 事件调度是不错的选择。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-13T12:46:02.890

Mysql 事件调度程序对于共享主机环境具有优势。在时间上，也可以排到秒。与 cron 不同，它是按分钟计算的 - 但是您可以解决这个限制。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-02-21T09:23:24.570

我自己现在正在与 EVENTs 合作并思考同样的问题:)

除了以上答案：

*   如果任务纯粹以数据为中心，或者补充已经构建到数据库中的功能，请使用 EVENT。您可能已经有清理数据、记录某些事件、聚合某些数据等的触发器。如果您要执行的计划任务是现有设计的一部分，那么从 EVENT 触发任务更具凝聚力。毕竟，事件是*时间触发器*。

*   如果从 shell 运行脚本，则需要将用户名/密码存储在 shell 脚本或默认文件中。要执行 EVENT，创建 EVENT 后不需要用户名/密码。

*   IMCO，您应该在存储过程中编写逻辑；然后从 EVENT 或从 shell 脚本调用该过程，无论哪种方式最适合您。您甚至可以在您的 UI 中构建一些地方，使用户能够手动调用该过程。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-08-25T04:04:24.200

这是一个由来已久的问题，但我想使用 mysql 事件的一个优点是它直接嵌入在 dbms 中，因此它不需要创建/维护连接，例如，如果您使用 php 作为主要语言，您也可以考虑这个原因是您在能够运行语句之前消除了在创建与数据库的连接时进行验证的必要性，并且您可以使用可以执行维护脚本的角色创建事件并将用户角色分配给不这样做的应用程序将为您提供安全性，您知道用户只有这种角色才能访问，因此决定是使用事件还是 cron 作业取决于您所使用的系统。但是要注意的另一件事是同一事件的多次触发，特别是如果间隔只是一个差异，就像每 5-10 秒等一样，只是几秒钟的问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-03-25T22:48:21.490

我刚刚花了几个小时阅读 Event Scheduler 文档，我刚刚用它来创建一个应该每天重复的事件。

我实际上对它非常满意，并且我认为与 Cronjob 相比，它是一个更好的选择，至少因为您不需要使用外部脚本。

在性能方面，我敢打赌，这是一个更好的选择。

# dll - 使用 MinGW 编译 assimp

> ID：14805745
> 
> 赞同：1
> 
> 时间：2013-02-11T04:07:48.530
> 
> 标签：dll, compilation, mingw, .a

我用 MinGW编译了[assimp ，最后得到了](http://assimp.sourceforge.net/)

1.  21mb`libassimp.dll`
2.  42mb`libassimp.dll.a`

有没有人这样做过？为什么我最终会得到这么大的文件？我对比了[VS编译版](http://sourceforge.net/projects/assimp/files/assimp-3.0/assimp--3.0.1270-full.zip/download)，都比较小~2mb。

# java - 框架不会显示我的面板

> ID：14805746
> 
> 赞同：0
> 
> 时间：2013-02-11T04:07:55.457
> 
> 标签：java, swing, jframe, jpanel

我无法在我创建的框架类上显示我的面板类。这是我的面板和框架

```
public class PasswordCheckerPanel extends JPanel 
{
    private String string;
    private JButton B1, B2, B3;
    private JLabel Rules, L1, L2, L3, Type, Retype;
    private JTextField TF1, TF2;
    private ArrayList<String> AR1 = new ArrayList<String>();
    private ArrayList<String> AR2 = new ArrayList<String>();
    private JFileChooser Input, Output;

    public PasswordCheckerPanel()
    {
        this.setLayout(new BoxLayout(this, BoxLayout.Y_AXIS));
        JPanel Panel1 = new JPanel();
        TitledBorder Titled1 = BorderFactory.createTitledBorder("Password Checker Rules");
        Rules = new JLabel();
        Rules.setText("Use the following rules when creating your passwords");
        L1= new JLabel();
        L1.setText("1\. Length must be greater than 6.");
        L2 = new JLabel();
        L2.setText("2\. Must contain atleast one alpha character");
        L3 = new JLabel();
        L3.setText("3\. Must contain atleast one numeric character");
        Panel1.setBorder(Titled1);
        Panel1.add(Rules);
        Panel1.add(L1);
        Panel1.add(L2);
        Panel1.add(L3);
        add(Panel1);

        JPanel Panel2 = new JPanel();
        Type = new JLabel();
        Type.setText("Password: ");
        Retype = new JLabel();
        Retype.setText("Re-Type Password: ");
        TF1 = new JTextField(20);
        TF2 = new JTextField(20);
        Panel2.add(Type);
        Panel2.add(TF1);
        Panel2.add(Retype);
        Panel2.add(TF2);

        add(Panel2);

        JPanel Panel3 = new JPanel();
        B1.setMnemonic('c');
        B1.setText("Check Password");
        B1.setToolTipText("Check Password");
        B1.addActionListener(new ButtonListener());

        B2.setMnemonic('f');
        B2.setText("Check Password in File");
        B2.setToolTipText("Check Password in File");
        B2.addActionListener(new ButtonListener());

        B3.setMnemonic('e');
        B3.setText("Exit");
        B3.setToolTipText("Exit");
        B3.addActionListener(new ButtonListener());

        Panel3.add(B1);
        Panel3.add(B2);
        Panel3.add(B3);

        add(Panel3);

    }

} 
```

这是我的框架

```
public class PasswordCheckerFrame extends JFrame
{
    private PasswordCheckerPanel Panel = new PasswordCheckerPanel(); // Creates a PasswordCheckerPanel object

    public PasswordCheckerFrame() // PasswordCheckerFrame Constructor
    {

            JFrame WindowBox = new JFrame(); // Creates a new JFrame

            WindowBox.setTitle("Password Checker"); // sets JFrame title
            WindowBox.setSize(500, 500); // sets JFrame size
            WindowBox.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); // sets the operation as to what happens when you close the gui
            WindowBox.add(Panel); // adds the Panel to the JFrame
            WindowBox.pack(); // Packs for size refitting
            WindowBox.setVisible(true); // sets visibility of the Frame

        }
        public static void main(String[] args)
        {
            new PasswordCheckerFrame(); // creates an instance of the PasswordCheckerFrame class
        }

    } 
```

你能指出我可能犯的任何错误吗？我不断得到一个 J 单元测试版本，所以真的很难找出我做错了什么。是代码还是其他？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T04:38:13.913

首先使用正确的 Java 变量命名约定。变量名不以大写字符开头。只有类名以大写字符开头，因此您的代码难以阅读。看起来您正在调用一个类的静态方法。

现在，对于您的问题：

```
private JButton B1, B2, B3; 
```

您永远不会创建按钮，因此这些变量为空。

编辑：

我刚刚向您发布的代码添加了 3 行代码（并删除了动作侦听器）并且代码运行良好，所以我不确定您在做什么。

```
B1 = new JButton("B1"); // added the creation of the button   
B1.setMnemonic('c'); 
```

# javascript - 显示：无；不在CSS中工作

> ID：14805749
> 
> 赞同：0
> 
> 时间：2013-02-11T04:08:13.913
> 
> 标签：javascript, css

嗨，我在下面使用这个脚本。

```
<script>
$(document).ready(function() {

    $(".btn-slide").hover(function() {
        $("#panel").slideDown(500);
    });

    $("#loginstuff").mouseleave(function() {
        $("#panel").slideUp(500);
    });
});
</script> 
```

当您将鼠标悬停在链接上时，它会创建一个框。

现在的 CSS 是这样的：

```
#panel {
    display:none;
    margin:80px 0 0 0;
    width:180px;
    background:#000;
    border-radius:5px;
    padding:7px;
    color:#fff;
    font-family:arial;
    font-size:11px;
    display:block;
    word-spacing: 0px;
    z-index:9999;
} 
```

假设隐藏面板 div，脚本假设在悬停时显示 div。

唯一的问题是 div 仍然在页面加载时显示，任何人都可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-11T04:11:24.233

You have `display: none` on the first line and then you have `display: block` further down the block.
Have you tried removing the second one?

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-11T04:11:01.730

you are adding `display:none;` and then at bottom of css `display:block;` so its getting overridden, remove following line from your css for #panel:

```
display:block; 
```

# antlr - ANTLR - StringTemplate - CamelCase

> ID：14805757
> 
> 赞同：0
> 
> 时间：2013-02-11T04:09:57.463
> 
> 标签：antlr, antlr3, stringtemplate, antlr4, stringtemplate-4

在树转换中将 antlr 令牌转换为骆驼大小写 StringTemplate 属性的最佳模式**（独立于语言，用于可重定向的生成代码）是什么？**示例：我的 DSL 有 MY_FIELD 定义，在 StringTemplate 输出中我需要 myField。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T19:10:37.507

在您的解析器中，您可以设置令牌的文本，这应该流向 StringTemplate。像这样的语法片段应该可以工作：

`my=MY_FIELD { $my.setText("myField"); }`

# video - two videos side by side

> ID：14805760
> 
> 赞同：0
> 
> 时间：2013-02-11T04:10:29.317
> 
> 标签：video, python-2.7, multimedia

I want to view two different videos in the same window. I can not find any library that would help me do that. i use pylab for displaying images in the same manner. I will have a 3d matrix with the pixel values for each frame. this is for a multimedia project. I would also want to set the frames per second of each video too if possible.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T12:03:23.317

为了播放视频流，您可以使用[http://pymedia.org/tut/](http://pymedia.org/tut/)，至于并排显示两个流，您可以使用 tkinter ( [http://wiki. python.org/moin/TkInter](http://wiki.python.org/moin/TkInter) ) 或 PyQt ( [http://wiki.python.org/moin/PyQt](http://wiki.python.org/moin/PyQt) )。

# prolog - 事实与结构的 Prolog 规则

> ID：14805766
> 
> 赞同：1
> 
> 时间：2013-02-11T04:11:06.923
> 
> 标签：prolog

我在 Prolog 中有以下事实。症状（A,B,C）：B区症状A可能由病毒C引起（简称，全称）

```
symptom(delirium,mind,virus(rbs, rabies)).
symptom(delirium,mind,virus(tbe, tick-borne-encephalitis)).
symptom(discomfort,mind,virus(rbs, rabies)).
... 
```

我想问一下什么类型的病毒可以引起特定的症状。为此，我想声明一个规则'causedBy(X,Y)'，在查询中我可以发送症状，它给了我可能的病毒列表。

问题是我怎样才能只发送症状并获得可能病毒的*唯一*缩写列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T04:17:25.913

你可以这样做：

```
causedBy(X,Y) :- symptom(X, _, virus(Y, _)). 
```

（[ideone 上 SWI Prolog 中的演示](http://ideone.com/aq0GJF)）。

*统一*的过程是递归的，您可以根据需要将名称嵌套到与事实统一的深度。在这种情况下，`virus(Y, _)`嵌套在`symptom/3`调用中以仅“提取”该`virus`对的第一个元素。

# meteor - Get upload progress with Meteor

> ID：14805770
> 
> 赞同：7
> 
> 时间：2013-02-11T04:11:28.157
> 
> 标签：meteor

I was about to use XHR to send a file to the server when I realized that I don't have an end-point due to lack of routing.

Then I read [this article](https://gist.github.com/dariocravero/3922137) and discovered I could potentially do file uploads by taking advantage of `Meteor.methods`. Now my upload looks something like this:

```
$(function() {
    $(document.body).html(Meteor.render(Template.files));
    $(document).on('drop', function(dropEvent) {
        _.each(dropEvent.originalEvent.dataTransfer.files, function(file) {
            var reader = new FileReader();
            reader.onload = function(fileLoadEvent) {
                Meteor.call('uploadFile', file, reader.result);
            };
            reader.readAsBinaryString(file);
        });
        dropEvent.preventDefault();
    });

    $(document).bind('dragover dragenter', function(e) {
        e.preventDefault();
    });

}); 
```

And in `server/main.js` I have this:

```
var require = __meteor_bootstrap__.require; // should I even be doing this? looks like an internal method
var fs = require('fs');
var path = require('path');

Meteor.methods({
    uploadFile: function(fileInfo, fileData) {
        var fn = path.join('.uploads',fileInfo.name);
        fs.writeFile(fn, fileData, 'binary', function(err) {
            if(err) {
                throw new Meteor.Error(500, 'Failed to save file.', err);
            } else {
                console.log('File saved to '+fn);
            }
        });
    }
}); 
```

Which just writes it to disk. This seems to work, but I don't know what technology Meteor is using to pass the data to that method on the server, and I don't know how to get progress info back.

Normally I'd attach an event listener to the `xhr` object,

```
xhr.upload.addEventListener("progress", uploadProgress, false); 
```

but I don't think I have access to one with `.methods`. Is there another way to do this?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T19:10:14.120

我也一直在研究这个，我有一些有效的代码。

首先澄清一下：

> 这似乎可行，但我不知道 Meteor 使用什么技术将数据传递给服务器上的该方法，我不知道如何取回进度信息。

Meteor 与服务器有一个[WebSockets](http://en.wikipedia.org/wiki/WebSocket)连接，并将其用作传输。因此，每次您调用[Meteor.call](http://docs.meteor.com/#meteor_call)或[Meteor.apply](http://docs.meteor.com/#meteor_apply)时，它都会对您的参数（如果有）进行[EJSON](http://docs.meteor.com/#ejson)编码，调用服务器端的函数，并透明地返回响应。

这里的技巧是然后使用[HTML5 的 FileReader Api](https://developer.mozilla.org/en-US/docs/Using_files_from_web_applications)以块的形式读取文件（这很重要，因为否则大文件会使您的浏览器崩溃）并为每个块执行 Meteor.call() 。

您的代码正在做两件对我来说效果不佳的事情：

1.  它将文件作为二进制字符串读取：我发现使用 Base64 更可靠。您说您的代码已上传，但您是否检查过文件校验和以确保它们是同一个文件？
2.  它一次读取文件。大文件（100 MB）会导致性能问题，根据我的经验，甚至会导致浏览器崩溃。

好的，现在回答你的问题。如何判断您上传了多少文件？您可以使您的块足够小，以便您可以使用 chunks_sent / total_chunks 作为指标。**或者**，您可以从 Meteor 服务器端调用中调用 Session.set( 'progress', current_size / total_size ) 并将其绑定到一个元素以便它更新。

这是我一直致力于包装此功能的 jQuery 插件。它不完整，但它会上传文件，它可能对您有所帮助。它目前只能通过拖放获取文件。没有“浏览”按钮。

**免责声明：**我对 Meteor & node 还很陌生，所以有些事情可能不会按照“推荐”的方式完成，但我会随着时间的推移对其进行改进并最终在 Github 中给它一个家。

```
;(function($) {

    $.uploadWidget = function(el, options) {

        var defaults = {
            propertyName: 'value',
            maximumFileSize: 1073741824, //1GB

            messageTarget: null
        };

        var plugin = this;

        plugin.settings = {}

        var init = function() {
            plugin.settings = $.extend({}, defaults, options);
            plugin.el = el;

            if( !$(el).attr('id') || !$(el).attr('id').length ){
                $(el).attr('id', 'uploadWidget_' + Math.round(Math.random()*1000000));
            }

            if( plugin.settings.messageTarget == null ){
                plugin.settings.messageTarget = plugin.el;
            }

            initializeDropArea();
        };

        // Returns a human-friendly string representation of bytes
        var getBytesAsPrettyString = function( bytes ){

            var sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];
            if (bytes == 0) return 'n/a';
            var i = parseInt(Math.floor(Math.log(bytes) / Math.log(1024)));
            return Math.round(bytes / Math.pow(1024, i), 2) + ' ' + sizes[i];

        };

        // Throws an exception if the file (from a drop event) is unacceptable
        var assertFileIsAcceptable = function( file ){

            if( file.size > plugin.settings.maximumFileSize ){
                throw 'Files can\'t be larger than ' + getBytesAsPrettyString(plugin.settings.maximumFileSize);
            }

            //if( !file.name.match(/^.+?\.pdf$/i) ){
            //    throw 'Only pdf files can be uploaded.';
            // }

        };

        var setMainMessage = function( message ){

            $(plugin.settings.messageTarget).text( message );

        };

        plugin.getUploader = function(){

            return plugin.uploader;

        };

        var initializeDropArea = function(){

            var $el = $(plugin.el);

            $.event.props.push("dataTransfer");

            $el.bind( 'dragenter dragover dragexit', function(){
                event.stopPropagation();
                event.preventDefault();
            });

            $el.bind( 'drop', function( event ){

                var slices;
                var total_slices;

                var processChunkUpload = function( blob, index, start, end ){

                    var chunk;

                    if (blob.webkitSlice) {
                        chunk = blob.webkitSlice(start, end);
                    } else if (blob.mozSlice) {
                        chunk = blob.mozSlice(start, end);
                    } else {
                        chunk = blob.slice(start,end);
                    }

                    var reader = new FileReader();

                    reader.onload = function(event){

                        var base64_chunk = event.target.result.split(',')[1];

                        slices--;

                        $el.text( slices + ' out of ' + total_slices + ' left' );

                        Meteor.apply(
                            'saveUploadFileChunk',
                            [file_name, base64_chunk, slices+1],
                            { wait: true }
                        );
                    };

                    reader.readAsDataURL(chunk);
                };

                event.stopPropagation();
                event.preventDefault();
                event.dataTransfer.dropEffect = 'copy';

                if( !event.dataTransfer.files.length ){
                    return;
                }

                const BYTES_PER_CHUNK = 1024 * 1024; // 1MB chunk sizes.

                var blob = event.dataTransfer.files[0];
                var file_name = blob.name;

                var start = 0;
                var end;
                var index = 0;

                // calculate the number of slices we will need
                slices = Math.ceil(blob.size / BYTES_PER_CHUNK);
                total_slices = slices;

                while(start < blob.size) {
                    end = start + BYTES_PER_CHUNK;
                    if(end > blob.size) {
                        end = blob.size;
                    }

                    processChunkUpload( blob, index, start, end );

                    start = end;
                    index++;
                }

            });

        };

        init();

    }

})(jQuery); 
```

这是我的流星发布方法。

```
Meteor.methods({

        // this is TOTALLY insecure. For demo purposes only.
        // please note that it will append to an existing file if you upload a file by the same name..
        saveUploadFileChunk: function ( file_name, chunk, chunk_num ) {

                var require = __meteor_bootstrap__.require;
                var fs = require('fs');
                var crypto = require('crypto')

                var shasum = crypto.createHash('sha256');
                shasum.update( file_name );

                var write_file_name = shasum.digest('hex');

                var target_file = '../tmp/' + write_file_name;

                fs.appendFile(
                        target_file,
                        new Buffer(chunk, 'base64'),
                        {
                                encoding: 'base64',
                                mode: 438,
                                flag: 'a'
                        }
                        ,function( err ){

                                if( err ){

                                        console.log('error ' + err);
                                }

                                console.log( 'wrote ' + chunk_num );

                        }
                );

                return write_file_name;

        }
}); 
```

高温高压

# iphone - 动画崩溃程序COCOS2D

> ID：14805771
> 
> 赞同：0
> 
> 时间：2013-02-11T04:11:28.920
> 
> 标签：iphone, objective-c, xcode, animation, cocos2d-iphone

我正在尝试在 cocos2d 中制作游戏。我有他们贬低 ccspritesheet 和所有这些东西之前的版本。我试图让一艘船爆炸。它是一个 ccsprite，我在 - (id)init 中运行此代码

```
 CCSpriteSheet * sheet = [CCSpriteSheet spriteSheetWithFile:@"Explode.png"];

    [self addChild:sheet];

    NSMutableArray * explosionFrames = [NSMutableArray array];

    int spriteWidth = 256;

    for (int i = 0; i <= 6; i++) {
        [explosionFrames addObject:[CCSprite spriteWithSpriteSheet:sheet rect:CGRectMake(i*spriteWidth, 0, spriteWidth, 100)]];
    }

    CCAnimation * animation = [CCAnimation animationWithName:@"explode" delay:0.1f frames:explosionFrames];

    CCAnimate * explosion = [CCAnimate actionWithDuration:.5f animation:animation restoreOriginalFrame:NO];

    [self runAction:explosion]; 
```

当我运行程序时，它会直接崩溃说

```
-[CCSprite rect]: unrecognized selector sent to instance 0x54484f0 
```

在控制台中。

我不知道是怎么回事。这是我第一次尝试在 cocos 中制作动画，我可能是个白痴。任何帮助几乎和你一样棒。谢谢！

我无法上传即时使用的精灵表，因为我是新手，它不会让我这样做，这是有道理的。但它是 1792 × 100 png

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T07:00:44.140

已弃用的**CCSpriteSheet**已被**CCSpriteBatchNode**取代。但无论如何，要从 spritesheet 的矩形创建一个 sprite，您应该调用 [CCSprite spriteWithTexture:sheet.texture rect:yourRect]，其中 sheet 是您的**CCSpriteBatchNode**。

以下代码应该适用于 cocos2d 2.x。有关在 cocos2D 中使用 spritesheets 动画的优秀教程，请查看：[http ://www.raywenderlich.com/1271/how-to-use-animations-and-sprite-sheets-in-cocos2d](http://www.raywenderlich.com/1271/how-to-use-animations-and-sprite-sheets-in-cocos2d)

```
 // Create a batchnode from your spritesheet file
    CCSpriteBatchNode *sheet = [CCSpriteBatchNode batchNodeWithFile:@"Explode.png"];
    [self addChild:sheet];

    int spriteWidth = 256;

    // Create the sprite starting with the first frame.
    CCSprite *sprite = [CCSprite spriteWithTexture:sheet.texture rect:CGRectMake(0, 0, spriteWidth, 100)];
    CGSize winSize = [[CCDirector sharedDirector] winSize];
    sprite.position = ccp(winSize.width/2, winSize.height/2);

    // Create the array the holds the animation frames
    NSMutableArray * explosionFrames = [NSMutableArray array];
    for (int i = 0; i <= 6; i++)
    {
        [explosionFrames addObject:[CCSpriteFrame frameWithTexture:sheet.texture rect:CGRectMake(i*spriteWidth, 0, spriteWidth, 100)]];
    }

    // Create the animation from those frames.
    CCAnimation * animation =[CCAnimation animationWithSpriteFrames:explosionFrames delay:.2f];
    CCAnimate * explosion = [CCAnimate actionWithAnimation:animation];

    // Start running the animation
    [sprite runAction:explosion];

    // Add the explosion as child of spritesheet
    [sheet addChild:sprite]; 
```

# java - 如何在不重叠文本的情况下以图形方式重绘字符串数组？

> ID：14805773
> 
> 赞同：0
> 
> 时间：2013-02-11T04:11:55.827
> 
> 标签：java, arrays, string, graphics, repaint

我正在尝试以图形方式显示数组，但我遇到了问题。

在我填充数组之前它会穿上“null”，这很好，但是在我填充数组之后，它会覆盖“null”，这使得它难以阅读。

我怎样才能使画布在我填满数组后清理并重绘。

到目前为止，这是我的代码：

```
public class wordManager extends JFrame
{
String[] array = new String[15];

private BufferedImage buffered;
public wordManager()
{
    super("Word Managery");

    setSize(300,600);
    setVisible(true);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
}

 public void paint(Graphics window)
 {
     if(buffered==null)
            buffered = (BufferedImage)(createImage(getWidth(),getHeight()));

     Graphics windowTemp = buffered.createGraphics();

     int y = 50;
     for(int i = 0; i<array.length; i++)
     {
        windowTemp.drawString(array[i] + "", 10,y);
        y+=10;

     }

     window.drawImage(buffered, 0, 0, null);
 }

public void read(String filename) throws IOException
{

    String word;
    int i = 0;
    Scanner file = new Scanner(new File(filename+".txt"));
    while(file.hasNext())
    {
        word = file.next();
        array[i] = word;

        i++;
    }
    repaint();
}

public void scramble()
{
    for(int i=0;i<array.length;i++)
    {
        int a = (int) (Math.random()*array.length);
        String b = array[i];
        array[i] = array[a];
        array[a] = b;
    }
    repaint();
}

public void sort() 
{
    for (int i = 1; i < array.length; i++)
    {
        int s = i-1;
        for (int j = i; j < array.length; j++)
        {
            if (array[j].compareTo(array[s]) < 0)
            {
                 s = j;
            }
        }
         String temp = array[i-1];
         array[i-1] = array[s];
         array[s] = temp;
    }
    repaint();
}

public void write() throws IOException
{
    PrintWriter fileOut = new PrintWriter(new FileWriter("out.txt"));

    for(int i = 0; i<array.length; i++)
    {
        fileOut.println(array[i]);  
    }

    fileOut.close();

}

public void printArray()
{
    for(String term : array)
    {
        System.out.println(term);
    }
}

} 
```

* * *

```
public class runner
{
public static void main(String args[]) throws IOException 
{
    wordManager run = new wordManager();

    Scanner keyboard = new Scanner(System.in);
    System.out.println("In put file name");
    String filename = keyboard.next();

    run.read(filename);

    System.out.println("");
    run.printArray();
    System.out.println("");

    System.out.println("Enter 1 if you want to sort\n");
    System.out.println("Enter 2 if you want to scramble");

    int selection = keyboard.nextInt();

        if(selection == 1)
        {
            run.sort();
        }

        if(selection == 2)
        {
            run.scramble();
        }

    run.printArray();
    System.out.println("");

    run.write();
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T04:19:51.107

不要覆盖 JFrame（或任何其他顶级窗口）的 paint() 方法。

自定义绘画是通过覆盖 JPanel 的 paintComponent() 方法完成的，然后将面板添加到框架中。

并且不要忘记调用 super.paintComponent(...) 作为方法中的第一条语句，以确保背景被清除。

阅读[自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/index.html)的 Swing 教程以获取更多信息。

也许更简单的解决方案是只在 JTextArea 中显示文本，这样您就不必重新发明轮子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T04:23:44.240

你没有尊重油漆链。

Paint 做了很多重要的工作，尤其是对您而言，它为渲染准备图形。

`Graphics`是一个共享资源，它可以通过重绘管理器需要重绘的所有组件。绘制过程的一部分是清除图形，通常通过调用`super.paint`.

现在，说了这么多。您应该很少需要覆盖`paint`顶级容器的方法，如果没有别的，顶级容器不是双缓冲的。

相反，您应该从类似的东西创建一个自定义组件，`JPanel`并覆盖它的`paintComponent`方法。

图形环境中的文本具有基于当前字体的度量。简单地使用一个幻数来计算文本应该出现的下一行会在字体发生变化时产生很多令人讨厌的结果（而且它会）。

![在此处输入图像描述](../Images/85476d4d8eccf3f42cfb9a351f08007f.png)

相反，你应该做类似...

```
FontMetrics fm = windowTemp.getFontMetrics();
int y = 50;
for(int i = 0; i<array.length; i++)
{
    windowTemp.drawString(array[i] + "", 10,y + fm.getAscent());
    y+=fm.getHeight();
} 
```

查看[使用文本 API](http://docs.oracle.com/javase/tutorial/2d/text/index.html)

# firefox-addon-sdk - How do you indicate that a Panel is loading an external contentURL?

> ID：14805781
> 
> 赞同：1
> 
> 时间：2013-02-11T04:13:09.277
> 
> 标签：firefox-addon-sdk

If you have a Panel that is linked to some contentURL, it stays blank until the entire request is finished. Is there any way to first fill the Panel with some local 'loading' message until the external page is finished loading?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T20:05:31.557

创建页面时，您当然可以在面板中加载`data.url('loading.html')`页面。然后，一旦您想加载外部 URL，您只需更改`contentURL`面板的属性。我不确定该`loading.html`页面是否会保留，因为使用的 iframe 应该被换掉，但这就是我解决问题的方式。

# java - Working with HashMap it shown an error?

> ID：14805783
> 
> 赞同：0
> 
> 时间：2013-02-11T04:13:21.423
> 
> 标签：java, android, hashmap, android-mediaplayer

I am working with hash map and it shows an error:-

The method `add(HashMap<String,String>)` in the type `ArrayList<HashMap<String,String>>` is not applicable for the arguments `(String)`

on this line:

```
songsList.add(fullpath); 
```

* * *

**EDIT:**

```
private ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();
private Cursor musiccursor, videocursor; // projection for audio media files
String[] music = { MediaStore.Audio.Media._ID,MediaStore.Audio.Media.DATA,MediaStore.Audio.Media.DI‌​SPLAY_NAME, MediaStore.Video.Media.SIZE }; // projection for video media files
String[] video = { MediaStore.Video.Media._ID,MediaStore.Video.Media.DATA,MediaStore.Video.Media.DI‌​SPLAY_NAME, MediaStore.Video.Media.SIZE }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T04:14:55.677

HashMap 是一个泛型。它可以采用任何单一类型的变量，但它只能采用它被声明为的类型。如果看起来这被声明为采用 ArrayList 但您尝试添加字符串，反之亦然。

# python - Python字符串数组如何工作？

> ID：14805789
> 
> 赞同：2
> 
> 时间：2013-02-11T04:13:53.163
> 
> 标签：python, string

我有一个 python 字符串
word = helloworld word[1:9:2]
的答案
将给出为“elwr”。这是怎么回事？谢谢！！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T04:15:19.440

您要求解释 Python 的切片表示法。有关详细信息，请参阅此[答案](https://stackoverflow.com/a/509295/201359)。特别要注意：

```
word = 'helloworld'
word[1:9:2] 
```

...声明应该创建一个新切片，从索引 1 开始，直到（不包括）索引 9，字符串中每两个索引取一个元素。换句话说，创建一个包含以下元素的新字符串：

```
0 1 2 3 4 5 6 7 8 9
h e l l o w o r l d
  ^   ^   ^   ^ 
```

...这就是您获得`'elwr'`结果的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T04:20:04.430

这意味着您正在从 position[1] 到 position[9] 获取一个子字符串，并且您只获取第二个字母。子字符串将类似于：

```
elloworld 
```

并且由于您要从中获取索引 2 处的字符，因此它将是：

```
elwr 
```

它也不是一个数组。它只是一个字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T04:15:42.890

数组[开始：结束：步骤]

`word[1:9:2]`表示您从索引 1 开始，直到索引 9，每隔一个字母取一个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T04:25:36.290

那就是数组切片 - `word[start_pos:end_pos:step]`，其中`start_pos`和`end_pos`是零索引的，并且`step`是每次迭代时索引递增的值。`end_pos`结果中省略了at 的字符/元素。

```
|h|e|l|l|o|w|o|r|l|d|
0 1 2 3 4 5 6 7 8 9 10
  ^---------------^
  start           end 
```

因为`step = 2`在您的示例中，我们将只取上述范围内的所有其他字符。

```
>>> word = "helloworld"
>>> word[1]
'e'
>>> word[1:9]
'elloworl'
>>> word[1:9:2]
'elwr' 
```

# java - How to access a SQL database using Glassfish and DataSource

> ID：14805792
> 
> 赞同：1
> 
> 时间：2013-02-11T04:14:12.067
> 
> 标签：java, sql, database, glassfish, datasource

I want to connect to a database that is created on WAMP. It is a SQL database that I created using SQL Buddy on WAMP.

When I run the code it showed

```
SEVERE: javax.naming.NameAlreadyBoundException: Use rebind to override 
```

I found out I should use the asadmin command to disbale the JNDI naming on glassfish which worked once but again it showed the same error.

```
public Connection DbConnection(){

                        Connection con = null;
                        DataSource ds = new DataSource();
                        ds.setDatabaseName("mydatabase");
                        ds.setDescription("Authorization");
                        Context ctx = new InitialContext();
                        ctx.bind("jdbc/mydatabase", ds);
                        ds.getConnection("root", "");
                        return con;
}

public void myStatement(){

                   PreparedStatement pst;
                   Connection conn = DbConnection();   
                   conn.setAutoCommit(false);
                   pst = conn.prepareStatement("Select *" +
                                               " from Member WHERE Username = ? ");
                   pst.setString(1, username);
                   conn.commit();
                   pst.close();   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T04:24:49.113

函数 DbConnection() 返回 null 因为您不返回任何值。您也不会创建任何 Connection 实例。如果您手动创建 DataSource，则无需将其绑定到 jndi。

如果您正在创建 DataSource，请从 DataSource 对象获取 Connection（通过其 getConnection() 方法）

# python - 在 Python 中计算多项式？

> ID：14805796
> 
> 赞同：2
> 
> 时间：2013-02-11T04:14:48.133
> 
> 标签：python, polynomial-math

我真的没有代码可以发布这个，因为我很困惑如何编写它。我必须给出一个正整数列表和一个 x 值来复制以下示例：

```
>>> poly([1, 2, 1], 2)
9
>>> poly([1, 0, 1, 0, 1], 2)
21
>>> poly([1, 0, 1, 0, 1], 3)
91 
```

我的方程式是`p(x) = a0 + a1x + a2x**2 + a3x**3 + ... + anx**n`，所以我的一个想法是检查列表的长度并使其自动确定必须执行的计算次数，然后将 x 替换为列表之外的任何值。不幸的是，我不知道如何写或者从哪里开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T04:28:40.997

```
def poly(a_list, x):
    ans = 0
    for n,a in enumerate(a_list):
        ans += a*x**n
    return ans 
```

enumerate 函数返回一个元组，其中包含列表中每个元素的索引和值。因此，您可以使用“for index,value in enumerate(list)”轻松遍历列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T05:04:39.060

如果你有 numpy 会更好：

```
>>> from numpy import polyval
>>> polyval([1, 2, 1], 2)
9
>>> polyval([1, 0, 1, 0, 1], 2)
21 
```

我认为您必须先反转 a_list 。（它恰好起作用，因为 a_list 是回文）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T04:26:14.340

以下是您可以实施的方法`poly`：

```
def poly(l, x):
    sum = 0
    xp =1 
    for a in l:
        sum += a *xp #add next term
        xp = x* xp #xp is x^p
    return sum

print poly([1,2,1],2)
print poly([1,0,1,0,1],3) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T04:58:07.657

你可以使用[itertools 星图](http://docs.python.org/2/library/itertools.html#itertools.starmap)

```
>>> from itertools import starmap
>>> def poly(a_list, x):
...     val = lambda p, a: a*x**p
...     return sum(starmap(val, enumerate(a_list)))
...
>>> poly([1, 2, 1], 2)
9
>>> poly([1, 0, 1, 0, 1], 2)
21 
```

# hibernate - Grails域类继承 - GORM设置错误的外键

> ID：14805798
> 
> 赞同：1
> 
> 时间：2013-02-11T04:15:08.803
> 
> 标签：hibernate, inheritance, grails-orm, grails-2.0

GORM 在一个非常简单的 3 个域类情况下感到困惑：对象 - 项目 - 修订。每个项目都有许多修订。正如大师伯特先生所建议的那样，我在这里不使用集合。在我决定制作“项目扩展对象”之前，一切都运行良好。论文是我的领域课程。

```
class Object {
  String title

  static mapping = {
    tablePerHierarchy false
    }
  }

class Item {
  String name
  Object context

  static constraints = {
    context nullable:true
    }
  }

class Revision {
  Item item
  Object context

  static constraints = {
    context nullable:true
    }
  } 
```

然后在我的控制器中：

```
def item = new Item(name:'a-name').save()
def revision = new Revision(item:item).save() 
```

简单——对吧？到目前为止一切正常。

请注意，两个表中的*上下文*均为空。

现在，让我们让 Revision 扩展 Object，而不更改任何其他内容。

```
class Revision extends Object {
  Item item
  Object context
  static constraints = {
    context nullable:true
    }
  } 
```

编译好-运行好-但*上下文*不再为空！**context 获得 Revision 的参考**！

我做错了什么？GORM 在想什么？谢谢你的帮助。

这是 logSQL：

```
Hibernate: insert into item (version, context_id, name, parent_id, id) values (?, ?, ?, ?, ?)
TRACE sql.BasicBinder  - binding parameter [1] as [BIGINT] - 0
TRACE sql.BasicBinder  - binding parameter [2] as [BIGINT] - <null>
TRACE sql.BasicBinder  - binding parameter [3] as [VARCHAR] - a-name
TRACE sql.BasicBinder  - binding parameter [4] as [BIGINT] - <null>
TRACE sql.BasicBinder  - binding parameter [5] as [BIGINT] - 5
Hibernate: insert into object (version, object_type, title, id) values (?, ?, ?, ?)
TRACE sql.BasicBinder  - binding parameter [1] as [BIGINT] - 0
TRACE sql.BasicBinder  - binding parameter [2] as [VARCHAR] - default-type
TRACE sql.BasicBinder  - binding parameter [3] as [VARCHAR] - <null>
TRACE sql.BasicBinder  - binding parameter [4] as [BIGINT] - 6
Hibernate: insert into revision (context_id, item_id, id) values (?, ?, ?)
TRACE sql.BasicBinder  - binding parameter [1] as [BIGINT] - <null>
TRACE sql.BasicBinder  - binding parameter [2] as [BIGINT] - 5
TRACE sql.BasicBinder  - binding parameter [3] as [BIGINT] - 6
Hibernate: update item set version=?, context_id=?, name=?, parent_id=? where id=? and version=?
TRACE sql.BasicBinder  - binding parameter [1] as [BIGINT] - 1
TRACE sql.BasicBinder  - binding parameter [2] as [BIGINT] - 6
TRACE sql.BasicBinder  - binding parameter [3] as [VARCHAR] - a-name
TRACE sql.BasicBinder  - binding parameter [4] as [BIGINT] - <null>
TRACE sql.BasicBinder  - binding parameter [5] as [BIGINT] - 5
TRACE sql.BasicBinder  - binding parameter [6] as [BIGINT] - 0 
```

# ios - iOS 应用和 APNS 限制

> ID：14805799
> 
> 赞同：7
> 
> 时间：2013-02-11T04:15:10.800
> 
> 标签：ios, push-notification

我正在使用 Air 和 AS3 构建（精心构建）一个使用推送通知的应用程序。该应用程序允许用户与其他应用程序用户共享信息（向所有用户开放论坛），但我想知道一些我找不到信息的事情。

我找到了一些信息，但它们看起来很旧（[Apple's Push Notification Service 是否有流量限制？](https://stackoverflow.com/questions/2170227/is-there-a-traffic-limit-on-apples-push-notification-service)，[苹果推送通知限制](https://stackoverflow.com/questions/6421252/apple-push-notification-limitation)）所以我​​想我会检查一下。

1.  我可以多久查询一次 APNS 服务？目前，我将所有通知排在一个表中，每 3 分钟运行一次批处理脚本来准备有效负载并发送。每 3 分钟可能会发送数千条通知。
2.  每小时、每天、每月等发送的通知数量是否有限制

用户确实可以选择在应用程序（和设备）设置中关闭通知，但我想我会检查是否有人知道这些信息。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-26T06:53:29.903

发送的推送通知数量没有限制，但您不能随意发送重复通知，因为 APNS 服务器会禁止您的 IP。为了更好地理解，我认为你应该仔细阅读这个-

[http://developer.apple.com/library/ios/#technotes/tn2265/_index.html](http://developer.apple.com/library/ios/#technotes/tn2265/_index.html)

# java - 带有 NoSuchMethodError 休眠和弹簧冲突的预配置 netbeans 项目

> ID：14805806
> 
> 赞同：7
> 
> 时间：2013-02-11T04:16:29.640
> 
> 标签：java, spring, hibernate, netbeans, jdbc

所以我试图让我的 Java 应用程序通过 [Microsoft JDBC Driver 4.0 for SQL Server](https://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=11774)连接到 SQL Server 2012 ，一切似乎都很顺利，但休眠只是不断回来`NullExceptions`并且不会在其中执行任何内容`try/catch`（因此） ，`NullException`我完全不知道为什么。这是运行 hibernate的 netbeans 控制台 ( ) 中的[pastebin](http://pastebin.com/4tVppVj3)`e.getMessage()`（出于这个问题的目的，我使用了一个名为 的示例表`prime_table`）。

在 pastebin 日志中，您会注意到...

> 2013 年 2 月 11 日下午 5:21:04 org.hibernate.cfg.Configuration doConfigure 信息：已配置 SessionFactory：空

关于为什么会发生这种情况的任何想法？（我不确定，但它可能与整个堆栈跟踪有关）。

**其他日志*（在 JSP 构建期间）***

*   [Netbeans（运行）](http://pastebin.com/YZPLtF2h)
*   [阿帕奇雄猫](http://pastebin.com/UpPTETXh)
*   [Apache tomcat 日志](http://pastebin.com/HG6CQP18)
*   [Sql 服务器 ERRORLOG.log](http://pastebin.com/yq6WDUJd)
*   **[Hibernate 可抛出](http://pastebin.com/kd7Ssykr)堆栈跟踪（2013 年 2 月 14 日更新）**

*所有日志将在 2013 年 3 月中/下旬之前提供*

**资源，我一直在看**

*   [休眠示例](https://anshuchoudhury.wordpress.com/category/j2ee/hibernate/hibernate-tutorial-example/)
*   [[Help] session.flush() Hibernate 中出现空指针异常](http://www.coderanch.com/t/559936/ORM/databases/Null-Pointer-Exception-session-flush)
*   [未找到 hibernate.cfg.xml](https://coderanch.com/t/215322/databases/hibernate-cfg-xml)
*   [hibernate map java Long to MySQL BIGINT错误](https://stackoverflow.com/questions/3315941/hibernate-map-java-long-to-mysql-bigint-error)

**预配置的 Netbeans 项目设置[`commandline: tree /f`](http://iforce.co.nz/i/o5e1aouu.ruz.png)**

[![网豆](../Images/aaa2471a804745ac2f40bedf1c6b5d9a.png)](https://i.stack.imgur.com/GC2MC.png)
[（来源：[iforce.co.nz](http://iforce.co.nz/i/llroxgez.s5s.png)）]

**Hibernate.cfg.xml**（按照[Hari](https://stackoverflow.com/users/27649/hari)`"hibernate.cache.provider_class"`的建议添加）

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC "-//Hibernate/Hibernate Configuration DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
  <session-factory>
    <property name="hibernate.cache.provider_class">org.hibernate.cache.HashtableCacheProvider</property>
    <property name="hibernate.connection.driver_class">com.microsoft.sqlserver.jdbc.SQLServerDriver</property>
    <property name="hibernate.connection.url">jdbc:sqlserver://Michael-PC:1433;databaseName=PrimeDB</property>
    <property name="hibernate.connection.username">sa</property>
    <property name="hibernate.connection.password">online12</property>
    <property name="hibernate.connection.pool_size">10</property>
    <property name="hibernate.dialect">org.hibernate.dialect.SQLServerDialect</property>
    <property name="hibernate.show_sql">true</property>
    <property name="hibernate.hbm2ddl.auto">update</property>
    <!-- Data Mappings -->
    <mapping resource="prime.hbm.xml"/>
  </session-factory>
</hibernate-configuration> 
```

**主要的**

```
public class Prime {

    private long prime;

    public void setPrime(long nPrime){
        this.prime = nPrime;
    }

    public long getPrime(){
        return this.prime;
    }

} 
```

**素数.hbm.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
  <class name="nz.co.xyleap.db.Prime" table="prime_table">
    <id name="prime" type="long" column="prime" />
  </class>
</hibernate-mapping> 
```

**素数表**

```
CREATE TABLE prime_table (
    [prime] bigint PRIMARY KEY NOT NULL,
) 
```

**会话功能或`FirstExample.java`**

```
public class FirstExample {

    public static void main(String[] args) {
        FirstExample ex = new FirstExample();
        ex.session();
    }

    public void session() {
        Session session = null;
        try {
            // This step will read hibernate.cfg.xml and prepare hibernate for use
            SessionFactory sessionFactory = new Configuration().configure().buildSessionFactory();
            session = sessionFactory.openSession();
            session.beginTransaction();
            //Create new instance of Contact and set values in it by reading them from form object
            System.out.println("inserting record 13");
            Prime p = new Prime();
            p.setPrime(13);
            session.save(p);
            System.out.println("Done");
        } catch (Exception e) {
            System.out.println(e.getMessage());
        } finally {
            // Actual contact insertion will happen at this step
            session.flush();
            session.close();
        }
    }

} 
```

据我所知，一切都应该是正确的，并且我应该能够将 Java Hibernate 中的记录插入到我的 SQL 数据库中。但由于某种原因我不能：-/

更新：休眠本身，运行良好。但是与 Spring 结合使用时，会发生这些错误。（更多信息在评论中）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T09:15:24.917

看起来您缺少 Hibernate 在运行时需要的库。我在代码（MySQL 5、MySQL JDBC 驱动程序、Mac OS）中看到了与您相同的行为，直到我更改了行：

```
catch (Exception e) {
      System.out.println(e.getMessage());
} 
```

到：

```
catch (Throwable e) {
       e.printStackTrace();
} 
```

然后我开始看到一整套关于 Hibernate 正在寻找但未包含在我的 CLASSPATH 中的库的消息`NoClassDefFoundError`。`ClassNotFoundError`我怀疑您缺少 Hibernate 需要的库，并且因为您正在捕获`Exception`而不是`Throwable`- 捕获`Error`- 您没有看到错误消息。看：

[既然可以捕获 Throwables，为什么还要在 Java 中捕获异常？](https://stackoverflow.com/questions/581878/why-catch-exceptions-in-java-when-you-can-catch-throwables)

如果你抓住了，`Throwable`你会很快看到你缺少哪些库和类：我的猜测是你可能缺少 EHCache（Hibernate 似乎默认用作二级缓存）、CGLIB/ASM、或 Java 事务 API。如果您缺少 EHCache，并且希望 hibernate 使用它自己的内存中 Hashtable 缓存而不是 EHCache，请将下面的行添加到`hibernate.cfg.xml`：

```
<property name="hibernate.cache.provider_class">org.hibernate.cache.HashtableCacheProvider</property> 
```

**更新，根据评论回答：**

我不使用 NetBeans，所以我没有遇到这个问题，但它似乎相当普遍。看：

[错误：java.lang.NoSuchMethodError: org.objectweb.asm.ClassWriter.<init>(I)V](https://stackoverflow.com/questions/2432471/error-java-lang-nosuchmethoderror-org-objectweb-asm-classwriter-initiv)

[http://www.hildeberto.com/2008/05/hibernate-and-jersey-conflict-on.html](http://www.hildeberto.com/2008/05/hibernate-and-jersey-conflict-on.html)（报告 Netbeans 中 Hibernate 和 Jersey 存在类似问题）

[https://hibernate.onjira.com/browse/HHH-2222（Hibernate](https://hibernate.onjira.com/browse/HHH-2222)错误报告提到了这个问题）

[http://netbeans.org/bugzilla/show_bug.cgi?id=145589](http://netbeans.org/bugzilla/show_bug.cgi?id=145589)（使用旧版本 cglib 捆绑 Hibernate 的 Netbeans 错误报告）。

上面链接的 StackOverflow 帖子有很多细节。总结一下：

*   Hibernate 3.2 使用 CGLib 2.1.3 生成运行时代码，以提高性能并为一对一和一对多映射生成代理。

*   CGLib 是 ASM（一个字节码操作库）的高级包装器。CGLib 2.1.3 需要 ASM 1.5.3，它与 ASM 2.2**二进制不兼容。**ASM 2.2 又是 Spring 版本 < 2.5 的依赖项。

*   为了解决 Hibernate 和 Spring 之间的这些问题，Spring 2.5 将其自己的 asm 版本与 spring 包名捆绑在一起；更高版本的 Hibernate 使用 CGLIB 2.2，它还将自己的 ASM 版本与自定义包名称捆绑在一起。最新版本的 Hibernate 完全取消了 CGLIB 并改用 Javassist，但 NetBeans 仍然捆绑了 Hibernate 3.2.5。

那么你有几个选择：

*   使用 CGLIB 2.2 更新 Netbeans 中的 Hibernate 库包

*   告诉 Hibernate 使用 Javassist 生成运行时代码。将此行添加到 hibernate.properties，或使用 -D 将其指定为系统属性（显然，您不能在 hibernate.cfg.xml 中指定此属性）：

    `hibernate.bytecode.provider=javassist`

祝你好运，这是一个相当有趣的问题！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-12T07:33:37.940

它在 session.flush() 处死去；因为 session 是 null 并且 try-block 中的某些东西正在抛出异常，可能是运行时异常，如 nullpointer 或其他东西。会话为 null 的事实将导致另一个 nullptr 并且它将隐藏原始的。所以我建议你做

```
if(session!=null)
{
    session.flush();
    session.close();
} 
```

然后运行它以查看实际问题是什么。

我还建议您替换“System.out.println(e.getMessage());” 至少有 e.printStackTrace(); 或者最好是适当的日志记录。

# sql - 排序函数oracle sql

> ID：14805807
> 
> 赞同：0
> 
> 时间：2013-02-11T04:16:36.693
> 
> 标签：sql, oracle, window-functions, top-n

我是 sql 新手，正在做作业。有一个问题，我应该在哪里使用 rank 函数，但我不知道如何使用它。我试图在互联网上找到一些信息，但仍然有问题。我在这里发布问题，如果您有任何有用的文章或评论，请在此处发布。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T04:34:59.490

rank 函数的语法：

```
rank( expression1, ... expression_n ) WITHIN GROUP ( ORDER BY expression1, ... expression_n ) 
```

这是一个例子：

```
select rank(1000, 500) WITHIN GROUP (ORDER BY salary, bonus) from employees; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T10:20:21.370

当我们使用`rank()`POST_DATE 降序排序时，最近日期的排名为 1：

```
select aid
       , email
       , trunc((rnk-1)/5) + 1 as pageno
from ( select aid
              , email
              , rank() over (order by post_date desc ) as rnk
       from ads ) 
```

您可能需要调整页码的计算；这个问题在这个分数上有些模棱两可（“对于将在第一页以外的页面中列出的所有广告，该广告将列出的页码”）。

* * *

正如@AndriyM 评论的那样，在现实生活中，我们将为此使用 ROW_NUMBER() 而不是 RANK() 因为该函数将为每一行生成一个不同的数字而没有间隙，RANK() 和 DENSE_RANK 都不能保证。那看起来像

```
row_number() over ( order by post_date desc, aid asc ) as rn 
```

* * *

请记住，您的老师可能足够聪明，知道 StackOverflow，因此请诚实地在应得的地方分配学分。

# magento - Magento - 从产品和子类别元标题中删除类别名称

> ID：14805808
> 
> 赞同：0
> 
> 时间：2013-02-11T04:16:37.320
> 
> 标签：magento, title, meta-tags

我想知道如何从子类别和产品页面元标题中删除类别名称。截至目前，我的子类别页面的元标题是：

> 子类别标题 - 类别标题 | 标题后缀

对于产品页面：

> 产品名称 - 子类别标题 - 类别标题 | 标题后缀。

我希望它在子类别的以下结构中：

> 子类别标题 | 标题后缀

对于产品页面：

> 产品名称 | 标题后缀

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:25:57.807

**无需更改任何代码，**

通过管理站点，每个类别都有“page_title”字段，每个产品都有“meta_title”字段（在“元信息”选项卡下）。然后这些字段将显示在每个页面上。但这需要针对每个类别和产品进行更改，否则将显示默认选项。

**重写类别/产品块**

Mage_Catalog_Block_Category_View 和 Mage_Catalog_Block_Product_View 块包含函数 _prepareLayout()。在这个函数中，标题是通过调用 $headBlock->setTitle($title); 来设置的。

如果您创建了自己的模块并重写了这些块，那么对标题做任何您想做的事情。

配置.xml：

```
<global>
    <blocks>
        <catalog>
            <rewrite>
                <category_view>Your_Module_Block_Category_View</category_view>
                <product_view>Your_Module_Block_Product_View</product_view>
            </rewrite>
        </catalog>
    </blocks>
</global> 
```

**产品查看事件**

对于产品视图（遗憾的是不是类别视图），您还可以观察事件“catalog_controller_product_view”。此时您还可以更改产品上的标题。

我建议重写这些块，因为这样您就可以为类别和产品提供相同的解决方案。

# sql - Oracle SQL 选择不同的

> ID：14805811
> 
> 赞同：5
> 
> 时间：2013-02-11T04:17:56.757
> 
> 标签：sql, oracle

我有一个示例表如下。

```
ID     Name            Code     Address
----+---------------+--------+----------------
1   |  Sydney Hall  |  SH    |  11 Abc Street
2   |  Sydney Hall  |  SH    |  23 Abc Street
3   |  Main Hall    |  MH    |  74 Xyz Street
4   |  Odyssey Hall |  OH    |  133 AbZ Street
5   |  Odyssey Hall |  OH    |  28 Xyx Street 
```

我想为这些不同的条目选择不同的代码条目以及 ID 和名称。对于上面的表格，我想得到以下信息（所以我忽略了建筑地址）。

```
ID     Name            Code   
----+---------------+--------+
1   |  Sydney Hall  |  SH
3   |  Main Hall    |  MH
4   |  Odyssey Hall |  OH 
```

这可能是一个左连接，但我似乎无法将它正确组合在一起（特别是因为我从同一个表中选择数据）。有人对此有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T05:16:57.003

我看到大家都已经回答过了，但是为什么这么复杂呢？

```
SELECT 
MIN(ID) ID, 
MIN(NAME) NAME, 
CODE 
FROM TABLE 
GROUP BY CODE 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T04:20:01.607

```
SELECT * 
FROM [table_1] 
WHERE [ID] IN (SELECT Min([ID]) 
               FROM [table_1] 
               GROUP BY CODE
              ) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T05:16:59.013

有两种方法我会考虑这样做。一种是使用`FIRST`聚合函数（[记录在这里](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions056.htm#i1000901)）。语法有点混乱，但它应该可以完成工作

```
Select
  MIN(ID) keep (dense_rank first order by id) as id,
  MIN(NAME) keep (dense_rank first order by id) as name,
  CODE
FROM YOUR_TABLE
GROUP BY CODE 
```

我建议的另一种替代方法是使用`ROW_NUMBER`@techdo 建议的函数，尽管我认为您需要从该答案中删除 NAME 列，而是使用：

```
SELECT * FROM(
  SELECT 
      ROW_NUMBER() over (partition by CODE order by ID) RNUM, 
      ID, 
      NAME, 
      CODE
    FROM YOUR_TABLE
  )x where RNUM=1; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T04:29:42.227

请试试：

```
SELECT * FROM(
  SELECT 
      ROW_NUMBER() over (partition by NAME, CODE order by NAME, CODE) RNUM, 
      ID, 
      NAME, 
      CODE, 
      ADDRESS 
    FROM YourTABLE
  )x where RNUM=1; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-11T04:51:18.933

你也可以使用这个：

```
SELECT ID, Name, Code  
FROM table 
WHERE ID IN (SELECT Max(ID) 
             FROM table 
             GROUP BY Code
            ) 
```

# unity3d - 检查手臂是否抬起 Zigfu 和 Unity3D

> ID：14805812
> 
> 赞同：3
> 
> 时间：2013-02-11T04:18:02.350
> 
> 标签：unity3d, kinect

在 Unity3D 中使用[Zigfu](http://zigfu.com/)，如何检查手臂是否抬起？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T18:26:59.577

我对[Zigfu](http://zigfu.com/)不熟悉，但如果还没有后端机制来测试这一事实（正如[George Profenza](https://stackoverflow.com/users/89766/george-profenza)在评论中指出的那样），那么您可以轻松推出自己的测试来测试这种情况。

每个 Kinect API（官方或第 3 方）都有骨骼关节的分解。[官方API](http://www.microsoft.com/en-us/kinectforwindows/)将骨架分解成以下关节，我相信[NITE](http://www.primesense.com/solutions/nite-middleware/)将骨架分解成相同的关节。

![Kinect 骨骼关节](../Images/da1d6ac93346d9a31e5e38b5e97d76bd.png)

您可以测试一个关节的位置与另一个关节的位置，看看您的“手臂抬起”条件是否得到满足。

例如，您可以简单地检查玩家的肘部是否高于他们的肩膀：

```
private void OnSkeletonFrameReady()
{
    if ((JointId[ElbowRight].Y > JointId[ShoulderRight].Y) &&
        (JointId[ElbowLeft].Y > JointId[ShoulderLeft].Y)
    {
        // arms have been raised
    }
} 
```

这显然是伪代码，需要更新到 Zigfu API 参考。

滚动自己的优势（与使用可能已经定义的东西相比）是您可以决定“举起手臂”的含义。

*   只需要双手在肩膀以上吗？
*   双手肘部需要在肩膀以上吗？
*   手只需要在关节上方吗`HipCenter`？`Spine`
*   手臂必须伸展，还是肘部可以弯曲？

所有其他（以及更多）可以定义为“举起手臂”。可以测试关节的配置以确定它们是否正确。

如果您想确保玩家在识别状态之前保持“举起手臂”一段时间，您可以简单地在手势检查中添加一个计时器。一个伪代码示例是：

```
DispatherTimer _gestureTimer = new DispatcherTimer();
_gestureTimer.Interval = TimeSpan.FromSeconds(5);
_gestureTimer.Tick += OnGestureTimerTick();

bool _armsRaisedFlag = false;

private void OnSkeletonFrameReady()
{
    if ((JointId[ElbowRight].Y > JointId[ShoulderRight].Y) &&
        (JointId[ElbowLeft].Y > JointId[ShoulderLeft].Y)
    {
        _argsRaisedFlag = true;
        _gestureTimer.Start();
    }
    else
    {
        _armsRaisedFlag = false;
        _gestureTimer.Stop();
    }
}

private void OnGestureTimerTick()
{
    _gestureTimer.Stop();
    if (_armsRaisedFlag == true)
    {
        // player's arms have been raised long enough for gesture to pass
    }
} 
```

在这种情况下，每次满足“举起武器”条件时，都会设置一个标志并启动一个计时器。如果玩家保持举起手臂 5 秒钟，则满足条件，您可以执行您想要的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-30T05:50:57.863

它的简单，只需检查 ZigSkeleton 文件。

在 ZigSkeleton 文件中，创建一个变量来存储肩部的 id

```
public int TrackedLeftArm = (int)ZigJointId.LeftArm; 
```

在 UpdateRotation 函数中，

```
Quaternion newRotation = transform.rotation * orientation * initialRotations[(int)joint]; 
```

现在检查

```
if((int)joint==TrackedLeftArm)
{

   if(newRotation.x> DesiredANgle)
    Debug.Log("Hands raised");

} 
```

# regex - 正则表达式：仅接受 0-9 之间的数字以及特殊字符 `- ( ) +` 和空格

> ID：14805815
> 
> 赞同：0
> 
> 时间：2013-02-11T04:18:35.990
> 
> 标签：regex

我必须验证一些用户输入，并且只能接受 0-9 之间的数字以及特殊字符`- ( ) +`和空格。

通过规则：

1.  同一个特殊字符（包括空格）不能连续出现两次，例如`((` `))` `++` `--`全部无效。
2.  字符串必须以 a`+`或`00`
3.  一个左括号必须总是在一个右括号之前并包含一个大于 1 位的数字，例如`(1)` `(12)` `(123)`etc... 是可以接受的，而`()` `)(` `( )`是不可接受的。

我可以锻炼第 2 点`^([0][0]|[+])`

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-15T22:03:15.650

试一试：

`^(00|\+(?!\+))(\+(?!\+)|(\-(?!\-))|( (?! ))|(\([1-9][0-9]*\)))*$`

它完全按照您指定的方式遵循您的每条规则。如果你没有完全阐明你的规则，我很难给你一个准确的正则表达式，但假设你写下了确切的规则，这应该有效！

`+`请记住，您已经包含了要匹配字符串的奇怪情况。我不确定那是故意的。

这个正则表达式自由地使用了负前瞻。请务必访问 www.regular-expressions.info 和 www.regexpal.com 以提高您的正则表达式技能！

# javascript - 消息用户空闲

> ID：14805819
> 
> 赞同：0
> 
> 时间：2013-02-11T04:18:53.387
> 
> 标签：javascript

我已经有自动注销片段，现在我希望用户知道他们空闲了大约几分钟。

向用户发送消息让用户在 1 小时内空闲的最简单方法是什么？这可以在javascript中完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T04:25:37.617

最简单的方法可能是使用一些已经编写和测试过的代码。我建议看看 Paul Irish 的 jQuery [Idle timer](http://paulirish.com/2009/jquery-idletimer-plugin/)插件或 Nicholas Zachas 的[JavaScript](http://www.nczonline.net/blog/2009/06/02/detecting-if-the-user-is-idle-with-javascript-and-yui-3/)版本；（保罗以此为依据）

# javascript - 使用 JavaScript 制作一个盒子，然后文本出现在里面，使用一个函数和 InnerHTML

> ID：14805821
> 
> 赞同：0
> 
> 时间：2013-02-11T04:19:25.463
> 
> 标签：javascript, function, innerhtml

我现在正在学习 JavaScript，并且一直在玩一些简洁的东西。我设法编写了一个使盒子变大的函数。在过去的半小时里，我一直在尝试在它增长后在框中获取一些文本。

我尝试使用 InnerHTML 方法，但无论我把它放在哪里（我知道我引用了正确的元素）都不会出现任何文本（颜色没问题，不是不可见的颜色问题）。

更奇怪的是，如果我使用 InnerHTML 将 HTML 放入其中，盒子根本不会增长。例如，我尝试放入，`target.InnerHTML = "<p style="text-align:center"> It is <b> Done </b><p>";`但单击按钮时框不会变大。

所以我想知道的两件事是如何让文本在文本增长后出现在框中，如果我放入 HTML，为什么它不会增长？

```
<html>

    <head>
        <style type="text/css">
        body {
            color: blue;
            width: 300px;
        }
        #a{ 
            color: green;
            padding: 10pt;
            background-color: blue;
            height: 200;
        }
        </style>
        <script type="text/javascript">
        var newSetting = 200;
        function growLonger(element){
            target = document.getElementById(element);
            target.style.height = newSetting;
            target.style.width = newSetting;
            newSetting = newSetting +20;

            if (newSetting == 500){
                clearTimeout(loopTimer);
                return false;
            }
            var loopTimer = setTimeout('growLonger(\''+element+'\')',50);
                target.InnerHTML = "<p style="text-align:center"> It is <b> Done </b><p>";
        }
        </script>
        <title>"Test</title>
    </head>

    <body>
    <p>Hi How are you?</p>
    <button onclick="growLonger('a')"> Grow Height </button>
    <div id="a">More text?</div>
    </body>

    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T04:36:40.473

```
target.InnerHTML = "<p style="text-align:center"> It is <b> Done </b><p>"; 
```

**innerHTML is innerHTML and not InnerHTML(camel casing)**

This should work:

```
target.innerHTML = "..."; 
```

# jquery - jQuery Cookie 插件不会在重写的 .htaccess 页面上存储 cookie

> ID：14805822
> 
> 赞同：2
> 
> 时间：2013-02-11T04:19:37.610
> 
> 标签：jquery, .htaccess, cookies

我的 .htaccess 文件：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule ^Uni/(.*)$ /Unime/profile.php?username=$1 [QSA,L]

RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule ^(.*)$ /Unime/index.php?p=$1 [QSA,L] 
```

我正在使用这个 cookie 插件： [https ://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)

这就是我保存 cookie 的方式：

```
$.cookie('count', 1); 
```

该cookie适用于普通页面。但是当我转到其中包含“Uni/”的页面时，它不会使用普通页面中使用的 cookie。它为“Uni/”页面创建了一个新的 cookie，那么问题是什么，我该如何解决？

# ios - 在 iphone 中创建自定义图片库

> ID：14805832
> 
> 赞同：0
> 
> 时间：2013-02-11T04:20:44.463
> 
> 标签：ios, iphone, objective-c, uiimagepickercontroller

我使用下面的代码从图库中选择照片或直接使用相机

```
- (void)actionSheet:(UIActionSheet *)actionSheet 
         clickedButtonAtIndex:(NSInteger)buttonIndex {

    UIImagePickerController *imagePickerController = 
      [[UIImagePickerController alloc]init];

    imagePickerController.delegate = self;
    if (buttonIndex == 0) {
        photoButtonNum=0;
        [self presentViewController:imagePickerController 
                           animated:YES 
                         completion:nil];
        imagePickerController.sourceType =  
          UIImagePickerControllerSourceTypePhotoLibrary;
    } else if (buttonIndex == 1) {
        photoButtonNum=1;
        [self presentViewController:imagePickerController 
                           animated:YES 
                         completion:nil];
        imagePickerController.sourceType =  
          UIImagePickerControllerSourceTypeCamera;
    }
} 
```

我正在寻找创建我自己的应用程序的自定义目录（文件夹）以将挑选的照片保存在 iPhone 中。我需要你的帮助

1.  创建我自己的应用程序的自定义目录
2.  想要将挑选的照片保存在该自定义目录中。

我是`iPhone`开发中的新人，所以等待您的宝贵帮助。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T04:32:50.440

该站点有助于您[在目录中创建和保存照片](http://www.touch-code-magazine.com/ios5-saving-photos-in-custom-photo-album-category-for-download/)

而且您还可以使用以下代码。

```
- (void)imagePickerController:(UIImagePickerController *)picker 
          didFinishPickingMediaWithInfo:(NSDictionary *)info {
     UIImage *pickedImage = 
       [info objectForKey:UIImagePickerControllerOriginalImage];
     NSData *imageData = UIImagePNGRepresentation(pickedImage);

     NSString *documentsDirectory = 
       [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, 
                                            NSUserDomainMask, 
                                            YES) lastObject];
     NSString *path = [documentsDirectory 
       stringByAppendingPathComponent:@"imageName.png"];

    NSError * error = nil;
    [imageData writeToFile:storePath options:NSDataWritingAtomic error:&error];

    if (error != nil) {
      NSLog(@"Error: %@", error);
      return;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T04:35:29.497

iOS 5 为您提供了使用添加自定义相册的功能[**`ALAssetsLibrary`**](https://developer.apple.com/library/ios/#documentation/AssetsLibrary/Reference/ALAssetsLibrary_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40009722)

这是[**iOS5的教程：将照片保存在自定义相册中**](http://www.touch-code-magazine.com/ios5-saving-photos-in-custom-photo-album-category-for-download/)

* * *

**编辑**

如果链接变为非活动状态

在 .h 文件中创建 ivar

```
ALAssetsLibrary* library; 
```

然后在你的代码中可能`viewDidLoad`

```
library = [[ALAssetsLibrary alloc] init]; 
```

然后在您的委托方法中

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingImage:(UIImage *)image editingInfo:(NSDictionary *)editingInfo
{
    [self.library saveImage:image toAlbum:@"Touch Code Magazine" withCompletionBlock:^(NSError *error) {
        if (error!=nil) {
            NSLog(@"Big error: %@", [error description]);
        }
    }];

    [picker dismissModalViewControllerAnimated:NO];
} 
```

# android - android中用于按钮的onclick监听器

> ID：14805833
> 
> 赞同：1
> 
> 时间：2013-02-11T04:20:54.337
> 
> 标签：android, button, view, onclick

在我的 android 应用程序中，我将按钮图像更改 1 秒。有一组按钮。在这 1 秒内，任何一个按钮的图像都会被更改。如果在那 1 秒内我单击该特定按钮，我想执行一些操作。使用我尝试过的 onclick 侦听器。但它不起作用。我该怎么做？请帮助我下面是代码 -

```
protected void onCreate(Bundle savedInstanceState) {
  // TODO Auto-generated method stub
  super.onCreate(savedInstanceState);
  setContentView(R.layout.next);

  // **here i want to call method for onclick of button.**
 //      buttonclick();
  myTimer = new Timer();

  myTimer.schedule(new TimerTask() {  

    @Override
    public void run() {
      if(time==-1){

        onStop();
      }
      else
        runOnUiThread(new Runnable() {
        public void run() {

          Random rand=new Random();               
          time=time-1;
          but1=(Button) findViewById(R.id.b1);
          but1.setBackgroundResource(R.drawable.happy);
          but1.setContentDescription("happy");
          but2=(Button) findViewById(R.id.b2);
          but2.setBackgroundResource(R.drawable.happy);
          but2.setContentDescription("happy");

          int num = rand.nextInt(buttonIds.length);
          int buttonId = buttonIds[num];

          Button bb=(Button) findViewById(buttonId);

          if(bb.getContentDescription().equals(button.getContentDescription()))
          {
            bb.setBackgroundResource(R.drawable.happy);
            bb.setContentDescription("happy");
            wrong++;
          }
          else
          {
            bb.setBackgroundResource(R.drawable.whoa);
            count++;

            bb.setContentDescription("whoa");
          }

        }
      });
    }

  },0, 1000);
}

    public void onClick(View v){
 //when i clicked on any button its not even entering here
    System.out.println("in onlcik............");
    int aaa=v.getId();
    System.out.println("click id is------------"+aaa);
    for(i=0;i<9;i++){
    if(aaa==buttonIds[i]){
        findViewById(buttonIds[i]).setOnClickListener(new View.OnClickListener() {

            Drawable dd=findViewById(buttonIds[i]).getBackground();
            public void onClick(View arg0) {
             System.out.println("yes...");

            }
        });
    }
    }
}

 } 
```

我已经更新了代码-我使用了 onclicklistener.but 它也不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T04:27:06.070

假设您已经`onClick`为按钮正确设置了处理程序，您可以通过简单地调用它来调用它`button.performClick()`

# java - 从 JSP 调用后端 Java 类

> ID：14805836
> 
> 赞同：3
> 
> 时间：2013-02-11T04:21:16.533
> 
> 标签：java, asp.net, jsp, jakarta-ee

我来自 .NET 背景，刚开始使用 Java。我发现 Java SE 没有问题，因为它们紧密遵循相同的概念。但是，在使用 Java EE 时，我发现它比 ASP .NET 稍微复杂一些。

我正在尝试在 Java EE 应用程序中实现 N 层架构。所以我已经编写了我的逻辑和数据层，并在 Java SE 应用程序（这是我的管理后端应用程序）中成功地测试了它们，并且刚刚开始在我的显示层上工作。

问题来了。我正在尝试从 JSP（由按钮事件触发）调用我的业务逻辑层以调用某个方法并将结果输出（例如布尔值）返回给 JSP。

**我怎么做？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T05:20:38.230

你可以在 jsp 中做所有事情。使用 JAVA **MVC 框架**

**即使没有，您也可以使用Servlet**执行简单的反手操作，
或者您可以使用**Java Beans**，这是 Java bean 的简单业务逻辑实现示例，请参考[http://www.tutorialspoint.com/jsp/jsp_java_beans.htm](http://www.tutorialspoint.com/jsp/jsp_java_beans.htm)

下面给出了**Servlet的示例**

**索引.jsp**

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>

<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
    </head>
    <body>
        <form action="add" method="post">
        Value 1:<input type="text" name="val1" id="val1"/><br>
        Value 2:<input type="text" name="val2" id="val2"/><br>
        <input type="submit" value="Submit"/><br>
        </form>
        <%String sum="";
         sum = (String)request.getAttribute("val3"); %>
        <input type="text" value="<%=sum%>" />
    </body>
</html> 
```

**web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
    <servlet>
        <servlet-name>add</servlet-name>
        <servlet-class>controller.add</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>add</servlet-name>
        <url-pattern>/add</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
    <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>
</web-app> 
```

**添加.java**

```
package controller;

import java.io.IOException;
import java.io.PrintWriter;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
public class add extends HttpServlet {
    String val3;
    protected void processRequest(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        response.setContentType("text/html;charset=UTF-8");
        PrintWriter out = response.getWriter();

        String val1=request.getParameter("val1");
        String val2=request.getParameter("val2");
        if(val1 != null && val2 != null)
        val3=""+(Integer.parseInt(val1)+Integer.parseInt(val2));
        else
        val3="";
        request.setAttribute("val3",val3);
        request.getRequestDispatcher("index.jsp").forward(request, response); 

        try {
        } finally {            
            out.close();
        }
    }

    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        processRequest(request, response);
    }

    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        processRequest(request, response);
    }

    @Override
    public String getServletInfo() {
        return "Short description";
    }// </editor-fold>
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T04:29:58.267

在 ASP.NET 中这种由 .Net 处理的东西（javascript 和其他由 .Net 在页面中插入的东西）但在 java 中，您必须自己编写它们。在 .Net 中，您有一些类似的 javascript 方法，`do_postback`但在 java 中您应该编写 javascripts。请参阅此代码：

脚本：

```
<script>
function doPostback() {
    // calling some java method using Ajax or Http Post method or redirect to another page
}
</script> 
```

html:

```
<button type="button" onclick="doPostback()">Go</button> 
```

# javascript - 如何克隆元素并用克隆的元素替换现有元素？

> ID：14805837
> 
> 赞同：1
> 
> 时间：2013-02-11T04:21:16.783
> 
> 标签：javascript, html, dom, prototypejs

我正在尝试使用从 ajax 调用获得的大约 5000 个选项填充一个选择框。我想使用相同的数据来更新其他 8 个选择框。我正在使用prototype.js 并使用 .update() 函数。但问题是它冻结了 IE 和 Chrome 一段时间。因此，我尝试使用 .update() 函数创建第一个选择框，然后克隆选择框并用它替换其他 8 个选择框。请建议这是否会提高性能以及我如何实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:22:10.667

因为您将如此大量的选项推送到选择框中，所以主 javascript 线程正在完成将元素填充到 DOM 中的所有工作（无论 JS 框架如何）。将来您将能够在不阻塞主线程的情况下分离 WebWorker 线程来完成这项工作，但在所有浏览器（嗯 IE）都支持它之前，我不建议实施它。

我有 2 条建议

1.  不要同时填充所有下拉列表，而是让这些[Ajax.Autocomplete](http://madrobby.github.com/scriptaculous/ajax-autocompleter/)字段通过 ajax 查询结果。

2.  使下拉菜单分阶段显示 - 在选择第一个下拉菜单后`clone()`，然后显示下一个 - 结果是相同的，但延迟会随着时间的推移而中断

# php - ExtJS 4 - 从超链接加载网格

> ID：14805838
> 
> 赞同：1
> 
> 时间：2013-02-11T04:21:17.717
> 
> 标签：php, javascript, extjs4.1

我有一个从服务器动态加载数据的网格。

要加载的数据子集基于通过页面上的其他组件做出的各种用户选择。做出选择后，单击按钮，设置 extraParams，并通过 PHP POST 加载网格数据。这一切都很好。

问题：我可以采取什么方法将生成的页面/网格视图保存为 URL 链接？或者相反，如何通过 URL 再次加载该页面（显示数据子集）？

（顺便说一句，如果它最终成为解决方案的一部分，我可以切换到 PHP GET。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T04:27:07.917

一种解决方案可以将最后一次选择保存到会话变量中，因此它不依赖于 POST 发送。所以：

1.  发送带有过滤器的 POST
2.  将其保存到会话
3.  重定向到同一页面以确保帖子数据将在客户端被删除并且不会再次发送
4.  重新加载页面会刷新数据

它也可以用于分页 - 您的过滤器将始终被保存，您将只发送请求或新页面（只能通过 GET 或任何您想要的方式完成）。

下一个选项是将整个过滤器保存到数据库的某个位置并为其创建一个唯一的哈希。然后，只需使用此哈希作为 GET 参数再次请求页面。

# iphone - 使用 GPUImageRGBFilter

> ID：14805841
> 
> 赞同：4
> 
> 时间：2013-02-11T04:21:34.710
> 
> 标签：iphone, ios, image-processing, gpuimage

我试图使用 GPUImageRGBFilter 但没有成功。我想更改每个通道值，例如：

```
Red: 0.2
Green: 0.4
Blue: 0.3 
```

我怎样才能做到这一点？谁能告诉我如何使用 GPUImageRGBFilter？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T13:59:36.650

属性在 GPUImageRGBFilter 类中给出，请检查

@property (readwrite, nonatomic) CGFloat red;
@property (readwrite, nonatomic) CGFloat green;
@property (readwrite, nonatomic) CGFloat blue；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T09:54:05.043

假设您要做的是将每个颜色通道的值乘以帖子中的值，那么解决方案应该非常简单；

```
GPUImageRGBFilter *rgbFilter = [[GPUImageRGBFilter alloc] init];
[rgbFilter setRed:.2];
[rgbFilter setGreen:.4];
[rgbFilter setBlue:.3]; 
```

然后按照[文档](https://github.com/BradLarson/GPUImage#readme)`addTarget:`说明使用and 。`processImage`

# erlang - 单独工作，但在我用钢筋释放它之后就不行了

> ID：14805842
> 
> 赞同：0
> 
> 时间：2013-02-11T04:21:39.017
> 
> 标签：erlang, rebar, webmachine, erlangweb

一个基于 Webmachine 和 ErlyDtl 的简单应用程序，当我使用 ./start 启动它时它可以工作。如果我尝试使用钢筋进行发布，那么它会启动，但是当我执行请求时，它将失败并出现以下错误。我试图包含编译器......仍然没有帮助其他东西丢失但不知道如何检测。

```
{error,
{error,undef,
    [{erlydtl_runtime,find_value,[param,[{param,"Slartibartfast"}]],[]},
     {index_dtl,render_internal,4,[]},
     {index_dtl,render,2,[]},
     {web_resource,to_html,2,[{file,"src/web_resource.erl"},{line,13}]},
     {webmachine_resource,resource_call,3,
         [{file,"src/webmachine_resource.erl"},{line,183}]},
     {webmachine_resource,do,3,
         [{file,"src/webmachine_resource.erl"},{line,141}]},
     {webmachine_decision_core,resource_call,1,
         [{file,"src/webmachine_decision_core.erl"},{line,48}]},
     {webmachine_decision_core,decision,1,
         [{file,"src/webmachine_decision_core.erl"},{line,555}]}]}} 
```

这是我的 reltool.config

```
{sys, [
   {lib_dirs, ["../apps", "../deps"]},
   {erts, [{mod_cond, derived}, {app_file, strip}]},
   {app_file, strip},
   {rel, "numbes", "1",
    [
     web,
     cowboy,
     crypto,
    ranch,
    kernel,
    mochiweb,
    compiler,
    webmachine,
     stdlib,
     inets,
     sasl
    ]},
   {rel, "start_clean", "",
    [
     kernel,
     stdlib
    ]},
   {boot_rel, "numbes"},
   {profile, embedded},
   {incl_cond, exclude},
   {excl_archive_filters, [".*"]}, %% Do not archive built libs
   {excl_sys_filters, ["^bin/.*", "^erts.*/bin/(dialyzer|typer)",
                       "^erts.*/(doc|info|include|lib|man|src)"]},
   {excl_app_filters, ["\.gitignore"]},
   {app, sasl,   [{incl_cond, include}]},
   {app, stdlib, [{incl_cond, include}]},
   {app, kernel, [{incl_cond, include}]},
   {app, cowboy, [{incl_cond, include}]},
   {app, crypto, [{incl_cond, include}]},
   {app, inets, [{incl_cond, include}]},
   {app, mochiweb, [{incl_cond, include}]},
   {app, ranch, [{incl_cond, include}]},
   {app, compiler, [{incl_cond, include}]},
   {app, webmachine, [{incl_cond, include}]},
   {app, web, [{incl_cond, include}]}
  ]}.

{target_dir, "numbes"}.

{overlay, [
       {mkdir, "log/sasl"},
       {copy, "files/erl", "\{\{erts_vsn\}\}/bin/erl"},
       {copy, "files/nodetool", "\{\{erts_vsn\}\}/bin/nodetool"},
       {copy, "files/numbes", "bin/numbes"},
       {copy, "files/numbes.cmd", "bin/numbes.cmd"},
       {copy, "files/start_erl.cmd", "bin/start_erl.cmd"},
       {copy, "files/install_upgrade.escript", "bin/install_upgrade.escript"},
       {copy, "files/sys.config", "releases/\{\{rel_vsn\}\}/sys.config"},
       {copy, "files/vm.args", "releases/\{\{rel_vsn\}\}/vm.args"}
      ]}. 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T05:32:52.627

查看日志文件我唯一能知道的是模块 erlydtl_runtime 不包含在版本中，或者至少不包含在搜索路径中。

即使缺少模块，应用程序也会启动是正常的，默认情况下，应用程序只会在第一次调用模块时尝试加载模块。

# objective-c - 检查答案并删除 UIButton (Objective-C)

> ID：14805843
> 
> 赞同：0
> 
> 时间：2013-02-11T04:21:39.470
> 
> 标签：objective-c, ipad, uibutton, nsarray, uilabel

我有一系列随机加载的问题和答案，每个问题有 3 个选择，在我的一个问题中，我只有对与错，

我的问题是如何设置我的 if 语句，如果我的答案是真或假，不要显示最后一个按钮，

这是我的代码：

```
- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view from its nib.
NSString *qOne = @"Question 1";
NSString *qTwo = @"Question 2";
NSString *qThree = @"Question 3";
NSString *qFour = @"Question 4";

NSString *answerOne = @"Après le souper";
NSString *answerTwo = @"1";
NSString *answerThree = @" Holstein";
NSString *answerFour = @" yes";

NSString *answer2One = @"Après un exercice physique";
NSString *answer2Two = @" 2";
NSString *answer2Three = @" Jersey";
NSString *answer2Four = @" No";

NSString *answer3One = @"Avant un exercice physique";
NSString *answer3Two = @" 4";
NSString *answer3Three = @" Canadienne"; 
```

我想删除这部分 NSString *answer3Four = @" ";

```
NSString *correctOne = @"Après un exercice physique";
NSString *correctTwo = @" 4";
NSString *correctThree = @" Yes";
NSString *correctFour = @" 14";

answerComments = [[NSArray alloc] initWithObjects: answerOne, answerTwo, answerThree, answerFour, nil];
answer2Comments = [[NSArray alloc] initWithObjects: answer2One, answer2Two, answer2Three, answer2Four, nil];
answer3Comments = [[NSArray alloc] initWithObjects: answer3One, answer3Two, answer3Three, answer3Four,nil];

qComments = [[NSArray alloc] initWithObjects:qOne, qTwo, qThree, qFour, nil];

correctComments = [[NSArray alloc] initWithObjects: correctOne, correctTwo, correctThree, correctFour,  nil];

// A random string is selected and assigned to artist.
int rand = arc4random()%4;

NSString *artist = [qComments objectAtIndex:rand];
firstAnswer = [answerComments objectAtIndex:rand];
secondAnswer = [answer2Comments objectAtIndex:rand];
threeAnswer = [answer3Comments objectAtIndex:rand];
correct = [correctComments objectAtIndex:rand];
NSLog (@"%@",correct);

// Here's the problematic code:
[question setText:(artist)];
[question  setFont:[UIFont fontWithName:@"HelveticaRoundedLTStd-Bd" size:42]];

question.adjustsFontSizeToFitWidth = NO;
question.numberOfLines = 0;

[test setTitle:(firstAnswer) forState:UIControlStateNormal];
[test setBackgroundImage:[UIImage imageNamed:@"activeBtn.png"] forState:UIControlStateHighlighted];

[ansONE setTitle:(secondAnswer) forState:UIControlStateNormal];
[ansONE setBackgroundImage:[UIImage imageNamed:@"activeBtn.png"] forState:UIControlStateHighlighted];

ansTWO = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[ansTWO addTarget:self
           action:@selector(ansTWO:)
 forControlEvents:UIControlEventTouchDown];
[ansTWO setTitle:(threeAnswer) forState:UIControlStateNormal];
[ansTWO setBackgroundImage:[UIImage imageNamed:@"activeBtn.png"] forState:UIControlStateHighlighted];
ansTWO.titleLabel.font = [UIFont fontWithName:@"HelveticaRoundedLTStd-Bd" size:24];
[ansTWO setTitleColor:[UIColor colorWithRed:21/255.0 green:119/255.0 blue:183/255.0 alpha:.77] forState:UIControlStateNormal];
ansTWO.titleLabel.textAlignment = UITextAlignmentCenter;
[ansTWO setTag:2];

UIImage *buttonImage = [UIImage imageNamed:@"quizBtn.png"];
[ansTWO setBackgroundImage:buttonImage forState:UIControlStateNormal];
ansTWO.frame = CGRectMake(243, 586,549, 56);
[self.view addSubview:ansTWO];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T04:46:36.873

假设您知道如何将答案解释为 TRUE 或 FALSE，您可以使用如下 if 语句：

```
//1st Option
if(answer){
    button.hidden = YES;
    //hide or unhide other buttons
}

//2 Option
if(answer){
    [button removeFromSuperView];
    //add or remove other buttons
} 
```

# android - Android XML 编辑器错误

> ID：14805844
> 
> 赞同：0
> 
> 时间：2013-02-11T04:21:45.507
> 
> 标签：android, eclipse

![在此处输入图像描述](../Images/0674ae59aa5ce3a830c529472f15508d.png) 当我打开 Eclipse 时，此错误显示在屏幕上并且不显示任何项目

# django - Django settings.DATABASE 'default' 值未设置

> ID：14805849
> 
> 赞同：0
> 
> 时间：2013-02-11T04:22:35.617
> 
> 标签：django, django-settings

我有一个在 Ubuntu 12.10 上使用 Python 2.7.3 的 Django 1.4.3 项目。在我的整个项目中，只有一个settings.py文件，而在manage.py中，我有这一行

```
os.environ.setdefault("DJANGO_SETTINGS_MODULE", "hellodjango.settings") 
```

当然，我的项目名称是 hellodjango，settings.py 文件在子文件夹 hellodjango 中（它们具有相同的名称）。

当我在控制台中键入以下行时：

```
python manage.py diffsettings 
```

这些是我对数据库的结果：

```
DATABASES = {'default': {}, 'mioa': {'1': 'this thingy', '2': 'that thingy'}} 
```

settings.py 中的相关行如下：

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3',
        'NAME': 'mydatabase'
    },
    'mioa': {
        '1': 'this thingy',
        '2': 'that thingy'
    }
} 
```

我在那里有“mioa”条目来证明我的问题。出于某种原因，未设置“默认”字段。有谁知道为什么会这样？或者解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T09:59:04.663

帮助`diffsettings`说：

```
Displays differences between the current settings.py and Django's
default settings 
```

这意味着，它只显示您的值和默认值之间的差异。似乎您的值与默认值完全相同，因此您看不到任何区别。

尝试另一个引擎和/或数据库名称，您会看到它已更改。

# java - 找到一组矩形的 Rectangle 和 Union 之间的交集？

> ID：14805850
> 
> 赞同：3
> 
> 时间：2013-02-11T04:22:48.133
> 
> 标签：java, algorithm, math, geometry, computational-geometry

我正在寻找一种方法来计算单个矩形和一小组矩形的并集之间的交集面积。

![我想要的数学表示](../Images/873d178d9c1176d3f3f157e2af0f6d87.png)

我正在使用 Java，所有矩形都用整数 (x,y,w,h) 表示。所有矩形都与 x/y 轴对齐。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T06:25:35.293

遍历并将您的矩形表示为 (x,y,w,h)，而不是 (x1,y1,x2,y2)，即 (x,y,x+w,y+h)。

然后，遍历所有 Rj 并将矩形“剪辑”到 Rect1 的坐标：

```
Rj.x1 = max(Rj.x1, Rect1.x1)
Rj.y1 = max(Rj.y1, Rect1.y1)
Rj.x2 = min(Rj.x2, Rect1.x2)
Rj.y2 = min(Rj.y2, Rect1.y2) 
```

现在，通过并删除任何 Rj 的地方`Rj.x1>=Rj.x2`或`Rj.y1>=Rj.y2`在这种情况下，矩形没有相交。

之后，总结剩余矩形的所有区域（简单`(Rj.x2-Rj.x1) * (Rj.y2-Rj.y1)`）。

此时，您将重复计算任何被剪裁的 Rj 重叠的区域。

因此，您需要遍历所有 Ri 和所有 Rj，其中 j>i 并且将两者相互夹住，但是这一次，如果存在交叉点（与上述相同的测试），则需要减去与您到目前为止的值相交的区域，以消除重复计算。

不幸的是，这将双重删除三重重叠的任何区域。因此，您将需要找到这些区域并将它们重新添加进去。等等，对于四重重叠、五重重叠等。

听起来会变得很混乱......

也许最简单的方法是将 Rj 绘制到红色画布上，然后在最后计算 Rect1 内的红色像素。（当然，您不必使用真正的 Canvas。您可以使用位数组编写自己的。）甚至可能存在一些场景（例如具有许多小矩形的小坐标空间），这比解析解。但是，当然，这只有在您有整数坐标时才有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T04:31:40.813

您将可能在 Rect1 和 RectSet 联合中的每个矩形之间有一个唯一的交集。因此，您将分别在 Rect1 和联合中的每个矩形之间进行交集。相交区域是 Rect1 和并集中的矩形之间所有相交部分的并集。

优化是为矩形的联合创建一个丰富的矩形（希望在创建联合时完成）。如果 Rect1 不与这个边界矩形相交，你可以跳过做任何进一步的交点和空的区域。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T05:48:12.457

两个矩形的交集本身就是一个矩形（可能是退化的，但它们的面积为零并且可以忽略）。此外，并集的交集与交集的并集相同（分配律）。因此，您可以将 R1 与每个 Rj 相交并找到结果矩形的并集。

要找到联合，最简单的方法可能是将场景分成垂直条纹，方法是在每个顶点上画一条垂直线。然后在每个条带内，这是一个众所周知的一维问题，通过计算进出点并删除计数大于一的点来解决。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-22T16:50:20.630

[nm 的答案](https://stackoverflow.com/a/14806582/1086034)和PQuinn[的答案](https://stackoverflow.com/a/14805913/1086034)都建议将交集分布在联合中，然后找到联合的区域。这是个好主意。

在 java 中，我建议在 R1 和 Rj 之间创建一组新的非退化交叉点，基于大多数交叉点将退化的假设。然后使用[http://codercareer.blogspot.com/2011/12/no-27-area-of-rectangles.html](http://codercareer.blogspot.com/2011/12/no-27-area-of-rectangles.html)上的算法来找到交叉点集的面积。

# mysql - MySQL - 基于同一表中的行求和列值

> ID：14805851
> 
> 赞同：49
> 
> 时间：2013-02-11T04:23:00.410
> 
> 标签：mysql, select, group-by, left-join, pivot

我正在尝试根据同一张表中的 ProductID 在新列中获取“现金”、“支票”和“信用卡”总计。

表 - 付款

```
+-----------+------------+---------------+--------+
| ProductID |  SaleDate  | PaymentMethod | Amount |
+-----------+------------+---------------+--------+
|         3 | 2012-02-10 | Cash          |     10 |
|         3 | 2012-02-10 | Cash          |     10 |
|         3 | 2012-02-10 | Check         |     15 |
|         3 | 2012-02-10 | Credit Card   |     25 |
|         4 | 2012-02-10 | Cash          |      5 |
|         4 | 2012-02-10 | Check         |      6 |
|         4 | 2012-02-10 | Credit Card   |      7 |
+-----------+------------+---------------+--------+ 
```

所需的输出 -

```
+------------+------+-------+-------------+-------+
| ProductID  | Cash | Check | Credit Card | Total |
+------------+------+-------+-------------+-------+
|          3 |   20 |    15 |          25 |    60 |
|          4 |    5 |     6 |           7 |    18 |
+------------+------+-------+-------------+-------+ 
```

我试过 LEFT JOINing 同一张桌子，但没有任何成功。任何建议，将不胜感激。谢谢。

不成功和不完整的尝试 -

```
SELECT P.ProductID, Sum( PCash.Amount ) AS 'Cash', SUM( PCheck.Amount ) AS 'Check', SUM( PCredit.Amount) AS 'Credit Card' 
FROM Payments AS P 
LEFT JOIN Payments AS PCash ON P.ProductID = PCash.ProductID AND PCash.PaymentMethod = 'Cash'
LEFT JOIN Payments AS PCheck ON P.ProductID = PCheck.ProductID AND PCheck.PaymentMethod = 'Check'
LEFT JOIN Payments AS PCredit ON P.ProductID = PCredit.ProductID AND PCredit.PaymentMethod = 'Credit'
WHERE P.SaleDate = '2012-02-10' GROUP BY ProductID; 
```

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2013-02-11T04:30:53.420

我认为你让这比它需要的更复杂一些。

```
SELECT
    ProductID,
    SUM(IF(PaymentMethod = 'Cash', Amount, 0)) AS 'Cash',
    -- snip
    SUM(Amount) AS Total
FROM
    Payments
WHERE
    SaleDate = '2012-02-10'
GROUP BY
    ProductID 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-11T07:31:25.107

这可能看起来有点复杂，但完全符合您的要求

```
SELECT 
  DISTINCT(p.`ProductID`) AS ProductID,
  SUM(pl.CashAmount) AS Cash,
  SUM(pr.CashAmount) AS `Check`,
  SUM(px.CashAmount) AS `Credit Card`,
  SUM(pl.CashAmount) + SUM(pr.CashAmount) +SUM(px.CashAmount) AS Amount
FROM
  `payments` AS p 
  LEFT JOIN (SELECT ProductID,PaymentMethod , IFNULL(Amount,0) AS CashAmount FROM payments WHERE PaymentMethod = 'Cash' GROUP BY ProductID , PaymentMethod ) AS pl 
    ON pl.`PaymentMethod` = p.`PaymentMethod` AND pl.ProductID = p.`ProductID`
  LEFT JOIN (SELECT ProductID,PaymentMethod , IFNULL(Amount,0) AS CashAmount FROM payments WHERE PaymentMethod = 'Check' GROUP BY ProductID , PaymentMethod) AS pr 
    ON pr.`PaymentMethod` = p.`PaymentMethod` AND pr.ProductID = p.`ProductID`
  LEFT JOIN (SELECT ProductID, PaymentMethod , IFNULL(Amount,0) AS CashAmount FROM payments WHERE PaymentMethod = 'Credit Card' GROUP BY ProductID , PaymentMethod) AS px 
    ON px.`PaymentMethod` = p.`PaymentMethod` AND px.ProductID = p.`ProductID`
GROUP BY p.`ProductID` ; 
```

输出

```
ProductID | Cash | Check | Credit Card | Amount
-----------------------------------------------
    3     | 20   |  15   |   25        |  60
    4     | 5    |  6    |   7         |  18 
```

### [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/b1340/2)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-11-20T09:49:13.967

SUM CASE 使用示例：

```
 SELECT 
  DISTINCT(p.`ProductID`) AS ProductID,
  SUM(IF(p.`PaymentMethod`='Cash',Amount,0)) AS Cash_,
  SUM(IF(p.`PaymentMethod`='Check',Amount,0)) AS Check_,
  SUM(IF(p.`PaymentMethod`='Credit Card',Amount,0)) AS Credit_Card_,
  SUM( CASE PaymentMethod 
      WHEN 'Cash' THEN Amount
      WHEN 'Check' THEN Amount
      WHEN 'Credit Card' THEN Amount
     END) AS Total
FROM
  `payments` AS p 
GROUP BY p.`ProductID`; 
```

SQL FIDDLE： [http ://www.sqlfiddle.com/#!9/23d07d/18](http://www.sqlfiddle.com/#!9/23d07d/18)

[![结果和表格视图](../Images/55e3ad7de65efca18611c5da882fcb80.png)](https://i.stack.imgur.com/K5qUW.jpg)

# java - Redis 是否有可嵌入的 Java 替代方案？

> ID：14805852
> 
> 赞同：26
> 
> 时间：2013-02-11T04:23:01.090
> 
> 标签：java, data-structures, redis, set, embed

[根据这个线程](https://stackoverflow.com/questions/3047010/best-redis-library-for-java)，如果我想从 Java 中使用 Redis，Jedis 是最好的选择。

但是，我想知道是否有任何库/包提供与 Redis 中已经存在的类似高效的集合操作，但可以直接嵌入到 Java 应用程序中，而无需设置单独的服务器。（即，使用 Jetty 作为 Web 服务器）。

更准确地说，我希望能够有效地执行以下操作：

1.  有一大组 M 个用户（M 个事先不知道）。
2.  有一大组 N 项。
3.  我们希望用户检查项目，一次一个用户/项目，这会产生一个存储结果（在普通数据库中）。
4.  每次用户到达时，我们都希望为该用户分配该用户以前未见过的现有结果数量最少的项目。当我们只关心让所有项目查看大致相同的次数时，这会为所有到达的用户生成项目的近似循环分配。

以上以并行方式发生。当 M 和 N 很大时，Redis 比 SQL 查询更有效地完成上述操作。有没有办法使用比启动 Redis 服务器更轻量的可嵌入 Java 库来做到这一点？

我认识到可以使用 Java 的并发库编写一堆代码，这些代码大致近似于此（在某种程度上，我已经做到了），但这并不是我在这里寻找的。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-07T19:25:16.807

看看[伏地魔项目](http://www.project-voldemort.com/voldemort/)。它是由Linked-In创建的分布式键值存储，它支持嵌入的能力。

在快速入门指南中是一个运行嵌入式服务器与独立运行服务器的小示例。

```
VoldemortConfig config = VoldemortConfig.loadFromEnvironmentVariable();
VoldemortServer server = new VoldemortServer(config);
server.start(); 
```

我对 Redis 了解不多，因此无法将它们的功能与功能进行比较。在我们使用 Voldemort 的项目中，我们使用了它的只读后备存储，效果很好。它使我们能够在我们的处理数据中心“预编译”一个双日数据库，并将其“运送”到边缘数据中心。这样，每个边缘数据中心都有其数据集的本地副本。

编辑：重读您的问题后，我想添加[Gauva 的表](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Table.html)——这个表数据结构也可能是您正在寻找的东西，并且与您使用许多无 sql 数据库获得的类似。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-29T07:42:52.603

[Hazelcast](http://www.hazelcast.org)提供了许多分布式数据结构实现，可以用作 Redis 服务的纯 Java 替代方案。然后，您可以发布一个包含所有必需依赖项的“jar”来运行您的应用程序。在您自己的应用程序中，您可能需要针对与 Redis 稍有不同的原语进行调整。

该领域的商业解决方案包括[Teracotta 的 Enterprise Ehcache](http://terracotta.org/products/enterprise-ehcache)和[Oracle Coherence](http://www.oracle.com/technetwork/middleware/coherence/overview/index.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-30T05:43:13.953

看看 lmdb（闪电内存数据库），因为我需要完全相同的东西。我将 dropwizard 应用程序部署到容器中，添加 redis 或其他外部依赖项很痛苦。这似乎表现良好，具有良好的活动性。仅供参考，不过，我还没有在生产中使用它。

[https://github.com/lmdbjava/lmdbjava](https://github.com/lmdbjava/lmdbjava)

* * *

## 回答 #4

> 赞同：-6
> 
> 时间：2013-04-26T04:59:36.337

Google 的 Guava 库提供了与 redis 提供的相同（甚至更多）集合运算符的友好版本。

[https://code.google.com/p/guava-libraries/wiki/CollectionUtilitiesExplained](https://code.google.com/p/guava-libraries/wiki/CollectionUtilitiesExplained)

例如

```
    番石榴
    Sets.intersection(a,b) 烧结 ab
    a.count() 发现一个
    Sets.difference(a,b) sdiff ab
    sets.union(a,b) sunion ab

```

多重集也是 redis 排序集的一个相当简单的代理。

# c++ - 编写预处理器函数：语法是否正确

> ID：14805853
> 
> 赞同：1
> 
> 时间：2013-02-11T04:23:14.933
> 
> 标签：c++, c-preprocessor

我正在试验类似预处理器函数的宏，所以我正在尝试编写一个向前声明常规函数的宏。但是当我去编译时，它说第 2 行的语法不正确。

我究竟做错了什么？

```
#define FORWARD_DECLARE_CUSTOM_FUNCT(fName) "int" #fName "(int id, string msg, string cmd);"
FORWARD_DECLARE_CUSTOM_FUNCT("abc") // LINE 2: Should become "int abc(int id, string msg, string cmd);"

void test()
{
    abc(1, "", "");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T04:29:45.677

问题是所有的引号。

```
#define FORWARD_DECLARE_CUSTOM_FUNCT(fName) "int" #fName "(int id, string msg, string cmd);" 
```

转换为（在连接字符串文字之后）：

```
"int abc (int id, string msg, string cmd);" 
```

然而，

```
#define FORWARD_DECLARE_CUSTOM_FUNCT(fName) int #fName (int id, string msg, string cmd); 
```

翻译为：

```
int "abc" (int id, string msg, string cmd); 
```

你真正需要的只是：

```
#define FORWARD_DECLARE_CUSTOM_FUNCT(fName) int fName (int id, string msg, string cmd); 
```

像这样使用它：

```
FORWARD_DECLARE_CUSTOM_FUNCT(abc) 
```

这只是文本替换。我会亲自删除宏中的分号，并让用户在每次使用后也添加一个，使其更像是一个声明。对我来说感觉更自然。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T04:30:06.713

如果您尝试这样做，我建议使用`-E`标志 for `g++`（如果您使用 gcc、MSVC 或您使用的任何编译器都会有类似的东西）。这将在预处理器运行完文件后打印出文件。

无论如何，你正在寻找的是这样的：

```
//No #
#define FORWARD_DECLARE_CUSTOM_FUNCT(fName) void fName(int id, string msg, string cmd);

FORWARD_DECLARE_CUSTOM_FUNCT(abc) //No ""

void test()
{
    abc(1, "", "");
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T04:30:03.027

你需要远离字符串化。您不会为名称编写带有字符串的函数；您不会使用该符号在预处理器中编写此类函数。

查看预处理器的输出：

```
g++ -E yourfile.cpp 
```

或其等价物。我从你的两行得到的输出是：

```
"int" "\"abc\"" "(int id, string msg, string cmd);" 
```

这看起来不太像函数声明；它是一个字符串，包含类似于函数声明的内容（但嵌套的双引号甚至会混淆）。

稍微清理一下：

```
#define FORWARD_DECLARE_CUSTOM_FUNCT(fName) int fName(int id, string msg, string cmd)
FORWARD_DECLARE_CUSTOM_FUNCT(abc); 
```

注意分号从宏定义到宏调用的转移；对于经验丰富的 C++ 程序员来说，这看起来更好（尽管任何宏对 C++ 程序员来说都是一种诅咒；它们更容易被 C 程序员接受）。

# c# - 对订阅者的并行回调

> ID：14805856
> 
> 赞同：1
> 
> 时间：2013-02-11T04:23:39.823
> 
> 标签：c#, wcf, .net-4.0, parallel-processing, publish-subscribe

我有一个向订阅客户端发送数据的 WCF 服务。使用顺序循环过程非常慢，因为循环中有 3 个循环，例如；

```
for (int x = 0 ; x <= MasterTables.count - 1 ;x ++)
{
    for (int y = 0; y <= MasterData[x].count ; y++)
    {
        foreach (SubList subscriber in subscribers.ToList())
        {
            SendDatatoSubscriber();
        }
    }
} 
```

因此，我将顺序循环转换为并行循环，这反过来又快得多，但缺点是服务器同时向单个订阅者发布大量回调，因此传输通道超时。

SendDatatoSubscriber() 事件是一个同步调用，因为我需要客户端确认它已接收到对象并向服务器返回特定消息，因为有更多事件取决于此结果。

我的网络配置和客户端配置如下：

服务配置：

```
<?xml version="1.0"?>
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0"/>
    <authentication mode="None"/>
    <pages controlRenderingCompatibilityVersion="3.5" clientIDMode="AutoID"/>
  </system.web>
  <system.serviceModel>
    <bindings>
      <netTcpBinding>
        <binding name="NetTcpSecure" closeTimeout="23:00:00" openTimeout="23:00:00" receiveTimeout="23:00:00" sendTimeout="23:00:00" transactionFlow="false" transferMode="Buffered" maxBufferPoolSize="2147483647" maxBufferSize="2147483647" maxConnections="2000" maxReceivedMessageSize="2147483647" portSharingEnabled="true">
          <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647"/>
          <reliableSession inactivityTimeout="23:00:00" enabled="false"/>
          <security mode="Message">
            <transport clientCredentialType="None">
              <extendedProtectionPolicy policyEnforcement="Never"/>
            </transport>
            <message clientCredentialType="UserName"/>
          </security>
        </binding>
      </netTcpBinding>
    </bindings>
    <services>
      <service behaviorConfiguration="service.ClientBehavior" name=" service.DTSClient">
        <endpoint address="" behaviorConfiguration="WcfDts.DTSClientEndpointBehavior" binding="netTcpBinding" bindingConfiguration="NetTcpSecure" name="ClientNetTcp" contract="WcfDts.IDTSClient"/>
        <endpoint address="mex" binding="mexHttpBinding" behaviorConfiguration="WcfDts.DTSClientEndpointBehavior" contract="IMetadataExchange"/>
        <host>
          <baseAddresses>
            <add baseAddress="net.tcp://127.0.0.1:8000/WcfDts/Services"/>
          </baseAddresses>
          <timeouts closeTimeout="23:00:00"/>
        </host>
      </service>
    </services>
    <behaviors>
      <endpointBehaviors>
        <behavior name=" service.DTSClientEndpointBehavior">
          <wsdlExtensions location="http://127.0.0.1/ service /Services/DTSClient.svc" singleFile="True"/>
        </behavior>
      </endpointBehaviors>
      <serviceBehaviors>
        <behavior name=" service.ClientBehavior">
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="true"/>
          <serviceCredentials>
            <userNameAuthentication userNamePasswordValidationMode="Custom" customUserNamePasswordValidatorType=" service.CustomUserNameValidator, service "/>
            <serviceCertificate findValue="CertName" storeLocation="LocalMachine" storeName="My" x509FindType="FindBySubjectName"/>
            <clientCertificate>
              <certificate findValue=" CertName " storeLocation="LocalMachine" storeName="My" x509FindType="FindBySubjectName"/>
            </clientCertificate>
          </serviceCredentials>
          <serviceThrottling maxConcurrentCalls="2000" maxConcurrentInstances="2000" maxConcurrentSessions="2000"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <extensions>
      <behaviorExtensions>
        <add name="wsdlExtensions" type="WCFExtras.Wsdl.WsdlExtensionsConfig, WCFExtras, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null"/>
      </behaviorExtensions>
    </extensions>
  </system.serviceModel>
</configuration> 
```

客户端配置：

```
<?xml version="1.0"?>
<configuration>
  <system.serviceModel>
    <bindings>
      <netTcpBinding>
        <binding name="ClientNetTcp" closeTimeout="23:59:59" openTimeout="23:59:59" receiveTimeout="23:59:59" sendTimeout="23:59:59" transactionFlow="false" transferMode="Buffered" transactionProtocol="OleTransactions" hostNameComparisonMode="StrongWildcard" listenBacklog="100000" maxBufferPoolSize="2147483647" maxBufferSize="2147483647" maxConnections="100000" maxReceivedMessageSize="2147483647">
          <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647"/>
          <reliableSession ordered="true" inactivityTimeout="23:59:59" enabled="false"/>
          <security mode="Message">
            <transport clientCredentialType="Windows" protectionLevel="EncryptAndSign"/>
            <message clientCredentialType="UserName" algorithmSuite="Default"/>
          </security>
        </binding>
      </netTcpBinding>
    </bindings>
    <client>
      <endpoint address="net.tcp://BaseAdress:Port/Services/Service.svc" binding="netTcpBinding" bindingConfiguration="ClientNetTcp" contract="Sub.IClient" name="ClientNetTcp">
        <identity>
          <dns value="CertName"/>
        </identity>
      </endpoint>
    </client>
  </system.serviceModel>
<startup><supportedRuntime version="v2.0.50727"/></startup></configuration> 
```

所以我的问题是：

1.  我是否需要修改配置以遏制超时情况
2.  或者我如何让订阅者并行接收回调？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:53:11.723

您应该考虑使 SendData 如下所示。列是平行的，行是连续的。

订户 1 | 订阅者 2 | 订阅者 3 | ……

发送数据 1 | 发送数据 1 | 发送数据 1

发送数据 2 | 发送数据 2 | 发送数据 2

发送数据 3 | 发送数据 3 | 发送数据 3

......

我的意思是你可以同时调用为不同的订阅者发送数据。因此，您一次将数据发送给多个订阅者，但同时对于单个订阅者，您应该使其顺序化，这样您就不会陷入超时。

# java - Eclipse - 像 Netbeans (GUI) 一样编辑 web.xml

> ID：14805859
> 
> 赞同：0
> 
> 时间：2013-02-11T04:23:47.530
> 
> 标签：java, eclipse, netbeans, web.xml

我正在从头开始学习 Java EE，在本教程中，我正在关注他们使用 netbeans 来配置 web.xml 和其他内容描述符（如 Glassfish 描述符）。因为他们使用 Netbeans 的图形界面，所以我找不到在 Eclipse 上做同样的事情。只是xml文件。有没有办法像我在 netbeans 中那样从图形界面配置 web.xml？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:03:24.683

没有向您展示在 GUI 中进行编辑所产生的源代码的 NetBeans 教程对于 Eclipse 来说毫无价值。Eclipse 还没有用于 web.xml 和其他 Java EE 模块描述符的编辑器。有带有此类编辑器的第三方插件，但它们与 NetBeans 编辑器不匹配。

您可能还想跟踪 Eclipse 开发此类编辑器的工作：

[http://projects.eclipse.org/projects/webtools.java-ee-config](http://projects.eclipse.org/projects/webtools.java-ee-config)

# c# - 使用列表条目作为字典的键

> ID：14805860
> 
> 赞同：3
> 
> 时间：2013-02-11T04:24:13.367
> 
> 标签：c#, .net, linq, list, dictionary

我有一个

```
List<string> myList = new List<string>(); 
```

告诉我应该在一些输入数据中找到的所有内容。我想将其转换为

```
Dictionary<string, bool> myDict = Dictionary<string, bool>(); 
```

其中字典键与列表条目相同，并且所有值都是假的。然后，我将遍历数据，并在找到元素时更新字典值。

这看起来很简单，但是

```
Dictionary<string, bool> myDict = myList.ToDictionary<string, bool>(x => false); 
```

由于错误而不起作用：

> 无法将类型隐式转换`Dictionary<bool, string>`为`Dictionary<string, bool>`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T04:27:18.543

你想做这样的事情：

```
var dict = myList.ToDictionary(s => s, s => false); 
```

您使用的重载将创建一个`Dictionary<bool, string>`, 键为 bool 并为列表中的字符串值赋值。（并且将 bool 作为键意味着，您只能有两个条目；）

此外，您很少需要像`<string, bool>`方法那样显式地指定类型参数，因为它们可以被推断出来，并且您可以将`var`其用于变量，就像上面所做的那样。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-11T04:26:41.763

您可以使用[Enumerable.ToDictionary](http://msdn.microsoft.com/en-us/library/bb549277.aspx)并指定 false 作为值。

```
myDict  = myList.ToDictionary(r=> r, r=> false); 
```

`Dictionary<bool,string>`如果您查看智能感知，您正在使用的代码将为您提供：

![在此处输入图像描述](../Images/1d640c9d4cf43e9e008652c7c5102099.png)

因此错误：

> 无法将类型“System.Collections.Generic.Dictionary”隐式转换为“System.Collections.Generic.Dictionary”

# go - 在 Go 中，你如何拥有一个带有指向数组的指针的结构？

> ID：14805861
> 
> 赞同：1
> 
> 时间：2013-02-11T04:24:36.000
> 
> 标签：go

我本来希望这段代码可以工作：

```
package main

type Item struct {
  Key string
  Value string
}

type Blah struct {
  Values []Item
}

func main() {
  var list = [...]Item {
    Item {
      Key : "Hello1",
      Value : "World1",
    },
    Item {
      Key : "Hello1",
      Value : "World1",
    },
  }

  _ = Blah {
    Values : &list,
  }
} 
```

我认为这是正确的做法；值是一个切片，列表是一个数组。&list 应该是一个切片，可以分配给 Item[]，对吧？

...但是相反，它会出现以下消息错误：

```
cannot use &list (type *[2]Item) as type []Item in assignment 
```

在 C 中，你会写：

```
struct Item {
  char *key;
  char *value;
};

struct Blah {
   struct Item *values;
}; 
```

你如何在 Go 中做到这一点？

我看到了这个问题： [使用指向数组的指针](https://stackoverflow.com/questions/2439453/go-using-a-pointer-to-array)

...但是答案要么是针对 Go 的先前版本，要么就是完全错误的。：/

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T04:38:29.777

切片不仅仅是指向数组的指针，它具有包含其长度和容量的内部表示。

如果你想从中分一杯羹，`list`你可以这样做：

```
_ = Blah {
    Values : list[:],
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T07:08:35.867

幸运的是，Go 并不像 OP 中看起来那么冗长。这有效：

```
package main

type Item struct {
        Key, Value string
}

type Blah struct {
        Values []Item
}

func main() {
        list := []Item{
                {"Hello1", "World1"},
                {"Hello2", "World2"},
        }

        _ = Blah{list[:]}
} 
```

（也在[这里](http://play.golang.org/p/eLMInDTjqw)）

PS：让我建议不要在 Go 中编写 C。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T20:46:05.653

当你开始使用 Go 时，完全忽略数组而只使用切片是我的建议。数组很少使用，给 Go 初学者带来很多麻烦。如果你有一个切片，那么你不需要指向它的指针，因为它是一个引用类型。

[这是您的示例](http://play.golang.org/p/SUs0aESDXq)，其中包含切片且没有指针，这更加惯用。

```
package main

type Item struct {
    Key   string
    Value string
}

type Blah struct {
    Values []Item
}

func main() {
    var list = []Item{
        Item{
            Key:   "Hello1",
            Value: "World1",
        },
        Item{
            Key:   "Hello1",
            Value: "World1",
        },
    }

    _ = Blah{
        Values: list,
    }
} 
```

# spring - 使用spring框架3、hibernate和websphere事务管理器的惰性异常

> ID：14805874
> 
> 赞同：1
> 
> 时间：2013-02-11T04:26:40.517
> 
> 标签：spring, hibernate, websphere, transactionmanager

我只是将我的 spring 框架升级到 spring 3.1.1，并且我正在使用 websphere 事务管理器。当我尝试访问声明为惰性的模型时，出现以下错误：

> [1/15/13 14:30:46:148 WIT] 00000021 LazyInitializ E org.hibernate.LazyInitializationException 无法初始化代理 - 没有会话 org.hibernate.LazyInitializationException：无法初始化代理 - org.hibernate.proxy 没有会话。 AbstractLazyInitializer.initialize(AbstractLazyInitializer.java:57) at org.hibernate.proxy.AbstractLazyInitializer.getImplementation(AbstractLazyInitializer.java:111) at org.hibernate.proxy.pojo.cglib.CGLIBLazyInitializer.invoke(CGLIBLazyInitializer.java:150) at com .aprisma.product.gcm.common.model.spi.gie.Menu$$EnhancerByCGLIB$$ebdf1c09.getName() 在 com.aprisma.product.gcm.service.integration.impl.SecurityServiceImpl.getMenuTree(SecurityServiceImpl.java:312 ) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect。NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:45) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37) at java.lang.reflect.Method.invoke(Method.java:599) at org.springframework.aop.support .AopUtils.invokeJoinpointUsingReflection(AopUtils.java:318) 在 org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183) 在 org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150) 在org.springframework.transaction.interceptor.TransactionInterceptor$1.doInTransaction(TransactionInterceptor.java:132) at org.springframework.transaction.jta.WebSphereUowTransactionManager$UOWActionAdapter.run(WebSphereUowTransactionManager.java:337) at com.ibm.ws.uow.UOWManagerImpl .runUnderNewUOW(UOWManagerImpl.java:1067) at com.ibm.ws.uow.UOWManagerImpl.runUnderUOW(UOWManagerImpl.java:628) at org.springframework.transaction.jta.WebSphereUowTransactionManager.execute(WebSphereUowTransactionManager.java:281) at org.springframework .transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:127) at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172) at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java :202) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.aprisma.product.gcm.service.impl.LoginServiceImpl.getMenuTree(LoginServiceImpl.java:279) 的 $Proxy1104.getMenuTree(Unknown Source)。反射.NativeMethodAccessorImpl.invoke（NativeMethodAccessorImpl。java:45) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37) 在 java.lang.reflect.Method.invoke(Method.java:599) 在 org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils .java:318) 在 org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150) 在 org.springframework.transaction 的 org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)。在 com.ibm.ws.uow.UOWManagerImpl.runUnderNewUOW(UOWManagerImpl.java :1067) 在 com.ibm。ws.uow.UOWManagerImpl.runUnderUOW(UOWManagerImpl.java:628) 在 org.springframework.transaction.jta.WebSphereUowTransactionManager.execute(WebSphereUowTransactionManager.java:281) 在 org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java: 127) at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172) at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202) at $Proxy1335.getMenuTree(Unknown Source) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:45) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37) 在 java.lang.reflect.Method。调用（方法.java：599) 在 com.aprisma.component.esm.utils.CallUtils.springCall1(CallUtils.java:452) 在 com.aprisma.component.esm.utils.CallUtils.springCall2(CallUtils.java:465) 在 com.aprisma.component .esm.utils.CallUtils.springCall(CallUtils.java:413) 在 com.aprisma.component.esm.utils.CallUtils.call(CallUtils.java:777) 在 com.aprisma.component.esm.delegate.BusinessObjectFactory.callBusinessObject (BusinessObjectFactory.java:275) 在 com.aprisma.component.web2.service.CallBOService.callService(CallBOService.java:9) 在 com.aprisma.product.gcm.retail.web.mvc.AbstractController.callService(AbstractController.java :45) 在 com.aprisma.product.gcm.retail.web.mvc.customer.LoginController.prepareMenuList(LoginController.java:376) 在 com.aprisma.product.gcm.retail.web.mvc.customer.LoginController.login （登录控制器.java：215) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:45) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37) 在 java.lang.reflect .Method.invoke(Method.java:599) 在 org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176) 在 org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod (AnnotationMethodHandlerAdapter.java:436) 在 org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923) 在 org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:424) 在com.aprisma.component.web2。servlet.CustomDispatcherServlet.doDispatch(CustomDispatcherServlet.java:17) 在 org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852) 在 org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)在 org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:738) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java :831) 在 com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1597) 在 com.ibm.com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1657)。 ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:131) 在 com.aprisma.component.web.filters.UserContextFilter。doFilterInternal(UserContextFilter.java) 在 org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76) 在 com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:188) 在 com.ibm .ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:116) 在 com.aprisma.component.web.filters.InputSanitationFilter.doFilter(InputSanitationFilter.java) 在 com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter (FilterInstanceWrapper.java:188) 在 com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:116) 在 com.ibm.ws.webcontainer.filter.WebAppFilterChain._doFilter(WebAppFilterChain.java:77) 在com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:908) 在 com.ibm.ws。webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:934) 在 com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:502) 在 com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest( ServletWrapperImpl.java:179) 在 com.ibm.ws.webcontainer.servlet.CacheServletWrapper.handleRequest(CacheServletWrapper.java:91) 在 com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:864) 在 com.ibm .ws.webcontainer.WSWebContainer.handleRequest(WSWebContainer.java:1583) 在 com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:186) 在 com.ibm.ws.http.channel.inbound.impl .HttpInboundLink.handleDiscrimination(HttpInboundLink.java:452) 在 com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewRequest(HttpInboundLink.java:511) 在 com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.processRequest(HttpInboundLink.java:305) 在 com.ibm.ws.http.channel.inbound.impl.HttpICLReadCallback.complete(HttpICLReadCallback.java:83) 在 com. ibm.ws.tcp.channel.impl.WorkQueueManager.requestComplete(WorkQueueManager.java:557) 在 com.ibm.ws.tcp.channel.impl.WorkQueueManager.attemptIO(WorkQueueManager.java:607) 在 com.ibm.ws。 tcp.channel.impl.WorkQueueManager.workerRun(WorkQueueManager.java:984) 在 com.ibm.ws.tcp.channel.impl.WorkQueueManager$Worker.run(WorkQueueManager.java:1069) 在 com.ibm.ws.util。 ThreadPool$Worker.run(ThreadPool.java:1604)impl.WorkQueueManager.requestComplete(WorkQueueManager.java:557) 在 com.ibm.ws.tcp.channel.impl.WorkQueueManager.attemptIO(WorkQueueManager.java:607) 在 com.ibm.ws.tcp.channel.impl.WorkQueueManager。 workerRun(WorkQueueManager.java:984) 在 com.ibm.ws.tcp.channel.impl.WorkQueueManager$Worker.run(WorkQueueManager.java:1069) 在 com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.爪哇：1604）impl.WorkQueueManager.requestComplete(WorkQueueManager.java:557) 在 com.ibm.ws.tcp.channel.impl.WorkQueueManager.attemptIO(WorkQueueManager.java:607) 在 com.ibm.ws.tcp.channel.impl.WorkQueueManager。 workerRun(WorkQueueManager.java:984) 在 com.ibm.ws.tcp.channel.impl.WorkQueueManager$Worker.run(WorkQueueManager.java:1069) 在 com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.爪哇：1604）

问题仅在我使用 websphere 事务管理器时出现，如果我使用 weblogic 事务管理器，它工作正常。我试图寻找同样的问题，但似乎没有人和我有同样的问题。所以，我想问一下有没有人遇到过同样的问题？有什么解决办法吗？

谢谢你，罗宾

# c++ - 错误 - 在 C++ 中无法调用没有对象的成员函数

> ID：14805878
> 
> 赞同：5
> 
> 时间：2013-02-11T04:27:03.073
> 
> 标签：c++, class

我得到编译错误

`cannot call member function ‘bool GMLwriter::write(const char*, MyList<User*>&, std::vector<std::basic_string<char> >)’ without object`

当我尝试编译时

```
 class GMLwriter{
    public:
    bool write(const char *fn, MyList<User*>& my_vec, vector<string>edges);
}; 
```

该函数稍后定义并`main`调用

`GMLwriter::write(argv[3], Users, edges);`

用户之前声明为`MyList<User*> Users;`（MyList 是一个列表 ADT，我有一个用户类），边声明为`vector<string>edges`

`object`这个错误指的是什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-11T04:28:38.640

`GMLwriter::write`不是 GMLwriter 的静态函数，需要通过对象调用。例如：

```
GMLwriter gml_writer;   
gml_writer.write(argv[3], Users, edges); 
```

如果`GMLwriter::write`不依赖于任何 GMLwriter 状态（访问 的任何成员`GMLwriter`），则可以将其设为静态成员函数。然后你可以直接调用它而不带对象：

```
class GMLwriter
{
public:
   static bool write(const char *fn, MyList<User*>& my_vec, vector<string>edges);
   ^^^^
}; 
```

那么你可以打电话：

```
GMLwriter::write(argv[3], Users, edges); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T04:30:01.720

`GMLwriter`不是对象，而是类类型。

调用成员函数需要一个对象实例，即：

```
GMLwriter foo;   
foo.write(argv[3], Users, edges); 
```

尽管您很有可能希望该功能是免费的或静态的：

```
class GMLwriter{
    public:
    // static member functions don't use an object of the class,
    // they are just free functions inside the class scope
    static bool write(const char *fn, MyList<User*>& my_vec, vector<string>edges);
};

// ...
GMLwriter::write(argv[3], Users, edges); 
```

或者

```
bool write(const char *fn, MyList<User*>& my_vec, vector<string>edges);
// ...
write(argv[3], Users, edges); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T04:34:10.440

您可能正在尝试调用/创建一个静态方法，

在这种情况下，您可能希望在声明之前使用“静态”修饰符。

[http://www.functionx.com/cppcli/classes/Lesson12b.htm](http://www.functionx.com/cppcli/classes/Lesson12b.htm)

# javascript - 如何在本地计算页脚行上 jqgrid 列的总和

> ID：14805882
> 
> 赞同：0
> 
> 时间：2013-02-11T04:27:23.493
> 
> 标签：javascript, jquery, asp.net, ajax, jqgrid

在将我的数据库显示到 jqgrid 中后，我需要添加需要计算特定列的总和的摘要页脚行。我在本地填充 Jqgrid ..我还添加了过滤数据的 Jqgrid 过滤器。根据我的需要，我想要我的摘要在从 jqgrid 过滤器工具栏过滤数据时更改页脚...

这是我的代码：

```
$(function () {
var gridData = null;
var nn = null;
$.ajax({
    url: 'Default.aspx/MyMethod',
    dataType: 'json',
    contentType: "application/json; charset=utf-8",
    type: 'POST',
    success: function (ReportDataNew, textStatus, XMLHttpRequest) {
        gridData = JSON.parse(ReportDataNew.d);
        console.log(gridData);

        $("#gridId").jqGrid({
            data: gridData,
            datatype: "local",
            height: '100%',
            autowidth: true,
            ignoreCase: true,
            rowNum: 100,
            rowList: [100, 200, 300],
            colNames: ['UserName', 'Ordinal', 'Extension', 'Trunk', 'Dialnumber', 'DialDate', 'DialTime', 'Duration', 'Destination', 'Price'],
            colModel: [
                       { name: 'username', index: 'username', width: 100, sortable: true, align: 'center' },
                       { name: 'ordinal', index: 'ordinal', width: 100, sortable: true, align: 'center' },
                       { name: 'price', index: 'price', width: 100, sortable: true, align: 'center'}
                      ] 
```

我需要计算`price`列的总和

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T04:37:25.023

在本地数据的定义中，您可以包含一个包含`userdata`将在页脚中显示的信息的段。在将数据传递到网格之前，您可以计算将在这些变量中传递的值。

前的`userdata:`

```
 userdata = new { colOneName = "Totals:", colTwoName = totalsVariableFromLocalCalculation} 
```

然后在您的网格中，您将通过以下方式打开页脚

```
 footerrow: true,
        userDataOnFooter: true, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-20T10:03:32.540

将以下代码放入您的 jqGrid 以计算价格总和：

```
footerrow:true,
loadComplete : function(){
var $grid = $("your grid id");
var colSum = $grid.jqGrid('getCol','price',false,'sum');
$grid.jqGrid('footerData','set',{price : colSum});
} 
```

# android - 恢复内部片段

> ID：14805885
> 
> 赞同：1
> 
> 时间：2013-02-11T04:27:52.833
> 
> 标签：android, android-fragments

我正在制作一个在某个 FragmentActivity 中有一个 Tabhost 托管 2 个片段的应用程序。其中一个必须显示布局 A 或显示布局 B，而另一个始终具有相同的布局。

*   片段活动
    *   片段 1（第一个选项卡）
        *   布局A
        *   布局B
    *   Fragment2（第二个选项卡）
        *   布局C

为了将两种布局的控制封装在单独的模块中，我制作了两个 Fragment，即 FragmentA 和 FragmentB，分别使用 LayoutA 和 LayoutB，使 Activity 看起来像这样：

*   片段活动
    *   片段 1（第一个选项卡）
        *   片段A
            *   布局A
        *   片段B
            *   布局B
    *   Fragment2（第二个选项卡）
        *   布局C

我遇到的问题是我无法使这两种情况都稳定：

*   显示第一个选项卡时用户离开应用程序
*   用户导航到选项卡 2，然后返回选项卡 1

起初我的 Fragment1 代码如下所示：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View view = new FrameLayout(getActivity());
    view.setId(1);
    return view;
}

@Override
public void onStart() {
    super.onStart();
    FragmentTransaction ft = getFragmentManager().beginTransaction();
    ft.add(1, mCurrentFragment, "f1");
    ft.commit();
}

@Override
public void onStop() {
    super.onStop();
    FragmentTransaction ft = getFragmentManager().beginTransaction();
    ft.remove(mCurrentFragment);
    ft.commit();
} 
```

在 onStop 中，我删除了片段，以便在片段下次重新启动时将其附加到在 OnCreateView 中创建的新 FrameLayout。这段代码的问题是，当用户离开应用程序时，我显然无法进行任何交易，所以它崩溃了。

```
java.lang.RuntimeException: Unable to stop activity {my.package/my.package.MainTabHost}: java.lang.IllegalStateException: Can not perform this action after onSaveInstanceState 
```

为了解决这个问题，我在尝试将片段添加到 onStart 中的 FragmentTransaction 之前更改了片段的删除：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View view = new FrameLayout(getActivity());
    view.setId(1);
    return view;
}

@Override
public void onStart() {
    super.onStart();
    FragmentTransaction ft = getFragmentManager().beginTransaction();
    if(getFragmentManager().findFragmentByTag("f1") != null) {
        ft.remove(mCurrentFragment);
    }
    ft.add(1, mCurrentFragment, "f1");
    ft.commit();
} 
```

这段代码还有另一个问题。从第一个选项卡切换到第二个选项卡然后返回到第一个选项卡显示 Fragment1 的空白布局。

注意：我将所有片段设置为保留其状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T05:32:44.010

解决了！我使用了第二个代码。我必须在 onStart 中执行以下步骤： - 分离片段 - 将其添加到新视图 - 附加它

# android - 在 checkboxpreference 单击事件上加载首选项

> ID：14805886
> 
> 赞同：1
> 
> 时间：2013-02-11T04:27:53.113
> 
> 标签：android, android-preferences

我想在其相应的单击事件上加载一组首选项（如下）在复选框首选项/开关首选项上。

我的 CheckBoxPreference 如下：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >
<CheckBoxPreference
    android:defaultValue="true"
        android:key="email_preference_checkbox"
        android:summary="@string/pref_description_social_recommendations"
        android:title="@string/pref_title_social_recommendations">
</CheckBoxPreference>
</PreferenceScreen> 
```

我要加载的首选项如下：

```
 <?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >
        <EditTextPreference
                android:capitalize="words"
                android:defaultValue="@string/default_I"
                android:inputType="textCapWords"
                android:key="d_I_key"
                android:maxLines="1"
                android:selectAllOnFocus="true"
                android:singleLine="true"
                android:title="@string/I_View" />

            <EditTextPreference
                android:capitalize="words"
                android:defaultValue="@string/de_name"
                android:inputType="textCapWords"
                android:key="d_i_key"
                android:maxLines="1"
                android:selectAllOnFocus="true"
                android:singleLine="true"
                android:title="@string/u_View" />

            <EditTextPreference
                android:capitalize="words"
                android:defaultValue="@string/de_d"
                android:inputType="textCapWords"
                android:key="e_d_key"
                android:maxLines="1"
                android:selectAllOnFocus="true"
                android:singleLine="true"
                android:title="@string/pa_iew" />

</PreferenceScreen> 
```

有什么办法可以做到吗？我正在查看选项，`Preference.OnPreferenceChangeListener`但找不到加载首选项的方法。我想在点击事件上加载的首选项，我已经使用`PreferenceFragment`.

**编辑**：我可以看到有 2 个点击事件被触发。一个用于启用/禁用复选框，另一个用于单击首选项（类似于`SwitchPreference`android->Settings->WiFi 中的）。我想要类似的东西。

谢谢。

# matlab - 如何找到从两个不同相机捕获的同一场景的两个图像中提取的两组独立特征之间的匹配？

> ID：14805890
> 
> 赞同：1
> 
> 时间：2013-02-11T04:28:36.000
> 
> 标签：matlab, computer-vision, projective-geometry

我需要找到从两个不同相机捕获的同一场景的两个图像中提取的两组独立特征之间的匹配。我正在使用 HumanEvaI 数据集，所以我有相机的校准矩阵（在本例中为 BW1 和 BW2）。

我不能使用简单相关、SIFT 或 SURF 之类的方法来解决问题，因为相机彼此相距很远并且还旋转。所以图像之间的差异很大，也有遮挡。

我一直专注于根据我已经拥有的校准信息而能够构建的地面实况点匹配来寻找捕获的图像之间的 Homography。一旦我有了这个单应性，我将使用完美匹配（匈牙利算法）来找到最佳对应关系。这里单应性的重要性在于我必须计算点之间的距离。

到目前为止一切似乎都很好，我的问题是我无法找到一个好的单应性。我已经尝试过 RANSAC 方法、具有 sampson 距离的黄金标准方法（这是一种非线性优化方法），并且主要来自 Richard Hartley 的《计算机视觉中的多视图几何》第二版一书中的所有内容。

到目前为止，我已经在 matlab 中实现了所有内容。

还有另一种方法可以做到这一点吗？我在正确的道路上吗？如果是这样，我可能做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T04:47:54.980

你可以试试这两种方法：

1.  一种用于非刚性配准的新点匹配算法（使用薄板样条） - 相对较慢。
2.  点集注册：相干点漂移（我觉得更快更准确）。

就第二种方法而言，我觉得它在存在异常值的情况下给出了非常好的配准结果，它速度快并且能够恢复复杂的变换。但是第一种方法在注册领域也是众所周知的方法，您也可以尝试一下。

尝试理解算法的核心，然后继续阅读在线可用的代码。

1.  [此处](http://noodle.med.yale.edu/~chui/tps-rpm.html)的薄板样条- 下载 TPS-RPM 演示。
2.  点集注册：相干点漂移[在这里](https://sites.google.com/site/myronenko/research/cpd)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-31T21:53:00.453

你可能会觉得我的解决方案很有趣。它是 Coherent Point Drift 算法的纯 numpy[实现](https://github.com/siavashk/Python-CPD)。

这是一个例子：

```
from functools import partial
from scipy.io import loadmat
import matplotlib.pyplot as plt
import numpy as np
import time

class RigidRegistration(object):
    def __init__(self, X, Y, R=None, t=None, s=None, sigma2=None, maxIterations=100, tolerance=0.001, w=0):
    if X.shape[1] != Y.shape[1]:
        raise 'Both point clouds must have the same number of dimensions!'

    self.X             = X
    self.Y             = Y
    (self.N, self.D)   = self.X.shape
    (self.M, _)        = self.Y.shape
    self.R             = np.eye(self.D) if R is None else R
    self.t             = np.atleast_2d(np.zeros((1, self.D))) if t is None else t
    self.s             = 1 if s is None else s
    self.sigma2        = sigma2
    self.iteration     = 0
    self.maxIterations = maxIterations
    self.tolerance     = tolerance
    self.w             = w
    self.q             = 0
    self.err           = 0

def register(self, callback):
    self.initialize()

    while self.iteration < self.maxIterations and self.err > self.tolerance:
        self.iterate()
        callback(X=self.X, Y=self.Y)

    return self.Y, self.s, self.R, self.t

def iterate(self):
    self.EStep()
    self.MStep()
    self.iteration = self.iteration + 1

def MStep(self):
    self.updateTransform()
    self.transformPointCloud()
    self.updateVariance()

def updateTransform(self):
    muX = np.divide(np.sum(np.dot(self.P, self.X), axis=0), self.Np)
    muY = np.divide(np.sum(np.dot(np.transpose(self.P), self.Y), axis=0), self.Np)

    self.XX = self.X - np.tile(muX, (self.N, 1))
    YY      = self.Y - np.tile(muY, (self.M, 1))

    self.A = np.dot(np.transpose(self.XX), np.transpose(self.P))
    self.A = np.dot(self.A, YY)

    U, _, V = np.linalg.svd(self.A, full_matrices=True)
    C = np.ones((self.D, ))
    C[self.D-1] = np.linalg.det(np.dot(U, V))

    self.R = np.dot(np.dot(U, np.diag(C)), V)

    self.YPY = np.dot(np.transpose(self.P1), np.sum(np.multiply(YY, YY), axis=1))

    self.s = np.trace(np.dot(np.transpose(self.A), self.R)) / self.YPY

    self.t = np.transpose(muX) - self.s * np.dot(self.R, np.transpose(muY))

def transformPointCloud(self, Y=None):
    if not Y:
        self.Y = self.s * np.dot(self.Y, np.transpose(self.R)) + np.tile(np.transpose(self.t), (self.M, 1))
        return
    else:
        return self.s * np.dot(Y, np.transpose(self.R)) + np.tile(np.transpose(self.t), (self.M, 1))

def updateVariance(self):
    qprev = self.q

    trAR     = np.trace(np.dot(self.A, np.transpose(self.R)))
    xPx      = np.dot(np.transpose(self.Pt1), np.sum(np.multiply(self.XX, self.XX), axis =1))
    self.q   = (xPx - 2 * self.s * trAR + self.s * self.s * self.YPY) / (2 * self.sigma2) + self.D * self.Np/2 * np.log(self.sigma2)
    self.err = np.abs(self.q - qprev)

    self.sigma2 = (xPx - self.s * trAR) / (self.Np * self.D)

    if self.sigma2 <= 0:
        self.sigma2 = self.tolerance / 10

def initialize(self):
    self.Y = self.s * np.dot(self.Y, np.transpose(self.R)) + np.repeat(self.t, self.M, axis=0)
    if not self.sigma2:
        XX = np.reshape(self.X, (1, self.N, self.D))
        YY = np.reshape(self.Y, (self.M, 1, self.D))
        XX = np.tile(XX, (self.M, 1, 1))
        YY = np.tile(YY, (1, self.N, 1))
        diff = XX - YY
        err  = np.multiply(diff, diff)
        self.sigma2 = np.sum(err) / (self.D * self.M * self.N)

    self.err  = self.tolerance + 1
    self.q    = -self.err - self.N * self.D/2 * np.log(self.sigma2)

def EStep(self):
    P = np.zeros((self.M, self.N))

    for i in range(0, self.M):
        diff     = self.X - np.tile(self.Y[i, :], (self.N, 1))
        diff    = np.multiply(diff, diff)
        P[i, :] = P[i, :] + np.sum(diff, axis=1)

    c = (2 * np.pi * self.sigma2) ** (self.D / 2)
    c = c * self.w / (1 - self.w)
    c = c * self.M / self.N

    P = np.exp(-P / (2 * self.sigma2))
    den = np.sum(P, axis=0)
    den = np.tile(den, (self.M, 1))
    den[den==0] = np.finfo(float).eps

    self.P   = np.divide(P, den)
    self.Pt1 = np.sum(self.P, axis=0)
    self.P1  = np.sum(self.P, axis=1)
    self.Np = np.sum(self.P1)

def visualize(X, Y, ax):
    plt.cla()
    ax.scatter(X[:,0] ,  X[:,1], color='red')
    ax.scatter(Y[:,0] ,  Y[:,1], color='blue')
    plt.draw()
    plt.pause(0.001)

def main():
    fish = loadmat('./data/fish.mat')
    X = fish['X'] # number-of-points x number-of-dimensions array of fixed points
    Y = fish['Y'] # number-of-points x number-of-dimensions array of moving points

    fig = plt.figure()
    fig.add_axes([0, 0, 1, 1])
    callback = partial(visualize, ax=fig.axes[0])

    reg = RigidRegistration(X, Y)
    reg.register(callback)
    plt.show()

if __name__ == '__main__':
main() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T07:38:09.487

[此处](http://www.csd.uwo.ca/~yuri/Abstracts/ijcv10_pearl-abs.html)描述了我认为您可能会发现有用的另一种方法。
这种方法试图将局部模型拟合到一组点。当存在多个不同的局部模型时，其全局优化方法使其性能优于 RANSAC。
我也相信他们有可用的代码。

# javascript - 使用 Javascript 从 Windows 8 应用程序执行 Windows 进程

> ID：14805893
> 
> 赞同：0
> 
> 时间：2013-02-11T04:28:44.663
> 
> 标签：javascript, windows-8

我正在开发一个 Windows 8 应用程序，我想用它的参数执行一个进程。说“shutdown.exe”

我正在使用 Javascript 和 HTML5 开发应用程序。据我研究，由于沙盒（我不确定），不可能做同样的事情。

那么有没有办法在 Windows 8 App 中调用命令进程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T06:28:53.320

不，最接近的是协议激活，即应用程序可以通过 URL 启动另一个应用程序。您可以注册一个应用程序以响应您想要的任何 URI，但如果其他人也这样做，那么您的应用程序将不会默认运行，并且将提示用户选择他们想要使用哪个应用程序来响应启动要求。

[您可以通过应用程序启动示例](http://code.msdn.microsoft.com/windowsapps/Association-Launching-535d2cec)和[MSDN 文档](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh779670.aspx)查看其工作原理。

# java - 字符比较不起作用

> ID：14805894
> 
> 赞同：1
> 
> 时间：2013-02-11T04:28:58.533
> 
> 标签：java, comparison, char

我必须编写一个程序来制作一个二维数组并将其打印出来。然后我应该引导一个“角色”穿过这个迷宫。所以我想让它向上/向下/向左/向右移动。用户将被允许输入 u/U/d/D/l/L/r/R。

我输入是为了如果其中一个没有输入，它会给我一个错误。但是，如果它输入正确，它仍然会给我一个错误。

```
char move;                                          
    System.out.println("Which way do you want to move?  U/D/L/R");
    move=stdin.nextLine().charAt(0);
    while(move != 'u' || move !='U') {
        while( move != 'd' || move != 'D'){ 
            while( move != 'l' || move != 'L'){
                while(move != 'r' || move != 'R'){
                    System.out.println("Invalid input. Try again.");
                    move = stdin.nextLine().charAt(0);
        }}}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T04:32:42.203

尝试这个：

```
Scanner stdin; 
stdin = new Scanner(System.in);

move = stdin.nextLine().charAt(0);;
move  = Character.toUpperCase(move);

    while(move !='U' && move != 'D' && move != 'L' && move != 'R' ) 
    {
                    System.out.println("Invalid input. Try again.");
                    move = stdin.nextLine().charAt(0);
                    move  = Character.toUpperCase(move);
    } 
```

您当前的代码没有意义。如果我键入 R（例如），这将使程序进入无限循环。因为，上面的所有条件都将评估为真。因此，没有达到要求另一个输入（`stdin.nextLine()`）的指令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T05:15:26.857

您也可以尝试以下方法（以不同的方式做同样的事情）。

连同其他字段声明：

```
private static final String keySet = "uUdDlLrR"; 
```

在方法内部：

```
char move = stdin.nextLine().charAt(0);
while (keySet.indexOf(move) == -1) {
    System.out.println("Invalid input. Try again.");
    move = stdin.nextLine().charAt(0);
} 
```

它只是更具可读性，并且在您希望修改允许的键集的情况下几乎不需要更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T04:33:08.633

语法有点奇怪（为什么是“while”而不是“if”？......以及为什么嵌套？）......但基本上你想用'&&'而不是'||'进行测试。

用英语：如果输入不是A *并且*输入不是B，那么你想要错误。如果你做“或”，那么它总是会出错，因为其中一个不是总是正确的。

编辑：很容易犯错误——为了风格/清晰度，我建议：

```
switch (move) {
case 'u': case 'U':  
  /*up code*/    
  break;
case 'd'' case 'D':  
  /*down code*/  
  break;
case 'l'' case 'L':  
  /*left code*/  
  break;
case 'r'' case 'R':  
  /*right code*/ 
  break;
default: 
  System.out.println("Invalid input. Try again.");
  break;
} 
```

# macos - 如何获取 OS X 上进程的完整路径？

> ID：14805896
> 
> 赞同：20
> 
> 时间：2013-02-11T04:29:01.813
> 
> 标签：macos, process, path, pid, ps

我知道我可以`PID`通过 using 来获取进程`ps`，但是如何找到该进程的完整路径？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-11T04:37:13.857

> OS X 有 libproc 库，可用于收集不同的进程信息。为了找到给定 PID 的绝对路径，可以使用以下代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <errno.h>
#include <libproc.h>

int main (int argc, char* argv[])
{
    pid_t pid; int ret;
    char pathbuf[PROC_PIDPATHINFO_MAXSIZE];

    if ( argc > 1 ) {
        pid = (pid_t) atoi(argv[1]);
        ret = proc_pidpath (pid, pathbuf, sizeof(pathbuf));
        if ( ret <= 0 ) {
            fprintf(stderr, "PID %d: proc_pidpath ();\n", pid);
            fprintf(stderr, "    %s\n", strerror(errno));
        } else {
            printf("proc %d: %s\n", pid, pathbuf);
        }
    }

    return 0;
} 
```

编译和运行示例（上面的代码存储在 pathfind.c 中，32291 是我试图为其查找路径信息的进程的 pid）：

```
$ cc pathfind.c -o pathfind
$ ./pathfind 32291
proc 32291: /some/path/your-binary-app 
```

**参考这篇博文： http:** [//astojanov.wordpress.com/2011/11/16/mac-os-x-resolve-absolute-path-using-process-pid/](http://astojanov.wordpress.com/2011/11/16/mac-os-x-resolve-absolute-path-using-process-pid/)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-11T04:40:47.890

一种解决方案可以使用：

```
which `ps -o comm= -p $PID` 
```

其中 $PID 是您要检查的进程的 pid。在 OS X 10.8.2 上测试。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-10-09T11:19:03.847

[@tomis 答案](https://stackoverflow.com/a/14805977/7939871)的更便携和现代版本：

```
command -v "$(ps -o comm= -p $PID)" 
```

`command -v`取代`which`并且更便携。

反引号替换为`$(cmds)`

另一个依赖于`realpath`GNU CoreUtils 的替代方案：

```
realpath /proc/$PID/exe 
```

* * *

## 回答 #4

> 赞同：-7
> 
> 时间：2013-02-11T04:44:23.400

尝试这个：

```
sudo ls -l /proc/$(ps -e | grep $PROCESS_NAME | awk '{print $1}')/exe 
```

其中 $PROCESS_NAME 是您要检查的进程的名称。

# javascript - “变量是函数的本地变量，现在是循环”的含义

> ID：14805903
> 
> 赞同：0
> 
> 时间：2013-02-11T04:29:56.340
> 
> 标签：javascript

在[这篇](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for_each...in)Mozilla 文章中，使用了以下阶段

# 参数

## **多变的**

用于迭代属性值的变量，可选择使用 var 关键字声明。这个变量是函数的局部变量，而不是循环的。

描述一个 foreach...in 循环

```
for each (variable in object) {
  statement
} 
```

我知道有人写过这个循环已被弃用，但我只是对词汇感兴趣。“变量是函数的本地变量，而不是循环”是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T04:31:58.913

这意味着您可以在循环之外访问函数中的变量。请参阅[变量范围](http://en.wikipedia.org/wiki/Scope_%28computer_science%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T04:37:56.193

在同一个网站上，您的答案实际上只是更进一步：

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope)

JavaScript 有所谓的“函数作用域”，这意味着变量（如果使用 var 关键字声明）的作用域是函数。它们只能从该函数中访问。

其他一些语言具有“块范围”，在这种情况下，变量的范围将被限制在代码块中（这将是括号 {} 之间的部分）

我希望链接有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T04:39:40.540

Javascript 没有**块语句范围**。我将在[此处](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Values,_variables,_and_literals#Variables)向您推荐有关变量和范围的 Mozilla Javascript 指南。

Javascript 是一门时髦的语言，有好有坏，如果你想了解更多关于 Javascript 的来龙去脉，你应该看看[Douglas Crockford写的好的部分。](http://www.crockford.com/)

# ruby - Ruby Pig Latin 多参数

> ID：14805909
> 
> 赞同：-1
> 
> 时间：2013-02-11T04:30:47.593
> 
> 标签：ruby

嗨，我正在尝试编写将字符串转换为猪拉丁语的代码

```
def translate(str) 
   alpha = ('a'..'z').to_a
   vowels = %w[a e i o u]
   consonants = alpha - vowels

  if vowels.include?(str[0])
     str + 'ay'
  elsif str[0..1] == 'qu'
     str[2..-1]+'quay' 
  elsif consonants.include?(str[0]) && str[1..2]=='qu'
     str[3..-1]+str[0..2]+'ay' 
  elsif consonants.include?(str[0]) &&    consonants.include?(str[1]) && consonants.include?(str[2])
  str[3..-1] + str[0..2] + 'ay'
 elsif consonants.include?(str[0]) && consonants.include?(str[1])
   str[2..-1] + str[0..1] + 'ay'
elsif consonants.include?(str[0])
   str[1..-1] + str[0] + 'ay'
 elsif str[0..1] == 'qu'
 str[2..-1]+'quay'
else

  return str
  end
 end 
```

此代码非常适合转换一个单词字符串，例如：translate("monkey")。我正在尝试做的是使此代码也可以接受多个单词（在同一字符串中）...按照上述转换为猪拉丁语的标准，例如： translate("please help") => “轻松玩 elphay”

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-01T22:15:43.480

我会为此做的是：

使用 #split 方法将您的 str 变量转换为单词数组（如果只有 1 个单词，则为 1 个单词）。

之后，您可以使用 array#each 方法遍历每个数组索引。IE

```
str = "hello"
str = str.split(" ") # str now equals ["hello"] 
```

对于多个变量：

```
str = "hello world"
str- str.split(" ") #now equals ["hello", "world"] 
```

那么你可以使用 .each 方法：

```
str.each do |<variable name you want to use>| 
   <how you want to manipulate the array>
   end 
```

对于猪拉丁程序，您可以执行以下操作：

```
str.each do|element| 
  if vowels.include?(element)
    <do whatever you want here>
  elsif
    <do whatever>
  else 
    <do whatver>
  end
end 
```

这将遍历数组中的每个元素并翻译它（如果只有一个元素它仍然可以工作）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T04:59:36.037

既然你已经知道如何翻译一个单词，为什么不把任务分成两种方法：

```
def translate(str)
  str.split.map { |word| translate_word(word) }.join
end

def translate_word(str)
  # Your old translate code here
end 
```

# r - 如何使用 r 中 mgcv 包中的 vis.gam() 函数设置 x 和 y 轴的限制？

> ID：14805915
> 
> 赞同：1
> 
> 时间：2013-02-11T04:31:52.320
> 
> 标签：r, gam, mgcv

我正在使用 vis.gam() 绘制以下模型的结果：

```
gam.5 <- gam(mortality.under.2~s(maternal_age)+ s(birth_year) + 
          te(birth_year,maternal_age) + wealth + sex + 
         residence+ maternal_educ 
          ,data=colombia1,family="binomial") 
```

制作情节的代码如下：

```
 vis.gam(gam.5,view=c("maternal_age","birth_year"),
         plot.type="contour",type="response",
         cond=list(wealth="Lowest quintile",sex="Female",
         residence="Rural",maternal_educ="Primary")) 
```

不幸的是，它产生的预测值超出了变量“maternal_age”和“birth_year”的数据范围。关于如何限制图中变量的预测值范围的任何建议`view`？

非常感谢，

安东尼奥·佩德罗。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T04:47:29.150

查看代码，图形范例似乎是基本图形（特别是`persp`函数），并且有尾随点参数，所以为什么不添加：

```
..., `xlim=range(columbia1(maternal_age), ylim=range(columbia1$birth_year)` 
```

# azure - 如何在 Windows azure 中创建表格？

> ID：14805917
> 
> 赞同：4
> 
> 时间：2013-02-11T04:31:58.997
> 
> 标签：azure, azure-storage

我是 windows azure 的新手。谁能告诉我在 windows azure 中创建数据库和表的过程以及如何连接到应用程序的连接。我们有 windows azure 帐户。请澄清我的疑问。任何用于部署的 pdf 书籍云中的其他 wcf 服务让我知道链接。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-21T00:48:12.683

现在是 2014 年 5 月，Silverlight 在线工具并没有好到哪里去。

```
Best approach is to use SSMS (SQL Server Management Studio)  you can even use the free tools tool.   
Connect to your Azure with the portal supplied server url / port ... and then your username /password. 
```

假设您编写了现有数据库表的脚本并希望执行该脚本，那么您使用 SSMS 比在线拥有更多的自由和控制权。

对于表创建，请注意一些警告，一个常见的问题是并非所有 T-SQL 都受支持，并且您最终需要从另一个数据库表中删除两个“ON [PRIMARY]”部分的典型脚本创建语句的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T05:13:10.063

单击管理门户中的数据库服务器。您要做的第一件事是管理可以访问此服务器/数据库的允许 IP 地址。在那里允许您的本地 IP 地址。之后，您有 2 个选择：

1.  使用 Sql Server Management Studio - 它没有表格编辑器，您需要手动编写 T-SQL 脚本。
2.  使用基于 Silverlight 的数据库管理实用程序 - 要访问它，请单击 Manage Url 链接，如下面的屏幕截图所示。

![在此处输入图像描述](../Images/4288737805192f3ac3ff4b4098a3047f.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-12T08:23:07.097

由于您无法使用添加/编辑表、约束或键的向导 `Azure DB`，即使您已通过 连接它，您也可以为此目的`MS SQL Server Management Studio`使用[**RazorSQL 。**](https://razorsql.com/)它让您感觉就像在管理工作室中使用 azure DB 一样，就像使用普通 DB 一样

# backup - 创建 TAR 文件读取标准输出

> ID：14805919
> 
> 赞同：1
> 
> 时间：2013-02-11T04:32:31.563
> 
> 标签：backup, gzip, mysqldump, tar, mysql-backup

我正在尝试进入从 Mysqldump 生成的标准输出的 tar 文件：

```
mdm@deb606:~$ mysqldump --opt test1 -u root -ppassword | tar -czf  example.tar.gz 
```

不起作用。

目前我暂时解决了使用：

```
mdm@deb606:~$ mysqldump --opt test1 -u root -ppassword | gzip -f > example.gz 
```

是否也可以使用 tar 或 bzip2 来做同样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T05:30:49.863

我不知道可以直接通过管道输入`tar`（通常，这没有多大意义），但是该`bzip2`命令将接受`-`意味着从标准输入读取，即：

```
mdm@deb606:~$ mysqldump --opt test1 -u root -ppassword | bzip2 - > example.bz2 
```

# php - 如何在不使用 PHP 重新加载页面的情况下调用 API？

> ID：14805921
> 
> 赞同：0
> 
> 时间：2013-02-11T04:32:50.600
> 
> 标签：php, api

我希望调用 Twitter API 来获取推文（加载时成功实现推文），但现在我希望自动更新页面，允许推文自动加载而无需重新加载/用户交互。

我知道这种类型的功能是可能的（monitter.com）可以做到，但是这样做的技术是什么？我可以用 PHP 做吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T04:44:47.477

正如@suresh.g 所说，您可以使用AJAX。最简单的方法：使用[jQuery](http://api.jquery.com/jQuery.ajax/)。

[`setInterval()`](http://www.w3schools.com/jsref/met_win_setinterval.asp)此外，您可以通过javascript 函数使用每 10 秒重新加载一次的 iframe 。用户不会重新加载他的整个页面，而是重新加载 twitter iframe。

另一种技术是[COMET](http://webscepter.com/simple-comet-implementation-using-php-and-jquery/)或 PUSH 技术，但我认为你现在不需要它，但了解它是件好事；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T05:16:49.603

使用卷曲

```
function curl_grab_page($url,$data,$secure="false",$ref_url="",$login = "false",$proxy = "null",$proxystatus = "false")

            {
                if($login == 'true') {
                    $fp = fopen("cookie.txt", "w");
                    fclose($fp);
                }
                $ch = curl_init();
                curl_setopt($ch, CURLOPT_COOKIEJAR, "cookie.txt");
                curl_setopt($ch, CURLOPT_COOKIEFILE, "cookie.txt");

                curl_setopt($ch, CURLOPT_TIMEOUT, 60);
                curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
                if ($proxystatus == 'true') {
                    curl_setopt($ch, CURLOPT_HTTPPROXYTUNNEL, TRUE);
                    curl_setopt($ch, CURLOPT_PROXY, $proxy);
                }
                curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);

                if($secure=='true')
                {
                    curl_setopt($ch, CURLOPT_SSLVERSION,3);
                }

                curl_setopt( $ch, CURLOPT_HTTPHEADER, array( 'Expect:' ) );

                curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);

                curl_setopt($ch, CURLOPT_URL, $url);
                curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
                curl_setopt($ch, CURLOPT_REFERER, $ref_url);
                curl_setopt($ch, CURLOPT_HEADER, TRUE);
                curl_setopt($ch, CURLOPT_USERAGENT, $_SERVER['HTTP_USER_AGENT']);
                curl_setopt($ch, CURLOPT_FOLLOWLOCATION, TRUE);
                curl_setopt($ch, CURLOPT_POST, TRUE);
                curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
                ob_start();

                return curl_exec ($ch); // execute the curl command

                curl_getinfo($ch);
                ob_end_clean();
                curl_close ($ch);
                unset($ch);
            } 
```

只需按照您想要设置的数据的方式调用此函数，它可以为您做所有事情，只是不要忘记在您的 php.ini 中设置 curl

谢谢

# javascript - 在 Handlebar JS 中声明公共变量

> ID：14805928
> 
> 赞同：1
> 
> 时间：2013-02-11T04:34:08.350
> 
> 标签：javascript, backbone.js, global-variables

我想在我的 JS 文件中声明一个全局变量，并且我想在同一个类的不同函数中使用该变量。我在初始化部分声明了一个变量

```
 initialize: function () {              
                    this.regionid="";
    } 

          selectItems: function ()
                {

                this.regionid="10";
                this.Regions.url = this.Regions.url() + '?requesttype=1';
                this.Regions.fetch({ success: this.renderRegion });

    }

   renderRegion: function () {
            var ddlRegionClass = this.Regions.toJSON();
            $(this.el).find('[id=cboRegion] option').remove();          
            $.each(ddlRegionClass.LOCATIONS_Regions, function (j, cc1) {
                var data = 'data='+cc1.AreaCode_2;
                  var selected = '';                   
                    if(cc1.AreaCode_3==this.regionid)
                            selected="selected";                

                $('[id=cboRegion]').append('<option value="' + cc1.AreaCode_3 + '" ' + data + selected + '  >' + cc1.Area_Name + '</option>');
            })
        }, 
```

当我检查价值时

```
 if(cc1.AreaCode_3==this.regionid) 
```

我没有得到值，它显示“未定义”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T04:48:20.427

```
this.regionid="";
initialize: function () {  
//some code
} 
```

我认为您必须像这样声明..然后它将起作用..您可以在任何函数中为变量赋值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T06:36:22.350

`this`的回调内部`$.each`不会引用`view`（或js文件包含的对象）。

在初始化中，您可以`renderRegion`绑定`this`：

```
initialize: function() {
  this.regionid = "";
  _.bindAll(this, "renderRegion");
} 
```

和里面`renderRegion`：

```
renderRegion: function() {
  // before doing $.each store 'this' reference
  var _this = this;

  // and inside the callback use if(cc1.AreaCode_3 == _this.regionid)
} 
```

它应该工作。

# jsf - Primefaces 3.0 到 3.5 对话框不起作用

> ID：14805930
> 
> 赞同：0
> 
> 时间：2013-02-11T04:34:27.110
> 
> 标签：jsf, primefaces

以下在 primefaces 3.0 中工作的代码在 3.5 中不起作用。

**错误：javascript 上不存在对话框（）**我的查询是对话框已从 dialog.js 中删除？如果是这样，那么替代方案是什么？

```
function OpenDialog(currentDialog, commandSource) { 
    $(currentDialog).dialog('open');   
    var myDialogX = jQuery(commandSource).offset().left + 10;   
    var myDialogY = (jQuery(commandSource).offset().top - jQuery(document).scrollTop()) + 30;   
  //jQuery(currentDialog).dialog('option', 'position', [ myDialogX, myDialogY ]); 
}

    <p:commandLink id="treedialog-copy" 
        title="title" value="Copy tree"
        oncomplete="OpenDialog('#copyTree','#treedialog-copy')" /> 

    <p:outputPanel id="TreePanel">
        <p:dialog id="copyTree" header="Tree Dialog"
            styleClass="dlgAssignTree" modal="false" width="600" height="250" widgetVar="copyTrees">
            <h:form id="copyTreeForm">
                <p:outputPanel id="TreePanel">
                    <p:tree id="component2"
                        value="#{bean.provideTreeRootNode}" var="_node"
                        dynamic="true" cache="false" selectionMode="multiple"
                        selection="#{bean.selectedCopyNodes}">
                        <p:ajax event="select" 
                            listener="#{bean.onNodeSelectCopy}" />
                        <p:ajax event="unselect" 
                            listener="#{processBean.onNodeUnSelectCopy}" />
                        <p:treeNode>
                            <h:outputText value="#{_node.name}" />
                        </p:treeNode>
                    </p:tree>
                </p:outputPanel>
            </h:form>
        </p:dialog>
    </p:outputPanel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T06:35:56.607

我认为您可以直接创建一个类似这样的对话框..

```
 <p:commandButton id="basic" value="Basic" onclick="dlg1.show();" type="button" />  
    <p:dialog id="basicDialog" header="Basic Dialog" widgetVar="dlg1">  
        <h:outputText value="Resistance to PrimeFaces is futile!" />  
    </p:dialog> 
```

如果您使用的是 Primefaces，那么我不必手动创建对话框，我们可以使用他们的组件，它将提高生产力和错误修复时间

# linux - 无法在家中使用 mkdir 创建文件夹/子文件夹

> ID：14805932
> 
> 赞同：0
> 
> 时间：2013-02-11T04:34:48.200
> 
> 标签：linux, bash

我想创建一个名为的文件夹和`hello`一个位于内部的子文件夹。我已经尝试过，但它不起作用说它无法创建目录，因为不存在这样的文件或目录。如果我尝试，我可以创建一个名为inside的文件夹。我该怎么做呢？如果缺少所需的父文件夹，我不想使用它们来创建它们。`hello``world``mkdir $HOME/hello/world``$HOME/hello``hello``$HOME``-p`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T04:38:25.257

我不确定你为什么不想使用`-p`标志 to `mkdir`，但如果你坚持，你可以这样做：

```
mkdir $HOME/hello $HOME/hello/world 
```

# algorithm - 单链表的最优快速排序

> ID：14805936
> 
> 赞同：4
> 
> 时间：2013-02-11T04:35:04.043
> 
> 标签：algorithm, sorting, linked-list, quicksort

我正在实现一个快速排序功能来对单链表进行排序。我必须使用什么算法来完成这个？对于链表，每次比较都需要 O(N) 的最坏情况，而不是数组通常的 O(1)。那么最坏情况的复杂性是多少？

总而言之，我需要对快速排序算法进行哪些修改才能获得最佳排序算法，以及算法的最坏情况复杂度是多少？

谢谢！

我在下面有一个实现：

```
public static SingleLinkedList quickSort(SingleLinkedList list, SLNode first, SLNode last)
{
    if (first != null && last != null)
    {
        SLNode p = partition(list, first, last) ;
        quickSort(list,first,p) ;
        quickSort(list,p.succ, last) ;
    }
    return list ;
}

public static SLLNode partition(SinlgleLinkedList list, SLNode first, SLNode last)
{

    SLNode p = first ;
    SLNode ptr = p.succ ;

    while (ptr!=null)
    {
        if (ptr.data.compareToIgnoreCase(p.data)<0)
        {
            String pivot = p.data ;
            p.data =  ptr.data ;
            ptr.data = p.succ.data ;
            p.succ.data = pivot ;
            p = p.succ ;
        }
        ptr = ptr.succ ;
    }
    return p ;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T06:37:02.013

Mergesort 对于链表实现起来更自然，但是您*可以*很好地进行快速排序。下面是我在几个应用程序中使用的 C 语言中的一个。

一个常见的误解是，您不能对列表有效地进行快速排序。这不是真的，尽管需要仔细实施。

为了回答您的问题，列表的快速排序算法与数组基本相同。选择一个枢轴（下面的代码使用列表的头部），围绕枢轴划分为两个列表，然后递归地对这些列表进行排序并将结果附加到中间的枢轴。有点不明显的是，如果您在排序结果的尾部添加要按原样附加的列表的参数，则可以在不额外传递列表的情况下完成追加操作。在基本情况下，添加此列表不需要任何工作。

事实证明，如果比较便宜，则归并排序往往会运行得更快一些，因为快速排序会花费更多时间来摆弄指针。但是，如果比较成本很高，那么快速排序通常会运行得更快，因为它需要的比较少。

如果`NODE *list`是初始列表的头部，那么您可以使用

```
qs(list, NULL, &list); 
```

这是排序代码。请注意，其中一部分是对已排序列表的优化。如果这些情况不常见，则可以删除此优化。

```
void qs(NODE * hd, NODE * tl, NODE ** rtn)
{
    int nlo, nhi;
    NODE *lo, *hi, *q, *p;

    /* Invariant:  Return head sorted with `tl' appended. */
    while (hd != NULL) {

        nlo = nhi = 0;
        lo = hi = NULL;
        q = hd;
        p = hd->next;

        /* Start optimization for O(n) behavior on sorted and reverse-of-sorted lists */
        while (p != NULL && LEQ(p, hd)) {
            hd->next = hi;
            hi = hd;
            ++nhi;
            hd = p;
            p = p->next;
        }

        /* If entire list was ascending, we're done. */
        if (p == NULL) {
            *rtn = hd;
            hd->next = hi;
            q->next = tl;
            return;
        }
        /* End optimization.  Can be deleted if desired. */

        /* Partition and count sizes. */
        while (p != NULL) {
            q = p->next;
            if (LEQ(p, hd)) {
                p->next = lo;
                lo = p;
                ++nlo;
            } else {
                p->next = hi;
                hi = p;
                ++nhi;
            }
            p = q;
        }

        /* Recur to establish invariant for sublists of hd, 
           choosing shortest list first to limit stack. */
        if (nlo < nhi) {
            qs(lo, hd, rtn);
            rtn = &hd->next;
            hd = hi;        /* Eliminated tail-recursive call. */
        } else {
            qs(hi, tl, &hd->next);
            tl = hd;
            hd = lo;        /* Eliminated tail-recursive call. */
        }
    }
    /* Base case of recurrence. Invariant is easy here. */
    *rtn = tl;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T13:57:20.763

您可以使用快速排序而不会丢失 O(n*log(n)) 预期行为。诀窍很简单——将节点放入数组，对节点数组进行排序，以正确的顺序重新链接它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-16T06:45:12.270

Here is a java implementation. It uses the head as the pivot. This can further be improved by avoiding the scanning of the left sublist before appending the right sublist, but it works. This is O(nLogn) too.

```
public class QuickSortLinkedList {

 public ListNode sortList(ListNode head) {

        //Base Case
        if(head == null || head.next == null)
            return head;
        //Partition Strategy
        //Chose first element as pivot and move all elements smaller than the pivot at the end of LL
        //So the order will be pivot, elements smaller than or equal to pivot, elements larger than pivot
        //Example: 9,13,10,6,9,8,11 => 9,13,10,9,11,6,8  and the method will return a pointer to 11
        ListNode partitionedElement = partition(head);

        //The elements to the right of pivot were all smaller than pivot after partioned
        //Example: LeftPartition  = 6->8->null
        ListNode leftPartition = partitionedElement.next;

        //The elements to the left of pivot were all large , so they go in right partition
        //Example: rightPartition = 9->13->10->9->11->null
        ListNode rightPartition = head;
        partitionedElement.next = null;

        //But there can be edge cases
        //Example: 3,5,3,4,5-null => after partition , list is unchanged and last element 5 is returned
        //in this case leftPartition: 3->null and rightPartition 5,3,4,5-null
        if(leftPartition == null){
            leftPartition = head;
            rightPartition = head.next;
            head.next =null;
        }

        //Now Recursively sort
        rightPartition = sortList(rightPartition);
        leftPartition = sortList(leftPartition);

        //After sorting append rightPartition to leftPartition
        ListNode iterator = leftPartition;
        while(iterator.next!=null)
            iterator = iterator.next;
        iterator.next = rightPartition;

        return leftPartition;
    }

    private ListNode partition(ListNode head){
     //Base case
     if(head.next.next == null){

         if(head.next.val>head.val)
            return head.next;
         else
         return head;
     } 

    else{    
        ListNode i = head.next;
        ListNode pivot = head;
        ListNode lastElementSwapped = (pivot.next.val>=pivot.val)?pivot.next:pivot;

        while(i!=null && i.next !=null){

            if(i.next.val >= pivot.val){
                if(i.next == lastElementSwapped.next){
                    lastElementSwapped = lastElementSwapped.next;
                }
                else{
                    ListNode temp = lastElementSwapped.next;
                    lastElementSwapped.next = i.next;
                    i.next = i.next.next;
                    lastElementSwapped = lastElementSwapped.next;
                    lastElementSwapped.next = temp;
                }
            }

            i = i.next;

        }
        return lastElementSwapped;
    }

  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-01T11:08:25.917

您可以使用此算法：

*   选择头节点作为枢轴节点。
*   左分区以枢轴节点开始，将保持其尾部
*   右分区开始为空
*   对于每个节点：将其预先添加到左侧或右侧分区列表，将其`next`引用设置为该分区的当前头，并使其成为新头。
*   由于枢轴元素是左分区的尾节点，因此将其下一个引用设置为空，以便真正终止该列表。
*   对左右分区应用递归，返回其可能修改的头引用。
*   将两个排序的子列表绑定在一起。由于左分区的尾节点保证保留在那里并且是枢轴节点，因此将其`next`引用设置为第二个已排序分区的头。
*   返回排序列表的头部。

当遇到基数时递归停止，即当列表中的节点少于 2 个时。

这具有 O(nlogn) 的平均时间复杂度。最差的时间复杂度是 O(n²)。例如，当列表已经排序时，它将遭受这种时间复杂度。

这是 Python 中的单链表实现，带有一个`quick_sort`方法：

```
class Node:
    def __init__(self, data, nxt=None):
        self.data = data
        self.next = nxt

    def __iter__(self):
        curr = self
        while curr:
            node = curr
            curr = curr.next
            yield node

    def values(self):
        return (node.data for node in self)

    def partition(self):
        nodes = iter(self) # All nodes headed by this node
        next(nodes)  # Skip self
        left = self   # Left partition always has pivot node as its tail
        pivotvalue = self.data
        right = None
        for curr in nodes:  # Remaining nodes
            # Prefix the current node to the relevant partition
            if curr.data < pivotvalue:
                curr.next = left
                left = curr
            else:
                curr.next = right
                right = curr
        self.next = None  # Terminate the left partition
        return left, right 

    def quick_sort(self):
        if not self.next:  # Base case: one node only
            return self
        left, right = self.partition()
        # Left partition has at least one node (the pivot node, which remains its tail)
        left = left.quick_sort()
        # Right partition could be empty 
        if right:
            right = right.quick_sort()
        self.next = right  # Chain the two sorted partitions
        return left

    def is_sorted(self):
        values = self.values()
        prev = next(values)
        for data in values:
            if data < prev:
                return False
            prev = data
        return True

class LinkedList:
    def __init__(self, *values):
        self.head = None
        self.prefix(*values)

    def prefix(self, *values):
        for data in reversed(values):
            self.head = Node(data, self.head)

    def values(self):
        if self.head:
            return self.head.values()

    def quick_sort(self):
        self.head = self.head and self.head.quick_sort()

    def is_sorted(self):
        return self.head is not None and self.head.is_sorted() 
```

下面是一些代码，用 20 个值的随机列表反复测试这个实现：

```
from random import shuffle

values = list(range(20))
for _ in range(100):
    shuffle(values)
    linkedlist = LinkedList(*values)
    print("Shuffled:", *linkedlist.values())
    linkedlist.quick_sort()
    print("Sorted:", *linkedlist.values())
    if not linkedlist.is_sorted():  # Test for failure
        raise ValueError("not sorted!") 
```

# php - 比较日期和时间php

> ID：14805944
> 
> 赞同：3
> 
> 时间：2013-02-11T04:37:02.667
> 
> 标签：php, mysql

我需要比较两个日期，如果一个日期大于另一个日期，则将运行 sql。这是我的代码

```
date_default_timezone_set('Asia/Kuala_Lumpur');
$date = date('Y-m-d G:i:s');
$query = mysql_query("SELECT * FROM package_transaction");
if(mysql_num_rows($query) > 0) {
    while($row = mysql_fetch_array($query)) {           
        $transac_code = $row['transac_code'];
        $duedate = $row['payment_due'];

        if(strtotime($date) > strtotime($duedate))
        {
            mysql_query("UPDATE package_transaction SET `status` = 'cancelled' WHERE `payment_due` = `$duedate` AND `transac_code` = `$transac_code`");

        }

    }
} 
```

但它不工作。请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T04:46:44.920

试试这个，

```
 date("Y-m-d", strtotime($date)) >  date("Y-m-d", strtotime($duedate)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T04:46:05.220

您可以在使用 strtotime 之前尝试使用日期格式吗

```
$duedate = $row['payment_due'];
$duedate = $duedate->format('Y-m-d G:i:s'); 
```

# android - Android 添加操作下一个和上一个行/文章

> ID：14805945
> 
> 赞同：1
> 
> 时间：2013-02-11T04:37:04.600
> 
> 标签：android

如何在android中实现从数据库sqlite获取数据的next和prev。我想如下图所示：

![在此处输入图像描述](../Images/44f55bb5ee17fb66a8279d2fc205ff91.png)

我想如果我单击右按钮以进入下一行/文章，如果我单击左按钮则获取上一行/文章。

我需要做的更多，我刚到这里。这是我在 listview 之后的当前查询。下面是当我从列表视图中单击一个项目时：

询问：

```
public Cursor getAllCategoryItem() {
        SQLiteDatabase db = this.getWritableDatabase();
        String selectQuery = "SELECT  * FROM myarticle";
        Cursor cursor = db.rawQuery(selectQuery, null);
        return cursor;
} 
```

活动中：

```
Cursor c = db.getAllCategoryItem();
int count = c.getCount();
int position = c.getPosition();
Log.d("MyLog", "Count: " + count + ", Position: " + position); 
```

并且进入 logcat 是 Count: 30, Position: -1;

我把按钮 prev 和菜单旁边：

```
@Override
    public boolean onOptionsItemSelected(MenuItem item) {
        if (item.getItemId() == R.id.next_article) {
            // what code in here ?
            return true;
        } else if (item.getItemId() == R.id.prev_article) {
            // what code in here ?
            return true;
        } else {
            return super.onOptionsItemSelected(item);
        }
    } 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T05:50:11.643

您可以通过查询来遍历Sqlite数据库中的特定ID。但这似乎很乏味。

所以做一件事。在应用程序启动时，通过游标从数据库中获取所有数据并将其存储在数组中。然后在数组中遍历。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T04:42:04.233

您可以通过以下两种方式之一进行操作。

1）一开始就按顺序从数据库中获取所有项目。存储在 ArrayList 中。跟踪当前项目是什么，当按下任一按钮时，将数组中的索引更改为 1 并更新显示

2）通过 WHERE 子句仅获取您现在需要的项目。当用户点击按钮时，通过 WHERE 子句请求新项目。显示新项目。

# macos - 在 Windows 等 Mac OS X 中添加鼠标右键单击选项

> ID：14805951
> 
> 赞同：0
> 
> 时间：2013-02-11T04:37:47.490
> 
> 标签：macos

我需要在文件夹或文件列表中添加鼠标右键单击选项，如 Windows 资源管理器。要求如下：

“在 Mac OS X 的 Finder/文件夹列表中显示了一些具有特定扩展名的文件。当用户单击具有该特定扩展名的文件时，我需要显示可以打开该文件的 .exe 或 .app 名称”。

我想知道如何在 Mac OS X 中实现此功能。在 Windows 中它是注册表游戏，但我不确定如何在 Mac OS X 中实现相同的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T05:43:21.273

`CFBundleDocumentTypes`通过指定应用程序可以在数组中打开的文件扩展名，您可以在应用程序包中的 Info.plist 文件中获得此信息。

[http://developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/CoreFoundationKeys.html#//apple_ref/doc/uid/TP40009249-101685-TPXREF107](http://developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/CoreFoundationKeys.html#//apple_ref/doc/uid/TP40009249-101685-TPXREF107)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T07:03:37.383

我试过那个选项。它工作正常，我正在使用该扩展文件获取我的应用程序图标，并且我的应用程序也在默认处理程序中。但现在的问题是，我通过 Qt 创建了这个应用程序，并且在我的应用程序的主要功能中，我只获得了 argv 和 argc 中的应用程序路径，而不是选定的文件。所以让我知道如何实现这一目标。如果需要更多信息，请告诉我。谢谢你有价值的回答

# iphone - 单击 DetailDesclosure 按钮时，MKAnnotationView 推送到视图控制器

> ID：14805954
> 
> 赞同：8
> 
> 时间：2013-02-11T04:38:18.873
> 
> 标签：iphone, ios, objective-c, xcode, mkmapview

我想在我正在显示的地图上单击 DetailDisclosure 时切换视图。我当前的代码如下：

```
- (void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view 
calloutAccessoryControlTapped:(UIControl *)control
{
    DetailViewController *detailViewController = [[DetailViewController alloc] 
    initWithNibName:@"DetailViewController" bundle:nil];
    detailViewController.title = dictionary[@"placeLatitude"]
    [self.navigationController pushViewController:detailViewController animated:YES];
} 
```

我可以用这个推送到视图控制器，但我还没有弄清楚如何强制它从用于首先生成地图的 JSON 数组中提取详细信息。我正在提取这样的数据来生成地图：

```
 for (NSDictionary *dictionary in array)
 {
    // retrieve latitude and longitude from the dictionary entry

    location.latitude = [dictionary[@"placeLatitude"] doubleValue];
    location.longitude = [dictionary[@"placeLongitude"] doubleValue];

   //CAN I LOAD THE TITLE/ID OF THE LOCATION HERE? 
```

我知道我有点偏离目标。也许只是朝正确的方向踢一脚可能会有所帮助。谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-11T04:51:53.607

如果您正在使用故事板并且从当前场景到目标场景有一个转场，您可以只响应`calloutAccessoryControlTapped`. 例如：

```
- (void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control
{
    [self performSegueWithIdentifier:@"Details" sender:view];
} 
```

`view`显然，如果您有不同的 segue 要调用不同的注释类型，则可以检查与 that 关联的注释类型等。

当然，如果您想像`prepareForSegue`往常一样将任何信息传递给下一个场景。

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"Details"])
    {
        MKAnnotationView *annotationView = sender;
        [segue.destinationViewController setAnnotation:annotationView.annotation];
    }
} 
```

* * *

如您所见，我将`annotation`对象传递给下一个视图。如果您的 JSON 结构中有与每个注释关联的其他字段，一个简单的解决方案是将属性添加到与您要跟踪的每个字段关联的自定义视图中。只需转到您的注释自定义类的 .h 并添加您需要的属性。然后，当您创建自定义注释（要添加到地图中）时，也只需设置这些属性。然后，当您将此注释传递给下一个视图控制器时，您所需的所有属性都将在那里可用。

* * *

显然，如果您使用的是 NIB，只需执行您想要的任何 NIB 等效项来实例化下一个视图控制器，设置您想要的任何属性，然后推送到它或以模态方式呈现它，例如：

```
- (void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control
{
    DetailsViewController *controller = [[DetailsViewController alloc] initWithNibName:nil
                                                                                bundle:nil];
    controller.annotation = annotationView.annotation;
    [self.navigationController pushViewController:controller animated:YES]; // or use presentViewController if you're using modals
} 
```

# excel - excel（或VBA）中的文本搜索功能

> ID：14805955
> 
> 赞同：0
> 
> 时间：2013-02-11T04:38:20.733
> 
> 标签：excel, excel-formula, vba

```
Outstanding report as of 06 Feb 2013.xls

tbk_report-itm-status_20130207.csv

tbk_report-tscm-status_20130207_0620.csv

TEC Log template 2.1 (February 13).xls

TSOM_SLA_daily_20130207.xls

Data outstanding ticket report as of 6 February 2013.xls

mnr_report-itm-status_20130207.csv

mnr_report-tscm-status_20130207.csv

isd_report-itm-status_20130207.csv

isd_report-tscm-status_20130207.csv 
```

这是 C 列表中的文件列表

在 A1 列中，我想在 C 列中搜索包含“tbk”和“tscm”的文本

然后在 A1 中会像“tbk_report-tscm-status_20130207_0620.csv”

我应该使用什么功能？

我知道这个问题很简单，但我自己尝试过混合配方但失败了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T05:42:30.073

你可以试试

```
=INDEX(C:C,MATCH("tbk*tscm*",C:C,0)) 
```

请注意，这将匹配
`tbk_blah-tscm-blah`
但不匹配
`tscm-blah-tbk-blah`

# proxy - 运行 JMeter 代理时应用程序登录失败

> ID：14805959
> 
> 赞同：1
> 
> 时间：2013-02-11T04:38:29.847
> 
> 标签：proxy, jmeter

我的测试应用程序是 opencart，我无法记录打开购物车的登录场景。场景是，如果我在代理录制关闭时提供用户名/密码，则可以正常工作。但是当我开始录制并提供用户名/密码时将不起作用

响应数据说

> **注意**：未定义索引：第**201**行**D:\Program Files\wamp\www\opencart\catalog\controller\account\login.php中的电子邮件****注意：未定义索引：D:\Program Files\wamp\www\opencart** **\**中的密码 第**201**行的**catalog\controller\account\login.php****注意**：未定义的索引：第**205**行**D:\Program Files\wamp\www\opencart\catalog\controller\account\login.php中的电子邮件**

 ******显示的另一条错误消息是

```
java.lang.IllegalArgumentException: Unexpected method: 
    at org.apache.jmeter.protocol.http.sampler.HTTPHC4Impl.sample(HTTPHC4Impl.java:252)
    at org.apache.jmeter.protocol.http.sampler.HTTPSamplerProxy.sample(HTTPSamplerProxy.java:62)
    at org.apache.jmeter.protocol.http.sampler.HTTPSamplerBase.sample(HTTPSamplerBase.java:1088)
    at org.apache.jmeter.protocol.http.proxy.Proxy.run(Proxy.java:211) 
```

除了其他录制工作正常之外，单击导航到另一个页面的链接都可以正常工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T05:29:11.143

在代理中提供 Http 采样器设置类型为 HttpClient3.1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T12:20:08.900

您面临的问题似乎来自使用的意外 HTTP 方法。它似乎没有：

*   邮政
*   放
*   头
*   痕迹
*   选项
*   删除
*   得到
*   修补

你能提供更多细节吗？******

# coffeescript - 如果给定值，函数返回对象的键

> ID：14805960
> 
> 赞同：0
> 
> 时间：2013-02-11T04:38:40.550
> 
> 标签：coffeescript

如果给定一个对象，例如：

```
 taste =
    0: "Hate"
    1: "Really Dislike"
    2: "Dislike"
    3: ""
    4: "Like"
    5: "Really Like"
    6: "Love" 
```

我正在寻找一个函数，如果给定值，它将返回键。我尝试了以下

```
 Object::getKeyByVal = (value) ->
    for prop of this
      return prop  if this[prop] is value  if @hasOwnProperty(prop) 
```

使用这个， alert time.getKeyByVal("< 1.5 hours") 将返回 8，但它给出的错误会杀死脚本的其余部分；

```
Uncaught TypeError: Object function (value) {
      var prop;
      for (prop in this) {
        if (this.hasOwnProperty(prop) ? this[prop] === value : void 0) {
          return prop;
        }
      }
    } has no method 'exec' 
```

有没有更好的方法来获取给定值的密钥？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T04:54:12.763

试试这个 ：

```
getKeyFromValue = (obj,value)->
  for own k,v of obj
    if v==value
      return k

o =
  a:1
  b:2
  c:3
  d:4

console.log(getKeyFromValue(o,3)) # should output c 
```

[查看现场演示](http://coffeescript.org/#try%3agetKeyFromValue%20=%20%28obj,value%29-%3E%0A%20%20for%20own%20k,v%20of%20obj%0A%20%20%20%20if%20v==value%0A%20%20%20%20%20%20return%20k%0A%0A%0A%0Ao%20=%0A%20%20a:1%0A%20%20b:2%0A%20%20c:3%0A%20%20d:4%0A%0Aconsole.log%28getKeyFromValue%28o,3%29%29%20#%20should%20output%20c%0A)

# sqlite - System.Data.SQLite Visual Studio 2012 .NET 4.5 不会显示在数据源中

> ID：14805961
> 
> 赞同：3
> 
> 时间：2013-02-11T04:38:45.953
> 
> 标签：sqlite, visual-studio-2012, system.data.sqlite

我正在使用 .NET 4.5 在 Visual Studio 2012 中的 Winodws 7 x86 机器上进行开发。我为我的项目安装了 x86/x64 System.Data.SQLite 官方 Nuget 包。但我仍然没有将它视为“选择数据源”对话框中的数据源\数据提供程序选择中的一个选项。我在这里看到了这个答案，看起来这就是我应该做的所有事情（[Visual Studio 2012 中的 SQLite 1.0.82.0 (latest) 没有显示在 Designer Data Source 中](https://stackoverflow.com/questions/12809929/sqlite-1-0-82-0-latest-in-visual-studio-2012-not-showing-in-designer-data-sour)）。我错过了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T04:57:37.640

[这个包对我有用。](http://system.data.sqlite.org/downloads/1.0.84.0/sqlite-netFx45-setup-bundle-x86-2012-1.0.84.0.exe)

显然

> “此安装程序包*能够*安装 Visual Studio 2012 的设计时组件。”

方法

> “安装 Visual Studio 2012 的设计时组件*需要*此安装程序包。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-12T17:12:46.317

我只是想将其添加为后续内容，因为我在 VS2012 中看到设计师时也遇到了问题，它可能会在未来对其他人有所帮助。

在多次尝试安装设计器但没有看到它出现后，我运行了 C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\devenv.exe /setup

这将强制 VS 根据所有已安装的软件包重建其注册表。这将需要几分钟。之后，我能够启动 VS 2012 并看到条目。

我很好奇安装程序是完全执行此命令还是只是触发它但不等待它完成。此时最终用户在命令有时间完成之前打开 VS 2012。

# c# - 获取 (OAuthException - #2500) 必须使用活动访问令牌来查询有关当前用户的信息

> ID：14805967
> 
> 赞同：3
> 
> 时间：2013-02-11T04:39:49.133
> 
> 标签：c#, facebook, oauth-2.0, facebook-c#-sdk, access-token

我收到以下错误：

> (OAuthException - #2500) 必须使用活动访问令牌来查询有关当前用户的信息。

在 C# 中使用 Facebook SDK 的 V6。

下面是我正在使用的代码，请注意我省略了我的 AppID 和 App Secret：

```
public partial class Form1 : Form
{
    private string accessToken;

    private void getAccessTokenButton_Click(object sender, EventArgs e)
    {
        FacebookClient client = new FacebookClient();
        dynamic result = client.Get("oauth/access_token", new
        {
            client_id = "OMITTED",
            client_secret = "OMITTED",
            grant_type = "client_credentials"
        });
        accessToken = result.access_token;
    }

    private void retrieveFirstNameButton_Click(object sender, EventArgs e)
    {
        FacebookClient client = new FacebookClient();
        client.AccessToken = accessToken;
        dynamic result = client.Get("me");
        MessageBox.Show(result.first_name);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T07:39:47.350

啊! 想通了问题。您正在使用**应用访问令牌**来获取有关当前登录用户的信息，这是不允许的。
您必须获取用户访问令牌才能访问有关当前登录用户的详细信息。**另一个选项**是您可以传递用户 ID而不是“我”来获取有关授予您所需权限的用户的信息。

```
dynamic result = client.Get("User_ID");
string name = result.first_name; 
```

我在您的代码中检测到的另一个问题是您使用错误的方法使用现有访问令牌创建新的“FacebookClient”。我想正确的方法是在构造函数中传递 accessToken 。

```
FacebookClient client = new FacebookClient("Access_Token"); 
```

这是一个完整的教程：[使用 Facebook C# SDK](http://www.thepcwizard.in/2013/02/working-with-facebook-c--sharp-sdk.html)

# c - 为什么我的 C 程序会提前关闭？

> ID：14805968
> 
> 赞同：0
> 
> 时间：2013-02-11T04:39:52.767
> 
> 标签：c

我现在有一个非常令人困惑的问题。我为自己编写了一个测试程序，但有时在我输入 Crtl+C（我认为它是 EOF）后，程序提前关闭，而没有运行我希望它取消的 While 循环下方的更多命令。

```
#include <stdio.h> 
#include <string.h>

int main()
{
char message[140];
    char* p = message;
     int count;
int i = 0;
    int charGT;
    while((charGT=getchar()) != EOF) 
    {
        message[i] = charGT;
        i++;
        printf("%d" , i);
    }
    printf("next");
    count = strlen(p);
    printf("%d", count);
    printf("after");
    return (0);
} 
```

输入“asd\n^C”会导致我的程序提前结束。不会打印“下一个”或“之后”我的理论是，不知何故， \n 导致程序跳出循环一会儿，然后 Crtl+C 退出程序，但我不知道那将如何工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T04:42:17.073

`Ctrl`+`C`是中断命令，它将向您的应用程序发送中断信号。默认处理程序将导致它退出进程。

`Ctrl`+`D`是您要查找的 EOF 命令。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T13:45:38.573

要在 Windows 上运行，要输入 EOF，请按**Ctrl+Z**，然后按 ENTER。在 UNIX 系统中为 Ctrl+D，在 Windows 中为 Ctrl+Z。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T04:05:32.713

当程序运行时，如果您按下 Ctrl-c，则会发送一个信号以中止程序并且程序被中止。但是，如果您想使用 Ctrl-c 作为输入但不中止程序，请编写一个信号处理程序，当您按下 Ctrl-c 并执行您想要的操作时它会捕获信号。

# c - C 中 char 数组的错误

> ID：14805969
> 
> 赞同：-1
> 
> 时间：2013-02-11T04:39:54.223
> 
> 标签：c

我想在 C 中将以下 html 打印到控制台。但是，我的代码中有一个错误让我非常困惑，我不知道这怎么会发生？错误是它再次打印最后一个字符数组。

样本输出：

```
<html>
    <body>
        <p>Hey There!</p>
        <p>You can search for things on the internet at:
            <ul>
            <li> <a href="http://www.google.com">Google</a></li>
            <li> <a href="http://www.bing.com">Bing</a></li>
            </ul>
        </p>
    </body>
    </html>

My output:
<html>
    <body>
        <p>Hey There!</p>
        <p>You can search for things on the internet at:
            <ul>
            <li> <a href="http://www.google.com">Google</a></li>
            following line is incorrect. It prints the above line again.
            <li> <a href="http://www.bing.com" href="http://www.google.com">Bing</a></li> 
            </ul>
        </p>
    </body>
    </html> 
```

我的代码：

```
#include <stdio.h>
#include <stdint.h>
#include <string.h>
void open_tag(char tag[], char attribute[]){
char str1[100];
char str2[100];
char str3[100];
//The bug happens here.The attribute[] is incorrect.
strcpy (str1,tag);
strncat (str1, attribute, 100);
strcpy (str2,"<");
strcpy (str3,">");
strncat (str2, str1, 100);
strncat (str2, str3, 50);
printf ("%s",str2);
}
void close_tag(char tag[]){
char str1[20];
char str2[20];
char str3[20];
strcpy (str1,tag);
strcpy (str2,"</");
strcpy (str3,">");
strncat (str2, str1, 6);
strncat (str2, str3, 6);
printf ("%s",str2);
}

int main(int argc, char *argv[])
{
open_tag("html", "");
printf("\n");
open_tag("body", "");
printf("\n");
open_tag("p", "");
printf("Hey There!");
close_tag("p");
printf("\n");
open_tag("p", "");
printf("You can search for things on the internet at:");
printf("\n");
open_tag("ul", "");
printf("\n");
open_tag("li", "");
char arr2[] = {' ','h','r','e','f','=','\"','h','t','t','p',':','/','/','w','w','w','.','g','o','o','g','l','e','.','c','o','m','\"'};
open_tag("a", arr2);
printf("Google");
close_tag("a");
close_tag("li");
printf("\n");
open_tag("li", "");
char arr1[] = {' ','h','r','e','f','=','\"','h','t','t','p',':','/','/','w','w','w','.','b','i','n','g','.','c','o','m',' ','\"'};  
open_tag("a", arr1);
printf("Bing");
close_tag("a");
close_tag("li");
printf("\n");
close_tag("ul");
printf("\n");
close_tag("p");
printf("\n");
close_tag("body");
printf("\n");
close_tag("html");
printf("\n");
return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T04:48:52.423

当您创建并传递`attribute`时，它不是以空值终止的。然后你强迫它复制100个字符（使用`strcat`），然后你在它的末尾附加字符（`<`和`>`）

`arr1`我建议你在传递它们之前在你的和字符串上加上一个终止符`arr2`（通过添加一个`'\0'`字符）。

然后不要使用`strncat(..., 100)`，只使用普通的`strcat()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T04:54:20.600

这个：

```
void open_tag(char tag[], char attribute[]){
    char str1[100];
    char str2[100];
    char str3[100];
    //The bug happens here.The attribute[] is incorrect.
    strcpy (str1,tag);
    strncat (str1, attribute, 100);
    strcpy (str2,"<");
    strcpy (str3,">");
    strncat (str2, str1, 100);
    strncat (str2, str3, 50);
    printf ("%s",str2);
} 
```

一定是我见过的最复杂的写这篇文章的方式之一：

```
void open_tag(char const *tag, char const *attribute)
{
    printf("<%s %s>", tag, attribute);
} 
```

请注意，替换不会对标签或属性的长度施加任意限制，因此它也更可靠（并且更易于阅读）。

该`close_tag()`功能同样怪诞——它可以简化为：

```
void close_tag(char const *tag)
{
    printf("</%s>", tag);
} 
```

当然，这假设您将以空字符结尾的字符串传递给函数；如果你不这样做，你就什么都没有了。所以，你的代码：

```
char arr2[] = {' ','h','r','e','f','=','\"','h','t','t','p',':','/','/','w','w','w','.','g','o','o','g','l','e','.','c','o','m','\"'};
open_tag("a", arr2); 
```

应该变得更简洁，例如：

```
open_tag("a", "href=\"http://www.google.com\""); 
```

文字字符串的常量性使得`char const *tag`参数是可取的，因为它们没有被修改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T05:21:53.017

清理你的代码，

```
void open_tag(char* tag, char* attribute){

printf("<%s%s>",tag,attribute);

}

void close_tag(char* tag){

printf("</%s>",tag);    

}

int main(int argc, char *argv[])
{
char arr1[] = {' ','h','r','e','f','=','\"','h','t','t','p',':','/','/','w','w','w','.','b','i','n','g','.','c','o','m',' ','\"','\0'};  
char arr2[] = {' ','h','r','e','f','=','\"','h','t','t','p',':','/','/','w','w','w','.','g','o','o','g','l','e','.','c','o','m','\"','\0'};

open_tag("html", "");
printf("\n\t");

open_tag("body", "");
printf("\n\t\t");

open_tag("p", "");
printf("Hey There!");
close_tag("p");
printf("\n\t\t");

open_tag("p", "");
printf("You can search for things on the internet at:\n\t\t\t");
open_tag("ul", "");
printf("\n\t\t\t\t");
open_tag("li", "");

open_tag("a", arr2);
printf("Google");
close_tag("a");
close_tag("li");
printf("\n\t\t\t\t");
open_tag("li", "");
open_tag("a", arr1);
printf("Bing");
close_tag("a");
close_tag("li");
printf("\n\t\t\t");
close_tag("ul");
printf("\n\t\t");
close_tag("p");
printf("\n\t");
close_tag("body");
printf("\n");
close_tag("html");
printf("\n");

return 0;
} 
```

输出：

```
<html>
    <body>
        <p>Hey There!</p>
        <p>You can search for things on the internet at:
            <ul>
                <li><a href="http://www.google.com">Google</a></li>
                <li><a href="http://www.bing.com ">Bing</a></li>
            </ul>
        </p>
    </body>
</html> 
```

您的代码存在问题：1\. 缩进 2\. 数组中的空字符 3\. 不必要的代码

尽管我清理了您的代码，但您确实意识到这种编码方式并不是真正需要的。

# amazon-web-services - Amazon ec2-get-console-output 返回“找不到文件”

> ID：14805973
> 
> 赞同：0
> 
> 时间：2013-02-11T04:40:23.647
> 
> 标签：amazon-web-services, amazon-ec2

我刚刚设置了一个 Amazon ec2 服务器的免费实例。我试图弄清楚如何通过 SSH 进入它。我下载了 ec2 的命令行工具，并按照此页面上的内容： http: [//docs.aws.amazon.com/AWSEC2/latest/UserGuide/EC2_GetStarted.html#EC2_LaunchInstance_Linux](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/EC2_GetStarted.html#EC2_LaunchInstance_Linux)：

```
.ec2$ ec2-get-console-output [instance id]
File not found: ''
.ec2$ 
```

where`[instance id]`指的是我拥有的实例列表中的 id amazon 列表。谁能告诉我发生了什么事？

编辑：我可能会添加它似乎对我尝试从命令行工具运行的任何二进制文件执行此操作......即使我直接调用它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T15:01:28.133

在我在 .bash_profile 文件中指定密钥和证书之前，我遇到了同样的问题：

> 导出 EC2_HOME=~/.ec2
> 
> 导出 PATH=$PATH:$EC2_HOME/bin
> 
> 导出 EC2_PRIVATE_KEY='ls $EC2_HOME/key.pem'
> 
> 导出 EC2_CERT='ls $EC2_HOME/cert.pem'

# java - 假设单元格异常：om.ctc.wstx.sr.ValidatingStreamReader 无法转换为 com.ctc.wstx.sr.ValidatingStreamReader

> ID：14805975
> 
> 赞同：2
> 
> 时间：2013-02-11T04:40:37.043
> 
> 标签：java, excel, aspose, aspose-cells

我正在使用 Aspose.Cells（试用版）来解析 Java 的 .xls（Excel）文件。但是当我尝试加载文件时，它会抛出下面给出的异常：

> 严重：java.lang.IllegalStateException：XML 流异常：XMLStreamException：com.ctc.wstx.sr.ValidatingStreamReader 无法转换为 com.ctc.wstx.sr.ValidatingStreamReader

这是我的代码

```
Workbook workbook = new Workbook();
try {
  workbook.open(path+fileName);
} catch (Exception e) {
  e.printStackTrace();
}
Worksheet worksheet = workbook.getWorksheets().get(0); 
```

这个异常出现在**`workbook.open(path+fileName);`**这条线上。我很确定这不是由于错误的路径，因为当我给出错误的路径时，aspose throws `FileNotFoundException`。所以现在我被困在这里，无法找到为什么会发生这种情况？

**注意：**在寻找这个问题时，我在 aspose 论坛上找到[了这个答案](http://www.aspose.com/community/forums/permalink/342468/342468/showthread.aspx)，但它没有帮助也不可行（检查放置在 lib 中的 jar 中存在的所有类）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-11T09:28:43.280

我们建议您尝试我们最新版本的产品（例如 v7.7.x (JAVA)），因为我们确实删除了一些相互依赖的 jar，并编写/包含了我们自己的自定义 XML 解析器以在产品中执行一些 XML 操作。在新版本中，我们已经删除了产品中存在冲突的“com.etc.wstx”jar，因此您应该不会再发现此异常。

谢谢，

# json - 获取json数组，空指针引用异常

> ID：14805983
> 
> 赞同：0
> 
> 时间：2013-02-11T04:41:29.323
> 
> 标签：json, windows-phone-7, nullreferenceexception

```
{"names":["name1","name2","name3","name4"]} 
```

我需要获取它并将它们显示在列表中。我正在做的是

```
public class brand
{  public string Name
    { get; set; }
}

public class brands
{  public list<brand> Names
    { get; set; } 
```

}

```
public partial class MainPage : PhoneApplicationPage
{
    // Constructor
    public MainPage()
    {
        InitializeComponent();
        getdata();
    }

    private void getdata()
    {
        string uri = "URL";
        HttpWebRequest req = (HttpWebRequest)HttpWebRequest.Create(new Uri(uri));

        req.BeginGetResponse(new AsyncCallback(show), req);
    }

    private void show(IAsyncResult asynchronousResult)
    {
        HttpWebRequest request = (HttpWebRequest)asynchronousResult.AsyncState;

        HttpWebResponse response = (HttpWebResponse)request.EndGetResponse(asynchronousResult);

        StreamReader stream1 = new StreamReader(response.GetResponseStream());

         string s1 = stream1.ReadToEnd();
         var ser = new DataContractJsonSerializer(typeof(brands));
         var stream = new MemoryStream(Encoding.Unicode.GetBytes(s1));

          var bb = (brands)ser.ReadObject(stream);

          foreach (var ev in bb.Names)
            {
                textBlock1.Text = ev.Name.ToString();
            }
        } 
```

这是我在阅读博客文章后所做的。我越来越`NullReferenceException`。请告诉我我在哪里做错或做同样的替代方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T06:02:26.077

首先学习如何解析你的 JSON 数据。将其视为 json 字符串。

```
String jsonData = @"{""names"":[""name1"",""name2"",""name3"",""name4""]}";

var brands = JsonConvert.DeserializeObject<Brands>(jsonData);
foreach (var item in brands.names)
        {
            Console.WriteLine(item);
        } 
```

你的 Brands 课程是这样的

```
public class Brands
    {
        public List<string> names { get; set; }
    } 
```

上面的代码解释了如何解析你的 json 数据。现在，开始从 Web 服务获取您的 json 数据，因为您的请求不是 POST 请求（它似乎是从您的代码中获取的），您可以使用简单的 WebCleint。

```
void getData()
{
  WebClient webClient = new WebClient();
  webClient.DownloadStringCompleted += new DownloadStringCompletedEventHandler(webClient_DownloadStringCompleted);
  webClient.DownloadStringAsync(new Uri("url"));
}

void wc_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
{

    var brands = JsonConvert.DeserializeObject<Brands>(e.Result);
    foreach (var item in brands.names)
    {
        Console.WriteLine(item);
    }
} 
```

检查此博客是否有任何其他疑问：[Parsing JSON in a Windows Phone Application](http://nkishorchandra.blogspot.in/2012/10/parsing-json-in-windows-phone.html)

# .net - 窗口最大化时画布未最大化

> ID：14805987
> 
> 赞同：1
> 
> 时间：2013-02-11T04:42:16.333
> 
> 标签：.net, wpf, xaml, canvas

侧画布标签有边框，现在我想根据窗口最大化来最大化画布的大小

```
<ScrollViewer x:Name="scrollViewer" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
    <Border BorderBrush="DarkGray" BorderThickness="1">
        <Canvas x:Name="canvas"  VerticalAlignment="Stretch" HorizontalAlignment="Stretch" AllowDrop="True" Background="Transparent" PreviewDragOver="canvas_DragOver" PreviewDrop="canvas_Drop" Width="600" Height="500">
            <TextBlock x:Name="tb" AllowDrop="True" Text="WorkBench" TextAlignment="Center" Width="100" Height="20" Canvas.Left="258" Canvas.Top="0" ToolTip="Drag and Drop Tools Here" />
        </Canvas>
    </Border>
 </ScrollViewer> 
```

# c# - 使用 100 个 Id 时使用 EntityFramework 4.4 在 C# 中进行慢速查询编译

> ID：14805989
> 
> 赞同：1
> 
> 时间：2013-02-11T04:42:27.807
> 
> 标签：c#, .net, entity-framework

我希望我能得到一些帮助来解决我在 EntityFramework 4.4 中遇到的性能问题。我正在将一个使用 EDMX 文件的应用程序首先转换为代码，并且在 LINQ 查询的“where”子句中运行具有大量对象的查询时遇到了问题。

以下是对所有内容的布局方式的简要概述（实体不是指 EF，它是我们代码中为通用“事物”提供的名称）：

```
public class ExampleDbContext : DbContext
{
    public DbSet<EntityTag> EntityTags { get; set; }
    public DbSet<Entity> Entities { get; set; }

    public DbSet<Log> Logs { get; set; }

    protected override void OnModelCreating(DbmodelBuilder modelBuilder)
    {
        // Fluent mappings added to modelBuilder.Configurations.Add() in here
    }
}

public class EntityTag
{
    public int Id { get; set; }

    public virtual Entity Entity { get; set; }
    public int EntityId { get; set; }

    public virtual Log Deleted { get; set; }
    public int? DeletedId { get; set; }
}

public class Entity
{
    public int Id { get; set; }

    pulic byte[] CompositeId { get; set; }
}

// Used to log when an event happens
public class Log
{
    public int Id { get; set; }

    public string Username { get; set; }
    public DateTime Timestamp { get; set; }
} 
```

我正在运行的导致问题的查询是：

```
// Creates an IEnumerable<byte[]> with the keys to find
var computedKeys = CreateCompositeIDs(entityKeys);

// Run the query and find any EntityTag that isn't deleted and is in
// the computedKeys list
var result = from et in Context.EntityTags
             where computedKeys.Contains(et.Entity.CompositeId) &&
                   et.Deleted == null
             select et;

var entityTags = result.ToList(); 
```

当 computedKeys 仅包含几个 Id（例如 15 个）时，代码和查询会快速运行。当我有大量 Id（此时 1600 是正常的，并且可能会变得更高）时，一旦使用`ToList()`. 我还`computedKeys.Contains()`从查询中删除了大量的（离开 et.Deleted），`computedKeys`并且查询最终快速运行。

通过调试，我确定创建键列表很快，所以这不是问题。当我将探查器连接到 MSSQL 以查看生成的查询时，它看起来很正常，因为所有 CompositeId 都包含在 a 中`WHERE CompositeId IN ( /* List of Ids, could be 1500 of them */)`，并且当查询显示在探查器中时，它会在不到一秒的时间内执行，所以我不认为它是数据库优化的事情，要么。分析器将坐在那里，在它运行的整个过程中，从最后一秒左右开始，当它快速返回结果时，它不会出现任何东西。

我连接了 dotTrace，看起来很多时间都花在`System.Data.Query.PlanCompiler.JoinGraph.GenerateTransitiveEdge(JoinEdge, JoinEdge)`（119,640 毫秒）`System.Collections.Generic.List+Enumerator`内，我认为，根据每个方法的总执行时间，在该方法中调用了 1.MoveNext`（54,270 毫秒）两次。

我似乎无法弄清楚为什么生成查询需要这么长时间。编译后第二次执行似乎也没有更快，所以它看起来不像被缓存。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:35:05.653

我能够弄清楚。一旦我决定不保留原始查询并重新考虑结果，我将查询重写为：

```
var computedKeys = CreateCompositeIDs(entityKeys);

var entityTags = (from e in Context.Entities
                  where computedKeys.Contains(e.CompositeId)
                  from et in e.Tags
                  select et).Distinct();
entityTags = from et in entityTags
             where et.Deleted == null
             select et;

return entityTags; 
```

当我开始直接查询实体并利用与`EntityTag`（我忘记包含在原始问题中......）的关系时`Tags`，然后只过滤现有的`EntityTag`，它加快了查询速度，使其全部运行在一个之下第二。

# highcharts - Highcharts 可以有多条情节线吗？

> ID：14805990
> 
> 赞同：1
> 
> 时间：2013-02-11T04:42:34.563
> 
> 标签：highcharts, highstock

简单地说，我正在寻找一种在 highcharts/highstocks 中设置两个或多个 plotLines 的方法。API 文档很好地展示了如何设置一个，尽管我不确定是否有办法设置其中两个。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T11:00:40.607

是的，有可能，只需在数组中声明多个 plotLine 配置：

```
 plotLines: [{
            color: '#FF0000',
            width: 2,
            value: 4.5
        }, {
            color: '#00FF00',
            width: 2,
            value: 5.5
        }] 
```

[jsfiddle](http://jsfiddle.net/uSREH/)上的示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-05T08:17:51.533

有没有一种方法可以让我为 value 提供一组点？而不是新标签

> { 颜色：'#00FF00'，宽度：2，值：5.5 }

对于每个点。

# php - jQuery AJAX API 交互。如何使用 html 视图处理数据输出？

> ID：14805991
> 
> 赞同：0
> 
> 时间：2013-02-11T04:42:45.177
> 
> 标签：php, html, ajax, templates, view

目前，我的互动是这样的：

> 对我的站点控制器的 AJAX 调用 -> 通过 PHP 加载的 API 内容并输出 -> javascript 将视图直接输出到页面中

有没有办法从某种外部文件加载 HTML？

我不想最终做这样的事情，因为它会使更改 html 变得混乱。

```
html = '';

for (i = 0; i < jsonData.length; i++) {
    html += '<div class="blah"><b>Content goes here<b><br>';
        html += '<div class="blah_nested">' + jsonData[i].awesomeness + '</div>';
    html += '</div>';

    $("#some_div").html(html);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T05:18:53.377

创建一个包含该代码并在请求中获取 json 响应的 php 文件。

示例（data.php）：

```
 <div class="blah"><b>Content goes here<b><br>
    <div class="blah_nested"><?php echo $_GET['jsondata']; ?></div>
 </div> 
```

然后做：

```
html = "";
for (i = 0; i < jsonData.length; i++) {
     $.get('data.php?jsondata=' + jsonData[i].awesomeness, function(response){
        html += response;
     });
} 
```

**我进行了编辑以使其更直接地匹配他的原始代码。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T04:59:09.347

是的，您可以制作一个包含所有可重复代码的 html 文件。

例如，在名为模板的 html 文件中，您可能有：

```
<div class="blah"><b>Content goes here<b><br>
    <div class="blah_nested"></div>
</div> 
```

然后在您的 js 中，您可以使用 .get 来获取该代码。

```
 $.get('templates.html', function(html){
            var h = $(html);
            var blah = h.find('.blah').html();
       }); 
```

现在你已经得到了你的代码。您仍然必须将其放入 for 循环中，并且您仍然必须输入您的信息，这些信息如下所示：

`$('blah_nested').text(jsonData[i].awesomeness);`

但是现在你不用去你的js去修改html了。这是一个多一点的 js 代码，但它把所有的东西都分开了。

# java - 调用 g 返回 Null 异常？

> ID：14805994
> 
> 赞同：-1
> 
> 时间：2013-02-11T04:43:12.613
> 
> 标签：java, applet, awt

```
public class delaunay extends Applet implements Runnable {
    public Graphics g;
    public void paint( Graphics g ) {
        displaytri(po[eee],arr[0].p1,arr[0].p2);
    }
    public void displaytri(Point v1, Point v2, Point v3) { 
    g.drawLine(v1.x,v1.y,v2.x,v2.y);
    g.drawLine(v2.x,v2.y,v3.x,v3.y);
    g.drawLine(v3.x,v3.y,v1.x,v1.y);        
}
} 
```

`po[eee],arr[0].p1`当我尝试`System.out.println()`使用它们时，所有其他点都可以正常工作。每个变量`v1` `v2` `v3`都有自己的值，我试图在函数中打印这些值`displaytri`。

这会返回一个错误：

> > 线程“AWT-EventQueue-1”中的异常 java.lang.NullPointerException

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T04:47:06.850

您尚未初始化您的实例/类变量`g`。

尝试使用方法的`g`变量将其初始化`paint`为您的类变量`g`，如下所示：

```
public Graphics g;
public void paint( Graphics g ) {

   this.g = g;
   displaytri(po[eee],arr[0].p1,arr[0].p2);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T05:12:20.737

您永远不应该维护`Graphics`对系统创建的任何对象的引用。

这可能会将您置于绘制管道之外并导致意外的绘制伪影。

相反，将引用传递`g`给您需要的方法......

```
public class delaunay extends Applet implements Runnable {

    public void paint( Graphics g ) {
        displaytri(g, po[eee],arr[0].p1,arr[0].p2);
    }
    public void displaytri(Graphics g, Point v1, Point v2, Point v3) { 
        g.drawLine(v1.x,v1.y,v2.x,v2.y);
        g.drawLine(v2.x,v2.y,v3.x,v3.y);
        g.drawLine(v3.x,v3.y,v1.x,v1.y);        
    }
} 
```

# c++ - 如何正确继承析构函数不是虚拟的基类？

> ID：14805996
> 
> 赞同：1
> 
> 时间：2013-02-11T04:43:26.563
> 
> 标签：c++, inheritance, virtual-destructor

我想从 A 类继承，但是 A 的析构函数不是虚拟的，我不能修改 A 的定义。如何避免以下情况？

```
struct A
{
    A()
        : a(new char[8])
    {}

    ~A()
    {
        delete[] a;
    }

    char* a;
}

struct B : A
{
    B()
        : A(), b(new char[8])
    {}

    ~B()
    {
        delete[] b;
    }

    char* b;
};

int main()
{
    A* p_a = new B;
    delete p_a; // How to avoid such a dangerous deletion?
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-11T04:47:51.910

如果基类没有虚拟析构函数并且您无法修改类定义，那么您就很不走运了。作为一般经验法则，您可能不应该对没有虚拟析构函数的基类使用公共继承。

也许您可以尝试使用组合而不是继承？放置 in 的一个实例`A`，`B`并提供公共成员函数来包装对 的成员函数的调用`A`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T04:46:20.600

您可以使用`struct B : private A`这样`A`一个无法访问的基础`B`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T05:47:42.000

只需制作`A`数据成员而不是基类。

* * *

顺便说一句，班级违反了三人制，这是灾难的邀请。如果复制实例怎么办。更好地使用标准库容器而不是显式`new`和`delete`.

# java - 如何在Java中对List内的地图进行排序

> ID：14805997
> 
> 赞同：0
> 
> 时间：2013-02-11T04:43:37.423
> 
> 标签：java, collections

```
 List<Map<String,String>> consolidErr = new LinkedList<Map<String,String>>();

 Map m1= new HashMap<String,String>();
 m1.put("id","1");
 m1.put("value","value1");

 Map m2= new HashMap<String,String>();
 m2.put("id","2");
 m2.put("value","value2");

 Map m3= new HashMap<String,String>();
 m3.put("id","3");
 m3.put("value","value3");

add all m1,m3 and m2 in list 
```

然后根据地图中的 ID 对地图进行排序现在我希望列表中的地图为 m1、m2 和 m3。

现在我想根据地图中的 id 进行排序，我使用列表的迭代来做到这一点，并将地图的第一个 id 作为检查器，并与下一个进行比较，如果有比使用内置方法更好的方法。请给出你的想法。我现在为此使用冒泡排序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T04:53:28.020

在 java 中执行此操作的最简单方法（或至少，最少的混乱）是使用自定义比较器。

这个想法是，如果您有*自然*排序的对象（任何扩展 Comparable 的对象），您可以只要求排序，例如

```
Collections.sort(List<Integer> .. 
```

否则，您可以传入一个比较器，描述您希望如何比较对象，以及您想要的任何自定义逻辑，例如（大致 - 这不在我的脑海中并且没有错误检查，但应该足以给你这个想法） -

```
List<Map<String,String>> consolidErr = ...
enter code here
Collections.sort(consolidErr, new Comparator<Map<String,String>>(){
     public int compare(Map<String,String> a, Map<String,String> b){ 
        return a.get("id").compareTo(b.get("id"));}
    }) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-22T14:25:40.700

在 Java 8 中，我们可以在一行中对`list`of进行排序。`maps`

```
list.sort(Comparator.comparing((Map<String,String> mp) -> mp.get("Id"))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T12:53:12.113

我会改用[PriorityQueue](http://docs.oracle.com/javase/6/docs/api/java/util/PriorityQueue.html)

作为列表的包装。通过在创建它时将 Comparator 提供给构造函数，可以确保您的列表在每次将新元素插入列表后保持排序。