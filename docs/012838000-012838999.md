# StackOverflow 问答 12838000-12838999

# sql - ADO 查询 MDB 和 SQL Server

> ID：12838000
> 
> 赞同：0
> 
> 时间：2012-10-11T10:58:51.867
> 
> 标签：sql, sql-server, vba, ado

我有一个位于`SQL serve`r 盒子上的数据库，另一个位于单独的`mdb file`.

两者都包含相似的数据，但我想运行一个查询来检查两者中都存在的字段中的不匹配记录。

`ADO`使用( ) 是否很容易做到这一点`VBA`？如果是这样，你能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T14:54:32.053

最简单的方法是创建一个新的 Access 数据库或 ADP，并链接来自 SQL 服务器和其他 MDB 的表。这样，您就可以从同一实例中获得两者的接口，从而允许您查询或连接不同的表。

# c - 如何使用 C 从 Android 设备中提取文件（超过 64 kB）？

> ID：12838005
> 
> 赞同：0
> 
> 时间：2012-10-11T10:59:14.103
> 
> 标签：c

我正在向 adb 服务器发送命令，例如转换为大端格式`STAT`后`RECV`，但我的代码不适用于大于 64 kB 的文件？如何解决这个问题呢？

# windows-xp - Lightswitch 桌面应用程序无法在 XP SP3 中安装

> ID：12838006
> 
> 赞同：0
> 
> 时间：2012-10-11T10:59:33.330
> 
> 标签：windows-xp, visual-studio-lightswitch

我有一个使用 Visual Studio 2012 使用 Lightswitch 开发的桌面应用程序。

该应用程序完美地安装在 Windows 7 机器上，但是当我尝试在 XP SP3 机器上安装它时，我得到：

> setup.exe 不是有效的 Win32 应用程序

我试过使用：

> editbin setup.exe /SUBSYSTEM:WINDOWS,5.01 /OSVERSION:5.1

但后来我收到以下错误：

> 过程入口点 InitializeCriticalSectionEX 无法位于动态链接库 Kernal32.dll 中

我花了很长时间让这个快速开发的应用程序完全按照我的意愿去做，并且在最后一个障碍真正咬到时却陷入了困境。因此，如果有人可以帮助我让这个东西在 XP 机器上运行，我将非常非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T08:18:05.600

看起来我遇到了“无法在 VS2012 for XP 中编译应用程序”的问题。所以我要在VS2010中重新开发应用程序。不错的微软...

[Setup.exe 不是有效的 Win32 应用程序](http://blogs.msdn.com/b/vsnetsetup/archive/2012/10/16/setup-exe-is-not-a-valid-win32-application.aspx)

# c# - C# 线性插值

> ID：12838007
> 
> 赞同：13
> 
> 时间：2012-10-11T10:59:47.960
> 
> 标签：c#, interpolation

我在插入数据文件时遇到问题，我已将其从 .csv 转换为 X 数组和 Y 数组，其中 X[0] 对应于点 Y[0]。

我需要在值之间进行插值，以在最后给我一个平滑的文件。我正在使用 Picoscope 来输出函数，这意味着每一行在时间上是等距的，所以只使用 Y 值，这就是为什么当你看到我的代码时我试图以一种奇怪的方式来做这件事。

它必须处理的值是：

```
X     Y
0     0
2.5   0
2.5   12000
7.5   12000
7.5   3000
10    3000
10    6000
11    6625.254
12    7095.154 
```

因此，在彼此相邻的 2 个 Y 值相同的情况下，它们之间是一条直线，但是当它们从 X = 10 开始变化时，在本例中它变成了正弦波。

我一直在看这里的插值等式和其他帖子，但我已经很多年没有做过那种数学了，遗憾的是我再也想不通了，因为有两个未知数，我想不出怎么做将其编程到 c# 中。

我所拥有的是：

```
int a = 0, d = 0, q = 0;
bool up = false;
double times = 0, change = 0, points = 0, pointchange = 0; 
double[] newy = new double[8192];
while (a < sizeoffile-1 && d < 8192)
{
    Console.Write("...");
    if (Y[a] == Y[a+1])//if the 2 values are the same add correct number of lines in to make it last the correct time
    {
        times = (X[a] - X[a + 1]);//number of repetitions
        if ((X[a + 1] - X[a]) > times)//if that was a negative number try the other way around
            times = (X[a + 1] - X[a]);//number of repetitions 
        do
        {
            newy[d] = Y[a];//add the values to the newy array which replaces y later on in the program
            d++;//increment newy position
            q++;//reduce number of reps in this loop
        }
        while (q < times + 1 && d < 8192);
        q = 0;//reset reps
    }
    else if (Y[a] != Y[a + 1])//if the 2 values are not the same interpolate between them
    {
        change = (Y[a] - Y[a + 1]);//work out difference between the values
        up = true;//the waveform is increasing
        if ((Y[a + 1] - Y[a]) > change)//if that number was a negative try the other way around
        {
            change = (Y[a + 1] - Y[a]);//work out difference bwteen values
            up = false;//the waveform is decreasing
        }
        points = (X[a] - X[a + 1]);//work out amount of time between given points
        if ((X[a + 1] - X[a]) > points)//if that was a negative try other way around
            points = (X[a + 1] - X[a]);///work out amount of time between given points
        pointchange = (change / points);//calculate the amount per point in time the value changes by
        if (points > 1)//any lower and the values cause errors
        {
            newy[d] = Y[a];//load first point
            d++;
            do
            {
                if (up == true)//
                    newy[d] = ((newy[d - 1]) + pointchange);
                else if (up == false)
                    newy[d] = ((newy[d - 1]) - pointchange);
                d++;
                q++;
            }
            while (q < points + 1 && d < 8192);
            q = 0;
        }
        else if (points != 0 && points > 0)
        {
            newy[d] = Y[a];//load first point
            d++;
        }
    }
    a++;
} 
```

这会产生一个接近的波形，但它仍然非常阶梯状。

那么有人能看出为什么这不是很准确吗？如何提高其准确性？还是使用数组的不同方法？

谢谢你看:)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-11T11:20:04.867

为我试试这个方法：

```
static public double linear(double x, double x0, double x1, double y0, double y1)
{
    if ((x1 - x0) == 0)
    {
        return (y0 + y1) / 2;
    }
    return y0 + (x - x0) * (y1 - y0) / (x1 - x0);
} 
```

实际上，您应该能够使用您的数组并像这样使用它：

```
var newY = linear(X[0], X[0], X[1], Y[0], Y[1]); 
```

我从[这里](http://www.miltest.com/articles/application-notes/60-interpolation-in-csharp.html)提取了代码，但验证了算法与[这里](http://en.wikipedia.org/wiki/Interpolation)的理论相匹配，所以我***认为***它是正确的。但是，如果这仍然是阶梯式的，您可能应该考虑使用多项式插值，请注意理论链接，它表明线性插值会产生阶梯波。

因此，我给出的第一个链接（我从中获取此代码的地方）也有一个多项式算法：

```
static public double lagrange(double x, double[] xd, double[] yd)
{
    if (xd.Length != yd.Length)
    {
        throw new ArgumentException("Arrays must be of equal length."); //$NON-NLS-1$
    }
    double sum = 0;
    for (int i = 0, n = xd.Length; i < n; i++)
    {
        if (x - xd[i] == 0)
        {
            return yd[i];
        }
        double product = yd[i];
        for (int j = 0; j < n; j++)
        {
            if ((i == j) || (xd[i] - xd[j] == 0))
            {
                continue;
            }
            product *= (x - xd[i]) / (xd[i] - xd[j]);
        }
        sum += product;
    }
    return sum;
} 
```

要使用这个，你必须决定如何提高你的`x`价值观，所以假设我们想通过找到当前迭代和下一个迭代之间的中点来做到这一点：

```
for (int i = 0; i < X.Length; i++)
{
    var newY = lagrange(new double[] { X[i]d, X[i+1]d }.Average(), X, Y);
} 
```

请注意，这个循环会有更多内容，比如确保有一个`i+1`等等，但我想看看我是否可以给你一个开始。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-04T15:48:04.817

[Wolfram 的理论基础](http://mathworld.wolfram.com/LeastSquaresFitting.html)

**下面的解决方案计算具有相同 X 的给定点的 Y 值的平均值，就像 Matlab 的 polyfit 函数一样**

*对于这个 swift API，Linq 和 .NET 框架版本 > 3.5 是必需的。* 代码内的注释。

```
using System;
using System.Collections.Generic;
using System.Linq;

/// <summary>
/// Linear Interpolation using the least squares method
/// <remarks>http://mathworld.wolfram.com/LeastSquaresFitting.html</remarks> 
/// </summary>
public class LinearLeastSquaresInterpolation
{
    /// <summary>
    /// point list constructor
    /// </summary>
    /// <param name="points">points list</param>
    public LinearLeastSquaresInterpolation(IEnumerable<Point> points)
    {
        Points = points;
    }
    /// <summary>
    /// abscissae/ordinates constructor
    /// </summary>
    /// <param name="x">abscissae</param>
    /// <param name="y">ordinates</param>
    public LinearLeastSquaresInterpolation(IEnumerable<float> x, IEnumerable<float> y)
    {
        if (x.Empty() || y.Empty())
            throw new ArgumentNullException("null-x");
        if (y.Empty())
            throw new ArgumentNullException("null-y");
        if (x.Count() != y.Count())
            throw new ArgumentException("diff-count");

        Points = x.Zip(y, (unx, uny) =>  new Point { x = unx, y = uny } );
    }

    private IEnumerable<Point> Points;
    /// <summary>
    /// original points count
    /// </summary>
    public int Count { get { return Points.Count(); } }

    /// <summary>
    /// group points with equal x value, average group y value
    /// </summary>
                                                    public IEnumerable<Point> UniquePoints
{
    get
    {
        var grp = Points.GroupBy((p) => { return p.x; });
        foreach (IGrouping<float,Point> g in grp)
        {
            float currentX = g.Key;
            float averageYforX = g.Select(p => p.y).Average();
            yield return new Point() { x = currentX, y = averageYforX };
        }
    }
}
    /// <summary>
    /// count of point set used for interpolation
    /// </summary>
    public int CountUnique { get { return UniquePoints.Count(); } }
    /// <summary>
    /// abscissae
    /// </summary>
    public IEnumerable<float> X { get { return UniquePoints.Select(p => p.x); } }
    /// <summary>
    /// ordinates
    /// </summary>
    public IEnumerable<float> Y { get { return UniquePoints.Select(p => p.y); } }
    /// <summary>
    /// x mean
    /// </summary>
    public float AverageX { get { return X.Average(); } }
    /// <summary>
    /// y mean
    /// </summary>
    public float AverageY { get { return Y.Average(); } }

    /// <summary>
    /// the computed slope, aka regression coefficient
    /// </summary>
    public float Slope { get { return ssxy / ssxx; } }

    // dotvector(x,y)-n*avgx*avgy
    float ssxy { get { return X.DotProduct(Y) - CountUnique * AverageX * AverageY; } }
    //sum squares x - n * square avgx
    float ssxx { get { return X.DotProduct(X) - CountUnique * AverageX * AverageX; } }

    /// <summary>
    /// computed  intercept
    /// </summary>
    public float Intercept { get { return AverageY - Slope * AverageX; } }

    public override string ToString()
    {
        return string.Format("slope:{0:F02} intercept:{1:F02}", Slope, Intercept);
    }
}

/// <summary>
/// any given point
/// </summary>
 public class Point 
 {
     public float x { get; set; }
     public float y { get; set; }
 }

/// <summary>
/// Linq extensions
/// </summary>
public static class Extensions 
{
    /// <summary>
    /// dot vector product
    /// </summary>
    /// <param name="a">input</param>
    /// <param name="b">input</param>
    /// <returns>dot product of 2 inputs</returns>
    public static float DotProduct(this IEnumerable<float> a, IEnumerable<float> b)
    {
        return a.Zip(b, (d1, d2) => d1 * d2).Sum();
    }
    /// <summary>
    /// is empty enumerable
    /// </summary>
    /// <typeparam name="T"></typeparam>
    /// <param name="a"></param>
    /// <returns></returns>
    public static bool Empty<T>(this IEnumerable<T> a)
    {
        return a == null || a.Count() == 0;
    }
} 
```

*像这样使用它：*

```
var llsi = new LinearLeastSquaresInterpolation(new Point[] 
    {
        new Point {x=1, y=1}, new Point {x=1, y=1.1f}, new Point {x=1, y=0.9f}, 
        new Point {x=2, y=2}, new Point {x=2, y=2.1f}, new Point {x=2, y=1.9f}, 
        new Point {x=3, y=3}, new Point {x=3, y=3.1f}, new Point {x=3, y=2.9f}, 
        new Point {x=10, y=10}, new Point {x=10, y=10.1f}, new Point {x=10, y=9.9f},
        new Point {x=100, y=100}, new Point{x=100, y=100.1f}, new Point {x=100, y=99.9f}
    }); 
```

*或者：*

```
var llsi = new LinearLeastSquaresInterpolation(
    new float[] { 1, 2, 3, 4, 5, 6, 7, 8, 9, 1, 2, 3, 4, 5, 6, 7, 8, 9 },
    new float[] { 1, 2, 3, 4, 5, 6, 7, 8, 9, 1, 2, 3, 4, 5, 6, 7, 8, 9 }); 
```

# c# - 在 ASP.net 中使用表单身份验证注销后可以访问页面

> ID：12838008
> 
> 赞同：0
> 
> 时间：2012-10-11T10:59:49.067
> 
> 标签：c#, asp.net, forms-authentication

我正在使用表单身份验证进行用户身份验证。使用登录凭据登录到`default.aspx`页面并从 default.aspx 页面注销并重定向到`login.aspx`页面后。之后，如果我尝试`default.aspx`通过直接从 IE 地址栏中选择来加载页面页面，我可以使用以前的凭据加载该页面。这是退出代码，

```
protected void Signout_Click(object sender, EventArgs e)
{
    FormsAuthentication.SignOut();
    Session.Clear();
    Response.Redirect("Logon.aspx");
} 
```

这是 web.config 中的身份验证部分

```
 <authentication mode="Forms">
        <forms loginUrl="logon.aspx" name=".ASPXFORMSAUTH" protection="All" path="/" slidingExpiration="true" timeout="60">
        </forms>
    </authentication>
    <authorization>
        <deny users="?"/>
    </authorization> 
```

这是过程，

```
1\. Login to default page using login credential
2\. sign out from default page
3\. select the default page directly from address bar. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T11:12:29.830

```
<location path="Default.aspx">
    <system.web>
        <authorization>
        <deny users ="?" />
       </authorization>
    </system.web>
</location> 
```

这会拒绝来自该页面的匿名用户 (Default.aspx)。您还可以将位置设置为整个文件夹。

这应该在 we.config 文件中完成。内。

希望这可以帮助

# c# - 将（非托管的、预编译的）可执行文件与我的输出捆绑在一起？

> ID：12838014
> 
> 赞同：0
> 
> 时间：2012-10-11T11:00:20.707
> 
> 标签：c#, visual-studio, dll, bundle

我正在编写一个使用命令行工具准备环境的库。我知道我可以将它们一起分发，但是库的功能是用户将四处移动的模块。我可以预见到很多支持问题是由于人们删除了他们不认识的工具，或者一开始就没有提取/复制它。

因此我的问题是：

**我可以在类库中捆绑一个（非托管的、预编译的）可执行文件吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T11:08:26.647

当然。您可以将其作为资源添加到您的程序集中，就像图像一样。当您需要使用它时，您可以将其写入磁盘上的临时文件夹并从那里执行它。

# python - Django 查询：如何按今天、时间和 30 分钟后过滤对象？

> ID：12838015
> 
> 赞同：3
> 
> 时间：2012-10-11T11:00:21.130
> 
> 标签：python, mysql, database, django

我在模型中有一个字段，例如：

```
class Sample(models.Model): 
    start = models.TimeField(verbose_name=_("start time")) 
    end = models.TimeField(verbose_name=_("end time")) 
```

现在，需要按“开始”和“结束”属性过滤我的对象，例如，它应该按今天、时间和 30 分钟内的时间过滤所有对象。

我试过了：

```
 models.Sample.objects.filter(start__gt=datetime.now(),
                             end__lt=datetime.now() + timedelta(minutes=30)) 
```

我知道，使用两个过滤器进行过滤是一个错误。我的代码到今天还没有过滤。例如，我今天需要在（星期二）从 12 点到 12:30 拥有所有对象

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T12:05:06.180

您在模型声明中使用了[TimeField](https://docs.djangoproject.com/en/dev/ref/models/fields/#timefield)。它只存储时间，没有日、月或年的数据。

> 时间，在 Python 中由 datetime.time 实例表示

所以不要使用`datetime.now()`使用`datetime.now().time()`，而不是`datetime.now() + timedelta(minutes=30)`使用`(datetime.now() + timedelta(minutes=30)).time()`

为了能够包括按日、月、年和时间进行过滤，请将模型中的 TimeField 替换为[DateTimeField](https://docs.djangoproject.com/en/dev/ref/models/fields/#datetimefield)。过滤使用`datetime.now()`和`timedelta(minutes=30)`将像您原来的问题一样工作。

# android - Android 编程：在 main.xml 中，如何更改所有组件的布局？

> ID：12838016
> 
> 赞同：0
> 
> 时间：2012-10-11T11:00:22.423
> 
> 标签：android, android-layout, styles

我是 Android 编程新手，所以我不知道它是如何工作的。例如，如果我所有的`Buttons`和`TextViews`都应该有属性`android:layout_marginTop="10dip"`，我怎么能比为每个单独的组件定义它更容易做到这一点，例如：

```
<Button
android:id="..."
...
android:layout_marginTop="10dip">

<TextView
android:id="..."
...
android:layout_marginTop="10dip">

<TextView
android:id="..."
...
android:layout_marginTop="10dip">

... 
```

我在哪里可以找到所有可以使用的不同标签的文档`main.xml`？谢谢您的帮助！

# maven-3 - 如何在 Maven 3 站点插件中使用 Confluence 标记语言？

> ID：12838017
> 
> 赞同：4
> 
> 时间：2012-10-11T11:00:24.667
> 
> 标签：maven-3, confluence, maven-site-plugin

我想使用[Confluence 标记语言使用](https://confluence.atlassian.com/display/CONF35/Confluence+Notation+Guide+Overview)[Maven 站点插件](http://maven.apache.org/plugins/maven-site-plugin/index.html)生成我的站点。

正如[doxia 文档](http://maven.apache.org/doxia/references/index.html)中所说，这似乎是可能的。

这是我的文件结构（根据[站点插件文档的](http://maven.apache.org/plugins/maven-site-plugin/examples/creating-content.html)要求）：

```
src
+- site
   +- confluence
      +- index.confluence 
```

但就这样，什么也没有产生。通过查看[常见问题解答](http://maven.apache.org/plugins/maven-site-plugin/faq.html#How_to_include_a_custom_Doxia_module_like_Twiki)，我尝试在插件构建中包含“doxia-module-confluence”：

```
<build>
    <plugins>
        <plugin>
            <artifactId>maven-site-plugin</artifactId>
            <version>3.1</version>
            <dependencies>
                <dependency>
                    <groupId>org.apache.maven.doxia</groupId>
                    <artifactId>doxia-module-confluence</artifactId>
                    <version>1.3</version>
                </dependency>
            </dependencies>
        </plugin>
    </plugins>
</build> 
```

但它仍然是一样的，我的索引页面没有呈现（我有默认的）。

有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-19T09:44:35.293

generated maven sites does not match very well with Confluence style.

If you need to update Confluence pages at each deploy or release I have to suggest a small opensource plugin I have done called [confluence-maven-plugin](https://github.com/sixro/confluence-maven-plugin).
In this way, you can use maven site for other purposes...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T14:07:40.673

实际上，文件结构+该依赖项的使用（`doxia-module-confluence`）是可以的。

问题是我首先生成没有依赖的页面（所以它没有使用我的汇合文件来生成索引），然后我添加了依赖。但是我没有`mvn clean`在第二个之前运行`mvn site`所以索引是直接从之前生成的 index.html 中使用的！

# java - NullPointerException 与 Hardwareacceleration 打开？

> ID：12838023
> 
> 赞同：11
> 
> 时间：2012-10-11T11:00:55.407
> 
> 标签：java, android, nullpointerexception

只需单击一个简单的按钮，我就从我的应用程序中收到了一些错误消息。单击后动画应该开始，但按钮变得更大。它在大多数设备上都能完美运行，但在某些设备上（我认为主要是 4.X 及更高版本）它会崩溃。

异常消息（堆栈跟踪）：

```
java.lang.NullPointerException
at android.view.GLES20RecordingCanvas.drawBitmap(GLES20RecordingCanvas.java:118)
at android.graphics.drawable.BitmapDrawable.draw(BitmapDrawable.java:400)
at android.view.View.draw(View.java:10999)
at android.view.ViewGroup.drawChild(ViewGroup.java:3186)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2788)
at android.view.ViewGroup.drawChild(ViewGroup.java:3184)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2788)
at android.view.ViewGroup.drawChild(ViewGroup.java:3184)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2788)
at android.view.ViewGroup.drawChild(ViewGroup.java:3184)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2788)
at android.view.View.draw(View.java:11017)
at android.view.View.getDisplayList(View.java:10444)
at android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:2896)
at android.view.View.getDisplayList(View.java:10407)
at android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:2896)
at android.view.View.getDisplayList(View.java:10407)
at android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:2896)
at android.view.View.getDisplayList(View.java:10407)
at android.view.HardwareRenderer$GlRenderer.draw(HardwareRenderer.java:883)
at android.view.ViewRootImpl.draw(ViewRootImpl.java:2089)
at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1781)
at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2666)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:156)
at android.app.ActivityThread.main(ActivityThread.java:4977)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
at dalvik.system.NativeStart.main(Native Method) 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-08T17:14:05.363

这两天我一直在寻找这个问题的答案。它记录在 ICS 中，但我在我的一部测试手机中注意到它，它是运行 4.1.2 的三星 Galaxy S3。大多数人建议关闭硬件加速；我不想这样做，因为硬件加速使我的动画非常流畅。所以我发现如果我重写 draw() 尝试捕获空指针异常，硬件加速功能（大部分时间）都可以工作，并且足以让你永远不会注意到它们没有工作或抛出异常。

```
@Override
public void draw(Canvas canvas) {
    try{
        super.draw(canvas);
    }catch(java.lang.NullPointerException e){
        //you can log if you want to you can leave your friends behind
        //Log.e("mytag","MyCustomView::draw():"+e);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-15T13:40:16.767

我已经看到了同样的错误，这很奇怪，但只发生在非常特定的场景中。

我会在这里描述它以防它帮助任何人。

当我在打开硬件加速的 ICS 设备上运行一个视图（基本上缩小到屏幕中间）的比例动画时，它会出现。

*   在 ICS 上，硬件加速关闭，它不会崩溃。
*   在 ICS、硬件加速、其他动画类型（增长、翻译）上它不会崩溃。
*   在 Jelly Bean (4.1, 4.3)（其他因素的任何组合）上，它不会崩溃。

我想我会为那个视图禁用硬件加速并继续前进，这样我的应用程序的其余部分就会顺利运行。

希望这可以帮助。

# salesforce - 查看公寓的空房情况

> ID：12838029
> 
> 赞同：0
> 
> 时间：2012-10-11T11:01:12.980
> 
> 标签：salesforce, apex-code

我有以下表格

1.  床（床号，价格，is_active，状态）

2.  房间（房间号，价格，is_active，状态，床号）

3.  公寓（公寓 ID、价格、is_active、状态、公寓 ID）

4.  Booking(booking id, start date, end date, apartment id, room id, bed id)

完成公寓预订后，公寓中的所有房间都应该可用。公寓房间内的所有床位都应该可用。

完成房间预订后，该房间的所有床位都应该可用。

我必须这样做才能批量更新预订记录。在 for 循环中检查可用性是不可行的。如下所示

for(预订 bookingObj : AllBookings){

checkAvailability（预订ID，床，房间，公寓）

}

代码要写在触发器中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T19:19:27.687

我曾经像你一样问人们如何编写代码，但这是一种习惯，必须改变。试着依靠自己，写一些代码；然后问别人。从伪代码开始，查看示例 - 从长远来看，这可能会对您有所帮助。

根据问题，请在下面找到一些代码。我没有给你我希望你学习的整个代码！

```
trigger CheckBooking on Booking__c (after update){
    for(Booking__c booking : trigger.new){
    //Check if the booking is updated   
    If(Updated){
        //Grab the booking Id into a string var, example below:
        String bookingId = booking.Id;
        //Grab the room Id into a string var
        //Grab the Apartment Id into a string var
        //Grab the bed Id into a string var
    }
  // Do SOQL to check if the room, Apartment, bed are available 
   /*SOQL goes here*/

   //Check to make sure the availability 
    if(available){
        //do your logic
    }
    else{
        //do your logic
    }
  }        
} 
```

注意：在批量大小为 1 时执行此更新，以便为每个记录执行此触发器，即事务大小为 1。

如果您想使交易规模更大，请执行以下操作：
1\. 将房间、公寓、床位 ID 添加到列表中，然后使用 SOQL 检查它们是否可用

这两个都应该可以正常工作。试试看。干杯!

# ajax - Selenium 中的 Ajax 弹出窗口

> ID：12838030
> 
> 赞同：3
> 
> 时间：2012-10-11T11:01:22.170
> 
> 标签：ajax, testing, selenium, selenium-ide

无论如何要使用捕获/记录灯箱（Ajax）

> 硒 IDE

?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T15:46:47.107

不确定 Selenium IDE 是否以您期望的形式捕获/记录 Light Box (Ajax)。看![下面的屏幕](../Images/01b94decd83061aa19f86db739f03a92.png)

Selenium IDE 能够捕获导致 LightBox 出现的点击的事实。但是很难注册从服务器获取所有 AJAX 所需的时间。作为 QA selenium 自动化（在 java 上编写），我更喜欢另一种方法。您可以使用 webDriverWait 条件：

```
 WebDriverWait wait = new WebDriverWait(yourWebDriver, 5);
    wait.until(ExpectedConditions.elementToBeClickable(By.xpath("//xpath_to_element"))); 
```

[如此处](https://stackoverflow.com/questions/9878478/selenium-webdriver-determine-if-element-is-clickable-i-e-not-obscured-by-doj)所述

或者您可以调用`fluentWait`机制：

```
public WebElement fluentWait(final By locator){
        Wait<WebDriver> wait = new FluentWait<WebDriver>(driver)
                .withTimeout(30, TimeUnit.SECONDS)
                .pollingEvery(5, TimeUnit.SECONDS)
                .ignoring(NoSuchElementException.class);

        WebElement foo = wait.until(
new Function<WebDriver, WebElement>() {
            public WebElement apply(WebDriver driver) {
                        return driver.findElement(locator);
                }
                }
);
                           return  foo;              }     ; 
```

这种流畅的等待方法返回您找到的可以操作的 webElement。 **用法：**

```
String xPathElement ="...blablab.....";
WebElement found  = fluentWait(By.xpath(xPathElement));
found.click();
//found.getText().trim(): 
```

希望这对你有帮助

# c# - C# 级联赋值

> ID：12838031
> 
> 赞同：1
> 
> 时间：2012-10-11T11:01:22.687
> 
> 标签：c#, performance-testing, assignment-operator

当我们分配这样的值时，性能是否会下降？

```
Dropdown1.Enable = dropdown2.Enable = dropdown3.Enable = false; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T11:22:23.413

答案是没有影响——它相当于三个赋值语句。

甚至没有`get`调用任何操作，如下所示：

控制台应用项目：

```
using System;
using System.Diagnostics;

namespace ConsoleApplication5
{
    public class X

    {
        private int _a;
        private int _b;

        public int A
        {
            get
            {
                Console.WriteLine("get A");
                return _a + 1;
            }
            set
            {
                Console.WriteLine("set A");
                _a = value;
            }
        }

        public int B
        {
            get
            {
                Console.WriteLine("get B");
                return _b + 2;
            }
            set
            {
                Console.WriteLine("set B");
                _b = value;
            }
        }
    }

    class Program
    {
        static void Main(string[] args)
        {
            var x = new X();

            Console.WriteLine("Assign");
            int y = x.B = x.A = 125;

            Console.WriteLine("Read");
            Console.WriteLine("y " + y + " x.B " + x.B + " x.A " + x.A);

            Console.ReadLine();
        }
    }
} 
```

生成：

```
Assign
set A
set B
Read
get B
get A
y 125 x.B 127 x.A 126 
```

请注意，在分配阶段，不会调用“get”，即使 A 和 B 的 getter 返回的值与设置在它们上的值不同，最终分配给`y`的值是表达式的 RHS 上的源值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T11:19:27.173

我可能从其他两个答案中误解了一些东西，但我认为没有`getters`人被解雇。在所有三种情况下，为属性触发的是*setter 。*此外，我很确定 IL 只是将`false`值推入堆栈三次，并为每次触发一次设置器。

对于以下课程：

```
public class Test
{
    public bool Prop { get; set; }
} 
```

对于`t1.Prop = t2.Prop = t3.Prop = false;`IL 是：

```
IL_0013:  ldloc.0     //t1
IL_0014:  ldloc.1     //t2
IL_0015:  ldloc.2     //t2
IL_0016:  ldc.i4.0    //false
IL_0017:  dup         //dup the false on the stack
IL_0018:  stloc.3     
IL_0019:  callvirt    UserQuery+Test.set_Prop //set value
IL_001E:  nop         
IL_001F:  ldloc.3     
IL_0020:  dup         //dup the false on the stack
IL_0021:  stloc.3     
IL_0022:  callvirt    UserQuery+Test.set_Prop //set value
IL_0027:  nop         
IL_0028:  ldloc.3     
IL_0029:  callvirt    UserQuery+Test.set_Prop //set value 
```

为了：

```
t1.Prop = false;
t2.Prop = false;
t3.Prop = false; 
```

IL是：

```
IL_0012:  stloc.2     
IL_0013:  ldloc.0     
IL_0014:  ldc.i4.0    //false  
IL_0015:  callvirt    UserQuery+Test.set_Prop //set value
IL_001A:  nop         
IL_001B:  ldloc.1     
IL_001C:  ldc.i4.0    //false
IL_001D:  callvirt    UserQuery+Test.set_Prop //set value
IL_0022:  nop         
IL_0023:  ldloc.2     
IL_0024:  ldc.i4.0    //false 
IL_0025:  callvirt    UserQuery+Test.set_Prop //set value 
```

所以 IL 非常接近，真正唯一的区别是命中`ldc.i4.0`3 次，或者命中一次并在堆栈上复制两次。性能无关紧要。但是，如果获得该`false`值是一项不平凡的操作，则将其放在三行上会花费更长的时间，但是您可以轻松地编写：

```
bool value = SomeLongOperation();
t1.Prop = value;
t2.Prop = value;
t3.Prop = value; 
```

因此，尽一切可能对公司内的可读性和/或您的标准最有利。

编辑：实际上，如果编译器/JIT 将单独的行条目优化为基本上第一种情况（或更快的情况）或其他一些优化状态，我不会感到惊讶。真的，唯一需要关心的是最后一个代码示例；如果你需要做`SomeLongOperation()`才能获得价值，只做一次。之后，做任何可读的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T11:06:16.273

你通常会这样做：

```
variable1 = varaible2 = variable3 = 123 
```

但是由于该`Enable`属性是一个吸气剂，所以这是不可能的。在内部，getter 如下所示：

```
public bool Enabled
{
    get
    {
        return something;
    }
    set
    {
        something = value;
    }
} 
```

# django - 如何一起使用 Django、sorl-thumbnail、memcached 和 S3？

> ID：12838034
> 
> 赞同：7
> 
> 时间：2012-10-11T11:01:33.550
> 
> 标签：django, amazon-s3, memcached, sorl-thumbnail

我有一个项目，我需要开始创建用户上传图像的动态调整大小的缩略图，以前我一直在生成一些特定大小的缩略图。我有一个现有的模型，它代表一个看起来像这样的图像：

```
class Image(models.Model):
  original = models.URLField()
  small = models.URLField()
  medium = models.URLField()
  large = models.URLField() 
```

其中每一个都填写了指向 S3 上相应图像的 URL。在上传时，所有版本都被创建（实际上是在不久之后，通过计划任务），存储在 S3 中，然后在模型上设置。展望未来，我们的设计需要为每个缩略图提供许多不同的大小，因此将它们全部存储在数据库中是不切实际的。我想`original`在模板中保留并即时完成其余的工作。

所以这就是我来到[sorl-thumbnail](https://github.com/sorl/sorl-thumbnail)的地方。它似乎打算做我想做的事，但我有点迷失它应该如何工作（目前还没有）。作为一项测试，我制作了一个基本视图/模板，其中列出了一些图像并尝试对其进行缩略图，就像教程一样：

```
{% for img in image_set %}
  {% thumbnail img.original "180x180" crop="center" format="PNG" as im %}
  <img src="{{ im.url }}" width="{{ im.width }}" height="{{ im.height }}">
  {% endthumbnail %}
{% endfor %} 
```

最终会为文件生成一个 URL，例如`cache/84/8f/848fb078f2e8d35aecd92150c6fa6843.png`（404s）。我不确定我是否了解该文件应该存储在哪里。我假设它正在拉入 S3 文件，然后在*某处*创建缩略图，但我不清楚那在哪里，以及我应该从哪里提供它。这一切现在都在本地开发服务器上，使用 memcached（我可以看到正在设置缓存条目）。PIL 安装在我的环境中，支持 jpeg/png。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T21:16:19.227

您可能想查看[Django-](http://django-storages.readthedocs.org/en/latest/index.html) storages，它是一个不错的[AWS S3](http://django-storages.readthedocs.org/en/latest/backends/amazon-S3.html)，可以为您解决问题。除此之外，还安装[boto](http://pypi.python.org/pypi/boto)，因为 django-storage 依赖于 boto。

然后您必须将以下内容添加到您的 settings.py

```
import os

AWS_ACCESS_KEY_ID = os.environ.get('AWS_ACCESS_KEY_ID')
AWS_SECRET_ACCESS_KEY = os.environ.get('AWS_SECRET_ACCESS_KEY')
AWS_STORAGE_BUCKET_NAME = '<YOUR BUCKET NAME>'

STATICFILES_STORAGE = 'storages.backends.s3boto.S3BotoStorage'
DEFAULT_FILE_STORAGE = 'storages.backends.s3boto.S3BotoStorage'

STATIC_URL = 'http://' + AWS_STORAGE_BUCKET_NAME + '.s3.amazonaws.com/'
ADMIN_MEDIA_PREFIX = STATIC_URL + 'admin/' 
```

然后您的缓存将存储在 AWS S3 本身上。

我希望它有帮助

注意：出于安全原因，最好将您的 AWS_ACCESS_KEY_ID 和 AWS_SECRET_ACCESS_KEY 添加为环境变量，而不是直接将它们写在 setting.py 中。

# zend-framework - 从 Magento 发送电子邮件失败

> ID：12838037
> 
> 赞同：1
> 
> 时间：2012-10-11T11:01:36.710
> 
> 标签：zend-framework, email, magento

我正在尝试从 magento 中的自定义模块发送电子邮件，但是无法发送。我需要包括任何东西还是应该对我的主机进行一些配置？在这里你可以看到我的代码：

```
 $mail = new Zend_Mail();  
                $mail->setBodyText($mailbody);
                $mail->setFrom('admin@gmail.com', 'admin');
                $mail->addTo('email@gmail.com', 'client');
                $mail->setSubject('Error report');

                try {
                    $mail->send();
                    Mage::getSingleton('core/session')->addSuccess('Your request has been sent');
                }
                catch (Exception $e) {
                    Mage::getSingleton('core/session')->addError('Unable to send.');
                    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T17:45:41.590

您必须在`php.ini` What is your provider 中配置您的 smtp？可以找到 smtp 服务器的 url，并将其放入您的`php.ini`文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T11:17:57.203

最好使用 Magento 的模型来发送电子邮件。这样您就知道它正在正确发送，并在失败时得到有用的错误

最简单的方法：

```
$email = Mage::getModel('core/email_template');
$email->setSenderEmail('sender@email.com');
$email->setSenderName('name');
$email->setTemplateSubject('Subject');
$email->setTemplateText('emailbody');
$email->send('receiver@mail.com', 'receiver name'); 
```

请记住，您的主机不支持发送邮件，或者您的提供商阻止了端口 25。这将导致您的 exception.log 中出现一条消息

如果您想查看最终电子邮件的外观，请打印`$email->getProcessedTemplate()`到您的屏幕上

# iphone - 使用 Parse 移动平台将 Facebook 集成到 iOS 中

> ID：12838039
> 
> 赞同：0
> 
> 时间：2012-10-11T11:01:38.417
> 
> 标签：iphone, objective-c, ios, xcode

我正在尝试[使用 Parse o 与 facebook 集成](https://parse.com/docs/ios_guide#fbusers)来运行一个简单的 iPhone 应用程序。

[您可以在此处](https://www.parse.com/tutorials/integrating-facebook-in-ios)轻松下载项目

问题是当我登录 facebook 时，我转到此页面：

![在此处输入图像描述](../Images/691b37e4c4f99f8f87bdf6693249c13d.png)

当我单击“确定”按钮时，我收到以下错误消息：

![在此处输入图像描述](../Images/3ebf7e6a9474e48d7a718ad05f2e51eb.png)

所以它不会导航到下一个 ViewController (UserDetailsViewController)。

你能帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T11:03:02.063

您应该将应用程序的应用程序 URL 方案添加到`info.plst`

由于你没有添加这个，iOS 不知道如何打开你的应用程序。

将以下内容添加到您的应用程序中`info.plist`：

```
<key>CFBundleURLTypes</key>
<array>
    <dict>
        <key>CFBundleURLSchemes</key>
        <array>
            <string>fb<YOUR APPS FACEBOOK ID></string>
            <string><YOU APPS NAME></string>
        </array>
    </dict>
</array> 
```

并用你的应用程序 facebook ID 替换 fb，它应该看起来像`fb1231654354`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T05:09:00.453

我认为您应该避免在委托文件中的 app_id 之前编写的 fb .. fb 仅在 urlScheme 中需要

# c - 处理错误文件描述符错误的方法

> ID：12838041
> 
> 赞同：2
> 
> 时间：2012-10-11T11:01:40.260
> 
> 标签：c, sockets, recv

**场景：**
客户端和服务器之间建立连接。客户端连接关闭，客户端被销毁。在服务器端，检测到一些已关闭的连接，但有些没有。因此存在类似于悬空指针的套接字描述符。在这些上选择会返回 Bad file descriptor 错误，但无法找到无效的 fd 。

**问题：** 在上述情况下，客户端连接不存在我应该如何处理这些`BAD FILE DESCRIPTORs`。我可以调用`recv()`这些吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T11:45:31.590

的签名[`select()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/select.html)是：

```
int select(int nfds, fd_set *restrict readfds,
           fd_set *restrict writefds, fd_set *restrict errorfds,
           struct timeval *restrict timeout); 
```

该集合是否没有`errorfds`为您提供生成错误条件的描述符列表，例如`EBADF`？

您可以调用`recv()`或使用带有错误文件描述符的文件描述符的任何其他函数；您可能会`EBADF`从调用的函数中返回错误（除非它在检测之前检测到不同的错误条件`EBADF`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T13:55:59.633

我相信你搞砸了不同的情况。

如果连接在客户端关闭，并且您在服务器端套接字上调用 select()，FD_READ 将被触发并且 recv() 将返回零，那么您可以在服务器端关闭套接字。

如果连接丢失并且服务器没有收到 FIN 信号，则需要在客户端和服务器之间有心跳以及每个服务器端套接字上的计时器来检测 TCP 半打开情况。

仅当您在已关闭的套接字上调用 API 时才会发生“错误文件描述符”错误。

# java - 检测jframe的拖拽

> ID：12838044
> 
> 赞同：3
> 
> 时间：2012-10-11T11:01:47.120
> 
> 标签：java, macos, swing, jframe, componentlistener

有没有办法在拖动时检测 JFrame 的位置？问题是在 MAX OS X 上，当您停止移动鼠标时，窗口的位置会更新。我看到了计算新位置和设置窗口手册位置的提示。但因此我必须知道我开始拖动的位置。为了更清楚一点，JFrame 用于捕获屏幕，但是当你移动它时它不会更新，因为它仍然认为它在旧位置。当您停止移动拖动（但您仍然可以按住鼠标按钮）时，它会更新。

```
import java.awt.event.ComponentListener;
import java.awt.Component;
import java.awt.event.ComponentEvent;
import javax.swing.JFrame;

void setup() {
  frame.addComponentListener(new ComponentListener() 
  {  
    public void componentMoved(ComponentEvent evt) {
      Component c = (Component)evt.getSource();
      println("moved "+frameCount);
    }

    public void componentShown(ComponentEvent evt) {}

    public void componentResized(ComponentEvent evt) {}

    public void componentHidden(ComponentEvent evt) {}
  }
  );
}

void draw() {
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T12:38:41.570

如果您提到的更新仅在窗口停止移动时发生，并且如果知道您开始拖动的位置可以真正解决问题，那么我看到一个选项，您将最后一个位置存储在某个变量中并更新它每个当您检测到移动时。

所以在你的 JFrame 类中声明一个私有变量：

点原点位置=新点（0,0）；

在您的侦听器方法中，您可以：

```
 public void componentMoved(ComponentEvent evt) {
          Component c = (Component)evt.getSource();
          Point currentLocationOnScreen=c.getLocationOnScreen();

 // do your requirements here with the variables currentLocationOnScreen and originLocation

          // update the originLocation variable for next occurrences of this method 
          originLocation=currentLocationOnScreen; 
    } 
```

# javascript - 单击 div 外部的按钮时更改 div 内容，但在单击之前将其中一个内容设置为可见

> ID：12838045
> 
> 赞同：2
> 
> 时间：2012-10-11T11:01:47.577
> 
> 标签：javascript, jquery, css, html

大家好，非常感谢您阅读这篇文章。

我正在跟进我之前的问题：如何通过单击 div 外部的按钮来更改 div 的内容。现在我可以通过单击按钮成功更改内容。

但是，在我单击任何内容之前，要显示内容的 div 是完全空白的。我不希望它是空白的。相反，我希望它在单击任何内容之前显示一些内容。事实上，我希望它显示按钮一的内容。

我应该如何做到这一点？

这是我的工作代码：

```
<head>    
<link href="textContainer.css" rel="stylesheet" type="text/css" />
<script type="text/javascript"         src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>

<style type="text/css">   <------I put these in CSS style sheet.
.textWord_about{
position: absolute;
font-family: Calibri;
font-size: 14px;
top: 22px;
left: 29px;
width: 650px;
height: 390px;
text-align: left;
background-image: url(images/slider_bkgd.png);
background-repeat: repeat;
}
.textContainer_about {
position: absolute;
top: 870px;
left: 234px;
width: 727px;
height: 452px;
z-index: 20;
color: rgb(4,4,4);
display: block;
background-image: url(images/slider_bkgd.png);
background-repeat: repeat;
overflow: visible;
}
.links {
font-family: Calibri;
font-size: 14px;
}
</style>
</head>

<body>
<div id="menu_about">
<a class="link" href="#about" data-link="first">&nbsp;&nbsp; Why We Exist</a> &#8226; <a     class="link" href="#about" data-link="second">Who We Are</a> &#8226;
<a class="link" href="#about" data-link="third">What We Do</a> &#8226; 
<a class="link" href="#about" data-link="fourth">How We Think</a> &#8226; 
<a class="link" href="#about" data-link="fifth">Where We Are Going</a>
</div>
<div id="pages_about" class="textContainer_about">
<div class="textWord_about" data-link="first">
<p>ffffffffffffffffffffffffffff</p>
</div>
<div class="textWord_about" data-link="second">
  <p>ffffffffffffffffffffffffffff</p>
</div>
<div class="textWord_about" data-link="third">
  <p>ffffffffffffffffffffffffffff</p>
</div>
<div class="textWord_about" data-link="fourth">
  <p>ffffffffffffffffffffffffffff</p>
  <p>ffffffffffffffffffffffffffff</p>
  <p>ffffffffffffffffffffffffffff</p>
  <p>ffffffffffffffffffffffffffff</p>
  <p>ffffffffffffffffffffffffffff</p>
</div>
<div class="textWord_about" data-link="fifth">
  <p>ffffffffffffffffffffffffffff</p>
</div>
</div>

<script type="text/javascript">
$('.textword_about').hide();

$('.link').click(function() {
    $('.textword_about').hide();
    $('.textword_about[data-link=' + $(this).data('link') + ']').fadeIn({
        width: '200px'
    }, 300);
});​
</script> 
```

非常感谢您的帮助！谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T11:04:11.277

您正在隐藏页面加载时的所有 div`$('.textword_about').hide();`

您需要显示第一个，将该行替换为以下内容

```
$('.textword_about').hide();
$('.textword_about:first-child').show(); 
```

# apache-flex - 读取 Byte 数组时 OutOfMemory 有 1 GB 数据

> ID：12838050
> 
> 赞同：1
> 
> 时间：2012-10-11T11:01:55.620
> 
> 标签：apache-flex, out-of-memory

当我将 ByteArray 读取到 IDataInput 时，IDataInput 中会出现大约 1 GB 字节的内存不足问题。因此，如果我阅读 ByteArray 它会显示问题，请参阅下面的 My Code data 作为具有 1 gb 文件的参数

```
 ByteArray:buf = new ByteArray();
  data.readBytes(buf); 
```

期待尽快回复。提前致谢

# javascript - 重新加载 $(document).ready(); 加载 AJAX 时的功能

> ID：12838051
> 
> 赞同：4
> 
> 时间：2012-10-11T11:02:02.240
> 
> 标签：javascript, ajax, jquery

我目前正在设计一个应用程序，在该应用程序中，除了一个 CSS 文件和 JS 文件之外，我无法访问标记或脚本，因此我可以添加自己的样式和功能。我知道这不是一个理想的设置，但相信我，这不是我的选择。哦，这个网站上的所有内容都是通过 AJAX 请求生成的，很好。

无论如何，问题是我有很多需要运行的 Javascript，`$(document).ready();`但是由于页面从未真正重新加载（由于 AJAX），因此没有任何代码被执行。

`$(document).ready();`有没有一种方法可以在每次 AJAX 调用完成时将所有函数设置为运行？

我在下面包含了内置的 AJAX 调用（我无法编辑）。

```
$.ajax({
  type: "POST",
  dataType: "html",
  url: url1,
  data: pars,
  success: function(data)
  {
    $('#thisContent').html(data);
    loadMenu(urlToLoad);
  } 
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T11:05:27.630

是的，您可以为[`.ajaxComplete()`](http://api.jquery.com/ajaxComplete/). 在每次 ajax 调用完成后调用它（成功或出错）。

进一步阅读：[Ajax 事件](http://docs.jquery.com/Ajax_Events)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T11:14:58.657

如果您想要`$(document).ready([handler])`再次调用事件的处理程序，您可以使用命名函数作为处理程序，并引用：

```
$(document).ready(function readyHandler()
{
});
//and:
$.ajax({....,success:readyHandler}); 
```

但是，就个人而言，我建议您考虑一下。例如，如果`$.ajax`在`readyHandler`函数中进行调用，您将创建死锁。您也很可能一遍又一遍地进行相同的绑定。我不知道你想要达到什么目标，但我很确定有更好的方法来做到这一点。（如果我确实正确理解了您的问题）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T11:07:01.467

我认为[这](http://api.jquery.com/ajaxComplete/)对你有用。

# visual-studio-2012 - 如何在 Visual Studio 中显示 TypeScript 类大纲

> ID：12838054
> 
> 赞同：6
> 
> 时间：2012-10-11T11:02:16.763
> 
> 标签：visual-studio-2012, typescript

在编写 TypeScript 类时，Visual Studio (Pro 2012) 会在左上角给我一个类大纲下拉菜单。您可以在屏幕截图中看到它。

![在此处输入图像描述](../Images/6657985ee973dcf19a9df27cf03a7790.png)

有什么办法可以一直显示吗？就像 FlashDevelop 中的代码大纲功能一样。即停靠在 VS 中的一个窗口，因此我可以轻松导航到这些方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T11:55:16.970

您可以使用工具栏菜单打开类视图：

```
View > Class View 
```

然后，您可以查看类的内容，类似于该下拉菜单，但可以停靠在您喜欢的任何位置。

不过，这目前不会向您显示 TypeScript 文件的内容——它们没有显示在类的顶部列表中。

![类视图 - 带有方法](../Images/12e2e86a12baa86b216c30b83a7baeae.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-25T15:51:48.760

虽然不是您希望的答案，但一种解决方法是在 WebStorm 中开发您的打字稿文件，并将 WebStorm 的“远程主机”设置为您的 Visual Studio 项目的 IIS 文件夹。大多数情况下，我发现每次测试时都必须将 WebStorm 更改推送到 Visual Studio 项目，但“纯 JavaScript”单元测试可以纯粹在 webStorm 端完成。您可能还想使用 WebStorm 的 localhost 服务器/端口进行早期 qunit 测试，可能使用模拟数据。

# jquery - 使用 jQuery 将 ul 列表项拆分为具有偶数和奇数索引的两列

> ID：12838071
> 
> 赞同：1
> 
> 时间：2012-10-11T11:03:52.673
> 
> 标签：jquery, html-lists

这是原文：

`<ul>
<li>one</l1>
<li>two</li>
<li>three</li>
<li>four</li>
</ul>` 

我想把它变成：

`<ul>
<li>one</l1>
<li>three</li>
</ul>
<ul>
<li>two</li>
<li>four</li>
</ul>` 

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T11:20:22.170

一种可能的解决方案：

```
$("ul li:odd")​​​​​​​.appendTo($("<ul>").insertAfter("ul"));​​​ 
```

相同解决方案的另一个变体：

```
$("<ul>").insertAfter("ul").append($("ul li:odd"));​ 
```

**演示：http:** [//jsfiddle.net/4FyAa/](http://jsfiddle.net/4FyAa/)

# css - 为什么我的图像没有调整大小？（响应式设计）

> ID：12838073
> 
> 赞同：0
> 
> 时间：2012-10-11T11:04:00.440
> 
> 标签：css, responsive-design

因此，在 CSS 重置的顶部附近，我添加了一个附加规则，将所有图像元素设置为最大宽度：100%。但是，我的图像没有正确调整大小，尤其是图库。它应该留在单杠中，但是我一生都无法让它工作，我也不知道为什么。我特别不熟悉响应式设计。买了一本书，还是看不懂。我究竟做错了什么？

谢谢！

[http://lrroberts0122.github.com/DWS/lab5/index.html](http://lrroberts0122.github.com/DWS/lab5/index.html)

[http://lrroberts0122.github.com/DWS/lab5/css/main.css](http://lrroberts0122.github.com/DWS/lab5/css/main.css)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T11:23:07.650

我看不到您指定图像宽度的任何地方。通过添加`img { width: 100%; }`到您的 CSS 中，它对我有用。

你也知道你已经包含了你的 CSS 两次

# asp.net - Web 服务的访问被拒绝

> ID：12838074
> 
> 赞同：0
> 
> 时间：2012-10-11T11:04:05.460
> 
> 标签：asp.net, web-services, windows-server-2008

我的 IIS 服务器上有一个网站，并且在同一个网站上安装了一个 Web 服务。我的问题很简单。我正在尝试将文件从 Web 服务移动到一个文件夹到位于网站中的另一个文件夹。但我收到一条消息“拒绝访问特定文件夹”

任何帮助请..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T11:07:31.730

运行 IIS 的帐户可能是该`IIS_IUSRS`组的成员。您可以授予该组对该文件夹的访问权限。

# sql-server-2008-r2 - SSRS 日期时间格式 - 设置为美国而不是英国

> ID：12838075
> 
> 赞同：0
> 
> 时间：2012-10-11T11:04:06.217
> 
> 标签：sql-server-2008-r2, reporting-services, reportingservices-2005, bids

我目前有一个在 BIDS 2005 中创建的报告服务报告，数据库是 SQL Server 2008 R2。我的第一个问题是当我在 BIDS 中并去预览以测试报告时，它只处理我们格式 mm/dd/yyyy 的日期但是如果我将报告部署到报告服务器并从那里运行它很好.

我已将报告属性更改为语言英语（英国），在 BIDS/VS 中，我还能做些什么来让我的报告以英语日期格式 dd/mm/yyyy 预览？

我的第二个也是最后一个问题是，当我尝试为此报告创建计划时，当我使用数据驱动选项以 yyyy-mm-dd 的标准 SQL 格式传入 2 个日期参数（日期时间）时，它也会出错。这也仅在这些日期为美国格式时才运行，有什么想法/提示吗？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T13:42:44.533

好的，过了一会儿，我终于找到了解决我的数据驱动订阅 (DDS) 日期问题的方法。显然对于 DDS，使用的是服务器内的设置而不是报告设置，所以我使用 SQL Server Management Studio 检查了数据库设置，然后右键单击数据库然后选择属性，然后我检查了语言设置，嘿，将其设置为英语（美国）我解决这个问题的方法是将我的日期转换为不依赖于语言的格式 -

SELECT convert(varchar, getdate(), 121) – yyyy-mm-dd hh:mm:ss.mmm

这有效并修复了我的 DDS :)

# eclipse - 在 RESTful 项目中找不到文件的 HTML 资源

> ID：12838076
> 
> 赞同：1
> 
> 时间：2012-10-11T11:04:10.003
> 
> 标签：eclipse, rest, tomcat6

我一直在尝试按照[此处](http://www.vogella.com/articles/REST/article.html)的教程来实现 RESTful Web 服务。

我一直在网上搜索我遇到的问题，但没有任何帮助。在实现 CRUD Web 服务时，本文包含一个 HTML 文件。我已经尝试将它放在 WebContent 和 WebContent/WEB-INF 中，但我无法让它工作。我也尝试过应用[此处](http://www.javahotchocolate.com/tutorials/restful.html)列出的解决方案，但 HTML 文件仍然无效。

其他功能确实有效，只是我遇到了问题。我尝试使用：

```
localhost:8080/de.vogella.jersey.todo/rest/create_todo.html
localhost:8080/de.vogella.jersey.todo/create_todo.html
localhost:8080/de.vogella.jersey.todo/WEB-INF/create_todo.html 
```

我得到的错误是Tomcat找不到资源。

没有任何效果，我将非常感谢我能得到的任何帮助。:)

# c++ - 裸函数中的动态大小数组

> ID：12838078
> 
> 赞同：1
> 
> 时间：2012-10-11T11:04:22.923
> 
> 标签：c++, windows, dll, code-injection

好的，这就是交易，我将一个 DLL 注入目标进程并让它读取它的一些寄存器。问题是，每当调用我的函数时，我必须抓取的内容的大小都会不断变化。

由于我不能使用向量，如果我要存储一个我事先不知道大小的字节数组，我会怎么做？

到目前为止，这是我的代码，显然由于 C3068 而无法编译。

```
__declspec(naked) void _LocalHandleMessage()
{
    __asm {
        // Here i obviously have to store the data i'm sending to HandlePaquet
        sub esp, __LOCAL_SIZE
        pushad
        pushfd
    }

    {
        DWORD opcode;
        DWORD size;
        std::vector<BYTE> packetContent;
        HandlePaquet(opcode, size, packetContent, true);
    }

    __asm {
        popfd
        popad
        add esp, __LOCAL_SIZE
        retn
    }
} 
```

另外，我希望能够将类成员方法的地址注入目标进程，但似乎不可能，除非我没有足够的google。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T11:20:02.983

*   要存储数据，您有非常简单的方法 - **VirtualAlloc**。
*   或者您可以尝试在您的 dll 中使用静态向量变量。

关于注入地址-如果您正在谈论挂钩-是的，您可以，您需要修改[虚拟方法表](http://en.wikipedia.org/wiki/Virtual_method_table)。您可以在任何开源游戏破解中找到示例。

如果成员方法不是虚拟方法并且在 vtable 中不存在，则需要更改***调用***操作码，或者只需将***jmp xxxxxxxx***放在方法的开头。看[这里](http://www.codeproject.com/Articles/44326/MinHook-The-Minimalistic-x86-x64-API-Hooking-Libra)了解更多详情

# magento - 在magento中按顺序显示图像

> ID：12838082
> 
> 赞同：2
> 
> 时间：2012-10-11T11:04:47.633
> 
> 标签：magento, magento-1.7

我已在结帐成功页面上添加评论以订购。注释是图像文件的路径。我想在那里显示图像而不是它的路径。

我添加了以下代码来添加评论，

```
$order->setState('processing', 'invoiced', $img_path); 
```

如果我发送图像的 html 并且显示图像而不是路径，是否有可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:43:15.200

创建一个扩展 app/design/adminhtml/default/default/template/sales/order/view/history.phtml 的自定义模块

将第 71 行从

```
 <?php if ($_item->getComment()): ?>
            <br/><?php echo $this->escapeHtml($_item->getComment(), array('b','br','strong','i','u')) ?>
        <?php endif; ?> 
```

至

```
 <?php if ($_item->getComment()): ?>
            <br/><?php echo $this->escapeHtml($_item->getComment(), array('b','br','strong','i','u', 'img')) ?>
        <?php endif; ?> 
```

（如果您有任何问题，请检查 sales_flat_order_status_history db 中 'comment' 的值，看看它是否已经 escapeHtml）

# jquery - 无法通过 jQuery 禁用文本字段的 onclick/onblur 值

> ID：12838084
> 
> 赞同：7
> 
> 时间：2012-10-11T11:04:53.837
> 
> 标签：jquery, onclick, onblur

# 我有的

我有一个文本字段，我无法直接编辑其标记：

```
<input type="text" name="email" value="Email Address" id="subscribe-field" 
onclick="if ( this.value == 'Email Address' ) { this.value = ''; }" 
onblur="if ( this.value == '' ) { this.value = 'Email Address'; }"> 
```

# 我需要的

无论文本字段被单击、未单击还是被单击，我都需要将文本字段值设为空白。

# 我试过的

我可以禁用该值：

```
$('#subscribe-field').val(''); 
```

我试图禁用 onclick 和 onblur 值：

```
$('#subscribe-field').click(function() { return false; });
$('#subscribe-field').off('click');
$('#subscribe-field').unbind('click'); 
```

...但是，只要我在文本字段之外单击，该值就会重新出现。

# 我的问题

如何从上述标记中删除 onblur 值？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-11T11:10:37.087

试试这种方式：

`$('#subscribe-field').removeAttr('onclick');`

`$('#subscribe-field').removeAttr('onblur');`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T11:09:16.757

您应该删除内联 JavaScript。[jsfiddle](http://jsfiddle.net/L9GAv/)。使用`jQuery.one`将确保焦点事件只会被调用一次。

```
<input type="text" name="email" value="Email Address" id="subscribe-field" />

$('#subscribe-field').one('focus',function() { 
            this.value = ''; 
       return false; 
}); 
```

更新：根据[mahmoud](https://stackoverflow.com/users/188954/mahmoud)的建议，如果您无法编辑 html，则应删除 onClick 和 onBlur 属性。

`off`并且`unbind`将取消绑定 jQuery`click`事件而不是内联 `onclick`并返回 false 也不会解决您的问题，因为内联`onClick`将首先被调用。

# r - lmer() 和 anova() 之间模型适应度估计的差异

> ID：12838087
> 
> 赞同：3
> 
> 时间：2012-10-11T11:05:03.093
> 
> 标签：r, anova, lme4

我想对生物数据随时间的治疗效果进行建模，`lmer()`以考虑个体效果。通常使用的过程是通过逐步删除固定效应和交互项来构建多个模型，然后在`anova(model1,model2)`发现不显着差异时使用并保留最简约的模型找到最佳模型。但是，我在`summary(model1)`和的输出之间发现了不同的模型适应度值（AIC、BIC ..） `anova (model1,model2)`。这是代码：

```
#Data are in z6
m1<-lmer(Brightness~factor(FT)*factor(Time)+(1|ID),z6)
m2<-lmer(Brightness~factor(FT)+factor(Time)+(1|ID),z6)
summary(m1)@AICtab 
AIC     BIC    logLik deviance  REMLdev
2284.223 2335.65 -1128.112  2301.36 2256.223
summary(m2)@AICtab
AIC      BIC    logLik deviance  REMLdev
2298.247 2331.307 -1140.124  2302.42 2280.247
anova(m1,m2)
Data: z6
Models:
m2: Brightness ~ factor(FT) + factor(Time) + (1 | ID)
m1: Brightness ~ factor(FT) * factor(Time) + (1 | ID)
Df    AIC    BIC  logLik  Chisq Chi Df Pr(>Chisq)
m2  9 2320.4 2353.5 -1151.2                         
m1 14 2329.4 2380.8 -1150.7 1.0601      5     0.9576 
```

比较输出时，两个模型之间有 14 个 AIC 单位差异，`summary()`但在`anova()`. 这种差异从何而来？提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T11:13:01.033

您的模型具有不同的固定效果，因此通过 REML 拟合不适用于您显示的类型的模型比较。该`anova()`方法知道这一点并计算 ML 估计。该`summary()`方法使用 REML 估计（后者在输出中明确指出）。

请注意，两个摘要和输出`logLik`中的值不同。`anova()`前者是 REML 对数似然，后者是 ML 似然。由于 AIC 等是对数似然的函数，这足以说明报告的 AIC 差异。

`anova()`如果模型没有通过 REML 拟合，该方法可以计算 ML 估计值，因此如果比较的模型在其固定效应方面存在差异，则该方法会做正确的事情。

如果你打算在你的研究中部署这些方法，我强烈建议你阅读 REML 和 ML 估计及其相对优点、用途等，如果以上对你来说是新闻的话。

# jquery - 如何让这个 jQuery 滑块停止？

> ID：12838088
> 
> 赞同：0
> 
> 时间：2012-10-11T11:05:03.407
> 
> 标签：jquery, slider

我有个问题。我使用这个 jQuery 脚本 (http://musca.se/full-window-width-jquery-tools-content-slider-demo/) 来滑动我的投资组合，但我根本不是 jQuery 的专家很多搜索我现在问你。当我按下 prev 或 next 时，如何让滑块停止滑动？

代码如下所示：

```
$(function() {
        // Sets the slides width on page load
        var i = $(window).width();
        if (i > 319){ $('#items > div').css({ width: i }); }
        // Scrollable and navigator plugin settings.
        $("#slider").scrollable({ circular: true, touch: true, easing: 'easeInQuart', speed: 900}).navigator({ navi: '#navigation' }).autoscroll({ autoplay: true, autopause:false, interval: 2000 });

        // Window resize code
        window.api = $("#slider").data("scrollable");
        $(window).resize(function() {
            var a = window.api.getIndex();
            var w = $(window).width();
            if (w > 319) {
                var l = a * w
                $('#items').css({ left: + - +l });
                $('#items > div').css({ width: w });
            } else {
                $('#items > div').css({ width: 300 });
            }
        });
    }); 
```

我的导航按钮如下所示：

```
<div id="navigation-wrapper">
    <span class="prev lefty"><img src="img/left.png" /></span>
    <span class="next righty"><img src="img/right.png" /></span>
</div> 
```

我真的很感谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T11:07:59.403

如果在调用它之前将超时声明为变量：

```
var st;

$('.prev').on('click',function(){
    st = setTimeout("$('#slider')", 999999);
}); 
```

你可以像这样清除它：

```
clearTimeout(st); 
```

编辑：

看到前面的代码是基于一个过时的例子，你可以试试这个：

```
$('#navigation-wrapper').on('click', 'span', function(){
    $('#slider').autoscroll({ autoplay: false, autopause:false, interval: 0 });
} 
```

这应该有望使用自动播放值 false 重新初始化滑块，这意味着它将自行停止旋转。但是，我对这个插件并不熟悉，所以这充其量只是猜测。希望对你有效。

# apache-flex - Chrome Flash Player (Pepper) 日期 timezoneOffset 错误

> ID：12838092
> 
> 赞同：4
> 
> 时间：2012-10-11T11:05:15.750
> 
> 标签：apache-flex, google-chrome, date, flash

我很难在这个关键问题上找到任何东西，所以我决定发布这个来帮助遇到同样问题的用户。

Chrome 嵌入式 Flash Player (Pepper) 有一个关于日期 timezoneOffset 的错误，当您的应用程序处理日期时会导致一些不可预知的行为。由于我们提供商业 Flex 日历组件 (KC-Calendar)，因此这个问题对于我们的客户及其应用程序来说至关重要。

问题详情可以在这里找到：[http](http://code.google.com/p/chromium/issues/detail?id=154060) ://code.google.com/p/chromium/issues/detail?id=154060 （请投票）

等待修复，如果有人有解决方法，它可能真的很有帮助。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-17T02:44:00.250

我们之前已经处理过此类问题，而且老实说——而不是试图序列化日期——IMO 最好的解决方案（除非你想要自动时区转换）是简单地将日期数据类型作为字符串传递。我们使用 Java 和 ActionScript 的 getter/setter 干净地做到了这一点，它们（正确地）通过解析未调整的日期字符串在我们的 DTO 中设置序列化的“日期”对象。

前任。当您设置 Date 对象的值时，在设置器中将 Date 转换为 String 并为该日期设置一个 String 字段。在 getter 中，您获取该日期的 String 值并对其进行解析，返回一个新的 Date 对象。在服务器端和客户端执行此操作。

显然，唯一需要注意的是，您需要确保 Flex 和服务器端 String-to-Date/Date-To-String 函数使用相同的日期格式。只需在您的序列化日期解析器/格式化程序旁边放一个很好的评论来解释这一点（所以没有人会搞砸它），您就可以了。

我预计一旦发布了基于 HTML5 的 Flex 编译器，这个问题可能会消失（它实际上只是一个 Flash 功能，在我们的案例中不是所需的行为）。

# java - 使用 JSP 中的 RequestDispatcher 包含静态内容不适用于 GAE Java SDK

> ID：12838097
> 
> 赞同：0
> 
> 时间：2012-10-11T11:05:46.527
> 
> 标签：java, google-app-engine, jsp

我有一个在 App Engine Java SDK 1.7.2 上运行的网络应用程序。除了提供静态内容和 JSP 的默认设置外，该应用程序没有过滤器和 servlet。

在 JSP 文件中，我有一行类似的内容：

```
<% request.getRequestDispatcher( "a.html" ).include( request, response ); %> 
```

这是抛出一个 java.lang.IllegalStateException：“getOutputStream 已经被调用”。

如果我将“a.html”更改为“a.jsp”等动态内容，一切正常。文档说 RequestDispatcher 应该适用于动态和静态内容。

**OBS：**我仍在学习 Servlet 和所有相关的东西，但我知道还有其他方法可以实现我在这里所做的事情 - 这只是一个示例，而不是真实世界的场景。我只是想知道这是否是预期的行为以及原因。或者它只是一个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T16:39:31.120

谷歌搜索后，我了解到这个错误已经存在了很长时间。看看 [http://www.coderanch.com/t/165116/java-Web-Component-SCWCD/certification/RequestDispatcher-include-throws-IllegalStateException](http://www.coderanch.com/t/165116/java-Web-Component-SCWCD/certification/RequestDispatcher-include-throws-IllegalStateException)
看起来很奇怪，以下工作。

```
<%@page buffer="none"%>
<%
   request.getRequestDispatcher("a.html").include(request,response);
%> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T12:29:10.293

为什么你要在 JSP 中放置 scriplets，这是让你的 JSP 维护成为噩梦的可怕方式。无论如何，在您调用此方法之前，您的请求似乎已经发送。

# javascript - PhoneGap 2.1.0 不适用于 iOS 4.3.3

> ID：12838104
> 
> 赞同：0
> 
> 时间：2012-10-11T11:06:10.713
> 
> 标签：javascript, ios, cordova

我使用 PhoneGap Build 开发了一个 hello world 示例，它在 iOS 5 上运行良好，但在 iOS 4.33 上崩溃。

这是崩溃日志：

```
Incident Identifier: 96D8E936-F4A3-43C6-864E-5BE8631E454E
CrashReporter Key:   c2c95d63cf11603079ae85170ab939102266467f
Hardware Model:      iPhone2,1
Process:         HelloWorld210 [305]
Path:            /var/mobile/Applications/8DFA1B8E-DF57-41F6-A504-261D2185358C/HelloWorld210.app/HelloWorld210
Identifier:      HelloWorld210
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2012-10-11 15:09:53.724 +0100
OS Version:      iPhone OS 4.3.3 (8J2)
Report Version:  104

Exception Type:  EXC_BREAKPOINT (SIGTRAP)
Exception Codes: 0x00000001, 0xe7ffdefe
Crashed Thread:  0

Dyld Error Message:
  Symbol not found: _objc_retainAutoreleasedReturnValue
  Referenced from: /var/mobile/Applications/8DFA1B8E-DF57-41F6-A504-261D2185358C/HelloWorld210.app/HelloWorld210
  Expected in: /usr/lib/libobjc.A.dylib
  Dyld Version: 191.3

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   dyld                            0x2fe01080 0x2fe00000 + 4224
1   dyld                            0x2fe02a40 0x2fe00000 + 10816
2   dyld                            0x2fe02b00 0x2fe00000 + 11008
3   libdyld.dylib                   0x3185844e 0x31857000 + 5198
4   libdyld.dylib                   0x31858374 0x31857000 + 4980
5   HelloWorld210                   0x00038474 0x1000 + 226420
6   HelloWorld210                   0x00003b8c 0x1000 + 11148
7   UIKit                           0x3362fa0c 0x335f9000 + 223756
8   HelloWorld210                   0x000384ca 0x1000 + 226506
9   HelloWorld210                   0x0000382a 0x1000 + 10282
10  UIKit                           0x3362e81a 0x335f9000 + 219162
11  UIKit                           0x33628b5e 0x335f9000 + 195422
12  UIKit                           0x335fd7d0 0x335f9000 + 18384
13  UIKit                           0x335fd20e 0x335f9000 + 16910
14  UIKit                           0x335fcc4c 0x335f9000 + 15436
15  GraphicsServices                0x34643e70 0x3463f000 + 20080
16  CoreFoundation                  0x33b47a90 0x33ad2000 + 481936
17  CoreFoundation                  0x33b49838 0x33ad2000 + 489528
18  CoreFoundation                  0x33b4a606 0x33ad2000 + 493062
19  CoreFoundation                  0x33adaebc 0x33ad2000 + 36540
20  CoreFoundation                  0x33adadc4 0x33ad2000 + 36292
21  UIKit                           0x33627d42 0x335f9000 + 191810
22  UIKit                           0x33625800 0x335f9000 + 182272
23  HelloWorld210                   0x00003650 0x1000 + 9808
24  HelloWorld210                   0x00003600 0x1000 + 9728

Thread 1:
0   libsystem_kernel.dylib          0x344b83ec 0x344a6000 + 74732
1   libsystem_c.dylib               0x33ea66d8 0x33e72000 + 214744
2   libsystem_c.dylib               0x33ea6bbc 0x33e72000 + 215996

Thread 2 name:  Dispatch queue: com.apple.libdispatch-manager
Thread 2:
0   libsystem_kernel.dylib          0x344b8fbc 0x344a6000 + 77756
1   libdispatch.dylib               0x31415032 0x3140f000 + 24626
2   libdispatch.dylib               0x3141603a 0x3140f000 + 28730
3   libdispatch.dylib               0x314155ea 0x3140f000 + 26090
4   libsystem_c.dylib               0x33ea658a 0x33e72000 + 214410
5   libsystem_c.dylib               0x33ea6bbc 0x33e72000 + 215996

Thread 3 name:  WebThread
Thread 3:
0   libsystem_kernel.dylib          0x344b5c00 0x344a6000 + 64512
1   libsystem_kernel.dylib          0x344b5758 0x344a6000 + 63320
2   CoreFoundation                  0x33b482b8 0x33ad2000 + 484024
3   CoreFoundation                  0x33b4a562 0x33ad2000 + 492898
4   CoreFoundation                  0x33adaebc 0x33ad2000 + 36540
5   CoreFoundation                  0x33adadc4 0x33ad2000 + 36292
6   WebCore                         0x3235b27e 0x32355000 + 25214
7   libsystem_c.dylib               0x33ea530a 0x33e72000 + 209674
8   libsystem_c.dylib               0x33ea6bb4 0x33e72000 + 215988

Thread 4:
0   libsystem_kernel.dylib          0x344b5c00 0x344a6000 + 64512
1   libsystem_kernel.dylib          0x344b5758 0x344a6000 + 63320
2   CoreFoundation                  0x33b482b8 0x33ad2000 + 484024
3   CoreFoundation                  0x33b4a562 0x33ad2000 + 492898
4   CoreFoundation                  0x33adaebc 0x33ad2000 + 36540
5   CoreFoundation                  0x33adadc4 0x33ad2000 + 36292
6   Foundation                      0x34a567f6 0x34a2c000 + 174070
7   Foundation                      0x34a49382 0x34a2c000 + 119682
8   Foundation                      0x34abb5c6 0x34a2c000 + 587206
9   libsystem_c.dylib               0x33ea530a 0x33e72000 + 209674
10  libsystem_c.dylib               0x33ea6bb4 0x33e72000 + 215988

Thread 0 crashed with ARM Thread State:
    r0: 0x2fe4e994    r1: 0x00000000      r2: 0x00000330      r3: 0x2fe26624
    r4: 0x2fe4e994    r5: 0x0017b6ac      r6: 0x2fe19259      r7: 0x2fdfe234
    r8: 0x2fe29550    r9: 0x00000000     r10: 0x2fdfe218     r11: 0x0005ee5f
    ip: 0x6c79642e    sp: 0x2fdfe234      lr: 0x2fe02a47      pc: 0x2fe01080
  cpsr: 0x60000010

Binary Images:
    0x1000 -    0x4efff +HelloWorld210 armv7  <35adc327c6093465852999b16b55a64b> /var/mobile/Applications/8DFA1B8E-DF57-41F6-A504-261D2185358C/HelloWorld210.app/HelloWorld210
0x2fe00000 - 0x2fe25fff  dyld armv7  <bb9bfc7d242331d29a79adf7ef7aaa18> /usr/lib/dyld
0x3122f000 - 0x31266fff  Security armv7  <6599f42a910b3b31a0e1d98c883d61cb> /System/Library/Frameworks/Security.framework/Security
0x312b6000 - 0x312bffff  CoreVideo armv7  <ea847e6dba2d36b1826b255c73b39539> /System/Library/Frameworks/CoreVideo.framework/CoreVideo
0x312c0000 - 0x312c6fff  IAP armv7  <c0f4c99a1b493e489948f231ad9238e2> /System/Library/PrivateFrameworks/IAP.framework/IAP
0x312f0000 - 0x312f9fff  ITSync armv7  <ba8b48d061903e4096774344448776d0> /System/Library/PrivateFrameworks/ITSync.framework/ITSync
0x312fa000 - 0x31306fff  SpringBoardServices armv7  <c68262667ac8397a949ce4e92dfec7db> /System/Library/PrivateFrameworks/SpringBoardServices.framework/SpringBoardServices
0x31307000 - 0x3130cfff  libnotify.dylib armv7  <9d7198e91de9386a9e5ea43608a66a57> /usr/lib/system/libnotify.dylib
0x31353000 - 0x31354fff  libsystem_network.dylib armv7  <39bf0f48bd8539169a77f8f61cdcd4c9> /usr/lib/system/libsystem_network.dylib
0x3140f000 - 0x3141cfff  libdispatch.dylib armv7  <9a0511ad5ebc3db898f1f49ed1a73d34> /usr/lib/system/libdispatch.dylib
0x314e3000 - 0x314fcfff  libRIP.A.dylib armv7  <4825c3e392983aba947eca06555e4480> /System/Library/Frameworks/CoreGraphics.framework/Resources/libRIP.A.dylib
0x31553000 - 0x3155efff  libz.1.dylib armv7  <ac706bee36593dc683fd5a96a389d72e> /usr/lib/libz.1.dylib
0x3166a000 - 0x316b8fff  CoreMotion armv7  <58c353bb7e33361f881da07c72f4cdfb> /System/Library/Frameworks/CoreMotion.framework/CoreMotion
0x316b9000 - 0x316bffff  ProtocolBuffer armv7  <f9277ee9b85b3722975ad319a323aca0> /System/Library/PrivateFrameworks/ProtocolBuffer.framework/ProtocolBuffer
0x316e8000 - 0x316e8fff  libsystem_sandbox.dylib armv7  <f47c01d627853b328e088b3fdd08e87d> /usr/lib/system/libsystem_sandbox.dylib
0x316e9000 - 0x31748fff  libBLAS.dylib armv7  <0b36b2272aa33a8c9aa22d99c89d7189> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libBLAS.dylib
0x31749000 - 0x31749fff  libdnsinfo.dylib armv7  <21415179ffa03f949fa8cc851c6c31c7> /usr/lib/system/libdnsinfo.dylib
0x31857000 - 0x31858fff  libdyld.dylib armv7  <41a7b5e5d9983449ab33affed0f635ad> /usr/lib/system/libdyld.dylib
0x31859000 - 0x3188efff  AddressBook armv7  <3f2071a77bc134cd82065eef90d4082f> /System/Library/Frameworks/AddressBook.framework/AddressBook
0x318e1000 - 0x31919fff  IOKit armv7  <80ae313ad69d3363935c88e51a11862d> /System/Library/Frameworks/IOKit.framework/Versions/A/IOKit
0x3191d000 - 0x3191ffff  libAccessibility.dylib armv7  <d55f1553d14831a2a5435ae27ef75ef4> /usr/lib/libAccessibility.dylib
0x31940000 - 0x31942fff  IOMobileFramebuffer armv7  <683f321680763e519d61541170ba2133> /System/Library/PrivateFrameworks/IOMobileFramebuffer.framework/IOMobileFramebuffer
0x31a87000 - 0x31b8bfff  JavaScriptCore armv7  <61a94142e2d23dafa2964190dd46e9e3> /System/Library/PrivateFrameworks/JavaScriptCore.framework/JavaScriptCore
0x31b8c000 - 0x31bb0fff  MediaControl armv7  <1cfc7d79f554357ab59eb69f9efebf07> /System/Library/PrivateFrameworks/MediaControl.framework/MediaControl
0x31bb1000 - 0x31bb7fff  liblockdown.dylib armv7  <14c89b7346433c1f8675f454531f6ca3> /usr/lib/liblockdown.dylib
0x31bb8000 - 0x31bbdfff  libsystem_dnssd.dylib armv7  <c7cfe523e2d73521abc01587313ef730> /usr/lib/system/libsystem_dnssd.dylib
0x31bbe000 - 0x31bbefff  Accelerate armv7  <7d5ad465049136afaa1f0d89aac600bc> /System/Library/Frameworks/Accelerate.framework/Accelerate
0x31c0c000 - 0x31cb5fff  libxml2.2.dylib armv7  <5538d3f2c7d83b88b06168488fe6326b> /usr/lib/libxml2.2.dylib
0x31fd2000 - 0x31fe8fff  EAP8021X armv7  <9fefc0ada30435fbb3b51818c74f6cb8> /System/Library/PrivateFrameworks/EAP8021X.framework/EAP8021X
0x31ff5000 - 0x31ff8fff  CaptiveNetwork armv7  <fc834fd33a18341ea7506587ad895703> /System/Library/PrivateFrameworks/CaptiveNetwork.framework/CaptiveNetwork
0x31ff9000 - 0x3207dfff  AVFoundation armv7  <eeaf5f4f822436a5bd1655f536e69879> /System/Library/Frameworks/AVFoundation.framework/AVFoundation
0x3208e000 - 0x32092fff  libcache.dylib armv7  <d2f7fd2a352b3cd59c564be34b53cf80> /usr/lib/system/libcache.dylib
0x32093000 - 0x3209afff  libbz2.1.0.dylib armv7  <0a082e1d475432959ba93aa3dbf7fb31> /usr/lib/libbz2.1.0.dylib
0x320c9000 - 0x320ccfff  ArtworkCache armv7  <4863e321afee3ac5a3749e50cd926597> /System/Library/PrivateFrameworks/ArtworkCache.framework/ArtworkCache
0x32149000 - 0x32172fff  MobileCoreServices armv7  <57fef84bdc17301d8bf53ba0fb967fe6> /System/Library/Frameworks/MobileCoreServices.framework/MobileCoreServices
0x32176000 - 0x321a5fff  SystemConfiguration armv7  <1d73b8a159363f96bb9c039655c5eae6> /System/Library/Frameworks/SystemConfiguration.framework/SystemConfiguration
0x321a6000 - 0x321d9fff  AppSupport armv7  <0217468bd9f839229a47910b7816b3d5> /System/Library/PrivateFrameworks/AppSupport.framework/AppSupport
0x32355000 - 0x32960fff  WebCore armv7  <07941e59d0a33f94802c16c76238fddf> /System/Library/PrivateFrameworks/WebCore.framework/WebCore
0x329b8000 - 0x32b0cfff  AudioToolbox armv7  <6619c8c13f8d328e923e797fa8d0df23> /System/Library/Frameworks/AudioToolbox.framework/AudioToolbox
0x32b0f000 - 0x32c30fff  CoreGraphics armv7  <65f6c8701b563542820a26b0dfc4f6a4> /System/Library/Frameworks/CoreGraphics.framework/CoreGraphics
0x32c34000 - 0x32c34fff  libCVMSPluginSupport.dylib armv7  <42d8aa2a31843a6e8bfff745644a7ba5> /System/Library/Frameworks/OpenGLES.framework/libCVMSPluginSupport.dylib
0x32d14000 - 0x32d20fff  HomeSharing armv7  <2df6957cdfea31aea12eebf27ca1691c> /System/Library/PrivateFrameworks/HomeSharing.framework/HomeSharing
0x32d21000 - 0x32d28fff  libMobileGestalt.dylib armv7  <55f29184efcc3046bb833dd72a4487e1> /usr/lib/libMobileGestalt.dylib
0x32dc3000 - 0x32f0ffff  MediaToolbox armv7  <482b13059e8a329fa5d832baede25103> /System/Library/PrivateFrameworks/MediaToolbox.framework/MediaToolbox
0x32f26000 - 0x32f28fff  CrashReporterSupport armv7  <9e7efa009730322f84bbc5d8bf1ded94> /System/Library/PrivateFrameworks/CrashReporterSupport.framework/CrashReporterSupport
0x32f29000 - 0x32f33fff  AccountSettings armv7  <d083fb384dc7311eb6766b9b2d2dd9c8> /System/Library/PrivateFrameworks/AccountSettings.framework/AccountSettings
0x33546000 - 0x33548fff  libgcc_s.1.dylib armv7  <a2631ac302f4310dae8367939e16b7c2> /usr/lib/libgcc_s.1.dylib
0x33549000 - 0x335e6fff  AddressBookUI armv7  <e354aeb3d96e30338e90cc3638ffe81b> /System/Library/Frameworks/AddressBookUI.framework/AddressBookUI
0x335e7000 - 0x335ebfff  libGFXShared.dylib armv7  <a0772a32cd8b3b9194bb0c29807c1c5b> /System/Library/Frameworks/OpenGLES.framework/libGFXShared.dylib
0x335f9000 - 0x33986fff  UIKit armv7  <c271b78464d93cb7bf28c6e49df293ba> /System/Library/Frameworks/UIKit.framework/UIKit
0x33989000 - 0x339cffff  CoreTelephony armv7  <af7d1e770e5a3ffd8834a57fb5d40557> /System/Library/Frameworks/CoreTelephony.framework/CoreTelephony
0x33a20000 - 0x33a27fff  AggregateDictionary armv7  <ab9777b39e8e3026ad64dc90323cad7e> /System/Library/PrivateFrameworks/AggregateDictionary.framework/AggregateDictionary
0x33a73000 - 0x33aa7fff  VideoToolbox armv7  <570c63dc3a273a5a8c9072fd5567f5c1> /System/Library/PrivateFrameworks/VideoToolbox.framework/VideoToolbox
0x33ad2000 - 0x33bb7fff  CoreFoundation armv7  <a8444f997111304c9571b3ff974b769c> /System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
0x33bb8000 - 0x33c02fff  libstdc++.6.dylib armv7  <b2cac408951c3f3c9ba3cf563e54ce81> /usr/lib/libstdc++.6.dylib
0x33d60000 - 0x33d9ffff  libSystem.B.dylib armv7  <33dcf9a403ae3fd5971d6030ada2fcab> /usr/lib/libSystem.B.dylib
0x33e13000 - 0x33e55fff  CoreAudio armv7  <c972fd5f8e89333ca680b9a33587f896> /System/Library/Frameworks/CoreAudio.framework/CoreAudio
0x33e72000 - 0x33ef3fff  libsystem_c.dylib armv7  <a7077267b6743ed3bbdd86d4380c75d9> /usr/lib/system/libsystem_c.dylib
0x33f15000 - 0x33f1afff  liblaunch.dylib armv7  <f5ccc8234aea3ebd9a88bd37f0fa23ae> /usr/lib/system/liblaunch.dylib
0x33f55000 - 0x33f65fff  DataAccessExpress armv7  <66d9047da79a31daa887e6d84c42ecb2> /System/Library/PrivateFrameworks/DataAccessExpress.framework/DataAccessExpress
0x33faf000 - 0x34073fff  libobjc.A.dylib armv7  <6b51e76fde9f381bb7b3bc5badbfee3a> /usr/lib/libobjc.A.dylib
0x34084000 - 0x340f3fff  ProofReader armv7  <6d843c6aecdd37ae84baa40af8ad7e65> /System/Library/PrivateFrameworks/ProofReader.framework/ProofReader
0x340f4000 - 0x34107fff  libmis.dylib armv7  <529ea6e3a87230ce9f6cf3285c22429c> /usr/lib/libmis.dylib
0x34110000 - 0x34113fff  ApplePushService armv7  <015c68c15621348db9f6a012499170e1> /System/Library/PrivateFrameworks/ApplePushService.framework/ApplePushService
0x34157000 - 0x34244fff  libiconv.2.dylib armv7  <f4146ce07e3031ea8a81fa5516fd77d0> /usr/lib/libiconv.2.dylib
0x3428e000 - 0x342cefff  CoreMedia armv7  <8e0570582ba535bfa74f1f00eef64376> /System/Library/Frameworks/CoreMedia.framework/CoreMedia
0x342cf000 - 0x34320fff  libsqlite3.dylib armv7  <8a41cc6a6d9332308bc415d27577fd24> /usr/lib/libsqlite3.dylib
0x34344000 - 0x3438afff  CoreLocation armv7  <c1924042951e3df98515c7bf36093c1c> /System/Library/Frameworks/CoreLocation.framework/CoreLocation
0x344a6000 - 0x344bdfff  libsystem_kernel.dylib armv7  <a06ec84e53bf32098b63c0caebdb45b6> /usr/lib/system/libsystem_kernel.dylib
0x344c2000 - 0x34568fff  Celestial armv7  <7fbd02fa664b33babaf0327c320d1491> /System/Library/PrivateFrameworks/Celestial.framework/Celestial
0x34569000 - 0x3456cfff  IOSurface armv7  <ad50e71624583d06b891344d832f9b08> /System/Library/PrivateFrameworks/IOSurface.framework/IOSurface
0x345ca000 - 0x34607fff  CoreText armv7  <fb6a72faec2330c4b2cd33c2e9c59588> /System/Library/Frameworks/CoreText.framework/CoreText
0x34636000 - 0x3463efff  MobileBluetooth armv7  <63f11756c4aa3262b2317ff3b8e2a977> /System/Library/PrivateFrameworks/MobileBluetooth.framework/MobileBluetooth
0x3463f000 - 0x3464bfff  GraphicsServices armv7  <ff78a9636e933f0dbd222f8d26209788> /System/Library/PrivateFrameworks/GraphicsServices.framework/GraphicsServices
0x3464f000 - 0x34692fff  ManagedConfiguration armv7  <f790c26852cb3cf298abe56bc9a3940b> /System/Library/PrivateFrameworks/ManagedConfiguration.framework/ManagedConfiguration
0x34696000 - 0x346b3fff  libsystem_info.dylib armv7  <48016be86e3f3cd9aeee1c6590e1ac6f> /usr/lib/system/libsystem_info.dylib
0x3478d000 - 0x34791fff  AssetsLibraryServices armv7  <e1cbfe599c96369ca4bdb0dd99d3cd9f> /System/Library/PrivateFrameworks/AssetsLibraryServices.framework/AssetsLibraryServices
0x34792000 - 0x3479bfff  MobileWiFi armv7  <03d98d5cf6383695aa7d8a88da52f410> /System/Library/PrivateFrameworks/MobileWiFi.framework/MobileWiFi
0x34810000 - 0x3481efff  OpenGLES armv7  <5a76beaeaa013f0cbf16e5cb154598ab> /System/Library/Frameworks/OpenGLES.framework/OpenGLES
0x34938000 - 0x34970fff  libCGFreetype.A.dylib armv7  <ccea634795153164a681f0f311f4461d> /System/Library/Frameworks/CoreGraphics.framework/Resources/libCGFreetype.A.dylib
0x34a2c000 - 0x34b4bfff  Foundation armv7  <09ff368178c5321c9715b9c8d491d53f> /System/Library/Frameworks/Foundation.framework/Foundation
0x34b4c000 - 0x34b4efff  MobileInstallation armv7  <94b6d6c5d9883175af26764567528127> /System/Library/PrivateFrameworks/MobileInstallation.framework/MobileInstallation
0x34b67000 - 0x34b7cfff  libresolv.9.dylib armv7  <e92cfbb83f7b330db19181e797bb3f7b> /usr/lib/libresolv.9.dylib
0x34b7d000 - 0x34b82fff  MobileKeyBag armv7  <8c35c090bc373cb181fc26b961b8dba5> /System/Library/PrivateFrameworks/MobileKeyBag.framework/MobileKeyBag
0x365d6000 - 0x365f6fff  PrintKit armv7  <e5a01ca9083a36afacc08611a398e2ad> /System/Library/PrivateFrameworks/PrintKit.framework/PrintKit
0x366ed000 - 0x3679cfff  QuartzCore armv7  <ef9632c9781f3101916b65e9faae1579> /System/Library/Frameworks/QuartzCore.framework/QuartzCore
0x36849000 - 0x36908fff  CFNetwork armv7  <b09e0d53de9f3bc8bde494780f3cdd4f> /System/Library/Frameworks/CFNetwork.framework/CFNetwork
0x36bca000 - 0x36bcbfff  libsystem_blocks.dylib armv7  <ccc041df3de73eafb7a59e74cdb1702b> /usr/lib/system/libsystem_blocks.dylib
0x36bef000 - 0x36bf4fff  libcopyfile.dylib armv7  <e57c2b9054b831d9a37119baaa4947cb> /usr/lib/system/libcopyfile.dylib
0x36de3000 - 0x36de4fff  libremovefile.dylib armv7  <e8858a499d663e6a9e3c188521273cc1> /usr/lib/system/libremovefile.dylib
0x36de5000 - 0x36df2fff  libbsm.0.dylib armv7  <0a1e2bb78d5138419ecad8ba0fe42fdd> /usr/lib/libbsm.0.dylib
0x36e1e000 - 0x36ee4fff  MusicLibrary armv7  <71a09022bd8b3b6a90a250199d190f10> /System/Library/PrivateFrameworks/MusicLibrary.framework/MusicLibrary
0x36f36000 - 0x36f48fff  PersistentConnection armv7  <659ea9d5b13d3fefb37acff09016a69c> /System/Library/PrivateFrameworks/PersistentConnection.framework/PersistentConnection
0x36f85000 - 0x36fb8fff  StoreServices armv7  <d526715648f435c3aac4c42953e76d20> /System/Library/PrivateFrameworks/StoreServices.framework/StoreServices
0x3703b000 - 0x3703cfff  DataMigration armv7  <42e9e87a4e0735c3837e27d4f2adcf55> /System/Library/PrivateFrameworks/DataMigration.framework/DataMigration
0x370d5000 - 0x3712afff  libvDSP.dylib armv7  <0221caba81a235c5a896a835e2aac047> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvDSP.dylib
0x3712b000 - 0x37418fff  libLAPACK.dylib armv7  <b855d60dac01310495453bddfd004f0d> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libLAPACK.dylib
0x37422000 - 0x3745efff  libGLImage.dylib armv7  <9d97699e44ee3651ba4ac37e5adec35b> /System/Library/Frameworks/OpenGLES.framework/libGLImage.dylib
0x3750d000 - 0x375befff  WebKit armv7  <eb9a0d69c64b3127b2bffd71641add3b> /System/Library/PrivateFrameworks/WebKit.framework/WebKit
0x375bf000 - 0x375c2fff  MediaRemote armv7  <0804293b2774359189f3a67e2c81558d> /System/Library/PrivateFrameworks/MediaRemote.framework/MediaRemote
0x37628000 - 0x37629fff  CoreSurface armv7  <7b83cd757da73e6e826693c29296d3fa> /System/Library/PrivateFrameworks/CoreSurface.framework/CoreSurface
0x3762a000 - 0x3773cfff  MediaPlayer armv7  <da848c0745a637af81d7edd962a09324> /System/Library/Frameworks/MediaPlayer.framework/MediaPlayer
0x37740000 - 0x37743fff  libmacho.dylib armv7  <43311c113a9d3182b7d007129819f029> /usr/lib/system/libmacho.dylib
0x37744000 - 0x3785efff  libicucore.A.dylib armv7  <bada0c2725bb31a483d5adf9aaf1f8df> /usr/lib/libicucore.A.dylib
0x3785f000 - 0x3785ffff  vecLib armv7  <0c60cd0a60f43d2791d36cb357d30e3c> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/vecLib
0x37895000 - 0x3792afff  ImageIO armv7  <d520e3241d1130e8ac1375ee0f2c1095> /System/Library/Frameworks/ImageIO.framework/ImageIO
0x37959000 - 0x379a7fff  GMM armv7  <049361f664eb3f30b0d25cd56ffc1f0f> /System/Library/PrivateFrameworks/GMM.framework/GMM
0x379a8000 - 0x379c7fff  Bom armv7  <b178e3efb4d733c694bd5a55e57a314f> /System/Library/PrivateFrameworks/Bom.framework/Bom 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T07:18:27.733

随着 iOS 6 苹果将 Xcode 更新到 4.5 并删除了对 ARMv6（iPhone、iPhone 3G、iPod Touch 1g/2g ......）的支持。

因此，您不能针对 iOS 3 或低于 4.3 的东西（ARMv6 设备不支持）。

# facebook - 如何在黑莓中更新 Staus onFacebook 用户的 frnds 墙

> ID：12838105
> 
> 赞同：1
> 
> 时间：2012-10-11T11:06:14.060
> 
> 标签：facebook, blackberry

我必须使用此代码在 Facebook 用户的朋友 wall.im 上发帖

```
Facebook fb = Facebook.getInstance(as); 
User user = fb.getCurrentUser(); 
User[] friends = user.getFriends(); 
if (friends != null && friends.length > 0) { 
for (int i=0; i if (friends != null && friends.length > 0)   
{
 friends[i].publishStatus("TEsting App");
}
} 
```

请有人为此提供代码....

# php - 根据 URL（动态）在 codeigniter 中设置数据库

> ID：12838108
> 
> 赞同：1
> 
> 时间：2012-10-11T11:06:18.503
> 
> 标签：php, codeigniter

我正在使用 codeigniter 开发基于 Web 的应用程序。这将被各种不同的客户端使用，每个客户端都有自己的数据库但相同的代码库。

我希望能够根据访问它的客户端（即基于 url）在 database.php 中设置数据库的名称。因此，如果 clientA.com 访问它，则应将数据库名称设置为 clintA，如果 clientB.com 访问它，则应将其设置为 clientB.com。

关于我应该如何解决这个问题的任何想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T11:15:36.727

有几种可能的方法，但可能最简单的方法是在配置文件中使用数据库组。在您的 application/config/database.php 文件中，使用多维数组为每个客户端创建不同的组。所以你可以有：

```
$db['clientA']['hostname'] = ...
$db['clientA']['username'] = ...
etc...
$db['clientB']['hostname'] = ...
$db['clientB']['username'] = ...
etc... 
```

现在在您的应用程序中，您可以将所需的组传递给您的加载命令：

```
$this->load->database('clientA'); 
```

现在将它与 getenv 结合起来获取主机名，你应该已经准备好了：

```
$clientHost = getenv('HTTP_HOST');
$this->load->database($clientHost); 
```

当然可能需要更多的逻辑，但这应该让你开始。

# python - Django-DB-Migrations：不能 ALTER TABLE 因为它有挂起的触发事件

> ID：12838111
> 
> 赞同：163
> 
> 时间：2012-10-11T11:06:29.343
> 
> 标签：python, django, postgresql, django-migrations

我想从 TextField 中删除 null=True：

```
-    footer=models.TextField(null=True, blank=True)
+    footer=models.TextField(blank=True, default='') 
```

我创建了一个模式迁移：

```
manage.py schemamigration fooapp --auto 
```

由于某些页脚列包含，如果我运行迁移，`NULL`我会得到这个：`error`

> django.db.utils.IntegrityError：列“页脚”包含空值

我将此添加到架构迁移中：

```
 for sender in orm['fooapp.EmailSender'].objects.filter(footer=None):
        sender.footer=''
        sender.save() 
```

现在我得到：

```
django.db.utils.DatabaseError: cannot ALTER TABLE "fooapp_emailsender" because it has pending trigger events 
```

怎么了？

* * *

## 回答 #1

> 赞同：184
> 
> 时间：2014-02-25T16:58:06.070

另一个原因可能是因为您尝试将列设置为`NOT NULL`它实际上已经具有`NULL`值的时间。

* * *

## 回答 #2

> 赞同：172
> 
> 时间：2012-10-11T11:06:29.343

每个迁移都在一个事务中。在 PostgreSQL 中，您不能在一个事务中更新表然后更改表模式。

您需要拆分数据迁移和架构迁移。首先使用以下代码创建数据迁移：

```
 for sender in orm['fooapp.EmailSender'].objects.filter(footer=None):
    sender.footer=''
    sender.save() 
```

然后创建架构迁移：

```
manage.py schemamigration fooapp --auto 
```

现在您有两个事务，分两步迁移应该可以工作。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2020-03-24T10:41:57.583

在操作中，我设置了 SET CONSTRAINTS：

```
operations = [
    migrations.RunSQL('SET CONSTRAINTS ALL IMMEDIATE;'),
    migrations.RunPython(migration_func),
    migrations.RunSQL('SET CONSTRAINTS ALL DEFERRED;'),
] 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2020-10-28T03:46:34.843

如果要添加不可为空的字段，则需要在两个迁移中进行：

1.  `AddField`并`RunPython`填充它
2.  `AlterField`将字段更改为不可为空

* * *

# 解释

在 PostgreSQL 和 SQLite 上，如果您有一个足够复杂的`RunPython`命令并在同一迁移中结合架构更改，则可能会出现此问题。例如，如果您要添加一个不可为空的字段，则典型的迁移步骤是：

1.  `AddField`将字段添加为可为空
2.  `RunRython`填充它
3.  `AlterField`将字段更改为不可为空

在 SQLite 和 Postgres 上，这可能会导致问题，因为整个事情是在一个事务中完成的。[Django 文档](https://docs.djangoproject.com/en/dev/ref/migration-operations/#runpython)
对此有一个特定的警告：

> 在支持 DDL 事务的数据库（SQLite 和 PostgreSQL）上，除了为每次迁移创建的事务之外，RunPython 操作不会自动添加任何事务。因此，例如，在 PostgreSQL 上，您应该避免在同一迁移中组合模式更改和 RunPython 操作，否则您可能会遇到诸如 OperationalError: cannot ALTER TABLE "mytable" 这样的错误，因为它有待处理的触发事件。

如果是这种情况，解决方案是将您的迁移分成多个迁移。通常，拆分的方法是进行第一次迁移，其中包含通过 run_python 命令向上执行的步骤，第二次迁移包含其之后的所有步骤。因此，在上述情况下，模式将是一次迁移中的 和 ，以及`AddField`第二次迁移中的 。`RunPython``AlterField`

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2013-04-15T13:24:50.930

刚刚遇到这个问题。您还可以在架构迁移中使用 db.start_transaction() 和 db.commit_transaction() 将数据更改与架构更改分开。可能没有单独的数据迁移那么干净，但在我的情况下，我需要架构、数据，然后是另一个架构迁移，所以我决定一次性完成。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-04-23T20:31:08.567

您正在更改列架构。该页脚列不能再包含空白值。该列的数据库中很可能已经存储了空白值。Django 将使用 migrate 命令将数据库中的那些空白行从空白更新为现在的默认值。Django 尝试更新页脚列具有空白值的行并同时更改架构（我不确定）。

问题是您不能同时更改尝试更新值的同一列模式。

一种解决方案是删除更新架构的迁移文件。然后，运行脚本将所有这些值更新为您的默认值。然后重新运行迁移以更新架构。这样，更新已经完成。Django 迁移只是改变模式。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-03-11T05:07:07.323

> 步骤 1）解决方案是从迁移文件夹中删除最新的迁移，并删除模型中最新添加的字段。

> 步骤 2）然后再次进行迁移和迁移

> 步骤 3）最后再次添加已在第一步中删除的字段

> 步骤 4) 然后再次 makemigration 和 migrate

## 问题解决了

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-11-10T16:19:10.810

就我而言，我有

1.  添加字段
2.  运行Python
3.  删除字段

然后我只是将最后一个 RemoveFied 移动到新的迁移文件中，这解决了问题

# python - 如何在每个类调用时初始化全局变量？

> ID：12838114
> 
> 赞同：2
> 
> 时间：2012-10-11T11:06:31.980
> 
> 标签：python

我有一个如下所示的模块 A：

```
import unittest2

def check_function():
    # performs actions and returns True or False
    return smth

CHECK = check_function()

class A(unittest2.TestCase):

    @unittest2.skipIf(CHECK, "skip message 1")
    def test_1(self):
        # test check

    @unittest2.skipIf(CHECK, "skip message 2")
    def test_2(self):
        # test check 
```

模块 A 正在由另一个模块 B 导入。全局变量 CHECK 何时初始化？进口时？在类实例化？

每次调用 A 类时，我都需要设置 CHECK 变量。我怎样才能做到这一点？

编辑：我已经尝试了以下（这可能是我正在寻找的），但是在 setUpClass 中根本没有设置 CHECK（它保持 False，无论 check_function() 返回什么）。

```
import unittest2

def check_function():
    # performs actions and returns True or False
    return smth

CHECK = False

class A(unittest2.TestCase):

    global CHECK

    @classmethod
    def setUpClass(cls):
        CHECK = check_function()

    @unittest2.skipIf(CHECK, "skip message 1")
    def test_1(self):
        # test check

    @unittest2.skipIf(CHECK, "skip message 2")
    def test_2(self):
        # test check 
```

每次调用测试时如何设置一次 CHECK 的任何想法？

编辑： check_function() 肯定被调用一次，但我不明白为什么 unittest2.skipIf 没有“看到” setUpClass 中设置的值，而是坚持声明时设置的 False 值？

解决方案：

代码的最终骨架如下所示：

```
import unittest2

def check_function():
    # performs checks and returns True or False
    return smth

class A(unittest2.TestCase):

    CHECK = check_function()

    @unittest2.skipIf(CHECK, "skip message 1")
    def test_1(self):
        # do tests
        self.assertTrue(True)

    @unittest2.skipIf(CHECK, "skip message 1")
    def test_2(self):
        # do tests
        self.assertTrue(True) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T11:08:58.100

第`CHECK`一次导入模块时变量已初始化。

见例子。我有一个模块`mymodule.py`，其中包含：

```
print "i am mymodule" 
```

还有一些`anothermodule.py`：

```
print "first"

import mymodule

print "second"

import mymodule

print "third" 
```

当我跑步时，`another module.py`我得到：

```
first
i am mymodule
second
third 
```

python中的初始化变量是相同的命令，`print`并且将在解释器第一次出现在您的模块中时逐行执行。

**更清楚的例子。**

`mymodule.py`：

```
def get_a():
    print 'init a'
    return 42

def get_b():
    print 'init b'
    return 20

a = get_a()
b = get_b() 
```

`anothermodule.py`

```
from mymodule import a
print "a =", a
print "b =", b 
```

结果：

```
init a
init b
a = 42
Traceback (most recent call last):
  File "anothermodule.py", line 3, in <module>
    print b
NameError: name 'b' is not defined 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T11:50:13.133

您的第二种方法看起来像是一个起点。但是你遇到了时间问题。

一方面，您希望在应用装饰器时出现该值（这很早），另一方面，您在调用`setUpClass()`. 那可能已经很晚了。

在我看来唯一的选择

```
class A(unittest2.TestCase):
    CHECK = check_function()

    @unittest2.skipIf(CHECK, "skip message 1")
    def test_1(self):
        # test check

    @unittest2.skipIf(CHECK, "skip message 2")
    def test_2(self):
        # test check 
```

where`CHECK`比使用早初始化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T11:50:23.697

那这个呢：

```
import unittest2

def check_function():
  # performs actions and returns True or False
  return smth

CHECK = None

class A(unittest2.TestCase):
    def __init__(self,*args,**kwargs):
        CHECK=check_funtion
        super(A,self).__init__(*args,**kwargs)

    @unittest2.skipIf(CHECK, "skip message 1")
    def test_1(self):
        # test check

    @unittest2.skipIf(CHECK, "skip message 2")
    def test_2(self):
        # test check 
```

# javascript - 如何更改 twitter bootstrap 导航中活动链接背景的形状？

> ID：12838116
> 
> 赞同：2
> 
> 时间：2012-10-11T11:06:41.783
> 
> 标签：javascript, html, css, twitter-bootstrap

我在我的网站上使用 Twitter Bootstrap 并使用 Nav（基本药丸）作为导航。

当我单击列表菜单或悬停效果时，默认行为是显示背景的形状是矩形。

现在我的问题是我想将该形状更改为我自己的自定义形状。请建议我正确的方法来做到这一点。

默认形状是

![在此处输入图像描述](../Images/9f6a60c10c50b5c28d19c24f0b12d557.png)

我想要的形状就像

![在此处输入图像描述](../Images/0e7dc2948625e2f45509a064206e8c11.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T16:34:57.437

这里有一些 CSS 会给你一个看起来像这样的药丸：

![在此处输入图像描述](../Images/ad29556dbfab3818802c50e107204c94.png)

```
.nav-pills > li.active > a {
   position: relative;
   border-radius: 0px !important;
}

.nav-pills > li.active > a::after {
   border-top: 15px inset transparent;
   border-bottom: 15px inset transparent;
   border-left: 20px solid #08C;
   position: absolute;
   content: "";
   top: 0;
   right: -20px;
} 
```

您可能需要对它进行一些试验，但这应该会给您这个想法。

# ios6 - 在 iOS6 上切换设备上的 FB 帐户时 Facebook 授权失败

> ID：12838118
> 
> 赞同：24
> 
> 时间：2012-10-11T11:06:54.723
> 
> 标签：ios6, single-sign-on, facebook-ios-sdk

我正在使用 Facebook SDK 3.1.1 在我的 iOS 应用程序中实现 FB Connect。在简单的情况下，无论是新的 FB 集成（在 iOS 上登录）还是通过 Web 视图回退到正常授权（在这两种情况下我都没有安装本机 Facebook 应用程序），这都可以正常工作。当我在 iOS 级别切换帐户时会出现问题。注销并使用不同的 FB 用户帐户登录。

要登录/授权，我执行：

```
[FBSession openActiveSessionWithReadPermissions:nil allowLoginUI:allowLoginUI
                                     completionHandler:^(FBSession *session, FBSessionState state, NSError *error) {
                                         [self sessionStateChanged:session state:state error:error];
                                     }]; 
```

如果然后每次都得到一个 FBSessionStateClosedLoginFailed ，即使我在`closeAndClearTokenInformation`达到该状态时执行一个：

```
- (void)sessionStateChanged:(FBSession *)session
                  state:(FBSessionState) state
                  error:(NSError *)error
{
    NSLog(@"Session State Changed: %u", [[FBSession activeSession] state]);
    switch (state) {
        case FBSessionStateOpen:
            break;
        case FBSessionStateClosed:
        case FBSessionStateClosedLoginFailed:
            NSLog(@"FBSessionStateClosedLoginFailed ERROR: %@", [error description]);
            [[FBSession activeSession] closeAndClearTokenInformation];
            break;
        default:
            break;
} 
```

但是，每次重试时我都会收到相同的状态。我的日志说以下内容：

```
FBSDKLog: FBSession **INVALID** transition from FBSessionStateCreated to FBSessionStateClosed
FBSDKLog: FBSession transition from FBSessionStateCreated to FBSessionStateCreatedOpening 
FBSDKLog: FBSession transition from FBSessionStateCreatedOpening to FBSessionStateClosedLoginFailed Session State Changed: 257
FBSessionStateClosedLoginFailed TOKEN: (null)
FBSessionStateClosedLoginFailed ERROR: Error Domain=com.facebook.sdk Code=2 "The operation couldn’t be completed. (com.facebook.sdk error 2.)" UserInfo=0xb24cc20 {com.facebook.sdk:ErrorLoginFailedReason=com.facebook.sdk:ErrorLoginFailedReason} 
```

任何人都可以重现这个或知道问题可能出在哪里吗？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-10-12T16:06:08.083

[另一个答案](https://stackoverflow.com/questions/12601191/facebook-sdk-3-1-error-validating-access-token)提供了一种手动将设备与服务器重新同步的方法。我定义了一个`fbRsync`调用此代码的方法。确保`#import <Accounts/Accounts.h>`在您的实现文件中，然后定义此方法：

```
-(void)fbResync
{
    ACAccountStore *accountStore;
    ACAccountType *accountTypeFB;
    if ((accountStore = [[ACAccountStore alloc] init]) && (accountTypeFB = [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook] ) ){

    NSArray *fbAccounts = [accountStore accountsWithAccountType:accountTypeFB];
    id account;
    if (fbAccounts && [fbAccounts count] > 0 && (account = [fbAccounts objectAtIndex:0])){

    [accountStore renewCredentialsForAccount:account completion:^(ACAccountCredentialRenewResult renewResult, NSError *error) {
        //we don't actually need to inspect renewResult or error.
        if (error){

        }
    }];
} 
```

}

然后我调用`fbResync`if`openActiveSessionWithReadPermissions`产生错误：

```
[FBSession openActiveSessionWithReadPermissions:permissions
                                   allowLoginUI:YES
                              completionHandler:^(FBSession *session, FBSessionState state, NSError *error) {
     if(error)
     {
         NSLog(@"Session error");
         [self fbResync];
         [NSThread sleepForTimeInterval:0.5];   //half a second
         [FBSession openActiveSessionWithReadPermissions:permissions
                                            allowLoginUI:YES
                                       completionHandler:^(FBSession *session, FBSessionState state, NSError *error) {
            [self sessionStateChanged:session state:state error:error];
                                       }];

     }
     else
         [self sessionStateChanged:session state:state error:error];
 }]; 
```

半秒的延迟可能是不必要的，但它目前让我放心。

这似乎解决了我的问题。我现在可以在 Facebook 帐户之间切换并能够登录。耶！

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-08T23:42:51.570

I had the same problem. Check that your FB App is enabled in Settings -> Facebook. Mine was disabled (even though I don't remember disabling it) and once I enabled it, it was fixed.

In my test process, I've added and removed my FB App several times from my FB Account, which is linked with my iPhone. It may explain why, magically, my app was disabled.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-07T07:42:24.630

在带有 fb sdk 3.1.1 的 ios 6 中。请在“[FBSessio openActiveSessionWithReadPermissions...”方法中将权限参数作为“nil 或电子邮件”传递。在这里，我的代码效果很好。

```
#define IOS_NEWER_OR_EQUAL_TO_6 ( [ [ [ UIDevice currentDevice ] systemVersion ] floatValue ] >= 6.0 )

-(void)showFBLogin
{
    [FBSession.activeSession closeAndClearTokenInformation];

    NSArray *permissions = [NSArray arrayWithObjects:@"email, publish_actions, publish_stream", nil];

#ifdef IOS_NEWER_OR_EQUAL_TO_6
    permissions = nil; or NSArray *permissions = [NSArray arrayWithObjects:@"email",nil];
#endif

    NSLog(@"\npermissions = %@", permissions);
    [FBSession openActiveSessionWithReadPermissions:permissions
                                       allowLoginUI:YES
                                  completionHandler:
     ^(FBSession *session,
       FBSessionState state, NSError *error) {
         NSLog(@"\nfb sdk error = %@", error);
         switch (state) {
             case FBSessionStateOpen:
                 [[FBRequest requestForMe] startWithCompletionHandler:
                  ^(FBRequestConnection *connection, NSDictionary<FBGraphUser> *user, NSError *error) {
                      if (!error) {
                          //success
                      } 
                  }];
                 break;
             case FBSessionStateClosed:
                 //need to handle
                 break;
             case FBSessionStateClosedLoginFailed:
                 //need to handle
                 break;
             default:
                 break;
         }
     }];
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-24T12:18:35.100

我在 iOS7.1 的 3.1.3 FB SDK 上遇到了同样的问题。我在这里找到了解决方案。希望有帮助！！
我在这里尝试了所有答案。
@loganathan 无权限，@ill_always_be_a_warriors fbResync。
所有这些都不适合我。

但是我发现当我在 iPhone 7.1 模拟器中启动相同的代码时它会运行良好
（没有 SSO“单点登录”）

相同的代码在旧版本的 iOS FB SDK 上运行良好（不确定哪个版本，但不是 3.13）
（但没有SSO 将在尝试登录时显示）

所以，我尝试重新编写一个示例问题。我在这里发现了几个不同的地方。
1\. [https://developers.facebook.com/docs/ios/getting-started](https://developers.facebook.com/docs/ios/getting-started)添加新的 FacebookDisplayName
2\. 我为 iTune connect 修改了我的 BundleID，但我没有将它更新回 Faceboook App Dev

修改这些设置后，它可以在我的具有 SSO 功能的 iOS 应用程序上运行。
希望有帮助！！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-21T12:27:03.370

您是否尝试过 RenewSystemCredential 方法？看看这个帖子：

[Facebook iOS SDK extendAccessToken 不工作 - 未调用 fbDidExtendToken](https://stackoverflow.com/questions/16650464/facebook-ios-sdk-extendaccesstoken-not-working-fbdidextendtoken-not-being-call)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-21T08:00:12.593

我得到了同样的错误。但是我使用了@ill_always_be_a_warriors 方法：`-(void)fbResync`但对我不起作用。

我终于发现这是我的权限问题，我删除了`offline_access`权限，它有效，希望它对某人有所帮助。

# c# - 处理 WaitForExit()

> ID：12838121
> 
> 赞同：3
> 
> 时间：2012-10-11T11:07:03.500
> 
> 标签：c#

我在我的应用程序中使用以下语句：

```
System.Diagnostics.Process process = new System.Diagnostics.Process();
process.StartInfo.FileName = 'FileName';
process.Start();
process.WaitForExit(900000); // 15 minutes 
```

它是如何工作的？15 分钟后，如果“文件名”仍在运行/执行，会`process.WaitForExit(900000);`终止进程吗？否则执行进入下一条语句而不杀死'FileName'，即'FileName'继续运行直到它执行完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T11:09:48.987

是的，如果由于已过限制而导致限时`WaitForExit`返回，则该过程将继续运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T11:08:39.660

你可以试试

```
Process.CloseMainWindow(); 
```

这将关闭您的应用程序的主窗口，从而顺利结束它。

# c# - 列表 和 IReadOnlyList

> ID：12838122
> 
> 赞同：46
> 
> 时间：2012-10-11T11:07:09.043
> 
> 标签：c#, .net, collections, interface, .net-4.5

如果我有一个需要参数的方法，

*   `Count`有财产_
*   有一个整数索引器（仅获取）

这个参数的类型应该是什么？我会`IList<T>`在 .NET 4.5 之前选择，因为没有其他可索引的集合接口用于此，并且数组实现了它，这是一个很大的优势。

但是 .NET 4.5 引入了新`IReadOnlyList<T>`接口，我希望我的方法也支持它。我怎样才能编写这种方法来支持这两种方法`IList<T>`并且`IReadOnlyList<T>`不违反 DRY 等基本原则？

**编辑**：丹尼尔的回答给了我一些想法：

```
public void Foo<T>(IList<T> list)
    => Foo(list, list.Count, (c, i) => c[i]);

public void Foo<T>(IReadOnlyList<T> list)
    => Foo(list, list.Count, (c, i) => c[i]);

private void Foo<TList, TItem>(
    TList list, int count, Func<TList, int, TItem> indexer)
    where TList : IEnumerable<TItem>
{
    // Stuff
} 
```

* * *

**编辑2：**或者我可以接受`IReadOnlyList<T>`并提供这样的助手：

```
public static class CollectionEx
{
    public static IReadOnlyList<T> AsReadOnly<T>(this IList<T> list)
    {
        if (list == null)
            throw new ArgumentNullException(nameof(list));

        return list as IReadOnlyList<T> ?? new ReadOnlyWrapper<T>(list);
    }

    private sealed class ReadOnlyWrapper<T> : IReadOnlyList<T>
    {
        private readonly IList<T> _list;

        public ReadOnlyWrapper(IList<T> list) => _list = list;

        public int Count => _list.Count;

        public T this[int index] => _list[index];

        public IEnumerator<T> GetEnumerator() => _list.GetEnumerator();

        IEnumerator IEnumerable.GetEnumerator() => GetEnumerator();
    }
} 
```

然后我可以这样称呼它`Foo(list.AsReadOnly())`

* * *

**编辑3：** 数组同时实现`IList<T>`and `IReadOnlyList<T>`，`List<T>`类也是如此。这使得很难找到一个实现`IList<T>`但不实现的类`IReadOnlyList<T>`。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-11T11:19:05.583

你在这里不走运。`IList<T>`没有实现`IReadOnlyList<T>`。`List<T>`确实实现了这两个接口，但我认为这不是你想要的。

但是，您可以使用 LINQ：

*   扩展方法在`Count()`内部检查实例是否实际上是一个集合，然后使用该`Count`属性。
*   扩展方法在`ElementAt()`内部检查实例是否实际上是一个列表，然后使用索引器。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-11T11:26:08.093

由于`IList<T>`并且`IReadOnlyList<T>`不共享任何有用的“祖先”，并且如果您不希望您的方法接受任何其他类型的参数，那么您唯一能做的就是提供两个重载。

如果您决定重用代码是首要任务，那么您可以让这些重载将调用转发给以 Daniel 建议的方式`private`接受`IEnumerable<T>`和使用 LINQ 的方法，实际上让 LINQ 在运行时进行规范化。

但是恕我直言，最好只复制/粘贴一次代码并保留两个独立的重载，这些重载仅在参数类型上有所不同；我不相信这种规模的微架构提供任何有形的东西，另一方面它需要不明显的操作并且速度较慢。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-11T15:33:56.217

如果您更关心维护[DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)的原则而不是性能，您*可以*使用[`dynamic`](http://msdn.microsoft.com/en-us/library/dd264736.aspx)，如下所示：

```
public void Do<T>(IList<T> collection)
{
    DoInternal(collection, collection.Count, i => collection[i]);
}
public void Do<T>(IReadOnlyList<T> collection)
{
    DoInternal(collection, collection.Count, i => collection[i]);
}

private void DoInternal(dynamic collection, int count, Func<int, T> indexer)
{
    // Get the count.
    int count = collection.Count;
} 
```

但是，我不能真诚地说我会推荐这个，因为陷阱太大了：

*   每次调用`collection`都`DoInternal`将在运行时解决。你失去了类型安全、编译时检查等。
*   性能下降（虽然不严重，对于单一情况，但可以在聚合*时*发生）

您的帮助建议是最有用的，但我认为您应该翻转它；鉴于该[`IReadOnlyList<T>`接口](http://msdn.microsoft.com/en-us/library/hh192385.aspx)是在 .NET 4.5 中引入的，许多 API 不支持它，但支持该[`IList<T>`接口](http://msdn.microsoft.com/en-us/library/5y536ey6.aspx)。

也就是说，您应该创建一个`AsList`包装器，它在实现中接受`IReadOnlyList<T>`并返回一个包装器`IList<T>`。

但是，如果您想强调您正在使用的 API `IReadOnlyList<T>`（强调您没有改变数据的事实），那么`AsReadOnlyList`您现在拥有的扩展会更合适，但我会进行以下优化至`AsReadOnly`：

```
public static IReadOnlyList<T> AsReadOnly<T>(this IList<T> collection)
{
    if (collection == null)
        throw new ArgumentNullException("collection");

    // Type-sniff, no need to create a wrapper when collection
    // is an IReadOnlyList<T> *already*.
    IReadOnlyList<T> list = collection as IReadOnlyList<T>;

    // If not null, return that.
    if (list != null) return list;

    // Wrap.
    return new ReadOnlyWrapper<T>(collection);
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-06-28T22:28:33.487

您需要的是[`IReadOnlyCollection<T>`](https://docs.microsoft.com/en-us/dotnet/api/system.collections.generic.ireadonlycollection-1?view=netframework-4.7.1).Net 4.5 中的可用内容，它本质上是`IEnumerable<T>`具有`Count`属性的，但如果您也需要索引，那么您也需要`IReadOnlyList<T>`提供索引器。

我不了解你，但我认为这个界面是必不可少的，它已经丢失了很长时间。

# sql-server-2008 - 将 SVN 添加到 SQL Server 2008

> ID：12838123
> 
> 赞同：1
> 
> 时间：2012-10-11T11:07:11.873
> 
> 标签：sql-server-2008, svn

我想知道是否有任何工具，或者在 SQL Server 2008 中控制数据库。

我已经尝试过 RedGate 的 Agent SVN 和 SQL Source Control 3.0，但它们都是 [1]>免费或<对我的口袋来说太贵了。

我也试过[http://www.codeproject.com/Articles/15962/SQL-Server-database-versioning-with-Subversion-SVN](http://www.codeproject.com/Articles/15962/SQL-Server-database-versioning-with-Subversion-SVN)但它已经过时了......

有什么建议吗？我应该尝试什么？

我想要的是在数据库内部所做的更改中的源代码控制，而不是在生成它的文件中。

编辑：[1] 两者都太贵了，不是免费的

# c# - TouchDown 事件被延迟

> ID：12838124
> 
> 赞同：3
> 
> 时间：2012-10-11T11:07:17.187
> 
> 标签：c#, .net, wpf, windows-7, touch

我的应用程序`UiElement.TouchDown`在各个地方都使用了该事件，其中之一是让用户停止纺车。在这种情况下，我们很容易注意到在实际触摸屏幕和 TouchDown 事件之间存在大约 1/3 秒的短暂延迟。

我设置`Stylus.IsPressAndHoldEnabled`为假。

为了解决这个问题，我写了一个测试工具，报告WPF事件和原生窗口消息，我注意到一触屏，就会生成id为0x02CC、0x011B和0x011A的消息，大约100到300在 TouchDown 事件之前的毫秒。这使我相信驱动程序会快速报告触摸，并且延迟会在 WPF 翻译的稍后位置引入。

有没有办法让触摸交互反应更灵敏？请询问您需要的任何信息！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T21:33:12.993

除非需要在 XAML 中设置 Flicks 或在后面的代码中手动设置：（我假设您的意思是说 IsPressAndHoldEnabled 而不是 IsTouchAndHoldEnabled）

```
Stylus.IsPressAndHoldEnabled="False" Stylus.IsFlicksEnabled="False" 
```

此外考虑处理 TouchDown 事件并将其捕获到相关的 UIElement（不要忘记在 TouchUp 中释放它）。

```
uielement.CaptureTouch(e.TouchDevice);
e.Handled = true; 
```

# django - Django：在所有模板中定义模板上下文处理器而不创建新视图

> ID：12838126
> 
> 赞同：-1
> 
> 时间：2012-10-11T11:07:24.953
> 
> 标签：django, django-templates

我需要在我的所有模板中获取一个环境变量（例如：Mixpanel_Token），而**无需在 Django 中创建新视图**。

根据我在 SO 上阅读的内容，我应该使用模板上下文处理器。

context_processor 在 context_processors.py 文件中定义：

```
from django.conf import settings
def settings_mixpanel(request):
    ctx = {
        "MIXPANEL_TOKEN": settings.MIXPANEL_TOKEN,
    }
    return ctx 
```

在我的 settings.py 文件中：

```
TEMPLATE_CONTEXT_PROCESSORS = (
'utils.context_processors.settings_mixpanel',
) 
```

我遇到的问题是如何`MIXPANEL_TOKEN`在我的所有模板中定义为上下文变量，因为我的所有视图都已经在 Django 中创建。

我**不想**使用`render_to_response`函数重新创建如下视图：

```
 def index(request):
    return render_to_response("index.html", {},context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T11:18:08.953

你不需要做任何特别的事情。只要您的模板是使用 呈现的`RequestContext`，您就可以使用 访问您的变量`{{ MIXPANEL_TOKEN }}`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T11:55:03.133

这非常简单直接：上下文处理器由 RequestContext(...) 调用。如果您不使用 RequestContext(...)，则不会使用上下文处理器，因此将没有任何价值。你不一定需要使用render_to_response，但RequestContext是必须的。不管你喜不喜欢，这就是 Django 的工作方式。但是从我个人的角度来看，改变你现有的视图来使用 RequestContext 并不是什么大事，不是吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-20T00:04:19.847

因为 Django 1.8 为模板注册自定义上下文处理器是通过以下方式发生的：`TEMPLATES-> OPTIONS -> context_processors`请参阅此处以供参考：[https ://docs.djangoproject.com/en/1.10/ref/templates/upgrading/#the-templates-settings](https://docs.djangoproject.com/en/1.10/ref/templates/upgrading/#the-templates-settings)

# android - 设备移动时的位置跟踪

> ID：12838127
> 
> 赞同：3
> 
> 时间：2012-10-11T11:07:27.220
> 
> 标签：android, location

我正在开发一个应用程序，专门在设备移动时跟踪设备的位置。对于相同的 API 调用，我在具有不同操作系统版本的三星和 HTC 设备中得到不同的响应。

这是我的代码。

`private static final long HUNDERE_METERS = 100; // in Meters`
`private static final long TWO_MIN = 60000*2; // in Milliseconds`

```
Criteria criteria = new Criteria();
criteria.setAccuracy(Criteria.ACCURACY_FINE);
criteria.setBearingRequired(true);
criteria.setBearingAccuracy(Criteria.ACCURACY_HIGH);
criteria.setHorizontalAccuracy(Criteria.ACCURACY_HIGH);
String provider = mlocManager.getBestProvider(criteria, false);
mlocManager.requestLocationUpdates(provider, TWO_MIN, HUNDERE_METERS, mlocListener); 
```

'Samsung Galaxy Nexus-4.1.1' 提供每移动 HUNDRED_METERS（100 米）距离的位置更新，这很好。但在“HTC EVO 3D PG86100-4.0.3”中，GPS 在 2 分钟内不可用，然后变为可用，这导致每 2 分钟更新一次位置。

我修改了代码如下

```
mlocManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, TWO_MIN, HUNDERE_METERS, mlocListener); 
```

现在 HTC 开始正常工作，并为每移动 100 米的距离提供位置，但在三星 GPS 中每 2 分钟不可用。

请建议我应该用什么参数调用 requestLocationUpdates 来获取移动所需距离的距离的位置更新，这应该适用于所有 Android 设备和操作系统。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T04:50:33.987

在 Android 4.1 Jelly Bean 之前，根据 Android Location API 规范，minTime 和 minDistance 参数只是应用程序想要保存能量的设备的“提示”。

OEM 实际上可以按照他们的意愿实现这一点，这会导致各种 Android 设备上出现一些不一致的行为。因此，在 Android 4.1 之前，当使用相同的 minTime 和 minDistance 参数时，您会在不同的设备上看到各种行为。

这种不一致的行为中包含一个错误，该错误会影响完全忽略 minTime 参数的许多不同设备。有关详细信息，请参阅与 Android 团队的对话：

[https://android-review.googlesource.com/#/c/34230/](https://android-review.googlesource.com/#/c/34230/)

从 Android 4.1 开始，Location API 规范得到了加强，并添加了额外的 CtsVerifier 测试以在 Android 设备上强制执行更一致的行为。

Android 4.1 及更高版本的预期行为是：

“可以使用 minTime 参数控制更新间隔。位置更新之间的经过时间永远不会小于 minTime，尽管它可能更多取决于位置提供程序的实现和其他应用程序请求的更新间隔。

...

minDistance 参数还可用于控制位置更新的频率。如果它大于 0，那么位置提供程序将仅在位置已更改至少 minDistance 米并且至少 minTime 毫秒已过去时向您的应用程序发送更新。然而，位置提供者使用 minDistance 参数来节省电量更加困难，因此 minTime 应该是节省电池寿命的主要工具。

...

在 Jellybean 之前，minTime 参数只是一个提示，一些位置提供程序实现忽略了它。从 Jellybean 开始，Android 兼容设备必须遵守 minTime 和 minDistance 参数。”

来自： http: [//developer.android.com/reference/android/location/LocationManager.html#requestLocationUpdates](http://developer.android.com/reference/android/location/LocationManager.html#requestLocationUpdates(java.lang.String,long,float,android.location.LocationListener) (java.lang.String,long,float,android.location.LocationListener )

# iphone - Xcode 无法识别 iPhone“启动图像”

> ID：12838129
> 
> 赞同：0
> 
> 时间：2012-10-11T11:07:38.557
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我正在使用 XCode 4.5。我注意到 XCode 无法检测到仅适用于 iPhone 和 iPhone（3.5 英寸）的“**启动图像**”，但对于 Retina（4 英寸）和 iPad，它们还可以。

我的文件列表：

```
Default-568h@2x.png (OK)
Default-Portrait@2x~ipad.png (OK)
Default-Portrait~ipad.png (OK)
Default.png (Not shown in summary page)
Default@2x.png (Not shown in summary page) 
```

有什么理由或者我应该为这些文件取一个更好的名称吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T05:06:57.393

你可以试试 iPhone：

*   默认-iphone.png
*   默认@2x-iphone.png

# java - 带有弹簧源的存储库在哪里

> ID：12838130
> 
> 赞同：1
> 
> 时间：2012-10-11T11:07:44.497
> 
> 标签：java, spring, maven

在 spring 和 cantral repo 中，我可以找到例如`spring-support-2.0.8.jar`，但是我应该将什么 repo 添加到我的 pom 以使我的 ide 自动下载源？我没有看到任何回购`spring-support-2.0.8-sources.jar`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T11:29:03.193

不幸的是，并非所有 Spring 版本都使用源代码进行部署。简而言之，从 2.5 版开始，所有 Spring JAR 都带有源代码。

如果源丢失，那么您将不得不在其他地方找到它并手动将其添加到您的项目中，或者您可以在您的公司安装 Maven 镜像并在将源打包到 JAR 文件中后在那里部署源。

我建议尝试升级到 Spring 2.5。较新版本的 Spring 通常会替换旧版本。大多数情况下，升级需要几个小时。

`spring-support`Spring 2.5 中不再存在；那里的课程现在在`spring-context-support`.

您可以使用`fc:`前缀查找包含缺失类的 JAR：[http ://search.maven.org/#search%7Cga%7C1%7Cfc%3Aorg.springframework.mail](http://search.maven.org/#search%7Cga%7C1%7Cfc%3Aorg.springframework.mail)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T11:32:06.700

正如[寻找 spring-hibernate3-2.0.8 来源](https://stackoverflow.com/questions/3491925/looking-for-spring-hibernate3-2-0-8-sources)所提到的，当时的源 jar 并没有一致地发布。该问题的建议是：

> 获取旧单体的来源[`spring-2.0.8-sources.jar`](http://repo2.maven.org/maven2/org/springframework/spring/2.0.8/spring-2.0.8-sources.jar)

# servicestack - 如何使用 ServiceStack Session 跨域？

> ID：12838134
> 
> 赞同：0
> 
> 时间：2012-10-11T11:08:01.903
> 
> 标签：servicestack

我是 ServiceStack 新手。谢谢你的好工作。我遇到了关于 Session 的问题。有两个项目，一个是ServiceHost，另一个是ASP.NET MVC 3 网站。ServiceHost 用于请求 Dto、响应 Dto 和服务定义。对于使用过的 ServiceStack 会话，我向 IOC 注册了一个新的会话功能插件和缓存客户端。所有这些都在服务主机项目中。如何在 MVC 项目中使用 ServiceStack 会话？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T12:06:12.770

[从ServiceStackController](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.FluentValidation.Mvc3/Mvc/ServiceStackController.cs)基类继承提供了对 ServiceStack 的[类型化](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.FluentValidation.Mvc3/Mvc/ServiceStackController.cs#L63)和[非类型化会话包](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.FluentValidation.Mvc3/Mvc/ServiceStackController.cs#L78)的访问。

ServiceStackController 在[ServiceStack.Mvc](http://nuget.org/packages/ServiceStack.Mvc)和[ServiceStack.Host.Mvc](http://nuget.org/packages/ServiceStack.Host.Mvc) NuGet 包中可用。

有关 ServiceStack 会话的更多信息包含在[Session wiki](https://github.com/ServiceStack/ServiceStack/wiki/Sessions)中。

# java - Java中的正则表达式模式匹配

> ID：12838135
> 
> 赞同：0
> 
> 时间：2012-10-11T11:08:05.487
> 
> 标签：java, regex, match, filenames

请我需要帮助来完成以下任务：

我在数组中有许多如下文件：

```
jack+0.txt
jack+2.txt
jack+4.txt
tim+0.txt
tim+2.txt
tim+4.txt
raph+0.txt
raph+2.txt
raph+4.txt
wells+0.txt
wells+2.txt
wells+4.txt
etc. 
```

我想编写一个程序来执行以下操作：

```
if the filename is like *0.txt, a++;
if the filename is like *2.txt, b++;
if the filename is like *4.txt, c++; 
```

需要的核心帮助是使用正则表达式（在 Java 中）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T14:51:15.393

这个想法，如果你有少量不同的结局：

```
if (filename.endsWith("0.txt")) a++; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T14:51:36.750

我只会在加号上进行字符串拆分，然后检查第二部分。

```
String[] parts = s.split("+");
if (parts[1].equals("0.txt") {

} else // the rest of the tests 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T14:51:53.320

```
for (File file : files) {
    if (file.getName().matches(".*0[.]txt") {
        a++;
    } else if ...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T14:53:17.717

这将从文件名中取出数字，然后你可以做一个 switch case

```
string filename;

int category = Integer.parseInt(filename.substring(filename.length() - 5, filename.length() - 4)) 
```

# sharepoint-2010 - SharPoint 2010 wsp 部署在服务器场环境中太慢

> ID：12838142
> 
> 赞同：1
> 
> 时间：2012-10-11T11:08:29.583
> 
> 标签：sharepoint-2010, web-deployment

一开始，我们在亚洲有 1 台应用服务器、2 台 Web 前端服务器和数据库服务器。部署解决方案（wsp 文件）很快。将瑞典的 WFE 服务器添加到服务器场后，部署解决方案（wsp 文件）变得非常缓慢。部署时间超过 5 个小时。我们已经调整了 TimeZone，但它仍然无法正常工作。有谁知道部署如此缓慢的原因，或者有没有办法检测部署过程？

# objective-c - 使用 OCMock 模拟块期望

> ID：12838143
> 
> 赞同：4
> 
> 时间：2012-10-11T11:08:35.527
> 
> 标签：objective-c, ios, ocmock

我是 OCMock 的新手，我打算模拟一个请求调用。需要模拟的 API 按如下定义执行。

```
 [ProductRequest requestProductUpdateUrl: @"testUrl" withParameters:params   error:^(NSString *updateUrl, NSError *error){
        if (!error && [updateUrl length] !=0 ) {
           NSLog(@"Success");
        } else {
             NSLog(@"Error");
        }
   }]; 
```

关于如何`requestProductUpdateUrl`使用 OCMock 模拟该方法的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-28T20:23:11.927

这个功能还没有实现，虽然我认为他们正在努力。我也必须做这样的事情：

```
semaphore = dispatch_semaphore_create(0);
[myObject myFunctionWithCallback:^(BOOL success){
     if(success)
        dispatch_semaphore_signal(semaphore);
     else
        STFail(@"Call failed"); dispatch_semaphore_signal(semaphore);

}];
[self waitForSemaphore]; 
```

使用等待功能是这样的：

```
- (void)waitForSemaphore;
{
float step_duration = .1;
float wait_steps = 2 / step_duration;
while (dispatch_semaphore_wait(semaphore, dispatch_time(DISPATCH_TIME_NOW, NSEC_PER_SEC / 10)) && wait_steps > 0){
    CFRunLoopRunInMode(kCFRunLoopDefaultMode,step_duration, YES);
    wait_steps--;
}

if (wait_steps <= 0) {
    STFail(@"Timeout!");
} 
```

}

# flash - 有没有办法将在 Flash 中创建的形状转换为 Actionscript 2 代码？

> ID：12838144
> 
> 赞同：0
> 
> 时间：2012-10-11T11:08:35.157
> 
> 标签：flash, actionscript, actionscript-2

我有一个在 Flash 中绘制的简单形状，我想知道是否可以将该形状转换为 actionscript 2 代码，以便由代码绘制而不是`fla`文件中的符号。

原因是我有一个`global.as`用于 4 个不同应用程序的共享 actionscript 文件，并且出于维护目的，我不想将此形状添加到每个应用程序中。有没有一种简单的转换方法或者我必须从头开始编码？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T12:31:27.887

我不是 100% 确定这会对你有所帮助，但我听说其他人使用这种方法来完成类似的任务......

如果您使用的是 Flash CS5.5，您可以将 FLA 保存为 .XFL 文件，然后将 Flash 项目库（您的多边形）中的所有对象导出到实际 .FLA 之外的单独的 AS 或 XML 文件中。完成此操作后，您可以简单地找到代码并将其复制/粘贴或导入到您现有的项目中。当您选择“另存为...”时，您选择所有新文件的放置位置，它们会自动命名或按电影剪辑名称命名，因此您必须解析它们。

如果你尝试这个，请告诉我，如果它对你有用..可能是我以后尝试的东西：）祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T12:02:16.907

[这里](http://www.box2d.org/forum/viewtopic.php?f=8&t=463)有一个`jsfl`脚本，可以将形状的多边形和顶点输出到输出面板。显然它很大程度上基于这个[Adob​​e 示例](http://livedocs.adobe.com/flash/9.0/main/wwhelp/wwhimpl/common/html/wwhelp.htm?context=LiveDocs_Parts&file=00003808.html#wp461362)。我想您可以直接使用其中之一，或者修改它们以满足您的需要，这样您就可以获得使用绘图 API 重新绘制形状所需的信息。`ActionScript`

# wcf - 迷你分析器 WCF

> ID：12838149
> 
> 赞同：4
> 
> 时间：2012-10-11T11:08:50.663
> 
> 标签：wcf, mvc-mini-profiler

我正在尝试将 mini profiler 与 WCF 一起使用。我不断收到 404 错误：

```
http://website/mini-profiler-resources/results 
```

没有返回结果。

我正在使用两个版本的迷你分析器。不支持 WCF 的 NUGET 版本工作得很好。

我下载了 git 版本，以便可以使用 WCF 集成。我注意到，如果我运行源“Sample.Mvc”中包含的测试项目，则在执行主页时会发生相同的错误，但对于某些链接则不会。我似乎无法为我自己的任何网站页面获得结果。发生相同的 404。

我已经下载了主版本。我正在使用 .NET 4.0 和 studio 2010。

*我在配置文件中有以下内容，我尝试过使用和不使用处理程序。*

```
 <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <modules runAllManagedModulesForAllRequests="true" />
    <handlers>
      <add name="MiniProfiler" path="mini-profiler-resources/*" verb="*" type="System.Web.Routing.UrlRoutingModule" resourceType="Unspecified" preCondition="integratedMode" />
    </handlers>
  </system.webServer> 
```

*我肯定是在调用 start 和 stop 方法。*

```
StackExchange.Profiling.MiniProfiler.Stop(); 
```

我读过这个：[MvcMiniProfiler results requestgiving 404 in Asp.Net MVC app](https://stackoverflow.com/questions/6497180/mvcminiprofiler-results-request-giving-404-in-asp-net-mvc-app)

它没有帮助。

**我找到了有关问题的线索**

miniprofiler 中的以下代码返回 NotFound 分析器期望存在某种 guid 值，但事实并非如此。

```
private static string Results(HttpContext context) {

    // this guid is the MiniProfiler.Id property
    Guid id;
    if (!Guid.TryParse(context.Request["id"], out id))
       return isPopup ? NotFound(context) : NotFound(context, "text/plain", "No Guid id specified on the query string"); 
```

**临时修复**

我取出上面的代码，刚刚从存储中收集了第一个 guid，这解决了问题。我认为这段代码需要清理。我需要学习 GIT，然后尝试自己清理它。

```
var id = MiniProfiler.Settings.Storage.List(10).FirstOrDefault(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T12:10:28.293

你能看到 .../mini-profiler-resources/results-index 吗？

顺便说一句，处理程序不需要。您的链接中有一个逗号，但假设这只是一个问题错字。

你是在叫开始最后一件事，`Application_BeginRequest()`然后停在`Application_EndRequest()`

你定了`GlobalFilters.Filters.Add(new ProfilingActionFilter());`吗？

并且您是否将 WebActivator 与一个`MiniProfilerPackage`和`MiniProfilerStartupModule`

Think I need to tidy up my own implementation as looks like I have some unnecessary cruft.

# c# - C# Linq 一次调用 DB 获取多个列表

> ID：12838150
> 
> 赞同：0
> 
> 时间：2012-10-11T11:08:56.337
> 
> 标签：c#, linq

收到：

```
var ApprovalRoleRefList = db.ApprovalRoles.Select(x => x.ApprovalRoleName);
var CostDivisionRefList = db.CostDivisions.Select(x => x.CostDivisionName); 
```

如果我想用 linq 一次调用 DB，我该怎么做？

这不是我想要的：

```
var lists = (from ar in db.ApprovalRoles select ar.ApprovalRoleName).Concat (
from cd in db.CostDivisions select cd.CostDivisionName); 
```

在该项目中，我又得到了 3 个列表，但是有 1 个电话或 5 个电话是“糟糕的表现”吗？我知道这部分不会用那么多，但优化它很有趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T11:40:56.370

我不得不说乔恩提出了一个非常好的观点，我将在这里谈谈。显然，往返一次以上比往返五次更昂贵，但仅限于最简单的水平。此外，也不是永远不需要此功能。考虑一下Stack Overflow 实际上使用的[Dapper ，它具有完全执行您正在寻找的功能的功能。](http://code.google.com/p/dapper-dot-net/)因此，功能存在这一事实告诉我，即使是 Stack Overflow 也需要在某一时刻执行此操作。

但是，在将自己与 Stack Overflow 的需求进行比较之前，让我们考虑一下为什么 Stack Overflow 可能需要此功能。[截至 2010 年](https://meta.stackexchange.com/questions/38263/what-is-the-total-number-of-hits-day-for-stack-overflow)，他们每天的点击量约为 150 万。好吧，当您获得如此多的命中时，您需要使用**许多**不同的技术，而往返是这些技术中***最少***的。极限缓存、负载平衡、服务器群、分布式计算等等。

所以简而言之，在没有完全了解您的应用程序的情况下，我要说的是，除非您落入 Stack Overflow 的船，每天发出数百万次读取和写入，否则您正在优化一些实际上不会产生任何变化的东西。因此，5 次往返是正确的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T14:13:20.193

如果您必须在一个请求中返回结果，LINQ to SQL 确实支持来自存储过程的多个结果集。看看[http://www.thinqlinq.com/Post.aspx/Title/Using-LINQ-to-SQL-to-return-Multiple-Results](http://www.thinqlinq.com/Post.aspx/Title/Using-LINQ-to-SQL-to-return-Multiple-Results)看看是否能满足您的需求。

# javascript - 将 javascript 对象拆分为键值数组

> ID：12838155
> 
> 赞同：1
> 
> 时间：2012-10-11T11:09:02.843
> 
> 标签：javascript, arrays, hash

试图将 javascript 对象拆分为哈希数组。我必须根据符号“|”的出现来拆分数组内的内容

我的输入数组看起来像

```
{
      "testFieldNames": ["testNumber", "testName", "testDate1", "testDate2"]
},
"data": [
    "4|Sam|2012-02-10T00:00Z",
    "0|Wallace|1970-01-01T00:00Z|2012-02-10T00:00Z"
 ]
}; 
```

并且预期的输出是`[{"testNumber" : "4", "testName" : "Sam", "testDate1" : "2012-02-10T00:00Z", "testDate2" : "0"},{"testNumber" : "0", "testName" : "Wallace", "testDate1" : "1970-01-01T00:00Z", "testDate2" : "2012-02-10T00:00Z"}]`

这是我尝试过的..但它并不完整。

[http://jsfiddle.net/Dwfg​​6/1/](http://jsfiddle.net/Dwfg6/1/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T11:20:45.983

```
var header = responseData.header.testFieldNames,
    length = header.length,
    result;
result = responseData.data.map(function(el) {
    var ret = {}, data = el.split('|'), i;
    for (i=0; i < length; i++) {
      ret[header[i]] = data[i];
    }
    return ret;
});

console.log(result); 
```

***[演示。](http://jsfiddle.net/Dwfg6/2/)***（*注意：您可以使用 jQuery.map 方法代替旧浏览器。*）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T11:24:06.263

你很亲近...

[http://jsfiddle.net/Dwfg​​6/4/](http://jsfiddle.net/Dwfg6/4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T11:36:48.940

```
var responseData = {
    "header": {
        "testFieldNames": ["testNumber", "testName", "testDate1", "testDate2"]
    },
    "data": [
        "4|Sam|2012-02-10T00:00Z|2012-02-10T00:00Z",
        "0|Wallace|1970-01-01T00:00Z|2012-02-10T00:00Z"
        ]
};

function buildData(fields, data) {
    var output = [];
    if (fields && fields.length && data && data.length) {
        for (var i = 0; i < data.length; i++) {
            var row = data[i].split("|");
            output[i] = {};
            while (row.length) {
                output[i][fields[4 - row.length]] = row.shift();
            }
        }
    }
    return output;
}

console.log(buildData(responseData.header.testFieldNames, responseData.data)); 
```

小提琴：http: [//jsfiddle.net/FjJse/1/](http://jsfiddle.net/FjJse/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T12:16:17.177

我的答案：

[小提琴](http://jsfiddle.net/HnSqA)

```
function mapData (data) {
    'use strict';

    var result=[];
    var i, j;
    var values = [];
    var resultObj;

    for(i=0; i < data.testFieldValues.length; i += 1) {
        values = data.testFieldValues[i].split("|");
        resultObj = {};
        for(j = 0; j < data.testFieldNames.length; j += 1) {
            resultObj[data.testFieldNames[j]] = values[j];
        }
        result.push(resultObj);
    }
    return result;
}

//$(document).ready(function() {
//    'use strict';

    var data = {testFieldNames: ["testNumber", "testName", "testDate1", "testDate2"],
                testFieldValues: [
                    "4|Sam|2012-02-10T00:00Z|2012-02-10T00:00Z",
                    "0|Wallace|1970-01-01T00:00Z|2012-02-10T00:00Z"
                ]
               };

    console.log(mapData(data));
//});
    /*Expected Output [{"testNumber" : "4", "testName" : "Sam", "testDate1" : "2012-02-10T00:00Z", "testDate2" : "2012-02-10T00:00Z"},{"testNumber" : "0", "testName" : "Wallace", "testDate1" : "1970-01-01T00:00Z", "testDate2" : "2012-02-10T00:00Z"}]*/ 
```

在 Chrome 中按 F12 以查看控制台，或在 FireFox 中打开 FireBug 或在 Opera 中打开 LadyBug 等。

# c# - 使用 linq 查询字典

> ID：12838156
> 
> 赞同：-2
> 
> 时间：2012-10-11T11:09:04.683
> 
> 标签：c#, linq, dictionary

我有一本建立在下面的字典

```
Dictionary<string, string> GTNMobilelist = new Dictionary<string, string>();
GTNMobilelist = LoadMobileNumbers(); 
```

然后我需要查询字典以检查字典“希望有意义”中是否存在已输入到文本框中的手机号码：-/

这就是我所拥有的

```
foreach (GridViewRow HandSetRow in grdvHandSets.Rows)
{
   TextBox txtmobileNumber = (TextBox)HandSetRow.FindControl("txtmobilenumber");

   //I need the linq statement here if the mobile number doesnt exists i need to
   //throw an error saying mobile number doesnt exist within the dictionary
   //iv been looking at linq statements for the past hour and im confused :(
} 
```

任何人都可以帮助我快速解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T11:18:17.720

在这里使用 LINQ 没有意义。使用`ContainsKey`或`ContainsValue`代替。

```
if (!GTNMobilelist.ContainsValue(txtmobileNumber.Text))
    ShowErrorMessage(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T11:13:52.707

下次，将您的代码发布到现在，然后我们可以指出任何错误。

我不清楚电话号码是在键中还是在值中，但这样的东西应该可以工作。

按键检查：

```
string phoneNumberToLookFor = "12345678";
bool phoneNumberExists = GTNMobilelist.Any(kvp => kvp.Key == phoneNumberToLookFor); 
```

或者，按值检查：

```
string phoneNumberToLookFor = "12345678";
bool phoneNumberExists = GTNMobilelist.Any(kvp => kvp.Value == phoneNumberToLookFor); 
```

# joomla - Joomla 分页错误

> ID：12838166
> 
> 赞同：0
> 
> 时间：2012-10-11T11:09:33.113
> 
> 标签：joomla, pagination, joomla2.5, joomla1.7, joomla1.6

```
 $limit   = $this->_app->getUserStateFromRequest('global.list.limit', 'limit', $this->_app->getCfg('list_limit'), 'int');
    $limitstart = $this->_app->getUserStateFromRequest(OPTIOIN_NAME.'.limitstart', 'limitstart', 0, 'int');
    $limitstart = ($limit != 0 ? (floor($limitstart / $limit) * $limit) : 0); // In case limit has been changed 
```

EG：PAGES 1 -> 将记录数设置为 10，当我转到 PAGES 2 -> 分页自动设置为 10。我想为不同的页面设置不同的分页设置。

它的作用是，它保留一个全局变量。所以即使我移动到另一个页面，这些分页设置也会被保存和应用。如果我改变`OPTIOIN_NAME.'.limitstart'`或改变`'global.list.limit'`它给我的其他东西`Warning: Attempt to assign property of non-object in D:\wamp\www\jink\libraries\joomla\registry\registry.php on line 342`。我怎样才能在不破坏代码的情况下解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T12:42:12.467

```
function __construct() 
{
    $this->_app =& JFactory::getApplication();
    parent::__construct();

    // Get pagination request variables
    $limit = $this->_app->getUserStateFromRequest(OPTIOIN_NAME.'.bs.limit', 'limit', $this->_app->getCfg('list_limit'), 'int');
    $limitstart = $this->_app->getUserStateFromRequest(OPTIOIN_NAME.'.bs.limitstart', 'limitstart', 0, 'int');

    // In case limit has been changed, adjust it
    $limitstart = ($limit != 0 ? (floor($limitstart / $limit) * $limit) : 0);

    // Set States
    $this->setState(OPTIOIN_NAME.'.bs.limit', $limit);
    $this->setState(OPTIOIN_NAME.'.bs.limitstart', $limitstart);
}

function pagination()
{
    if($this->_pagination == NULL)
        $this->_pagination = new JPagination(20, $this->getState(OPTIOIN_NAME.'.bs.limitstart'), $this->getState(OPTIOIN_NAME.'.bs.limit'));
    return $this->_pagination;
} 
```

在构造函数中获取值并将其设置为会话。应该在控制器中调用分页函数。

在 getList 或您希望限制行的任何函数中

```
// Set the Limits and Filters
$limit = $this->getState(OPTIOIN_NAME.'.bs.limit');
$limitstart = $this->getState(OPTIOIN_NAME.'.bs.limitstart');

//setup the pagination
$this->_pagination = new JPagination($total, $limitstart, $limit);     

//get the data within limits
$this->_data = $this->_getList($query, $limitstart, $limit);   

//$total is the total number of rows return by the count(*) query. 
```

# sql - firebird sql 月时间累计

> ID：12838169
> 
> 赞同：-1
> 
> 时间：2012-10-11T11:09:37.947
> 
> 标签：sql, timestamp, firebird

我正在尝试从我的 firebird 数据库中获取以下信息：我有一个带有时间戳属性的记录和一个带有货币值的属性。现在我想查询按月累积的货币价值，现在对我来说很棘手：我希望每个月从第一天下午 16:30:00 到下个月的下一个第一天 16:29:59 . 我不确定如何在 where 条件或其他地方添加它？谢谢你帮助我！

例如。时间戳值
...
2012-07-31 17:05:03 23,--
2012-08-01 12:23:15 15,--
剪切：
2012-08-01 16:35:56 25,--
2012 -08-02 12:23:15 5,--
2012-08-25 18:03:34 6,--
2012-08-31 08:03:55 9,--
2012-09-01 12:23: 15 7,--
截止：
2012-09-01 16:47:43 3,--
2012-09-02 19:13:10 8,--
2012-09-10 19:13:10 18,--
2012 -09-30 19:13:10 3,--
2012-10-02 19:13:10 8,--
....

七月: 23,-- + 15,-- = 38,-
八月: 52,--
九月: 32, -- 十月
: 8,-- 以此类推...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T18:15:30.260

您需要将日期向后（或向前）移动，以便本月的开始时间落在该月第一天的 00:00，然后简单地按时间戳的年份和月份部分进行分组：

通过一个简单的表格，我得到了预期的结果：

```
WITH shifteddate AS (
    SELECT DATEADD(MINUTE, -30, DATEADD(HOUR, -16, infodate)) shifteddate, infovalue
    FROM SUMEXAMPLE
)
SELECT EXTRACT(YEAR FROM shifteddate), EXTRACT(MONTH FROM shifteddate), SUM(infovalue)
FROM shifteddate
GROUP BY 1, 2 
```

您也可以使用子查询而不是 CTE，但我只是觉得这更容易阅读。

# javascript - Dom 加载层次结构

> ID：12838170
> 
> 赞同：1
> 
> 时间：2012-10-11T11:09:40.160
> 
> 标签：javascript, html, css, dom, scripting

我已经找了一段时间了，发现了一次，但又找不到了，不同的东西按什么顺序加载到 DOM 中？

比如css、html、脚本等等？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T11:12:37.960

它们在页面中出现的顺序相同

延迟加载，如 : `document.onreadystatechange`, `window.load`, `defer`attritube (for script tag) , injection html (async) --won't 。

OP询问了他们在dom中加载的顺序。

一旦浏览器看到：

```
<img class="a"/>
<img class="b"/>
<img class="c"/> 
```

他不在乎 src 是 900 mb 还是 1 k。

这是将在 dom 中加载的顺序。

再次（不是在谈论推迟）。

[http://jsbin.com/uyocaq/2/edit](http://jsbin.com/uyocaq/2/edit)

# iphone - 安装 RestKit 的问题

> ID：12838172
> 
> 赞同：0
> 
> 时间：2012-10-11T11:09:51.130
> 
> 标签：iphone, objective-c, ios, restkit

我曾尝试将 Restkit 安装到我的项目中，但是我遇到了太多错误，我不知道为什么，因为我上周将 Restkit 安装到了另一个项目中。我在其网站上遵循了本教程的每一步，当我导入 Restkit 并编译时，我收到以下错误：

![屏幕截图错误](../Images/79b5ec0534cdacf14edfd8f4f86a52c3.png)

在其下方，出现另一条消息：“Apple LLVM 编译器 4.1 错误”“发出的错误太多，现在停止”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T11:15:56.903

固定的。我在 .m 中导入 Restkit，它必须在 .h 中

# android - 如何在 Android 中为相对或其他布局更正设置圆角？

> ID：12838188
> 
> 赞同：15
> 
> 时间：2012-10-11T11:10:41.343
> 
> 标签：android, rounded-corners

安卓让我死了。

我想为相对布局设置圆角，这很简单

可绘制的 XML 可能看起来像

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle" >
 <padding android:left="1dp" android:top="1dp"
            android:right="2dp" android:bottom="2dp" />
    <solid android:color="#FFFFFF" />

    <corners android:radius="15dp" />

    <stroke
        android:width="2dp"
        android:color="#FFF" />

</shape> 
```

但是，如果我将其他布局或其他小部件（如 ImageView）插入到相对布局中，我没有被剪裁的孩子 - 见图片

[![在此处输入图像描述](../Images/78e4ce0c6a657d743e4f0a1154f6ab82.png)](https://i.stack.imgur.com/jYJBU.png)

你怎么能看到我没有剪裁子元素。

我该怎么做？

也许它可以帮助我希望圆角像在 iOS 中一样工作

```
givenView.layer.cornerRadius =roundAngle;
    [givenView.layer setBorderColor:[[borderColor colorWithAlphaComponent:alphaBorder] CGColor]];
    [givenView.layer setBorderWidth:borderWidth];
    givenView.clipsToBounds = YES; 
```

此外，我想向每个认为填充它的解决方案的人展示：

[![在此处输入图像描述](../Images/e585162ece089c6e6b103ace5c2bbd75.png)](https://i.stack.imgur.com/C1Qj9.png)

这里设置填充。

为了正确理解问题，请查看层次结构图片

[![在此处输入图像描述](../Images/ac5d3a97ebaa98633fb1c37f2ecf142a.png)](https://i.stack.imgur.com/Bjp1q.png)

在这里：

**RelativeLayout** - 已将 xml 描述为背景，

**LinearLayout** - 具有复杂布局的自定义对象的容器，其中包含图像作为背景和其他小部件

**profileStatistic** - 复杂的自定义小部件，在外部布局中有许多子对象。

布局的全图是：

[![在此处输入图像描述](../Images/4209bcd5fa63cde993f681f1867f7879.png)](https://i.stack.imgur.com/tyBlv.png)

内部控件的布局（profileStatistic）：

![在此处输入图像描述](../Images/e078e892714c6afa8b11b2301db5f72d.png)

PS 我不需要 9 路径。不是关于 9 路径的问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T11:51:32.033

如果您看到图像圆角被应用。但布局的孩子没有圆形矩形。这就是为什么那个角落会离开父母的背景。要解决这个问题，您可以给父布局一些填充，这样它就不会超出父布局的背景。或者，您也可以将可绘制的相同类型的圆角形状应用于子视图。

# iphone - phonegap gwt 移动应用仅在 iOS6 上首次运行

> ID：12838192
> 
> 赞同：0
> 
> 时间：2012-10-11T11:11:03.560
> 
> 标签：iphone, gwt, cordova, ios6

我有一个使用 mgwt 和 gwt-phonegap 1.8 开发的移动应用程序

它使用 GWT-RPC，在 iOS5 和所有版本的 Android 中运行良好。

在 iOS6 中，该应用程序仅在第一次运行良好。然后，如果我再次启动它，它似乎已经缓存了上一个会话的状态。（屏幕，值）我没有这样做的机制，而且屏幕是动态创建的。此外，我还没有使用使应用程序脱机运行的 mgwt 链接器。

任何人都有一个想法，是什么导致了这个或如何处理这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T16:18:07.520

似乎 iOS6 webcontrol 正在缓存 POST 请求：

[iOS 6 上的 Safari 是否缓存 $.ajax 结果？](https://stackoverflow.com/questions/12506897/is-safari-on-ios-6-caching-ajax-results)

# mysql - 重置mysql整数值

> ID：12838193
> 
> 赞同：1
> 
> 时间：2012-10-11T11:11:09.613
> 
> 标签：mysql

我有 MySQL 表名 Order_Ticket_Number 如下：

```
CREATE TABLE order_ticket_number ( 
    id_store_ticket int(10) NOT NULL,
    id_order_ticket int(3) ZEROFILL AUTO_INCREMENT NOT NULL,
    id_date_order timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
    id_order int(10) unsigned NOT NULL default 0, 
    PRIMARY KEY (id_store_ticket,id_order_ticket,id_date_order) 
)
ENGINE=myisam DEFAULT CHARSET=utf8; 
```

`id_order_ticket`每次从我正在开发的 Python 应用程序打开商店时，我都想重新启动该值。id_order_ticket 以 001, 002 ... 开头，我希望每天在制作**SOD(start-of-day)**时都以 001 开头。`ex.id_order_ticket = 001`因为 id_date_order 也是两次所以不会有冲突`PK and Engine=myisam.` 谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T11:19:30.653

如果我理解正确，您需要更改主键中列的顺序并使用`DATE`列，而不是时间戳：

```
PRIMARY KEY (id_store_ticket, id_date, id_order_ticket) 
```

示例，在**[SQL-Fiddle](http://sqlfiddle.com/#!2/0329f/1)**中测试：

```
CREATE TABLE order_ticket_number 
  ( id_store_ticket int(10) NOT NULL,
    id_date DATE NOT NULL,
    id_order_ticket int(3) ZEROFILL AUTO_INCREMENT NOT NULL,
    id_date_order timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
    id_order int(10) unsigned NOT NULL DEFAULT 0,  

   PRIMARY KEY (id_store_ticket, id_date, id_order_ticket)
  )                                    
  ENGINE = MyISAM ; 
```

日期不能有`DEFAULT CURRENT_TIMESTAMP`属性，因此必须确保日期和时间戳列具有一致的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T11:17:35.240

Mysql 文档指出这是不可能的：

> 要更改用于新行的 AUTO_INCREMENT 计数器的值，请执行以下操作：
> 
> ALTER TABLE t2 AUTO_INCREMENT = 值；您不能将计数器重置为小于或等于任何已使用的值。

[参考](http://dev.mysql.com/doc/refman/5.1/en/alter-table.html)

# debugging - 使用英特尔 OpenCL sdk 调试器时出错

> ID：12838201
> 
> 赞同：1
> 
> 时间：2012-10-11T11:11:42.517
> 
> 标签：debugging, opencl, intel

我正在尝试使用 Visual Studio 2008 prof 版的英特尔 opencl sdk 调试器插件调试 opencl 代码。

我收到此代码的构建程序错误

Err = clBuildProgram(cpProgram, 0, NULL, "-g -s \"C:\Users\Administrator\AppData\Local\NVIDIA Corporation\NVIDIA GPU Computing SDK 4.2\OpenCL\src\oclVectorAdd\VectorAdd.cl\"",空，空）；

有谁能够帮我 ？

我的设备类型是 CPU.. I7 系统..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-18T05:34:03.777

也许您需要卸载 NVIDIA SDK 4.2，然后安装 Intel SDK。Intel SDK 仅支持 Intel 内核和 Intel 显卡，NVIDIA SDK 仅支持 NVIDIA 显卡（不支持 Intel 内核！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-12T01:27:50.070

当你用 C 和 C++ 编写它时，你的路径应该是这样的（`\`用 another转义`\`）：

```
"-g -s \"C:\\Users\\Administrator\\AppData\\Local\\NVIDIA Corporation\\NVIDIA GPU Computing SDK 4.2\\OpenCL\\src\\oclVectorAdd\VectorAdd.cl\"" 
```

# c# - C# - Linq to XML - 从查询中排除元素

> ID：12838207
> 
> 赞同：0
> 
> 时间：2012-10-11T11:11:59.800
> 
> 标签：c#, linq-to-xml

我有这个 XML 文件：

```
<MyXml>
    <MandatoryElement1>value</MandatoryElement1>
    <MandatoryElement2>value</MandatoryElement2>
    <MandatoryElement3>value</MandatoryElement3>
    <CustomElement1>value</CustomElement1>
    <CustomElement2>value</CustomElement2>
<MyXml> 
```

称为“MandatoryElementX”的所有 3 个元素将始终出现在文件中。名为“CustomElementX”的元素是未知的。这些可以由用户自由添加或删除，并且可以具有任何名称。

我需要的是获取所有不是 MandatoryElements 的元素。所以对于上面的文件，我想要这个结果：

```
<CustomElement1>value</CustomElement1>
<CustomElement2>value</CustomElement2> 
```

我不知道自定义元素的名称可能是什么，只有 3 个 MandatoryElements 的名称，因此查询需要以某种方式排除这 3 个。

**编辑**：
即使已经回答了这个问题，我还是想澄清这个问题。这是一个实际的文件：

```
<Partner>
    <!--Mandatory elements-->
    <Name>ALU FAT</Name>
    <InterfaceName>Account Lookup</InterfaceName>
    <RequestFolder>C:\Documents and Settings\user1\Desktop\Requests\ALURequests</RequestFolder>
    <ResponseFolder>C:\Documents and Settings\user1\Desktop\Responses</ResponseFolder>
    <ArchiveMessages>Yes</ArchiveMessages>
    <ArchiveFolder>C:\Documents and Settings\user1\Desktop\Archive</ArchiveFolder>
    <Priority>1</Priority>

    <!--Custom elements - these can be anything-->
    <Currency>EUR</Currency>
    <AccountingSystem>HHGKOL</AccountingSystem>
</Partner> 
```

这里的结果是：

```
<Currency>EUR</Currency>
<AccountingSystem>HHGKOL</AccountingSystem> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T11:23:46.323

您可以定义强制名称列表并使用 LINQ to XML 进行过滤：

```
 var mandatoryElements = new List<string>() {
                   "MandatoryElement1", 
                   "MandatoryElement2", 
                   "MandatoryElement3"
                };

 var result = xDoc.Root.Descendants()
                  .Where(x => !mandatoryElements.Contains(x.Name.LocalName)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T11:36:52.143

您是创建了这个 xml 还是通过其他人/应用程序获得了它？如果是你的，我建议你不要给它编号。你可以做类似的事情

```
<MyXml>     
   <MandatoryElement id="1">value<\MandatoryElement>
   <MandatoryElement id="2">value<\MandatoryElement>     
   <MandatoryElement id="3">value<\MandatoryElement>
   <CustomElement id="1">value<\CustomElement>
   <CustomElement id="2">value<\CustomElement> 
<MyXml> 
```

在 LINQ-Statement 中，您不需要 List 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T12:14:59.520

您的问题显示了格式不正确的 XML，但我假设这是一个错字，并且可以将真正的 Xml 加载到 XDocument 类中。

试试这个...

```
string xml = @"<MyXml> 
    <MandatoryElement1>value</MandatoryElement1> 
    <MandatoryElement2>value</MandatoryElement2> 
    <MandatoryElement3>value</MandatoryElement3> 
    <CustomElement1>value</CustomElement1> 
    <CustomElement2>value</CustomElement2> 
</MyXml> ";

System.Xml.Linq.XDocument xDoc = XDocument.Parse(xml);
var result = xDoc.Root.Descendants() 
                 .Where(x => !x.Name.LocalName.StartsWith("MandatoryElement")); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T12:54:27.903

假设 TestXMLFile.xml 将包含您的 xml，

```
 XElement doc2 = XElement.Load(Server.MapPath("TestXMLFile.xml"));

List<XElement> _list = doc2.Elements().ToList(); 

List<XElement> _list2 = new List<XElement>();

foreach (XElement x in _list)
{
    if (!x.Name.LocalName.StartsWith("Mandatory"))
    {

        _list2.Add(x);
    }
}

foreach (XElement y in _list2)
{
    _list.Remove(y);
} 
```

# c# - 获取每个论坛的最新帖子

> ID：12838209
> 
> 赞同：0
> 
> 时间：2012-10-11T11:12:00.970
> 
> 标签：c#, asp.net, linq, entity-framework, lambda

所以我正在开发一个自制论坛（ASP.net MVC4），我目前正在显示所有论坛，在控制器中我做了这个简单的查询：

```
return View(db.Forums.ToList()); 
```

但现在我希望能够也包括顶帖。（一个论坛实体有一个 Post 集合，Post 有一个 Date，我想按它排序，然后执行 take(1)）。

我尝试类似：

```
return View(db.Forums.Include(z=>z.Posts.OrderBy(x=>x.Date).Take(1)).ToList()); 
```

然后我得到错误：

> 包含路径表达式必须引用在类型上定义的导航属性。对引用导航属性使用虚线路径，对集合导航属性使用 Select 运算符。参数名称：路径

PS：这是目前的看法

```
@model IEnumerable<MyProject.Data.Forum>

@{
    ViewBag.Title = "Forum Index";
}

<h2>Forums</h2>

<table class="Forum">
    <tbody>
    <tr>Main forums</tr>
    @foreach (var item in Model)
    {
        <tr class="ForumItem">
            <td><a href="Index?id=@item.Id">X</a></td>
            <td><p><a href="Index?id=@item.Id">@item.Name</a></p><span>@item.Description</span></td>
            <td>@item.PostCount</td>
            @foreach(var post in item.Posts)
            {
                <td>@post.Title</td>
            }
        </tr>
    }
    </tbody>
</table> 
```

有谁知道这个的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T11:43:16.853

你可以这样做：

```
return View(db.Forums.Select(f => new {
      Forum = f, 
      FirstPost = f.Posts.OrderBy(x=>x.Date).First() }
   ).ToList()
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T11:39:08.163

我认为错误“...包含路径表达式必须引用导航属性...”抱怨 z.Posts.OrderBy 不是导航属性。

请参考以下页面。

[实体框架、MVC 3、LINQ To 实体中的 OrderBy](https://stackoverflow.com/questions/7179130/entity-framework-mvc-3-orderby-in-linq-to-entities)

# jquery - 将项目拖到可排序的特定位置

> ID：12838210
> 
> 赞同：1
> 
> 时间：2012-10-11T11:12:02.640
> 
> 标签：jquery, jquery-ui, drag-and-drop, draggable, jquery-ui-sortable

我有两个容器，里面有多个物品。第一个包含一些图标，代表可以插入到列表中的元素。第二个容器是实际的列表，元素完全不同（从 HTML 结构的角度来看）。这有点像“将一个项目拖到第二个列表中以创建此内容类型”。

它像这样工作正常：

```
this.templates.draggable({ revert: true });
this.content.droppable({
    drop: function(event, ui) {
        // create element for this list
        // prepend item to the list
    }
}); 
```

问题是，我只能添加或附加元素。因此，用户丢弃它的位置无关紧要。但实际上新元素应该在它被删除的元素之间创建。

所以我尝试了这个（没有`drop`上面的 -callback）：

```
this.templates.draggable({
    revert: true,
    helper: 'clone',
    connectToSortable: '#idofcontainer'
}); 
```

这几乎可以正常工作，但它会克隆图标。所以我不知道如何停止这种行为并创建新元素。

所以，这里有一个截图，说明我的意思：当图标被放下时，它应该恢复到顶部列表，并且应该在当前位置创建一个新的“灰色容器”。

![例子](../Images/5ab09348912b84995561f6d7d395c9f9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T11:47:07.853

我相信这是您的解决方案：

```
this.templates.draggable({
    revert: true,
    helper: 'clone',
    connectToSortable: '#idofcontainer'
    stop: function(event,ui) { $('#idofcontainer>a').replaceWith('<div>' + $(this).text() + '</div>'); }
});
this.content.sortable({ cancel: '#idofcontainer>div' /* to stop moving divs under container */ }); 
```

JsFiddle：http: [//jsfiddle.net/BerkerYuceer/KZeBq/](http://jsfiddle.net/BerkerYuceer/KZeBq/)

# php - mysql execute() (PDO) 不在表中插入任何内容

> ID：12838214
> 
> 赞同：2
> 
> 时间：2012-10-11T11:12:12.797
> 
> 标签：php, mysql

我面临一个奇怪的问题。我正在使用一段代码，它在我的网站上 100% 有效，但在特定的地方不起作用。这是代码：

```
$stmt_insert_query = "INSERT INTO mya_events(event_id, artist_id, event_title, date, event_text, event_start, event_duration, genre, soundcloud_preview, event_type, country, ext, clicks, active) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)";
                                $stmt_insert = $db->prepare($stmt_insert_query);
                                $stmt_insert->bindValue(1, $next_avail, PDO::PARAM_INT);
                                $stmt_insert->bindValue(2, $_id, PDO::PARAM_INT);
                                $stmt_insert->bindValue(3, $_POST['event_title'], PDO::PARAM_STR);
                                $stmt_insert->bindValue(4, $event_date, PDO::PARAM_STR);
                                $stmt_insert->bindValue(5, $_POST['event_text'], PDO::PARAM_STR);
                                $stmt_insert->bindValue(6, $_POST['event_start'], PDO::PARAM_STR);
                                $stmt_insert->bindValue(7, $_POST['event_duration'], PDO::PARAM_STR);
                                $stmt_insert->bindValue(8, 'electronica', PDO::PARAM_STR);
                                $stmt_insert->bindValue(9, '', PDO::PARAM_STR);
                                $stmt_insert->bindValue(10, 'dj_event', PDO::PARAM_STR);
                                $stmt_insert->bindValue(11, 'US', PDO::PARAM_STR);
                                $stmt_insert->bindValue(12, '', PDO::PARAM_STR);
                                $stmt_insert->bindValue(13, 0, PDO::PARAM_INT);
                                $stmt_insert->bindValue(14, 'y', PDO::PARAM_STR);
                                $stmt_insert->execute(); 
```

在这段代码之后，我正在显示一个显示的文本。我还用 print_r($db->e​​rrorInfo()); 检查了错误。但没有显示错误。也试过尝试 - 抓住但没有。

我从 phpMyAdmin 手动输入一行，它可以工作。

我哪里错了？我检查了代码 10 次，它是完美的。

* * *

## 更新

我在服务器日志中发现了一个错误，正是我做的地方->执行

[2012 年 10 月 11 日 14:48:15] PHP 致命错误：未捕获的异常 'PDOException' 带有消息 'SQLSTATE[42000]：语法错误或访问冲突：1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在 ''event_id'、'artist_id'、'event_title'、'date'、'event_text'、'event_start'、'ev' at line 1' 附近使用正确的语法/home/cubeworx/public_html/electronicdancemusic.net/MYArtist/admin/list_events.php:527 堆栈跟踪：

# 0 /home/cubeworx/public_html/electronicdancemusic.net/MYArtist/admin/list_events.php(527): PDOStatement->execute()

# 1 {主要}

扔在 /home/cubeworx/public_html/electronicdancemusic.net/MYArtist/admin/list_events.php 第 527 行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T12:23:25.517

作为对 OP 最终评论的回应：
啤酒会很好，但由于技术尚未发展到可以通过任何协议传输液体的阶段（但），赞成票就可以了；）。由于这解决了您的问题，并且它可以在将来为您节省数小时的调试时间：一些技巧（使用 PDO 时）：

*   尝试将您的 ini 设置`E_ALL | E_STRICT`为避免警告和错误被抑制
*   *始终*用于在查询失败时`$db->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );`强制 PDO 抛出。`PDOExceptions`
*   When query-ing, use `dbName.tblName` as much as possible, to avoid accidentally working on the wrong DB
*   Always check if a variable/array key exists before using it
*   Use prepared statements, preferably with *named placeholders* to ensure your code is more readable for yourself and others

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T11:18:28.243

好的做法是对表名、列等使用 `` 符号，这样它就不会干扰数据库引擎本身。

```
INSERT INTO mya_events(event_id, artist_id, event_title, ... 
```

会变成

```
INSERT INTO `mya_events`(`event_id`, `artist_id`, `event_title`, 
```

总是用''引用你的值，也包括数值。无论如何，您都可以通过其文本发送查询。

我认为显示似乎失败的查询很有用。您可以在插入后添加检查，如果该行不在数据库中，则将其打印在日志中的某个位置，并向我们展示该特定查询。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T11:32:34.943

问题已在上面确定 - 但您的错误在于您可能正在检查数据库错误，但您没有检查语句错误

$smnt__insert->error_info() 将拥有您所需要的。

捕获此问题的最简单方法是将批次（准备、绑定和执行）包装到 try/catch 块中，并将 PDO 设置为异常模式错误报告。抛出的异常可能来自数据库或语句，并为您提供所有详细信息。无需专门检查两者即可轻松捕获两者。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T11:24:34.960

使用`$stmt_insert->bindParam`而不是`$stmt_insert->bindValue`. 这是一些示例代码：

```
<?php
    /* Execute a prepared statement by binding PHP variables */
    $calories = 150;
    $colour = 'red';
    $sth = $dbh->prepare('SELECT name, colour, calories
        FROM fruit
        WHERE calories < ? AND colour = ?');
    $sth->bindParam(1, $calories, PDO::PARAM_INT);
    $sth->bindParam(2, $colour, PDO::PARAM_STR, 12);
    $sth->execute();
    ?> 
```

# javascript - 如何在单击 HTML 按钮时填充下拉列表？

> ID：12838215
> 
> 赞同：-4
> 
> 时间：2012-10-11T11:12:16.320
> 
> 标签：javascript, jquery, html

我需要使用 javascript 或 jQuery 填充单击 HTML 按钮的下拉列表。如果有，请建议我一些链接。任何帮助/建议将不胜感激！谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T11:20:31.427

首先为按钮上的点击事件绑定一个处理程序

```
("#myBtnId").click(function (){
    populateDropDown();
}); 
```

然后制作一个填充下拉菜单的函数

```
function populateDropdown(){
    var $myDD = $("#myDropDownId");
    $myDD.append("<option value='value'>Text</option>");   
} 
```

请注意，如果您有一个项目列表，您只需更改迭代列表的代码并动态放置选项的值和文本。

```
function populateDropdown(listOfItems){
    var $myDD = $("#myDropDownId");
    for (var i = 0; i<listOfItems.lenght; i++){
       $myDD.append("<option value='"+ listOfItems[i].value +"'>"+listOfItems[i].text+"</option>");   
    }     
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T11:18:43.123

它应该相当简单。

您只需要有一个 onclick 事件或使用按钮的事件绑定来调用将填充下拉列表的函数。

例如`<button type='button' onclick='Populate();'>Populate</button>`

然后您的 JavaScript 函数只需添加值：

```
function Populate() {

  var dropdown = document.getElementById("dropdown_id_here");

  dropdown.options[0] = new Option('Text 1', 'Value1');
  dropdown.options[1] = new Option('Text 2', 'Value2');

  // And so on, add as many options as required.
} 
```

毫无疑问，有几十种方法可以实现此功能，因此其他解决方案可能更适合您或更简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T11:15:50.917

使用`appendChild()`选择标签的功能并不断添加您的选项。您可以在以下网址找到详细信息： http: [//www.w3schools.com/dom/met_element_appendchild.asp](http://www.w3schools.com/dom/met_element_appendchild.asp)

您也可以使用以下`append()`函数在 jQuery 中执行此操作：http: [//api.jquery.com/append/](http://api.jquery.com/append/)

您可以在以下位置查看工作代码：http: [//jsfiddle.net/shubhanshumishra/jHFZZ/](http://jsfiddle.net/shubhanshumishra/jHFZZ/)

```
<input id="clickMe" value="clickme" type="button" />
<select id="dropdown">
    <option value="0">Select Fields</option>
</select> 
```

这是Javascript：

```
$i=0;
$("#clickMe").click(function(e){
    $i++;
    $("#dropdown").append("<option value='"+$i+"'>New Field</option>");
    });​ 
```

# c# - 在 C# 中使用 ActiveX

> ID：12838219
> 
> 赞同：2
> 
> 时间：2012-10-11T11:12:59.087
> 
> 标签：c#, activexobject

我有一个这样的javascript代码：

```
 o = new ActiveXObject("ASDFsome.Application");
  utilites = WScript.CreateObject("ASDF.Utilites.UTF.Converter")
  utilites.Convert(outFile, xmlProp.xml) 
```

现在我想用 C# 代码重写它。我应该如何在 Net 中使用 ActiveXObject？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-11T12:55:15.650

这在很大程度上是*动态*关键字被添加到 C# 版本 4 的原因：

```
dynamic utilites = Activator.CreateInstance(Type.GetTypeFromProgID("ASDF.Utilites.UTF.Converter"));
utilites.Convert(outFile, xmlProp.xml); 
```

如果您坚持使用早期版本，那么使用 VB.NET 类库是最好的方法。它直接支持脚本代码中使用的 CreateObject() 函数。

最后但同样重要的是，与您一直使用的脚本语言不同，C# 和 VB.NET 都支持早期绑定。首先添加对类型库的引用，Project + Add Reference，然后使用 COM 选项卡或浏览选项卡选择包含类型库的 .tlb 或 .dll 文件。如果组件设计为仅用于后期绑定脚本语言，您可能没有。我们无法帮助您找到供应商或作者知道的正确类型库。

最后但并非最不重要的是，这闻起来像一个知道如何读取 utf-8 编码的 XML 文件的实用程序。System.Xml 命名空间已经在 .NET 中得到了很好的支持。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T11:17:37.270

一种可能性是使用反射：

```
var utilitiesType = Type.GetTypeFromProgID("ASDF.Utilites.UTF.Converter");
var instance = Activator.CreateInstance(utilitiesType);
utilitiesType.InvokeMember(
    "Convert", 
    BindingFlags.InvokeMethod | BindingFlags.Public, 
    null, 
    instance, 
    new[] { "outputFile", "xmlProp.xml" }
); 
```

另一种可能性是为 COM 对象生成强类型代理。右键单击您的项目，添加引用 -> COM 选项卡 -> 在列表中选择 COM 对象或从其 DLL 加载它。然后，Visual Studio 将为此 COM 对象生成一个强类型包装的程序集，并自动将其添加为引用。接下来，您可以直接使用 COM 对象并保持其强类型。

# udp - UDP 数据包被 tcpdump 捕获，但没有被套接字接收

> ID：12838222
> 
> 赞同：12
> 
> 时间：2012-10-11T11:13:08.847
> 
> 标签：udp, tcpdump, raw-sockets

[我按照网页http://www.tenouk.com/Module43a.html](http://www.tenouk.com/Module43a.html)编写了一个 rawudp 程序来通过原始套接字发送 udp 数据包。然后我写了一个 udp 服务器来监听给定端口上的 udp 数据包。代码如下所示：

```
...
sd = socket(AF_INET, SOCK_DGRAM, 0);
bind(sd, (struct sockaddr *)&ipaddr, sizeof(ipaddr));
size = recvfrom(sd, msgbuf.text, 2000, 0, (struct sockaddr *)&sin, &sin_len);
... // print the recevied udp packet 
```

当我使用rawudp向udp服务器发送udp数据包时，如果源ip地址和目的ip地址不同就可以了。但是如果源ip地址和目的ip地址相同，udp服务器就收不到udp数据包。

我尝试使用 tcpdump 来捕获 udp 数据包。我发现 tcpdump 可以在使用相同的源和目标 IP 地址时显示 udp 数据包。似乎当源IP地址和目标IP地址相同时，udp数据包在某处被丢弃，因此udp服务器中的套接字没有收到它。

以下是一些日志（IP 地址已在日志中更新）。两种情况之间的唯一区别是源 IP 地址（192.168.0.26 与 192.168.0.226）。

我被困在这个问题上。有没有人可以帮助我。提前致谢。

udp 客户端（rawudp）：

```
case 1> rawudp 192.168.0.26 18321 192.168.0.226 19702 test.bin # using different source and destination ip addresses
size of ip header:  20
size of udp header: 8
read 69 bytes from file test.bin successfully.
socket() - using SOCK_RAW socket and UDP protocol is OK.
setsockopt() is OK.
total length of IP packet: 97
    0000:  4500 6100 0000 4000 4011 CD8F C0A8 001A 
    0010:  C0A8 00E2 4791 4CF6 004D 0000 0104 0401 
    0020:  FF00 0105 084E 0600 5225 1183 0406 0501 
    0030:  5211 3840 0D05 2735 2109 02C0 0023 0101 
    0040:  8080 448D 30C0 0300 9005 093C 5E56 8791 
    0050:  4B2D B7C0 082A 0000 2900 0000 0412 0C95 
    0060:  00
sendto() is OK.

case 2> rawudp 192.168.0.226 18321 192.168.0.226 19702 test.bin # using same source and destination ip addresses
size of ip header:  20
size of udp header: 8
read 69 bytes from file test.bin successfully.
socket() - using SOCK_RAW socket and UDP protocol is OK.
setsockopt() is OK.
total length of IP packet: 97
    0000:  4500 6100 0000 4000 4011 CCC7 C0A8 00E2 
    0010:  C0A8 00E2 4791 4CF6 004D 0000 0104 0401 
    0020:  FF00 0105 084E 0600 5225 1183 0406 0501 
    0030:  5211 3840 0D05 2735 2109 02C0 0023 0101 
    0040:  8080 448D 30C0 0300 9005 093C 5E56 8791 
    0050:  4B2D B7C0 082A 0000 2900 0000 0412 0C95 
    0060:  00
sendto() is OK. 
```

udp服务器端：

```
case 1>
udp server receive 69 bytes from ip address 192.168.0.26 port 18321, sin_len 16
02:13:24.252841 IP 192.168.0.26.18321 > 192.168.0.226.19702: UDP, length 69
    0x0000:  4500 0061 0000 4000 4011 0198 c0a8 001a  E..a..@.@.......
    0x0010:  c0a8 00e2 4791 4cf6 004d 0000 0104 0401  ....G.L..M......
    0x0020:  ff00 0105 084e 0600 5225 1183 0406 0501  .....N..R%......
    0x0030:  5211 3840 0d05 2735 2109 02c0 0023 0101  R.8@..'5!....#..
    0x0040:  8080 448d 30c0 0300 9005 093c 5e56 8791  ..D.0......<^V..
    0x0050:  4b2d b7c0 082a 0000 2900 0000 0412 0c95  K-...*..).......
    0x0060:  00
                              .
02:13:39.500469 IP 192.168.0.226.18321 > 192.168.0.226.19702: UDP, length 69
    0x0000:  4500 0061 0000 4000 4011 00d0 c0a8 00e2  E..a..@.@.......
    0x0010:  c0a8 00e2 4791 4cf6 004d 0000 0104 0401  ....G.L..M......
    0x0020:  ff00 0105 084e 0600 5225 1183 0406 0501  .....N..R%......
    0x0030:  5211 3840 0d05 2735 2109 02c0 0023 0101  R.8@..'5!....#..
    0x0040:  8080 448d 30c0 0300 9005 093c 5e56 8791  ..D.0......<^V..
    0x0050:  4b2d b7c0 082a 0000 2900 0000 0412 0c95  K-...*..).......
    0x0060:  00 
```

当我在同一主机上运行 rawudp 和 udp 服务器时，当我将源 IP 地址和目标 IP 地址设置为相同时，upd 服务器可以接收来自 rawudp 的 udp 数据包。但是，如果我在与 udp 服务器不同的主机上运行 rawudp，当我将这些 IP 地址设置为相同时，udp 服务器无法接收来自 rawudp 的 upd 数据包。在这两种情况下，tcpdump 都可以在 udp 服务器端捕获 udp 数据包。

在后一种情况下，只有具有相同源和目标 IP 地址的 udp 数据包会受到影响。如果我将它们设置不同，upd 服务器总是可以接收 udp 数据包。`lo`如果未从接口接收到数据包，我不确定内核是否会丢弃具有相同本地 IP 地址的数据包。

# android - 将 Android 应用程序从后台带到前台的方法

> ID：12838230
> 
> 赞同：11
> 
> 时间：2012-10-11T11:13:34.413
> 
> 标签：android, android-activity

这是场景：

AndroidManifest.xml 定义了一个带有`android:launchMode="singleTask"`. （这意味着在整个应用程序生命周期中，堆栈中应该只有一个活动，对吧？）

在 期间`Activity.onCreate()`，广播接收器以编程方式创建并侦听传入的 SMS。即使在`Activity.onPause()` **设计**之后，接收器仍然保持活动状态。

当用户完成应用程序时，他按下调用设备的主页按钮，`Activity.onPause()`应用程序消失。设备随即显示 Android 主屏幕。

收到短信后，广播接收器会收到短信并尝试通过以下方式显示活动：

```
Intent it = new Intent(context, Akami.class);
it.setAction(Intent.ACTION_MAIN);
it.addCategory(Intent.CATEGORY_LAUNCHER);
it.setComponent(new ComponentName(context.getPackageName(), "MyActivity"));
it.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
context.startActivity(it); 
```

**但是，该活动不会向用户显示。**

*   a) 为什么？
*   b) 将 Activty 带到前台的可能方法是什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-15T09:21:01.273

在`MyMainActivity`定义（AndroidManifest.xml）中：

```
<intent-filter>
 <action android:name="intent.my.action" />
 <category android:name="android.intent.category.DEFAULT" />
</intent-filter> 
```

以编程方式将应用程序置于前台：

```
Intent it = new Intent("intent.my.action");
it.setComponent(new ComponentName(context.getPackageName(), MyMainActivity.class.getName()));
it.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
context.getApplicationContext().startActivity(it); 
```

注意：当对象与想要提出的活动相同时，`context.startActivity(it)`将不起作用。`context`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T13:46:57.457

是的，您所说的是正确的，拥有一个 BroadcastReciever 并向您的 Activity 发出意图以将其置于前台。然而，关于 Activity 生命周期的警告。

Android 操作系统可以根据系统资源将您的活动从 onPause() 转移到 onStop() 和 onDestroy()。因此，在这种情况下，您的调用 Activity 将再次重新启动，因此请在此处采取预防措施。否则，很容易遇到 NullPointerExceptions

# java - java枚举器中的私有构造函数

> ID：12838234
> 
> 赞同：0
> 
> 时间：2012-10-11T11:13:51.000
> 
> 标签：java, oop, enums

下面这两个 Java 中的 enum 定义有什么区别，第一个比第二个有什么优势？

```
public enum Suit {//first definition
   CLUBS (1), SPADES (2), HEARTS (3), DIAMONDS (4);
   int value;
   private Suit(int v) { value = v; }
};

public enum Suit {//second definition
   CLUBS, SPADES, HEARTS, DIAMONDS;
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T11:21:44.063

在此示例中，除了明显的“int 值”之外没有其他区别。

一般来说，Java 5+ 中的枚举是一个有一些限制的类。您不能像使用普通类一样使用“new”自己创建枚举实例。

另一方面，枚举可以像常规类甚至方法一样具有数据字段。

如果您的枚举代表行星，并且每个枚举实例都包含一些非常有用的数据，例如行星半径，该怎么办？在这种情况下，您将编写如下代码：

```
public enum Planet {

    EARTH(6000), VENUS(5000);
    int radius;
    private Planet(int radius) {this.radius = radius;}

     // now define a getter:

     public int getRadius() {

         return radius;
     } 
} 
```

注意这里的吸气剂。它将允许直接从枚举实例访问此类数据。

例如：

```
public void somewhereInYourCode(...) {

   .....
    Planet p = getPlanet(); // get the planet from your system 

    int radius = p.getRadius();
   ....
} 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T11:21:34.953

如果您需要一个字段，则使用第一个字段，如果您不需要字段，则使用第二个字段。

它是关于为您的要求选择正确的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T11:22:25.910

差别不大。第一个更容易阅读+它具有用于设置值的内置功能。这只是您喜欢编写代码的方式。这就像比较类似的东西

```
if (outOfBounds){
doSomething();} 
```

和`if(outOfBounds == true){ doSomething();}`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-11T11:23:38.760

如果你使用 `Suite`一个私有构造函数你可以这样做`Suite.CLUBS.value`，如果你使用`enum`你必须使用的标准`Suite.CLUBS.ordinal()`。

如果您将`enum`其他属性添加到您的`Suite`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-11T11:22:42.190

如果您打算使用 int 来引用枚举的值，最好使用第一个变体而不是依赖枚举值的索引号。

这样首先更清楚哪个 int 值属于哪个枚举值，并且如果您更改顺序也不会中断。

# xamarin.android - TeeChart MonoDroid 版本

> ID：12838236
> 
> 赞同：0
> 
> 时间：2012-10-11T11:13:54.673
> 
> 标签：xamarin.android, teechart

我刚刚开始评估 TeeChart MonoDroid 版本，并且从以下代码中遇到了一些小问题：

```
TChart _Chart = new TChart(context);
Bar _Bar1 = new Bar(_Chart.Chart);
Bar _Bar2 = new Bar(_Chart.Chart);

_Chart.Axes.Left.Increment = 25;
_Chart.Axes.Left.SetMinMax(0, 100);
_Chart.Axes.Left.Labels.Style = AxisLabelStyle.Mark;
_Chart.Axes.Visible = false;
_Chart.Walls.Left.Visible = false;
_Chart.Panel.Gradient.Visible = false;
_Chart.Panel.Transparent = true;
_Chart.Walls.Back.Color = System.Drawing.Color.White;
_Chart.Walls.Back.Width = 200;
_Chart.Walls.Back.Transparency = 90;
_Chart.Walls.Back.Gradient.Visible = false;
_Chart.Walls.Bottom.Size = 10;
_Chart.Walls.Bottom.Width = 200;
_Chart.Legend.Visible = false;
_Chart.Header.Visible = false;
_Chart.Aspect.View3D = true;
_Chart.SetBackgroundColor(Color.Transparent);

_Bar1.Add(50, "50%");
_Bar1.Depth = 10;
_Bar1.Pen.Color = System.Drawing.Color.Red;
_Bar1.Color = System.Drawing.Color.Red;
_Bar1.MarksOnBar = true;
_Bar1.MultiBar = MultiBars.Stacked;
_Bar1.Marks.Style = MarksStyles.Label;
_Bar1.Marks.Transparent = true;
_Bar1.Marks.Font.Color = System.Drawing.Color.White;
_Bar1.Marks.Font.Size = 18;
_Bar1.Marks.Font.Bold = true;
_Bar1.CustomBarWidth = 75;
_Bar1.MarksLocation = MarksLocation.Center;

_Chart.Series.Add(_Bar1);

_Bar2.Add(50, "50%");
_Bar2.Depth = 10;
_Bar2.Pen.Color = System.Drawing.Color.Black;
_Bar2.Color = System.Drawing.Color.Black;
_Bar2.MarksOnBar = true;
_Bar2.MultiBar = MultiBars.Stacked;
_Bar2.Marks.Style = MarksStyles.Label;
_Bar2.Marks.Transparent = true;
_Bar2.Marks.Font.Color = System.Drawing.Color.White;
_Bar2.Marks.Font.Size = 18;
_Bar2.Marks.Font.Bold = true;
_Bar2.CustomBarWidth = 75;
_Bar2.MarksLocation = MarksLocation.Center;

_Chart.Series.Add(_Bar2);

AbsoluteLayout absl = new AbsoluteLayout(this);

absl.SetBackgroundColor(Color.Transparent);

absl.AddView(_Chart, new AbsoluteLayout.LayoutParams(400, 1200, 0, 0)); 
```

这会产生一个堆叠的单条，红色和黑色之间有 50% 的分割。我的问题如下：

1）无论我尝试什么，我都无法让视图变得透明 - 我希望任何基础视图都能通过图表显示。

2）我似乎无法使底部“墙”更深 - 我希望它与酒吧深度一样深。

当我尝试使用以下代码更新图表时，我也遇到了“闪烁”问题：

```
_Chart.Series[0].Clear();
_Chart.Series[1].Clear();

_Bar1.Add(HistoryRed, String.Format("{0:0,0.00}%", HistoryRed));
_Bar1.Depth = 10;
_Bar1.Pen.Color = System.Drawing.Color.Red;
_Bar1.Color = System.Drawing.Color.Red;
_Bar1.MarksOnBar = true;
_Bar1.MultiBar = MultiBars.Stacked;
_Bar1.Marks.Style = MarksStyles.Label;
_Bar1.Marks.Transparent = true;
_Bar1.Marks.Font.Color = System.Drawing.Color.White;
_Bar1.Marks.Font.Size = 18;
_Bar1.Marks.Font.Bold = true;
_Bar1.CustomBarWidth = 75;
_Bar1.MarksLocation = MarksLocation.Center;

_Chart.Series[0].Add(_Bar1);

_Bar2.Add(HistoryBlack, String.Format("{0:0,0.00}%", HistoryBlack));        
_Bar2.Depth = 10;
_Bar2.Pen.Color = System.Drawing.Color.Black;
_Bar2.Color = System.Drawing.Color.Black;
_Bar2.MarksOnBar = true;
_Bar2.MultiBar = MultiBars.Stacked;
_Bar2.Marks.Style = MarksStyles.Label;
_Bar2.Marks.Transparent = true;
_Bar2.Marks.Font.Color = System.Drawing.Color.White;
_Bar2.Marks.Font.Size = 18;
_Bar2.Marks.Font.Bold = true;
_Bar2.CustomBarWidth = 75;
_Bar2.MarksLocation = MarksLocation.Center;

_Chart.Series[1].Add(_Bar2); 
```

似乎整个视图被破坏并重新创建，当它消失和重新出现时，它会短暂闪烁。有没有办法在不闪烁的情况下更新图表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T11:41:31.237

> 1）无论我尝试什么，我都无法让视图变得透明 - 我希望任何基础视图都能通过图表显示。

您还需要将后墙设置为透明：

```
 _Chart.Walls.Back.Transparent = true; 
```

> 2）我似乎无法使底部“墙”更深 - 我希望它与酒吧深度一样深。

您可以使用*Chart3DPercent*更改它：

```
 _Chart.Aspect.Chart3DPercent = 25; 
```

> 似乎整个视图被破坏并重新创建，当它消失和重新出现时，它会短暂闪烁。有没有办法在不闪烁的情况下更新图表？

最近，我们为 MfA 实现了一项新功能，该功能禁用了缩放和滚动：

```
 _Chart.Zoom.Style = Steema.TeeChart.ZoomStyles.None; 
```

由于不支持缩放或滚动，因此图表可以以更有效的方式呈现。Androis 安装程序的 TeeChart Mono 包含实时图表演示。

# java - 在 Java 中验证字符串

> ID：12838237
> 
> 赞同：-1
> 
> 时间：2012-10-11T11:13:58.333
> 
> 标签：java

> **可能重复：**
> [检查 null - 什么顺序？](https://stackoverflow.com/questions/10983573/checking-for-null-what-order)

谁能告诉我验证“null”的字符串值的更好方法是什么，为什么？

```
String user = userService.getUserName(accID);

1) if(user != null) {
    ..
   }

2) if(null != user) {
    ..
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T11:15:58.487

没有区别。第一个版本更常用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T11:17:35.253

对于这种情况没关系，尽管第一种方法更常见。

但是，当直接将其输入到 equals 方法中时，首选所谓的 yoda-condition。

例如：

```
if("".equals(string)){
} 
```

优先于

```
if(string.equals("")){
} 
```

因为它避免了空指针异常

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T11:16:44.087

第一种方法主要由开发人员使用。我不认为这有什么不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T11:17:01.873

我已经看到了这两种方法。有些人认为最好先给出您要比较的值。如果您有许多选择来查看您首先比较的值，这可能会更好。

我个人使用第一个选项，因为这是我的习惯。

如果这是您的问题，我怀疑是否存在任何性能差异。所有的区别都在于代码风格和可读性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-11T11:17:03.770

由于它没有功能差异并且第一个更具可读性，因此您应该选择第一个。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-11T11:19:41.817

在这种情况下，这是一个品味问题。

在其他情况下，例如，如果您要与字符串文字/常量进行比较，我更喜欢这样：

```
if ("yourStringConstant".equals(yourVariable)) 
```

因为这也可以处理 yourVariable 为空的情况。如果你换一种方式，你会得到一个 NullPointerException：

```
if (yourVariable.equals("yourStringConstant")) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-11T11:23:18.307

第二种方法来自 C/C++。当您编写`if (user = null)`而不是`if (user == null)`用 C 编写时，您会得到一个逻辑错误，而不是编译错误，而且这样的错误可能真的很难检测到。

但是如果你写`if(null = user)`而不是`if(null == user)`你会得到一个编译错误，因为你不能将变量分配给`null`. 这就是为什么在那里经常使用颠倒的参数顺序的原因。

但是在 Java 中，这没有多大意义，因为 Java 编译器不会采用`if(user = null)`表达式，因此您可以使用任何方法。第一个虽然更普遍

# iphone - 当视图首次呈现时，UIViewController 中的哪些方法只被调用一次？视图加载？

> ID：12838241
> 
> 赞同：1
> 
> 时间：2012-10-11T11:14:32.160
> 
> 标签：iphone, ios, viewdidload

当视图首次呈现时，UIViewController 中的哪些方法只被调用一次？

我问的原因是我需要调用 NSNotificationCenter 的 addObserver 方法，我只需要做一次，而且当视图消失时我不需要调用 removeObserver。（实际上，当视图看不见时，我会在收到通知时进行一些轻度处理。）

最佳实践是什么 - 我应该调用什么方法？是 viewDidLoad 方法吗 - 任何人都可以确认此方法是否仅被调用一次并且在视图随后出现时从未调用过？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T11:29:21.450

如果视图控制器以编程方式分配其资源，请创建特定于视图控制器的自定义初始化方法。此方法应调用超类的 init 方法，然后执行任何特定于类的初始化。

一般来说，不要编写复杂的初始化方法。相反，实现一个简单的初始化方法，然后为视图控制器的客户端提供属性来配置其行为。

2个步骤，

*   视图控制器调用它的 loadView 方法

*   如果视图控制器与情节提要相关联，它会从情节提要中加载视图。如果视图控制器未与情节提要相关联，则会创建一个空的 UIView 对象并将其分配给视图属性。

视图控制器调用其 viewDidLoad 方法，这使您的子类能够执行任何额外的加载时任务。

这张图可以给你一个更好的主意

![在此处输入图像描述](../Images/fd755854fef5d5e54e7c5c6dced23f34.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T11:21:48.517

```
-(id)initWithNibName - or -
-(id)init 
```

在任何情况下都只会被调用一次

就所`viewDidLoad`涉及的而言，它也会被调用一次，但一旦收到内存警告就会被触发（但不适用于 iOS 6）。由于内存过载，在触发 viewDidUnload 后会调用控制器的 viewDidLoad。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T11:58:21.070

`dealloc`对于观察者，即使在 ARC 下，也可以在初始化方法之一中开始观察，从 nib 或 viewDidLoad 中唤醒，并在方法中取消注册观察

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T11:19:08.047

是`- (void)viewDidLoad`的，方法是在视图加载过程时第一次调用，并且 -`(void)viewWillAppear:(BOOL)animated`方法是在视图将呈现过程时调用

但是如果你想创建一次调用的方法，**那么**使用方法的 GLOBALIZATION`-(id)init`只会调用一次。

# windows-phone-7 - Windows Phone 7 流式音频基本身份验证

> ID：12838243
> 
> 赞同：3
> 
> 时间：2012-10-11T11:14:41.343
> 
> 标签：windows-phone-7, audio, streaming

我正在尝试从 Windows Phone 应用程序播放受密码保护的 Icecast 流。

```
 UriBuilder station = new UriBuilder();
        station.Host="myhost";
        station.Port=80;
        station.Password = "password";
        station.UserName = "user";
        station.Path = "path";
        station.Scheme = "http";

        Uri stationUrl = station.Uri;
        Debug.WriteLine(stationUrl);
        BackgroundAudioPlayer.Instance.Track = new AudioTrack(stationUrl, "asd", "abc", "asd", null);
        BackgroundAudioPlayer.Instance.Play(); 
```

我什至尝试使用

```
BackgroundAudioPlayer.Instance.Track = new AudioTrack(new Uri("http://user:password@host:port/path", UriKind.Absolute), "abc", "as", "de", null); 
```

它无法播放。但是当我删除用户名和密码时，它可以播放。

使用 PHP 文件进行身份验证。当我通过打印 $_POST 值检查身份验证结果时，它们是空白的。相同的 URL 在 VLC 中有效，但 Firefox 在 IE 中无效。

有什么办法可以让它工作吗？

# interface - 是否可以在接口定义中使用 getter/setter？

> ID：12838248
> 
> 赞同：120
> 
> 时间：2012-10-11T11:15:08.257
> 
> 标签：interface, get, set, accessor, typescript

目前，`TypeScript`不允许在接口中使用 get/set 方法（访问器）。例如：

```
interface I {
      get name():string;
}

class C implements I {
      get name():string {
          return null;
      } 
} 
```

此外，TypeScript 不允许在类方法中使用数组函数表达式：例如：

```
class C {
    private _name:string;

    get name():string => this._name;
} 
```

有没有其他方法可以在接口定义上使用 getter 和 setter？

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2012-10-11T12:03:52.933

可以在接口上指定属性，但不能强制是否使用getter和setter，像这样：

```
interface IExample {
    Name: string;
}

class Example implements IExample {
    private _name: string = "Bob";

    public get Name() {
        return this._name;
    }

    public set Name(value) {
        this._name = value;
    }
}

var example = new Example();
alert(example.Name); 
```

在这个例子中，接口不强制类使用getter和setter，我可以使用一个属性来代替（下面的例子）——但是接口应该隐藏这些实现细节，因为它是对调用代码的承诺关于它可以调用什么。

```
interface IExample {
    Name: string;
}

class Example implements IExample {
    // this satisfies the interface just the same
    public Name: string = "Bob";
}

var example = new Example();
alert(example.Name); 
```

最后，`=>`不允许用于类方法 -如果您认为 Codeplex 有一个紧迫的用例，您可以[开始讨论它。](http://typescript.codeplex.com/discussions)这是一个例子：

```
class Test {
    // Yes
    getName = () => 'Steve';

    // No
    getName() => 'Steve';

    // No
    get name() => 'Steve';
} 
```

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2016-12-13T11:32:38.317

为了补充其他答案，如果您希望`get value`在接口上定义 a ，您可以使用`readonly`：

```
interface Foo {
  readonly value: number;
}

let foo: Foo = { value: 10 };

foo.value = 20; //error

class Bar implements Foo {
  get value() {
    return 10;
  }
} 
```

但据我所知，正如其他人所提到的，目前没有办法在界面中定义一个仅设置的属性。但是，您可以将限制转移到运行时错误（仅在开发周期中有用）：

```
interface Foo {
  /* Set Only! */
  value: number;
}

class Bar implements Foo {
  _value:number;
  set value(value: number) {
    this._value = value;
  }
  get value() {
    throw Error("Not Supported Exception");
  }
} 
```

**不推荐的做法**；但一个选择。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-11T11:45:54.047

首先，Typescript 仅在针对 Ecmascript 5时才支持`get`和语法。要实现这一点，您必须调用编译器`set`

```
tsc --target ES5 
```

接口不支持 getter 和 setter。要编译您的代码，您必须将其更改为

```
interface I { 
    getName():string;
}

class C implements I { 
    getName():string {
          return null;
    }   
} 
```

typescript 支持的是构造函数中字段的特殊语法。在你的情况下，你可以有

```
interface I {
    getName():string;
}

class C implements I {
    constructor(public name: string) {
    }
    getName():string {
        return name;
    }
} 
```

注意 class`C`没有指定 field `name`。它实际上是`public name: string`在构造函数中使用语法糖声明的。

正如 Sohnee 所指出的，该接口实际上应该隐藏任何实现细节。在我的示例中，我选择了需要 java 风格的 getter 方法的接口。但是，您也可以一个属性，然后让类决定如何实现接口。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-25T14:30:48.713

使用 TypeScript 3.4：

```
interface IPart {
    getQuantity(): number;
}

class Part implements IPart {
    private quantity: number;
    constructor(quantity: number) {
        this.quantity = quantity;
    }
    public getQuantity = (): number => {
        return this.quantity;
    };
}

let part = new Part(42);

// When used in typescript, quantity is not accessible.
// However, when compiled to javascript it will log '42'.
console.log(part.quantity);

// Logs '42'.
console.log(part.getQuantity()); 
```

请参阅[TypeScript Playground](https://www.typescriptlang.org/play/#src=interface%20IPart%20%7B%0D%0A%20%20%20%20getQuantity()%3A%20number%3B%0D%0A%7D%0D%0A%0D%0Aclass%20Part%20implements%20IPart%20%7B%0D%0A%20%20%20%20private%20quantity%3A%20number%3B%0D%0A%20%20%20%20constructor(quantity%3A%20number)%20%7B%0D%0A%20%20%20%20%20%20%20%20this.quantity%20%3D%20quantity%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%20%20public%20getQuantity%20%3D%20()%3A%20number%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20this.quantity%3B%0D%0A%20%20%20%20%7D%3B%0D%0A%7D%0D%0A%0D%0Alet%20part%20%3D%20new%20Part(42)%3B%0D%0A%0D%0A%2F%2F%20When%20used%20in%20typescript%2C%20quantity%20is%20not%20accessible.%0D%0A%2F%2F%20However%2C%20when%20compiled%20to%20javascript%20it%20will%20log%20'42'.%0D%0Aconsole.log(part.quantity)%3B%0D%0A%0D%0A%2F%2F%20Logs%20'42'.%0D%0Aconsole.log(part.getQuantity())%3B)上的示例。

# excel - 通过自动化打开 Excel 时 Excel UDF 不可用

> ID：12838249
> 
> 赞同：1
> 
> 时间：2012-10-11T11:15:34.840
> 
> 标签：excel, automation, vsto, user-defined-functions

当我使用自动化启动 Excel 时，我无法让 Excel UDF 类在 Excel 中可用。我正在编写一个加载项，当从第三方应用程序启动 Excel 时该加载项需要工作。

我的理解是这是设计使然，但是当通过自动化打开 Excel 时，我需要有一种方法让用户可以使用我的 UDF。

我为 Excel 2007 创建了一个 VSTO 插件和 UDF 类。我复制了代码并完全按照该网页上的说明进行操作，只是按照说明替换了 GUID。 [http://csharpramblings.blogspot.ca/2011/09/communicating-between-vsto-and-udfs-in.html](http://csharpramblings.blogspot.ca/2011/09/communicating-between-vsto-and-udfs-in.html)

当我打开 Excel 时，我看到了我的新加载项，并且 UDF 在函数列表（插入函数）中显示为可用。所以我知道它正在工作。

然后，我创建了一个使用 Excel 自动化打开 Excel 的应用程序。
这是一个 Windows 窗体应用程序，我在 Form1 上放了一个按钮。我添加了对 Microsoft.Office.Interop.Excel（版本 1.6.0.0）的引用，它（在我的机器上）解析为 C:\Windows\assembly\GAC\Microsoft.Office.Interop.Excel\12.0.0.0__71e9bce111e9429c\Microsoft。 Office.Interop.Excel.dll

我从[http://support.microsoft.com/kb/302084](http://support.microsoft.com/kb/302084)获得了以下代码，尽管我删除了一些将数据放入工作表单元格的代码，因为我不需要它——我只是想要一个打开 Excel 的示例使用自动化。

我的示例程序的 Form1 的 C# 代码：

```
using System;
using System.Reflection;
using System.Windows.Forms;
using Excel = Microsoft.Office.Interop.Excel;
namespace ExcelAutomationTest
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }
        private void button1_Click(object sender, System.EventArgs e)
        {
            Excel.Application oXL;
            Excel._Workbook oWB;
            Excel._Worksheet oSheet;
            Excel.Range oRng;
            try
            {
                //Start Excel and get Application object.
                oXL = new Excel.Application();
                oXL.Visible = true;
                //Get a new workbook.
                oWB = (Excel._Workbook)(oXL.Workbooks.Add(Missing.Value));
                oSheet = (Excel._Worksheet)oWB.ActiveSheet;
                //Add table headers going cell by cell.
                oSheet.Cells[1, 1] = "First Name";
                oSheet.Cells[1, 2] = "Last Name";
                oSheet.Cells[1, 3] = "Full Name";
                oSheet.Cells[1, 4] = "Salary";
                //Make sure Excel is visible and give the user control
                //of Microsoft Excel's lifetime.
                oXL.Visible = true;
                oXL.UserControl = true;
            }
            catch (Exception theException)
            {
                String errorMessage;
                errorMessage = "Error: ";
                errorMessage = String.Concat(errorMessage, theException.Message);
                errorMessage = String.Concat(errorMessage, " Line: ");
                errorMessage = String.Concat(errorMessage, theException.Source);
                MessageBox.Show(errorMessage, "Error");
            }
        }
    } 
```

构建自动化 Excel 的 Windows 窗体应用程序。运行应用程序。它将启动 Excel。转到“公式”选项卡，然后单击“插入函数”。查看“所有”功能。在我的机器上，MYINT 不在列表中。

是否可以在使用自动化打开 Excel 时使 MYINT 功能可用？有人建议我可以使用 VSTO ThisAddIn_Startup() 中的 Excel.Application 对象来加载 UDF，但我找不到如何执行此操作的示例，帮助我的人也不知道。

我在 MSDN Excel 和 VSTO 论坛上寻求帮助，但无法清楚地了解下一步该做什么。StackOverflow 周围有一些类似的问题，但没有完全相同的问题。有没有人有任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T14:59:13.817

我遵循了[Techiella 博客上](http://techiella.wordpress.com/2010/10/19/excel-udf-not-available-in-automation-mode/)的建议，它似乎已经解决了这个问题。

我的 C# 代码如下 - 我把它放在 ThisAddIn_Startup 中：

```
foreach (AddIn addin in ThisApplication.AddIns)
{
  if (addin.Title == "MyUdf.Functions")
  {
    addin.Installed = false;
    addin.Installed = true; 
    break; 
  }
} 
```

大学教师

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-06T12:42:46.717

当从 ac# 代码打开 Excel 文件时，将不会加载所有附加加载项（这就是您在“公式”选项卡中没有找到 UDF 函数的原因），因此您必须让代码调用加载项你需要的：

# android - 从 IIS 7.5 下载 APK 以下载失败

> ID：12838259
> 
> 赞同：2
> 
> 时间：2012-10-11T11:16:30.727
> 
> 标签：android, apk, download

此代码在从 apache 服务器下载时有效，没问题。但是在测试使用安装在win7上的iis 7.5 currenlty时。它似乎不适用于 getInputStream(); 尽管在调试并将其粘贴到浏览器中时会显示文件的完整地址，但会开始下载 apk

看了本站和网上都加了 MIME TYPE .apk application/vnd.android.package-archive

```
try {

                        URL url = new URL(prefs.getString("server_address", null) + "/updates/filename.apk");
                        HttpURLConnection c = (HttpURLConnection) url.openConnection();
                        c.setRequestMethod("GET");
                        c.setDoOutput(true);
                        c.connect();

                        String PATH = Environment.getExternalStorageDirectory() + "/download/";
                        File file = new File(PATH);
                        file.mkdirs();
                        File outputFile = new File(file, "filename.apk");
                        FileOutputStream fos = new FileOutputStream(outputFile);

                        InputStream is = c.getInputStream();

                        byte[] buffer = new byte[1024];
                        int len1 = 0;
                        while ((len1 = is.read(buffer)) != -1) {
                            fos.write(buffer, 0, len1);
                        }
                        fos.close();
                        is.close();

                        } catch (IOException e) {
                            Toast.makeText(context, "error!", Toast.LENGTH_LONG).show();
                        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T11:22:08.390

只需摆脱这段代码：

```
 c.setRequestMethod("GET");
      c.setDoOutput(true);
      c.connect(); 
```

首先是没有必要的，其次， `c.setDoOutput(true);`将请求方法更改为 POST ...这就是为什么您不允许使用 405 方法...

# facebook-graph-api - 用于评论的 Facebook Graph API - SEO

> ID：12838267
> 
> 赞同：0
> 
> 时间：2012-10-11T11:16:52.963
> 
> 标签：facebook-graph-api

Facebook 提供`Comments Box`：https://developers.facebook.com/docs/reference/plugins/comments/

问题在于它使用 Iframe 时的 SEO。

解决方案是使用 Graph Api：

> **如何从我网站上留下的评论中获得 SEO 提升？**
> 
> Facebook 评论框在您页面上的 iframe 中呈现，大多数搜索引擎不会抓取 iframe 中的内容。但是，您可以通过上述图形 API 访问您网站上留下的所有评论。只需从 API 中获取评论并将它们呈现在评论框后面的页面正文中。我们建议您缓存结果，因为在每次页面加载时从图形 API 中提取评论可能会减慢页面的呈现时间。

**但是如何查询 API 以获取我的页面的所有消息？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T12:44:00.437

它在上一段中说过使用`https://graph.facebook.com/comments/?ids=`

例如

`https://graph.facebook.com/comments/?ids=http://developers.facebook.com/docs/reference/plugins/comments`

对于您的整个网站，您需要分别从每个页面中提取评论。

# ios - ios 更改 App Controller 委托

> ID：12838268
> 
> 赞同：0
> 
> 时间：2012-10-11T11:16:54.883
> 
> 标签：ios, delegates

我需要在 ios 应用程序中打开链接（用于 Facebook 登录）。为此，我只需定义一个接口方法：

```
- (BOOL) application: (UIApplication *) application handleOpenURL: (NSURL *) URL 
```

对于新版本的系统

```
- (BOOL) application: (UIApplication *) application
             openURL: (NSURL *) url
   sourceApplication: (NSString *) sourceApplication
          annotation: (id) annotation 
```

一切正常，但我需要将代码与 AppController 代码文件分离。为此，我创建了一个继承 AppController 的所有接口的类，并替换了我的对象上的 AppController 委托：

```
@implementation ApplicationProxy

id <UIApplicationDelegate> origin;
...
+ (void) changeDelegate{
   ApplicationProxy* proxy = [[ApplicationProxy alloc] init];
   origin = [[UIApplication sharedApplication] delegate];
   [[UIApplication sharedApplication] setDelegate: proxy];
}
...
// replace all the functions of origin to work properly, such as
- (Void) applicationDidBecomeActive: (UIApplication *) application {
   [origin applicationDidBecomeActive: application];
}
...
@end 
```

在 ios 5 上的项目中一切正常，但在崩溃开始时 iO 的 6 版本（和 XCode 的 4.5 版本）进行了更新。混乱在哪里？

# mongodb - 使用聚合框架对所有对象进行分组

> ID：12838269
> 
> 赞同：0
> 
> 时间：2012-10-11T11:17:00.873
> 
> 标签：mongodb, aggregation-framework

我在 MongoDB 中有一组看起来像这样的对象

```
 { "event_type": "event1", "created_at": some_date, ...more_fields... },
    { "event_type": "event2", "created_at": some_date, ...other_fields... },
    { "event_type": "event1", "created_at": some_date, ...more_fields... } 
```

现在，我希望将所有字段的上述数据按某个字段（可能并不存在于所有对象中）分组，并按最高 created_at 日期对其进行排序。我尝试使用带有以下查询的聚合框架来执行此操作：

```
 collection.aggregate([
    { "$group" => {
        :_id       => "$somefield",
        :last_time => { "$max"  => "$created_at" },
        :events    => { "$push" => { ... } }
      }
    },
    { "$match" => { "_id" => { "$ne" => nil } } },
    { "$sort" => { "last_time" => -1 } }
  ]) 
```

我面临的问题与线路有关

```
 :events    => { "$push" => { ... } } 
```

如果我输入一些特定的字段，那么它会起作用，但我不知道该集合包含哪些确切的字段。但我希望整个对象像这样返回：

```
 {
        "event_type": "event1", "last_time": some_date, "events": [
            { "event_type": "event1", "created_at": some_date, ...more_fields... },
            { "event_type": "event1", "created_at": some_date, ...more_fields... },
            ...
        ]
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T14:50:56.363

假设您想推送对象中的所有字段，但不知道这些字段到底是什么，您不能将它们包装在已知的字段父项中并推送吗？

```
{ events: {
    "event_type": "event1", "created_at": some_date, ...more_fields... 
  }
}, 
```

然后你只需要推送“事件”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T17:14:18.790

使用 group 函数可以更轻松地解决此问题：

```
options = {
  key:      "field_to_group_by",
  cond:     { ..some filter criteria.. },
  initial:  { :events  => [] },
  reduce:   "function(obj, agg) { agg.events.push(obj); }"
}
collection.group(options) 
```

这不会按我想要的顺序返回项目，但可以在客户端上进行排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T14:49:39.830

如果您先进行匹配，您将能够使用索引（如果“somefield”上存在索引）

您是否需要投影要为每个聚合值创建数组的子文档？我还没有测试过这个，但可能会希望你指出正确的方向？

就像是？

```
db.collection.aggregate( 
{ $match : { "some_field" : { $ne:null} } },  
{ $project : 
    { 
        event_type :"event_type", 
        created_at: "created_at",
        event: 
        {
            another_att: "attrib1",
            another_att2: "attrib2"
        }
     },
{ $group : 
    { 
        _id: "$event_type",
        lasttime : { $max: "$created_at"},
        theevents: { $addToSet : "$event" }
    }
 }) 
```

# c++ - .NET 平台调用中使用的命名约定

> ID：12838277
> 
> 赞同：0
> 
> 时间：2012-10-11T11:17:16.690
> 
> 标签：c++, .net, native, platform, language-interoperability

我一直在使用 Microsoft P/Invoke Interop Assistant 工具从本机 C/C++ 代码生成一些结构、委托等。

其中一个示例是函数指针（委托），它在托管代码中解析为以下名称：

```
EnumCalendarInfoProcA
EnumCalendarInfoProcW
EnumCalendarInfoProcExA
EnumCalendarInfoProcExW 
```

谁能解释A和W以及ExA和ExW之间的区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T11:22:08.727

一些函数有多种格式。Ascii (MessageBoxA) 或宽字符/unicode (MessageBoxW)。当一个函数做同样的事情，但更多的时候，这个名字通常会得到一个后缀“Ex”，并且可能意味着扩展。

像下面的函数

消息框：http : [//msdn.microsoft.com/en-us/library/windows/desktop/ms645505 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645505(v=vs.85).aspx)

MessageBoxEx： http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms645507 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645507(v=vs.85).aspx)

其中 MessageBoxEx 由参数 wLanguageId 扩展。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T12:26:31.793

您必须小心使用 PInvoke 互操作助手。它生成的声明是完全自动生成且未经编辑的。因此，它往往会产生相当尴尬的结果，您至少需要与经过编辑的声明源进行比较，例如可从 pinvoke.net 网站和 MSDN 库获得的声明源。

存在 A 和 W 版本是因为该函数操作字符串。9x 分支中的旧版本 Windows 未启用 Unicode。他们使用 A 版本，带有 8 位编码字符的字符串。这与 Windows ME 迅速而当之无愧的消亡无关。您今天遇到的所有 Windows 版本都来自 NT 分支，并且它们在核心上启用了 Unicode。

pinvoke marshaller 已经知道如何根据 [DllImport] 属性中的 CharSet 属性在 A 和 W 版本之间进行正确选择。遗憾的是，默认仍然是 Ansi，大错误，您应该始终指定 CharSet.Auto 并使用不带 W 的名称。确切的名称对于 EnumCalendarInfoProc 实际上并不重要，因为它是回调原型，您将其声明为委托。您可以选择任何名称。

EnumCalendarInfoProc 和 EnumCalendarInfoProcEx 的区别在 MSDN 文章中有很好的解释，Ex 版本有一个额外的参数。你需要使用哪一个取决于你开始枚举时使用的 api 函数。选择 EnumCalendarInfo() 或 EnumCalendarInfoEx()。后一种是有道理的。请注意 ExEx 版本，可在 Vista 及更高版本上使用。文化的变化比微软创建 Exes 的能力更快；）

在委托和函数声明上应用 CharSet.Auto。

# bash - 在makefile中使用大括号进行变量扩展不起作用

> ID：12838278
> 
> 赞同：17
> 
> 时间：2012-10-11T11:17:16.613
> 
> 标签：bash, shell, makefile, ubuntu-12.04

当我在 shell 上运行以下命令时，它可以正常工作。但如果我将它写在 Makefile 中并用“make”命令调用它，它就不起作用。

> cp wpa_{cli,supplicant,passphrase,event} /usr/local/bin/

“make”命令后的错误：

> cp: 无法统计 `wpa_{cli,supplicant,passphrase,event}': 没有这样的文件或目录

我该怎么做才能使它与 Makefile 一起工作？我使用 Ubuntu 12.04。相同的 Makefile 适用于其他 linux 发行版。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-11T11:39:34.250

Make 默认使用不支持大括号扩展的老式 Bourne shell (/bin/sh)。如果尚未设置，请将 makefile 中的 SHELL 变量设置为 /bin/bash。

只需在 makefile 顶部添加一行：

```
SHELL=/usr/bin/bash 
```

（请确认您的 bash 路径）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-12-06T18:00:39.740

正如史蒂夫 K 解释的那样，这是一种 bashism。如果你想更接近标准，你可以使用 for 循环而不会有太多麻烦。

`for x in cli supplicant passphrase event; do cp -v wpa_$$x /usr/local/bin/; done`

与 makefile 一样，将其全部放在一行或使用反斜杠将其分成几行。双美元符号表示 make 需要将 传递`$`给 shell。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-11T21:27:29.913

我喜欢@bk 的答案，因为它符合工具的约定，但作为参考，您也可以直接调用 bash shell 来执行一个命令来进行大括号扩展：

```
wpa_files := $(shell /bin/bash -c 'echo wpa_{cli,supplicant,passphrase,event}')

target:
    cp $(wpa_files) /usr/local/bin/ 
```

# android - android: src 未在自定义 TouchImageView 中显示

> ID：12838284
> 
> 赞同：0
> 
> 时间：2012-10-11T11:17:36.957
> 
> 标签：android, imageview, image-loading

嗨，我正在使用`TouchImageView`.

```
 public class NewTouchImageView extends ImageView {
    Matrix matrix = new Matrix();
    // We can be in one of these 3 states    
    static final int NONE = 0;
    static final int DRAG = 1;
    static final int ZOOM = 2;
    int mode = NONE;

    // Remember some things for zooming
    PointF last = new PointF();
    PointF start = new PointF();
    float minScale = 1f;
    float maxScale = 3f;
    float[] m;

    float redundantXSpace, redundantYSpace;

    float width, height;
    static final int CLICK = 3;
    float saveScale = 1f;
    float right, bottom, origWidth, origHeight, bmWidth, bmHeight;

    ScaleGestureDetector mScaleDetector;

    Context context;
    Drawable  stub_id,mImage ;
    int stub_idd = R.drawable.loading;
    Paint paint;

    public NewTouchImageView(Context context) {
        super(context);

        sharedConstructing(context);
        this.context = context;

    }

    public NewTouchImageView(Context context, AttributeSet attrs) {
        super(context, attrs);

         this.context = context;
        sharedConstructing(context);
    }

    private void sharedConstructing(Context context) {
        super.setClickable(true);
        this.context = context;
     //   this.setImageResource(R.drawable.popupimage);
        mScaleDetector = new ScaleGestureDetector(context, new ScaleListener());
        matrix.setTranslate(1f, 1f);
        m = new float[9];
        setImageMatrix(matrix);
        setScaleType(ScaleType.MATRIX);

        setOnTouchListener(new OnTouchListener() {

            public boolean onTouch(View v, MotionEvent event) {
                mScaleDetector.onTouchEvent(event);

                matrix.getValues(m);
                float x = m[Matrix.MTRANS_X];
                float y = m[Matrix.MTRANS_Y];
                PointF curr = new PointF(event.getX(), event.getY());

                switch (event.getAction()) {
                    case MotionEvent.ACTION_DOWN:
                        last.set(event.getX(), event.getY());
                        start.set(last);
                        mode = DRAG;
                        break;
                    case MotionEvent.ACTION_MOVE:
                        if (mode == DRAG) {
                            float deltaX = curr.x - last.x;
                            float deltaY = curr.y - last.y;
                            float scaleWidth = Math.round(origWidth * saveScale);
                            float scaleHeight = Math.round(origHeight * saveScale);
                            /*if(scaleWidth>100){
                                Log.v("GREATER THAN 100", "GREATER THAN 100");
                                return false;

                            }*/
                            if (scaleWidth < width) {
                                deltaX = 0;
                                if (y + deltaY > 0)
                                    deltaY = -y;
                                else if (y + deltaY < -bottom)
                                    deltaY = -(y + bottom); 
                            } else if (scaleHeight < height) {
                                deltaY = 0;
                                if (x + deltaX > 0)
                                    deltaX = -x;
                                else if (x + deltaX < -right)
                                    deltaX = -(x + right);
                            } else {
                                if (x + deltaX > 0)
                                    deltaX = -x;
                                else if (x + deltaX < -right)
                                    deltaX = -(x + right);

                                if (y + deltaY > 0)
                                    deltaY = -y;
                                else if (y + deltaY < -bottom)
                                    deltaY = -(y + bottom);

                            }
                            matrix.postTranslate(deltaX, deltaY);
                            last.set(curr.x, curr.y);
                        }
                        break;

                    case MotionEvent.ACTION_UP:
                        mode = NONE;
                        int xDiff = (int) Math.abs(curr.x - start.x);
                        int yDiff = (int) Math.abs(curr.y - start.y);
                        if (xDiff < CLICK && yDiff < CLICK)
                            performClick();
                        break;

                    case MotionEvent.ACTION_POINTER_UP:
                        mode = NONE;
                        break;
                }
                setImageMatrix(matrix);
                invalidate();
                return true; // indicate event was handled
            }

        });
    }

    @Override
    public void setImageBitmap(Bitmap bm) { 
        super.setImageBitmap(bm);
        if(bm != null) {
            bmWidth = bm.getWidth();
            bmHeight = bm.getHeight();
        }
    }

    public void setMaxZoom(float x)
    {
        maxScale = x;
    }

    private class ScaleListener extends ScaleGestureDetector.SimpleOnScaleGestureListener {
        @Override
        public boolean onScaleBegin(ScaleGestureDetector detector) {
            mode = ZOOM;
            return true;
        }

        @Override
        public boolean onScale(ScaleGestureDetector detector) {
            float mScaleFactor = detector.getScaleFactor();
            float origScale = saveScale;
            saveScale *= mScaleFactor;
            if (saveScale > maxScale) {
                saveScale = maxScale;
                mScaleFactor = maxScale / origScale;
            } else if (saveScale < minScale) {
                saveScale = minScale;
                mScaleFactor = minScale / origScale;
            }
            right = width * saveScale - width - (2 * redundantXSpace * saveScale);
            bottom = height * saveScale - height - (2 * redundantYSpace * saveScale);
            if (origWidth * saveScale <= width || origHeight * saveScale <= height) {
                matrix.postScale(mScaleFactor, mScaleFactor, width / 2, height / 2);
                if (mScaleFactor < 1) {
                    matrix.getValues(m);
                    float x = m[Matrix.MTRANS_X];
                    float y = m[Matrix.MTRANS_Y];
                    if (mScaleFactor < 1) {
                        if (Math.round(origWidth * saveScale) < width) {
                            if (y < -bottom)
                                matrix.postTranslate(0, -(y + bottom));
                            else if (y > 0)
                                matrix.postTranslate(0, -y);
                        } else {
                            if (x < -right) 
                                matrix.postTranslate(-(x + right), 0);
                            else if (x > 0) 
                                matrix.postTranslate(-x, 0);
                        }
                    }
                }
            } else {
                matrix.postScale(mScaleFactor, mScaleFactor, detector.getFocusX(), detector.getFocusY());
                matrix.getValues(m);
                float x = m[Matrix.MTRANS_X];
                float y = m[Matrix.MTRANS_Y];
                if (mScaleFactor < 1) {
                    if (x < -right) 
                        matrix.postTranslate(-(x + right), 0);
                    else if (x > 0) 
                        matrix.postTranslate(-x, 0);
                    if (y < -bottom)
                        matrix.postTranslate(0, -(y + bottom));
                    else if (y > 0)
                        matrix.postTranslate(0, -y);
                }
            }
            return true;

        }
    }

    @Override
    protected void onMeasure (int widthMeasureSpec, int heightMeasureSpec)
    {
        super.onMeasure(widthMeasureSpec, heightMeasureSpec);
        width = MeasureSpec.getSize(widthMeasureSpec);
        height = MeasureSpec.getSize(heightMeasureSpec);
        //Fit to screen.
        float scale;
        float scaleX =  (float)width / (float)bmWidth;
        float scaleY = (float)height / (float)bmHeight;
        scale = Math.min(scaleX, scaleY);
        matrix.setScale(scale, scale);
        setImageMatrix(matrix);
        saveScale = 1f;

        // Center the image
        redundantYSpace = (float)height - (scale * (float)bmHeight) ;
        redundantXSpace = (float)width - (scale * (float)bmWidth);
        redundantYSpace /= (float)2;
        redundantXSpace /= (float)2;

        matrix.postTranslate(redundantXSpace, redundantYSpace);

        origWidth = width - 2 * redundantXSpace;
        origHeight = height - 2 * redundantYSpace;
        right = width * saveScale - width - (2 * redundantXSpace * saveScale);
        bottom = height * saveScale - height - (2 * redundantYSpace * saveScale);
        setImageMatrix(matrix);
    } 
```

并且各自的 xml 在这里：

```
 <com.ifap.util.NewTouchImageView
    android:id="@+id/image"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="10dip"
    android:scaleType="matrix"
   android:src="@drawable/loading"
    android:contentDescription="@string/image_desc" /> 
```

在适配器获取视图中： public View getView(int position, View convertView, ViewGroup parent) {

```
 ViewHolder holder;
    if (convertView == null) {
        convertView = inflater.inflate(R.layout.item, null);
        holder = new ViewHolder();
        holder.icon = (NewTouchImageView) convertView
                .findViewById(R.id.image);
    } else
        holder = (ViewHolder) convertView.getTag();
imageLoader.DisplayImage(URL, holder.icon);

    return convertView;

} 
```

ImageLoader.Java 从[这里](https://github.com/thest1/LazyList/tree/master/src/com/fedorvlasov/lazylist)

`imageview`在从服务器加载图像之前，如何在其中显示临时图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T11:33:52.487

代替 android:src="@drawable/loading" 您可以提供默认显示的临时图像名称。或者你可以设置 holder.icon.setImageBitmap(bitmapImage)。并运行 imageLoader.DisplayImage(URL, holder.icon); 在 uiThread 上。所以它会在图像下载后立即更新用户界面。

# ruby-on-rails - 在rails上复制旧对象属性ruby

> ID：12838286
> 
> 赞同：0
> 
> 时间：2012-10-11T11:17:43.457
> 
> 标签：ruby-on-rails, object, activerecord, clone

您好想复制旧对象的一些属性并创建具有很少更改属性的新对象。我使用的是 rails 3.0.7 版，因此我无法使用 old_object.dup。我不想使用 old_object.clone 因为它给了我记录的浅表副本，包括复制冻结状态。因此我遵循以下方法

```
@old_product = Product.find(params[:id])

@product = Product.create(@old_product.attributes.merge({:description => params[:product][:description], :category => params[:product][:box_id], :user_id => current_user.id})) 
```

但它给了我错误用户不能为空。事实上，它也没有存储我的描述和类别。这是正确的方法吗？复制旧对象属性并更改其中一些属性的任何其他方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T12:01:47.273

你最好不要设置`attr_accessible :user_id`. 这将是您系统中的一个漏洞，任何人都可以通过批量分配来更改该值。而是在此代码中手动分配它或使用一些克隆功能并更改其他属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T11:44:00.893

我明白了...在产品模型中**：user_id**现在已添加到**atr_accessible**中。最初我无法访问该属性，因此它不会更新或更改 new_object 中的该属性。现在它工作正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T16:13:20.807

一个混乱的解决方案将添加`attr_accessible :user_id`到您的模型中，尽管不建议这样做，因为它会使您的应用程序容易受到 Mass Assignment 的利用。

如果您打算在开发中使用它一段时间，那很好。

# css - Bootstrap 三列布局堆叠问题

> ID：12838293
> 
> 赞同：2
> 
> 时间：2012-10-11T11:18:04.397
> 
> 标签：css, twitter-bootstrap, css-float, responsive-design

我在 Bootstrap 中使用 3 列布局，右侧有导航、内容和小部件，但是当屏幕处于移动视图中时，希望布局按如下方式堆叠；导航小部件，然后内容，请告知。

请参阅图像以了解所需的桌面和移动布局顺序：

![http://www.nojomedia.com/images/3column-requirements.jpg](../Images/c73dbbd109149e0d20b1c0bb0201e422.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T19:15:59.510

将块按移动设备所需的顺序放置。然后将“小部件”拉到右侧：

```
<div class="container">
    <div class="row">
        <div class="span3 custom-nav"></div>
        <div class="span3 custom-widget pull-right"></div>
        <div class="span6 custom-content"></div>
    </div>
</div>​ 
```

在移动设备上，重置浮动：

```
@media (max-width: 767px) {
    [class*="span"].pull-right {
        float: none;
    }
} 
```

还有几件事：

*   我在`custom`这里使用前缀来避免遇到 Bootstrap 的预定义`.nav`和`.content`类。
*   看看它在[fiddle](http://jsfiddle.net/TUexV/2/)上是如何工作的。
*   检查我已回答[的相关问题。](https://stackoverflow.com/questions/12226859/is-it-possible-to-choose-the-stacking-order-of-spans/12227238#12227238)
*   欢迎来到 StackOverflow。

# c# - 安装在另一台机器上时服务未触发事件

> ID：12838294
> 
> 赞同：0
> 
> 时间：2012-10-11T11:18:05.997
> 
> 标签：c#, windows-services

我使用 C# 创建了一个 Windows 服务。一切正常。我已经在我的机器上测试过了。我使用了每隔一分钟触发一次的计时器。一切都在我的机器上运行良好，但是当我将它安装在另外两台机器上以测试它不工作时。1分钟后它没有触发事件。

可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T11:25:49.000

尝试在以更高权限失败的机器上运行它：以本地系统帐户登录。这应该允许您测试这是否是权限问题。如果您在服务启动时设置日志记录，您可能会因为无法访问您希望写入的事件日志而失败。

与[https://stackoverflow.com/a/510225相关](https://stackoverflow.com/a/510225)

# tridion - 如何配置 GUI 扩展

> ID：12838300
> 
> 赞同：4
> 
> 时间：2012-10-11T11:18:32.013
> 
> 标签：tridion

我想通过配置文件使我的数据扩展器可配置。我发现编辑器配置文件中有一个节点“customconfiguration”。我猜这可以用来配置扩展的行为。有没有办法从 C# 访问该自定义配置节点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T11:35:53.433

我不知道它是否适用于数据扩展器，但我使用以下代码从模型配置中读取自定义配置：

```
using System.Xml;
using Tridion.Web.UI;
using Tridion.Web.UI.Core;

namespace Custom.Model
{
    public class Configuration
    {
        public static string GetConfigString(string configItem) {
            XmlDocument customConfiguration = ConfigurationManager.Models["Custom.Model"].CustomXml;
            XmlNamespaceManager ns = new XmlNamespaceManager(new NameTable());
            ns.AddNamespace("c", Constants.EDITOR_CONFIG_NAMESPACE);
            XmlNode node = customConfiguration.SelectSingleNode("//c:customconfiguration/c:clientconfiguration/c:" + configItem, ns);
            string configValue = node != null ? node.InnerText : "";

            return configValue;
        }
    }
} 
```

您可以使用 ConfigurationManager.Editors 来访问您的编辑器配置，而不是使用 ConfigurationManager.Models。您通过启用扩展的 System.config 中指定的名称引用模型或编辑器，例如下面示例中定义的 CME。

```
<editor name="CME">
  <installpath>C:\Program Files (x86)\Tridion\web\WebUI\Editors\CME\</installpath>
  <configuration>Configuration\CME.config</configuration>
  <vdir>CME</vdir>
</editor> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T12:21:45.383

WebRoot/Configuration文件夹中的配置文件是CME应用的通用配置文件，“Core”配置文件。除此之外，CME 应用程序中的每个编辑器和模型都有配置文件。这些配置文件具有“customconfiguration”部分，可从 ConfigurationManager 访问。

创建 DataExtenderr 时，您需要创建新的扩展模型。以及该模型的配置文件，您可以在其中填写自定义配置部分所需的信息。

# c - 数组的基地址

> ID：12838303
> 
> 赞同：1
> 
> 时间：2012-10-11T11:18:42.703
> 
> 标签：c, arrays, pointers

我正在浏览一本书，在那里我发现了这个问题

提及数组名称是否会在所有上下文中给出基地址？

有人可以解释数组名称不给出基地址的情况吗？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T11:22:23.910

数组到指针的衰减并非无处不在。一个例子是 的论点`sizeof`，另一个是 的论点`&`：

```
int arr[10];

sizeof(arr);          // gives 10 * sizeof(int), NOT sizeof(int*)

int (*p)[10] = &arr;  // gives the address of the array, NOT of an rvalue 
```

第二个例子相当明显，因为数组到指针衰减的值不是左值，所以它没有任何其他意义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T12:51:59.510

[C 2011在线草案](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)

> ### 6.2.3.1 左值、数组和函数指示符
> 
> 3 除非它是运算`sizeof`符、运算符`_Alignof`或一元`&`运算符的操作数，或者是用于初始化数组的字符串字面量，否则类型为 ''array of *type* '' 的表达式将转换为类型为 ' 的表达式'pointer to *type* '' 指向数组对象的初始元素并且不是左值。如果数组对象具有寄存器存储类，则行为未定义。

所以，给定一个像这样的声明

```
int a[N]; 
```

以下表达式*不会*将表达式转换`a`为指针类型：

```
sizeof a
_Alignof a
&a 
```

鉴于以下声明

```
char str[] = "This is a test";
char *p    = "This is another test"; 
```

字符串文字`"This is a test"`用于初始化 的数组`char`，因此不会将其转换为指针表达式；相反，数组的内容将被复制到`str`. 相反，字符串文字`"This is another test"`不用于初始化数组，因此将其转换为指针表达式，并将指针的值*写入*`p`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-11T11:22:07.490

一种这样的上下文是`sizeof`运算符，其中`sizeof(array)`给出了数组的（字节）大小。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-11T11:23:41.153

数组名称给出第一个元素的地址：

int a = {1,2,3};

假设a的地址是12

printf(" %u %u",a,&a);

结果是

12 12

其中 a 是第一个元素的地址， &a 是数组的地址。相同的值但不同的语义

printf(" %u %u", a+1, &a+1);

结果是

14 18

a 增加了 2，因为 'a' 是整数的地址，并且 a+1 增加了 2，即 sizeof(int)

其中 &a+1 按数组大小创建，即 3 int = 3 * sizeof(int)

假设 int 的 sizeof 为 2

# php - 在 PHP 中响应来自客户端站点的 Https POST 请求

> ID：12838304
> 
> 赞同：1
> 
> 时间：2012-10-11T11:18:53.413
> 
> 标签：php, post, ssl, https, openssl

我有一个使用 SSL 保护的中央网站 (A)。

其他客户端站点（比如说 B、C、D、E .....）将连接到该站点 A。

要求是从站点 B（或 C、D、E .....）向站点 A 发送 HTTPS POST 请求。

请求的参数为

```
WEBSITEKEY=keyvalue; 
```

那么站点 A 必须对此请求作出响应。

响应应该有一个必不可少的参数，因为，

```
SECUREKEY=key-value-secure;
Para1=para1value;
Para2=para2value;
Para3=para3value;
Para4=para4value; 
```

如何在 PHP 中实现这个响应部分？我是 SSL POST 和响应的新手。

稍后编辑，

我们总是发送请求并得到即将到来的响应。在这里，我需要为客户端请求提供响应/创建响应。我怎样才能在 PHP 中做到这一点？我发现以下代码..

```
<?php
//process the request by fetching the info
$headers = http_get_request_headers();
$result = http_get_request_body();
//do stuff with the $headers and $result variables....
//then send your response
HttpResponse::status(200);
HttpResponse::setContentType('text/xml');
HttpResponse::setHeader('From', 'Lymber');
HttpResponse::setData('<?xml version="1.0"?><note>Thank you for posting your data! We    love php!</note>');
HttpResponse::send();
?> 
```

将响应从我的 SSL 启用站点发送到正常站点是否正确？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T17:55:18.287

SSL 部分无关紧要；它将由 Web 服务器处理，PHP 将照常接收请求。

您唯一需要做的就是构建您的请求，为此，您需要知道此请求将采用的**格式**。此外，您是否需要一些特殊的 MIME 类型或其他什么。

例如，假设答案必须是 JSON。然后它需要是这样的：

```
<?php
    if (!isset($_POST['WEBSITEKEY'])) {
         // Handle error. E.g.
         Header("HTTP/1.1 400 Bad Request");
         die();
    }

    $websitekey = $_POST['WEBSITEKEY'];

    require 'yourcode.php';

    $response = array(
        'SECUREKEY' => md5($secret . $websitekey),
        'para1'     => date('Y-m-d H:i:s'),
        'para2'     => 'Hello world',
    );
    // Specifying charset isn't strictly necessary but may be useful.
    Header("Content-Type: application/json;charset=UTF-8");
    $data = json_encode($response);
    $len  = strlen($data);
    // Some browser/proxy/load balancer may get better performance if the
    // length is known beforehand. This also disables Chunked-Encoding, which
    // in some scenarios may give problems.
    Header("Content-Length: {$len}");
    die($data); // Ensure no more output after this.. 
```

如何处理`$websitekey`完全取决于您的应用程序逻辑。在这里，它被连接到一个秘密的盐字符串并用于构建响应`SECUREKEY`，但您基本上可以做任何您想做的事情。

# three.js - 三.js轨迹球控制无滚动

> ID：12838308
> 
> 赞同：11
> 
> 时间：2012-10-11T11:19:12.967
> 
> 标签：three.js

有谁知道是否/如何修改轨迹球控件以保持水平，但仍允许您围绕对象旋转？

通过将axis.x 和axis.z 设置为0，它会停止滚动，但也会停止在对象上旋转的能力。

轨道控制接近我正在寻找的，但没有平移的能力。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-12-10T18:25:28.247

自从提出这个问题以来已经有一段时间了，但是我遇到了同样的问题并且在网上没有找到太多讨论，所以我想我会发布我的解决方案。

如果你必须使用 TrackballControls 并且你想要一个平坦的地平线，你可以简单地编辑 TrackballControls.js 库，在 'this.rotateCamera' 方法的末尾添加以下行

this.object.up = new THREE.Vector3(0,1,0); 这会将相机向上方向锁定在 (0,1,0) 方向（即 y 方向）。整个修改后的方法函数将显示为：

```
this.rotateCamera = function () {

var angle = Math.acos( _rotateStart.dot( _rotateEnd ) / _rotateStart.length() / _rotateEnd.length() );

if ( angle ) {

    var axis = ( new THREE.Vector3() ).crossVectors( _rotateStart, _rotateEnd ).normalize();
        quaternion = new THREE.Quaternion();

    angle *= _this.rotateSpeed;

    quaternion.setFromAxisAngle( axis, -angle );

    _eye.applyQuaternion( quaternion );
    _this.object.up.applyQuaternion( quaternion );

    _rotateEnd.applyQuaternion( quaternion );

    if ( _this.staticMoving ) {

        _rotateStart.copy( _rotateEnd );

    } else {

        quaternion.setFromAxisAngle( axis, angle * ( _this.dynamicDampingFactor - 1.0 ) );
        _rotateStart.applyQuaternion( quaternion );

    }

}

// Lock the camera up direction
this.object.up = new THREE.Vector3(0,1,0);

}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T05:32:37.837

这似乎对我有用，仍在研究它背后的数学。[编辑] 我`camera.lookAt(someObj)`先用，然后这个。

```
camera.rotation.z = Math.sin(camera.rotation.y)/3.5 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-19T12:48:25.877

以[WestLangley 评论](https://stackoverflow.com/questions/12838308/three-js-trackball-control-without-the-roll#comment25140173_12838308)为基础，在 OrbitControls 上启用[screenSpacePanning](https://threejs.org/docs/#examples/en/controls/OrbitControls.screenSpacePanning)，为您提供与 TrackballControls 相同的功能，无需滚动。

```
 let controls = new THREE.OrbitControls(camera);
  controls.screenSpacePanning = true; 
```

# c# - UPDATE 语句中的语法错误 C# 中的 OleDb 异常

> ID：12838309
> 
> 赞同：0
> 
> 时间：2012-10-11T11:19:14.000
> 
> 标签：c#, winforms, oledb

我已经仔细检查了我的 SQL 语句，似乎我的 SQL 语句是错误的。我不知道为什么它不起作用。我的 SQL 语句是正确的，它导致了这个 OleDBException。

这是代码

```
public void updateAccount(Int32 accountid, String username, String password, String isdisable)
{
     con.ConnectionString = db.konek();
     String sql = "UPDATE accounts SET username = @username, password = @password, isdisable = @isdisable WHERE accountid = @accountid";
     try
     {
         con.Open();
         OleDbCommand cmd = new OleDbCommand(sql, con);
         cmd.Parameters.AddWithValue("@username", username);
         cmd.Parameters.AddWithValue("@password", password);
         cmd.Parameters.AddWithValue("@isdisable", isdisable);
         cmd.Parameters.AddWithValue("@accountid", accountid);
         cmd.ExecuteNonQuery();
     }
     finally
     {
         con.Close();
     }
} 
```

我的 MS Access 表的屏幕截图 ![在此处输入图像描述](../Images/1c8bdf31a383cd8edba46c4c67e601bb.png)

异常截图 ![在此处输入图像描述](../Images/46c0f8a8dcfe6c29e5496bc985c87124.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T12:37:03.633

您正在使用[MICROSOFT JET 保留字](http://support.microsoft.com/kb/321266)密码。
这是您的语法错误的根源。

你应该用方括号封装你的 sql 命令

```
 String sql = "UPDATE accounts SET username = @username, [password] = @password, "  + 
              "isdisable = @isdisable WHERE accountid = @accountid"; 
```

而对于命名参数问题。
就 Microsoft Access 而言，提供程序 Microsoft.ACE.OLEDB.12.0 允许您使用与 SqlServer 兼容的上述语法。但是，在 OleDbCommand 的 OleDbParameter 集合中插入参数时，您应该尊重参数占位符的正确顺序

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T11:35:20.163

当您添加这样的命名参数时，不会在 sql 查询中替换文本。您需要使用“？” 在 sql 字符串中，然后将替换参数：

```
string sql = "UPDATE accounts SET username = ?, password = ?, isdisable = ? WHERE accountid = ?" 
```

您在那里使用命名参数所做的操作仅适用于过程，而不适用于文本。

如果您的命令设置如下：

```
cmd.CommandType = CommandType.StoredProcedure 
```

然后命名参数将起作用。但是，您使用的是默认的 CommandType.Text，因此您需要使用“？” 为了让 OLEDB 驱动程序使用您的参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T04:59:45.417

更新代码用于 SQL 服务器中的存储过程，可能不适用于访问数据库：

```
 string _Update_Emp = "UPDATE AlbahraniNetwork SET FirstName=@FirstName,SecondName=@SecondName,LastName=@LastName,Phone=@Phone,Cell=@Cell,Email=@Email,Address=@Address where FirstName=@FirstName";

        string appPath = Path.GetDirectoryName(Application.ExecutablePath);
        if (!appPath.EndsWith("\\"))
            appPath += "\\";
        _Conn.ConnectionString = (@"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + appPath + "Database31.accdb");

        //_Conn.ConnectionString = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\Users\Abdullah\documents\visual studio 2010\Projects\AlbahraniNetwork2\AlbahraniNetwork2\Database31.accdb";
        _Conn.Open();
        OleDbCommand _Update_Command = new OleDbCommand(_Update_Emp, _Conn);

        _Update_Command.Parameters.AddWithValue("@FirstName", FirstName.Text);
        _Update_Command.Parameters.AddWithValue("SecondName", SecondName.Text);
        _Update_Command.Parameters.AddWithValue("@LastName", LastName.Text);
        _Update_Command.Parameters.AddWithValue("@Phone", Phone.Text);
        _Update_Command.Parameters.AddWithValue("@Cell", Cell.Text);
        _Update_Command.Parameters.AddWithValue("@Email", Email.Text);
        _Update_Command.Parameters.AddWithValue("@Address", Address.Text);
        _Update_Command.ExecuteNonQuery(); 
```

让它简单，而不是使用：

```
 string _Update_Emp = "UPDATE AlbahraniNetwork SET " +
       FirstName=\"" + FirstName.Text + "\"" +
       ",SecondName=\"" + SecondName.Text  + "\"" +
       ",LastName=\""+ LastName.Text  + "\"" +
       ",Phone=\""+ Phone.Text + "\"" +
       ",Cell=\"" + Cell.Text + "\"" +
       ",Email=\"" + Email.Text + "\"" +
       ",Address=\"" + Address.Text + "\"" +
       " where FirstName=\"" + FirstName.Text +";";

        string appPath = Path.GetDirectoryName(Application.ExecutablePath);
        if (!appPath.EndsWith("\\"))
            appPath += "\\";
        _Conn.ConnectionString = (@"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + appPath + "Database31.accdb");

        //_Conn.ConnectionString = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\Users\Abdullah\documents\visual studio 2010\Projects\AlbahraniNetwork2\AlbahraniNetwork2\Database31.accdb";
        _Conn.Open();
        OleDbCommand _Update_Command = new OleDbCommand(_Update_Emp, _Conn); 
```

# java - 在使用 Http 连接时，在 Java 中，为什么我们总是要在写入之前进行读取调用？

> ID：12838310
> 
> 赞同：0
> 
> 时间：2012-10-11T11:19:18.213
> 
> 标签：java, http, inputstream, outputstream

我有一个数据包要通过 Http 连接从客户端 1 发送到客户端 2。让我们将此数据包称为数据包 1。我不希望客户端 2 对数据包 1 有任何回复。我现在想发送数据包 2。如果我尝试将数据包 2 写入连接而不读取为数据包 1 发送的回复，我会得到一个例外。当我对看到的内容不感兴趣时​​，为什么要阅读数据包 1 的响应？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T11:37:26.107

如果您使用 HTTP，则需要符合[HTTP 规范](http://www.w3.org/Protocols/rfc2616/rfc2616.html)中规定的 HTTP 协议。这表示客户端向服务器发送请求消息，服务器发送响应。客户端需要在连接上发送另一个请求之前完全读取该响应。

> 因此，如果不读取先前请求的响应，我就无法编写请求吗？

不，那将违反协议。它*可能*适用于一两个请求，但最终连接的服务器到客户端会“备份”并且事情会中断。HTTP 不应该以这种方式工作。

如果你不想符合 HTTP 的要求，你应该使用不同的协议……或者发明你自己的特定于应用程序的协议。

* * *

目前尚不清楚为什么您会立即收到异常。（你没有提到异常是什么，或者你正在使用什么客户端 HTTP 库。）但我*希望*异常来自 HTTP 实现，告诉你你使用的 API 不正确。

# mysql - 用于多个条件检查和更新的 MySQL 查询问题

> ID：12838313
> 
> 赞同：0
> 
> 时间：2012-10-11T11:19:29.203
> 
> 标签：mysql

我们是否可以编写可以根据成功实现 3 个记录字段来更新单个记录的查询。

例如

**第一个表：table1**

**第一个表字段**

ID INT

名称 varchar

status enum('full', 'half') 默认为 Null

**第二张表：table2**

**第二个表字段**

ID INT

table1_id int - 外键

数量 1 个整数

数量 2 整数

=============

# 表格1

1

测试

空值

# 表2

编号 - > 1

table1_id -> 1

数量 1 -> 1

数量2 - > 2

* * *

编号 - > 2

table1_id -> 1

数量 1 -> 2

数量2 - > 2

================

一对多关系

表 1 --> 表 2

========================

将状态字段（table1）更新为“完整”的条件是，对于 table2 中 table1_id 的所有记录，具有 Qty1 == qty2（对于 table1_id 的所有记录）和 qty2 ！=0

否则休息到“一半”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:16:18.317

如果您聚合`Table2`，取`SUM()`您希望测试每条记录的布尔表达式的 ，结果将是匹配记录的数量（因为`TRUE`转换为和`1`）。因此，只需要检查匹配记录的数量是否等于记录的总数：`FALSE``0`

```
UPDATE Table1 SET status = (
  SELECT IF(SUM(Qty1=Qty2 AND Qty2!=0) = COUNT(*), 'full', 'half')
  FROM   Table2
  WHERE  table1_id = Table1.id
) 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/19fe8/1/0)上查看。

# automated-tests - 如何以编程方式在 RFT 8.1.0 中获取对象识别分数？

> ID：12838319
> 
> 赞同：2
> 
> 时间：2012-10-11T11:19:46.383
> 
> 标签：automated-tests, rft

在 RFT 8.1.0 中，有没有办法以编程方式知道对象的识别分数？

有时，当您执行类似的操作时，`html_button().click()`会收到一个警告，指出该对象无法完全识别，但该操作已正确完成。

我想`some GuiTestObjects`在脚本运行时按他们的识别分数“排序”，并对最相关的一个（分数较低的那个）执行点击操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T04:19:23.223

如果您打开对象映射并通过 slec 选择“更新识别属性”，那么它将向您显示向导，该向导将显示哪些属性匹配与哪些不匹配。此外，评分不仅考虑了当前对象的识别属性，还考虑了父对象的共同识别分数。

# java - Jsoup 不解析特定标签

> ID：12838320
> 
> 赞同：3
> 
> 时间：2012-10-11T11:19:53.800
> 
> 标签：java, android, xml, jsoup

我正在解析 xml 文件，在标签之间选择文本。一切解析都很好，除了一项。这是一段xml：

```
 <ipb>
    <categories>
    <category>
    <id>13</id>
    <name>ARSENAL FC</name>
    <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=13</url>
    <forums>
    <forum>...</forum>
    <forum>
    <id>36</id>

    <name>DOWNLOAD</name>

    <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=36</url>
    <description>...</description>
    <type>1</type>
    <topics>21</topics>
    <replies>1 236</replies>
    <lastpost>
    <date>27 Сентябрь 2012 - 18:22</date>
    <name>ВИДЕО-сезон-2012/13</name>
    <id>2680</id>
    <url>
     http://www.fc-arsenal.com/ipb/xml.php?showtopic=2680&view=getlastpost
     </url>
     <user>
     <id>6455</id>
      <name>mArt_</name>
      <url>
       http://www.fc-arsenal.com/ipb/xml.php?showuser=6455
        </url>
       </user>
     </lastpost>
       </forum> 
```

一切都很好，除了

```
<name>DOWNLOAD</name> 
```

这是在标签中选择文本。

```
 protected Boolean doInBackground(String... arg0) {
    try {
        doc = Jsoup.connect(changeLinkToXml(arg0[0])).get(); //getting xml file
        Elements forums = doc.select("name:contains(ARSENAL FC)~forums>forum");
        forumNames = new ArrayList<String>();
        for (Element element:forums){
            forumNames.add(element.getElementsByTag("name").first().text());
        }
        Log.i("forums", forumNames.toString());
        return true;
    } catch (IOException e) {
        e.printStackTrace();
        return false;
    }
} 
```

当然，Log.i("forums", forumNames.toString()) 的输出：

```
INFO/forums(12014): [Gunners, Premier League, FA Cup, Carling Cup, UEFA Champions League, Трансферы, Арсенальский офф-топ] 
```

这里没有 DOWNLOAD 字符串。

编辑：发布完整的 xml 文件：

```
<?xml version="1.0" encoding="UTF-8" ?>
<ipb>

        <categories>

            <category>
                <id>13</id>
                <name>ARSENAL FC</name>
                <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=13</url>
                <forums>

                    <forum>
                        <id>1</id>
                        <name>Gunners</name>
                        <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=1</url>
                        <description><![CDATA[все о канонирах: героях настоящего времени, прошлого и будущего]]></description>
                            <type>1</type>
                        <topics>204</topics>
                        <replies>65 812</replies>
                        <lastpost>
                                <date>Сегодня, 15:01</date>
                            <name>Лучший игрок сентября. Сезо...</name>
                            <id>2732</id>
                            <url>http://www.fc-arsenal.com/ipb/xml.php?showtopic=2732&amp;view=getlastpost</url>
                            <user>

                                <id>35318</id>
                                <name>Podolski</name>
                                <url>http://www.fc-arsenal.com/ipb/xml.php?showuser=35318</url>                                     

                            </user>
                        </lastpost>                 

                        <subforums>

                            <subforum>
                                <id>19</id>
                                <name>Игрок месяца</name>
                                <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=</url>
                            </subforum>

                            <subforum>
                                <id>32</id>
                                <name>ex-gunners</name>
                                <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=</url>
                            </subforum>

                        </subforums>

                    </forum>

                    <forum>
                        <id>2</id>
                        <name>Premier League</name>
                        <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=2</url>
                        <description><![CDATA[английская Премьер Лига. Размышления и обзоры матчей]]></description>
                            <type>1</type>
                        <topics>330</topics>
                        <replies>77 165</replies>
                        <lastpost>
                                <date>10 Октябрь 2012 - 13:12</date>
                            <name>West Ham - ARSENAL</name>
                            <id>2730</id>
                            <url>http://www.fc-arsenal.com/ipb/xml.php?showtopic=2730&amp;view=getlastpost</url>
                            <user>

                                <id>33744</id>
                                <name>bartlby</name>
                                <url>http://www.fc-arsenal.com/ipb/xml.php?showuser=33744</url>                                     

                            </user>
                        </lastpost>                 

                        <subforums>

                            <subforum>
                                <id>67</id>
                                <name>Сезон 2011/12</name>
                                <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=</url>
                            </subforum>

                            <subforum>
                                <id>60</id>
                                <name>Сезон 2010/11</name>
                                <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=</url>
                            </subforum>

                            <subforum>
                                <id>57</id>
                                <name>Сезон 2009/10</name>
                                <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=</url>
                            </subforum>

                            <subforum>
                                <id>37</id>
                                <name>Сезон 2008/09</name>
                                <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=</url>
                            </subforum>

                            <subforum>
                                <id>34</id>
                                <name>Сезон 2007/08</name>
                                <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=</url>
                            </subforum>

                            <subforum>
                                <id>25</id>
                                <name>Сезон 2006/07</name>
                                <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=</url>
                            </subforum>

                            <subforum>
                                <id>26</id>
                                <name>Сезон 2005/06</name>
                                <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=</url>
                            </subforum>

                            <subforum>
                                <id>27</id>
                                <name>Сезон 2004/05</name>
                                <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=</url>
                            </subforum>

                            <subforum>
                                <id>28</id>
                                <name>Сезон 2003/04</name>
                                <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=</url>
                            </subforum>

                        </subforums>

                    </forum>

                    <forum>
                        <id>3</id>
                        <name>FA Cup, Carling Cup</name>
                        <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=3</url>
                        <description><![CDATA[самый старый футбольный трофей мира, а также Carling Cup (Кубок Лиги). Размышления и обзоры матчей]]></description>
                            <type>1</type>
                        <topics>73</topics>
                        <replies>14 211</replies>
                        <lastpost>
                                <date>29 Сентябрь 2012 - 02:39</date>
                            <name>ARSENAL - Coventry City</name>
                            <id>2721</id>
                            <url>http://www.fc-arsenal.com/ipb/xml.php?showtopic=2721&amp;view=getlastpost</url>
                            <user>

                                <id>1163</id>
                                <name>miidi</name>
                                <url>http://www.fc-arsenal.com/ipb/xml.php?showuser=1163</url>                                      

                            </user>
                        </lastpost>                 

                        <subforums>

                            <subforum>
                                <id>68</id>
                                <name>Сезон 2011/12</name>
                                <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=</url>
                            </subforum>

                            <subforum>
                                <id>61</id>
                                <name>Сезон 2010/11</name>
                                <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=</url>
                            </subforum>

                            <subforum>
                                <id>58</id>
                                <name>Сезон 2009/10</name>
                                <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=</url>
                            </subforum>

                            <subforum>
                                <id>38</id>
                                <name>Сезон 2008/09</name>
                                <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=</url>
                            </subforum>

                            <subforum>
                                <id>33</id>
                                <name>Сезон 2007/08</name>
                                <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=</url>
                            </subforum>

                            <subforum>
                                <id>21</id>
                                <name>Сезон 2006/07</name>
                                <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=</url>
                            </subforum>

                            <subforum>
                                <id>22</id>
                                <name>Сезон 2005/06</name>
                                <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=</url>
                            </subforum>

                            <subforum>
                                <id>23</id>
                                <name>Сезон 2004/05</name>
                                <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=</url>
                            </subforum>

                            <subforum>
                                <id>24</id>
                                <name>Сезон 2003/04</name>
                                <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=</url>
                            </subforum>

                        </subforums>

                    </forum>

                    <forum>
                        <id>4</id>
                        <name>UEFA Champions League</name>
                        <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=4</url>
                        <description><![CDATA[Лига Европейских Чемпионов. Размышления и обзоры матчей]]></description>
                            <type>1</type>
                        <topics>112</topics>
                        <replies>28 686</replies>
                        <lastpost>
                                <date>05 Октябрь 2012 - 20:16</date>
                            <name>ARSENAL - Olympiacos</name>
                            <id>2728</id>
                            <url>http://www.fc-arsenal.com/ipb/xml.php?showtopic=2728&amp;view=getlastpost</url>
                            <user>

                                <id>7062</id>
                                <name>H.A.L.O.</name>
                                <url>http://www.fc-arsenal.com/ipb/xml.php?showuser=7062</url>                                      

                            </user>
                        </lastpost>                 

                        <subforums>

                            <subforum>
                                <id>69</id>
                                <name>Сезон 2011/12</name>
                                <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=</url>
                            </subforum>

                            <subforum>
                                <id>62</id>
                                <name>Сезон 2010/11</name>
                                <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=</url>
                            </subforum>

                            <subforum>
                                <id>59</id>
                                <name>Сезон 2009/10</name>
                                <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=</url>
                            </subforum>

                            <subforum>
                                <id>39</id>
                                <name>Сезон 2008/09</name>
                                <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=</url>
                            </subforum>

                            <subforum>
                                <id>35</id>
                                <name>Сезон 2007/08</name>
                                <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=</url>
                            </subforum>

                            <subforum>
                                <id>29</id>
                                <name>Сезон 2006/07</name>
                                <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=</url>
                            </subforum>

                            <subforum>
                                <id>30</id>
                                <name>Сезон 2005/06</name>
                                <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=</url>
                            </subforum>

                            <subforum>
                                <id>31</id>
                                <name>Сезон 2004/05</name>
                                <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=</url>
                            </subforum>

                        </subforums>

                    </forum>

                    <forum>
                        <id>36</id>
                        <name>DOWNLOAD</name>
                        <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=36</url>
                        <description><![CDATA[видео, фото, аудио]]></description>
                            <type>1</type>
                        <topics>21</topics>
                        <replies>1 236</replies>
                        <lastpost>
                                <date>27 Сентябрь 2012 - 18:22</date>
                            <name>ВИДЕО-сезон-2012/13</name>
                            <id>2680</id>
                            <url>http://www.fc-arsenal.com/ipb/xml.php?showtopic=2680&amp;view=getlastpost</url>
                            <user>

                                <id>6455</id>
                                <name>mArt_</name>
                                <url>http://www.fc-arsenal.com/ipb/xml.php?showuser=6455</url>                                      

                            </user>
                        </lastpost>                 

                    </forum>

                    <forum>
                        <id>7</id>
                        <name>Трансферы</name>
                        <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=7</url>
                        <description><![CDATA[реальные покупки и трансферные "утки"]]></description>
                            <type>1</type>
                        <topics>39</topics>
                        <replies>40 030</replies>
                        <lastpost>
                                <date>Вчера, 08:34</date>
                            <name>Какого игрока я бы хотел ви...</name>
                            <id>787</id>
                            <url>http://www.fc-arsenal.com/ipb/xml.php?showtopic=787&amp;view=getlastpost</url>
                            <user>

                                <id>33744</id>
                                <name>bartlby</name>
                                <url>http://www.fc-arsenal.com/ipb/xml.php?showuser=33744</url>                                     

                            </user>
                        </lastpost>                 

                    </forum>

                    <forum>
                        <id>10</id>
                        <name>Арсенальский офф-топ</name>
                        <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=10</url>
                        <description><![CDATA[околоклубный офф-топ, не относящийся к другим темам]]></description>
                            <type>1</type>
                        <topics>151</topics>
                        <replies>26 000</replies>
                        <lastpost>
                                <date>Сегодня, 09:55</date>
                            <name>Статистика+Анализ</name>
                            <id>2309</id>
                            <url>http://www.fc-arsenal.com/ipb/xml.php?showtopic=2309&amp;view=getlastpost</url>
                            <user>

                                <id>1085</id>
                                <name>House M.D.</name>
                                <url>http://www.fc-arsenal.com/ipb/xml.php?showuser=1085</url>                                      

                            </user>
                        </lastpost>                 

                    </forum>

                </forums>
            </category>

            <category>
                <id>14</id>
                <name>ARSSC</name>
                <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=14</url>
                <forums>

                    <forum>
                        <id>5</id>
                        <name>ARSSC</name>
                        <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=5</url>
                        <description><![CDATA[Arsenal Russian Speaking Supporters Club. Жизнь фан-клуба]]></description>
                            <type>1</type>
                        <topics>240</topics>
                        <replies>49 238</replies>
                        <lastpost>
                                <date>Сегодня, 15:16</date>
                            <name>офф-топ</name>
                            <id>2515</id>
                            <url>http://www.fc-arsenal.com/ipb/xml.php?showtopic=2515&amp;view=getlastpost</url>
                            <user>

                                <id>22995</id>
                                <name>LeXuS R.</name>
                                <url>http://www.fc-arsenal.com/ipb/xml.php?showuser=22995</url>                                     

                            </user>
                        </lastpost>                 

                        <subforums>

                            <subforum>
                                <id>56</id>
                                <name>10-летие ARSSC</name>
                                <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=</url>
                            </subforum>

                            <subforum>
                                <id>45</id>
                                <name>Белорусское отделение</name>
                                <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=</url>
                            </subforum>

                            <subforum>
                                <id>48</id>
                                <name>Московское отделение</name>
                                <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=</url>
                            </subforum>

                            <subforum>
                                <id>49</id>
                                <name>Питерское отделение</name>
                                <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=</url>
                            </subforum>

                            <subforum>
                                <id>46</id>
                                <name>Урало-Сибирское отделение</name>
                                <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=</url>
                            </subforum>

                            <subforum>
                                <id>47</id>
                                <name>Украинское отделение</name>
                                <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=</url>
                            </subforum>

                            <subforum>
                                <id>40</id>
                                <name>Выезды ARSSC</name>
                                <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=</url>
                            </subforum>

                            <subforum>
                                <id>41</id>
                                <name>Футбольный клуб ARSSC</name>
                                <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=</url>
                            </subforum>

                            <subforum>
                                <id>42</id>
                                <name>Хочу в ARSSC</name>
                                <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=</url>
                            </subforum>

                            <subforum>
                                <id>43</id>
                                <name>Проекты ARSSC</name>
                                <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=</url>
                            </subforum>

                            <subforum>
                                <id>50</id>
                                <name>Нижегородское отделение</name>
                                <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=</url>
                            </subforum>

                            <subforum>
                                <id>51</id>
                                <name>Казахстанское отделение</name>
                                <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=</url>
                            </subforum>

                            <subforum>
                                <id>52</id>
                                <name>Тбилисское отделение</name>
                                <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=</url>
                            </subforum>

                            <subforum>
                                <id>53</id>
                                <name>Кыргызстано-Бишкекское отделение</name>
                                <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=</url>
                            </subforum>

                        </subforums>

                    </forum>

                    <forum>
                        <id>11</id>
                        <name>==ARSSC==</name>
                        <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=11</url>
                        <description><![CDATA[только для участников ARSSC]]></description>
                            <type>1</type>
                        <topics>79</topics>
                        <replies>6 429</replies>
                        <lastpost>
                                <date>30 Сентябрь 2012 - 23:16</date>
                            <name>Важно! Сбор данных членов Ф...</name>
                            <id>2684</id>
                            <url>http://www.fc-arsenal.com/ipb/xml.php?showtopic=2684&amp;view=getlastpost</url>
                            <user>

                                <id>34</id>
                                <name>Blader</name>
                                <url>http://www.fc-arsenal.com/ipb/xml.php?showuser=34</url>                                        

                            </user>
                        </lastpost>                 

                    </forum>

                    <forum>
                        <id>8</id>
                        <name>Форум и сайт</name>
                        <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=8</url>
                        <description><![CDATA[все вопросы по форуму и сайту FC-Arsenal.com]]></description>
                            <type>1</type>
                        <topics>63</topics>
                        <replies>8 978</replies>
                        <lastpost>
                                <date>12 Октябрь 2012 - 23:24</date>
                            <name>Как сделать жисть лучше и и...</name>
                            <id>1164</id>
                            <url>http://www.fc-arsenal.com/ipb/xml.php?showtopic=1164&amp;view=getlastpost</url>
                            <user>

                                <id>2741</id>
                                <name>Mozart23</name>
                                <url>http://www.fc-arsenal.com/ipb/xml.php?showuser=2741</url>                                      

                            </user>
                        </lastpost>                 

                        <subforums>

                            <subforum>
                                <id>44</id>
                                <name>FC-Arsenal.com</name>
                                <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=</url>
                            </subforum>

                            <subforum>
                                <id>55</id>
                                <name>Модернизация форума</name>
                                <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=</url>
                            </subforum>

                            <subforum>
                                <id>65</id>
                                <name>Обсуждение действий модераторов</name>
                                <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=</url>
                            </subforum>

                        </subforums>

                    </forum>

                </forums>
            </category>

            <category>
                <id>15</id>
                <name>OFF-TOP</name>
                <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=15</url>
                <forums>

                    <forum>
                        <id>6</id>
                        <name>Футбольный офф-топ</name>
                        <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=6</url>
                        <description><![CDATA[все о футбольном офф-топе, не относящееся к Арсеналу]]></description>
                            <type>1</type>
                        <topics>189</topics>
                        <replies>30 210</replies>
                        <lastpost>
                                <date>14 Октябрь 2012 - 17:34</date>
                            <name>Кубки Африканских Наций</name>
                            <id>2518</id>
                            <url>http://www.fc-arsenal.com/ipb/xml.php?showtopic=2518&amp;view=getlastpost</url>
                            <user>

                                <id>23982</id>
                                <name>sanchouz</name>
                                <url>http://www.fc-arsenal.com/ipb/xml.php?showuser=23982</url>                                     

                            </user>
                        </lastpost>                 

                    </forum>

                    <forum>
                        <id>9</id>
                        <name>Полный офф-топ</name>
                        <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=9</url>
                        <description><![CDATA[офф-топ вне футбола]]></description>
                            <type>1</type>
                        <topics>110</topics>
                        <replies>42 353</replies>
                        <lastpost>
                                <date>Сегодня, 15:29</date>
                            <name>Фильмы</name>
                            <id>145</id>
                            <url>http://www.fc-arsenal.com/ipb/xml.php?showtopic=145&amp;view=getlastpost</url>
                            <user>

                                <id>24</id>
                                <name>kust</name>
                                <url>http://www.fc-arsenal.com/ipb/xml.php?showuser=24</url>                                        

                            </user>
                        </lastpost>                 

                    </forum>

                    <forum>
                        <id>12</id>
                        <name>Прогнозы</name>
                        <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=12</url>
                        <description><![CDATA[чемпионат по прогнозам]]></description>
                            <type>1</type>
                        <topics>278</topics>
                        <replies>7 093</replies>
                        <lastpost>
                                <date>18 Сентябрь 2012 - 00:27</date>
                            <name>Fantasy and Predictor 2012/...</name>
                            <id>2683</id>
                            <url>http://www.fc-arsenal.com/ipb/xml.php?showtopic=2683&amp;view=getlastpost</url>
                            <user>

                                <id>32662</id>
                                <name>olegkorben</name>
                                <url>http://www.fc-arsenal.com/ipb/xml.php?showuser=32662</url>                                     

                            </user>
                        </lastpost>                 

                        <subforums>

                            <subforum>
                                <id>17</id>
                                <name>архив: 2004/05</name>
                                <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=</url>
                            </subforum>

                            <subforum>
                                <id>18</id>
                                <name>архив: 2005/06</name>
                                <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=</url>
                            </subforum>

                            <subforum>
                                <id>20</id>
                                <name>архив: 2006/07</name>
                                <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=</url>
                            </subforum>

                            <subforum>
                                <id>63</id>
                                <name>архив: 2008/09</name>
                                <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=</url>
                            </subforum>

                            <subforum>
                                <id>64</id>
                                <name>Fantasy premier league 2011/2012</name>
                                <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=</url>
                            </subforum>

                        </subforums>

                    </forum>

                    <forum>
                        <id>66</id>
                        <name>Песочница</name>
                        <url>http://www.fc-arsenal.com/ipb/xml.php?showforum=66</url>
                        <description><![CDATA[рассказываем о себе]]></description>
                            <type>1</type>
                        <topics>90</topics>
                        <replies>1 339</replies>
                        <lastpost>
                                <date>06 Октябрь 2012 - 21:50</date>
                            <name>serg1945</name>
                            <id>2729</id>
                            <url>http://www.fc-arsenal.com/ipb/xml.php?showtopic=2729&amp;view=getlastpost</url>
                            <user>

                                <id>13040</id>
                                <name>FoLL</name>
                                <url>http://www.fc-arsenal.com/ipb/xml.php?showuser=13040</url>                                     

                            </user>
                        </lastpost>                 

                    </forum>

                </forums>
            </category>

        </categories>

        <statistics>
            <posts>402 255</posts>
            <members>6 585</members>
            <user>
                <id></id>
                <name>klimistwood</name>
                <url>http://www.fc-arsenal.com/ipb/xml.php?http://www.fc-arsenal.com/ipb/xml.php?showuser=36016</url>
            </user>
            <onlinerecord>152</onlinerecord>
        </statistics>

        <events>

        </events>
        <birthdays>

            <total>3</total>
            <users><birthday>
    <year>30</year>
    <user>
        <id>1081</id>
        <name>TremoR</name>
        <url>http://www.fc-arsenal.com/ipb/xml.php?showuser=1081</url>      
    </user>
</birthday>,<birthday>
    <year>30</year>
    <user>
        <id>32816</id>
        <name>ArseR</name>
        <url>http://www.fc-arsenal.com/ipb/xml.php?showuser=32816</url>     
    </user>
</birthday>,<birthday>
    <year>22</year>
    <user>
        <id>27408</id>
        <name>ArsoFanLV</name>
        <url>http://www.fc-arsenal.com/ipb/xml.php?showuser=27408</url>     
    </user>
</birthday></users>

        </birthdays>
</ipb> 
```

这是它的链接[http://pastebin.com/fM2LUNeA](http://pastebin.com/fM2LUNeA)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T03:25:14.967

试试这个

```
//Load into Jsoup
Element root = Jsoup.parse(Runner.class.getResourceAsStream("/sources"), "utf-8", "");   
Elements names = root.select("ipb > categories > category > name:contains(ARSENAL FC) ~forums > forum > name");
System.out.println(names); 
```

并观看您的 JSoup 版本，应该获取最新的版本，我之前知道一些选择语法问题。

# java - ProgressDialog Android AsyncTAsk

> ID：12838322
> 
> 赞同：0
> 
> 时间：2012-10-11T11:19:55.117
> 
> 标签：java, android, android-asynctask, progressdialog

我想在 Detail 类在后台打开时按下我的列表视图的任何项目时显示一个 ProgressDialog，我知道我必须使用 asyncTask 但我不知道如何，有人可以帮我吗？

这是我展示 ProgressDialog 的片段

```
public class FeedPlayerIndexFragment extends SherlockFragment{     
String url="http://www.toto.com/index.php?format=feed&amp;type=rss";
ArrayList<Article> feeds ;
AndroidSaxFeedParser feedParser= new AndroidSaxFeedParser(url);
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    feeds=feedParser.parse();
    View view=inflater.inflate(R.layout.main, container, false);
    CustomItemAdapter_News lfa = new   CustomItemAdapter_News(getActivity().getApplicationContext(), feeds);
    ((ListView)view.findViewById(R.id.listFeed)).setAdapter(lfa);

    ((ListView)view.findViewById(R.id.listFeed)).setOnItemClickListener(new  OnItemClickListener() {
        public void onItemClick(AdapterView<?> arg0, View v, int  position,long id) {
            Bundle b = new Bundle();
            b.putInt("position", position);
            b.putString("url", url);
            Intent intent=new   Intent(getActivity().getApplicationContext(), DetailActivity.class);
            intent.putExtras(b);
            startActivity(intent);
        }
    });
    return view;
}
} 
```

这是我应该打开背景的详细活动

```
public class DetailActivity extends Activity{
String descriptionFinale = null,imageFinale = null,url;
int position;
TextView description_,titre,date;
ImageView image_;
ArrayList<Article> feeds ;

WebView contentWebView;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.detail);
    Bundle b = getIntent().getExtras();
    position=b.getInt("position");
    url=b.getString("url");
    AndroidSaxFeedParser feedParser= new AndroidSaxFeedParser(url);
    feeds=feedParser.parse();

    date=(TextView) findViewById(R.id.date);
    contentWebView= (WebView)findViewById(R.id.contentWebView);
    titre=(TextView) findViewById(R.id.titre);

    date.setText(feeds.get(position).getTitle());
    GetDescriptionWebView.getDescriptionImage(position, feeds,contentWebView);
    titre.setText("Postulé le: "+GetDateFormat.getDate(position, feeds));

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T13:36:38.340

你可以试试这段代码

```
public class DetailActivity extends Activity
{
    String descriptionFinale = null,imageFinale = null,url;
    int position;
TextView description_,titre,date;
ImageView image_;
ArrayList<Article> feeds ;

WebView contentWebView;

ProgressDialog dialog;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.detail);

    feeds=new Arraylist<Article>;
    contentWebView= (WebView)findViewById(R.id.contentWebView);
    date=(TextView) findViewById(R.id.date);
    titre=(TextView) findViewById(R.id.titre);
    Bundle b = getIntent().getExtras();
    position=b.getInt("position");
    url=b.getString("url");
    AndroidSaxFeedParser feedParser= new AndroidSaxFeedParser(url);

    new MyFetchTask().execute();

}

public class MyFetchTask extends AsyncTask<Object, Object, Object>
{

    @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub
        super.onPreExecute();

        dialog=ProgressDialog.show(DetailActivity.this, "", "Loading...");

    }

    @Override
    protected Object doInBackground(Object... params) {
        // TODO Auto-generated method stub

        feeds=feedParser.parse();

        return null;
    }

    @Override
    protected void onPostExecute(Object result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);

        dialod.dismiss();
        date.setText(feeds.get(position).getTitle());
        GetDescriptionWebView.getDescriptionImage(position, feeds,contentWebView);
        titre.setText("Postulé le: "+GetDateFormat.getDate(position, feeds));

    }

}

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T13:46:00.653

这是 asynctask 的一个例子希望这会有所帮助

```
 class NewCouponsTask extends AsyncTask<String, Void, ArrayList<NewCoupons>>

 {
NewCouponsScreen parentActivity;

public NewCouponsTask(NewCouponsScreen parent) {
    // TODO Auto-generated constructor stub
    parentActivity = parent;
}

@Override
protected void onPreExecute() {
    // TODO Auto-generated method stub
    super.onPreExecute();
}
@Override
protected ArrayList<NewCoupons> doInBackground(String... params) {

    URL url=null;
    ArrayList<NewCoupons> couponslist=null;
    try {
        url = new URL(ApplicationLinks.newCouponsLink);

     InputSource is = new InputSource(url.openStream());
     is.setEncoding("UTF-8");
    SaxFeedParser saxParser = new SaxFeedParser(ApplicationLinks.newCouponsLink);
    Log.e("Error",ApplicationLinks.newCouponsLink);
    couponslist=saxParser.parse();  
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return couponslist;
}

@Override
protected void onPostExecute(ArrayList<NewCoupons> result) {
    // TODO Auto-generated method stub
    parentActivity.fetchNewCoupons(result);
        }

} 
```

您可以在 onPreExecute() 函数中加载进度条并在 onPostExecute() 函数中停止它

# android - Intent 发送后是否排队？

> ID：12838324
> 
> 赞同：3
> 
> 时间：2012-10-11T11:19:58.937
> 
> 标签：android, android-intent, broadcastreceiver, intentfilter

考虑以下场景：

一个人`Service`注册了一个有几个动作的人。如果在处理另一项操作时收到其中一项操作，它会排队还是中止？`BroadcastReceiver``IntentFilter`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T11:24:18.753

将`Intent`排队，直到可以交付。如果您的接收器花费的时间太长，Android 可能会决定终止其进程（但如果发生这种情况，logcat 输出将清楚说明原因）。

# css - 如何在 Linux 上的 Firefox 中从焦点无线电输入中删除边框/轮廓

> ID：12838325
> 
> 赞同：7
> 
> 时间：2012-10-11T11:19:59.793
> 
> 标签：css, firefox, radio-button, outline

我知道关于 SO 的类似问题有很多答案，但似乎没有一个对我有用。问题在于，仅在 Linux 上的 Firefox 中（Windows 很好）无线电输入在聚焦时具有橙色轮廓。当输入放置在具有以下内容的元素内时，此轮廓是错误的`overflow: hidden`： ![放置在带有溢出隐藏的元素内时的错误轮廓](../Images/25f37e7bb3f291dfba65512bdd4bd39c.png)

```
<div style="width: 100px; margin: 30px auto; overflow: hidden;">
    <label><input type="radio" name="some_radio">radio 1</label>
    <br>
    <label><input type="radio" name="some_radio">radio 2</label>
</div> 
```

那么我怎样才能摆脱那个大纲，有人可以帮忙吗？我已经尝试过`input::-moz-focus-inner`，`::-moz-focusring`等等，但没有任何效果。

这是[jsFiddle](http://jsfiddle.net/MKyCz/)，但只有使用 Linux 才能看到问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-11T19:57:27.263

那是由您的 GTK 主题绘制的。

您可以使用 完全关闭 GTK 主题的使用`-moz-appearance: none`，但您不能选择要使用的主题部分：主题基础架构实际上不允许这样做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T13:13:58.820

除了我上面的评论，这是我在 FF 中查看时看到的内容。

![在此处输入图像描述](../Images/e9b71627dff54083eb911af6a95c5495.png)

这是我转到 SystemInfo->Operating system 时操作系统告诉我的内容（以防它有所不同）

```
-Version-
Kernel      : Linux 3.2.0-23-generic (x86_64)
Compiled        : #36-Ubuntu SMP Tue Apr 10 20:39:51 UTC 2012
C Library       : Unknown
Default C Compiler      : GNU C Compiler version 4.6.3 (Ubuntu/Linaro 4.6.3-1ubuntu5) 
Distribution        : Linux Mint 13 Maya
-Current Session-
Computer Name       : enhzflep-VirtualBox
User Name       : enhzflep (*****)
Home Directory      : /home/enhzflep
Desktop Environment     : MATE
-Misc-
Uptime      : 57 minutes
Load Average        : 0.60, 0.52, 0.42 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-18T05:25:47.237

```
input, 
input:active,
 input:focus,
a:focus{ outline: 0; outline-style:none; outline-width:0; }

 button::-moz-focus-inner,
 input[type="reset"]::-moz-focus-inner,
 input[type="button"]::-moz-focus-inner,
 input[type="submit"]::-moz-focus-inner,
 input[type="file"] > input[type="button"]::-moz-focus-inner,
a
 { border: none; } 
```

# msbuild - 如何将分支名称传递给 TeamCity 中的 MSBuild 脚本？

> ID：12838333
> 
> 赞同：4
> 
> 时间：2012-10-11T11:20:21.880
> 
> 标签：msbuild, teamcity, teamcity-7.0

我已经让 TeamCity 跨多个 Mercurial 分支构建配置。作为构建过程的一部分，我想根据正在构建的分支命名一些输出。

我尝试使用`$(TEAMCITY_BUILD_BRANCH)`, 尝试`teamcity.build.branch`从 TeamCity 获取属性，但我只得到一个空字符串。我成功地`$(BUILD_NUMBER)`将`build.number`属性放入脚本中，所以我对需要什么感到有点困惑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T10:03:58.217

只需创建一个构建参数：

```
system.branch_name = %teamcity.build.vcs.branch.Your_Project% 
```

项目名称中的任何非字母数字字符都应替换为“_”。在您的 msbuild 中使用`$(branch_name)`来引用参数。

像魅力一样工作:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T13:01:59.857

$(vcsroot_url) 如果您只有一个 vcs root 附加到构建配置。

如果这不是您想要的 - 尝试按照此处所述获取所有已知属性：http: [//confluence.jetbrains.net/display/TCD7/Predefined+Build+Parameters](http://confluence.jetbrains.net/display/TCD7/Predefined+Build+Parameters)

仅供参考的服务器属性：

> 您可以通过将 system.teamcity.debug.dump.parameters 属性添加到构建配置并检查构建日志中的“可用的仅供参考的服务器属性”部分来获取完整的仅供参考的服务器属性。

UPD：您也可以查看此[“最新消息”链接](http://confluence.jetbrains.net/display/TCD7/What%27s+New+in+TeamCity+7.1#What%27sNewinTeamCity7.1-VCSbranchparameter)。

> VCS 分支参数 对于 Git 和 Mercurial，TeamCity 提供了其他构建参数，其中包含在构建开始时已知的 VCS 分支名称。如果构建从 refs/heads/bugfix 分支进行了修订，TeamCity 将添加具有以下名称的配置参数：teamcity.build.vcs.branch.<simplified VCS root name>=refs/heads/bugfix
> 
> VCS 根的名称在哪里，其中所有非字母数字字符都替换为 _。

据此 - 您应该能够按照 msbuild 变量 $(teamcity_build_vcs_branch_) 访问分支。

希望这次我能正确理解您的问题。

PS：抱歉最初的误导 - 我不知道 TeamCity 中的 DVCS 和 CVCS 之间存在如此细微的差异。无论如何-我的初始答案也可以帮助您-您可以获取所有变量，然后使用所需的适当数据找到确切的变量名称

# sql-server - 需要帮助来优化此查询

> ID：12838334
> 
> 赞同：1
> 
> 时间：2012-10-11T11:20:23.567
> 
> 标签：sql-server, tsql, sql-server-2000

你能帮我优化我的这个查询吗？我已经没有办法优化这个了。这里的数据检索时间是 6 分钟，我想减少它。希望您能够帮助我。

```
-- Main query
DECLARE @ProdClass VARCHAR(10)
,@ModelID VARCHAR(10)
,@ServiceStartDate DATETIME
,@ServiceEndDate DATETIME
,@SvcID VARCHAR(10)
,@StateID VARCHAR(10)
,@AreaID VARCHAR(10)

 SET @ProdClass = 'WPS'
 SET @ModelID = 'BM'
 SET @ServiceStartDate = convert(datetime, '10/1/2007')
 SET @ServiceEndDate = CONVERT(DATETIME, '11/1/2007')
 SET @SvcID = '358'
 SET @StateID = 'JB'
 SET @AreaID = ''

SELECT DISTINCT cus.MCUS_CUSID
    ,cus.MCUS_ENAME
    ,mod.MMOD_ENAME
    ,rou.MROU_SERNO
    ,svc.MSVC_SVCID AS SVC_NAME
    ,ar.MARE_ENAME
    ,dbo.ufn_GetLastXApptDate(rou.MROU_ROUID) AS MROU_APTDT
    ,rou.MROU_LSVDT
    ,(
        CASE MROU_FRSVE
        WHEN 'Y'
            THEN 'FREE'
        WHEN 'N'
            THEN 'NORMAL'
        END
    ) AS SERVICE_DUE_TYPE
FROM dbo.MROU_FIL AS rou
INNER JOIN dbo.MCUS_FIL AS cus ON rou.MROU_CUSID = cus.MCUS_CUSID
INNER JOIN dbo.MMOD_FIL AS mod ON rou.MROU_MODID = mod.MMOD_MODID
INNER JOIN dbo.MSVC_FIL AS svc ON rou.MROU_SVCID = svc.MSVC_SVCID
INNER JOIN dbo.MADR_FIL AS adr ON cus.MCUS_CUSID = adr.MADR_CUSID
INNER JOIN dbo.MSTA_FIL AS st ON adr.MADR_STAID = st.MSTA_STAID
INNER JOIN dbo.MARE_FIL AS ar ON adr.MADR_AREID = ar.MARE_AREID
INNER JOIN dbo.FAPT_FIL AS apt ON rou.MROU_ROUID = apt.FAPT_ROUID
WHERE rou.MROU_STAT = 'ACTIVE'
AND rou.MROU_CUSPF = 'MY'
AND apt.FAPT_APTTY in ('mf','m1','m2','m3','m4','m5','m6', 'mm')
AND ((@ProdClass = '') OR (@ProdClass <> '' AND rou.MROU_CLSID = @ProdClass))
AND ((@ModelID = '') OR (@ModelID <> '' AND rou.MROU_MODID = @ModelID))
AND (
    ((@ServiceStartDate = '') OR (@ServiceStartDate <> '' AND rou.MROU_LSVDT >= @ServiceStartDate))
    AND
    ((@ServiceEndDate = '') OR (@ServiceEndDate <> '' AND rou.MROU_LSVDT <= @ServiceEndDate))
)
AND ((@SvcID = '') OR (@SvcID <> '' AND svc.MSVC_SVCID = @SvcID))
AND ((@StateID = '') OR (@StateID <> '' AND adr.MADR_STAID = @StateID))
AND ((@AreaID = '') OR (@AreaID <> '' AND adr.MADR_AREID = @AreaID))
ORDER BY rou.MROU_LSVDT

-- function -- 
ALTER FUNCTION [dbo].[ufn_GetLastXApptDate] 
(
@rouid numeric(18,0)
)
RETURNS datetime
AS
BEGIN
    DECLARE @ApptDate datetime

    SELECT @ApptDate = MAX(FAPT_APTDT)
    FROM dbo.FAPT_FIL
    WHERE FAPT_ROUID = @rouid
        AND FAPT_STAT= 'X'
        AND FAPT_APTTY in ('mf','m1','m2','m3','m4','m5','m6', 'mm')

    RETURN @ApptDate

END 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T11:44:35.707

SQL Server 必须为每一行调用标量函数。为了让它自由地将函数的查询作为基于集合的操作执行，请移动函数内联。改变：

```
,dbo.ufn_GetLastXApptDate(rou.MROU_ROUID) AS MROU_APTDT 
```

至：

```
,(
 SELECT  MAX(FAPT_APTDT)
 FROM    dbo.FAPT_FIL
 WHERE   FAPT_ROUID = rou.MROU_ROUID
         AND FAPT_STAT= 'X'
         AND FAPT_APTTY in ('mf','m1','m2','m3','m4','m5','m6', 'mm')
 ) 
```

您的查询也看起来像一个搜索查询，它可能受益于针对不同参数值的不同版本的执行计划。您可以通过添加以下内容为每次执行强制执行新的查询计划：

```
option  (recompile) 
```

在查询结束时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T12:05:31.247

尝试使用键上的所有列创建索引，按照它们在每个表的查询中出现的顺序执行连接。

# php - php脚本执行完成后套接字连接会保持打开状态吗？

> ID：12838337
> 
> 赞同：0
> 
> 时间：2012-10-11T11:20:41.067
> 
> 标签：php, sockets

如果我们在 php 脚本中打开一个套接字连接，而不是在编码中关闭它。脚本执行完成后，socket连接会保持打开吗？

如果我们在新选项卡中打开相同的脚本或刷新页面，我们可以重用该连接吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T11:24:04.367

如果它是用 打开的`fsockopen()`，它将在脚本完成时关闭。如果您希望套接字在脚本执行之间保持不变，请查看[`pfsockopen()`](http://php.net/manual/en/function.pfsockopen.php)专门为此用例提供的。

# php - 在 PHP 结果中显示 MySQL JOIN

> ID：12838341
> 
> 赞同：1
> 
> 时间：2012-10-11T11:20:54.823
> 
> 标签：php, mysql

我添加了一个在现有结果页面上成功执行 JOIN 的记录集：

```
mysql_select_db($database_redcross, $redcross);
$query_idToClient = "SELECT clientLName, clientFName FROM sys_client LEFT JOIN sys_visits USING (clientID)";
$idToClient = mysql_query($query_idToClient, $redcross) or die(mysql_error());
$row_idToClient = mysql_fetch_assoc($idToClient);
$totalRows_idToClient = mysql_num_rows($idToClient); 
```

结果页面还查询另一个名为 sys_visits 的表，并显示当前结果如下：

```
<table class="WADAResultsTable" border="0" cellpadding="0" cellspacing="0">
  <tr>
    <th class="WADAResultsTableHeader">clientID:</th>
    <th>&nbsp;</th>
  </tr>
  <?php do { ?>
    <tr class="<?php echo $WARRT_AltClass1->getClass(true); ?>">

      <td class="WADAResultsTableCell">

      <a href="sys_visits_Detail.php?pid=<?php echo(rawurlencode($row_WADAsys_visits['pid'])); ?>" ><?php echo($row_WADAsys_visits['clientID']); ?></a></td>
    </tr>
  <?php } while ($row_WADAsys_visits = mysql_fetch_assoc($WADAsys_visits)); ?>
</table> 
```

如何从记录集中回显匹配的 clientFName 和 clientLname 而不仅仅是 id。两个表中的 clientID 相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T11:30:50.723

```
while ($row = mysql_fetch_row($idToClient)) 
{
   echo "clientLName: " .$row[0] . "clientFName: " .$row[1];
} 
```

# css - 如何设置高度1px

> ID：12838343
> 
> 赞同：0
> 
> 时间：2012-10-11T11:21:16.693
> 
> 标签：css, html

嗨，我在 IE 浏览器中的表结构有问题。我想将高度 1px 设置为 td 但它在 IE 中没有发生。附上[小提琴](http://jsfiddle.net/auwcV/)

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

    <head>
    .listSep { border-top:1px #000000 solid; height:1px; margin:0; padding:0}
    </style>

</head>
<body>
    <table width="664" border="0" cellspacing="0" cellpadding="0">
      <tr>
        <td style="border:solid 1px #FF0000; font-size:0px; line-height:0px" height="1"><hr class="listSep"></td>
      </tr>
    </table>
    </body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T11:37:46.473

您的 HTML 结构无效。您`body`在`head`. 而且您缺少`style`开始标签。

你有：

```
 .listSep { border-top:1px #000000 solid; height:1px; margin:0; padding:0}
    </style>
<body>
</head>

<!-- more code -->
</body> 
```

将其更改为：

```
<head>
    <style type="text/css">
    .listSep { border-top:1px #000000 solid; height:1px; margin:0; padding:0}
    </style>
</head>

<body>
<!-- more code -->
</body> 
```

# android - Android - 按指定间隔调用方法

> ID：12838344
> 
> 赞同：0
> 
> 时间：2012-10-11T11:21:17.463
> 
> 标签：android, methods, intervals

我是 android 新手，我正在尝试构建一个简单的应用程序，它在屏幕上移动一个小点，它的行为就像一个网球。为了移动点，我有一个方法可以更新它的 x 和 y 坐标（让我们说 updateXY() ）。为了让球永远保持动画直到用户退出应用程序，我必须根据间隔调用 updateXY() 方法。关于如何实现这一点的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T11:27:50.810

我建议`TimerTask`为此使用 a 。您可以创建一个`Timer`并安排`TimerTask`以固定速率重复，直到取消。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T11:36:09.770

当您尝试实时做某事时（好吧，对于某种游戏来说，这种实时性已经足够了），您不能依赖 android OS 事件处理（以及计时器任务）。使用带睡眠的标准线程来安排更新，并在表面视图/画布上绘制。

# java - 如果用户输入 String 而不是 Int，则可能出现异常

> ID：12838346
> 
> 赞同：3
> 
> 时间：2012-10-11T11:21:20.390
> 
> 标签：java, string, loops, while-loop, int

我只是在玩 Java。我试图强制我的程序只接受 3 位数字。我相信我已经使用 while 循环成功地做到了这一点（如果我错了，请纠正我）。但是如果用户输入一个字符串，我该如何去打印一个错误语句。例如：“ABC”。

我的代码：

```
 import java.util.Scanner;
    public class DigitSum {

    public static void main(String[] args) {

    Scanner newScan = new Scanner(System.in);

        System.out.println("Enter a 3 digit number: ");
        int digit = newScan.nextInt();

        while(digit > 1000 || digit < 100)
            {           
             System.out.println("Error! Please enter a 3 digit number: ");
             digit = newScan.nextInt();
            }

        System.out.println(digit);
       }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T11:49:21.097

这个怎么样？

```
public class Sample {
    public static void main (String[] args) {
        Scanner newScan = new Scanner (System.in);

        System.out.println ("Enter a 3 digit number: ");
        String line = newScan.nextLine ();
        int digit;
        while (true) {
            if (line.length () == 3) {
                try {
                    digit = Integer.parseInt (line);
                    break;
                }
                catch (NumberFormatException e) {
                    // do nothing.
                }
            }

            System.out.println ("Error!(" + line + ") Please enter a 3 digit number: ");
            line = newScan.nextLine ();
        }

        System.out.println (digit);
    }
} 
```

正则表达式版本：

```
public class Sample {
    public static void main (String[] args) {
        Scanner newScan = new Scanner (System.in);

        System.out.println ("Enter a 3 digit number: ");
        String line = newScan.nextLine ();
        int digit;

        while (true) {
            if (Pattern.matches ("\\d{3}+", line)) {
                digit = Integer.parseInt (line);
                break;
            }

            System.out.println ("Error!(" + line + ") Please enter a 3 digit number: ");
            line = newScan.nextLine ();
        }

        System.out.println (digit);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T11:26:59.887

在 try catch 块中嵌入用于读取 int 的代码，每当输入错误的输入时，它将生成异常，然后在 catch 块中显示您想要的任何消息

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-11T11:39:22.590

如果输入错误，这里`nextInt`方法本身会抛出一个错误。`InputMismatchException`

```
try {
  digit = newScan.nextInt() 
} catch (InputMismatchException e) {
  e.printStackTrace();
  System.err.println("Entered value is not an integer");
} 
```

这应该做。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-05T03:09:55.443

我将如何使用 if 语句。if 语句应该是这样的：

```
if(input.hasNextInt()){
    // code that you want executed if the input is an integer goes in here    
} else {
   System.out.println ("Error message goes here. Here you can tell them that you want them to enter an integer and not a string.");
} 
```

注意：如果您希望他们输入字符串而不是整数，请将 if 语句的条件更改为`input.hasNextLine()`而不是`input.hasNextInt()`。

第二个注意事项：`input`这是我命名我的扫描仪。如果你给你的 pancakes 命名，那么你应该输入`pancakes.hasNextInt()`或`pancakes.hasNextLine()`。

希望我有所帮助，祝你好运！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-04-19T12:48:35.600

如果用户输入诸如**“abc”**之类的字符串而不是**整**数值，则您希望发生**异常**，那么这对您来说是正确的。****`InputMismatchException`****

 ****让我给你一个基本的例子。

```
public static void main(String[] args)
    {
        Scanner ip = new Scanner(System.in);
        int a; 
        System.out.println("Enter Some Input");
        try{
            a = ip.nextInt();
        }
        catch(InputMismatchException msg){
            System.out.println("Input Mismatch Exception has occured " + msg.getMessage());
        }
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-11T11:23:44.197

当您抓取输入或拉动输入字符串时，请运行`parseInt`. `yourString`如果不是，这实际上会引发异常`Integer`：

`Integer.parseInt(yourString)`

如果它抛出一个异常，你就知道它不是一个有效的输入，所以此时你可以显示一条错误消息。以下是有关的文档`parseInt`：

[http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Integer.html#parseInt(java.lang.String](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Integer.html#parseInt(java.lang.String) )

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-11T11:34:12.723

您可以通过以下方式检查字符串是否为数值：

1) 使用 try/Catch 块

```
try  
{  
  double d = Double.parseDouble(str);  
}catch(NumberFormatException nfe)  {
  System.out.println("error");
} 
```

2）使用正则表达式

```
if (!str.matches("-?\\d+(\\.\\d+)?")){
  System.out.println("error");
} 
```

3) 使用 NumberFormat 类

```
NumberFormat formatter = NumberFormat.getInstance();
ParsePosition pos = new ParsePosition(0);
formatter.parse(str, pos);
if(str.length() != pos.getIndex()){
  System.out.println("error");
} 
```

4) 使用 Char.isDigit()

```
for (char c : str.toCharArray())
{
    if (!Character.isDigit(c)){
      System.out.println("error");
    }
} 
```

您可以查看[如何在 Java 中检查字符串是否为数字以](https://stackoverflow.com/questions/1102891/how-to-check-a-string-is-a-numeric-type-in-java)获取更多信息****

# android - android中的可变大小文本

> ID：12838347
> 
> 赞同：0
> 
> 时间：2012-10-11T11:21:24.953
> 
> 标签：android

朋友们，我正在尝试在我的应用程序中设置可变大小的文本，但我没有得到想要的结果。

```
msgInside=(TextView)findViewById(R.id.textView2);
msgInside.setTextSize(30);
msgInside.setText("BIG MESSAGE");
msgInside.setTextSize(20);
msgInside.setText("SMALL MESSAGE"); 
```

我只能看到`SMALL MESSAGE`，我需要看到这两个消息

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T11:28:01.803

为此，您需要使用 spannable String。试试这个，

```
 TextView text=(TextView)findViewById(R.id.text);
        Spannable span = new SpannableString("Hi this is Android");
        span.setSpan(new RelativeSizeSpan(0.8f), 0  , 10, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
        text.setTextSize(20);
        text.setText(span); 
```

![在此处输入图像描述](../Images/cd1eb935b3df891b8ca0c5306068141a.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T11:25:16.573

对两个文本大小的消息使用不同的文本视图...如果您对两个消息都使用相同的文本视图，它的文本大小会过大...

```
msgInside=(TextView)findViewById(R.id.textView2);
msgInside.setTextSize(30);
msgInside.setText("BIG MESSAGE");
msgInside3=(TextView)findViewById(R.id.textView3);
msgInside3.setTextSize(20);
msgInside3.setText("SMALL MESSAGE"); 
```

谢谢

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T11:29:01.697

`textview`您对两个文本都使用相同的。第二个文本将覆盖您的第一个文本。

对于您想要的结果，请使用单独的 texviews 或使用[Spannable String](http://developer.android.com/reference/android/text/SpannableString.html)在单个文本视图中获取单独的字体、大小等。[这](http://www.chrisumbel.com/article/android_textview_rich_text_spannablestring)是 Spannable String 的一个很好的教程

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T11:28:08.327

是的，你不能一次使用它两次，如果你对它不感兴趣，然后制作那个文本视图的参考对象，我认为你会得到一些不同的和好的东西。

# linux - 在 debian 上更新 mysql

> ID：12838350
> 
> 赞同：2
> 
> 时间：2012-10-11T11:21:39.763
> 
> 标签：linux, debian

我试图在 debian 上更新 Mysql 但没有成功，互联网上的所有教程都失败了。
我有 Debian 6.0.6 挤压，我的 mysql 版本是`mysql Ver 14.14 Distrib 5.1.63`.
我做到了`apt-get update`，`apt-get upgrade`它说没有什么可以升级的。
所以我下载了最后一个版本`wget --content-disposition http://www.mysql.com/get/Downloads/MySQL-5.5/mysql-5.5.28-debian6.0-x86_64.deb/from/http://cdn.mysql.com/`并安装了它

```
# dpkg -i mysql-5.5.28-debian6.0-x86_64.deb 
(Reading database ... 41264 files and directories currently installed.)
Preparing to replace mysql 5.5.28 (using mysql-5.5.28-debian6.0-x86_64.deb) ...
Unpacking replacement mysql ...
Setting up mysql (5.5.28) ... 
```

没事了...

我删除了以前的包`sudo apt-get --purge remove mysql`，`apt-get --purge remove mysql-server`然后像上面一样重新安装它，同样的消息，没有安装任何东西。

我什么时候`mysql -V`有`version mysql Ver 14.14 Distrib 5.1.63, for debian-linux-gnu (x86_64) using readline 6.1`，什么时候`dpkg -l mysql`我得到版本`5.5.28`......在phpinfo上我得到了`5.1.63`

是否缺少执行此安装的步骤？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T11:36:51.470

首先删除以前的版本，然后从下载的 .deb 安装新版本。

# c# - 在 C# 中使用结构数组动态生成 UI 组件

> ID：12838351
> 
> 赞同：1
> 
> 时间：2012-10-11T11:21:41.627
> 
> 标签：c#, c++, .net, wpf, dynamic

我是 C++ 开发人员，从上周开始我开始研究 C# 和 WPF。我有一个关于在我的代码中使用结构的非常简单的查询。我的 xaml 类中有一个标签和按钮，应该是动态生成的。我在 C++ 中开发如下：

```
typedef struct 
{
     String ChannelName;
     bool available;
} Voltage_Channel;

Voltage_Channel *m_voltageChannels;

Voltage_Channel redhookChannels[6] = {
  {"", false},
  {"VDD_IO_AUD", true},
  {"VDD_CODEC_AUD", true},
  {"VDD_DAL_AUD", true},
  {"VDD_DPD_AUD", true},
  {"VDD_PLL_AUD", true},    
};

m_voltageChannels = redhookChannels;

int cnt = 0; 
int MAX_ADC =6;

while(cnt < MAX_ADC)
{
    m_labelChannel[cnt] = new Label(m_voltageChannels[cnt].ChannelName); //Generates labels based on count
    m_setButton[cnt] = new TextButton("Set"); //generates Buttons based on Count
    m_setButton[cnt]->addButtonListener(this); // Event for the Button

    if(m_voltageChannels[cnt].available)
    {
        addAndMakeVisible(m_labelChannel[cnt]); //Displays if channel is available
        addAndMakeVisible(m_setButton[cnt]);
    }
} 
```

这会生成标签和按钮 6 次，如果频道可用，则显示它。

我的**Xaml**文件中有以下内容：

```
<Label Grid.Column="0" Content="{Binding VoltageLabel}" Name="VoltageLabel" />
<Button Grid.Column="1" Content="Set" Command="{Binding Path=SetButtonCommand}" Name="VoltageSetbtn" /> 
```

**标签和按钮属性：**

```
string voltageLabel;
public string VoltageLabel
{
        get { return voltageLabel; }
        set
        {
            voltageLabel = value;
            OnPropertyChanged("VoltageLabel");
        }
}

    // Event for Set Button Click
    private ICommand mSetCommand;
    public ICommand SetButtonCommand
    {
        get
        {
            if (mSetCommand == null)
                mSetCommand = new DelegateCommand(new Action(SetCommandExecuted), new Func<bool>(SetCommandCanExecute));

            return mSetCommand;
        }
        set
        {
            mSetCommand = value;
        }
    }

    public bool SetCommandCanExecute()
    {
        return true;
    }

    public void SetCommandExecuted()
    {
        // Body of the method
    } 
```

是否可以使用结构动态生成这些控件，看看我在 C+ 应用程序中是如何做到的？

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T11:33:07.563

在 C# 中，控件是简单的对象。最终，可以对 XAML 中存在的每个功能进行编码。XAML 只是一种更方便的方式来描述 UI 对象及其之间的关系。

每个组件都有一个 children 属性，您可以使用它来添加子元素。向表单添加按钮应该是这样的：

```
Button myButton= new Button();
form.Children.Add(myButton); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T11:29:15.927

通过声明性 XAML 方式可用的所有控件也可以在运行时通过代码添加。因此，您可以在 while/for/foreach 循环中将它们添加到您的视图中。您只需要父容器。

更优雅的方法是在 xaml 中创建一个模板并将该模板绑定到包含数据的列表。

自动生成 UI 的提示：也许可以选择将 M$ 中的内置 PropertyGrid 控件用于您的数据（如 Visual Studio 的属性窗口中所示）。您可以为您的数据元素附加标准/自定义编辑器。也有几个“自制”属性网格可用。

这是一个如何使用模板的简单示例的链接：[http ://wblum.org/listbind/net3/index.html](http://wblum.org/listbind/net3/index.html)

这个问题也与运行时控件生成有关： [Add WPF control at runtime](https://stackoverflow.com/questions/311131/add-wpf-control-at-runtime)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T13:08:15.900

在 WPF 中，可以直接映射要针对对象显示的控件，例如我目前有，

```
<DataTemplate DataType="{x:Type ViewModel:Clock_t}">
     <View:Clock_tView/>
</DataTemplate> 
```

这将在 UI 中自动用 ClockT_View 包装我的 Clock_t 类。

但是，您往往会发现您的 View 需要一些帮助程序，并且您不想污染您的模型，因此有一种模式说在中间引入一些东西，如果您愿意，可以使用 ViewModel。这种模式称为 MVVM，并在[Josh Smith 的 MVVM 模式文章中进行了解释](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)

要回答你的问题，是的，你可以做这样的事情

```
<ItemsControl ItemsSource="{Binding m_voltageChannels}"/> 
```

这将自动尝试显示`VoltageChannel`，但除非你有一个 DataTemplate ，否则你只会得到它的结果`ToString()`（通常是类名）六次。相反，要么在某处的资源中定义更高的 DataTemplate，要么尝试

```
<ItemsControl ItemsSource="{Binding m_voltageChannels}">
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <StackPanel Orientation="Vertical">
                    <TextBlock Text="{Binding ChannelName}"/>
                    <CheckBox Content="Is available?" 
                         IsChecked="{Binding available}"/>
                </StackPanel>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl> 
```

# c# - 防止 XDocument 或 XElement 表单编码内容

> ID：12838358
> 
> 赞同：2
> 
> 时间：2012-10-11T11:21:51.887
> 
> 标签：c#, linq-to-xml

当我调用 XDocument.Save 它正在编码我的 html`<br/>`标记时，有没有办法防止这种情况发生？

```
XDocument xDoc = new XDocument(new XElement("desc","jon skeet <br/> knows, the <br/> answer"));
xDoc.Save(Server.MapPath("~/tempUploads/encodeTest.xml")); 
```

输出是：

```
<?xml version="1.0" encoding="utf-8"?>
<desc>jon skeet &lt;br/&gt; knows, the &lt;br/&gt; answer</desc> 
```

我想要的输出：

```
<?xml version="1.0" encoding="utf-8"?>
<desc>jon skeet <br/> knows, the <br/> answer</desc> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T11:24:24.627

这是预期的行为：您将 的内部文本设置`XElement`为该字符串。它需要被编码，否则它会创建多个标签。

由于您实际上想要拥有多个标签，因此您需要创建它们。最简单的方法是使用`XElement.Parse`：

```
var content = XElement.Parse("<desc>jon skeet <br/> knows, the <br/> answer</desc>");
var xDoc = new XDocument(content); 
```

# kinect - Kinect SDK1.5：如何在不要求用户以所有屏幕分辨率物理移动的情况下将我的手指针定位在屏幕上？

> ID：12838359
> 
> 赞同：0
> 
> 时间：2012-10-11T11:21:51.887
> 
> 标签：kinect

我想知道如何根据我的屏幕分辨率转换骨架手位置指针（例如我在我的应用程序上绘制的一些椭圆）。例如，当用户在最大两侧展开他们的手时，我的手指针需要到达我的屏幕左右边缘。我什至也尝试过以下方法。但骨架点到深度转换器似乎以 640*480 的最大分辨率转换。

```
private Point SkeletonPointToScreen(SkeletonPoint skelpoint)
{
    DepthImagePoint depthPoint = this.sensorChooser.Kinect.MapSkeletonPointToDepth(skelpoint,DepthImageFormat.Resolution640x480Fps30);     return new Point(depthPoint.X, depthPoint.Y);
} 
```

正因为如此，我的手点无法到达我的 1366*768 分辨率屏幕的左右边缘。

有人可以帮助我解决使用 kinect sdk1.5 的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T15:40:40.670

这些将为您提供主显示器的分辨率。

```
SystemParameters.PrimaryScreenWidth;
SystemParameters.PrimaryScreenHeight; 
```

然后，您可以基于此标准化手的位置。例如，我对我的一个应用程序执行以下操作：

```
double xScaled = (rightHand.Position.X - leftShoulder.Position.Y) / ((rightShoulder.Position.X) * 2) * SystemParameters.PrimaryScreenWidth;
double yScaled = (rightHand.Position.Y - rightShoulder.Position.Y) / (rightHip.Position.Y - rightShoulder.Position.Y) * SystemParameters.PrimaryScreenHeight; 
```

这给了我一个手部运动的边界框。当右手到达左肩时，到达屏幕的左侧。屏幕的右侧是从右肩向外的身体宽度。屏幕的顶部/底部分别是肩膀和臀部。

# jquery - jQuery - 调整浏览器大小时移动 div

> ID：12838365
> 
> 赞同：3
> 
> 时间：2012-10-11T11:22:07.107
> 
> 标签：jquery, resize, responsive-design, prepend

我想改变这个：

```
<div id="main 1" style="background: #ccc;" class="fourcol first clearfix" role="main">
LEFT
</div>

<div id="main middle" style="background: #ddd;" class="fourcol middle clearfix" role="main">
MENU
</div>  

<div id="main 3" style="background: #eee;" class="fourcol last clearfix" role="main">
RIGHT
</div> 
```

当我将窗口大小调整到 481px 以下时，到这个（顺序：菜单，左，右）；

```
jQuery(document).ready(function($) {

$(window).resize(function() {
    var responsive_viewport = $(window).width();
    if (responsive_viewport < 481) {
            $('#inner-content').parent().prependTo('middle');
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:05:04.330

用这个

```
$(window).resize(function() {

   var responsive_viewport = $(window).width();

   //console.log(responsive_viewport);
   if (responsive_viewport < 481) {
      var middle_div = $('#main-middle').clone().remove();
      $("#main-1").before(middle_div);
   }
}); 
```

您的 div id 有不允许的空间。我猜你错过了一个连字符或下划线。我在我的代码中添加了连字符。

当视口 < 481 时，上面的代码也会继续添加菜单。因此，一旦它已经移动，请尝试设置一个标志或其他东西。否则，您将有多个菜单。

干杯！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T12:46:38.013

我很确定这是否完整。当我将视口宽度设置为 481 时，我遇到了一些问题。所以我将其设置为 350

jsfiddle.net/CKfqv

# android - 不能调用本机方法eclipse

> ID：12838368
> 
> 赞同：3
> 
> 时间：2012-10-11T11:22:21.007
> 
> 标签：android, c++, eclipse

我正在使用 C++ 代码开发一个 android 应用程序。尝试使用 JNI 但失败了。这是我的代码：来自 jni 文件夹中的 test.c：

```
jstring Segment_com_example_segment_BrowsePicture_test( JNIEnv* env, jobject thiz )
{
    return (*env)->NewStringUTF(env, "test");
} 
```

我已经通过 ndk 构建并生成 libtest.so。但在我的 BrowsePicture.java（在 Segment.com.example.segment 下）我添加了

```
public native String  test(); 
```

但我不能叫它。消息是：

```
E/AndroidRuntime(16748): java.lang.UnsatisfiedLinkError: Native method not found: com.example.segment.BrowsePicture.test:()Ljava/lang/String; 
```

那么谁能告诉我怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T11:46:23.257

尝试通过此更改方法名称...

```
jstring Java_com_example_segment_BrowsePicture_test( JNIEnv* env, jobject thiz ) 
```

而不是这个...

```
jstring Segment_com_example_segment_BrowsePicture_test( JNIEnv* env, jobject thiz ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T11:32:48.027

你有没有像下面这样声明另一个类

```
package com.yourpackage;
public class NativeLib {

static {
    System.loadLibrary("yourlibrary");
}

public static native void your_function(your_arguments);
} 
```

然后使用从您的活动中调用此函数

```
NativeLib.your_function(your_arguments); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T11:37:01.317

您是否通过以下方式加载了库：

```
...
public class BrowsePicture {

    static {
        // assume that libtestjni.so is your lib file
        System.loadLibrary("testjni");
    }
... 
```

# delphi - 在delphi上拦截提示事件

> ID：12838372
> 
> 赞同：4
> 
> 时间：2012-10-11T11:22:26.513
> 
> 标签：delphi, delphi-xe2, windows-messages, hint

我试图在组件内部的运行时临时更改提示文本，而不更改`Hint`属性本身。

我试过 catch `CM_SHOWHINT`，但这个事件似乎只是形成，而不是组件本身。

插入 CustomHint 也不起作用，因为它从`Hint`属性中获取文本。

我的组件是从`TCustomPanel`

这是我正在尝试做的事情：

```
procedure TImageBtn.WndProc(var Message: TMessage);
begin
  if (Message.Msg = CM_HINTSHOW) then
    PHintInfo(Message.LParam)^.HintStr := 'CustomHint';
end; 
```

我在互联网的某个地方找到了这段代码，不幸的是它不起作用。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-11T11:31:31.653

`CM_HINTSHOW`确实正是您所需要的。这是一个简单的例子：

```
type
  TButton = class(Vcl.StdCtrls.TButton)
  protected
    procedure CMHintShow(var Message: TCMHintShow); message CM_HINTSHOW;
  end;

  TMyForm = class(TForm)
    Button1: TButton;
  end;

....

procedure TButton.CMHintShow(var Message: TCMHintShow);
begin
  inherited;
  if Message.HintInfo.HintControl=Self then
    Message.HintInfo.HintStr := 'my custom hint';
end; 
```

问题中的代码无法调用`inherited`，这可能是它失败的原因。或者也许类声明省略了`override`on 指令`WndProc`。无论如何，我在这个答案中的方式更干净。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-11T11:45:03.420

您可以使用 OnShowHint 事件

*   [http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.Forms.TApplication.OnShowHint](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.Forms.TApplication.OnShowHint)
*   [http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.AppEvnts.TCustomApplicationEvents.OnShowHint](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.AppEvnts.TCustomApplicationEvents.OnShowHint)

它有 HintInfo 参数：[http ://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.Forms.THintInfo](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.Forms.THintInfo)

该参数允许您查询提示控件、提示文本和所有上下文 - 并在需要时覆盖它们。

如果您想过滤哪些组件来更改提示，例如，可以声明某种 ITemporaryHint 接口，例如

```
type 
  ITemporaryHint = interface 
  ['{1234xxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx}']
    function NeedCustomHint: Boolean;
    function HintText: string;
  end; 
```

然后您可以稍后一般检查您的任何组件，它们是否实现了该接口

```
procedure TForm1.DoShowHint(var HintStr: string; var CanShow: Boolean;
  var HintInfo: THintInfo);
var
  ih: ITemporaryHint;
begin
  if Supports(HintInfo.HintControl, {GUID for ITemporaryHint}, ih) then
    if ih.NeedCustomHint then
      HintInfo.HintStr := ih.HintText;
end;

procedure TForm1.FormCreate(Sender: TObject);
begin
  Application.ShowHint := True;
  Application.OnShowHint := DoShowHint;
end; 
```

# windows - ETS / Mnesia RAM 表中的官方/建议/允许的最大记录数（或 RAM 表大小）

> ID：12838373
> 
> 赞同：4
> 
> 时间：2012-10-11T11:22:36.503
> 
> 标签：windows, linux, unix, erlang, mnesia

Erlang 一直是许多“新时代”（非常快速和容错）消息传递系统的一个很好的应用程序。示例可以是[RabbitMQ](http://www.rabbitmq.com)、[ejabberd](http://www.process-one.net/en/ejabberd/)、[WhatsApp for Mobile](http://blog.whatsapp.com/index.php/2011/09/one-million/)等 无论消息系统是如何构建的，它都需要知道正在进行的会话、谁登录等，我认为`IN-MEMORY`对于此类系统来说，保存数据是不可避免的。

对于 Erlang，可能的最大值是多少，或者允许的最大值是多少，`ETS table`或者官方建议的最大记录数是`mnesia RAM table`多少？是否存在已知的特定表大小，如果超过则会使整个 VM 崩溃？只要底层操作系统允许，做`ETS Tables`或增长到任何数量？`Mnesia RAM Tables`我听说过`Mnesia Table Limit`的`2 or 4GB`，但我认为这是用于磁盘表的。

需要在内存中处理大量数据的未来应用程序的典型示例是`OLAP Systems`、`Real Time analytics`等`Social Gaming`这条线的思考激发了这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T16:22:11.153

mnesia 是 ETS 和 DETS 表的包装层。对于 32 位系统，ETS 表的最大值约为 3.5GB。对于 64 位系统，最大值要高得多，因此从技术上讲，它受到操作系统可用 RAM 的限制。对于 DETS（这是非常愚蠢的）限制是 2GB。

我没有其他键值存储系统的任何基准测试，但请记住，ETS 直接存储 Erlang 术语而无需任何编码/解码。

# c++ - GLM 中的模型矩阵

> ID：12838375
> 
> 赞同：3
> 
> 时间：2012-10-11T11:22:45.187
> 
> 标签：c++, opengl, glm-math

我从自己的矩阵/向量操作迁移到 GLM，但我不明白一件事。

OpenGL 中的模型矩阵 - **model_matrix = scale_matrix * rotate_matrix * translate_matrix**，所以我们首先平移然后旋转，最后缩放。但是后来我尝试在 GLM 中这样做，只有当我使用逆序乘法（平移 * 旋转 * 缩放）时，它才会在正确的位置显示四边形，但对于 MVP 矩阵（投影 * 视图 * 模型）应该可以正常工作。

**示例代码**

```
using namespace glm;
mat4 projection = ortho(0.0f, 1.0f, 0.0f, 1.0f);
mat4 translate = translate(mat4(1.0f), vec3(0.5f, 0.5f, 0.0f));
mat4 rotate = rotate(mat4(1.0f), 90.0f, vec3(0.0f, 0.0f, 1.0f));
mat4 scale = scale(mat4(1.0f), vec3(0.5f, 0.5f, 1.0f));
mat4 m = translate * scale * rotate;// must be scale * rotate * translate
mat4 mvp = projection * mat4(1.0f)/*view matrix*/ * m;
glUseProgram(shader->prog);
glUniformMatrix4fv(shader->uniforms[0]/*um_mvp*/, 1, GL_FALSE, value_ptr(mvp));
... 
```

**顶点着色器**

```
attribute vec3 av_pos;
attribute vec2 av_tex;

uniform mat4 um_mvp;

varying vec2 vv_tex;

void main()
{
 vv_tex = av_tex;
 gl_Position = um_mvp * vec4(av_pos, 1.0); 
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-11T12:41:45.697

> 所以我们首先平移然后旋转，最后缩放。

...嗯，恰恰相反。

您的“完整”矩阵如下所示（为简单起见，将旋转放在一边）：

```
proj * view * translate * scale 
```

， 正确的 ？好吧，这是正确的：这意味着您的点 X 将以这种方式转换：

```
proj * view * translate * scale * X 
```

，这意味着您将首先应用比例，然后是平移，然后是相对于相机的定位，然后是投影。这是完美的。

您的问题似乎是“翻译前缩放”的东西。想象一下在 X 轴上平移 10，比例为 2。您将矩阵应用到一艘船上。

> *   你缩放你的船。你现在有一艘大船，但仍在原点
> *   你翻译你的船。它现在仍然一样大，但在原点的 10 个单位处。
> 
> 如果你做相反的事情：
> 
> *   你翻译你的船。它的中心现在在原点的 10 个单位处
> *   你缩放你的船。*每个坐标都相对于距离很远的原点*乘以 2 ……所以你最终得到了一艘大船，但以 2*10 = 20 为中心。这是你不想要的。

那有意义吗 ？

（来源：[opengl-tutorial.org/beginners-tutorials/tutorial-3-matrices/](http://www.opengl-tutorial.org/beginners-tutorials/tutorial-3-matrices/)）

# c# - 正则表达式从响应流中获取 GUID 或错误

> ID：12838376
> 
> 赞同：1
> 
> 时间：2012-10-11T11:22:45.630
> 
> 标签：c#, regex

我在创建正则表达式以匹配 GUID 或响应流中的错误消息时遇到问题。

例如，响应是：

```
{ "uuid": "8e5b0721-26c4-11df-b354-002170de47d3" } 
```

或者

```
{ "error": "<--Error Message-->" } 
```

我有一个 GUID 的正则表达式：

`new Regex(@"^(\{){0,1}[0-9a-fA-F]{8}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{12}(\}){0,1}$"`

但我不完全确定响应将始终是 GUID。

我想我正在寻找一个 GUID，它将返回第二组引号的内容，而不管类型如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T11:26:33.720

这是一个 json 格式的字符串。

不要使用正则表达式来获取数据，而是使用 json parer。

检查**[DataContractJsonSerializer 类](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.json.datacontractjsonserializer.aspx)**

# emacs - 如何让 Emacs、nrepl.el 和 Leiningen 一起玩？

> ID：12838379
> 
> 赞同：22
> 
> 时间：2012-10-11T11:22:55.557
> 
> 标签：emacs, clojure, leiningen

实际上，我对使用 vim + lein repl 非常满意，但是由于很多人一直说 Emacs 是 Lisps 的最佳选择，所以我决定试一试。现在的问题是建立一个 clojure 环境来完成人们一直在谈论的所有花哨的事情 - 现在我设法安装了 clojure-mode 和 nREPL 并且运行良好，但我需要让 repl 与我的 Leiningen 一起工作项目，如果这个实验要去某个地方（如果这意味着我必须再次自己管理我所有的依赖项（尤其是与类路径相关的依赖项），那么在编辑器中拥有一个 repl 将毫无意义）。这里的问题点是我在网上看到的大部分文章都是

*   A）关于 swank-clojure，已弃用
*   B) 关于已弃用的 Leiningen 1.x
*   C) 两者
*   D) 只涉及安装，而不是如何实际使用你刚刚安装的东西（甚至它们做了什么）

现在我正在寻找的是：

*   让 nrepl.el 尊重我的 project.clj
*   找出 leiningen + emacs + clojure-mode + nrepl.el 的正常工作流程是什么
*   与这个问题无关，但我很想知道为什么 emacs 有时会在没有我要求的情况下覆盖文本（将字体颜色更改为背景颜色直到被光标击中）。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-11T11:28:49.997

假设您同时安装了 lein2 和[nrepl.el](https://github.com/kingtim/nrepl.el)：

选项 A：

您只需在 Emacs 中打开一个属于您的 lein 项目的文件（如`foo.clj`），然后键入`M-x nrepl-jack-in`. 这将启动一个加载了所有 deps 的 nREPL，您可以或多或少地以与`swank-clojure`. （这是我大部分时间都在做的事情）

选项 B：

您在终端中转到项目的目录并在那里输入：

```
lein repl 
```

之后键入`M-x nrepl`将允许您连接到正在运行的 nrepl 会话。

`nrepl.el`带有一个方便的次要模式，允许您评估 Clojure 源文件中的代码并将其直接加载到 repl 中（与 swank-clojure 相同）。`nREPL`菜单部分中所有可用命令的列表。

附言

`nrepl.el`被重命名为`CIDER`.

# sql-server - EF 4.1 不尊重 SQL Server 列

> ID：12838383
> 
> 赞同：2
> 
> 时间：2012-10-11T11:23:04.397
> 
> 标签：sql-server, entity-framework, c#-4.0, model

我刚刚将我的 MVC3 项目（使用 C#）从 更新`ObjectContext`为`DbContext`，但我遇到了一些奇怪的错误......

我正在使用数据库优先的方法，并且我有一个表，其中有一`Name`列 type `nvarchar`，它不为空。我将它更改为`null`在 SQL Server 中接受，然后我更新了我的`edmx`模型，删除了`.tt`文件并再次生成它（使用 ADO.NET `DbContext`）。

当我从该表创建一个新对象时，将属性的值设置为`Name`null 我在.`DbEntityValidationException``The Name field is required``db.SaveChanges()`

但是该表在 Name 列上接受 NULL！我已经在 SQL Server 中用 SQL 插入了很多行，`Name`列中有 NULL！

任何人都知道我该如何解决？

一些信息

这是我的表 SQL：

```
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE [dbo].[Pre_Register](
    [Id] [int] IDENTITY(1,1) NOT NULL,
    [Name] [nvarchar](64) NULL,
    [Email] [nvarchar](64) NOT NULL,
    [Permission] [tinyint] NOT NULL,
    [Password] [nvarchar](256) NOT NULL
PRIMARY KEY CLUSTERED 
(
    [Id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] 
```

这是自动生成的模型类：

```
public partial class Pre_Register
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string Email { get; set; }
    public byte Permission { get; set; }
    public string Password { get; set; }
} 
```

这是我得到错误的方式：

```
Pre_Register preReg = new Pre_Register();

db.Pre_Register.Add(preReg);

preReg.Email = "dudu@mail.com";
preReg.Permission = 1;
preReg.Password = "123456";
preReg.Name = null;

// here it comes
db.SaveChanges(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T11:31:13.703

我唯一看到的：

打开你的 edmx。

转到您的 Pre_Register 实体，选择您的 Name 属性，右键单击，属性，然后检查 Nullable 字段是否设置为 true。

如果不是，请将其设置为 true。这会很奇怪，但我找不到其他原因。

![在此处输入图像描述](../Images/b65b0500226cbce6c6f9a42f16cf333f.png)

这意味着数据库首先是......不完美，或者你身边发生了一些事情......

# nhibernate - 如何在 NHibernate 中创建三个表之间的析取

> ID：12838384
> 
> 赞同：0
> 
> 时间：2012-10-11T11:23:03.710
> 
> 标签：nhibernate, criteria

如何在 NHibernate 中创建一个析取来完成以下任务，

我正在使用的旧数据库有一个主表和三个映射的一对一表，其中包含一些相似的列，我想在其中的每一个中找到它，

我已经尝试过了，但是当然它不起作用；

```
 public void AddSomeQuery(DetachedCriteria query)
    {
        if (someValue != null)
        {
            query
                .CreateCriteria("tabel1")
                .CreateCriteria("tabel2")
                .CreateCriteria("tabel3")
                    .Add(Restrictions.Eq("ColumnThatEveryTabelHas", someValue));
        }
    } 
```

我希望这个问题足够清楚。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T06:43:38.607

好吧，我认为您的问题不太清楚。但这是我的尝试：为什么不分别查询 3 个表并将 3 个单独的值列表相加？

# asp.net-mvc - 如何从 knockoutjs json 列表数据保存到 asp.net mvc 3 控制器

> ID：12838387
> 
> 赞同：0
> 
> 时间：2012-10-11T11:23:26.330
> 
> 标签：asp.net-mvc, json, asp.net-mvc-3, knockout.js

我有来自 knockoutjs 的这个 json 数据

```
[{"Title":"test","Description":"tset","Price":"500.00","Status":"Reserved"}, 
 {"Title":"s","Description":"d","Price":"400","Status":"Reserved"}] 
```

如何将其保存到我在 asp.net mvc 3 中的控制器中？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T11:28:45.380

您可以将其作为 AJAX 请求发送：

```
var model = [{"Title":"test","Description":"tset","Price":"500.00","Status":"Reserved"}, {"Title":"s","Description":"d","Price":"400","Status":"Reserved"}];
$.ajax({
    url: '/somecontroller/someaction',
    type: 'POST',
    contentType: 'application/json; charset=utf-8',
    data: JSON.stringify(model),
    success: function(result) {

    }
}); 
```

然后你会有一个控制器动作来接收这个请求：

```
[HttpPost]
public ActionResult SomeAction(IEnumerable<MyViewModel> model)
{
    ...
} 
```

其中`MyViewModel`当然会反映 JSON 结构：

```
public class MyViewModel
{
    public string Title { get; set; }
    public string Price { get; set; }
    public string Status { get; set; }
} 
```

# sql-server-2008-r2 - 无法提交事务（UOW=%1，描述='%3'）

> ID：12838388
> 
> 赞同：1
> 
> 时间：2012-10-11T11:23:30.517
> 
> 标签：sql-server-2008-r2

我们在 2 个集群节点之间的共享资源（驱动器）上运行 SQL Server 2008 R2。所有资源和一切都在 Node1（活动）上运行。SQL 中似乎存在错误（无法提交事务（UOW=%1，描述='%3'）），导致 SQL 资源自动故障转移到节点 2，而其他所有内容都保留在活动节点 1 上. 请问，我想知道的是，是否有人可以帮助解释导致提交失败的原因 - 日志所在的位置可能是全卷还是其他？其次，即使 SQL 故障转移到节点 2 并且其余资源和服务都在活动节点 1 上，应用程序肯定可以继续运行吗？谢谢

# haskell - 箭头中的可观察递归（或绑定）

> ID：12838391
> 
> 赞同：9
> 
> 时间：2012-10-11T11:23:38.973
> 
> 标签：haskell, recursion, arrows

我正在尝试找到一种方法来翻译正常的递归符号，例如 |fib| 函数下面的箭头，尽可能多地保留递归符号的结构。另外我想检查箭头。为此，我为每个 Arrow{..} 类创建了一个包含构造函数的数据类型：

谎言：

```
fib 0 = 0
fib 1 = 1
fib n = fib (n-2) + fib (n-1) 
```

我的 R 数据类型，此数据类型的实例包含到适当构造函数的映射：

```
data R x y where
  -- Category
  Id       :: R a a
  Comp     :: R b c    -> R a b          -> R a c
  -- Arrow
  Arr      :: (a -> b) -> R a b
  Split    :: R b c    -> R b' c'        -> R (b,b') (c,c')
  Cache    :: (a -> a -> Bool) -> R a a
  -- ArrowChoice
  Choice   :: R b c -> R b' c' -> R (Either b b') (Either c c')
  -- ArrowLoop
  Loop     :: R (b, d) (c, d)  -> R b c
  -- ArrowApply
  Apply    :: R (R b c, b) c 
```

翻译 |fib| 上面的函数首先导致以下定义。然而，由于 |fibz| 的声明的 RHS 上的 proc n，这是不允许的。我知道箭头符号的语法阻止了这一点，但其根本原因是什么？

```
fib' :: (ArrowChoice r, ArrowLoop r) => r Int Int
fib' = proc x -> do
  rec fibz <- proc n -> case n of
                          0  -> returnA -< 0
                          1  -> returnA -< 1
                          n' -> do l <- fibz -< (n'-2)
                                   r <- fibz -< (n'-1)
                                   returnA -< (l+r)
  fibz -<< x 
```

重写上面的函数以使用 let 语句编译。但是，这里出现了我的第二个问题。我希望能够检查它发生的递归。然而，在这种情况下 |fibz| 是一棵无限大的树。我想将递归捕获到fibz，我希望rec结合|loop|帮助我解决这个问题 但也许我错了？

```
fib'' :: (ArrowChoice r, ArrowLoop r, ArrowApply r) => r Int Int
fib'' = proc x -> do
  let fibz = proc n -> case n of
                          0  -> returnA -< 0
                          1  -> returnA -< 1
                          n' -> do l <- fibz -< (n'-2)
                                   r <- fibz -< (n'-1)
                                   returnA -< (l+r)
  fibz -<< x 
```

基本上，是否可以观察到这种递归？（也许甚至在箭头符号的范围内）我也许可以添加另一个构造函数，如修复。也许我应该能够观察变量的绑定，以便引用它们成为可能。不过，这将超出 Arrows 的范围。

对此有什么想法吗？

**更新 1：** 我想出了这个表格，在箭头符号之外。这隐藏了内部的递归`app`，因此我最终得到了箭头的有限表示。但是，我仍然希望能够例如将对`fib`inside的调用替换`app`为`fib`.

```
fib :: (ArrowChoice r, ArrowLoop r, ArrowApply r) => r Int Int
fib
  = (arr
       (\ n ->
          case n of
              0 -> Left ()
              1 -> Right (Left ())
              n' -> Right (Right n'))
       >>>
       (arr (\ () -> 0) |||
          (arr (\ () -> 1) |||
             (arr (\ n' -> (n', n')) >>>
                (first ( arr (\ n' -> app (fib, n' - 2))) >>>
                   arr (\ (l, n') -> (n', l)))
                  >>>
                  (first (arr (\ n' -> app (fib, n' - 1))) >>>
                     arr (\ (r, l) -> (l + r))))))) 
```

此代码对应于以下箭头符号：

```
fib :: (ArrowChoice r, ArrowLoop r, ArrowApply r) => r Int Int
fib  = proc n ->
   case n of
     0  -> returnA -< 0
     1  -> returnA -< 1
     n' -> 
           do l <- fib -<< (n'-2)
              r <- fib -<< (n'-1)
              returnA -< (l+r) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T05:10:24.623

您可以用`fib`循环来编写，例如：

```
fib'' :: (ArrowChoice r, ArrowLoop r, ArrowApply r) => r Int Int
fib'' = loop $ proc (i, r) -> do
    i' <- r -<< i
    returnA -< (i', proc j -> case j of
        0 -> returnA -< 0
        1 -> returnA -< 1
        _ -> do
            a <- r -< j-2
            b <- r -< j-1
            returnA -< a + b) 
```

但这实际上只是为一个不需要它的问题引入了一个人为循环，而且在可观察性方面也没有给你带来太多好处。你可以说存在某种循环，但我认为不可能真正确定递归发生的位置。

在具体化的表示中，对其他箭头的任何调用基本上都是“内联的”，这包括对同一箭头的调用。您无法真正检测到这些呼叫站点，更不用说找出正在呼叫的箭头。箭头具体化的另一个问题是，很多关于输入如何传递的有趣信息在`Arr`黑洞中丢失了。

我当然不是箭专家，我希望有人证明我错了，但我倾向于认为你想要实现的目标是不可能可靠地做到的，或者至少是非常不切实际的。我能想到的一个可以帮助您转发的资源是[Haskell 中的 Type-Safe Observable Sharing](http://ittc.ku.edu/~andygill/papers/reifyGraph.pdf)论文和[data-reify](http://hackage.haskell.org/package/data-reify)包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-26T09:41:22.387

您可以使用 Category 完全具体化 fib，只要您可以定义函数以将代码保存到磁盘并重新加载它。虽然有点难看。

```
{-# LANGUAGE GADTs, RankNTypes #-}

module Main where

import Control.Category

data RRef s1 s2 = RRef Int

data R s1 s2 where
  Id :: forall s. R s s
  Compose :: forall s1 s2 s3\. R s2 s3 -> R s1 s2 -> R s1 s3
  Lit :: forall s a. a -> R s (a,s)
  Dup :: forall s a. R (a,s) (a,(a,s))
  Drop :: forall s b. R (b,s) s
  Add :: forall s a. Num a => R (a,(a,s)) (a,s)
  Decrement :: forall s. R (Int,s) (Int,s)
  Deref :: forall s1 s2\. RRef s1 s2 -> R s1 s2
  Rec :: forall s1 s2\. (RRef s1 s2 -> R s1 s2) -> R s1 s2
  IsZero :: forall s. R (Int,s) (Bool,s)
  If :: forall s1 s2\. R s1 s2 -> R s1 s2 -> R (Bool,s1) s2
  Swap :: forall s a b. R (a,(b,s)) (b,(a,s))
  Over :: forall s a b. R (a,(b,s)) (a,(b,(a,s)))
  Rot :: forall s a b c. R (a,(b,(c,s))) (b,(c,(a,s)))

instance Category R where
  id = Id
  (.) = Compose

fib :: R (Int,()) (Int,())
fib =
  Lit 0 >>>
  Lit 1 >>>
  Rot >>>
  Rot >>>
  Rec (\ref ->
    Dup >>> IsZero >>> (
      If
        (Drop >>> Swap >>> Drop)
        (Decrement >>> Rot >>> Rot >>> Over >>> Add >>> Rot >>> Rot >>> (Deref ref))
    )
  ) 
```

`R`这是一个带索引的 Monoid，结果与`Category`. 这两个类型参数`R`表示操作前后堆栈的类型签名。堆栈作为程序堆栈，就像在汇编代码中一样。堆栈类型中的元组形成一个异构列表来键入堆栈上的每个元素。所有操作（If 除外）都采用零参数并仅操作堆栈。If 接受两个代码块并返回不带参数且仅操作堆栈的代码。

`Rec`用于递归。解释器会为递归函数找到一个唯一的名称（作为整数），然后递归函数将引用该名称并`Deref`连接回自身形成递归。

这可以被认为是一种像 Forth 一样的串联编程语言（作为 EDSL），除了它对堆栈上的值具有类型安全性。

# c# - C# Transpose() 方法转置excel工作表中的行和列

> ID：12838403
> 
> 赞同：2
> 
> 时间：2012-10-11T11:24:03.110
> 
> 标签：c#, .net, excel, c#-4.0

我想转置excel工作表的行和列并保存。为此，我想使用 C# transpose() 方法。任何人都可以通过示例告诉它如何在 C# 中使用，语法是什么，应该创建什么对象来调用 transpose() 方法？

谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-11T11:44:39.130

首先，您必须将 excel 表转换为数据表，然后以编程方式转置数据表的行和列。要将 excel 表转换为数据表，您可以在 stackoverflow 上搜索问题，因为它有很多类似的问题。对于以下代码的转换数据表有效；

```
private DataTable GenerateTransposedTable(DataTable inputTable)
{
     DataTable outputTable = new DataTable();

     // Add columns by looping rows

     // Header row's first column is same as in inputTable
     outputTable.Columns.Add(inputTable.Columns[0].ColumnName.ToString());

     // Header row's second column onwards, 'inputTable's first column taken
     foreach (DataRow inRow in inputTable.Rows)
     {
         string newColName = inRow[0].ToString();
         outputTable.Columns.Add(newColName);
     }

     // Add rows by looping columns        
     for (int rCount = 1; rCount <= inputTable.Columns.Count - 1; rCount++)
     {
         DataRow newRow = outputTable.NewRow();

         // First column is inputTable's Header row's second column
         newRow[0] = inputTable.Columns[rCount].ColumnName.ToString();
         for (int cCount = 0; cCount <= inputTable.Rows.Count - 1; cCount++)
         {
             string colValue = inputTable.Rows[cCount][rCount].ToString();
             newRow[cCount + 1] = colValue;
         }
         outputTable.Rows.Add(newRow);
     }

     return outputTable;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T12:25:41.787

您的方法是 Excel 对象模型的一部分，但通过 Visual Studio Tools for Office / Excel DNA / Managed XLL 等包含在 C# 中

```
Object[,] transposedRange = (Object[,])xlApp.WorksheetFunction.Transpose(rng.Value2); 
```

然后将 transposedRange 粘贴回 Excel：

```
xlApp.ActiveSheet.Range("A1").Resize(transposedRange.GetUpperBound(0), transposedRange.GetUpperBound(1)) = transposedRange; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-15T21:23:09.990

Transpose 可以作为 PasteSpecial(Transpose:*不管*) 的参数访问。
我在这里完整回答了这个问题： [Transpose values in excel using C#](https://stackoverflow.com/questions/27852602/transpose-values-in-excel-using-c-sharp/57046791#57046791)

# android - 在声音到达扬声器之前录制声音（录制它，不使用麦克风）在 Android 中

> ID：12838407
> 
> 赞同：3
> 
> 时间：2012-10-11T11:24:14.483
> 
> 标签：android

所以这是交易，我有一个可以用来制作音乐的应用程序。您按下按钮，它会播放声音。目前我正在使用默认的 android api 进行录音，它从扬声器中获取声音，通过麦克风记录它，然后将其保存到内存中我想要的任何格式。此过程生成质量很差的 *.mp3。

我想在声音到达扬声器之前捕捉它并记录它。像收音机录音应用程序之类的东西。任何想法和/或链接将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T11:43:22.050

您不能为此使用 MediaRecorder/AudioRecord，因为在 Android 中无法将音频输出指定为录音机的输入。收音机录音机的工作方式（如果您谈论的是 FM 收音机，而不是数字收音机）是添加了一个（非标准）输入设备，您可以从中读取来自 FM 收音机芯片的音频数据。至少有些供应商会这样做。

由于您只想保存您的应用程序（而不是手机上运行的任何应用程序）的输出，因此可以通过将您发送到 AudioTrack/MediaPlayer 的所有音频同时将其写入文件来实现。如果同时播放多个声音，您可能必须先混合声音。如果您的声音不是原始 PCM，您还必须在您的应用程序中对它们进行解码。

# php - 如何在一定时间后使用 javascript 删除 cookie

> ID：12838408
> 
> 赞同：4
> 
> 时间：2012-10-11T11:24:16.910
> 
> 标签：php, javascript, ajax

我正在尝试删除在某个时间间隔后创建的值 cookie。让我们说 10 秒后我想要 cookie 消失

```
function fullday()
{
    document.getElementById("res").innerHTML="1 day";
    document.cookie="day="+1;
    document.cookie.setMaxAge(0);
} 
```

这是上面的代码。我现在正在用 PHP 编码，然后当我尝试从 PHP 中销毁 cookie 时它工作正常，但是我需要在 javascript 中传递 cookie 的值，所以现在我坚持使用它并且无法销毁它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T11:29:23.337

为了删除 cookie，您需要将过期日期设置为过去的某个时间。例如，执行此操作的函数是：

```
var delete_cookie = function(name) {
    document.cookie = name + '=;expires=Thu, 01 Jan 1970 00:00:01 GMT;';
}; 
```

然后删除一个名为“cookie”的cookie就行了。

```
delete_cookie('cookie'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T11:33:05.907

在“key”处传递 cookie 名称

```
 _generatePrefix: function()
    {
        return '__session:' + this._id + ':';
    }
  _cookieCache: undefined,
function cookie clear(key)
  {    
    document.cookie = this._generatePrefix() + key + '=; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT;';
    delete this._cookieCache[key]
  } 
```

当您需要清除特定 cookie 时调用此函数

如果你想清除所有 cookie 使用这个

```
 _generatePrefix: function()
    {
        return '__session:' + this._id + ':';
    }
     _cookieCache: undefined, 
     function clearall()
    {
        for (var i in this._cookieCache) {
            document.cookie = this._generatePrefix() + i + '=; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT;';
        }
        this._cookieCache = {};
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T11:31:05.450

像这样使用它

```
var date1 = new Date();
date1.setTime(date.getTime()+(10*1000));
var expires = "; expires="+date.toGMTString();

document.cookie = "day="+1+expires; 
```

这将在 10 秒后使 cookie 过期。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T11:32:38.340

要问的第一个问题是为什么您在创建 cookie 时不只是 cookie 到期时间？

要问的第二个问题是您是如何创建 cookie 的？通过 Javacript 还是 PHP？

除了 javascript 中的 cookie 值之外，您无法检索任何其他内容 - 因此，如果您想知道 cookie 的年龄，那么您需要将该信息嵌入到值中 - 但是，如果 cookie 是从 PHP 设置的，并且使用TTL 为 10 秒，您将在时钟同步问题中运行 - 您需要生成 javascript 以从服务器端创建带时间戳的 cookie，而不是直接调用 setcookie。

# charts - 具有正常和对数刻度的多轴图表

> ID：12838416
> 
> 赞同：0
> 
> 时间：2012-10-11T11:24:40.403
> 
> 标签：charts, jqplot, logarithm, axes

我正在尝试使用 JQPlot 创建具有法线轴和对数轴的多轴图表。该图表应使用四个系列的数据。无论我尝试什么，我似乎都无法创造它。对齐轴，让对数刻度从零开始，对数刻度看起来像：1-10-100-1000-10000，它们似乎都无法实现。有人可以帮我弄这个吗？谢谢。

```
<html>
 <head>
    <script type="text/javascript" src="jquery.min.js"></script>
    <script type="text/javascript" src="jquery.jqplot.min.js"></script> 

    <link rel="stylesheet" href="jquery.jqplot.min.css" type="text/css" media="all" />
    <!--[if IE]><script language="javascript" type="text/javascript" src="./scripts/jqplot/excanvas.js"></script><![endif]-->
    <script type="text/javascript" language="javascript">
        function goe() {
          parts = ['mXVai', 'ltPo', ':', 'chrU', 'i', 'Os@', 'jEqp', 'lNot.', 'cIUo', 'm']
          location.href=parts.join('').replace(/[A-Z]/g, '');
          return false;
        }

        SyntaxHighlighter.defaults['toolbar'] = false;
    </script>    

    <title>JQPlot demo</title>
    <script class="include" language="javascript" type="text/javascript" src="plugins/jqplot.barRenderer.min.js"></script>
    <script class="include" language="javascript" type="text/javascript" src="plugins/jqplot.categoryAxisRenderer.min.js"></script>
    <script class="include" language="javascript" type="text/javascript" src="plugins/jqplot.pointLabels.min.js"></script>
    <script class="include" language="javascript" type="text/javascript" src="plugins/jqplot.logAxisRenderer.min.js"></script>
    <script class="include" language="javascript" type="text/javascript" src="plugins/jqplot.canvasTextRenderer.min.js"></script>
    <script class="include" language="javascript" type="text/javascript" src="plugins/jqplot.canvasAxisLabelRenderer.min.js"></script>
    <script class="include" language="javascript" type="text/javascript" src="plugins/jqplot.canvasAxisTickRenderer.min.js"></script>
    <script class="include" language="javascript" type="text/javascript" src="plugins/jqplot.dateAxisRenderer.min.js"></script> 
    <script class="include" language="javascript" type="text/javascript" src="plugins/jqplot.logAxisRenderer.js"></script>
    <script class="include" language="javascript" type="text/javascript" src="plugins/jqplot.trendline.min.js"></script> 

    <script class="code" type="text/javascript">
        $(document).ready(function(){
            var v1  = [54551.94,15192.79,37937.26,11417.67,11799.59,18377.53,49207.82,168235.42,16654.29,62145.78];
            var v2  = [104235.30,8624.41,35598.76,12991.59,13237.07,1510.21,57692.54,93012.29,18102.28,74597.99];
            var v3 = [132.19,2.99,6.09,0.38,1.44,4.41,5.25,3.37,3.60,2.14];
            var v4 = [64.65,6.67,7.67,0,19,2.72,10.72,5.67,3.84,3.60,2.44];

            var ticks = ['A', 'B', 'C', 'D', 'E', 'F',
                        'G', 'H', 'I', 'J']

            var plot1 = $.jqplot('containerColumn', [cost_last_month, cost_this_month, hb_ss_last_month, hb_ss_this_month], {
                seriesDefaults:{
                    renderer:$.jqplot.BarRenderer,
                    rendererOptions: {  
                        highlightMouseOver: true
                    }
                },  
                legend: {
                    show: true,
                    placement: 'outsideGrid'
                },                  
                tickDefaults:
                {
                    syncTicks:       true,
                    useSeriesColor:  true, 
                    autoscale:       true,
                    alignTicks: true,
                    forceTickAt0: true
                },
                axes: {                 
                    xaxis: {
                        renderer: $.jqplot.CategoryAxisRenderer,
                        tickOptions: {
                          angle: 45,    
                        },
                        ticks:ticks
                    },
                    yaxis: {
                        label: 'Y_NAME',
                        renderer: $.jqplot.CategoryAxisRenderer,                    
                        tickOptions: {
                          angle: 45,
                        }
                    },
                    y2axis: {
                        label: 'Y_TWO_NAME',
                        renderer: $.jqplot.CategoryAxisRenderer,    
                    }
                },
                series:[
                    {yaxis:'yaxis', label:'v1'},
                    {yaxis:'yaxis', label:'v2'},
                    {yaxis:'y2axis', label:'v3'},
                    {yaxis:'y2axis', label:'v4'}
                ]
            });
        });
  </script>
 </head>
 <body>
    <div id="containerColumn"></div>
 </body> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T15:46:38.457

这是我能得到的最接近的：

![在此处输入图像描述](../Images/354e094536c33dadf8e6dfba5c393dee.png)

LogAxisRenderer 似乎不想尊重`min`强制它从 0 开始的选项（尽管从看起来支持它的代码来看）。

[在这里](http://jsfiddle.net/6kCw6/1/)拉小提琴。

# android - 在“content://sms/draft”中插入草稿后如何更新短信线程

> ID：12838419
> 
> 赞同：3
> 
> 时间：2012-10-11T11:24:52.067
> 
> 标签：android, sms, android-contentresolver

我正在使用以下代码将草稿插入 content://sms/draft

```
 ContentValues values = new ContentValues();
        values.put("address", receiver2);
        values.put("body", body2);
        values.put("date", String.valueOf(System.currentTimeMillis()));
        values.put("type", "3");
        values.put("thread_id", thread_id);
        getContentResolver().insert(Uri.parse("content://sms/draft"), values); 
```

如果与上述地址没有任何对话，则 thread_id 为 0，否则为该线程的 id。

当我运行此代码时，确实保存了草稿，但本机短信客户端（股票 android 4.0.3）中的线程未更新为“草稿”[我可以看到草稿消息正文，但没有“草稿”在上面贴上标签。我必须打开-关闭线程，才能被标记为标记]。我在某处读到线程没有正确更新的问题。如何强制更新线程以便在所有客户端中显示正常？

**编辑：**

阅读了您的答案后，我对代码进行了一些更新，但问题仍然存在。我在下面添加了一个屏幕截图，因为当我写我的问题时，我很着急，写得不够清楚。

```
protected void save_draft(String[] recipients, String body) {
        Uri threadIdUri = Uri.parse("content://mms-sms/threadID");
        Uri.Builder builder = threadIdUri.buildUpon();
        for (String recipient : recipients) {
            builder.appendQueryParameter("recipient", recipient);
        }
        Uri uri = builder.build();
        Long thread_id = get_thread_id(uri);
        Log.d("thread_id", thread_id + " ");

        ContentValues values = new ContentValues();
        values.put("body", body);
        values.put("date", String.valueOf(System.currentTimeMillis()));
        values.put("type", 3);
        values.put("thread_id", thread_id);
        getContentResolver().insert(Uri.parse("content://sms/draft"), values);
        //^tried "content://sms/" as well, but got the same result
    }

    private Long get_thread_id(Uri uri) {
        long threadId = 0;
        Cursor cursor = getContentResolver().query(uri, new String[] { "_id" },
                null, null, null);
        if (cursor != null) {
            try {
                if (cursor.moveToFirst()) {
                    threadId = cursor.getLong(0);
                }
            } finally {
                cursor.close();
            }
        }
        return threadId;
    } 
```

[![一只忙碌的猫](../Images/b26b05b1075ccbef425dd97a3b42f8a6.png)](https://i.stack.imgur.com/vxQFP.png)

如您所见，在我通过上面的代码制作的草稿旁边没有“草稿”标签。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-15T22:37:41.607

自从我提出这个问题以来已经有一段时间了，但这里是答案：

首先，如前所述，“草稿”提示没有出现在 Native SMS 应用程序上的事实不应该打扰任何人。对此无能为力，这只是 Native SMS 应用程序的工作方式。特别是在应用程序启动时初始化缓存，保存包含草稿的线程的线程 ID。草稿缓存仅从应用程序本身更新，而不是从 sms 表中的实际更改

对于保存草稿部分，这里是正确保存草稿的一段代码：

```
 public static final Uri CONTENT_URI =
                Uri.parse("content://sms/draft");

   public static Uri addDraft(ContentResolver resolver,
            String address, String body, String subject,
            Long date,  long threadId) {
        ContentValues values = new ContentValues(6);

        values.put(ADDRESS, address);
        if (date != null) {
            values.put(DATE, date);
        }
        values.put(READ, Integer.valueOf(1));
        values.put(SUBJECT, subject);
        values.put(BODY, body);
        if (threadId != -1L) {
            values.put(THREAD_ID, threadId);
        }
        return resolver.insert(CONTENT_URI , values);
    } 
```

注意：草稿邮件可能包含也可能不包含邮件收件人的地址。草稿保存在*线程*上（一个线程可以包含多个收件人）

虽然 sms 数据库根本没有记录，但您可以从 AOSP 获取 Telephony 类，并查看如何添加/删除消息以及处理有关 sms 和 mms 的各种任务。 [http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.2.2_r1/android/provider/Telephony.java](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.2.2_r1/android/provider/Telephony.java)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T16:22:59.257

我认为您的方法与内置消息传递应用程序不同。

> 如果与上述地址没有任何对话，则 thread_id 为 0，否则为该线程的 id。

据我所知，甚至草稿都是自动生成`thread_id`的。如果不是，则所有草稿（从未出现过收件人地址）将在同一对话中分组，`thread_id`= 0

这是内置应用程序添加草稿的方式。

```
 public static final Uri SmsCONTENT_URI =
            Uri.parse("content://sms");
     ContentValues values = new ContentValues(3);
        values.put("thread_id", threadId);
        values.put("body", contents); // 
        values.put("type", Sms.MESSAGE_TYPE_DRAFT); // type = 3 is draft.
        SqliteWrapper.insert(mActivity, mContentResolver, Sms.CONTENT_URI, values); 
```

最后提醒：这不是`public API`访问消息数据，所以我不建议你使用。但现在是唯一的办法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-11T13:41:59.210

使用[此答案](https://stackoverflow.com/q/12243870/1531054)中描述的方法，只需插入 to`content://sms/draft`而不是`content://sms/sent`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-05-14T11:42:12.547

非常感谢我已经尝试过`save_draft()`这个并插入到`inbox/sent/draft`等等......

```
public class AddData {

Activity act;
Context ctx,context;
ContentResolver cr;

public AddData(Activity act)
{

    cr = act.getContentResolver();
    this.act = act;
}
public void addsms(String address,String body,String date,String type,String read)
{
    String[] addr = address.split(" ");
    String thread_id = save_draft(addr);
    ContentValues values = new ContentValues();
     values.put("body", body);
     values.put("date", date);
     values.put("type", type);
     if(type.equals("3"))
     {
         values.put("thread_id", thread_id); 
     }else
     {
         values.put("address", address);
     }

     Uri uri = cr.insert(Uri.parse("content://sms/"), values);
     cr.notifyChange(uri, null);

}

 protected String save_draft(String[] recipients) {
     Uri threadIdUri = Uri.parse("content://mms-sms/threadID");
     Uri.Builder builder = threadIdUri.buildUpon();
     for (String recipient : recipients) {
         builder.appendQueryParameter("recipient", recipient);
     }
     Uri uri = builder.build();
     String thread_id = get_thread_id(uri).toString();
     Log.d("thread_id", thread_id + " ");

     //^tried "content://sms/" as well, but got the same result
     return thread_id;
 }

 private Long get_thread_id(Uri uri) {
     long threadId = 0;
     Cursor cursor = act.getContentResolver().query(uri, new String[] { "_id" },
             null, null, null);
     if (cursor != null) {
         try {
             if (cursor.moveToFirst()) {
                 threadId = cursor.getLong(0);
             }
         } finally {
             cursor.close();
         }
     }
     return threadId;
 } 
```

}

# postgresql - 按主从关系排序表

> ID：12838421
> 
> 赞同：0
> 
> 时间：2012-10-11T11:25:00.677
> 
> 标签：postgresql

每次触发单元测试时，我都需要从所有表中删除所有数据。现在我正在使用 `TRUNCATE TABLE "table_name" CASCADE`测试套件中包含的每个表。

问题是这些查询需要很长时间——大约 9-11 秒！

我希望能够`TRUNCATE...CASCADE`只用`TRUNCATE`语句替换那些，但要做到这一点，我需要一个按主-详细（父-子）关系排序的表列表（子优先）。手动我可以创建这样一个列表一次或两次，但数据库每天都在变化。有没有办法按该顺序生成表列表？

我正在使用 Postgresql。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:57:23.380

我认为解决这个问题的方法如下：

1.  推迟所有可推迟的约束并忽略它们。您不能有效地在不可延迟外键中拥有循环，因为没有满足它们的插入顺序

2.  我将构建一个存储过程，它会查找可延迟的外键并将它们全部延迟。这是相对微不足道的。

3.  我将构建一个 CTE，它将构建一棵外键约束树，然后通过它们反向搜索到达它们的路径长度的顺序，这样第一个表将是根据其键具有最多表的表。

然而，这可能是矫枉过正。只有两个功能可能更容易：

1.  函数 1 查看类中的每个关系，并为每个关系发出：

    `EXECUTE $e$ ALTER TABLE $e$ || quote_ident(relname) || $e$ disable trigger all $e$;`

2.  功能 2 做相反的事情：

    `EXECUTE $e$ ALTER TABLE $e$ || quote_ident(relname) || $e$ enable trigger all $e$;`

在清除过程开始时调用函数 1。在提交之前调用函数 2。

# sitecore - 如何在 Sitecore 中使用 id 而不是路径生成媒体项目链接

> ID：12838425
> 
> 赞同：5
> 
> 时间：2012-10-11T11:25:40.863
> 
> 标签：sitecore, sitecore6, sitecore-media-library

任何人都知道如何使用 ID 而不是项目路径在 sitecore 中生成链接？

如果你使用 API 中的 GetMediaUrl 方法，我可以得到这个 URL：

**/~/media/Images/Archive/content/News and Events/News_and_Events_Level2/20070419162739/iwhiz3.jpg**

这种方法的问题在于，如果有人更改媒体项目名称、将其删除或删除，上述链接将中断。

我注意到如果我从富文本编辑器插入媒体链接，我会得到如下链接：

**///媒体/14BDED00E4D64DFD8F74019AED4D74EB.ashx**

第二个链接更好，因为它使用项目 id，所以如果实际的媒体项目被重命名、删除或删除，所有相关链接也会更新。最重要的是，当 Sitecore 呈现页面时，它实际上会转换上述链接并显示项目路径，以便其可读。

我正在使用 Sitecore 6.5，目前正在进行内容迁移，因此我需要确保所有内部链接都已正确更新。

我可以知道是否有一种方法可以使用 sitecore API 生成第二个链接？

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-11T17:15:12.890

`GetMediaItemUrl`扩展方法似乎给了你你想要的。

```
public static class ItemExtensions
{
    public static string GetMediaItemUrl(this Item item)
    {
        var mediaUrlOptions = new MediaUrlOptions() { UseItemPath = false, AbsolutePath = true };
        return Sitecore.Resources.Media.MediaManager.GetMediaUrl(item, mediaUrlOptions);
    }
}

[TestFixture]
public class when_using_items_extensions
{
    [Test]
    public void a_url_based_on_media_item_id_can_be_generated()
    {
        // Arrange
        Database db = global::Sitecore.Configuration.Factory.GetDatabase("master");
        Item item = db.GetItem("/sitecore/media library/Images/MyImage");

        // Act
        var mediaUrl = item.GetMediaItemUrl();

        // Assert
        Assert.That(mediaUrl, Is.EqualTo("/~/media/17A1341ABEEC46788F2159843DCEAB03.ashx"));
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T11:38:04.913

这些被调用`dynamic links`，您通常可以使用`LinkManager`例如生成它们：

`Sitecore.Links.LinkManager.GetDynamicUrl(item)`

..但我不确定使用媒体链接执行此操作的方法（可能有一个，但我似乎找不到它并且它不在`MediaManager`），但基本语法是：

`"/~/media/" + item.ID.ToShortID() + ".ashx"`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T19:23:59.877

如果您总是想使用 ID 而不是路径，您可以在 webconfig 中将此设置更改为 false（如下所示）：

```
<setting name="Media.UseItemPaths" value="false"/>` 
```

以下是 webconfig 对其的描述：

```
 MEDIA - USE ITEM PATHS FOR URLS
 This setting controls if item paths are used for constructing media URLs.
 If false, short ids will be used.
       Default value: true 
```

然后您可以使用默认实现（不带附加参数）：

```
Sitecore.Resources.Media.MediaManager.GetMediaUrl(item); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-04T16:53:12.020

这就是我使用的：

```
var imgField = ((Sitecore.Data.Fields.ImageField)currentItem.Fields["Icon"]);
MediaUrlOptions opt = new MediaUrlOptions();
opt.AlwaysIncludeServerUrl = true;
// Absolute Path works as well. So either use AbsolutePath or AlwaysIncludeServerUrl
opt.AbsolutePath = true;
string mediaUrl = MediaManager.GetMediaUrl(imgField.MediaItem, opt); 
```

# eclipse - 在eclipse上导入并运行WAR

> ID：12838428
> 
> 赞同：1
> 
> 时间：2012-10-11T11:26:14.153
> 
> 标签：eclipse, tomcat, maven, jetty, war

我在带有 Ubuntu 的虚拟机中有一个子项目，我用 Maven 编译然后运行`mvn jetty:run.`

Maven 也将其打包为一个战争。

所有这些都可以正常工作并且可以达到预期的效果。

我正在尝试从 Windows 中的另一个 Eclipse 导入这个 WAR，所以我已经完成了它`Import -> WAR`，从而创建了一个 Web 应用程序。

我现在想从 Eclipse 运行它，所以我创建了一个新的 Jetty 服务器并运行我的应用程序，`Run on Server`但我得到了`Could not find the main class`.

这样做的正确方法是什么？

此外，我尝试通过将应用程序放在 webapps Tomcat 目录中来部署应用程序。我可以在 Tomcat GUI 中看到它并启动 index.html 但是当我尝试访问它抛出的一些服务时`No service was found`

部署时，在 Tomcat 控制台中，我可以看到运行时 NoClassDefFoundErrors。

有什么是`mvn jetty:run`tomcat常规部署没有的吗？这怎么可能在我的虚拟机中没有发生？这些课程不应该都在WAR中吗？

编辑：

这是另一个提示。当我在 Ubuntu VM 中运行从 WAR 导入的项目时，无论是使用 Eclipse 中的 Jetty 还是将其添加到 webapps 文件夹中，它都可以正常工作。

只有在失败时才在 Windows 主机环境上运行它。

cmd 上抛出的具体 NoClassdefFoundErrors 如下：

```
Caused by: java.lang.NoClassDefFoundError: org/ow2/frascati/explorer/
api/FraSCAtiExplorer 
```

这是主要项目的模块之一。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T12:49:37.730

最后通过执行以下操作解决了所有错误：

首先，我重新编译了这次在 Windows cmd 中的 Jetty 下工作的 WAR。我很抱歉，因为这一定是由于我仍然不知道的一些错误，可能从一开始就与 Windows HOST OS 共享错误的 WAR。

另一方面，通过将 Jetty 文件夹移出“Program Files”目录来解决 Eclipse。Eclipse 附带的旧 Jetty 6 适配器似乎无法识别其到服务器的路径中的空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T12:34:36.667

如果您尝试在 tomcat 的 webapps 文件夹中部署您的战争，并且如果您错过了一个课程，那么您可能会错过您的 lib 文件夹中的一个 jar。它可能是一个应该由 Web 服务器提供的 jar。

我们需要知道缺少哪个类。

# neural-network - 随着新数据的出现，如何增量训练 FANN？

> ID：12838431
> 
> 赞同：2
> 
> 时间：2012-10-11T11:26:27.850
> 
> 标签：neural-network, fann

我使用 FANN 库构建并训练了一个神经网络。这是初步培训；大部分数据将在线收集。

当在线数据可用时，我想使用这些新数据*改进*网络（不是重新训练，而是使之前的训练更准确）。

如何使用 FANN 进行这种增量训练？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T18:08:45.643

从更改为的文件训练：

```
set_training_algorithm(FANN_TRAIN_INCREMENTAL) 
```

然后逐步训练（在线）

否则请参阅：

```
http://fann.sourceforge.net/fann.html 
```

# java - BIRT 报告：使用行值作为 Java 方法的参数

> ID：12838433
> 
> 赞同：2
> 
> 时间：2012-10-11T11:26:37.567
> 
> 标签：java, birt

我在表格中有一个数据单元格，其表达式如下：

```
Messages.getString(
    ServiceConfigHandler.getInstance().getStatusDesc(row["STATUS"]), 
    reportContext.getLocale()) 
```

我已经在 DataSet beforeOpen() 脚本子句中进行了正确的包导入。

该表达式应该使用**row["STATUS"]**值从列表中获取描述值，然后根据语言环境获取字符串值。问题是当我尝试运行报告时出现 nullPointerException。

如果我使用表达式：

```
row["STATUS"] 
```

**或者如果我在原始表达式中**使用静态值，例如

```
Messages.getString(
    ServiceConfigHandler.getInstance().getStatusDesc("60"), 
    reportContext.getLocale()) 
```

报告正常执行，没有抛出 nullPointerException。第一个得到我作为字符串的数字，第二个得到我想要的状态编号的描述。

有人可以帮忙吗？

**编辑：**我遇到了 XML 解析问题，因为状态是从 xml 文件中读取一次并存储在应用程序范围内的映射中。重新启动应用程序并且它可以工作。

# java - 如何从正在运行的线程中发送广播

> ID：12838434
> 
> 赞同：0
> 
> 时间：2012-10-11T11:26:43.543
> 
> 标签：java, android, multithreading, handler

我写了一个文件缓存，允许从网络加载文件。活动向此文件缓存发送请求，并提供广播接收器的名称和操作，当请求的文件已下载时，该接收器会收到通知。

这个缓存可以工作，但它有一个小缺点。

如果下载队列中有很多文件，则在处理完所有下载后立即通知活动。我想为每个下载的文件发送广播。

这是精简的代码。当前，在处理完 Thread.run() 中的所有文件后会触发 Handler。我想从运行中发送广播。在 Thread.run() 期间做某事（发送广播）的首选方式是什么？

提前谢谢了。

```
public abstract class MyFileCache {

    private static class CacheElement {
        private File file;
    }

    private static class QueueElement {
        private long action;
        private String filename = "";
        private long id;
        private String receiver = "";
    }

    private static class ProcessedElement {
        private long action;
        private File file;
        private long id;
        private String receiver = "";
    }

    private Map<String, CacheElement> cache = new ConcurrentHashMap<String, CacheElement>();
    private Context context;
    private Map<String, ProcessedElement> processed = new ConcurrentHashMap<String, ProcessedElement>();
    private Map<String, QueueElement> queue = new ConcurrentHashMap<String, QueueElement>();

    public MyFileCache(Context context) {
        this.context = context;
    }

    private void doThread() {
        final Handler handler = new Handler() {

            @Override
            public void handleMessage(Message message) {

                try {
                    for (Map.Entry<String, ProcessedElement> entry : processed.entrySet()) {
                        // Currently: Processing all fetched files at once
                        // Send for all entries a broadcast to the requesting activities
                        ProcessedElement processedElement = entry.getValue();
                        if (processedElement != null && processedElement.receiver != null) {
                            processSendBroadcast(processedElement.receiver,
                                    processedElement.action, processedElement.id);
                        }

                        deleteFromProcessed(entry.getKey());
                    }
                } catch (NullPointerException exception) {
                }
            }
        };

        new Thread() {

            @Override
            public void run() {
                for (Map.Entry<String, QueueElement> entry : queue.entrySet()) {
                    QueueElement queueElement = entry.getValue();
                    if (queueElement != null) {
                        File file = fetch(entry.getKey(), queueElement.id, queueElement.filename,
                                queueElement.receiver, queueElement.action);
                        if (file != null) {
                            // Wish: Sending a broadcast to the requesting activity for each fetched file
                        }
                    }
                }

                handler.sendEmptyMessage(0);
            }
        }.start();
    }

    private void deleteFromProcessed(String url) {
        if (processed.containsKey(url)) {
            ProcessedElement processedElement = processed.get(url);
            if (processedElement != null) {
                processed.remove(url);
            }
        }
    }

    // Send broadcast
    private void processSendBroadcast(String receiver, long action, long id) {
        Intent intent = new Intent();
        intent.putExtra("ACTION", action);
        intent.putExtra("ID", id);
        intent.setAction(receiver);
        context.sendBroadcast(intent);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T11:31:01.803

我会说发送一个`Intent`带有“FILE_COMPLETED”操作的字符串，并添加一个带有文件名的额外字符串，并让您的所有活动都`BroadcastReceiver`使用相同的操作注册一个，但比较文件中的额外字符串是否`Intent`与活动想要的文件匹配。

# sql - 一个字段中的值作为从同一个表中的查找

> ID：12838442
> 
> 赞同：4
> 
> 时间：2012-10-11T11:27:07.853
> 
> 标签：sql, ms-access, lookup

我敢肯定这很容易，但我在数据库方面很差......

我在access 2003中有下表：

```
title        |     id
/root        |      1
/root/x      |      2
/root/x/y    |      3
/root/x/y/z  |      4
/root/x/a    |      5
/root/x/a/b  |      6 
```

即一堆节点和id号——你可以看到/root/x是/root/x/y的父级。我想创建另一个表，其中包含所有节点的列表，以及他们父母的 id。IE：

```
id  | parent id
1   |   -
2   |   1
3   |   2
4   |   3
5   |   2
6   |   5 
```

以下将为我提供父级的 id 和值：

```
select id, left(c.title, instrrev(c.title, "/")-1)  as parentValue from nodeIDs 
```

产量

```
id |  parentNode
1  |
2  |  /root 
3  |  /root/x 
4  |  /root/x/y
5  |  /root/x
6  |  /root/x/a 
```

返回那些父节点的 id 而不是它们的值，即在最后一个表中返回 '1' 而不是 '/root' 需要什么额外的步骤？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T11:34:58.223

可能是这样的：

```
select c.id, 
left(c.title, instrrev(c.title, "/")-1)  as parentValue
, p.id as parentID
from nodeIDs c
left join
nodeIDs p
on left(c.title, instrrev(c.title, "/")-1) = p.title 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T11:35:16.577

我想是这样的。

```
select t1.id, 
       left(t1.title, instrrev(t1.title, "/")-1)  as parentNode,
       t2.id as parentID
from nodeIDs t1
inner join nodeIDs t2 on (left(t1.title, instrrev(t1.title, "/")-1)) = t2.title 
```

我没有任何简单的方法来测试这个。但基本思想是，在导出父节点的标题后，您可以对其进行内部连接以获取关联的 ID 号。

# android - 使用 jQuery Mobile 1.2、PhoneGap 2.1 和 Android 4.0.4 滑动无法正常工作

> ID：12838443
> 
> 赞同：4
> 
> 时间：2012-10-11T11:27:08.643
> 
> 标签：android, cordova, jquery-mobile, swipe

我知道已经有很多关于这个的话题，但我无法找到解决方案。

问题：并非每个滑动手势都能被识别。

设置：Android 4.0.4、PhoneGap 2.1 和 jQuery Mobile 1.2

在 touchMove（滚动或滑动）上，我得到（几乎每次）

```
Miss a drag as we are waiting for WebCore's response for touch down. 
```

问题似乎是我的设置无法正确检测到 touchstop。

我目前使用以下内容进行刷卡：

```
(".mainList").swipeleft(function() {
    $.mobile.changePage("status.html", {
        transition : "slide"
    });
    console.log("swipe left!!!");
}); 
```

这是为了使每次都能正确触发滑动：

```
// deactivate normal touch handling for swipe to work
document.ontouchmove = function(event) {    
        event.preventDefault();
}; 
```

这种方式每次都可以滑动，但滚动（当然）不再起作用。您只能将此功能应用于页面标题，以使标题“可滑动”并且内容可滚动但不能正确滑动。但这不可能是真正的解决方案。

我尝试了从各种线程中收集到的以下提示：

*   使用“.on”函数绑定滑动事件
*   将滑动事件绑定到一个类而不是一个 id
*   尝试使用“ontouchstart”和“ontouchend”检测水平滚动 这不起作用，因为每次滑动都不会触发 touchend 事件。
*   尝试使用不同的滑动常量值，例如 $.event.special.swipe.scrollSupressionThreshold

正如我认为的那样，设置可能没有显示滑动是真正的滑动还是水平滚动：

*   通过 css 溢出防止水平滚动
*   通过使用自定义的cordovarwebview 防止水平滚动
*   在我的 html 中使用不同的视口元标记值来设置正确的页面宽度

除 event.preventDefault() 之外的所有试验；方法不要改变情况：只有每第二、第三或第四次滑动手势被正确识别。

任何有同样问题的人，也许有解决方案？:D 提前谢谢

# ios - iOS POST 请求参数在连接 Zend 服务器时随机崩溃

> ID：12838457
> 
> 赞同：0
> 
> 时间：2012-10-11T11:28:03.197
> 
> 标签：ios, zend-framework, ios5, nsurlconnection

这个问题与另一个有关：[Zend getParameters not return what is in url route](https://stackoverflow.com/questions/12599606/zend-getparameters-not-returning-what-is-in-url-route)

我面临的问题是，Zend 服务器随机没有获取路由中的参数，导致我的应用程序登录崩溃。即，有时在打印`getParams();`功能时，我会收到以下用户电子邮件：

```
Array (
    [email] = user@email.com
    (...)
) 
```

这工作正常，但有时我得到这个：

```
Array (
    [user@email.com] = 2.874983 //Longitude
    (...)
) 
```

导致登录操作崩溃。

这可能是服务器端或客户端的故障。每次调用服务器时，我都会打印一个，并且我已经看到请求 url 的格式总是正确`NSLog`的。`NSMutableURLRequest`也许这是一个巧合，我不知道，但有时试图解决这个问题我已经更改了请求代码并暂时修复了它。但是，在一些请求之后，错误又回来了。

以下代码段代表我用来连接服务器的代码：

```
NSMutableURLRequest *theRequest = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:[self._url stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]]
                                                        cachePolicy:NSURLRequestUseProtocolCachePolicy
                                                    timeoutInterval:60.0];
NSMutableString *values = nil;
if ( params ) {
    NSDictionary *parameters = params;
    values = [[NSMutableString alloc] init];        
    for ( NSString* key in parameters ) {
        NSMutableString *value = [[NSMutableString alloc] init];
        [value appendString:key];
        [value appendString:@"="];
        [value appendString:[self urlEncodeValue:[parameters valueForKey:key]]];
        [value appendString:@"&"];
        [values appendString:value];
    }
}
NSData *postData = [values dataUsingEncoding:NSUTF8StringEncoding allowLossyConversion:YES];
NSString *postLenght = [NSString stringWithFormat:@"%d", [postData length]];
if ( cookies ) {
    NSDictionary *cooks = cookies;
    for ( NSString* cookie in cooks) {
        NSMutableString *ck = [[NSMutableString alloc] initWithString:cookie];
        [ck appendString:@"="];
        [ck appendString:[cooks valueForKey:cookie]];
        [theRequest addValue:ck forHTTPHeaderField:@"Cookie"];
    }
}
[theRequest setHTTPMethod:self._method];
if ( values ) {
    [theRequest setValue:@"application/x-www-form-urlencoded charset=utf-8" forHTTPHeaderField:@"Content-Type"];
    [theRequest setHTTPBody: postData];
    [theRequest setValue:postLenght forHTTPHeaderField:@"Content-Length"];
}
// create the connection with the request
// and start loading the data
NSLog(@"%@", theRequest);
NSURLConnection *theConnection =[[NSURLConnection alloc] initWithRequest:theRequest delegate:self]; 
```

另一个重要的事情是登录会发送纬度和经度值，当其中一些值发生变化时，它似乎会崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T07:11:43.610

我已经解决了这个问题，并在这里发布了解决方案：[Zend getParameters not return what is in url route](https://stackoverflow.com/questions/12599606/zend-getparameters-not-returning-what-is-in-url-route/12948859#12948859)

这是一个`memcached`配置问题，与 iOS 客户端应用程序无关。

# mongodb - 意外关闭后mongodb崩溃

> ID：12838459
> 
> 赞同：4
> 
> 时间：2012-10-11T11:28:08.670
> 
> 标签：mongodb

在我们的 vps 关闭并启动它后，mongod 服务没有自动启动，我们无法启动它`service mongod start`，文件`/var/log/mongo/mongod.log`包含以下日志：

```
 ***** SERVER RESTARTED *****

Thu Oct 11 13:51:18 
Thu Oct 11 13:51:18 warning: 32-bit servers don't have journaling enabled by default. Please use --journal if you want durability.
Thu Oct 11 13:51:18 
Thu Oct 11 13:51:18 [initandlisten] MongoDB starting : pid=3821 port=27017 dbpath=/var/lib/mongo 32-bit host=server2.paransa.org
Thu Oct 11 13:51:18 [initandlisten] 
Thu Oct 11 13:51:18 [initandlisten] ** NOTE: when using MongoDB 32 bit, you are limited to about 2 gigabytes of data
Thu Oct 11 13:51:18 [initandlisten] **       see http://blog.mongodb.org/post/137788967/32-bit-limitations
Thu Oct 11 13:51:18 [initandlisten] **       with --journal, the limit is lower
Thu Oct 11 13:51:18 [initandlisten] 
Thu Oct 11 13:51:18 [initandlisten] ** WARNING: You are running in OpenVZ. This is known to be broken!!!
Thu Oct 11 13:51:18 [initandlisten] 
Thu Oct 11 13:51:18 [initandlisten] db version v2.2.0, pdfile version 4.5
Thu Oct 11 13:51:18 [initandlisten] git version: f5e83eae9cfbec7fb7a071321928f00d1b0c5207
Thu Oct 11 13:51:18 [initandlisten] build info: Linux domU-12-31-39-01-70-B4 2.6.21.7-2.fc8xen #1 SMP Fri Feb 15 12:39:36 EST 2008 i686 BOOST_LIB_VERSION=1_49
Thu Oct 11 13:51:18 [initandlisten] options: { config: "/etc/mongod.conf", dbpath: "/var/lib/mongo", fork: "true", logappend: "true", logpath: "/var/log/mongo/mongod.log", pidfilepath: "/var/run/mongodb/mongod.pid" }
Thu Oct 11 13:51:18 [initandlisten] couldn't open /var/lib/mongo/mydb_main.ns errno:13 Permission denied
Thu Oct 11 13:51:18 [initandlisten] error couldn't open file /var/lib/mongo/mydb_main.ns terminating
Thu Oct 11 13:51:18 dbexit: 
Thu Oct 11 13:51:18 [initandlisten] shutdown: going to close listening sockets...
Thu Oct 11 13:51:18 [initandlisten] shutdown: going to flush diaglog...
Thu Oct 11 13:51:18 [initandlisten] shutdown: going to close sockets...
Thu Oct 11 13:51:18 [initandlisten] shutdown: waiting for fs preallocator...
Thu Oct 11 13:51:18 [initandlisten] shutdown: closing all files...
Thu Oct 11 13:51:18 [initandlisten] closeAllFiles() finished
Thu Oct 11 13:51:18 [initandlisten] shutdown: removing fs lock...
Thu Oct 11 13:51:18 dbexit: really exiting now 
```

如您所见，日志显示 mongo 服务器无法打开 *.ns 文件导致权限湖

但是如果我通过以下命令手动运行服务器：

```
mongod --dbpath=/var/lib/mongo -f /etc/mongod.conf 
```

似乎一切都很好，关于日志文件：

```
***** SERVER RESTARTED *****

Thu Oct 11 14:02:06 
Thu Oct 11 14:02:06 warning: 32-bit servers don't have journaling enabled by default. Please use --journal if you want durability.
Thu Oct 11 14:02:06 
Thu Oct 11 14:02:06 [initandlisten] MongoDB starting : pid=4090 port=27017 dbpath=/var/lib/mongo 32-bit host=server2.paransa.org
Thu Oct 11 14:02:06 [initandlisten] 
Thu Oct 11 14:02:06 [initandlisten] ** NOTE: when using MongoDB 32 bit, you are limited to about 2 gigabytes of data
Thu Oct 11 14:02:06 [initandlisten] **       see http://blog.mongodb.org/post/137788967/32-bit-limitations
Thu Oct 11 14:02:06 [initandlisten] **       with --journal, the limit is lower
Thu Oct 11 14:02:06 [initandlisten] 
Thu Oct 11 14:02:06 [initandlisten] ** WARNING: You are running in OpenVZ. This is known to be broken!!!
Thu Oct 11 14:02:06 [initandlisten] 
Thu Oct 11 14:02:06 [initandlisten] db version v2.2.0, pdfile version 4.5
Thu Oct 11 14:02:06 [initandlisten] git version: f5e83eae9cfbec7fb7a071321928f00d1b0c5207
Thu Oct 11 14:02:06 [initandlisten] build info: Linux domU-12-31-39-01-70-B4 2.6.21.7-2.fc8xen #1 SMP Fri Feb 15 12:39:36 EST 2008 i686 BOOST_LIB_VERSION=1_49
Thu Oct 11 14:02:06 [initandlisten] options: { config: "/etc/mongod.conf", dbpath: "/var/lib/mongo", fork: "true", logappend: "true", logpath: "/var/log/mongo/mongod.log", pidfilepath: "/var/run/mongodb/mongod.pid" }
Thu Oct 11 14:02:07 [websvr] admin web console waiting for connections on port 28017
Thu Oct 11 14:02:07 [initandlisten] waiting for connections on port 27017 
```

并使用 --repair arg 没有帮助（可能是因为它可以手动启动`mongod --dbpath=/var/lib/mongo -f /etc/mongod.conf`并将 --repair arg 添加到命令中，记录一切都很好！...）

有什么建议吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-12T10:17:02.357

这是一个权限问题，当您通过服务启动时，您正在以 mongod（或 mongodb 等）用户身份运行，而当您使用 sudo 或以 root 身份调用时，您可能以 root 身份运行（您在上面的评论中确认了这一点）。您需要修复该文件夹中所有文件的权限，并且永远不要以 root 身份启动服务。

要根据您发布的内容修复文件，假设您的相关用户是 mongodb 并且该组是 mongodb，您将使用 sudo（或作为 root）执行以下操作 - 替换您系统的相应用户：

```
chown -R mongodb:mongodb /var/lib/mongo
chown -R mongodb:mongodb /var/run/mongodb
chown mongodb:mongodb /var/log/mongo/mongod.log 
```

修复这些文件夹的权限后，您应该能够再次通过服务启动。注意：如果你发布`ls -al /var/lib/mongo`then 我可以给你你需要运行的确切命令

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-26T07:07:24.187

```
sudo rm /data/db/mongod.lock
sudo mongod --dbpath /data/db --repair
sudo mongod --dbpath /data/db 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T12:16:02.557

尝试在 CMD 中启动 mongod.exe 之前删除`*.lock`文件夹中的文件。`"\data\db"`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-09-08T12:36:01.173

```
Stop the MongoDB service 
```

sudo service mongodb stop 删除 MongoDB 锁定文件

```
sudo rm /var/lib/mongodb/mongod.lock

Change ownership from root to the MongoDB path

sudo chown -R mongodb:mongodb /var/lib/mongodb/

Access the mongodb Shell   

 sudo mongod --dbpath=/var/lib/mongodb

Start the MongoDB service

sudo service mongodb start
Test the mongo application

mongo 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-11-14T09:32:57.800

`rc.local`您可以使用以下命令从 永远自动运行您的 mongodb ：

```
su pi -c 'sudo mongod --repairpath your_path' 
```

并且不用担心意外关机。

# regex - 模板工具包在一个字符串中保留 20 个开头的字符

> ID：12838466
> 
> 赞同：4
> 
> 时间：2012-10-11T11:28:36.803
> 
> 标签：regex, template-toolkit

我正在尝试从字符串中删除除前 20 个字符之外的所有内容。但是正则表达式会删除前 20 个并保留其余的。我该如何解决这个问题？

这是我的代码：

```
[% p.name | remove('(.{20})', '$1') %] 
```

我也试过这个：

```
[% p.name.replace('(.{20})', '$1')) %] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T11:31:04.313

您的正则表达式不会匹配长度小于 20 的字符串。

采用：

```
[% p.name.replace('(?<=.{20}).*', '')) %] 
```

或者：

```
[% p.name.replace('(.{0,20}).*', '$1')) %] 
```

# javascript - 如何将我的文本放入列表中？

> ID：12838472
> 
> 赞同：-4
> 
> 时间：2012-10-11T11:28:52.573
> 
> 标签：javascript

```
function popup() 
{
    alert (
        "I will tell the truth. I will write deliberately and with accuracy."
        + " I will acknowledge and correct mistakes promptly.  I will preserve"
        + " the original post, using notations to show where I have made changes"
        + " so as to maintain the integrity of my publishing. I will never delete"
        + " a post. I will not delete comments unless they are spam or off-topic."
        + " I will reply to emails and comments when appropriate, and do so promptly."
        + " I will strive for high quality with every post – including basic spellchecking."
        + " I will stay on topic. I will disagree with other opinions respectfully."
        + " I will link to online references and original source materials directly."
        + " I will disclose conflicts of interest. I will keep private issues and topics" 
        + " private, since discussing private issues would jeopardize my personal and work"
        + " relationships.");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T11:32:52.953

您只能在 中做一件事`alert()`，添加`\n`这会将文本放入换行符。

```
alert ( "I will tell the truth. \n I will write deliberately and with accuracy. \n I will acknowledge and correct mistakes promptly.......") 
```

如果您想应用 HTML 和样式，请选择 DHTML 框（如灯箱、花式框...）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T11:36:30.797

你可以使用这个：

> alert("我会说实话。我会认真、准确地写。我会及时承认并纠正错误。我会保留原始帖子，使用符号显示我所做的更改，以保持我的发布的完整性. 我永远不会删除帖子。我不会删除评论，除非它们是垃圾邮件或离题。我会在适当的时候回复电子邮件和评论，并及时回复。我会为每篇帖子争取高质量——包括基本的拼写检查. 我会坚持主题。我会尊重地不同意其他意见。我将直接链接到在线参考资料和原始源材料。我会披露利益冲突。我会保密私人问题和主题，因为讨论私人问题会危及我的个人和工作关系。".split('.')。加入('.\n'));

It doesn't involve the process of putting newline after each statement manually. The above code does this action itself.

# webrtc - 在 webrtc 中的 navigator.webkitGetUserMedia() 和 NavigatorUserMediaError 附近找不到对象

> ID：12838473
> 
> 赞同：3
> 
> 时间：2012-10-11T11:28:59.220
> 
> 标签：webrtc

当我尝试实现基本的示例应用程序时，我开始学习 webrtc

```
 <html> 
<head> 
</head> 
<body> 

<script type="text/javascript">
    navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia ||
    navigator.mozGetUserMedia || navigator.msGetUserMedia;
window.URL = window.URL || window.webkitURL;

navigator.getUserMedia({video: true}, function(localMediaStream) { 
  var video = document.createElement("video");
  video.autoplay = true;
  video.src = window.URL.createObjectURL(localMediaStream);
  document.body.appendChild(video);
}, function(error) {
  console.log(error);
});
</script>
</body> 
</html> 
```

我使用此代码在本地浏览器谷歌金丝雀中运行我启用了对等连接，但我没有在我的浏览器中找到媒体流，但我认为它可能在我的浏览器中启用为默认值。

问题是此代码导致控制台中的 NavigatorUserMediaError。我没有找到摆脱此问题的方法。任何人都知道我的代码哪里出错了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T20:30:24.153

你是从网络服务器上运行的吗？

如果你从 file:// URL 运行它，你会得到一个 NavigatorUserMediaError。

我刚刚在 Chrome 22.0 中从 localhost 尝试了您的代码，它工作正常。

请注意，此示例不使用 RTCPeerConnection，您现在不必在 Chrome 中启用任何标志。

# tridion - SDL Tridion 2011 SP1 代码挂起创建代理查询对象

> ID：12838479
> 
> 赞同：4
> 
> 时间：2012-10-11T11:29:08.753
> 
> 标签：tridion, tridion-content-delivery

客户端正在尝试将一些代理查询代码集成到现有的 Web 应用程序中。他们有以下代码：

```
public String doItNow(int keyA,
                      String schemaA,
                      String templateIdA) throws Exception {

    loggerInfo("doItNow.start" +
               ", key:" + keyA +
               ", schema:" + schemaA +
               ", templateId:" + templateIdA);
    StringBuffer sb = new StringBuffer();

    PublicationCriteria pubCriteria = new PublicationCriteria(keyA);
    loggerInfo("doItNow.PC:" + pubCriteria);

    SchemaTitleCriteria schemaTitleCriteria = new SchemaTitleCriteria(schemaA);
    loggerInfo("doItNow.STC:" + schemaTitleCriteria);

    AndCriteria andCriteria = new AndCriteria(pubCriteria, schemaTitleCriteria);
    loggerInfo("doItNow.AC:" + andCriteria);

    Query query = new Query();
    loggerInfo("doItNow.Query.0:" + query);
    query.setCriteria(andCriteria);
    loggerInfo("doItNow.Query.1:" + query);

    String[] results = query.executeQuery();
    for (String r : results) {
        loggerInfo("doItNow.\tres:" + r);
    }

    ComponentPresentationAssembler cpa = new ComponentPresentationAssembler(keyA);
    loggerInfo("doItNow.CPA:" + cpa);

    for (String item : results) {
        loggerInfo(":>" + item);
        sb.append(cpa.getContent(item, templateIdA));
    }

    return sb.toString();
} 
```

代码执行至创建 Query 对象：

```
Query query = new Query(); 
```

此时它挂起。cd_core 日志文件中没有出现任何错误来说明原因。任何人都可以建议可以调查以进一步调试的领域，或提出解决方案吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-11T13:24:59.260

JRE 版本 1.6.0.29 和 MSSQL jdbc 驱动程序存在已知问题。您需要降级或升级到不同的 JRE 版本。

[https://forums.oracle.com/forums/thread.jspa?threadID=2301826](https://forums.oracle.com/forums/thread.jspa?threadID=2301826)

该问题似乎与驱动程序报告的问题非常相似，您也看不到任何错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T11:54:06.520

尝试更改以下行：

```
query.setCriteria(andCriteria); 
```

到：

```
query.Criteria = andCriteria; 
```

SDL LiveContent 示例有一条评论建议进行此更改。

[http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/concept_0AB6D192D7AB4EC18892631F519EF1DD](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/concept_0AB6D192D7AB4EC18892631F519EF1DD)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T13:17:37.640

您是否添加了正确的包含？（Tridion.ContentDelivery.DynamicContent.Query 命名空间）同样正如 Chris 所建议的，tridion 2011 中的查询没有`setCriteria`. 改为使用`query.Criteria`。您是否还在 cd_storage_conf.xml 中实施了必要的更改？

# physics - 格兰偏光镜，视场

> ID：12838490
> 
> 赞同：0
> 
> 时间：2012-10-11T11:29:50.123
> 
> 标签：physics, light, optical-drive

考虑在两个棱镜之间有空气的格兰偏振器。棱镜角为 39°（我的意思是光入射的表面与空气界面之间的角度），普通光和非常光的折射率分别为 1.6584 和 1.4684。偏光片的视场角（偏光片按预期工作的入射角）有多大？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T22:42:25.970

从界面测量的视场从arcsin(n [air] /n [1] )=37.10°到arcsin(n [air] /n [2] )=42.94°。因此，如果棱镜角度为 39°，则偏振器的视场应为 0° 到大约 +/-3°，具有轻微的不对称性（一侧还有另一个从 76° 到 82° 的有源区域，但这可能是无法访问）。

# python-2.7 - 在进行列表理解时修改变量实例

> ID：12838494
> 
> 赞同：1
> 
> 时间：2012-10-11T11:30:08.747
> 
> 标签：python-2.7

列表理解不应该限制变量范围。

```
user = <user1>
project.users = [<user1>, <user2>, <user3>, <user4>]
project_usernames  = [user.username for user in project.users] 
```

我正在使用 project.users 上的列表理解生成列表 project_usernames。但它正在修改`<user4>`之前的用户`<user1>`。

我在我的一个项目中使用了上述流程，但由于这个错误，它无法正常工作。

后来当我在列表理解中更改变量“用户”时，它工作正常。

内的实体`<>`是指`<object>`

我知道解释器逐行工作，但是列表理解中使用的变量范围不应该在迭代结束后消失吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T01:01:49.933

这是 Python 2.x 的“功能”，您在列表推导中使用的变量（在您的情况下为`user`）成为周围范围的一部分（在 Python 3 中，它被视为生成器 - 请参阅[此处](http://python-history.blogspot.com/2010/06/from-list-comprehensions-to-generator.html)了解详细信息来自圭多本人）。假设您正在遍历您的列表（而不是需要将所有内容都放在内存中），您可以通过将括号更改为圆括号来像生成器一样设置它：

```
>>> user = 'test'
>>> l = ['user1', 'user2', 'user3']
>>> users = (user[4] for user in l)
>>> users
<generator object <genexpr> at 0x7f6a89507140>
>>> user
'test'
>>> for num in users:
...   print num
...
1
2
3 
```

# sql - 递归查询以获取行的所有后代

> ID：12838500
> 
> 赞同：1
> 
> 时间：2012-10-11T11:30:40.323
> 
> 标签：sql, recursion

我有一个菜单系统，其中每个项目都可以有一个父项。所以结构是这样的

![在此处输入图像描述](../Images/6d5b98179befba44ddd41d0f6528b78d.png)

我想要做的是显示当前页面的链接的“面包屑”样式列表。因此，如果用户在 ~/CVR.aspx 上，我希望显示以下内容：

CVR 控制 - CVR

所以我需要一个 SQL 查询，它会递归地获取所有父菜单项的列表，直到一行上的父项为空）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T11:37:32.527

对于 SQL-Server，您可以使用简单的 CTE 执行此操作：

```
WITH MenuCTE AS
(
  SELECT Id, parent, Text, Url
  FROM menu
  WHERE Id = 8
  UNION ALL
  SELECT p.Id, p.parent, p.Text, p.Url
  FROM MenuCTE c
  INNER JOIN menu p ON c.parent = p.id
)
SELECT *
FROM MenuCTE ; 
```

## [现场演示](https://data.stackexchange.com/stackoverflow/query/82265/recursive-query-to-get-all-descendants-of-row)

例如对于 id = 8 这应该给你：

```
Id  parent     Text             Url
8     6        CVR           ~/cvr.aspx
6    NULL   CVR Control   ~/CVRDashboard.aspx 
```

# java - Java 线程.sleep

> ID：12838502
> 
> 赞同：0
> 
> 时间：2012-10-11T11:30:49.897
> 
> 标签：java, multithreading

当我们在代码中尝试 Threads.sleep 时，我们必须捕获一个 InterruptedException。这意味着线程无法在我们指定的时间内休眠，对吧？那么我们让休眠的线程如何被中断呢？谁能解释这个概念？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T11:31:51.993

如何中断线程？我可以调用[Thread.interrupt()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.html#interrupt%28%29)。

从[这里](http://docs.oracle.com/javase/tutorial/essential/concurrency/interrupt.html)：

> 中断是对线程的指示，它应该停止正在做的事情并做其他事情。由程序员决定线程如何响应中断，但线程终止是很常见的。这是本课强调的用法。

值得阅读[JavaSpecialists 的这篇文章，](http://www.javaspecialists.eu/archive/Issue056.html)以了解如何干净地处理中断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T12:08:14.433

正如 Brian Agnew 所说，例外`sleep()`是对`interrupt()`. 这里的概念是线程应该提供停止自身的方法；如果它没有处于睡眠状态，它应该不时通过`interrupted()`或检查中断状态`isInterrupted()`并做出相应的反应。但是如果线程正在休眠并且我们想取消它的执行，我们将注定：线程只是在休眠，它不会关心寻找`interrupted`标志。但这就是它的内置行为`sleep()`：如果线程在睡眠结束之前被中断，我们会得到一个 InterruptedException。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T11:33:18.757

它可能会被警报或其他外部事件中断。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T11:49:20.947

如果线程早于给定时间唤醒，则会发生 InterruptionException。

抛出 Execption 只是为了给你（线程）一个处理特殊情况的选项。

在最常见的情况下，您不需要捕获此异常。我更喜欢一个小帮手：

```
public class Sleeper {

    private static final Logger log = Logger.getLogger(Sleeper.class);

    /**
     * @param time
     * @param units
     * @return milliseconds 
     */
    public static long sleepUnsafe(final long time, final TimeUnit units) {
        final long start = System.currentTimeMillis();
        final long millis = TimeUnit.MILLISECONDS.convert(time, units);
        try {
            Thread.sleep(millis);
        } catch (final InterruptedException e) {
            final long end = System.currentTimeMillis();
            final long timeSlept = end - start;
            final long difference = millis - timeSlept;
            if (difference > 0) {
                Sleeper.log.warn("should sleep for " + time + " " + units + ". But was awaked after " + (end - start) + " ms. Diffence is " + difference
                        + "ms.");
                return difference;
            }
        }
        return 0;
    }

    /**
     * 
     * @param millis
     * @return
     */
    public static long sleepUnsafe(final long millis) {
        return Sleeper.sleepUnsafe(millis, TimeUnit.MILLISECONDS);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-11T11:32:03.797

[Java 并发实践（Peierls、Bloch、Bowbeer、Holmes、Lea）](http://www.javaconcurrencyinpractice.com/)

例如，如果应用程序在此线程处于休眠状态时被关闭。

# c# - 使用 Linq 如何添加列表项

> ID：12838506
> 
> 赞同：0
> 
> 时间：2012-10-11T11:30:54.743
> 
> 标签：c#, linq, c#-4.0

```
IEnumerable<ReportFavorite> list = reportService.GetReportFavorites(userId);
ddlReportFavorite.Items.Add() 
```

我不知道如何使用 Linq 将列表添加到下拉列表中。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T11:34:53.860

你一个使用`AddRange`方法：

```
 var list = reportService.GetReportFavorites(userId);
 ddlReportFavorite.Items.AddRange(list.ToArray()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T11:35:22.003

根据您使用的下拉控件，其中任何一个都可以工作：

如果它允许将其 Items 设置为`IEnumerabe<ReportFavourite>`：

```
ddlReportFavorite.Items = reportService.GetReportFavorites(userId); 
```

如果 Items 实现了 AddRange 方法：

```
ddlReportFavorite.Items.AddRange(reportService.GetReportFavorites(userId)); 
```

或者，如果这些失败

```
foreach(var reportFavourite in reportService.GetReportFavorites(userId))
    ddlReportFavorite.Items.Add(reportFavourite); 
```

这两种方法都不是真正“使用 LINQ”，因为 LINQ 不是执行此操作的好工具。LINQ 意味着没有副作用。

**编辑：** 您的评论表明您正在使用`System.Web.UI.WebControls.DropDownList`. 在这种情况下，Items 集合只接受实例`ListItem`，因此您需要从 ReportFavourites 中创建这些实例。尝试

```
foreach(var listItem in reportService.GetReportFavorites(userId)
                                     .Select(r => new ListItem(r.Id, r.Name))
    ddlReportFavorite.Items.Add(listItem); 
```

在这里，我假设组合框应该显示 ReportFavourite.Name 并且具有 ReportFavourite.Id 的值。使用你自己的属性，当然

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T11:44:40.707

或者，如果您已经在方法中检查了数据的完整性，您可以简单地说：

```
ddlReportFavorite.Items.AddRange(reportService.GetReportFavorites(userId)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-11T12:54:46.547

以前我把它设置为 IEnumerable。现在我改为 IList。现在工作正常。谢谢大家。

```
 int userId = workContext.CurrentUser.UserID;
    var reportFavoriteList = reportService.GetReportFavorites(userId);
    int count = reportFavoriteList.Count;

    for (int i = 0; i < count; i++)
    {
        ddlReportFavorite.Items.Add(reportFavoriteList[i].FavoriteName);
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-11T12:49:23.610

由于`ddlReprotFavorite is an UI control and its`Items `property represent a set of controls as well you ca`n 不会直接添加您的业务实体，而不是使用 DataSource 属性，该属性会自动从底层业务实体创建 Items 集合。

```
IEnumerable<ReportFavorite> list = reportService.GetReportFavorites(userId);      
ddlReportFavorite.DataSource = list; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-11T13:03:56.840

由合并两个的`IEnumerable<T>`方法扩展。这是更漂亮的方式，无需强制转换。`Union<T>``IEnumerable<T>``ToList()`

```
var reportFavoriteList = reportService.GetReportFavorites(userId);
ddlReportFavorite.Items = ddlReportFavorite.Items.Union(reportFavoriteList); 
```

# c# - 组合框未在 wpf datafrid 中呈现

> ID：12838507
> 
> 赞同：0
> 
> 时间：2012-10-11T11:30:56.187
> 
> 标签：c#, wpf, datagrid, combobox

我的数据网格“dgSubsytem”列定义如下

```
 <my:DataGridComboBoxColumn x:Name="cmbSubSysSupplier_SRV" Header="Supplier"  Width="160"                                            
                                         ItemsSource="{Binding RelativeSource}" SelectedValueBinding="{Binding SupplierId}"   /> 
```

正如您从代码中看到的，我在网格中有一个组合框。

这个组合框的项目源是一个数据表，它在后面的代码中绑定到它。

网格的项目源也是绑定在代码后面的另一个数据表。

后面代码中combobox的绑定项源代码如下

```
cmbSubSysSupplier_SRV.ItemsSource = dsComboBox.Tables[3].DefaultView;
cmbSubSysSupplier_SRV.DisplayMemberPath="FullName" ;
cmbSubSysSupplier_SRV.SelectedValuePath = "SupplierId"; 
```

问题是组合框本身不呈现。但我可以看到 Supplier 的值呈现为 text 。问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T14:02:04.707

你的代码隐藏在什么时候运行？

您`ItemsSource`在两个地方设置 - 在 XAML 和代码隐藏中。无论哪个第二个运行都会覆盖第一个的值，因此只会使用最后一个值集。

我怀疑你的 XAML 是最后运行的，并且`RelativeSource`可能不是你的属性`DataContext`，所以你`ComboBox`最终什么都没有。

要修复它，只需删除您`ItemsSource`在 XAML 中的绑定`DataGridComboBoxColumn`

```
<my:DataGridComboBoxColumn x:Name="cmbSubSysSupplier_SRV" 
                           Header="Supplier" Width="160"
                           SelectedValueBinding="{Binding SupplierId}"  /> 
```

此外，`DefaultView`a`DataTable`将返回一个 type 的对象`DataView`，并且`DataView`没有称为`FullName`or的属性`SupplierId`，因此您的`SelectedValuePath`and`DisplayMemberPath`属性将不起作用。

我建议`KeyValuePair<int,string>`从您的数据项中构建一个列表，并将您绑定`ComboBoxColumn.ItemsSource`到该列表，然后切换`SelectedValuePath`to`"Key"`和`DisplayMemberPath`to`"Value"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T11:43:29.350

这里有2个部分：

要在 ComboBox 中填充的值列表：ItemsSource，应使用 StaticResource 绑定，并具有`List<X>`从您的 ViewModel 公开的字段。

实际值（此处为 X）应使用绑定到数据项来绑定到 SelectedItemBinding。

不需要在代码中绑定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T15:09:28.500

我个人与 DataGridComboBoxColumn 斗争了很长时间，我认为方法是使用`DataGridTemplateColumn`.
这是一个例子：

看起来很多代码，但很有效。将集合作为资源：

```
<Grid.Resources>
    <CollectionViewSource x:Key="StructuresCollection" Source="{Binding StructuresList, Mode=OneTime}"/>
</Grid.Resources>

 <DataGridTemplateColumn Header="Structure" >
    <DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding Structures.Name}" />
        </DataTemplate>
    </DataGridTemplateColumn.CellTemplate>
    <DataGridTemplateColumn.CellEditingTemplate >
        <DataTemplate>
            <ComboBox x:Name="CStructures" SelectedItem="{Binding Structures}"  DisplayMemberPath="Name" SelectedValue="{Binding IDStructure, UpdateSourceTrigger=PropertyChanged}" SelectedValuePath="{Binding IDStructure}" ItemsSource="{Binding Source={StaticResource StructuresCollection}}" />
        </DataTemplate>
    </DataGridTemplateColumn.CellEditingTemplate>
</DataGridTemplateColumn> 
```

# java - 模拟器不显示任何图片。SurfaceView 安卓

> ID：12838514
> 
> 赞同：2
> 
> 时间：2012-10-11T11:31:12.960
> 
> 标签：java, android, surfaceview

我从这里看到了这个。我只是想试试它是否有效。链接：[http ://www.javacodegeeks.com/2011/03/android-http-camera-live-preview.html](http://www.javacodegeeks.com/2011/03/android-http-camera-live-preview.html)

这是第一个名为 MyCamAppActivity.java 的类

```
 package com.javacodegeeks.android.camera;
import android.app.Activity;
import android.os.Bundle;
import android.view.SurfaceView;    
    import android.view.Window;  
public class MyCamAppActivity extends Activity {         
    private SurfaceView cameraPreview;

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);

        cameraPreview = new CameraPreview(this);

        setContentView(cameraPreview);
    }           
     } 
```

这是第二类，称为 CameraPreview

```
 package com.javacodegeeks.android.camera;

import android.content.Context;
import android.hardware.Camera;
import android.util.Log;
import android.view.SurfaceHolder;
import android.view.SurfaceView;

public class CameraPreview extends SurfaceView implements SurfaceHolder.Callback {

    private SurfaceHolder holder;
    private Camera camera;

    public CameraPreview(Context context) {
        super(context);
        holder = getHolder();
        holder.addCallback(this);
        holder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
    }

    @Override
    public void surfaceChanged(SurfaceHolder holder2, int format, int w, int h) {
        Camera.Parameters parameters = camera.getParameters();
        parameters.setPreviewSize(w, h);
        camera.setParameters(parameters);
        camera.startPreview();
    }

    @Override
    public void surfaceCreated(SurfaceHolder holder1) {
        try {
            camera = Camera.open();
            camera.setPreviewDisplay(holder1);
        }
        catch (Exception e) {
            Log.i("Exception surfaceCreated()", "e=" + e);
            camera.release();
            camera = null;
          }

    }

    @Override
    public void surfaceDestroyed(SurfaceHolder arg0) {
        camera.stopPreview();
        camera.release();
        camera = null;
    }

} 
```

据我所知，当您在 android 编程中使用 surfaceview 时，它会自动在您的屏幕上生成图片。但就我而言，它只是纯黑色图片。顺便说一句，站点中的完整包中没有任何 .xml 内容。所以，我不知道我是否还需要修复 xml 中的某些内容。希望有人或你们中的任何人能尽快帮助我。

# java - 如何在Android中解析复杂的json响应

> ID：12838515
> 
> 赞同：0
> 
> 时间：2012-10-11T11:31:12.340
> 
> 标签：java, android, json

我正在尝试解析 JSON 响应。我收到如下 JSON 响应：

```
"libraryLastModified" : "2012-10-10 03:57:26",
"playlists" : { "10063" : { "id" : "10063",
       "name" : "Favorites",
       "songs" : [ "10006134",
           "10006053",
           "10006274",
           "10006167",
        ]
    },
    "10157" : { "id" : "10157",
        "name" : "80s",
        "songs" : [ "10006694",
            "10006695",
            "10006697",
            "10006699",
            "10006698",
        ]
    } 
```

如何访问 id 和 name 值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T11:38:34.037

我*爱* [GSON](http://code.google.com/p/google-gson/)。在这种情况下，您将创建两个类。

```
public class PLayList {
 private int id;
 private String name;
 private List<Integer> songs;
 //getters and setters
}

public class Library {
 private Date libraryLastModified;
 private List<Playlist> playlists;
 //getters and setters
} 
```

然后你可以写

```
 Gson gson = new Gson();
 Library result = gson.fromJson(theInput, Library.class); 
```

由于播放列表作为 key:value 提供给您，因此您需要为它们编写自定义反序列化程序。Taje看看[GSON 将键值反序列化为自定义对象](https://stackoverflow.com/questions/5845822/gson-deserializing-key-value-to-custom-object)，了解如何做到这一点

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T11:39:52.703

在伪代码中。我不记得确切的 JSON 方法

```
JSONObject mainObj = parseJson
JSONObject playLists = mainObj.getJSONObject("playlists")
JSONObject myList = playList.getJSONObject("10063")

id = myList.getString("id") 
```

要遍历多个列表，您最好将播放列表转换为 JSONArray，然后您可以遍历它。如果您不能这样做，请检查 Android JSON API 并检查如何获取 JSONObject 的所有密钥，然后遍历这些密钥

```
for(int i=0;i<playlistKeys.length;i++){
  playlistObj = playLists.getJSONObject(playlistsKey[i])
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T11:44:05.367

使用谷歌 Gson。 [http://code.google.com/p/google-gson/](http://code.google.com/p/google-gson/)

```
class Response{
Date libraryLastModified;
Playlist []playlists;

class Playlist{
    Long id;
    String name;
    Long[] songs;
}

}
String _response=... //Your response from web
Response response = new GsonBuilder().setDateFormat("yyyy-MM-dd' 'HH:mm:ss").create().fromJson(_response, Response.class);

String songName = response.playlists[0].name; 
```

# unity3d - 玩家移动的坡度限制

> ID：12838519
> 
> 赞同：1
> 
> 时间：2012-10-11T11:31:17.203
> 
> 标签：unity3d, rigid-bodies

我使用 Unity3D，我有一个刚体的玩家。我向身体添加力量来移动玩家。我的玩家走过地形，但能够爬上陡峭的山峰。我想限制玩家，使其无法走上陡峭的斜坡。

我知道有一个 CharacterController 组件具有此功能，但我必须使用刚体，所以我想要相同的，但在我的刚体上。

我可以得到我站立的三角形的法线，并计算它的角度，但我似乎无法让玩家停止向上斜坡移动。只让玩家停止移动（这使得玩家一旦碰到倾斜的斜坡就无法移动）

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T11:32:21.773

如果没有更多关于如何使用物理引擎的详细信息，很难回答。你如何/正在使用摩擦力？你用什么角度施力？它总是水平的还是与地板成角度的？玩家有质量吗？

无论如何，我可以想出一些方法来解决这个问题

1.  走纯物理路线。使用玩家质量、摩擦力、力角、重力等。让物理为您处理这些情况。这可能需要相当多的时间和编程。

2.  保持刚体但假力。使用玩家所在的三角形的角度来缩放施加到玩家身体上的力。您可以使用三角函数来计算您应该应用的内容，也可以使用您自己的映射。通过您自己的映射，我的意思是设置一个施加 0 力的角度（例如 45 度），并对施加的力进行线性（或非线性）比例尺，因此平坦地面力为 1，45 度力为 0。

3.  不要使用刚体。大多数游戏不使用刚体来控制角色是有原因的。这既困难又复杂，而且大多数时候不值得花时间。当然，我不知道您项目的详细信息，所以如果这不是一个选项，那很好。

希望这能让你思考一些事情。

# ruby - Ruby Hash.new 怪异

> ID：12838520
> 
> 赞同：2
> 
> 时间：2012-10-11T11:31:18.357
> 
> 标签：ruby, hashmap

> **可能重复：**
> [使用 Hash.new([]) 时出现奇怪的 ruby​​ 行为](https://stackoverflow.com/questions/2698460/strange-ruby-behavior-when-using-hash-new)

这是一个简单的，因为我失去了言语。

为什么会这样：

```
1.9.3-p194 :001 > h = Hash.new([])
 => {} 
1.9.3-p194 :002 > h[:key1] << "Ruby"
 => ["Ruby"] 
1.9.3-p194 :003 > h
 => {} 
1.9.3-p194 :004 > h.keys
 => [] 
1.9.3-p194 :005 > h[:key1]
 => ["Ruby"] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-11T11:48:14.310

当您创建这样的哈希时：

```
h = Hash.new([]) 
```

这意味着，每当使用尚未定义的键访问哈希时，它都会返回：

```
[] 
```

现在当你这样做时：

```
h[:key1] << "Ruby" 
```

`h[:key1]`已返回`[]`，`"Ruby"`被推送到其中，导致`["Ruby"]`, 作为输出，因为这是返回的最后一个对象。这也被设置为使用未定义键访问“h”时返回的默认值。因此，当您这样做时：

```
h[:key1] or h[:key2] or h[:whatever] 
```

你会得到

```
"Ruby" 
```

作为输出。希望这可以帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-11T11:39:11.167

查看 Hash.new 的文档

```
new → new_hash
new(obj) → new_hash
new {|hash, key| block } → new_hash 
```

如果此哈希随后被不对应于哈希条目的键访问，则返回的值取决于用于创建哈希的 new 的样式。

1.  在第一种形式中，访问返回 nil。
2.  **如果指定了 obj，则此单个对象将用于所有默认值。**
3.  如果指定了一个块，它将使用哈希对象和键调用，并且应该返回默认值。如果需要，将值存储在散列中是块的责任。

* * *

```
irb(main):015:0> h[:abc] # ["Ruby"] 
```

`["Ruby"]`如果未找到键，则返回默认值而不是 nil 。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-11T11:37:03.127

此构造`Hash.new([])`返回默认值，但该值不是哈希的初始化值。您正在尝试使用哈希，假设默认值是哈希的一部分。

您需要的是在某个键处初始化散列的构造：

```
hash = Hash.new { |h,k| h[k] = [] } 

hash[:key1] << "Ruby"

hash #=> {:key1=>["Ruby"]} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-11T11:40:08.347

您实际上没有使用 设置值`h[:keys] << "Ruby"`。您只需为返回的未找到键的默认数组添加一个值。所以没有创建密钥。

如果你写这个，那就没问题了：

```
h = Hash.new([])
h[:keys1] = []
h[:keys1] << "Ruby" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-11T11:43:47.710

我不得不承认，当我阅读您的问题时，这也让我感到困惑。我看了一下[文档](http://www.ruby-doc.org/core-1.9.3/Hash.html#method-c-new)，但它变得很清楚。

> 如果指定了*obj*，则此单个对象将用于所有*默认值*。

因此，您实际上所做的是修改这个用于默认值的单个数组对象，而无需分配给键！

看看这个：

```
h = Hash.new([])

h[:x] << 'x'
# => ['x']

h
# => {}

h[:y]
# => ['x']  # CRAZY TIMES 
```

因此，您需要以某种方式进行分配-`h[:x] += ['x']`可能是要走的路。

# java - struts 2中的单元测试：无法继承受保护的变量

> ID：12838521
> 
> 赞同：0
> 
> 时间：2012-10-11T11:31:18.743
> 
> 标签：java, unit-testing, struts2

我有一个奇怪的问题。我通过扩展创建了一个测试类`StrutsTestCase`。

```
 public class MyActionTest extends StrutsTestCase{

      public void helloTest()
      {

      }
  } 
```

struts 文档所说`request`的`MockHttpServletRequest`将通过扩展`StrutsTestCase`. 很公平，它是一个受保护的变量，`StrutsTestCase`所以一旦我们扩展类，我们应该可以访问它。

但由于某种原因，`StrutsTestCase`在我的`MyActionTest`.

我不知道我是否遗漏了什么，但一切似乎都是直截了当的，但还是行不通。

关于为什么超类的受保护方法在子类中不可访问的任何想法？我应该使用一些特定的包还是什么？

我用于此任务的罐子列表：

1.  spring-2.5.3.jar
2.  spring-mock-1.2.6.jar
3.  struts2-core-2.0.11.jar
4.  xwork-core-2.3.1.jar

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T18:19:58.850

StrutsTestCase 是struts2-junit-plugin 的一部分。请参阅[http://struts.apache.org/2.2.3/struts2-plugins/struts2-junit-plugin/apidocs/org/apache/struts2/StrutsTestCase.html](http://struts.apache.org/2.2.3/struts2-plugins/struts2-junit-plugin/apidocs/org/apache/struts2/StrutsTestCase.html) - 你会在那里找到受保护的请求变量。

只需将该插件添加到您的类路径中，您就可以使用它了。另外，不要忘记为您的 struts-core 和插件使用相同的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T11:52:52.993

也许 struts2-junit-plugin [http://struts.apache.org/2.x/docs/junit-plugin.html](http://struts.apache.org/2.x/docs/junit-plugin.html)或 struts2-testng-plugin [http://struts.apache.org/2.x/docs/testng -plugin.html](http://struts.apache.org/2.x/docs/testng-plugin.html)

# php - 从对象传递变量数组

> ID：12838523
> 
> 赞同：0
> 
> 时间：2012-10-11T11:31:21.150
> 
> 标签：php, forms, class

所以这就是我想要做的，我有一个类，在里面`SomeClass`，有一个由 2 个变量组成的函数，每个变量都有一个数值。我想返回一个包含两个变量的数组，这些变量在发布`SomeClass`到自身的表单之外的发布数据中具有依赖关系。

```
<?php 
class SomeClass{

    private $someVar1;
    private $someVar2;

    public function setVars($var1,$var2) {  
       $this->someVar1 = $var1;
       $this->someVar2 = $var2;
    }

    function __construct() { 

    }

    function setFraction() {
          $sum['num'] = 140*pow($this->someVar1,0.75);
          $sum['den'] = $sum['num']/$this->someVar2;
          return $sum;
    }
}

if(isset($_POST['num'])){$num = preg_replace('/\D/', '', $_POST['num']);}
elseif(isset($_POST['den'])){$den = preg_replace('/\D/', '', $_POST['den']);}
?>

<form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post">

  Numerator:<input type="text" value="<?php if(isset($num)){echo $num;}?>" name="num" /><br />

  Denominator:<input type="text" value="<?php if(isset($den)){echo $den;}?>" name="den" /><br />

  <input type="submit" value="Go" name="Go"> 

</form>

<?php if(isset($num,$den)):
  $obj = new SomeClass();
  $obj->setVars($num,$den);
  $sum=$obj->setFraction();?>

  <pre>
    <?php print_r($obj->setFraction());?> 
  </pre>

  <ul>
    <?php foreach($sum as $val):?>
      <li><?php echo $val['num']?></li>
      <li><?php echo $val['den']?></li>
    <?php endforeach;?>
  </ul>

<?php endif;?> 
```

当我运行脚本时，发布数据`$num`和`$den`正在发送和返回`setFraction()`，但是当我尝试在 foreach 循环中遍历数组时，我没有得到任何返回数据。我敢肯定它很简单，我已经用 foreach 循环尝试过，但没有相同的结果，任何帮助都会非常好，谢谢。

**编辑：**

```
<?php if(isset($num,$den)):
  $obj = new SomeClass();
  $obj->setVars($num,$den);
  $array = $obj->setFraction();?>

  <ul>
    <li><?php echo $array['num']?></li>
    <li><?php echo $array['den']?></li>
  </ul>

<?php endif;?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T11:35:05.383

将返回的数据存储到某个变量中，然后进行迭代。

//

```
<?php if(isset($num,$den)):
  $obj = new SomeClass();
  $obj->setVars($num,$den);
  $array = $obj->setFraction();?>

  <ul>
    <?php foreach($array as $val):?>
      <li><?php echo $val['num']?></li>
      <li><?php echo $val['den']?></li>
    <?php endforeach;?>
  </ul>

<?php endif;?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T11:36:17.083

au您没有将返回值分配给`$obj->setFraction()`变量。你需要做：

```
$sum=$obj->setFraction(); 
```

一切都应该没问题。

仅仅因为您返回一个名为的变量`$sum`并不意味着该变量名一旦返回到脚本的主体中就会被使用。

我刚刚注意到，正如您在接受中正确陈述的那样，您不需要`foreach`阻止。只需使用`$sum['num']`和`$sum['den']`。对此感到抱歉-我应该早点注意到

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T11:38:12.357

你还没有分配`$sum=$obj->setFraction();`给 $sum

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-11T11:35:09.263

你应该使用 $obj->sum 而不是 $sum。

# c++ - CGRectMake（或其他 Make 函数）究竟做了什么？

> ID：12838528
> 
> 赞同：0
> 
> 时间：2012-10-11T11:31:38.797
> 
> 标签：c++, objective-c, c

我希望实现与 Apple 所做的类似模式`CGRectMake()`及其所有其他 `~Type~Make()`功能。CGRectMake 的代码是什么...我了解它的作用，但更具体地说，我想知道它的作用（在堆栈、堆等方面）？

仅仅是：

```
inline function CGRectMake(CGFloat x,  CGFloat y, CGFloat width, CGFloat height) {
    CGRect rect;
    rect.x = x;
    rect.y = y;
    rect.width = width;
    rect.height = height;
    return rect;
} 
```

或者还有更多内容（并且需要学习！）？

**编辑** 他们不把它变成构造函数有什么原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T11:37:34.873

如果您在 Xcode 上单击命令`CGRectMake`会显示它的实现。你几乎拥有它;-)

```
CG_INLINE CGRect
CGRectMake(CGFloat x, CGFloat y, CGFloat width, CGFloat height)
{
  CGRect rect;
  rect.origin.x = x; rect.origin.y = y;
  rect.size.width = width; rect.size.height = height;
  return rect;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T11:33:09.160

你看到的是它，因为它`struct`不是一个类，所以它真的没有更多的东西。因为它是一个`struct`它存储在堆栈中。

该`CGRectMake`函数只是 make a 的一种方便方法`CGRect`。

* * *

[另请参阅Matthias Bauch](https://stackoverflow.com/users/457406/matthias-bauch)关于`cmd`+ 鼠标单击一种方法以实现其实现的出色答案。

您可以同时`alt`+ 鼠标单击以获取方法描述。

# c# - 神秘的“对象引用未设置为对象实例”

> ID：12838529
> 
> 赞同：0
> 
> 时间：2012-10-11T11:31:42.267
> 
> 标签：c#

我理解错误的含义，但很奇怪我想不出任何原因，这是我的简化结构：

```
 public partial class mainForm : Form
{
    public mainForm()
    {
        InitializeComponent();
        IgnoreList = new SortedSet<string>();
        IgnoreListQueue IgnoreQueue = new IgnoreListQueue();
    }
    public class IgnoreListQueue
    {
        private Dictionary<string, int> myQueue;
        public void Add(string s)
        {
        }
        public IgnoreListQueue()
        {
            myQueue = new Dictionary<string, int>();
        }
        public bool contains()
        {}
        ~IgnoreListQueue()
        {
        }
    }
    public SortedSet<string> IgnoreList;
    public IgnoreListQueue IgnoreQueue;
    public int LowLevelKeyboardProc(int nCode, IntPtr wParam, IntPtr lParam)
    {
        //IgnoreList is fine here
        //IgnoreQueue is null here.
                    //Example:
                    // bool boo = IgnoreQueue.contains(some string);
    }
} 
```

在 LowLevelKeyboardProc() 函数中，IgnoreQueue 被视为 null，当 VS 调试崩溃时，它确实显示 IgnoreQueue 为空指针。
由于我的程序挂钩键盘笔划，所以我无法在 LowLevelKeyboardProc() 函数中设置断点。但是，我能够在 mainForm() 构造函数中设置断点，并显示 IgnoreQueue 确实已初始化并在该点加载了一些数据。
请问有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T11:38:22.283

这只是一个范围问题。在mainform () 构造函数中**声明**的 IgnoreQueue 在 LowLevelKeyboardProc() 方法中不可用。但是，IgnoreList 似乎在全局级别声明并在构造函数中初始化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T11:41:29.487

这一行：

```
IgnoreList = new SortedSet<string>(); 
```

初始化名为`IgnoreList`;的成员字段 但是这一行：

```
IgnoreListQueue IgnoreQueue = new IgnoreListQueue(); 
```

声明并初始化一个名为 的局部变量`IgnoreQueue`，它*与同名*的成员字段不同。成员字段仍将`null`在此之后。

由于您实际上想要初始化其他成员字段，因此您需要这样做：

```
IgnoreQueue = new IgnoreListQueue(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T11:45:40.130

问题是您实际上并未初始化 mainForm 类的成员变量“IgnoreQueue”，而是在构造函数中创建了 IgnoreListQueue 的本地实例，该实例对其他成员函数不可用。

理想情况下，您的构造函数应该是这样的

```
 public mainForm()
    {
        InitializeComponent();
        this.IgnoreList = new SortedSet<string>();
        this.IgnoreQueue = new IgnoreListQueue();
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T11:40:11.527

```
 public mainForm()
    {
        InitializeComponent();
        IgnoreList = new SortedSet<string>();
        IgnoreQueue = new IgnoreListQueue(); //no new declaration, this will set the public IgnoreListQueue you define later.
    } 
```

建议在构造函数之前声明类字段，以提高可读性。你也应该考虑制作它们`private`，你不应该将**实例**变量声明为`public`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-11T11:46:00.587

您的问题归结为变量的范围，并且与 IgnoreQueue 有关。让我们看一下代码，看看发生了什么：

```
public IgnoreListQueue IgnoreQueue;
public mainForm()  
{
    InitializeComponent();
    IgnoreList = new SortedSet<string>();
    IgnoreListQueue IgnoreQueue = new IgnoreListQueue();
} 
```

在您的构造函数中定义一个新变量 IgnoreQueue 并实例化它。尽管这与您的类上的属性具有相同的名称，但它不是同一个变量。相反，变量范围仅限于您的构造函数。这意味着当您稍后尝试使用该属性时，它为空，因此您的 NullReferenceException。

您可能还注意到，IgnoreList 没有在构造函数中重新定义，这就是为什么稍后会起作用的原因。解决此问题的最简单方法是删除构造函数中的 IgnoreListQueue 部分，使其与 IgnoreList 匹配：

```
IgnoreQueue = new IgnoreListQueue(); 
```

然而，更好的方法是使用**this**关键字，它可以帮助您立即发现问题。

```
public IgnoreListQueue IgnoreQueue;
public mainForm()  
{
    this.InitializeComponent();
    this.IgnoreList = new SortedSet<string>();
    this.IgnoreQueue = new IgnoreListQueue();
} 
```

# javascript - _以“揭示模块模式”风格编写的 JSDoc'ing Javascript 文件的最佳实践？

> ID：12838536
> 
> 赞同：10
> 
> 时间：2012-10-11T11:32:19.437
> 
> 标签：javascript, eclipse, documentation, documentation-generation, jsdoc

我的大多数 Javascript 函数都相对简单，并且需要它们的副作用：我使用 jQuery 来操作 DOM 或进行 Ajax 调用。我更喜欢以“显示模块模式”的风格编写我的函数。

我[刚刚发现](https://stackoverflow.com/questions/12600168/is-there-an-eclipse-plugin-that-creates-an-outline-view-for-the-javascript-reve/12837009#12837009)JSDoc-注释 Javascript 文件有一个好处：在[注释](http://code.google.com/p/jsdoc-toolkit/wiki/TagReference)的帮助下，Eclipse 的 JS 开发工具可以解析我的 JS 文件并[填充 Eclipse 大纲视图](http://www.kajabity.com/2012/02/how-i-introduced-jsdoc-into-a-javascript-project-and-found-my-eclipse-outline/)（否则它将是空的）。

现在我想知道注释的要点或良好做法是什么？我不习惯。

google [JS style](http://google-styleguide.googlecode.com/svn/trunk/javascriptguide.xml#Method_definitions) guide 说了一些关于 JSDoc 的内容：建议只使用可用标签的子集，以及其他建议。

现在，我想出了这个**模板**（*这段代码没有做任何有用的事情*）：

```
/**
 * @fileOverview Say something meaningful about the js file.
 * @author <a href="mailto:my@email.net">My name</a>
 * @version 1.0.1
 */

/**
 * @namespace What the namespace contains or which apps/webpages use it
 */
if (!window['my']['namespace']) {

    window['my']['namespace'] = {};    
my.namespace = (function() {
    /**
     * Documentation string...
     * @memberOf window.my.namespace
     * @private 
     */
    var clear = function(){};

    /**
     * Documentation string...
     * @memberOf window.my.namespace
     * @public 
     */
    function delete_success(data){
        var str = "# of files affected: " + data.length; 
        $('<pre id="success"/>').html(str).appendTo('#del_0b');
        $('<pre id="success"/>').html(data.result).appendTo('#del_sf');
    }
//more code

  return {
      "method1": method1,
      "delete_success" : delete_success
      };
   })();    //my.namespace
} //end if 
```

我应该在这里使用 JSDoc 标签 @function 或 @memberOf，还是两者都使用？@field 标签呢？return 子句也应该是 JSDoc'umented 吗？用哪些标签？我真的不应该使用@public 标签吗？我觉得这里很有用。

有什么建议吗？有谁知道小型项目的良好实用的 JSDoc 样式指南？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T02:05:16.933

如果您正在寻找代码示例，我发现找到它们的最佳位置是[jsdoc-users Google Group](https://groups.google.com/forum/?fromgroups#!forum/jsdoc-users)的档案。我在那里的运气比在谷歌搜索要好得多，如果你问一个问题，他们通常会很好地提供帮助。

我不能说 Eclipse 支持，但是有一个新版本的 jsdoc，[jsdoc3](https://github.com/jsdoc3/jsdoc)。[在此处](http://usejsdoc.org/)查看文档。这有点不完整，但我知道他们已经编写了更新并准备好进行审查，所以他们应该很快就会改进。

`@function`关于您关于and的具体问题`@memberof`，您可能希望使用`@function`，而不是`@memberof`简单的函数文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-29T14:18:22.397

对我来说（Eclipse 4.3 Kepler）以下工作正常：

```
my.namespace.foo.AbstractClass = {

  /** @memberOf my.namespace.foo.StaticClass  <- this statement already 
   *                   fixes the Eclipse Outline and Package Views for all other members
   */
  staticMethod1 : function() { /* ... */ },

  /** no need to add some JSDoc here for the Outline etc. */
  staticMethod2 : function() { /* ... */ }
} 
```

（对于“非抽象”类，讲*Java*，应该是类似的）

这很好，因为：

*   不重复命名空间或 JSDoc 标记几乎是最低要求
*   我不必摆弄`prototype`或`this`
*   立即创建“抽象类” ¹

*^(1：)我知道 - 一切都是对象 - 但我感觉更强大的类型和命名空间环境/更清晰/更定义的概念，如 Java。整个 JavaScript 的东西刚刚成长，（恕我直言）在具有多个程序员和可靠的重构支持、良好的可维护性、可测试性、模块化、依赖管理、自我文档等的更大环境中非常糟糕和难以使用。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-10T08:21:44.043

在 Eclipse （大写 O）中，大纲（ +快捷方式）`@memberOf`的诀窍。我主要将 JSDoc 用于 Eclipse 大纲，但我也 用于人类 :)`Ctrl``O``@author`

我也用于`@private`私人功能。

恕我直言， [JSDT](http://www.eclipse.org/webtools/jsdt/)还可以，但不是很有帮助，它最近没有太多发展。您应该使用 Eclipse JSHint 插件或将 TypeScript 与 Eclipse 插件一起使用（您可以进行重构，但会增加一些复杂性）。

# c# - 字符串中的递增字符

> ID：12838538
> 
> 赞同：5
> 
> 时间：2012-10-11T11:32:31.460
> 
> 标签：c#

我有以下代码：

```
string str="A"; 
```

我想以编程方式获取下一个字母字符（如 B、C、D、E 等）

任何人都可以建议这样做的方法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-11T11:34:59.883

而不是整个字符串，使用[`Char`](http://msdn.microsoft.com/en-us/library/system.char.aspx).

```
char aChar = 'A';

aChar++; // After this line executes, `aChar` is `B` 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-05-17T17:16:53.380

如果您正在寻找类似 "A".. "Z"..."AA", "AB"..."ZZ"..."AAA"... 的东西，这里是代码，

```
 public static string IncrementString(this string input)
    {
        string rtn = "A";
        if (!string.IsNullOrWhiteSpace(input))
        {
            bool prependNew = false;
            var sb = new StringBuilder(input.ToUpper());
            for (int i = (sb.Length - 1); i >= 0; i--)
            {
                if (i == sb.Length - 1)
                {
                    var nextChar = Convert.ToUInt16(sb[i]) + 1;
                    if (nextChar > 90)
                    {
                        sb[i] = 'A';
                        if ((i - 1) >= 0)
                        {
                            sb[i - 1] = (char)(Convert.ToUInt16(sb[i - 1]) + 1);
                        }
                        else
                        {
                            prependNew = true;
                        }
                    }
                    else
                    {
                        sb[i] = (char)(nextChar);
                        break;
                    }
                }
                else
                {
                    if (Convert.ToUInt16(sb[i]) > 90)
                    {
                        sb[i] = 'A';
                        if ((i - 1) >= 0)
                        {
                            sb[i - 1] = (char)(Convert.ToUInt16(sb[i - 1]) + 1);
                        }
                        else
                        {
                            prependNew = true;
                        }
                    }
                    else
                    {
                        break;
                    }

                }
            }
            rtn = sb.ToString();
            if (prependNew)
            {
                rtn = "A" + rtn;
            }
        }

        return rtn.ToUpper();
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-11T11:36:01.753

```
var str = "A";
char firstChar = str[0];
char nextChar = (char)((int)firstChar + 1);
var newStr = nextChar.ToString(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-05T03:43:55.557

我正在寻找同样的东西，我正在使用字符串，所以我需要转换它。

如果你的变量是字符串，你可以这样做：

```
string foo = "b";
char result = Convert.ToChar(foo[0] + 1); //Will result to 'c' 
```

# c++ - 宏名称扩展为字符串 c/C++

> ID：12838544
> 
> 赞同：3
> 
> 时间：2012-10-11T11:32:41.090
> 
> 标签：c++, c

我想在宏扩展中使用宏的名称作为字符串。

例子：

```
#define DEBUG_TEST(a, ...) printf("DEBUG_TEST::%s (%d) : " a, __FUNCTION__, __LINE__, ##__VA_ARGS__) 
```

想要在扩展中更改为不再需要“DEBUG_TEST”的东西，但类似于：

```
#define DEBUG_TEST(a, ...) printf(__MACRO__ "::%s (%d) : " a, __FUNCTION__, __LINE__, ##__VA_ARGS__) 
```

当然在我的例子中**__ *MACRO* __**不存在......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T11:38:57.353

我相信这是不可能的。我的建议是创建另一个以宏名称作为参数的宏。然后在你的其他宏中使用这个宏。

# iphone - 如何创建具有多个项目的工作区以在 iPhone 中连接？

> ID：12838545
> 
> 赞同：0
> 
> 时间：2012-10-11T11:32:43.343
> 
> 标签：iphone, ios6, workspace, xcode4.5

我想连接两个项目。我不知道在 xcode 中创建工作区和连接多个项目。怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T11:35:30.077

检查以下链接，希望您得到解决方案:)

[我应该如何管理 Xcode 工作区中项目之间的依赖关系？](https://stackoverflow.com/questions/5483909/how-should-i-manage-dependencies-across-projects-in-an-xcode-workspace)

[在 Xcode 4 中，你如何获得隐式依赖来处理工作区？](https://stackoverflow.com/questions/5534235/how-do-you-get-implicit-dependencies-to-work-with-workspaces-in-xcode-4?lq=1)

[在需要时配置 XCode 4 工作区以构建依赖项的正确方法是什么？](https://stackoverflow.com/questions/5427396/whats-the-correct-way-to-configure-xcode-4-workspaces-to-build-dependencies-whe?lq=1)

# python - 如何在 Python 中连接两个整数？

> ID：12838549
> 
> 赞同：40
> 
> 时间：2012-10-11T11:32:52.887
> 
> 标签：python, concatenation

如何在 Python 中连接两个整数？例如，给定`10`and `20`，我想要一个返回值`"1020"`。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-10-11T11:33:56.417

将两者都转换为字符串，连接字符串，然后将结果转换回整数：

```
z = int(str(x) + str(y)) 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-11T11:40:37.017

使用数学可能比转换为 str 和返回的解决方案更快：

如果你可以假设一个两位数的秒数：

```
def f(x, y):
    return x*100+y 
```

用法：

```
>>> f(1,2)
102
>>> f(10,20)
1020 
```

虽然，您可能希望包含一些检查以验证第二个数字不超过两位数。或者，如果您的第二个数字可以是任意位数，您可以执行以下操作：

```
import math
def f(x, y):
    if y != 0:
        a = math.floor(math.log10(y))
    else:
        a = -1

    return int(x*10**(1+a)+y) 
```

用法：

```
>>> f(10,20)
1020
>>> f(99,193)
99193 
```

但是，此版本不允许您合并 03 和 02 之类的数字以获得 0302。为此，您需要添加参数以指定每个整数中的位数，或使用字符串。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2018-06-05T12:27:24.837

**例1：（*例2快多了，别说我没警告你！*）**

```
a = 9
b = 8
def concat(a, b):
    return eval(f"{a}{b}") 
```

例子：

```
>>> concat(a, b)
98 
```

**示例 2：**

对于那些认为`eval`是“邪恶”的人，这里有另一种方法：

```
a = 6
b = 7
def concat(a, b):
    return int(f"{a}{b}") 
```

例子：

```
>>> concat(a, b)
67 
```

**编辑：**

我认为对这些代码进行计时会很方便，请看下面：

```
>>> min(timeit.repeat("for x in range(100): int(str(a) + str(b))", "",
          number=100000, globals = {'a': 10, 'b': 20}))
9.107237317533617
>>> min(timeit.repeat("for x in range(100): int(f'{a}{b}')", "",
          number=100000, globals = {'a': 10, 'b': 20}))
6.4986298607643675
>>> min(timeit.repeat("for x in range(5): eval(f'{a}{b}')", "", #notice the range(5) instead of the range(100)
          number=100000, globals = {'a': 10, 'b': 20}))
4.089137231865948 #x20 
```

时代：

```
eval: about 1 minute and 21 seconds.

original answer: about 9 seconds.

my answer: about 6 and a half seconds. 
```

**结论：**

> **原始*答案*看起来确实更具*可读性*，但如果您需要*良好的速度*，请选择*int(f'{vara}{varb}')***

**PS：我的 int(f'{a}{b}) 语法*仅适用于 python 3.6+，因为 f'' 语法在 python 3.6-版本中未定义-***

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-10-11T11:38:33.647

使用旧式字符串格式：

```
>>> x = 10
>>> y = 20
>>> z = int('%d%d' % (x, y))
>>> print z
1020 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-10-11T11:43:32.820

当然，“正确”的答案将是康斯坦丁的答案。但是，如果您仍然想知道如何在不使用字符串强制转换的情况下做到这一点，只需使用数学：

```
import math

def numcat(a,b):
    return int(math.pow(10,(int(math.log(b,10)) + 1)) * a + b)

>> numcat(10, 20)
>> 1020 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-10-11T11:37:38.830

一个粗略但有效的实现：

```
i1,i2 = 10,20
num = int('%i%i' % (i1,i2)) 
```

基本上，您只需将两个数字合并为一个字符串，然后将其转换回 int。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-12-23T00:03:07.887

在接受的答案中给出了在 python 中执行此操作的最佳方法-但如果您想在 jinja2 模板中执行此操作-连接运算符`~`为您提供了一种简洁的方法，因为它查找所有对象的 unicode 表示，因此，您也可以“连接整数”。

那就是你可以这样做（给定`a=10`和`b=20`）：

```
{{ a ~ b }} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-10-11T11:41:11.603

只是给出另一个解决方案：

```
def concat_ints(a, b):
    return a*(10**len(str(b)))+b

>>> concat_ints(10, 20)
1020 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-10-11T11:50:28.320

使用此功能，您可以连接任意数量的数字

```
def concat(*args):
    string = ''
    for each in args:
        string += str(each) 
    return int(string) 
```

例如`concat(20, 10, 30)`将返回`201030`一个整数

**或者**

您可以使用单行程序

```
int(''.join(str(x) for x in (20,10,30))) 
```

这也将返回`201030`。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2020-01-10T09:54:51.600

连接整数列表

```
int(''.join(map(str, my_list))) 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2020-08-14T22:59:28.913

在我的测试中，使用数学转换器比转换为字符串并返回更快：

```
In [28]: fn = lambda x, y: x*10 + y                                                                               

In [29]: timeit fn(1,2)                                                                                            
88.4 ns ± 1.26 ns per loop (mean ± std. dev. of 7 runs, 10000000 loops each)

In [30]: timeit int(str(1) + str(2))                                                                               
427 ns ± 11.2 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each) 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-12-01T17:27:38.007

一个不错的方法是使用内置的 reduce() 函数：

```
reduce(lambda x,y:x*10+y,[10,20]) 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2018-09-19T22:54:00.060

这是另一种方法：

```
a = 10
b = 20

x = int('{}{}'.format(a, b)) 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2014-06-24T19:41:44.367

```
def concatenate_int(x, y):

  try:
     a = floor(log10(y))
  except ValueError:
     a = 0
  return int(x * 10 ** (1 + a) + y)

def concatenate(*l):
  j = 0
  for i in list(*l):
     j = concatenate_int(j, i)
  return j 
```

# asp.net - 使用 AJAX 动态添加 asp 控件

> ID：12838550
> 
> 赞同：0
> 
> 时间：2012-10-11T11:32:56.913
> 
> 标签：asp.net, ajax, asp.net-ajax

我想让**+Add 更原始的使用**LinkBut​​ton！

![在此处输入图像描述](../Images/e24c3fd358f81517b06eb9898fe91221.png)

我正在使用的桌子上有这一行：

```
 <asp:Label ID="Label43" runat="server" 
            Text="P-2.5 Original use:"></asp:Label>
    </td>
    <td class="style1">

            <div style="float:left;">
            <asp:DropDownList class="text-input" ID="DDLOriginalUse" runat="server"
                        DataSourceID="SqlDataSource5" DataTextField="DESCRIPTION" 
                        DataValueField="ID_PROGRAM_USE" OnSelectedIndexChanged="itemSelected" AutoPostBack="True" AppendDataBoundItems="true">
                        <asp:ListItem Text="-Not assigned-" Value="-1" Selected="True" />
            </asp:DropDownList>
            </div>

            <asp:UpdatePanel runat="server" style="float:left;" id="UpdatePanel2" updatemode="Conditional">
                <Triggers>
                    <asp:AsyncPostBackTrigger controlid="DDLOriginalUse" eventname="SelectedIndexChanged" />
                </Triggers>
                <ContentTemplate>
                    &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;<asp:Label ID="lblProgramType" runat="server"></asp:Label>
                </ContentTemplate>
            </asp:UpdatePanel>

        <asp:SqlDataSource ID="SqlDataSource5" runat="server" 
            ConnectionString="<%$ ConnectionStrings:MesarchConnectionString %>" 
            SelectCommand="SELECT * FROM [PROGRAM_USE]"></asp:SqlDataSource>

    </td>
</tr> 
```

我想添加与上面相同内容的新行，所以我使用 asp:PlaceHolder ：此代码继续..

```
</tr>

<asp:UpdatePanel runat="server" id="UpdatePanel1" updatemode="Conditional">
    <Triggers>
        <asp:AsyncPostBackTrigger controlid="LinkButtonAddOriginal" eventname="Click" />
    </Triggers>
    <ContentTemplate>
            <asp:PlaceHolder ID="PlaceHolderAddNewOriginalUse" runat="server"></asp:PlaceHolder>

    </ContentTemplate>
</asp:UpdatePanel>

<tr>
    <td>
        &nbsp;</td>
    <td class="style1">
        <asp:UpdatePanel runat="server" id="UpdatePanel3" updatemode="Conditional">
            <Triggers>
                <asp:AsyncPostBackTrigger controlid="LinkButtonAddOriginal" eventname="Click" />
            </Triggers>
            <ContentTemplate>
                    <b><asp:LinkButton ID="LinkButtonAddOriginal" OnClick="AddMoreOriginal" runat="server">+Add more original use</asp:LinkButton></b>
            </ContentTemplate>
        </asp:UpdatePanel>

    </td>
</tr> 
```

在我后面的代码中，我正在为点击执行此操作（我想添加最多 5 个文本框）：

```
private static int countOriginalUse = 1;

private static LiteralControl htmlPresentation = new LiteralControl();

protected void AddMoreOriginal(object sender, EventArgs e)
    {
        StringBuilder str_for_ltr = new StringBuilder();
        countOriginalUse++;
        if (countOriginalUse >= 6) { LinkButtonAddOriginal.Text = "You can not add more.";return; }

        str_for_ltr.Append("<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;P-2.5 Original use " + countOriginalUse.ToString() + ":</td>");
        str_for_ltr.Append("<td class='style1'>");

        str_for_ltr.Append("</td>");
        str_for_ltr.Append("</tr>");

        htmlPresentation.Text += str_for_ltr.ToString();

        PlaceHolderAddNewOriginalUse.Controls.Add(htmlPresentation);

        /*DropDownList ddl1 = new DropDownList();
        ddl1.ID="Dropdown1";
        ddl1.CssClass = "Mycss";
        ddl1.Items.Add("test");
        PlaceHolderAddNewOriginalUse.Controls.Add(ddl1);
        PlaceHolderAddNewOriginalUse.Controls.Add(new LiteralControl("<br/>"));*/
    } 
```

所以我在这里面临的问题是它没有添加新行，甚至文本也不是我放置我的 asp:PlaceHolder 的位置（在顶部）。

当然，当我必须添加这个 DropDownList 并为其添加一个 UpdatePanel 时，我肯定会遇到更多问题（如我的第一个代码所示）。

我这样做完全错了吗，我是否必须遵循其他方式来做到这一点？我很困惑...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T18:15:56.407

我自己找到了一种方法。

我用 DropDownLists 和他们的个人 UpdateControl 创建了一些新行，但我有他们的`style = "display:none".`

然后我有这样的链接按钮：

```
 <tr>
                <td>
                    &nbsp;</td>
                <td class="style1">
                    <b><a id="linkAddOriginal" onclick="javascript:addOriginalUse()">+Add more original use</a></b>
                </td>
            </tr> 
```

我还用一个静态变量制作了这个简单的 javascript 函数，每次都会在其中显示适当的行：

```
<script type="text/javascript">
    function addOriginalUse() {
        if (typeof addOriginalUse.counter == 'undefined') {
            // It has not... perform the initilization
            addOriginalUse.counter = 1;
        }
        addOriginalUse.counter++;
        if (addOriginalUse.counter >= 6) { document.getElementById("linkAddOriginal").innerHTML = "You can not add more original uses."; return; }

        var ddl = document.getElementById("originalUseRow" + addOriginalUse.counter);
        ddl.style.display = 'inline-block';
    }

</script> 
```

我还有一些额外的代码显示取决于 DropDownList 的 ItemSelection 的数据，如果你需要它问我！

# c# - 检测 AutoCompleteExtender 选择事件

> ID：12838552
> 
> 赞同：5
> 
> 时间：2012-10-11T11:33:01.870
> 
> 标签：c#, asp.net, autocomplete, ajaxcontroltoolkit

由于控件没有此事件，因此捕获 AutoCompleteExtender 选择事件的最佳方法是什么？

这是我正在谈论的示例。我有两个带有链接 AutoCompleteExtender 控件的 texboxes（Location1TextBox、Location2TextBox）。这部分效果很好。现在的问题是，当用户从任何 AutoCompleteExtender 进行选择时，我需要捕获此事件并尝试计算 location1 和 location2 之间的距离。结果应自动填充到 DistanceTextBox。有什么好的建议吗？我只是希望它不会以文本框的 onchange 事件告终......

```
 <asp:UpdatePanel ID="UpdatePanel2" runat="server">
        <ContentTemplate>
            <asp:Label ID="TitleLabel" runat="server" Text='<% $resources:AppResource,LocationStart %>'
                CssClass="OneColumnLabel"></asp:Label>:<br />
            <asp:TextBox ID="Location1TextBox" runat="server" CssClass="TwoColumnMiddleLongText"
                ValidationGroup="Edit" AutoPostBack="true"></asp:TextBox>*
            <asp:RequiredFieldValidator ID="TitleRequiredFieldValidator" runat="server" ControlToValidate="Location1TextBox"
                Display="None" ErrorMessage='<% $resources:AppResource,LocationRequired %>' ValidationGroup="Edit"></asp:RequiredFieldValidator>
            <ajaxToolkit:AutoCompleteExtender runat="server" ID="AutoCompleteExtender1" TargetControlID="Location1TextBox"
                ServiceMethod="GetCompletionList" ServicePath="TravelOrder.aspx" MinimumPrefixLength="1"
                CompletionInterval="300" UseContextKey="True">
            </ajaxToolkit:AutoCompleteExtender>
            <asp:Label ID="Label7" runat="server" Text='<% $resources:AppResource,LocationArrival %>'
                CssClass="OneColumnLabel"></asp:Label>:<br />
            <asp:TextBox ID="Location2TextBox" runat="server" CssClass="TwoColumnMiddleLongText"
                ValidationGroup="Edit"></asp:TextBox>*
            <asp:RequiredFieldValidator ID="RequiredFieldValidator3" runat="server" ControlToValidate="Location2TextBox"
                Display="None" ErrorMessage='<% $resources:AppResource,LocationRequired %>' ValidationGroup="Edit"></asp:RequiredFieldValidator>
            <ajaxToolkit:AutoCompleteExtender runat="server" ID="AutoCompleteExtender2" TargetControlID="Location2TextBox"
                ServiceMethod="GetCompletionList" ServicePath="TravelOrder.aspx" MinimumPrefixLength="1"
                CompletionInterval="300" UseContextKey="True">
            </ajaxToolkit:AutoCompleteExtender>
            <asp:Label ID="Label8" runat="server" Text='<% $resources:AppResource,Distance %>'
                CssClass="OneColumnLabel"></asp:Label>:<br />
            <asp:TextBox ID="DistanceTextBox" runat="server" CssClass="OneColumnText" ValidationGroup="Edit"></asp:TextBox>*
            <asp:RequiredFieldValidator ID="RequiredFieldValidator4" runat="server" ControlToValidate="DistanceTextBox"
                Display="None" ErrorMessage='<% $resources:AppResource,DistanceRequired %>' ValidationGroup="Edit"></asp:RequiredFieldValidator>
        </ContentTemplate>
    </asp:UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T08:40:29.483

您可以`AutoPostBack="true"`从目标文本框中删除，订阅 TextChanged 事件并使用下面的函数作为 itemSelected 扩展程序的客户端事件的处理程序`OnClientItemSelected="autoCompleteEx_ItemSelected"`：

```
<script type="text/javascript">
     function autoCompleteEx_ItemSelected(sender, args) {
          __doPostBack(sender.get_element().name, "");
     }
</script> 
```

# css - Desktop View / View Desktop Site 实际上是做什么的？

> ID：12838559
> 
> 赞同：5
> 
> 时间：2012-10-11T11:33:15.577
> 
> 标签：css, html, mobile, media-queries

有谁知道在移动浏览器中选择桌面视图选项会如何影响 CSS 媒体查询和 Javascript？

我正在制作一个仅供移动用户使用的网站。当我在使用股票 Android 浏览器时选择“桌面视图”时，它会破坏网站。我想有效地忽略桌面视图设置。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T14:25:50.743

我相信这个选项只会改变用户代理。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-03T10:31:06.363

普通 android 浏览器中的“桌面视图”只是更改发送到服务器的用户代理 (UA) 字符串。如果不选择该选项，典型的 UA 字符串将类似于以下内容：

> Mozilla/5.0 (Linux; U; Android *{OS Version}* ; en-gb; *{Device Model Information}* ) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30

启用“桌面视图”选项后，此更改类似于：

> Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/534.24 (KHTML, like Gecko) Chrome/11.0.696.34 Safari/534.24

如您所见，第一个示例明确包含“Mobile”一词，它还告诉我们它是一个 Android 操作系统。第二个示例通过省略“Mobile”一词来严格模仿“完整浏览器”的用户代理字符串。

更重要的是，分两部分具体回答原问题；

**此选项如何影响 CSS 媒体查询？**

它没有。CSS 媒体查询本身不受发送到服务器的 UA 字符串的影响。通常，当我们谈论媒体查询时，我们会参考设备的屏幕尺寸/分辨率/方向，所有这些都不受“桌面视图”选项的影响。只有当服务器基于提供的 UA 字符串提供不同的响应时，站点的 CSS 行为才会改变。

**此选项如何影响 javascript？**

如果您（或您使用的第三方库）使用[Navigator](https://developer.mozilla.org/en-US/docs/Web/API/Navigator)对象来修改基于浏览器版本的行为，这会影响 javascript。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T14:36:36.243

它不一定会更改用户代理，但它会为该用户的网站设置一个会话变量，因此如果他们提出请求，它将跳过用户代理检查并简单地返回桌面网站。

[示例代码](http://tuts.pinehead.tv/2011/04/08/creating-a-show-desktop-website-button-for-your-mobile-site/)：

```
<?php
//See if the browser is a mobile browser
// If it's mobile browser see if the user prefers desktop version
// IF the user does not the foward to mobile website.

$browser = $_SERVER['HTTP_USER_AGENT'];

if(preg_match('/iPhone/i',$browser)) { $iphone = "true"; }
if(preg_match('/Android/i',$browser)) { $android = "true"; }

if($iphone == true || $android == true) {

    session_start();
    if($_SESSION['version'] != "desktop") {

        header("location: http://tuts.pinehead.tv/jqmobile/mobile.php");

    }

} 
```

# php - MKDIR 和 CHMOD 工作，上传不成功

> ID：12838561
> 
> 赞同：0
> 
> 时间：2012-10-11T11:33:19.197
> 
> 标签：php, mysql, permissions, webserver

我有一个非常简单的 PHP 脚本，它根据产品 ID 创建一个目录，这些文件夹用于将产品 ID 特定的图像上传到其中。

使用 PHP 脚本创建此文件夹后，`mkdir('folder',0777)`我将使用 PHP 的图像上传到刚刚创建的文件夹。这不能正常工作：该`move_uploaded_file`函数在服务器函数中返回一个规则`safe_mode`。尽管此服务器`safe_mode`属性已关闭，但仍会给出此错误/警告。

当我检查我的 FTP 用户帐户时，我看到权限为 777 的制作目录，但上传不会成功上传到该目录...

奇怪的是，当我手动删除制作的目录并创建一个新目录（通过 FTP）时，上传工作完美！

有人对解决此问题有任何线索吗？我不是那个服务器经验丰富:) 谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T11:41:21.487

将此用于 mkdir 用户名是您在 uplod 文件夹中的文件夹名称

```
 if(!is_dir('uploads/'.$username . "/")) {
 mkdir('uploads/'.$username . "/", 0755);
 }` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T11:41:53.213

您必须考虑到，在创建目录时，创建掩码与[umask](http://php.net/manual/en/function.umask.php)相加：

```
$old = umask( 0 );
mkdir( 'folder', 0777, true );
umask( $old ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T11:41:55.370

您当前的 umask 可能会影响您目录上的模式。它将最终获得`(mkdir-mode & (~umask))`权限。

尝试：

```
$oldmask = umask(0);
mkdir('folder', 0777);
umask($oldmask); 
```

# mysql - MySQL多列主键

> ID：12838562
> 
> 赞同：8
> 
> 时间：2012-10-11T11:33:20.747
> 
> 标签：mysql

多列主键（MySQL）的最大列数是多少？它是否取决于列数据类型或引擎？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-11T12:48:26.683

是的，这取决于存储引擎。

*   [MyISAM](http://dev.mysql.com/doc/refman/5.5/en/myisam-storage-engine.html)：

    > 每个索引的最大列数为 16。最大键长度为 1000 字节。这也可以通过更改源并重新编译来更改。对于长度超过 250 字节的密钥，使用比默认值 1024 字节更大的密钥块大小。

*   [创新数据库](http://dev.mysql.com/doc/refman/5.5/en/innodb-restrictions.html)：

    > InnoDB 内部最大密钥长度为 3500 字节，但 MySQL 本身将其限制为 3072 字节。此限制适用于多列索引中组合索引键的长度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T12:36:21.753

我找到了这个：

有人试图用 2 列创建一个 PK 并收到此错误：
**“指定的密钥太长；最大密钥长度为 1024 字节”**所以看起来最大值为 1024 字节，列数无关紧要，真正重要的是var 类型和空间分配它。

我见过一些这样的例子：

```
create table OS_PROPERTYENTRY (entity_name VARCHAR(125) not null, entity_id BIGINT not null,

entity_key VARCHAR(255) not null date_val DATETIME, primary key (entity_name, entity_id, entity_key)) 
```

在哪里

125 *（3 个字节）+ 255 *（3 个字节）+ 1 *（8 个字节）= 1148 个字节。所以不可能创建一个PK。

看看这里，他们谈论它：[https ://jira.atlassian.com/browse/CONF-2783](https://jira.atlassian.com/browse/CONF-2783)

# html - 我需要浮动或对齐还是什么？

> ID：12838565
> 
> 赞同：0
> 
> 时间：2012-10-11T11:33:24.577
> 
> 标签：html, css

这可能是一个非常简单的问题。要将链接与页眉和页脚的右侧对齐，我应该使用右对齐还是浮动，还是什么？我试过“正确：0；” 但它将它一直移动到页面的右侧，而不是内部内容窗口的右侧。

这是我正在使用的代码：http: [//jsfiddle.net/HMsKa/76/](http://jsfiddle.net/HMsKa/76/)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T11:36:01.300

添加

`right:0`到`#header ul`

`text-align:right`到`#footer`

`position:relative`到`#header_content`

**演示[http://jsfiddle.net/HMsKa/86/](http://jsfiddle.net/HMsKa/86/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T11:36:16.650

这样做写这个css [**Demo**](http://jsfiddle.net/rohitazad/HMsKa/84/)

```
#header_content {
position: relative;
}
#header ul {
right: 0;
}
#footer_content {
position: relative;
}
#footer ul {
right: 0;
} 
```

[[现场演示][1]*](http://jsfiddle.net/rohitazad/HMsKa/84/)*********

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T11:35:13.293

您可以`position:relative`在父“内部内容窗口”上使用，然后`position:absolute;right:0;`在其中要绑定到该容器一侧的东西上*使用*。像这样的东西：http: [//jsfiddle.net/HMsKa/76/](http://jsfiddle.net/HMsKa/76/)

您当然可以将元素拉伸到其父元素的宽度并使用 text-align；并不总是实用的。

如果可能的话，远离轻浮的花车。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-11T11:35:58.197

最好不要将绝对定位与浮动混合，尝试添加`left: 600px;`到您的`ul`选择器中。

Float:right on the ul 如果你的整个页面都是浮动的**

# objective-c - 在 viewDidLoad 中调用 UITableView endUpdates 崩溃

> ID：12838568
> 
> 赞同：0
> 
> 时间：2012-10-11T11:33:36.887
> 
> 标签：objective-c, ios, uiviewcontroller, uitableview

我有一个 UITableView，我想在我的视图控制器的 viewDidLoad 中修改它。但是 UITableView 不会在 viewDidLoad 中查询它的数据源，所以我先调用 reloadData，然后用 beginUpdates 和 endUpdates 修改它的单元格。（就我而言，我只是删除了一些单元格）。但是当 endUpdates 被调用时，它会抛出一个异常：

> [__NSArrayM insertObject:atIndex:]：空数组的索引 1 超出范围。

这个例外是什么意思？我知道我正在向 UITableView 返回正确的数字，因为如果我在 viewDidAppear 之后调用它，它可以完美运行，它只是在 viewDidLoad 中不起作用。

**编辑 ：**

这是我的代码

```
for (int i = 0; i < [customDataSource numberOfSectionsInTableView]; i ++) {
    NSInteger n = [customDataSource tableView:self numberOfRowsInSection:section];
    NSMutableArray* array = [[NSMutableArray alloc] initWithCapacity:n];
    for (NSInteger i = 0; i < n; i++)
        [array addObject:[NSIndexPath indexPathForRow:i inSection:section]];
    [super beginUpdates];
    [super deleteRowsAtIndexPaths:array withRowAnimation:UITableViewRowAnimationNone];
    [super endUpdates];
} 
```

当我将此代码从 viewDidAppear 移动到 viewDidLoad 或 viewWillAppear 时，它会崩溃。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-12T21:09:27.433

看起来您正试图将索引 1 处的对象插入空数组。如果数组为空，则唯一可接受的插入索引是 0。检查如何计算索引值。

# android - 列表视图中的不同图标

> ID：12838575
> 
> 赞同：14
> 
> 时间：2012-10-11T11:34:04.633
> 
> 标签：android, android-layout, android-listview

我必须创建一个列表视图，每个项目在右侧都有一个单独的图标。我写了一个代码，但它不工作？我该如何进行？应用程序崩溃

代码

```
public class LoginMenu extends ListActivity
{

TextView maintext, subtext;
QuickContactBadge icon;

private static final String[] menuitems = { "Availability", "Messages",
"Greetings", "Address Book", "Calls", "Settings" };

@Override
protected void onCreate(Bundle savedInstanceState)
{
// TODO Auto-generated method stub
super.onCreate(savedInstanceState);
setContentView(R.layout.menu);
maintext = (TextView) findViewById(R.id.tvMainText);
subtext = (TextView) findViewById(R.id.tvSubText);
setListAdapter(new IconicAdapter());    
}    
class IconicAdapter extends ArrayAdapter<String>
{    
public IconicAdapter()
{
super(LoginMenu.this, R.layout.menu, R.id.tvMainText, menuitems);
// TODO Auto-generated constructor stub
}   
@Override
public View getView(int position, View convertView, ViewGroup parent)
{
// TODO Auto-generated method stub
View row = super.getView(position, convertView, parent);
icon = (QuickContactBadge) findViewById(R.id.iContactBadge);
if (menuitems[0] != null)
{
icon.setImageResource(R.drawable.menu_availability);
}
else if (menuitems[1] != null)
{
icon.setImageResource(R.drawable.menu_messages);
}    
else if (menuitems[2] != null)
{
icon.setImageResource(R.drawable.menu_greetings);
}
else if (menuitems[3] != null)
{
icon.setImageResource(R.drawable.menu_contacts);    
}
else if (menuitems[4] != null)
{
icon.setImageResource(R.drawable.menu_calls);
}
else if (menuitems[5] != null)
{
icon.setImageResource(R.drawable.menu_settings);
}
return (row);
}    
}
} 
```

IMAGE 我的 XML 文件包含一个 image 、 textview 和另一个按照下图排列的 subtext

![所需的屏幕图像](../Images/bcd44cbbcf0a85990348a95c919cb294.png)

LOGCAT

```
10-11 04:46:15.088: E/AndroidRuntime(726): FATAL EXCEPTION: main
10-11 04:46:15.088: E/AndroidRuntime(726): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.avst.callxpressmobile/com.example.avst.callxpressmobile.MenuScreen}: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list'
10-11 04:46:15.088: E/AndroidRuntime(726):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
10-11 04:46:15.088: E/AndroidRuntime(726):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
10-11 04:46:15.088: E/AndroidRuntime(726):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
10-11 04:46:15.088: E/AndroidRuntime(726):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
10-11 04:46:15.088: E/AndroidRuntime(726):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-11 04:46:15.088: E/AndroidRuntime(726):  at android.os.Looper.loop(Looper.java:137)
10-11 04:46:15.088: E/AndroidRuntime(726):  at android.app.ActivityThread.main(ActivityThread.java:4745)
10-11 04:46:15.088: E/AndroidRuntime(726):  at java.lang.reflect.Method.invokeNative(Native Method)
10-11 04:46:15.088: E/AndroidRuntime(726):  at java.lang.reflect.Method.invoke(Method.java:511)
10-11 04:46:15.088: E/AndroidRuntime(726):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
10-11 04:46:15.088: E/AndroidRuntime(726):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
10-11 04:46:15.088: E/AndroidRuntime(726):  at dalvik.system.NativeStart.main(Native Method)
10-11 04:46:15.088: E/AndroidRuntime(726): Caused by: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list'
10-11 04:46:15.088: E/AndroidRuntime(726):  at android.app.ListActivity.onContentChanged(ListActivity.java:243)
10-11 04:46:15.088: E/AndroidRuntime(726):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:259)
10-11 04:46:15.088: E/AndroidRuntime(726):  at android.app.Activity.setContentView(Activity.java:1867)
10-11 04:46:15.088: E/AndroidRuntime(726):  at com.example.avst.callxpressmobile.MenuScreen.onCreate(MenuScreen.java:22)
10-11 04:46:15.088: E/AndroidRuntime(726):  at android.app.Activity.performCreate(Activity.java:5008)
10-11 04:46:15.088: E/AndroidRuntime(726):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
10-11 04:46:15.088: E/AndroidRuntime(726):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
10-11 04:46:15.088: E/AndroidRuntime(726):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-11T11:45:47.617

您可以在此处获取简单的代码，它在列表的每一行中显示一个图像和一些文本：

[http://www.mkyong.com/android/android-listview-example/](http://www.mkyong.com/android/android-listview-example/)

![在此处输入图像描述](../Images/b565fe07ddfd1558d63c1e32eb3327c4.png)

但是如果行数很高，并且每行中的图像要从服务器获取，那么你最好使用这个：

[https://github.com/thest1/LazyList](https://github.com/thest1/LazyList)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-11T11:54:26.317

只需使用`HashMap<String,String>`包含您的行详细信息（图像，两个文本）的 A。请参阅此[链接](http://www.tutomobile.fr/personnaliser-une-listview-tutoriel-android-n%C2%B07/04/07/2010/)，这将帮助您实现您想要的。

![在此处输入图像描述](../Images/041cf27e6f228cb9a9cf39644f8d945b.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-11T11:37:46.853

根据您的要求，下面的一些链接对您使用相同的代码很有用....

[http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)

[http://wptrafficanalyzer.in/blog/listview-with-images-and-text-using-simple-adapter-in-android/](http://wptrafficanalyzer.in/blog/listview-with-images-and-text-using-simple-adapter-in-android/)

[http://android-example-code.blogspot.in/p/dynamic-custoized-list-view-in-android.html](http://android-example-code.blogspot.in/p/dynamic-custoized-list-view-in-android.html)

[http://www.softwarepassion.com/android-series-custom-listview-items-and-adapters/](http://www.softwarepassion.com/android-series-custom-listview-items-and-adapters/)

**或者**

```
 if (menuitems[0] != null) {
              if(menuitems[0].equalsIgnoreCase("Availability")
                {
                    icon.setImageResource(R.drawable.menu_availability);
                 // Set your another textview and another subtext here....
                 }
         } 
  // Set another conditions also as per above code 
```

谢谢

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-11T13:28:41.783

> 原因：java.lang.RuntimeException：您的内容必须有一个 id 属性为 'android.R.id.list' 的 ListView

您正在使用`ListActivity`并设置内容`setContentView()`。 `ListActivity`默认情况下有一个`ListView`并且不需要一个 xml 布局。但是，如果你想提供一个 xml 布局，你的布局必须有一个`ListView`id 设置为 的元素`@android:id/list`。

关于内容，您始终可以在 a 中扩展 menu.xml`Menu`并将其用作数据数组。幸运的是，每个`MenuItem`都有一个标题和图标。也`Menu`有`size()`和`getItem()`方法。

# perl - 将块传递给 Moose 方法

> ID：12838578
> 
> 赞同：5
> 
> 时间：2012-10-11T11:34:16.557
> 
> 标签：perl, moose

是否有可能将块传递给 Moose 方法？在标准 Perl 中，我可以用这样的原型定义一个函数

```
sub fn (&) {
    my $code =\&{shift @_};
    $code->();
} 
```

然后在没有显式`sub`引用的情况下将块传递给函数，即`fn { say "Hi there, world" }`.

我认为这只有在子例程是第一个参数时才有可能，并且因为这总是`$self`使用 Moose 方法，所以在那里似乎不可能，迫使我以稍微更明确的方式来做：

```
sub wrapper {
    my ($self, $code) = @_;
    $code->()
}

Wrapper->wrapper(sub { say "Hi there, world" }); 
```

现在这将是包装一些块的一种非常方便的方法，即提供一些额外的文本或有条件地执行代码或在错误处理保持不变的一些代码周围包装一个 eval（例如 eval 一些代码和日志错误，记录用户等）。 ）。

如果我没有遗漏任何东西，是否有一些半方便的解决方法或替代方法可以在没有太多线路噪音的情况下实现这样的目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T15:39:35.797

看看[`PerlX::MethodCallWithBlock`](https://metacpan.org/module/PerlX%3a%3aMethodCallWithBlock)CPAN 模块，它扭曲了 Perl 语法（通过[`Devel::Declare`](https://metacpan.org/module/Devel%3a%3aDeclare)模块），允许您在方法调用之后 放置一个*块。*

例如：

```
use 5.016;
use warnings;
use PerlX::MethodCallWithBlock;

{
    package Foo;
    use Moose;

    sub bar {
        my ($self, $code) = @_;
        $code->();
    }
}

Foo->bar { say "Hi there world" }; 
```

该模块是作为*概念证明发布的*。到目前为止，除了 YMMV 之外，我还没有遇到任何问题。

# mysql - MySQL：平均一个盒子每秒可以支持多少次更新？

> ID：12838579
> 
> 赞同：5
> 
> 时间：2012-10-11T11:34:21.970
> 
> 标签：mysql, sql, database, performance, sql-update

我们对单个 MySQL 表（存储用户活动信息）进行了持续的简单更新。假设我们每秒将它们分组为批量更新。

我想大致了解一下典型的 4 核 8GB 机器上的 mysql 何时会开始出现跟不上每秒更新的问题。例如，我每秒可以进行多少行更新@ 1？

这是一个思考练习，以决定我是否应该在我们的应用程序发布的早期开始使用 MySQL（简化开发），或者 MySQL 是否可能很快就会爆炸，以至于它甚至不值得冒险走这条路。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-11T11:53:47.127

获得体面数字的唯一方法是对特定用例进行基准测试。变量太多了，没有办法解决。

如果您只是敲击一个 bash 脚本或一个小型演示应用程序并使用[jmeter](http://jmeter.apache.org/)敲击它，那么它应该不会花费太长时间，那么这会给您一个好主意。

在尝试对类似用例进行基准测试时，我使用了 jmeter。不同之处在于我正在寻找`INSERTS`. 我玩的时候最有用的是'innodb_flush_log_at_trx_commit'参数。如果您正在使用`INNODB`并且***不需要***为您的用例提供 ACID 合规性，则将其更改为 0。这会对`INSERT`吞吐量产生巨大影响，并且可能会在您的`UPDATE`用例中做同样的事情。尽管请注意，使用此设置，更改只会每秒刷新一次磁盘，因此如果您的服务器断电或发生其他情况，您可能会丢失一秒钟的数据。

在我的四核 8GB 机器上用于我的用例：

*   `innodb_flush_log_at_trx_commit=1`导致每秒 80 次插入
*   `innodb_flush_log_at_trx_commit=0`导致每秒 2000 次插入

这些数字可能与您的用例无关 - 这就是您需要自己对其进行基准测试的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T11:49:55.287

对这个问题给出一个一般性的答案并不容易。您要求的数字不仅在很大程度上取决于您的数据库服务器的硬件、MySQL 本身，而且还取决于服务器/客户端配置、网络以及 - 同样重要的是 - 还取决于您的数据库/表设计。

一般来说，在最先进的服务器上设置裸 MySQL 并使用唯一键更新语句，如果我从 200 秒以下更新语句，我不会遇到问题`localhost`，至少这是我得到的在我六岁的 winxp 测试环境中。新系统上的裸机安装将以这种方式扩展得更高。如果您认为更大，那么一台服务器不是要走的路。MySQL 可以通过某些方式进行[调整](http://www.mysqlperformanceblog.com/2006/09/29/what-to-tune-in-mysql-server-after-installation/)和[扩展](http://www.mysql.com/why-mysql/scaleout/scaleout_pitfalls.html)，因此许多公司严重依赖它。

只是一些基础知识：

*   如果要更新的字段有巨大的索引文件，更新语句会慢很多，因为每个语句不仅要写入数据，还要写入索引信息。
*   如果您的更新语句不能使用索引，则服务器可能需要更长的时间来分配它必须更新的必填字段。
*   慢速内存和/或慢速硬盘也可能会降低整体服务器性能。
*   缓慢的网络连接会减慢客户端和服务器之间的通信速度。

[有整本书都写过](https://rads.stackoverflow.com/amzn/click/com/0596101716)，所以我会在这里停下来，建议你进一步阅读，如果你有兴趣！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-11T11:50:54.960

这在很大程度上取决于您用来推送到数据库的代码的质量。

如果您编写批处理以在每个请求中插入一个值`INSERT`（即，

```
INSERT INTO table (field) VALUES (value_1);
INSERT INTO table (field) VALUES (value_2);
...
INSERT INTO table (field) VALUES (value_n); 
```

，你的表演会崩溃和燃烧。

如果您使用单个值插入多个值`INSERT`（即

```
INSERT INTO table (field) values (value_1),(value_2)...(value_n); 
```

，你会发现你可以很容易地每秒插入很多条记录

例如，我编写了一个快速应用程序，该应用程序需要将 LDAP 帐户请求的详细信息添加到持有数据库。一次插入一个字段（即`LDAP_field, LDAP_value`），整个脚本的执行需要 10 秒。当我将这些值连接到单个 INSERT 请求中时，脚本的执行时间从开始到结束下降到大约 2 秒。这包括启动和提交事务的开销

希望这可以帮助

# android - 在 WebView 或自定义视图中播放 Gif

> ID：12838584
> 
> 赞同：3
> 
> 时间：2012-10-11T11:34:47.877
> 
> 标签：android, android-webview, gif, android-custom-view

简而言之，我有一个 Activity A，它已应用`setContentView(R.id.layout_a)`，A 将运行 5 秒。

我尝试定义一个自定义 View 类并使用 Movie 类加载 gif，然后将自定义视图附加到，`layout_a`但它显示为空白。

## 网络视图方法

我试过WebView，它可以很好地显示gif，但是gif只有在我第一次启动这个活动时才能动画。当稍后的活动 A 启动时，它只会显示最后一帧。

我试过`WebView.reload()`但不甜。

这是我尝试应用 WebView 时的代码：

```
public class activityA extends Activity {

@Override
public void onCreate(Bundle icicle) {
    super.onCreate(icicle);

    setContentView(R.layout.activity_a);

    WebView splashFrame = (WebView)findViewById(R.id.splashFrame);

    splashFrame.setBackgroundColor(Color.TRANSPARENT);
    splashFrame.loadDataWithBaseURL("file:///android_res/drawable/", "<img align='middle' src='face_morph_gif.gif' width='100%' />", "text/html", "utf-8", null);
    splashFrame.reload();

    Handler handler = new Handler();

    // run a thread after 3 seconds to start the home screen
    handler.postDelayed(new Runnable() {

        @Override
        public void run() {

            // make sure we close the splash screen so the user won't come back when it presses back key

            finish();
            // start the home screen

            Intent intent = new Intent(activityA.this, activityB.class);
            SplashScreenActivity.this.startActivity(intent);
        }

    }, 5000); 

  }      
} 
```

所以我的**问题1**来了：当我启动活动A时，如何让这个gif从头开始播放？我注意到当我使用 Safari/Chrome 打开这个 gif 时，它只会播放一次，直到我手动刷新浏览器。

## 自定义视图方法

这是我正在研究的第一种方式，但我什至一次都找不到工作。

活动A代码：

```
public class activityA extends Activity {

@Override
public void onCreate(Bundle icicle) {
    super.onCreate(icicle);

    setContentView(R.layout.activity_a);
    Handler handler = new Handler();

    // run a thread after 3 seconds to start the home screen
    handler.postDelayed(new Runnable() {

        @Override
        public void run() {

            // make sure we close the splash screen so the user won't come back when it presses back key

            finish();
            // start the home screen

            Intent intent = new Intent(activityA.this, activityB.class);
            SplashScreenActivity.this.startActivity(intent);
        }

    }, 5000); 

  }      
} 
```

客户视图：

```
public class GifView extends View {

public Movie mMovie;
public long mMovieStart;

public GifView(Context context) {
    super(context);
    setFocusable(true);
    InputStream is = context.getResources().openRawResource(R.drawable.face_morph_gif);
    mMovie = Movie.decodeStream(is);
}

public GifView(Context context, AttributeSet attr) {
    super(context, attr);
    setFocusable(true);
    InputStream is = context.getResources().openRawResource(R.drawable.face_morph_gif);
    mMovie = Movie.decodeStream(is);
}

public GifView(Context context, AttributeSet attr, int defStyle) {
    super(context, attr, defStyle);
    setFocusable(true);
    InputStream is = context.getResources().openRawResource(R.drawable.face_morph_gif);
    mMovie = Movie.decodeStream(is);

}

@Override
protected void onDraw(Canvas canvas) {
   super.onDraw(canvas);
//       canvas.drawColor(Color.TRANSPARENT);
   final long now = SystemClock.uptimeMillis();
   if (mMovieStart == 0) {
      mMovieStart = now;
   }
   if (mMovie != null) {
       int dur = mMovie.duration();
//         Log.d("gif Canvas", "duration: " + mMovie.duration());
       if (dur == 0) {
           dur = 4000;
       }

       int relTime = (int)((now - mMovieStart) % dur);
       mMovie.setTime(relTime);
       mMovie.draw(canvas, 10, 10);
//         Log.d("gif Canvas", mMovie.width() + "x" + mMovie.height());
       invalidate();
   }
}

@Override
  protected void onMeasure(final int widthMeasureSpec,
     final int heightMeasureSpec) {
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    setMeasuredDimension(getMeasuredWidth(), getMeasuredHeight());
}

} 
```

以及 layout_a 的 xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/app_background"
tools:ignore="ContentDescription" >

<ImageView
    ... />

<ImageView
    ... />

<ImageView
    ... />

<ImageView
    ... />

<com.xxx.GifView 
    android:id="@+id/splashFrame"
    android:layout_width="95dp" 
    android:layout_height="156dp" 
    android:visibility="visible" /> 
```

所以我的**问题 2**来了：为什么这个自定义视图不能显示 gif？我在方法中设置了断点`onDraw`，我确信 mMovie 可以加载 gif（mMovie 可以返回正确的 gif 宽度和高度）

我知道让 gif 在 Android 上工作是一个相当古老的话题，AFAIK 有 3 种方法：

1.  电影课

2.  自定义视图

3.  分割 GIF/使用 Android 动画

我不能使用第三种方式，因为我使用的 gif 有 100 帧，而且不便宜。

我已经阅读了所有教程和 SO 问题，但没有一个可以完成这项工作。

感谢您阅读我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:48:46.317

为了在你的安卓手机上播放 GIF 动画，我建议你使用 WebView（仅适用于 Android 2.2 及更高版本）。

可以在这里找到一个很好的教程：http: [//droid-blog.net/2011/10/17/tutorial-how-to-play-animated-gifs-in-android-part-3/](http://droid-blog.net/2011/10/17/tutorial-how-to-play-animated-gifs-in-android-part-3/)

每次打开 WebView 时都要小心清除缓存，以便播放动画 GIF。利用`webView.clearCache(false);`

享受。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-14T06:35:23.120

You can convert your GIFs to WebP format.

A few utilities are available online, this is one of them: [http://www.zamzar.com/convert/gif-to-webp/](http://www.zamzar.com/convert/gif-to-webp/)

# java - 休眠映射位置指定？

> ID：12838588
> 
> 赞同：2
> 
> 时间：2012-10-11T11:34:57.917
> 
> 标签：java, spring, hibernate

我正在使用弹簧和休眠。我将映射位置指定为：

我的文件夹结构如下：

```
src/main/resources
.
...hibernate
    .
    .....hibernate2

<property name="mappingLocations" value="classpath:hibernate/*.hbm.xml" /> 
```

上面的属性只查看休眠文件夹，而不是查看子目录。我如何强制在子文件夹中查找 hbm 文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T12:18:31.323

插入通配符 * 如下

```
<property name="mappingLocations" value="classpath*:hibernate/**/*.hbm.xml" /> 
```

# windbg - 工作线程池中的混合模式崩溃，但没有托管线程

> ID：12838594
> 
> 赞同：3
> 
> 时间：2012-10-11T11:35:09.627
> 
> 标签：windbg, sos

它是 XP 上的大型 32 位混合模式 MFC 7.0 应用程序，用户告诉他正在使用托管代码中实现的功能。crach 位于已获取 LoaderLock 的线程中，并且似乎来自 .NET 工作线程池。

```
0:016> !cs -o -l
-----------------------------------------
DebugInfo          = 0x7c97e1a0
Critical section   = 0x7c97e174 (ntdll!LdrpLoaderLock+0x0)
LOCKED
LockCount          = 0x4
OwningThread       = 0x00000260
RecursionCount     = 0x1
LockSemaphore      = 0x7BC
SpinCount          = 0x00000000
OwningThread DbgId = ~16s
OwningThread Stack =
ChildEBP RetAddr  Args to Child              
0f66e400 7c90df4a 7c8648a2 00000002 0f66e57c ntdll!KiFastSystemCallRet (FPO: [0,0,0])
0f66e404 7c8648a2 00000002 0f66e57c 00000001 ntdll!ZwWaitForMultipleObjects+0xc (FPO: [5,0,0])
0f66e74c 7c83ab50 0f66e774 7c839b39 0f66e77c kernel32!UnhandledExceptionFilter+0x8b9 (FPO: [Non-Fpo])
0f66e754 7c839b39 0f66e77c 00000000 0f66e77c kernel32!BaseThreadStart+0x4d (FPO: [Non-Fpo])
0f66e77c 7c9032a8 0f66e868 0f66ffdc 0f66e884 kernel32!_except_handler3+0x61 (FPO: [Uses EBP] [3,0,7])
0f66e7a0 7c90327a 0f66e868 0f66ffdc 0f66e884 ntdll!ExecuteHandler2+0x26
0f66e850 7c90e48a 00000000 0f66e884 0f66e868 ntdll!ExecuteHandler+0x24
0f66e850 79247eb4 00000000 0f66e884 0f66e868 ntdll!KiUserExceptionDispatcher+0xe (FPO: [2,0,0]) (CONTEXT @ 0f66e884)
0f66eb4c 7929a46e 0e715d80 792483ef 0e715d80 mscorwks!Thread::UnhijackThread+0xb (FPO: [0,0,0])
0f66eb54 792483ef 0e715d80 00000000 00000000 mscorwks!Thread::RareEnablePreemptiveGC+0x36 (FPO: [0,0,0])
0f66eb64 792a6ff9 06ee0000 00000000 00000000 mscorwks!Thread::RareDisablePreemptiveGC+0x5f (FPO: [0,0,0])
0f66ec10 79247e14 06ee0000 00000003 00000000 mscorwks!SystemDomain::RunDllMain+0x7d (FPO: [Non-Fpo])
0f66ee98 603d6a2c 00000001 00000003 00000000 mscorwks!ExecuteDLL+0x3c0 (FPO: [Non-Fpo])
0f66eed8 603d70a3 06ee0000 0f66eebc 00000000 mscoreei!CorDllMainWorker+0x153 (FPO: [Non-Fpo])
0f66ef14 79015012 00000000 00000003 00000000 mscoreei!_CorDllMain+0x111 (FPO: [Non-Fpo])
0f66ef30 7c90118a 06ee0000 00000003 00000000 mscoree!ShellShim__CorDllMain+0xad (FPO: [Non-Fpo])
0f66ef50 7c91397b 06ef841e 06ee0000 00000003 ntdll!LdrpCallInitRoutine+0x14
0f66efc8 7c80c136 00000000 793fa180 7c80934a ntdll!LdrShutdownThread+0xd7 (FPO: [Non-Fpo])
0f66f000 792ee8ad 00000000 00000000 792ee78a kernel32!ExitThread+0x3e (FPO: [Non-Fpo])
0f66f020 792edfcb 00000000 00000000 00000000 mscorwks!ThreadpoolMgr::WorkerThreadStart+0x123 (FPO: [Non-Fpo]) 
```

堆栈上一些有趣的值可能是 **06ee0000** 和**0f66eebc**。第一个是 myMixedModeDll 的基地址，第二个是：

```
0:016> ln 06ef841e 
(06ef841e)   myMixedModeDll!CorDllMain   |  (06ef8424)   myMixedModeDll!CDialog::CDialog
Exact matches: 
```

实际的例外应该在这里：

```
0:000> .cxr 0f66e884;kb 
eax=000000df ebx=00000000 ecx=0e715d80 edx=000003a4 esi=0e715d80 edi=00010000
eip=79247eb4 esp=0f66eb50 ebp=0f66ec10 iopl=0         nv up ei ng nz na po nc
cs=001b  ss=0023  ds=0023  es=0023  fs=003b  gs=0000             efl=00010282
mscorwks!Thread::UnhijackThread+0xb:
79247eb4 8910            mov     dword ptr [eax],edx  ds:0023:000000df=????????
  *** Stack trace for last set context - .thread/.cxr resets it
ChildEBP RetAddr  Args to Child              
0f66eb4c 7929a46e 0e715d80 792483ef 0e715d80 mscorwks!Thread::UnhijackThread+0xb
0f66eb54 792483ef 0e715d80 00000000 00000000 mscorwks!Thread::RareEnablePreemptiveGC+0x36 
```

是的，eax 不好：

```
0:000> u 79247eae 
mscorwks!Thread::UnhijackThread+0x5:
79247eae 8b5178          mov     edx,dword ptr [ecx+78h]
79247eb1 8b417c          mov     eax,dword ptr [ecx+7Ch]
79247eb4 8910            mov     dword ptr [eax],edx 
```

是的，ECX 已正确恢复

```
0:016> dd @ecx+0x78 L1
0e715df8  000003a4
0:016> dd @ecx+0x7c L1
0e715dfc  000000df

0:016> dd @ecx L0x20
0e715d80  0e6f4798 00000000 ffffffff 00000000
0e715d90  00000000 00000020 00000000 0e715da0
0e715da0  0e715da0 0e715da0 00000000 00000000
0e715db0  00000000 000000df 00000000 00000000
0e715dc0  00000000 00000000 00000000 00000000
0e715dd0  00000000 00000000 00000000 00000000
0e715de0  00000000 00000000 00000000 00000000
0e715df0  0e7093e8 00002733 000003a4 000000df 
```

最后的错误值

```
0:016> !gle
LastErrorValue: (Win32) 0 (0) - The operation completed successfully.
LastStatusValue: (NTSTATUS) 0xc0000034 - Object Name not found. 
```

这个 .NET 的版本是 1.1.4322 ，sos！声称线程 #16 不是托管线程。

```
0:016> !t
ThreadCount: 10
UnstartedThread: 0
BackgroundThread: 10
PendingThread: 0
DeadThread: 0
                                  PreEmptive   GC Alloc                     Lock     
        ID  ThreadOBJ       State     GC       Context           Domain     Count APT Exception
  0  0xc8c 0x001ae598      0x4220 Enabled  0x1b7df804:0x1b7df8d8 0x001fda98     0 STA
  5  0xcd4 0x001caea0      0xb220 Enabled  0x00000000:0x00000000 0x001fda98     0 MTA (Finalizer)
  8  0xe28 0x0c56ac40       0x220 Enabled  0x00000000:0x00000000 0x001fda98     0 Ukn
 10  0x8a8 0x0e5f4b48    0x800220 Enabled  0x1b822518:0x1b824458 0x001fda98     0 MTA (Threadpool Completion Port)
 11  0xc18 0x0e6d6a60    0x800220 Enabled  0x1b8651cc:0x1b867008 0x001fda98     0 MTA (Threadpool Completion Port)
 12  0xa54 0x00190c28       0x220 Enabled  0x1b5247f0:0x1b52650c 0x001fda98     0 Ukn
 13  0xe9c 0x0e6627f8       0x220 Enabled  0x1b5307f0:0x1b53250c 0x001fda98     0 Ukn
 14  0xe58 0x0e6b11a0   0x1800220 Enabled  0x00000000:0x00000000 0x001fda98     0 MTA (Threadpool Worker)
 15  0x8dc 0x0e6d68a8       0x220 Enabled  0x00000000:0x00000000 0x001fda98     0 Ukn
 17  0xbcc 0x0e709378       0x220 Enabled  0x1b52c7f0:0x1b52e50c 0x001fda98     0 Ukn
0:016> !ClrStack
Thread 16
Not a managed thread. 
```

我怎样才能找到更多信息来揭示这次崩溃的原因？

# jquery - 防止在使用 jquery .sortable() 对列表进行排序时激活战斧命令链接

> ID：12838598
> 
> 赞同：0
> 
> 时间：2012-10-11T11:35:15.870
> 
> 标签：jquery, jquery-ui, tomahawk

我正在使用 jquery-ui 实​​现一个网站，以便能够对列表进行排序。

```
jQuery(".folder ul").sortable( { 
    opacity: 0.6, 
    cursor: 'move',
    update: sortUpdate,
    distance: 15,
    items: "> li:has(a)",
} ); 
```

列表元素只有在它包含一个元素时才应该是可排序的。到目前为止，一切都很好。

由于可排序项目包含一个链接，因此当我删除可排序项目时，会调用该链接（我认为是因为它是作为 onclick 事件处理的？）。我尝试创建一个新的 onclick 处理程序来自己处理单击事件，检查用户当前是否正在拖动。然而，这不起作用。

```
jQuery('.folder-used').click(function(event) {
    event.stopPropagation();
event.preventDefault();
}); 
```

当我在我自己的点击处理程序中放置一个断点时，它表明点击时到达了代码。但是该页面无论如何都会进行重定向。我的猜测是因为我必须使用 tomahawk commandlink。Tomahawk 生成自己的 javascript 函数来处理提交操作。

```
<t:commandLink action="#{dataHandler.filterChanged}">
<f:param name="id" value="#{val}" />
<img:generateTextImage height="182" width="50" value="#{val}" verticalAligned="true" xpos="54" ypos="29" />
</t:commandLink> 
```

我该如何解决这个问题？有谁知道我如何处理 tomahawk 的 onclick 事件？

提前谢谢！泽德

Ps 我尝试过不同的方法，例如[此处](https://stackoverflow.com/questions/3433366/jquery-sortable-disable-onclick-while-sorting)（可排序的开始和停止事件）或[此处](https://stackoverflow.com/questions/3864102/how-to-ignore-click-event-when-clicked-on-children)（禁用链接的点击事件）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T13:51:42.833

我找到了我的问题的答案。

我持有一个变量，说明我当前是否正在拖动

```
jQuery(".folder ul").sortable( { 
    opacity: 0.6, 
    cursor: 'move',
    update: sortUpdate,
    distance: 15,
    items: "> li:has(a)",
    start: function(event, ui) {
       dragging = true;     
    }
} ); 
```

在 commandLink onclick 事件中，我检查是否在拖动。如果是这样，我将`dragging`变量重置为 false 并返回 false，因此不会调用 tomahawk 动作。

```
<t:commandLink onclick="if(dragging) { dragging = false; return false; }" action="#{handler.filterChanged}"> 
```

tomahawk 将把我的`onclick`代码放在它自己的前面。使用`return false;`我确保在这种情况下忽略战斧代码。

# javascript - 如何使用 JavaScript 函数以动态形式操作表单输入值

> ID：12838599
> 
> 赞同：0
> 
> 时间：2012-10-11T11:35:16.137
> 
> 标签：javascript, html

我有一个动态添加行的表，这些行具有用于动态使用、提交等的不同属性。我有一个带有自动完成功能的输入框，它必须更改其余输入框的值。没有固定的值怎么能改变`name`，`id`或者`class`？

动态创建的行：

```
<tr>
  <div id="1">
    <div id="2">
      <input type="text" name="input1" id="input1" class="input1" />
    </div>
    <div id="3">
      <input type="text" name="input2" id="input2" class="input2" onkeyup="foo(this);"/>
    </div>
  </div>   
  <input type="text" name="input3" id="input3" class="input3" />
  <input type="text" name="input4" id="input4" class="input4" />
</tr> 
```

JavaScript 函数：

```
foo(node){
   //node.name is input2
   change input1.value;
   change input3.value;
   change input4.value;

}; 
```

我不能依赖函数的静态属性，它们必须在创建元素后传递。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T11:38:55.227

如果你愿意使用 jQuery，你可以这样做：

```
$(function(){
   $("#yourTable").on("keyup","INPUT",function(){
       $("INPUT").not(this).val($(this).val());
   });
}); 
```

JSFiddle：http: [//jsfiddle.net/b6nDX/1/](http://jsfiddle.net/b6nDX/1/)

这将使**所有字段更改为****在表**中的任何字段中键入的任何内容。

注意：如果您只想使用一个“源”字段，您当然需要缩小选择器的范围

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T16:43:02.957

这可以通过 DOM 属性实现。

例子：

```
foo(elem){
    elem.parentNode.parentNode.parentNode.parentNode.children[2].children[0].children[1].children[0].value = "";
    elem.parentNode.parentNode.parentNode.parentNode.children[5].children[0].value = "";
    elem.parentNode.parentNode.parentNode.parentNode.children[6].children[0].value = "";
    elem.parentNode.parentNode.parentNode.parentNode.children[7].children[0].value = "";
    elem.parentNode.parentNode.parentNode.parentNode.children[8].children[0].value = "";    
}; 
```

# java - 连接两个字符串，然后在 Java 中转换为日期

> ID：12838603
> 
> 赞同：2
> 
> 时间：2012-10-11T11:35:27.877
> 
> 标签：java, string, date, concatenation

我需要在 Java 中将两个字符串连接在一起，然后格式化字符串并使其成为 Date 对象。

我目前拥有的两个字符串是`31/01/2012`并且`20:00`我想做类似的事情：

```
try {
  DateFormat formatter = new SimpleDateFormat("dd-MM-yyyy HH:mm");
  Date result = new Date();
  String tempDate = date + " " + f;
  result = formatter.parse(tempDate);
} catch (ParseException e) {
  ...etc
} 
```

有人可以帮我弄清楚如何将两个字符串加在一起。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-11T11:37:12.440

你的串联很好。然而，您的格式似乎是`"dd/MM/yyyy HH:mm"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T11:39:26.130

代码看起来不错。只需更正它应该是的格式

> "dd/MM/yyyy HH:mm"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-17T02:34:28.677

# c# - 使用 c# 从 XML 结构中读取数据

> ID：12838606
> 
> 赞同：1
> 
> 时间：2012-10-11T11:35:36.120
> 
> 标签：c#, xml, c#-4.0, xml-parsing, xml-serialization

我将 xml 文件存储在一个**字符串对象**中，例如，我将 xml 结构存储在 c#中的**局部变量字符串 abcd中。**

```
 <structure>
    <a>Test Name</a>
    <e>test address</e>
    <c>
       <c1>yyyy<c1>
       <c2>xxxx</c2>
    </c>
    </structure> 
```

如何使用 c# 读取（解析）此 xml 字符串并使用 c# 将标记 a、标记 c1、标记 c2 值存储在局部变量中。

我试过了

```
 XmlDocument xmldoc = new XmlDocument();
        xmldoc.LoadXml(abcd);

        XmlElement element = (XmlElement)xmldoc.GetElementById("a"); 
```

但我得到空值。如何从 xml 结构中读取值并使用 c# 存储在局部变量中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T11:42:37.783

您可以使用 LINQ to XML：

```
 var xDoc = XDocument.Parse(xml);

 var a = xDoc.Descendants("a").First().Value;
 var c1 = xDoc.Descendants("c1").First().Value;
 var c2 = xDoc.Descendants("c2").First().Value; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T11:45:10.907

Linq2Xml 更容易使用。

```
var xElem = XElement.Parse(abcd);
var a = xElem.Element("a").Value;
var c = xElem.Element("c").Element("c1").Value; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T11:41:06.723

```
string test = " <structure><a>Test Name</a><e>test address</e><c><c1>yyyy</c1><c2>xxxx</c2></c></structure>";

        DataSet dataSet = new DataSet();

        dataSet.ReadXml(new StringReader(test));
        DataTable dt11 = new DataTable();
        DataTable dt12 = new DataTable();
        //return single table inside of dataset
        if (dataSet.Tables.Count > 1)
        {
            dt11 = dataSet.Tables[0];
            dt12 = dataSet.Tables[1];
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T11:41:44.977

您看过 LINQ to XML 了吗？如果没有，请参阅[http://msdn.microsoft.com/en-us/library/bb387098.aspx上的参考资料](http://msdn.microsoft.com/en-us/library/bb387098.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-11T11:43:52.420

很接近！将其更改为：

```
XmlDocument xmldoc = new XmlDocument(); 
xmldoc.LoadXml(abcd); 

XmlElement element = xmldoc.Root.Element("a").Value; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-11T11:45:13.360

如果我了解您正在尝试访问 xml 文档中的每个不同标签，那么您应该使用`GetElementsByTagName`而不是`GetElementById`. 这将返回一个`XmlNodeList`对象，其中包含具有该标签名称的所有节点，您可以将 First 作为`NodeList.Item(0).InnerXml;`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-10-01T15:14:20.803

要在接受的答案中使用 XDocument 类，您需要添加：

```
using System.Xml.Linq; 
```

和

*从解决方案资源管理器中，找到“引用”
*右键单击“添加引用”
*搜索程序集 (Ctrl E) 以获取 XML
*选择 xml.ling 项目
*单击左侧出现的复选框
*选择确定

# java - Spring Security 从远程访问访问请求，无需预认证

> ID：12838607
> 
> 赞同：1
> 
> 时间：2012-10-11T11:35:36.943
> 
> 标签：java, spring, security, getmethod

我写在这里是因为我找不到我的问题的明确答案：

我的项目正在使用 Spring MVC 和 Spring Security。我为 Web 应用程序（当然使用 Java）很好地安装了两者。我可以使用 post 和 get 方法访问，但只有在用户通过 Spring Security 的通常形式连接之后。

从现在开始，用户对这样的地址发出请求：

`../../get.request?request=getListCommand`

其中 get.request 是 Spring MVC 的映射。只有在用户通过身份验证后才能启用此访问权限！

**我需要做的：** ***添加***直接访问此请求的可能性，而无需先前已通过身份验证，例如使用这样的地址：

`http://123.123.123.123:123/get.request?request=getListCommand&j_password=myPassword&j_username=myName`

或者

`same thing with the post protocol and the params given (request=getListCommand, j_password=myPassword, j_username=myName)`

当然，必须在执行请求并将结果发回之前完成身份验证。

我在许多网站上搜索或直接在 Spring 安全网站上搜索。他们谈论过滤器链、自己的用户名认证、RMI；但我并没有真正找到一个完整的例子来做我上面介绍的事情。

感谢任何可以帮助我的人。

ps：我使用所有默认或最简单的Spring安全配置（没有风水'风格:-)）

这是我的安全上下文 xml 文件

```
<http realm="NexCap Up"
        auto-config="true"
        access-denied-page="/www/jsp/authentication/accessDenied.jsp"
        create-session="always"
        disable-url-rewriting="true">          
            <port-mappings>
                <port-mapping http="8084" https="8443"/>
            </port-mappings>        

            <intercept-url pattern="/www/jsp/authentication/connexion.jsp"                    
                access='IS_AUTHENTICATED_ANONYMOUSLY' requires-channel="https"/>

            <intercept-url pattern="/www/jsp/authentication/connexionFailed.jsp" 
                access='IS_AUTHENTICATED_ANONYMOUSLY'  />

            <intercept-url pattern="/www/jsp/authentication/applicationExit.jsp" 
                access='IS_AUTHENTICATED_ANONYMOUSLY'  /> 

          <intercept-url 
                pattern="/get.Request" 
                method="GET"
                access="ROLE_REMOTE" />

             <intercept-url 
                pattern="/post.Request"  
                method="POST"
                access="ROLE_REMOTE" />

            <intercept-url pattern="/**" 
                access="ROLE_REMOTE,ROLE_SCRIPT"  />
       <form-login 
            authentication-failure-url="/www/jsp/authentication/connexionFailed.jsp"
            login-page="/www/jsp/authentication/connexion.jsp"
            default-target-url="/www/jsp/index.jsp"
            always-use-default-target="true"/>

        <logout
            logout-success-url="/www/jsp/authentication/applicationExit.jsp"
            invalidate-session="true"/>

        <session-management
            invalid-session-url="/www/jsp/authentication/invalidSession.jsp"
            session-authentication-error-url = "/www/jsp/authentication/authentificationError.jsp"
            session-fixation-protection="none">

            <!-- Sessions concurrentes -->
            <concurrency-control 
                error-if-maximum-exceeded="false"
                expired-url="/www/jsp/authentication/sessionExpired.jsp"
                max-sessions="1" />

        </session-management>

    </http> 
```

以及关于spring security的web.xml文件部分

```
<security-constraint>
    <web-resource-collection>
        <web-resource-name>Security</web-resource-name>
        <url-pattern>/*</url-pattern>
    </web-resource-collection>
    <user-data-constraint>
        <transport-guarantee>CONFIDENTIAL</transport-guarantee>
    </user-data-constraint>
</security-constraint>

<filter>
  <display-name>springSecurityFilterChain</display-name>
  <filter-name>springSecurityFilterChain</filter-name>
  <filter-class>
      org.springframework.web.filter.DelegatingFilterProxy
  </filter-class> 
```

```
<filter-mapping>
   <filter-name>springSecurityFilterChain</filter-name>
   <url-pattern>/*</url-pattern> 
```

```
<context-param>
   <param-name>contextConfigLocation</param-name>
   <param-value>
       /WEB-INF/spring/secu-config.xml
   </param-value> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T13:43:40.037

假设`applicationContext-security.xml`你的WEB-INF中有一个。
如果您可以发布您的 applicationContext-security.xml
并且您几乎拥有 Spring Security 的默认配置，那就太好了。

我会推荐以下。

首先将您的网址更改为`/public/get.request?request=getListCommand`

然后将以下代码段添加到 applicationContext-security.xml

```
<http use-expressions="true">
 <intercept-url pattern="/public/**" access="permitAll" />
 <!-- You can add n number of filters here-->
</http> 
```

它将做的是绕过`/public/`. 更改 URL 的原因是您可能不希望整个应用程序公开。

**下面是我的 XML 示例。**
***另请注意，我的身份验证提供程序是自定义的，所以不要混淆。您只需要查看我的`<http>`部分，您就会了解如何在您的应用程序中实现。***

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/security"
    xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                        http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.0.xsd">

    <global-method-security pre-post-annotations="enabled" jsr250-annotations="enabled" secured-annotations="enabled">
        <!-- AspectJ pointcut expression that locates our "post" method and applies security that way
        <protect-pointcut expression="execution(* bigbank.*Service.post*(..))" access="ROLE_TELLER"/>
        -->
    </global-method-security>

    <http use-expressions="true">
        <intercept-url pattern="/favicon.ico" access="permitAll" />
        <intercept-url pattern="/static/**" access="permitAll"/>
        <intercept-url pattern="/login.jsp*" access="permitAll"/>
        <intercept-url pattern="/Admin/**" access="hasAnyRole('ROLE_SUPER_USER')"/>
        <form-login login-page="/login.jsp" authentication-failure-url="/login.jsp?login_error=1" />
        <http-basic/>
        <logout logout-success-url="/login.jsp"/>
        <remember-me user-service-ref="loginService" />
        <!-- Uncomment to limit the number of sessions a user can have -->
     </http>

    <authentication-manager>
        <authentication-provider user-service-ref="loginService">
         <password-encoder hash="md5"/>
        </authentication-provider>
    </authentication-manager>

    <beans:bean id="loginService" class="com.indyaah.service.LoginService">
    </beans:bean>
    <beans:bean id="authService" class="com.indyaah.service.AuthService" />
</beans:beans> 
```

如您所见`login.jsp`，我允许匿名访问我的静态内容（images/js/css/etc.），这意味着无需登录。

希望这有帮助。

如果您在理解方面需要进一步的帮助，请告诉我。

# ajax - 是否可以通过下载响应 POST 并且干净？

> ID：12838613
> 
> 赞同：1
> 
> 时间：2012-10-11T11:36:01.823
> 
> 标签：ajax, http, download

我正在实现一个在服务器上转换文件的服务，但我不想存储任何东西，只需返回转换后的文件。通过文件下载来响应 POST 是否可能/可行？我正在使用 ajax，所以我不想离开页面。

我只是尝试将内容类型设置为 application/octet-stream，它可以工作，但在 Chrome 中给出了一个不幸的警告：

> 资源解释为文档，但使用 MIME 类型 application/octet-stream 传输

我希望能够灵活地返回下载或响应的错误报告。什么是一个聪明的解决方案，或者这只能通过重定向干净地完成？

受[这个密切相关的问题](https://stackoverflow.com/questions/2789623/possible-to-post-and-get-a-file-download-dialog-back)的启发，我尝试使用 Content-Disposition=attachment 来响应，而不仅仅是 Content-Type=application/octet-stream。这会处理警告，但它仍然留下下载响应是否*适合*POST 的问题。

# java - 使用 java 代码启动 oozie 作业

> ID：12838615
> 
> 赞同：0
> 
> 时间：2012-10-11T11:36:06.293
> 
> 标签：java, hadoop, workflow, oozie

我正在尝试使用 javacode 启动 oozie 作业，但无法执行相同操作。以下代码为几行提供了异常“未处理的类型 oozieClientException”，例如

```
String jobId = wc.run(conf); 
```

我是java新手，正在寻求帮助。这是我的代码：

```
 OozieClient wc = new OozieClient("http://host.com:11000/oozie");

    Properties conf = wc.createConfiguration();
    conf.setProperty(....)
    ...
    String jobId = wc.run(conf);
    System.out.println("Workflow job submitted");

    while (wc.getJobInfo(jobId).getStatus() == WorkflowJob.Status.RUNNING) {
       System.out.println("Workflow job running ...");
       Thread.sleep(10 * 1000);
    }
    System.out.println("Workflow job completed ...");

    System.out.println(wc.getJobInfo(jobId)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T11:47:21.567

您应该关闭 try catch 块中的代码

```
try{
    OozieClient wc = new OozieClient("http://host.com:11000/oozie");

    Properties conf = wc.createConfiguration();
    conf.setProperty(....)
    ...
    String jobId = wc.run(conf);
    System.out.println("Workflow job submitted");

    while (wc.getJobInfo(jobId).getStatus() == WorkflowJob.Status.RUNNING) {
       System.out.println("Workflow job running ...");
       Thread.sleep(10 * 1000);
    }
    System.out.println("Workflow job completed ...");

    System.out.println(wc.getJobInfo(jobId)); 
}catch(OozieClientException oozieClientException){
    oozieClientException.printStackTrace();
} 
```

OozieClientException - 如果无法提交作业，则抛出

# jquery - 根据附加字段的动态状态动态启用禁用日期选择

> ID：12838616
> 
> 赞同：0
> 
> 时间：2012-10-11T11:36:07.277
> 
> 标签：jquery, html, datepicker

我认为这可能是 jquery-datepick.js 中的错误（[http://keith-wood.name/datepick.html](http://keith-wood.name/datepick.html)）

**情况：**

我有一个附加了 datepick 的输入文本字段。默认情况下禁用此字段。所以 datepick 也被禁用（好吧，这很好）。现在，此字段基于单选按钮启用/禁用。我为此使用 jquery，它工作正常，除了 datepick 未根据字段的“动态状态”启用/禁用。

**我试过的**

我也尝试基于相同的单选按钮手动启用/禁用 datepick .. 像这样：

```
function enbDsb(id1, id2){
        var target = '#' + id2;
        if($('#' + id1).val() == 'Y'){
            $(target).removeAttr('disabled');
            if($(target).hasClass('hasDatepick')){
            /*alert("enable now");*/
            }
        }else{
            $(target).attr('disabled', true);
            if($(target).hasClass('hasDatepick')){
            /*alert("disable now");*/
            }
        }
    } 
```

其中 id1=radio_id 和 id2= 文本字段 id（具有 datepick）

我用了

```
$(target).datepick({ disable: false }); 
```

还有这个

```
$(target).datepick({ disabled: false }); 
```

但没有一个工作...... :(

```
$.extend(Datepicker.prototype, {
    dataName: 'datepick',
    markerClass: 'hasDatepick',        
..........rest
} 
```

^^以防万一有人要求使用**'datepicker'**而不是**'datepick'**！

请帮忙....谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T11:42:52.727

啊……

解决了..！

刚用这个

```
function enbDsb(id1, id2){
        var target = '#' + id2;
        if($('#' + id1).val() == 'Y'){
            $(target).removeAttr('disabled');
            if($(target).hasClass('hasDatepick')){
            $(target).datepick('enable');
            }
        }else{
            $(target).attr('disabled', true);
            if($(target).hasClass('hasDatepick')){
            $(target).datepick('disable');
            }
        }
    } 
```

它就像魅力一样！

# magento - 如何使用具有不同选项的 MAGMI 上传数千种产品

> ID：12838619
> 
> 赞同：0
> 
> 时间：2012-10-11T11:36:09.173
> 
> 标签：magento, upload, product, magmi

我是 magento 的新手。自从我切换到 Magento 以来，我一直在经营我的商店并获得更多的销售额。我还没有弄清楚的是为我的产品设置选项。这是我目前所在的位置。

我的经销商为我提供了一份产品列表（超过 19,000 种），我在 Macro 中打开它并运行自定义脚本，然后将其配置为能够使用 MAGMI 上传到我的网站。这很好用。但我遇到的问题是许多产品（不是全部）都有不同的尺寸或不同的选项。我卖宠物用品。所以可能有一个笼子是 22 英寸，但也有 36 英寸、46 英寸等。狗粮 5 磅、15 磅、36 磅。等等。我目前将它们全部作为一个简单的产品单独列出。我希望我的网站更易于浏览，以便客户找到他们正在寻找的产品。有没有办法可以设置产品上传并拥有这些选项。一切都有自己的 UPC，我将其用作上传到 magento 的 SKU。同样，我正在为数千种产品工作，所以我正在寻找最简单的解决方案。

请确定您的经验或想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T13:21:35.473

这更像是一个 magento 属性配置问题，而不是一个 magmi 问题。对于所有这些“变量”选项，将它们的属性设置为“下拉”类型，magmi 将自动填充值。

而且由于下拉属性可以自动配置为在 magento 中用作分层导航，因此您将达到目标。

我认为您应该仔细设计您的产品模型和属性集，以区分您销售的不同类型的产品。

Magmi 将自动调整导入的值以适应目标属性特征。

但是，在 magento 中，您不能直接更改属性类型，您肯定需要在后端销毁/重新创建属性。

# ruby-on-rails - Rails - 将数据从数据库转换为 JSON

> ID：12838626
> 
> 赞同：1
> 
> 时间：2012-10-11T11:36:33.377
> 
> 标签：ruby-on-rails, database, json, forms

我正在尝试创建一个时间线，其中包含一个供用户输入新事件的表单。我决定使用[http://timeline.verite.co/](http://timeline.verite.co/)中的时间线- 我可以为每个用户创建一个表单来输入新事件，并将该事件保存到数据库中没有问题。但是，我无法弄清楚的是：

a) 从数据库中获取数据并将其转换为时间线会满意的正确 JSON 格式 - 我不知道从哪里开始！我是否需要使用与 JSON 属性相同的名称来命名数据库中的列，例如“标题”？然后我如何将其转换为 JSON？

b) 我如何动态生成 JSON 文档？该代码需要一个指向包含数据的 JSON 文档的链接。

这是我可以弄清楚如何做到这一点的唯一方法 - 就好像我要为每个用户生成一个 JSON 文档并插入每个新事件，然后从中读取，那么肯定存在一些 JSON 文档更容易的安全问题由不拥有它的人下载，而不是数据库中的数据？

任何帮助或指示将不胜感激 - 我对 Rails 很陌生，还没有真正接触过 JSON！谢谢你。

如果有帮助，时间线所需的数据格式如下：

```
{
  "timeline":
  {
      "headline":"The Main Timeline Headline Goes here",
      "type":"default",
      "text":"<p>Intro body text goes here, some HTML is ok</p>",
      "asset": {
          "media":"http://yourdomain_or_socialmedialink_goes_here.jpg",
          "credit":"Credit Name Goes Here",
          "caption":"Caption text goes here"
      },
      "date": [
          {
              "startDate":"2011,12,10",
              "endDate":"2011,12,11",
              "headline":"Headline Goes Here",
              "text":"<p>Body text goes here, some HTML is OK</p>",
              "tag":"This is Optional",
              "asset": {
                  "media":"http://twitter.com/ArjunaSoriano/status/164181156147900416",
                  "thumbnail":"optional-32x32px.jpg",
                  "credit":"Credit Name Goes Here",
                  "caption":"Caption text goes here"
              }
          }
      ],
      "era": [
          {
              "startDate":"2011,12,10",
              "endDate":"2011,12,11",
              "headline":"Headline Goes Here",
              "text":"<p>Body text goes here, some HTML is OK</p>",
              "tag":"This is Optional"
          } 

        ]
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T12:02:36.697

使用`#to_json`不是一个真正的选择，太复杂了。

尝试将 JSON 模板与 JBuilder 一起使用（请参阅[https://github.com/rails/jbuilder](https://github.com/rails/jbuilder)）。

您甚至可以使用部分和缓存，就像普通的 ERB 视图一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T12:11:48.163

如果您将 json 对象转换为字符串并作为 blob 类型存储在数据库中，那么在检索时您可以使用

```
ActiveSupport::JSON.decode(VALUE) 
```

将字符串转换为 json

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-09T19:15:07.603

尝试使用[Rabl](https://github.com/nesquena/rabl)。它可以让您在 Rails 应用程序中使用视图导出简单和复杂的 json 结构。它非常容易设置。

# c# - 当 ++counter 发生时，内存中会发生什么？

> ID：12838628
> 
> 赞同：3
> 
> 时间：2012-10-11T11:36:48.517
> 
> 标签：c#, c#-4.0

假设我有：

```
int counter;
++counter; 
```

问题是：内存（堆栈）中发生了什么？如果在堆栈中创建了一个新变量并复制前一个变量的值，然后添加 +1 或其使用的临时变量，添加 +1 然后将新值放入计数器？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-11T11:39:48.140

的值`counter`从内存加载到 CPU 寄存器中，递增，然后写回相同的内存地址。`counter`在这个过程中没有分配额外的内存，如果它位于堆栈或其他任何地方，它并没有什么区别。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T11:52:13.260

这取决于，但通常*不会*对内存产生任何影响。抖动所做的最重要的工作之一是尽可能避免使用内存。特别是对于像你这样的局部变量。而是将变量的值存储在 CPU 寄存器中。并且 ++ 运算符只是产生一个 INC 机器代码指令来增加寄存器中的值。非常快，它需要 0 或 1 个 cpu 周期。0 很常见，因为它可以与另一条指令并行执行。

有关抖动执行的优化列表，请参阅[此答案。](https://stackoverflow.com/a/4045073/17034)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T12:52:20.980

.Net first compiles to an intermediate language (IL).

The follogin .Net C# code

```
private void Form1_Load(object sender, EventArgs e)
{
    int i = 0;
    i++;
    int j = 0;
    ++j;
} 
```

Compiles to IL code, viewed in a disassembler:

```
ldc.i4.0    //ldc = load constant on evaluation stack
stloc.0 //Store on top of the evaluation stack
ldloc.0 //Load a local variable
ldc.i4.1 //ldc = load constant on evaluation stack
add //add
stloc.0 //Store on local evaluation stack

ldc.i4.0 //Load contant 0 on the evaluation stack
stloc.1 //Store this on variable location 1
ldloc.1 //Load variable location 1
ldc.i4.1 //Load constant 1 on evaluation stack
add //Add 
stloc.1 //Store on evaluation stack 
```

You can see that it does not matter in this case. It both compiles the same way. First load the value on the stack, store in the variable. then load value 1 on the stack, then add and save it in the variable.

I am not sure how this will finally compile to CPU instructions.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T11:40:31.520

++counter 将递增 counter 并返回新的递增值。counter++ 将递增 counter 并返回递增前的值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-11T11:54:59.000

这是乔恩回答的补充。

在变量之前和变量之后使用 ++ 运算符时有一个区别。考虑下面的例子：

```
 int[] arr = { 1, 2, 3 };
        int counter = 0;

        Console.WriteLine(arr[counter++]);
        Console.WriteLine(arr[++counter]); 
```

将`counter++`打印 1`++counter`并将打印 3。

# telerik - 将列名分配为类名 Telerik grid mvc

> ID：12838629
> 
> 赞同：0
> 
> 时间：2012-10-11T11:36:49.173
> 
> 标签：telerik, telerik-grid, telerik-mvc

我的视图中有一个 Telerik 网格，我想将列名分配为类属性

```
 .Columns(columns =>
        {

            columns.Bound(o => o.xyz).Width(70).Groupable(false).Title("Reply Status").HtmlAttributes(new { @class=xyz});      
                            ------^                                                                    -------------^                                         
        }) 
```

那可能吗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T11:43:56.587

Telerik mvc 网格列应仅绑定到类属性。您还可以[在此处使用动态模型绑定示例](http://www.telerik.com/community/code-library/aspnet-mvc/grid/binding-to-a-collection-of-dynamic-objects-with-mvc3-razor.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T17:32:14.983

是的，这是可能的，但方法因您的绑定而异。我假设您正在使用 Ajax 绑定，如果是这种情况，那么：

```
columns.Bound(o => o.xyz).Width(70).Groupable(false).Title("Reply Status").HtmlAttributes(new { @class="<#= xyz #>"}); 
```

如果您使用服务器绑定，则应使用[CellAction](http://www.telerik.com/help/aspnet-mvc/m_telerik_web_mvc_ui_fluent_gridbuilder_1_cellaction.html)方法。如果你对后者有困难，请告诉我，我会给你一个例子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T04:54:24.443

首先确保您将视图与模型强绑定

接下来你可以试试

```
.Columns(columns =>
      {    
        columns.Bound(o => o.xyz).Width(70).Groupable(false).Title("Reply Status")
                                        .HtmlAttributes(new { @class="<#=xyx#>"});                                    
        columns.Template(t => { }).ClientTemplate(                    
                "<span class='<#=xyx#>'>some randon text</span>"                    
                );
    }) 
```

# ajax - 如何在 BSP 中使用 Ajax？

> ID：12838637
> 
> 赞同：1
> 
> 时间：2012-10-11T11:37:09.937
> 
> 标签：ajax, model-view-controller, sap-bsp

到目前为止，我已经成功地让我的 BSP MVC 模型工作。

这是我的代码。

**看法**

```
<body>
    <z:form>
   <z:input binding="//c/counter"
            invisible="true"/>
    Counter : <z:write binding="//c/counter"/>

    <z:button fcode="incr"
                      text="Increase"/>
    <z:button fcode="decr"
                      text="decrease"/>
    </z:form>
  </body> 
```

**控制器**
通过 fcode 我调用了控制器中的“fcode_incr”方法。'c' 是 zcl_counter 的模型实例。它有一个属性计数器，将通过此方法增加。

```
method fcode_incr.
   c->increment( ).
endmethod. 
```

我希望 zcl_model 是显而易见的，它的代码在这里不相关。

当我按下“增加”按钮时的问题，服务器发送请求。当它得到响应时，它会刷新页面。所以我得到了增加的值。我怎样才能让它与 Ajax 一起工作，以便页面保持不刷新？

我已经尝试过使用“带有 flowlogic 的 XML 页面”的 Ajax。像“事件处理程序--> OnRequest”

```
request->get_form_field('variable'). 
```

它有没有进一步的帮助？

***正确的*Ajax 调用将是**

```
$.ajax({
        url:'ajaxController.do',
        statusCode:{
          404: function(){
            alert("not found");
          }
        },
        success: function(data){
          $('#viewData').html(data);
        }
       }).error(function(){
          alert("failed");
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T12:29:37.927

此链接解释了详细信息：http: [//www.saptechnical.com/Tutorials/BSP/AJAX/create.htm](http://www.saptechnical.com/Tutorials/BSP/AJAX/create.htm)

但是，本质上；

1.  在您的 bsp 页面中集成一些 javascript 以便您可以执行 ajax，这里有一些选项：

    *   从该链接获取代码
    *   或者更好的解决方案是使用 jQuery，或者通过
        *   使用 `<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/themes/base/jquery-ui.css" type="text/css" />`
        *   或上传[http://code.jquery.com/jquery-1.8.2.min.js](http://code.jquery.com/jquery-1.8.2.min.js)并在您的代码中引用它

    您可以像这样使用 jQuery 调用 ajax 调用：http: [//api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

2.  在您的 BSP 项目中创建一个将从 AJAX 调用的控制器。

3.  为您的控制器创建一个控制器类，只需重新定义 REQUEST 并将您的逻辑放在那里

完毕。

# iphone - iOS facebook 整合方法

> ID：12838641
> 
> 赞同：0
> 
> 时间：2012-10-11T11:37:24.840
> 
> 标签：iphone, objective-c, ios, facebook, ipad

我只是在对可以将**FB**集成到 iphone 应用程序中获得最佳结果的方法提出一些建议。显然**，iOS6**社交 api 无法在旧设备上运行——如果社交 api 能满足我的大部分需求，那我就可以忍受。如果没有，我想知道应该使用什么**FB api 套件。**我想要的功能是：

1.  能够发布到用户自己的时间线。

2.  签入和标记他人的能力 在这两种情况下，我都希望帖子指向另一个网站的链接，以及人们可以用来下载发布帖子的应用程序的链接。

例如，Run Keeper 很好地与人们时间线中的活动打上了烙印——这就是我所追求的，尽管我不确定 Run Keeper 链接到可以下载应用程序的位置。

实现一个**FaceBook**应用程序来提供这些功能是否必要，或者这一切都可以从 iOS 端完成吗？

非常感谢乔希

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T11:42:58.783

使用[Facebook iOS SDK](https://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/)，这将检测[iOS 6](https://developers.facebook.com/docs/howtos/ios-6/)并使用本机方法。如果不支持本机支持，iOS 5 或更低版本，它将允许用户通过网络登录，或者如果正确设置 Facebook 应用程序。

然后，您可以充分利用[Graph API](https://developers.facebook.com/docs/reference/api/)，它允许您做的不仅仅是发布新的墙贴。

在进行[签入](https://developers.facebook.com/docs/reference/api/checkin/)或[发布](https://developers.facebook.com/docs/reference/api/post/)时，您可以标记人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T12:55:29.787

Facebook 在 Ios6 中的实现并添加一个**框架*** *social.Framework* * ..希望对您有所帮助

```
ACAccountStore *accountStore = [[ACAccountStore alloc] init];
   ACAccountType *accountType = [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];

[accountStore requestAccessToAccountsWithType:accountType withCompletionHandler:^(BOOL granted, NSError *error) {

    ACAccount *account = [[ACAccount alloc] initWithAccountType:accountType];
    NSLog(@"%@, %@", account.username, account.description);
}];

if([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook]) {

    SLComposeViewController *controller = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook];

    SLComposeViewControllerCompletionHandler myBlock = ^(SLComposeViewControllerResult result){
        if (result == SLComposeViewControllerResultCancelled) {

            NSLog(@"Cancelled");

        } else

        {
            NSLog(@"Done");
        }

        [controller dismissViewControllerAnimated:YES completion:Nil];
    };
    controller.completionHandler =myBlock;

    [controller setInitialText:@"Test Post from mobile.safilsunny.com"];
    [controller addURL:[NSURL URLWithString:@"http://www.mobile.safilsunny.com"]];
    [controller addImage:[UIImage imageNamed:@"fb.png"]];

    [self presentViewController:controller animated:YES completion:Nil];

}
else{
    NSLog(@"UnAvailable");
} 
```

# cocoa - Core Fundation中是否有一些操作界面？不是可可

> ID：12838643
> 
> 赞同：0
> 
> 时间：2012-10-11T11:37:31.390
> 
> 标签：cocoa, core-foundation, pasteboard

我正在尝试将碳转化为可可。有一些关于在剪贴板上获取和设置值的碳 api。它们都在 C/C++ 文件中。

我在互联网和苹果开发者网站上搜索了很多答案，他们都建议我使用 NSPasteboard，我还将可可 api 包装在 .m 文件中并在 C/C++ 文件中调用它们，它解决了我很多问题，但不是全部。

PutScrapFlavor，我没用可可包裹它。这里有什么建议吗？

另一方面，我真的希望在现有的 C/C++ 文件中可以调用一些核心基础 api，有人知道吗？不是可可中的 NSPasteboard。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T21:01:23.490

剪贴板/粘贴板是一个 UI 概念，唯一支持的 UI 工具包是 Cocoa。无论您是否希望使用 NSPasteboard，您都别无选择。

对不起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T18:28:09.330

PutScrapFlavor 没有确切的等价物，因为在四字节字符代码中没有足够的不同风味。

相反，新的剪贴板使用 UTI 字符串代替口味。以前有 'TEXT' 的地方现在有了`kPasteboardTypeString`，以前有私有的原生类型，比如 'Sp%!'，现在有了 @"com.example.product.yourNativeFlavor"。

所以你需要彻底重写你的废品处理。好消息是 Cocoa scrap API 不是很大，并且可以巧妙地映射到旧的 Carbon API；你不应该觉得这很困难。而且您可能可以毫无麻烦地重复使用您所有的私人废料口味。

最后——如果你是 Carbon 的老手——通过粘贴板进行拖放交互比争论拖动风格要好得多。

# git - Github：寻找具有共享文件的智能 Git 设置

> ID：12838645
> 
> 赞同：2
> 
> 时间：2012-10-11T11:37:32.457
> 
> 标签：git, github

我对 Github 还很陌生，想要一些建议如何安排我的工作流程。

我们有一个使用 XAMPP 在 Mac Mini 上运行的小型 Web 应用程序。我们在全国有几台 Mac Mini，我一直在寻找一种管理和更新软件的好方法，因为我对所有不同的版本感到非常沮丧。

问题是该软件的某些文件是共享的，但某些文件是特定于每个客户端/Mac Mini 的。我正在寻找一种简单的设置，因此我只需更改一次公共文件，并且仍然为每个客户端保留特定文件（如模板）。目前的情况是这样的：

*   我的 htdocs 目录中有 1 个软件文件夹
*   该文件夹在根目录中既有特定文件又有公共文件，如下所示：

    *   共享文件夹
    *   shared.html
    *   具体的.html
    *   特定文件夹
    *   媒体文件夹（我会忽略它，而不是放在 git 上）

我正在寻找最好的方法来管理这个。我对此主题进行了一些研究，但我希望有人可以针对这种特定情况为我提供建议。我觉得我有以下选择：

1.  将所有内容放在 1 个存储库中，但将特定文件放在单独的分支中（我是否必须在更新后将公共文件的更改推送到每个客户端分支？）

2.  使用 2 个 repo（并使用 .gitignore 将公共文件与特定文件分开）。1 个带有公共文件，1 个带有客户端特定文件（在单独的分支中）。我的早期研究告诉我，这是不可能的，因为一切都在我的根目录中，而不是特定目录

3.  使用 git 子树

4.  使用 git 子模块

5.  使用 gitslave

6.  还要别的吗？

理想我正在寻找可以使用 OSX Git GUI 管理的解决方案。

关于我的工作流程。我希望我可以直接从我在 htdocs 中的软件文件夹中对代码进行所有更改。如果我只对公共文件进行更改，我当然想将其提交给公共回购。如果我对特定文件进行更改，我想首先连接到正确的分支或 repo，然后更新它。对于不正确的术语，我深表歉意，但我希望它仍然足够清楚。

如果有人能指出我正确的方向，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:09:18.040

据我所知，唯一可以在 git 中工作的解决方案是选项 1（分支）。

如果要区别对待的文件都在一个文件夹中，则其他都将不起作用。

> 更新后是否必须将公共文件的更改推送到每个客户端分支？

是的你是。实际上，您需要首先将您的更改合并到客户端分支中（准确地说，合并到客户端分支的本地副本中），然后推出所有客户端分支。这应该可行，尽管它可能有点尴尬。您可以通过一些脚本自动化来缓解这种情况。

* * *

如果您可以将自定义文件放入子文件夹，那么可以，您可以使用 git-submodule、git-subtree 或类似的。但是，我认为这不适用于您的情况。git-submodule 等。适用于您希望将内容保存在*不同存储库*中的情况。这意味着这两个部分（存储库）可以独立克隆、独立版本控制、独立标记和分支等。

但是，据我了解，这不是您想要的。自定义模板都是软件产品的一部分，并且会随着系统的其余部分一起发展。因此，将它们放在单独的存储库中只会造成麻烦（例如，如果您进行分支，则需要单独分支每个子模块 - 更糟糕的是，单独合并每个子模块）。

您只想维护某些文件的不同“版本”，而这正是分支的用途。

* * *

但是，您应该考虑另一种方法，即**在运行时执行特定于系统的定制**。

如何做到这一点取决于具体情况，但作为一个想法，您可以拥有一个系统特定事物表。然后您在启动时检测您的主机系统（获取主机名或类似名称），并应用自定义。

这避免了多个分支的所有问题，同步它们，测试它们并确保部署正确的分支。此外，也许更重要的是，您可以使用一个代码库，并且可以利用系统之间的相似性。最后，您可以在运行时打开和关闭自定义的各个部分，这大大简化了与自定义相关的调试问题。

根据我的经验，这是一种比部署文件更简单、更健壮的方法，甚至可能在不同系统上部署不同的代码。我自己在几个项目中使用了这个想法，并且效果很好。

# playframework - 了解“欢迎玩2.0”页面创建

> ID：12838661
> 
> 赞同：6
> 
> 时间：2012-10-11T11:38:20.627
> 
> 标签：playframework, playframework-2.0

我刚刚开始尝试使用 play 框架，并尝试了解您在创建新项目时获得的这个默认应用程序。

`Application.index()`据我了解，在加载 localhost 页面时，由于路由文件中的规范，一个 http get 请求进入并被定向到该方法？在该`index()`方法中，会生成大量 HTML 代码并在 Result 对象中返回并传递给文件，该`index.scala.html`文件将其交给`main.scala.html`被更多 html 包围的地方。

现在，我不清楚一些事情：

*   在`Application.java`里面有这条线`return ok(index.render("Hello World!"));` 索引属于`views.html.*`；但是这个包裹在哪里？我在 API 中找不到它:(

*   为什么我不能重命名`index.scala.html`文件？这个名字是约定俗成的吗？

*   在`index.scala.html`文件本身中：`@play20.welcome(message, style = "Java")`做什么？这是在获得“欢迎玩 2.0”网站吗？再一次 - 我找不到 play20 的文档/API 条目:(

我希望有人能帮我大致了解一下，因为我现在真的很困惑..^^我做了很多java，但根本没有网络编程，因此所有不同技术和语言的混合是此刻很奇怪！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T12:10:04.160

在[TodoList 示例](https://github.com/playframework/Play20/wiki/JavaTodoList)中，站点根目录`GET /`映射到方法`Application.index()`，因此该方法创建您所看到的 html。

控制器所做的一切都发生在这一行：`return ok(index.render("Hello World!"));`. 基本上它会调用一些生成 html 并返回输出的模板。

*   `return ok( ... )`用于表示请求成功，返回码200。
*   `index.render( ... )`返回名为`index`. 这里使用的包是`views.html.*`，但它实际上是指`views/index.scala.html`. 所以该`index`部分没有约定，您可以根据需要重命名该部分。模板需要先编译，然后才能像 Java 类一样使用，这就是包名称不同的原因。框架会处理这个问题。
*   `"Hello World!"`是参数，在第一行指定为*消息参数*`index.scala.html`
*   `@play20.welcome( ... )`只需调用另一个模板，即框架中包含的[欢迎页面。](https://github.com/playframework/Play20/blob/master/framework/src/play/src/main/scala/views/play20/welcome.scala.html)这不是要更改的主题 - 它只是静态页面，从视图中删除该行后，您可以放置​​任何您想要的 HTML。

# c# - 将 EntityObjects 用作模型 (MVC) 是一种好习惯吗？

> ID：12838666
> 
> 赞同：12
> 
> 时间：2012-10-11T11:38:36.540
> 
> 标签：c#, asp.net-mvc, entity-framework, asp.net-mvc-4, entity-framework-5

我正在使用 Entity Framework 5 构建我的第一个 MVC 4/Razor Web 应用程序，并在做出任何设计决策之前做一些功课。

我看到 EF 对象来自[`EntityObject`](http://msdn.microsoft.com/query/dev11.query?appId=Dev11IDEF1&l=EN-US&k=k%28System.Data.Objects.DataClasses.EntityObject%29;k%28TargetFrameworkMoniker-.NETFramework,Version=v4.5%29;k%28DevLang-csharp%29&rd=true)，它似乎有很多有用的最佳实践东西构建它，尤其是乐观并发处理。换句话说，如果两个人同时加载 123 Maple Street 的 Jane Doe 的记录，第一个将她的名字更改为 Jane Smith，第二个将她的地址更改为 321 Maple Street，那么很容易让两个更改合并没有冲突的情况下进入记录，而第二个用户尝试修改与第一个用户相同的字段将导致错误。

另一方面，创建轻量级[数据传输对象](http://en.wikipedia.org/wiki/Data_transfer_object)以在服务器和客户端之间传递数据并用作 MVC 框架的模型或在 MVC 框架中充当模型似乎是相当标准的做法。这对于确保客户端的最小流量非常有用，但它会破坏并发检查。

所以我质疑使用 DTO 的理由。使用 DTO 的原因是什么？在 MVC 模型中使用`EntityObject`as 或在 MVC 模型中使用有多糟糕？如上所述，您会提出什么其他解决方案来启用乐观并发处理？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-11T13:39:32.033

=发表评论作为答案=

EF 对象自几个版本以来就是 POCO（不确定是哪个版本）。如果你想要一个“EntityObject”，你必须使用某种适配器（我相信有一个适配器可以促进应用程序迁移，但我不建议将它用作新项目的一部分）。

如果您的模型类具有与 EF 相关的方法，那么这样做真的很糟糕。但 EF 5 不应该。我相信从 4.1 开始，他们使用 Proxies 而不是扩展 EntityObject 正是出于这个原因 - 将它们用作模型是一种很好的做法。

只需查看您的 .tt 和生成的 .cs 文件。它们是普通的 POCO。没有接口，没有基类。如果您从实体框架中获取一个对象并检查该对象的类型，您会发现类似`System.Data.Entity.DynamicProxies.Employee_5E43C6C196[...]`. 这是代理生成的类。但是，如果您执行完全相同的操作，但在 ( `dbContext.Configuration.ProxyCreationEnabled = false;`) 之前更改了数据库上下文配置，那么您已经为自己赢得了一个不错的 Employee 实体！

因此，要回答原始问题，将 EF POCO 用作模型是完全可以接受/良好的做法，但请确保将它们用作非持久对象。

**附加信息**

您应该考虑 DDD 概念和 DDD 兼容模式的实现，例如存储库或任何您觉得可以使用的东西。

您永远不应该在视图中直接使用这些实体，无论是持久的还是非持久的。

您应该阅读 AutoMapper 以使您的生活更轻松（与存储库或独立的很好地配合）。它将促进从 ProxyEmployee -> Employee -> ViewModel 的转移，反之亦然。

EF 实体的**可怕**用法示例：

```
return View(dbContext.employees.First()); 
```

EF 实体的**错误 #1**用法示例：

```
Employee e = dbContext.employees.First();
return View(new Employee { name = e.name, [...] }); 
```

EF 实体的**错误 #2**用法示例：

```
Employee e = dbContext.employees.First();
return View(new EmployeeViewModel{ employee = e }); 
```

EF 实体的**正确**用法示例：

```
Employee dbEmploye = dbContext.employees.First();
Employee e = new Employee { name = dbEmploye.name, [...] };
return View(new EmployeeViewModel { employee = e }); 
```

**良好**使用 EF 实体的示例：

```
Employee e = dbContext.employees.First();
EmployeeViewModel evm = Mapper.Map<Employee, EmployeeViewModel>(e);
return View(evm); 
```

EF 实体的**绝妙**用法示例：

```
Employee e = employeRepository.GetFirstEmployee();
EmployeeViewModel evm = Mapper.Map<Employee, EmployeeViewModel>(e);
return View(evm); 
```

**Chuck Norris**是如何做到的：

```
return View(EmployeeViewModel.Build(employeRepository.GetFirstEmployee())); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-11T11:46:17.127

`EntityObject`直接将 an 传递给视图时，我只看到坏点：

*   您需要手动添加白名单或黑名单，以防止[过度发布和批量分配](http://odetocode.com/blogs/scott/archive/2012/03/11/complete-guide-to-mass-assignment-in-asp-net-mvc.aspx)
*   很容易不小心从视图中延迟加载额外数据，导致选择 N+1 问题
*   在我个人看来，模型应该与视图上显示的信息非常相似，并且在大多数情况下（基本的 CRUD 内容除外），视图包含来自多个`EntityObject`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-11T11:46:33.560

```
On the other hand, it seems pretty standard practice to create lightweight Data Transfer Objects to pass data between the server and the client, and which serve as or in models for the MVC framework. This is great for ensuring minimal traffic to the client, but it screws up concurrency checking 
```

在这里，您似乎在谈论通过网络流向浏览器的内容。从这个意义上说，即使您在控制器中使用 EntityObject 类，数据仍然必须呈现给客户端并以更基本的形式回传。因此，一旦您在客户端上，任何并发支持都不是真正相关的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-11T11:45:38.357

Dtos 有几个优点，但取决于您的计划。

如果您将它们设计为扁平的，那么它们对于以下情况会更好、更容易：

*   **映射**到视图模型
*   **将这些 dto 对象缓存**为您的域对象可能有一个大图并且不适合放入缓存。Dtos 可以为您提供关于缓存内容和方式的良好粒度
*   **简化**api 签名并防止代理对象意外延迟加载
*   **通过网络发送数据**，阅读关于[剥离器模式的信息](http://ayende.com/blog/4011/the-stripper-pattern)

但是，如果您不需要任何这些，那么您可能就不需要了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-11T12:41:15.773

基于到目前为止的所有答案似乎都表明：

*   将 s推`EntityObject`送到客户端是一种不好的做法，主要原因是您冒着意外延迟加载大量相关数据的风险
*   DTO 破坏了您进行乐观并发检查的能力

我将提供我自己的解决方案，并邀请您评论您是否认为这是一个好主意。

我们没有将一个普通的 DTO 传递给客户端，而是创建一个抽象`GenericDTO<T>`类，其中`T`表示一个`EntityObject`. 我们还创建了一个`GenericDTOProperty<T>`类，它有两个属性：

```
public class GenericDTOProperty<T> {
  public T LoadValue { get; internal set; }
  public T Value { get; set; }
} 
```

现在，假设我有一个`EntityObject`名为“客户”，具有“ID”和“名称”的属性。我会像这样创建一个 DTO 类：

```
public class CustomerDTO : GenericDTO<Customer> {
  public GenericDTOProperty<int> ID;
  public GenericDTOProperty<string> Name;
} 
```

在这里不涉及太多推测性代码，我将在类中封装代码，该类`GenericDTO`使用反射将值复制到. 如果您确定每个表都有一个 ID 字段，您可以更聪明地将属性放在基类中。`EntityObject``LoadValue``ID`

这看起来像是一个合理的模式吗？看起来很简单——几乎太简单了……这让我担心它可能有问题，否则它实际上应该是框架的一部分？

# c# - 从代码中动态设置成员的连接字符串

> ID：12838669
> 
> 赞同：6
> 
> 时间：2012-10-11T11:38:49.933
> 
> 标签：c#, connection-string, membership

我有一个 .net Web 应用程序，它使用会员资格进行用户验证。成员资格在 web.config 文件中有一个定义，并引用文件（web.config）中的连接字符串，我需要从代码中动态设置成员资格的连接字符串，而不是在 web.config 中是静态的。

我怎样才能做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T12:20:44.580

以下 C# 示例代码演示了 Jacques L. Chereau 如何以编程方式[配置](http://www.blogger.com/profile/03733988177982708738)[.NET 成员资格提供程序](http://jlchereau.blogspot.co.uk/2008/11/how-to-configure-membership-provider.html)。此代码要求您还[配置一个](http://jlchereau.blogspot.co.uk/2008/11/how-to-create-connection-string.html)名为的连接字符串`MyDatabase`

```
NameValueCollection objConfig = new NameValueCollection();
objConfig.Add("connectionStringName", "MyDatabase");
objConfig.Add("enablePasswordRetrieval", "false");
objConfig.Add("enablePasswordReset", "true");
objConfig.Add("requiresQuestionAndAnswer", "true");
objConfig.Add("applicationName", "MyApp");
objConfig.Add("requiresUniqueEmail", "true");
objConfig.Add("maxInvalidPasswordAttempts", "5");
objConfig.Add("passwordAttemptWindow", "10");
objConfig.Add("commandTimeout", "30");
objConfig.Add("passwordFormat", "Hashed");
objConfig.Add("name", "AspNetSqlMembershipProvider");
objConfig.Add("minRequiredPasswordLength", "8");
objConfig.Add("minRequiredNonalphanumericCharacters", "2");
objConfig.Add("passwordStrengthRegularExpression", "(?=^.{8,25}$)(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$%^&*()_+}{\\":;'?/>.<,])(?!.*\\s).*$"));

SqlMembershipProvider objSqlMembershipProvider = new SqlMembershipProvider();
objSqlMembershipProvider.Initialize(objConfig["name"], objConfig);
MembershipProviderCollection colMembershipProviders = new MembershipProviderCollection();
colMembershipProviders.Add(objSqlMembershipProvider);
colMembershipProviders.SetReadOnly();

BindingFlags enuBindingFlags = BindingFlags.NonPublic | BindingFlags.Static;
Type objMembershipType = typeof(Membership);
objMembershipType.GetField("s_Initialized", enuBindingFlags).SetValue(null, true);
objMembershipType.GetField("s_InitializeException", enuBindingFlags).SetValue(null, null);
objMembershipType.GetField("s_HashAlgorithmType", enuBindingFlags).SetValue(null, "SHA1");
objMembershipType.GetField("s_HashAlgorithmFromConfig", enuBindingFlags).SetValue(null, false);
objMembershipType.GetField("s_UserIsOnlineTimeWindow", enuBindingFlags).SetValue(null, 15);
objMembershipType.GetField("s_Provider", enuBindingFlags).SetValue(null, objSqlMembershipProvider);
objMembershipType.GetField("s_Providers", enuBindingFlags).SetValue(null, colMembershipProviders); 
```

假设您有以下库引用：

```
using System.Web.Security;
using System.Collections.Specialized;
using System.Reflection; 
```

**编辑：**

此方法在请求的生命周期中尽早设置成员资格提供程序中的连接字符串

```
private void SetMembershipProviderConnectionString(string connectionString)
{
   // Set private property of Membership. Untested code!!
   var connectionStringField = Membership.Provider.GetType().GetField("_sqlConnectionString", BindingFlags.Instance | BindingFlags.NonPublic);
   if (connectionStringField != null)
      connectionStringField.SetValue(Membership.Provider, connectionString);

} 
```

未经测试，但从 Global.asax.cs 内部调用此方法可以`Application_PreRequestHandlerExecute`完成这项工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-03T20:27:37.497

有一个更简单的解决方案。

1.  创建一个扩展 SqlMembershipProvider 类的子类。
2.  覆盖初始化方法
3.  设置 connectionString 属性 config["connectionString"]
4.  让 base.Initialize 逻辑继续
5.  在 web.config 文件中，使用您的自定义类，而不是 SqlMembershipProvider。（如果你给它一个不同的名字，请确保将 defaultProvider 属性设置为匹配）

# asp.net - 将 FB 帐户与我网站上的帐户连接以直接登录

> ID：12838670
> 
> 赞同：0
> 
> 时间：2012-10-11T11:38:51.177
> 
> 标签：asp.net, facebook

这里的场景是：

任何浏览器，用户已经登录到他的 Facebook 帐户（比如浏览器标签号 1）。相同的浏览器，标签号 2，用户访问我的网站（他已经使用他的 Facebook 帐户注册到我的网站，因为我存储了他的 Facebook ID）。在他访问我的网站主页时，他已经登录了我的网站，尽管他只登录了 Facebook，但从未访问过我的网站并点击了登录按钮）。如何在 asp.net 中启用此功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T22:45:30.623

假设您的数据库中有一个 users 表，其中包含：

```
UserID, UserName, UserEmail, UserPassword 
```

当用户在没有 facebook 的情况下在您的网站上注册时，您会在 users 表中创建一个新条目。

对于 facebook 功能，您需要修改 users 表：

```
UserID, UserName, UserEmail, UserPassword, UserFacebookID 
```

当用户使用 facebook 登录时，您会得到他的**{facebook id}**和**{facebook email}**。

如果数据库中已经有一个具有当前**{facebook id}**的用户，您知道他是注册用户并让他登录。

如果没有，那么这是用户第一次使用 facebook 登录，您必须检查您的数据库中是否有匹配的电子邮件：

```
if({facebook email} is in users table)
{
     update users table, set UserFacebookID = {facebook id}
}
else
{
     create a new user in users table
} 
```

我目前在一家网络机构工作，这基本上就是我们为 Facebook Connect 所做的工作。希望这可以帮助。

库：[Facebook C# SDK](http://csharpsdk.org/)。

# haskell - 带有列表的haskell foldr操作

> ID：12838675
> 
> 赞同：0
> 
> 时间：2012-10-11T11:39:11.050
> 
> 标签：haskell, fold

给定一个负数和正数序列的列表，如何使用 foldr 将它们划分为负数和正数序列？

例如 [1,2,3,-1,-2,-3,1,2,3] 我会得到 [[1,2,3],[-1,-2,-3],[1, 2,3]]

几个疑惑

我怎么知道我已经比较过的前一个分区与我现在比较的分区的符号相同？

如何将元素添加到列表中？我尝试了类似 [x]:y 的方法，但我得到的是每个元素作为一个列表并连接在一起，这不是结果。

我目前拥有的是这个

```
foldr (\ x y -> if  x >= 0  then [x]:y else y ) [[]] 
```

这是错误的

非常感谢您提前提供的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T16:28:23.243

我支持的用法`groupBy`。但是，我想提出一点，即 0 在数学中不被视为正数。并且到目前为止没有其他答案提到，任何属于类型类的东西都`Num`必须实现`signum`，这将返回给它的数字的符号。

```
import Data.List     (groupBy)
import Data.Function (on) -- Can evade a lambda

signGroup :: (Num a) => [a] -> [[a]]
signGroup = groupBy ((==) `on` signum) 
```

示例用法：

```
> signGroup [1,2,3,0,0,-1,-2,1,2,0,3,4,-1]
[[1,2,3],[0,0],[-1,-2],[1,2],[0],[3,4],[-1]] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T11:52:36.020

您想将列表中每个数字的符号与其后继数字的符号进行比较。如果符号相同，则要放入`x`与其后继者相同的列表，否则启动一个新的内部列表。

所以

```
combine x [[]] = [[x]]
combine x wss@(yys@(y:_):zss)
  | sameSign x y = (x:yys) : zss
  | otherwise    = [x] : wss 
```

会做你想做的（给定的实现`sameSign`）。但这不会很有效（并且根本不适用于无限列表），因为要知道要使用哪个方程，`x`需要构造之后的部分，这意味着必须首先到达输入列表的末尾，然后是必须退后一步。

解决方案是懒惰，您必须在检查第二个参数之前开始构造结果

```
combine x wss = (x:ssx) : rest
  where
    (ssx:rest) = case wss of
                   [[]] -> [] : []
                   (yys@(y:ys) : zss)
                       | sameSign x y -> yys : zss
                       | otherwise    -> [] : wss 
```

然后

```
foldr combine [[]] input 
```

是你想要的，例如，

```
sameSign x y
    | x < 0     = y < 0
    | otherwise = y >= 0 
```

（当然，使用`groupBy`更短更容易，但这不使用`foldr`:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T23:18:54.363

你需要一个稍微复杂一点的累加器：

```
data Sign = Neg | Zero | Pos

signGroup :: [Integer] -> [[Integer]]
signGroup xs = case
  foldr
  (\x (sign, ps, ns, ys) ->
    -- x    - current element
    -- sign - sign of the prev. group
    -- ps   - positive numbers in the current group
    -- ns   - negative numbers in the current group
    -- ys   - final list
    if x >= 0
    then case sign of
      Neg  -> (Pos, x : ps, [], ns : ys)
      Zero -> (Pos, x : ps, [], ys)
      Pos  -> (Pos, x : ps, [], ys)
    else case sign of
      Neg  -> (Neg, [], x : ns, ys)
      Zero -> (Neg, [], x : ns, ys)
      Pos  -> (Neg, [], x : ns, ps : ys))
  (Zero, [], [], [])
  xs
 of
    (_, [], [], ys) -> ys
    (_, [], ns, ys) -> ns : ys
    (_, ps, [], ys) -> ps : ys
    (_, ps, ns, ys) -> ps : ns : ys -- <- unreachable

-- signGroup [1,2,3,-1,-2,-3,1,2,3]
-- => [[1,2,3],[-1,-2,-3],[1,2,3]] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T13:38:51.533

我将使用 foldr 提供可能的答案。我并不是说你应该使用它，因为它既不是很有效（我使用 a*b >=0 来表明 a 和 b 具有相同的符号），也不适用于无限列表。

```
combine = foldr f []
    where
        f a [] = [[a]]
        f a rest@((x:xs):ys) | x*a >= 0 = (a:x:xs):ys
                             | otherwise = [a]:rest 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-11T11:52:06.027

使用最好的工具来完成这项工作。在这种情况下，最适合这项工作的工具是[`groupBy`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Data-List.html#v%3agroupBy).

`groupBy`将列表的两个成员传递给您的函数，因此您可以轻松检查它们是否具有相同的符号。

（`foldr`如果你真的想写的话，你可以用 --- 你`groupBy`可以`foldr`用

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-11T11:52:24.400

`groupBy`您可以使用例如from得到想要的结果`Data.List`。

```
import Data.List (groupBy)
let result = groupBy (\ x y -> x*y>0) [1,2,3,-1,-2,-3,1,2,3] 
```

如果您不想`0`单独处理，请使用例如 Daniel Fischer 的`sameSign`函数来代替检查。

# intellij-idea - 如何在 IDEA 中打开服务器日志详细信息？

> ID：12838684
> 
> 赞同：1
> 
> 时间：2012-10-11T11:39:33.570
> 
> 标签：intellij-idea

如何在 IDEA 中打开服务器日志详细信息？启动服务器时，里面有 RUN 工具窗口和“部署”和“输出”窗口。如何打开服务器日志？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T15:16:51.763

日志在运行/调试配置中配置[。](http://img443.imageshack.us/img443/7282/20121011154144.png)可以根据[JBoss 文档](http://docs.jboss.org/process-guide/en/html/logging.html)更改日志记录级别。

# javascript - 敲除数据绑定到 IE7/8 中的定义列表

> ID：12838690
> 
> 赞同：0
> 
> 时间：2012-10-11T11:40:02.110
> 
> 标签：javascript, html, knockout.js

Internet Explorer 再次来袭！在 IE7 和 8 中，敲除无法绑定到定义列表。如果我使用与下面相同的代码但将其更改为无序列表，那么一切都会变魔术。Unfortunatley UX 团队说我应该使用定义列表，所以不确定在这里做什么？有什么想法吗？

```
<ul data-bind="foreach: geofences">
    <li class="geofenceData">
        <h3 data-bind="text: Alias, click: $root.selectGeofence"></h3>
        <div class="holder" >
                <dl class="datalist">
                    <dt>@LanguageResources.Geofence.Name.Text</dt>
                    <dd><span  data-bind="text: Alias"/></dd> 

                    <dt>@LanguageResources.Geofence.IsPrimary.Text:</dt>
                    <dd><span  data-bind="text: IsPrimary"/></dd> 
                 </dl>
         </div>
    </li>
 </ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T13:18:10.737

您需要将`<span />`标签替换为`<span></span>`.

# extjs - Extjs htmleditor 增长以适应其值的内容

> ID：12838705
> 
> 赞同：0
> 
> 时间：2012-10-11T11:40:59.080
> 
> 标签：extjs, extjs4.1, html-editor

如何在没有滚动条的情况下使用它的内容值来增长 extjs htmleditor（就像 extjs textArea 增长一样。）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T12:08:35.113

使用[shrinkWrap](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.field.HtmlEditor-cfg-shrinkWrap)配置。

*如果该属性是数字，则解释如下：

0：宽度和高度都不取决于内容。这相当于假。
1：宽度取决于内容（收缩包装），但高度不。
2：高度取决于内容（收缩包装），但宽度不。默认。
3：宽度和高度都取决于内容（收缩包装）。这等价于真。
在 CSS 术语中，shrink-wrap 宽度类似于 inline-block 元素，而不是块级元素。一些容器布局总是收缩包装他们的孩子，有效地忽略了这个属性（例如，Ext.layout.container.HBox、Ext.layout.container.VBox、Ext.layout.component.Dock）。默认为：2*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-31T22:20:28.340

这应该这样做：

```
Ext.application({

    name: 'Fiddle',

    launch: function() {
        new Ext.form.field.HtmlEditor({
            renderTo: document.body,
            height: 22,
            width: 300,
            defaultValue: '',
            listeners: {
                initialize: function(field) {
                    var body = field.getEditorBody();
                    body.style.overflow = 'hidden';
                    Ext.DomHelper.applyStyles(body, {
                        'word-wrap': 'break-word'
                    });
                    this.getToolbar().hide();
                },
                change: function(field) {
                    var body = field.getEditorBody();
                    field.setHeight(body.offsetHeight);
                }
            }
        })
    }
}); 
```

煎茶小提琴：[https ://fiddle.sencha.com/#view/editor&fiddle/271j](https://fiddle.sencha.com/#view/editor&fiddle/271j)

# iphone - 计算 imagepickerdidFinishPickingMediaWithInfo 中的视频大小（以字节为单位）

> ID：12838715
> 
> 赞同：2
> 
> 时间：2012-10-11T11:41:22.840
> 
> 标签：iphone, ios, uiimagepickercontroller

我们可以计算用户录制或用户从图像选择器委托中保存的图像文件夹中选择的视频的大小（以字节为单位）吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T12:49:36.140

您可以从 NSData 对象轻松读取字节大小。所以你唯一需要做的就是从你的视频 url 创建一个 NSData 对象。

像这样：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {
    [picker dismissViewControllerAnimated:YES completion:nil];

    NSURL *imageURL = [info valueForKey:UIImagePickerControllerMediaURL];
    NSData *data = [NSData dataWithContentsOfURL:imageURL];
    NSLog(@"Total bytes %d", [data length]);
} 
```

迅速：

```
func imagePickerController(picker: UIImagePickerController, didFinishPickingMediaWithInfo info: [String : AnyObject]) {
    picker.dismissViewControllerAnimated(true, completion: nil)

    let imageUrl = info[UIImagePickerControllerMediaURL]
    let data = NSData(contentsOfURL: imageUrl)
    print("Total bytes \(data.length)")
} 
```

# c# - ASP：来自具有许多系列的数据表的图表

> ID：12838720
> 
> 赞同：1
> 
> 时间：2012-10-11T11:41:46.040
> 
> 标签：c#, mschart

这是图表当前的样子：

![示例图](../Images/5c15b77127e86c0388c631453ed6aa58.png)

这是我从中获取数据的一些数据表：

```
CountElem   userid  AddedDate
1433        1   2012-10-08
1327        1   2012-10-09
1514        1   2012-10-10
793         1   2012-10-11
219         6   2012-08-12
249         6   2012-08-13
289         6   2012-08-14
319         6   2012-08-15
233         6   2012-08-16 
```

发生的情况是它为一个系列中的所有用户标识绘制所有 CountElem 和 AdditionalDate，而不是为它自己的系列中的每个用户标识绘制每个 CountElem 和 AdditionalDate。

这是我的代码：

```
 mainChart.DataSource = dataTable;
        foreach (DataRow dataRow in users.Rows)
        {
            Series s = new Series("Userid_" + dataRow["userid"]);
            s.ChartType = SeriesChartType.Spline;

            if (colors.Length == i)
                i = 0;
            s.Color = colors[i];

            s.XValueMember = "AddedDate";
            s.YValueMembers = "CountElements";

            mainChart.Series.Add(s);
            i++;
        } 
```

我无法弄清楚如何“拆分”该系列的问题。它绘制每个系列中的所有数据，然后在系列的每个开始和停止之间产生线条。

有没有办法定义每个系列只为一个用户标识绘制？

我想为每个系列提供一个数据表。但我不知道如何做到这一点，我不相信这是它设计的工作方式......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T12:17:31.373

您可以尝试将您的系列与过滤的 DataRow 集绑定，如下所示（未经测试，对任何语法错误表示抱歉）：

```
 foreach (DataRow dataRow in users.Rows)
    {
        Series s = new Series("Userid_" + dataRow["userid"]);
        s.ChartType = SeriesChartType.Spline;

        s.Color = colors[i % colors.Count()];

        var userRows = dataTable.Rows.Cast<DataRow>().Select(r=>r["userid"]==dataRow["userid"]).ToArray();

        s.Points.DataBindXY(userRows,"AddedDate",userRows,"CountElements");

        mainChart.Series.Add(s);
        i++;
    } 
```

无论如何，请注意，除非您的所有系列都对齐（即：共享完全相同的 x 值集），否则图表引擎将完全搞砸缺少 x 值。您可能必须用空点填充缺失的 x 值。

希望这会有所帮助

# c# - 如何检索可执行文件的相对路径

> ID：12838726
> 
> 赞同：1
> 
> 时间：2012-10-11T11:41:57.143
> 
> 标签：c#, c++, windows, path

> **可能重复：**
> [如何在 Windows（C++ Win32 或 C++/CLI）中获取应用程序可执行文件名称？](https://stackoverflow.com/questions/124886/how-to-get-the-application-executable-name-in-windows-c-win32-or-c-cli)
> [提取当前可执行文件名](https://stackoverflow.com/questions/10572560/extracting-the-current-executable-name)

我需要使用 C++ 获取可执行文件目录的相对路径。我使用 C# 完成了相同的程序，效果很好。

```
System.IO.Path.GetDirectoryName(System.Windows.Forms.Application.ExecutablePath) 
```

我想使用 C++ 得到类似的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T11:54:20.030

使用 boost::filesystem

```
#include <iostream>
#include <boost/filesystem.hpp>
using namespace std;
using namespace boost::filesystem;

int main(int argc, char * argv[])
{
    path p(argv[0]);

    cout << p.parent_path() << endl;

    return 0;
} 
```

# c# - Parallel.For 属性

> ID：12838728
> 
> 赞同：3
> 
> 时间：2012-10-11T11:42:24.467
> 
> 标签：c#, multithreading, task-parallel-library

```
public static void Main (string[] args)
        {
            int k = 0;
            int i = 3;
            var loopRes = Parallel.For (0, 20, (J) =>
            {
                k = i / J;
                Console.WriteLine ("Result After division " + J + " = " + k);
            }
            );

            if (loopRes.IsCompleted) {
                Console.WriteLine ("Loop was successful");
            }
            if (loopRes.LowestBreakIteration.HasValue) {
                Console.WriteLine ("loopRes.LowestBreakIteration.Value = " + loopRes.LowestBreakIteration.Value);
            }
        } 
```

截至我在互联网上阅读时，我可以找到 Parallel.For 和 Parallel.Foreach 的 2 个属性

1.  完成了
2.  最低中断迭代

对我来说，第一个属性工作正常。但是当涉及到 3/0 的情况时，它会给出除以零的错误。所以第二个 if 循环应该给我 LowestBreakIteration 的数量，但它会引发错误。如果有人遇到同样的问题并解决了，请告诉我！！

还请解释这两个属性的主要目的是什么。在什么情况下会有帮助。

希望很快能听到一些人的消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T11:51:19.657

这是因为它抛出了一个异常，改变你的循环只是一点点：

```
public static void Main (string[] args) 
{ 
    int k = 0; 
    int i = 3; 
    var loopRes = Parallel.For (0, 20, (J, loopState) => 
    { 
        try { k = i / J; }
        catch { loopState.Break(); }
        Console.WriteLine ("Result After division " + J + " = " + k); 
    } 
    ); 

    if (loopRes.IsCompleted) { 
        Console.WriteLine ("Loop was successful"); 
    } 
    if (loopRes.LowestBreakIteration.HasValue) { 
        Console.WriteLine ("loopRes.LowestBreakIteration.Value = " + loopRes.LowestBreakIteration.Value); 
    } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T11:51:13.370

您可以通过查看 ParallelLoopState 对象的 LowestBreakIteration 属性来了解对 Break 方法的调用如何影响最大迭代次数，如下所示：

```
Parallel.For(1, 20, (i, pls) =>
{
    Console.WriteLine(string.Format(
        "i={0} LowestBreakIteration={1}", i, pls.LowestBreakIteration));
    if (i >= 15)
    {
        pls.Break();
    }
});

/* OUTPUT

i=10 LowestBreakIteration=
i=11 LowestBreakIteration=
i=19 LowestBreakIteration=
i=1 LowestBreakIteration=
i=2 LowestBreakIteration=19
i=3 LowestBreakIteration=19
i=6 LowestBreakIteration=19
i=7 LowestBreakIteration=19
i=8 LowestBreakIteration=19
i=9 LowestBreakIteration=19
i=12 LowestBreakIteration=19
i=13 LowestBreakIteration=19
i=14 LowestBreakIteration=19
i=15 LowestBreakIteration=19
i=4 LowestBreakIteration=19
i=5 LowestBreakIteration=15

*/ 
```

参考： http: [//www.blackwasp.co.uk/ParallelLoopBreak_2.aspx](http://www.blackwasp.co.uk/ParallelLoopBreak_2.aspx)

# php - 多维数组array_sum

> ID：12838729
> 
> 赞同：22
> 
> 时间：2012-10-11T11:42:30.357
> 
> 标签：php, arrays, array-sum

我已经看到关于这个问题的各种帖子，所以我知道可能存在一些答案。然而，在阅读了这些之后，我并没有变得更聪明。

我有一个如下所示的数组。

```
[0] => Array
    (
        [id] => 95659865986
        [invoiceNumber] => 6374324
        [invoiceTitle] => Monthly
        [invoiceStatus] => Paid
        [accountId] => 6235218753
        [totalExVat] => 158.95
        [dateCreated] => 1 Apr 2012
        [vatAmount] => 20.00
    ) 
```

我想做的就是`vatAmount`对这个数组的值进行数组求和。

由于以下似乎没有做太多。

```
(array_sum($account_invoices['vatAmount']) 
```

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2014-08-29T00:39:10.373

如果你有 PHP 5.5+，你可以在不循环或使用回调的情况下做到这一点（因为函数调用相对昂贵）......只需使用：

```
$sum = array_sum(array_column($account_invoices, 'vatAmount')); 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-10-11T11:50:46.157

我会使用 array_map 将数组减少到只需要的内容。请记住，这仅适用于 PHP 5.3 及更高版本。

```
$total_vat = array_sum( array_map(
                 function($element){
                     return $element['vatAmount'];
                 }, 
             $account_invoices)); 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-10-11T11:45:27.567

只是一种方法：

```
$sum = 0;

foreach($account_invoices as $num => $values) {
    $sum += $values[ 'vatAmount' ];
} 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-10-11T11:51:12.000

您可以使用`array_map`first 来收集`vatAmout`价值。

```
$sum = array_sum(array_map(function($var) {
  return $var['vatAmout'];
}, $account_invoices)); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-10-11T11:55:21.480

一种使用 PHP 5.3+ 匿名函数的方法

```
$account_invoices = array(
    0 => array(
        'id' => '95659865986',
        'invoiceNumber' => '6374324',
        'invoiceTitle' => 'Monthly',
        'invoiceStatus' => 'Paid',
        'accountId' => '6235218753',
        'totalExVat' => 158.95,
        'dateCreated' => '1 Apr 2012',
        'vatAmount' => 20.00
    ),
    1 => array(
        'id' => '95659865987',
        'invoiceNumber' => '6374325',
        'invoiceTitle' => 'Monthly',
        'invoiceStatus' => 'Paid',
        'accountId' => '6235218753',
        'totalExVat' => 208.95,
        'dateCreated' => '1 May 2012',
        'vatAmount' => 25.00
    ),
);

$sumDetail = 'vatAmount';
$totalVAT = array_reduce($account_invoices,
           function($runningTotal, $record) use($sumDetail) {
               $runningTotal += $record[$sumDetail];
               return $runningTotal;
           },
           0
);
echo $totalVAT; 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-03-06T17:05:55.683

您可以使用[`array_map()`](http://php.net/array_map)并首先选择`vatAmount`列来执行此操作：

```
$totalVatAmount = array_sum(array_map(function($account_invoices) { 
    return $account_invoices['vatAmount']; 
}, $account_invoices)); 
```

当然，这在内部执行了一个双循环；只是您在代码中看不到它。如果你使用[`array_reduce()`](http://php.net/array_reduce)那么你可以摆脱一个循环：

```
$totalVatAmount = array_reduce($account_invoices,
     function($totalAmount, $item) {
         $totalAmount += $item['vatAmount'];
            return $totalAmount;
     },
   0
); 
```

**但是，如果速度是唯一的兴趣，您应该使用`foreach`. 因为没有用于计算最终总和的函数调用。此解决方案比其他解决方案更快。**

```
$totalVatAmount = 0;
foreach ($account_invoices as $item) {
    $totalVatAmount += $item['vatAmount'];
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-11T11:49:57.920

您不能直接使用 来执行此操作`array_sum`，这会将数组中的所有内容相加。

你可以用一个循环来做到这一点：

```
$sum = 0;
foreach($items as $item)
    $sum += $item['vatAmount']; 
```

或者您可以过滤数组（在这种情况下**它不是很方便**，但是如果您必须从每个项目中计算 S&H 费用加上增值税加...，然后求和...）：

```
// Input: an array (element #n of array of arrays), output: VAT field
function getVAT($item)
{
    return $item['vatAmount'];
}

// Array with all VATs
$vats = array_map('getVAT', $items);

$sum = array_sum($vats); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-11T11:51:57.287

你也可以这样做（如果你喜欢 array_sum 函数）：

```
foreach($account_invoices as $num => $values) {
    $vatAmount[] = $values[ 'vatAmount' ];
}

$Total = array_sum($vatAmount); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-12-02T10:28:53.143

使用 array_reduce 的另一种方法：

```
$vatMount = array_reduce($account_invoices, function($total, $value) {
    return $total + $value['vatAmount'];
}); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-12-23T12:27:41.533

array_sum_multidimensional 辅助函数

```
if (!function_exists('array_sum_multidimensional')) {
    /**
     * returns the sum of a element from an array of arrays
     */

    function array_sum_multidimensional(array $array, $elementKey){

        $sum = 0;

        foreach($array as $key => $value) {
            $sum += $value[ $elementKey ];
        }

        return $sum;
    }
} 
```

# css - 在 chrome 中，在 一些或表现得像他们处于“内联有点绝对”的位置（你需要看图片）

> ID：12838734
> 
> 赞同：2
> 
> 时间：2012-10-11T11:43:03.730
> 
> 标签：css, webkit

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T16:12:31.690

好的，问题是关于 svg 字体的。

答案是：永远不要在 chrome 中使用 svg 字体！

# android - 从网站获取搜索结果并使用 KSOAP2 将其解析为 android 应用程序

> ID：12838736
> 
> 赞同：1
> 
> 时间：2012-10-11T11:43:13.883
> 
> 标签：android, ksoap2, android-ksoap2

我是安卓新手。我必须在 yahoo.com 上从我的 android 应用程序中查询搜索并将结果显示到应用程序中。我更喜欢使用 KSOAP2。请让我知道继续处理一些代码的过程。提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T11:46:48.347

对于某些示例，请尝试此**[Site](http://javatutorialspoint.blogspot.in/2012/02/android-web-service-access-using-ksoap2.html) & [Site](http://seesharpgears.blogspot.in/2010/11/basic-ksoap-android-tutorial.html) & [Site](http://www.helloandroid.com/tutorials/using-ksoap2-android-and-parsing-output-data)**。在这里，您将了解如何在您的 android 应用程序中使用**ksoap2 。**

# jsf-2 - JSF 可选旧值在清除它们后返回

> ID：12838740
> 
> 赞同：1
> 
> 时间：2012-10-11T11:43:19.043
> 
> 标签：jsf-2, primefaces, reset, optional, omnifaces

我正在使用 JSF、PrimeFaces 3.2、Omnifaces 1.1、JBoss AS 7.1.1、Final、Mojarra 2.1.7

我有一个表单，其中包含两个不需要的数字字段，如下所示：

```
<h:form>
    <p:inputText id="num1" value="#{bean.field1}"/>
    <p:inputText id="num2" value="#{bean.field2}"/>
<p:commandButton ... ajax="true" />
</h:form> 
```

我还在 faces-config 上设置了 OmniFaces ResetInputAjaxActionListener。

bean 属性 field1 和 field2 是整数。

现在的问题是，如果我在 num1 上输入 123，在 num2 上输入 345，然后单击 OK 就可以了。如果我然后从 num1 中删除 123 并将 abc 放在 num2 上。然后显示验证（转换）错误，但 123 又回来了！

如果我让它们都 required=true 那么一切都很好。

有没有办法让这个与可选字段一起工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T13:16:24.000

这是 Mojarra 的特定问题。绑定到 an 的字段被`Integer`隐式转换，`IntegerConverter`后者将提交的空字符串值转换为并将其`null`设置为组件的本地值。

当表单提交后重新显示时，JSF会先检查提交的值是否不为空，然后显示，如果本地值不为空，则显示，否则显示模型值。由于本地值为 null，因此改为显示模型值。这确实是不受欢迎的行为，并且已多次报告：

*   [第838期](http://java.net/jira/browse/JAVASERVERFACES-838)
*   [第 1582 期](http://java.net/jira/browse/JAVASERVERFACES-1582)

这可以通过覆盖来解决，`UIInput#getValue()`如下所示：

```
public Object getValue() {
    return isLocalValueSet() ? getLocalValue() : super.getValue();
} 
```

[MyFaces](http://svn.apache.org/repos/asf/myfaces/core/branches/refactor_shared_2_1_x/api/src/main/java/javax/faces/component/UIInput.java)已经做到了。我[再次重新报告](http://java.net/jira/browse/JAVASERVERFACES-2536)了这个问题，最终成为[规范问题 566](https://java.net/jira/browse/JAVASERVERFACES_SPEC_PUBLIC-566)（**更新**并最终在 Mojarra 2.2.0 中修复并向后移植到[2.1.21](http://grepcode.com/file/repo1.maven.org/maven2/org.glassfish/javax.faces/2.1.21/javax/faces/component/UIInput.java#UIInput.getValue%28%29)）。

同时，解决此问题的最简单方法，同时考虑到具有自己的渲染器（如 PrimeFaces）的 3rd 方组件库，是将`javax.faces.component.UIInput`类的源代码文件直接复制到项目的源文件夹中，然后添加所需的`UIInput#getValue()`方法。是的，一个笨拙的修复，但是没有更好的方法，因为问题的原因在 JSF API 本身很深。

OmniFaces`ResetInputAjaxActionListener`用于完全不同的目的，并且不适合/不适合解决此问题。*应该清除未*提交组件值的输入组件的状态，但组件本身在ajax中重新渲染。

# c# - RaiseCanExecuteChanged 延迟与 ContextMenu

> ID：12838745
> 
> 赞同：5
> 
> 时间：2012-10-11T11:43:34.553
> 
> 标签：c#, wpf, mvvm, contextmenu, prism

在我的 WPF 应用程序中，我有一种节点图。我已经`ContextMenu`向这些节点添加了一个，当我右键单击东西时​​会出现等等。

上下文菜单中的命令来自带有 的服务 ( `Microsoft.Practices.ServiceLocation.ServiceLocator`) `DelegateCommands`，并且这些命令使用 更新`RaiseCanExecuteChanged()`。被右键单击的节点被传递给这个命令服务，该服务用于`CanExecute`命令的各种方法中。

节点都有一些在这些条件下使用的属性，比如是否可以重命名或删除等。

```
 private void ContextMenu_ContextMenuOpening(object sender, RoutedEventArgs e) {
        ServiceLocator.Current.GetInstance<IMenuCommandService>().ReloadICommandConditions();
    } 
```

在 IMenuCommandService 中：

```
 public void ReloadICommandConditions() {
        ((DelegateCommand<Node>) MyCommand).RaiseCanExecuteChanged();
    } 
```

我的 ContextMenu （在`DataTrigger`&内`Setter`）：

```
<ContextMenu>
    <MenuItem Header="Rename"
              Command="{Binding MenuCommandService.Rename}"
              CommandParameter="{Binding Node}" />
    <MenuItem Header="Delete"
              Command="{Binding MenuCommandService.Delete}"
              CommandParameter="{Binding Node}" />
    ...
</ContextMenu> 
```

我的问题是，当我右键单击其中一个节点时，显示的上下文菜单看起来像是为**先前**选择的节点配置的。就像我右键单击一个可删除的节点，然后是一个不可删除的节点，上下文菜单上的“删除”命令仍然是可单击的。（如果我然后右键单击不可删除的节点，则上下文菜单将正确，并且“删除”命令显示为灰色。）

`RaiseCanExecuteChanged()`因此，从上下文菜单“拾取”之后所做的更改实际上存在某种延迟。我可以做一个粗略的修复，只在它们更新后才显示上下文菜单（即它们的`CanExecute`方法已被调用），但我想保持这两个部分相对分开。

Is there something obvious I'm missing, am I going about this in the wrong way, or does anyone have any other suggestions?

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T10:55:01.940

Sort-of-solved -- I'm now manually passing the node that was right-clicked on to my `MenuCommandService` through that `ReloadICommandConditions()` method, and it's holding a local reference to it, which it then uses instead of the parameter in its CanExecute() methods. Crude, but at least it works.

I'll keep this open for now in case anyone knows of a way that's a bit more... elegant.

# c# - 从 StreamSocket 读取时，DataReader 结果被截断

> ID：12838747
> 
> 赞同：2
> 
> 时间：2012-10-11T11:43:43.870
> 
> 标签：c#, sockets, windows-8, microsoft-metro, imap

我有以下 c#/WinRT 代码来接收来自 IMAP 命令的响应

```
DataReader reader = new DataReader(sock.InputStream);
reader.InputStreamOptions = InputStreamOptions.Partial;
await reader.LoadAsync(1000000);
string data = string.Empty;
while(reader.UnconsumedBufferLength > 0){
    data += reader.ReadString(reader.UnconsumedBufferLength);
} 
```

结果在 8192 字节后被截断。8192 看起来像是某种极限。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T15:02:29.203

正如我在博客中解释的那样[，TCP/IP 套接字的抽象是字节流，而不是消息流。](http://nitoprograms.blogspot.com/2009/04/message-framing.html)因此，`LoadAsync`在部分消息或任意数量的消息之后有部分返回是完全正常的。

8192 听起来可能是一个巨型帧（千兆以太网）。或者可能是某些 .NET 层的默认读取大小。

无论如何，您所看到的对于 TCP/IP 通信来说是完全正常且可以接受的。您必须循环`LoadAsync`(and `ReadString`) 直到您检测到消息的结尾。我认为 IMAP 使用换行符，至少对于它的*一些*消息分隔符。通常，您必须处理消息以字符串中间结尾的情况，但我*认为*也许可以跳过对 IMAP 的检查。

# c++ - 手动编写多线程循环 - 次优可扩展性

> ID：12838748
> 
> 赞同：3
> 
> 时间：2012-10-11T11:43:46.690
> 
> 标签：c++, multithreading, boost-thread, interlocked-increment

我编写了这个测试应用程序：它经历了从 0 到 9999 的迭代，对于范围内的每个整数，它都会计算一些无用但计算密集型的函数。结果，程序输出函数值的总和。为了让它在多个线程上运行，我使用了 InterlockedIncrement - 如果在增量之后迭代次数 <10000，那么一个线程处理这个迭代，否则它终止。

我想知道为什么它没有像我希望的那样缩放。使用 5 个线程，它运行 8 秒，而单线程运行 36 秒。这提供了约 4.5 的可扩展性。在我对 OpenMP 的实验中（在稍微不同的问题上），我得到了更好的可扩展性。

源代码如下所示。

我在 Phenom II X6 桌面上运行 Windows7 操作系统。不知道其他哪些参数可能是相关的。

你能帮我解释一下这种次优的可扩展性吗？非常感谢。

```
#include <boost/thread.hpp>
#include <boost/shared_ptr.hpp>
#include <boost/make_shared.hpp>
#include <vector>
#include <windows.h>
#include <iostream>
#include <cmath>

using namespace std;
using namespace boost;

struct sThreadData
{
  sThreadData() : iterCount(0), value( 0.0 ) {}
  unsigned iterCount;
  double value;
};

volatile LONG g_globalCounter;
const LONG g_maxIter = 10000;

void ThreadProc( shared_ptr<sThreadData> data )
{
  double threadValue = 0.0;
  unsigned threadCount = 0;

  while( true )
  {
    LONG iterIndex = InterlockedIncrement( &g_globalCounter );
    if( iterIndex >= g_maxIter )
      break;

    ++threadCount;

    double value = iterIndex * 0.12345777;
    for( unsigned i = 0; i < 100000; ++i )
      value = sqrt( value * log(1.0 + value) );

    threadValue += value;
  }

  data->value = threadValue;
  data->iterCount = threadCount;
}

int main()
{
  const unsigned threadCount = 1;

  vector< shared_ptr<sThreadData> > threadData;
  for( unsigned i = 0; i < threadCount; ++i )
    threadData.push_back( make_shared<sThreadData>() );

  g_globalCounter = 0;

  DWORD t1 = GetTickCount();
  vector< shared_ptr<thread> > threads;
  for( unsigned i = 0; i < threadCount; ++i )
    threads.push_back( make_shared<thread>( &ThreadProc, threadData[i] ) );

  double sum = 0.0;
  for( unsigned i = 0; i < threadData.size(); ++i )
  {
    threads[i]->join();
    sum += threadData[i]->value;
  }

  DWORD t2 = GetTickCount();
  cout << "T=" << static_cast<double>(t2 - t1) / 1000.0 << "s\n";

  cout << "Sum= " << sum << "\n";
  for( unsigned i = 0; i < threadData.size(); ++i )
    cout << threadData[i]->iterCount << "\n";

  return 0;
} 
```

编辑：附加此测试程序的示例输出（1 和 5 个线程）： ![在此处输入图像描述](../Images/1b0e0c2a623fff17ce4a3d431e57f6bf.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T10:01:09.160

事实证明，结果可以通过我的 CPU 支持[AMD Turbo Core](http://www.amd.com/us/products/desktop/processors/phenom-ii/Pages/phenom-ii-key-architectural-features.aspx)技术来解释。

> 在 Turbo CORE 模式下，AMD Phenom™ II X6 1090T 将频率速度从六核上的 3.2GHz 转移到三核上的 3.6GHz

所以单线程模式和多线程模式的时钟频率是不一样的。我习惯于在不支持 TurboCore 的 CPU 上玩多线程。下面是显示结果的图像

*   AMD OverDrive 实用程序窗口（允许打开/关闭 TurboCore 的东西）
*   在 TurboCore 开启的情况下运行 1 个线程
*   在 TurboCore 关闭的情况下运行 1 个线程
*   运行 5 个线程 ![在此处输入图像描述](../Images/b49e33dc7886fbc6c53083be19bb84c5.png)

非常感谢那些试图提供帮助的人。

# cocos2d-iphone - 如何为 Retina 显示创建平铺地图？

> ID：12838751
> 
> 赞同：1
> 
> 时间：2012-10-11T11:43:51.890
> 
> 标签：cocos2d-iphone

我已经使用 cocos2d-iphone 创建了一个基于平铺地图的游戏，它在 SD（iPad 1）中完美运行现在我想将它移植到视网膜显示器以在 iPhone 4 和 iPad 3 上工作，所以我创建了一个平铺地图，其平铺尺寸是SD 版本的地图并为图块使用了双源图像，但它在我的游戏中不起作用，当我在 iPhone 4 中运行游戏时，一切都搞砸了，没有任何行为符合预期。如何为 Retina 显示创建平铺地图？请帮我。我用谷歌搜索但没有发现任何有用的东西。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T13:30:30.493

[请参阅此问题](https://stackoverflow.com/questions/12837104/wrong-position-of-tile-map-when-i-convert-to-retina-display)中的屏幕截图，您需要更改图像名称、tileWidth 和 tile 高度、图像大小..就是这样。

然后你会得到视觉上很好的瓦片地图。一些物体位置问题。因为该解决方案与上述堆栈帖子相同。

# jquery - 覆盖 jQuery Mobile 的默认后退按钮行为，然后恢复它

> ID：12838752
> 
> 赞同：0
> 
> 时间：2012-10-11T11:43:55.363
> 
> 标签：jquery, web-applications, jquery-mobile

我的网站上有一个页面列出食谱，另一个页面详细说明了食谱。我想做的是将这两个页面合并为一个，当从列表中选择一个食谱时，让列表淡出并让食谱动画化。

当显示配方的详细信息时，我想覆盖后退按钮单击处理程序以动画出细节，并淡入配方列表。一旦该转换完成，我希望恢复 JQM 的默认后退按钮行为。

我可以很容易地管理列表和详细信息之间的转换，但是有谁知道我如何在不破坏站点其余部分的情况下使用后退按钮处理程序？

问候，

克里斯

**更新**

后退按钮是指浏览器的后退按钮，或 Android 设备上的硬件后退按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T11:52:50.203

您可以尝试捕获`touchstart`事件并`e.preventDefault()`在其上使用。

# svn - 在基础的准备脚本中添加文件，或者说，svn 的 start-commit 钩子？

> ID：12838755
> 
> 赞同：0
> 
> 时间：2012-10-11T11:43:58.227
> 
> 标签：svn, hook, cornerstone

我正在尝试在 Cornerstone 中添加一个钩子脚本，为每个要提交的二进制文件生成一个元文件，当然，尝试添加这些元文件来提交。

但是在这里我有问题将它们添加到提交列表中。

我看到了这个，但它是关于 TortoiseSVN: [Automatically add files to SVN inside a specific folder](https://stackoverflow.com/questions/5457410/automaticly-add-files-to-svn-inside-a-specific-folder)。他们的文档说 PATH 之类的东西，但我仍然不知道如何使用它。[http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-settings.html#tsvn-dug-settings-hooks](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-settings.html#tsvn-dug-settings-hooks)

基石[文档](http://www.zennaware.com/cornerstone/helpbook/pages/integration/commit-actions/pre-commit-scripts.html)说

```
Archiving documents as .zip files ready for commit in order to workaround issues with package-format documents placed under version control. 
```

但是“准备好提交”是否意味着添加 .zip 文件以提交还不是很清楚。

基本上我想知道，这可能吗？即使使用命令行svn？我还没有找到这种现成的脚本，将文件添加到列表中以在 start-commit 钩子中提交。真希望有人能在这里伸出援手。

提前致谢！

松树

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T18:26:45.537

Subversion 的客户端钩子/脚本没有标准，因此您编写的任何内容都将是特定于客户端的。TortoiseSVN 有一个钩子实现，Cornerstone 显然称它们为[Commit Actions](http://www.zennaware.com/cornerstone/helpbook/pages/integration/commit-actions/index.html)。

在命令行上，与 UNIX 传统保持一致，解决方案是围绕现有的客户端/客户端库编写一个包装器。

除非 Cornerstone（或您的网络管理工具）有某种方式将提交操作分发给所有客户端，否则您需要将它们分发给所有客户端，并通过预提交挂钩在服务器上添加保护措施，以验证您的元文件即将到来在适当的时候一起参与提交。无论如何你都应该这样做，因为你不能完全相信客户会做正确的事

# grails - 带有条件查询的 Grails BelongsTo

> ID：12838759
> 
> 赞同：1
> 
> 时间：2012-10-11T11:44:07.843
> 
> 标签：grails, constraints, conditional-statements, has-many, has-and-belongs-to-many

我有两个具有一对多关系的域类。我们称它们为 OneClass 和 ManyMetadataClass。

```
class OneClass {

    // ... some variables

    belongsTo = [version:ManyMetadataClass]

}

class ManyMetadataClass {

    String attribute
    int value

    hasMany = [
        OneClass,
        AnotherSimilarToOneClass,
        YetAnotherOneTypeClass
        // ...
    ]
} 
```

ManyMetadataClass 旨在存储许多不同域类的属性值对，类似于 OneClass。

如前所述，OneClass“belongsTo”即是与 ManyMetadataClass 的 1:m 关系中的 1。但是，只有 ManyMetadataClass 中具有特定属性值（attribute=versionControl）的行才与 OneClass 相关。

我的问题如下：有没有办法确保在域类级别只能从 OneClass 中选择具有属性 = versionControl 的 ManyMetadataClass 中的行？

提前致谢

一些观察：

*   我可以在控制器和视图级别实现这一点，但这涉及大量代码并且更难确保在 OneClass 中没有存储不正确的数据
*   我可以将 ManyMetadataClass 拆分为每个属性一个的单独表，但这会导致大量表使维护数据库更加乏味

# email - CakePHP Auth：如何对同一帐户上有多个电子邮件的电子邮件进行身份验证？

> ID：12838763
> 
> 赞同：0
> 
> 时间：2012-10-11T11:44:19.060
> 
> 标签：email, cakephp, authentication

我从 CakePHP 开始。我已经建立了一个用户表记录，`email`而不是`username`......问题是我不想为每个用户拥有，不是一个，而是很多电子邮件，这样他们就可以使用他们的任何电子邮件登录到同一个帐户，几乎就像 facebook做。

我的问题是，一旦 CakePHP 不允许我动态创建多个属性（请参阅[我之前的问题](https://stackoverflow.com/questions/12783059/how-to-configure-user-authentication-with-dynamic-user-attributes)），那么最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:29:07.203

您可能需要执行@Petar 回答的操作...以便为每个用户存储多封电子邮件。

要对用户进行身份验证，您可能需要创建一个[自定义身份验证对象](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html#creating-custom-authentication-objects)，您必须在其中创建一个 authenticate() 方法，该方法进行查询并在电子邮件密码正确时返回 true。

不要忘记在您的 AppController 中设置这个新的身份验证对象。它应该是这样的：

**应用控制器.php**

```
// Pass settings in $components array
public $components = array(
    'Auth' => array(
        'authenticate' => array(
            'MultipleEmails'
        )
    )
); 
```

**组件/Auth/MultipleEmailsAuthenticate.php**

```
class MultipleEmailsAuthenticate extends BaseAuthenticate {
    public function authenticate(CakeRequest $request, CakeResponse $response) {
        //make your query here and return true or false     
    } 
```

如果您想要一些关于如何编写 BaseAuthenticate 类的示例，您可以阅读源文件：[BaseAuthenticate](http://api20.cakephp.org/view_source/base-authenticate)和[FormAuthenticate](http://api20.cakephp.org/view_source/form-authenticate)。

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T12:06:10.293

我的建议是在您的数据库中设置两个表：

*   用户
*   USER_EMAILS

在您的 USERS 表中，您可以存储您想要的有关用户的任何信息：

*   ID
*   用户名
*   名称
*   名字
*   电话
*   ETC...

然后设置 USER_EMAILS 表以使用外键引用 USERS 表：

*   user_id（外键）
*   电子邮件

使“电子邮件”成为唯一索引以防止重复。

现在，每当您在 USER_EMAILS 表中查找电子邮件地址时（例如登录时），您将获得对您应该使用的 USER 的引用。

那有意义吗？

# java - 使用 JSch 将文件放入远程目录，如果该目录不存在，则创建它

> ID：12838767
> 
> 赞同：20
> 
> 时间：2012-10-11T11:44:31.150
> 
> 标签：java, sftp, jsch

我想使用 Jsch 库和 SFTP 协议将文件复制到远程目录。如果远程主机上的目录不存在，则创建它。

在 API 文档[http://epaul.github.com/jsch-documentation/javadoc/](http://epaul.github.com/jsch-documentation/javadoc/)中，我注意到在 put 方法中有一种“模式”，但它只是传输模式： **- 传输模式，恢复、附加、覆盖之一。**

有没有一种简单的方法可以做到这一点，而不必编写我自己的代码来检查是否存在，然后递归地创建一个目录？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-10-11T12:29:37.583

据我所知不是。我使用下面的代码来实现同样的事情：

```
String[] folders = path.split( "/" );
for ( String folder : folders ) {
    if ( folder.length() > 0 ) {
        try {
            sftp.cd( folder );
        }
        catch ( SftpException e ) {
            sftp.mkdir( folder );
            sftp.cd( folder );
        }
    }
} 
```

`sftp`对象在哪里`ChannelSftp`。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-11-21T12:42:32.347

这就是我在[JSch](http://www.jcraft.com/jsch/)中检查目录存在的方式。

如果目录不存在则创建

```
ChannelSftp channelSftp = (ChannelSftp)channel;
String currentDirectory=channelSftp.pwd();
String dir="abc";
SftpATTRS attrs=null;
try {
    attrs = channelSftp.stat(currentDirectory+"/"+dir);
} catch (Exception e) {
    System.out.println(currentDirectory+"/"+dir+" not found");
}

if (attrs != null) {
    System.out.println("Directory exists IsDir="+attrs.isDir());
} else {
    System.out.println("Creating dir "+dir);
    channelSftp.mkdir(dir);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-19T05:52:53.797

如果您使用多个线程连接到远程服务器，上述答案可能不起作用。例如，当 sftp.cd 执行时，没有名为“文件夹”的文件夹，但是在 catch 子句中执行 sftp.mkdir(folder) 时，另一个线程创建了它。更好的方法（当然对于基于 unix 的远程服务器）是使用 ChannelExec 并使用“mkdir -p”命令创建嵌套目录。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-11-08T08:03:55.153

与具有额外功能的现成抽象方法相同的解决方案：

*   使用包含文件名的路径；
*   如果相同的文件已经存在，则删除。

    ```
    public boolean prepareUpload(
      ChannelSftp sftpChannel,
      String path,
      boolean overwrite)
      throws SftpException, IOException, FileNotFoundException {

      boolean result = false;

      // Build romote path subfolders inclusive:
      String[] folders = path.split("/");
      for (String folder : folders) {
        if (folder.length() > 0 && !folder.contains(".")) {
          // This is a valid folder:
          try {
            sftpChannel.cd(folder);
          } catch (SftpException e) {
            // No such folder yet:
            sftpChannel.mkdir(folder);
            sftpChannel.cd(folder);
          }
        }
      }

      // Folders ready. Remove such a file if exists:    
      if (sftpChannel.ls(path).size() > 0) {
        if (!overwrite) {
          System.out.println(
            "Error - file " + path + " was not created on server. " +
            "It already exists and overwriting is forbidden.");
        } else {
          // Delete file:
          sftpChannel.ls(path); // Search file.
          sftpChannel.rm(path); // Remove file.
          result = true;
        }
      } else {
        // No such file:
        result = true;
      }

      return result;
    } 
    ```

# java - 无法在 RAD 7.5 中执行主方法类

> ID：12838772
> 
> 赞同：0
> 
> 时间：2012-10-11T11:44:49.077
> 
> 标签：java, ibm-rad

我有一个带有 main 方法的类，只是为了在尝试执行时打印“Hello World”我得到异常为 ClassNotFoundException。

我有另一个带有 main 方法的类，但调用了一个 WebService 我收到“内部错误”作为附加图像，当单击“是”按钮时，RAD 需要关闭。

请帮助我如何设置任何类路径或任何其他参数。如果我需要提供更多详细信息，请告诉我。

![在此处输入图像描述](../Images/fcb068194eb34861e99eafd9e33159e7.png)

**更新** 复制 eclipse.ini 文件。

-vm D:\Program Files\IBM\SDP\jdk\jre\bin\javaw.exe -startup plugins/org.eclipse.equinox.launcher_1.0.101.R34x_v20081125.jar -install D:\Program Files\IBM\SDP - -launcher.library plugins/org.eclipse.equinox.launcher.win32.win32.x86_1.0.101.R34x_v20080731 -vmargs -Xquickstart -Xms40m -Xmx1024m -Xmnx64m -Xgcpolicy:gencon -Xscmx96m -Xshareclasses:name=IBMSDP_%u -Xnolinenumbers - XX:MaxPermSize=128M -Dcom.ibm.ws.management.event.max_polling_interval=1000

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T13:18:55.330

RAD 真的是一个记忆猪。您应该在至少有 2 GB 内存的 PC 上运行，最好是 4。通过 eclipse.ini 文件尽可能多地提供 RAD，如下所示。

```
-vmargs
-Xms256m
-Xmx2048m 
```

无论如何，我建议不要使用 RAD。除非您正在使用 RUP 或 WebSphere 开发并且绝对必须使用它，否则我会使用普通的旧 Eclipse。RAD 太臃肿了...如果这不能解决您的问题，请发布您的 .log 文件和 eclipse.ini 文件。

# c# - BaseAdapter 与 AlphabetIndexer

> ID：12838773
> 
> 赞同：0
> 
> 时间：2012-10-11T11:44:54.727
> 
> 标签：c#, android

我创建了一个名为: 的自定义适配器`ContactsAdapter`，它继承自`BaseAdapter`并实现`ISectionIndexer`.

是否可以`AlphabetIndexer`在不使用 a 的情况下在自定义适配器上实现 a `ICursor`？原因是，适配器使用 a`List<T>`来存储所有项目。

提前谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T06:29:29.253

简短的回答；**是**的，您可以在不使用`ICursor`. 基本上你`ISectionIndexer`在你的`BaseAdapter<T>`

`ISectionIndexer`实现由以下方法组成：

```
 public int GetPositionForSection(int section)
    {
        ...
    }

    public int GetSectionForPosition(int position)
    {
        ...
    }

    public Java.Lang.Object[] GetSections()
    {
        ...
    } 
```

亲切的问候，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T12:20:11.110

在将列表设置为适配器之前对列表进行排序怎么样？

喜欢：

```
Collections.sort(list, String.CASE_INSENSITIVE_ORDER); 
```

要排序的对象列表需要实现`Comparable`

# java - 同步跨线程共享但不并发访问的对象

> ID：12838776
> 
> 赞同：0
> 
> 时间：2012-10-11T11:45:03.823
> 
> 标签：java, concurrency, volatile

假设我有一个共享对象 field `data`。多个线程将共享对该对象的引用以访问该字段。但是，线程永远不会同时访问对象。我需要声明`data`为 volatile 吗？

这种情况如下：

*   一个类`Counter`定义了一个唯一的字段`value`和一个方法`increment`。
*   一个线程增加计数器，然后产生另一个增加计数器的线程，等等。

鉴于程序的逻辑，没有对计数器的并发访问。然而，计数器是跨多个线程共享的。计数器必须是易失性的吗？

这种情况的另一种变体是当多个线程操作一个纯数据对象 X 时，但通过另一个依赖于并发控制 ( `wait`, `notify`, ) 的对象 Y 交替执行它们的时间执行（这样 X 永远不会同时访问`synchronize`）。对象 X 的字段应该是可变的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T11:55:30.917

强烈建议学习 Java 内存模型的整个 JLS 章节——实际上是*强制性的——任何使用 Java 进行并发的人。*具体来说，您的案例在[JLS, 17.4.4 中有介绍：](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4.4)

“启动线程的动作与它启动的线程中的第一个动作同步。”

这意味着对于您的第一个场景，您不需要`volatile`. 但是，无论如何，让它对未来的代码更改具有鲁棒性是一种很好的做法。您确实应该有充分的理由**不**拥有`volatile`，这仅适用于读取率极高（至少每秒数百万）的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T19:08:47.027

关于问题的第二部分：如果您不在变量 X 上使用 volatile，则给定线程可能始终使用变量值的本地缓存版本。您将变量 Y 用作锁将非常有效，可以确保两个线程不会同时写入 X，但不能保证其中一个线程不会查看过时的数据。

来自 JLS：“对 volatile 变量 v 的写入与任何线程对 v 的所有后续读取同步”。我读这篇文章的方式是，规范不保证读取除 v 之外的其他变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T11:47:40.213

Java 内存模型和字节码重新排序并不能保证后续线程将看到计数器的递增值。因此，如果您使用单线程 - 您不需要对 volatile 执行任何操作，但如果多个线程可能从变量中读取某些内容 - 您需要确保使用 volatile 或使用同步/锁对另一个线程的更改可见性。

Thread.start 方法施加了障碍，因此可以确保可见性 - 并且您可能不需要那些易变的东西。但无论如何我都会添加它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T12:47:33.210

你只讲述了柜台故事的一部分。计数器的递增部分似乎很好——正如 Marko 指出的那样，在 Thread.start 处有一个 HB 边缘。但是谁在看这个计数器？如果它是这些衍生线程之外的任何人，并且您完全关心查看最新值，那么该字段需要是可变的。如果计数器是`long`（或`double`），即使您不关心过时的值，您也需要它是 volatile 的，否则您可能会导致单词撕裂。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-14T06:51:21.003

只有当线程之间的发生之前的关系建立时，才能保证来自线程的突变对其他线程可见。建立关系后，所有先前的突变都变得可见。

如果另一个对象正确同步了对它的访问，则在隔离时未正确同步的对象可以安全使用（请参阅Java Concurrency in Practice 中的捎带）*。*

在问题中描述的两种情况下，我认为不需要同步：

*   `Thread.start`建立之前发生的关系，因此来自先前线程的所有突变都是可见的
*   对对象 X 的访问由对象 Y 同步，这将建立先发生关系并使对 X 的更改可见（我在[博客文章中进行了](http://ewernli.wordpress.com/2012/10/23/understanding-the-visibility-of-side-effects/)更多扩展）。

如果您知道对象 X 永远不会同时访问，那么很可能有一个对象 Y 间接同步了对 X 的访问，所以没关系。我看到的唯一不安全的情况是线程本身是否按时间中继（例如，使用 Thread.sleep 或通过循环直到经过一段时间）以保证互斥：在这种情况下，没有建立之前发生的关系。

# java - 无法执行存储过程 (jdbc)。'noAccessToProcedureBodies=true'

> ID：12838784
> 
> 赞同：0
> 
> 时间：2012-10-11T11:45:30.090
> 
> 标签：java, mysql, tomcat, jdbc, mysql-connector

我们在一端有一个 java tomcat 服务器，在另一端有一个 mysql。我们正在使用 mysql-connector-java，尝试使用 5.1.11 和 5.1.22 版本。mysql服务器版本为5.5.26

我们没有 mysql.proc 表的所有权限，因为它对所有数据库都有安全风险。

当我使用给定的用户名和密码登录 mysql 时，我可以执行这些程序，但是当从 java (jdbc) 使用时，它会爆炸

```
java.sql.SQLException: User does not have access to metadata required to determine stored procedure parameter types. If rights can not be granted, configure connection with "noAccessToProcedureBodies=true" to have driver generate parameters that represent INOUT strings irregardless of actual parameter types. 
```

我尝试了mysql给出的建议，在我们的jdbc连接URL中使用了'noAccessToProcedureBodies = true'。一点帮助都没有！没有任何区别。（这是我使用的 jdbc 连接字符串示例： jdbc:mysql://xxxxxx:xxxx/xxxx?noAccessToProcedureBodies=true&useInformationSchema=true ）

当我阅读[http://bugs.mysql.com/bug.php?id=61203](http://bugs.mysql.com/bug.php?id=61203)时，我看到连接器中有一个错误，我尝试按照建议使用 useInformationSchema=true。没有帮助，也没有更新 mysql-connector-java，即使该错误应该已修复。

有没有人遇到过这个？我想我做错了什么，每个人都说它应该工作，但对我来说它没有。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T19:22:03.643

还没有验证它......只需使用这个：useInformationSchema = true for sql URL。（不要放 noAccessToBodys）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T05:07:12.700

我有 MySQL 服务器版本：5.1.52
我的 SQL 连接器 jar：mysql-connector-java-5.1.7-bin.jar
Tomcat：7.0.27.0
JDK 1.6.0.18

通过添加解决了上述问题`noAccessToProcedureBodies=true`，它对我有用！

# c++ - 使用 std::make_shared() 的数据缓存影响

> ID：12838787
> 
> 赞同：2
> 
> 时间：2012-10-11T11:45:36.797
> 
> 标签：c++, caching, boost, stl, make-shared

[我在这里](https://stackoverflow.com/a/9302360/137261)读到：

> make_shared （实际上）更有效，因为它在一个动态分配中将引用控制块与实际对象一起分配。相比之下，接受裸对象指针的 shared_ptr 的构造函数必须为引用计数分配另一个动态变量

这是否意味着使用 std::make_shared 创建的 std::shared_ptr 向量将是“缓存友好的”，因为数据（控制块和实际指针的数据）在一个块中？

我的用例是一个包含 100 000 个共享指针的向量，其中指向的对象是 14 个字节。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:52:57.760

也许吧，但不要指望它。

为了缓存友好性，您希望使用尽可能少的内存，并且您希望地址上接近的操作在时间上也接近（即，足够接近以使第二个操作使用仍在某个级别的内存of cache 从第一个操作的效果看：cache 级别越低越好）。

如果您使用，那么总内存使用可能*会*略有节省，无论您的内存使用模式如何`make_shared`，这至少对缓存来说是一个胜利。

 *如果使用`make_shared`，则控制块和引用的对象（r​​eferand）在内存中是相邻的。

如果您*不*使用`make_shared`，并且您的对象与控制块的大小不同，那么使用常见的内存分配器，对象很有可能会聚集在一个地方，而控制块会聚集在不同的地方。如果它们*的*大小相同（一旦由内存分配器以某种特定于实现的方式四舍五入），那么对于常见的内存分配器，它们很有可能只是在内存中长时间交替运行，除非`shared_ptr`有什么影响它。

您的内存访问模式将确定哪些布局更适合缓存 - 当然，您在非`make_shared`情况下获得的实际布局可能又是其他东西，具体取决于实现细节。

您拥有 a 的事实`vector`基本上与所有这些无关，因为`shared_ptr`对象与控制块和引用是分开的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T11:54:53.647

用 .创建共享指针向量是不可能的`make_shared`。试试看，你做不到。您可以做的最好的事情是复制构造或复制分配向量中的指针来自使用`make_shared`. 但随后它们将在内存中的其他地方。

但是，控制块仍会靠近对象。当你调用 时`make_shared`，你实际上做了三件事：一个对象，一个用于跟踪对象引用的共享指针控制块，以及一个共享指针。该`make_shared`函数使控制块和对象本身被分配在一个连续的内存块中。

这是否对缓存友好是一个有趣的问题。基本上，这取决于您如何使用该对象。

如果您经常只对共享指针而不是它们指向的对象进行操作（例如，复制向量并因此增加每个共享指针的引用计数），那么单独分配可能对缓存更友好，而不是组合分配这`make_share`给了你。

如果每次操作共享指针时都频繁地操作对象本身，那么`make_shared`在典型情况下应该对缓存更加友好。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-11T13:12:06.533

正如上面提到的海报，使用 make_shared 制作对象会使“控制块”与所引用的对象相邻。

但是，在您的情况下，我认为这是一个糟糕的选择。

当您分配内存时，即使在一个大块中，您也无法保证获得连续的“物理空间”，而不是稀疏的、碎片化的页面分配。出于这个原因，遍历您的列表会导致读取大跨度内存只是为了获取控制结构（然后指向数据）。

“但我的缓存行是 64 字节长！” 你说。如果这是真的，您*可能会想，* “这将意味着对象与控制结构一起被加载到缓存中”，但这不一定是真的。这取决于许多因素，例如数据对齐、缓存行大小、缓存的关联性以及您使用的实际内存带宽。

您遇到的问题是，首先需要获取控制结构以找出数据的位置，而这些数据可能已经存在于缓存中，因此您的部分数据（控制结构）至少可以是如果您将它们全部分配在一起而不是使用make_shared，实际上可以保证它们在缓存中。

如果您想让您的数据缓存友好，您需要确保对它的所有引用都适合最高级别的缓存。继续使用它将有助于确保它保留在缓存中。缓存算法足够复杂，可以处理获取数据，除非您的代码非常多分支。这是使您的数据“缓存友好”的另一部分：在处理数据时使用尽可能少的分支。

此外，在处理它时，请尝试将其分解为适合缓存的部分。如果可能的话，一次只能操作 32k ——这在现代处理器上是一个保守的数字。如果您确切知道将在哪个 CPU 上运行代码，则可以根据需要对其进行不那么保守的优化。

编辑：我忘了提到一个相关的细节。最常分配的页面大小是 4k。缓存通常是“关联的”，尤其是在低端处理器中。2路关联意味着内存中的每个位置只能映射到其他每个缓存条目；4 路关联意味着它可以适合 4 种可能的映射中的任何一种，8 路意味着 8 种可能的映射中的任何一种等等。关联性越高，对您越好。处理器上最快的缓存 (L1) 往往关联性最低，因为它需要的控制逻辑更少；具有要引用的连续数据块（例如连续的控制结构）是一件好事。完全关联的缓存是可取的。*

# cordova - 删除 Phonegap 中的 DirectoryReader 对象

> ID：12838796
> 
> 赞同：0
> 
> 时间：2012-10-11T11:46:21.350
> 
> 标签：cordova

如何删除使用 phonegap 的文件 API 创建的目录读取对象？

# javascript - 如何覆盖向上箭头键以像向右箭头键一样工作

> ID：12838798
> 
> 赞同：0
> 
> 时间：2012-10-11T11:46:22.647
> 
> 标签：javascript, jquery, jquery-plugins, jquery-events

再次期待您的帮助。面对一个小问题可能是愚蠢的问题。我正在为我的工作创建一个小的 jQuery 插件。该插件应该是完全可定制的。除了这个任务，我几乎完成了所有的事情。

实际上，当用户单击输入元素并按下向上和向下箭头时，我需要分别增加和减少值。但是应该使用哪个箭头键是可定制的。如果用户选择“updown”，那么向上和箭头键应该可以工作。如果用户选择“leftright”，则左右箭头键应分别用于增加和减少值。在这种情况下，用户需要使用向上和向右箭头键来左右移动光标。因为现在左右箭头键被用于其他目的。

其实我有一个解决方案是可以使用插入符号位置。但是有没有其他简单的方法可以帮助轻松完成这项工作。

PS：对不起，如果我的问题让你们中的任何人感到困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T11:59:53.877

您可以使用对象来存储密钥代码.. 像这样

```
<select id="keys" >
    <option value="updown"> Up - Down </option>
    <option value="leftright"> Left - Right</option>
</select>

var keys = {
    updown:{
        inc:38,
        dec:40
    },
    leftright:{
        inc:37,
        dec:39
    }
}

document.onkeyup = function KeyUp(e) {
    var selected = document.getElementById("keys");
    var keyCode = (window.event) ? event.keyCode : e.keyCode;
    if(keys[selected.value].inc === keyCode){
       alert("increase.........");
    }else if(keys[selected.value].dec === keyCode){
       alert("decrease.........");
    }
} 
```

演示：http: [//jsfiddle.net/2qaJf/1/](http://jsfiddle.net/2qaJf/1/)

注意：尝试演示时请清除选择元素的焦点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T12:07:05.037

我对这个问题感到很困惑，但我的理解是你想让向上箭头键像向右箭头键一样工作。

```
$(document).keydown (function (e) {
  if(e.which == 38){
  console.log("up arrow pressed - put right arrow key function or trigger the right arrow key event here"); 
  }
}); 
```

38 = 向上箭头键事件

我希望这将有所帮助。

# c# - 如何发送密钥 ASCII 值 0？

> ID：12838799
> 
> 赞同：3
> 
> 时间：2012-10-11T11:46:24.120
> 
> 标签：c#, winforms, sendkeys

> **可能重复：**
> [限制文本框中的数字和字母 - C#](https://stackoverflow.com/questions/9601972/restrict-numbers-and-letters-in-textbox-c-sharp)

我有一个名为`TextBox1`. 应该只允许用户输入大写字母。其他角色必须被拒绝。我怎样才能做到这一点？

```
private void TextBox1_KeyDown(object sender, KeyEventArgs e)
{
    if (!"ABCDEFGHIJKLMNOPQRSTUVWXYZ".Contains(Convert.ToChar(e.KeyValue)))
    {
        SendKeys.Send(Convert.ToChar(0).ToString());
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T11:50:06.853

请改用[MaskedTextbox](http://msdn.microsoft.com/en-us/library/system.windows.forms.maskedtextbox.aspx)。容易得多。您的掩码可以是这样`>???????????`的：取决于最大允许长度。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-11T11:56:51.307

试试这个：

```
private void TextBox1_KeyDown(object sender, KeyEventArgs e)
{
    if (!"ABCDEFGHIJKLMNOPQRSTUVWXYZ".Contains(Convert.ToChar(e.KeyValue)))
        e.Handled = true;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T11:50:22.080

在 KeyEventArgs e 中有一个名为 SuppressKeyPress 的属性。如果给定的键不在您的列表中，您可以将其设置为 true。然后密钥将不会传递到您的文本框。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T11:50:27.457

使用[`MaskedTextBox`](http://msdn.microsoft.com/en-us/library/system.windows.forms.maskedtextbox.aspx). 为什么你仍然使用 SendKeys，你认为 0 字符有什么作用？

# httprequest - Query_String / Query_String_Decoded 不持有 Post 参数

> ID：12838800
> 
> 赞同：0
> 
> 时间：2012-10-11T11:46:28.743
> 
> 标签：httprequest, lotus-domino, lotusscript

我有一个代理，它应该接受从 Titanium 中的应用程序发送的 Post 参数，

在应用程序中，我发送一个 httprequest，例如：

```
var params = {
"Param1":"Test",
"Param2":"Sth"
}
var http = Ti.Network.createHTTPClient()
  http.open("POST","server/db.nsf/agent?OpenAgent",true);
  http.setRequestHeader('Authorization', 'Basic ' + Ti.Utils.base64encode(username + ':' + password));

  http.send(params)
    http.onreadystatechange = function () {
      var response = http.responseData
          callback(response)
    } 
```

在代理中，我有以下代码：

```
Dim session As NotesSession
Dim doc As NotesDocument

Set doc = session.DocumentContext

Print (doc.Query_String(0))
Print (doc.Query_String_Decoded(0)) 
```

我还添加了 2 个隐藏的计算表单`Query_String`，`Query_String_Decoded`并将其名称作为值只是为了确保。

并尝试了`@UrlQueryString`

但是 responseData 只是 `OpenAgent` 来自 Url 的参数

谁能帮我找到正确的方法来获取从 httprequest 发送的 Post Data

感谢您的提前帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T12:21:40.687

您需要使用 Request_Content CGI 变量而不是 Query_string。

* * *

您也可以使用 XPage 并创建一个 XAgent。可以使用 param.get() 读取发布到 XPage 的值。我写了一篇关于[XPages 中的 HTTP 请求使用者](http://per.lausten.dk/blog/2010/12/http-request-consumer-in-xpages.html)的博客文章，您可以将其用作灵感。

# windows - Windows 命令行/shell - 将文件附加到另一个文件时，如何忽略与正则表达式匹配的行？

> ID：12838802
> 
> 赞同：0
> 
> 时间：2012-10-11T11:46:36.200
> 
> 标签：windows, command-line, batch-file

我不熟悉 Windows shell。所以，假设我的文件是这样的：

```
DontAppend this line shouldn't be appended
DontAppend this line shouldn't be either
Some lines
more lines 
```

我正在附加这样的内容：

```
type file.txt >> AppendHere.txt 
```

这会附加整个文件。如何使它跳过以“DontAppend”开头的行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T11:55:26.673

命令 findstr 将让您搜索不包含字符串或正则表达式的行，以便您可以使用：

```
findstr /vrc:"^[^A-Za-z0-9]*DontAppend" file.txt >> AppendHere.txt 
```

/r 选项表示它应该使用正则表达式，插入符号 (^) 表示它应该以字符串开头。

编辑：为非字母数字字符添加了一个过滤器，**可以**解决 Unicode 问题（Unicode 文件有时在开头有一个不可打印的指示字符）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T11:53:54.747

要么获取`grep`Windows，要么你可以使用 Windows 自己的`find`命令

```
type so.txt|find /v "DontAppend" >> output.txt 
```

该`/v`选项表示与您的字符串不匹配的输出行。

`find`适用于像这样非常简单的事情，但你将需要一个真正的过滤工具，比如`grep`

# javascript - Javascript：如何加载图像，获取图像数据并将其存储在数组中？

> ID：12838805
> 
> 赞同：1
> 
> 时间：2012-10-11T11:46:50.687
> 
> 标签：javascript, image, load, pixels

我正在尝试加载图像，从中获取像素值并将它们存储在数组中以备后用。这样做的原因是我正在编写一个 raycaster（“假 3d”引擎），我想在屏幕上将墙壁绘制为列，像素值取自预先加载的纹理图像。

这是我现在使用的代码：

```
var imgwidth;
var imgheight;

var wallSprite1 = new Image();
wallSprite1.src = "textures/bricks_tile.gif"
if(wallSprite1.complete) findHHandWW();
else wallSprite1.onload = findHHandWW;

function findHHandWW() {
imgwidth = this.width;
imgheight = this.height;
getImageData(this);
return true;
}

function getImageData(img) {
var tempcanvas = document.createElement('canvas');
tempcanvas.height = imgwidth;
tempcanvas.width = imgheight;
var tempcontext = tempcanvas.getContext("2d");
tempcontext.drawImage(img,0,0);
wallData = tempcontext.getImageData(0, 0, imgwidth, imgheight);
} 
```

但是，这给了我以下错误：无法从画布获取图像数据，因为画布已被跨域数据污染。未捕获的错误：SECURITY_ERR：DOM 异常 18

我阅读了它，并没有找到任何真正解决我的问题的答案。我现在想在本地运行它。甚至可能吗？我尝试使用；

```
image.crossOrigin = ''; 
```

但它没有用。

我是否以错误的方式解决了这个问题？我想知道是否有更简单的方法来完成我想要的。

# php - NSURLConnection 响应剪切了一些部分

> ID：12838811
> 
> 赞同：0
> 
> 时间：2012-10-11T11:47:20.070
> 
> 标签：php, objective-c

我有一个 NSURLConection，一切正常 :) 我从一个看起来像这样的 php 脚本得到一个 VALUE：

```
<?php
echo "372";
?> 
```

所以它返回 372。

但我现在的问题是，它返回了一些我不想要的东西，我只想要这个数字。当我在我的网络浏览器中加载 php 文件时，它只给了我 372 但使用 NSURLConnection 我得到了这个：

![NSURLConnectionResponse](../Images/0f5365126daff43b3d8844201e5d64fc.png)

我只想得到 372，而不是下面的东西，有没有办法通过格式化响应（NSString）来获取数字。

谢谢

这是我的代码：

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection {

        [progressAlert dismissWithClickedButtonIndex:0 animated:YES];

    if (connection == connectionUpload) {
        [self newConnection];
        connectionUpload = nil;
    }
    else {

        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Response" message:response delegate:nil cancelButtonTitle:@"Okay" otherButtonTitles: nil];
        [alert show];
        connectionImage = nil;
    }
}

-(void)newConnection {

    NSURLRequest *requestID = [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://jackdev.comeze.com/upload/randomnumber.php"] cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:60.0];
    connectionImage = [[NSURLConnection alloc] initWithRequest:requestID delegate:self];

    if (connectionImage) {

        //connect

    } else {

        //error
    }
}

-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {

    if (connection == connectionImage) {

        response = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
    }
    else {

        //nothing
    }
} 
```

有两个连接。conectionUpload 上传图像并检查何时完成。如果完成，新的连接将开始获取图像 ID。在我的upload.php 文件中，我将图像的randomID 写入randomnumber.php，randomnumber.php 的响应将被加载到字符串中。

# jquery - 将项目从一个 ListBox 移动到另一个并在 ListBox 中获取项目

> ID：12838813
> 
> 赞同：0
> 
> 时间：2012-10-11T11:47:26.807
> 
> 标签：jquery, html, asp.net, viewstate, eventvalidation

我有一个 ASP.NET 向导控件。第二步，我有两个 ListBox；页面加载时从服务器填充第一个 ListBox 项。

然后用户从 ListBox1 中选择数据并将其移动到 ListBox2。然后，用户单击向导的下一步按钮。不知何故，当用户单击下一步时，ListBox2 为空。

我使用 jQuery 将数据从 ListBox1 移动到 ListBox2。

```
<td class="style9">
                <asp:ListBox ID="registerCompCats" runat="server" CssClass="ListBox1"
                ClientIDMode="Static" DataTextField="value" DataValueField="key"
                Rows="5" size="5" style="width:135px; size:5px;" SelectionMode="Multiple" ></asp:ListBox>
                    &nbsp;&nbsp;&nbsp;</td>
                <td class="style1">
                    <table>
                        <tr>
                            <td style="padding-left: 20px;">
                                <img id="addCat" onclick="return addCat_onclick()" 
                        src="images/buttons/btn_addCat.jpg" title="Add Category" />
                            </td>
                        </tr>
                        <tr>
                            <td style="padding-left: 20px;">
                                <img id="removeCat" 
                        src="images/buttons/btn_removeCat.jpg" title="Remove Category" />
                            </td>
                        </tr>
                    </table>
                </td>
                <td>
                <asp:ListBox ID="registerCompAcats" runat="server" CssClass="ListBox2"
                ClientIDMode="Static" DataTextField="value" DataValueField="key"
                Rows="5" size="5" style="width:135px; size:5px; margin-top: 0px;" SelectionMode="Multiple" ></asp:ListBox>
                    &nbsp;<asp:RequiredFieldValidator ID="registerCompAcatsValidator" runat="server" 
                        ControlToValidate="registerCompAcats" Display="None" ErrorMessage="categories"></asp:RequiredFieldValidator></td> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T13:16:48.760

# 事件验证

如果您在客户端使用列表框和/或下拉列表的可用选项（即使用 jQuery 或其他方式），内置的 ASP .NET 表单验证（称为“事件验证”）将启动并抛出一个异常，因为您提交的表单与最初呈现控件时所提供的选项不同。要解决此问题，您必须在 .aspx 页面顶部执行此操作：

```
<%@ Page EnableEventValidation="false" %> 
```

请记住，如果您这样做，您需要自己对下拉列表和列表框执行表单验证。

# 视图状态

每次将页面回传到服务器时，这些控件都有 0 个选项。是的，您在 HTML 中看到了选项，但在服务器上，它们开始时只有 0 个选项。如果您在这些控件上启用了视图状态，则在页面生命周期中，ASP .NET 框架将自动添加上一页面呈现中存在的选项。这意味着，由于`registerCompAcats`控件在第一个页面呈现中没有选择，所以当页面回传到服务器时，它仍然没有任何选择。

这些`asp:ListBox`控件呈现为`<select>`HTML 中的元素。这些工作的方式是他们将在这些列表框中选择的值发布到服务器。这意味着无论选择是什么，您都只会知道用户在表单帖子的这些列表框中选择的项目。

# 可能的解决方案

有几种方法可以解决这个问题。我将概述一对。

## 方法1：回发以将项目添加到其他列表框

这可能是最简单但效率最低的。每次用户单击“添加类别”按钮时，您可能会导致页面回发，而不是使用 jQuery 将项目从一个列表框移动到另一个列表框。这允许服务器端代码控制每个框中的选择，并且视图状态对您有利。您还可以在页面上重新启用事件验证，这通常是个好主意。

```
<asp:ListBox id="lb1" runat="server" />
<asp:Button id="btnAdd" runat="server" />
<asp:ListBox id="lb2" runat="server" /> 
```

对于 btnAdd.Click 事件：

```
Sub btnAdd_Click(sender As Object, args As EventArgs) Handles btnAdd.Click

  lb2.Items.AddRange(lb1.Items.Where(Function(i) i.Selected).ToArray())

End Sub 
```

## 方法二：使用jQuery添加项目；在提交之前操纵帖子

就像我上面解释的那样，您需要为此关闭事件验证。使用 jQuery 将项目从一个列表移动到另一个列表 - 这很好。但是，在您实际在页面上进行回发之前，您将使用 jQuery 收集第二个列表框中的所有值，并将这些值放在隐藏字段中，即`runat="server"`.

```
<asp:ListBox id="lb1" runat="server" />
<input type="button" value="Add" onclick="addCategory();" />
<asp:ListBox id="lb2" runat="server" />
<input type="hidden" id="hdnSelectedCategories" runat="server" />
<asp:Button id="btnSubmit" runat="server" onclientclick="preSubmit();" /> 
```

jQuery部分：

```
<script type="text/javascript">

  var lb1, lb2, hdnSelectedCategories;

  $(function() {
    lb1 = $('#<%=lb1.ClientID %>');
    lb2 = $('#<%=lb2.ClientID %>');
    hdnSelectedCategories = $('#<%=hdnSelectedCategories.ClientID %>');
  });

  function addCategory() {
    lb2.append(lb1.find('option:selected'));
  }

  function preSubmit() {
    // collect all the values from the lb2 listbox into an array
    var values = [];
    lb2.find('option').each(function(index, item) {
      values.push($(item).val());
    });
    // now put the contents of the array in the hidden input, separated by commas
    hdnSelectedCategories.val(values.join(','));
  }
</script> 
```

现在在您的代码后面，对于 btnSubmit.Click 事件：

```
Sub btnSubmit_Click(sender As Object, args As EventArgs) Handles btnSubmit.Click

  Dim values As String() = hdnSelectedCategories.Value.Split(",")

  'TODO: Profit'

End Sub 
```

在这种方法中，您可能还希望关闭列表框上的 Viewstate，因为它会增加请求的膨胀，并且会在用户单击“提交”按钮后重置您的列表框。

# 免责声明

我对这段代码进行了最低限度的测试——这只是我的想法。但希望对事件验证、视图状态和回发页面生命周期的解释能够帮助您了解实际发生的情况，并且您可以提出适合您情况的解决方案。

# python - 从 ConfigParse 返回可用值

> ID：12838814
> 
> 赞同：2
> 
> 时间：2012-10-11T11:47:28.357
> 
> 标签：python

使用下面描述的代码，我可以成功检索存储在 file.cfg 中的属性，但是如何将输出用于其他变量？

```
from ConfigParser import SafeConfigParser

class Main:

   def get_properties(self, section, *variables):
        cfgFile = 'c:\file.cfg'
        parser = SafeConfigParser()
        parser.read(cfgFile)
        properties= variables
        return {
            variable : parser.get(section,variable) for variable in properties

        }

   def run_me(self):
        config_vars= self.get_properties('database','host','dbname')
        print config_vars

op=Main()
op.run_me() 
```

我仍在学习 Python，但我不确定我需要做什么才能将输出设置为单个变量：

电流输出：

```
{'host': 'localhost', 'dbname': 'sample'} 
```

我想拥有什么：

```
db_host = localhost
db_name = sample 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T11:51:17.533

```
def run_me(self):
     config_vars= self.get_properties('database','host','dbname')
     for key, value in config_vars.items():
         print key, "=", value 
```

您收到了 dict-object `config_vars`，因此您可以使用配置变量作为 dict 的值：

```
 >>> print config_vars["dbname"]
 sample
 >>> print config_vars["host"]
 localhost 
```

[在文档](http://docs.python.org/library/stdtypes.html#dict)中阅读有关 python 字典的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T12:13:20.537

我会建议这种方法：

```
import ConfigParser
import inspect

class DBConfig:
    def __init__(self):
        self.host = 'localhost'
        self.dbname = None

    def foo(self): pass

class ConfigProvider:
    def __init__(self, cfg):
        self.cfg = cfg

    def update(self, section, cfg):
        for name, value in inspect.getmembers(cfg):
            if name[0:2] == '__' or inspect.ismethod(value):
                continue

            #print name
            if self.cfg.has_option(section, name):
                setattr(cfg, name, self.cfg.get(section, name))

class Main:
    def __init__(self, dbConfig):
        self.dbConfig = dbConfig

    def run_me(self):
        print('Connecting to %s:%s...' % (self.dbConfig.host, self.dbConfig.dbname))

config = ConfigParser.RawConfigParser()
config.add_section('Demo')
#config.set('Demo', 'host', 'domain.com')
config.set('Demo', 'dbname', 'sample')

configProvider = ConfigProvider(config)

dbConfig = DBConfig()
configProvider.update('Demo', dbConfig)

main = Main(dbConfig)
main.run_me() 
```

这个想法是你在一个类中收集所有重要的属性（你也可以在其中设置默认值）。

然后该方法`ConfigProvider.update()`将使用配置中的值（如果它们存在）覆盖那些。

`obj.name`这允许您使用简单的语法访问属性。

[要旨](https://gist.github.com/3871952)

# html - CSS如何在滚动时将图像放置在可变宽度文本的右侧？

> ID：12838819
> 
> 赞同：3
> 
> 时间：2012-10-11T11:47:50.100
> 
> 标签：html, css

我有一个宽度可变的文本菜单，例如：

```
Home
Services
About Us
Contact 
```

如何在css中悬停时将图像放置在不同宽度文本的右侧？**是否可以不使用固定宽度？**

```
Home
Services •
About Us
Contact 
```

或者

```
Home
Services
About Us
Contact • 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T11:52:19.080

现场演示[http://tinkerbin.com/RrRtqfVf](http://tinkerbin.com/RrRtqfVf)

做这个

**HTML**

```
<ul>
  <li>Hello</li>
  <li>Hello</li>
  <li>Hello</li>
  <li>Hello</li>
  <li>Hello</li>
  <li>Hello</li>
  <li>Hello</li>

</ul> 
```

CSS

```
 ul{
list-style:none;

}
li{
position:relative;
  float:left;
  clear:left;
  margin-top:10px;
}
li:hover:after{
content:'';
  background:red;
  position:absolute;
  right:-20px;
  top:5px;
  width:10px;
  height:10px;
} 
```

**[演示](http://tinkerbin.com/RrRtqfVf)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T11:52:05.403

尝试这个

HTML

```
<ul>
    <li>Home</li>
<li>Services</li>
<li>About Us</li>
   <li> Contact</li>
</ul> 
```

​CSS

```
ul{width:80px}
ul li:hover{background:url(http://hotels.online.com.sg/DB/icon/star_icon2.gif) right no-repeat}​ 
```

[**演示**](http://jsfiddle.net/A4rdt/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T11:53:22.750

我的建议，使用`background-image`..

让我们假设这是您的 html：

```
<ul>
    <li>Home</li>
    <li>Services</li>
    <li>About Us</li>
    <li>Contact</li>
</ul> 
```

现在，使用这个 CSS 来实现你想要的：

```
ul{list-style-type:none;}
ul li{width:120px;}
ul li:hover{background:url(your/image/path) no-repeat top right;} 
```

如果您希望菜单中的每个项目都有不同的图像/图标，请使用`attributes`或其他类的：

```
<ul>
    <li data="home">Home</li>
    <li data="services">Services</li>
    <li data="about">About Us</li>
    <li data="contact">Contact</li>
</ul> 
```

你的 CSS 应该是这样的：

```
ul{list-style-type:none;}
ul li{width:120px;}
ul li[data="home"]:hover{background:url(your/image/path1) no-repeat top right;}
ul li[data="services"]:hover{background:url(your/image/path2) no-repeat top right;}
ul li[data="about"]:hover{background:url(your/image/path3) no-repeat top right;}
ul li[data="contact"]:hover{background:url(your/image/path4) no-repeat top right;} 
```

# java - Apache Derby 数据库欧元符号

> ID：12838820
> 
> 赞同：0
> 
> 时间：2012-10-11T11:47:56.637
> 
> 标签：java, euro

我正在将带有欧元（€）符号的字符串的记录保存到我的德比数据库中。

当我检索此记录时，我得到一个问号。

我是否必须在 derby db 设置中设置任何字符集？

# python - 通过python在postgres中将表名作为参数传递

> ID：12838822
> 
> 赞同：2
> 
> 时间：2012-10-11T11:48:02.277
> 
> 标签：python, postgresql

我想在python中执行postgres查询。表名必须作为参数传递。因为表将在运行时创建。我使用了 dict 查询参数样式。但我得到了一个错误。

```
 import psycopg2

 CONNECTION_STRING = "dbname='autogist' user='postgres' password=''"
 query = "INSERT INTO %(table)s " +\
            "(vin_id, vin_details_id, price, mileage, dealer_id, created_on, modified_on) " +\
            "VALUES (%(vin_id)s, %(vlookup_id)s, %(price)s, %(mileage)s, %(dealer_id)s,now(),now()) " +\
            "RETURNING id"

params = {"table" : "dealer_vehicle_details_2010_01_02",\
                      "vin_id":"3",\
                      "vlookup_id":"403",\
                      "price":"403",\
                      "mileage":"403",\
                      "dealer_id":"276092"
                  }

 conn=psycopg2.connect(CONNECTION_STRING)
 cursor = conn.cursor(cursor_factory=psycopg2.extras.DictCursor)
 cursor.execute(query,params) 
```

追溯：

```
 ERROR: An unexpected error occurred while tokenizing input
The following traceback may be corrupted or invalid
The error message is: ('EOF in multi-line statement', (262, 0))

---------------------------------------------------------------------------
 ProgrammingError                          Traceback (most recent call last)

 /home/gridlex/workspace/<ipython console> in <module>()

 /usr/local/lib/python2.6/dist-packages/psycopg2/extras.pyc in execute(self, query, vars)
121         self.index = {}
122         self._query_executed = 1
--> 123         return _cursor.execute(self, query, vars)
124 
125     def callproc(self, procname, vars=None):

ProgrammingError: syntax error at or near "E'dealer_vehicle_details_2010_01_02'"
LINE 1: INSERT INTO E'dealer_vehicle_details_2010_01_02' (vin_id, vi... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T11:58:29.013

您发送的语句在 d 时必须在语法上有效`PREPARE`，而带有表名占位符的语句则不是。您不能在准备好的语句中使用占位符作为表名。

您的选择是：

*   用常规字符串替换替换表名，`"double quoted"`. 对你的报价程序要非常小心；确保它将表名中的任何引号加倍，因此表名`double"quote`变为`"double""quote"`. 例如。`'SELECT * FROM "%s"' % quote_ident(tablename)`. 您必须自己动手`quote_ident`，因为 AFAIK psycopg2 没有公开这样的功能。

*   将表名作为查询参数发送到 PL/PgSQL 函数，该函数用于使用`EXECUTE ... USING`表名创建动态 SQL 语句。PL/PgSQL 可以使用该`quote_ident`函数提供比自制实现更安全的引用。

# select - DB2：通过干扰 Select 子句中的子查询进行分组

> ID：12838823
> 
> 赞同：3
> 
> 时间：2012-10-11T11:48:03.047
> 
> 标签：select, group-by, db2, subquery

我被一个 SQL 查询困住了。我在 select 子句中进行子查询，db2 提示 -119 错误告诉：

```
"An expression starting with "FACILITY_ID" specified in a SELECT clause, HAVING clause, or ORDER BY clause is not specified in the GROUP BY clause or it is in a SELECT clause, HAVING clause, or ORDER BY clause with a column function and no GROUP BY clause is specified. SQL Code: -119, SQL State: 42803" 
```

我不知道如何在 GROUP BY 中包含 NUMTAGS。我尝试在 GROUP BY 子句中包含 BC.ITEM，但没有结果。我不知道如何在网上找到这个，而且我看过的论坛没有用。

如果有人能解释我如何修复这个问题或粘贴一个我可以寻找解决方案的链接，我将不胜感激。

SQL 查询与 DB2 一起使用，它位于此处：

```
SELECT SS.NAME, B.DESTINATION_ID, P.DESCRIPTION, B.LAST_READ_DATE, B.LABEL, 
        (SELECT COUNT(BC.ITEM) 
        FROM PROJECT_DB.BOX_CONTENT BC
        WHERE BC.FACILITY_ID = B.FACILITY_ID
        AND BC.BOX_ID = B.BOX_ID
        GROUP BY BC.ITEM) AS NUMTAGS,
        B.BOX_ID
FROM PROJECT_DB.BOX B
INNER JOIN MAINDB.DESTINATION P ON B.DESTINATION_ID = P.DESTINATION_ID
INNER JOIN MAINDB.WAREHOUSE_DESTINATION_SECTION WH 
                                ON B.DESTINATION_ID = WH.DESTINATION_ID
                                AND B.WAREHOUSE_ID = WH.WAREHOUSE_ID
INNER JOIN MAINDB.SECTION S ON S.SECTION = WH.SECTION   
                            AND S.SECTION_TYPE = B.SECTION_TYPE
INNER JOIN MAINDB.DESTINATION_SET SS 
                            ON SS.DESTINATION_SET_ID = S.DESTINATION_SET_ID
WHERE B.WAREHOUSE_ID = 100
GROUP BY B.BOX_ID, B.FACILITY_ID, B.DESTINATION_ID, B.LAST_READ_DATE, B.LABEL, P.DESCRIPTION, SS.NAME 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-29T17:49:36.000

> 您可以通过以下方式更正该语句： v 包括 SELECT 子句中的 GROUP BY 子句中的列，或 v 从 SELECT 子句中删除列。

来自：DB2 文档。

您需要将**所有**选定的列放在您的 GROUP BY...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T14:55:29.123

我最后的工作查询是这里。我想我在“group by”或类似的地方引用了错误的表格：

```
SELECT SS.NAME, P.DESTINATION_ID, P.DESCRIPTION, B.LAST_READ_DATE, B.LABEL, 
        (SELECT COUNT(BC.ITEM) 
        FROM PROJECT_DB.BOX_CONTENT BC
        WHERE BC.ID_FACILITY = B.ID_FACILITY
        AND BC.ID_BOX = B.ID_BOX
        GROUP BY BC.ITEM) AS NUMTAGS, 
        B.BOX_ID, B.FACILITY_ID
FROM PROJECT_DB.BOX B
    INNER JOIN MAINDB.DESTINATION P ON B.DESTINATION_ID = P.DESTINATION_ID
    INNER JOIN MAINDB.WAREHOUSE_DESTINATION_SECTION WH 
                                    ON WH.WAREHOUSE_ID = B.WAREHOUSE_ID 
                                    AND WH.ID_DESTINATION = B.ID_DESTINATION
    INNER JOIN MAINDB.SECTION S ON S.SECTION = WH.SECTION
                                AND S.SECTION_TYPE = B.SECTION_TYPE
    INNER JOIN MAINDB.DESTINATION_SET SS ON SS.DESTINATION_SET_ID = S.DESTINATION_SET_ID
WHERE B.WAREHOUSE_ID = 100
GROUP BY B.BOX_ID, B.FACILITY_ID, P.DESTINATION_ID, B.LAST_READ_DATE, B.LABEL, P.DESCRIPTION, SS.NAME
WITH UR 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T15:33:04.670

由于您使用的是标量子选择，因此我认为您的`GROUP BY`任何一个语句都不需要子句。尝试这个：

```
SELECT 
    SS.NAME,
    B.DESTINATION_ID,
    P.DESCRIPTION,
    B.LAST_READ_DATE,
    B.LABEL,

    (SELECT COUNT(BC.ITEM)
     FROM PROJECT_DB.BOX_CONTENT BC
     WHERE BC.FACILITY_ID = B.FACILITY_ID
     AND BC.BOX_ID = B.BOX_ID
    ) AS NUMTAGS,

    B.BOX_ID
FROM PROJECT_DB.BOX B
JOIN MAINDB.DESTINATION P
  ON B.DESTINATION_ID = P.DESTINATION_ID
JOIN MAINDB.WAREHOUSE_DESTINATION_SECTION WH
  ON B.DESTINATION_ID = WH.DESTINATION_ID
 AND B.WAREHOUSE_ID = WH.WAREHOUSE_ID
JOIN MAINDB.SECTION S 
  ON S.SECTION = WH.SECTION
 AND S.SECTION_TYPE = B.SECTION_TYPE
JOIN MAINDB.DESTINATION_SET SS
  ON SS.DESTINATION_SET_ID = S.DESTINATION_SET_ID
WHERE B.WAREHOUSE_ID = 100 
```

# php - 如何使用 htaccess 在 php 中隐藏/删除查询字符串？

> ID：12838825
> 
> 赞同：-2
> 
> 时间：2012-10-11T11:48:18.023
> 
> 标签：php, .htaccess, configuration-files

例如： [https](https://int.theqtl.com/test/t1.php?id=2) ://int.theqtl.com/test/t1.php?id=2 更改为

[https://int.theqtl.com/test/t1.php](https://int.theqtl.com/test/t1.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T11:50:21.497

我用这个 .htacces

```
RewriteEngine On 
RewriteRule ^([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/([\(\)\|a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/?$   /index.php?ext=$1&cat=$2&name=$3&sub1=$4&sub2=$5&sub3=$6&sub4=$7&sub5=$8 [L]
RewriteRule ^([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/([\(\)\|a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/?$    /index.php?ext=$1&cat=$2&name=$3&sub1=$4&sub2=$5&sub3=$6&sub4=$7 [L]
RewriteRule ^([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/([\(\)\|a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/?$ /index.php?ext=$1&cat=$2&name=$3&sub1=$4&sub2=$5&sub3=$6 [L]
RewriteRule ^([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/([\(\)\|a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/?$  /index.php?ext=$1&cat=$2&name=$3&sub1=$4&sub2=$5 [L]
RewriteRule ^([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/([\(\)\|a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/?$   /index.php?ext=$1&cat=$2&name=$3&sub1=$4 [L]
RewriteRule ^([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/([\(\)\|a-zA-Z0-9_-]+)/?$     /index.php?ext=$1&cat=$2&name=$3 [L]
RewriteRule ^([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/?$    /index.php?ext=$1&cat=$2 [L]
RewriteRule ^([a-zA-Z0-9_-]+)/?$     /index.php?ext=$1 [L] 
```

然后你仍然可以使用`$_GET['ext'];` And the link for a tag while look 而不是这个：

```
<a href="www.site.com/index.php?do=true?when=now" >do stuf</a> 
```

它看起来像这样吗：

```
<a href="www.site.com/true/now" >do stuf</a> 
```

# c++ - C++ 返回一个 void 指针数组

> ID：12838826
> 
> 赞同：1
> 
> 时间：2012-10-11T11:48:19.397
> 
> 标签：c++, void-pointers

> **可能重复：**
> [C++ 从函数返回数组](https://stackoverflow.com/questions/8745260/c-return-array-from-function)

我正在尝试声明一个返回 void 指针数组的函数。我有以下代码：

```
void *[] get_functions(); 
```

但是我得到编译错误：`expected unqualified-id before '[' token`

我正在尝试做的事情是否有效，如果是，我的语法错误是什么？

**编辑** 在回复一些评论时，我试图返回一个函数数组（现在可能是一个向量），然后我可以随机选择一个并调用它。你会建议什么而不是`void *`？

**编辑 2** 返回的函数类型将有一个固定的签名（尚未确定），让我们为了参数的缘故说签名将是 int f(int i, int j) 我的`get_functions`函数的返回是什么样的，或者`vector<void*>`仍然是合适的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-11T11:50:05.730

C++ 不允许函数返回数组。您可能应该返回一个向量：

```
std::vector<void *> get_functions(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T13:17:19.410

你的方法有两个问题。首先是你不能从函数返回数组。在 C 中，您将返回指向数组中元素的指针，但这意味着您需要管理内存。在 C++ 中，您可以使用容器`std::vector`代替数组，并且可以按值返回。

第二个问题是您正在返回函数指针，并且`void*`标准不保证从函数指针到的转换。这里的替代方法从返回适当类型的函数指针（即`std::vector<int (*)(int,int)>`）或使用更高级别的构造（如`std::function`（C++11，或`boost::function`在 C++03 中）： 开始`std::vector<std::function<int(int,int)>>`。第一种方法更适合您提供的描述，因为函数的类型似乎是固定的，使用函数指针的开销很小。第二种方法更通用，因为它可以封装*任何可以用 two 调用`int`并返回 an 的`int`*东西，包括函数指针和函数对象。这反过来又允许您通过以下方式调整其他功能的签名`std::bind`或创建具有适当签名的 lambda：`[](int x, int y){ return x*y;}`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T11:52:54.417

```
void **get_functions(); 
```

稍后您可以说：

```
void **pp = get_functions();
pp[5];     // This is the sixth pointer-to-void 
```

如果您还不知道数组的长度，则需要以其他方式传递它——因此，Jerry Coffin 的答案可能更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T12:08:14.877

您可以将 void 指针返回到数组的第一个元素。您可以将其转换为调用函数。数组本身作为指针传递/返回。

# asp.net-mvc-3 - MVC 3 渲染局部视图

> ID：12838827
> 
> 赞同：0
> 
> 时间：2012-10-11T11:48:29.613
> 
> 标签：asp.net-mvc-3, asp.net-mvc-partialview

我在尝试渲染 PartialView 时遇到了一些问题。

我的控制器：

```
public ActionResult Index()
    {
        var db = new fanganielloEntities();
        List<imovel> imoveis = (from s in db.imovel
                                where s.StatusImovel == 3
                                select s).ToList();

        return PartialView(imoveis);
    }

     public ActionResult Listar()
     {
         return View();
     } 
```

风景：

```
 @Html.Partial("TesteLista") 
```

部分：

```
@model List Mvc4Web.Models.imovel
    @if (Model != null)
    {
foreach (var item in Model)
{
            @Html.DisplayFor(modelItem => item.DescricaoImovel)
 }
    } 
```

错误：

> 你调用的对象是空的。
> 
> 源错误：
> 
> 第 5 行：第 6 行：第 7 行：@foreach（模型中的变量项） 第 8 行：{ 第 9 行：

提前致谢！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T12:04:16.067

您应该将模型传递给部分视图

在你看来

```
 @model List<Mvc4Web.Models.imovel>
@Html.Partial("TesteLista",Model) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T12:19:03.043

`Html.Partial`不会触发您的控制器操作。如果要在渲染 TesteLista 时触发 Index 操作，请使用

```
@Html.Action("TesteLista") 
```

反而。

# performance - 谷歌 Chrome Silverlight 性能显着降低

> ID：12838828
> 
> 赞同：1
> 
> 时间：2012-10-11T11:48:33.420
> 
> 标签：performance, silverlight, internet-explorer, google-chrome, browser

与 Firefox 和 Internet Explorer 相比，Chrome Silverlight 的渲染速度非常慢（估计慢了 10 倍）。您可以简单地使用以下示例代码对此进行测试。示例代码演示了在数据网格内呈现 15000 个随机数据。

你有什么意见为什么会发生这种情况？我想到了两个猜测。

1.  谷歌不希望微软的 Silverlight 在他们的平台上获得广泛的使用。
2.  Chrome 的基础架构以某种方式导致插件渲染缓慢。

XAML 部分：

```
<UserControl x:Class="sample.view.MemberView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:data="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Data"    
    xmlns:viewmodel="clr-namespace:sample.ViewModel"
    mc:Ignorable="d"
    >
    <UserControl.Resources>
        <viewmodel:MemberViewModel x:Key="viewModel"/>
    </UserControl.Resources>
    <Grid x:Name="LayoutRoot" VerticalAlignment="Stretch" DataContext="{Binding Source={StaticResource viewModel}}">
        <Grid.RowDefinitions>
            <RowDefinition></RowDefinition>
            <RowDefinition Height="35"></RowDefinition>
        </Grid.RowDefinitions>
        <data:DataGrid BorderThickness="1" ItemsSource="{Binding Members}" VirtualizingStackPanel.VirtualizationMode="Recycling">
            <data:DataGrid.Columns>
                <data:DataGridTextColumn Header="Name" Width="3*" Binding="{Binding FirstName}"/>
                <data:DataGridTextColumn Header="Surname" Width="3*" Binding="{Binding LastName}"/>
                <data:DataGridTextColumn Header="GSM" Width="3*" Binding="{Binding MobilePhone}"/>
                <data:DataGridTextColumn Header="Email" Width="3*" Binding="{Binding Email}"/>
                <data:DataGridTextColumn Header="BirthDate" Width="2*" Binding="{Binding BirthDate}}"/>
            </data:DataGrid.Columns>
        </data:DataGrid>
        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Grid.Row="1">
            <Button Content="Get Random Data" Width="120" Height="25" Margin="5" Command="{Binding GetRandomDataCommand}"/>
        </StackPanel>
    </Grid>
</UserControl> 
```

C#部分：

```
using System;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.ComponentModel;
using System.Net;
using System.Text;
using System.Windows;
using System.Windows.Browser;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Ink;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;

namespace sample.ViewModel
{
    public class MemberModel
    {
        public string FirstName { get; set; }

        public string LastName { get; set; }

        public string MobilePhone { get; set; }

        public string Email { get; set; }

        public DateTime BirthDate { get; set; }
    }

    public class MemberViewModel
    {
        private List<MemberModel> _members;
        public List<MemberModel> Members
        {
            get
            {
                return _members;
            }
            set
            {
                _members = value;
                RaisePropertyChanged(new PropertyChangedEventArgs("Members"));
            }
        }
        public MyCommand GetRandomDataCommand { get; set; }

        public MemberViewModel()
        {
            GetRandomDataCommand = new MyCommand();
        }
    }

    public class MyCommand : ICommand
    {
        public bool CanExecute(object parameter)
        {
            return true;
        }

        public event EventHandler CanExecuteChanged;

        private static Random random = new Random();
        public void Execute(object parameter)
        {
            List<MemberModel> members = new List<MemberModel>();
            for (int i = 0; i < 15000; ++i)
            {
                MemberModel m = new MemberModel();
                m.FirstName = GetRandomString(random.Next(5) + 4);
                m.LastName = GetRandomString(random.Next(5) + 4);
                m.Email = GetRandomString(random.Next(10) + 4);
                m.MobilePhone = GetRandomString(random.Next(12));
                m.BirthDate = DateTime.Now.AddYears(-random.Next(50) - 18).AddMonths(random.Next(12)).AddDays(random.Next(30));
                members.Add(m);
            }
        }

        private string GetRandomString(int length)
        {
            StringBuilder srb = new StringBuilder();
            for (int i = 0; i < length; ++i)
            {
                srb.Append((char)(65 + random.Next(29));
            }
            return srb.ToString();
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T08:54:23.970

1.  谷歌不希望微软的 Silverlight 在他们的平台上获得广泛的使用。
    **答：**根据我的经验，这在 Google 方面不是问题。在我向 Microsoft 支持部门发送电子邮件之前几周，我遇到了与您描述的相同的问题，他们建议我使用 IE。他们没有回答我为什么它在 Chrome 上运行如此缓慢。

2.  Chrome 的基础架构以某种方式导致插件渲染缓慢。
    **答：**同样，这根本不是真的。这个问题来自微软。似乎它不再关心 Silverlight 了。出于这个原因，我们也计划将我们的产品迁移到 ASP.NET MVC。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T08:25:20.037

梅哈巴，

几天前我遇到了一个msdn页面。它说 Silverlight 支持 x64 仅适用于 IE。支持 x86 的 Safari 和 Chrome 浏览器。因此，你是对的。除此之外，AFAIK firefox 没有 x64 设置。

但对于 Silverlight 5，情况可能会发生变化。

我提供IE，微软也:)

# google-cloud-messaging - 有时未收到 GCM 消息

> ID：12838831
> 
> 赞同：2
> 
> 时间：2012-10-11T11:48:53.120
> 
> 标签：google-cloud-messaging

朋友，我正在使用聊天应用程序。在我的聊天应用程序中，我使用 GCM 进行推送通知。GCM 在我的应用程序中运行良好。但并非所有时候我都无法收到 GCM 消息。有时我收到 GCM 消息，有时没有。为什么这样？我搜索了 GCM 消息失败，但没有找到正确的消息。

任何人，可以请帮助我吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T06:05:20.010

当您向 Google GCM 服务器（位于[https://android.googleapis.com/gcm/send](https://android.googleapis.com/gcm/send)）发布消息时，您需要传递三个值：registration_id、collapse_key 和 data.message。collapse_key 可能是您的问题。

确保为需要可靠传递的每条消息传递一个唯一的 collapse_key。如果您对每条消息使用相同的 collapse_key，则 GCM 可能会丢弃大约同时发送的多条消息。

您可以在此处找到更多信息：http: [//developer.android.com/google/gcm/adv.html](http://developer.android.com/google/gcm/adv.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T07:05:40.223

由于您没有提供有关您的情况的太多信息并且没有共享代码片段，因此很难分析问题。但是，正如[文档](http://developer.android.com/guide/google/gcm/gcm.html)中所述，GCM 不保证传递或消息的顺序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-05T10:20:22.243

如果您通过任何防火墙（如“Cyber​​oam”或类似的东西）使用您的移动互联网，那么它会限制 GCM 推送通知的端口。尝试使用没有任何防火墙的直接互联网连接来实现它。这为我解决了问题。我希望它也能帮助你。

GCM 需要打开端口号 5228、5229 和 5230。GCM 通常使用 5228，但有时会使用可能受防火墙限制的 5229 和 5230。

# java - 在两点之间画正方形

> ID：12838832
> 
> 赞同：2
> 
> 时间：2012-10-11T11:49:03.587
> 
> 标签：java

我正在做一些练习，现在我已经坚持了几个小时（对 Java 来说很新）。无论如何，这就是我应该做的：当我运行程序时，我将在屏幕中间有一个正方形，然后当我单击该屏幕内的某个位置时，另一个正方形将在我单击的位置绘制并在- 在这两点之间应该有 10 个正方形。所以无论我点击哪里，都应该在它们之间绘制 10 个正方形。

但是，我无法使其正常运行。

到目前为止，这是我设法做到的：

```
import se.lth.cs.ptdc.window.SimpleWindow;  
import se.lth.cs.ptdc.square.Square;

public class PrintSquares2 {

public static void main(String[] args) {
    SimpleWindow w = new SimpleWindow(600, 600, "PrintSquares2");
    int posX = 300;
    int posY = 300;
    int loop = 0;
    System.out.println("Skriv rotation");
    Square sq1 = new Square(posX,posY,200);
    sq1.draw(w);

            w.waitForMouseClick();
            int destX = w.getMouseX();
            int destY = w.getMouseY();
            System.out.println("Dest X: " + destX + " Dest Y: " + destY);
            System.out.println("Pos X: " + posX + " Pos Y: " + posY);
            SimpleWindow.delay(10);
            //sq1.erase(w);
            int jumpX = (destX - posX) / 10;
            int jumpY = (destY - posY) / 10;
            System.out.println(jumpX);

                while (posX < destX)
                {       
                    posX = posX+10;
                    SimpleWindow.delay(100);
                    loop++;
                    System.out.println("Loop: " + loop);
                    System.out.println("Dest X: " + destX + " Dest Y: " + destY);
                    System.out.println("Pos X: " + posX + " Pos Y: " + posY);       
                    Square sq2 = new Square(posX,posY,200);         
                    sq2.draw(w);                        
                }

                while (posX > destX)
                {
                    posX = posX-10;
                    SimpleWindow.delay(100);
                    loop++;
                    System.out.println("Loop: " + loop);
                    System.out.println("Dest X: " + destX + " Dest Y: " + destY);
                    System.out.println("Pos X: " + posX + " Pos Y: " + posY);
                    sq1.draw(w);
                    Square sq2 = new Square(posX,posY,200);         
                    sq2.draw(w);
                }

                while (posY < destY)
                {       
                    posY = posY+10;
                    SimpleWindow.delay(100);
                    loop++;
                    System.out.println("Loop: " + loop);
                    System.out.println("Dest X: " + destX + " Dest Y: " + destY);
                    System.out.println("Pos X: " + posX + " Pos Y: " + posY);
                    sq1.draw(w);
                    Square sq2 = new Square(posX,posY,200);         
                    sq2.draw(w);
                }

                while (posY > destY)
                {
                    posY = posY-10;
                    SimpleWindow.delay(100);
                    loop++;
                    System.out.println("Loop: " + loop);
                    System.out.println("Dest X: " + destX + " Dest Y: " + destY);
                    System.out.println("Pos X: " + posX + " Pos Y: " + posY);
                    sq1.draw(w);
                    Square sq2 = new Square(posX,posY,200);         
                    sq2.draw(w);
                }

            SimpleWindow.delay(10);
            sq1.draw(w);

            //SimpleWindow.clear(w);

    } 
```

}

我很确定我把一切都复杂化了，因为这应该是非常基本的。

最终结果应该如下所示： [最终结果](http://i.stack.imgur.com/ZxUM2.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T12:09:08.887

这是我解决它的方法：

我不太了解有关文档`se.lth.cs.ptdc.square.Square`但我假设它会根据左上角的坐标和侧面大小绘制一个正方形。

所以你有你的第一个正方形左上角的坐标和最后一个正方形中心的坐标。有了这个，得到最后一个正方形左上角的坐标并不难：
`lastX = centerX - side/2`
`lastY = centerY - side/2`

之后，您会发现起点和终点之间的区别：
`diffX = posX - lastX`
`diffY = posY - lastY`

然后再画9个正方形：

```
for (int i=1; i<10; i++){
    squareX = posX + (diffX/10)*i;
    squareY = posY + (diffY/10)*i;
    Square square = new Square(squareX,squareY,200);         
    square.draw(w);
} 
```

实际上你做的第一部分是对的，只是搞砸了那些不必要的检查。希望能帮助到你。

-
问候，svz。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T12:10:00.120

同时更新 X 和 Y：

```
 int jumpX = (destX - posX) / 10;
    int jumpY = (destY - posY) / 10;
    if (posX > destX) {
        int temp = destX;
        destX = posX;
        posX = temp;
    }

    while (posX <= destX)
    {       
            SimpleWindow.delay(100);
            loop++;
            System.out.println("Loop: " + loop);
            System.out.println("Dest X: " + destX + " Dest Y: " + destY);
            System.out.println("Pos X: " + posX + " Pos Y: " + posY);       
            Square sq2 = new Square(posX,posY,200);         
            sq2.draw(w);                        
            posX = posX+jumpX;
            posY = posY+jumpY;
    }    

    SimpleWindow.delay(10);
    sq1.draw(w); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T12:26:03.770

以下是您如何同时向两个方向移动（在对角线上）。

```
static final int Steps = 10;

private void test() {
  int x1 = 100;
  int y1 = 100;
  int x2 = 300;
  int y2 = 500;

  double dx = (double)(x2 - x1) / (double) Steps;
  double dy = (double)(y2 - y1) / (double) Steps;

  double x = x1;
  double y = x2;
  for ( int i = 0; i < Steps; i++) {
    // Simulate the drawing of the square.
    System.out.println("("+x+","+y+")");
    x += dx;
    y += dy;
  }
} 
```

# matlab - matlab设计uipanel

> ID：12838834
> 
> 赞同：1
> 
> 时间：2012-10-11T11:49:07.757
> 
> 标签：matlab, position, uicontrol

我想显示图像（文件路径）并在下面放置单元格。

不幸的是，图像消失了。这是带有图像的 GUI。我希望黄色单元格位于图像下方。 ![在此处输入图像描述](../Images/91f9d809c388656799fe08b2ed6d91aa.png)

这是我更改后的 gui： ![在此处输入图像描述](../Images/67282a4252a483d3858ffd25230a6c83.png)

```
hFig = figure('Name','Step 3 of 4: Choose data for each image','Menubar','none', 'Resize','off', ...
    'WindowStyle','modal', 'Position',[300 300 1150 500]);
set(gcf,'NumberTitle','off')
movegui(hFig, 'center');

%# top/bottom panels
S.fh = uipanel('Parent',hFig, 'BorderType','none', ...
    'Units','normalized', 'Position',[0 0.002 1 0.28]);

Layout = GridLayout(S.fh, ...
'NumRows', 2, ...
'NumCols', 3, ...
'HGap', 10, ...
'VGap', 5, ...
'Margin', 10, ...
'CellMargin', 10, ...
'CellColor', 'y');

for RIdx = 1:Layout.NumRows
    for CIdx = 1:Layout.NumCols

        if (RIdx == 1)
           UIArgs = {'Style','text', 'String',choice{CIdx}};
        else
           UIArgs = {'Style','edit', 'String',''};
        end

        hFig = Layout.Cell(RIdx,CIdx);
        uicontrol(hFig, UIArgs{:});
    end
end

S.pb = uicontrol('style','pushbutton',...
             'units','pix',...
            'position',[380 20 180 30],...
            'string','Submit',...
            'callback',{@pb_call});

S.pc = uicontrol('style','pushbutton',...
             'units','pix',...
            'position',[580 20 180 30],...
            'string','change the image',...
            'callback',{@pc_call});

Update(Layout); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:21:12.023

如果你真的不需要*自己*编程，还有[GridLayout FEX 贡献](http://www.mathworks.com/matlabcentral/fileexchange/29472)：

> GridLayout 的灵感来自 GridBagLayout 管理器。它同样灵活，但更符合我的口味，而且它还需要更少的样板代码。

它肯定会减轻您的编程工作..

# iphone - 关闭弹出 UITableViewController 视图

> ID：12838837
> 
> 赞同：0
> 
> 时间：2012-10-11T11:49:11.730
> 
> 标签：iphone, objective-c, ios4

我怎么知道视图何时关闭？目前正在使用委托模式，捕获 viewDidDisappear 来触发事件......这是正确的使用吗？viewDidDisappear 的缺点是，当我的视图移动到子视图时，事件仍然会触发。

它是我制作的扩展 UITableViewController 的自定义视图...在该表中，您有一个您管理的选项列表，因此在这些屏幕之间移动时，我不希望我的事件触发..我只希望它在什么时候触发我关闭了实际视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T12:11:00.097

现在只要看看你什么时候`UITableView`开始打开你设置的布尔值就像......

首先在你的 .h 文件中定义这个全局变量，如下所示

```
BOOL isTableOpen; 
```

然后在你的 .m 文件中

当您的表格视图通过按钮点击事件或您使用的任何其他内容打开时设置为“是”...

```
isTableOpen = YES; 
```

在您的弹出视图或 UITableview 关闭时设置值`NO`之后

```
isTableOpen = NO; 
```

并检查你的`viewDidDisappear:`，如果`isTableOpen`是真的，那么什么都不做，否则是......

```
-(void)viewDidDisappear:(BOOL)animated{
    if(isTableOpen){
       //call your method which you want...
    }
} 
```

我希望这可以帮助你或得到一些想法..

:)

# android - “Android Market 应用程序错误报告”是否依赖于读取敏感日志权限？

> ID：12838840
> 
> 赞同：0
> 
> 时间：2012-10-11T11:49:17.300
> 
> 标签：android, permissions

我有来自两个来源的错误报告：Google 市场和我的自定义错误报告。对于我的错误报告，我使用 READ SENSITIVE LOG 权限。Google 错误报告是否依赖此权限？我的目标是仅使用 Google 报告，因为许多用户抱怨此安全权限。

**更新** 自定义错误报告可以包含比常规谷歌报告更多的数据。据我的经验，处理异常谷歌信息就足够了。如果错误被深深隐藏 - 错误报告无论如何都没有用。如果有人对如何将有用的信息放入自定义错误日志有很好的建议 - 请告诉我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T11:52:03.500

不，Google 错误报告**不需要**许可`android.permission.READ_LOGS`。

# c# - C# - 我应该使用静态数据库连接吗

> ID：12838844
> 
> 赞同：8
> 
> 时间：2012-10-11T11:49:22.450
> 
> 标签：c#, database, oracle

在我连接到 Orace 数据库的应用程序中，我总是创建一个新连接，打开它，执行 OracleCommands，然后最后关闭它。最近我认为实现静态连接会是一个更好的主意。假设我有一个可以从任何地方访问的静态连接。每次我需要连接到数据库时，我都可以检查我的静态连接的状态，如果它还没有打开，就打开它，然后再关闭它。你认为这会是有益的还是有更多的缺点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-11T11:50:01.593

我假设您在这里使用 ODBC，因为您没有准确说明并且通常使用它...

不，您应该每次都使用新连接，这是 Microsoft 推荐的标准做法。如果您使用 ODBC 等，那么 Windows 会管理这些连接，缓存它们以供重复使用，并且可以更轻松地管理事物的生命周期。

如果您使用静态连接，您可能会提前将其丢弃或在不知情的情况下将其关闭。一般来说，它只是有点尴尬和过早的优化。

> 要部署高性能应用程序，您经常必须使用连接池。但是，当您为 ODBC 使用 .NET Framework 数据提供程序时，您不必启用连接池，因为提供程序会自动管理它。

有关详细信息，请参阅[OdbcConnection](http://msdn.microsoft.com/en-us/library/system.data.odbc.odbcconnection.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T12:31:50.743

一般来说，不，您不应该使用单个连接 - 所有 .NET ADO.NET 提供程序都支持连接池，并且正常模式是根据需要打开/关闭连接（在 a `using`or`try/finally`块中以确保连接发生异常时关闭）。

在单线程客户端应用程序中，您可以不使用共享静态连接，但它不太可能给您带来任何可衡量的性能优势 - 所以不要这样做。

在任何其他应用程序中，您绝对不应该使用共享静态连接，因为它不是线程安全的。

# c# - 查找 xml 配置文件

> ID：12838850
> 
> 赞同：0
> 
> 时间：2012-10-11T11:49:48.143
> 
> 标签：c#, filepath, file-exists

我正在尝试检查是否存在 xml 配置文件。

该文件的名称为 MyApp.exe.config

我在用

```
public static bool FileExistsCheck(string filename, string filepath = "")
{
    if (filepath.Length == 0)
        filepath = Directory.GetCurrentDirectory();
    return File.Exists(filepath + "\\" + filename);
} 
```

`false`尽管文件存在，但仍会返回

谁能建议检查此文件是否存在的正确方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T11:53:28.477

尝试

```
return File.Exists(AppDomain.CurrentDomain.SetupInformation.ConfigurationFile) 
```

[微软](http://msdn.microsoft.com/en-us/library/system.appdomainsetup.configurationfile.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T11:53:25.097

在运行时`Directory.GetCurrentDirectory()`将返回 debug/release/bin 目录路径。配置 XML 文件是否驻留在这些文件夹中？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T11:54:45.853

您可以只检查 File.Exists(CONFIGFILENAME)。因为 .net 从当前目录获取相对路径

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T11:54:54.240

首先，我建议您使用`Path.Combine(path, fileName);`创建路径。

二次使用`Application.StartupPath`，不行`Directory.GetCurrentDirectory`。

第三，确保您的应用程序文件夹包含`MyApp.exe.config`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-11T12:43:37.443

请考虑这种方法：

```
public static bool isFileExist(string filePath)
{
    if (File.Exists(filePath))
        return true;
    else return false;
} 
```

我认为你方法的罪魁祸首是：

```
filepath = Directory.GetCurrentDirectory(); 
```

# java - 嵌套或顺序异常处理？

> ID：12838851
> 
> 赞同：2
> 
> 时间：2012-10-11T11:49:54.273
> 
> 标签：java, exception-handling, coding-style, scope

我想这不一定有一个“正确”的答案，也许这更像是一个风格问题，但我经常发现自己想知道如何构建 try/catch 块。

例如，采用下面我假设的一段代码中概述的两种方法（纯粹是说明性的），我有一个方法会引发我多次调用的异常，但需要根据调用的不同进行不同的处理。同样，不同的处理程序可能会引发不同类型的异常。

```
private Object exceptionMethod() throws Exception {
    throw new Exception("Something bad happened");
}

public void useMethodSequentialHandlers() {
    Object o1; // Must be declared in a wider scope than where it is used
    try {
        o1 = exceptionMethod();
    } catch (Exception ex) {
        // Assume we cannot continue after this exception so we'll return or
        // rethrow to exit the method
        return;
    }

    Object o2; // Must be declared in a wider scope than where it is used
    // Do something that requires o1
    for (int i = 0; i < 100; i++) {
        try {
            o2 = exceptionMethod();
            // Here we would use the objects in some manner
            boolean equal = o1.equals(o2);// Just a pointless example
                                                // to show that both objects
                                                // are required
                // Assume the method does a load of stuff down here
        } catch (Exception ex) {
            // Assume we can continue to the next iteration after this exception
            continue;
        }
    }
} 
```

正如我所看到的，按顺序排列 try/catch 块的优势在于，读者可以更清楚地了解我在什么时候响应异常，因此代码可能更清晰。缺点是我们在方法的各个地方都有异常处理，并且我们在比要求更广泛的范围内声明了变量（这是一件坏事吗？）。

或者：

```
public void useMethodNestedHandlers() {
    try {
        Object o1 = exceptionMethod(); // Can be declared inside scope where it is used
        // Do something that requires o1
        for (int i = 0; i < 100; i++) {
            try {
                Object o2 = exceptionMethod(); // Can be declared inside scope where it is used
                // Here we would use the objects in some manner
                boolean equal = o1.equals(o2); // Just a pointless example
                                                // to show that both objects
                                                // are required
                // Assume the method does a load of stuff down here
            } catch (Exception ex) {
                // Assume we can continue to the next iteration after this
                // exception
                continue;
            }
        }
    } catch (Exception ex) {
        // Assume we cannot continue after this exception so we'll return or
        // rethrow to exit the method
        return;
    }
} 
```

在这里，我们将异常处理逻辑放在一起，变量在它们使用的范围内声明。但是对我来说，异常处理逻辑似乎不太清楚，因为它离起源点更远。有没有人认为哪个会更好，或者我只是担心毫无意义的细节，应该继续我的工作？:-)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:15:44.667

异常的美妙之处在于您*不必*在它们发生的地方处理它们。这就是为什么你实际上应该使用你的第二种风格，但**没有外部 try-catch**：

```
public void useMethodNestedHandlers() {
    Object o1 = exceptionMethod(); // Can be declared inside scope where it is used
    // Do something that requires o1
    for (int i = 0; i < 100; i++) {
        try {
            Object o2 = exceptionMethod(); // Can be declared inside scope where it is used
            // Here we would use the objects in some manner
            boolean equal = o1.equals(o2); // Just a pointless example
                                            // to show that both objects
                                            // are required
            // Assume the method does a load of stuff down here
        } catch (Exception ex) {
            // Assume we can continue to the next iteration after this
            // exception
            continue;
        }
    }
} 
```

为快乐的一天编写代码，让其他人担心失败。这就是实现关注点分离的方法：通常所有故障都由同一段代码处理，并且过早捕获重复代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T12:12:14.037

我相信，在所有情况下，答案都不是从技术分析中明确得出的，应该忽略最初的开发工作并研究代码的未来。

为此，我建议第一种方法是最佳选择，除非有真正的技术理由选择第二种。

总之：

*如果两种风格之间没有**技术**差异，请考虑您的代码的未来读者并使其**尽可能明显**。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T12:04:20.903

我宁愿两者都取决于条件。

**情况1**

```
 Object obj;
   try {
     // do something 
  } catch (Exception e) {
        obj = default_obj; // assign default object
  }

   try {
      // do something either with specific or default object
   } catch (Exception e) {
       // handle exception
   } 
```

即使第一次尝试捕获失败，也使用默认值继续操作

**案例2**

```
try {
    Object obj; 
     // acquire object

    // do something only if acquire object is successful
} catch (Exception e) {
   // handle exception
} 
```

获取对象不成功时，此处不再继续。

在这里，处理异常的方式与其说是一种风格，不如说是一种必要性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T23:22:56.607

代码应该是 1) 正确的，2) 可读的。通常所有不可恢复的异常都应该在应用程序的最高层处理（或根本不处理）。这意味着它们应该正确地显示给用户。所有可恢复的异常都应尽可能“高”地处理。我建议尽可能少使用 try-catch 语句

# javascript - 如何 ASP Button onClick="js 变量"？

> ID：12838861
> 
> 赞同：0
> 
> 时间：2012-10-11T11:50:14.327
> 
> 标签：javascript, jquery, asp.net

**jQuery**

```
$(document).ready(function () {
        $('#ButtonRadioValue').click(function () {
            var selValue = $('input[name=radio]:checked').val();
        });
    }); 
```

**收音机**

```
<div id="radio" align="center">
    <input type="radio" id="radio1" value="BtnNextCaseClick" name="radio" checked="checked"/><label for="radio1" style="width: 109px; margin-right:-.9em">Next</label>
    <input type="radio" id="radio2" value="CloseCase" name="radio" /><label for="radio2" style="margin-right:-.9em">Close Case</label>
    <input type="radio" id="radio3" value="CloseWeb" name="radio" /><label for="radio3" style="width: 109px">Close Web</label>
</div> 
```

所以，在那个收音机下面我有一个按钮，我希望它根据收音机选择执行不同的代码。该值存储在`selValue`. 那么我怎样才能告诉`onclick`事件运行里面的内容`selValue`

**按钮**

```
<asp:Button ID="ButtonRadioValue" CssClass="customButton" runat="server" onclick=" js variable here" Text="Aceptar" style="width: 111px; height: 30px"/> 
```

谢谢。

**编辑**

因为没有真正需要客户端程序。我是从服务器端做的`this.radio1.Checked == true`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:00:50.930

听起来您正在寻找`eval()`.

```
var selValue = $('input[name=radio]:checked').val();
eval(selValue); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T12:01:11.487

Click 是一个服务器事件。如果你想让 JS 代码执行使用`onclientclick`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T12:02:17.793

您可以尝试使用`OnClientClick`事件来调用客户端功能

链接： http: [//msdn.microsoft.com/fr-fr/library/system.web.ui.webcontrols.button.onclientclick (v=vs.80).aspx](http://msdn.microsoft.com/fr-fr/library/system.web.ui.webcontrols.button.onclientclick(v=vs.80).aspx)

服务器端：OnClick

客户端：OnClientClick

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-11T12:03:11.227

**更新**：看来我误解了需要什么，所以我将在下面留下我的原件

如果您想知道在回发时选择了哪个单选按钮，则可以制作收音机的服务器端控件（通过转换为`<asp:RadioButton>`或简单地添加`runat="server"`到它们。然后您可以测试`radio1.Checked`等。

否则，您可以使用`Request.Form("radio1")`. 如果结果是`Nothing`(VB.Net) 或`null`(C#)，则未选择无线电。如果那里有一个值，您就知道选择了收音机。

* * *

**原始/错误假设**

除非我误解了这个问题，否则您不需要在 中具有特殊属性，`<asp:Button>`因为您可以在您已经编写的 jQuery 中执行此操作。

在您的后面添加以下内容`var selValue...`

```
$("#" + selValue).trigger("click"); 
```

生产...

```
$(document).ready(function () {
    $('#ButtonRadioValue').click(function () {
        var selValue = $('input[name=radio]:checked').val();
        $("#" + selValue).trigger("click");
    });
}); 
```

需要注意的一点是，如果控件在母版页、占位符等中，那么按钮将需要完整的 ClientID，否则 jQuery 将找不到它

* * *

附带说明一下， 的`OnClick`属性`<asp:Button>`用于连接事件处理程序，以便单击回发到服务器。如果你想运行 javascript，那么你想使用该`OnClientClick`属性，它将`onclick`在呈现的 HTML 中生成一个属性

# php - KnpGaufette/Symfony2/AmazonS3

> ID：12838862
> 
> 赞同：4
> 
> 时间：2012-10-11T11:50:16.573
> 
> 标签：php, curl, symfony, configuration, amazon-s3

我正在尝试结合 Symfony2、KnpGaufetteBundle 和 Amazon S3。从 KnpGaufette Bundle 我得到了一个用于我的配置的 xml 定义。但它在 xml 中，我的配置在 yml 中。不知何故，我无法理解它。如何在 yml 中定义以下变量？它们是什么意思？

```
<service id="acme.s3" class="AmazonS3">
    <argument type="collection">
        <argument key="key">%acme.aws_key%</argument>
        <argument key="secret">%acme.aws_secret_key%</argument>
    </argument>
</service>

<service id="acme.s3.adapter" class="Gaufrette\Adapter\AmazonS3">
    <argument type="service" id="acme.s3"></argument>
    <argument>%acme.s3.bucket_name%</argument>
</service>

<service id="acme.fs" class="Gaufrette\Filesystem">
    <argument type="service" id="acme.s3.adapter"></argument>
</service> 
```

* * *

## 更新完整的解决方案

所以，要真正让它工作，我们不仅要在 yml 中写下配置（这已由 chmeliuk -> 谢谢），我们还需要为 curl 配置 cacert.pem 文件。你可以在这里得到一个合适的：http: [//curl.haxx.se/ca/cacert.pem](http://curl.haxx.se/ca/cacert.pem)

现在把它放在任何你想要的地方，然后使用下面的行加上额外的**certificate_authority**条目：

```
services:
    acme.s3:
        class: AmazonS3
        arguments:
            options: { key: %acme.aws_key%, secret: %acme.aws_secret_key%, certificate_authority: "pathWhereYouDidPutThisFile/cacert.pem" }

    acme.s3.adapter:
        class: Gaufrette\Adapter\AmazonS3
        arguments: 
            service: @acme.s3
            bucket_name: %acme.s3.bucket_name%

    acme.fs:
        class: Gaufrette\Filesystem
        arguments: 
            adapter: @acme.s3.adapter 
```

这解决了您可能遇到的 CA Cert cURL 错误 60。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T12:01:42.377

相同的配置，但采用 yml 格式。

```
services:
    acme.s3:
        class: AmazonS3
        arguments:
            options: { key: %acme.aws_key%, secret: %acme.aws_secret_key% }

    acme.s3.adapter:
        class: Gaufrette\Adapter\AmazonS3
        arguments: 
            service: @acme.s3
            bucket_name: %acme.s3.bucket_name%

    acme.fs:
        class: Gaufrette\Filesystem
        arguments: 
            adapter: @acme.s3.adapter 
```

定义如下参数：%acme.aws_key%、%acme.aws_secret_key%、%acme.s3.bucket_name% 添加到您的项目parameters.yml 文件（或您定义服务的相同配置）下一行：

```
parameters:
    acme.aws_key: YOUR_AWS_KEY
    acme.aws_secret_key: YOUR_AWS_SECRET_KEY
    acme.s3.bucket_name: cool_bucket_name 
```

# ruby-on-rails - Rails 引擎和设计

> ID：12838863
> 
> 赞同：3
> 
> 时间：2012-10-11T11:50:17.833
> 
> 标签：ruby-on-rails, devise, content-management-system, rails-engines

我有一个 Rails 引擎，我想在其中使用 Devise。我按照[本指南](https://github.com/plataformatec/devise/wiki/How-To%3a-Use-devise-inside-a-mountable-engine)正常安装了设计。

我在我的引擎 devise.rb 中添加了这个：

```
Devise.setup do |config|
  config.router_name = :cms_user
end 
```

我在我的路线文件中添加了这个：

```
Cms::User::Engine.routes.draw do
  devise_for :users, {
    class_name: 'Cms::User',
    module: :devise
  }
end 
```

我在我的路线中添加了这个：

```
devise_for :users, {
  class_name: 'Cms::User',
  module: :devise
} 
```

但是我不断收到此错误：

```
undefined method 'cms_user' 
```

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T15:31:22.333

以下是操作方法：

1.  Rails 插件新 cms --mountable -d postgresql

2：正常安装设备

3：在主应用程序路由文件中添加：

```
 devise_for :users, {
     class_name: 'Cms::User',
     module: :devise
   } 
```

在设计 wiki 中提到的这一行给我带来了问题：

```
config.router_name = :Cms_user 
```

维基： [https ://github.com/plataformatec/devise/wiki/How-To:-Use-devise-inside-a-mountable-engine](https://github.com/plataformatec/devise/wiki/How-To:-Use-devise-inside-a-mountable-engine)

# google-app-engine - appcfg appengine 502 本地主机中的代理错误

> ID：12838868
> 
> 赞同：0
> 
> 时间：2012-10-11T11:50:27.057
> 
> 标签：google-app-engine, proxy, google-cloud-datastore

我正在尝试将一些数据上传到 appengine 中的本地数据存储区。我正在使用的命令是下一个：

```
 appcfg.py upload_data --config_file="C:\config.yml" --filename="C:\mycsv.csv" --url=http://localhost:8888/remote_api --kind=MyEntity 
```

问题是我在公司代理后面工作，即使尝试连接到本地主机服务器，我也会收到下一个错误：

```
 Error Code: 502 Proxy Error. The ISA Server denied the specified Uniform Resource Locator (URL). (12202) 
```

似乎身份验证没问题，但代理试图过滤我与自己计算机的连接。

关于如何解决这个问题的一些想法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:37:16.307

删除/禁用网络的代理设置，然后尝试上述命令。我遇到了类似的问题，当我禁用代理设置时，这个问题得到了解决。

# objective-c - 设置自定义 tableviewCell 的背景

> ID：12838870
> 
> 赞同：0
> 
> 时间：2012-10-11T11:50:28.363
> 
> 标签：objective-c, ios, uitableview, uicolor

我想将我的 customTableViewCell 的背景设置为黑色。经过一番搜索，最常见的答案是在我的 CellForRowAtIndex 中执行此操作。

```
cell.contentView.backgroundColor = [UIColor clearColor];
cell.backgroundColor = [UIColor blackColor]; 
```

但这没有帮助。有谁能够帮助我？

提前致谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:04:59.967

执行以下操作并记住一件事，您在 contentview 上添加的任何子视图都应该有 clearcolor。在我的情况下，我有默认的 textLabel，所以我将它设置为 clear color。

```
 cell.textLabel.backgroundColor = [UIColor clearColor];
    cell.contentView.backgroundColor = [UIColor blackColor]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T11:59:02.817

设置背景如下： cell.contentView.backgroundColor = [UIColor blackColor];

# windows-installer - 卸载不会删除 INSTALLDIR - Basic MSI - InstallShield 2012 中的文件

> ID：12838882
> 
> 赞同：7
> 
> 时间：2012-10-11T11:51:05.880
> 
> 标签：windows-installer, installshield, installshield-2012, basic-msi

我正在使用 InstallShield 2012 Spring Professional 创建一个基本 MSI 安装程序。

在这里，我在应用程序文件中创建了一个文件夹结构`C:\Program files\Test Setup\Productname`，`Test Setup`它是`INSTALLDIR`，并且在其中我有一个子目录，其中一个 ( `launch`) 包含`.exe`文件。

我已经使用`Add files and folders`Project Assistant 的应用程序文件菜单中的选项添加了这些文件和目录结构。

安装产品后，当我卸载它时，我发现虽然`.exe`删除了一些`.exe`文件，但启动子目录中的一些文件并没有删除。这些`.exe`都没有启动。

InstallShield 应该删除它创建的所有文件和文件夹，除非它们已被修改或正在使用，但我在卸载过程中没有运行这些文件，也没有更改任何文件。我哪里错了？

# android - 构建音频播放器时出错

> ID：12838886
> 
> 赞同：0
> 
> 时间：2012-10-11T11:51:13.590
> 
> 标签：android, android-activity, android-mediaplayer, android-logcat

[我正在使用来自http://www.androidhive.info/2012/03/android-building-audio-player-tutorial/](http://www.androidhive.info/2012/03/android-building-audio-player-tutorial/)的音频播放器现有代码的构建。但是我在模拟器中运行此代码时出现以下错误。

日志猫：

```
10-11 17:17:56.707: E/AndroidRuntime(303): FATAL EXCEPTION: main
10-11 17:17:56.707: E/AndroidRuntime(303): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.androidbuildingmusicplayeractivity/com.example.androidbuildingmusicplayeractivity.AndroidBuildingMusicPlayerActivity}: java.lang.NullPointerException
10-11 17:17:56.707: E/AndroidRuntime(303):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
10-11 17:17:56.707: E/AndroidRuntime(303):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
10-11 17:17:56.707: E/AndroidRuntime(303):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
10-11 17:17:56.707: E/AndroidRuntime(303):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
10-11 17:17:56.707: E/AndroidRuntime(303):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-11 17:17:56.707: E/AndroidRuntime(303):  at android.os.Looper.loop(Looper.java:123)
10-11 17:17:56.707: E/AndroidRuntime(303):  at android.app.ActivityThread.main(ActivityThread.java:4627)
10-11 17:17:56.707: E/AndroidRuntime(303):  at java.lang.reflect.Method.invokeNative(Native Method)
10-11 17:17:56.707: E/AndroidRuntime(303):  at java.lang.reflect.Method.invoke(Method.java:521)
10-11 17:17:56.707: E/AndroidRuntime(303):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
10-11 17:17:56.707: E/AndroidRuntime(303):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
10-11 17:17:56.707: E/AndroidRuntime(303):  at dalvik.system.NativeStart.main(Native Method)
10-11 17:17:56.707: E/AndroidRuntime(303): Caused by: java.lang.NullPointerException
10-11 17:17:56.707: E/AndroidRuntime(303):  at com.example.androidbuildingmusicplayeractivity.AndroidBuildingMusicPlayerActivity.onCreate(AndroidBuildingMusicPlayerActivity.java:76)
10-11 17:17:56.707: E/AndroidRuntime(303):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
10-11 17:17:56.707: E/AndroidRuntime(303):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
10-11 17:17:56.707: E/AndroidRuntime(303):  ... 11 more 
```

SongsManager 类：

```
public class SongsManager {

    // SDCard Path
    final String MEDIA_PATH = new String("/sdcard/");
    private ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

    // Constructor
    public SongsManager(){

    }

    /**
     * Function to read all mp3 files from sdcard
     * and store the details in ArrayList
     * */
    public ArrayList<HashMap<String, String>> getPlayList(){
        File home = new File(MEDIA_PATH);

        if (home.listFiles(new FileExtensionFilter()).length > 0) {
            for (File file : home.listFiles(new FileExtensionFilter())) {
                HashMap<String, String> song = new HashMap<String, String>();
                song.put("songTitle", file.getName().substring(0, (file.getName().length() - 4)));
                song.put("songPath", file.getPath());

                // Adding each song to SongList
                songsList.add(song);
            }
        }
        // return songs list array
        return songsList;
    }

    /**
     * Class to filter files which are having .mp3 extension
     * */
    class FileExtensionFilter implements FilenameFilter {
        public boolean accept(File dir, String name) {
            return (name.endsWith(".mp3") || name.endsWith(".MP3"));
        }
    }

} 
```

AndroidBuildingMusicPlayerActivity.java：

```
public class AndroidBuildingMusicPlayerActivity extends Activity implements OnCompletionListener, SeekBar.OnSeekBarChangeListener{

    private ImageButton btnPlay;
    private ImageButton btnForward;
    private ImageButton btnBackward;
    private ImageButton btnNext;
    private ImageButton btnPrevious;
    private ImageButton btnPlaylist;
    private ImageButton btnRepeat;
    private ImageButton btnShuffle;
    private SeekBar songProgressBar;
    private TextView songTitleLabel;
    private TextView songCurrentDurationLabel;
    private TextView songTotalDurationLabel;
    // Media Player
    private  MediaPlayer mp;
    // Handler to update UI timer, progress bar etc,.
    private Handler mHandler = new Handler();;
    private SongsManager songManager;
    private Utilities utils;
    private int seekForwardTime = 5000; // 5000 milliseconds
    private int seekBackwardTime = 5000; // 5000 milliseconds
    private int currentSongIndex = 0; 
    private boolean isShuffle = false;
    private boolean isRepeat = false;
    private ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);     
        // All player buttons
        btnPlay = (ImageButton) findViewById(R.id.btnPlay);
        btnForward = (ImageButton) findViewById(R.id.btnForward);
        btnBackward = (ImageButton) findViewById(R.id.btnBackward);
        btnNext = (ImageButton) findViewById(R.id.btnNext);
        btnPrevious = (ImageButton) findViewById(R.id.btnPrevious);
        btnPlaylist = (ImageButton) findViewById(R.id.btnPlaylist);
        btnRepeat = (ImageButton) findViewById(R.id.btnRepeat);
        btnShuffle = (ImageButton) findViewById(R.id.btnShuffle);
        songProgressBar = (SeekBar) findViewById(R.id.songProgressBar);
        songTitleLabel = (TextView) findViewById(R.id.songTitle);
        songCurrentDurationLabel = (TextView) findViewById(R.id.songCurrentDurationLabel);
        songTotalDurationLabel = (TextView) findViewById(R.id.songTotalDurationLabel);

        // Mediaplayer
        mp = new MediaPlayer();
        songManager = new SongsManager();
        utils = new Utilities();        
        // Listeners
        songProgressBar.setOnSeekBarChangeListener(this); // Important
        mp.setOnCompletionListener(this); // Important

        // Getting all songs list
        songsList = songManager.getPlayList();

        // By default play first song
        playSong(0);

        /**
         * Play button click event
         * plays a song and changes button to pause image
         * pauses a song and changes button to play image
         * */
        btnPlay.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // check for already playing
                if(mp.isPlaying()){
                    if(mp!=null){
                        mp.pause();
                        // Changing button image to play button
                        btnPlay.setImageResource(R.drawable.btn_play);
                    }
                }else{
                    // Resume song
                    if(mp!=null){
                        mp.start();
                        // Changing button image to pause button
                        btnPlay.setImageResource(R.drawable.btn_pause);
                    }
                }

            }
        });

        /**
         * Forward button click event
         * Forwards song specified seconds
         * */
        btnForward.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // get current song position                
                int currentPosition = mp.getCurrentPosition();
                // check if seekForward time is lesser than song duration
                if(currentPosition + seekForwardTime <= mp.getDuration()){
                    // forward song
                    mp.seekTo(currentPosition + seekForwardTime);
                }else{
                    // forward to end position
                    mp.seekTo(mp.getDuration());
                }
            }
        });

        /**
         * Backward button click event
         * Backward song to specified seconds
         * */
        btnBackward.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // get current song position                
                int currentPosition = mp.getCurrentPosition();
                // check if seekBackward time is greater than 0 sec
                if(currentPosition - seekBackwardTime >= 0){
                    // forward song
                    mp.seekTo(currentPosition - seekBackwardTime);
                }else{
                    // backward to starting position
                    mp.seekTo(0);
                }

            }
        });

        /**
         * Next button click event
         * Plays next song by taking currentSongIndex + 1
         * */
        btnNext.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // check if next song is there or not
                if(currentSongIndex < (songsList.size() - 1)){
                    playSong(currentSongIndex + 1);
                    currentSongIndex = currentSongIndex + 1;
                }else{
                    // play first song
                    playSong(0);
                    currentSongIndex = 0;
                }

            }
        });

        /**
         * Back button click event
         * Plays previous song by currentSongIndex - 1
         * */
        btnPrevious.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                if(currentSongIndex > 0){
                    playSong(currentSongIndex - 1);
                    currentSongIndex = currentSongIndex - 1;
                }else{
                    // play last song
                    playSong(songsList.size() - 1);
                    currentSongIndex = songsList.size() - 1;
                }

            }
        });

        /**
         * Button Click event for Repeat button
         * Enables repeat flag to true
         * */
        btnRepeat.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                if(isRepeat){
                    isRepeat = false;
                    Toast.makeText(getApplicationContext(), "Repeat is OFF", Toast.LENGTH_SHORT).show();
                    btnRepeat.setImageResource(R.drawable.btn_repeat);
                }else{
                    // make repeat to true
                    isRepeat = true;
                    Toast.makeText(getApplicationContext(), "Repeat is ON", Toast.LENGTH_SHORT).show();
                    // make shuffle to false
                    isShuffle = false;
                    btnRepeat.setImageResource(R.drawable.btn_repeat_focused);
                    btnShuffle.setImageResource(R.drawable.btn_shuffle);
                }   
            }
        });

        /**
         * Button Click event for Shuffle button
         * Enables shuffle flag to true
         * */
        btnShuffle.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                if(isShuffle){
                    isShuffle = false;
                    Toast.makeText(getApplicationContext(), "Shuffle is OFF", Toast.LENGTH_SHORT).show();
                    btnShuffle.setImageResource(R.drawable.btn_shuffle);
                }else{
                    // make repeat to true
                    isShuffle= true;
                    Toast.makeText(getApplicationContext(), "Shuffle is ON", Toast.LENGTH_SHORT).show();
                    // make shuffle to false
                    isRepeat = false;
                    btnShuffle.setImageResource(R.drawable.btn_shuffle_focused);
                    btnRepeat.setImageResource(R.drawable.btn_repeat);
                }   
            }
        });

        /**
         * Button Click event for Play list click event
         * Launches list activity which displays list of songs
         * */
        btnPlaylist.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                Intent i = new Intent(AndroidBuildingMusicPlayerActivity.this, PlayListActivity.class);
                startActivityForResult(i, 100);         
            }
        });

    }

    /**
     * Receiving song index from playlist view
     * and play the song
     * */
    @Override
    protected void onActivityResult(int requestCode,
                                     int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        if(resultCode == 100){
             currentSongIndex = data.getExtras().getInt("songIndex");
             // play selected song
             playSong(currentSongIndex);
        }

    }

    /**
     * Function to play a song
     * @param songIndex - index of song
     * */
    public void  playSong(int songIndex){
        // Play song
        try {
            mp.reset();
            mp.setDataSource(songsList.get(songIndex).get("songPath"));
            mp.prepare();
            mp.start();
            // Displaying Song title
            String songTitle = songsList.get(songIndex).get("songTitle");
            songTitleLabel.setText(songTitle);

            // Changing Button Image to pause image
            btnPlay.setImageResource(R.drawable.btn_pause);

            // set Progress bar values
            songProgressBar.setProgress(0);
            songProgressBar.setMax(100);

            // Updating progress bar
            updateProgressBar();            
        } catch (IllegalArgumentException e) {
            e.printStackTrace();
        } catch (IllegalStateException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    /**
     * Update timer on seekbar
     * */
    public void updateProgressBar() {
        mHandler.postDelayed(mUpdateTimeTask, 100);        
    }   

    /**
     * Background Runnable thread
     * */
    private Runnable mUpdateTimeTask = new Runnable() {
           public void run() {
               long totalDuration = mp.getDuration();
               long currentDuration = mp.getCurrentPosition();

               // Displaying Total Duration time
               songTotalDurationLabel.setText(""+utils.milliSecondsToTimer(totalDuration));
               // Displaying time completed playing
               songCurrentDurationLabel.setText(""+utils.milliSecondsToTimer(currentDuration));

               // Updating progress bar
               int progress = (int)(utils.getProgressPercentage(currentDuration, totalDuration));
               //Log.d("Progress", ""+progress);
               songProgressBar.setProgress(progress);

               // Running this thread after 100 milliseconds
               mHandler.postDelayed(this, 100);
           }
        };

    /**
     * 
     * */
    @Override
    public void onProgressChanged(SeekBar seekBar, int progress, boolean fromTouch) {

    }

    /**
     * When user starts moving the progress handler
     * */
    @Override
    public void onStartTrackingTouch(SeekBar seekBar) {
        // remove message Handler from updating progress bar
        mHandler.removeCallbacks(mUpdateTimeTask);
    }

    /**
     * When user stops moving the progress hanlder
     * */
    @Override
    public void onStopTrackingTouch(SeekBar seekBar) {
        mHandler.removeCallbacks(mUpdateTimeTask);
        int totalDuration = mp.getDuration();
        int currentPosition = utils.progressToTimer(seekBar.getProgress(), totalDuration);

        // forward or backward to certain seconds
        mp.seekTo(currentPosition);

        // update timer progress again
        updateProgressBar();
    }

    /**
     * On Song Playing completed
     * if repeat is ON play same song again
     * if shuffle is ON play random song
     * */
    @Override
    public void onCompletion(MediaPlayer arg0) {

        // check for repeat is ON or OFF
        if(isRepeat){
            // repeat is on play same song again
            playSong(currentSongIndex);
        } else if(isShuffle){
            // shuffle is on - play a random song
            Random rand = new Random();
            currentSongIndex = rand.nextInt((songsList.size() - 1) - 0 + 1) + 0;
            playSong(currentSongIndex);
        } else{
            // no repeat or shuffle ON - play next song
            if(currentSongIndex < (songsList.size() - 1)){
                playSong(currentSongIndex + 1);
                currentSongIndex = currentSongIndex + 1;
            }else{
                // play first song
                playSong(0);
                currentSongIndex = 0;
            }
        }

    }
    @Override
     public void onDestroy(){
     super.onDestroy();
        mp.release();
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T11:44:23.440

我尝试了另一个类似的初学者媒体播放器代码，我花了一段时间才意识到，我崩溃的原因是它无法处理空文件夹。

由于我的 sdcard 根目录中没有 mp3，我将其更改为`sdcard/Music`，我将音乐保存在其中，一切正常。

我没有仔细查看您的代码，但这可能与它试图获取一个空的文件列表相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T19:52:16.610

这部分不正确，但这不是您的问题的原因：

**原始代码：**

```
 public void onClick(View arg0) {
           // check for already playing
            if(mp.isPlaying()){
                if(mp!=null){
                    mp.pause();
                    // Changing button image to play button
                    btnPlay.setImageResource(R.drawable.btn_play);
                } 
```

**应该：**

```
 public void onClick(View arg0) {
           // check for already playing
            if(mp!=null){
                if(mp.isPlaying()){
                    mp.pause();
                    // Changing button image to play button
                    btnPlay.setImageResource(R.drawable.btn_play);
                } 
```

问题是您的堆栈跟踪清楚地表明问题不是这个（虽然这也会导致 NullPointerException，但只有在单击按钮后才会浮出水面......）

我会尝试再调查一下。

# eclipse-plugin - 如何删除“文件搜索”对话框页面

> ID：12838894
> 
> 赞同：0
> 
> 时间：2012-10-11T11:51:38.860
> 
> 标签：eclipse-plugin, eclipse-rcp

有谁知道如何在 Eclipse 的搜索对话框中禁用“文件搜索”页面。

我刚刚`ISearchPage`使用`org.eclipse.search.searchPages`扩展实现了我自己的。它工作得很好，但我无法删除默认显示在搜索对话框中的“文件搜索”对话框页面。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T12:20:28.253

似乎使用扩展程序`org.eclipse.ui.activities`可以解决问题。
1.添加扩展2.用 id 向这个扩展添加`org.eclipse.ui.activities`
一个新`activity`的（例如 disable.default.search） 3.向这个扩展添加
一个新`"activityPatternBinding`的并将活动 id 设置为`activity`（例如 disable.default.search）的 id并将模式设置为 org.eclipse.search.*

这样做您将删除“搜索”对话框中的“文件搜索”选项卡项以及应用程序中的“搜索”菜单。

# javascript - Javascript正则表达式删除不需要的 ，

> ID：12838895
> 
> 赞同：5
> 
> 时间：2012-10-11T11:51:41.840
> 
> 标签：javascript, jquery, regex

我有一个像这样的JS搅拌
`&lt;div id="grouplogo_nav"&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;ul&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;li&gt;&lt;a class="group_hlfppt" target="_blank" href="http://www.hlfppt.org/"&gt;&amp;nbsp;&lt;/a&gt;&lt;/li&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/ul&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/div&gt;`

我需要删除所有`<br>`并且`$nbsp;`仅介于`&gt;`and之间的内容`&lt;`。我试图写一个正则表达式，但没有做对。有没有人有解决方案。

**编辑 ：**

请注意，我只想删除标签 b/w`&gt;`和`&lt;`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T12:25:28.327

避免在 html 上使用正则表达式！

尝试从字符串创建一个临时 div，并使用 DOM 从中删除任何`br`标签。这比使用正则表达式解析 html 更加健壮，这可能[对您的健康有害](https://stackoverflow.com/a/1732454/36537)：

```
var tempDiv = document.createElement('div');
tempDiv.innerHTML = mystringwithBRin;
var nodes = tempDiv.childNodes;
for(var nodeId=nodes.length-1; nodeId >= 0; --nodeId) {
    if(nodes[nodeId].tagName === 'br') {
        tempDiv.removeChild(nodes[nodeId]);
    }
}
var newStr = tempDiv.innerHTML; 
```

请注意，我们在子节点上反向迭代，以便在删除给定子节点后节点 ID 保持有效。

[http://jsfiddle.net/fxfrt/](http://jsfiddle.net/fxfrt/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T11:53:14.553

```
myString = myString.replace(/^(&nbsp;|<br>)+/, ''); 
```

... where`/.../`表示正则表达式，`^`表示字符串的开头，`($nbsp;|<br>)`表示`"&nbsp;`or `<br>"`，+ 表示“前一个表达式的一次或多次出现”。然后简单地用一个空字符串替换那个完全匹配。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T12:33:01.507

```
s.replace(/(&gt;)(?:&nbsp;|<br>)+(\s?&lt;)/g,'$1$2'); 
```

不要在生产中使用它。请参阅 Phil H 的回答。

**编辑：**我试着解释一下，希望我的英语足够好。

基本上我们这里有两种不同的括号。第一对和第三对`()`是普通括号。它们用于记住与封闭模式匹配的字符并将这些字符组合在一起。对于第二对，我们不需要记住字符以供以后使用，因此我们通过使用表单禁用“记住”功能，`(?:)`并且仅对字符进行分组以使`+`工作按预期进行。`+`量词的意思是“一次或多次出现”，因此`&nbsp;`或`<br>`必须出现一次或多次。最后一部分`(\s?&lt;)`匹配一个空白字符 ( `\s`)，它可能会丢失或出现一次 ( `?`)，后跟字符`&lt;`。`$1`和`$2`是一种由第一个和第三个括号的记住字符替换的变量。

MDN 提供了一个[很好的表格](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)，它解释了所有的特殊字符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T11:56:16.040

您需要全局替换。也不要忘记你可以
关闭
。尝试这个：

```
myString = myString.replace(/(&nbsp;|<br>|<br \/>)/g, ''); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-29T07:02:22.523

这对我有用，请注意多行

```
myString = myString.replace(/(&nbsp;|<br>|<br \/>)/gm, ''); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-11T11:54:20.390

```
myString = myString.replace(/^(&nbsp;|<br>)+/, ''); 
```

希望这可以帮助

# ruby - 发生 Net::SMTPFatalError，550 中继被拒绝

> ID：12838896
> 
> 赞同：1
> 
> 时间：2012-10-11T11:51:43.650
> 
> 标签：ruby, ruby-on-rails-3, actionmailer

我在生产环境中收到此错误消息。这是在用户创建期间出现的，并且在创建用户时，一封带有密码和其他详细信息的邮件会发送给用户

```
Net::SMTPFatalError occurred in users#create:

  550 Relaying denied 
```

对此有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T14:21:07.193

**This worked for me:**

The servers MIP (Mapped IP) address needs to be added to the mail router's relay list. It was not added and that was the reason it was rejecting. The receiver IP address was added and the mail was sent again.

# ios - 自动淡入和淡出多个图像

> ID：12838899
> 
> 赞同：1
> 
> 时间：2012-10-11T11:51:58.133
> 
> 标签：ios, uiimageview, fade

我在这里，需要帮助。我使用故事板并希望制作一个自动淡入淡出的照片秀。问题是我有 10 张图像，现在不知道如何以编程方式制作它。我希望有人能帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T12:04:21.460

```
 mainImageView = [[UIImageView alloc]init];
    NSArray *animationArray = [NSArray arrayWithObjects:[UIImage imageNamed:@"first.png"],[UIImage imageNamed:@"second.png"],[UIImage imageNamed:@"third.png"],[UIImage imageNamed:@"fourth.png"],[UIImage imageNamed:@"fifth.png"],[UIImage imageNamed:@"sixth.png"],[UIImage imageNamed:@"seventh.png"],[UIImage imageNamed:@"eight.png"],[UIImage imageNamed:@"nine.png"],[UIImage imageNamed:@"ten.png"], nil]; //add your images here
                               [NSTimer scheduledTimerWithTimeInterval:0.5 target:self selector:@selector(crossfade) userInfo:nil repeats:YES];
    [mainImageView  setFrame:CGRectMake(50,50,100,100)];
                               mainImageView.animationImages = animationArray; //mainImageView is   imageview
                               mainImageView.animationDuration = 10;
                               mainImageView.animationRepeatCount = 0;
                               [mainImageView startAnimating];

     [self.view addSubview:mainImageView];

    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)crossfade {
    [UIView animateWithDuration:0.5 delay:0.0 options:UIViewAnimationOptionCurveEaseInOut animations:^{
                                       mainImageView.alpha = !mainImageView.alpha;
                                   }completion:^(BOOL done){
                                    //
                }];
} 
```

# mysql - 是否可以在mysql查询中实现循环

> ID：12838900
> 
> 赞同：0
> 
> 时间：2012-10-11T11:51:58.583
> 
> 标签：mysql

你好，我有一张桌子：

**队伍：**如下

```
|Team ID  | Member ID|
| 1       |  10       |
| 2       |  230      |
| 1       |  11       |
| 4       |  56       |
| 1       |  15       |
| 2       |  236      |
| 1       |  18       |
| 3       |  43       |
| 1       |  17       | 
```

我这样做是为了找到一个团队的成员：

从 team_ID = 1 的团队中选择成员；它给了我 10,11,15,18,17

**我对每个成员都有一个不同的表**。所以我尝试了这样的方法来从不同的表中获取数据，它工作正常：

```
SELECT * FROM 10
UNION ALL 
SELECT * FROM 11
UNION ALL 
SELECT * FROM 15
UNION ALL 
SELECT * FROM 18
UNION ALL 
SELECT * FROM 17 
```

是否可以将这**2 个查询变成 1 个查询**，因为团队成员会动态变化......

任何帮助请...

让我更清楚一点：我的最终结果应该只包含来自不同**成员**表的数据。希望我清楚..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T11:58:25.157

首先，我***强烈建议***您考虑重新设计您的表结构，否则您将很难查询这些数据。

你可以做这样的事情。当然，这仅在您知道要查询的表成员表时才有效：

```
select *
from teams t
left join
(
  SELECT *, 10 Member 
  FROM 10
  UNION ALL 
  SELECT * , 11 Member 
  FROM 11
  UNION ALL 
  SELECT * , 15 Member 
  FROM 15
  UNION ALL 
  SELECT * , 18 Member 
  FROM 18
  UNION ALL 
  SELECT * , 17 Member 
  FROM 17
) m
  on t.memberid = m.member 
```

如果您想动态地执行此操作，那么您可以使用类似于以下的准备好的语句：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'select *, ',
      MemberID,
      ' AS Member from ', MemberID, '
       '
    )
  separator ' union all ') 
  INTO @sql
FROM teams
WHERE TeamID = 1;

SET @sql = CONCAT('select *
                   from teams t 
                   left join
                   (', @sql, ' ) m
                     on t.memberid = m.member');

-- select @sql

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T12:22:12.700

它可以通过 `strored procedure or function` ,

编写函数并获取成员的计数，基于计数构造循环将被执行用于 `temp` 存储结果。

在 `PostgreSQL` 动态查询构造中可以使用 `EXECUTE`

# nokogiri - nokogiri 中的混合节点

> ID：12838901
> 
> 赞同：-1
> 
> 时间：2012-10-11T11:52:02.610
> 
> 标签：nokogiri

我想用 Nokogiri 创建一个既有文本内容又有属性的节点。例如，我想生成 XML：

```
<root blah="value">text content</root> 
```

我尝试这样做：

```
Nokogiri::XML::Builder.new do 
  root(:blah=>"value") "text content"
end 
```

但 Ruby 抱怨：

```
create-config.rb:8: syntax error, unexpected tSTRING_BEG, expecting keyword_end
  root(:blah => "value") "text content" 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:07:51.750

我找到了解决方案。我不得不使用`{}`和`text`

```
Nokogiri::XML::Builder.new do
  root(:blah => "value") { 
    text("text content") 
}
end 
```

# view - 自定义输入视图在 iPhone iOS 6 模拟器中不再起作用

> ID：12838906
> 
> 赞同：2
> 
> 时间：2012-10-11T11:52:07.457
> 
> 标签：view, input, uitextfield, ios6, customization

我制作了一个具有自定义输入视图的应用程序，如果使用带有基本 SDK 4 的 xcode 4.3 编译但在将 xcode 更新到最新版本和使用 ios 6 sdk 编译输入视图不再起作用。如果输入按钮被录音，文本不会显示在文本字段中。有没有人遇到这个问题或现在它的原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:03:06.773

确保使用宽度或高度大于零的框架初始化自定义输入视图。据我所知，如果不是这种情况，那么 iOS 6 甚至不会将视图添加到视图层次结构中。

就我而言，调用 initWithFrame:(CGRect) 时，我的键盘视图框架的宽度为零。在 iOS 5 中一切正常，因为框架宽度会在布局期间设置，但在 iOS 6 中，键盘甚至不在视图层次结构中。

我使用[iOS Hierarchy Viewer](https://github.com/glock45/iOS-Hierarchy-Viewer)来解决最后一点，因为我不得不过多地摆弄调试器。

# kml - 具有两个点和点中不同名称的多几何

> ID：12838908
> 
> 赞同：3
> 
> 时间：2012-10-11T11:52:13.167
> 
> 标签：kml

我在 KML 中有一个 Multigeometry，但是当我为地标指定名称时，我的地标中的两个点都具有相同的名称。任何地标中的点是否有可能具有不同的名称？

这是我的代码示例：

```
<Placemark>
    <name>TEST</name>
<description></description>
    <visibility>1</visibility>
    <tessellate>1</tessellate>
    <styleUrl>#StyTEST</styleUrl>
<MultiGeometry>
    <Point>
        <coordinates>-3.6655,40.4364</coordinates>
    </Point>
    <Point>
        <coordinates>-3.6726,40.4308</coordinates>
    </Point>
    <LineString>
        <tessellate>1</tessellate>
            <coordinates>
                -3.6655,40.4364
                -3.6726,40.4308
            </coordinates>
    </LineString>
</MultiGeometry>
</Placemark> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T14:45:42.747

即使使用多几何，KML 也不允许单个要素中的几何具有多个名称/标签。如果您在 MultiGeometry 中有多个点，则相同的特征名称将出现在所有点上。一个地标点 == 一个标签，因此如果您想使用 KML 在地图上使用不同的标签，则必须在行的每一端有两个地标。

简单的解决方案是使用多个地标构建您的 KML，您可以使用*checkHideChildren* [listItemType](https://developers.google.com/kml/documentation/kmlreference#listItemType)将其隐藏在文档/文件夹中。然后它作为一个“功能”出现在 Google 地球的“地点”面板中，但地图上会根据需要显示多个名称标签。这里的技巧是文件夹名称出现在位置面板中，地标名称显示为地图上的标签。

以下示例说明了这样的 KML 文件。

```
<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2">
    <Document>            
        <name>Example</name>
        <open>1</open>

        <Style id="hide">
            <ListStyle>
                <listItemType>checkHideChildren</listItemType>
            </ListStyle>
        </Style>

        <Folder>
          <name>TEST1</name>
          <styleUrl>#hide</styleUrl>

          <Placemark>
            <name>TEST1</name>
            <MultiGeometry>
                <Point>
                    <coordinates>-3.6726,40.4308</coordinates>
                </Point>
                <LineString>
                    <tessellate>1</tessellate>
                    <coordinates>
                     -3.6655,40.4364
                     -3.6726,40.4308
                    </coordinates>
                </LineString>
            </MultiGeometry>
          </Placemark>

          <Placemark>
            <name>TEST2</name>
            <Point>
                <coordinates>-3.6655,40.4364</coordinates>
            </Point>
          </Placemark>

        </Folder>
    </Document>
</kml> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T12:02:53.887

[地标](https://developers.google.com/kml/documentation/kmlreference#placemark)只有一个名称。如果您需要让每个点都有自己的名称，则它们需要是单独的地标。

**从[参考文档](https://developers.google.com/kml/documentation/kmlreference#placemark)：**

> `<Placemark>`
> 句法
> 
> `<Placemark id="ID">`
> `<!-- inherited from Feature element -->`
> `<name>...</name> <!-- string -->`
> `<visibility>1</visibility> <!-- boolean -->`
> `<open>0</open> <!-- boolean -->`
> `<atom:author>...<atom:author> <!-- xmlns:atom -->`
> `<atom:link href=" "/> <!-- xmlns:atom -->`
> `<address>...</address> <!-- string -->`
> `<xal:AddressDetails>...</xal:AddressDetails> <!-- xmlns:xal -->`
> `<phoneNumber>...</phoneNumber> <!-- string -->`
> `<Snippet maxLines="2">...</Snippet> <!-- string -->`
> `<description>...</description> <!-- string -->`
> `<AbstractView>...</AbstractView> <!-- Camera or LookAt -->`
> `<TimePrimitive>...</TimePrimitive>`
> `<styleUrl>...</styleUrl> <!-- anyURI -->`
> `<StyleSelector>...</StyleSelector>`
> `<Region>...</Region>`
> `<Metadata>...</Metadata> <!-- deprecated in KML 2.2 -->`
> `<ExtendedData>...</ExtendedData> <!-- new in KML 2.2 -->`
> 
> `<!-- specific to Placemark element -->`
> `<Geometry>...</Geometry>`
> `</Placemark>`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-18T17:13:35.397

用户不能一次看到 40,000 个地标。查看一些提供的 Earth Gallery 页面，例如 FlightWise ( [http://mw1.google.com/mw-weather/flightwise/pointer.kml](http://mw1.google.com/mw-weather/flightwise/pointer.kml) )，了解他们如何使用 NetworkLink、Region 和 Lod 标签来拆分他们的数据集并在正确的时间将正确的数据呈现给正确的视图。

# perl - 在perl中获取excel工作表的名称

> ID：12838912
> 
> 赞同：1
> 
> 时间：2012-10-11T11:52:32.730
> 
> 标签：perl, excel

我是编码和 perl 的新手。

我正在尝试通过 Perl 读取 excel 文件中的 excel 工作表的名称

以下是我的代码

```
#!/usr/local/ActivePerl-5.12/bin//perl -w

use strict;
use Spreadsheet::ParseExcel;

my $FileName = "/Users/labuser/Desktop/TestAutomation/Results.xls";

my $parser   = Spreadsheet::ParseExcel->new();
my $workbook = $parser->parse($FileName);

die $parser->error(), ".\n" if ( !defined $workbook );

for my $worksheet ( $workbook->worksheets() ) {

print $worksheet;

} 
```

但我无法通过 print $worksheet 获取工作表的名称。请建议我怎样才能得到那个

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T12:10:23.427

你需要使用：

```
print $worksheet->get_name(); 
```

代替

```
print $worksheet 
```

也使用 foreach：

```
foreach my $worksheet ($workbook->worksheets()) {
   print $worksheet->get_name();
} 
```

# javascript - Fabric.js - 色调过滤器

> ID：12838915
> 
> 赞同：4
> 
> 时间：2012-10-11T11:52:37.923
> 
> 标签：javascript, html, canvas, fabricjs

我似乎无法让fabric.js 的色调过滤器功能正常工作，或者找不到任何使用它的示例。我努力了：

```
img.filters[0] = new f.Tint({
    color:'green'
}); 
```

我也试过`#00ff00`代替`green`，但他们都只是把图像变黑。

我有许多只是黑色和透明的png（例如基本形状），我希望能够改变它们的颜色，我不知道这是否可能，但我认为色调听起来很有希望，我就是无法让它工作。

我也在照片上尝试过，只是变黑了，我在代码的同一位置使用了其他过滤器（如反转），效果很好。

任何帮助，将不胜感激。

**更新：** 使用了完整的 JS，图片三只是显示为一个黑盒子。

```
var canvas = new fabric.Canvas('c');
var f = fabric.Image.filters;

fabric.Image.fromURL('img/picture3.jpg', function(img) {
  img.set({
    left: 100,
    top: 120,
    angle: 0
  });
  img.filters[0] = new f.Tint({
      color:'00FF00'
  });
  img.applyFilters(canvas.renderAll.bind(canvas));
  canvas.add(img);
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T08:05:00.007

我写了那个过滤器，我在我们的一个项目中大量使用它，到目前为止效果很好。但是我缺少的是对 applyFilters 的调用-也许您可以发布更多代码？

此外，我认为我总是应用以下颜色：

```
img.filters[0] = new f.Tint({
    color:'FF0000'
}); 
```

表示没有颜色名称，前面没有哈希。我知道那里的颜色解析器应该更健壮一些。还要确保此过滤器仅适用于具有 alpha 通道的图像 - 表示半透明 png 文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T08:53:03.037

我分析了 Tint filter 的原始类，我发现这条线

```
var rgb = parseInt(this.color, 10).toString(16); 
```

应该这样调整

```
var rgb = this.color; 
```

使其按预期工作。当然，那么 rgb 变量也没用，直接*改成 this.color*就可以了，不过我个人更喜欢单行改。

我不确定将十六进制转换为整数然后再转换为字符串的最初目的是什么，因为这对我来说毫无意义。

您可能不想修改 fabric.js 源，所以我建议您创建自定义过滤器类，如本教程中过滤器部分所述：http: [//fabricjs.com/fabric-intro-part-2/](http://fabricjs.com/fabric-intro-part-2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-20T12:11:45.583

对于 JPEG 图像或 PNG 图像（具有透明背景），我遇到了同样的问题。

我发现 Tint Class 不能正常工作，所以我稍微改变了它。您可以在 Google 网上论坛上找到该主题：[https ://groups.google.com/forum/#!msg/fabricjs/DPN0WuRtc-o/ZGgIQK5F9xAJ](https://groups.google.com/forum/#!msg/fabricjs/DPN0WuRtc-o/ZGgIQK5F9xAJ)

这是我的解决方法类（它通过使用完整的十六进制值来工作，但您可以轻松地将其调整为您的需要）：

```
 fabric.Image.filters.Tint = fabric.util.createClass({

  type: 'Tint',

  /**
   * Constructor
   * @memberOf fabric.Image.filters.Tint.prototype
   * @param {Object} [options] Options object
   */
  //That's Different : HexColor
  initialize: function(HexColor) {
    this.color = HexColor;
  },

  /**
   * Applies filter to canvas element
   * @param {Object} canvasEl Canvas element to apply filter to
   */
  applyTo: function(canvasEl) {
    var context = canvasEl.getContext('2d'),
        imageData = context.getImageData(0, 0, canvasEl.width, canvasEl.height),
        data = imageData.data;

    //That's different : computation of values
    var rUser = ((this.color).toString ()).substr(0,2);
    var gUser = ((this.color).toString ()).substr(2,2);
    var bUser = ((this.color).toString ()).substr(4,2);

    for (var i = 0, len = data.length; i < len; i += 4) {

        r = data[i];
        g = data[i + 1];
        b = data[i + 2];

        data[i] = parseInt ((r * parseInt (rUser, 16))/255);
        data[i + 1] = parseInt ((g * parseInt (gUser, 16))/255);
        data[i + 2] = parseInt ((b * parseInt (bUser, 16))/255);

    }

    context.putImageData(imageData, 0, 0);
  },

/**
 * Returns json representation of filter
 * @return {Object} json representation of filter
 */
toJSON: function() {
  return {
    type: this.type,
    color: this.color
  };
} 
```

})`

我以这种方式使用它：

```
//$oCanvas is my fabric Canvas object
//data.color could be 'ff0000' but not 'f00' not anything else like fabric.Color
$img.filters[0] = new fabric.Image.filters.Tint(data.color); 
$img.applyFilters($oCanvas.renderAll.bind($oCanvas)); 
```

希望对某人有所帮助。

L.

**编辑**

在 Tint Filter 类中进行了一些更改（Github：[https](https://github.com/kangax/fabric.js/pull/862) ://github.com/kangax/fabric.js/pull/862 ）。

我再次测试它仍然没有运气，所以我再次稍微改变了它。[您可以在 Google Groups ( https://groups.google.com/forum/#!topic/fabricjs/DPN0WuRtc-o](https://groups.google.com/forum/#!topic/fabricjs/DPN0WuRtc-o) )上找到源代码 + 说明

**编辑#2**

好的，所以 Kienz 制作了一个 JSFiddle ( [http://jsfiddle.net/Kienz/4wGzk/](http://jsfiddle.net/Kienz/4wGzk/) )，它使用带有错误修复的 Tint Filter 类，他让它工作了。我建议按照他的方式实施它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-21T22:06:49.467

我在做类似的事情时注意到的一件事是，在将图像本身添加到画布之前，过滤器将不起作用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-12T13:01:10.540

I was having the same problem. It turned out to be the version of fabric js I was using. Without grabbing the latest, in fear of breaking other things, I grabbed only what I needed and used it as a custom filter overriding the current tint implementation.

Here's what I used:

```
/**
   * Tint filter class
   * Adapted from <a href="https://github.com/mezzoblue/PaintbrushJS">https://github.com/mezzoblue/PaintbrushJS</a>
   * @class fabric.Image.filters.Tint
   * @memberOf fabric.Image.filters
   * @extends fabric.Image.filters.BaseFilter
   * @see {@link fabric.Image.filters.Tint#initialize} for constructor definition
   * @see {@link http://fabricjs.com/image-filters/|ImageFilters demo}
   * @example <caption>Tint filter with hex color and opacity</caption>
   * var filter = new fabric.Image.filters.Tint({
   *   color: '#3513B0',
   *   opacity: 0.5
   * });
   * object.filters.push(filter);
   * object.applyFilters(canvas.renderAll.bind(canvas));
   * @example <caption>Tint filter with rgba color</caption>
   * var filter = new fabric.Image.filters.Tint({
   *   color: 'rgba(53, 21, 176, 0.5)'
   * });
   * object.filters.push(filter);
   * object.applyFilters(canvas.renderAll.bind(canvas));
   */
  fabric.Image.filters.Tint = fabric.util.createClass(fabric.Image.filters.BaseFilter, /** @lends fabric.Image.filters.Tint.prototype */ {

    /**
     * Filter type
     * @param {String} type
     * @default
     */
    type: 'Tint',

    /**
     * Constructor
     * @memberOf fabric.Image.filters.Tint.prototype
     * @param {Object} [options] Options object
     * @param {String} [options.color=#000000] Color to tint the image with
     * @param {Number} [options.opacity] Opacity value that controls the tint effect's transparency (0..1)
     */
    initialize: function(options) {
      options = options || { };

      this.color = options.color || '#000000';
      this.opacity = typeof options.opacity !== 'undefined'
                      ? options.opacity
                      : new fabric.Color(this.color).getAlpha();

      console.log(this.color + " " + this.opacity);                
    },

    /**
     * Applies filter to canvas element
     * @param {Object} canvasEl Canvas element to apply filter to
     */
    applyTo: function(canvasEl) {
      var context = canvasEl.getContext('2d'),
          imageData = context.getImageData(0, 0, canvasEl.width, canvasEl.height),
          data = imageData.data,
          iLen = data.length, i,
          tintR, tintG, tintB,
          r, g, b, alpha1,
          source;

      source = new fabric.Color(this.color).getSource();

      tintR = source[0] * this.opacity;
      tintG = source[1] * this.opacity;
      tintB = source[2] * this.opacity;

      alpha1 = 1 - this.opacity;

      for (i = 0; i < iLen; i+=4) {
        r = data[i];
        g = data[i + 1];
        b = data[i + 2];

        // alpha compositing
        data[i] = tintR + r * alpha1;
        data[i + 1] = tintG + g * alpha1;
        data[i + 2] = tintB + b * alpha1;
      }

      context.putImageData(imageData, 0, 0);
    },

    /**
     * Returns object representation of an instance
     * @return {Object} Object representation of an instance
     */
    toObject: function() {
      return extend(this.callSuper('toObject'), {
        color: this.color,
        opacity: this.opacity
      });
    }
  }); 
```

# drupal - 根据选择的第一个节点引用字段填充第二个节点引用字段

> ID：12838925
> 
> 赞同：1
> 
> 时间：2012-10-11T11:53:11.143
> 
> 标签：drupal, drupal-7, drupal-fapi

我有 2 种内容类型。“ABC”内容类型和“DEF”内容类型。在“DEF”内容类型中，我参考“ABC”节点参考。

我正在构建另一种名为“XYZ”的内容类型，其中我将节点引用提供给“ABC”，并且我将节点引用提供给“DEF”内容类型。

我的问题是我需要根据从以前的“ABC”下拉列表中选择的“ABC”来过滤掉“DEF”（对“DEF”的节点引用）下拉列表。

如何实现这一点。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T03:36:48.720

实现所需功能的方法很少。

其中之一是实现[hook_form_alter](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_form_alter/7) () 来改变你的内容类型插入/编辑表单，然后使用[#states](http://api.drupal.org/api/drupal/developer!topics!forms_api_reference.html/7#states)属性来改变下拉项的行为。

希望这会有所帮助……穆罕默德。

# python - 有没有可以处理不明变量的模块？

> ID：12838933
> 
> 赞同：1
> 
> 时间：2012-10-11T11:53:29.593
> 
> 标签：python, variables, math, algebra

好的，所以我正在尝试制作一个程序，当两辆车以一定的速度相互加速时，可以找到一辆车的**时间**，每辆车都有不同的速度，只有使用时间=距离/速度给出的速度**。**但是我需要一个带有未解决变量的表达式来解决以下问题：

*Car1 以 20 英里/小时的速度行驶。Car2 比 Car1 快 10 英里/小时。Car2 比 Car1 晚一小时离开。Car2 需要多长时间才能赶上 Car1？*

我的工作没有程序：

```
t = Travel time total (in hours)

10*t = 20(t-1) # Note the 1 is for the 1 hour

# rearrange
10*t = 20*t - 20

# subtract 10*t from both sizes
0 = 10*t - 20

# add 20 to both sides
20 = 10*t

#divide both sizes by 10
2 = t 
```

是否有一个模块支持使用分配属性对未定义变量进行操作（即可以解决像这样的方程）？

如果没有，我可以举一个小例子来说明如何在没有模块的情况下使用未识别的变量吗？我刚在学校学过这个。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T11:56:01.543

您正在寻找的模块称为[SymPy](http://code.google.com/p/sympy/)。

```
import sympy
t = sympy.Symbol('t') # set t as a variable/symbol
sympy.solve(sympy.Eq(10*t, 20*(t-1)), t) # which reads: solve the equation 10*t == 20*(t-1) for t.
# returns [2] (list of solutions to the equation) 
```

*（请参阅使用 SymPy 的一些更[快速的示例](https://github.com/sympy/sympy/wiki/Quick-examples)）。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T12:54:07.790

这是你想要的吗？

```
def get_time(v1, v2, dt):
    t = (v2*dt)/(v2 - v1)
    return t 
```

然后你可以用car1，car2的速度和偏移量调用函数，它会返回你想要的时间。

# actionscript-3 - 多重命中 AS3

> ID：12838939
> 
> 赞同：1
> 
> 时间：2012-10-11T11:53:47.003
> 
> 标签：actionscript-3, flash, hittest

我的舞台上有一个可拖动的影片剪辑。当它击中另一个对象/电影剪辑时，会出现“击中”这个词。到目前为止，一切都很好。但是，我希望可拖动的影片剪辑以不同的反应击中多个其他对象（例如加载其他影片剪辑或其他内容）。

这是我最热门的部分的代码：

```
import flash.events.Event;

this.addEventListener( Event.ENTER_FRAME, handleCollision)

function handleCollision( e:Event ):void
{
    if(blok3.hitTestObject(schaap))

       {
           output_txt.text = "HIT"
       }
       else
       {
           output_txt.text = ""
       }

} 
```

SCHAAP是可拖动对象，blok3是当可拖动对象碰到它时触发单词“hit”的对象。

我希望你们能帮助我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T12:16:10.573

你已经有一个碰撞的触发器和一个输出（如果 blok3 htis schaap，输出“HIT”），所以一个简单的扩展是在现有的下面添加另一个 if 语句：

```
function handleCollision( e:Event ):void
{
    if(blok3.hitTestObject(schaap))    
    {
        output_txt.text = "HIT"
    }
    // else if statement to check for collision on second object
    else if(differentBlok.hitTestObject(schaap))
    {
        output_txt.text = "SMASH"
    }
    else
    {
        output_txt.text = ""         
    }

} 
```

从这里您可以查看将对象存储在数组中并遍历数组以检查冲突，而不是为每个对象使用单独的 if 语句。

# c# - MVC“查找”方法需要很长时间（即使在发布中）？（使用迷你配置文件）

> ID：12838940
> 
> 赞同：3
> 
> 时间：2012-10-11T11:53:48.267
> 
> 标签：c#, asp.net-mvc, mvc-mini-profiler

我正在使用 MiniProfile 来尝试找出为什么我的 MVC 站点需要很长时间。看起来“查找”方法是花费时间的地方。我已经阅读了一些关于此的内容，大多数人似乎认为这是由于`<compilation debug="true" .. >`在 web.conf 中进行了设置。我可以确认在以下示例中未设置调试（我的编译如下所示）：

```
<compilation targetFramework="4.0">
   ...
</compilation> 
```

没有提到调试。但是，我的 find 调用需要三秒钟以上的时间：S

![MiniProfiler](../Images/46947e7c60773e6de43ee09994ddab03.png)

关于如何解决这个问题的任何建议？（注意：我在 Azure 生产服务器上运行。我已 RDC 进入系统以确认推送的 web.config 不包含 debug="true"）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T12:53:19.960

如果这是在发布后或 AppDomain 被 IIS 关闭后第一个到达您网站的请求，则 Find 方法需要很长时间是正常的。然后它将缓存此视图的位置，并且在后续请求中它应该更快。尝试`Ctrl+F5`在您的浏览器中使用相同的 url。

还可以尝试`debug="false"`在您的`web.config`.

# jquery - 单击此红色框时，我想使用 Jquery 删除列表项。如何定位祖父母 div？

> ID：12838942
> 
> 赞同：1
> 
> 时间：2012-10-11T11:54:03.030
> 
> 标签：jquery, class, html, parent, target

当我单击“红色”类时，我想删除整个 div。我的 JS 是

```
$('document').ready(function(){
    $('.buttons .red').click(function(){
        $(this).parent('div').parent('div').remove();
        $(this).parent('div').remove();
    });
}); 
```

这是我的 HTML

```
<div data-role="collapsible" data-collapsed="false">
    <h3> Keep</h3>
    <div id= "container">
        <a href="categories.html" class="green" data-transition="slide"  data-type="horizontal" data-role="button">Tax Deductible</a>
        <a href="#" class="red" data-transition="slide"  data-type="horizontal" data-role="button">Tax Deductible</a>
        <a href="categories.html" class="blue" data-transition="slide"  data-type="horizontal" data-role="button">Tax Deductible</a>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T11:57:41.877

```
$('document').ready(function(){
$('.red').click(function(){

     $(this).parent().parent().remove();

});
}); 
```

行得通，你只需要删除祖父母，因为“父母”在祖父母里面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T12:02:14.340

我建议：

```
$('a[data-role="button"].red').click(
    function(e){
        e.preventDefault();
        $(this).closest('div[data-role]').remove();
    }); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/AVxZS/)。

这会将 click 事件附加到具有值为 的属性以及 的类的`a`元素。`data-role``button``red`

事件的默认行为`click`被阻止（以防止，或页面跳转/加载），选择器将 DOM 从元素`hashChange`向上移动到具有属性集的第一个祖先元素并删除该元素。`a``data-role`

使用`closest()`意味着您可以将`a`元素嵌套在其他元素内（在同一个祖先内），并且该函数仍然可以工作（而*每次*插入/删除祖先时，`parent().parent()...`您都必须重写 jQuery 选择器。

 *参考：

*   [属性等于`[attribute="value"]`选择器](http://api.jquery.com/attribute-equals-selector/)。
*   [`closest()`](http://api.jquery.com/closest/).
*   [`event.preventDefault()`](http://api.jquery.com/event.preventDefault/).
*   [`remove()`](http://api.jquery.com/remove/).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T11:59:40.417

您的代码可能不起作用，因为您在页面上没有按钮类。此外，您不必调用第二次删除，因为您的第一个育儿 DIV 将与您的可折叠 DIV 一起被删除。

`:eq()`另一件事是，如果您需要选择祖父母，您可以使用选择器。

工作代码（我只在容器 div 中添加了类按钮）：

```
$('document').ready(function(){
    $('.buttons .red').click(function(){
        $(this).parents('div:eq(1)').remove();
        return false;
    });
});​ 
```

jfFiddle：http: [//jsfiddle.net/RxyPk/](http://jsfiddle.net/RxyPk/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T12:00:35.610

不会退出您的课程按钮。

```
$('.red').click(function(){

console.log($(this).parent('div').parent('div'));

}); 
```

作品*

# .net-4.0 - 复制任务在 MSBuild 4 中不起作用

> ID：12838946
> 
> 赞同：2
> 
> 时间：2012-10-11T11:54:16.230
> 
> 标签：.net-4.0, copy, task, msbuild-4.0

```
<Copy SourceFiles="@(sourceFiles)" DestinationFolder="$(destinationFolder)\"/> 
```

这在 MSBuild 3.5 中对我来说很好用。但是由于我一直在尝试迁移到 4.0，MSBuild 向我抛出了这个错误。

```
The "Microsoft.Sdc.Tasks.Folder.Copy" task could not be loaded from the assembly Microsoft.Sdc.Tasks.dll. Confirm that the <UsingTask> declaration is correct, that the assembly and all its dependencies are available, and that the task contains a public class that implements Microsoft.Build.Framework.ITask. 
```

我试过把`UsingTask`, 但仍然是徒劳的。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:17:57.333

原因很简单，

1.  您在 .NET 2.0 GAC 中安装[http://sdctasks.codeplex.com/ 。](http://sdctasks.codeplex.com/)所以 MSBuild 2.0 或 3.5 可以成功加载它。
2.  .NET 4 使用不同的 GAC，因此 MSBuild 4 无法找到您在 .NET 2 GAC 中安装的内容。

因此，您会看到一条错误消息。

我的建议，

1.  [按照http://sdctasks.codeplex.com/](http://sdctasks.codeplex.com/)的建议切换到 MSBuild 社区包。
2.  与其将 MSBuild 扩展程序集添加到 GAC 中，不如将其放入依赖文件夹（例如 lib）中，并将其添加到源代码管理中。
3.  修改项目文件（例如 csproj）时，请确保在`<UsingTask>`您使用依赖项文件夹的程序集路径。

我的开源项目#SNMP 使用 Gendarme MSBuild 扩展，并且我已经使用上述技巧很长时间了，

[https://github.com/lextm/sharpsnmplib/blob/master/SharpSnmpLib/SharpSnmpLib.csproj](https://github.com/lextm/sharpsnmplib/blob/master/SharpSnmpLib/SharpSnmpLib.csproj)

# mysql - MySql 引用完整性

> ID：12838949
> 
> 赞同：1
> 
> 时间：2012-10-11T11:54:25.677
> 
> 标签：mysql

我有 3 张桌子

```
create table movies(
     movie_id int PRIMARY KEY AUTO_INCREMENT,
     budget decimal(10,3) NOT NULL,
     name varchar(20) NOT NULL);

create table actor(
     actor_id int primary key auto_increment,
     name varchar(13) not null,
     salary decimal(12,2) not null);

create table movie_actor( movie_id int not null references movies (movie_id),
                          actor_id int not null references actor (actor_id), 
                          constraint movie_actor_pk primary key (movie_id,actor_id)) 
```

.我已将数据插入其中。

```
mysql> select * from movies;
+----------+----------+------------+
| movie_id | budget   | name       |
+----------+----------+------------+
|        1 | 1000.000 | rambo      |
|        2 | 2000.000 | rocky      |
|        3 | 8000.000 | terminator |
+----------+----------+------------+
3 rows in set (0.00 sec)

mysql> select * from actor;
+----------+-----------+--------+
| actor_id | name      | salary |
+----------+-----------+--------+
|      100 | sylvester | 100.00 |
|      101 | arnold    |  90.00 |
+----------+-----------+--------+
2 rows in set (0.00 sec)

mysql> select * from movie_actor;
+----------+----------+
| movie_id | actor_id |
+----------+----------+
|        1 |      100 |
|        2 |      100 |
|        3 |      101 |
|       39 |    10109 |
+----------+----------+
4 rows in set (0.00 sec) 
```

它的InnoDB引擎我的问题是movie_actor表中的movie_id 39不应该被允许按照REFERENTIAL INTEGRITY插入到movie_actor表中，对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T12:02:01.600

要具有参照完整性，您必须设置外键约束：

```
create table movie_actor( 
    movie_id int not null references movies (movie_id),
    actor_id int not null references actor (actor_id), 
    constraint movie_actor_pk primary key (movie_id,actor_id),
    constraint foreign key (movie_id) references movies (movie_id),
    constraint foreign key (actor_id) references actor (actor_id)
    ) 
```

# html - 未应用 css 类样式

> ID：12838955
> 
> 赞同：1
> 
> 时间：2012-10-11T11:54:42.570
> 
> 标签：html, css

我有一些这样的代码：

```
<div class="divleft">
<TABLE class="form-table">
    <TR  class="heading">
    <TD colspan="2" align="left">
        <h3>Account description</h3>
    </td>
    </tr>

          <TR>
       <TD>Name</TD>
       <TD><input name="Naam" id="Naam" type="text" class="InputText"  /></TD>
          </TR> 
```

和这样的类标题上的 CSS 样式（用于测试目的，而不是实际样式）

```
.form-table tr.heading{
border-bottom-width: 10px;
border-bottom-color:black;
} 
```

然而，这种风格正在被忽视。当我使用 google chrome 工具检查元素时，我看不到任何其他可能影响此的样式表元素。

关于可能导致此问题的任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T11:57:10.217

缺少边框样式

```
.heading{
border-bottom-width: 10px; border-style:solid;
border-bottom-color:black;
}​ 
```

你可以像这样写成单行

```
.heading{
    border-bottom: 10px solid black;
    }​ 
```

# hdfs - “YYYYMMDD”：尝试通过 SQOOP 时出现无效标识符错误

> ID：12838960
> 
> 赞同：1
> 
> 时间：2012-10-11T11:54:52.790
> 
> 标签：hdfs, sqoop

请帮助我解决以下错误。在 oracle 中检查时工作正常，但在尝试通过 SQOOP 导入时失败。

版本：Hadoop 0.20.2-cdh3u4 和 Sqoop 1.3.0-cdh3u5

```
sqoop import $SQOOP_CONNECTION_STRING 
--query 'SELECT st.reference,u.unit,st.reading,st.code,st.read_id,st.avg FROM reading st,tunit `tu,unit u 
WHERE st.reference=tu.reference and st.number IN ('218730','123456') and tu.unit_id = u.unit_id 
and u.enrolled='Y' AND st.reading <= latest_off and st.reading >= To_Date('20120701','yyyymmdd') 
and st.type_id is null and $CONDITIONS' 
--split-by u.unit 
--target-dir /sample/input 
```

错误：

12/10/10 09:33:21 ERROR manager.SqlManager: Error execution statement: java.sql.SQLSyntaxErrorException: ORA-00904: "YYYYMMDD": invalid identifier

其次是....

2010 年 12 月 10 日 09:33:21 错误 sqoop.Sqoop：运行 Sqoop 时出现异常：java.lang.NullPointerException

感谢和问候，

泰米尔语

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T22:27:46.350

我相信问题实际上出在 Bash 方面（或您的命令行解释）。例如，您的查询包含以下片段 u.enrolled='Y'。请注意，您使用单引号转义字符常量。您似乎将整个查询放入额外的单引号中：--query 'YOUR QUERY'。这会产生类似 --query '...u.enrolled='Y'...' 的结果。然而，这样的字符串被 bash 剥离为 '...u.enrolled=Y...'。您可以通过使用“echo”来验证这一点，以查看在将字符串传递给 Sqoop 之前 bash 将如何处理您的字符串。

```
jarcec@jarcec-thinkpad ~ % echo '...u.enrolled='Y'...'
...u.enrolled=Y.. 
```

.

我建议要么转义查询中的所有单引号 (\')，要么为整个查询选择双引号。请注意，后面的选项需要使用反斜杠 (\$) 转义 $ 字符。

# maven-2 - 我们应该如何从 maven 有条件地删除依赖 jar

> ID：12838967
> 
> 赞同：0
> 
> 时间：2012-10-11T11:55:01.253
> 
> 标签：maven-2, weblogic11g

我们有在两个不同服务器上运行的项目。Tomcat 和 Weblogic。

但是在 weblogic 中很少有依赖 jar 冲突，因为库中的 weblogic 有这些 jar。

所以我们必须手动删除这些罐子。

我们计划通过 pom 删除 do。

一种解决方案是我们可以为 pom 分别制作两个（一个用于 tomcat，一个用于 weblogic）。这实际上听起来不太好。

我们正在考虑如何进行基于配置文件的依赖排除。但任何能够找到任何类似的人。

如果有人有更好的建议，请告诉我。

我们已经尝试从 weblogic lib 中排除 jar，但无法成功。

所有的建议都是公开邀请的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:06:50.087

您可以使用 Maven 配置文件为不同的应用程序服务器构建稍微不同的项目版本。

[您可以在此处](http://maven.apache.org/guides/introduction/introduction-to-profiles.html)阅读有关 Maven 配置文件的信息

希望这可以帮助

# javascript - 从图像中读取文本

> ID：12838972
> 
> 赞同：3
> 
> 时间：2012-10-11T11:55:16.790
> 
> 标签：javascript, jquery

我打算使用phonegap制作一个应用程序。这个应用程序将从图像中读取文本。所以我的问题是我们可以使用 javascript 从图像中读取文本吗？我知道我们可以使用 java 来做到这一点，但我需要使用 javascript 来做到这一点。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T12:17:59.653

Javascript 中的 OCR 不是很强大。我找到了一个使用简单欧几里得距离比较的库。准确性并不完美，但它确实做得相当不错。 [关联](http://www.heatonresearch.com/fun/ocr)

# java - 如何用边框包围 Java Swing 组件？

> ID：12838978
> 
> 赞同：7
> 
> 时间：2012-10-11T11:55:34.070
> 
> 标签：java, swing, user-interface, border

我正在构建一个由几个选项卡式面板组成的应用程序。在它们中的每一个上，我想将一组组件通过边框彼此分开。它看起来像：

```
|- Titled Border 1 ---

[JTextField] [JComboBox] [JTextField] [JComboBox]

|--------

|- Titled Border 2 ---

[JTextField] [JComboBox] [JTextField] [JComboBox]

|--------

... and so forth. 
```

当我尝试简单地向面板添加新边框 Titled Border 2 时，它被添加并覆盖了第一个边框，但将组件留在了顶部。在一些示例中，我看到一个框架内定义了许多 JPanel，每个面板都有自己的边框。它可能适用于我的情况，但如何添加这些面板以显示在一个选项卡中？

Oracle 的一个教程正好展示了一个带有多种边框演示的选项卡式窗格。当我试图编辑它并将一个组件放在那里时，它出现在两个边框之间，而不是被包围。这是另一个对我来说不成功的选择。

第二件事是，我不使用任何布局管理器，组件位置是固定的，老实说我会保留这个设置。或者，也许您建议在这种特定情况下使用任何布局管理器？

您对如何解决此问题有任何提示吗？

编辑：似乎我还不允许附上屏幕截图，但这是处理显示边框的代码部分：

```
 lenMicro = new JPanel();
    lenMicro.setLayout(null);

    bGreyLine = BorderFactory.createLineBorder(Color.GRAY, 1, true);
    bTitled1 = BorderFactory.createTitledBorder(bGreyLine, "Length (1/2)", TitledBorder.LEFT, TitledBorder.TOP);
    lenMicro.setBorder(bTitled1);
    bTitled2 = BorderFactory.createTitledBorder(bGreyLine, "Length (2/2)", TitledBorder.LEFT, TitledBorder.TOP);
    lenMicro.setBorder(bTitled2); 
```

取消注释最后两行时，会显示标题为“长度 (2/2)”的边框。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-11T14:04:36.910

使用[Absolute Positioning](http://docs.oracle.com/javase/tutorial/uiswing/layout/none.html)时，您必须为每个组件提供 Location，这将成为视图的一部分。因此，如果不确切地查看您在做什么，就很难预测到底哪里出了问题。尽管使用[Layout Managers](http://docs.oracle.com/javase/tutorial/uiswing/layout/using.html)，但将减轻您在视图上放置不同组件的巨大负担。

此外，您必须为各个组件设置边框。因此，我绝不可以假设您添加了一个组件并且它出现在两个边界之间（尽管考虑到您使用绝对定位这一事实，您可能在视图上为所述组件提供了错误的坐标）。请查看此示例代码，这可能会对您有所帮助：

```
import java.awt.*;
import javax.swing.*;
import javax.swing.border.*;

public class BorderExample
{
    private JPanel topPanel;
    private JPanel centerPanel;
    private JPanel bottomPanel;
    private int hgap;
    private int vgap;
    private JTextField tfield1, tfield2;
    private JComboBox cbox1, cbox2;
    private String[] data = {"One", "Two"};

    public BorderExample()
    {
        hgap = 5;
        vgap = 5;
    }

    private void displayGUI()
    {
        JFrame frame = new JFrame("Border Example");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JPanel contentPane = new JPanel();
        contentPane.setOpaque(true);
        contentPane.setBackground(Color.WHITE);
        contentPane.setBorder(
            BorderFactory.createEmptyBorder(hgap, hgap, hgap, hgap));
        contentPane.setLayout(new BorderLayout(hgap, vgap));

        topPanel = new JPanel();
        topPanel.setOpaque(true);
        topPanel.setBackground(Color.WHITE);
        topPanel.setBorder(
            BorderFactory.createTitledBorder("Top Panel"));
        tfield1 = new JTextField(10);   
        tfield1.setBorder(
            BorderFactory.createTitledBorder(
            BorderFactory.createEtchedBorder(
                    EtchedBorder.RAISED, Color.GRAY
                    , Color.DARK_GRAY), "JTextField"));
        JPanel comboPanel = new JPanel();           
        cbox1 = new JComboBox(data);
        cbox1.setBorder(
            BorderFactory.createTitledBorder("JComboBox")); 
        topPanel.add(tfield1);  
        topPanel.add(cbox1);

        centerPanel = new JPanel(); 
        centerPanel.setOpaque(true);
        centerPanel.setBackground(Color.WHITE);
        centerPanel.setBorder(
            BorderFactory.createTitledBorder("Center Panel"));
        tfield2 = new JTextField(10);   
        tfield2.setBorder(
            BorderFactory.createLoweredBevelBorder());
        cbox2 = new JComboBox(data);
        cbox2.setBorder(
            BorderFactory.createRaisedBevelBorder());   
        centerPanel.add(tfield2);   
        centerPanel.add(cbox2);

        bottomPanel = new JPanel(); 
        bottomPanel.setOpaque(true);
        bottomPanel.setBackground(Color.WHITE);
        bottomPanel.setBorder(
            BorderFactory.createTitledBorder("Center Panel"));

        contentPane.add(topPanel, BorderLayout.PAGE_START);
        contentPane.add(centerPanel, BorderLayout.CENTER);
        contentPane.add(bottomPanel, BorderLayout.PAGE_END);

        frame.setContentPane(contentPane);
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            @Override
            public void run()
            {
                new BorderExample().displayGUI();
            }
        });
    }
} 
```

这是相同的输出：

![BORDER_EXAMPLE](../Images/32b6fd11bd6afbe21d703fc8da98788e.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T16:49:35.570

好的，所以这解决了我对使用布局管理器和为组件组添加边框的大部分担忧：

```
import javax.swing.*;
import javax.swing.border.Border;
import javax.swing.border.TitledBorder;
import java.awt.*;

public class TestingGround extends JFrame {

private JTextField tLenUnit, tLenResult, tAreUnit, tAreResult;
private JComboBox<String> cLenInUnit, cLenOutUnit, cAreInUnit, cAreOutUnit;
private JPanel lenMicro, lenMicro1, lenMicro2, lenNormal, lenMacro, area, volume;
private Border bGreyLine, bTitled1, bTitled2;

private TestingGround() {

    setTitle("Testing Ground for an Application");
    setVisible(true);
    setResizable(true);
    setLocationRelativeTo(null);

    try {
        UIManager.setLookAndFeel("javax.swing.plaf.nimbus.NimbusLookAndFeel");
    } catch (ClassNotFoundException e) {
        e.printStackTrace();
    } catch (InstantiationException e) {
        e.printStackTrace();
    } catch (IllegalAccessException e) {
        e.printStackTrace();
    } catch (UnsupportedLookAndFeelException e) {
        e.printStackTrace();
    }

    lenMicro = new JPanel();
    lenMicro.setLayout(new GridBagLayout());

    lenMicro1 = new JPanel();
    lenMicro1.setLayout(new GridBagLayout());

    bGreyLine = BorderFactory.createLineBorder(Color.LIGHT_GRAY, 1, true);
    bTitled1 = BorderFactory.createTitledBorder(bGreyLine, "Length", TitledBorder.LEFT, TitledBorder.TOP);
    lenMicro1.setBorder(bTitled1);

    tLenUnit = new JTextField("0.0");
    tLenUnit.setColumns(10);
    lenMicro1.add(tLenUnit, new GBC(0, 0, 2, 1).setAnchor(GBC.WEST).setInsets(5, 5, 5, 5));

    cLenInUnit = new JComboBox<String>();
    cLenInUnit.addItem("");
    cLenInUnit.addItem("First");
    cLenInUnit.addItem("Second");
    cLenInUnit.setSelectedIndex(0);
    cLenInUnit.setPreferredSize(new Dimension(120, 25));
    lenMicro1.add(cLenInUnit, new GBC(2, 0, 3, 1));

    tLenResult = new JTextField("");
    tLenResult.setColumns(10);
    lenMicro1.add(tLenResult, new GBC(5, 0, 2, 1).setInsets(5, 5, 5, 5));

    cLenOutUnit = new JComboBox<String>();
    cLenOutUnit.addItem("First");
    cLenOutUnit.addItem("Second");
    cLenOutUnit.setSelectedIndex(1);
    cLenOutUnit.setPreferredSize(new Dimension(120, 25));
    lenMicro1.add(cLenOutUnit, new GBC(7, 0, 1, 1));

    // Area part:

    lenMicro2 = new JPanel();
    lenMicro2.setLayout(new GridBagLayout());

    bTitled2 = BorderFactory.createTitledBorder(bGreyLine, "Area", TitledBorder.LEFT, TitledBorder.TOP);
    lenMicro2.setBorder(bTitled2);

    tAreUnit = new JTextField("0.0");
    tAreUnit.setColumns(10);
    lenMicro2.add(tAreUnit, new GBC(0, 1, 2, 1).setAnchor(GBC.WEST).setInsets(5, 5, 5, 5));

    cAreInUnit = new JComboBox<String>();
    cAreInUnit.addItem("");
    cAreInUnit.addItem("One sqm");
    cAreInUnit.addItem("Two sqm");
    cAreInUnit.setSelectedIndex(0);
    cAreInUnit.setPreferredSize(new Dimension(120, 25));
    lenMicro2.add(cAreInUnit, new GBC(2, 1, 3, 1));

    tAreResult = new JTextField("");
    tAreResult.setColumns(10);
    lenMicro2.add(tAreResult, new GBC(5, 1, 2, 1).setInsets(5, 5, 5, 5));

    cAreOutUnit = new JComboBox<String>();
    cAreOutUnit.addItem("One sqm");
    cAreOutUnit.addItem("Two sqm");
    cAreOutUnit.setSelectedIndex(1);
    cAreOutUnit.setPreferredSize(new Dimension(120, 25));
    lenMicro2.add(cAreOutUnit, new GBC(7, 1, 1, 1));

    // Joining all lenMicroX panels into one:

    lenMicro.add(lenMicro1, new GBC(0, 0, 8, 1).setAnchor(GBC.FIRST_LINE_START).setInsets(5, 5, 5, 5).setIpad(10, 10));
    lenMicro.add(lenMicro2, new GBC(0, 1, 8, 1).setAnchor(GBC.LINE_START).setInsets(5, 5, 5, 5).setIpad(10, 10));

    volume = new JPanel();
    volume.setLayout(null);

    // Panel definition --begin:

    JTabbedPane tPane = new JTabbedPane();

    tPane.addTab("Length & Area", null, lenMicro, "Length & Area units");
    tPane.addTab("Volume", null, volume, "Volume units");
    add(tPane);

    // Panel --end.
}

public static void main(String[] args) {

    TestingGround app = new TestingGround();
    app.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    app.pack();
    app.setVisible(true);

}

} 
```

GridBagConstraints 辅助类取自 Cay Horstmann 和 Gary Cornell 的*Core Java*，可在此处找到：http: [//www.horstmann.com/articles/GBC.java](http://www.horstmann.com/articles/GBC.java)。

我设法从 Gagandeep 的示例中弄清楚，面板可以放在上面，我们称它为母面板。这样每个子面板都可以有自己的边框。

第二件事：我决定使用 GridBagLayout，因为在我的这个和其他项目中使用它似乎是最准确的。好吧，我仍然需要学习很多相关知识（例如，为了使组件与某些行对齐；-) [编辑：刚刚将*setPreferredSize()*添加到 JComboBoxes；使布局更好看;-)])。

谢谢大家的帮助和宝贵的提示！

![更正后的应用。](../Images/bad7eb9b5a56b1b9326c5c4e6ff62ddc.png)

# java - Java子类属性绑定与否？

> ID：12838981
> 
> 赞同：4
> 
> 时间：2012-10-11T11:56:00.707
> 
> 标签：java, swing, properties

我有一个关于使用 Swing 组件时使用绑定属性的问题。所以，我有一个非常简单的 Java 类扩展了 JButton 类：

```
public class MyBean extends JButton
{
    public static final String PROP_SAMPLE_PROPERTY = "sampleProperty";
    private String sampleProperty;

    public MyBean() {

        addPropertyChangeListener(new java.beans.PropertyChangeListener()
        {
            @Override
            public void propertyChange(java.beans.PropertyChangeEvent evt) {
                componentPropertyChange(evt);
            }
         });
     }

    public String getSampleProperty() {
        return sampleProperty;
    }

    public void setSampleProperty(String value) {
        String oldValue = sampleProperty;
        sampleProperty = value;
        firePropertyChange(PROP_SAMPLE_PROPERTY, oldValue, sampleProperty);
    }

    // Handle a property being updated
    static private void componentPropertyChange(java.beans.PropertyChangeEvent evt) {

        String propertyName = evt.getPropertyName();
        System.out.println(MyBean.class.getSimpleName() + " - '" + propertyName + "' changed");    
    }
} 
```

这是我的主要课程：

```
public static void main(String[] args) {

    try
    {
        Class<?> clazz = MyBean.class;
        BeanInfo bi = Introspector.getBeanInfo(clazz);
        PropertyDescriptor[] pds = bi.getPropertyDescriptors();

        for (PropertyDescriptor pd : pds)
        {
            System.out.println(String.format("%s - %s - %s", clazz.getSimpleName(), pd.getName(), Boolean.toString(pd.isBound())));
        }

        MyBean myBean = new MyBean();
        myBean.setText("My name");
        myBean.setLocation(new Point(10,10));
        myBean.setVisible(true);
    }
    catch (IntrospectionException e)
    {
        e.printStackTrace();
    }
} 
```

运行此应用程序将输出：

```
MyBean - UI - true
MyBean - UIClassID - true
MyBean - accessibleContext - true
MyBean - action - true
...
MyBean - vetoableChangeListeners - true
MyBean - visible - true
MyBean - visibleRect - true
MyBean - width - true
MyBean - x - true
MyBean - y - true
**MyBean - 'text' changed** 
```

我的问题：

对于所有 MyBean 属性，打印一行告诉我该属性已绑定，但是，当我创建 MyBean 实例并调用 setText、setLocation 和 setVisible 时，仅在 setText 的情况下打印一行。我的结论是（可能是错误的）如果 setLocation 和 setVisible 被调用，则不会调用**firePropertyChange**方法，因此不会调用**PropertyChangedListener**。现在，我认为每个绑定属性在更新时都会调用**firePropertyChange方法？**显然情况并非如此，或者打印的列表可能是错误的。对此的任何解释将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:32:09.963

我从未见过它记录（或在源代码中发现）所有 set* 方法都会导致 PropertyChangeEvent，让我知道您是否有以及在哪里。通常，如果您想捕获对方法的调用，则需要覆盖它。如果您这样做，请不要忘记使用“super”关键字从被覆盖的方法中调用超类型的版本。

您可以从所述重写方法中调用 firePropertyChanged。

在 Swing 代码之外，您可能会提供一个包装器实现，但这不适用于 Swing，因为它使用具体类型而不是接口。

# c# - VSTO-事件以捕获从 Excel 工作簿上的任务栏单击

> ID：12838985
> 
> 赞同：3
> 
> 时间：2012-10-11T11:56:16.010
> 
> 标签：c#, excel, vsto, excel-2007, taskbar

我正在开发 VSTO excel 2007 工作簿应用程序并寻找一个跟踪点击 excel 应用程序的事件。

有两种情况：-

1.  用户在单击任务栏中的 excel 图标后进入 excel。
2.  用户在按 ALT+TAB 后进入 Excel 工作表

![在此处输入图像描述](../Images/69d627368d77cb1f198a37f42da11342.png)

我努力了

```
 ThisWorkbook_ActivateEvent(); 
```

和

```
this.Application.WindowActivate 
```

但他们似乎没有工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-12T09:23:57.610

这是一个完整的 VSTO 解决方案，它应该可以工作，虽然它不是很好，因为它使用了一个计时器。我已经用你的两种情况对其进行了测试。

约尔格

* * *

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Xml.Linq;
using Excel = Microsoft.Office.Interop.Excel;
using Office = Microsoft.Office.Core;
using Microsoft.Office.Tools.Excel;
using System.Runtime.InteropServices;
using System.Windows.Forms;
using System.Diagnostics;

namespace ExcelAddIn_TestExcelWindowActivation
{
    public partial class ThisAddIn
    {
        [DllImport("user32.dll", EntryPoint = "GetForegroundWindow")]
        public static extern IntPtr GetForegroundWindow();

        private IntPtr _excelWindowHandle = IntPtr.Zero;
        private IntPtr _lastForegroundWindowHandle = IntPtr.Zero;
        private Timer _timerForegroundWindowObserver = null;

        private void InternalStartup()
        {
            this.Startup += new System.EventHandler(ThisAddIn_Startup);
            this.Shutdown += new System.EventHandler(ThisAddIn_Shutdown);
        }

        private void ThisAddIn_Startup(object sender, System.EventArgs e)
        {
            //Get excel handle
            _excelWindowHandle = new IntPtr(Globals.ThisAddIn.Application.Hwnd);

            //Initialize and start the timer
            _timerForegroundWindowObserver = new Timer();
            _timerForegroundWindowObserver.Interval = 1000; //ms
            _timerForegroundWindowObserver.Tick +=new EventHandler(_timerForegroundWindowObserver_Tick);
            _timerForegroundWindowObserver.Start();

            Debug.Print("ThisAddIn_Startup completed.");
        }

        private void ThisAddIn_Shutdown(object sender, System.EventArgs e)
        {
            //Stop and delete the timer
            _timerForegroundWindowObserver.Stop();
            _timerForegroundWindowObserver = null;
        }

        private void _timerForegroundWindowObserver_Tick(object sender, EventArgs e)
        {
            var foregroundWindowHandle = GetForegroundWindow();

            //Remember the last foreground window and exit if there were no changes...
            if (foregroundWindowHandle == _lastForegroundWindowHandle) return;
            _lastForegroundWindowHandle = foregroundWindowHandle;

            //When Excel is activated: Give info...
            if (foregroundWindowHandle == _excelWindowHandle)
            {
                Debug.Print("Excel window is activated yet.");
            }
        }
    }
} 
```

# c# - 我什么时候需要紧耦合和松耦合？

> ID：12838991
> 
> 赞同：1
> 
> 时间：2012-10-11T11:56:30.887
> 
> 标签：c#, design-patterns

我知道松耦合和紧耦合的信息。但是我暂停什么时候可以决定在哪里使用什么时间？我不明白什么时候需要松耦合和紧耦合？

请看： http: [//www.dofactory.com/Patterns/PatternAdapter.aspx#_self1](http://www.dofactory.com/Patterns/PatternAdapter.aspx#_self1)

如果你看适配器类：

```
 /// 
  /// The 'Adapter' class
  /// 
  class Adapter : Target
  {
    private Adaptee _adaptee = new Adaptee();

    public override void Request()
    {
      // Possibly do some other work
      //  and then call SpecificRequest
      _adaptee.SpecificRequest();
    }
  } 
```

上面的用法就像紧耦合！我认为紧密耦合是不好的用法。但是适配器模式使用紧密耦合。当我需要紧耦合和松耦合时？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T18:23:27.287

请记住，*四人组模式是在**依赖注入*之前诞生的，这被称为*松散耦合*。

因此，您展示的示例适配器模式是试图展示模式如何工作并且不太关心松散耦合。

如果您希望您的代码可测试和可替换，则应使用松散耦合，例如：

```
class CustomerService
{
    private ICustomerRepository _customerRepository;
    public CustomerService(ICustomerRepository customerRepository)
    {
        _customerRepository = customerRepository;
    }
} 
```

要通过构造函数注入`customerRepository`，您可以轻松地进行模拟`ICustomerRepository`以进行单元测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T12:07:44.100

通常，您希望以松耦合为目标，这意味着尽可能使用抽象。

当您无法用适当的抽象轻松替换类（Adaptee）时，适配器模式将帮助您做到这一点。

Adapter 是问题 Adaptee 类的包装器。Adapter 派生自抽象 Target 类，调用代码应该只处理 Target，因此它可以保持松耦合。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T12:02:53.217

这将帮助您了解它们之间的区别，但是当您需要松散耦合的类时，它在很大程度上取决于您的应用程序的设计。 [面向对象范式中的松耦合和紧耦合有什么区别？](https://stackoverflow.com/questions/2832017/what-is-the-difference-between-loose-coupling-and-tight-coupling-in-object-orien)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-11T12:23:38.090

> 当我需要紧耦合和松耦合时？

您应该始终努力实现松散耦合的设计。可能存在需要紧耦合的边缘情况，或者您继承了一个拥有它的项目，但我认为您的口号应该是设计和开发时考虑到可测试性，这意味着低耦合。我还没有从事过“松耦合”的项目，但肯定做过“紧耦合”的项目，而后者并不有趣。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-27T12:53:18.397

生产代码最好采用松耦合设计。这使您的代码易于独立于您的依赖组件进行测试，并且很容易替换您的代码正在使用的组件。

有关详细说明，请访问[http://rangahc.blogspot.com/2015/05/difference-between-tight-coupling-and-loose-coupling.html](http://Difference%20between%20tight%20coupling%20and%20loose%20coupling)

# database - 相关对象应该分组在一个表中还是多个表中？

> ID：12838992
> 
> 赞同：3
> 
> 时间：2012-10-11T11:56:41.523
> 
> 标签：database, vb.net, sqlite, database-design

这主要是一个与数据库相关的问题，但我使用的是 VB.net 和 sqlite。

所以我有一组小部件，它们都有一组特定的属性。其中有一个“类型”属性。

根据 Type 属性，还有一系列额外的依赖于类型的属性。我想知道将它们分组到具有大量空值的单个表（然后可能是单个类）中是否通常是一个好主意，或者是否应该将它们组织在数据库中的多个表（具有派生类）中，或者其他什么别的？

例子：

*   小部件 1：小，蓝色，A 型，20 磅，闪亮
*   小部件 2：小、红色、B 型、透明
*   小部件 3：大、黄色、C 型、6 英尺、5 英尺、1 英尺

它们是否应该像这样组织在一个包含很多空值的表中：

*   小工具
    *   ID、尺寸、颜色、类型、重量、isShiny、透明度、宽度、长度、高度

或者像这样：

*   小工具
    *   ID、尺寸、颜色、类型
*   小程序_A
    *   ID, 重量, isShiny
*   小工具_B
    *   身份证，透明度
*   小程序_C
    *   ID、宽度、长度、高度

最终可能有数千个小部件，可能有 20 种类型。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T13:49:07.887

在 OOP 世界中，您根据“类型”属性实现的内容通常会通过继承来实现。

继承可以在具有父表的数据库中建模（每个小部件有一条记录，无论类型如何，只存储基本小部件类的字段）和每个小部件子类型的子表。

这可以使对所有小部件的操作变得更容易（而不是对不相关的小部件表进行 UNION）。

但是，它也可能使事情变得更加困难。例如，要获取一个小部件的所有字段，您需要将父表中的记录与相应子表中的记录连接起来。

这是关于此主题的另一篇文章：[SQL Server 中的表“继承”](https://stackoverflow.com/q/529256/21727)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T13:27:19.037

What you are trying to do is [object-relational mapping](http://en.wikipedia.org/wiki/Object-relational_mapping), but you are running into the [object-relational impedance mismatch](http://en.wikipedia.org/wiki/Object-relational_impedance_mismatch).
(Also read [Object-Relational Mapping is the Vietnam of Computer Science](http://www.codinghorror.com/blog/2006/06/object-relational-mapping-is-the-vietnam-of-computer-science.html).)

There is no easy solution.

What you could do is to list *all* operations your program will be doing on the widgets table(s), analyze how they would work with both organizations, and then choose the one that you estimate is easier to use and maintain overall.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T19:12:35.267

如果您的域模型使用继承，则应该使用表继承。

最简单、最快的方法是单表继承，这是 Martin Fowler 推荐的。是的，你最终得到空字段。如果它们位于表格的“末尾”，那么现代数据库非常适合压缩它们。

更正确的方法是类表继承，它解决了你的空“问题”，但更复杂，更慢。

无论哪种方式，对于正确且灵活的解决方案，您确实需要表继承。例如，如果您的订单行项目可以用于服务或产品，那么表继承在这里真的很有帮助。

# python - Scipy Normaltest是如何使用的？

> ID：12838993
> 
> 赞同：47
> 
> 时间：2012-10-11T11:56:46.760
> 
> 标签：python, scipy

我需要在 scipy 中使用 normaltest 来测试数据集是否为正态分布。但我似乎找不到任何如何使用的好例子[`scipy.stats.normaltest`](https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.normaltest.html#scipy.stats.normaltest)。

我的数据集有 100 多个值。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-10-11T12:28:19.473

```
In [12]: import scipy.stats as stats

In [13]: x = stats.norm.rvs(size = 100)

In [14]: stats.normaltest(x)
Out[14]: (1.627533590094232, 0.44318552909231262) 
```

[`normaltest`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.normaltest.html#scipy.stats.normaltest)返回卡方统计量的 2 元组和相关的 p 值。`x`给定来自正态分布的原假设， p 值表示将看到大（或更大）的卡方统计量的概率。

如果 p-val 非常小，则意味着数据不太可能来自正态分布。例如：

```
In [15]: y = stats.uniform.rvs(size = 100)

In [16]: stats.normaltest(y)
Out[16]: (31.487039026711866, 1.4543748291516241e-07) 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-11T12:24:57.740

首先我发现 scipy.stats.normaltest 几乎是一样的。mstats 库用于掩码数组。您可以将值标记为无效且不计入计算的数组。

```
import numpy as np
import numpy.ma as ma
from scipy.stats import mstats

x = np.array([1, 2, 3, -1, 5, 7, 3]) #The array needs to be larger than 20, just an example
mx = ma.masked_array(x, mask=[0, 0, 0, 1, 0, 0, 0])
z,pval = mstats.normaltest(mx)

if(pval < 0.055):
    print "Not normal distribution" 
```

> “传统上，在统计学中，你需要一个小于 0.05 的 p 值来拒绝原假设。” - [http://mathforum.org/library/drmath/view/72065.html](http://mathforum.org/library/drmath/view/72065.html)

# spring - Spring 可重载属性一次访问

> ID：12838994
> 
> 赞同：1
> 
> 时间：2012-10-11T11:56:49.543
> 
> 标签：spring, localization

我想不出一种方法来获得 ReloadableResourceBundleMessageSource 可重新加载能力并通过语言环境一次访问属性/所有消息。ReloadableResourceBundleMessageSource API 不提供对任何内容的访问，而是通过代码和语言访问单个消息...由于成员可见性，ReloadableResourceBundleMessageSource 甚至无法扩展为访问属性。

知道如何拥有可重新加载的属性并一次访问它们吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:35:30.367

我刚刚编写了这个代码，希望它可以工作，但你需要优化一些东西，我想这个方法可以是静态的，或者如果你需要它成为一个 bean，然后从基类中获取基本名称和语言环境。

```
package mx.gob.jgtjo.apps.schedule.web.utils;

import java.util.HashMap;
import java.util.List;
import java.util.Locale;
import java.util.Map;
import java.util.Map.Entry;

import org.springframework.context.support.ReloadableResourceBundleMessageSource;

public class CustomMessageResolver extends
          ReloadableResourceBundleMessageSource {

     public CustomMessageResolver() {

     }

     public Map<Object, Object> loadAllMessagesByLocale(String basename,
               Locale locale) {

          List<String> fileNames = super
                    .calculateAllFilenames(basename, locale);

          Map<Object, Object> messagesByLocale = new HashMap<Object, Object>();

          for (String fileName : fileNames) {

               PropertiesHolder holder = super.getProperties(fileName);

               for (Entry<Object, Object> entry : holder.getProperties()
                         .entrySet()) {

                    messagesByLocale.put(entry.getKey(), entry.getValue());
               }

          }

          return messagesByLocale;

     }
} 
```

更新：我找到了一种更好的方法来从指定的基本名称中获取所有属性：

```
public class CustomMessageResolver extends
          ReloadableResourceBundleMessageSource {

     public CustomMessageResolver() {

     }

     public Map<Object, Object> loadAllMessagesByLocale(String basename,
               Locale locale) {

          Map<Object, Object> messagesByLocale = new HashMap<Object, Object>();

          PropertiesHolder holder = super.getMergedProperties(locale);

          for (Entry<Object, Object> entry : holder.getProperties().entrySet()) {

               messagesByLocale.put(entry.getKey(), entry.getValue());
          }

          return messagesByLocale;

     }
} 
```

这将从基类中获取基本名称。

# symfony - 有没有办法从与 Symfony2 中的类关联的自定义验证器添加字段错误而不是表单错误？

> ID：12838997
> 
> 赞同：0
> 
> 时间：2012-10-11T11:57:03.367
> 
> 标签：symfony

我创建了自定义验证器来验证对象比较其字段（它使用 EntityManager 来验证字段）。当对象无效时，MyValidator 将错误消息添加到 Form 对象，因为验证器关联到实体而不是字段。

```
/**
 * @StrictAssert\MyValidator
 */
class State extends MyEntity
{
...
} 
```

验证失败时，有没有办法添加字段错误而不是表单错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T07:54:46.853

在您的验证器中，您必须指定违规的字段！

使用 $context->setPropertyPath($propertyPath;

这是一个带有字段长度检查的简单示例

```
/**
 * @Assert\Callback(methods={"MyValidator"})
 */
class MyEntity
{

   public function MyValidator(ExecutionContext $context)
   {

    $propertyPath = $context->getPropertyPath() . '.length';

        //add some logic
       if($this->getLength()>255){
           //set the pointer on the field in error
           $context->setPropertyPath($propertyPath);

           //generate the error
           $context->addViolation('Incorrect length for type', array(), null);
       }
   }

} 
```