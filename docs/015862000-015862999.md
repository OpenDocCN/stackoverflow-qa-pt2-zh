# StackOverflow 问答 15862000-15862999

# c++ - c++编译器是否将多种算法组合成一个循环？

> ID：15862003
> 
> 赞同：0
> 
> 时间：2013-04-07T11:47:46.387
> 
> 标签：c++, c++11, compiler-optimization

假设我们有以下代码：

```
int main () {
 int myints[] = {3,7,2,5,6,4,9};

 // using default comparison:
 std::cout << "The smallest element is " << *std::min_element(myints,myints+7) << '\n';
 std::cout << "The largest element is "  << *std::max_element(myints,myints+7) << '\n';
} 
```

编译器会将上述优化为一个循环吗？还是在一个for循环中编写更好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T11:59:11.237

这取决于编译器。例如，我的编译器（`g++ 4.7.3`on `x86_64`）没有，保留两个单独的循环（使用 编译时`-O3`）：

```
_main:
;=== initialization code omitted ===
        jmp     L2
L3:
        movl    (%rax), %edx
        cmpl    %edx, %ebx
        cmovg   %edx, %ebx
L2:
        addq    $4, %rax
        cmpq    %rbp, %rax
        jne     L3
;=== output code omitted ===
        jmp     L8
L6:
        movl    (%rax), %ecx
        cmpl    %ecx, (%rdx)
        cmovl   %rax, %rdx
L8:
        addq    $4, %rax
        cmpq    %rbp, %rax
        jne     L6
;=== output code omitted === 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-07T13:34:37.563

根据定义，优化不是标准强制要求的，因此它实际上取决于编译器......以及其他条件的提升。

不过，在您的特殊情况下，我想发出信号[`std::minmax_element`](http://en.cppreference.com/w/cpp/algorithm/minmax_element)……可能会派上用场。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T11:59:00.010

答案就像在很多事情上一样，这取决于。

**是**的，如果编译器决定将循环融合在一起，因为它将基于启发式方法适当地提高运行时性能。

**否**更合适，因为只有 7 个元素，[循环融合](http://en.wikipedia.org/wiki/Loop_fusion)没有任何意义。

另请注意，融合没有意义，因为该操作仅执行一次（在该示例中）。

* * *

要获得更详细的答案，请查看编译器的汇编输出并比较不同编译器的输出。

* * *

另一件事是，如果它不能提高性能，为什么还要关心这种微优化。

# erlide - 如何在erlIDE中添加依赖路径？

> ID：15862004
> 
> 赞同：1
> 
> 时间：2013-04-07T11:47:55.727
> 
> 标签：erlide

我把cowboy放在我的项目deps文件夹下，怎么让erlide找到呢？或者我必须把它放在 ebin 下？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:40:11.287

我可以看到两个用例：

1.  你想在加载牛仔的同时执行你的代码
2.  您希望能够导航和搜索牛仔代码，就好像它是您项目的一部分一样

对于#2，目前唯一的方法是将牛仔作为项目的一部分，通过添加项目属性的路径（在项目的上下文菜单中选择“属性”，在“Erlang”选项卡上，您可以添加额外的源和包括目录）。这也将照顾＃1。

如果您只有牛仔横梁并想使用它们运行，则必须为项目配置启动配置，在“运行时”选项卡上，在“额外参数”中添加所需的参数，就像在命令中一样行（在这种情况下，类似于“-pa /path/to/deps/cowboy/ebin”，不带引号）。引用事情可能有点棘手，它没有经过彻底的测试。

问候，弗拉德

# php - 需要使用正则表达式或其他东西从 php 中的字符串中获取一部分

> ID：15862005
> 
> 赞同：0
> 
> 时间：2013-04-07T11:47:57.487
> 
> 标签：php, regex, json, string

我访问[http://www.draugiem.lv/bkventspils/js/fans?count=0时返回了这个字符串](http://www.draugiem.lv/bkventspils/js/fans?count=0)

```
D.w({"container":"pagescontainer","width":240,"page":{"name":"BK Ventspils","about":"Basketbola Klubs \"Ventspils\"","url":"http:\/\/www.draugiem.lv\/bkventspils","image":"http:\/\/i7.ifrype.com\/business\/001\/547\/v1319550676\/i_13001547.jpg","totalfans":"557"},"fans":[]}); 
```

我需要从 php 中的这个字符串中获取“totalfans”计数。我尝试使用 file_get_contents 然后 json_decode 来做这件事，就像我通常会做的那样，但它不适用于这个字符串。我在这里做错了什么？可能有一个正则表达式来获取这部分，但我不明白正则表达式，所以如果你这样做，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T11:52:29.130

以下是您的问题的两种可能的解决方案。

**1\. JSON：** 只要去掉`D.w(`开头和`);`结尾的 the，你就会得到一个包含有效 JSON 的字符串。

**2\. RegEx：**搜索模式`"totalfans":"(\d+)"`应该可以解决问题。

# vbscript - 我如何获得最后四个和第一个字符？

> ID：15862006
> 
> 赞同：0
> 
> 时间：2013-04-07T11:48:21.160
> 
> 标签：vbscript

我有这段代码，我想用它来比较两个字符串。这个想法是获取一个单词的第一个字母和一个数字的最后四个并将它们放在一起，以便我可以将它与另一个进行比较。例如，如果我有“Smith John 123456”并且我想输入“s3456”，我应该能够找到它。

```
Dim strFileName, strTxtValue

strFileName = "4ABCD_Delta_Jhon_T_JR_123456"
strTxtValue = "D3456"

Dim item, items, firstInitial, lastFour, myArray

strFileName = replace(strFileName,"_"," ")
myArray = Split(strFileName)

For Each item In myArray
    If IsNumeric(item) Then
        lastFour = Right(item, Len(item)-2)
        Exit For
    End If
Next
For Each items In myArray
    firstInitial = Left(items, 1)&lastFour
    If UCase(strTxtValue) = UCase(firstInitial) Then
        Contains = True
    End If
Next 
```

到目前为止，这就是我所拥有的，但我无法让它发挥作用。有人能帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T12:37:25.633

鉴于您的第一个示例，获取第一个字母和最后四位数字很容易：

```
>> s = "Smith John 123456"
>> t = LCase(Left(s, 1)) & Right(s, 4)
>> WScript.Echo t, CStr(t = "s3456")
>>
s3456 True 
```

如果您的输入更加多样化，例如“4ABCD_Delta_Jhon_T_JR_123456”等文件名，则可能需要使用正则表达式或创造性地使用拆分。让我们从：

```
>> s = "4ABCD_Delta_Jhon_T_JR_123456"
>> s = Split(s, "_", 2)(1)
>> t = LCase(Left(s, 1)) & Right(s, 4)
>> WScript.Echo t, CStr(t = "d3456")
>>
d3456 True
>> 
```

这显然取决于作为输入的第二块的名称。

如果您提供一些更具代表性的输入样本，我愿意考虑使用 RegExp 解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T19:14:53.407

另一种方法是使用正则表达式：

```
s = "Smith John 123456"

Set re = New RegExp
re.Pattern = "^(.).*(.{4})$"

WScript.Echo LCase(re.Replace(s, "$1$2")) 
```

对于第二个示例，如下所示：

```
s = "4ABCD_Delta_Jhon_T_JR_123456"

Set re = New RegExp
re.Pattern = "^(?:\w*?[0-9]\w*?_)?([a-z])[a-z]*_.*(.{4})$"
re.IgnoreCase = True

WScript.Echo LCase(re.Replace(s, "$1$2")) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T21:29:33.990

另一种选择：

```
strFileName = "4ABCD_Delta_Jhon_T_JR_123456"
strTxtValue = "D3456"
strFromName = ""
myArray     = Split(strFileName, "_")
For i = 0 To UBound(myArray)
    firstChar = Asc(myArray(i))
    'if not a number...
    If firstChar < 48 Or firstChar > 57 Then
        strFromName = Chr(firstChar)
        Exit For
    End If
Next
strFromName = strFromName & Right(strFileName, 4)
WScript.Echo strFromName, CStr(strFromName = strTxtValue)
'>> D3456 True 
```

# c# - UI 线程在文本框调用期间冻结

> ID：15862008
> 
> 赞同：5
> 
> 时间：2013-04-07T11:48:41.257
> 
> 标签：c#, multithreading, user-interface, backgroundworker, freeze

为什么在从单独线程调用文本框期间 UI 冻结

```
 private void button1_Click(object sender, EventArgs e)
    {
        Thread t1 = new Thread(DoStuff);
        t1.Start();
    }

    void DoStuff()
    {
        using (var wc = new System.Net.WebClient())
        {
            string page_src = wc.DownloadString("http://bing.com");
            textBox1.Invoke((MethodInvoker)delegate() { textBox1.Text = page_src; }); // freezes while textbox text is changing
        }
    } 
```

同时 backgroundworker 完美运行 - UI 不会冻结

```
 private void button1_Click(object sender, EventArgs e)
    {
        BackgroundWorker bw1 = new BackgroundWorker();
        bw1.DoWork += (a, b) => { DoStuff(); };
        bw1.RunWorkerAsync();
    }

    void DoStuff()
    {
        using (var wc = new System.Net.WebClient())
        {
            string res = wc.DownloadString("http://bing.com");
            textBox1.Invoke((MethodInvoker)delegate() { textBox1.Text = res; }); // works great
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T11:56:21.273

那不是因为调用。您的 UI 队列已满，可能是因为：

1.  `DoStuff()`你经常打电话
2.  你在 UI 上做其他繁重的工作

**更新：**

根据已删除的评论，将 50K 的文本放入文本框中是问题的根源。考虑使用按需加载数据的智能文本框。应该有一个准备好了。

# ruby-on-rails - 无法在我的 rails 项目中编辑国际化字符串

> ID：15862010
> 
> 赞同：1
> 
> 时间：2013-04-07T11:48:51.367
> 
> 标签：ruby-on-rails, ruby, string, internationalization

我对 Ruby 还很陌生，而且我继承了一个大项目；到目前为止，我一直在通过执行以下操作来很好地更改按钮/表单/文本框上的文本：

如果我想将标有“Text here”的对象上的文本更改为不同的内容，我会在整个 rails 项目中搜索带有“Text here”的字符串。通常我会在我的 locales/en.yml 文件中得到一个结果，然后我会更改该文件的相应部分。

但是，在本例中，我有一个带有“输入位置”的文本字段。我想将其更改为“输入地址”所以我搜索了“输入位置”并在我的国际化文件中果然看到了：

```
helpers:
enter_a_location: "Enter a location" 
```

这是我整个项目中唯一出现此字符串的地方。但无论我将其更改为什么，当我开始我的 Rails 项目时，我都会不断收到“输入位置”。即使我完全删除了整个 enter_a_location ，它仍然会出现。真的很烦人！我以为我掌握了这个编程业务的窍门。有什么想法吗？

出现“输入位置”的代码部分是（在 text_field 部分中）：

```
<div class='address-area'>

<%= form_for current_user, :url => update_address_path, :html => {:method => :post, :class => 'form-horizontal', :id => 'address_form'} do |f| %>
  <%= f.text_field :address, :id => 'address_autocomplete' %>
  <%= f.hidden_field :city %>
  <%= f.hidden_field :lat  %>
  <%= f.hidden_field :lng  %>

  <%= hidden_field_tag :changed %>
<% end %> 
```

任何帮助，将不胜感激。

这是我的 Gemfile：

```
source 'https://rubygems.org'

gem 'rails', '3.2.3'
gem 'rake', '~> 0.9.5'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'mysql2', '~> 0.3.11'
gem 'json', '~> 1.7.3'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'compass-rails', '~> 1.0.1'
  gem 'bootstrap-sass', '~> 2.0.2'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'therubyracer', '~> 0.10.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platform => :ruby

  gem 'uglifier', '>= 1.0.3'
  gem 'jquery-fileupload-rails'
end

gem 'jquery-rails', '~> 2.0.2'
gem 'inherited_resources', '~> 1.3.1'
gem 'simple_form', '~> 2.0.2'
gem 'will_paginate', '~> 3.0.3'
gem 'bootstrap-will_paginate', '~> 0.0.7'
gem 'has_scope', '~> 0.5.1'
gem "best_in_place", "~> 1.1.2"

gem 'devise', '~> 2.0.4'
gem 'omniauth'
gem 'omniauth-facebook'
gem 'linkedin'
gem 'omnicontacts', '~> 0.2.3'
gem 'SystemTimer', '~> 1.2.3'
gem 'resque', '~> 1.20.0'
gem 'resque-scheduler', :require => 'resque_scheduler'
gem 'rest-client', '~> 1.6.7'
gem 'rest-graph', '~> 2.0.1'

gem 'geokit', '=1.6.5'
gem 'geokit-rails3', '~> 0.1.5'
gem 'memcache-client'

gem 'forgery', '~> 0.5.0'
gem 'factory_girl_rails', '~> 1.7.0'
gem "amoeba", "~> 1.2.1"

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'ruby-debug'

group :development do
  gem 'mongrel'
  gem 'pry-rails'
  gem 'quiet_assets'
  gem 'email_spec'
  gem 'capistrano', '~> 2.12.0'
  gem 'capistrano-ext', '~> 1.2.1'
  gem 'ruby-debug-base', '=0.10.4'
  gem 'ruby-debug', '=0.10.4'
  gem 'annotate'
  gem 'letter_opener', :git => 'https://github.com/ryanb/letter_opener.git'
  gem 'localtunnel'
end

group :test do
  gem 'cucumber-rails', '~> 1.3.0', :require => false
  gem 'capybara-webkit', '~> 0.11.0'
  gem 'headless', '~> 0.3.1'
  gem 'database_cleaner', '~> 0.7.2'
  gem 'rspec-rails', '~> 2.9.0'
  gem 'email_spec'
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T13:00:46.483

In some cases if the I18n module doesn't find the translation ( e.g. form attributes ) it falls back to a 'humanized' conversion of the translation's key. For instance 'enter_a_location' -> 'Enter a location'. So you wouldn't know whether it was using the set translation or fallbacking.

Or as Sascha mentioned it could be that another gem/engine/plugin you are using has the exact same translation key and is overriding the one you have set.

Right now it's hard to tell, because we can't see where the assignment of 'enter_a_location' is happening.

# html - 使用 Animate.css 动画锚标记

> ID：15862015
> 
> 赞同：0
> 
> 时间：2013-04-07T11:49:01.950
> 
> 标签：html, css, animation

嗨，我有以下

```
<p style="text-align:center;margin-top: 50px;"><a href="#" class="pictogram" style="position:relative;" id="arrow" >&#59236;</a></p> 
```

我正在使用 Daniel Eden 的 animate.css。如果我将类“动画摇动”添加到锚标记，它就不起作用。但是，如果我将它添加到 p 标签中，它就可以工作。

知道有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T12:06:10.643

从评论中转录，因为它已为 OP 解决；

尝试添加`display: inline-block;`并删除`position: relative;`.

祝你好运！

# html - 为什么 和不 ?</a></h1> <div class="ml12 aside-cta flex--item print:d-none sm:ml0 sm:mb12 sm:order-first sm:as-end"> <a href="https://stackoverflow.com/questions/ask" target="_blank" class="ws-nowrap s-btn s-btn__primary">问问题</a></div> </div> <div class="d-flex fw-wrap pb8 mb16 bb bc-black-075"> <div class="flex--item ws-nowrap mr16 mb8"> <span class="fc-light mr2"></span> </div> <div class="flex--item ws-nowrap mr16 mb8" title="2022-04-17 15:46:40Z"> <span class="fc-light mr2">问问题</span> <time itemprop="dateCreated" datetime="2013-04-07T11:49:27.833">2013-04-07T11:49:27.833</time> </div> <div class="flex--item ws-nowrap mb8" title="Viewed 6 times"> <span class="fc-light mr2"></span> 154 次 </div> </div> <div id="mainbar" role="main" aria-label="question and answers"> <div class="question" data-questionid="4" data-position-on-page="0" data-score="763" id="question"> <div class="post-layout"> <div class="votecell post-layout--left"> <div class="js-voting-container d-flex jc-center fd-column ai-stretch gs4 fc-black-200" data-post-id="4"> <button class="js-vote-up-btn flex--item s-btn s-btn__unset c-pointer " data-controller="s-tooltip" data-s-tooltip-placement="right" aria-pressed="false" aria-label="Up vote" data-selected-classes="fc-theme-primary" data-unselected-classes="" aria-describedby="--stacks-s-tooltip-peeufs8c"> <svg aria-hidden="true" class="svg-icon iconArrowUpLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 25h32L18 9 2 25Z"></path></svg> </button> <div id="--stacks-s-tooltip-peeufs8c" class="s-popover s-popover__tooltip pe-none" aria-hidden="true" role="tooltip">This question shows research effort; it is useful and clear<div class="s-popover--arrow"></div></div> <div class="js-vote-count flex--item d-flex fd-column ai-center fc-black-500 fs-title" itemprop="upvoteCount" data-value=""> 5 </div> <button class="js-vote-down-btn flex--item s-btn s-btn__unset c-pointer " data-controller="s-tooltip" data-s-tooltip-placement="right" aria-pressed="false" aria-label="Down vote" data-selected-classes="fc-theme-primary" data-unselected-classes="" aria-describedby="--stacks-s-tooltip-04106eqn"> <svg aria-hidden="true" class="svg-icon iconArrowDownLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 11h32L18 27 2 11Z"></path></svg> </button><div id="--stacks-s-tooltip-04106eqn" class="s-popover s-popover__tooltip pe-none" aria-hidden="true" role="tooltip">This question does not show any research effort; it is unclear or not useful<div class="s-popover--arrow"></div></div> <div id="--stacks-s-tooltip-tgvwendx" class="s-popover s-popover__tooltip pe-none" aria-hidden="true" role="tooltip">Bookmark this question.<div class="s-popover--arrow"></div></div> <a class="js-post-issue flex--item s-btn s-btn__unset c-pointer py6 mx-auto" data-shortcut="T" data-ks-title="timeline" data-controller="s-tooltip" data-s-tooltip-placement="right" aria-label="Timeline" aria-describedby="--stacks-s-tooltip-abwmy15k"><svg aria-hidden="true" class="mln2 mr0 svg-icon iconHistory" width="19" height="18" viewBox="0 0 19 18"><path d="M3 9a8 8 0 1 1 3.73 6.77L8.2 14.3A6 6 0 1 0 5 9l3.01-.01-4 4-4-4h3L3 9Zm7-4h1.01L11 9.36l3.22 2.1-.6.93L10 10V5Z"></path></svg></a><div id="--stacks-s-tooltip-abwmy15k" class="s-popover s-popover__tooltip pe-none" aria-hidden="true" role="tooltip">Show activity on this post.<div class="s-popover--arrow"></div></div> </div> </div> <div class="postcell post-layout--right"> <div class="s-prose js-post-body" itemprop="text"> <p>Why do we type this:</p>&#xA;&#xA;<pre><code>&lt;link rel='stylesheet' type='text/css' href='/file.css' /&gt;&#xA;</code></pre>&#xA;&#xA;<p>Instead of this:</p>&#xA;&#xA;<pre><code>&lt;style type='text/css' src='/file.css' /&gt;&#xA;</code></pre>&#xA;&#xA;<p>The reason that this seem unintuitive are that we use the <code>&lt;style&gt;</code> tag for inline CSS (just as we use the <code>&lt;script&gt;</code> tag for both inline and external Javascript).</p>&#xA; </div> <div class="mt24 mb12"> <div class="post-taglist d-flex gs4 gsy fd-column"> <div class="d-flex ps-relative fw-wrap"> <a href="/tags/html" class="post-tag js-gps-track" title="show questions tagged 'html'" rel="tag">html</a><a href="/tags/syntax" class="post-tag js-gps-track" title="show questions tagged 'syntax'" rel="tag">syntax</a> </div> </div> </div> </div> <span class="d-none" itemprop="commentCount">4</span> </div> </div> <div class="js-zone-container zone-container-responsive"> <div id="dfp-isb" class="everyonelovesstackoverflow everyoneloves__inline-sidebar mx-auto" style="min-height: auto; height: auto; display: none;"></div> <div class="js-report-ad-button-container mx-auto" style="width: 300px"></div> </div> <div id="answers"> <a name="tab-top"></a> <div id="answers-header"> <div class="answers-subheader d-flex ai-center mb8"> <div class="flex--item fl1"> <h2 class="mb0" data-answercount=""> 1 回答 <span style="display:none;" itemprop="answerCount">1</span> </h2> </div> </div> </div> <a name="7"></a> <div id="answer-7" class="answer js-answer accepted-answer" data-answerid="7" data-parentid="4" data-score="506" data-position-on-page="1" data-highest-scored="1" data-question-has-accepted-highest-score="1" itemprop="suggestedAnswer" itemscope="" itemtype="https://schema.org/Answer"> <div class="post-layout"> <div class="votecell post-layout--left"> <div class="js-voting-container d-flex jc-center fd-column ai-stretch gs4 fc-black-200" data-post-id="7"> <button class="js-vote-up-btn flex--item s-btn s-btn__unset c-pointer " data-controller="s-tooltip" data-s-tooltip-placement="right" aria-pressed="false" aria-label="Up vote" data-selected-classes="fc-theme-primary" data-unselected-classes="" aria-describedby="--stacks-s-tooltip-dgvag2l3"> <svg aria-hidden="true" class="svg-icon iconArrowUpLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 25h32L18 9 2 25Z"></path></svg> </button><div id="--stacks-s-tooltip-dgvag2l3" class="s-popover s-popover__tooltip pe-none" aria-hidden="true" role="tooltip">This answer is useful<div class="s-popover--arrow"></div></div> <div class="js-vote-count flex--item d-flex fd-column ai-center fc-black-500 fs-title" itemprop="upvoteCount" data-value="-1"> -1 </div> <button class="js-vote-down-btn flex--item s-btn s-btn__unset c-pointer " data-controller="s-tooltip" data-s-tooltip-placement="right" aria-pressed="false" aria-label="Down vote" data-selected-classes="fc-theme-primary" data-unselected-classes="" aria-describedby="--stacks-s-tooltip-gn8ppsfv"> <svg aria-hidden="true" class="svg-icon iconArrowDownLg" width="36" height="36" viewBox="0 0 36 36"><path d="M2 11h32L18 27 2 11Z"></path></svg> </button> </div> </div> <div class="answercell post-layout--right"> <div class="s-prose js-post-body" itemprop="text"> <p>Of course you can use the tag if you want, but that only works when your css code is embedded on the html file, in that case it will be like this:</p>&#xA;&#xA;<pre><code>&lt;style media="screen" type="text/css"&gt;&#xA;&#xA;Add style rules here&#xA;&#xA;&lt;/style&gt;&#xA;</code></pre>&#xA;&#xA;<p>When you use the tag you are "linking" an external resource to your current document, that's why we use the "link" tag.</p>&#xA;&#xA;<p>This is the definition from the W3:</p>&#xA;&#xA;<blockquote>&#xA; <p>The tag defines the relationship between a document and an&#xA; external resource.</p>&#xA; &#xA; <p>The tag is most used to link to style sheets.</p>&#xA;</blockquote>&#xA; </div> <div class="mt24"> <div class="user-action-time" style="color:#999;text-align:right;">于 2013-04-07T11:54:42.533 回答</div> </div> </div> </div> </div></div> </div> <div id="sidebar" class="show-votes" role="complementary" aria-label="sidebar"> <div class="module sidebar-related"> <h4 id="h-related">Related</h4> <div class="related js-gps-related-questions" data-tracker="rq=1"> <div class="spacer"> <a href="/questions/16843020" title="Question score (upvotes - downvotes)"> <div class="answer-votes large">1</div> </a> <a href="/questions/16843020" class="question-hyperlink">scala - 使用部分应用函数，性能问题</a> </div><div class="spacer"> <a href="/questions/16843025" title="Question score (upvotes - downvotes)"> <div class="answer-votes large">2</div> </a> <a href="/questions/16843025" class="question-hyperlink">php - 在 PHP 会话中存储少量非用户数据是个好主意吗</a> </div><div class="spacer"> <a href="/questions/16843028" title="Question score (upvotes - downvotes)"> <div class="answer-votes large">1</div> </a> <a href="/questions/16843028" class="question-hyperlink">wpf - 抽屉式功能 WPF 网格</a> </div><div class="spacer"> <a href="/questions/16843029" title="Question score (upvotes - downvotes)"> <div class="answer-votes large">1</div> </a> <a href="/questions/16843029" class="question-hyperlink">string - haskell 从文件中读取</a> </div><div class="spacer"> <a href="/questions/16843030" title="Question score (upvotes - downvotes)"> <div class="answer-votes large">1</div> </a> <a href="/questions/16843030" class="question-hyperlink">insert - 在redis中获取插入的密钥</a> </div><div class="spacer"> <a href="/questions/16843032" title="Question score (upvotes - downvotes)"> <div class="answer-votes large">1</div> </a> <a href="/questions/16843032" class="question-hyperlink">ios - 从 Opera Mini 内部打开移动 Safari？</a> </div><div class="spacer"> <a href="/questions/16843033" title="Question score (upvotes - downvotes)"> <div class="answer-votes large">1</div> </a> <a href="/questions/16843033" class="question-hyperlink">java - Java 内存不足问题</a> </div><div class="spacer"> <a href="/questions/16843034" title="Question score (upvotes - downvotes)"> <div class="answer-votes large">1</div> </a> <a href="/questions/16843034" class="question-hyperlink">jquery - 当内容滚动到视图中时激活 CSS3 关键帧动画</a> </div><div class="spacer"> <a href="/questions/16843036" title="Question score (upvotes - downvotes)"> <div class="answer-votes large">2</div> </a> <a href="/questions/16843036" class="question-hyperlink">javascript - 使用 javascript/jquery 居中左对齐文本</a> </div><div class="spacer"> <a href="/questions/16843037" title="Question score (upvotes - downvotes)"> <div class="answer-votes large">2</div> </a> <a href="/questions/16843037" class="question-hyperlink">php - 表单未使用复选框数组提交</a> </div> </div> </div> <div class="module js-gps-related-tags" id="related-tags"> <h4 id="h-related-tags">Reference</h4> <div data-name="javascript"> <a href="https://php.github.net.cn" class="post-tag no-tag-menu js-gps-track" target="_blank">php</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">×</span>&nbsp;<span class="item-multiplier-count">1429865</span> </span> </div> <div data-name="javascript"> <a href="https://c-cpp.com" class="post-tag no-tag-menu js-gps-track" target="_blank">c/c++</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">×</span>&nbsp;<span class="item-multiplier-count">756500</span> </span> </div> <div data-name="javascript"> <a href="https://nginx.github.net.cn" class="post-tag no-tag-menu js-gps-track" target="_blank">nginx</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">×</span>&nbsp;<span class="item-multiplier-count">49975</span> </span> </div> <div data-name="javascript"> <a href="https://mongodb.net.cn" class="post-tag no-tag-menu js-gps-track" target="_blank">mongodb</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">×</span>&nbsp;<span class="item-multiplier-count">159057</span> </span> </div> <div data-name="javascript"> <a href="https://mybatis.net.cn" class="post-tag no-tag-menu js-gps-track" target="_blank">mybatis</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">×</span>&nbsp;<span class="item-multiplier-count">3233</span> </span> </div> <div data-name="javascript"> <a href="https://anaconda.org.cn" class="post-tag no-tag-menu js-gps-track" target="_blank">anaconda</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">×</span>&nbsp;<span class="item-multiplier-count">13410</span> </span> </div> <div data-name="javascript"> <a href="https://pycharm.net.cn" class="post-tag no-tag-menu js-gps-track" target="_blank">pycharm</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">×</span>&nbsp;<span class="item-multiplier-count">14671</span> </span> </div> <div data-name="javascript"> <a href="https://python.github.net.cn" class="post-tag no-tag-menu js-gps-track" target="_blank">python</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">×</span>&nbsp;<span class="item-multiplier-count">1902243</span> </span> </div> <div data-name="javascript"> <a href="https://vscode.github.net.cn" class="post-tag no-tag-menu js-gps-track" target="_blank">vscode</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">×</span>&nbsp;<span class="item-multiplier-count">56040</span> </span> </div> <div data-name="javascript"> <a href="https://dockerdocs.cn" class="post-tag no-tag-menu js-gps-track" target="_blank">docker</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">×</span>&nbsp;<span class="item-multiplier-count">110988</span> </span> </div> <div data-name="javascript"> <a href="https://github.net.cn" class="post-tag no-tag-menu js-gps-track" target="_blank">github</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">×</span>&nbsp;<span class="item-multiplier-count">49000</span> </span> </div> <div data-name="javascript"> <a href="https://flask.github.net.cn" class="post-tag no-tag-menu js-gps-track" target="_blank">flask</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">×</span>&nbsp;<span class="item-multiplier-count">49129</span> </span> </div> <div data-name="javascript"> <a href="https://ffmpeg.github.net.cn" class="post-tag no-tag-menu js-gps-track" target="_blank">ffmpeg</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">×</span>&nbsp;<span class="item-multiplier-count">24037</span> </span> </div> <div data-name="javascript"> <a href="https://jmeter.net" class="post-tag no-tag-menu js-gps-track" target="_blank">jmeter</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">×</span>&nbsp;<span class="item-multiplier-count">16910</span> </span> </div> <div data-name="javascript"> <a href="https://matplotlib.net" class="post-tag no-tag-menu js-gps-track" target="_blank">matplotlib</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">×</span>&nbsp;<span class="item-multiplier-count">63493</span> </span> </div> <div data-name="javascript"> <a href="https://getbootstrap.net" class="post-tag no-tag-menu js-gps-track" target="_blank">bootstrap</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">×</span>&nbsp;<span class="item-multiplier-count">54641</span> </span> </div> </div> </div> </div> </div> </div> </div> <footer id="footer" class="site-footer js-footer" role="contentinfo"> <div class="site-footer--container"> <div class="site-footer--logo"> <a href="https://stackoverflow.com"><svg aria-hidden="true" class="native svg-icon iconLogoGlyphMd" width="32" height="37" viewBox="0 0 32 37"><path d="M26 33v-9h4v13H0V24h4v9h22Z" fill="#BCBBBB"/><path d="m21.5 0-2.7 2 9.9 13.3 2.7-2L21.5 0ZM26 18.4 13.3 7.8l2.1-2.5 12.7 10.6-2.1 2.5ZM9.1 15.2l15 7 1.4-3-15-7-1.4 3Zm14 10.79.68-2.95-16.1-3.35L7 23l16.1 2.99ZM23 30H7v-3h16v3Z" fill="#F48024"/></svg></a> </div> <nav class="site-footer--nav"> <div class="site-footer--col"> <h5 class="-title"><a href="https://stackoverflow.org.cn" class="js-gps-track" data-gps-track="footer.click({ location: 3, link: 15})">Stack Overflow 中文网</a></h5> <p>遵从 CC BY-SA 知识共享许可协议。</p> </div> </nav> </div> </footer> <script> var _hmt = _hmt || []; (function() { var hm = document.createElement("script"); hm.src = "https://hm.baidu.com/hm.js?709ff2ad9744e86b5b0eee677fc13ede"; var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s); })(); </script> <!-- Google tag (gtag.js) --> <script async src="https://www.googletagmanager.com/gtag/js?id=G-1MW5BV8G8E"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-1MW5BV8G8E'); </script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6117966252207595" crossorigin="anonymous"></script> </body> </html>

> ID：15862017
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

# android - 谷歌地图上的标记

> ID：15862025
> 
> 赞同：-2
> 
> 时间：2013-04-07T11:50:44.673
> 
> 标签：android, google-maps

请在地图上如何开发，当您在屏幕（地图）上单击时，它会显示所选区域的标记，当您单击标记后，它会显示一个新屏幕，其中包含有关所选区域的信息，例如经度和纬度

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T12:06:18.943

卢卡斯是对的。首先阅读文档。你可以在[这里](http://developer.android.com/reference/com/google/android/gms/maps/model/Marker.html)阅读。为了给您一个良好的开端，您可以如何在给定的纬度、经度上添加一个标记，带有一个headind字符串和详细的字符串（可以是地址等）

```
 // Function to call
    private void addMarker(GoogleMap map, double lati, double longi,
                           String titl, String snippt) {
      map.addMarker(new MarkerOptions().position(new LatLng(lati, longi))
                                       .title(titl)
                                       .snippet(snippt));
    } 
```

以下是我如何使用 lat 和 lng 作为双精度值调用函数：

```
 addMarker(map, lat, lng,"Address Heading", "Data string"); 
```

'map' 是一个 GoogleMap 对象。这是我初始化对象的方式：

```
 SupportMapFragment mapFrag=
         (SupportMapFragment)getSupportFragmentManager().findFragmentById(R.id.map);
     map=mapFrag.getMap();
     map.setInfoWindowAdapter(new PopupAdapter(getLayoutInflater()));
     map.setOnInfoWindowClickListener(this);
     map.setMyLocationEnabled(true);
     map.getUiSettings().setMyLocationButtonEnabled(false); 
```

这只是整个代码的片段，让您对它有一些了解。不过，从文档开始是个好主意。

# php - Parse Form from xml using input objects, maintaining data integrity

> ID：15862027
> 
> 赞同：0
> 
> 时间：2013-04-07T11:51:08.787
> 
> 标签：php, xml, forms, oop, dry

I'm creating a system form building a form processing an xml. Form Layout is almost the same, so depending on url I will load a different xml that will generate different form.

I use 3 diffrent classes:

*   Form manages all form infos (action, enctype, upload dir for files), values (if in update), language and input creation
*   Input manages everything concerning Input (name, id, ...)
*   Language manages labels

When I create Form obj I create instance of language class (input labels are Language instance key), get values from db and parse XML to create input as Input class instance (passing the input xml object in the constructor). An excerpt for Form class in creating input

```
 if(count($obj->input)):
                foreach($obj->input as $input):                             
                    $Input = new Input($input);
                    $val = !empty($this->arValues['normal'][(string)$Input->getname()]) ? $this->arValues['normal'][(string)$Input->getname()] : '';
                    $Input->setvalue($val);
                    $label = !empty($input['label']) && !empty($this->Language->getTranslation((string)$input['label'])) ? $this->Language->getTranslation((string)$input['label']) : '';
                    $Input->setlabel($label);
                    $Input->setlgTag($lgTag);
                    $this->arInputs[(string)$Input->getname()] = $Input;
                endforeach;
            endif; 
```

Xml input can be:

```
 <input type="text" label="label_name" name="name" ...></input> 
```

but also:

```
 <input type="image" label="image_name" name="img" usecaption="true" ...></input> 
```

In the first case no problem, I get my input; in the second case the situation is trickier: - I define the file upload dir in Form, but for input value I'd need it also in input instance (this is pretty easy, but as I define input type in Input class, I would populate a value even when this is not needed) - basing on attribute 'usecaption' I would like to create an input type text for associate caption to image: in fact I'm going to have 2 html inputs (type file & type text) in one xml input (type image) and I lose data as values and language are dfined in Form.

I thought of using Form instance inside input, but as Input instances are defined in Form class, there can be recursive problems, and this is not DRY.

My question is: **HOW CAN I PASS AND REUSE SPECIFIC DATA IN INPUT COMING FORM FORM INSTANCE?**

Any answer is appreciated... For sure I'm missing something but it's days I'm looping...

CLASSES

```
 #######################################################
    #
    #   class Form
    #
    #   Form management
    #
    #######################################################

    class Form {

private $xmlObj;        // xml object used in form construction
private $arInputs;      // all the input objects stored

private $Translations;  // will contain instance of Translations Class
private $ODB;           // class for managing db
private $_ID;           // ID of the Elements (if any)
private $tab_name;      // table name
private $UploadDir;     // upload dir for files

// form properties
public $action  = '';
public $method  = 'post';
public $enctype = '';

public $arValues = array(); // array for all form values

private $strForm;           // string that will contain form html

/*
 *  __construct
 *
 *  Get xmlObj, translations and element id
*/
public function __construct($xmlObj = NULL, $arTrads = array(), $_ID = 0){

    $this->xmlObj   = $xmlObj;      
    $this->Translations     = TranslationsManager::getInstance();

    $this->ODB = DBObject::getInstance();
    $this->_ID = $_ID;

    $this->tab_name     = !empty($xmlObj['tab_name']) ? $xmlObj['tab_name'] : '';
    $this->UploadDir    = !empty($xmlObj['upload_dir']) ? $xmlObj['upload_dir'] : '';
    $this->action       = !empty($xmlObj['action']) ? $xmlObj['action'] : '';
    $this->method       = !empty($xmlObj['method']) ? $xmlObj['method'] : 'post';
    $this->enctype      = !empty($xmlObj['enctype']) ? $xmlObj['enctype'] : '';

}

/*
 *  SetupInputs
 *
 *  I populate array Input
 *
*/
public function SetupInputs(){

    if(count($this->input)):
        foreach($this->input as $input):                                
            $Input = new Input($input);     // creo l'oggetto input

        endforeach;
    endif;

}   

/*
 *  HtmlForm
 *
 *  I echo The form Input
 *
*/
public function HtmlForm(){

    $this->strForm = '';

    if(count($this->xmlObj->input)):
        foreach($this->xmlObj->input as $input):
            $this->strForm .= $this->arInputs[(string)$input['name']]->htmlIt();
        endforeach;
    endif;

    return $this->strForm;

} 
```

}

```
 #######################################################
    #
    #   class Input
    #
    #   Input management
    #
    #######################################################

    class Input {

private $arAttributes = array();            // Input attributes
private $arOptions = array();               // Input options (to use in input like select, radio, checkbox)
private $strInput;                          // html

/*
 *  __construct
 *
 *  Imposto tutti gli attributi dell'input
*/
public function __construct($inputobj = NULL){  // if I don't have any xml obj as parameter, I just create the input object

    if($inputobj !== NULL && is_object($inputobj) !== false):

        // get attributes if any
        if(count($inputobj->attributes())):                                 
            foreach($inputobj->attributes() as $key => $val):
                $this->arAttributes[(string)$key] = (string)$val;
            endforeach;
        endif;

        // I any option
        if(count($inputobj->children())):
            foreach($inputobj->children() as $v):
                $this->addOption($v);
            endforeach;
        endif;

        // I define id and html of required field
        if($this->getAttribute('id') === false && $this->getAttribute('name') !== false) $this->setAttribute('id', $this->getAttribute('name')); // If not specific id I usa name
        $this->getAttribute('required') !== false && $this->getAttribute('required') > 0 ? $this->setAttribute('html_required', '*') : $this->setAttribute('html_required', '');

    endif;

}

/*
 *  OVERLOADING
 *
 *  I use to get and set properties from outside
*/
public function __call($prop, $v){

    $attr = substr($prop, 3);
    $method = substr($prop, 0,  3);

    switch($method):
        case 'set': return $this->setAttribute($attr, $v[0]); break;
        case 'get': return $this->getAttribute($attr); break;
    endswitch;

}

/*
 *  getAttribute - setattribute
 *
 *  
 *
*/
private function getAttribute($attr){       
    return array_key_exists((string)$attr, $this->arAttributes) !== false ? $this->arAttributes[(string)$attr] : false;
}

private function setAttribute($attr, $value){
    $this->arAttributes[(string)$attr] = $value;
    return true;
}

/*
 *  addOption
 *
 *  add an option to input checkbox, radio o select
*/
public function addOption($Options){    
    $this->arOptions[] = $Options;
}

/*
 *  htmlIt
 *
 *  generate html
 *
*/
public function htmlIt(){

    // **************************************************************** ISSUE
    // I'd like to get the translation using attribute label as parameter: html_label is the correct translation
    $this->getAttribute('label') !== false  
        ? $this->setAttribute('html_label', $this->Form->Translations->getTranslations((string)$this->getAttribute('label'))) // <-- HERE I WOULD LIKE TO ACCESS THE Trasnlations INSTANCE IN FORM
        : $this->setAttribute('html_label', '');    // ridefinisco la label dell'input sull base della traduzione

    switch($this->getAttribute('type')):
        case 'texteditor': 
            return $this->texteditor();
            break;

        case 'textarea': 
            return $this->textarea();
            break;

        case 'radio':
            return $this->radio();
            break;

        case 'img':
            return $this->img();
            break;

        case 'file':
            return $this->file();
            break;

        default: 
            return $this->text();
    endswitch;

}

/*
 *
 *  I CREATE DIFFERENT INPUT TYPE
 *
 */

private function text(){

    return '    <label'.$this->getAttribute('style').'>'.$this->getAttribute('html_label').$this->getAttribute('html_required').'
                    <input type="text" name="'.$this->getAttribute('name').'" id="'.$this->getAttribute('id').'" value="'.$this->getAttribute('value').'">
                </label>'."\n";

}

private function texteditor(){

    return '    <label'.$this->getAttribute('style').'>'.$this->getAttribute('html_label').$this->getAttribute('html_required').'
                    <textarea name="'.$this->getAttribute('name').'" id="'.$this->getAttribute('id').'" cols="20" rows="5">'.$this->getAttribute('value').'</textarea>
                </label>
                <script type="text/javascript">
                //<!--
                    CKEDITOR.replace("'.$this->getAttribute('id').'")
                //-->
                </script>
                '."\n";
}

private function textarea(){
    return '    <label'.$this->getAttribute('style').'>'.$this->getAttribute('label').$this->getAttribute('html_required').'
                    <textarea name="'.$this->getAttribute('name').'" id="'.$this->getAttribute('id').'" cols="20" rows="5">'.$this->getAttribute('value').'</textarea>
                </label>'."\n";
}

private function radio(){

    if(!$this->arOptions || !count($this->arOptions)) return false;     // if not any option

    $strInput = '   <div class="radio_input"><p>'.$this->getAttribute('html_label').$this->getAttribute('html_required').'</p>'."\n";

    foreach($this->arOptions as $Option):

        $checked = $this->getAttribute('value') && $this->getAttribute('value') == $Option['value'] ? true : false;
        $optLabel = $Option['label'] && strlen($this->Form->Translations->getTranslations($Option['label']))    
            ? $this->Form->Translations->getTranslations($Option['label'])   // <-- HERE I WOULD LIKE TO ACCESS THE Translations INSTANCE IN FORM
            : '';
        if($checked == true):
            $strInput .= '  
                            <label class="button label_checked">
                                <input type="radio" name="'.$this->getAttribute('name').'" id="'.$Option['id'].$lgSuff.'" value="'.$Option['value'].'" checked>
                                '.$optLabel.'
                            </label>'."\n";
        else:
            $strInput .= '  
                            <label class="button">
                                <input type="radio" name="'.$this->getAttribute('name').'" id="'.$Option['id'].$lgSuff.'" value="'.$Option['value'].'">
                                '.$optLabel.'
                            </label>'."\n";             
        endif;

    endforeach;

    $strInput .= '  </div>'."\n";
    return $strInput;

}

private function img(){

    $strFileName = $this->getAttribute('value') !== false && strlen($this->getAttribute('value')) > 0 
        // ***** I would like to access the Form upload_dir and id
        ? '<p class="filename"><img src="/file_upload/'.$this->Form->upload_dir.'/'.$this->Form->_ID.'/S_'.$this->getAttribute('value').'"> - 
            <label class="clear_file"><input type="checkbox" name="remove_'.$this->getAttribute('name').'" id="remove_'.$this->getAttribute('id').'">'.$this->Form->Translations->getTranslations('cancella_file').'</label></p>' 
        : '';
    $strInput = '   <div class="input_file">'."\n";
    $strInput .=        $strFileName;
    $strInput .=        '<label class="file_label">'.$this->getAttribute('html_label').$this->getAttribute('html_required').'<br>
                        <input type="file" name="'.$this->getAttribute('name').'" id="'.$this->getAttribute('id').'">
                    </label>'."\n";
    $strInput .= '  </div>'."\n";
    return $strInput;

}

private function file(){

    $strFileName = $this->getAttribute('value') !== false && strlen($this->getAttribute('value'))
                ? '<p class="filename">['.$this->getAttribute('value').'] - <label class="clear_file"><input type="checkbox" name="remove_'.$this->getAttribute('name').'" id="remove_'.$this->getAttribute('id').'">'.
                    $this->Form->Translations->getTranslations('cancella_file').'</label></p>' 
                : '';
    $strInput = '   <div class="input_file">'."\n";
    $strInput .=        $strFileName;
    $strInput .=        '<label class="file_label">'.$this->getAttribute('html_label').$this->getAttribute('html_required').'<br>
                            <input type="file" name="'.$this->getAttribute('name').'" id="'.$this->getAttribute('id').'">
                    </label>'."\n";
    if($this->getAttribute('caption') !== false):

        /************************************************************/
        // BIG ISSUE: CREATE INPUT INSIDE ANOTHER
        // I need to access Form values
        $v = !empty($this->Form->arValues[$this->getAttribute('name').'_caption']) ? $this->Form->arValues[$this->getAttribute('name').'_caption'] : '';

        $caption = new Input();
        $caption->setAttribute('type', 'text');
        $caption->setAttribute('name', (string)$this->getAttribute('name').'_caption');
        $caption->setAttribute('id', (string)$this->getAttribute('id').'_caption');
        $caption->setAttribute('label', $this->Form->Translations->getTranslations((string)$this->getAttribute('caption')));
        $strInput .= $caption->htmlIt();

    endif;
    $strInput .= '  </div>'."\n";
    return $strInput;

} 
```

}

AND XML

```
<?xml version="1.0" encoding="utf-8"?>
    <form tab_name="news" upload_dir="news" enctype="multipart/form-data" action="actionfile.php">

<input type="text"      label="title"           name="title"></input>
<input type="textarea"  label="description"     name="description"></input>
<input type="img"       label="img_1"           name="img_1" prefix="S_,M_" width="300,500" height="300,0" crop_image="Y,N"></input>

    </form> 
```

# c# - 如何为地址结构生成唯一标识符？

> ID：15862032
> 
> 赞同：1
> 
> 时间：2013-04-07T11:51:39.357
> 
> 标签：c#, algorithm, hash, perfect-hash

我有一个描述地址的结构，它看起来像：

```
class Address
{
    public string AddressLine1 { get; set; }
    public string AddressLine2 { get; set; }
    public string City { get; set; }
    public string Zip { get; set; }
    public string Country { get; set; }
} 
```

我正在寻找一种方法来为这个结构创建一个**唯一**标识符（我假设它也应该属于 类型`string`），这取决于所有结构属性（例如，更改`AddressLine1`也会导致结构标识符的更改）。

我知道，我可以将所有属性连接在一起，但这会给出太长的标识符。我正在寻找比这短得多的东西。

我还假设不同地址的数量不应该超过100M。

关于如何生成此标识符的任何想法？

提前致谢。

史前史：

数据库中有几个不同的表，其中包含一些信息+地址数据。数据以类似于上述格式的格式存储。

不幸的是，现在将地址数据移动到单独的表中非常昂贵，但我希望将来会这样做。

我需要将一些附加属性与地址数据相关联，并为此创建一个单独的表。这就是为什么我需要唯一标识地址数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T12:18:38.707

将所有字段序列化为一个大的二进制值。例如，使用具有适当域分隔的连接。

然后使用足够长度的加密散列对该值进行散列。我更喜欢 256 位，但 128 位可能没问题。具有良好哈希的冲突极为罕见，对于像 SHA-256 这样的 256 位哈希，它们几乎是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T13:01:31.523

这是一个使用序列化、sha256 散列和 base64 编码的完整示例（基于 CodesInChaos 答案）：

```
using System;
using System.IO;
using System.Security.Cryptography;
using System.Runtime.Serialization.Formatters.Binary;

namespace Uniq
{
    [Serializable]
    class Address
    {
        public string AddressLine1 { get; set; }
        public string AddressLine2 { get; set; }
        public string City { get; set; }
        public string Zip { get; set; }
        public string Country { get; set; }
    } 
    class MainClass
    {
        public static void Main (string[] args)
        {
            Address address1 = new Address(){AddressLine1 = "a1"};
            Address address2 = new Address(){AddressLine1 = "a1"};
            Address address3 = new Address(){AddressLine1 = "a2"};
            string unique1 = GetUniqueIdentifier(address1);
            string unique2 = GetUniqueIdentifier(address2);
            string unique3 = GetUniqueIdentifier(address3);
            Console.WriteLine(unique1);
            Console.WriteLine(unique2);
            Console.WriteLine(unique3);
        }
        public static string GetUniqueIdentifier(object obj){
            if (obj == null) return "0";
            SHA256 mySHA256 = SHA256Managed.Create ();
            BinaryFormatter formatter = new BinaryFormatter ();
            MemoryStream stream = new MemoryStream();
            formatter.Serialize(stream, obj);
            byte[] hash = mySHA256.ComputeHash(stream.GetArray());
            string uniqId = Convert.ToBase64String(hash);
            return uniqId;
        }
    }
} 
```

编辑：这是一个不使用`BinaryFormatter`. 您可以将空表示和字段分隔符替换为适合您需要的任何内容。

```
public static string GetUniqueIdentifier(object obj){
    if (obj == null) return "0";
    SHA256 mySHA256 = SHA256Managed.Create ();
    StringBuilder stringRep = new StringBuilder();
    obj.GetType().GetProperties()
                .ToList().ForEach(p=>stringRep.Append(
            p.GetValue(obj, null) ?? '¨'
            ).Append('^'));
    Console.WriteLine(stringRep);
    Console.WriteLine(stringRep.Length);
    byte[] hash = mySHA256.ComputeHash(Encoding.Unicode.GetBytes(stringRep.ToString()));
    string uniqId = Convert.ToBase64String(hash);
    return uniqId;
} 
```

# python - 数据框中最后一个元素的访问索引

> ID：15862034
> 
> 赞同：98
> 
> 时间：2013-04-07T11:51:50.360
> 
> 标签：python, pandas

我一直在寻找这个，但我似乎找不到它（尽管它必须非常微不足道）。

我遇到的问题是我想为数据框的第一个和最后一个条目检索列的值。但如果我这样做：

```
df.ix[0]['date'] 
```

我得到：

```
datetime.datetime(2011, 1, 10, 16, 0) 
```

但如果我这样做：

```
df[-1:]['date'] 
```

我得到：

```
myIndex
13         2011-12-20 16:00:00
Name: mydate 
```

具有不同的格式。理想情况下，我希望能够访问数据框的最后一个索引的值，但我找不到方法。

我什至尝试使用索引值创建一个列（IndexCopy）并尝试：

```
df.ix[df.tail(1)['IndexCopy']]['mydate'] 
```

但这也会产生不同的格式（因为 df.tail(1)['IndexCopy'] 不输出简单的整数）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：159
> 
> 时间：2013-04-07T13:40:31.360

以前的答案现在被取代[`.iloc`](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.iloc.html)：

```
>>> df = pd.DataFrame({"date": range(10, 64, 8)})
>>> df.index += 17
>>> df
    date
17    10
18    18
19    26
20    34
21    42
22    50
23    58
>>> df["date"].iloc[0]
10
>>> df["date"].iloc[-1]
58 
```

* * *

我能想到的最短方法使用`.iget()`：

```
>>> df = pd.DataFrame({"date": range(10, 64, 8)})
>>> df.index += 17
>>> df
    date
17    10
18    18
19    26
20    34
21    42
22    50
23    58
>>> df['date'].iget(0)
10
>>> df['date'].iget(-1)
58 
```

或者：

```
>>> df['date'][df.index[0]]
10
>>> df['date'][df.index[-1]]
58 
```

还有`.first_valid_index()`and `.last_valid_index()`，但取决于您是否要排除`NaN`s 它们可能不是您想要的。

请记住，`df.ix[0]`这不会给您第一个，而是由 0 索引的那个。例如，在上述情况下，`df.ix[0]`会产生

```
>>> df.ix[0]
Traceback (most recent call last):
  File "<ipython-input-489-494245247e87>", line 1, in <module>
    df.ix[0]
[...]
KeyError: 0 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2018-01-03T22:05:42.850

将 @comte 的答案和 dmdip 的答案结合在[Get index of a pandas dataframe of a row as an integer 中](https://stackoverflow.com/questions/41217310/get-index-of-a-row-of-a-pandas-dataframe-as-an-integer/42853445#42853445)

```
df.tail(1).index.item() 
```

为您提供索引的值。

* * *

请注意，索引**并不**总是定义良好，无论它们是多索引还是单索引。使用索引修改数据框可能会导致意外行为。我们将有一个多索引案例的示例，但*请注意，这在单索引案例中也是如此*。

说我们有

```
df = pd.DataFrame({'x':[1,1,3,3], 'y':[3,3,5,5]}, index=[11,11,12,12]).stack()

11  x    1
    y    3
    x    1
    y    3
12  x    3
    y    5              # the index is (12, 'y')
    x    3
    y    5              # the index is also (12, 'y')

df.tail(1).index.item() # gives (12, 'y') 
```

尝试使用索引访问最后一个元素会`df[12, "y"]`产生

```
(12, y)    5
(12, y)    5
dtype: int64 
```

如果您尝试根据 index 修改数据框`(12, y)`，您将修改两行而不是一行。因此，即使我们学会了访问最后一行索引的值，**如果您想根据其索引更改最后一行的值，这可能不是一个好主意，**因为可能有许多共享相同的索引。不过，在这种情况下，您应该使用`df.iloc[-1]`访问最后一行。

**参考**

[https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Index.item.html](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Index.item.html)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-05-12T08:39:42.983

```
df.tail(1).index 
```

似乎最易读

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-09-20T10:16:44.207

现在可能为时已晚，我使用`index`方法检索 DataFrame 的最后一个索引，然后使用`[-1]`获取最后一个值：

例如，

```
df = pd.DataFrame(np.zeros((4, 1)), columns=['A'])
print(f'df:\n{df}\n')

print(f'Index = {df.index}\n')
print(f'Last index = {df.index[-1]}') 
```

输出是

```
df:
     A
0  0.0
1  0.0
2  0.0
3  0.0

Index = RangeIndex(start=0, stop=4, step=1)

Last index = 3 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-03-13T13:59:59.277

您想要带有双括号的 .iloc 。

```
import pandas as pd
df = pd.DataFrame({"date": range(10, 64, 8), "not_date": "fools"})
df.index += 17
df.iloc[[0,-1]][['date']] 
```

你给 .iloc 一个索引列表——特别是第一个和最后一个，[0，-1]。这将返回一个数据框，您从中请求“日期”列。['date'] 会给你一个系列（*yuck*），并且 [['date']] 会给你一个数据框。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-09-19T13:28:33.950

Pandas 支持 NumPy 语法，它允许：

```
df[len(df) -1:].index[0] 
```

# ios - 如何播放不会停止 iTunes 或其他音乐播放器的声音警报或音效？

> ID：15862039
> 
> 赞同：1
> 
> 时间：2013-04-07T11:52:19.620
> 
> 标签：ios, audio, alarm

我正在开发一个运动计时器应用程序，它应该在几秒钟后播放警报。到目前为止一切正常，但它停止了所有音乐播放器。我使用了 AVAudioPlayer 类来播放声音。有没有其他方法可以播放闹钟？

谢谢丹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T16:39:13.337

您需要查看音频会话[类别](http://developer.apple.com/library/ios/documentation/AVFoundation/Reference/AVAudioSession_ClassReference/Reference/Reference.html#//apple_ref/doc/constant_group/Audio_Session_Categories)。默认类别`AVAudioSessionCategorySoloAmbient`禁用其他音频，但`AVAudioSessionCategoryAmbient`应保留其他音频播放。如果使用 AVAudioSession，你可以试试这个：

```
[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryAmbient error:nil]; 
```

您应该仍然可以使用 AVAudioPlayer。

# ruby-on-rails - 每个关键字最多 30 字节 UTF-8 编码

> ID：15862047
> 
> 赞同：0
> 
> 时间：2013-04-07T11:53:17.667
> 
> 标签：ruby-on-rails, ruby, regex, ruby-on-rails-3, ruby-on-rails-3.2

```
validates_format_of :tags, :with => /^(([^,]+),){0,3}([^,]+)$/ 
```

有了这个验证可能这个正则表达式：

```
key1, key2, key3, key4 
```

但是我想将每个关键字的字节数限制为最大`30`，所以这个关键字在正则表达式中是可能的：

```
keyword with More than 30 bytes 
```

这是规格链接：

[https://developers.google.com/youtube/2.0/reference#youtube_data_api_tag_media:keywords](https://developers.google.com/youtube/2.0/reference#youtube_data_api_tag_media:keywords)

**如何将此过滤器添加到上述正则表达式中？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T11:58:42.153

我没有检查它，但它应该可以工作：

```
validate :length_of_tags

def length_of_tags
  _tags = self.tags.split(',').map {|x| x.strip.force_encoding('utf-8')}
  _tags.each do |tag|
    if tag.bytesize >= 30
      errors.add(:tags, "#{tag} is too long")
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T12:13:03.307

（回答问题，但不遵守 YouTube 规范）

这个怎么样：

```
validates_format_of :tags, :with => /^(([^,]{1,30}),){0,3}([^,]{1,30})$/ 
```

# android - 获取弹窗的度量

> ID：15862052
> 
> 赞同：18
> 
> 时间：2013-04-07T11:53:38.647
> 
> 标签：android, popupwindow, measurement

我已经设置了弹出窗口，但我想将它置于按钮（视图 v）下方，需要单击它才能打开它：

```
public void showPopup(Context c, View v){
    int[] location = new int[2];
    v.getLocationOnScreen(location);

    ViewGroup base = (ViewGroup) getView().findViewById(R.id.pup_pattern);  
    LayoutInflater inflater = (LayoutInflater) c.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View pupLayout = inflater.inflate(R.layout.linearlayout_popup, base);

    final PopupWindow pup = new PopupWindow(pupLayout, android.view.ViewGroup.LayoutParams.WRAP_CONTENT, android.view.ViewGroup.LayoutParams.WRAP_CONTENT);

    int x = location[0] - (int) ((pupLayout.getWidth() - v.getWidth()) / 2 ); // --> pupLayout.getWidth() gives back -2?
    int y = location[1] + v.getHeight() + 10;

    pup.setFocusable(true);
    pup.showAtLocation(v, Gravity.NO_GRAVITY, x, y);
} 
```

有人想采取措施吗？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-04-07T12:18:21.133

您不会获得尚未在屏幕上绘制的视图的高度或宽度。

`pupLayout.getWidth()`// 这会给你 0

你需要得到这样的宽度

```
int width = MeasureSpec.makeMeasureSpec(0, MeasureSpec. UNSPECIFIED); 
```

像这样使用它

```
View pupLayout = inflater.inflate(R.layout.linearlayout_popup, base);
pupLayout.measure(MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED), 
            MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED));

int x = location[0] - (int) ((pupLayout.getMeasuredWidth() - v.getWidth()) / 2 ); 
```

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2019-01-20T13:16:33.670

其他方式：

```
/**
 * @return Point object which:<br>
 * point.x : contains width<br>
 * point.y : contains height
 */
public static Point getViewSize(View view) {
    Point size = new Point();
    view.post(new Runnable() {
        @Override
        public void run() {
            size.set(view.getMeasuredWidth(), view.getMeasuredHeight());
        }
    });
    return size;
} 
```

# c# - how to Hide and Show a table of html Template using C#?

> ID：15862057
> 
> 赞同：1
> 
> 时间：2013-04-07T11:54:17.310
> 
> 标签：c#, asp.net, html, templates, visibility

I am using html template for Email and i want to hide its one table at some condition by code behind, how can i do it, please suggest me. I am wondering how can i do it, i am not able to find any way, please suggest me any way to come out from this, thanks in advance. My code is :

```
if (File.Exists(appPath + "\\rptBookDetails.Template"))
        {
            FinalOutPut = File.ReadAllText(appPath + "\\rptBookDetails.Template");

            FinalOutPut = FinalOutPut.Replace("{AccessionNo}", dsBookDetails.Tables[0].Rows[0]["AccessionNo"].ToString());
            FinalOutPut = FinalOutPut.Replace("{Title}", dsBookDetails.Tables[0].Rows[0]["TITLE"].ToString());
            FinalOutPut = FinalOutPut.Replace("{Edition}", dsBookDetails.Tables[0].Rows[0]["EDITION"].ToString());
            FinalOutPut = FinalOutPut.Replace("{Volume}", dsBookDetails.Tables[0].Rows[0]["Volume"].ToString());
            FinalOutPut = FinalOutPut.Replace("{Authors}", dsBookDetails.Tables[0].Rows[0]["Authors"].ToString());
            FinalOutPut = FinalOutPut.Replace("{Pages}", dsBookDetails.Tables[0].Rows[0]["PAGES"].ToString());
            FinalOutPut = FinalOutPut.Replace("{Publication}", dsBookDetails.Tables[0].Rows[0]["PUB_PLACE"].ToString());
            FinalOutPut = FinalOutPut.Replace("{PublicationYear}", dsBookDetails.Tables[0].Rows[0]["YEAR_O_PUB"].ToString());
            FinalOutPut = FinalOutPut.Replace("{Price}", dsBookDetails.Tables[0].Rows[0]["COST"].ToString());
            FinalOutPut = FinalOutPut.Replace("{Supplier}", dsBookDetails.Tables[0].Rows[0]["AccessionNo"].ToString());
            FinalOutPut = FinalOutPut.Replace("{BillNo}", dsBookDetails.Tables[0].Rows[0]["BILL_NO"].ToString());
            FinalOutPut = FinalOutPut.Replace("{BillDate}", dsBookDetails.Tables[0].Rows[0]["DT_O_BILL"].ToString());
            FinalOutPut = FinalOutPut.Replace("{Grant Source}", dsBookDetails.Tables[0].Rows[0]["GRANT_SR"].ToString());

        } 
```

What i want to do is, in case i dont have books detail in database then i dont want to show the table in HTML out put. please help me

```
<table width="84%" border="1" align="center" cellpadding="0" cellspacing="0">
            <tr>
                <td width="30%" align="left" valign="top">
                    Accession No.
                </td>
                <td width="2%">
                    :
                </td>
                <td width="68%" align="left" valign="top">
                    B10
                </td>
            </tr>
            <tr>
                <td align="left" valign="top">
                    Title
                </td>
                <td>
                    :
                </td>
                <td align="left" valign="top">
                    {Title}
                </td>
            </tr>
            <tr>
                <td align="left" valign="top">
                    Edition
                </td>
                <td>
                    :
                </td>
                <td align="left" valign="top">
                    {Edition}
                </td>
            </tr>
        <tr>
            <td align="left" valign="top">
                    Volume
                </td>
                <td>
                    :
                </td>
                <td align="left" valign="top">
                    {Volume}
                </td>
            </tr>
            <tr>
                <td align="left" valign="top">
                    Authors
                </td>
                <td>
                    :
                </td>
                <td align="left" valign="top">
                    {Authors}
                </td>
            </tr>
            <tr>
                <td align="left" valign="top">
                    Pages
                </td>
                <td>
                    :
                </td>
                <td align="left" valign="top">
                    {Pages}
                </td>
            </tr>
            <tr>
                <td align="left" valign="top">
                    &nbsp;
                </td>
                <td>
                    &nbsp;
                </td>
                <td align="left" valign="top">
                    &nbsp;
                </td>
            </tr>
            <tr>
                <td align="left" valign="top">
                    Publication Place
                </td>
                <td>
                    :
                </td>
                <td align="left" valign="top">
                    {Publication}
                </td>
            </tr>
            <tr>
                <td align="left" valign="top">
                    Publication Year
                </td>
                <td>
                    :
                </td>
                <td align="left" valign="top">
                    {PublicationYear}
                </td>
            </tr>
            <tr>
                <td align="left" valign="top">
                    &nbsp;
                </td>
                <td>
                    &nbsp;
                </td>
                <td align="left" valign="top">
                    &nbsp;
                </td>
            </tr>
            <tr>
                <td align="left" valign="top">
                    Price
                </td>
                <td>
                    :
                </td>
                <td align="left" valign="top">
                    {Price}
                </td>
            </tr>
            <tr>
                <td align="left" valign="top">
                    Source of Purchase
                </td>
                <td>
                    :
                </td>
                <td align="left" valign="top">
                    {Supplier}
                </td>
            </tr>
            <tr>
                <td align="left" valign="top">
                    Bill No.
                </td>
                <td>
                    :
                </td>
                <td align="left" valign="top">
                    {BillNo}
                </td>
            </tr>
            <tr>
                <td align="left" valign="top">
                    Bill Date
                </td>
                <td>
                    :
                </td>
                <td align="left" valign="top">
                    {BillDate}
                </td>
            </tr>
            <tr>
                <td align="left" valign="top">
                    Grant Source
                </td>
                <td>
                    :
                </td>
                <td align="left" valign="top">
                    {Grant Source}
                </td>
            </tr>
    </table>

<table width="97%" id="tblHistry" border="1" align="center" cellpadding="2" cellspacing="0">
            <tr>
                <th>
                    Sr
                </th>
                <th>
                    Trans. Id
                </th>
                <th>
                    Borrower Id
                </th>
                <th>
                    Issue Date
                </th>
                <th>
                    Expected Return Date
                </th>
                <th>
                    Actual Return Date
                </th>
                <th>
                    Fine
                </th>
                <th>
                    Fine Status
                </th>
                <th>
                    Issue Remarks
                </th>
                <th>
                    Return Remarks
                </th>
            </tr>
            {HistoryTable}
        </table> 
```

I want to Hide and Show tblHistry on condition, please help me.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T07:44:09.483

使用asp面板控件并将您的表格放在该面板内......现在在特定事件代码中的文件后面的代码中

```
Panelname.visible=true; 
```

或者

```
Panelname.visible=false; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T08:18:29.983

考虑到您的表是动态创建的并存储在字符串中而不是控件。

有两种方法可以满足您的需求；

**方式一**

修改模板并在要隐藏/显示的表格中包含另一个要替换的标签**style="{CSSStyle}" 。**

```
<table width="97%" id="tblHistry" style="{CSSStyle}" border="1" align="center" cellpadding="2" cellspacing="0"> 
```

在后面的代码中执行以下操作以显示表格；

```
 FinalOutPut = FinalOutPut.Replace("{CSSStyle}", ""); 
```

而在下面隐藏它；

```
 FinalOutPut = FinalOutPut.Replace("{CSSStyle}", "display:none"); 
```

**方式二**

在 2 个自定义标签中关闭 tblHitry 表，如下所示；

```
[HistoryTable]
   <table width="97%" id="tblHistry" cellpadding="2" cellspacing="0">
     ....
   </table>
[/HistoryTable] 
```

在代码后面的代码中，使用下面的代码隐藏和显示表格；

```
string strHistoryTableOpeningTag = "[HistoryTable]";
string strHistoryTableClosingTag = "[/HistoryTable]";
int intStartPos = 0;
int intEndPos = 0;

if (blnWantToHide == True) {
  //Remove history table
  intStartPos = FinalOutPut.IndexOf(strHistoryTableOpeningTag);
  intEndPos = FinalOutPut.IndexOf(strHistoryTableClosingTag) + strHistoryTableClosingTag.Length;

 FinalOutPut = FinalOutPut.Remove(intStartPos, intEndPos - intStartPos);
} else {
  //Remove unwanted tags
  FinalOutPut = FinalOutPut.Replace(strHistoryTableOpeningTag, "");
  FinalOutPut = FinalOutPut.Replace(strHistoryTableClosingTag, "");
} 
```

就我个人而言，我会选择方式 2，因为它更整洁，而且您不会有不需要的隐藏 HTML。

# android - How to wake up android and show the activity?

> ID：15862058
> 
> 赞同：5
> 
> 时间：2013-04-07T11:54:19.527
> 
> 标签：android, broadcastreceiver, wakelock, wakeup

Please, help me. I have a broadcast reciever:

```
public class BrcRec extends BroadcastReceiver{
public static WakeLock wakeLock;
@Override
public void onReceive(Context context, Intent intent) {

    PowerManager pm = (PowerManager) context.getSystemService(Context.POWER_SERVICE);
    wakeLock = pm.newWakeLock((PowerManager.SCREEN_BRIGHT_WAKE_LOCK | PowerManager.FULL_WAKE_LOCK | PowerManager.ACQUIRE_CAUSES_WAKEUP), "TAG");
    wakeLock.acquire();
    //Осуществляем блокировку
    KeyguardManager keyguardManager = (KeyguardManager) context.getSystemService(Context.KEYGUARD_SERVICE); 
    KeyguardLock keyguardLock =  keyguardManager.newKeyguardLock("TAG");
    keyguardLock.disableKeyguard();

    //Здесь можно делать обработку.
    Bundle extras = intent.getExtras();
    StringBuilder msgStr = new StringBuilder();

    msgStr.append("Одноразовый будильник: ");
    Format formatter = new SimpleDateFormat("hh:mm:ss a");
    msgStr.append(formatter.format(new Date()));
    // Creating activity must be there, i think
    Toast.makeText(context, msgStr, Toast.LENGTH_LONG).show();
    //Разблокируем поток.
    wakeLock.release();
} 
```

And then it is in work, my android do not wake up: button blink one time and that is all. Where is a mistake?

I want to wake up android and call some activity in result.. Thank you.

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-18T06:52:19.253

在您要显示的活动中，您可以添加这些标志：

```
getWindow().addFlags(WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD |
                WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED |
                WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON |
                WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON); 
```

这将导致 Activity 唤醒设备。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-03T13:45:09.513

值得注意的是，“joelreeves”所写的内容即使不使用 PowerManager 和 Wakelock API 也能正常工作。只需在活动的 onCreate 上添加标志，无论何时启动，它都会从手机中完全删除 Keyguard 和 Lock。

# ios - 使用 [self presentModalViewController: animated:] 和黑屏

> ID：15862062
> 
> 赞同：1
> 
> 时间：2013-04-07T11:54:27.717
> 
> 标签：ios, objective-c, uitableview, uiscrollview, presentmodalviewcontroller

我创建了一个程序，它在 tableview 中显示来自 url 的书列表（任何书都有很多图像）我想什么时候单击任何单元格进入下一页（下一页是显示图像的 UIScroll）并显示那本书的图像我有一个问题是何时单击任何单元格以及何时转到下一页显示黑屏而不是 UIScrollView 包含许多图像。

这是我的代码： **RecipeViewController.h**

```
#import "RecipeViewController.h"

@interface RecipeViewController : UITableViewController<UITableViewDataSource,UITableViewDelegate>
@property (nonatomic,strong) IBOutlet UITableView *table;
@end 
```

**食谱视图控制器.m**

```
#import "RecipeViewController.h"
#import "Recipe.h"
#import "DetailViewController.h"

@implementation RecipeViewController
{
    NSMutableArray *recipes;
    NSInteger num;
}
@synthesize table;

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.navigationItem.title = @"Recipe Book";
    UIBarButtonItem *backButton = [[UIBarButtonItem alloc] initWithTitle:@"Back" style:UIBarButtonItemStyleBordered target:nil action:nil];
    [[self navigationItem] setBackBarButtonItem:backButton];

    NSString *numberbook = [[NSString alloc]initWithContentsOfURL:[NSURL URLWithString:@"http://192.168.1.100/mamal/book.php?all"]];

    NSInteger numbook = [numberbook integerValue];
    for (int i = 1; i <= numbook; i++)
    {
        Recipe *si = [Recipe new];
        //NSLog(@"%d,%@",i,si);

        NSString *c = [[NSString alloc]initWithContentsOfURL:[NSURL URLWithString:[NSString stringWithFormat:@"http://192.168.1.100/mamal/book.php?info=1&b=%d",i]]];        
        NSData *data = [[NSData alloc]initWithContentsOfURL:[NSURL URLWithString:[NSString stringWithFormat:@"http://192.168.1.100/mamal/book.php?p=1&b=%d",i]]];
        si.name = [NSString stringWithString:c];
        si.imageFile = data;

        if(!recipes){
            recipes = [NSMutableArray array];
        }
        [recipes addObject:si];
    }
    num = numbook;

    // Remove table cell separator
    [self.tableView setSeparatorStyle:UITableViewCellSeparatorStyleNone];

    // Assign our own backgroud for the view
    self.parentViewController.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"common_bg"]];
    self.tableView.backgroundColor = [UIColor clearColor];

    // Add padding to the top of the table view
    UIEdgeInsets inset = UIEdgeInsetsMake(5, 0, 0, 0);
    self.tableView.contentInset = inset;

}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    return recipes.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    // Display recipe in the table cell
    Recipe *recipe = [recipes objectAtIndex:indexPath.row];
    UIImageView *recipeImageView = (UIImageView *)[cell viewWithTag:100];
    recipeImageView.image = [UIImage imageWithData:recipe.imageFile];

    UILabel *recipeNameLabel = (UILabel *)[cell viewWithTag:101];
    recipeNameLabel.text = recipe.name;

    return cell;
}
#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    DetailViewController *obj = [[DetailViewController alloc]init];
    int x = (indexPath.row)+1;
    NSLog(@"x : %d",x);
    obj.yourValue = [NSString stringWithFormat:@"%d",(indexPath.row)+1];
    NSLog(@"yourValue1 : %@",obj.yourValue);
    obj.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
    [self presentModalViewController:obj animated:YES];
}
@end 
```

**DetailViewController.h**

```
#import <UIKit/UIKit.h>
#import "Recipe.h"
#import "RecipeViewController.h"

@interface DetailViewController : UIViewController<UIScrollViewDelegate>
{
    UIScrollView *scroller;
}
@property (nonatomic,strong) IBOutlet UIScrollView *scroller;
@property (nonatomic,strong) Recipe *rec;
@property (nonatomic,strong) NSString *yourValue;
@end 
```

**细节视图控制器.m**

```
#import "DetailViewController.h"

@implementation DetailViewController
@synthesize scroller,yourValue;

- (void)viewDidLoad
{
    [super viewDidLoad];
    int m1 = [self.yourValue integerValue];
   NSLog(@"M1 : %d",m1);

    NSString *bookID = [[NSString alloc]initWithContentsOfURL:[NSURL URLWithString:[NSString stringWithFormat:@"http://192.168.1.100/mamal/book.php?info=0&b=%d",m1]]];

    NSInteger num1 = [bookID integerValue]; 
    NSLog(@"%d",num1);
    for (int i = 1; i <= num1; i++)
    {
        NSString *s = [NSString stringWithFormat:@"http://192.168.1.100/mamal/book.php?p=%d&b=%d",i,m1];
        NSData *dat = [[NSData alloc]initWithContentsOfURL:[NSURL URLWithString:s]];
        NSLog(@"%@",s);
        UIImageView *imagen = [[UIImageView alloc] initWithImage:[UIImage imageWithData:dat]];
        imagen.frame = CGRectMake((i-1)*320, 0, 320, 460);
        [scroller addSubview:imagen];
    }
    scroller.delegate = self;
    scroller.contentSize = CGSizeMake(320*num1, 460);
    scroller.pagingEnabled = YES;  
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-28T11:09:06.723

我刚刚解决了这个问题，如果你使用 StoryBoard，你必须以这种方式初始化视图控制器：

```
UIStoryboard *storybrd = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];

                storybrd = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
                YourViewController *newVC =[storybrd instantiateViewControllerWithIdentifier:@"YourVCId"]; 
```

您必须将您的标识符放在情节提要中，选择您要显示的视图，然后选择身份检查器，您可以选择编写您想要的 id。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T01:47:48.230

您需要调用： `[[DetailViewController alloc]initWithNibName:@"nibName" bundle:nil];`而不是`[[DetailViewController alloc]init];` 此时，它没有可膨胀的 Xib（除非您覆盖了 init 方法）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T04:49:58.017

您根本没有调用 DetailViewController 如何显示图像。在 didSelectRowAtIndexPath 中尝试此操作：可能会对您有所帮助

```
DetailViewController *DVC = [[DetailViewController alloc] initWithNibName:nil bundle:nil];
[self.navigationController pushViewController:DVC animated:YES]; 
```

# php - 完全完成 Magento 翻译

> ID：15862065
> 
> 赞同：1
> 
> 时间：2013-04-07T11:54:47.453
> 
> 标签：php, magento, magento-1.7

我正在尝试找出magento中的翻译。好的，所以我了解它是如何工作的，但问题就在这里。

例如，这是其中一个 PHTML 文件中源代码的一部分：

```
<p class="hello"><strong><?php echo $this->__('Hello, %s!', $this->htmlEscape($this->getCustomerName())) ?></strong></p> 
```

在这种情况下，我应该如何翻译“你好”这个词？页面上有大量这种类型的解析字符串，请不要告诉我我必须重新编写所有这些示例才能让翻译器正常工作？

还有其他方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T12:27:59.010

Magento 将翻译放置在`__()`函数中的文字字符串。意思是，如果你把它放在你的翻译文件中，它会翻译任何放置的东西`%s`：

`"Hello, %s!","Bonjour, %s!"`

至于实际翻译，您可以使用内联翻译（在 中找到`System > Configuration > Developer`）或调整您的主题自定义翻译文件。如果您启用了缓存，请不要忘记刷新 中的翻译缓存类型`System > Configuration > Cache Management`。

# python - 噪声数据中的梯度，python

> ID：15862066
> 
> 赞同：15
> 
> 时间：2013-04-07T11:54:53.357
> 
> 标签：python, gradient, smoothing

我有来自宇宙射线探测器的能谱。光谱遵循指数曲线，但其中会有很宽（并且可能非常轻微）的肿块。显然，数据包含噪声元素。

我试图平滑数据，然后绘制它的梯度。到目前为止，我一直在使用 scipy sline 函数对其进行平滑处理，然后使用 np.gradient()。

从图中可以看出，梯度函数的方法是寻找每个点之间的差异，并不能很清楚地显示肿块。

我基本上需要一个平滑的渐变图。任何帮助都会很棒！

我尝试了 2 种样条方法：

```
def smooth_data(y,x,factor):
    print "smoothing data by interpolation..."
    xnew=np.linspace(min(x),max(x),factor*len(x))
    smoothy=spline(x,y,xnew)
    return smoothy,xnew

def smooth2_data(y,x,factor):
    xnew=np.linspace(min(x),max(x),factor*len(x))
    f=interpolate.UnivariateSpline(x,y)
    g=interpolate.interp1d(x,y)
    return g(xnew),xnew 
```

编辑：尝试数值微分：

```
def smooth_data(y,x,factor):
    print "smoothing data by interpolation..."
    xnew=np.linspace(min(x),max(x),factor*len(x))
    smoothy=spline(x,y,xnew)
    return smoothy,xnew

def minim(u,f,k):
    """"functional to be minimised to find optimum u. f is original, u is approx"""
    integral1=abs(np.gradient(u))
    part1=simps(integral1)
    part2=simps(u)
    integral2=abs(part2-f)**2.
    part3=simps(integral2)
    F=k*part1+part3
    return F

def fit(data_x,data_y,denoising,smooth_fac):
    smy,xnew=smooth_data(data_y,data_x,smooth_fac)
    y0,xnnew=smooth_data(smy,xnew,1./smooth_fac)
    y0=list(y0)
    data_y=list(data_y)
    data_fit=fmin(minim, y0, args=(data_y,denoising), maxiter=1000, maxfun=1000)
    return data_fit 
```

但是，它只是再次返回相同的图表！

![数据、平滑数据和梯度](https://i.stack.imgur.com/el7H9.png)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-07T12:15:39.463

对此发表了一种**有趣的方法：**[噪声数据的数值微分](https://www.researchgate.net/publication/255907171_Numerical_Differentiation_of_Noisy_Nonsmooth_Data)。它应该为您的问题提供一个很好的解决方案。更多详细信息在另[一篇随附的论文](https://www.researchgate.net/publication/254715789_A_Variational_Approach_to_Reconstructing_Images_Corrupted_by_Poisson_Noise)中给出。作者还给出[了实现它的Matlab代码](https://sites.google.com/site/dnartrahckcir/home/tvdiff-code)；也可以使用 Python 中的替代[实现。](https://github.com/stur86/tvregdiff)

如果你想**用样条**法进行插值，我建议调整 的平滑因子`s`。`scipy.interpolate.UnivariateSpline()`

另一种解决方案是通过**卷积**来平滑你的函数（比如使用高斯函数）。

我链接到的论文声称可以防止卷积方法产生的一些伪影（样条方法可能会遇到类似的困难）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-11-05T18:26:27.160

我不会保证这在数学上的有效性；看起来 EOL 引用的 LANL 的论文值得研究。无论如何，在使用`splev`.

```
%matplotlib inline
from matplotlib import pyplot as plt
import numpy as np
from scipy.interpolate import splrep, splev

x = np.arange(0,2,0.008)
data = np.polynomial.polynomial.polyval(x,[0,2,1,-2,-3,2.6,-0.4])
noise = np.random.normal(0,0.1,250)
noisy_data = data + noise

f = splrep(x,noisy_data,k=5,s=3)
#plt.plot(x, data, label="raw data")
#plt.plot(x, noise, label="noise")
plt.plot(x, noisy_data, label="noisy data")
plt.plot(x, splev(x,f), label="fitted")
plt.plot(x, splev(x,f,der=1)/10, label="1st derivative")
#plt.plot(x, splev(x,f,der=2)/100, label="2nd derivative")
plt.hlines(0,0,2)
plt.legend(loc=0)
plt.show() 
```

![matplotlib 输出](https://i.stack.imgur.com/yMd8d.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-08-30T10:05:11.337

您也可以使用[`scipy.signal.savgol_filter`](https://docs.scipy.org/doc/scipy-0.16.1/reference/generated/scipy.signal.savgol_filter.html).

# 结果

[![在此处输入图像描述](https://i.stack.imgur.com/HpE8B.png)](https://i.stack.imgur.com/HpE8B.png)

# 例子

```
import matplotlib.pyplot as plt
import numpy as np
import scipy
from random import random

# generate data
x = np.array(range(100))/10
y = np.sin(x) + np.array([random()*0.25 for _ in x])
dydx = scipy.signal.savgol_filter(y, window_length=11, polyorder=2, deriv=1)

# Plot result
plt.plot(x, y, label='Original signal')
plt.plot(x, dydx*10, label='1st Derivative')
plt.plot(x, np.cos(x), label='Expected 1st Derivative')
plt.legend()
plt.show() 
```

# c++ - 在分段错误之前缺少 cout

> ID：15862067
> 
> 赞同：5
> 
> 时间：2013-04-07T11:54:53.360
> 
> 标签：c++, gcc, netbeans, segmentation-fault, cout

我的代码中存在分段错误，因此我在可疑方法上放置了许多 cout 来定位位置。

```
bool WybierajacyRobot::ustalPoczatekSortowania(){
    cout << "ustal poczatek sortowania: " << poczatekSortowania << endl ;
    list< Pojemnik >::iterator tmp;
    cout << "LOL"; // <-- this cout doesn't print when segfault

    if (!poczatekSortowania){   // <- T1
        cout << "first task" ;
        tmp = polka.begin();
    }
    else{   // <-- T2
        cout << " second task " ;// <-- this cout doesn't print when segfault
        tmp = ostatnioUlozony;
        cout << " debug cout " ; // <-- this cout doesn't print when segfault
        ++tmp; // <-- segfault
    } ... 
```

如果该方法被调用并且没有从 T1 和之前打印的每个 cout 的段错误。在 ++tmp 行中是段错误，因为 ostatnioUlozony 为 NULL，当方法转到 T2 时，每个没有 first 的 cout 都没有打印。为什么？

我正在使用 Netbeans ang gcc，我在 Netbeans 中找到了带有调试功能的“segfault line”，但在我使用之前，我花了一些时间来添加 cout 线和运行程序。

非常感谢，

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-07T11:55:59.117

您需要使用`std::flush`or刷新输出流`std::endl`（这也将给出一个换行符），否则您不能保证看到输出：

```
cout << " second task " << std::flush; 
```

尽管如此，如果你增加一个单数迭代器（空指针就是），你有未定义的行为，所以这只*可能*有效。就 C++ 而言，您的程序可以改为发射核导弹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T10:20:12.353

另一种解决方案是使用 std::cerr 而不是 std::cout。它是无缓冲的，因此不需要刷新，并且使用 std::cerr 进行调试会更习惯一些。

# ios - 保存 UIImageView 的位置

> ID：15862068
> 
> 赞同：0
> 
> 时间：2013-04-07T11:55:11.170
> 
> 标签：ios, objective-c

我有几个 UIImageViews 用户可以拖动、缩放和旋转。当用户导航到另一个视图并返回时，我希望位置、大小和角度保持不变。我如何实现这一目标？

我使用以下代码平移、旋转和缩放

```
- (void)panPiece:(UIPanGestureRecognizer *)gestureRecognizer
{
UIView *piece = [gestureRecognizer view];

[self adjustAnchorPointForGestureRecognizer:gestureRecognizer];

if ([gestureRecognizer state] == UIGestureRecognizerStateBegan || [gestureRecognizer state] == UIGestureRecognizerStateChanged) {
    CGPoint translation = [gestureRecognizer translationInView:[piece superview]];

    [piece setCenter:CGPointMake([piece center].x + translation.x, [piece center].y + translation.y)];
    [gestureRecognizer setTranslation:CGPointZero inView:[piece superview]];
}
}

- (void)rotatePiece:(UIRotationGestureRecognizer *)gestureRecognizer
{
[self adjustAnchorPointForGestureRecognizer:gestureRecognizer];

if ([gestureRecognizer state] == UIGestureRecognizerStateBegan || [gestureRecognizer state] == UIGestureRecognizerStateChanged) {
    [gestureRecognizer view].transform = CGAffineTransformRotate([[gestureRecognizer view] transform], [gestureRecognizer rotation]);
    [gestureRecognizer setRotation:0];
}
}

- (void)scalePiece:(UIPinchGestureRecognizer *)gestureRecognizer
{
[self adjustAnchorPointForGestureRecognizer:gestureRecognizer];

if ([gestureRecognizer state] == UIGestureRecognizerStateBegan || [gestureRecognizer state] == UIGestureRecognizerStateChanged) {
    [gestureRecognizer view].transform = CGAffineTransformScale([[gestureRecognizer view] transform], [gestureRecognizer scale], [gestureRecognizer scale]);
    [gestureRecognizer setScale:1];
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T18:27:51.370

根据您的需要，您可以创建方法，将其作为另一个目标方法添加到所有手势识别器中。

例如

```
[panGestureRecognizer addTarget: self action: @selector(onGestureRecognizerEnd:)];
[rotationGestureRecognizer addTarget: self action: @selector(onGestureRecognizerEnd:)];
[pinchGestureRecognizer addTarget: self action: @selector(onGestureRecognizerEnd:)]; 
```

该方法的示例实现可能是：

```
- (void)onGestureRecognizerEnd: (UIGestureRecognizer *)gestureRecognizer
{
    switch ( gestureRecognizer.state )
    {
        case UIGestureRecognizerStateEnded:
        case UIGestureRecognizerStateCancelled:
        case UIGestureRecognizerStateFailed:
        {
            [self _saveViewPosition: gestureRecognizer.view];
            break;
        }
        default:
        {
            break;
        }
    }
} 
```

`_saveViewPosition:`您可以像这样实现的方法：

```
- (void)_saveViewPosition: (UIView *)view
{
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

    [defaults setObject: [NSKeyedArchiver archivedDataWithRootObject: [NSValue valueWithCGPoint: view.center]]
                 forKey: [self _centerKeyForView: view]];
    [defaults setObject: [NSKeyedArchiver archivedDataWithRootObject: [NSValue valueWithCGAffineTransform: view.transform]]
                 forKey: [self _transformKeyForView: view]];
} 
```

有关更多信息，请查看[Xcode 项目](https://dl.dropbox.com/u/930742/so/GesturesTest.zip)。

BR

# android - Cocos2dx bash 错误 build_native.sh

> ID：15862070
> 
> 赞同：3
> 
> 时间：2013-04-07T11:55:20.940
> 
> 标签：android, eclipse, cocos2d-x

您好，我是 cocos2dx 的新手。我在 Windows 7 / Eclipse 中配置 cocos2dx。我创建了一个正在运行的名为 helloworld 的项目，但是当我运行示例项目（helloCpp，testCpp）时出现错误：

```
bash /build_native.sh 
Cannot run program "bash": Launching failed
Error: Program "bash" not found in PATH 
```

我已经尝试过[Cocos2d-x android can't resolve coscos2dx library](https://stackoverflow.com/questions/12654078/cocos2d-x-android-cant-resolved-coscos2dx-library)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T17:23:18.910

相信我，我已经尝试在 Windows 机器上设置 cocos2dx 大约 2 周了，但我根本没有成功。我遇到了很多问题，还有编译 CPP 代码和构建路径问题的问题。切换到 MAC 更容易，最重要的是，使跨平台应用程序窗口没有任何意义，因为您无法在 Windows 机器上运行 iOS 模拟器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-16T08:13:30.310

设置环境变量（c:/cygwin/bin），问题就解决了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-12T05:21:26.757

所有环境变量设置正确。环境变量列表为：Android SDK 路径、Python 和 Apache Ant。然后尝试在命令提示符上运行 ./build_native.sh。参考链接：[这里](http://www.cocos2d-x.org/wiki/Android_with_Terminal_Installation_and_Setup)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-22T15:04:28.513

你需要一个正确的所有版本

Cocos2d-x 3.6 Apache ant python 2.7 Eclipse Java

```
1.Set Java and Apache Path in Global Environment 
2.Extract cocos2d-x 3.6 Download Version
3.Open the setup.py file
4\. add this all in Environment File 

COCOS_CONSOLE_ROOT = 'COCOS_CONSOLE_ROOT' => Here is your File where you are add
COCOS_X_ROOT = 'COCOS_X_ROOT' => you get this in Cocos2dx Folder
COCOS_TEMPLATES_ROOT = 'COCOS_TEMPLATES_ROOT'=> you get this in cocos2dx Folder
NDK_ROOT = 'NDK_ROOT' => Download NDK 9.2
ANDROID_SDK_ROOT = 'ANDROID_SDK_ROOT'=> your Eclipse root
ANT_ROOT = 'ANT_ROOT' => apache ant root`enter code here` 
```

首先在环境中添加正确然后运行CMD，干杯:)！

# c# - 如何使用 At 命令和 PDU-Submit Not with Text-Mode 发送多部分 unicode SMS？

> ID：15862072
> 
> 赞同：0
> 
> 时间：2013-04-07T11:55:25.847
> 
> 标签：c#, unicode, sms, gsm, at-command

在我的项目中，我想通过 PDU-Submit 发送一条 unicode text(UTF-8) SMS 消息。我一直在搜索很多答案，但所有答案都使用文本模式而不是 PDU-Submit 命令，因此我无法发送多部分短信。我想为多部分 unicode 消息提供解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T10:12:36.857

最后我找到了答案并使用它。我的程序运行良好。使用 PDU 发送 Unicode 格式的串联（多部分）短信与使用 AT+CMGS 命令发送简单的 septet-character SMS 相同，但您必须将 DCS 字节设置为 08。您可以在这些线程上获得更多信息：

[为串联的 Unicode SMS 添加 UDH](https://stackoverflow.com/questions/8114456/add-udh-for-concatenated-unicode-sms)

[http://en.wikipedia.org/wiki/Concatenated_SMS#PDU_Mode_SMS](http://en.wikipedia.org/wiki/Concatenated_SMS#PDU_Mode_SMS)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T15:53:32.570

`AT+CMGS`您可以在 PDU 模式下使用命令发送 SMS 消息（使用 启用`AT+CMGF=0`）。[语法](http://www.3gpp.org/ftp/Specs/html-info/27005.htm)（对于pdu 模式）是

```
AT+CMGS=<length><CR>
PDU is given<ctrl-Z/ESC> 
```

我不知道您是否应该自己拆分为多部分并单独发送每个部分，或者此命令是否为您执行此操作。我想也许是后者，命令的描述说

> 执行命令将消息从 TE 发送到网络（SMS-SUBMIT）。

如果/当您发现时，请随时更新此答案。

# c# - Partial view is not rendering properly

> ID：15862074
> 
> 赞同：2
> 
> 时间：2013-04-07T11:55:59.053
> 
> 标签：c#, ajax, asp.net-mvc-3, razor

I have two drop-downs when we are selecting the first one we need to update the second one.
Below is my view:

```
@model HostingManager.Models.ContractManager
@{
    ViewBag.Title = "CustomCreate"; 
}
@Html.Partial("_GroupDDL" , Model)
@Html.Partial("SelectClient", Model)
@Html.Partial("SelectContract", Model) 
```

Below is first Drop-down (Partial View: `_GroupDDL`)

```
@model HostingManager.Models.ContractManager

@using (Ajax.BeginForm("SelectClient", "Contracts", new AjaxOptions { UpdateTargetId = "IClients" }))
{ 
    @Html.DropDownListFor(
        m => m.SelectedGroupId,
        new SelectList(Model.IGroups, "id", "name"),
        string.Empty
    )
}
<script type="text/javascript">
    $('#SelectedGroupId').change(function () {
        $(this).parents('form').submit();
    });
</script> 
```

Below is Second Drop-down (Partial View: `SelectClient`)

```
@model HostingManager.Models.ContractManager

@if (Model.IClients != null && Model.IClients.Count() > 0)
{
    using (Ajax.BeginForm("SelectContracts", "Contracts", new AjaxOptions { UpdateTargetId = "IContracts" }))
    { 
        @Html.HiddenFor(m => m.SelectedGroupId)
        @Html.DropDownListFor(
            m => m.SelectedClientId,
            new SelectList(Model.IClients, "id", "cname"),
            string.Empty
        )
    }
}

<script type="text/javascript">
    $('#SelectedClientId').change(function () {
        $(this).parents('form').submit();
    });
</script> 
```

Below is my Controller action:

```
public ActionResult CustomCreate()
{
    ContractManager CM = new ContractManager();
    CM.IGroups = db.groups.ToList();
    return View(CM);
}

[HttpPost]
public ActionResult SelectClient(int? SelectedGroupId)
{
    ContractManager CM = new ContractManager();
    CM.IClients = new List();
    if (SelectedGroupId.HasValue)
    {
        CM.IClients = db.client.ToList();
    }
    return PartialView("SelectClient", CM);
} 
```

**Now The problem:**

In Debugging Mode when I'm selecting the first DDL. Control is coming to second DDL with the values but the Second DDL is not appearing on the View. i.e. We can't see the Second DDL on the UI.

I have already added ajax script in my Layout and also enabled in `web.config`. I'll filter the Second DDL the once if I can overcome this.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T12:35:31.093

[除了完美示例之外，您还可以使用jQuery.post](http://api.jquery.com/jQuery.post/)在 _GroupDDL 部分视图中执行以下操作：

```
<script type="text/javascript">
    $('#SelectedGroupId').change(function () {
        $.post('@Url.Action("SelectClient", "Contracts")', {SelectedGroupId: $(this).val()}, function(data) {
           $('#SelectedClientId').html(data);
        });
    });
</script> 
```

每次更改 SelectedGroupId ddl 时，它将调用 Controller 的 SelectClient 操作，它将返回 SelectedClientId 的 html，其中包含基于父/主 ddl 选择的所有选项。

# visual-studio-2010 - Build a UNIX make project in Windows

> ID：15862078
> 
> 赞同：0
> 
> 时间：2013-04-07T11:56:21.040
> 
> 标签：visual-studio-2010, makefile, gnu-make

I have a C project with a Makefile, I want to build it on windows. I downloaded [GNU Make](http://gnuwin32.sourceforge.net/packages/make.htm) installed. And I have VS2010\. The make file has UNIX commands like `cc`, `nvcc` and `g++`. I have to replace them with MS C, CUDA and C++ compilers right? What are the command line commands I have to replace them with? Is there anything I need to install? I want to do it without Cygwin (it's installation is taking forever), otherwise Cygwin is the fallback method.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T02:08:43.863

您实际上不必用 Windows 变体替换任何这些命令。一个工作的编译器仍然可以很好地编译源代码，即使它不是操作系统的事实上的编译器。

我在 Cygwin 上听到了你的声音——你可以使用[MinGW](http://sourceforge.net/projects/mingw/files/%20MinGW)安装一个 Minimal GNU 环境，这将为你提供使用**Unix** makefile 所需的一切。

# jquery - JQuery 动画到“高度：0px;” 仍在显示

> ID：15862079
> 
> 赞同：3
> 
> 时间：2013-04-07T11:56:27.880
> 
> 标签：jquery

我最近尝试实现我的下拉菜单，以便在单击我的按钮以从“高度：0px;”开始动画时工作 到“高度：260px;”，然而，在加载文档时，即使溢出设置为隐藏并且高度设置为 0px，div 也是可见的。

```
$('.DropBtn a').click(function() {
    if ($(this).attr("href") == "#Open") {
        $(this).attr("href", "#Close");
        $('#Font-Size .DropList').stop().animate({
            height: "260px",
        }, 400);
    } else if ($(this).attr("href") == "#Close") {
        $(this).attr("href", "#Open");
        $('#Font-Size .DropList').stop().animate({
            height: "0px",
        }, 400);
    }
}); 
```

[以上是我的脚本最近添加的内容，您可以在此处](http://jsfiddle.net/anw4B/)的 JSFiddle 上实时查看。

感谢您为解决我的问题提供的任何帮助，

最好的祝福，

蒂姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T12:02:23.163

将 设置`height`为 0 不会隐藏元素。它仍然有`margin`并且`padding`导致它被显示。试试这个：http: [//jsfiddle.net/anw4B/1/](http://jsfiddle.net/anw4B/1/)

```
else if ($(this).attr("href") == "#Close") {
        $(this).attr("href", "#Open");
        $('#Font-Size .DropList').stop().animate({
            height: "0px",
        }, 400, function() {$('#Font-Size .DropList').hide()});
    } 
```

我相信这比更改`margin`and the更好，`padding`因为它允许您经常使用 CSS。另请注意，小提琴中还有两个更改（在展开列表之前显示列表并默认将其隐藏在 CSS 中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T12:00:14.723

由于`padding`和`border`属性，它是可见的。

`[Updated fiddle](http://jsfiddle.net/anw4B/3/)`

在这个小提琴中，我将动画与动画`padding`一起制作，`height`并且在动画结束后有一个`callback`函数来删除`border`属性。我这样做只是为了向您展示问题出在哪里，如果我是您，我宁愿有一个回调函数在动画结束时隐藏元素，并在动画运行之前显示它。

`[Edited fiddle](http://jsfiddle.net/anw4B/4/)`

```
// This is how the line to show the list would look like.
// Note the .show() before .animate(). 
$('#Font-Size .DropList').stop().show().animate({
    height: "260px",
}, 400);

// That's for hiding. Note the callback function that hides
// the element at the end of the animation
$('#Font-Size .DropList').stop().animate({
     height: "0px",
}, 400,
function () { $(this).hide() }); 
```

从技术上讲，这将使元素在到达时消失，`height: 0`但它仍然`3px`具有填充和`2px`边框；但在我看来，这并不明显。自己试试。

# android - Textview.setText changes gravity of other objects

> ID：15862080
> 
> 赞同：0
> 
> 时间：2013-04-07T11:56:36.977
> 
> 标签：android, android-layout, textview

I have a textview inside a scrollview. Under the scrollview there is a tablelayout with a lot of buttons. When i through code change the text of the scrollview, like this.

```
textViewInput.setText("Hello"); 
```

It makes the buttons in the tablelayout change gravity so that the text in them is left aligned. Why is this happening? And i´ve made sure that textviewinput is´nt null.

Here´s the xml.

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<LinearLayout
    android:id="@+id/LinearLayout1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_above="@+id/TableLayout1"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginBottom="10dp"
    android:background="#DDD"
    android:orientation="vertical" >

    <ScrollView
        android:background="#DDD"
        android:id="@+id/scrollView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <RelativeLayout
            android:id="@+id/RelativeLayout1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/textViewInput"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:textAppearance="?android:attr/textAppearanceLarge"
                android:layout_alignParentLeft="true"
                android:layout_alignParentTop="true"
                android:gravity="left"
                android:textColor="#000"
                android:text="_" />

            <TextView
                android:id="@+id/textViewResult"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentRight="true"
                android:layout_alignParentTop="true"
                android:layout_marginRight="5dp"
                android:gravity="right"
                android:textAppearance="?android:attr/textAppearanceLarge"
                android:textColor="#000" />

        </RelativeLayout>
    </ScrollView>
</LinearLayout>

<TableLayout
    android:id="@+id/TableLayout1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true" >

    <TableRow
        android:id="@+id/TableRow07"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="5dp"
        android:gravity="center_vertical"
        android:weightSum="5" >

        <Button
            android:id="@+id/Button06"
            style="@style/white_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_weight="1.2"
            android:text="@string/_root"
            android:textColor="@android:color/primary_text_light"
            android:gravity="center" />

        <Button
            android:id="@+id/bAsin"
            style="@style/white_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_weight="1.2"
            android:paddingBottom="10dp"
            android:paddingTop="10dp"
            android:textColor="@android:color/primary_text_light"
            android:gravity="center" />

        <Button
            android:id="@+id/bAcos"
            style="@style/white_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_weight="1.2" 
            android:gravity="center"/>

        <Button
            android:id="@+id/batan"
            style="@style/white_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_weight="1.4"
            android:gravity="center" />
    </TableRow>

    <TableRow
        android:id="@+id/TableRow06"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="5dp"
        android:weightSum="5" >

        <Button
            android:id="@+id/Button04"
            style="@style/white_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_weight="1.2"
            android:text="@string/_pi"
            android:textColor="@android:color/primary_text_light"
            android:gravity="center" />

        <Button
            android:id="@+id/Button03"
            style="@style/white_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_weight="1.2"
            android:paddingBottom="10dp"
            android:paddingTop="10dp"
            android:text="@string/_sin"
            android:textColor="@android:color/primary_text_light" 
            android:gravity="center"/>

        <Button
            android:id="@+id/Button02"
            style="@style/white_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_weight="1.2"
            android:text="@string/_cos"
            android:gravity="center" />

        <Button
            android:id="@+id/Button01"
            style="@style/white_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_weight="1.4"
            android:text="@string/_tan" 
            android:gravity="center"/>
    </TableRow>

    <TableRow
        android:id="@+id/TableRow05"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="5dp"
        android:weightSum="5" >

        <Button
            android:id="@+id/bPow"
            style="@style/white_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_weight="1.2"
            android:text="@string/_pow"
            android:textColor="@android:color/primary_text_light" 
            android:gravity="center"/>

        <Button
            android:id="@+id/blpar"
            style="@style/white_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_weight="1.2"
            android:paddingBottom="10dp"
            android:paddingTop="10dp"
            android:text="@string/_lpar"
            android:textColor="@android:color/primary_text_light" 
            android:gravity="center"/>

        <Button
            android:id="@+id/brpar"
            style="@style/white_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_weight="1.2"
            android:text="@string/_rpar"
            android:gravity="center" />

        <Button
            android:id="@+id/bdiv"
            style="@style/white_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_weight="1.4"
            android:text="@string/_div"
            android:gravity="center" />
    </TableRow>

    <TableRow
        android:id="@+id/TableRow04"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="5dp"
        android:weightSum="5" >

        <Button
            android:id="@+id/b7"
            style="@style/white_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_weight="1.2"
            android:text="@string/_7"
            android:textColor="@android:color/primary_text_light" 
            android:gravity="center"/>

        <Button
            android:id="@+id/b8"
            style="@style/white_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_weight="1.2"
            android:paddingBottom="10dp"
            android:paddingTop="10dp"
            android:text="@string/_8"
            android:textColor="@android:color/primary_text_light" 
            android:gravity="center"/>

        <Button
            android:id="@+id/b9"
            style="@style/white_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_weight="1.2"
            android:text="@string/_9"
            android:gravity="center" />

        <Button
            android:id="@+id/bmul"
            style="@style/white_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_weight="1.4"
            android:text="@string/_times"
            android:textStyle="bold"
            android:gravity="center" />
    </TableRow>

    <TableRow
        android:id="@+id/TableRow03"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="5dp"
        android:weightSum="5" >

        <Button
            android:id="@+id/b4"
            style="@style/white_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_weight="1.2"
            android:text="@string/_4"
            android:textColor="@android:color/primary_text_light"
            android:gravity="center" />

        <Button
            android:id="@+id/b5"
            style="@style/white_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_weight="1.2"
            android:paddingBottom="10dp"
            android:paddingTop="10dp"
            android:text="@string/_5"
            android:textColor="@android:color/primary_text_light"
            android:gravity="center" />

        <Button
            android:id="@+id/b6"
            style="@style/white_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_weight="1.2"
            android:text="@string/_6"
            android:gravity="center" />

        <Button
            android:id="@+id/bsub"
            style="@style/white_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_weight="1.4"
            android:text="@string/_minus" 
            android:gravity="center"/>
    </TableRow>

    <TableRow
        android:id="@+id/TableRow02"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="5dp"
        android:weightSum="5" >

        <Button
            android:id="@+id/b1"
            style="@style/white_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_weight="1.2"
            android:text="@string/_1"
            android:textColor="@android:color/primary_text_light" 
            android:gravity="center"/>

        <Button
            android:id="@+id/b2"
            style="@style/white_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_weight="1.2"
            android:paddingBottom="10dp"
            android:paddingTop="10dp"
            android:text="@string/_2"
            android:textColor="@android:color/primary_text_light"
            android:gravity="center" />

        <Button
            android:id="@+id/b3"
            style="@style/white_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_weight="1.2"
            android:text="@string/_3" 
            android:gravity="center"/>

        <Button
            android:id="@+id/badd"
            style="@style/white_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_weight="1.4"
            android:text="@string/_plus" 
            android:gravity="center"/>
    </TableRow>

    <TableRow
        android:id="@+id/TableRow01"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="5dp"
        android:weightSum="5" >

        <Button
            android:id="@+id/b0"
            style="@style/white_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_weight="1.2"
            android:text="@string/_0"
            android:textColor="@android:color/primary_text_light" 
            android:gravity="center"/>

        <Button
            android:id="@+id/bPoint"
            style="@style/white_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_weight="1.2"
            android:gravity="center"
            android:paddingBottom="10dp"
            android:paddingTop="10dp"
            android:text="@string/dot"
            android:textColor="@android:color/primary_text_light" />

        <Button
            android:id="@+id/bClear"
            style="@style/white_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_weight="1.2"
            android:gravity="center"
            android:text="@string/clear" />

        <Button
            android:id="@+id/bEnter"
            style="@style/white_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_weight="1.4"
            android:text="@string/enter" />

    </TableRow>

</TableLayout>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T12:34:32.527

因为

```
<TextView
    android:id="@+id/textViewInput"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    ... 
```

使用`wrap_content`意味着你`TextView`的宽度和高度会根据它的内容而改变，你在调用时修改它`setText()`。

尝试使用固定的宽度和高度，如下所示：

```
<TextView
    android:id="@+id/textViewInput"
    android:layout_width="match_parent"
    android:layout_height="30dp"
    ... 
```

# c - 将2个结构作为参数传递给C中的pthread

> ID：15862081
> 
> 赞同：1
> 
> 时间：2013-04-07T11:56:37.913
> 
> 标签：c, linux, struct, pthreads, arguments

我可以将两个结构作为参数传递给 C 程序中的 pthread。我需要做这样的事情：

```
void *funtion1(void *pass_arg, void *pass_arg1)
{
    struct thread_arg *con = pass_arg;
    struct thread_arg1 *con = pass_arg1;
    //necessary code
}
int main()
{
pthread_t threaad;
//necessary code
while(1)
{
    th1 = pthread_create(&threaad, NULL, function1, (void *)&pass_arg, (void*)&pass_arg);
//necessary codes
}
pthread_exit(NULL);
return 1;
} 
```

我的意思是有什么方法可以在使用 pthread 时将两个结构传递给同一个函数？操作平台：Linux。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T12:01:02.603

不是直接的，因为 libpthread 中的函数只接受一个用户数据参数。但这应该足够了，不是吗？

```
struct user_struct {
    void *p1, *p2;
} arg = { &arg1, &arg2 };

pthread_create(&tid, NULL, threadfunc, &arg); 
```

另外，不要将指针指向`void *`，这是多余的、危险的并且会降低可读性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T11:59:04.990

定义一个新的结构类型，其中包含两个原始类型作为成员。称它为有意义的东西，例如`thread_args`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T12:31:59.200

我通过将两个结构嵌套到一个结构中来解决这个问题，如下所示：

```
struct s1
{
    //variables
};

struct s2
{
    //variables
}

struct s3
{
    struct s1 ss1;
    struct s2 ss2;
}
void *funtion1(void *pass_arg)
{
    struct s3 *con = pass_arg;
    //necessary code
}
int main()
{
    //code
    th1 = pthread_create(&thread, NULL, function1, (void *)&pass_arg);
} 
```

# django - django-social-auth 通过 facebook_id 以编程方式创建新用户

> ID：15862085
> 
> 赞同：3
> 
> 时间：2013-04-07T11:56:56.173
> 
> 标签：django, django-socialauth

有没有什么方法可以创建 User 和 UserSocialAuth 对象而无需实际登录，但只有您要为其创建帐户的用户的 FACEBOOK_ID？

我正在创建一个简单的应用程序，用户可以在其中从 FB 中选择一个朋友并为他创建一些模型对象。由于我引用了用户实体，因此无论该朋友是否已注册，我都需要拥有它。如果不是，我需要以编程方式创建整个对象图。可以使用 django-social-auth 的标准功能，还是应该手动在“auth_user”和“social_auth_usersocialauth”中创建记录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T06:27:16.237

使用此自定义后端将用户名设置为人员的 FACEBOOK_ID。

```
from social_auth.backends.facebook import FacebookBackend
class IDFacebookBackend(FacebookBackend):
    """Facebook OAuth2 authentication backend"""
    def get_user_details(self, response):
        """Return user details from Facebook account"""
        return {'username': response.get('id'),
                'email': response.get('email', ''),
                'fullname': response.get('name', ''),
                'first_name': response.get('first_name', ''),
                'last_name': response.get('last_name', '')} 
```

在您的身份验证管道中使用此版本，`get_username`而不是`social_auth.backends.pipeline.user.get_username`

```
def get_username(details, user=None, *args, **kwargs):
    " Make Username from User Id "
    if user:
        return {'username': UserSocialAuth.user_username(user)}
    else:
        return details['username'] 
```

您的管道应如下所示：

```
SOCIAL_AUTH_PIPELINE = (
    'social_auth.backends.pipeline.social.social_auth_user',
    'our_custom_auth.get_username', # <= This should be the previous function
    'social_auth.backends.pipeline.user.create_user',
    'social_auth.backends.pipeline.social.associate_user',
    'social_auth.backends.pipeline.social.load_extra_data',
    'social_auth.backends.pipeline.user.update_user_details'
) 
```

然后你需要做的就是打电话`User.objects.create(username=friends_facebook_id)`，你有一个无法使用用户名/密码登录的用户，但可以通过 ForeignKey 字段轻松引用。

此外，当那个“朋友”在以后出现并加入您的网站时（使用 SocialAuth），他们将自动获得此用户对象，并且您的内部图表将保持准确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-08T12:37:57.117

所以我使用了上面描述的想法，但付出了更少的努力，最终我得到了以下结果：

我将`associate_by_email`阶段从`SOCIAL_AUTH_PIPELINE`我自己的 `associate_by_username`. 由于用户名在 Django auth 中是唯一的，我们可以使用它。所以完全的变化是

1.  实施`associate_by_username`

    从 django.core.exceptions 导入 MultipleObjectsReturned，ObjectDoesNotExist 从 social_auth.exceptions 导入 AuthException 从 django.contrib.auth.models 导入用户

    def associate_by_username(details, user=None, *args, **kwargs): """返回与详细信息相同的电子邮件地址的用户条目。""" if user: return None

    ```
    username = details.get('username')

    if username:
        try:
            return {'user': User.objects.get(username=username)}
        except MultipleObjectsReturned:
            raise AuthException(kwargs['backend'], 'Not unique email address.')
        except ObjectDoesNotExist:
            pass 
    ```

2.  然后我将此方法添加到管道中

    SOCIAL_AUTH_PIPELINE = ('social_auth.backends.pipeline.social.social_auth_user', 'core.auth.associate_by_username', 'social_auth.backends.pipeline.user.get_username', 'social_auth.backends.pipeline.user.create_user', 'social_auth. backends.pipeline.social.associate_user'，'social_auth.backends.pipeline.social.load_extra_data'，'social_auth.backends.pipeline.user.update_user_details'，）

3.  当我需要获取用户时，我通过 facebookId ( ) 查找它，但由 facebookUsername ( )`recipient = UserSocialAuth.objects.filter(uid=target_facebook_id)` 创建`User(username=target_username)`

# javascript - 使用 Typescript 和 requirejs 时，我在哪里放置我的 Knockout.js 扩展

> ID：15862086
> 
> 赞同：6
> 
> 时间：2013-04-07T11:57:00.830
> 
> 标签：javascript, knockout.js, requirejs, typescript

我正在将一些 javascript 代码移植到 typescript 并使用 requirejs。我有一个 config.ts：

```
//file config.ts
///<reference path="../require.d.ts" />
///<reference path="DataLayer.ts" />

require.config({
    baseUrl: '/scripts/App/',

    paths: {
        'jQuery': '/scripts/jquery-1.9.1',
        'ko': '/scripts/knockout-2.2.1',
        'signalR': "/scripts/jquery.signalR-1.0.1",
    },

    shim: {
        jQuery: {
            exports: '$'

        },
         signalR:{
            deps: ["jQuery"]
         },
         ko: {
             deps: ["jQuery"],
             exports: 'ko'
         }
    }
});

// load AMD module main.ts (compiled to main.js)
// and include shims $, _, Backbone

require(['DataLayer', 'signalR', 'ko'], (d ) => {
    alert('test');
    var app = new d.DataLayer();
    app.run();
  //  app.run();

}); 
```

它正在加载：

```
<script data-main="/Scripts/App/config" type="text/javascript" src="~/scripts/require.js"></script> 
```

在我刚刚在我的页面上有一个执行以下操作的脚本标签之前：

```
ko.bindingHandlers.csharpTypes = {
    init: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
        var value = valueAccessor();

        switch (value) {
            case 'System.Boolean':
                element.type = 'checkbox';
                break;
            case 'System.String':
                element.type = 'string';
                break;
            case 'System.DateTime':
                //$(element).replaceWith("<input placeholder='value' data-bind='value:value, uniqueId: name, csharpTypes:type'/>");
                element.type = 'datetime';
                break;
            default:
                element.type = 'number';
        }

    }

}; 
```

并且扩展名被添加到淘汰赛中。我不是 100% 确定我现在会把这段代码放在哪里？如果它在页面中，它在淘汰前加载由requirejs加载。我假设我需要用requirejs加载它，我只是不确定我会怎么做。在打字稿类中还是仅在 config.ts 中？

```
require(['DataLayer', 'signalR', 'ko'], (d ) => {
        alert('test');
        var app = new d.DataLayer();
        app.run();
      //  app.run();

    }); 
```

## 我试过了：

扩展名.ts

```
 ///<reference path="knockout.d.ts" />    
    export class KnockoutExtenions {
        // Constructor
        constructor() {
            ko.bindingHandlers.csharpTypes = {
                init: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
                    var value = valueAccessor();

                    switch (value) {
                        case 'System.Boolean':
                            element.type = 'checkbox';
                            break;
                        case 'System.String':
                            element.type = 'string';
                            break;
                        case 'System.DateTime':
                            //$(element).replaceWith("<input placeholder='value' data-bind='value:value, uniqueId: name, csharpTypes:type'/>");
                            element.type = 'datetime';
                            break;
                        default:
                            element.type = 'number';
                    }

                }

            };
      }
} 
```

但它给了我关于 ko.bindinghandlers 的 csharpTypes 的错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T09:52:44.293

您可以开箱即用地扩展现有的 TypeScript 接口。要定义自己的绑定处理程序，您需要做的就是：

1.  提供定义文件（比如`myBindings.d.ts`）
2.  添加以下代码

    ```
    interface KnockoutBindingHandlers {
        csharpTypes: KnockoutBindingHandler;
    } 
    ```

3.  在您的 extensions.ts 文件中引用此定义文件

# php - 如何使用 ajax 调用创建动态标签？

> ID：15862087
> 
> 赞同：1
> 
> 时间：2013-04-07T11:57:04.287
> 
> 标签：php, html, json, dynamic, getjson

我想根据乘客数量创建图标，我想给每个图标一个id。乘客id在php代码中。如何将乘客的id赋予图标id。当par_key为id时，par_value应该是那个乘客的身份证。

```
function sta_callStation() {
  var distName;
  var count = 0;
  $('#noOfPassengers, #infoOfPassengers, #distType,#distParams').empty();
  $('#sta_numberOfIcons').empty();
  $.getJSON('StationInfoGenerator.php', function (station) {
    $.each(station, function (sta_key, sta_value) {
      if (sta_key == "numberOfPassengers") {
        $('#noOfPassengers').append("<strong>İstasyondaki Yolcu Sayısı: </strong>" + sta_value);
      }
      if (sta_key == "passengers") {
        $('#infoOfPassengers').append("<strong>Passengers Information:</strong>" + '<br/>');
        $.each(station.passengers, function (i, passenger) {
          // $('#sta_numberOfIcons').append('<i class="icon-user"
          id = "sta_numberOfIcons" > < /i>');
            $.each(passenger, function(par_key, par_value) 
            {
                if(par_key=="pas_id")
                {
                   var icon = document.createElement("i");
                   // icon.id = par_value;
          input.setAttribute("id", par_value);
          icon.setAttribute("class", "icon-user");
          document.getElementById("sta_numberOfIcons").appendChild(icon);
        }
        $(function () {
          $("#sta_numberOfIcons").popover({
            title: 'Passenger Information',
            content: (par_key + ': ' + par_value + '  ' + '<br/>')
          });
          $('#infoOfPassengers').append(par_key + ': ' + par_value + '  ' + '<br/>');
        });
        });
      $('#infoOfPassengers').append('<hr />');
      count++;
    });
  } 
```

# java - Eclipse Xtext 作为应用程序运行 - Java 错误

> ID：15862088
> 
> 赞同：2
> 
> 时间：2013-04-07T11:57:04.710
> 
> 标签：java, eclipse, dsl, xtext

我有一个 xtext 项目，我可以为它生成 xtext 工件，并使用 mwe2 生成器，但它不会作为 xtext 应用程序运行 - 给出错误：

```
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  SIGBUS (0xa) at pc=0x000000010ccc04d0, pid=4122, tid=38240796672
#
# JRE version: 7.0_04-b21
# Java VM: Java HotSpot(TM) 64-Bit Server VM (23.0-b21 mixed mode bsd-amd64 compressed oops)
# Problematic frame:
# J  org.eclipse.osgi.internal.resolver.VersionConstraintImpl.getName()Ljava/lang/String;
#
# Failed to write core dump. Core dumps have been disabled. To enable core dumping, try "ulimit -c unlimited" before starting Java again
#
# An error report file with more information is saved as:
# /Users/ashley/Documents/eclipse/Eclipse.app/Contents/MacOS/hs_err_pid4122.log
#
# If you would like to submit a bug report, please visit:
#   http://bugreport.sun.com/bugreport/crash.jsp
# 
```

我可以运行另一个 xtext 项目，但不能运行这个。我为 JRE 系统库尝试了不同的设置，从头开始重建项目，但还没有任何效果。

有任何想法吗？

从日志：

```
Register to memory mapping:

RAX=0x0000000000000001 is an unknown value
RBX=0x00000008e7543190 is pointing into the stack for thread: 0x00007fa1c2e36000
RCX=0x00000006151f98f8 is an oop
org.eclipse.osgi.internal.resolver.GenericSpecificationImpl 
 - klass: 'org/eclipse/osgi/internal/resolver/GenericSpecificationImpl'
RDX=0x000000011042af48 is an oop
{instance class} 
 - klass: {other class}
RSP=0x00000008e7543170 is pointing into the stack for thread: 0x00007fa1c2e36000
RBP=0x00000006151f98f8 is an oop
org.eclipse.osgi.internal.resolver.GenericSpecificationImpl 
 - klass: 'org/eclipse/osgi/internal/resolver/GenericSpecificationImpl'
RSI=0x00000006151f98f8 is an oop
org.eclipse.osgi.internal.resolver.GenericSpecificationImpl 
 - klass: 'org/eclipse/osgi/internal/resolver/GenericSpecificationImpl'
RDI=0x0000000000000007 is an unknown value
R8 =0x00000000a0aad527 is an unknown value
R9 =0x0000000000000065 is an unknown value
R10=0x00000000000007b6 is an unknown value
R11=0x00000006151f9938 is an oop
java.lang.Object 
 - klass: 'java/lang/Object'
R12=0x000000010fc8f000 is an unknown value
R13=0x00000008e75431c8 is pointing into the stack for thread: 0x00007fa1c2e36000
R14=0x0000000000000000 is an unknown value
R15=0x00007fa1c2e36000 is a thread

Stack: [0x00000008e7444000,0x00000008e7544000],  sp=0x00000008e7543170,  free space=1020k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
J  org.eclipse.osgi.internal.resolver.VersionConstraintImpl.getName()Ljava/lang/String; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T17:08:47.707

问题不在于 Xtext。它没有原生部分，也不会产生这样的错误。碰巧是这样，这个特定的项目在 eclipse 本机代码中或（更有可能）在 JRE 或其他库本机代码中触发错误。

为了解决这个问题，我建议如下：

*   将您的 JRE 升级到最新的一些（版本 7 更新 17）
*   尝试其他供应商的 JRE，例如 JRockit ( [http://www.oracle.com/technetwork/middleware/jrockit/overview/index.html](http://www.oracle.com/technetwork/middleware/jrockit/overview/index.html) )
*   将 Eclipse 升级到最新的错误修复版本
*   重新下载了所有相关的软件（JDK，eclipse，...）
*   检查项目中所有外部库的本地部分并升级/替换它

还有一个很小的可能性，这是一个硬件问题。但是您可以通过尝试在另一台机器上运行您的项目来简单地解决这个问题。

# html - 带文字的透明 div 图像

> ID：15862096
> 
> 赞同：1
> 
> 时间：2013-04-07T11:57:28.783
> 
> 标签：html, css, styles, opacity

我想完成以下效果。（[链接](http://store.picbg.net/pubpic/25/76/efc484e23e212576.png)）

这个想法是我想在图像顶部有一个透明的 div，在这个 div 中我想放置一个不透明度的文本：1（不透明）

到目前为止，我设法使 div 透明，但其中的所有文本也是透明的，我不希望这样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T12:15:21.547

这应该可以帮助你。

HTML：

```
<div class="image">
    <img src="images/anyimg.jpg" alt="" />
    <h2>Image text:<br />Image Text</h2>
</div> 
```

CSS：

```
.image {
    position: relative;
    margin-bottom: 20px;
    width: 100%;
}
h2 {
    position: absolute;
    top: 200px;
    left: 0;
    width: 100%;
}
h2 span {
    color: white;
    font: bold 24px/45px Helvetica, Sans-Serif;
    letter-spacing: -1px;
    background: rgb(0, 0, 0);
    background: rgba(0, 0, 0, 0.7);
    padding: 10px;
}
h2 span.spacer {
    padding: 0 2px;
    background: none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T12:07:15.070

```
.image
{
  position: absolute;
  top:200px;
  left:200px;
  z-index: -1;
  height:200px;
  width:200px;
  opacity:.5;

}
.text
{
  position: absolute;
  top:50px;
  left:50px;
  z-index: 1000;
  opacity:1;
}
<div>
<img src="image.jpg" class="imgage" />
<span class="text">Hello</span>
</div> 
```

# rest - 开始数组但为字符串 GSON

> ID：15862100
> 
> 赞同：0
> 
> 时间：2013-04-07T11:58:15.563
> 
> 标签：rest, exception, gson

我有一个 Web 服务 REST：

```
@Path("/Vehicles")    
public class Vehicles{
        @GET
        @Path("/Cars")
        @Produces(aplicattion/json)
        public String Cars() {

            Car[] cars = Consulting my database...

            Gson gson = new Gson();

            return gson.toJson(cars); 
        } 
```

我使用网络服务：

```
 try {

            HttpClient httpClient = new DefaultHttpClient();

            HttpGet get = new HttpGet(
                    "http://localhost:8080/Concessionaire/rest/Vehicles/Cars");

            HttpResponse resp = httpClient.execute(get);

            String respGET = EntityUtils.toString(resp.getEntity());

            Gson gson = new Gson();

            Cars[] c = gson.fromJson(respGET,Cars[].class);

   }catch(Exception e){

   } 
```

但是出现了这个异常： Expected BEGIN_ARRAY but was String at line 1 colum 6 有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T12:41:59.140

您的方法返回一个字符串

```
public String Cars() 
```

客户端代码需要一个 Car 数组

```
Cars[] c = gson.fromJson(respGET,Cars[].class); 
```

Gson 在解析 json 时需要 BEGIN_ARRAY 事件，但会找到一个字符串。要修复它，请使用 jersey 类发送 Cars[]`Response`并将返回类型更改为`Response`.

```
return Response.ok(myCarsArray).build(); 
```

# php - 如何在php中将数组转换为csv文件

> ID：15862101
> 
> 赞同：-2
> 
> 时间：2013-04-07T11:58:40.347
> 
> 标签：php, csv

还有一个初学者问题：我怎样才能像这样转换一个数组（实际上它只是一个文本）：

```
Array
(
[0] => Array
    (
        [0] => nsor@cg.ukrtel.net
        [1] => p2007@rambler.ru
        [2] => pan20072009@yandex.ru
        [3] => gf@ukr.net
        [4] => tmkp@ma.odessa.ua
        [5] => export@soh.by
        [6] => advert@soh.by
    )
) 
```

通过 PHP 转换成 .csv 文件？这个文件应该没有像“[0] =>”这样的东西，只有地址。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T12:02:19.303

假设您的数组位于名为 的变量中`$arr`，您可以使用

```
echo implode("\r\n",$arr); 
```

你可能想在它前面加上

```
header('Content-type: text-csv; charset="UTF-8"'); 
```

或类似的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T12:21:04.510

查看[http://php.net/manual/en/function.fputcsv.php的第一个示例](http://php.net/manual/en/function.fputcsv.php)

使用您的数组而不是示例中的数组。

# c# - 数据注释 - 数字的错误错误消息

> ID：15862107
> 
> 赞同：0
> 
> 时间：2013-04-07T11:59:23.203
> 
> 标签：c#, validation, data-annotations

我有一个双变量：

```
 public double Width { set; get; } 
```

我想验证号码并显示错误消息，所以我添加了：

```
[Range(0.0, Double.MaxValue, ErrorMessage = "Width must be a valid number")] 
```

如果我输入负数，效果很好，但如果我将其留空或输入字母 - 内部错误消息是

> “输入字符串的格式不正确。”

我没有使用 @html.validationmessagefor ，因为我需要手动处理 ModelState 的 ErrorMessage 或 error.exception.InnerException.message。

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T12:08:42.730

似乎此错误消息来自`double.Parse`

数据注释属性不被双重类使用，它们只是被一些框架使用。

无论如何，看起来您的输入字符串不是有效的双精度字符串，因此范围验证与有效的双精度字符串无关。

# c++ - C++中常量数组的初始化

> ID：15862108
> 
> 赞同：0
> 
> 时间：2013-04-07T11:59:27.450
> 
> 标签：c++, arrays, constructor, initialization

我需要`const int`通过 C++ 中的初始化列表在类构造函数中初始化一个数组。

*   我知道有一个基于使用扩展初始化列表的简单解决方案。
*   不过，我想避免使用`-std=c++11`or `-std=gnu++11`。
*   显然，我从一开始就知道它的**大小是 4**，内容是`{1, 2, 3, 4}`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T12:25:12.600

在远离 C++11 初始化器列表领域的情况下，我能想到的唯一方法是将它埋在一个结构包装器中，并在你的构造初始化器列表中对其进行值初始化：

```
#include <iostream>
using namespace std;

struct ArrayWrap
{
    int content[4];
    int& operator [](size_t n) { return content[n]; }
    int operator [](size_t n) const { return content[n]; }
};

static const ArrayWrap content = { {1,2,3,4} };

struct MyObj
{
    const ArrayWrap arrwrap;

    MyObj() : arrwrap(content) {}
};

int main(int argc, char *argv[])
{
    MyObj obj;
    for (int i=0;i<4;++i)
        cout << obj.arrwrap[i] << ' ';
    cout << endl;

    return EXIT_SUCCESS;
} 
```

**输出**

```
1 2 3 4 
```

在 C 中，当从函数中按值返回固定数组时，将它们埋在结构中是很常见的，在这种情况下，我只是利用 C++ 编译器生成的包装器结构的默认复制ctor。

可能不是您想要的理想解决方案，但它确实有效，并且可以在 C++98 下编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T12:14:57.977

好吧，如果您从候选集中禁止 C++11 解决方案，那么[您根本*无法做到这一点*](https://stackoverflow.com/a/6036565/560648)。

# php - jquery ajax 调用空查询字符串

> ID：15862109
> 
> 赞同：0
> 
> 时间：2013-04-07T11:59:29.073
> 
> 标签：php, jquery, ajax, http

因此，我使用 jquery 对服务器上的 php 脚本进行 ajax 调用。

但是，由于某种原因，我无法弄清楚，没有发送查询字符串。在 $_GET 对象上使用 var_dump() 表明它是一个空字符串，Chrome 的网络活动开发工具表明没有发送任何字符串。

```
$.ajax({
            "url":"../script/content.php",
            "settings": {
                "dataType":"html",
                "type":"GET",
                "data":{
                    "id":$(this).prop('id')
                }
            }
        }).done( function(msg) {
            //$('#debug').html(msg);
            $('#dialog').html(msg);
            $('#dialog').load(function() {
                $('#close').click(function() {
                    $('#over').fadeOut(fadeTime);
                });
                if ($('#unique') > 0) {
                    $('#unique').load(function(){
                        $('#over').fadeIn(fadeTime);
                    });
                }
                else {
                    $('#over').fadeIn(fadeTime);
                }
            });             
        }); 
```

我已经尝试了没有引号的 ajax 调用，但结果是一样的......我只是把它们放进去，因为我认为这可能是问题......虽然我认为在这样的符号除非其中一个字段值应该是字符串，否则引号不会产生影响。

该代码中是否有任何明确的内容可能导致不发送查询字符串？我想我的语法有问题......我只是看不到它。

#dialog 加载回调似乎也从未被调用过……但我想这是另一个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T12:18:53.963

试试这个

```
$.ajax({
    //The link we are accessing with params
    url:'http://example.com/script/content.php'
    + '?id='
    + $(this).prop('id'),
    // The type of request.
    type: "get",
    //The type of data that is getting returned.
    dataType: "html",
    error: function(){
    //something here
    },
    success: function( strData ){
    //something here
    }
}); 
```

# c++ - Asio async_read_some 模板错误

> ID：15862111
> 
> 赞同：1
> 
> 时间：2013-04-07T11:59:39.540
> 
> 标签：c++, boost-asio

我正在使用非增强 asio 编写一个简单的异步服务器。我遇到了一个巨大的模板错误，坦率地说，我什至无法想象这一切意味着什么。

作为参考，我的代码看起来很像[http://think-async.com/Asio/asio-1.5.3/src/examples/http/server3/connection.cpp](http://think-async.com/Asio/asio-1.5.3/src/examples/http/server3/connection.cpp)。

这是我的代码：

```
void client_connection::serve()
{
    // std::cout << "Began serving connection" << std::endl;
    // refer to http server 3 connection.cpp
    this->socket_.async_read_some(asio::buffer(&protocol_version_, 1), this->strand_.wrap(std::bind(&client_connection::handle_read, this->shared_from_this(), asio::placeholders::error, asio::placeholders::bytes_transferred)));

    // 65535 max tcp size
}

void client_connection::handle_read(const asio::error_code& error_, std::size_t bytes_)
{
    if (error_) return;

    // for debug: print out all the recieved bytes
    std::cout << std::hex << protocol_version_ << " " << std::endl;
    this->serve();
} 
```

这是错误：

```
1>C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\include\functional(1152): error : no instance of overloaded function "std::_Pmf_wrap<_Pmf_t, _Rx, _Farg0, _V0_t, _V1_t, std::_Nil, std::_Nil, std::_Nil, std::_Nil, std::_Nil>::operator() [with _Pmf_t=void (client_connection::*)(const asio::error_code &, size_t={unsigned int}), _Rx=void, _Farg0=client_connection, _V0_t=const asio::error_code &, _V1_t=size_t={unsigned int}]" matches the argument list
1>              argument types are: (client_connection *, boost::arg<1>, boost::arg<2>)
1>              object type is: std::_Pmf_wrap<void (client_connection::*)(const asio::error_code &, size_t), void, client_connection, const asio::error_code &, size_t, std::_Nil, std::_Nil, std::_Nil, std::_Nil, std::_Nil>
1>    _VARIADIC_EXPAND_0X(_CLASS_BIND, , , , )
1>    ^
(+~20 not very relevant lines) 
```

我有一种预感，它与 shared_from_this 相关，但无论我是否删除 shared_from_this 行为，都会发生错误。

非常感谢任何形式的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T12:28:57.160

我相信`asio::placeholders::*`与 合作`boost::bind`，但我不太确定他们与 合作`std::bind`。尝试`std::placeholders::_1`并`std::placeholders::_2`改为，或使用`boost::bind`.

# business-intelligence - 层次结构和级别之间的差异

> ID：15862114
> 
> 赞同：3
> 
> 时间：2013-04-07T11:59:44.263
> 
> 标签：business-intelligence, olap-cube, mondrian

我刚刚开始研究蒙德里安。我很难理解层次结构和级别。多维数据集中的维度的级别和层次结构之间有什么区别？为什么我们在构建蒙德里安模式时需要在层次结构中具有级别？

谢谢阅读

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T07:32:37.413

取自[Pentaho Mondrian 文档](http://mondrian.pentaho.com/documentation/schema.php#Dimensions,_Hierarchies,_Levels)

*   成员是由一组特定属性值确定的维度内的一个点。性别等级有两个成员“M”和“F”。“旧金山”、“加利福尼亚”和“美国”都是商店层次结构的成员。
*   层次结构是组织成结构以便于分析的一组成员。例如，商店层次结构由商店名称、城市、州和国家组成。层次结构允许您形成中间小计：一个州的小计是该州所有城市小计的总和，每个城市的小计都是该州的商店小计的总和那个城市。- 级别是与层次结构的根具有相同距离的成员的集合。
*   维度是区分同一事实表属性（例如，发生销售的日期）的层次结构的集合。
*   出于统一的原因，措施被视为特殊维度的成员，称为“措施”。

一个例子 让我们看一个简单的维度。

```
<Dimension name="Gender" foreignKey="customer_id">
  <Hierarchy hasAll="true" primaryKey="customer_id">
    <Table name="customer"/>
    <Level name="Gender" column="gender" uniqueMembers="true"/>
  </Hierarchy>
</Dimension> 
```

此维度由一个层次结构组成，该层次结构由称为性别的单个级别组成。

维度的值来自客户表中的性别列。“gender”列包含两个值，“F”和“M”，因此 Gender 维度包含成员 [Gender].[F] 和 [Gender].[M]。

另一个例子展示了时间维度的例子：

以下是时间维度的示例：

```
<Dimension name="Time" type="TimeDimension">
  <Hierarchy hasAll="true" allMemberName="All Periods" primaryKey="dateid">
   <Table name="datehierarchy"/>
    <Level name="Year" column="year" uniqueMembers="true" levelType="TimeYears" type="Numeric"/>
    <Level name="Quarter" column="quarter" uniqueMembers="false" levelType="TimeQuarters"/>
    <Level name="Month" column="month" uniqueMembers="false" ordinalColumn="month" nameColumn="month_name" levelType="TimeMonths" type="Numeric"/>
    <Level name="Week" column="week_in_month" uniqueMembers="false" levelType="TimeWeeks"/>
    <Level name="Day" column="day_in_month" uniqueMembers="false" ordinalColumn="day_in_month" nameColumn="day_name" levelType="TimeDays" type="Numeric"/>
  </Hierarchy>
</Dimension> 
```

另请注意，维度可以有多个层次结构：

一个维度可以包含多个层次结构：

```
<Dimension name="Time" foreignKey="time_id">
  <Hierarchy hasAll="false" primaryKey="time_id">
   <Table name="time_by_day"/>
    <Level name="Year" column="the_year" type="Numeric" uniqueMembers="true"/>
    <Level name="Quarter" column="quarter" uniqueMembers="false"/>
    <Level name="Month" column="month_of_year" type="Numeric" uniqueMembers="false"/>
  </Hierarchy>
  <Hierarchy name="Time Weekly" hasAll="false" primaryKey="time_id">
    <Table name="time_by_week"/>
    <Level name="Year" column="the_year" type="Numeric" uniqueMembers="true"/>
    <Level name="Week" column="week" uniqueMembers="false"/>
    <Level name="Day" column="day_of_week" type="String" uniqueMembers="false"/>
  </Hierarchy>
</Dimension> 
```

我们还可以在文档中简化简单的模式：

```
<Schema>
 <Cube>
  <Dimension Gender>
    <Hierarchy>
      <Level Gender>
    </Hierarchy>
  </Dimension>
  <Dimension Time>
    <Hierarchy>
      <Level Year/>
      <Level Quarter/>
      <Level Month/>
    </Hierarchy>
    <Hierarchy>
      <Level Year/>
      <Level Week/>
      <Level Day/>
    </Hierarchy>
  </Dimension>
  <Measure Unit Sales/>
  <Measure Store Sales/>
 </Cube>
</Schema> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T11:30:57.597

维度是层次结构的列表（例如，具有日历和年份层次结构的时间维度）。

层次结构是级别列表（例如，具有年和月级别的日历）。

级别是成员列表（最终成员被组织成级别）。

你可以看看这个解释主要概念的[MDX 温和介绍。](http://www.iccube.com/support/documentation/mdx_tutorial/gentle_introduction.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T09:33:23.387

我们通常创建维度层次结构以将数据向下钻取到特定的层次结构级别。如果您有位置层次结构，我们通常会有以下级别 - 国家、州、县/区等。

维杰。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T07:13:34.047

peantho Schema Workbench 是您可以说是 mondrian 的修改版本，因此请查看用于创建多维数据集的 pentaho 模式工作台的基本示例，以便在创建时您将自动以更轻松的方式了解您的问题。

# android - 返回按钮 - 无法访问

> ID：15862115
> 
> 赞同：0
> 
> 时间：2013-04-07T11:59:45.190
> 
> 标签：android, button, android-activity

我想创建一个按钮，用于关闭当前活动。就像一个“返回”按钮。以下是我尝试过的代码片段：

这是完整的.java：

```
public class OtherApps extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.other_apps);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.otherappsmenu, menu);
        return true; 
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch(item.getItemId()) {  
        case R.id.previous:
            finish();
            break;
        case R.id.home:
            Context context = getApplicationContext();
            CharSequence text = "Activitys are not closed!";
            int duration = Toast.LENGTH_LONG;
            Toast toast = Toast.makeText(context, text, duration);
            toast.show();
            Intent intent = new Intent(this, MainActivity.class);
            this.startActivity(intent);
            break;
        case R.id.exit:
            finish();
            System.exit(0);
        case R.id.help:
            String url = "http://www.google.de/";
            Intent i = new Intent(Intent.ACTION_VIEW);
            i.setData(Uri.parse(url));
            startActivity(i);
            return true;
        default:
            return super.onOptionsItemSelected(item);
        }
        return true;

        final Button OtherApps = (Button)findViewById(R.id.previousbutton);
        OtherApps.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                finish();
            }
        });
        return true;
    }
} 
```

但是 Eclipse 说“第一行无法访问”。有谁知道错误是什么？

感谢帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T12:14:29.330

如果您的“第一行”无法访问，那么更重要的是要知道这两个版本之前的代码是什么。可能是，您在`return`那里有一个语句或一个总是 的条件`false`。

在这种情况下，将永远无法访问附加单击侦听器的代码。

**ps**

您有两行从方法返回，这意味着以下代码永远不会执行：

```
switch(item.getItemId()) {  
   ...
   default: // here, return if none of the values above matched
     return super.onOptionsItemSelected(item); 
}
return true; // here, return always

// conclusion: this gets never executed: Eclipse says "line not reachable"
final Button OtherApps = (Button ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T12:07:01.850

该代码应该可以工作（应该首选第一个示例）。

`return`在粘贴代码之前，您收到的错误听起来好像您在该方法中的任何地方都有- 语句。搜索它，它应该修复错误。

编辑：

```
public class OtherApps extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.other_apps);

        final Button OtherApps = (Button) findViewById(R.id.previousbutton);
        OtherApps.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            finish();
            }
        });
} 
```

# dns - ipv4 接口上的 AAAA DNS 查询

> ID：15862118
> 
> 赞同：0
> 
> 时间：2013-04-07T11:59:53.353
> 
> 标签：dns, bind, ipv6, ipv4, named

我们使用禁用 ipv6 的 RH5.8。

命名（绑定）服务处于转发模式（启用缓存）

```
options {
   directory "/var/named";
   listen-on { 127.0.0.1; };
   forwarders {10.10.12.1;};
   forward only;
}; 
```

似乎某些命令（如 telnet）总是首先查询 AAAA 记录，当回退到查询 A 记录时，已在命名缓存中记录答案（无此类名称）。

结果，客户端总是出错。

在下面的示例中，10.10.10.1 是本地 IP：

```
127.0.0.1 -> 127.0.0.1    DNS Standard query AAAA testapp.test.com

10.10.10.1 -> 10.10.12.1 DNS Standard query AAAA testapp.test.com

10.10.10.1 -> 10.10.12.1 DNS Standard query AAAA testapp.test.com

10.10.12.1 -> 10.10.10.1 DNS Standard query response, No such name

127.0.0.1 -> 127.0.0.1    DNS Standard query response, No such name

127.0.0.1 -> 127.0.0.1    DNS Standard query A testapp.test.com

127.0.0.1 -> 127.0.0.1    DNS Standard query response, No such name 
```

我在网上搜索，发现不仅我遇到了这样的问题 [http://www.linuxforums.org/forum/red-hat-fedora-linux/136217-disabling-ipv6-dns-queries.html](http://www.linuxforums.org/forum/red-hat-fedora-linux/136217-disabling-ipv6-dns-queries.html)

```
less /etc/modprobe.conf
  alias net-pf-10 off
  alias ipv6 off
  options ipv6 disable=1

less /etc/sysconfig/network
 NETWORKING_IPV6=no

less /etc/sysconfig/named
 OPTIONS="-4"

named -v
 BIND 9.3.6-P1-RedHat-9.3.6-20.P1.el5 
```

但不幸的是到目前为止没有找到任何解决方案......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T22:02:07.600

根据评论中的要求：关于负缓存的一些解释。

NXDOMAIN 和 NODATA 之间的区别在 RFC 2308 的第 5 节中进行了描述：

> 应缓存由名称错误 (NXDOMAIN) 导致的否定答案，以便可以检索并返回它以响应对导致缓存否定响应的相同 <QNAME, QCLASS> 的另一个查询。

因此，可以根据 QNAME（即“blabla.example.com.”）和 QCLASS（通常为“IN”）缓存 NXDOMAIN。所以这意味着`blabla.example.com`根本不存在。负缓存条目与 QTYPE 无关。NODATA 的答案不同：

> 应缓存因无数据错误 (NODATA) 导致的否定答案，以便可以检索并返回它以响应对导致缓存否定响应的相同 <QNAME, QTYPE, QCLASS> 的另一个查询。

这里包含 QTYPE（即“AAAA”）。NODATA 负缓存条目仅表示此名称不存在*此特定记录类型。*

所以：如果您收到 NXDOMAIN 响应，那么您就知道该名称对于任何记录类型都不存在。如果您收到 NODATA 响应，则您知道请求的记录类型不存在，但可能存在其他记录类型。

这也意味着在发送响应时，如果同一名称可能存在不同记录类型的有效记录，则*永远*不应发送 NXDOMAIN 响应。不存在的域名*将*被缓存，并且缓存将开始告诉其客户端该名称根本不存在。

# javascript - 使用 require.js 进行消费的自定义 Javascript 应用程序：如何避免与现有库的优化冲突？

> ID：15862124
> 
> 赞同：1
> 
> 时间：2013-04-07T12:00:43.413
> 
> 标签：javascript, jquery, backbone.js, requirejs, underscore.js

我试图找出一种模式来加载像 Backbone、jQuery 和 Underscore 这样的公共库的具体版本，以便在任何旨在插入任何网站的 Javascript 应用程序中使用它们，而不会与这些库的现有版本冲突。我选择的使我的代码*模块化*的库是 require.js。

该应用程序将被称为 Bobby :-)

如果我不将其*优化*为单个文件，我的代码就可以工作。最好将 Bobby 作为单个 Javascript 文件提供，该文件可以包含在站点的 HTML 代码中的任何位置。

我注意到了：我是 require.js 的新手。

# 目录结构

这些文件的组织方式如下：

```
bobby
  public
    js
      app -> My custom JS
        bobby.js
        core.js

      lib -> 3rd party JS
        backbone.js
        jquery-1.9.1-min.js
        require.js
        underscore.js

      bootstrap.js -> Main file for require.js
      build.js -> To create js/bobby.js

    index.html -> uses non-optimized version
    index2.html -> uses optimized version (js/bobby.js) 
```

# HTML 文件

## 索引.html

在这里，我试图确保站点的库不会被我自己的版本覆盖。

```
<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Bobby</title>
  <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
  <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.3/underscore-min.js"></script>
  <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/backbone.js/0.9.10/backbone-min.js"></script>

  <script type="text/javascript" src="js/lib/require.js" data-main="js/bootstrap.js"></script>

  <script type="text/javascript">
  jQuery(function($){
    console.log("Host's jQuery: " + $.fn.jquery); // Should be 1.7.2
    console.log("Host's Underscore: " + _.VERSION); // Should be 1.4.3
    console.log("Host's Backbone: " + Backbone.VERSION); // Should be 0.9.10
    console.log("Host's Backbone's jQuery: " + Backbone.$.fn.jquery);
  });
  </script>
</head>
<body>
  <p>HOLA!</p>
</body>
</html> 
```

当我加载此文件时，控制台日志是正确的：

```
Host's jQuery: 1.7.2 index.html:23
Host's Underscore: 1.4.3 index.html:24
Host's Backbone: 0.9.10 index.html:25
Host's Backbone's jQuery: 1.7.2 index.html:26
Bobby's jQuery: 1.9.1 bobby.js:3
Bobby's Underscore: 1.4.4 bobby.js:4
Bobby's Backbone: 1.0.0 bobby.js:5 
```

## index2.html

这是有问题的版本。此文件使用*优化*版本。代替：

```
<script type="text/javascript" src="js/lib/require.js" data-main="js/bootstrap.js"></script> 
```

它用：

```
<script type="text/javascript" src="js/bobby.js"></script> 
```

并且控制台日志不正确：

```
Host's jQuery: 1.9.1 index2.html:14
Host's Underscore: 1.4.4 index2.html:15
Host's Backbone: 1.0.0 index2.html:16
Host's Backbone's jQuery: 1.9.1 index2.html:17
Bobby's jQuery: 1.9.1 bobby.js:11
Bobby's Underscore: 1.4.4 bobby.js:11
Bobby's Backbone: 1.0.0 bobby.js:11 
```

但如果您在控制台中执行此操作：

```
$.fn.jquery => "1.7.2"
bobby.$.fn.jquery => "1.9.1" 
```

没关系。与以下相同：

```
Backbone.VERSION => "0.9.10"
bobby.B.VERSION => "1.0.0" 
```

和：

```
_.VERSION => "1.4.3"
bobby._.VERSION => "1.4.4" 
```

只有在包含 js/bobby.js 之后立即执行脚本才会失败。该脚本使用了错误版本的库（外部而不是站点版本）。

# JS 文件

## 引导程序.js

假设这是第一次加载的内容，所以我在这里为我所有的第 3 方库调用 noConflict()。

```
require(['app/core', 'app/bobby'], function(core, bobby) {
    core._.noConflict();
    core.$.noConflict(true);
    core.B.noConflict();

    bobby.initialize();
}); 
```

## 应用程序/core.js

```
define(['lib/underscore', 'lib/jquery-1.9.1.min', 'lib/backbone'], function(){
    Backbone.$ = jQuery;
    return {
        _: _,
        $: jQuery,
        B: Backbone
    };
}); 
```

## 应用程序/bobby.js

```
define(['app/core'], function(core){
    var initialize = function() {
        console.log("Bobby's jQuery: " + core.$.fn.jquery);
        console.log("Bobby's Underscore: " + core._.VERSION);
        console.log("Bobby's Backbone: " + core.B.VERSION);

        core.$('body').html('Bobby initialized!');

        window.bobby = core._.extend(window.bobby || {options: {}}, core);
    };

    return {
        'initialize': initialize
    };
}); 
```

# 优化版

我使用通过 npm 全局安装的 r.js 和 build.js 文件：

```
cd bobby/public/js
r.js -o build.js 
```

它给出了：

```
Tracing dependencies for: /path/to/bobby/public/js/bobby.js
Uglifying file: /path/to/bobby/public/js/bobby.js

/path/to/bobby/public/js/bobby.js
----------------
/path/to/bobby/public/js/lib/require.js
/path/to/bobby/public/js/lib/underscore.js
/path/to/bobby/public/js/lib/jquery-1.9.1.min.js
/path/to/bobby/public/js/lib/backbone.js
/path/to/bobby/public/js/app/core.js
/path/to/bobby/public/js/app/bobby.js
/path/to/bobby/public/js/bootstrap.js 
```

## 构建.js

为了避免与现有的 require.js 库发生冲突，我将它包含在*bob*命名空间中。

```
({
    baseUrl: ".",
    out: "bobby.js",
    paths: {
        requireLib: 'lib/require'
    },
    include: ["requireLib", "bootstrap"],
    namespace: "bob"
}) 
```

# 需要帮助

尽管 bobby.js 在初始化后运行良好并将全局变量返回到原始库，但当我们执行时它不起作用：

```
<script type="text/javascript">
jQuery(function($){
  ...
});
</script> 
```

在加载优化的 bobby.js 文件之后。

这个想法不是强迫网站的所有者将 bobby.js 文件放在一个具体的地方。

我能做些什么？谢谢！

PD：如果你觉得这个模式有用，请随意使用...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T07:36:08.593

After some sleep, I woke up this morning remembering the existence of the `async` HTML attribute so I tested the same snippet Google uses to load its tracking code and it worked!

```
<script type="text/javascript">
  (function() {
    var bb = document.createElement('script');
    bb.src = 'js/bobby.js';
    bb.setAttribute('async', 'true');
    document.documentElement.firstChild.appendChild(bb);
  })();
</script> 
```

Anyway I'm accepting suggestions and answers to the proposed code.

# android - 使用 AsyncTask 在后台运行 SoundPool

> ID：15862135
> 
> 赞同：1
> 
> 时间：2013-04-07T12:01:49.543
> 
> 标签：android, background, android-asynctask

我正在尝试使用 AsyncTask 在后台一个接一个地播放 5 个 SoundPool。但我想在声音运行时单击 ImageView。当 SoundPool 使用 getBaseContext() 在 doInBackground 运行时阻塞我的 ImageView 时，问题就开始了。有谁知道发生了什么？非常感谢！这是我的代码：

```
 public class SensoriomotoraActivity extends Activity {

    private boolean playing = false ;
    private ImageView image ;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.sensoriomotora);

        image = (ImageView) findViewById(R.id.img_sensoriomotora_pandereta);

        image.setOnClickListener(new View.OnClickListener() {

             @Override
         public void onClick(View v) {
           if (playing){
            Log.v("onClick","clicked while playing");   
           }
           else {
            Log.v("onClick","clicked while !playing");  
           }
         }
        });

        new Thread (
                new Runnable(){
                    @Override
                    public void run(){
                        // Waiting 2.5 secs before playing the beeps
                        try {
                            Thread.sleep(2500);
                        } catch (InterruptedException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }
                         runOnUiThread(new Runnable() {
                                @Override
                                public void run() {
                                    new PlaySoundBackground().execute();
                                }
                         });
                    }
                }
          ).start(); 
   }

    private class PlaySoundBackground extends AsyncTask<Void, Void, Void>{

       @Override
       protected void onPreExecute() {
           playing = true ;
       }

       @Override
       protected Void doInBackground(Void... params) {

           SoundPool sound;

           sound = new SoundPool(1, AudioManager.STREAM_MUSIC,0);
           sound.load(getBaseContext(), R.raw.beep, 1);
           sound.setOnLoadCompleteListener(new SoundPool.OnLoadCompleteListener() {

              @Override
              public void onLoadComplete(SoundPool soundPool, int sampleId, int status) {
                for (int i=0 ; i<5; i++){
                    soundPool.play(sampleId, 1, 1, 1, 0, 1);
                    try {
                        Thread.sleep(2000); // Waits 2 secs before next beep
                    } catch (InterruptedException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                }
              }
           });
           return null;
      }

      @Override
      protected void onPostExecute(Void result) {
           playing = false ;
      }       
  }
} 
```

# vb.net - 找出触发“formCloseing”事件时最后按下的按钮

> ID：15862136
> 
> 赞同：0
> 
> 时间：2013-04-07T12:01:50.140
> 
> 标签：vb.net, button, formclosing

当某个表单关闭时，我会捕获该`formClosing`事件以检查用户是否真的想要关闭它。

但是，如果单击“下一步>”，我不希望执行此检查，除非我知道检查了哪个按钮，否则总是寻求构象。

有没有办法可以将用户单击的按钮传递给`confirm_exit()`函数，这样如果它是“下一步>”我可以忽略检查并重新运行“False”？

```
'*'
' Carries out actions when the user clicks the 'X' button to close the form
'*'
Private Sub btnX(sender As Object, e As FormClosingEventArgs) Handles Me.FormClosing

    Dim clicked As Button   ' The button that the user clicked

    clicked = ??? ' How do I get the button that was last clicked?

    e.Cancel = confirm_exit(clicked)

End Sub

'**
' Checks that the user does actually want to cancel the Music Renamer
'*
Public Function confirm_exit(Optional clicked As Button = Nothing) As Boolean

    ' Ask the user if they are sure that they wish to cancel the Music Renamer
    Dim cancel As String = MsgBox("The Music Renamer is not finished yet. Are you sure you wish to quit?", vbYesNo, "Are you sure?")

    ' Set confirm_exit to false by default
    confirm_exit = False

    ' Check if the user clicked 'Next >', and exit the function if they did
    If clicked.Name = "btnNext" Then Exit Function

    ' If the user is sure, close the Music Renamer form
    If Not cancel = vbYes Then confirm_exit = True

End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T12:07:36.163

有很多方法可以解决这个问题，但最简单的方法是`verifyClosing`在表单类中添加一个初始值为`true`.

每当您希望表单在没有确认的情况下关闭时，只需`verifyClosing = false`在调用该`Close`方法之前进行设置。您的关闭事件处理程序可以检查此值以决定要做什么。

# ios - Uiactivityindicator 未显示在子视图中

> ID：15862137
> 
> 赞同：0
> 
> 时间：2013-04-07T12:01:51.713
> 
> 标签：ios, objective-c, uiactivityindicatorview

我试图在我的主线程的 tableview 控制器的子视图中显示微调器。该视图仅偶尔显示，并且通常在我的后台线程完成后显示。这是我的代码：

```
[self.view addSubview:spinnerView];
        [self.view bringSubviewToFront:spinnerView];
        self.spinnerView.layer.cornerRadius = 8;
        self.spinnerView.center = CGPointMake(160, 150);

        [spinner startAnimating];

        dispatch_queue_t downloadQueue = dispatch_queue_create("downloader", NULL);
        dispatch_async(downloadQueue, ^ {
            dispatch_async(dispatch_get_main_queue(), ^{
                [NSThread sleepForTimeInterval:10];
                // Add recurring transactions if necessary
                if (tran.recur.id != 0) {
                    [Utilities addRecurringTransactionsUpToCurrentMonthByTransaction:tran];
                }

                [spinner stopAnimating];
                [self dismissViewControllerAnimated:YES completion:nil];
            });
        });
        dispatch_release(downloadQueue);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T12:15:05.210

由于所有 UI 都在主线程上运行，因此您必须调用 performSelectorOnMainThread:withObject:waitUntilDone: 如下所示：

```
 [self.view addSubview:spinnerView];
    [self.view bringSubviewToFront:spinnerView];
    self.spinnerView.layer.cornerRadius = 8;
    self.spinnerView.center = CGPointMake(160, 150);

    [spinner performSelectorOnMainThread:@selector(startAnimating) withObject:nil waitUntilDone:NO];

    dispatch_queue_t downloadQueue = dispatch_queue_create("downloader", NULL);
    dispatch_async(downloadQueue, ^ {
        dispatch_async(dispatch_get_main_queue(), ^{
            [NSThread sleepForTimeInterval:10];
            // Add recurring transactions if necessary
            if (tran.recur.id != 0) {
                [Utilities addRecurringTransactionsUpToCurrentMonthByTransaction:tran];
            }

            [spinner performSelectorOnMainThread:@selector(stopAnimating) withObject:nil waitUntilDone:NO];

            [self dismissViewControllerAnimated:YES completion:nil];
        });
    });
    dispatch_release(downloadQueue); 
```

# php - 为什么在drupal 7中主题无法读取我的css文件路径？

> ID：15862138
> 
> 赞同：1
> 
> 时间：2013-04-07T12:01:59.010
> 
> 标签：php, drupal, drupal-7, drupal-theming

为什么我在控制台中看到这个错误？

```
 "NetworkError: 404 Not Found - http://localhost/drupal/tooltip/css/layout.css" 
```

我的文件路径是这样的

```
 /* mytheme.info */
            stylesheets[all][]   = tooltip/css/layout.css
            stylesheets[all][]   = tooltip/css/typo.css 
```

这些文件在我的主题文件夹中

```
Folder: MYTHEME
   File: mytheme.info
   Folder: tooltip
       Folder: css
           File: layout.css
           File: typo.css 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T12:34:55.293

URL 错误：localhost/drupal/tooltip/css/layout.css 应该是 localhost/drupal/sites/all/themes/YOUR_THEME_FOLDER/tooltip/css/layout.css。

# ios - 线程 1：信号 SIGBART

> ID：15862144
> 
> 赞同：1
> 
> 时间：2013-04-07T12:02:24.717
> 
> 标签：ios, objective-c

所以我有两个视图，我试图与导航连接。

我已将它们嵌入到导航控制器中，并在情节提要中创建了它们之间的 push segue：

![在此处输入图像描述](https://i.stack.imgur.com/XRVB7.png)

在第一个控制器的 viewDidLoad 中，我向导航添加了一个按钮以及单击时应调用的方法：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    UIBarButtonItem *myButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemRefresh target:self action:@selector(buttonClicked:)];
    self.navigationItem.rightBarButtonItem = myButton;
}

- (void)buttonClicked
{
    NSLog(@"hello");
} 
```

它编译得很好，我可以在模拟器中运行它，但是当我点击导航栏中的按钮时，而不是记录“你好”，我得到：

![在此处输入图像描述](https://i.stack.imgur.com/LQtUU.png)

任何想法如何解决它？我已经没有想法了。我正在使用最新的 XCode。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T12:22:03.620

尝试删除`:`目标操作中的 ：

```
UIBarButtonItem *myButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemRefresh target:self action:@selector(buttonClicked)]; 
```

如果你想使用冒号定义你的方法是这样的：

```
- (void)buttonClicked:(id)sender
{
    NSLog(@"hello");
} 
```

# python - 使用python将图像转换为矩阵

> ID：15862153
> 
> 赞同：1
> 
> 时间：2013-04-07T12:03:16.987
> 
> 标签：python, numpy, image-processing

我需要访问文件夹中的所有图像并将其存储在矩阵中。我能够使用matlab做到这一点，这是代码：

```
input_dir = 'C:\Users\Karim\Downloads\att_faces\New Folder';
image_dims = [112, 92];

filenames = dir(fullfile(input_dir, '*.pgm'));
num_images = numel(filenames);

images = [];
for n = 1:num_images
    filename = fullfile(input_dir, filenames(n).name);
    img = imread(filename);
    img = imresize(img,image_dims);   
end 
```

但我需要使用 python 来完成，这是我的 python 代码：

```
import Image
import os
from PIL import Image
from numpy import *
import numpy as np

#import images
dirname = "C:\\Users\\Karim\\Downloads\\att_faces\\New folder"

#get number of images and dimentions
path, dirs, files = os.walk(dirname).next()
num_images = len(files)
image_file = "C:\\Users\\Karim\\Downloads\\att_faces\\New folder\\2.pgm"
im = Image.open(image_file)
width, height = im.size

images = []

for x in xrange(1, num_images):
    filename = os.listdir(dirname)[x]
    img = Image.open(filename)
    img = im.convert('L')
    images[:, x] = img[:] 
```

但我收到此错误：IOError: [Errno 2] No such file or directory: '10.pgm' 尽管该文件存在。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T20:43:46.587

我不太确定你的最终目标是什么，但试试更像这样的东西：

```
import numpy as np
import Image
import glob

filenames = glob.glob('/path/to/your/files/*.pgm')
images = [Image.open(fn).convert('L') for fn in filenames]
data = np.dstack([np.array(im) for im in images]) 
```

这将产生一个宽度 x 高度 x num_images numpy 数组，假设所有图像都具有相同的尺寸。

但是，您的图像将未排序，因此您可能想要这样做`filenames.sort()`。

此外，您可能想要也可能不想要 3D numpy 数组，但这完全取决于您实际在做什么。如果您只想单独操作每个“帧”，那么不要费心将它们堆叠成一个巨大的数组。

# javascript - Web Audio API Gain 节点包络生成器

> ID：15862155
> 
> 赞同：1
> 
> 时间：2013-04-07T12:03:24.750
> 
> 标签：javascript, html, web-audio-api

我试图使用 gainNode 上的自动化为我的振荡器制作一个包络发生器，并且我希望能够在事件发生时触发包络（在这种情况下是单击按钮）。

但它似乎只在我第一次点击时才起作用。 [http://jsfiddle.net/ehsanziya/T9mV2/](http://jsfiddle.net/ehsanziya/T9mV2/)

```
var context = new webkitAudioContext();
var osc = context.createOscillator();
var gain = context.createGainNode();
var now = context.currentTime;

osc.frequency.value = 100;
osc.type = "sine";
osc.connect(gain);
osc.noteOn(0);

gain.connect(context.destination);
gain.gain.value = 0;

var trigger = document.getElementById('play');

trigger.addEventListener('click', function(){
  gain.gain.setValueAtTime(gain.gain.value, now);
  gain.gain.linearRampToValueAtTime( 1.0, now + 2.0 );
  gain.gain.linearRampToValueAtTime ( 0.0, now + 4.0 );
}); 
```

为什么会这样？创建可由事件触发的包络生成器的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T05:36:33.593

只需在单击事件侦听器中移动检索 context.currentTime 的行。

```
trigger.addEventListener('click', function(){
  var now = context.currentTime;
  ... 
```

currentTime 属性公开音频时钟，因此实时更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T15:17:09.403

找到了解决方案。但是鉴于振荡器始终处于开启状态，应该有一种方法可以在每次触发振荡器时重置其相位（Phase Bashing）。

```
$(document).ready(function(){

var context = new webkitAudioContext();
var osc = context.createOscillator();
var gain = context.createGain();

osc.connect(gain);
gain.connect(context.destination);
osc.start(0);

gain.gain.value = 0;

var oscStart = function(){
var now = context.currentTime;
gain.gain.cancelScheduledValues( now );
gain.gain.setValueAtTime(gain.gain.value, now);
gain.gain.linearRampToValueAtTime(1 , now + 0.2);
};

var oscOff = function(){
var now = context.currentTime;
gain.gain.cancelScheduledValues( now );
gain.gain.setValueAtTime(gain.gain.value, now);
gain.gain.linearRampToValueAtTime(0 , now + 0.2);

};

$('#button').hover(oscStart , oscOff);

}); 
```

[http://jsfiddle.net/ehsanziya/JJqNU/](http://jsfiddle.net/ehsanziya/JJqNU/)

# search - 使用批处理文件搜索文件中是否存在特定文本（字符串组）

> ID：15862156
> 
> 赞同：0
> 
> 时间：2013-04-07T12:03:25.053
> 
> 标签：search, text, batch-file

我正在使用批处理文件搜索特定文本（字符串组）是否存在于文件中。这是我写的，但它不适用于文本。它只适用于字符串（不搜索文本）。

```
rem %1 is name of the file whose text is being found
FindStr /C:%2 %1 
If %ERRORLEVEL% EQU 0 echo text %2 is Present
If %ERRORLEVEL% EQU 1 echo text %2 is not Present 
```

例如，如果必须将文本“我吃早餐”搜索到包含“我每天吃早餐”的文件中，命令 echo 必须打印这个：“文本我吃早餐存在”。

任何帮助！请。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T13:23:51.630

如果您调用脚本，这应该可以工作`script.bat "file name" "search string"`：

```
@echo off&setlocal
rem %1 is name of the file whose text is being found
FindStr /C:"%~2" "%~1" >nul
If %ERRORLEVEL% EQU 0 echo text %2 is Present
If %ERRORLEVEL% EQU 1 echo text %2 is not Present 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T14:29:39.793

您可以执行以下操作：

```
FindStr /C:"%~2" "%~1" >nul && echo text "I have breakfast is present". 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T12:24:47.157

该文件完美运行。

您需要查找文本的命令行是

```
yourbatch yourtextfile.txt "I have breakfast" 
```

如果你执行

```
yourbatch yourtextfile.txt I have breakfast 
```

那么它会简单地搜索，`I`因为 SPACE 是一个分隔符，并且为了搜索以空格分隔的字符串，您需要`"`引用该字符串`"`

就此而言，如果您的文件名包含空格，则与文件名相同。

```
yourbatch "your text file.txt" "I have breakfast"

%%1 is "your text file.txt" 
%%2 is "I have breakfast" 
```

包括引号。

要删除引号，如果需要，可以使用 %~2

所以 - 你可以`ECHO`

```
ECHO with quotes:%2 and without: %~2 
```

另外：小心

```
If %ERRORLEVEL% EQU 0 echo text %2 is Present
If %ERRORLEVEL% EQU 1 echo text %2 is not Present 
```

`ECHO`是少数几个不变的命令之一`errorlevel`。许多人会改变它，例如，如果你要写

如果 %ERRORLEVEL% EQU 0 回显 Y|find "x" >nul 如果 %ERRORLEVEL% EQU 1 回显文本 %2 不存在

然后如果`echo Y|find "x" >nul`因为`errorlevel`上一步的值为 0 而找到了，那么因为`echo Y|find "x" >nul`将 errorlevel 设置为 1，第二行也将被执行。

# java - 正则表达式：Java：匹配两个空格之间的单词

> ID：15862159
> 
> 赞同：0
> 
> 时间：2013-04-07T12:03:43.493
> 
> 标签：java, regex, split

如何使用正则表达式从以下字符串中提取“id”。

```
string = 11,"col=""book"" id=""title"" length=""10"" 
```

我需要能够提取“id”标头以及值“title”。

结果：id=""title""

我正在尝试使用带有正则表达式的 split 函数从字符串中提取标识符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T12:11:10.247

试试这个：

```
String result = "col=\"book\" id=\"title\" length=\"10\"";
String pattern = ".*(id\\s*=\\s*\"[^\"]*\").*";
System.out.println(result.replaceAll(pattern,"$1")); 
```

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T12:13:31.867

使用 Pattern 和 Matcher 类来查找您要查找的内容。尝试找到这些正则表达式`\\bid=[^ ]*`。

```
String data = "string = 11,\"col=\"\"book\"\" id=\"\"title\"\" length=\"\"10\"\"";
Matcher m = Pattern.compile("\\bid=[^ ]*").matcher(data);
if (m.find())
    System.out.println(m.group()); 
```

# javascript - 优先一个类如果html div有两个类

> ID：15862167
> 
> 赞同：0
> 
> 时间：2013-04-07T12:05:38.240
> 
> 标签：javascript, html, css

```
html+='<div class="CardBack jewels" id="deck1"></div>' 
```

从这个 html div 我想显示 CardBack 类。但它显示了珠宝类。我如何显示 CardBack 类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T12:06:35.847

如果您有竞争课程，以下两种方式将是您的最佳选择：

小提琴示例：

[http://jsfiddle.net/qhvLJ/1/](http://jsfiddle.net/qhvLJ/1/)

1.  样式表中的第二个样式将优先
2.  使用 !important

    ```
    .CardBack{
        color: red !important
    }

    .jewels{
         color: blue;
    } 
    ```

有关更多信息，请参阅[此链接](http://www.quora.com/In-what-order-do-CSS-definitions-take-priority)：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T12:15:07.567

使用 CardBack 两次 [JSFIDDLE](http://jsfiddle.net/aBKvg/)

```
html+='<div class="CardBack jewels" id="deck1"></div>'

.CardBack.CardBack {

}

.jewels{

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T12:24:59.683

添加类名两次，如：

`.CardBack.CardBack { //all the stylesin here for CardBack class }`

希望能帮助到你！:)

# api - 未找到 PayPal 自适应支付的沙箱页面

> ID：15862171
> 
> 赞同：0
> 
> 时间：2013-04-07T12:06:02.800
> 
> 标签：api, paypal, http-status-code-404, sandbox

我已经使用我的 API 类几个月了，没有任何问题，但是沙盒页面突然停止工作。

我尝试访问的付款链接是：[https](https://www.sandbox.paypal.com/webapps/adaptivepayment/flow/pay?paykey=AP-XXXXXXXXXXXXXXX) ://www.sandbox.paypal.com/webapps/adaptivepayment/flow/pay?paykey=AP-XXXXXXXXXXXXXXX ，但是我在页面上收到 404 错误。

> HTTP 状态 404 -
> 
> 类型状态报告
> 
> 信息
> 
> 描述 请求的资源 () 不可用。

最近更新后，他们是否对链接结构进行了任何修改？我已经完成了我的研究，但找不到任何东西，任何指导都非常受欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T20:30:32.903

错误是否仍然存在？访问 -XXXX 链接，我得到“此交易无效。请返回收款人网站重试。”

# methodology - 单个程序员的软件开发方法

> ID：15862173
> 
> 赞同：-1
> 
> 时间：2013-04-07T12:06:13.760
> 
> 标签：methodology

我一直试图找到一个我认为是基本问题的答案。

哪些软件开发方法与单个程序员相关。

我唯一能找到的是RAD。

当我研究过敏捷等其他方法时，它们需要一个团队。

是否有人能指出我正确的方向。

我只是在寻找单个程序员可以做的任何方法，这样我就不会浪费更多的时间来寻找答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T12:34:06.313

像敏捷这样的开发方法几乎可以在任何情况下应用，包括“单独”。您只需要充分利用它并将其应用于您的需求。

例如，作为一个程序员，您可以为您的用户故事创建一个产品待办列表，您可以为他们提供故事点、计划您的 sprint、找到您的速度等。最后，您将更有条理，您将改进您的计划技能肯定。嘿，我不是说你必须每天与自己举行站立会议！:)

这适用于所有开发方法/流程（RAD、DDD、TDD、...）不要忘记它们只是做事的方式。

# java - 添加 scrollPaneStyel 后，Libgdx scrollPane 不滚动

> ID：15862180
> 
> 赞同：3
> 
> 时间：2013-04-07T12:07:00.327
> 
> 标签：java, scroll, libgdx, scrollpane

当我添加 ScrollPaneStyle 时，我的 scrollPane 没有滚动，有人知道为什么会这样吗？

```
scroller = new ScrollPane( myWidget , skin);
        scroller.setBounds(0, 0, Gdx.graphics.getWidth(), Gdx.graphics.getHeight());
        this.addActor(scroller);
        scroller.setLayoutEnabled( true );
        scroller.setCancelTouchFocus( true );
        ScrollPaneStyle paneStyle = new ScrollPaneStyle();
        Texture tex = new Texture(Gdx.files.internal(filepath + "page.png"));
        tex.setWrap(Texture.TextureWrap.Repeat, Texture.TextureWrap.ClampToEdge);
        paneStyle.background = new SpriteDrawable( new Sprite(tex));

        scroller.setScrollbarsOnTop(true);
        scroller.setStyle(paneStyle); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-02-27T21:51:38.977

`stage.act();`您必须在绘制舞台后添加到渲染。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-28T08:25:40.527

初始化滚动窗格后，您应该先调用它

```
mScrollPane.layout(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-03T09:57:11.413

我遇到了和你一样的问题。

当我将滚动面板添加到表格时，它可以像我预期的那样滚动。

```
ScrollPane pane2 = new ScrollPane(mytable, style);
style.background = new TextureRegionDrawable(scrollAtalas.findRegion("default-rect"));
pane2.setScrollingDisabled(false, true);
pane2.setSize(w, h);
final Table table = new Table();
table.setFillParent(true);
table.add(pane2).fill();

stage.addActor(table); 
```

您也可以参考[libgdx test](https://github.com/libgdx/libgdx/blob/master/tests/gdx-tests/src/com/badlogic/gdx/tests/ScrollPaneTest.java)中的测试代码。

# javascript - winjs.xhr 无效请求

> ID：15862186
> 
> 赞同：0
> 
> 时间：2013-04-07T12:07:45.167
> 
> 标签：javascript, windows-8, winjs

我试图让用户创建自己的 rss 聚合器，它工作正常，但我的问题是当用户输入的东西对于例如数字无效时，它给了我 "req.send(options.data)" ，并且WINJS功能被阻塞，无效时无法修改请求，谢谢。

```
 for (var vv = 0; vv < urll.length; vv++) {

    var Input = { title: [], des: [], link: [], len: "" };

    WinJS.xhr({ url: urll[vv] }).done

        (function (rss) {

                     var items = rss.responseXML.querySelectorAll("item");

                      Input.len = items.length;
                      for (var n = 0; n < items.length; n++) {
                          Input.title[n] = items[n].querySelector("title").textContent;
                          Input.des[n] = items[n].querySelector("description").textContent;
                          Input.link[n] = items[n].querySelector("link").textContent;
                          if ((Input.link[n] == null) || (Input.link[n] == "")) {
                              Input.link[n] = items[n].querySelector("guid").textContent;
                          }
                      }

                 });
                 if (vv >= 1 && DataInput[DataInput.length - 1].title.length < 2) { DataInput.length = DataInput.length - 1 }
                 DataInput.push(Input);

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T04:48:16.543

不要使用 done，而是尝试使用 .then 并提供一个处理函数，以防 xhr 请求出错：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh700337.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh700337.aspx)

# c# - 计算一个值在数组中出现的次数

> ID：15862191
> 
> 赞同：1
> 
> 时间：2013-04-07T12:08:17.907
> 
> 标签：c#, arrays, loops, counter

那么在 C# 中创建一个循环的一个好的、简单的算法是什么，每次某个值出现在一个数组中时，它会将 1 加到另一个数组中的计数器上？

例如我有这个：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication22
{
    class Program
    {
        const int SIZE = 12;

        static void Main(string[] args)
        {
            int[] numbers = new int[SIZE] {5, 5, 5, 7, 7, 7, 9, 7, 9, 9, 9, 1};
           string[] letters = new string[SIZE] { "m", "m", "s", "m", "s", "s", "s", "m", "s", "s", "s", "s" };
            int[] values = new int[SIZE] {15, 22, 67, 45, 12, 21, 24, 51, 90, 60, 50, 44};
            string[] status = new string[SIZE] { "f", "m", "f", "a", "m", "f", "f", "f", "m", "f", "m", "f" };

            int[] Count = new int[4];
            int x = 0;
            int i = 0;

            for (i = 0; i < SIZE - 1; i++)
            {
                if (numbers[i] > 0 && numbers[i] < SIZE)
                {
                    x = Count[i];
                    Count[x]++;
                }
            }

            for (i = 0; i < 4; i++)
            {
                Console.WriteLine("{0}", Count[4]);
            }
        }
    }
} 
```

我只计算 4 个数字出现在 numbers 数组中的次数。有人建议我在第一个循环中使用该方法，但它似乎不起作用，并创建一个索引超出数组范围的错误。我想显示每个数字（5、7,9 和 1）出现在 4 行中的次数。

编辑：不使用 LINQ 或任何其他花哨的东西，如 Dictionary 或其他任何东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-07T12:16:18.180

由于本节，您会遇到索引越界错误：

```
for (i = 0; i < SIZE - 1; i++)
{
    if (numbers[i] > 0 && numbers[i] < SIZE)
    {
        x = Count[i]; 
```

请注意`0`，当只有.`SIZE - 1``11``Count``4`

* * *

不过，您可以使用 LINQ 轻松完成此任务。

```
int[] numbers = new int[SIZE] { 5, 5, 5, 7, 7, 7, 9, 7, 9, 9, 9, 1 };

var count = numbers
    .GroupBy(e => e)
    .Where(e => e.Count() == 4)
    .Select(e => e.First()); 
```

所以它按它们的值对数字进行分组，然后我们将列表细化为仅包含 4 个组，然后选择每个组中的第一个以留下`int`s 的集合。

* * *

这是一个基于非 LINQ 的解决方案，它使用 Dictionary 来存储数字计数。

```
int[] numbers = new int[SIZE] { 5, 5, 5, 7, 7, 7, 9, 7, 9, 9, 9, 1 };
var dictionary = new Dictionary<int, int>();
var numbersWithFour = new List<int>();

foreach (var number in numbers)
{
    if (dictionary.ContainsKey(number))
        dictionary[number]++;
    else
        dictionary.Add(number, 1);
}

foreach (var val in dictionary)
{
    if (val.Value == 4)
    {
        numbersWithFour.Add(val.Key);
    }
} 
```

* * *

对您的程序稍作修改，您可以获得一些结果。

```
int[] numbers = new int[SIZE] { 5, 5, 5, 7, 7, 7, 9, 7, 9, 9, 9, 1 };
string[] letters = new string[SIZE] { "m", "m", "s", "m", "s", "s", "s", "m", "s", "s", "s", "s" };
int[] values = new int[SIZE] { 15, 22, 67, 45, 12, 21, 24, 51, 90, 60, 50, 44 };
string[] status = new string[SIZE] { "f", "m", "f", "a", "m", "f", "f", "f", "m", "f", "m", "f" };

// Set the size of Count to maximum value in numbers + 1
int[] Count = new int[9 + 1];
int x = 0;
int i = 0;

for (i = 0; i < SIZE - 1; i++)
{
    if (numbers[i] > 0 && numbers[i] < SIZE)
    {
        // Use value from numbers as the index for Count and increment the count
        Count[numbers[i]]++;
    }
}

for (i = 0; i < Count.Length; i++)
{
    // Check all values in Count, printing the ones where the count is 4
    if (Count[i] == 4)
        Console.WriteLine("{0}", i);
} 
```

输出：

```
7
9 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-07T12:12:13.577

用来`LINQ`做工作

```
using System.Linq;

var numQuery =
        from num in numbers
        where num == 5
        select num;

Console.WriteLine("Count of 5: " + numQuery.Count); 
```

或使用`method syntax`

```
var numQuery = numbers.Where(num => num == 5);
Console.WriteLine("Count of 5: " + numQuery.Count); 
```

有关概述，请参见[此处](http://msdn.microsoft.com/en-us/library/vstudio/bb397906.aspx)，有关-syntax ，请参见[此处。](http://msdn.microsoft.com/en-us/library/vstudio/bb397947.aspx) 找到一个样品，看[这里](http://www.formatexception.com/2009/03/linq-group-by-and-groupby/)。`query vs method`
`GroupBy`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-09T15:48:25.170

我使用正则表达式作为我的解决方案，因为我只有三个值。

```
String results = "" + one.ToString() + " " + two.ToString() + " " + three.ToString();
int count1 = Regex.Matches(results, @one.ToString()).Count;
int count2 = Regex.Matches(results, @two.ToString()).Count;
int count3 = Regex.Matches(results, @three.ToString()).Count; 
```

似乎'hacky'，但对我有用。它适用于字符串或数字，但前提是您使用一些值。在这种情况下非常有效。如果没有，我认为其他答案将是更好的选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T12:13:50.940

您的计数数组有 4 个字段...

索引为 0、1、2 和 3 的一个

那么如果碰巧计算出像 4（或更大）这样的数字会发生什么？你的代码试图访问索引 4 ......它不存在......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-13T15:51:15.513

这是寻找“计算一个值在数组中出现的次数”的简单解决方案想法：在数组解决方案中构建一个哈希映射：

```
using System.Collections.Generic;
using System.Text;

namespace GetArrEleFrequency
{
    class Program
    {
      static int[] Arr = new int[5] { 3, 3, 0, 2, 0 };
      static int[] Key = new int[5];
      static int[] value = new int[5];
      static void Main(string[] args)
      {
         int keyItr = -1, ValueItr = -1, tempIndex = 0, tempValue = 0;
         for (int i=0; i <= Arr.Length-1;i++) {
              if (!(isPresent(Arr[i]))) {
                   keyItr += 1;ValueItr += 1;
                   Key[keyItr] = Arr[i];
                   value[ValueItr] = 1;
             } else {

                   value[tempIndex] = value[getIndex(Arr[i])] + 1;
            }
        }
        for (int i=0;i<=Key.Length-1;i++) {
              Console.WriteLine(Key[i] + "-" + value[i]);
        }
        Console.ReadKey();
     }
     public static Boolean  isPresent(int num) {
      Boolean temp = false;
      for (int i=0; i <= Key.Length-1;i++) {
        if (Key[i] == num) {
              temp = true;
              break;
        } else {
              temp = false;
        }
     }
     return temp;
   }
   public static int getIndex(int num) {
       int temp = 0;
       for (int i=0;i<=Key.Length-1;i++) {
             if (Key[i] == num) {
               break;
             } else {
             temp += 1;
       }
  }
  return temp;
   }
 }
}

Output :

    3 - 2
    0 - 2
    2 - 1
    0 - 0
    0 - 0 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-12T14:47:59.150

```
 static void Main(string[] args)
        {
            int[] arr = new int[] { 45, 34, 23, 67, 10, 99,99,10 };
            foreach(int i in arr.Distinct())
            {
                int count = occurance(arr,i);
                Console.WriteLine(i + "-Occurred For :" + count);
            }

            Console.ReadLine();
        }
        public static int occurance(int[] arr,int x)
        {
            int count = 0;
            foreach(int num in arr)
            {
                if(x==num)
                {
                    count++;
                }
            }
            return count;
        }
    } 
```

# android - 使用 Android OpenCV SDK 进行 SURF 特征提取 - 出现一些错误

> ID：15862200
> 
> 赞同：3
> 
> 时间：2013-04-07T12:09:31.300
> 
> 标签：android, opencv, fatal-error, surf

我正在尝试在我的项目中实现关于人脸识别的 SURF 功能。我是 android 上的 opencv 新手。所以很难找到逻辑错误。我也尝试从谷歌搜索，但我无法修复。我导入了 libray org.opencv.features2d 来处理功能问题。

一开始这是我的SURF实现代码（一部分）。

```
 public void SURFExtraction()
{
    FeatureDetector detector = FeatureDetector.create(FeatureDetector.SURF);
    DescriptorExtractor SurfExtractor = DescriptorExtractor.create(DescriptorExtractor.SURF);

     Mat img1 = Highgui.imread("/mnt/sdcard/FaceDB/1.jpg");//one of my face
     Mat img2 = Highgui.imread("/mnt/sdcard/FaceDB/2.jpg");//one of my different face

    //extract keypoints
    MatOfKeyPoint keypoints = new MatOfKeyPoint();
    MatOfKeyPoint logoKeypoints = new MatOfKeyPoint();

     detector.detect(img1, keypoints);//this is the problem "fatal signal"
     Log.d("LOG!", "number of query Keypoints= " + keypoints.size());
     detector.detect(img2, logoKeypoints);
     Log.d("LOG!", "number of logo Keypoints= " + logoKeypoints.size());

} 
```

当我执行程序时，它给出了一个错误。只是这个。

```
 A/libc(30444): Fatal signal 11 (SIGSEGV) at 0x00000000 (code=1) 
```

我搜索了这个错误。他们说当本机类尝试到达或写入 0x00000000 内存地址时会发生此错误。但我不知道如何解决这个问题。你能告诉我我能做什么吗？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T13:17:59.843

行！SURF 功能现在根据[此线程](http://answers.opencv.org/question/445/242-android-missing-nonfree-package/?answer=449#post-id-449)获得专利。所以我认为这个问题的错误。谁曾尝试提取 SURF 特征，您可以继续使用 ORB 特征，除非匹配特征，否则在[此线程中该特征可以正常工作。](https://stackoverflow.com/questions/15544158/error-matching-with-orb-in-android)我希望这将有助于搜索 android SURF 特征提取。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-24T16:49:54.460

SURF 不包含在 OpenCV Android 的分发包中。要使用它，您需要编译非自由模块并在您的项目中使用它。因此，您需要做的是创建一个 NDK 项目，将非自由模块编译为独立库。然后使用这个库来编译你的程序。然后你应该能够构建你的应用程序。你可以参考这个[教程](https://sites.google.com/site/wghsite/technical-notes/sift_surf_opencv_android)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-07T11:49:53.747

下载旧版本，即 4.2.1 或 4.2.0 的 opencv 并将其用于您的项目

# c++ - Windows API 中逻辑坐标和设备坐标之间的混淆

> ID：15862205
> 
> 赞同：10
> 
> 时间：2013-04-07T12:10:04.460
> 
> 标签：c++, visual-c++, mfc, coordinates, gdi

我一直在研究一个 Visual Studio C++ Windows 应用程序项目，它使用了两个函数`SetWindowExt (...)`和`SetViewportExt (...)`. 我对这两个功能的作用以及为什么它们是必要的感到困惑。搜索这些函数，我想到了逻辑坐标和设备坐标的概念。

谁能解释一下这两个概念的重要性？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-07T12:35:37.023

**设备坐标**是最容易理解的。它们与您正在使用的设备直接相关，例如屏幕或打印机。

例如，让我们看一下屏幕上显示的窗口。设备坐标是相对于特定设备定义的，因此在窗口的情况下，一切都将在客户端坐标中。这意味着原点将是窗口客户区的左上角，y 轴将从上到下运行。所有单位都以像素为单位，因为这是一个屏幕元素。

你一直在使用这些，所以你可能已经比你想象的更了解它们了。例如，每当您处理鼠标事件或调整窗口大小时，您都会获取和设置设备坐标。

**逻辑坐标**考虑了当前的映射模式。每个设备上下文 (DC) 都可以应用一个映射模式 (`GetMapMode`和`SetMapMode`)。各种可用的映射模式由`MM_Xxx`值定义。这些不同的映射模式中的每一种都会导致原点和 y 轴方向的解释不同。[该文档](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145045.aspx)将准确地告诉您它们是如何工作的。

当您操作设备上下文（例如，在其上绘制）时，会考虑当前映射模式，因此您可以使用逻辑坐标。

使用默认`MM_TEXT`映射模式，每个逻辑单元映射到一个设备单元（请记住，对于一个窗口，这将是一个像素），因此不需要转换。在这种映射模式下，逻辑坐标系和设备坐标系的工作方式完全相同。而且由于这是默认设置，并且可能是您大部分时间使用的默认设置，因此它可能是您感到困惑的根源。

**相关阅读：** [坐标空间和变换](http://msdn.microsoft.com/en-us/library/dd183475.aspx)（MSDN）

# android - ListView 应用程序中的 EditText 崩溃

> ID：15862206
> 
> 赞同：1
> 
> 时间：2013-04-07T12:10:13.720
> 
> 标签：android, android-listview, android-edittext

我在同一活动上有 2 个 listView，其中每行都有一个 EditText。

> 第一个问题：每当我尝试在一行的 EditText 中写一些东西时，文本要么不显示，要么以一种奇怪的语言出现。
> 
> 第二：当我写完“这不起作用”时，如果我按下后退按钮，那么键盘就会消失，应用程序就会崩溃。

另一方面，如果我按下 EditText 以便键盘出现并按下而不写任何东西它工作正常..

谢谢。

自定义适配器

```
 public View getView(final int position, View convertView, ViewGroup parent) {
        System.out.println("getView " + position + " " + convertView);
        final OrderHolder holder;

        if (convertView == null) {
            mInflater = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);

            convertView = mInflater.inflate(l, null);

            holder  = new OrderHolder();

            holder.id = (TextView)convertView.findViewById(R.id.oid);
            holder.name = (TextView)convertView.findViewById(R.id.oname);
            holder.price = (TextView)convertView.findViewById(R.id.oprice);
            holder.btn = (Button) convertView.findViewById(R.id.oorder);
            holder.quantity = (TextView) convertView.findViewById(R.id.quantity);
            holder.customise = (EditText) convertView.findViewById(R.id.customize);

            convertView.setTag(holder);
        }

        else {
            holder = (OrderHolder)convertView.getTag();

        }

        holder.id.setText(getId(getItem(position)));
        holder.name.setText(getName(getItem(position)));
        holder.price.setText("£ " + getPrice(getItem(position)));
        holder.customise.setText("");

        if(pos.containsKey(position))
        {
            holder.customise.setText(pos.get(position));                 

        }

                holder.quantity.setVisibility(View.VISIBLE);

            holder.btn.setOnClickListener(new View.OnClickListener(){
                 public void onClick(View v) {

                  HashMap<String, String> map = getItem(position);

              if(v.getId() == R.id.order)
             {

                  if ( orderList.contains(getItem(position)) ){
                      System.out.println("item :" +getItem(position));
                      //holder.quantity.setText("q");
                      int foo = Integer.parseInt(map.get(TAG_QUANTITY).toString());

                      map.put(TAG_QUANTITY, "" + (foo-1));
                      if((foo-1)==0)
                      {
                          orderList.remove(getItem(position));
                      }

                  }

                  ((MyOrderAdapter)  list1.getAdapter()).notifyDataSetChanged();
                  ((MyOrderAdapter)  list11.getAdapter()).notifyDataSetChanged();

                          Float fo = Float.parseFloat(map.get(TAG_PRICE).toString());
                          Float total = Float.parseFloat(t.getText().toString());

                          //System.out.println("heeeeeeeeeeeeeere :" +fo);
                          t.setText(""+ String.format("%.2f", (total-fo)));
                  }
            }
          });
            holder.btn.setOnLongClickListener(new View.OnLongClickListener() {

                @Override
                public boolean onLongClick(View v) {
                      Float fo = Float.parseFloat((getItem(position).get(TAG_PRICE)).toString());
                      Float Quant = Float.parseFloat((getItem(position).get(TAG_QUANTITY)).toString());
                      Float total = Float.parseFloat(t.getText().toString());
                      //System.out.println("heeeeeeeeeeeeeere :" +fo);
                      orderList.remove(getItem(position));
                      t.setText(""+ String.format("%.2f", (total-(fo*Quant))));
                      ((MyOrderAdapter) list1.getAdapter()).notifyDataSetChanged();
                      ((MyOrderAdapter) list11.getAdapter()).notifyDataSetChanged();
                    return false;
                }
            });

        holder.quantity.setText(getQuant(getItem(position)));
        return convertView;
    } 
```

LOGCAT

```
04-07 13:16:24.126: I/Editor(16815): setup window support handles
04-07 13:16:24.126: I/Editor(16815): setup window support handles
04-07 11:52:33.618: E/AndroidRuntime(16268): FATAL EXCEPTION: main
04-07 11:52:33.618: E/AndroidRuntime(16268): java.lang.IndexOutOfBoundsException
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.graphics.Paint.getTextRunAdvances(Paint.java:1832)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.graphics.Paint.getTextRunAdvances(Paint.java:1809)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.text.TextLine.handleText(TextLine.java:759)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.text.TextLine.handleRun(TextLine.java:910)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.text.TextLine.measureRun(TextLine.java:414)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.text.TextLine.measure(TextLine.java:293)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.text.TextLine.metrics(TextLine.java:267)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.text.Layout.getLineExtent(Layout.java:952)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.text.Layout.getLineWidth(Layout.java:918)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.widget.TextView.desired(TextView.java:6191)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.widget.TextView.onMeasure(TextView.java:6257)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.view.View.measure(View.java:15479)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4824)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1396)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.widget.TableRow.measureChildBeforeLayout(TableRow.java:247)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.widget.LinearLayout.measureHorizontal(LinearLayout.java:1038)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.widget.TableRow.onMeasure(TableRow.java:114)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.view.View.measure(View.java:15479)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4824)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1396)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:681)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:574)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.view.View.measure(View.java:15479)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.widget.ListView.setupChild(ListView.java:1847)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.widget.ListView.makeAndAddView(ListView.java:1762)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.widget.ListView.fillSpecific(ListView.java:1318)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.widget.ListView.layoutChildren(ListView.java:1633)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.widget.AbsListView.onLayout(AbsListView.java:2296)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.view.View.layout(View.java:14061)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.view.ViewGroup.layout(ViewGroup.java:4372)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1655)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.widget.LinearLayout.layoutHorizontal(LinearLayout.java:1644)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.widget.TableRow.onLayout(TableRow.java:123)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.view.View.layout(View.java:14061)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.view.ViewGroup.layout(ViewGroup.java:4372)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1655)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1513)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.widget.LinearLayout.onLayout(LinearLayout.java:1426)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.view.View.layout(View.java:14061)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.view.ViewGroup.layout(ViewGroup.java:4372)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.widget.FrameLayout.onLayout(FrameLayout.java:448)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.view.View.layout(View.java:14061)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.view.ViewGroup.layout(ViewGroup.java:4372)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1655)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1513)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.widget.LinearLayout.onLayout(LinearLayout.java:1426)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.view.View.layout(View.java:14061)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.view.ViewGroup.layout(ViewGroup.java:4372)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.widget.FrameLayout.onLayout(FrameLayout.java:448)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.view.View.layout(View.java:14061)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.view.ViewGroup.layout(ViewGroup.java:4372)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.widget.FrameLayout.onLayout(FrameLayout.java:448)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.view.View.layout(View.java:14061)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.view.ViewGroup.layout(ViewGroup.java:4372)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1655)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1513)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.widget.LinearLayout.onLayout(LinearLayout.java:1426)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.view.View.layout(View.java:14061)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.view.ViewGroup.layout(ViewGroup.java:4372)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.widget.FrameLayout.onLayout(FrameLayout.java:448)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.view.View.layout(View.java:14061)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.view.ViewGroup.layout(ViewGroup.java:4372)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.view.ViewRootImpl.performLayout(ViewRootImpl.java:1984)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1805)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:1105)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4462)
04-07 11:52:33.618: E/AndroidRuntime(16268):    at android.view.Choreograph 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T12:49:11.200

您是否在 SDK 级别 16 上运行？[可能与这个问题有关](https://stackoverflow.com/questions/12849676/i-cant-figure-the-issue-with-a-stacktrace-error)。

还要确保您不会意外地将资源 ID 提供到 TextView 中`setText()`：

```
holder.id.setText(getId(getItem(position))); 
```

在没有看到您的代码的情况下，`getId()`可能会返回一个 int，而您可能希望将其结果指定为字符串：

```
holder.id.setText(String.valueOf(getId(getItem(position)))); 
```

# xcode4 - 怎么解决？“发生意外错误。请重试。”？

> ID：15862213
> 
> 赞同：0
> 
> 时间：2013-04-07T12:11:40.993
> 
> 标签：xcode4

我去组织者。我按

设备

然后我从开发者门户转到编辑器并刷新。

我收到了这个错误：

```
An unexpected error occurred. Please try again.  If the problem persists, please contact Apple Developer Program Support. 
```

所以我从我的钥匙串中删除了所有证书或任何与 xcode 相关的东西。我从苹果开发者中心删除了所有证书。同样的问题。

然后我再做一次。

首先 xcode 说没有证书。想做一个。当然。

确实创建了证书。

然后我收到了这条消息`An unexpected error occurred. Please try again. If the problem persists, please contact Apple Developer Program Support.`

看来我需要一些代码签名身份。但是如何做到这一点，它在哪里？它在 iTunes Connect 或 Apple 开发者计划支持中不可用。

我以为我的证书就是我的身份。

已经有一个类似的问题。它说要在 Apple 开发者中心和 xcode 中删除。我这样做了。它不起作用。

有时我会收到一条消息，我是否要使用 Looks like some key is wrong 签名。但是什么？

当我尝试运行一个程序时，我得到了：

(null)：应用程序未通过协同设计验证。签名无效，包含不允许的权利，或者未使用 iPhone 分发证书签名。(-19011)

当我去组织者并提交我的申请以创建该分发证书时，我没有可用于签名的身份。

所以我下载了身份。然后我在尝试下载时出错。请再试一次。

还有一个选项说

导入开发者资料。我想我必须重新创建这个所谓的开发人员资料。它是什么？如何？

据此，在我创建第一个证书后，系统会询问我是否要创建开发人员资料。

那永远不会发生。我刚刚再次收到“发生意外错误”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-14T06:01:52.817

使用 xcode 5，我通过在首选项 - 帐户中刷新我的配置文件来解决这个问题。

希望这对你有用。

# android - Android动画白补丁

> ID：15862215
> 
> 赞同：-4
> 
> 时间：2013-04-07T12:11:50.100
> 
> 标签：android, android-animation

Android Activity 的顶部和底部都有一个白色补丁，在动画期间可见。如何删除它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T12:44:53.540

您可能看到的是在您的活动膨胀重叠组件之前活动的背景；在布局膨胀之前无法绘制那些。

您可以考虑调整窗口的背景以更好地反映其内容，如[Cyril Mottier 的这篇富有洞察力的文章中所述](http://cyrilmottier.com/2013/01/23/android-app-launching-made-gorgeous/)。

# visual-studio - VS Express 2012 for Windows Phone 中没有“构建操作”选项

> ID：15862217
> 
> 赞同：2
> 
> 时间：2013-04-07T12:11:52.717
> 
> 标签：visual-studio, cordova, visual-studio-2012

我已经向我的项目添加了一个图像文件，除非我将其“构建操作”设置为“内容”，否则该文件不会显示，这通常可以在 Visual Studio 的文件属性窗口中完成。但是，对我来说没有这样的选择。有谁知道该怎么做？

如果它有任何相关性，我正在使用 Phonegap 模板。

非常感谢

# iphone - 我想用一个按钮将所有内容保存在 UITableView 控制器中

> ID：15862220
> 
> 赞同：0
> 
> 时间：2013-04-07T12:12:07.293
> 
> 标签：iphone, ios, objective-c, xcode, uitableview

我想用一个按钮将所有内容保存在 UITableView 控制器中，我不知道该怎么做。我知道它有一种保存方法，但是当您按回应用程序的主屏幕并返回视图控制器时，文本消失了，或者当我删除某些内容时它仍然存在。

我的 .m 文件中的代码

```
#import "HomeWorkViewController.h"

@interface HomeWorkViewController ()

@end

@implementation HomeWorkViewController
@synthesize adView;
@synthesize myTableView, numbers;

-(void) viewDidLoad
{
   adView.delegate=self;
   [super viewDidLoad];
   self.navigationItem.leftBarButtonItem = self.editButtonItem;
    // check here if key exists in the defaults or not, if yes the retrieve results in array
   if([[NSUserDefaults standardUserDefaults] objectForKey:@"numberArray"] != nil) {
       self.numbers = [NSMutableArray arrayWithArray:[[NSUserDefaults standardUserDefaults] objectForKey:@"numberArray"]];
    }

    //Register for the notification when user go to background or minimize the app, just save the array objects in the defaults
    [[NSNotificationCenter defaultCenter]   addObserver:self
                                            selector:@selector(appWillGoToBackground:)
                                            name:UIApplicationWillResignActiveNotification object:[UIApplication sharedApplication]];

    //Add the Add button
    UIBarButtonItem * addButton = [[UIBarButtonItem alloc]
                                   initWithBarButtonSystemItem:UIBarButtonSystemItemAdd
                                   target: self action: @selector(insertNewObject)];
    self.navigationItem.rightBarButtonItem = addButton;
}

-(void)setEditing:(BOOL)editing animated:(BOOL)animated {
    [super setEditing:editing animated:animated];
    [self.myTableView setEditing:editing animated:animated];
}

-(void)appWillGoToBackground:(NSNotification *)note {
    NSLog(@"terminate");
    NSUserDefaults *defaults=[NSUserDefaults standardUserDefaults];
    [defaults setObject:self.numbers forKey:@"numberArray"];
    [defaults synchronize];
}

-(void)insertNewObject{
    //Display a UIAlertView
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Enter HomeWork" message: @"" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"Ok", nil];
    alert.alertViewStyle = UIAlertViewStylePlainTextInput;
    [alert show];
}

-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    //Only perform the following actions if the user hits the ok button
    if (buttonIndex == 1)
    {
        NSString * tmpTextField = [alertView textFieldAtIndex:0].text;
        if(!self. numbers){
            self.numbers = [[NSMutableArray alloc]init];
        }
        [self.numbers insertObject:tmpTextField atIndex:0];
        NSIndexPath * indexPath = [NSIndexPath indexPathForRow:0 inSection:0];
        [self.myTableView insertRowsAtIndexPaths:@[indexPath]withRowAnimation:UITableViewRowAnimationAutomatic];
    }
}

-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 1;
}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    return self.numbers.count;
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    static NSString *cellIdentifier = @"cell";

    UITableViewCell *cell = [ tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    if(cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle: UITableViewCellStyleDefault
                                        reuseIdentifier: cellIdentifier];
    }
    cell.textLabel.text = [self.numbers objectAtIndex:indexPath.row];
    return cell;
}

-(BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    return YES;
}

-(void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
   if (editingStyle == UITableViewCellEditingStyleDelete)
   {
      //remove our NSMutableArray
      [self.numbers removeObjectAtIndex:indexPath.row];
      //remove from our tableView
      [tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];
   }
}

- (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)fromIndexPath
toIndexPath:(NSIndexPath *)toIndexPath
{
}

-(void)bannerViewDidLoadAd:(ADBannerView *)banner
{
    adView.hidden=FALSE;
    NSLog(@"Has ad, showing");
}

-(void)bannerView:(ADBannerView *)banner didFailToReceiveAdWithError:(NSError *)error
{
    adView.hidden=TRUE;
    NSLog(@"Has no ads, hiding");
}

-(void)dealloc
{
    [adView release];
    [super dealloc];
}

- (void)viewDidUnload {
    [super viewDidUnload];
}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T17:51:44.663

看起来您只是在应用程序进入后台时才保存数据。如果您想立即保存数据而不是仅在应用关闭时保存数据，只需将数组写入 alertView:clickedButtonAtIndex 中的 NSUserDefaults：

# javascript - 让 Stellar.js 与 iscroll.js 一起工作

> ID：15862221
> 
> 赞同：1
> 
> 时间：2013-04-07T12:12:08.803
> 
> 标签：javascript, html, css, iscroll

我正在尝试创建一个适用于桌面和移动设备的视差滚动网站。这里有一个很好的例子来说明如何使用 Steller.js：

[http://webdesign.tutsplus.com/tutorials/complete-websites/create-a-parallax-scrolling-website-using-stellar-js/](http://webdesign.tutsplus.com/tutorials/complete-websites/create-a-parallax-scrolling-website-using-stellar-js/)

问题是此示例不适用于 iOS 移动设备。为了让[Stellar.js](http://markdalgleish.com/projects/stellar.js/)与 iOS 一起工作，您可以使用[iScroll](http://cubiq.org/iscroll)。

Steller.js 的创建者在此处提供了有关如何将 Steller.js 与 iScroll.js 合并的精彩教程：http: [//markdalgleish.com/2012/10/mobile-parallax-with-stellar-js/](http://markdalgleish.com/2012/10/mobile-parallax-with-stellar-js/)

第一步是为 iScroll 创建几个 div，即“wrapper” div 和“scroller” div：

```
<div id="wrapper">
  <div id="scroller">

    <section>...</section>

  </div>
</div> 
```

但是当我在示例的内容周围放置一个包装器时，整个布局就会被破坏，如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/KNQa3.png)

请有人帮我将 iScroll 正确地合并到这个例子中。任何帮助将非常感激。

# c# - C# 迷宫求解器图形

> ID：15862222
> 
> 赞同：-1
> 
> 时间：2013-04-07T12:12:10.883
> 
> 标签：c#, solver, maze

当我运行解算器时，我的迷宫解算器出现问题，它在图形变量处出现错误

```
 private bool solveMaze(int xPos, int yPos, bool[,] alreadySearched)
        {
            bool correctPath = false;
            bool shouldCheck = true;

            Bitmap map = (Bitmap)Mazebox.Image;
            Graphics gfx = null;
            gfx = Graphics.FromImage(map);
            Brush b = new SolidBrush(Color.CornflowerBlue);

            //out of index check
            if (xPos >= XTILES || xPos < 0 || yPos >= YTILES || yPos < 0)
                shouldCheck = false;

            if (map.GetPixel(xPos , yPos) == Color.Green)
            {
                correctPath = true;
            }
            //Search the Tile
            if (shouldCheck)
            {
                //mark tile as searched
                alreadySearched[xPos, yPos] = true;

                //Check right tile
                correctPath = correctPath || solveMaze(xPos + 1, yPos, alreadySearched);
                //Check down tile
                correctPath = correctPath || solveMaze(xPos, yPos + 1, alreadySearched);
                //check left tile
                correctPath = correctPath || solveMaze(xPos - 1, yPos, alreadySearched);
                //check up tile
                correctPath = correctPath || solveMaze(xPos, yPos - 1, alreadySearched);
            }
            //make correct path gray
            if (correctPath)
            {
                gfx.FillRectangle(b, xPos, yPos, 10, 10);
                Mazebox.Image = map;
            }

            return correctPath;
        } 
```

我认为问题是他打开了很多然后它崩溃（无限）有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T12:17:14.083

你永远不会使用你的`alreadySearched`领域。

你可以通过插入来做到这一点

```
 shouldCheck = shouldCheck && !alreadySearched[xPos, yPos]; 
```

# vb.net - VB.NET中两个或多个列表框的链接索引

> ID：15862226
> 
> 赞同：0
> 
> 时间：2013-04-07T12:12:25.223
> 
> 标签：vb.net, listbox

我正在做一个项目，但有一个要求我还没有提出解决方案。我被要求为跳远比赛创建一个结果存储系统。我必须创建三个列表框来存储尝试次数、结果（以米为单位）和每个结果的对应点。但是，我只能给他们一个文本框来输入结果，尝试次数和分数必须自动计算，并且每个运动员必须有 4 个结果。

有两点想请教大家：

1.  如果用户输入错误，应允许他/她删除一个或所有结果。并且当一个结果被删除时，所有与该结果相关的尝试次数和点也应该被删除。清除所有对我来说很好，但只从列表中删除一个并不是真的。那么我该如何解决这个问题。

2.  包含尝试次数的列表框应按顺序排列（1、2、3 和 4）。如果用户按数字顺序输入所有结果，我可以让列表框生成这些数字。然而，问题是他/她可以删除随机选择的项目。例如，如果他/她删除了第 3 次尝试，则添加的下一个结果应该返回第 3 次尝试而不是第 5 次尝试。新添加的结果应该移动到 2 和 4 之间的位置，而不是停留在底部。

我希望你能明白我想说什么。对不起我的解释，英语不是我的母语。

感谢您的所有分析

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T12:26:15.253

像这样的东西？

ListBox1.Items.Remove(ListBox1.SelectedItem)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T15:48:03.443

我认为当您获得所选项目的索引时（如上面的 Farhan Sabir 建议），您可以根据该索引删除其他 2 个列表框的项目。然后您可以尝试[listbox1.Items.Insert](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.objectcollection.insert.aspx)将项目插入到列表框的特定索引。但是，我认为您必须向用户询问尝试编号的输入以及尝试结果，以便以正确的顺序将其添加回列表

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T16:02:49.823

您可以使用列表框选择要删除的项目，然后像 Farhan Sabir 所说的那样删除。然后，您可以强制用户重新输入他们刚刚删除的尝试的距离作为下一个值。

如果您只有一个文本框来输入结果，您可以使用标签来指示他们正在输入的尝试（将其设置为在输入距离后自动更改为列表中的项目数+1）。这将向用户表明他们必须在删除距离后立即重新输入已删除的距离。消息框也可以帮助提示这一点。

我不确定您将如何改变竞争对手，但您在问题中根本没有提到这一点。

# symfony - Doctrine2：如何使用两列（或复合键）链接实体？

> ID：15862227
> 
> 赞同：1
> 
> 时间：2013-04-07T12:12:34.833
> 
> 标签：symfony, join, doctrine-orm, multiple-columns, composite-key

我一直试图从 Doctrine2 文档和互联网上找到与复合材料相关的问题的答案，但到目前为止还没有确定的线索。

为了简单起见，基本上我需要链接 3 个实体：Object、Grid 和 GriddingSquare。一个对象可以在 Grid 中找到，更具体地说，在一个 GriddingSquare 中。Grid 由 1 个或多个 GriddingSquares 组成。

在源数据库（不能轻易修改）中，GriddingSquare 由“GridID”（整数）和“GridSquareLabel”（字符串）唯一标识。因此，这两列都在 Object 表（& entity）和 GriddingSquare 表（& entity）中。

我尝试了以下方法，但似乎无法正常工作：

对象实体：

```
/**
 * @var \Grid
 *
 * @ORM\ManyToOne(targetEntity="Grid")
 * @ORM\JoinColumns({
 *   @ORM\JoinColumn(name="GridID", referencedColumnName="GridID")
 * })
 */
private $gridid;

/**
 * @var string
 *
 * @ORM\Column(name="GridSquareLabel", type="string", length=20, nullable=true)
 */
private $gridsquarelabel;

/**
 * @var \CdbGriddingsquares
 *
 * @ORM\ManyToOne(targetEntity="CdbGriddingsquares")
 * @ORM\JoinColumns({
 *   @ORM\JoinColumn(name="GridID", referencedColumnName="GridID"),
 *   @ORM\JoinColumn(name="GridSquareLabel", referencedColumnName="GridSquareLabel")
 * })
 */
private $griddingsquare; 
```

GriddingSquare 实体：

```
/**
 * @var \Grid
 *
 * @ORM\ManyToOne(targetEntity="Grid")
 * @ORM\JoinColumns({
 *   @ORM\JoinColumn(name="GridID", referencedColumnName="GridID")
 * })
 */
private $gridid;

/**
 * @var string
 * @ORM\Column(name="GridSquareLabel", type="string", nullable=false)
 */
private $gridsquarelabel; 
```

尝试使用 Doctrine2 文档中的以下建议，但尽管它在技术上是一个“复合密钥”问题，但我似乎无法找到一个示例来帮助我理解我需要做什么[http://docs.doctrine-project。 org/en/latest/reference/annotations-reference.html#annref-joincolumn](http://docs.doctrine-project.org/en/latest/reference/annotations-reference.html#annref-joincolumn)和[http://docs.doctrine-project.org/en/2.0.x/tutorials/composite-primary-keys.html](http://docs.doctrine-project.org/en/2.0.x/tutorials/composite-primary-keys.html)

# amazon-web-services - AWS 能否支持托管 SaaS

> ID：15862230
> 
> 赞同：0
> 
> 时间：2013-04-07T12:12:52.013
> 
> 标签：amazon-web-services, lamp

我计划/只是想使用 PHP 启动电子商务 Saas。

我想知道 AWS 是否可以支持以下内容：

1.  一个实例支持多个域，其中一些需要 SSL。
2.  Cpanel 或类似管理多个域的东西（跟踪每个域的带宽）
3.  一个实例可以支持多少个域？

我是 AWS 的新手。所以我需要考虑的任何其他事情提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T12:38:52.523

1.  是的
2.  Cpanel 可能无法正常工作，因为它通常通过 IP 地址获得许可（AWS 使用 NAT）。不过，您可以自己跟踪带宽。
3.  没有限制，取决于实例的大小、要运行的应用程序和流量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T01:19:19.617

> 一个实例支持多个域，其中一些需要 SSL。

**是**的。使用 Amazon 的 EC2 实例，您可以完全控制操作系统。这意味着您可以将任意数量的域指向一个 EC2 并在一台机器上托管网站。您还可以在一台机器上拥有多个 SSL 证书。

如果您决定使用 Amazon 负载均衡器说明，则每个负载均衡器只能有一个域/SSL（尽管可能是通配符）。好消息是您可以设置任意数量的负载均衡器，并且每个域/SSL 有一个。您还可以推出自己的负载平衡解决方案。

> Cpanel 或类似管理多个域的东西（跟踪每个域的带宽）

**你需要自己做出这个选择。**

专业的系统管理员可能希望对操作系统进行更多控制，并且会回避使用其他管理软件，例如 CPanel。CPanel 有许多功能可以帮助您管理多个网站，但这是以灵活性为代价的，并且出于维护和安全原因需要维护软件。

如果您决定使用 Cpanel，您可能需要做一些额外的工作才能使其正常运行（由于许可证问题并且不支持 AWS 使用的 NAT）。 [https://forums.aws.amazon.com/thread.jspa?threadID=99221](https://forums.aws.amazon.com/thread.jspa?threadID=99221)

请参阅：[http](http://cpanel.net/cpanel-whm/system-requirements/) ://cpanel.net/cpanel-whm/system-requirements/ “cPanel 不支持 NAT。”

> 一个实例可以支持多少个域？

**亚马逊没有强加限制**，它取决于实例的大小。如果您愿意，可以使用各种大小的实例在一个实例上托管多个站点。

[http://aws.amazon.com/ec2/instance-types/](http://aws.amazon.com/ec2/instance-types/)

M1 超大实例

*   15 GiB 内存
*   8 个 EC2 计算单元（4 个虚拟内核，每个内核有 2 个 EC2 计算单元）
*   1,690 GB 实例存储 64 位平台
*   I/O 性能：高
*   EBS 优化可用：1000 Mbps
*   API 名称：m1.xlarge

# ios - 导航弧内存未释放

> ID：15862231
> 
> 赞同：1
> 
> 时间：2013-04-07T12:12:52.597
> 
> 标签：ios, memory-management, automatic-ref-counting

我有两个表表控制器 A 和 B。A 有一个项目列表，当单击一个项目时，它会推送到 B。问题是当显示 B 时，仪器指示实时内存增加，但没有减少当我点击后退按钮时。B 中的 dealloc 方法已执行，但内存似乎略有变化。我检查了 B 没有保留在其他任何地方，那么可能导致此问题的原因是什么？

在 B 中，有许多文本字段，标签是非原子的和强的。我用代码而不是使用 xibs 来绘制它们。如果我注释了初始化它们的代码并将它们添加到表头视图中，那么问题就消失了。

顺便说一句，我使用 Arc 和模拟器 6.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T12:23:03.170

在我看来，B 中的某些文本字段/标签可能对 B 本身有一些强引用，这使得 arc 无法释放它们，因为 B 具有指向其中的强指针和元素，并且该元素具有指向 B 的强指针。

据我所知，这不是文本字段/标签的默认行为，但也许你已经对它们进行了子类化......

除了用你提供的少量信息猜测之外，很难尝试任何事情

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T01:43:26.867

您是否需要在视图控制器上下文中访问视图？当您需要更改它们时，您不能为它们分配标签并从 tableview 标题中检索它们吗？

# validation - Breezejs 字节属性验证错误

> ID：15862236
> 
> 赞同：0
> 
> 时间：2013-04-07T12:13:30.033
> 
> 标签：validation, knockout.js, byte, breeze

我正在尝试使用breathjs、knockout 和webapi 创建一个小型应用程序。但是，我遇到了一个问题，可能是在为属性使用 Byte 数据类型时出现的错误。

我设法正确传递数据并将其绑定到文本框，但是当我尝试更新它时，会出现一个错误，指出“优先级必须是值 0 和 255 之间的整数”

我有一个小样本来演示这个问题：

**入门：** 我已经下载了[http://www.breezejs.com/documentation/download](http://www.breezejs.com/documentation/download)示例（当前为 1.2.8）

打开 ToDo 示例

在 TodoItem.cs 添加了另一个属性，在我的情况下，我添加了类型的优先级**（字节）**

```
public byte Priority { get; set; } 
```

在 TodoDatabaseInitializer.cs 中添加了一些数据播种

```
 public static void SeedDatabase(TodosContext context)
    {
        _baseCreatedAtDate = new DateTime(2012, 8, 22, 9, 0, 0);

        var todos = new[] {
            // Description, IsDone, IsArchived
            CreateTodo("Food", true, true, 1),
            CreateTodo("Water", true, true, 2),
            CreateTodo("Shelter", true, true, 10),
            CreateTodo("Bread", false, false, 20),
            CreateTodo("Cheese", true, false, 20),
            CreateTodo("Wine", false, false, 3)
       };

        Array.ForEach(todos, t => context.Todos.Add(t));

        context.SaveChanges(); // Save 'em
    }

    private static TodoItem CreateTodo(
        string description, bool isDone, bool isArchived, byte priority)
    {
        _baseCreatedAtDate = _baseCreatedAtDate.AddMinutes(1);
        return new TodoItem
        {
            CreatedAt = _baseCreatedAtDate,
            Description = description,
            IsDone = isDone,
            IsArchived = isArchived,
            Priority = priority
        };
    } 
```

最后在 Index.html 的 UI 中添加了一个文本框，方法是在 items 数据绑定中添加以下行：

```
<input type="text" data-bind="value: Priority" /> 
```

它看起来像这样：

```
<ul data-bind="foreach: items">
    <li>
        <div data-bind="visible: !isEditing()">
                <input type="text" data-bind="value: Priority" />
            <input type="checkbox" data-bind="checked: IsDone" />
            <label data-bind="text: Description, click: $parent.edit, css: { done: IsDone, archived: IsArchived }"></label>
            <a href="#" data-bind="click: $parent.removeItem">X</a> 
        </div>
        <div data-bind="visible: isEditing">
            <form data-bind="event: { submit: $parent.completeEdit }">
                <input type="text" data-bind="value: Description, hasfocus: isEditing" />
            </form>
        </div>
    </li>
</ul> 
```

执行此操作后，运行应用程序，如果您尝试修改条目，则会出现错误，指出“优先级必须是值 0 和 255 之间的整数”

另外我想提一下，如果我将优先级的类型更改为 int，它可以正常工作。

它实际上是一个错误还是我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T06:22:06.747

**编辑：**这已在 Breeze v1.3.0 中修复，现在可用。

* * *

好的，这是一个错误，将在下一个版本中修复，可能下周发布。当它发布时，我会在这里发布。...感谢您找到这个:)

# eclipse - NullPointerException 在我的轴 2 Web 服务客户端中具有壁垒安全性

> ID：15862238
> 
> 赞同：0
> 
> 时间：2013-04-07T12:13:45.837
> 
> 标签：eclipse, axis2, rampart

我在 Eclipse 中创建了带有壁垒 ws 安全性的 axs 2 Web 服务（这是我遵循的 [教程 TUTORIAL](http://jkrzemie.files.wordpress.com/2011/02/ws.pdf) PAGE - 18-21

我通过添加此代码和参与 RAMPART MODULE 在 service.xml 中应用了该策略

```
<wsp:Policy wsu:Id="UTOverTransport"
    xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd"
    xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
    <wsp:ExactlyOne>
        <wsp:All>
            <sp:SignedSupportingTokens
                xmlns:sp="http://schemas.xmlsoap.org/ws/2005/07/securitypolicy">
                <wsp:Policy>
                    <sp:UsernameToken
                        sp:IncludeToken="http://schemas.xmlsoap.org/ws/2005/07/securitypolicy/IncludeToken/AlwaysToRecipient" />
                </wsp:Policy>
            </sp:SignedSupportingTokens>
            <ramp:RampartConfig xmlns:ramp="http://ws.apache.org/rampart/policy">
                <ramp:passwordCallbackClass>axis2wstest.PWCBHandler</ramp:passwordCallbackClass>
            </ramp:RampartConfig>

        </wsp:All>
    </wsp:ExactlyOne>
</wsp:Policy> 
```

然后我创建 Web 服务客户端 - 这是代码

```
public static void main(String[] args) throws RemoteException {
          ConfigurationContext ctx;
          ctx = ConfigurationContextFactory.createConfigurationContextFromFileSystem("C:/Users/Tanya/workspace/testlnclient/WebContent/WEB-INF", null);
        TestlnStub stub = new TestlnStub(ctx);

        Testws cl = new Testws();
        cl.setX(5);
        ServiceClient client =  stub._getServiceClient(); 
        client.engageModule("rampart");    
        //client.addHeader(omSecurityElement);
        org.apache.axis2.client.Options o = client.getOptions();
        o.setPassword("pass");
        o.setUserName("test");
        TestwsResponse resp = stub.testws(cl);

        System.out.println("Response" + resp.get_return());

        // TODO Auto-generated method stub

    }

} 
```

但它给了我一个例外

```
exception in thread "main" org.apache.axis2.AxisFault: java.lang.NullPointerException
    at org.apache.axis2.util.Utils.getInboundFaultFromMessageContext(Utils.java:531)
    at org.apache.axis2.description.OutInAxisOperationClient.handleResponse(OutInAxisOperation.java:375)
    at org.apache.axis2.description.OutInAxisOperationClient.send(OutInAxisOperation.java:421)
    at org.apache.axis2.description.OutInAxisOperationClient.executeImpl(OutInAxisOperation.java:229)
    at org.apache.axis2.client.OperationClient.execute(OperationClient.java:165)
    at axis2wstest.TestlnStub.testws(TestlnStub.java:191)
    at axis2wstest.testlnclient.main(testlnclient.java:35) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T17:08:07.027

堆栈跟踪中的存在`Utils.getInboundFaultFromMessageContext`表明它`NullPointerException`实际上来自服务而不是由客户端抛出。检查服务器日志以查看`NullPointerException`发生的位置。

# c# - 如何在asp.net中进行打印（点阵打印机）

> ID：15862241
> 
> 赞同：0
> 
> 时间：2013-04-07T12:14:06.613
> 
> 标签：c#, javascript, asp.net, printing

在我的项目中，我必须打印一个表格，例如姓名、年龄等。它全部打印在打印纸上，我只需要根据纸张放置姓名、年龄。目前我正在使用 asp.net 页面来服务我的目的。我在其中放置了位置 = 绝对的标签。当我单击打印时，我正在调用该页面，在 onload 事件中，我根据前一页内容放置标签值。

很简单。那么有没有更好的方法在点阵打印机中打印？请建议。

现在打印工作正常，但问题是当我单击打印按钮时，我正在打开该页面，如弹出窗口并在那里调用打印。但我希望在单击打印或取消按钮后关闭该弹出窗口。请帮我。

我的代码是这样的：

这个 BtnPrint 在我的主页上。主页包含姓名、年龄等输入。在 PrtPage 中，我根据给定的打印空间放置了标签。所以我在 PrtPage.aspx 的 onload 事件中加载主页值。

protected void BtnPrint_Click(object sender, EventArgs e)

```
{

    Response.Write("<script>");
    Response.Write("window.open('PrtPage.aspx','_blank')");
    Response.Write("</script>");
} 
```

在 PrtPage 的页面加载中：

protected void Page_Load(object sender, EventArgs e)

```
{

     Response.Write("<script>");
     Response.Write("window.print()");
     //Response.Write("window.close()");
     Response.Write("<script>");
} 
```

但是每当我点击打印按钮时，它都会询问“你想关闭窗口吗？”，所以请帮助我。在打印设置窗口中单击打印或取消后，我想关闭。

或者建议我是否有任何在 dotmatrix 中打印的好方法。在此先感谢。

山姆。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T12:18:04.893

你得到这些的原因是 asp.net 的范围仅限于浏览器窗口。如果浏览器设置为在您尝试自动关闭页面时询问用户是否要关闭页面（大多数情况下似乎是这样），则无法从浏览器中阻止它。

打印也是一样，你不能自动打印，因为浏览器不允许你打印。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T12:53:25.840

使用单个页面而不是打开弹出窗口怎么样。在下面的博客文章中，您可以看到一个示例用法。两个带有可打印和不可打印内容的 div 标签和带有可打印内容的 div 标签被隐藏。然后您可以使用 Jquery 打印 DIV 内的内容。

[http://itzonesl.blogspot.com/2013/02/how-to-print-content-inside-div-tag.html](http://itzonesl.blogspot.com/2013/02/how-to-print-content-inside-div-tag.html)

**更新：**

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1" runat="server" >
<title></title>
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
 <script src="jquery.printElement.js" type="text/javascript"></script>
<script type="text/javascript">
     function printpage() {
        $("#lblName").html($("#TextBox1").val());
        $("#lblSchool").html($("#TextBox2").val());
        $("#printable").printElement();
    }

</script>
<style type="text/css">
#printable { display: none; }
@media print
 {
     #nonprintable { display: none; }
     #printable { display: block; }
 }

</style>
</head>
<body>

    <form id="form1" runat="server">
     <div id="nonprintable">

        <table class="style1">
            <tr>
                <td>
                    <asp:Label ID="Label1" runat="server" Text="Name"></asp:Label>:
                </td>
                <td>
                    <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
                </td>
            </tr>
            <tr>
                <td>
                    <asp:Label ID="Label2" runat="server" Text="School"></asp:Label>:
                </td>
                <td>
                    <asp:TextBox ID="TextBox2" runat="server"></asp:TextBox>
                </td>
            </tr>
        </table>

 </div>
     <div id="printable">
 <table class="style1">
            <tr>
                <td>
                    <asp:Label ID="Label3" runat="server" Text="Name"></asp:Label>:
                </td>
                <td>
                    <asp:Label ID="lblName" runat="server" ></asp:Label>
                </td>
            </tr>
            <tr>
                <td>
                    <asp:Label ID="Label4" runat="server" Text="School"></asp:Label>:
                </td>
                <td>
                    <asp:Label ID="lblSchool" runat="server" ></asp:Label>
                </td>
            </tr>
        </table>
 </div>
    <asp:Button ID="Button1" runat="server" Text="Print" 
        OnClientClick="printpage();" />
    </form>
</body>
</html> 
```

**使用 MasterPage：**

**母版页.aspx**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head runat="server">
    <title></title>
    <link href="~/Styles/Site.css" rel="stylesheet" type="text/css" />
    <asp:ContentPlaceHolder ID="HeadContent" runat="server">
    </asp:ContentPlaceHolder>
</head>
<body>
    <form runat="server">
    <div class="page">
        <div class="header">
            <div class="title">
                <h1>
                    My ASP.NET Application
                </h1>
            </div>
              <div class="clear hideSkiplink">
                <asp:Menu ID="NavigationMenu" runat="server" CssClass="menu" EnableViewState="false" IncludeStyleBlock="false" Orientation="Horizontal">
                    <Items>
                        <asp:MenuItem NavigateUrl="~/Default.aspx" Text="Home"/>
                        <asp:MenuItem NavigateUrl="~/About.aspx" Text="About"/>
                    </Items>
                </asp:Menu>
            </div>
        </div>
        <div class="main">
            <asp:ContentPlaceHolder ID="MainContent" runat="server"/>
        </div>
        <div class="clear">
        </div>
    </div>
    <div class="footer">
    </div>
    </form>
</body>
</html> 
```

**内容页面.aspx**

```
<asp:Content ID="Content1" ContentPlaceHolderID="HeadContent" Runat="Server">
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
 <script src="jquery.printElement.js" type="text/javascript"></script>
<script type="text/javascript">
     function printpage() {
        $("#MainContent_lblName").html($("#MainContent_TextBox1").val());
        $("#MainContent_lblSchool").html($("#MainContent_TextBox2").val());
        $("#printable").printElement();
    }

</script>
<style type="text/css">
#printable { display: none; }
@media print
 {
     #nonprintable { display: none; }
     #printable { display: block; }
 }

</style>
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" Runat="Server">
     <div id="nonprintable">

        <table class="style1">
            <tr>
                <td>
                    <asp:Label ID="Label1" runat="server" Text="Name"></asp:Label>:
                </td>
                <td>
                    <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
                </td>
            </tr>
            <tr>
                <td>
                    <asp:Label ID="Label2" runat="server" Text="School"></asp:Label>:
                </td>
                <td>
                    <asp:TextBox ID="TextBox2" runat="server"></asp:TextBox>
                </td>
            </tr>
        </table>

 </div>
     <div id="printable">
 <table class="style1">
            <tr>
                <td>
                    <asp:Label ID="Label3" runat="server" Text="Name"></asp:Label>:
                </td>
                <td>
                    <asp:Label ID="lblName" runat="server" ></asp:Label>
                </td>
            </tr>
            <tr>
                <td>
                    <asp:Label ID="Label4" runat="server" Text="School"></asp:Label>:
                </td>
                <td>
                    <asp:Label ID="lblSchool" runat="server" ></asp:Label>
                </td>
            </tr>
        </table>
 </div>
    <asp:Button ID="Button1" runat="server" Text="Print" 
        OnClientClick="printpage();" />
</asp:Content> 
```

# java - 如何在对象列表中搜索对象的属性包含字符串

> ID：15862242
> 
> 赞同：1
> 
> 时间：2013-04-07T12:14:09.983
> 
> 标签：java, android, caching

我有以下情况：

*   我有一个对象`Song`，其属性之一是`Name`.
*   我有一个 sqlite 数据库，可以包含多达百万条记录的歌曲。
*   我需要对歌曲的名称属性进行实时搜索（用户点击字母后，应用程序将直接搜索它）。

我一直在想的解决方案（我没有做任何代码）是：

1.  直接查询 sqlite（我认为这是最糟糕的解决方案，因为我需要从 sqlite 获取并将其放入`Cursor`）
2.  将所有 sqlite 记录放到 List 或 ArrayList 中，然后我不确定从哪里继续，因为我认为 for 循环不是最好的解决方案，因为我需要存储到其他 List 以预填充我的`ListView`

谁能给我一个想法，也许只是概念，来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T12:18:36.223

你应该为你的查询做**缓存。**为此构建一个内存数据结构，具有级联结构（一次一个字母）。

**限制**特定查询的返回对象的数量（例如，最多返回 10 个）。显然，您不想返回所有`Song`以 letter 开头的 s `A`。此外，此列表可能基于重要性（或选择频率） - 您也可以存储它。

对于缓存的内部表示，我推荐这样的东西：

```
public class SongCacheNode {
    private String selector;
    private Map<Character, SongCacheNode> subCaches = 
        new HashMap<Character, SongCacheNode>();
    private List<Song> selection = new ArrayList<Song>(10);
    private boolean leafNode = false;
    private boolean containsAll = false;
} 
```

您可以构建一个树状结构。

*   将`selector`存储该节点的字符串选择器（例如歌曲标题的前缀）。
*   可以为下`subCaches`一个字母存储下一个缓存。
*   可以存储选择的`selection`歌曲标题
*   会`leafNode`说没有更多数据存储在缓存中，您可以使用`selection`，或者您必须这样做`SQL`- 存储在`containsAll`
*   如果`containsAll`是真的，那么所有可能的歌曲都存储在 中`selection`，如果不是，你仍然需要做 SQL

此结构允许您根据歌曲标题分布构建**可变深度缓存**。此外，对于选择，**您可以选择任何匹配**，不仅是前缀匹配（例如许多歌曲标题以“The”开头），进行不区分大小写的查询等。您也可以进行**部分缓存**，以限制内存使用（例如，最多存储 5 个字符，或者即使有大量歌曲也不存储不常见的查询） - 只需设置`containsAll`为`false`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T12:21:03.373

SQL lite 允许[全文搜索功能](http://www.sqlite.org/fts3.html)。鉴于歌曲名称也可以使用“thrill”等部分术语进行搜索| '惊悚' | '惊悚 MJ'，你应该去。

虽然**全文搜索**会被索引，但根据负载的不同，数据库可能无法承受，在这种情况下，您可以构建歌曲名称的[trie](http://en.wikipedia.org/wiki/Trie)。所有匹配的歌曲都可以从最后一个匹配节点的子节点获得，这个结构将在内存中。那应该让它很快。

将歌曲详细信息加载到列表/集将无济于事，因为您无法进行部分匹配。List / Set 要么包含“thril”，要么不包含。除非您使用全文搜索或像**trie**这样的内存中的 DS，否则无法知道部分字符串是否与数据库中的某些内容匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T12:21:13.127

**您的选择**
通过将所有歌曲加载到列表中，您将加快搜索时间。但是，这将极大地影响加载时间。

如果您没有将所有歌曲都加载到程序中，那么您的加载时间会更短，但可能会更长的搜索延迟。

**我会去哪一个**

简单来说，我会选择后者。这里的优点是您可以在用户键入时在另一个线程中进行数据库调用。多线程你的应用程序意味着一个线程，用户可以愉快地输入，而在另一个线程上，将发生艰巨的数据库调用，并且可以加载数据。

**一些需要注意的事情/您可能想要使用的想法。**

如果您的数据库有一百万首歌曲，可以肯定地说会有很多歌曲以相同的字母开头。也许在最初的几次按键上不进行数据库调用会对您有利，原因有很多：

1.  每次按键后，您都不会收到大量数据。
2.  它将减少您的程序必须处理的数据量，从而降低性能损失。
3.  这将为客户端提供一个不那么令人生畏的用户界面。想象一下输入一首歌曲并看到一个十万首歌曲的列表突然出现。它不具备流畅的可用性。

另一个想法是在每次查询时缓存数据。考虑到这一点，可以非常快速地获得相同的数据。

# c - 如何在子函数中使用结构

> ID：15862245
> 
> 赞同：0
> 
> 时间：2013-04-07T12:14:36.783
> 
> 标签：c

我不知道如何在子功能中使用“kule”。我标记为***** ******！！！**** 在代码中的错误。*

 *我必须在函数中写入哪个参数？

> void coz（结构??????，int磁盘，int * kaynak，int * yardimci，int * hedef）

* * *

```
#define disk_sayisi 5

typedef struct Platform {
    int bar1[disk_sayisi];
    int bar2[disk_sayisi];
    int bar3[disk_sayisi];
} platform;

void kuleleri_ekrana_yaz(platform y);
void disk_no_ata(platform *y);
void disk_tasi(platform *y, int disk);

void coz(int disk, int* kaynak, int* yardimci, int* hedef) {
    if (disk > 0) {
        printf("Kaynak:\t%d -> Hedef\t%d\n", kaynak, hedef);
*****!!!******  disk_tasi(kule, disk);
*****!!!******  kuleleri_ekrana_yaz(*kule);
    }
}

int main() {
    platform *kule;
    kule = (platform*) malloc(sizeof(platform));
    disk_no_ata(kule);
    kuleleri_ekrana_yaz(*kule);
    coz(disk, kaynak, yardimci, hedef);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T12:20:20.240

`kule`是本地函数`main`，所以你不能在`coz`. 如果您想在那里使用它，请执行以下任一操作：

1.  （不推荐：）`kule`在外部声明`main`，并确保在调用之前为其分配一个有效值`coz`：

    ```
    platform *kule;  // removed from `main` to global scope

    void coz(…) { … }

    int main() {
        kule = …;
        coz(…);
        …
    } 
    ```

2.  （**推荐**：）将其作为参数传递`coz`（通过附加参数）：

    ```
    void coz(int disk, int* kaynak, int* yardimci, int* hedef, platform *kule) { … }
                                                          // ^^^^^^^^^^^^^^^^
    int main() {                                          // additional parameter
        platform *kule = …;
        coz(…, kule);
        …
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T12:20:32.830

您需要将您的 to 传递`kule`给`coz()`：

```
void coz(int disk, int* kaynak, int* yardimci, int* hedef, platform* kule) {
    if (disk > 0) {
        printf("Kaynak:\t%d -> Hedef\t%d\n", kaynak, hedef);
        disk_tasi(kule, disk);
        kuleleri_ekrana_yaz(*kule);
    }
}

int main() {
    platform *kule;
    kule = (platform*) malloc(sizeof(platform));
    disk_no_ata(kule);
    kuleleri_ekrana_yaz(*kule);
    coz(disk, kaynak, yardimci, hedef, kule);
    return 0;
} 
```*

# wordpress - Wordpress 模板字体颜色更改

> ID：15862247
> 
> 赞同：-2
> 
> 时间：2013-04-07T12:14:40.133
> 
> 标签：wordpress, wordpress-theming

我正在使用 Wordpress 模板简单市场，默认文本颜色为绿色，但我想将其更改为黑色。甚至我安装的小部件也会变绿。有没有办法改变整个颜色而不是在css中一个一个地改变它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T15:32:07.887

您可以在主题的 style.css 文件中放置一些 CSS，以用黑色文本颜色覆盖其绿色文本颜色，例如：

```
body {
  color: black;
} 
```

如果上述方法不起作用，请尝试以下操作：

```
body {
  color: black !important;
} 
```

这只是一个快速补丁，但不是最终解决方案。当您对您提到的主题有了更好的了解后，您可以使用一些工具，例如 Firebug 来定位实际的 CSS 代码，并在它们所属的 style.css 文件中搜索和替换它们。那会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-30T18:14:52.577

转到 Style.css

使用任何样式表编辑器中的查找和替换功能将绿色（您将使用 colorpix 找到）替换为黑色（即 #000000）。

很简单，没有别的办法。

# javascript - 创建特定范围的随机数并将不同的 CSS 样式链接到这些

> ID：15862249
> 
> 赞同：0
> 
> 时间：2013-04-07T12:14:50.513
> 
> 标签：javascript, math, random, numbers

这里有点菜鸟！我想要做的是，通过使用javascript，在夏天得到10到25之间的随机数，在春天和秋天得到-5到10，然后在冬天得到-20和-5。然后我想将三种不同的 CSS 样式连接到这三个间隔。夏天的 stylesommar.css，春天/秋天的 stylevår/höst.css，冬天的 stylevinter.css。已经为此苦苦挣扎了很长时间，如果你们中的任何一位专家可以帮助我，将不胜感激？这是我到目前为止的代码，但它显然不起作用，感觉就像一团糟：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link href="style.css" rel="stylesheet" type="text/css">

<script type="text/javascript">

var currentTime = new Date()
var month = currentTime.getMonth() + 1
var total = month;

if (total >=6 && total <= 8)
{
document.write('<img src="bakgrund1.jpg" width="117" height="100">');   
(randomNumber > 10);
}
else if (total >=9 && total <= 11)
{
document.write('<img src= "bakgrund2.jpg"  width="117" height="100"/>');
(randomNumber <= 10 && randomNumber >= -5);
}

else if (total ==12 || total == 1 || total == 2)
{
document.write('<img src= "bakgrund3.jpg" width="117" height="100" />');
(randomNumber < -5);

}

else if (total >=2 && total <= 6)
{
document.write('<img src= "bakgrund4.jpg" width="117" height="100" />');
(randomNumber <= 10 && randomNumber >= -5);

} 
else
{
document.write("<b><br>Error!</b>");
}
</script>

<script>

function myFunction()
{

var randomNumber=Math.floor(Math.random()*50)-20;

if (randomNumber > 10){
$ ('<link href="stylesommar.css" rel="stylesheet" type="text/css">');
}

if (randomNumber <= 10 && randomNumber >= -5){
$ ('<link href="stylevårhöst.css" rel="stylesheet" type="text/css">');
}
if (randomNumber <= -5 && randomNumber >= -20){
$ ('<link href="stylevinter.css" rel="stylesheet" type="text/css">');
}
}
</script>

<script>
var d = new Date()
var timeHour = d.getHours()
var strtime = ""

if (timeHour > 5)
(
strtime = "God morgon!"
)
if (timeHour > 11)
(
strtime = "God eftermiddag!"
)
if (timeHour > 17)
(
strtime = "God kväll!"
)
if (timeHour > 19)
(
strtime = "God natt!"
)
if (timeHour < 6)
(
strtime = "Dags att sova!"
)
document.write(strtime)
</script>

</head>

<script src="jquery-1.8.3.min.js"></script> 

<script>
$(document).ready(function(){
$("a:link").mouseover(function(){
$("a:link").css("background-color","yellow");
 });
 $("a:link").mouseout(function(){
$("a:link").css("background-color","lightgray");
});
});
</script>
<script>
$(document).ready(function(){
 $("#hide").click(function(){
$("#opacitybox").hide();
 });
 $("#show").click(function(){
$("#opacitybox").show();
});
 });
</script>
<script>
 $(document).ready(function(){
$("button").click(function(){
$("#opcitybox").fadeTo("slow",0.15);
$("p").fadeTo("slow",0.4);
});
});

 </script>

</head>
<body>
<div id="layout">
 <div class="rundh">
 <div class="rundtopph">
<div class="rundh_r1"></div>
<div class="rundh_r2"></div>
<div class="rundh_r3"></div>
<div class="rundh_r4"></div>
 </div>
</div>
<div id="sidhuvud">
</div>
<div id="kolumncontainer">
<div id="kolumn1">
 <div id="menycontainer">
<h1>Sida 1</h1>
<ul id="meny">
<li><a href="index.php" id="current">Huvudmeny 1</a></li>
<li><a href="sida2.php">Huvudmeny 2</a></li>
<li><a href="sida3.php">Huvudmeny 3</a></li>
<li><a href="sida4.php">Huvudmeny 4</a></li>
<li><a href="sida5.php">Huvudmeny 5</a></li>
</ul>
</div>
<div id="opacitybox">
<p>F&ouml;rdjupningsuppgiften g&auml;ller jQuery. En plusuppgift ger ett VG och ge ett  MVG.<br>
 A. Skapa en klickbar meny d&auml;r ett antal undermenyer dyker upp n&auml;r ni   klickar p&aring; huvudmenyn. Anv&auml;nd Slide() f&ouml;r det.<br>
 B. Anv&auml;nd n&aring;gon av de jQuery-funktioner som inte n&auml;mndes p&aring;    f&ouml;rel&auml;sningen</p>
<img src="Umu_campus.jpg" width="180" height="110">   
<p> Klicka för att matcha bakgrundsfärg med aktuell temp</p> 
<button onclick="myFunction()">Testa!</button>

</div>
<p> Visa/dölj</p>
<button id="hide">Hide</button>
<button id="show">Show</button>
</div>
<div id="kolumn2">
<h3>Del 1</h3> <button>Klicka för att göra textblock genomskinliga</button>
 <h4>Information</h4>
 <p> Ni ska i detta moment skriva ett JavaScript som p&aring;verkar en webbsidas   utseende.
Bilder ska bytas ut beroende p&aring; datum. F&ouml;rslagsvis byter ni bilder varje   kvartal eller varje m&aring;nad.
F&auml;rgerna ska &aring;terspegla aktuell temperatur. Temperaturen simuleras genom   att man slumpar ut en l&auml;mplig temperatur f&ouml;r aktuell &aring;rstid.       F&ouml;rslagsvis slumpar ni ut ett tal mellan 10 och 25 p&aring; sommaren, mellan -5 och   10 p&aring; h&ouml;st och v&aring;r och mellan -20 och -5 p&aring; vintern. Ni kan anv&auml;nda er av funktionen Math(). Med den g&aring;r det att slumpa fram en temperatur.</p>
<h3>Del 2</h3>
 <h4>Information</h4>
 <p>Vidareutveckla din webbsida s&aring; att du med hj&auml;lp av JavaScript &auml;ndrar p&aring; textinneh&aring;llet n&aring;gonstans i din sida. Exempelvis slumpar du ut n&aring;got visdomsord, eller s&aring; utg&aring;r du fr&aring;n den kod du skrev i moment 1 och ser till s&aring; att du byter ut n&aring;gon text s&aring; att den b&auml;ttre passar till &aring;rstiden.</p>
  <h4>Information</h4>
  <p> H&auml;r ska ni anv&auml;nda er av jQuery f&ouml;r att skapa ett antal effekter, ni ska implementera 3 olika saker:
&#61607; Ni ska anv&auml;nda mouseOver() f&ouml;r att &auml;ndra utseendet p&aring; en l&auml;nk n&auml;r muspekaren st&aring;r &ouml;ver l&auml;nken.
&#61607; Hide() och Show() ska anv&auml;ndas f&ouml;r att visa och d&ouml;lja en div d&auml;r ni har lagt text och bild. Ni kan anv&auml;nda Toggle() om ni vill.
&#61607; fadeTo() ska anv&auml;ndas f&ouml;r att g&ouml;ra tv&aring; textblock genomskinliga. De ska ha olika opacitet s&aring; det beh&ouml;vs tv&aring; funktioner f&ouml;r att l&ouml;sa detta. Metoden fadeTo() anropas p&aring; valfritt s&auml;tt.</p>
  <h4>Information</h4>
  <p>F&ouml;rdjupningsuppgiften g&auml;ller jQuery. En plusuppgift ger ett VG och ger ett MVG.<br>
A. Skapa en klickbar meny d&auml;r ett antal undermenyer dyker upp n&auml;r ni klickar p&aring; huvudmenyn. Anv&auml;nd Slide() f&ouml;r det.<br>
B. Anv&auml;nd n&aring;gon av de jQuery-funktioner som inte n&auml;mndes p&aring; f&ouml;rel&auml;sningen</p>
</div>
</div>
 <div id="sidfot">
</div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T13:17:35.060

我在下面重写了你的代码。您的代码中的逻辑基本上是正常的，但是有一些错误不允许它工作。

在这里，我们使用一个调用函数`getRandomInt()`来生成随机数。它接受最小值和最大值的两个参数。根据月份，我们使用您指定的最小值/最大值调用该函数。然后将该数字传递给`myFunction()`它将正确的 CSS 文件写入文档。

```
var currentTime = new Date(),
    month = currentTime.getMonth() + 1;

if (month >=6 && month <= 8) {
  document.write('<img src="bakgrund1.jpg" width="117" height="100">');   
}
else if (month >=9 && month <= 11){
  document.write('<img src= "bakgrund2.jpg"  width="117" height="100"/>');
}
else if (month ==12 || month == 1 || month == 2) {
  document.write('<img src= "bakgrund3.jpg" width="117" height="100" />');
}
else if (month >=2 && month <= 6) {
  document.write('<img src= "bakgrund4.jpg" width="117" height="100" />');
}    

function getMonth() {
  var currentTime = new Date();
  return currentTime.getMonth() + 1; 
}

function getRandomInt (min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
}

function getTemp() {    
  var month = getMonth(),
      randomNumber;
  if (month >=6 && month <= 8) {
    randomNumber = getRandomInt(10, 25);
  }
  else if (month >=9 && month <= 11){
    randomNumber = getRandomInt(-5, 10);
  }
  else if (month == 12 || month == 1 || month == 2) {
    randomNumber = getRandomInt(-20, -5);
  }
  else if (month >= 2 && month <= 6) {
    randomNumber = getRandomInt(-5, 10);
  }     
  return randomNumber;
}

function myFunction() {
  var month = getMonth();
  if (month ==  11 || month == 12 || month == 1 || month == 2) {
    $ ('<link href="stylevinter.css" rel="stylesheet" type="text/css">').appendTo("head");      
  }
  if (month >= 3 && month <= 6) {
    $ ('<link href="stylevårhöst.css" rel="stylesheet" type="text/css">').appendTo("head");      
  }      
  if (month >= 7 && month <= 10) {
    $ ('<link href="stylesommar.css" rel="stylesheet" type="text/css">').appendTo("head");
  }
} 
```

有更有效的方法可以完成您正在做的事情，但我的回答显示了如何使用您提供的代码来完成它。

编辑：没有注意到`myFunction()`第一次调用 onclick 。这是一个更新版本，它使用函数获取当前月份和该月份范围内的随机数。如果您有任何问题，请告诉我。

EDIT2：我不确定随机数和范围是什么。我在回答中删除了它们。随意调整`myFunction()`以更好地反映代表每个季节的 4 个月期间。

EDIT3：我们现在又有了随机数（温度）。我不确定你在哪里使用温带，但要获得你刚刚调用的随机温度`getTemp()`

来源在`getRandomInt()`这里：

[https://stackoverflow.com/a/1527820/1091949](https://stackoverflow.com/a/1527820/1091949)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T12:41:35.857

> ```
> $ ('<link href="….css" rel="stylesheet" type="text/css">'); 
> ```

这只是创建元素，但对它没有任何作用。您需要将其附加到 DOM 以应用样式表：

```
$ ('<link href="….css" rel="stylesheet" type="text/css">').appendTo("head"); 
```

# jquery - Jquery循环动画并在悬停时冻结

> ID：15862251
> 
> 赞同：0
> 
> 时间：2013-04-07T12:14:55.920
> 
> 标签：jquery, animation, hover

我有一个小提琴设置，但我需要扩展它，我整晚都尝试过但失败了，所以我已经剥离了所有尝试，只留下了主要部分。请看这个小提琴。

[http://jsfiddle.net/bloodygeese/nqQG9/](http://jsfiddle.net/bloodygeese/nqQG9/)

我想知道如何“循环”整个动画无限，但最重要的是能够在鼠标进入或悬停任何一个 div 时暂停动画，然后在 mouseout 上继续动画或单击链接将链接关闭页面。

**如果这是可能的（不确定）我很想随机化 div 出现的时间，但总是可见 1/2 秒？] 下面的小提琴代码..

```
 $('#one').delay(2000).fadeIn(200);
 $('#one').delay(500).fadeOut(200);

 $('#two').delay(3000).fadeIn(200);
 $('#two').delay(500).fadeOut(200);

 $('#three').delay(4000).fadeIn(200);
 $('#three').delay(500).fadeOut(200);

 $('#four').delay(5000).fadeIn(200);
 $('#four').delay(500).fadeOut(200);

 $('#five').delay(6000).fadeIn(200);
 $('#five').delay(500).fadeOut(200);

 $('#six').delay(7000).fadeIn(200);
 $('#six').delay(500).fadeOut(200); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T12:41:56.367

以下代码随机淡化元素并在鼠标悬停时暂停淡化效果。**它要求您将“box”类添加到所有元素。**

```
 $(function () {
        function fadeAll() {
           var id = 1 + parseInt(Math.random() * 5) % 5;
           $('.box:nth-child('+id+')').stop().delay(500+parseInt(Math.random() * 500)).fadeIn('fast', function () {
              $(this).stop().delay(500 +parseInt(Math.random() * 500)).fadeOut('fast');
           })
           window.timeout = window.setTimeout(fadeAll, 500);
        }

        $('.box').hover(function(){
           $(this).css('opacity', 1);
           window.clearTimeout(window.timeout);
           $('.box').stop();
        },function(){
           $('.box').fadeOut('fast');
           window.timeout = window.setTimeout(fadeAll, 500);
        });

        fadeAll();
     }) 
```

# android - 将数据传递到服务器并接收它

> ID：15862254
> 
> 赞同：1
> 
> 时间：2013-04-07T12:14:58.667
> 
> 标签：android, android-internet

我需要将 3 个下拉值从我的应用程序传递到网站链接[http://www.way2franchise.com/](http://www.way2franchise.com/) 说：广告和媒体，选择投资，选择状态。是我的 3 个价值观。
我需要传递给搜索过滤器链接： [http](http://www.way2franchise.com/search/filter_franchise) ://www.way2franchise.com/search/filter_franchise 。

PS：由于stackoverflow的限制，我不能发布超过2个链接。
在讨论中有两个链接：
1.网站链接
2.搜索过滤器链接。

```
public class DatafetchingActivity extends Activity {

TextView result;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    result = (TextView) findViewById(R.id.result);

    BufferedReader bufferedReader = null;
    HttpClient httpClient = new DefaultHttpClient();
    HttpPost request = new HttpPost("http://www.way2franchise.com/search/filter_franchise");
    List<NameValuePair> postParameters = new ArrayList<NameValuePair>();
    postParameters.add(new BasicNameValuePair("p", "advertisement_and_media"));
    postParameters.add(new BasicNameValuePair("q", "Select Industry"));
    postParameters.add(new BasicNameValuePair("r", "Select Industry"));

    try {
        UrlEncodedFormEntity entity = new UrlEncodedFormEntity(
                postParameters);
        request.setEntity(entity);

        HttpResponse response = httpClient.execute(request);

        bufferedReader = new BufferedReader(new InputStreamReader(response
                .getEntity().getContent()));
        StringBuffer stringBuffer = new StringBuffer("");
        String line = "";
        String LineSeparator = System.getProperty("line.separator");
        while ((line = bufferedReader.readLine()) != null) {
            stringBuffer.append(line + LineSeparator);
        }
        bufferedReader.close();

        result.setText(stringBuffer.toString());

        Toast.makeText(DatafetchingActivity.this, "Finished",
                Toast.LENGTH_LONG).show();

    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        Toast.makeText(DatafetchingActivity.this, e.toString(),
                Toast.LENGTH_LONG).show();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        Toast.makeText(DatafetchingActivity.this, e.toString(),
                Toast.LENGTH_LONG).show();
    } finally {
        if (bufferedReader != null) {
            try {
                bufferedReader.close();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }

} 
```

现在，这个输出给出了搜索过滤器的整个结果。它的输出与我复制并粘贴搜索过滤器链接的输出相同。

但这不是我想要的。

我需要的是，如果我打开链接（不是搜索过滤器链接），并选择选项广告和媒体，选择投资，选择状态。我应该只得到基于传递的选项值的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T15:51:00.143

以下代码：

```
 postParameters.add(new BasicNameValuePair("p", "advertisement_and_media"));
    postParameters.add(new BasicNameValuePair("q", "Select Industry"));
    postParameters.add(new BasicNameValuePair("r", "Select Industry")); 
```

这里有三个名称值对，即p，q，r。这些是在服务器上接收值的键。所以无论你用键“p”，“q”，“r”发送什么数据都将是在服务器端收到这些键/值对。

希望我回答了你的问题。

# mysql - 如何检查字符串是否包含 MySQL 中列的任何字符串，反之亦然？

> ID：15862257
> 
> 赞同：5
> 
> 时间：2013-04-07T12:15:08.207
> 
> 标签：mysql, string-comparison

反之亦然，我的意思是，检查列中的任何字符串是否包含该字符串。

例子：

字符串 a = "意大利辣香肠"

MySQL 专栏：

```
{
    "PPeperoni_123",
    "roni",
    "hello world"
} 
```

它应该返回前 2 行。

（注意：我正在为此寻找查询字符串）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-07T12:21:08.110

不确定我是否正确理解您，但您是否正在寻找这个：

```
SELECT ... WHERE column LIKE "%string%" OR string LIKE CONCAT("%", column, "%") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T12:25:47.153

使用 Mysql，您可以使用它[`SOUNDS LIKE`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#operator_sounds-like)来查找最近的匹配项

[**例子**](http://www.w3resource.com/mysql/string-functions/mysql-sounds_like-function.php)

`SELECT * FROM table WHERE column SOUNDS LIKE 'Peperoni' ;`

# node.js - 使用 Mongoose 在数据库中保存模式

> ID：15862262
> 
> 赞同：1
> 
> 时间：2013-04-07T12:15:37.193
> 
> 标签：node.js, mongodb, mongoose

我正在尝试使用 Mongoose 将架构直接保存在数据库中。这是保存在 MongoDB 中的代码 (schema.js)：

```
var mongoose = require('mongoose');
var Mixed = mongoose.Schema.Types.Mixed;
var modelSchema = mongoose.Schema({
schemaname:String,
object : Mixed
})

var Model = mongoose.model('Model',modelSchema);

exports.createModel = function(model){
var model_to_create = new Model(model);
console.log("creating a schema..." + model)
model_to_create.save(function(err,data){
    console.log("Saving a schema...")
    if(err){
        return "model creation failed";
    }else {
        return "model creation success";
    }
}); 
```

}

我正在使用以下代码创建架构：

```
var schema = require('../schemas/schema');     
var status = schema.createModel({
    "username": String,
    "firstname": String,
    "lastname": String,
    "description": String,
    "education": String
}) 
```

由于某种原因，架构没有保存在数据库中。当我打印 "status" 时，我得到 "undefined"

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T12:22:46.003

保存模型是一个异步操作，你必须等到它的回调被调用才能读取结果。一种常见的方法是传递一个函数，该函数将在保存完成时调用：

```
exports.createModel = function(model, callback) {
  var model_to_create = new Model(model);
  console.log("creating a schema..." + model)
  model_to_create.save(function(err,data){
    callback(err, data); // <-- called when save is ready
  });
};
...
var schema = require('../schemas/schema');     
schema.createModel({
    "username": String,
    "firstname": String,
    "lastname": String,
    "description": String,
    "education": String
}, function(err, data) { // <-- this is the callback you pass
  // here you handle the results of saving the model
}); 
```

**编辑**：另外，您的模型只有两个属性（`schemaname`和`object`），但您将 5 个属性传递给它的构造函数。如果您打算保存每一个，则需要分别保存它们：

```
schema.createModel({
  schemaname : 'username',
  object     : 'String' // (you probably need to stringify your type, you can't save a class to MongoDB)
}, function(err, data) { ... }); 
```

如果您希望/需要在继续之前等待保存所有条目，您可以使用[async](https://github.com/caolan/async)作为协调多个异步操作的一种方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-23T17:16:33.773

添加到前面的答案，保存猫鼬数据类型，有一个简单的方法：将它们保存为字符串。从数据库中检索模式数据时，您只需要使用`mongoose.Schema.Types["String"]`字符串来获取数据类型。

我有一个类似的用例，我创建了一个简单的递归函数来转换 Schema Object 中保存在数据库中的 Schema 数据：

```
function changeSchemaType(fields) {
    var f;
    for(key of Object.keys(fields)) {
        f = fields[key];
        if(f.type && typeof f.type === 'string') {
            f.type = mongoose.Schema.Types[f.type]
        } else if(Array.isArray(f.type)){
            f.type = [mongoose.Schema.Types[f.type[0]]];
        } else {
            changeSchemaType(f);
        }
    }
} 
```

该函数还允许简单地通过 : `["String"]`for type 创建类型数组。

例如：

```
var data = {
    data1 : {type : "Number", required : true},
    data2 : {type : ["String"]}
}
changeSchemaType(data);
var mySchema = new Schema("mySchema", data) 
```

该函数不处理类似的简写语法`field : "Mixed"`，但如果需要，它可以适应。

# jquery - jQuery悬停效果：图像变小

> ID：15862263
> 
> 赞同：0
> 
> 时间：2013-04-07T12:15:38.970
> 
> 标签：jquery, hover

悬停在两个图像上时，我想在两个图像之间切换。两个图像具有相同的尺寸并且是一致的。

**问题是当图像改变时，它有点“跳跃”并且变得比默认图像更小，尽管 HTML 和 CSS 没有改变并且图像的尺寸相同。怎么会？**

我有以下**HTML**：

```
<img src="image.png" class="image" /> 
```

**jQuery**脚本：

```
<script  type='text/javascript'>
    $(document).ready(function(){
        $(".image").hover(
            function() {$(this).attr("src","image-hover.png");}, 
            function() {$(this).attr("src","image.png");
        });
    });
</script> 
```

有人可以给出一些建议或暗示这是为什么吗？**我不是在寻找 CSS 替代品，我想让它与 jQuery 一起使用！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T12:46:00.537

**我找到了一个不错的解决方案，即使我还没有解决最初的问题。**但是时间很短，不是吗？

[http://jsfiddle.net/Xm2Be/3/](http://jsfiddle.net/Xm2Be/3/)

```
$('.fader').hover(function() {
    $(this).find("img:last").fadeToggle();
});​ 
```

发现于： [jQuery 悬停图像更改动画](https://stackoverflow.com/questions/10039174/jquery-hover-image-change-animation)

# java - Java 计算密集型任务

> ID：15862271
> 
> 赞同：-2
> 
> 时间：2013-04-07T12:16:40.643
> 
> 标签：java, android, performance, testing, processing

我想比较 android 设备和 linux 虚拟机的计算性能。（我的硕士论文的一部分）测试必须使用某种输入（例如图像，或者只是数字），并且也必须有一些输出。

例如一个 jar 文件，用于制作几张图像的全景图片。或者也许是密码破解者。

另一个要求是，必须以编程方式开始测试。所以必须有可能，通过java方法调用开始全景制作或密码破解。

是否有开源项目或 jar 文件来进行此测试？

更新：链接的答案不是我要寻找的：@linski 只有想法，没有实现。如果任务可以是“现实生活”场景会更好。例如获取全景大图，或破解密码。

UPDATE2：“测试必须使用某种输入（例如图像，或只是数字），并且也必须有一些输出。” +“如果任务可以是“现实生活”场景会更好”

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-07T14:40:34.273

这个斐波那契数列让我的所有 4 个核心都接近 100%：

```
public static BigInteger fib(BigInteger n) {
    if (n.compareTo(BigInteger.ONE) == -1 || n.compareTo(BigInteger.ONE) == 0 ) return n;
    else 
        return fib(n.subtract(BigInteger.ONE)).add(fib(n.subtract(BigInteger.ONE).subtract(BigInteger.ONE)));
}

public static void main(String[] args) {
    ExecutorService executorService = Executors.newFixedThreadPool(10);
    for (int j = 0; j < 10; j++) {
        final int ID = j;
        executorService.submit(new Runnable() {

            public void run() {
                for (int i=0;i < Integer.MAX_VALUE; i++) {
                    System.out.println(ID+" worker: "+i + ": " + fib(new BigInteger(String.valueOf(i))));
                }
            }
        });
    }        
} 
```

这很可能不足以进行基准测试： ![在此处输入图像描述](https://i.stack.imgur.com/Ja3tS.png)

但是写了15分钟，而且是CPU密集型的。关于现实生活中的例子，请阅读 HotLicks 评论。因此，如果您想要密码破解器，这里是查找素数的最低效方法，这是[破解 RSA](http://en.wikipedia.org/wiki/Factoring_problem)的基本操作：

```
public static boolean isPrime(BigInteger n) {
    BigInteger counter = BigInteger.ONE.add(BigInteger.ONE);
    boolean isPrime = true;
    while (counter.compareTo(n) == -1) {
        if (n.remainder(counter).compareTo(BigInteger.ZERO) == 0) {
            isPrime = false;
            break;
        }
        counter = counter.add(BigInteger.ONE);
    }
    return isPrime;
}

public static void main(String[] args) {
    ExecutorService executorService = Executors.newFixedThreadPool(10);
    for (int j = 0; j < 10; j++) {
        final int ID = j;
        executorService.submit(new Runnable() {
            public void run() {
                BigInteger number = BigInteger.ONE;
                while(true) {
                    System.out.println(ID+" worker: "+number + ": " + isPrime(number));
                    number = number.add(BigInteger.ONE);
                }
            }
        });
    }        
} 
```

它比 Fibonnaci 占用更少的 CPU：

![在此处输入图像描述](https://i.stack.imgur.com/ic2ns.png)

可能是因为斐波那契有递归调用。

链接的[答案](https://stackoverflow.com/questions/3693197/cpu-intensive-calculation-examples)是已知 CPU 密集型*问题*的列表。它甚至提到了[RSA 挑战。](https://stackoverflow.com/a/3693359/679982)

# clojure - 为什么在启动 clojure repl 时绝对类路径不起作用？

> ID：15862272
> 
> 赞同：2
> 
> 时间：2013-04-07T12:16:57.683
> 
> 标签：clojure, compilation, read-eval-print-loop

当我在探索 Clojure 时，一个问题困扰了我很长一段时间。我尝试通过`compile`在 Clojure 脚本上调用 REPL 中的函数来生成一个类，如下所示：

```
(ns mylib.DirLister (:gen-class))
(defn -listDir [this path]
     (->> path java.io.File. .listFiles (map #(.getName %)))) 
```

我将此脚本保存到*e:/temp/clj/src/mylib/DirLister.clj*。当我为选项指定**相对路径**`-cp`时，以下会话运行良好，即在类路径中成功生成类：

```
e:\temp\clj>java -cp .\src;.\classes;d:/tools/clojure-1.4.0/clojure-1.4.0.jar clojure.main
Clojure 1.4.0
user=> (compile 'mylib.DirLister)
mylib.DirLister
user=> 
```

但是当我使用**绝对路径**时，会提示“没有这样的文件或目录”错误：

```
e:\>java -cp e:/temp/clj/src;e:/temp/clj/classes;d:/tools/clojure-1.4.0/clojure-1.4.0.jar clojure.main
Clojure 1.4.0
user=> (compile 'mylib.DirLister)
CompilerException java.io.IOException: No such file or directory, compiling:(mylib/DirLister.clj:1)

user=> 
```

怎么会 ？我的意思是为什么绝对路径不起作用但相对路径起作用。

我知道我可以和莱宁根一起去。但是由于我正在学习 Clojure，所以在采用这个功能齐全的工具之前，我想了解一下下面的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T16:50:26.047

在我看来，您在命令行上混合使用了正斜杠和反斜杠。我不确定您使用的是什么外壳以及是否会有所作为。但是，带有 e: 的路径通常需要一个反斜杠“\”。也许这会有所帮助，或者至少消除一个潜在的问题来源？

您能否尝试更改第二个示例以使用

`e:\temp\clj\src;e:\temp\clj\classes;d:\tools\clojure-1.4.0\clojure-1.4.0.jar`

看看这是否有帮助？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T14:24:29.480

最后我得到了答案：

该`compile`函数将始终使用内置变量的值`*compile-path*`作为输出类的路径，如果您没有另外设置，则默认为当前目录下的“类”。所以我遇到的问题实际上并不是相对路径或绝对路径，而是当前目录和`*compile-path*`.

请参阅[ClojureDoc](http://clojuredocs.org/clojure_core/clojure.core/compile)。

# c# - 行插入后绑定源刷新问题 - 对象引用未设置为对象的实例

> ID：15862274
> 
> 赞同：0
> 
> 时间：2013-04-07T12:17:14.477
> 
> 标签：c#, winforms, ms-access

Windows 窗体应用程序，VS 2010 C#，Access 2003

我从这个网站引用，[here](http://social.msdn.microsoft.com/Forums/en-US/winformsdatacontrols/thread/d53ad3fa-effc-4c9a-8520-897ecd85aa5f/)。我的目标是显示更新的记录（插入/删除更新），而无需关闭并重新启动应用程序以显示新的反射。我有很多文本框、组合框等，所以我没有使用 datagridview。

从那个网站有两段代码......

```
bindingNavigator1.BindingSource = bdSource;
this.dataGridView1.DataSource = bdSource; 
```

所以我做了这个...

```
this.table1BindingSource = dbSource; 
```

并给出“**对象引用未设置为对象实例**”的错误。警告说**dbSource 永远不会被分配，并且会有一个默认值 null**。

我的插入命令参数结构..

```
OleDbCommand cmd = new OleDbCommand(@"INSERT INTO Table1 (ID, Name) VALUES(@ID, @Name)", myCon);
cmd.CommandType = CommandType.Text;
cmd.Parameters.AddWithValue("@ID", txtID.Text);
cmd.Parameters.AddWithValue("@Name", txtName.Text);
myCon.Open();
cmd.ExecuteNonQuery();
myCon.Close(); 
```

以下方法我希望数据会被刷新......

```
private void btnReload_Click(object sender, EventArgs e)
{
  OleDbDataAdapter.Update(dtSource);
} 
```

和...

```
public partial class Form1 : Form
{
    private OleDbConnection myCon;
    private string connectionString;
    private string commandText;
    private OleDbCommandBuilder OleDbCommandBuilder;
    private OleDbDataAdapter OleDbDataAdapter;
    private DataTable dtSource;
    private BindingSource dbSource;

 public Form1()
    {
     connectionString = @"Provider=Microsoft.Jet.OLEDB.4.0;Data.. ";
     commandText = "SELECT * FROM TABLE1";

    myCon = new OleDbConnection(connectionString);
    OleDbDataAdapter = new OleDbDataAdapter(commandText, myCon);
    OleDbCommandBuilder = new OleDbCommandBuilder(OleDbDataAdapter);

   dtSource = new DataTable();
   OleDbDataAdapter.Fill(dtSource);

        dbSource = new BindingSource();
        dbSource.DataSource = dtSource; 
```

提前感谢任何可以帮助我的人

**编辑** 我也有导航按钮..

```
 private void fnDisplayPosition()
    {
        this.label2.Text = this.table1BindingSource.Position + 1 + " of " + 
        this.table1BindingSource.Count;
        table1BindingSource.ResetBindings(false);
    } 
```

然后在表单加载...

```
private void Form1_Load(object sender, EventArgs e)
    {
        this.fnDisplayPosition();
    } 
```

导航按钮示例...

```
 private void btnFirst_Click(object sender, EventArgs e)
    {
        this.table1BindingSource.MoveFirst();
        this.fnDisplayPosition();
    } 
```

**更新 2** 我在编码中犯了一些错误，所以警告标志和错误都消失了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T12:39:50.950

据我了解，在这里您初始化名为**bdSource 的 bindingSource**

```
 bdSource = new BindingSource(); 
```

但是然后您尝试设置数据源

```
 dbSource.DataSource = dtSource; 
```

对于名为**dbSource**的 bindingSource 。你还没有初始化它。那么，您将使用其中的哪一个？

另外， `table1BindingSource`您的代码中有什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T11:54:10.233

问题在于与 texbox 和其他类似设备相关的 tableadapter 和 bindingsource。[我已经在这里](https://stackoverflow.com/questions/15885244/textboxes-not-refreshing-after-insert-command-parameter)完整地解释过了。

# forms - Zend：从表单重定向而不验证

> ID：15862275
> 
> 赞同：1
> 
> 时间：2013-04-07T12:17:18.443
> 
> 标签：forms, validation, zend-framework, redirect

我有一个创建新“组”的表格。我现在添加了一个小的“返回”图像，用户应该能够使用它返回一步。我不知道为什么，但是当我单击这个新图像时，用于我要离开的表单（*/admin/creategroup*）的控制器和操作会再次调用并设置 HTTP POST。因此，表单验证已完成，我被困在此表单上，显示验证错误。

这是我的表单中带有两个图像按钮的代码片段。我不希望“返回”图像将我重定向到指定的控制器**而不验证表单**：

```
 $this->addElement('image', 'btnBack', array (
        'name' => 'btnBack',
        'id'   => 'btnBack',
        'label' => '',
        'title' => 'Go back',
        'alt' => 'Go back',
        'src' => '/img/undo.png',
        'onClick' => "window.location='/admin/groupoverview'"
    ));

    $this->addElement('image', 'btnSave', array (
        'name' => 'btnSave',
        'id'   => 'btnSave',
        'label' => '',
        'title' => 'Save this new group',
        'alt' => 'Save this new group',
        'src' => '/img/save.png',
        'onClick' => "document.forms[0].submit();"
    )); 
```

编辑：
我已经想到了检查*/admin/creategroup*是否是从“btnBack”图像或“btnSave”图像调用的可能性，如果源是“btnBack”图像，则跳过表单验证并正确重定向.
我只是认为应该有一个更好的解决方案来直接从表单重定向并规避再次调用*/admin/creategroup*。

Edit2：
我的**视图**脚本：

```
<div id="createGroupMask">
    <br/>
    Use the form below to create a new group
    <?php
        $this->form->setAction($this->url());
        echo $this->form;
    ?>
</div> 
```

我**在控制器中的操作**：

```
public function creategroupAction()
{
    $form = new Application_Form_CreateGroup();
    $request = $this->getRequest();

    if ($request->isPost()) {
        if ($form->isValid($request->getPost())) {
            // Data for new group is valid
            ...
        } else {
            // Form data was invalid
            // => This is where I land when pressing the 'back' image
            // No further code here
        }
    }
    $this->view->form = $form;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:48:55.193

现在有一些东西可以使用：

isValid() 循环不正确，您的表单永远不会针对您提供的元素评估为 inValid，您将永远不会到达 else。

```
public function creategroupAction()
{
    $form = new Application_Form_CreateGroup();
    $request = $this->getRequest();

    if ($request->isPost()) {
        if ($form->isValid($request->getPost())) {
            // Data for new group is valid
            ...
        } else {
/* This is incorrect */
            // Form data was invalid
            // => This is where I land when pressing the 'back' image
            // No further code here
        }
    }
    $this->view->form = $form;
} 
```

我的问题是我不确定您的表单将提交什么，我不太熟悉您如何使用“onClick”以及我认为是javascript。看起来元素***btnBack***应该在单击时重定向，元素***btnSave***应该**POST**。然而，这似乎并没有发生。

我在 PHP 和 ZF 中使用提交按钮完成了此类事情，也许我所做的流程会有所帮助：

注意：要使这种类型的流程起作用，您必须给按钮元素一个标签。标签用作[提交值](http://framework.zend.com/manual/1.12/en/zend.form.standardElements.html#zend.form.standardElements.button)。

```
//psuedoCode
public function creategroupAction()
{
    $form = new Application_Form_CreateGroup();
    $request = $this->getRequest();

    if ($request->isPost()) {
        if ($form->isValid($request->getPost())) {
            //I would probably opt to perform this task with a switch loop
            if ($form->getValue('btnBack') === some true value) {
               $this->_redirect('new url');
            }
            if ($form->getValue('btnSave') === some true value) {
               //Process and save data
            }

        } else {
            //Display form errors
    }
    $this->view->form = $form;
} 
```

我认为，说到底，问题的症结在于你没有给按钮元素一个标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T07:57:49.920

我尝试为我的图像添加标签，但这不起作用。

我还尝试`isChecked()`在我的 btnBack-image 上使用该方法，如下所示：

```
if ($form->btnBack->isChecked()) {
    // 'Go back' image was clicked so this is no real error, just redirect
} 
```

这也不起作用。

我终于能够通过[Zend 表单中回答的以下方法检查单击了哪个图像：图像作为提交按钮](https://stackoverflow.com/questions/6200212/zend-form-image-as-submit-button)：

```
public function creategroupAction()
{
     $form = new Application_Form_CreateGroup();
     $request = $this->getRequest();

     if ($request->isPost()) {
         if ($form->isValid($request->getPost())) {
             // Data for new group is valid
             ...
         } else {
             // Form data was invalid

             if (isset($this->_request->btnBack_x)) {
                 // 'Go back' image was pressed, so this is no error
                 // -> redirect to group overview page
                 $this->_redirect('/admin/groupoverview');
             }
         }
     }
     $this->view->form = $form;
 } 
```

我想这并没有彻底回答原始问题，因为验证仍在完成，我只检查单击“返回”图像的这种“特殊情况”，但无论如何我都会将其标记为已回答。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T08:12:03.713

Tim Fountain 在我的一些相关问题中提出了一种更简洁的方法： [Zend forms: How to around an image-element with a hyperlink?](https://stackoverflow.com/questions/16054199/zend-forms-how-to-surround-an-image-element-with-a-hyperlink)

# python - Flask中从字符串到unixepoch的日期转换

> ID：15862277
> 
> 赞同：3
> 
> 时间：2013-04-07T12:18:00.747
> 
> 标签：python, sqlite, datetime, flask

我正在使用 Flask 在页面上显示日期和温度。数据存储在 SQLite 数据库中。它可以很好地使用日期和时间作为字符串，但是当我尝试将日期和时间转换为 unix 纪元时出现问题。

Python代码：

```
cur = db.execute('select date,temperature from temperatures where temperatures.date > datetime(\'now\',\'-1hour\', \'localtime\') order by date desc;')
entries = cur.fetchall()
return render_template('dashboard2.html', entries=entries) 
```

模板：

```
{% for entry in entries %}
{{ entry.date }}  ---  {{ entry.temperature }}
{% endfor %} 
```

结果是：

```
2013-04-08 21:26:22 --- 22.31 
```

我正在尝试做的事情：

```
sqlite> select strftime('%s',date),temperature from temperatures where temperatures.date > datetime('now','-1hour', 'localtime') order by date desc; 
```

给出（在 sqlite 控制台中）：

```
(...)
1365340231|22.56
1365340221|22.56
1365340210|22.5
1365340199|22.56
(...) 
```

但：

```
cur = db.execute('select strftime(\'%s\',date),temperature from temperatures where temperatures.date > datetime(\'now\',\'-1hour\', \'localtime\') order by date desc;') 
```

**此选择在 entry.date 中给出空值，在烧瓶**模板中在 entry.temperature 中给出预期值：

```
 --- 22.31 
```

* * *

我在下面发布了解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T19:26:07.830

好的，朋友帮我找出错误：

问题是我试图在我的模板中使用值**entry.date**，但没有与条目中的日期相关联。

解决方案：“strftime('%s', date) **as date** , temperature ...”，然后将 strftime 的结果按原样放入 entry.date 中。

# xaml - EventToCommand 与可移植视图模型中的参数绑定

> ID：15862285
> 
> 赞同：2
> 
> 时间：2013-04-07T12:18:37.083
> 
> 标签：xaml, viewmodel, mvvmcross, portable-class-library, eventtocommand

我正在实现一个由多个平台上的应用程序共享的视图模型。我正在使用具有自己的 MvxEventToCommand 类的 MvvmCross v3，但我相信对于 MVVM Light 等其他框架来说，挑战是相同的。只要事件不带参数使用，实现就很简单了，像点击控件这样的简单交互就是这种情况。

但是当命令需要处理事件参数时，事情变得更加复杂。例如，视图模型需要对某些滚动条更改采取行动（并在关联的列表视图中加载更多项目）。这是 XAML 的示例：

```
<cmd:EventToCommand 
    Command="{Binding ScrollChanged}" 
    CommandParameter="{Binding EventArgs}" /> 
```

（MvvmCross 使用的是 MvxEventToCommand，但原理是一样的）。

然后在我的模型中，我可以有以下命令处理程序：

```
public ICommand ScrollChanged
{
    get
    {
        return new RelayCommand<ScrollChangedEventArgs>(e =>
        {
            MessageBox.Show("Change!");
        });
    }
} 
```

（MvvmCross 中的 MvxCommand）。

问题是 ScrollChangedEventArgs 是特定于平台的，并且此代码根本无法在可移植类库中编译。这是任何命令的普遍问题，它不仅需要在触发事件时进行推送，而且需要更具体的事件详细信息。将此代码移动到特定于平台的部分是愚蠢的，因为它或多或少地扼杀了可移植视图模型和无代码隐藏视图的概念。我试图搜索在不同平台之间共享视图模型的项目，但它们都使用简单的事件，如“Tap”，没有附加事件详细信息。

**更新 1**我同意 Stuart 的评论，即视图模型应该只处理更高级别的抽象，所以我将重新表述最初的担忧：如何将低级交互的结果映射到触发业务逻辑命令的平台中立事件？考虑上面的例子：业务逻辑命令是“在列表中加载更多项目”，即我们处理列表虚拟化，其中最初加载来自大型集合的有限数量的项目，并且向下滚动到列表底部应该导致加载额外的项目。

WinRT 可以通过使用支持 ISupportIncrementalLoading 接口的可观察集合来处理列表虚拟化。运行时检测此功能并在用户向下滚动列表时自动从相应服务请求额外的项目。在其他平台上，此功能应手动实现，除了对 ScrollViewer ScrollChanged 事件做出反应外，我找不到任何其他方法。然后我可以看到另外两个选项：

*   将 OnScrollChanged 处理程序放在代码隐藏文件中并调用可移植视图模型更高级别的事件（例如“OnItemsRequested”）；
*   避免使用代码隐藏的东西并努力将 ScrollChanged 事件直接连接到视图模型，然后我们需要首先重新映射特定于平台的事件。

只要不支持第二个选项，只要将事件处理程序放在代码隐藏文件中就可以了，只要它仅用于事件映射即可。但我想研究使用第二种选择可以做什么。MvvmCross 有 MapCommandParameter 类似乎可以提供帮助，所以我想知道我是否应该利用那个。

**更新 2**我尝试了 MapCommandParameter 方法，它允许我插入一个特定于平台的适配器，该适配器将映射低级事件以查看特定于模型的命令。因此，第二个选项毫不费力地奏效了。Stuart 还建议使用 listview-subclassing，因此无需关心滚动事件。我打算以后玩它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T13:35:41.347

我同意 viewmodel 命令通常应该用 viewmodel 概念来表达——所以向 viewmodel 发送一个关于滚动条值改变的命令是“奇怪的”，但是向 viewmodel 发送一个关于用户选择某些命令的命令可能是可以的列出要可见的元素（她通过滚动来实现）

我以前做过这类事情的一个例子是在列表选择中。

我最初使用跨平台 eventargs 对象在多个平台上执行此操作 -

*   [https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross/Commands/MvxSimpleSelectionChangedEventArgs.cs](https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross/Commands/MvxSimpleSelectionChangedEventArgs.cs)

[然后通过诸如https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross.WindowsPhone/Commands/MvxSelectionChangedEventToCommand.cs](https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross.WindowsPhone/Commands/MvxSelectionChangedEventToCommand.cs)的 EventToCommand 类在 WindowsPhone 上使用它

然而......我不得不承认这段代码并没有被太多使用......对于列表选择，我们主要使用了 selecteditem 绑定，并且根本没有任何应用程序需要更复杂的参数化命令（到目前为止) - 您甚至可能需要返回非常旧的 v1 mvvmcross 代码来查找使用它的任何示例。

# elf - readelf -S 输出中的 ES、Lk、Inf 和 A l 列标题是什么意思？

> ID：15862288
> 
> 赞同：6
> 
> 时间：2013-04-07T12:18:53.140
> 
> 标签：elf

在 的输出中`readelf -S`，我想知道列标题`ES`、`Lk`和`Inf`的`Al`含义。

例如：

```
Section Headers:
  [Nr] Name              Type            Addr     Off    Size   ES Flg Lk Inf Al
  [ 0]                   NULL            00000000 000000 000000 00      0   0  0
  [ 1] .text             PROGBITS        00000000 000034 00000d 00  AX  0   0  4
  [ 2] .rel.text         REL             00000000 000394 000008 08     10   1  4
  [ 3] .data             PROGBITS        00000000 000044 000000 00  WA  0   0  4
[...] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T02:42:31.693

> 我想知道列标题 ES、Lk、Inf 和 A​​l

在 /usr/include/elf.h 中查找 Elf32_Shdr 的定义。你会看到这样的东西：

```
typedef struct
{
  Elf32_Word    sh_name;                /* Section name (string tbl index) */
  Elf32_Word    sh_type;                /* Section type */
  Elf32_Word    sh_flags;               /* Section flags */
  Elf32_Addr    sh_addr;                /* Section virtual addr at execution */
  Elf32_Off     sh_offset;              /* Section file offset */
  Elf32_Word    sh_size;                /* Section size in bytes */
  Elf32_Word    sh_link;                /* Link to another section */
  Elf32_Word    sh_info;                /* Additional section information */
  Elf32_Word    sh_addralign;           /* Section alignment */
  Elf32_Word    sh_entsize;             /* Entry size if section holds table */
} Elf32_Shdr; 
```

因此，一个合理的猜测是：`ES`== `sh_entsize`、`Lk`== `sh_link`、`Inf`==`sh_info`和`Al`== `sh_addalign`。

# c# - C# XML 文档 - 用于引用资源图像的标记

> ID：15862293
> 
> 赞同：1
> 
> 时间：2013-04-07T12:19:48.563
> 
> 标签：c#, xml, tags

我想知道在引用应用程序资源（即resources.resx 文件中的图像）时，哪个是用于XML 文档的标记。哪种方法最正确？

例如，假设我有一个方法可以更新 GUI 中的图片。图片可以是资源（Resources.Car 或 Resources.Bus）中定义的一种，因此在 image 参数中指定。使用以下标签引用资源是否正确？

```
/// <summary>
/// Sets the image for the picture.
/// </summary>
/// <param name="image">An image representing the transport used:
/// <para><c>Resources.Car<c> to show the car image.</para>
/// <para><c>Resources.Bus<c> to show the bus image.</para>
/// </param>
public void showImage(Image image)
{
   ...
} 
```

# c# - Linq to entity 查询与同一张表上的嵌套查询

> ID：15862297
> 
> 赞同：2
> 
> 时间：2013-04-07T12:20:11.750
> 
> 标签：c#, linq, entity-framework, linq-to-entities

我有一个 SQL 查询：

```
SELECT distinct A.stock_value_site,
                A.BALANCE_QUANTITY,
                A.BALANCE_NOMINAL_VALUE, 
                A.BALANCE_INDEXED_VALUE,
                V.STOCK_VALUE_ORDER,
                U.BALANCE_QUANTITY  
FROM            svr A,   
                svt V,
                svu U
WHERE V.Code = 500 and  
      A.Id = U.ID (+) and
      A.Id = (SELECT    max(B.id) 
              FROM      svr B,
                        sts
              WHERE     A.stock_value_site = B.stock_value_site and 
                        B.Id = sts.ID(+) and
                        B.item = _item and 
                        B.date < _from_date and
                        B.Id IS NULL) 
```

我试图将此查询转换为 Linq 到实体：

```
var data = (from A in _context.svr
           join V in _context.svt on A.svtId equals V.Code
           join U in _context.svu on A.Id equals U.Id into groupA
           from gA in groupA.DefaultIfEmpty()
           where V.Code == _openBalanceRecordId &&
                 A.Id == (from B in _context.svr
                          join st in _context.sts on B.Id equals st.Id into groupB
                          from gB in groupB.DefaultIfEmpty()
                          where A.svsId == B.svsId &&
                                B.ItemId == _item &&
                                B.Date < _startDate.Date
                          select B.Id).Max()
           select new
           {
               A.stock_value_site,
               A.BALANCE_QUANTITY,
               A.BALANCE_NOMINAL_VALUE, 
               A.BALANCE_INDEXED_VALUE,
               V.STOCK_VALUE_ORDER,
               gA == null ? 0 : gA.BALANCE_QUANTITY
           }).Distinct().ToList(); 
```

当我在 oracle 中运行 SQL 查询时，我得到了 33 条记录。但是当我使用 Linq 对实体运行它时，我没有得到任何记录。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T13:06:47.907

我相信您的原始查询仍然存在一些问题，如果我了解您要做什么，这应该会更好：

```
var results = 
    (from a in _context.svr
     from v in _context.svt.Where(t => t.Code == 500)
     join u in _context.svu on u.Id equals a.Id into gU
     from x in gU.DefaultIfEmpty()
     where a.Id == 
         (from b in _context.svr
          join s in _context.sts on b.Id equals s.Id
          where b.item = _item
          and b.date < _from_date
          and b.svsId == a.svsId
          select b.Id).Max()
     select new
     {
         a.stock_value_site,
         a.BALANCE_QUANTITY,
         a.BALANCE_NOMINAL_VALUE, 
         a.BALANCE_INDEXED_VALUE,
         v.STOCK_VALUE_ORDER,
         x == null ? 0 : x.BALANCE_QUANTITY
     }).Distinct().ToList(); 
```

或者可能是这样的：

```
var results = 
    (from a in _context.svr
     from v in _context.svt.Where(t => t.Code == 500)
     join u in _context.svu on u.Id equals a.Id into gU
     from x in gU.DefaultIfEmpty()
     let subQuery = 
         (from b in _context.svr
          join s in _context.sts on b.Id equals s.Id
          where b.item = _item
          and b.date < _from_date
          select new { b.Id, b.svsId })
     join y in subQuery on a.svsId equals y.svsId into gY
     where a.Id = y.Max(b => b.Id)
     select new
     {
         a.stock_value_site,
         a.BALANCE_QUANTITY,
         a.BALANCE_NOMINAL_VALUE, 
         a.BALANCE_INDEXED_VALUE,
         v.STOCK_VALUE_ORDER,
         x == null ? 0 : x.BALANCE_QUANTITY
     }).Distinct().ToList(); 
```

# javascript - 自动设置文本区域的高度

> ID：15862300
> 
> 赞同：1
> 
> 时间：2013-04-07T12:20:23.643
> 
> 标签：javascript, jquery, html

我有一个文本区域，我希望高度自动增加，但它不起作用，这是我的**jQuery**：

```
$('.flat_textarea').delegate( 'textarea', 'keyup', function (){
   $(this).height( 30 );
   if(this.scrollHeight>30) 
 $(this).height(this.scrollHeight);
});

$('.flat_textarea').find( 'textarea' ).keyup();

$('.flat_textarea textarea').on("keyup",function (){
  $(this).height( 30 );
  if(this.scrollHeight>30) 
    $(this).height(this.scrollHeight);
}); 
```

**HTML：**

```
<form method="POST" class="flat_textarea" >
    <textarea></textarea>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T12:21:56.783

使用[**on()**](http://api.jquery.com/on/)代替 delegate()（delegate() 已弃用） - 使用[**keypress()**](http://api.jquery.com/keypress/)代替 keyup()。

**这是一个工作[jsFiddle](http://jsfiddle.net/MdVej/4/)。**

将您的代码更改为以下内容：

```
$('.flat_textarea').on('keypress', 'textarea', function (){
   $(this).height(30);
   if(this.scrollHeight > 30) 
     $(this).height(this.scrollHeight);
});

$('.flat_textarea').find('textarea').keypress();

$('.flat_textarea textarea').on("keypress", function (){
  $(this).height(30);
  if(this.scrollHeight > 30) 
    $(this).height(this.scrollHeight);
}); 
```

# java - 我是否正确理解 Java 中的内存泄漏

> ID：15862302
> 
> 赞同：0
> 
> 时间：2013-04-07T12:20:25.963
> 
> 标签：java, garbage-collection

对于此代码片段：

```
Vector v = new Vector(10);
  for (int i = 1; i<100; i++)
     {Object o = new Object();
      v.add(o);
      o = null;
     } 
```

因为这100个对象的所有引用都被设置为null，所以不会泄漏，因此它们将被GC收集。

然而，

```
 Vector v = new Vector(10);
  for (int i = 1; i<100; i++)
     {Object o = new Object();
      v.add(o);
      }
   v= null; 
```

会有泄漏，因为我只是清空了对向量的引用，但是对这 100 个对象的所有引用仍然存在，因此在它们对系统没有用时不会被 GC 收集。

请帮助检查我是否正确理解 Java 中的内存泄漏，在此先感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T12:25:55.633

在第一个示例中，`v`仍然保存对 100 个对象的引用。什么时候`v`超出范围，它将成为垃圾回收的候选对象，当它被回收时，所有 100 个对象也可以被回收。
在第二个示例中 - 当您设置`v`为 null 时，它将成为垃圾收集的候选对象，当它被收集时，所有 100 个对象也可以被收集。
因此，在这两种情况下都不应该有任何泄漏。

一般情况下，没有必要将局部变量设置为null，当方法结束时，它会超出范围，会被GC。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T12:27:01.003

对 100 对象的引用*不会保留*。'o' 显然在 for 循环的每次迭代中都超出了范围，只留下了向量内部的引用（`o=null`在你的第一种情况下是没有意义的）。当您设置`v`为其他值（null）时，将不再引用该向量，因此可以对它及其内容进行垃圾收集。

这就是“引用计数”的意义所在；它是剩余的*有效*引用数。 **您不能像**在 C 中释放指针那样释放它们。如果引用的范围消失了（例如，因为它是函数的本地对象），那么引用就消失了。 **您不必将其设置为 null。**

# javascript - Rapahel.js：翻译包含已翻译元素的集合

> ID：15862310
> 
> 赞同：0
> 
> 时间：2013-04-07T12:21:09.980
> 
> 标签：javascript, svg, raphael

当尝试使用 Raphael 翻译集合时，该集合中使用翻译创建的元素正在消失。

我已经尝试过使用大写和小写 S 来缩放[http://raphaeljs.com/reference.html#Element.transform](http://raphaeljs.com/reference.html#Element.transform)

以下是未翻译的元素：

```
var anotherCross = rightCross.clone().transform("T355.28 -200 R180");

var anotherCrossAgan = diagonalCross.clone().transform("T400 200 R180"); 
```

经过：

```
groupedFlag.transform("s0.5 0.5 0 0"); 
```

[http://jsfiddle.net/tomrandle/BxkGS/7/](http://jsfiddle.net/tomrandle/BxkGS/7/)

有没有办法让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T05:07:21.850

尝试`groupedFlag.transform("...S0.5 0.5 0 0");`

作为前缀或后缀附加`...`到您的转换字符串，分别在元素或集合的当前转换之后或之前应用转换。（呼！一个复杂的句子！）

更新小提琴：http: [//jsfiddle.net/BxkGS/11/](http://jsfiddle.net/BxkGS/11/)

# c# - windows 7 控制麦克风的播放音量

> ID：15862313
> 
> 赞同：1
> 
> 时间：2013-04-07T12:21:35.920
> 
> 标签：c#, c++, windows-7, microphone, naudio

我试图调整麦克风的播放音量；但不幸的是我做不到。我可以使用 NAudio 库控制麦克风的录音音量，但我想控制播放音量。有什么方法可以控制 Windows 7 上的麦克风播放音量。我可以接受 C++ 或 C# 解决方案。

**以下是解决我的问题的一些尝试：**

[http://www.computercabal.com/2010/11/mute-microphone-from-c-on-windows.html](http://www.computercabal.com/2010/11/mute-microphone-from-c-on-windows.html)（这家伙写了一个可以静音麦克风录音音量的小库）。

[NAudio - 无法设置线路控制静音值](https://stackoverflow.com/questions/11111242/naudio-cannot-set-line-control-mute-value)（此解决方案只能静音麦克风录音音量）。

这是通过使用 NAudio 来解决我的问题的另一个令人沮丧的尝试，这也只会使麦克风录音电平静音：

```
MMDeviceEnumerator DevEnum = new MMDeviceEnumerator();

MMDeviceCollection devices = DevEnum.EnumerateAudioEndPoints(DataFlow.Capture, DeviceState.Active);

MMDevice micDevice = null;

for (int i = 0; i < devices.Count; i++)
{
    MMDevice deviceAt = devices[i];
    Console.WriteLine(deviceAt.FriendlyName);
    if (deviceAt.FriendlyName.ToLower().StartsWith("mikrofon"))
    {
        micDevice = deviceAt;
    }
}

micDevice.AudioEndpointVolume.Mute = true; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-06T16:06:54.573

我遇到了同样的问题，我通过使用 IDeviceTopology 接口找到了答案。

我使用了在网络上浮动的 WalkTreeBackwardsFromPart 示例。

首先，您必须获取渲染设备（扬声器）的部件。

```
HRESULT hr = CoInitialize(NULL);
if (FAILED(hr)) {
    printf("Failed CoInitializeEx: hr = 0x%08x\n", hr);
    return __LINE__;
}

// get default render endpoint
IMMDeviceEnumerator *pEnum = NULL;
hr = CoCreateInstance(
    __uuidof(MMDeviceEnumerator), NULL, CLSCTX_ALL, __uuidof(IMMDeviceEnumerator),
    (void**)&pEnum
    );
if (FAILED(hr)) {
    printf("Couldn't get device enumerator: hr = 0x%08x\n", hr);
    CoUninitialize();
    return __LINE__;
}
IMMDevice *pDevice = NULL;
IMMDeviceCollection *pDevices = NULL;

hr = pEnum->EnumAudioEndpoints(eRender, DEVICE_STATE_ACTIVE, &pDevices);

UINT  count;
hr = pDevices->GetCount(&count);

// Each loop prints the name of an endpoint device.
for (ULONG i = 0; i < count; i++)
{

        //hr = pEnum->GetDefaultAudioEndpoint(eRender, eConsole, &pDevice);
    hr = pDevices->Item(i, &pDevice);
    if (FAILED(hr)) {
        printf("Couldn't get default render device: hr = 0x%08x\n", hr);
        pEnum->Release();
        CoUninitialize();
        return __LINE__;
    }
    pEnum->Release();

    // get device topology object for that endpoint
    IDeviceTopology *pDT = NULL;
    hr = pDevice->Activate(__uuidof(IDeviceTopology), CLSCTX_ALL, NULL, (void**)&pDT);
    if (FAILED(hr)) {
        printf("Couldn't get device topology object: hr = 0x%08x\n", hr);
        pDevice->Release();
        CoUninitialize();
        return __LINE__;
    }
    pDevice->Release();

    // get the single connector for that endpoint
    IConnector *pConnEndpoint = NULL;
    hr = pDT->GetConnector(0, &pConnEndpoint);
    if (FAILED(hr)) {
        printf("Couldn't get the connector on the endpoint: hr = 0x%08x\n", hr);
        pDT->Release();
        CoUninitialize();
        return __LINE__;
    }
    pDT->Release();

    // get the connector on the device that is
    // connected to
    // the connector on the endpoint
    IConnector *pConnDevice = NULL;
    hr = pConnEndpoint->GetConnectedTo(&pConnDevice);
    if (FAILED(hr)) {
        printf("Couldn't get the connector on the device: hr = 0x%08x\n", hr);
        pConnEndpoint->Release();
        CoUninitialize();
        return __LINE__;
    }
    pConnEndpoint->Release();

    // QI on the device's connector for IPart
    IPart *pPart = NULL;
    hr = pConnDevice->QueryInterface(__uuidof(IPart), (void**)&pPart);
    if (FAILED(hr)) {
        printf("Couldn't get the part: hr = 0x%08x\n", hr);
        pConnDevice->Release();
        CoUninitialize();
        return __LINE__;
    }
    pConnDevice->Release();

    // all the real work is done in this function
    hr = WalkTreeBackwardsFromPart(pPart);
    if (FAILED(hr)) {
        printf("Couldn't walk the tree: hr = 0x%08x\n", hr);
        pPart->Release();
        CoUninitialize();
        return __LINE__;
    }
    pPart->Release();
} 
```

它调用 WalkTreeBackwardsFromPart 的最后一部分是魔法发生的地方。

我的测试代码在这里所做的只是检查传入部件并找到标有“Front Pink In”的那个（这是麦克风的插孔），当显示音量时，它会设置该部分的音量。这不是最好的代码，但我只是想找到正确的部分。

```
HRESULT WalkTreeBackwardsFromPart(IPart *pPart, int iTabLevel /* = 0 */) {
HRESULT hr = S_OK;

Tab(iTabLevel);
LPWSTR pwszPartName = NULL;
hr = pPart->GetName(&pwszPartName);
if (FAILED(hr)) {
    printf("Could not get part name: hr = 0x%08x", hr);
    return hr;
}
printf("Part name: %ws\n", *pwszPartName ? pwszPartName : L"(Unnamed)");
//CoTaskMemFree(pwszPartName);

// see if this is a volume node part
IAudioVolumeLevel *pVolume = NULL;
hr = pPart->Activate(CLSCTX_ALL, __uuidof(IAudioVolumeLevel), (void**)&pVolume);
if (E_NOINTERFACE == hr) {
    // not a volume node
} else if (FAILED(hr)) {
    printf("Unexpected failure trying to activate IAudioVolumeLevel: hr = 0x%08x\n", hr);
    return hr;
} else {
    // it's a volume node...
    hr = DisplayVolume(pVolume, iTabLevel, wcscmp(L"Front Pink In", pwszPartName) == 0);
    if (FAILED(hr)) {
        printf("DisplayVolume failed: hr = 0x%08x", hr);
        pVolume->Release();
        return hr;
    }

    if (wcscmp(L"Microphone Boost", pwszPartName) == 0)
    {
        SetVolume(pVolume);
    }

    pVolume->Release();
}

CoTaskMemFree(pwszPartName);

// see if this is a mute node part
IAudioMute *pMute = NULL;
hr = pPart->Activate(CLSCTX_ALL, __uuidof(IAudioMute), (void**)&pMute);
if (E_NOINTERFACE == hr) {
    // not a mute node
} else if (FAILED(hr)) {
    printf("Unexpected failure trying to activate IAudioMute: hr = 0x%08x\n", hr);
    return hr;
} else {
    // it's a mute node...
    hr = DisplayMute(pMute, iTabLevel);
    if (FAILED(hr)) {
        printf("DisplayMute failed: hr = 0x%08x", hr);
        pMute->Release();
        return hr;
    }

    pMute->Release();
}

// get the list of incoming parts
IPartsList *pIncomingParts = NULL;

//get the list of incoming parts    
//hr = pPart->EnumPartsOutgoing(&pIncomingParts);
hr = pPart->EnumPartsIncoming(&pIncomingParts);
if (E_NOTFOUND == hr) {
    // not an error... we've just reached the end of the path
    Tab(iTabLevel);
    printf("No incoming parts at this part\n");
    return S_OK;
}
else
{

    if (FAILED(hr)) {
        printf("Couldn't enum incoming parts: hr = 0x%08x\n", hr);
        return hr;
    }
    UINT nParts = 0;
    hr = pIncomingParts->GetCount(&nParts);
    if (FAILED(hr)) {
        printf("Couldn't get count of incoming parts: hr = 0x%08x\n", hr);
        pIncomingParts->Release();
        return hr;
    }

    // walk the tree on each incoming part recursively
    for (UINT n = 0; n < nParts; n++) {
        IPart *pIncomingPart = NULL;
        hr = pIncomingParts->GetPart(n, &pIncomingPart);
        if (FAILED(hr)) {
            printf("Couldn't get part #%u (0-based) of %u (1-basedSmile hr = 0x%08x\n", n, nParts, hr);
            pIncomingParts->Release();
            return hr;
        }

        hr = WalkTreeBackwardsFromPart(pIncomingPart, iTabLevel + 1);
        if (FAILED(hr)) {
            printf("Couldn't walk tree on part #%u (0-based) of %u (1-basedSmile hr = 0x%08x\n", n, nParts, hr);
            pIncomingPart->Release();
            pIncomingParts->Release();
            return hr;
        }
        pIncomingPart->Release();
    }

    pIncomingParts->Release();
}

return S_OK;
}

HRESULT SetVolume(IAudioVolumeLevel *pVolume)
{
HRESULT hr = S_OK;
UINT nChannels = 0;

hr = pVolume->SetLevel(0,20.0,NULL);
return hr;
}

HRESULT DisplayVolume(IAudioVolumeLevel *pVolume, int iTabLevel, bool setVolume) {
HRESULT hr = S_OK;
UINT nChannels = 0;

hr = pVolume->GetChannelCount(&nChannels);

if (FAILED(hr)) {
    printf("GetChannelCount failed: hr = %08x\n", hr);
    return hr;
}

for (UINT n = 0; n < nChannels; n++) {
    float fMinLevelDB, fMaxLevelDB, fStepping, fLevelDB;

    hr = pVolume->GetLevelRange(n, &fMinLevelDB, &fMaxLevelDB, &fStepping);
    if (FAILED(hr)) {
        printf("GetLevelRange failed: hr = 0x%08x\n", hr);
        return hr;
    }

    hr = pVolume->GetLevel(n, &fLevelDB);
    if (FAILED(hr)) {
        printf("GetLevel failed: hr = 0x%08x\n", hr);
        return hr;
    }

    float levetToSet = fMinLevelDB + ((fMaxLevelDB-fMinLevelDB) * 50 /100.0);

    if (setVolume && nChannels == 2)
    {
        if (n == 0)
        {
            hr = pVolume->SetLevel(n, fMinLevelDB,NULL);
        }
        else
        {
            hr = pVolume->SetLevel(n, fMaxLevelDB,NULL);
        }
    }

    Tab(iTabLevel);
    printf(
        "Channel %u volume is %.3f dB (range is %.3f dB to %.3f dB in increments of %.3f dB)\n",
        n, fLevelDB, fMinLevelDB, fMaxLevelDB, fStepping
        );
}

return S_OK;
}

HRESULT DisplayMute(IAudioMute *pMute, int iTabLevel) {
HRESULT hr = S_OK;
BOOL bMuted = FALSE;

hr = pMute->GetMute(&bMuted);

if (FAILED(hr)) {
    printf("GetMute failed: hr = 0x%08x\n", hr);
    return hr;
}

Tab(iTabLevel);
printf("Mute node: %s\n", bMuted ? "MUTED" : "NOT MUTED");

return S_OK;
}

void Tab(int iTabLevel) {
if (0 >= iTabLevel) { return; }
printf("\t");
Tab(iTabLevel - 1);
} 
```

无论如何，当我设置这个音量时，它正在改变播放音量 L 和 R 以及高清音频管理器麦克风屏幕上的音量滑块。

# java - if + try - catch in 方法不能正常工作

> ID：15862315
> 
> 赞同：0
> 
> 时间：2013-04-07T12:21:49.617
> 
> 标签：java, android, if-statement, methods, try-catch

我正在开发一个基于 SQLite 的应用程序。一切正常，除了我的方法中的 if-else 语句。储蓄和东西有效，只是检查给了我一个相当高的血压。我希望你们中的一个人比我聪明得多，并且发现我犯的可能明显的错误：

```
public void save() {

        // get length of EditText
        int dateLength, mileageLength, amountLength, lpriceLength, tpriceLength;

        dateLength = date_widget.getText().length();
        mileageLength = mileage_widget.getText().length();
        amountLength = amount_widget.getText().length();
        lpriceLength = price_widget.getText().length();
        tpriceLength = totalPrice_widget.getText().length();

        // Start save method if EditTexts are not empty.

        if (dateLength > 0 || mileageLength > 0 || amountLength > 0
                || lpriceLength > 0 || tpriceLength > 0) {

            // Get the value of each EditText and write it into the
            // String/doubles

            String date = date_widget.getText().toString();
            double mileage = Double
                    .valueOf(mileage_widget.getText().toString());
            double amount = Double.valueOf(amount_widget.getText().toString());
            double lprice = Double.valueOf(price_widget.getText().toString());
            double tprice = Double.valueOf(totalPrice_widget.getText()
                    .toString());

            // Check if mileage is increasing, else cancel and show toast
            int checkMileage = Integer.parseInt(db
                    .getSearchResult("mileage", 0));

            if (checkMileage < mileage) {

                try {
                    // if (id == null) {
                    db.insert(date, mileage, amount, lprice, tprice);

                    Toast.makeText(this, R.string.action_input_saved,
                            Toast.LENGTH_SHORT).show();
                    finish();

                } catch (Exception e) {
                    e.printStackTrace();
                    Toast.makeText(this, "ERROR " + e, Toast.LENGTH_LONG)
                            .show();
                }

            } else {
                Toast.makeText(
                        this,
                        "Your current mileage must be more than the last saved mileage",
                        Toast.LENGTH_LONG).show();
            }

        } else {
            Toast.makeText(this, "finish your input", Toast.LENGTH_LONG).show();
        }

    } 
```

我在 DbAdapter 类中的方法：

```
public String getSearchResult(String sql, int cmd) {

    if (cmd == 0) {
        String countQuery = "SELECT " + sql + " FROM " + TABLE_NAME
                + " WHERE _id = (SELECT max(_id) FROM " + TABLE_NAME + ")";
        Cursor cursor = db.rawQuery(countQuery, null);
        cursor.moveToFirst();

        String tmp = cursor.getString(0);
        cursor.close();

        // return count
        return tmp;
    } else if (cmd == 1) {
        int sum = 0;
        String countQuery = "SELECT " + sql + " FROM " + TABLE_NAME;
        String idQuery = "SELECT _id FROM " + TABLE_NAME
                + " WHERE _id = (SELECT max(_id) FROM " + TABLE_NAME + ")";
        Cursor cursor = db.rawQuery(countQuery, null);
        Cursor id = db.rawQuery(idQuery, null);
        // berechnung
        cursor.moveToFirst();
        id.moveToFirst();

        int maxId = Integer.parseInt(id.getString(0));
        for (int i = 0; i < maxId; i++) {

            int tmp = Integer.parseInt(cursor.getString(0));
            sum = sum + tmp;
            cursor.moveToNext();
        }
        cursor.close();
        id.close();
        return String.valueOf(sum);
    } else if (cmd == 2 && sql == "mileage") {
        int sum = 0;
        String countQuery = "SELECT " + sql + " FROM " + TABLE_NAME;
        String idQuery = "SELECT _id FROM " + TABLE_NAME
                + " WHERE _id = (SELECT max(_id) FROM " + TABLE_NAME + ")";
        Cursor cursor = db.rawQuery(countQuery, null);
        Cursor id = db.rawQuery(idQuery, null);
        // berechnung
        cursor.moveToFirst();
        id.moveToFirst();

        int maxId = Integer.parseInt(id.getString(0));
        if (maxId > 1) {
            int array[] = new int[maxId];

            // Array füllen
            for (int i = 0; i < maxId; i++) {

                array[i] = Integer.parseInt(cursor.getString(0));
                // sum = sum + tmp;
                cursor.moveToNext();
            }
            for (int k = 1; k < maxId; k++) {
                int tmp;
                tmp = array[k] - array[k - 1];
                sum = sum + tmp;
            }

            cursor.close();
            id.close();
            return String.valueOf(sum);
        } else {
            return "--";
        }

    }
    return "Wrong CMD";

} 
```

我很乱，我知道

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T12:27:02.287

将评论变成答案：

全部切换`||`到`&&`您的第一个`if`. 否则，即使只填写了一个字段，您也会尝试处理所有内容。

# php - 将数据添加到搜索结果

> ID：15862325
> 
> 赞同：0
> 
> 时间：2013-04-07T12:23:06.813
> 
> 标签：php, sql, database

找到了一个更简单的方法

```
<html>
<form method="post" name="update" action="edit.php" />
Alliance Name :

<input type="text" name="term" />

Diplomacy :

<select name="dip">
       <option value="">Neutral</option>
       <option value="Hostile">Hostile</option>
       <option value="pending">Pending</option>
       <option value="friendly">Friendly</option>
       <option value="">Neutral</option>
      </select>
<input type="submit" name="Submit" value="update" />
</form>

</html> 
```

和

```
connection

$term = $_POST['term'];
$dip = $_POST['dip'];

$query = "UPDATE my_table SET dip = '$dip' WHERE alliance = '$term'";

if(mysql_query($query)){
echo "updated";}
else{
echo "fail";}
?> 
```

一切都很好，感谢您的所有建议。

我正在慢慢到达那里。你们都是很大的帮助，我非常尊重你们

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T12:26:38.800

> 它唯一不会做的就是将数据添加到数据库中

那是因为你的sql：

```
UPDATE mordred13 SET  dip='$dip'  WHERE dip='$dip' 
```

实际上并没有改变任何东西（就像说“将所有蓝色的颜色设置为蓝色”）。如果您尝试更新`NULL`（从您的评论中收集）的列，您可以执行以下操作：

```
UPDATE mordred13 SET  dip='$dip'  WHERE dip IS NULL 
```

有几个重要的方面，您的代码容易受到 SQL 注入的攻击，并且`mysql_*`函数已被弃用。研究使用支持参数化查询的 API，例如 mysqli 或 PDO。

# codeigniter - 注册验证中的 CodeIgniter 错误

> ID：15862326
> 
> 赞同：0
> 
> 时间：2013-04-07T12:23:07.987
> 
> 标签：codeigniter

我收到以下错误：

**致命错误：在第 32 行的 C:\wamp\www\jobsite\application\controllers\main.php 中的非对象上调用成员函数 set_userdata()**

我无法识别错误，您能帮忙吗？

**错误消息快照链接：**
![http://www.flickr.com/photos/16019653@N00/8626733197/in/photostream/lightbox/](https://i.stack.imgur.com/lO1Kn.jpg)

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Main extends CI_Controller {

    public function index()
    {
        $this->login();

    }
public function login(){
$this->load->view('login');
}

public function members(){
$this->load->view('members');

}

public function login_validation(){
$this->load->library('form_validation');
$this->form_validation->set_rules('email','Email', 'required|trim|xss_clear|callback_validation_credentials' );
$this->form_validation->set_rules('password','Password', 'required|md5 ');

if ($this->form_validation->run()) {

$data = array (
'email' => $this->input->post('email'),
'is_logged_in' => 1

);

$this->session->set_userdata($data);  /*  Line 32   */

   redirect('main/members');

} else {$this->load->view('login') ;

         }

}

public function validation_credentials(){

$this->load->model('model_users');

if($this->model_users->can_log_in()) {
return true;
} else {
$this->form_validation->set_message('validate_credentials', 'Incorrect UserName / Password');

return false;
}

}

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T13:00:31.457

您需要在库中自动加载，而不是在包中：

$autoload['libraries'] = array('database', 'session');

# c# - 使用 C# 中的方法关闭特定表单

> ID：15862329
> 
> 赞同：4
> 
> 时间：2013-04-07T12:23:50.427
> 
> 标签：c#, forms, methods

嗨，我的项目中有一些表格，我想做一个关闭其中一个的方法。方法是：

```
public static void close_form (Form frm)
{
    frm.Close();
} 
```

我这样使用它：

```
public partial class myForm : Form
{
   close_form(myForm);
} 
```

但是当我想运行应用程序时出现错误： `myForm`is a 'type' but is used like a 'variable'

我究竟做错了什么？有另一种`close`不使用表格的方法`this.close()`吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-07T12:25:01.147

您正在传递表单的类型，即`myForm` 您需要传递类型的对象，您可以传递[`this`](http://msdn.microsoft.com/en-us/library/dk1507sz.aspx)

```
public partial class myForm : Form
{
   close_form(this);
} 
```

这`myForm`是继承自`Form`type 的新类型，不是当前表单的实例。关键字`this`表示您可以将其传递给您的类的当前实例，您可以[在此处](http://msdn.microsoft.com/en-us/library/dk1507sz.aspx)`close_form`阅读有关此的更多信息。

如果函数只有一个语句来关闭表单，则*没有*理由通过调用函数来关闭表单，除非您这样做是为了学习，或者您可能有某些理由通过函数关闭表单，例如记录关闭表单名称和时间等信息等等。您只需调用`this.Close`而不是调用`close_form`并将当前表单传递给它。

# ruby - 在 net/http 中使用 [] 访问标头值

> ID：15862330
> 
> 赞同：1
> 
> 时间：2013-04-07T12:24:07.910
> 
> 标签：ruby, http

我想在 Ruby 中发出 HTTP 标头请求。为此，我使用以下代码

```
Net::HTTP.start(target) do |http|
  http.open_timeout = 2
  http.read_timeout = 2
  http.head('/').each do |k, v|
    puts "#{k}: #{v}"
  end 
```

到目前为止一切顺利，但我想以类似哈希的方式访问 http.head 的值：

```
 header = http.head('/')
 p header['Content-Type'] 
```

浏览[文档](http://ruby-doc.org/stdlib-1.9.3//libdoc/net/http/rdoc/Net/HTTPFound.html)我开始想知道为什么`each`首先是方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T12:33:41.460

我不确定 Ruby 库中是否有合适的方法，但是从您的代码中，您始终可以使用以下代码段`net/http`创建自己的方法：`Hash`

```
headers = Hash.new
http.head('/').each { |k, v| headers[k] = v }
puts header['Content-Type'] 
```

毕竟库方法应该只提供一个基本功能，其余的必须由您的应用程序完成。尽管我很好奇这是否真的不可能以另一种方式实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T12:36:52.807

这实际上有效：

```
http_response = nil
Net::HTTP.start("stackoverflow.com", 80) do |http|
  http_response = http.head("/")
end

http_response['cache-control'] -> "public, max-age=10" 
```

见：[http ://ruby-doc.org/stdlib-2.0/libdoc/net/http/rdoc/Net/HTTP.html#method-i-head](http://ruby-doc.org/stdlib-2.0/libdoc/net/http/rdoc/Net/HTTP.html#method-i-head)

# matlab - Matlab - 如何绘制阶跃函数

> ID：15862333
> 
> 赞同：0
> 
> 时间：2013-04-07T12:24:12.577
> 
> 标签：matlab, plot

我很难绘制阶跃函数。涉及的函数是 Haar 缩放函数，定义为：

```
ø(x) = 1 if 0 ≤ x < 1
ø(x) = 0 otherwise 
```

我应该绘制以下函数：

```
f(x) = 2ø(4x) + 2ø(4x - 1) + ø(4x - 2) - ø(4x - 3) 
```

这应该给我一个图，其中 f = 2 在区间 0 ≤ x < 0.5 上；f = 1 在区间 0.5 ≤ x < 0.75 上；f = -1 在区间 0.75 ≤ x < 1 上，否则 f = 0。

我尝试了以下代码：

```
f = @(t) 2*(4*t > 0) + 2*(4*t > 1) + (4*t > 2) - (4*t > 3);
t = linspace(-2,2,100);
stairs(t,f(t)) 
```

但是，这并没有给我一个准确的图表。那么我在这里做错了什么？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T12:46:22.993

您对 f 的实现仅处理您的 phi 规范的一半。

```
f = @(t) 2*(4*t > 0) + 2*(4*t > 1) + (4*t > 2) - (4*t > 3); 
```

在每个术语中都应用不等式`0 < X`，而不是`0 <= X`. `X < 1`对于不平等也没有做任何事情。

与其尝试为每个术语制作自定义版本，不如直接编写公式？

```
phi = @(x) x >= 0 & x < 1;
f = @(x) 2*phi(4*x) + 2*phi(4*x-1) + phi(4*x - 2) - phi(4*x - 3); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T12:46:03.463

它应该是：

```
f = @(t) 2*(4*t > 0 & 4*t < 1) + 2*(4*t > 1 & 4*t < 2) + (4*t > 2 & 4*t < 3) - (4*t > 3); 
```

因为每个段都应该用开始和结束值精确定义。

# compiler-construction - 编译器设计：LR(0) 解析器

> ID：15862335
> 
> 赞同：-1
> 
> 时间：2013-04-07T12:24:38.587
> 
> 标签：compiler-construction

如何为语法 S:aSbS|bSaS|ε 设计 LR(0) 解析器并解析“aabbab”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T12:30:00.140

设计 LR(0) 解析器通常是所有 LR 解析器中最简单的。考虑到这个话题，网上有大量资源，最著名的是我上学期在编译器设计课程中使用的 Dragon Book：

[龙书](http://en.wikipedia.org/wiki/Compilers:_Principles,_Techniques,_and_Tools)

只需阅读有关 LR(0) 解析的信息。甚至还有伪代码。祝你好运。

此外，还有几个有用的链接：

[LL和LR解析有什么区别？](https://stackoverflow.com/questions/5975741/what-is-the-difference-between-ll-and-lr-parsing)

[我应该如何构建一个简单的 LR 解析器？](https://stackoverflow.com/questions/2321022/how-should-i-go-about-building-a-simple-lr-parser)

当然，也有自动解析器构建器（例如 GNU-Bison），但我认为它们太麻烦了。我宁愿实现我自己的解析器。

# sql - Rails 关联 finder_sql proc{} 不返回所有表列

> ID：15862337
> 
> 赞同：0
> 
> 时间：2013-04-07T12:24:41.417
> 
> 标签：sql, ruby-on-rails, associations

我的`Page`模型中有这个关联。

```
 has_many :networks, :finder_sql => proc {"SELECT * FROM network_pages WHERE page1_id = #{id} OR page2_id = #{id}"} 
```

`Networks`它通过模型中的页面 id检索`NetworkPages`。他们的表格如下：

```
1.9.3p392 :010 > Network
 => Network(id: integer, name: string, created_at: datetime, updated_at: datetime, column1: string, column2: string, inversion: boolean) 
1.9.3p392 :011 > NetworkPage
 => NetworkPage(id: integer, network_id: integer, page1_id: integer, page2_id: integer, created_at: datetime, updated_at: datetime) 
```

但是，当调用上面的关联时，我只得到记录的 id 和时间戳列作为回报：

```
1.9.3p392 :014 > page.networks
 => [#<Network id: 1, created_at: "2013-04-07 09:07:05", updated_at: "2013-04-07 09:07:05">] 
```

它返回正确的类，但我不能调用其他属性：

```
1.9.3p392 :015 > page.networks.first.class
 => Network(id: integer, name: string, created_at: datetime, updated_at: datetime, column1: string, column2: string, inversion: boolean) 
1.9.3p392 :016 > page.networks.first.name
ActiveModel::MissingAttributeError: missing attribute: name
    from (irb):16
    from /Users/RyanKing/.rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.12/lib/rails/commands/console.rb:47:in `start'
    from /Users/RyanKing/.rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.12/lib/rails/commands/console.rb:8:in `start'
    from /Users/RyanKing/.rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.12/lib/rails/commands.rb:41:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

但是使用没有问题`Network.find`

```
1.9.3p392 :017 > Network.find(1).name
  Network Load (0.5ms)  SELECT `networks`.* FROM `networks` WHERE `networks`.`id` = 1 LIMIT 1
 => "First Network Name" 
```

我不太明白为什么会这样，如何检索所有`Network`模型属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T12:42:42.837

您的 finder_sql 从错误的表中选择 - network_pages 而不是网络

# php - PHP嵌套if条件

> ID：15862343
> 
> 赞同：0
> 
> 时间：2013-04-07T12:25:10.737
> 
> 标签：php, regex, nested

我正在使用模板系统。在这个模板系统中，我对 if-else 条件使用如下所示的结构；

```
<if condition="'$condition' != 1">
    <div>true source</div>
</if> 
```

比我用以下模式分隔表达式；

```
$pattern_case = '<if condition="(.*?)">(.*?)</if>';
preg_match("#$pattern_case#si",$string,$case) 
```

但在某些情况下，if-else 进程可以在另一个中使用（嵌套？- recusirve？）例如；

```
<if condition="'$condition1' != 1">
    <div>condition 1 text</div>
    <if condition="'$condition2' == 2 ">
        <div>condition 2 text</div>
    </if>
    condition 1 text more
</if> 
```

在这种情况下，模式给出以下结果。

```
<if condition="'$condition1' != 1">
    <div>condition 1 text</div>
    <if condition="'$condition2' == 2 ">
        <div>condition 2 text</div>
    </if> 
```

（所以没有这个）

```
 condition 1 text more
</if> 
```

不使用 domdocument 如何使用 regex 解决该问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T12:26:42.697

你不能。按照设计，正则表达式不能处理递归。

有关更多信息，您可能想在此处阅读第一个答案：[可以使用正则表达式匹配嵌套模式吗？](https://stackoverflow.com/questions/133601/can-regular-expressions-be-used-to-match-nested-patterns)

是的，我知道一些特殊的“正则表达式”确实允许递归。但是，在大多数情况下，这意味着您正在做一些可怕的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T03:48:43.777

你可以。“按照设计，正则表达式无法处理递归。” 是的，但 PCRE 提供了比严格的正则表达式语言更多的功能。这就是为什么术语“正则表达式”在许多语言中不准确地指代“正则表达式”的原因。

这样做的方法：

```
$subject = <<<'LOD'
<if condition="'$condition1' != 1">
<div>condition 1 text</div>
<if condition="'$condition2' == 2 ">
<div>condition 2 text</div>
</if>
condition 1 text more
</if>
LOD;
$pattern = '~<if condition="(?<condition>[^"]+)">(?<content>(?:.*?(?R)?)+?)</if>~s';
preg_match_all( $pattern, $subject, $matches );
print_r($matches); // see your html source 
```

此代码与您的嵌套结构匹配。现在，坏消息是：您无法使用单一模式从其他深度捕获“条件”和“内容”！一种方法是创建一个递归函数，在“内容”上重试模式，并在没有更多嵌套的“if”时停止。
对于替换，您还可以构建一个描述最里面的“if”标签的模式（一种禁止其他嵌套“if”的模式）并将其应用到`do..while`循环中。

请记住，这种方法具有很高的复杂性（在算法意义上），更好的方法是使用 DOM。

# oracle - 每组最大的行 - 进一步将结果集与左连接与 Hibernate 中的其他相关表相结合 - HQL。是否可以？

> ID：15862348
> 
> 赞同：2
> 
> 时间：2013-04-07T12:25:53.460
> 
> 标签：oracle, hibernate, oracle10g, hql, greatest-n-per-group

我的 Oracle 数据库中有两个表`product`和`product_image`. `product`它们具有从到的一对多关系`product_image`。因此，可以在 Hibernate 中映射关系，如下所示。

产品实体：

```
@Entity
@Table(name = "PRODUCT", catalog = "", schema = "WAGAFASHIONDB")
public class Product  implements java.io.Serializable
{
    @OneToMany(mappedBy = "prodId", fetch = FetchType.LAZY)
    private Set<ProductImage> productImageSet; 
} 
```

* * *

```
@Entity
@Table(name = "PRODUCT_IMAGE", catalog = "", schema = "WAGAFASHIONDB")
public class ProductImage  implements java.io.Serializable
{
    @ManyToOne(fetch = FetchType.LAZY)
    private Product prodId;
} 
```

我需要查询可以从表中的每组产品中获取具有最大值`prod_image_id`（表的主键）的行列表。`prduct_image``product_image`

这是我[以前的问题](https://stackoverflow.com/q/15851072/1391249)。这可以通过以下 SQL 来完成。

```
SELECT 
     pi.prod_image_id,
     pi.prod_id, pi.prod_image 
FROM 
     product_image pi 
INNER JOIN (
     SELECT 
          MAX(pi.prod_image_id) AS prod_image_id 
     FROM 
          product_image pi 
     GROUP BY 
          pi.prod_id
     ) prod_image 
ON pi.prod_image_id=prod_image.prod_image_id 
```

该问题的[答案](https://stackoverflow.com/a/15855285/1391249)对应于以下正确的 HQL。

```
SELECT 
    pi.prodImageId, 
    pi.prodId 
FROM 
    ProductImage pi 
WHERE 
    pi.prodImageId in (
    SELECT
         MAX(pis.prodImageId)
    FROM 
         Product p
    INNER JOIN 
         p.productImageSet pis
    GROUP BY 
         p.prodId
) 
```

这完全符合预期的结果。

```
PROD_IMAGE_ID     PROD_ID      PROD_IMAGE
662               284          3562298873030291049_Winter.jpg
644               283          7551758088174802741_9392401244_SS_2505.jpg
595               124          298082252715152799_SS_5012.jpg
566               62           7826143854352037374_SS_5004-A.jpg 
```

* * *

但我真正需要的是，上述 SQL/HQL 检索到的结果集需要与`product`表结合，`LEFT OUTER JOIN`以便它可以从`product`表中检索每个产品，而不管表中的图像如何，`product_image`如下所示。

```
PROD_IMAGE_ID     PROD_ID      PROD_IMAGE
662               284          3562298873030291049_Winter.jpg
644               283          7551758088174802741_9392401244_SS_2505.jpg
595               124          298082252715152799_SS_5012.jpg
 -                101                -
 -                81                 - 
566               62           7826143854352037374_SS_5004-A.jpg 
```

这可以通过以下本机 SQL 来完成，但 HQL 似乎不可能，因为 HQL 只允许在`SELECT`和`WHERE`子句中进行子查询，`FROM`在 HQL 中不允许子句中的子查询。

```
SELECT 
     t.prod_image_id,
     p.prod_id,
     t.prod_image 
FROM
     product p 
LEFT OUTER JOIN(
     SELECT 
           pi.prod_image_id,
           pi.prod_id,
           pi.prod_image 
     FROM
           product_image pi 
     INNER JOIN (
           SELECT 
                MAX(pi.prod_image_id) AS prod_image_id 
           FROM 
                product_image pi
           GROUP BY 
                pi.prod_id
     ) prod_image 
     ON pi.prod_image_id=prod_image.prod_image_id
)t ON p.prod_id=t.prod_id ORDER BY p.prod_id DESC; 
```

我的谷歌搜索表明这对于单个 HQL 语句是不可行的。这对 HQL 有可能吗？请确认我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T20:11:41.417

你是对的，你不能在 from 子句中使用子查询。

[http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html_single/#queryhql-subqueries](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html_single/#queryhql-subqueries)

但是您可以使用单独的查询，例如：

```
select p 
from Product p 
where p.productImageSet is empty 
```

查找没有产品图片的产品。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T17:52:24.013

我将创建一个 Oracle 视图来实现您的查询，通过 HQL 中的简单选择为您提供所需的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-19T14:24:34.487

我目前在 MySQL 中具有相同的表关系。我目前正在尝试学习JPA。因此，我使用的是 Hibernate 提供的 JPA 2.0 - 最终版本 4.2.7。以下JPQL，

```
select 
      p.prodId, 
      pi.productImageId, 
      p.prodName, 
      pi.prodImage 
from 
      Product p 
left join 
      p.productImageSet pi 
where 
      pi.productImageId in (
          select 
               max(productImageId) as productImageId 
          from  
               ProductImage 
          group by 
               prodId
   ) 
or pi.productImageId is null
order by p.prodId 
```

以及相应的条件查询，

```
CriteriaBuilder criteriaBuilder=entityManager.getCriteriaBuilder();
CriteriaQuery<Tuple>criteriaQuery=criteriaBuilder.createTupleQuery();
Metamodel metamodel=entityManager.getMetamodel();
EntityType<Product>entityType=metamodel.entity(Product.class);
Root<Product>root=criteriaQuery.from(entityType);
SetJoin<Product, ProductImage> join = root.join(Product_.productImageSet, JoinType.LEFT);

List<Selection<?>>selections=new ArrayList<Selection<?>>();
selections.add(root.get(Product_.prodId));
selections.add(root.get(Product_.prodName));
selections.add(join.get(ProductImage_.prodImage));
selections.add(join.get(ProductImage_.productImageId));
criteriaQuery.multiselect(selections);

Subquery<Long>subquery=criteriaQuery.subquery(Long.class);
Root<ProductImage> subRoot = subquery.from(ProductImage.class);
subquery.select(criteriaBuilder.max(subRoot.get(ProductImage_.productImageId)));
subquery.groupBy(subRoot.get(ProductImage_.prodId).get(Product_.prodId));

Predicate []predicates=new Predicate[2];
predicates[0]=criteriaBuilder.in(join.get(ProductImage_.productImageId)).value(subquery);
predicates[1]=join.get(ProductImage_.productImageId).isNull();

criteriaQuery.where(criteriaBuilder.or(predicates));
criteriaQuery.orderBy(criteriaBuilder.desc(root.get(Product_.prodId)));

TypedQuery<Tuple> typedQuery = entityManager.createQuery(criteriaQuery);
List<Tuple> tuples = typedQuery.getResultList(); 
```

JPQL 和条件查询都生成以下 SQL 查询。

```
select
    product0_.prod_id as col_0_0_,
    productima1_.product_image_id as col_1_0_,
    product0_.prod_name as col_2_0_,
    productima1_.prod_image as col_3_0_ 
from
    social_networking.product product0_ 
left outer join
    social_networking.product_image productima1_ 
        on product0_.prod_id=productima1_.prod_id 
where
    productima1_.product_image_id in (
        select
            max(productima2_.product_image_id) 
        from
            social_networking.product_image productima2_ 
        group by
            productima2_.prod_id
    ) 
    or productima1_.product_image_id is null 
order by
    product0_.prod_id desc 
```

导致获取问题中提到的所需结果集 - 不是我们在通常的 RDBMS 系统中看到的方式，但它可以工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-07T08:20:21.577

如果对查询语句稍作修改，就可以做到这一点。因此，以下标准查询确实需要。

```
CriteriaBuilder criteriaBuilder=entityManager.getCriteriaBuilder();
CriteriaQuery<ProductUtils>criteriaQuery=criteriaBuilder.createQuery(ProductUtils.class);
Metamodel metamodel = entityManager.getMetamodel();
Root<Product> root = criteriaQuery.from(metamodel.entity(Product.class));

ListJoin<Product, ProductImage> join = root.join(Product_.productImageList, JoinType.LEFT);

List<Selection<?>>selections=new ArrayList<Selection<?>>();
selections.add(root.get(Product_.prodId));
selections.add(root.get(Product_.prodName));
selections.add(join.get(ProductImage_.prodImage));
selections.add(join.get(ProductImage_.productImageId));
criteriaQuery.select(criteriaBuilder.construct(ProductUtils.class, selections.toArray(new Selection[0])));

Subquery<Long> subquery = criteriaQuery.subquery(Long.class);
Root<ProductImage> prodImageRoot = subquery.from(metamodel.entity(ProductImage.class));
subquery.select(prodImageRoot.get(ProductImage_.productImageId));
subquery.where(criteriaBuilder.equal(root, prodImageRoot.get(ProductImage_.prodId)), criteriaBuilder.lessThan(join.get(ProductImage_.productImageId), prodImageRoot.get(ProductImage_.productImageId)));

criteriaQuery.where(criteriaBuilder.exists(subquery).not());
criteriaQuery.orderBy(criteriaBuilder.desc(root.get(Product_.prodId)));
List<ProductUtils> list = entityManager.createQuery(criteriaQuery).getResultList(); 
```

此条件查询生成以下所需的 SQL 查询，该查询同样执行问题中指定的相同功能。

```
select
    product0_.prod_id as col_0_0_,
    product0_.prod_name as col_1_0_,
    productima1_.prod_image as col_2_0_ ,
    productima1_.product_image_id as col_3_0_ 
from
    social_networking.product product0_ 
left outer join
    social_networking.product_image productima1_ 
        on product0_.prod_id=productima1_.prod_id 
where
    not (exists (select
        productima2_.product_image_id 
    from
        social_networking.product_image productima2_ 
    where
        product0_.prod_id=productima2_.prod_id 
        and productima1_.product_image_id<productima2_.product_image_id)) 
order by
    product0_.prod_id desc 
```

# php - 图片 URL 和分页

> ID：15862354
> 
> 赞同：1
> 
> 时间：2013-04-07T12:26:30.610
> 
> 标签：php, image, codeigniter, pagination

我正在开发一个图片库网站。现在我想为每张图片设置唯一的 URL，例如：

```
www.xyz.com/photos/aaaa.jpg 
```

我正在使用 CodeIgniter 来实现分页。

分页工作正常，但我得到的 URL 如下：

```
/index.php/main/latest/5 
```

我可以删除分页并获取此 URL，`www.xyz.com/photos/aaaa.jpg`但是如何转到下一个/上一个图像？我根据创建日期显示图像并具有搜索功能。

所以我可以实现不同的 URL 并进行分页。因此，如果任何人都可以共享图像并可以导航上一个/下一个。

例如[http://www.imdb.com/media/rm397582592/rg117676544](http://www.imdb.com/media/rm397582592/rg117676544)，您仍然可以在此图库中转到下一个/上一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T20:19:47.887

我认为您误解了分页和图片网址：

分页网址如下所示：

```
site.com/photos/3 /*where 3 is the pagination number of page or page offset*/ 
```

虽然图像正确的链接看起来像：

```
site.com/img/myimage.jpg 
```

例如，如果您在 javascript 弹出窗口中显示图像，则图像链接是一个单独的页面或弹出窗口

因此，您将获得 1 个画廊页面，在其中对所有图像进行分页，一旦单击单个图像，您将获得单个图像页面

所以分页链接与单个图像 url 没有任何共同之处

# drupal - 根据用户的 Drupal 6 角色向用户显示不同的菜单链接

> ID：15862355
> 
> 赞同：1
> 
> 时间：2013-04-07T12:26:31.480
> 
> 标签：drupal, menu, drupal-6, hyperlink

我想根据用户的角色向用户显示不同的导航链接和数据。

我可以使用哪些模块来实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T14:45:15.667

使用[hook_menu_alter](http://api.drupal.org/api/drupal/developer!hooks!core.php/function/hook_menu_alter/6) ()

```
/*
* Implementation of hook_menu_alter()
*/
function MYMODULE_menu_alter(&$items)
{
   $items['your/path']['access callback'] = _custom_access_callback_for_this_page();
} 
```

在访问回调函数（此处：）`_custom_access_callback_for_this_page`中，编写您想要的任何验证。

不要忘记在你的 `hook_menu_alter() 实现中进行任何更改后清除缓存。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T15:10:39.293

我真的很喜欢这个模块`Drupal 6`，你应该看看： [每个角色的菜单](http://drupal.org/project/menu_per_role)

# php - 第二个展开的字符串是 php 中第一个展开的字符串的值

> ID：15862356
> 
> 赞同：0
> 
> 时间：2013-04-07T12:26:31.643
> 
> 标签：php, mysqli

我是 php 新手 .. 这是我的问题：我有 2 个展开的字符串，我想让第 2 个展开的字符串成为第一个展开的字符串的值，结果我想插入到我的数据库中，但是我插入没有任何问题。

例如，在下面的代码中，我希望 $date 成为 $layer 的值。$layer 的第一个词是 $date 的第一个词的值，第二个词是第二个词的值，依此类推..

```
$layer1=$_POST['layer'];

$date=$_POST['date'];

$layer=explode(",",$layer1);
$date=explode(",",$date);

foreach ($layer as $layer2=>$date )
{ 
//my problem is how to make the date a value to my layer?
$con=mysqli_connect("localhost","xxxx","xxx") or die ('unable to connect server');
mysqli_select_db($con, "xxxxxxxx") or die ('cant connect database');

$x="INSERT INTO xxxxx (Layer, date ) VALUES ('$layer2', '$date') ";
$result=mysqli_query($con,$x) or die ('cant proceed query');

//i want to appear look like this on database:

LAYER       DATE
layer1      date1
layer2      date2
layer3      date3

say my data inputted from form is this one:

$_POST['layer']=layer1,layer2,layer3
$_POST['date']=date1,date2,date3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T15:26:40.777

```
$con = mysqli_connect("localhost","xxxx","xxx", "xxxxxxxx");

$layer_arr = explode(",",$_POST['layer']);
$date_arr  = explode(",",$_POST['date']);

foreach ($layer_arr as $key => $layer )
{ 
    $date  = $date_arr[$key];
    $date  = mysqli_real_escape_string($con, $date);
    $layer = mysqli_real_escape_string($con, $layer);

    $sql   = "INSERT INTO xxxxx (Layer, date ) VALUES ('$layer', '$date') ";
    $result=mysqli_query($con,$x) or trigger_error(mysqli_error($con));
} 
```

请注意，您必须在查询中使用占位符，而不是手动格式化字符串，因此使用 PDO 而不是 mysqli。

# php - 检查字符串是否包含多个特定单词

> ID：15862361
> 
> 赞同：47
> 
> 时间：2013-04-07T12:26:59.690
> 
> 标签：php

如何检查一个字符串是否包含多个特定单词？

我可以使用以下代码检查单个单词：

```
$data = "text text text text text text text bad text text naughty";
if (strpos($data, 'bad') !== false) {
    echo 'true';
} 
```

但是，我想添加更多单词来检查。像这样的东西：

```
$data = "text text text text text text text bad text text naughty";
if (strpos($data, 'bad || naughty') !== false) {
    echo 'true';
} 
```

（如果找到这些词中的任何一个，那么它应该返回 true）

但是，上面的代码不能正常工作。任何想法，我做错了什么？

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2013-04-07T12:31:38.720

为此，您将需要[正则表达式](http://php.net/manual/en/reference.pcre.pattern.syntax.php)和[preg_match](http://php.net/manual/en/function.preg-match.php)函数。

就像是：

```
if(preg_match('(bad|naughty)', $data) === 1) { } 
```

**您的尝试失败的原因**

正则表达式由 PHP 正则表达式引擎解析。您的语法问题在于您使用了`||`运算符。这不是正则表达式运算符，因此它被视为字符串的一部分。

如上所述，如果它被视为您要匹配的字符串的一部分：`'bad || naughty'`作为字符串，而不是表达式！

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-04-07T12:30:41.053

你不能做这样的事情：

```
if (strpos($data, 'bad || naughty') !== false) { 
```

相反，您可以使用正则表达式：

```
if(preg_match("/(bad|naughty|other)/i", $data)){
 //one of these string found
} 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-04-07T12:52:06.450

[strpos](http://php.net/manual/en/function.strpos.php)确实搜索您作为第二个参数传递的确切字符串。如果要检查多个单词，则必须使用不同的工具

### 常用表达

```
if(preg_match("/\b(bad|naughty)\b/", $data)){
    echo "Found";
} 
```

（[preg_match](http://php.net/manual/en/function.preg-match.php)如果字符串中有匹配则返回 1，否则返回 0）。

### 多个 str_pos 调用

```
if (strpos($data, 'bad')!==false or strpos($data, 'naughty')!== false) {
    echo "Found";
} 
```

### 爆炸

```
if (count(array_intersect(explode(' ', $data),array('bad','naugthy')))) {
    echo "Found";
} 
```

对我来说，首选的解决方案应该是第一个。很明显，由于使用了正则表达式，可能效率不高，但它不会报告误报，例如，如果字符串包含单词*badmington ，它不会触发回显*

如果正则表达式有很多单词，则创建它可能会成为负担（尽管没有什么是你无法用一行 php 解决的`$regex = '/\b('.join('|', $badWords).')\b/';`

第二个是直截了当的，但无法区分*bad*和*badmington*。

如果字符串用空格分隔，第三个将字符串拆分为单词，制表符会破坏您的结果。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-12-28T09:39:49.767

`if(preg_match('[bad|naughty]', $data) === true) { }`

上面说的不太对。

“preg_match() 如果模式匹配给定的主题，则返回 1，如果不匹配，则返回 0，如果发生错误，则返回 FALSE。”

所以它应该只是：

```
if(preg_match('[bad|naughty]', $data)) { } 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-09-23T13:29:11.500

**substr_count()**

我想添加另一种方法`substr_count()`（在所有其他答案之上）：

```
if (substr_count($data, 'bad') || substr_count($data, 'naughty')){
    echo "Found";
} 
```

`substr_count()`正在计算字符串出现的次数，所以当它为 0 时，你就知道它没有找到。我会说这种方式比使用`str_pos()`（其中一个答案中提到）更具可读性：

```
if (strpos($data, 'bad')!==false || strpos($data, 'naughty')!== false) {
    echo "Found";
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-04-07T12:30:48.817

你必须 strpos 每个单词。现在您正在检查是否有一个字符串说明

```
'bad || naughty' 
```

这不存在。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-04-21T23:10:52.337

使用数组作为要测试的单词和[`array_reduce()`](https://www.php.net/manual/en/function.array-reduce.php)函数的简单解决方案：

```
$words_in_data = array_reduce( array( 'bad', 'naughty' ), function ( $carry, $check ) use ( $data ) {
    return ! $carry ? false !== strpos( $data, $check ) : $carry;
} ); 
```

然后你可以简单地使用：

```
if( $words_in_data ){
    echo 'true';
} 
```

# c++ - Linux 中是否有任何本地函数可以在不使用外部库的情况下加载和保存图像？

> ID：15862362
> 
> 赞同：0
> 
> 时间：2013-04-07T12:27:00.880
> 
> 标签：c++, c, linux, save-image, loadimage

在 Windows `LoadImage`API 中，将图像加载到内存中。

FreeImage ( [http://freeimage.sourceforge.net](http://freeimage.sourceforge.net) ) 是一个用于加载和保存图像的跨平台库，但我想使用像`LoadImage`Windows 中这样的函数，它不依赖于任何外部库，如 FreeImage。

Linux 中是否有任何本地函数可以在不使用外部库的情况下加载和保存图像？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T12:31:44.200

不，没有。加载和保存图像真的不是像 Linux 这样的操作系统内核的工作。内核管理内存、IO 和 CPU 资源，仅此而已。其他一切都应该由用户级代码完成。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-07T12:31:57.687

Linux 是一个内核，它甚至不是一个真正的操作系统。那里没有图书馆可以帮助您处理此类问题。

在 Windows 中它实际上是相同的，除了 Windows 默认包含大量库。

如果你想在 Linux 上做类似的事情，你也必须安装一些库。

# ruby-on-rails - 在视图中显示关联模型的属性

> ID：15862365
> 
> 赞同：2
> 
> 时间：2013-04-07T12:27:10.217
> 
> 标签：ruby-on-rails, ruby, associations, rails-activerecord

我想获取在博客应用程序中创建文章的用户的用户名或电子邮件（两者都在用户表中）。目前我能够从articles_controller.rb 获取用户ID

```
def create
  @article = Article.new(params[:article])
  @article.user_id = current_user.id
  @article.save
  redirect_to article_path(@article)
end 
```

但不知道如何获取相同的用户名或电子邮件。基本上我想在文章索引页面上显示用户名或电子邮件。请建议我如何完成它

用户.rb

```
class User < ActiveRecord::Base
    has_many :articles
    has_many :comments
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :username, :email, :password, :password_confirmation, :remember_me
   attr_accessible :title, :body
end 
```

文章.rb

```
class Article < ActiveRecord::Base
   attr_accessible :title, :body
   has_many :comments
   belongs_to :user
end 
```

文章控制器.rb

```
class ArticlesController < ApplicationController
    def index
        @articles = Article.all
    end

    def show
      @article = Article.find(params[:id])
    end

    def new
      @article = Article.new
    end

    def create
      @article = Article.new(params[:article])
      @article.user_id = current_user.id
      @article.save
      redirect_to article_path(@article)
    end

    def destroy
      @article = Article.find(params[:id])
      @article.destroy
      redirect_to action:  'index'  
    end

    def edit
      @article = Article.find(params[:id])
    end

    def update
      @article = Article.find(params[:id])
      @article.update_attributes(params[:article])
      flash.notice = "Article '#{@article.title}' Updated!"
      redirect_to article_path(@article)
     end
end 
```

文章/index.html.erb

```
 <div style="color:#666666; margin-top:10px"> <%= article.created_at %></div>
     <div style="color:#666666; margin-top:10px"> <%= article.user_id %></div> 
```

文章表

```
class CreateArticles < ActiveRecord::Migration
  def change
    create_table :articles do |t|
      t.string :title
      t.text  :body 
      t.timestamps
    end
    add_index :articles, [:user_id, :created_at]
  end
end 
```

我能够在视图中获取用户 ID，但不知道如何输入用户名或电子邮件。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T12:34:38.003

`user`您已经在`Article`模型类上定义了一个与`belongs_to :user`. 这将创建一个返回关联用户的`user`方法`Article`，以便您在视图中：

```
<%= article.user.email %> 
```

将输出关联用户的电子邮件，或者：

```
<%= article.user.email if article.user %> 
```

以满足零用户价值。或者编写一个帮助程序以将此逻辑排除在视图之外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T12:50:57.623

您已经设置了文章和用户模型之间的关系。因此，在您的文章索引页面中，您拥有 @articles 变量中的所有文章。您可以使用以下代码轻松获取特定文章的特定用户，

```
@articles.each do |article|
  user = article.user #gives the user of this current article. From this  
                      #objecct you can easily get the username, email or everything specific to user.
  email = user.email  #gives email of article's user or you can directly give artile.user.email
end 
```

像这样你可以获得用户的所有属性。

# c# - 带有非字符串参数的 Windows Phone 8 MVVM 灯光导航

> ID：15862366
> 
> 赞同：1
> 
> 时间：2013-04-07T12:27:17.503
> 
> 标签：c#, .net, mvvm, windows-phone-8, mvvm-light

我是 .NET/c# 领域的新手，我正在尝试开发 Windows Phone 8 应用程序。我有几页显示 Objects( `ListPage`) 的列表。所有这些页面都将具有过滤功能，使用 commom `FilterPage`。

我需要的是将对象从 传递`ListPage`到`FilterPage`. 我想使用 MVVM（MVVM 灯光模板）。我已经设法使用消息传递框架实现了几乎所有内容。我正在使用`FilterMessage`将对象传递到其构造函数中的 a 。和收听此消息`ListPage`。`FilterViewModel`将`ListPage`导航到`FilterPage`并且`FilterViewModel`将从消息中获取对象。`ListPage`得到正确通知，但没有`FilterViewModel`得到通知，因为`FilterViewModel`仅在第`FilterPage`一次显示后才创建。

是否可以通过 App 启动来初始化 FilterViewModel？如果您认为这不是要走的路，请告诉我原因：）

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T13:00:16.717

在这种情况下，我所做的是将要传递到其他页面的实例添加到 PhoneApplicationService.Current.State 下的 Session 对象中。

另一方面，完成导航后，您可以提取实例，并且应该将其从状态中删除。

请注意，如果您的应用程序在 State 中有实例时进入后台，WP 将尝试序列化它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T13:38:48.827

`FilterViewModel`我设法通过在构造函数中创建实例来使其工作。我`ViewModelLocator`不确定这是最好的方法。希望有更多经验的人与我们分享他的想法。

```
public ViewModelLocator()
{
    ServiceLocator.SetLocatorProvider(() => SimpleIoc.Default);

    SimpleIoc.Default.Register<FilterViewModel>();

    ServiceLocator.Current.GetInstance<FilterViewModel>();
} 
```

# python - Python：匹配包含正则表达式代码的两个变量的 OR

> ID：15862367
> 
> 赞同：2
> 
> 时间：2013-04-07T12:27:22.113
> 
> 标签：python, regex

我要做的是获取包含通配符的用户输入文本（所以我需要保持这种方式），但还要查找指定的输入。因此，例如，我在下面工作时使用管道 |。

我想出了如何使这项工作：

```
dual = 'a bunch of stuff and a bunch more stuff!'
reobj = re.compile('b(.*?)f|\s[a](.*?)u', re.IGNORECASE)
result = reobj.findall(dual)
for link in result:
        print link[0] +'    ' + link[1] 
```

返回：
unch o
       nd ab

同样

```
dual2 = 'a bunch of stuff and a bunch more stuff!'
#So I want to now send in the regex codes of my own.
userin1 = 'b(.*?)f' 
userin2 = '\s[a](.*?)u'
reobj = re.compile(userin1, re.IGNORECASE)
result = reobj.findall(dual2)
for link in result:
        print link[0] +'    ' + link[1] 
```

哪个返回：
u n
n

我不明白它在做什么，好像我摆脱了打印中的所有保存链接 [0] 我得到 ：
你

但是，我可以传入用户输入的正则表达式字符串：

```
dual = 'a bunch of stuff and a bunch more stuff!'
userinput = 'b(.*?)f'
reobj = re.compile(userinput, re.IGNORECASE)
result = reobj.findall(dual)
print(result) 
```

但是当我尝试使用管道将其更新为两个用户字符串时：

```
dual = 'a bunch of stuff and a bunch more stuff!'
userin1 = 'b(.*?)f' 
userin2 = '\s[a](.*?)u'
reobj = re.compile(userin1|userin2, re.IGNORECASE)
result = reobj.findall(dual)
print(result) 
```

我得到错误：

reobj = re.compile(userin1|userin2, re.IGNORECASE) TypeError: unsupported operand type(s) for |: 'str' and 'str'

我经常收到此错误，例如如果我在 userin1|userin2 周围加上括号 () 或 []。

我发现了以下内容：

[Python 正则表达式或](https://stackoverflow.com/questions/8609597/python-regular-expressions-or)

但无法让它工作;..{-(。

我想做的是能够理解如何传递这些正则表达式变量，例如 OR 并返回两者的所有匹配项以及诸如 AND 之类的东西 - 这最终是有用的，因为它将在文件并让我知道哪些文件包含具有各种逻辑关系 OR、AND 等的特定单词。

非常感谢您的想法，

布赖恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T20:50:38.343

虽然我无法从 A. Rodas 那里得到工作的答案，但他给出了 .join 的想法。我制定的示例 - 尽管返回的结果略有不同（在链接 [0] 和链接 [1] 中）所需的结果。

```
userin1 = '(T.*?n)'
userin2 = '(G.*?p)'
list_patterns = [userin1,userin2]
swaplogic = '|'
string = 'What is a Torsion Abelian Group (TAB)?'
theresult = re.findall(swaplogic.join(list_patterns), string)
print theresult
for link in theresult:
        print link[0]+'  '+link[1] 
```

# node.js - Derby.js：将仅客户端的代码拆分为多个文件

> ID：15862370
> 
> 赞同：0
> 
> 时间：2013-04-07T12:28:14.617
> 
> 标签：node.js, express, derbyjs

我正在尝试将一些仅限客户端的代码拆分为 Derby.js 项目中的多个文件。它只能是客户端，因为它与 TinyMCE 编辑器交互。所以我尝试了：

```
app.ready(function(model) {
    var tiny = derby.use(require('../../lib/app/TinyMCE'))
    //other client-side code
} 
```

并将以下内容放入`lib/app/TinyMCE.js`：

```
var derby = require('derby')
module.exports.decorate = 'derby'; //because before I got an 'decorate' is undefined error...
module.exports.TinyMCE = function() {
    //code
} 
```

但现在我遇到了一个`object is not a function`错误。

我什至走在正确的轨道上吗？我也考虑将代码放在公共目录中，但是一年的缓存过期使得这很不方便。

另外，真的没有`isServer`或`isClient`方法可以查询吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T13:51:03.680

好的，我不知道这是否是一个好方法，但我得到了它的工作：

```
module.exports = tiny
tiny.decorate = 'derby'
function tiny() {
     //code
} 
```

# php - 是直接从一个站点检索信息还是通过我的网络服务器使用 php 检索信息更可取？

> ID：15862371
> 
> 赞同：1
> 
> 时间：2013-04-07T12:28:49.403
> 
> 标签：php, android, webserver, jsoup

我有一个应用程序可以检索一些信息并将它们从某个公共网站提供给用户。但是，我不确定我是否应该让我的应用程序立即连接到目标网站，或者它应该使用简单的`PHP`脚本 ( `JSON`) 通过我的 Web 服务器获取信息。实际上，我正在使用`Jsoup`来获取信息，并且我都尝试了，并且它们使用`Jsoup`. 但是，由于上述混淆，我还没有发布我的应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T12:32:11.580

使用网络服务。如果您的客户端具有解析 HTML 的逻辑，则它可能会在网页更改时中断。Web 服务可以吸收此更改并进行更正，但您的客户端不能。除非您发布另一个版本的应用程序，否则不会，这可能会很痛苦。

# php - 将数字转换为时间，或者换句话说，在字符串中间插入 :

> ID：15862373
> 
> 赞同：1
> 
> 时间：2013-04-07T12:29:04.730
> 
> 标签：php, string, time

我怎么能在 840 或 1530 之类的数字中间插入一个：。我基本上想在倒数第三个位置添加一个：，因为我得到了一些带有 3 的字符串和一些带有 4 个数字的字符串。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T12:33:30.043

试试这个：

```
$x = '1930';
echo substr($x, 0, strlen($x) - 2) . ':' . substr($x, strlen($x) - 2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T12:45:43.300

这是另一种方式：

```
<?php
$int = 1530;
$str = (string) $int;
$newstring = substr_replace($str, ':', 3, 0);
echo $newstring;
?> 
```

# code-analysis - CA1703 代码分析错误和 CasingExceptions

> ID：15862381
> 
> 赞同：1
> 
> 时间：2013-04-07T12:29:42.853
> 
> 标签：code-analysis

我有一个拼写正确的文本资源“{0} by Test GmbH”，因为 GmbH 是“Gesellschaft mit beschränkter Haftung”的官方缩写。我了解 Microsoft CodeAnalysing 试图将其标记为“Gmb”和“H”，但我认为应该可以使用此 CodeAnalysingDictionary 引入这个具有特定拼写和大小写的术语：

```
<?xml version="1.0" encoding="utf-8" ?>
<Dictionary>
  <Words>
    <Unrecognized>
    </Unrecognized>
    <Recognized>
      <Word>Gmbh</Word>
    </Recognized>
    <Deprecated>
    </Deprecated>
    <DiscreteExceptions>
      <Term>GmbH</Term>
    </DiscreteExceptions>
  </Words>
  <Acronyms>
    <CasingExceptions>
      <Acronym>GmbH</Acronym>
    </CasingExceptions>
  </Acronyms>
</Dictionary> 
```

但是它不起作用：

```
CA1703  Resource strings should be spelled correctly    
In resource 'MyCode.Properties.Resources.resx', 
referenced by name 'CopyrightWithCompanyName', 
correct the spelling of 'Gmb' in string value '{0} by Test GmbH'. 
```

如何正确调整字典？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-06T19:41:03.003

实际上，如果`GmbH`应该解释为由单词and组成的*复合词*，则of的大小写是正确的。`Gmb``H``GmbH`

因此，为了`GmbH`被代码分析视为有效，从而消除[CA1703](https://msdn.microsoft.com/en-us/library/bb264483.aspx)，只需将`gmb`作为[识别词](https://msdn.microsoft.com/en-us/library/bb514188.aspx#BKMK_DictionaryWordsRecognizedWord)添加到您的[自定义字典](https://msdn.microsoft.com/en-us/library/bb514188.aspx)文件中：

```
<Dictionary>
  <Words>
    <Recognized>
      <Word>gmb</Word>
      <!-- ... -->
    </Recognized>
    <!-- ... -->
  </Words>
  <!-- ... -->
</Dictionary> 
```

我确认这在 Visual Studio 2013 中有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-20T12:26:19.310

根据[http://msdn.microsoft.com/en-us/library/bb514188.aspx#bkmk_dictionaryacronymscasingexceptions，CasingExceptions](http://msdn.microsoft.com/en-us/library/bb514188.aspx#bkmk_dictionaryacronymscasingexceptionsacronym) 中的首字母缩写词条目仅适用于 CA1709：标识符应正确大小写，而不是资源。

我有完全相同的问题，但除了抑制警告之外没有其他解决方案

# c# - 测试异步工作的组件

> ID：15862383
> 
> 赞同：2
> 
> 时间：2013-04-07T12:29:59.130
> 
> 标签：c#, unit-testing, windows-runtime, mstest, winrt-async

我们有组件封装了异步逻辑。现在我的问题是，我该如何测试这个，因为我的断言的时间可以正常运行但太早了？

给它一个类似于全局 on-all-Thread's-wait 命令的东西？

你怎么做？

我使用 MS 测试，例如：

```
target = new MainViewModel(MOCK.GetDataService()); // The Magic asynchronous logic
lock (this) { Monitor.Wait(this, 50); } // my stupid solution
Assert.AreEqual(10, target.Count); // Assert 
```

# javascript - 单击 JSF 表时打开一个新页面

> ID：15862387
> 
> 赞同：0
> 
> 时间：2013-04-07T12:30:24.720
> 
> 标签：javascript, jsf, jsf-2

我有这个“h:outputLink”，当我单击 JSF 表行时，我用它来打开一个新页面：

```
<h:outputLink id="lnkHidden" value="page.html"  style="text-decoration:none; color:white;">
    <f:param name="id" value="#{item.value}" />
</h:outputLink> 
```

单击一行时，我使用此 JavaScript 打开一个新页面：

```
// For clicking on a row and opening new page
function addOnclickToDatatableRows() {
    //gets all the generated rows in the html table
    var trs = document.getElementById('form:dataTable').getElementsByTagName('tbody')[0]
    .getElementsByTagName('tr');
    //on every row, add onclick function (this is what you're looking for)
    for (var i = 0; trs.length > i; i++) {
        var cells = trs[i].cells;                    
        for(var j=1; j < cells.length; j++){
            cells[j].onclick = new Function("rowOnclick(this.parentElement)");
        }                    
    }
}

function rowOnclick(tr) {
    var elements = tr.cells[0].childNodes;
    for(var i = 0; elements.length > i; i++) {                           
        if ((typeof elements[i].id != "undefined") && (elements[i].id.indexOf("lnkHidden") > -1)) {
            location.href=elements[i].href;
            break;
        }
    }                
    return false;
} 
```

我以这种方式更新了代码：

```
<h:commandLink id="lnkHidden" style="text-decoration:none; color:white;"
               actionListener="#{bean.pageRedirect}">
    <f:setPropertyActionListener target="#{bean.sessionValue}" value="#{item.value}" />
</h:commandLink> 
```

托管豆：

```
public void setSessionValue(Object value)
    {

       ...........

    }

public String pageRedirect()
    {

        return "/DatacenterProfile.html";
    } 
```

事实证明，JavaScript 没有正常工作，因为我更改为`h:commandLink`. 你能帮我解决这个问题吗？

***附言***

我测试使用`h:commandButton`

```
<h:commandButton id="lnkHidden" style="text-decoration:none; color:white; display:none"
               action="#{bean.pageRedirect}">
    <f:setPropertyActionListener target="#{bean.sessionValue}" value="#{item.value}" />
</h:commandButton> 
```

当我点击表格时，我总是被重定向到页面

```
http://<ip>:8080/app/undefined 
```

我想问题出在 JavaScript 代码中。任何想法如何解决这一问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T14:22:10.193

我不知道我是否解决了你的问题。但是，如果您尝试在单击 时进行重定向`commandLink`，我认为您的问题是，您不能使用该属性进行重定向`actionListener`，而是应该使用该`action`属性，否则 的返回值`pageRedirect`将无效。

查看[oracle 文档](http://docs.oracle.com/javaee/5/javaserverfaces/1.2/docs/tlddocs/h/commandLink.html)以获得进一步的解释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T07:15:57.393

您应该调试您的 javascript，尝试显示**href**的值，看看它是否是您想要的：

```
function rowOnclick(tr) {
    var elements = tr.cells[0].childNodes;
    for(var i = 0; elements.length > i; i++) {                           
        if ((typeof elements[i].id != "undefined") && (elements[i].id.indexOf("lnkHidden") > -1)) {

            alert(elements[i].href);

            location.href=elements[i].href;
            break;
        }
    }                
    return false;
} 
```

问候，

# sql - PostgreSQL 错误：运算符不存在：名称 = 整数

> ID：15862389
> 
> 赞同：8
> 
> 时间：2013-04-07T12:30:39.777
> 
> 标签：sql, postgresql

执行简单查询时出现运算符不匹配错误。这是什么原因造成的？

```
dev_db=# `select * from registrants where user=1;`
错误：运算符不存在：名称 = 整数
LINE 1: select * from registrants where user=1;
                                            ^
提示：没有运算符与给定名称和参数类型匹配。您可能需要添加显式类型转换。

```

表定义：

```
dev_db=# \d+ 注册人
                              表“public.registrants”
    专栏 | 类型 | 修饰符 | 存储 | 描述
--------------+--------------+-------- ------------+---------+-------------
 用户 | 整数 | 不为空 | 平原 |
 学位 | 正文 | | 扩展 |
 标题 | 正文 | | 扩展 |
 组织 | 正文 | | 扩展 |
 地址 | 正文 | | 扩展 |
 城市| 正文 | | 扩展 |

索引：
    “registrants_pkey”主键，btree（“用户”）
外键约束：
    "registrants_country_fkey" FOREIGN KEY (country) REFERENCES countries(id)
    "registrants_user_fkey" FOREIGN KEY ("user") REFERENCES users(id)
引用者：
    TABLE "class_evaluations" CONSTRAINT "class_evaluations_registrant_fkey" FOREIGN KEY (registrant) REFERENCES registrants("user")

触发器：
    archive_registrants 在删除或更新每行执行程序的注册人之前 archive_reg_table()
有 OID：没有

```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-07T12:32:31.533

根据手册，`USER`是保留关键字。您必须引用它以避免语法错误。

```
SELECT * FROM registrants WHERE "user" = 1 
```

[PostgreSQL 保留关键字列表](http://www.postgresql.org/docs/9.2/static/sql-keywords-appendix.html)

如果您有时间更改数据库，请将列名更改为非保留关键字。这将帮助您避免未来的头痛。

# google-app-engine - 如何在 Datastore GAE Python 中定义键名？

> ID：15862393
> 
> 赞同：0
> 
> 时间：2013-04-07T12:31:04.393
> 
> 标签：google-app-engine, web-applications, python-2.7, google-cloud-datastore, app-engine-ndb

OS Win7，GAE 1.7.6，Python 2.7.3，还在学习GAE..

处理项目，需要输入表单来扩展其内容（姓名、电子邮件、电话..），并在数据存储中定义键名，最好以定义方式增加。在我总是让数据存储区自动生成 id 之前，我从未使用过 Key Name。

使用 appcfg.py 工具填充数据存储区以从 CSV 文件导入数据。

当我添加新内容时。链接：[http ://s17.postimg.org/6pfqjv6gv/Unffaftitled.png](http://s17.postimg.org/6pfqjv6gv/Unffaftitled.png)

在 Datastore 中定义键名的一些基本示例是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T17:40:02.713

这是你要找的吗？

```
class Employee(db.Model):
  first_name = db.StringProperty()
  last_name = db.StringProperty()

employee = Employee(key_name='asalieri',
                    first_name='Antonio',
                    last_name='Salieri')

employee.put() 
```

这将创建一个具有键 name 的实体`asalieri`。然后，您可以使用 检索此实体`Employee.get_by_key_name ('asalieri')`。

这是此处文档中的示例代码：[https ://developers.google.com/appengine/docs/python/datastore/entities#Creating_an_Entity](https://developers.google.com/appengine/docs/python/datastore/entities#Creating_an_Entity)

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T07:26:41.027

根据[官方文档](https://developers.google.com/appengine/docs/python/tools/uploadingdata#Using_Automatic_Configuration)，您可以将`__key__`伪属性映射到 bulkloader .yaml 配置文件中相应的 CSV 列，例如：

```
transformers:
- kind: MyKind
  ...
  property_map:
  - property: __key__
    external_name: MyKeyColumn
    ... 
```

（如果您希望数据存储区像以前一样自动为您生成密钥 ID，那么您必须将其`property`从 .yaml 文件中删除。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T06:54:55.447

## 快速建议

> *在项目上工作，需要有**输入表单来扩展其内容（姓名、电子邮件、电话..），并在数据存储中使用定义的键名，最好以定义方式增加**。*

我花了一两分钟试图理解你在说什么。

不要不加思索地急于输入你想问的内容。
如果您想从其他人那里得到深思熟虑的答案，请尝试清楚地提出问题。

## 我对你的问题

为什么你认为你需要**手动**定义键名？
你认为你得到了什么好处？

根据我的推断，您似乎不了解 GAE HRD 数据存储的基础知识。
如果您不了解 HRD 数据存储，则无法在 GAE 上有效编码。

## 我的答案

**你的问题没有简短的答案。**
我只能建议您花几个小时观看和阅读以下内容。
然后，您可以做出更好的设计决策。

1.  观看[使用 App Engine 构建可扩展的 Web 应用程序 - Google IO 2008](http://www.youtube.com/watch?v=Oh9_t5W6MTE#t=1700s)，尤其是从第 28 分钟开始。我会建议观看整件事。
2.  观看[App Engine Datastore Under the Covers - Google IO 2008](http://www.youtube.com/watch?v=tx5gdoNpcZM)。
3.  阅读[编写可扩展应用程序的最佳实践](https://developers.google.com/appengine/articles/scaling/overview)。
4.  从[Mastering the datastore](https://developers.google.com/appengine/articles/datastore/overview)中，我发现[建模实体关系](https://developers.google.com/appengine/articles/modeling)部分也非常有用。
5.  这是另一个非常有用的 Stackoverflow 问答——[如何在数据存储而不是数据库中思考](https://stackoverflow.com/questions/103727/how-to-think-in-data-stores-instead-of-databases)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-16T02:01:02.250

ndb 示例（查找 'id' insted 'key_name'）：

```
employee = Employee(id='asalieri',
                    first_name='Antonio',
                    last_name='Salieri') 
```

# c# - 通过透明的 Windows 窗体防止鼠标点击

> ID：15862398
> 
> 赞同：8
> 
> 时间：2013-04-07T12:31:31.607
> 
> 标签：c#, winforms

在浮动侧边栏中切换“笔”按钮后，我正在制作一个用鼠标在屏幕上绘图的小工具。

我已经做到了这一点（请不要笑），方法是让一个最顶层的窗口窗体以其背景作为其透明度键覆盖整个屏幕。当我处于绘图模式时，我需要使鼠标不通过表单单击下面的内容。我尝试遵循以下操作： [具有无法单击的透明背景的 Windows 窗体](https://stackoverflow.com/questions/1436059/windows-form-with-a-transparent-background-that-cannot-be-clicked-through) [如何禁用对透明控件的单击？](https://stackoverflow.com/questions/3386058/how-to-disable-click-through-on-transparent-control)

它成功地停止了鼠标，但也取消了表单的最大化并用鼠标拖动它（使用 HTCAPTION IntPtr(2) 这是）我尝试使用 MSDN 上列出的其他一些值，但没有运气。

我已经超出了我的深度，非常感谢任何帮助（新手友好请！）

PS我现在正在用这个..

```
 //code for allowing clicking through of menus
        protected override void WndProc(ref Message m)
        {              
            if (penMode && m.Msg == 0x84)
            {
                m.Result = new IntPtr(2);    
            }
            else
                base.WndProc(ref m);
        } 
```

更新：现在通过完全以另一种方式解决问题。看起来 WndProc 不起作用，所以我只是在整个屏幕上创建了一个空白表单，并在其中显示了我的主表单 (form.Show(this))。然后将位于下方的空白表单的不透明度从 0% 调整为 1%，以允许/防止点击。作品！感谢所有的答案，教会了我很多。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-07T13:09:19.537

实际上，没必要笑——在我看来，你已经以正确的方式做这件事了。由于您不拥有桌面，因此不应直接在其上绘图。*相反，您需要通过覆盖您*拥有的透明表单来模拟它，然后在其上进行绘制。因为你拥有透明的覆盖表格，所以在上面画画是没有问题的。

但除此之外，听起来您只是在随机尝试值，而没有清楚地了解它们的实际作用。这就像闭着眼睛扔飞镖一样。你不会有很高的命中数。

让我们从了解您的代码的作用开始。魔术值`0x84`对应于[`WM_NCHITTEST`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645618)消息，该消息由 Windows 发送到窗口以确定应如何处理该窗口上的鼠标单击。作为对该消息的响应，您使用`HT*`链接文档中给出的值之一进行回复。这些值中的每一个都有特定的含义，文档中也对此进行了说明。例如：

*   `HTCAPTION`（其值为 2）意味着窗口的单击部分应被视为窗口的标题/标题栏。您从使用 Windows 中知道，您可以使用标题栏在屏幕上拖动窗口，因此`HTCAPTION`响应鼠标单击返回将允许您的窗口可拖动是有道理的。您将看到这用于无边界表单（即没有标题栏的表单）以允许它们可移动。

*   `HTTRANSPARENT`（其值为 -1）是另一个可用值。这个很简单。它只是让你的窗口看起来透明。这就像在说“别介意我，这里没有窗户！” 鼠标点击会被简单地传递到按 Z 顺序位于您下方的窗口，就好像您不在那里一样。

*   `HTCLIENT`（值为 1）是单击发生在窗口客户区的任何位置时的默认结果。当您希望一切正常工作时，您将返回它（或简单地调用默认窗口过程）。返回此值的单击事件将继续由框架正常处理，引发表单的`Click`事件，或传递给位于表单上的子控件。

所以，当你*不*画画的时候，你可能想要 return `HTTRANSPARENT`。在绘图时，*您*可能希望返回`HTCLIENT`，以便您的绘图代码可以看到鼠标事件并绘制结果。

修复您的代码，然后：

```
// Code for allowing clicking through of the form
protected override void WndProc(ref Message m)
{
    const uint WM_NCHITTEST = 0x84;

    const int HTTRANSPARENT = -1;
    const int HTCLIENT      = 1;
    const int HTCAPTION     = 2;
    // ... or define an enum with all the values

    if (m.Msg == WM_NCHITTEST)
    {
        // If it's the message we want, handle it.
        if (penMode)
        {
            // If we're drawing, we want to see mouse events like normal.
            m.Result = new IntPtr(HTCLIENT);
        }
        else
        {
            // Otherwise, we want to pass mouse events on to the desktop,
            // as if we were not even here.
            m.Result = new IntPtr(HTTRANSPARENT);
        }
        return;  // bail out because we've handled the message
    }

    // Otherwise, call the base class implementation for default processing.
    base.WndProc(ref m);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T21:50:59.180

您可能只想将窗口的可见性设置为 5% 左右，并停用透明键。

你基本上不会注意到它并喷射它在那里：D

希望这可以帮助

# objective-c - 如果您在 appstore 上已经有一个应用程序，但您丢失了私钥并撤销了旧证书，会发生什么？

> ID：15862404
> 
> 赞同：1
> 
> 时间：2013-04-07T12:32:03.087
> 
> 标签：objective-c, xcode4.5

你的应用程序会停止工作吗？

我经常想重新开始。所以我撤销了所有证书。然后我删除了钥匙串上与开发相关的所有内容。

撤销证书很有用，因为 xcode 只会创建另一个证书。

然后我想知道。我的旧应用程序会停止工作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T12:40:07.700

它不会停止工作，但是必须重新创建 APNs 证书才能使推送通知再次工作，因为它们将停止工作，因为它们绑定到某个生产证书。

# visual-studio-2012 - 在 VS 2012 和 IIS Express 8.0 中调试网站 - 不断丢失会话

> ID：15862405
> 
> 赞同：2
> 
> 时间：2013-04-07T12:32:08.300
> 
> 标签：visual-studio-2012, iis-express, web-site-project

我最近安装了 VS2012，我的 IIS Express 自动从 7.5 升级到了 8.0。

现在，每当我调试网站应用程序时，我都会丢失会话，就好像应用程序每 2-3 页重新启动一次一样。默认情况下，如果您对各个页面进行 15 次更改，网站应用程序会自动重新编译，但我没有进行任何更改。只需点击页面。

它发生在 VS2012 和 VS2010 中，在我升级到 VS 2012 之前工作正常。

更新 1：与VS2010 SP1 中发生的[这种情况](https://stackoverflow.com/questions/14324342/iis-express-with-vs2010-sp1-constantly-rebuilds-web-site)非常相似。

# vmware - 带有在 Windows 上运行的管理 API 的免费 VM？

> ID：15862406
> 
> 赞同：0
> 
> 时间：2013-04-07T12:32:10.413
> 
> 标签：vmware, virtual-machine, xen

有没有人知道一个免费的（如啤酒）VM，它将在各种 Windows 主机（XP/Vista/7/etc）上运行，它带有完整的管理 API（至少能够创建、监控、启动/stop 和快照来宾虚拟机）？

我查看了 VMPlayer，但它的 VIX API 似乎对于该产品来说是残废的。我查看了 Xen，它带有一个管理 API，但 Xen 只在 Linux 主机上运行。

谢谢史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T12:36:15.953

看看[VirtualBox](https://www.virtualbox.org/)我在 XP 和 7 上都成功运行过，还没有尝试过 Vista

# html - html5缓存清单设置

> ID：15862408
> 
> 赞同：0
> 
> 时间：2013-04-07T12:32:18.390
> 
> 标签：html, html5-appcache

根据我在网上阅读的手册，为了使用缓存清单，我需要执行以下两个步骤： 1\. 我需要在 .htaccess 文件中添加 'AddType text/cache-manifest .manifest'。问题是我在哪里可以找到 .htaccess 文件？2.编写一个名为offline(DIY名称).manifest的新文件。问题是：我应该把这个文件放在哪里？它在www文件下还是其他地方？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T14:58:15.610

如果我是对的，这两个文件都应该在该页面的根目录中。您的 HTML 文件所在的位置相同。

# java - java.lang.ClassCastException：[Ljava.lang.Object；不能转换为 [Ljava.lang.Comparable;

> ID：15862409
> 
> 赞同：0
> 
> 时间：2013-04-07T12:32:23.750
> 
> 标签：java, sorting, vector, comparable, lang

我正在使用 Eclipse，我正在使用 Java。我的目标是对向量进行排序，在一个向量（vectorExample）中使用适合我的向量类型的**bogoSort**方法，**并**在其他向量（ javaVector ）上使用**Java**排序**并****比较**它们。

 ******我做了测试，但它没有用，所以我不知道是什么失败了。 ***注意：西班牙语中的单词很少：ordenado = sorted，Ejemlo = Example，maximo = maximun，contenido = content。**

**EjemploVector 类**

```
 package vector;
import java.util.NoSuchElementException;
import java.util.Vector;
import java.util.Iterator;

public class EjemploVector <T> {
protected T[] contenido;
private int numeroElementos;

@SuppressWarnings("unchecked")
public EjemploVector () {
    contenido = (T[]) new Object[100];
    numeroElementos = 0;
}

@SuppressWarnings("unchecked")
public EjemploVector (int maximo) {
    contenido = (T[]) new Object[maximo];
    numeroElementos = 0;
}

public String toString(){
    String toString="[";
     for (int k=0; k<numeroElementos;k++){
         if (k==numeroElementos-1){
             toString = toString + contenido[k].toString();
         } else {
             toString = toString + contenido[k].toString()+", ";
         }
     }
     toString = toString + "]";
     return toString;
}

public boolean equals (Object derecho){
     if (!(derecho instanceof Vector<?>)) {
         return false;
     } else if (numeroElementos != ((Vector<?>)derecho).size()) {
         return false;
     } else {
         Iterator<?> elemento = ((Vector<?>)derecho).iterator();
         for (int k=0; k<numeroElementos;k++){
             if (!((contenido[k]).equals (elemento.next()))) {
                 return false;
             }
         }
         return true;
     }
}

public void addElement (T elemento){
    contenido[numeroElementos++]= elemento;
}

protected T[] getContenido(){
    return this.contenido;
}

protected T getContenido (int k){
    return this.contenido[k];
}

@SuppressWarnings("unchecked")
protected void setContenido (int k, Object elemento){
    this.contenido[k]= (T)elemento;
} 
```

> **EjemploVectorOrdenadoClass**

```
package vector.ordenado;

import java.util.Arrays;
import java.util.Random;

import vector.EjemploVector;

public class EjemploVectorOrdenado<T extends Comparable<T>> extends EjemploVector<T> {

    private boolean organized;

    public EjemploVectorOrdenado() {
        super();
        organized = true;
    }

    public EjemploVectorOrdenado(int maximo) {
        super(maximo);
        organized = true; //
    }

    public boolean getOrdenado() {
        return this.organized;
    }

    // Method bogoSort
    public void bogoSort() {
        if (!this.organized) {

            if (this.size() > 0) {

                Random generator;
                T tempVariable;
                int randomPosition;

                do {
                    generator = new Random();

                    for (int i = 0; i < this.size(); i++) {
                        randomPosition = generator.nextInt(this.size());

                        tempVariable = contenido[i];
                        contenido[i] = contenido[randomPosition];
                        contenido[randomPosition] = tempVariable;

                    }
                } while (!organized);

            }

        }
        this.organized = true;
    }

    public void addElement(T elemento) {
        super.addElement(elemento);
        if (organized && this.size() > 1) {
            T penultimo = this.getContenido(this.size() - 2);
            T ultimo = this.getContenido(this.size() - 1);
            organized = penultimo.compareTo(ultimo) <= 0;
        }
    }
} 
```

**ElementoTest 类**

> 包元素；

```
import java.io.Serializable;

public class ElementoTest implements Comparable<ElementoTest>, Serializable {
private static final long serialVersionUID = -7683744298261205956L;

private static int numeroElementosTest = 0;
private int clave;
private int  valor;

public ElementoTest(int i){
    this.clave = i;
    this.valor = numeroElementosTest;
    numeroElementosTest++;
}

public String toString(){
    return ("(" + this.clave + "," + this.valor + ")");
}

public boolean equals (Object derecho){
     if (!(derecho instanceof ElementoTest)) {
         return false;
     } else {
         return clave == ((ElementoTest)derecho).clave;
     }
}

public char getClave(){
      return this.clave;
}

public int getValor(){
      return this.valor;
}

@Override
public int compareTo(ElementoTest elemento) {
    if (elemento == null){
        return -1;
    } else if (this.equals(elemento)){
        return 0;
    } else if (clave < elemento.clave){
        return -1;
    } else {
        return 1;
    }
} 
```

}

**测试** 首先这是一个愚蠢的测试，因为它将元素按顺序排列，所以......实际上这些方法没有做任何事情，java 只是比较并且它给出了正确的

我试图让一个未排序的向量添加元素，但出现了`java.lang.ClassCastException: [Ljava.... etc.`

```
package vector.ordenado;

import static org.junit.Assert.*;

import java.util.Collections;
import java.util.Vector;

import org.junit.Before;
import org.junit.Test;

import elementos.ElementoTest;

public class EjemploVectorOrdenadoTest {

    private Vector<ElementoTest> vectorJava;
    private EjemploVectorOrdenado<ElementoTest> vectorExample;

    @Before
    public void setUp() throws Exception {
        vectorJava = new Vector<ElementoTest>(100);
        vectorExample = new EjemploVectorOrdenado<ElementoTest>(100);
    }

    @Test
    public void testSortFailTest() {
        for (char c = 'a'; c < 'g'; c++) {
            vectorJava.addElement(new ElementoTest(c));
            vectorExample.addElement(new ElementoTest(c));

        }
        Collections.sort(vectorJava);
        vectorExample.bogoSort();
        assertTrue(vectorExample.equals(vectorJava));
        assertTrue(vectorExample.getOrdenado());
    }

    @Test
    public void testSort() {
        {
            vectorJava.addElement(new ElementoTest(1));
            vectorJava.addElement(new ElementoTest(3));
            vectorJava.addElement(new ElementoTest(2));
            vectorExample.addElement(new ElementoTest(3));
            vectorExample.addElement(new ElementoTest(2));
            vectorExample.addElement(new ElementoTest(1));

        }
        Collections.sort(vectorJava);
        vectorExample.bogoSort();
        assertTrue(vectorExample.equals(vectorJava));
        assertTrue(vectorExample.getOrdenado());
    }
} 
```

抱歉，有问题，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T12:37:49.057

问题是您的测试类`ElementoTest`应该实现该`Comparable`接口。或者您需要`Comparator`在比较期间提供一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T12:40:46.650

你的班级`ElementtoTest`实施了`Comparable`吗？

如果没有，它需要。

我怀疑它没有，因为这正是导致此错误的原因。您需要添加`implements Comparable`然后覆盖该`int compareTo(Elementtotest e)`方法，在该方法中指定您希望根据哪些条件对对象进行排序。******

# javascript - 离线绘制amcharts的问题

> ID：15862412
> 
> 赞同：1
> 
> 时间：2013-04-07T12:32:35.500
> 
> 标签：javascript, ios, charts, offline, amcharts

我想离线绘制amcharts。它已经在离线状态下运行良好，但我在**滚动条夹点方面遇到了一些问题——它们没有被绘制**，因为所有图像都存储在这个路径中，`http://www.amcharts.com/lib/images/`并且属性`chart.pathToImages`被定义为这个路径。我只看到一种解决**问题**的方法：

1.  找出夹子图标的名称是什么
2.  创建我自己的同名图标
3.  把它放到我的本地文件夹中
4.  更改属性`chart.pathToImages`将其设置为我的文件夹路径。

有人可以帮我完成列表中的第一项任务吗？

PS 我从标准 amcharts 文件夹中获得了一张图片：http://www.amcharts.com/lib/images/star.gif[并且](http://www.amcharts.com/lib/images/star.gif) 我尝试了滚动条手柄的一些变体，但没有结果 atm

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T15:29:38.487

我已经解决了我的问题！我刚刚打开`amcharts.js`并用“gif”按 CTRL+F 键，它返回给我的名称是：dragIcon.gif dragIconH.gif 这正是我一直在寻找的。

PS。我正在开发一个可以离线绘制 amcharts 的 iOS 应用程序，为此我下载了`amcharts.js`它并将其添加到我的项目中，然后我创建了我的`html`文件并将其添加到以下字符串中，以用于导入`amcharts.js`库

```
<script src="amcharts.js" type="text/javascript"></script> 
```

然后我将我的加载`html`到 UIWebView 中：

```
NSString *path = [[NSBundle mainBundle] bundlePath];
NSURL *baseUrl = [NSURL fileURLWithPath:path]; //URL representation of main project bundle

NSString *htmlPath = [[NSBundle mainBundle] pathForResource:@"chart" ofType:@"html"];
NSError *error;
NSString *htmlStr = [[NSString alloc] initWithContentsOfFile:htmlPath encoding:NSUTF8StringEncoding error:&error];
htmlStr = [NSString stringWithFormat:htmlStr , [self getJSONStringFromDict:dataDict] , baseUrl]; // i do this for insert JSONdata and baseURL into my HTML (see below)
[self loadHTMLString:htmlStr baseURL:baseUrl]; 
```

如果您想在其中使用本地文件，baseURL 非常重要，`html` 这就是为什么`src="amcharts.js"`可以正常工作的原因。

最后！我的滚动条手柄呢？正如我之前提到的，我下载了文件`dargIcon.gif`并将其添加到我的项目中（与我所做的一样`amcharts.js`），然后我替换了

`chart.pathToImages = "http://www.amcharts.com/lib/images/"`

with `chart.pathToImages = "%@";` %@ 将被我的 baseURL 替换（参见上面的代码）

问题解决了。希望这可以帮助某人。

# php - php 文件中的正文

> ID：15862413
> 
> 赞同：0
> 
> 时间：2013-04-07T12:32:47.080
> 
> 标签：php, html, wordpress, document-body

我为 wordpress 主题创建了一个自定义 index.php。我刚刚将 .html 重命名为 .php 文件。一切似乎都很好，除非我运行页面时会打印额外的字符。

这些字符打印在浏览器正文区域的开头：“-->”

我对这些字符的打印位置感到困惑。我可以创建一个包含完整 html 内容的 .php 吗？还是我需要做一些修改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T12:38:20.220

`<!--this is a HTML comment line -->`

如果您在删除第一部分后忘记删除最后一个`-->`字符，您可能会看到。如果没有看到您的代码，我们无法知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T12:40:28.200

作为最后一个问题的答案，您可以混合使用 php 和纯 HTML。每当您编写 php 时，您的代码必须在

```
<?php   ... CODE HERE ...  ?> 
```

然而，在我看来，内联 php 并不是一个好的编程模式。

# html - 基于 html 的聊天系统（如 facebook 和 google talk）背后的技术

> ID：15862419
> 
> 赞同：1
> 
> 时间：2013-04-07T12:33:54.547
> 
> 标签：html, facebook-chat

谁能给我简要介绍一下 Facebook 和 Google Talk 的工作原理，是否存在类似于经典的基于 Java 的聊天系统的持久连接，服务器管理连接并将消息定向到必要的目的地，或者它们是无状态的？我想创建与这些类似的东西，但我不确定从哪里开始，如果我需要在服务器上运行自定义服务，我可能不得不重新考虑我的方法。

我不是在进行全面的解释，但我很想知道是否存在不需要在服务器上运行服务的无状态方法。如果需要 Html5 没关系。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T12:37:43.377

两者都使用 Jabber 协议：[http ://www.jabber.org/](http://www.jabber.org/)

# javascript - WinJS，从字节数组显示图像？

> ID：15862421
> 
> 赞同：2
> 
> 时间：2013-04-07T12:34:01.950
> 
> 标签：javascript, windows-8, windows-store-apps, winjs

我正在寻找一种方法来显示存储在字节数组中的 JPEG 图像。这是一个用 Javascript 构建的 Windows 8 商店应用程序。字节数组从 C# WinRT 组件返回。它在 C# 中的类型是`byte[]`.

基本上，我想要的是获取一个对象，以便我可以调用：

```
URL.createObjectURL(bytearray, {oneTimeOnly: true}); 
```

之上。目前这会产生运行时错误，因为不支持数组接口。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T13:09:11.727

我发现了一个更简单的方法。

```
var blob = new Blob([bytes], {type: "image/jpg"});
var url = URL.createObjectURL(blob, { oneTimeOnly: true }); 
```

`Blob`实际上是由 直接支持的`URL.createObjectURL`。唯一的问题是您必须指定一个 mime 格式来识别缓冲区格式，这在我的情况下是可能的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T14:47:03.640

我发现的当前解决方案非常全面。因此，在给出字节到 URL 的解决方案之前，有几条评论：

1.  如果有更好的方法从字节获取 DOM 流/blob 对象，请尝试一下。
2.  如果您控制 winrt 组件 - 检查您是否可以返回 StorageFile 对象。在这种情况下 - 代码将简化为

    var 文件 = MSApp.createFileFromStorageFile(storageFile); var url = URL.createObjectURL(file, { oneTimeOnly: true });

现在解决方案：

```
var bytes;
var memoryStream;    
var streams = Windows.Storage.Streams;
{

    // get IBuffer out of bytes
    var dataWriter = new streams.DataWriter();
    dataWriter.writeBytes(bytes);
    var buffer = dataWriter.detachBuffer();
    dataWriter.close();

    // get IInputStream out of IBuffer
    memoryStream = new streams.InMemoryRandomAccessStream();
    return memoryStream.writeAsync(buffer);
}).then(function onmemorystreamwritecomplete()
{
    var inputStream = memoryStream.getInputStreamAt(0);

    // get DOM MSStream from IInputStream
    var domMStream = MSApp.createStreamFromInputStream('image/jpg', inputStream);
    var url = URL.createObjectURL(domMStream, { oneTimeOnly: true });
    memoryStream.close();
    test3Img.setAttribute('src', url);
}) 
```

# javascript - 页面处于活动状态时更改类

> ID：15862423
> 
> 赞同：0
> 
> 时间：2013-04-07T12:34:28.793
> 
> 标签：javascript, html, css, nav

更改页面时如何设置 .html 页面处于活动状态？这是更改导航栏中的活动选项卡所必需的。我应该将该类添加`.current_page_item`到导航的活动 li 中。

我已经搜索了一下，但我找不到合适的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T13:26:03.903

这就是 jquery 所需要的

```
 <script>
   $(document).ready(function(){

       var links = $('nav').children();
       $.each(links, function(key, value){
          if(value.href == document.URL){
           $(this).addClass('current_page_item');
          }
       });
   </script>
    <nav>
        <a href="/link1">link-1</a>
        <a href="/link2">link-2</a>
        <a href="/link3">link-3</a>
        <a href="/link4">link-4</a>
        <a href="index.html">link-5</a>
    </nav> 
```

链接 5 将获得活动类，因为它与当前 url 相同

* * *

## 结果

```
<nav>
    <a href="/link1">link-1</a>
    <a href="/link2">link-2</a>
    <a href="/link3">link-3</a>
    <a href="/link4">link-4</a>
    <a class="current_page_item" href="index.html">link-5</a>
</nav> 
```

* * *

# mysql - SQL 查询 - 我的查询需要哪种 JOIN 类型？

> ID：15862424
> 
> 赞同：0
> 
> 时间：2013-04-07T12:34:29.780
> 
> 标签：mysql, join

我有两个 sql 查询

第一个查询：我得到了除与日期相关的详细信息之外的所有详细信息

```
SELECT  att.roll_no  AS `att_roll_no`,att.full_name,att.st_class,att.st_section,
SUM(att.hasAttended= 'P') AS DaysPresent, 
SUM(att.hasAttended= 'A') AS DaysAbsent, 
COUNT(DISTINCT att.att_date) AS WorkingDays,
COUNT(*) AS totalClasses
FROM     attendance as att
WHERE att.st_class = 1 AND att.st_section = 'A' 
GROUP BY att.roll_no 
```

上述查询的输出表如下：

![在此处输入图像描述](https://i.stack.imgur.com/s6gRT.png)

第二个查询：我只得到与日期相关的详细信息

```
SELECT  hasAttended, att_date  FROM attendance
WHERE st_class = 1 AND st_section = 'A' AND att_date = 'Tue Apr 02 2013'
GROUP BY roll_no 
```

上述查询的输出表如下：

![在此处输入图像描述](https://i.stack.imgur.com/SaMqM.png)

现在我需要将上面的两个表连接到一个表中。

**我尝试过的**

在结果查询中，我使用的是 INNER JOIN。它如下：

```
SELECT
  att_outer.hasAttended,
  att_outer.att_date
FROM
  attendance AS att_outer
  INNER JOIN(
    SELECT 
      att.roll_no  AS `att_roll_no`,
      att.full_name,
      att.st_class,att.st_section,
      SUM(att.hasAttended= 'P') AS DaysPresent, 
      SUM(att.hasAttended= 'A') AS DaysAbsent, 
      COUNT(DISTINCT att.att_date) AS WorkingDays,
      COUNT(*) AS totalClasses
    FROM 
      attendance as att
    WHERE
      att.st_class = 1
      AND att.st_section = 'A' 
    GROUP BY att.roll_no
  )att ON att_outer.roll_no = att.roll_no
WHERE 
  att_outer.st_class = 1
  AND att_outer.st_section = 'A'
  AND att_outer.att_date = 'Tue Apr 02 2013'
GROUP BY roll_no 
```

但我收到以下错误：

```
#1054 - Unknown column 'att.roll_no' in 'on clause' 
```

**请让我知道结果查询是否正确。另外加入我使用的是正确与否。**

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T12:38:25.647

您想加入 ALIAS 名称，别名为`att_roll_no`

改变：

```
 ON att_outer.roll_no = att.roll_no 
```

到

```
ON att_outer.roll_no = att_roll_no 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T12:37:12.517

您在 select 子句中没有名为 roll_no 的列，因此您无法对此进行连接，因此出现错误：att.roll_no。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T12:39:33.840

您在内部查询中提供了该列的别名。您应该使用该别名，因为该列不再可见。

```
SELECT  att_outer.hasAttended, 
        att_outer.att_date,
        att.full_name,
        att.st_class,
        att.st_section,
        att.DaysPresent,
        att.DaysAbsent,
        att.WorkingDays,
        att.totalClasses
FROM    attendance AS att_outer
        INNER JOIN
        (
            SELECT  att.roll_no  AS `att_roll_no`,
                    att.full_name,
                    att.st_class,
                    att.st_section,
                    SUM(att.hasAttended= 'P') AS DaysPresent, 
                    SUM(att.hasAttended= 'A') AS DaysAbsent, 
                    COUNT(DISTINCT att.att_date) AS WorkingDays,
                    COUNT(*) AS totalClasses
            FROM    attendance as att
            WHERE   att.st_class = 1 AND 
                    att.st_section = 'A' 
            GROUP   BY att.roll_no
        )att ON att_outer.roll_no = att.att_roll_no
WHERE   att_outer.st_class = 1 AND 
        att_outer.st_section = 'A' AND 
        att_outer.att_date = 'Tue Apr 02 2013' 
```

# android - 如何在我的 ListView 上启用 LongCLicks？

> ID：15862431
> 
> 赞同：1
> 
> 时间：2013-04-07T12:35:19.410
> 
> 标签：android, android-widget

我正在尝试在我的应用程序中启用长点击，但我无法编译它。我在这里查看了以前问题中的示例，但我无法编译它们中的任何一个。我的主要活动被宣布为：

```
import android.widget.AdapterView.OnItemLongClickListener;
public class LinearLayoutDemo extends ListActivity implements OnClickListener, OnItemClickListener, OnItemLongClickListener { 
```

在 onCreate() 方法中，我把这个：

```
getListView().setOnItemLongClickListener(this); 
```

对于我的 ListView (myLV)，我这样做了：

```
myLV1.setOnItemLongClickListener(new View.OnItemClickListener() {
    @Override public boolean onLongClick(View v) {
        Log.d(TAG, "setOnItemLongClickListener() called for myLV");
        return(true);
    }
}); 
```

我认为上面的内容一定是错误的，但我不知道为什么。编译器错误是

```
LinearLayoutDemo.java:45: com.commonsware.android.linearpct.LinearLayoutDemo is not abstract and does not override abstract method onItemLongClick(android.widget.AdapterView<?>,android.view.View,int,long) in android.widget.AdapterView.OnItemLongClickListener
[javac] public class LinearLayoutDemo extends ListActivity implements OnClickListener, OnItemClickListener, OnItemLongClickListener {

LinearLayoutDemo.java:287: cannot find symbol
[javac] symbol  : class OnItemLongClickListener
[javac] location: class android.view.View
[javac]         myLV1.setOnItemLongClickListener(new View.OnItemLongClickListener() {
[javac]                                                  ^ 
```

****** *** ** *** ** *** ** *** *******更新******* *** ** *** ** *** ** *** **********

 *****我摆脱了 ListActivity 类定义中的 OnItemLongClickListener 。我也摆脱了这个

```
getListView().setOnItemLongClickListener(this); 
```

然后我添加了这段代码并且它起作用了（我不知道为什么）：

```
myLV1.setOnItemLongClickListener(new OnItemLongClickListener() {
    public boolean onItemLongClick(AdapterView<?> parent, View v, int position, long id) {
        Log.d(TAG, "onItemLongClick() for LV1");
        return true;
    }
}); 
```

这看起来很简单，所以我坚持下去，除非有人能告诉我我不应该这样做。

****** *** ** *** ** *** ** *****编辑***** ** *** ** *** ** *** ********

 **好的，我有长点击工作。如何判断我长按了哪个项目？我曾假设 myLV1.getCheckedItemPosition() 会起作用，但事实并非如此。

没关系，它在 onItemLongClick() 的“位置”参数中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T12:55:12.227

您在这里所做的实际上是设置 onLongClickListener 两次：

**1.** `getListView().setOnItemLongClickListener(this);`

在这里，您将 设置`Activity`为侦听器，因为它实现了`onLongClickListener`接口。

**2.** `myLV1.setOnItemLongClickListener(new View.OnItemClickListener() {....`

在这里，您正在创建一个新的`onItemClickListener`并尝试再次将其应用到列表中。从您的活动代码中删除这部分。

并添加未实现的方法：

`onLongClick``Activity`一旦您尝试实施，就应该在您的活动中`onLongClickListener`

在此方法中，您可以指定长按时的操作。

**更新：**

![在此处输入图像描述](https://i.stack.imgur.com/fj6cy.jpg)

1.  右键单击错误。
2.  添加未实现的方法。

这会将您添加到类中：

```
@Override
public boolean onItemLongClick(AdapterView<?> arg0, View arg1, int arg2,
        long arg3) {
    // TODO Auto-generated method stub
    return false;
} 
```

在其中定义您对长按的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T12:50:02.073

你基本上可以做两件事：

1.  删除该行`getListView().setOnItemLongClickListener(this);`，因为您没有实现/覆盖 AdapterView.OnItemLongClickListener 的 onItemLongClick 方法

2.  在 myLV1.setOnItemLongClickListener 中，您必须创建 AdapterView.OnItemLongClickListener 的实例，而不是 View.OnItemLongClickListener

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T12:54:59.640

您想在长按 ListView-Item 时创建上下文菜单吗？

如果是这样，实现此目的的最简单方法是`registerForContextMenu(findViewById(android.R.id.list));`在您的`onCreate`-method 中使用。

然后你必须重写这些方法`onCreateContextMenu`，`onContextItemSelected`就像这样：

**onCreateContextMenu**

```
@Override
public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo) {
    super.onCreateContextMenu(menu, v, menuInfo);
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.my_context_layout, menu);
} 
```

**onContextItemSelected**

```
@Override
public boolean onContextItemSelected(MenuItem item) {
    AdapterContextMenuInfo info = (AdapterContextMenuInfo) item.getMenuInfo();

    switch (item.getItemId()) {
        case R.id.my_item1:
            doSomething();
            return true;
        case R.id.my_item2:
            doSomething();
            return true;
        default:
            return super.onContextItemSelected(item);
    }
} 
```*******

# android - 自动升级数据库版本

> ID：15862432
> 
> 赞同：1
> 
> 时间：2013-04-07T12:35:30.577
> 
> 标签：android, android-sqlite, database-versioning

嗨，我正在创建一个存储用户输入密码的应用程序。每当他需要更改密码时，就必须更改数据。我面临的问题是，当我调用 DBHelper 类（我创建它是为了完成我所有的数据库工作）时，它不会删除可用的表。

如果有人告诉我如何在调用 DBHelper 类时删除表中的条目，那将会更有帮助。

我意识到 OnCreate 和 OnUpgrade 函数除了第一次创建数据库时没有执行。

也自动更改数据库版本也有助于我猜，但我不知道该怎么做？这是我来自 DBhelper 类的代码

```
public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub
          db.execSQL("DROP TABLE IF EXISTS '" + DATABASE_TABLE+"'");
          db.execSQL("CREATE TABLE " + DATABASE_TABLE +" (" +
                KEY_ROWID + " INTEGER PRIMARY KEY AUTOINCREMENT, "+
                KEY_ID +" INTEGER, "+
                KEY_X +" INTEGER,  "+
                KEY_Y +" INTEGER);"
                );  

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub
        db.execSQL("DROP TABLE IF EXISTS '" + DATABASE_TABLE+"'");
        onCreate(db);
    }

public long createEntry(int name, int sx, int sy) {
        // TODO Auto-generated method stub
        ContentValues cv=new ContentValues();
        cv.put(KEY_ID, name);
        cv.put(KEY_X, sx);
        cv.put(KEY_Y, sy);
        return ourDatabase.insert(DATABASE_TABLE, null, cv);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T12:42:49.297

更改数据库中的一行不应影响架构版本。这应该作为适当的查询来执行以操作数据库条目。

您可能会发现使用此方法：

```
public void clearDatabase(Context context) {
   DatabaseHelper helper = new DBHelper(context);
   SQLiteDatabase database = helper.getWritableDatabase();
   database.delete(DATABASE_TABLE, null, null); //erases everything in the table.
   database.close();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T11:45:25.763

**首先**，这里是如何以编程方式更改数据库版本，从而强制在下一次调用时调用以打开数据库`SQLiteOpenHelper`：`onUpgrade()`

`db.execSQL("PRAGMA user_version = " + NEW_VERSION);`

**其次**，我不推荐使用这种技术。我只写了这个答案，因为你问如何这样做。这是你的选择。**对我来说，我会按照@Boris Strandjev 在他的回答中推荐的方式去做**。

# for-loop - 枫木中的一维热方程

> ID：15862435
> 
> 赞同：0
> 
> 时间：2013-04-07T12:35:46.123
> 
> 标签：for-loop, maple

我正在通过有限差分法在枫树上求解具有纽曼边界条件的一维热方程，但我的代码不起作用，请你们中的任何人建议我为枫树上的这个方程提供一些更好的代码..

> 重新开始; 与（线性代数）；外汇：= 1；金融时报：= 0.5e-1；米：= 5；N := 5; M1 := M-1; H := FX/M; K := FT/N; c := 1; r := c^2*K/H^2;
> 
> # 循环初始条件；
> 
> for i to M1 do V[i, 0] := cos(Pi*i*H) end do;
> 
> # 边界条件循环；
> 
> 对于 j 到 N 做 V[-1, j] := V[1, j] end do; 对于 j 到 N 做 V[M+1, j] := V[M-1, j] end do;
> 
> # 离散方程循环；
> 
> 对于 j 从 0 到 N-1 对 i 到 M-1 做 V[i, j+1] := (1-2*r)*V[i, j]+r*V[i-1, j ]+r*V[i+1, j] end do end do;

请朋友让我知道为什么我的最后一个循环没有执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T18:14:20.070

非常微妙的枫树。循环正在执行 - 它只是没有打印结果。语句嵌套的每一级都在语句的“printlevel”中增加一个。输入一个过程将 5 添加到包含过程的打印级别。交互式会话是级别 0。只有当它们的 printlevel 小于或等于默认为 1 的全局变量 printlevel 时，才会打印语句的结果。要查看循环执行，请尝试

```
printlevel := 4; 
```

最多可打印 4 层嵌套，但不会打印到任何过程调用中。有关完整详细信息，请参阅 ?printlevel。

附带说明一下，您可能需要评估 cos 调用以确保获得浮点值。

# html - Appcache manifest 下载所有文件，但仍无法离线访问，除非已在线访问

> ID：15862437
> 
> 赞同：0
> 
> 时间：2013-04-07T12:35:58.057
> 
> 标签：html

我已经成功创建了一个正在下载所有网站内容的 appcache 清单。我已经通过 chrome dev 进行了检查，一切正常。

我现在遇到的问题是，即使整个网站都已被缓存，但离线时我无法访问缓存的页面，除非我在线访问过它们。

我正在使用 Apache 并使用 Safari 浏览器通过 iPad 访问该网站。

我有一个想法，这可能是由于服务器不允许访问缓存页面，除非它们已作为某种安全措施在线访问。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T14:55:06.377

如果您的文件在 PHP 或 ASP 中，这将不起作用。

它需要是 JavaScript 或其他可以在本地运行的文件，如 Image、HTML。

# wpf - 如何在 WPF Grid 控件中选择一行？

> ID：15862438
> 
> 赞同：0
> 
> 时间：2013-04-07T12:36:10.043
> 
> 标签：wpf, grid, wpf-controls

我正在使用 Grid 来显示直到运行时才知道的数据。我的 Grid 的 XAML 非常简单，因为我以编程方式向它添加了控件。我需要网格灵活。

我希望用户能够选择（突出显示）网格中的整行，然后能够单击按钮来处理该行中的数据。我怎么能这样做？

我无法找到与我的问题相关的任何信息。任何想法将不胜感激。

这是 XAML：

```
 <Grid x:Name="lstAssigned" ShowGridLines="True">
        <Grid.ColumnDefinitions>
           <ColumnDefinition Width="auto"></ColumnDefinition>
           <ColumnDefinition Width="auto"></ColumnDefinition>
           <ColumnDefinition Width="auto"></ColumnDefinition>
           <ColumnDefinition Width="auto"></ColumnDefinition>
           <ColumnDefinition Width="auto"></ColumnDefinition>
           <ColumnDefinition Width="auto"></ColumnDefinition>
           <ColumnDefinition Width="auto"></ColumnDefinition>
           <ColumnDefinition Width="auto"></ColumnDefinition>
        </Grid.ColumnDefinitions>
     </Grid> 
```

![在此处输入图像描述](https://i.stack.imgur.com/i22Pd.jpg)

谢谢大家！

以下是更多详细信息： 要显示的数据会有所不同。网格将有 5 列。第 2 列和第 3 列将是组合框。其他列是文本框。用户将输入数据并保存。

还有一次，要显示的数据可能是：第 2 列和第 4 列中的组合框，以及第 5 列中的日期。由于我的数据源会有所不同，因此我试图以编程方式在每列中设置控件类型。

我最初是从使用 DataTemplates 的 DataGrid 开始的，但这将定义列和顺序。我弄错了吗？我想在运行时定义它们。

处理这个问题的最佳方法是什么？我应该使用什么类型的控件？

我会欣赏你能提供的任何一种爱。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T13:37:55.470

网格不支持选择行/列/单元格。它用于布局控件以进行显示。改用其他东西，比如 ListView。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T22:11:58.320

听起来您应该`DataGrid`为每种情况使用 2 个单独的 s 。有一些方法可以在运行时以编程方式更改列，但它更混乱并且导致更少的可维护性。如果给我这个任务，我会简单地使用 2 个不同`DataGrid`的 s，

一个用于案例＃1，您需要的地方

```
Text      Combo       Combo       Text      Text 
```

另一个用于案例 #2：

```
Text      Combo       Text        Combo     DateTime 
```

听起来像是一个非常简单的集合，没有什么大问题，那么您可以为每种类型的 Model 对象创建一个`DataTemplate`包含每个 this的正确集合。`DataGrid`

# c# - 保持封装，同时保持存储库，实体框架，代码优先

> ID：15862440
> 
> 赞同：0
> 
> 时间：2013-04-07T12:36:21.527
> 
> 标签：c#, entity-framework, encapsulation

我有一种情况，我将尝试大大简化，其中对象上的方法应该创建不同类的新持久对象。如何在保持存储库无知和封装的同时做到这一点？

在这个例子中，我们有小部件和小部件容器。出售或购买小部件时，会创建一个 WidgetEvent（在其他地方）并将其添加到容器的 WidgetEvents 列表中。我们总是可以通过汇总 WidgetEvents 的集合来查询容器中手头的部件数量。在某个时候，一个工作人员调用并说容器是空的，即使容器中应该还有一些小部件。在这种情况下，我们调用“SetComplete”方法来创建最终的 WidgetEvent 以将容器清零。

```
public class TestContext : DbContext
{
    public DbSet<WidgetEvent> WidgetEvents { get; set; }
    public DbSet<WidgetContainer> WidgetContainers { get; set; }
}

public class WidgetEvent
{
    public int Id { get; set; }
    public int Amount {get;set;}
    public WidgetContainer Container {get;set;}
}

public class WidgetContainer 
{
    public int Id { get; set; }
    public virtual ICollection<WidgetEvent> WidgetEvents {get;set;}

    public int GetPiecesOnHand()
    {
        return WidgetEvents.Sum(a=> a.Amount);
    }

    public void SetComplete()
    {
        if (GetPiecesOnHand() != 0)
        {

            WidgetEvents.Add(new WidgetEvent() { Amount = -GetPiecesOnHand() });
        }
    }
} 
```

在我看来，适当的封装将使这个事件的创建保持在类定义中。它使阅读代码的人更容易理解。但我也看到，如果不向类中引入一些存储库知识，就无法使这个新的 WidgetEvent 持久化。

我该怎么做？您可以假设我在其他地方有一个用于 WidgetEvents 的工厂。如果您想知道，SaveChanges 并没有意识到 WidgetEvent 已经创建。

编辑：这返回 25 25 0 0 这是正确的。我想这让我对轨道变化有点困惑，但很高兴知道这是有效的。几天前我做了这样的事情，并认为它不起作用。

```
 using (var context = new TestContext())
        {
            WidgetContainer acontainer = new WidgetContainer();
            acontainer.WidgetEvents = new List<WidgetEvent>();
            context.WidgetContainers.Add(acontainer);
            acontainer.WidgetEvents.Add(new WidgetEvent() { Container = acontainer, Amount = 25 });
            Console.WriteLine(acontainer.GetPiecesOnHand());
            context.SaveChanges();
        }

        using (var context = new TestContext())
        {
            WidgetContainer acontainer = context.WidgetContainers.Find(1);
            Console.WriteLine(acontainer.GetPiecesOnHand());
            acontainer.SetComplete();
            Console.WriteLine(acontainer.GetPiecesOnHand());
            context.SaveChanges();
        }

        using (var context = new TestContext())
        {
            WidgetContainer acontainer = context.WidgetContainers.Find(1);
            Console.WriteLine(acontainer.GetPiecesOnHand());

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T13:28:09.230

`WidgetContainer`如果它附加到（=跟踪）实体框架上下文而不给类一个对上下文（或存储库）的引用，它实际上应该工作。

例如这样的代码......

```
var widgetContainer = context.WidgetContainers.Find(1);
// or:
// var widgetContainer = context.WidgetContainers.Create();
// widgetContainer.Id = 1;
// context.WidgetContainers.Attach(widgetContainer);

widgetContainer.SetComplete();
context.SaveChanges(); 
```

...应该将新的事件插入`WidgetEvent`到具有外键关系的数据库中，`widgetContainer`因为 EF 更改跟踪将在调用时识别已添加到`WidgetEvents`集合中的新事件`SaveChanges`。

重要的是在调用**之前**`widgetContainer`必须附加到上下文。 **`SetComplete`**

# css - VS2012 页面检查器忽略文本阴影样式

> ID：15862442
> 
> 赞同：1
> 
> 时间：2013-04-07T12:36:27.153
> 
> 标签：css, visual-studio-2012, page-inspector

我在 VS2012 中遇到问题，其中页面检查器似乎忽略了 css 指令：

> 文字阴影：2px 2px 5px #aaaaaa;

这是样式的一部分，如下所示：

> h1 {
> 字体大小：56px；
> 文字阴影：2px 2px 5px #aaaaaa;
> 文本缩进：-61px；
> 向左飘浮;
> 边距底部：5px；
> }

当“在页面检查器中查看”并且标题被“检查”时，它会显示其他四种样式，但没有引用“文本阴影”。

如果我在 IE10 或 Chrome 中查看页面，阴影效果很好。就好像 Page Inspector 托管的 IE 比 IE10 更早 - 但我不确定这怎么可能。

这里有很多困惑！有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T14:18:19.813

页面检查器可能与您计算机上的纯 IE 10 略有不同。他们至少有不同的用户代理：

页面检查器：

```
Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.1; WOW64; Trident/6.0; Eureka/1.0) 
```

IE10：

```
Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.1; WOW64; Trident/6.0) 
```

有什么问题吗？您可能对此无能为力。

**编辑：** 添加

```
<meta http-equiv="X-UA-Compatible" content="IE=Edge" /> 
```

到您的标记。

# excel - 仅使用 vba 用两个数字填充单元格

> ID：15862443
> 
> 赞同：0
> 
> 时间：2013-04-07T12:36:46.137
> 
> 标签：excel, vba

请帮助我，我要做的是用数字 0 和 2 填充单元格 N2:N1041。我希望 N 列中的总共 100 个单元格（要填充的随机单元格）填充为“0”，其余的940 个单元格有“2”。或者换句话说，我希望范围的 9.6% (N2:N1041) 用“0”填充，其余的用“2”填充。

非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T14:16:55.363

你所拥有的是一个相当简单的控制`Do`循环的练习。

首先，将此范围内的所有单元格值设置为“2”。

然后，使用该`RandBetween`功能，选择该范围内的随机单元格设置为“0”值。添加一个检查以确保您没有用 0 覆盖 0，然后添加一个计数器，以便您可以控制何时退出循环。

```
Sub TestMacro()
Dim rng As Range
Dim count0 As Integer
Dim randCell As Range

Set rng = Range("A2:A1041")

rng.Value = "2" 'Set all cells = 2.'

Do

    Set randCell = rng.Cells(Application.WorksheetFunction.RandBetween(1, 1040))
    'make sure we're not overwriting another 0-value'
    If Not randCell.Value = 0 Then
        randCell.Value = 0  
        'increment the counter variable'
        count0 = Application.WorksheetFunction.CountIf(rng, "0")
    End If
Loop While count0 < 100  'exit the loop once 100 cells have been changed to 0.'

End Sub 
```

# mysql - 试图在 href 中加入带撇号的玩家姓名

> ID：15862445
> 
> 赞同：0
> 
> 时间：2013-04-07T12:36:53.023
> 
> 标签：mysql, hyperlink, apostrophe

我的问题是下一个，我遇到了一些名字的麻烦。我的应用程序正在从数据库中取出一个团队的所有名称，然后我将它们放在一个链接（A href）中以通过 GET 玩家名称传递，然后对统计数据收费。代码如下：

```
$sele_t5 = "SELECT * FROM PLAYERS WHERE nom_team='$team' ORDER BY totalpoints DESC LIMIT 5;";
$sele_t5 = mysql_query( $sele_t5, $link );
while( $row = mysql_fetch_assoc( $sele_t5 ) )
                {
                    echo "<TR>";
                    echo "<TD ALIGN='CENTER'><A HREF='?player={$row['nombre']}'>".$row['nombre']."</A></TD>";
} 
```

好吧，除了带有撇号的名字之外，这对所有玩家都很有效，例如：

乔。O'Brien 当我按下链接（显示全名正确）时，我得到了 Jo。o 在地址栏中，就像撇号正在切割动作。当我通过邮件发送带有撇号的名称时也会发生同样的情况，因此我将不胜感激任何解决此问题的方法。

谢谢和最好的问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T12:40:33.480

改变

```
echo "<TD ALIGN='CENTER'><A HREF='?player={$row['nombre']}'>" 
```

至

```
echo "<TD ALIGN='CENTER'><A HREF='?player=" . urlencode($row['nombre']) . "'>" 
```

但是，您应该真正阅读有关 MySQL-Injections 和 Cross-Site-Scripting 的内容，否则您*会*遇到很大的安全问题。

# python - findall 作为循环中的停止标准

> ID：15862447
> 
> 赞同：0
> 
> 时间：2013-04-07T12:37:07.013
> 
> 标签：python, findall

我正在尝试创建一个取决于 findall 结果的循环。我的循环每次都会对模式进行文本搜索，如果发现它正在做一些工作。上次它搜索并没有找到任何东西时，它给了我一个错误：

```
cursor = re.findall(r'MDpub\w+[^\"]', f)[0] 
IndexError: list index out of range 
```

我的python代码如下

```
cursor = re.findall(r'MDpub\w+[^\"]', f)[0]     
while cursor:
    next_url = 'url'
    subId = subId+1
    wget = "wget command"
    os.system(wget)
    f = open(('name of file')       
    if (re.findall(r'MDpub\w+[^\"]', f) != cursor):
        cursor = re.findall(r'MDpub\w+[^\"]', f)[0] 
        print cursor 
```

# android - 获取最后一个已知位置后停止 gps 更新

> ID：15862453
> 
> 赞同：-1
> 
> 时间：2013-04-07T12:38:05.360
> 
> 标签：android, gps, updates, geo

我有一个位置管理器：

```
private LocationManager lm; 
```

我这样初始化它：

```
lm = (LocationManager)getSystemService(Context.LOCATION_SERVICE); 
```

然后我需要通过这种方式实现的最后一个已知位置：

```
 if(gpsEnabled)
    {
          lastKnownLoc = lm.getLastKnownLocation(LocationManager.GPS_PROVIDER);
    }
    else if(networkEnabled)
    {
          lastKnownLoc = lm.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
    } 
```

现在我只想让状态栏中的 gps 图标消失，最重要的是，我希望它停止检查我的位置。因为我从不要求更新，我的代码中也没有 LocationListener 我不知道该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T12:54:32.850

`getLastKnownLocation()`没有打开 Gps，并且没有从该呼叫开始正在进行的进程。

GPS状态栏图标，是Android系统控制的，通知用户他的位置刚刚被获取，不能隐藏。

# performance - Firebird 性能：更新/选择与插入/选择最后

> ID：15862454
> 
> 赞同：0
> 
> 时间：2013-04-07T12:38:12.190
> 
> 标签：performance, firebird

我必须保持最新的帐户余额、更改日志并使用它。

在我看来，选项是：

1.  保持在一行中，
2.  使用触发器将更改保存到单独的表中
3.  使用 select|update 进行更新
4.  使用表中的简单选择来访问值

替代方案是：

1.  将值保存在单独的表中，
2.  使用 Select Last 和 Insert 来影响更新
3.  使用 Select Last 从单独的表中访问值

有谁知道哪个更快？里面有很多吗？

史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T11:06:18.183

您提出的建议似乎太复杂了...我建议做不同的事情：我将有两个具有主从关系的表。在详细信息中，我将插入行，其触发器将更新主表

```
balance (account, amount, ...)
balance_detail (account, amount, ...)

balance_detail_after_insert
begin
    update master
    set amount = amount + new.amount
    where account = new.account;
end

balance_detail_after_update
begin
    update master
    set amount = amount + new.amount - old.amount
    where account = new.account;
end

balance_detail_after_delete
begin
    update master
    set amount = amount - new.amount
    where account = new.account;
end 
```

进行任何更改后，您只需关闭/打开主表即可刷新数据。

# ruby - Ruby 嵌套发送

> ID：15862455
> 
> 赞同：17
> 
> 时间：2013-04-07T12:38:14.553
> 
> 标签：ruby, metaprogramming

假设我有一个带有访问对象的方法的对象：

```
def foo
   @foo
end 
```

我知道我可以使用 send 来访问该方法：

```
obj.send("foo")  # Returns @foo 
```

是否有一种简单的方法可以进行递归发送以获取 @foo 对象上的参数，例如：

```
obj.send("foo.bar")  # Returns @foo.bar 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-07T13:36:41.757

您可以使用[`instance_eval`](http://ruby-doc.org/core-2.0/BasicObject.html#method-i-instance_eval)：

```
obj.instance_eval("foo.bar") 
```

您甚至可以直接访问实例变量：

```
obj.instance_eval("@foo.bar") 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-04-07T17:26:55.510

虽然 OP 已经接受了使用 的答案`instance_eval(string)`，但我强烈敦促 OP 避免使用字符串形式，`eval`除非绝对必要。Eval 调用 ruby​​ 编译器——计算成本高，使用起来很危险，因为它打开了代码注入攻击的向量。

如前所述，根本不需要发送：

```
obj.foo.bar 
```

如果确实 foo 和 bar 的名称来自一些非静态计算，那么

```
obj.send(foo_method).send(bar_method) 
```

很简单，所有人都需要这个。

如果方法以点分字符串的形式出现，则可以使用 split 和 injection 链接方法：

```
'foo.bar'.split('.').inject(obj, :send) 
```

澄清回应评论：从安全角度来看，字符串评估是最危险的事情之一。如果有任何方式从用户提供的输入构造字符串，而无需对该输入进行非常勤奋的检查和验证，那么您应该只考虑您的系统拥有。

从用户输入获取方法的 send(method) 也有风险，但攻击向量更有限。您的用户输入可能会导致您执行任何可通过接收器调度的 0 参数方法。这里的良好做法是在调度之前始终将方法列入白名单：

```
VALID_USER_METHODS = %w{foo bar baz}
def safe_send(method)
  raise ArgumentError, "#{method} not allowed" unless VALID_USER_METHODS.include?(method.to_s)
  send(method)
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-26T15:01:10.253

聚会有点晚了，但我不得不做一些类似的事情，必须在一次调用中结合“发送”和访问来自哈希/数组的数据。基本上，这允许您执行以下操作

`value = obj.send_nested("data.foo['bar'].id")`

在引擎盖下，这将做类似的事情

`obj.send(data).send(foo)['bar'].send(id)`

这也适用于属性字符串中的符号

`value = obj.send_nested('data.foo[:bar][0].id')`

这将做类似的事情

`obj.send(data).send(foo)[:bar][0].send(id)`

如果您想使用无关访问，您也可以将其添加为参数。例如

`value = obj.send_nested('data.foo[:bar][0].id', with_indifferent_access: true)`

由于涉及更多，[这里是指向 gist 的链接](https://gist.github.com/prschmid/07a83baa42a37ed18e06519618621511)，您可以使用该链接将该方法添加到基本 Ruby 对象。（它还包括测试，以便您了解它是如何工作的）

# jquery - jQuery - 移动没有类/ID的链接

> ID：15862463
> 
> 赞同：0
> 
> 时间：2013-04-07T12:39:10.063
> 
> 标签：jquery, html, css

我正在编写一个 Enjin 网站。还有一个下拉菜单，其中包含所有管理面板选项。这是我添加引导导航栏后的样子。![图片](https://i.stack.imgur.com/laoLp.png)

如您所见，Admin 已将自己置于导航栏的最后一个下拉列表中。管理员下拉菜单的代码如下所示：

```
<div class="left">
        <a href="/" style="display: none;">CorruptionCraft</a><span class="divider">|</span><a href="/admin"></a><a href="/admin" onmouseover="Enjin_Core.dropdownMenu([['Users','/admin/users',0],['Games','/admin/games',0],['Pages','/admin/layout',0],['Modules','/admin/modules',0],['Voice','/admin/voice',0],['Themes','/admin/themelayout',0],['Files','/admin/files',0],['Settings','/admin/settings',0],['','divider'],['&lt;a href=\'javascript:void(0);\' class=\'menu-link\' onclick=\'Enjin_Core.toggleEditMode(this);\'&gt;Quick edit&lt;/a&gt;', 'html'],['&lt;a class=\'menu-link\' href=\'/admin/layout/index/page/3661170\'&gt;Edit page layout&lt;/a&gt;', 'html'],['','divider'],['Help Wiki','http://wiki.enjin.com',1],['Live Help Chat','http://www.enjin.com/forums#livehelp',1],['Support Forums','http://www.enjin.com/forums',1],['Email Support','http://www.enjin.com/support/form',1]], $(this), 'enjinbar-menu');"><span style="">Admin</span></a><span class="arrow" style="border-top-color: gray;"></span>       </div> 
```

如您所见，它没有相对 ID 或类。之前移动它时，我使用 jQuery 为链接添加了填充：

```
 $(document).ready(function() {
 $.get('/login/do/joinsite', function(data) {});
 $("a[href^='/admin']:contains('Admin')").html("<span style='padding-left:80px'>Admin</span>"); 
```

但是，尽管它将链接移动到所需的位置，但所有填充仍然是链接的。因此，当将鼠标悬停在没有填充的管理文本所在的位置时，它仍会打开下拉菜单。我希望完全移动文本，而不会出现这个烦人的错误。正如您在这张图片中看到的： ![图 2](https://i.stack.imgur.com/4s9Td.jpg) 请原谅我的油漆使用 - 但您希望能看到问题，并为我提供修复。由于 Enjin 是一个网站建设者，我不能直接去编辑 Admin 代码，需要一些额外的代码来更改它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T12:48:16.187

`padding`扩展可点击区域。您应该`margin`改用，但不要在`<span/>`您在`<a/>`. 将其直接应用于`<a/>`：

```
$("a[href^='/admin']:contains('Admin')").css("margin-left", "80px"); 
```

# javascript - GetElementbyID 无法触发

> ID：15862468
> 
> 赞同：1
> 
> 时间：2013-04-07T12:39:34.237
> 
> 标签：javascript

从我在这里的阅读中，我希望这段代码可以工作，但事实并非如此。我尝试了两种将点击事件添加到名为“lonext”的按钮的方法。都不工作。我不确定为什么会这样？

```
window.onload = function() {

var goSC = function() { //go to the sucess criteria section
    document.getElementsByClassName("guidance1").style.display = "none";
    document.getElementsByClassName("guidance2").style.display = "";
    alert("button clicked");

//first try
document.getElementById("lonext").addEventListener("click", function() {
    goSC();     
    }, false);

//second try
document.getElementById("lonext").onclick = goSC;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T12:43:48.340

[`getElementsByClassName`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByClassName)返回 an[`NodeList`](https://developer.mozilla.org/en-US/docs/DOM/NodeList)因为您的 DOM 中可能有许多具有相同类的元素，而不是单个元素。

所以：

```
var goSC = function() {
    var guidance1 = document.getElementsByClassName("guidance1");
    for (var i = 0; i < guidance1.length; i++) {
         guidance[i].style.display = "none";
    }

    var guidance2 = document.getElementsByClassName("guidance2");
    for (var i = 0; i < guidance2.length; i++) {
         guidance[i].style.display = "";
    }

    alert("button clicked");
});

window.onload = function() {
    document.getElementById("lonext").onclick = goSC;
}; 
```

如果您使用[`jQuery`](http://jquery.com/)它可以简化为：

```
$(function() {
    $('#lonext').click(function() {
        $('.guidance1').hide();
        $('.guidance2').show();
    });
}); 
```

我还强烈建议您使用 javascript 调试工具（例如 FireBug 或 Chrome Developer 工具栏）来检查您的 javascript 代码并查看它的潜在错误。该`Console`选项卡将包含有关您的 javascript 代码中可能出现的错误的宝贵信息。

# jquery - JQuery 将 span 类添加到 div 中

> ID：15862472
> 
> 赞同：5
> 
> 时间：2013-04-07T12:39:53.153
> 
> 标签：jquery, ajax, html

我在我的应用程序中使用 jQuery。我的目标是在文本字段旁边显示验证错误，但实际上它替换了 div 内容。

```
<div class="control-group">
    <label class="control-label">Nom d'équipe</label>
    <div class="controls" id="nom_equipe">
        <input type="text" name="nom_equipe" value="" class="input-xlarge">                 </div>
</div> 
```

所以我用 ajax 检索表单错误，这就是我所做的：

```
if(data.validate == false)
{
    if(data.nom_equipe != '')
    {
        $("#nom_equipe").append("span").addClass("label label-important").text(data.nom_equipe);
    }
} 
```

但它取代了我的 div id=nom_equipe 的全部内容，如下所示：

```
<div class="control-group">
    <label class="control-label">Nom d'équipe</label>
    <div class="controls label label-important" id="nom_equipe">Le champ Nom équipe est requis.</div>
</div> 
```

最后，这是我希望拥有的：

```
<div class="control-group">
<label class="control-label">Nom d'équipe</label>
<div class="controls" id="nom_equipe">
    <input type="text" name="nom_equipe" value="" class="input-xlarge"> 
    <span>The field nom_equipe is required </span>
            </div> 
```

PS：span div中的内容来自ajax请求。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-07T12:48:42.033

`append("span")`不会附加 span 元素，只会附加 text `"span"`。要附加您需要的跨度元素`append('<span>')`。

此外，该类将按照您的代码编写方式和 jQuery 工作方式添加到主元素

将 html 字符串与包含的类和文本连接起来需要更少的函数调用，并且通常比调用单个方法来创建元素的代码更少

```
$("#nom_equipe").append("<span class='label label-important'>"+data.nom_equipe+'</span>'); 
```

您现有代码的主要问题是，即使使用了链接，`text()`正在使用的元素仍然是原始的`$("#nom_equipe")`. `text('text string')`将替换该元素中的所有 html

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T12:41:15.770

如果要保留已有的内容，则需要使用[append()](http://api.jquery.com/append/)而不是[text() 。](http://api.jquery.com/text/)

```
$("#nom_equipe").append("<span class='label label-important'>" + data.nom_equipe + "</span>"); 
```

> [Append()](http://api.jquery.com/append/)将参数指定的内容插入到匹配元素集中每个元素的末尾。

# php - 转义mysql搜索字符串php

> ID：15862480
> 
> 赞同：0
> 
> 时间：2013-04-07T12:40:58.407
> 
> 标签：php, jquery, mysql, ajax

我对涉及使用 PHP/MySql 的搜索表单的最佳实践有疑问

考虑以下：

*   用于搜索书名的搜索表单
*   对“自动建议”标题的 jQuery / AJAX 请求
*   需要逃跑怎么办？

连接到数据库的 mysql 用户目前只有该`SELECT`权限，但我`INSERT`将来可能会添加该权限（因此可能会注入）。

搜索表单很简单，例如：

```
<form id="search" method="GET" action="/search/">
  <input type="text" value="" id="s" name="s" />
</form> 
```

表单通过 GET 发送到`search.php?s=Search Query`. 在那里，PHP 文件类似于以下内容：

```
<?php

  $s = $_GET['s']; // the search request

  $search = new Search($s); // creates new search object and sends the $s query

  echo $search->output;  // returns results

?> 
```

我的搜索类有以下内容：

```
class Search {

  // Database stuff omitted

 $stmt->bindParam(':search', $this->query, PDO::PARAM_STR)
 $stmt->execute;
 $res = $stmt->fetchAll(PDO::FETCH_ASSOC);
 $this->output = $res;

} 
```

我的 sql 查询是这样的：`SELECT booktitle FROM books WHERE booktitle LIKE '%:search%'`

我可能会遇到什么问题？您对需要逃避什么以及在哪里逃避有什么建议吗？您是否发现我的设置存在潜在问题？sql注入等问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T13:51:43.073

参数在准备好的 PDO 语句中自动转义，你做对了。

请注意，您不需要在查询中使用引号：

```
$stmt = $myPDO->prepare("SELECT booktitle FROM books WHERE booktitle LIKE :search");
$stmt->bindParam(':search', "%".$this->query."%", PDO::PARAM_STR);
$stmt->execute(); 
```

或者更简单：

```
$stmt = $myPDO->prepare("SELECT booktitle FROM books WHERE booktitle LIKE ?");
$stmt->execute( array("%".$this->query."%") ); 
```

更多信息：[PDO 语句是否自动转义？](https://stackoverflow.com/questions/13548059/are-pdo-statements-automatically-escaped)

# php - 有限制的用户列表

> ID：15862481
> 
> 赞同：0
> 
> 时间：2013-04-07T12:41:04.317
> 
> 标签：php, mysql, limit

我有一个列表，其中注册用户和 5 在下面显示一个按钮，上面写着 var more users。通过给按钮显示另外 5 个用户。

我的查询：

```
SELECT * FROM users ORDER BY id DESC LIMIT 0, 5 
```

其中 0 是每次给 pin 多加 5 的地方。

问题是，如果有人注册而另一个人查看列表，则用户显示重复。

示例：如果我有 10 个以降序显示的用户应该显示，

```
10, 9, 8, 7, 6, 5, 4, 3, 2, 1 
```

如果在用户看到这些寄存器和其他记录后，此按钮让用户看到更多，则记录加倍 6\. 是

```
10, 9, 8, 7, 6, 6, 5, 4, 3, 2, 1 
```

有没有什么办法解决这一问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T13:10:03.953

如果你不使用 ajax，你可以有类似的东西

```
<?php

  if(!isset($_GET['num']))
      $num = 5;
  else
      $num = $_GET['num'];

  $res = mysql_query("SELECT * FROM users ORDER BY id DESC LIMIT 0, '".$num."' ");

  while($arr = mysql_fetch_array($res))
  {
    //display data
  }
?> 
```

然后有显示更多按钮，如

```
<a href="samepage.php?num=<?php echo $num+5;?>">
  <button id="show_more">show more</button>
</a> 
```

你可以使用 ajax 让它变得更漂亮

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T12:43:53.063

是的，您不再使用相同的查询，但您使用从那里获取的最后一条记录的 id 作为起点。

```
WHERE id < $lastid ORDER BY id DESC LIMIT 0, 5 
```

顺序必须相同

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T12:42:57.603

尝试使用 SELECT DISTINCT 来获取个人名称

```
SELECT DISTINCT * FROM users ORDER BY id DESC LIMIT 0, 5 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T12:43:21.387

我不认为有这样做的“正确”方式。不过，此页面有一些很棒的提示：[https ://coderwall.com/p/lkcaag](https://coderwall.com/p/lkcaag)

# android - android-打开图库并选择图像和视频

> ID：15862483
> 
> 赞同：18
> 
> 时间：2013-04-07T12:41:15.817
> 
> 标签：android, video, android-gallery

在我的项目中，我想通过单击按钮打开一个画廊，并且应该能够选择图像或视频来获取它们的路径。

```
Intent i = new Intent(Intent.ACTION_PICK, android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);

startActivityForResult(i, RESULT_LOAD_IMAGE); 
```

从上面的代码我可以打开画廊，但在这种情况下我只能选择图像。所以，请帮助我选择视频。提前致谢。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2017-06-02T20:12:25.940

在 Android 6.0 及更高版本上使用“video/* image/ *”或“image/* video/*”类型不起作用，它只识别您指定的第一个过滤器。我用这段代码解决了这个问题：

```
Intent photoPickerIntent = new Intent(Intent.ACTION_PICK);
photoPickerIntent.setType("*/*");
photoPickerIntent.putExtra(Intent.EXTRA_MIME_TYPES, new String[] {"image/*", "video/*"});
startActivityForResult(photoPickerIntent, Constants.SELECT_PHOTO); 
```

虽然这会询问用户他们想使用哪个应用程序来选择图像/视频。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-04-07T12:59:15.917

您可以使用下一个片段：

```
Intent mediaChooser = new Intent(Intent.ACTION_GET_CONTENT);
//comma-separated MIME types
mediaChooser.setType("video/*, image/*");
startActivityForResult(mediaChooser, RESULT_LOAD_IMAGE); 
```

但我认为它只适用于 ICS 或更大

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-09-06T11:52:05.567

您需要使用以下内容作为选择 Intent

```
Intent photoLibraryIntent = new Intent(Intent.ACTION_PICK, android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
photoLibraryIntent.setType("image/* video/*"); 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-04-07T16:42:22.883

下面的代码解决了我的问题

```
 final Intent galleryIntent = new Intent(Intent.ACTION_GET_CONTENT);
                        galleryIntent.setType("*/*");
                        startActivityForResult(galleryIntent, RESULT_LOAD_IMAGE); 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2021-01-27T22:29:45.093

`2022 Android 9`

我已经尝试了所有在线可用的方法，但意外地混合了两种解决方案，结果证明是可行的。

这仅提供照片库和谷歌照片作为选项，您可以选择照片和视频。

```
 libraryIntent.setType("video/*, image/*");
    String[] mimetypes = {"image/*", "video/*"};
    libraryIntent.putExtra(Intent.EXTRA_MIME_TYPES, mimetypes); 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2020-11-14T05:37:01.870

没有足够的代表发表评论，但@YYamil 的回复效果很好。

```
Intent mediaChooser = new Intent(Intent.ACTION_GET_CONTENT);
//comma-separated MIME types
mediaChooser.setType("video/*, image/*");
startActivityForResult(mediaChooser, RESULT_LOAD_IMAGE); 
```

如果您使用的是新的[registerForResultActivity](https://developer.android.com/training/basics/intents/result#register)，请创建一个副本`ActivityResultContracts.GetMultipleContents()`并放入`createIntent`：

```
 @CallSuper
    override fun createIntent(context: Context, input: String): Intent {
        return Intent(Intent.ACTION_GET_CONTENT)
            .addCategory(Intent.CATEGORY_OPENABLE)
            .setType(input)
            .putExtra(Intent.EXTRA_ALLOW_MULTIPLE, true)
            .putExtra(Intent.EXTRA_MIME_TYPES, arrayOf("image/*", "video/*")) // this does the trick
    } 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2017-04-13T07:09:26.613

这是我所知道的最好的......试试这个......

```
 final CharSequence[] options = {"Images", "Videos", "Cancel"};
            AlertDialog.Builder builder = new AlertDialog.Builder(OpenGallery.this);
            builder.setTitle("Select From...");
            builder.setItems(options, new DialogInterface.OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int item) {
                    if (options[item].equals("Images")) {
                        Intent intent = new Intent(Intent.ACTION_PICK, android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
                        intent.putExtra(Intent.EXTRA_ALLOW_MULTIPLE, true);
                        startActivityForResult(intent, 1);
                    } else if (options[item].equals("Videos")) {
                        Intent intent = new Intent(Intent.ACTION_PICK, android.provider.MediaStore.Video.Media.EXTERNAL_CONTENT_URI);
                        intent.putExtra(Intent.EXTRA_ALLOW_MULTIPLE, true);
                        startActivityForResult(intent, 1);
                    } else if (options[item].equals("Cancel")) {
                        dialog.dismiss();
                    }
                    dialog.dismiss();
                }
            });
            builder.show(); 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-04-18T15:25:10.310

将您的意图更改为：

```
Intent i = new Intent(Intent.ACTION_PICK,
android.provider.MediaStore.Video.Media.EXTERNAL_CONTENT_URI); 
```

尝试获取视频时，您需要向 mediaStore 声明该视频是有序的，而不是您编写的图像。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-07-29T13:24:38.370

那么android对访问外部内容有很多限制。我最终使用了 3rd 方库。这个不错。： [https ://github.com/AnilFurkanOkcun/UWMediaPicker-Android](https://github.com/AnilFurkanOkcun/UWMediaPicker-Android)

```
implementation 'com.github.AnilFurkanOkcun:UWMediaPicker-Android:1.3.0'

UwMediaPicker
.with(this)                     // Activity or Fragment
    .setGalleryMode(UwMediaPicker.GalleryMode.ImageGallery) // GalleryMode: ImageGallery/VideoGallery/ImageAndVideoGallery, default is ImageGallery
.setGridColumnCount(4)                                  // Grid column count, default is 3
    .setMaxSelectableMediaCount(10)                         // Maximum selectable media count, default is null which means infinite
    .setLightStatusBar(true)                                // Is llight status bar enable, default is true
.enableImageCompression(true)               // Is image compression enable, default is false
.setCompressionMaxWidth(1280F)              // Compressed image's max width px, default is 1280
.setCompressionMaxHeight(720F)              // Compressed image's max height px, default is 720
.setCompressFormat(Bitmap.CompressFormat.JPEG)      // Compressed image's format, default is JPEG
.setCompressionQuality(85)              // Image compression quality, default is 85
.setCompressedFileDestinationPath(destinationPath)  // Compressed image file's destination path, default is "${application.getExternalFilesDir(null).path}/Pictures"
.launch{selectedMediaList-> } // (::onMediaSelected)    // Will be called when media is selected 
```

# disassembly - powerpc 通过其原始数据反汇编指令

> ID：15862484
> 
> 赞同：3
> 
> 时间：2013-04-07T12:41:18.720
> 
> 标签：disassembly, powerpc

如何从内存转储中反汇编一些指令？我只有原始转储，objdump 只理解对象格式。

我的处理器是 PowerPC 440（*PowerPC Book E Architecture*）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T00:24:21.140

事实上，objdump 可以很好地反汇编原始二进制文件。试试这个：

`objdump -m ppc -D -b binary -EB dump.bin`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-09T15:38:22.963

```
$ xxd -p asm
3800000060000000 
```

使用[devkitPPC](https://sourceforge.net/projects/devkitpro/)：

```
$ powerpc-eabi-objdump --disassemble-zeroes -m powerpc -D -b binary -EB asm 
```

产量：

```
asm:     file format binary

Disassembly of section .data:

00000000 <.data>:
   0:   38 00 00 00     li      r0,0
   4:   60 00 00 00     nop 
```

# javascript - 是否可以将包含大量 javascript 的动态 HTML 页面转换为没有 javascript 的页面？

> ID：15862485
> 
> 赞同：3
> 
> 时间：2013-04-07T12:41:20.893
> 
> 标签：javascript, html

我有一个包含大量 javascript 的页面。然而，页面一旦渲染仍然是静态的，没有移动的东西或特殊效果等......应该可以在没有任何 javascript 的情况下仅使用纯 HTML 和 CSS 渲染相同的 HTML。这正是我想要的——我想获得特定页面的无 javascript 版本。当然，我不希望有任何动态行为，所以例如，如果按钮死了，我就可以了。我只是想让它们渲染。

现在，我不想要图像。它需要是带有 CSS 的 HTML，可以嵌入 HTML，也可以。

我该怎么做？

**编辑**

我很抱歉，但我一定没有说清楚。我的网站使用 javascript，没有它就无法工作。我不想检查它是否可以正常工作，我知道它不会，我真的不在乎。这不是我要问的。我在询问一个特定的页面，我想将其作为纯 HTML + CSS 抓取。失去其动态性的事实并不重要。

**编辑2**

有一个建议是从 DOM 检查器中对 HTML 进行语法分析。这是我做的第一件事——在 Chrome 开发工具中，将根 html 元素复制为 HTML 并将其保存到文件中。当然，这是行不通的，因为它继续引用网络上的 CSS 文件。我想我应该提到**我希望它在文件系统中工作。**

接下来是使用某种“保存”菜单（取决于浏览器）将页面保存为完整的所有环境。它保存页面和所有相关文件，形成一个闭包，可以从文件系统打开。但是必须手动清理 html 中的所有 javascript - 乏味且容易出错。

**编辑3**

我似乎总是忘记一些事情。当然，应该保留图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T13:31:53.453

我必须半定期做类似的任务。到目前为止，我还没有找到一种自动化的方法，但这是我的工作流程：

1.  在谷歌浏览器中打开页面（我想FireFox也有相关工具）；
2.  “将页面另存为”（完整页面），将 html 页面重命名为更好的名称，删除所有`.js`下载的脚本，将所有内容移动到单个文件夹中；
3.  在原始页面上，打开 Elements 选项卡（DOM 检查器），查找并删除我知道会导致问题的所有标签（例如 Facebook“like”按钮）（我也尝试`script`在此阶段删除标签，因为它更容易）并复制为HTML（右键单击`<html>`标签。将其粘贴到（替换）下载的 HTML 文件中（记住保留`DOCTYPE`不被复制的；
4.  在所有 HTML 文件中搜索任何剩余`script`部分并删除（也删除任何`noscript`内容），并搜索`on`（开头有空格但 StackOverflow 不会呈现它）以删除处理程序（`onload`,`onclick`等）；
5.  搜索图像 ( `src=`, `url(`)，查找图像文件名中的常见模式并使用正则表达式全局替换它们。例如`src="/images/myimage.png"`=> `|/images/||`。这需要应用于所有 HTML 和 CSS 文件。还要确保 CSS 文件具有正确的路径 ( `href`)。这样做时，我通常将所有`href`（链接）替换为`#`;
6.  最后在浏览器中打开转换后的页面（实际上我倾向于尽早这样做，以便查看我所做的任何更改是否会导致它中断），使用控制台选项卡检查 404 错误（未下载的图像或有不同的名称）和网络选项卡以检查是否仍在从在线版本加载任何内容；
7.  对于任何未下载的文件，我会返回原始页面并使用“资源”选项卡找到它们并手动下载；
8.  （可选）剔除任何不需要的内容（跟踪器图像/iframe、未使用的 CSS 等）。

这是一项大工作。我想要一个自动化所有这些的工具，但到目前为止我还没有找到一个。我下载的页面制作得很糟糕（商店），其中有很多不寻常的代码，所以这就是为什么有这么多步骤的原因。您可能不需要遵循每一步。

# android - TextView 中心垂直和宽度百分比

> ID：15862488
> 
> 赞同：0
> 
> 时间：2013-04-07T12:41:58.207
> 
> 标签：android, android-layout

我在同一行上有两个 TextView，我希望它们各占父宽度的一半。此外，我想将它们放置在父布局的垂直中间。

我不能使用 RelativeLayout 因为我需要指定权重，我不能使用 LinearLayout 因为我需要指定中心垂直属性。

那么我应该使用什么布局呢？

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T12:46:26.993

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center_vertical"
    android:orientation="horizontal" >

    <TextView
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="text 1" />

    <TextView
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="text 2" />
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T12:44:19.383

您可以使用 LinearLayout 并且仍然垂直居中：

```
LinearLayout.... 
    android:layout_gravity="center_vertical" 
```

# c - 使用父宏右括号的 C 预处理器

> ID：15862490
> 
> 赞同：6
> 
> 时间：2013-04-07T12:42:01.893
> 
> 标签：c, macros, c99, c-preprocessor

我有这个有效的代码：

```
#include <stdio.h>
#define A(x) x B
#define B(x) C(x,
#define C(x,y) y x)
int main( void ) {
    printf( A("1") ("2") "3" );
} 
```

它打印`132`（`A`宏的重点是将括号中参数后面的内容与之后的所有内容交换，直到另一个右括号）

但是如果我在另一个宏中使用它：

```
#define Z(x) x
printf( Z( A("1") ("2") "3" ) ); 
```

我收到编译错误“未终止的函数式宏调用”。

我意识到发生这种情况是因为编译器试图`Z`独立处理 的参数，但我需要使用它的右括号作为标记。有没有办法可以在宏中完成这项工作？更改调用语法并不是一个真正的选择。

* * *

ps 在我得到任何关于这是多么糟糕的事情的回应之前，请放心：这不是真正的代码。这是在制作用于`define`在 C 中模拟新语言的玩具程序时出现的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T01:27:14.890

查看发生了什么的最简单方法是稍微更改测试用例。

```
#define A(x) x B
#define B(x) C(x,
#define C(x,y) y x]  /* note close square bracket instead of close paren */

Y(A(1)(2)3) 
```

预处理到`Y(1 3 2]`. 这是因为扩张的中间阶段看起来像

```
Y(1 C(2,3) 
```

此时`C`吃了*似乎属于`Y`原始文本*的右括号并将其替换为右括号。

`A(1)(2)3`现在，如果在宏参数中会发生什么不同？

```
#define Z(x) x
Z(A(1)(2)3) 
```

由于[参数预扫描](http://gcc.gnu.org/onlinedocs/gcc-4.8.0/cpp/Argument-Prescan.html#Argument-Prescan)，扩展的类似中间阶段*不是*

```
Z(1 C(2,3) 
```

反而

```
1 C(2,3 
```

`Z`隐藏在一个隐藏的“未决扩展”堆栈上。预处理器实际上是在*强制执行*最后关闭括号所属的文本外观`Z`，并且`C`不允许借用它。

我能想到的实现您最初目标的侵入性最小的方法是

```
#define _A(x) x B
#define B(x) C(x,
#define C(x,y) y x)

#define Z(x) ZZ((_##x))
#define ZZ(x) ZZZ x
#define ZZZ(x) [x]

Z(A(1)(2)3) 
```

预处理到`[1 3 2]`. 我们使用标记粘贴运算符来防止`Z`' 参数被预扫描，因此我们可以添加一组临时的额外括号供`C`. `ZZ`然后`ZZZ`再次剥离它们。需要注意的是，如果你不粘贴*某些东西*`x`，这是一个错误，所以我们必须在 的定义中添加一个前导下划线，如果' 参数的第一个标记永远不是可以是的东西，那将是一个错误标记粘贴在下划线之后。*`A``Z`*

 *您可能要考虑使用[M4](https://www.gnu.org/software/m4/)而不是尝试将其硬塞到 C 预处理器中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-04T05:11:31.553

eclipse cdt 非常适合调试您的问题。对于 Eclipse，只需将鼠标悬停在宏上即可开始。这是关于它的详细信息：

[使用 Eclipse 进行 C/C++ 软件开发 >> 2.1.7。宏扩展](http://eclipsebook.in/c-cpp-development/reading-code/macro-expansions/)

对于您的第二个宏，eclipse 显示以下内容：

```
int main (void) {
    printf( Z( A("1") ("2") "3" ) );
} 
```

![在此处输入图像描述](https://i.stack.imgur.com/Mx8Tm.png) ![在此处输入图像描述](https://i.stack.imgur.com/rF4x6.png) ![在此处输入图像描述](https://i.stack.imgur.com/ToXEI.png) ![在此处输入图像描述](https://i.stack.imgur.com/4M8Z5.png) ![在此处输入图像描述](https://i.stack.imgur.com/5Oqjn.png)

**发现错误**

注意扩展#3 C("2", "3" 只是“消失”。我认为这是 CDT 说“未终止的参数列表”的方式。不管它消失的情况如何，这是我在调试时更喜欢采用的方法宏。

*   使用这个工具可以清楚地看到，在 Expansion#2（第三张图片）中，我们有一组未终止的括号，从而定位了错误。

**了解解决方案**

在使用这个工具摆弄了一下之后，我认为这就是你所追求的：

```
printf( Z( (A("1") ("2") "3") ) );

yields (using gcc -E main.c -c)

printf( ("1" "3" "2") ); 
```

![在此处输入图像描述](https://i.stack.imgur.com/l99ZJ.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T14:26:12.207

这与处理宏的顺序有关。`Z`最简单的解决方案是在参数周围添加额外的括号。

```
 printf( Z( (A("1")("2") "3")) ); 
```*

# javascript - JS - 遍历文本，在每个“。”之后进行数组条目

> ID：15862491
> 
> 赞同：0
> 
> 时间：2013-04-07T12:42:17.710
> 
> 标签：javascript, string-search, string-split

我是 JavaScript 新手。我有一个包含几个句子的文本，我希望每个句子都是名为句子和警报的数组中的一个条目（“创建了新条目”）。所以我必须循环遍历，只要有一个“。” 将开始一个新条目。但是我怎样才能通过一个文本直到它结束呢？

```
var sentences = []
var myText= "I like cars. I like pandas. I like blue. I like music." 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T12:45:08.463

您可以通过拆分然后修剪并添加句号`myText`来做到这一点。`". "`

[jsFiddle](http://jsfiddle.net/Tyriar/gtjxy/2/)

```
var myText = "I like cars. I like pandas. I like blue. I like music."
var sentences = myText.split(". ");
for (var i = 0; i < sentences.length; i++) {
    if (i != sentences.length - 1)
        sentences[i] = sentences[i].trim() + ".";
} 
```

将文本拆分为 on`". "`而不是 on`"."`意味着它将适用于类似的句子`"That costs $10.50."`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T12:45:38.700

使用`String.charAt(index)`.

```
var sentences = [""];
var count = 0;
for(var i = 0; i < myText.length; i++){
    var current = myText.charAt(i);
    sentences[count] += current;
    if(current == "."){
        count++;
        sentences[count] = "";
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T12:45:37.363

您可以使用`split`

```
var myText= "I like cars. I like pandas. I like blue. I like music.";
var sentences  = myText.split("."); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-07T13:02:30.610

虽然@Pietu1998 的回答向您展示了如何遍历字符串的字符，但从这样的字符串中获取句子数组的更舒适的方法是[匹配](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/match)正[则表达式](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)：

```
var myText= "I like cars. I like pandas. I like blue. I like music.";
var sentences = myText.match(/\S[^.]*\./g) || []; 
```

当然，这只是在每个点上拆分字符串，在现实生活中，并非每个句子都以点结尾，也不是每个点都以句子结尾。

# ubuntu - 如何在 Ubuntu 中全局安装 ArUco

> ID：15862493
> 
> 赞同：0
> 
> 时间：2013-04-07T12:42:30.477
> 
> 标签：ubuntu, global

[我按照本教程http://miloq.blogspot.com.es/2012/12/install-aruco-ubuntu-linux.html](http://miloq.blogspot.com.es/2012/12/install-aruco-ubuntu-linux.html)安装了 ArUco 库。但我不管理生成一个简单的可执行文件。我正在尝试更改 aruco_test.cpp 中的代码行（安装库时已经出现的代码行。它位于 aruco/utils 文件夹中）。我想更改代码中使用的摄像头，这样我就可以使用我的外部网络摄像头，而不是使用笔记本电脑的网络摄像头。每当我尝试在 linux 终端上编译 *.cpp 文件以生成可执行文件时，都会收到以下错误消息：

> g++ aruco_test.cpp -o aruco_test
> 
> aruco_test.cpp:31:19：致命错误：aruco.h：没有这样的文件或目录
> 
> 编译终止。

有朋友说我没有全局安装ArUco库，所以我的系统找不到aruco.h。我知道这个标题在哪里。它在 /usr/local/include/aruco 中，但我不知道如何让系统在该文件夹中找到此标头。

如果全局安装了 ArUco 库，我可以通过在代码中仅包含“#include aruco.h”来编译 *.cpp 文件。

在这里可以找到 aruco_test.cpp 代码副本：[https ://github.com/elrond79/aruco/blob/master/utils/aruco_test.cpp](https://github.com/elrond79/aruco/blob/master/utils/aruco_test.cpp)

有人能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T12:57:29.910

使用随包提供的 makefile 进行编译。

为了弄清楚最初用于编译的命令是什么， perform`make clean`后跟`make -n`. 后一个命令不会执行任何操作，只会发出它本来会执行的指令。

# knockout.js - Durandal (Jumpstar) - 为结果视图添加搜索侧边栏窗格

> ID：15862497
> 
> 赞同：0
> 
> 时间：2013-04-07T12:42:58.620
> 
> 标签：knockout.js, durandal

我在 durandal 中创建了一个视图来显示产品列表。

我希望能够搜索这些产品，这就是为什么我想在侧边栏中添加一个仅针对此产品视图显示的搜索表单。

侧边栏必须在产品视图之外声明，这样每当我更改搜索表单中的过滤器时它就不会刷新。意味着，我需要一个外部侧边栏来刷新视图，并且仅在激活该视图时才会出现。

我不知道如何开始实施它以及最好的方法是什么。帮助会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T19:11:12.340

您可以在此处采用几种不错的方法，但最佳选择取决于您如何为搜索表单分配侧边栏区域。

这取决于您希望产品视图模型和搜索表单的耦合程度。

**共享相同的视图模型（或其中的一部分）：**如果您可以在两个视图模型之间共享相同的 KnockOut 可观察对象，那么其余的几乎都是“一切照旧”。您可以通过在产品视图模型和搜索表单视图模型之间共享一个 ko.observable 来实现这一点。这可以通过以下方式之一完成：

*   共享一个共同的视图模型基础（这里有一些信息：[使用 Durandal 时的视图模型继承](https://stackoverflow.com/questions/15634111/view-model-inheritance-when-using-durandal)）
*   创建产品 VM 和搜索 VM 都需要的单独模块
*   设置 Durandal 组合，使它们都使用字面上相同的视图模型。但是，这不是很直观，因此我不建议这样做。

一旦你有一个可用的共享模型，你可以从两个视图绑定到它，并且 KnockOut 的可观察性应该能够提供你需要的所有反馈。

**一种更松散耦合的方法**是使用 pub/sub 技术。这使得模块非常独立，但有相关的管理和维护后果，就像使用全局变量时一样。我只会在有必要使视图模型尽可能彼此隔离时，或者当后勤系统不允许视图模型相互了解时才建议这样做。

在发布/订阅场景中，搜索 VM 仅发布产品 VM 列出的事件，反之亦然。有许多提供此功能的 JS 库。它甚至作为 Durandal 的一部分包含在其中 - 以下是一些相关信息： [Durandal：利用发布和订阅](http://durandaljs.com/documentation/Leveraging-Publish-Subscribe/) 同时查看[Durandal 事件参考](http://durandaljs.com/documentation/Events/)

# python - 不存在字段的 IntegrityError

> ID：15862506
> 
> 赞同：0
> 
> 时间：2013-04-07T12:43:55.590
> 
> 标签：python, database, django

我在添加现有模型客户端的新副本时遇到了麻烦，如下所示：

```
class Client(models.Model):
  user = models.OneToOneField(User) # Extending default user model
  organization = models.CharField(max_length=40)
  def __unicode__(self):
      return self.user.first_name + " " + self.user.last_name 
```

我进入 shell 并输入：

```
from django.contrib.auth.models import User
from mysiteApp.models import Client

user = User.objects.get(pk=2) # User with pk 2 exists
client = Client(user=user, organization="someorg") # copy creates succesfully 
```

但是，我试图通过 client.save() 保存副本

我得到了这个：

```
>>> client.save()
Traceback (most recent call last):
  File "<console>", line 1, in <module>
  File "/usr/local/lib/python2.7/dist-packages/django/db/models/base.py", line 537, in save
    force_update=force_update, update_fields=update_fields)
  File "/usr/local/lib/python2.7/dist-packages/django/db/models/base.py", line 641, in save_base
    result = manager._insert([self], fields=fields, return_id=update_pk, using=using, raw=raw)
  File "/usr/local/lib/python2.7/dist-packages/django/db/models/manager.py", line 215, in _insert
    return insert_query(self.model, objs, fields, **kwargs)
  File "/usr/local/lib/python2.7/dist-packages/django/db/models/query.py", line 1559, in insert_query
    return query.get_compiler(using=using).execute_sql(return_id)
  File "/usr/local/lib/python2.7/dist-packages/django/db/models/sql/compiler.py", line 844, in execute_sql
    cursor.execute(sql, params)
  File "/usr/local/lib/python2.7/dist-packages/django/db/backends/util.py", line 41, in execute
    return self.cursor.execute(sql, params)
  File "/usr/local/lib/python2.7/dist-packages/django/db/backends/sqlite3/base.py", line 389, in execute
    six.reraise(utils.IntegrityError, utils.IntegrityError(*tuple(e.args)), sys.exc_info()[2])
  File "/usr/local/lib/python2.7/dist-packages/django/db/backends/sqlite3/base.py", line 387, in execute
    return Database.Cursor.execute(self, query, params)
IntegrityError: mysiteApp_client.cID may not be NULL 
```

问题是我之前在客户端模型中有 cID 之类的字段，它确实没有为空，但现在我没有

manage.py sql mysiteApp 显示：

```
BEGIN;
CREATE TABLE "mysiteApp_client" (
    "id" integer NOT NULL PRIMARY KEY,
    "user_id" integer NOT NULL UNIQUE REFERENCES "auth_user" ("id"),
    "organization" varchar(40) NOT NULL
)
; 
```

manage.py syncdb 没有任何改变，我该怎么办？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T12:51:49.173

您的数据库仍处于需要 cID 字段的状态。这是因为[syncdb](https://docs.djangoproject.com/en/dev/ref/django-admin/#syncdb)不会更改已经存在的表。

为了克服您的问题，您有三个选择：

a）删除数据库中的客户端表（=丢失您的数据）并`syncdb`再次运行

b) 使用 sql`ALTER TABLE`命令手动修改数据库

c) 使用[South](http://south.aeracode.org/) ( [introduction](http://www.djangopro.com/2011/01/django-database-migration-tool-south-explained/) ) 之类的迁移工具来反映您对数据库中的 models.py 所做的更改。我建议学习如何处理 South，因为一旦您投入生产，您可能需要这样的迁移工具。

# php - 我正在尝试获取并显示名称和密码，但提交按钮上没有任何反应？

> ID：15862507
> 
> 赞同：0
> 
> 时间：2013-04-07T12:44:06.920
> 
> 标签：php, mysql, phpmyadmin

我想摄入没有。用户和基于摄入量没有。想要显示名称和密码。但它只显示一个 text_box 和一个提交按钮，没有任何反应。

代码是这样的： -

```
<?php
mysql_connect('localhost','root','');
mysql_select_db('wp');

if(isset($_POST['t1'])&&isset($_POST['submit'])){
$t1=$_POST['t1'];

$query="SELECT  `name` ,  `password` FROM  `register` WHERE  `intake` ='$t1'";

if($result=mysql_query($query)){
?>
<table border="1">
<thead>
<tr>
<th>name</th>
<th>password</th>
</tr>
</thead>
<tbody>
<?php
while($row=mysql_fetch_assoc($result)){
    $name=$row['name'];
    $password=$row['password'];
    echo"<tr>
    <td>$name</td>
    <td>$password</td>
    </tr>";
    }
}
}

?>
</tbody>
</table>

<form action="table.php" method="post">

<input type="text" name="t1"  />
<input type="submit" value="submit" />
</form> 
```

预先感谢。

`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T12:49:48.333

好的，从哪里开始。

1.  mysql_query 已弃用，请使用[mysqli](http://php.net/mysqli)或[pdo](http://php.net/pdo)

2.  如果您选择不听#1，那么至少在插入数据库之前[清理您的输入。](http://www.php.net/manual/en/function.mysql-real-escape-string.php)

3.  您的提交按钮未命名为“提交”，因此您对 $_POST['submit'] 的检查将不起作用。

4.  不要存储明文密码。整个剧本让我害怕。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T12:50:04.900

```
if(isset($_POST['t1'])&&isset($_POST['submit'])){ 
```

如果你正在检查 $_POST['t1'] 你不需要检查 $_POST['submit']

这可能对你更好

```
if(isset($_POST['t1'])&&!empty($_POST['t1'])){ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T12:49:23.590

以下内容应在`if(isset(..`子句内。事实上，它在条款之外。

```
</tbody>
</table> 
```

我确定是否是它没有显示的原因，但这是错误的。

# python - 如何将“Twisted Web”指定为点子要求？

> ID：15862509
> 
> 赞同：3
> 
> 时间：2013-04-07T12:44:12.310
> 
> 标签：python, pip, twisted.web, requirements.txt

我正在打包我的程序，但遇到了“Twisted Web”依赖项的问题。我尝试在文件中输入以下所有组合`setup.py`：

```
install_requires = ['Twisted Web>=12.2.0'],
install_requires = ['Twisted%20Web>=12.2.0'],
install_requires = ['"Twisted Web">=12.2.0'], 
```

但我唯一得到的是

```
error in philharmonic setup command: 'install_requires' must be a string or list of strings containing valid project/version requirement specifiers 
```

文件的其余部分没问题，因为如果我设置了其他一些单字包，安装就会通过而没有任何抱怨。

这似乎是一个[已知问题](https://github.com/pypa/pip/issues/307)，但我将不胜感激任何其他指定此要求的方式。`install_requires`我可以在字段中输入 PyPI 链接或 GitHub 存储库 url吗？[是否有支持语法的好资源，因为我在Hitchhiker's guide](http://guide.python-distribute.org/creation.html)中没有找到太多解释？

# jms - 如何定义监听端口？

> ID：15862512
> 
> 赞同：0
> 
> 时间：2013-04-07T12:44:27.390
> 
> 标签：jms, websphere, jmeter, ibm-mq

我正在使用带有**JMS 点对点**采样器的 JMeter，并且我有一个带有侦听器端口**2222**（非标准**1414**）的 MQ 队列。JMeter 通过 Provider URL 和连接工厂类从 IBM WebSphere Application Sever 检索队列连接详细信息：**com.ibm.websphere.naming.WsnInitialContextFactory**

我的问题是：如何在 JMeter 插件中定义该端口号？因为我在 JMeter 日志中有关于尝试创建与**1414**的连接的消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T05:10:08.820

尝试去：

> 首先将采样器 JMS 点对点添加到点对点元素（添加 --> 采样器 --> JMS 点对点）。然后，在树中选择 JMS 点对点采样器元素。

而不是设置属性：

```
Provider URL     tcp://$HOSTNAME:$PORT 
```

# iphone - 视图完全推入视图后如何让 tabBar 动画？

> ID：15862517
> 
> 赞同：0
> 
> 时间：2013-04-07T12:44:54.440
> 
> 标签：iphone, ios, uitabbarcontroller, show-hide

我正在尝试模拟 TweetBot/NetBot 在从帐户操作的 tableView 推送后为 tabBar 设置动画的方式。当视图被完全推入时，taBar 才会从底部动画。我尝试了各种隐藏/显示方法，但在“显示”部分似乎都失败了。

有人对如何做到这一点有建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T13:36:13.940

首先，我假设您没有使用 UITabViewController，因为它不能被推入 UINavigationController 堆栈，所以我认为您使用的是嵌入在 UIViewController 中的独立 UITabBar。这个假设正确吗？

尝试使用此代码（我没有尝试过）。

```
- (void)viewDidAppear {
    [super viewDidAppear];

    // Calls showTabBar method after SOME_DELAY. You can also call directly [self showTabBar] if you want zero delay.
    [self performSelector:@selector(showTabBar) afterDelay:SOME_DELAY];
}

- (void)showTabBar {
   // Before the animation begins, your UITabBar must be outside the view controller's view frame. 
   CGRect tabBarFrame = CGRectMake(0,
                                   CGRectGetHeight(self.view.bounds), 
                                   CGRectGetWidth(self.view.bounds),
                                   CGRectGetHeight(self.tabBar.frame);
   self.tabBar.frame = tabBarFrame;

   // Let's start with the animation, setting a new frame for tab bar inside an animation block
   [UIView animateWithDuration:ANIMATION_DURATION animations:^{
       // Change origin Y. It assumes that the height of self.tabBar is right, otherwise put the height you want instead of CGRectGetHeight(self.tabBar.frame).
       tabBarFrame.origin.y = CGRectGetHeight(self.view.bounds) - CGRectGetHeight(self.tabBar.frame); 

       self.tabBar.frame = tabBarFrame;
   }];
} 
```

# matlab - matlab 到 c 代码生成工作流程

> ID：15862518
> 
> 赞同：0
> 
> 时间：2013-04-07T12:44:58.877
> 
> 标签：matlab, visual-c++

我正在为我的学校项目测试 matlab 到 c/c++ 代码，我不知道如何在 Visual Studio 中使用生成的 c/c++ 代码和静态库，我的 matlab 函数很简单

```
function c = simpleProduct(a,b) %#codegen
c=a*b; 
```

我使用 matlab 编码器为我的 win32 项目生成 c/c++ 代码（静态库），但问题是它生成了很多文件，而不是我要查找的文件是 simpleproduct.c、simpleproduct.h、simpleproduct.lib 而是我明白了。

```
rt_nonfinite.h
rtGetInf.h
rtGetNaN.h
rtwtypes.h
simpleProduct_types.h
rt_nonfinite.cpp
rtGetInf.cpp     
rtGetNaN.cpp
rtwtypes.cpp
simpleProduct.obj 
rt_nonfinite.obj 
rtGetNaN.obj 
rtGetInf.obj 
simpleProduct_types.cpp
simpleProduct.lib  ------- my static library.
and others... 
```

但问题是我曾经使用过 simpleProduct.h，并像这样调用 simpleproduct 函数

```
real32_T value=simpleproduct(10,10); 
```

它给了我这个错误。甚至为链接器添加 .lib 文件。为什么会这样？

```
Error 1 error LNK2019: unresolved external symbol "float __cdecl simpleProduct(float,float)" (?simpleProduct@@YAMMM@Z) referenced in function main  c:\Users\serakpc\documents\visual studio 2012\Projects\matlabCoder\debugger\Source.obj  debugger 
```

另外，如果有人帮助我为 Windows OS 通用 PC 配置 matlab 编码器，我将不胜感激。例如，你建议我在硬件面板下的“代码替换库”和“设计供应商”中使用什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T03:32:09.173

解决方案是，检查仅生成 matlab 代码并从头开始创建一个静态项目并使用 Visual C++ 编译生成的代码。我在一些论坛中找到了这个解决方案并且它有效。我认为 matlab 为 linux 编译库。

# jquery - jQuery点击功能ul菜单排除第一个ul

> ID：15862520
> 
> 赞同：0
> 
> 时间：2013-04-07T12:45:08.513
> 
> 标签：jquery

我有人为我写了这个然后去了 MIA 并且无法弄清楚如何自己调整它。我对 jQuery 有点陌生。这是一个可扩展的侧边栏导航`<ul>`，目前整个东西在点击时是可扩展和可收缩的。

我试图让第一个标题 1`<ul>`永久“扩展”以显示链接 1 和链接 2，但保持 jQuery 在标题 2（以及 3、4、5 等）上工作。

我怎样才能永久保持第一个`<ul>`打开？非常感谢您的帮助！

```
<div class="sidebar">
<nav>
<span class="heading">Title 1</span>
<ul>
<li><a href="/firstlink">Link 1</a></li>
<li><a href="/firstlink">Link 2</a></li>
</ul>
</nav>

<nav>
<span class="heading">Title 2</span>
<ul>
<li><a href="/firstlink">Link 1</a></li>
<li><a href="/firstlink">Link 2</a></li>
</ul>
</nav>
</div> 
```

这是使它扩展和收缩的 jQuery 位：

```
jQuery(window).load(function(){
jQuery('#body .sidebar nav').click(function(){
    var the_ul = jQuery('> ul', this);
    if(the_ul){
        if (the_ul.css('display') == 'none') {
            jQuery(the_ul).slideDown('500');
        } else {
            jQuery(the_ul).slideUp('500');
        }
    };
});  
}); 
```

这是CSS：

```
.sidebar nav ul {display:none;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T12:55:04.970

我认为这就是你想要的：

```
$('.sidebar nav ul:eq(0)').show();

$('.sidebar nav').click(function(){
    var the_ul = $(this).find("ul");

    if(the_ul){
        if (the_ul.css('display') == 'none') {
            the_ul.slideDown('500');
        } else {
            the_ul.slideUp('500');
        }
    };
}); 
```

`[**Working Demo**](http://jsfiddle.net/NPfND/)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T12:51:17.250

试试这个（[http://jsfiddle.net/v7JhL/1/](http://jsfiddle.net/v7JhL/1/)）并删除CSS：

```
jQuery('#body .sidebar nav:gt(0)').click(function(){
    var the_ul = jQuery('> ul', this);
    if(the_ul){
        if (the_ul.css('display') == 'none') {
            jQuery(the_ul).slideDown('500');
        } else {
            jQuery(the_ul).slideUp('500');
        }
    };
});
jQuery('.sidebar nav > ul:gt(0)').hide() 
```

# android - 编辑文本内容增加时，Android 标题栏会向上推

> ID：15862523
> 
> 赞同：1
> 
> 时间：2013-04-07T12:45:32.803
> 
> 标签：android, layout, android-edittext, titlebar

我有一个仅包含编辑文本视图的相对布局。但是当edittext的内容增加时，我的标题栏会向上移动。我经历的大多数解决方案都解决了键盘弹出时标题栏移动的问题。但是我没有发现任何内容以防其内容增加。我还按照这篇文章中的建议使用了 android:isScrollContainer="false"[如何避免软键盘推高我的布局？](https://stackoverflow.com/questions/5516216/how-to-avoid-soft-keyboard-pushing-up-my-layout)，但仍然是同样的问题。有没有办法防止它？这是我的xml文件

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/scroll_view"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:isScrollContainer="false" 
    android:background="@drawable/background" >

    <EditText
        android:id="@+id/hidden_edit_view"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:imeOptions="flagNoExtractUi"
        android:inputType="textMultiLine"
        android:singleLine="false"
        android:paddingLeft="10sp"
        android:paddingTop="5sp"
        android:paddingRight="5sp"
        android:scrollbars="vertical"
        android:background="@android:color/transparent"
        android:textSize="26sp" >
    </EditText>
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T19:06:55.973

我设法通过将edittext放入滚动视图并在清单中将adjustPan替换为adjustSize来解决这个问题。这是最终的工作布局

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
   android:id="@+id/rl_view"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   android:background="@drawable/background">
<EditText
    android:id="@+id/hidden_edit_view"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@android:color/transparent"
    android:imeOptions="flagNoExtractUi"
    android:inputType="textMultiLine"
    android:paddingLeft="10sp"
    android:paddingRight="5sp"
    android:paddingTop="5sp"
    android:singleLine="false"
    android:textSize="25sp" >
</EditText>
</ScrollView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T05:23:33.563

删除后尝试运行您的代码：

```
android:background="@android:color/transparent" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-02T06:31:17.723

将您的相对布局高度和宽度设置为`wrap_content`.......... 可能有效。因为当文本增加你的完整布局时。试试看，请 rpy

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-02T06:41:41.637

通常这可以通过将`android:windowSoftInputMode="adjustPan"`属性添加到 AndroidManifest 文件中的活动来解决。

# gradle - 是否有一种简单的方法可以立即配置 Gradle 插件（如果存在或稍后添加）？

> ID：15862530
> 
> 赞同：2
> 
> 时间：2013-04-07T12:46:07.333
> 
> 标签：gradle

我有时会使用`apply from: 'some/common/config.gradle'`并且想要一种简单的方法来立即配置相关插件，如果它已经存在，或者观察它被添加并稍后配置它。我可以做我想做的事，但看起来有点乱，因为我最终将配置复制/粘贴到两个位置。下面做我想要的，但我想知道是否有更好的方法。

```
def configured = false;

if(plugins.hasPlugin(ApplicationPlugin)) {
    run.classpath.add(configurations.jfxrt)

    startScripts {
        mainClassName = "com.javafx.main.Main"

        doLast {
            logger.warn(":${project.name}:startScripts:!! WARNING !!" +
                    " Replaced mainClassName with com.javafx.main.Main")
        }
    }

    configured = true
}

else {
    plugins.whenPluginAdded { plugin ->
        if(plugins.hasPlugin(ApplicationPlugin) && !configured) {
            run.classpath.add(configurations.jfxrt)

            startScripts {
                mainClassName = "com.javafx.main.Main"

                doLast {
                    logger.warn(":${project.name}:startScripts:!! WARNING !!" +
                            " Replaced mainClassName with com.javafx.main.Main")
                }
            }

            configured = true
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T13:03:45.903

实现这一点的方法是`plugins.withType(ApplicationPlugin) { ... }`。

# java - 如何在 3rd 中合计来自两个不同活动的两个 int 值？

> ID：15862533
> 
> 赞同：0
> 
> 时间：2013-04-07T12:46:32.237
> 
> 标签：java, android

在创建的活动中，我有一个 setText 值设置为 0 的按钮。它是 0，因为我总共有两个 int 值，valueA 和 valueB，它们在游戏开始时为 0。在另一个活动结束后，我的 valueA 现在设置为 ActivityClassA 中的某个公共静态 int 值，比如说 100。我现在需要在该活动结束时将该 0 值更改为新的 valueA+valueB 值，100 + 0 = 100。我想我应该在 onResume 方法中执行此操作，所以我将它放在那里，并且工作正常。

```
button.setText("" + ActivityClassA.valueA + ActivityClassB.valueB); 
```

但是现在我开始了activity2，并且在该活动结束后，我在ActivityClassB中有公共静态int valueB，可以说是500。现在我需要将valueA + valueB的总和值更新为100 + 500 = 600。但现在，我的总和值为 500。这就是我的问题。

我总是得到最后一个设定值作为总和。如果我先启动 ActivityB，然后启动 A，我总共会得到 100 个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T12:49:34.373

使用`Intent`s 和`onActivityResult`在活动之间共享数据。对这类东西使用静态值并不是最好的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T13:01:06.033

您应该使用`startActivityForResult`来启动您的 ActivityClassA 和 ActivityClassB，然后使用`onActivityResult`来显示结果。您的结构应该如下所示。

在主要活动中：

```
private static int ACT_A = 1;
private static int ACT_B = 2;

private int resultA = 0;
private int resultB = 0;

public void onCreate(Bundle saved) {
    ...
    myTextView.setText("" + (resultA + resultB));
    ...
} 
```

将每个 ActivityClassA 和 ActivityClassB 启动为：

```
Intent i = new Intent(this, ActivityClassA.class);
startActivityForResult(i, ACT_A); 
```

或者

```
Intent i = new Intent(this, ActivityClassB.class);
startActivityForResult(i, ACT_B); 
```

在您的 ActivityClassA 和 ActivityClassB 中，您将拥有如下代码：

```
int curScore;
...
Intent resp = new Intent();
resp.putExtra("score", curScore);
setResult(1, resp);
finish(); 
```

最后，在您的主要活动中，您将拥有方法`onActivityResult`：

```
public void onActivityResult(int reqCode, int respCode, Intent i) {
    if(respCode == 1) {
        switch(reqCode) {
            case ACT_A: resultA = i.getIntExtra("score", resultA);
                        break;
            case ACT_B: resultB = i.getIntExtra("score", resultB);
                        break;
        }
        myTextView.setText("" + (resultA + resultB));
    }
} 
```

# c# - PubSub 如何在 BookSleeve/Redis 中工作？

> ID：15862534
> 
> 赞同：3
> 
> 时间：2013-04-07T12:46:34.910
> 
> 标签：c#, redis, servicestack, booksleeve

我想知道使用 BookSleeve 发布和订阅频道的最佳方式是什么。我目前实现了几个静态方法（见下文），这些方法让我可以将内容发布到特定频道，新创建的频道存储在`private static Dictionary<string, RedisSubscriberConnection> subscribedChannels;`.

这是正确的方法吗，因为我想发布到频道并订阅同一应用程序中的频道（注意：我的包装器是一个静态类）。即使我想发布和订阅，创建一个频道是否足够？显然，我不会发布到与在同一应用程序中订阅的频道相同的频道。但我测试了它并且它有效：

```
 RedisClient.SubscribeToChannel("Test").Wait();
 RedisClient.Publish("Test", "Test Message"); 
```

它奏效了。

这是我的问题：

1）设置一个专用的发布通道和一个专用的订阅通道而不是同时使用一个通道会更有效吗？

2）“channel”和“PatternSubscription”在语义上有什么区别？我的理解是我可以通过`PatternSubscription()`同一个频道订阅多个“主题”，对吗？但是，如果我想为每个“主题”调用不同的回调，我必须为每个主题设置一个频道，对吗？那是有效的还是你会建议不要这样做？

这里是代码片段。

谢谢！！！

```
 public static Task<long> Publish(string channel, byte[] message)
    {
        return connection.Publish(channel, message);
    }

    public static Task SubscribeToChannel(string channelName)
    {
        string subscriptionString = ChannelSubscriptionString(channelName);

        RedisSubscriberConnection channel = connection.GetOpenSubscriberChannel();

        subscribedChannels[subscriptionString] = channel;

        return channel.PatternSubscribe(subscriptionString, OnSubscribedChannelMessage);
    }

    public static Task UnsubscribeFromChannel(string channelName)
    {
        string subscriptionString = ChannelSubscriptionString(channelName);

        if (subscribedChannels.Keys.Contains(subscriptionString))
        {
            RedisSubscriberConnection channel = subscribedChannels[subscriptionString];

            Task  task = channel.PatternUnsubscribe(subscriptionString);

            //remove channel subscription
            channel.Close(true);
            subscribedChannels.Remove(subscriptionString);

            return task;
        }
        else
        {
            return null;
        }
    }

    private static string ChannelSubscriptionString(string channelName)
    {
        return channelName + "*";
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T13:24:36.997

1：您的示例中只有一个频道（`Test`）；频道只是用于特定发布/订阅交换的名称。但是，由于 redis API 工作方式的特殊性，有必要使用 2 个*连接。*具有**任何**订阅的连接不能做任何其他事情，除了：

*   听消息
*   管理自己的订阅 ( `subscribe`, `psubscribe`, `unsubscribe`, `punsubscribe`)

但是，我不明白这一点：

```
private static Dictionary<string, RedisSubscriberConnection> 
```

除非您要满足特定于您的需求，否则您不应该需要多个订阅者连接。单个订阅者连接可以处理任意数量的订阅。快速检查`client list`我的一台服务器，我与（在撰写本文时）23,002 个订阅有一个连接。这可能会减少，但是：它有效。

2：模式订阅支持通配符；因此`/topic/1`，`/topic/2/`您可以订阅`/topic/*`. *所使用的实际*通道的名称`publish`作为回调签名的一部分提供给接收者。

任何一个都可以工作。应该注意的是，性能`publish`受唯一订阅总数的影响 - 但坦率地说，即使您有数以万计的订阅频道使用`subscribe`而不是`psubscribe`.

但从[`publish`](http://redis.io/commands/publish)

> 时间复杂度：O(N+M)，其中 N 是订阅接收通道的客户端数量，M 是订阅模式的总数（任何客户端）。

我建议阅读[pub/sub](http://redis.io/topics/pubsub)的 redis 文档。

* * *

编辑以下问题：

> a）如果我想保证在接收项目时保留从同一发布者发送项目的顺序，我假设我必须同步“发布”（使用 Result 或 Wait()），对吗？

这根本没有任何区别；既然你提到`Result`/ `Wait()`，我假设你在谈论 BookSleeve - 在这种情况下，多路复用器已经保留了命令顺序。Redis 本身是单线程的，并且总是会按顺序处理单个连接上的命令。但是：订阅者上的回调可以异步执行，并且可以（单独）交给工作线程。我目前正在调查是否可以强制它从`RedisSubscriberConnection`.

更新：从 1.3.22 开始，您可以将其设置`CompletionMode`为`PreserveOrder`- 然后所有回调将按顺序完成，而不是同时完成。

> b）根据您的建议进行调整后，无论有效负载的大小如何，我在发布少量项目时都会获得出色的性能。但是，当同一发布者发送 100,000 个或更多项目时，性能会迅速下降（仅从我的机器发送就下降到 7-8 秒）。

首先，那个时间听起来很高——我在本地测试（对于 100,000 个出版物，包括等待所有出版物的响应）1766 毫秒（本地）或 1219 毫秒（远程）（这听起来可能违反直觉，但我的“本地”不是t 运行相同版本的 redis；我的“远程”在 Centos 上是 2.6.12；我的“本地”在 Windows 上是 2.6.8-pre2）。

我不能让你的实际服务器更快或加快网络速度，但是：如果这是数据包碎片，我已经添加（只为你）一个`SuspendFlush()`/`ResumeFlush()`对。这禁用了急切刷新（即当发送队列为空时；其他类型的刷新仍然发生）；您可能会发现这有帮助：

```
conn.SuspendFlush();
try {
    // start lots of operations...
} finally {
    conn.ResumeFlush();
} 
```

请注意，在`Wait`您恢复之前，您不应该这样做，因为在您调用之前`ResumeFlush()`，发送缓冲区中可能仍有一些操作。一切就绪后，我得到（100,000 次操作）：

```
local: 1766ms (eager-flush) vs 1554ms (suspend-flush)
remote: 1219ms (eager-flush) vs 796ms (suspend-flush) 
```

如您所见，它对远程服务器的帮助更大，因为它将通过网络放置更少的数据包。

> 我不能使用事务，因为稍后要发布的项目并非一次全部可用。有没有办法在考虑到这些知识的情况下进行优化？

我*认为*上面已经解决了这个问题 - 但请注意最近`CreateBatch`也添加了。批处理的操作很像事务 - 只是：没有事务。同样，它是另一种减少数据包碎片的机制。在您的特定情况下，我怀疑暂停/恢复（在同花顺时）是您最好的选择。

> 您是否建议使用一个通用 RedisConnection 和一个 RedisSubscriberConnection 或任何其他配置来让此类包装器执行所需的功能？

只要您不执行阻塞操作（`blpop`、`brpop`等`brpoplpush`），或将过大的 BLOB 放入网络中（可能会在清除时延迟其他操作），那么每种类型的单个连接通常都可以很好地工作。但 YMMV 取决于您的确切使用要求。

# php - 用于创建、填充和显示 html 表的 PHP 工具

> ID：15862536
> 
> 赞同：-1
> 
> 时间：2013-04-07T12:46:58.590
> 
> 标签：php, html-table

我有一个关于使用 PHP 创建 HTML 表的问题。我喜欢一些库通过使用 PHP 组件来处理 SQL 创建、读取、更新和删除 (CRUD) 的方式，这些组件可以执行 CRUD 而无需知道任何 SQL，而是使用 PHP API。

我需要一个工具，我可以用它以同样的方式创建 HTML 表格。我只想使用 PHP 语句创建 HTML 或其他 ML 表。

任何人都可以推荐一个用于使用 PHP 创建 HTML 表格的好工具吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T13:13:18.143

确实有这样的工具可以使用 PHP 开发 HTML 表单。

作为 PHP 开发人员，我的第一选择是 PEAR 的`HTML_Table`. 正如文档所说，“[PEAR 的] HTML_Table 使 HTML 表格的设计变得简单、灵活、可重用和高效。”

使用这个组件很简单，包括表类（来自文件）、实例化新实例、添加正文并开始将行附加到表中，所有这些都使用 PHP 调用。

这是一个显示用户姓名、电子邮件和年龄的表格示例。

此示例假定您已经`PEAR`安装（[安装 PEAR](http://pear.php.net/manual/en/installation.php)）以及 PEAR 的[HTML_Table](http://pear.php.net/manual/en/package.html.html-table.php)。

首先要做的是包含 PEAR 的`HTML_Table`

```
<?php require_once 'path/to/pear/HTML/Table.php'; ?> 
```

您可能还需要包含`HTML_Common`&`PEAR`类，因此最好在 PHP 中包含 PEAR 路径`include_path`。

为了解决这个问题以及一般的 PEAR 类加载，请查看[PSR-0](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md)标准，它是类和文件的 PEAR 命名约定。这在使用自动加载器时可能很有用。

有了可用的类，我们可以创建一个像这样的表：

```
// Instantiating the table. The first argument is the HTML Attributes of the table element
$table = new HTML_Table(array('class' => 'my-table'), null, true); 
```

请注意，所有参数都是可选的。让我们首先将标题添加到表中：

```
// Preparing the header array this will go in <table><thead><tr>[HERE..]</tr></thead></table>
$headerRow = array('Name', 'Email', 'Age');
$header = $table->getHeader();
$header->setAttributes(array('class' => 'header-row')); // sets HTML Attributes of the <thead /> element
$header->addRow($headerRow, null ,'th'); 
```

到目前为止，该表的 HTML 如下所示：

```
<table class="my-table">
    <thead class="header-row">
        <tr>
            <th>Name</th>
            <th>Email</th>
            <th>Age</th>
        </tr>
    </thead>
</table> 
```

让我们添加一个主体和一些行：

```
// This is array of arrays that will represent the content added to the table as table rows (probably retrieved from DB)
$resultSet = array(
    array(
        'name'  => 'John Doe',
        'email' => 'john.doe@example.com',
        'age'   => 33,
    ),
    array(
        'name'  => 'Jane Doe',
        'email' => 'j.doe@example.com',
        'age'   => 30,

    ),
);

// $bodyId is the body identifier used when appending rows to this particular body
$bodyId = $table->addBody(array('class' => 'main-body'));
foreach ($resultSet as $entry) {
    $indexResult = array_values($entry); // <-- the array passed to the addRow must be indexed
    $table->addRow($indexResult, array (/* attributes */), 'td', true, $bodyId);
    // note how we specify the body ID to which we append rows -----------^
    // This is useful when working with multiple table bodies (<tbody />).
} 
```

表中的多个`<tbody />`标签的概念也可以利用`addBody()`表类的方法来利用，该方法返回主体标识符以在稍后附加行时用作参考（参见上面的注释）。

有了这个，显示表格就很简单了：

```
<?php
    echo $table->toHtml();
    // or simply
    echo $table;
?> 
```

此示例的 HTML 内容现在如下所示：

```
<table class="my-table">
    <thead class="header-row">
        <tr>
            <th>Name</th>
            <th>Email</th>
            <th>Age</th>
        </tr>
    </thead>
    <tbody class="main-body">
        <tr>
            <td>John Doe</td>
            <td>john.doe@example.com</td>
            <td>33</td>
        </tr>
        <tr>
            <td>Jane Doe</td>
            <td>j.doe@example.com</td>
            <td>30</td>
        </tr>
    </tbody>
</table> 
```

希望这可以帮助 ：）

斯托扬。

# python - Python-Whoosh BufferedWriter 不提交到磁盘

> ID：15862538
> 
> 赞同：2
> 
> 时间：2013-04-07T12:47:18.260
> 
> 标签：python, indexing, full-text-search, whoosh

这是我尝试使用 whoosh 索引大型集合的示例

```
schema = Schema(name=TEXT(stored=True), m=ID(stored=True), content=KEYWORD(stored=True))
ix = create_in("indexdir", schema)
from whoosh.writing import BufferedWriter
from multiprocessing import Pool
jobs = []

writer = BufferedWriter(ix, period=15, limit=512, writerargs = {"limitmb": 512})
for item in cursor:
    if len(jobs) < 1024:
        jobs.append(item)
    else:
        p = Pool(8)
        p.map(create_barrel, jobs)
        p.close()
        p.join()
        jobs = []
        writer.commit() 
```

create_barrel 函数到底做了以下事情：

```
writer.add_document(name = name, m = item['_id'], content = " ".join(some_processed_data)) 
```

但是在运行几个小时后，索引为空，并且 indexdir 中的唯一文件是锁定文件 _MAIN_0.toc

当我没有切换 AsyncWriter 时，上面的代码可以工作，但由于某种原因，AsyncWriter 错过了大约 90% 的提交，并且标准编写器对我来说太慢了。

为什么 BufferedWriter 会错过提交？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T22:41:46.733

对于游标迭代器没有给出 1024 个项目的精确倍数的情况，代码看起来有点问题。

最后，您的工作列表中将有 < 1024 个项目，然后它将离开 for 循环。你在for循环之后处理这个余数吗？

除此之外：您使用的是哪个版本？

您是否尝试过来自 repo 的最新 2.4x 分支和默认分支代码？

# node.js - 如何提供静态文件动态？

> ID：15862540
> 
> 赞同：2
> 
> 时间：2013-04-07T12:47:27.457
> 
> 标签：node.js, static, express

比如我想根据用户访问二级域名，定向到对应目录：

app.use(express.static(path.join(__dirname, '/public')));

至：

app.use(express.static(path.join(__dirname, '/'+ **domain** +'/public')));

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T23:31:18.683

假设您在文件夹中有一个名为“foo.png”的文件`[domain]/public`。使用`app.use(express.static(path.join(__dirname, '/'+domain+'/public')));`将使该文件可供`http://localhost/foo.png`所有人使用。根据我对您问题的理解，这并不是您真正想要的。

你应该寻找`res.sendfile`并做类似的事情

```
app.get('/:username/:file', function(req, res){
    res.sendfile(path.join(__dirname, req.params.username, req.params.file));
}); 
```

这样，您还可以使用中间件添加一些安全性，以确保用户无法访问其他用户的文件。

如果您真的不介意安全问题，您可以简单地将所有用户的文件夹添加到公用文件夹中（您可以为该文件夹选择您想要的任何名称）并且只使用`app.use(express.static(path.join(__dirname, '/public')));`.

这样您就可以使用类似的方式访问文件`http://localhost/[username]/foo.png`

# php - php页面和星级插件仅在刷新后才完整呈现

> ID：15862541
> 
> 赞同：0
> 
> 时间：2013-04-07T12:47:42.757
> 
> 标签：php, javascript, jquery

我在 jQuery mobile 上使用[fyneworks jquery 星级评分](http://www.fyneworks.com/jquery/star-rating/)，并且在一个使用 PHP 函数动态创建的页面中，一切正常。但是在 PHP 页面中包含“评级选项卡”的另一个页面中，在我刷新页面之前不会呈现星星。

**页**

```
 <?php
session_start();
if (!session_is_registered('autorizzato')) {
  echo "<h1>Area riservata, accesso negato.</h1>";
  echo "Per effettuare il login clicca <a href='login.php'><font color='blue'>qui</font></a>";
  die;
}
?>
<!DOCTYPE html>
<html>
<head>
    <title>Title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <script src="jquery-1.8.2.min.js"></script>
    <script src="jquery.mobile-1.2.0.min.js"></script>
    <link rel="stylesheet" href="jquery.mobile-1.2.0.min.css" />

    <script src='rating/jquery.MetaData.js' type="text/javascript" language="javascript"></script>
    <script src='rating/jquery.rating.js' type="text/javascript" language="javascript"></script>
    <link href='rating/jquery.rating.css' type="text/css" rel="stylesheet"/>

    <script src="logged.js"></script>
</head>
<body background="#000000">

<div data-role="page"  id="lista">
    <div data-role="header" data-position="fixed">
    <input type="submit" onClick="back()" data-icon="back" class="ui-btn-left" value="Indietro" />
        <h1>TITLE</h1>
    <a href="logout.php" data-icon="gear" class="ui-btn-right">Logout</a>
    </div>
    <div data-role="content" data-theme="a">
    <form id="save" action="saveComment.php" method="post" data-ajax="false">
    <div data-role="fieldcontain">
        <label for="textarea">Comment:</label>
        <textarea cols="40" rows="8" name="textarea" id="textarea"></textarea>
    </div>
        <label>Rating:</label>
        <div data-role="content" >
                <input data-role="none" name="stars" type="radio" class="star" value="1"/>
                <input data-role="none" name="stars" type="radio" class="star" value="2"/>
                <input data-role="none" name="stars" type="radio" class="star" value="3"/>
                <input data-role="none" name="stars" type="radio" class="star" value="4"/>
                <input data-role="none" name="stars" type="radio" class="star" value="5"/>
        </div> 

        <input type="hidden" name="id" value="<?php echo $_GET["id"]; ?>" />
         <input type="hidden" name="rating" id="rating" value="1" />
        <fieldset id="actions">
            <input type="submit" id="submit" value="Invia">
        </fieldset>
    </form>

    </div>

</div>
</body>
</html> 
```

**记录的.js**

```
$(document).load(function () {  
     $('#rt').click(function () {
            var div = $(this);
            div.children('input').each(function () {
                if ($(this).is(':checked')){
                    $('#rating').attr("value", $(this).val());
                } 
            });
        });

    }); 
```

我注意到由 PHP 动态创建的页面正在访问我的数据库，显示大约需要 2-3 秒，并且所有内容都已呈现。只有在我按 F5 并刷新页面后才会呈现第二个页面。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T12:54:30.867

你试过 .ready 吗？

```
$(document).ready(function() {
// Handler for .ready() called.
}); 
```

# ios - NSLocale preferredLanguages 只有 2 个字符作为返回值

> ID：15862542
> 
> 赞同：1
> 
> 时间：2013-04-07T12:47:58.333
> 
> 标签：ios, objective-c, localization, nslocale

下面的代码给出了一个包含所有语言的数组，但我还是宁愿过滤掉像“en-GB”、“zh-Hant”这样的变体，并且有一个每种语言只有 2 个字符的数组。

优雅的 Apple(ish) 方法是什么？

```
 NSLog(@"[NSLocale preferredLanguages] = %@",[NSLocale preferredLanguages]);
 [self.selectedArray  addObjectsFromArray:[NSLocale preferredLanguages]]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T12:59:25.073

使用谓词过滤数组可能是“Appleish”，因为它得到：

```
NSPredicate *lenIs2=[NSPredicate predicateWithFormat:@"length==2"];
NSArray *filtered = [[NSLocale preferredLanguages] filteredArrayUsingPredicate:lenIs2];
NSLog(@"%@", filtered); 
```

# php - 多个插入sql查询php

> ID：15862545
> 
> 赞同：0
> 
> 时间：2013-04-07T12:48:34.683
> 
> 标签：php, sql-server-2005

我有一个包含 ID、departmentID、val 列的表

```
create table departmentVal (ID INT IDENTITY(1,1), departmentID INT NOT NULL, val BIGINT)

create table departmentID (ID,departmentName) 
```

如何将 val、$count = 10k 和 $val = 1234900000001 多次插入到 departmentVal 中到 1234900010000

```
$i = 0;
$count = 10000;
 $va = 1234900000001;
$dptID = 1;

while  ($i < $count){
insert into departmentVal($dptID , $val);
$val++;
} 
```

我正在寻找更好的解决方案来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T12:54:31.140

创建过程 dorepeat(p1 INT) BEGIN SET @x = 0; REPEAT INSERT INTO your_table SELECT NULL, field1, field2; 设置@x = @x + 1；直到 @x > p1 结束重复；结尾

# c++ - 不同的函数指针语法作为另一个函数的参数

> ID：15862549
> 
> 赞同：3
> 
> 时间：2013-04-07T12:48:53.303
> 
> 标签：c++, c, syntax, function-pointers

```
int func ()
{
  printf("foo()\n"); 
  return 0;
}

void foo1 (int (*pf)()) { pf(); }
void foo2 (int (pf)()) { pf(); }
void foo3 (int pf()) { pf(); }

int main ()
{
  foo1(func);
  foo2(func);
  foo3(func);
} 
```

`foo1()`传递给和`foo2()`的参数有什么区别`foo3()`。
所有 3 种语法都[可以在 g++ 中正常编译，](http://ideone.com/Iu1X6m)并且行为方式相同。从技术上讲，这三个都称为函数指针吗？
用 C 标记，因为它也适用于此。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-07T12:54:38.063

它们之间没有区别。第一个参数是指向函数类型的指针，而另外两个只是编写相同函数类型的两种方式。但是，与将数组类型参数调整为指针的方式相同，函数类型参数也调整为指向函数的指针。从 C++11 §8.3.5/5 开始：

> 在确定每个参数的类型后，将任何类型为[...]“函数返回`T`”的参数调整为[...]“指向函数返回`T`的指针”，</p>

或来自 C99 §6.7.5.3/8：

> 将参数声明为“函数返回*类型*”应调整为“指向函数返回*类型*的指针”</p>

因此，第二个和第三个函数声明的参数类型调整为与第一个相同。

请注意，您可以在标识符周围放置任意数量的括号，并且它仍然是相同的函数类型：

```
void foo2 (int (((((pf)))))()) { pf(); } 
```

# jquery - 当我从 ajax 发布时，JsonResult 没有在对象中拾取 ICollection

> ID：15862554
> 
> 赞同：1
> 
> 时间：2013-04-07T12:49:23.543
> 
> 标签：jquery, asp.net-mvc, json, knockout.js, jsonresult

我正在使用 MVC 4，并且一直在努力将 Json 从由 Knockout.Js 构建的客户端返回到我的控制器操作。Json 可以正常发布并在 Fiddler 中检查它似乎一切正常，但是当 JsonResults Action 绑定它时，生成的对象没有 Json 中存在的 ICollection。

我的客户 ajax 帖子如下所示：

```
$.ajax({
            url: location.href,
            type: 'POST',
            data: ko.toJSON(this.Orders),
            dataType: "json",
            contentType: "application/json charset=utf-8",
            success: function (data) {
                alert(data.Message);
            }
        }); 
```

这会产生以下 Json：

```
[{"Number":1,"Properties":{"Id":2,"Title":"#333"},"UnitCost":"20"}] 
```

我在服务器端的 viewModel 结构是这样的：

订购型号

```
 public class VmOrder 

{

    public int Number
    {
        get;
        set;
    }

    public ICollection<VmProperty> Properties
    {
        get;
        set;
    }

    public decimal UnitCost
    {
        get;
        set;
    }

 } 
```

物业模型

```
 public class VmProperty
    {

    public int Id
    {
        get;
        set;
    }

    public string Title
    {
        get;
        set;
    }
 } 
```

最后我的控制器看起来像这样：

```
 [HttpPost]
    public JsonResult Order(ICollection<VmOrder> Orders)
    {

        // further server-side validation, save to database, etc
        return Json("Saved", "");
    } 
```

虽然我得到了 Number 和 UnitCost，但 Properties 集合为空，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T13:15:25.027

尝试更换：

```
contentType: "application/json charset=utf-8" 
```

和：

```
contentType: "application/json; charset=utf-8" 
```

您缺少 a ，因此导致请求标头`;`无效且不存在。`Content-Type`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T07:55:43.597

正如 Nemsev 所说， "Properties":{"Id":2,"Title":"#333"} 只包含一个对象而不是一个数组。数组版本如下所示："Properties":[{"Id":2,"Title":"#333"}]。所以在 C# 方面你需要 public VmProperty Properties { get; 放; } 而不是集合。

# html - 将背景图像相对于其他背景图像对齐

> ID：15862555
> 
> 赞同：0
> 
> 时间：2013-04-07T12:49:24.367
> 
> 标签：html, css, twitter-bootstrap

我的模板基于 Twitter Bootstrap，因此具有响应性。

我有两个 div，第一个包含 iPhone 框架的背景图像，第二个包含锁定屏幕的图像。我正在尝试将 screenbackground div 对齐到 iphonebackground div 的顶部，以使其看起来都是一张图像。这样，当帧图像是静态的时，我可以更改 iPhone 上显示的内容。

我的问题是我找不到将 screenbackground div 与 iphonebackground div 对齐的方法，这样即使 iphonebackground div 的大小发生变化（当屏幕调整大小时），screenbackground 也会正确缩放并保持对齐。

```
<div class="iphonebackground">
  <div class="screenbackground"></div>
</div>

.iphonebackground {
    background-image:url("../img/iphone-frame.png");
    background-repeat: no-repeat;
    background-position: center;
    background-size: 100%;
    height:576px;
}

.screenbackground {
    background-image:url("../img/iphone-background.jpg");
    background-repeat: no-repeat;
    background-position: center;
    height:50%;
    width:66%;
    padding-right: 23%;
} 
```

**编辑：我已将代码更改为如下，它更接近但仍然不太正确：**

```
.iphonebackground {
    background-image:url("../img/iphone-frame.png");
    background-repeat: no-repeat;
    background-position: center;
    background-size: 100%;
    height:511px;
}

.screenbackground {
    background-image:url("../img/iphone-background.jpg");
    background-repeat: no-repeat;
    background-position: center;
    background-size:60% 50%;
    height:511px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T13:17:20.107

为什么不创建与第一个尺寸完全相同但具有透明边距的第二个图像？有两个相同的图像，它们会相应地调整大小。

```
<div class="iphonebackground">
  <div class="screenbackground"></div>
</div>

.iphonebackground, .screenbackground {
    background-image:url("http://chpwn.com/apps/iphone-frame.png");
    background-repeat: no-repeat;
    background-position: center;
    background-size: 100% 100%;
    height:300px;
}

.screenbackground {
    background-image:url("https://dl.dropbox.com/u/290586/iphone-bg.png");
} 
```

[http://jsfiddle.net/notme/zYV8x/](http://jsfiddle.net/notme/zYV8x/)

# java - 使用特定应用程序 java 打开 mp3 文件

> ID：15862560
> 
> 赞同：1
> 
> 时间：2013-04-07T12:49:53.180
> 
> 标签：java, file, media-player, desktop

我想知道是否有办法使用 Windows Media Player 和 VLC Media Player 打开 mp3 文件。我将文件的路径保存为字符串，并且想知道是否可以使用它在上述任何一个应用程序上打开文件。我知道这样做的一种方法是使用 Desktop 类，但这会使用默认应用程序打开文件，在我的例子中是 Windows Media Player。如何在 VLC 媒体播放器中打开文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T12:52:45.187

尝试

```
Runtime.getRuntime().exec("<your vlc path> <your file>"); 
```

IE

```
Runtime.getRuntime().exec("\"C:\\Program Files (x86)\\VideoLAN\VLC\\vlc.exe\" abc.mp3"); 
```

试过了，它有效

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T13:29:07.850

从[`Desktop.open`apidoc](http://docs.oracle.com/javase/6/docs/api/java/awt/Desktop.html#open%28java.io.File%29)和 [Desktop 教程](http://docs.oracle.com/javase/tutorial/uiswing/misc/desktop.html)来看，open 方法似乎*只能*在其默认关联程序中打开文件。

所以，你有（也许）两个选择：

*   [访问注册表](https://stackoverflow.com/questions/62289/read-write-to-windows-registry-using-java)并更改默认关联（不是一个很好的关联）
*   可能会尝试提供一个[URI](http://en.wikipedia.org/wiki/URI_scheme)并通过浏览器打开它，这*可能会*导致在所需程序中打开文件。但是，看起来该`file`方案是唯一可接受的解决方案，并且很可能会在*默认*程序中打开。有一个`mms`方案，但它用于视频流，同样，它很可能会在默认程序中打开。

这是针对 windows、linux 和 osx 变体的解决方案的[链接。](https://stackoverflow.com/a/526080/679982)`Runtime.exec`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T12:53:32.433

您应该知道`VLC`and/or的路径`WMP`。然后你可以[`Runtime`](http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html)为此使用类。

```
Process p = Runtime.getRuntime().exec("c:/vlc/vlc.exe " + mp3FileName); 
```

# php - 使用 PDO 向 MySQL 插入 1000 行的有效方法

> ID：15862561
> 
> 赞同：0
> 
> 时间：2013-04-07T12:49:55.607
> 
> 标签：php, mysql, pdo

我必须每次将 1000 行数据插入 MySQL。目前，我使用 PDO 和 for-loop 将逐行插入数据库。有没有更有效的方法来获得更好的性能？因为我必须将 max_execution_time 设置为 5 分钟。

```
function save()
{
            return $query = $this->insert("
                INSERT INTO gadata (landing_page, page_title, page_views, visits, visitors, bounce_rate, pageviews_per_visit, time_on_page, avg_time_on_page, day, month, year, hour)
                VALUES (:landing_page, :page_title, :page_views, :visits, :visitors, :bounce_rate, :pageviews_per_visit, :time_on_page, :avg_time_on_page, :day, :month, :year, :hour)", $this->data);
} 
```

和

```
protected function insert($sql, array $data) {
    $q = $this->_db_handler->prepare($sql);

    foreach ($data as $k => $v)
    {
       $q->bindValue(':' . $k, $v);
    }

    $q->execute();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T13:28:48.600

它不是 PDO，也不是您插入的方式使插入如此延迟，而是**innodb**引擎。所以你有3个选择：

1.  将所有插入包装到事务中。
2.  使用 root 权限，将`innodb_flush_log_at_trx_commit`变量设置为 2，使 innodb 使用文件缓存进行写入 - 这将使您的插入速度非常快。
3.  按照 Manu 的建议在一个查询中运行所有插入

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T12:59:29.267

Might not be the best solution, But you can try constructing a query string like `INSERT INTO [table] VALUES (r1c1,r1c2,r1c3),(r2c1,r2c2,r2c3) ...` and execute one `mysql_query` (or say one query for few hundred rows), you might even verify data programatically while constructing the sql query if it is not from a trusted source.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T13:06:40.983

参数化查询根据定义交易执行安全性，以降低数据项计数的灵活性。

您至少有 2 种可能性来缓解：

*   构建 SQL，然后立即执行它：

就像是：

```
$sql="INSERT INTO gadata (landing_page, page_title, page_views, visits, visitors, bounce_rate, pageviews_per_visit, time_on_page, avg_time_on_page, day, month, year, hour) VALUES ";
foreach ($all_data_rows as $data) {
  if ($i==0) $value=""; else $value=",";
  $sql.=$value."(:landing_page$i, :page_title$i, :page_views$i, :visits$i, :visitors$i, :bounce_rate$i, :pageviews_per_visit$i, :time_on_page$i, :avg_time_on_page$i, :day$i, :month$i, :year$i, :hour$i)";
  $i++;
}
$i=0;
$q=$db_handler->prepare($sql);
foreach ($all_data_rows as $data) {
  foreach ($data as $k => $v) {
    $q->bindValue(":$k$i", $v);
  }
  $i++;
}
$q->execute(); 
```

*   使用临时表来避免锁定和磁盘开销

首先创建一个`HEAP`与目标表具有相同结构的临时表，然后插入其中：这会快得多，因为不会发生锁定和磁盘 IO。然后运行

```
INSERT INTO final_table SELECT * FROM temporary_table 
```

如果缓解还不够，您将需要考虑为此用例使用非参数化查询。通常的警告适用。

# r - data.table：使用 lapply 创建新列

> ID：15862564
> 
> 赞同：4
> 
> 时间：2013-04-07T12:50:24.080
> 
> 标签：r, data.table, lapply

我有一个 data.table 并想在一行的每个子集上应用一个函数。通常一个人会这样做：`DT[, lapply(.SD, function), by = y]`

但在我的情况下，该函数不返回原子向量，而只是返回一个向量。有机会做这样的事情吗？

```
library(data.table)
set.seed(9)
DT <- data.table(x1=letters[sample(x=2L,size=6,replace=TRUE)],
                 x2=letters[sample(x=2L,size=6,replace=TRUE)],
                 y=rep(1:2,3), key="y")
DT
#   x1 x2 y
#1:  a  a 1
#2:  a  b 1
#3:  a  a 1
#4:  a  a 2
#5:  a  b 2
#6:  a  a 2

DT[, lapply(.SD, table), by = y]
# Desired Result, something like this:
# x1_a x2_a x2_b
#    3    2    1
#    3    2    1 
```

在此先感谢，另外：我不介意函数的结果是否必须具有固定长度。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T18:13:02.930

您只需要取消列出该表，然后强制返回一个列表：

```
> DTCounts <- DT[, as.list(unlist(lapply(.SD, table))), by=y]
> DTCounts

   y x1.a x2.a x2.b
1: 1    3    2    1
2: 2    3    2    1 
```

.

* * *

如果你不喜欢名字中的点，你可以`sub`把它们去掉：

```
> setnames(DTCounts, sub("\\.", "_", names(DTCounts)))
> DTCounts

   y x1_a x2_a x2_b
1: 1    3    2    1
2: 2    3    2    1 
```

* * *

请注意，如果不是每个组都存在列中的所有值
（即，如果`x2=c("a", "b")`何时`y=1`，但`x2=c("b", "b")`何时`y=2`）
，则上述中断。

解决方案是在计数之前使列因素。

```
DT[, lapply(.SD, is.factor)]

## OR
columnsToConvert <- c("x1", "x2")  # or .. <- setdiff(names(DT), "y") 
DT <- cbind(DT[, lapply(.SD, factor), .SDcols=columnsToConvert], y=DT[, y]) 
```

# asp.net - 在哪里存储以及如何删除照片库中的图像？

> ID：15862565
> 
> 赞同：0
> 
> 时间：2013-04-07T12:50:25.957
> 
> 标签：asp.net, sql, image, photo

我正在使用 ASP.NET 制作照片库。我将用户的图像存储在 SQL 数据库中。我不知道应该如何显示图像。

假设每个用户有 1 张图片，我正在做这样的事情：

*   从数据库中获取图像
*   将其保存在服务器的磁盘上为“file.jpg”
*   ASP:Image.uri = "文件.jpg"

这一直很好，直到我发现如果很少有用户同时加载该页面，它可能无法正常工作。

然后我虽然将“file.jpg”更改为一些随机字符串会对我有所帮助：

*   从数据库中获取图像
*   以“ABCDUDHDJSAKFHADGJKHAKADFAD.jpg”的形式保存在服务器的光盘上
*   ASP:Image.uri = "ABCDUDHDJSAKFHADGJKHAKADFAD.jpg"
*   File.Delete("~/ABCDUDHDJSAKFHADGJKHAKADFAD.jpg");

但无法删除此文件，因为它仍在被服务器使用。

解决我的问题的正确方法是什么？我的照片库中的用户最终会同时看到 12 张照片。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T12:59:31.610

What I usually do is serve images from DB using a generic handler (`ashx` file).

What you need to do is create an `ashx` file and use something along these lines:

```
context.Response.BinaryWrite(myImage); 
```

The you create image tags like so:

```
<img alt="whatever" src="/images.ashx?iid=1243 /> 
```

Where `iid` is the unique ID of the image in the DB.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T12:57:29.820

您实际上不应该存储该文件。你应该流它。例如，创建一个处理程序，它从具有特定 ID 的用户返回图像并使用该 ID 调用它，例如`image.ashx?id=1`. 处理程序可能看起来像

```
Image image; // image from your database
using(MemoryStream ms = new MemoryStream())
{
    image.Save(ms, System.Drawing.Imaging.ImageFormat.Png);
    ms.WriteTo(context.Response.OutputStream);
}
Response.ContentType = "image/png"; 
```

您可以像使用静态图像文件一样使用此处理程序。因此，您甚至可以将其用于`background-image`：

```
<div style="background-image: url(image.ashx?id=1)">Username</div> 
```

# node.js - 在 kue 中将作业添加到队列中

> ID：15862568
> 
> 赞同：3
> 
> 时间：2013-04-07T12:50:41.467
> 
> 标签：node.js, kue

从 kue 文档中，创建队列和添加作业很容易，但我无法了解作业的存储方式

```
var kue = require('kue')
  jobs = kue.createQueue(); 
```

添加工作

```
jobs.create('email', {
    title: 'welcome email for tj'
  , to: 'tj@learnboost.com'
  , template: 'welcome-email'
}).priority('high').save(); 
```

这个例子很容易理解，但是，如果我需要更多的选项，例如在例子中，比如添加一个广告选项 - ，`ad: 'we are the best'`

```
jobs.create('email', {
    title: 'welcome email for tj'
  , to: 'tj@learnboost.com'
  , ad: 'we are the best'
  , template: 'welcome-email'
}).priority('high').save(); 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-03T21:44:33.227

jobs.create 的第二个参数是一个可以在作业处理器中访问的对象。你可以把你想要的任何字段放在那里。然后，一旦您设置了处理器，您就可以使用“广告”字段。

添加到您的示例中：

```
jobs.process('email', function (job, done) {
    var advertOption = job.data.ad;

    // Do your emailing stuff, like rendering template and sending...

}); 
```

如果您提供三个参数，您可以指定所需的工人数量：

```
jobs.process('email', 1, function (job, done) { // samesame 
```

相关的[来源](https://github.com/LearnBoost/kue/blob/master/lib/kue.js#L181)很容易阅读并且评论很好

# android - 由于警报对话框导致的窗口泄漏

> ID：15862569
> 
> 赞同：1
> 
> 时间：2013-04-07T12:50:50.493
> 
> 标签：android, window, memory-leaks

在 Android 开发中相当新，我不断收到窗口泄漏异常，可能是由于使用了我制作的警报框。在寻找我必须改变的东西时，我尝试了很多东西，但我找不到我的错误。也许有人可以帮我查看我的代码？

```
public class LogInActivity extends Activity {
    EditText gebruikersnaamET, paswoordET;
    TextView titel;
    TextView gebruikersnaamTV;
    TextView paswoordTV;
    TextView geenAccount;
    Button ok;
    String url = "";
    final Context context = this;
    String username = "";
    SharedPreferences settings;
    AlertBox alert;
    Gebruiker g = null;
    private ProgressDialog pDialog;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // http://stackoverflow.com/questions/4544302/android-prevent-user-from-coming-back-to-login-page-after-logging-in
        settings = context.getSharedPreferences("CoNeePrefs", 0);
        boolean isLogged = settings.getBoolean("isLogged", false);

        setTitle("Log in");
        setContentView(R.layout.activity_log_in);

        gebruikersnaamET = (EditText) findViewById(R.id.et_un);
        gebruikersnaamET.requestFocus();
        gebruikersnaamET.setTypeface(MyFonts.Fonts.PRESSTART);

        paswoordET = (EditText) findViewById(R.id.et_pw);
        paswoordET.setTypeface(MyFonts.Fonts.PRESSTART);

        ok = (Button) findViewById(R.id.btn_login);
        ok.setTypeface(MyFonts.Fonts.PRESSTART);

        titel = (TextView) findViewById(R.id.titel);
        // titel.setTypeface(MyFonts.Fonts.PRESSTART);
        Typeface face;
        face = Typeface.createFromAsset(getAssets(), "fonts/pressstart.ttf");
        titel.setTypeface(face);

        gebruikersnaamTV = (TextView) findViewById(R.id.tv_un);
        gebruikersnaamTV.setTypeface(MyFonts.Fonts.PRESSTART);

        paswoordTV = (TextView) findViewById(R.id.tv_pw);
        paswoordTV.setTypeface(MyFonts.Fonts.PRESSTART);

        geenAccount = (TextView) findViewById(R.id.nogGeenAccount);
        geenAccount.setTypeface(MyFonts.Fonts.PRESSTART);

        g = new Gebruiker();

        if (isLogged) {
            Intent intent = new Intent(context, MenuActivity.class);
            intent.putExtra("gebruikersnaam",
                    settings.getString("gebruikersnaam", "none"));
            startActivity(intent);
            finish();
        } else {
            ok.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub

                    new checkUserDetails().execute();
                }
            });

        }

        geenAccount.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                Intent intent = new Intent(context, RegisterActivity.class);
                startActivity(intent);
                finish();
            }
        });

    }

    // http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/
    class checkUserDetails extends AsyncTask<String, String, String> {

        /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(LogInActivity.this);
            pDialog.setMessage("In aan het loggen...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(true);
            pDialog.show();
        }

        /**
         * Getting product details in background thread
         * */
        protected String doInBackground(String... params) {

            url = "http://iwtsl.ehb.be/~iris.vdz/check.php";
            ArrayList<NameValuePair> postParameters = new ArrayList<NameValuePair>();
            postParameters.add(new BasicNameValuePair("gebruikersnaam",
                    gebruikersnaamET.getText().toString()));
            postParameters.add(new BasicNameValuePair("paswoord", paswoordET
                    .getText().toString()));
            // String valid = "1";
            String res = null;
            String username = gebruikersnaamET.getText().toString();

            try {
                res = DatabaseAccess.getInstance().phpUitvoeren(postParameters,
                        url);

                if (res.equals("1")) {
                    g = DatabaseAccess.getInstance().getUser(username);
                    String adres = g.getStraat() + " - " + g.getPostcode()
                            + " " + g.getGemeente();
                    String volledigeNaam = g.getVoornaam() + " " + g.getNaam();
                    settings = context.getSharedPreferences("CoNeePrefs", 0);
                    SharedPreferences.Editor editor = settings.edit();
                    editor.putBoolean("isLogged", true);
                    editor.putString("gebruikersnaam", g.getGebruikersnaam());
                    editor.putString("naam", volledigeNaam);
                    editor.putString("e-mail", g.getEmail());
                    editor.putString("adres", adres);
                    editor.putString("paswoord",
                            g.getEncodedPaswoord(g.getPaswoord()));
                    editor.commit();

                    Intent intent = new Intent(context, MenuActivity.class);
                    startActivity(intent);
                    finish();
                } else {
                    alert = new AlertBox(context, "Error",
                            "Er is iets misgegaan, probeer opnieuw!\nMogelijke redenen:\n"
                                    + "- u heeft geen internetverbinding\n"
                                    + "- u heeft geen juiste login ingegeven\n"
                                    + "- er is een probleem met het netwerk\n"
                                    + "- er is een probleem met de database");
                }

            } catch (Exception e) {
                alert = new AlertBox(context, "Error", e.toString());

            }

            return null;
        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String file_url) {
            // dismiss the dialog once got all details
            pDialog.dismiss();
        }
    } 
```

这是警报框的代码：

```
public class AlertBox {

    public AlertBox(Context context, String title, String mymessage){
         new AlertDialog.Builder(context)
          .setMessage(mymessage)
          .setTitle(title)
          .setCancelable(true)
          .setNeutralButton(android.R.string.cancel,
             new DialogInterface.OnClickListener() {
             public void onClick(DialogInterface dialog, int whichButton){

             }})
          .show();
    }
} 
```

这是我得到的堆栈跟踪：

```
04-07 14:31:28.230：E/AndroidRuntime(10287)：致命异常：AsyncTask #1
04-07 14:31:28.230: E/AndroidRuntime(10287): java.lang.RuntimeException: 执行 doInBackground() 时出错
04-07 14:31:28.230: E/AndroidRuntime(10287): 在 android.os.AsyncTask$3.done(AsyncTask.java:200)
04-07 14:31:28.230: E/AndroidRuntime(10287): 在 java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
04-07 14:31:28.230: E/AndroidRuntime(10287): 在 java.util.concurrent.FutureTask.setException(FutureTask.java:125)
04-07 14:31:28.230: E/AndroidRuntime(10287): 在 java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
04-07 14:31:28.230: E/AndroidRuntime(10287): 在 java.util.concurrent.FutureTask.run(FutureTask.java:138)
04-07 14:31:28.230: E/AndroidRuntime(10287): 在 java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
04-07 14:31:28.230: E/AndroidRuntime(10287): 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
04-07 14:31:28.230: E/AndroidRuntime(10287): 在 java.lang.Thread.run(Thread.java:1019)
04-07 14:31:28.230：E/AndroidRuntime(10287)：原因：java.lang.RuntimeException：无法在未调用 Looper.prepare() 的线程内创建处理程序
04-07 14:31:28.230: E/AndroidRuntime(10287): 在 android.os.Handler.(Handler.java:121)
04-07 14:31:28.230: E/AndroidRuntime(10287): 在 android.app.Dialog.(Dialog.java:101)
04-07 14:31:28.230: E/AndroidRuntime(10287): 在 android.app.AlertDialog.(AlertDialog.java:63)
04-07 14:31:28.230: E/AndroidRuntime(10287): 在 android.app.AlertDialog$Builder.create(AlertDialog.java:797)
04-07 14:31:28.230: E/AndroidRuntime(10287): 在 android.app.AlertDialog$Builder.show(AlertDialog.java:812)
04-07 14:31:28.230: E/AndroidRuntime(10287): 在 be.iwt.ehb.conee.extrafeatures.AlertBox.(AlertBox.java:20)
04-07 14:31:28.230: E/AndroidRuntime(10287): 在 be.iwt.ehb.conee.activities.LogInActivity$checkUserDetails.doInBackground(LogInActivity.java:178)
04-07 14:31:28.230: E/AndroidRuntime(10287): 在 be.iwt.ehb.conee.activities.LogInActivity$checkUserDetails.doInBackground(LogInActivity.java:1)
04-07 14:31:28.230: E/AndroidRuntime(10287): 在 android.os.AsyncTask$2.call(AsyncTask.java:185)
04-07 14:31:28.230: E/AndroidRuntime(10287): 在 java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
04-07 14:31:28.230: E/AndroidRuntime(10287): ... 4 更多
04-07 14:31:28.661: W/IInputConnectionWrapper(10287): showStatusIcon on inactive InputConnection
04-07 14:31:28.681: D/dalvikvm(10287): GC_CONCURRENT 释放 200K，49% 释放 2915K/5639K，外部 303K/558K，暂停 18ms+62ms
04-07 14:31:29.381: E/WindowManager(10287): Activity be.iwt.ehb.conee.activities.LogInActivity 泄露了最初添加的窗口 com.android.internal.policy.impl.PhoneWindow$DecorView@40538cb0这里
04-07 14:31:29.381: E/WindowManager(10287): android.view.WindowLeaked: Activity be.iwt.ehb.conee.activities.LogInActivity 已泄露窗口 com.android.internal.policy.impl.PhoneWindow$DecorView @40538cb0 最初添加在这里
04-07 14:31:29.381: E/WindowManager(10287): 在 android.view.ViewRoot.(ViewRoot.java:259)
04-07 14:31:29.381: E/WindowManager(10287): 在 android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
04-07 14:31:29.381: E/WindowManager(10287): 在 android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
04-07 14:31:29.381: E/WindowManager(10287): 在 android.view.Window$LocalWindowManager.addView(Window.java:465)
04-07 14:31:29.381: E/WindowManager(10287): 在 android.app.Dialog.show(Dialog.java:241)
04-07 14:31:29.381: E/WindowManager(10287): 在 be.iwt.ehb.conee.activities.LogInActivity$checkUserDetails.onPreExecute(LogInActivity.java:127)
04-07 14:31:29.381: E/WindowManager(10287): 在 android.os.AsyncTask.execute(AsyncTask.java:391)
04-07 14:31:29.381: E/WindowManager(10287): 在 be.iwt.ehb.conee.activities.LogInActivity$1.onClick(LogInActivity.java:96)
04-07 14:31:29.381: E/WindowManager(10287): 在 android.view.View.performClick(View.java:2506)
04-07 14:31:29.381: E/WindowManager(10287): 在 android.view.View$PerformClick.run(View.java:9112)
04-07 14:31:29.381: E/WindowManager(10287): 在 android.os.Handler.handleCallback(Handler.java:587)
04-07 14:31:29.381: E/WindowManager(10287): 在 android.os.Handler.dispatchMessage(Handler.java:92)
04-07 14:31:29.381: E/WindowManager(10287): 在 android.os.Looper.loop(Looper.java:130)
04-07 14:31:29.381: E/WindowManager(10287): 在 android.app.ActivityThread.main(ActivityThread.java:3835)
04-07 14:31:29.381: E/WindowManager(10287): 在 java.lang.reflect.Method.invokeNative(Native Method)
04-07 14:31:29.381: E/WindowManager(10287): 在 java.lang.reflect.Method.invoke(Method.java:507)
04-07 14:31:29.381: E/WindowManager(10287): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:864)
04-07 14:31:29.381: E/WindowManager(10287): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:622)
04-07 14:31:29.381: E/WindowManager(10287): at dalvik.system.NativeStart.main(Native Method)提前非常感谢！

            回答 #1

赞同：0

时间：2013-04-07T12:56:32.157

窗口泄漏不是您崩溃的根本原因；这里的主要问题是您试图从后台线程创建一个对话框：

原因：java.lang.RuntimeException：无法在未调用 Looper.prepare() 的线程内创建处理程序

在 AlertBox 中，您正在创建一个新对话框，该对话框又包含它们自己的处理程序：

```
new AlertDialog.Builder(context)
          [...]
          .show(); 
```

但是，您正在从 AsyncTask 中创建 AlertBox `doInBackground()`：

```
new AlertBox(context, "Error", e.toString()); 
```

将该逻辑移到主线程中，例如通过处理`onPostExecute()`.

其次，您会收到“窗口泄漏”消息，因为 AsyncTask 在活动消失时仍在运行，并且它包含对附加到该窗口的对象的引用，特别是`pDialog`.

```

# jpa-2.0 - @PreUpdate 不返回正确的异常消息

> ID：15862574
> 
> 赞同：1
> 
> 时间：2013-04-07T12:51:33.307
> 
> 标签：jpa-2.0, eclipselink, glassfish-3

为了验证我的实体 bean，我在我的 bean 中创建了这个验证方法

```
@PrePersist
@PreUpdate
public void validate(){
    if (startTime.after(stopTime)) throw new ValidationException("Wrong order");
} 
```

ValidationException 如下所示：

```
@ApplicationException(rollback = true)
public class ValidationException extends RuntimeException {

public ValidationException(String message) {
    super(message);
}
} 
```

如果我尝试用

```
try {
        timeframefacade.create(timeframe);

    } catch (Exception e) {
        System.out.println(e.getMessage()); 
```

e.getMessage() 返回“错误的顺序”，这是正确的

```
try {
        timeframefacade.edit(timeframe);

    } catch (Exception e) {
        System.out.println(e.getMessage()); 
```

它返回“事务中止”，这是一个 EJBException。如何获得与上述相同的结果并避免所有日志记录，这也会发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T13:15:56.677

在您的编辑方法中调用 flush 以强制进行预更新。否则，它会在事务完成时发生，而容器必须抛出一个事务异常。

# android - 带有 DialogFragment 的上下文操作栏

> ID：15862579
> 
> 赞同：5
> 
> 时间：2013-04-07T12:51:58.910
> 
> 标签：android, android-fragments, android-actionbar, contextual-action-bar

我一直在尝试实现一个上下文操作栏和一个对话框片段。类似于 android 中的下载小部件。

![在此处输入图像描述](https://i.stack.imgur.com/Emsar.png)

我试图`android:windowActionModeOverlay`在主题中设置为真实。

但它似乎不起作用。有什么办法可以实现吗？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T13:47:43.780

您在屏幕截图中的下载窗口实际上是一个`Activity`使用`@android:style/Theme.Holo.Dialog`主题，使其看起来像一个对话框。要获得与下载窗口相同的外观，您`Activity`只需使用相同的主题。

您可以像这样在清单中设置此主题：

```
<activity android:name=".MainActivity"
    android:label="@string/app_name"
    android:theme="@android:style/Theme.Holo.Dialog" >
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />

        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity> 
```

* * *

**不包括字符串和可绘制资源的示例实现。**

显现：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.mceley.dialog.example"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="14"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity android:name=".MainActivity"
            android:label="@string/app_name"
            android:theme="@android:style/Theme.Holo.Dialog" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

MainActivity.java：

```
package com.mceley.dialog.example;

import android.app.Activity;
import android.os.Bundle;
import android.view.ActionMode;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.View.OnClickListener;

public class MainActivity extends Activity implements OnClickListener {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main_layout);

        findViewById(R.id.context_button).setOnClickListener(this);
    }

    @Override
    public void onClick(View v) {
        ExampleMode mode = new ExampleMode();
        startActionMode(mode);
    }

    public class ExampleMode implements ActionMode.Callback {

        @Override
        public boolean onActionItemClicked(ActionMode mode, MenuItem item) {
            return false;
        }

        @Override
        public boolean onCreateActionMode(ActionMode mode, Menu menu) {
            mode.getMenuInflater().inflate(R.menu.main_menu, menu);
            return true;
        }

        @Override
        public void onDestroyActionMode(ActionMode mode) {

        }

        @Override
        public boolean onPrepareActionMode(ActionMode mode, Menu menu) {
            return false;
        }
    }
} 
```

main_layout.xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="center" >

    <Button android:id="@+id/context_button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/show_context_bar" />

</LinearLayout> 
```

main_menu.xml：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:id="@+id/action_settings"
        android:showAsAction="never"
        android:title="@string/action_settings"/>
</menu> 
```

结果：

![对话框示例应用程序](https://i.stack.imgur.com/kv48n.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T13:45:01.967

**我认为您不能在 DialogFragment 中添加 ActionBar。**

但是我们可以尝试使用 Activity 作为对话框。

[我已经用ActionBarSherlock](http://actionbarsherlock.com/)尝试过这个，我已经添加`R.style.Sherlock___Theme_Dialog`为我的 Activity 的主题，但它看起来像这样：

![在此处输入图像描述](https://i.stack.imgur.com/VfKNP.png) ![在此处输入图像描述](https://i.stack.imgur.com/4vhzl.png) ![在此处输入图像描述](https://i.stack.imgur.com/xV4IH.png)

**`ActionBar`做完上述我了解的事情后，我们无法添加`Dialog`或`DialogFragment`。**

# c++ - 如何使 C++ 函数将整数列表隐式转换为向量参数？

> ID：15862588
> 
> 赞同：0
> 
> 时间：2013-04-07T12:53:20.760
> 
> 标签：c++, initialization, implicit-conversion, vmat

我正在开发一个库，其函数通常采用向量类型（`__v4si`或 4 个带符号整数的向量）作为参数。**（请注意，到目前为止，这与C++ STL** 模板类无关`vector`；这是一个更原始的构造，用于让编译器生成*矢量化*SIMD 代码。）

在我的**C**代码中，我通常调用一个包装宏，它接受一个 int 参数列表并`__v4si`像这样初始化：

```
#define MakeIndex(dims...) ((__v4si){ dims }) 
```

这当然在**C++**中也可以正常工作，但我想利用**C++**更具表现力的类型系统来清理对我的库 API 的调用。例如，我现在写如下内容：

```
long idx = IndexDotProduct(MakeIndex(1, 2, 3), MakeIndex(4, 5, 6, 7)); 
```

其中宏扩展为：

```
long idx = IndexDotProduct(((__v4si){1, 2, 3}), ((__v4si){4, 5, 6, 7})); 
```

相反，我希望能够写一些类似的东西：

```
long idx = IndexDotProduct({1, 2, 3}, {4, 5, 6, 7}); 
```

所以，本质上（我认为）我想定义一个类，它只是原始`__v4si`类型周围的语法糖，但它有一个用于列表初始值设定项的隐式强制转换运算符。

我如何在**C++ 11**中做到这一点？

# 解决方案

这是一个适用于**C**和**C++**代码的公式（现在使用从我的库头文件复制和粘贴的更详细的名称）：

```
typedef struct vMAT_Index {
    __v4si v;
#ifdef __cplusplus
    vMAT_Index(__v4si v) : v(v) { }
    vMAT_Index(int v0 = 0, int v1 = 0, int v2 = 0, int v3 = 0) : v((__v4si){ v0, v1, v2, v3 }) { }
#endif
} vMAT_Index;

#define vMAT_MakeIndex(dims...) ((vMAT_Index){ .v = { dims } })

static inline long
vMAT_Index_dot(vMAT_Index a,
               vMAT_Index b)
{
    __v4si c = a.v * b.v;
    return (long)c[0] + c[1] + c[2] + c[3];
} 
```

在**C**代码中，您仍然可以像这样使用辅助宏：

```
long idx = vMAT_Index_dot(vMAT_MakeIndex(1, 2, 3), vMAT_MakeIndex(4, 5, 6, 7)); 
```

但是现在在**C++**中你可以写：

```
long idx = vMAT_Index_dot({ 1, 2, 3 }, { 4, 5, 6, 7 }); 
```

感谢 nosid 提供了重要的答案！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T13:09:16.810

使用隐式构造函数从大括号初始化器列表中自动创建向量对象：

```
struct vector
{
    vector(__v4si v);
    vector(int i0, int i1, int i2, int i3);
};

long IndexDotProduct(vector lhs, vector rhs);

long idx = IndexDotProduct(((__v4si){ 1, 2, 3 }), { 4, 5, 6, 7 }); 
```

# javascript - 设置 div 的焦点底部并允许向后滚动

> ID：15862595
> 
> 赞同：0
> 
> 时间：2013-04-07T12:53:58.647
> 
> 标签：javascript, jquery

我目前正在使用此代码，但它不允许向后滚动，我试图找到一种方法来保持在 DIV 的底部，无论发生多少次刷新，但也允许用户向后滚动通过 div 即使发生刷新，我也找不到任何解决方法，我能做的最好的就是这个片段，除了允许用户回滚 DIV 之外，它可以做所有事情，有人有什么建议吗？

```
<script>
$(document).ready(function() {
  setInterval(
    function() {
        $("#DLMessageList").show("slow").load("query.php?qid=11");
        $("#mainPane").scrollTop(10000);
    }, 
  2000);
});
</script>

<div id="mainPane">
    <dl id="DLMessageList">
        <dd><span>&lt;core&gt;&nbsp;</span>asdasdasdasd</dd>
        <dt>[13:46:38]&nbsp;</dt>
        <dd><span>&lt;core&gt;&nbsp;</span>dfgsdfg</dd>
        <dt>[13:46:41]&nbsp;</dt>
        <dd><span>&lt;core&gt;&nbsp;</span>fgdfg</dd>
        <dt>[13:46:48]&nbsp;</dt>
        <dd><span>&lt;core&gt;&nbsp;</span>test</dd>
    </div>
</div> 
```

中可能有数百行，`DLMessageList`但高度`mainPane`仅为 300 像素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:01:47.573

您需要检查是否希望在刷新后滚动位置保持在底部。就在您调用 ajax 之前，检查 div 是否一直向下滚动。如果是，那么我们希望在刷新后也向下滚动 div。如果不是，那么用户已经在 div 内滚动并且您没有更改滚动位置。

**注意**：未经测试，您可能需要`div`从 scrollHeight 值中减去您的高度，不确定它返回什么。

```
$(document).ready(function() {
  var sticky = true;
  setInterval(
    function() {
        sticky = $("#mainPane")[0].scrollTop == $("#mainPane")[0].scrollHeight;
        $("#DLMessageList").show("slow").load("query.php?qid=11", function(){
            if (sticky){
                $("#mainPane")[0].scrollTop = $("#mainPane")[0].scrollHeight;
            }
        });
    }, 
  2000);
}); 
```

# git - 如何将所有当前未跟踪的文件/文件夹添加到 git ignore？

> ID：15862598
> 
> 赞同：31
> 
> 时间：2013-04-07T12:54:04.630
> 
> 标签：git, gitignore

我初始化了`git`存储库并进行了第一次提交。现在，我在这个目录中运行`./configure`，`./make all`以便它填充许多不想跟踪的额外文件/文件夹。

我想做的是将所有这些未跟踪的文件一劳永逸地添加到我的 gitignore 中。有什么简单的方法吗？

我可以摆脱一些不必要的文件，例如`*.o`或`*.mod`通过在 .gitignore 中指定适当的行，但这并不能解决问题。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-04-07T12:58:27.720

试试这个：

```
git status -s | grep -e "^\?\?" | cut -c 4- >> .gitignore 
```

说明：`git status -s`给你一个简短的状态版本，没有标题。`grep`只接受以 开头的行，`??`即未跟踪的文件，`cut`删除`??`，其余的将其添加到`.gitignore`文件中。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-01-10T17:50:19.140

一个更简单的命令是

```
git ls-files --others --exclude-standard >> .gitignore 
```

您可能想要编辑结果以用通配符替换重复的模式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-21T11:38:24.970

如果您的工作树除了未跟踪的文件/文件夹之外是干净的，则可以使用更短的解决方案`awk`：

```
git status -s | awk '{print $2}' >> .gitignore 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-13T10:46:51.737

在接受的答案中， grep 部分导致了我的问题（即没有过滤，而是显示了所有行，包括以`M`(modified) 开头的行），并替换`"^\?\?"`为`"^??"`我解决了它。我在 win 10 上并在 msys2 的 bash 中使用它。

# fonts - 在 WinRT 中计算字体基线

> ID：15862600
> 
> 赞同：4
> 
> 时间：2013-04-07T12:54:21.687
> 
> 标签：fonts, windows-runtime, baseline

我想找出WinRT[中字体的基线。](https://en.wikipedia.org/wiki/Baseline_(typography))

我还通过[创建一个虚拟 TextBlock](https://stackoverflow.com/questions/10556019/how-to-calculate-the-textbock-height-and-width-in-on-load-if-i-create-textblock)计算了特定字体的文本大小，但我不确定如何计算基线。这在 WinRT 中是否可行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T16:12:44.613

不幸的是，您正在寻找的是`FormattedText`[MSDN: [1](http://msdn.microsoft.com/en-us/library/system.windows.media.formattedtext.formattedtext.aspx) [2](http://msdn.microsoft.com/en-us/library/ms752098.aspx) ]，它存在于 WPF 中并且不存在于 WinRT 中（我什至认为它甚至还没有出现在 Silverlight 中）。

它可能会包含在未来的版本中，因为它似乎是一个非常受欢迎的功能，非常想念并且团队意识到它的遗漏。请参阅此处：[http](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/380b4b7b-72e2-4435-b7f7-0d2afca4eac0/#db8a49dc-b252-4ffb-a128-02ed14ded2af) ://social.msdn.microsoft.com 。

如果您有兴趣或真的非常需要一种方法来测量字体的细节，您可以尝试为**DirectWrite**编写一个包装器，据我所知，它位于 WinRT 可用的技术堆栈中，但它只能通过 C++ 访问

如果您想尝试，这里有几个出发点：

*   [这些家伙似乎实际上在 WinRT 应用程序中使用 DirectWrite](https://bitbucket.org/nyamatongwe/metrosci/src/5c2b93bda000/Skeen/winrt/PlatWin.cxx)

*   [这是使 DX 可用的 C++ 包装器，DirectWrite 将大致相同](http://directxwinrt.codeplex.com/)

希望这会有所帮助，祝你好运-ck

***更新***

我想了一会儿，并记得`TextBlock`s 有一个经常被遗忘的属性`BaselineOffset`，它为您提供了从框顶部为所选字体的基线下降！因此，您可以使用每个人都用来替换的相同技巧`MeasureString`来替换丢失的`FormattedText`. 酱汁在这里：

```
 private double GetBaselineOffset(double size, FontFamily family = null, FontWeight? weight = null, FontStyle? style = null, FontStretch? stretch = null)
    {
        var temp = new TextBlock();
        temp.FontSize = size;
        temp.FontFamily = family ?? temp.FontFamily;
        temp.FontStretch = stretch ?? temp.FontStretch;
        temp.FontStyle = style ?? temp.FontStyle;
        temp.FontWeight = weight ?? temp.FontWeight;

        var _size = new Size(10000, 10000);
        var location = new Point(0, 0);

        temp.Measure(_size);
        temp.Arrange(new Rect(location, _size));

        return temp.BaselineOffset;
    } 
```

我用它来做到这一点： ![截屏](https://i.stack.imgur.com/uyKuV.png)

完美的！对？希望这会有所帮助-ck

# extjs - Ext JS 4.2 - 垂直按钮工具提示问题

> ID：15862604
> 
> 赞同：1
> 
> 时间：2013-04-07T12:54:31.233
> 
> 标签：extjs, extjs4

我正面临使用 Ext JS 4.2 的**垂直**按钮工具提示问题，如下所示：

![截屏](https://i.stack.imgur.com/9MRX4.png)

这是我的按钮配置：

```
var btnSubmit = Ext.create('Ext.button.Button', {
    text: 'Giriş',
    iconCls: 'icon-login',
    tooltip: '<b>Sisteme giriş yapmak için</b> tıklayınız...[<b><i>Enter</i></b>]'    
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T01:28:35.123

对工具提示类使用覆盖 css。

```
.x-tip {width: auto !important;}
.x-tip-body {width: auto !important;}
.x-tip-body span {width: auto !important;} 
```

# iphone - CCSprite 在 iPhone 4 上不显示

> ID：15862606
> 
> 赞同：1
> 
> 时间：2013-04-07T12:54:37.610
> 
> 标签：iphone, cocos2d-iphone, sprite

我有一个使用 cocos2D 进行小游戏的应用程序。当我按下一个按钮时，我会启动一个带有游戏的 cocos2D 场景。

我尝试在我的 cocos2D 场景中仅加载背景中的图像（bg.png）。我正在使用精灵。

它适用于 iPhone 5 和 iPhone 4S (iOS 6)，但不适用于 iPhone 4。在 iPhone 4 上我有黑屏。我不明白为什么。

sprites-hd.png 是 3762 × 1252, 1,4 Mo。对于 iPhone 4 来说太大了吗？

在我的 GameViewController_iPhone.m 中：

```
-(IBAction) playGame {

    CCDirector *director = [CCDirector sharedDirector];

    CCGLView *glView = [CCGLView viewWithFrame:[[ISAMAppDelegate_iPhone sharedISAMAppDelegate].window bounds]
                                   pixelFormat:kEAGLColorFormatRGB565   // kEAGLColorFormatRGBA8
                                   depthFormat:0                        // GL_DEPTH_COMPONENT16_OES
                        ];

    // attach the openglView to the director
    [director setView:glView];

    if( ! [director enableRetinaDisplay:YES] )
        MyLog(@"Retina Display Not supported");

    [[CCDirector sharedDirector] setAnimationInterval:1.0/60];
    [CCTexture2D setDefaultAlphaPixelFormat:kCCTexture2DPixelFormat_RGBA8888];    
    [self.view addSubview:glView];
    [[CCDirector sharedDirector] runWithScene:[Game sceneWithGameViewController:self]];
} 
```

在我的 Game.m 中：

```
+ (CCScene *)sceneWithGameViewController:(GameViewController_iPhone*) gvc
{
    CCScene *game = [CCScene node];

    Game *layer = [[Game alloc] initWithGameViewController:gvc];
    [game addChild:layer];

    return game;
}

- (id) initWithGameViewController:(GameViewController_iPhone*) gvc {

    if(![super init]) return nil;

    if((self = [super init])) {

        [[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:@"sprites.plist"];

        CCSpriteBatchNode* batchNode = [CCSpriteBatchNode batchNodeWithFile:@"sprites.png" capacity:50];

        [self addChild:batchNode];

        CCSprite *someSprite = [CCSprite spriteWithSpriteFrameName:@"bg.png"];
        [batchNode addChild:someSprite];
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T13:02:40.373

您不能在 iPhone 4 中加载大于 2048x2048 的纹理，因此您可能会拆分当前的精灵图集。

# performance - 如何为熊猫多级数据框做一个定制的“平均”？

> ID：15862608
> 
> 赞同：0
> 
> 时间：2013-04-07T12:54:46.617
> 
> 标签：performance, pandas

我有一个 pandas 多级数据框`df`，其中包含从 2006 年到 2012 年大约 2000 多只股票的季度财务报告数据。我正在尝试找出一种方法来快速计算每个数据点的**“平均值” 。**

`demo_data()`是生成demo数据的函数（`df = demo_data(stk_qty=2000, col_num=200)`可以用来模拟财报数据）：

```
def demo_data(stk_qty, col_num):
    ''' generate demo data, return multilevel dataframe ''' 
    import random
    import pandas as pd
    rpt_date_template = [(yr+qt) for yr in map(str, range(2006, 2013)) for qt in ['0331','0630','0930','1231']]
    stk_id_list = ['STK'+str(x).zfill(3) for x in range(0, stk_qty)]

    stk_id_column, rpt_date_column = [], []
    for i in range(stk_qty):
        stk_rpt_date_list = rpt_date_template[random.randint(0,8):] # rpt dates with random start
        stk_id_column.extend([stk_id_list[i]] * len(stk_rpt_date_list))
        rpt_date_column.extend(stk_rpt_date_list)

    index_name = ['STK_ID', 'RPT_Date']
    col_name = ['COL'+str(x).zfill(3) for x in range(col_num)]

    first_level_dt  = stk_id_column
    second_level_dt = rpt_date_column

    dt = pd.DataFrame(np.random.randn(len(stk_id_column), col_num), columns=col_name)
    dt[index_name[0]] = first_level_dt
    dt[index_name[1]] = second_level_dt

    multilevel_df = dt.set_index(index_name, drop=True, inplace=False)
    return multilevel_df 
```

这是一个示例数据。（注：sw() 是显示大数据框四个角数据的方法，源码在：[如何预览大熊猫数据框的一部分？](https://stackoverflow.com/questions/15006298/how-to-preview-a-part-of-a-large-pandas-dataframe/15786557#15786557)）

```
>>> df = demo_data(5,3)
>>> df.sw()
                 COL000  COL001  COL002
STK_ID RPT_Date                        
STK000 20060630  1.8196  0.9519 -1.0526
       20060930 -0.4074 -0.9025  1.3562
       20061231 -1.1750  0.4190 -1.2976
       20070331 -0.5609  1.5190  0.4893
       20070630  0.4580 -0.3804  0.3705
       20070930 -0.4711 -1.1953 -0.0609
       20071231  0.3363  1.1949  1.2802
       20080331  1.6359  0.8355 -0.2763
       20080630  0.2697 -0.8236 -1.7095
       20080930  0.6178 -0.3742 -1.1646
.......................................
STK004 20111231 -0.3198  1.6972 -1.3281
       20120331 -1.1905 -0.4597  0.3695
       20120630 -0.8253 -0.0502 -0.2862
       20120930  0.0059 -1.8535 -1.2107
       20121231  0.5762 -0.2872  0.0993

Index : ['STK_ID', 'RPT_Date']
Column: COL000,COL001,COL002
row: 117    col: 3 
```

我想要的自定义平均函数命名为`my_avg()`并定义如下规则：

```
1\. Q1's average value is (Q4_of_previous_yr + Q1)/2
2\. Q2's average value is (Q4_of_previous_yr + Q1 + Q2)/3
3\. Q3's average value is (Q4_of_previous_yr + Q1 + Q2 + Q3)/4
4\. Q4's average value is (Q4_of_previous_yr + Q1 + Q2 + Q3 + Q4)/5
5\. if some of the data points are not provided, just calculate the normal average of available data points 
```

所以`my_avg(df)`每个 STK_ID 都会有以下输出：

```
STK_ID  RPT_Date       COL000            COL001         COL002
STK000       20060630   1.819619705 0.951918984 -1.052639309
             20060930   0.706112476 0.024688028 0.151757352
             20061231   0.079077767 0.156125083 -0.331359614
             20070331   -0.867930112    0.969000466 -0.404129827
             20070630   -0.425943376    0.519205768 -0.145929753
             20070930   -0.437234418    0.090579744 -0.124681449
             20071231   -0.282524858    0.3114374   0.156297097
             20080331   0.986121631 1.015202552 0.501971496
 .......................................
STK004        20111231   xxxxx       xxxxxxx    xxxxxxx 
```

**如何编写代码`my_avg()`？**

* * *

参考：我尝试写一个`temp_solution_avg()`函数。但它存在三个问题：

```
1\. the average calculation not include 'Q4_of_previous_yr' data point, so the result is not what I want.
2\. data's 'RPT_Date' must start with Q1 ('xxxx0331'), otherwise first yr's data is wrong
3\. the calculation speed is very very slow. 
     In [3]: df = demo_data(500,100)
     In [4]: timeit temp_solution_avg(df)
     1 loops, best of 3: 66.3 s per loop

def temp_solution_avg(df):
    ''' return the average , Q1: not change, Q2 : (df.Q1 + df.Q2)/2 ,
        Q3: (df.Q1 + df.Q2 + df.Q3)/3, Q4 : (df.Q1 + df.Q2 + df.Q3 + df.Q4)/4
        data's 'RPT_Date' must start with Q1 ('xxxx0331'), otherwise first yr's
        data is wrong .
    '''
    dt = df.reset_index()
    dt['yr'] = dt['RPT_Date'].str[0:4]
    dt['temp_stk_id'] = dt['STK_ID']
    dt = dt.set_index(['STK_ID','RPT_Date'], drop=True, inplace=False)
    rst = dt.groupby(['temp_stk_id','yr']).transform(pd.expanding_mean)
    return rst 
```

# ruby-on-rails - rails console yaml parse error - 应用解决方案

> ID：15862612
> 
> 赞同：2
> 
> 时间：2013-04-07T12:55:22.050
> 
> 标签：ruby-on-rails

**背景**在 Windows 7 PC 上通过 RailsTutorial 编写代码的完全新手——我在第 4.2 章中停滞不前，在 Ruby on Rails 的命令提示符下运行“rails 控制台”时出现 YAML 错误。

我需要有关如何解释和使用我在 stackoverflow/google groups/github 上找到的一些特定答案（如下）的提示。

我试图满足论坛的问题标准。如果我的任何困惑在这里太基本了，请让我知道我可以尝试哪些以及在哪里。

错误 -

~\Sites\sample_app rails 控制台

```
C:/a_installers/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/psych.rb:154:in 'parse
    : (<unknown>): couldn't parse YAML at line 44 column 11 (Psych::SyntaxError)
            from C:/a_installers/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/psych.rb:
    54:in 'parse_stream' 
```

（这样还有 40 行）

不确定我可以提供什么有用的上下文。可能是我在 Windows 7 上使用了 Railsinstaller 和后来的 Pik（而不是 RVM），我在 **c:\a_installers\railsInstaller**下安装了 ralis/ruby 程序，并且我已经更新了 PATH 以包含ruby bin 文件夹。

**问题**我难以解释/使用的建议是..

1.  [rails 错误，无法解析 YAML](https://stackoverflow.com/questions/4980877/rails-error-couldnt-parse-yaml)提示

    一个。通过 yamlint.com 运行 YAML 代码

    哪个 YAML 文件？错误列表中的所有内容？我想我正在从我安装的 rails 程序区域（上图）运行 rails 控制台，在那里我发现了 60 个带有“*.yml”的奇怪文件——我是否必须通过 YAMLlint.com 运行所有这些文件？

    湾。手动修复 YAML 代码

    给出的一个示例是“修复无效 yaml”，涉及将本地日期的 yaml 代码拆分为行。这不适用——我在系统上 railsinstaller 下的 60 个“*.yml”文件中找不到任何此类代码

    C。“在 config/boot.rb 中使用代码 xxx 加载旧的 YAML 解析器（syck）”</p>

    两个问题……</p>

    (1) 我在 rails/ruby 程序区找不到**boot.rb**

    (2) 我在两种相反的观点之间左右为难

    “Psych 是新的，你应该使用的那个你在某处有一些无效的 yaml。” 和

    “错误...... ruby​​ 应该使用一个既维护又支持现有用法的解析器，即使该用法与规范相差甚远。要是有这样的事就好了。在没有之前，他们应该使用 syck..”</p>

    总之，不确定要修改哪些文件，如何修改，如何检查。如果它是可取的，而不是做一个解决方法（恢复到 syck），如果是这样，在哪个目录和哪些文件中。

2.  另一个来源 rails-yaml-config-best-practice 建议

    “在 environment.rb 中配置参数。” 使用名为“设置逻辑”的 github 代码

    不知道该怎么做……我需要学习 YAML 吗？教程甚至还没有开始 Ruby – 这是不是不确定在哪里做这个 – 在我的 rails/ruby 程序区域找不到 environment.rb – 它似乎是我的应用程序的一部分 (sample_app)

    在 ..Settings_logic 中……这些注释似乎让我回到了上面的 1.。

    “..注意：某些 Ruby/Bundler 版本包括不正确处理合并的 Psych YAML 解析器版本（`<<`在上面的示例中）。如果您的默认设置似乎覆盖了您的特定于环境的设置，包括您的以下行config/boot.rb 文件可以解决问题：

    需要'yaml' YAML::ENGINE.yamler='syck'

要应用此解决方案，我仍然需要解决问题 1 c (2)

3 一般建议 - 我无法启动 Rails 控制台似乎是我使用 ROR 的绝对障碍 - 几个一般性问题 - 从业者是使用 rails 控制台进行实际开发还是只是学习？我可以在没有 Rails 控制台的情况下学习 RoR 吗？

非常感谢您的耐心、时间和关注。

# ruby-on-rails - 如何将非www请求重定向到www？

> ID：15862613
> 
> 赞同：0
> 
> 时间：2013-04-07T12:55:40.897
> 
> 标签：ruby-on-rails, ruby-on-rails-3, apache, .htaccess

我有一个 Rails 应用程序，我已将此代码放在应用程序公用文件夹中的 .htaccess 文件中：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^(example\.com)? [NC]
RewriteRule ^(.*) http://www.example.com/$1 [R=301,L] 
```

但是非 www 仍然没有重定向到 www 并且 Chrome 说：无限循环。我究竟做错了什么？我正在将 Apache 与乘客一起使用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T13:44:14.227

我会改用[rack-canonical-host](https://github.com/tylerhunt/rack-canonical-host) gem。

添加`gem 'rack-canonical-host'`到您的`Gemfile`，运行`bundle`并将其添加到您的`config.ru`，就在以 开头的行之前`run`：

```
use Rack::CanonicalHost, 'example.com' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T14:10:36.630

您可以尝试这些重写条件和规则：

```
RewriteCond %{HTTP_HOST} ^example\.com$
RewriteRule ^(.*)$ http://www.example.com/$1 [L] 
```

实际上，您的条件表达式是这样的：

```
RewriteCond %{HTTP_HOST} ^example\.com [NC,OR]
RewriteCond %{HTTP_HOST} ^ [NC] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-07T14:11:08.867

你应该删除括号和`?`from `RewriteCond`, 像这样阅读

```
RewriteCond %{HTTP_HOST} ^example\.com [NC] 
```

# javascript - 如何比较包含循环对象的 JavaScript 对象

> ID：15862614
> 
> 赞同：2
> 
> 时间：2013-04-07T12:55:48.257
> 
> 标签：javascript

请告诉我比较包含循环对象的 JavaScript 对象。

如下，返回真，因为a1等于a2。

```
a1   = {}
a1.b = 1
a1.c = 2
a1.d = a

a2 = {}
a2.b = 1
a2.c = 2
a2.d = a2 
```

如下，返回false，因为a1不等于a2。

```
a1   = {}
a1.b = 1
a1.c = 2
a1.d = a

a2 = {}
a2.b = 1
a2.c = 2
a2.d = a2
a2.e = a2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T13:01:58.880

Try this [jsfiddle](http://jsfiddle.net/wYCbn/1/)

```
 var a1   = {}
a1.b = 1
a1.c = 2
a1.d = a1

var a2 = {}
a2.b = 1
a2.c = 2
a2.d = a2

function isSame(a,b){
    var same = true;
    if(a === b){
       return true;
    }
    for(var i in a){

        if(typeof a[i] == "object" ){
           if( a[i] == a){
                continue;
            }
           same = isSame(a[i], b[i]);
           if(same == false){
              return same;
           }
        }
       if(a[i] !== b[i])
       return false;
    }
   return true
}

console.log(isSame(a1, a2) ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T13:22:52.223

写了一个`Comparer`函数，满足你的需求。但是，它有一个限制，即第一个参数应该比第二个参数具有更多的属性。我可以将它们切换到内部，`function`但我认为为此创建临时对象并不好。
此外，它会`false`在以下情况下返回：

```
a1.d = a2
a2.d = a1 
```

告诉我你是否也需要处理那个案子。

[**小提琴示例**](http://jsfiddle.net/wYCbn/6/)

**编辑：**我刚刚有了一个想法，在比较循环对象时，你总是会得到一个堆栈大小异常，所以你可以`try catch`处理这个异常，但它可能会有一个糟糕的性能。
[**尝试捕获示例**](http://jsfiddle.net/wYCbn/7/)

# c# - 创建和访问 WCF 服务。Visual Studio 2012 出现错误

> ID：15862617
> 
> 赞同：0
> 
> 时间：2013-04-07T12:56:01.327
> 
> 标签：c#, wcf, visual-studio-2012, msdn

我在这里学习 WCF [http://msdn.microsoft.com/ru-ru/library/bb386386.aspx](http://msdn.microsoft.com/ru-ru/library/bb386386.aspx)并且我成功地完成了*测试服务*步骤。但是在*访问服务*步骤中我遇到了问题。它构建时没有任何错误，但是当我尝试将 smth 写入 textLabel 空间并按下 button1 时，我在 button1_Click 函数中得到错误，即 `ServiceReference1.Service1Client client = new ServiceReference1.Service1Client();`

*错误信息*

> 在服务模型客户端配置部分中找不到引用合同 >'ServiceReference1.IService1' 的默认端点元素。这可能是因为没有为您的应用程序找到配置文件>>，或者因为在客户端元素中找不到与此合同匹配的端点元素。

我在 app.project 文件中找到了这样的代码

```
<endpoint address="http://localhost:8733/Design_Time_Addresses/WcfServiceLibrary1/Service1/"
            binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IService11"
            contract="ServiceReference1.IService1" name="BasicHttpBinding_IService11" /> 
```

我 100% 确定，该代码没有任何错误，因为我从上面的站点复制了它，没有进行任何修改。所以我很高兴听到你的假设如何解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T16:52:02.833

您应该`name`在构建客户端时指定端点的：

```
using (var client = new ServiceReference1.Service1Client("BasicHttpBinding_IService11"))
{
    client.SomeMethod();
} 
```

或者`*`在配置文件中只有一个端点时使用：

```
using (var client = new ServiceReference1.Service1Client("*"))
{
    client.SomeMethod();
} 
```

您需要指定名称的原因是因为您可以在配置文件中为同一服务有多个端点（例如具有不同的绑定），如果您不指定名称，框架将不知道您要调用哪个端点.

另请注意，我如何将`IDisposable`客户包装在一份`using`声明中，以确保在您完成使用后妥善处理。

# iphone - mapView：viewForAnnotation：在代码中设置委托时未调用

> ID：15862618
> 
> 赞同：3
> 
> 时间：2013-04-07T12:56:05.243
> 
> 标签：iphone, ios, objective-c, mapkit, mkannotation

我的 MKAnnotations 有一个自定义类，我想覆盖默认`mapView:viewForAnnotatation`方法，以便可以在标注中添加额外信息。当我在代码中设置我的委托时（根据下面的代码），注释会放在地图上并且是可选择的，但我`mapView:viewForAnnoation`的从来没有被调用过。

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation{
    NSLog(@"viewForAnnotation: called");
    MKAnnotationView *aView = [mapView dequeueReusableAnnotationViewWithIdentifier:@"mapPin"];
    if(!aView){
        aView = [[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"mapPin"];
    }
    aView.annotation = annotation;

    return aView;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    // Do any additional setup after loading the view.
    self.mapView.delegate = self;

} 
```

我知道正在设置委托，因为我可以覆盖该方法`-(void)mapView:(MKMapView *)mapView didSelectAnnotationView:(MKAnnotationView *)view`，并且在选择注释时会看到 NSLog。

当我从在代码中设置委托更改为在情节提要中设置它时，该方法被调用（NSLog(@"viewForAnnotation: called"); 语句出现）但注释不会出现在地图上，有时会出现此错误：

```
<Error>: ImageIO: CGImageReadSessionGetCachedImageBlockData *** CGImageReadSessionGetCachedImageBlockData: bad readSession [0x8618480] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T14:15:37.747

这似乎是两个不同的问题：

1.  关于代码 v 故事板中的设置委托，很难调和您的各种观察结果（委托方法`didSelectAnnotationView`在两种情况下都被调用，但`viewForAnnotation`不是）。在情节提要的代码 v 中设置它的唯一区别是设置的时间`delegate`。您没有向我们展示添加注释的过程，因此很难根据您的描述进行诊断。如果您的委托方法都没有被调用，我会怀疑`mapView` `IBOutlet`.

2.  关于 的设置`MKAnnotationView`，默认实现什么都不做。您要么需要编写自己的子类`MKAnnotationView`，如果您使用自己的图像，则设置其图像，或者更简单，只需使用`MKPinAnnotationView`. 但是仅仅创建一个`MKAnnotationView`不会做任何事情。你真的想要：

    ```
    - (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation{
        // If it's the user location, just return nil.
        if ([annotation isKindOfClass:[MKUserLocation class]])
            return nil;

        // Handle any custom annotations.
        MKAnnotationView *aView = [mapView dequeueReusableAnnotationViewWithIdentifier:@"mapPin"];
        if(aView){
            aView.annotation = annotation;
        } else {
            aView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"mapPin"];
        }

        aView.canShowCallout = NO;

        return aView;
    } 
    ```

    （注意，我不仅要创建 a `MKPinAnnotationView`，而且还要确保它不是 a `MKUserLocation`，以防您选择在地图上显示用户位置。我还将显式设置`canShowCallout`，因为这可能是你写这个方法的原因。）

底线，如果要显示简单的引脚注释视图，请使用`MKPinAnnotationView`. 单独使用`MKAnnotationView`将导致没有注释出现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-19T21:36:32.357

`mapView:viewForAnnotatation`如果其他人正在寻找在代码中设置委托时未调用的原因，则 iOS 6 中存在错误 - [http://openradar.appspot.com/12346693](http://openradar.appspot.com/12346693)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-09T13:14:42.590

我遇到了同样的问题，我想分享我的解决方案：

我也覆盖

`(MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation`

但我意识到这些注释的工作方式类似于 TableView 和 iOS 将重用注释，如 TVC（表格视图控制器）中的单元格

由于我只使用一个标识符`mapView dequeueReusableAnnotationViewWithIdentifier:@"mapPin"`，如果它在内存中有足够的“注释”，则不需要再次调用 ViewForAnnotation。

所以我的解决方案是根据我的条件在第一次加载地图时创建多个标识符。

这解决了我的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-21T11:32:42.590

当我在寻找同样的问题时，我只是不小心掉到了这个问题上。

我解决了我的问题，就我而言，我正在调整`mapview`. 我`delegate`在调整大小后添加了`mapview`. 它现在完美运行。！

# android - 如何检查相机是否被任何应用程序打开

> ID：15862621
> 
> 赞同：18
> 
> 时间：2013-04-07T12:56:21.713
> 
> 标签：android, camera

有什么方法可以检查相机是否打开？我不想打开相机，我只想*检查它的状态*。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2016-08-14T11:40:47.890

如果您的设备 API 版本高于 21，`CameraManager.AvailabilityCallback`可能是一个不错的选择。

需要先获取系统的摄像头管理器，代码如下：

```
CameraManager manager = (CameraManager) getSystemService(Context.CAMERA_SERVICE); 
```

然后，您需要注册`AvailabilityCallback`：

```
CameraManager manager = (CameraManager) getSystemService(Context.CAMERA_SERVICE);

if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {
    manager.registerAvailabilityCallback(new CameraManager.AvailabilityCallback() {
        @Override
        public void onCameraAvailable(String cameraId) {
            super.onCameraAvailable(cameraId);
            //Do your work
        }

        @Override
        public void onCameraUnavailable(String cameraId) {
            super.onCameraUnavailable(cameraId);
            //Do your work
        }
    }, yourHandler);
} 
```

如果 API 版本高于 21，这会更好。您可以参考[CameraManager](https://developer.android.com/reference/android/hardware/camera2/CameraManager.html)，[CameraManager.AvailabilityCallback](https://developer.android.com/reference/android/hardware/camera2/CameraManager.AvailabilityCallback.html)和[整个包](https://developer.android.com/reference/android/hardware/camera2/package-summary.html)

**如果 API 级别低于 23，尝试打开摄像头检查是否抛出异常效果很好。在 API 级别 23 中，摄像头服务与以前不同**，来自[官方文档](https://developer.android.com/about/versions/marshmallow/android-6.0-changes.html#behavior-camera)：

> 根据客户端应用程序进程的“优先级”授予对摄像头子系统资源的访问权，包括打开和配置摄像头设备。具有用户可见或前台活动的应用程序进程通常被赋予更高的优先级，使相机资源的获取和使用更加可靠。
> 
> 当较高优先级的应用程序尝试使用相机时，较低优先级应用程序的活动相机客户端可能会被“驱逐”。在已弃用的 Camera API 中，这会导致为被驱逐的客户端调用 onError()。在 Camera2 API 中，它会为被驱逐的客户端调用 onDisconnected()。

我们可以看到，在 API 23 或更高版本中，尝试打开其他应用程序/进程使用的摄像头会从正在使用它的应用程序/进程中获取摄像头，而不是获取`RuntimeException`.

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-07T12:58:44.687

您可以使用方法检查它`Camera.open(cameraId)`。

创建一个新的 Camera 对象以访问特定的硬件摄像头。如果同一个相机被其他应用程序打开，这将抛出一个 RuntimeException。

> 抛出 RuntimeException
> 如果打开摄像头失败（例如，如果摄像头正在被另一个进程使用，或者设备策略管理器已禁用摄像头）。

**更新：**

例子：

```
public boolean isCameraUsebyApp() {
    Camera camera = null;
    try {
        camera = Camera.open();
    } catch (RuntimeException e) {
        return true;
    } finally {
        if (camera != null) camera.release();
    }
    return false;
} 
```

您可以按照 Paul 的建议使用此方法，但请记住，此方法首先获取相机。

如果它获取成功，则意味着没有其他应用程序正在使用此相机并且不要忘记再次释放它，否则您将无法再次获取它。

它的抛出`RuntimeException`意味着相机正在被另一个进程使用或设备策略管理器已禁用相机。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-07T14:34:18.933

查看[Camera 的源代码](https://android.googlesource.com/platform/frameworks/base/+/master/core/java/android/hardware/Camera.java)，[它的 JNI 对应物](https://android.googlesource.com/platform/frameworks/base/+/master/core/jni/android_hardware_Camera.cpp)，最后是用于将相机与服务连接的[本机代码](https://android.googlesource.com/platform/frameworks/av/+/master/camera/Camera.cpp)，看来确定相机是否正在使用的唯一方法是直接通过`Camera::connect(jint)`.

问题是这个本地代码只能通过 JNI 函数访问，该函数`android_hardware_Camera_native_setup(JNIEnv*, jobject, jobject, jint)`设置相机以在从 Java 中创建 Camera 实例时使用`new Camera(int)`。

简而言之，这似乎是不可能的。您必须尝试打开相机，如果失败，则假设它正在被另一个应用程序使用。例如：

```
public boolean isCameraInUse() {
    Camera c = null;
    try {
        c = Camera.open();
    } catch (RuntimeException e) {
        return true;
    } finally {
        if (c != null) c.release();
    }
    return false;
} 
```

为了更好地理解相机本机代码的底层流程，[请参阅此线程](https://stackoverflow.com/questions/15863203/underlying-logic-of-cameras-native-code)。

# python - 求和后Python停止迭代数组

> ID：15862627
> 
> 赞同：0
> 
> 时间：2013-04-07T12:56:55.533
> 
> 标签：python, python-3.x

为什么这段代码什么也不返回？

```
a = [1,2,3]

a = reversed(sorted(a))
s = sum(a)

for k in a:
    print(k) 
```

不过，这段代码可以正常工作：

```
a = [1,2,3]

a = reversed(sorted(a))
# s = sum(a)

for k in a:
    print(k) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T13:02:39.007

`reversed()` [返回一个迭代器](http://docs.python.org/3.1/library/functions.html#reversed)。这是函数创建的一个特殊对象，可以迭代一次，以相反的顺序给出结果。这意味着您第二次尝试迭代它时，它不再有任何内容。

如果要多次迭代结果，则必须通过将其传递给`list`or将其转换为实际集合`tuple`。

# macos - org.hyperic.sigar.SigarException：java.library.path 中没有 libsigar-universal64-macosx.dylib

> ID：15862628
> 
> 赞同：1
> 
> 时间：2013-04-07T12:57:05.090
> 
> 标签：macos, maven, java-7

我想通过 odconverter [https://github.com/mirkonasato/jodconverter转换文档](https://github.com/mirkonasato/jodconverter)

建立后`mvn -Djava.library.path=/Users/apple/jodconverter-core/Sigar/libsigar-universal64-macosx.dylib -Doffice.home=/Applications/LibreOffice.app/ -DskipTests package`

我运行`java -jar target/jodconverter-core-3.0-SNAPSHOT.jar a.doc a.pdf` ，它给出了错误

```
 2013-4-8 14:36:10 org.artofsolving.jodconverter.office.ProcessPoolOfficeManager <init>
??Ϣ: ProcessManager implementation is SigarProcessManager
no libsigar-universal64-macosx.dylib in java.library.path
org.hyperic.sigar.SigarException: no libsigar-universal64-macosx.dylib in java.library.path
    at org.hyperic.sigar.Sigar.loadLibrary(Sigar.java:172)
    at org.hyperic.sigar.Sigar.<clinit>(Sigar.java:100)
    at org.artofsolving.jodconverter.process.SigarProcessManager.findPid(SigarProcessManager.java:40)
    at org.artofsolving.jodconverter.office.OfficeProcess.start(OfficeProcess.java:65)
    at org.artofsolving.jodconverter.office.OfficeProcess.start(OfficeProcess.java:60)
    at org.artofsolving.jodconverter.office.ManagedOfficeProcess.doStartProcessAndConnect(ManagedOfficeProcess.java:119)
    at org.artofsolving.jodconverter.office.ManagedOfficeProcess.access$000(ManagedOfficeProcess.java:31)
    at org.artofsolving.jodconverter.office.ManagedOfficeProcess$1.run(ManagedOfficeProcess.java:58)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:439)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918)
    at java.lang.Thread.run(Thread.java:680)
Exception in thread "main" org.artofsolving.jodconverter.office.OfficeException: failed to start and connect
    at org.artofsolving.jodconverter.office.ManagedOfficeProcess.startAndWait(ManagedOfficeProcess.java:64)
    at org.artofsolving.jodconverter.office.PooledOfficeManager.start(PooledOfficeManager.java:101)
    at org.artofsolving.jodconverter.office.ProcessPoolOfficeManager.start(ProcessPoolOfficeManager.java:62)
    at org.artofsolving.jodconverter.cli.Convert.main(Convert.java:112)
Caused by: java.util.concurrent.ExecutionException: java.lang.UnsatisfiedLinkError: org.hyperic.sigar.ptql.SigarProcessQuery.create(Ljava/lang/String;)V
    at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:222)
    at java.util.concurrent.FutureTask.get(FutureTask.java:83)
    at org.artofsolving.jodconverter.office.ManagedOfficeProcess.startAndWait(ManagedOfficeProcess.java:62)
    ... 3 more
Caused by: java.lang.UnsatisfiedLinkError: org.hyperic.sigar.ptql.SigarProcessQuery.create(Ljava/lang/String;)V
    at org.hyperic.sigar.ptql.SigarProcessQuery.create(Native Method)
    at org.hyperic.sigar.ptql.ProcessQueryFactory.getQuery(ProcessQueryFactory.java:66)
    at org.hyperic.sigar.ptql.ProcessFinder.find(ProcessFinder.java:68)
    at org.hyperic.sigar.ptql.ProcessFinder.find(ProcessFinder.java:56)
    at org.artofsolving.jodconverter.process.SigarProcessManager.findPid(SigarProcessManager.java:42)
    at org.artofsolving.jodconverter.office.OfficeProcess.start(OfficeProcess.java:65)
    at org.artofsolving.jodconverter.office.OfficeProcess.start(OfficeProcess.java:60)
    at org.artofsolving.jodconverter.office.ManagedOfficeProcess.doStartProcessAndConnect(ManagedOfficeProcess.java:119)
    at org.artofsolving.jodconverter.office.ManagedOfficeProcess.access$000(ManagedOfficeProcess.java:31)
    at org.artofsolving.jodconverter.office.ManagedOfficeProcess$1.run(ManagedOfficeProcess.java:58)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:439)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918)
    at java.lang.Thread.run(Thread.java:680) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-04T23:50:24.447

看看这个来自 vmware 的支持页面

[http://communities.vmware.com/message/1947069#1947069](http://communities.vmware.com/message/1947069#1947069)

您遇到的问题是文件 liblibsigar-x86_64-linux.so 的位置。

此文件需要位于运行 sigar.jar 的同一目录中，或者在运行 Java VM 时在类路径中可用。

# c# - 为网站创建 Sql server DB 时要定义什么样的所有者和用户？

> ID：15862629
> 
> 赞同：0
> 
> 时间：2013-04-07T12:57:13.167
> 
> 标签：c#, asp.net, sql, sql-server, sql-server-2008

我正在尝试创建数据库，我需要选择所有者。我的数据库将服务于 aspnet 网站，我想知道为这个数据库定义哪个所有者是安全的？

我需要从我的站点（连接字符串）连接什么样的用户，我需要创建特殊用户来连接数据库还是我可以设置我喜欢的任何用户？任何特殊配置/安全？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T13:22:05.060

为网站访问创建一个单独的帐户，并授予其执行所需操作所需的最低访问权限。理想情况下，只执行对站点使用的存储过程的访问，而不直接访问表。所有者可以是任何合适的用户。

更改多个用户的访问权限比稍后尝试分离共享用户更容易。

# asp.net - ServiceStack 示例应该以什么顺序被理解？

> ID：15862634
> 
> 赞同：39
> 
> 时间：2013-04-07T12:57:44.573
> 
> 标签：asp.net, servicestack

只是出于好奇，我想知道基于技术水平和示例的新 API 的首选排序。

在大多数情况下，所有基本基础设施问题都闻起来相同，即主机等设置。但是当涉及到服务模型、服务接口和端点设置时，哪些是最新和首选的？

谢谢你，斯蒂芬

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2013-04-08T01:15:22.057

ServiceStack 示例项目不应该以任何特定顺序使用，它们只是说明您可以使用 ServiceStack 做什么的不同示例。

## 设置服务堆栈

如果您想知道如何创建和设置 ServiceStack 服务，最简单的方法是[使用 ServiceStackVS VS.NET 扩展创建您的项目](https://github.com/ServiceStack/ServiceStack/wiki/Creating-your-first-project)，还有[wiki 上的入门部分](https://github.com/ServiceStack/ServiceStack/wiki/Create-your-first-webservice)和[Hello World 示例项目](http://www.servicestack.net/ServiceStack.Hello/)可以让您很好地了解ServiceStack 启用了什么。[这个要点是您在 ServiceStack 中仅使用 1 个 C# .cs 类](https://gist.github.com/mythz/1787443)所获得的另一个很好的示例。

## 设计和构建 REST API

如果您对设置和配置 ServiceStack 感到满意，我已经提供了有关如何[设计 REST API 公司的详细概述。这个较早的答案中的物理布局和代码结构](https://stackoverflow.com/a/15235822)。

# 示例项目、用例和[现场演示](https://github.com/ServiceStackApps/LiveDemos)

否则，示例项目和[现场演示](https://github.com/ServiceStackApps/LiveDemos)是很好的参考示例，展示了如何使用 ServiceStack 来支持单个用例。因此，您基本上只会探索与您的用例相似的那些。我将提供每个的描述

## [电子邮件联系人](https://github.com/ServiceStack/EmailContacts/)

[EmailContacts 存储库](https://github.com/ServiceStack/EmailContacts/)是一个新的指南，它介绍了典型中型 ServiceStack 项目的推荐设置和物理布局结构，包括有关如何从头开始创建解决方案的完整文档，同时解释了它沿用的所有 ServiceStack 功能。方式。它还展示了如何利用[ServiceStack 的新 Rabbit MQ 支持](https://github.com/ServiceStack/ServiceStack/wiki/Rabbit-MQ)。

## [HTTP 基准](https://github.com/ServiceStack/HttpBenchmarks)

HttpBenchmarks[存储库](https://github.com/ServiceStack/HttpBenchmarks)允许您上传 Apache HTTP 基准以可视化和分析其结果。这是一个支持 Twitter、Facebook、Google 和 LinkedIn OAuth 提供者、新用户注册、个性化主页、创建用户定义的顶级路由（例如 twitter.com/userslug）的“社交网站”示例。它还介绍了与 Glimpe、DotNetOpenAuth、FineUploader、DotNetZip 和 Highcharts.js 的集成。托管和部署到 AWS，配置 SSL 证书并启用强制重定向到 https。

## [聊天](https://github.com/ServiceStackApps/Chat)

[聊天带您了解如何使用 ServiceStack 对服务器发送事件](http://www.html5rocks.com/en/tutorials/eventsource/basics/)的集成支持启用的服务器推送通知来构建丰富的单页聊天 WebApp 。[它遍历/js/ss-utils.js](https://github.com/ServiceStack/EmailContacts/#servicestack-javascript-utils---jsss-utilsjs)中的服务器事件客户端绑定，以提供许多灵活的选项来调用现有 Web 应用程序中的预定义功能，用于显示如何远程控制其他用户聊天窗口最小的努力。

## [剃刀摇滚明星](https://github.com/ServiceStack/RazorRockstars)

仅使用 ServiceStack 的内置 Razor 和[Markdown Razor](https://github.com/ServiceStack/ServiceStack/wiki/Markdown-Razor) HTML 支持生成的服务器端（和客户端）生成的 HTML 网站。它展示了如何使用 Razor 视图增强现有的 ServiceStack 服务，使相同的服务能够同时支持网站和丰富的本地桌面和移动客户端。

## [北风数据](http://northwind.mattjcowan.com/customers)

另一个丰富的服务器端网站进一步说明了能够构建功能丰富的网站以及 REST 和基于类型消息的 API 重用相同的 ServiceStack 服务，为浏览器和本地桌面和移动客户端提供服务的能力。除了提供丰富的浏览体验之外，它还展示了如何使用 LLBLGen 提供丰富的类似 OData 的体验。

[Matt Cowan](https://twitter.com/mattjcowan)[在他的博客上提供了一个关于他如何构建 Nortwind.Data 的很好的教程，](http://www.mattjcowan.com/funcoding/2013/03/10/rest-api-with-llblgen-and-servicestack)并提供了一个很好的后续内容，展示了如何[将主题添加到 ServiceStack Razor 视图](http://www.mattjcowan.com/funcoding/2013/06/24/theming-servicestack-razor-views/)。

## [实时订单履行](https://github.com/paaschpa/ordersDemo)

使用 ServiceStack、MVC、AngularJS、SignalR、Sqlite 和 Redis 构建的类似星巴克的实时订单履行单页应用程序。支持不同的用户角色，任何用户都可以创建订单，该订单被放置在队列中，并且可以由经过身份验证的“履行者”履行。

## [社交引导 API](https://github.com/ServiceStack/SocialBootstrapApi)

使用 ServiceStack + ASP.NET MVC 构建的基于 Backbone.js 的单页应用程序，展示了如何在单个应用程序中启用所有不同的[身份验证提供](https://github.com/ServiceStack/ServiceStack/wiki/Authentication-and-authorization)程序，能够连接到社交 API 以及如何[集成 ServiceStack + MVC](http://www.servicestack.net/mvc-powerpack/)的不同方式。

## [ServiceStack.UseCases](https://github.com/ServiceStack/ServiceStack.UseCases)

我们改变了创建演示应用程序的方式，而不是完整的独立示例应用程序，我们正在开发展示单个用例的单一用途应用程序。

*   [自定义身份验证和与 ASP.NET 的集成](https://github.com/ServiceStack/ServiceStack.UseCases/tree/master/CustomAuthentication)
*   [自定义身份验证和与 ASP.NET MVC 的集成](https://github.com/ServiceStack/ServiceStack.UseCases/tree/master/CustomAuthenticationMvc)
*   [不同的打招呼方式，内置 Content-Types、文本、html 并生成动态图像](https://github.com/ServiceStack/ServiceStack.UseCases/blob/master/HelloWorld/Global.asax.cs)
*   [Image Resizer - 1 个 C# 和 1 个 HTML 页面中的单页应用程序，允许通过 Form Upload 或 Url 上传任何图像，为所有 iOS 设备调整和裁剪每个图像的不同预设分辨率大小](https://github.com/ServiceStack/ServiceStack.UseCases/tree/master/ImageResizer/ImageResizer)
*   [可重用性 - 展示如何在 MQ 主机中重用相同的服务，以提供即时响应时间和透明的并行执行](https://github.com/ServiceStack/ServiceStack.UseCases/tree/master/Reusability)
*   [Poco Power - 展示如何在所有 ServiceStack 客户端库中重用相同的 POCO。从维护 Web.config 中的复杂类型到使用 OrmLite 创建 DB 表，再到调用 3rd Party twitter 和 GitHub REST API 并在 RDBMS 和 Redis 中存储和检索它们](https://github.com/ServiceStack/ServiceStack.UseCases/blob/master/PocoPower/Program.cs)
*   [在 Windows 和 OSX/Linux 上使用 node.js 作为后端 ServiceStack 实例的前端代理](https://github.com/ServiceStack/ServiceStack.UseCases/tree/master/NodeStackProxy)
*   [Swagger Hello World - 启用 Swagger 集成和功能的简单服务](https://github.com/ServiceStack/ServiceStack.UseCases/tree/master/SwaggerHelloWorld)
*   [WebApi 产品示例 - 展示将 WebApi 产品重写为 ServiceStack 服务的差异](https://github.com/ServiceStack/ServiceStack.UseCases/tree/master/WebApi.ProductsExample)

## [ServiceStack.Examples](https://github.com/ServiceStack/ServiceStack.Examples/)

所有 ServiceStack 示例项目都包含简单的、独立的、专注于单一用途的单页应用程序。

*   [Hello World，设置 ServiceStack 并创建 Hello World 服务](https://github.com/ServiceStack/ServiceStack.Examples/tree/master/src/ServiceStack.Hello)
*   [Backbone TODOs - 使用 ServiceStack 构建的最简单的 REST/CRUD 应用程序](https://github.com/ServiceStack/ServiceStack.Examples/tree/master/src/Backbone.Todos)
*   [ServiceStack Docs 是一个使用 Markdown Razor 构建的 Content Heavy Ajax 站点的示例](https://github.com/ServiceStack/ServiceStack.Examples/tree/master/src/Docs)
*   [仅使用 ServiceStack + Redis 构建的迷你 StackOverflow 单页应用程序](https://github.com/ServiceStack/ServiceStack.Examples/tree/master/src/RedisStackOverflow)
*   [GitHub REST 文件 - 展示如何构建类似 WebDAV 的在线文件系统管理器](https://github.com/ServiceStack/ServiceStack.Examples/tree/master/src/RestFiles)
*   [REST Intro - 展示如何构建和物理布局一个简单的 REST 应用程序](https://github.com/ServiceStack/ServiceStack.Examples/tree/master/src/RestIntro)
*   [电影 REST - 可视化发生的不同 REST 操作](https://github.com/ServiceStack/ServiceStack.Examples/tree/master/src/ServiceStack.MovieRest)
*   [Northwind 数据库查看器，展示如何使用 ServiceStack + OrmLite 轻松公开内部数据集的读取和缓存视图服务](https://github.com/ServiceStack/ServiceStack.Examples/tree/master/src/ServiceStack.Northwind)

## [入门模板](https://github.com/ServiceStack/ServiceStack.Examples/tree/master/src/StarterTemplates)

ServiceStack 流行配置的不同工作启动模板：

*   [在自定义路径，如 /api](https://github.com/ServiceStack/ServiceStack.Examples/tree/master/src/StarterTemplates/CustomPath40)
*   [在/根路径](https://github.com/ServiceStack/ServiceStack.Examples/tree/master/src/StarterTemplates/RootPath40)
*   [一个独立的 HttpListener 控制台 AppHost](https://github.com/ServiceStack/ServiceStack.Examples/tree/master/src/StarterTemplates/ConsoleAppHost)
*   [Windows 服务应用主机](https://github.com/ServiceStack/ServiceStack.Examples/tree/master/src/StarterTemplates/WinServiceAppHost)

# jquery - jQuery Cycle Plugin - 满足条件时跳到下一张幻灯片

> ID：15862635
> 
> 赞同：0
> 
> 时间：2013-04-07T12:57:47.647
> 
> 标签：jquery, jquery-cycle

我想知道在满足某个条件时如何跳到下一张幻灯片。

这是我的代码：

```
 $('#slider').cycle({
        fx: 'fade',
        speed:  200, 
        timeout: 3000,
        before: function() {
            if ($(this).attr('class') == 'empty-container') {
                $(this).cycle('next');
            }
        }
    }); 
```

滑块的 HTML 标记如下：

```
<div id="slider">
  <div class="container">......</div>
  <div class="empty-container"></div>
  <div class="container">......</div>
</div> 
```

当遇到带有“空容器”类的 div 时，我想立即跳到下一张幻灯片。我知道实现这一点的最简单方法是使用`slideExpr`选项，但由于同一幻灯片中有多个寻呼机标记，我无法使用`slideExpr`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T14:40:42.853

我没有使用该`before:`选项，而是使用`after:`它现在似乎可以很好地解决我的特定问题。所以jquery现在是：

```
$('#slider').cycle({
        fx: 'fade',
        speed:  200, 
        timeout: 3000,
        after: function() {
            if ($(this).attr('class') == 'empty-container') {
                $(this).cycle('next');
            }
        }
    }); 
```

# c++ - 我可以完全停止使用“内联”吗？

> ID：15862636
> 
> 赞同：9
> 
> 时间：2013-04-07T12:58:04.003
> 
> 标签：c++, compiler-construction, inline

因为它是否内联我的函数完全取决于编译器，所以我可以完全停止使用这个关键字（假设它无论如何都会内联所有内容）？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-07T13:00:30.013

**您可以停止使用`inline`作为优化技术**。

`inline`基本上只有当您不希望[**ODR**（一个定义规则）](http://en.wikipedia.org/wiki/One_Definition_Rule)适用时才有用。简而言之，您可以将函数标记为`inline`并直接在一个头文件中提供它们的定义，然后由多个翻译单元导入，而链接器不会抱怨这一点：

**foo.hpp**

```
inline int foo() { return 42; } 
```

**foo.cpp**

```
#include "foo.hpp" // <== THE LINKER WOULD COMPLAIN IF foo() WERE NOT inline,
                   //     because its definition is imported also in main.cpp
void bar()
{
    int x = foo();
} 
```

**主文件**

```
#include "foo.hpp" // <== THE LINKER WOULD COMPLAIN IF foo() WERE NOT inline,
                   //     because its definition is imported also in foo.cpp
int main()
{
    std::cout << foo();
} 
```

关键字的存在`inline`（同样不能保证编译器将执行内联）确保链接器将合并这些定义。

当然，为了使这个合并操作有意义，标记为最终成为几个不同翻译单元的一部分的函数的*所有定义必须***相同**。如果不是这种情况，则您的程序具有**未定义的行为**并且不需要诊断 - 这意味着您的编译器/链接器不需要检测这种不一致并告诉您有问题！`inline`

 ****实际上，根据 C++11 标准的第 3.2/4 段：

> **每个程序都应包含该程序中 odr 使用的每个非内联函数或变量的准确定义；无需诊断**。定义可以显式出现在程序中，可以在标准或用户定义库中找到，或者（在适当时）隐式定义（参见 12.1、12.4 和 12.8）。内联函数应在使用它的每个翻译单元中定义。

请注意，您可以在不同的翻译单元中将相同的函数标记为`inline`并按字面意思定义*两次*，只要这些定义相同就可以：

**foo.cpp**

```
inline int foo() // Has the same body in main.cpp, no problem!
{
    return 42;
} 
```

**主文件**

```
inline int foo() // Has the same body in foo.cpp, no problem!
{
    return 42;
}

int main()
{
    std::cout << foo();
} 
```

但是，如果这两个定义不同，您将在代码中注入 UB，如下例所示：

**foo.cpp**

```
inline int foo()
{
    return 42;  // <== WATCH OUT! Different body in main.cpp
} 
```

**主文件**

```
inline int foo()
{
    return -42; // <== WATCH OUT! Different body in foo.cpp
}

int main()
{
    std::cout << foo();
} 
```

这就是为什么您通常将函数标记为`inline`直接在通用`#include`头文件中提供定义的原因。

另请注意，其定义直接内联在类定义中的类成员函数会自动标记为`inline`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-07T13:00:38.107

取决于使用目的`inline`。

**常见的（错误）概念：**
`inline`只是编译器可能会或可能不会遵守的建议。一个好的编译器无论如何都会做需要做的事情。

同时，真相：

`inline`通常向实现表明，在调用点对函数体进行内联替换优于通常的函数调用机制。在调用点执行此内联替换不需要实现；但是，**即使`inline`省略了此替换，也会遵循其他规则（尤其是*[One Definition Rule](http://en.wikipedia.org/wiki/One_Definition_Rule)*）`inline`。**

因此，如果您的使用目的是**优化**，答案是：

> **是的，您可以停止使用`inline`. 大多数现代编译器都会很好地为您做到这一点**。

但是，如果您使用的目的`inline`是让您超越一个定义规则并在头文件中定义一个函数体而不破坏 ODR，那么答案是：

> **否，您需要明确标记这些功能`inline`才能绕过 ODR。**

注意：类体内定义的成员函数是隐式的`inline`，但同样不适用于自由函数。****

# c# - 设计时看不到窗体上的控件，运行时没问题

> ID：15862638
> 
> 赞同：1
> 
> 时间：2013-04-07T12:58:08.410
> 
> 标签：c#, winforms

我有一个表单，上面有很多控件，但是在设计时看不到这些控件，我的意思是在 *.Designer.cs 上意外出现了问题。

这是我在运行时的表格：

![在此处输入图像描述](https://i.stack.imgur.com/ryj1X.png)

这是设计时的相同形式：

![在此处输入图像描述](https://i.stack.imgur.com/XXP9c.png)

所以，问题是我应该怎么做才能看到带有 *.Designer.cs 中所有控件的表单？我无法继续使用可视化设计器在其上添加/删除组件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-06T17:39:21.367

我仔细研究了存储库并找到了问题的原因：有人修改了**Sps.Tester.Management.csproj**并使其损坏。我在其中添加了以下几行：

```
<Compile Include="Settings.Designer.cs">
    <DependentUpon>Settings.cs</DependentUpon>
</Compile> 
```

问题消失了。

# python - Python - AttributeError: __getitem__

> ID：15862639
> 
> 赞同：0
> 
> 时间：2013-04-07T12:58:12.503
> 
> 标签：python, image-processing, numpy

I am required to access all images in a folder and store it in a matrix using python. Here is my code.

```
import Image
import os
from PIL import Image
from numpy import *
import numpy as np

#import images
dirname = "C:\\Users\\Karim\\Downloads\\att_faces\\New folder"

#get number of images and dimentions
path, dirs, files = os.walk(dirname).next()
num_images = len(files)
image_file = "C:\\Users\\Karim\\Downloads\\att_faces\\New folder\\2.pgm"
im = Image.open(image_file)
width, height = im.size

images = []

for x in xrange(1, num_images):
    filename = os.listdir(dirname)[x]
    filepath = os.path.join(dirname, filename)
    img = Image.open(filepath)
    img = im.convert('L')
    images[:, x] = img[:]

print images 
```

but I am getting the error: `AttributeError: __getitem__`

from the line: `images[:, x] = img[:]`

# jquery - jQuery: Removing adding/removing a plugin based on window size

> ID：15862641
> 
> 赞同：1
> 
> 时间：2013-04-07T12:58:13.773
> 
> 标签：jquery, responsive-design

I'm trying to make a fully responsive layout..,

I've got the following code to add a function depending on browser size, but how do I remove the effects of this plugin if the browser is resized? (Currently it only works if the page is loaded at the specific size, not if it's resized)

```
$(document).ready(function(){
   $(window).resize(function() {
      if ($(window).width() >= 420) {
          // Enable the plugin to make the tab functionality...
          $( "#tabs" ).tabs();
      }
      else {
        // Code needed to completely disable the tab functionality??
      }
   });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T13:01:06.233

Why don't you try to grab the class using a media query then display: none;.

# c# - c# groupBox如何删除这行？

> ID：15862645
> 
> 赞同：1
> 
> 时间：2013-04-07T12:58:45.143
> 
> 标签：c#, groupbox

如何删除这个白线`GroupBox`？

![在此处输入图像描述](https://i.stack.imgur.com/LdHld.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T13:36:57.843

尝试将 .BorderStyle 属性更改为看起来更好的东西，即没有。

而是根本不使用组控件，或任何其他可能有一些可见线条的分组控件。

面板更适合于此（根据上面的建议）。

# android - Android 在系统内存不足时杀死广播接收器

> ID：15862651
> 
> 赞同：2
> 
> 时间：2013-04-07T12:59:05.433
> 
> 标签：android

我的应用程序有一个广播接收器，它监听传入的短信，但没有持久服务。

我认为当系统内存不足时广播接收器会被杀死，例如当应用程序从 android 设置中强制停止时。一天后，我在自己的手机上注意到了这一点。

android是否会在系统内存不足时杀死广播接收器？

无论如何，在此之后是否可以再次启用它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T13:21:36.653

如果应用程序由于内存不足而被强制停止或杀死，那么广播接收器也会受到影响。

> 从 onReceive() 返回后，BroadcastReceiver**不再处于活动状态**，并且它的托管过程仅与在其中运行的任何其他应用程序组件一样重要。这一点尤其重要，因为如果该进程仅托管 BroadcastReceiver（用户从未或最近没有与之交互的应用程序的常见情况），那么在从 onReceive() 返回时，系统将认为其进程为空并**主动终止以便**资源可用于其他更重要的流程。
> 
> 这意味着，对于运行时间较长的操作，您通常将**Service**与 BroadcastReceiver 结合使用，以在整个操作期间保持包含进程的活动状态。

当您的应用程序重新启动时，再次从该`onResume()`方法注册接收器。`onPause()`在您的活动方法上取消注册。对于长时间运行的操作，请使用`Service`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T14:41:17.237

> 我的应用程序有一个广播接收器，它监听传入的短信，但没有持久服务。

没事儿。大多数 Android 应用程序中不应该有持久服务。

> 我认为当系统内存不足时广播接收器被杀死

不是那些通过`<receiver>`清单中的元素注册的。

> 就像当应用程序被强制从 android 设置停止时一样

有才华的程序员意识到“强制停止”与“系统内存不足时被杀死”无关。在 Android 3.1+ 上，“强制停止”将阻止使用所有广播接收器，直到用户再次手动运行活动。但是，同样，当您的进程“在系统内存不足时被终止”时，Android 不会做与您点击“强制停止”按钮时发生的事情相同的事情。

> android是否会在系统内存不足时杀死广播接收器？

不是那些通过`<receiver>`清单中的元素注册的。

> 因此，在应用程序需要一直运行的所有场景中，服务必须伴随它再次启用广播接收器。

当然不是。您*需要*停止按下“强制停止”按钮。如果您希望模拟由于内存不足而终止的进程，请使用其他方法（例如，在 Android 4.0+ 上将应用程序从最近的任务列表中滑出）。

# xml - 如何检查元素节点是否包含xsl中的特定值

> ID：15862655
> 
> 赞同：4
> 
> 时间：2013-04-07T12:59:26.117
> 
> 标签：xml, xslt, xpath-2.0

我有一个 XML 文档：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<document>
    <fruits>
        <fruit id="1">
            <title>I like pineapples</title>
            <description> a tropical plant with edible multiple fruit consisting of coalesced berries</description>
        </fruit>
        <fruit id="2">
            <title>I like watermelons</title>
            <description>has a smooth exterior rind (green, yellow and sometimes white) and a juicy, sweet interior flesh</description>
        </fruit>
    </fruits>
</document> 
```

如何检查`title`元素是否包含“菠萝”，以便我只能显示`description`该元素`fruit`？

这是我拥有的 XSLT 转换：

```
<?xml version="1.0" encoding="iso-8859-1"?>

<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:output  method="xml" omit-xml-declaration="yes" doctype-public="-//WAPFORUM//DTD XHTML Mobile 1.0//EN"
             doctype-system="http://www.wapforum.org/DTD/xhtml-mobile10.dtd"/>
 <xsl:template match="/">
    <xsl:element name="html">
      <xsl:element name="head">        
        <xsl:element name="title">Fruits</xsl:element>
      </xsl:element>

      <xsl:element name="body">
        <xsl:if test="/document/fruits/fruit/title[contains(text(),'pineapple')]">
          <xsl:value-of select="description"/>
        </xsl:if>
        </xsl:element>
    </xsl:element>
  </xsl:template>
 </xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-07T15:44:40.433

这是一种稍微推动驱动的方法，可以实现您想要的。

**当这个 XSLT：**

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
version="1.0">
  <xsl:output omit-xml-declaration="no" indent="yes"
  doctype-public="-//WAPFORUM//DTD XHTML Mobile 1.0//EN"
  doctype-system="http://www.wapforum.org/DTD/xhtml-mobile10.dtd" />
  <xsl:strip-space elements="*" />

  <xsl:template match="/*">
    <html>
      <head>
        <title>Fruits</title>
      </head>
      <body>
        <xsl:apply-templates
          select="fruits/fruit[contains(title, 'pineapple')]" />
      </body>
    </html>
  </xsl:template>

  <xsl:template match="fruit">
    <xsl:apply-templates select="description" />
  </xsl:template>
</xsl:stylesheet> 
```

**...应用于提供的 XML：**

```
<?xml version="1.0" encoding="utf-8"?>
<document>
  <fruits>
    <fruit id="1">
      <title>I like pineapples</title>
      <description>a tropical plant with edible multiple fruit
      consisting of coalesced berries</description>
    </fruit>
    <fruit id="2">
      <title>I like watermelons</title>
      <description>has a smooth exterior rind (green, yellow and
      sometimes white) and a juicy, sweet interior
      flesh</description>
    </fruit>
  </fruits>
</document> 
```

**...产生了想要的结果：**

```
<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//WAPFORUM//DTD XHTML Mobile 1.0//EN" "http://www.wapforum.org/DTD/xhtml-mobile10.dtd">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <title>Fruits</title>
  </head>
  <body>a tropical plant with edible multiple fruit consisting of coalesced berries</body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T16:19:35.590

**一个更简单且几乎完全“推式”的解决方案**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/*">
    <html>
      <head>
        <title>Fruits</title>
      </head>
      <body><xsl:apply-templates/></body>
    </html>
 </xsl:template>

 <xsl:template match="fruit[contains(title, 'pineapple')]">
  <xsl:value-of select="description"/>
 </xsl:template>
 <xsl:template match="text()"/>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<document>
    <fruits>
        <fruit id="1">
            <title>I like pineapples</title>
            <description> a tropical plant with edible multiple fruit consisting of coalesced berries</description>
        </fruit>
        <fruit id="2">
            <title>I like watermelons</title>
            <description>has a smooth exterior rind (green, yellow and sometimes white) and a juicy, sweet interior flesh</description>
        </fruit>
    </fruits>
</document> 
```

**产生了想要的正确结果：**

```
<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

      <title>Fruits</title>
   </head>
   <body> a tropical plant with edible multiple fruit consisting of coalesced berries</body>
</html> 
```

# c - realloc：下一个大小无效，由 glibc 检测到

> ID：15862660
> 
> 赞同：5
> 
> 时间：2013-04-07T12:59:46.230
> 
> 标签：c, size, realloc, dynamic-arrays

我的代码：

```
int args_size = 5;
字符** 参数；

args = (char**) malloc(sizeof(char*) * args_size);

// ...

args = (char**) realloc(args, sizeof(char*) * (args_size += 5));

```

我想将大小增加 5。

但我得到这个错误：

```
*** 检测到 glibc *** ./a.out: realloc(): 无效的下一个大小：0x0000000000a971c0 ***

```

我知道捕获 realloc 的临时变量很好，但只是为了简单起见......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T10:20:16.433

**解决了**

最初，大小`args`为 5 个元素。当程序正在填充`args`时，它错误地向其中添加了*第 6 个*元素，然后调用`realloc`.

这导致了问题中提到的错误。

通过消除错误，遵循 WhozCraig、Jens Gustedt 和其他人的评论，问题得以解决……

谢谢大家！

# r - Generate a line plot connecting top points from a scatter plot (Manhattan plot)

> ID：15862666
> 
> 赞同：0
> 
> 时间：2013-04-07T13:00:26.060
> 
> 标签：r, scatter-plot, line-plot

I am trying to create a line plot connecting the top points of a Manhattan plot (showing only the 'skyline' of the manhattan plot). I think I can manually select the points to connect and specify them with the 'line' command, but I was wondering if there is an easier way to do this in R?

This is an example dataset and plot:

```
affy <-c(40220, 41400, 33801, 32334, 32056, 31470, 25835, 27457, 22864, 28501, 26273, 24954, 19188, 15721, 14356, 15309, 11281, 14881, 6399, 12400, 7125, 6207)
CM <- cumsum(affy)
n.markers <- sum(affy)
n.chr <- length(affy)
test <- data.frame(chr=rep(1:n.chr,affy),pos=1:n.markers,p=runif(n.markers))
plot(test$pos, -log10(test$p)) 
```

Thank you in advance for the help!

# vb.net - what is the best database files that could be used to save "dataset" from a "datagridview" locally

> ID：15862667
> 
> 赞同：0
> 
> 时间：2013-04-07T13:00:27.250
> 
> 标签：vb.net, datagridview

So, i use VB.NET, in my DataGridView i have a checkboxcolumn, an imagecolumn and so there are some textboxcolumns.

And i just want to save values locally.

For checkboxcolumn, it was easy to save Cells.Value.ToString, but ImageColumn i have no idea how to save the image location.

i mean, how to save DataGridViewImageCell.value to my database file as image location or something?

and, Any suggestions about the type of database files should i use?

And thanks.

Please see:

*   i have no problem if i have to keep images in project resources or just put them in the start up directory

*   and so i have no problem even if i should make it a data bound control

# javascript - Javascript metronome: HTML5 inside animation creating strange echo

> ID：15862669
> 
> 赞同：1
> 
> 时间：2013-04-07T13:00:29.797
> 
> 标签：javascript, html, audio

I'm making a simple Raphael-powered Javascript metronome. My trouble is with the click sound, which strangely starts firing twice after about a dozen clicks. I'm currently using the tag, but I have the same problem when using SoundManager2\.

I've got it all [on a fiddle here](http://jsfiddle.net/chriswilsondc/wDwsW/1/), and here is the important part:

```
<audio id="tick" src="http://experimentsinform.com/media/audio/tick.wav"></audio>

<script>
    var paper = Raphael("canvas", 300, 300);

    function tick() {        
        document.getElementById("tick").play();
    }

    var metronome = function(x, y, l) {
         //draw metronome. See fiddle            
         var mn = paper.set(stick, vertex, weight).attr("transform", "R-20 " + x + "," + y);

         Raphael.easing_formulas.sinoid = function(n) { return Math.sin(Math.PI * n / 2) };

         return {
             start: function(tempo, sound) {
                 var interval = 120000 / tempo;            
                 var ticktock = Raphael.animation({
                     "50%": { transform:"R20 " + x + "," + y, easing: "sinoid", callback: function() { sound(); }},
                     "100%": { transform:"R-20 " + x + "," + y, easing: "sinoid", callback: function() { sound(); }}
                 }, interval);

              mn.animate(ticktock.repeat(Infinity));
        },
        stop: function() {
            mn.stop();
            mn.attr("transform", "R-20 " + x + "," + y);
        }
    };    
};

var m = metronome(150, 275, 250);
m.start(120, tick);

</script> 
```

If you let it tick about 20 times in Chrome, you start getting a double-click sound. Anyone have any idea why? I kept the mp3 sound effect to 30ms or so.

Thank you!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T14:11:29.440

啊，Raphael 将动画应用于集合中的三个元素中的每一个，所以回调被调用了 3 次。感谢@UpTheCreek 和@StarBeamRainboxLabs。

# regex - 正则表达式 + modrewrite 只是工作

> ID：15862675
> 
> 赞同：1
> 
> 时间：2013-04-07T13:00:42.903
> 
> 标签：regex, mod-rewrite, seo

我试图将旧的谷歌缓存链接重定向到我们的新网站。所以它在我的正则表达式编辑器中有效，但在我的 htacess 文件中无效？

第一条规则似乎有效，但第二条规则无效。我在规则之上留下了例子。

```
# Legacy site redirects
# For homes home and search:
# www.site.ie/results_lost_found.html?search_type=lost_found&ad_type=&location_id=&x=31&y=12
RewriteRule ^results_lost_found|results_home(.+)search_type=lost_found(.*)$ lost_found [NC,R=301,L]
# www.site.ie/results_home.html?search_type=for_home&pet_type_id=&location_id=&x=14&y=10
RewriteRule ^results_lost_found|results_home(.*)search_type=for_home(.*)$ for_homes [NC,R=301,L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T13:39:34.487

您的任何规则都不起作用，因为 RewriteRule 仅匹配没有查询字符串的 URI。在 mod_rewrite 你会做这样的事情：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{QUERY_STRING} ^search_type=lost_found&ad_type=&location_id=&x=31&y=12$ [NC]
RewriteRule ^(results_lost_found|results_home)\.html$ /lost_found? [NC,R=301,L] 
```

请注意使用查询字符串变量`%{QUERY_STRING}`来匹配您的查询字符串。

# c# - Stop timer running a certain script?

> ID：15862678
> 
> 赞同：0
> 
> 时间：2013-04-07T13:01:01.577
> 
> 标签：c#, xbox360

Didn't really know how to word this correctly so forgive the bad title name.

I'm using a timer to detect when a button is pressed on my Xbox. It's works so far but I use it to print text on the screen. I need it to print it once then stop, at the minute it keeps on printing until I close the app.

Any help is appreciated,

Thanks.

```
private void timer4_Tick(object sender, EventArgs e)
        {
            for (int i = 0; i <= 17; i++)
            {// all client? yes
                try
                {
                    uint LB = buttonpressed(i);

                    uint RB = buttonpressed(i); 
                    uint A = buttonpressed(i);
                    uint X = buttonpressed(i);
                    uint B = buttonpressed(i);
                    uint dpaddown = buttonpressed(i);
                    if (buttonpressed(0) == 0x4000)//Scrolling
                    {
                        scroll++;
                    }
                    else if (buttonpressed(0) == 0x8000)//Scrolling
                    {
                        scroll--;
                    }

                    if (MainMenu == 1 && scroll == 0)
                    {
                            Jtag.Call(0x82364E18, -1, 0, "v cg_chatHeight \"6\"");
                            Jtag.Call(0x82364E18, -1, 0, "v cg_chatTime \"60000\"");
                            Jtag.Call(0x82364E18, -1, 0, "v cg_hudsayposition \"250 250\"");
                            Jtag.Call(0x8233E8D8, 0, "say \"^4Option 1 Main Menu\"");
                            Jtag.Call(0x8233E8D8, 0, "say \"^1Option 2 Main Menu\"");
                            Jtag.Call(0x8233E8D8, 0, "say \"^1Option 3 Main Menu\"");
                            Jtag.Call(0x8233E8D8, 0, "say \"^1Option 4 Main Menu\"");
                            Jtag.Call(0x8233E8D8, 0, "say \"^1Option 5 Main Menu\"");
                            Jtag.Call(0x8233E8D8, 0, "say \"^1Option 6 Main Menu\"");
                    }
}
                catch
                {
                    MessageBox.Show("Error", "Not Connected");
                }
            }
        }

` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T13:10:35.813

使用`Timer.Stop`方法。您还可以通过将 Enabled 属性设置为 false 来停止计时器。

[http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.stop.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.stop.aspx)

# timeout - omn iauth 回调超时

> ID：15862682
> 
> 赞同：0
> 
> 时间：2013-04-07T13:01:09.507
> 
> 标签：timeout, omniauth

我使用了[https://github.com/igaiga/omniauth-sample](https://github.com/igaiga/omniauth-sample)的示例，它只是停留在回调阶段。我还测试了其他一些样品，结果是一样的。

```
Started GET "/auth/facebook/callback?state=118c21d7ea5675990e0a5e8a876f041f59dbc9a925f94754&code=AQDp93hH-WQor4ZQ8S_ZIGw0dTARw5vPMmkNAiRW9Ql8n7-fny0R5Du88InAILPbXUmdwWh_MyMpZzHzhO2YSlDXeMclSdyDfQQbtlFqixnYgpFt_3Sx5DETKIAYj2amRhK6JaNvxT1ffXgJ6qbMfHUbXlaerFWep60RVHBqwdA6tS-AoPQBNbKSA52-YAhj9-McGoEl4LQi4PGkIpVZu9IV" for 127.0.0.1 at 2013-04-07 16:51:24 +0800

Errno::ETIMEDOUT (Operation timed out - SSL_connect):
  /Users/mac/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/net/http.rb:799:in `connect'
  /Users/mac/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/net/http.rb:799:in `block in connect'
  /Users/mac/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/timeout.rb:54:in `timeout'
  /Users/mac/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/timeout.rb:99:in `timeout'
  /Users/mac/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/net/http.rb:799:in `connect'
  /Users/mac/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/net/http.rb:755:in `do_start'
  /Users/mac/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/net/http.rb:744:in `start'
  /Users/mac/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/net/http.rb:1284:in `request'
  faraday (0.8.7) lib/faraday/adapter/net_http.rb:75:in `perform_request'
  faraday (0.8.7) lib/faraday/adapter/net_http.rb:38:in `call'
  faraday (0.8.7) lib/faraday/request/url_encoded.rb:14:in `call'
  faraday (0.8.7) lib/faraday/connection.rb:247:in `run_request'
  oauth2 (0.8.1) lib/oauth2/client.rb:88:in `request'
  oauth2 (0.8.1) lib/oauth2/client.rb:131:in `get_token'
  oauth2 (0.8.1) lib/oauth2/strategy/auth_code.rb:29:in `get_token'
  omniauth-oauth2 (1.1.1) lib/omniauth/strategies/oauth2.rb:99:in `build_access_token'
  omniauth-facebook (1.4.1) lib/omniauth/strategies/facebook.rb:73:in `block in build_access_token'
  omniauth-facebook (1.4.1) lib/omniauth/strategies/facebook.rb:174:in `with_authorization_code!'
  omniauth-facebook (1.4.1) lib/omniauth/strategies/facebook.rb:73:in `build_access_token'
  omniauth-oauth2 (1.1.1) lib/omniauth/strategies/oauth2.rb:74:in `callback_phase'
  omniauth (1.1.3) lib/omniauth/strategy.rb:219:in `callback_call'
  omniauth (1.1.3) lib/omniauth/strategy.rb:175:in `call!'
  omniauth (1.1.3) lib/omniauth/strategy.rb:157:in `call'
  omniauth (1.1.3) lib/omniauth/strategy.rb:177:in `call!'
  omniauth (1.1.3) lib/omniauth/strategy.rb:157:in `call'
  omniauth (1.1.3) lib/omniauth/builder.rb:48:in `call'
  actionpack (3.2.13) lib/action_dispatch/middleware/best_ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T04:46:17.917

原因是我落后于中国的GFW。出于某种原因，goagent 对这个问题没有帮助，而 vpn 仅在 facebook 的情况下有帮助。好消息是，当我将代码部署到 heroku 时，它适用于 facebook 和 twitter。

# asp.net-mvc - ASP.NET MVC FileStreamResult，未使用 fileDownloadName

> ID：15862683
> 
> 赞同：14
> 
> 时间：2013-04-07T13:01:27.213
> 
> 标签：asp.net-mvc, pdf-generation, filestreamresult

以下返回浏览器尝试直接内联显示的 PDF。这可以正常工作。但是，如果我尝试下载文件，下载名称不是“myPDF.pdf”，而是路径中的 ID（myapp/controller/PDFGenerator/ID）。是否可以将文件下载名称设置为“myPDF.pdf”？

```
public FileStreamResult PDFGenerator(int id)
{
    MemoryStream ms = GeneratePDF(id);

    byte[] file = ms.ToArray();
    MemoryStream output = new MemoryStream();
    output.Write(file, 0, file.Length);
    output.Position = 0;
    HttpContext.Response.AddHeader("content-disposition", 
    "inline; filename=myPDF.pdf");

    return File(output, "application/pdf", fileDownloadName="myPDF.pdf");
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-07T13:03:28.500

不，这对于内联显示的 PDF 是不可能的。如果您将 Content-Disposition 标头作为附件发送，则可以实现此目的：

```
public ActionResult PDFGenerator(int id)
{
    Stream stream = GeneratePDF(id);
    return File(stream, "application/pdf", "myPDF.pdf");
} 
```

另请注意，我如何删除`MemoryStream`您正在使用的不必要的内容并将 PDF 加载到内存中，您可以直接将其流式传输到客户端，这样效率会高得多。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-03-10T12:02:39.963

如果您使用 FileStreamResult 下载文件，请尝试在控制器中使用它

```
Response.ContentType = "application/pdf";
Response.AddHeader("Content-Disposition", "attachment; filename=FileName.pdf"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-14T05:35:46.607

可以通过使 id 成为一个字符串来表示不带扩展名的文件名。

```
public ActionResult PDFGenerator(string id, int? docid)
{
    Stream stream = GeneratePDF(docid);
    return new FileStreamResult(stream , "application/pdf");
} 
```

然后网址就这样结束了

```
 ..PDFGenerator/Document2?docid=15 
```

# php - PHP Form update will not update

> ID：15862684
> 
> 赞同：0
> 
> 时间：2013-04-07T13:01:28.543
> 
> 标签：php

I have written an Edit part of my Form but somehow it will not Update the edited Fields. The Code does not give any Errors but it will not update?!

If possible could somebody take a look please?

```
<?php
include "connect.php";//database connection

if (isset($_GET["id"])) {
  $id = intval($_GET["id"]);

  if (isset($_POST["edited"])) 
  {
    $update  = "UPDATE traumprojekt SET";
    $update .= sprintf("quantityProduct='%s', " , mysql_real_escape_string($_POST["quantityProduct"]));
    $update .= sprintf("titleProduct='%s', " , mysql_real_escape_string($_POST["titleProduct"]));
    $update .= sprintf("informationProduct='%s'", mysql_real_escape_string($_POST["informationProduct"]));
    $update .= "WHERE id = '$id'";
    mysql_query($update);
  }

  $sql = "SELECT * FROM `traumprojekt` WHERE id=$id";

  $res = mysql_query($sql) or die (mysql_error());

  if (mysql_num_rows($res) == 1) 
  {
    $row = mysql_fetch_assoc($res);

?>

<form method="post" action="edit_form.php?id=<?php echo $row["id"] ?>">
  ID: <?php echo $row["id"] ?><br />
  Quantity: <input type="text" name="quantityProduct" value="<?php echo $row["quantityProduct"] ?>"><br />
  Product Title: <input type="text" name="titleProduct" value="<?php echo $row["titleProduct"] ?>"><br />
  Product Information: <input type="text" name="informationProduct" value="<?php echo $row["informationProduct"] ?>"><br />
  <input type="submit" name="submit" value="Update"><br />
  <input type="hidden" name="edited" value="1">
</form>

<?php

  }

}

?> 
```

# google-app-engine - 谷歌应用引擎 MemCache - ArrayList 持久化

> ID：15862687
> 
> 赞同：1
> 
> 时间：2013-04-07T13:01:35.040
> 
> 标签：google-app-engine, arraylist, memcached

我想将一个 ArrayList 存储到 GAE 内存缓存中。我知道不能保证数据会保留，所以如果我存储一个数组列表，这意味着我会丢失列表中的所有项目，对吗？

我想知道它，因为我希望所有项目都在那里或根本没有项目。不接受部分物品移除。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T13:04:56.207

是的，如果您将数组列表存储在单个 memcache 值中，如果该值被驱逐，那么整个数组列表将被驱逐。

# ember.js - 根据下拉值修改 Handlebar 模板

> ID：15862689
> 
> 赞同：0
> 
> 时间：2013-04-07T13:01:50.770
> 
> 标签：ember.js, handlebars.js

基于选择的下拉列表，即如果选择了 B，则必须为 B 修改模板。

模板 -

```
 <script type="text/x-handlebars" id="search">

                            ...

                            <div class="controls">
                                <select class="input-medium focused">
                                            <option>Any</option>
                                            <option>A</option>
                                            <option {{action 'chosenB'}} >B</option>
                                            <option>C</option>
                                            <option>D</option>
                                </select> 
                            </div>

                          {{#if searchB}} 
                               //Show view specific to B-only  
                          {{/if}}
    </script> 
```

路由器 -

```
 App.Router = Ember.Router.extend({

                this.resource('search');

            });

            SearchController = Ember.ObjectController.extend({

               searchB: false,

               chosenB: function() {
               this.set('searchB', true);
               },

            }); 
```

因此，当我转到 URL /search 时，最初 B 的唯一视图没有显示为 IF 条件不满足。但是，当用户从下拉列表中选择 B 时，我从模板中调用了 SearchController 的操作 selectedB，它应该将“searchB”设置为 true，并且应该出现仅 B 视图，但没有发生。

你能帮忙找出这里的错误吗..

余烬 - 1.0.0-RC.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T14:35:31.927

Ember.js 有一个内置的 Select 视图，请查看此文档[http://emberjs.com/api/classes/Ember.Select.html](http://emberjs.com/api/classes/Ember.Select.html)，我认为您的问题与绑定相关，使用正确的组件来完成工作会有想要的行为。

希望能帮助到你

# asp.net-mvc-4 - BreezeJS Get Metadata from the server without using Entity Framework for complex objects (nested objects)

> ID：15862691
> 
> 赞同：3
> 
> 时间：2013-04-07T13:02:03.013
> 
> 标签：asp.net-mvc-4, asp.net-web-api, odata, breeze

This is my model on the server side. I don't want to use Entity Framework, how would I generate BreezeJS metadata from the server. Breeze Metadata Format found here [http://www.breezejs.com/documentation/breeze-metadata-format](http://www.breezejs.com/documentation/breeze-metadata-format) doesn't work.

```
public class User
{
    public string Id { get; set; }
    public string Name { get; set; }
    public List<App> Apps { get; set; }
}

public class App
{
    public string Id { get; set; }
    public string Name { get; set; }
    public Dictionary<string, string> Info { get; set; }
} 
```

Did anyone try complex objects (nested object) similar to above one without using EF.

Using Breeze Metdata API or OData ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T13:09:39.807

看看这个例子[http://www.breezejs.com/samples/nodb](http://www.breezejs.com/samples/nodb)它应该给你一个线索。

# javascript - touchstart event stops working after scroll

> ID：15862692
> 
> 赞同：1
> 
> 时间：2013-04-07T13:02:05.760
> 
> 标签：javascript, events, mobile, fixed

I have attached a touchstart event to my fixed positioned footer in a web-app

so the structure is like this:

```
<div id="content">i am a looong content.</div>
<div id="footer">i am tappable!</div> 
```

and the code like this:

```
$("#footer").on('touchstart', function(e) { alert("tapped"); }); 
```

The problem is that when I scroll down the page to read the (long) content, the touchstart event for my footer just stops working! it does not get called anymore.

Does anyone have any idea why this might be happening? Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T13:41:46.530

我可以建议使用 click 代替，这样每次都会调用它。

```
var idFooter = document.getElementById("footer");
idFooter.addEventListener("click", touched, false);

function touched(){
 alert("tapped");
} 
```

您是否尝试使用绑定而不是用户？

您也可以使用 touchend 来查看它的效果更好。

# android - 表面视图中的触摸事件和手势

> ID：15862705
> 
> 赞同：2
> 
> 时间：2013-04-07T13:04:04.520
> 
> 标签：android, surfaceview

任何人都可以为我指出一些课程或为以下案例提出任何建议吗？

我有具有背景图像的 SurfaceView，我希望在其上绘制其他位图。我想支持以下操作：

*   单击一下，新的位图会添加到背景之上，
*   在给定位置的双击位图上被删除，
*   点击并移动（如拖放）位图正在移动，
*   按下并移动表面视图正在滚动，
*   在表面视图中的捏合/捏合会相应地缩放。

这仅适用于 GestureRezognizer 吗？如果没有，如何处理所有这些情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-08-21T16:35:58.953

要处理触摸输入，请在扩展 SurfaceView 的类中覆盖 onTouchEvent 以处理 MotionEvent。这是一个示例代码，当用户第一次触摸屏幕时获取屏幕位置。

```
@Override    
public boolean onTouchEvent(MotionEvent event) {
    if (event.getAction() == MotionEvent.ACTION_DOWN) {
        touchX = event.getX();
        touchY = event.getY();
    }
    return true;
} 
```

有关 MotionEvent 对象的更多信息，请[访问 Android 开发者网站](https://developer.android.com/reference/android/view/MotionEvent.html)。

# php - 将文件图标类型从其地址更新为 MySQL

> ID：15862707
> 
> 赞同：0
> 
> 时间：2013-04-07T13:04:42.797
> 
> 标签：php, mysql

我想修复我的文件类型图标，因为我在上传过程中没有设置图标，现在我不想为每个文件设置它，但请稍后进行：

```
mysql_set_charset('utf8');
$sql = "SELECT * FROM `upload_files` WHERE id > '0'";
$result = mysql_query ($sql);
echo mysql_error();
while($pole = mysql_fetch_assoc($result)){

    $filename = $pole['file_adress'];
    $file_ext = substr($filename, strripos($filename, '.'));
    $file_ext = str_replace(".","",$file_ext);
    mysql_query("UPDATE  `d30268_acko`.`upload_files` SET  `icon` =  '/img/file_ico/$file_ext.png' WHERE  `upload_files`.`file_adress` = $file_ext;");
    echo $pole['icon']."<br>";
    }
    echo "Done"; 
```

`file adress`例如`rokoko.odt`，从这个我想要的只是`odt`，这就是我现在拥有的，但我需要更新大约 100 行来设置文件类型图标

谁能帮帮我？它只是`icon`为所有文件设置了相同的类型，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T13:28:13.780

您需要将查询更新为

```
UPDATE  `d30268_acko`.`upload_files` SET  `icon` =  '/img/file_ico/$file_ext.png' WHERE  `upload_files`.`file_adress` LIKE '%.{$file_ext}' 
```

# android - 使用 EditText 的问题

> ID：15862709
> 
> 赞同：0
> 
> 时间：2013-04-07T13:05:04.173
> 
> 标签：android, android-edittext

我正在尝试将 editText 的值从一个类传递给另一个类。在第一堂课中，我使用这段代码来获取editText的值：

```
number = (EditText) this.findViewById(R.id.editText10);
text=number.getText().toString();//obtain the value 
```

其中“文本”是一个静态字符串。后来我使用这个返回`STATIC`字符串“text”的代码：

```
public static String rete()   
{
    return text;
} 
```

最后，我使用以下方法获得了第二类中的值：

```
String text2 = Pruebita2.rete(); 
```

`Pruebita2`第一个班级的名字在哪里。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-06T19:45:06.910

在类之间传输数据的最简单方法是通过意图将字符串“text”传递给第二个类。

例如。

活动1：创建意图

```
Intent intent = new Intent(this, Activity2.class);
           intent.putExtra("text_key", text); 
           context.startActivity(intent); 
```

活动2：获取价值

```
text = getIntent().getStringExtra("text_key"); 
```

# jquery - 简单的 jQuery slideDown 不适用于两个

> ID：15862710
> 
> 赞同：0
> 
> 时间：2013-04-07T13:05:22.223
> 
> 标签：jquery, menu, fade

问题：

我有 2 个幻灯片，有点像菜单。

```
<div id="one" style="background-color: red; width: 200px; heihgt: 125x; margin-left: 5px; float: left;">One</div>
<div id="two" style="background-color: red; width: 200px; heihgt: 125x; margin-left: 5px; float: left;">Two</div><br />
<div id="block1" style="background-color: blue; width: 200px; height: 300px; margin-left: 5px; float: left; display: none;">Blabla</div>
<div id="block2" style="background-color: blue; width: 200px; height: 300px; margin-left: 5px; float: left; display: none;">Blabla2</div> 
```

这个 jQuery 脚本：

```
<script>
$(document).ready(function() {
    $("#one").hover(function() {
        $("#block1").slideToggle("slow");
    });
    $("#two").hover(function() {
        $("#block2").slideToggle("slow");
    });
});
</script> 
```

主要思想是如果悬停#one，则向下滑动#block1，如果悬停#two，则向下滑动#block2

但是有一个问题：

悬停#one时，它工作正常。

但是，当您将鼠标悬停在#two 时，什么也没有发生。

如果你悬停#one 然后#two，它会工作，但最后它会再次滑下#block1。我不知道是什么原因造成的？

**问题**

我做错了什么？我如何做到这一点，当您悬停#one 时，它​​会切换#block1，而当我悬停#two 时，它会切换#block2。

我刚开始学习 jQuery，对语法真的很困惑。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T13:08:44.080

Hover 需要两个处理程序：当鼠标指针进入和离开元素时。如果您为您的方法使用`mouseover`或添加另一个处理程序，它应该可以工作`hover`

* * *

你的 HTML 和 CSS 有问题，所以我以这个 HTML 为例：

```
<div id="one" class="div" style="background-color: red; width: 200px; heihgt: 125x; margin-left: 5px; float: left;">One</div>
<div id="two" class="div" style="background-color: red; width: 200px; heihgt: 125x; margin-left: 5px; float: right;">Two</div><br />
<div id="block1" style="background-color: blue; width: 200px; height: 300px; margin-left: 5px; float: left; display: none;">Blabla</div>
<div id="block2" style="background-color: blue; width: 200px; height: 300px; margin-left: 5px; float: right; display: none;">Blabla2</div> 
```

**jQuery：**

```
$(".div").each(function(i) {
    var index = i + 1;
    $(this).hover(
      function () {
        $(this).siblings("#block" + index).slideDown("slow");
      },
      function () {
        $(this).siblings("#block" + index).slideUp("slow");
      }
    );
}); 
```

`**[Working Demo](http://jsfiddle.net/azyvS/)**`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T13:36:38.570

另一个想法。“高度”存在拼写问题，您可以尝试 div 中包含的块。

我改变了一些东西，它在这里工作 [http://jsfiddle.net/G3BuZ/1/](http://jsfiddle.net/G3BuZ/1/)

```
$(document).ready(function() {
        $("#one").hover(function() {
        $("#block1").slideDown("slow");
    });
        $('#one').mouseleave(function() {
        $("#block1").slideUp("slow");
    });
        $("#two").hover(function() {
        $("#block2").slideDown("slow");
    });
        $('#two').mouseleave(function() {
        $("#block2").slideUp("slow");
    });  

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T13:09:42.303

工作小提琴：

[http://jsfiddle.net/HKNDY/3/](http://jsfiddle.net/HKNDY/3/)

这有效-悬停有两个部分（悬停`on`和悬停`off`）。当鼠标悬停在`div`.

```
$(document).ready(function() {
    $("#one").hover(function() {
        $("#block1").slideToggle("slow");
    }, function(){
        $("#block1").slideToggle("slow");
    });
    $("#two").hover(function() {
        $("#block2").slideToggle("slow");
    }, function(){
         $("#block2").slideToggle("slow");
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T13:11:11.890

实际上，您的代码正在运行。如果你移过右边的盒子，你就会`Blabla2`在那里。问题是左边的 div`Blabla`是隐藏的，所以`Blabla2`浮动到最左边，而不是在`#two`. 您需要为此更改 CSS。

# c++ - 在不同类型的样本类型之间转换

> ID：15862712
> 
> 赞同：1
> 
> 时间：2013-04-07T13:06:05.437
> 
> 标签：c++, signal-processing, template-meta-programming, typeconverter

我想使用模板在不同的样本类型之间进行转换

```
template<class T,class U>
void convert(const T* source, U* dest, size_t n)
    {
    do
        {
        double G=double(max(*dest))/max(*source);
        T diff=max(*source) - min(*source);
        *dest=U(makeUnsigned(*source - min(*source))*G/makeUnsigned(diff)
              +makeUnsigned(max(*source) - *source)*double(min(*dest))/makeUnsigned(diff));

        ++dest;
        ++source;
        --n;
        }
    while(n!=0);
    } 
```

现在，我想要一个自动生成的矩阵，这样我就可以

```
convert[from][to](source,dest,n); 
```

其中每个元素都指向正确的版本。我知道我必须在这里转换函数指针（每个元素都需要指向函数的指针 const void*,void* size_t 无论如何都是等价的）。

我可以这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T13:20:01.867

首先，这样写：

```
template<typename T, typename U>
U convert( T const& src ); 
```

因为其他一切都应该用模板元编程来编写。这样做的好处是，如果需要，您可以专业化您的`convert<int, double>`和您的。`convert<std::string, int>`

接下来，写这个：

```
template<typename T, typename U>
void convert_buffer( T const* src, U* dest, size_t n ); 
```

`convert`它只是在循环中调用上面。我把它分成两个函数，因为可能不统一的代码进入`convert`，并且调用一个其主体可见的函数基本上是零开销。

然后写这个：

```
typedef void(*blind_converter)(void const*, void*, size_t);
template<typename T, typename U>
void convert_blind_buffer( void const* src, void* dest, size_t n ) {
  return convert_buffer( reinterpret_cast<T const*>(src), reinterpret_cast<U*>(dest), n );
} 
```

它封装了转换，并且不需要您进行理论上无效的指针类型转换。它是“转换盲”缓冲区 - 盲，因为它需要`void*`s。

接下来，我们不想手动维护您的 NxN 数组。用于存储您的有序类型列表的类型：

```
template<typename... Ts>
struct type_list {}; 
```

然后我们编写一些元编程来构建 NxN 数组：

```
template<typename Src, typename DestList>
struct make_convert_one_way;
template<typename Src, typename... Ds>
struct make_convert_one_way< Src, type_list<Ds...> > {
  std::array< blind_converter, sizeof...(Ds) > operator()() const {
    return { convert_blind_buffer< Src, Ds >... };
  }
};

template<typename list>
struct make_convert_array;

template<typename... Ts>
struct make_convert_array< type_list<Ts...> > {
  std::array< std::array<blind_converter, sizeof...(Ts) >, sizeof...(Ts) > operator()() const {
    return { make_convert_one_way< Ts, type_list<Ts...> >... };
  }
};

typedef type_list< int, char, double > my_list;
auto convert_array = make_convert_array<my_list>()(); 
```

或类似的规定。

如果您的 source 和 dest 类型不统一，则必须将上面的内容修改为采用两个`type_list`s，但从根本上来说并没有什么困难。

下一个有用的东西是从一个类型映射到上述数组中的索引的能力，因为维护它应该是编译器的工作。

```
template<typename T, typename List, typename=void>
struct index_of;
template<typename T, typename T0, typename... Ts>
struct index_of<T, type_list<T0, Ts...>, typename std::enable_if<
  std::is_same<T, T0>::value
>::type >: std::integral_constant< std::size_t, 0 > {};
template<typename T, typename T0, typename... Ts>
struct index_of<T, type_list<T0, Ts...>, typename std::enable_if<
  !std::is_same<T, T0>::value
>::type >: std::integral_constant< std::size_t, index_of<T, type_list<Ts...>::value+1 > {}; 
```

它可以让你这样做：

```
static_assert( index_of< int, my_list >::value == 0, "all is well!" ); 
```

现在，你可能想用某种类型的敷料把它包起来。策略可能如下所示：

```
template<typename List>
struct EnumDressing;
template<typename... Ts>
struct EnumDressing<type_list<Ts...>> {
  enum type {
    e_begin = 0,
    e_end = sizeof...(Ts),
  };
  template<typename T>
  static constexpr type value() {
    return static_cast<type>( index_of<T, type_list<Ts...> >::value );
  }
}; 
```

其中我们有`EnumDressing<my_list>::type`一个表示类型整数名称的 an`enum`类型，它的值可以通过`EnumDressing<my_list>::value<int>()`. `typedef`自然地你用s清理它：

```
typedef EnumDressing<my_list> Types;
typedef Types::type eType;

struct typed_array {
  eType type;
  void* buff;
  size_t n;
};
void do_convert( typed_array src, typed_array dst) {
  Assert(src.n == dst.n);
  convert_array[ src.type ][ dst.type ]( src.buff, dst.buff, std::min( src.n, dst.n ) );
}
template<typename T, size_t N>
typed_array make_typed_array( T (&arr)[N] ) {
  return { Types::value<T>(), reinterpret_cast<void*>( &arr[0] ), N };
}

int main() {
  double d[100];
  int i[100];
  do_convert( make_typed_array( d ), make_typed_array( i ) );
} 
```

自然的实际用例将创建与使用分开`typed_array`。

# android - 与 2 个 Android 设备的 TCP 连接

> ID：15862713
> 
> 赞同：2
> 
> 时间：2013-04-07T13:06:05.583
> 
> 标签：android, tcp

我想让一个 Android 设备成为一个可以创建 HotSpot 的服务器，当另一个 Android 设备连接到该 HotSpot 时，它可以通过 TCP 连接与服务器通信。
创建 HotSpot 并连接到它工作正常，但我无法通过 TCP 连接。我正在尝试通过连接到 HotSpot 后获得的 IP 进行连接：

```
WifiManager wifiManager = (WifiManager) getSystemService(WIFI_SERVICE);
WifiInfo wifiInfo = wifiManager.getConnectionInfo();
int ip = wifiInfo.getIpAddress(); 
```

但是服务器和客户端等待套接字连接，所以也许这个IP是错误的？如果它是错误的，我怎样才能获得正确的 IP 以通过 TCP 连接？

这是客户端的代码：

```
public class LoginActivity extends Activity {

    private static final String AP_NAME = "\"MobileEduPlatform\"";
    private static final String TAG = "LoginActivity";

    @Override
    protected void onCreate(Bundle savedInstanceState) {        
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_login);
        connectToHS();
    }

    public void connectToHS(){
        WifiManager wifi = (WifiManager) getSystemService(Context.WIFI_SERVICE);
        wifi.disconnect();
        wifi.enableNetwork(configureNetwork(), true);
    }

    public int configureNetwork(){
        WifiManager wifi = (WifiManager) getSystemService(Context.WIFI_SERVICE);
        WifiConfiguration config = new WifiConfiguration();
        config.status = WifiConfiguration.Status.ENABLED;
        config.allowedAuthAlgorithms.set(WifiConfiguration.AuthAlgorithm.OPEN);
        config.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.NONE);
        config.SSID = AP_NAME;
        int id =  wifi.addNetwork(config);
        wifi.saveConfiguration();
        wifi.enableNetwork(id, true);
        return id;
    }

    public void onClick2(View view){
        String otherIP = "";        
        String ip = getIpAddr();        
        new TCPClient(this).execute(ip);  
    }

    public String getIpAddr() {
           WifiManager wifiManager = (WifiManager) getSystemService(WIFI_SERVICE);
           WifiInfo wifiInfo = wifiManager.getConnectionInfo();
           int ip = wifiInfo.getIpAddress();

           String ipString = String.format(
            "%d.%d.%d.%d",
           (ip & 0xff),
           (ip >> 8 & 0xff),
           (ip >> 16 & 0xff),
           (ip >> 24 & 0xff));

           return ipString;
    }
}

public class TCPClient extends AsyncTask<String, Void, Boolean> {
    private int TCP_SERVER_PORT = 55000;

    @Override
    protected Boolean doInBackground(String... arg0) {
        runTcpClient(arg0[0]);
        return true;
    }   
    private void runTcpClient(String ip) {

        try {
            Socket s = new Socket(ip, TCP_SERVER_PORT);
            BufferedReader in = new BufferedReader(new InputStreamReader(s.getInputStream()));
            BufferedWriter out = new BufferedWriter(new OutputStreamWriter(s.getOutputStream()));

            String outMsg = "TCP connecting to " + TCP_SERVER_PORT + System.getProperty("line.separator"); 
            out.write(outMsg);
            out.flush();

            String inMsg = in.readLine() + System.getProperty("line.separator");
            s.close();

        } catch (UnknownHostException e) {
            e.printStackTrace();

        } catch (IOException e) {
            e.printStackTrace();

        } 
    }
} 
```

和服务器：

```
public class WifiAPActivity extends Activity {
    private boolean wasAPEnabled = false;
    private static WifiAP wifiAp;
    private WifiManager wifi;
    private static Button btnWifiToggle;

    @Override
    protected void onCreate(Bundle savedInstanceState) {        
        super.onCreate(savedInstanceState);
        setContentView(R.layout.wifi);

        btnWifiToggle = (Button) findViewById(R.id.btnWifiToggle);
        wifiAp = new WifiAP();
        wifi = (WifiManager) getSystemService(Context.WIFI_SERVICE);

        btnWifiToggle.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                wifiAp.toggleWiFiAP(wifi, WifiAPActivity.this);
            }
        });

        getWindow().addFlags(WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD|WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON|WindowManager.LayoutParams.FLAG_DIM_BEHIND);       
    }

    public void onClick(View view){
        new TCPServer2(this).execute("");
    }
}

public class TCPServer2 extends AsyncTask<String, Void, Boolean>{
    private Exception exception;
    private int TCP_SERVER_PORT = 55000;

    protected Boolean doInBackground(String... urls) {
        runTcpServer();
        return true;            
    }

    private void runTcpServer() {       
        ServerSocket ss = null;

        try {
            ss = new ServerSocket(TCP_SERVER_PORT);
            Socket s = ss.accept();

            BufferedReader in = new BufferedReader(new InputStreamReader(s.getInputStream()));
            BufferedWriter out = new BufferedWriter(new OutputStreamWriter(s.getOutputStream()));
            String incomingMsg = in.readLine() + System.getProperty("line.separator");

            String outgoingMsg = "goodbye from port " + TCP_SERVER_PORT + System.getProperty("line.separator");
            out.write(outgoingMsg);
            out.flush();

            s.close();

        } catch (InterruptedIOException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();

        } finally {
            if (ss != null) {
                try {
                    ss.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }
    }
} 
```

# c# - 如何自定义 Tesseract 忽略噪声？

> ID：15862715
> 
> 赞同：5
> 
> 时间：2013-04-07T13:06:18.280
> 
> 标签：c#, opencv, character, ocr, tesseract

我有这样的图像（白色背景和黑色文本）。如果没有噪音（如你所见：数字线的顶部和底部有很多噪音），Tesseract 可以很好地识别数字。

但是当有噪音时，Tesseract 会尝试将其识别为数字并在结果中添加更多数字。这真的很糟糕。如何使 Tesseract 忽略噪声？我无法制作预处理图像以使其更具对比度或清晰的文本。这没有任何帮助。

如果某些工具可以仅突出显示字符串行。这对 Tesseract 来说是非常好的输入。请帮我。谢谢大家。

![在此处输入图像描述](https://i.stack.imgur.com/w9lUP.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T13:43:55.523

你应该尝试[腐蚀和膨胀](http://docs.opencv.org/doc/tutorials/imgproc/erosion_dilatation/erosion_dilatation.html)：

> 最基本的形态学操作有两种：腐蚀和膨胀。它们具有广泛的用途，即：
> 
> 去除噪音
> 
> ...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-07T13:45:11.170

您可以尝试对二进制图像进行下采样并再次对其进行采样（`pyrDown`和`PyrUp`），或者您可以尝试`smooth`使用高斯模糊对图像进行采样。而且，正如已经建议的那样，`erode`还有`dilate`你的形象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T15:12:49.850

我看到您的问题的 3 个解决方案：

1.  正如已经建议的那样 - 尝试使用`erode`和`dilate`或某种模糊。这是最简单的解决方案。
2.  找到所有轮廓（`findContours`函数），然后删除面积小于某个值的所有轮廓（尝试不同的值，你应该很快找到正确的值）。请注意，该值可能不是恒定的 - 例如，您可以尝试使用 80% 的平均轮廓区域（只需添加所有轮廓区域，将其除以轮廓数量并乘以 0.8）。
3.  找到所有轮廓。创建一维整数数组，长度等于图像高度。用零填充数组。现在对于每个轮廓：
    I. 找到顶部和底部点（y 坐标值最大和最小值的点）。让我们将此点命名为`T`和`B`。
    二、`B.y`将索引在和之间的数组的所有元素加一`T.y`。（因此，如果 B = (1, 4) 且 T = (3, 11) 则将 1 添加到数组 [4]、数组 [5]、数组 [6] ...、数组 [11]）。
    找到数组的最大元素。让我们命名这个值`v`。所有`B.y <= v <= T.y`应该是字母的轮廓，其他轮廓 - 噪音。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-07-27T08:34:58.177

您可以使用图像处理技术（腐蚀和扩张等形态学操作）轻松去除这些噪声，您可以选择 opencv 进行此操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-07T16:07:38.803

做连接组件标记....即斑点计数....所有剂量噪声永远无法匹配数字的大小....使用形态学技术，数字也会被修改...标记图像...计数每个标记区域中的像素数并设置一个阈值（您可以轻松设置，因为您只有数字和噪声）...cvblob 是用 C++ 编写的库，可在代码 google 上找到...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-02-07T23:23:24.677

我有类似的问题：小噪音是 tesseract 失败的原因。我不能使用 open-cv，因为我在 android 上开发了一些功能，而 open-cv 是不需要的，因为它很大。我不知道这个解决方案是否很好，但这就是我所做的。

我在图像中找到了所有黑色区域（我添加到自己的区域集的每个区域的点）。然后，我检查该区域中的点数是否大于某个阈值，例如 10、25 和 50。如果为真，我将该区域的所有点设为白色。

# php - 上传csv并解析内容到mysql

> ID：15862721
> 
> 赞同：0
> 
> 时间：2013-04-07T13:07:15.137
> 
> 标签：php, mysql, csv

我想上传一个 csv 文件，而不是显示列的内容。比我想为这些列分配一个 mysql 表和它的列以将内容上传到数据库。

```
**CSV -> Upload (HTML Form)**

**show CSV columns like**

           | select table and show columns in select combo   
-----------------------------------------------------------
id         | dropdown with mysql tabel columns  
-----------------------------------------------------------
name       | dropdown with mysql tabel columns
-----------------------------------------------------------
address    | dropdown with mysql tabel columns 
```

上传到mysql

没有太多经验我想知道：必须先将 CSV 上传到服务器还是我可以处理流程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T13:11:56.597

这是它的代码：

```
$host="hostname"; // Host name
$username="username"; // Mysql username
$password="password"; // Mysql password
$db_name = "database_name"; // Database name
$tbl_name = "table_name"; // Table name

// Connect to server and select database.
$con = mysql_connect("$host", "$username", "$password")or die("cannot connect");
mysql_select_db("$db_name")or die("cannot select DB");

if ($_FILES[file][size] > 0) { 

//get the csv file 
$file = $_FILES[file][tmp_name];
$handle = fopen($file,"r"); 
$count = 0;

//loop through the csv file and insert into database 
//this loop ignores the first row of CSV file as they are the headers
$flag = true;
do {           
        if ($data[0]) { 
            $count = $count + 1; 
            if($flag)
            {
                $flag=false;
                continue;
            }
            else
            {           
                mysql_query("INSERT INTO $tbl_name (email,password) VALUES 
                    ( 
                        '".addslashes($data[0])."', //CSV equivalent of id
                        '".addslashes($data[1])."', //CSV equivalent of name
                        '".addslashes($data[2])."', //CSV equivalent of address
                    ) 
                ");
        }
    } 
} while ($data = fgetcsv($handle,10000,",","'")); 
```

如果这对您有帮助，请投票并标记为答案。

# java - 这是正确的排序方法吗？

> ID：15862722
> 
> 赞同：0
> 
> 时间：2013-04-07T13:07:24.753
> 
> 标签：java, arrays, sorting

这是对 ArrayList 进行排序的正确方法吗？问题是列表没有排序。

```
out = new StringTokenizer(input.toString());
n = (out.countTokens());
for (int i = 0; i < n; i++) {
    String[] words = { out.nextToken().toString() };
    final List<String> wordList = Arrays.asList(words);
    Collections.sort(wordList);
    System.out.println(wordList.toString());
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T13:10:07.057

您的每个`words[]`数组都由一个字符串组成，该字符串从您的 StringTokenizer 的下一个标记中获得。而且您正在按照标记化的确切顺序进行迭代。所以是的，你的输出***不会***被排序。我想你想做这样的事情：

```
out = new StringTokenizer(input.toString());
int count = out.countTokens():
List<String> wordList = new ArrayList<String>(count);
for(int i = 0; i < count; i++) {
    wordList.add(out.nextToken());
}
Collections.sort(wordList); 
```

***但是***，不要使用标记器类，它的遗产。以下代码将为您提供更好的服务：

```
List<String> wordList = Arrays.asList(input.split("\\s"));
Collections.sort(wordList); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T13:09:12.590

`out.nextToken().toString()`给你一串。我想你的数组长度应该是 1。即使你把它放到一个循环中，你在每个循环中排序，你必须在循环外排序。

```
StringTokenizer out = new StringTokenizer( input.toString());
List<String> wordList = new ArrayList< String >();
while( out.hasMoreTokens()) {
    wordList.add( out.nextToken());
}
Collections.sort( wordList );
System.out.println(wordList.toString()); 
```

# php - 错误说不支持 php JSON_encode

> ID：15862724
> 
> 赞同：0
> 
> 时间：2013-04-07T13:07:58.220
> 
> 标签：php, android, json

遇到错误，说`json_encode not supported by web server`。

这是代码：

```
<?php

require_once('db_login.php');
$con=mysql_connect($db_host,$db_user,$db_password);
if(!$con)
    die("Could not connect to database");
else echo "Connected to the server" ;
if(mysql_select_db($db_database,$con))
echo"Connected to database";
else
{echo "Unable to select database",mysql_error();}

$user=$_POST['login1'];
$passwd=$_POST['login2'];

//$sql=mysql_query("INSERT INTO temp (user,password)VALUES('user','$passwd')");

$sql=mysql_query("select * from appusers where username='$user'");

if (!$sql) die ("Database access failed: " . mysql_error());

else
{
echo("Successful");
print(json_encode($sql));
}
?> 
```

该代码用于将用户名和密码传递给 android 应用程序。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T14:55:25.513

从 PHP 5.2.0 版开始，JSON 支持是 PHP Core 的一部分。如果您有该版本或更高版本，那么您的 PHP 是使用`--disable-json`. 没有它重新编译。

如果您有 5.2.0 之前的版本，则需要安装 PECL JSON 库。

# css - 为什么@font-face 不起作用？

> ID：15862726
> 
> 赞同：0
> 
> 时间：2013-04-07T13:08:45.457
> 
> 标签：css, fonts, font-face, custom-font

我正在尝试`@font-face`在我正在设计的网站上使用自定义字体。我不知道为什么这次它不起作用。我以前用过没有问题。

这是我的代码（不是来自实际站点，而是我用来测试问题的简化版本）：

html

```
<!DOCTYPE html>
<html>
<head>
<title>My Page</title>
<link rel="stylesheet" type="text/css" href="./css/stylesheet.css">
</head>
<body>
<p>Loremm ipsum</p>
</body>
</html> 
```

css（我把重置留在里面）

```
/*--------------------------*/
/*----------RESET-----------*/
/*--------------------------*/

/* http://meyerweb.com/eric/tools/css/reset/ 
   v2.0 | 20110126
   License: none (public domain)
*/

html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
b, u, i, center,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td,
article, aside, canvas, details, embed, 
figure, figcaption, footer, header, hgroup, 
menu, nav, output, ruby, section, summary,
time, mark, audio, video {
    margin: 0;
    padding: 0;
    border: 0;
    font-size: 100%;
    font: inherit;
    vertical-align: baseline;
    font-family:myfont;
}
/* HTML5 display-role reset for older browsers */
article, aside, details, figcaption, figure, 
footer, header, hgroup, menu, nav, section {
    display: block;
}
body {
    line-height: 1;
}
ol, ul {
    list-style: none;
}
blockquote, q {
    quotes: none;
}
blockquote:before, blockquote:after,
q:before, q:after {
    content: '';
    content: none;
}
table {
    border-collapse: collapse;
    border-spacing: 0;
}

/*-------------------------*/
/*-----------MAIN----------*/
/*-------------------------*/

@font-face {
    font-family:myfont;
    src:url('./fonts/myfont.ttf'),
        url('./fonts/myfont.eot');
} 
```

我的 index.html 在`html/`

我的字体文件在`html/fonts/`

我的 CSS 在`html/css/`

任何人都可以看到问题吗？

我已经在 chrome 和 firefox 中对此进行了测试，它在我的计算机上进行编辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T13:31:28.993

我将猜测您的 src 与您的 CSS 文件位置相关，而您的 './' 并没有让您进入正确的目录。为 src 提供字体的绝对地址，并确保它以这种方式工作。

我也看不到您将字体系列应用于任何元素的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T13:34:08.537

我一直对@font 有问题。希望这会对您有所帮助。

style.css（获取 ota、woff、ttf 和 svg 字体类型）。确保您可以通过提供给 HTML 的说明找到字体。例如，如果它位于 html/fonts/ 中，那么 url 应该是 fonts/blah.eot。

```
 @font-face {
     font-family:'Carrosserie-Medium';
     src: url('../webfonts/FAFC3_0.eot');
     src: url('../webfonts/FAFC3_0.eot?#iefix') format('embedded-opentype'), url('../webfonts/FAFC3_0.woff') format('woff'), url('../webfonts/FAFC3_0.ttf') format('truetype'), url('../webfonts/FAFC3_0.svg#wf') format('svg');
 }
 @font-face {
     font-family:'Carrosserie-Thin';
     src: url('../webfonts/FAFC3_1.eot');
     src: url('../webfonts/FAFC3_1.eot?#iefix') format('embedded-opentype'), url('../webfonts/FAFC3_1.woff') format('woff'), url('../webfonts/FAFC3_1.ttf') format('truetype'), url('../webfonts/FAFC3_1.svg#wf') format('svg');
 }
.Carrosserie-Medium {
    font-family: Carrosserie-Medium;
    font-weight: normal;
    font-style: normal;
}
.Carrosserie-Thin {
    font-family: Carrosserie-Thin;
    font-weight: normal;
    font-style: normal;
} 
```

实施它

```
h2#tagline {font-size:30px;font-family:'Carrosserie-Thin', sans-serif; } 
```

HTML

```
<h2 id="tagline">Try this.</h2> 
```

# php - Mysql没有返回正确的结果

> ID：15862728
> 
> 赞同：-2
> 
> 时间：2013-04-07T13:08:51.150
> 
> 标签：php, mysql, arrays, select, pdo

我正在尝试检索所有处于活动状态且属于第 1 类的帖子。应该有 46 个帖子，但它输出 4 并且帖子来自第 12 类而不是第 1 类。

```
$cat_id = 1;
$limit = 12;
// Count posts
$count_posts = count_cat_posts($cat_id); 
```

这是 count_posts 函数

```
// Count category posts
    function count_cat_posts($cat_id){

        $stmt = $dbh->prepare("SELECT * FROM mjbox_posts WHERE post_active = 1 AND cat_id = ?");
        $stmt->bindParam(1,$cat_id);
        $stmt->execute();

        $rows = $stmt->fetchAll();
        $count_posts = count($rows);
        return $count_posts;
    } 
```

我将所有帖子存储在一个数组中

```
// Retrieve all active posts in this category and order by lastest first
    $resultarray = retrieve_cat_posts($cat_id, $offset, $limit); 
```

这是我正在使用的功能。

```
// Retrieve active posts
    function retrieve_cat_posts($cat_id, $offset, $limit){

        // Get all the posts
        $stmt = $dbh->prepare(" SELECT  p.post_id, post_year, post_desc, post_title, post_date, img_file_name, p.cat_id
                                FROM    mjbox_posts p
                                JOIN    mjbox_images i
                                ON      i.post_id = p.post_id
                                        AND i.cat_id = p.cat_id
                                        AND i.img_is_thumb = 1
                                        AND post_active = 1
                                        AND p.cat_id = ?
                                ORDER BY post_date
                                DESC
                                LIMIT ?,?");
        $stmt->bindParam(1, $cat_id, PDO::PARAM_INT);
        $stmt->bindParam(2, $offset, PDO::PARAM_INT);
        $stmt->bindParam(3, $limit, PDO::PARAM_INT);                        
        $stmt->execute();

        while($row = $stmt->fetch(PDO::FETCH_ASSOC)) {

                $resultarray[] = $row;
        }

        return $resultarray;
    } 
```

我没有添加偏移变量，但它是正确的。

我输出这样的帖子：

```
foreach($resultarray AS $value){
                    $filename = substr($value['img_file_name'],9);
                    $cat_id = $value['cat_id'];
                        // Wraps image, title, category
                        echo '<div class="itemWrap">';
                        // Item Image
                        echo '<a href="post.php?post_id='.$value['post_id'].'" class="itemImageLink"><img class="itemImage" src="create_thumb.func.php?path=img/fs/'.$filename.'&save=0&width=160&height=120" alt="'. stripslashes(stripslashes($value['post_title'])) .'"></a>';
                        // Item Title
                        echo '<div class="itemTitle"><a href="post.php?post_id='.$value['post_id'].'" class="itemTitleLink">' .stripslashes(stripslashes($value['post_title'])). '</a></div>';
                        // Item Category
                        echo '<div class="itemCat"><a href="cat.php?cat_id='.$cat_id.'">'. $cat_name = get_cat_name($cat_id) .'</a></div>';
                        // close itemWrap
                        echo '</div>';
                } 
```

当我在 mysql 查询窗口中运行它时，该查询有效。那么，为什么它会从类别 12 中获取帖子`$cat_id = 1`呢？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-07T13:45:35.960

在 SELECT 查询中使用 JOIN 而不是 LEFT JOIN 需要至少一个图像存在 int mjbox_images 与所述标准匹配。

还有这条线

```
echo '<div class="itemCat"><a href="cat.php?cat_id='.$cat_id.'">'. $cat_name = get_cat_name($cat_id) .'</a></div>'; 
```

有点奇怪，在 echo 语句中设置变量值。

# php - Strtotime 和 PHP - 格式化 PDO 查询？

> ID：15862729
> 
> 赞同：-2
> 
> 时间：2013-04-07T13:08:56.010
> 
> 标签：php, mysql, database, pdo

我一直在学习使用 PDO 和 PHP 的基础知识，并且我的查询有效。这是代码：

```
<?php
error_reporting(E_ALL);
ini_set('display_errors', '1');
?>

<?php
$hostname = "localhost";
$username = "test";
$password = "test";

try {
    $db = new PDO("mysql:host=$hostname;dbname=goodsdb", $username, $password);

    //echo "Connected to database"; // check for connection

    $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_WARNING);

    $sql = "Select * from items";
    $result = $db->query($sql);
    foreach ($result as $row) {
        //echo $row["goods"]. "<br />";
    }

    $db = null; // close the database connection

}
catch(PDOException $e) {
    echo $e->getMessage();
}
?>
<p>
<?php
echo $row["goods"];
?>
</p>
<p>
<?php
echo $row["auctiondate"];
?>
</p>
</div>
<?php require 'footer.php' ?> 
```

它工作，到目前为止没有错误。请注意，我已经在 foreach 之后注释掉了 echo 部分，并使用 php 分隔符对行进行了回显——这是一种好的做法，还是应该取消注释？

但是，如何在我的数据库中获取拍卖日期字段以将数据显示为：

2013 年 4 月 6 日，下午 12:00

而不是

2013-06-06 12:00:00（在数据库中存储为 DATETIME）

我不确定是使用 date 还是 strtotime 来显示它，并希望帮助我正确格式化日期。

这个项目是一个简单的网站，用于显示来自 PDO/MySQL 仓库的数据库中的数据——基本上是一个简单的测试站点。

如果这有帮助，我正在使用 PHP 5.4.4，并在 OS X 10.8.3 Mountain Lion 上使用 MAMP。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T13:24:21.863

```
$mydate = date("jS M Y, g:ia", strtotime($datefrommysql)); 
```

有关日期格式，请参阅[http://www.php.net/manual/en/function.date.php](http://www.php.net/manual/en/function.date.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-07T13:30:32.983

在 php 中使用日期格式功能或使用 mysql date_format 函数，如下所示：

```
Select *,date_format(auctiondate,'%D %M %Y, %h:%i%p' ) as 'mod_date' from items 
```

这将完全返回`6th April 2013, 12:00pm`现场`mod_date`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T13:37:01.710

由于您出于某种原因用 PDO 标记的问题（与日期格式无关），我将对您使用 PDO 的方式进行一些改进

```
<?php
error_reporting(E_ALL);
ini_set('display_errors', '1');

$hostname = "localhost";
$username = "test";
$password = "test";

$opt = array(PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION);
$db = new PDO("mysql:host=$hostname;dbname=goodsdb", $username, $password, $opt);

$sql = "Select * from items";
$result = $db->query($sql);
foreach ($result as $row) {
    //echo $row["goods"]. "<br />";
} 
```

这将是处理 PDO 错误的正确方法

# linq - 每页返回多个结果的语法

> ID：15862730
> 
> 赞同：0
> 
> 时间：2013-04-07T13:09:12.157
> 
> 标签：linq

我有这个返回结果的 linq 语句，我想添加每页显示多少项目的规范。我知道默认值是每页 10 个，我怎样才能将其更改为 40？

```
var _roster = DataCBase.StoredProcedures.GetUser<Users>(userID, r => new Users
        {
            Name = RosterColumnMap.Name(r),
            Email = RosterColumnMap.Email(r)
        }); 
```

**获取用户**

```
public virtual IEnumerable<T> GetUser<T>(int userId, Func<IDataRecord, T> modelBinder, int resultsPerPage = 10, int pageNumber = 1)
    {
        if (userId < 1)
            throw new NullReferenceException("The sectionId cannot be null, when retreiving an element");

        if (resultsPerPage < 1)
            resultsPerPage = 1;     // enforce bare minimum result set

        if (pageNumber < 1)
            pageNumber = 1;         // enforce one-based page numbering

        SqlCommand _command = new SqlCommand("dbo.GetUser");
        _command.CommandType = CommandType.StoredProcedure;
        _command.Parameters.Add(new SqlParameter { ParameterName = "userId", SqlDbType = SqlDbType.Int, Value = userId });
        _command.Parameters.Add(new SqlParameter { ParameterName = "resultsPerPage", SqlDbType = SqlDbType.Int, Value = resultsPerPage });
        _command.Parameters.Add(new SqlParameter { ParameterName = "pageNumber", SqlDbType = SqlDbType.Int, Value = pageNumber });

        return DbInstance.ExecuteAs<T>(_command, modelBinder);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T13:15:01.037

Linq 和实体框架都没有任何默认的“每页”记录数。但由于您的`GetUser`函数包含一个`resultsPerPage`参数，您可以这样做：

```
var _roster = DataCBase.StoredProcedures.GetUser<Users>(userID, r => new Users
    {
        Name = RosterColumnMap.Name(r),
        Email = RosterColumnMap.Email(r)
    }, 40); 
```

要限制 Linq 中的结果数量，请使用以下[`Enumerable.Take`](http://msdn.microsoft.com/en-us/library/bb503062.aspx)方法：

```
var _roster = DataCBase.StoredProcedures.GetUser<Users>(userID, r => new Users
    {
        Name = RosterColumnMap.Name(r),
        Email = RosterColumnMap.Email(r)
    }).Take(40); 
```

# javascript - 传递的数组的索引

> ID：15862733
> 
> 赞同：0
> 
> 时间：2013-04-07T13:09:19.393
> 
> 标签：javascript, arrays, object, object-literal

如何检索传递的数组的索引？我目前使用的解决方案也是发送索引，但这感觉不对。

[jsFiddle](http://jsfiddle.net/NECNL/)

```
var obj = {arr: [{x: 1, y: 2},{x: 3, y: 4},{x: 5, y: 6}]};

function myFunction(myObj)
{
    alert(myObj); // 5
    // alert(the index of the array that is passed); // 2
}

myFunction(obj.arr[2].x); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T13:12:01.590

没有真正的方法可以做你所要求的。JavaScript 纯粹是按值调用，这意味着在进行函数调用之前，参数会被*完全*评估。评估后剩下的就是最终值，并将其副本传递给函数。

您当然可以编写代码在一些相对全局的数组中搜索值，但是如果您可以简单地将数组索引传递给函数，那将浪费 CPU 周期。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T13:11:57.777

你可以使用`Array.indexOf` [jsfiddle](http://jsfiddle.net/NECNL/1/)

```
var obj = {arr: [{x: 1, y: 2},{x: 3, y: 4},{x: 5, y: 6}]};

function myFunction(myObj)
{
    alert(obj.arr.indexOf(myObj)); 
}

myFunction(obj.arr[2]); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-07T13:12:51.727

你不能这样做，因为数组或索引没有传递给函数，甚至对象。

从对象的`arr`属性中读取数组，然后从数组中读取对象，然后从该对象的`x`属性中读取值，并使用该值调用函数。

一旦进入函数，您就无法判断该值来自对象的属性，或者对象存储在数组中，或者数组又是对象中的属性。

# android - 如果用户卸载应用程序，他们是否会丢失应用内购买？

> ID：15862739
> 
> 赞同：3
> 
> 时间：2013-04-07T13:09:54.357
> 
> 标签：android

我正在考虑在应用计费中实施，而不是发布具有专业功能的单独应用。我想知道如果用户卸载或恢复出厂设置是否会丢失购买

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T13:15:28.663

如果您使用谷歌的应用内计费 api，则购买将绑定到用户的谷歌帐户。

这意味着，只要他们使用相同的帐户，他们就可以访问购买的功能

你可以在这里找到更多信息[http://developer.android.com/google/play/billing/api.html#purchase](http://developer.android.com/google/play/billing/api.html#purchase)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T13:15:13.260

应用程序与帐户紧密相关，可以在多个设备上多次安装。见这篇[文章](http://support.google.com/googleplay/bin/answer.py?hl=en&answer=113410)。

# css - CSS中的继承与OOP中的继承？

> ID：15862741
> 
> 赞同：4
> 
> 时间：2013-04-07T13:09:59.940
> 
> 标签：css, inheritance

有人知道如何在 CSS 中独立于元素结构使用继承的方法或工具吗？例子：

```
.bg_red {
  background: red; 
}

.bold {
  font-weight: bold;
}

.bg_red_and_bold {
  //this class should inherit all the properties of the above two classes
} 
```

我希望我的意思很清楚......

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T13:13:17.407

在 CSS 中你无法做到这一点，但由于你也在寻找工具，你可能会研究 CSS 预处理：

*   [较少的](http://lesscss.org/)
*   [SASS](http://sass-lang.com/)

它们`mixin`和`@extend`功能应该可以满足您的需求。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-07T13:13:35.197

正是因为这个原因，才能向元素添加多个类。

```
<div class="bg_red bold">The red and bold text</div> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-07T13:11:25.597

CSS中没有这样的东西。你唯一能做的就是：

```
.bg_red, .bg_red_and_bold  {
  background: red; 
}

.bold, .bg_red_and_bold  {
  font-weight: bold;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-07T13:12:35.670

CSS 不支持这一点。

考虑使用[LESS](http://lesscss.org)，它编译成 CSS 并支持 mixins：

```
.bg_red_and_bold {
   .bg_red();
   .bold();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-07T13:14:17.583

可能不是你想要的，但有聚合：

```
<div class="bg_red bold"... 
```

div 将“继承”两种样式的特征。

# android - 是否可以在 android 操作系统上运行简单的 python 游戏

> ID：15862745
> 
> 赞同：3
> 
> 时间：2013-04-07T13:10:28.330
> 
> 标签：android, python

我最近开始使用 python 学习编程，并且一直对 android 操作系统有浓厚的兴趣，并希望在我有更多经验时能用它做更多的事情。

我的平板电脑上安装了 SL4A 和 python。我花了很多时间试图弄清楚如何在我的平板电脑上运行用 python 编写的简单游戏。

例如，我做了一个简单的刽子手游戏作为作业：是否可以在我的平板电脑上运行它，如果可以，我需要做什么？

我在网上看到了很多与 python 和 android 相关的东西，但我发现很难找到一个简单的例子来说明如何将 python 与 android 一起使用。此外，与 android 设备相关的 python 的限制/最佳用途到底是什么？任何正确方向的帮助或指示将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T13:25:12.180

我知道 Kivi ( [http://kivy.org/](http://kivy.org/) )。走这条路可能会对你有所帮助。

# function - 为什么要在通话中将 ESP 保留在 EBP 中？

> ID：15862750
> 
> 赞同：0
> 
> 时间：2013-04-07T13:11:03.573
> 
> 标签：function, assembly, x86, callstack, cpu-registers

我正在阅读[Richard Blum的](http://www.amazon.com/Richard-Blum/e/B001IODOO6/ref=ntt_athr_dp_pel_1)[专业汇编语言](https://rads.stackoverflow.com/amzn/click/com/0764579010)，当您输入呼叫时，您应该将寄存器的值复制到，他还提供了以下模板：`ESP``EBP`

```
function_label:
    pushl %ebp
    movl %esp, %ebp
    < normal function code goes here>
    movl %ebp, %esp
    popl %ebp
    ret 
```

我不明白为什么这是必要的。当你在函数中 push 一些东西时，你显然打算把它弹回来，从而恢复`ESP`到它的原始值。

那么为什么要有这个模板呢？
无论如何，寄存器有什么用`EBP`？

我显然错过了一些东西，但它是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T14:57:07.277

> 当你在函数中 push 一些东西时，你显然打算把它弹回来

这只是使用堆栈的部分原因。更常见的用法是代码片段中缺少的用法，即存储局部变量。设置 EBP 后看到的下一个常见代码是对 ESP 的减法，相当于存储局部变量所需的空间量。这当然也很容易平衡，只需在函数结尾处添加相同的数量即可。当代码还使用 C99 可变长度数组或非标准但通常可用的 _alloca() 函数时，它会变得更加困难。能够从 EBP 恢复 ESP 使这变得简单。

也许更重要的是，*没有*必要像这样设置堆栈框架。大多数 x86 编译器都支持称为“帧指针省略”的优化选项。在 MSVC 上使用 GCC 的 -fomit-frame-pointer 和 /Oy 打开。这使得 EBP 寄存器可用于一般用途，这在 x86 上非常有用，因为它缺乏 cpu 寄存器。

但是，这种优化有一个非常严重的缺点。如果没有 EBP 寄存器指向堆栈帧的开头，执行堆栈遍历将变得非常困难。当您需要*调试*代码时，这很重要。堆栈跟踪对于找出您的代码如何最终崩溃非常重要。当您从客户那里获得崩溃的“核心转储”时，这是非常宝贵的。如此有价值，微软同意[关闭](http://blogs.msdn.com/b/larryosterman/archive/2007/03/12/fpo.aspx)Windows 二进制文件的优化，让他们的客户有机会诊断崩溃。

# javascript - JS中的^=运算符是什么意思

> ID：15862751
> 
> 赞同：5
> 
> 时间：2013-04-07T13:11:07.797
> 
> 标签：javascript, operators

我试图在 JS 上找出这个运算符 -

```
'string' ^= 'string'; 
```

但是我找不到蚂蚁信息。这是比较还是分配？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-07T13:20:22.763

`myVar ^= 5`是一样的`myVar = myVar ^ 5`。`^`是位运算`xor`符

假设`myVar`设置为 2

*   二进制的 5 是：101
*   2的二进制是：010

异“或”检查两个数字的第一位，看到 1,0 并返回 1，然后看到 0,1 并返回 1，看到 1,0 并返回 1。

因此 111 转换回十进制是 7

`5^2`7也是

```
var myVar = 2;
myVar ^= 5;
alert(myVar); // 7 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-07T13:16:42.223

`^`(caret) 是**按位 XOR**（异或）运算符。就像与更常见的运算符组合一样`+=`，`a ^= b`相当于`a = a^b`.

有关更多详细信息，请参阅[Mozilla 的 Javascript 文档。](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Bitwise_Operators)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-07T13:12:53.527

`x ^= y`是[按位 XOR](http://en.wikipedia.org/wiki/Bitwise_operation#XOR)和简写`x = x^y`- 因此在技术上是回答您问题的“作业”。准确地说，单个运算符“^”表示按位异或。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-07T13:20:36.540

正如 d'alar'cop（以及其他几个人）已经指出的那样，这意味着所谓`XOR`的 . 我总是讨厌阅读维基百科的解释，所以我要在这里放另一个解释：

“异或”的意思是“异或”。那是什么？先举个例子：

```
11000110 -- random byte
10010100
--------- ^ -- XOR
01010010 
```

XOR 是一些按位运算，如果两个位中的一个为 1，另一个为 0，则返回两个。如果它们都是 1，则它是“和”，而不是“异或”（“正常或”将允许两个 1）。

# php - PHP获取多维数组中值的排名

> ID：15862756
> 
> 赞同：0
> 
> 时间：2013-04-07T13:11:48.947
> 
> 标签：php, arrays, multidimensional-array

我的数组结构如下 -

```
Array
(
    [0] => Array
        (
            [points] => 10
            [details] => Array
                    (
                        [name] => Team A
                        [rank] => 
                    )
        )
    [1] => Array
        (
            [points] => 10
            [details] => Array
                    (
                        [name] => Team B
                        [rank] => 
                    )
        )
    [2] => Array
        (
            [points] => 8
            [details] => Array
                    (
                        [name] => Team C
                        [rank] => 
                    )
        )
    [3] => Array
        (
            [points] => 6
            [details] => Array
                    (
                        [name] => Team D
                        [rank] => 
                    )
        )
) 
```

现在我希望结果数组是 -

```
Array
(
    [0] => Array
        (
            [points] => 10
            [details] => Array
                    (
                        [name] => Team A
                        [rank] => 1
                    )
        )
    [1] => Array
        (
            [points] => 10
            [details] => Array
                    (
                        [name] => Team B
                        [rank] => 1
                    )
        )
    [2] => Array
        (
            [points] => 8
            [details] => Array
                    (
                        [name] => Team C
                        [rank] => 2
                    )
        )
    [3] => Array
        (
            [points] => 6
            [details] => Array
                    (
                        [name] => Team D
                        [rank] => 3
                    )
        )
) 
```

我怎样才能实现这个输出？我尝试遍历数组中的每个元素并比较点，但我没有发现真正的效果。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T14:14:33.650

有点蛮力，但它应该工作。

```
$array = array(
    array(
    "points" => 10,
    "details" => array(
        "name" => "Team A",
        "rank" => ""
    )
    ),
    array(
    "points" => 11,
    "details" => array(
        "name" => "Team B",
        "rank" => ""
    )
    ),
    array(
    "points" => 10,
    "details" => array(
        "name" => "Team A",
        "rank" => ""
    )
    ),
    array(
    "points" => 11,
    "details" => array(
        "name" => "Team B",
        "rank" => ""
    )
    )
);
$points = array();
foreach($array as $key => $arr){
    $points[] = $arr['points'];
}
asort($points);

foreach($points as $pkey => $point){
    foreach($array as $akey => $arr){
        if($point == $arr['points']){
            $array[$akey]['details']['rank'] = $pkey+1;
        }
    }
}

var_dump($array); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T13:45:09.943

如何创建另一个数组并在那里存储所需的结果

```
$array = array(
    array(
        "points" => 10,
        "details" => array(
            "name" => "Team A",
            "rank" => ""
        )
    ),
    array(
        "points" => 11,
        "details" => array(
            "name" => "Team B",
            "rank" => ""
        )
    )
);

$c = 0; // count identifier
$n = array(); // create new array

for ($i=0;$i<count($array);$i++){ // loop through each array
    foreach ($array[$i] as $value){ // loop through into sub arrays
        if (is_array($value)){
            $n[$i]['details'] = array(
                "name" => $value['name'],
                "rank" => $c
            );
            $c++;
        } else {
            $n[$i]['points'] = $value;
        }
    }
}

print_r($n); 
```

输出将是：

```
Array ( [0] => Array ( [points] => 10 [details] => Array ( [name] => Team A [rank] => 0 ) ) [1] => Array ( [points] => 11 [details] => Array ( [name] => Team B [rank] => 1 ) ) ) 
```

# android - Android中的蓝牙配对。连接丢失时调用的事件

> ID：15862759
> 
> 赞同：1
> 
> 时间：2013-04-07T13:11:58.323
> 
> 标签：android, bluetooth

我正在尝试将 android 应用程序与蓝牙设备配对，我需要知道当与此蓝牙设备的连接丢失时要调用哪个事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T13:44:01.003

您可以使用广播接收器并捕获 ACTION_ACL_DISCONNECTED 事件。有关详细信息，请参见此处： [如何以编程方式判断蓝牙设备是否已连接？(安卓 2.2)](https://stackoverflow.com/questions/4715865/how-to-programmatically-tell-if-a-bluetooth-device-is-connected-android-2-2)

# python - 没有 initscrip 名称控制台 - CX_freeze

> ID：15862761
> 
> 赞同：1
> 
> 时间：2013-04-07T13:12:07.463
> 
> 标签：python, cx-freeze

我一直在尝试让 cx_freeze 在 ubuntu 上运行，但是当我尝试运行“python setup.py build”时出现以下错误：cx_Freeze.freezer.ConfigError: no initscript named Console

我搜索了谷歌，我看到很多人都有这个问题，但我似乎无法找到解决方案。

我的 setup.py 代码如下：

```
from cx_Freeze import setup, Executable

setup( name = "hello world" ,
   version = "0.1" ,
   description = "Hello" ,
   executables = [Executable("hello.py")] ,
   ) 
```

我已将 setup.py 文件和 hello.py 放在同一个文件夹中。关于什么可以解决这个问题的任何想法？

```
running build
running build_exe
Traceback (most recent call last):
  File "setup.py", line 7, in <module>
    executables = [Executable("hello.py")] ,
  File "/usr/local/lib/python2.7/dist-packages/cx_Freeze-4.3.1-py2.7-linux-i686.egg    
  cx_Freeze/dist.py", line 365, in setup
    distutils.core.setup(**attrs)
  File "/usr/lib/python2.7/distutils/core.py", line 152, in setup
    dist.run_commands()
  File "/usr/lib/python2.7/distutils/dist.py", line 953, in run_commands
    self.run_command(cmd)
  File "/usr/lib/python2.7/distutils/dist.py", line 972, in run_command
    cmd_obj.run()
  File "/usr/lib/python2.7/distutils/command/build.py", line 128, in run
    self.run_command(cmd_name)
  File "/usr/lib/python2.7/distutils/cmd.py", line 326, in run_command
    self.distribution.run_command(command)
  File "/usr/lib/python2.7/distutils/dist.py", line 972, in run_command
    cmd_obj.run()
  File "/usr/local/lib/python2.7/dist-packages/cx_Freeze-4.3.1-py2.7-linux-i686.egg
  /cx_Freeze/dist.py", line 234, in run
    metadata = metadata)
  File "/usr/local/lib/python2.7/dist-packages/cx_Freeze-4.3.1-py2.7-linux-i686.egg
  /cx_Freeze/freezer.py", line 104, in __init__
    self._VerifyConfiguration()
  File "/usr/local/lib/python2.7/dist-packages/cx_Freeze-4.3.1-py2.7-linux-i686.egg
/cx_Freeze/freezer.py", line 466, in _VerifyConfiguration
    self._GetInitScriptFileName()
  File "/usr/local/lib/python2.7/dist-packages/cx_Freeze-4.3.1-py2.7-linux-i686.egg
/cx_Freeze/freezer.py", line 311, in _GetInitScriptFileName
    raise ConfigError("no initscript named %s", name)
cx_Freeze.freezer.ConfigError: no initscript named Console 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T02:55:33.200

对于我的安装，我遇到了同样的问题。看起来像未创建 initscripts 的符号链接，所以我手动创建它并且一切正常（将 cx_Freeze 版本更改为您自己的）：

```
cd /usr/local/lib/python2.7/dist-packages/
cd cx_Freeze-4.3.1-py2.7-linux-i686.egg
sudo ln -s -t cx_Freeze/ ../../cx_Freeze/initscripts/ 
```

PS：Ubuntu 12.10/量子，Python 2.7.3

# plsql - 是否有任何功能可以在查询结果中对组进行计数？

> ID：15862762
> 
> 赞同：0
> 
> 时间：2013-04-07T13:12:15.153
> 
> 标签：plsql

这是一个查询：

```
SELECT count(*) 
FROM Points 
WHERE i_id IN (1, 22, 579, 5887) AND i_requirement_id is not null 
GROUP BY i_requirement_id 
```

我得到了每组的需求计数。

我需要计算所有组的数量。

例如从下一个表

```
i_id     i_requirement_id
1         1022
22        1022
579       1059
5887      1022 
```

我得到 3 和 1 的结果。但我只需要得到 2 个，因为在表中我只有 2 组 i_requrement_id。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T13:24:42.257

也许沿着线的东西

```
SELECT COUNT(DISTINCT i_requirement_id)
FROM Points 
WHERE i_id IN (1, 22, 579, 5887) AND i_requirement_id is not null 
```

**distinct**子句允许您只计算不同的项目

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T15:00:20.967

为什么你不喜欢 Fabio 的解决方案？这已经足够好了。
第二种方法是使用解析函数。

```
SELECT 
  i_requirement_id, 
  count(*) as count_inside_group,
  count(i_requirement_id) over() as count_of_groups
FROM Points 
WHERE i_id IN (1, 22, 579, 5887) AND i_requirement_id is not null 
GROUP BY i_requirement_id 
```

[小提琴](http://www.sqlfiddle.com/#!4/54bd7/1)

# asp.net - asp.net 中的下拉列表控件分组

> ID：15862763
> 
> 赞同：0
> 
> 时间：2013-04-07T13:12:22.263
> 
> 标签：asp.net

我在 asp.net 页面中有 2 组下拉列表控件，我想在一组中创建一组，另一组作为一组。例如，有 15 个下拉列表表示内部下拉列表，其他 15 个下拉列表表示外部下拉列表。

# python - 将输出文件保存在与输入文件不同的位置

> ID：15862764
> 
> 赞同：0
> 
> 时间：2013-04-07T13:12:23.417
> 
> 标签：python, save

“Resample_management”获取输入文件，对其进行处理并将输出文件保存在与输入文件相同的位置。

```
Input=glob.glob("D:\Folder1\*tif")

for i in Input:
    arcpy.Resample_management(i, i+"_1000.tif", "1000 1000", "BILINEAR") 
```

我正在尝试将输出保存在与输入文件之一不同的目录中。我也试过下面的代码，但它没有工作：

```
Input=glob.glob("D:\Folder1\*tif")

for i in Input:
    arcpy.Resample_management(i, "D:\Folder2\i"+"_1000.tif", "1000 1000", "BILINEAR") 
```

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T13:26:03.877

如果`Resample_management()`按照您所说的进行，即在与输入文件相同的目录中创建输出文件，那么您有两个选择。

1.  将文件创建后移动到您想要的位置。

2.  修改`Resample_management()`使其不在与输入文件相同的目录中创建输出文件。

第二种选择可能由于各种原因不可行。

# scala - scala.swing.SimpleSwingApplication 的定期重绘

> ID：15862769
> 
> 赞同：2
> 
> 时间：2013-04-07T13:13:08.670
> 
> 标签：scala, scala-swing

如果我运行这个示例代码

```
class ExampleGUIElement extends Panel
{
  preferredSize = new Dimension(100, 100)
  val rand : Random = Random
  override def paintComponent(g: Graphics2D) = g.drawLine(rand.nextInt(10),rand.nextInt(10),rand.nextInt(90) + 10 ,rand.nextInt(90) + 10)
}

object GUITest extends SimpleSwingApplication  
{
  def top = new MainFrame
  {
    contents = new ExampleGUIElement
  }
} 
```

它显然只显示了最初绘制的一条线。如果我想要定期重绘，我通常只会在最外面的 JFrame 上创建一个调用重绘的 Timer。但是 SimpleSwingApplication 没有这个方法，至少我找不到它，而调用 top.repaint 什么也没做。那么你如何定期重新粉刷整个东西呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-26T22:43:51.163

我意识到这已经过时了，但是我将您的 Panel 提取到一个 val 中并添加了一个计时器来重新绘制它：

```
def top = new MainFrame
{
    val example = new ExampleGUIElement 
    contents = example
    val timer=new javax.swing.Timer(250, Swing.ActionListener(e =>
    { 
        example.repaint()
    }))
    timer.start()
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T14:20:12.150

考虑调用`peer`（`top`参见[`MainFrame`](http://www.scala-lang.org/api/current/index.html#scala.swing.MainFrame)），然后调用`repaint`它：

```
top.peer.repaint() 
```

另外，别忘了打电话`top.pack()`。

# jquery - 检查鼠标是否高于元素jQuery

> ID：15862776
> 
> 赞同：2
> 
> 时间：2013-04-07T13:13:55.003
> 
> 标签：jquery, hover, position, element, offset

我想检查鼠标当前是否在 div 的可见区域内。我知道我可以使用以下代码：

```
$("#div").is(":hover"); 
```

在 jQuery 中。

但是，可能还有另一个 div 部分覆盖 my `#div`，因此悬停不适用于我的情况。

我需要检查鼠标是否在一个元素上方，不管它上面的任何元素（防止悬停检查）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-13T22:22:40.820

如果您不需要对相关 div 上方的元素应用任何操作，您可以简单地对其应用 pointer-events:none。这应该可以解决您的问题，并且您应该能够很好地使用 $('#div').hover() 。

测试示例。

```
<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>TEST</title>
    <style>
        div {
            width:50px;
            height:50px;
            position:absolute;
        }
        div#one {
            top:0;
            background:orange;
        }
        div#two {
            top:20px;
            background:blue;
            opacity:1;
            pointer-events:none;
        }
    </style>
</head>
<body>
    <div id="one">
    </div>
    <div id="two">
    </div>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script>
    $(function(){
        $('div#one').click(function(){
            alert('one-clicked');
        });
        $('div#one').hover(function(){
            console.log('one is being hovered!')
        });
    });
    </script>
</body>
</html> 
```

一切顺利，沙洛姆

# nhibernate - LINQ Fluent NHIBERNATE .Contains() 在 QueryOver<> 中不起作用，但在 Query<> 中起作用

> ID：15862779
> 
> 赞同：21
> 
> 时间：2013-04-07T13:14:14.550
> 
> 标签：nhibernate, fluent-nhibernate, linq-to-nhibernate

使用 FNH，我正在尝试使用以下内容检索类别：

```
_session.QueryOver<Data.Model.Category>()
                                     .Where(c => tourCreateRequest.Categories.Contains(c.CategoryId))
                                     .List()
                                     .Select(_categoryMapper.CreateCategory)
                                     .ToList(); 
```

**但是我在.Contains()**方法中遇到错误：

> 无法识别的方法调用：System.Collections.Generic.ICollection`1[[System.Int64, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]]:Boolean Contains(Int64)

为什么我会收到这个错误，有什么问题？

我浏览了一些帖子，然后将我的查询更改为（如下），这适用于 Query<>。

```
_session.Query<Data.Model.Category>()
                                     .Where(c => tourCreateRequest.Categories.Contains(c.CategoryId))
                                     .ToList()
                                     .Select(_categoryMapper.CreateCategory)
                                     .ToList(); 
```

我认为 QueryOver<> 是最新最好的，应该代替 Query<> 使用。

如上所示，我使用 QueryOver<> 的方式有什么问题？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-07T13:58:18.300

我找到了答案。感谢帖子：[NHibernate using QueryOver with WHERE IN](https://stackoverflow.com/questions/5408781/nhibernate-using-queryover-with-where-in)

```
var categories = _session.QueryOver<Data.Model.Category>()
                                     .WhereRestrictionOn(c => c.CategoryId).IsIn(ArrayofCategoryIds)
                                     .List()
                                     .Select(_categoryMapper.CreateCategory)
                                     .ToList(); 
```

我不得不使用 WhereRestrictionOn()

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-08-28T17:21:40.093

这是切线相关的问题，这似乎是放置它的最佳位置。

```
_session.Query<SomeType>.Where(t => someEnumerable.Contains(t)) 
```

没有工作。

在我的情况下`someEnumerable`不是 a `List<SomeType>`，而是 a `HashSet<SomeType>`。显然，NH 真的希望它成为一个列表。所以，我这样做了，它奏效了。

```
var someEnumerableList = someEnumerable.ToList();
_session.Query<SomeType>.Where(t => someEnumerableList.Contains(t) 
```

此外，FWIW，我的印象是这`Query<T>`是新的首选方式，这`QueryOver<T>`是不太首选的方式，因为`Query<T>`返回 IQueryable，这意味着它应该更容易测试，并且理论上可以换掉 ORM。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-09-30T01:00:24.950

像这样：

```
 query = query.WhereRestrictionOn(x => x.DescricaoDoProduto.Homogenize()).IsInsensitiveLike
(filter.Description.Homogenize()); 
```

# c++ - 编译器如何在 C++ 中获取 const 的地址？

> ID：15862781
> 
> 赞同：6
> 
> 时间：2013-04-07T13:14:21.780
> 
> 标签：c++, compilation, constants

正如这里所讨论[的，C++ 中哪个内存区域是 const 对象？](https://stackoverflow.com/questions/15859643/which-memory-area-is-a-const-object-in-in-c)，编译器在编译代码时可能不会为常量分配*任何存储空间*，它们可能会直接嵌入到机器代码中。那么编译器如何获得常量的地址呢？

C++ 代码：

```
void f()
{
    const int a = 99;
    const int *p = &a;
    printf("constant's value: %d\n", *p);
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-07T13:17:49.047

是否为常量分配任何存储空间完全取决于编译器。允许编译器根据**[As-If](https://stackoverflow.com/questions/15718262/what-exactly-is-the-as-if-rule)**规则执行优化，只要程序的可观察行为不改变编译器可能会分配存储空间，`a`也可能不会。请注意，这些优化不是必需的，而是标准允许的。

显然，当您获取此地址时`const`，编译器必须返回一个您可以引用的地址，`a`因此它必须放置`a`在内存中或至少假装它这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T13:17:40.953

所有变量都必须是可寻址的。编译器*可能会*优化常量变量，但在您使用变量地址的情况下，它无法做到这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T13:37:07.783

编译器可能会做许多允许它做的技巧，直到它会影响程序的可见行为（参见[as-if rule](https://stackoverflow.com/questions/15718262/what-exactly-is-the-as-if-rule)）。因此它可能不会为 const 对象分配存储空间`const int a = 99;`，但是在您获取变量地址的情况下 - 它必须分配一些存储空间或至少假装是，您将获得允许您引用的内存地址`a`。代码：

```
#include <cstdlib>
using namespace std;
#include <cstdio>

const int a = 98;

void f()
{
    const int a = 99;
    const int *p = &a;
    printf("constant's value: %d\n", *p);
}

int main(int argc, char** argv)
{
     int b=100;
     f();
     return 0;
} 
```

gcc -S main.cpp：

```
 .file   "main.cpp"
    .section    .rodata
.LC0:
    .string "constant's value: %d\n"
    .text
.globl _Z1fv
    .type   _Z1fv, @function
_Z1fv:
.LFB4:
    .cfi_startproc
    .cfi_personality 0x3,__gxx_personality_v0
    pushq   %rbp
    .cfi_def_cfa_offset 16
    movq    %rsp, %rbp
    .cfi_offset 6, -16
    .cfi_def_cfa_register 6
    subq    $16, %rsp
    movl    $99, -4(%rbp)
    leaq    -4(%rbp), %rax
    movq    %rax, -16(%rbp)
    movq    -16(%rbp), %rax
    movl    (%rax), %eax
    movl    %eax, %esi
    movl    $.LC0, %edi
    movl    $0, %eax
    call    printf
    leave
    ret
    .cfi_endproc
.LFE4:
    .size   _Z1fv, .-_Z1fv
.globl main
    .type   main, @function
main:
.LFB5:
    .cfi_startproc
    .cfi_personality 0x3,__gxx_personality_v0
    pushq   %rbp
    .cfi_def_cfa_offset 16
    movq    %rsp, %rbp
    .cfi_offset 6, -16
    .cfi_def_cfa_register 6
    subq    $32, %rsp
    movl    %edi, -20(%rbp)
    movq    %rsi, -32(%rbp)
    movl    $100, -4(%rbp)
    call    _Z1fv
    movl    $0, %eax
    leave
    ret
    .cfi_endproc
.LFE5:
    .size   main, .-main
    .section    .rodata
    .align 4
    .type   _ZL1a, @object
    .size   _ZL1a, 4
_ZL1a:
    .long   98
    .ident  "GCC: (Ubuntu/Linaro 4.4.7-2ubuntu1) 4.4.7"
    .section    .note.GNU-stack,"",@progbits 
```

所以我们看到的是这个变量`const int a = 99;`实际上是内置在机器代码中的，并不驻留在特定的内存区域（堆栈、堆或分配给它的数据段上没有内存）。如果我错了，请纠正我。

# java - java mime-util 的基本使用

> ID：15862782
> 
> 赞同：0
> 
> 时间：2013-04-07T13:14:45.537
> 
> 标签：java

我希望有人能澄清一些关于[mime-util 的](http://sourceforge.net/projects/mime-util/)事实？首先：我最大的问题是我不确定要导入什么才能实际使用该库（小型 java 语句但非常重要）。:):)

其次，我认为 mime-util 可以从 byte[] 数组和/或流中计算出文件的类型，对吗？如果是这样，应该调用什么方法？

最后，有人可以举一个关于如何获得 mime 类型的快速示例吗？（不像我拼凑其他问题的片段那么重要，但我知道它会起作用）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T13:40:06.343

来源可能会有所帮助，但这个库是旧的，现在不受支持。

您可以查看[Java Source Test](http://mime-util.svn.sourceforge.net/viewvc/mime-util/trunk/eu.medsea.mimeutil.test/src/eu/medsea/mimeutil/test/MimeUtilTest.java?revision=123&view=markup)。

# matlab - 我可以在多个 MATLAB 会话上运行脚本而不是并行化脚本吗？

> ID：15862783
> 
> 赞同：-1
> 
> 时间：2013-04-07T13:14:56.017
> 
> 标签：matlab, optimization, parallel-processing, parfor

我有一个脚本，可以为 for 循环中的许多参数求解微分方程系统。（迭代是完全独立的，但在每次迭代结束时，都会根据计算结果修改一个大矩阵（mat））。这是代码：（B是一个包含参数的矩阵）

```
 mat=zeros(20000,1);

   for n=1:20000         

         prop=B(n,:); % B is a (20000 * 2 ) matrix  that contains U and V parameters
         U=prop(1);
         V=prop(2);

         options=odeset('RelTol',1e-6,'AbsTol',1e-20);
         [T,X]=ode45(@acceleration,tspan,x0,options);

         rad=X(:,1);
         if max(rad)<radius   % radius is a constant
        mat(n)=1;

      end

      function xprime=acceleration(T,X)
      .
      .
      .
      end 
```

首先我尝试使用parfor，但是因为加速函数（ode45输入）被定义为内联函数，（为了获得更好的性能）我不能这样做。

我可以打开 4 个 MATLAB 会话（我的 CPU 有 4 个内核）并在每个会话中单独运行代码，而不是修改代码以将加速实现为单独的函数，因此，使用 parfor？它的性能是在一个会话上运行的 4 倍吗？（或者它是否提供与并行代码相同的性能？-在并行代码中我无法定义内联函数-）（在 Windows 上）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T18:56:08.593

如果您准备将问题分离出来以在 4 个会话中单独运行，然后重新组合结果，请确保您可以做到。根据我的经验（在 Windows 上），在四个单独的会话中运行代码实际上比使用 4 个工作人员的 parfor 循环运行得更快。不如单个会话的 4 倍性能快，因为操作系统还有其他工作要做……例如，如果您没有运行其他需要大量处理器的应用程序，则操作系统本身可能会占用一个内核的 25% ，为您提供单次会话的 3.75 倍性能。但是，这假设您有足够的内存，这不是限制因素。

如果您想定期执行此操作，您可能需要创建一些基于文件的信令/数据传递系统。

这显然不如 a 优雅`parfor`，但适用于您的情况，或者如果您负担不起并行工具箱的许可费。

# php - 避免开发人员看到包含的纯文本代码。

> ID：15862784
> 
> 赞同：2
> 
> 时间：2013-04-07T13:14:57.867
> 
> 标签：php

我制作了一些类，其中包含许多使用 PHP 正确记录的方法（类似于库）。

现在，其他开发人员要做的只是需要我在他们的代码中创建的 PHP 库并使用其中的预定义函数。

是否可以向其他 PHP 开发人员（需要文件）隐藏 PHP 代码（我制作的库），只向他们显示函数名称、参数及其文档而不显示其中的代码？我不是在谈论可以可逆的混淆，我是在谈论防止用户实际看到任何代码。

例如。

```
/**
 * 
 * CREATE A NEW THREAD
 * @param unknown_type $uid User ID of person who is creating the thread
 * @param unknown_type $participant An array having collection of UID of people who are participating in this conversation 
 * @param unknown_type $msgtype Message Type Flags (1-normal, 2-chat, 3-sent as email, 4-profile post, 5-group post, 6-customer support)
 * @param unknown_type $subject Subject of the thread
 * @param unknown_type $tname Thread Name
 * @param unknown_type $tpic Thread Cover Picture (Defaults to "")
 * @param unknown_type $tflag Thread Flag (1-allowed,2-under review,3-blocked) (Defaults to 1)
 * @return string|Ambigous <string, unknown> Thread ID on success, "" on failure
 */
public function createthread($uid,$participant,$msgtype,$subject,$tname,$tpic="",$tflag="1")
{
    $randobj=new uifriend();
    $tid=$randobj->randomstring(30,DB_MESSAGE,MSG_OUTLINE,msgoutline_tid);
    $socialobj=new socialoperations();
    $listid=$socialobj->createlist("threadlist_".$tid, "2",$msgtype,"1",$uid);
    if($socialobj->addtolist($participant, $listid, $uid)!="SUCCESS")
    {
        return "";
    }
    if($listid=="")
    {
        $lasterror="An error occured in creating thread! Unable to Create Lists!";return "";
    }
    $dbobj=new dboperations();
    $res=$dbobj->dbinsert("INSERT INTO ".MSG_OUTLINE." (".msgoutline_tid.",".msgoutline_subject.",".msgoutline_fid.",".msgoutline_participantid.",".msgoutline_msgtype.",".msgoutline_threadpic.",".msgoutline_threadflag.") VALUES
            ('$tid','$subject','$uid',$listid,'$msgtype','$tpic','$tflag')",DB_MESSAGE);
    if($res=="SUCCESS")
    {
        return $tid;
    }
    else
    {
        $lasterror="Unable to create Thread!";return "";
    }
} 
```

其他开发人员必须只能看到我在函数上方编写的带有函数名称和参数的文档，但他们不能以任何方式访问代码。

**为什么我想要这个：**我的 PHP 文件中有很多安全代码，我不想向其他开发人员展示，但仍然允许他们调用函数并读取返回值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T13:26:49.193

如果你想让他们**直接**调用你的函数，你不能对其他开发者隐藏你的代码。您可以做的是制作一个*Web 服务*并将其文档提供给其他开发人员。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T14:39:36.760

因为我有一个[元帖子所以重新打开](https://meta.stackexchange.com/q/175561/179259)了[另一个元帖子来格式化这个问题](https://meta.stackexchange.com/q/175665/179259)，我会尽力正确回答这个问题。请注意，这只是执行此操作的一种方式，其限制在帖子末尾说明。

## API

### 远程服务器

您可以在不同的域中创建[Web API](http://en.wikipedia.org/wiki/Application_programming_interface#Web_APIs)并从您的主域访问它。我认为解释它是如何工作的最好方法是用一个实际的例子。想象一下，您的库包含函数“joinstrings()”，它接受 2 个参数。然后你把它放在你分离的网络中：

`http://apiweb.com/functions.php`

```
<?php
// Your API. I hope the real one is more complex than this (;
function joinstrings($s1, $s2)
  {
  return $s1 . $s2;
  }
// More functions 
```

### 远程服务器访问点

这是公共（但需要密钥）可访问页面。

`http://apiweb.com/joinstrings/index.php`

```
<?php
// Check if the key is valid and if $v1 and $v2 aren't empty. Else, 'exit;'
include '../validate.php';
// Your API
include '../functions.php';
// The called function
echo joinstrings(urldecode($_GET['v1']), urldecode($_GET['v2'])); 
```

### 包装器

现在你可以要求你所有的程序员学习如何使用这个 API。或者，如果你更愿意做正确的事，你会做一个让他们的生活更轻松的包装。您将拥有一个包含您想要访问的所有方法的类。你可以用函数来做这个包装器，但我认为使用对象和方法更容易更好：

`htpp://web.com/library.php`

```
<?php
class DevelopersLibrary
  {
  private $Url = "http://apiweb.com/";
  // Press your hand against the keyboard. A-Z0-9\. Copy it in http://apiweb.com/validate.php
  private $Key = "g139h0854g76dqfdbgng";

  // Accesible method
  public joinstrings($v1, $v2)
    {
    // Encode only the user input. You don't want to encode '?' nor '&'
    if ($Return = file_get_contents($this->Url . 'joinstring'
                                    '?key=' . $this->Key .
                                    '&v1=' . urlencode($v1) .
                                    '&v2=' . urlencode($v2)))
      {
      return $Return;
      }
    }
  } 
```

### 开发者代码

最后，您的开发人员会做什么：

`http://web.com/index.php`

```
<?php
include './library.php';
$Lib = new DevelopersLibrary();
echo $Lib->joinstrings("Are you sure this is better", "than giving your developers access to the code?"); 
```

没有任何代码经过测试，因此您应该预料到会出现一些拼写错误。

## 限制

我可以想到大多数限制的解决方案，但不能扩展（更多）这篇文章，我不会在这里写它们。如果您在评论中需要它，请寻求限制的解决方案，我会尽力而为。**在正常情况下使用，这些限制都不是*那么*重要**。

*   **传递的参数**。使用如上所述的这种方法，您只能将数字或字符串作为函数参数传递。查看[json_encoding()](http://php.net/manual/en/function.json-encode.php)以传递其他类型。

*   **API 中存在错误或传递的参数时**返回错误的值。**如果 API 有 bug，开发者无法修复，返回值可能是错误的。现在这似乎微不足道，但如果他们试图检索 2 个字符串的连接并检索另一个包含错误文本的 [错误] 字符串怎么办？注意：考虑返回有效的**XML**，然后在包装器中解析它。**

***   只有一个**唯一的密钥**用于防止随机用户使用您的 API，而不是对开发人员隐藏。

    *   **速度较慢**。我认为这甚至不需要解释。

    *   ~~**开发人员的额外工作**~~。这是通过包装器的实现解决的。

    *   **网址长度**。*大多数浏览器*都有 2000 个字符的 url 长度限制，尽管我在[PHP 手册](http://php.net/manual/en/function.file-get-contents.php)中没有找到file_get_contents() 的任何内容。阅读[此 SO 问题以获取有关 GET 的更多信息](https://stackoverflow.com/q/7724270/938236)。

    *   当然还有更多，但这些是我能想到的主要内容。** 

 **我希望这个长长的答案对您或某人有用。**

# php - php联系表中的日期错误

> ID：15862788
> 
> 赞同：0
> 
> 时间：2013-04-07T13:15:23.993
> 
> 标签：php, html-email

从 1970 年 1 月 1 日起，我网站上填写的所有联系表格突然进入我的收件箱？？？

他们最终出现在我的收件箱底部，我错过了一些线索......

任何想法如何突然开始发生？

我在联系页面上使用的代码是：-

```
<?php
if(isset($_POST['email'])) {

// EDIT THE 2 LINES BELOW AS REQUIRED
$email_to = "my email address";
$email_subject = "Website Contact Enquiry";

function died($error) {
    // your error code can go here
    echo "We are very sorry, but there were error(s) found with the form you submitted.     ";
    echo "These errors appear below.<br /><br />";
    echo $error."<br /><br />";
    echo "Please go back and fix these errors.<br /><br />";
    die();
}

// validation expected data exists
if(!isset($_POST['name']) ||
    !isset($_POST['email']) ||
    !isset($_POST['tel']) ||
    !isset($_POST['message'])||
    !isset($_POST['formtype'])
    ) {
    died('We are sorry, but there appears to be a problem with the form you  submitted.');       
}

$name = $_POST['name']; // required
$email_from = $_POST['email']; // required
$tel = $_POST['tel']; // required
$message = $_POST['message']; // required
$formtype = $_POST['formtype'];

$email_message = "Form details below.\n\n";

function clean_string($string) {
  $bad = array("content-type","bcc:","to:","cc:","href");
  return str_replace($bad,"",$string);
}

$email_message .= "Name: ".clean_string($name)."\n";
$email_message .= "Email: ".clean_string($email_from)."\n";
$email_message .= "Tel: ".clean_string($tel)."\n";
$email_message .= "Message: ".clean_string($message)."\n";
$email_message .= "formtype: ".clean_string($formtype)."\n"; 

// create email headers
$headers = 'From: '.$email_from."\r\n".
'Reply-To: '.$email_from."\r\n" .
'X-Mailer: PHP/' . phpversion().date();
@mail($email_to, $email_subject, $email_message, $headers);  
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T13:19:33.663

将此添加到您的标题中：

```
'Date: ' . date('r'), 
```

另外，一定要消毒`$email_from`。现在，您允许垃圾邮件发送者向其他收件人发送电子邮件并更改标题。在此处阅读更多信息：[http ://www.securephpwiki.com/index.php/Email_Injection](http://www.securephpwiki.com/index.php/Email_Injection)

# wpf - 如何在 wpf 中以编程方式执行此操作

> ID：15862792
> 
> 赞同：-3
> 
> 时间：2013-04-07T13:15:32.537
> 
> 标签：wpf, tooltip

如何在 wpf 中以编程方式执行此操作

1.  提交请求 向服务器提交请求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T13:22:13.220

```
 ToolTip toolTip = new ToolTip();
 StackPanel stack = new StackPanel();
 stack.Children.Add(new TextBlock() { Text = "Submit Request", FontWeight = FontWeights.Bold });
 stack.Children.Add(new TextBlock() { Text = "Submits the request to the server." });
 toolTip.Content = stack; 
```

# ruby-on-rails - 子域约束中的前缀 url 帮助程序，而 URL 中没有前缀

> ID：15862798
> 
> 赞同：0
> 
> 时间：2013-04-07T13:16:29.730
> 
> 标签：ruby-on-rails, routes, subdomain

这是我的`routes.rb`文件：

```
 constraints subdomain: 'pro' do
    scope module: 'pro' do
      resources :subjects
    end
  end 
```

这将产生：

```
 subjects GET /subjects(.:format) pro/subjects#index {:subdomain=>"pro"} 
```

由于我已经有了子域，如何在`pro_subject`URL 中没有“/pro”前缀的情况下使用 url 助手。

我希望人们输入： http: [//pro.mysuperwebsite.com](http://pro.mysuperwebsite.com)而不是[http://pro.mysuperwebsite.com/pro](http://pro.mysuperwebsite.com/pro)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T15:08:21.243

我很确定如果您设置`:path`选项，您可以确定子路径。

```
namespace :pro, :path => '' do # This should do it 
```

# regex - 我将如何使用正则表达式来查找对函数的调用？

> ID：15862799
> 
> 赞同：0
> 
> 时间：2013-04-07T13:16:41.637
> 
> 标签：regex

假设我想在我的列表（vb.net 列表）中找到所有函数调用，并且我有函数名称。首先我想我可以做一个正则表达式，比如：

```
myfunc\(  .*  \) 
```

即使函数跨越多行，这也应该有效，假设点被解释为包括换行符（在 dot-net 中有一个选项可以做到这一点）

但后来我意识到我的一些论点本身可能是函数调用。换句话说：
myfunc(a,b,c,d(),e)，这意味着括号不匹配。

所以我认为由于主函数调用通常是一行的第一项，我可以这样做：

```
^myfunc( .* \) $ 
```

这个想法是函数是一行中的第一项（^），最后一个括号是一行中的最后一项（$）。但这也不起作用。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T13:21:59.067

你不能。按照设计，正则表达式不能处理这里需要的递归。

有关更多信息，您可能想在此处阅读第一个答案：[可以使用正则表达式匹配嵌套模式吗？](https://stackoverflow.com/questions/133601/can-regular-expressions-be-used-to-match-nested-patterns)

是的，我知道一些特殊的“正则表达式”确实允许递归。但是，在大多数情况下，这意味着您正在做一些可怕的事情。最好使用能够真正理解您的语言语法的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T13:29:07.627

这不是您问题的直接答案，但如果您想找到您的函数的所有用途，您可以使用 Visual Studio。只需右键单击该功能，然后选择`Find All References`：

![在此处输入图像描述](https://i.stack.imgur.com/92U5Z.png)

Visual Studio 将显示结果。然后，您可以双击每一行，Visual Studio 会将您带到那里。

![在此处输入图像描述](https://i.stack.imgur.com/1Omhc.png)

# iphone - 将数据从 DetailViewController 发送到 MasterViewController

> ID：15862801
> 
> 赞同：1
> 
> 时间：2013-04-07T13:16:42.697
> 
> 标签：iphone, objective-c, xcode, didselectrowatindexpath, message-passing

这正是我想要做的。

向导视图控制器.m

```
- (IBAction)onCountryClick:(id)sender {
    MJDetailViewController *detailViewController = [[MJDetailViewController alloc] initWithNibName:@"MJDetailViewController" bundle:nil];
    [self presentPopupViewController:detailViewController animationType:MJPopupViewAnimationSlideLeftRight];
} 
```

用户单击国家按钮，弹出列表显示。

当用户选择一个行按钮标题应该改变。

这是我的详细视图，

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath: (NSIndexPath     *)indexPath {

    WizardViewController *mj = [[WizardViewController alloc]       initWithNibName:@"WizardViewController" bundle:nil];
    mj.countryselected = [countryNames objectAtIndex:indexPath.row];
    [mj.countryButton setTitle:mj.countryselected forState:UIControlStateNormal];
    [self dismissPopupViewControllerWithanimationType:MJPopupViewAnimationFade];
} 
```

`DetailViewController`正在解雇，但`countryButtonTitle`没有更新。我知道这是因为向导视图不刷新。我想知道在这种情况下正确的解决方法。

希望这有助于获得更好的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T04:49:23.530

制定协议`MJDetailViewController`

```
@protocol MJDetailViewControllerDelegate;
@interface MJDetailViewController : UIViewController
@property (nonatomic,assign) id< MJDetailViewControllerDelegate> delegate;
@end

@protocol MJDetailViewControllerDelegate <NSObject>

- (void)selectedContry:(NSString *)title;

@end 
```

并打电话给

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath: (NSIndexPath     *)indexPath {

    NSString *title = [countryNames objectAtIndex:indexPath.row];
       if ([self.delegate respondsToSelector:@selector(selectedContry:)]) {
            [self.delegate selectedContry:title];
        }
    [self dismissPopupViewControllerWithanimationType:MJPopupViewAnimationFade];
} 
```

添加`MJDetailViewControllerDelegate`为) `protocol`_`WizardViewController.h`

现在实现`selectedContry:`方法`WizardViewController.m`如下：

```
- (void)selectedContry:(NSString *)title
{
    [self.countryButton setTitle:title forState:UIControlStateNormal];
} 
```

希望它可以帮助你。

# jquery - 向 jQuery Picklest 插件添加双击功能？

> ID：15862807
> 
> 赞同：0
> 
> 时间：2013-04-07T13:17:40.387
> 
> 标签：jquery, jquery-plugins

[我喜欢 jQuery选择列表插件](http://gsgd.co.uk/sandbox/jquery/picklists/)的外观，而不是旧的 jquery-picklists，但是旧的有双击添加功能，我也想要，它允许我添加一个条目，而不必使用箭头键。有没有人在新插件中添加了这个或类似的功能？关于如何实现类似功能的任何建议？或者也许是一个更好的小部件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T08:58:21.090

该[**`jquery-picklist`**](http://plugins.jquery.com/picklist/)插件从 0.11.0 版本开始支持双击将项目移动到对面的列表中。你可能想检查一下。

免责声明：我是插件作者。我建议您也看看其他 jQuery 选择列表插件，并找到最适合您需求的插件。

# c# - Bitmap.Save 方法中的 GDI+ 中发生一般错误

> ID：15862810
> 
> 赞同：81
> 
> 时间：2013-04-07T13:18:08.077
> 
> 标签：c#, gdi+, system.drawing

我正在努力上传该图像的缩略图副本并将其保存在缩略图文件夹中。

我正在使用以下链接：

[http://weblogs.asp.net/markmcdonnell/archive/2008/03/09/resize-image-before-uploading-to-server.aspx](http://weblogs.asp.net/markmcdonnell/archive/2008/03/09/resize-image-before-uploading-to-server.aspx)

但

```
newBMP.Save(directory + "tn_" + filename); 
```

导致异常“GDI+ 中发生一般错误。”

我试图授予文件夹权限，还尝试在保存时使用新的单独 bmp 对象。

**编辑：**

```
 protected void ResizeAndSave(PropBannerImage objPropBannerImage)
    {
        // Create a bitmap of the content of the fileUpload control in memory
        Bitmap originalBMP = new Bitmap(fuImage.FileContent);

        // Calculate the new image dimensions
        int origWidth = originalBMP.Width;
        int origHeight = originalBMP.Height;
        int sngRatio = origWidth / origHeight;
        int thumbWidth = 100;
        int thumbHeight = thumbWidth / sngRatio;

        int bannerWidth = 100;
        int bannerHeight = bannerWidth / sngRatio;

        // Create a new bitmap which will hold the previous resized bitmap
        Bitmap thumbBMP = new Bitmap(originalBMP, thumbWidth, thumbHeight);
        Bitmap bannerBMP = new Bitmap(originalBMP, bannerWidth, bannerHeight);

        // Create a graphic based on the new bitmap
        Graphics oGraphics = Graphics.FromImage(thumbBMP);
        // Set the properties for the new graphic file
        oGraphics.SmoothingMode = SmoothingMode.AntiAlias; oGraphics.InterpolationMode = InterpolationMode.HighQualityBicubic;

        // Draw the new graphic based on the resized bitmap
        oGraphics.DrawImage(originalBMP, 0, 0, thumbWidth, thumbHeight);

        Bitmap newBitmap = new Bitmap(thumbBMP);
        thumbBMP.Dispose();
        thumbBMP = null;

        // Save the new graphic file to the server
        newBitmap.Save("~/image/thumbs/" + "t" + objPropBannerImage.ImageId, ImageFormat.Jpeg);

        oGraphics = Graphics.FromImage(bannerBMP);
        // Set the properties for the new graphic file
        oGraphics.SmoothingMode = SmoothingMode.AntiAlias; oGraphics.InterpolationMode = InterpolationMode.HighQualityBicubic;

        // Draw the new graphic based on the resized bitmap
        oGraphics.DrawImage(originalBMP, 0, 0, bannerWidth, bannerHeight);
        // Save the new graphic file to the server
        bannerBMP.Save("~/image/" + objPropBannerImage.ImageId + ".jpg");

        // Once finished with the bitmap objects, we deallocate them.
        originalBMP.Dispose();

        bannerBMP.Dispose();
        oGraphics.Dispose();
    } 
```

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2013-04-07T13:26:07.357

> 从文件构造位图对象或图像对象时，文件在对象的生命周期内保持锁定状态。因此，您无法更改图像并将其保存回其原始文件。 [http://support.microsoft.com/?id=814675](http://support.microsoft.com/?id=814675)

[GDI+、JPEG 图像到 MemoryStream 中发生一般错误](https://stackoverflow.com/questions/1053052/a-generic-error-occurred-in-gdi-jpeg-image-to-memorystream/1053123#1053123)

[Image.Save(..) 抛出 GDI+ 异常，因为内存流已关闭](https://stackoverflow.com/questions/336387/image-save-throws-a-gdi-exception-because-the-memory-stream-is-closed/336396#336396)

[http://alperguc.blogspot.in/2008/11/c-generic-error-occurred-in-gdi.html](http://alperguc.blogspot.in/2008/11/c-generic-error-occurred-in-gdi.html)

**编辑：**
只是从记忆中写...

> 保存到“中间”内存流，应该可以

例如试试这个 - 替换

```
 Bitmap newBitmap = new Bitmap(thumbBMP);
    thumbBMP.Dispose();
    thumbBMP = null;
    newBitmap.Save("~/image/thumbs/" + "t" + objPropBannerImage.ImageId, ImageFormat.Jpeg); 
```

有类似的东西：

```
string outputFileName = "...";
using (MemoryStream memory = new MemoryStream())
{
    using (FileStream fs = new FileStream(outputFileName, FileMode.Create, FileAccess.ReadWrite))
    {
        thumbBMP.Save(memory, ImageFormat.Jpeg);
        byte[] bytes = memory.ToArray();
        fs.Write(bytes, 0, bytes.Length);
    }
} 
```

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2014-05-16T13:06:09.137

如果您传递的路径`Bitmap.Save()`无效（文件夹不存在等），则会显示此错误消息。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-04-07T14:04:51.917

```
 // Once finished with the bitmap objects, we deallocate them.
    originalBMP.Dispose();

    bannerBMP.Dispose();
    oGraphics.Dispose(); 
```

这是一种你迟早会后悔的编程风格。早点敲门，你忘了一个。您没有处理*newBitmap*。在垃圾收集器运行之前，它会一直锁定文件。如果它没有运行，那么你第二次尝试保存到同一个文件时，你会得到 klaboom。GDI+ 异常太糟糕了，无法给出良好的诊断结果，因此会引起严重的头痛。除了提到这个错误的数千个谷歌帖子之外。

**总是**喜欢使用*using*语句。即使代码抛出异常，它也永远不会忘记处置对象。

```
using (var newBitmap = new Bitmap(thumbBMP)) {
    newBitmap.Save("~/image/thumbs/" + "t" + objPropBannerImage.ImageId, ImageFormat.Jpeg);
} 
```

尽管还不清楚为什么要创建新的位图，但保存 thumbBMP 应该已经足够好了。Anyhoo，用爱给你剩下的一次性物品一样的东西。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-08-14T07:56:28.200

在我的情况下**，位图图像文件已经存在于系统驱动器**中，所以我的应用程序抛出了错误**"A Generic error occurred in GDI+"**。

1.  验证目标文件夹是否存在
2.  确认目标文件夹中没有同名文件

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-12-03T11:52:32.337

检查保存图像的文件夹的权限右键单击文件夹，然后执行：

> 属性 > 安全 > 编辑 > 添加 - 选择“所有人”并选中允许“完全控制”

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2016-01-14T07:21:21.137

我遇到了同样的问题在使用 MVC 应用程序**时在 GDI+ 中保存时发生一般错误**，我收到此错误是因为我写了错误的路径来保存图像，我**更正了保存路径**，它对我来说很好。

```
img1.Save(Server.MapPath("/Upload/test.png", System.Drawing.Imaging.ImageFormat.Png);

--Above code need one change, as you need to put close brackets on Server.MapPath() method after writing its param. 
```

像这样-

```
img1.Save(Server.MapPath("/Upload/test.png"), System.Drawing.Imaging.ImageFormat.Png); 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2019-11-27T12:06:34.827

由于以下几点而发生 GDI+ 异常

1.  文件夹访问问题
2.  缺少图像的属性

如果文件夹问题 - 请提供对应用程序的访问如果缺少属性，则使用以下代码

**代码 1**

```
using (Bitmap bmp = new Bitmap(webStream))
{
     using (Bitmap newImage = new Bitmap(bmp))
     {
         newImage.Save("c:\temp\test.jpg", ImageFormat.Jpeg);
     }
} 
```

**代码 2**

```
using (Bitmap bmp = new Bitmap(webStream))
{

     using (Bitmap newImage = new Bitmap(bmp))
     {
        newImage.SetResolution(bmp.HorizontalResolution, bmp.VerticalResolution);
        Rectangle lockedRect = new Rectangle(0, 0, bmp.Width, bmp.Height);
        BitmapData bmpData = newImage.LockBits(lockedRect, ImageLockMode.ReadWrite, bmp.PixelFormat);
        bmpData.PixelFormat = bmp.PixelFormat;
        newImage.UnlockBits(bmpData);
        using (Graphics gr = Graphics.FromImage(newImage))
         {
             gr.SmoothingMode = SmoothingMode.HighQuality;
             gr.InterpolationMode = InterpolationMode.HighQualityBicubic;
             gr.PixelOffsetMode = PixelOffsetMode.HighQuality;
         }

         foreach (var item in bmp.PropertyItems)
         {
             newImage.SetPropertyItem(item);
         }
         newImage.Save("c:\temp\test.jpg", ImageFormat.Jpeg);
    }
} 
```

代码 1 和代码 2 的区别

**代码 - 1：**它只会创建图像并可以在普通图像查看器上打开它

*   图像无法在 Photoshop 中打开
*   图像大小将翻倍

**Code - 2 :**在图像编辑工具中打开图像使用代码

通过使用代码 1，它只创建图像但不分配图像标记。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-03-21T04:40:25.087

我总是检查/测试这些：

*   路径 + 文件名是否包含给定文件系统的非法字符？
*   文件是否已经存在？（坏的）
*   路径是否已经存在？（好的）
*   如果路径是相对的：我是否希望它在正确的父目录中（主要是`bin/Debug`;-)）？
*   程序的路径是否可写，它以哪个用户运行？（这里的服务可能很棘手！）
*   完整路径真的，真的不包含非法字符吗？（一些 unicode 字符几乎不可见）

`Bitmap.Save()`除了这个列表，我从来没有遇到过任何问题。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-10-08T09:28:24.493

我有一个不同的问题，但有同样的例外。

**简而言之：**

确保在调用之前没有释放`Bitmap`' 对象。`Stream``.Save`

**全文：**

有一个方法返回一个对象，从 a以下列方式`Bitmap`构建：`MemoryStream`

```
private Bitmap getImage(byte[] imageBinaryData){
    .
    .
    .
    Bitmap image;
    using (var stream = new MemoryStream(imageBinaryData))
    {
        image = new Bitmap(stream);
    }
    return image;
} 
```

然后有人使用返回的图像将其保存为文件

```
image.Save(path); 
```

问题是在尝试保存图像时原始流已经被释放，抛出 GDI+ 异常。

解决此问题的方法是在`Bitmap`不处理流本身但返回的`Bitmap`对象的情况下返回 。

```
private Bitmap getImage(byte[] imageBinaryData){
   .
   .
   .
   Bitmap image;
   var stream = new MemoryStream(imageBinaryData))
   image = new Bitmap(stream);

   return image;
} 
```

然后：

```
using (var image = getImage(binData))
{
   image.Save(path);
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-04-07T14:53:18.567

我使用 FileStream 让它工作，从这些
[http://alperguc.blogspot.in/2008/11/c-generic-error-occurred-in-gdi.html](http://alperguc.blogspot.in/2008/11/c-generic-error-occurred-in-gdi.html) [http://csharpdotnetfreak.blogspot.com/2010/获得帮助02/resize-image-upload-ms-sql-database.html](http://csharpdotnetfreak.blogspot.com/2010/02/resize-image-upload-ms-sql-database.html)

```
System.Drawing.Image imageToBeResized = System.Drawing.Image.FromStream(fuImage.PostedFile.InputStream);
        int imageHeight = imageToBeResized.Height;
        int imageWidth = imageToBeResized.Width;
        int maxHeight = 240;
        int maxWidth = 320;
        imageHeight = (imageHeight * maxWidth) / imageWidth;
        imageWidth = maxWidth;

        if (imageHeight > maxHeight)
        {
            imageWidth = (imageWidth * maxHeight) / imageHeight;
            imageHeight = maxHeight;
        }

        Bitmap bitmap = new Bitmap(imageToBeResized, imageWidth, imageHeight);
        System.IO.MemoryStream stream = new MemoryStream();
        bitmap.Save(stream, System.Drawing.Imaging.ImageFormat.Jpeg);
        stream.Position = 0;
        byte[] image = new byte[stream.Length + 1];
        stream.Read(image, 0, image.Length);
        System.IO.FileStream fs
= new System.IO.FileStream(Server.MapPath("~/image/a.jpg"), System.IO.FileMode.Create
, System.IO.FileAccess.ReadWrite);
            fs.Write(image, 0, image.Length); 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-11-17T09:18:34.793

对我来说，这是一个许可问题。有人删除了运行应用程序的用户帐户文件夹的写入权限。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-07-24T16:50:21.173

在硬盘上创建文件夹路径图像/拇指 => 问题已解决！

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-06-16T13:52:29.187

```
 I used below logic while saving a .png format. This is to ensure the file is already existing or not.. if exist then saving it by adding 1 in the filename

Bitmap btImage = new Bitmap("D:\\Oldfoldername\\filename.png");
    string path="D:\\Newfoldername\\filename.png";
            int Count=0;
                if (System.IO.File.Exists(path))
                {
                    do
                    {
                        path = "D:\\Newfoldername\\filename"+"_"+ ++Count + ".png";                    
                    } while (System.IO.File.Exists(path));
                }

                btImage.Save(path, System.Drawing.Imaging.ImageFormat.Png); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-10-20T08:59:04.793

我在尝试将 Tiff 图像转换为 Jpeg 时遇到了这个错误。对我来说，问题源于 tiff 尺寸太大。任何高达大约 62000 像素的像素都可以，超过这个尺寸的任何像素都会产生错误。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-01-10T16:46:37.497

对我来说，这是保存图像时的路径问题。

```
int count = Directory.EnumerateFiles(System.Web.HttpContext.Current.Server.MapPath("~/images/savedimages"), "*").Count();

var img = Base64ToImage(imgRaw);

string path = "images/savedimages/upImages" + (count + 1) + ".png";

img.Save(Path.Combine(System.Web.HttpContext.Current.Server.MapPath(path)));

return path; 
```

所以我通过添加以下正斜杠来修复它

```
String path = "images/savedimages.... 
```

应该

```
String path = "/images/savedimages.... 
```

希望能帮助任何卡住的人！

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-03-29T18:57:20.310

来自 msdn：`public void Save (string filename);`这让我很惊讶，因为我们不仅要传递文件名，还必须传递文件名和路径，例如：`MyDirectory/MyImage.jpeg`，这里`MyImage.jpeg`实际上还不存在，但我们的文件将使用这个名称保存.

这里的另一个重要点是，如果您`Save()`在 Web 应用程序中使用，则`Server.MapPath()`与它一起使用它基本上只是返回传入的虚拟路径的物理路径。类似于：`image.Save(Server.MapPath("~/images/im111.jpeg"));`

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2020-06-23T15:40:46.747

我使用这个解决方案

```
int G = 0;

private void toolStripMenuItem17_Click(object sender, EventArgs e)
{
  Directory.CreateDirectory("picture");// هذه العملية للرسم بدون ان يحذف بقية الرسومات
  G = G + 1;
  FormScreen();
  memoryImage1.Save("picture\\picture" + G.ToString() + ".jpg");
  pictureBox1.Image = Image.FromFile("picture\\picture" + G.ToString() + ".jpg");
} 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2021-06-14T21:31:39.940

下面的代码解决了我的问题

```
pictureBox1.Image=myImage;

Bitmap bmp = new Bitmap(pictureBox1.Image);
bmp.Save("C:\\Users/super/Desktop/robin.jpg"); 
```

# jquery - 每次将新产品添加到购物车后如何计算价格？

> ID：15862811
> 
> 赞同：0
> 
> 时间：2013-04-07T13:18:18.350
> 
> 标签：jquery, action, add, onchange, cart

假设我有一辆购物车。

我有价格和数量，给价格一个“价格”类的跨度，一个“数量”类的数量跨度。

所以它看起来像这样：

```
<div id="itemsWrapper">
     <div><span class="price">25</span><span class="qty">2</span></div>
     <div><span class="price">40</span><span class="qty">1</span></div>
     ......
</div> 
```

我想在每次用户将产品添加到购物车后计算最终价格。

这是我尝试过的价格，但不起作用：

```
$("#itemsWrapper").on("change", "#tableItems", function(){
  var price= new Array();
  $(".price").each(function(index) {
      price.push ($(this).text());
  });
  console.log(price);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T13:32:43.613

我不确定这是否是您需要的，但我已经为您尝试了一些代码

```
var total_price = 0;
$("#itemsWrapper div").each( function() {
    price = $(this).find(".price").html();
    quantity = $(this).find(".qty").html()
    total_price += price * quantity;
});
alert(total_price); 
```

[http://jsfiddle.net/cTtyL/](http://jsfiddle.net/cTtyL/)

我可能会在连接“添加项目”事件方面为您提供更多帮助，但我需要您提供更多关于您如何尝试绑定事件的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T13:49:03.750

我很想在启用 FireBug 的情况下在您的网站上疯狂购物；）

您不应该使用 Javascript 在前端计算价格。每次添加商品以刷新购物车时发送 AJAX 请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T14:17:12.623

终于，我得到了我想要的。

我在更新购物车的 HTML 后直接插入了这个：

```
var rtp = new Array();
var qty = new Array();

$(".rtp").each(function() {
   rtp.push ($(this).text());
});

$(".qty").each(function() {
   qty.push ($(this).text());
}); 
```

# java - 在 Java 中使用集合的正确方法？

> ID：15862812
> 
> 赞同：2
> 
> 时间：2013-04-07T13:18:19.223
> 
> 标签：java, data-structures, collections, arraylist

我有以下代码。但是，我怀疑这是否是实施它的正确方法。

我的意思是：在集合框架中，有许多数据结构可供使用，创建类 ( `MemberList`) 来管理许多成员的聚合可以使用`ArrayList`, `LinkedList`, 优先级队列 ...

我想使用适合我需要的数据结构，并且在搜索、排序、删除、添加、修改和删除方面具有最小的 Big O 可能。

```
public class MemberList{
    /**
     *a list of accounts existing in the database
     */
    private static List<Member> members = new ArrayList<Member>();
    /**
     * add a member to our member list
     * @param m the member to be added 
     */
    public static void Add(Member m)
    {
        members.add(m);

    /**
     * delete a member from our member list
     * @param m the member to be deleted
     */
    public static void Delete(Member m)
    {
        Iterator<Member> it = members.iterator();
        while(it.hasNext())
        {
            if(m.equals(it.next()))
            {
                it.remove();
            }
        }
    }

    /**
     * Search for a specific member in the member list
     * @param m the member that needs to be found
     * @return the reference of the object Member
     * @throws UserNotFoundExeption whether the member was not found in the list 
     */

    public static Member Search (Member m) throws UserNotFoundExeption
    {
        Iterator<Member> it = members.iterator();

        while(it.hasNext())
        {
            if(m.equals(it.next()))
            {
                return it.next();

            }else{
                UserNotFoundExeption ex = new UserNotFoundExeption(it.next().getUsername());
                throw ex;
            }
        }
        return null;
    }
    /**
     * The login method enables checking whether the login was made successfully or not. if not, it can throw two
     * exceptions to handle the errors
     * @param member
     * @return
     * @throws UserNotFoundExeption
     * @throws FailedLoginException
     */
    public static boolean  login (Member m)
            throws UserNotFoundExeption,FailedLoginException {

        try{
            Member member = Search(m);
            if (!m.authenticate(member.getPassword()))
            {
                FailedLoginException ex2 = new FailedLoginException (member.getPassword());
                throw ex2;
            }
            else
            {
                return true;
            }
        }catch(UserNotFoundExeption ex){
            throw ex;            
        }

     }

    /**
     * this behavior modify attributes of the corresponding class
     * @param <T> this generic helps to accept any type of parameter change, hence we can change any type
     * @param m this is the member that need to change his information
     * @param choice the choice of which information to change
     * @param change the new change on the member attribute
     * @throws UserNotFoundExeption 
     */
    public static <T> void Modify(Member m, int choice, T change) throws UserNotFoundExeption
    {
        try{
            Member member = Search(m);
            switch(choice)
            {
                case 1:
                    member.setUsername((String)change);
                    break;

                case 2:
                    member.setPassword((String)change);
                    break;

                case 3:
                    member.setCommunity((Community)change);
                    break;
            }
        }catch(UserNotFoundExeption ex){
            throw ex;            
        }

    }

    /**
     * display the member list objects information
     */
    public static void Display()
    {
        Iterator<Member> it = members.iterator();

        while(it.hasNext())
        {
            System.out.println(it.next());
        }
    }

    /**
     * Sort objects in the list
     */
    public static void Sort()
    {
        Iterator<Member> it = members.iterator();
        Member[] Members_Array = members.toArray(new Member[members.size()]);
        Member temp;

        for(int i = 0; i<members.size(); i++)
        {
            for(int j = 0; j < members.size() - (i+1); j++)
            {
                if(Members_Array[j].compareTo(Members_Array[j+1]) > 0)
                {
                    temp = Members_Array[j];
                    Members_Array[j] = Members_Array[j+1];
                    Members_Array[j+1] = temp;
                }
            }
        }

    }    
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T19:00:30.957

这个问题太笼统了，“Java中正确使用集合的方法”也是一个哲学问题，所以无法科学回答。

具体到您的情况，根据您的成员池，您可能不想在需要拉出成员时对其进行迭代。我建议您使用类似 a 的东西`HashMap<String,Member>`，其中每个成员都有一个可识别的唯一键（例如用户名）。这将授予您 O(1) 的访问速度，并允许您在需要时使用`.values()`.

您可以像这样使用 HashMap：

```
// This is how you create a hash map:
HashMap<String,Member> members = new HashMap<String,Member>();

// This is how you add an object to it. It is slower than lists,
// but since reading happens far often, it pays off.
members.put("ben", new Member());

// This is how you access an object in the hash map.
// Accessing a hash map is O(1).
Member member = members.get("ben");

// This is how you remove an object from the hash map.
// Removing an object is also O(1)
members.remove("ben");

// Hash maps are also iterable
for(Member member : members.values()) {
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T18:53:28.510

如果您不想使用 JDBC，我会使用数组列表。但是以后如果您的项目要增长，您必须使用 JDBC。

# ios - iOS：视图控制器上有几个触摸事件？

> ID：15862819
> 
> 赞同：0
> 
> 时间：2013-04-07T13:19:01.673
> 
> 标签：ios, xcode, uiviewcontroller

我用 2 View 开发了一个小应用程序。

我的第一个 UIView 是一个包含一些图像的菜单。当我单击其中一个时，我打开第二个 UIView 以显示它。

之后，我创建了一个新的 UIView，它是我的第一个菜单的“菜单扩展”。我创建了一个 UIView，但是当我放置组件“Swipe”时，应用程序不会切换到我的第二个新菜单。

我想知道，如果 Iphone App 支持 UIView 上的多个触摸事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T16:12:26.003

类的对象`UIGestureRecognizer`附加到一个`UIView`对象，而不是`UIViewController`对象。并且可以将多个手势识别器附加到单个视图，请参阅其`gestureRecognizers`属性。
但是您必须小心：如果您想要识别滑动，单击识别器可能会在识别滑动之前触发，因为后者需要移动手指。因此，您可以配置同一视图的多个手势识别器，以便它们显示所需的行为，例如，仅当滑动识别器未触发时，单击识别器才会触发等，请参阅`UIGestureRecognizer`Class Reference 的文档。

# jquery - JQuery noob - 将鼠标悬停在一个图像上，更改另一个

> ID：15862820
> 
> 赞同：0
> 
> 时间：2013-04-07T13:19:05.333
> 
> 标签：jquery, html, image, css, hover

现在我已经通过 google 和 youtube 进行了搜索。但是我找不到答案！

我喜欢做什么.. 我有一个菜单，中间有一张照片。当我将鼠标悬停在菜单点上时，它变成蓝色，中间的图片也变成蓝色。

更改菜单点的悬停效果通过**CSS**起作用。但是我不能让中间的图片改变！

我的html代码：

```
<nav class="nav1">
  <ul> 
    <a href="news.html" class="but" id="news">News</a>
    <a href="index.html" class="but">index</a>
    <a href="about.html" class="but">about</a>
    <a href="media.html" class="but">Media</a>
    <a href="mons.html" target="_self"> 
    <img src="images/logo/logo.png"  class="knaplogo" id="logo">
    <-- THIS IS THE ONE WHO SHOULD CHANGE -->
    <a href="http://www.facebook.com" target="_blank" class="butf"></a>
    <a href="http://www.youtube.com" target="_blank" class="buty"></a>
    <a href="http://www.twitter.com" target="_blank" class="butt"></a>
  </ul>
</nav> 
```

和我的查询，一开始我只尝试了一点：

```
$('#news').hover(function(){
  $('#logo').image('../images/logo/logo.png');
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T13:23:18.773

您需要属性方法：

```
$('#news').hover(function(){
    $('#logo').attr('src', '../images/logo/logo.png');
}); 
```

# eclipse - 克隆 android 项目以创建演示版本

> ID：15862821
> 
> 赞同：1
> 
> 时间：2013-04-07T13:19:17.033
> 
> 标签：eclipse

我有一个项目并且运行良好，但现在我想创建它的演示版本。我如何克隆我的项目并在演示版中做出一些限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T21:29:43.383

我鼓励您使用[git](https://github.com/)之类的版本控制系统并创建一个分支，您可以在其中更改演示版本的功能。

# c - 串行 COM 端口未打开

> ID：15862823
> 
> 赞同：2
> 
> 时间：2013-04-07T13:19:39.163
> 
> 标签：c, winapi, serial-port

我正在尝试在 Win32 应用程序中打开串行 COM 端口。端口正确打开，但如果我之前使用 Teraterm 或超级终端打开它，我可以发送接收字节。

如果我从设备管理器停用并激活 COM 端口（因此该端口刚刚未使用），我只需使用 Teraterm 或 Putty 打开 COM 端口，然后关闭它然后运行我的软件，我可以随时正确发送和接收。

我正在使用 Embarcadero X3 和 FileMonkey 使应用程序同时与 MACOSX 和 Win32 兼容。FileMonkey 不支持 VCL。

相同的代码在使用 VCL 的 Builder 6 c++ 上运行良好，但无论如何它不应该影响它。我的代码真的很简单。

这是一个非常奇怪的行为。似乎我需要先初始化 COM（我正在使用 FTDI 转换器）才能使用它，当 PC 重新启动或我从设备管理器停用并重新激活 COM 时，似乎这个 INIT 消失了，我只需要打开COM 使用另一个串行软件恢复它，然后使用我的软件。

注意：一旦端口初始化，我就可以完全控制我的软件。我确信我的代码确实打开了 COM 端口，因为如果我尝试将它与其他软件一起使用，那么一旦 iNIT 完成，COM 就会显得很忙。所以没有闪光警报，到目前为止，应用程序正在另一边工作。

我有这个问题很久了，我现在决定解决它！

这是我的代码：

```
// GLOBAL VARIABLES
HANDLE hComm = NULL;
COMMTIMEOUTS ctmoNew = {0}, ctmoOld;

DCB dcbCommPort; 
      hComm = CreateFile("COM2",

                      GENERIC_READ | GENERIC_WRITE,
                      0,
                      0,
                      OPEN_EXISTING,
                      0,
                      0);

    if(hComm == INVALID_HANDLE_VALUE)
     {

        Application->Terminate();
     }

    GetCommTimeouts(hComm,&ctmoOld);
    ctmoNew.ReadTotalTimeoutConstant = 100;
    ctmoNew.ReadTotalTimeoutMultiplier = 0;
    ctmoNew.WriteTotalTimeoutMultiplier = 0;
    ctmoNew.WriteTotalTimeoutConstant = 0;
    SetCommTimeouts(hComm, &ctmoNew);
    dcbCommPort.DCBlength = sizeof(DCB);
    GetCommState(hComm, &dcbCommPort);
    BuildCommDCB("115200,N,8,1", &dcbCommPort);
    SetCommState(hComm, &dcbCommPort); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-28T13:20:54.663

只是一种可能性，不确定这是问题所在。

但与我们典型的 COM 端口打开代码的一个不同之处在于，我们在 CreateFile 成功后直接使用[SetupCom](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363439(v=vs.85).aspx)并设置我们的缓冲区大小，通常为 4KB。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-12T14:56:02.790

将您的设置更改为：

"115200,NOPARITY,8,ONESTOPBIT"

# ruby-on-rails - 如何仅向用户显示他标记为“完成”的任务？

> ID：15862825
> 
> 赞同：0
> 
> 时间：2013-04-07T13:19:44.647
> 
> 标签：ruby-on-rails

我有两个模型：

```
User(id:integer name:string) and Task(id:integer task:string). 
```

情景是：

1.  我在模型任务中添加了一些记录。这些任务对每个人都是可见的。
2.  用户点击“完成”。
3.  该任务为用户标记为“完成”。

如何仅向用户显示他已完成的任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T13:24:49.560

我会这样：

在任务模型中创建一个名为 done 的方法

```
def done
   where(:status => 'done', :user = current_user)
end 
```

然后在任务控制器中执行@done = Task.done

然后在视图中

```
<%= @done.each do |one_done| %>
  <%= one_done.name %> 
<% end %> 
```

您需要确保`User has_many :tasks`迁移`Task belongs_to :user` **已在`Task (user_id)`**.

# java - 使用netbeans在java中更改密码程序

> ID：15862832
> 
> 赞同：0
> 
> 时间：2013-04-07T13:20:42.573
> 
> 标签：java, database, swing

经过大惊小怪，我使用了 JAVA DB，现在使用 apache Derby 客户端驱动程序来使用，最终进入我的数据库后，我遇到了一个新问题

```
 private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         
    String uname = jTextField1.getText();
    String strpass = jPasswordField1.getText();
    String newpass = jPasswordField2.getText();
    String conpass = jPasswordField3.getText();

    try
    {
    DriverManager.registerDriver(new org.apache.derby.jdbc.EmbeddedDriver());
    }
    catch(SQLException ex1)
    {
        ex1.printStackTrace();
    }

      try      
    {

        Class.forName("org.apache.derby.jdbc.ClientDriver");
    }
    catch(ClassNotFoundException ex)
    {
        ex.printStackTrace();
    }
    try
    {
        Connection con = DriverManager.getConnection("jdbc:derby://localhost:1527/niiitusers");
        Statement st = con.createStatement();
        ResultSet rs = st.executeQuery("Select * from app.userlogin");
        while(rs.next())
        {
            String usrname = rs.getString("username");
            String passwd = rs.getString("password");
            if(uname.equals(usrname) && strpass.equals(passwd))
            {

                if(newpass.equals(conpass))
                {
                    Statement st1 = con.createStatement();
                    ResultSet i = st1.executeQuery("UPDATE app.userlogin SET password='newpass' where username='usname'");//query i am using to update the password
                    JOptionPane.showMessageDialog(null, "PASSWORD UPDATE SUCCESSFUL");

                }

                else
                {
                    JOptionPane.showMessageDialog(null, "PLEASE CONFIRM PASSWORD");
                }}
            else if(uname.equals("") && strpass.equals("") && newpass.equals(""))
            {
                JOptionPane.showMessageDialog(null, "PLEASE ENTER ALL INFORMATION");
            }
            else
            {
                JOptionPane.showMessageDialog(null, "USERNAME NOT FOUND");
            }
            st.close();

            con.close();
        }

    }
            catch(SQLException e)
            {
                e.printStackTrace();
            }

}                                        

java.sql.SQLException: executeQuery method can not be used for update.
at org.apache.derby.client.am.SQLExceptionFactory40.getSQLException(Unknown Source)
at org.apache.derby.client.am.SqlException.getSQLException(Unknown Source)
at org.apache.derby.client.am.Statement.executeQuery(Unknown Source) 
```

它不执行更新操作。我不确定问题出在哪里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-08T16:38:40.563

不要使用 executeQuery 来更新密码。相反，使用 executeUpdate 进行更新。并且它没有Resultset 像这样使用它

```
 if(newpass.equals(conpass))
            {
                Statement st1 = con.createStatement();
                st1.executeUpdate("UPDATE app.userlogin SET password='newpass' where  
    username='usname'");
                JOptionPane.showMessageDialog(null, "PASSWORD UPDATE SUCCESSFUL");

            } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T13:22:41.460

它没有显示任何输出，因为您的 catch 块中没有任何内容。

首先，这需要改变......

```
catch (SQLException ex) {
   e.printStackTrace();
} } 
```

其次，我会看一些明显的东西，你是否使用了正确的凭据？数据库的 IP 地址是否正确？

无论哪种方式，堆栈跟踪都会为您提供所需的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-10T08:59:48.743

remove rs and use `executeUpdate()` instead of `executeQuery()`

the last `else` statement is also unnecessary

# asp.net - web.config 中的 loginUrl

> ID：15862833
> 
> 赞同：0
> 
> 时间：2013-04-07T13:20:44.930
> 
> 标签：asp.net, authentication, web-applications, web-config

我有管理员文件夹和用户文件夹。和用户文件夹内的 Login.aspx 页面和 admin 文件夹内的 Login.aspx 页面。

我在管理文件夹和用户文件夹中有 web.config，请帮助我在 web.config 中获取 loginUrl。

我使用这个代码：

web.config（管理文件夹）：

```
<authentication mode="Forms">
  <forms loginUrl="~/Admin/Login.aspx" timeout="2880"/>
</authentication> 
```

web.config（用户文件夹）：

```
<authentication mode="Forms">
  <forms loginUrl="~/User/Login.aspx" timeout="2880"/>
</authentication> 
```

但它不工作并显示错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T17:05:35.260

该`<authentication>`部分只能在根 web.config 中定义，不能在子文件夹中覆盖。如果您想为站点的不同部分设置不同的登录页面，则必须在代码中实现它。例如，您可以订阅[`Authenticate`](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthenticationmodule.authenticate.aspx)事件并根据请求的 url 决定如果用户未通过身份验证，您要重定向到哪个登录页面。

# java - 输出不显示任何内容

> ID：15862834
> 
> 赞同：0
> 
> 时间：2013-04-07T13:20:46.137
> 
> 标签：java

因此，我在 Java 的高级继承中有一个任务，并且代码几乎已经敲定，但是在完成它并使其实际显示输出时遇到了问题。该程序分为 4 个不同的部分，我将它们列在下面。

账户.java

```
public abstract class Account 
{
protected long accountNumber;
protected double accountBalance;
public long getAccountNumber()
{
    return accountNumber;
}
public double getAccountBalance()
{
    return accountBalance;
}
public void setAccountNumber(long number)
{
    number = accountNumber;
}
public void setAccountBalance(double balance)
{
    balance = accountBalance;
}
public void setUpAccount(long number, double  balance) //look up constructors
{
    number = accountNumber;
    balance = accountBalance;
}
public String toString()
{
    return "Account Number: " + accountNumber + " Account Balance: " + accountBalance;
}
public abstract double computeInterest(int intPeriod);
} 
```

Checkings.java

```
public class Checking extends Account
{
public String toString()
{
    String info =  "Checking\nAccount Number: " + accountNumber + 
                                                   "\nAccount Balance: " + accountBalance ;
    return info;
}
public Checking(long number)
{
    number = accountNumber;
}
public double computeInterest(int intPeriod) 
{
    double total = ((accountBalance - 700) * .02) * 3;
    return total;
}
} 
```

储蓄.java

```
public class Savings extends Account
{
private double interestRate;
public double getInterest()
{
    return interestRate;
}
public void setInterest(double inter)
{
    inter = interestRate;
}
public String toString()
{
    String info = "Savings\nAccount Number: " + accountNumber + " \nAccount Balance: " 
                                                          + accountBalance + " \nInterest Rate: " + interestRate;
    return info;
}
public Savings(long number, double interest)
{
    number = accountNumber;
    interest = interestRate;
}
public double computeInterest(int intPeriod) 
{
    double total = Math.pow((1 + interestRate), intPeriod) * accountBalance - accountBalance;
    return total;   
}
} 
```

AccountArray.java

```
public class AccountArray 
{   
    public static void main(String[] args)
    {
        Account[] refAccount = new Account[10];
        /*refAccount[0] = new Checking(100);
        refAccount[1] = new Checking(101);
        refAccount[2] = new Checking(102);
        refAccount[3] = new Checking(103);
        refAccount[4] = new Checking(104);
        refAccount[5] = new Savings(105, .02);
        refAccount[6] = new Savings(106, .02);
        refAccount[7] = new Savings(107, .02);
        refAccount[8] = new Savings(108, .02);
        refAccount[9] = new Savings(109, .02);

        refAccount[0].setAccountBalance(1000.0);
    refAccount[1].setAccountBalance(2000.0);
    refAccount[2].setAccountBalance(3000.0);
    refAccount[3].setAccountBalance(4000.0);
    refAccount[4].setAccountBalance(5000.0);
    refAccount[5].setAccountBalance(6000.0);
    refAccount[6].setAccountBalance(7000.0);
    refAccount[7].setAccountBalance(8000.0);
    refAccount[8].setAccountBalance(9000.0);
    refAccount[9].setAccountBalance(10000.0);*/
    for(int inc = 0; inc < 10; inc++ )
    {
        refAccount[0] = new Checking(100);
        refAccount[1] = new Checking(101);
        refAccount[2] = new Checking(102);
        refAccount[3] = new Checking(103);
        refAccount[4] = new Checking(104);
        refAccount[5] = new Savings(105, .02);
        refAccount[6] = new Savings(106, .02);
        refAccount[7] = new Savings(107, .02);
        refAccount[8] = new Savings(108, .02);
        refAccount[9] = new Savings(109, .02);

        refAccount[0].setAccountBalance(1000.0);
        refAccount[1].setAccountBalance(2000.0);
        refAccount[2].setAccountBalance(3000.0);
        refAccount[3].setAccountBalance(4000.0);
        refAccount[4].setAccountBalance(5000.0);
        refAccount[5].setAccountBalance(6000.0);
        refAccount[6].setAccountBalance(7000.0);
        refAccount[7].setAccountBalance(8000.0);
        refAccount[8].setAccountBalance(9000.0);
        refAccount[9].setAccountBalance(10000.0);
    }
    for(int ctr  = 0; ctr < 10; ctr++)
    {
        System.out.println(refAccount[ctr].toString());
    }
}

} 
```

有什么我喜欢的东西真的很明显失踪了吗？这一切都编译得很好，但输出只显示 0 而不是帐号、余额或利息。

任何帮助将不胜感激，因为我的时间不多了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T13:24:57.763

你所有的setter方法看起来都是错误的，你把它们当作......

```
public void setAccountNumber(long number)
{
    number = accountNumber;
}
public void setAccountBalance(double balance)
{
    balance = accountBalance;
} 
```

你所做的只是设置参数值，它们应该是......

```
public void setAccountNumber(long number)
{
    accountNumber= number;
}
public void setAccountBalance(double balance)
{
    accountBalance= balance;
} 
```

你可以确保这不会发生我让你的参数最终

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T13:25:58.340

看看你的构造函数和设置器你反转你的变量属性

前任

```
public void setAccountNumber(long number)
{
    number = accountNumber;
} 
```

应该

```
public void setAccountNumber(long number)
{
    accountNumber = number;
} 
```

你所有的设置器和构造器都一样

# php - Laravel3：如何将发布方法转发到控制器的操作？

> ID：15862835
> 
> 赞同：0
> 
> 时间：2013-04-07T13:20:48.117
> 
> 标签：php, laravel, laravel-3

```
Route::get('admin/user/add', function()
{
    if (!Input::has('submit'))
        return View::make('theme-admin.user_add');
    else
        Redirect::to('admin@user_add_process');
}); 
```

正常显示`GET request`注册`admin/user/add`表单。但是，提交表单时，我必须将其重定向到`action_user_add_process()`函数，`Admin controller`以便将值保存到数据库。

上面的解决方案不起作用，我得到 404。

我这样称呼表单动作：

```
action="{{ URL::to('admin/user/add') }}"> 
```

我该如何解决这个问题？

附言。如果有更短的方法来实现这一点，请告诉我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T16:29:41.773

您需要使用 Redirect 方法指定您正在重定向到控制器操作`to_action()`。

```
return Redirect::to_action('admin@user_add_process'); 
```

或者，您可以只使用这个甚至不使用您创建的路由的 URL，从而使 if/else 无关紧要。

```
{{ URL::to_action('admin@user_add_process') }} 
```

第三个注意事项，保持你的路线清洁使维护工作更容易向前推进。由于路线使用宁静的方法，因此请利用它。使用相同的 URL，您可以使用 GET 请求创建和返回视图，并使用 POST 请求提交表单。

```
Route::get('admin/user/add', function() { ... }

Route::post('admin/user/add', function() { ... } 
```

您还可以让您的路线自动使用如下控制器操作：

```
Route::post('admin/user/add', 'admin@user_add_process'); 
```

# java - 为什么 Class.getSuperClass() 方法不能准确地获取超类类型实例？

> ID：15862836
> 
> 赞同：2
> 
> 时间：2013-04-07T13:20:53.717
> 
> 标签：java, class, rtti

假设有两个类，即`Pet`和`Dog`。`Pet`类是类的超`Dog`类。

问题01：

当我如下编码时，发生编译错误：`Type mismatch: cannot convert from Class<capture#2-of ? super Dog> to Class<Pet>`

```
Class<Pet> c1 = Dog.class.getSuperclass(); 
```

它必须是这样的：

```
Class<? super Dog> c2 = Dog.class.getSuperclass(); 
```

此外，当我使用 时`c2.newInstance()`，它只返回一个`Object`实例。为什么我不能得到一个`Class Instance`of `class Pet`？

问题02：

当我 System.out 时`c2.getName()`，它输出`"pet"`！所以 c2 刚刚得到了我想要的信息。

我真的被这些弄糊涂了。任何人都可以提供任何帮助吗？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T13:31:29.440

Java 中的反射 API 比泛型更古老。RTTI 中的一些方法反映了这一点。

此外，RTTI 是*运行时*特性，泛型是*编译*特性。有时，编译器没有足够的信息来检查运行时类型是否正确。

但是，例如，您的`newInstance`示例无效。

```
public class Test {
    class Pet {}

    class Dog extends Pet {}

    public static void main(String[] args) throws Exception {
        Class<Dog> dogClass = Dog.class;
        Dog dog = dogClass.newInstance();
    }
} 
```

编译没有问题，因为`Class<T>`方法声明是`T newInstance()`

如果我们`getSuperClass()`举个例子，你首先要明白编译器不知道做什么`getSuperClass()`。它只查看方法声明。这就是为什么它不知道返回的类真的是一个`Pet`. 它只是将变量的类型与返回的对象的类型进行比较`getSuperClass`。变量是`Class<Pet>`和返回的对象是`Class<? super Dog>`，那是不一样的。编译器不模拟`getSuperClass`实现，也不知道返回的确切对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T13:27:41.183

一篇文章的问题太多了......

这里的一般答案是遗留和向后兼容性。泛型已在 1.5 版中引入 java。方法`getSuperClass()`自 1.0 版开始存在于 java 中。java 创建者无法破坏与旧版本的兼容性，因此他们没有更改其原型。这就是为什么你必须强制`Dog.class.getSuperclass();`转换`Class<? super Dog>`或类似的东西。

不幸的是`newInstance()`，它在创建“正确”实例时返回普通对象也是如此。所以你也必须在这种情况下施放。因此`getName()`返回正确的类名：该类确实是`Pet`.

# yii - yii结合模型关系

> ID：15862842
> 
> 赞同：2
> 
> 时间：2013-04-07T13:21:43.713
> 
> 标签：yii, relationship

我想知道如何（如果可能的话）在 Yii 模型中组合（联合）关系。

我有以下型号：

*   用户
*   国家
*   省
*   城市
*   物品

地理层级关系为：

*   国家有很多省
*   省有很多城市
*   城市有很多项目

国家和省级有很多项：'through'=>'cities'

用户-地理关系有点复杂：

*   用户 - 国家（多对多）
*   用户 - 省（多对多）
*   用户 - 城市（多对多）

因此，可以将用户分配到任何地理级别，并将隐含分配到该级别的所有子级别。

例如。分配到加拿大、加利福尼亚和芝加哥的用户将有权访问：

*   加拿大所有城市所有省份的所有物品
*   以及加州所有城市的所有物品
*   以及芝加哥的所有物品

因此，我想查看通过用户的地理级别将哪些项目分配给用户。所以我想建立一个关系，允许我通过访问“items”属性（例如$myUser->items）来访问分配给它们的所有项目。

实际上，我想将这些组合成一个称为“项目”的关系：

```
'countryItems' => array(self::HAS_MANY, 'Item', array('id' => 'country_id'), 'through'=>'countries'),
'provinceItems' => array(self::HAS_MANY, 'Item', array('id' => 'province_id'), 'through'=>'provinces'),
'cityItems' => array(self::HAS_MANY, 'Item', array('id' => 'city_id'), 'through'=>'cities'), 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T17:30:08.480

这里的问题是，您无法创建一个 SQL 语句来为您获取用户的所有不同项目，因为您在项目和用户之间的连接是不明确的：一个项目可以通过不同的路径连接到用户。这意味着，同一个项目甚至可以有多个连接到用户（例如，通过城市和通过省）。

您可以尝试为`JOIN`用户和项目之间的每个可能路径添加一个（通过国家、省和城市）。但是提到的歧义总是会妨碍您：您最终可能会得到一个包含重复项的结果。

而且由于在原始 SQL 中没有解决方案，你不能单独使用 Yii 关系来解决它。不过，您总是可以编写一个吸气剂：

```
public getItems()
{
    $items = array();

    foreach($this->countryItems as $item)
        $items[$item->id] = $item;

    foreach($this->provinceItems as $item)
        $items[$item->id] = $item;

    foreach($this->cityItems as $item)
        $items[$item->id] = $item;

    return $items;
} 
```

这有效地为您提供了一个`$items`包含该用户所有不同项目的属性。

# android - Android TelephonyManager 'answer' 事件

> ID：15862843
> 
> 赞同：1
> 
> 时间：2013-04-07T13:21:47.690
> 
> 标签：android, telephonymanager, phone-state-listener

我一直在探索Android `Telephony Manager`，发现有一种方法可以监听响铃、摘机和空闲等事件。但是，这对我来说还不够……当实际发起呼叫时，我得到一个“摘机”事件，但是当我呼叫的人按下“接听”按钮时，我什么也没有得到。

当我打电话给他/她时，有没有办法确切地知道某人何时实际按下了接听按钮，换句话说，我想知道有人接听电话的时间？

任何帮助\建议将不胜感激......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T13:41:20.133

我不认为这是可能的。至少我知道没有这样的状态/事件。所以你最好的选择是坚持使用**CALL_STATE_OFFHOOK**。

# visual-studio - 创建新项目后更改.net框架

> ID：15862847
> 
> 赞同：0
> 
> 时间：2013-04-07T13:22:04.497
> 
> 标签：visual-studio

我用 Visual Studio 2012 和 .Net Framework 4.5 编写了一个程序。现在我想将 .Net Framework 更改为 .Net Framework 4。我该如何更改它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T13:23:21.540

右键单击项目，选择属性。

在“应用程序”下，您有一个名为 TargetFramework 的下拉菜单。将其更改为 4.0

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T13:23:36.260

鼠标右键单击*解决方案资源管理器*中的项目。*应用程序*选项卡上有*TargetFramework*下拉菜单。

# django - Django：POST 表单（我用 csrf_protect 做错了 smt）

> ID：15862852
> 
> 赞同：0
> 
> 时间：2013-04-07T13:22:29.377
> 
> 标签：django, post

我究竟做错了什么？

```
...
from django.views.decorators.csrf import csrf_protect
from django.template import RequestContext

@csrf_protect
def home(request):
    return render_to_response('home/home.html', {}, RequestContext(request))

def mail(request):
    if request.method == 'POST':
         ... 
```

形式：

```
<form method="POST" action="sendemail">
    {% csrf_token %}
    <input name="name" type="text" placeholder="Namr">
    <input name="email" type="text" placeholder="mail">
    <input type="submit">
</form> 
```

网址：

```
 url(r'^sendemail$', 'openshift.views.mail') 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T13:30:02.647

@csrf_protect 装饰器应该在处理表单的视图上，而不是显示表单的视图上。

此外，如果您安装了 CSRF 中间件，那么所有 POST 视图都会自动受到保护。

请参阅文档：[https ://docs.djangoproject.com/en/dev/ref/contrib/csrf/](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/)

# django - 如何避免在 django 中提交表单超时？

> ID：15862854
> 
> 赞同：1
> 
> 时间：2013-04-07T13:22:42.677
> 
> 标签：django, django-forms

简而言之，我已经构建了一个表单来从 csv 文件中导入数据。但是因为我在表单提交的视图中做了很多数据验证和转换，所以在导入长 csv 文件时我得到了 504 Gateway Time-out。那么该怎么办？

我曾想过将表单提交后的导入交给 celery 任务，但如果发生错误，用户将不会收到错误消息。

# javascript - 使用 this.form 时将 JavaScript 函数转换为 jQuery

> ID：15862860
> 
> 赞同：-2
> 
> 时间：2013-04-07T13:23:25.410
> 
> 标签：javascript, jquery, getelementbyid

我在一个页面上有多个类似于此的表单：

```
<form action="hreftomyserver.php" method="get" target="_blank">
    <ul>
        <li id="li_address">8447 Pardee Hollow Rd.</li>
    </ul>
    <input class="btn" type="button" value="process form" onclick=myfunction(this.form) />
</form>
<form action="hreftomyserver.php" method="get" target="_blank">
    <ul>
        <li id="li_address">123 Main Street</li>
    </ul>
    <input class="btn" type="button" value="process form" onclick=myfunction(this.form) />
</form> 
```

我正在使用以下 JavaScript 来处理`onclick`事件中的表单：

```
function myfunction(form) {
    var address = form.getElementById('li_address').innerHTML;
    alert("the address is: " + address);
} 
```

我想做的是`li_address`使用 jQuery 访问元素，但我不知道如何实现等效的 jQuery 来替换`form.getElementById('li_address').innerHTML`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T13:26:51.850

如果您使用 jQuery 删除内联事件处理程序，并使用`text()`获取元素文本内容：

```
$('.btn').on('click', function() {
    var adress = $('#li_address').text();
    alert("the address is: " + address);
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T13:27:07.177

使用简单的 jQuery id 选择器

```
function myfunction(form){
  var address = $("#i_address").html();
  alert("the address is: " + address);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T21:18:17.720

这是我正在寻找的语法： $('#li_address', form).val()

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T13:26:21.177

```
var address = form.getElementById('li_address').innerHTML; 
```

变成：

```
var address = $('#li_address').html(); 
```

由于您使用的是 ID，因此也无需在此处获取涉及的表单。如果您计划有多个地址字段，请考虑使用一个类：

```
var address = $('.li_address').first().html(); 
```

# python - 如何计算用户在python中输入的文本字符串中有多少个单词

> ID：15862863
> 
> 赞同：1
> 
> 时间：2013-04-07T13:23:49.273
> 
> 标签：python, python-3.x, counter

我想知道是否有人可以提供帮助；我对python很陌生。

我目前正在创建一个工具，它分析用户输入的文本并显示该短语属于哪个列表的反馈。

到目前为止，程序处于无限循环中，并计算总共输入了多少表达式，然后计算某个列表中某事发生了多少次。

```
if text in access:
    accessno +=1
    counter +=1
    print ('This could be classed as speech act 1: Access')
    print ("number of access hits ", accessno)
    print ("number of total hits ", counter) 
```

所以我的问题是：如何让程序计算用户输入的句子中有多少单词？

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T13:24:18.243

您可以通过以下简单方式进行操作。

```
s = input()
# input() is a function that gets input from the user
len(s.split())
# len() checks the length of a list, s.split() splits the users input into a word list. 
```

链接：

[输入（）](http://docs.python.org/3/library/functions.html#input) [len（）](http://docs.python.org/2/library/functions.html#len) [拆分（）](http://docs.python.org/2/library/stdtypes.html#str.split)

* * *

例子：

```
>>> s = input()
"hello world"
>>> s
'hello world'
>>> s.split()
['hello', 'world']
>>> len(s.split())
2 
```

* * *

奖励：在一行中完成所有操作！

```
print('You wrote {} words!'.format(len(input("Enter some text, I will tell you how many words you wrote!: ").split()))) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-07T13:32:40.160

```
name = input ()
print len(name) 
```

# java - 我应该使用什么分辨率的图像？

> ID：15862866
> 
> 赞同：0
> 
> 时间：2013-04-07T13:23:59.660
> 
> 标签：java, android, sqlite

我需要在我的游戏中使用一些图像。我将从 sqlite 数据库中随机获取它们。它们不会全屏显示，可能是屏幕的 80%，我必须在图像下方有一些按钮。我知道当我为我的应用程序设置背景时，我需要有几个分辨率，xhdpi、hdpi、mdpi 和 ldpi，例如 xhdpi 是 640X480。但是我的数据库中只有一个图像。我应该使用什么分辨率在任何手机上看起来都不错？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T13:26:05.120

像“我应该使用分辨率在任何手机上看起来都不错”这样的问题表明您不熟悉 Android 处理屏幕的方式，因为此类问题的答案只是“使用正确的分辨率”。和心灵密度。在这里阅读：[支持多个屏幕](http://developer.android.com/guide/practices/screens_support.html)

# ios - Livecode mobileAddContact

> ID：15862869
> 
> 赞同：3
> 
> 时间：2013-04-07T13:24:18.090
> 
> 标签：ios, contacts, addressbook, livecode

有没有人在 ios 上使用 mobileAddContact 并设法添加地址？

到目前为止，我可以添加姓名、联系方式（电话、电子邮件等），但无法添加地址详细信息（街道、城市、邮编等）。

这是我写的代码；

```
 mobileAddContact \
     "firstname", tFirstName, \
     "middlename", tMiddleName, \
     "lastname", tLastName, \
     "prefix", tPrefix, \
     "organization", tOrganisation, \
     "emailhome", tEmailHome, \
     "phonemobile", tPhoneMobile, \
     "phonehome", tPhoneHome, \
     "phonework", tPhoneWork, \
     "note", tNote, \
     "addressstreethome", "Street Name", \
     "addresscityhome", "City Name", \
     "addressstatehome", "State Name", \
     "addressziphome", "Postcode", \
     "addresscountryhome", "Country" 
```

任何帮助，将不胜感激。

蒂亚，AA。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:27:31.693

不幸的是，您在文档中发现了一个错误。LiveCode 5.5.1 对移动功能的这一领域进行了改进，包括语法更改，但并未导致文档更新。

mobileContact 命令都需要一个嵌套的数据数组，用于创建/更新联系人信息。字典条目都在更新，将在 LiveCode 6.0 中。同时，请查看 iOS 发行说明的第 48 页，其中详细说明了这些命令的确切用法和格式。

```
local tContactData

put "John" into tContactData["firstname"]
put "Smith" into tContactData["lastname"]
put "+44(0)77774443555" into tContactData["phone"]["mobile"][1]

mobileCreateContact tContactData 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T18:04:39.990

首先，您似乎遇到了需要向 RunRev 报告的错误。我检查了您的示例和文档中的语法，您的脚本中没有任何内容不应该工作。

其次，您可以尝试一些操作，例如将命令拆分为一个用于创建联系人，另一个用于使用地址信息更新联系人。您也可以尝试将所有信息（包括地址信息）放入变量中。似乎在您的示例中，包含变量的对有效，但包含字符串的对无效。

第三，我想知道通讯录中可以存储的数据量是否有上限。可能 tNote 中的数据太长了。我应该强调，我不确定后者是否重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T22:05:37.517

我刚刚测试了您发布的代码，但用字符串替换了您的变量。我创建了一个带有按钮和字段的空白堆栈，并将以下代码放入按钮中：

```
on mouseUp
   put "mr" into tContactData["prefix"] 
   put "ben" into tContactData["firstname"] 
   put "street" into tContactData["address"]["home"][1]["street"] 
   put "city"  into tContactData["address"]["home"][1]["city"] 
   put "state" into tContactData["address"]["home"][1]["state"] 
   put "zip" into tContactData["address"]["home"][1]["zip"] 
   put "country" into tContactData["address"]["home"][1]["country"] 

   mobileAddContact tContactData
   put the result into field 1
end mouseUp 
```

您会从字典中注意到，如果成功，它会将联系人的数字 ID 放入“结果”中。在我的情况下，我的 iOS 模拟器没有联系人，所以我得到了“1”，当我去我的联系人时，我有一个条目..“本先生”。

我希望这会有所帮助。

# android - eclipse android图形编辑器不起作用

> ID：15862886
> 
> 赞同：1
> 
> 时间：2013-04-07T13:25:49.813
> 
> 标签：android, eclipse

我刚刚在eclipse中创建了一个新的android项目并添加了一个相对布局。我可以使用 XML 添加控件，但无法使用图形编辑器添加任何控件。

我目前的代码是：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
</RelativeLayout> 
```

当我点击一个小部件时——比如一个按钮，一个带有对角线的黑色圆圈会短暂显示然后消失，我无法将控件拖到编辑器上。

如果我在代码中创建控件，它会显示正常，但我无法通过左键单击选择它，只能右键单击。然后一旦选择它就不能移动，并且移动手柄不会调整控件的大小。它只能被删除。关于为什么会这样的任何线索？我使用的是 4.2.2 版，我不知道还有什么可以提供帮助的。

# entity-framework-5 - 实体框架的无参数构造函数问题

> ID：15862894
> 
> 赞同：1
> 
> 时间：2013-04-07T13:26:24.233
> 
> 标签：entity-framework-5

我有以下代码导致实体框架出现无参数构造函数错误。我发现它是由 if (search.Active) 块和里面的日期引起的......但我不知道如何解决它。如何构建我的日期以便 EF 与他们合作？谢谢。

```
var members = from m in Members select m;

if (!string.IsNullOrEmpty(search.Letter))
            members = members.Where(x => x.LastName.Substring(0, 1) == search.Letter.Substring(0, 1));

        if (search.Active)
        {
            if (DateTime.Now < new DateTime(DateTime.Now.Year, 10, 15))
            {
                members = members.Where(x => x.ExpireDate >= new DateTime(DateTime.Now.Year, 5, 31));
            }
            else
            {
                members = members.Where(x => x.ExpireDate >= new DateTime(DateTime.Now.Year + 1, 5, 31));
            }
        }

        return members.Select(x => new MemberListItem
            {
                FirstName = x.FirstName, 
                LastName = x.LastName, 
                MemberId = x.MemberId, 
                ExpirationDate = x.ExpireDate
            }).ToList(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T13:43:30.500

这可能会解决问题，因为 EF 在构建`DateTime`LINQ-to-Entities 查询的内部时可能会遇到问题：

```
if (search.Active)
{
    if (DateTime.Now < new DateTime(DateTime.Now.Year, 10, 15))
    {
        DateTime date = new DateTime(DateTime.Now.Year, 5, 31);
        members = members.Where(x => x.ExpireDate >= date);
    }
    else
    {
        DateTime date = new DateTime(DateTime.Now.Year + 1, 5, 31);
        members = members.Where(x => x.ExpireDate >= date);
    }
} 
```

# excel - 如果 Q>1.5，则 s1=a 和 s2= b，否则，计算 C=某个公式，然后 s1=min(a,c) 和 s2=min(a Q, C)

> ID：15862899
> 
> 赞同：0
> 
> 时间：2013-04-07T13:26:52.657
> 
> 标签：excel, if-statement, reference, cell

我需要在excel中写下以下语句。

**如果 Q>1.5，则 s1=a 和 s2= b，否则，计算 C=某个公式，然后 s1=min(a,C) 和 s2=min(a+Q, C)**

我无法在 s1 和 s2 的 if 语句中提供参考。我无法正确编写 if_false_statement 帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T15:29:48.703

您需要使用单独的公式计算 s1 和 s2。使用您的代数表达式，这意味着保存 s1 和 s2 值的单元格将需要分别具有以下公式。

```
 s1:  =if(Q>1.5,a,min(a,C))
  s2:  =if(Q>1.5,b,min(a+Q,C) 
```

在工作表中，这可能翻译如下（例如，我假设计算 C 只是“a + b”）。

![在此处输入图像描述](https://i.stack.imgur.com/X9FtQ.png)

# ios - 在 UISlider 中更改范围的图像

> ID：15862900
> 
> 赞同：-1
> 
> 时间：2013-04-07T13:26:59.430
> 
> 标签：ios, objective-c, uislider

有什么方法可以改变 UISlider 中 Range 的 Trackimage，独立于拇指的位置？

它应该如下所示：

![滑块](https://i.stack.imgur.com/jgOHU.png)

我已经有了没有黄色范围的滑块。我怎样才能达到黄色范围？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T14:02:23.490

**如果您的部署目标至少是 iOS 6.0，**您可以使用`UIImageResizingModeTile`. 示例代码：

```
static UIImage *blueYellowStripesImage() {
    UIGraphicsBeginImageContextWithOptions(CGSizeMake(100, 9), YES, 0); {
        [[UIColor blueColor] setFill];
        UIRectFill(CGRectMake(0, 0, 50, 9));
        [[UIColor yellowColor] setFill];
        UIRectFill(CGRectMake(50, 0, 50, 9));
        [[UIColor colorWithWhite:0 alpha:0.4] setFill];
        UIRectFillUsingBlendMode(CGRectMake(0, 5, 100, 4), kCGBlendModeNormal);
    }
    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    image = [image resizableImageWithCapInsets:UIEdgeInsetsZero resizingMode:UIImageResizingModeTile];
    return image;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    UIImage *image = blueYellowStripesImage();
    [self.slider setMinimumTrackImage:image forState:UIControlStateNormal];
    [self.slider setMaximumTrackImage:image forState:UIControlStateNormal];
} 
```

结果：

![带有平铺图像轨道的滑块](https://i.stack.imgur.com/Tmynb.gif)

# android - Android 连接到远程 mysql 数据库 JDBC Vs JSON

> ID：15862904
> 
> 赞同：2
> 
> 时间：2013-04-07T13:27:39.160
> 
> 标签：android, json, jdbc, tcp

我知道 JDBC 最适合与低延迟高带宽连接一起使用。最好使用 php 服务。

事情正在开发一个餐厅菜单应用程序，它应该从位于服务器上的数据库中检索数据。使用三星galaxy tab2 7inch作为目标设备并具有高带宽的稳定无线连接。我的第一次尝试是让Java服务器在具有数据库的同一台机器上运行，并且有很多线程可以检索数据并发送它们通过 tcp 套接字到 android 设备。

此实现导致主机和 android 设备上的 cpu 使用率很高，因为我有很多线程在后台工作。

我想尝试一下 JDBC，因为环境使我能够使用这样的实现。但到目前为止，连接到 DB 并没有成功。即使我在 android 应用程序清单上有 Internet 权限。

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        try {
            Class.forName("com.mysql.jdbc.Driver");
            this.setTitle("Driver started ");
            Connection con = (Connection) DriverManager.getConnection("jdbc:mysql://192.168.1.3/cafe", "root", "1234");
            this.setTitle("Connected to db");
        } catch (ClassNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (SQLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    } 
```

这段代码会给我以下错误

```
04-07 15:22:41.222: W/System.err(11318): com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure
04-07 15:22:41.222: W/System.err(11318): The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
04-07 15:22:41.238: W/System.err(11318):    at java.lang.reflect.Constructor.constructNative(Native Method)
04-07 15:22:41.238: W/System.err(11318):    at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
04-07 15:22:41.238: W/System.err(11318):    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
04-07 15:22:41.238: W/System.err(11318):    at com.mysql.jdbc.SQLError.createCommunicationsException(SQLError.java:1121)
04-07 15:22:41.238: W/System.err(11318):    at com.mysql.jdbc.MysqlIO.<init>(MysqlIO.java:355)
04-07 15:22:41.238: W/System.err(11318):    at com.mysql.jdbc.ConnectionImpl.coreConnect(ConnectionImpl.java:2479)
04-07 15:22:41.238: W/System.err(11318):    at com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2516)
04-07 15:22:41.245: W/System.err(11318):    at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2301)
04-07 15:22:41.245: W/System.err(11318):    at com.mysql.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:834)
04-07 15:22:41.245: W/System.err(11318):    at com.mysql.jdbc.JDBC4Connection.<init>(JDBC4Connection.java:47)
04-07 15:22:41.245: W/System.err(11318):    at java.lang.reflect.Constructor.constructNative(Native Method)
04-07 15:22:41.245: W/System.err(11318):    at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
04-07 15:22:41.245: W/System.err(11318):    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
04-07 15:22:41.245: W/System.err(11318):    at com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:416)
04-07 15:22:41.245: W/System.err(11318):    at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:317)
04-07 15:22:41.245: W/System.err(11318):    at java.sql.DriverManager.getConnection(DriverManager.java:175)
04-07 15:22:41.245: W/System.err(11318):    at java.sql.DriverManager.getConnection(DriverManager.java:209)
04-07 15:22:41.245: W/System.err(11318):    at com.example.anndroidjdbc.MainActivity.onCreate(MainActivity.java:23)
04-07 15:22:41.245: W/System.err(11318):    at android.app.Activity.performCreate(Activity.java:4465)
04-07 15:22:41.245: W/System.err(11318):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1053)
04-07 15:22:41.245: W/System.err(11318):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1934)
04-07 15:22:41.245: W/System.err(11318):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1995)
04-07 15:22:41.245: W/System.err(11318):    at android.app.ActivityThread.access$600(ActivityThread.java:128)
04-07 15:22:41.245: W/System.err(11318):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1161)
04-07 15:22:41.245: W/System.err(11318):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-07 15:22:41.245: W/System.err(11318):    at android.os.Looper.loop(Looper.java:137)
04-07 15:22:41.253: W/System.err(11318):    at android.app.ActivityThread.main(ActivityThread.java:4514)
04-07 15:22:41.253: W/System.err(11318):    at java.lang.reflect.Method.invokeNative(Native Method)
04-07 15:22:41.253: W/System.err(11318):    at java.lang.reflect.Method.invoke(Method.java:511)
04-07 15:22:41.253: W/System.err(11318):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
04-07 15:22:41.253: W/System.err(11318):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
04-07 15:22:41.253: W/System.err(11318):    at dalvik.system.NativeStart.main(Native Method)
04-07 15:22:41.253: W/System.err(11318): Caused by: java.net.SocketException: android.os.NetworkOnMainThreadException
04-07 15:22:41.253: W/System.err(11318):    at com.mysql.jdbc.StandardSocketFactory.unwrapExceptionToProperClassAndThrowIt(StandardSocketFactory.java:410)
04-07 15:22:41.253: W/System.err(11318):    at com.mysql.jdbc.StandardSocketFactory.connect(StandardSocketFactory.java:271)
04-07 15:22:41.253: W/System.err(11318):    at com.mysql.jdbc.MysqlIO.<init>(MysqlIO.java:305)
04-07 15:22:41.253: W/System.err(11318):    ... 27 more 
```

至于 PHP 网络服务，我真的不知道如何使用或设置它。你们觉得我应该怎么做？继续我的第一个实现，或者使用 php 服务切换到从 android 设备到 mysql db 的直接方法。

抱歉 这被认为是重复的。我只是希望您对所遇到的问题提出意见，如果有人可以指出更好的方法或可以帮助解决 JDBC 的错误，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T13:35:10.610

就在昨天，另一个用户问了同样的问题，并且在这个问题上找到了一些很好的答案 - [JDBC vs Web Service for Android](https://stackoverflow.com/questions/15853367/jdbc-vs-web-service-for-android/15853594#15853594)

> 至于 PHP 网络服务，我真的不知道如何使用或设置它。

我猜你得考[101](http://davidwalsh.name/web-service-php-mysql-xml-json)。

# django - Mongoengine FileField 保存到磁盘？

> ID：15862912
> 
> 赞同：6
> 
> 时间：2013-04-07T13:28:15.913
> 
> 标签：django, mongodb, pymongo, mongoengine

Mongoengine 将 FileField 和 ImageField 存储到 GridFS。复制原始文件/图像字段功能的最简单方法是什么？

编辑：

所以这是我目前的课程。我能够加载文件并将它们保存到磁盘，Mongo 在数据库中保存文件的路径。

我迷上了“to_python”，因为我相信它需要创建 proxy_class 的对象，但我不知道如何，如果我得到的只是文件的路径（作为传入的值）。

```
import os
import datetime

from mongoengine.python_support import str_types
from django.db.models.fields.files import FieldFile
from django.core.files.base import File
from django.core.files.storage import default_storage
from mongoengine.base import BaseField
from mongoengine.connection import get_db, DEFAULT_CONNECTION_NAME
from django.utils.encoding import force_text
#from django.utils.encoding import force_str

class DJFileField(BaseField):

    proxy_class = FieldFile

    def __init__(self,
                 db_alias=DEFAULT_CONNECTION_NAME, 
                 name=None,
                 upload_to='',
                 storage=None,
                 **kwargs):

        self.db_alias = db_alias
        self.storage = storage or default_storage
        self.upload_to = upload_to

        if callable(upload_to):
            self.generate_filename = upload_to

        super(DJFileField, self).__init__(**kwargs)

    def __get__(self, instance, owner):
        # Lots of information on whats going on here can be found
        # on Django's FieldFile implementation, go over to GitHub to
        # read it.
        file = instance._data.get(self.name)

        if isinstance(file, str_types) or file is None:
            attr = self.proxy_class(instance, self, file)
            instance._data[self.name] = attr

        elif isinstance(file, File) and not isinstance(file, FieldFile):
            file_copy = self.proxy_class(instance, self, file.name)
            file_copy.file = file
            file_copy._committed = False
            instance._data[self.name] = file_copy

        elif isinstance(file, FieldFile) and not hasattr(file, 'field'):
            file.instance = instance
            file.field = self
            file.storage = self.storage

        # That was fun, wasn't it?
        return instance._data[self.name]

    def __set__(self, instance, value):
        instance._data[self.name] = value

    # The 3 methods below get used by the FieldFile proxy_object
    def get_directory_name(self):
        return os.path.normpath(force_text(datetime.datetime.now().strftime(self.upload_to)))

    def get_filename(self, filename):
        return os.path.normpath(self.storage.get_valid_name(os.path.basename(filename)))

    def generate_filename(self, instance, filename):
        return os.path.join(self.get_directory_name(), self.get_filename(filename))

    def to_mongo(self, value):
    # Store the path in MongoDB
    # I also used this bit to actually save the file to disk.
    # The value I'm getting here is a FileFiled and it all looks
    # pretty good at this stage even though I'm not 100% sure
    # of what's going on.

        import ipdb; ipdb.set_trace()

        if not value._committed and value is not None:
            value.save(value.name, value)
            return value.path

        return value.path    

    def to_python(self, value):
        # Now this is the real problem, value is the path that got saved
        # in mongo. No idea how to return a FileField obj from here.
        # self.instance and instance throw errors. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T12:32:26.763

我认为这将是一个很好的补充 - 可能会调用`LocalFileField`它以使其更加框架不可知，如果您提供测试和文档，它将成为[https://github.com/MongoEngine/extras-mongoengine的一个很好的补充](https://github.com/MongoEngine/extras-mongoengine)

我没有将它放在核心中的唯一原因是 - 如果您正在运行副本集，该文件仍将仅存储在一个节点上。

# c++ - 从比较中扩展类型

> ID：15862917
> 
> 赞同：0
> 
> 时间：2013-04-07T13:29:04.497
> 
> 标签：c++, templates, compiler-construction, typing

我知道下面的代码**不起作用**，我完全理解**为什么**。我实际上不明白的是**为什么不**：

```
int main(int argc, char *argv[]) {
    std::cout << (atoi(argv[1]) ? "foo" : 'b') << std::end;
} 
```

**为什么**：当然，这个表达式可能生成字符串或整数，这是编译器指出的错误：

```
error: operands to ?: have different types ‘const char*’ and ‘char’ 
```

**为什么不**：由于和`operator<<`两种类型都有绑定，为什么编译器不像在模板中那样执行代码扩展——我猜这就是执行的操作。`const char*``char`

例如，如果我有：

```
template <class T>
void a(const T& value) {
    std::cout << a << std::endl;
} 
```

我可以调用`a("foo")`and `a('b')`，而且——我猜——编译器会使用类型名称对函数进行一次扩展，`[T = const char*]`然后使用`[T = char]`.

这可能是一个简单的问题，即 C++ 做什么——以及它不做什么——，但我看不到如果执行扩展，是否有任何极端情况会出现错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T13:32:10.997

C++ 是一种已编译的静态类型语言，并且**必须在编译时知道表达式的类型**。表达式`atoi(argv[1]) ? "foo" : 'b'`可能是 a`const char*`或`char`，具体取决于 的值`argv[1]`，这在编译时是未知的。只有在程序实际执行时才知道这个值。因此，当编译器试图将此表达式转换为机器代码时，它无法决定将表达式视为哪种类型。

要查看它确实与 没有任何关系`operator<<`，只需使用表达式本身：

```
int main(int argc, const char* argv[])
{
  atoi(argv[1]) ? "foo" : 'b';
} 
```

即使这样[也不会编译](http://ideone.com/D3dgyj)，会出现以下错误：

```
error: operands to ?: have different types ‘const char*’ and ‘char’ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-07T13:33:46.387

`cout`它与or无关`operator <<`。表达方式

```
atoi(argv[1]) ? "foo" : 'b' 
```

本身不会编译。您输入的第二个和第三个运算符`?:`必须是相同的类型，或者可以隐式转换为彼此的类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T13:38:50.297

这是你认为你应该要求的：

```
#include <iostream>
#include <utility>
#include <type_traits>
#include <functional>

template<typename Left, typename Right>
auto tri( bool b, Left&& left, Right&& right )
  -> decltype( std::forward<Left>(left)() )
{
  if (b)
    return std::forward<Left>(left)();
  else
    return std::forward<Right>(right)();
}

int main(int /*argc*/, char *argv[]) {
  tri(
     atoi(argv[1]),
     []()->std::ostream&{ return std::cout<<"foo"; },
     []()->std::ostream&{ return std::cout<<'b'; }
  ) << std::endl;
} 
```

但事实并非`?`如此。

可以修改 C++ 来满足您的要求，但类型级联会无限增长。每次您有一个可以返回 type`A`或 type的表达式时，都`B`必须对调用代码进行分叉，这可能会导致进一步的分叉。

必须扩展函数的签名以列出它“可能”返回的所有类型。

现在，虽然这可能是未来 C++ 的一个有价值的特性，但它不是 C++ 现在所做的。C++ 中的每个表达式都有一个单一的、明确的类型——在模板代码中，当您实例化模板时会发生这种情况。

顺便说一句，在 C++ 中具有多类型返回值的能力将为您提供类似于异常处理的能力，其中函数可以返回值或错误标志。由于调用代码必须在您调用多类型返回值函数时自动分叉，因此它必须处理该错误标志（通过将其作为替代类型返回，或通过本地处理）。

# frameworks - Yii URLFormat 路径将不起作用

> ID：15862921
> 
> 赞同：0
> 
> 时间：2013-04-07T13:29:11.073
> 
> 标签：frameworks, yii

出于某种原因，由于我启用了 urlManager，因此 domain.com/site/logout/ 或 domain.com/logout/ 将无法工作。

这是我的.htaccess：

```
RewriteEngine on

# if a directory or a file exists, use it directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# otherwise forward it to index.php
RewriteRule . index.php 
```

...这是我的 main.cfg

```
 'components'=>array(
       'assetManager' => array(
          'linkAssets' => true,
        ),
        'user'=>array(
           'allowAutoLogin'=>true,
         ),
         'request'=>array(
            'baseUrl' => "http://google.com"
         ),

         'urlManager'=>array(
                    'urlFormat'=>'path',
                    'showScriptName'=>false,
                    'rules'=>array(
                            'rules'=>array(
                                'post/<id:nd+>/<title:.*?>'=>'post/view',
                                'posts/<tag:.*?>'=>'post/index',
                                '<controller:nw+>/<action:nw+>'=>'<controller>/<action>',
                    ),
            ), 
```

有任何想法吗？谢谢 ：/

# git - 合并冲突后修复 git“当前不在任何分支上”

> ID：15862922
> 
> 赞同：5
> 
> 时间：2013-04-07T13:29:15.010
> 
> 标签：git

我试图提交更改。在经历了很多问题和冲突之后，我设法解决了每一个问题。但是，我提交的代码目前不在任何分支上（如图`git status`所示）。我该如何解决这个问题？我尝试了几种解决方案，但没有一个对我有用。我尝试了该命令`git merge`，但它说它已经是最新的。

### 更新

结果`git log --all --graph --oneline --decorate`是：

```
* 7833c31 (HEAD) Changed LI tool
* c205a25 Fixed merge conflicts
*   7b10e48 (vsproj/master, master) 4-7-2013
|\  
| * cc51cb0 3/9/2013
| * 62ea718 Updated mail and added barcode
| * 9a3573a 1-7-2013
| * 96ded0e Updated ExamsPrinter
| * be6638a 12-25-2012
| * 89cba4b Added HTML to PDF and updated Email app
| * fa96aeb Updates
| * 9ffcfcc Changes in CloudDownloader, LinkedIn & Twitter apps
| * 609c555 Added README file
| * bf8a344 Started implementing CloudDownloader, created FileDownloader, updated FacebookInfoBot
| * c3556ce First Commit
* 3a59cd5 4-7-2013 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-07T21:46:15.707

不确定发生了什么，但您可以通过创建一个新分支然后合并它来轻松修复它：

```
git branch lost_changes
git checkout master
git merge lost_changes 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T23:08:07.400

所以你可以在你的历史上看到这里发生了什么。你做了一个合并，生产

```
*   7b10e48 (vsproj/master, master) 4-7-2013 
```

然后在明确断开您的结帐与您提交的主分支提示%1 的连接之后

```
* c205a25 Fixed merge conflicts 
```

和

```
* 7833c31 (HEAD) Changed LI tool 
```

因此，只需让您当前的结帐成为您所做的主分支提示

```
git checkout -B master HEAD 
```

这看起来像是这里最简单的恢复。

为什么要明确提交合并冲突？你必须告诉 git`git add`在它接受提交之前你已经解决了所有问题（通过正确的内容）。

%1：我得到一个无引用“分离”结帐的通常方式是`git checkout HEAD@{1}`，有很多方法，git 对分支提示相当随意，所以在你对这里发生的事情感到满意之后你会不会。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T21:45:41.643

如果您真的不在分支上，简单的解决方案是创建一个新分支，如下所示：

```
git branch <name> 7833c31 
```

或者

```
git branch <name> HEAD 
```

并且您可以着手解决问题，或者希望继续您的开发。

# ssas - SSAS 中的自定义汇总

> ID：15862925
> 
> 赞同：2
> 
> 时间：2013-04-07T13:29:29.710
> 
> 标签：ssas, mdx, average, multidimensional-array, rollup

我在 SSAS 中创建了一个多维数据集，表示“一段时间内从网络元素测量的计数器的值”，因此多维数据集的结构如下：

方面：

```
 - Time
    - Counter 
    - Network Element (a parent-child dimension) 
```

事实 ：

```
 - Value: which represent the numeric value measured of the counter 
```

对于某些计数器，我必须通过计算平均值来汇总值。

我正在使用 SQL Server 2012 企业版，我尝试在维度 Counter 中创建一个列来保存自定义汇总的 MDX 表达式，以便该表达式通过计数器的维度网络元素 (NE) 执行平均汇总 [433 ] 将会：

```
Avg([NE].[NE Parent SK].CURRENTMEMBER.CHILDREN, ([Measures].[Value],[Counter].[Counter SK].&[433])) 
```

[措施].[价值]：是事实。

当我浏览多维数据集时，该计数器消失了，这意味着它具有 NULL 值。

我尝试使用计算成员 [Average]，其计算如下：

```
[Measures].[Value]/[Measures].[Value Count] 
```

[Measures].[Value Count] 是 SSAS 计算的默认度量。

然后我将这个 MDX 表达式放入自定义汇总列：

```
[Measures].[Average] 
```

当我浏览多维数据集时，该计数器消失了，这意味着它具有 NULL 值。

我的第二个问题是：如何对每个维度执行两个不同的汇总计算（在我的情况下：时间和网络元素）

# mysql - Mysql 使用 Select case 将单个列值分配给声明的值

> ID：15862926
> 
> 赞同：0
> 
> 时间：2013-04-07T13:29:32.473
> 
> 标签：mysql

我遇到了以下问题，我在存储过程中定义了一个变量（DOUBLE），我需要从表（项目）中为这个声明的变量分配一个值（项目价格）。但是，我需要从内部使用案例的选择查询中获取此值，根据我必须找到正确的商品价格的逻辑，商品价格可能在 2 列中。请帮我解决这个问题，因为当我执行它给我一个错误，

这里是如何分层的，

```
 DECLARE  no_more_users INT DEFAULT 0;
    DECLARE user_id INT DEFAULT 0;
    DECLARE cart_id INT DEFAULT 0;
    DECLARE cart_item_id INT DEFAULT 0;
    DECLARE  user_gift_id INT DEFAULT 0;
    DECLARE itemPrice DOUBLE DEFAULT 0.0;
    SELECT  
        CASE
            WHEN sale_price=0 OR sale_price IS NULL THEN (price - ( price * discount ))
            ELSE sale_price
        END  
        INTO itemPrice
    FROM item  WHERE item_id = p_item_id ;   

    DECLARE  checked_in_users CURSOR FOR 
            SELECT DISTINCT ul.user_id
            FROM user_location ul 
            LEFT JOIN location_section ls ON ul.location_section_id = ls.location_section_id
            INNER JOIN user u ON ul.user_id = u.user_id
            INNER JOIN user_profile up ON u.user_id = up.user_id
            INNER JOIN location_event le ON ul.location_event_id = le.location_event_id                 
            WHERE ul.location_id = p_location_id AND ul.location_event_id = p_event_id 
            AND ul.checked_out_on IS NULL AND (ul.checked_in_on BETWEEN le.start_time AND le.end_time )
            AND u.status = 1 ;

    DECLARE  CONTINUE HANDLER FOR NOT FOUND 
    SET  no_more_users = 1;
    OPEN  checked_in_users;
        FETCH  checked_in_users INTO user_id;
        read_loop: LOOP 
```

还有一些代码...

请注意，sale_price、price、discount 是 item 表的列，逻辑是如果 sale_price 为 null 或 value 为 0，那么我应该从 price 列中获取实际的销售价格。最后，我需要将正确的项目价格分配给先前声明的变量。任何帮助都将受到高度评价。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T13:43:28.660

CASE 语句有两种形式，一种带有表达式，一种带有值。你把它们混在一起了。

具有值：

```
CASE variable
WHEN value_1 THEN foo
WHEN value_2 THEN bar
END 
```

用表达式：

```
CASE
WHEN expression_1 THEN foo
WHEN expression_2 THEN bar
END 
```

尝试

```
CASE
WHEN sale_price=0 OR sale_price IS NULL THEN (price - ( price * discount ))
ELSE sale_price
END 
```

此外，当您使用 INTO 时，您不需要“AS correct_price”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T13:51:13.760

您的选择查询有一些问题。

您正在使用的 CASE 版本 - 即 CASE var WHEN val1 THEN - 在尝试匹配 NILL 时不起作用，因为在 SQL 中 null 不等于 null。

此外，您不能将值与条件结合起来。

相反，使用 if CASS 的版本，它只是条件。还有其他的太阳战术问题。转换您损坏的查询然后给出：

```
SELECT
   CASE 
      WHEN ifnull(sale_price, 0) = 0 THEN price - (price * discount)
      ELSE sale_price 
   END
INTO itemPrice 
FROM item
WHERE item_id = p_item_id; 
```

注意：如果您的表有名为 的列`itemPrice`，则必须从变量中选择另一个名称。Mysql感到困惑：/

# python - Django - “用户”对象没有属性“获取” - 检索密码

> ID：15862928
> 
> 赞同：0
> 
> 时间：2013-04-07T13:29:53.243
> 
> 标签：python, django, django-models, django-forms, django-templates

我正在使用 django 1.5，我尝试制作一个重置密码表单。所以我声明：

我的模型：

```
class Profil(models.Model):
    user = models.OneToOneField(User)
    site_web = models.URLField(null=True, blank=True)
    avatar = models.ImageField(null=True, blank=True, upload_to="avatars/")
    signature = models.TextField(null=True, blank=True)

    def __unicode__(self):
        return "Profil de {0}".format(self.user.username) 
```

我的表格有两个输入：

```
class ResetForm(PasswordResetForm):
new_password1 = forms.CharField(label="Mot de passe", widget=forms.PasswordInput(attrs={'class':'m-wrap', 'placeholder':'Mot de passe'}))
new_password2 = forms.CharField(label="Verification du mot de passe", widget=forms.PasswordInput(attrs={'class':'m-wrap', 'placeholder':'Verification du mot de passe'})) 
```

还有我的 urls.py ：

```
urlpatterns = patterns('Profil.views',
)

urlpatterns += patterns('',
        url(r'^/?$',RedirectView.as_view(url='login/')),
        url(r'^login/?$','django.contrib.auth.views.login',
            {'template_name': 'Profil/login.html', 'authentication_form': LoginForm },
            name="login"),
        url(r'^logout/$','django.contrib.auth.views.logout_then_login', 
            name="logout"),
        url(r'^password_reset/$','django.contrib.auth.views.password_reset',
            {'email_template_name' : 'Profil/email/reset_passwd_email_template.html','subject_template_name': 'Profil/email/reset_passwd_email_subject.html'}, 
            name="reset_passwd"),
        url(r'^password_reset/done/$','django.contrib.auth.views.password_reset_done',
            { 'template_name' : "Profil/password_reset_done.html"},
            name='reset_done'),
        url(r'^reset/(?P<uidb36>[0-9A-Za-z]{1,13})-(?P<token>[0-9A-Za-z]{1,13}-[0-9A-Za-z]{1,20})/$','django.contrib.auth.views.password_reset_confirm',
            {'template_name' : 'Profil/password_reset_confirm.html', 'set_password_form': ResetForm },
            name='password_reset_confirm'),
        url(r'^reset/done/$', 'django.contrib.auth.views.password_reset_complete',
            {'template_name' : 'Profil/password_reset_confirm.html'},
            name='password_reset_complete'),
    ) 
```

一切正常，但是当我提交表单以重置密码时，出现错误：

```
AttributeError at /profil/reset/1-3gf-cfb3e30ff488d082a403/

'User' object has no attribute 'get'

Request Method:     POST
Request URL:    http://127.0.0.1:8000/profil/reset/1-3gf-cfb3e30ff488d082a403/
Django Version:     1.5.1
Exception Type:     AttributeError
Exception Value:    

'User' object has no attribute 'get'

Exception Location:     /usr/lib/python2.7/site-packages/django/forms/widgets.py in value_from_datadict, line 209
Python Executable:  /usr/bin/python2
Python Version:     2.7.3
Python Path:    

['/home/lolostates/workspace/Kolabe_py',
 '/usr/lib/python27.zip',
 '/usr/lib/python2.7',
 '/usr/lib/python2.7/plat-linux2',
 '/usr/lib/python2.7/lib-tk',
 '/usr/lib/python2.7/lib-old',
 '/usr/lib/python2.7/lib-dynload',
 '/usr/lib/python2.7/site-packages',
 '/usr/lib/python2.7/site-packages/PIL',
 '/usr/lib/python2.7/site-packages/gtk-2.0',
 '/usr/lib/python2.7/site-packages/setuptools-0.6c11.egg-info']

Server time:    dim, 7 Avr 2013 15:07:14 +0200 
```

我不明白为什么，因为我在 Django 上使用了用户模型，并且所有身份验证功能也包括在 django 上......

谢谢你的帮助，

问候，洛伊克。

编辑：如评论所问，请在我的观点下方找到：

```
{% extends 'Layout/login.html' %}
{% load url from future %}

{% block title %} Kola.be - Initialisation du mot de passe {% endblock %}

{% block content %}

{% if validlink %}
<form class="form-vertical login-form" action="" method="post">
     {% csrf_token %}
      <h3 class="form-title">Re-initialisation</h3>
      <div class="control-group">
        <div class="controls">{{ form.new_password1.errors }}
          <div class="input-icon left">
            <i class="icon-lock"></i>
            {{ form.new_password1 }}
          </div>
        </div>
      </div>
      <div class="control-group">
        <div class="controls">{{ form.new_password2.errors }}
          <div class="input-icon left">
            <i class="icon-lock"></i>
            {{ form.new_password2 }}
          </div>
        </div>
      </div>
      <div class="form-actions">
        <input type="submit" class="btn green pull-right" value="Valider" />         
      </div>
    </form>
{% else %}

<h1>Re-initialisation du mot de passe échoué</h1>

<p>Le lien que vous avez utilisé a expiré, merci de faire une nouvelle demande de reset.</p>

{% endif %}
{% endblock %} 
```

和这里的堆栈跟踪：

```
Environment:

Request Method: POST
Request URL: http://127.0.0.1:8000/profil/reset/1-3gg-2b69dc12eab1b093dee2/

Django Version: 1.5.1
Python Version: 2.7.3
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'Client',
 'Profil',
 'django.contrib.admin')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware')

Traceback:
File "/usr/lib/python2.7/site-packages/django/core/handlers/base.py" in get_response
  115\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/usr/lib/python2.7/site-packages/django/views/decorators/debug.py" in sensitive_post_parameters_wrapper
  69\.             return view(request, *args, **kwargs)
File "/usr/lib/python2.7/site-packages/django/views/decorators/cache.py" in _wrapped_view_func
  89\.         response = view_func(request, *args, **kwargs)
File "/usr/lib/python2.7/site-packages/django/contrib/auth/views.py" in password_reset_confirm
  211\.             if form.is_valid():
File "/usr/lib/python2.7/site-packages/django/forms/forms.py" in is_valid
  126\.         return self.is_bound and not bool(self.errors)
File "/usr/lib/python2.7/site-packages/django/forms/forms.py" in _get_errors
  117\.             self.full_clean()
File "/usr/lib/python2.7/site-packages/django/forms/forms.py" in full_clean
  272\.         self._clean_fields()
File "/usr/lib/python2.7/site-packages/django/forms/forms.py" in _clean_fields
  281\.             value = field.widget.value_from_datadict(self.data, self.files, self.add_prefix(name))
File "/usr/lib/python2.7/site-packages/django/forms/widgets.py" in value_from_datadict
  209\.         return data.get(name, None)

Exception Type: AttributeError at /profil/reset/1-3gg-2b69dc12eab1b093dee2/
Exception Value: 'User' object has no attribute 'get' 
```

# singularitygs - 使用 Singularity 构建具有最少标记的多列网格的最佳方法是什么

> ID：15862936
> 
> 赞同：0
> 
> 时间：2013-04-07T13:30:43.733
> 
> 标签：singularitygs

假设我在另一列内有一个文章网格（2 列）。什么是最好的方法来实现这一点，而不必明确地告诉文章应该在哪一列上的奇异性。

它是用伪类声明它的唯一选择吗？

```
article:nth-child(1n){
   @include grid-span(1,1);
}
article:nth-child(2n){
   @include grid-span(1,2);
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T06:59:57.860

有一种比 Scott aka [user2242314](https://stackoverflow.com/users/2242314/user2242314)上面建议的更短的方法：

```
$grids: 12;
$gutters: 1/3;

.column {
  @include float-span(1);

  &:last-child {
    @include float-span(1, 'last'); }} 
```

不幸的是，Singularity 中有一个错误会阻止使用这种简短的方法，即使Singularity 文档[建议了它。](https://github.com/Team-Sass/Singularity/wiki/Spanning-The-Grid#float-span)

我已经修复了这个错误并提交了一个[拉取请求](http://rubygems.org/gems/singularitygs)。等待 Scott 或 Sam aka [Snugug](https://stackoverflow.com/users/703084/snugug)接受它并发布更新的[gem](http://rubygems.org/gems/singularitygs)（版本 1.0.7 或更高版本）。然后运行`gem update`​​or `bundle update`，您就可以使用最干净的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T15:49:42.483

您可以使用浮点输出样式，但您仍然需要处理右列上的额外填充。

[http://sassmeister.com/gist/5256403](http://sassmeister.com/gist/5256403) - 您可能必须从下拉菜单中选择奇异性才能使此链接正常工作。

使用浮点数，在位置列中写入“last”等同于 Susy 中的“omega”。处理额外的填充仍然会很棘手，但至少你的列在没有 nth 的情况下彼此相邻浮动。

如果你仍然不满意，你可以编写自己的输出样式。不确定什么 CSS 会起作用，但无论如何，CSS Singularity 生成的是完全可定制的。我尚未完整记录，但您可以添加自己的输出样式：[https ://github.com/Team-Sass/Singularity/tree/1.xx/stylesheets/singularitygs/api](https://github.com/Team-Sass/Singularity/tree/1.x.x/stylesheets/singularitygs/api)

# android - Android：致命异常主要吐司

> ID：15862938
> 
> 赞同：-2
> 
> 时间：2013-04-07T13:30:45.960
> 
> 标签：android, runtime, java.lang.class

嗨，我总是有这个错误：Android : Fatal Exception Main!! 这是我的第一个应用程序，所以我有几个问题..我不明白 android 是如何工作的 :( :

```
package com.mkyong.android;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.Toast;

import com.example.toast.R;

public class MainActivity extends Activity {

private Button button;

public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    button = (Button) findViewById(R.id.button1);

    button.setOnClickListener(new OnClickListener() {

          @Override
          public void onClick(View arg0) {

             Toast.makeText(getApplicationContext(), "Button is clicked",                    Toast.LENGTH_LONG).show();

          }
    });
}
} 
```

这是 main.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/show_toast"
    tools:ignore="HardcodedText" />

</LinearLayout> 
```

这是清单：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.toast"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />
 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >

    <activity
        android:name=".MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

这是 logcat 输出：

![在此处输入图像描述](https://i.stack.imgur.com/laAS8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T15:42:13.140

首先，我认为您复制了[Mykong的代码表](http://www.mkyong.com/)

显示你`MainActivity.java`在包裹中 `com.mkyong.android`

但是在您的清单文件中，您的主包名称是`com.example.toast`。您没有在文件中提及任何关于文件`com.mkyong.android`的`manifest`内容

**您确定您使用的是拖车包名称吗？**如果是这样的话

所以有两种选择

**选项1**

* * *

在您的日志中，它清楚地表明`com.example.toast.MainActivity`未找到

您必须将包更改`MainActivity.java`为`com.example.toast`

```
<activity
    android:name="com.example.toast.MainActivity"
    android:label="@string/app_name" >
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity> 
```

这将删除`RuntimeException`

**选项 2**

* * *

第二个选项是更改`manifest`文件

```
<activity
    android:name="com.mkyong.android.MainActivity"
    android:label="@string/app_name" >
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity> 
```

**请注意**，如果您的应用程序包含多个包名称，则必须在清单文件中指定包名称以及活动名称

例如：包名和文件名`android:name="com.mkyong.android.MainActivity"`在哪里`com.mkyong.android``MainActivity`

我更喜欢你选择**选项 1**

要向您展示吐司，您可以使用

```
Toast.makeText(MainActivity.this, "Button is clicked", Toast.LENGTH_LONG).show(); 
```

这`MainActivity.this`是上下文的参数

你也可以使用这个

```
Toast.makeText(getApplicationContext(), "Button is clicked",Toast.LENGTH_LONG).show(); 
```

如果您是初学者，此[Android Boot Camp 系列教程](http://www.youtube.com/playlist?list=PLE08A97D36D5A255F)可能会对您有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T13:33:05.523

将应用程序上下文更改为您的上下文并尝试

```
Toast.makeText(MainActivity.this, "Button is clicked", Toast.LENGTH_LONG).show(); 
```

# acl - 将组和用户添加到项目的 Cake ACL

> ID：15862941
> 
> 赞同：0
> 
> 时间：2013-04-07T13:30:55.060
> 
> 标签：acl, cakephp-2.1

我目前正在开发一个平台，计划在未来协调与客户的沟通。用户可以添加到项目中并具有一定的权限。因此，用户被分配到不同的用户角色（管理员/经理/成员/查看者）。管理员可以查看所有项目并允许将其他用户添加到项目中。如果将用户（例如角色：成员）添加到项目中，他将拥有一定的权限（取决于角色），如果没有，则根本不允许他访问该项目。

我正在使用 Cake 的 ACL 组件，当我忽略用户是否被添加到项目时，一切都运行良好。我能想到的唯一解决方案不是在组级别授予权限，而是在管理员将用户添加到项目时授予用户级别的权限。

有没有更简单的方法来解决这个问题？否则我担心代码会变得完全混乱。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:24:30.917

还有另一种方法（我真的不知道是否更容易，取决于您的观点）。ACL 组件仅帮助您创建角色，但您需要角色和项目访问管理，对吗？

在这种情况下我会做什么：

1.  在您的数据库中创建一个 Project_Permission 表（给它一个更好的名称，我缺乏想象力）。根据您的项目，创建关联：一个用户可以与许多项目相关，一个项目可以有许多用户访问它。如果您遵循蛋糕约定（并且您的表格被命名为用户和项目）并且它不会干扰您已经拥有的内容，那么表格应该是

    ```
    PROJECTS_USERS
    id
    project_id
    user_id
    created and modified  //if you want to 
    ```

2.  创建适当的操作，管理员（或其他类型的用户，这取决于您）可以将用户添加到项目并将该多对多关联保存在先前创建的表中。

3.  由于项目的授权并非来自 ACL 组件，因此您必须自己创建一个“授权”函数。我建议将它放在 AppController 的 beforeFilter() 函数中（如果您没有 AppController，则必须在希望它工作的每个控制器中执行此操作）。在此函数中，检查登录的用户是否在现有表中并且与项目有关联。就像是：

    ```
    function beforeFilter() {
        //let's assume you have the project id somewhere, in a global variable like $this->_projectID
        $user = $this->Session->read('Auth.User.id');
        $project = $this->Project->find('first', array('conditions'=>array('id'=>$this->_projectID, 'User.id'=>$user)
        if (count($project) > 0) {
            //the user has permission to see the project
        } else {
            //he doesn't
        }
    } 
    ```

很难给出一个实际的代码，因为我不确定你的模型关联，也不知道你想要代码在哪里，或者你是否有到处可用的变量，但我希望你能明白。在那之后，这只是您要如何处理访问限制的问题（通常涉及闪存消息和重定向）。

我希望这足够清楚：S

# c# - 像 JQuery.Extend 一样工作的扩展方法

> ID：15862944
> 
> 赞同：0
> 
> 时间：2013-04-07T13:31:21.810
> 
> 标签：c#, nuget-package

**在任何地方的一个漂亮的瘦Nuget**包中是否有一个不错的 Extend 方法？

一个像[jQuery.Extend](http://api.jquery.com/jQuery.extend/)一样工作的。

我问的原因是我有非常相似的视图模型和数据库模型。我想要一种快速转换的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:10:40.407

Automapper 完全符合我的要求。我将逻辑添加为视图模型扩展，所以我可以这样做：

```
var dbModel = myViewModel.ToMyDBModel(); 
```

# css - Safari：提交是低一像素

> ID：15862952
> 
> 赞同：1
> 
> 时间：2013-04-07T13:32:06.923
> 
> 标签：css

我的提交按钮有问题。它比 txt 输入低一个像素，但仅在 Safari 中。Chrome 和 Firefox 都很好。

```
input[type=text] {
height: 45px;
width: 238px;
padding: 0;
background-color: #ebebeb;
border: 1px solid #cecece;
border-radius: 0;
border-bottom-left-radius: 5px;
border-top-left-radius: 5px;
-webkit-box-shadow: 0px 1px 3px rgba(0, 0, 0, 0.2) inset;
-moz-box-shadow:    0px 1px 3px rgba(0, 0, 0, 0.2) inset;
box-shadow:         0px 1px 3px rgba(0, 0, 0, 0.2) inset;
color: #999999;
font-size: 16px;
font-family: 'Noticia Text', serif;
padding-left: 20px;
}

input[type=text]:focus {
    outline: 0;
}

#subscribe {
padding: 0;
margin: 0;
background: #3eb0ef;
background: -moz-linear-gradient(top,  #3eb0ef 0%, #1b8dd4 100%);
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#3eb0ef), color-stop(100%,#1b8dd4));
background: -webkit-linear-gradient(top,  #3eb0ef 0%,#1b8dd4 100%);
background: -o-linear-gradient(top,  #3eb0ef 0%,#1b8dd4 100%);
background: -ms-linear-gradient(top,  #3eb0ef 0%,#1b8dd4 100%);
background: linear-gradient(to bottom,  #3eb0ef 0%,#1b8dd4 100%);
-webkit-box-shadow: 0px 1px 1px rgba(0, 0, 0, 0.2);
-moz-box-shadow:    0px 1px 1px rgba(0, 0, 0, 0.2);
box-shadow:         0px 1px 1px rgba(0, 0, 0, 0.2);
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#3eb0ef', endColorstr='#1b8dd4',GradientType=0 );
border-radius: 0;
border-top-right-radius: 5px;
border-bottom-right-radius: 5px;
border: 1px solid #1082c8;
height: 47px;
width: 107px;
font-family: 'Noticia Text', serif;
font-size: 16px;
color: white;
text-shadow: 0px 1px 2px rgba(0, 0, 0, 0.3);
} 
```

和 HTML：

```
<form name="subscription" method="post">
  <input name="email" id="email" type="text" placeholder="Enter your email address"><input name="subscribe" id="subscribe" value="Notify me" type="submit">
</form> 
```

[http://jsfiddle.net/SV3VS/](http://jsfiddle.net/SV3VS/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T15:39:01.317

这有帮助吗？
[http://jsfiddle.net/panchroma/ERhLP/](http://jsfiddle.net/panchroma/ERhLP/)

我也可以在 Safari 上看到 blip，所以我尝试明确设置输入框和提交按钮的高度，并将它们更改为偶数。

```
input#email{
height:48px;
}    

#subscribe {
....
height: 48px;
....
} 
```

祝你好运！

# ruby-on-rails - ActiveAdmin - 无法创建模型“评级”

> ID：15862955
> 
> 赞同：2
> 
> 时间：2013-04-07T13:32:24.173
> 
> 标签：ruby-on-rails, model, activeadmin

我不知道为什么单击“新评级”时会出现错误。似乎其他模型的创建也会出现同样的错误。

这是错误消息：“**结构中没有成员'评级'** ”

错误在**inherited_resources-1.4.0/lib/inherited_resources/base_helpers.rb的第316行**

完整的堆栈跟踪：[https ://gist.github.com/depy/5330548](https://gist.github.com/depy/5330548)

```
313       # extract attributes from params
314       def build_resource_params
315         parameters = respond_to?(:permitted_params) ? permitted_params : params
316         rparams = [parameters[resource_request_name] || parameters[resource_instance_name] || {}]
317         if without_protection_given?
318           rparams << without_protection
319         else
320           rparams << as_role if role_given?
321         end 
```

这是我的评级模型：

```
class Rating < ActiveRecord::Base

  validates_uniqueness_of :task_id, :scope => [:user_id, :user_role], :message => 'You      have already rated this task'
  validates_inclusion_of :user_role, :in => %w( client contractor )
  validates_presence_of :task_id, :user_id
  validates_presence_of :score, :message => 'Please rate your satisfaction'

  belongs_to :task
  belongs_to :user
end 
```

这是我的 ActiveAdmin **Rating.rb**：

```
ActiveAdmin.register Rating do
  controller do; include StrongAdmin; end

  # list
  index do
    column :user_id
    column :task_id
    column :comment
    column :score
    default_actions
  end

  # single
  show do |rating|
    attributes_table do
      row :id
      row :rater do
        task_id = Rating.find(params[:id]).task_id
        div do
          Task.find(task_id).client.full_name + " [" +  Task.find(task_id).client.id.to_s+"]"
        end
      end
      row :user
      row :user_role
      row :task
      row :score
      row :comment
      row :created_at
    end
    active_admin_comments
  end

end 
```

这是我的 Gemfile：

```
source 'https://rubygems.org'
ruby "1.9.3"

gem 'rails'
gem 'pg' # Database (PostgreSQL)

group :assets do
  gem 'sass-rails'
  gem 'uglifier'
  gem 'bourbon'
  gem 'jquery-fileupload-rails'
  gem 'jquery-rails'
  gem 'asset_sync'
end

group :production do
  gem 'honeybadger'
  gem 'newrelic_rpm' # App monitoring
end

gem 'bcrypt-ruby' # Secure passwords
gem 'devise' # Authentication
gem 'unicorn' # Webserver
gem 'redis'# Session storage and Task applications
gem 'carrierwave' # File uploading
gem 'mini_magick' # Image processing
gem 'kaminari'# Pagination
gem 'turbolinks' # Pushstate and async loading
gem 'strong_parameters' # Attribute accessible replacement
gem 'dalli' # Memcached interface
gem 'fog' # CDN connector
gem 'activeadmin' # (user) administration
gem 'cancan' # Authorization
gem 'gibbon' # Mailchimp API wrapper
gem 'multi_json'
gem 'nokogiri' # HTML parser for error messages
gem 'pusher' # Hosted websockets
gem 'sidekiq' # Async processing
gem 'draper' # Decorator
gem 'lograge' # Improved logger
gem 'slim'
gem 'sinatra', :require => nil

group :development do
  gem 'sqlite3'
  gem 'better_errors'
  gem 'binding_of_caller'
  gem 'meta_request'
  gem 'quiet_assets'
end

group :test, :darwin do
  gem 'rb-fsevent'
end

group :test do
  gem 'rspec-rails'
  gem 'factory_girl_rails'
  gem 'capybara'
  # gem 'capybara-webkit'
  gem 'database_cleaner'
  gem 'launchy'
  gem 'faker'
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:17:35.280

我遇到了同样的问题。我从 0.5.1 更新了 ActiveAdmin。到 0.6.0。继承的资源 gem 也更新到 1.4.0。

由于 ActiveAdmin 需要 1.3.1 或更高版本，您可以在 gem 中锁定版本

```
gem 'inherited_resources', "1.3.1" 
```

这为我解决了这个问题。

# functional-programming - 命名函数和匿名函数（Lua）之间的区别

> ID：15862957
> 
> 赞同：4
> 
> 时间：2013-04-07T13:32:43.227
> 
> 标签：functional-programming, lua

`myFunc`这些s有什么区别？

代码 1

```
function wrapper()
    local someVariable = 0;
    function myFunc(n)
        if n > 0 then return myFunc(n-1) end
    end
    return myFunc;
end 
```

代码 2

```
function wrapper()
    local someVariable = 0;
    local myFunc = function(n)
        if n > 0 then return myFunc(n-1) end
    end
    return myFunc;
end 
```

代码 3

```
function wrapper()
    local someVariable = 0;
    local myFunc;
    myFunc = function(n)
        if n > 0 then return myFunc(n-1) end
    end;
    return myFunc;
end 
```

因为当我`myFunc`在自身内部引用函数名时`myFunc`。他们的行为不一样。（例如，upvalue `someVariable`...有问题的:-S）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T13:45:20.727

[编辑：我误读了您的代码#2。]

代码#1 设置函数的全局值`myFunc`。因此，每次调用时`wrapper`，您都会将这个全局设置为一个新值。此外，对您的调用的任何引用`myFunc`都将指向此全局（可修改），而不是本地（这将是闭包的上值）。

代码#2 设置一个局部变量`myFunc`。***但是***，由于 Lua 的规则，该局部变量只有在定义它的语句完成*后*才会进入作用域。这使您可以执行以下操作：

```
local x = x or 5 
```

`x`表达式中的 是先前声明的局部或全局。直到表达式被评估之后，新的`x`才会进入范围。`x or 5`

您的函数定义也是如此。因此，任何引用`myFunc`都将指向*全局变量*，而不是局部变量。

代码#3 创建一个局部变量`myFunc`。然后它在该变量中设置一个函数。因为函数是在局部变量进入作用域后创建的，所以函数中的引用*将*`myFunc`指向局部变量，而不是全局变量。

注意`local function X`相当于`local X; X = function...`。***不***给`local X = function...`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T20:15:49.213

Nicol 的回答大多是正确的，但有一点值得指出：

在代码 2`MyFunc`中不需要是全局变量，它可以是某个外部范围内的局部变量，这将成为您正在创建的此函数的上值（相同的注释也适用于代码 1）。例如，这将打印`100`：

```
local function myFunc(n) return 100 end
function wrapper()
    local someVariable = 0;
    local myFunc = function(n)
        if n > 0 then return myFunc(n-1) end
    end
    return myFunc;
end
print(wrapper()(1)) 
```

因此，总而言之，您可以使用四种方法来定义 myFunc：

1.  `local myFunc; myFunc = function(n) ... return myFunc(n-1) end`
2.  `local function myFunc(n) ... return myFunc(n-1) end`
3.  `local myFunc = function(n) ... return myFunc(n-1) end`
4.  `myFunc = function(n) ... return myFunc(n-1) end`

1 和 2 是完全等价的。3 不会做你所期望的，因为它将使用 myFunc`local myFunc`执行时可用的任何定义（这可能指向 MyFunc 的上值或全局变量）。4 将起作用，但仅仅是因为它将新创建的函数分配给（再次）一个上值或一个全局变量（并在函数体中引用相同的值）。

# oracle - 在不使用触发器的情况下插入 oracle 查询之前检查重复值

> ID：15862959
> 
> 赞同：0
> 
> 时间：2013-04-07T13:32:59.073
> 
> 标签：oracle, oracle10g, oracle11g

我需要在插入查询中检查重复任何字段，例如名字，如果此表中不存在，则插入新行并返回当前插入的 id，否则如果表中存在名字，则返回零作为重复

不使用触发器、函数和过程

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T14:46:50.177

没有“插入查询”之类的东西。

实现此类要求的正常方法是使用数据完整性约束：

```
alter table your_table 
    add constraint your_table_uk unique (first_name)
/ 
```

如果您尝试插入重复记录，这将引发任何异常。

要获取当前插入的 ID：

```
insert into your_table (id, first_name)
    values (your_seq.nextval, 'SAM-I-AM')
    returning id
/ 
```

您说您不想使用函数或过程，但如果提交`first_name`的是重复项，则返回 0 的唯一方法是编程：

```
create or replace function new_record (p_name your_table.first_name%type)
    return your_table.id%type
is
    return_value your_table.id%type;
begin
    begin
        insert into your_table (id, first_name)
            values (your_seq.nextval, p_first_name)
        returning id into return_value;
    exception
        when dup_val_on_index then
             return_value := 0;
    end;
    return return_value;
end; 
```

# python - 如何从任意数量的元素列表中获取列表理解中的平面列表？

> ID：15862962
> 
> 赞同：3
> 
> 时间：2013-04-07T13:33:09.913
> 
> 标签：python

我有这样的事情：

```
[e for e in ([n for n in xrange(random.randrange(1, 5))] for x in xrange(10))] 
```

它产生：

```
[[0, 1, 2, 3], [0, 1, 2], [0], [0], [0, 1], [0], [0, 1], [0, 1, 2, 3], [0, 1, 2], [0, 1, 2]] 
```

我需要同样的但扁平的结构。

现在我使用类似的东西：

```
l = []
[l.extend(e) for e in ([n for n in xrange(random.randrange(1, 5))] for x in xrange(10))] 
```

但是，在理解中实现这种任意长度列表的“解包”是否有一些不那么晦涩的东西？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-07T13:38:17.023

使用此列表理解：

```
In [8]: [y for x in xrange(10) for y in xrange(random.randrange(1, 5))]
Out[8]: [0, 1, 2, 0, 1, 2, 3, 0, 1, 2, 0, 1, 2, 0, 1, 2, 0, 1, 0, 1, 2, 3, 0, 0, 1, 0] 
```

上面的列表理解等价于这个（但 LC 更快）：

```
In [9]: lis=[]

In [10]: for x in xrange(10):
   ....:     for y in xrange(random.randrange(1, 5)):
   ....:         lis.append(y)
   ....: 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-07T13:38:08.717

在一般情况下展平任何可迭代的最佳方法是[`itertools.chain.from_iterable()`](http://docs.python.org/3/library/itertools.html#itertools.chain.from_iterable)：

```
>>> import random
>>> from itertools import chain
>>> x = [e for e in ([n for n in xrange(random.randrange(1, 5))] 
...      for x in xrange(10))]
>>> list(chain.from_iterable(x))
[0, 0, 0, 1, 2, 3, 0, 1, 2, 3, 0, 0, 1, 2, 3, 0, 1, 0, 1, 0, 0, 1, 2] 
```

这就是说，最好避免在这种情况下的额外工作，只需[从](https://stackoverflow.com/a/15863005/722121).

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-07T13:38:24.283

您可以使用[numpy flatten()](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.flatten.html)：

```
import numpy as np
l = [e for e in ([n for n in xrange(random.randrange(1, 5))] for x in xrange(10))]
a = np.asarray(l)
l = list(a.flatten(l))
print l 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T13:45:12.413

```
import itertools
l = [e for e in ([n for n in xrange(random.randrange(1, 5))] for x in xrange(10))]
result = list(itertools.chain(*l)) 
```

然后`print result`给出：

```
[0,1,2,3,0,1,2,0...] 
```

`*`in chain(*l) 的使用灵感来自这个问题[join list of lists in python](https://stackoverflow.com/questions/716477/join-list-of-lists-in-python)。

# ruby-on-rails - ApplicationController:Class 的未定义方法“caches_action”

> ID：15862964
> 
> 赞同：6
> 
> 时间：2013-04-07T13:33:42.903
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-4, ruby-2.0

我正在尝试升级到 rails 4 beta 1，但我有点问题。

简而言之，这就是我的应用程序控制器的样子。

```
class ApplicationController < ApplicationController
  caches_action :method
end 
```

`caches_action`在 Rails 4 中被移到它自己的 gem 中，所以包含 gem 应该可以解决问题。

```
gem "actionpack-action_caching", github: "rails/actionpack-action_caching" 
```

但是当我运行我的请求规范或在浏览器中访问应用程序时，我得到了这个错误。

```
app/controllers/application_controller.rb:3:in `<class:ApplicationController>': undefined method `caches_action' for ApplicationController:Class (NoMethodError) 
```

这是为什么？

*   导轨 4.0.0.beta1
*   红宝石 2.0.0
*   规范 2.13.1

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-07T14:24:13.720

由于缓存不再是核心的一部分，因此您需要在使用它的每个文件的顶部明确要求它：

```
require 'actionpack/action_caching' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-06-23T11:27:28.317

问题出在 Rails 4 中，他们已将缓存部分提取到单独的 gem 中

如果您收到动作缓存错误，那么您需要在 gem 下面添加

```
gem 'actionpack-action_caching' 
```

对于页面缓存必须添加

```
gem 'actionpack-page_caching' 
```

我也玩过，然后我发现，没有添加 gem 来做同样的事情。

希望这会奏效。谢谢你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-04T07:22:08.790

我使用 rails 作为 API`rails new AppName --api` 我通过添加使其工作

```
include ActionController::Caching 
```

在`class ApplicationController < ActionController::API`

# javascript - 无法在 Firefox 上使用 date.parse。它适用于 Chrome

> ID：15862967
> 
> 赞同：0
> 
> 时间：2013-04-07T13:34:26.210
> 
> 标签：javascript, jquery, firefox

我没有使用 jQuery 的经验，所以我遇到了一个问题。问题是在 Chrome 中我的代码运行良好，但在 Firefox 中却不行。似乎 date.parse 命令不起作用，因为“tsv”数据很好，但“日期”数据却不行。

代码如下。如果有人可以帮助我，请告诉我...

```
jQuery.get('data.php', null, function(tsv) {
                var lines = [];
                traffic = [];
                try {
                    // split the data return into lines and parse them
                    tsv = tsv.split(/\n/g);
                    jQuery.each(tsv, function(i, line) {
                        line = line.split(/\t/);
                    var date = Date.parse(line[0] +' UTC');
                        traffic.push([
                            date,
                            parseFloat(line[1].replace(',', ' '), 10)
                        ]);
                    }) ;
                } catch (e) {  }
                options.series[0].data = traffic;
                chart = new Highcharts.Chart(options);

    // alert(tsv);
     // alert(traffic);
   //    alert(date);
            }) ; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T13:58:02.790

Firefox 不支持解析 2013-04-06 22:46:08 格式的日期。

您可以使用[date.js](http://www.datejs.com/)库来获得对这种格式的支持。

如果您不想使用 date.js，那么下面的函数会将日期从 yyyy-mm-dd HH:mm:ss 格式解析为 UTC。

```
function parseDateUTC(input) {
    var reg = /^(\d{4})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})$/;
    var parts = reg.exec(input);
    return parts ? (new Date(Date.UTC(parts[1], parts[2] -1, parts[3], parts[4], parts[5],parts[6]))) : null
} 
```

然后您只需将代码更改为

```
var date = parseDateUTC(line[0]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-28T11:44:52.357

`date.js`不再更新，事实上，网站对我来说已经关闭了。我读过它的最佳替代品是[MomentJS](http://momentjs.com/)。根据[解析](http://momentjs.com/docs/#/parsing/string-format/)

```
moment().format('1995-02-23 12:14:16', 'YYYY-MM-DD hh:mm:ss'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-29T05:29:54.683

我有一个类似的问题。我最终包含了 date.js（将其作为脚本包含在内，它将覆盖 date.parse() 函数）。

然而，为了让它在 HighStocks 中工作，我需要将结果转换为毫秒。如果 dateString 包含 date.js 可以转换的格式之一的日期，则

```
dateString= Date.parse(dateString); 
```

仅适用于 Chrome，但

```
dateString= Date.parse(dateString).getTime(); 
```

将浏览器提供的任何结果转换为毫秒，到目前为止它对我有用......

# c# - 如何禁止对深层结构的写访问？

> ID：15862973
> 
> 赞同：1
> 
> 时间：2013-04-07T13:34:57.353
> 
> 标签：c#, visibility

我对班级成员的可访问性有疑问。

我有 3 个类一起工作，需要完全访问彼此的属性。A类、B类、C类

但是 classA 在其他地方使用，该类的所有用户都应该只有对所有结构的读取权限！

这些类看起来像这样：

```
public class classA
{
    public ClassB B { get ; }
    ...
}

public class classB
{
    ClassC C { get ;  set ; }
    ...
}

public class classC
{
    ArrayList L { get ;  set ; }
    ...
} 
```

如何管理 classA 和 classB 对 classC 具有完全访问权限，但 class A 的所有用户都不能修改里面的任何内容？

例如，这仍然是可能的:(

```
classA A = new A();
A.B.C.L.Add( something); 
```

即使 AB 由于缺少集合而无法修改。

我看到的一种可能性是，属性 AB 返回结构的深层副本，因此修改 AB 不会影响源结构，但我对此并不满意。

有没有办法在编译时检查写访问，就像我使用“只读”或省略“设置”一样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T16:02:09.227

The easiest approach is to provide a read only proxy for accessing the data in B - just like the ReadOnlyCollection, which wraps a regular collection, providing a read only version of the same interface. So you wouldn't return a classB, but a ReadOnlyB.

Alternatively this read only interface could be implemented in classA to allow more "direct" access to the data.

You could possibly then put A,B,C into a different assembly and make B,C internal so that the client can't see them.

# java - 为什么我的 JUnit 测试（修改数据库条目）失败

> ID：15862974
> 
> 赞同：1
> 
> 时间：2013-04-07T13:35:04.257
> 
> 标签：java, frameworks, junit, playframework-2.0

编辑：用'retrieve.name.equals("name1")'替换'retrieve.name == "name1"'。

EDIT2：添加了@BeforeClass 和@AfterClass（信用：[http](http://digitalsanctum.com/2012/06/01/play-framework-2-tutorial-ebean-orm/) ://digitalsanctum.com/2012/06/01/play-framework-2-tutorial-ebean-orm/ ）。

我正在为一个游戏网络应用程序编写 JUnit 测试，出于某种奇怪的原因，我似乎无法修改数据库条目。这是我能想到的最简单的例子来说明这个问题：

```
@BeforeClass
public static void setup() throws IOException {
    app = Helpers.fakeApplication(Helpers.inMemoryDatabase());
    Helpers.start(app);

    server = Ebean.getServer("default");

    ServerConfig config = new ServerConfig();
    config.setDebugSql(true);

    ddl = new DdlGenerator((SpiEbeanServer) server, new H2Platform(), config);

    // drop
    String dropScript = ddl.generateDropDdl();
    ddl.runScript(false, dropScript);

    // create
    String createScript = ddl.generateCreateDdl();
    ddl.runScript(false, createScript);
}

@AfterClass
public static void stopApp() {
    // drop
    String dropScript = ddl.generateDropDdl();
    ddl.runScript(false, dropScript);

    Helpers.stop(app);
}

@Test
public void UserModify(){
    // create user (User extends Model)
    User user = new User();
    user.id = (long) 1;
    user.name = "name1";
    user.save();

    // modify
    user.name = "name2";
    user.update();
    user.save();

    // look-up
    User retrieve = User.find.byId((long) 1);
    assertFalse("Old name", retrieve.name.equals("name1"));
} 
```

不用说这应该通过，但它没有...我知道您可以使用“update()”来更改数据库字段，因为项目中的其他人说他这样使用它并且它有效。

播放框架文档：[http ://www.playframework.com/documentation/2.1.1/Home](http://www.playframework.com/documentation/2.1.1/Home)

任何想法为什么这个测试失败？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T13:43:59.507

正如其他人所说，您应该使用 .equals() 进行字符串相等。

但主要问题是，要运行这种测试（访问数据库），您需要一个正在运行的应用程序。在游戏中，这可以通过运行带有测试的假应用程序来完成。查看本指南：

[http://www.playframework.com/documentation/2.0/JavaTest](http://www.playframework.com/documentation/2.0/JavaTest)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T17:28:29.617

这是由于 Play Framework 中的问题而发生的。Play 不会增强“test”文件夹中的代码，仅在“app”文件夹中。因为没有生成 getter 和 setter，Ebean 依靠 setter 来检测对象是否脏并支持延迟加载。这样，在您的情况下，Ebean 不知道该属性已在对象上更新。

作为一个简单的解决方案，您可以自己创建 getter 和 setter。此外，这似乎已经修复，可能应该包含在下一个 Play 版本中：https://github.com/playframework/Play20/blob/master/framework/test/integrationtest-java/test/models/EbeanEnhancementTest.java

这是一个带有用户模型和工作测试的简单 Play 项目：[https ://github.com/pharod/so-play2-issue1](https://github.com/pharod/so-play2-issue1)

在页面底部附近的“注意事项”部分中查看有关 Play 生成的 getter 和 setter 的更多详细信息：[http ://www.playframework.com/documentation/2.1.1/JavaEbean](http://www.playframework.com/documentation/2.1.1/JavaEbean)

# database-design - 当人们拥有多项工作时，使用人员、职位和团队对组织进行建模的最佳方法是什么？

> ID：15862976
> 
> 赞同：9
> 
> 时间：2013-04-07T13:35:15.090
> 
> 标签：database-design, data-modeling, modeling, orgchart

我有一个有趣的建模问题。我正在尝试在网站上生成一个组织结构图（后端是 C# / SQL 服务器，前端是 javascript / google orgchart API，但建模问题的症结更通用，所以我没有包含任何特定技术下面的标签，因为问题不涉及任何技术特定问题。

我有以下 4 个数据库表：

1.  **团队**- 具有 Id、Name、ParentTeamId 字段（同一表中的另一行）
2.  **职位**- 代表团队中的职位。字段为 Id、TeamId、IsTeamHead 等
3.  **Person** - 代表一个人（此表中没有与任何其他表的链接）。字段是 Id、FirstName、LastName 等
4.  **PersonPosition** - 代表位置的人（这将两个表连接起来）字段是 Id、PersonId、PositionId、StartDate、EndDate

当我有一个普通的香草组织结构图时，这很有效，因为我基本上循环遍历每个**团队**（因为每个团队都有其**ParentTeamId**）并建立一个团队层次结构并显示该团队中的**位置**（使用**TeamId**字段）与“Ishead” = true并将与该位置相关联的人显示为头部。

我的问题是（并不少见），有些人现在被赋予了多重责任——他们基本上有两种不同的工作。此前，乔是营销主管，比尔是区域主管，但乔离开了

在营销主管和区域主管之前，这是 2 个不同的**人**（2 个不同的**职位**）所以比尔是营销主管，但也是美国的区域经理。我试图弄清楚建模和可视化的正确方法是什么。

建模问题的第一部分是决定我是否应该将其建模为两个不同的**位置**。如果我这样做了，我可以在这个**PersonPosition**表中有多个条目（两者都具有相同的**PersonId**），但问题是我感觉我多算了职位数量。

此外，从可视化的角度来看，同一个人会出现在两个地方。从功能的角度来看，这可能是正确的，但您将多次列出同一个人似乎很奇怪（也许这并不奇怪，但希望获得有关人们在这种情况下所看到的预期可视化以及似乎可以接受的反馈也许应该推动建模）

对“正确”的方法有什么建议吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-09T23:56:41.700

看起来你需要类似的东西：

![在此处输入图像描述](https://i.stack.imgur.com/TRiae.png)

在所有可能的职位“类型”（`Position`）中，我们建立了一组特定团队中存在的职位（`TeamPosition`），并确定了填补每个职位的人（`TeamPosition.PersonId`¹）。

头部由`Team`²中的“反向”外键 FK2 表示。与布尔标志不同，这自然可以确保每个团队不能有超过一个头位。

该模型还允许不同的团队由不同类型的职位领导：例如，一个团队可能由“营销主管”领导，而另一个团队由“高级技术官”领导。

据我了解，仍然可以让同一个人担任多个职位（包括头部职位），这符合您的要求。如果这是真的，那么我认为在 UI 中将同一个人显示为多个团队的成员并没有什么问题。或者，您可以将某个人的位置指定为“主要”（使用类似于上面的“反向”FK），然后只显示主要位置和旁边的“更多...”按钮（或类似按钮）。

* * *

*¹如果不能有空缺的团队位置，则将其设为 NOT NULL。如果每个团队可以多次存在相同的位置，则将`PersonId`移至`TeamPosition`PK，或将新字段添加`PositionNo`到 PK。如果同一个人不能在同一团队中担任多个职位，请在 上添加备用键`{TeamId, PersonId}`。*

*²不幸的是，MS SQL Server 比其他一些 DBMS 更加娇气，并且会拒绝对这样的循环引用执行引用操作（例如 ON DELETE CASCADE）。如果您需要引用操作，请通过 INSTEAD OF 触发器实现它们。*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T23:57:21.900

我认为您应该考虑“职位”和“角色”之间的区别。在许多组织中，可能存在多个角色：安全协调员、采购、应付账款、接待员……通常，尤其是在较小的组织中，一个人可能在不同的时间担任不同的角色。当他们以不同的身份行事时，甚至可能会向不同的人报告（例如，应急响应人员可能向安全协调员报告，但采购员向运营负责人报告。）

为了正确反映这些事情，数据库中的关系需要尽可能地反映现实生活中存在的关系。这可能意味着您将拥有多个表（就像您已经拥有的那样），但它会使事情保持清洁。

要记住的另一件事（可能值得在您的数据库中反映）是许多组织是*矩阵式*的：人们可能在某些*项目团队*中，并且是某些*组织*的一部分。电气工程师可能都向电气工程经理报告，但他们可能从事不同的项目/产品，因此属于不同的项目团队。

准确地捕捉所有这些是很困难的。这是我的建议（与您的建议不同，但有一些调整）：

**表 1：员工**人名、员工 ID、开始日期、薪水、假期……
这个表格说明了您何时获得报酬、您有多少假期、您的“人力资源状况”是什么。你们只有一个人——这张桌子只有你们一个人，用于那些不能加倍的东西（尽管我们都想要两张支票）。

**表 2：经理**经理 ID、报告 ID、报告类型
该表针对每个经理说明了向他们报告的人员是谁，以及它们之间的关系类型。您可能有“主要”关系和其他关系：“项目负责人”、“团队负责人”……“主要”经理可能会根据“其他”经理的意见做出 HR 类型的决策。

**表 3：团队**团队名称、团队 ID、经理 ID、BelongsToTeam、团队描述……
描述每个“组织实体”的表，以及可能有用的任何辅助信息。BelongsToTeam 允许团队的层次结构，这有助于可视化。

**表 4：角色**角色名称、团队 ID、员工 ID、isPrimary
此表描述了谁是给定角色。具有多个角色的员工将多次出现在此表中，并且可能会根据他们的角色向不同的经理报告。我在这里添加了一个“isPrimary”字段 - 不确定这是否是多余的。从某种意义上说，如果您从表 4 中员工的“主要”角色开始，并找出表 3 中的团队经理是谁，那么您应该以表 2 中的人为主要经理结束......我担心如果你把它留在两个地方，你最终可能会出现不一致。

我相信以上内容可以让您描述几乎任何组织 - 通过允许表 4 中的“isPrimary”字段，甚至有可能作为您的“人力资源老板”的同一个人出现在您的“项目负责人”中第二个小组，甚至可能会在应急响应小组中向您报告...

至于可视化 - 使用上述结构有两种明显的方法可以做到这一点。第一个是“严格等级” - 只显示他们的主要经理下面的人。这是“人力资源组织结构图”，每个人只出现一次。

您可以拥有第二张“基于团队”的图表。现在，每个团队都有自己的组织，同一个人可以出现在多个团队中。这些团队如何相互关联可能很棘手 - 但原则上，表 3 应该提供您需要的 BelongsToTeam 字段。

我期待听到您对此的看法！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T15:01:38.980

正如您所说，员工通常（正式或非正式地）在组织内履行多个角色。但是，就人力资源/工资单/其他管理部门而言，一名员工只会正式担任一个职位。重要的是要保持这一点，以确保人们不会获得两次报酬或以其他方式获得过高/过少的补偿等。

您可以通过向表中添加`hr/admin_position`列来强制执行此操作`person`。`person_position`然后可以使用该表记录他们实际执行的所有角色。

这也允许人们被分配一个与 HR 认为他们执行的不同的“组织结构图”职位。当团队负责人离开时，通常会发生这种情况；团队的一名初级成员将被“提升”为临时团队负责人，承担额外的责任。然而，工资或其他福利并没有相应的增加，因为 HR 仍然认为他们在做更初级的职位。您可以添加额外的列以包含注释或标志以指示这些是临时位置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T14:55:30.637

“建模问题的第一部分是决定我是否应该将其建模为两个不同的位置。如果这样做，我可以在此 PersonPosition 表中有多个条目（都具有相同的 PersonId）但问题在于感觉就像我多算了职位的数量。”

不，没有问题。您提到的问题是，如果有人想“计算职位数量”，但访问 personposition 表这样做，就会出错。由于不了解数据库、数据模型或其他什么，事情是：如果需要计算职位数，则需要访问职位表。

“另外，从可视化的角度来看，”

这里只是一个旁注，如果“可视化”是您的实际问题，那么数据库人员通常不会帮助您。

“同一个人会出现在两个地方。从功能的角度来看，这可能是正确的”

如果它是业务规则，那么它就是业务规则。通常不由你来质疑他们。如果不同的人共享同一个职位怎么办？例如，两个兼职人员各自做[他们的一半]同样的工作。

“但你会多次列出同一个人，这似乎很奇怪（也许这并不奇怪，但希望得到关于人们在这种情况下所看到的预期可视化以及似乎可以接受的内容可能应该推动建模的反馈）。”

嗯，你刚刚说了。如果这是商业规则，那并不奇怪。也许您以前从未遇到过这样的情况，但是谁在乎呢？

“对“正确”的方法有什么建议吗？

并不真地。您需要做的就是弄清楚要*准确*呈现哪些信息。所有现有职位，如果当前未占用，则名称为空？只有实际占据的职位，以及占据该职位的可能多人中的任何一个名字？等等等等

# gcc - 在 C++ Builder 中使用 GCC 生成的汇编器

> ID：15862979
> 
> 赞同：2
> 
> 时间：2013-04-07T13:35:33.567
> 
> 标签：gcc, assembly, x86, c++builder, calling-convention

我在 Win32 上将 C++builder 用于 GUI 应用程序。Borland编译器优化很差，不知道怎么用SSE。使用 mingw gcc 4.7 编译时，我有一个快 5 倍的函数。我考虑让 gcc 生成汇编代码，然后在我的 C 函数中使用这个代码，因为 Borland 编译器允许内联汇编。

C 中的函数如下所示：

```
void Test_Fn(double *x, size_t n,double *AV, size_t *mA, size_t NT)
{
double s = 77.777;
size_t m = mA[NT-3];
AV[2]=x[n-4]+m*s;
} 
```

为了简化我的问题，我使功能代码非常简单。我的真实功能包含许多循环。

Borland C++ 编译器生成了这个汇编代码：

```
 ;
  ; void Test_Fn(double *x, size_t n,double *AV, size_t *mA, size_t NT)
  ;
  @1:
push      ebp
mov       ebp,esp
add       esp,-16
push      ebx
 ;
 ;  {
 ;      double s = 77.777;
 ;
mov       dword ptr [ebp-8],1580547965
mov       dword ptr [ebp-4],1079210426
 ;
 ;      size_t m = mA[NT-3];
 ;
mov       edx,dword ptr [ebp+20]
mov       ecx,dword ptr [ebp+24]
mov       eax,dword ptr [edx+4*ecx-12]
 ;
 ;      AV[2]=x[n-4]+m*s;
 ;
 ?live16385@48: ; EAX = m
xor       edx,edx
mov       dword ptr [ebp-16],eax
mov       dword ptr [ebp-12],edx
fild      qword ptr [ebp-16]
mov       ecx,dword ptr [ebp+8]
mov       ebx,dword ptr [ebp+12]
mov       eax,dword ptr [ebp+16]
fmul      qword ptr [ebp-8]
fadd      qword ptr [ecx+8*ebx-32]
fstp      qword ptr [eax+16]
 ;
 ;  }
 ;
 ?live16385@64: ;
 @2:
pop       ebx
mov       esp,ebp
pop       ebp
ret 
```

而 gcc 生成的汇编代码是：

```
 _Test_Fn:
mov edx, DWORD PTR [esp+20]
mov eax, DWORD PTR [esp+16]
mov eax, DWORD PTR [eax-12+edx*4]
mov edx, DWORD PTR [esp+8]
add eax, -2147483648
cvtsi2sd    xmm0, eax
mov eax, DWORD PTR [esp+4]
addsd   xmm0, QWORD PTR LC0
mulsd   xmm0, QWORD PTR LC1
addsd   xmm0, QWORD PTR [eax-32+edx*8]
mov eax, DWORD PTR [esp+12]
movsd   QWORD PTR [eax+16], xmm0
ret
 LC0:
   .long    0
   .long    1105199104
   .align 8
 LC1:
   .long    1580547965
   .long    1079210426
   .align 8 
```

我想获得有关如何在 gcc 和 Borland C++ 中完成函数参数访问的帮助。我在 Borland 的 C++ 中的函数类似于：

```
 void Test_Fn(double *x, size_t n,double *AV, size_t *mA, size_t NT)
 {
__asm
  {
  put gcc generated assembler here
  }
 } 
```

Borland 开始使用`ebp`寄存器，而 gcc 使用`esp`寄存器。我可以强制其中一个编译器使用 cdecl ou stdcall 之类的调用约定生成兼容的代码以访问参数吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T07:14:55.117

在这两种情况下，参数的传递方式类似。不同之处在于，Borland 生成的代码表达了相对于 EBP 寄存器的参数位置和相对于 ESP 的 GCC，但它们都引用了相同的地址。

Borlands 将 EBP 设置为指向函数堆栈帧的开头并表示相对于它的位置，而 GCC 不设置新的堆栈帧但表示相对于 ESP 的位置，调用者已将其指向调用者的末尾堆栈帧。

Borland 生成的代码在函数的开头设置了一个栈帧，导致 Borland 代码中的 EBP 等于 GCC 代码中的 ESP 减少了 4。这可以通过查看前两行 Borland 行看出：

```
push      ebp     ; decrease esp by 4
mov       ebp,esp ; ebp = the original esp decreased by 4 
```

GCC 代码不会改变 ESP 并且 Borland 代码不会改变 EBP 直到过程结束，所以当访问参数时关系 IP 保持不变。

在这两种情况下，调用约定似乎都是[cdecl](https://en.wikipedia.org/wiki/X86_calling_conventions#cdecl)，并且函数的调用方式没有区别。您可以在两者中添加关键字`__cdecl`以使其清楚。

```
 void __cdecl Test_Fn(double *x, size_t n,double *AV, size_t *mA, size_t NT) 
```

然而，将 GCC 编译的内联汇编添加到使用 Borland 编译的函数中并不简单，因为即使函数体只包含内联汇编，Borland 也可能会设置堆栈帧，导致 ESP 寄存器的值与 GCC 中使用的不同代码。我看到了三种可能的解决方法：

1.  用 Borland 编译，不带[“标准堆栈帧”](http://docwiki.embarcadero.com/RADStudio/XE3/en/C%2B%2B_Compiler)选项。如果编译器发现不需要堆栈帧，这可能会起作用。
2.  [使用不带选项-fomit-frame-pointer](http://gcc.gnu.org/onlinedocs/gcc-3.4.4/gcc/Optimize-Options.html)的 GCC 进行编译。这应该确保至少 EBP 的值在两者中是相同的。该选项在 -O、-O2、-O3 和 -Os 级别启用。
3.  手动编辑 GCC 生成的程序集，将对 ESP 的引用更改为 EBP 并将偏移量添加 4。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T23:05:52.903

我建议您阅读一下应用程序二进制接口。这是一个相关链接，可帮助您找出什么编译器生成什么样的代码： [https ://en.wikipedia.org/wiki/X86_calling_conventions](https://en.wikipedia.org/wiki/X86_calling_conventions)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T23:53:27.817

我会尝试使用 GCC 编译所有内容，或者查看是否仅使用 GCC 编译关键文件，其余的使用 Borland 并链接在一起是否有效。您解释的内容可以发挥作用，但这将是一项艰巨的工作，可能不值得您投入时间（除非它会在很多很多机器上非常频繁地运行）。

# mvvmcross - 使用来自内容提供者和活动的 MvvmCross

> ID：15862980
> 
> 赞同：4
> 
> 时间：2013-04-07T13:35:36.810
> 
> 标签：mvvmcross

我正在尝试在我的一个应用程序中使用 MvvmCross v3，它由活动、内容提供者和广播接收器组成。然而，我并不十分成功。

该应用程序由一个包含逻辑、模型和视图模型的核心 PCL 和一个包含所有 MonoDroid 特定内容的 Droid 应用程序组成。

在核心中我有一个 App:MvxApplication 类，在 Droid 中我有一个 Setup:MvxSetup 类，它创建一个应用程序实例并初始化东西。

我可以毫无问题地将 IOC 部分与内容提供者、广播接收器和非 Mvx 活动一起使用。当我现在想添加一个 MvxActivity 时，它会分崩离析。

当 Mvx Activity 启动时，我得到一个异常“ Cirrious.CrossCore.Exceptions.MvxException：MvxTrace 已经初始化”。

显然我正在以错误的顺序/错误的位置初始化事物。但是，我需要一个指向正确方向的指针。

我的应用类

```
public class App
    : MvxApplication
{
    public override void Initialize()
    {
        base.Initialize();
        InitialisePlugins();
        InitaliseServices();
        InitialiseStartNavigation();
    }

    private void InitaliseServices()
    {
        CreatableTypes().EndingWith("Service").AsInterfaces().RegisterAsLazySingleton();
    }

    private void InitialiseStartNavigation()
    {            
    }

    private void InitialisePlugins()
    {
        // initialise any plugins where are required at app startup
        // e.g. Cirrious.MvvmCross.Plugins.Visibility.PluginLoader.Instance.EnsureLoaded();
    }
} 
```

还有我的设置班

```
public class Setup
    : MvxAndroidSetup
{
    public Setup(Context applicationContext)
        : base(applicationContext)
    {
    }

    protected override IMvxApplication CreateApp()
    {
        return new App();
    }

    protected override IMvxNavigationSerializer CreateNavigationSerializer()
    {
        return new MvxJsonNavigationSerializer();
    }

    public override void LoadPlugins(Cirrious.CrossCore.Plugins.IMvxPluginManager pluginManager)
    {
        pluginManager.EnsurePluginLoaded<Cirrious.MvvmCross.Plugins.Json.PluginLoader>();
        base.LoadPlugins(pluginManager);
    }

    public void RegisterServices()
    {
        // I register a bunch of singletons here
    }

    // The following is called from my content provider's OnCreate()
    // Which is the first code that is run
    public static void DoSetup(Context applicationContext)
    {
        var setup = new Setup(applicationContext);
        setup.Initialize();
        setup.RegisterServices();
    } 
```

我的内容提供者的 OnCreate()：

```
 public override bool OnCreate()
    {
        Log.Debug(Tag, "OnCreate");
        _context = Context;
        Setup.DoSetup(_context);
        return true;
    } 
```

我的 MvxActivity：

```
[Activity(Label = "@string/ApplicationName", MainLauncher = true)]
[IntentFilter(new[] { "Settings" })]
public class SettingsView 
    : MvxActivity
{
    public new SettingsViewModel ViewModel
    {
        get { return (SettingsViewModel) base.ViewModel; }
        set { base.ViewModel = value; }
    }

    protected override void OnViewModelSet()
    {
        SetContentView(Resource.Layout.Page_SettingsView);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T14:09:36.040

简短回答（我在手机上的机场）

*   所有 mvx android 视图将检查设置单例是否已创建 - [https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross.Droid/Platform/MvxAndroidSetupSingleton.cs](https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross.Droid/Platform/MvxAndroidSetupSingleton.cs)（vnext 树 - 但类似v3)

*   因此，如果您正在创建一个设置，但没有设置此单例，那么您将在第一次显示视图时创建第二个设置

我怀疑你可以通过单例类创建你的设置，但如果这对你的需要不够灵活，那么请在 github 上记录一个问题

也很想看到一些关于这个的博客——我没有太多使用自定义内容提供程序（根本！）

# function - 用于确认数据和复制粘贴数据的宏

> ID：15862981
> 
> 赞同：-1
> 
> 时间：2013-04-07T13:35:40.297
> 
> 标签：function, excel, worksheet-function, vba

我想创建一个宏来确认在 f、I、k、m 和 o 列中有以下格式的数据日期、时间或 NA，然后复制我在第 16 行、s、t、u 列中的公式,v,x 和 y，对于在 f、I、k、m 和 o 列中有数据的每一行。手动复制和粘贴所有行非常耗时。

总之，有数据的地方，复制我的公式。摘要部分和空行将被忽略。我一直在玩复制和粘贴功能，但无法确认/验证 f、I、k、m 和 o 列中的数据。

*   我已将数据库中的数据下载到 Excel 表中。
*   数据出现在 f、I、k、m 和 o 列中。单元格可以包含日期、时间和 NA。
*   每行数据由一个空行分隔。
*   在每个分组结束时，比如说 25 到 50，信息被汇总，从而为汇总信息创建额外的行，然后重复。

查看数据样本

```
3/25/13  5:33 PM    5:55:59 PM   5:57:49 PM     NA  NA  
3/25/13  6:12 PM    6:19:57 PM   6:23:16 PM     NA  NA  
3/25/13  5:15 PM    5:33:51 PM   5:46:39 PM     NA  NA  
3/25/13  5:19 PM    5:50:44 PM   6:08:51 PM     NA  NA 
```

摘要部分

```
 Avg Prep Time (in min): 21.63
    Avg Print to Delivery Time (in min):
            Avg Time Out (in min):  0.00
        # of Trays: 16
    Avg Prep Time (in min): 21.63 
```

我在 s、t、u、v、x 和 y 列中的公式

```
6:15 AM 6:33 AM 0:18    6:43 AM     0:28    29 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T19:49:32.193

尝试使用这些代码

```
Sub GetFormat()
Range("A1").Value = Range("F1").NumberFormat
End Sub 
```

使用它来找出 VBA 所称的单元格格式。我认为日期称为“m/d/yyyy”，时间称为“[$-F400]h:mm:ss AM/PM” 在找出您的格式名称后，我建议将它们复制并粘贴到以下代码中（手动输入它们对我不起作用）。对于这个例子，我已经输入了“m/d/yyyy”

```
Sub verify()
If Range("F1").NumberFormat = "m/d/yyyy" Then
Range("F16").Copy Destination:=Range("A1")
End If
End Sub 
```

祝你好运！

# c# - 在 C++ 和 C# ByRef 之间传递字节数组会引发 AccessViolationException

> ID：15862983
> 
> 赞同：9
> 
> 时间：2013-04-07T13:35:49.360
> 
> 标签：c#, c++, pinvoke, dllimport

我正在尝试创建一个 Win32 DLL 公开一些在 C# 中调用的函数，如下所示

```
__declspec(dllexport) int GetData(unsigned char* *data, int* size)
{
    try
    {
        int tlen = 3;
        unsigned char* tchr = new unsigned char[5];
        tchr[0] = 'a';
        tchr[1] = 'b';
        tchr[2] = 'c';

        *size = tlen;
        *data = tchr;

        return 1;
    }
    catch (char *p)
    {
        return 0;
    }
} 
```

在 C# 方面

```
[DllImport("MyDll.dll")]
static extern int GetData(ref byte[] data, ref int size);

static void Main()
{
    try
    {
        int hr = 0;
        byte[] gData = null;
        int gSize = 0;
        hr = GetData(ref gData, ref gSize);
        Console.WriteLine(gSize);
        for (int i = 0; i < gSize; i++)
            Console.WriteLine((char)gData[i]);
    }
    catch (Exception p)
    {
        Console.WriteLine(p.ToString());
    }
} 
```

当我运行 C# 代码时，`AccessViolationException`发生在`GetData`函数上，这是 C++ 代码中的异常标志，但是，以下 C++ 代码片段可以正常工作，没有任何错误。

```
int _tmain(int argc, _TCHAR* argv[])
{
    unsigned char* data = NULL;
    int size = NULL;
    GetData(&data, &size);
    printf("%d", size);
    for (int i = 0; i < size; i++)
        printf("%c,", data[i]);
    return 0;
} 
```

如果您比较 C#`main`函数和 C++ `_tmain`，它们几乎是相似的，所以我可能会在哪里犯错？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-07T13:59:44.367

您正在返回一个通过调用 C++ new 分配的数组，并希望封送拆收器将其转换为 C# byte[]。那不会发生。

您需要通过引用传递一个指针，然后手动编组它。您的 p/invoke 应如下所示：

```
[DllImport("MyDll.dll")]
static extern int GetData(out IntPtr data, out int size); 
```

当函数返回时，数据将指向数组，您可以使用 Marshal 类读取内容。我猜你会把[它复制到一个新的字节数组](http://msdn.microsoft.com/en-gb/library/ms146631.aspx)中。

```
var arr = new byte[size];
Marshal.Copy(data, arr, 0, size); 
```

其他几点：

1.  调用约定不匹配。本机端是 cdecl，托管端是 stdcall。
2.  您需要导出一个释放器来删除本机函数返回的内存。考虑调用者分配缓冲区的重新设计。

# ruby-on-rails - 如何同时使用默认验证器和自定义验证器？如何定义它们的顺序？

> ID：15862984
> 
> 赞同：1
> 
> 时间：2013-04-07T13:35:57.093
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

这是我的模型课：

```
class Availability < ActiveRecord::Base
  attr_accessible :beginning_date, :end_date
  validates :beginning_date, :end_date :presence => true

  # custom validators
  validate :dates_cant_be_in_the_past

  def dates_cant_be_in_the_past
    if Date.parse(beginning_date) < Date.today
      errors.add(:beginning_date, "cant be in the past")
    end

    if Date.parse(end_date) < Date.today
      errors.add(:end_date, "cant be in the past")
    end
  end
end 
```

现在应该发生两件事：首先验证`beginning_date`and`end_date`属性的存在，然后运行我的`dates_cant_be_in_the_past`验证器。可悲的是，这种方法不起作用。如果我将字段留空，则该`Date.parse`方法会引发异常，因为参数显然是空的。

是否可以定义默认和自定义验证的顺序？还是我必须自己实现存在验证器，所以我会做类似的事情：

```
validate :dates_cant_be_blank, :dates_cant_be_in_the_past 
```

指南[至少](http://guides.rubyonrails.org/active_record_validations_callbacks.html#custom-methods)说：

> 您可以为每个类方法传递多个符号，并且相应的验证将按照注册时的相同顺序运行。

预先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T13:54:23.327

如果您为此创建一个验证器，它会简单得多：

```
class DateValidator < ActiveModel::EachValidator
  def validate_each(record, attribute, value)
    if Date.parse(value) < Date.today
      record.errors.add(attribute, "cant be in the past")
    end
  end
end 
```

在您的模型中，您将像这样使用它：

```
class Availability < ActiveRecord::Base
  attr_accessible :beginning_date, :end_date
  validates :beginning_date, :end_date :presence => true
  validates :beginning_date, :end_date, :date => true, :allow_blank => true
end 
```

如果`:allow_blank`值为空，则阻止验证运行。使用真正的验证器对象还会从您的模型中删除代码，使其更简单，并删除您当前拥有的重复项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T13:56:55.623

你可以试试这样的

```
class Availability < ActiveRecord::Base
  attr_accessible :beginning_date, :end_date
  validates :beginning_date, :end_date : presence => true

  # custom validators
  validate :valid_dates

  def valid_dates
    if valid_string(beginning_date)
      errors.add(:beginning_date, "Can't be in the past") unless Date.parse(beginning_date) > Date.today
    end

    if valid_string(end_date)
      errors.add(:end_date, "Can't be in the past") unless Date.parse(end_date) > Date.today
    end

  end

  def valid_string(test_value)
    test.value.is_a? String
  end

end 
```

# android - 当可点击为假时更改按钮的背景颜色

> ID：15862988
> 
> 赞同：2
> 
> 时间：2013-04-07T13:36:23.287
> 
> 标签：android, button, view

当程序员在 XML 布局文件中指定按钮不可点击时，我试图通过选择器更改按钮的颜色。IE。`android:clickable="false"`这是我当前的选择器 xml 文件，它似乎无法正常工作。

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
       <item android:state_enabled="false">
        <shape xmlns:android="http://schemas.android.com/apk/res/android" 
        android:shape="rectangle">
            <solid android:color="#FF00FF"/>
            <corners 
            android:bottomRightRadius="16dp"
            android:bottomLeftRadius="16dp"
            android:topRightRadius="16dp"
            android:topLeftRadius="16dp"/>
        </shape> 
    </item>

<item android:state_pressed="true">
    <shape xmlns:android="http://schemas.android.com/apk/res/android" 
    android:shape="rectangle">
        <solid android:color="#CDAF95"/>
        <corners 
        android:bottomRightRadius="16dp"
        android:bottomLeftRadius="16dp"
        android:topRightRadius="16dp"
        android:topLeftRadius="16dp"/>
    </shape>
</item>

<item>
    <shape xmlns:android="http://schemas.android.com/apk/res/android" 
    android:shape="rectangle">
    <solid android:color="#D2B48C"/>
    <corners 
    android:bottomRightRadius="16dp"
    android:bottomLeftRadius="16dp"
    android:topRightRadius="16dp"
    android:topLeftRadius="16dp"/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T13:46:56.700

`state_clickable`不幸的是，没有`StateListDrawable`. 您可以通过两种方式解决问题：

1.  `setClickable()`调用时更改视图的背景。
2.  引入你自己的`state_clickable`选择器状态。

如果您更喜欢第二种方式，则需要在项目中添加以下更改：

**attrs.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <declare-styleable name="ClickableState">
        <attr name="state_clickable" format="boolean" />
    </declare-styleable>
</resources> 
```

**我的按钮.java**

```
private static final int[] STATE_CLICKABLE = {R.attr.state_clickable};

@Override
protected int[] onCreateDrawableState(final int extraSpace) {
    if (isClickable()) {
        final int[] drawableState = super.onCreateDrawableState(extraSpace + 1);
        mergeDrawableStates(drawableState, STATE_CLICKABLE);
        return drawableState;
    } else {
        return super.onCreateDrawableState(extraSpace);
    }
}

@Override
public void setClickable(final boolean clickable) {
    super.setClickable(clickable);
    refreshDrawableState();
} 
```

**背景.xml**

```
<selector xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:auto="http://schemas.android.com/apk/res-auto">
    <item auto:state_clickable="false">
        <!-- non-clickable shape here -->
    </item>

    <!-- other shapes -->
</selector> 
```

但是这个解决方案有一个非常明显的弱点。如果您想在不同的视图类中使用此状态，则必须对这些类进行子类化`MyButton.java`并向它们添加代码。

# pytz - pytz.UTC 和 pytz.timezone('GMT') 之间的区别

> ID：15862999
> 
> 赞同：6
> 
> 时间：2013-04-07T13:37:30.323
> 
> 标签：pytz

pytz 的[文档](http://pytz.sourceforge.net/#problems-with-localtime)说：

> 请注意，此实例 [pytz.timezone('UTC')] 与具有相同含义的其他时区（GMT、格林威治、通用等）不同的实例（或实现）。

确实：

```
>>> pytz.timezone('UTC') is pytz.timezone('GMT')
False 
```

那么……有什么区别？
我应该什么时候使用`pytz.timezone('UTC')`，什么时候应该使用`pytz.timezone('GMT')`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T09:40:30.173

UTC 实现是一个 tzinfo 实现，它将始终返回 0 分钟偏移量。

执行 pytz.timezone('GMT') 时获得的时区是 Olson 数据库中定义的 GMT 时区。它也将始终返回 0，但方式更复杂。

使用 UTC。