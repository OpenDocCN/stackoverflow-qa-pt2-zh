# StackOverflow 问答 15073000-15073999

# silverlight - silverlight 从 4 到 5 升级 ria 服务编译错误

> ID：15073003
> 
> 赞同：0
> 
> 时间：2013-02-25T17:40:14.053
> 
> 标签：silverlight, wcf-ria-services

我已将 silverlight 项目从 4 升级到 5，现在在将数据加载到 DomainContext 时出现编译错误：

```
Context.Load(Context.GetMyEntityQuery(), LoadBehavior.RefreshCurrent, null, null);

The call is ambiguous between the following methods or properties: 

'System.ServiceModel.DomainServices.Client.DomainContext.Load<MyEntity>(System.ServiceModel.DomainServices.Client.EntityQuery<MyEntity>, System.ServiceModel.DomainServices.Client.LoadBehavior, System.Action<System.ServiceModel.DomainServices.Client.LoadOperation<MyEntity>>, object)
'System.ServiceModel.DomainServices.Client.DomainContext.Load          (System.ServiceModel.DomainServices.Client.EntityQuery,           System.ServiceModel.DomainServices.Client.LoadBehavior, System.Action<System.ServiceModel.DomainServices.Client.LoadOperation>,           object)' 
```

任何想法如何解决这个问题（我有> 100个这样的错误）？

**编辑**

像这样调用有助于：

```
Context.Load<MyEntity>(Context.GetMyEntityQuery(), LoadBehavior.RefreshCurrent, null, null); 
```

罪魁祸首是这个重载（程序集 System.ServiceModel.DomainServices.Client.dll，v2.0.5.0）

```
[EditorBrowsable(EditorBrowsableState.Never)]
public virtual LoadOperation Load(EntityQuery query, LoadBehavior loadBehavior, Action<LoadOperation> callback, object userState); 
```

连同这个

```
public LoadOperation<TEntity> Load<TEntity>(EntityQuery<TEntity> query, LoadBehavior loadBehavior, Action<LoadOperation<TEntity>> callback, object userState) where TEntity : Entity; 
```

似乎后者就足够了，为什么要包括前者呢？无论如何，将进一步调查（似乎我参考了最新的 ria services 1.0 SP2，清理所有内容并重建无济于事）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-28T06:37:20.587

我曾经通过以下方式将数据加载到**DomainContext**。

```
public void GetPersonObjectDataFromService(Action<LoadOperation<TempPersonDTO>>    loadData)
    {                                           
          var query1 = this.tpDataProviderContext1.GetPersonObjectDataFromServiceQuery();
          tpDataProviderContext1.Load(query1, LoadBehavior.RefreshCurrent, loadData, null);
    } 
```

TempPersonDTO 是具有数据的类。谢谢你。

# vbscript - 使用 Vb 脚本在 Excel 中创建命名范围

> ID：15073005
> 
> 赞同：0
> 
> 时间：2013-02-25T17:40:22.493
> 
> 标签：vbscript

我创建了一个代码，用于使用 Range 对象在 Excel 中创建命名范围，但没有像在 VBA 中那样工作。错误出现在我尝试创建 Range 对象的语句中，不确定如何做到这一点。

如果有人可以建议我一个想法，那就太好了。

```
Set Exobj = CreateObject("Excel.Application")
Set Newbook = Exobj.Workbooks.Add()
Newbook.SaveAs("C:\Users\ACER\Desktop\Project Folder\Test17.xlsx")

Exobj.Workbooks.Open("C:\Users\ACER\Desktop\Project Folder\Test17.xlsx")
Exobj.Visible = True

Set Myrange = Exobj.Worksheets(sheets1).Range("A1:H11") ' statement where Error comes

For each C in Myrange
If c.Value = "" Then 
C.Value ="Blank"
End if
Next

Exobj.Workbooks.Save()
Exobj.Activeworkbooks.Close() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:07:25.843

我认为你需要`sheets1`用引号括起来，即

```
Set Myrange = Exobj.Worksheets("sheets1").Range("A1:H11") 
```

# python - Django - 检查模型字段格式

> ID：15073007
> 
> 赞同：0
> 
> 时间：2013-02-25T17:40:29.487
> 
> 标签：python, django, django-models, python-2.7

我在 Django 中定义了一个简单的模型：

```
class Student(models.Model):
    s_name = models.CharField(max_length=32)
    s_gpa = models.FloatField(min=0.0, max=5.0, default=5.0)
    s_year = models.IntegerField(min=1, max=10, default=1)
    s_registered = models.DateTimeField(auto_now_add=True)

    def __unicode__(self):
        return self.username

    def modify(self, **kwargs):
        if valid(self, kwargs):
            for k,v in kwargs.iteritems():
                setattr(self, k, v)
            self.save()

def valid(s, kwargs):
    # For all k,v pairs in kwargs
    # (1) Checks if k is one of the attributes of s. Returns False if fails.
    # (2) Checks if v fits the format defined for attribute k of s.
    # Returns False if fails.
    # Returns True if reaches this point. 
```

我正在编写有效的函数，我想执行评论中详述的命令。
对于**(1)**，我使用

```
if k not in s.__dict__: return False 
```

我需要一些帮助**(2)**。
也就是说，**如何检查值是否符合为属性（Django 模型字段）定义的格式？**

例如：valid(s_name=True) 和 valid(s_name=33*'a') 都应该返回 False。

注意：我正在尝试在不使用 Forms 的情况下解决此验证问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:04:33.450

你的`valid`和`modify`函数都应该用一个`clean`方法替换。

查看有关[模型验证的文档](https://docs.djangoproject.com/en/1.4/ref/models/instances/#validating-objects)

更新 1

您可能会完全放弃有效的方法，而只需调用即可`self.clean_feilds()`。这将验证字段 -

```
def modify(self, **kwargs):
    try:
        self.clean_fields()
        for k,v in kwargs.iteritems():
            setattr(self, k, v)
        self.save()
    except:
        pass 
```

更新 2

从您的评论中听起来，您根本不需要自己调用任何验证。如果您的更改无效，只需调用`save`然后捕获抛出的内容。`ValidationError`

```
def modify(self, **kwargs):
    try:
        for k,v in kwargs.iteritems():
            setattr(self, k, v)
        self.save()
    except ValidationError:
        #... do something? 
```

值得注意的是，许多 Python 程序员更喜欢 try / except 模式而不是 if valid / then。它被称为“请求宽恕而不是许可”原则（除其他外，它提供了对竞争条件的保护——在这种情况下可能不相关）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T18:05:17.303

使用`s`或`self`根据需要。

```
def valid(self, kwargs):
    for k, v in kwargs:
        old_v = self.__dict__[k]
        self.__dict__[k] = v
        try:
            self.save()
            self.__dict__[k] = old_v
            self.save()
        except:
            return False

        return True 
```

执行测试的方法可能比实际的“self.save()”失败更直接，但它是一个很好的起点。

或者：

```
field_list = ['s_name', 's_gpa', 's_year', 's_registered']
def valid(self, kwargs):
    for k, v in kwargs:
        exclude_list = [f for f in field_list if f != k]
        try:
            self.clean_fields(exclude=exclude_list)
        except ValidationError:
            return False

        return True 
```

使用列表理解，删除该`exclude_list`行并将该`self.clean_fields`行更改为：

```
self.clean_fields(exclude=[f for f in field_list if f != k]) 
```

# c++ - 编译器错误 libusb

> ID：15073013
> 
> 赞同：0
> 
> 时间：2013-02-25T17:40:38.730
> 
> 标签：c++, ubuntu, libusb

我正在运行 Ubuntu 12.04 并使用 c++ 我有以下代码

```
#include <iostream>
#include <libusb-1.0/libusb.h>

using namespace std;

int main(){
    //pointer to pointer of device used to retrieve a list of devices
    libusb_device **devs;
    libusb_device_handle *dev_handle; //a device handle
    libusb_context *ctx = NULL; //A LIBUSB session
    int r;// for return values
    ssize_t cnt; //holding number of devices in list
    r = libusb_init(&ctx); // initialize the library for the session we just declared

    if(r < 0){
        cout <<"init error "<<r<< endl;
        return 1;
    }

    libusb_set_debug(ctx, 3); // set verbosity level to 3, as suggested in the documentation
    cnt = libusb_get_device_list(ctx, &devs); //get the list of devices

    if (cnt < 0) {
        cout <<"Get Device Error "<< endl; // there was an error
        return 1;
    }

    cout << cnt <<" Device in list " << endl;
    dev_handle = libusb_open_device_with_vid_pid(ctx, 0951, 1689); // these are vendor id and product id

    if (dev_handle == null){
        cout <<"Cannot open device "<< endl;
    }else{
        cout << "Device opened" << endl;
    }

    libusb_free_device_list(devs, 1);// free the list unref the devices in it

    unsigned char *data = new unsigned char[4];//data to write
    data[0] = 'a'; data[1] = 'b'; data[2] = 'c'; data[3] = 'd';//some dummy values

    int actual; //used to find how many bytes were written

    if (libusb_kernal_driver_active(dev_handle, 0) == 1){// findout if kernal driver attached
        cout << "Kernal Driver Active" << endl;
        if (libus_detach_kernal_driver(dev_handle, 0) == 0 ){   //detach it
            cout<< "Kernal Driver Detached" << endl;
        }
    }

    r = libusb_claim_interface(dev_handle, 0);// claim interface 0 (the first) of devices

    if(r < 0){
        cout <<"Cannot claim interface "<<endl;
        return 1;
    }

    cout <<"Claimed interface "<<endl;

    cout<<"data->"<<data<<"<-"<<endl; // just to see the data we want to write : abcd
    cout<<"Writing data..."<<endl;

    r = libusb_bulk_transfer(dev_handle, (2 | LIBUSB_ENDPOINT_OUT), data, 4, &actual, 0);//my device's out endpoint was 2, found withe trial - the device had two endpoints: 2 and 129

    if(r == 0 && actual == 4){  // we wrote 4 bytes successfully
        cout<<"Writing successfull"<<endl;
    }else{
        cout<<"write error"<<endl;
    }

    r = libusb_release_interface(dev_handle, 0); // release the claimed interface

    if (r != 0){
        cout << "Cannot release interface" << endl;
        retrun 1;
    }
    cout<<"Released interface"<<endl;
    libusb_close(dev_handle); // close the device we opened
    libusb_exit(ctx); // need to be called to end the

    delete[] data;// delete the allocated memory for data
    return 0;
    //printf("Hello libusb!");
    //return 0;
} 
```

***我尝试了以下三个命令来编译上面的代码***

```
g++ transfer_data_libusb.cpp $(pkg-config --libs libusb-1.0) -o transfer_data_libusb
g++ transfer_data_libusb.cpp -o transfer_data_libusb
g++ transfer_data_libusb.cpp 
```

但我收到以下错误

```
transfer_data_libusb.cpp: In function ‘int main()’:
transfer_data_libusb.cpp:32:20: error: ‘null’ was not declared in this scope
transfer_data_libusb.cpp:45:47: error: ‘libusb_kernal_driver_active’ was not declared in this scope
transfer_data_libusb.cpp:47:47: error: ‘libus_detach_kernal_driver’ was not declared in this scope 
```

我很难理解这些错误，如果可能的话，我希望得到一些解决方案的建议，

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T17:44:56.303

您收到错误是因为此变量和函数（符号）未在您的主程序或您使用的库（头文件）中声明。你可能只是拼错了他们的名字。

*   你应该有“NULL”而不是“null”
*   你应该有 'libusb_kernel_driver_active' 而不是 'libusb_kernal_driver_active'</li>
*   您应该使用“libus_detach_kernel_driver”而不是“libus_detach_kernal_driver”</li>

只要解决这个问题，一切都应该没问题。

# heroku - Heroku 是否支持 Play 2.1？

> ID：15073017
> 
> 赞同：1
> 
> 时间：2013-02-25T17:41:01.437
> 
> 标签：heroku, playframework, playframework-2.1

他们的 Play 页面于 2012 年 8 月更新，仅提及 Play 2.0。

他们支持 Play 2.1 吗？我确实在这里找到了一些关于将 Play 2.1 应用程序部署到 Heroku 的问题，所以我认为它正在工作并且文档从未更新过。任何人都可以确认吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T19:33:39.187

是的，Play2.1 在 Heroku 上运行良好。你试一试 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T10:10:10.040

工作正常，但很高兴知道他们不支持 websockets（还），以防你的应用程序使用它。我认为唯一支持它的是 AWS。

# sqlite - sqlite 选择该列大于另一列的不同行

> ID：15073018
> 
> 赞同：0
> 
> 时间：2013-02-25T17:41:01.960
> 
> 标签：sqlite, select

我有以下账单表

```
barcode        name      amount      payments
12345          name a    123         0
12346          name a    125         125
12333          name a    133         10
12347          name b    125         125
12348          name c    100         90 
```

我想选择金额减去付款大于零的不同行

所以我只想选择以下

```
 name a    
         name c 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T17:47:49.167

像这样？

```
SELECT DISTINCT(name)
FROM bill
WHERE amount > payments 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-25T18:05:33.337

试试下面...它会帮助你...

```
SELECT Distinct name from bill where (amount - payments) > 0 
```

# android - 垂直滚动视图不能用光标滚动过去编辑文本

> ID：15073026
> 
> 赞同：2
> 
> 时间：2013-02-25T17:41:15.210
> 
> 标签：android, android-edittext, scrollview

我有一个垂直滚动视图，其中包含几个单行编辑文本。

我的布局只有横向。

我无法将滚动视图滚动到具有光标的编辑文本之外。

如果我更改其中包含光标的编辑文本，我可以滚动直到该编辑文本到达屏幕的顶部或底部边缘。

此活动上唯一可以接收光标/焦点的控件是滚动视图中的编辑文本。将它们设置为没有焦点可以解决滚动问题，但显然我不能输入任何值。

请告知我该如何解决这个问题？

由于这种布局的复杂性，我只列出了滚动视图部分：

```
 <LinearLayout android:id="@+id/LinearLayoutRight" android:layout_width="0dp" android:layout_height="fill_parent" android:layout_weight="37" android:orientation="vertical">
    <ScrollView android:id="@+id/scrollView1" android:layout_width="match_parent" android:layout_height="match_parent">
        <LinearLayout android:layout_width="match_parent" android:layout_height="match_parent" android:orientation="vertical">
            <LinearLayout android:id="@+id/counter_pat_section_row1" android:layout_width="match_parent" android:layout_height="108dp" android:layout_marginTop="1dp" android:background="@drawable/shape" android:orientation="vertical">
                <LinearLayout android:id="@+id/LinearLayout05" android:layout_width="match_parent" android:layout_height="wrap_content" android:layout_gravity="center" android:layout_marginTop="4dp" android:layout_weight="1">
                    <LinearLayout android:layout_width="0dp" android:layout_height="match_parent" android:layout_gravity="center" android:layout_marginLeft="4dp" android:layout_weight="5">
                        <TextView android:id="@+id/TextView01" android:layout_width="fill_parent" android:layout_height="wrap_content" android:layout_gravity="center_vertical" android:layout_marginRight="2dp" android:gravity="right" android:text="Stop at row1" android:textAppearance="?android:attr/textAppearanceSmall" android:textColor="@color/white1"/>
                    </LinearLayout>
                    <LinearLayout android:layout_width="0dp" android:layout_height="match_parent" android:layout_gravity="center" android:layout_weight="3">
                        <EditText android:id="@+id/rowmax1" android:layout_width="fill_parent" android:layout_height="40dp" android:layout_gravity="center_vertical" android:layout_marginRight="3dp" android:layout_weight="1" android:inputType="number" android:textAppearance="?android:attr/textAppearanceMedium" android:textColor="@color/black"/>
                    </LinearLayout>
                    <LinearLayout android:id="@+id/LinearLayout1" android:layout_width="0dp" android:layout_height="match_parent" android:layout_gravity="center_vertical" android:layout_marginRight="3dp" android:layout_weight="2" android:gravity="center_vertical" android:orientation="vertical">
                        <Button android:id="@+id/resetrow" android:layout_width="fill_parent" android:layout_height="wrap_content" android:layout_gravity="center_vertical" android:background="@drawable/mybutton" android:gravity="center" android:singleLine="true" android:text="Reset" android:textAppearance="?android:attr/textAppearanceSmall" android:textColor="@color/black" android:textSize="8sp"/>
                    </LinearLayout>
                </LinearLayout>
                <LinearLayout android:id="@+id/LinearLayout02" android:layout_width="match_parent" android:layout_height="wrap_content" android:layout_gravity="center" android:layout_marginBottom="5dp" android:layout_weight="1">
                    <LinearLayout android:layout_width="0dp" android:layout_height="match_parent" android:layout_gravity="center" android:layout_marginLeft="4dp" android:layout_weight="5">
                        <TextView android:id="@+id/rowcounter" android:layout_width="fill_parent" android:layout_height="fill_parent" android:layout_gravity="center" android:gravity="center" android:text="0" android:textAppearance="?android:attr/textAppearanceLarge" android:textColor="@color/white1" android:textSize="44sp"/>
                    </LinearLayout>
                    <LinearLayout android:layout_width="0dp" android:layout_height="match_parent" android:layout_gravity="center" android:layout_weight="3">
                        <Button android:id="@+id/rowup" android:layout_width="fill_parent" android:layout_height="fill_parent" android:layout_gravity="center_vertical" android:layout_marginRight="3dp" android:background="@drawable/mybutton" android:gravity="center" android:text="+" android:textAppearance="?android:attr/textAppearanceLarge" android:textColor="@color/black"/>
                    </LinearLayout>
                    <LinearLayout android:id="@+id/LinearLayout1" android:layout_width="0dp" android:layout_height="match_parent" android:layout_gravity="center" android:layout_marginRight="3dp" android:layout_weight="2" android:gravity="center_vertical" android:orientation="vertical">
                        <Button android:id="@+id/rowdown" android:layout_width="fill_parent" android:layout_height="fill_parent" android:background="@drawable/mybutton" android:gravity="center_vertical|center_horizontal" android:singleLine="false" android:text="-" android:textAppearance="?android:attr/textAppearanceLarge" android:textColor="@color/black"/>
                    </LinearLayout>
                </LinearLayout>
            </LinearLayout>
            <LinearLayout android:id="@+id/counter_pat_section_row2" android:layout_width="match_parent" android:layout_height="108dp" android:layout_marginTop="1dp" android:background="@drawable/shape" android:orientation="vertical">
                <LinearLayout android:id="@+id/LinearLayout08" android:layout_width="match_parent" android:layout_height="wrap_content" android:layout_gravity="center" android:layout_marginTop="4dp" android:layout_weight="1">
                    <LinearLayout android:layout_width="0dp" android:layout_height="match_parent" android:layout_gravity="center" android:layout_marginLeft="4dp" android:layout_weight="5">
                        <TextView android:id="@+id/TextView04" android:layout_width="fill_parent" android:layout_height="wrap_content" android:layout_gravity="center_vertical" android:layout_marginRight="2dp" android:gravity="right" android:text="Stop at row2" android:textAppearance="?android:attr/textAppearanceSmall" android:textColor="@color/white1"/>
                    </LinearLayout>
                    <LinearLayout android:layout_width="0dp" android:layout_height="match_parent" android:layout_gravity="center" android:layout_weight="3">
                        <EditText android:id="@+id/rowmax2" android:layout_width="fill_parent" android:layout_height="40dp" android:layout_gravity="center_vertical" android:layout_marginRight="3dp" android:layout_weight="1" android:inputType="number" android:textAppearance="?android:attr/textAppearanceMedium" android:textColor="@color/black"/>
                    </LinearLayout>
                    <LinearLayout android:id="@+id/LinearLayout07" android:layout_width="0dp" android:layout_height="match_parent" android:layout_gravity="center_vertical" android:layout_marginRight="3dp" android:layout_weight="2" android:gravity="center_vertical" android:orientation="vertical">
                        <Button android:id="@+id/Button01" android:layout_width="fill_parent" android:layout_height="wrap_content" android:layout_gravity="center_vertical" android:background="@drawable/mybutton" android:gravity="center" android:singleLine="true" android:text="Reset" android:textAppearance="?android:attr/textAppearanceSmall" android:textColor="@color/black" android:textSize="8sp"/>
                    </LinearLayout>
                </LinearLayout>
                <LinearLayout android:id="@+id/LinearLayout06" android:layout_width="match_parent" android:layout_height="wrap_content" android:layout_gravity="center" android:layout_marginBottom="5dp" android:layout_weight="1">
                    <LinearLayout android:layout_width="0dp" android:layout_height="match_parent" android:layout_gravity="center" android:layout_marginLeft="4dp" android:layout_weight="5">
                        <TextView android:id="@+id/TextView02" android:layout_width="fill_parent" android:layout_height="fill_parent" android:layout_gravity="center" android:gravity="center" android:text="0" android:textAppearance="?android:attr/textAppearanceLarge" android:textColor="@color/white1" android:textSize="44sp"/>
                    </LinearLayout>
                    <LinearLayout android:layout_width="0dp" android:layout_height="match_parent" android:layout_gravity="center" android:layout_weight="3">
                        <Button android:id="@+id/Button03" android:layout_width="fill_parent" android:layout_height="fill_parent" android:layout_gravity="center_vertical" android:layout_marginRight="3dp" android:background="@drawable/mybutton" android:gravity="center" android:text="+" android:textAppearance="?android:attr/textAppearanceLarge" android:textColor="@color/black"/>
                    </LinearLayout>
                    <LinearLayout android:id="@+id/LinearLayout07" android:layout_width="0dp" android:layout_height="match_parent" android:layout_gravity="center" android:layout_marginRight="3dp" android:layout_weight="2" android:gravity="center_vertical" android:orientation="vertical">
                        <Button android:id="@+id/Button02" android:layout_width="fill_parent" android:layout_height="fill_parent" android:background="@drawable/mybutton" android:gravity="center_vertical|center_horizontal" android:singleLine="false" android:text="-" android:textAppearance="?android:attr/textAppearanceLarge" android:textColor="@color/black"/>
                    </LinearLayout>
                </LinearLayout>
            </LinearLayout>
            <LinearLayout android:id="@+id/counter_pat_section_row3" android:layout_width="match_parent" android:layout_height="108dp" android:layout_marginTop="1dp" android:background="@drawable/shape" android:orientation="vertical">
                <LinearLayout android:id="@+id/LinearLayout09" android:layout_width="match_parent" android:layout_height="wrap_content" android:layout_gravity="center" android:layout_marginTop="4dp" android:layout_weight="1">
                    <LinearLayout android:layout_width="0dp" android:layout_height="match_parent" android:layout_gravity="center" android:layout_marginLeft="4dp" android:layout_weight="5">
                        <TextView android:id="@+id/TextView06" android:layout_width="fill_parent" android:layout_height="wrap_content" android:layout_gravity="center_vertical" android:layout_marginRight="2dp" android:gravity="right" android:text="Stop at row3" android:textAppearance="?android:attr/textAppearanceSmall" android:textColor="@color/white1"/>
                    </LinearLayout>
                    <LinearLayout android:layout_width="0dp" android:layout_height="match_parent" android:layout_gravity="center" android:layout_weight="3">
                        <EditText android:id="@+id/rowmax3" android:layout_width="fill_parent" android:layout_height="40dp" android:layout_gravity="center_vertical" android:layout_marginRight="3dp" android:layout_weight="1" android:inputType="number" android:textAppearance="?android:attr/textAppearanceMedium" android:textColor="@color/black"/>
                    </LinearLayout>
                    <LinearLayout android:id="@+id/LinearLayout11" android:layout_width="0dp" android:layout_height="match_parent" android:layout_gravity="center_vertical" android:layout_marginRight="3dp" android:layout_weight="2" android:gravity="center_vertical" android:orientation="vertical">
                        <Button android:id="@+id/Button05" android:layout_width="fill_parent" android:layout_height="wrap_content" android:layout_gravity="center_vertical" android:background="@drawable/mybutton" android:gravity="center" android:singleLine="true" android:text="Reset" android:textAppearance="?android:attr/textAppearanceSmall" android:textColor="@color/black" android:textSize="8sp"/>
                    </LinearLayout>
                </LinearLayout>
                <LinearLayout android:id="@+id/LinearLayout12" android:layout_width="match_parent" android:layout_height="wrap_content" android:layout_gravity="center" android:layout_marginBottom="5dp" android:layout_weight="1">
                    <LinearLayout android:layout_width="0dp" android:layout_height="match_parent" android:layout_gravity="center" android:layout_marginLeft="4dp" android:layout_weight="5">
                        <TextView android:id="@+id/TextView05" android:layout_width="fill_parent" android:layout_height="fill_parent" android:layout_gravity="center" android:gravity="center" android:text="0" android:textAppearance="?android:attr/textAppearanceLarge" android:textColor="@color/white1" android:textSize="44sp"/>
                    </LinearLayout>
                    <LinearLayout android:layout_width="0dp" android:layout_height="match_parent" android:layout_gravity="center" android:layout_weight="3">
                        <Button android:id="@+id/Button04" android:layout_width="fill_parent" android:layout_height="fill_parent" android:layout_gravity="center_vertical" android:layout_marginRight="3dp" android:background="@drawable/mybutton" android:gravity="center" android:text="+" android:textAppearance="?android:attr/textAppearanceLarge" android:textColor="@color/black"/>
                    </LinearLayout>
                    <LinearLayout android:id="@+id/LinearLayout11" android:layout_width="0dp" android:layout_height="match_parent" android:layout_gravity="center" android:layout_marginRight="3dp" android:layout_weight="2" android:gravity="center_vertical" android:orientation="vertical">
                        <Button android:id="@+id/Button06" android:layout_width="fill_parent" android:layout_height="fill_parent" android:background="@drawable/mybutton" android:gravity="center_vertical|center_horizontal" android:singleLine="false" android:text="-" android:textAppearance="?android:attr/textAppearanceLarge" android:textColor="@color/black"/>
                    </LinearLayout>
                </LinearLayout>
            </LinearLayout>
            <LinearLayout android:id="@+id/counter_pat_section_row4" android:layout_width="match_parent" android:layout_height="108dp" android:layout_marginTop="1dp" android:background="@drawable/shape" android:orientation="vertical">
                <LinearLayout android:id="@+id/LinearLayout01" android:layout_width="match_parent" android:layout_height="wrap_content" android:layout_gravity="center" android:layout_marginTop="4dp" android:layout_weight="1">
                    <LinearLayout android:layout_width="0dp" android:layout_height="match_parent" android:layout_gravity="center" android:layout_marginLeft="4dp" android:layout_weight="5">
                        <TextView android:id="@+id/TextView07" android:layout_width="fill_parent" android:layout_height="wrap_content" android:layout_gravity="center_vertical" android:layout_marginRight="2dp" android:gravity="right" android:text="Stop at row4" android:textAppearance="?android:attr/textAppearanceSmall" android:textColor="@color/white1"/>
                    </LinearLayout>
                    <LinearLayout android:layout_width="0dp" android:layout_height="match_parent" android:layout_gravity="center" android:layout_weight="3">
                        <EditText android:id="@+id/rowmax4" android:layout_width="fill_parent" android:layout_height="40dp" android:layout_gravity="center_vertical" android:layout_marginRight="3dp" android:layout_weight="1" android:inputType="number" android:textAppearance="?android:attr/textAppearanceMedium" android:textColor="@color/black"/>
                    </LinearLayout>
                    <LinearLayout android:id="@+id/LinearLayout14" android:layout_width="0dp" android:layout_height="match_parent" android:layout_gravity="center_vertical" android:layout_marginRight="3dp" android:layout_weight="2" android:gravity="center_vertical" android:orientation="vertical">
                        <Button android:id="@+id/Button07" android:layout_width="fill_parent" android:layout_height="wrap_content" android:layout_gravity="center_vertical" android:background="@drawable/mybutton" android:gravity="center" android:singleLine="true" android:text="Reset" android:textAppearance="?android:attr/textAppearanceSmall" android:textColor="@color/black" android:textSize="8sp"/>
                    </LinearLayout>
                </LinearLayout>
                <LinearLayout android:id="@+id/LinearLayout13" android:layout_width="match_parent" android:layout_height="wrap_content" android:layout_gravity="center" android:layout_marginBottom="5dp" android:layout_weight="1">
                    <LinearLayout android:layout_width="0dp" android:layout_height="match_parent" android:layout_gravity="center" android:layout_marginLeft="4dp" android:layout_weight="5">
                        <TextView android:id="@+id/TextView08" android:layout_width="fill_parent" android:layout_height="fill_parent" android:layout_gravity="center" android:gravity="center" android:text="0" android:textAppearance="?android:attr/textAppearanceLarge" android:textColor="@color/white1" android:textSize="44sp"/>
                    </LinearLayout>
                    <LinearLayout android:layout_width="0dp" android:layout_height="match_parent" android:layout_gravity="center" android:layout_weight="3">
                        <Button android:id="@+id/Button09" android:layout_width="fill_parent" android:layout_height="fill_parent" android:layout_gravity="center_vertical" android:layout_marginRight="3dp" android:background="@drawable/mybutton" android:gravity="center" android:text="+" android:textAppearance="?android:attr/textAppearanceLarge" android:textColor="@color/black"/>
                    </LinearLayout>
                    <LinearLayout android:id="@+id/LinearLayout14" android:layout_width="0dp" android:layout_height="match_parent" android:layout_gravity="center" android:layout_marginRight="3dp" android:layout_weight="2" android:gravity="center_vertical" android:orientation="vertical">
                        <Button android:id="@+id/Button08" android:layout_width="fill_parent" android:layout_height="fill_parent" android:background="@drawable/mybutton" android:gravity="center_vertical|center_horizontal" android:singleLine="false" android:text="-" android:textAppearance="?android:attr/textAppearanceLarge" android:textColor="@color/black"/>
                    </LinearLayout>
                </LinearLayout>
            </LinearLayout>
            <LinearLayout android:id="@+id/counter_pat_section_repeat" android:layout_width="match_parent" android:layout_height="108dp" android:layout_marginTop="1dp" android:background="@drawable/shape" android:orientation="vertical">
                <LinearLayout android:id="@+id/LinearLayout04" android:layout_width="match_parent" android:layout_height="wrap_content" android:layout_gravity="center" android:layout_marginTop="4dp" android:layout_weight="1" android:weightSum="10">
                    <LinearLayout android:layout_width="0dp" android:layout_height="match_parent" android:layout_gravity="center" android:layout_marginLeft="4dp" android:layout_weight="5">
                        <TextView android:id="@+id/TextView03" android:layout_width="fill_parent" android:layout_height="wrap_content" android:layout_gravity="center_vertical" android:layout_marginRight="2dp" android:gravity="right" android:singleLine="false" android:text="Stop at repeat" android:textAppearance="?android:attr/textAppearanceSmall" android:textColor="@color/white1"/>
                    </LinearLayout>
                    <LinearLayout android:layout_width="0dp" android:layout_height="match_parent" android:layout_gravity="center" android:layout_weight="3">
                        <EditText android:id="@+id/repeatmax" android:layout_width="fill_parent" android:layout_height="40dp" android:layout_gravity="center_vertical" android:layout_marginRight="3dp" android:layout_weight="1" android:inputType="number" android:textAppearance="?android:attr/textAppearanceMedium" android:textColor="@color/black">
                            <requestFocus />
                        </EditText>
                    </LinearLayout>
                    <LinearLayout android:id="@+id/LinearLayout1" android:layout_width="0dp" android:layout_height="match_parent" android:layout_gravity="center" android:layout_marginRight="3dp" android:layout_weight="2" android:gravity="center_vertical" android:orientation="vertical">
                        <Button android:id="@+id/resetrepeat" android:layout_width="fill_parent" android:layout_height="wrap_content" android:layout_gravity="center_vertical" android:background="@drawable/mybutton" android:singleLine="true" android:text="Reset" android:textAppearance="?android:attr/textAppearanceSmall" android:textColor="@color/black" android:textSize="8sp"/>
                    </LinearLayout>
                </LinearLayout>
                <LinearLayout android:id="@+id/LinearLayout03" android:layout_width="match_parent" android:layout_height="wrap_content" android:layout_gravity="center" android:layout_marginBottom="5dp" android:layout_weight="1" android:weightSum="10">
                    <LinearLayout android:layout_width="0dp" android:layout_height="match_parent" android:layout_gravity="center" android:layout_marginLeft="4dp" android:layout_weight="5">
                        <TextView android:id="@+id/repeatcounter" android:layout_width="fill_parent" android:layout_height="fill_parent" android:layout_gravity="center" android:gravity="center" android:text="0" android:textAppearance="?android:attr/textAppearanceLarge" android:textColor="@color/white1" android:textSize="44sp"/>
                    </LinearLayout>
                    <LinearLayout android:layout_width="0dp" android:layout_height="match_parent" android:layout_gravity="center" android:layout_weight="3">
                        <Button android:id="@+id/repeatup" android:layout_width="fill_parent" android:layout_height="fill_parent" android:layout_gravity="right" android:layout_marginRight="3dp" android:layout_weight="1" android:background="@drawable/mybutton" android:text="+" android:textAppearance="?android:attr/textAppearanceLarge" android:textColor="@color/black"/>
                    </LinearLayout>
                    <LinearLayout android:id="@+id/LinearLayout1" android:layout_width="0dp" android:layout_height="match_parent" android:layout_gravity="center" android:layout_marginRight="3dp" android:layout_weight="2" android:gravity="center_vertical" android:orientation="vertical">
                        <Button android:id="@+id/repeatdown" android:layout_width="fill_parent" android:layout_height="fill_parent" android:background="@drawable/mybutton" android:gravity="center" android:text="-" android:textAppearance="?android:attr/textAppearanceLarge" android:textColor="@color/black"/>
                    </LinearLayout>
                </LinearLayout>
            </LinearLayout>
            <LinearLayout android:id="@+id/counter_pat_section_checkbox" android:layout_width="match_parent" android:layout_height="40dp">
                <CheckBox android:id="@+id/linkcounters" android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_gravity="center_vertical" android:layout_weight="1" android:text="Link Counts" android:textColor="@color/white1" android:textSize="10sp"/>
                <CheckBox android:id="@+id/screenon" android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_gravity="center_vertical" android:layout_weight="1" android:text="Keep Awake" android:textColor="@color/white1" android:textSize="10sp"/>
                <CheckBox android:id="@+id/soundon" android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_gravity="center_vertical" android:singleLine="false" android:text="\u266A" android:textColor="@color/white1" android:textSize="16sp"/>
            </LinearLayout>
        </LinearLayout>
    </ScrollView>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:13:42.063

这是我的 hack，效果很好....

```
 sv = (ScrollView) this.findViewById(R.id.counter_pat_scrollview);
    sv.setDescendantFocusability(ViewGroup.FOCUS_BEFORE_DESCENDANTS);
    sv.setFocusable(true);
    sv.setFocusableInTouchMode(true);
    sv.setOnTouchListener(new OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            if (rowmax1.hasFocus()) { rowmax1.clearFocus(); }
            if (rowmax2.hasFocus()) { rowmax2.clearFocus(); }
            if (rowmax3.hasFocus()) { rowmax3.clearFocus(); }
            if (rowmax4.hasFocus()) { rowmax4.clearFocus(); }
            return false;
        }
    }); 
```

在此示例中，rowmax1、2、3 等是 EditText。

当视图高度较大（垂直滚动视图）并且滚动视图包含编辑文本时，这将允许滚动视图滚动到屏幕边界之外。

并且它不会阻止用户按下编辑文本并获得软键盘。

希望这最终能帮助别人......如果可以的话，请标记我？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-03T18:35:27.527

我发现 layout_weight 使 edittext 行为不端。我只是暂时停止使用此参数，直到有更多关于处理此案的信息。

# go - 在这种特殊情况下，为什么 gccgo 比 gc 慢？

> ID：15073027
> 
> 赞同：6
> 
> 时间：2013-02-25T17:41:17.443
> 
> 标签：go, gprof

我相信知道的每个人都知道`golang`这里的[博客文章](http://blog.golang.org/2011/06/profiling-go-programs.html)。

再读一遍，我想知道使用`gccgo`代替是否`go build`会提高速度。在我的典型用例（科学计算）中，生成的`gccgo`二进制文件总是比生成的二进制文件快`go build`。

所以，只需抓住这个文件：[havlak6.go](http://code.google.com/p/benchgraffiti/source/browse/havlak/havlak6.go)并编译它：

```
go build havlak6.go -O havlak6_go
gccgo -o havlak6_gccgo -march=native -Ofast havlak6.go 
```

惊喜 ！

```
$/usr/bin/time ./havlak6_go
5.45user 0.06system 0:05.54elapsed 99%CPU

$/usr/bin/time ./havlak6_gccgo
11.38user 0.16system 0:11.74elapsed 98%CPU 
```

我很好奇，想知道为什么“优化”编译器会产生较慢的代码。

我尝试`gprof`在`gccgo`生成的二进制文件上使用：

```
gccgo -pg -march=native -Ofast havlak6.go
./a.out
gprof a.out gmon.out 
```

没有运气：

```
Flat profile:

Each sample counts as 0.01 seconds.
 no time accumulated 
```

正如你所看到的，代码实际上并没有被分析。

当然，我读过[这个](https://stackoverflow.com/questions/6816274/how-to-use-gprof-in-linux)，但正如你所见，程序需要 10+ 秒才能执行......样本数应该 > 1000。

我也试过：

```
rm a.out gmon.out
LDFLAGS='-g -pg' gccgo -g -pg -march=native -Ofast havlak6.go
./a.out
gprof 
```

也没有成功。

你知道出了什么问题吗？你知道为什么`gccgo`，它的所有优化例程都没有比`gc`这种情况更快吗？

`go`版本：1.0.2 `gcc`版本：4.7.2

**编辑：**

哦，我完全忘了提......我显然在`gccgo`-generated 二进制文件上尝试了 pprof ......这是一个`top10`：

```
Welcome to pprof!  For help, type 'help'.
(pprof) top10
Total: 1143 samples
    1143 100.0% 100.0%     1143 100.0% 0x00007fbfb04cf1f4
       0   0.0% 100.0%      890  77.9% 0x00007fbfaf81101e
       0   0.0% 100.0%        4   0.3% 0x00007fbfaf8deb64
       0   0.0% 100.0%        1   0.1% 0x00007fbfaf8f2faf
       0   0.0% 100.0%        3   0.3% 0x00007fbfaf8f2fc5
       0   0.0% 100.0%        1   0.1% 0x00007fbfaf8f2fc9
       0   0.0% 100.0%        1   0.1% 0x00007fbfaf8f2fd6
       0   0.0% 100.0%        1   0.1% 0x00007fbfaf8f2fdf
       0   0.0% 100.0%        2   0.2% 0x00007fbfaf8f4a2f
       0   0.0% 100.0%        1   0.1% 0x00007fbfaf8f4a33 
```

这就是为什么我在寻找别的东西。

**编辑2：**

由于似乎有人希望我的问题被关闭，我没有尝试突然使用`gprof`：[https ://groups.google.com/d/msg/golang-nuts/1xESoT5Xcd0/bpMvxQeJguMJ](https://groups.google.com/d/msg/golang-nuts/1xESoT5Xcd0/bpMvxQeJguMJ)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T22:54:02.653

在 Valgrind 下运行 gccgo 生成的二进制文件似乎表明它`gccgo`的内存分配器效率低下。`gccgo`这可能是4.7.2 比`go`1.0.2慢的原因之一。在 Valgrind 下运行 go 1.0.2 生成的二进制文件是不可能的，因此在这种情况下，很难确定内存分配是否是 gccgo 的主要性能问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-13T18:00:42.697

还请记住`go build`，默认为静态链接，因此对于苹果与苹果的比较，您应该为 gccgo 提供`-static`or`-static-libgo`选项。

# .net - 了解垃圾收集器/.NET 的底层 CLR

> ID：15073033
> 
> 赞同：0
> 
> 时间：2013-02-25T17:41:36.043
> 
> 标签：.net, c#-4.0, clr

您能否指出一些书籍或网站，详细介绍（深入）.Net Framework（例如 4.0 及更高版本）的 CLR 和垃圾收集器中使用的底层机制和接口？

我最终试图学习如何让垃圾收集器在与包含该项目的非托管列表对话时认为它已被标记，并且觉得在获得远程成功之前我可能需要学习一些知识。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T17:46:32.580

我读过的关于内部的最佳文章之一是[MSDN 杂志 2005 年 5 月期 - JIT 和运行 - 深入了解 .NET Framework 内部以了解 CLR 如何创建运行时对象](https://arghya.xyz/assets/downloads/Objects_MSDN_May2005.pdf)。

了解内部原理的好书是 Jeffery Richter 的[CLR Via C#](https://rads.stackoverflow.com/amzn/click/com/0735667454)。

虽然它停留在 v2.0 运行时内部，但[SSCLI（例如转子）](http://www.microsoft.com/en-us/download/details.aspx?id=4917)仍然与理解 .Net 4.x 内部非常相关。虽然它与生产运行时之间存在差异，但许多概念是相同的。

不过，4.0 和 4.5 中的 GC 确实已经发展，其中一位工程师[Maoni Stephens](http://blogs.msdn.com/b/maoni/)让我们及时了解更新，包括后台并发和持续的低延迟。

就您的具体需求而言，实际上只有两种情况：您正在使用 PInvoke 服务，在这种情况下，您无需担心 GC 从本机端影响您的托管对象，因为 PInvoke 会为您，以及您必须明确地将对象固定在 GC 堆上的情况，否则它可能会在用于非托管代码时移动或被收集。为此，您可以使用 C#`fixed`或 C++/CLI`pin_ptr`或使用[GCHandle](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.gchandle.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T18:32:56.407

`Pro .NET Performance`来自 Sasha Goldshtein 的一章专门介绍垃圾收集器。他以非常详细和准确的信息涵盖了该主题。

[Pro .NET 性能链接](http://www.apress.com/9781430244585)

正如其他人`CLR via C#`从 Jeffrey Richter 那里提到的那样 - 最近发布了第四版（更新为 4.5，尽管 GC 部分没有发生太大变化），我也可以向您推荐。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T17:43:22.783

[msdn 文档](http://msdn.microsoft.com/en-us/library/0xy59wtx.aspx)始终是一个很好的信息来源。

# jquery - 关闭带有链接 ID 的 jQuery UI 对话框

> ID：15073034
> 
> 赞同：0
> 
> 时间：2013-02-25T17:41:37.847
> 
> 标签：jquery

这是我的代码，为什么不能关闭 img 链接？链接是 id="closeme"。它根本不火。

```
function displayerror(text){        
// Pop up the new error dialog
        var $errors_dialog = $('<div></div>')
        .html('<div class="notice_body"><div class="notice_header"><img src="images/header.gif" width="634" height="37"></div><div class="notice_mid"><div class="notice_left"><img src="images/body_left.gif" width="164" height="167"></div><div class="notice_right">'+text+'</div></div><div class="notice_footer"><a href="#" id="closeme"><img src="images/footer.gif" width="634" height="49"></a></div></div>')
        $errors_dialog.dialog({
            autoOpen: false,
            maxWidth:670,
                    maxHeight: 260,
                        width: 670,
                        modal: true ,
                        height: 500,
                        resizable: false,
                        dialogClass:'transparent',
                        position: ['top', 175],
                        create: function(event, ui) { 
                       $("#closeme").click(function(event) {
                        alert("test");
                            $errors_dialog.dialog('close');
                })}
        });

        $errors_dialog.dialog('open');
        return false; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T21:12:34.263

在公开声明之前实现了这一点：

```
 $("#closeme").click(function(){
            $errors_dialog.dialog('close');
        }); 
```

# opencv - 追踪功能

> ID：15073038
> 
> 赞同：0
> 
> 时间：2013-02-25T17:41:53.453
> 
> 标签：opencv

我想在 2 张图像（镜头 A、镜头 B）中跟踪一个对象。我知道第一张照片（ShotA）中物体的位置，但我不知道第二张照片（Shot B）中物体的位置。镜头 A 有多个对象，因此为了跟踪特定对象，我选择要跟踪的对象所在的图像的 ROI。问题是我如何在镜头 B 中跟踪该对象的特征，同时保持相同的 ROI 大小。我可以在不选择 ROI 的情况下在整个图像 B 中跟踪该对象的特征吗？

这是我的代码。目前它在 SHOTB 中选择与 SHOTA 相同的 ROI，但有时 SHOTA 的 ROI 中的对象不在 SHOT B 的 ROI 中。

```
 IplImage* imgA = cvLoadImage("52783180_RAW_OVR1.jpg",CV_LOAD_IMAGE_GRAYSCALE);

 cvSetImageROI(imgA, cvRect(2300, 1700, 1000,1200));

cvNamedWindow("SHOTA",0);
cvShowImage("SHOTA", imgA);

//cvWaitKey(0);

CvSize      img_sz    = cvGetSize( imgA );
int         win_size = 10;

IplImage* imgB = cvLoadImage("52783180_RAW_OVR2.jpg",CV_LOAD_IMAGE_GRAYSCALE);

cvSetImageROI(imgB, cvRect(2300, 1700, 1000,1200));

cvNamedWindow("SHOTB",0);
cvShowImage("SHOTB", imgB);

IplImage* imgC=cvLoadImage("52783180_RAW_OVR2.jpg",CV_LOAD_IMAGE_UNCHANGED);

cvSetImageROI(imgC, cvRect(2300, 1700, 1000,1200));

//cvNamedWindow("SHOTA",0);
//cvShowImage("SHOTA", imgA);

IplImage* eig_image = cvCreateImage( img_sz, IPL_DEPTH_32F, 1 );
IplImage* tmp_image = cvCreateImage( img_sz, IPL_DEPTH_32F, 1 );
int              corner_count = MAX_CORNERS;
CvPoint2D32f* cornersA        = new CvPoint2D32f[ MAX_CORNERS ];

//cvSetImageROI(imgA, cvRect(2300, 1700, 1000,1200));

cvGoodFeaturesToTrack(
    imgA,
    eig_image,
    tmp_image,
    cornersA,
    &corner_count,
    0.01,
    5.0,
    0,
    3,
    0,
    0.04
);

//cvResetImageROI(imgA);

cvFindCornerSubPix(
    imgA,
    cornersA,
    corner_count,
    cvSize(win_size,win_size),
    cvSize(-1,-1),
    cvTermCriteria(CV_TERMCRIT_ITER|CV_TERMCRIT_EPS,20,0.03)
);
// Call the Lucas Kanade algorithm
//
char features_found[ MAX_CORNERS ];
float feature_errors[ MAX_CORNERS ];
CvSize pyr_sz = cvSize( imgA->width+8, imgB->height/3 );
IplImage* pyrA = cvCreateImage( pyr_sz, IPL_DEPTH_32F, 1 );
  IplImage* pyrB = cvCreateImage( pyr_sz, IPL_DEPTH_32F, 1 );
  CvPoint2D32f* cornersB        = new CvPoint2D32f[ MAX_CORNERS ];
   cvCalcOpticalFlowPyrLK(
 imgA,
 imgB,
 pyrA,
 pyrB,
 cornersA,
 cornersB,
 corner_count,
 cvSize( win_size,win_size ),
 5,
 features_found,
 feature_errors,
 cvTermCriteria( CV_TERMCRIT_ITER | CV_TERMCRIT_EPS, 20, .3 ),
 0
 );
 // Now make some image of what we are looking at:
 //
 float sum=0;
  for( int i=0; i<corner_count; i++ ) {
 if( features_found[i]==0|| feature_errors[i]>550 ) {
  //       printf("Error is %f/n",feature_errors[i]);
    continue;
 }

 sum+=(cornersA[i].x-cornersB[i].x)*(cornersA[i].x-cornersB[i].x)+(cornersA[i].y-cornersB[i].y)*(cornersA[i].y-cornersB[i].y);

  //    printf("Got it/n");
 CvPoint p0 = cvPoint(
    cvRound( cornersA[i].x ),
    cvRound( cornersA[i].y )
 );
 CvPoint p1 = cvPoint(
    cvRound( cornersB[i].x ),
    cvRound( cornersB[i].y )
 );
 cvLine( imgC, p0, p1, CV_RGB(255,0,0),2 );
 }

cvResetImageROI(imgC);
sum=sum/corner_count;
printf("%f\n",sum);

 cvNamedWindow("ImageA",0);
 cvNamedWindow("ImageB",0);
 cvNamedWindow("LKpyr_OpticalFlow",0);
 cvShowImage("ImageA",imgA);
 cvShowImage("ImageB",imgB);
 cvShowImage("LKpyr_OpticalFlow",imgC);
 cvWaitKey(0); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T17:04:42.660

通过对 GoodfeaturestoTrack 使用掩码而不是 setimageroi 解决了问题

# javascript - asp.net 在 javascript 中公开所有视图模型数据

> ID：15073039
> 
> 赞同：2
> 
> 时间：2013-02-25T17:41:56.003
> 
> 标签：javascript, asp.net-mvc

在我的 shared/.master 文件中，我添加了此代码以将所有模型数据序列化为 JS 对象。

```
<script>
    var Model = <%=Model.ToJson()%>;
</script> 
```

我的 .master 页面中包含其他部分视图 `<% Html.RenderPartial("header"); %>`

如何动态序列化所有包含的部分视图模型数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T20:39:28.073

不幸的是，部分视图并不是真正设计用于处理这样的事情（请参阅[Darin 在此处的回答](https://stackoverflow.com/a/7556594/1080891)以及以下评论以获取更多信息。）

我建议使用 AJAX 调用来获取您需要的数据，而不是使用 asp.net 模型。

# php - 使用 PHP-PHAR 将数据附加到 tar 文件

> ID：15073043
> 
> 赞同：0
> 
> 时间：2013-02-25T17:42:10.517
> 
> 标签：php, locking, phar

我正在使用以下代码在 PHP 中创建数据并将数据附加到 tar 存档中。问题是当我对同一个文件进行原子写入时，phar 没有对 tar 文件使用排他锁，这会导致问题。

```
function phar_put_contents($fname, $archive, $data) { 
  $i=0;
  do { 
    $fp = @fopen($archive.'.lock', 'w');
    if(!$fp) { 
      usleep(25);
      continue;
    } 
    if(flock($fp, LOCK_EX)) { 
      try{
        $myPhar = new PharData($archive.'.tar',0);
        $myPhar[$fname] = $data;
        $myPhar->stopBuffering();
        flock($fp, LOCK_UN) && @fclose($fp);
        @unlink($archive.'.lock');
        return true;
      } catch (Exception $e) { 
        error_log($e->getMessage()." in ".$e->getFile().":".$e->getLine(),0);
        unset($e);
        @flock($fp, LOCK_UN) && @fclose($fp);
      } 
    } 
  } while ($i++<8);
  return false;
} 
```

使用外观文件似乎是一个“好”的解决方案，但它不是最佳的，因为我的档案经常被破坏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T21:35:04.397

好的，PHP 中的 Phar 和 PharData 类似乎有些未完成，它们既没有也`lock()`没有`close()`使我的外部锁定方法不起作用..

以下代码是我曾经尝试使用的将数据附加到 tar 存档的函数。

```
function phar_put_contents($fname, $archive, $data) { 
  $i=0;
  do { 
    $fp = @fopen($archive.'.lock', 'w');
    if(!$fp) { 
      usleep(25);
      continue;
    } 
    if(flock($fp, LOCK_EX)) { 
      try{
        file_put_contents('/tmp/'.$fname, $data);
        $tarCmd = "tar ". (file_exists($archive.".tar") ? "-rf ":"-cf ") .$archive.".tar  -C /tmp ".$fname;
        exec($tarCmd, $result, $status);
        if($status!=0)
          throw new Exception($tarCmd . implode($result, "\n"));
        @unlink('/tmp/'.$fname);
        flock($fp, LOCK_UN) && @fclose($fp);
        @unlink($archive.'.lock');
        return true;
      } catch (Exception $e) { 
        error_log($e->getMessage()." in ".$e->getFile().":".$e->getLine(),0);
        unset($e);
        @flock($fp, LOCK_UN) && @fclose($fp);
      } 
    } 
  } while ($i++<8);
  return false;
} 
```

请注意，我正在使用`exec()`并调用`tar`. 这是必要的，因为 Phar 对存档进行非常不可靠的刷新，导致 tar 文件损坏，因为代码的两个实例可以同时修改同一个文件。

# html - 启用 WebGL 浏览器 HTML5 Applciation WP8？

> ID：15073045
> 
> 赞同：0
> 
> 时间：2013-02-25T17:42:22.803
> 
> 标签：html, windows-phone-8, webgl

我正在为移动设备开发 HTML5 游戏，但在未启用 WebGL 的情况下绘图时遇到问题。当我启用 WebGL 时，我的问题得到了解决，但是在 Windows Phone 8 上，作为开发人员是否可以使用 HTML5 WP8 模板启用此功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T20:22:05.673

IE10 移动版（或桌面版）不支持 WebGL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-31T22:28:37.430

如果您已经安装了最新的 Windows Phone 8.1 更新，则内置的 IE11 现在支持 WebGL。

[http://www.wpcentral.com/windows-phone-81-features](http://www.wpcentral.com/windows-phone-81-features)

# git - 从 git shell 中删除远程存储库

> ID：15073047
> 
> 赞同：4
> 
> 时间：2013-02-25T17:42:31.653
> 
> 标签：git, version-control, github, dvcs

我是 Git 和 stackoverflow 的新手。我只想问如何从 git shell 中删除远程存储库，因为从网页中删除是一项漫长的任务。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T17:46:55.670

我认为这不是您真正想要做的，但是要从本地存储库中删除远程存储库，您可以这样做：

```
git remote remove <remote-name> 
```

请注意，这只会删除您在本地存储库中的链接，无论您的远程存储库实际位于何处，它都不会触及任何内容。

如果你想在那里物理删除它，你必须在*那里*做。这不是可以或不应该从本地存储库完成的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T17:47:30.563

简短的回答：没有

如果没有相当复杂的脚本编写和实际通过 HTTP 发送数据，就无法从 git shell 中实际删除托管在 github 上的存储库。在旁注中，您在 SO 上发布的问题应该显示您所付出的努力。欢迎来到 SO :)

# bash - Bash "not"：反转命令的退出状态

> ID：15073048
> 
> 赞同：8
> 
> 时间：2013-02-25T17:42:36.083
> 
> 标签：bash, conditional

我知道我可以做到这一点...

```
if diff -q $f1 $f2
then
    echo "they're the same"
else
    echo "they're different"
fi 
```

但是如果我想否定我正在检查的条件怎么办？即类似这样的东西（这显然不起作用）

```
if not diff -q $f1 $f2
then
    echo "they're different"
else
    echo "they're the same"
fi 
```

我可以做这样的事情......

```
diff -q $f1 $f2
if [[ $? > 0 ]]
then
    echo "they're different"
else
    echo "they're the same"
fi 
```

在这里我检查上一个命令的退出状态是否大于0。但这感觉有点尴尬。有没有更惯用的方法来做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-25T17:45:38.343

```
if ! diff -q "$f1" "$f2"; then ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T17:44:59.733

如果你想否定，你正在寻找`!`：

```
if ! diff -q $f1 $f2; then
    echo "they're different"
else
    echo "they're the same"
fi 
```

或（只需反转 if/else 操作）：

```
if diff -q $f1 $f2; then
    echo "they're the same"
else
    echo "they're different"
fi 
```

或者，尝试使用`cmp`：

```
if cmp &>/dev/null $f1 $f2; then
    echo "$f1 $f2 are the same"
else
    echo >&2 "$f1 $f2 are NOT the same"
fi 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T17:50:39.410

否定使用`if ! diff -q $f1 $f2;`。记录在`man test`：

```
! EXPRESSION
      EXPRESSION is false 
```

不太清楚为什么你需要否定，因为你处理这两种情况......如果你只需要处理它们不匹配的情况：

```
diff -q $f1 $f2 || echo "they're different" 
```

# html - Django - 看起来在防火墙内显示了错误的页面/html，但在外面没问题

> ID：15073052
> 
> 赞同：0
> 
> 时间：2013-02-25T17:43:06.810
> 
> 标签：html, django, proxy, firewall

我们刚刚开始在四所学校部署我们的应用程序，服务器位于一所学校。从系统外部访问的三所学校工作正常，但是当您从托管服务器的学校访问时，它就像返回了错误的 HTML。在一种情况下，用户有一个页面返回给她，该页面上显示了不同的用户用户 ID。即使您仍然登录，它也会继续返回登录页面。在学校之外一切都很好。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T17:52:36.027

这是在没有实际存在或没有更多信息的情况下很难查明原因的问题之一。我的第一个想法是，也许您正在使用基于 ip 的虚拟主机，而 NAT（网络地址转换）正在干扰它。

**编辑**：你能告诉我们你有什么样的缓存吗？用户看到彼此“登录”的页面，甚至没有自己登录，这表明您正在缓存只有经过身份验证的用户才能看到的内容。

# ibm-mq - 无法连接 Websphere MQ 队列管理器

> ID：15073062
> 
> 赞同：1
> 
> 时间：2013-02-25T17:43:36.460
> 
> 标签：ibm-mq

我是 WebSphere MQ 的初学者，我正在研究 MQ 6，它运行良好，但现在我已经安装了 MQ 7.1，当我尝试创建一个新的队列管理器时，我可以做到但它无法连接并且它给了我以下错误：

![在此处输入图像描述](../Images/0058f447aaf9b865d7b6ffd385b0ca89.png)

你对此有什么想法吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T23:59:31.467

如果使用该`mqrc`命令安装了 WebSphere MQ 客户端或服务器，您可以查找任何 WebSphere MQ 错误代码。在这种情况下：

```
C:\Users\MUSR_MQADMIN>mqrc 2059

      2059  0x0000080b  MQRC_Q_MGR_NOT_AVAILABLE 
```

2059 通常表示侦听器未运行或队列管理器已关闭。如果侦听器正在运行并且 QMgr 名称错误，则会出现不同的错误代码；如果连接到正确的 QMgr 但通道名称错误，则会出现另一个错误代码。如果通道在服务器端通过出口关闭，有时您可以获得 2059，但由于您没有提及任何出口，我假设在这种情况下它的侦听器问题。

希望现在您正在定义一个侦听器对象，而不是使用`inetd`或`runmqlsr`命令。定义一个对象并将其设置为在 QMgr 控制下启动和停止是配置它的最可靠方法。

一旦超过 2059，您应该知道，从 WMQ V7.1 开始，队列管理器默认是安全的，并且不会接受*任何*远程客户端连接，除非您明确授权它们。这与 V6 的行为相反，在 V6 中，在新定义的运行侦听器的队列管理器上，任何拥有到它的 TCP 路由的人都可以管理它并以`mqm`用户身份远程执行操作系统代码。所以我预计您遇到的下一个问题将是 2035 错误。

我被告知这意味着 WMQ 管理员需要做更多的工作。唯一正确的情况是 V6 或更早版本的队列管理器被配置为没有安全性。如果将保护 V7.0 QMgr 的任务与在 v7.1 和更高版本的 QMgr 上提供访问权限的任务进行比较，则提供访问权限会变得更容易。但是，如果您喜欢 V7.0 的行为，您可以随时更改 QMgr 以禁用`CHLAUTH`规则。不用说，高度鼓励启用安全性。

`runmqsc`要调试安全错误，请使用命令更改 QMgr 以启用授权事件`ALTER QMGR AUTHOREV(ENABLED)`。接下来，下载[*SupportPac MS0P*](http://ibm.co/SupptPacMS0P)并将其安装到 WebSphere MQ Explorer 中。然后，当您确实遇到安全错误时，使用 WebSphere MQ Explorer 查看队列。右键单击队列并选择解析事件消息的选项。这将详细地告诉您调试授权错误所需的所有信息。

最后，如果您想了解新的安全功能，请访问[t-rob.net/links](http://t-rob.net/links)并查看那里的会议演示文稿。如果向下滚动，也有一些文章被索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T16:43:08.743

在屏幕截图中，我看到主机名“127.0.0.1”和端口号 1414。如果它是本地队列管理器，则直接连接到它。

此外，每个队列管理器必须使用唯一的端口号。如果您让它与 WMQ v6 队列管理器一起使用，这是同一个队列管理器吗？如果不是，请确保每个队列管理器使用不同的端口号（即 1415、1416 等...）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-01T09:30:00.133

我遇到了同样的问题。但我通过以下方式解决了这个问题： 1\. 手动创建了一个监听器（定义 lstr（lstr1）端口（xxxx）控件（qmgr） 2\. setmqaut mcauser（'mqm'）。

# java - 优化 CPU 上运行的最大线程数

> ID：15073063
> 
> 赞同：7
> 
> 时间：2013-02-25T17:43:38.223
> 
> 标签：java, multithreading

只是想知道什么是决定何时停止在作为线程多次运行相同程序的单核机器上停止创建新线程的最佳方法？

线程正在获取 Web 内容并进行一些处理，这意味着每个线程的负载在线程终止之前一直不是恒定的。

我正在考虑有一个线程来监视 CPU/RAM 负载，如果负载达到某个阈值，则停止创建线程，但如果达到某个线程数，也停止创建线程，以确保 CPU 不会超载。

关于有哪些技术可以实现这一目标的任何反馈？

非常感谢，弗拉基米尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T19:20:28.847

通过监视当前进程使用的 CPU 将很难做到这一点。这些数字往往落后于现实，结果将在很大程度上成为高峰和低谷。问题是您的线程大多会被 IO 阻塞，并且没有任何好的方法可以预测在不久的将来何时可以读取字节。

也就是说，您可以从`ThreadPoolExecutor`某个最大线程数开始（对于单个处理器，比如说 4），然后每 10 秒左右检查一次负载平均值。如果负载平均值低于您想要的值，那么您可以`setMaximumPoolSize(...)`使用更大的值调用以在接下来的 10 秒内增加它。您可能需要在每次计算之间轮询 30 秒或更长时间以平滑应用程序的性能。

您可以使用以下代码来跟踪所有线程的总 CPU 时间。不确定这是否是最好的方法

```
 long total = 0;
    for (long id : threadMxBean.getAllThreadIds()) {
        long cpuTime = threadMxBean.getThreadCpuTime(id);
        if (cpuTime > 0) {
            total += cpuTime;
        }
    }
    // since is in nano-seconds
    long currentCpuMillis = total / 1000000; 
```

您可以考虑尝试最大化吞吐量，而不是尝试最大化蜘蛛的 CPU 级别。以每单位时间爬取的页面数为样本，并增加或减少您的最大线程数，`ExecutorService`直到最大化。

要考虑的一件事是使用 NIO 和选择器，这样你的线程总是很忙，而不是总是等待 IO。这是[关于 NIO/Selectors 的一个很好的示例教程](http://tutorials.jenkov.com/java-nio/selectors.html)。你也可以考虑使用[Pyronet](http://code.google.com/p/pyronet/)，它似乎在 NIO 周围提供了一些很好的特性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T19:21:06.863

如果异步 I/O 不适合，我会考虑使用线程池，例如[ThreadPoolExecutor](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html)，这样您就没有创建、销毁和重新创建线程的开销。

然后我会进行性能测试以调整最大线程数以提供最佳性能。

您可以从 10 个线程开始，然后使用 20 个线程重新运行性能测试，直到找到最佳值。同时我会使用系统工具（取决于你的操作系统）来监控线程运行队列、JVM等。

对于性能测试，您必须确保您的测试是可重复的（即使用相同的输入）并代表您的程序将使用的实际输入。

# button - jqGrid - 使用自定义按钮编辑后保存行

> ID：15073069
> 
> 赞同：0
> 
> 时间：2013-02-25T17:44:14.960
> 
> 标签：button, jqgrid, rows, inline-editing

我正在使用 jqGrid，我需要做以下事情：

我需要编辑行（使用内联编辑），然后（在我编辑之后，数据必须以本地模式存储以进行可视化），之后我必须能够编辑另一行（并且事情有以同样的方式发生）。在我编辑了行之后，我想可视化所有的行，然后我会按下一个按钮来将我的更改保存在数据库中。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:28:08.180

为了扩展，保存您对发布的编辑可能会导致同步错误，尤其是在多个用户对同一记录进行操作时。如果您想使用表单编辑，您可以查看一个`beforeSubmit`事件以直观地向用户显示该行以要求他们确认更改。如果它是格式，或者您要验证的其他内容，您可以查看自定义单元格验证，例如以下链接：

[如何在 jqgrid 中实现行级验证](https://stackoverflow.com/questions/6814230/how-to-implement-row-level-validation-in-jqgrid)

# html - 在 href 属性中转义 html 是否有效？

> ID：15073072
> 
> 赞同：3
> 
> 时间：2013-02-25T17:44:20.377
> 
> 标签：html, escaping, html-escape-characters

假设我有以下链接：

```
<a href='http://google.com/bla'>http://google.com/bla</a> 
```

这个也有效吗？

```
<a href='http:&#x2F;&#x2F;google.com/bla'>http://google.com/bla</a> 
```

它适用于 Firefox，但我不确定这是否是标准化行为。我希望这个问题不是超级愚蠢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T17:46:02.443

是的，这样做是完全有效的。实际上，*必须*`&`将 & 字符 ( )转义为有效的 HTML，即使在属性内部（以及与此相关的*所有*属性）也是如此。*`&amp;``href`*

# jquery - jquery 更改行背景颜色 id 单选被选中

> ID：15073076
> 
> 赞同：0
> 
> 时间：2013-02-25T17:44:27.940
> 
> 标签：jquery, radio-button, background-color, option

我想创建一个带有单选按钮的表格。
当悬停在行上时，表格行突出显示。（应用了“悬停”类）单击行更改时，包含的选项按钮变为选中状态并且背景颜色更改（应用了“活动”类）。

到目前为止一切顺利，除了只有在直接单击单选而不是行时才应用活动类。并且活动类不会删除。

[http://jsfiddle.net/vincentieo/cH7R9/2/](http://jsfiddle.net/vincentieo/cH7R9/2/)

HTML

```
<form action="paypal-size-guide.html" method="" accept-charset="utf-8">
<table id="sizeOptions">
<thead>File Size</thead>
    <tr>
        <td><input type="radio" name="size" value="Large" checked="true"> Large</option></td>
        <td>3000 x 2000px</td>
        <td>&pound;20</td>
    </tr>
    <tr>
        <td><input type="radio" name="size" value="Medium" > Medium</option></td>
        <td>1500 x 1000px</td>
        <td>&pound;15</td>
    </tr>
    <tr>
        <td><input type="radio" name="size" value="Small" > Small</option></td>
        <td>750 x 500px</td>        
        <td>&pound;10</td>
    </tr>
</table>
</form> 
```

JS

```
$('#sizeOptions tr').click(function() {
    $(this).find('td input:radio').prop('checked', true);
});

$('#sizeOptions tr td input:radio').click(function() {
    if($(this).is(':checked')) {
        $(this).closest('tr').addClass("active");
    } else {
        $(this).closest('tr').removeClass("active");
    }
});

$('#sizeOptions tr').mouseover(function() {
$(this).addClass("hover");
});

$('#sizeOptions tr').mouseout(function() {
$(this).removeClass("hover");
}); 
```

CSS

```
#sizeOptions {
    border-collapse: collapse;
    padding: 10px;
}

#sizeOptions td {
    padding: 10px;
}

#sizeOptions tr {
    border-bottom: solid 1px #b1b1b1;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T17:55:10.327

你有几件事导致你的问题。

首先，您已经有一个用于单击该行的处理程序。如果您希望对单选按钮和行的点击都起作用，您只需要行处理程序，因为对按钮的任何点击也会传播到行。

按钮上的单击处理程序仅适用于对按钮的实际单击，而不是在您使用 jQuery 设置按钮状态时，除非您以`.click()`编程方式调用。

单选按钮永远不能通过单击它来取消选择，只能通过单击另一个按钮来取消选择。因此，您的代码将永远不会删除活动类。相反，只需从所有行中删除活动类，然后将其应用回被单击的类。它还大大简化了您的代码。

此外，如果您重新排列 css 定义的顺序，您的活动状态将在您单击时立即显示，这是一个更好的 UI，因为有反馈给用户。或者你可以`.active.hover`上课。无论哪种方式，用户都可以轻松地告诉他们点击了。

代码：

```
$('#sizeOptions tr').click(function () {
    $(this).find('td input:radio').prop('checked', true);
    $('#sizeOptions tr').removeClass("active");
    $(this).addClass("active");
}); 
```

演示：http: [//jsfiddle.net/yNWSY/](http://jsfiddle.net/yNWSY/)

# javascript - jquery $(this) 在同一个函数中工作一次

> ID：15073079
> 
> 赞同：1
> 
> 时间：2013-02-25T17:44:37.190
> 
> 标签：javascript, jquery

```
$('#test img:first').ready(function() {      
    var w = $(this).width();
    console.log(w);     

    $('#test img:first').attr('width', 200);
    //$(this).attr('width', 200);
}); 
```

元素的宽度是正确的，因此可以通过选择器设置宽度，但是

```
$(this).attr('width', 200); 
```

不起作用，我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T17:47:18.360

*编辑*-下面留下旧答案

在那个“准备好的”处理程序内部，`this`不是`<img>`元素。就是`document`对象。

我不知道确切的原因，但这就是为什么`this`不起作用。

等等，实际上我知道为什么：这是因为“就绪”事件仅适用于文档。“加载”事件会更相关，但您也不一定会得到“加载”事件。

* * *

CSS 属性不是元素属性：

```
$(this).css('width', '200px'); 
```

现在，`<img>`元素*确实*具有宽度属性。如果您在不太新的 Internet Explorer 中尝试此操作，则可能需要：

```
$(this).prop('width', 200); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-25T17:47:42.187

尝试`$(this).width(200);`改用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T17:50:35.537

```
$('#test img:first').ready(function() {
    var t = $(this),
        w = t.width();
    t.css({width:200+"px");
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T17:59:53.060

这个怎么样（正确的 document.ready 函数）：

```
$(function() {  
    $img = $('#test img:first');
    var w = $img.width();
    console.log(w);

    $img.attr('width', 200);
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T18:02:42.920

所有的答案都很好，但我认为最初的问题是在这部分......

```
$(this).attr('width', 200); 
```

200 的值应该用单引号括起来。宽度是图像标签上的有效属性，但所有属性都是字符串，即使它们看起来是数字。

# javascript - Qualtrics Javascript 问题 - 矩阵表

> ID：15073085
> 
> 赞同：0
> 
> 时间：2013-02-25T17:44:57.713
> 
> 标签：javascript, qualtrics

我在 Qualtrics 中遇到了一些问题，这些问题在单个问题中很容易，但在使用矩阵表或并排时变得不可能。

1) Matrix Table中单个字段的内容验证- Matrix表中的货币，您只能检查多个字段的验证并生成单个错误。

2) 基于矩阵表该行中前一个字段中的条目的字段的必需响应

3）在矩阵表中重新编码文本条目的值 - 在矩阵表中似乎没有办法做到这一点。同样，处理一个问题非常简单。

基本上，如果用户愿意，我希望用户只能完成矩阵表的单行，但是对于他们完成的行，我需要验证特定字段并要求对特定字段做出响应，并且可能重新编码他们的文本条目。

有没有一种简单的方法可以用 Javascript 来代替？

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T23:23:31.240

我的猜测是 JavaScript 会处理它。我不得不编写几个脚本，因为 Qualtrics 中的验证功能是有限的，至少可以这么说。

根据您的 Qualtrics 验证选项的设置方式，您可能必须使用 Qualtrics 的 JavaScript 中的函数。以下是您将使用的基本结构。对您的 Qualtrics 问题 ID 并不了解，我使用了占位符。

* * *

**更新：**我建议使用并排问题类型。这是 [问题/调查的链接](https://ucsf.us.qualtrics.com/SE/?SID=SV_3KICVx0i5r5Y4E5&Preview=Survey&BrandID=ucsf)

为了让您开始，这里是第一个学生的代码。您需要为 2-5 名学生复制相同的模式。您可以通过多种方式使用验证样式（内嵌消息、弹出窗口），我什至没有去过那里。您可以在两个电子邮件列的内容验证下的 Qualtrics 中选择电子邮件验证。您也可以选择电话号码验证。这里的验证只会阻止用户进入下一页，直到他们满足所有条件。您可以在问题正文中解释验证标准。

我使用的问题 ID 首先列出，并且与屏幕截图中项目的位置完全对应，除了 Y/N 问题，它与并排问题不同，ID 为 QR~QID9#5~1 ~1 表示是，QR~QID9#5~1~2 表示否。我不知道您对 Firebug 的技能是什么，但您需要找到与您的特定问题相关的 ID，并用它们替换下面的 ID。

我还建议使用嵌入式数据变量来提供答案，以便您在下载中获得清晰易读的数据。据我记得，Qualtrics 矩阵和并排数据的结构不是很实用。

希望这对您有意义。如果没有，请问。我从个人经验中知道找到对 Qualtrics 的 javascript 支持是多么令人沮丧。

```
Qualtrics.SurveyEngine.addOnload(function () {
/*Place Your Javascript Below This Line*/

//QR~QID9#1~1~1~TEXT - QR~QID9#2~1~1~TEXT - QR~QID9#3~1~1~TEXT - QR~QID9#4~1~1~TEXT - QR~QID9#5~1~1/QR~QID9#5~1~2 - QR~QID9#6~1~1~TEXT
//QR~QID9#1~2~1~TEXT - QR~QID9#2~2~1~TEXT - QR~QID9#3~2~1~TEXT - QR~QID9#4~2~1~TEXT - QR~QID9#5~2~1/QR~QID9#5~2~2 - QR~QID9#6~2~1~TEXT
//QR~QID9#1~3~1~TEXT - QR~QID9#2~3~1~TEXT - QR~QID9#3~3~1~TEXT - QR~QID9#4~3~1~TEXT - QR~QID9#5~3~1/QR~QID9#5~3~2 - QR~QID9#6~3~1~TEXT
//QR~QID9#1~4~1~TEXT - QR~QID9#2~4~1~TEXT - QR~QID9#3~4~1~TEXT - QR~QID9#4~4~1~TEXT - QR~QID9#5~4~1/QR~QID9#5~4~2 - QR~QID9#6~4~1~TEXT
//QR~QID9#1~5~1~TEXT - QR~QID9#2~5~1~TEXT - QR~QID9#3~5~1~TEXT - QR~QID9#4~5~1~TEXT - QR~QID9#5~5~1/QR~QID9#5~5~2 - QR~QID9#6~5~1~TEXT

var notvalidphbook1 = 0, notvalidphbook2 = 0, notvalidphbook3 = 0, notvalidphbook4 = 0, notvalidphbook5 = 0;
var phsbooks; //gets sum of notvalidphbook items

var bookrecode1, bookrecode2, bookrecode3, bookrecode4, bookrecode5;

var notvalidemail1 = 0, notvalidemail2 = 0, notvalidemail3 = 0, notvalidemail4 = 0, notvalidemail5 = 0;
var emails; //gets sum of notvalidemail items

var validates; //validation variable that decides if user proceeds or not

Qualtrics.SurveyPage.Question.prototype.validate = function (element) {

    //Student name entered
    var student1y = $('QR~QID9#1~1~1~TEXT').getValue();
    var student2y = $('QR~QID9#1~2~1~TEXT').getValue();
    var student3y = $('QR~QID9#1~3~1~TEXT').getValue();
    var student4y = $('QR~QID9#1~4~1~TEXT').getValue();
    var student5y = $('QR~QID9#1~5~1~TEXT').getValue();

    //Student phone number
    var student1phone = $('QR~QID9#2~1~1~TEXT').getValue();
    var student2phone = $('QR~QID9#2~2~1~TEXT').getValue();
    var student3phone = $('QR~QID9#2~3~1~TEXT').getValue();
    var student4phone = $('QR~QID9#2~4~1~TEXT').getValue();
    var student5phone = $('QR~QID9#2~5~1~TEXT').getValue();

    //Emails match
    var student1emailA = $('QR~QID9#3~1~1~TEXT').getValue();
    var student1emailB = $('QR~QID9#4~1~1~TEXT').getValue();
    var student2emailA = $('QR~QID9#3~2~1~TEXT').getValue();
    var student2emailB = $('QR~QID9#4~2~1~TEXT').getValue();
    var student3emailA = $('QR~QID9#3~3~1~TEXT').getValue();
    var student3emailB = $('QR~QID9#4~3~1~TEXT').getValue();
    var student4emailA = $('QR~QID9#3~4~1~TEXT').getValue();
    var student4emailB = $('QR~QID9#4~4~1~TEXT').getValue();
    var student5emailA = $('QR~QID9#3~5~1~TEXT').getValue();
    var student6emailB = $('QR~QID9#4~5~1~TEXT').getValue();

    //Student book needs
    var student1booky = $('QR~QID9#5~1~1').getValue();
    var student1bookn = $('QR~QID9#5~1~2').getValue();
    var student2booky = $('QR~QID9#5~2~1').getValue();
    var student2bookn = $('QR~QID9#5~2~2').getValue();
    var student3booky = $('QR~QID9#5~3~1').getValue();
    var student3bookn = $('QR~QID9#5~3~2').getValue();
    var student4booky = $('QR~QID9#5~4~1').getValue();
    var student4bookn = $('QR~QID9#5~4~2').getValue();
    var student5booky = $('QR~QID9#5~5~1').getValue();
    var student6bookn = $('QR~QID9#5~5~2').getValue();

    //Student book name
    var student1bookname = $('QR~QID9#6~1~1~TEXT').getValue();
    var student2bookname = $('QR~QID9#6~2~1~TEXT').getValue();
    var student3bookname = $('QR~QID9#6~3~1~TEXT').getValue();
    var student4bookname = $('QR~QID9#6~4~1~TEXT').getValue();
    var student5bookname = $('QR~QID9#6~5~1~TEXT').getValue();

    if (student1y == '') {
        //alert("no name provided, no other info needed");
        //"no name provided, no other info needed"

    } else if (student1y != '' && (student1phone == '' || (student1emailA == '' || student1emailB == '') || (student1booky == null && student1bookn == null))) {
        //alert("you need to provide a phone number and enter the student's book needs");
        notvalidphbook1 = 1;    
    } 

           else if (student1y != '' && (student1phone != '' && (student1emailA != '' && student1emailB != '') && (student1booky == null && student1bookn == null))) {

  notvalidphbook1 = 0;
             else {
        //alert("thank you for providing a phone number and specifying book needs");
        if (student1booky == 'QR~QID9#5~1~1') {
            bookrecode1 = 'Y';
        } else {
            bookrecode1 = 'N';
        }
    }

    if (student1emailA == '' && student1emailB == '') {
        //alert("no email provided, no match needed");
        //"no email provided, no match needed"

    } else if (student1emailA != '' && student1emailA == student1emailB) {
        //alert("the emails match");
        //"the emails match"
                    notvalidemail1 = 0;

    } else {
        //alert("the emails don't match");
        //"the emails don't match"
        notvalidemail1 = 1;
    }

    Qualtrics.SurveyEngine.setEmbeddedData('Student1Name', student1y);
    Qualtrics.SurveyEngine.setEmbeddedData('Student1Phone', student1phone);
    Qualtrics.SurveyEngine.setEmbeddedData('Student1Email', student1emailA);
    Qualtrics.SurveyEngine.setEmbeddedData('Student1Txt', bookrecode1);
    Qualtrics.SurveyEngine.setEmbeddedData('Student1TxtName', student1bookname);

    phsbooks = notvalidphbook1 + notvalidphbook2 + notvalidphbook3 + notvalidphbook4 + notvalidphbook5;
    emails = notvalidemail1 + notvalidemail2 + notvalidemail3 + notvalidemail4 + notvalidemail5;

    validates = phsbooks + emails;

    if (validates == 0) { //validates only if the sum is equal to zero
        return true; //this let's the user continue
    } else {
        return false; //this prevents the user from proceeding to the next page
    }

}
}); 
```

# android - android - 覆盖后退按钮

> ID：15073088
> 
> 赞同：2
> 
> 时间：2013-02-25T17:45:04.723
> 
> 标签：android

我有一个`webView`内部活动的布局。如果按下后退按钮，我希望该视图消失并且其他视图变得可见，我做了以下操作：

```
 @Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK && web.getVisibility()==View.VISIBLE) {
        restoreInitalState(); // set Visibility of Views
        APP_CONSTANTS.LOGIN_OP_CANCELLED(getApplicationContext()); // inform the user that the current operation was cancelled
    }
    return super.onKeyDown(keyCode, event);

} 
```

它可以工作，但它在调用我的方法后立即完成 Activity，就像按下后退按钮 2 次一样。我需要保留当前的 ​​Activity 并调用我上面提到的方法。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T17:47:29.527

你需要返回false。改变这个：

```
if (keyCode == KeyEvent.KEYCODE_BACK && web.getVisibility()==View.VISIBLE) {
    restoreInitalState(); // set Visibility of Views
    APP_CONSTANTS.LOGIN_OP_CANCELLED(getApplicationContext()); // inform the user that the current operation was cancelled
} 
```

对此：

```
if (keyCode == KeyEvent.KEYCODE_BACK && web.getVisibility()==View.VISIBLE) {
    restoreInitalState(); // set Visibility of Views
    APP_CONSTANTS.LOGIN_OP_CANCELLED(getApplicationContext()); // inform the user that the current operation was cancelled
    return false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T17:49:33.623

我认为正确的方法是：

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK && web.getVisibility()==View.VISIBLE) {
        restoreInitalState(); // set Visibility of Views
        APP_CONSTANTS.LOGIN_OP_CANCELLED(getApplicationContext()); 
        return true;
    }
    return super.onKeyDown(keyCode, event);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T17:51:35.353

或者只是`onBackPressed()`在你的`Activity`类中使用该方法，这是覆盖它的最简单方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-25T17:54:38.503

我认为您正在寻找的回调方法是[`onBackPressed`](http://developer.android.com/reference/android/app/Activity.html#onBackPressed%28%29).

But your current solution should work as well, you just need to return true inside your if-block otherwise the event will be propagated to another callback.

# java - Java：对象的初始化序列

> ID：15073095
> 
> 赞同：5
> 
> 时间：2013-02-25T17:45:26.400
> 
> 标签：java, oop, inheritance

有一个代码是作为初级 Java 开发人员的任务给出的。我在五年内使用 Java，这段代码让我完全困惑：

```
public class Main {

    String variable;

    public static void main(String[] args) {
        System.out.println("Hello World!");
        B b = new B();
    }

    public Main(){
        printVariable();
    }

    protected void printVariable(){
        variable = "variable is initialized in Main Class";
    }
}

public class B extends Main {

    String variable = null;

    public B(){
        System.out.println("variable value = " + variable);
    }

    protected void printVariable(){
        variable = "variable is initialized in B Class";
    }
} 
```

输出将是：

```
Hello World!
variable value = null 
```

但是，如果我们更改`String variable = null;`为，`String variable;`我们将拥有：

```
Hello World!
variable value = variable is initialized in B Class 
```

第二个输出对我来说更清楚。因此，据我所知，Java 中的初始化顺序如下：

*   当我们来到这个根父类时，我们转到类层次结构的根（对于 Java，它始终是 Object 类）：
    *   初始化所有静态数据字段；
    *   执行所有静态字段初始化器和静态初始化块；
    *   初始化所有非静态数据字段；
    *   执行所有非静态字段初始化器和非静态初始化块；
    *   执行默认构造函数；
*   然后我们对底层子类重复该过程。

还有一篇文章描述`this`了超类上下文中关键字的行为 - [Calling base class overridden function from base class method](https://stackoverflow.com/questions/4836708/calling-base-class-overridden-function-from-base-class-method)

根据上面给出的规则，我假设有这样的顺序：

1.  我们将创建一个新的 class 实例`B`；
2.  我们去零件课`Main`；
3.  初始化`main.variable`为空；
4.  然后我们转到 class 的默认构造函数`Main`；
5.  构造函数调用`b.printVariable()`类中的方法`Main`；（为什么不调用`main.printvariable`？我们这里没有`this`关键词。）
6.  字段`b.variable`“*变量在 B 类中初始化*”
7.  现在我们回到课堂`B`；
8.  我们应该用空值初始化字段`b.variable`，对吗？
9.  `B`执行的类的默认构造函数

请有人可以完整而完整地解释这个继承初始化序列是如何工作的。以及为什么更改`String variable = null;`为`String variable;`会导致另一个输出。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-25T17:57:45.913

顺序是：

1.  主要->“你好”
2.  主 -> 新 B()
3.  B() -> Main() -> b.printVariable() -> 设置变量
4.  回到初始化 B，所以 variable=null 发生。

所以基本上，超级对象 Main() 是在 B 类的任何初始化事件之前构造的。这意味着 variable=null 稍后发生。这是有道理的，否则 B 可能会破坏 Main 的初始化。

Joshua Bloch 在他有效的 Java 书籍中涵盖了很多好的基础，关于正确的继承是多么危险，我会推荐它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T17:54:48.153

首先，您需要了解，当您编写`variable = null;`. 该代码何时执行。这基本上决定了输出。

在开始之前，我还要提一下，当你创建 的对象时`class B`，`printVariable()`不会调用主类的函数。相反，总是`printVariable()`会调用 B 的。

牢记这一点，当您拥有 时`variable = null`，B 的构造函数的执行将开始。首先`Main()`将被调用，它将调用 printVariable() 方法。最后，`variable=null`, 将被称为覆盖`variable`变量。

在另一种情况下，如果您不进行初始化`variable=null`，则`variable`该函数的集合`printVariable()`不会被覆盖，因此您会得到您所期望的。

总之，这是执行语句的顺序，当您执行以下操作时`new B()`：

```
Main()     //super constructor
  B#printVariable()
  initializtion of variables in B's constructor (if any) [i.e. variable=null, if present] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T01:27:34.800

这是一个很好的练习！但问初级开发人员并不是一个公平的问题。这个是给老年人的。但是为了让这段文字在技术面试中有用，我通过在 Main 的构造函数中添加一个参数来修改它：

```
public Main(String something){
 printVariable();
} 
```

如果这个人会回答将要发生的事情，那么删除论点并提出最初的问题。如果这个人不回答 - 没有必要继续 - 他/她是初级。

您还可以删除 B 类中受保护的限定词，并询问如果您的目标是不雇用此人会发生什么:)

# vb.net - 如何使用 Backgroundworker 加载表单？

> ID：15073097
> 
> 赞同：3
> 
> 时间：2013-02-25T17:45:36.840
> 
> 标签：vb.net, multithreading

当我尝试使用 backgroundworker 类加载表单时，它会引发异常，因为我试图访问由另一个线程而不是当前线程创建的对象。如何通过 backgroundworker 加载该表单？

（我在加载表单时正在寻找选框进度条）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:45:54.087

您不能更改后台工作程序的 DoWork 部分中的任何控件，因为它是一个单独的线程。您需要处理 DoWork 部分中的任何数据，然后在 RunWorkerCompleted 部分中更新您的表单。

例子：

```
Private WithEvents bgwTasks As New BackgroundWorker

Private Sub bgwTasks_DoWork(ByVal sender As Object, ByVal e As System.ComponentModel.DoWorkEventArgs) Handles bgwTasks.DoWork
e.Result= GetDatabaseTable()
End Sub

Private Sub bgwTasks_RunWorkerCompleted(ByVal sender As Object, ByVal e As System.ComponentModel.RunWorkerCompletedEventArgs) Handles bgwTasks.RunWorkerCompleted
    If e.Result IsNot Nothing Then
        DataGridView1.DataSource = e.Result
    End If
End Sub

Private Sub Main_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    If bgwTasks.IsBusy = False Then
        bgwTasks.RunWorkerAsync()
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T18:28:03.863

这将禁用检查交叉线程

```
Me.CheckForIllegalCrossThreadCalls = False 
```

我仍然建议您搜索有关正确使用 BackgroundWorker 类的 Cross Thread。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T19:14:59.973

在另一个线程中初始化第二个窗体是没有问题的，但是如果你想在你的主窗体的上下文中使用它，你必须使用原始线程。以下代码在后台工作程序中创建并初始化新表单，然后在适当的事件处理程序中完成初始化时显示它：

```
Public Class Form1
Dim form2 As Form2

Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    BackgroundWorker1.RunWorkerAsync()
End Sub

Private Sub BackgroundWorker1_DoWork(ByVal sender As System.Object, ByVal e As System.ComponentModel.DoWorkEventArgs) Handles BackgroundWorker1.DoWork
    form2 = New Form2()
    form2.TextBox1.Text = "Text"
End Sub

Private Sub BackgroundWorker1_RunWorkerCompleted(ByVal sender As System.Object, ByVal e As System.ComponentModel.RunWorkerCompletedEventArgs) Handles BackgroundWorker1.RunWorkerCompleted
    form2.Show()
End Sub
End Class 
```

您可以使用后台工作人员的*ProgressChanged*事件来向进度条报告。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T08:26:40.630

你不能做这个。表单具有线程关联性。IE。它们只能由实例化表单的线程访问。您的后台线程刚刚成为表单的 UI 线程！所以你必须做的是将调用编组到正确的线程上。测试 InvokeRequired。如果为真，则实例化一个委托，调用 BeginInvoke 并立即返回。现在调用将被编组到正确的线程。

# sql-server-2008 - 在存储过程中，如何通过检查目标表来插入月和年唯一的记录？

> ID：15073099
> 
> 赞同：0
> 
> 时间：2013-02-25T17:45:46.153
> 
> 标签：sql-server-2008, tsql, stored-procedures

我正在做一个`INSERT-SELECT`. 有两个这样的表：

```
DATE        Value
1/23/2013   x
2/12/2013   y
3/15/2013   z 
```

目的地：

```
DATE        Value
1/13/2013   xx
3/20/2013   xx
3/12/2014   xx 
```

2013 年 3 月存在，所以我只想插入 1 月和 2 月的记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T17:48:02.490

根据您获取数据的方式，以下内容将起作用。该`WHERE`条款是重要的

```
INSERT INTO destination (date, value)
SELECT date, value
FROM currenttable
WHERE CAST(month(dpartdate) AS VARCHAR)+'/'+CAST(year(dpartdate) AS VARCHAR) NOT IN (
  SELECT CAST(month(dpartdate) AS VARCHAR)+'/'+CAST(year(dpartdate) AS VARCHAR)
  FROM destination) 
```

# css - 很好地安排内联块 div

> ID：15073105
> 
> 赞同：1
> 
> 时间：2013-02-25T17:46:12.297
> 
> 标签：css, html, positioning, floating

我有一组具有这种布局的 div：

```
div.post_summary {
    clear: none;
    width: 170px;
    display: inline-block;
    float: left;
    margin: 5px;
    background-color: #FF5900;
} 
```

现在看起来像：

![在此处输入图像描述](../Images/0192ea9142689d9b22fae90895c8dbcc.png)

但我希望它看起来像：

![在此处输入图像描述](../Images/5a8cd5d24a606cea8ddfd11ebb0b1240.png)

div 的顺序并不重要。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:06:52.383

由于顺序无关紧要，您可以使用 CSS 列执行此操作：

[http://codepen.io/cimmanon/pen/CcGlE](http://codepen.io/cimmanon/pen/CcGlE)

```
div.container { /* container holding all of your `div.post_summary` elements */
  columns: 20em; /* desired width of the columns */
}

div.post_summary {
    margin: .5em;
    background-color: #CCC;
}

div.post_summary:first-child {
  margin-top: 0;
} 
```

确保您检查[http://caniuse.com/#feat=multicolumn](http://caniuse.com/#feat=multicolumn)以查看您需要哪些前缀。

# ruby-on-rails - 使用 default_locale 时的“translation_missing”

> ID：15073107
> 
> 赞同：0
> 
> 时间：2013-02-25T17:46:18.193
> 
> 标签：ruby-on-rails, ruby-on-rails-3, actionview, actionviewhelper, rails-i18n

我正在尝试使用语言环境以西班牙语显示文本，但它一直使用英语作为默认值。我的代码：

```
# config/application.rb
config.i18n.default_locale = :es

# config/locales/es.yml
es:
  sections:
    fashion: Moda

# haml template
= t("sections.fashion") 
```

在视图中生成以下 html: `<span class="translation_missing" title="translation missing: en.sections.fashion">Fashion</span>`。我错过了什么吗？
提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T18:57:37.450

尝试安装 gem：rails-i18n

就我而言，这是解决方案。

[https://github.com/svenfuchs/rails-i18n](https://github.com/svenfuchs/rails-i18n)

# extjs - ExtJS 3.3 中的水平滚动网格

> ID：15073110
> 
> 赞同：1
> 
> 时间：2013-02-25T17:46:21.983
> 
> 标签：extjs, extjs3

我是 ExtJS 的新手，很难在 600 像素宽的 Ext.grid.EditorGridPanel 中容纳大量列（参见下面的示例）。将所有网格列一起滚动或类似于[本示例中显示的第二个网格（Ext 4）](http://dev.sencha.com/deploy/ext-4.0.0/examples/grid/grid-plugins.html)可以做到这一点。

```
var grid = new Ext.grid.EditorGridPanel(
    this.getGridConfig('', ['a', 'b', 'c', '...', 'x', 'y', 'z'], [
        {
            dataIndex: 'a',
            header: 'A',
            editor: new Ext.form.TextField({width: 200, allowEmpty: false})
        },
        {
            dataIndex: 'b',
            header: 'B',
            editor: bCombo,
        } /* many more column definitions here... */],
        definitions,
        'disabled'
    )
); 
```

我尝试设置`autoScroll = true`几个不同的级别，但没有任何运气。在 ExtJS 3.3 中是否有一种机制来处理大量的网格列，类似于为[处理选项卡](http://extjs-public.googlecode.com/svn-history/r110/extjs-3.x/release/examples/tabs/tab-scroller-menu.html)提供的机制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T00:25:59.047

我通过将 Ext.grid.EditorGridPanel 与下面的面板包装并调整其宽度以很好地适应所有列来解决了这个问题。

```
var gridPanel = new Ext.Panel({
    width: '100%',
    height: '100%',
    renderTo: Ext.getBody(),
    autoScroll: true
}); 
```

# html - 烦人的加载图像 (HTML/CSS)

> ID：15073112
> 
> 赞同：0
> 
> 时间：2013-02-25T17:46:25.883
> 
> 标签：html, css, icons, background-image, loading

我有一个包含许多缩略图的网站。缩略图定义如下：

```
<li>
    <a href='Pic/$gal/sized/$file'>
        <img src='Pic/$gal/thumb/$file' alt=''></img>
    </a>
</li> 
```

以及影响它们的 CSS：

全局 img-CSS：

```
img {
    display: block; 
    margin: 0; 
    padding: 0; 
    border: none; 
    background: url('../images/load.gif') no-repeat center;
} 
```

缩略图的特殊 CSS 代码：

```
.gallery ul li img {    
    width: 174px;
    height: 174px;
    padding: 4px;   
    border: 1px solid #FFFFFF;      
} 
```

我想使用背景图像作为加载图标。但正如您在下图中看到的那样，缩略图的左上方总是有一个丑陋的图标，直到图片完全加载。我尝试使用与缩略图本身一样大的背景图像，因此丑陋的图标会重叠。但这不起作用。

[http://s7.directupload.net/images/130225/v3l3hkfs.png](http://s7.directupload.net/images/130225/v3l3hkfs.png)

你有什么想法，我怎样才能删除这个图标？

问候，奥利弗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T17:56:34.273

这些是浏览器生成的，因此您无法摆脱它们，图标将取决于所使用的浏览器。为了不让它们显示，您需要使用 javascript 将图像从画布上渲染出来或进行某种预加载。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T18:02:12.560

您可以添加空白 .png 或 .gif 作为图像源，然后在加载图像后更改 src。

编辑：存储原始 src 的一个好方法是使用 data 属性：

```
<img data-src='Pic/$gal/thumb/$file' src='blank.png' alt='' /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T09:34:39.377

非常感谢您的猛烈抨击！

我创建了一个 1px 乘以 1px 透明的空白.png，然后我修改了我的 HTML 标签：

```
echo "<li><a rel='gallery_group' href='Pic/$gal/sized/$file'><img data-src='Pic/$gal/thumb/$file' src='images/blank.png' alt=''></img></a></li> "; 
```

如您所见，blank.png 是图像源。blank.png 的加载速度非常快，因为它是一张非常小的图片。我的下一步是确保在加载页面后加载真实图像。

为此，我编写了一个简单的 javascript 函数，将图像的所有“src”属性更改为“data-src”属性的值：

```
<script type="text/javascript" 
function neueSrc () {
    var all = document.getElementsByTagName("img");
    for (var i=0, max=all.length; i < max; i++) {   
        all[i].src = all[i].getAttribute('data-src');
    }
}
</script> 
```

该函数在 body-tag 中执行：

```
<body onload="neueSrc()"> 
```

这正是我想要的！非常感谢您的快速回复和有用的帮助。

# r - 如何设置 Rgui.exe 进行向后搜索

> ID：15073114
> 
> 赞同：1
> 
> 时间：2013-02-25T17:46:32.357
> 
> 标签：r, cmd, rgui, rterm

如果您使用`Rterm.exe`，一个不错的功能是：

> CTRL+R ：向后搜索意味着 CTRL+R+lib 将显示最后一个以 lib 开头的命令，如 library(Rcpp)

`Rgui.exe`好像没有这个功能。我可以以某种方式添加它吗？我使用`Windows 7`，并且更改不是一种选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T20:47:22.140

这就是 Brian Ripley 不得不说的关于这个请求的内容（尽管是 6 年前）：

“ [https://stat.ethz.ch/pipermail/r-help/2006-February/087540.html](https://stat.ethz.ch/pipermail/r-help/2006-February/087540.html) ”

# javascript - 验证多组单选按钮

> ID：15073118
> 
> 赞同：2
> 
> 时间：2013-02-25T17:46:45.053
> 
> 标签：javascript, types, input

我有一个包含 29 个单选按钮对选择的表单，每个按钮对都有一个是/否选择。

对于每个集合，选择的名称按如下方式递增：ans1、ans2、ans3... ans29。每个都有“是”或“否”的值

它或多或少是这样的：

```
<input type="radio" id="yes1" name="ans1" value="yes"/>
<input type="radio" id="no1" name="ans1" value="no"/> 
```

我想编写一个 Javascript 函数来在提交表单时验证答案。我正在考虑在循环中使用数组，但不知道如何将选择放入数组中。

明显的长方法是重复的`if(ans1 = yes) {do something} if(ans2=yes){do something}`。我看过一些例子，`getElementsByName`但不确定如何在一个简单的循环函数中实现它来测试每次迭代。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T18:05:58.137

**使用 jQuery**

```
$("input:radio:checked").each(function (index) {
    var this$ = $(this);
    var q = this$.attr('name');
    var a = this$.val();

    console.log('Question: ' + q + ', answer: ' + a);
}); 
```

此片段仅选择选中的单选按钮，然后将它们打印到控制台。你可以从这里做任何你想做的事情，`q`是问题的名称（例如`ans1`）和`a`答案本身（`true`例如`false`）。

看到它[在行动](http://jsfiddle.net/VQJxU/1/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T18:00:22.260

使用 jquery ( [http://jquery.com/](http://jquery.com/) ) 喜欢

```
for(int i = 1; i < 30; ++i)
{
    if ($('#yes' + i).val() == 'yes'){ do something }
} 
```

# java - 当我在 Android 应用程序中使用 Reflection api 时，我会受到很大的性能损失吗？

> ID：15073119
> 
> 赞同：0
> 
> 时间：2013-02-25T17:46:45.827
> 
> 标签：java, android, reflection, methods

我想实现一个功能映射。我有几个函数可以在 SQLite 数据库 ( `InsertUSER_Data()`, `InsertMessages()`) 等中插入不同的数据。我想创建一个 Map 并通过一个键盘命令调用一个特定的函数。正如我在搜索过程中看到的那样，有两种方法：匿名类和反射。（例如，这里[如何调用存储在 HashMap 中的方法？（Java）](https://stackoverflow.com/questions/4480334/how-to-call-a-method-stored-in-a-hashmap-java)）我真的很喜欢基于反射 API 的方法（通过方法类型）：`Map <String, Method>`而不是仅仅使用实现接口的匿名类。

但我有疑问：这个解决方案的性能开销是否真的很大，特别是如果我将在 Android 中使用它或者它不是很重要？详细的解释将非常有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T17:54:07.593

我无法回答您的确切观点，但一些基础知识可能会有所帮助：

*   事先了解表演的艺术是微妙的、困难的和危险的。最好的方法是*测量*两种解决方案之间的差异（可以像 System.currentTimeMillis() 一样简单）。
*   根据经验，与 IO（文件或数据库访问）、远程调用甚至某些 UI 元素等其他事物相比，“在内存中”经过的时间在性能方面通常并不重要。
*   除非您打算进行（b？）数百万次调用，否则我真诚地怀疑诸如小型地图之类的后果。但是，再次，不要相信我，测试它。

最后，你的问题不能简单地使用接口来解决吗？这将消除这个问题，并且通常更容易编写、阅读和调试。就像是 ：

`interface Actionable { Result doStuff(Param p); }`

您的各种函数类可以实现，并且可以在不知道背后究竟是什么的情况下调用。

# css - 为 div 腾出空间

> ID：15073129
> 
> 赞同：0
> 
> 时间：2013-02-25T17:47:31.040
> 
> 标签：css

我的页面顶部附近有一个 jQuery 滑块。但是当页面第一次加载时，滑块加载需要几秒钟，在此期间，它下面的 div 靠近顶部。

有没有办法立即为滑块 div 腾出空间，以便从一开始就正确放置下面的元素？这不是预加载，因为滑块是页面上的第一个元素之一，我不相信预加载会有任何好处。

这是实际操作中的页面：http: [//americanart.si.edu/index_newsplash3r.cfm](http://americanart.si.edu/index_newsplash3r.cfm)

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T17:48:45.243

您可以在 CSS 上使用[min-height](http://www.w3schools.com/cssref/pr_dim_min-height.asp)和[min-width](http://www.w3schools.com/cssref/pr_dim_min-width.asp)以及 height 和 width 。这应该迫使 div 达到一定的高度。

将这些属性应用于元素的 CSS： `height: 100px; min-height: 100px;`例如。

# ruby-on-rails - Rails 3 如何从部分内部访问价值

> ID：15073133
> 
> 赞同：0
> 
> 时间：2013-02-25T17:47:41.097
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我用这个渲染一个部分：

```
<%= render 'fields', f: f %> 
```

然后在里面`_fields.html.erb`，我有这样一行：

```
<%= f.text_field :energy %> 
```

效果很好，它会呈现一个具有正确值的文本字段。但是我怎样才能直接输出那个变量的值呢？如果我尝试类似：

```
<%= :energy %> 
```

它只是呈现文本`energy`。我想将值输出到 div 的数据字段中以供 jquery 组件使用。`:energy`那么我怎样才能渲染字段的当前值呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T17:51:52.567

f.object 访问在构建器中循环的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T17:50:51.797

您只需`text_field :energy`使用`name="text"`.

使用时`<%= :energy %>`：你的变量来自哪里？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T18:15:47.003

`:energy`是一个 Ruby 符号，它是一个文本值，Ruby 为其分配内存，然后在您每次需要文本“能量”时重新使用，而不是`"energy"`Ruby 为您每次使用它分配不同的内存块。但是，由于符号仍然只是一个文本值，`<%= :energy %>`所以只输出文本“能量”。

# windows - 通过批处理文件运行目录中的所有文件，每行附加文本

> ID：15073139
> 
> 赞同：0
> 
> 时间：2013-02-25T17:47:51.503
> 
> 标签：windows, command-line, console-application

我想创建一个批处理文件

A) 读取当前目录下的所有文件

B) 将当前目录中的所有文件写入另一个批处理文件

C) 将文本附加到每一行（我想附加“/Z /U”（分别用于安静和 norestart）

到目前为止我所拥有的：

## 批处理文件

```
@echo on

@setlocal enableextensions
@cd /d "%~dp0"

dir /b > installALLTHETHINGS.bat

echo /Z /U >> installALLTHETHINGS.bat 
```

* * *

批处理文件的输出在这里：

## 输出

```
exe1.exe
bat1.bat
installme.msi
bat2.bat
bat3.bat
file list.bat
/Z /U 
```

* * *

我确定我可以弄清楚如何在不创建新行的情况下在最后一行获取“/Z /U”，但是有没有办法在目录中的每个文件之后写入“/Z /U”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T02:26:45.983

我不知道你为什么要这样做，但使用 FOR 循环很容易完成。

```
@echo off
cd /d "%~dp0"
>installAllTheThings.bat (
  for %%F in (*) do if "%%F" neq "installAllTheThings.bat" if "%%F" neq "%~nx0" echo "%%F" /Z /U
) 
```

# phpunit - Laravel 4在TestCase中找不到测试

> ID：15073140
> 
> 赞同：24
> 
> 时间：2013-02-25T17:47:57.413
> 
> 标签：phpunit, testcase

我在使用 phpunit 时遇到了一些问题。当我执行测试时，phpunit 会给我以下警告：

> 1) 警告在“Illuminate\Foundation\Testing\TestCase”类中找不到测试。
> 
> 2) 警告在“TestCase”类中找不到测试。

但我想**忽略**这些文件，这样 phpunit 就不会尝试从它们运行测试。

怎么做？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-11-08T17:17:23.983

希望现在您找到了答案，但如果您还没有，这可能会有所帮助：

> 嗯 - 确保文件名和类名都匹配。例如，没有文件名为 BarTest.php 的 FooTest 类。
> 
> 另外，您确定在 app/tests 目录中有一个 *Test.php 文件吗？
> 
> [...]
> 
> 就是这样，即我的一个测试在文件名与类名中有一个错字。奇怪的是，打字错误会在 TestCase 类中发出警告，而不是标记实际导致它的类。

来自： [https ://laracasts.com/forum/?p=83-warnings-for-testcase-illuminate-foundation-testing-testcase/0](https://laracasts.com/forum/?p=83-warnings-for-testcase-illuminate-foundation-testing-testcase/0)

基本上，确保您的文件名和类名匹配。我也在用头撞这个。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2015-04-14T15:51:46.967

另一个解决方案可能是使 TestCase 类抽象。通过这样做，PHPUnit 将不会尝试在其中找到任何测试。

`abstract class TestCase {`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-08-18T14:07:43.573

对我来说，问题是类名与文件名不匹配，所以一个类定义为

```
class ExampleTest { 
```

未命名为 ExampleTest.php。

如果您想忽略某些测试文件，请进入 phpunit.xml 文件并在里面

```
<testsuite name="Application Test Suite">
    <directory></directory>
</testsuite> 
```

用标签替换目录标签并指定要使用的特定测试文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-30T16:57:10.583

对我来说，我犯了一个约定错误。解决方案是将类名和文件从`TestFoo`更改为`FooTest`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-12T06:03:43.767

我也面临同样的问题。我已经检查过我的文件名和类名分别与`AuthTest.php`和`AuthTest`相同。

但是我仍然收到相同的警告，可能是因为我已将 to 重命名`ExampleTest.php`为`AuthTest.php`.

无论如何，我已经删除了以前的文件并使用了`php artisan make:test AuthTest` 它并且它有效。

# eclipse - 尝试从我的控制器访问服务层时出现异常 java.lang.NullPointerException

> ID：15073145
> 
> 赞同：1
> 
> 时间：2013-02-25T17:48:08.513
> 
> 标签：eclipse, spring, spring-mvc

我正在使用 Spring STS（也使用 Eclipse-juno，spring 3.1），并创建了一个 spring 模板项目。

我的应用程序欢迎页面是一个简单的表单：

```
 <div id="editPresPage">
     <form action="editPresPage.do" method="post"> 
    <label>Enter Page Text</label><input type="text" name="page_text"/><br>
    <input type="submit" value="Add New Page"/>
 </form>              
  </div> 
```

当我交付表格时，我的控制器就位：

```
@Controller
@RequestMapping(value = "/")
public class HomeController {

    private Page_manager_service page_manager_service;

    public void setPage_manager_service(Page_manager_service page_manager_service) {
        this.page_manager_service = page_manager_service;
    }

    @RequestMapping(value="/editPresPage",method = RequestMethod.POST)
    public ModelAndView EditPresPage()    {
        page_manager_service.check();

        return new ModelAndView("thanks");      
    } 
```

控制器需要从 My Service Layer 界面执行检查方法（已标记）：

```
public interface Page_manager_service {
    public void check();
} 
```

服务层实现：

```
public class Page_manager_service_mock_Impl implements Page_manager_service {

    public void check() {
        System.out.println("check method was done!!!");
    }
} 
```

但是我在执行 check 方法时会收到以下错误：

***java.lang.NullPointerException 在 my.topLevel.pack.HomeController.EditPresPage(HomeController.java:64)***

这是我的 servlet-context.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/mvc 
        http://www.springframework.org/schema/mvc/spring-mvc.xsd
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring  beans.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd">

    <!-- DispatcherServlet Context: defines this servlet's request-processing infrastructure -->

    <!-- Enables the Spring MVC @Controller programming model -->
    <annotation-driven />

    <!-- Handles HTTP GET requests for /resources/** by efficiently serving up static resources in the ${webappRoot}/resources directory -->
    <resources mapping="/resources/**" location="/resources/" />

<!-- Resolves views selected for rendering by @Controllers to .jsp resources in the /WEB-INF/views directory -->
    <beans:bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <beans:property name="prefix" value="/WEB-INF/views/" />
        <beans:property name="suffix" value=".jsp" />
    </beans:bean>

    <context:component-scan base-package="my.topLevel.pack" />

</beans:beans> 
```

这是我的 root-context.xml（你可以看到我连接了“page_manager_service”bean）：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:jee="http://www.springframework.org/schema/jee"
    xsi:schemaLocation="http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.1.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">    

    <!-- Root Context: defines shared resources visible to all other web components -->
    <context:annotation-config/> 

    <!--  Service Beans -->    
    <bean id="page_manager_service"  class="my.topLevel.pack.Services.Page_manager_service_mock_Impl">
    </bean> 
</beans> 
```

我没有更改 web.xml 文件中的任何内容。

我可以看到服务层实现正在被注入，因为上面有一个“s”。

我能够将参数从视图传输到控制器 - 所以问题不存在。

它在控制器<-> 服务层通信中。

我不知道为什么我会收到这个错误..

通过执行以下步骤解决了问题：

第一步：在page_manager_service字段中添加@Autowired（删除setter就可以了）。

第二步：在 root-context.xml 文件中更改：

```
<context:annotation-config/> 
```

到：

```
<context:component-scan 
    base-package="my.topLevel.pack">
</context:component-scan> 
```

第三步：删除：

```
<bean id="page_manager_service"       class="my.topLevel.pack.Services.Page_manager_service_mock_Impl"> 
```

从根上下文.xml。

第四步：给Page_manager_service_mock_Impl添加@Component

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:15:18.023

虽然你已经创建了`Page_manager_service`bean，但是它并没有被注入到`Controller`类中，导致`NPE`你调用的时候

```
page_manager_service.check(); 
```

您可以注释`Page_manager_service`并`@Component`自动*装配*：`Controller`

```
@Autowired
private Page_manager_service page_manager_service; 
```

那么二传手将是不必要的......

旁注：Java 使用驼峰式大小写，这会使`page_manager_service` `pageManagerService`.

# linux - 如何从文件中获取唯一事件？

> ID：15073146
> 
> 赞同：1
> 
> 时间：2013-02-25T17:48:11.273
> 
> 标签：linux, perl, bash, sed, awk

我在尝试`DeviceId`从与以下格式类似的日志文件中获取唯一出现的 时遇到一些问题：

```
log: {"deviceInfo":{"DeviceId":"123","device":"Android"}
log: {"deviceInfo":{"device":"Android","DeviceId":"123"}
log: {"deviceInfo":{"device":"Android","DeviceId":"234"}
log: {"deviceInfo":{"device":"iPhone","DeviceId":"323"}
log: {"deviceInfo":{"device":"iPhone","DeviceId":"323"} 
```

我期待的是这样的输出：

```
log: {"deviceInfo":{"DeviceId":"123","device":"Android"}
log: {"deviceInfo":{"device":"Android","DeviceId":"234"}
log: {"deviceInfo":{"device":"iPhone","DeviceId":"323"} 
```

我尝试使用`awk`，但我似乎可以弄清楚。有谁知道如何做到这一点？

我知道应该有一种方法来打印`DeviceId`使用`awk`，但我似乎无法弄清楚。一旦我得到了，`DeviceId`我就可以通过管道连接到`sort`and `uniq`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T18:02:24.993

使用 Perl：

```
perl -lne 'if ( m{"DeviceId":" ([^"]+) "}xms ) { print if not $seen{$1}++; }' <log 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-25T18:57:53.333

使用 GNU awk：

```
gawk 'match($0, /DeviceId":"([^"]+)/, a) && seen[a[1]]++ == 0' log 
```

给定您的输入，此输出

```
log: {"deviceInfo":{"DeviceId":"123","device":"Android"}
log: {"deviceInfo":{"device":"Android","DeviceId":"234"}
log: {"deviceInfo":{"device":"iPhone","DeviceId":"323"} 
```

（*注意，这本质上是[@Perleone 的答案](https://stackoverflow.com/a/15073371/7552)的笨拙翻译，虽然我当时没有注意到*）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T17:56:19.637

根据@cnicutar 的回答，`sed`使用`sort`和`cut`：

```
sed 's/.*\"DeviceId":"\([0-9]*\).*/\1\t\0/' <file> | sort -u -k 1,1 | cut -f 2 
```

输出：

```
log: {"deviceInfo":{"DeviceId":"123","device":"Android"}
log: {"deviceInfo":{"device":"Android","DeviceId":"234"}
log: {"deviceInfo":{"device":"iPhone","DeviceId":"323"} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-25T18:28:22.277

唯一设备 ID 使用`awk`：

```
$ awk '/DeviceId/&&!a[$1]++&&gsub(/[^[:digit:]]/,"")' RS='[{,}]' file
123
234
323 
```

好处`awk`是关联数组，不需要管道到`sort -u`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-25T23:41:39.950

使用任何 awk：

```
$ awk '{id=$0;gsub(/.*DeviceId":"|".*/,"",id)} !seen[id]++' file
log: {"deviceInfo":{"DeviceId":"123","device":"Android"}
log: {"deviceInfo":{"device":"Android","DeviceId":"234"}
log: {"deviceInfo":{"device":"iPhone","DeviceId":"323"} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-25T23:50:57.580

更好地解析 JSON（但另一个快速 awk）：

```
awk -F'.*DeviceId":"|["}]' '!A[$2]++' file 
```

* * *

应用 Ed Morton 的建议再剃掉 3 个字符：

```
awk -F'.*DeviceId":"|"' '!A[$2]++' file 
```

# c# - 在更新面板中禁用页面重新加载

> ID：15073151
> 
> 赞同：0
> 
> 时间：2013-02-25T17:48:22.633
> 
> 标签：c#, asp.net

我有一个带有更新面板的 ASP.NET 页面。通常，如果我使用更新面板，应该只有回发但没有完整的页面重新加载。

就我而言，当我单击一个按钮时，它总是会重新加载页面。尽管此按钮位于更新面板中。

我发现：当我把

```
Response.End(); 
```

在 Button_Click 方法中，没有重新加载。

我在 .aspx 上的代码：

```
 <asp:UpdatePanel ID="upUserDefault" runat="server">
        <Triggers>
            <asp:PostBackTrigger ControlID="btnPrintSelectedArticles" />
        </Triggers>
        <ContentTemplate>

        <cc1:MenuButton runat="server" ID="btnPrintSelectedArticles" OnClientClick="return ShowPrintStickersPopUp();" ButtonText="Print" />

    </ContentTemplate>
</asp:UpdatePanel> 
```

后面的代码：

页面加载：

```
btnPrintSelectedArticles.MenuButton_Click += btnPrintSelectedArticles_MenuButton_Click; 
```

方法：

```
 void btnPrintSelectedArticles_MenuButton_Click(object sender, EventArgs e)
    {
        // Disables reload
        Response.End();
    } 
```

MenuButton 是一个用户控件

任何想法如何禁用整个页面的重新加载？

编辑：这是来自 ClienClick 的 ShowPrintStickersPopUp JS。如果选中了任何复选框，它只会检查网格视图

```
function ShowPrintStickersPopUp() {
        var gridView = document.getElementById('<% =gvArticles.ClientID %>');

        //get all the control of the type INPUT in the base control.
        var inputs = gridView.getElementsByTagName("input");

        for (var n = 0; n < inputs.length; ++n) {
            if (inputs[n].type == 'checkbox' && inputs[n].checked) {
                // If at least 1 checkbox is checked, open popup
                window.open('PrintStickersPopUp.aspx', 'Print Stickers', 'width=700,height=550');
                return true;
            }
        }

        return false;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:13:39.483

您的客户端方法看起来不错。您还记得在您的页面上添加一个 ScriptManager 对象吗？许多与 UpdatePanel 相关的问题都与没有添加有关。

# xcode - 自定义注释标注未显示 MKAnnotation？

> ID：15073158
> 
> 赞同：1
> 
> 时间：2013-02-25T17:48:49.230
> 
> 标签：xcode, mkmapview, mkannotation, mkannotationview, mapkit

所以默认的红色注释在模拟器中显示得很好，但自定义注释 MyPin 不会显示。我有一种感觉，这与 NSMutableArray 有关吗？如果是这样，我不太确定如何解决它？

希望论坛上有一位大师可以提供一些启示（希望这不是一个真正的菜鸟错误，我在过去的 2 个小时里一直在浏览这个问题，但我什么也看不到。）

```
#import "UKFlightsEuropeMap.h"
#import "Annotation.h"

@interface UKFlightsEuropeMap ()

@end

@implementation UKFlightsEuropeMap
@synthesize europeMapView;

//Define the Long and Lat.

#define EUROPE_LATITUDE 47.3690;
#define EUROPE_LONGITUDE 8.5380;

#define LONDON_LATITUDE 51.5171;
#define LONDON_LONGITUDE 0.1062;

#define PARIS_LATITUDE 48.8742;
#define PARIS_LONGITUDE 2.3470;

#define BRUSSELS_LATITUDE 50.75;
#define BRUSSELS_LONGITUDE 4.53333;

#define BERLIN_LATITUDE 52.5;
#define BERLIN_LONGITUDE 13.35;

#define THE_SPAN 0.01f;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    // Custom initialization
}
return self;
}

- (void)viewDidLoad
{
[super viewDidLoad];

[europeMapView setDelegate:self];

// Do any additional setup after loading the view.

//CREATE MY REGION

MKCoordinateRegion myRegion;

//SET CENTRE
CLLocationCoordinate2D center;
center.latitude = EUROPE_LATITUDE;
center.longitude = EUROPE_LONGITUDE;

//SET SPAN (ZOOM)
MKCoordinateSpan span;
span.latitudeDelta = THE_SPAN;
span.longitudeDelta = THE_SPAN;

myRegion.center = center;
myRegion.span = span;

//Set our europeMapView

[europeMapView setRegion:myRegion animated:YES];

//Annotation

NSMutableArray * locations = [[NSMutableArray alloc] init];
CLLocationCoordinate2D location;
Annotation * myAnn;

//London Annotation

myAnn = [[Annotation alloc] init];
location.latitude = LONDON_LATITUDE;
location.longitude = LONDON_LONGITUDE;
myAnn.coordinate = location;
myAnn.title = @"London";
myAnn.subtitle = @"London City";

[locations addObject:myAnn];

//Paris Annotation

myAnn = [[Annotation alloc] init];
location.latitude = PARIS_LATITUDE;
location.longitude = PARIS_LONGITUDE;
myAnn.coordinate = location;
myAnn.title = @"Paris";
myAnn.subtitle = @"City of Love";
[locations addObject:myAnn];

//Brussels Annotation

myAnn = [[Annotation alloc] init];
location.latitude = BRUSSELS_LATITUDE;
location.longitude = BRUSSELS_LONGITUDE;
myAnn.coordinate = location;
myAnn.title = @"Brussels";
myAnn.subtitle = @"Brussels";
[locations addObject:myAnn];

//Berlin Annotation

myAnn = [[Annotation alloc] init];
location.latitude = BERLIN_LATITUDE;
location.longitude = BERLIN_LONGITUDE;
myAnn.coordinate = location;
myAnn.title = @"Berlin";
myAnn.subtitle = @"Berlin";
[locations addObject:myAnn];

[self.europeMapView addAnnotations:locations]; 

}

 //CUSTOMISE THE ANNOTATION CALLOUTS.

    -(MKAnnotationView *) europeMapView:(MKMapView *)europeMapView viewForAnnotation:                                    (id<MKAnnotation>)annotation { MKPinAnnotationView *MyPin=[[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"current"];
MyPin.pinColor = MKPinAnnotationColorPurple;

UIButton *advertButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
[advertButton addTarget:self action:@selector(button:) forControlEvents:UIControlEventTouchUpInside];

MyPin.rightCalloutAccessoryView = advertButton;
MyPin.draggable = NO;
MyPin.highlighted = YES;
MyPin.animatesDrop = TRUE;
MyPin.canShowCallout = YES;

return MyPin;

}

-(void)button:(id)sender {
NSLog(@"Button Pressed");

}

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
}

@end 
```

首先十分感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T20:00:47.470

你`viewforAnnotation`没有被叫到，因为你改了名字

它应该是 `– mapView:viewForAnnotation:` ，但你的被称为 `- europeMapView:viewForAnnotation:`

如果您将其更改为此，您将获得更大的成功

```
-(MKAnnotationView *) mapView:(MKMapView *)aMapView viewForAnnotation:(id<MKAnnotation>)annotation
{
    MKPinAnnotationView *MyPin=[[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"current"];
    MyPin.pinColor = MKPinAnnotationColorPurple;

    UIButton *advertButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
    [advertButton addTarget:self action:@selector(button:) forControlEvents:UIControlEventTouchUpInside];

    MyPin.rightCalloutAccessoryView = advertButton;
    MyPin.draggable = NO;
    MyPin.highlighted = YES;
    MyPin.animatesDrop = TRUE;
    MyPin.canShowCallout = YES;

    return MyPin;

} 
```

此外，您可以删除`addTarget`并实现[- mapView:annotationView:calloutAccessoryControlTapped:](http://developer.apple.com/library/ios/documentation/MapKit/Reference/MKMapViewDelegate_Protocol/MKMapViewDelegate/MKMapViewDelegate.html#//apple_ref/occ/intfm/MKMapViewDelegate/mapView%3aannotationView%3acalloutAccessoryControlTapped%3a)它为您提供被点击的 annotationView，您可以从中获取当时显示的注释，从而确定要显示的广告类型。

# ruby-on-rails - 存储在会话对象中的每个信息都会传递给 Rails 中的客户端吗？

> ID：15073161
> 
> 赞同：1
> 
> 时间：2013-02-25T17:49:03.693
> 
> 标签：ruby-on-rails, session, omniauth

我正在尝试实施 Omniauth。我想将来自第三方（如 Facebook 电子邮件）的用户登录信息临时存储到会话中，例如：

```
session[:email] = auth.email 
```

这些信息会自动传递给客户吗？

我知道会话 ID 将传递给客户端，但不确定会话中的其他对象是否如此。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T17:58:28.267

这取决于您选择的会话存储。如果您选择`cookie`了会话存储，它将把所有会话数据放在 cookie 中，这将涉及将其发送到客户端。否则，它只是将密钥存储在 cookie 中，因为这就是识别用户和获取他们的会话数据所需的全部内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T17:59:59.047

您放入会话哈希的数据将存储在客户端，但将使用您的`secret_token`. 如果您想查看会话中的内容，可以从浏览器中获取会话数据，然后执行以下操作：

```
Marshal.load(Base64.decode64(session_data)) 
```

以上将准确地向您展示您在浏览器会话中存储的内容。

# jdbc - jmeter中的数据库网址？

> ID：15073164
> 
> 赞同：0
> 
> 时间：2013-02-25T17:49:27.887
> 
> 标签：jdbc, jmeter

我有一个存储在服务器上的数据库。我想使用 jmeter 对服务器进行负载测试。它需要一个名为数据库 url 的字段？现在我应该填写什么？它还要求 jdbc 驱动程序类？这两者的价值是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T21:03:30.667

JMeter 使用 JDBC。

你的数据库是什么？甲骨文、mysql...

每个 Db 提供您需要放入 jmeter/lib 文件夹的驱动程序。

对于 url，每个驱动程序都有一个语法，示例：

[http://www.petefreitag.com/articles/jdbc_urls/](http://www.petefreitag.com/articles/jdbc_urls/)

然后你需要添加登录名/密码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-25T11:03:18.550

您的数据库 url 应该是 -jdbc:mysql://localhost:3306/ 数据库 url 是数据库的主机地址当您使用 SQl 从 gui 连接 mysql 时，您可以看到 yog 是您在 mysql 中创建的数据库名称 您的驱动程序class 应该是 -com.mysql.jdbc.driver 数据库的用户名和密码

# android - Android 4.2.2 - adb 离线，即使在 SDK 升级后

> ID：15073165
> 
> 赞同：21
> 
> 时间：2013-02-25T17:49:28.733
> 
> 标签：android, adb, android-4.2-jelly-bean

编辑：固定！看起来有很多可能的原因。我的是比较不寻常的...

* * *

我将 SDK 工具更新到 21.1，将平台工具更新到 16.0.1。验证`adb version`我正在运行 v1.0.31。我的开发机器运行的是 Windows 7、x64。

我有四个 4.2.2 设备要测试，一个 Galaxy Nexus 带有未锁定的引导加载程序，但没有 root，以及 Nexuses One、4、7 和 10，所有库存。

Nexus One，<4.2.2，与 adb 一起工作得很好，但所有 4.2.2 设备在 adb 中都显示为“离线”，而且我从未见过设备上弹出 RSA 安全对话框，即使在几次重新启动后也是如此ADB（使用`kill-server`）、PC 和设备本身。

尝试使用不同的 USB 端口和电缆。我正在使用 SDK 中的标准“Android ADB 接口”驱动程序，但也尝试了“Android Composite ADB Interface”和“Samsung Composite ADB Interface”驱动程序。我什至完全从 ADT 包中重新安装了 SDK。

奇怪的是，我的同事可以毫不费力地让弹出窗口在相同的设备上显示。我什至复制了他的 adb.exe 和 dll 并尝试了它，但它仍然无法在我的身上工作。他没有从捆绑包中安装；他以老式的方式将 ADT 安装到 Eclipse 中，但我怀疑这会有所作为。是什么赋予了？！

编辑 26/02/2013，格林威治标准时间 16:41：平台工具 16.0.2 的更新刚刚发布。尚未更新 ADB（仍然是 v1.0.31）并且仍然认为设备处于离线状态，并且看不到 RSA 安全弹出窗口。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-14T11:50:57.193

事实证明，我的`ANDROID_SDK_HOME`环境变量指向了一个不再存在的旧位置。它没有引起任何其他问题（奇怪的是），但它似乎一直在阻止 RSA 身份验证过程的发生。前一周我检查 PATH 变量时可能应该看到它，但没关系。

我通过运行以下命令并检查读数找到了奇怪的位置：

```
adb kill-server
set ADB_TRACE=all
adb nodaemon server 
```

更新位置并重新启动我的电脑后，它现在工作得很好。感谢所有回复的人。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-10T01:30:35.603

我发现的最佳解决方案是：

1.  使用以下命令检查您的 adb 版本：`adb version`对于 Windows 和`./adb version`Linux。
2.  如果显示 1.0.29，请将其升级到 1.0.31，因为 1.0.29 不会响应 JB 4.2.X
3.  它将解决您的设备离线问题。
4.  如果您的系统已经有新的 adb(1.0.31) 并面临这个问题，在这种情况下打开 sdk 并将平台工具升级到 16.0.1
5.  至少重新启动您的设备一次.. :) 它适用于所有设备...

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-26T23:03:48.620

我遇到了完全相同的问题，这对我有用：如果您在 Nexus 7 设备上创建了多个用户帐户，那么除非您登录到与之前相同的帐户，否则您将不会收到安全弹出窗口用于在设备上启用 USB 调试。这样做，当您看到弹出窗口时，请确保选中“始终信任此计算机”选项，然后它也应该适用于其他帐户。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-22T16:51:02.397

ADB_TRACE 揭示了我的问题的答案（我的 Linux 系统上的 ~/.android 文件夹的权限问题阻止了密钥的生成）。非常感谢。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-05-06T15:30:53.297

这肯定会奏效：在平台工具中按住 shift 并右键单击。在此处选择打开命令提示符。

```
adb kill-server 
```

> 亚行设备

在电话上说“是”弹出窗口。

您的设备将被连接。

*如果仍然无法正常工作，请尝试重新连接设备并再次检查 adb 设备*

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-08-14T17:46:40.693

我这样做了，它适用于我的 Windows 8：

1.  打开计算机——在文件管理器中管理
2.  在系统工具/设备管理器上，删除任何现有的 android 相关项目。
3.  单击“扫描硬件更改”。
4.  该设备显示为警告标志。
5.  右键单击设备，单击“更新驱动程序软件”。
6.  选择 ANDROID_SDK_HOME\sdk\extras 作为驱动程序的来源。
7.  在设备上，关闭 USB 调试关闭再打开（或多次）

哇，弹出窗口出现在设备中！

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-03-03T17:42:32.763

**多个 adb.exe 文件？**

**从C:/Windows/**删除 OLD adb.exe 的副本后，我的问题得到了解决。我不知道*adb.exe*的副本是如何到达 C:\Windows\ 的？

**当我从android-sdk/platform-tools/**启动 adb.exe 时，检测没有问题。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-03-04T13:22:07.780

我有同样的问题和设置。Windows 7、x64、Eclipse Indigo、设备上的一位用户等。

我尝试`adb devices`使用 v1.0.31 并且在任何情况下都没有在设备上看到弹出窗口。我尝试了各种打开/关闭调试、来回插入 USB、重新启动设备等的组合。没有任何效果。我还尝试将设备植根以手动复制指纹文件。但是，该设备无法修复（不推荐给任何人）。我有不止一个 Nexus 10，所以继续尝试其他的。

我正在使用训练营（在 Mac 笔记本电脑上使用 Windows），所以最后一次尝试是在 OSX 下尝试同样的事情。在从终端第一次尝试`./adb devices`时，弹出窗口出现了。我接受了指纹，现在它在 OSX 中工作。

我更喜欢 Windows 而不是 OSX，所以这不是一个理想的解决方法，因为我仍然无法让它在 Windows 中工作。我会密切关注这个问题的解决方案，但与此同时，我希望这可以帮助其他人解决训练营问题。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-11T21:01:23.967

关闭并重新打开*设备上的*Android 调试。这给了我设备弹出窗口。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-03-13T17:06:47.623

我在 Nexus7 上运行 Windows 7，一个帐户。我实际上必须选中“始终信任这台计算机”框才能使其正常工作。不管我有多少次接受弹出并选择确定。直到我最终选中该框，它才起作用。现在好了，被adb识别了。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-03-15T03:14:46.420

从三星 USB 驱动程序（Nexus Root Toolkit 附带的）切换到 Google 提供的 USB 驱动程序（通过他们的 SDK）对我来说是成功的。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-05-30T06:33:31.633

我遇到了这个问题，并找到了答案：要么是我用手指粗了电话，要么没有注意，或者它根本没有弹出说这里是 RSA pubkey 检查以允许计算机，我一直处于离线状态。我遵循地图上的每一个方向，从在我的规则文件中有一个长列表到重新安装 ADB 50 次。是的，它确实需要是我拥有的 1.0.31 版本。如果这是您，请继续阅读......

断开您的设备。假设您使用的是 BASH，请在终端中使用这些命令。

```
adb kill-server
sudo bash
cd ~
mv .android BAK.android 
```

现在您已经有效地删除了初始 RSA 密钥，请确保在设备上启用了 USB 调试。重新连接设备并注意屏幕。确保选中“记住这台计算机”框。按确定。问题解决了。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-07-13T06:14:11.007

我有同样的问题。不确定它是否适用，但您是否使用 adb 作为根？

对我来说，杀死 adb 服务器并执行以下操作：

`sudo ./adb devices list`

导致安全提示。在永久接受它并运行上面的命令后，我终于可以连接它了。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-09-02T13:00:21.883

我遇到了与 OP 相同的问题，但源自**C:\Windows 中的 adb.exe 副本**，很像*user1269737*似乎没有。这在 Windows PATH 中具有优先权，因此无论我更新了多少 SDK，它都无济于事，因为没有使用更新的 ADB。

有人告诉我，它可能是安装在那里的 Android Studio 捆绑包的一个版本（看图...）。我无法确认，因为： 1\. 当前的 AS 捆绑包似乎没有这样做，并且... 2\. 我安装了很多捆绑 ADB 的 ROM 闪存器/工具（XDA 开发人员的东西）。

所以我无法确认它是 Android Studio。

Protip：在**cmd**`adb version`中使用和`where adb`命令来检查您正在使用的版本以及正在运行的可执行文件

 *** * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-08-31T15:48:29.583

我尝试了所有这些方法，但仍然无法让 Windows 在我的 Android 设备上显示 RSA 提示符。几个小时后，这就是我让它工作的方式：

1.  通过 USB 将设备连接到 PC
2.  [Windows 键] + [R] > [类型] devmgmt.msc
3.  在列表中找到您的设备
4.  [右键单击] > 卸载
5.  下载谷歌USB驱动包：http: [//developer.android.com/sdk/win-usb.html#top](http://developer.android.com/sdk/win-usb.html#top)
6.  解压压缩包到桌面
7.  返回 devmgmt.msc > [右键单击] 树的根 > 扫描硬件更改
8.  在列表中找到您的设备
9.  [右键单击]您的设备 > 安装 > 选择/浏览文件
10.  浏览到您提取到桌面的 usb_driver 文件夹
11.  Windows 将使用 Google USB 驱动程序而不是您手机的驱动程序。

我的问题是 LG 驱动程序安装在 Windows 上。一旦我删除它并安装了谷歌驱动程序，它就可以完美运行。RSA 提示立即显示。**

# c# - 添加其他数据集以显示组合图

> ID：15073168
> 
> 赞同：2
> 
> 时间：2013-02-25T17:49:34.613
> 
> 标签：c#, .net, dataset, chartfx

```
Chart chart1 = new Chart();  //ChartFX
chart1.DataSourceSettings.DataSource = dset.Tables[0];
chart1.Data.Series = 2;
DataSetDataValuesTableAdapters.DataValuesTableAdapter adapter = 
    new DataSetDataValuesTableAdapters.DataValuesTableAdapter();
DataSetDataValuesTableAdapters.DataValuesTableAdapter adapter2 = 
    new DataSetDataValuesTableAdapters.DataValuesTableAdapter();
DataSet dset = new DataSet();
DataTable datos1 = adapter.GetDataCaudal();
DataTable datos2 = adapter2.GetDataByPluvio();

dset.Tables.Add(datos1);
dset.Tables[0].TableName = "Table1";
dset.Tables.Add(datos2);
dset.Tables[1].TableName = "Table2"; 
```

我只能在[chartFX](http://www.softwarefx.com/sfxNetProducts/ChartFX/features/default.aspx)图表中显示一个数据系列。我需要将另一个 DataSource 连接到图表，以便可以显示两个组合的数据系列。

[这是我想要得到](http://ciese.org/curriculum/weatherproj2/en/popup/graph1a.shtml)的一个例子：

有谁能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:43:01.050

我没有这个模块，所以我无法测试任何代码。但似乎你应该做一个组合图表：http: [//community.softwarefx.com/forums/p/8501/19692.aspx](http://community.softwarefx.com/forums/p/8501/19692.aspx)

> 首先，您需要创建一个交叉表以将数据传递到此图表，以便为产品列（列标题）中的每个不同值创建一个系列。有关更多详细信息，请查看 Cross Tab 提供程序上的程序员指南。您也可以使用图表外汇向导执行此操作。
> 
> 数据设置好后，您需要做的就是为每个系列设置图库。您可以在代码中执行此操作，也可以在设计时使用属性网格。在代码中是这样的：
> 
> ```
> chart.AllSeries.Gallery = Gallery.Bar;
> 
> chart.Series[2].Gallery = Gallery.Lines; // Third series is the Line 
> ```

# javascript - HTML5：设置滚动条区域背景颜色

> ID：15073172
> 
> 赞同：0
> 
> 时间：2013-02-25T17:49:58.210
> 
> 标签：javascript, html, gwt

我有一个带有滚动条的元素（溢出-y：自动）。我将元素的背景颜色设置为特定颜色（例如蓝色）。但是，滚动条的区域仍为白色背景色。

如何将滚动条区域背景颜色更改为元素背景颜色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T07:23:14.297

GWT从 2.4 版本引入了[自定义滚动面板。](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/CustomScrollPanel.html)我想你可以试试这个。如果您想更改颜色、图像和所有内容，您应该熟悉[CSS 资源。](https://developers.google.com/web-toolkit/doc/latest/DevGuideClientBundle#CssResource)您也可以参考以下链接

[GWT CustomScrollPanel 示例](https://stackoverflow.com/questions/11020102/gwt-customscrollpanel-example)

[http://css-tricks.com/custom-scrollbars-in-webkit/](http://css-tricks.com/custom-scrollbars-in-webkit/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-25T17:50:37.393

您不能更改滚动条的颜色。您将不得不使用第 3 方滚动条替换。

# jakarta-ee - 无法将实用程序 jar 类导入动态 Web 项目

> ID：15073177
> 
> 赞同：0
> 
> 时间：2013-02-25T17:50:09.493
> 
> 标签：jakarta-ee, rad, ear, websphere-7

我正在构建一个名为`myCommander`. 我有一个名为`myCommanderWeb`. 我有一个名为的 java 模块`myConnect`，其中包含几个`ldap`处理程序类和一个服务器 api（第三方软件）处理程序类。我正在使用`RAD 7.5 with WAS 7.0`存根服务器。我已将这两个模块添加到`myCommander`的依赖项中。myConnect 在`myCommander`. 我可以使用处理程序类的唯一方法`myCommanderWeb`是将其导出`myConnect`为 jar，然后将其添加到`myCommanderWeb`的构建路径。但这阻碍了我的测试过程。如果我对 myConnect 进行更改，我必须重新安装它。然后必须重新启动我的 WAS 服务器。我将 myConnect 从 myCommanderWeb 中分离出来的原因是我可以将它用于另一个 Web 应用程序 (myOtherApp)。

我的问题是：

1.  我是否在 J2EE 设计中遗漏了一些使测试更容易的东西？
2.  有没有更好的方法来构建我的应用程序？

我意识到这是一个稍微模糊的问题集，但请以任何可能的方向回应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T22:30:18.493

我可以通过将 myConnect 的类文件夹添加到 myCommanderWeb 的构建路径来进行测试。我将此行添加到 myCommander 的 application.xml 以进行部署。

```
<library-directory>myConnect</library-directory> 
```

不确定这是否是最佳实践，但它适用于我正在尝试做的事情。

# mono - MonoMac / Xamarin.Mac 绑定简单 dylib 不起作用

> ID：15073178
> 
> 赞同：1
> 
> 时间：2013-02-25T17:50:12.283
> 
> 标签：mono, monomac, xamarin.mac

我正在尝试绑定一些本机代码以在 MonoMac / Xamarin.Mac 中使用，但我不确定我哪里出错了。我创建了一个简单的 dylib 来测试：

*本机库.h*：

```
- (NSString *)echo:(NSString *)message; 
```

我知道我的库很好，因为我引用它并在 Objective-C / Cocoa 应用程序中使用它。

接下来，我尝试使用 parse.exe 生成初始绑定文件：

```
mono parse.exe [path...]/nativelibrary.h 
```

**问题 #1** 没有按照 Miguel 的[指南生成“gen.cs”文件](https://github.com/mono/monomac/blob/master/BINDING-HOWTO)

**问题#2** Parse.exe 实际上确实向控制台输出了一些东西，尽管它缺少我唯一的方法？

```
[BaseType (typeof (NSObject))]
interface nativelibrary {
} 
```

无论如何，我继续制作自己的 gen.cs 文件，手动填写缺少的方法：

*gen.cs*：

```
using MonoMac.Foundation;

namespace ManagedConsumer
{
    [BaseType (typeof (NSObject))]
    interface Binding 
    {
        [Export ("echo:")]
        string Echo(string message);

        // I also tried like this:
        // NSString Echo(NSString message);
    }
} 
```

接下来，我尝试使用 bmac.exe 创建绑定 DLL：

```
mono bmac.exe -o="dynamiclibrary.dll" -d="MONOMAC" -r="System.Drawing" -v [path].../gen.cs 
```

这会吐出一个我在 MonoMac 项目中引用的 .dll。

最后，我将 .dylib 本身添加到我的 MonoMac 项目中，并指定“内容”构建操作。我确认 .dylib 已复制到我的包的“资源”目录。

我可以毫无问题地实例化我的绑定对象的实例：

```
Binding b = new Binding();
Console.WriteLine(b.ToString()); 
```

**问题 3**但是，尝试调用我的方法：

```
Binding b = new Binding();
var result = b.Echo((NSString)"Hello, world"); 
```

导致非托管崩溃：

```
Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_PROTECTION_FAILURE at 0x00000000bf74bffc 
```

我在另一个[问题](https://stackoverflow.com/questions/14230031/coreplot-monomac-bindings-crashing)中看到，我们需要强制加载 .dylib。*所以我尝试在调用Application.Init()*之前将此行插入到我的*main.cs*中：

 *```
Dlfcn.dlopen ("nativelibrary.dylib", 0); 
```

但是我遇到了同样的崩溃。由于对*dlopen*的调用返回 0 而不是有效指针，因此我认为问题在于加载我的动态库。我也尝试使用该属性：

```
[assembly:MonoMac.RequiredFramework("nativelibrary.dylib")] 
```

但这只会让我：

```
System.Exception: Unable to load required framework: 'nativelibrary.dylib' 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T20:53:07.123

经过**大量**的试验和错误，我能够完成这项工作。两个变化：

在我的自制*gen.cs*文件中，接口名称需要与我的原生类的名称相匹配，即

*本机库.h*

```
@interface nativelibrary : NSObject

- (NSString *)echo:(NSString *)message; 
```

*基因.cs*

使用 MonoMac.Foundation；

```
namespace ManagedConsumer
{
    [BaseType (typeof (NSObject))]
    interface nativelibrary 
    {
        [Export ("echo:")]
        string Echo(string message);
    }
} 
```

其次，似乎我的本机库本身存在某些问题，这意味着它无法使用*dlopen*打开。我认为问题在于 XCode 'library' 项目默认为 x64，而且似乎只有 x86 可以工作。

我改为从命令行编译它，如下所示：

```
gcc -arch i386 -framework Cocoa -o nativelibrary.o  -c [path...]/nativelibrary.m 
```

然后建立我的图书馆：

```
libtool -dynamic -flat_namespace -lSystem -undefined suppress -macosx_version_min 10.6 -install_name $CURRENT_DIR/nativelibrary.dylib -o nativelibrary.dylib nativelibrary.o 
```

现在它可以工作了。*

# jsf - Jsf - dataTable 数据不会在客户端刷新

> ID：15073179
> 
> 赞同：0
> 
> 时间：2013-02-25T17:50:14.143
> 
> 标签：jsf, jsf-2, icefaces

我有一个`ice:dataTable`这样的。

```
 <ice:dataTable id="pdet"
    value="#{outerBean.nestedClassList}"
    var="nestedObject" rendered="true">

        <ice:column>
             <f:facet name="header">Order Number</f:facet>
             <ice:outputText value="#{nestedObject.orderNumber}" />
        </ice:column>

        <ice:column>
             <f:facet name="header">Qty</f:facet>
             <ice:inputText value="#{nestedObject.qty}" 
                     id="qty" 
                     label="'Qty' FOR 'Order Number':#{nestedObject.orderNumber} "
                     partialSubmit="true" 
                     valueChangeListener="#{nestedObject.qtyChanged}"
                     validator="#{nestedObject.validateQty}">
              </ice:inputText>
         </ice:column>
     </ice:dataTable> 
```

有一个下拉列表，取决于选择的值，我想填充特定的数据集。总是有一个值，`qty`并且应该允许更改该值。例如，在不更改 的情况下`qty` `ice:inputText`，如果我从下拉列表中更改所选值，则会填充一个新数据集，但从客户端，它会显示`qty`. 但是 bean 保留了真正的价值。如果我使用 a`ice:outputText` 作为`qty`字段，那么它会显示确切的值。我该如何防止这种情况？我错过了什么？

谢谢。

# php - 在 PHP 中处理多个类别和选择

> ID：15073180
> 
> 赞同：-1
> 
> 时间：2013-02-25T17:50:19.260
> 
> 标签：php, algorithm, if-statement

我只是想就最佳解决方案提供一些意见 - 对于下面的问题有效。

例如，假设我有 6 个不同的类别。在这些类别中，您有 5 到 6 个选择。根据您在每个类别中选择的内容，会产生不同的结果。你会通过做很多 if 逻辑、数组或其他方法来解决这个问题吗？

我的想法是做 switch 语句或 if 逻辑。这是最好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T19:05:26.900

如果你做了这样的布局：

```
switch($cat1){
  case 1:
    switch($cat2){
      case 1:
        ...
        break;
    }
    break;
  case 2:
    ...
    break;
} 
```

或这个：

```
if($cat1 == 1){
  if($cat2 == 1){
    ...
  }elseif($cat2 == 2){
    ...
  }
}elseif($cat1 == 2){
  ...
} 
```

无论哪种方式，您都需要超过 100,000 行代码来处理逻辑。哎呀。但是，如果您有 6 个类别，每个类别有 6 个选项，那么您总共有 46,656 种不同的组合。6^6。如果您的网站连接到数据库，您可以执行类似的操作来帮助您。

```
$layout = $cat1 . $cat2 . $cat3 . $cat4 . $cat5 . $cat6;
//making $layout 315632 or whatever based on what they select. 
```

在您的数据库中，您可以创建一个表，其中 id 与 $layout 匹配，并将您的显示信息保存在数据库中的行中。

```
 -------------------------------------
|   id   | name | make | year | model |
|--------|------|------|------|-------|
| 111111 | Aero |  S2  | 2011 | M-110 |
| 111112 | .... | .... | .... | ..... |
| 111113 | .... | .... | .... | ..... |
 ------------------------------------- 
```

然后使用简单的行查找在 php.ini 中获取结果。当然，将所有信息放入数据库需要相当长的时间，但无论如何在 php 文件中创建逻辑也需要相当长的时间。就用户实际使用您的站点而言，这将是最快的方式，并且它将使您更容易调试。

如果你不能做到这一点，下一个最快的赌注（如果你能保持一切顺利的话）是有一个 6 嵌套的 if/elseif 语句。这将为您提供的最多检查将是 36，但它可能会更少，具体取决于用户选择的内容。switch-case 也可以工作，但它们比 if/elseif 语句有点混乱。

# python - 一种以字符串形式存储相对日期的方法

> ID：15073190
> 
> 赞同：1
> 
> 时间：2013-02-25T17:50:50.250
> 
> 标签：python, django, datetime

我有一个调度程序将触发任务*T*，并且 T 的一些参数*非常*依赖于日期。例如，如果*T*在星期二运行，则某些参数将是：

```
param1 = datetime('Monday at 1pm')
param2 = datetime('Tuesday at 1am') 
```

参数可以根据运行*T*的时间而有所不同。因此，例如，如果它在星期日运行，则参数可能是：

```
param1 = datetime('Saturday at 12pm')
param2 = datetime('Sunday at 12pm') 
```

等等。这个想法是日期与*T*的运行时间相关，但我不能使用`timedelta`，因为我不确切知道任务何时运行，所以我想保留对日期的一定程度的绝对控制。

现在，将启动*T*的代码有一个指定参数的小 json 包。我正在编写一种允许我指定相对日期的小型脚本语言。它看起来类似于：

```
date1: { 
    'type': 'datetime', 
    'source': 'composite', 
    'value': '(Yn)-(Mn)-(Dn)-(Hn)-(Nn)'
} 
```

将`value`解析字符串并根据括号中的内容编译参数。因此，例如，如果`value`是类似的东西`(Y:n)-(M:n)-(D:-1)-(H:18)-(N:00)`，它将用当前年份、当前月份、**前**一天、18:00 构造日期。

我是否试图用这些东西重新发明轮子。有没有图书馆可以让我的生活更轻松？

* * *

编辑：看起来Date-Utils 的[相对增量](http://labix.org/python-dateutil#head-ba5ffd4df8111d1b83fc194b97ebecf837add454)完全符合我上面的描述！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T17:58:20.510

对于人类可读的日期/时间解析，您可以使用[parsedatetime](https://github.com/bear/parsedatetime)

我会按原样存储“人类可读”字符串，并在需要时对其进行评估。

# objective-c - Objective C iPad - 使用 ARC 的内存问题

> ID：15073195
> 
> 赞同：0
> 
> 时间：2013-02-25T17:51:03.417
> 
> 标签：objective-c, ipad, memory, automatic-ref-counting

我有这个循环的内存问题。我使用 ARC，所以通常我不能释放任何对象。但是在这个循环过程中，内存会增加，iPad会在片刻后崩溃（没有警告和错误）。

有没有办法解决这个问题？我不明白为什么记忆会长大？

谢谢您的帮助。

```
_rawdatalocal = [NSEntityDescription insertNewObjectForEntityForName:@"RAWDATA"
                                                       inManagedObjectContext:managedObjectContext];    

for(int j = 1; j <[array count];j++)
        {
            NSArray *values = [[NSArray alloc] initWithArray:[[array objectAtIndex:j] componentsSeparatedByString:@";"]];

            if([values count] == 12)
            {
            _rawdatalocal.accX = [[NSNumber alloc] initWithInt:[[values objectAtIndex:1] intValue]];
                _rawdatalocal.accY = [[NSNumber alloc] initWithInt:[[values objectAtIndex:2] intValue]];
                _rawdatalocal.accZ = [[NSNumber alloc] initWithInt:[[values objectAtIndex:3] intValue]];
                _rawdatalocal.gyrX = [[NSNumber alloc] initWithInt:[[values objectAtIndex:4] intValue]];
                _rawdatalocal.gyrY = [[NSNumber alloc] initWithInt:[[values objectAtIndex:5] intValue]];
                _rawdatalocal.gyrZ = [[NSNumber alloc] initWithInt:[[values objectAtIndex:6] intValue]];
                _rawdatalocal.magX = [[NSNumber alloc] initWithInt:[[values objectAtIndex:7] intValue]];
                _rawdatalocal.magY = [[NSNumber alloc] initWithInt:[[values objectAtIndex:8] intValue]];
                _rawdatalocal.magZ = [[NSNumber alloc] initWithInt:[[values objectAtIndex:9] intValue]];
                _rawdatalocal.temperature = [[NSNumber alloc] initWithFloat:[[values objectAtIndex:10] floatValue]];
                _rawdatalocal.temps = [[NSNumber alloc] initWithInt:[[values objectAtIndex:11] intValue]];

        } 
```

PS：通常下面的行在循环中

```
_rawdatalocal = [NSEntityDescription insertNewObjectForEntityForName:@"RAWDATA"
                                                           inManagedObjectContext:managedObjectContext]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T17:56:22.673

您可以在循环中放置一个自动释放池以避免内存峰值。在 arc 中，您需要将自动发布民意调查如下：

```
@autorelease{

} 
```

更多信息[在这里](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmAutoreleasePools.html)

# image - 是否可以使用 CSS 调整容器的大小，使其与背景图像一样高？

> ID：15073204
> 
> 赞同：1
> 
> 时间：2013-02-25T17:51:39.703
> 
> 标签：image, css, background, stretch

我对此进行了研究，只找到了一个 JavaScript 解决方案，所以想知道是否有人知道 CSS 解决方案是否可行......

这是一个代码片段：

**HTML**

```
<div id="container">
        This is a small amount of text to appear over the stretched 
        background image, but I want to be able to see the entire image.
 </div> 
```

**CSS：**

```
div#container 
{
        background: url('images/bigImage.png') no-repeat 0 0;
        background-size: 100%; /* makes the image stretch (vertically and horizontally) to the width of the device, so I've no idea what height the background image will be rendered at.*/
} 
```

有没有我可以使用的 CSS，以便背景图像覆盖整个 div 并且整个图像都可见？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T18:17:30.077

如前所述，使用 CSS 和 background-image 是不可能做到这一点的。IE8 和更低版本也不支持背景大小：封面（通过阅读您的评论，我会假设您希望在保持纵横比的同时拥有流畅（可缩放）的图像？）

如果是这样，您可以使用常规 img 元素来实现此目的：

```
<style type="text/css">
div#container {
    position    : absolute;
    top         : 0;
    left        : 0;
    overflow    : hidden;
    width       : 100%;
    height      : 100%;
}

div#container img {
    position : absolute;
    width    : 100%;
    top      : 0;
    z-index  : -1;
}
</style>

<div id="container">
    <img src="http://img.gawkerassets.com/img/18cxbtdr4fexmjpg/original.jpg">
    This is a small amount of text to appear over the stretched
    background image, but I want to be able to see the entire image.
</div> 
```

*编辑*- 这是一个 jsfiddle 来展示它是如何工作的：http: [//jsfiddle.net/Xfxar/](http://jsfiddle.net/Xfxar/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T17:55:23.743

如果要将 div 拉伸到图像大小，请使用

> 背景尺寸：封面；

如果要将图像缩放到 div 大小，请使用

> 背景大小：包含；

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T18:13:58.493

据我所知，您无法检测 CSS 或 JS 中背景图像的高度，因此，您无法将 DIV 渲染到这个未知高度。

但是，如果您使用的是 PHP，则很简单：

```
<?php
$myURL = "http://i.imgur.com/AiAeQyU.gif";
$myImage = getimagesize($myURL);
?>

<div 
style="
background: url('<?php echo $myURL; ?>') 0 0 no-repeat; 
width: <?php echo $myImage[0] . 'px'; ?>; 
height: <?php echo $myImage[1] . 'px'; ?>
">
<p>Your content</p>
</div> 
```

希望有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T17:52:37.750

如果我理解您的要求，您可以在 div 上使用 CSS 规则 width:100% 和 height:100% 来占用父 div 的剩余空间。似乎您正在尝试将背景图像拉伸到设备的大小，并且已经在这样做：通常，如果您希望 DIV 占据整个空间，则可以使用 CSS 中的百分比。我相信如果你在这种情况下将背景图像 div 设置为页面的 100%，以及文本 div，你应该用背景填充整个页面。

# python - 无法使用 ^C 退出

> ID：15073210
> 
> 赞同：2
> 
> 时间：2013-02-25T17:52:01.653
> 
> 标签：python, terminal, pytest

我正在使用 pytest 运行测试，并且在执行测试期间，被 ctrl-C 中断。

无论我 ctrl-C 退出测试会话多少次（我也尝试过 ctrl-D 退出我正在使用的环境），我的终端提示不会返回。

我也不小心按`test.py ^CF^C`了 F ...... F 是否与我被卡在捕获的 stderr 部分并且提示没有返回有关？

是否有任何逻辑解释为什么我被困在这里，如果是这样，是否有任何替代方法可以在不关闭窗口并强制退出会话的情况下退出此状态？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T17:56:45.503

我建议尝试 control-Z。那应该暂停它；然后您可以执行 kill %1 （或 kill -9 %1 ）来杀死它（假设您没有在后台运行其他任何东西）

我猜正在发生的事情（根据个人经验）是您的一个测试正在尝试中运行/除了捕获所有异常（包括控制 c 触发的键盘中断）并且在 while 循环内/忽略异常.

# python - Django 单元测试。简单的例子

> ID：15073227
> 
> 赞同：0
> 
> 时间：2013-02-25T17:52:55.867
> 
> 标签：python, django, testcase, django-testing

我用 Django 学习单元测试。如何为这个函数编写测试？我需要这个例子来理解。

```
@login_required
def datas(request):
    queryset = Data.objects.filter(user=request.user)
    if queryset.count() == 0:
        return redirect('/data/')
    return render_to_response('data_list.html',
                              {'data': queryset},
                              context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T17:59:29.720

```
#imports here

class YourTestCase(TestCase):
    fixtures = ['user-data.json']

    def setUp(self):
        self.client = Client()

    def test_empty_datas(self):
        self.client.login(username='something', password='something')
        response = self.client.get('/path/to/view/')  # or reverse by name
        self.assertEqual(response.status_code, 302,
            'View did not redirect on empty queryset.')

    def test_populated_datas(self):
        self.client.login(username='something', password='something')
        Data.objects.create(some_field=some_value)
        response = self.client.get('/path/to/view/')  # or reverse by name
        self.assertEqual(response.status_code, 200,
            'View did not return a 200.') 
```

...等等。user-data 需要至少包含一个用户，否则您将无法进行身份验证。

# c# - 用户控件c#中的隐藏字段问题

> ID：15073228
> 
> 赞同：0
> 
> 时间：2013-02-25T17:53:04.220
> 
> 标签：c#, javascript, hidden-field

我试图在我的页面中获取许多文件的信息，但是我的 fileUploader、我的文本框和我的 hiddenField 在用户控件中，当我使用 javascript 将值保存到隐藏字段中时，我可以看到它运行，但是当我试图在后面的代码中获取这些值，我失去了所有的值，我需要帮助，但我在那 3 天里工作，我自己找不到解决方案。

我的代码是：

在用户控件中：

```
<table class ="total">
    <tr>
        <td class="texto">
            <asp:Label ID="lblFotos" runat="server" Font-Size="Small" 
                Text="Fotos : "></asp:Label>
        </td>
        <td class="campos">
            <asp:FileUpload ID="fuFotoPropiedad" runat="server"  />
            <asp:Button ID="btnAgregarFoto" runat="server" Height="25px" Text="Agregar" 
                OnClientClick="agregarFoto(); return false;"/>
        </td>
    </tr>
    <tr>
        <td class="total" colspan="2" align="center"> 
            <asp:TextBox ID="txtFotosPropiedad" runat="server" Height="81px" TextMode="MultiLine" 
                Width="299px" ReadOnly="True"></asp:TextBox>
            <asp:HiddenField ID="hdFotosPropiedad" runat="server" />
        </td>
    </tr>
</table> 
```

在 JavaScript 中：

```
function agregarFoto() {
    var fileUploadId = 'ctl00_ContentPlaceHolder1_wucMantenimientoPropiedad1_fuFotoPropiedad';
    var txtFotosPropiedadId = 'ctl00_ContentPlaceHolder1_wucMantenimientoPropiedad1_txtFotosPropiedad';
    var hdFotosPropiedadId = 'ctl00_ContentPlaceHolder1_wucMantenimientoPropiedad1_hdFotosPropiedad';
    var fileUpload = document.getElementById(fileUploadId);
    var txtFotosPropiedad = document.getElementById(txtFotosPropiedadId);
    var hdFotosPropiedad = document.getElementById(hdFotosPropiedadId);
    if (hdFotosPropiedad.value == "") {
        txtFotosPropiedad.value = fileUpload.value;
        txtFotosPropiedad.Text = fileUpload.value;
        hdFotosPropiedad.Value = fileUpload.value;
        hdFotosPropiedad.innetText = fileUpload.value;
    } else {
        txtFotosPropiedad.value = txtFotosPropiedad.value + ";" + fileUpload.value;
        txtFotosPropiedad.Text = txtFotosPropiedad.value + ";" + fileUpload.value;
        hdFotosPropiedad.Value = hdFotosPropiedad.Value + ";" + fileUpload.value;
        hdFotosPropiedad.innetText = hdFotosPropiedad.Value + ";" + fileUpload.value;
    }
    var control = $("#ctl00_ContentPlaceHolder1_wucMantenimientoPropiedad1_fuFotoPropiedad");
    control.replaceWith( control.val('').clone( true ) );
    return false;
} 
```

在后面的代码中：

```
string[] fotos = hdFotosPropiedad.Value.Split(';'); 
```

但是`hdFotosPropiedad.Value`是`null`（空的），谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:49:21.350

JavaScript 区分大小写，因此您分配给了错误的变量。

代替

```
if(hdFotosPropiedad.value == "")
{
    txtFotosPropiedad.value = fileUpload.value;
    txtFotosPropiedad.Text = fileUpload.value;
    hdFotosPropiedad.Value = fileUpload.value;
    hdFotosPropiedad.innetText = fileUpload.value;
}
else
{
    txtFotosPropiedad.value = txtFotosPropiedad.value + ";" + fileUpload.value;
    txtFotosPropiedad.Text = txtFotosPropiedad.value + ";" + fileUpload.value;
    hdFotosPropiedad.Value = hdFotosPropiedad.Value + ";" + fileUpload.value;
    hdFotosPropiedad.innetText = hdFotosPropiedad.Value + ";" + fileUpload.value;
} 
```

和

```
if(hdFotosPropiedad.value == "")
{
    txtFotosPropiedad.value = fileUpload.value;
    hdFotosPropiedad.value = fileUpload.value;       // Note value NOT Value
}
else
{
    txtFotosPropiedad.value = txtFotosPropiedad.value + ";" + fileUpload.value;
    hdFotosPropiedad.value = hdFotosPropiedad.value + ";" + fileUpload.value;
} 
```

因此，您分配给 .value 而不是 .Value。我还删除了 .Text 分配，即因为它们在您发布的代码中没有任何用途。

# wpf - MVVM - Datagrid 行中的视图模型？

> ID：15073231
> 
> 赞同：3
> 
> 时间：2013-02-25T17:53:14.590
> 
> 标签：wpf, mvvm, datagrid, viewmodel

我想写一个小程序来管理文章。pgm 应该在数据网格中显示文章列表。

可以是必须在网格中显示的 500/1000 篇文章。我应该像 josh smith 在他的示例[http://msdn.microsoft.com/en-us/magazine/dd419663.aspx](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)中那样在数据网格行中使用视图模型吗？

我在 joshs 示例中进行了一些测试。所以我把他的customers.xml 文件扩展为800 个客户。-> 应用程序需要一点（更多）时间来启动和关闭它（如果显示单击“显示所有客户”按钮）将需要几秒钟。那么使用视图模型的系统应该是一个沉重的负担吗？有人可以向我解释使用视图模型作为数据网格行而不是文章的优势吗？

什么是更好的方法？

```
public ObservableCollection<ArticleViewModel> AllArticle { get; private set; } 
```

或者

```
public ObservableCollection<Article> AllArticleraw { get; private set; } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T18:43:25.810

是否将 ViewModels 用作 DataGrid 行实际上取决于每行必须具有多少功能。

如果网格是只读的，仅用于显示目的，并且底层数据不会改变，那么 ViewModels 可能对于一行来说是多余的。

但是，如果您的用户可能与该行交互，可能会编辑一行中的值，或者如果该行中的值可能由于外部操作而发生变化，并且您希望这些更改自动反映在网格中，那么您应该考虑视图模型。

请记住，ViewModel 只是为某个目的服务的对象的名称 - 它可以根据您的需要而重或轻。例如，如果您希望您的行立即反映网格中的更改，它可以是一个简单的 POCO，它具有每个行列的属性，然后实现`INotifyPropertyChanged`在其中一个属性值发生更改时通知网格。

不要让 ViewModel 的重量级实现吓跑你远离 MVVM 的概念——只在每个 ViewModel 中实现你需要的特性。

# sql - 连接两个查询

> ID：15073235
> 
> 赞同：-1
> 
> 时间：2013-02-25T17:53:33.453
> 
> 标签：sql, sql-server

我需要将第一个查询的数据用于第二个查询以获得正确的结果，但我无法完成。谁能帮我解决这个问题。

```
 SELECT  [Project Nr], Task, TaskDate
     FROM    (
     SELECT   MSP_EpmProject_UserView.[Project Nr]
        ,MAX(CASE   WHEN [Task Type tempress] = 'Packed' 
                    THEN [Taskdeadline] 
                END) AS Pack
        ,MAX(CASE   WHEN [Task Type tempress] = 'Leave Production' 
                    THEN [Taskdeadline]
                END) AS [Leave Production]
        ,MAX(CASE   WHEN [Task Type tempress] = 'Flight Date' 
                    THEN [Taskdeadline]
                END) AS [Flight Date]
     FROM    MSP_EpmProject_UserView 
        LEFT JOIN MSP_EpmTask_UserView 
            ON MSP_EpmProject_UserView.ProjectUID = MSP_EpmTask_UserView.ProjectUID 
        LEFT JOIN MSP_EpmAssignment_UserView 
            ON MSP_EpmTask_UserView.TaskUID = MSP_EpmAssignment_UserView.TaskUID 
        LEFT JOIN MSP_EpmResource_UserView 
            ON MSP_EpmAssignment_UserView.ResourceUID = MSP_EpmResource_UserView.ResourceUID 
     WHERE (MSP_EpmTask_UserView.TaskIsProjectSummary = 0) 
     GROUP BY MSP_EpmProject_UserView.[Project Nr]

     ) data

     UNPIVOT        (
      TaskDate
      for [Task] in ([Pack],[Leave Vaassen],[Flight Date])
     ) piv 
```

这部分查询必须使用上面查询的数据：

```
 select 
      * 
   from 
      M AllData
   inner join (
     select 
         ROW_NUMBER() OVER (Order by TaskDate) as ProductionOrder, 
        [Project Nr] 
     from 
        M
     where
         task = 'Leave Production'
    )
    ProductionOrder
    on ProductionOrder.[Project Nr] = AllData.[Project Nr]
    Order by
    ProductionOrder 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T17:57:34.963

好吧，您已经遗漏了很多重要的细节，例如您使用的 DBMS 以及您希望如何使用第一个查询，但如果您使用的是 SQL Server 2005+，我建议您查看[Common Table Expressions](http://msdn.microsoft.com/en-us/library/ms190766%28v=sql.105%29.aspx)：

```
with myCTE as
(
   --Your first query
)

--You can now use myCTE in another query...
SELECT * FROM myCTE 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T21:34:06.447

我假设您在谈论相关子查询。[您可以在http://msdn.microsoft.com/en-us/library/ms187638(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms187638(v=sql.105).aspx)上找到一些信息。重点是外部查询连接到内部查询的每次迭代。我希望我能很好地理解你的问题？

# objective-c - 将 NSArrays 从 ViewController 传递给 NSObject 类

> ID：15073238
> 
> 赞同：0
> 
> 时间：2013-02-25T17:53:37.180
> 
> 标签：objective-c, cocoa-touch, nsarray, core-plot

我有一个单视图应用程序，其中 ViewController 包含一个自定义类的 UIView，`CPTGraphHostingView`以便它拥有一个 CorePlot 图。该 UIView 的内容由名为 的 NSObject 子类管理`SimpleScatterPlot`。该`SimpleScatterPlot`对象包含配置图形所需的所有参数（轴范围、标签、点数等）

视图控制器.h

```
#import <UIKit/UIKit.h>
#import "CorePlot-CocoaTouch.h"
#import "SimpleScatterPlot.h"

@interface ViewController : UIViewController
{
    IBOutlet CPTGraphHostingView *_graphHostingView;
    SimpleScatterPlot *_scatterPlot;   
    NSMutableData *dataConexion;
}

@property (nonatomic,strong) NSArray *valor;
@property (nonatomic,strong) NSArray *strAnoMes;
@property (nonatomic,strong) NSArray *indicador;
@property (nonatomic, retain) SimpleScatterPlot *scatterPlot;

@end 
```

在 ViewController.m 中，我有一些方法可以从一些 JSON 数据中初始化一些数组：

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

@synthesize indicador,valor,strAnoMes;

- (void)viewDidLoad
{
    [super viewDidLoad];

    [UIApplication sharedApplication].networkActivityIndicatorVisible = YES;

    NSString *urlString = @"http://xxxx/ios/datosgrafica.php";

    NSURL *url = [NSURL URLWithString:urlString];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    (void)[[NSURLConnection alloc] initWithRequest:request delegate:self];   
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    dataConexion = [[NSMutableData alloc] init];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)theData
{
    [dataConexion appendData:theData];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;

    indicador = [NSJSONSerialization JSONObjectWithData:dataConexion options:nil error:nil];

    // ARRAYS OF INTEREST
    strAnoMes = [indicador valueForKey:@"StrAnoMes"];
    valor = [indicador valueForKey:@"Valor"];

    self.scatterPlot = [[SimpleScatterPlot alloc] initWithHostingView:_graphHostingView andData:pointArray];
    [self.scatterPlot initialisePlot];
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    UIAlertView *errorView = [[UIAlertView alloc] initWithTitle:@"Error" message:@"The download could not complete - please make sure you're connected to either 3G or Wi-Fi." delegate:nil cancelButtonTitle:@"Dismiss" otherButtonTitles:nil];
    [errorView show];
    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;
} 
```

在`SimpleScatterPlot.m`我想使用数组“ `valor`”来配置轴范围，我想使用数组“ `strAnoMes`”在xAxis中绘制自定义标签。

我必须做什么才能将 ViewController 中定义的那些数组传递给 SimpleScatterPlot？

我试过了，`#import "ViewController.h"`但它给了我错误。还有其他想法吗？处理这种情况的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:09:21.617

您可以在 SimpleScatterPlot 中获取两个属性。

简单散点图.h

```
@property (nonatomic, retain) NSArray * strAnoMes;
@property (nonatomic, retain) NSArray * valor; 
```

简单散点图.m

```
@synthesize strAnoMes;
@synthesize valor; 
```

在 ViewController.m 中，在 connectionDidFinishLoading: 中创建散点图后，将值分配给上述属性，如下所示。

```
self.scatterPlot.strAnoMes = strAnoMes;
self.scatterPlot.valor = valor; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T18:34:36.757

一种方法是创建一个简单的数据对象并将其直接传递给您的`SimpleScatterPlot`对象：

数据对象：

```
@interface SimpleScatterPlotData : NSObject
@property (...) NSArray *valor;
@property (...) NSArray *strAnoMes;
@end

@implementaton SimpleScatterPlotData
@synthesize valar;
@synthesize strAnoMes;
-(void)dealloc
{
   ...
   ...
   [super dealloc];
}
@end 
```

`SimpleScatterPlot`在你的类中实现一个加载方法：

```
@interface SimpleScatterPlot
-(void)loadData:(SimpleScatterPlotData *)data;
@end

@implementation SimpleScatterPlot
-(void)loadData:(SimpleScatterPlotData *)data
{
    NSArray *valor = data.valor;
    NSArray *strAnoMes = data.strAnoMes;
    /*
      Do something
    */
}
@end 
```

然后在你的`ViewController`课上：

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;
    indicador = [NSJSONSerialization JSONObjectWithData:dataConexion options:nil error:nil];

    // ARRAYS OF INTEREST
    strAnoMes = [indicador valueForKey:@"StrAnoMes"];
    valor = [indicador valueForKey:@"Valor"];

    SimpleScatterPlotData *data = [[[SimpleScatterPlotData alloc] init] autorelease];
    data.valor = valor;'
    data.strAnoMes = strAnoMes;

    self.scatterPlot = [[SimpleScatterPlot alloc] initWithHostingView:_graphHostingView andData:pointArray];
    [self.scatterPlot loadData:data];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T19:02:26.537

您还可以更改当前初始化程序或将新初始化程序添加到 SimpleScatterPlot 类，以便在分配对象时传递这些数组。因此，您对初始化程序的调用将类似于：

```
self.scatterPlot = [[SimpleScatterPlot alloc] initWithHostingView:_graphHostingView andData:pointArray andValor:valor andstrAnoMes:strAnoMes]; 
```

Then in your initializer you can set the object properties to those passed in values.

# android - 为什么通过操作栏按钮重新加载片段时我的 ivar 变为空

> ID：15073242
> 
> 赞同：0
> 
> 时间：2013-02-25T17:53:46.463
> 
> 标签：android, binding, actionbarsherlock, fragment, ivar

我有一个带有 3 个标签的应用程序。每个选项卡的片段都是使用 SectionsViewPager 创建的。我`Reloadable`用 1 方法创建了一个接口`void reload(Context ctx);`。在 actionBar 上，我添加了一个重新加载按钮。当按下按钮时，我正在检查片段是否实现`Reloadable`，如果实现，我调用`reload(this);`.

到目前为止，一切都很好...

在应用程序中，我之前包含了一个下拉刷新功能，但是因为这感觉不是很“Androidy”，所以我想用上述功能替换它（actionBar 中的重新加载按钮，按下时刷新片段）。顺便说一句，下拉刷新功能运行良好。我已将重新加载功能从`Reloadable`界面重新映射到新功能。

现在我正在测试我的重新加载按钮并且应用程序崩溃了。

该应用程序崩溃，因为在使用重新加载按钮时，我的一个 TextViews 显然没有绑定到我的 ivar。不过，当我使用 pull-to-refresh 时它是绑定的。以下是相关代码：

```
mTextView.setVisibility(isEmpty ? View.VISIBLE : View.INVISIBLE); 
```

当通过actionBar 上`null`的重新加载按钮调用 mTextView 时。使用片段中的 pullToRefresh 功能时，它不为空。这里出了什么问题？

# jquery - 谷歌地图关闭信息框

> ID：15073244
> 
> 赞同：1
> 
> 时间：2013-02-25T17:53:51.150
> 
> 标签：jquery, google-maps, infobox

打开另一个信息框时，我需要关闭一个信息框。我已经看到了很多关于这个的线程，我已经尝试了我读过的所有东西，但没有运气。

我认为我的问题不是信息框的全局变量，但是在我做了一个之后仍然没有运气。但是如果你点击地图，它会关闭所有的信息框，所以不确定为什么会这样，但当你点击另一个标记时却不行？

这是我当前的 JS：

```
var infobox;

function createMap(mapDataTrending, mapDataRestaurants, mapDataBars) {
        //circles for 4sq Trending data
        var cityCircle, cityCircle2, cityCircle3, infobox, infobox2, infobox3;  

        for (var i = 0; i < mapDataTrending.length; i++) { 
            contentString = '<p class="venuename"> ' + mapDataTrending[i].name + '</p>';  
            contentString += '<p class="venueaddress"> ' + mapDataTrending[i].address;
            contentString += '<p class="venuecount"> ' + mapDataTrending[i].count + "  ARE HERE";

            infobox = new InfoBox({
                 content: contentString,
                 //content: document.getElementById("infobox"),
                 disableAutoPan: false,
                 maxWidth: 150,
                 pixelOffset: new google.maps.Size(-140, 6),
                 zIndex: null,
                 boxClass: "infoTrending",
                 boxStyle: {
                    width: "200px"
                },
                closeBoxMargin: "1px",
                closeBoxURL: "img/close-btn.png",
                infoBoxClearance: new google.maps.Size(1, 1)
            });

            var markerIcon = [
                            "img/marker-icon-1.png",
                            "img/marker-icon-2.png",
                            "img/marker-icon-3.png",
                            "img/marker-icon-4.png",
                            "img/marker-icon-5.png",
                            "img/marker-icon-6.png",
                            "img/marker-icon-7.png",
                            "img/marker-icon-8.png",
                            "img/marker-icon-9.png",
                            "img/marker-icon-10.png"
                        ];

        var image = new google.maps.MarkerImage(
            markerIcon[i],
            // This marker is 129 pixels wide by 42 pixels tall.
            new google.maps.Size(18, 18),
            // The origin for this image is 0,0.
            new google.maps.Point(0,0),
            // The anchor for this image is the base of the flagpole at 18,42.
            new google.maps.Point(9, 9)
        );

            var marker = new google.maps.Marker({
                position: new google.maps.LatLng(mapDataTrending[i].lat, mapDataTrending[i].lng),
                anchor: new google.maps.Point(0,32),
                icon: image,
                map: map
            });         

            bindInfoW(marker, contentString, infobox);

        }

        function bindInfoW(marker, contentString, infobox){
            google.maps.event.addListener(marker, 'click', function() {

                if(infobox){
                    infobox.close();
                }

                infobox.setContent(contentString);
                infobox.open(map, marker);

                google.maps.event.addListener(map, 'click', function() {
                    if(infobox){
                        infobox.close();
                    }
                });

            });
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T18:08:40.120

不要在循环中实例化多个`InfoBox`es，而是`mapDataTrending`用一个 empty 全局实例化一个`content`。然后你可以取出局部`infobox`变量，处理程序将使用全局引用。

你的脚本最终应该是这样的：

```
var infobox = new InfoBox({
     content: '',
     disableAutoPan: false,
     maxWidth: 150,
     pixelOffset: new google.maps.Size(-140, 6),
     zIndex: null,
     boxClass: "infoTrending",
     boxStyle: {
        width: "200px"
    },
    closeBoxMargin: "1px",
    closeBoxURL: "img/close-btn.png",
    infoBoxClearance: new google.maps.Size(1, 1)
});

function createMap(mapDataTrending, mapDataRestaurants, mapDataBars) {
    //circles for 4sq Trending data
    var cityCircle, cityCircle2, cityCircle3;  

    for (var i = 0; i < mapDataTrending.length; i++) { 
        contentString = '<p class="venuename"> ' + mapDataTrending[i].name + '</p>';  
        contentString += '<p class="venueaddress"> ' + mapDataTrending[i].address;
        contentString += '<p class="venuecount"> ' + mapDataTrending[i].count + "  ARE HERE";

        var markerIcon = [
                        "img/marker-icon-1.png",
                        "img/marker-icon-2.png",
                        "img/marker-icon-3.png",
                        "img/marker-icon-4.png",
                        "img/marker-icon-5.png",
                        "img/marker-icon-6.png",
                        "img/marker-icon-7.png",
                        "img/marker-icon-8.png",
                        "img/marker-icon-9.png",
                        "img/marker-icon-10.png"
                    ];

    var image = new google.maps.MarkerImage(
        markerIcon[i],
        // This marker is 129 pixels wide by 42 pixels tall.
        new google.maps.Size(18, 18),
        // The origin for this image is 0,0.
        new google.maps.Point(0,0),
        // The anchor for this image is the base of the flagpole at 18,42.
        new google.maps.Point(9, 9)
    );

        var marker = new google.maps.Marker({
            position: new google.maps.LatLng(mapDataTrending[i].lat, mapDataTrending[i].lng),
            anchor: new google.maps.Point(0,32),
            icon: image,
            map: map
        });         

        bindInfoW(marker, contentString);

    }

    function bindInfoW(marker, contentString){
        google.maps.event.addListener(marker, 'click', function() {

            if(infobox){
                infobox.close();
            }

            infobox.setContent(contentString);
            infobox.open(map, marker);

        });
    } 
```

我还删除了`click`每次单击时绑定的第二个处理程序，因为如果您没有任何未绑定的标记，它是多余的和泄漏的`bindInfoW`。

# javascript - 如何中断 onclick 调用并放入我自己的？

> ID：15073245
> 
> 赞同：0
> 
> 时间：2013-02-25T17:53:53.813
> 
> 标签：javascript, jquery, html, redirect

我正在制作一个使用 JavaScript、jQuery 和 jPlayer 制作音频播放列表的网站。我还在慢慢自学 JavaScript，所以我有点困惑。

我在 jPlayer 上有一个链接元素，我想让用户点击它并让它在我的音乐博客上加载相应的帖子。我包含的 jPlayer 和 jQuery 代码都是用简写形式编写的，因此我无法解读实际发生的情况。

我要更改的元素写为`a.jp-playlist-item`. 在 JavaScript 中是否有一种简单的方法来添加一个 onclick 函数，该函数将覆盖 jPlayer 设置的默认函数，以便我可以打开一个新选项卡并将它们重定向到一个站点？

如果您想查看我的网站，它是[http://www.startingtofeelit.com](http://www.startingtofeelit.com)，而我正在尝试制作的链接位于顶级音乐播放器上。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-25T17:56:24.757

您应该使用 preventDefault

```
$(".yourClass").click(function(event) {
  event.preventDefault();
  // DO SOME STUFF
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-25T18:05:58.363

我很抱歉造成误解...... JQuery 选择器在我的最后一个答案中不正确。

只需这样做：

```
$(".jp-seek-bar").replaceWith($(".jp-seek-bar").clone())
$(".jp-seek-bar").click(function(){ 
    alert(1);
    /*WRITE YOU CODE HERE*/
}); 
```

希望能帮助到你

# r - 如何将复杂的方程放入R公式？

> ID：15073246
> 
> 赞同：10
> 
> 时间：2013-02-25T17:53:54.807
> 
> 标签：r, statistics, data-modeling, regression, linear-regression

我们将树的直径作为预测变量，将树的高度作为因变量。此类数据存在许多不同的方程，我们尝试对其中的一些进行建模并比较结果。

但是，我们无法弄清楚如何正确地将一个方程转换为相应的`R` `formula`格式。

中的`trees`数据集`R`可以作为例子。

```
data(trees)
df <- trees
df$h <- df$Height * 0.3048   #transform to metric system
df$dbh <- (trees$Girth * 0.3048) / pi   #transform tree girth to diameter 
```

首先，一个似乎运行良好的方程示例：

![在此处输入图像描述](../Images/7b7fccf480c1dc8bc6dc03392fb94e24.png)

```
form1 <- h ~ I(dbh ^ -1) + I( dbh ^ 2)  
m1 <- lm(form1, data = df)
m1

Call:
lm(formula = form1, data = df)

Coefficients:
(Intercept)    I(dbh^-1)     I(dbh^2)  
27.1147      -5.0553       0.1124 
```

系数`a`和是估计的`b`，`c`这是我们感兴趣的。

现在有问题的方程：

![在此处输入图像描述](../Images/1bd828cbe8515176d81ae154c2a08049.png)

试图像这样适应它：

```
form2 <- h ~ I(dbh ^ 2) / dbh + I(dbh ^ 2) + 1.3 
```

给出一个错误：

```
m1 <- lm(form2, data = df)
Error in terms.formula(formula, data = data) 
invalid model formula in ExtractVars 
```

我猜这是因为`/`被解释为嵌套模型而不是算术运算符？

这不会给出错误：

```
form2 <- h ~ I(I(dbh ^ 2) / dbh + I(dbh ^ 2) + 1.3)
m1 <- lm(form2, data = df) 
```

但结果不是我们想要的：

```
m1
Call:
lm(formula = form2, data = df)

Coefficients:
(Intercept)  I(I(dbh^2)/dbh + I(dbh^2) + 1.3)  
19.3883                            0.8727 
```

outer 中的整个术语只给出了一个系数`I()`，这似乎是逻辑上的。

我们如何将第二个方程拟合到我们的数据中？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-25T18:07:52.010

你有几个问题。（1）您缺少分母的括号`form2`（并且R无法知道您要`a`在分母中添加一个常数，或者实际上将任何参数放在哪里），而且问题更多：（2 ) 你的第二个模型*不是线性*的，所以`lm`不会工作。

修复 (1) 很容易：

```
form2 <- h ~ 1.3 + I(dbh^2) / (a + b * dbh + c * I(dbh^2)) 
```

修正 (2)，虽然有很多方法可以估计非线性模型的参数，但`nls`（非线性最小二乘法）是一个很好的起点：

```
m2 <- nls(form2, data = df, start = list(a = 1, b = 1, c = 1)) 
```

您需要为 中的参数提供起始猜测`nls`。我刚刚选择了 1，但您应该更好地猜测参数可能是什么。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-25T21:57:53.170

假设您使用`nls`的是 R 公式，可以使用普通的 R 函数，`H(a, b, c, D)`所以公式可以是 just`h ~ H(a, b, c, dbh)`并且这样有效：

```
# use lm to get startingf values
lm1 <- lm(1/(h - 1.3) ~ I(1/dbh) + I(1/dbh^2), df)
start <- rev(setNames(coef(lm1), c("c", "b", "a")))

# run nls
H <- function(a, b, c, D) 1.3 + D^2 / (a + b * D + c * D^2)
nls1 <- nls(h ~ H(a, b, c, dbh), df, start = start)

nls1 # display result 
```

绘制输出：

```
plot(h ~ dbh, df)
lines(fitted(nls1) ~ dbh, df) 
```

![在此处输入图像描述](../Images/09e7a5c73ff9cba0d7ff118ca20911e6.png)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-02-25T21:20:20.037

**编辑**：**已修复，不再错误地使用偏移量...**

一个补充@shujaa的答案：

您可以将您的问题从

```
H = 1.3 + D^2/(a+b*D+c*D^2) 
```

到

```
1/(H-1.3) = a/D^2+b/D+c 
```

这通常会弄乱模型的假设（即，如果`H`正态分布且方差不变，则`1/(H-1.3)`不会。但是，无论如何，让我们尝试一下：

```
data(trees)
df <- transform(trees,
            h=Height * 0.3048,   #transform to metric system
            dbh=Girth * 0.3048 / pi   #transform tree girth to diameter
            )
lm(1/(h-1.3) ~ poly(I(1/dbh),2,raw=TRUE),data=df)

## Coefficients:
##                    (Intercept)  poly(I(1/dbh), 2, raw = TRUE)1  
##                       0.043502                       -0.006136  
## poly(I(1/dbh), 2, raw = TRUE)2  
##                       0.010792 
```

`nls`这些结果通常足以为拟合获得良好的起始值。但是，您可以做得比 via 更好`glm`，它使用链接函数来允许某些形式的非线性。具体来说，

```
(fit2 <- glm(h-1.3 ~ poly(I(1/dbh),2,raw=TRUE),
             family=gaussian(link="inverse"),data=df))

## Coefficients:
##                    (Intercept)  poly(I(1/dbh), 2, raw = TRUE)1  
##                       0.041795                       -0.002119  
## poly(I(1/dbh), 2, raw = TRUE)2  
##                       0.008175  
## 
## Degrees of Freedom: 30 Total (i.e. Null);  28 Residual
## Null Deviance:       113.2 
## Residual Deviance: 80.05     AIC: 125.4 
## 
```

您可以看到结果与线性拟合*大致*相同，但不完全一样。

```
pframe <- data.frame(dbh=seq(0.8,2,length=51)) 
```

我们使用`predict`，但需要更正预测以说明我们从 LHS 中减去了一个常数：

```
pframe$h <- predict(fit2,newdata=pframe,type="response")+1.3
p2 <- predict(fit2,newdata=pframe,se.fit=TRUE) ## predict on link scale
pframe$h_lwr <- with(p2,1/(fit+1.96*se.fit))+1.3
pframe$h_upr <- with(p2,1/(fit-1.96*se.fit))+1.3
png("dbh_tmp1.png",height=4,width=6,units="in",res=150)
par(las=1,bty="l")
plot(h~dbh,data=df)
with(pframe,lines(dbh,h,col=2))
with(pframe,polygon(c(dbh,rev(dbh)),c(h_lwr,rev(h_upr)),
      border=NA,col=adjustcolor("black",alpha=0.3)))
dev.off() 
```

![在此处输入图像描述](../Images/a39ba09b8a76b03babd1178271837a83.png)

因为我们在 LHS 上使用了常量（这几乎但不完全适合使用*偏移量*的框架——如果我们的公式是 ，我们只能使用偏移量`1/H - 1.3 = a/D^2 + ...`，即如果常量调整在链接上（逆）比例而不是原始比例），这并不完全适合`ggplot`'s`geom_smooth`框架

```
library("ggplot2")
ggplot(df,aes(dbh,h))+geom_point()+theme_bw()+
   geom_line(data=pframe,colour="red")+
   geom_ribbon(data=pframe,colour=NA,alpha=0.3,
             aes(ymin=h_lwr,ymax=h_upr))

ggsave("dbh_tmp2.png",height=4,width=6) 
```

![在此处输入图像描述](../Images/3ef2a98069e88e9213242fa301c4604d.png)

# php - 多级树

> ID：15073256
> 
> 赞同：-1
> 
> 时间：2013-02-25T17:54:43.123
> 
> 标签：php, mysql, arrays

我有放置菜单项的数据库表。我的表有 3 列：id、parent_id 和 name。我想从这张表中构建树。怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T18:16:21.953

试试这个代码

```
$query = "SELECT * FROM menu_items";
$result = mysql_query($query);

if (mysql_num_rows($result) > 0) {
    $myTreeArray = array();
    while ($row = mysql_fetch_assoc($result)) {
        if(!isset($myTreeArray[$row['parent_id']])){
            $myTreeArray[$row['parent_id']] = array();
        }
        array_push($myTreeArray[$row['parent_id']], array($row['id'] => $row['name']));
    }
}

echo '<pre>';
print_r($myTreeArray);
echo '</pre>'; 
```

这将为您提供一个关联数组，其中包含由其父 ID 索引的菜单项列表。然后，您可以循环`$myTreeArray`并打印列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T18:02:20.053

虽然可以在没有[嵌套集合](http://en.wikipedia.org/wiki/Nested_set_model)的情况下执行此操作，但嵌套集合将使您的查询更加高效。

这里有一些关于如何设置它的好教程：

[http://www.sitepoint.com/hierarchical-data-database/](http://www.sitepoint.com/hierarchical-data-database/) （它实际上并没有使用术语嵌套集，但第 2 页在“修改的预序树遍历”标题下描述了相同的概念）

[http://mycrazydream.net/2009/04/nested-sets-for-category-structure-in-a-mysql-database/](http://mycrazydream.net/2009/04/nested-sets-for-category-structure-in-a-mysql-database/)

# c++ - 从 Vector3f 转换为 Matrix4f

> ID：15073259
> 
> 赞同：1
> 
> 时间：2013-02-25T17:54:51.093
> 
> 标签：c++, eigen

我有以下功能

```
transformShape(Shape& shape, Eigen::Matrix4f transformation); 
```

这显然会改变几何形状，我有一个形式的翻译

```
Eigen::Vector3f 
```

我希望做类似的事情：

```
Eigen::Vector3f myVector = //calculate 
Eigen::Matrix4f mat = Eigen::Matrix4f::Identity();
mat = myVector * mat;
transformShape(shape, mat); 
```

但这是不可能的，因为我将结构与不同维度相乘，所以我的问题是如何将 Vector3f 转换为具有 4 个维度的 Translation 或 Vector

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T19:14:46.947

向量 (x,y,z) 的平移矩阵的形式为

```
1 0 0 x
0 1 0 y
0 0 1 z
0 0 0 1 
```

阅读[http://en.wikipedia.org/wiki/Translation_matrix](http://en.wikipedia.org/wiki/Translation_matrix)

您还可以使用 Eigen::Translation：

```
Vector3f v(1,2,3);
Matrix4f m = Affine3f(Translation3f(v)).matrix(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T18:57:18.147

您可以使用 Eigen::Transform<> 对象代替原始 Matrix4f，该对象封装具有方便功能的 Matrix4f。例如，如果您的变换是仿射的，请使用[Affine3f](http://eigen.tuxfamily.org/dox-devel/group__TutorialGeometry.html)。

```
Affine3f T;
T.matrix() = mat; // T.matrix() gives you full access to the underlying Matrix4f
Vector3f a, b;
a = mat * b; 
```

有关使用 Eigen 进行空间变换的更多详细信息，请参阅上一个链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T18:20:09.613

Vector4 在第 4 个元素中的值应为 0.0。

如果它是 Point3，它将通过使用值 1.0 扩展到 Point4。

此组件称为“w”，搜索“Vector4 w”将给出一些结果，例如： [https ://gamedev.stackexchange.com/questions/14115/do-i-need-the-w-component-in -我的矢量类](https://gamedev.stackexchange.com/questions/14115/do-i-need-the-w-component-in-my-vector-class)

# unix - 使用命令行从上面的目录中选择 Gradle 构建文件

> ID：15073260
> 
> 赞同：1
> 
> 时间：2013-02-25T17:54:51.990
> 
> 标签：unix, command-line, build, directory, gradle

我正在构建一个执行 gradle 构建的 shell 脚本，然后在完成后运行我的 grunt 构建，并且我将此 shell 脚本存储在子目录中，但 graddle 包装器位于文件的根目录中。我的 shell 脚本看起来像这样

```
sh .././gradle ../build.gradle clean build 
grunt build 
```

所以当我从根目录调用脚本时，它看起来像这样

```
$ sh gradle fullbuild 
```

它错误地说

```
Execution failed for task ':fullbuild'. > Process 'command 'sh'' finished with non-zero exit value 127 
```

当我从子目录中的脚本执行第一个命令时，它说

```
FAILURE: Could not determine which tasks to execute. * What went wrong: Task '../build.gradle' not found in root project 'tools'. 
```

我可以从子目录调用 gradle 并使用该目录 build.gradle 文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:04:51.880

使用该`-b`标志，您可以指示要使用的构建文件。尝试

```
sh ../gradle -b ../build.gradle clean build 
```

您还可以指定`-p`标志来指示哪个目录是项目目录。

# ios - 如何更改 box2d 地面主体中地面夹具的边缘

> ID：15073261
> 
> 赞同：2
> 
> 时间：2013-02-25T17:55:00.230
> 
> 标签：ios, cocos2d-iphone, box2d

在玩游戏的过程中，我希望能够改变 Box2D 世界中的地面边缘。我已经创建了一个地面主体，然后我在主体上添加了一个地面固定装置。例如，以下代码将在我的 Box2D 世界中创建一个高于屏幕底部 20 像素的平坦地面：

```
b2BodyDef groundBodyDef;
groundBodyDef.type = b2_staticBody;
groundBodyDef.position.Set(0, 0);
groundBody = world->CreateBody(&groundBodyDef);

b2PolygonShape groundShape;
b2FixtureDef groundFixtureDef;
groundFixtureDef.shape = &groundShape;
groundFixtureDef.density = 0.0;

CGSize screenSize = [CCDirector sharedDirector].winSize;
int num = 2;
b2Vec2 verts[] = {
    b2Vec2(-screenSize.width / 100.0, 20.0 / 100.0),   
    b2Vec2(screenSize.width / 100.0, 20.0 / 100.0)
};

for(int i = 0; i < num - 1; ++i) {
    b2Vec2 offset = b2Vec2(screenSize.width/2/PTM_RATIO,
                           20.0/2/PTM_RATIO);
    b2Vec2 left = verts[i] + offset;
    b2Vec2 right = verts[i+1] + offset;

    groundShape.SetAsEdge(left, right);
    groundBody->CreateFixture(&groundFixtureDef);
} 
```

假设我需要更改 verts 数组以具有不同的地面夹具定义？例如，是否可以在玩家的移动之间动态地将地面抬高 50 像素？我是否需要删除整个地基体并重新创建地基体和夹具，或者我可以删除或修改现有的地基夹具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T22:26:21.580

我发现它可以破坏当前的groundBody，然后创建一个新的groundBody，并且ground fixture可以正常工作。我不知道这是否最适合性能，但它就像我想要的那样工作。

所以基本上，在我比赛的适当时间，我会做以下事情：

```
 world->DestroyBody(groundBody); 
```

然后我重新执行上面问题陈述中显示的代码，将 verts 数组中的 20.0 像素值替换为 50.0 像素值，如下所示：

```
b2Vec2 verts[] = {
    b2Vec2(-screenSize.width / 100.0, 50.0 / 100.0),   
    b2Vec2(screenSize.width / 100.0, 50.0 / 100.0)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T17:22:28.120

将 b2PolygonShape 更改为 b2EdgeShape。

```
CGSize s = [[CCDirector sharedDirector] winSize];
b2EdgeShape groundBox;

// bottom
groundBox.Set(b2Vec2(0.0f,0.0f), b2Vec2(s.width/PTM_RATIO,0.0f));
groundBody->CreateFixture(&groundBox,0); 
```

您不能在运行时更改夹具定义。因此，使用不同的夹具并在运行时切换该主体。

# xamarin.ios - MvvmCross Touch 项目中的自定义可绑定控件

> ID：15073262
> 
> 赞同：2
> 
> 时间：2013-02-25T17:55:00.787
> 
> 标签：xamarin.ios, mvvmcross

我有一个 MvxBaseBindableCollectionViewCell ，它加载一个包含自定义按钮的 xib。我希望能够将此自定义按钮传递给要绑定的 ViewModel。这可能吗？

我正在尝试实现类似`MyButton.ViewModel = ViewModel.ChildViewModel`并将 ViewModel.ChildViewModel.Name 显示为按钮标题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T18:01:47.430

如果你想自定义绑定一个单元格，那么在[http://slodge.blogspot.co.uk/2013/01/uitableviewcell-using-xib-editor.html中有一个教程](http://slodge.blogspot.co.uk/2013/01/uitableviewcell-using-xib-editor.html)

如果您想在该视图中创建一个完全可绑定的 UIButton，那么您可以使用一些继承来执行此操作，例如：

```
[Register("MyButton")]
public class MyButton
    : UIButton
      , IMvxServiceConsumer
{
    private IList<IMvxUpdateableBinding> _bindings;

    private const string BindingText = "SpecialTitle Customer.Name";

    public MyButton()
    {
    }

    public MyButton(IntPtr handle)
        : base(handle)
    {
    }

    protected override void Dispose(bool disposing)
    {
        if (disposing)
        {
            foreach (var binding in _bindings)
            {
                binding.Dispose();
            }
            _bindings.Clear();
        }
        base.Dispose(disposing);
    }

    private object _dc;

    public object DataContext
    {
        get { return _dc; }
        set
        {
            _dc = value;
            if (_bindings == null)
            {
                var binder = this.GetService<IMvxBinder>();
                _bindings = binder.Bind(_dc, this, BindingText).ToList();
            }
            else
            {
                foreach (var binding in _bindings)
                {
                    binding.DataContext = _dc;
                }
            }
        }
    }

    public string SpecialTitle
    {
        get { return this.GetTitle(UIControlState.Normal); }
        set { this.SetTitle(value, UIControlState.Normal); }
    }
} 
```

* * *

**Aside>** MvvmCross v3 "Hot Tuna" 将包含一些帮助类，以使其更简单一些。

# c# - 逻辑或似乎像条件或

> ID：15073266
> 
> 赞同：0
> 
> 时间：2013-02-25T17:55:15.977
> 
> 标签：c#

我有点不清楚条件与逻辑 || 运营商。好吧，看看我刚刚写的内容，让我重申一下：我的代码没有按照条件 OR 和逻辑 OR 之间的差异做它应该做的事情。

我将文本框作为日期字段，默认情况下其文本属性设置为“mm/yyyy”。我的验证器对这个条件和一个空值（如两个引号 /""/ 标记）评估为 true。所以在这一切之后，我正在用这个检查值：

```
if (tbEndDateMo.Text != "mm/yyyy" | tbEndDateMo.Text != "" | tbEndDateMo.Text != string.Empty) 
```

当值为“mm/yyyy”时，它在 IF 内部传递，当值为空时相同。查看此[Microsoft 参考资料](http://msdn.microsoft.com/en-us/library/6373h346.aspx)，我了解其中的区别，并且我认为我基于此编写了代码 - 但它并没有按照我想要的方式工作。如果文本框计算结果为“mm/yyyy”或空白（或空）跳过 IF。我究竟做错了什么？

谢谢，

理庄

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T17:59:08.507

您的条件不正确-有**100% 的机会**，即`tbEndDateMo.Text`不等于`"mm/yyy"` **或**同时为空字符串！

您应该检查：

```
if (tbEndDateMo.Text != "mm/yyyy" && tbEndDateMo.Text != "" && tbEndDateMo.Text != string.Empty) 
```

但是，您应该考虑使用`string.IsNullOrEmpty`方法而不是`== string.Empty`

```
if (!string.IsNullOrEmpty(tbEndDateMo.Text) && tbEndDateMo.Text != "mm/yyyy") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T18:03:26.607

已经指出了您的程序流程的问题。我注意到您声称逻辑 OR 的行为类似于条件或。如果您阅读[此处](http://msdn.microsoft.com/en-gb/library/kxszd0kx%28v=vs.71%29.aspx)的文档，您会发现它只执行逻辑或类型是整数。你能看到吗，它们是布尔值，因此它计算条件 OR :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T17:59:48.910

你的感知逻辑有问题。检查这个：

让 tbEndDateMo.Text 等于 "" 让我们减少表达式

```
tbEndDateMo.Text != "mm/yyyy" | tbEndDateMo.Text != "" | tbEndDateMo.Text != string.Empty
"" != "mm/yyyy" | "" != "" | "" != string.Empty
true | false | false
true 
```

很可能你想要：

```
tbEndDateMo.Text != "mm/yyyy" && tbEndDateMo.Text != "" && tbEndDateMo.Text != string.Empty 
```

~~另外，请记住，没有“逻辑”和“条件”OR/AND。这些被称为“按位”和“逻辑”~~ *）。它们之间的**唯一区别**是非常微妙的。就是|| 并且 && 在不需要时不会计算子表达式，而 | 并且 & 总是评估。所以：

```
MyClass x = null; // intentional

if( x != null && x.Field > 8)  // will NOT throw
        ...

if( x != null & x.Field > 8)  // WILL throw NullReferenceException
        ... 
```

*) 好吧，也许我已经习惯了旧的命名法，无论如何，我写的其余内容都是有效的。

# c# - 将 Visual Studio 的编辑区域限制为仅显示一个函数或方法

> ID：15073271
> 
> 赞同：9
> 
> 时间：2013-02-25T17:55:27.257
> 
> 标签：c#, visual-studio-2010, visual-studio

几年前，当我在 VB 6 中工作时，我可以让编辑器窗口只显示我正在处理的函数/方法——我想念那个。

有没有办法，一个插件，或者一个黑客，可以让我现在做同样的事情？

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T18:04:45.760

看来此功能已被删除。而且没有办法解决它，也许您可​​以考虑为 Visual Studios 制作自己的插件？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T18:07:27.797

我不相信通过官方途径这是可能的。但是，有许多插件可以让您快速跳转到函数/方法。我建议以下几点：

*   右上角有一个“选择成员”下拉列表
*   [CodeMaid](http://visualstudiogallery.msdn.microsoft.com/76293c4d-8c16-4f4a-aee6-21f83a571496)有一个“黑桃”窗口，可以显示文件中的所有项目
*   如果你愿意花钱，[VS10x Code Map v2](http://visualstudiogallery.msdn.microsoft.com/1c54d1bd-d898-4705-903f-fa4a319b50f2)是个不错的选择

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T18:16:58.593

如果我是你，我会将我的类实现为部分类，并将我的稳定代码移动到其中之一，将我的代码实现集中在其中一个类中：

```
public partial class Employee
{
    public void StableFunction()
    {
    }
}

public partial class Employee
{
    public void UnStableFunction()
    {
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-31T03:08:43.243

我最近发布了适用于 Visual Studio 2015 的（商业）[Task Canvas](https://vlasovstudio.com/task-canvas/)扩展，它允许您选择要处理的方法或代码选择。

# c# - 干净地处理舍入/累加错误

> ID：15073273
> 
> 赞同：6
> 
> 时间：2013-02-25T17:55:41.903
> 
> 标签：c#, .net, rounding

我有一个应用程序，我在其中跟踪以 µL 为单位的流体体积。我目前正在使用“双”来存储整个系统中的卷，并且在大多数情况下都可以正常工作。然而，当我开始添加和减去大量这些交易量时，各种累积误差开始蔓延。这些错误的幅度非常小，但它们会导致阈值比较问题，突然交易量比预期的小一点，导致验证失败。我知道这是执行累积浮点运算的一个相当普遍的问题，但我想知道如何最好地解决这些问题。我有几个想法：

1.  我可以用整数替换我所有的双重引用，而是跟踪 nL 中的所有内容。这肯定会解决问题，但这是一个非常具有侵入性的更改。然而，该系统尚未投入生产使用，这意味着现在应用它比以后尝试应用它要容易得多。

2.  我可以使用十进制而不是双精度。这比更改为整数的侵入性要小，但仍需要进行相当大的更改。

3.  我可以要求所有体积比较都允许指定的误差容限。这主要是我现在正在做的事情，但它使比较代码更丑陋，并且需要一些代码审查以确保没有人忘记应用该模式。

4.  我可以在每次计算后执行舍入到指定的容差，以防止错误累积。这使比较更清晰，但现在它在任何有分配的地方都有类似的问题。

对于那些也为这个问题苦苦挣扎的人来说，哪些解决方案最终实施起来最干净？在执行累加计算时，我还应该了解其他问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T18:12:14.403

理想情况下，您希望

*   使用不受舍入（近似）错误影响的数据类型，并且
*   四舍五入到正确的小数位数
*   在正确的时间。

您不需要大范围的双精度浮点数。您*可能*不想使用整数。它们稍快一些，但使用起来更复杂。使用数字或小数。数字和十进制数据类型不受舍入误差或近似误差的影响。但是你的编程仍然不能马虎或马虎；将数值分配给 double 类型的变量会将问题带回给您。

*正确的小数位数*和*正确的时间*意味着什么取决于您的应用程序。正确的小数位数有时可能超过您需要存储为最终值的位数。正确的时间会受到中间计算的数量和性质的影响。

有时，人们所说的*舍入误差*实际上是*近似误差*。如果您告诉计算机将十进制值*r*存储在浮点变量或数据库列中，它实际上将存储最接近*r*的浮点近似值。

[FP算术的规范参考](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)

# plone - 新闻源可以在 Plone 中进行版本控制吗？

> ID：15073285
> 
> 赞同：2
> 
> 时间：2013-02-25T17:56:25.743
> 
> 标签：plone, feed

Plone 中的文章经过作者-编辑-发布者的过程。为什么提要异常？有没有办法通过添加新闻项目流程来处理提要/新闻？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T18:29:48.270

提要遵循相同的模式；他们将根据您在集合中指定的任何标准进行选择。如果您只显示“已发布”的内容，那么关联的 Feed 中也会出现这种情况。

如果您要求为提要本身提供单独的工作流程/批准流程，那不是它的工作方式。（而且我很难看到除了增加更多复杂性和更多过程之外它还能解决什么样的问题：）

# mahout - 我应该为此使用mahout吗？

> ID：15073292
> 
> 赞同：-1
> 
> 时间：2013-02-25T17:57:10.077
> 
> 标签：mahout, recommendation-engine, unsupervised-learning

我想推荐带有标签并分为三个价格类别（便宜、普通和昂贵）的商品。我知道使用 Mahout 推荐可以实现，但这就是我不知道如何使用它的原因。

Mahout 基于其他用户的意见，但我要推荐的所有新项目都只是尚未设置任何偏好的新项目。

Mahout 是解决此问题的正确工具吗？这是基于内容的吗？（哪个 mahout 还不支持？？？？）还是我应该使用分类？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T09:19:23.113

因为我从来没有建立过任何推荐系统——不要太认真地对待这个答案（没有人回答过，所以我试试）

**推荐系统**必须建立在一些已知（或部分已知的数据）之上。如果您只有新的（未见过的）数据，则只能使用一些**聚类算法**来构建一些聚类。

如果这些集群没问题，它们可以用于训练一些推荐系统。

Mahout 只是一个实现各种 ML 方法的工具。您可以使用其他工具，例如 Weka、R、...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T22:49:56.297

如果您根本没有关于新用户的数据，那么无论您做什么，都无法提出建议。零输入可以将这个人与其他任何人区分开来。

然而，好的系统应该能够在第一个输入可用后做一些合理的事情。

这本质上不是分类器问题，不是。它也不是一个聚类工具，尽管有其他答案。

价格类别不是您将使用的任何记录流程的核心。您大概还有其他数据，它是什么？这很重要。

最后是否使用 Mahout 取决于口味。如果你想使用 Java 和 Hadoop，你会使用它。反过来，如果您有非常大的输入，并且很少有人拥有这么多数据（例如至少超过 10M 的数据点），您只会考虑使用 Hadoop。

（嗯，不完全——我在 Mahout 中推荐的文章早于 Hadoop，适用于在线的小型应用程序。如果您使用 Java，您可能确实对此感兴趣。）

# c# - 属性窗口中的用户控件的子属性

> ID：15073294
> 
> 赞同：2
> 
> 时间：2013-02-25T17:57:17.817
> 
> 标签：c#, winforms

我有一个包含 DataGridView 的复合用户控件。此外，该`DataGridView.Modifiers`属性设置为`Public`。

将我的用户控件放到设计器中时，我想在“属性”窗口中查看此内部 DataGridView 的属性。

我该怎么办？非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T18:00:34.307

您的内部 DataGridVIew 需要在复合控件中定义一个实例和一个公共属性，通过它可以访问它。

像这样的东西：

```
// your grid control instantiated somewhere:
DataGridVIew myInnerDataGridVIew = new ...

public DataGridVIew MyInnerDataGridVIew 
{ 
  get { return myInnerDataGridVIew; } 
  set { myInnerDataGridVIew = value; } 
} 
```

创建此属性并重新构建后，当在设计器中选择复合控件时，您应该会在属性窗口中看到一个 MyInnerDataGridVIew 成员，并且它旁边有一个 [+]。单击加号，您应该会看到 DataGridVIew 的属性已展开。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T19:09:41.347

即使其他两个答案也是正确的，我认为更常见的方法是只允许只读访问内部网格实例的引用。

```
public DataGridView DataGrid { get { return this.dataGridView1; } } 
```

这样，您的控件的用户可以访问所有网格属性并覆盖您为其选择的任何默认值（如背景颜色等），但他们不能用新实例替换网格，这可能会弄乱一些内部逻辑你的控制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T18:07:42.210

您需要做的是添加一个公共属性，以便将该控件拖入的任何容器都将其视为一个属性。

简单地说，假设您有 1 个名为 dataGrid1 的静态数据网格。现在要使其在外部可访问（并且在属性框中可见），您需要创建一个将设置并返回它的属性。

```
public DataGridView ChildDataGridView
{
    get { return this.dataGrid1; }
    set { this.dataGrid1 = value; }
} 
```

这将允许您从外部对其进行修改。现在，当您将控件添加到设计器时，当您选择了用户控件时，您应该会看到一个名为 ChildDataGridView 的新属性。

您可以从该属性修改和访问它。

这仅在 dataGrid1 一直存在并且不是在代码中动态生成的情况下才有效。

# jquery-validation-engine - jqueryValidation Engine 内联 ajax 验证停止表单提交

> ID：15073296
> 
> 赞同：0
> 
> 时间：2013-02-25T17:57:26.990
> 
> 标签：jquery-validation-engine

我正在尝试使用 jquery validateEngine 插件验证多部分表单。我可以为所有字段正确验证表单，但是我想更进一步并使用内置的 ajax 验证。我想检查名称与数据库相比是否唯一。此功能正常工作，我得到了预期的结果，但是我无法提交表单，并且通过在表单上的 firebug 控制台中运行验证，即使所有字段都正确，它也会验证为 false。

如果我删除 ajax 验证，表单会正确验证，所以在这个脚本的某个地方设置了一个错误标志，但我只是不知道在哪里查看或覆盖它

验证通过以下方式初始化：

```
if ($.validationEngine) {
        form.validationEngine();
    } 
```

正如我所说的正常验证工作。

我以我的形式将课程设置为：

```
class="input validate[required, ajax[ajaxNameCallPhp]]" 
```

验证引擎中与此方法相关的脚本已更改为：

```
"ajaxNameCallPhp": {
// remote json service location
"url": "http://localhost/greenFees/includes/lib/greenFee/checkName.php",
// error
"alertText": "* This name is already taken",
    "alertTextOk": "* This name is available",
"alertTextLoad": "* Validating, please wait"
                }, 
```

对此问题的任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T20:01:55.527

好的 - 在萤火虫中记录脚本几个小时后设法让它工作......

反正。罪魁祸首部分与另一个脚本有关 - 表单向导将表单转换为向导，它添加了一个下一步按钮，单击该按钮即可运行验证。由于某种原因，从那里调用验证时的行为与表单提交不同。使用 ajax 验证时，如果名称正常、是否已被使用或验证时显示通知，它会显示一个标志。解决方案 1：删除向导脚本，但表单无法正常运行 解决方案 2：删除通知 alertTextLoad - 验证似乎将此标志的存在视为错误而不是信息 - 删除它意味着我可以保留向导 Ta

# playframework - 发挥 Play Framework 2.1 的理想化？

> ID：15073305
> 
> 赞同：3
> 
> 时间：2013-02-25T17:58:21.667
> 
> 标签：playframework, intellij-idea, playframework-2.1

在 Play 1.x 中，有一个很棒的`play idealize`（和`play eclipsify`）为您最喜欢的 IDE 中的 Play 项目准备了项目文件。

我看到这是在 Play 2.X 中删除的。

除了手动做还有什么选择吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-25T17:59:43.430

根据[此页面](http://www.playframework.com/documentation/2.1.0/IDE)，替换很简单`play idea`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-13T16:09:37.907

在 Play 2.x 中

**play Idealize**被**play idea取代**

**play eclipsify**替换为**play eclipse**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-09T16:59:15.903

`play idea`在 play 2.1.1 中对我来说很好用

# cakephp - Cake PHP 时区错误

> ID：15073309
> 
> 赞同：3
> 
> 时间：2013-02-25T17:58:32.060
> 
> 标签：cakephp, timezone

我对蛋糕有一个奇怪的问题。我住在德国。当我添加帖子时，“创建”数据库字段中的时间是 6 小时前。例如，下午 6 点创建的帖子在上午 12 点创建的数据库中显示。我使用托管服务器并联系了将 php.ini 设置为正确时区 Europe/Berlin 的公司。当我请求服务器 php.ini 时，它会正确显示时区“欧洲/柏林”。但是当我运行代码时

```
$timezone = date_default_timezone_get();
echo "The current server timezone is: " . $timezone; 
```

在 CakePHP 中它显示

```
The current server timezone is: America/New_York 
```

我已经尝试在 core.php 中设置：

```
date_default_timezone_set('Europe/Berlin'); 
```

但这根本没有效果。希望有人知道该怎么做。

**编辑1：**

在要求支持运行“locale -a”后，吐出以下内容：

```
# locale -a
C
de_DE
de_DE@euro
de_DE.iso88591
de_DE.iso885915@euro
de_DE.utf8
deutsch
en_US.utf8
german
POSIX 
```

我认为服务器端一切都很好，错误是蛋糕式的。但我不知道下一步该做什么？也许有人可以帮忙。提前致谢。

** 编辑 2：**

在查看了可能是什么之后，我在 Usermanagement-plugin 的 bootstrap.php 中发现了错误，该错误将那里的时区设置为 UTC。所以现在一切正常。还是要谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T18:01:30.677

**编辑：**

如果执行以下答案没有效果（根据 OP），则可能是[这个问题](https://stackoverflow.com/questions/10909911/php-setlocale-has-no-effect)：

> 您运行脚本的服务器上很可能未安装德语语言环境 - 您是否具有对服务器的 shell 访问权限？然后尝试
> 
> 语言环境-a
> 
> 查看安装了哪些语言环境。也看看这里依赖 setlocale 并依赖安装的语言环境是否可行？

* * *

**TLDR：**

你的想法是对的——只要把它放在你的`Config/bootstrap.php`. 而不是你的`Config/core.php.`

**更多详情：**

这很可能与[这个问题](https://stackoverflow.com/questions/13389315/cakephp-created-and-modified-server-time-offset-for-save)相同。它的答案：

> 把它放在你的 Config/bootstrap.php 中：
> 
> date_default_timezone_set('UTC'); //或者无论你的时区是什么
> 
> 它只是基于服务器时间，实际上与 CakePHP 无关 - 所以只需用 PHP 更改默认时区，就可以了。'created' 和 'modified' 将基于指定的时区。

重申一下，“ `created`”和“ `modified`”字段是基于服务器的，实际上与 CakePHP 没有太大关系（听起来您已经正确假设了）。

一个相关的项目（仅供参考）是[CakeTime::convert()](http://book.cakephp.org/2.0/en/core-utility-libraries/time.html#CakeTime::convert)，但在这种情况下，这不是你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T18:01:48.217

在 app_controller 中设置，而不是在 code.php 中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T12:46:44.587

问题解决了。问题出在一个也有 config.php 的插件中。Cake-config 在那里被覆盖。现在一切都很好。

# c# - 直接导出为pdf

> ID：15073313
> 
> 赞同：0
> 
> 时间：2013-02-25T17:58:59.180
> 
> 标签：c#, winforms, crystal-reports-2008

我正在使用两个存储过程，一个用于主报表，另一个用于子报表。下面是代码。

```
 private void LoadSalesOrderReport()
 {
     string Type = gvQuotationDetails.Rows[QuoteIndex].Cells["Type"].EditedFormattedValue.ToString();
     FilePath = ConfigurationManager.AppSettings["EMP_IMG_PATH"].ToString() + "\\" + ValQuoteID.ToString() + ".pdf";
     DeleteExistingFile(FilePath);
     try
     {
         AccountsPayableMaster objAPM = new AccountsPayableMaster();
         QuotationReport obj = new QuotationReport();
         objReportDocument.Load(Application.StartupPath + @"\rptQuotationReport.rpt");
         obj.crysQuotationReport.LogOnInfo = objAPM.ConnectionDetails("SD_SalesOrderReport;1");
         obj.crysQuotationReport.LogOnInfo = objAPM.ConnectionDetails("SD_GetBatchReportDetails;1");
         obj.crysQuotationReport.ReportSource = objReportDocument;
         objReportDocument.SetParameterValue("@QuoteID", ValQuoteID);
         objReportDocument.SetParameterValue("Type", "-" + Type.ToUpper() + "-");
         objReportDocument.SetParameterValue("@QuoteID", ValQuoteID, objReportDocument.Subreports[0].Name.ToString());
         string[] Print = objAPM.GetPrintDetails();
         SetPrintParameters(objReportDocument, Print);
         obj.Show();
         objReportDocument.ExportToDisk(ExportFormatType.PortableDocFormat, FilePath);

     }
     catch (Exception ex)
     {
         MessageBox.Show(ex.Message);
     }
     OpenPdfFile();
 }

 private void OpenPdfFile()
 {
     try
     {
         Process.Start(FilePath);
     }
     catch (Exception ex)
     {
         MessageBox.Show("Please install MicrosoftOffice/Pdf Reader to view files", "", MessageBoxButtons.OK, MessageBoxIcon.Information);
     }
 } 
```

代码工作正常。但问题是。当我单击前端的按钮直接显示 pdf 时。水晶报表表格也显示出来了，我知道原因，因为我在代码中使用**了 obj.Show**。我试图评论它，但它抛出了一个错误。可以一个建议更改我的代码以直接显示 pdf 而不是 Crystalreport 表单。

![在此处输入图像描述](../Images/b566434ec84f885e96ae5e80b2213af4.png)

# javascript - d3 条形图上错误的线数/刻度数

> ID：15073319
> 
> 赞同：3
> 
> 时间：2013-02-25T17:59:21.543
> 
> 标签：javascript, d3.js

我有一个简单的 d3 条形图，我正在尝试在背景中绘制水平线。

图表上的条形代表百分比，全高条形为 100%。我想显示 4 个条形图，分别为 25%、50%、75% 和 100% 水平。但如果我这样做：

```
svg.selectAll('.rule')
    .data(y.ticks(4))
.enter().append('line')
    .attr('class', 'rule')
    .attr('x1', 0)
    .attr('x2', width)
    .attr('y1', y)
    .attr('y2', y); 
```

然后`y.ticks(4)`显示 5 行。如果我将其更改为`3`我得到 2 行。如果我将其更改为，`5`那么我仍然会得到 5 行。[这是 JSFiddle 上的一个示例](http://jsfiddle.net/philgyford/TVNuZ/3/)。

此外，在该脚本的末尾，我尝试添加一个 y 轴，但它只水平显示 - 我如何让它垂直显示？这似乎在我见过的所有例子中都有效。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T18:22:03.707

`ticks()`方法的参数`d3.scale.linear()`只是一个提示。该方法将此用作近似值，但它会选择“漂亮”的值。（见这里：[https](https://github.com/mbostock/d3/wiki/Quantitative-Scales#wiki-linear_ticks) ://github.com/mbostock/d3/wiki/Quantitative-Scales#wiki-linear_ticks ）

如果要显式设置值，则需要实例化 a`d3.svg.axis()`并使用`axis.tickValues()`（就像您在下面所做的那样）。

关于你的第二个问题。该轴有一个默认方向（您正在看到），用作水平 X 轴。您需要调用`.orient("left")`或`.orient("right")`获取垂直轴。请注意，如果您使用“左”方向，您实际上不会看到轴，因为它的数字将从 SVG 的左边缘跑出并被裁剪。因此，一般来说，向 SVG 添加一些填充并在其中移动所有图形是一个好主意。如果您使用“正确”方向，您会看到数字，但通常在这种情况下，您会将轴平移到图表的右侧。

# android - 我应该在哪里存储身份验证令牌在android中

> ID：15073322
> 
> 赞同：1
> 
> 时间：2013-02-25T17:59:38.367
> 
> 标签：android

我需要在哪里存储将在 Android 应用程序中随每个请求提交的身份验证令牌？我要求一个安全的存储位置，例如 iphone 有钥匙串，Android 中是否有等效服务？存储在共享首选项中是否安全？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-06T10:46:06.360

在 Android 4.3+ 中有一个叫做 AndoridKeystore 的东西，它大致相当于 iOS 密钥链。[这](http://nelenkov.blogspot.co.uk/2013/08/credential-storage-enhancements-android-43.html)是一篇很好的博客文章和官方[API 示例项目](https://developer.android.com/samples/BasicAndroidKeyStore/index.html)。

通常，如果您使用`Context.MODE_PRIVATE`它们创建共享首选项，则只能由您的应用程序（或由您的密钥签名的其他应用程序）访问。但是，如果设备已植根，则用户和任何应用程序都可能读取您的应用程序的私人共享首选项。

我帮助创建和维护了一个名为[secure-preferences](https://github.com/scottyab/secure-preferences)的库，以混淆存储在共享首选项中的密钥和值，以使攻击者更难攻击，然后需要对应用程序进行逆向工程（尽管这不是火箭科学）。安全首选项的一个很好的替代方案是由 SQLcipher 支持的 Mark Murphy的[CWAC-prefs 。](https://github.com/commonsguy/cwac-prefs)

# javascript - 在 HTML 文档中使用鼠标滚轮进行 SVG 缩放

> ID：15073324
> 
> 赞同：8
> 
> 时间：2013-02-25T17:59:46.897
> 
> 标签：javascript, html, svg

我正在尝试在 HTML 文档中实现一项功能，该功能允许用户在嵌入式 SVG '框'中拖动和放大...

我找到[了这个](http://www.cyberz.org/blog/2009/12/08/svgpan-a-javascript-svg-panzoomdrag-library/)，但很快意识到该脚本仅适用于纯 SVG 文件......

请记住，我是一名程序员，在过去的半年里一直专门使用汇编语言。从那个跳到这个抽象的环境是一个巨大的进步。

现在我正试图弄清楚缩放部分：

所以我制作了这个 HTML 文件：

```
<html>
<head>
    <title>Forum Risk! v0.0.1</title>
    <script type="text/javascript" src="svglib.js" ></script>
</head>
<body>
    <!-- SVG embedded directly for example purpose... I'm planning to use <embed> -->
    <svg xmlns="http://www.w3.org/2000/svg" version="1.1" onmousewheel="mouseWheelHandler(e);">
        <g id="viewport" transform="matrix(1,0,0,1,200,200)" >
            <circle cx="100" cy="50" r="40" stroke="black" stroke-width="2" fill="red"/>
        </g>
    </svg>
</body> 
```

内容`svglib.js`是：

```
var scrollSensitivity = 0.2

function mouseWheelHandler(e) {

    var evt = window.event || e;
    var scroll = evt.detail ? evt.detail * scrollSensitivity : (evt.wheelDelta / 120) * scrollSensitivity;

    var transform = document.getElementById("viewport").getAttribute("transform").replace(/ /g,"");

    var vector = transform.subString(transform.indexOf("("),transform.indexOf(")")).split(",")

    vector[0] = (parseInt(vector[0]) + scroll) + '';
    vector[3] = vector[0];

    document.getElementById("viewport").setAttribute("transform",
        "matrix(".concat(vector.join(), ")"));

    return true;

} 
```

我使用[http://www.javascriptkit.com/javatutors/onmousewheel.shtml](http://www.javascriptkit.com/javatutors/onmousewheel.shtml)作为参考。

但问题是，一旦我用 Chrome 打开 HTML 文件，SVG 就会出现，但是当我用鼠标滚轮滚动时什么也没有发生......

我完全理解错了吗？

### UPD

修正版[http://jsfiddle.net/dfsq/GJsbD/](http://jsfiddle.net/dfsq/GJsbD/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T18:58:39.567

*解决了！*显然 onmousewheel 属性不能正确处理事件......至少我必须通过 javascript 直接将事件侦听器添加到 SVG 画布以使其工作！

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-02-25T18:32:29.527

通常，用纯 JavaScript 实现这些东西并不是一个好主意。有很多很棒的库可以让你在几行代码中完成这项工作，而且出错的可能性可能要少得多。

想到的一个突出的例子是[d3](http://d3js.org/)。[这个混搭](http://bl.ocks.org/stepheneb/1182434)中的功能似乎正是您想要的。

如果你想为你的应用程序实现类似的东西，你基本上只需要重新计算缩放事件的变换矩阵。d3可以给你鼠标事件数据，也可以简化改变属性的过程。查看源代码并尝试一下！

# vb.net - EventHandler与Delegate的误区

> ID：15073327
> 
> 赞同：2
> 
> 时间：2013-02-25T17:59:49.447
> 
> 标签：vb.net, delegates

请看下面的代码，它按我的预期工作：

```
Partial Class _Default
    Inherits System.Web.UI.Page

    Delegate Sub TestEventHandler(ByVal o As Object, ByVal e As EventArgs)
    Dim alhandler As TestEventHandler = AddressOf TestEventMethod
    Public Event Test1 As TestEventHandler
    Public Event Test2 As TestEventHandler

    Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        AddHandler Me.Test1, alhandler
        AddHandler Me.Test2, alhandler
        RaiseEvent Test1(Me, e)
        RaiseEvent Test2(Me, e)
        RemoveHandler Me.Test1, alhandler
        RaiseEvent Test1(Me, e)
    End Sub

    Public Sub TestEventMethod(ByVal o As Object, ByVal e As EventArgs)
        MsgBox("Test")
    End Sub

End Class 
```

我对以下两个陈述感到困惑：

```
Dim alhandler As TestEventHandler = AddressOf TestEventMethod '1
Public Event Test1 As TestEventHandler '2 
```

> 1) 这就是说 alHandler 的引用是一个指向函数地址的委托。2) 这就是说Test1 是Delegate 类型的事件。事件和处理程序如何成为委托？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T19:30:27.787

正如其他人所说，每种类型的委托都是一种类型，就像它是一个常规类一样。因此，在您的示例代码中，`TestEventHandler`是委托类型。`TestEventHandler`变量可以引用任何对象`TestEventHandler`，就像任何其他变量可以引用其自身类型的任何对象一样。 `TestEventHandler`对象必须被实例化，就像任何其他类型的对象一样。

然而，委托是特殊的，因为您使用不同的特殊语法来声明它们。例如，如果您有以下方法：

```
Public Sub MyMethod(Text As String)
    ' ...
End Sub 
```

您可以创建一个与该方法签名匹配的委托，如下所示：

```
Public Delegate Sub MyMethodDelegate(Text As String) 
```

请记住，这样做只是定义了`MyMethodDelegate`类型。这不会声明该类型的变量，也不会实例化该类型的对象。

然而，VB.NET 语法中有两件事经常引起很多混乱。首先，当你声明一个事件时，你可以使用两种不同的语法：

```
Public Event MyEvent As MyMethodDelegate
Public Event MyEvent(Text As String) 
```

这两行都做同样的事情。第一行使用已定义的委托类型定义事件。第二行实质上是动态定义了一个新的未命名委托，然后将其用作事件的类型。 *（注意，为了简单起见，我使用的`MyMethodDelegate`是 ，但标准规定事件应该有一个发送者和一个事件参数。）* 当一个事件被声明时，把它想象成一个变量。在幕后，它实际上就像一个集合对象，其中包含使用该`AddHandler`函数添加到其中的所有委托对象的列表。

VB.NET 中的第二个令人困惑的事情是，如果需要，当您使用该`AddressOf`函数时，编译器会自动为您实例化一个新的委托对象。因此，例如，当您执行以下操作时：

```
AddHandler myObject.MyEvent, AddressOf MyMethod 
```

它只是输入全文的快捷方式，如下所示：

```
AddHandler myObject.MyEvent, New MyMethodDelegate(AddressOf MyMethod) 
```

后者，在我看来要清楚得多。您实际上在做的是创建该委托类型的新对象并将该委托对象指向该方法，然后将该委托对象添加到事件（由对象类型定义的类似事件集合的变量）。

所以，在你的例子中，这一行：

```
Dim alhandler As TestEventHandler = AddressOf TestEventMethod 
```

会更清楚地写成：

```
Dim alhandler As TestEventHandler = New TestEventHandler(AddressOf TestEventMethod) 
```

它声明一个委托变量，然后将其设置为指向该特定方法的新委托对象。在这种情况下，它只是一个标准的委托变量，而不是一个事件。事件与委托字段/属性非常相似。事件本质上是一个围绕私有委托字段的访问器包装器，就像属性通常包装一个私有字段一样。委托字段和事件之间的最大区别在于事件支持`AddHandler`和`EventHandler`函数，并且事件不能从定义它的类的外部引发/调用。

# css - 当我在 Django 中使用管道压缩所有 css 文件时，如何指定特定于设备的 css 文件？

> ID：15073340
> 
> 赞同：0
> 
> 时间：2013-02-25T18:00:27.917
> 
> 标签：css, django, media-queries, django-pipeline

为了使用 CSS3 媒体查询来创建我的网站的移动版本，我将创建一个用于小屏幕设备的单独 css 文件。如果我不在 django 中使用管道压缩器，我只需在我的主样式表之后添加以下行：

```
<link rel="stylesheet" type="text/css" media="only screen and (max-device-width: 480px)" href="small-device.css" /> 
```

但是现在我正在使用 Django 管道来压缩我所有的 css 文件，包括 jquery、jquery-ui 和我的常规 css 文件，如下所示：</p>

```
PIPELINE_CSS = {
'website-css': {
    'source_filenames': (
        'css/website-ui-theme/jquery-ui-1.8.19.custom.css',
        'css/jquery.lightbox-0.5.css',
        'css/shared.css',
    ),
    'output_filename': 'css/website.css',
    'extra_context': {
        'MEDIA_DOMAIN': settings.MEDIA_DOMAIN,
    },
},
} 
```

因此，我想知道如何将`media="only screen and (max-device-width: 480px)"`信息包含在管道中的新的小型设备特定 css 文件中，以让它知道它仅适用于小型设备。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:14:42.497

将您的媒体查询移动到 CSS 文件本身。

```
@media only screen and (max-device-width: 480px) {

   // Your CSS rules

} 
```

管道只是一个压缩机。它没有任何逻辑来处理条件包含或媒体条件链接标签之类的事情。

它实际上只需要一个文件列表并将它们变成一个巨大的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T18:16:48.383

如果您`small-device.css`的设备很小（通常是这样），那么所有设备是否都获取代码并不重要。特别是因为管道会为您压缩它。在这种情况下，您只需将媒体查询添加到该文件`small-device.css`的末尾并将其添加到该文件，如下所示：`source_filenames`

```
@media only screen and (max-device-width: 480px) {

    /* All your small-device rules go here... */

} 
```

# android - 改变按钮的高度

> ID：15073344
> 
> 赞同：1
> 
> 时间：2013-02-25T18:00:35.507
> 
> 标签：android, android-layout

我正在尝试更改我的应用程序中几个按钮的高度。

![我的应用截图](../Images/dd3d4d33afdfbb5be9f613d89f3c85ac.png)

我尝试设置`@android:color/transparent`为`android:background`并且我也尝试将 a 设置`layout_height`为`16dp`.

我怎样才能给我的按钮一个更小的高度？

这是样式xml：

```
<style name="Theme.PMBAppTheme.TextButton">
    <item name="android:textStyle">bold</item>
    <item name="android:textSize">14sp</item>
    <item name="android:textColor">@drawable/text_button_text</item>
    <item name="android:background">#ff3300</item>
    <item name="android:padding">0dp</item>
    <item name="android:height">20sp</item>
</style> 
```

和布局：

```
 <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/register_btn_privacy"
        android:text="@string/privacy_policy" 
        style="@style/Theme.PMBAppTheme.TextButton"
        /> 
```

`text_button_text`：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:state_focused="true" android:state_pressed="true" android:color="@color/muted_pink_over" />
    <item android:state_focused="false" android:state_pressed="true" android:color="@color/muted_pink_over" /> 
    <item android:color="@color/muted_pink" /> 
</selector> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T18:04:43.443

将按钮的高度设置为 wrap_content：

```
android:layout_height="wrap_content" 
```

这应该将按钮的高度设置为最小值以显示其文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T09:27:27.637

在[Vapor API](http://vapor-api.com)（我刚刚发布的一个 Android 的 jQuery 风格框架）中有一个可以使用的方法，叫做`.size(int,int)`. `View`这会根据其所在容器的类型设置您的大小。所以像：

```
$.Button(R.id.register_btn_privacy).size(int width, int height); 
```

很酷的是，您还可以链接调用来调整`View`. 例如：

```
$.Button(R.id.register_btn_privacy)
.size(50,100)    // set size
.text("Privacy Policy") // set the text
.bgColor(Color.RED)  // set the background color
.color(Color.WHITE);  // set the text color 
```

如果您对[Vapor API 网站](http://vapor-api.com)感兴趣，请查看它，它基本上旨在使 Android 开发人员更容易并且喜欢使用 jQuery。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T15:12:17.760

从你的风格中删除它

```
<item name="android:height">20sp</item> 
```

所以你最终得到

```
<style name="Theme.PMBAppTheme.TextButton">
    <item name="android:textStyle">bold</item>
    <item name="android:textSize">14sp</item>
    <item name="android:textColor">@drawable/text_button_text</item>
    <item name="android:background">#ff3300</item>
    <item name="android:padding">0dp</item>
</style> 
```

`Button`继承自`TextView`并根据`TextView` [android:height](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3aheight)，这可能是准确设置高度并导致它忽略您的`layout_height`.

# c++ - GetTokenInformation 返回 ERROR_INSUFFICIENT_BUFFER

> ID：15073345
> 
> 赞同：0
> 
> 时间：2013-02-25T18:00:36.620
> 
> 标签：c++, windows, winapi

下面的代码返回一个`ERROR_INSUFFICIENT_BUFFER`错误：

```
DWORD dwReturnedDataSize;
if (!GetTokenInformation(hToken,TokenPrivileges,NULL,0,&dwReturnedDataSize))
{
    CloseHandle(hToken);
    return false; 
} 
```

我不知道为什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T18:17:43.517

这是因为您在模式中调用了该函数，它告诉您需要多少字节来检索此句柄的基础令牌信息数据。您现在需要使用返回的数据长度和至少该大小的缓冲区进行第二次调用。

[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/aa446671%28v=vs.85%29.aspx)很有帮助。

> ReturnLength [出]
> 
> 指向变量的指针，该变量接收 TokenInformation 参数指向的缓冲区所需的字节数。如果此值大于 TokenInformationLength 参数中指定的值，则函数将失败并且缓冲区中不存储任何数据。

# c# - 这将是整个网站的全球性吗？

> ID：15073347
> 
> 赞同：0
> 
> 时间：2013-02-25T18:00:41.403
> 
> 标签：c#, asp.net, xpath, xml-parsing

我需要将一个 xml 文件加载到内存中，并使其可用于整个站点。这段代码能做到这一点吗？

如果是这样，将来如何更新这个“缓存”版本？

```
XPathDocument ConvProductDoc;

    ConvProductDoc = Cache["doc"] as XPathDocument;
    if (ConvProductDoc == null) {
        ConvProductDoc = new XPathDocument(HttpContext.Current.Request.MapPath(@"\data\foo\bar\my.xml"));
        Cache.Insert("doc", ConvProductDoc);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:04:54.340

如果您的网站仅在一台服务器上，那么可以。

如果您的网站分布在多台服务器上，则不会。缓存键和数据仅在存储它的服务器上可用。

例如，如果您的服务器位于 Amazon EC2 中，您可以使用 ElastiCache，这将确保缓存在分布式服务器环境中可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T18:05:13.170

是的，ASP.NET`Cache`对象是站点范围的。有很多选项可用于管理`Cache`和设置过期规则等。

要分配/更新 中的值`Cache`，您只需像设置任何值一样设置`Dictionary`它`HashTable`：

```
Cache["doc"] = newValue; 
```

`Cache`您可以在此处的 MSDN 文档中阅读有关该对象的更多信息：http: [//msdn.microsoft.com/en-us/library/aa478965.aspx#aspnet-cachingtechniquesbestpract_topic4](http://msdn.microsoft.com/en-us/library/aa478965.aspx#aspnet-cachingtechniquesbestpract_topic4)

# android - 共享首选项中的变量是否在应用程序中共享？

> ID：15073348
> 
> 赞同：1
> 
> 时间：2013-02-25T18:00:49.463
> 
> 标签：android

我想在两个 android 应用程序之间共享变量，所以我将它存储在共享首选项中，但是当我重新安装存储变量的应用程序时，第二个应用程序没有看到该变量，在两个应用程序之间共享变量并处理的最佳方法是什么其中一个将被重新安装的情况

我用了这段代码

```
SharedPreferences globals_prefs = ctx.getSharedPreferences("globals_prefs", Context.MODE_WORLD_WRITEABLE); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T18:04:14.550

`SharedPreferences`一体式应用程序作为`prefs.xml`文件存储在 Android 文件系统中专用于您的应用程序的单独文件夹中。因此，当您卸载应用程序时，该文件夹也会被删除，因此，`Preferences`您的应用程序制作的所有内容都会被删除。所以更好的方法是使用 Files 将其存储在 sdCard 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T18:04:10.563

> 注意：目前此类不支持跨多个进程使用。这将在稍后添加。

来自 android 开发文档 [http://developer.android.com/reference/android/content/SharedPreferences.html](http://developer.android.com/reference/android/content/SharedPreferences.html)

**公共目录**上的文件或 sqlite 数据库在共享数据时会起到作用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T18:06:09.643

当您卸载应用程序共享首选项并且内部缓存被清除时，唯一的方法是使用外部存储。

# java - Selenium WebDriver 鼠标操作 moveToElement 不会在 Firefox Linux 上引发 mouseout 事件

> ID：15073351
> 
> 赞同：4
> 
> 时间：2013-02-25T18:01:07.397
> 
> 标签：java, firefox, selenium, selenium-webdriver, mouseout

我一直在尝试使用 Selenium WebDriver 和 Firefox 19 在我的网页中测试工具提示。
我基本上是在尝试使用鼠标操作将鼠标悬停在附加了工具提示的元素上，以测试工具提示是否显示并悬停在另一个元素上测试工具提示是否隐藏。第一个操作工作正常，但是当将鼠标悬停在另一个元素上时，工具提示仍然可见。手动测试网页时不会出现此问题。
以前有没有其他人遇到过这个问题？我正在使用 Ubuntu 12.04。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T08:12:16.810

高级操作 API 似乎依赖于本机事件，默认情况下在 Linux 版本的 Firefox 中禁用了本机事件。因此，必须在 WebDriver 实例中显式启用它们。

```
FirefoxProfile profile = new FirefoxProfile();
//explicitly enable native events(this is mandatory on Linux system, since they
//are not enabled by default
profile.setEnableNativeEvents(true);
WebDriver driver = new FirefoxDriver(profile); 
```

此外，在我的情况下，我需要将 WebDriver 升级到 2.31 版，因为`moveToElement`即使显式启用了本机事件， hover() 操作在 2.30 上也无法正常工作。在 Linux 上使用 2.31 版的 WebDriver 和 17 版和 19 版的 Firefox 对此进行了测试。有关更多信息，您可以查看此链接：
[http ://code.google.com/p/selenium/wiki/AdvancedUserInteractions#Native_events_versus_synthetic_events](http://code.google.com/p/selenium/wiki/AdvancedUserInteractions#Native_events_versus_synthetic_events)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T06:00:51.900

我在 Firefox 19 上的 Selenium 2.30 也遇到了这个问题。它在 FF 18.2 上运行良好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-14T19:51:38.710

这是一个简单但方便的方法，带有一个 javascript 调用，它将向您指定的任何元素发送 mouseout() 事件（我更喜欢使用 By 传递它们，但您可以将其更改为您喜欢的任何内容。

我遇到了 Chrome 的问题，其中工具提示在单击后拒绝关闭，并遮挡了附近的其他单击事件，导致它们失败。在这种情况下，这种方法挽救了这一天。希望它可以帮助别人！

```
 /**
 * We need this to close help text after selenium clicks
 * (otherwise they hang around and block other events)
 * 
 * @param by
 * @throws Exception
 */
public void javascript_mouseout(By by) throws Exception {
    for (int i=0; i<10; i++) {
        try {
            JavascriptExecutor js = (JavascriptExecutor)driver;
            WebElement element = driver.findElement(by);
            js.executeScript("$(arguments[0]).mouseout();", element);
            return;
        } catch (StaleElementReferenceException e) {
            // just catch and continue
        } catch (NoSuchElementException e1) {
            // just catch and continue
        }
    }
} 
```

您可以在任何类型的 click() 事件之后调用它，如下所示：

```
By by_analysesButton = By.cssSelector("[data-section='Analyses']");
javascript_mouseout(by_analysesButton); 
```

仅供参考，我的通过带有 try/catch 的 for 循环尝试 10 倍，因为我们的应用程序在 Chrome 中倾向于出现陈旧元素异常，因此如果您没有这个问题，则可以大大减少该方法。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-01-13T09:25:32.897

我有同样的问题。起初我使用`moveToElement()`没有`perform()`. 然后我添加`Firefox Profile`了`setEnableNativeEvents`，但它仍然对我不起作用。最后我以这种方式解决了这个问题（只需添加`perform()`：

```
WebElement 用户名 = driver.findElement(By.id("username"));
动作动作=新动作（驱动程序）；
actions.moveToElement(username).perform();
WebElement tooltip = driver.findElement(By.id("tooltip"));
tooltip.isDisplayed();
```

它工作正常。

# database-design - 我应该为同一平台内的不同 Web 产品创建单独的用户表吗？

> ID：15073353
> 
> 赞同：5
> 
> 时间：2013-02-25T18:01:14.123
> 
> 标签：database-design, relational-database, database-schema

我们为年轻的专业人​​士提供了一个网络产品，让他们可以创建自己的页面来展示他们的专业身份。因此，一个表`users`包含有关用户的信息（电子邮件、密码、姓名），包括他们的凭据和有关其页面的信息（是否高级、页面地址、主题）

现在，我们希望为招聘人员提供注册我们的平台以浏览候选人的可能性。招聘人员也可以是拥有页面的用户，但不是必须的。

现在我们的两种方法：

A/ 创建一个表`recruiters`，其中包含招聘人员的姓名和凭据，如果他们创建了一个站点，则创建一个与表`user_id`连接的列。`ID``users`

*   优点：产品可以很容易地由两个不同的团队单独开发。
*   不方便：如果招聘人员也是用户，则重复名称和凭据。我们需要在更新一个凭据时更新这两个凭据，或者让他们拥有两种不同的电子邮件/密码组合，一种用于他们的用户帐户，一种用于他们的招聘人员帐户。

数据库结构：

```
users
ID name email password group_id premium theme page_address

recruiters
ID name email password company_id user_id 
```

B/ 将招聘人员添加到`users`不同的表中，`group_id`并将有关用户页面的所有信息移动到另一个表中（是否高级，页面地址，主题）。我们还将为招聘人员提供第三张表，其中包含他们特有的任何信息。

*   好处：一张桌子，上面有所有的凭据。
*   不方便：如果我们接触到数百万用户，招聘人员之间的任何查询都必须从一张巨大的表格中提取一小部分。另外：大量加入以获取每个用户的站点信息。

数据库结构：

```
users
ID name email password group_id

pages
user_id premium theme page_address

recruiters
user_id company_id 
```

C/还有其他解决方案吗？

感谢您的投入！

特里斯坦

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-22T14:10:36.173

关系数据库架构不是一门精确的科学，但您可以依靠一些常见的指导方针来做出正确的决定。在您提供的第一个选项中，可以很容易地确定存在列重复的情况。从概念的角度来看，您的专栏很少有完全相同的含义。`password`无论您是否是招聘人员，该栏都用于登录您的网站。这并不总是被认为是一个问题，但它是一个很好的暗示，应该有一个更好的关系模式来设计你的数据模式。

解决这些问题的一个很好的方法是在对象之间建立概念关系。例如 ：

*   `Users`是或不是`Recruiters`将是一种`0..1 <-> 1` 关系或*可选* [的一对一](http://msdn.microsoft.com/en-us/library/4s9x13w7.aspx#dvmscone_to_onerelationships)
*   `Pages`属于 a`Users`将是一种`1 <-> 1`关系或[一对一](http://msdn.microsoft.com/en-us/library/4s9x13w7.aspx#dvmscone_to_onerelationships)
*   `Recruiters`可能有`Pages`一个`0..1 <-> 1`关系或一个*可选* [的一对一](http://msdn.microsoft.com/en-us/library/4s9x13w7.aspx#dvmscone_to_onerelationships)

本练习可帮助您了解如何列出实体和组织*外键*。这是一个很好的第一步，在您的情况下，它为我们提供了三个表`Users`：`Recruiters`和`Pages`。请注意[一对一关系的](http://msdn.microsoft.com/en-us/library/4s9x13w7.aspx#dvmscone_to_onerelationships)*外键*是如何放置在强制[基数](http://en.wikipedia.org/wiki/Cardinality_%28data_modeling%29)表中的。`1`

![在此处输入图像描述](../Images/dd768030c9a38321655f06dad844f681.png)

现在确定将数据列放置在哪里以及是否应该有新表：一个简单的技巧是通过定位您拥有的最衍生实体来编写您的[非规范化](http://en.wikipedia.org/wiki/Denormalization)实体将拥有的所有内容。

![在此处输入图像描述](../Images/1b692f5fb779e7008f1b6ab766ba71a7.png)

这个例子非常明显，但我仍然认为它回答了您的问题以及您对组实体和列重复的疑问。

![在此处输入图像描述](../Images/05801719e01016c4a0ef46ff1650fadf.png)

在这一点上，我意识到我忘记包含`Companies`将这样声明的实体：

*   `Companies`可以有多个`Recruiters`将是一个`1..* <-> 1`关系或[一对多](http://msdn.microsoft.com/en-us/library/4s9x13w7.aspx#dvmscone_to_manyrelationships)

![在此处输入图像描述](../Images/da803e6dc846406221183a82a0384c8a.png)

再一次记住，人们可能并不总是同意这种方法，但考虑到这个小背景；这是一个简单的思路。您一直在寻找的答案是：*列的含义重复提示您应该以不同的方式处理数据模式。*这是一个[小提琴](http://sqlfiddle.com/#!6/53edf/1/2)。

如果您有任何问题或认为这是错误的，请随时发表评论！

# symfony - 为什么 Symfony 2 似乎需要翻译消息的复数形式？

> ID：15073354
> 
> 赞同：1
> 
> 时间：2013-02-25T18:01:21.287
> 
> 标签：symfony, localization, translation, pluralize

给定使用消息占位符对对象的约束，例如

```
/**
 * @Assert\MaxLength(limit = 25, message = "name.length.invalid")
 */
public $name; 
```

在哪里

```
name.length.invalid: 'Please enter a shorter name.' 
```

为什么 Symfony 在尝试渲染具有复数组件的消息时默认强制消息复数规则？如果我在消息上有复数形式（因为最大长度的限制就是这种情况）并且指定了故意非复数形式的消息（如上所述），为什么 Symfony 强迫我指定某种形式的复数形式而不是仅仅使用非- 消息的复数形式？

我不想明确定义复数的范围（例如`'[0, Inf] Please enter a shorter name.'`），因为存在翻译选择应该是隐含的。`'Please enter a shorter name|Please enter a shorter name'`在上述情况下还提供明确的复数选择（例如）是多余的。

有没有更好的方法来处理这种情况或类似的情况？

**注意：**上述案例是说明性的，如果将此消息呈现给实际的最终用户，显然可以进行改进。

同一问题的另一个例子可以在以下问题中看到：[symfony2 中的双重翻译](https://stackoverflow.com/questions/11225497/double-translation-in-symfony2)

# sql - 某些选定列上的连接表在技术上称为什么？

> ID：15073355
> 
> 赞同：0
> 
> 时间：2013-02-25T18:01:29.653
> 
> 标签：sql

```
Select t1.column1,t1.column2,t2.column1,t2.column2 from table1 t1 
join (select column1,min(column2) from table2 group by column1) t2
On table1.column1 = table2.column1 
```

在其他表而不是整个表的某些选择列上连接表。

> 它在技术上叫什么？它被称为子查询吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:05:04.183

是的，这是一个子查询。

这也可以写成：

```
Select t1.column1,
    t1.column2,
    t2.column1 
from table1 t1 
join table2 t2
    On t1.column1 = t2.column1 
```

由于您只使用子查询来返回一列并且您没有使用聚合或其他操作，因此在这种情况下我不会使用子查询。如果您想使用聚合函数，那么有时使用子查询会更容易，因为使用了`group by`：

```
Select t1.column1,
    t1.column2,
    t2.column1 
from table1 t1 
join
(
    select column1, MAX(date) MaxDate
    from table2
    group by column1
) t2
    On t1.column1 = t2.column1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T18:05:40.523

您实际上所做的是加入匿名视图。想象一下，你做了：

```
create view t2 as select column1 from table2

select t1.column1, t1.column2, t2.column1 from table1 t1 join t2 on t1.column1 = t2.column2 
```

这基本上是一样的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T18:35:34.540

这称为“内部等值连接”，因为连接条件是相等的。我不确定“从其他表而不是整个表中选择某些列”是什么意思。连接通常只使用表之间的一列或两列。这些列通常是主键或外键。

此查询只是获取 的`table2.column2`每个值的最小值`table1.column1` *并*过滤掉任何`table1.column1`不在 中的值`table2`。对于这种类型的连接并没有真正的特殊短语。

# php - 为什么我的 $(this).prop('class') 不起作用？

> ID：15073359
> 
> 赞同：1
> 
> 时间：2013-02-25T18:01:41.507
> 
> 标签：php, jquery, html

这就是我想要的：我有多个`<h3>`标签被用作链接来显示常见问题解答的答案。我还添加了一个表单，以防用户在该页面上没有看到任何感兴趣的问题。表单的链接位于页面底部。现在，当用户单击**显示表单**链接时，我希望窗口向下滚动到底部。我已经这样做了，但是当我单击任何链接时，窗口也会滚动到底部。我希望用户仅单击窗口滚动的**显示表单**链接。

这是我到目前为止所拥有的：

```
<body>
<?php
$array = array("link 1","link 2","link 3");
foreach($array as $link)
{
    echo "<h3 class='link'>".$link."</h3>";
    echo "<div>";
    //information to be displayed
    echo "</div>";
}
?>
<h3 class="forms">Show Form</h3>
//form information here
</body> 
```

这是 javscript：

```
<script>
$(document).ready(function(){
    $('h3').click('bind',function() {
        $(this).toggleClass('open').next().slideToggle(500,function(){
            var i = $(this).prop('class');

            if(i == 'forms')
            {
                $("html, body").animate({scrollTop: $(document).height()}, "slow");
            }
        });
    });
});
</script> 
```

我添加了一个警报来验证我的输出，当我单击`<h3 class="forms">`警报时是空白的，但是当我单击其他警报时，警报显示“链接”。有人可以帮我弄清楚为什么单击`<h3 class="forms">`标签时警报显示为空白吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T18:06:37.367

您正在使用链接类而不是 $link 来呼应您的 LI。

另外，使用

```
if ($(this).hasClass("forms")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T18:08:26.703

`.prop()`应该只在访问 DOM 元素的[属性](https://developer.mozilla.org/en-US/docs/DOM/element)而不是属性（如`class`or `style`、`width`等）时使用。如果您想要该类，请`.attr('class')`改用（或者，正如其他人所提到的，您可以使用`.hasClass()`（使用 jQuery）测试元素是否应用了特定类）。

跟进`.prop`vs `.class`：

```
<a href="#foo" class="foo-class" id="foolink">Foo Bar link</a>

var a = document.getElementById('foolink'),
    $a = $(a);

$a.prop('href') // like directly calling a.href
$a.prop('id')  // again, like directly calling a.id
$a.attr('class') // where as it's actually a.className 
```

# javascript - 无法读取未定义的属性“变量”

> ID：15073362
> 
> 赞同：0
> 
> 时间：2013-02-25T18:01:48.507
> 
> 标签：javascript, jquery, arrays, object

我正在导航一个包含对象数组的对象。

当我使用 chrome 的 js 开发者控制台时，我可以从数组的第一项中获取 title 属性，即

```
hello.example.array[0].title 
```

这将返回标题（仅在 js 开发者控制台中）。但是，当我为我编写一个脚本来执行此操作时，我突然收到了以下回复：

```
Cannot read property 'array' of undefined 
```

这是我的js的一个例子

```
var theTitle = hello.example.array[0].title;
console.log(theTitle); 
```

**为什么我的js没有，控制台能正确找到？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:08:41.630

尝试在脚本视图中选择有问题的表达式，然后使用`Ctrl-Shift-E`快捷方式在控制台中进行评估。或者，从脚本视图复制并粘贴到控制台中。或者，将鼠标悬停在脚本视图中表达式的最后一个组件上以查看值。在任何一种情况下，您很可能会发现您输入了错误的内容，或者在与您在控制台中评估表达式的上下文不同的上下文中执行脚本，等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T18:47:38.280

感谢@Barmar，我意识到我需要查看我是如何获取“title”属性的。

我的解决方案是在其他代码的上下文中，以及最初是如何创建对象的。

感谢大家的帮助！

* * *

***6 年后编辑：*** 这篇文章很受欢迎，所以我想我会用更有效的答案更新它......

1.  确保您的 JavaScript 实际上具有对象的范围/上下文。

2.  JS 控制台能够返回它，因为它是在代码运行后执行的。而有问题的 JavaScript 可能会在设置变量之前尝试访问它。

因此，请检查您是否具有正确的范围/上下文，并且代码在设置变量之前没有尝试访问它。

# oauth - 如何使用 oAuth 保护 RavenDB 中的各个数据库？

> ID：15073363
> 
> 赞同：0
> 
> 时间：2013-02-25T18:01:52.673
> 
> 标签：oauth, ravendb

我希望使用单个 RavenDB 服务器为多个应用程序托管多个数据库。不会有很多数据库（可能是 3 个或 4 个），但我想单独保护每个数据库

我正在[查看 Docs](http://ravendb.net/docs/2.0/server/authentication)，我想知道这种安全方法是否适用于 per/db，以及我是否需要做任何特别的事情？

```
store.DatabaseCommands.Put("Raven/ApiKeys/sample",
                           null,
                           RavenJObject.FromObject(new ApiKeyDefinition
                               {
                                   Name = "sample",
                                   Secret = "ThisIsMySecret",
                                   Enabled = true,
                                   Databases = new List<DatabaseAccess>
                                       {
                                           new DatabaseAccess {TenantId = "*"},
                                           new DatabaseAccess {TenantId = Constants.SystemDatabase},
                                       }
                               }), new RavenJObject()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T08:41:05.307

您当然可以只提供对特定数据库的访问权限，是的。只要在 Databases 集合中只有那个 db，ti 就可以了。

当然，您可能希望为每个数据库拥有单独的 API 密钥。

# function - 用于在另一个函数中定义辅助函数的 OCaml 语法？

> ID：15073366
> 
> 赞同：3
> 
> 时间：2013-02-25T18:02:09.663
> 
> 标签：function, syntax, scope, ocaml, helper

如果这是一个愚蠢的问题，我深表歉意，但我是 OCaml 的新手，我无法在任何地方找到这样的例子。有人可以给我一个简单的 Ocaml 语法示例，用于在另一个函数中定义辅助函数吗？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T18:05:53.217

干得好：

```
let outer x y =
  let inner z = x + z
  in inner y 
```

# iphone - 更改 UITableViewCell 的默认样式的子视图类

> ID：15073368
> 
> 赞同：1
> 
> 时间：2013-02-25T18:02:17.993
> 
> 标签：iphone, xcode, cocoa-touch, uitableview, ios6

我目前正在为我的应用程序进行更新。我打算添加的新功能之一需要我替换 a`UILabel`中的 a类`UITableViewCell`。但是，我以前使用 Xcode 中为单元格提供的默认样式之一，并且禁用了替换类的选项。

是否有任何解决方法而无需重写我的大部分代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T18:48:17.187

为了具体做你所要求的，我会使用一些漂亮的Objective-C hacks来改变一些类。就是这样：

1) 创建一个新的 UILabel 子类。对于此示例，我将使用名为`SwizzleLabel`.

2）在这个新标签类中，添加一个方法来应用一些样式（比如将文本颜色更改为您想要的颜色等）。这基本上是 init 方法的替代品。

```
-(void)applyStyles {

    [self setBackgroundColor:[UIColor blueColor]];
    [self setTextColor:[UIColor redColor]];
    [self setHighlightedTextColor:[UIColor orangeColor]];

} 
```

`<objc/runtime.h>`3)在您将要更改此类的任何地方导入（例如，在您的视图控制器中等）。

4) 在您的`cellForRowAtIndexPath:`方法中，创建`Class`.

```
Class newLabelClass = objc_getClass("SwizzleLabel"); 
```

5）交换课程。

```
object_setClass([cell textLabel], newLabelClass); 
```

6）最后应用一些您拥有的自定义样式（基本上是 init 方法的替代品）。

```
[[cell textLabel] performSelector:@selector(applyStyles)]; 
```

现在，您应该看到您已经将标签类完全换成了您的子类。我的最终`cellForRowAtIndexPath:`方法如下所示：

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath   *)indexPath {

    UITableViewCell *cell = [[UITableViewCell alloc] init];

    Class newLabelClass = objc_getClass("SwizzleLabel");
    object_setClass([cell textLabel], newLabelClass);
    [[cell textLabel] performSelector:@selector(applyStyles)];

    [[cell textLabel] setText:@"Testing"];

    return cell;

} 
```

# json - VBA：从 JSON 中创建子字符串并重新格式化为列

> ID：15073370
> 
> 赞同：0
> 
> 时间：2013-02-25T18:02:22.767
> 
> 标签：json, vba, excel, substring

我有来自 Facebook FQL 查询的 JSON 格式的信息并将其粘贴到 Excel 中。这是结果的一部分：

> “数据”： [
> 
> ```
> {
>   "name": "Hilton Head Island - TravelTell", 
>   "location": {
>     "street": "7 Office Way, Suite 215", 
>     "city": "Hilton Head Island", 
>     "state": "SC"
>   }, 
>   "fan_count": 143234, 
>   "talking_about_count": 18234, 
>   "were_here_count": 4196
> }, 
> {
>   "name": "Hilton Hawaiian Village Waikiki Beach Resort", 
>   "location": {
>     "street": "2005 Kalia Road", 
>     "city": "Honolulu", 
>     "state": "HI"
>   }, 
>   "fan_count": 34072, 
>   "talking_about_count": 4877, 
>   "were_here_count": 229999
> }, 
> {
>   "name": "Hilton New York", 
>   "location": {
>     "street": "1335 Avenue of the Americas", 
>     "city": "New York", 
>     "state": "NY"
>   }, 
>   "fan_count": 12885, 
>   "talking_about_count": 969, 
>   "were_here_count": 72206
> }, 
> ```

我正在尝试使用子字符串来解析数据，然后使用“名称、街道、城市、州、fan_count 等”在另一个工作表上创建列。作为列标题。我现在正在尝试仅针对“名称：”执行此操作的代码，但是当它到达 documentText = myRange.Text 的行时出现错误。我无法弄清楚错误是什么。

另一个问题是字符串包含引号。例如，我希望 SecondTerm 为“，但是当我尝试使其等于“”时出现错误，

> 子 Substring_Test()
> 
> ```
> Dim nameFirstTerm As String
> Dim nameSecondTerm As String
> Dim myRange As Range
> Dim documentText As String
> 
> Dim startPos As Long 'Stores the starting position of firstTerm
> Dim stopPos As Long 'Stores the starting position of secondTerm based on first term's location
> Dim nextPosition As Long 'The next position to search for the firstTerm
> 
> nextPosition = 1
> 
> 'First and Second terms as defined by your example.  Obviously, this will have to be more dynamic
> 'if you want to parse more than justpatientFirstname.
> firstTerm = "name"": """
> secondTerm = ""","""
> 
> 'Get all the document text and store it in a variable.
> Set myRange = Sheets("Sheet1").UsedRange
> 'Maximum limit of a string is 2 billion characters.
> 'So, hopefully your document is not bigger than that.  However, expect declining performance based on how big doucment is
> documentText = myRange.Text
> 
> 'Loop documentText till you can't find any more matching "terms"
> Do Until nextPosition = 0
>     startPos = InStr(nextPosition, documentText, firstTerm, vbTextCompare)
>     stopPos = InStr(startPos, documentText, secondTerm, vbTextCompare)
>     Debug.Print Mid$(documentText, startPos + Len(firstTerm), stopPos - startPos - Len(secondTerm))
>     nextPosition = InStr(stopPos, documentText, firstTerm, vbTextCompare)
> Loop
> 
> Sheets("Sheet2").Range("A1").Value = documentText 
> ```
> 
> 结束子

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T20:15:57.360

```
Sub Tester()

    Dim json As String
    Dim sc As Object
    Dim o, loc, x, num

    Set sc = CreateObject("scriptcontrol")
    sc.Language = "JScript"

    json = ActiveSheet.Range("a1").Value
    'Debug.Print json

    sc.Eval "var obj=(" & json & ")" 'evaluate the json response

    'Add some accessor functions...
    '  get count of records returned
    sc.AddCode "function getCount(){return obj.data.length;}"

    '  return a specific record (with some properties renamed)
    sc.AddCode "function getItem(i){var o=obj.data[i];" & vbLf & _
                      "return {nm:o.name,loc:o.location," & vbLf & _
                      "f:o.fan_count,ta:o.talking_about_count," & vbLf & _
                      "wh:o.were_here_count};}"

    num = sc.Run("getCount")
    Debug.Print "#Items", num

    For x = 0 To num - 1
        Debug.Print ""
        Set o = sc.Run("getItem", x)
        Debug.Print "Name", o.nm
        Debug.Print "Street", o.loc.street
        Debug.Print "City", o.loc.city
        Debug.Print "Street", o.loc.street
        Debug.Print "Fans", o.f
        Debug.Print "talking_about", o.ta
        Debug.Print "were_here", o.wh
    Next x

End Sub 
```

**注意：** javascript`getItem`函数不直接返回记录，而是包装数据，以便更改一些 JSON 驱动的属性名称（特别是“名称”和“位置”）。`Name`如果属性名称类似于（或`Location`）之类的“常规”属性，VBA 似乎在处理访问从 javascript 传递的对象的属性时会遇到问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T19:14:58.623

这应该可以工作，尽管您可能需要更改一些工作表名称

```
Sub Test()
    Dim vData() As Variant
    Dim vHeaders As Variant
    Dim vCell As Variant
    Dim i As Long

    vHeaders = Array("Name", "Street", "City", "State", "Fan Count", "Talking About Count", "Were Here Count")

    i = 1
    Do While i <= ActiveSheet.UsedRange.Rows.Count
        If InStr(Cells(i, 1).Text, "{") Or _
           InStr(Cells(i, 1).Text, "}") Or _
           Cells(i, 1).Text = """data"": [" Or _
           Cells(i, 1).Text = "" Then
            Rows(i).Delete
        Else
            Cells(i, 1).Value = Replace(Cells(i, 1).Text, """", "")
            Cells(i, 1).Value = Replace(Cells(i, 1).Text, ",", "")
            Cells(i, 1).Value = WorksheetFunction.Trim(Cells(i, 1).Text)
            i = i + 1
        End If
    Loop

    i = 0
    For Each vCell In Range(Cells(1, 1), Cells(ActiveSheet.UsedRange.Rows.Count, 1))
        If InStr(vCell.Text, "name:") Then
            i = i + 1
            ReDim Preserve vData(1 To 7, 1 To i)
        End If

        If InStr(vCell.Text, "name") Then
            vData(1, i) = Right(vCell.Text, Len(vCell.Text) - InStr(1, vCell.Text, ":"))
        End If

        If InStr(vCell.Text, "street") Then
            vData(2, i) = Right(vCell.Text, Len(vCell.Text) - InStr(1, vCell.Text, ":"))

        End If

        If InStr(vCell.Text, "city") Then
            vData(3, i) = Right(vCell.Text, Len(vCell.Text) - InStr(1, vCell.Text, ":"))

        End If

        If InStr(vCell.Text, "state") Then
            vData(4, i) = Right(vCell.Text, Len(vCell.Text) - InStr(1, vCell.Text, ":"))
        End If

        If InStr(vCell.Text, "fan_count") Then
            vData(5, i) = Right(vCell.Text, Len(vCell.Text) - InStr(1, vCell.Text, ":"))

        End If

        If InStr(vCell.Text, "talking_about_count") Then
            vData(6, i) = Right(vCell.Text, Len(vCell.Text) - InStr(1, vCell.Text, ":"))

        End If

        If InStr(vCell.Text, "were_here_count") Then
            vData(7, i) = Right(vCell.Text, Len(vCell.Text) - InStr(1, vCell.Text, ":"))
        End If
    Next

    'Cells.Delete
    Sheets("Sheet2").Select
    Range(Cells(1, 1), Cells(UBound(vData, 2), UBound(vData))).Value = WorksheetFunction.Transpose(vData)
    Rows(1).EntireRow.Insert
    Range(Cells(1, 1), Cells(1, UBound(vHeaders) + 1)).Value = vHeaders

End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T18:15:45.960

我对第一部分一无所知（根本不熟悉 JSON），但关于第二部分 - 请尝试以下几行：

```
firstTerm = Chr(34) & "name: " & Chr(34)
secondTerm = Chr(34) & "," 
```

或者简单地说 -`Chr(34)`用于您想要的每个双引号。

# html - 用于 HTML/DOM 到 Canvas 转换的最佳 javascript 库

> ID：15073373
> 
> 赞同：0
> 
> 时间：2013-02-25T18:02:32.930
> 
> 标签：html, dom, canvas, converter

我需要一个好的 js 库，它能够在一个实体图像（画布）中连接 2 个画布、一些文本字符串和一些图像。每个元素都有出站 div，也可以旋转和缩放。

实际上它是 T 恤设计构造函数，用户按下“保存”按钮后我需要有完整的图像。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T18:08:51.493

您可以使用[libcanvas](https://github.com/theshock/libcanvas)轻松绘制和操作对象。这是一个快速的开源库。并像这样从画布中获取图像

```
var canvas = document.getElementById("canvas");
var resultImage = canvas.toDataURL("image/png"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T21:50:52.200

我找到了一个解决方案：只需学习一些东西并编写我自己的实用程序来合并我的特定 DOM 结构。效果很好。

还在等待答案，只是好奇。

# r - 访问和重用模型公式 (R)

> ID：15073376
> 
> 赞同：-1
> 
> 时间：2013-02-25T18:02:41.627
> 
> 标签：r, model, glm, lm

我想自动化以下过程。

1.  使用 . 拟合 (lm /glm) 模型`step()`。
2.  提取 (1) 的结果模型中的变量，例如 (X1+X2)，如`Y~X1+X2`
3.  在新的 lm/glm（加上一些新变量）中重新使用 (1) 中的模型。

我了解模型公式可以使用`model$call`或`model$terms`从哪里访问模型公式`model`，例如

```
model <- lm(Y~X1+X2) 
```

但我无法正确提取它并在新模型中重新使用它，例如：

```
model2 <- lm(paste('Z~',model$call[[2]],'+X3',sep="")) 
```

似乎需要对 model$call 进行处理，但我不确定数组的结构以及如何折叠它。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T20:14:14.540

这将为您提供新的公式对象。它们是否正常工作可能仍然存在问题，因为它们具有关联的环境并且您没有提供用于测试的数据集。从 hte update.formula 页面上的示例开始：

```
> ## Annette Dobson (1990) "An Introduction to Generalized Linear Models".
> ## Page 9: Plant Weight Data.
> ctl <- c(4.17,5.58,5.18,6.11,4.50,4.61,5.17,4.53,5.33,5.14)
> trt <- c(4.81,4.17,4.41,3.59,5.87,3.83,6.03,4.89,4.32,4.69)
> group <- gl(2, 10, 20, labels = c("Ctl", "Trt"))
> weight <- c(ctl, trt)
> lm.D9 <- lm(weight ~ group)
> update.formula(lm.D9$call[[2]], .~.)
weight ~ group  # Just to make sure that we got something sensible.
<environment: 0x1212230b0>
> update.formula(lm.D9$call[[2]], Z~.)
Z ~ group
<environment: 0x102799fc8> 
```

似乎使用以下随机排列在我的测试用例上工作`weight`：

```
> Z <- sample(weight)
> lm(update.formula(lm.D9$call[[2]], Z~.), data.frame(Z=Z, group=group) )

Call:
lm(formula = update.formula(lm.D9$call[[2]], Z ~ .), data = data.frame(Z = Z, 
    group = group))

Coefficients:
(Intercept)     groupTrt  
      4.711        0.271 
```

# c# - 从 DbContext 中检索未提交的实体

> ID：15073380
> 
> 赞同：2
> 
> 时间：2013-02-25T18:02:51.233
> 
> 标签：c#, entity-framework, dbcontext

如何从 DbContext 中检索未提交的实体？

考虑以下测试：

```
 [Test]
    public void AddAndRetrieveUncommittedTenant()
    {
        _tenantRepository.Create("testtenant");
        var tenant = _tenantRepository.GetTenantByName("testtenant");

        Assert.AreEqual("testtenant", tenant.Name);
    } 
```

测试失败，因为`tenant`is `null`。

中间有很多具体的业务代码，但归结为：

在我的`Repository`类中，方法`GetTenantByName`最终调用了`GetAll`方法。

```
 public IQueryable<TEntity> GetAll()
    {
        return DbSet.AsQueryable();
    }

    private IDbSet<TEntity> DbSet
    {
        get { return Context.Set<TEntity>(); }
    } 
```

在扩展的类上，`DbContext`我有以下方法：

```
 public new IDbSet<TEntity> Set<TEntity>() where TEntity : class
    {
        return base.Set<TEntity>();
    } 
```

当我设置断点时，`return base.Set<TEntity>();`我可以看到该实体在存储库中可用（通过`local`属性）。

* * *

![在此处输入图像描述](../Images/85ff286aa0d885d552ffece8b165e62a.png)

* * *

如何从我的存储库中检索未提交的实体？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T18:22:15.383

我使用派生自的类`DbContext`并添加以下方法来访问已更改的实体。这也应该告诉您如何访问您的更改实体`DbContext`：

```
public virtual IEnumerable<DbEntityEntry> ChangedEntities
{
    get { return base.ChangeTracker.Entries().Where(e => e.State != EntityState.Unchanged); }
} 
```

`ChangeTracker`是 上的公共属性`DbContext`，因此您也可以从外部类访问此属性：

```
var dirtyEntities = myDbContext.ChangeTracker.Entries().Where(e => e.State != EntityState.Unchanged); 
```

或者，如果您想查找已添加/修改的实体等，您可以获得更具体的信息：

```
var addedEntities = myDbContext.ChangeTracker.Entries().Where(e => e.State == EntityState.Added);
var modifiedEntities = myDbContext.ChangeTracker.Entries().Where(e => e.State == EntityState.Modified); 
```

等等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-12-20T08:36:51.637

只需执行以下简单交易：

```
using (var scope = new TransactionScope(TransactionScopeOption.Required,
                        new TransactionOptions()
                        {
                            IsolationLevel = System.Transactions.IsolationLevel.ReadUncommitted
                        }))
{
    var employees = _context.Employees.ToList();
    scope.Complete();
} 
```

如果您想同步获取数据，请将 TransactionScopeAsyncFlowOption.Enabled 添加到上面的代码中：

```
using (var scope = new TransactionScope(TransactionScopeOption.Required,
                        new TransactionOptions()
                        {
                            IsolationLevel = System.Transactions.IsolationLevel.ReadUncommitted
                        },
                        TransactionScopeAsyncFlowOption.Enabled))
{
    var employees = await _context.Employees.ToListAsync();
    scope.Complete();
} 
```

为简单起见，您可以对上述事务有自己的扩展方法：

```
public static async Task<List<T>> ToListWithNoLockAsync<T>(this IQueryable<T> query, CancellationToken cancellationToken = default)
{
    List<T> result = default;
    using (var scope = new TransactionScope(TransactionScopeOption.Required,
                            new TransactionOptions()
                            {
                                IsolationLevel = System.Transactions.IsolationLevel.ReadUncommitted
                            },
                            TransactionScopeAsyncFlowOption.Enabled))
    {
        result = await query.ToListAsync(cancellationToken);
        scope.Complete();
    }
    return result;
} 
```

并像下面这样简单地使用它：

```
var employees = dbContext.Employees
                          .AsNoTracking()
                          .Where(a => a.IsDelete == false)
                          .ToListWithNoLockAsync(); 
```

# java - Lucene 4.1 中的简单代码抛出 NullPointerException

> ID：15073382
> 
> 赞同：0
> 
> 时间：2013-02-25T18:03:02.930
> 
> 标签：java, lucene

```
Tokenizer tokenizer 
           = new org.apache.lucene.analysis.standard.StandardTokenizer
                                    (Version.LUCENE_41,new StringReader("!!!"));
tokenizer.incrementToken(); 
```

投掷

```
java.lang.NullPointerException
    at org.apache.lucene.analysis.standard.std34.StandardTokenizerImpl34.zzRefill(StandardTokenizerImpl34.java:812)
    at org.apache.lucene.analysis.standard.std34.StandardTokenizerImpl34.getNextToken(StandardTokenizerImpl34.java:1019)
    at org.apache.lucene.analysis.standard.StandardTokenizer.incrementToken(StandardTokenizer.java:180) 
```

这段代码在 Lucene 36 上运行良好，为什么会出现异常

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T17:22:25.863

尽管我使用的是`org.apache.lucene.analysis.TokenStream`. 在 Lucene 源代码中挖掘之后，我发现在调用`reset`之前调用该方法可以`incrementToken`解决问题。

您可以在此处查看以前版本的文档：

[https://lucene.apache.org/core/old_versioned_docs/versions/3_5_0/api/all/org/apache/lucene/analysis/standard/StandardTokenizer.html#reset(java.io.Reader)](https://lucene.apache.org/core/old_versioned_docs/versions/3_5_0/api/all/org/apache/lucene/analysis/standard/StandardTokenizer.html#reset(java.io.Reader))

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T23:20:06.057

也许您在此处发布时替换了传递给生产代码中的 StringReader 的文本，但`"!!!"`对我来说似乎可能导致奇怪的行为。由于字符串完全是标点符号，我不相信那里有任何标记可供它使用。老实说，我不确定`.incrementToken()`在使用没有标记的输入调用时应该做什么。

您是否尝试过使用带有有效令牌的输入？

# html - 单击 html 按钮打开 ios 相机

> ID：15073384
> 
> 赞同：1
> 
> 时间：2013-02-25T18:03:13.320
> 
> 标签：html, ios, iphone, camera

我有一个 html 页面，在其中我有一个名为 open camera 的按钮，它是一个常规按钮。我想知道如何转到 ios 的本机端并通过单击 html 内容打开相机？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T18:25:18.943

从 iOS 6 开始，您可以使用以下代码：

```
<input type="file" accept="image/*" capture="camera">
<input type="file" accept="video/*" capture="camera"> 
```

它将像常规文件上传一样，但相反，它将打开 iPhone 相机并上传此[StackOverflow 答案中提到的图片或视频](https://stackoverflow.com/a/14295860/454165)

# google-api-js-client - Google API 加载回调时间？

> ID：15073385
> 
> 赞同：0
> 
> 时间：2013-02-25T18:03:17.880
> 
> 标签：google-api-js-client

Google javascript API 客户端库脚本在如下部分中加载：

```
<script src="https://apis.google.com/js/client.js?onload=loadBodies" type="text/javascript"></script> 
```

在加载 API 代码时调用 onload 参数中指定的方法。是否保证这也将在 DOM 完成加载之后进行？我的 onload 方法需要通过 ID 找到一个元素并使用从 Google API 获得的数据对其进行修改，我担心我是否可以指望在调用该方法时该元素可用。jsjs

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T16:37:55.987

JS Client 独立于 DOM 加载异步加载，因此无法保证 JS Client 完成加载后 DOM 准备就绪。您可以等待 DOM 加载开始加载 JS 客户端，但为了获得最佳性能，我建议使用 window.onload 回调和 JS 客户端 onload 回调，并在第二个触发时查找您的元素。

# google-api - Google 的 UserInfo API 是否提供任何保证？

> ID：15073386
> 
> 赞同：2
> 
> 时间：2013-02-25T18:03:18.983
> 
> 标签：google-api, google-oauth

几个月前，我们为我们的网站实施了 Google OAuth。到目前为止，两个用户（约 100 个）的用户信息配置文件不完整。我们使用有效令牌调用“ [https://www.googleapis.com/oauth2/v1/userinfo](https://www.googleapis.com/oauth2/v1/userinfo) ?”，响应 json 仅包含 [locale, verify_email, email, id]。

文档（[https://developers.google.com/accounts/docs/OAuth2Login#userinfocall](https://developers.google.com/accounts/docs/OAuth2Login#userinfocall)）并不明确，但我解释它们的方式，

回复应始终包括：[id、email、verified_email、name、given_name、family_name、timezone、gender] 有时包括：[picture、locale]

有谁知道 UserInfo API 有什么样的保证？我应该拒绝不完整的个人资料为无效吗？对于配置文件不完整的原因，还有其他解释吗？

**更新 3/6/14**
我能够复制问题。我们将用户发送到谷歌请求，两个范围：

[https://www.googleapis.com/auth/userinfo.profile](https://www.googleapis.com/auth/userinfo.profile)
和
[https://www.googleapis.com/auth/userinfo.email](https://www.googleapis.com/auth/userinfo.email)

据我所知，谷歌不允许用户挑选他们允许的范围。要么全有，要么全无。但是，我能够从 URL 中删除 userinfo.profile 范围并重新加载页面。这导致我被送回一个有效的令牌，但不是正确的范围。我需要点击 tokeninfo 端点并确保已授权正确的范围。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T20:55:44.583

**注意：这就是我的想法**：

我现在也已经使用 OAuth 一段时间了，例如在 Facebook 个人资料中遇到过这个问题。老实说，我不明白为什么请求应该返回不完整的数据（假设范围是正确的），除了来自提供者的实际配置文件是不完整的（尽管你没有这个`[locale, verified_email, email, id]`没有意义`[firstName, lastName]`）。例如，某些个人资料没有个人资料图片等

总而言之，我会说：不能保证（这不仅仅是谷歌特有的）。我之前写过一个 OAuth 身份服务器，并且 OAuth 什么都不做（除非我错过了它）来强制执行您必须通过 API 公开的数据类型。您应该在存储数据之前检查数据。

而**拒绝个人资料部分**，我认为这应该是您在应用程序中设置的标准，例如说您不接受不接受个人资料`firstName`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T15:56:21.877

你也在使用 OpenID 吗？我强烈怀疑这些用户实际上没有 UserInfo 的有效 OAuth 令牌，而是您正在获取与较弱的 OAuth 权限相对应的数据。理想情况下，询问这些用户您网站的哪些数据显示在他们的 Google 帐户安全页面中，并将其与功能用户（例如您自己）的数据进行比较。

尝试撤销您的令牌并点击端点，看看您会得到什么结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-31T16:40:07.633

我有同样的问题。对于某些配置文件，“userinfo”范围不返回 given_name 和 family_name。在我找到原因之前，当没有返回值时，我对这两个使用空白字符串。我不能假设谷歌让人们创建谷歌帐户而不提供名字和姓氏的一些值。Google API 有缺陷、缓慢且令人困惑。所以我宁愿假设这是 API 问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-06T03:59:48.750

尝试用户信息 API 的 v3，它`given_name`为我返回了相当可靠的结果：

[https://www.googleapis.com/oauth2/v3/userinfo](https://www.googleapis.com/oauth2/v3/userinfo)

# ms-access - 参数太少。预计 1

> ID：15073392
> 
> 赞同：0
> 
> 时间：2013-02-25T18:03:38.003
> 
> 标签：ms-access, vba

我有一些 VBA 代码可以根据查询的内容生成 HTML 报告。查询日期是通过使用以下标准的框的内容确定的。

```
 Forms![frmImport]![Flash] 
```

当我以这种方式设置时，它给了我参数太少的错误。如果我设定标准说，2013 年 2 月 20 日，它工作得很好。我假设这与 VBA 解释查询条件的方式有关。

下面是我的代码中 VBA 似乎不喜欢的部分。

```
Dim db As DAO.Database
Dim QUERY As DAO.Recordset

Set QUERY = db.OpenRecordset("qryFlash") 
```

我不确定是否需要在 Set 行中添加更多内容，以便 VBA 能够很好地处理此查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:45:19.717

尝试

```
Dim qdf As DAO.QueryDef
Dim prm As DAO.Parameter
Dim rs As DAO.Recordset

Set qdf = CurrentDb.QueryDefs("qryFlash")
For Each prm In qdf.Parameters
    prm.Value = Eval(prm.Name)
Next prm
Set rs = qdf.OpenRecordset(dbOpenDynaset) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T21:13:37.807

最终只是构建 SQL 字符串而不是使用查询。解决了我的问题。

# c++ - 实际上存储在一个字节的空 C++ 类中的是什么？

> ID：15073396
> 
> 赞同：0
> 
> 时间：2013-02-25T18:04:05.390
> 
> 标签：c++, class, sizeof

如果您将创建一个完全空类的对象，则它的大小将> 0，如标准所保证的（以便两个对象具有不同的地址）。但我很感兴趣这个字节中存储了什么（一些值、索引、地址）？有什么方法可以知道这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:08:56.470

从技术上讲，那里存储的是**Unspecified**。
简而言之，它由实施决定，实施不需要记录行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T18:09:35.337

它与用于填充例如 a`char`和`int`成员之间的间隙的任何其他填充物具有相同（未知、未定义）的内容。与“空白填充物”一样，它除了“确保数据的放置有效”之外没有其他目的。如果空类的大小为零，则由两个此类对象组成的数组将占用零字节，并且两个对象将具有相同的地址，这对于各种事物来说都会变得相当奇怪。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T18:08:07.873

如果我没记错的话，标准保证空类的对象将占用空间。它没有确切说明有多少空间，也没有说明存储在那里的内容，所以这取决于实施者。

如果您想知道给定空间中有什么，您可以重新解释 cast 并查看一下。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T18:08:27.280

没什么，它只是填充。您不能依赖存储在那里的值，甚至根本不能依赖任何值，就像任何其他填充一样。

# iphone - iPhone Twitter 应用程序链接共享 - 不去移动网站

> ID：15073399
> 
> 赞同：0
> 
> 时间：2013-02-25T18:04:19.073
> 
> 标签：iphone, mobile, twitter

在我的网站上，用户可以链接到他们上传的照片。如果浏览器被检测为移动浏览器，它们将被路由到正确的移动友好页面。如果浏览器不是，它们将被定向到常规浏览器页面。当我在 twitter 上分享链接时，iphone twitter 应用程序会显示正确的链接，但有时会打开非移动网站。如果我从 iphone twitter 应用程序“在 safari 中打开”，safari 会显示正确的移动页面。如果我然后在 iphone 上返回 twitter，并重新选择链接，它会在 twitter 浏览器中显示正确的移动页面。有人知道这是为什么吗？显然它取决于 safari 的功能，但我怎样才能让第一次“点击”显示正确的页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T13:59:06.313

将此归咎于糟糕的编码。我用于解析 http 标头的技术在检测移动浏览器时存在拼写错误。我有两条规则需要检查。Safari 属于第二条规则，并且必须缓存该站点，我相信这就是 Twitter 浏览器在此之后工作的原因。一切都已得到纠正和测试。

# c# - 排序 PointF 数组

> ID：15073401
> 
> 赞同：2
> 
> 时间：2013-02-25T18:04:23.613
> 
> 标签：c#, sorting

任何人都可以帮助我创建一个算法、IComparer 或一些可以对数组或`PointF`元素列表进行排序的方法。假设我`PointF`的数组中有以下元素：

*   [0] { **X** = 50.0 **Y** = 0.0}
*   [1] { **X** = 100.0 **Y** = 100.0}
*   [2] { **X** = 0.0 **Y** = 100.0}
*   [3] { **X** = 100.0 **Y** = 0.0}
*   [4] { **X** = 0.0 **Y** = 0.0}
*   [5] { **X** = 100.0 **Y** = 50.0}
*   [6] { **X** = 50.0 **Y** = 100.0}

我想要实现的是：

*   **首先是Y**和**X**最低的元素
***   **仍然是 Y**最低但**X**会变大的元素*   然后，随着在这个最低**Y**处的最高可能**X**得到实现，所有具有此**X的元素都会消失，但****Y**越来越大*******   随着 top **Y**和 top **X**的实现，它将从 top **X**和 top **Y**的元素到仍然 top **Y的元素，但****X**越来越低********

 ******所以这个排序后的数组看起来像这样：

*   [4] { **X** = 0.0 **Y** = 0.0}
*   [0] { **X** = 50.0 **Y** = 0.0}
*   [3] { **X** = 100.0 **Y** = 0.0}
*   [5] { **X** = 100.0 **Y** = 50.0}
*   [1] { **X** = 100.0 **Y** = 100.0}
*   [6] { **X** = 50.0 **Y** = 100.0}
*   [2] { **X** = 0.0 **Y** = 100.0}

意思是，最后，如果我要使用这些点来绘制这些点，`Graphics.DrawPolygon()`我会得到一个封闭的多边形（在这种情况下是一个矩形），没有线相互交叉。

感谢您的时间

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T18:19:06.107

您想要的算法是格雷厄姆扫描。你可以在这里读到它：

[http://en.wikipedia.org/wiki/Graham_scan](http://en.wikipedia.org/wiki/Graham_scan)

juharr 的评论是正确的；您将无法做到这一点，`IComparable`因为*这不是比较排序问题*。要使比较排序起作用，您需要能够比较任意两个元素的相对大小。

一个更简单但更慢的算法是礼品包装算法：

[http://en.wikipedia.org/wiki/Gift_wrapping_algorithm](http://en.wikipedia.org/wiki/Gift_wrapping_algorithm)

仅供参考，您正在寻找的形状称为*凸包*。这将在搜索算法时为您提供帮助。******

# javascript - 如何使确认框具有与取消和确定不同的按钮

> ID：15073402
> 
> 赞同：1
> 
> 时间：2013-02-25T18:04:23.373
> 
> 标签：javascript

我想知道如何使确认框具有与取消和确定不同的按钮

```
function start(){ 

confirm ("Hello how are you")buttons("Fine", "Not good");

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:07:13.713

在快速谷歌搜索后，我找到了使用 Jquery 创建自定义对话框的[教程。](http://www.queness.com/post/1696/create-a-beautiful-looking-custom-dialog-box-with-jquery-and-css3)

# php - 方法的默认参数，方法？

> ID：15073403
> 
> 赞同：0
> 
> 时间：2013-02-25T18:04:27.187
> 
> 标签：php, codeigniter-2

我有一个源代码，但我有一个问题。

你可以在这里找到源代码：http: [//pastebin.com/6JHkTFEv](http://pastebin.com/6JHkTFEv)

错误在这里：http: [//i.imgur.com/V4pPZkI.png](http://i.imgur.com/V4pPZkI.png)

为什么总是给我这个错误信息？

问题出在这一行中：

```
public function upload_sms_data( $sms_id, $prefix, $uzenet, $telefonszam, $kategoria, $ip_address = $this->get_client_ip()) { 
```

程序由最后一个参数停止：`$ip_address = $this->get_client_ip()`

我可以为方法的方法提供默认参数吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:08:14.230

您可以提供默认值，但不能提供需要运行时计算或执行的默认值，例如函数调用的结果

```
public function upload_sms_data( $sms_id, $prefix, $uzenet, $telefonszam, $kategoria, $ip_address = NULL ) { 
    if ($ip_address === NULL) {
        $ip_address = $this->get_client_ip();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T18:06:10.097

您不能将参数的默认值设置为函数调用的结果。它必须是一个值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T18:06:29.563

不，你不能那样做。最好的办法是`null`作为默认值，然后在方法内部，如果该参数为空，则使用 getter。

```
upload_sms_data( $sms_id, $prefix, $uzenet, $telefonszam, $kategoria, $ip_address = null ) { 
   $ip_address = $ip_address === null ? $this->get_client_ip() : $ip_address;
} 
```

# javascript - 检查单选按钮是否被选中，不工作

> ID：15073408
> 
> 赞同：0
> 
> 时间：2013-02-25T18:04:50.860
> 
> 标签：javascript, html, forms

当我选中一个单选按钮时，它返回 false 选项，它应该返回值

```
<form name="formulario" action="accion.php" method="post">
    <input type="radio" name="opcion" value="1">Opcion 1
    <input type="radio" name="opcion" value="2">Opcion 2
    <input type="button" name="Enviar" value='eviar' onclick="enviar();">
</form>
<script>
function enviar(){
    var di = document.getElementsByName('opcion');
    for(i=0; i <di.length; i++){
        if(di[i].checked==true){
            valorSeleccionado = di[i].value;
            alert(valorSeleccionado);
        }
        if(di[i].checked==false){
            alert('you didn´t choose a option');
        }
    }
}
</script> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T18:17:05.140

试试这个：

```
function enviar() {
    var di = document.getElementsByName('opcion');
    var valid = false;
    for (i = 0; i < di.length; i++) {
        if (di[i].checked == true && !valid) {
            valorSeleccionado = di[i].value;
            valid = true;
            alert(valorSeleccionado);
        }
    }
    if (!valid) {
        alert('you didn´t choose a option');
    }
} 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/VS6T7/)**

它只是通过单选按钮运行并检查是否选中了一个。如果是这样，它会设置一个标志并警告该值，如果不是，则警告该错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T18:10:19.033

为了知道选择了哪个收音机，您应该检查“opcion”元素的值。我认为选中的属性不适用于收音机，仅适用于复选框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T18:17:54.710

你应该把你的 JS 函数放在 html 之前。另外，您的验证不是很精确..

这是您更正的代码：

```
<script type="text>
function enviar(){
    var valorSeleccionado = '';
    var di = document.getElementsByName('opcion');
    for(i=0; i <di.length; i++){
        if(di[i].checked==true) {
            valorSeleccionado = di[i].value;
        }
        if(valorSeleccionado) {
            alert(valorSeleccionado);
        } else {
            alert("you didn't choose an option");
        }
        }
}
</script>

<form>
    <input type="radio" name="opcion" value="1" />Opcion 1
    <input type="radio" name="opcion" value="2" />Opcion 2

    <input type="button" value="eviar" onclick="enviar();" />
</form> 
```

# xcode - iOS 分发失败的代码设计

> ID：15073413
> 
> 赞同：0
> 
> 时间：2013-02-25T18:05:04.260
> 
> 标签：xcode, app-store, distribution, code-signing, xcode4.6

我正在尝试将我的应用程序部署到商店，但遇到了可怕的代码签名问题。我已经在本地计算机上刷新了所有配置文件等（我希望我不必在配置门户中重新制作它们），但仍然没有运气。我的应用确实使用了 plist 中定义的后台位置检查，但除此之外，我不知道它可能指的是哪些不允许的权利。唯一可能的其他问题可能是我在开发过程中重命名了我的应用程序，但我已经更新了我的所有配置文件、目标信息等以匹配新名称。我不知所措。我可以很好地构建和运行它，它只是不会签名。请参阅下面的完整警告日志：

```
Validate /Users/benchirlin/Library/Developer/Xcode/DerivedData/Yodlr-blhadxxlldqhvobcgzqdncvvaoao/Build/Intermediates/ArchiveIntermediates/Yodlr/InstallationBuildProductsLocation/Applications/Yodlr.app
    cd "/Users/benchirlin/Documents/Workspaces/Xcode Workspace/iFM"
    setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    setenv PRODUCT_TYPE com.apple.product-type.application
    /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/Validation /Users/benchirlin/Library/Developer/Xcode/DerivedData/Yodlr-blhadxxlldqhvobcgzqdncvvaoao/Build/Intermediates/ArchiveIntermediates/Yodlr/InstallationBuildProductsLocation/Applications/Yodlr.app

warning: Application failed codesign verification.  The signature was invalid, contains disallowed entitlements, or it was not signed with an iPhone Distribution Certificate. (-19011)Executable=/Users/benchirlin/Library/Developer/Xcode/DerivedData/Yodlr-blhadxxlldqhvobcgzqdncvvaoao/Build/Intermediates/ArchiveIntermediates/Yodlr/InstallationBuildProductsLocation/Applications/Yodlr.app/Yodlrcodesign_wrapper-4.1: using Apple CA for profile evaluation/Users/benchirlin/Library/Developer/Xcode/DerivedData/Yodlr-blhadxxlldqhvobcgzqdncvvaoao/Build/Intermediates/ArchiveIntermediates/Yodlr/InstallationBuildProductsLocation/Applications/Yodlr.app: valid on disk/Users/benchirlin/Library/Developer/Xcode/DerivedData/Yodlr-blhadxxlldqhvobcgzqdncvvaoao/Build/Intermediates/ArchiveIntermediates/Yodlr/InstallationBuildProductsLocation/Applications/Yodlr.app: satisfies its Designated Requirementtest-requirement: code failed to satisfy specified code requirement(s)codesign_wrapper-4.1: failed to execute codesign(1) - (null 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T19:09:28.540

我将我的代码签名身份切换为我的通配符分发身份，它工作了......终于！

# python - 比较字典列表中多个元素的 Pythonic 方法

> ID：15073415
> 
> 赞同：2
> 
> 时间：2013-02-25T18:05:05.617
> 
> 标签：python

我有一个**Python**字典列表。列表的每个元素都有一个`type`带有元素类型的键。像这样的东西：

```
e1 = {"type": 1, "value": 23.1}
e2 = {"type": 1, "value": 21.1}
e3 = {"type": 2, "value": -10.1}
e4 = {"type": 1, "value": -2.59}
l = [e1, e2, e3, e4] 
```

我想知道列表`l`中的所有元素是否都相同`type`。

我有这个：

```
def same_type(l):
    return l[0].type == l[1].type == l[2].type == l[3].type 
```

假设列表总是相同的大小，是否有更 Pythonic 的方式来做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-25T18:06:20.030

进入我脑海的第一件事：

```
all(e['type'] == L[0]['type'] for e in L) 
```

类型集的长度：

```
len(set(e['type'] for e in L)) == 1 
```

比`all`使用生成器更有效，但不是使用列表：

```
>>> %timeit all(e['type'] == l[0]['type'] for e in l)
1000000 loops, best of 3: 784 ns per loop

>>> %timeit len(set(e['type'] for e in l)) == 1
1000000 loops, best of 3: 676 ns per loop

>>> %timeit all([e['type'] == l[0]['type'] for e in l])
1000000 loops, best of 3: 602 ns per loop 
```

使用缓存`l[0]['type']`：

```
>>> t1 = l[0]['type']
>>> %timeit all([e['type'] == t1 for e in l])
1000000 loops, best of 3: 447 ns per loop

>>> %timeit all(e['type'] == t1 for e in l)
1000000 loops, best of 3: 655 ns per loop 
```

`set`使用 list-comp 甚至比使用genexpr 更慢：

```
>>> %timeit len(set([gettype(e) for e in l])) == 1
1000000 loops, best of 3: 735 ns per loop 
```

`set`当没有短路的可能性时，我想到了另一种更快的方法：

```
>>> %timeit [e['type'] for e in l].count(t1) == len(l)
1000000 loops, best of 3: 421 ns per loop 
```

另一个编辑：显然最直接的方法是最快的：

```
In [31]: def same_type(L):
   ....:     t1 = L[0]['type']
   ....:     for e in L:
   ....:         if e['type'] != t1:
   ....:             return False
   ....:     return True
   ....:

In [32]: %timeit same_type(l)
1000000 loops, best of 3: 352 ns per loop 
```

**同类型长输入（无短路）**

```
In [47]: l = [{'type': 1} for _ in range(1000)]

In [48]: %timeit same_type(l)
10000 loops, best of 3: 37.6 us per loop

In [49]: %timeit  all(e['type'] == l[0]['type'] for e in l)
10000 loops, best of 3: 112 us per loop

In [50]: %timeit all([e['type'] == l[0]['type'] for e in l])
10000 loops, best of 3: 103 us per loop

In [51]: %timeit len(set(e['type'] for e in l)) == 1
10000 loops, best of 3: 63.3 us per loop 
```

**不同类型的长输入（立即短路）**

```
In [40]: l = [{'type': x} for x in range(1000)]

In [43]: %timeit same_type(l)
1000000 loops, best of 3: 337 ns per loop

In [44]: %timeit  all(e['type'] == l[0]['type'] for e in l)
1000000 loops, best of 3: 656 ns per loop

In [45]: %timeit all([e['type'] == l[0]['type'] for e in l])
10000 loops, best of 3: 99.4 us per loop

In [46]: %timeit len(set(e['type'] for e in l)) == 1
10000 loops, best of 3: 68.6 us per loop 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-25T18:07:01.657

使用 a`set()`收集所有类型，然后测试它是否为长度 1：

```
def same_type(L):
    if not L: return True  # empty list case
    return len(set(d['type'] for d in L)) == 1 
```

这必须扫描所有元素。您还可以与第一个元素进行比较*，*此时您只需要进行足够的测试即可找到不匹配的元素：

```
def same_type(L):
    if not L: return True  # empty list case
    t = L[0]['type']
    return all(t == d['type'] for d in L) 
```

对于*较小*的输入，该`set()`方法更快，但对于*较大的*`set()`输入，如果输入中存在第二种类型的可能性足够大，则第二种形式可以击败该方法。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-25T18:06:25.550

适用于任何长度`lst`：

```
def same_type(lst):
    return all(d['type'] == lst[0]['type'] for d in lst[1:]) 
```

与`len(set(...)) == 1`它相比更快，因为它`type`会在发现不同时立即停止。

# fatal-error - 执行 HDMan 命令时出现致命错误

> ID：15073420
> 
> 赞同：0
> 
> 时间：2013-02-25T18:05:23.590
> 
> 标签：fatal-error, htk

我正在尝试使用`HDMan`htk 工具包的命令，但出现“致命”错误。我的控制台如下所示：

```
shekhar@ubuntu:/host/Shekhar/htkWorld/trial_1$ ls
beep  dlog         sentences (copy).txt  sentences.txt~                         try1.gram  wlist
dict  monophones1  sentences.txt         sentences (with sentence numbers).txt  wdnet      wlist~
shekhar@ubuntu:/host/Shekhar/htkWorld/trial_1$ HDMan -m -w wlist -n monophones1 -l dlog dict beep/beep-1.0 names
  ERROR [+5010]  InitSource: Cannot open source file names
  ERROR [+1410]  CreateBuffer: Can't open file names
 FATAL ERROR - Terminating program HDMan
shekhar@ubuntu:/host/Shekhar/htkWorld/trial_1$ 
```

`HDMan`找不到`names`文件。我不知道如何创建这个文件以及这个文件的内容是什么。

谁能帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T12:02:32.700

HDMan 用于将各种字典中的发音汇总在一起，并被调用为

```
HDMan [options] output_dictionary input_dictionary1 input_dictionary2 ... 
```

看起来您正在尝试从 beep/beep-1.0 和名称创建一个名为 dict 的新字典。名称不存在，这就是错误的来源。只需删除名称即可修复错误。

如果您确实需要名为名称的字典中的发音，那么这将是该过程后期的一个问题。如果没有更多信息，就不可能知道该文件的内容应该是什么。一般来说，文件的格式是

```
WORD [optional pronunciation probability] phone1 phone2 ... 
```

并且每一行只包含一个这样的条目。

# jquery - 使 jQuery 事件发生一次

> ID：15073422
> 
> 赞同：0
> 
> 时间：2013-02-25T18:05:28.443
> 
> 标签：jquery

我正在制作一个wordpress模板。想象一下我有一个包含一个菜单栏

```
$(document).ready(function() {
      $('#menu').hide();
      $('#menu').slideToggle("slow");
}); 
```

我的菜单向下滑动（它是一个垂直菜单），当页面加载时......但是，每次我在 wordpress 中加载一个新的静态页面（pageid=1 等）时，页面都会重新加载，因此事件重新启动并且菜单向下滑动每次我点击网站上的链接时都会再次出现！

如何使菜单滑动动画发生一次？也许只有当我点击主页按钮而不是所有页面时？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:12:19.750

`$_SESSION['opened']==1;`仅在主页上设置会话变量

在标题中，jquery 代码在哪里：

```
<?php if(isset($_SESSION['opened']) && $_SESSION['opened'] == 1): ?> 
```

你的jQuery代码

```
<?php endif; ?> 
```

在其余页面中，将该变量设置为 0

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T18:13:07.403

您可以使此事件仅在您网站的主页中发生，例如：

```
<?php
if (is_home()):
?>
<style type="text/javascript">
$(document).ready(function() {
      $('#menu').hide();
      $('#menu').slideToggle("slow");
});
</style>
<?php endif; ?> 
```

但是，如果您希望用户即使在通过任何其他页面进入时也能看到动画，您可能需要一些 cookie；P

# spring-mvc - 在 Spring MVC 3.1 应用程序中，我应该如何使用请求的语言环境来控制 HttpMessageConverter 的字符串格式？

> ID：15073427
> 
> 赞同：1
> 
> 时间：2013-02-25T18:05:38.600
> 
> 标签：spring-mvc, internationalization

在 Spring MVC 3.1 应用程序中，我应该如何使用请求的语言环境来控制 HttpMessageConverter 的字符串格式？

我有这个代表土壤类型的枚举（摘录）：

```
public enum Soil {

    SAND("0.35"),
    PEAT("0.70");

    private Double porosity;

    Soil(String porosity) {
        this.porosity = new Double(porosity);
    }

    @NumberFormat(pattern = "0.000")
    public Double getPorosity() {
        return porosity;
    }

} 
```

我还有一个用于访问土壤特性的控制器。这是在选择不同的土壤类型时触发的 ajax 请求。

```
@Controller
@RequestMapping("/soil/*")
public class SoilController {

    @RequestMapping(value="{id}/porosity")
    public @ResponseBody Double getPorosity(@PathVariable String id) {
        Soil soil = Soil.valueOf(id);
        return soil.getPorosity();
    }

} 
```

据我了解，通过使用@RequestBody，Spring 使用 HttpMessageConverter 将返回的 Double 转换为响应正文。这工作正常，但响应字符串始终使用默认语言环境进行格式化。例如，对 /soil/PEAT/porosity 的 GET 请求将导致将“0.7”写入响应正文。

然而，大多数访问者将“nl”作为他们的首选语言环境，期望使用小数点逗号而不是小数点。在这种情况下，我希望将响应字符串格式化为“0,7”。

我可以将 HttpServletRequest 参数添加到处理程序方法的签名中以确定请求的语言环境，但不知道如何将此信息传递给 HttpMessageConverter - 在这种情况下为 MappingJacksonHttpMessageConverter (*)。我知道可以通过覆盖标记中的默认值来配置 MappingJacksonHttpMessageConverter bean，但是如何让它知道请求区域设置？

(*) 调试：org.springframework.web.servlet.mvc.method.annotation.RequestResponseBodyMethodProcessor - 使用 [org.springframework.http.converter.json 将 [0.7] 写为“application/json;charset=UTF-8”。映射JacksonHttpMessageConverter@145240a]

**工作解决方案**

正如@CodeChimp 所说（[https://stackoverflow.com/a/15074077/1343409），i18n](https://stackoverflow.com/a/15074077/1343409)格式最好由视图处理。

我将处理程序方法更改为

```
@RequestMapping(value="{id}/porosity")
public String getPorosity(@PathVariable String id, HttpServletRequest request, Model model) {
    Soil soil = Soil.valueOf(id);
    model.addAttribute("doubleValue", soil.getPorosity());
    return "basevalues/double";         
} 
```

并添加了一个简单的 JSTL 视图 double.jsp

```
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>
<%@ page contentType="text/plain;charset=UTF-8" %>
<fmt:formatNumber type="number" value="${doubleValue}"/> 
```

这对我有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:43:59.413

ResponseBody 注释指示 Spring 获取您返回的任何内容，并将其放入响应正文中。它是一对一的，没有转换。例如，我使用该注释来返回二进制图像数据、CSV 文件等。如果您想返回针对特定语言环境格式化的数字，那么您需要在 getPorosity() 方法中进行检查并制作那里适当的修改。

**编辑以添加信息**

My understanding of the HttpMessageConverter is that it is used to convert to/from HTTP request/responses. HttpMessageConverter is, itself, just an interface with many implementations. The proper implementation is chosen based on the request/response headers and the type of return you are using. For instance, if the request specifies it accepts application/xml or text/xml, then the MarshallingHttpMessagingConverter is used to convert the return to the proper XML format.

However, the @ResponseBody annotation allows one to circumvent the conversion. This annotation is basically indicating to Spring "don't worry about converting the return type, just take what I am returning and shove it into the response body."

I do not believe that any of the classes that implement HttpMessageConverter are concerned with locale at all. Their only concern is to take the return type and convert it to the proper form for transport. Handling i18n-related items, which would be those reliant on the locale, are view-related concerns, and in my experience best handled in the view.

# php - PHP 回显总是转到 JQuery $.ajax 错误块

> ID：15073435
> 
> 赞同：2
> 
> 时间：2013-02-25T18:05:58.253
> 
> 标签：php, javascript, ajax, response

首先 - 不，这不是跨站点请求问题。Javascript 和 PHP 来自同一台服务器。

这是Javascript代码。

```
var form_data = {
    email:    email,
    password: password
};

$.ajax({
    type:        'POST',
    url:         '/Login.php',
    data:         form_data,
    success:      function(jsonResponse){
        console.log("Login returned via 'success'.");
    },
    error:        function (xhr, textStatus, error) {
        console.log("Login returned via 'error'.");

        // These are always empty:

        console.dir(xhr);
        console.dir(textStatus);
        console.dir(error);
    }
}); 
```

这是PHP代码：

```
$response = array('success' => true);
header('content-type: application/json'); // This line makes no difference.
echo json_encode($response);
return; 
```

无论我做什么，控制台总是点击“通过'错误'返回登录”。代码。

此外，在它返回后，它会强制客户端刷新页面。

我只剩下很少的头发要拔了！

任何帮助表示赞赏。提前致谢！

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-02-25T18:07:23.247

尝试

```
$response = array('success' => true);
header('content-type: application/json'); // This line makes no difference.
echo json_encode($response);
exit; 
```

还要确保脚本没有发送其他输出并检查控制台中的返回标头

# java - 对 getApplicationContext() 的不同响应

> ID：15073446
> 
> 赞同：1
> 
> 时间：2013-02-25T18:06:39.643
> 
> 标签：java, android, sharedpreferences

在我的应用程序中，我在一个处理对我的应用程序 SharedPreferences 的所有请求的类中使用 Context，该类的相关部分是构造函数：

```
private SharedPreferences preferences;
public AppSettings(Context context){
    preferences = PreferenceManager.getDefaultSharedPreferences(context);
} 
```

在我的初始**活动**中，我可以使用类中的其他一些方法很好地设置和读取参数，我使用**getApplicationContext()**从扩展**AsyncTask的类的****doInBackground()**调用中调用上下文：

 **```
public class MyTask extends AsyncTask<Void, Void, Boolean> {
    @Override
    protected Boolean doInBackground(Void... params) {
        ...
        AppSettings as = new AppSettings(context);
        ...
    }
} 
```

这工作得很好，但是当我尝试在下一个活动中恢复设置时：

```
public class MainActivity extends Activity 
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        AppSettings as = AppSettings(getApplicationContext());
    }
    ...
} 
```

我在 Eclipse 中收到一条错误消息：

> 未为 MainActivity 类型定义 AppSettings(Context) 方法

我对 getApplicationContext 的理解是它应该给我应用程序的全局上下文，但显然在每种情况下它都返回不同的东西。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T18:08:33.757

Errr..你不是说

```
AppSettings as = new AppSettings(getApplicationContext()); //<-- missed the "new" 
```**

# sql - SQL 根据 xml 生成列/数据

> ID：15073449
> 
> 赞同：0
> 
> 时间：2013-02-25T18:06:49.800
> 
> 标签：sql, xml, sql-server-2008

我有这样的xml：

```
<root>
    <item>
        <Name>Pants</Name>
        <Value>No</Value>
    </item>
    <item>
        <Name>Other</Name>
        <Value>Yes</Value>
    </item>
</root>

<root>
    <item>
        <Name>Pants</Name>
        <Value>Yes</Value>
    </item>
    <item>
        <Name>Other</Name>
        <Value>Yes</Value>
    </item>
</root>

<root>
    <item>
        <Name>a</Name>
        <Value>b</Value>
    </item>
    <item>
        <Name>c</Name>
        <Value>d</Value>
    </item>
</root> 
```

每个`root`元素都存储在 sql server 数据库的列中，我需要根据它创建列/行。我希望将“名称”作为列名并为该列填充值。也可能并不总是有 2 个`<item>`元素，可能更多或更少。

因此，当查询上述所有内容时，我想要：

```
|other columns|Pants|Other|a|c|<-column names
|~~~~~~~~~~~~~|No   |Yes  | | |<-rows
|~~~~~~~~~~~~~|Yes  |Yes  | | |
|~~~~~~~~~~~~~|     |     |b|d| 
```

这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:19:35.327

```
SELECT 
   XMLColumnName.value('(/root/item/Name)[1]','varchar(max)') AS firstname,
   XMLColumnName.value('(/root/item/Value)[1]','varchar(max)') AS myValue

FROM MyTable 
```

不知道您为什么`<root>`要按原样使用“ ”标签（通常整个 XML 值只有一个乞求和结束标签）。可能没有什么不同，但你必须看看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T14:22:52.717

使用动态数量的列，您需要动态 SQL。

首先使用您感兴趣的名称/值列表填充临时表。然后从临时表创建动态 SQL 语句并执行动态查询。

```
select ID,
       X.N.value('(Name/text())[1]', 'varchar(max)') as Name,
       X.N.value('(Value/text())[1]', 'varchar(max)') as Value
into #T
from T
  cross apply T.XMLCol.nodes('root/item') as X(N)

declare @SQL nvarchar(max)
declare @Col nvarchar(max)

select @Col = 
  (
  select distinct ','+quotename(Name)
  from #T
  for xml path(''), type
  ).value('substring(text()[1], 2)', 'nvarchar(max)')

set @SQL = 'select ID,'+@Col+'
            from #T
            pivot (max(Value) for Name in ('+@Col+')) as P'

exec (@SQL)

drop table #T 
```

[SQL小提琴](http://sqlfiddle.com/#!3/cff46/3)

# batch-file - 如何通过等于使用批处理脚本来分割一行

> ID：15073452
> 
> 赞同：2
> 
> 时间：2013-02-25T18:07:01.433
> 
> 标签：batch-file

我一直在尝试使用批处理脚本拆分具有 = 的行。例如 Line is :- a=5 然后我希望输出为 :- a 5

在寻找解决方案时，我发现我们可以使用“for”循环来拆分字符，例如 ; 空格制表符等 例如：- 使用 ';' 分割一行 代码如下： -

设置 teststring=This;is;my;new;laptop for /f "delims=;" %%a in ("!teststring!") do set substring=%%a echo !substring!

输出是：- 这是我的新笔记本电脑

但是如果我的行包含'='，我不能使用类似的方法来分割'='

如果有人可以帮助我，将不胜感激:) 谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T18:09:30.613

您可以设置`delims==`为拆分`=`。

```
for /f "tokens=1,2 delims==" %%a in ("a=5") do echo %%a %%b 
```

这写出：

```
a 5 
```

# python - 如何让 python 守护进程在停止时执行操作

> ID：15073459
> 
> 赞同：2
> 
> 时间：2013-02-25T18:07:26.290
> 
> 标签：python, daemon, python-daemon, start-stop-daemon

使用我[在这里找到](http://www.gavinj.net/2012/06/building-python-daemon-process.html)的代码来实现一个简单的守护程序，我想知道是否有任何方法可以让守护程序在停止之前执行一个操作。这个想法是，在我的脚本中，我正在使用与外部设备的串行连接，并且我想在关闭守护程序之前干净地关闭它。

在 App() 类的**初始化**循环中，我正在做所有的准备和初步设置。然后，run 函数负责启动串行连接，丢弃前几个值并启动主循环（它只是从串行连接中检索值，并将它们保存到外部服务器）。

现在，我想做的是添加一些退出前的操作，比如关闭串行连接，并获取发送到日志文件的数据的一些摘要。

有没有简单的方法可以做到这一点？（或者甚至是一个困难的问题）。

作为记录，我还考虑过使用[这种](http://www.jejik.com/articles/2007/02/a_simple_unix_linux_daemon_in_python/)创建守护进程的方法，这可能是一种更简单的方法来做我想做的事情。

这是我的代码现在的样子：

```
#standard libraries from python
import logging, sys, time

#3rd party lib
import serial, requests
from daemon import runner

class App():
    def __init__(self):
        #some initialize also including the ones from the example
        serialport = '/dev/ttyACM0'

    def run(self):
        #Serial start
        ser = serial.Serial()
        ser.port = serialport
        ser.open()

        #First values discarded
        for i in range(30):
            ser.readline()[:-1]
        #Yes, that's ugly!
        i = 1

        #Main loop
        while True:
            # Serial retrieve
            values = ser.readline()
            r = requests.get(url, params=values)
            logger.info("%s values sent", str(i))
            values = ''
            i += 1
            time.sleep(3)

app = App()
#daemon starting stuff from example 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T18:25:28.413

这包含在 stdlib [atexit](https://docs.python.org/3/library/atexit.html)中。在更细粒度的级别上，在删除对象之前执行代码，您可以实现 [**del**](https://docs.python.org/3/reference/datamodel.html?#object.__del__)方法。

# css - 具有相同操作系统和浏览器版本的两台计算机之间的字体粗细差异

> ID：15073461
> 
> 赞同：1
> 
> 时间：2013-02-25T18:07:29.293
> 
> 标签：css, fonts

我在一个使用 CSS 规则样式的网站上有文本：

```
font-weight:normal; 
```

在运行 MacOS 10.7.5 的本地计算机上通过 Chrome 版本 25.0.1364.99 查看时，字体看起来很正常，但是从具有相同操作系统版本、相同 Chrome 版本和相同字体集的另一台计算机上查看时，文本看起来异常瘦。

除了样式和字体之外，还有其他东西可能会影响字体在浏览器中的呈现方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T18:17:05.490

确保它们都设置了 LCD 字体平滑设置。这可以改变字体在视觉上的外观。这对某些字体的影响可能比其他字体更大，因此两者之间的系统字体可能看起来相同，而您使用的字体可能看起来不同。此外，如果一个屏幕质量更高，此设置可能会产生更深远的影响，但它们仍然可能看起来不同（例如视网膜与非视网膜）。

在 10.8 上，此设置位于系统偏好设置、常规下。

> ![环境](../Images/88e855cba52bab7c0c901396fbd03526.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-23T16:36:46.550

检查这个：

```
 font-smoothing:antialiased;
   -webkit-font-smoothing: antialiased;
    text-rendering:optimizeLegibility; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T18:12:12.540

其中一个操作系统可能具有不同的可访问性或显示选项。查看显示设置下的字体选项。那可能是你的罪魁祸首。

# ios - 使用 AVCapture 捕获高质量图像的简单方法

> ID：15073462
> 
> 赞同：0
> 
> 时间：2013-02-25T18:07:32.700
> 
> 标签：ios, avcapturesession

我需要做的就是捕捉图像，而我所能找到的只是捕捉视频或多帧的复杂代码。我不能使用 UIImagePickerController 因为我不想看到相机快门动画并且我有一个自定义叠加层，而且我的应用程序只是横向的。以正确的方向从正面或背面实时摄像头视图手动捕获图像的最简单方法是什么？我不想将它保存到相机胶卷中，我想将它呈现在视图控制器中进行编辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:10:36.280

看看 Apple 的 SquareCam ( [http://developer.apple.com/library/ios/#samplecode/SquareCam/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/SquareCam/Introduction/Intro.html) ) 示例。它包含高质量捕获图像所需的所有内容。我最近自己复制粘贴了这个项目的代码，在那里我解决了与你相同的任务。它运作良好:)

# delphi - 简单的 TListView 保存和加载到文件（仅保存列字符串值）

> ID：15073464
> 
> 赞同：1
> 
> 时间：2013-02-25T18:07:40.730
> 
> 标签：delphi, delphi-2010

我正在使用 Delphi 2010，我搜索了互联网并找到了一些示例，但它们都不起作用。我使用它可能是因为 2010 和 unicode？反正......

我正在寻找两个例程来为 TListView 执行简单的保存和加载到文件和从文件中加载。我只对保存每列中的字符串值感兴趣。即标题和子项。我对保存布局或任何对象不感兴趣。

```
procedure SaveToFile(const FileName: string);
procedure LoadFromFile(const FileName: string); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T18:23:55.047

这里有一些非常粗糙的东西。它使用相当有限的制表符分隔的文本格式。内容不允许包含内联制表符。我还没有对加载功能进行任何错误检查。我相信你可以添加它。

```
uses
  ComCtrls, Types, StrUtils;

procedure ListViewSaveToFile(ListView: TListView; const FileName: string);

  procedure AddTextToLine(var Line: string; const Text: string);
  begin
    Line := Line + Text + #9;
  end;

  procedure MoveCompletedLineToList(const Strings: TStringList; var Line: string);
  begin
    Strings.Add(System.Copy(Line, 1, Length(Line)-1));//remove trailing tab
    Line := '';
  end;

var
  Strings: TStringList;
  LatestLine: string;
  i, j: Integer;

begin
  LatestLine := '';

  Strings := TStringList.Create;
  try
    for i := 0 to ListView.Items.Count-1 do begin
      AddTextToLine(LatestLine, ListView.Items[i].Caption);
      for j := 0 to ListView.Items[i].SubItems.Count-1 do begin
        AddTextToLine(LatestLine, ListView.Items[i].SubItems[j]);
      end;
      MoveCompletedLineToList(Strings, LatestLine);
    end;
    Strings.SaveToFile(FileName, TEncoding.UTF8);
  finally
    Strings.Free;
  end;
end;

procedure ListViewLoadFromFile(ListView: TListView; const FileName: string);
var
  Strings: TStringList;
  i, j: Integer;
  Fields: TStringDynArray;
  Item: TListItem;
begin
  Strings := TStringList.Create;
  try
    Strings.LoadFromFile(FileName);
    ListView.Clear;
    for i := 0 to Strings.Count-1 do begin
      Fields := SplitString(Strings[i], #9);
      Item := ListView.Items.Add;
      Item.Caption := Fields[0];
      for j := 1 to high(Fields) do begin
        Item.SubItems.Add(Fields[j]);
      end;
    end;
  finally
    Strings.Free;
  end;
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T21:11:11.210

我想出了自己的解决方案，使用 TStringList 和名称/值对，这似乎工作得很好。我将项目标题存储在名称中，并将所有子列存储在值中，然后我只解析各个子项的值

```
procedure LoadFromFile(AListView: TListView; AFileName: string);
var
 I : Integer;
 SL: TStringList;
 Item: TListItem;
 Col0, Col1, Col2, Col3, Col4, Col5: String;
begin
  SL:= TStringList.Create;
  try
    SL.LoadFromFile(AFileName);
    AListView.Items.BeginUpdate;
    AListView.Items.Clear;
    for I:=  0 to SL.Count - 1 do
    begin
     Item:= AlistView.Items.Add;
     Item.Caption:= SL.Names[I];
     parseValue(SL.ValueFromIndex[I], Col0, Col1, Col2, Col3, Col4, Col5);
     Item.SubItems.Add(Col0);
     Item.SubItems.Add(Col1);
     Item.SubItems.Add(Col2);
     Item.SubItems.Add(Col3);
     Item.SubItems.Add(Col4);
     Item.SubItems.Add(Col5);
    end;
    AListView.Items.EndUpdate;
  finally
   SL.Free;
  end;
end;

    procedure SaveToFile(AListView: TListView; AFileName: string);
    var
     I: Integer;
     SL: TStringList;
    begin
     SL:= TStringList.Create;
     for I := 0 to AListView.Items.Count - 1 do
     begin
      SL.Add(AlistView.Items[I].Caption + '=' +
             AlistView.Items[I].SubItems[0] + ',' +
             AlistView.Items[I].SubItems[1] + ',' +
             AlistView.Items[I].SubItems[2] + ',' +
             AlistView.Items[I].SubItems[3] + ',' +
             AlistView.Items[I].SubItems[4] + ',' +
             AlistView.Items[I].SubItems[5])
     end;
     try
      SL.SaveToFile(AFileName);
     finally
       SL.Free;
     end;
    end;

 procedure parseValue(AValue: String; var Col0, Col1, Col2, Col3, Col4, Col5: String);
 var
  I: Integer;
  S: String;
  L: TStringList;
 begin
  //create a temporary list to store the data parts in
  L:= TStringList.Create;
  try
  //iterate through the length of the string
  for I:= 1 to length(AValue) do
  begin
   //if the char is not a comma, append it to S
   if AValue[I] <> ',' then
    S:= S + AValue[I]
   else
   // if char is a comma, add S to temporary list and reset S
   begin
    L.Add(S);
    S:= '';
   end;
  end;
  //add the last string to temporary list
  L.Add(S);
  //assign the items in temporary list to variables to be passed back 
  Col0:= L[0];
  Col1:= L[1];
  Col2:= L[2];
  Col3:= L[3];
  Col4:= L[4];
  Col5:= L[5];
  finally
   L.Free;
  end;
 end; 
```

# selenium - 硒试验机

> ID：15073467
> 
> 赞同：5
> 
> 时间：2013-02-25T18:07:46.773
> 
> 标签：selenium, selenium-webdriver, continuous-integration, htmlunit, ui-testing

---**长话短说；博士**

在这一点上，我建议大家将他们的持续集成服务器/服务绑定到[https://ghostinspector.com/](https://ghostinspector.com/)

**老问题**

经过三天的谷歌搜索和测试，我放弃了，我需要帮助。

我的目标是让我的同事使用 Selenium IDE 记录一个或多个测试。导出它们，将它们上传到服务器，并让该服务器使用带有 htmlunit 的 webdriver 运行这些测试。在我们构建或修复应用程序时，我们将上传测试以制作测试库。

使用 Selenium IDE 记录测试是可以的。但是让它运行是个问题。我们打算让测试的机器是 linux amazon 服务器。没有前端的东西，没有 kde、gtk，所以没有 firefox、chrome 等……这就是我指定 htmlunit 驱动程序的原因。

到目前为止，我什至无法在我的机器上运行此任务 - Ubuntu 12.04 x86_64。

我下载了 selenium-server 压缩包，并尝试运行：

```
java -jar selenium-server.jar -htmlSuite "*webdriver" "our.site.org" "/path/to/testsuite1.html" "/path/to/report1.html" 
```

没有成功。甚至更改“*webdriver”（使用其他弹出浏览器屏幕）。

我试过运行服务器和独立服务器并通过浏览器连接。

我已经通过 facebook 尝试了 PHP 绑定。

我已经尝试过 PHPUnit 和 Testing Selenium 类——以及它们各自从 Selenium Formatters 导出的脚本。

我真的不知道我在哪里滑倒。任何人都可以给我一个安全的方向，教程等，以遵循？

---**编辑**

好的，我的问题可能会恢复到：

允许我使用 HtmlUnit 驱动程序使用 selenium-server 运行 selenese 脚本的命令行是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T18:26:39.033

你在使用持续集成吗？如果是这样，您应该考虑获取一个插件来让您的 CI 软件运行 Selenium 测试。詹金斯对我来说就像一个魅力。

考虑到您的特定设置，您既可以让 amazon linux 服务器使用 HTMLUnitDriver 运行测试，也可以将其他机器（带有 GUI 和适当的浏览器）声明为“节点”以在其他浏览器上运行您的测试。

[链接到教程](http://centripetal.ca/blog/2011/02/07/getting-started-with-selenium-and-jenkins/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T14:34:36.563

您是否阅读过 David Burns（自动化测试人员）的这篇博文：

[http://www.theautomatedtester.co.uk/tutorials/selenium/selenium_rc_setup.htm](http://www.theautomatedtester.co.uk/tutorials/selenium/selenium_rc_setup.htm)

他描述了使用 HTMLSuite 运行 selenese 测试的方法。

> 我们将使用 Selenium Remote Control 的 HTMLSuite 命令。这允许您按原样运行 Selenese 测试套件。该命令应类似于 java -jar selenium-servre.jar -htmlsuite 。浏览器可以是：-*firefox -*chrome -*iexplore -*iehta -*safari -*custom /path/to/browser
> 
> 测试套件和结果文件的路径应该是完整路径。
> 
> 这是一个示例命令；java -jar selenium-server.jar -htmlsuite *iexplore [http://www.theautomatedtester.co.uk](http://www.theautomatedtester.co.uk) c:\testsuite\testsuite.html c:\testsuite\results.html

我会指出 htmlunit 似乎不是受支持的选项，因此我希望使用 -*custom 并提供 htmlunit 的路径。

这是遗留功能，因此它有可能不再按预期工作。HTMLSuite 期望测试采用 Selenese（HTML 表格）格式，您提到尝试使用 PHP 绑定，我不希望这会起作用。如果您确实想使用一些 PHP 绑定，我建议您使用 Adam Saunter 的 facebook 绑定分支，它们是最新的并且得到最好的支持。

[https://github.com/Element-34/saunter.php](https://github.com/Element-34/saunter.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T15:34:38.107

使用 Selenium WebDriver，您可以指向在已经启动的节点中启动 HtmlUnit

在 Java 中，您将执行以下操作：

```
IWebDriver driver = new RemoteWebDriver(new Uri("http://localhost:4444/wd/hub"), DesiredCapabilities.HtmlUnit()); 
```

要启动节点，只需确保将 browserName 设置为“htmlunit”。

# c++ - 宏停止在 Linux 上编译

> ID：15073476
> 
> 赞同：0
> 
> 时间：2013-02-25T18:08:11.640
> 
> 标签：c++, macros, g++, xlc

我有一个包含多个宏的库，它在 AIX 上编译得很好，但现在我需要编译相同的代码，而且宏似乎停止工作。我不断收到消息：

```
error: pasting "::" and "EVENT_DATA" does not give a valid preprocessing token. 
```

有没有办法让 linux 上的 c++ 预处理器像在 aix 上一样工作。我在 linux 上使用 g++，在 AIX 上使用 xlc_r。

这是宏之一。

```
#define E_TRA_INMOD(MName, Comp) \
   static const ES_TracMg::ES_TracComps ES_TracComp = \
                                    ES_TracMg::##Comp; \
   static char* ES_Mod_Namp = MName; \
   static unsigned long ES_SerMas = \
               ES_TracMg::m_MServ[ES_TracMg##Comp]; 
```

我称之为`E_TRA_INMOD("Error", EVENT_DATA);`
错误是：

```
error: pasting "::" and "EVENT_DATA" does not give a valid preprocessing token. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T18:14:49.307

我认为您不想在`##`这里使用：

```
#define E_TRA_INMOD(MName, Comp) \
   static const ES_TracMg::ES_TracComps ES_TracComp = \
                                    ES_TracMg::##Comp; \ 
```

它应该是

```
#define E_TRA_INMOD(MName, Comp) \
   static const ES_TracMg::ES_TracComps ES_TracComp = \
                                    ES_TracMg::Comp; \ 
```

您没有两个令牌可以粘合在一起成为一个令牌，您只需`Comp`扩展任何内容即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T18:16:21.067

你想在宏中做什么？看起来第一个令牌粘贴是多余的：

```
#define E_TRA_INMOD(MName,Comp) \
   static const ES_TracMg::ES_TracComps ES_TracComp = \
                                    ES_TracMg::Comp; \
   static char* ES_Mod_Namp = MName; \
   static unsigned long ES_SerMas = \
               ES_TracMg::m_MServ[ES_TracMg##Comp]; 
```

# java - Java Swing 单选按钮

> ID：15073477
> 
> 赞同：0
> 
> 时间：2013-02-25T18:08:11.907
> 
> 标签：java, swing

我正在制作一组单选按钮，中心的面板应该更改单击单选按钮的颜色。

一切似乎都是正确的，但是......它不起作用！在主课上，我看到了面板，但颜色没有改变......

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class ChoiceFrame extends JFrame 
{
    public ChoiceFrame()
    {

        class ChoiceListener implements ActionListener
        {
            public void actionPerformed(ActionEvent event)
            {
                setTheColor();
            }
        }

        buttonPanel = createButtonPanel();
        add(buttonPanel, BorderLayout.SOUTH);
        colorPanel = createColorPanel();
        add(colorPanel, BorderLayout.NORTH);
        setSize(FRAME_WIDTH, FRAME_HEIGHT);
        colorPanel.repaint();
    }

    public JPanel createButtonPanel()
    {
        JPanel panel = new JPanel();
        panel.setLayout(new GridLayout(3,1));

        redButton = new JRadioButton("Red Colour");
        blueButton = new JRadioButton("Blue Colour");
        greenButton = new JRadioButton("Green Colour");

        redButton.addActionListener(listener);
        blueButton.addActionListener(listener);
        greenButton.addActionListener(listener);

        ButtonGroup group = new ButtonGroup();
        group.add(redButton);
        group.add(blueButton);
        group.add(greenButton);

        panel.add(redButton);
        panel.add(blueButton);
        panel.add(greenButton);

        return panel;
    }

    public JPanel createColorPanel()
    {
        JPanel panel = new JPanel();
        return panel;
    }

    public void setTheColor()
    {
        if (redButton.isSelected())
            colorPanel.setBackground(Color.RED);
        else if (blueButton.isSelected())
            colorPanel.setBackground(Color.BLUE);
        else if (greenButton.isSelected())
            colorPanel.setBackground(Color.GREEN);
    }

    private JPanel colorPanel;
    private JPanel buttonPanel;

    private JRadioButton redButton;
    private JRadioButton blueButton;
    private JRadioButton greenButton;

    private ActionListener listener;

    private static final int FRAME_WIDTH = 400;
    private static final int FRAME_HEIGHT = 400;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:12:11.290

在您的构造函数中添加`ChoiceListener`. `listener = new ChoiceListener()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T18:14:24.660

在您的 createButtonPanel() 方法中，您应该使用以下命令初始化您的侦听器：

```
listener = new ChoiceListener(); 
```

当存在 ActionListener 字段时，创建新的 ChoiceListener 对象是没有意义的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T18:16:46.950

您可以制作`while`循环，每次`while`循环都会检查选择了哪个单选按钮

# c# - 如何在不以编程方式引用的情况下读取附属程序集的全部内容？

> ID：15073479
> 
> 赞同：0
> 
> 时间：2013-02-25T18:08:18.613
> 
> 标签：c#, localization, system.reflection, resourcemanager

当卫星组件的位置连同其文化信息一起给出时，我需要能够读取它的内容。所以，我不能在编译时添加对这个程序集的引用，我不会知道这个程序集的确切内容（我必须阅读整个内容）。有没有办法做到这一点？喜欢反射。我已经尝试过使用资源管理器，但我认为我无法使用它读取整个卫星程序集内容。

像下面这样的可能吗？

```
ResourceManager rm=new ResourceManager();
rm.BaseName="LocationProvidedAtRunTime";
ResourceSet rSet =rm.GetResourceSet("providedCultureInfo, true, true);
List<string> stringIds = new List<string>();
foreach (DictionaryEntry entry in rSet )
{
    stringIds .Add((string)entry .Key);
} 
```

编辑：

我的要求就像“在给出位置和文化信息时向任何卫星程序集替换/添加新字符串”

谢谢，

# php - Typo3 TCA 类型“文本”行-/文本中断？

> ID：15073480
> 
> 赞同：2
> 
> 时间：2013-02-25T18:08:19.907
> 
> 标签：php, typo3, typo3-tca

我使用前端插件将数据插入数据库。通过 Typo3 (TCA) 可以在后端查看记录。问题：

如果前端表单的文本区域中有中断，则它会显示在记录中，如下所示：test\r\ntest\r\ntest

我已经尝试过的是不同类型的转义、nl2br、爆炸等。数据库字段应该是什么样子，以便很好地显示中断？

这是一些代码：

```
'note' => array(        
  'exclude' => 0,       
  'label' => 'LLL:EXT:mq_eventform/locallang_db.xml:tx_XYZ_data.note',      
  'config' => array(
    'type' => 'text',   
    'cols' => '30',
    'rows' => '5',  
  )
),

$field_values = array(
  'note' => mysql_real_escape_string($_REQUEST['note']),
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-24T12:29:49.733

您需要为后端使用 TCA 类型“无”。但此字段不可编辑。

```
'note' => array(        
  'exclude' => 0,       
  'label' => 'LLL:EXT:mq_eventform/locallang_db.xml:tx_XYZ_data.note',      
  'config' => array(
    'type' => 'none',   
    'cols' => '30',
    'rows' => '5',
    'pass_content' => true, 
  )
), 
```

并且您需要在将值存储到数据库时使用 nl2br() 函数。

```
$field_values = array(
  'note' => nl2br($_REQUEST['note']),
); 
```

# php - 将数组提取为动态变量

> ID：15073486
> 
> 赞同：4
> 
> 时间：2013-02-25T18:08:38.077
> 
> 标签：php, arrays, mysqli

我试图变得懒惰（或聪明）：我有 7 个复选框，它们与 MySQL 表中的 7 列相关。

复选框发布在一个数组中：

```
$can = $_POST['can']; 
```

我创建了以下循环来转储 MySQL 插入的变量：

```
for($i=1;$i<8;$i++){
    if($can[$i] == "on"){
        ${"jto_can".$i} = 'Y';
    }
    else{
        ${"jto_can".$i} = 'N';
    }
}
print_r($jto_can1.$jto_can2.$jto_can3.$jto_can4.$jto_can5.$jto_can6.$jto_can7); 
```

这正确输出：

```
YYNYYYY 
```

但是，当我尝试在我的 MySQL 更新中使用这些变量时，它不接受这些更改。

```
mysqli_query($db, "UPDATE jto SET jto_can1 = '$jto_can1', jto_can2 = '$jto_can2', jto_can3 = '$jto_can3', jto_can4 = '$jto_can4', jto_can5 = '$jto_can5', jto_can6 = '$jto_can6', jto_can7 = '$jto_can7' WHERE jto_id = '$id'")or die(mysqli_error($db)); 
```

谁能解释为什么 print_r 显示变量而 MySQL update 不显示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T18:14:16.540

坚持使用数组，并动态形成查询：

```
$sql = 'UPDATE jto SET ';

$cols = array();
foreach( range( 1, 7) as $i) {
    $value = $_POST['can'][$i] == 'on' ? 'Y' : 'N'; // Error check here, $_POST['can'] might not exist or be an array
    $cols[] = 'jto_can' . $i . ' = "' . $value . '"'; 
}

$sql .= implode( ', ', $cols) . ' WHERE jto_id = "' . $id . '"'; 
```

现在执行 a`var_dump( $sql);`查看您的新 SQL 语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T18:16:02.667

这不是mysql问题。mysql 只会看到您放入该字符串的内容。例如，在执行 mysql_query 之前转储查询字符串。我猜您正在其他地方进行此查询并且遇到了范围界定问题。是的，这很懒惰。不，这不是“聪明”。你只是在为自己做更多的工作。做什么错了

```
INSERT ... VALUES jto_can1=$can[0], jto_can2=$can[1], etc... 
```

# html - 如何将输入提交按钮延迟几秒钟？

> ID：15073496
> 
> 赞同：0
> 
> 时间：2013-02-25T18:09:06.437
> 
> 标签：html, forms

我有一个带有两个提交按钮的表单。提交按钮是是或否，要求用户回答出现的问题。我如何编程提交按钮以在几秒钟后弹出，以确保它们不会意外单击它们（它会发生）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:11:24.877

这应该适合你。

```
$('#yourForm').function() {
    var mapped = $(this);

    setTimeout(function() {
        mapped.submit();
    }, 5000); // will trigger after 5 seconds!
}); 
```

# module - Orange 的二进制序列化后端

> ID：15073497
> 
> 赞同：1
> 
> 时间：2013-02-25T18:09:17.140
> 
> 标签：module, d, binary-serialization

为什么[`Orange`](https://github.com/jacob-carlborg/orange)除了 XML 之外，该库不支持二进制序列化后端？是因为 D 当前无法访问/反映其二进制表示，还是只是尚未确定优先级？如果可能，我应该使用哪些 D 语言功能和/或`Phobos`模块来实现二进制序列化后端`Orange`？

对于 D2，我想考虑到我们有权利，这应该很简单[`std.binmanip`](http://dlang.org/phobos/std_bitmanip.html)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T19:34:44.530

您可以查看[msgpack-d](https://github.com/msgpack/msgpack-d "消息包-d")库，它提供 MessagePack 格式的二进制序列化。来自[http://msgpack.org/](http://msgpack.org/)：

> MessagePack 是一种高效的二进制序列化格式。它允许您在 JSON 等多种语言之间交换数据，但速度更快、体积更小。例如，小整数（如标志或错误代码）被编码为单个字节，典型的短字符串除了字符串本身之外只需要一个额外的字节。

# xslt - 如何在 XSLT 中进行 urlencode？

> ID：15073499
> 
> 赞同：7
> 
> 时间：2013-02-25T18:09:21.717
> 
> 标签：xslt, urlencode

如何对 XSLT 中的 url 参数进行 urlencode？

在 php 中有一个函数 rawurlencode 可以满足我的要求，urlencode 根据 RFC 3986。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-25T18:16:30.827

XPath 2.0（以及 XSLT 2.0）[`encode-for-uri`具有](http://www.w3.org/TR/xpath-functions/#func-encode-for-uri). 我不知道在普通 XPath 1.0/XSLT 1.0 中不使用扩展函数的任何方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-06-22T14:57:41.443

您还可以`str:encode-uri(., 'true', 'UTF-8')`在命名空间中使用 EXSLT`str=http://exslt.org/strings`

大多数流行的 XSLT 1.0 处理器都可靠地支持 EXSLT。

# python - 密集随机矩阵到（无）有向图作为稀疏矩阵？

> ID：15073504
> 
> 赞同：0
> 
> 时间：2013-02-25T18:09:46.703
> 
> 标签：python, numpy

我想研究一些“最大流量”问题来理解算法，但我认为测试它们的简单设置的概念很难实现。

看看这个 Project Euler 问题：[http ://projecteuler.net/problem=83](http://projecteuler.net/problem=83)

我想要做的是假设每个单元格都连接到其所有相邻单元格（“+”模式），然后在每对之间创建一条路径，成本 == 到它们两者之间的最大值，即`max(cell1, cell2`：）

因此，一个简单的`[[s 4],[3 t]]`矩阵将变为`[(s, (0,1), 4), (s, (1,0), 3), ((0,1), t, 3), ((1,0), 4, t)]`(node1, node2, cost) + 所有在另一个方向上的路径。

也许有一种更简单的方法来描述我正在尝试做的事情，但我将不胜感激。

其他细节：我正在使用 Python 和 NumPy。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-26T02:13:53.713

这是计算 Project Euler 问题 83 边缘的 ipython 笔记本代码。我对矩阵中的每个元素使用索引，而不是 2D 坐标。

```
In [1]:

#load the data
import numpy as np
from StringIO import StringIO
data = StringIO("""131  673 234 103 18
201 96  342 965 150
630 803 746 422 111
537 699 497 121 956
805 732 524 37  331""")
m = np.loadtxt(data, dtype=int)
m

Out[1]:

array([[131, 673, 234, 103,  18],
       [201,  96, 342, 965, 150],
       [630, 803, 746, 422, 111],
       [537, 699, 497, 121, 956],
       [805, 732, 524,  37, 331]])

In [2]:

# give every element an index
idx = np.arange(m.size).reshape(m.shape)
idx

Out[2]:

array([[ 0,  1,  2,  3,  4],
       [ 5,  6,  7,  8,  9],
       [10, 11, 12, 13, 14],
       [15, 16, 17, 18, 19],
       [20, 21, 22, 23, 24]])

In [3]:

# create edges
left_edges = np.concatenate([idx[:, :-1, None], idx[:, 1:, None], m[:, 1:, None]], axis=2).reshape(-1, 3)
right_edges = np.concatenate([idx[:, 1:, None], idx[:, :-1, None], m[:, :-1, None]], axis=2).reshape(-1, 3)
down_edges = np.concatenate([idx[:-1, :, None], idx[1:, :, None], m[1:, :, None]], axis=2).reshape(-1, 3)
up_edges = np.concatenate([idx[1:, :, None], idx[:-1, :, None], m[:-1, :, None]], axis=2).reshape(-1, 3)
edges = np.vstack((left_edges, right_edges, down_edges, up_edges))
edges

Out[3]:

array([[  0,   1, 673],
       [  1,   2, 234],
       [  2,   3, 103],
       [  3,   4,  18],
       [  5,   6,  96],
       [  6,   7, 342],
       [  7,   8, 965],
       [  8,   9, 150],
       [ 10,  11, 803],
       [ 11,  12, 746],
       [ 12,  13, 422],
       [ 13,  14, 111],
       [ 15,  16, 699],
       [ 16,  17, 497],
       [ 17,  18, 121],
       [ 18,  19, 956],
       [ 20,  21, 732],
       [ 21,  22, 524],
       [ 22,  23,  37],
       [ 23,  24, 331],
       [  1,   0, 131],
       [  2,   1, 673],
       [  3,   2, 234],
       [  4,   3, 103],
       [  6,   5, 201],
       [  7,   6,  96],
       [  8,   7, 342],
       [  9,   8, 965],
       [ 11,  10, 630],
       [ 12,  11, 803],
       [ 13,  12, 746],
       [ 14,  13, 422],
       [ 16,  15, 537],
       [ 17,  16, 699],
       [ 18,  17, 497],
       [ 19,  18, 121],
       [ 21,  20, 805],
       [ 22,  21, 732],
       [ 23,  22, 524],
       [ 24,  23,  37],
       [  0,   5, 201],
       [  1,   6,  96],
       [  2,   7, 342],
       [  3,   8, 965],
       [  4,   9, 150],
       [  5,  10, 630],
       [  6,  11, 803],
       [  7,  12, 746],
       [  8,  13, 422],
       [  9,  14, 111],
       [ 10,  15, 537],
       [ 11,  16, 699],
       [ 12,  17, 497],
       [ 13,  18, 121],
       [ 14,  19, 956],
       [ 15,  20, 805],
       [ 16,  21, 732],
       [ 17,  22, 524],
       [ 18,  23,  37],
       [ 19,  24, 331],
       [  5,   0, 131],
       [  6,   1, 673],
       [  7,   2, 234],
       [  8,   3, 103],
       [  9,   4,  18],
       [ 10,   5, 201],
       [ 11,   6,  96],
       [ 12,   7, 342],
       [ 13,   8, 965],
       [ 14,   9, 150],
       [ 15,  10, 630],
       [ 16,  11, 803],
       [ 17,  12, 746],
       [ 18,  13, 422],
       [ 19,  14, 111],
       [ 20,  15, 537],
       [ 21,  16, 699],
       [ 22,  17, 497],
       [ 23,  18, 121],
       [ 24,  19, 956]]) 
```

然后您可以通过以下方式转换`edges`为稀疏矩阵`scipy.sparse.coo_matrix`

# visual-studio-2010 - TFS - 门控检查 - 无法在搁置版本上指定版本覆盖

> ID：15073508
> 
> 赞同：1
> 
> 时间：2013-02-25T18:10:04.847
> 
> 标签：visual-studio-2010, tfs, msbuild, tfsbuild

我正在为我的 TFS 服务器使用门控签到。直到今天一切都很好。现在，每次尝试签入更改时，都会收到错误消息**“无法在搁置版本上指定版本覆盖” 。**有谁知道为什么我会收到此错误消息？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T11:50:38.920

听起来构建已设置为在构建时获取特定版本的代码，而不是最新版本。编辑构建定义，转到“进程”选项卡。

如果您使用的是默认模板，请展开“高级”部分并查看“获取版本”设置中是否有任何内容。

![默认模板设置](../Images/ea4053f9a11f72dbee4dbfd4bb0ae6f6.png)

如果您使用的是升级模板，那么您需要查找“Msbuild arguments”设置。

![在此处输入图像描述](../Images/63e5be42e08e205434e9ade605288bcd.png)

在排队构建时也可以修改这两个设置，但我假设你没有这样做，否则你不会问这个问题。

# mysql - Mysql过程中没有数据类型的参数？

> ID：15073510
> 
> 赞同：1
> 
> 时间：2013-02-25T18:10:10.680
> 
> 标签：mysql, stored-procedures, procedures

好的，所以在 MYSQL 中编写存储过程时，我遇到了一个问题，我必须编写一个过程，我必须传递一个参数，其数据类型可能取决于另一个参数。我的意思是让我们说第一个参数是一个布尔值。如果布尔变量的值为真，则另一个变量为字符数据类型，否则为整数数据类型。

第二个参数的数据类型将取决于第一个参数的值！我们如何在运行时决定代码？听起来有点不切实际和疯狂，但它真的可以通过某种方式吗？

希望我不是真的听起来很愚蠢，提前谢谢！！！

# java - Java 类线程安全方法，用于考试认证 1Z0-851

> ID：15073516
> 
> 赞同：3
> 
> 时间：2013-02-25T18:10:42.317
> 
> 标签：java, multithreading, thread-safety

我正在学习 1Z0-851 Oracla Java SE 1.6 认证，我看到了这个问题：

![问题 4](../Images/1f622dcb9b965e9c565ec45049a5ee18.png)

任何人都可以向我解释这个答案吗？

并说当我这样想时我是否正确：如果`doThings()`是静态的，尽管当一个方法不是`static`一次时，每个`TestSeven`对象都会同时访问 doThings 并不一致地修改 x 值，但时间只能进行一次访问。

我这样想对吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T18:14:53.907

对，就是那样。目前，如果您创建两个实例`TestSeven`并从 2 个不同的线程调用它们的`doThings`方法，则无法保证`x`会增加两次。例如下面的执行是合法的（T1和T2是两个线程）：

```
T1: current = x //0
T2: current = x //0
T1: current++; // 1
T2: current++; // 1
T1: x = current; // 1
T2: x = current; // 1 
```

因此，您已经调用了该方法两次，但 x 只增加了一次。

如果您将方法设为静态，那么即使您创建了许多实例，在给定时刻也只有一个线程能够执行它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T18:14:50.113

它不是线程安全的，因为*x*范围是“静态的”，即所有类实例都可以访问它，而*doThings*方法则不是。所以它只在类实例上同步。

因此，尽管使用了 synchronized 关键字，但可以有两个类实例同时访问*x*。

将方法设为静态将确保它一次只被调用一次。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T18:14:57.603

该`doThings()`方法是一个实例方法，正在读取和写入一个静态变量`x`。通过`doThings()`设为静态，它将在所有实例之间同步（类上的内在锁，而不是实例上的）。换句话说，就目前而言，该方法可以由多个线程同时调用，而将其设为静态会阻止这种情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T19:14:54.047

如果 x 未标记为静态，那么该类是否是线程安全的？

# android-emulator - 如何提高 Jelly Bean AVD 模拟器速度

> ID：15073517
> 
> 赞同：1
> 
> 时间：2013-02-25T18:10:43.907
> 
> 标签：android-emulator

我已经为 Windows 64 位平台安装了最新的 ADT。我的笔记本电脑配置是：

*   2.2 GHz 双核处理器
*   3 GB 内存
*   300 GB 硬盘

AVD 启动缓慢。我怎样才能提高它的速度？我可以通过哪些其他方式优化模拟器以更快地工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T17:46:18.373

首次运行 AVD 时，请确保已启用保存快照。让它进入你喜欢的状态（可能是主屏幕），然后杀死模拟器，让它保存快照。然后编辑 AVD 以不保存快照，但从快照启动。相对而言，您的 AVD 现在将快速启动和关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T17:37:11.850

一件事对我来说效果很好。将 AVD 的屏幕分辨率降低到最低的必要值。

# javascript - 知道在 Javascript 中按下了什么按钮

> ID：15073522
> 
> 赞同：1
> 
> 时间：2013-02-25T18:10:55.613
> 
> 标签：javascript

我想知道是否有一种方法可以询问是否按下了某个按钮，以便它在函数中执行某些操作。我知道我可以把它分成两个单独的函数，但我想知道如何做到这一点。

我将把我的代码放在下面。

```
function displaySort(form) {
    var list = form.values.value.replace(/\s+/g, '')
    list = list.split(/,/)
    if (document.getElementById("fSort").form.input.id) {
        list.sort()        
        var listAsString = list.join(", ")
        form.sortedDisplay.value = listAsString
    } else if (document.getElementById("rSort").form.input.id) {
        list.sort(reverseCompare)
        var listAsString = list.join(", ")
        form.reverseSortedDisplay.value = listAsString
    }
    window.alert("Messed Up"); 
}

function reverseCompare(s1, s2) {
    if (s1 < s2) {
        return +1
    } else if ( s1 == s2 ){
        return 0
    } else {
        return -1
    }
} 
```

表格：

```
<form>
    <table>
        <tr>
            <td>
                <input type="text" name="values" value="   Bob,  Ted,  Carol,           
                Bette, Alice,  Peter   "
                onclick="if (this.value == this.defaultValue) this.value=''"
                size="80"
                />
                <input type="button"
                onclick="displaySort(this.form)"
                value="Sort"
                id="fSort"
                />
                <input type="button"
                onclick="displaySort(this.form)"
                value="Reverse Sort"
                id="rSort"
                />
                <input type="reset"
                value="Reset Form"
                />
            </td>
        </tr>
        <tr>
            <td>
                <input type="text" name="sortedDisplay" value="Sorted list will show here"
                size="35"
                readonly
                style="font-size:24pt;font-weight:normal;"
                />
            </td>
        </tr>
        <tr>
            <td>
                <input type="text" name="reverseSortedDisplay" 
                value="Reverse sorted list will show here"
                size="35"
                readonly
                style="font-size:24pt;font-weight:normal;"
                />
            </td>
        </tr>
    </table>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T18:21:45.903

向功能按钮添加另一个参数：

```
function displaySort(form, button)
{ ... 
```

并在单击时将按钮引用传递给它：

```
<input type="button"
   onclick="displaySort(this.form, this)"
   value="Reverse Sort"
   id="rSort"
/> 
```

# powershell - 在 PowerShell 中执行 Subst 命令

> ID：15073523
> 
> 赞同：1
> 
> 时间：2013-02-25T18:10:57.747
> 
> 标签：powershell, windows-8, subst

有人可以帮助在 PowerShell 中执行 Subst 命令吗？以便它反映 Windows 资源管理器中的虚拟驱动器！

感谢期待。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:15:27.470

这应该有效：

```
Invoke-Expression "subst Z: C:\some\folder" 
```

# c++ - 提升 Asio 单线程性能

> ID：15073524
> 
> 赞同：12
> 
> 时间：2013-02-25T18:11:04.647
> 
> 标签：c++, linux, boost, boost-asio, epoll

我正在实现需要维护大量（100K 或更多）长期连接的自定义服务器。服务器只是在套接字之间传递消息，它不做任何严肃的数据处理。消息很小，但其中许多消息每秒都会接收/发送。减少延迟是目标之一。我意识到使用多个内核不会提高性能，因此我决定通过调用`run_one`或对象`poll`方法在单个线程中运行服务器`io_service`。无论如何，多线程服务器将更难实现。

可能的瓶颈是什么？系统调用、带宽、完成队列/事件多路分解？我怀疑调度处理程序可能需要锁定（由 asio 库在内部完成）。是否可以在 boost.asio 中禁用队列锁定（或任何其他锁定）？

编辑：相关问题。多线程时系统调用性能会提高吗？我的感觉是，因为系统调用是由内核原子/同步的，所以添加更多线程不会提高速度。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-26T17:52:13.283

你可能想读[我](https://stackoverflow.com/q/3025373/283302)几年前的问题，我在为[Blue Gene/Q 超级计算机](https://stackoverflow.com/a/14447434/283302)开发系统软件时第一次调查 Boost.Asio 的可扩展性时问过这个问题。

扩展到 100k 或更多连接应该不是问题，但您需要注意明显的资源限制，例如打开文件描述符的最大数量。如果您还没有阅读开创性的[C10K 论文](http://en.wikipedia.org/wiki/C10k_problem)，我建议您阅读它。

在使用单线程和单线程实现应用程序后`io_service`，我建议调查调用线程池`io_service::run()`，然后才调查将 an 固定`io_service`到特定线程和/或 cpu。Asio 文档中包含所有这三种设计的多个示例，以及[一些](https://stackoverflow.com/a/6162575/283302)关于 SO 的问题以及更多信息。请注意，当您引入多个线程调用`io_service::run()`时，您可能需要实现`strand`s 以确保处理程序具有对共享数据结构的独占访问权限。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-26T08:24:01.407

使用 boost::asio，您可以以大致相同的开发成本编写单线程或多线程服务器。您可以将单线程版本编写为第一个版本，然后在需要时将其转换为多线程。

通常， boost::asio 的唯一瓶颈是**epoll/kqueue**反应器在互斥体中工作。因此，只有一个线程同时进行 epoll。如果您有多线程服务器，这可能会降低性能，该服务器提供大量非常小的数据包。但是，无论如何，它应该比普通的单线程服务器更快。

现在关于你的任务。如果您只想在连接之间传递消息-我认为它必须是多线程服务器。问题是系统调用（接收/发送等）。一条指令很容易为 CPU 执行，但任何系统调用都不是非常“轻量级”的操作（一切都是相对的，但相对于您任务中的其他工作）。所以，单线程你会得到很大的系统调用开销，这就是我推荐使用多线程方案的原因。

此外，您可以分离**io_service**并使其作为“每个线程的 io_service”习语工作。我认为这必须提供最佳性能，但它有缺点：如果 io_service 之一将获得太大的队列 - 其他线程将无济于事，因此某些连接可能会变慢。另一方面，使用单个 io_service - 队列溢出会导致较大的锁定开销。你所能做的——做这两种变体并测量带宽/延迟。实现这两种变体应该不会太难。

# wse - 找不到 NVP TransactionProcessorWse

> ID：15073539
> 
> 赞同：0
> 
> 时间：2013-02-25T18:12:23.837
> 
> 标签：wse

我正在使用网络资源网络服务（[http://www.cybersource.com/developers/](http://www.cybersource.com/developers/).I) ）。我正在使用简单的命令 api。我已经安装了该软件和 wse 3.0。但是在他们的示例项目中，我遇到了类似的错误（找不到类型或命名空间名称“TransactionProcessorWse”）

请帮助我，从昨天开始我一直在努力寻找解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-02T01:22:49.700

您需要从这里下载客户端解决方案：

[http://www.cybersource.com/developers/develop/integration_methods/simple_order_and_soap_toolkit_api/dot_net_2_0/](http://www.cybersource.com/developers/develop/integration_methods/simple_order_and_soap_toolkit_api/dot_net_2_0/)

zip 文件名为 simapi-net-2.0-5.0.2.msi 下载后，解压缩并运行安装程序。这些文件应位于 Program Files (x68)/Cyber​​SourceCorporation/simapi-net-2.0-5.0.2 文件夹下。

然后转到“lib”文件夹，您将在其中找到 Cyber​​Source.Clients.dll 以及所有其他所需的 dll，并将它们导入您的解决方案。

Cyber​​Source.Clients.dll 具有 TransactionProcessorWse 客户端。

祝你好运

# iphone - 用户运行旧版本应用程序时限制功能，仅当在线引擎发生更改时

> ID：15073543
> 
> 赞同：1
> 
> 时间：2013-02-25T18:12:35.463
> 
> 标签：iphone, ios, objective-c

我想限制应用程序内的在线游戏功能，只有当有可用的更新影响在线游戏代码/引擎时。我知道如果`[[NSBundle mainBundle] objectForInfoDictionaryKey:@"CFBundleShortVersionString"]`（引用自问题[here](https://stackoverflow.com/questions/10749842/check-and-update-an-application-through-code-when-a-new-version-is-available-in)）中的字符串不等于应用商店中的最新版本，我可以禁用在线游戏功能。但如果我发布不影响在线游戏体验的更新，我不想禁用在线功能。

有没有人有创造性的方式来“标记”一个版本，以便我可以检测更新是否对在线游戏有影响？添加颠覆是最好的方法吗？具有在线功能的 IE 更新更改 subversion 级别 2 (1.2.1) 而非在线更新更改 subversion 级别 3 (1.1.2)？

请注意，当更新可用时，我会禁用在线游戏功能，以防更新更改了数据包的发送方式或对评分引擎的修复等。所以我不会遇到正在播放旧版本的情况新版本和消息不匹配。（我也考虑过使用 Game Center Groups 来确保你玩的是同一个应用版本的玩家，但最终决定让用户升级是一个更好的计划）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:17:34.137

我会通过在服务器上以白名单的形式列出有效版本来解决这个问题。当检查用户是否可以在线时（例如，当他们点击多人游戏按钮时），只需 ping 您的服务器，包括用户的捆绑版本，并让服务器返回一个简单的响应，表示用户是否可以根据版本号玩他们提交了。

我在我的应用程序上做了一些相对类似的事情，根据他们正在运行的应用程序的版本将实际的代码更新推送到客户端。

# azure - Azure 本地存储模拟器异常 - Null InputStream 不是有效参数

> ID：15073546
> 
> 赞同：0
> 
> 时间：2013-02-25T18:12:43.983
> 
> 标签：azure

我在tomcat上使用带有java的windows azure。我想使用本地存储模拟器。所以我启动了本地存储模拟器并使用：

storageConnectionString = "UseDevelopmentStorage=true"

然后我试图创建一个表：

```
public static void createUsersTable() {
    try {
        CloudStorageAccount storageAccount = CloudStorageAccount
                .parse(storageConnectionString);

        CloudTableClient tableClient = storageAccount
                .createCloudTableClient();

        CloudTable table = tableClient.getTableReference("users");

        table.createIfNotExist();

        Logger.info("table users was created");

    } catch (Exception e) {
        Logger.info("table users cannot be created");
        e.printStackTrace();
    }
} 
```

但是当执行 table.createIfNotExist() 行时，我得到了异常：

java.lang.IllegalArgumentException: Null InputStream 在 com.ctc.wstx.stax.WstxInputFactory.createXMLStreamReader(WstxInputFactory.java:317) 的 com.ctc.wstx.stax.WstxInputFactory.createSR(WstxInputFactory.java:614) 不是有效参数) 在 com.microsoft.windowsazure.services.core.storage.utils.Utility.createXMLStreamReaderFromStream(Utility.java:327) 在

我在互联网上找不到任何关于该异常的信息，有人以前见过吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:12:56.187

好的，发现问题所在。我使用的是 maven，我没有将天蓝色的依赖项放在那里，只是使用了 jar 文件。这导致与 maven 导入的某些轴 jar 发生冲突。

# sql - 避免并发删除死锁

> ID：15073547
> 
> 赞同：2
> 
> 时间：2013-02-25T18:12:44.940
> 
> 标签：sql, sql-server, deadlock

我有一个名为`Products`多列的表。它是用于报告目的的临时表。多个用户请求将同时处理数据到该表。有单独的存储过程可以对该表进行 DML 操作。

表结构：

```
CREATE TABLE Products (
  instance uniqueidentifier,
  inserted datetime,
  col1, 
  col2,
  ...
) 
```

该`inserted`列将被填充`GETDATE()`以包含插入每行的时间，并且该`instance`列将包含来自 的值`newid()`。一个用户请求将有一个唯一的 id，但可能有数百万行。以下是将并发执行的查询，这会导致死锁。请给我提意见

查询一：

```
SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED 
DELETE P 
FROM Products (NOLOCK) 
WHERE instance = 'XXXX-xxx-xxx-xx' 
```

查询 2：

```
SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED 
DELETE P 
FROM Products (NOLOCK) 
WHERE inserted <= DATEADD(hh, -10, GETDATE()) 
```

注意：非聚集索引是在实例列上创建的。

请告诉我在这种情况下我可以使用哪种锁。

注意我不能主键，因为当我向表中插入 1000 万行时它会消耗时间（这对于一个事务；有 20 个并发事务）。报告应尽快生成。我的程序有多个 35 个 DML 语句，大约有 15 个 DELETE 语句，例如带有其他列的列（`DELETE FROM table WHERE instance = @instance AND col1 = @col1`）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T18:31:52.110

（1）你应该停止使用`read uncommitted`隔离。至少使用`read committed`.

(2) 有很多事情可以尝试避免死锁，例如确保您的不同事务以相同的顺序访问数据库对象等。这值得一读 - [http://support.microsoft.com/kb/ 169960](http://support.microsoft.com/kb/169960)

(3) 为您的表禁用锁升级（更精细的锁因此更好的并发性，但更多的锁开销）：

```
ALTER TABLE Products SET (lock_escalation = disable) 
```

(4) 禁止页锁，并允许索引上的行锁（这意味着您不能对索引进行碎片整理，但您仍然可以重建它们）：

```
ALTER INDEX [<YourIndex>] ON Product WITH (allow_row_locks = on, allow_page_locks = off) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T19:04:14.107

首先，除了独占锁之外，您无法对这些删除语句使用任何锁。[Sql Server 忽略了](http://msdn.microsoft.com/en-us/library/aa213026%28v=sql.80%29.aspx)您的[隔离级别和`NOLOCK`](http://msdn.microsoft.com/en-us/library/aa213026%28v=sql.80%29.aspx)提示：

> (nolock) 只适用于`SELECT`语句。

两个建议：

将您的非聚集索引更改`instance`为聚集索引。但是，只有在您可以更改`NEWID()`为[`NEWSEQUENTIALID()`](http://msdn.microsoft.com/en-us/library/ms189786.aspx).

其次，不要执行`delete`删除超过 10 小时的记录...考虑[实施滚动分区](http://www.brentozar.com/archive/2013/01/sql-server-table-partitioning-tutorial-videos-and-scripts/)。`delete`这将消除因清理与您的其他操作引起的任何争用。

# batch-file - 创建蝙蝠的 mspaint 问题

> ID：15073548
> 
> 赞同：0
> 
> 时间：2013-02-25T18:12:45.127
> 
> 标签：batch-file, cmd, paint

我需要`.bat`在 Windows 中进行以下操作：使用绘图打开大量`.jpg`文件，然后重新保存它们。它们可以被覆盖或保存到新文件夹中，没关系。

我的代码如下：

```
mkdir newFolder 
FOR %%x in (*.jpg) DO mspaint %%x > newFolder/new%%x 
```

问题是保存的文件不是原始文件的副本。我不能只复制所有文件，因为它们必须通过油漆，但无法弄清楚问题出在哪里。

当我打开那个新文件时，它只显示一个带有文本“new0001.jpg”的黑色图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:43:07.850

Mspaint 不是为批量使用而设计的。它没有用于保存文件的命令行选项。您可以查看 Windows 脚本解决方案（您的脚本实质上是单击 mspaint 中的菜单项以保存文件并关闭），或查看不同的图形包，例如此处建议的那些： [MS Paint 命令行开关](https://stackoverflow.com/questions/141052/ms-paint-command-line-switches)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T06:59:25.830

我没有验证它，但使用[Image Magick convert](http://www.imagemagick.org/script/convert.php)它应该是这样的：

```
FOR %%x in (*.jpg) DO convert %%x newFolder\%%~nx.png 
```

（`%%~nx`如果增强语法可用，则代表“不带扩展名的文件名”，否则您将不得不使用`%%x.png`并且文件将被命名为`foo.jpg.png`）。

# android - Eclipse + onvif.xsd + 安卓

> ID：15073549
> 
> 赞同：2
> 
> 时间：2013-02-25T18:12:47.237
> 
> 标签：android, xsd, wsdl

我需要在android上使用onvif.xsd，但我真的找不到我能做的任何解决方案。这就是为什么想从你们那里得到一些帮助。请我真的需要帮助！

谢谢！大卫

# c++ - 如何在字符串数组中存储更多数量的字符串

> ID：15073550
> 
> 赞同：0
> 
> 时间：2013-02-25T18:13:00.473
> 
> 标签：c++, string, vector

```
#include<iostream>
#include<vector>
#include<algorithm>

using namespace std;
int main()
{
    std::vector<int> v;
    long int a1[1000000];
    string a[1000000];
    for (int i=0; i<100; i++)
        a[i]=" ";
    int n;
    cout << "enter the value of n";
    cin >> n;
    for (int i=0; i<n; i++)
    {
        cin >> a1[i];
        v.push_back(a1[i]);
    }
    sort(v.begin(), v.end());
    char ch[100];
    int i=0;
    do { 
        for(int j=0; j<n; j++)
        {
            ch[j] = v[j] + '0';
            // cout<<ch[j];
        }
        int j=3;
        int k=0;
        for(int l=0; l<n; l++)
        {
            a[i] = a[i] + ch[l];
        }
        cout << a[i] << endl;
        i++;
    }
    while (std::next_permutation(v.begin(), v.end()));
    cout << endl << i;
} 
```

我想将我的所有排列存储在一个字符串数组中，但我无法存储 >8！（40320），即 9！之后，如果我声明**字符串 a[1000000]** 它在 dev c++ 中显示错误，任何人都可以解释我如何将它存储为一个字符串数组（因为我希望这个字符串代码在另一个更容易的代码中）大于 9！或最多 15 个！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T18:15:40.453

堆栈溢出。

对于这样数量的元素，堆栈太小了。您需要使用堆（使用`operator new`）。或者只是使用`std::vector`.

例如，您可以替换

```
string a[1000000]; 
```

和

```
std::vector< std::string > a( 1000000 ); 
```

对于`long int`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T19:32:17.197

写入文件定期刷新它。在内存中缓存所需的几个。

# php - Php，Jquery - 将变量发布到其他页面并离开页面

> ID：15073555
> 
> 赞同：0
> 
> 时间：2013-02-25T18:13:10.260
> 
> 标签：php, jquery, ajax, post

我正在处理一个复杂的项目，该项目需要在页面之间进行良好的变量发布，而无需发布或获取。我是用 get 完成的，在此之前我在 php 中使用过 post，但后来我开始使用 jquery，它有更好的方法来做事。我知道如何在不离开页面的情况下在两个页面之间传递变量：

```
visible    function blahblah (id){
    $.ajax({
    type: "POST",
    url: "blahblah.php",
    data: $(id).serialize(),
    success: function(data){
    $('#results').html(data);
    }
    });
    } 
```

我总是在 div 中显示结果，但我想要实现的结果是不同的。我需要传递一个变量 WITH 离开页面，但不使用 php post 或 get。我确实搜索过，但没有成功。如果可能的话，你能帮我解决这个问题吗？感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:19:07.863

我不确定，如果我的问题完全正确..我想你想：

1.  使用 POST/GET 将数据发送到页面
2.  重定向到另一个页面。为此使用标题功能。

但是，当你说你不想使用 POST/GET 时，我真的很困惑！那你怎么能和你的服务器通信呢？将所有内容设置为会话，永远不是一个好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T18:25:12.590

如果您担心失去“返回”功能，我认为这是因为当您返回已发布数据的页面时会出现烦人的警告？为了解决这个问题，您可以尝试（正如其他人所说）：

1.  将您的表单正常发布到页面
2.  在 $_SESSION[] 中保存变量

    $_SESSION['var1'] = $_POST['var1'];

3.  更改标题以刷新页面：

    header('位置：' . $_SEVER['SCRIPT_NAME']); 出口;

这样，没有人会看到您通过 GET 发布的内容，并且您可以避免烦人的“重新提交您发布的变量”消息。

# c++ - 访问子类中的“受保护”数据时出现“标识符未定义”错误

> ID：15073557
> 
> 赞同：2
> 
> 时间：2013-02-25T18:13:13.330
> 
> 标签：c++, visual-studio-2010, abstract, protected

请看下面的代码

**游戏对象.h**

```
#pragma once
class GameObject
{
protected:
    int id;

public:
    int instances;

    GameObject(void);
    ~GameObject(void);

    virtual void display();
}; 
```

**游戏对象.cpp**

```
#include "GameObject.h"
#include <iostream>

using namespace std;

static int value=0;
GameObject::GameObject(void)
{
    value++;
    id = value;
}

GameObject::~GameObject(void)
{
}

void GameObject::display()
{
    cout << "Game Object: " << id << endl;
} 
```

**圆形.h**

```
#pragma once
#include "GameObject.h"
class Round :
    public GameObject
{
public:
    Round(void);
    ~Round(void);

}; 
```

**圆形.cpp**

```
#include "Round.h"
#include "GameObject.h"
#include <iostream>

using namespace std;

Round::Round(void)
{
}

Round::~Round(void)
{
}

void display()
{
    cout << "Round Id: " << id;
} 
```

我 在课堂上遇到`'id' : undeclared identifier`错误。`Round`为什么是这样？请帮忙！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T18:14:44.903

在这个函数中：

```
void display()
{
    cout << "Round Id: " << id;
} 
```

您正在尝试访问`id`在**非成员**函数中命名的变量。编译器无法解析该名称，因为`id`它不是任何全局变量或局部变量的名称，因此您会收到一个错误，抱怨未声明标识符。

如果您打算创建`display()`的成员函数`Round()`，则应将其声明为：

```
class Round : public GameObject
{
public:
    Round(void);
    ~Round(void);
    void display(); // <==
}; 
```

并以这种方式定义它：

```
void Round::display()
//   ^^^^^^^
{
    ...
} 
```

这样， function`Round::display()`将覆盖 virtual function `GameObject::display()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T18:23:43.277

`display`您在 Round.cpp 文件中声明了一个全局范围的方法。像这样编辑您的标题和cpp：

圆形.h

```
#pragma once
#include "GameObject.h"
class Round :
    public GameObject
{
public:
    Round(void);
    virtual ~Round(void);
    virtual void display(void);

}; 
```

圆形.cpp

```
#include "Round.h"
#include "GameObject.h"
#include <iostream>

using namespace std;

Round::Round(void)
{
}

Round::~Round(void)
{
}

void Round::display()
{
    cout << "Round Id: " << id;
} 
```

注意 - 你应该将 GameObject 中的析构函数设为[虚拟](http://www.learncpp.com/cpp-tutorial/123-virtual-destructors-virtual-assignment-and-overriding-virtualization/)

# c# - 在文本框中设置自动完成

> ID：15073558
> 
> 赞同：1
> 
> 时间：2013-02-25T18:13:13.830
> 
> 标签：c#, autocomplete

我在 Windows 窗体应用程序中有一个文本框（名为 textbox1）。我有一个名为 nn.sdf 的数据库，我想将其用作自动完成的来源。每当用户在 textbox1 中输入时，它都会显示来自的建议数据库，与用户给出的输入文本匹配。所以我将我的代码放入`textBox1_TextChanged`property.my 代码在这里：

```
 private void textBox1_TextChanged(object sender, EventArgs e)
    {
        AutoCompleteStringCollection namesCollection = new AutoCompleteStringCollection();
        SqlCeConnection con = new SqlCeConnection(@"Data Source=C:\Users\Imon-Bayazid\Documents\nn.sdf");
        con.Open();
        SqlCeCommand cmnd = con.CreateCommand();
        cmnd.CommandType = CommandType.Text;
        cmnd.CommandText = "SELECT top(10)  english FROM dic";        
        SqlCeDataReader dReader;
        dReader = cmnd.ExecuteReader();

        if (dReader.Read())
        {
            while (dReader.Read())
                namesCollection.Add(dReader["english"].ToString());
        }
        else
        {
            MessageBox.Show("Data not found");
        }
        dReader.Close();

        textBox1.AutoCompleteMode = AutoCompleteMode.Suggest;
        textBox1.AutoCompleteSource = AutoCompleteSource.CustomSource;
        textBox1.AutoCompleteCustomSource = namesCollection;
    } 
```

但它只显示前 10 个数据。我知道我有问题

```
 cmnd.CommandText = "SELECT top(10)  english FROM dic";// english is my column name and dic is my table name 
```

我不知道 cmnd.CommandText 应该是什么。每当用户在 textbox1 中输入任何内容时，我都想要自动提示。我怎样才能做到这一点？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:21:51.223

如您所知，`CommandText`应该（或可能）是一条 SQL 语句。尝试以下

```
int fetchAmount = 10;
string userInput = "abc";
cmnd.CommandText = string.Format("SELECT top ({0}) english FROM dic WHERE english like '{1}%'",
    fetchAmount.ToString(), userInput); 
```

`LIKE`是一个比较文本的 SQL 命令。因此，在您的情况下，您想要文本以用户输入的内容开头的所有结果。

现在，在有人接手我的案子之前，我知道这不是最好的方法。直接在 SQL 语句中输入值会使您对 SQL 注入敞开大门。我强烈建议您学习和实现存储过程来与数据库进行任何交互。

# symfony - Assetic 和我的资产

> ID：15073559
> 
> 赞同：4
> 
> 时间：2013-02-25T18:13:15.637
> 
> 标签：symfony, sass, assetic

我是 symfony 2 和 Assetic 的新手。我想为我的 CSS 使用资产和 Sass。我使用自定义字体。我在资源下的包中创建文件夹“assets/css”，里面有_base.scss和main.scss。在我的公共文件夹中，我有：

*   css
*   字体
*   图片
*   js

在字体中，我有我的自定义字体。

在我的 SCSS 中，我像这样检索我的字体和图像：

```
 @include font-face("billabongregular", font-files("/bundles/Mybundle/fonts/billabong-webfont.ttf"));
background: $bg_header url("/bundles/Mybundle/images/darkGreyBackground.jpg") fixed no-repeat top center; 
```

我在 assets:install 之后有这个路径，我的文件在 web/mybundle/fonts 和 web/mybundle/images 下

当我做`php app/console assetic:dump --env=prod --no-debug`

我在我的网站上有：

*   css
*   js（公共文件夹）

但我没有字体文件夹和图像文件夹。如果 IO 在图像中看到源代码，我有这个路径 /bundles/Mybundle/images/darkGreyBackground.jpg

为什么我的网页中没有所有文件夹？用 /bundles/Mybundle/images/darkGreyBackground.jpg 和 /bundles/Mybundle/fonts/billabong-webfont.ttf 调用我的图像和字体是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T20:06:34.707

`web/bundles/Mybundle/`这是一种标准的和预期的行为，在您调用该`php app/console assetic:dump`命令后，您的包资源的符号链接处于下方。

要在您的 css 中使用资产生成的路径，您可以使用`cssrewrite`过滤器或更简单，您的`css`和`images`文件夹位于同一个主文件夹中，使用相对路径：

```
@include font-face("billabongregular", font-files("../fonts/billabong-webfont.ttf"));
background: $bg_header url("../images/darkGreyBackground.jpg") fixed no-repeat top center; 
```

**编辑**

在您的包中，如果您希望在`web`运行`assets:install`命令后可以在目录中访问文件，则必须将它们放在`Resources/public/`目录中，如下所述：http: [//symfony.com/doc/current/book/page_creation.html #bundle-目录结构](http://symfony.com/doc/current/book/page_creation.html#bundle-directory-structure)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-10-19T22:18:02.087

我遇到了同样的问题，我只是尝试使用以下方法作为解决方法。到目前为止似乎工作。

```
{% stylesheets
    output='assets/fonts/glyphicons-halflings-regular.ttf'
    'bundles/bootstrap/fonts/glyphicons-halflings-regular.ttf'
%}{% endstylesheets %} 
```

注意任何输出的遗漏，这意味着模板上没有显示任何内容。当我运行 assets:dump 时，文件被复制到所需的位置，并且 css 包含预期的工作。

# python - Python - 字典

> ID：15073560
> 
> 赞同：-6
> 
> 时间：2013-02-25T18:13:19.740
> 
> 标签：python, dictionary

在 python 中，我有一个如下所示的字典

```
{'key1': [L1, L2],
 'key2': [P1, P2],
 'key3': [T1],
 'key4': [V1]} 
```

所需的输出是

```
{'key1': [L1], 'key2': [P1], 'key3': [T1], 'key4': [V1]},
{'key1': [L2], 'key2': [P2], 'key3': [T1], 'key4': [V1]} 
```

任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:29:34.443

```
>>> # Let's suppose your dictionary looks something like
>>> some_dict = {'key1': ['L1', 'L2'],
 'key2': ['P1', 'P2'],
 'key3': ['T1'],
 'key4': ['V1']}
>>> #First determine the longest value sequence
>>> max_len = len(max(some_dict.values(), key = len))
>>> #assimilate your tools
>>> from itertools import izip, cycle, islice
>>> #Create the value sequence
>>> value = islice(izip(*(cycle(e) for e in some_dict.values())), max_len)
>>> #recreate the dictionary
>>> [dict(izip(some_dict.keys(), e)) for e in value]
[{'key3': 'T1', 'key2': 'P1', 'key1': 'L1', 'key4': 'V1'}, {'key3': 'T1', 'key2': 'P2', 'key1': 'L2', 'key4': 'V1'}]
>>> 
```

**注意**，如果顺序很重要，请使用 an`OrderedDict`而不是内置的 dict。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T18:19:25.450

```
In [1]: d = {'key1': ['L1', 'L2'],  
 'key2': ['P1', 'P2'],
 'key3': ['T1'],
 'key4': ['V1']}

In [2]: [{k: [v[min(i, len(v)-1)]] for k, v in d.items()}
     for i in range(max(map(len, d.values())))]
Out[2]: 
[{'key1': ['L1'], 'key2': ['P1'], 'key3': ['T1'], 'key4': ['V1']},
 {'key1': ['L2'], 'key2': ['P2'], 'key3': ['T1'], 'key4': ['V1']}] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T18:31:49.507

这并不能完全满足您的要求，因为我不确定您为什么需要`['T1']`或`['V1']`再次复制：

```
d = {'key1': ['L1', 'L2'],
 'key2': ['P1', 'P2'],
 'key3': ['T1'],
 'key4': ['V1']}
print [{key:d[key][i] for key in d.keys() for i in range(len(d[key]))}, {key:d[key][i] for key in d.keys() for i in range(len(d[key])-1)}] 
```

结果是：

```
[{'key3': 'T1', 'key2': 'P2', 'key1': 'L2', 'key4': 'V1'}, {'key2': 'P1', 'key1': 'L1'}] 
```

# java - Java 和无符号字节

> ID：15073562
> 
> 赞同：3
> 
> 时间：2013-02-25T18:13:21.523
> 
> 标签：java, byte, unsigned

我需要使用一个无符号字节数组。我需要通过网络将某些字符发送到服务器，其中一些字符大于 127。

我有下面代码的简化版本来尝试理解这个概念：

```
int i= 160;
byte j = (byte) i;
System.out.println((byte)i);
System.out.println(j); 
```

这给出了以下输出： `-96` `-96`

我需要打印 160。因为服务器需要一个 160 的字节，如果它收到 -96 它不接受该值。我使用 int 的原因是，当我阅读如何解决这个问题时，我经常遇到只使用 int 的建议，但我不太明白，因为我需要我的数组是 byte 类型.

这是我发送数组的代码的一部分：

```
public boolean send(byte[] data) {
    try {
     out.write(data); // Write the data to the outStream
     out.flush();
    } catch (IOException e) {
// TODO Auto-generated catch block
e.printStackTrace();
return false; // Return false if the TCP Transmit failed 
// }
return false;
} 
```

如果有人可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-25T18:19:59.143

在 Java 中，有符号字节和无符号字节之间没有区别。以下两个都将为一个字节分配相同的值：

```
byte i = (byte)160;
byte j = (byte)-96; 
```

作为开发人员，您可以在打印它们时将它们视为已签名或未签名。默认打印它们有符号，但您可以通过以无符号方式将它们转换为整数来强制它们打印无符号。

```
System.out.println(i); // -96
System.out.println(0xff&i); // 160 
```

如果您想知道字节如何同时表示负数和正数，请阅读这篇关于[Java 中二进制补码算法的文章](http://mindprod.com/jgloss/twoscomplement.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T18:31:44.537

没有 System.out.println(byte)。最接近的是 System.out.println(int)。这意味着您的字节值将转换为整数。转换扩展高位，产生负数。

以下代码将证明我的观点：

```
byte[] data =
{
    (byte)0x01,
    (byte)0x02,
    (byte)0x7F,
    (byte)0x80
};

for (byte current : data)
{
    String output = String.format("0x%x, 0x%x", current, (int)current);
    System.out.println(output);
} 
```

如果您想使用 System.out.println 查看您的字节值，请屏蔽整数值的前三个字节，如下所示：

```
System.out.println(((0x000000FF & (int)current); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T18:20:02.233

发送 -96 是正确的行为。有符号和无符号字节在打印出来时是不同的，但在位表示中没有区别，并且当它们被另一台服务器接收时它们不应该有区别。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-25T18:26:15.457

字节本身没有签名或未签名。当应用某些操作（例如，与 0 比较以确定符号）时，它们被解释为这样。这些操作可以有符号和无符号，在 Java 中，只有有符号字节操作可用。所以你引用的代码对这个问题没有用 - 它发送字节但不做任何操作。更好地显示接收字节的代码。一种正确且方便的方法是使用`java.io.InputStream.read()`将字节作为 0...255 范围内的整数返回的方法。

# ios - 如何从设备控制台检测推送通知事件和消息

> ID：15073563
> 
> 赞同：0
> 
> 时间：2013-02-25T18:13:23.793
> 
> 标签：ios, logging, push-notification

我需要对推送进行一些批量测试，以检测通知到达设备的典型成功率和延迟。我编写了一个服务器代码，它在一段时间内向设备发送通知，稍后我想在设备控制台中检查通知。有没有办法在控制台中查看推送消息和时间戳？即我应该寻找什么消息来检测事件？

我正在遵循[http://developer.apple.com/library/ios/#technotes/tn2265/_index.html描述的过程](http://developer.apple.com/library/ios/#technotes/tn2265/_index.html)

有人跟着一样吗？日志位置有很多 apsd 名称事件！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T20:43:54.577

If the log is verbose, pipe the `tail` and `grep` tools to only see the event you are interested in:

```
tail -f log.txt | grep "Received message for enabled topic" 
```

# c# - 如何阻止 EntityFramework 迁移自动创建我的架构？

> ID：15073565
> 
> 赞同：0
> 
> 时间：2013-02-25T18:13:31.127
> 
> 标签：c#, entity-framework, entity-framework-5

好吧，我正在使用 EntityFramework 迁移，它们工作正常，但是当我运行我的应用程序（Web API）并且第一次使用上下文时，会自动为我创建架构。**我不想那样**。我希望看到一个异常，指定表不存在或类似的东西。

在我的配置类中，我有这样的东西：

```
this.AutomaticMigrationsEnabled = false; 
```

我认为这就足够了，但 EntityFramework 不断重新创建我的数据库模式。

由于我使用的是持续集成和持续交付流程，因此我想使用 EF 迁移为我创建脚本，只需签入我的脚本，脚本将为我针对数据库执行（我已经创建了该流程）

*那么如何在应用程序运行时（当第一次在 AppDomain 中访问上下文时）阻止 EntityFramework 迁移以尝试自动创建我的数据库模式？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T20:32:24.543

为您的上下文取消设置数据库初始化程序。

```
Database.SetInitializer<MyContext>(null); 
```

# intuit-partner-platform - 从单个用户 ID 到应用程序的多个 OAuth 授权连接

> ID：15073569
> 
> 赞同：1
> 
> 时间：2013-02-25T18:13:47.680
> 
> 标签：intuit-partner-platform

从单个用户 ID 到单个应用程序是否可以有多个并发 OAuth 授权连接？

前任。用户 ID abc@company.com 授权访问应用程序 XYZ（通过[https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0025_Intuit_Anywhere](https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0025_Intuit_Anywhere)的第 2 步）。在用户授权访问应用程序 XYZ 时再次执行该操作。捕获的两个令牌仍然有效以备将来使用。

目前，后续的 OAuth 授权会使来自先前 OAuth 授权的令牌失效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T18:56:08.893

连接是在云（领域）中的数据和应用程序之间，每个领域只能有一个。如果同一用户尝试授权，则公司将不会显示在选择屏幕中，因为它已被选择。

如果同一公司的其他用户尝试这样做，他们将收到该公司已连接的错误。

连接的计费方式不是技术限制。您不希望从计费 pov 到同一领域的多个连接。

如果您能告诉我您的用例是什么，我可以为您指明正确的方向，因为我不确定您为什么希望多个 Oauth 连接到同一个数据集。

谢谢贾里德
_

# android - 从导致 OutOfMemory 错误的文件流加载可绘制对象

> ID：15073570
> 
> 赞同：0
> 
> 时间：2013-02-25T18:13:52.343
> 
> 标签：android

我知道这条线

`Drawable.createFromStream(fileInputStream, "src");`

当达到应用程序的内存限制时，能够引发 OutOfMemory 错误。但是，我想我在提高记忆效率方面一直非常勤奋。

这是实际检索可绘制对象的块：

```
if(file.exists()) {

    //Get image from app files, null if it doesn't exist
    try {
        FileInputStream fis = context.openFileInput(filename);
        drawable = Drawable.createFromStream(fis, "src");
        fis.close();

        if(!saveInCache)
            mInstanceCache.put(urlString, drawable);

        return drawable;
    } catch(Exception e) {
        e.printStackTrace();
    }
} 
```

我从来没有能够重现 OutOfMemory 异常，但我每天会从遇到它的用户那里收到 2-3 份报告。我想让我的代码更有效率，但我没有想法。我已经做了以下事情：

1）将小图像（列表视图大小）添加到缓存中，一旦您离开该列表视图，该缓存就会被清除。

2) 每当图像被替换为新图像或调用托管大图像的活动的 onStop() 时，始终清除 ImageView 的可绘制对象并运行垃圾收集。

我以为这就够了，但我想不会。我想做的一件事是切换到位图而不是可绘制对象（使用 Android 自己的 BitmapFactory）。这甚至会在内存/效率方面产生影响吗？

任何反馈表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:17:58.157

尝试使用 BitmapFactory.Options 中的 inPurgeable 选项从位图创建可绘制对象。我记得有同样的问题，并以这种方式解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T18:18:20.270

图像应该很大，这就是为什么具有低内存的手机会出现 OutOfMemory 异常。如果可以，请尝试减小图像的大小和分辨率。看看[http://developer.android.com/training/displaying-bitmaps/load-bitmap.html](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)

# javascript - 如何在递归中使用 setTimeout 以避免浏览器卡在复杂的进程中

> ID：15073584
> 
> 赞同：2
> 
> 时间：2013-02-25T18:15:01.293
> 
> 标签：javascript, recursion, cpu-usage, single-threaded

我有这个代码使用一个`inefficientProcess()`消耗大量内存的代码：

我的目标是使用某种`setTimeout(function(){...},0)`技术，这样浏览器在执行代码时就不会卡住。

**如何更改代码以使其与 setTimeout 一起使用？**

```
function powerOfTwo(num) {
    inefficientProcess();
    if (num > 0) {
        return powerOfTwo(num-1)*2;
    } else {
        return 1;
    }
}

function inefficientProcess() {
    var sum;
    for (var i=0; i < 500000; i++) {
        sum+=10;
    }
}

powerOfTwo(1000); 
```

我的目标当然是学习如何在执行繁重的计算时避免浏览器崩溃。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T18:20:44.717

Javascript 是单线程的，你所有的代码都是阻塞的。HTML5 中有一个新标准 WebWorkers API，它允许您将任务委托给不同的线程。然后，您可以传递一个回调函数来执行结果。

[https://developer.mozilla.org/en-US/docs/DOM/Using_web_workers](https://developer.mozilla.org/en-US/docs/DOM/Using_web_workers)

简单的例子：

```
function powerOfTwo(num, callback) {
    var worker = new Worker('inneficient.js');
    worker.postMessage('runTask');
    worker.onmessage = function(event) {
        var num = event.data.result;
        var pow;
        if (num > 0) {
            pow = Multiply(num-1)*2;
        } else {
            pow = 1;
        }
        callback(pow);
    };    
}

powerOfTwo(1000, function(pow){
    console.log('the final result is ' + pow);
}); 
```

在 inneficient.js 你有类似的东西：

//inneficient.js

```
function inefficientProcess() {
    var sum;
    for (var i=0; i < 500000; i++) {
        sum+=10;
    }
     postMessage({ "result": sum});
}

inefficientProcess(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T18:23:59.153

正如 Andre 的回答中提到的，有一个新的 HTML5 标准允许您在不同的线程上启动任务。否则，您可以调用时间为 0 的 setTimeout 以允许在调用 inefficientProcess 之前完成当前执行路径（可能还有一些要呈现的 UI 更改）。

但是无论您是否可以使用 HTML5，powerOfTwo 函数都必须更改为异步的 - 无论调用它的人都需要提供一个回调方法，该方法将在 (a) 通过 WebWorkers 启动的线程返回时调用，或者 (b) setTimeout 方法结束。

编辑添加示例：

```
function powerOfTwo(num, callback)
{
    setTimeout(function ()
    {
        inefficientProcess();
        if (num > 0)
            callback(Multiply(num-1)*2);
        else
            callback(1);
    }, 0);
}

function inefficientProcess() { ... } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T18:25:59.753

> HTML 元素允许您定义页面中的 JavaScript 代码应该何时开始执行。“async” 和 “defer” 属性在 9 月初被添加到 WebKit。Firefox 已经支持它们很长一段时间了。

[在本站](http://peter.sh/experiments/asynchronous-and-deferred-javascript-execution-explained/)看到

# php - 在 PHP 中显示 Std 类的值

> ID：15073587
> 
> 赞同：0
> 
> 时间：2013-02-25T18:15:12.827
> 
> 标签：php

所有，我有以下代码可以从 Tumblr 获取一些帖子：

```
$baseHostname = "name.tumblr.com";
$tumblrConsumerKey = "asfd"; # use your own consumer key here
$humblr = new Humblr($baseHostname, $tumblrConsumerKey);

$post = $humblr->getPosts(array('limit' => 1));
print_r($post); 
```

这工作正常，并给了我这样的结果：

```
Array ( 
    [0] => stdClass Object ( 
        [blog_name] => name 
        [id] => 43993 
        [post_url] => http://name.tumblr.com/post/43993/
        [slug] => slug 
        [type] => video 
        [date] => 2013-02-25 18:00:25 GMT 
        [timestamp] => 1361815225 
        [state] => published 
        [format] => html ) 
```

我尝试显示一些像这样的值：

```
echo "The blog name is: ".$post->blog_name;
echo $post->id; 
```

但是，它是空白的。如何显示这些值？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:17:50.520

如我所见，它是一个数组，因此您可以尝试：

```
echo $post[0]->blog_name; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T18:56:40.087

首先，打开[错误报告](https://stackoverflow.com/questions/74847/what-is-the-recommended-error-reporting-setting-for-development-what-about-e?rq=1)。

```
// error reporting for development environment
error_reporting(-1);
ini_set('display_startup_errors', 1);
ini_set('display_errors', 1); 
```

正如@Zlatan 指出的那样，它是一*组*stdClass。

启用错误报告后，您将收到此代码的错误通知*“注意：尝试在...中获取非对象的属性” ：*

```
echo "The blog name is: ".$post->blog_name;
echo $post->id; 
```

因为您正在尝试访问非对象。

您可以通过它的数组索引访问对象来修复它：

```
echo "The blog name is: ".$post[0]->blog_name;
echo $post[0]->id; 
```

假设`$posts`

```
Array
(
    [0] => stdClass Object
        (
            [blog_name] => blog1
            [id] => 10234
            [post_url] => http://name.tumblr.com/post/43993/
            [slug] => slug
            [type] => video1
            [date] => 2013-02-25 18:00:25 GMT
            [timestamp] => 1361815225
            [state] => published
            [format] => html
        )

    [1] => stdClass Object
        (
            [blog_name] => blog2
            [id] => 20234
            [post_url] => http://name.tumblr.com/post/43993/
            [slug] => slug1
            [type] => video
            [date] => 2013-02-25 18:00:25 GMT
            [timestamp] => 1361815225
            [state] => published
            [format] => html
        )

) 
```

通过数组索引访问对象：

```
echo "The blog name is: ".$post[0]->blog_name;
echo $post[0]->id;
echo "The blog name is: ".$post[1]->blog_name;
echo $post[1]->id;

// prints
// The blog name is: blog1
// 10234
// The blog name is: blog2
// 20234 
```

如果要循环发布帖子：

```
foreach ($posts as $post) {
    echo "The blog name is: ".$post->blog_name;
    echo $post->id;
}

// prints
// The blog name is: blog1
// 10234
// The blog name is: blog2
// 20234 
```

## 资源

*   [error_reporting](http://www.php.net/manual/function.error-reporting.php) (PHP 手册)
*   [数组](http://www.php.net/manual/language.types.array.php)（PHP 手册）

# ruby-on-rails - Ruby 包 - 类型错误：无法将字符串转换为整数

> ID：15073590
> 
> 赞同：1
> 
> 时间：2013-02-25T18:15:19.880
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2, jruby

我得到了`TypeError: can't convert String into Integer`，我也找到了重复的答案，但我正面临“pack”的这个错误。

其他困惑是，它可以正常工作`ruby 1.8.7`，而不是`ruby 1.9.3`，这是我正在使用的代码`jruby1.7.2`

```
irb(main):003:0> length=nil
=> nil
irb(main):004:0> token_string ||= ["A".."Z","a".."z","0".."9"].collect { |r| r.to_a }.join + %q(!$:*)
=> "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!$:*"
irb(main):005:0> token =  (0..(length ? length : 60)).collect { token_string[rand( token_string.size)]}.pack("c*")
TypeError: can't convert String into Integer
    from (irb):5:in `pack'
    from (irb):5
    from /home/appandya/.rvm/rubies/ruby-1.9.3-p374/bin/irb:13:in `<main>'
irb(main):006:0> 
```

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T00:41:59.363

`string[x]`in`Ruby 1.8`给你一个`Fixnum`（字符代码）， in`1.9`它给你一个`single character string`.

Array#pack 将数组转换为二进制序列。要打包的“c*”模板将 Ruby 整数数组转换为 8 位有符号字流。

以下是解决方案，来自 Google Groups

**1.**

背景

```
>> %w(a b c).pack('*c')
TypeError: can't convert String into Integer
        from (irb):1:in `pack'
        from (irb):1
        from /usr/bin/irb:12:in `<main>'
>> [1, 2, 3].pack('*c')
=> "\x01"
>> %w(a b c).map(&:ord).pack('*c')
=> "a" 
```

解决方案

```
irb(main):001:0> length=nil
=> nil
irb(main):002:0> token_string ||= ["A".."Z","a".."z","0".."9"].collect { |r| r.to_a }.join + %q(!$:*)
=> "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!$:*"
irb(main):003:0> (0..(length ? length : 60)).collect { token_string[rand( token_string.size)]}.map(&:ord).pack("c*")
=> "rd!:!LcxU3ON57*t2s520v*zvvdflSNAgU6uq14SiD00VUDlm9:4:tJz5Ri5o"
irb(main):004:0> 
```

**2.**

`String's []`函数的返回类型`Fixnum`在`1.8`但`String`在`1.9`：

```
>JRUBY_OPTS=--1.9 ruby -e "puts 'a'[0].class"
String

>JRUBY_OPTS=--1.8 ruby -e "puts 'a'[0].class"
Fixnum 
```

`JRuby 1.7.x`默认表现得像`Ruby 1.9.3`. 你需要设置`JRUBY_OPTS`.

**3.**

尝试`join`代替`pack`

```
irb(main):004:0> length=nil
=> nil
irb(main):005:0> token_string ||= ["A".."Z","a".."z","0".."9"].collect { |r| r.to_a }.join + %q(!$:*)
=> "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!$:*"
irb(main):006:0> token =  (0..(length ? length : 60)).collect { token_string[rand( token_string.size)]}.join("c*")
=> "Fc*Dc*1c*6c*ac*Kc*Tc*Qc*Hc*jc*Ec*Kc*kc*zc*sc*3c*ic*hc*kc*wc**c*Wc*$c*Kc*Ic*Uc*Cc*bc*Pc*1c*!c*mc*Bc*lc*dc*ic*Dc*sc*Ac*Bc*nc*Kc*mc*Lc*oc*Zc*Xc*jc*6c*2c*Uc*ec*Yc*Dc*vc*Ic*Uc*5c*Zc*3c*o"
irb(main):007:0> 
```

**4.**

如果您只是想制作一串 8 位干净的随机字符，您可能需要查看`Random#bytes`类似`Base64.encode64`.

**5.**

**active_support/secure_random**也有一个很好的 API 来处理这些事情

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T19:23:56.720

我建议您看一下：[Array Method Pack](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-pack)，本质上`.pack("c")`期望数组的元素是整数。你可以试试`.pack("a*")`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T19:35:25.587

采用`token = (0..(length ? length : 60)).collect { token_string[rand( token_string.size)]}.pack("a"*61)`

你得到相同的结果。我使用 61 因为从 0..60 开始有 61 个元素。

# google-chrome - Chrome 是否支持 Windows XP 下 2D Canvas 的 GPU 硬件加速？

> ID：15073593
> 
> 赞同：0
> 
> 时间：2013-02-25T18:15:21.063
> 
> 标签：google-chrome, 2d, html5-canvas, gpu, hardware-acceleration

我一直在阅读这个问题的相互矛盾的答案，并且在 Google 官方文档中找不到明确的答案。

通过抑制黑名单，我可以为 chrome://gpu-internals/ 下的几乎所有渲染功能启用硬件加速，但不能为 2D Canvas 启用硬件加速。我的系统是 Service Pack 3，完全更新。DirectX 9\. 板载视频 (Intel GMA3100) 的所有驱动程序都是最新的。该芯片非常强大，我什至将我的主板 BIOS 刷新到最新版本作为最后的努力。我认为谷歌只是不支持硬件加速。用于 Windows XP 下的 2D 画布。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-28T18:08:42.147

问题是 Chrome 开发人员禁用`HW Accel`了 XP 的 Canvas，它只能在 Vista+ 上调用`Direct3DCreate9Ex`Canvas `d3d9.dll`，`DirectX 9L`但可以通过 WineD3D Direct3D 在 Windows XP 上将 D3D9Ex 包装到 OpenGL 包装器。（特别感谢 WineHQ/Crossover）然后我们需要在启动选项中禁用黑名单和沙盒。（特别感谢 BlackWingCat）

我已经设法为 Windows XP/2003 的基于 Chromium 的浏览器强制硬件加速。它以某种方式起作用。

**系统要求：**
支持 SSE3 功能的 CPU、OpenGL 3.0 硬件/软件支持。
事实上，我使用“绿色”公司的视频卡 :)

**安装：**
1.将d3d9.dll、wined3d.dll、libwine.dll复制粘贴到chrome.exe所在的chrome文件夹中，例如“C:\Program Files\Google\Chrome\Application”
2.复制并替换d3dcompiler_47。 dll 和 libwine.dll 到 chrome.dll 所在的 Chrome 文件夹中，例如 C:\Program Files\Google\Chrome\Application\49.0.2623.112。
3\. 将启动参数“--ignore-gpu-blacklist --no-sandbox --disable-infobars”添加到您的 Chrome 快捷方式。（不带引号）
4\. 使用修改后的快捷方式运行 Chrome

如果您在此 hack 后遇到 Chrome 问题，您可以从 Chrome 快捷方式中删除启动选项，它将禁用此 hack。

![启用了硬件加速的 Windows 2003 上的 Chrome 50](../Images/1f9444653936b77764141e7a4fcece2d.png)

**下载：**
[ChromeHW_accel_XP.zip（使用反向移植的 Chrome 50.0.2661.102 beta-m、Opera 37、Chrome 49 进行测试）](http://mediafire.com/download/nt0n6sck5oajwc0/ChromeHW_accel_XP.zip)

**已知问题：**
1\. 输入时地址栏快速闪烁。
2\. HTML5视频无法正常播放（需要强制使用Flash Player）

实际上，我可以报告 Opera 36/37（基于铬）是一种更稳定的硬件加速 hack。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-15T15:20:25.607

更新补丁发布，有兴趣的可以查看

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-06T19:42:55.927

**更新：**

新的 Chromium 版本使用 libGLESv2.dll 版本 1.2.0.2448。我不是VB专家，但似乎新版本不需要mod...

*然而 -*

如果您尝试在标志中启用覆盖 GPU 黑名单，则使用此新 libGLESv2.dll 的新 Chromium 版本总是崩溃（然后在安全模式下自动重启）。

如果有人可以检查并报告，将不胜感激（这可能与增加对 DirectX 11 的支持有关吗？）

# java - 如何完全删除按钮的背景而不是仅仅隐藏它

> ID：15073599
> 
> 赞同：0
> 
> 时间：2013-02-25T18:15:43.403
> 
> 标签：java, swing, background, jpanel, jbutton

我正在尝试用 Java 为我的学校 A-level 课程创建[这个游戏](http://hwwmath.looiwenli.com/l-game) 。我目前正在尝试为每个方块使用一个单独的按钮，并且不能以任何方式删除按钮的背景。我试过`setBackground(false)`隐藏背景，但它仍然在那里，所以仍然可以点击，你可以想象它完全搞砸了董事会。

最终我要问的是如何从与图片大小相同的图片中制作一个按钮，根本没有任何额外的背景，而不仅仅是隐藏。

这是我的意思的图片：

![](../Images/9b9821ef1c484f06787ed34b2ddbbc15.png)

任何帮助/建议将不胜感激，我很绝望！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:36:11.443

这里有一个关于使用 java 创建自定义按钮的问题： [Creating a custom button in Java](https://stackoverflow.com/questions/2158/creating-a-custom-button-in-java)

这个问题的答案可能会解决你的问题。

# java - Coffe Bytes Java 折叠

> ID：15073603
> 
> 赞同：0
> 
> 时间：2013-02-25T18:15:47.677
> 
> 标签：java, eclipse-juno, code-folding

我最近为 Eclipse Juno 下载了 Coffe Bytes 并按照本教程进行安装

[如何使用 Coffee-Bytes 代码折叠](https://stackoverflow.com/questions/6940199/how-to-use-coffee-bytes-code-folding)

但是当我执行以下操作时

```
// {{ fold block
public static void stuffToFold()
{
   return 4;
}
// }} 
```

它不允许我折叠那个折叠块

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-12T03:08:05.073

您几乎可以使用它，您需要做的就是添加

`// }} fold block`

而不是

`// }}`

您在代码中的行。

# internet-explorer - IE8忽略浮动div的上边距

> ID：15073604
> 
> 赞同：0
> 
> 时间：2013-02-25T18:15:51.183
> 
> 标签：internet-explorer, padding, margin

除 IE8 之外的所有浏览器都正确读取我网站上导航菜单边距的 css。IE8 忽略了我在两个全宽 div（徽标 div 和菜单 div）之间的导航 css 上放置的任何边距或填充。原始文件来自我编辑的一个简单的响应式模板。

我需要将导航菜单 div 放置得足够远，以免干扰背景图像。有没有人有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:28:35.177

如果你嫁给了这种结构和 css 方法：

```
<div id="header-inner" class="sixteen columns over">
  <div id="masthead" class="sixteen columns alpha"></div>
  <div class="clear"></div>
  <nav class="sixteen columns omega" id="main-nav" name="main-nav"></nav>
</div> 
```

和浮动`#masthead`和`#main-nav`和`#main-nav`绝对定位在底部，那么你需要指定 `#header-inner`一个明确的高度。其他浏览器将其高度计算为 225 像素，这就是我要开始的地方。

```
#header-inner{
height: 225px; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T18:31:26.350

仅用于 IE 目的也许您可以添加一个修复“表格或 Div”标签，当检测到 IE 时，您将在运行时设置它的高度（想想 jquery）。

# oop - MATLAB：多个对象实例

> ID：15073605
> 
> 赞同：0
> 
> 时间：2013-02-25T18:15:52.193
> 
> 标签：oop, matlab, methods

我是面向对象编程的新手，尤其是 MATLAB。这是关于对象的多个实例的基本问题。

我在简化的设置中描述了我的问题。

首先我定义了两个类：Node 和 Edge，其中 Node 有一个属性值，而 Edge 包含一个 Node：

```
classdef Node < handle
  properties
    value
  end 
```

和

```
classdef Edge < handle
  properties
    node1
  end 
```

然后我创建了一个节点和一个边

```
n1=Node;
e=Edge; 
```

我把这个节点关联到边 e

```
e.node1=n1; 
```

现在问题来了，如果我将值分配给 n1

```
n1.value=5; 
```

我可以用预期的答案从 e 引用这个值：

```
e.node1.value
ans = 5 
```

但是如果我想删除节点 n1 引用 e 中的实例

```
e.node1=[] 
```

那么对象e中的对象node1就没有了，但是Node变量n1还在。

我的想法（并且想要）是变量 n1 和 e.node1 是同一件事，但看起来 MATLAB 创建了节点 n1 的两个实例，一个是 n1 本身，另一个是对象内部的 node1 e，虽然我可以从 node1 中引用 n1 的值。

我的问题是，如果我想从其关联的 e 中删除 n1，那么这样做的有效方法是什么？任何其他关于面向对象的 MATLAB 背景的解释都是绝对欢迎的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:44:12.090

您需要对希望通过引用引用的对象进行子类化，因为`handle.` 这将允许工作区中的引用与引用类引用的相同对象匹配。这是一个例子：

```
classdef MyEdge < handle
  properties
    node1
  end
end

classdef MyNode < handle
  properties
    value
  end
end
n = MyNode
e = MyEdge;
n.value = 7
e.node1 = n
disp(e.node1.value)
  7
n.value = 42
disp(e.node1.value)
  42 
```

这是其他一些无关的信息，如果它完全偏离轨道，请告诉我。:-)

当您在 Matlab 中创建一个对象，然后将对该对象的引用保存在其他地方时，它的行为就像一个真正的 OO 引用。所以，`n1`并`e.node1`参考同样的事情。但是，当您从对象`e.node1=[]`中删除引用时。该对象仍然存在于工作空间中，但没有对其的引用。我相信它会按照您想要的方式工作，只是删除引用不允许自动垃圾收集，除非在 Matlab 工作区中没有对 Matlab 对象的引用。就像是：`n1``e``n1``e`

```
e1 = Edge
e1.node1 = Node 
```

这应该完成垃圾收集，即一旦`e1.node1`指向`[]`Node 对象被消除。但是，如果您有：

```
e1 = Edge
e2 = Edge
e1.node1 = Node
e2.node1 = e1.node1
e1.node1.value = 5
if( e1.node1.value == 5 )
  disp('It''s equal!!')
end 
```

所以它们每个都存储对同一个对象的引用。

# spring - @Autowired HttpServletRequest 在集成测试中

> ID：15073609
> 
> 赞同：1
> 
> 时间：2013-02-25T18:16:10.530
> 
> 标签：spring, integration-testing

最后，我设法为一些集成测试设置了上下文，并测试了需要@PathVariable 或@ModelAttribute 的方法。不过，我无法弄清楚如何设置控制器内部使用的 HTTPServletRequest。

```
MyController {
    @Autowired
private HttpServletRequest request;
} 
```

在我运行测试时，请求永远不会更新。我可能会误解一些东西（就我是 Spring 新手而言）。我怎样才能做到这一点？提前感谢您的回答！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:18:36.870

HttpServletRequest不是通过方法参数传入控制器的吗？使用 @Autowired 将实例变量连接到 Spring 上下文 bean。也许你可以看看 MockHttpServletRequest 来测试 Web 控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T19:55:35.037

我没有时间填写答案：我正在使用 MockHttpServletRequest 和 Spring 3.1.2。我设法通过使用@Autowired 而不是通过从控制器获取请求bean 来解决它。像这样的东西：

```
mockRequest = (MockHttpServletRequest) applicationContext.getBean ("request"); 
```

希望这会帮助别人......

# javascript - 在 easyXDM 中更新文档 url

> ID：15073618
> 
> 赞同：1
> 
> 时间：2013-02-25T18:16:51.017
> 
> 标签：javascript, sockets, iframe, cross-domain, easyxdm

如何使用[easyXDM](https://github.com/oyvindkinsey/easyXDM)动态更新消费者的位置？

我尝试了以下代码但没有成功。

**提供者**

```
var socket = new easyXDM.Socket({
  onReady: function(){
    socket.postMessage("update-remote");
  },
  onMessage: function(message, origin) {
   alert("received " + message + " from " + origin);
  }
}); 
```

**消费者**

```
var socket = new easyXDM.Socket({
  remote: "http://remotedomain/page1.html",
  remoteHelper: "http://remotedomain/name.html",
  onReady: function(){
    socket.postMessage("foo-message");
  },
  onMessage: function(message, origin) {
   if(message="update-remote") {
     this.remote = "http://remotedomain/page2.html",
   }
   alert("received " + message + " from " + origin);
  }
}); 
```

# jquery - 如何构建离线浏览器端应用程序？

> ID：15073620
> 
> 赞同：0
> 
> 时间：2013-02-25T18:16:52.453
> 
> 标签：jquery, html, google-chrome, firefox

我正在寻找开发一个 Web 应用程序，它必须在浏览器的 Internet 连接中断的情况下工作。

所以一个假设的用例是：

1.  浏览器连接到：myapp.com/phone-list 并显示给用户
2.  五天后，由于 Internet 连接中断，用户尝试连接到 myapp.com/phone-list。浏览器检测到它没有互联网连接，并且服务器上一个它拥有的最后一个好版本。

问题：有没有办法在浏览器中稳健地做到这一点，比如使用 jQuery 插件？

# jquery - 简单的 JQuery 菜单

> ID：15073621
> 
> 赞同：-1
> 
> 时间：2013-02-25T18:16:58.443
> 
> 标签：jquery, asp.net

我不想重新设计轮子，而且我不精通 Javascript 或 JQuery，所以如果有一个脚本可以满足我的需求，那就是我正在寻找的。

我正在用 C#/ASP.NET 编写。我需要一个按以下方式工作的下拉菜单：

1.  可以在没有站点地图的情况下进行配置。我的许多操作是在同一页面内的交互，而不是导航到不同页面。实际上，我的所有操作都会触发对特定服务器端方法的回发。

2.  下拉 OnClick，而不是悬停。菜单附近还有其他悬停动作，如果您不小心离得太近，菜单下拉会很烦人。

3.  具有键盘快捷键功能。

我应该自己写还是有你推荐的有信誉的脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:23:37.253

我认为您应该以放置在主菜单下方的列表的形式来补充您的菜单，您可以使用简单的 jquery show hide 在单击主菜单标题时显示该列表。

对于快捷方式实现，此链接可能会有所帮助。

[http://craig.is/killing/mice](http://craig.is/killing/mice)

# .net - c# UNC 路径在使用 NetUseDel 时仍然有效

> ID：15073623
> 
> 赞同：1
> 
> 时间：2013-02-25T18:17:02.777
> 
> 标签：.net, unc, net-use

我正在使用 NetUse 创建与 UNC 路径的连接以枚举目录。之后，NetUseDelete，我需要未经授权的异常立即开始发生。目前，似乎 NetUseDelete 的效果已被删除，至少在 .NET 中是这样。以下单元测试演示了应该发生的事情。

```
// delete every net connection to ensure clean test
var share = @"\\234.234.234.234\share";
var username = "user...";
var password = "password...";

// to begin with, access should be denied
Assert.Throws<UnauthorizedAccessException>(() => new DirectoryInfo(share).GetDirectories());

// the using statement calls NetUseDel when the connection is disposed off.
using (var connection = _networkBrowserService.GetUncConnection())
{
    // calls NetUse
    if (connection.NetUseWithCredentials(share, username, null, password))
    {
        // succeeded!
        // this should not throw an error!
        new DirectoryInfo(share).GetDirectories();
    }
    else
    {
        Assert.Fail("Couldn't authenticate username/password");
    }
}

// now that we disposed our connection, we should get access denied again
Assert.Throws<UnauthorizedAccessException>(() => new DirectoryInfo(share).GetDirectories()); 
```

最后一个 Assert 失败，因为 GetDirectories() 没有抛出错误。

如果我设置断点并稍等片刻，GetDirectories() 将按预期抛出异常。

我检查了“网络使用”，当 GetDirectories() 通过时没有建立连接，这是不正确的。如果“net use”显示没有连接，GetDirectories() 应该会失败。

有任何想法吗？.NET 中是否有一些我可以清除的缓存？

# java - 检测两个字符串是否只包含相同的单词

> ID：15073631
> 
> 赞同：-1
> 
> 时间：2013-02-25T18:17:34.787
> 
> 标签：java, regex, performance

下面的方法可以完成这项工作，但效率不高。

有谁知道一个更优雅的解决方案来做到这一点？

我摸索过这样的事情，但到目前为止还没有运气： /^(foo|bar|[[:space:][:punct:]])+$/

```
static public boolean matchTitle(String title, String title2) {

    Scanner scanner1 = new Scanner(title);
    Scanner scanner2 = new Scanner(title2);
    String searchTitle = title2;
    boolean match = false;
    int i = 0;
    while(i < 2){
        if(i == 1){
            scanner1 = new Scanner(title2);
            scanner2 = new Scanner(title);
            searchTitle = title;
        }

        // breaks into words
        while (scanner1.hasNext()){
            match = false;

            String token = scanner1.next();
            scanner2 = new Scanner(searchTitle);
            while (scanner2.hasNext() && !match){
                String token2 = scanner2.next();
                if(token.equals(token2)){
                    // if the words match
                    match = true;
                }
            }
            if(!match){ // we have a word that didn't match any words in the second title
                return false;
            }
        }
        i++;
    }
    return true;
} 
```

**例子**

("相似词在这里", "相似词在这里") // true

("相似的词在这里", "这里的词相似") // true

("这里相似词", "这里相似词不同") // false

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T18:21:54.587

我会选择一个更简单的版本：

```
List<String> words1 = Arrays.asList(title.split(" "));
List<String> words2 = Arrays.asList(title2.split(" "));

return words1.containsAll(words2) &&
       words2.containsAll(words1); 
```

假设：

*   title 和 title2 不为空
*   空格是唯一的分隔符
*   如果一个字符串包含 n 次相同的单词，则另一个字符串也必须包含该单词 n 次

**编辑**

您的编辑显示重复项很好。在这种情况下，您可以使用集合而不是列表：

```
Set<String> words1 = new HashSet<String> (Arrays.asList(title.split(" ")));
Set<String> words2 = new HashSet<String> (Arrays.asList(title2.split(" ")));

return words1.size() == words2.size() && words1.containsAll(words2); 
```

注意：正如[chm052 在他的回答](https://stackoverflow.com/a/15074082/829571)中所指出的，在 Set 的情况下，您可以简单地检查是否相等，这会忽略顺序（但不在 List 示例中）：

```
return words1.equals(words2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T18:44:20.220

您要问的是*第一个字符串*中的单词集是否等于*第二个字符串中的单词集*。毕竟，根据定义，您想要忽略的关于字符串的内容（词序和重复词）并不存在于集合中。

所以，你需要

```
Set<String> words1 = new HashSet<String> (Arrays.asList(title.split(" ")));
Set<String> words2 = new HashSet<String> (Arrays.asList(title2.split(" ")));

return words1.equals(words2); 
```

编辑：

正如 assylias 所指出的，如果您切换使用 equals 方法而不是 size 和 containsAll 方法，则功能没有太大变化，但是在阅读代码时更容易理解。以这种方式将此方法与 set 类解耦也可能是更好的 OO 实践；那么，例如，如果在 Java 集合类中实现了一种更好的算法来查找深度集合相等，那么您将可以使用该改进。

奖金第二次编辑：

如果有人对此评论线程感到困惑，那是关于 assylias 先前的回答（无论它是否适用于每种情况）：

```
List<String> words1 = Arrays.asList(title.split(" "));
List<String> words2 = Arrays.asList(title2.split(" "));
return words1.size() == words2.size() && words1.containsAll(words2); 
```

# php - 生成的 SEO 文章/阅读更多链接无效

> ID：15073633
> 
> 赞同：0
> 
> 时间：2013-02-25T18:17:39.300
> 
> 标签：php, url, joomla

我将旧的 joomla 1.5 网站更新为 joomla 2.5.8。它迫使我更新一些模块和插件，我终于认为我一切正常。

作为最后一步，我激活了 SEO 网址。尽管网站和菜单仍然有效，但生成链接的位置很少，不再有效。

例如：在主页上，我有一个带有介绍文本的文章列表。这些具有正常的“阅读更多”链接。启用 SEO 后，此链接将停止工作。

它应该链接到： http: [//www.domain.com/home/4-nieuws/289-article-alias-test](http://www.domain.com/home/4-nieuws/289-article-alias-test) 但它链接到： [http ://www.domain.com/?id=289:article-别名测试](http://www.domain.com/?id=289:article-alias-test)

文章列表下方的链接也会发生这种情况，该链接指向同一类别中的其他文章。

我追踪了错误代码，它位于 components/com_content/views/category/tmpl/blog_links.php

这是文件的内容：

```
 <?php
/**
 * @package     Joomla.Site
 * @subpackage  com_content
 * @copyright   Copyright (C) 2005 - 2012 Open Source Matters, Inc. All rights reserved.
 * @license     GNU General Public License version 2 or later; see LICENSE.txt
 */

// no direct access
defined('_JEXEC') or die;
?>

<div class="items-more">

<h3><?php echo JText::_('COM_CONTENT_MORE_ARTICLES'); ?></h3>
<ol>
<?php
    foreach ($this->link_items as &$item) :
?>
    <li>
        <a href="<?php echo JRoute::_(ContentHelperRoute::getArticleRoute($item->slug, $item->catid)); ?>">
            <?php echo $item->title; ?></a>
    </li>
<?php endforeach; ?>
</ol>
</div> 
```

我没有更改此文件中的任何代码。关于可能导致这种情况的任何建议，更重要的是，如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T22:33:59.817

您发布的代码看起来非常好。在我看来，您没有将 htaccess.txt 重命名为 .htaccess，这是 SEF 链接正常工作所必需的。您可以在 Joomla 根目录中找到它。

如果您已经这样做了，它也可能是模板中留下的 Joomla 1.5 中的模板覆盖。您可以在 /templates/YOURTEMPLATE/html/ 中找到覆盖

# iphone - 从 CCMenu 内的批处理节点添加精灵而不增加绘图调用次数的正确方法

> ID：15073640
> 
> 赞同：2
> 
> 时间：2013-02-25T18:17:57.153
> 
> 标签：iphone, ios, ipad, cocos2d-iphone

假设我正在使用 CCSpriteFrameCache 并添加这样的帧

```
[[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:@"atlas.plist"];
mySpriteSheet = [CCSpriteBatchNode batchNodeWithFile:@"atlas.png"];
CCSprite *oneSprite = [CCSprite spriteWithSpriteFrameName:@"abc"]; //yes I do not use extensions, who need them?
[mySpriteSheet addChild:oneSprite]; 
```

这非常有效。您可以在不增加绘图调用的情况下向 mySpriteSheet 添加大量精灵，但假设我想在 CCMenuItem 中使用这些精灵，或者在这种情况下，CCMenuItemSprite 是 CCMenuItem 的子类，如下所示：

```
CCSprite *spriteNormal = [CCSprite spriteWithSpriteFrameName:imagemNormal];
CCSprite *spriteHighlight = [CCSprite spriteWithSpriteFrameName:imagemHighlight];

CCMenuItemSprite *myItem = [CCMenuItemSprite itemWithNormalSprite:spriteNormal
                                                      selectedSprite:spriteHighlight
                                                              target:target
                                            selector:@selector(doSomething)]; 
```

然后该项目进入CCmenu

```
CCMenu *menu = [CCMenu menuWithItems:myItem, nil]; 
```

现在，问题来了。如果我做

```
[self addChild:menu]; 
```

绘图调用将增加，即使是来自批处理节点的精灵，我也做不到

```
[mySpriteSheet addChild:menu]; 
```

因为它会崩溃。

我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T19:44:19.660

简短的回答：你不能。

长答案（不完全是）：你必须编辑 CCMenu 的代码才能工作。恕我直言，不值得麻烦，编写自己的支持批处理的按钮/菜单类要容易得多。

# php - 如何将php调用到wordpress页面ajax

> ID：15073643
> 
> 赞同：-1
> 
> 时间：2013-02-25T18:18:00.640
> 
> 标签：php, mysql, ajax

我正在制作一些页面，其中包含一些来自数据库的排序内容。A已经对php进行了排序，我需要通过按钮适当地调用它，并且我需要将taht php输出写入已经在页面上的某个div。是否可以？

排序.php

```
<?php
mysql_connect("localhost", "login", "pass") or die(mysql_error());
mysql_select_db("database");

$result = mysql_query("SELECT * FROM table ORDER BY added ASC");

while($row = mysql_fetch_array($result))
  {
  echo "<div class='something'>";
  echo "<a href='$row[link]'>";
  echo "<img src='$row[img]' height='125' width='125'/>";
  echo "<p>$row[name]</p></a></div>";
  echo "<br>";
  }
?> 
```

每种类型的排序或过滤器都将由不同的 php 处理。这是如何制作这种页面的好方法吗？还是有一些更简单更好的方法？还有一件事情。选择不同类型的过滤器时是否可以进行一些转换？我想要这样的东西：[流沙](http://razorjack.net/quicksand/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:57:01.437

如果你可以在你的页面中包含 jQuery，它有一个简写的方法来做到这一点：[`.load()`](http://api.jquery.com/load/). 您的最终 javascript 可能如下所示：

```
$(document).ready(function() {

    $("#searchButton").bind('click', function() {
        $("#resultsDiv").load(
            'http://mysite.com/sorting.php',
            { // parameters, in object literal format
               sortDir: 'asc',
               sortCol: 'lastname'
               // etc.
            }
        );
    });

}); 
```

您将 mysite.com、searchButton 和 resultsDiv 替换为您的站点/标记的真实信息。您还可以使用 jquery 选择器从页面元素中获取排序参数，如下所示：`$("#sortDir").val()`- 假设一个文本框、文本区域或选择框。假设您的表单使用它们，还有其他方法可以检索复选框和单选按钮。要回答您的其他问题：

> 1) 每种类型的排序或过滤器都将由不同的 php 处理。这是如何制作这种页面的好方法吗？还是有一些更简单更好的方法？

对于少数人来说并非不合理。不接受服务器上的任何参数是确保您永远不会允许恶意输入的一种方法。当您需要更改表名或您选择的列并且必须修改每个文件时，它往往会变得笨拙。您还需要意识到，如果您允许过滤器和排序的组合，您就是在谈论支持它们的交集。如果你有 3 个过滤器和 4 个排序，那就是 12 种组合。如果要添加另一个排序和另一个过滤器，则必须为过滤器添加 4 个新页面和为排序添加 5 个新页面 - 而且每次都会变得更糟。

大多数人会采用让所有数据进入同一页面的方法，并且只有该页面负责验证用户输入、制定查询并返回结果。这种范式通常称为[DRY，表示 Don't Repeat Yourself](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)。但是，如果您接受用户输入，则需要非常小心地[验证它](https://www.google.com/search?hl=en&q=validate%20user%20input%20php)（在服务器端！[不要相信用户输入](https://www.google.com/search?q=don%27t%20trust%20user%20input)！）并且不允许例如[SQL 注入](http://php.net/manual/en/security.database.sql-injection.php) [攻击](http://en.wikipedia.org/wiki/SQL_injection)。

> 2) 还有一件事。选择不同类型的过滤器时是否可以进行一些转换？我想要这样的东西：流沙

那个特定的动画非常复杂。他们在为每个页面显示的图标之间运行差异，并以编程方式自定义要缩小、爆炸、移动等的图标。我可以更详细地了解如何自己做......

但你知道吗？它是一个插件，与 jQuery 1.3+ 兼容，并在 MIT 和 GPLv2 下获得许可，因此将它整合到您的站点中应该没有问题。检查[文档](http://razorjack.net/quicksand/docs-and-demos.html)并自己尝试一下。我没有看到任何与排序您返回的标记类型本质上不兼容的东西。我确实注意到他们的示例使用`li`标签进行排序，而您的示例返回使用`div`. 但这不应该是一个主要的挂断，如果是，只需 return `li`s 。当您在使用它时遇到问题时，请发布另一个问题，适当地标记它并准备发布您在这方面尝试过的所有内容。

# asp.net-mvc - 向 MVC 添加服务层 - 如果服务层不知道 ViewModel，如何处理 Edit()？

> ID：15073648
> 
> 赞同：0
> 
> 时间：2013-02-25T18:18:21.603
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我有一个带有控制器的 MVC 层，这些控制器使用服务层来获取和存储数据。在我的服务层中，我有这样的方法：

```
public interface ISetServices
    {
        List<Set> GetBreadcrumbs(int? parentSetId);

        List<Set> GetAllSets();
        List<Set> GetAllTopLevelArchivedSets();
        List<Set> GetTopLevelSets();
        Set GetSet(int? setId);
        Set CreateSet(string name, string details, int? parentSetId);
        void DeleteSet(int? setId);
        void ArchiveSet(int? setId);
        void UnArchiveSet(int? setId);
  / etc 
```

我的 MVC 层使用 viewModels 来显示数据。在实现编辑服务之前，这一直很好——我现在要做的是创建一个 UpdateSet 方法，该方法从控制器中获取一个 viewModel 并相应地更新数据库。

由于 MVC 层依赖于 Service 层，因此 Service 层不了解 viewModel。这是依赖注入的地方吗？或者有没有更好的方法来解决我忽略的这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:45:48.530

您需要将 ViewModel 转换为`Set`，然后将其传递给服务层。

```
public class SetController : Controller
{
    public Action Edit(SetViewModel viewModel)
    {
        var set = _setService.GetSet(viewModel.SetId);
        set.Prop1 = viewModel.Prop1;
        _setService.Edit(set);
    }
} 
```

# xml - 反序列化类型对象时出错：文件意外结束

> ID：15073649
> 
> 赞同：0
> 
> 时间：2013-02-25T18:18:26.697
> 
> 标签：xml, wcf, soap, soapui

我使用soapui来模拟一个wcf服务来获得响应，但我只是得到了错误

> 反序列化类型对象时出错：文件意外结束。以下元素未关闭：令牌，....

我认为这里的 xml 是错误的

```
 <nsb:Token>"r$1SEdfuY&(r97*9U(_N0uBIdsfb76t7eeD-%^*V(EdOG9pNH)<9_G6"</nsb:Token> 
```

感谢您修复它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:21:24.703

这是无效的 XML：

```
 <nsb:Token>"r$1SEdfuY&(r97*9U(_N0uBIdsfb76t7eeD-%^*V(EdOG9pNH)<9_G6"</nsb:Token>
                                                                  ^---- 
```

指示的`<`应该至少是一个，或者是 cdata 块内部`&gt;`的全部内容。`<nsb:token>`

# javascript - 如何使用纯 JavaScript 为 iOS 实现触摸事件？

> ID：15073651
> 
> 赞同：-1
> 
> 时间：2013-02-25T18:18:33.373
> 
> 标签：javascript

我有一个普通的 javascript，用于在 HTML 页面中拖动和移动 DIV 标签这适用于鼠标移动、鼠标向上和鼠标向下事件现在我想扩展它并使其适用于触摸设备（iPhone）有人可以帮我做到这一点

```
 if (document.getElementById) {

        (function () {

            var n = 500;
            var dragok = false;
            var y, x, d, dy, dx;

            function move(e) {
                if (!e) e = window.event;
                if (dragok) {
                    d.style.left = dx + e.clientX - x + "px";
                    d.style.top = dy + e.clientY - y + "px";
                    return false;
                }
            }

            function down(e) {
                if (!e) e = window.event;
                var temp = (typeof e.target != "undefined") ? e.target : e.srcElement;
                if (temp.tagName != "HTML" | "BODY" && temp.className != "dragclass") {
                    temp = (typeof temp.parentNode != "undefined") ? temp.parentNode : temp.parentElement;
                }
                if (temp.className == "dragclass") {
                    dragok = true;
                    temp.style.zIndex = n++;
                    d = temp;
                    dx = parseInt(temp.style.left + 0);
                    dy = parseInt(temp.style.top + 0);
                    x = e.clientX;
                    y = e.clientY;
                    document.onmousemove = move;
                    return false;
                }
            }

            function up() {
                dragok = false;
                document.onmousemove = null;
            }

            document.onmousedown = down;
            document.onmouseup = up;

            document.body.addEventListener("touchstart", down, true);
            document.body.addEventListener("touchcancel", up, true);
            document.body.addEventListener("touchmove", move, true);

        })(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:23:07.460

你有事件：touchstart、touchmove 和 touchend。他们将以同样的方式工作

[https://developer.mozilla.org/en-US/docs/DOM/Touch_events](https://developer.mozilla.org/en-US/docs/DOM/Touch_events)

实现这一点的最佳方法是通过 Modernizr 之类的库或类似的库来测试浏览器是否能够触摸：

```
var isTouch = "ontouchstart" in window;

if(isTouch){
   el.addEventListener('touchstart', handlerStart);
   el.addEventListener('touchmove', handlerMove);
   el.addEventListener('touchend', handlerEnd);
} else{
   el.addEventListener('mousedown', handlerStart);
   el.addEventListener('mousemove', handlerMove);
   el.addEventListener('mouseup', handlerEnd);
} 
```

根据您要执行的操作的复杂性，两种情况的处理程序可能相同，但您可能必须为鼠标和触摸使用不同的处理程序

# php - 无法提取数据以获取谷歌图表。没有显示任何内容，但 getdata.php 显示 json 编码数据

> ID：15073654
> 
> 赞同：0
> 
> 时间：2013-02-25T18:18:36.913
> 
> 标签：php, mysql, google-visualization

这是我的2个文件。//getdata.php：提取数据并使用json_encode转换为json格式。这是编码数据的正确方法吗？我没有更改列名。那有必要吗？

```
<?php

mysql_connect('localhost','akshita','123456');
mysql_select_db('rcusers');

$sqlquery1="select userid,group_name,req_nodes,actualPE from jobs where userid='zhang' limit 200";

$sqlresult1=mysql_query($sqlquery1);

$rows=array();

while($r=mysql_fetch_assoc($sqlresult1)){
        $rows[]=$r;
}
print json_encode($rows);
?> 
```

//chartDraw.php: 使用api函数打印。什么都没有显示。

```
<html>
<head>
<!--Load the AJAX API -->
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js" type="text/javascript"></script>

<script type="text/javascript">

//Load the visualization API and the piechart package
google.load('visualization','1',{'packages':['corechart']});

//Set a callback to run when the google visualization API is loaded
google.setOnLoadCallback(drawchart);

function drawChart(){
  var jsonData = $.ajax({
        url:"getData.php",
        dataType:"json",
        async:false
        }).responseText;

//Create our data table out of JSON data loaded from server
var data=new google.visualization.DataTable(jsonData);

//Instantiate and draw our chart, passing in some options
var chart=new google.visualization.PieChart(document.getElementById('chart_div'));
chart.draw(data,{width:400,height:240});
}

</script>
</head>

<body>
        <!--Div that will hold the pie chart -->
        <div id="chart_div"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:23:38.290

您需要花一些时间来了解 ajax 是如何工作的。它不是同步的，因为它不会立即返回响应，而是在请求完成后通过回调传递响应。

```
var jsonData = $.ajax({
    url:"getData.php",
    dataType:"json",
    async:false,
    success : function(response) {
        // Init chart here
    }
    }); 
```

你可能会因为使用 mysql 函数而受到指责，这些函数将在 PHP 5.5 中被弃用并在未来被删除。

# validation - 用于 validateDateTimeRange 的 JSPX 特立尼达 messageDetailNotInRange 不起作用

> ID：15073655
> 
> 赞同：2
> 
> 时间：2013-02-25T18:18:38.020
> 
> 标签：validation, myfaces, jspx, trinidad

我正在尝试按照文档覆盖默认[`validateDateTimeRange`](http://myfaces.apache.org/trinidad/trinidad-api/tagdoc/tr_validateDateTimeRange.html)消息。`messageDetailNotInRange`

尽管有我的代码，但验证器会产生默认错误消息：“日期超出有效范围。” 任何人都可以在这里看到问题吗？

```
<tr:inputDate required="true"
              inlineStyle="color:rgb(0,58,117); font-weight:bold;"
              value="#{processScope.benefit.serviceDate}"
              immediate="false"
              onchange="submit();"
              label="#{mb_ResourceBean.res['claim.serviceDate.label']}">

  <tr:convertDateTime pattern="yyyy/MM/dd"
                      secondaryPattern="yyyyMMdd"
                      type="date"/>

  <tr:validateDateTimeRange minimum="#{bk_ClaimBean.minDate}"
                            maximum="#{bk_ClaimBean.maxDate}"
                            messageDetailNotInRange="The value of {1} exceeds the 30 day limitation to submit claim.  The service date must be within the previous 30 days."/>

</tr:inputDate> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T20:58:01.570

您的代码看起来不错。您可以尝试不同的方法并将带有密钥的消息添加`org.apache.myfaces.trinidad.validator.DateTimeRangeValidator.NOT_IN_RANGE`到项目的消息包中以覆盖特立尼达的默认消息。

如果您没有在项目中使用消息包，则可以将其添加到您的`faces-config.xml`：

```
<application>
  <locale-config>
    <default-locale>en</default-locale>
    <supported-locale>en</supported-locale>
  </locale-config>
  <message-bundle>
    messages
  </message-bundle>
</application> 
```

并将消息包的相应属性文件添加到应用程序资源中：

```
messages.properties 
```

如果您使用的是 Maven，请确保将资源文件夹（如果还没有）添加`build`到`pom.xml`.

```
<resources>
  <resource>
    <directory>src/main/resources</directory>
  </resource>
</resources> 
```

以下是您可以在消息包中覆盖的所有可能消息的列表：

```
org.apache.myfaces.trinidad.UIXEditableValue.REQUIRED=A value is required.
org.apache.myfaces.trinidad.UIXEditableValue.REQUIRED_detail=You must enter a value.
org.apache.myfaces.trinidad.UIXSelectMany.REQUIRED=A selection is required.
org.apache.myfaces.trinidad.UIXSelectMany.REQUIRED_detail=You must make at least one selection.
org.apache.myfaces.trinidad.UIXSelectOne.REQUIRED=A selection is required.
org.apache.myfaces.trinidad.UIXSelectOne.REQUIRED_detail=You must make a selection.
org.apache.myfaces.trinidad.UIXTableSelectOne.REQUIRED=A row selection is required.
org.apache.myfaces.trinidad.UIXTableSelectOne.REQUIRED_detail=You must select a row.
org.apache.myfaces.trinidad.UIXTableSelectMany.REQUIRED=A row selection is required.
org.apache.myfaces.trinidad.UIXTableSelectMany.REQUIRED_detail=You must select one or more rows.
org.apache.myfaces.trinidad.UIXSelectMany.UNSUPPORTED_MODEL_TYPE=Unsupported model type.
org.apache.myfaces.trinidad.UIXSelectMany.UNSUPPORTED_MODEL_TYPE_detail=SelectMany does not support a model of type {0}.
org.apache.myfaces.trinidad.UIXEditableValue.CONVERSION=The value is not the in correct format.
org.apache.myfaces.trinidad.UIXEditableValue.CONVERSION_detail=Enter a value that matches this pattern: {2}
org.apache.myfaces.trinidad.UPLOAD=The file is too large.
org.apache.myfaces.trinidad.UPLOAD_detail=The file could not be uploaded because it is too large.
org.apache.myfaces.trinidad.validator.RangeValidator.MAXIMUM_HINT=Enter a number less than or equal to {0}.
org.apache.myfaces.trinidad.validator.RangeValidator.MINIMUM_HINT=Enter a number greater than or equal to {0}.
org.apache.myfaces.trinidad.validator.RangeValidator.RANGE_HINT=Enter a number between {0} and {1}.
org.apache.myfaces.trinidad.validator.LengthValidator.MAXIMUM_HINT=Enter {0} or fewer characters.
org.apache.myfaces.trinidad.validator.LengthValidator.MINIMUM_HINT=Enter {0} or more characters.
org.apache.myfaces.trinidad.validator.LengthValidator.EXACT_HINT=Enter {0} characters.
org.apache.myfaces.trinidad.validator.LengthValidator.RANGE_HINT=Enter between {0} and {1} characters.
org.apache.myfaces.trinidad.validator.DateTimeRangeValidator.MAXIMUM_HINT=Enter a date on or before {0}.
org.apache.myfaces.trinidad.validator.DateTimeRangeValidator.MINIMUM_HINT=Enter a date on or after {0}.
org.apache.myfaces.trinidad.validator.DateTimeRangeValidator.RANGE_HINT=Enter a date between {0} and {1}.
org.apache.myfaces.trinidad.validator.DateRestrictionValidator.WEEKDAY_HINT=Enter a date that falls on one of the following days: {0}
org.apache.myfaces.trinidad.validator.DateRestrictionValidator.MONTH_HINT=Enter a date from one of the following months: {0}
javax.faces.validator.LongRangeValidator.MINIMUM=The number is too low.
javax.faces.validator.LongRangeValidator.MINIMUM_detail=The number must be greater than or equal to {2}.
javax.faces.validator.LongRangeValidator.MAXIMUM=The number is too high.
javax.faces.validator.LongRangeValidator.MAXIMUM_detail=The number must be less than or equal to {2}.
javax.faces.LongRange=The number is not a whole number.
javax.faces.LongRange_detail=Enter a whole number.
org.apache.myfaces.trinidad.validator.ByteLengthValidator.MAXIMUM=The value is too long.
org.apache.myfaces.trinidad.validator.ByteLengthValidator.MAXIMUM_detail=Enter a value that is not more than {2} bytes long.
org.apache.myfaces.trinidad.validator.DateTimeRangeValidator.MAXIMUM=The date is after the valid range.
org.apache.myfaces.trinidad.validator.DateTimeRangeValidator.MAXIMUM_detail=The date must be on or before {2}.
org.apache.myfaces.trinidad.validator.DateTimeRangeValidator.MINIMUM=The date is before the valid range.
org.apache.myfaces.trinidad.validator.DateTimeRangeValidator.MINIMUM_detail=The date must be on or after {2}.
org.apache.myfaces.trinidad.validator.DateTimeRangeValidator.NOT_IN_RANGE=The date is outside the valid range.
org.apache.myfaces.trinidad.validator.DateTimeRangeValidator.NOT_IN_RANGE_detail=The date must be between {2} and {3}.
org.apache.myfaces.trinidad.validator.DateRestrictionValidator.DAY=The date is not valid.
org.apache.myfaces.trinidad.validator.DateRestrictionValidator.DAY_detail=Enter one of the valid dates.
org.apache.myfaces.trinidad.validator.DateRestrictionValidator.MONTH=Dates in this month are not valid.
org.apache.myfaces.trinidad.validator.DateRestrictionValidator.MONTH_detail=Enter a date in one of the following months: {2}
org.apache.myfaces.trinidad.validator.DateRestrictionValidator.WEEKDAY=The day of the week for this date is not valid.
org.apache.myfaces.trinidad.validator.DateRestrictionValidator.WEEKDAY_detail=Enter a date that is on one of the following days: {2}
org.apache.myfaces.trinidad.validator.DoubleRangeValidator.MAXIMUM=The number is too high.
org.apache.myfaces.trinidad.validator.DoubleRangeValidator.MAXIMUM_detail=The number must be less than or equal to {2}.
org.apache.myfaces.trinidad.validator.DoubleRangeValidator.MINIMUM=The number is too low.
org.apache.myfaces.trinidad.validator.DoubleRangeValidator.MINIMUM_detail=The number must be greater than or equal to {2}.
org.apache.myfaces.trinidad.validator.DoubleRangeValidator.NOT_IN_RANGE=The number is outside the valid range.
org.apache.myfaces.trinidad.validator.DoubleRangeValidator.NOT_IN_RANGE_detail=The number must be between {2} and {3}.
org.apache.myfaces.trinidad.validator.LengthValidator.MAXIMUM=There are too many characters.
org.apache.myfaces.trinidad.validator.LengthValidator.MAXIMUM_detail=Enter {2} or fewer characters, not more.
org.apache.myfaces.trinidad.validator.LengthValidator.MINIMUM=There are too few characters.
org.apache.myfaces.trinidad.validator.LengthValidator.MINIMUM_detail=Enter {2} or more characters, not fewer.
org.apache.myfaces.trinidad.validator.LengthValidator.NOT_IN_RANGE=The number of characters is out of range.
org.apache.myfaces.trinidad.validator.LengthValidator.NOT_IN_RANGE_detail=Enter {2} or more characters, up to a maximum of {3}.
org.apache.myfaces.trinidad.validator.LengthValidator.EXACT=The number of characters is incorrect.
org.apache.myfaces.trinidad.validator.LengthValidator.EXACT_detail=Enter exactly {2} characters.
org.apache.myfaces.trinidad.validator.LongRangeValidator.MAXIMUM=The number is too high.
org.apache.myfaces.trinidad.validator.LongRangeValidator.MAXIMUM_detail=The number must be less than or equal to {2}.
org.apache.myfaces.trinidad.validator.LongRangeValidator.MINIMUM=The number is too low.
org.apache.myfaces.trinidad.validator.LongRangeValidator.MINIMUM_detail=The number must be greater than or equal to {2}.
org.apache.myfaces.trinidad.validator.LongRangeValidator.NOT_IN_RANGE=The number is out of range.
org.apache.myfaces.trinidad.validator.LongRangeValidator.NOT_IN_RANGE_detail=The number must be between {2} and {3}.
org.apache.myfaces.trinidad.validator.RegExpValidator.NO_MATCH=The format is incorrect.
org.apache.myfaces.trinidad.validator.RegExpValidator.NO_MATCH_detail=The value must match this pattern: {2}
org.apache.myfaces.trinidad.convert.DateTimeConverter.DATE_HINT=Example: {0}
org.apache.myfaces.trinidad.convert.DateTimeConverter.TIME_HINT=Example: {0}
org.apache.myfaces.trinidad.convert.DateTimeConverter.BOTH_HINT=Example format: {0}
org.apache.myfaces.trinidad.convert.ColorConverter.FORMAT_HINT=Example format: {0}
org.apache.myfaces.trinidad.convert.NumberConverter.FORMAT_HINT=Example format: {0}
org.apache.myfaces.trinidad.convert.DateTimeConverter.CONVERT_DATE=The date is not in the correct format.
org.apache.myfaces.trinidad.convert.DateTimeConverter.CONVERT_DATE_detail=Enter a date in the same format as this example: {2}
org.apache.myfaces.trinidad.convert.DateTimeConverter.CONVERT_TIME=The time is not in the correct format.
org.apache.myfaces.trinidad.convert.DateTimeConverter.CONVERT_TIME_detail=Enter a time in the same format as this example: {2}
org.apache.myfaces.trinidad.convert.DateTimeConverter.CONVERT_BOTH=The date and time is not in the correct format.
org.apache.myfaces.trinidad.convert.DateTimeConverter.CONVERT_BOTH_detail=Enter a date and time in the same format as this example: {2}
org.apache.myfaces.trinidad.convert.DateTimeConverter.CONVERT_DATE_INVALID_DATE=The date or time entered is not valid.
org.apache.myfaces.trinidad.convert.DateTimeConverter.CONVERT_DATE_INVALID_DATE_detail=Enter a valid date or time.
org.apache.myfaces.trinidad.convert.ColorConverter.CONVERT=The color is not in the correct format.
org.apache.myfaces.trinidad.convert.ColorConverter.CONVERT_detail=Enter a color in the same format as this example: {2}.
org.apache.myfaces.trinidad.convert.ColorConverter.TRANSPARENT=Transparent
org.apache.myfaces.trinidad.convert.IntegerConverter.CONVERT=The number is not a whole number.
org.apache.myfaces.trinidad.convert.IntegerConverter.CONVERT_detail=Enter a whole number.
org.apache.myfaces.trinidad.convert.IntegerConverter.MINIMUM=The number is too low.
org.apache.myfaces.trinidad.convert.IntegerConverter.MINIMUM_detail=The number must be greater than or equal to {2}.
org.apache.myfaces.trinidad.convert.IntegerConverter.MAXIMUM=The number is too high.
org.apache.myfaces.trinidad.convert.IntegerConverter.MAXIMUM_detail=The number must be less than or equal to {2}.
org.apache.myfaces.trinidad.convert.LongConverter.CONVERT=The number is not a whole number.
org.apache.myfaces.trinidad.convert.LongConverter.CONVERT_detail=Enter a whole number.
org.apache.myfaces.trinidad.convert.LongConverter.MINIMUM=The number is too low.
org.apache.myfaces.trinidad.convert.LongConverter.MINIMUM_detail=The number must be greater than or equal to {2}.
org.apache.myfaces.trinidad.convert.LongConverter.MAXIMUM=The number is too high.
org.apache.myfaces.trinidad.convert.LongConverter.MAXIMUM_detail=The number must be less than or equal to {2}.
org.apache.myfaces.trinidad.convert.NumberConverter.CONVERT_PATTERN=The format is incorrect.
org.apache.myfaces.trinidad.convert.NumberConverter.CONVERT_PATTERN_detail=The format of the number must match this pattern: {2}
org.apache.myfaces.trinidad.convert.NumberConverter.CONVERT_NUMBER=The value is not a number.
org.apache.myfaces.trinidad.convert.NumberConverter.CONVERT_NUMBER_detail=The value must be a number.
org.apache.myfaces.trinidad.convert.NumberConverter.CONVERT_CURRENCY=The currency format is incorrect.
org.apache.myfaces.trinidad.convert.NumberConverter.CONVERT_CURRENCY_detail=Enter a currency in the same format as this example: {2}
org.apache.myfaces.trinidad.convert.NumberConverter.CONVERT_PERCENT=The percentage is not in the correct format.
org.apache.myfaces.trinidad.convert.NumberConverter.CONVERT_PERCENT_detail=Enter a percentage in the same format as this example: {2}
org.apache.myfaces.trinidad.convert.ShortConverter.CONVERT=The number is not a whole number.
org.apache.myfaces.trinidad.convert.ShortConverter.CONVERT_detail=Enter a whole number.
org.apache.myfaces.trinidad.convert.ShortConverter.MINIMUM=The number is too low.
org.apache.myfaces.trinidad.convert.ShortConverter.MINIMUM_detail=The number must be greater than or equal to {2}.
org.apache.myfaces.trinidad.convert.ShortConverter.MAXIMUM=The number is too high.
org.apache.myfaces.trinidad.convert.ShortConverter.MAXIMUM_detail=The number must be less than or equal to {2}.
org.apache.myfaces.trinidad.convert.ByteConverter.CONVERT=The number is not a whole number.
org.apache.myfaces.trinidad.convert.ByteConverter.CONVERT_detail=Enter a whole number.
org.apache.myfaces.trinidad.convert.ByteConverter.MINIMUM=The number is too low.
org.apache.myfaces.trinidad.convert.ByteConverter.MINIMUM_detail=The number must be greater than or equal to {2}.
org.apache.myfaces.trinidad.convert.ByteConverter.MAXIMUM=The number is too high.
org.apache.myfaces.trinidad.convert.ByteConverter.MAXIMUM_detail=The number must be less than or equal to {2}.
org.apache.myfaces.trinidad.convert.DoubleConverter.CONVERT=The value is not a number.
org.apache.myfaces.trinidad.convert.DoubleConverter.CONVERT_detail=The value must be a number.
org.apache.myfaces.trinidad.convert.FloatConverter.CONVERT=The value is not a number.
org.apache.myfaces.trinidad.convert.FloatConverter.CONVERT_detail=The value must be a number.
org.apache.myfaces.trinidad.convert.ALERT_FORMAT={0} - {1}
org.apache.myfaces.trinidad.convert.ALERT_FORMAT_detail={0} - {1}
org.apache.myfaces.trinidad.event.FileDownloadActionListener.DOWNLOAD_ERROR=An error occurred downloading the file.
org.apache.myfaces.trinidad.event.FileDownloadActionListener.DOWNLOAD_ERROR_detail=The file was not downloaded or was not downloaded correctly.
org.apache.myfaces.trinidad.component.core.input.CoreInputFile.INPUT_FILE_ERROR=An error occurred uploading the file.
org.apache.myfaces.trinidad.component.core.input.CoreInputFile.INPUT_FILE_ERROR_detail=A file upload error has occurred, please verify your upload data and file name. 
```

# ruby-on-rails - 如何追踪 Rails 中的路由正在命中的控制器？

> ID：15073657
> 
> 赞同：0
> 
> 时间：2013-02-25T18:18:44.110
> 
> 标签：ruby-on-rails

我有一个 URL：`http://api.mysite.com/api/v3/publishers/somepublisher.json?callback=mysite.publisherLoaded`我正在尝试追踪调用哪个方法来访问它。`publisherLoaded`响应是包含在回调中的 JSON 字符串。

谁能指导我如何开始追踪这个？

我`routes.rb`的比较大，所以我粘贴了相关部分：

```
API_OPTIONS = {:requirements => {:api_version => /v(1|2|3)/}} unless Object.const_defined?(:API_OPTIONS)

ActionController::Routing::Routes.draw do |map|

  map.namespace :api, API_OPTIONS.merge(:path_prefix => '/api/:api_version') do |api|
    api.resources :apps, :member => {:authenticate => :get}
    api.resources :foreign_currencies
    api.resources :designers

    api.resources :publishers, API_OPTIONS.merge(:has_many => [:user_sessions, :products], :member => {:login => :get, :authenticate => :get}) do |publisher|
      publisher.resources :app_earning_constraints
      publisher.resource :charts, API_OPTIONS
      publisher.resource :reports, API_OPTIONS
      publisher.resources :rules, API_OPTIONS      
      publisher.resources :sales, API_OPTIONS.merge(
        :collection => { :current => :get }
      )

    # Generic App Scoped Services
    map.namespace :api, API_OPTIONS.merge(:path_prefix => '/api/:api_version/app/:app_id', :name_prefix => 'api_app_') do |api|
      api.resources :publishers, API_OPTIONS.merge(:has_many => [:aisles], :member => {:login => :get}) do |publisher|
        publisher.resources :users, API_OPTIONS.merge(:member => {:authenticate => :post}) do |user|
          user.resource :app_state, API_OPTIONS.merge(:controller => 'user_app_states')

          # Used to generate a session from OAuth data (OpenSocial integrations)
          user.resources :sessions, API_OPTIONS

        end            

        publisher.resources :application_events, 
          :as => 'events',
          :only => :none, 
          :collection => { :install => :post, :uninstall => :post }

        publisher.resources :credit_transfer_pricepoints, API_OPTIONS
      end
    end
  end

  # Dynamic javascripts
  map.connect 'javascripts/*javascript.plain.js', :controller => 'javascripts', :action => 'show', :format => 'js', :requirements => {:javascript => /#{Dir['app/views/javascripts/**/*.js.erb'].map {|s| s[22..-8]} * '|'}/}
  map.connect 'javascripts/*javascript.js', :controller => 'javascripts', :action => 'show', :format => 'js', :requirements => {:javascript => /#{Dir['app/views/javascripts/**/*.js.erb'].map {|s| s[22..-8]} * '|'}/}

  # Administration Site
  map.with_options(:controller => 'admin/site') do |admin_site|
    admin_site.admin_default 'admin', :action => 'index'
    admin_site.admin_home 'admin/home', :action => 'index'
  end

  map.notfound '*url', :controller => 'error', :action => 'notfound'
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T01:40:36.293

[按照adamdunson](https://stackoverflow.com/users/1095946/adamdunson "adamdunson")`bundle exec rake routes`的建议运行后，我发现我想要的是：

`GET /api/:api_version/publishers/:id(.:format) {:controller=>"api/publishers", :action=>"show"}`

它正在使用文件夹`publishers`中的控制器。`api`

# vbscript - microsoft excel 对象模型中的应用程序对象

> ID：15073658
> 
> 赞同：0
> 
> 时间：2013-02-25T18:18:44.507
> 
> 标签：vbscript, excel.application

今天在练习vb脚本时，我想出了一点疑问，请帮助消除我的疑问。我已经编写了这段代码并在我的 D: 驱动器中创建了一个 excel 表

```
dim excel
SET excel=CreateObject("Excel.Application")
excel.Visible=true
excel.application.Workbooks.Add
excel.ActiveWorkbook.SaveAs"D:\pushkar23.xls"
excel.quit
SET excel=nothing 
```

但是如果我换行

```
excel.application.Workbooks.Add 
```

至

```
excel.Workbooks.Add 
```

然后仍然在我的 D: 驱动器中创建工作表。
请告诉我这两种方法之间是否有任何区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:50:05.537

如果您查看[文档](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.application_properties.aspx)，您会看到 Application 对象（以及其他一些对象，例如 Workbook）具有一个 Application 属性，该属性

> 返回一个表示指定对象的创建者的应用程序对象

它总是一样的：

选项显式

```
Dim oExcel : Set oExcel = CreateObject("Excel.Application")
WScript.Echo 0, CStr(oExcel Is oExcel.Application)
WScript.Echo 1, CStr(oExcel Is oExcel.Application.Application.Application)
Dim oWB : Set oWB = oExcel.Application.Application.Workbooks.Add
WScript.Echo 2, CStr(oWB.Application Is oExcel.Application)
oExcel.Quit 
```

输出：

```
0 True
1 True
2 True 
```

但是，为了效率和清晰度，您应该尽可能使用普通的 oExcel。

# iphone - API调用iphone的程序崩溃

> ID：15073666
> 
> 赞同：0
> 
> 时间：2013-02-25T18:19:17.267
> 
> 标签：iphone, json, api

我有两页：

登录页面和注册页面：

对于登录页面，我使用以下内容获取信息并将失败或成功响应传递给用户：

```
- (void)login:(UIButton *)sender
{
    [self.appDel.api loginWithEmail:self.email.text
                           password:self.password.text
                  completionHandler:^(id response, NSError *error) {
                      if (error) {
                          NSLog(@"ERROR: %@", error);
                      } else {
                          if ([[response objectForKey:Status] isEqualToString:Success]) {
                              self.currentUser = [response objectForKey:kResponseUser];
                              self.currentUserProfile = [response objectForKey:Profile];
                              [self.presentingViewController dismissViewControllerAnimated:YES completion:NULL];
                          } else {
                              NSLog(@"FAIL: %@", response);
                              [[[UIAlertView alloc] initWithTitle:@"Login Failed"
                                                          message:[response description]
                                                         delegate:nil
                                                cancelButtonTitle:@"OK"
                                                otherButtonTitles:nil] show];
                          }
                      }
                  }];
} 
```

将此用于登录页面，如果用户没有完成两个必需的 texfields 或其中一个填充另一个空并按登录，他将收到失败消息。

但是，在注册的情况下，当文本字段为空并且我们单击注册时程序会崩溃。我应该如何改变这个：

```
-(void)signUp:(UIButton *)sender
{
    [self.api signup:self.Email.text
                                   password:self.Password.text
                       confirmationPassword:self.ConfirmPassword.text
                                  firstName:self.FirstName.text
                          completionHandler:^(id response, NSError *error) {
    if (error) {
        NSLog(@"ERROR: %@", error);
    } else {
        if ([[response objectForKey:Status] isEqualToString:Success]) {
        self.appDel.theNewUser = [response objectForKey:User];
        self.appDel.theNewUserProfile = [response objectForKey:Profile];
            [self.presentingViewController dismissViewControllerAnimated:YES completion:NULL];
        } else {
            NSLog(@"FAIL: %@", response);
            [[[UIAlertView alloc] initWithTitle:@"SignUp Failed"
                                        message:[response description]
                                       delegate:nil
                              cancelButtonTitle:@"OK"
                              otherButtonTitles:nil] show];
        }
    }
}];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:37:23.530

在您的注册方法中（或者更好的是，在您的 API 类中），检测 nil 和空值。现在的问题是您要在字典中插入一个 nil 值。

这是使用您的代码的示例。我检查是否有任何值长度等于零，如果是，则记录一个小错误。

```
-(void)signUp:(UIButton *)sender
{

    if ([[[self Email] text] length] == 0 ||
        [[[self Password] text] length] == 0 ||
        [[[self ConfirmPassword] text] length] == 0 ||
        [[[self FirstName] text] length] == 0) {

        // add an error alert here?

        NSLog(@"Hold on there!  You haven't filled everything in.");

        return;

    }

    [self.api signup:self.Email.text
                                   password:self.Password.text
                       confirmationPassword:self.ConfirmPassword.text
                                  firstName:self.FirstName.text
                          completionHandler:^(id response, NSError *error) {
    if (error) {
        NSLog(@"ERROR: %@", error);
    } else {
        if ([[response objectForKey:Status] isEqualToString:Success]) {
        self.appDel.theNewUser = [response objectForKey:User];
        self.appDel.theNewUserProfile = [response objectForKey:Profile];
            [self.presentingViewController dismissViewControllerAnimated:YES completion:NULL];
        } else {
            NSLog(@"FAIL: %@", response);
            [[[UIAlertView alloc] initWithTitle:@"SignUp Failed"
                                        message:[response description]
                                       delegate:nil
                              cancelButtonTitle:@"OK"
                              otherButtonTitles:nil] show];
        }
    }
}];

} 
```

# export - highcharts 导出服务器 js 脚本错误代码

> ID：15073667
> 
> 赞同：2
> 
> 时间：2013-02-25T18:19:19.750
> 
> 标签：export, highcharts, server-side, highstock

当我尝试根据[本教程](http://www.highcharts.com/component/content/article/2-news/52-serverside-generated-charts)在服务器端渲染图表时出现以下错误。

```
phantomjs highcharts-convert.js -infile options1.json -outfile chart1.png -scale 2.5 -width 300 -constr Chart -callback callback.js
SyntaxError: Parse error

SyntaxError: Parse error

Highcharts.options.parsed
Highcharts.callback.parsed
ReferenceError: Can't find variable: Highcharts

  phantomjs://webpage.evaluate():58
  phantomjs://webpage.evaluate():103
  phantomjs://webpage.evaluate():103
loading images...
loading images...
loading images...
loading images...
loading images...
loading images...
loading images...
loading images...
loading images...
loading images...
loading images...
loading images...
loading images...
loading images...
loading images...
loading images...
loading images...
loading images...
loading images...
loading images...
loading images...
loading images...
loading images...
loading images...
loading images...
loading images...
loading images...
loading images...
loading images...
loading images...
loading images...
loading images...
loading images...
loading images...
loading images...
loading images...
loading images...
loading images...
loading images...
loading images...
loading images...
loading images...
loading images...
loading images...
loading images...
loading images...
loading images...
loading images...
loading images...
loading images...
loading images...
loading images...
loading images...
loading images...
loading images...
loading images...
loading images...
loading images...
loading images... 
```

以下是与 hightcharts-convert.js 文件在同一目录下的文件。

```
 ls
callback.js            highcharts-more.js  highstock.js         options1.json
highcharts-convert.js  highcharts.js       jquery-1.8.2.min.js  readme.md 
```

options1.json 的内容

```
{
        xAxis: {
                categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
        },
        series: [{
                data: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]
        }]
}; 
```

callback.js 的内容

```
function(chart) {
        chart.renderer.arc(200, 150, 100, 50, -Math.PI, 0).attr({
                fill : '#FCFFC5',
                stroke : 'black',
                'stroke-width' : 1
        }).add();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T22:58:53.447

确保您的 highstock.js 是文本文件（不是二进制文件）！文件[http://code.highcharts.com/stock/highstock.js](http://code.highcharts.com/stock/highstock.js)被压缩....

所以这里有一个详细的食谱：

在 highcharts/exporting-server/phantomjs 中添加 3 个文件

```
cp js/highcharts.js exporting-server/phantomjs/
cp js/highcharts-more.js exporting-server/phantomjs/
curl http://code.highcharts.com/stock/highstock.js -o exporting-server/phantomjs/highstock.js.gz 
```

现在解压缩文件：

```
gzip -d exporting-server/phantomjs/highstock.js.gz 
```

如果你去文件夹：

```
cd exporting-server/phantomjs/ 
```

您可以检查 md5 校验和（当前版本 2.3.5）：

```
4a656e1918e259fbca5bb3bec6e3b945  highcharts-convert.js
3e2a05342b0d4d1b759dffffebc5f23f  highcharts-more.js
d6f1e284bc49d0502576e06d905274fd  highstock.js
cfa9051cc0b05eb519f1e16b2a6645d7  jquery-1.8.2.min.js
1fde128c0c2f8bf16fa1a4166e9b48c7  readme.md 
```

我们可以创建一个包含文件的示例文件夹：

```
mkdir test 
```

放置或创建两个输入文件：

第一个文件：**callback.js**

```
function(chart) {
        chart.renderer.arc(200, 150, 100, 50, -Math.PI, 0).attr({
                fill : '#FCFFC5',
                stroke : 'black',
                'stroke-width' : 1
        }).add();
} 
```

第二个文件： **infile.json**

```
{
        xAxis: {
                categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
        },
        series: [{
                data: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]
        }]
}; 
```

一个示例测试，这里是测试文件夹中的命令行：

```
phantomjs  ../highcharts-convert.js -infile infile.json  -callback callback.js -outfile a.png -width 2400 -constr Chart -scale 1 
```

控制台结果：

```
Highcharts.imagesLoaded:7a7dfcb5df73aaa51e67c9f38c5b07cb
done loading images 
```

这一切都是为了这个伟大的图书馆。

泽维尔

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T11:35:17.337

我认为这是正确的 JSON：

```
{
    "xAxis": {
            "categories": ["Jan", "Feb","Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"]
    },
    "series": [{
            "data": [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]
    }]
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-30T10:21:31.743

在我的情况下`highcharts.js`是一个文件丢失。

这件事可能会帮助某人。

# sql - 拆分当前查询以获取不同的项目

> ID：15073669
> 
> 赞同：0
> 
> 时间：2013-02-25T18:19:22.347
> 
> 标签：sql, tsql

抱歉，问题标题很差。希望我能在这里澄清一下：我不确定这在技术上是 CTE 还是只是看起来像一个。无论如何，如果您先查看输出，这将有助于更好地描述我正在寻找的内容：

```
var_Year  var_Month   var_Day   Total_Downloads
2013      2           25        100
2013      2           24        200
2013      2           23        100
2013      2           22        200
2013      2           21        100 
```

我想要两个额外的列来按产品显示下载次数，而不仅仅是总数。所需的输出将如下所示：

```
var_Year  var_Month   var_Day   Total_Downloads   Downloads_Prod_A    Downloads_Prod_B
2013      2           25        100               50                  50
2013      2           24        200               90                  110
2013      2           23        100               25                  75
2013      2           22        200               125                 75
2013      2           21        100               90                  10 
```

这是当前的 SQL 查询，缺少“产品 A”和“产品 B”的定义。假设“f_product”是数据库中将包含“产品 A”或“产品 B”的字段

```
SELECT var_Year, var_Month, var_Day, COUNT(var_Day) AS "Total_Downloads"
 FROM
  ( SELECT 
    DISTINCT f_downloadIPaddress, 
    DATEPART(YEAR,f_downloadtimestamp) as var_Year, 
    DATEPART(MONTH,f_downloadtimestamp) as var_Month,
    DATEPART(DAY,f_downloadtimestamp) as var_Day
    FROM tb_downloads
  ) tb_tempcalendar
 GROUP BY var_Year, var_Month, var_Day
 ORDER BY var_Year desc, var_Month desc, var_Day DESC 
```

我很难过，因为我无法确定我是否需要在当前 CTE 中使用另一个 CTE，或者是否可以使用 COUNT(DISTINCT x) 方法来完成？任何帮助表示赞赏。使用 SQL Server 2008 R2。

提前致谢， 比姆斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T18:24:40.330

我真的不明白你为什么删除了你之前的问题，但无论如何，我在那里发布的答案似乎对你仍然有效，你试过了吗？这是答案：

您拥有的是“派生表”，而不是 CTE。现在，我认为您可以直接查询您的表，如下所示：

```
SELECT  DATEPART(YEAR,f_downloadtimestamp) as var_Year, 
        DATEPART(MONTH,f_downloadtimestamp) as var_Month,
        DATEPART(DAY,f_downloadtimestamp) as var_Day,
        COUNT(DISTINCT f_downloadIPaddress) Total_Downloads,
        COUNT(DISTINCT CASE WHEN f_product = 'Product A' 
                           THEN f_downloadIPaddress END) Downloads_Prod_A,
        COUNT(DISTINCT CASE WHEN f_product = 'Product B' 
                           THEN f_downloadIPaddress END) Downloads_Prod_B
FROM tb_downloads
GROUP BY DATEPART(YEAR,f_downloadtimestamp),
         DATEPART(MONTH,f_downloadtimestamp),
         DATEPART(DAY,f_downloadtimestamp)
ORDER BY var_Year desc, var_Month desc, var_Day DESC 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T18:26:41.557

是的，你可以这样做`count (distinct)`：

```
SELECT var_Year, var_Month, var_Day, COUNT(distinct f_downloadIPaddress) AS "Total_Downloads",
       count(distinct case when d.product = 'A' then f_downloadIPaddress end) as ProductA,
       count(distinct case when d.product = 'B' then f_downloadIPaddress end) as ProductB
FROM (SELECT d.*, 
             DATEPART(YEAR,f_downloadtimestamp) as var_Year, 
             DATEPART(MONTH,f_downloadtimestamp) as var_Month,
             DATEPART(DAY,f_downloadtimestamp) as var_Day,
      FROM tb_downloads d
     ) d
 GROUP BY var_Year, var_Month, var_Day
 ORDER BY var_Year desc, var_Month desc, var_Day DESC 
```

请注意：两列之和可能大于总数。当两个产品具有相同的 IP 地址时会发生这种情况。

# javascript - 在javascript中将第一个字母和特殊字符（*＆^％。，）之后的每个字母大写，但无法在开头插入字符

> ID：15073673
> 
> 赞同：0
> 
> 时间：2013-02-25T18:19:27.457
> 
> 标签：javascript, regex

我正在尝试使用此代码进行大写，但无法编辑字符，它会自动写入结尾。

```
str.replace(new RegExp("^\\p{L} ^[\w.]+$ /(?:\b|_)([a-z])/g"), function ($1) {
    return $1.toUpperCase(); 
}); 
```

它可以在 Safari 中运行，但不能在 Firefox 中运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T18:30:06.550

正则表达式的第二部分就足够了。另请注意，您应该将`g`修饰符作为第二个参数传递：

演示：http: [//jsfiddle.net/ThinkingStiff/gpRLb/](http://jsfiddle.net/ThinkingStiff/gpRLb/)

```
str.replace(new RegExp("(?:\\b|_)([a-z])", "g"), function($1) {
    return $1.toUpperCase();
}); 
```

# sql-server - 如何在 SQL 中随机化外键值？

> ID：15073676
> 
> 赞同：3
> 
> 时间：2013-02-25T18:19:37.140
> 
> 标签：sql-server

我有一个表`MyTable`，其中有一个外键字段`OtherTableID`。

我已经有几千行了`MyTable`。现在我想随机化`OtherTableID`，以便它具有一些随机（但有效）的条目值`OtherTable`。

任何想法如何在一个简洁的查询中做到这一点，没有使用游标？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-25T19:06:03.223

```
;WITH x AS 
(
  /* apply a random row number to the other table */
  SELECT ID, rn = ROW_NUMBER() OVER (ORDER BY NEWID())
  FROM dbo.OtherTable
),
y AS 
(
  /* apply a sequential row number to the source table */
  SELECT ID, OtherTableID, rn = ROW_NUMBER() OVER (ORDER BY ID)
  FROM dbo.MyTable
)
/* now perform an update using a join on those row numbers */
UPDATE y SET OtherTableID = x.ID
  FROM y INNER JOIN x
  ON y.rn = x.rn; 
```

只要`dbo.OtherTable.ID`是唯一的，这不应该产生重复。这也取决于你所说的 - 中有更多行`dbo.OtherTable`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T19:15:52.693

编辑 5：经过测试，如果您不关心重复，这项工作就像一个魅力。100% 随机。您可以对其进行调整以不允许重复。

```
;WITH X AS
(
SELECT  ROW_NUMBER() OVER(ORDER BY IdOtherTable) AS 'Row', IdOtherTable
    FROM    OtherTable
)

UPDATE  MyTable
SET     IdOtherTable = (SELECT IdOtherTable
             FROM    X
             WHERE   Row =   round((SELECT RAND() * (SELECT COUNT(IdOtherTable) 
                                              FROM      OtherTable)), 0, 1) + 1) 
```

# coldfusion - AngularJS 和 ColdFusion CFC

> ID：15073677
> 
> 赞同：5
> 
> 时间：2013-02-25T18:19:39.130
> 
> 标签：coldfusion, angularjs, cfc

我正在尝试使用带有 ColdFusion 后端的 AngularJS，但遇到了一些障碍。我正在使用 CF Art Gallery 数据库修改他们的“待办事项”应用程序[http://angularjs.org/ 。](http://angularjs.org/)我正在尝试使用 AJAX 将 ColdFusion CFC 链接到 Angular 应用程序。

下面是我的艺术家.cfc：

```
<cfcomponent>

<cffunction name="getArtists" access="remote" >
    <cfargument name="firstName" default="">
    <cfargument name="lastName" default="">

    <cfquery name="getArtists_sql" datasource="cfartgallery">
        SELECT
            firstname as text,
            lastname as done 
        FROM artists
        WHERE 0=0
    <cfif firstName neq "">
        AND ucase(firstname) like ucase('%#FIRSTNAME#%')
    </cfif>
    <cfif lastName neq "">
        OR ucase(lastname) like ucase('%#LASTNAME#%')       
    </cfif>
    </cfquery>

    <cfreturn getArtists_sql>
</cffunction>

</cfcomponent> 
```

我使用带有以下代码的 AngularJS 调用 CFC：

```
function TodoCtrl($scope, $http) {
    $http.get('cfc/artists.cfc?method=getArtists&returnformat=json').
        success(function (response) {
            $scope.todos = data.DATA;
    }).
        error(function (data) {
            $scope.todos = data;
        });
} 
```

我知道我得到了回复。下面是 Chrome 的开发者工具为我返回的 JSON 字符串：

```
{
"COLUMNS":
    ["TEXT","DONE"],
"DATA":[
    ["Aiden","Donolan"],
    ["Austin","Weber"],
    ["Elicia","Kim"],
    ["Jeff","Baclawski"],
    ["Lori","Johnson"],
    ["Maxwell","Wilson"],
    ["Paul","Trani"],
    ["Raquel","Young"],
    ["Viata","Trenton"],
    ["Diane","Demo"],
    ["Anthony","Kunovic"],
    ["Ellery","Buntel"],
    ["Emma","Buntel"],
    ["Taylor Webb","Frazier"],
    ["Mike","Nimer"]
]} 
```

这看起来不像他们演示中使用的符号 Angular：

```
[
{text:'learn angular', done:true},
{text:'build an angular app', done:false}
] 
```

有人可以指出我如何才能让它正常工作的正确方向吗？理想情况下，我希望保持 CFC 完整，以便可以将其重用于不同的应用程序，因此 JSON 操作必须在 Javascript 端完成。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T18:25:37.053

默认情况下，Coldfusion 使用不同于您习惯的 JSON 表示法。列名存储在一个数组中，而数据存储在另一个数组中。我们实施的解决方案涉及将 CFquery 更改为数组。然后 JSONEncoding 该数组。

您将在这里需要此功能：

```
<cffunction name="QueryToArray" access="public" returntype="array" output="false"hint="This turns a query into an array of structures.">
    <cfargument name="Data" type="query" required="yes" />

    <cfscript>
        // Define the local scope.
        var LOCAL = StructNew();

        // Get the column names as an array.
        LOCAL.Columns = ListToArray( ARGUMENTS.Data.ColumnList );

        // Create an array that will hold the query equivalent.
        LOCAL.QueryArray = ArrayNew( 1 );

        // Loop over the query.
        for (LOCAL.RowIndex = 1 ; LOCAL.RowIndex LTE ARGUMENTS.Data.RecordCount ; LOCAL.RowIndex = (LOCAL.RowIndex + 1)){

        // Create a row structure.
        LOCAL.Row = StructNew();

        // Loop over the columns in this row.
        for (LOCAL.ColumnIndex = 1 ; LOCAL.ColumnIndex LTE ArrayLen( LOCAL.Columns ) ; LOCAL.ColumnIndex = (LOCAL.ColumnIndex + 1)){

        // Get a reference to the query column.
        LOCAL.ColumnName = LOCAL.Columns[ LOCAL.ColumnIndex ];

        // Store the query cell value into the struct by key.
        LOCAL.Row[ LOCAL.ColumnName ] = ARGUMENTS.Data[ LOCAL.ColumnName ][ LOCAL.RowIndex ];

        }

        // Add the structure to the query array.
        ArrayAppend( LOCAL.QueryArray, LOCAL.Row );

        }

        // Return the array equivalent.
        return( LOCAL.QueryArray );

    </cfscript>
</cffunction> 
```

然后您的回报将如下所示：

```
 <cfreturn SerializeJson(QueryToArray(getArtists_SQL),true)> 
```

要记住的是，CFquery 对象包含其他属性，如记录计数......而且很可能，JS 只想要数据。我不知道是否有更优雅的解决方案，但这是我们在 JQgrid 遇到类似问题时采用的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-21T02:25:58.627

同意布莱斯的上述回答。我使用的 queryToArray 查看查询对象的 columnList。这样就保留了列别名的情况。否则，它将在您的 JSON 中全部大写

```
/**queryToArray
*  utility method to keep the code dry.
*  @hint does exactly what the name says, take a query, makes it an array of stucts
*  @hint columnLabels pass in a list of columnLabels to just return those columns
*/
public array function queryToArray(required query data, any columnLabels=false){
    var columns = listToArray(arguments.data.columnList);
    if(arguments.columnLabels != false){
            columns = listToArray(arguments.columnLabels);
    }

    var queryArray = arrayNew(1);

    for(i=1; i <= arguments.data.RecordCount; i++){

            row = StructNew();
            for (j=1; j <= ArrayLen(columns); j++){
                columnName = columns[j];
        row[columnName] = arguments.data[columnName][i];
            }
            arrayAppend(queryArray, row);
    }
    return(queryArray);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-04-25T19:49:40.103

或者您可以在 javascript 中使用此辅助函数将查询作为（通用）键值对象数组。

```
 function CFQueryParser(data) {
        let items = [];
        Object.keys(data.DATA).forEach((i) => {
            let item = {};
            Object.keys(data.COLUMNS).forEach((j) => {
                item[data.COLUMNS[j]] = data.DATA[i][j];
            });
            items.push(item);
        })
        return items;
    } 

```

# php - 奇怪的令牌网站网址

> ID：15073678
> 
> 赞同：0
> 
> 时间：2013-02-25T18:19:43.093
> 
> 标签：php, security, token

我总是想知道这些非常长的数字和字母在 URL 中作为 Get 变量是什么，我使用的是整洁的 URL，由于我对安全性的了解不够，我开始感到担心。请您稍微解释一下 URL 中这些奇怪的数字吗？

示例（来自 Phpmyadmin URL）：

```
...PMA/index.php?db=dbname&token=a39db927509691755dc2e2ca463f42cd#PMAURL:db=noondreams&server=1&target=db_structure.php&token=a39db927509691755dc2e2ca463f42cd 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T18:24:16.740

在 PhpMyAdmin 案例中，令牌用于防止 CSRF。所以，如果没有，你应该更担心。:)

[请参阅此处](http://en.wikipedia.org/wiki/Cross-site_request_forgery)的PMP 文档和[此处](https://wiki.phpmyadmin.net/pma/Security_Of_phpMyAdmin#CSRF_-_Cross_site_request_forgery)的 CSRF 的一般描述

# java - 通过行选择编辑 jtable 内容

> ID：15073679
> 
> 赞同：0
> 
> 时间：2013-02-25T18:19:52.113
> 
> 标签：java, swing, jframe, jpanel, jtextfield

我有一个类，它有一个 Editbutton 并将其设置为 actionListener。我写了我的全班代码。

我有 3 节课，

```
public class UserPage extends JFrame implements ActionListener {

private AllUser userModel;
private JTable uTable;
JButton editButton;

public UserPage() {
    setTitle("All User Information");
    userModel = new AllUser();
    uTable = new JTable(userModel);
    add(new JScrollPane(uTable), BorderLayout.CENTER);
    add(buttonPanels(), BorderLayout.PAGE_START);
    this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    this.setSize(800, 600);
    this.setLocation(300, 60);
}

public final JPanel buttonPanels() {
    JPanel buttonsPanel = new JPanel(new FlowLayout(FlowLayout.LEFT));

    editButton=new JButton("Edit");

    editButton.addActionListener(this);

    buttonsPanel.add(editButton);

    return buttonsPanel;
}

@Override
public void actionPerformed(ActionEvent e) {
    if(e.getSource()== editButton){
        int selectedRow=uTable.getSelectedRow();
        if(selectedRow>0){
            editUser(selectedRow);

        }
        else{
            JOptionPane.showMessageDialog(null, "Select a row");
        }

    }
}

public static void main(String[] args) {
    new UserPage().setVisible(true);
}

public void editUser(int row){
    UserInformation userInf=new UserInformation();
    userModel.getSelectedMember(row);
    NewUserFrame_Edit edit = new NewUserFrame_Edit(userInf);
}
} 
```

其他类： 其他类：

```
public class NewUserFrame_Edit extends javax.swing.JFrame {

public NewUserFrame_Edit( UserInformation userinf) {
    initComponents();
    setLocation(390, 20);

    jTextField1.setText(userinf.getFname());
    jTextField2.setText(userinf.getLname());

    if(userinf.getGender().equals("Male")){    
        jRadioButton1.setSelected(true);
    }
    else{
        jRadioButton2.setSelected(true);
    }

    jTextField3.setText(userinf.getDate());
    setVisible(true);
}

@SuppressWarnings("unchecked")
// <editor-fold defaultstate="collapsed" desc="Generated Code">                          
private void initComponents() {

    jLabel1 = new javax.swing.JLabel();
    jLabel2 = new javax.swing.JLabel();
    jLabel3 = new javax.swing.JLabel();
    jLabel4 = new javax.swing.JLabel();
    jTextField1 = new javax.swing.JTextField();
    jTextField2 = new javax.swing.JTextField();
    jTextField3 = new javax.swing.JTextField();
    jLabel5 = new javax.swing.JLabel();
    jRadioButton1 = new javax.swing.JRadioButton();
    jRadioButton2 = new javax.swing.JRadioButton();
    updateButton = new javax.swing.JButton();
    cancelButton = new javax.swing.JButton();

    setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

    jLabel1.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
    jLabel1.setForeground(new java.awt.Color(51, 0, 0));
    jLabel1.setText("Edit User");

    jLabel2.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
    jLabel2.setText("First Name");

    jLabel3.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
    jLabel3.setText("Last Name");

    jLabel4.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
    jLabel4.setText("Date");

    jLabel5.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
    jLabel5.setText("Gender");

    jRadioButton1.setText("Male");

    jRadioButton2.setText("Female");

    updateButton.setText("Update");
    updateButton.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            updateButtonActionPerformed(evt);
        }
    });

    cancelButton.setText("Cancel");

    javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
    getContentPane().setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(layout.createSequentialGroup()
                    .addGap(106, 106, 106)
                    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addComponent(jLabel2)
                        .addComponent(jLabel3)
                        .addComponent(jLabel5)
                        .addComponent(jLabel4))
                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(jTextField2)
                            .addComponent(jTextField1, javax.swing.GroupLayout.PREFERRED_SIZE, 189, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGroup(layout.createSequentialGroup()
                            .addGap(10, 10, 10)
                            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                .addComponent(jRadioButton2)
                                .addComponent(jRadioButton1)))
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                            .addGroup(layout.createSequentialGroup()
                                .addComponent(updateButton)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                .addComponent(cancelButton))
                            .addComponent(jTextField3, javax.swing.GroupLayout.PREFERRED_SIZE, 219, javax.swing.GroupLayout.PREFERRED_SIZE))))
                .addGroup(layout.createSequentialGroup()
                    .addGap(292, 292, 292)
                    .addComponent(jLabel1)))
            .addContainerGap(258, Short.MAX_VALUE))
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addGap(21, 21, 21)
            .addComponent(jLabel1)
            .addGap(51, 51, 51)
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(jLabel2)
                .addComponent(jTextField1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(jLabel3)
                .addComponent(jTextField2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
            .addGap(32, 32, 32)
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(jLabel5)
                .addComponent(jRadioButton1))
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
            .addComponent(jRadioButton2)
            .addGap(35, 35, 35)
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                .addComponent(jLabel4)
                .addComponent(jTextField3, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 89, Short.MAX_VALUE)
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(updateButton)
                .addComponent(cancelButton))
            .addGap(52, 52, 52))
    );

    pack();
}// </editor-fold>                        

private void updateButtonActionPerformed(java.awt.event.ActionEvent evt) {                                             
   //Stil has not code, because first jtextfields should fill with old data

}                                            

public static void main(String args[]) {

    java.awt.EventQueue.invokeLater(new Runnable() {
        @Override
        public void run() {
            new NewUserFrame_Edit(new UserInformation());
        }
    });
}
// Variables declaration - do not modify                     
private javax.swing.JButton cancelButton;
private javax.swing.JLabel jLabel1;
private javax.swing.JLabel jLabel2;
private javax.swing.JLabel jLabel3;
private javax.swing.JLabel jLabel4;
private javax.swing.JLabel jLabel5;
private javax.swing.JRadioButton jRadioButton1;
private javax.swing.JRadioButton jRadioButton2;
private javax.swing.JTextField jTextField1;
private javax.swing.JTextField jTextField2;
private javax.swing.JTextField jTextField3;
private javax.swing.JButton updateButton;
// End of variables declaration                   
} 
```

我喜欢当我按下按钮时，我的 NewUserFrame_Edit 类文本字段应该由旧数据填充。但是这个异常发生：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
at myproject.Library.NewUserFrame_Edit.<init>(NewUserFrame_Edit.java:13)
at myproject.Library.NewUserFrame_Edit$2.run(NewUserFrame_Edit.java:148)
... 
```

我的用户信息类：

```
public class UserInformation {

private String Fname;
private String Lname;
private String ID;
private String Gender;
private String Date;

public String getFname() {
    return Fname;
}

public void setFname(String fname) {
    this.Fname = fname;
}

public String getLname() {
    return Lname;
}

public void setLname(String lname) {
    this.Lname = lname;
}

public String getID() {
    return ID;
}

public void setID(String i_d) {
    this.ID = i_d;
}

public String getGender() {
    return Gender;
}

public void setGender(String gndr) {
    this.Gender = gndr;
}

public String getDate() {
    return Date;
}

public void setDate(String date) {
    this.Date = date;
}

@Override
public String toString() {
    return ID + "     " + Fname + "     "
            + Lname + "     " + Gender + "     " + Date + "\n";
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T18:28:13.990

没有类的整个代码很难说`NewUserFrame_Edit`，但堆栈跟踪清楚地表明第 13 行的内容是`null`.

我猜第 13 行是指

```
userinf.getGender().equals("Male") 
```

Returns ，`userinf.getGender()`所以`null`你不能调用`equals`它。`getGender`返回`null`是因为您传递了一个未调用任何 setter 的对象：

```
public void editUser(int row){
  UserInformation userInf=new UserInformation();
  userModel.getSelectedMember(row);
  NewUserFrame_Edit edit = new NewUserFrame_Edit(userInf);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T21:37:09.333

As @Robin stated (+1 for him), the problem is within this method:

```
public void editUser(int row)
{
    UserInformation userInf = new UserInformation();
    userModel.getSelectedMember(row);
    NewUserFrame_Edit edit = new NewUserFrame_Edit(userInf);
} 
```

You should replace:

```
UserInformation userInf = new UserInformation(); 
```

with:

```
UserInformation userInf = userModel.getSelectedMember(row); 
```

which gets the data from the table model of the selected row.

# dynamic - 从文件路径元素组成 Ant 属性名称

> ID：15073684
> 
> 赞同：1
> 
> 时间：2013-02-25T18:20:03.537
> 
> 标签：dynamic, ant, properties, path

我有以下要求。在我的项目中有一个目录，其中包含一组 google protobuf 模式文件 (.proto)。由于 .proto 文件应该与我的应用程序将与之通信的其他项目同步，因此我希望有一个 ANT 构建任务来验证本地和“远程” .proto 文件是否相同。

这是一个示例项目目录结构：

```
${project.root}
  etc
     refData
       refdata.proto
     marketData
       md.proto 
```

ANT 任务会将文件路径映射到属性名称。属性将反过来用于查找远程路径。对于上面的示例目录，我应该能够将 etc 目录下的每个 .proto 文件映射到以下属性：

```
refdata.refdata.proto=[configure remote path here]
marketdata.md.proto=[configure remote path here] 
```

我对 ANT 不是很熟悉，我应该使用什么任务来实现上述目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T20:33:09.463

```
<?xml version="1.0" encoding="UTF-8" ?>
<project default="all" basedir="."> 
    <target name="all">
        <property name="project.root" value="c:\" />
        <property name="refdata.refdata.proto" value="${project.root}etc\refData\refdata.proto" />
        <echo message="refdata.refdata.proto = ${refdata.refdata.proto}" />
        <property name="marketdata.md.proto" value="${project.root}etc\marketData\md.proto" />
        <echo message="marketdata.md.proto = ${refdata.refdata.proto}" />
    </target>
</project> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T05:13:42.837

文件结构：

```
.
├── build.xml
├── etc
│   ├── a
│   │   └── aa.proto
│   └── b
│       └── bb.proto
└── some.properties 
```

一些属性：

```
a.aa.proto=propa
b.bb.proto=propb 
```

构建.xml：

```
<project name="a" default="props" basedir=".">

    <!-- define file containing *.proto propterties -->
    <property name="prop.file" value="some.properties" />

    <target name="props">

        <echo>props file: ${prop.file}</echo>

        <!-- create an OR regex based on file names
            while stripping the path prefix -->
        <pathconvert property="proto.files" pathsep="|">
            <map from="${basedir}/etc/" to="" />
            <fileset dir="${basedir}">
                <include name="**/*.proto" />
            </fileset>
        </pathconvert>
        <echo>proto files: ${proto.files}</echo>

        <!-- load converted regex into new property -->
        <loadresource property="proto.props">
            <!-- use property as a resource, avoids temp files -->
            <propertyresource name="proto.files" />
            <!-- replace / with . -->
            <filterchain>
                <tokenfilter>
                    <filetokenizer />
                    <replacestring from="/" to="." />
                </tokenfilter>
            </filterchain>
        </loadresource>
        <echo>proto props: ${proto.props}</echo>

        <!-- load properties matching the regex -->
        <loadproperties srcfile="${prop.file}">
            <filterchain>
                <containsregex pattern="${proto.props}" />
            </filterchain>
        </loadproperties>

        <!-- confirm -->
        <echo>a:${a.aa.proto}</echo>
        <echo>b:${b.bb.proto}</echo>
    </target>
</project> 
```

构建输出：

```
Buildfile: /tmp/a/build.xml

props:
     [echo] props file: some.properties
     [echo] proto files: a/aa.proto|b/bb.proto
     [echo] proto props: a.aa.proto|b.bb.proto
     [echo] a:propa
     [echo] b:propb

BUILD SUCCESSFUL
Total time: 1 second 
```

# java - 需要构造函数参数的 Restlet 服务器资源

> ID：15073686
> 
> 赞同：10
> 
> 时间：2013-02-25T18:20:04.967
> 
> 标签：java, inversion-of-control, restlet

在 restlet 中出现此错误：

```
ForwardUIApplication ; Exception while instantiating the target server resource.
java.lang.InstantiationException: me.unroll.forwardui.server.ForwardUIServer$UnsubscribeForwardUIResource 
```

我确切地知道为什么。这是因为我的构造函数如下所示：

```
public UnsubscribeForwardUIResource(MySQLConnectionPool connectionPool) { 
```

Restlet 像这样访问资源：

```
router.attach(Config.unsubscribeUriPattern(), UnsubscribeForwardUIResource.class); 
```

问题是我实际上需要那个 ctor 论点。我怎样才能使它可访问？（注意我没有使用任何 IOC 框架，只是使用了很多 ctor 参数，但这实际上是一种 IOC 模式）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-05T08:50:07.467

您可以使用上下文将上下文属性传递给您的资源实例。

从[ServerResource API 文档](http://restlet.org/learn/javadocs/2.1/gae/api/org/restlet/resource/ServerResource.html)：

> 使用默认构造函数实例化后，调用最终的 Resource.init(Context, Request, Response) 方法，设置上下文、请求和响应。您可以通过覆盖 Resource.doInit() 方法来拦截它。

因此，在附件时：

```
router.getContext().getAttributes().put(CONNECTION_POOL_KEY, connectionPool);
router.attach(Config.unsubscribeUriPattern(), UnsubscribeForwardUIResource.class); 
```

在您的 UnsubscribeForwardUIResource 类中，您必须将初始化代码从构造函数移动到 de doInit 方法：

```
public UnsubscribeForwardUIResource() {
    //default constructor can be empty
}

protected void doInit() throws ResourceException {

     MySQLConnectionPool connectionPool = (MySQLConnectionPool) getContext().getAttributes().get(CONNECTION_POOL_KEY);

    // initialization code goes here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T12:07:41.527

如果您不使用 IoC，您应该手动执行，例如，您可以附加 Restlet 实例而不是类。您可以使用[Context](http://restlet.org/learn/javadocs/2.1/jse/api/org/restlet/Context.html)来检索属性。

但也许使用 IoC 容器更有意义，这将简化它并减少样板代码，例如这是针对 Spring： http: [//pastebin.com/MnhWRKd0](http://pastebin.com/MnhWRKd0)

# php - 在元素属性中回显？

> ID：15073693
> 
> 赞同：0
> 
> 时间：2013-02-25T18:20:32.937
> 
> 标签：php, iframe

我只是想知道是否可以在 iframe 中放置一个 php echo？像这样的东西：

```
<iframe src="<?php echo $dyn; ?>" width="800" height="500" scrolling="yes"></iframe> 
```

如果没有，这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:26:51.140

PHP 的工作方式是在后台完成工作，甚至在发送 HTML 之前，所以当您实际将完整数据发送给用户时，它会被解析为应该提供给浏览器的内容。

也就是说，当例如

```
<?php
    $dyn = "index.html";
?>

<iframe src="<?php echo $dyn; ?>" width="800" height="500" scrolling="yes"></iframe> 
```

当服务器将其全部分解时，浏览器将只会看到

```
<iframe src="index.html" width="800" height="500" scrolling="yes"></iframe> 
```

这就是您可以在同一页面上使用 HTML 和 PHP 的原因，因为服务器会在 PHP 发送到浏览器之前对其进行解析，因此您最终只需将 Text/HTML 发送到最终位置。Echo 只是告诉 PHP 的一种方式，“不仅仅是这样做，而是向用户显示这个结果。”，它围绕你已经存在的 HTML 构建它。

# c++ - C++ 中的 OO 设计 - 用未知类型的子对象装饰父对象

> ID：15073694
> 
> 赞同：1
> 
> 时间：2013-02-25T18:20:35.977
> 
> 标签：c++, oop, design-patterns, decorator

我目前正在开发一个系统，其中对象沿着贝塞尔曲线动画。在曲线上的各种用户定义点处，可能存在动画对象必须响应的事件。这可能是速度的变化，动画例程的变化，面对方向的变化等......

到目前为止，我有以下 AnimationEvent 类。

```
class AnimationEvent
{
private:
    unsigned int    m_eventID;

    float   m_InteroplationPoint;

    float   m_SpeedInMPS;

public:
    AnimationEvent(unsigned int id, float interpolationPoint);
    ~AnimationEvent(void);

    const unsigned int getEventID();
    void setInterpolationPoint(float interpPoint);
    const float getInterpPoint();

    const float getSpeed();
}; 
```

每个事件都被分配为沿曲线的对象，当到达其插值点时，曲线类调用该`getSpeed()`函数以更改当前动画速度。

我真正想做的是实现一个系统，例如使用装饰器设计模式，其中事件可以用多个对象装饰，当达到时，将应用所有装饰。我遇到的问题是我无法将指向父对象的指针传递给子对象，因为这会创建一个循环依赖项，但我也有一个问题，我不知道（在编译时）什么类型的动作活动将被装饰。

任何关于如何克服这个问题的想法将不胜感激！如果我忘记了任何可能有帮助的信息，我会尝试编辑它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T20:20:48.350

如果您愿意跟踪以前发生在对象上的所有事件，则可以将类似装饰器的模式应用于此问题。您需要做的就是将每个事件存储在某种向量中。然后你可以做任何你想做的操作。

```
#include <iostream>
#include <vector>
using namespace std;

class Animatee;
class AnimateEvent
{
public:
    virtual Animatee & perform(Animatee & on) = 0;
};

class Animatee
{
public:
    Animatee() : value(0){};

    void addEvent(AnimateEvent * event)
    {
        if(event != NULL)
        {
            events.push_back(event);
        }

    }

    Animatee & act()
    {
        for(vector<AnimateEvent * >::iterator it = events.begin(); it != events.end();++it)
        {
            AnimateEvent * event = *it;
            event->perform(*this);
        }

        return *this;
    }

    double value;   //don't do this, but something more encap'ed
private:

    vector<AnimateEvent * > events;
};

class Add : public AnimateEvent
{
    virtual Animatee & perform(Animatee & on)
    {
        on.value = on.value + 1;
        return on;
    }
};

class Subtract : public AnimateEvent
{
    virtual Animatee & perform(Animatee & on)
    {
        on.value = on.value - 1;
        return on;
    }
};

class Multiply : public AnimateEvent
{
    virtual Animatee & perform(Animatee & on)
    {
        on.value = on.value * 2;
        return on;
    }
};

class Div : public AnimateEvent
{
    virtual Animatee & perform(Animatee & on)
    {
        on.value = on.value / 2.0;
        return on;
    }
};

int main() {
    Animatee matee;
    matee.addEvent(new Add());

    //cout << "Before: " << matee.value << " After: " << matee.act().value << endl; <~~~ Undefined btw, acting on the object twice in one "statement"
    double before = matee.value;
    cout << "Before: " << before << " After: " << matee.act().value << endl;

    matee.addEvent(new Subtract());
    before = matee.value;
    cout << "Before: " << before << " After: " << matee.act().value << endl;

    matee.addEvent(new Subtract());
    before = matee.value;
    cout << "Before: " << before << " After: " << matee.act().value << endl;

    matee.addEvent(new Add());
    matee.addEvent(new Add());
    matee.addEvent(new Add());
    before = matee.value;
    cout << "Before: " << before << " After: " << matee.act().value << endl;

    matee.addEvent(new Multiply());
    before = matee.value;
    cout << "Before: " << before << " After: " << matee.act().value << endl;

    before = matee.value;
    cout << "Before: " << before << " After: " << matee.act().value << endl;

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T18:45:03.563

如上所述，您只支持一次可微分的速度函数，这看起来很可怕，除非有很多点。

有两个不同的问题。第一个是内部动画参数的可能变化（这可能对定位引擎来说应该是不透明的），第二个是速度的变化（这不是不透明的）。

我会正交地解决这两个问题。

关注速度，下一个问题是你希望装饰器如何相互组合。它们是否添加、乘法、替换、形成输出速度的上限或下限？

他们可以访问哪些有关当地状态的信息？

假设他们是沿着曲线的位置，并且只有最后一个速度装饰器意味着任何东西，`std::function<double(double)>`作为速度装饰器类型会做得很好。

`virtual`这与调用一个或两个函数的效率相同。注入器或装饰器可以捕获任何它想要的内部状态......

# django - 将 blocktrans 输出分配给变量

> ID：15073695
> 
> 赞同：11
> 
> 时间：2013-02-25T18:20:40.143
> 
> 标签：django, django-templates

我想将 blocktrans 块的输出分配给模板变量。

您可以使用 trans 标签来做到这一点，如下所示：

```
{% trans "Some text to translate" as foo %} 
```

但是你不能对 blocktrans 标签做同样的事情。我在文档中看不到您可以执行此操作。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2016-02-12T16:55:01.777

Django 1.9 添加了一个`asvar`组件到`blocktrans`. [文档中的一个示例](https://docs.djangoproject.com/es/1.9/topics/i18n/translation/#blocktrans-template-tag)：

```
{% blocktrans asvar the_title %}The title is {{ title }}.{% endblocktrans %}
<title>{{ the_title }}</title>
<meta name="description" content="{{ the_title }}"> 
```

不幸的是，在添加之前，您似乎需要其他一些方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-25T19:46:16.330

使用 blocktrans 标签是不可能的。

但是，您可以使用此[captureas 模板标签](http://djangosnippets.org/snippets/545/)来捕获 blocktrans 的输出。

```
{% captureas trans_value %}
    {% blocktrans %}
        This has some stuff in it which will be translated {{ foo }}.
    {% endblocktrans %}
{% endcaptureas %}

{{ trans_value }} 
```

# ruby-on-rails - has_one ：通过无连接模型

> ID：15073699
> 
> 赞同：0
> 
> 时间：2013-02-25T18:21:05.873
> 
> 标签：ruby-on-rails, activerecord

我有一个 Rails 项目，它实现了许多独立的引擎。

1.  主引擎（始终存在）
2.  扩展引擎#1（扩展主引擎的可选插件）
3.  扩展引擎#2（扩展主引擎的可选插件）
4.  等等。

长话短说，我需要**扩展引擎**来添加与**主引擎模型有关系的**模型。

扩展不应该修改任何其他引擎的物理表，但是扩展没有理由不能创建自己的表来充当连接表来引用主引擎的表。

为了简单起见，下面说明了我要做什么。

## 主引擎

### .../app/models/models/user.rb

```
module PrimaryEngine
    User < ActiveRecord::Base
    End
end 
```

## 车辆发动机

```
# .../vendor/engines/vehicle_engine/app/models/vehicle.rb
module VehicleEngine
    Vehicle < ActiveRecord::Base
    End
end

# .../vendor/engines/vehicle_engine/config/initializers/user_extension.rb
...
PrimaryEngine::User.class_eval do 
    has_one :vehicle, :through => :vehicle_engine_users_vehicles
end
... 
```

我需要使用连接表的唯一原因是因为我不能（不应该）修改**主引擎的** `primary_engine_user`表。通常，您只需向表中添加一个新列`primary_engine_user`，即`primary_engine_user.vehicle_id`.

问题是，我不想为`:through =>`零件创建一个模型，因为该连接表中没有我需要向其公开功能的任何内容。

```
CREATE TABLE vehicle_engine_users_vehicles
(
  primary_engine_user_id integer NOT NULL,
  vehicle_id integer NOT NULL
) 
```

我想知道是否有一种方法可以`has_one`像`has_and_belongs_to_many`，其中推断连接表但不需要指定？

谢谢！

## 澄清更新：

A`PrimaryEngine::User`可以有 1 辆车，但`VehicleEngine::Vehicle`可以有许多不同的用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:34:24.543

因此，我认为您要问的不是推断出通过（因为 has_and_belongs_to_many 推断出通过），而是在没有模型的情况下使用链接表。

我不这么认为。当使用 :through 选项时，ActiveRecord 会转到 :through 中指定的关联，然后转到该关联的模型（因此，通过关联和通过模型都需要存在）。

继续创建空模型。它不会造成太大的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T18:45:18.840

> 我想知道是否有办法让 has_one 像 has_and_belongs_to_many 一样工作，其中推断连接表但不需要指定？

如果您有一对一的关系，您可能不需要连接表，因为您只需在任一表中都有一个外键就可以做到这一点。但是，你说你不能做外键。

如果您知道以后需要切换到一对多或多对多，那么您可能会使用具有 id 列的成熟连接模型。（一般规则是 HABTM 适用于只有两列的连接表 - 要连接的表的两个外键，否则连接表将成为一个模型，您可以通过该模型执行 has_many 等. 根据需要。）这就是@Marlin_Pierce 所说的。

要使 has_one 像一个单一的 HABTM 一样，您将覆盖它的默认行为，这会让其他人感到困惑。不要这样做。

所以，我建议只在模型中添加额外的方法，让它更像一个 has_one：

```
has_and_belongs_to_many :vehicles

def vehicle
  vehicles.first
end

def vehicle=(vehicle)
  vehicles = vehicle ? [vehicle] : []
end 
```

如果关系有效，即使没有返回任何行，HABTM 和 has_many 也总是返回一个空数组，因此您不需要`try`在 getter 中执行 a 或检查 nil。

但是，更多地考虑这一点，我认为你真正想要的是`has_one :vehicle, through: :vehicle_engine_users_vehicle`。这需要一个连接模型，但它是执行您想做的事情的“rails 方式”，并[在指南中进行了](http://guides.rubyonrails.org/association_basics.html#the-has_one-through-association)描述。然后，如果您正在编写一个 gem 来执行此操作，为了在需要时使其更容易，您可以编写生成器来创建连接模型和相关的迁移。

# php - 创建用于身份验证的 user_session 表。

> ID：15073704
> 
> 赞同：0
> 
> 时间：2013-02-25T18:21:25.627
> 
> 标签：php, android, mysql, session

我正在开发一个使用 php webservices 的 android 应用程序。我一直在处理服务器端和客户端之间的会话时遇到问题，所以我决定采用不同的方法。我计划创建一个包含 session_id、user_id、session_token 和 expiry_date 的 user_session 表。

session_token 将使用用户的某些字段生成，而 expiry_date 是 session_token 将重新生成或更改为 null 的日期。这将意味着用户将需要在 android 上再次登录。

一个场景： 1\. 用户输入正确的凭据 2\. Web 服务为用户生成一个 session_token，将其存储在 user_session 表中并将值发送到客户端。3\. 对于android应用的每一个请求，web-service都会验证客户端的session_token是否对应表中的session_token。

我的问题： 1\. 你能帮我创建 session_token 和 expiry_date，因为我不知道如何使用其他字段在 php 中生成唯一值。2\. 在安全方面值得吗？

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:28:11.573

您可以使用hasing：

```
$token = sha1($ssid.$something);

$ssid = session_id(); 
```

那个 $token 变量是你的令牌.. 将它插入数据库，并创建条件。它是独一无二的，它基于会话 ID 和其他“认为”您可以使用电子邮件地址或其他字段...但要小心，如果用户更改该字段，您需要再次生成令牌

# pdf - pdf文档可以从网络服务中提取信息吗

> ID：15073705
> 
> 赞同：0
> 
> 时间：2013-02-25T18:21:31.340
> 
> 标签：pdf, pdf-generation, pdfbox

是否可以生成一个 pdf 文档，例如从 Web 服务中提取联系信息，然后显示它（并缓存它）。如果互联网连接不可用，它会显示它缓存的信息。

我要实现的用例是：

1.  用户打开一个连接到网络服务并填充某些项目（比如电话号码）并将其显示给用户的 pdf 文档
2.  五天后，由于 Internet 连接中断，用户重新打开了该文档。pdf 阅读器检测到它没有互联网连接，并且服务器使用它拥有的最后一个好版本。

问题：有没有办法在 pdf 阅读器中稳健地做到这一点，如果有，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T18:42:17.643

这确实可以通过使用[Adob​​e Javascript API](http://www.adobe.com/devnet/acrobat/javascript.html)并使用基于 Javascript 的操作将您的 Javascript 代码嵌入到 PDF 文档中来实现（有关详细信息，请参阅[Adob​​e PDF 参考文档](http://wwwimages.adobe.com/www.adobe.com/content/dam/Adobe/en/devnet/pdf/pdfs/PDF32000_2008.pdf)。）

要连接到 Web 服务，请查看[Javascript for Acrobat API Reference](http://wwwimages.adobe.com/www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/js_api_reference.pdf)，特别是关于 SOAP 的部分（SOAP 属性和方法，第 657 页）。

关于“缓存”功能，我坚信这是不可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T12:18:23.330

听起来您希望 PDF 查看器可以为您处理客户端功能。这是极不可能的。您需要考虑提供此类功能的其他方法 - 如果可能，客户端程序会获取最新的 PDF，否则会提供最新版本，这正是您实际需要的。PDF 查看器不会自动提供此功能。

您能否详细介绍一下您的环境，看看是否有其他已知的切割器选项？

# javascript - 如果给定，则按索引返回数组值，否则返回数组

> ID：15073707
> 
> 赞同：0
> 
> 时间：2013-02-25T18:21:35.750
> 
> 标签：javascript, jquery, arrays, ternary-operator

如果给出了索引号，是否可以通过其索引返回数组值，否则返回完整的数组，而不重复自己？

例如，我们有以下功能：

```
$.fn.getMatrix = function(i){
    return this.css('transform').split('(')[1].split(')')[0].split(',')[i];
}; 
```

...如果`i`未设置 -paramter 我想返回完整的数组。

在遵守 DRY 的情况下，有什么想法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T19:19:19.087

像这样的东西？

```
$.fn.getMatrix = function(i){
   var array = this.css('transform').split('(')[1].split(')')[0].split(',');
   return (typeof i === "number") ? array[i] : array;
}; 
```

# javascript - jquery动态加载图片

> ID：15073709
> 
> 赞同：1
> 
> 时间：2013-02-25T18:21:37.647
> 
> 标签：javascript, jquery

我有一个 img 元素，每次动态更改它的 src 时，我都想获得新图像的宽度（完全加载后）

如果图像已经在缓存中（？），.load() 似乎不会触发，但在这种情况下我不想再次加载它，因为：

```
 'image.jpg?' + new Date().getTime(); 
```

将（？）

最好的方法是什么？

编辑：

```
$('#test img:first').load(function() {
    console.log($(this).width());
}); 
```

如果缓存中的图像已经存在，它似乎不会触发

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T18:30:54.347

`.load()`如果图像在缓存中并且在某些浏览器 (IE) 中的图像上设置属性`onload`之前未安装处理程序，则不会触发。`.src`

如果图像是使用 javascript 动态创建的，那么只需确保在设置属性`onload`之前分配处理程序。`.src`

如果图像在页面 HTML 中，那么保证您获得该特定图像的 onload 事件的唯一方法是您在 HTML 本身中指定了 onload 处理程序。没有办法为 HTML 中的图像安装带有 javascript 的 onload 处理程序，并确保它被调用，因为图像可能在任何 javascript 运行之前已经加载。

您可以检查是否已使用该`.complete`属性加载图像。

因此，HTML 中图像的解决方法是：

```
var img = $('#test img:first');
if (!img[0].complete) {
    img.load(function() {
        // onload code here
    });
} else {
   // image already loaded
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T18:24:54.727

在现代浏览器中，您可以使用该`complete`属性来检查图像是否已完成加载，即使它已被缓存。就像是：

```
$("#myimg").on('load', function () { /* get new width */ });

if ($("#myimg").attr('src', 'image.jpg').prop('complete')) {
    /* get new width */
} 
```

（以防万一`.prop`不起作用，您可以使用`.get(0).complete`）。

# powershell - 为什么PowerShell中的变量在被引用后会失去其价值？

> ID：15073710
> 
> 赞同：1
> 
> 时间：2013-02-25T18:21:40.157
> 
> 标签：powershell

使用以下 2 行代码：

```
$meta = New-Object System.Management.Automation.CommandMetadata (Get-Command Get-Event)
$parametersInCmdlet = $meta.Parameters.GetEnumerator() 
```

$parametersInCmdlet 变量的设置可以通过引用它来看到。

```
$parametersInCmdlet

Key               Value
---               -----
SourceIdentifier  System.Management.Automation.ParameterMetadata
EventIdentifier   System.Management.Automation.ParameterMetadata 
```

当我在那之后立即再次引用它时，它显示为空（并且如果通过管道传输到 Get-Member 则已确认）。

```
$parametersInCmdlet | gm
gm : No object has been specified to the get-member cmdlet.
At line:1 char:23
+ $parametersInCmdlet | gm
+                       ~~
    + CategoryInfo          : CloseError: (:) [Get-Member], InvalidOperationException
    + FullyQualifiedErrorId : NoObjectInGetMember,Microsoft.PowerShell.Commands.GetMemberCommand 
```

在这些引用之间没有其他[应该]触及该变量。这发生在 PS 2.0 和 3.0 的控制台和 ISE 中，因此我认为这更多的是用户误解而不是错误。

在这种情况下，什么会导致价值丢失？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:31:53.613

方法返回的对象`GetEnumerator()`几乎总是一个[`IEnumerator`](http://msdn.microsoft.com/en-us/library/system.collections.ienumerator.aspx). an 的工作是一次`IEnumerator`交回一个集合的元素，直到该集合耗尽。在这一点上，`IEnumerator`当被要求提供下一个项目时，不返回任何内容是正确的行为。

当您第一次查看时，Powershell 会展开整个集合。因此，默认情况下，预计您无法再次查看该集合，因为该集合`IEnumerator`已被“使用”。

解决方法是`Reset()`在`IEnumerator`您希望它重新开始时调用。假设`IEnumerator`正确实施，这将允许您重新从头开始重新读取集合。

`$parametersInCmdlet.Reset()`因此，请在再次使用之前尝试调用它。

# label - pygtk Child Label 在移动时调整固定容器的大小

> ID：15073713
> 
> 赞同：0
> 
> 时间：2013-02-25T18:21:48.707
> 
> 标签：label, pygtk, crop, fixed

我正在用 pygtk 写一个“飞行文本”。一个小的测试代码如下所示：

```
class MainWindow(gobject.GObject):
    def __init__(self,sender):
        self.__gobject_init__()
        sender.connect('move_label', self.move_label)
        self.box = HBox()
        self.w = gtk.Window()
        self._mainbox = gtk.VBox()
        self._flybox = gtk.Fixed()
        self._label = gtk.Label("testing")
        self._x = 10
        self._flybox.put(self._label,self._x,0);
        self._mainbox.pack_start(self.box)
        self._mainbox.pack_start(self._flybox)
        self.w.add(self._mainbox)

    def move_label(self,sender):
        self._x += 10
        self._flybox.move(self._label,self._x,0)

    def main(self, fname):
        self.w.show_all()
        self.w.connect("destroy", gtk.main_quit)
        gtk.main()

class Sender(gobject.GObject):
    def __init__(self):
        self.__gobject_init__()

    def trigger_move_label(self):
        gobject.timeout_add(2*1000, self.trigger_move_label)
        self.emit('move_label');

gobject.signal_new('move_label',Sender,gobject.SIGNAL_RUN_FIRST,gobject.TYPE_NONE,())

sender = Sender()
gobject.timeout_add(2*1000, sender.trigger_move_label)
player = VideoPlayer(sender)
player.main(sys.argv[1]) 
```

这个例子创建了一个底部有一个固定框的窗口，其中包含一个标签“测试”。它还创建一个计时器，每 2 秒触发一个将 (self._flybox.move(........)) 标签移动到容器末尾的方法。问题是标签移动到窗口末尾之后。它不断移动并调整固定容器和整个窗口的大小。但我希望这个标签在它移出固定容器时被裁剪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T07:39:31.267

我已经想通了。移出容器后，我需要使用 gtk.Layout() 而不是 gtk.Fixed() 来裁剪标签

# php - 在 CodeIgniter 中扩展 HMVC 模块

> ID：15073721
> 
> 赞同：3
> 
> 时间：2013-02-25T18:22:14.187
> 
> 标签：php, codeigniter, inheritance, module, hmvc

假设我们`core_crud`在控制器中调用了类似这样的模块：

```
if (!defined('BASEPATH'))
    exit('No direct script access allowed');

class Core_crud extends MX_Controller
{

    function __construct()
    {
        parent::__construct();
        $this->load->model('mdl_core_crud');
    }

    public function index()
    {
        // code goes here
    }

} 
```

现在我想用另一个名为`shop_crud`. 这个`shop_crud`模块的基本控制器是什么样子的？我的意思是我想继承所有的控制器方法`core_crud`和所有模型的东西。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-28T05:00:26.550

模块结构

```
/modules
    /core_crud
        /controllers
            /core_crud.php
        /models
        /views
    /shop_curd
        /controllers
            /shop_crud.php
        /models
        /views 
```

代码在`core_crud.php`

```
<?php

if (!defined('BASEPATH'))
    exit('No direct script access allowed');

class Core_crud extends MX_Controller
{

    function __construct()
    {
        parent::__construct();
        $this->load->model('mdl_core_crud');
    }

    public function index()
    {
        // code goes here
    }

    public function mymethod($param1 = '', $param2 = '')
    {
        return 'Hello, I am called with paramaters' . $param1 . ' and ' . $param2;
    }

} 
```

代码在`shop_crud.php`

```
<?php

if (!defined('BASEPATH'))
    exit('No direct script access allowed');

class Shop_crud extends MX_Controller
{

    public function __construct()
    {
        parent::__construct();
        //$this->load->model('mdl_shop_curd');
    }

    public function testmethod()
    {
        // output directly
        $this->load->controller('core_crud/mymethod', array('hello', 'world'));

        // capture the output in variables
        $myvar = $this->load->controller('core_crud/mymethod', array('hello', 'world'), TRUE);
    }

} 
```

因此，我宁愿只调用所需的方法，而不是扩展整个模块/控制器。它也很简单。

**注意**如果模块名称和控制器名称不同，则必须传递路径

`module_name/controller_name/mymethod`

**编辑以支持扩展**

文件结构

![文件结构](../Images/4dbba3ae958db80363aa0396bcb2cc78.png)

中的代码`core_crud.php`。

```
if (!defined('BASEPATH'))
    exit('No direct script access allowed');

class Core_crud extends MX_Controller
{

    public function __construct()
    {
        parent::__construct();
        $this->load->model('core_crud/mdl_core_crud');
    }

    public function index()
    {
        return 'index';
    }

    public function check_method($param1 = '')
    {
        return 'I am from controller core_crud. ' . $this->mdl_core_crud->hello_model() . ' Param is ' . $param1;
    }

} 
```

中的代码`mdl_core_crud.php`

```
if (!defined('BASEPATH'))
    exit('No direct script access allowed');

class mdl_core_crud extends CI_Model
{

    public function hello_model()
    {
        return 'I am from model mdl_core_crud.';
    }

} 
```

中的代码`shop_crud.php`。

```
if (!defined('BASEPATH'))
    exit('No direct script access allowed');

include_once APPPATH . '/modules/core_crud/controllers/core_crud.php';

class Shop_crud extends Core_crud
{

    public function __construct()
    {
        parent::__construct();
    }

    public function index()
    {
        echo parent::check_method('Working.');
    }

} 
```

> 输出：- 我来自控制器 core_crud。我来自模型 mdl_core_crud。参数正在工作。

希望这可以帮助。谢谢！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T19:30:13.483

如果您在父类或构造中加载模型，那么它应该在 shop_crud 中继承。你不想做`class Shop_crud extends Core_crud {`吗？parent::__construct() 是否没有为您保留构造？

这是您可以通过路由到同一个控制器而不是扩展控制器来处理的事情吗（想要继承控制器和模型对我来说似乎很奇怪，或者您可以使用类中的路由和私有函数来处理逻辑)?

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T12:25:24.707

“控制器”这个名称定义了它的功能。控制器用于控制特定部分。所以在 MVC 框架中，我认为最好为单个模块创建单独的控制器。但是您可以重用模型，即您可以在另一个模型中调用一个模型的函数。为了这

```
First load your model like $this->load->model("modelName"); in your controller

Then call the function like $this->modelname->functionName(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-03T16:26:09.967

据我所知，您必须要求您正在扩展的父控制器。这并不完全理想，但我稍后会研究一种更好的方法来做到这一点。现在，我创建了一个简单的函数来执行包含。

```
function extend_module($module) {

$path = realpath(APPPATH) . '/modules/'. $module.'/controllers/'.ucfirst($module).'.php';

require_once($path);

} 
```

## 用法：

```
extend_module('some_module');

class othe_ module extends some_module { 
```

注意：该函数需要在 CI 对象之外可用，因此请将其放在主 index.php 文件之类的位置。

另请注意：由于这些变量用于引用本地文件系统，因此不要直接从用户生成的输入动态分配它们。这样做会导致多个文件系统漏洞。

平台：CI3 + Bonfire 8 HMVC

# asp.net-mvc-4 - 如何在 webgrid 列中呈现列表

> ID：15073724
> 
> 赞同：2
> 
> 时间：2013-02-25T18:22:24.610
> 
> 标签：asp.net-mvc-4, webgrid

我的模型的属性之一是对象列表。我在视图上使用 webgrid。现在，我的视图模型将该对象列表转换为字符串，并且我的 webgrid 列显示该字符串。我在 Internet 上搜索了如何在 webgrid 列中显示列表的示例，但没有遇到任何问题。我确实找到了一个博客，该博客演示了如何在 webgrid 列中使用 webgrid，但这并不是我想要做的。我已经尝试过了，但它会产生错误（无法从 lambda 转换为 System.Func。

```
format: @<text>@foreach (var p in item.PhoneList) { p.PhoneNumber; }</text> 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:47:31.683

我只是想出了如何自己做到这一点。简短的回答：您需要一个 HTML Helper。这是[制作自己的一个很好的参考](http://pratapreddypilaka.blogspot.com/2011/10/mvc-razor-custom-html-helper-calsses.html)

基本上你需要：

1.  制作一个 Helpers/MyHelper.cs 文件
2.  使 MyHelper 类静态
3.  在 MyHelper 类中创建一个具有以下签名的新函数： `public static MvcHtmlString MyFunction(this HtmlHelper helper, [input type] myInput)`

然后只需添加适当的引用。像这样调用 Helper 内联：

...

`MyWebGrid.Column(format: @<text>@Html.MyFunction(@item.[ListToExtract] as List<[ListTypeToExtract>)</text>, header:...`

...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-13T08:00:12.930

另一种方法是在视图中使用辅助函数。

```
@helper WriteItems(List<string> myList)
{
    foreach (var myItem in myList)
    {
       <span>@myItem</span>
    }
} 
```

然后从 webgrid 列调用它：

```
format: item => (WriteItems(item.Labels) 
```

# grails - 向 grails 服务添加保存方法的良好可维护方式

> ID：15073726
> 
> 赞同：5
> 
> 时间：2013-02-25T18:22:42.043
> 
> 标签：grails, groovy, grails-orm

我正在查看[github](https://github.com/grails-samples/grails-petclinic)上的示例宠物诊所 grails 应用程序。

它有一个用于创建宠物的服务，称为`PetclinicService`具有添加宠物的方法：

```
Pet createPet(String name, Date birthDate, long petTypeId, long ownerId) {
    def pet = new Pet(name: name, birthDate: birthDate, type: PetType.load(petTypeId), owner: Owner.load(ownerId))
    pet.save()
    pet
} 
```

从控制器中使用它，如下所示：

```
def pet = petclinicService.createPet(params.pet?.name, params.pet?.birthDate,
    (params.pet?.type?.id ?: 0) as Long, (params.pet?.owner?.id ?: 0) as Long) 
```

我很想知道这是否是在 grails 中保存某些东西的最佳方法？使用这种方法，如果我向域中添加另一个字段`Pet`，例如`String color`，那么我将不得不触摸三个类 ( `Pet, PetController, and PetclinicService`) 才能完成更改。

有没有办法可以将整个`params`对象发送到服务中并让它自动映射到域？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T19:03:28.223

我做了这个改变是因为标准是通过`params`地图，但这有几个原因是不好的。一是它将服务层耦合到 Web 层。这不是严格的耦合，因为它只是一个 Map，但服务应该是可重用和独立的。另一个是地图是一个“魔法”地图，您需要知道键才能使用它。通过使用命名和类型化的方法参数，代码更具可读性和可理解性。

这确实增加了维护负担，因为您指出添加新字段需要更改签名，但理想情况下，此方法将是完成这项工作的一个地方，因此您只需在一个地方进行更改。

随意`params`在您自己的代码中使用，但由于这个项目是我们的演示项目之一，我希望它尽可能使用最佳实践。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T19:03:57.957

宠物诊所应用程序使用的模式是一个非常好的最佳实践。

泄漏`params`到服务层将使您的服务与控制器层更紧密地耦合。例如，在 API 中重用服务会更加困难。此外，如果您的服务方法具有方法参数形式的显式接口，则可以简化测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T18:57:37.673

您可以将整个发送`params`到服务，只需声明为`Map`：

```
Class PetclinicService {
  Pet createPet(Map params) {
    def pet = new Pet(params)
    pet.save()
    pet
  }
} 
```

# python - 如何使用 Flask Pluggable Views 重用 View 和 Edit 代码

> ID：15073727
> 
> 赞同：2
> 
> 时间：2013-02-25T18:22:46.317
> 
> 标签：python, python-2.7, flask

我正在关注这里的示例代码：http: [//flask.pocoo.org/docs/views/#pluggable-views](http://flask.pocoo.org/docs/views/#pluggable-views)

我不认为这段代码是完整的，我无法让它工作并建立在它之上。

我正在尝试为以下功能重用代码：

**添加数据库条目**

```
@app.route('/add/category/', methods=['GET', 'POST'])
def addCategory():
    form = forms.AddCategory()
    if form.validate_on_submit():
        name = form.name.data
        database.addCategory(name)
        return redirect('/view/categories/')
    return render_template('add-category.html', form = form)

@app.route('/add/revision/', methods=['GET', 'POST'])
def addRevision():
    form = forms.AddRevision()
    if form.validate_on_submit():
        name = form.name.data
        version = form.version.data
        database.addRevision(name, version)
        return redirect('/view/revisions/')
    return render_template('add-revision.html', form = form) 
```

**编辑数据库条目**

```
@app.route('/edit/category/<category>', methods=['GET', 'POST'])
def editCategory(category):
    form = forms.AddCategory()
    form.name.data = category
    if form.validate_on_submit():
        newName = form.name.data
        database.editCategory(name = category, newName = newName)
        #view single category?
        return redirect('/view/categories/')
    return render_template('edit-category.html', category = category, form = form)

@app.route('/edit/revision/<name>/<version>', methods=['GET', 'POST'])
def editRevision(name, version):
    form = forms.AddRevision()
    form.name.data = name
    form.version.data = version
    if form.validate_on_submit():
        newName = form.name.data
        newVersion = form.version.data
        database.editRevision(name, version, newName, newVersion)
        return redirect('/view/revisions/')
    return render_template('edit-revision.html', name = name, version = version, form = form) 
```

这是我当前的代码

```
class ListView(View):
    def get_template_name(self):
        raise NotImplementedError()
    def render_template(self, context):
        return render_template(self.get_template_name(), **context)
    def dispatch_request(self):
        context = {'objects': self.get_objects()}
        return self.render_template(context)

class CategoryView(ListView):
    def get_template_name(self):
        return 'categories.html'
    def get_objects(self):
        return models.Category.query.all()

app.add_url_rule('/categories', view_func=RenderTemplateView.as_view('categories', template_name='categories.html')) 
```

我在哪里指定在 app.add_url_rule 中使用 CategoryView 类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T02:08:01.720

问题是文档在这两个代码块之间切换上下文-使用的第二组示例`RenderTemplateView`并不意味着“与”前面的条目草图“一起使用” `ListView`。

```
app.add_url_rule('/categories', view_func=RenderTemplateView  # ... snip ... 
```

应该：

```
app.add_url_rule('/categories', view_func=CategoryView.as_view("category")) 
```

这将[创建一个函数](https://github.com/mitsuhiko/flask/blob/bb99158c870a2d761f1349af02ef1decf0d10c7b/flask/views.py#L72)，该函数在调用时将创建您的实例`CategoryView`并调用其[`dispatch_request`](http://flask.pocoo.org/docs/api/#flask.views.View.dispatch_request)方法。

# php - 这个 INNER JOIN SQL 查询有什么问题？

> ID：15073733
> 
> 赞同：0
> 
> 时间：2013-02-25T18:23:13.540
> 
> 标签：php, mysql, pdo

我有三个表，tblMembers、tblBooks 和 tblReviews。这个想法是一个书评网站。

目前书名只有在有评论的情况下才会显示，但是我希望书名总是一起显示；可以是评论列表，也可以是文本，“此标题尚未被评论”。

这个 SQL 查询有什么问题？

```
$sql = "
SELECT *
FROM tblBooks
INNER JOIN tblReviews
ON tblBooks.bookID = tblReviews.bookID
INNER JOIN tblMembers
ON tblReviews.userID = tblMembers.userID
WHERE tblReviews.bookID = :bookID";

$query = $odb->prepare($sql);

    $query->execute(array(":bookID" => $bookID));

    $results = $query->fetchAll();
    echo "<h1>".$results[0]['longTitle']."</h1>";
    if($results !== FALSE && $query->rowCount()>0) {
        foreach($results as $result) {
            echo "Reviewed by: " . $result['firstName'] . " " . $result['lastName'];
            echo "<br />";
            echo "Rating: " . $result['rating']."/100";
            echo "<br />";
            echo "Date: " . $result['reviewDate'] . " " . $result['reviewTime'];
            echo "<br />";
            echo "Review:";
            echo "<br />";
            echo $result['reviewText'];
            echo "<hr />";
        }
    } else { // the book has not been reviewed yet
        echo "There are no reviews for this title yet";
    } 
```

如上所述，`echo "<h1>".$results[0]['longTitle']."</h1>";`仅当书有评论时才执行该行，我想在检查是否有评论之前获取图书详细信息。我怎样才能做到这一点？

另一方面，我怎样才能检查哪些书还没有被审查，并用结果填充下拉列表？- 这已经回答了：D

我怎么能：

填充两个单独的下拉列表，一个用于有评论的书籍，一个用于尚未评论的书籍（我可以这样做，因为我有上述问题中的 SQL）。

或者

填充单个下拉列表，但将有评论的书籍放在顶部，用一串字符分隔，让我们说“---------这些书还没有被审查过------- ---”后面是尚未审阅的书籍。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:39:17.883

```
SELECT *
FROM tblBooks
LEFT JOIN tblReviews
ON tblBooks.bookID = tblReviews.bookID
LEFT JOIN tblMembers
ON tblReviews.userID = tblMembers.userID
WHERE tblReviews.bookID = :bookID 
```

无论是否有评论或与之相关的会员，都将退还所有书籍。

如果有评论返回它，如果评论有成员它也是如此。否则 NULL 值将在与 tblMembers 或 tblReviews 相关的字段中返回。

# ios - 基于自定义核心数据设置器调度 NSNotification

> ID：15073734
> 
> 赞同：0
> 
> 时间：2013-02-25T18:23:15.290
> 
> 标签：ios, objective-c, cocoa-touch, cocoa, core-data

我想`UITableViewCell`根据文档目录中是否存在文件来更改 a 。我觉得这应该是基于通知的，并且应该在对象`isAvailable`属性发生更改时发送通知。

我不想意外造成线程问题。由于我在主线程上操作我的核心数据对象，是否可以在我的 Concrete 类上设置自定义设置器以发布通知？

最好的方法是什么？我应该创建自己的通知，还是应该挂钩核心数据已经发布的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T22:03:33.257

如果您使用`NSFetchedResultsController`. 此类可以与 a 结合使用，`UITableView`以减少内存开销并提高响应时间。

你可以在[NSFetchedResultsController Class Reference](http://developer.apple.com/library/ios/#documentation/CoreData/Reference/NSFetchedResultsController_Class/Reference/Reference.html#//apple_ref/occ/cl/NSFetchedResultsController)和[NSFetchedResultsControllerDelegate Protocol Reference](http://developer.apple.com/library/ios/#documentation/CoreData/Reference/NSFetchedResultsControllerDelegate_Protocol/Reference/Reference.html)找到文档。

此外，您可以为`NSFetchedResultsController`. 实现`NSFetchedResultsController`委托方法，它允许您侦听数据（`NSManagedObjectContext`您注册的数据）中的添加、删除、移动或更新等操作，因此也可以在您的表中侦听。

关于该主题的一个非常好的教程是[core-data-tutorial-how-to-use-nsfetchedresultscontroller](http://www.raywenderlich.com/999/core-data-tutorial-how-to-use-nsfetchedresultscontroller)。在这里，您可以找到设置 a `UITableView`、 a`NSFetchedResultsController`及其委托的所有元素。

这么说，关于您的问题，您可以使用此技术来更改（特定的）属性更改`UITableViewCell`时的内容。特别是，您应该实现以下委托方法以响应特定更改（请参阅注释）。`isAvailable``NSManagedObject`

```
- (void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject atIndexPath:(NSIndexPath *)indexPath forChangeType:(NSFetchedResultsChangeType)type newIndexPath:(NSIndexPath *)newIndexPath {

    UITableView *tableView = self.tableView;

    switch(type) {

        case NSFetchedResultsChangeInsert:
            [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeDelete:
            [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeUpdate: // <---- here you will change the content of the cell based on isAvailable property
            [self configureCell:[tableView cellForRowAtIndexPath:indexPath] atIndexPath:indexPath];
            break;

        case NSFetchedResultsChangeMove:
           [tableView deleteRowsAtIndexPaths:[NSArray
arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
           [tableView insertRowsAtIndexPaths:[NSArray
arrayWithObject:newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
           break;
    }
} 
```

希望能帮助到你。

# scala - 结构类型需要很少的帮助

> ID：15073737
> 
> 赞同：0
> 
> 时间：2013-02-25T18:23:22.620
> 
> 标签：scala

我注意到我的代码中的重复模式，并认为这可能是尝试结构类型的一个好主意。我已经阅读了这一章;-)，但我无法完全理解它。考虑以下代码：

```
 def link(user: User, group: Group) = {
    UserGroupLinks.insert((user.id, group.id))
  }

  def link(group: Group, role: Role) = {
    GroupRoleLinks.insert((group.id, role.id))
  }

  def link(user: User, role: Role) = {
    UserRoleLinks.insert((user.id, role.id))
  } 
```

我如何将它组合成类似的东西：

```
def link(A <: ...something with an id, B<:... something with and id) = {
  (A, B) match {
    case (u: User,  g: Group) =>  UserGroupLinks.insert((user.id, group.id))
    case (g: Group, r: Role)  =>  GroupRoleLinks.insert((group.id, role.id))
    case (u: User,  r: Role)  =>  UserRoleLinks.insert((user.id, role.id))
    case _ =>
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T18:58:55.423

对于结构类型，它将是这样的：

```
type WithId = {def id:Int}

def link(a:WithId, b:WithId) =
  (a, b) match {
    case (u:User, g:Group) => UserGroupLinks.insert(u.id -> g.id)
    case _ =>
  } 
```

* * *

## 编辑

您可以走得更远，让编译器帮助您选择正确的插入器。为此，您需要在插入器上引入一个特征：

```
trait WithInsert[A, B] {
  def insert(x: (Int, Int)): Unit
} 
```

然后在您的插入对象上执行以下操作：

```
object UserGroupLinks extends WithInsert[User, Group] 
```

您可以在伴随对象上定义默认值

```
object WithInsert {
  implicit val ug = UserGroupLinks
  implicit val gr = GroupRoleLinks
} 
```

我们仍然可以使用该`WithId`类型，尽管在大多数情况下我建议使用 trait

```
type WithId = { def id: Int } 
```

您的链接方法将如下所示：

```
def link[A <: WithId, B <: WithId](a: A, b: B)(implicit inserter: WithInsert[A, B]) =
  inserter.insert(a.id -> b.id) 
```

如您所见，链接方法期望 a`WithInsert[A, B]`可用。它将在 的伴生对象中找到合适的对象`WithInsert`。

这意味着您现在可以像这样简单地调用您的方法：

```
link(user, group)
link(group, role) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T09:06:10.533

尝试

```
type T = { val id: String }

def link(obj1 : T, obj2: T) = {
   // You got 
   println(" obj1.id = %s obj2.id = %s".format(obj1.id, obj2.id))  
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T01:14:43.737

这是我一直在寻找的简单解决方案：

```
 def link[A <: { def id: Long }, B <: { def id: Long }](a: A, b: B) = {
    (a, b) match {
      case (u: User, g: Group) => UserGroupLinks.insert((u.id, g.id))
      case (g: Group, r: Role) => GroupRoleLinks.insert((g.id, r.id))
      case (u: User, r: Role)  => UserRoleLinks.insert((u.id, r.id))
      case _ => ???
    }
  } 
```

编译器允许的地方：

```
case class XX(id:  Long)
case class YY(id:  Long)
case class ZZ(idz: Long)

link(XX(22), YY(33)) 
```

但不是：

```
link(XX(22), ZZ(33)) 
```

# ios - 找不到头文件（cocos2d）

> ID：15073738
> 
> 赞同：0
> 
> 时间：2013-02-25T18:23:25.900
> 
> 标签：ios, objective-c, header, cocos2d-iphone

所以我觉得这应该是一个简单的问题，但我无法得到

```
'kazmath/...h' file  not found 
```

错误消失（特别是`kazmath.h`和`mat4.h`。这可能是[这个问题](https://stackoverflow.com/questions/10543659/header-files-in-cocos2d-not-found-box2d)的扩展（或重新审视） 。

这是一个概述。我有一个游戏工作区，并将它们单独添加为兄弟项目。我刚刚添加的使用 Cocos2d。它似乎可以自行编译，但是当我尝试将其链接到工作区时，工作区会出现找不到`kazmath`文件夹的错误。它在游戏项目本身中，我尝试将其添加到工作区，但这似乎不起作用。

任何人都可以快速了解将项目添加到工作区并将它们链接到其中或如何正确链接头文件？

* * *

一些注意事项：我在*Header Search Paths*中为构建设置添加了路径 (Arcade/libs/kazmath/include/)。我为*Other Linker Flags*`-lz`添加了and标志。`-ObjC`

 ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T04:07:43.280

如果您尝试设置 Project Wide Header Search Paths 部分并且您忘记了 Target 中的错误部分，可能错误的覆盖可能会导致此错误继续发生。

所以删除目标> BLAHPROJ>标题搜索路径设置并将此设置保留在仅项目范围内。这也解决了问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-17T11:40:49.343

也许这和我遇到的问题一样，我在这里回答是因为我还没有找到任何人给出这个答案，也许它会为其他人解决这个问题。

我一直在“修复”我的项目目标中的路径，但是，使用演示项目作为构建单独 Cocos2D 目标的模板，我应该在那里更改“标题搜索路径”。

--额头一巴掌！--

我是一只大脑很小的熊。*

# android - Android：按钮内的文本容器宽度

> ID：15073743
> 
> 赞同：0
> 
> 时间：2013-02-25T18:23:34.770
> 
> 标签：android, button, text

我尝试做一个自定义键盘，所以我有一个小按钮，文本不适合我的按钮，但它有几个像素：

![在此处输入图像描述](../Images/eccb328f44d2a499d6464a628744db0a.png)

我可以增加按钮内的文本容器宽度吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:32:47.827

你可以试试：

将按钮填充设置为零：

```
button.setPadding(0,0,0,0); 
```

（我真的不知道自定义键盘是如何工作的，但是您可以尝试使用 TextViews 而不是 Buttons，并且您也可以将您的图像或背景设置为您的 TextView。可以将按下状态与选择器等一起使用......）

或者您可以创建自己的类，并 @Override 他们的 onDraw 方法为您的视图绘制您自己的文本（或字符）。

据我所知，没有具体的方法来增加文本容器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T19:04:54.723

您可以考虑使用 ImageButton 而不是普通的 Button 作为键盘按钮。因为您可以自由地以您想要的方式编辑图像。

# excel - 有没有人使用 Redshift 来获取 Excel 数据透视表？

> ID：15073750
> 
> 赞同：3
> 
> 时间：2013-02-25T18:24:03.870
> 
> 标签：excel, amazon-web-services, ssas

是否可以使用 Amazon Redshift 作为 Excel 数据透视表的数据源？谷歌搜索这个问题并没有产生任何明显的答案。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-11-13T04:09:07.613

是的，我有。

但是，由于编写了其他答案，而不是使用通用 PostGres 驱动程序，您应该使用 Amazon 提供的自定义 Redshift 驱动程序。

您正在寻找的答案在这里： [http ://docs.aws.amazon.com/redshift/latest/mgmt/configure-odbc-connection.html](http://docs.aws.amazon.com/redshift/latest/mgmt/configure-odbc-connection.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T06:02:44.507

[您可以使用带有PostGRESQL ODBC 驱动程序](http://www.postgresql.org/ftp/odbc/versions/msi/)的 Amazon Redshift 数据库。

1.  下载并安装驱动程序。
2.  使用您的 AWS 凭证在指向 Redshift 服务器的框上设置 DSN（您可以在集群的设置区域中找到 ODBC 连接字符串。）
3.  在 Excel 或任何其他可以连接到 ODBC 连接的产品中使用该连接。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-08T19:34:39.940

您可以将 Excel 转换为 CSV 并将其上传到 S3。将文件上传到 S3 后，您可以运行复制命令将数据从 S3 复制到 Redshift 集群。您可以通过 PostGRESQL JDBC 连接器或 SqlWorkbench 等可用工具运行复制命令。

# javascript - 查看渲染-backbone.js

> ID：15073752
> 
> 赞同：1
> 
> 时间：2013-02-25T18:24:05.163
> 
> 标签：javascript, backbone.js

我如何在需要的backbone.js结果中产生这个结果`<p><h3>fgfdgdfg</h3></p>`

```
var TodoView = Backbone.View.extend({
    el:'p',
    render: function () {
        $('body').append(this.$el.html("<h3>fgfdgdfg</h3>"));
    }
});

var todoView = new TodoView();
todoView.render(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T18:27:01.447

使用`tagName`而不是`el`.
编辑以修复错误的 html，[感谢 @muistooshort](https://stackoverflow.com/a/15074185/834178)。`<p>`干脆删掉了。

```
var TodoView = Backbone.View.extend({

    tagName:'h3',
    render: function () {
        $('body').append(this.$el.html("fgfdgdfg"));
    }

});

var todoView = new TodoView();
todoView.render(); 
```

您设置`el`是否存在您希望视图使用的现有 DOM 元素。设置`tagName`告诉 Backbone 为视图的根生成一个 'h3' 元素。

你也可以这样做（我更喜欢这种方式；避免设置'el'）：

```
var TodoView = Backbone.View.extend({

    tagName:'h3',
    render: function () {
        this.$el.html("fgfdgdfg");
        return this;
    }

});

// view is more reusable now, since it doesn't have the 'body' part in render.
// So, another instance could be rendered and added to the page somewhere else.
var todoView = new TodoView();
$('body').append(todoView.render().el);
var todoView2 = new TodoView();
$('body').append(todoView2.render().el); 
```

如果你的 html 已经有你想要用于视图的 'h3' 元素，你可以这样做：

```
// assuming this html on the page already:
// <body><h3></h3></body>
var TodoView = Backbone.View.extend({

    // setting 'el' tells backbone to use the existing <h3>.
    // You probably would want to use an id rather than 'h3' though.
    el:'h3',
    render: function () {
        this.$el.html("fgfdgdfg");
        return this;
    }

});

var todoView = new TodoView();
todoView.render(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T18:49:13.847

您可能不能，因为`<p><h3>fgfdgdfg</h3></p>`它不是有效的 HTML，并且浏览器经常会尝试更正无效的 HTML。

从[精细`<p>`规范](http://www.w3.org/TR/html-markup/p.html)：

> **允许的内容**
> 
> [措辞内容](http://www.w3.org/TR/html-markup/terminology.html#phrasing-content)

[措辞内容](http://www.w3.org/TR/html-markup/terminology.html#phrasing-content)是：

> **措辞内容**
> 
> 由与[普通字符数据](http://www.w3.org/TR/html-markup/syntax.html#normal-character-data)混合的[短语元素](http://www.w3.org/TR/html-markup/common-models.html#common.elem.phrasing)组成。

[*普通字符数据*](http://www.w3.org/TR/html-markup/syntax.html#normal-character-data)或多或少只是没有标记的纯文本，因此`<h3>`不会在那里。[*短语元素*](http://www.w3.org/TR/html-markup/common-models.html#common.elem.phrasing)是简单的东西，如`<a>`,`<b>`,`<img>`, ... 也没有`<h3>`。

如果您想要一致的结果，则必须修复您的 HTML。然后，一旦您记住了有效的 HTML，[Paul 的建议](https://stackoverflow.com/a/15073798/479863)应该可以完成。

# regex - 正则表达式返回文件名，删除路径和文件扩展名

> ID：15073753
> 
> 赞同：19
> 
> 时间：2013-02-25T18:24:09.577
> 
> 标签：regex, r, gsub

我有一个包含文件名文本列的 data.frame。我想返回不带路径或文件扩展名的文件名。通常，我的文件名已编号，但不一定非要编号。例如：

```
df<-data.frame(data=c("a","b"),fileNames=c("C:/a/bb/ccc/NAME1.ext","C:/a/bb/ccc/d D2/name2.ext")) 
```

我想返回相当于

```
df<-data.frame(data=c("a","b"),fileNames=c("NAME","name")) 
```

但我无法弄清楚使用 gsub 执行此操作的光滑正则表达式。例如，我可以去掉扩展名（前提是文件名以数字结尾）：

```
gsub('([0-9]).ext','',df[,"fileNames"]) 
```

虽然我一直在尝试各种模式（通过阅读本网站上的正则表达式帮助文件和类似解决方案），但我无法让正则表达式返回最后一个“/”和第一个“.”之间的文本。非常感谢您对类似问题的任何想法或转发！

我得到的最好的是：

```
 gsub('*[[:graph:]_]/|*[[:graph:]_].ext','',df[,"fileNames"]) 
```

但是这 1) 并没有去掉所有的前导路径字符，并且 2) 依赖于特定的文件扩展名。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-02-25T18:34:03.130

也许这会让您更接近您的解决方案：

```
library(tools)
basename(file_path_sans_ext(df$fileNames))
# [1] "NAME1" "name2" 
```

该`file_path_sans_ext`函数来自“工具”包（我相信它通常与 R 一起提供），它将提取到（但不包括）扩展的路径。然后该`basename`功能将摆脱您的路径信息。

或者，要从中获取`file_path_sans_ext`并对其进行一些修改，您可以尝试：

```
sub("(.*\\/)([^.]+)(\\.[[:alnum:]]+$)", "\\2", df$fileNames)
# [1] "NAME1" "name2" 
```

在这里，我已经“捕获”了“fileNames”变量的所有三个部分，因此如果您只需要文件路径，您可以更改`"\\2"`为`"\\1"`，如果您只需要文件扩展名，您可以将其更改为`"\\3"`.

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-25T18:33:27.140

首先，要摆脱“领先路径”，您可以使用`basename`. 要删除扩展名，您可以使用`sub`类似于您在问题中的描述：

```
filenames <- sub("\\.[[:alnum:]]+$", "", basename(as.character(df$fileNames))) 
```

请注意，您应该使用`sub`而不是`gsub`此处，因为每个文件名的文件扩展名只能出现一次。此外，您应该使用`\\.`which 匹配一个点，而不是使用`.`which 匹配任何符号。最后，您应该附加`$`到模式以确保仅当扩展名位于文件名末尾时才删除它。

**编辑：**`file_path_sans_ext` Ananda Mahto 的解决方案中建议的功能通过 工作`sub("([^.]+)\\.[[:alnum:]]+$", "\\1", x)`，*即*保留文件名的非扩展名部分，而不是像上面那样删除扩展名。*在 OP 的情况下，*我看不到这两种方法的任何具体优点或缺点。

# itextsharp - 使用 iTextSharp 将项目添加到现有 PDF

> ID：15073756
> 
> 赞同：2
> 
> 时间：2013-02-25T18:24:19.657
> 
> 标签：itextsharp, paragraph

将项目添加到现有 PDF 的正确方法是什么？GetFileBytes 方法从磁盘读取 PDF 并转换为数组，这工作正常，但是生成的文件 NP.PDF 与原始文件完全相同。我实际上想添加条形码，但想先尝试让它与一个简单的项目一起工作。

```
Byte[] bytes = GetFileBytes();

Document document = new Document();
MemoryStream ms = new MemoryStream(bytes);

PdfWriter writer = PdfWriter.GetInstance(document, ms);
document.Open();

document.Add(new Paragraph("First Paragraph"));
document.Add(new Paragraph("Second Paragraph"));
//document.Close();
ms.Position = 0;

File.WriteAllBytes(@"e:\NP.pdf", (Byte[])ms.ToArray()); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T22:05:20.230

这就是我过去的做法。您需要为 PDF 编写器使用新的流，并将原始 PDF 内容添加到新文档中。这可能不是执行此操作的最佳或最有效的方法，这正是我发现的有效方法。

这适用于来自 a 的原始 PDF `Stream`，并将合并的输出生成为 another `Stream`，但是您应该能够根据您的需要对其进行调整。

```
var originalPdfStream = GetOriginalPdfStream();
var pdfDocument = Document();
var finalPdfStream = new MemoryStream();
var pdfWriter = PdfWriter.GetInstance(pdfDocument, finalPdfStream);

pdfDocument.Open();

// Add the originalPdfStream into the pdfDocument
var originalPdfReader = new PdfReader(originalPdfStream);
AddPdf(document, writer, reader);

// Code to add other items to the pdfDocument.

pdfWriter.CloseStream = false;
pdfDocument.Close();
finalPdfStream.Position = 0;

return finalPdfStream; 
```

然后，以下方法将您的文档和作者以及读者带到您要添加的文档。

```
/// <summary>
/// Merge a PDF file into a PDF document.
/// </summary>
/// <param name="document">The PDF document.</param>
/// <param name="writer">The PDF writer.</param>
/// <param name="reader">A PDF reader.</param>
private static void AddPdf(Document document, PdfWriter writer, PdfReader reader)
{
    if (document == null) throw new ArgumentNullException("document");
    if (writer == null) throw new ArgumentNullException("writer");
    if (reader == null) throw new ArgumentNullException("reader");

    var numberOfPages = reader.NumberOfPages;
    var originalPageSize = document.PageSize;

    // Iterate through all pages
    for (var currentPageIndex = 1; currentPageIndex <= numberOfPages; currentPageIndex++)
    {
        // Determine page size for the current page
        document.SetPageSize(reader.GetPageSizeWithRotation(currentPageIndex));

        // Create page
        document.NewPage();
        var importedPage = writer.GetImportedPage(reader, currentPageIndex);

        // Determine page orientation and add page.
        var pageRotation = reader.GetPageRotation(currentPageIndex);
        var pageWidth = reader.GetPageSizeWithRotation(currentPageIndex).Width;
        var pageHeight = reader.GetPageSizeWithRotation(currentPageIndex).Height;
        switch (pageRotation)
        {
            case 0:
                writer.DirectContent.AddTemplate(importedPage, 1f, 0, 0, 1f, 0, 0);
                break;

            case 90:
                writer.DirectContent.AddTemplate(importedPage, 0, -1f, 1f, 0, 0, pageHeight);
                break;

            case 180:
                writer.DirectContent.AddTemplate(
                    importedPage, -1f, 0, 0, -1f, pageWidth, pageHeight);
                break;

            case 270:
                writer.DirectContent.AddTemplate(importedPage, 0, 1f, -1f, 0, pageWidth, 0);
                break;

            default:
                throw new Exception("Unexpected page rotation: [{0}].", pageRotation);
        }
    }

    document.SetPageSize(originalPageSize);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T10:46:23.120

只要添加的内容仅在新页面上（如您的示例代码所示），您就可以像创建新的中间 PDF 一样创建添加内容（如果不是太大，它可以驻留在内存中），然后连接PDF 使用`PdfCopy`：

```
using (MemoryStream ms = new MemoryStream()) {
  // step 1
  using (Document document = new Document()) {
    // step 2
    using (PdfCopy copy = new PdfCopy(document, ms)) {
      // step 3
      document.Open();
      // step 4
      for (int i = 0; i < pdf.Count; ++i) {
        PdfReader reader = ...;// retrieve a PdfReader for the i'th PDF to concatenate
        // loop over the pages in that document
        int n = reader.NumberOfPages;
        for (int page = 0; page < n; ) {
          copy.AddPage(copy.GetImportedPage(reader, ++page));
        }
      }
    }
  }
  byte[] data = ms.ToArray();
  ...
} 
```

*（无耻地从[Webified iTextSharp Example](http://kuujinbo.info/iTextInAction2Ed/index.aspx) [Concatenate.cs](http://kuujinbo.info/iTextInAction2Ed/index.aspx?ch=Chapter06&ex=Concatenate)复制）*

另一方面，如果您想在现有页面上标记某些内容，则更有可能需要`PdfStamper`：

```
PdfReader reader = new PdfReader(resource);
using (var ms = new MemoryStream()) {
  using (PdfStamper stamper = new PdfStamper(reader, ms)) {
    PdfContentByte canvas = stamper.GetOverContent(1);
    ColumnText.ShowTextAligned(
      canvas,
      Element.ALIGN_LEFT, 
      new Phrase("Hello people!"), 
      36, 540, 0
    );
  }
  byte[] data = ms.ToArray();
  ...
} 
```

*（也无耻地从[Webified iTextSharp Example](http://kuujinbo.info/iTextInAction2Ed/index.aspx) [StampText.cs](http://kuujinbo.info/iTextInAction2Ed/index.aspx?ch=Chapter06&ex=StampText)复制）*

[有关其他背景信息，请阅读iText in Action — 第 2 版](http://itextpdf.com/book/index.php)的免费示例[第 6](http://www.manning.com/lowagie2/samplechapter6.pdf)章。

# ruby-on-rails - 将实例变量从 lib 模块传递到控制器

> ID：15073757
> 
> 赞同：1
> 
> 时间：2013-02-25T18:24:24.477
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我的 lib 文件夹中的模块中有一个 API 调用，它返回一个我需要在我的视图中使用的变量。示例：我在我的模块中定义了以下内容

```
module ProdInfo
  def get_item_info(id) 
    @url = "Blah"
  end
end 
```

我的控制器：

```
class RecommendationsController < ApplicationController
  require 'get_prod_info'
  include ProdInfo

  def index
    @product = Product.find(params["product_id"])
    get_item_info(@product.id)
  end
end 
```

我试图在我的推荐视图中调用@url，但是它没有被正确调用。如果我将 @url 放入我的模块中，它会打印出正确的 url，但如果我在我的控制器中执行相同操作，则不会输出任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T19:31:48.547

这本质上是 Kaeros 的评论在两个地方都扩展到了代码中。

您只需要将变量保存在控制器中而不是 lib 文件夹中。你在 lib 中的文件不应该知道你的模型的需求，它会很高兴返回一个值而不知道在哪里或如何保存它。

```
module ProdInfo
  def get_item_info(id) 
    # in your comment you said you have multiple values you need to access from here
    # you just need to have it return a hash so you can access each part in your view

    # gather info
    { :inventory => 3, :color => "blue", :category => "tool"} # this is returned to the controller
  end
end 
```

Rails 3 还有一个配置变量，允许您指定要加载的路径，我相信默认值包括 lib 路径。这意味着您不需要所有`require`条目。你可以打电话给这`Module#method`对。

```
class RecommendationsController < ApplicationController
  # require 'get_prod_info'
  # include ProdInfo
  # => In Rails 3, the lib folder is auto-loaded, right?

  def index
    @product = Product.find(params["product_id"])
    @item_info = ProdInfo.get_item_info(@product.id) # the hash you created is saved here
  end
end 
```

以下是在视图中使用它的方法：

```
# show_item.text.erb

This is my fancy <%= @item_info[:color] %> item, which is a <%= @item_info[:type] %>.

I have <%= @item_info[:inventory] %> of them. 
```

# java - 带有奇怪请求的 Java 递归

> ID：15073758
> 
> 赞同：0
> 
> 时间：2013-02-25T18:24:25.883
> 
> 标签：java, recursion

我需要创建一个递归方法，它将 int x 作为其唯一参数，然后打印“*”x 次，然后打印“！” x 次。通常这很容易，但我们不能使用任何循环或除 x 之外的任何变量。

我尝试过的（**编辑**）：

```
public void xPrint(int x) {
    if (x == 0) return;
    System.out.print("*"); 
    xPrint(x-1);
    System.out.print("!"); 
    xPrint(x-1);
} 
```

我想让递归重新开始，但我不知道如何。

编辑2：问题已解决。我没有意识到递归调用行之后的行仍然会被执行，所以我认为它会做星星然后停止并且必须再次重新启动或做其他事情。我只需要取出最后一行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:43:49.603

尝试这个：

```
public void xPrint(int x) {
    if (x > 0) {
        System.out.print("*");
        xPrint(x-1);
        System.out.print("!");
    }
} 
```

以下是它的工作原理：

*   如果`x > 0`，那么我们打印一个`*`并调用递减`x`一个单位的递归
*   如果`x <= 0`，则意味着我们必须停止并开始返回
*   每次递归返回时，`!`都会打印一个
*   它一直这样下去，直到没有任何要返回的递归调用，此时方法调用结束

请注意，问题中的代码*几乎*是正确的。唯一的问题是最后一次调用`xPrint(x-1);`是不必要的 - 如果你删除它，它会起作用！

# css - 固定定位的 div 扩展到 HTML 和正文之外

> ID：15073759
> 
> 赞同：2
> 
> 时间：2013-02-25T18:24:28.270
> 
> 标签：css, positioning, fixed

我正在开发一个响应式网站，当您的宽度低于 800 像素时，菜单会固定在顶部，并带有一个切换下拉菜单。

发生的事情是 div 延伸到 HTML 和 Body 区域之外，并添加了一个横向滚动条。我不知道如何解决这个问题。

任何帮助将不胜感激！

这是我的代码

HTML：

```
<div class="navMobile">
<div class="menuBox">
<div class="navMobileBtn"><img src="<?php echo get_template_directory_uri(); ?>/img/menuBtn.png" /></div>
<ul class="navMobileBox">
  <li><a class="location" href="#">Location</a></li>
  <li><a class="building" href="#">Building</a></li>
  <li><a class="space" href="#">Space</a></li>
  <li><a class="links" href="#">Links</a></li>
  <li><a class="contact" href="#">Contact</a></li>
</ul>
</div>
</div> 
```

CSS：

```
.navMobile {display:block;}

.navMobile {
    height:auto;
}

.navMobile .menuBox {
    height:auto;
    min-height:40px;
    width:100%;
    display:inline-block;
    position:fixed;
    top:0;
    left:0;
    right:0;
    background:#fff;
    z-index:99999;
}

.navMobile .menuBox ul {
    display:block;
    clear:both;
    height:auto;
    width:100%;
    padding:0;
    margin:0;
    border-top:1px solid #eee;
    font-family: "proxima-nova";
}

.navMobile .menuBox ul>li {
    display:block;
    clear:both;
    padding:10px 0;
    text-align:center;
    border-bottom:1px solid #eee;
}

.navMobile .menuBox ul>li a {
    padding:0;
    margin:0;
    text-transform: uppercase;
    letter-spacing: 0.2em;
    color:#ccc;
    font-size: 0.9em;
    font-weight:500;
    opacity: 1;
}

.navMobile .menuBox ul>li a:hover,.mainnav ul>li a:focus {
    text-decoration: none;
}

.navMobile .menuBox ul>li:last-child a {
    margin-right: 0;
    padding-right: 0;
}

.navMobileBtn {
    clear:both; 
    height:40px;
    width:40px;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-03-14T23:15:22.647

对于任何像我一样寻找解决方案的人，这里你去：

此问题是由于以下事实引起的：如果主要包含元素（body 或 html 取决于浏览器*）未设置为特定的宽度和高度，则其内容可能会超出窗口的边界，从而导致文档的基础比窗户大。

通常这会导致滚动条，这是预期的行为。但是，在固定元素的情况下，它也会通过将右值和底部值移动到主元素的位置而不是窗口的边缘来更改固定元素的起始位置。这使得固定元素可以在窗口内滚动，这与固定元素的行为方式完全相反。

*   作为旁注，一些浏览器默认使用 body 元素来滚动内容，而另一些浏览器默认使用 html 元素来滚动内容。这需要重新设置到身体以获得一致的结果。

解决方案，将 html 和 body 元素的宽度和高度设置为 100%，使其保持窗口大小。您还需要专门为边距和良好的测量填充和边框设置标准重置。最后将溢出设置为其适当的元素可确保浏览器使用正确的元素来滚动文档。

```
html, body {
  position: relative;
  margin: 0;
  border: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
}
body {
  overflow: auto;
} 
```

将此添加到您的重置 css 应该可以解决将来的问题。

无论如何，这就是为我所做的。希望它可以帮助别人。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T18:26:32.373

尝试将这些添加到您的 .css 中

```
html {
width: 100%;
height: 100%;
position: relative;
}
body {
width: 100%;
height: 100%;
position: relative;
} 
```

实际上，其中只有一个可能会解决您的问题，但我不确定 .. 可能`body`

# css - div 偶尔会在 chrome 中跳下来

> ID：15073766
> 
> 赞同：0
> 
> 时间：2013-02-25T18:24:55.410
> 
> 标签：css, google-chrome, html

我刚刚在使用 Chrome 时遇到了一个非常奇怪的错误。直到最近一切正常。div 偶尔会跳下来，几乎就像对它们应用了清除一样。

我做了一个测试页面给你们看，有时你必须重新加载才能看到它。“Float-left”和“Float-right”只是偶尔并排。

[访问测试页面](http://www.playsharp.se/user-test.php)

我尝试了几台不同的计算机和浏览器，它只发生在 Chrome 和这台计算机上。我没有更改任何代码，它今天才开始这样。

我真的很想尽快解决这个问题，因为它几乎发生[在主站点上的](http://www.playsharp.se)每个页面加载。

我在 Stack 找到了几个匹配的线程，我创建了带有答案的测试页面，但问题仍然存在。

提前致谢/吉米

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T18:30:55.840

如果您的意思是为什么`<input class="user-content-right-test">`有时会下降，那是因为您`<div id="user-content">` **清楚：两者；**. 去掉**透明**的，它不会掉下来的。

# javascript - 计算下拉列表的总和

> ID：15073770
> 
> 赞同：0
> 
> 时间：2013-02-25T18:25:14.820
> 
> 标签：javascript, jquery, html

我在这里有一个下拉列表：

[http://jsfiddle.net/HcPYM/](http://jsfiddle.net/HcPYM/)

我不能避免使用 (Distributor) 和 (Public) 按钮而只显示文本自动出现在表格下方吗？

如果我不能.. 我可以在消息中出现的数字旁边添加 (CHF) 吗？

那是我使用的jquery

```
eval( $( 'td:nth-child(3)' ).map( function( td, $this ){
    return ( ( parseFloat( ( $this = $( this ) ).text() ) || 0 )
        * ( parseFloat( $this.parent().find( 'select' ).val() ) || 0 ) );
} ).get().join( '+' ) ) 
```

请详细解释因为我是超级初学者

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:33:59.353

无需使用`onclick`Distributor/Public 按钮，您只需更新下拉列表的更改事件的表（或警报）。唯一的问题是，你怎么知道他们是用“分销商”还是“公共”计算的？

```
$(".pricestable select").on('change', calculate); 
```

[http://jsfiddle.net/HcPYM/2/](http://jsfiddle.net/HcPYM/2/)

我想“分销商”和“公共”可能是单选按钮，您可以根据以下情况做出决定：

```
$(".pricestable select").on('change', function () {
    if ($("#distributor").prop('checked')) {
        calculate();
    }
    else {
        calculate2();
    }
}); 
```

我还建议不要使用`eval`- 您可以只迭代数组并使用添加它们而不是使用es`+`评估字符串。`+`

# objective-c - 菜鸟属性错误

> ID：15073778
> 
> 赞同：4
> 
> 时间：2013-02-25T18:25:46.973
> 
> 标签：objective-c, properties, uipopovercontroller

我正在使用现有代码。这里在 .h 文件中声明了一个 popovercontroller，它在实现行中给了我错误。

.h 文件

```
@property (nonatomic, strong)   VFImagePickerController     *imagePicker;
@property (nonatomic, strong)   UIPopoverController         *popoverController;
@property (nonatomic, strong)   UINavigationController      *targetVC; 
```

.m 文件：
![错误](../Images/0ed5f8c7f16d7fc38cf6a18dda9ec735.png)

请建议如何解决这个问题。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-25T18:30:36.437

看来您的类是`UIViewController`. `UIViewController`有一个私有的、无证的 ivar `_popoverController`。由于您试图在您的类中创建一个具有相同名称的 ivar，因此您会收到错误消息。

最简单的方法是将您的`popoverController`属性重命名为不同的名称。否则，您的应用可能会因使用私有 API 而被标记。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-25T18:30:29.453

出现此问题是因为您的超类 UIViewController 已经有一个名为`_popoverController`. 因此，无论是默认综合还是您的显式（注释）`@synthesize`指令都无法访问他们想要用来提供`popoverController`属性的实例变量。

您可以通过重命名属性或显式合成属性以使用不同的实例变量名称来解决此问题：

```
// Either
@property (nonatomic, strong) UIPopoverController *localPopoverController
// Or
@synthesize popoverController = _localPopoverController; 
```

（另请注意，“本地”前缀不一定是您的属性名称或实例变量的最佳实践；请花一点时间考虑您的首选命名约定并适当地选择一个属性/实例变量名称。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-25T18:30:57.173

取消注释合成行并删除下划线，如下所示：`@synthetize popoverController;`

并将 .m 文件中的每个 _popoverController var 名称替换为 popoverController

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T02:37:47.323

不要命名您的实例变量（或属性）popoverController。如上所述 UIViewController 有一个声明为 _popoverController 的实例变量。（谁知道为什么。）

明智的做法是不要给您的弹出框控制器起一个通用名称，因为例如，如果您决定向工具栏添加多个弹出框，则必须创建多个弹出框控制器才能完成此操作。

如果您查看 Apple 的示例代码，您会看到他们是如何做到这一点的：

[http://developer.apple.com/library/ios/#samplecode/Popovers/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010436](http://developer.apple.com/library/ios/#samplecode/Popovers/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010436)

查看 DetailViewController 中的私有属性部分。在那里，您将看到三个控制器对象，但没有一个通用名称为“popoverController”。这将导致问题。

# asp.net-mvc - MVC 使用包含父值和子列表的视图模型传递视图模型视图

> ID：15073780
> 
> 赞同：3
> 
> 时间：2013-02-25T18:25:54.730
> 
> 标签：asp.net-mvc, linq, entity-framework

我的申请在一个设施中有多个区域。我正在尝试将单个模型传递给包含设施值（设施 ID、设施名称）和区域列表的视图。我目前将区域列表作为表的实体模型类型（area_list）。

我的视图模型如下：

```
 public class AreaView
{

    public string facility_name { get; set; }
    public int facility_id { get; set; }
    public int group_id { get; set; }

    public IList<area_list> areas { get; set; }

} 
```

顺便说一句，我最初尝试将区域列表设置为单独的视图模型 (AreaS) 而不是模型 area_list，但我在那里遇到了其他问题，所以为了简单起见，我又直接引用了。我认为这会更合适......

我的控制器：

```
 public ActionResult List(int id = 0)
    {

        var model = (from f in areaDB.facility_list
                     where f.facility_id == id
                     select new AreaView
                     {
                         facility_id = f.facility_id,
                         facility_name = f.facility_name,
                         areas = (from a in areaDB.area_list
                                  orderby a.area_name
                                  where a.facility_id == id
                                  select a).ToList()
                     });

        return View(model);
    } 
```

我的观点（略）：

```
@model SkyeEnergy.Models.AreaView
Facility: @Model.facility_name
@foreach (var item in Model.areas) {
<tr>
    <td>
        @Html.ActionLink(item.vendor_name,"Details","Area",new {id = item.vendor_id},null)

    </td>

</tr>
} 
```

我尝试了多种变体来完成以下内容，这给了我很多错误，但最近的错误如下：

> 传入字典的模型项的类型为“System.Data.Entity.Infrastructure.DbQuery`1[MyApp.Models.AreaView]”，但此字典需要“MyApp.Models.AreaView”类型的模型项。

我知道我没有传递视图所期望的正确类型，但我似乎无法弄清楚：

1.  视图模型设置是否正确（如何混合值和子列表
2.  如何构建我的 linq 查询以获取一个包含所有数据的 AreaView 对象
3.  将它适当地（以正确的类型）传递给我的视图

我在 Stackoverflow 上阅读了大约 45 篇文章，但似乎无法将它们拼凑在一起以完成上述内容。如果有人有正确的解决方案（甚至是方向），我将不胜感激。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:29:03.063

我认为您应该在查询末尾添加 FirstOrDefault() 以返回`AreaView`

```
public ActionResult List(int id = 0)
{

    var model = (from f in areaDB.facility_list
                 where f.facility_id == id
                 select new AreaView
                 {
                     facility_id = f.facility_id,
                     facility_name = f.facility_name,
                     areas = (from a in areaDB.area_list
                              orderby a.area_name
                              where a.facility_id == id
                              select a).ToList()
                 }).FirstOrDefault();

    return View(model);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T18:32:42.583

我不会在同一个查询中组合这两个对象。我会做

1) 选择 id = xxxx 的 AreaView

2) 选择 id = xxxx 的区域

3) 将区域分配给我的 AreaView

例子

```
AreaView model = GetAreaView(id);

model.Areas = GetAreas(id);

return View(model); 
```

***另外，为您当前的代码尝试以下操作***

```
return View(model.FirstOrDefault()); 
```

# facebook - facebook允许发布到墙上

> ID：15073786
> 
> 赞同：0
> 
> 时间：2013-02-25T18:26:19.250
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

我正在寻找一些脚本，但找不到好的脚本:(

```
 FB.ui({
    method: 'permissions.request',
    perms: 'user_website',
    display: 'popup'
    },function(response) {
        alert(response.toSource());
        if (response && response.perms) {
            alert('Permissions granted: '+response.perms);
        } else if (!response.perms){
            alert('User did not authorize permission(s).');
        }
}); 
```

# python - 生产中的 Django LDAP 身份验证

> ID：15073787
> 
> 赞同：0
> 
> 时间：2013-02-25T18:26:20.103
> 
> 标签：python, django, ldap

我正在使用 LDAP 身份验证模块登录我的 django 应用程序。这可以很好地登录，但我在使用以下功能时遇到问题：

```
request.user.is_authenticated(): 
```

这在我的开发机器上工作正常（也使用 ldap），但在生产中不会返回与用户关联的信息。特别是，我正在检索一组基于用户主键的事件。

```
eventList = Event.objects.filter(employee_id = request.user.pk) 
```

事件存在（它们在另一个视图中呈现），我很确定这是一个声明。值得注意的是，虽然我已经将 User 分类如下，但是创建了员工（我已经在管理界面中检查过）：

```
class Employee(models.Model):
    # This field is required.
    user = models.OneToOneField(User)
    manager_id = models.ForeignKey('self', related_name = 'employees', null = True)

    def __unicode__(self):
     return self.user.username

def create_user_profile(sender, **kwargs):
    """When creating a new user, make an employee profile too."""
    u = kwargs["instance"]
    if not Employee.objects.filter(user = u):
        Employee(user=u).save()

post_save.connect(create_user_profile, sender = User) 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T16:57:13.600

这取决于我的查询。基本上，原始查询假设每个 Employee 和 User 对象具有相同的 PK。这在开发中是可以的，但在生产中不起作用，因为键不匹配。

将原始查询替换为以下解决的问题：

```
 employee = request.user.employee
    eventList = Event.objects.filter(employee_id = employee.pk) 
```

# iphone - 如何防止 iPhone 中的自动旋转

> ID：15073794
> 
> 赞同：0
> 
> 时间：2013-02-25T18:26:49.017
> 
> 标签：iphone, ios, rotation, autorotate

在我的 iphone 应用程序中，我希望在设备旋转时只旋转一个视图。我该怎么做。我已将支持的界面方向选择为纵向，向右旋转和向左旋转

我怎样才能只旋转一个视图。实际上我想在 MPMoviePlayer 全屏时旋转它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T01:24:14.667

为您的视图控制器将返回值 NO 设置为 shouldAutorotateToInterfaceOrientation

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
{

return NO;
} 
```

您也可以将其从 Plist 中删除。UISupportedInterfaceOrientations

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T18:30:45.440

您的视图控制器需要响应

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation 
```

返回 YES 以允许，返回 NO 以禁止自转。

更好的解释在这里： [AutoRotate ONLY MpMoviePlayerControler iOS 6](https://stackoverflow.com/questions/13773179/autorotate-only-mpmovieplayercontroler-ios-6?answertab=votes#tab-top)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T22:19:07.583

在您的视图控制器中，如果不想旋转添加这个

```
 -(BOOL)shouldAutorotate
{
   return NO;
} 
```

在您的视图控制器中，如果要旋转添加此

```
-(BOOL)shouldAutorotate
{
    return YES;
} 
```

# android - 使用活动屏幕运行线程

> ID：15073796
> 
> 赞同：0
> 
> 时间：2013-02-25T18:26:53.377
> 
> 标签：android, android-asynctask, android-activity

我有以下代码：

```
public class MainActivity extends Activity {

Button btnStart;
MyTask objMyTask;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    btnStart = (Button) findViewById(R.id.btnstart);
    btnStart.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            objMyTask = new MyTask();
            objMyTask.execute();
        }
    });
}

class MyTask extends AsyncTask<Void, String, Integer> {  
@Override
    protected Integer doInBackground(Void... params) {...}

    @Override
    protected void onProgressUpdate(String... values) {...}

    @Override
    protected void onPostExecute(Integer result) {...}
}} 
```

`MyTask`以时间间隔生成值。在执行此线程期间，我设备上的屏幕处于活动状态，但我希望此应用程序运行更长时间，所以如果在整个执行过程中屏幕不处于活动状态会更好 - 这会很耗电。你知道这个问题的一些解决方案吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T18:30:20.417

使用服务而不是带有 AsyncTask 的 Activity：

[http://developer.android.com/guide/components/services.html](http://developer.android.com/guide/components/services.html)

# java - 性格地狱

> ID：15073797
> 
> 赞同：1
> 
> 时间：2013-02-25T18:26:54.037
> 
> 标签：java, character-encoding, cp1252

我需要帮助。我必须从文件中读取数据并将其存储到 Oracle 数据库中。当像“à”或“À”这样的字符出现在数据中时，我会遇到麻烦。例如，“à”被读取并变成“Ã”到我的应用程序中，因此，当我尝试将数据保存到数据库中时，有时，数据库会抱怨要保存到的字段的值太大。我也试过

`Normalizer.normalize(row, Form.NFD).replaceAll("\\p{InCombiningDiacriticalMarks}+", "");`

我也关注编码。我注意到，如果我在 Windows 机器上的数据文件（Cp1252 文件）上运行我的应用程序，我没有收到任何错误。可悲的是，当我在 Linux 机器上运行这些东西时，我遇到了错误。我正在使用 java 6.TIA。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T20:03:57.313

因此，Windows 机器上的默认字符编码可能是 windows-1252（latin-1 的超集）。这意味着如果您在读取文件时未指定字符集，Java 将默认为您的系统默认值并正确处理。

在您的 Linux 机器上，您的默认字符集可能是 UTF-8。这意味着如果您在读取文件时没有明确指定字符集，它将默认为 UTF-8 。. . 在这种情况下，这是错误的。

您没有在文件中发布您的阅读方式，但例如：

```
InputStreamReader isr = new InputStreamReader(file, "UTF-8"); 
```

这将创建一个输入流阅读器，用于读取 UTF-8 格式的文件。

# symfony - Doctrine2 偏移和限制

> ID：15073799
> 
> 赞同：1
> 
> 时间：2013-02-25T18:27:03.463
> 
> 标签：symfony, doctrine-orm

我想在查询中使用限制和偏移量，但返回的记录数不匹配。当我不使用 offset 和 limit 函数时，得到 26 个对象，并且在设置方法之后

```
->setMaxResults(5)
->setFirstResult(10) 
```

数字是 1 ... 发生了什么事？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T22:30:44.757

您可能是在 DQL 中[fetch-joining时遇到的典型问题。](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/dql-doctrine-query-language.html#joins)这是一个非常简单的问题，源于偏移和限制应用于尚未水合且必须归一化的结果集的事实（请参阅[有关第一和最大结果的文档](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/dql-doctrine-query-language.html#first-and-max-result-items-dql-query-only)）。

如果你想避免这个问题（即使是更复杂的连接或获取连接的结果），你将需要使用[ORM DQL Paginator API](http://docs.doctrine-project.org/en/latest/tutorials/pagination.html)。使用分页器基本上会触发多个查询：

1.  根据您的偏移量/限制计算结果集中的记录数
2.  计算查询的根实体的不同标识符（应用最大/第一个结果）
3.  检索连接结果（不应用第一个/最大结果）

它的用法很简单：

```
$query = $em->crateQuery($fetchJoinQuery);

$paginator = new \Doctrine\ORM\Tools\Pagination\Paginator($query);

$query->setFirstResult(20);
$query->setMaxResults(100);

foreach ($paginator as $result) {
    var_dump($result->getId());
} 
```

这将打印从偏移量 20 处的项目开始的 100 个项目，无论连接或 fetch-joined 结果的数量如何。

虽然这可能看起来效果不佳，但它是处理 fetch-joined 结果问题的最安全方法，这会导致明显的偏移量和结果限制。您可以通过深入了解[ORM Paginator 的内部结构](https://github.com/doctrine/doctrine2/tree/master/lib/Doctrine/ORM/Tools/Pagination)来了解如何直接处理此问题。

# javascript - 在 AJAX 加载后重新绑定 jQuery 样式 UI 界面的首选模式是什么？

> ID：15073800
> 
> 赞同：7
> 
> 时间：2013-02-25T18:27:08.570
> 
> 标签：javascript, jquery

这总是让我着迷。初始化网页上所有可爱的 UI 元素后，我加载了一些内容（例如，模式或选项卡），新加载的内容没有初始化 UI 元素。例如：

```
$('a.button').button(); // jquery ui button as an example
$('select').chosen(); // chosen ui as another example
$('#content').load('/uri'); // content is not styled :( 
```

我目前的方法是创建需要绑定的元素注册表：

```
var uiRegistry = {
  registry: [],
  push: function (func) { this.registry.push(func) },
  apply: function (scope) {
    $.each(uiRegistry.registry, function (i, func) {
      func(scope);
    });
  }
};

uiRegistry.push(function (scope) {
  $('a.button', scope).button();
  $('select', scope).chosen();
});

uiRegistry.apply('body'); // content gets styled as per usual

$('#content').load('/uri', function () {
  uiRegistry.apply($(this)); // content gets styled :)
}); 
```

我不能是唯一有这个问题的人，那么有没有更好的模式来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T19:25:10.203

我的回答与你概述的基本相同，但我使用 jquery 事件来触发设置代码。我称之为“moddom”事件。

当我加载新内容时，我会在父级上触发我的事件：

```
parent.append(newcode).trigger('moddom'); 
```

在小部件中，我查找该事件：

```
$.on('moddom', function(ev) {
  $(ev.target).find('.myselector')
}) 
```

为了说明事件方法，这过于简单化了。

实际上，我将它包装在一个函数 domInit 中，该函数接受一个选择器和一个回调参数。每当找到与选择器匹配的新元素时，它都会调用回调 - 使用 jquery 元素作为第一个参数。

所以在我的小部件代码中，我可以这样做：

```
domInit('.myselector', function(myelement) {
  myelement.css('color', 'blue');
}) 
```

domInit 在有问题的元素“domInit”上设置数据，该元素是已应用函数的注册表。

我的完整 domInit 函数：

```
window.domInit = function(select, once, callback) {
  var apply, done;
  done = false;
  apply = function() {
    var applied, el;
    el = $(this);
    if (once && !done) {
      done = true;
    }
    applied = el.data('domInit') || {};
    if (applied[callback]) {
      return;
    }
    applied[callback] = true;
    el.data('domInit', applied);
    callback(el);
  };
  $(select).each(apply);
  $(document).on('moddom', function(ev) {
    if (done) {
      return;
    }
    $(ev.target).find(select).each(apply);
  });
}; 
```

现在我们只需要记住在进行 dom 更改时触发 'moddom' 事件。

如果您不需要“一次”功能，您可以简化这一点，这是一种非常罕见的边缘情况。它只调用一次回调。例如，如果您要在找到任何匹配的元素时执行全局操作 - 但它只需要发生一次。没有 done 参数的简化：

```
window.domInit = function(select, callback) {
  var apply;
  apply = function() {
    var applied, el;
    el = $(this);
    applied = el.data('domInit') || {};
    if (applied[callback]) {
      return;
    }
    applied[callback] = true;
    el.data('domInit', applied);
    callback(el);
  };
  $(select).each(apply);
  $(document).on('moddom', function(ev) {
    $(ev.target).find(select).each(apply);
  });
}; 
```

在我看来，浏览器应该有办法在 dom 更改时接收回调，但我从未听说过这样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T19:04:28.683

最好的方法是将所有 ui 代码包装在一个函数中 - 甚至更好的是一个单独的文件 - 在 ajax 加载时只需将该函数指定为回调.. 这是一个小例子

假设您有将带有类的文本字段绑定`someclass-for-date`到日期选择器的代码，那么您的代码将如下所示..

```
$('.someclass-for-date').datepicker(); 
```

这是我认为最好的

```
function datepickerUi(){
    $('.someclass-for-date').datepicker();
} 
```

这就是负载的样子

```
$('#content').load('/uri', function(){

    datepickerUi();

}) 
```

或者您可以在脚本标签中的 html 末尾加载它..（但我不喜欢那样，因为它更难调试）

这里有一些提示

保持你的代码和css样式尽可能的干净..这意味着对于应该是日期选择器的文本字段，在你的网站上给他们一个类..按照这个速度，你的所有代码都将是干净且易于维护的..

阅读有关 OOCss 的更多信息，这将清楚我的意思。

主要是使用jquery，这完全是关于组织......考虑一下，你会用一行代码完成你想要完成的事情......

编辑

这是一个与您类似的js小提琴，但我想它更干净[点击这里](http://jsfiddle.net/Mm9Yp/1)

# css - Dynamics Crm 的 iframe 中的自定义内容被一位客户弄乱了。CSS 没有正确响应

> ID：15073801
> 
> 赞同：1
> 
> 时间：2013-02-25T18:27:12.390
> 
> 标签：css, customization, dynamics-crm-2011, ie-plugins

我正在开发 Dynamics Crm 插件。我们在潜在客户视图页面和其他一些新页面中添加了一些新的自定义。所有这些定制都发生在 iframe 中。这些 UI 定制在我们的机器上完美运行。

但是，我们的一位客户遇到了一些 ui 问题。奇怪的是，当我从我的电脑上打开他们的帐户时，它看起来还不错。不知何故，当他们在公司的任何一台计算机上打开同一个帐户时，它会显示一些杂乱无章的东西。一些 Css 不被尊重。

另一个事实是，当客户在他们的计算机上使用我们的插件打开他们的 QA 帐户时，看起来没有任何问题。

我们使用的是完全相同版本的 IE (9.0.13)。我不确定 ie 插件是否会对 Iframe 中自定义的 ui 产生影响。

我完全疯了。有没有人遇到过类似的事情，或者有人可以提供任何线索吗？非常感谢。

# visual-studio-2012 - 发布 Web 时指定连接字符串

> ID：15073802
> 
> 赞同：1
> 
> 时间：2013-02-25T18:27:15.977
> 
> 标签：visual-studio-2012, publish

我有一个正在构建的网站，我需要在其中部署到两个环境：stage 和 prod。

我在 web.config 中指定了三个连接字符串。

```
<add name="DefaultConnection" connectionString="Data Source=(LocalDb)\v11.0;Initial Catalog=MyWebAppWaitWebDb;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\MyWebAppWaitWeb.mdf" providerName="System.Data.SqlClient" />

<add name="MyWebAppConnection_Stage" connectionString="Server=StageSQL01T;Database=MyWebAppWaitWeb;User Id=foo;Password=bar" providerName="System.Data.SqlClient" />

<add name="MyWebAppConnection_Prod" connectionString="Server=ProdSQL01;Failover Partner=ProdSQL02;Database=prd_SP_ExternalData;User Id=foo;Password=bar" providerName="System.Data.SqlClient" /> 
```

在 Publishing Web Wizard 中，我会在向导的“设置”部分看到所有这三个连接字符串。所以在这种情况下，我选择了舞台并取消选中其他，以便我可以发布到我的舞台服务器。

![在此处输入图像描述](../Images/6343450cf98d543a9f52db23f1a0644d.png)

发布后，我发现它添加了一个名为“MyWebAppConnection_Stage_DatabasePublish”的新连接

```
<add name="DefaultConnection" connectionString="Data Source=(LocalDb)\v11.0;Initial Catalog=MyWebAppWaitWebDb;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\MyWebAppWaitWeb.mdf" providerName="System.Data.MyWebApp" />

<add name="MyWebAppConnection_Stage" connectionString="Data Source=StageSQL01T;Initial Catalog=MyWebAppWaitWeb;User ID=foo;Password=bar" providerName="System.Data.MyWebApp" />

<add name="MyWebAppConnection_Prod" connectionString="Server=ProdSQL01;Failover Partner=ProdSQL02;Database=prd_SP_ExternalData;User Id=MyWebAppWebApp;Password=bar" providerName="System.Data.MyWebApp" />

<add name="MyWebAppConnection_Stage_DatabasePublish" connectionString="Data Source=StageSQL01T;Initial Catalog=MyWebAppWaitWeb;User ID=foo;Password=bar" providerName="System.Data.MyWebApp" /> 
```

为什么会生成第 4 个连接字符串？此外，这个 VS 2010 Publishing 如何与我为我的实体代码优先类指定连接字符串的 DbContext 类兼容？

```
public class MyContextDb : DbContext
{
    public MyContextDb(): base("DefaultConnection")
    {
        Debug.Write(Database.Connection.ConnectionString);
    }
... 
```

我认为我想使用传统的 web.config 转换，它只是根据正在使用的转换文件更改一个连接字符串。

# objective-c - 根据日期对 NSDictionary 数组进行排序

> ID：15073803
> 
> 赞同：-2
> 
> 时间：2013-02-25T18:27:27.823
> 
> 标签：objective-c, cocoa-touch, nsarray, nsdate, nsdictionary

我正在寻找一种`NSMutableArray`基于字典中包含的日期对字典进行排序的方法。每个看起来像这样：

```
{
  name: tom, 
  surname: smith, 
  date of birth (NSDate): 2013-02-21 15:25:27
} 
```

我知道方法`earlierDate`等，但由于它们只比较两个日期，我只是有点卡在如何遍历数组以便得到一个完全有序的字典数组？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T19:00:25.713

使用`sortUsingComparator`它可以很容易地解决：

```
[yourArray sortUsingComparator:^NSComparisonResult(NSDictionary *a, NSDictionary *b) {
   return [a[@"dateOfBirth"] compare:b[@"dateOfBirth"]];
}]; 
```

# java - Android / Java 开发 - 水平滚动视图

> ID：15073804
> 
> 赞同：0
> 
> 时间：2013-02-25T18:27:29.657
> 
> 标签：java, android, view, scroll

我想知道如何在一个 xml 文件中制作多个水平滚动视图。这是对普通滚动视图的简单调整还是要复杂得多？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:53:07.223

是的，您应该能够在 xml 中放置多个滚动视图。您可以尝试以下方法：

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" 
    android:id="@+id/LinearLayoutRight" android:layout_width="match_parent" android:layout_height="match_parent" android:orientation="vertical">
<HorizontalScrollView android:id="@+id/scrollView1" android:background="#000" android:layout_width="match_parent" android:layout_height="300dp"> 
</HorizontalScrollView>
 <HorizontalScrollView android:id="@+id/scrollView1" android:background="#f00" android:layout_width="match_parent" android:layout_height="300dp">
  </HorizontalScrollView>  
</LinearLayout> 
```

# javascript - 使用 javascript 替换 Ruby On Rails 视图中特定标记的损坏图像

> ID：15073805
> 
> 赞同：0
> 
> 时间：2013-02-25T18:27:36.007
> 
> 标签：javascript, ruby-on-rails, paperclip

我想在视图中显示用户的头像，但有时会丢失图像，因此`missing.png`会显示。如何将其替换为默认图像？（注意：我不想用它替换视图中所有损坏的图像，只是我感兴趣的那个）。

我做了一些谷歌搜索并找到了这个 javascript 函数，但不确定如何在我的视图中使用它（`.html.havl`文件）（我对 Ruby on Rails 非常陌生）

```
$('img').error(function(){
 $(this).attr('src', '<<<REPLACE URL>>>');
}); 
```

这是我的看法

```
...
.user_avatar
 %img{:src => @user.avatar.url} <<<< how do I make the 'src' points to the default image 
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:42:38.597

只需在 JS 端使用更具体的选择器：

```
$(".user_avatar img").on('error', function () {
    $(this).attr('src', 'replace-url');
}); 
```

如果您想在 RoR 端执行此操作，您可以检查它是否`@user.avatar.url`存在于同一个文件系统上，甚至使用 HTTP 请求。

# c - Postgresql：在C中定义自己的类型

> ID：15073809
> 
> 赞同：2
> 
> 时间：2013-02-25T18:27:42.560
> 
> 标签：c, postgresql

我正在使用 Postgresql 9.2 安装，并且正在尝试让扩展程序（我已经编程）运行。

这段代码可以编译，我可以将它加载到 Postgresql 中；但每次我尝试做一个`INSERT`，与数据库的连接都会停止。我想原因是我的`in`-function 以某种方式被破坏了。

首先是typedef：

```
typedef struct tphys {
   char   length[4];
   char   data[1];
} tphys; 
```

如您所见，我有一个数据类型，它的大小是无限的。现在到`in`-code：

```
PG_FUNCTION_INFO_V1(tphys_data_in);
Datum
tphys_data_in(PG_FUNCTION_ARGS)
{
   char *in  = PG_GETARG_CSTRING(0);
   tphys *dest = (tphys *) palloc(VARHDRSZ + VARSIZE(in));

   SET VARSIZE(dest, VARHDRSZ + VARSIZE(in));
   memcpy(VARDATA(dest), in, VARSIZE(in));

   PG_RETURN_POINTER(dest);
} 
```

我一直在尝试这段代码很长一段时间，我真的不知道错误在哪里。你可能看到了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T18:35:10.320

您不能将 VARSIZE 宏用于 cstring 类型。

```
char *instr = PG_GETAR_CSTRING(0);
tphys *dest = (phhys *) palloc(VARHDRSZ + strlen(instr));

... 
```

# php - PHP 无法在联系我们表单中工作

> ID：15073811
> 
> 赞同：0
> 
> 时间：2013-02-25T18:27:54.757
> 
> 标签：php, html

我只是 PHP 和 Html 的初学者。我已经看到了很多与此相关的 SO 问题，但不知何故无法在我的最后解决一个非常简单的问题。所以，请帮忙。

以下代码似乎不起作用。当我运行此代码时，表单前总是有一条消息“现在似乎有问题。请稍后再试”。无论我是否按下提交按钮，都没有任何区别。

```
<h2 >Inquiry form</h2>

<?php
    if (isset($_POST['submit'])){

        echo "Thank You!";
    }
    else {
        echo "There seems to be a problem right now. Please try again after sometime";
    }                                   

?> 

<form name="input" method="POST" action="contact.php">
    <label for="Name">Name (required):</label>
    <br />
    <input type="text" name="Name" />
    <br />
    <div class="clear"></div>
    <label for="inputmail">Email(required):</label>
    <br />
    <input type="text" name="email" />
    <br />
    <div class="clear"></div>
    <label for="inputtelefon">Phone:</label>
    <br />
    <input type="text" name="phone" />
    <br />
    <div class="clear"></div>
    <label for="inputmessage">Message:</label>
    <br/>
    <textarea name="message" cols="28" rows="3" ></textarea>
    <div class="clear"></div>
    <div id="send">
        <input type="submit" value=" Submit " />
        <input type="reset" value="  Clear  "  />
    </div>
</form> 
```

更改代码：

```
<h2 >Inquiry form</h2>

                                  <?php
                                  if ($_SERVER['REQUEST_METHOD'] == 'POST') {
                            //if ($_SERVER['REQUEST_METHOD'] == 'POST') {  This is not working as well
                                        echo "Thank You!";
                                    }
                                    else {
                                        echo "There seem to be a problem right now. Please try again after sometime";
                                    }
                             ?> 

                       <form name="input" method="POST" action="contact.php">
                            <label for="Name">Name (required):</label>
                            <br />
                            <input type="text" name="Name" />
                            <br />
                             <div class="clear"></div>
                             <label for="inputmail">Email(required):</label>
                            <br />
                            <input type="text" name="email" />
                            <br />
                            <div class="clear"></div>
                            <label for="inputtelefon">Phone:</label>
                            <br />
                            <input type="text" name="phone" />
                            <br />
                            <div class="clear"></div>
                            <label for="inputmessage">Message:</label>
                            <br/>
                            <textarea name="message" cols="28" rows="3" ></textarea>
                            <div class="clear"></div>
                  </div>
                  <div id="send">
                <input type="submit" value=" Submit " name="submit"/>
                </div>
            </form> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T18:29:16.333

那是因为您的提交按钮没有名称：

```
<input type="submit" value=" Submit " name="submit"/> 
```

**编辑**

基于 RandomCoder 的评论（在 Marc B 的回答中）。

发现了这个类似的问题：[isset($_POST['submit']) vs $_SERVER['REQUEST_METHOD']=='POST'](https://stackoverflow.com/questions/10943060/isset-postsubmit-vs-serverrequest-method-post/10943179#10943179)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-25T18:30:36.327

检查提交的方法无效。永远不要检查表单域的存在/不存在。这是不可靠的。您可能会更改字段名称，但忘记更新 PHP。改用这个：

```
if ($_SERVER['REQUEST_METHOD'] == 'POST') {
   ...
} 
```

它是 100% 可靠的，如果执行了 POST，它将始终是“真实的”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T09:47:33.103

看看你更新的 if 语句。意思是：如果表单已提交，则显示“thank you”，如果表单尚未提交，则显示“似乎有问题”。

这就是您总是看到“似乎有问题”的原因，因为当您查看表单而不提交它时，`else`您的 if 语句块会触发。

您应该删除该`else`块，因为它没有任何意义，所以它变成：

```
if ($_SERVER['REQUEST_METHOD'] == 'POST') {
    // form has been submitted, handle the data and say thanks...
    echo "Thank You!";
} 
```

使用此方法而不是检查提交按钮会更好，因为如果用户按下回车键提交表单，Internet Explorer 不会将提交按钮作为 post 变量发送。

更多信息 -[`Why isset($_POST['submit'])`很糟糕](http://www.crosscode.co.uk/php/why-using-isset-post-submit-is-not-compatible-with-internet-explorer/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T18:36:52.360

我看到只有一个原因，即您没有定义名称提交给任何变量。有两种方法可以找到提交表单：

要么改变：

```
 <input type="submit" value=" Submit " />

 to

 <input type="submit" value=" Submit " name="submit"/> 
```

或添加额外的行来做这样的事情

```
 <input type = "hidden" name="passed" /> 
```

并检查

```
 <?php
      if (isset($_POST['passed'])){
          echo "Thank You!";
      }else {
           echo "There seems to be a problem right now. Please try again after sometime";
      }                                   

 ?> 
```

# scala - 如何使用 Play Framework 2.1 安排每小时工作？

> ID：15073819
> 
> 赞同：13
> 
> 时间：2013-02-25T18:28:11.463
> 
> 标签：scala, playframework, playframework-2.1

在 Play 1 中，它很简单：

```
@Every(value = "1h")
public class WebsiteStatusReporter extends Job {

    @Override
    public void doJob() throws Exception {
        // do something
    }
} 
```

Play 2.1 的等价物是什么？

我知道 Play 使用 akka，我[发现了这个代码示例](http://www.playframework.com/documentation/2.1.0/ScalaAkka)：

```
import play.api.libs.concurrent.Execution.Implicits._
Akka.system.scheduler.schedule(0.seconds, 30.minutes, testActor, "tick") 
```

但作为一个 Scala 菜鸟，我不明白它是如何工作的。有人可以提供一个完整的工作示例（端到端）吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-25T20:50:44.660

[这是我的代码](https://github.com/ndeverge/twivent/blob/master/app/Global.scala#L28)的摘录：

```
import scala.concurrent.duration.DurationInt
import akka.actor.Props.apply
import play.api.Application
import play.api.GlobalSettings
import play.api.Logger
import play.api.Play
import play.api.libs.concurrent.Execution.Implicits.defaultContext
import play.api.libs.concurrent.Akka
import akka.actor.Props
import actor.ReminderActor

object Global extends GlobalSettings {

  override def onStart(app: Application) {

    val controllerPath = controllers.routes.Ping.ping.url
    play.api.Play.mode(app) match {
      case play.api.Mode.Test => // do not schedule anything for Test
      case _ => reminderDaemon(app)
    }

  }

  def reminderDaemon(app: Application) = {
    Logger.info("Scheduling the reminder daemon")
    val reminderActor = Akka.system(app).actorOf(Props(new ReminderActor()))
    Akka.system(app).scheduler.schedule(0 seconds, 5 minutes, reminderActor, "reminderDaemon")
  }

} 
```

它只是在应用程序启动时启动一个守护程序，然后每 5 分钟启动一次。它使用 Play 2.1 并且按预期工作。

请注意，此代码使用[Global 对象](http://www.playframework.com/documentation/2.1.0/ScalaGlobal)，该对象允许在应用程序启动时运行一些代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-25T18:45:03.407

一个例子：

```
case object Tick

class TestActor extends Actor {

  def receive = {
    case Tick => //...
  }
}

val testActor = Akka.system.actorOf(Props[TestActor], name = "testActor")

Akka.system.scheduler.schedule(0.seconds, 30.minutes, testActor, Tick) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-25T18:51:43.520

看看[Akka 的文档](http://doc.akka.io/docs/akka/2.0.5/scala/scheduler.html)

你给的样本是：

```
def schedule(
  initialDelay: Duration,
  frequency: Duration,
  receiver: ActorRef,
  message: Any): Cancellable 
```

意思是：从现在开始 0 秒，每 30 分钟发送给参与者`testActor`消息 `Tick`

对于您可能不需要的简单任务，更重要的是不需要使用 Actors - 您可以安排新的 Runnable：

```
 def schedule(
    initialDelay: Duration, frequency: Duration, runnable: Runnable): Cancellable 
```

[其他答案中的更详细描述](https://stackoverflow.com/a/13469308/1066240)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-03-10T00:36:10.640

一个不使用 Actors 的简单播放调度程序。

它可以使用 org.quartz.scheduler 并从 Global 类调用调度程序来完成。

[示例调度程序](https://github.com/hynek-jemelik/scheduler)

# forms - spring-form:options 标签与枚举

> ID：15073830
> 
> 赞同：12
> 
> 时间：2013-02-25T18:28:42.373
> 
> 标签：forms, spring, spring-mvc, enums

我在显示具有正确值的下拉列表时遇到问题。我正在使用`<spring-form:select>`,`<spring-form:options>`和`<spring-form:option>`标签，但我无法让它显示正确的选项。使用以下代码，我应该只列出“选项 2”、“选项 7”和“选项 8”。

*注意 - 我不想显示所有可能的 Enum 值，但出于某种原因，Spring 似乎想要全部显示它们。它似乎完全忽略了提供给`<spring-form:options>`标签的列表。

JSP 标签

```
<spring-form:select path="selectOptions">
    <spring-form:option value="" label="*** Select Option ***" />
    <spring-form:options path="${availableOptions}" />
</spring-form:select> 
```

枚举

```
public enum SelectOptions {

    // CHECKSTYLE_OFF: LineLength

    /**
     * Option 1.
     */
    OPTION_1(1, "Option 1"),
    /**
     * Option 2.
     */
    OPTION_2(2, "Option 2"),
    /**
     * Option 3.
     */
    OPTION_3(3, "Option 3"),
    /**
     * Option 4.
     */
    OPTION_4(4, "Option 4"),
    /**
     * Option 5.
     */
    OPTION_5(5, "Option 5"),
    /**
     * Option 6.
     */
    OPTION_6(6, "Option 6"),
    /**
     * Option 7.
     */
    OPTION_7(7, "Option 7"),
    /**
     * Option 8.
     */
    OPTION_8(8, "Option 8"),
    /**
     * Option 9.
     */
    OPTION_9(9, "Option 9"),
    /**
     * Option 10.
     */
    OPTION_10(10, "Option 10");

    private int id;
    private String description;

    /**
     * Constructor.
     *
     * @param id the id
     * @param description the description
     */
    private SelectOptions(final int id, final String description) {
        this.id = id;
        this.description = description;
    }

    /**
     * Retrieves the {@link SelectOptions} associated with the passed in id.
     *
     * @param id the id associated with the SelectOptions
     * @return the SelectOptions
     */
    public static SelectOptions getInstance(final int id) {

        for (final SelectOptions selectOptions : SelectOptions.values()) {
            if (selectOptions.id == id) {
                return selectOptions;
            }
        }

        throw new IllegalArgumentException("SelectOptions could not be determined with id [" + id + "]");
    }

    /**
     * Retrieves the {@link SelectOptions} associated with the passed in description.
     *
     * @param description the description associated with the SelectOptions
     * @return the SelectOptions
     */
    public static SelectOptions getInstance(final String description) {

        for (final SelectOptions selectOptions : SelectOptions.values()) {
            if (selectOptions.description == description) {
                return selectOptions;
            }
        }

        throw new IllegalArgumentException("SelectOptions could not be determined with description [" + description + "]");
    }

    /**
     * Simple Getter.
     *
     * @return the id
     */
    public int getId() {
        return this.id;
    }

    /**
     * Simple Setter.
     *
     * @param id the id to set
     */
    public void setId(final int id) {
        this.id = id;
    }

    /**
     * Simple Getter.
     *
     * @return the description
     */
    public String getDescription() {
        return this.description;
    }

    /**
     * Simple Setter.
     *
     * @param description the description to set
     */
    public void setDescription(final String description) {
        this.description = description;
    }
} 
```

控制器

```
public class SpringController implements SpringControllerInterface {

    /**
     * /WEB-INF/jsp/myJSP.jsp.
     */
    private static final String PAGE = "/WEB-INF/jsp/myJSP.jsp";

    /**
     * {@inheritDoc}
     */
    @Override
    public ModelAndView load(final Model model) {

        final ModelAndView mav = new ModelAndView(PAGE);

        final List<SelectOptions> availableOptions = this.getAvailableOptions();

        mav.addObject("availableOptions", availableOptions);

        return mav;
    }

    /**
     * {@inheritDoc}
     */
    @Override
    public ModelAndView save(final Model model) {

        final ModelAndView mav = new ModelAndView(PAGE);

        // TODO

        return mav;
    }

    /**
     * {@inheritDoc}
     */
    @Override
    public Model getModel() {
        return new ModelImpl();
    }

    /**
     * @return a list of available options
     */
    public List<SelectOptions> getAvailableOptions() {

        final List<SelectOptions> availableOptions = Lists.newArrayList();

        availableOptions.add(SelectOptions.OPTION_1);
        availableOptions.add(SelectOptions.OPTION_7);
        availableOptions.add(SelectOptions.OPTION_8);

        return availableOptions;
    }
    } 
```

模型

```
public class ModelImpl implements Model {

    private SelectOptions selectOptions;

    /**
     * Simple Getter.
     *
     * @return the selectOptions
     */
    @Override
    public SelectOptions getSelectOptions() {
        return this.selectOptions;
    }

    /**
     * Simple Setter.
     *
     * @param selectOptions the selectOptions to set
     */
    @Override
    public void setSelectOptions(final SelectOptions selectOptions) {
        this.selectOptions = selectOptions;
    }

} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-02-24T09:07:32.370

如果你创建了一个 spring 控制器并且你想将一个 enum 传递给你的 jsp 页面，你可以这样做：

**枚举示例：**

```
public enum Coin {

    HEADS("Heads", "heads"),
    TAILS("Tails", "tails");

    private final String fullName;
    private final String shortName;

    private Coin(String fullName, String shortName) {
        this.fullName = fullName;
        this.shortName = shortName;
    }

    public String getFullName() {
        return fullName;
    }

    public String getShortName() {
        return shortName;
    }

} 
```

**将此枚举传递给您的模型：**

```
model.addObject("coins", Coin.values()); 
```

**在您的 jsp 页面中使用它的形式：**

```
<form:select path="selection">
    <form:options items="${coins}" itemValue="shortName" itemLabel="fullName" />
</form:select> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-25T20:00:20.317

看起来这个问题的解决方案是我在`<spring-form:options>`标签中使用了属性“路径”。它应该是“项目”，而不是“路径”。

更正的 JSP 片段：

```
<spring-form:select path="selectOptions">
    <spring-form:option value="" label="*** Select Option ***" />
    <spring-form:options items="${availableOptions}" />
</spring-form:select> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T18:57:15.397

`<spring-form:options>`如果您使用标签，您甚至不需要使用 items 属性。
**选项标签：**
*呈现 HTML 的“选项”标签列表。根据绑定值适当设置“选定”。*
参考[Spring 表单 tld](http://static.springsource.org/spring/docs/2.0.x/reference/spring-form.tld.html#spring-form.tld.options)。因此，对于您的需要，我想回退到[JSTL 核心](https://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDAQFjAA&url=http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/c/tld-summary.html&ei=YrMrUfPPFsfLrQeMsYCQAg&usg=AFQjCNHSLnoalXDvxyinCRWPOPu0L3fhMA&sig2=dlU0HdKAtR-QTpN3rjbiLg&bvm=bv.42768644,d.bmk)就`<spring-form:option/>`足够了。

# ms-access - 在 Access 中加载表单时在组合框中显示升序值（默认值）

> ID：15073831
> 
> 赞同：2
> 
> 时间：2013-02-25T18:28:47.707
> 
> 标签：ms-access, combobox, vba, ms-access-2010, form-load

因此，在我拥有的表单上，我使用了一个组合框（未绑定），行源链接到`EntryID`，它是从另一个表中提取的。目前，`EntryID`其值为 1 到 300，其中 1 是最旧的条目，而 300 是最新添加的条目。

我使用组合框中的值来重新查询我在此表单上使用的子表单。显然，子表单引用的所有表格都已`EntryID`填充。

如何在表单加载时填充组合框中的最新值？我可以按升序或降序对值进行排序，但这只是在您单击组合框上的向下箭头之后。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T02:12:46.663

`UNION`使用要添加的值执行 a ：

```
SELECT EntryID FROM urTable 

UNION

SELECT (Max(EntryID) + 1) FROM urTable 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T02:40:00.020

如果您对组合的行源使用查询，则可以通过在`WHERE`子句之后添加它来在查询中进行排序...

```
ORDER BY EntryID DESC 
```

# emacs - 如何在 Emacs 的 lisp 文件中定位错误？

> ID：15073832
> 
> 赞同：7
> 
> 时间：2013-02-25T18:28:57.390
> 
> 标签：emacs, lisp, elisp

使用我的 .emacs 初始化文件时，我有时会犯错误。当我执行 eval-buffer 时，我收到消息“解析期间文件结束”。

如何让 Emacs 告诉我错误的确切位置？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-25T19:51:25.037

首先是检查括号和字符串引号的平衡。

对于 Emacs Lisp 在 GNU Emacs 中使用`M-x check-parens`.

其他类似 Emacs 的编辑器也有类似的命令。例如在 LispWorks 中可以使用`M-x Find Unbalanced Parentheses`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-26T17:06:24.397

这些错误很难真正定位。

最好尽量避免括号不匹配。有几种内置和第 3 方次要模式可以帮助您：

*   `electric-pair-mode`：自动插入匹配的右括号（内置）
*   `show-paren-mode`：当点在括号上时，突出显示匹配的（内置）
*   `rainbow-delimiters-mode`：在不同的面孔中突出显示每个级别的括号
*   `paredit-mode`: 始终保持括号平衡。通常，将重点放在 Sexps 上而不是字符和单词上。

我建议启用所有这些。因此，消除不匹配括号的合理配置是：

```
(add-hook 'emacs-lisp-mode-hook 'paredit-mode)
(add-hook 'emacs-lisp-mode-hook 'rainbow-delimiters-mode)
(show-paren-mode 1)
(electric-pair-mode 1) 
```

Paredit 和 Rainbow Delimiters 可从 MELPA 获得。

# jquery-ui - 如何在 cfc 中用 Coldfusion 替换 AJAX 帖子

> ID：15073837
> 
> 赞同：2
> 
> 时间：2013-02-25T18:29:33.410
> 
> 标签：jquery-ui, jquery, coldfusion, coldfusion-9

我一直在尝试找到一种方法来做一些看起来很简单但似乎无法找到解决方案的方法。我有一篇用一些 HTML 制作的帖子，并希望动态更改其中的部分内容。我将 Coldfusion 9 用于服务器端、AJAX 和 jQuery UI 1.10.1 和 jQuery 1.9.1。

我想做的是在 AJAX 中发布并替换 cfc 中的数据服务器端。这是我在客户端的代码。

```
var ipost = '<li> <h2><a href="PersonsID" target="_blank">Persons Name</a></h2> </li>';
var message_a = $('#message_a').attr('value');

                $.ajax({
                    type: "POST",
                    url: "cfc/cfc_Forum.cfc?method=func_AddNew&returnformat=json",
                    data: { message:"message_a=" + wall_post },
                    success: function () {
                        $('ul#posts').prepend(ipost);

                    }
                }); 
```

我想用“Session.Variable1”替换“PersonsID”，用“Session.Variable2”替换“Persons Name”。cfc 将是 CF 的标准协议。这是组件的外观。

```
<cfcomponent>

    <cffunction name="func_AddNew" access="remote" returntype="struct">
    <cfargument name="message" type="string" required="true" />
        <--- ********** replace "Persons ID" and "Persons Name" ************** --->

        <!--- ********* INSERT INTO DATA BASE ************ --->

        <cfreturn return />
    </cffunction>   

</cfcomponent> 
```

任何建议都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T21:24:47.300

下面的代码将起作用，但如果他们要查看源代码，它确实会暴露该人的 personID，因此这样做有一点风险。您可以做的另一件事是传递 cftolken 并尝试在 cfc 中找到正确的变量，这需要更多的努力。

```
 $.ajax({
    type: "POST",
    url: "cfc/cfc_Forum.cfc?method=func_AddNew&returnformat=json",
    data: { message:"message_a=" + wall_post
          , personID: <cfoutput>#Session.Variable1#</cfoutput>
          , personName: <cfoutput>#Session.Variable2#</cfoutput>
            },
    success: function () {
         $('ul#posts').prepend(ipost);
                        }
                }); 
```

# authentication - 无法通过代理进行隧道传输。代理通过 https 返回“HTTP/1.1 407”

> ID：15073839
> 
> 赞同：5
> 
> 时间：2013-02-25T18:29:36.890
> 
> 标签：authentication, https, proxy, apache-wink, http-tunneling

我尝试通过需要身份验证的 https 连接到服务器。此外，我中间有一个 http 代理，也需要身份验证。我使用 ProxyAuthSecurityHandler 对代理进行身份验证，使用 BasicAuthSecurityHandler 对服务器进行身份验证。

接收 java.io.IOException：无法通过代理进行隧道传输。

```
Proxy returns "HTTP/1.1 407 Proxy Auth Required"

at sun.net.www.protocol.http.HttpURLConnection.doTunneling(HttpURLConnection.java:1525)
at sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect (AbstractDelegateHttpsURLConnection.java:164)
at sun.net.www.protocol.https.HttpsURLConnectionImpl.connect(HttpsURLConnectionImpl.java:133)
at org.apache.wink.client.internal.handlers.HttpURLConnectionHandler.processRequest(HttpURLConnectionHandler.java:97) 
```

我注意到 ProxyAuthSecurityHandler 的实现期待响应代码 407，但是，在调试期间，由于抛出 IOException，我们从未进入第二部分。

代码快照：

```
ClientConfig configuration = new ClientConfig();
configuration.connectTimeout(timeout);

MyBasicAuthenticationSecurityHandler basicAuthProps = new MyBasicAuthenticationSecurityHandler();
basicAuthProps.setUserName(user);
basicAuthProps.setPassword(password);
configuration.handlers(basicAuthProps);

if ("true".equals(System.getProperty("setProxy"))) {
    configuration.proxyHost(proxyHost);
    if ((proxyPort != null) && !proxyPort.equals("")) {
        configuration.proxyPort(Integer.parseInt(proxyPort));
    }

    MyProxyAuthSecurityHandler proxyAuthSecHandler =
            new MyProxyAuthSecurityHandler();
    proxyAuthSecHandler.setUserName(proxyUser);
    proxyAuthSecHandler.setPassword(proxyPass);
    configuration.handlers(proxyAuthSecHandler);
}

restClient = new RestClient(configuration);
// create the createResourceWithSessionCookies instance to interact with

Resource resource = getResource(loginUrl);

// Request body is empty
ClientResponse response = resource.post(null); 
```

尝试使用 wink 客户端版本 1.1.2 和 1.2.1。这个问题在两者中都重复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T12:07:51.277

我发现当尝试使用 https url 通过代理时，我们首先发送 CONNECT，然后才尝试发送请求。代理服务器无法读取我们附加到请求的任何标头，因为它没有解密流量的密钥。这意味着 CONNECT 应该已经让用户/传递给代理以通过此阶段。这是我使用的代码快照-对我有用：

```
import sun.misc.BASE64Encoder;
import java.io.*;
import java.net.*;

public class ProxyPass {
    public ProxyPass(String proxyHost, int proxyPort, final String userid, final String password, String url) {

        try {
        /* Create a HttpURLConnection Object and set the properties */
            URL u = new URL(url);
            Proxy proxy =
            new Proxy(Proxy.Type.HTTP, new InetSocketAddress(proxyHost, proxyPort));
            HttpURLConnection uc = (HttpURLConnection)u.openConnection(proxy);

            Authenticator.setDefault(new Authenticator() {
            @Override
            protected PasswordAuthentication getPasswordAuthentication() {
            if (getRequestorType().equals(RequestorType.PROXY)) {
            return new PasswordAuthentication(userid, password.toCharArray());
            }
            return super.getPasswordAuthentication();
            }
            });

            uc.connect();

            /* Print the content of the url to the console. */
            showContent(uc);
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    private void showContent(HttpURLConnection uc) throws IOException {
        InputStream i = uc.getInputStream();
        char c;
        InputStreamReader isr = new InputStreamReader(i);
        BufferedReader br = new BufferedReader(isr);
        String line;
        while ((line = br.readLine()) != null) {
            System.out.println(line);
        }
    }

    public static void main(String[] args) {

        String proxyhost = "proxy host";
        int proxyport = port;
        String proxylogin = "proxy username";
        String proxypass = "proxy password";
        String url = "https://....";
        new ProxyPass(proxyhost, proxyport, proxylogin, proxypass, url);

    }
    } 
```

如果您正在使用 wink - 就像我一样，您需要在 ClientConfig 中设置代理，然后在将其传递给 RestClient 之前设置默认身份验证器。

```
ClientConfig configuration = new ClientConfig();
    configuration.connectTimeout(timeout);

    BasicAuthenticationSecurityHandler basicAuthProps = new BasicAuthenticationSecurityHandler();
    basicAuthProps.setUserName(user);
    basicAuthProps.setPassword(password);
    configuration.handlers(basicAuthProps);

    if (proxySet()) {
        configuration.proxyHost(proxyHost);
        if ((proxyPort != null) && !proxyPort.equals("")) {
            configuration.proxyPort(Integer.parseInt(proxyPort));
        }
        Authenticator.setDefault(new Authenticator() {
            @Override
            protected PasswordAuthentication getPasswordAuthentication() {
                if (getRequestorType().equals(RequestorType.PROXY)) {
                    return new PasswordAuthentication(proxyUser), proxyPass.toCharArray());
                }
                return super.getPasswordAuthentication();
            }
        });
    }

    restClient = new RestClient(configuration);
    Resource resource = getResource(loginUrl);

    // Request body is empty
    ClientResponse response = resource.post(null);
    if (response.getStatusCode() != Response.Status.OK.getStatusCode()) {
        throw new RestClientException("Authentication failed for user " + user);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-04T05:28:10.360

如果**Ilana Platonov**的[回答](https://stackoverflow.com/a/15111756/2408342)不起作用，请尝试编辑变量：

```
jdk.http.auth.tunneling.disabledSchemes  
jdk.http.auth.proxying.disabledSchemes 
```

# python - str(x) 的 Python 默认行为

> ID：15073842
> 
> 赞同：3
> 
> 时间：2013-02-25T18:29:55.857
> 
> 标签：python, string, floating-point

我依赖于一些使用 Decimal 类的代码，因为它需要精确到一定数量的小数位。一些函数允许输入是浮点数，因为它与代码库的其他部分接口的方式。要将它们转换为十进制对象，它使用类似的东西

```
mydec = decimal.Decimal(str(x)) 
```

其中 x 是作为输入的浮点数。我的问题是，有谁知道应用于浮动的“str”方法的标准是什么？

例如，取数字 2.1234512。由于浮点数的表示方式，它在内部存储为 2.12345119999999999。

```
>>> x = 2.12345119999999999
>>> x
2.1234511999999999
>>> str(x)
'2.1234512' 
```

好的，在这种情况下，str(x) 正在执行类似 '%.6f' % x 的操作。这是我的代码转换为小数的方式的问题。采取以下措施：

```
>>> d = decimal.Decimal('2.12345119999999999')
>>> ds = decimal.Decimal(str(2.12345119999999999))
>>> d - ds
Decimal('-1E-17') 
```

因此，如果我有浮点数 2.12345119999999999，并且我想将它传递给 Decimal，那么使用 str() 将其转换为字符串会得到错误的答案。我需要知道 str(x) 确定格式的规则是什么，因为我需要确定是否需要重写此代码以避免此错误（请注意，它可能没问题，因为，对于例如，一旦我们有一个小数对象，代码可能会四舍五入到小数点后 10 位）

python的文档中必须有一些规则，希望这里有人可以指出我。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T19:02:20.380

在 Python 源代码中，查看“Include/floatobject.h”。字符串转换的精度设置在距顶部几行的注释之后，并对选择进行了一些解释：

```
/* The str() precision PyFloat_STR_PRECISION is chosen so that in most cases,
   the rounding noise created by various operations is suppressed, while
   giving plenty of precision for practical use. */

#define PyFloat_STR_PRECISION 12 
```

如果您需要不同的东西，您可以选择重建。任何更改都会更改浮点数和复数的格式。请参见 ./Objects/complexobject.c 和 ./Objects/floatobject.c。此外，您可以比较这两个文件中 repr 和 str 如何转换双精度值的区别。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T19:08:05.997

这里有几个问题值得讨论，但总结是：**您无法提取尚未存储在系统中的信息**。

如果您采用十进制数并将其存储为浮点数，您将丢失信息，因为大多数具有有限位数的十进制（以 10 为底）数字**不能**使用以 2 为底的有限位数来存储（二进制）。

如前所述，`str(a_float)`真的会打电话`a_float.__str__()`。[正如文档所述](http://docs.python.org/2/library/functions.html#str)，该方法的目的是

> 返回一个字符串，其中包含一个对象的可很好打印的表示

这种情况没有特别的定义`float`。我的观点是，出于您的目的，您应该考虑`__str__`' 的行为是[undefined](https://en.wikipedia.org/wiki/Undefined_behavior)，因为没有关于它的官方文档 - 当前的实现可以随时更改。

如果您没有原始字符串，则无法从`float`对象中提取十进制表示的缺失数字。您所能做的就是使用字符串格式（您提到的）以**可预测的方式进行舍入：**

`Decimal( "{0:.5f}".format(a_float) )`

您也可以使用 删除右侧的 0 `resulting_string.rstrip("0")`。同样，此方法**不会**恢复丢失的信息。

# php - 这是在 CodeIgniter 安装中使用保留名称的安全/标准方式吗？

> ID：15073846
> 
> 赞同：0
> 
> 时间：2013-02-25T18:30:07.733
> 
> 标签：php, codeigniter, codeigniter-routing

为简单起见，我真的希望用于添加和列出项目的 URL 看起来像：

```
inventory/list
inventory/new 
```

当然，list 和 new 在 PHP 中是保留的，所以我不能将它们用作 CodeIgniter 函数名。

我的解决方法是给我的函数起不同的名称，然后使用 CI 中的路由重定向到正确的函数。

我的第一个想法是添加下划线，以便`list_`和`add_`是函数名称。有没有更好的答案，或者这在某种程度上是不安全的，我没有看到？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T00:59:38.010

使用路由在内部将 url 映射到不同的函数名称。查看[CI 的路由文档](http://ellislab.com/codeigniter/user-guide/general/routing.html)。

# visio - 如何在 Visio 中绘制来自多个路径的重复步骤集？

> ID：15073847
> 
> 赞同：1
> 
> 时间：2013-02-25T18:30:14.357
> 
> 标签：visio

![在此处输入图像描述](../Images/2110f002e33b5173ebac6eca6409e6f9.png)

有没有合适的方法来绘制这个图表？我有两条不同的路径，但在过程中的某个时刻，第 1 步、第 2 步和第 3 步将完成。

此流程图可能非常大，步骤 1 到 3 将通过许多不同的路径运行。

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T16:58:14.343

我不知道是否有*适当的*方法来记录这一点，但通常如果您以相同的顺序重复相同的步骤，最好将其划分为子流程或预定义的流程。

我建议提出一个有意义的名称来描述步骤 1 - 3，然后用具有该名称的“预定义流程”形状替换图表中的这些步骤。

![在此处输入图像描述](../Images/3d495f85d4ca4fb262b3d6ad5bfccf50.png)

然后，您将创建一个补充表以包含您的预定义流程（或子流程）：

![在此处输入图像描述](../Images/678774836737ae1d78837abd039690f6.png)

你的初始工作表看起来像这样：

![在此处输入图像描述](../Images/1cc4563912a82bff3549162913b4e85e.png)

通过以这种方式简化您的图表，它也将使您的观众更容易理解。我希望这有帮助！

# internet-explorer - jQuery 表单发布跨域 Amazon S3 即 < 10，错误“中止”

> ID：15073850
> 
> 赞同：1
> 
> 时间：2013-02-25T18:30:20.277
> 
> 标签：internet-explorer, amazon-s3, cross-domain, jquery-forms-plugin, form-post

嗨，有谁知道如何在 IE 8、9 中将多部分表单跨域发布到 Amazon S3（例如）？

我们使用了 jQuery 表单插件。也许它不支持 XDomainRequest 对象？jQuery 表单是错误的方式吗？

我们已将 Amazon S3 存储桶配置为允许 origin * 用于发布、获取，因此可以在所有其他浏览器甚至 IE 10 中工作。

它开始发布。据我所知，它显示针对亚马逊网址的发布状态消息，该网址显示在浏览器的左侧。但随后它会触发状态为“已中止”的错误返回函数（在 ajax 选项中指定）。没有其他的。所以看起来请求被中止了。该文件永远不会到达亚马逊，如果错误来自亚马逊，我猜它会更详细一点。

我也尝试过从 https 发布（正如有人在某处建议的那样，因为亚马逊上传 url 使用 https）。没有不同。

有任何想法吗？

/约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T20:03:59.817

您的怀疑是正确的 - 您的插件将不支持 XDomainRequest，因为它基于 jQuery。

[jQuery 不包括对 XDR 的支持：](http://bugs.jquery.com/ticket/8283#comment:43)

> XDomainRequest 问题总结：
> 
> *   jQuery 不包括 XDomainRequest 支持，因为 XDR 存在许多严重的限制。

IE 版本 10[支持 CORS](https://en.wikipedia.org/wiki/Cross-origin_resource_sharing#Browser_support)，但以前的版本不支持并使用 XDR：

> MSHTML/Trident 6.0 (Internet Explorer 10) 具有原生支持。MSHTML/Trident 4.0 & 5.0 (Internet Explorer 8 & 9) 通过 XDomainRequest 对象提供部分支持。

* * *

您可以尝试[将此 jQuery 插件](https://github.com/Ovea/cors)添加到您的网站，看看它是否能解决您的问题。从自述文件：

> jQuery 插件，在浏览器之间透明地添加跨域资源共享 (CORS)，包括 IE8+

* * *

**编辑**：如果这不起作用，您可以添加尝试相同修改的[以下代码段：](http://graphicmaniacs.com/note/getting-a-cross-domain-json-with-jquery-in-internet-explorer-8-and-later/)

```
 if ('XDomainRequest' in window && window.XDomainRequest !== null) {

  // override default jQuery transport
  jQuery.ajaxSettings.xhr = function() {
      try { return new XDomainRequest(); }
      catch(e) { }
  };

  // also, override the support check
  jQuery.support.cors = true;

} 
```

# php - 需要一些关于在 div 中显示图像的建议

> ID：15073852
> 
> 赞同：0
> 
> 时间：2013-02-25T18:30:21.290
> 
> 标签：php, image, html, wysiwyg

我有一个所见即所得的编辑器，用于创建文章。然后将文章插入数据库。文章然后显示在主页上。它由 2 个主要的 div/部分组成。上半部分是一个固定高度的div，用于显示由所见即所得（即计划）为特定文章提交的图像。因此，用户（具有特权）编写文章，插入/上传图像（位于服务器上），文章被插入数据库以及图像的 url。

我的问题是我应该如何显示它？现在我正在考虑从数据库中提取所有必需的字段并将图像 url 放入 div 中，它将呈现为图像。这感觉真的很笨重，所以以我有限的经验，我想知道是否有更优雅的方式来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:32:23.827

您的意思是将图像路径存储在数据库中，然后在标签中回显它？

这没有什么问题...如果您想知道的话，比将图像存储在数据库中更好吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T18:38:02.843

你在正确的轨道上。从数据库中提取图像 URL，然后将其弹出到 div 内的 img 标签中，或者将其作为 div 本身的背景应用。

要调整图像大小以适合 div，请指定图像的高度或宽度。另一个将自动调整大小，保持适当的纵横比。这可能会导致它适合固定高度的 div 出现问题，因此您需要将 div 上的 CSS 溢出属性设置为隐藏，以便图像不会溢出到它之外。

# java - 使用 Swing 在窗格中选择文件

> ID：15073853
> 
> 赞同：2
> 
> 时间：2013-02-25T18:30:22.703
> 
> 标签：java, swing, awt, swingx

我正在 Swing 中编写一个 GUI，我想做一个位于主窗口中的文件选择器，如下图所示：

![在此处输入图像描述](../Images/a3e510caf7c43f2c8664b9c4afbb02de.png)

虽然似乎有很多关于如何编写弹出文件选择器的教程，但我没有看到太多关于如何在摇摆中完成这种类型的选择器的信息。

也很抱歉，如果以前有人问过这个问题，我做了很多搜索，但找不到其他任何东西..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T05:12:33.943

`PanelBrowser`，如下所示，是一个基本原型，其功能类似于您问题中所示的[Mac OS X Finder](http://en.wikipedia.org/wiki/Finder_%28software%29)列视图。

![面板浏览器](../Images/da7055ba9e49032c0a59673d3dab0d5a.png)

更新：添加了水平滚动和更多文件信息。

```
import java.awt.Color;
import java.awt.Component;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.GridLayout;
import java.io.File;
import java.text.DateFormat;
import java.util.ArrayList;
import java.util.Date;
import java.util.List;
import javax.swing.Box;
import javax.swing.BoxLayout;
import javax.swing.DefaultListCellRenderer;
import javax.swing.DefaultListModel;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JList;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.ListSelectionModel;
import javax.swing.event.ListSelectionEvent;
import javax.swing.event.ListSelectionListener;
import javax.swing.filechooser.FileSystemView;

/**
 * @see http://stackoverflow.com/a/15104660/230513
 */
public class PanelBrowser extends Box {

    private static final Dimension SIZE = new Dimension(200, 300);
    private List<FilePanel> list = new ArrayList<FilePanel>();

    public PanelBrowser(File root) {
        super(BoxLayout.LINE_AXIS);
        setBackground(Color.red);
        FilePanel panel = new FilePanel(this, root);
        list.add(panel);
        this.add(panel);
    }

    private void update(FilePanel fp, File file) {
        int index = list.indexOf(fp);
        int i = list.size() - 1;
        while (i > index) {
            list.remove(i);
            this.remove(i);
            i--;
        }
        final FilePanel panel = new FilePanel(this, file);
        list.add(panel);
        this.add(panel);
        revalidate();
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                scrollRectToVisible(panel.getBounds());
            }
        });
    }

    private static class FilePanel extends Box {

        private static FileSystemView fsv = FileSystemView.getFileSystemView();
        private static DateFormat df = DateFormat.getDateTimeInstance(
            DateFormat.SHORT, DateFormat.DEFAULT);
        private PanelBrowser parent;
        private JList list;

        public FilePanel(PanelBrowser parent, File file) {
            super(BoxLayout.PAGE_AXIS);
            this.parent = parent;
            DefaultListModel model = new DefaultListModel();
            if (file.isFile()) {
                JLabel name = new JLabel(file.getName());
                name.setIcon(fsv.getSystemIcon(file));
                this.add(name);
                Date d = new Date(file.lastModified());
                JLabel mod = new JLabel("Date: " + df.format(d));
                this.add(mod);
                final String v = String.valueOf(file.length());
                JLabel length = new JLabel("Size: " + v);
                this.add(length);
            }
            if (file.isDirectory()) {
                for (File f : file.listFiles()) {
                    model.addElement(f);
                }
                list = new JList(model);
                list.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
                list.setCellRenderer(new FileRenderer());
                list.addListSelectionListener(new SelectionHandler());
                this.add(new JScrollPane(list) {
                    @Override
                    public int getVerticalScrollBarPolicy() {
                        return JScrollPane.VERTICAL_SCROLLBAR_ALWAYS;
                    }
                });
            }
        }

        private static class FileRenderer extends DefaultListCellRenderer {

            @Override
            public Component getListCellRendererComponent(JList list, Object value,
                int index, boolean isSelected, boolean cellHasFocus) {
                JLabel label = (JLabel) super.getListCellRendererComponent(
                    list, value, index, isSelected, cellHasFocus);
                File f = (File) value;
                setText(f.getName());
                setIcon(fsv.getSystemIcon(f));
                return label;
            }
        }

        private class SelectionHandler implements ListSelectionListener {

            @Override
            public void valueChanged(ListSelectionEvent e) {
                if (!e.getValueIsAdjusting()) {
                    File f = (File) list.getSelectedValue();
                    parent.update(FilePanel.this, f);
                }
            }
        }

        @Override
        public Dimension getMinimumSize() {
            return new Dimension(SIZE);
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(SIZE);
        }

        @Override
        public Dimension getMaximumSize() {
            return new Dimension(SIZE.width, Short.MAX_VALUE);
        }
    }

    private static void display() {
        String path = System.getProperty("user.dir");
        PanelBrowser browser = new PanelBrowser(new File(path));
        JFrame f = new JFrame(path);
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(new JScrollPane(browser) {
            @Override
            public int getVerticalScrollBarPolicy() {
                return JScrollPane.VERTICAL_SCROLLBAR_NEVER;
            }
        });
        f.pack();
        f.setSize(4 * SIZE.width, SIZE.height);
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                display();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T18:34:14.390

[JFileChooser](http://docs.oracle.com/javase/7/docs/api/javax/swing/JFileChooser.html)实际上扩展了 JComponent，因此您可以像使用任何其他组件一样使用它。这是一个带有*两个*窗格内文件选择器的示例：

```
public class TestInPaneChoosers {
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                buildFrame();
            }
        });
    }

    private static void buildFrame() {
        JFrame f = new JFrame("Test");
        f.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);

        f.setLayout(new FlowLayout());

        f.add(new JFileChooser());
        f.add(new JFileChooser());

        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }
} 
```

# android - 使用唤醒锁的电池性能

> ID：15073854
> 
> 赞同：0
> 
> 时间：2013-02-25T18:30:24.927
> 
> 标签：android, wakelock, commonsware-cwac, powermanager

我的应用程序使用 commonsware 唤醒模式以频繁（5 分钟）的重复警报间隔唤醒设备。我知道经常唤醒这可能是我的问题的根源，但是当设备唤醒时所做的实际工作很少，而且代码执行得非常快。在某些设备（例如 Xperia T）上的某个版本的 android (4.1.2) 上，该应用程序在“设置”>“电池使用”列表中被列为高电池用户。但是，在我测试过的所有其他版本/设备中，即使我使用更激进的 1 分钟间隔，该应用程序也不会进入此列表！

4.1.2 中的电池统计信息是否存在已知错误？我找不到任何相关的错误报告。通过查看源代码，我可以看到唤醒锁在[此处被释放，但电池统计信息在](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.2_r1/com/android/server/PowerManagerService.java#1052)[此处](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.2_r1/com/android/server/PowerManagerService.java#1058)唤醒锁之外得到更新。这是一个错误吗？

[PowerManagerService 的当前代码](https://github.com/android/platform_frameworks_base/commit/9630704ed3b265f008a8f64ec60a33cf9dcd3345#services/java/com/android/server/power/PowerManagerService.java)似乎有很大的变化，但只是想知道这个错误是否已修复？

还有其他人遇到这种情况吗？关于在唤醒锁释放后如何戳系统以更新其电池统计数据的任何想法？

多姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T20:48:54.540

电池使用量指标或多或少是操作系统的有根据的猜测。它们并不是特别准确，几乎没有你相信的输出那么准确。

您可以使用`adb shell dumpsys power`来确认在`WakeLock`为您提供此报告的设备上按预期发布。

# magento - 使用 Magento 创建捆绑产品

> ID：15073857
> 
> 赞同：1
> 
> 时间：2013-02-25T18:30:35.237
> 
> 标签：magento, magento-1.7

我一直在关注这个例子：[Magento programmaticaly create bundle Product](https://stackoverflow.com/questions/13584034/magento-programmaticaly-create-bundle-product)

并且当我创建新产品时代码正在工作，但是，当我加载捆绑或简单的产品时，我无法让它工作。[编辑] 我可以通过下面的代码加载我以编程方式创建的捆绑产品并将产品添加到捆绑包中。我通过 GUI 创建的捆绑产品也无法添加产品。

知道如何加载产品然后将其与另一个产品捆绑在一起吗？

这是我当前的代码：

```
 $items = array();
$items[] = array(
    'title'     => 'Bundle Option',
    'option_id' => '',
    'delete'    => '',
    'type'      => 'radio',
    'required'  => 1,
    'position'  => 0,
);

$selectionRawData = array();
$selectionRawData[0] = array();
$selectionRawData[0][] = array(
    'selection_id'             => '',
    'option_id'                => '',
    'product_id'               => 3,
    'delete'                   => '',
    'selection_price_value'    => 0,
    'selection_price_type'     => 0,
    'selection_qty'            => 1,
    'selection_can_change_qty' => 0,
    'position'                 => 0,
    'is_default'               => 1,
);

$selections = $selectionRawData;

$websiteIDs = array(1);
$cats = array(4);

Mage::app()->setCurrentStore(Mage_Core_Model_App::ADMIN_STORE_ID);

// load product
// NOT WORKING
$product = Mage::getModel('catalog/product');
$product->load(127);

// new product
/******
 * THIS WORKS

$p = array(
            'sku_type' => 1,
            'sku' => '123321',
            'name' => "BarProduct",
            'description' => 'Foo',
            'short_description' => 'Bar',
            'type_id' => 'bundle',
            'attribute_set_id' => 4,
            'weight_type' => 0,
            'visibility' => 4,
            'price_type' => 1,
            'price_view' => 0,
            'price' => 1.99,
            'has_options' => 1,
            'required_options' => 1,
            'status' => 1,
            'created_at' => strtotime('now'),
            'category_ids' => $cats,
            'store_id' => 0,
            'website_ids' => $websiteIDs,
            'weight' => 0,
            'weight_type' => 1,
            'delivery_time' => '',
            'generate_meta' => 1,
            'tax_class_id' => 1, //19%
    );
    $product->setData($p);

*****/ 

Mage::register('product', $product);
Mage::register('current_product', $product);

$product->setCanSaveConfigurableAttributes(false);
$product->setCanSaveCustomOptions(true);

$product->setBundleOptionsData($items);
$product->setBundleSelectionsData($selections);
$product->setCanSaveCustomOptions(true);
$product->setCanSaveBundleSelections(true);
$product->setAffectBundleProductSelections(true);

$product->save();

$result['product_name'] = $product->getId();
return $result; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T13:10:59.660

这对于捆绑产品很重要：

```
$product->setData("price_type", 0); 
```

在保存之前，您必须将此属性设置为 0（动态价格）。当然，重新索引是必要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T23:35:58.720

我的产品索引上有一些时髦的东西。我删除了我所有的产品并修复了我的索引，这现在可以工作了，尽管效果不佳。

所以这是我从这个过程中收集到的：

如果您想获取两个简单产品并捆绑它们，您需要通过`$p = array`上面的代码创建一个新的捆绑捆绑产品，然后添加两个简单产品。

否则，您将需要通过 magento gui 预制的捆绑产品。然后您将使用 $product->load(product_id) 命令调出该产品，然后将您的简单产品添加到其中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T10:05:49.740

只需删除所有不需要的选项，如下所示：

```
$optionsselectionsmap = array();
        $options = Mage::getModel("bundle/option")->getCollection()->setProductIdFilter($product->getId());
        foreach($options as $option){
            $selection = Mage::getModel("bundle/selection")->getCollection()->setOptionIdsFilter($option->getId())->getFirstItem();
            $tmp = array();
            $tmp['option_id'] = $option->getId();
            $tmp['selection_id'] = $selection->getData('selection_id');
            $optionsselectionsmap[$selection->getData('sku')] = $tmp;
        }

$deleteoptionids = array();
        foreach($optionsselectionsmap as $k=>$v) $deleteoptionids[] = $v['option_id'];
        foreach($product->getTypeInstance(true)->getOptionsCollection($product) as $deleteitem){
            $deleteitem = $deleteitem->getData();
            $deleteitem['delete'] = 1;
            $bundleOptions[] = $deleteitem;
        } 
```

# javascript - 如何区分代码中的 javascript 和客户端的

> ID：15073868
> 
> 赞同：1
> 
> 时间：2013-02-25T18:30:57.157
> 
> 标签：javascript, client-side

我知道 javascript 是一种客户端语言，但如果嵌入在实际代码中的 javascript 代码可能与控制台上运行的不同，我正在尝试寻找答案。让我用一个例子来解释它：

我想创建一个像 MixPanel 一样的分析工具。MixPanel 使用 javascript 函数进行所有跟踪`mixpanel.track("string etc")`。假设我有一个名为不知何故.com 的网站。在不知何故.com 的代码中，我经常使用`mixpanel.track("")`函数来通过 mixpanel 跟踪我的页面。但是，当我在浏览器中打开不知何故.com 并键入时打开控制台（比如说从 Chrome）`mixpanel.track("whatssup")`，这个跟踪也将是有效的，并且 mixpanel 也会跟踪这个。这对我的情况是不可接受的，但我非常想使用 javascript，因为如果使用 javascript，则不需要其他库。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T18:40:55.070

客户端代码不安全，您无法控制它的修改或运行方式。它是客户端的，客户端可以做任何它喜欢的事情（使用熟练的黑客）。安全或防止滥用总是必须在服务器端完成。

为了让我们提供更多帮助，您必须更多地描述您真正想要保护的内容。

# netbeans - 尝试编译 JVisualVM 时构建失败

> ID：15073870
> 
> 赞同：2
> 
> 时间：2013-02-25T18:31:08.450
> 
> 标签：netbeans, ant, jvisualvm

在尝试构建 JVisualVM 时，我一直按照[http://visualvm.java.net/build/build.html上显示的说明进行操作。](http://visualvm.java.net/build/build.html)

我检查了我的硬盘驱动器的主干，我已经下载了[http://java.net/projects/visualvm/downloads/download/dev/nb73_visualvm_14012013.zip](http://java.net/projects/visualvm/downloads/download/dev/nb73_visualvm_14012013.zip)并将其内容提取到`visualvm/`目录中，如下所示：

要构建 visualvm 核心工具，您需要此处提供的 NetBeans 7.3 平台和分析器二进制文件。这些二进制文件必须解压到 trunk/visualvm 目录中。您可以使用 ant run 或 ant build-zip 来构建或运行 VisualVM。

执行时`ant run`我得到一个：

```
compile:
    [mkdir] Created dir: C:\Users\user\Desktop\jvisualvm\visualvm\applicationviews\build\classes
 [nb-javac] Compiling 19 source files to C:\Users\user\Desktop\jvisualvm\visualvm\applicationviews\build\classes
 [nb-javac] warning: [options] bootstrap class path not set in conjunction with -source 1.5
 [nb-javac] C:\Users\user\Desktop\jvisualvm\visualvm\applicationviews\src\com\sun\tools\visualvm\application\views\threads\ThreadMXBeanDataManager.java:117: e
rror: cannot find symbol
 [nb-javac]             super(dummyLong, CommonConstants.SERVER_RUNNING, CommonConstants.SERVER_PROGRESS_INDETERMINATE);
 [nb-javac]                                             ^
 [nb-javac]   symbol:   variable SERVER_RUNNING
 [nb-javac]   location: interface CommonConstants
 [nb-javac] C:\Users\user\Desktop\jvisualvm\visualvm\applicationviews\src\com\sun\tools\visualvm\application\views\threads\ThreadMXBeanDataManager.java:117: e
rror: cannot find symbol
 [nb-javac]             super(dummyLong, CommonConstants.SERVER_RUNNING, CommonConstants.SERVER_PROGRESS_INDETERMINATE);
 [nb-javac]                                                                             ^
 [nb-javac]   symbol:   variable SERVER_PROGRESS_INDETERMINATE
 [nb-javac]   location: interface CommonConstants
 [nb-javac] Note: Some input files use unchecked or unsafe operations.
 [nb-javac] Note: Recompile with -Xlint:unchecked for details.
 [nb-javac] 2 errors
 [nb-javac] 1 warning 
```

我什至安装了 Netbeans 7.3，但这似乎有点帮助！

我对这些事情很陌生，我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T19:30:27.003

你提到你“对这些事情很陌生”，所以我可以问一下你是否有理由要建造主干，具体来说？大多数时候，使用 SVN 进行源代码控制时的工作流程包括在[/tags](http://java.net/projects/visualvm/sources/svn/show/tags)下标记发布。标记的版本通常已经过测试，并且满足了被认为适合发布的最低测试标准，因此您可能会更轻松地构建其中一个标签。

为自己构建 /trunk 并没有什么问题，但它应该被视为“不稳定/正在进行中”的构建，所以你应该预料到会遇到问题。

[您可能已经知道， VisualVM 站点](http://visualvm.java.net/download.html)上有可供下载的预编译二进制文件。如果没有列出你的操作系统的二进制文件，你可能可以用你的包管理器找到它（例如`sudo apt-get install visualvm`在 Ubuntu 上）。

* * *

就是说，如果您愿意，请不要让我阻止您尝试：

在这种情况下，编译器告诉您它在类`SERVER_RUNNING`中找不到符号。这些在课程的第 117 行被引用。如果你看一下那个类，你会看到这个声明，它告诉我们 CommonConstants 来自 NetBeans。如果我们检查[ThreadMXBeanDataManager 类的 SVN 提交历史记录](http://java.net/projects/visualvm/sources/svn/revision/3185)，我们可以看到开发人员所做的更改旨在使 VisualVM 与 NetBeans 7.3 兼容。所以，有几种可能：`SERVER_PROGRESS_INDETERMINATE``CommonConstants`[`ThreadMXBeanDataManager`](http://java.net/projects/visualvm/sources/svn/content/trunk/visualvm/applicationviews/src/com/sun/tools/visualvm/application/views/threads/ThreadMXBeanDataManager.java?rev=3192)`import org.netbeans.lib.profiler.global.CommonConstants`

1.  开发人员错了，实际上是在使用其他版本的 NetBeans（可能是预发行版等）进行编译。如果您发现是这种情况，您应该提交一份错误报告（如果可能，还需要一份补丁）。
2.  您正在尝试针对错误版本的 NetBeans 进行编译。
3.  类路径/构建脚本有问题。

让我们检查#2 和#3。我们可以获取您链接到的二进制文件，并使用[JFind](http://jfind.sourceforge.net/)或类似实用程序（或通过谷歌搜索等）找出 CommonConstants 类所在的 jar： ![罐子的位置](../Images/4cfa8620add00bcbcffaacc88115250d.png)

我们看到这个类存在于两个地方，所以接下来要做的是检查两个类文件并确保它们具有常量。使用解压缩实用程序（例如[7-zip](http://www.7-zip.org/)）来展开 jar 文件并使用反编译器（我喜欢[JD-GUI](http://java.decompiler.free.fr/?q=jdgui)）来验证该类是否具有常量： ![反编译器](../Images/df8d05c0b40f22970480e08d717a23d1.png)

您链接到的版本在我的机器上似乎没问题，所以不幸的是现在您必须进一步调查。执行编译的 Ant 脚本中的类路径中是否有这两个 jar 中的一个或两个？您是否通过环境变量在类路径中有不同版本的 jar？这里有很多可能性，所以你必须做一些调查。如果所有这些看起来都需要大量工作，那么我建议您使用其中一个预编译的二进制文件或切换到标签构建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T09:52:22.803

看起来您正在针对 NetBeans 7.2 编译它。在尝试编译之前，您是否在 NetBeans 中打开了 VisualVM 项目？如果是这样，请检查为 NetBeans 中的顶级 VisualVM 项目设置了哪个 NetBeans 平台。您应该从 nb73_visualvm_14012013.zip 针对 NetBeans 平台编译 VisualVM。要检查您的安装是否正确，请尝试以下操作：

1.  如果您在 NetBeans 中打开了 VisualVM，请关闭 NetBeans
2.  在 VisualVM 源代码树中找到所有 trunk/visualvm/*/nbproject/private 目录并删除私有目录。
3.  `ant run`从命令行使用

如果可行，请打开 NetBeans，将 trunk/visualvm/netbeans 注册为 NetBeans 平台，并将其设置为 VisualVM 顶级项目的平台。

# php - 如何在 Zend Framework 2 中使用插件呈现自定义视图

> ID：15073871
> 
> 赞同：5
> 
> 时间：2013-02-25T18:31:08.597
> 
> 标签：php, model-view-controller, zend-framework2

我正在开发一个需要在流程完成后发送电子邮件的应用程序。由于电子邮件需要是 HTML，我有一个聪明的想法，就是将视图呈现为电子邮件正文，这样我就可以实现“单击此处在浏览器上查看”功能。这一切都在实现 AbstractRestfulController 的控制器内部进行，因此视图本身驻留在我的前端模块中，以便可以通过浏览器从 URL 访问它。但是我得到了一个

> 未提供 RouteStackInterface 实例

当我尝试渲染视图时出错。

这是我的代码：

```
use Zend\View\HelperPluginManager;
use Zend\View\Resolver;
use Zend\View\Renderer\PhpRenderer;

//Instantiate the renderer
$renderer = new PhpRenderer();
$resolver = new Resolver\TemplateMapResolver(array(
            'layout' => realpath(__DIR__ . '/../../../../Application/view/layout/email.layout.phtml'),
            'email/view' => realpath(__DIR__ . '/../../../../Application/view/application/email/view.phtml')
        )
    );
$renderer->setResolver($resolver);
$renderer->url()->setRouter($this->getEvent()->getRouter()); 
```

我在 API 文档中看到，您可以通过给它一个 RouteStackInterface 来将路由器设置为 URL 插件，因此是最后一行。但是，这似乎也不起作用。

我想使用相同的视图发送一封 HTML 电子邮件，其中包含邮件正文中的链接并通过 URL 显示在浏览器上。

关于如何做到这一点的任何想法/建议？

**编辑/解决方案：**

根据下面dotwired的回答，从服务管理器获取渲染器实例会导致插件被正确实例化。所以这是有效的代码：

模块.config.php：

```
array('view_manager' => array(
            'template_map' => array(
                    'layout/email'            => __DIR__ . '/../../Application/view/layout/email.layout.phtml',
                    'email/share'             => __DIR__ . '/../../Application/view/application/email/share.phtml',
                    'email/view'              => __DIR__ . '/../../Application/view/application/email/view.phtml',
            ),
    ),
); 
```

休息控制器：

```
use Zend\View\Model\ViewModel;

//get the renderer
    $renderer = $this->getServiceLocator()->get('Zend\View\Renderer\RendererInterface');

    //Create the views
    $shareView = new ViewModel(array('data' => $data));
    $shareView->setTemplate('email/view');
    $emailLayout = new ViewModel(array('subject' => $this->_subject, 'content' => $renderer->render($shareView)));
    $emailLayout->setTemplate('layout/email');

    //Render the message
    $markup = $renderer->render($emailLayout); 
```

使用服务管理器中的渲染器，$this->url() 视图助手可以正常工作。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-25T19:55:55.327

只需使用模块的 module.config.php 来指定您的电子邮件模板，例如：

```
'view_manager' => array(
    'template_path_stack' => array(
        'user' => __DIR__ . '/../view'
    ),
    'template_map' => array(
        'email/view' => __DIR__ . '/../view/application/email/view.phtml'
    )
), 
```

之后，您可以继续阅读[这部分](http://framework.zend.com/manual/2.0/en/modules/zend.mail.message.html)文档。然后，您可以将视图模板从渲染器传递到 MimePart，MimeMessage 将使用它，例如

```
$viewModel = new \Zend\View\Model\ViewModel();
$viewModel->setTemplate('email/view');

$renderer = $this->serviceLocator->get('Zend\View\Renderer\RendererInterface');
$htmlPart = new \Zend\Mime\Part($renderer->render($viewModel)); 
```

# javascript - 在 Windows 应用商店应用程序中使用 javascript 类

> ID：15073873
> 
> 赞同：0
> 
> 时间：2013-02-25T18:31:19.050
> 
> 标签：javascript, windows-store-apps, winjs

我有以下类定义：

```
var gameEngine = WinJS.Namespace.define("GameEngine", {    

interaction: WinJS.Class.define(
    function() {},
    {
        destination: 0,
        currentXPos: 0,
        handleTouch: function handleTouch(event) {
            this.destination = event.x;
            console.log("New destination: " + this.destination);
        }
    }
),
... 
```

我正在尝试在`handleTouch`这里使用该功能：

```
WinJS.Namespace.define("drawScreen", {

DrawScreen: WinJS.Class.define(function DrawScreen() {
    canvas.addEventListener("MSPointerUp", gameEngine.interaction.handleTouch, false);

... 
```

问题似乎`gameEngine.interaction.handleTouch`是未定义的。显然，我没有`interaction`正确声明或调用该类-但是查看[此处](http://msdn.microsoft.com/en-gb/library/windows/apps/br229813.aspx)的文档，我看不出我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:53:22.513

第一个参数`WinJS.Class.define(`是构造函数，而第二个是成员属性和函数。试试这个：

```
interaction: WinJS.Class.define(
    function() {},
    {
        // initialize your class here
    }, 
    {
        destination: 0,
        currentXPos: 0,
        handleTouch: function handleTouch(event) {
            this.destination = event.x;
            console.log("New destination: " + this.destination);
        }
    }
),
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T18:55:15.350

由于您已`gameEngine.interaction`在实例声明中定义为具有成员的类，因此您需要首先实例化它的实例。因此，您需要执行以下操作：

```
var gameInteraction = new gameEngine.interaction();
canvas.addEventListener("MSPointerUp", gameInteraction.handleTouch, false); 
```

如果您`interaction`直接在命名空间内而不是在类中定义所有类成员，则不需要实例化它。另一种选择是直接在您的命名空间中实例化该类，例如：

```
var gameEngine = WinJS.Namespace.define("GameEngine", {    

interaction: new WinJS.Class.define(
... 
```

# maven - 在 IntelliJ 中使用 maven 的 --also-make 选项

> ID：15073877
> 
> 赞同：2
> 
> 时间：2013-02-25T18:31:36.760
> 
> 标签：maven, intellij-idea

您可以在 IntelliJ 中的 Maven 构建中设置多个属性和配置选项，但我还没有完全确定您是否能够指定命令行上可用的选项，例如 --also-make 或 --also-make-家属。

有没有办法让 Maven 使用的这些选项在 Intellij 中运行配置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T09:31:09.397

您可以通过右键单击`Maven Projects`视图中的任何目标来创建运行/调试配置，选择`Create your-project[your-goal]`并从那里添加任何命令行参数（例如`--also-make`）。您的配置将被保存并通过单击绿色箭头进行访问:)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-11-16T08:56:49.527

您可以将命令行选项设置为始终应用`--also-make`的[每个项目`.mvn/maven.config`文件。](https://maven.apache.org/configure.html)

结合 IntelliJ 的“将[IDE 构建/运行操作委托给 Maven”](https://www.jetbrains.com/help/idea/delegate-build-and-run-actions-to-maven.html)选项（这在目前导入 Maven 项目时似乎是默认设置），可以在 IDE 的主要按钮和菜单项正常工作的情况下构建和运行。解决模块间依赖关系或[失败 Enforcer 不再失败](https://maven.apache.org/enforcer/enforcer-rules/reactorModuleConvergence.html)。

总是包含可能会有不良的副作用，`--also-make`但到目前为止我还没有遇到过——在使用 Reactor 的多模块项目中，这种方式几乎总是我想要的，因此它也节省了在 CLI 上的输入。

*旁注*：我仍然发现@Bastien Jansen 的答案对于调用其他类似运行的 Maven 目标很有用，例如`spring-boot:run`IDEA 社区版，它没有 Ultimate 对 Spring Boot 应用程序的更一流的支持。

# c# - 将数据写入 excel 单元格会擦除我不触摸的现有单元格

> ID：15073884
> 
> 赞同：0
> 
> 时间：2013-02-25T18:31:57.680
> 
> 标签：c#, excel, excel-interop

我的应用程序从 9 列的 excel 文件中读取数据，执行一些工作，如果满足某些条件，则将数据写入当前行的第 9 列。这部分工作正常。问题是我没有写的所有内容都会被删除，甚至文件中的其他工作表也是如此。

这是我的代码中唯一写入文件的部分。

```
using Microsoft.Office.Interop.Excel;[...]

 Dictionary<int, string> newlines = new Dictionary<int, string>();
 //excel reader reads the file, iterates the rows,
 //check up the conditions, add pairs to newlines when needed  

 m_excelWriter = new ExcelWriter();    
 m_excelWriter.Open(FilePath);

 foreach (var item in newlines)
 {
    m_excelWriter.WriteLine(item.Value, item.Key);
 }
 m_excelWriter.Close();

public void WriteLine(string Value, int RowNumber)
{
   m_Worksheet.Cells[RowNumber, 8] = Value;
   //both ways have the problem
   //((Range)m_Worksheet.Cells[RowNumber, 8]).Value2 = Value;
} 
```

这里是内文。不过这部分不是我写的。

**编辑：在为您发布此内容后看起来我无法阅读** ，我意识到（非常明显的）问题

```
 public void Open(string FilePath)
    {
        // Open Excel :
        Process[] ExcelProcessesBefore = Process.GetProcessesByName("EXCEL");
        this.m_Application = new Microsoft.Office.Interop.Excel.Application();
        Process[] ExcelProcessesAfter = Process.GetProcessesByName("EXCEL");
        this.m_ProcessId = this.GetProcessId(ExcelProcessesBefore, ExcelProcessesAfter);
        this.m_Application.DisplayAlerts = false;

        // Open the worksheet :
        this.m_Workbook = this.m_Application.Workbooks.Add(Type.Missing);
        this.m_Workbook.SaveAs(FilePath, Type.Missing, Type.Missing, Type.Missing, Type.Missing,
                               Type.Missing, XlSaveAsAccessMode.xlNoChange, Type.Missing,
                               Type.Missing, Type.Missing, Type.Missing);

         m_Worksheet = (_Worksheet)m_Workbook.Worksheets[0];

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:55:54.107

我倾向于发现像这样直接分配单元格值并不像使用内置功能来设置值那样有效。

在我的代码中，我使用这一行来设置单元格值

```
using Excel = Microsoft.Office.Interop.Excel;

((Excel.Range)xlWorksheet.Cells[row, ccol]).Value2 = cellVal; 
```

将单元格重新转换为范围，然后设置范围`Value2`设置。我不知道这是否会解决您遇到的问题。

# sql-server - TSQL 查询来合并来自多个表的数据，这些表可能有也可能没有匹配的行？

> ID：15073887
> 
> 赞同：1
> 
> 时间：2013-02-25T18:32:18.713
> 
> 标签：sql-server, tsql, outer-join

例如，假设我们正在进行一项研究，学生最多可以参加 10 项不同的测试，并且数据库中的每个表都存储了所有学生对一项测试的回答。这些表在每个测试后命名为：T1、T2、...、T10。假设每个表都有一个标识每个学生的主键列“用户名”。学生可能完成了每项测试，也可能没有完成，因此每个学生的每个表中可能有也可能没有记录。

**从所有表中返回所有测试数据的正确 SQL 查询是什么，每个学生一行（每个用户名一行）？我想要返回正确结果的最简单的查询。我还想在最终查询中将用户名字段合并为单个用户名字段。**

澄清一下，我知道 SQL 有一个主要限制，因为它不支持选择所有列的语法，*除了*一个或多个字段，如“select *[^ExcludeColumn1][^ExcludeColumn2]”。为了避免在最终查询中专门命名所有列，可以将所有用户名列保留在那里，只要它在开头包含一个名为 RowID 的合并用户名字段。

至于整体查询，一个选项是对所有十个表的用户名列执行联合，然后在所有表中选择不同的用户名，然后对所有 10 个表上的不同用户名列表执行一系列左连接. 这将导致一个非常简单的查询，其中每个左连接都在同一组不同的用户名上执行，但我想避免对不同的用户名进行单独的预先查询。（尽管如果这是最好的选择，请告诉我）。它看起来像这样：

```
select * from
(select distinct coalesce(t1.Username,t2.Username,...,t10.Username) as RowID from t1,t2,t3,t4,t5,t6,t7,t8,t9,t10) distinct_usernames
left join t1 on t1.Username =  distinct_usernames.RowID
left join t2 on t2.Username =  distinct_usernames.RowID
...
left join t10 on t10.Username =  distinct_usernames.RowID 
```

尽管这很短且易于编写，但它的效率非常低，并且需要花费数小时才能在每个包含 5000 多行的测试表上运行，因此经过调整，在几秒钟内运行的等效版本是：

```
select * from (
select distinct Username as RowID from (
select Username from t1
union all
select Username from t2
union all
...
select Username from t10
) all_usernames) distinct_usernames
left join t1 on t1.Username = distinct_usernames.RowID
left join t2 on t2.Username = distinct_usernames.RowID
...
left join t10 on t10.Username = distinct_usernames.RowID 
```

我认为我上面的查询可能是最有效和最正确的查询（只需几秒钟即可运行并返回正确的结果集），但我也认为也许可以通过某种完全连接来简化它。问题是完全连接会与两个以上的表混淆，因为如果没有预先确定用户名，每个后续表都必须将记录与前面的*任何*表进行匹配，导致查询中每个附加表都有“[previous table count] + 1" 匹配用户名的条件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T20:21:35.590

假设这`Username`在每个表中都是唯一的，那么您的第二个查询将是我首先尝试的方式，只需对删除`distinct`和简单地使用`union`（这意味着不同）而不是进行轻微修改`union all`：

```
select *
from (
        select Username from t1
        union
        select Username from t2
        union
        -- ...
        select Username from t10
    ) distinct_usernames
    left join t1 on t1.Username = distinct_usernames.Username
    left join t2 on t2.Username = distinct_usernames.Username
    -- ...
    left join t10 on t10.Username = distinct_usernames.Username 
```

从那里我会确保 Username 被索引，甚至可能将它用作[clustered index](https://stackoverflow.com/questions/11787797/should-every-user-table-have-a-clustered-index)。过去，我通过`distinct_usernames`在 proc 开始时将您的临时表（可能是索引或索引视图）实现为优化运气，但只有测试才能确定这是否值得。

完整的外部连接需要一堆`or`条件或`coalesce`参数，尽管它可能值得在几个表上尝试一下，看看性能是否存在。我无法猜测您的查询引擎最喜欢什么。

`sys.columns`此外，可以通过查询或`information_schema.columns`使用[动态 SQL](http://www.sommarskog.se/dynamic_sql.html)将查询构建为字符串然后执行它来获取您想要的列名。

# c# - 如何在 asp.net 中获得选定的单选按钮列表？

> ID：15073888
> 
> 赞同：0
> 
> 时间：2013-02-25T18:32:22.527
> 
> 标签：c#, asp.net

我将以下代码用于默认值为 yes 的单选按钮列表。

```
 <asp:RadioButtonList ID="RadioButtonList1" runat="server" onselectedindexchanged="radiobtnlist_SelectedIndexChanged">
    <asp:ListItem Selected="True">YES</asp:ListItem>
    <asp:ListItem>NO</asp:ListItem>
 </asp:RadioButtonList> 
```

每次更改 radiobtnlist 的值时都会触发一个事件。我正在使用以下 c# 代码更改所选索引

```
protected void radiobtnlist_SelectedIndexChanged(object sender, EventArgs e)
{
    //do work
} 
```

问题是，当 radiobtnlist 值设置为 No 并且选择未更改但会触发 selectedindex 更改事件，并且当 radiobtnlist 设置为 Yes 时，不会触发 selectedindex 更改事件。

我必须在回发之前每次都找到radiobtnlist的选择，如果它的值被更改，那么将数据保存在db中，但是如何在ListItem上找到具有默认值的radiobtnlist的选定值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:56:57.430

我想我明白你在说什么。

默认答案是“是”，这意味着当用户想要选择“是”时，它已经被选中，因此他们不理会它。因为 RadioList 值是单独存在的，所以不会触发任何事件。

根据您提供的代码，我可以看到没有设置“AutoPostBack”。如果是这种情况，那么我假设您正在通过提交按钮触发回发。

如果您通过提交按钮触发回发，那么您可以将您的逻辑放在那里。这样每次都会触发。例如：

```
protected void submit_click(object sender, EventArgs e) 
{
    var answerIsYes = (radiobtnlist.SelectedIndex == 0);
    //store value to DB
} 
```

您没有指定您的表单是否将用于编辑现有数据。如果是，那么在每次回发时将 RadioList 的值存储回数据库将效率不高。您需要考虑如何更改它，以便它仅在值更改时存储该值。

# python - 自定义 Python 包无法通过 VirtualEnv 中的 Pip 正确安装

> ID：15073892
> 
> 赞同：2
> 
> 时间：2013-02-25T18:32:30.920
> 
> 标签：python, package, pip, setup.py

我为我正在处理的项目创建了一个新的 python 包。

它的文件夹结构类似于：

```
bin
docs
mypackage
license.md
readme.md
setup.py 
```

以下是我的 setup.py 的内容：

```
try:
    from setuptools import setup
except ImportError:
    from distutils.core import setup

config = {
    'description': 'A python client for foo',
    'author': 'Me',
    'url': 'https://github.com/account/mypackage',
    'download_url': 'https://github.com/account/mypackage',
    'author_email': 'foo@bar.com',
    'version': '0.1',
    'install_requires': ['nose'],
    'name': 'MyPackage'
}

setup(**config) 
```

我还没准备好公开这个，所以我直接从 Git 安装它：

```
pip install git+ssh://git@github.com/account/mypackage.git 
```

这是输出：

```
Downloading/unpacking git+ssh://git@github.com/account/mypackage.git
  Cloning git+ssh://git@github.com/account/mypackage.git to /var/folders/7w/qsdf76s97sfsdf7sdf97sdf/T/pip-ovbMpR-build
  Running setup.py egg_info for package from git+ssh://git@github.com/account/mypackage.git

Downloading/unpacking nose (from MyPackage==0.1)
  Downloading nose-1.2.1.tar.gz (400kB): 400kB downloaded
  Running setup.py egg_info for package nose

    no previously-included directories found matching 'doc/.build'
Installing collected packages: nose, MyPackage
  Running setup.py install for nose

    no previously-included directories found matching 'doc/.build'
    Installing nosetests script to /Users/user/sandbox/.pyvirtualenvs/project/bin
    Installing nosetests-2.7 script to /Users/user/sandbox/.pyvirtualenvs/project/bin
  Running setup.py install for MyPackage

Successfully installed nose MyPackage
Cleaning up... 
```

它说它安装正确，但是当我检查 /Users/user/sandbox/.pyvirtualenvs/project/bin - 我没有看到我的 MyPackage。

我看到鼻子安装正确，它创建了一个 MyPackage-0.1-py2.7.egg-info/ 目录 - 但我的库中没有 mypackage 文件夹。

因此，当我尝试使用该包时，找不到它。

为什么？我的 setup.py 配置不正确吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T18:47:50.723

看起来您实际上并没有指示安装程序安装您的软件包。

你需要类似的东西：

```
packages=['mypackage'], 
```

在您的`setup()`通话中。查看它是怎么`py-bootstrap`做的：[https ://github.com/splaice/py-bootstrap/blob/master/setup.py](https://github.com/splaice/py-bootstrap/blob/master/setup.py)

要包含`bin`脚本，您还需要使用`scripts`指令列出您的脚本，例如：

```
scripts=['bin/myscript'] 
```

# url - 将旧网址的链接更改为新网址？

> ID：15073898
> 
> 赞同：1
> 
> 时间：2013-02-25T18:32:53.927
> 
> 标签：url, web

我已经更改了我的域名，我真的不想麻烦地将我在我网站上的文章中发布的所有链接都设置为域名。有没有我可以用来制作所有指向旧域更改的链接的代码。

例如，如果我有一个链接是 oldurl.com/faq，我希望它更改为 newurl.com/faq

但无需手动重写，因此它适用于我网站上以 oldurl.com 开头的所有链接

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:38:02.577

您可以将旧域的 DNS 指向新域，并在 Web 服务器中放置重定向规则以重写到正确的域。

这可能是您无论如何都应该做的事情，以便将您无法控制的任何外部链接指向正确的新位置。

但是，这不能替代修复您的实际链接。你也应该修复这些。事实上，最好不要在内部站点链接中包含完整的 URL，而是只使用此类链接的 URI 或相对路径。

大多数优秀的 IDE 都会让您能够搜索和替换站点中的所有文件，因此这样做不会太痛苦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T18:39:53.453

这是快速而懒惰的方法。

```
$(function(){
    $('a').attr('href', function(x, url){
        return url.replace('oldurl.com', 'newurl.com');
    });
}); 
```

# ajax - Ajax 函数收集 geoJSON FeatureCollection，然后将弹出窗口输出到传单地图层

> ID：15073899
> 
> 赞同：1
> 
> 时间：2013-02-25T18:32:55.867
> 
> 标签：ajax, maps, leaflet, geojson

我正在尝试创建一个 ajax 函数，在该函数中我使用表单将 bbox 值传递给 PHP 脚本，然后使用 bbox 参数将 FeatureCollection 输出回 ajax 回调。

从这里我使用 JSON.parse() ，然后尝试将每个特征的描述部分显示为对应点上的弹出窗口。

我花了无数个小时试图找出我的代码出了什么问题，但我似乎无法解决。

这是我的表单 HTML：

```
<select name="bbox" id="bbox" onchange="ajaxrequest()">
  <option name="Select" value="Select">Please Select</option>
  <option name="Hampshire" value="-1.40,50,-1.39,51&format=geojson">Hampshire</option>
</select> 
```

这是我的 AJAX 函数：

```
function ajaxrequest()
{
    var bbox = document.getElementById("bbox").value;
    //alert(bbox);
    var request = new Ajax().sendRequest
        ('points.php',
            { method: 'GET',
              parameters: 'bbox=' + bbox,
              callback: resultsReturned }
        );
} 
```

这是 AJAX 回调，其中包含响应文本中的特征集合 geoJSON：

```
function resultsReturned (xmlHTTP)
{
    //alert(xmlHTTP.responseText);
    var geojson = JSON.parse(xmlHTTP.responseText);

    for(var i=0; i<geojson.features.length; i++)
    {
        var layer = new L.geojson();
        layer.addData(geojson.features[i]);
    }
} 
```

如果有人能告诉我如何完成这件事，我将不胜感激，因为它正在杀死我。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T23:18:15.973

我想你正在寻找这个：

```
function resultsReturned (xmlHTTP)
{
    var features = JSON.parse(xmlHTTP.responseText);
    L.geoJson(features).addTo(map);
} 
```

（见[http://leafletjs.com/examples/geojson.html](http://leafletjs.com/examples/geojson.html)）

如果要将弹出窗口绑定到每个功能：

```
function resultsReturned (xmlHTTP)
{
    var features = JSON.parse(xmlHTTP.responseText);
    L.geoJson(features, 
        { onEachFeature: 
              function(feature,layer) {
                  layer.bindPopup(feature.properties.description);
              }
        }).addTo(map);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T16:44:25.643

**解决** 了我将此代码添加到我的初始化函数中。请注意“null”，因为这是必需的，以便 AJAX 回调可以填充它。

```
layer = new L.GeoJSON( null,
    { onEachFeature: function(feature,layer)
        {
            layer.bindPopup(feature.properties.description);
        }
    }).addTo(map); 
```

我最初的 AJAX 调用函数与上面发布的相同，并且 AJAX 响应已稍微更改为：

```
function resultsReturned (xmlHTTP)
{
    //alert(xmlHTTP.responseText);
    var features = JSON.parse(xmlHTTP.responseText);

    for(var i=0; i<features.features.length; i++)
    {
        layer.addData(features.features[i]);
    }

} 
```

感谢@flup 帮助我理解编码的工作方式:)

# delphi - 带有 ActiveX / COM 对象的 Delphi XE3 应用程序

> ID：15073901
> 
> 赞同：2
> 
> 时间：2013-02-25T18:33:02.577
> 
> 标签：delphi, com, activex, delphi-xe3

我对某些事情有点困惑，因为我使用了外部控件已经有一段时间了。基本上，我正在用 Delphi XE3 编写一个使用 ActiveX 控件的小型测试应用程序。照常生成 TLB 文件。我在两台机器上进行了测试（一台 Acer 笔记本和一台 Dell Latitude 10）。当我在我的桌面 Windows 机器上进行测试时，我收到一个可追溯到 OCX 文件的错误。我的印象是 TLB.pas 文件就是实例化控件所需的全部内容。我还需要安装和注册 OCX 文件吗？COM 组件是否需要与它的 .DLL 文件一起分发？TIA 为您提供预期的帮助。

布莱恩·科尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T18:49:20.880

类型库仅描述**如何**调用该库。从类型库生成的 .pas 文件也只描述了如何调用该库。这就是编译时间。在实际调用库的运行时，您需要注册并显示该库。

所以是的，您需要分发和注册该库。

# java - Android - OAuth 1.0a 回调 -> 数据 android:scheme 不起作用，因为服务提供商只允许 http 或 https

> ID：15073910
> 
> 赞同：0
> 
> 时间：2013-02-25T18:33:30.853
> 
> 标签：java, android, oauth, intentfilter

我有一个带有 OAuth 1.0a 身份验证的 Android 应用程序。使用 Web 浏览器，以便用户可以针对服务提供商进行身份验证。

我可以提供一个回调URL，当用户授权成功时会调用它。我用作回调 URL: `mytestapp://www.test.com/`。

然后我可以在我的 AndroidManifest 中执行此操作`intent-filter`：

```
<data android:scheme="mytestapp"></data> 
```

`mytestapp`因此，由于该方案，将调用此活动。但我的问题是，服务提供商只允许`http://`或`https://`不会启动我的应用程序的此活动。

那么在这种情况下我能做些什么呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:12:46.360

我以这种方式解决了它，我使用`android:scheme`,`android:host`和`android:pathPrefix`. 不幸的是，如果我想使用浏览器或我的应用程序，回调会显示我，我必须手动选择它。

# c++ - 从 1-N 中寻找子集

> ID：15073911
> 
> 赞同：0
> 
> 时间：2013-02-25T18:33:37.140
> 
> 标签：c++, debugging

我编写了这个程序来从 1-N 中找到不同的可能子集。该代码在 N=5 之前工作正常，但之后它给出了错误的输出。什么是错误？

```
#include<iostream>
#include<cstdio>
using namespace std;
int main(){
    int n, i,j ;
    cin>>n;
    int limit = 1<<n;
    int arr[limit];
    for( i=0; i<limit; i++)
        arr[i] = i+1;
    for( i=0; i<limit; i++){
        for( j=0; j<limit; j++){
            ( i & 1<<j)? printf("%d\t", arr[j]) : 0;
        }
        cout<<endl;
    }
    cout<<(1<<n)<<endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:38:44.100

```
int limit = 1<<n; 
```

所以，如果`n > 5`，你有`limit > 32`。

```
int arr[limit]; 
```

我假设您的实现将 VLA 作为扩展，这不是标准的语言。

```
for( i=0; i<limit; i++)
    arr[i] = i+1;
for( i=0; i<limit; i++){
    for( j=0; j<limit; j++){
        ( i & 1<<j) 
```

当`j >= 32`，您移动的距离超过`int`（很可能，您`int`的 s 是 32 位宽，由您的代码不适用于的观察结果支持`n > 5`），所以这是未定义的行为，并且**不太**可能以生成的方式表现正确的输出。

```
 ? printf("%d\t", arr[j]) : 0;
    } 
```

# jdbc - 多线程访问嵌入式 HSQLDB 数据库

> ID：15073912
> 
> 赞同：1
> 
> 时间：2013-02-25T18:33:41.813
> 
> 标签：jdbc, hsqldb

我有一个 HSQLDB**嵌入式**数据库，我用它来存储一些测量的统计信息。统计信息预计大约每秒从同一线程到达，但每隔几秒从几个不同的线程（从线程池中）获取。

我对 jdbc 没有太多经验，所以我的问题可能听起来微不足道：

1.  每秒创建/处理一个新连接的价格是多少？回想一下，数据库是嵌入式的，因此不涉及 TCP/IP。
2.  每秒创建/处理准备好的语句的价格是多少？

请注意，一些插入是批量插入，我认为在其中使用准备好的语句`addBatch`和`executeBatch`方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T20:43:46.213

您应该尝试重用连接和准备好的语句。

为此，每个线程将有一个单独的连接，并且每个连接将重用一组准备好的语句。在工作单元完成后提交连接，但未关闭。当您的应用程序关闭或完成其工作时，连接将关闭。

您应该使用 executeBatch 进行批量插入。

使用 HSQLDB，每秒创建/处理一个新连接/预处理语句的代价并不高，但如果可以的话，您仍然应该避免这种情况。

# jakarta-ee - Vaadin 中的这些 URI 参数处理程序解决方案有什么区别？

> ID：15073916
> 
> 赞同：0
> 
> 时间：2013-02-25T18:33:58.897
> 
> 标签：jakarta-ee, uri, vaadin, url-parameters

我已经用 Vaadin（6.8.8 版本）开始了一个新项目，我需要根据 URL 显示不同的视图。

假设我的应用程序显示有关国家/地区的信息（例如）。如果我访问*myapp.com/*，我会得到一个表单来搜索我想要的任何国家，但如果我访问*myapp.com/34*，我会得到 ID 为 34 的国家/地区的信息视图。

我做了一些搜索，发现可以通过以下方法获得此功能：

*   *MainApplication 实现 HttpServletRequestListener*
*   设置*参数处理程序*
*   设置*URIHandler*
*   设置*UriFragmentUtily*

我想我有点迷茫，因为我看不出这些方法之间的巨大差异。

**获得我想要的东西的最佳做法是什么？**我认为*URIHandler*是一个很好的方法，但我不能说*为什么*。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T07:32:03.023

除非您有充分的理由使用 Vaadin 6，否则我建议您使用 Vaadin 7 并查看[Navigator](https://vaadin.com/book/vaadin7/-/page/advanced.navigator.html)和[RequestHandler](https://vaadin.com/book/vaadin7/-/page/advanced.requesthandler.html)。Vaadin 7 比其前身具有更好的 URL 处理能力。

如果你必须使用 Vaadin 6，你可以使用[Navigator 7 插件](https://vaadin.com/directory#addon/navigator7%3avaadin)

# android - 我如何发布到朋友墙，因为 Facebook 中不再存在发布到其他人的墙

> ID：15073921
> 
> 赞同：0
> 
> 时间：2013-02-25T18:34:03.300
> 
> 标签：android, facebook-graph-api

我使用以下代码在朋友墙上发布

```
Bundle parameters = new Bundle();
JSONObject attachment = new JSONObject();
attachment.put("message", "Messages");
attachment.put("name", "Get thisapp to send messages like this!");
 attachment.put("href", link);
parameters.putString("attachment", attachment.toString());
parameters.putString("message", msg);
parameters.putString("target_id", “friend id”);
parameters.putString("method", "stream.publish");
 String  response = authenticatedFacebook.request(parameters);       
             Log.v("response***********", response); 
```

但我收到以下错误作为回应

```
02-25 16:12:24.365: V/response***********(6540): {"error_code":200,"error_msg":"Feed story publishing to other users is disabled for this application" 
```

我提到了这个链接[https://developers.facebook.com/roadmap/#february-2013](https://developers.facebook.com/roadmap/#february-2013)。如果 Facebook 不支持 Graph api 发布到他人墙，我如何发布到朋友墙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T18:49:56.247

> 如果 Facebook 不支持 Graph api 发布到他人墙，我如何发布到朋友墙？

没办法，由于滥用该功能而被禁用。如果 Facebook 说不，那么解决方法就是不合逻辑的。

# vb.net - 类版本控制

> ID：15073924
> 
> 赞同：5
> 
> 时间：2013-02-25T18:34:19.180
> 
> 标签：vb.net, versioning

我正在寻找一种干净的方法来对我的代码库进行增量更新，而不会破坏向后兼容性。这可能意味着向类添加新成员，或更改现有成员以提供附加功能。有时我需要以一种会破坏现有代码的方式更改成员（例如，重命名方法或更改其返回类型），因此我宁愿在交付后不触及任何现有类型。

我目前设置的方式是通过继承和多态性，通过创建一个新类来扩展该类的先前“版本”。

![类图](../Images/11193fdc0818907832b04636c275d66f.png)

其工作方式是根据属性的实际值创建`StatusResult`(eg ) 的适当版本，并将其作为 的实例返回。`StatusResultVersion3``ProtocolVersion``CommandResult`

因为 .NET 似乎没有类版本控制的概念，所以我不得不自己想出：将版本号附加到类名的末尾。这无疑会让你畏缩。我可以很容易地想象自己在放大图表后会抓挠眼睛。但它有效。我可以添加新成员并覆盖现有成员，而无需引入任何代码破坏更改。

有没有更好的方法来版本我的课程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-21T09:14:59.387

接口的问题在于，一旦发布，它们就基本上是一成不变的。引用 Anders Hejlsburg 的话：

> ...这就像向接口添加方法一样。发布接口后，它实际上是不可变的，因为它的任何实现都可能具有您想要在下一个版本中添加的方法。所以你必须创建一个新界面。

所以你永远不能只更新一个界面，你需要创建一个全新的界面。当然，您可以让一个类实现两个接口，因此与（例如）多态类相比，您的可维护性工作相当低，您的代码将随着时间的推移在多个类之间展开。

多个接口还允许您以类没有的方式删除方法（当然，您可以弃用它们，但这可能会在几次迭代后导致非常嘈杂的智能感知）

我个人倾向于在每个程序集版本中拥有完全独立的界面版本。

也就是说...

### v 0.1.0.0

```
interface IExample
{
    String DoSomething();
} 
```

### v 0.2.0.0

```
interface IExample
{
    void DoSomethingElse();
} 
```

您如何在幕后实现它们取决于您，但很可能是相同的类，但执行相似工作的方法略有不同（否则，为什么要使用相同的接口？）

所有旧代码都应该引用`0.1.x.x`，新代码将引用`0.2.x.x`。唯一的问题是当您发现（例如）安全漏洞并且需要将修复程序反向移植到早期版本时。这就是一个不错的 VCS 的用武之地（个人偏好是 TFS，但 SVN 或其他任何支持分支/合并的东西都可以）。

将分支中的修复合并`0.2`回`0.1`分支，然后重新编译以产生 (say) `0.1.1.0`。

只要你坚持这样的过程：

*   如果有任何重大更改，主要或次要构建将增加（即签名不会随着构建/修订增量而改变）
*   如果旧程序应该使用新的主要/次要版本，请使用[发布者策略（相当于保证没有任何问题，所以无论如何都要使用新版本）](http://msdn.microsoft.com/en-us/library/7wd6ex19.aspx)
*   客户端应用程序中的引用应指向主要/次要版本，但不指定修订/构建

这给了你：

*   干净的代码库，没有遗留的混乱
*   如果没有任何问题，允许客户使用最新版本而无需更改代码
*   防止客户端使用更新版本的程序集，这些版本确实有重大更改，直到他们重新编译（并且希望适当地更新他们的代码以利用新功能。）
*   允许您发布以前版本的安全补丁

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-25T17:02:03.467

考虑现有代码和程序集更新时，通常有两种方法：

1.  [**回归测试**](http://en.wikipedia.org/wiki/Regression_testing)

    这是非破坏性更改的好方法，您可以简单地重载函数以提供新参数等。Visual Studio 具有一些非常先进的[单元测试功能](http://msdn.microsoft.com/en-us/library/dd264975.aspx)，可以使您的回归测试相对容易和自动化。

2.  [**装配版本**](http://msdn.microsoft.com/en-us/library/51ket42z.aspx)

    如果您的更改将开始破坏某些东西，例如重写某些实用程序的工作方式，那么是时候使用新的程序集版本了。.NET 非常适合使用程序集版本。您可以将版本化程序集部署到不同的文件夹，以便现有代码可以继续引用旧版本，而新代码可以利用新版本中的功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-25T17:42:58.567

如果这主要是为了序列化，这可以在 .Net 中使用 DataContractSerializers 和 DataAnnotations 来实现。它们可以将一个对象的不同版本反序列化为同一个对象，以允许对同一类的不同版本进行反序列化，而将无法映射的任何属性留空。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-25T17:06:29.927

OP 解决了他的问题，[如下评论](https://stackoverflow.com/questions/15073924/class-versioning/16751900#comment-23606127)所示：

> 最后，我采用了接口的想法，因为它允许我将一个类成员的多个版本保存在一个类文件中。当我需要更新类时，我只需添加新接口，隐藏已更改的成员，并更改我的一些方法的返回类型。由于多态性，这不会破坏向后兼容性。

# r - 从数据框中插入 RMySQL

> ID：15073929
> 
> 赞同：8
> 
> 时间：2013-02-25T18:34:43.360
> 
> 标签：r, dataframe, sql-insert, rmysql

我试图通过使用 RMySQL 将数据添加到 MySQL 表中。我只需要一次添加一行，它不起作用。我想做的是这个。

```
dbGetQuery(con,"INSERT INTO names VALUES(data[1,1], data[1,2])") 
```

所以我正在做的是我在名为“数据”的数据框中有值，我需要将它们放入 mysql 表中。在此之前，我会检查它们是否已经在表中，如果它们不在，那么我将添加它们，但这样它就不起作用了。数据由 .csv 文件读取`read.csv`。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-25T18:38:53.913

您可以使用`paste`来构造该实际查询。

```
dat <- matrix(1:4, 2, 2)
query <- paste("INSERT INTO names VALUES(",data[1,1], ",", data[1,2], ")")
query
#[1] "INSERT INTO names VALUES( 1 , 3 )"
dbGetQuery(con, query)

# If there are a lot of columns this could be tedious...
# So we could also use paste to add all the values at once.
query <- paste("INSERT INTO names VALUES(", paste(data[1,], collapse = ", "), ")")
query
#[1] "INSERT INTO names VALUES( 1, 3 )" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-04-26T04:54:53.350

您可以尝试：

```
dbWriteTable(names, data[1,],append=True) 
```

作为[DBI 包](https://cran.r-project.org/web/packages/DBI/DBI.pdf)的详细信息

# php - 使用 XML 和 PHP 返回数据

> ID：15073930
> 
> 赞同：0
> 
> 时间：2013-02-25T18:34:44.907
> 
> 标签：php, xml

我正在尝试从包含所有元素及其数据的 XML 文件中回显特定元素的数据。这是我的代码：

```
$xml = simplexml_load_file("http://cslab.bc.edu/~cs254/data/periodic.xml");
$atom = $_GET['selectAtom'];
$symbol = $xml->$atom->SYMBOL;
echo $symbol; 
```

$atom 变量在用户提交表单后返回原子的名称。我希望这个 php 代码回显所选原子的符号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:45:01.557

您可以运行 XPath 查询来轻松找到它。就是这样：

```
$xml = simplexml_load_file("http://cslab.bc.edu/~cs254/data/periodic.xml");
$atom = 'Actinium';
$symbol = $xml->xpath("//ATOM[NAME='$atom']/SYMBOL");
echo $symbol[0]; 
```

[键盘](http://codepad.viper-7.com/YICjOv)中的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T18:36:27.947

尝试

```
$symbol = $xml->{$atom}->SYMBOL; 
```

# iphone - 生成没有图像的 vCard

> ID：15073931
> 
> 赞同：1
> 
> 时间：2013-02-25T18:34:48.127
> 
> 标签：iphone, objective-c, vcf-vcard

我目前正在通过此功能从我的地址簿生成 vCard：

```
ABAddressBookRef ab = ABAddressBookCreateWithOptions(NULL, nil);

NSString *firstName = (__bridge NSString *)ABRecordCopyValue(person, kABPersonFirstNameProperty);
NSString *lastName = (__bridge NSString *)ABRecordCopyValue(person, kABPersonLastNameProperty);

if (!lastName) lastName = @"";
if (!firstName) firstName = @"";

NSString *name = [NSString stringWithFormat:@"%@ %@",firstName, lastName];

CFArrayRef contact = ABAddressBookCopyPeopleWithName(ab, (__bridge CFStringRef)(name));    

CFDataRef vcard = (CFDataRef)ABPersonCreateVCardRepresentationWithPeople(contact); 
```

这工作得很好，但我不希望我的 vCard 中有任何图像。有没有办法在不获取图像的情况下生成 vCard？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:46:04.237

我为此创建了一个解决方法，只需从字符串中删除照片部分，如下所示：

```
- (NSString *)removeImageFromVCF:(NSString *)yourString {

NSScanner *theScanner;
NSString *text = nil;

theScanner = [NSScanner scannerWithString:yourString];

if ([yourString rangeOfString:@"X-SOCIALPROFILE"].location == NSNotFound) {

    while ([theScanner isAtEnd] == NO) {

        [theScanner scanUpToString:@"PHOTO" intoString:NULL] ;
        [theScanner scanUpToString:@"END:VCARD" intoString:&text] ;

        yourString = [yourString stringByReplacingOccurrencesOfString:
                      [NSString stringWithFormat:@"%@", text] withString:@""];
    }

}else{

    while ([theScanner isAtEnd] == NO) {

        [theScanner scanUpToString:@"PHOTO" intoString:NULL] ;
        [theScanner scanUpToString:@"X-SOCIALPROFILE" intoString:&text] ;

        [theScanner scanUpToString:@"END:VCARD" intoString:NULL];

        yourString = [yourString stringByReplacingOccurrencesOfString:
                      [NSString stringWithFormat:@"%@", text] withString:@""];

    }

}

return yourString;

} 
```

希望这会对其他人有所帮助。

# python - 我该如何解决我的错误？（输出“无”）

> ID：15073933
> 
> 赞同：0
> 
> 时间：2013-02-25T18:35:01.960
> 
> 标签：python, python-3.x, fibonacci

我已经编写了一些代码来输出斐波那契数列的第八项：

```
def fibonacci():
    a=1
    b=1
    print (a)
    print (b)
    for i in range(0,8):
        current= a+b
        print (current)
        a=b
        b=current 
```

它可以工作，但我的输出最后有一个单词 None，为什么我会收到这个错误？

```
1
1
2
3
5
8
13
21
34
55
None 
```

我让它输出 1, 1 所以我的序列不是从 2 开始

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T18:36:23.237

我怀疑你是这样调用函数的：

```
print(fibonacci(8)) 
```

如果是，请删除`print()`：

```
fibonacci(8) 
```

# character-encoding - 如何从网站识别字符编码？

> ID：15073937
> 
> 赞同：3
> 
> 时间：2013-02-25T18:35:20.033
> 
> 标签：character-encoding, python-2.7, nlp, nltk

**我正在尝试做的事情：** 我从数据库中获取 uris 列表并下载它们，删除停用词并计算这些词在网页中出现的频率，然后尝试保存在 mongodb 中。

**问题：** 当我尝试将结果保存在数据库中时，我收到错误 bson.errors.invalidDocument: the document must be a valid utf-8

它似乎与代码 '\xc3someotherstrangewords'、'\xe2something' 有关，当我处理网页时，我尝试删除标点符号，但我无法删除重音，因为我会得到一个错误的词。

**我已经尝试过** 的我已经尝试通过我尝试过的网页的标题识别字符编码使用chardet

利用 re.compile(r"[^a-zA-Z]") 和/或 unicode(variable,'ascii', 'ignore');
这对非英语语言不利，因为它们消除了重音。

**我想知道的是：**
有人知道如何识别字符并翻译成正确的单词/编码吗？
例如从网页 '\xe2' 获取这个并翻译成 'â'

（英语不是我的第一语言，所以请原谅我）编辑：如果有人想查看[源代码](https://github.com/raphaeljlps/ProjetoIC/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T19:02:59.347

找出网站的正确字符编码并不容易，因为标题中的信息可能是错误的。[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)在猜测字符编码方面做得很好，并自动将其解码为 Unicode。

```
from bs4 import BeautifulSoup
import urllib

url = 'http://www.google.de'
fh = urllib.urlopen(url)
html = fh.read()
soup = BeautifulSoup(html)

# text is a Unicode string 
text = soup.body.get_text()
# encoded_text is a utf-8 string that you can store in mongo
encoded_text = text.encode('utf-8') 
```

另请参阅[此问题的答案。](https://stackoverflow.com/questions/1495627/how-to-download-any-webpage-with-correct-charset-in-python)

# winforms - 绘制渐变矩形的有效方法

> ID：15073939
> 
> 赞同：6
> 
> 时间：2013-02-25T18:35:31.407
> 
> 标签：winforms, gdi+

我正在生成一堆具有不同大小和位置的 RectangleF 对象。在 GDI+ 中用渐变画笔填充它们的最佳方法是什么？

在 WPF 中，我可以创建一个 LinearGradientBrush，设置起点和终点`relative`，然后 WPF 将负责其余的工作。

然而，在 GDI+ 中，渐变画笔构造函数需要绝对坐标中的位置，这意味着我必须为每个矩形创建一个画笔，这将是一个非常复杂的操作。

我错过了什么还是那确实是唯一的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T20:29:12.700

如果您只想声明一次画笔，您可以在应用渐变之前指定一个变换。请注意，使用转换将覆盖许多可以在`LinearGradientBrush`.

[LinearGradientBrush.Transform 属性 (System.Drawing.Drawing2D)](http://msdn.microsoft.com/en-us/library/system.drawing.drawing2d.lineargradientbrush.transform.aspx)

要修改转换，请调用与所需矩阵运算相对应的画笔对象上的方法。请注意，矩阵运算不可交换，因此顺序很重要。出于您的目的，您可能希望针对矩形的每个再现按以下顺序执行它们：缩放、旋转、偏移/平移。

[LinearGradientBrush.ResetTransform 方法@MSDN](http://msdn.microsoft.com/en-us/library/system.drawing.drawing2d.lineargradientbrush.resettransform.aspx)

[LinearGradientBrush.ScaleTransform 方法（Single、Single、MatrixOrder）@MSDN](http://msdn.microsoft.com/en-us/library/2ta571zt.aspx)

[LinearGradientBrush.RotateTransform 方法（Single，MatrixOrder）@MSDN](http://msdn.microsoft.com/en-us/library/w8504yz3.aspx)

[LinearGradientBrush.TranslateTransform 方法（Single、Single、MatrixOrder）@MSDN](http://msdn.microsoft.com/en-us/library/33fact1b.aspx)

请注意，系统级绘图工具实际上并不包含渐变画笔的库存定义，因此如果您对制作多个画笔有性能问题，创建大量渐变画笔的成本不应超过 GDI+/System 的开销.Drawing 维护定义渐变和样式所需的数据。您可以根据需要为每个矩形创建一个画笔，而不必深入研究通过变换自定义画笔所需的数学。

[刷机功能 (Windows) @ MSDN](http://msdn.microsoft.com/en-us/library/dd183395.aspx)

这是您可以在 WinForms 应用程序中测试的代码示例。这个应用程序使用 45 度渐变使用渐变画笔绘制瓷砖，缩放到瓷砖的最大尺寸（天真计算）。如果您摆弄值和转换，您可能会发现如果您有非平凡的渐变定义，则不值得使用为所有矩形设置转换的技术。否则，请记住您的转换是在世界级别应用的，在 GDI 世界中，y 轴是颠倒的，而在笛卡尔数学世界中，它是从下到上排序的。这也导致角度顺时针应用，而在三角学中，角度逆时针方向前进，y 轴指向上方的值增加。

```
using System.Drawing.Drawing2D;

namespace TestMapTransform
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Paint(object sender, PaintEventArgs e)
        {
            Rectangle rBrush = new Rectangle(0,0,1,1);
            Color startColor = Color.DarkRed;
            Color endColor = Color.White;
            LinearGradientBrush br = new LinearGradientBrush(rBrush, startColor, endColor, LinearGradientMode.Horizontal);

            int wPartitions = 5;
            int hPartitions = 5;

            int w = this.ClientSize.Width;
            w = w - (w % wPartitions) + wPartitions;
            int h = this.ClientSize.Height;
            h = h - (h % hPartitions) + hPartitions;

            for (int hStep = 0; hStep < hPartitions; hStep++)
            {
                int hUnit = h / hPartitions;
                for (int wStep = 0; wStep < wPartitions; wStep++)
                {
                    int wUnit = w / wPartitions;

                    Rectangle rTile = new Rectangle(wUnit * wStep, hUnit * hStep, wUnit, hUnit);

                    if (e.ClipRectangle.IntersectsWith(rTile))
                    {
                        int maxUnit = wUnit > hUnit ? wUnit : hUnit;

                        br.ResetTransform();
                        br.ScaleTransform((float)maxUnit * (float)Math.Sqrt(2d), (float)maxUnit * (float)Math.Sqrt(2d), MatrixOrder.Append);
                        br.RotateTransform(45f, MatrixOrder.Append);
                        br.TranslateTransform(wUnit * wStep, hUnit * hStep, MatrixOrder.Append);

                        e.Graphics.FillRectangle(br, rTile);

                        br.ResetTransform();
                    }
                }
            }
        }

        private void Form1_Resize(object sender, EventArgs e)
        {
            this.Invalidate();
        }
    }
} 
```

这是输出的快照：

![带有渐变瓷砖绘画的 5x5 表格](../Images/abf2f92a3f889fcca011ec38717a070b.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T18:59:44.557

我建议您创建一个像这样的通用方法：

```
public void Paint_rectangle(object sender, PaintEventArgs e)
    {
        RectangleF r = new RectangleF(0, 0, e.ClipRectangle.Width, e.ClipRectangle.Height);
        if (r.Width > 0 && r.Height > 0)
        {
            Color c1 = Color.LightBlue;
            Color c2 = Color.White;
            Color c3 = Color.LightBlue;

            LinearGradientBrush br = new LinearGradientBrush(r, c1, c3, 90, true);
            ColorBlend cb = new ColorBlend();
            cb.Positions = new[] { 0, (float)0.5, 1 };
            cb.Colors = new[] { c1, c2, c3 };
            br.InterpolationColors = cb;

            // paint
            e.Graphics.FillRectangle(br, r);
        }
    } 
```

然后，对于每个矩形只需调用：

```
yourrectangleF.Paint += new PaintEventHandler(Paint_rectangle); 
```

如果渐变颜色都相同，则可以使该方法更短。希望有帮助..

# java - 在运行时在 android 中更改 GridLayout 行/列数

> ID：15073941
> 
> 赞同：3
> 
> 时间：2013-02-25T18:35:37.230
> 
> 标签：java, android, user-interface, android-gridlayout

我是android开发的新手。我正在尝试使用 GridLayout 来完成我的 UI 设计。

这是场景：

我在 xml 文件中定义了一个 GridLayout 如下

```
<GridLayout
    android:id="@+id/gridLayout"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_above="@id/linearLayoutBottomLeft"
    android:layout_alignParentLeft="true"
    android:layout_below="@id/linearLayoutTopLeft"
    android:layout_toLeftOf="@id/textView" >
</GridLayout> 
```

然后，我在我的活动的 onCreate() 方法中设置它，如下所示：

```
GridLayout gridLayout = (GridLayout) findViewById(R.id.gridLayout);
gridLayout.invalidate();
int rowNumber = 4;
int colNumber = 4;
gridLayout.setRowCount(rowNumber);
gridLayout.setColumnCount(colNumber); 
```

到目前为止一切顺利，一切正常。但是，我那里也有一些按钮。在按钮的单击事件中，我更改了 rowNumber 和 colNumber，在运行时设置它们。我认为它会导致一些错误...

所以我的问题是是否可以在运行时为gridLayout设置行号和列号。

如果这在 android 中是不允许的，那么实现我上面描述的 GUI 的好习惯是什么。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-05T21:10:39.200

您需要执行 gridLayout.removeAllChildren()。

Invalidate 是一种让 View 系统知道 View 的内容已经改变并且需要重新绘制的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T19:04:39.800

今天，我想出了一些方法来解决这个问题。

在 xml 文件中，我将 GridLayout 替换为 LinearLayout，并将 girdlayout 动态添加为 linearlayout 的子级。现在可以在按钮单击事件处理程序中更改行/列数。

我不确定这是否是一种好方法，并且会出现任何性能损失。

# php - 使用 PHP 在页面之间移动数组而不是选择特定列并保存在表中

> ID：15073943
> 
> 赞同：0
> 
> 时间：2013-02-25T18:35:42.853
> 
> 标签：php, html, arrays, forms, codeigniter

那么我有一个问题，需要建议。

我目前正在上传一个包含产品数据的 csv 文件。可以有很多产品。我正在使用库读取 csv 文件，而不是将所有数据放入数组中。现在我遇到了一种情况，我被困住了如何解决这个问题。

斯堪里奥：

上传 csv 后，用户有一个包含 9 个特定列的表单。来自 csv 的所有列都应该进入一个数组，该数组将显示为下拉列表。在左侧，表单将包含特定字段，在每个字段之前的右侧，将有一个包含 csv 列名称的下拉列表。选择地图按钮后，将单击从数组中选择列并将其保存到表中。现在我不知道如何在用户选择要映射的列时保存数据而不保存到表中。我该怎么办？我应该把整个数组放在一个隐藏的字段中吗？请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:43:56.163

> 现在我不知道如何在用户选择要映射的列时保存数据而不保存到表中。我该怎么办？我应该把整个数组放在一个隐藏的字段中吗？请建议。

您可以将它们存储在会话变量中，这样您存储的任何内容都会为每个用户单独保留，直到该用户注销或您的代码的某些部分明确删除它。（比如说，在您丢弃或永久保存数据库上的数据之后）。

希望您已经在使用会话，现在看看[php.net 上的会话变量](http://php.net/manual/en/reserved.variables.session.php)

注意：我从未使用过 codeigniter，但快速搜索显示它包含一个[用于管理会话的类](http://ellislab.com/codeigniter/user-guide/libraries/sessions.html)，在 FlashData 下查看，这似乎是执行此操作的“codeigniter 方式”。

* * *

编辑：

Codeigniter 会话变量有 4KB 的限制，这对您来说可能足够，也可能不够。如果不是，您总是使用以下替代方法之一：

1.  使用数据库存储数据，并在会话变量中存储一些项目 id 和用户 id 以便能够检索它。

2.  使用文件，您可以生成一个随机名称并将其存储在会话变量中，然后将您需要的任何内容存储在文件中。

如果您无法处理会话的结束，您可以将过期日期存储在数据库中并通过编程任务（您可以使用 crons 吗？）从临时表（或文件）中删除过期项目。

虽然，小心！我不知道codeigniter的安全性......但是，有一些风险。您可能希望添加一个隐藏的“令牌”字段，该字段具有与数据库表中的用户关联的随机唯一值以及与会话生命周期相匹配的到期日期。您应该在每次发送表单时创建一个新令牌，并在收到它后验证提交表单中的令牌是否与数据库中用户（由会话标识）的有效令牌匹配，如果是，则删除令牌并继续处理表格的其余部分。如果令牌不匹配或不再有效，则会话已过期，有人一直在弄乱 cookie，或者您在攻击中幸存下来（有人使用旧令牌重新创建帖子的情况）。

我再说一遍，我不知道代码编辑器的安全性。但如果我是那个框架的作者，它已经实现了令牌......所以，这个安全风险很可能已经被覆盖了。

您可以在 OWASP 了解有关[跨站点请求伪造的](https://www.owasp.org/index.php/Cross-Site_Request_Forgery_%28CSRF%29_Prevention_Cheat_Sheet#General_Recommendation%3a_Synchronizer_Token_Pattern)更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T20:54:28.203

为什么不将用户数据存储在会话中？这样，您可以将它从一个页面传递到另一个页面，而无需将其放入 HTML 中（用户可以轻松更改它）。

您最好的选择是会话或 cookie。Cookie 的局限性在于它们只能包含一定数量的数据，并且由于*cookie 存储在客户端计算机上，因此您只能使用一定数量的 cookie。* 您可以使用会话，这会将信息保存在服务器上。Codeigniter 将大小限制为 4kb。为此，您只需在 PHP 中添加

```
session_start() 
```

到您希望使用会话变量的每个页面的顶部。

你应该清理你的用户输入。要设置会话变量，请使用赋值运算符 (=)。

```
$_SESSION['var'] = filter_input( INPUT_POST, 'field_name', FILTER_SANITIZE_FULL_SPECIAL_CHARS ); 
```

如果您使用 get，则可以使用 INPUT_GET。

如果用户没有提交表单，您可以通过 javascript 添加事件侦听器，当表单值填写完毕后，您可以将它们存储在 cookie 中并使用 PHP 从 cookie 中提取数据。

始终最好在服务器上清理和验证用户数据。

# ios - 如何打破 Xcode 4.6 中的所有符号代码？

> ID：15073946
> 
> 赞同：11
> 
> 时间：2013-02-25T18:35:57.080
> 
> 标签：ios, objective-c, xcode, debugging, lldb

我正在解开意大利面条代码，作为一个练习，我正在从应用程序启动开始浏览应用程序，然后继续`applicationDidFinishLaunching`前进并进入。

当第一个方法返回时，我会分解成程序集。知道什么时候跨过去，什么时候跨进去是一件很痛苦的事。我希望调试器暂停所有符号化代码（即我可以在 Xcode 中看到的代码 - 也许这被称为“用户”代码？基本上，非框架/库代码。），但我不关心 Apple 的内部方法。

我正在寻找在我（或我的前任）编写的每个方法和函数的第一行（或每一行）上设置断点的实际等价物。

是否有一些 LLDB 巫毒可以做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-25T22:05:13.010

假设您的产品/模块称为“MyApp”，则有一种简单的方法可以在所有模块的功能上设置断点，不包括任何其他共享库（Apple 框架）的功能：

```
breakpoint set -s MyApp -r . 
```

但是，这*将*包括您静态链接到的任何库，这可能意味着您引入的任何库，因为 App Store 中不允许动态链接。

如果您倾向于为您的类添加前缀，您可以通过仅中断作为具有该前缀的类的一部分的函数来缩小结果范围。假设您的前缀是“MA”，您可以执行以下操作：

```
breakpoint set -s MyApp -r ^[^A-Za-z]*MA 
```

这应该涵盖您的大部分代码。

# php - 用户代理更改后 PHP 会话被销毁

> ID：15073948
> 
> 赞同：1
> 
> 时间：2013-02-25T18:36:03.227
> 
> 标签：php, iphone, session, cakephp, session-management

我有这样的地址`example.com/page1`。例如访问者的用户代理是这样的：`Mozilla/5.0 (iPhone; CPU iPhone OS 6_1_2 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gecko) Mobile/10B146`. 我运行`session_id()`PHP 会话 ID 为 12345。我可以在临时文件夹中看到“sess_12345”文件。它包含所有会话变量。

经过一些处理后，我将他/她重定向到`example.com/page2`. 访问者的用户代理更改为：`Mozilla/5.0 (iPhone; CPU iPhone OS 6_1_2 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gecko) Mobile/10B146 Twitter for iPhone`。我`session_id()`再次运行，发现ID仍然是12345。但是当我检查“sess_12345”文件时，我看到它被删除了。

只有当用户从“Twitter for iPhone”应用程序访问我的网站时才会发生这种情况。我猜会话文件由于用户代理更改而被删除，但我不确定。可能是什么原因？

（除了这种情况，会话成功。我使用的是 CakePHP 2.4）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:42:02.760

Cake 有一个设置可以检查浏览器的用户代理。如果它更改将破坏会话。关闭此设置：

`Session.checkAgent`

# html - 可点击的链接不在图片下方

> ID：15073954
> 
> 赞同：0
> 
> 时间：2013-02-25T18:36:14.170
> 
> 标签：html, css

我已经做网页设计几年了。我正在模拟 wordpress 主题标题中的横幅图像。通常图像链接没有问题，但在这种情况下，整个图像不可点击。只有图像的右侧是链接。为什么是这样？我如何解决它？

[网站链接](http://scottishsnooker.com/)

横幅广告是右上角的“PremiumCues”。

你们中的任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:45:18.033

删除这个：

```
.rt-container, .rt-block {
   position: relative;
} 
```

或添加

```
#banner {
    z-index: 9999; /* any large number */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T18:46:18.713

你有`rt-container`重叠的图像。一个简单的解决方案就是确保带有横幅的 div 真正呈现在 rt-container div 之上。为此，只需设置更高的 z-index。只需将其添加到您的 CSS

```
#banner {
z-index:100;
} 
```

# automated-tests - 将 MonkeyTalk 生成的 javascript 与 EAGLView 一起使用

> ID：15073955
> 
> 赞同：0
> 
> 时间：2013-02-25T18:36:16.603
> 
> 标签：automated-tests, unity3d, ios-ui-automation, monkeytalk

我有以下 monkeytalk 文件作为概念证明，它点击了正确的屏幕区域：

```
EAGLView * Drag 40 60 40 60
EAGLView * Drag 269 274 36 68 
```

这运行良好，当我尝试将其导出到 javascript 文件时，我得到以下信息：

```
load("libs/PoC.js");

PoC.connect.prototype.run = function() {

    this.app.eAGLView().drag("40", "60", "40", "60");
    this.app.eAGLView().drag("269", "274", "36", "68");
}; 
```

但是为此我得到：

```
result: ERROR : sun.org.mozilla.javascript.internal.EcmaError: TypeError: Cannot find function eAGLView. (connect.js#6) in connect.js 
```

我想没有人可以帮助我从 javascript 访问 EAGLView 吗？我想从一个我已经开发了很多测试并且支持javascript的测试框架中驱动monkeytalk，所以我真的很想让这个工作......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T16:29:07.487

这是一个问题，因为 javascript 没有任何非标准对象的函数。解决方案是将类（在本例中为 EAGLView）更改为它继承自的任何内容（在本例中可能为 View）。

因此，要使此示例正常工作，您可以使用：

`this.app.view("MonkeyID").drag();`

[但是，这将要求 MonkeyID 是唯一的 - 您可以在此处](https://www.gorillalogic.com/monkeytalk-documentation/monkeytalk-user-guide/understanding-monkeytalk-commands/monkeyid)了解有关获取唯一 MonkeyID 的更多信息

# osx-mountain-lion - 增加我的 ubuntu 12.04（双启动）分区的大小

> ID：15073957
> 
> 赞同：2
> 
> 时间：2013-02-25T18:36:28.013
> 
> 标签：osx-mountain-lion, ubuntu-12.04

我目前正在双启动 Mac OS X Mountain Lion 和 Ubuntu 12.04 LTS

我想将我的 mac 分区缩小 10 GB，并将我的 Ubuntu 分区增加 10 GB，最好是通过维护两个分区上的数据。

我熟悉在（mac）磁盘实用程序中减少分区，然后启动到 Ubuntu 并重新格式化该分区的过程；但是如何在不重新分区的情况下调整现有 Ubuntu 分区的大小？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:42:29.920

我不确定你在问什么，但话说回来可能只是我。我首先想到的是简单地使用分区魔法或 GParted。您可以简单地启动它们并调整大小到您喜欢的大小，但我建议在进行任何操作之前备份分区以防止数据丢失。

# android - Android canvas.drawPoint 忽略 Paint.Cap 回合

> ID：15073959
> 
> 赞同：0
> 
> 时间：2013-02-25T18:36:28.680
> 
> 标签：android, canvas, paint

我已经为此工作了一段时间。这段代码：

```
Log.i(TAG, "stroke style: " + paint.getStyle());
Log.i(TAG, "stroke cap: " + paint.getStrokeCap());
canvas.drawPoint(p.x, p.y, paint); 
```

在原木上打印“STROKE”和“ROUND”，但在地图上绘制一个黑色 SQUARE！任何人都知道我需要做些什么来产生一个点而不是一个正方形！？

谢谢！

**编辑** 我将给出以下使用 drawCircle 的建议，但我猜我只是感到困惑，因为我读过的所有内容都表明你应该能够以这种方式表明你想要一个圆圈。一个例子是[这个 google book entry](http://books.google.com/books?id=TwV45aVC14IC&pg=PT432&dq=android%20setstrokecap%20does%20nothing%20point&hl=en&sa=X&ei=z7IrUYmeK4XWygHT1IEw&ved=0CDAQ6AEwAA)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:48:37.603

尝试`drawCircle`改用

```
circlePaint.setStyle(Style.FILL);
circlePaint.setAntiAlias(true);
circlePaint.setColor(0xFFFF0000); //opaque red
float radius = 10f; //10 pixels

canvas.drawCircle(p.x, p,y, radius, circlePaint); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-05T21:49:20.923

如果您绘制到由位图支持的画布，它会正确绘制。如果您直接在屏幕上绘制（即传递给 View 的 onDraw() 方法的画布），它似乎无法正确绘制。因此，解决该问题的另一种方法是首先渲染位图，然后将其绘制到屏幕上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T18:48:26.060

您可以尝试使用和作为中心（第一个和第二个参数）的[drawCircle（）](http://developer.android.com/reference/android/graphics/Canvas.html#drawCircle%28float,%20float,%20float,%20android.graphics.Paint%29)并用作半径取决于您希望点的大小并使用带有笔划样式..`p.x``p.y``1 or 2``paint``FILL`

# c# - Azure 表中的链接

> ID：15073960
> 
> 赞同：0
> 
> 时间：2013-02-25T18:36:34.140
> 
> 标签：c#, azure, azure-table-storage

有人可以解释哪些链接有用以及如何使用它们吗？

[MSDN](http://msdn.microsoft.com/en-us/library/system.data.services.client.dataservicecontext.addlink.aspx)中的文档有点稀疏，我尝试过测试它们，但只是重新出现错误`SaveChanges()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T21:03:39.227

Windows Azure 表中根本不使用链接（即它们没有被持久化）。您也许可以在客户端的内存中建立链接，但我不确定这会有多大用处。我认为链接用于一对多或多对多关系 - 所以它只适用于数据库的东西，而不是表。

# erlang - 使用过滤器处理 Erlang 记录

> ID：15073965
> 
> 赞同：0
> 
> 时间：2013-02-25T18:36:54.833
> 
> 标签：erlang, record

我有以下代码从记录列表中返回一条记录，该记录的字段值等于 Accountnumber。

```
lookup(AccountNumber, [#account{no=AccountNumber} = Rec | _]) ->
    Rec;
lookup(AccountNumber, [_| T]) ->
    lookup(AccountNumber, T);
lookup(AccountNumber, []) ->
    not_found. 
```

上面的代码工作正常，但是当我尝试使用以下代码将其转换为过滤器时：

```
lookup(AccountNumber, DBRef) ->
    lists:filter(fun(#account{no=AccountNumber} = Rec) -> Rec end, DBRef). 
```

我收到以下错误：

```
** exception error: no case clause matching #account{no = 2,balance = 0,pin = undefined,name = "Ali",
                                                 transactions = []}
   in function  lists:'-filter/2-lc$^0/1-0-'/2 (lists.erl, line 1271) 
```

错误的原因是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T19:40:15.873

代码中存在多个问题

1.过滤器应始终为所有列表元素返回原子真或假。这导致您出现错误。

2.当fun块外的变量用在fun头中时，它们不是模式匹配的，外面的变量被屏蔽了。因此模式匹配失败。

您可以在下面看到修改后的代码。

```
 lookup(AccountNumber, DBRef)  ->
    lists:filter(
      fun(#account{no=AccNo}) when AccNo =:= AccountNumber -> true;
         (_) -> false 
      end, DBRef). 
```

# java - 带有 jar 嵌入 HTML 安全问题的 Java Applet

> ID：15073967
> 
> 赞同：0
> 
> 时间：2013-02-25T18:36:57.167
> 
> 标签：java, applet, japplet

我在 HTML 页面中嵌入了一个小程序。该小程序还使用 MySQL jar 文件。

没有 MySQL jar 文件，它工作得很好。从本地网络服务器或托管网络服务器执行它时，会出现以下错误：

```
Exception in thread "AWT-EventQueue-2" java.lang.ExceptionInInitializerError
at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:286)
at java.sql.DriverManager.getConnection(Unknown Source)
.........
Caused by: java.security.AccessControlException: access denied ("java.util.PropertyPermission" "file.encoding" "read")
at java.security.AccessControlContext.checkPermission(Unknown Source)
at java.security.AccessController.checkPermission(Unknown Source) 
```

我的文件列表：

```
/appletTest.html
/mysql-connector-java-5.1.18-bin.jar
/applet/testApplet.class 
```

测试Applet.class：

```
package applet;

import java.applet.Applet;
import java.awt.Graphics;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;

public class HelloWorldApplet extends Applet {

@Override
public void paint(Graphics g) {
    g.drawString("Hello World", 25, 50);

    Connection con = null;
    Statement st = null;
    ResultSet rs = null;

    String url = "jdbc:mysql://localhost:3306/testdb";

    try {
        con = DriverManager.getConnection(url, "root", ""); // <= here fails
        st = con.createStatement();
        rs = st.executeQuery("SELECT VERSION()");

        if (rs.next()) {
            g.drawString(rs.getString(1), 25, 50);
        }

    } catch (SQLException ex) {
        System.out.println(ex);
    } 
  }
} 
```

小程序测试.html：

```
<html>
  <head>
  <title>Applet Test</title>
  </head>
   <body>
      <applet code="applet.testApplet.class" width="500" height="300" archive="mysql-connector-java-5.1.18-bin.jar">
      </applet>
   </body>
</html> 
```

我假设出现此安全错误是因为小程序无法访问本地资源，除非您“签名”或“更改本地安全策略”。但是我所有的文件都位于网络服务器上，并且小程序请求也位于网络服务器上的 jar 文件。

所以，我在这里看不到本地文件请求，但仍然收到此错误。你能给我一些建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:43:32.933

[“通常，未签名的 Java 小程序或应用程序只能连接回它们所源自的 Web 服务器。此限制可防止小程序通过快速连接到 Internet 上的任意机器而导致拒绝服务攻击。”](http://www.oracle.com/technetwork/java/javase/plugin2-142482.html#CROSSDOMAINXML)

测试时，请确保您与网络服务器位于同一域中。 `file:///.../appletTest.html`即使您正在访问本地主机也不会工作。

那行：`String url = "jdbc:mysql://localhost:3306/testdb";`将需要更改为您的网络服务器的地址。

[编辑] 每次`paint()`调用都打开一个新连接不是很傻吗？

[编辑] 我更仔细地阅读了您的帖子。问题是您无法访问 jar 文件。最简单的方法是将驱动程序打包在与小程序相同的 jar 中。

# regex - 什么应该是正则表达式

> ID：15073968
> 
> 赞同：-1
> 
> 时间：2013-02-25T18:37:08.267
> 
> 标签：regex

我如何为以下字符串编写正则表达式。“ShortCaption”和“Headline”中的所有内容都需要提取吗？

```
 <xs:element name ="ID" type ="xs:int" minOccurs ="1" maxOccurs ="1"/>     
  <xs:element name ="Type" type ="xs:string" minOccurs ="1" maxOccurs ="1"/>
  <xs:element name ="Language" type ="xs:string" minOccurs ="0" maxOccurs ="1"/>
  <xs:element name="LinkText" type ="xs:string" minOccurs ="0" maxOccurs ="1"/>
  <xs:element name="Headline" type ="xs:string" minOccurs ="0" maxOccurs ="1"/>
  <xs:element name="ShortCaption" type ="xs:string" minOccurs ="0" maxOccurs ="1"/> 
```

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:40:03.357

尝试使用 DOM 在 xml 中提取！链接到这个： http: [//php.net/manual/en/book.dom.php](http://php.net/manual/en/book.dom.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T18:45:34.953

使用正则表达式来解析标记通常是不受欢迎的。但是，如果您对每一行使用正则表达式，并且可以确保每一行看起来像上面的示例（没有换行等），那么这将起作用：

```
my $xml =~ /^.*?name\s*=\s*"(Headline|ShortCaption)"\s*type\s*=\s*"(.*?)"\s*minOccurs\s*=\s*"(.*?)"\s*maxOccurs\s*=\s*"(.*?)".*$/

my $name = $1;
my $type = $2;
my $minOccurs = $3;
my $maxOccurs = $4; 
```

我没有对此进行测试，但它非常基础，应该为您提供一个可以构建的示例。但是，我同意世界上几乎所有其他开发人员的观点……使用正则表达式进行标记是灾难的根源。

# java - 使用 detachChild() 和 addChild() 时循环未按预期执行

> ID：15073969
> 
> 赞同：0
> 
> 时间：2013-02-25T18:37:16.557
> 
> 标签：java, android, andengine

*这个问题是指andengine GL-ES1。*

当您返回壁纸活动或用户在游戏中执行操作时，我无法制作刷新壁纸活动。

我的游戏有两个活动。一方面，您可以编辑和排列房间中的背景元素。在另一个你玩游戏时，它使用与你在第一个活动中安排的元素相同的背景。

还有一个动态壁纸，其中你的房间是背景，人物在它前面移动。

我正在墙纸的 onResume() 中进行更新。

首先，我分离了我之前使用的所有背景精灵。然后我在更新的位置附加新的精灵。

发生的情况是：一些精灵没有出现。

这是方法：你能看出我做错了什么吗？

```
 private void loadBackgroundDecorations() {
    //Add new decorations
    Log.d(TAG, "loadBackgoundDecorations");
    mEngine.runOnUpdateThread(new Runnable() {          
        @Override
        public void run() {
            // Remove Old Decorations
            Log.d(TAG, "loadBackgoundDecorations: decorationList.size() =" + decorationList.size());
            while(decorationList.size() > 0){
                Sprite d = decorationList.remove(0);
                scene.detachChild(d);
                Log.d(TAG, "loadBackgoundDecorations: detachChild");
            }
            decorationList.clear();
            //Add new decorations
            ArrayList<Integer> decorations = app.getBackgroundManager().getDecorations();
            Log.d(TAG, "loadBackgoundDecorations: decorations.size()" +decorations.size());
            for (int i = 0; i < decorations.size(); i+=3) {
                Log.d(TAG, "Decoration Values: texture-"+decorations.get(i)+", x-"+decorations.get(1+i)+", y-"+decorations.get(2+i));                   
                Sprite draggable = new Sprite(decorations.get(1+i),decorations.get(2+i),mGameTextureRegionLibrary.get(decorations.get(i)));
                draggable.setIgnoreUpdate(true);
                scene.attachChild(draggable,0);                 
                decorationList.add(draggable);
                Log.d(TAG, "loadBackgoundDecorations: attachChild"+ i);
            }
        }
    });

}

@Override protected void onResume() {
    super.onResume();               
    Log.d(TAG, "onResume");
    BitmapTextureAtlasTextureRegionFactory.createFromAsset(mTexture, this, app.getAquariumBackground(), 0, 0);
    addBubbles();
    loadBackgroundDecorations();
    addCharacters()
} 
```

============ 更新 ================= 正如一些人在下面建议的那样，我尝试将所有场景设置功能添加到可运行文件中。这没有效果。对我有用的是将“错误”装饰可见属性设置为“假”。但我担心这最终会导致内存泄漏，因为越来越多的精灵副本被隐藏在墙纸上。仅当我调用“detachChild”时才存在问题。出于某种原因，这似乎阻止了“attachChild”正确触发。有人对可能导致这种情况的原因有任何想法吗？

其他人可以创建一个在 onResume 函数中添加和删除精灵的活动吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T22:24:44.493

我相当肯定该错误与您的 onResume 方法有关。您使用方法的顺序是

```
addBubbles();
loadBackgroundDecorations();
addCharacters() 
```

但是您的 loadBackgroundDecorations 使用可运行的，因此不能保证该方法将在两者之间运行。

**我的解释：**

据我了解，addCharacter 和 addBubbles 都将在 UIthread 上运行，而 loadBackgroundDecorations 方法将在更新线程上运行。这两个线程将在不同时间执行这些方法，这就是您看到一些不一致之处。

**修理：**

按照您想要的顺序将 addBubbles 和 addCharacters 放在同一个可运行文件中，它应该可以按预期工作。

# c++ - 为什么在类对象数组上调用 delete 而不是 delete[] 会导致堆损坏？

> ID：15073970
> 
> 赞同：1
> 
> 时间：2013-02-25T18:37:19.647
> 
> 标签：c++, windows, memory-management, destructor

考虑代码：

```
class A {
public:
    virtual ~A() {}
};

class B : public A {
public:
    ~B() {}
};

void main ()
{
    A * array = new A[100];
    delete array;
} 
```

在 Windows (MSVC 2010) 上，它会导致异常，因为`delete`调用`HeapValidate`，这表明堆已损坏。这是如何以及为什么会发生的？

我确实意识到`delete[]`应该在这里调用，当然这样就没有问题了。但是为什么会`delete`导致堆损坏呢？据我所知，它应该为第一个对象（`array[0]`或`*array`）调用析构函数，然后释放整个块。现实中会发生什么？

注意：如果类`A`只有默认析构函数，即我根本没有声明它的析构函数，则不会发生异常。不管析构函数是否是虚拟的。在调试和发布版本中。

PS是的，我知道这是未定义的行为。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-25T18:47:41.137

调用`delete`使用创建的指针是未定义的行为`new[]`。基本问题是调用`new[]`时需要分配额外的空间来存储数组中元素的数量，以便调用`delete []`时知道要销毁多少元素。

除了真实对象所需的空间外，库还将为管理数据分配空间。然后它将执行所有初始化并返回指向第一个元素的指针，该元素与从操作系统检索的内存块不对齐。

```
[header][element1,element2...]
^       ^
|       \_ pointer returned by new[]
|
\_ pointer returned by the allocator 
```

另一方面，`new`不要`delete`存储任何额外的信息。

当您调用`delete[]`它时，将指针移回，读取计数，调用析构函数并使用原始指针解除分配。当您调用 delete 时，它​​会调用单个对象的析构函数并将指针传递回分配器。如果指针是通过调用创建的`new[]`，则返回给分配器*的*指针与分配的指针不同，并且释放失败。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T18:38:26.857

因为它是未定义的行为。任何事情都有可能发生。

# algorithm - 从连续整数生成随机代码

> ID：15073971
> 
> 赞同：5
> 
> 时间：2013-02-25T18:37:22.640
> 
> 标签：algorithm, random, cryptography

我想从一个 32 位正整数生成一个 6 字符的字母数字代码（例如 A3SJ8D），其中序列中的每个代码看起来都与前一个不同。

1.  A3SJ8D
2.  G54FGS
3.  ...

此代码必须是可逆的，以便 G54FGS 可以转换回 2，例如（1:1 映射）。

这种“随机性”不是为了安全目的，而是为了非常简单的混淆。换言之，该方法不必是“安全的”。

**编辑**

澄清一下，我知道无符号 32 位整数 (2^32)-1 的最大可能值超过了使用 10 位数字和 26 个字母的 6 字符字母数字代码的最大可能值 (36^ 6)-1。因此，要编码的正整数不能超出由代码集可用字符数建立的界限。

## 回答！

**例子**

这是基于@nwellnhof 下面接受的答案的 Javascript 中的简单代码示例。

```
 var Skip32 = require('skip32').Skip32,
    key = "0123456789".split("").map(function(c) { return c.charCodeAt(0) }),
    cipher = new Skip32(key),
    codelen = 6,
    radix = 36,
    max = Math.pow(radix,codelen);

function numToCode(num) {
    while ((num = cipher.encrypt(num)) >= max) {}
    return num.toString(radix).toUpperCase();
}

function codeToNum(code) {
    var num = parseInt(code,radix);
    while ((num = cipher.decrypt(num)) >= max) {}
    return num;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T19:09:21.150

我会使用 SKIP32 密码，它是基于 Skipjack 的 32 位分组密码。只需选择一个随机密钥，加密整数，然后以 36 为基数输出结果。您可以在[此处](https://opensource.qualcomm.com/assets/dotc/skip32.c)找到 C 语言的实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T20:07:36.730

如果您将 1,2,3,... 乘以一个相当大的奇数整数并使用基数 36 转换为字符串，您将获得一系列看起来相当随机的代码。

例如，如果你乘以 123456789，你会得到以下 1、2、3、4 的序列：

```
1: 21i3v9
2: 4307qi
3: 64iblr
4: 860fh0 
```

要反转运算，请乘以乘法逆运算，例如 123456789 中的 102505021。

为了使序列看起来更“随机”，您可以使用异或或加法进一步打乱数字。

事实上，这就是伪随机数的[线性同余生成器的工作原理。](http://en.wikipedia.org/wiki/Linear_congruential_generator)

# cocoa - 在 Cocoa 应用程序中禁用撤消/重做

> ID：15073973
> 
> 赞同：6
> 
> 时间：2013-02-25T18:37:24.327
> 
> 标签：cocoa, undo, nsundomanager

我已经以标准方式（NSUndoManager）实现了撤消/重做，但无法弄清楚当我的应用程序处于特定状态时如何禁用撤消/重做。

用户在我的应用程序中绘制东西，当他们绘制的内容正在上传时，我禁用 UI，当然不希望用户能够撤消/重做。

我使用 NSView 的撤消管理器，所以我想一种方法可能是让该视图辞职第一响应者。还有其他方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T20:51:02.950

如果视图是第一响应者，您可以实现[`validateMenuItem:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Protocols/NSMenuValidation_Protocol/Reference/Reference.html#//apple_ref/occ/instm/NSObject/validateMenuItem%3a)协议以根据您当前的状态禁用或启用菜单项。

```
 - (BOOL)validateMenuItem:(NSMenuItem *)menuItem {
     SEL action = menuItem.action;

     if (action == @selector(undo:) ||
         action == @selector(redo:)) {
          return !uploadingImage;
     }
     return YES;
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T20:50:15.503

您可以完成撤消和重做

```
 - (void) removeAllActions; 
```

或删除针对特定目标的操作

```
 - (void) removeAllActionsWithTarget: (id) target; 
```

如果您只是想暂时禁用任何操作，保持撤消堆栈不变，只需使用 NSMenuValidationProtocol 禁用撤消/重做菜单项

```
 - (BOOL)validateMenuItem:(NSMenuItem *)menuItem; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T20:36:28.733

我能想到的最好的方法是让视图的`-undoManager`方法在上传期间返回 nil，这会将其从响应者链中删除，并导致该视图的撤消/重做选项被禁用。

（我没有对此进行测试，但我有 99% 的把握，当菜单验证菜单选项时，它会向您询问撤消管理器的视图。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-24T17:56:09.230

我有类似的情况，我想在应用程序处于特定状态时有条件地禁用某些撤消/重做操作（同时仍然允许撤消/重做其他操作）。

在视图上实现的方法`- (BOOL)validateMenuItem:(NSMenuItem *)item`对我不起作用（我在 10.12 上有一个基于文档的应用程序）。[根据https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/MenuList/Articles/EnablingMenuItems.html](https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/MenuList/Articles/EnablingMenuItems.html)上的文档：

> 如果响应者链中有一个对象实现了项目的操作，NSMenu 就会检查该对象是否实现了 validateMenuItem: 或 validateUserInterfaceItem: 方法。如果没有，则启用菜单项。如果是，则菜单项的启用状态由方法的返回值确定。

该视图必须添加一个撤消方法，该方法也可以做正确的事情。

当我探测响应者链时，我发现我的 NSWindow 是响应的对象`undo:`（尽管它不是文档化接口的一部分），所以我目前的计划是使用自定义 NSWindow 子类的实现，大致如下`validateMenuItem`：

```
#import "Window.h"

@implementation SBXWindow

- (instancetype)initWithContentRect:(NSRect)contentRect styleMask:(NSWindowStyleMask)style backing:(NSBackingStoreType)bufferingType defer:(BOOL)flag screen:(NSScreen *)screen
{
    self = [super initWithContentRect:contentRect styleMask:style backing:bufferingType defer:flag screen:screen];

    return self;
}

- (BOOL)validateMenuItem:(NSMenuItem *)item
{
    // Call super imeplementation as it appears to update the menu item title (and potentially other stuff)
    BOOL result = [super validateMenuItem:item];
    if (result == NO) {
        return NO;
    }

    if (item.action == @selector(undo:) || item.action == @selector(redo:)) {
        // Add custom logic here
    }

    return result;
}

@end 
```

但是有警告说这些`undo:` `redo:`方法没有实现。这些可以通过在 NSWindow 上创建一个类别来消除，例如：

```
@interface NSWindow (SBXUndoable)

- (void)undo:(id)sender;
- (void)redo:(id)sender;

@end 
```

不确定这样做是否有任何问题（我没有注意到任何问题），但它确实消除了警告。从那以后，我将该类更改为 Swift 类，它没有任何警告要处理。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-25T20:55:27.493

文档是你的朋友。NSUndoManager的[disableUndoRegistration](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSUndoManager_Class/Reference/Reference.html#//apple_ref/doc/uid/20000211-CHDBEBCE)方法名称中有“disable”。由您的应用程序的控制器决定何时禁用和重新启用撤消注册是合适的。

# java - Guice 等价于 Spring 的查找方法是什么？

> ID：15073978
> 
> 赞同：1
> 
> 时间：2013-02-25T18:37:46.027
> 
> 标签：java, guice, guice-3

Spring 查找方法让您有一个方法，每次调用它时都会返回一个对象的新实例。我阅读了 Guice 用户指南，并没有看到如何做到这一点的明显方法。我想要一些这样的代码：

```
@Inject
private FooInstanceFactory fooInstanceFactory;

//...
    Foo foo = fooInstanceFactory.getNewInstanceOfFoo();
//... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T18:39:42.450

这真的不是 Guice 做事的方式。你可以[注入 a`Provider<Foo>`](https://code.google.com/p/google-guice/wiki/InjectingProviders)并调用[`Provider#get()`](http://google-guice.googlecode.com/git/javadoc/com/google/inject/Provider.html#get%28%29)它，但*调用*代码不应该关心你是否每次都得到一个新实例。这是模块的配置需要担心的。

# debugging - 停止 Excel 切换到“对象”视图

> ID：15073988
> 
> 赞同：4
> 
> 时间：2013-02-25T18:38:09.303
> 
> 标签：debugging, vba, excel

我正在调试这个 VBA 脚本，每次我点击 RESET（蓝色小方块）时，它都会让我退出“代码视图”并让我回到“对象视图”。这真让人生气。有什么方法可以阻止这种行为吗？

截图：
对象视图：![http://img194.imageshack.us/img194/8101/objectview.jpg](../Images/a82fdf8c7108219da95be5cb28e3d41a.png)
代码视图：![http://img195.imageshack.us/img195/6628/codeview.jpg](../Images/f2c5924c936d808d33eab86f464448f1.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T20:19:53.593

从代码视图而不是用户窗体启动脚本执行将导致 Excel 在结束脚本后返回到代码视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T19:24:49.203

你无法改变行为。您可以按`F7`进入代码视图，这可能会使它稍微不那么烦人。

# svn - Subversion 合并失败，并显示“Entry for ... has no URL”

> ID：15073990
> 
> 赞同：0
> 
> 时间：2013-02-25T18:38:16.923
> 
> 标签：svn, merge, rollback

我正在尝试回滚一系列提交。假设我的工作副本是修订版 10，我想回滚修订版 4 到 7 中所做的所有更改。我正在尝试这样做：

```
svn merge -r 7:4 . 
```

这失败了：

> svn：“库”的条目没有 URL

在查看 SO 和 subversion 手册时，听起来这是由于缺少文件夹。我看到的解决这个问题的建议是在合并之前`svn cleanup`做。`svn update`我已经尝试过了，它没有任何区别。

任何人都有其他我可以尝试的东西，或者甚至更深入地了解它*为什么*会失败？我寻找了一个“详细”选项，`svn`但没有找到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T23:35:19.930

*   合并命令的格式为 clean: `merge SOURCE[@REV] [TARGET_WCPATH]`，即：

您可以跳过**目标**定义（因为 . 是假定的，如果您在 WC 的根目录中就可以），但必须使用合并源

*   *在真正合并之前，*您始终可以使用`--dry-run`选项测试任何合并

**   您可以将大的反向合并拆分为较小的块并在命令中撤消一个修订`-c -N`* 

 ***PS**：从 p.1 开始，使用您的工作副本的 URL 作为源路径

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T19:06:15.047

问题是我在尝试进行合并之前对文件进行了本地修改，尽管我之前已经进行了更新。我恢复了文件并重试了合并，按预期工作。*

# mysql - MySQL if 语句失败

> ID：15073991
> 
> 赞同：0
> 
> 时间：2013-02-25T18:38:18.653
> 
> 标签：mysql

我有一个名为 tableExists 的函数。它可用于检查表是否存在。我想在数据库升级脚本中使用它。我可以使用这样的功能：

```
select myDb.tableExists('myDb', 'someTable') as cnt into @exists; 
```

并看到这样的结果：

```
mysql> select @exists;
+---------+
| @exists |
+---------+
|       1 |
+---------+ 
```

现在，我想在 If 语句中使用它，然后是 create table 语句。但是，我遇到了 if 的问题。以下是我要测试的内容：

```
mysql> IF (@exists = 1) THEN
    -> select 'exists'
    -> END IF;
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the
right syntax to use near 'IF (@exists = 1) THEN
select 'exists'
END IF' at line 1 
```

我在这里想念什么？这应该很简单。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T18:40:14.817

你只能使用`IF`里面的一个存储过程。

有效的选择语句将是：

```
SELECT CASE (@exists) WHEN 1 THEN 'exists' END as DoesItExist 
```

如果您将案例用作存储过程中的独立元素，则需要以`end case`任何方式结束它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T18:41:21.140

为什么不直接`IF NOT EXISTS`在`CREATE TABLE`查询中使用并省去所有这些麻烦：

```
CREATE TABLE new_table IF NOT EXISTS
... {table definition} 
```

如果表已经存在，则不会发生任何事情。