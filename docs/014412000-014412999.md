# StackOverflow 问答 14412000-14412999

# php - 用于文件上传的 jQuery 进度条

> ID：14412002
> 
> 赞同：0
> 
> 时间：2013-01-19T07:07:46.613
> 
> 标签：php, javascript, jquery, html, css

我面临一个非常奇怪的问题。

事情是，我制作了一个带有进度条指示的文件上传表单。我使用了这个脚本： [Malsup jQuery Form](http://malsup.github.com/jquery.form.js)

它工作得很好。在我的本地主机中，进度指示为浅绿色（Chrome 和 Firefox），然后我将这些文件上传到我的服务器。现在问题来了。

通常，我从不使用这种直接来源来链接脚本，我复制脚本，将其放在我的 js 目录中并工作，这样即使将来上传者删除它，我的网站功能也不会停止。所以，我保存了那个 js 文件并上传到这里： [A copy of the JS file in my site](http://ankursinha.net/TestSite/bootstrap/js/jqupload.js)。但是脚本停止工作，上传时没有显示进度。（我有一种奇怪的感觉，可能是链接到上传者的github帐户的那个JS文件中有一些API或其他一些东西）。我想知道为什么会发生这种情况以及发生这种情况时该怎么办。

另一个问题是，上传到我的服务器后，进度条颜色自己变成了蓝色（可能是因为bootstrap，我的感觉很奇怪），但是当我使用内联样式并将颜色设置为黑色时，它仍然是蓝色的。

所以我想要的是，如何让脚本与我服务器上的脚本一起工作，以及如何将上传进度条的颜色从蓝色更改为黑色。

这是我网站的链接：[带进度条的文件上传](http://ankursinha.net/TestSite/fileshare/upload_file.php)（请不要上传大于 3 MB 的文件，仅支持图片、zip、rar 和 office 文件）

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T07:52:44.697

试试[9Lessons](http://www.9lessons.info/2012/04/file-upload-progress-bar-with-jquery.html)发布的这个脚本，它是一个非常简单的教程 + 实现，因此您可以根据自己的选择对其进行配置，而无需依赖第 3 方脚本。

# ios - 我可以将三个图像合并为一个按钮的背景图像吗？

> ID：14412005
> 
> 赞同：1
> 
> 时间：2013-01-19T07:08:37.693
> 
> 标签：ios, button, background, uibutton, background-image

在这里，我遇到了一种情况，我需要添加三个图像来制作一个按钮。

我们有图像的三个部分，左桅杆部分、中间部分和右端部分。

图片左侧 -> 图片![按钮的左侧部分。](../Images/befaa32a8970ed8a754aeb2ce3e5875c.png)中间 -> 图片![按钮的中间部分。](../Images/df9711a0c3b4548c79d2f9aaf1fb4074.png)右侧 ->![按钮的右侧部分。](../Images/d832945fae3998f09dd8b4fbd5163ca3.png)

由于中间的文本，即按钮的标题因按钮而异，我不想每次都创建具有不同尺寸的单独图像。我认为应该有一种方法可以合并这些按钮以根据所提供按钮的宽度制作一个完整的按钮。

![在此处输入图像描述](../Images/fda4550836cf24fcc47b900705ad4cb8.png)

完成后，完成按钮应如下所示。

我希望你得到我需要的东西。请提出一些解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T08:05:50.957

为此，您使用可拉伸图像。

您制作的图像将是具有左侧、中间和右侧部分的单个图像。

中间部分只需要一个像素宽。（想象一下你的按钮会是什么样子，两端之间只有一个很小的空间。这就是你的形象。

然后你使用这个代码......

```
UIImage *image = [UIImage imageNamed:@"MyImage"];

UIImage *stretchableImage = [image stretchableImageWithLeftCapWidth:10 topCapHeight:0];

[myButton setBackgroundImage:stretchableImage forState:UIControlStateNormal]; 
```

然后，这将获取该窄图像并在您的大写宽度之后获取像素（即本示例中的 10），并且它将重复该单个像素所需的次数以获得按钮的完整宽度。

然后，无论按钮大小，您都可以在任何地方重复使用此单个图像。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-19T09:44:56.197

您可以使用按钮标题标签来设置文本，同时保持背景图像通用。

例如： - 作品

```
 [btn setTitle:@"something" forState:UIControlStateNormal];
      [btn setTitle:@"something" forState:UIControlStateHighlighted];
      [btn setTitle:@"something" forState:UIControlStateDisabled];
      [btn setTitle:@"something" forState:UIControlStateSelected]; 
```

您可以使用 setImage:forState 方法或 setBackgrounImage:forState 将图像设置为按钮

例如：-
btnImage = [UIImage imageNamed:@"image.png"]; [btnTwo setImage:btnImage forState:UIControlStateNormal]; //或设置为背景图片

```
 [btnTwo setBackgroundImage:[UIImage imageNamed:@"name.png"] forState:UIControlStateNormal]; 
```

您可以使用 UIButton 的 font 属性来使用图像中使用的不同字体

例如：- btn.titleLabel.font = [UIFont systemFontOfSize:size];

```
 //OR 
```

您还可以使用类似的方式设置字体大小和字体样式。它比你要求的要多一点，但是嘿，这到底是什么......

```
 [btn.titleLabel setFont:[UIFont fontWithName:@"Helvetica-Bold" size:13.0]]; 
```

而且...如果您感觉活泼，可以通过实现此代码然后检查 xCode 调试器中的输出来找到可用字体列表。

代码：

```
 NSArray *familyNames = [[NSArray alloc] initWithArray:[UIFont familyNames]];
      NSArray *fontNames;
      NSInteger indFamily, indFont;
      for (indFamily=0; indFamily<[familyNames count]; ++indFamily)
      {
      NSLog(@"Family name: %@", [familyNames objectAtIndex:indFamily]);
      fontNames = [[NSArray alloc] initWithArray:
        [UIFont fontNamesForFamilyName:
        [familyNames objectAtIndex:indFamily]]];
      for (indFont=0; indFont<[fontNames count]; ++indFont)
      {
         NSLog(@"    Font name: %@", [fontNames objectAtIndex:indFont]);
      }
      } 
```

# objective-c - 子视图随着自动布局消失

> ID：14412012
> 
> 赞同：0
> 
> 时间：2013-01-19T07:09:06.750
> 
> 标签：objective-c, uiview, ios6, autolayout, interface-builder

我刚刚在界面构建器（基本的单视图应用程序）上将 UIView 作为子视图添加到主 UIView。如果不设置任何约束，我的子视图就会消失。

```
subview's frame = (0 0; 320 0); 
```

这是为什么？

如果我尝试添加一些约束，例如要固定的尾随空格、前导空格、顶部空间和底部空间，我的视图仍然会消失。

我该如何解决这个问题？

谢谢你。

只是为了澄清一点，我创建了一个测试项目（单视图应用程序），并在主视图中添加了 2 个子视图，如图所示。我没有更改任何默认约束。您可以在图像的日志中看到错误。 ![测试项目](../Images/f87744caa46e7857050d15b51b6beadb.png)

日志：

```
**2013-01-19 17:16:02.435 Test[8871:c07] Unable to simultaneously satisfy constraints.
    Probably at least one of the constraints in the following list is one you don't want. Try this: (1) look at each constraint and try to figure out which you don't expect; (2) find the code that added the unwanted constraint or constraints and fix it. (Note: If you're seeing NSAutoresizingMaskLayoutConstraints that you don't understand, refer to the documentation for the UIView property translatesAutoresizingMaskIntoConstraints) 
(
    "<NSAutoresizingMaskLayoutConstraint:0x106178c0 h=--- v=--- V:[UIWindow:0x9917040(480)]>",
    "<NSLayoutConstraint:0x106159e0 UIView:0x991a5a0.bottom == UIWindow:0x9917040.bottom>",
    "<NSLayoutConstraint:0x991ab00 V:|-(518)-[BottomView:0x9919c90]   (Names: '|':UIView:0x991a5a0 )>",
    "<NSLayoutConstraint:0x10615960 V:|-(20)-[UIView:0x991a5a0]   (Names: '|':UIWindow:0x9917040 )>",
    "<NSLayoutConstraint:0x991aa80 BottomView:0x9919c90.bottom == UIView:0x991a5a0.bottom>"
)

Will attempt to recover by breaking constraint 
<NSLayoutConstraint:0x991aa80 BottomView:0x9919c90.bottom == UIView:0x991a5a0.bottom>

Break on objc_exception_throw to catch this in the debugger.
The methods in the UIConstraintBasedLayoutDebugging category on UIView listed in <UIKit/UIView.h> may also be helpful.** 
```

约束： ![在此处输入图像描述](../Images/ecedd015f68741a4a27157973f16fed8.png)

这也是模拟器上的结果： ![在此处输入图像描述](../Images/ead0eb29d378b9eded783c02d288c2c7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T11:06:05.707

了解这些日志是一种很好的做法，但如果您要使用 Autolayout，则必须阅读此内容。每个人都说它很简单，但我个人认为它并不简单。

[Apples AutoLayout 编程指南](https://developer.apple.com/library/mac/#documentation/UserExperience/Conceptual/AutolayoutPG/Articles/Introduction.html)

请阅读本指南，尤其是调试部分。

作为一个非常非常普遍的规则，如果你要添加一个视图，那么你需要关闭视图的 autoresizingmasks（Spring 和 struts）。将视图添加为子视图并为其提供 2 或 3 个约束。在你上面的例子中，你会给它一个约束，它应该有一个左边或前导空间到超级视图 0。一个顶部空间到超级视图 0 和宽度 320。

编辑; 这是添加视图的示例；请注意，您不需要创建框架。约束可能有点奇怪。第一个将视图放在超级视图的中心。第二个给它一个 200 的宽度。下一个方法是垂直约束，它将视图放在底部并使其高 2。

```
 UIView *sView = [[UIView alloc] init];
[sView setTranslatesAutoresizingMaskIntoConstraints:NO];
[superView addSubview:sView];

[superView addConstraint:[NSLayoutConstraint constraintWithItem:sView
                                                 attribute:NSLayoutAttributeCenterX
                                                 relatedBy:NSLayoutRelationEqual
                                                    toItem:superView
                                                 attribute:NSLayoutAttributeCenterX
                                                multiplier:1.0
                                                  constant:0]];

[superView addConstraint:[NSLayoutConstraint constraintWithItem:sView
                                                             attribute:NSLayoutAttributeWidth
                                                             relatedBy:NSLayoutRelationEqual
                                                                toItem:Nil
                                                             attribute:NSLayoutAttributeWidth
                                                            multiplier:1.0
                                                              constant:200]];

[superView addConstraints:[NSLayoutConstraint
                                  constraintsWithVisualFormat:@"V:[sView(2)]|"
                                  options:0
                                  metrics:nil
                                  views:NSDictionaryOfVariableBindings(sView)]]; 
```

# sql - SQL Server 2008 排序很慢

> ID：14412016
> 
> 赞同：1
> 
> 时间：2013-01-19T07:10:26.373
> 
> 标签：sql, sql-server, database, sorting

全部，

我有一个包含大约 250000 条记录的用户表。我有以下查询（请注意，我是 SQL 新手），但执行需要很长时间。我检查了执行计划，执行时间的 %60 被 2 种占用。

```
SELECT TOP 50
    Flows_Users.UserName,
    Flows_Users.UserID,
    Flows_Users.ImageName,
    Flows_Users.DisplayName,
    Flows_UserBios.bio,
    FlowsCount = (
        SELECT Count(1)
        FROM Flows_Flows
        WHERE UserID = Flows_Users.UserID
            AND Flows_Flows.Active = '1'
    ),
    BeatsCount = (
        SELECT Count(1)
        FROM Flows_Beats
        WHERE UserName_ID = Flows_Users.UserID
            AND Flows_Beats.Active = '1'
    ),
    FollowersCount = (
        SELECT Count(1)
        FROM Flows_Follow
        WHERE FOLLOWING = Flows_Users.UserID
    ),
    FollowingCount = (
        SELECT Count(1)
        FROM Flows_Follow
        WHERE FOLLOWER = Flows_Users.UserID
    ),
    ISNULL(SUM(Flows_Flows_Likes_Dislikes.[Like]), 0) AS Likes,
    ISNULL(SUM(Flows_Flows_Likes_Dislikes.Dislike), 0) AS DisLikes
FROM Flows_Users
LEFT JOIN Flows_Flows
    ON Flows_Users.UserID = Flows_Flows.UserID
LEFT JOIN Flows_UserBios
    ON Flows_Users.UserID = Flows_UserBios.userid
LEFT JOIN Flows_Flows_Likes_Dislikes
    ON Flows_Flows.FlowID = Flows_Flows_Likes_Dislikes.FlowID
WHERE Flows_Users.UserID = Flows_Users.UserID
GROUP BY Flows_Users.UserID,
    Flows_Users.UserName,
    Flows_Users.ImagePath,
    Flows_Users.ImageName,
    Flows_Users.DisplayName,
    Flows_UserBios.bio
ORDER BY
    [Likes] DESC,
    [Dislikes] ASC,
    FlowsCount DESC 
```

我知道这是一团糟，但是当桌子只有数万张时，它就完成了工作。有什么办法可以让这更快吗？现在执行最多需要 5-10 分钟。这也在一个存储过程中，我觉得我有需要索引、索引的列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T09:31:02.410

正如@PreetSanght 建议的改变

这部分

```
FlowsCount = (
    SELECT Count(1)
    FROM Flows_Flows
    WHERE UserID = Flows_Users.UserID
        AND Flows_Flows.Active = '1'
),
BeatsCount = (
    SELECT Count(1)
    FROM Flows_Beats
    WHERE UserName_ID = Flows_Users.UserID
        AND Flows_Beats.Active = '1'
),
FollowersCount = (
    SELECT Count(1)
    FROM Flows_Follow
    WHERE FOLLOWING = Flows_Users.UserID
),
FollowingCount = (
    SELECT Count(1)
    FROM Flows_Follow
    WHERE FOLLOWER = Flows_Users.UserID
), 
```

变成这样的东西

```
sum(case when Flows_Flows.Active = '1' then 1 else 0 end) 
over (partition by UserID order by Flows_Flows.UserID) as FlowsCount,

sum(case when Flows_Beats.Active = '1' then 1 else 0 end) 
over (partition by UserName_ID order by Flows_Flows.UserID) as BeatsCount,

count(1) over(parition by FOLLOWING order by Flows_Flows.UserID) as FollowersCount,
count(1) over(parition by FOLLOWER order by Flows_Flows.UserID) as FollowingCount, 
```

我认为您
应该阅读有关窗口函数和 over() 子句的想法

如果您想要整个查询发布一些示例数据和表架构

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T09:18:41.597

试试这个改动，因为我没有那些表，你可能需要修补它。验证后，检查执行计划并查找表扫描。然后添加索引。如果数字索引很大，请考虑包含列。我个人会将其修改为视图而不是存储过程，但这是我的偏好。

有人曾经告诉我，计算 * 实际上稍微好一些，但那是在 SQL Server 2000 天里，不确定是否仍然相关。

如果可能，尽可能将左连接修改为内连接。IE。我假设用户没有被硬删除，因此会修改用户 ID 加入到内部并在必要时过滤禁用的帐户。

```
 SELECT TOP 50
    Flows_Users.UserName,
    Flows_Users.UserID,
    Flows_Users.ImageName,
    Flows_Users.DisplayName,
    Flows_UserBios.bio,
    a.FlowsCount,
    b.BeatsCount,
    c.FollowersCount,
    d.FollowingCount,
    ISNULL(SUM(Flows_Flows_Likes_Dislikes.[Like]), 0) AS Likes,
    ISNULL(SUM(Flows_Flows_Likes_Dislikes.Dislike), 0) AS DisLikes
FROM Flows_Users
LEFT JOIN     (    SELECT Count(*) FlowCount
        FROM Flows_Flows
        WHERE UserID = Flows_Users.UserID
            AND Flows_Flows.Active = '1') a
LEFT JOIN  (SELECT Count(*) as 
        FROM Flows_Beats
        WHERE UserName_ID = Flows_Users.UserID
            AND Flows_Beats.Active = '1') b
LEFT JOIN  (SELECT Count(*) as FollowersCount
        FROM Flows_Follow
        WHERE FOLLOWING = Flows_Users.UserID) c
LEFT JOIN  (
        SELECT Count(*) as FollowingCount
        FROM Flows_Follow
        WHERE FOLLOWER = Flows_Users.UserID) d
LEFT JOIN Flows_Flows
    ON Flows_Users.UserID = Flows_Flows.UserID
LEFT JOIN Flows_UserBios
    ON Flows_Users.UserID = Flows_UserBios.userid
LEFT JOIN Flows_Flows_Likes_Dislikes
    ON Flows_Flows.FlowID = Flows_Flows_Likes_Dislikes.FlowID
WHERE Flows_Users.UserID = Flows_Users.UserID
GROUP BY Flows_Users.UserID,
    Flows_Users.UserName,
    Flows_Users.ImagePath,
    Flows_Users.ImageName,
    Flows_Users.DisplayName,
    Flows_UserBios.bio
ORDER BY
    [Likes] DESC,
    [Dislikes] ASC,
    FlowsCount DESC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T09:24:16.603

实现其他建议后，将查询转换为存储过程。这样，服务器不必在每次运行查询时都创建执行计划。

# jquery - jquery，如何在另一个函数结束后立即运行一个函数

> ID：14412026
> 
> 赞同：6
> 
> 时间：2013-01-19T07:11:19.410
> 
> 标签：jquery, function

*注：重写问题：

我正在尝试在单个函数调用**之外编写以下内容：**

例子：

```
函数 f1(){
    做某事1
}
函数 f2(){
    做某事2   
}

运行功能 1
完成后
运行功能 2

```

**（有关 jsfiddles，请参阅下面的评论）**

问题是，盒子是同时加载的。行为应该是，加载红色，完成后加载绿色。

如果这不是jQuery中常用的方法，请告诉我，也许我只是在追鬼……

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-20T10:57:37.503

取决于功能。

## 简短的回答：

对于**同步**函数：只需一个接一个地调用它们。

对于**异步**函数：取决于使其异步的原因。

jQuery动画？从动画的方法或 fx 队列的 Promise 对象定义回调参数。

setTimeout/setInterval/别的什么？很可能需要重写这些函数以提供回调或 Deferred/Promise 对象。

有关示例，请参[见此](http://jsfiddle.net/zarjay/42PhM/)或[此](http://jsfiddle.net/zarjay/42PhM/2/)。

## 长答案：

根据您评论中的 jsFiddles，您拥有以下两个功能：

```
function firstFunction(){
    $(".one").fadeIn(1000).delay(2000).fadeOut();
}
function secondFunction(){
    $(".two").fadeIn(1000).delay(2000).fadeOut();
} 
```

您想`secondFunction`在 之后运行`firstFunction`，并且您不希望篡改这些功能。如果是这种情况，我只能想到一个解决方案：从正在制作动画的元素中获取一个[Promise 对象](http://api.jquery.com/promise/)`firstFunction`，然后定义`secondFunction`为成功处理程序：

```
firstFunction();
$('.one').promise().then(secondFunction); 
```

[jsFiddle](http://jsfiddle.net/zarjay/42PhM/)

`promise()`返回一个绑定到该元素当前动画状态的 Promise 对象。`$('.one').promise().then(secondFunction)`本质上是在说“我保证`secondFunction`在当前动画`.one`完成后运行。

如果你愿意篡改现有的函数，你也可以作为 inside 的回调参数调用，`secondFunction`但这不是一个非常优雅的解决方案。`fadeOut``firstFunction`

如果你愿意重写你的函数，理想的解决方案是使用 Deferreds 和 Promises 来驯服你的异步函数。这是一个快速入门：

*   在 jQuery 中，[Deferred](http://api.jquery.com/category/deferred-object/)对象是一个特殊的对象，可用于定义函数的成功/失败状态。你在你的函数中使用它。
*   [Promise](http://api.jquery.com/deferred.promise/)对象是一个特殊的对象，可用于将回调添加到这些成功/失败状态。你在你的函数之外使用它。

使用这些工具，您可以重写函数以指定它们何时“完成”，并且您可以让函数外部的代码知道它们何时（并在之后执行）完成。

重写为使用 Deferred 和 Promise，代码如下所示：

```
function firstFunction(){
    var deferred = $.Deferred();
    $(".one").fadeIn(1000).delay(2000).fadeOut(function() {
        deferred.resolve();
    });
    return deferred.promise();
}
function secondFunction(){
    var deferred = $.Deferred();
    $(".two").fadeIn(1000).delay(2000).fadeOut(function() {
        deferred.resolve();
    });
    return deferred.promise();
}

firstFunction().then(secondFunction); 
```

[jsFiddle](http://jsfiddle.net/zarjay/42PhM/1/)

如果您的所有函数都是这样编写的，您可以控制它们的执行顺序并使用[`then()`](http://api.jquery.com/deferred.then/). 这是一个更彻底的例子：

```
function one(){
    var deferred = $.Deferred();
    $(".one").fadeOut(500, function() {
        $(this).appendTo('body').fadeIn(500, function() { deferred.resolve(); });
    });
    return deferred.promise();
}

function two(){
    var deferred = $.Deferred();
    $(".two").fadeOut(1500, function() {
        $(this).appendTo('body').fadeIn(500, function() { deferred.resolve(); });
    });
    return deferred.promise();
}

function three(){
    var deferred = $.Deferred();
    $(".three").fadeOut(1000, function() {
        $(this).appendTo('body').fadeIn(500, function() { deferred.resolve(); });
    });
    return deferred.promise();
}

function four(){
    var deferred = $.Deferred();
    $(".four").fadeOut(750, function() {
        $(this).appendTo('body').fadeIn(500, function() { deferred.resolve(); });
    });
    return deferred.promise();
}

function five(){
    var deferred = $.Deferred();
    $(".five").fadeOut(600, function() {
        $(this).appendTo('body').fadeIn(500, function() { deferred.resolve(); });
    });
    return deferred.promise();
}

one()
    .then(two)
    .then(three)
    .then(four)
    .then(five); 
```

[jsFiddle](http://jsfiddle.net/zarjay/42PhM/2/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-20T02:22:28.530

延期是一种选择。您始终可以执行以下操作：

```
$.when(firstFunction()).then(secondFunction); 
```

唯一的技巧是在 firstFunction 中，您需要执行以下操作：

```
function firstFunction(){
    var deferred = $.Deffered();

    $.get(url,function(r){
        deferred.resolve();
    });

    return deferred;
} 
```

when 函数将等到 firstFunction 调用返回的 deferred 被解决。一旦延迟被解决（在 ajax 成功回调中），'.then' 语句将触发，调用你的 secondFunction。

jQuery 文档很好地解释了 Deferred API。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-19T07:14:18.353

您可以简单地在第一个函数的末尾调用第二个函数。

```
 $(document).ready(function() {

  function firstFunction(){
    alert("this is the first function!");
    secondFunction();
  }
  function secondFunction(){
    alert("this is the second function!");
  }

  firstFunction();
}); 
```

[小提琴](http://jsfiddle.net/SCKTV/2/)

或者，如果您不希望每次调用第一个函数时都调用第二个函数，您可以简单地按顺序调用它们

```
firstFunction();
secondFunction(); 
```

这是有效的，因为它会等到`firstFunction`完成后再继续`secondFunction` [小提琴](http://jsfiddle.net/SCKTV/3/)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-19T07:29:20.127

你可以使用 jquery Callbacks 函数，从 v1.7up

```
var callbacks = $.Callbacks();
callbacks.add( firstFunction );
callbacks.add( secondFunction );
callbacks.fire( ); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-19T07:14:03.970

代替

```
 firstFunction(function(){
        secondFunction();
    }); 
```

写

```
firstFunction();
secondFunction(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-07-10T10:25:26.887

我最近遇到了这个问题。如果您有一堆执行异步操作的函数，只需将它们全部返回一个 Deferred，您可以在函数异步作业完成时手动解决它。然后您可以将函数放在一个数组中并按顺序运行它们：

```
// Sample asynchronous function that returns Deferred
var f = function(name){
    console.log('Function root start', name);
    var d = $.Deferred();
    d.done(function(result){
        console.log('Async work finish', name, result);
    });

    setTimeout(function(){
        setTimeout(function(){
            d.resolve('Hello');
        }, 200);
    }, 1000);

    console.log('Function root finish', name);
    return d;
};

// Array with functions
var defs = [];
defs.push(f.bind(null, 1));
defs.push(f.bind(null, 2));
defs.push(f.bind(null, 3));

// Recursive sequential calling
var i = 0;
var runAtIndex = function (i) {
    i < defs.length && defs[i]().done(function() { runAtIndex(i + 1); });
}
runAtIndex(i); 
```

# javascript - SVG 可以包含使用 javascript 的音频吗？

> ID：14412027
> 
> 赞同：9
> 
> 时间：2013-01-19T07:12:08.713
> 
> 标签：javascript, audio, svg

我有一个带有一些基本 javascript 交互性的 SVG，我也希望能够将一些音频放入其中。

澄清：

*   这适用于本身的 SVG，而不是在 HTML 中内联
*   我宁愿避免使用 javascript 库，但如果有必要我可以。

关于如何实现这一点的任何见解？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-19T08:55:42.090

SVG 1.2 Tiny 中定义了SVG[`<audio>`](http://www.w3.org/TR/SVGTiny12/multimedia.html#AudioElement)和`<video>`元素标签。Opera 支持它们，但目前还没有其他 UA 支持。

除了 IE 9/10 之外，适用于大多数地方的解决方案是使用`<foreignObject>`带有 html`<audio>`元素的元素作为子元素。

如果您需要 IE9/10 支持，我认为没有一个好的答案，因为它不支持`<foreignObject>`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-21T09:55:02.360

如果您需要一个支持 HTML5 音频的浏览器，那么可以只将音频元素放在 svg 中（对音频元素及其子元素使用 XHTML 命名空间）。上次我尝试它不需要 foreignObject 包装器。[这是一个](http://xn--dahlstrm-t4a.net/svg/audio/html5-audio-in-svg.svg)展示如何做到这一点的示例（适用于 chrome、firefox 和 opera）。

也可以使用 javascript 创建 HTML5 音频元素并在 SVG 中使用它们。

# javascript - 如何在不获取 Mongoose 中的父级的情况下对子文档执行操作？

> ID：14412029
> 
> 赞同：1
> 
> 时间：2013-01-19T07:12:36.920
> 
> 标签：javascript, node.js, mongodb, mongoose

现在，如果我想删除子文档，我会这样做：

```
Post.findById(post_id).exec(function(err, post) {
  post.comments.remove({'_id': comment_id});
  post.save(function(err) {
    res.end("Hooray!");
  });
}); 
```

这对我来说似乎不是最优的，因为每次我删除评论时，整个帖子都会从数据库中获取，并且附加了很多东西。那么，是否可以在不获取父文档的情况下修改子文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T09:55:11.133

根据[文档](http://mongoosejs.com/docs/documents.html)，如果您想在不获取文档的情况下更新文档，则必须手动执行更新请求。就我而言，它将导致以下代码：

```
Post.update({'_id': post_id}, {$pull: {'comments': {'_id': comment_id}}}).exec(function(err){
  console.log('Hooray!');
}); 
```

这是一个很好的可行解决方案，但执行直接请求意味着验证不会像版本控制那样有效。

# image - 图像小部件的 Gtkmm 点击信号

> ID：14412032
> 
> 赞同：0
> 
> 时间：2013-01-19T07:12:57.360
> 
> 标签：image, click, gtkmm

在 Gtkmm 中，如何响应图像小部件上的点击事件？我的意思是图像小部件不支持像按钮小部件这样的 signal_clicked 功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T22:35:18.577

将图像放入`EventBox`并连接到其上的信号。

# android - 编辑文本未扩展到其背景

> ID：14412035
> 
> 赞同：-3
> 
> 时间：2013-01-19T07:13:25.410
> 
> 标签：android

![在此处输入图像描述](../Images/88f2de8dd26bf8826cde4db279232aae.png) 我在我的 xml 中使用以下代码，我想为我的 edittext 提供背景，背景图像约为 400*190 像素。. Edittext 只占用一行，而在其他部分没有发生任何事情。

如何设置我的 Edittext 占据我的背景图片，这样当我点击它的任何部分时，它应该弹出键盘。

```
 <RelativeLayout
    android:id="@+id/noteslayout"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginTop="5dp"
    android:layout_marginLeft="5dp"
    android:layout_marginRight="5dp" 
    android:background="@drawable/edittextnotes" > 

    <EditText
        android:layout_marginTop="5dp"
        android:layout_marginLeft="5dp"
        android:layout_marginRight="5dp"
        android:id="@+id/notes"         
        android:maxLines="5"
        android:capitalize="sentences"
        android:layout_width="250dp"
        android:layout_height="wrap_content"
        android:imeOptions="actionDone" />

</RelativeLayout> 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T07:55:08.620

尝试这个，

```
<RelativeLayout
android:id="@+id/noteslayout"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:padding="5dip"
android:background="@drawable/edittextnotes" > 

<EditText

    android:id="@+id/notes"         
    android:maxLines="5"
    android:capitalize="sentences"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:imeOptions="actionDone" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T07:45:18.077

你为什么不尝试设置`EditText`只有除了`RelativeLayout`以下的背景：

> ```
>  <EditText
>      android:layout_marginTop="5dp"
>      android:layout_marginLeft="5dp"
>      android:layout_marginRight="5dp"
>      android:id="@+id/notes"         
>      android:maxLines="5"
>       android:lines="5"       <---- set this lines property
>      android:background="@drawable/edittextnotes"    <----See this.
>      android:capitalize="sentences"
>      android:layout_width="250dp"
>      android:layout_height="wrap_content"
>      android:imeOptions="actionDone"/> 
> ```

# javascript - 如何在 JavaScript 中创建异步任务

> ID：14412036
> 
> 赞同：0
> 
> 时间：2013-01-19T07:13:36.540
> 
> 标签：javascript, android, android-asynctask, cross-platform

在我的 android 应用程序中，我调用了一种从 html 页面到 java 页面的 javascript 方法。

```
 this.start = function () 
 {       
     try 
     { 
          Mynamespace.myapi.getvalue("myvalue", { 
            onSuccess: function (data) 
            { 
               value= JSON.parse(data);
               alert("called"); 
             }, 
             onFailure: function (error) { } 
          }); 
      } 
      catch (err) { }
      if (value== null) { value= new Object(); 
    }; 
```

在上面，在我的 java 类中调用了**getvalue**方法并返回了一些值，但是在获取 OnSuccess/OnFailure 内部的值之前，调用了下面的行。`How to wait the method up to the callback is called?`

```
if (value== null) { value= new Object(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T07:19:14.563

```
private class LongOperation extends AsyncTask<String, Void, String> 
{
    protected void onPreExecute() 
    { 
        progressDialog = new ProgressDialog(activity.this); 
        progressDialog.setTitle("Processing...");
        progressDialog.setMessage("Please wait...");
        progressDialog.setCancelable(true);
        progressDialog.show();
    }

    protected String doInBackground(String... params) 
    {
        try 
        {
            //Getting data from server
        }
        catch (Exception e) {
            e.printStackTrace();
        }
        return null;
    }
    protected void onPostExecute(String result) 
    {
        progressDialog.dismiss();
    }
  } 
```

**这个怎么称呼**

```
ProgressDialog progressDialog;
LongOperation mytask = null;
mytask = new LongOperation();
mytask.execute(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T04:00:03.120

我已经对我的查询进行了更多分析。最后我得到了解决方案。`String that i have loaded with webview was having more single quotes so unable to load with webview`. 所以不是调用成功失败回调，而是调用下一行。

现在我在我的java类中用“\'”替换了单引号“\'”。工作正常。:-)

# asp.net - 我想从 Yahoo 的 API 中获取生日

> ID：14412043
> 
> 赞同：1
> 
> 时间：2013-01-19T07:14:12.350
> 
> 标签：asp.net, yahoo, yahoo-api

我正在使用 Yahoo API，但没有得到联系人的出生日期。我该怎么办？

我正在 asp.net 中创建应用程序，并且我还希望获取出生日期。这是我得到的 JSON 字符串的一部分：

```
created": "2012-04-16T16:08:30Z",
"updated": "2012-04-16T16:08:30Z",
"uri": "http://social.yahooapis.com/v1/user/RB5EYES5SQ6HZ22ZIHCJ5EIY5E/contact/33554861",
     "isConnection": "false",
     "id": "33554861",
     "fields": {
      "created": "2012-04-16T16:08:30Z",
      "updated": "2012-04-16T16:08:30Z",
      "uri": "http://social.yahooapis.com/v1/user/RB5EYES5SQ6HZ22ZIHCJ5EIY5E/contact/33554861/email/33555114",
      "id": "33555114",
      "type": "email",
      "value": "accounts@timeseo.com",
      "editedBy": "OWNER" 
```

# javascript - 写入服务器：使用带有 HTML5 Jquery/Javascript 的文本文件

> ID：14412045
> 
> 赞同：0
> 
> 时间：2013-01-19T07:14:18.847
> 
> 标签：javascript, jquery, html

我想知道是否可以使用 Javascript/Jquery、HTML5 写入服务器并将其存储在文本文件中。目的是，我正在制作一个 javascript/jquery 游戏，我想在不使用任何服务器端语言（php、asp 等）的情况下存储分数。非常感谢您的帮助，非常感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T07:18:32.630

HTML、JS、CSS，所有这些都是客户端。这意味着它在浏览器中运行，就是这样。

PHP 和 ASP 是服务器端的，这意味着代码在服务器上执行并将结果发送到客户端。

您需要一种客户端和服务器之间的通信方法。[您可以使用 JS ( AJAX](http://api.jquery.com/jQuery.ajax/) )发送请求，但您需要服务器上的某些东西来接收和处理它们。为此，您需要一些服务器端代码。

所以不，您不能仅使用客户端技术更新服务器上的数据。但是，您*可以*使用客户端脚本与服务器通信并告诉服务器端代码更新数据。

# visual-studio-2010 - 没有构造函数实例与参数列表匹配

> ID：14412047
> 
> 赞同：3
> 
> 时间：2013-01-19T07:14:59.773
> 
> 标签：visual-studio-2010, intellisense

我有问题`Intellisense`on `Visual Studio 2010`。

`Intellisense`不建议类构造函数的参数。虽然它适用于类方法。

```
class Window
{
    private:

        WindowImpl *Impl;

    public:

        static unsigned int WindowCount;

        Window();

        Window(unsigned int width, unsigned int height, const std::string &title, int x, int y, unsigned int style);

        void Create(unsigned int width, unsigned int height, const std::string &title, int x, int y, unsigned int style);

        ~Window();

        void Destroy();
}; 
```

错误：没有构造函数实例与参数列表匹配

```
Window mainWindow(100, 200 ... 
```

工作正常

```
mainWindow.Create(100, 200 ... 
```

没有编译错误，但`Intellisense`不显示（不建议）构造函数的参数并显示此错误。

* * *

![](../Images/3a0d27992bdb1399049ef6fecdce96c1.png)

我发现所有课程都存在这个问题。我希望截图能帮助理解我的意思。我试过`Visual Assist X`了，但没有帮助。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T08:05:17.287

我已经在我的 VS 2010 中测试了您的示例，并且 Intellisense 对两条线都运行良好。请注意，如果函数重载，IntelliSense 会显示第一个变体，您可以按向上/向下箭头查看其他变体。 ![在此处输入图像描述](../Images/d7ceccb86f05396ac3ecf3072938c6ff.png)

众所周知，IntelliSense 有时会卡住，不索引某些类或显示错误的结果。在这种情况下，您可以关闭您的项目并删除智能感知数据库。当您重新打开项目时，它会从头开始创建，希望能取得更大的成功。

此外，如果您在 VS 中编写大量 C++，请考虑使用 Visual Assist X，它替代了大部分 IntelliSense 功能，但性能要好得多。（我不隶属于番茄软件，只是爱上了这个工具。）

# c# - C#等待异步操作完成

> ID：14412048
> 
> 赞同：2
> 
> 时间：2013-01-19T07:14:59.877
> 
> 标签：c#, multithreading, asynchronous, worker

我想知道对于我正在尝试做的事情，最好的方法是什么。我的应用程序有一个按钮，用于启动后台下载操作，然后根据下载的文件执行一些操作。

这就像“一旦下载了必要的数据，游戏将很快开始”的情况，用户仍然可以使用主窗体。

```
private void btnStart_Click(object sender, EventArgs e)
{
    //execute some code

    Downloader.RunWorkerAsync(files); //this worker reports progress to the main form

    while (Downloader.IsBusy)
        Application.DoEvents();

    //execute some more code
} 
```

我知道这样做根本不好。

我无法同步执行下载代码，因为主窗体需要在下载操作期间保持响应。我也不能将最终代码放入下载完成事件中，因为它被程序的许多其他区域使用，并且必须保持“通用”下载系统。

那么，有没有办法做我想做的事？我对其他异步方法没有任何经验。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T07:18:45.533

如果你使用`BackgrounWorker`你必须正确配置它。BW 有`RunWorkerCompleted`你必须订阅的事件来处理你的异步工作的完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T07:19:29.013

I think you should use asynchronous programming features of the .net 4.5 framework (`await` and `async`).

refer to [async programming](http://msdn.microsoft.com/en-us/library/vstudio/hh191443.aspx)

# php - Laravel JSON 响应与 Eloquent

> ID：14412051
> 
> 赞同：0
> 
> 时间：2013-01-19T07:15:39.540
> 
> 标签：php, arrays, json, laravel, eloquent

我有三个表叫做线程，帖子，用户

线程得到

```
id
title
etc. 
```

帖子得到了

```
id
thread_id
user_id
post
post_date
etc. 
```

用户得到

```
id
username 
password
email
etc. 
```

当用户想要查看线程时，我只需使用发布数据调用 jquery ajax 请求来发送线程 id 并返回此代码：

```
Response::eloquent(Thread::find(Input::get('threadid'))->posts()->get()); 
```

这段代码完美地完成了他的工作，并通过相同的 thread_id 返回帖子。（后模型还通过查看 user_id 急切加载用户）。

然而，这段代码抓取了帖子和用户的每个属性，我的意思是 json、post_date、post_updatereason、user_password、user_email 表中的所有列。

我只想用 json 获取帖子、用户名和 post_date

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T13:13:03.303

您可以添加`public static $hidden = array('list', 'of', 'fields');`到扩展 Eloquent 的模型中。然后将不会返回您在数组中枚举的任何字段。有关详细信息[，请参阅文档](http://laravel.com/docs/database/eloquent#to-array)。

例如

```
class User extends Eloquent {
  public static $hidden = array('password', 'email');
} 
```

将返回没有`password`and的用户模型`email`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T07:49:37.520

如果您使用的是 laravel 3，这可能与版本 4 相同，您应该能够使用 get 方法指定您想要的列。

```
Response::eloquent(Thread::find(Input::get('threadid'))->posts()->get(['username','post_date'])); 
```

# java - Java继承（对不起，我不知道如何在标题中说清楚......）

> ID：14412055
> 
> 赞同：1
> 
> 时间：2013-01-19T07:15:54.143
> 
> 标签：java, class, inheritance

以下代码的输出是什么？

```
class A {
    public int data=5;
    private int pd = 6;

    public void print() {
        System.out.println(data+pd);
        f();
    }

    protected void f() {
        System.out.println(“A::f()”);
    }
}

class B extends A {
    public int data=2;
    private int pd = 3;

    public void print() {
        super.print();
        System.out.println(data+pd);
    } 

    protected void f() {
        System.out.println(“B::f()”);
    }
}

public class TestAB {
    public static void main(String[] args) {
        A a = new B();
        a.print();
        System.out.println(a.data);
    }
} 
```

输出是：

```
11
B::f()
5
5 
```

好吧，我所知道的是对象*a*属于*B*类。但是以下细节是如此令人困惑......有人可以解释在基类和继承类中定义的相同变量发生了什么吗？调用哪个*print()* ' 或*print()*？

感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T07:31:00.770

当您调用 时`a.print();`，将调用 的打印函数`class B`。希望您对此很清楚（多态性）。在 B 类的 print() 方法中，`super.print()`被调用，而后者又调用了 method `f()`。再次根据多态性原则，将调用**B 类的方法。** `f()`

多态性仅适用于函数。因此`System.out.println(a.data);`在 main 函数中只打印**`A class`**变量**5 而不是 2**。希望你明白这一点。

请参考这个链接：

[http://www.coderanch.com/t/392179/java/java/Polymorphism-data-members](http://www.coderanch.com/t/392179/java/java/Polymorphism-data-members)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T10:17:13.443

## “关于克隆”

好吧，由于一个大错误，您将无法理解：B 类是 A 扩展类。首先意味着有一个a类，仅此而已。

也许想象它是你自己的克隆，但没有太多指示下一步该做什么，但它已经可以像你一样走路和睡觉，但它不会说话，不知道如何吃饭或弹钢琴。所以这个可怜的家伙不会为自己存在很长时间，但你已经知道你在做什么：你所要做的就是克隆克隆并让下一个比第一个更好。第二个可以吃，喝和许多其他有趣的事情，但它不会说话。所以你创造了一个、两个和三个其他的。一个人可以和你的朋友交谈，并且很高兴在没有被喂食的情况下过上它的生活。接下来是做你所有的工作，最后一个会关灯。

让我们想想开始：你做了一个愚蠢的克隆，但它有两个特征——走路和睡觉。因为它是先锋状态，你可以称他为克隆A，甚至更好地称为A级克隆。

在您的下一次克隆操作中，您构建了成功的 B 类克隆。这个主要通过两个新优势扩展了 A 类克隆：吃和喝。为了能够做到这一点，您还将在哪里可以找到冰箱和酒吧的信息添加到 B 类克隆的寻路系统中。由于这个原因，您必须覆盖 A 类克隆的行走 dna。这怎么可能？

* * *

第一个克隆：

```
class CloneA
{
    void walk()
    {
        Position p = getRandomPosition();
        walkTo( p );
    };
    void sleep()
    {
        sleepy = sleepy - 1;
    }
    void main()
    {
        if ( itIsLate() )
            sleep();
        else
            walk();
    }
} 
```

它的主程序控制克隆何时休眠或何时四处走动。它使用了三种已知的方法：getRandomPosition()、walkTo(Position) 和 itIsLate()。你在旧手机上找到了这个实用的东西，然后把它交给了克隆，随着时间的推移，它必须做更多有意义的事情。例如，让我们看一下 B 类克隆。CloneB主要获得了另外两个能力：

```
void drink();
void eat(); 
```

正如您之前计划的那样，您不需要创建一个完整的新克隆，您已经有了一个完美的父母。这个继承了它的所有知识给新的。剩下的就是修改步行方法。否则它不会找到现在可以处理的物品的位置。

* * *

所以第二个的结构看起来是这样的：

```
class CloneB extends CloneA
{
    void drink() { thursty = thursty - 1; }
    void eat()   { hungry  = hungry  - 1; }

    @Override
    void walk()
    {
        if ( itIsEary() || itIsLate() )
        {
            Position fp = fridgePosition;
            walkTo( fp );
            eat();
            Position bp = barPosition;
            walkTo( bp );
            drink();
        }
        else
            super.walk();
    }
} 
```

CloneB 现在检查时间，每次它正在寻找一个新的位置去。如果它识别出迟到或（||）早它会记住冰箱和酒吧的位置并开始一个接一个地走到那里，吃东西，喝东西，当时间到时它会调用walk（） super.walk() 对其父 CloneA 的指令；这对你有好处，你不需要两次给出相同的命令。

当您查看这两种生物时，您会发现一些差异，但它们的大部分特征是相同的。也许您已经想到 CloneB 确实是 CloneA。任何使 CloneA 变为 CloneA 的标识符也由 CloneB 继承。更重要的是 - CloneB 可以照顾自己！可悲的是，CloneA 不可能永远是 CloneB。

如果您现在对它们都进行以下简单测试，您应该了解面向对象语言的主要规则之一：

*   把你的两个克隆人都放在一个只有一扇门的小房间里。
*   在一张纸上写下 CloneA 的名字，然后贴在门上。
*   告诉你的克隆人，只有这些克隆人才能进入天堂之门，名字是写在纸上的。
*   让自己进入天堂并重试几次实验。片刻之后，您可以确定：您看到 CloneA 或 CloneB 的机会为 50%。两者对未知对象的查找方法相同，而且都感觉像 CloneA，所以它是纯随机的。你现在也处于另一个劣势；两个克隆看起来相同，此时您唯一知道的是，输入的必须具有 CloneA 的属性。
*   第二天再来，把CloneB的名字写在贴在门口的纸上。你说对了。如果 CloneA 是诚实的克隆，它永远不会通过大门。你可以确定。这是一个克隆 B。

在 Java 中是完全一样的。您的克隆实例，让我们以相同的方式命名这些 cA 和 cB：

```
CloneA cA = new CloneA();
CloneB cB = new CloneB();

// assign cloneB instance to cloneA instance:
cA = cB;

// error by default:
cB = cA; 
```

如您编写的示例所示，您还可以执行以下操作（天堂方法）：

```
CloneA cA = new CloneB(); 
```

缺点：此时 cA 确实是 CloneB，但如果你想给 CloneB 特定的指令，这要么是不可能的，要么是不安全的。谁知道你度假时它是否还活着？

但那时你并不无助。你可以向克隆询问它的继承。同样在这里，他们可能无法告诉您或只是提供了错误的信息。知道他们可能是什么然后问他们是否是你要求他们的人通常是有利的。之后，您可以确定并与您的 CloneA 实例对话，因为它是 CloneB。例如：

```
CloneA cA = new CloneB();

if ( cA instanceof CloneB )
    ( CloneB ) cA.eat(); 
```

如果您不想再与他们互动，请不要在意。cA 的实例已被新的 CloneB 信息覆盖，如果您知道他的确切身份，则可以独立吃喝。您在上一个代码片段中所做的事情称为类型转换。另一种常用的方法是：

```
CloneB.class.cast( cA ).eat();

// or storing in a new variable for an easier later handling
CloneB cB = CloneB.class.cast( cA ); 
```

现在我们几乎忘记了最后三个实际克隆。但是每个克隆都只有一种扩展方法。你如何计划你的克隆文明不在我的范围内，Java 主要提供了一组丰富的替代方法来做同样的事情。为简单起见，假设您决定克隆 CloneB 三次。这三个克隆的任务差异太大，无法组合。在他们的第一个生日时，您会给他们一份历史礼物——他们的第一棵家谱：

```
 TalkerClone
                  /
CloneA  -  CloneB  -  WorkerClone
                  \
                     LightSwitchClone 
```

所以现在开始教他们：你们每个人都是无与伦比的，但你们都是克隆B和（大）克隆A的一部分……

最后我不应该忘记你的问题。也许您现在可以自己回答，但为了完整性：

```
class A {
    public int data=5;                // 13.
    private int pd = 6;

    public void print() {             // 6.
        System.out.println(data+pd);  // 7\. ( output "11" )
        f();                          // 8.
    }

    protected void f() {
        System.out.println(“A::f()”);
    }
}

class B extends A {                   // 2.
    public int data=2;
    private int pd = 3;

    public void print() {             // 4.
        super.print();                // 5.
        System.out.println(data+pd);  // 11\. ( output 5 )
    } 

    protected void f() {               // 9.
        System.out.println(“B::f()”);  // 10\. ( output "B::f()" )
    }
}

public class TestAB {
    public static void main(String[] args) {
        A a = new B();               // Command A; 1.
        a.print();                   // Command B; 3.
        System.out.println(a.data);  // Command C; 12\. ( output 5, 2nd )
    }
} 
```

如果您不确定命令 C, 12th 来自何处，请再次进行天堂实验。

我建议您告知自己有关修改器（公共、受保护等）的信息，以使继承对您的应用程序更有用。

祝你好运，与你的克隆有很多乐趣:)

# objective-c - 避免对依赖键进行不必要的 KVO 更新

> ID：14412060
> 
> 赞同：1
> 
> 时间：2013-01-19T07:16:37.577
> 
> 标签：objective-c, core-data, key-value-observing

我有一个要存储 CGRect 值的核心数据实体。因为没有对 Core Data 的 CGRect 支持，所以我只是将其拆分为四个浮点属性：x、y、宽度、高度。

为了让我更方便，我添加了一个自定义属性`frame`，它从四个浮点属性返回组合的 CGRect。顺便说一句，我正在使用发电机。

```
@interface ViewableData : _ViewableData

@property (nonatomic) CGRect frame;

@end

@implementation ViewableData

- (void)setFrame:(CGRect)frame {
    if (frame.origin.x != self.xValue)
        self.xValue = frame.origin.x;
    if (frame.origin.y != self.yValue)
        self.yValue = frame.origin.y;
    if (frame.size.width != self.widthValue)
        self.widthValue = frame.size.width;
    if (frame.size.height != self.heightValue)
        self.heightValue = frame.size.height;
}

- (CGRect)frame {
    return CGRectMake(self.xValue, self.yValue, self.widthValue, self.heightValue);
}

+ (NSSet *)keyPathsForValuesAffectingFrame {
    return [NSSet setWithObjects:ViewableDataAttributes.height, ViewableDataAttributes.width, ViewableDataAttributes.x, ViewableDataAttributes.y, nil];
}

@end 
```

它按我的预期工作，但我发现 KVO 观察者收到的通知次数超过了它需要的次数。设置一个框架可能会通知观察者 4 次。是不是要避免不必要的 KVO 更新通知？

* * *

**编辑**

看起来 Transformable 类型是一个很好的解决方案，但我仍然想知道更新依赖键路径的正确方法。另一个例子是拥有`fullName`一个依赖于`firstName`and的属性`lastName`。不过，如果我改变`fullName`了，我只希望观察者只收到一次通知而不是两次（一次`firstName`更改，一次`lastName`更改）。另一个问题是，在第一次通知时，状态不一致，因为只执行了部分更新。

我认为我原来的例子不够好。这个怎么样：

```
@interface Person : NSManagedObject

@property (copy, nonatomic) NSString fullName;
@property (copy, nonatomic) NSString firstName;
@property (copy, nonatomic) NSString lastName;    

@end

@implementation Person
@dynamic firstName;
@dynamic lastName;

- (void)setFullName:(NSString *)fullName {
    NSArray *names = [fullName componentsSeparatedByString:@" "];
    self.firstName = names[0];
    self.lastName = names[1];
}

- (CGRect)fullName {
    return [NSString stringWithFormat:@"%@ %@", self.firstName, self.lastName];
}

+ (NSSet *)keyPathsForValuesAffectingFrame {
    return [NSSet setWithObjects:@"firstName", @"lastName", nil];
}

@end 
```

那么如果我这样做

```
person = // get Person object
person.firstName = @"A";
person.lastName = @"B";
// person.fullName is now "A B"

person.fullName = @"C D"; 
```

在最后一行，观察者将看到拳头名称更新（全名“C B”，但这样的全名根本不存在，这可能会使我的应用程序崩溃）而不是姓氏更新（“C D”）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T11:53:12.647

关于你的第二个问题......恕我直言，你需要更仔细地考虑它。如果您只有 firstName 的观察者并且您更新 fullName 怎么办？你想通知观察者吗？

顺便说一句：我认为您应该使用`setPrimitiveValue:forKey:`并`primitiveValueForKey:`手动触发通知..

例如

```
- (void)setFullName:(NSString *)fullName {
    NSArray *names = [fullName componentsSeparatedByString:@" "];
    [self willChangeValueForKey:@"fullName"];
    [self setPrimitiveValue:names[0] forKey:@"firstName"];
    [self setPrimitiveValue:names[1] forKey:@"lastName"];
    [self didChangeValueForKey:@"fullName"];
} 
```

这样，您只会触发 fullName 的通知，而不是 firstName 和 lastName

编辑：好的..关于您的第一个问题（CGRect），如果您不想使用可变形的（即使这是它们的常见用途之一）并且您可以“强制”对矩形进行修改整体（也就是说，您永远不会调用 xValue 等。直接，您可以将 setFrame 编写为：

```
- (void)setFrame:(CGRect)frame {
    [self willChangeValueForKey:@"frame"];
    if (frame.origin.x != self.xValue)
        [self setPrimitiveValue:frame.origin.x forKey:@"xValue"];
    if (frame.origin.y != self.yValue)
        [self setPrimitiveValue:frame.origin.y forKey:@"yValue"];
    if (frame.size.width != self.widthValue)
        [self setPrimitiveValue:frame.size.width forKey:@"widthValue"];
    if (frame.size.height != self.heightValue)
        [self setPrimitiveValue:frame.size.height forKey:@"heightValue"];
    [self didChangeValueForKey:@"frame"];
} 
```

EDIT2：关于你的“全名”问题......我会创建一个只有名字和姓氏的人对象，然后是一个类别

```
#import "Person.h"

@interface Person (FullName)
@property (nonatomic, strong) NSString* fullName;
@end

//.m
#import "Person+FullName.h"

@implementation Person (FullName)
- (NSString*)fullName
{
   return [NSString stringWithFormat:@"%@ %@", self.firstName, self.lastName];
}

- (void)setFullName:(NSString*)fullName
{
    NSArray *names = [fullName componentsSeparatedByString:@" "];
    [self willChangeValueForKey:@"fullName"];
    [self willChangeValueForKey:@"firstName"];
    [self willChangeValueForKey:@"lastName"];
    [self setPrimitiveValue:names[0] forKey:@"firstName"];
    [self setPrimitiveValue:names[1] forKey:@"lastName"];
    [self didChangeValueForKey:@"lastName"];
    [self didChangeValueForKey:@"firstName"];
    [self didChangeValueForKey:@"fullName"];
} 
@end 
```

# excel - EXCEL 电子表格——逐项矩阵乘积

> ID：14412068
> 
> 赞同：0
> 
> 时间：2013-01-19T07:17:52.340
> 
> 标签：excel, matrix, excel-formula, formula, product

我有两个尺寸为 9 * 9 的表格。我想计算

对 j 求和(aij*bij)

只有一个公式的明显符号。

现在，我首先在每个单元格中计算一个 9*9 表，其中填充了 aij*bij，然后在一个新列中，我对这个 9*9 表中的值列进行求和。这是两步。我想一步一步做到这一点，以节省空间和时间。

什么是语法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T07:40:07.430

您应该能够使用 SUMPRODUCT 公式对列上的产品求和。

如果您的原始数组位于 A1:I9 和 K1:S9 范围内，则结果数组中的第一个条目将是 =SUMPRODUCT(A1:I1, K1:S1)。将此公式向下复制八行，即可得到其余的结果元素。

将所有元素的乘积相加会更容易： SUMPRODUCT(A1:I9,K1:S9)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T09:01:46.743

这里的另一种方法 - 使用数组`SUM`公式：`=SUM(A1:I1*K1:S1)`. 但是，当您将其键入单元格时，请按`CTRL`++`SHIFT`而`ENTER` **不是通常的** `ENTER`。结果，这个公式将显示为`{=SUM(A1:I1*K1:S1)}`- 括号表示这是一个数组公式。但是，不应手动添加它们。

@chuff 的答案是绝对正确的，我对此表示赞同，但使用数组公式至少有 1 个优势：使用它们，您可能会做更多的魔术，而这些魔术没有/几乎没有使用`SUMPRODUCT`或任何类似的函数实现。

另请参阅此处的**备注**部分：http: [//office.microsoft.com/en-001/excel-help/sumproduct-HP005209293.aspx](http://office.microsoft.com/en-001/excel-help/sumproduct-HP005209293.aspx)

将此示例文件用作两种解决方案的演示：[https ://www.dropbox.com/s/0xr8iif920uqpqf/SUMPRODUCT.xlsx](https://www.dropbox.com/s/0xr8iif920uqpqf/SUMPRODUCT.xlsx)

选择任何更适合您的解决方案！（：

# ajax - 返回递归 AJAX 调用结果的正确模式 (Microsoft AJAX)

> ID：14412069
> 
> 赞同：1
> 
> 时间：2013-01-19T07:17:58.920
> 
> 标签：ajax, sharepoint-2013, microsoft-ajax

我正在使用以下函数（为了模式检查而大量删除代码）从网站集中获取某个 SP.ListTemplateType 的所有列表。由于 MS AJAX 不包含 $promise 函数（据我所知），因此我正在创建一个队列，该队列随着调用的进行而递增，并随着调用的成功或错误返回而递减。

如果第一次调用在第二次调用之前返回，这似乎（可能）容易出错。到目前为止，即使在 20 多次递归的情况下，第一个调用直到最后一次调用才返回，因此队列似乎是安全的。

这是错的，还是我做对了？

```
function allListsOfType(type, callback) {
    //setup context, etc...

    var returnListArray = [];
    var queue = 0;

    getListsFromWeb(web);

    function getListsFromWeb(targetWeb) {
        //get lists from root web, and get all subwebs
        context.load(objects);
        queue++;

        context.executeQueryAsync(
            Function.createDelegate(this, function () { successHandler(); }),
            Function.createDelegate(this, errorHandler)
        );
    }

    function successHandler() {
        //add list results to array
        //loop through subwebs and call getListsFromWeb()
        queue--;
        if (queue == 0) {
            callback(returnListArray);
        }
    }

    function errorHandler(sender, args) {
        queue--;
    }
};

allListsOfType(SP.ListTemplateType.announcements, function(arr){
  alert(arr.length)
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T22:54:15.823

这似乎是正确的，只是如果第一个 Ajax 请求返回错误，您的回调将永远不会被调用。

Do the same check into errorHandler() than the one done into successHandler():

```
function errorHandler(sender, args) {
    queue--;
    if (queue == 0) {
        callback(returnListArray);
    }
} 
```

# jquery - jQuery 验证插件

> ID：14412071
> 
> 赞同：2
> 
> 时间：2013-01-19T07:18:10.467
> 
> 标签：jquery, jquery-validate

我想要一个提示来解决我一直遇到的问题，我有两个功能，第一个验证表单，第二个是发布到 PHP 文件。

问题是表单在被验证之前被发送。我想知道是否可以将这两个功能结合起来，即首先验证并且仅当表单提交的所有内容都正确时。有谁知道怎么做？

验证功能

```
$(document).ready(function() {

$('#singup-form').validate(
        {
            rules: {
                user_name: {
                    minlength: 3,
                    required: true
                },
                user_email: {
                    required: true,
                    email: true
                },
                user_password: {
                    required: true

                },
                confirmation_password: {
                    required: true,
                    equalTo: '#user_password'
                },
                user_phone: {
                    number: true,
                    minlength: 8
                },
                user_twitter: {
                    minlength: 3
                },
                agree: {
                    required: true
                }
            },
            highlight: function(label) {
                $(label).closest('.control-group').removeClass('success').addClass('error');
            },
            success: function(label) {
                label
                        .text('OK!').addClass('valid')
                        .closest('.control-group').removeClass('error').addClass('success');

            }
        });
}); // end document.ready 
```

职能岗位

```
$('#singup-form-submit').click(function(e) {
$.post("register", {
    user_name: $('#user_name').val(),
    user_email: $('#user_email').val(),
    user_password: $('#user_password').val(),
    confirmation_password: $('#confirmation_password').val(),
    user_ddd: $('#user_ddd').val(),
    user_phone: $('#user_phone').val(),
    user_twitter: $('#user_twitter').val(),
    agree: $('#agree').val()
}, function(data) {

    $('#resultado').html(data);
});
e.preventDefault();
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T16:01:26.913

这就是您如何组合您的两个功能（*当然，假设您的两个功能已经正常运行*）。`submitHandler`在表格有效之前，火灾内部没有任何东西。根据[文档](http://docs.jquery.com/Plugins/Validation/validate#toptions)，这是您放置任何 ajax 功能的地方。

使用内置`submitHandler:`如下。

```
$(document).ready(function() {

    $('#singup-form').validate({
        rules: {
            user_name: {
                minlength: 3,
                required: true
            },
            user_email: {
                required: true,
                email: true
            },
            user_password: {
                required: true
            },
            confirmation_password: {
                required: true,
                equalTo: '#user_password'
            },
            user_phone: {
                number: true,
                minlength: 8
            },
            user_twitter: {
                minlength: 3
            },
            agree: {
                required: true
            }
        },
        highlight: function (label) {
            $(label).closest('.control-group').removeClass('success').addClass('error');
        },
        success: function (label) {
            label.text('OK!').addClass('valid').closest('.control-group').removeClass('error').addClass('success');
        },
        submitHandler: function (form) {
            $.post("register", {
                user_name: $('#user_name').val(),
                user_email: $('#user_email').val(),
                user_password: $('#user_password').val(),
                confirmation_password: $('#confirmation_password').val(),
                user_ddd: $('#user_ddd').val(),
                user_phone: $('#user_phone').val(),
                user_twitter: $('#user_twitter').val(),
                agree: $('#agree').val()
            }, function(data) {
                $('#resultado').html(data);
            });
        }
    });

}); // end document.ready 
```

请参阅文档：

[http://docs.jquery.com/Plugins/Validation/validate#toptions](http://docs.jquery.com/Plugins/Validation/validate#toptions)

> **submitHandler**，回调，默认：默认（本机）表单提交
> 回调，用于在表单有效时处理实际提交。获取表单作为唯一参数。替换默认提交。验证后通过 Ajax 提交表单的正确位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T07:26:45.013

您可以使用提交处理程序，而不仅仅是将提交代码绑定到单击事件。

[插件/验证/验证](http://docs.jquery.com/Plugins/Validation/validate)

> 使用 submitHandler 实现您自己的表单提交，例如。通过阿贾克斯。

```
$("#myform").validate({
 submitHandler: function(form) {
   form.submit();
 }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-13T10:39:16.560

可能这会有所帮助，我为 jQuery 编写了自己的插件，因为我需要一些模式的灵活性。[https://github.com/KirShur/ValidolRepo](https://github.com/KirShur/ValidolRepo)

# design-patterns - 像这样实现数据访问对象是一种好方法还是自然方法？

> ID：14412072
> 
> 赞同：0
> 
> 时间：2013-01-19T07:18:29.057
> 
> 标签：design-patterns

在阅读了 Fowler 的 PoEAA 之后，我真的很困惑什么是设计数据访问层的好方法或自然方法。我曾经让数据访问对象返回一个简单的 java bean，例如：

```
public class Person {
    private long id;
    private String name;
    private Gender gender;

    //... setters and getters
} 
```

而数据访问对象就像

```
public class PersonDataAccessImpl implements PersonDataAccess {
    public Person getPersonById(long id) throws DataAccessException {
        //... select the database
    }
    public void addPerson(Person person) throws DataAccessException {
        //... insert into the database
    }
    ...
} 
```

Person 对象将在整个应用程序中使用，包括上面的数据访问层和 Web 表示层。但根据 PoEAA，数据访问层通常位于各层的底部。让DAO依赖bean对象（Person），这不是一个好办法吗，后面会用到领域层、服务层和表现层？以及如何设计域层，因为在我看来，域对象和简单的 java bean 之间的区别在于，简单的 java bean 只缺少域中的行为。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T21:31:47.083

显然没有一种真正的方法来构建应用程序，但我自己的想法如下......

**我同意普通 java bean**和**域对象**之间的主要区别是行为。但我认为你真的应该在你的领域对象中有行为，否则你会冒着[贫血的领域模型](http://martinfowler.com/bliki/AnemicDomainModel.html)的风险。使用领域对象设计您的领域模型，而不仅仅是作为 getter 和 setter 包的普通对象。如果它是域的一部分，那么它确实很可能有一些相关的行为。

您的**数据访问对象**完全可以依赖于域对象（例如 Person）——事实上，我认为这完全是他们的目的。我将数据访问视为关系数据存储和对象模型之间的映射。您的简短实现片段实际上类似于**存储库**，它只是域和数据映射层之间的中介。

有一些观点认为您应该避免在表示层中使用域对象，并且只向客户端公开轻量级数据对象以供查看。（例如，请参阅 ASP.NET MVC 应用程序中**视图模型**类的常见概念。）您的服务层本质上将从域对象转换为这些视图对象，并将它们提供给前端客户端。对此的一个关键论点是，如果某个未知客户端将使用您的服务，您不希望他们拥有对您的域对象和所有业务逻辑的完全访问权限 - 您只想为他们提供他们需要知道的内容以显示给用户。如果您是您自己的唯一客户，尽管这不是问题。

当然，您并不总是需要复杂的域模型。您可能拥有更像 Active Record 的东西，域对象在其中管理自己的持久性。您还可以查看诸如 CQRS 之类的东西，您可以完全绕过域模型以将视图信息传递给客户端，直接从存储的数据视图转到定制的视图类。（但是，域模型仍然用于命令方面。）

我的建议：如果它足够复杂，请执行以下操作：

*   具有具有行为的对象的域模型
*   有一个数据访问层在您的域模型和数据存储之间进行调解（这将取决于您的域对象）
*   有一个服务层，它公开您的应用程序的必要操作，以便您的客户端显示和回发数据

# ember.js - 将“活动”类分配给 EmberJS 中的选定列表项

> ID：14412073
> 
> 赞同：40
> 
> 时间：2013-01-19T07:18:32.740
> 
> 标签：ember.js

我有一个列表，我想自动将一项设置为 class="active"。给定以下引导代码：

```
<ul class="nav">
<li {{bindAttr class="atIndex:active"}}>{{#linkTo "index"}}Index{{/linkTo}}</li>
<li {{bindAttr class="atAbout:active"}}>{{#linkTo "about"}}About{{/linkTo}}</li>
<li {{bindAttr class="atLogin:active"}}>{{#linkTo "login"}}Login{{/linkTo}}</li>
</ul> 
```

atIndex、atAbout 和 atLogin 位于我的 ApplicationController 中。

渲染为：

```
<ul class="nav">
<li class="active"><a...>Index{{/linkTo}}</li>
<li><a...>About<a></li>
<li><a...>Login<a></li>
</ul> 
```

使用 Ember 1.0 pre4 执行此操作的最佳方法是什么？我宁愿不向每个视图或控制器添加特殊代码。

PS -`atIndex: true`有效，但`atIndex: function() {return true; }.property().volatile()`无效。这让我觉得我做错了什么。

谢谢！

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-01-24T12:07:57.250

```
{{#link-to "dashboard" tagName="li" href=false}}
  <a {{bind-attr href="view.href"}}>
    Dashboard
  </a>
{{/link-to}} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-19T16:57:28.117

到目前为止，解决这个问题的最简洁的方法是利用`linkTo`帮助程序的内置支持来在呈现链接时设置活动类。AFAIK 除了在源代码中还没有记录：

实现：[https ://github.com/emberjs/ember.js/blob/master/packages/ember-routing/lib/helpers/link_to.js#L46](https://github.com/emberjs/ember.js/blob/master/packages/ember-routing/lib/helpers/link_to.js#L46)

示例：[https ://github.com/emberjs/ember.js/blob/master/packages/ember/tests/helpers/link_to_test.js#L120](https://github.com/emberjs/ember.js/blob/master/packages/ember/tests/helpers/link_to_test.js#L120)

要利用此功能，只需根据链接上的活动类而不是`li`元素来调整您的 CSS 样式。如果你真的需要设置样式，`li`你可以创建一个自定义视图和帮助器，扩展`Ember.LinkView`和使用一个`li`但不断变化的 css 会容易得多。

- - 更新 - -

由于我们都喜欢 twitter 引导程序*，因此仅更改 css*可能不是一个很好的选择。在这种情况下，以下方法可以解决问题：

```
App.ApplicationView = Ember.View.extend({
  currentPathDidChange: function() {
    Ember.run.next( this, function() {
      this.$("ul.nav li:has(>a.active)").addClass('active');
      this.$("ul.nav li:not(:has(>a.active))").removeClass('active');
    });
  }.observes('controller.currentPath')
}); 
```

使用 ember linkTo helper with bootstrap pills的工作示例：http: [//jsbin.com/ekobod/5/edit](http://jsbin.com/ekobod/5/edit)（需要ember-1.0.0-pre.4）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-19T16:22:54.500

活动路线的路径在`ApplicationController`通过中自动更新，`currentPath`所以我在我的应用程序中做了类似的事情......在`ApplicationController`添加的属性中，如下所示：

```
isProductsActive: function(){
  if ( this.get('currentPath') === 'products' ) return 'active';
  else return '';
}.property('currentPath') 
```

在我的`ApplicationView`模板中：

```
<li {{bindAttr class="isProductsActive"}}>
  {{#linkTo "products"}}Products{{/linkTo}}
</li> 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-03-18T20:37:17.647

我制作了一个 ember-cli 插件来处理这个问题：

[https://github.com/alexspeller/ember-cli-active-link-wrapper](https://github.com/alexspeller/ember-cli-active-link-wrapper)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-09-28T03:36:05.040

**编辑**：最后，我发现使用链接的 ember.js 使用 bootstrap li 元素的激活类的最佳方法。

```
{{#linkTo "dives" tagName="li"}}
   <a {{bindAttr href="view.href"}}>Dives</a>
{{/linkTo}} 
```

--------------8<--------------

**已弃用：**

我猜在 Ember.js 为 linkTo 助手引入 activeClass 属性之前，之前的答案是相关的。现在我会这样解决问题：

```
<ul class="nav">
<li >{{#linkTo "index" activeClass="active"}}Index{{/linkTo}}</li>
<li >{{#linkTo "about" activeClass="active}}About{{/linkTo}}</li>
<li >{{#linkTo "login" activeClass="active}}Login{{/linkTo}}</li>
</ul> 
```

Enber 将在相关时自动添加类。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-09-16T14:51:53.720

我找到了一个非常简单的解决方案，使用列表组中的链接项目（[http://getbootstrap.com/components/#list-group-linked](http://getbootstrap.com/components/#list-group-linked)）。

```
<div class="list-group">
{{#each thing in list}}
    {{#link-to "details" thing.id tagName="a" href="view.href" class="list-group-item" {{thing.name}} {{/link-to}}
{{/each}}
</div> 
```

适用于 Bootstrap v3.1.1 和 Ember v1.7.0

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-04-18T11:39:38.797

如果我可以建议另一种只需要把手的解决方案：

```
<li {{bind-attr class="view.innerLink.active:active"}}>
    {{#link-to "path" viewName="innerLink"}}Click{{/link-to}}
</li> 
```

这`LinkView`会将对象设置为父视图的成员，这是您可以引用的活动属性。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-08-17T15:57:26.780

只需将 {{link-to}} 与外部的 tagName 嵌套。我在 EmberJS 2.0 上这样做。

```
{{#link-to "admin.websocket" tagName="li"}}
    {{#link-to "admin.websocket"}}WebSocket{{/link-to}}
{{/link-to}} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-08-29T15:31:21.653

如果你想在 Ember 中使用 Bootstrap 导航，那么你可以使用 Bootstrap for Ember，它具有开箱即用的支持：

Github：[https](https://github.com/ember-addons/bootstrap-for-ember) ://github.com/ember-addons/bootstrap-for-ember 演示：[http ://ember-addons.github.io/bootstrap-for-ember/dist/#/show_components/tabs](http://ember-addons.github.io/bootstrap-for-ember/dist/#/show_components/tabs)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-04-07T12:06:50.787

很多这些答案已经过时了。这是 Bootstrap 和 Ember 2.x 的更干净（和 DRY）的版本：

```
{{#link-to "index" tagName="li" as |link|}}
  <a href="#" class="{{if link.active 'active'}}">Index Page</a>
{{/link-to}} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-01-19T11:39:44.297

`classNameBindings`我通过为每个项目创建一个视图并使用（我不得不说我没有 HTML 列表，即`<a>...</a>`在我的应用程序中，只有 列表）解决了类似的问题`<div>`。

这是它为我工作的方式：

在 tasklist.handlebars 我迭代我的自定义视图

```
 {{#each tasks}}
    {{view App.TaskListItemView contentBinding="this"....}}
  {{/each}} 
```

Ember 将为每个项目插入一个视图（即`<div>`）。

每个项目的视图类在 task_list_item_view.js 中定义为

```
App.TaskListItemView = Ember.View.extend({

  controller: null,
  classNameBindings: ['isSelected', 'isClosed'],

  isClosed: function() {
      var content = this.get('content');
      return content && !content.isOpen(new Date);
  }.property('controller.content.@each'),

  isSelected: function() {
      return (this.get('controller').isSelectedTask(this.get('content')));
  }.property('controller.taskSelection.@each'),

  ....
}); 
```

最后，视图的模板只是在 tasklistitem.handlebars 中呈现我的链接

```
<a {{action "selectTask" view.content target="view"}} rel="tooltip"
         {{bindAttr title="view.content.comment"}} class="taskListLink">
  ....
</a> 
```

AFAIK 您必须在`property()`调用中指定源数据，以让 ember 知道何时（重新）评估该属性。

希望有帮助

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2015-01-07T21:31:34.027

我去了：

```
 Ember.LinkView.reopen({
didInsertElement:function(){

    if(this.$().hasClass('active')){

        this.$().parent().addClass('active');

    }
} 
```

});

我不想使用公认的答案，因为我想将我的 li 元素保留为普通的旧 html。可能有更好的方法来检查活动状态，但我无法访问正确的属性。

# ruby-on-rails-3 - 在 rspec 中测试模型值数组的正确方法是什么？

> ID：14412079
> 
> 赞同：0
> 
> 时间：2013-01-19T07:19:01.257
> 
> 标签：ruby-on-rails-3, activerecord, rspec2

我还没有完全理解 rspec 编写测试的方式，但希望能帮助我理解我在这个测试中做错了什么。

```
describe Source do

  describe "Upcase name" do
     names = {'bob' => 'Bob',
            'edward jones' => 'Edward Jones'
        'Edward jones' => 'Edward Jones'}

     names.each do |name,expect|
       before { @source = Source.create(name: name) }
       after { @source.destroy! }

       it "source #{name} should be #{expect}" do
         subject { @source }
         @source.name.should == expect

         let!(:find) do 
           Source.find_by_proper_name(expect)
         end
         it "should find" do
           should == find
         end
       end
     end
   end
 end 
```

我对源模型的名称列有唯一约束。

由于独特的违规行为，测试的每次迭代都会失败。（尽管我认为每次迭代只会创建一个模型。

如果我取出这三个名称的中间，那么如果它一次创建所有名称，那么所有名称都是唯一的 - 那么测试失败，因为@source 等于所有测试中的最后一个值。

本质上，我想要一种 DRY 方式来编写测试

```
Source.create(name: "bob").name.should == "Bob"
Source.create(name: "edward jones").name.should == "Edward Jones"
Source.create(name: "Edward jones").name.should == "Edward Jones" 
```

我应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T13:55:43.130

你在那里混合了很多东西......

第一件事：

*   不筑巢`it`
*   不要使用`let`它们`it`属于`context`
*   不要`it`迭代`it`
*   不要自己清理数据库，使用数据库清理器或事务装置或类似的东西

看看我是如何做这些规范的，也许这会对你有所帮助：[https ://github.com/phoet/on_ruby/blob/master/spec/models/user_spec.rb#L15](https://github.com/phoet/on_ruby/blob/master/spec/models/user_spec.rb#L15)

# sql - 是否可以编写将 sum(amount) 分类为 2 列的查询？

> ID：14412080
> 
> 赞同：0
> 
> 时间：2013-01-19T07:19:07.143
> 
> 标签：sql, sqlite, join

我有这样的 MyTbl

```
Id  type    amount
--  ----    ------
1   1       100
2   1       200
3   2       300
4   2       400 
```

是否可以在 Android 中编写一个返回这个的 sqlite 查询？

```
Amount1 Amount2
------- -------
300     700 
```

我已经编写了以下查询，但是不行：

```
select SUM(a.amount) as Amount1, SUM(b.amount) as Amount2 from MyTbl a inner join MyTbl b
on a.id = b.id
group by a.type 
```

它返回：

```
Amount1 Amount2
------- -------
300     300
700     700 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T07:28:11.093

```
SELECT
    SUM(CASE WHEN type = 1 THEN amount ELSE 0 END) amount1,
    SUM(CASE WHEN type = 2 THEN amount ELSE 0 END) amount2
FROM MyTbl 
```

[**SQL 小提琴**](http://sqlfiddle.com/#!7/89bda/3/0)

# mysql - 我的 Mysql 触发器有什么问题 - 抛出语法错误

> ID：14412082
> 
> 赞同：1
> 
> 时间：2013-01-19T07:19:15.590
> 
> 标签：mysql, triggers

当我执行此触发器时，它会引发错误

**#1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 27 行的“END”附近使用正确的语法**

```
delimiter //

CREATE TRIGGER `after_tblgps_insert` AFTER INSERT ON `tbl_gps`
FOR EACH ROW BEGIN
DECLARE cab_meter_new VARCHAR(10);
DECLARE cab_cost_new VARCHAR(10);
DECLARE cab_meter_old VARCHAR(10);
DECLARE cab_cost_old VARCHAR(10);
DECLARE pr_pnr_no  VARCHAR(15);
DECLARE pr_dest_id  VARCHAR(15);

select NEW.gps_rs232,NEW.gps_cab_bus,gps_rs232,gps_cab_bus into @cab_meter_new,@cab_cost_new,@cab_meter_old,@cab_cost_old from tbl_gps where gps_imei = NEW.gps_imei order by gps_id asc limit 0,1;

IF @cab_meter_new = 1 and @cab_meter_old = 0 THEN
BEGIN
select `booking_pnr_no` into @pr_pnr_no from tbl_booking where booking_alloted_vehicle = (select taxi_id from tbl_taxi where taxi_imei = NEW.gps_imei ) AND booking_status = 13;
select trip_dst_area_id into @pr_dest_no from tbl_trip where pnr_id = @pr_pnr_no order by trip_id desc limit 0,1;
update tbl_taxi set taxi_cur_status = 12,taxi_cur_area = @pr_dest_no where taxi_id = NEW.gps_cab_bus;
update tbl_booking set booking_status = 9 where booking_pnr_no = @pr_pnr_no;
END;
ELSE IF @cab_meter_new = 0 and @cab_meter_old = 1 THEN
BEGIN
select `booking_pnr_no` into @pr_pnr_no from tbl_booking where booking_alloted_vehicle = (select taxi_id from tbl_taxi where taxi_imei = NEW.gps_imei ) AND booking_status = 9;
select trip_dst_area_id into @pr_dest_no from tbl_trip where pnr_id = @pr_pnr_no order by trip_id desc limit 0,1;
update tbl_taxi set taxi_cur_status = 10,taxi_cur_area = @pr_dest_no where taxi_id = NEW.gps_cab_bus;
update tbl_booking set booking_status = 8 where booking_pnr_no = @pr_pnr_no;
END;
END IF
END //
delimiter ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T07:46:59.887

试试这个代码

```
delimiter //

CREATE TRIGGER `after_tblgps_insert` AFTER INSERT ON `tbl_gps`
FOR EACH ROW BEGIN
DECLARE cab_meter_new VARCHAR(10);
DECLARE cab_cost_new VARCHAR(10);

    DECLARE cab_meter_old VARCHAR(10);
    DECLARE cab_cost_old VARCHAR(10);
    DECLARE pr_pnr_no  VARCHAR(15);
    DECLARE pr_dest_id  VARCHAR(15);

    select NEW.gps_rs232,NEW.gps_cab_bus,gps_rs232,gps_cab_bus into @cab_meter_new,@cab_cost_new,@cab_meter_old,@cab_cost_old from tbl_gps where gps_imei = NEW.gps_imei order by gps_id asc limit 0,1;

    IF @cab_meter_new = 1 and @cab_meter_old = 0 THEN
    BEGIN
    select `booking_pnr_no` into @pr_pnr_no from tbl_booking where booking_alloted_vehicle = (select taxi_id from tbl_taxi where taxi_imei = NEW.gps_imei ) AND booking_status = 13;
    select trip_dst_area_id into @pr_dest_no from tbl_trip where pnr_id = @pr_pnr_no order by trip_id desc limit 0,1;
    update tbl_taxi set taxi_cur_status = 12,taxi_cur_area = @pr_dest_no where taxi_id = NEW.gps_cab_bus;
    update tbl_booking set booking_status = 9 where booking_pnr_no = @pr_pnr_no;
    END;
    END IF;
    IF @cab_meter_new = 0 and @cab_meter_old = 1 THEN//break IF into separate IF 
    BEGIN
    select `booking_pnr_no` into @pr_pnr_no from tbl_booking where booking_alloted_vehicle = (select taxi_id from tbl_taxi where taxi_imei = NEW.gps_imei ) AND booking_status = 9;
    select trip_dst_area_id into @pr_dest_no from tbl_trip where pnr_id = @pr_pnr_no order by trip_id desc limit 0,1;
    update tbl_taxi set taxi_cur_status = 10,taxi_cur_area = @pr_dest_no where taxi_id = NEW.gps_cab_bus;
    update tbl_booking set booking_status = 8 where booking_pnr_no = @pr_pnr_no;
    END;
    END IF;
    END; //
    delimiter ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T07:25:34.727

You have misstyped semicolon after `END IF`.

# php - 如何在 android/ios 应用程序中配置 facebook 注册功能

> ID：14412083
> 
> 赞同：2
> 
> 时间：2013-01-19T07:19:20.057
> 
> 标签：php, android, ios, facebook

我可以在我的 android/ios 应用程序中使用 Facebook 配置注册吗？我已经成功地将 Facebook 登录集成到 ios 和 android 中，但这次我需要使用 facebook 注册。我浏览了谷歌并找到了一些教程，但我使用 iframe 为网站找到了它。我还需要在 Facebook 注册时将用户电子邮件和密码存储在我的服务器端数据库中。我在服务器端使用 php/mysql。提前感谢您花费宝贵的时间来解决我的问题。问候，马尤尔。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T07:19:37.363

我假设您希望在您的应用程序中通过 Facebook 注册。

对于**iOS**，

我用来从 Facebook 登录获取用户信息的是

1) 显示用于登录 facebook 帐户的 facebook 对话框。

2）当成功登录`- (void) dialogDidSucceed:(NSURL*)url`方法将调用`FBLoginDialog.m`文件

3) 现在用于`FbGraphResponse`获取用户详细信息以完成您的注册过程。

例子 ：

```
-(void)getUserDetails 
{
NSMutableDictionary * params = [[[NSMutableDictionary alloc]init] autorelease];
            [params setValue:@"normal" forKey:@"type"];
            fb_graph_response =[[FBRequestWrapper defaultManager] doGraphGet:@"me" withGetVars:params];
            NSLog(@"getMeButtonPressed:  %@", fb_graph_response.htmlResponse);
responseArray = [[NSMutableArray alloc]init];

            responseArray = [fb_graph_response.htmlResponse JSONValue];

            userdetails = [[Userdetails alloc] init];

            [userdetails setUserid:[responseArray valueForKey:@"id"]];
            [userdetails setUsername:[responseArray valueForKey:@"name"]];
            [userdetails setGender:[responseArray valueForKey:@"gender"]];
            [userdetails setHometown:[[responseArray valueForKey:@"hometown"] valueForKey:@"name"]];
            [userdetails setLocation:[[responseArray valueForKey:@"location"]valueForKey:@"name"]];
            [userdetails setBio:[responseArray valueForKey:@"bio"]];
            [userdetails setFirst_name:[responseArray valueForKey:@"first_name"]];
            [userdetails setLast_name:[responseArray valueForKey:@"last_name"]];
            if ([[responseArray valueForKey:@"email"] length]>0)
            {
                NSString * email = [responseArray valueForKey:@"email"] ;
                email = [email stringByReplacingOccurrencesOfString:@"\u0040" withString:@"@"];
                [userdetails setEmail:email];
                email = nil;
            }
 [self doRegistrationToAppWithEmail:userdetails.email AndFacebookID:userdetails.userid AndUserName:userdetails.username];
 } 
```

现在您可以拥有用户的用户详细信息以进行注册过程。在注册视图中显示这些信息并使其可编辑，以便用户可以更改它。

希望它可以帮助你。

# google-maps - 我们能否使 Googlemap 信息窗口具有响应性，使其大小根据浏览器窗口的大小而变化？

> ID：14412084
> 
> 赞同：5
> 
> 时间：2013-01-19T07:19:20.140
> 
> 标签：google-maps, google-maps-api-3, responsive-design, infowindow

我正在将地图放在响应式 html 页面上。它有一个标记和一个信息窗口。我正在使用这样的[代码](https://google-developers.appspot.com/maps/documentation/javascript/examples/infowindow-simple-max)

我的 map_canvas 的宽度会根据媒体的宽度进行调整。它使用@media 标签设置样式。

我想根据媒体大小增加或减少信息窗口的大小。

那可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T11:56:39.457

infoWindow 始终具有固定大小，在打开之前计算。这样一来，CSS 解决方案将无法在这里工作。

您可以尝试什么：监听窗口的调整大小事件并重新打开 infoWindow：

```
google.maps.event.addDomListener(window, 'resize', function() {
          infowindow.open(map);
        }); 
```

# javascript - Geddy.js - rendering partial views without layout, is it possible?

> ID：14412085
> 
> 赞同：1
> 
> 时间：2013-01-19T07:19:26.423
> 
> 标签：javascript, node.js, model-view-controller, partial, geddy

Is it possible to render a partial view in Geddy.js without rendering the entire HTML page layout?

```
self.respond(model, {layout: false, template: 'app/views/users/_list'}); 
```

I've tried to do this with no success. (Although the documentation says: "layout [false]: a flag to not use a layout file")

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-25T07:22:16.573

为了将来参考，您可以传入`false`布局，它不会使用文件中的布局。

[http://geddyjs.org/documentation#controllers.respond](http://geddyjs.org/documentation#controllers.respond)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T13:42:10.480

好的。我终于做了一个“空”的布局，叫做`empty.html.ejs`：

```
<%- yield(); %> 
```

然后我在适当的控制器操作中像这样使用它：

```
..., {layout: 'app/views/layouts/empty', ... 
```

这似乎是一个黑客，但至少它是一个有效的解决方案......

# c# - 使用 C# Windows Phone 下载加密的二进制文件缺少数据

> ID：14412089
> 
> 赞同：2
> 
> 时间：2013-01-19T07:19:38.743
> 
> 标签：c#, java, encryption, binary, windows-phone-7.1

我需要从已使用 JAVA 加密的 url 下载加密的 xml 二进制文件。我已经设法在 JAVA 中加密文件，然后将文件添加到我的 WP7 项目中并使用 c# 解密并将文件成功读入我的应用程序。

我现在需要将文件存储在 Web 服务器上，以便应用程序可以访问它，我发现下载文件时文件不完整或格式不正确，并且解密不起作用。

我试过同时使用 WebClient 和 HttpWebRequest 并且都给了我相同的结果。xml 编码文件大约 17000 字节，但是从这两种方法下载的文件返回一个大约 16000 字节长的文件。我认为下载的文件缺少行尾字符，但我无法验证这一点。我现在用来下载文件的代码非常简单，如下所示：

```
private void GetFile()
    {
        WebClient client = new WebClient();
        client.DownloadStringCompleted += new DownloadStringCompletedEventHandler(client_DownloadStringCompleted);
        String url = "http://url/encodedfile.txt";            
        client.DownloadStringAsync(new Uri(url));

     }

    void client_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
    {

        string s = e.Result;

        byte[] encodedFile = System.Text.Encoding.UTF8.GetBytes(e.result);

        //decrypt file.... 
```

查看加密数据，它们看起来非常相似，但encodedFile 的长度不是原始加密文件的正确长度。我已经对此进行了调试，并将encodedFile 中的字符复制到TextPad 中，全部放在一行上。我不确定这是否是问题，但我到处查看如何下载二进制文件，大多数建议是使用 HttpWebRequest 但我得到完全相同的结果，所以我认为这不是问题。

任何帮助都得到了重视。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T10:27:13.643

`DownloadString`将尝试将数据读取为 unicode 字符串。由于您正在下载二进制数据，因此输出不正确也就不足为奇了。尝试`WebClient.OpenReadAsync`改用：

```
private void GetFile()
{
    var webClient = new WebClient();

    webClient.OpenReadCompleted += OpenReadCompleted;

    string url = "http://url/encodedfile.txt";         

    webClient.OpenReadAsync(new Uri(url));
}

private void OpenReadCompleted(object sender, OpenReadCompletedEventArgs e)
{
    // Decrypt the contents of e.Result
} 
```

# emacs - Failure to send buffer region to REPL in sml-mode

> ID：14412092
> 
> 赞同：2
> 
> 时间：2013-01-19T07:20:10.680
> 
> 标签：emacs, sml

Recently I have started dabbling in the `sml-mode` Emacs package for running SML code. The problem I'm facing is when I try to send across a region of my SML code/file to the REPL (which I think is the only logical way of writing multi-line functions in SML without getting troubled by the primitive REPL). Here is my workflow:

*   Open up an SML file (the SML mode shows in the bottom part of the window)
*   Open up the REPL if it isn't already running (`C-c C-s`)
*   Again get back to the SML file and write a function
*   Select the entire function and then press `C-C C-r`. I get an error "Not a `sml-prog-proc` buffer"
*   Now instead of selecting a region, just try to send the entire file to the REPL using `C-C C-l`; again the same error in the mini-buffer

Can someone please help me out in understand why this occurs and how to actually send across code from a script/file to the REPL when using SML? If it matters, I'm using SML/NJ.

TIA, sasuke

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T01:28:00.630

这也困扰着我，因为它在某些情况下有效，但在其他情况下无效。

如果*sml*进程被终止`C-d`（如发出“use”命令时所建议的那样）并立即从同一缓冲区（`C-c C-s`）重新启动，则无论何时执行任何“发送到复制”操作都会发生错误。

正确的方法（在杀死 repl 之后）是切换回包含正在编辑的 .sml 文件的缓冲区，然后从那里 ( `C-c C-s`) 或通过 ( `C-c C-r`) 或 ( `C-c C-l`) 重新启动 repl。

HTH。

# java - Java: Casting ParentClass and ChildClass (Downcast Runtime Error)

> ID：14412093
> 
> 赞同：1
> 
> 时间：2013-01-19T07:20:12.930
> 
> 标签：java, casting, type-conversion, downcast

```
public class InheritanceDemo {

    public static void main(String[] args) {

        ParentClass p = new ParentClass();
        ChildClass c = new ChildClass();

        //Casting ChildClass to ParentClass
        ParentClass pc = new ChildClass();
        pc.parentClassMethod(); //Output: Parent Class Method (as expected)

        //Again Casting Parent Class to ChildClass explictly
        //Question 1 for this code
        ChildClass cp = (ChildClass) pc;
        cp.parentClassMethod(); //Output: Parent Class Method (unexpected)

        ChildClass cc1 = (ChildClass) new ParentClass();
        cc1.parentClassMethod(); //Compiles, but Run Time Error

        ChildClass cc2 = (ChildClass) p;
        cc2.parentClassMethod(); //Compiles, but Run Time Error

    }
}

class ParentClass {

    public void parentClassMethod(){
        System.out.println("Parent Class Method");
    }

}

class ChildClass extends ParentClass {

    public void ParentClassMethod(){
        System.out.println("Parent Class Method From Child Class");
    }

    public void ChildClassMethod(){
        System.out.println("Child Class Method");
    }

} 
```

Question1:

Now, I have a method called `parentClassMethod` in both `ParentClass` and `ChildClass` classes(Overridden). When I cast the `ParentClass` to `ChildClass` and then call the parentClassMethod, why is it executing the `ParentClass` method instead of the method from `ChildClass` if cp is refering to `ChildClass`?

Question2:

(i) `ChildClass cp = (ChildClass) pc;`

(ii) `ChildClass cc1 = (ChildClass) new ParentClass();` (iii) `ChildClass cc2 = (ChildClass) p;`

If (i) is working fine, why not (ii) or (iii)?

Because I am casting from `ParentClass` to `ChildClass` in both the cases?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T07:23:09.017

> Now, I have a method called parentClassMethod in both ParentClass and ChildClass classes(Overridden).

No you don't. You have a method named `parentClassMethod` in `ParentClass` and a method named `ParentClassMethod` in `ChildClass`. Since all Java identifiers are case-sensitive, there is no association between the two. `ParentClassMethod` does not override `parentClassMethod` from `ParentClass`.

> If (i) is working fine, why not (ii) or (iii)?

In (ii) and (iii) you are trying to cast an instance of `ParentClass` to an instance of `ChildClass`. That is not allowed, as a `ChildClass` is-not-a `ParentClass`, any more than an `Object` is a `String`.

In (i) you are trying to cast an instance of `ChildClass` (stored in a reference declared as `ParentClass`) to a `ChildClass`, which is allowed.

When casting, it's the runtime type that counts (in other words, what `T` is used in `new T()`).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T07:48:12.507

当泛型不存在时，让我们回到 jdk 1.4。

```
 Vector test = new Vector();
   test.add("java"); 
```

现在在检索您所做的事情时：

```
String str = (String) test.get(0); 
```

所以字符串最初被存储为向量内的一个对象，然后你将它向下转换为字符串，它就很好了。

但是，如果您尝试以下操作，它将无法正常工作：

```
String str = (Object) new Object(); 
```

所以你可以看到，在第一种情况下，它是字符串，但引用是对象 [inside vector]，在这种情况下，你可以向下转换，它会起作用。

要回答您的第一个问题，java 区分大小写并且您的方法名称的大小写不匹配。

# wpf - Data Validation with MVVM-Light WPF and Linq to Entity Framework

> ID：14412094
> 
> 赞同：3
> 
> 时间：2013-01-19T07:20:15.387
> 
> 标签：wpf, mvvm, linq-to-entities, mvvm-light

I think I have read every article google returns when I search wpf mvvm-light data validation and I dont know which way to go. I am aware of josh smith, Karl Shifflett's, and MVVM LIGHT's own demo techniques for data validation. What I see is that most validation requires me to fully "re-abstract" my model in my view model. Meaning that I have to create a property in my viewmodel for each property of my model that I want to validate (and in some cases convert all these into string values for binding/validation). This seems like a lot or redundancy when all I want to do is mark most fields as required.

I am using LINQ to entity framework(with self tracking) for my model classes which come from a SQL server DB. As a result I would prefer to keep my business data validation/rules within my viewmodels. I write a simple service interface to get the data from the model and pass it to my viewmodel.

Most of the examples I can find are from as far back as 2008 (ie josh smith). Are these techniques still valid or are there more up to date best practices for mvvm data validation with .NET 4.5 etc.

So I am asking:

1) What methods do you suggest I use 2) What methods work best in a LINQ to EF with MVVM-Light Environment. 3) EDIT: I want to provide feedback to user as they enter data, not just when they submit form

thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T09:07:25.013

我最终最终使用了以下内容。我将模型更改为使用 LINQ 来自我跟踪实体（有关 STE [http://msdn.microsoft.com/en-us/library/vstudio/ff407090%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/vstudio/ff407090%28v=vs.100%29.aspx)的信息，请参阅这篇文章）。

LINQ to STE 创建一个实现 iNotifyPropertyChanged 接口的 OnPropertyChanged 事件。

我刚刚为我想要的匹配模型对象（linq 实体生成的代码）创建了一个公共部分类，并为该事件添加了一个事件处理程序`OnPropertyChanged`。然后，我使用该`IDataErrorInfo`接口来验证并根据需要抛出错误。这使我可以在字段更改时验证它们并反映给用户。这也允许您执行更高级的验证逻辑，可能需要重新查询数据库（即查找用户名是否已被使用等）或抛出一个对话框

此外，如果我执行绕过 UI 的直接“批处理”操作，在模型中进行数据验证允许我仍然进行验证。

然后我使用`HasErrors`and`HasChanges`属性并使用它们创建一个附加到中继命令的布尔值，如果出现错误，则禁用 crud 命令按钮。

我将发布一些简单的代码来概述我刚刚描述的内容，如果您需要更多详细信息，请发表评论。

这是模型类的实体框架扩展：

```
 Imports System.ComponentModel

Partial Public Class client

    Implements IDataErrorInfo

#Region "Properties / Declarations"

    'Collection / error description
    Private m_validationErrors As New Dictionary(Of String, String)
    Private _HasChanges As Boolean = False

    ''Marks object as dirty, requires saving
    Public Property HasChanges() As Boolean
        Get
            Return _HasChanges
        End Get
        Set(value As Boolean)
            If Not Equals(_HasChanges, value) Then
                _HasChanges = value
                OnPropertyChanged("HasChanges")
            End If
        End Set
    End Property

    'Extends the class with a property that determines
    'if the instance has validation errors
    Public ReadOnly Property HasErrors() As Boolean
        Get
            Return m_validationErrors.Count > 0
        End Get
    End Property

#End Region

#Region "Base Error Objects"
    'Returns an error message
    'In this case it is a general message, which is
    'returned if the list contains elements of errors
    Public ReadOnly Property [Error] As String Implements System.ComponentModel.IDataErrorInfo.Error
        Get
            If m_validationErrors.Count > 0 Then
                Return "Client data is invalid"
            Else
                Return Nothing
            End If
        End Get
    End Property

    Default Public ReadOnly Property Item(ByVal columnName As String) As String Implements System.ComponentModel.IDataErrorInfo.Item
        Get
            If m_validationErrors.ContainsKey(columnName) Then
                Return m_validationErrors(columnName).ToString
            Else
                Return Nothing
            End If
        End Get
    End Property

#End Region

#Region "Base Error Methods"

    'Adds an error to the collection, if not already present
    'with the same key
    Private Sub AddError(ByVal columnName As String, ByVal msg As String)
        If Not m_validationErrors.ContainsKey(columnName) Then
            m_validationErrors.Add(columnName, msg)
        End If
    End Sub

    'Removes an error from the collection, if present
    Private Sub RemoveError(ByVal columnName As String)
        If m_validationErrors.ContainsKey(columnName) Then
            m_validationErrors.Remove(columnName)
        End If
    End Sub

#End Region

    Public Sub New()

        Me.HasChanges = False
    End Sub

#Region "Data Validation Methods"

    ''handles event and calls function that does the actual validation so that it can be called explicitly for batch processes
    Private Sub ValidateProperty(ByVal sender As Object, ByVal e As PropertyChangedEventArgs) Handles Me.PropertyChanged
        If e.PropertyName = "HasChanges" Then
            Exit Sub
        End If
        IsPropertyValid(e.PropertyName)
        HasChanges = True
    End Sub

    Public Function IsPropertyValid(sProperty As String) As Boolean
        Select Case sProperty
            ''add validation by column name here
            Case "chrLast"
                If Me.chrLast.Length < 4 Then
                    Me.AddError("chrLast", "The last name is too short")
                    Return True
                Else
                    Me.RemoveError("chrLast")
                    Return False
                End If
            Case Else
                Return False

        End Select

    End Function

#End Region

End Class 
```

然后在视图模型中我包含以下代码来绑定命令并评估它是否可以执行。

```
 Public ReadOnly Property SaveCommand() As RelayCommand
        Get
            If _SaveCommand Is Nothing Then
                _SaveCommand = New RelayCommand(AddressOf SaveExecute, AddressOf CanSaveExecute)
            End If
            Return _SaveCommand
        End Get
    End Property

    Private Function CanSaveExecute() As Boolean
        Try
            If Selection.HasErrors = False And Selection.HasChanges = True Then
                Return True
            Else
                Return False
            End If
        Catch ex As Exception
            Return False
        End Try

    End Function

    Private Sub SaveExecute()
        ''this is my LINQ to Self Tracking Entities DataContext
        FTC_Context.SaveChanges()
    End Sub 
```

以下是我绑定按钮的方式（在 WPF 中有自定义样式）

```
 <Button Content="" Height="40" Style="{DynamicResource ButtonAdd}" Command="{Binding SaveCommand}" Width="40" Cursor="Hand" ToolTip="Save Changes" Margin="0,0,10,10"/> 
```

因此，当没有验证错误并且当前客户端记录“isDirty”时，保存按钮会自动启用，如果这两个条件中的任何一个失败，则会禁用。这样，我现在有一种简单的方法来验证我想要的实体的任何类型的列/数据，并且我可以在用户在表单中输入数据时提供反馈，并且只有在我的所有“条件”都被启用后才启用 CRUD 命令按钮遇见了。

这是一场需要弄清楚的战斗。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T07:28:01.523

我这样做的方式（不一定正确）是在 ViewModel 中进行验证（通常在其中进行 CRUD 操作），然后如果存在验证错误，则中止保存/添加任何数据并用于`Messenger.Default.Send`将自定义消息类型发送到我的观点。然后我通过对话框或其他方式提醒用户。

我过去曾尝试过 Binding ValidationRules，但发现迄今为止最可靠和最一致的方法是简单的`if`语句。

# twitter-bootstrap - 如何在 Bootstrap 表单中的一行内联选择上方有文本

> ID：14412098
> 
> 赞同：0
> 
> 时间：2013-01-19T07:20:35.530
> 
> 标签：twitter-bootstrap

我一直在尝试重新创建一个看起来像这样的搜索表单：

[http://www.realestate.com.au/](http://www.realestate.com.au/)

它的顶部有一个搜索栏，下面有多个 SELECT。此外，每个 SELECT 上的标签都在上方而不是下方。

我知道在 Bootstrap 中你可以像这样添加标签：

```
<span class="help-block">Some text</span> 
```

但是如何在一行内联选择上方添加文本？

有人可以帮忙吗？我正在使用引导程序。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T19:56:31.800

只需将每个标签放置在 spanX div 中并选择，然后将 spanX div 放置在 row 容器中。

三列的示例：

```
<div class="row">
    <div class="span4">
      <label for="one">Label One</label>
      <select id="one">
        <option>1</option>
        <option>2</option>
        <option>3</option>
        <option>4</option>
        <option>5</option>
      </select>
    </div>

  <div class="span4">
      <label for="two">Label Two</label>
      <select id="two">
        <option>1</option>
        <option>2</option>
        <option>3</option>
        <option>4</option>
        <option>5</option>
      </select>
    </div>

    <div class="span4">
       <label for="three">Label Three</label>
      <select id="three">
        <option>1</option>
        <option>2</option>
        <option>3</option>
        <option>4</option>
        <option>5</option>
      </select>
    </div>

</div> 
```

看起来像这样： ![在此处输入图像描述](../Images/3f1fe20ac2d8b878d3fe0f2dd73b8d15.png)

# html - 什么是缩放图像，如何在网页中提供图像？

> ID：14412099
> 
> 赞同：14
> 
> 时间：2013-01-19T07:20:45.640
> 
> 标签：html, css

当我在 google PageSpeed 中运行测试页面时。我发现了一些警告，例如提供缩放图像..

```
 http://man-vimal.net78.net/introduction/?intro/action=main

THe results were as such :
The following images are resized in HTML or CSS. Serving scaled images could save 449.3KiB (99% reduction).
http://man-vimal.net78.net/.../twitter-logo.png is resized in HTML or CSS from 367x367 to 20x20\. Serving a scaled image could save 140.9KiB (99% reduction).
http://man-vimal.net78.net/introduction/views/images/fb.png is resized in HTML or CSS from 1,692x1,692 to 20x20\. Serving a scaled image could save 115.9KiB (99% reduction).
http://man-vimal.net78.net/.../linkedin.jpg is resized in HTML or CSS from 1,024x768 to 20x20\. Serving a scaled image could save 99.6KiB (99% reduction).
http://man-vimal.net78.net/.../panorama.jpg is resized in HTML or CSS from 604x453 to 100x100\. Serving a scaled image could save 81KiB (96% reduction).
http://man-vimal.net78.net/.../googleplus.jpg is resized in HTML or CSS from 450x320 to 20x20\. Serving a scaled image could save 12KiB (99% reduction). 
```

什么是缩放图像，我该如何解决？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-19T07:25:52.473

缩放图像是已缩放以匹配其显示尺寸的图像。

```
http://man-vimal.net78.net/.../twitter-logo.png is resized in HTML or CSS from 367x367 to 20x20\. Serving a scaled image could save 140.9KiB (99% reduction). 
```

这告诉您源图像是 367x367，但您以 20x20 显示它。

这是低效的，因为浏览器必须下载较大的图像然后重新缩放它。367x367 图像比 20x20 图像大 140kb。

要解决此问题，请调整图像（在 photoshop、预览等中）的大小，使其为 20x20 并提供该图像而不是您当前提供的图像。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-19T07:23:47.767

你的图片太大了。只需调整它们的大小。你甚至可以使用油漆来做到这一点。缩放图像基本上是调整大小的图像。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-19T07:25:57.293

典型的情况是，假设你有一个宽度为 400 像素的图像，但它不适合你的布局，所以你去你的样式表并写：

`img { width: 300px; }`

在这里，您已经使用 CSS 调整了图像的大小。但是您仍然以 400 像素的大小提供图像并缩小图像。

这里的含义是，您应该使用所需大小的图像，而不是使用 400px 的图像，因为文件大小会更小，因此页面加载速度会更快。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-03T21:01:42.167

例如，如果网站的用户上传大小为 400 像素 x 400 像素的图像，并且您将此图像用作缩略图，例如使用 html/css 的 40 像素 x 40 像素。

Web 浏览器必须下载较大的图像并将其计算为较小的尺寸。解决此问题的最佳方法是制作图像的不同副本，例如“当用户上传图像时”，然后直接使用它。

因此，网络浏览器不必低效地缩小图像。

我希望这有帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-06-25T11:36:00.513

缩放图像是尺寸与 CSS 或 HTML 中定义的尺寸完全匹配的图像。

如果您名为 twitter-logo.png 的原始图像的尺寸为 300 x 250，但 HTML 语句中定义的尺寸为：

```
<img src="http://man-vimal.net78.net/.../twitter-logo.png" width="600" height="500"> 
```

然后浏览器将首先下载原始图像（尺寸为 300 x 250），然后调整其大小以匹配 HTML 语句中定义的尺寸。即 600 x 500

在 HTML 或 CSS 中调整图像大小会大大减慢整个页面的渲染速度，应该避免。

要调整图像大小（并无损优化它们），您可以使用名为[RIOT](http://luci.criosweb.ro/riot/)的免费软件（仅适用于 Windows）。

# c++ - Running a Netbeans based compiled C++ program as CGI giving permission error

> ID：14412100
> 
> 赞同：1
> 
> 时间：2013-01-19T07:20:50.460
> 
> 标签：c++, mysql, netbeans, cgi, mysql-connector

With the [help of SO community](https://stackoverflow.com/questions/14411174/mysql-connect-c-64-bit-build-error) I was successful to run my first MySQL based file in C++. Now y next step is to run on Apache as a CGI file. On Apache it's giving 500 Internal Server Error and in server Log I got the following:

```
Sat Jan 19 12:18:18 2013] [notice] caught SIGTERM, shutting down
[Sat Jan 19 12:18:23 2013] [notice] Digest: generating secret for digest authentication ...
[Sat Jan 19 12:18:23 2013] [notice] Digest: done
[Sat Jan 19 12:18:23 2013] [notice] Apache/2.0.63 (Unix) PHP/5.3.2 DAV/2 configured -- resuming normal operations
[Sat Jan 19 12:18:51 2013] [error] [client 127.0.0.1] Premature end of script headers: addproduct.cgi 
```

I performed following steps

1- I went in DEBUG folder generated by netbeans and rename addproduct.o file to addproduct.cgi

2- Copied it in htdocs/myappfolder/

My file is using libs of MySQL and Boost and I guess I am getting error due to same reason. I am willing to know how do I link **includes** and **libs** along with CGI?

The C++ code is given below which comes along with MySQL Connector/C++

**Update:** After fiddling with paths I now get the following error:

> inventory dyld: Library not loaded: libmysqlcppconn.6.dylib
> Referenced from: /Applications/MAMP/htdocs/inventory/Inventory/dist/Debug/GNU-MacOSX/./inventory Reason: image not found Trace/BPT trap [http://pastie.org/5723836](http://pastie.org/5723836)

**otool** gives the following info:

otool -LMV inventory

```
inventory:
    libmysqlcppconn.6.dylib (compatibility version 6.0.0, current version 6.1.1)
    time stamp 2 Thu Jan  1 05:00:02 1970
    /usr/lib/libstdc++.6.dylib (compatibility version 7.0.0, current version 7.9.0)
    time stamp 2 Thu Jan  1 05:00:02 1970
    /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 125.2.11) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T07:50:12.807

看起来你使用了错误的文件。.o 文件是一个目标文件，它是编译的结果，但尚未链接。我希望 netbeans 也生成了一个名为 addproduct 的文件，没有任何扩展名。那是您可以由apache调用的可执行文件。

PS 如果你对 C++ 和 CGI​​ 很认真，你可能想看看[fastcgi](http://www.fastcgi.com/drupal/)。

# android - Android. Which is better XML or Code to load images for 2 languages

> ID：14412101
> 
> 赞同：0
> 
> 时间：2013-01-19T07:20:56.933
> 
> 标签：android

I have an application that is suppose to be built in English and Arabic. so i have drawable-en and drawable-ar.

My question is, is it better to set the images in XML, because android will figure out which language is selected and to show the appropriate image. Or i do this through code and check for language and set its image. I don't want the application to crash with memory error etc.

Method 1: `android:background="@drawable/background2"`

Method 2: //here some cache is put into work.

```
 ImageResourceHandler.RenderImageBackgroundForView(getResources(), findViewById(R.id.imageView), R.drawable.activitybackground); 
```

//this is direct image set to backgroup

```
((Button) findViewById(R.id.languageButton)).setBackgroundResource(R.drawable.langeng); 
```

Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T07:46:42.743

> 因为android会找出选择了哪种语言并显示适当的图像

您解决了自己的问题；）这是 Android 的工作方式。

另一种方式也是可能的，但更少的代码更容易维护

# android - Error in AndroidManifest.xml while making "My First App" from developer.android.com

> ID：14412104
> 
> 赞同：0
> 
> 时间：2013-01-19T07:21:43.940
> 
> 标签：android, xml, eclipse, android-manifest

I am learning Android development through the training given on developer.android.com and I have done till "Starting Another Activity". When I tried to run my code, I get the following error in AndroidManifest.xml :

> error: Error Parsing XML: XML or text declaration not at start of entity

I suppose I have not edited a line on AndroidManifest.xml as I am using eclipse IDE and did not need to create the labels myself. Here is my AndroidManifest.xml:

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.myfirstapp"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.myfirstapp.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.example.myfirstapp.DisplayMessageActivity"
        android:label="@string/title_activity_display_message"
        android:parentActivityName="com.example.myfirstapp.MainActivity" >
        <meta-data
            android:name="android.support.PARENT_ACTIVITY"
            android:value="com.example.myfirstapp.MainActivity" />
    </activity>
</application>

</manifest> 
```

The error is showing in the first line of code. Please help.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T07:27:26.230

您的项目未正确刷新，这就是显示错误的原因

在日食`Project-->Clean`位置

然后只需清理并构建您的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T07:30:06.520

错误可能是因为你的布局文件

完成 XML 中的每个标记

像这样

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:orientation="vertical">

 <TextView android:id="@+id/text1"
     android:textSize="16sp"
     android:textStyle="bold"
     android:layout_width="match_parent"
     android:layout_height="wrap_content"/>

 <TextView android:id="@+id/text2"
     android:textSize="16sp"
     android:layout_width="match_parent"
     android:layout_height="wrap_content"/>
 </LinearLayout> 
```

# c# - view crystal reports based on combo box selected in c# windows application

> ID：14412110
> 
> 赞同：1
> 
> 时间：2013-01-19T07:23:05.700
> 
> 标签：c#, crystal-reports, windows-applications

I used following code but I didn't get output.

```
SqlDataAdapter da = new SqlDataAdapter("select ddate,details from activitys where customerid=(Select customerid from crmtbe where companyname='" + comboBox1.Text + "')", con);
            DataSet dt = new DataSet();
            da.Fill(dt, "activitys");
            CrystalReport3 report = new CrystalReport3();
            report.SetDataSource(dt.Tables["activitys"]);
            crystalReportViewer1.ReportSource = report;
            crystalReportViewer1.Refresh(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T09:26:54.447

add Databind() to reportViewer. And it is better to use ID to retrieving data from database instead of names.

# algorithm - Google Interview : Find the maximum sum of a polygon

> ID：14412112
> 
> 赞同：5
> 
> 时间：2013-01-19T07:23:39.343
> 
> 标签：algorithm, data-structures, matrix-multiplication

Given a polygon with `N` vertexes and `N` edges. There is an int number(could be negative) on every vertex and an operation in set `(*,+)` on every edge. Every time, we remove an edge E from the polygon, merge the two vertexes linked by the edge `(V1,V2)` to a new vertex with value: `V1 op(E) V2`. The last case would be two vertexes with two edges, the result is the bigger one.

Return the max result value can be gotten from a given polygon.

For the last case we might not need two merge as the other number could be negative, so in that case we would just return the larger number.

How I am approaching the problem:

```
 p[i,j] denotes the maximum value we can obtain by merging nodes from labelled i to j.
 p[i,i] = v[i] -- base case
 p[i,j] = p[i,k] operator in between p[k+1,j] , for k between i to j-1.
and then p[0,n] will be my answer.
Second point , i will have to start from all the vertices and do the same as above as this will be cyclic n vertices n edges.
The time complexity for this is n^3 *n i.e n^4 . 
```

Can i do better then this ?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T07:45:34.793

正如您正确识别（标记）的那样，这确实与矩阵乘法问题非常相似（我以什么顺序将矩阵相乘以便快速完成）。

这可以使用动态算法以多项式方式求解。

我将改为解决一个类似的、更经典（和相同）的问题，给定一个带有数字、加法和乘法的公式，用什么括号括起来它会给出最大值，例如 `6+1 * 2`变成`(6+1)*2`大于`6+(1*2)`.

让我们表示我们的输入`a1 to an`实数和 o(1),...o(n-1)`*`或`+`。我们的方法将如下工作，我们将观察表示 a1,...aj 的最大公式（在括号化之后）的子问题 F(i,j)。我们将创建一个此类子问题的表，并观察 F(1,n) 正是我们正在寻找的结果。

定义

```
F(i,j)

 - If i>j return 0 //no sub-formula of negative length
 - If i=j return ai // the maximal formula for one number is the number
 - If i<j return the maximal value for all m between i (including) and j (not included) of:
     F(i,m) (o(m)) F(m+1,j) //check all places for possible parenthasis insertion 
```

这经历了所有可能的选择。正确性的证明是通过对大小 n=ji 的归纳来完成的，而且非常简单。

**让我们通过运行时分析：**

如果我们不为较小的子问题动态保存值，则运行速度会很慢，但是我们可以使该算法在`O(n^3)`

我们创建了一个 *n 表 T，其中索引 i,j 处的单元格包含 F(i,j) 填充 F(i,i) 和 F(i,j) 对于 j 小于 i 在 O(1) 中完成每个单元格，因为我们可以直接计算这些值，所以我们沿对角线填充 F(i+1,i+1) （我们可以快速完成，因为我们已经知道递归公式中的所有先前值），我们重复这个 n n 对角线的时间（实际上是表中的所有对角线）并填充每个单元格需要 (O(n))，因为每个单元格有 O(n) 个单元格，我们在 O(n^2) 中填充每个对角线，这意味着我们填充了所有O(n^3) 中的表。填写表格后，我们显然知道 F(1,n) 是您问题的解决方案。

![我们填表的顺序](../Images/51348fa9d9f595cb578573b648afea04.png)

**现在回到你的问题**

如果您将多边形转换为`n`不同的公式（一个用于从每个顶点开始）并在其上运行公式值的算法，您将得到您想要的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T07:50:25.897

我认为您可以减少对蛮力搜索的需求。例如：如果有一个链

```
x + y + z 
```

您可以将其替换为值为总和的单个顶点，没有比这更好的了。在处理 +ve 整数时，需要在加法之后进行乘法运算。因此，如果一切都是积极的，那么只需减少所有 + 链，然后再重复。

这样就剩下了有 -ve 数字的情况。在我看来，单个 -ve 数字的策略非常明显，对于两个 -ve 数字有一些情况（记住 - x - 是正数），对于超过 2 个 -ve 数字，它似乎变得棘手：- )

# asp.net - crystal reports giving Database logon failed or asking for credentials

> ID：14412116
> 
> 赞同：0
> 
> 时间：2013-01-19T07:24:15.053
> 
> 标签：asp.net, visual-studio, sql-server-2008, c#-4.0, crystal-reports

i have tried almost everything I could. I have a web app in ASP.net with c#. I am fetching data from the database tables and adding it to dataset. Then I set this dataset as the source to the report. My code is as following.

```
con.ConnectionString = ConfigurationManager.ConnectionStrings["familyConnectionString"].ConnectionString;

            SqlDataAdapter sda = new SqlDataAdapter("select uid, member_name, gender, dob from family where uid='"+uid+"'", con);
            DataSet1 myds = new DataSet1();
            sda.Fill(myds, "family");

            SqlDataAdapter sda1 = new SqlDataAdapter("select id from birth_certificates where p_id='"+uid+"'", con);
            sda1.Fill(myds, "birth_certificates");

            ReportDocument rpt = new ReportDocument();
            rpt.Load(Server.MapPath("birth_certi_report.rpt"));
            rpt.Refresh();
            rpt.SetDataSource(myds);
            rpt.SetDatabaseLogon("","",@".\sqlexpress","project2");
            CrystalReportViewer1.ReportSource = rpt;
            CrystalReportViewer1.DataBind();
            CrystalReportViewer1.Visible = true;
            CrystalReportViewer1.RefreshReport(); 
```

I am using integrated security so I left username and password blank. Please help.

![Asking for Credentials](../Images/7abe3f0c0ee5f024941541cf086560fc.png)

Please Note that the above code is written inside a DropDown_selectedIndexChanged() event. I tried adding it to the page_load but it didn't work.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T10:32:17.537

如果您不担心身份验证，那么就这样做吧。创建一个水晶报表的实例并设置它的数据源。这就是您需要做的所有事情并且它可以工作。*确保水晶报告在您的解决方案中。

```
 con.ConnectionString = ConfigurationManager.ConnectionStrings["familyConnectionString"].ConnectionString;
      // the magic
        birth_certi_report myreport = new birth_certi_report();
        DataSet1 myds = new DataSet1();
        SqlDataAdapter sda1 = new SqlDataAdapter("select id from birth_certificates where p_id='"+uid+"'", con);
        sda1.Fill(myds, "birth_certificates");
        myreport.SetDataSource(myds);
        crystalReportViewer1.ReportSource = myreport; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-05T03:52:31.983

出生证书报告 myreport = 新出生证书报告（）；

在这一行中，您提到了birth_certi_report 是水晶报告。我的水晶报告名称是 applicationreport 但它显示错误。

将 myreport 变暗为新应用程序报告

错误是类型未定义

# ios - iOS - UIView subclass won't rotate with device

> ID：14412117
> 
> 赞同：0
> 
> 时间：2013-01-19T07:24:26.910
> 
> 标签：ios, uiview, rotation

I have a custom UIView that I use to display synchronization in my device, but it won't rotate with the device when the orientation changes. Everything else rotates just fine, is there something I am missing to ensure my subclassed uiview will rotate?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T07:26:06.380

Programmatically:

```
 - (BOOL)shouldAutorotate{
        return YES;
    } 
```

add this. Hope this helps..

Or go to your Target Settings and click the directions you want it to rotate, but this will affect all your viewcontrollers.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T09:16:16.537

您可以按照以下任何一种方法，

1-创建一个类来继承 UIView 并覆盖 .m（实现文件）中的 shouldAutorotate。现在在您的 viewController 中包含这个自定义 UIView 类来创建对象。

2-为 UIView 类创建类别

注意：- 如果您的构建应用程序支持 iOS6，那么不要忘记包含适用于您要求的方法

```
 >>>>>- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation;
 >>>>- (BOOL)shouldAutorotate;
 >>>>- (NSUInteger)supportedInterfaceOrientations;
 >>>>- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation; 
```

类别示例：-

```
 @interface UIView (Additions)

       @end

       @implementation UIView (Additions)

           - (BOOL)shouldAutorotate{
              return YES;
                    }

       @end 
```

# java - Unable to interact with .class files

> ID：14412119
> 
> 赞同：0
> 
> 时间：2013-01-19T07:25:23.163
> 
> 标签：java, class, classpath, jgrasp

everyone! I am trying to work on a simple program that takes a command-line argument, and passes it as a parameter to a function from a Text.class file that our professor instructed us to download, and place in the working directory. I placed it in the same folder that contained the .java file. I think that is where I went wrong, could someone please offer me some assistance? Thank you :)

```
----jGRASP exec: javac -g /home/seedl/Documents/School/CSx/Programming Assignments/#1/SpeedPrinter/src/speedprinter/SpeedPrinter.java
SpeedPrinter.java:14: error: cannot find symbol
        Text.toNonnegativeDouble(args[0]);
        ^
  symbol:   variable Text
  location: class SpeedPrinter
1 error

 ----jGRASP wedge: exit code for process is 1.
 ----jGRASP: operation complete. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T07:39:09.250

您必须将 Text.class 添加到您的类路径中。如果您从命令行运行，请使用 java -cp %path_to_Text.class%。如果您从 IDE 运行，则可以将文件夹添加到类路径中，以便它们可以包含在您的程序中，

# extjs - How to get only deleted records from an Ext js Grid store?

> ID：14412120
> 
> 赞同：2
> 
> 时间：2013-01-19T07:25:28.890
> 
> 标签：extjs, extjs3, gridpanel

I have a grid store and I am able to get modified data using

`var modifiedData = store.getModifiedData();`

Now I want to get deleted records (I am using ExtJs 3).

I tried using `var deletedData = store.getRemovedRecords();` but I guess this property is available in ExtJs 4.

I just want to fetch the records that are deleted from the grid. Any help would be appreciated.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T09:31:59.677

默认情况下这是不可能的。

ExtJS 3.x 只能跟踪修改的记录（开箱即用）。已删除（删除）的记录将被完全删除。但是你可以做一件事；商店将触发**每条**记录的删除事件，记录本身作为第二个参数。您可以使用它来创建自己的已删除记录数组。我猜这个实现会很简单。您可以按实例执行此操作，也可以通过扩展创建全新的存储类型。但我想后者在这里并不真正需要。

这是一个例子。请注意，您可能需要处理其他事件来清除 removedList。

```
var myStore = new Ext.data.Store({
    removedList: [],
    listeners: {
        clear: function(store) {
              store.removedList =  [];
        },
        load: function(store) {
              store.removedList =  [];
        },
        remove: function(store, record, index) {
              store.removedList.push(record);
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-19T11:54:57.047

检查这两个链接。他们可能会有所帮助。

[http://www.sencha.com/forum/showthread.php?58888-Store-find-deleted-added-records](http://www.sencha.com/forum/showthread.php?58888-Store-find-deleted-added-records) mi [http://www.sencha.com/forum/showthread.php?15671-Ext.data。持久存储](http://www.sencha.com/forum/showthread.php?15671-Ext.data.Store-with-persistence)

# security - 生成新 API 密钥的最佳方法是什么？

> ID：14412132
> 
> 赞同：116
> 
> 时间：2013-01-19T07:26:33.470
> 
> 标签：security, api-key

所以现在有很多不同的服务，谷歌 API、Twitter API、Facebook API 等等。

每个服务都有一个 API 密钥，例如：

`AIzaSyClzfrOzB818x55FASHvX4JuGQciR9lv7q`

所有密钥的长度和它们包含的字符都不同，我想知道生成 API 密钥的最佳方法是什么？

我不是要一种特定的语言，只是创建密钥的一般方法，它们应该是对用户应用程序细节的加密，还是散列，还是随机字符串的散列等。我们是否应该担心散列算法（MSD、SHA1、bcrypt）等？

**编辑：** 我和几个朋友谈过（电子邮件/推特），他们建议只使用去掉破折号的 GUID。

不过，这对我来说似乎有点 hacky，希望能得到更多的想法。

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-09-11T00:30:35.937

使用专为密码学设计的随机数生成器。然后base-64对数字进行编码。

这是一个 C# 示例：

```
var key = new byte[32];
using (var generator = RandomNumberGenerator.Create())
    generator.GetBytes(key);
string apiKey = Convert.ToBase64String(key); 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2014-06-23T14:02:11.097

API 密钥需要具有以下属性：

*   唯一标识授权 API 用户——“API 密钥”的“密钥”部分
*   验证该用户 - 不能被猜测/伪造
*   如果用户行为不端，可以撤销 - 通常他们键入可以删除记录的数据库。

通常，您将拥有数千或数百万个 API 密钥，而不是数十亿，因此它们不需要：

*   可靠地存储有关 API 用户的信息，因为这些信息可以存储在您的数据库中。

因此，生成 API 密钥的一种方法是获取两条信息：

1.  保证唯一性的序列号
2.  足够的随机位来填充密钥

并使用私人秘密对其进行签名。

计数器保证他们唯一标识用户，并且签名防止伪造。可撤销性要求在执行任何需要 API 密钥授权的操作之前检查密钥在数据库中是否仍然有效。

如果您需要从多个数据中心生成密钥，或者没有其他好的分布式方式来分配序列号，那么一个好的 GUID 生成器是递增计数器的一个很好的近似值。

* * *

> 或随机字符串的哈希

散列并不能防止伪造。 [签名](http://en.wikipedia.org/wiki/Digital_signature)是保证密钥来自您的保证。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-20T08:55:02.290

我使用 UUID，格式为小写，不带破折号。

生成很容易，因为大多数语言都内置了它。

API 密钥可能会被泄露，在这种情况下，用户可能希望取消他们的 API 密钥并生成一个新的，因此您的密钥生成方法必须能够满足这一要求。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-06-20T20:35:58.620

如果你想要一个只有字母数字字符的 API 密钥，你可以使用[base64-random](https://stackoverflow.com/a/18730859/145173)方法的变体，只使用 base-62 编码。base-62 编码器基于[此](https://codereview.stackexchange.com/a/14101/171964)。

```
public static string CreateApiKey()
{
    var bytes = new byte[256 / 8];
    using (var random = RandomNumberGenerator.Create())
        random.GetBytes(bytes);
    return ToBase62String(bytes);
}

static string ToBase62String(byte[] toConvert)
{
    const string alphabet = "0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";
    BigInteger dividend = new BigInteger(toConvert);
    var builder = new StringBuilder();
    while (dividend != 0) {
        dividend = BigInteger.DivRem(dividend, alphabet.Length, out BigInteger remainder);
        builder.Insert(0, alphabet[Math.Abs(((int)remainder))]);
    }
    return builder.ToString();
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2022-02-02T20:13:48.763

您可以通过打开一个新选项卡来尝试您的 Web 浏览器控制台，在 Chrome 上按 CTRL + SHIFT + i，然后输入以下立即调用的函数表达式 (IIFE)：

```
(async function (){
  let k = await window.crypto.subtle.generateKey(
    {name: "AES-GCM",length: 256},true,["encrypt", "decrypt"]);
  const jwk = await crypto.subtle.exportKey("jwk", k)
  console.log(jwk.k)
})() 
```

示例输出：

```
gv4Gp1OeZhF5eBNU7vDjDL-yqZ6vrCfdCzF7HGVMiCs 
```

参考：

[https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/generateKey](https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/generateKey)

[https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/exportKey](https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/exportKey)

我承认我主要是为自己写这个以供将来参考......

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-20T09:26:41.153

API 密钥应该是一些随机值。随机到无法预测。它不应包含其所针对的用户或帐户的任何详细信息。如果您确定创建的 ID 是随机的，则使用 UUID 是一个好主意。

例如，早期版本的 Windows 产生了可预测的 GUID，但这是老生常谈了。

# linux - 使用 ELDK 5.3 APR.H ssize_t 错误在 Centos 6.3 上为 ARM 交叉编译 freeswitch

> ID：14412136
> 
> 赞同：2
> 
> 时间：2013-01-19T07:26:57.683
> 
> 标签：linux, arm, cross-compiling, freeswitch

我正在尝试在 CentOS 6.3 上使用 ELDK 5.3 为 ARM 交叉编译 freeswitch。

在make上发现这个错误：

```
./include/apr.h:347:2: error: #error Can not determine the proper size for ssize_t 
```

我已经完成了以下声明

```
declare -x CROSS_COMPILE="/opt/eldk-5.3/armv5te/sysroots/i686-eldk-linux/usr/bin/armv5te-linux-gnueabi/arm-linux-gnueabi-"
declare -x CC="$CROSS_COMPILE"gcc
declare -x CXX="$CROSS_COMPILE"g++
declare -x CPP="$CROSS_COMPILE"cpp
declare -x STRIP="$CROSS_COMPILE"strip
declare -x RANLIB="$CROSS_COMPILE"ranlib
declare -x AR="$CROSS_COMPILE"ar
declare -x AS="$CROSS_COMPILE"as
declare -x NM="$CROSS_COMPILE"nm
declare -x LD="$CROSS_COMPILE"ld

export PATH=$PATH:/opt/eldk-5.3/armv5te/sysroots/i686-eldk-linux/usr/bin/armv5te-linux-gnueabi 
```

使用以下标志配置

```
./configure --target=arm --host=arm-linux --build=i686-linux --prefix=/opt/eldk-5.3/armv5te/rootfs-base/armcodasVL  ac_cv_file__dev_ptmx=yes config_BUILD_CC=gcc config_TARGET_CC=arm-linux-gnueabi-gcc config_TARGET_READLINE_INC=" " ac_cv_file__dev_zero=yes ac_cv_func_setpgrp_void=yes apr_cv_tcp_nodelay_with_cork=yes ac_cv_file_dbd_apr_dbd_mysql_c=no ac_cv_va_copy=yes 
```

然后是make，我无法弄清楚为什么会这样！请建议你们中是否有人遇到过同样的情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T07:47:15.477

我之前发布的解决方案有点糟糕。因为它在生成的标头中，后来我找到了正确的方法，那就是添加一个配置标志

```
export ac_cv_sizeof_ssize_t=4; 
```

只是在配置之前做了它，从那以后一切都很好！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T10:03:33.210

我以某种方式通过替换 libs/apr/include/apr 中的以下行来管理它。

```
#error Can not determine the proper size for ssize_t 
```

和

```
#define APR_SSIZE_T_FMT "ld" 
```

# list - 构建列表 Scheme/DrRacket 中的构建列表

> ID：14412137
> 
> 赞同：0
> 
> 时间：2013-01-19T07:26:57.527
> 
> 标签：list, scheme, racket

尝试创建一个包含 n 个元素的列表，其中每个列表都包含 r 个元素。即 `(function 2 3)`会`(list (list 0 0 0)(list 0 1 2))`。这些元素是通过将第 n 个元素乘以从 0 开始的第 r 个元素制成的。这是我的代码：

```
(define (nr nc)     
  (build-list nr (lambda (x) 
                   (build-list nc (lambda (x) (* x 1)))))) 
```

所以我`(function 2 3)`出来了`(list (list 0 1 2)(list 0 1 2))`，我不知道如何将第一个列表乘以 0，第二个乘以 1，第三个乘以 2，依此类推。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T09:07:05.390

你很接近：

```
(define (build nr nc)     
  (build-list nr (lambda (r) 
                   (build-list nc (lambda (c) (* r c))))))

> (build 2 3)
'((0 0 0) (0 1 2))

> (build 3 3)
'((0 0 0) (0 1 2) (0 2 4)) 
```

替代：

```
(define (build2 nr nc)
  (for/list ([r nr])
    (for/list ([c nc])
      (* r c)))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T08:09:26.013

```
(define (range n)
  (define (range-iter i accum)
    (if (= i 0) (cons 0 accum)
        (range-iter (- i 1) (cons i accum))))
  (range-iter (- n 1) `()))

(define (nested-list n r)
  (map 
   (lambda (multiplier) 
     (map 
      (lambda (cell) (* cell multiplier)) 
      (range r))) 
   (range n))) 
```

# javascript - Google Maps api v3 - 在从点击事件添加新标记之前删除标记

> ID：14412139
> 
> 赞同：3
> 
> 时间：2013-01-19T07:27:01.800
> 
> 标签：javascript, google-maps-api-3

我使用以下代码并试图弄清楚如何添加一个我可以调用的函数，该函数将在添加新标记之前删除以前的标记。地图使用 onclick 事件在用户单击的位置添加标记...基本上我只希望在任何给定时间在地图上都有一个标记。

我已经搜索并尝试了几乎所有东西，但一定是做错了……请快速浏览一下代码，让我知道它是如何实现的。

太感谢了！

```
<script>
  function initialize() {
    var mapOptions = {
      zoom: 11,
      center: new google.maps.LatLng(document.getElementById('field_lat').value,document.getElementById('field_lng').value),
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById('map_canvas'),
        mapOptions);

    google.maps.event.addListener(map, 'click', function(e) {

        // SET MY UI SEARCH TEXT FIELDS TO THE LAT AND LNG
        document.getElementById('field_lat').value = e.latLng.lat();
        document.getElementById('field_lng').value = e.latLng.lng();

      placeMarker(e.latLng, map);
    });
  } 

  function placeMarker(position, map) {
      //Marker.setMap(null);
    var Marker = new google.maps.Marker({
         position: position,
         map: map
    });
    map.panTo(position);

    $("#listbox ul").empty();
    docall(); 
  }

  google.maps.event.addDomListener(window, 'load', initialize);

</script> 
```

地图在正文中如下

```
<div id="map_canvas" style="width: 400px; height: 400px;"></div> 
```

我试图让这个或类似的工作，但没有骰子......

```
// Deletes all markers in the array by removing references to them
function deleteOverlays() {
if (markersArray) {
for (i in markersArray) {
markersArray[i].setMap(null);
}
markersArray.length = 0;
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-10-27T11:21:43.293

如果有，只需删除前一个标记。

```
var Marker;
function placeMarker(position, map) {
  if(typeof marker!= 'undefined')
      marker.setMap(null);
  var Marker = new google.maps.Marker({
     position: position,
     map: map
  });
  map.panTo(position);

  $("#listbox ul").empty();
  docall(); 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T08:52:23.560

只需执行以下操作：

一、声明一个全局变量：

```
var markersArray = []; 
```

二、定义一个函数：

```
function clearOverlays() {
  for (var i = 0; i < markersArray.length; i++ ) {
   markersArray[i].setMap(null);
  }
} 
```

或者

```
google.maps.Map.prototype.clearOverlays = function() {
  for (var i = 0; i < markersArray.length; i++ ) {
     markersArray[i].setMap(null);
  }
} 
```

三、在调用以下命令之前，在“markerArray”中推送标记：

```
markersArray.push(marker);
google.maps.event.addListener(marker,"click",function(){}); 
```

四。在需要的地方调用该函数。

```
clearOverlays(); 
```

或者

```
map.clearOverlays(); 
```

而已！！

希望对您有所帮助。

资料来源：[Google Maps API v3：如何删除所有标记？](https://stackoverflow.com/questions/1544739/google-maps-api-v3-how-to-remove-all-markers)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-07T23:42:55.790

您可以在第一次单击时设置标记，然后在后续单击时更改位置。

```
var marker;

google.maps.event.addListener(map, 'click', function(event) {
   placeMarker(event.latLng);
});

function placeMarker(location) {
  if (marker == null) {
    marker = new google.maps.Marker({
          position: location,
          map: map
      });
  } else {
    marker.setPosition(location);
  }
} 
```

# prolog - 从 B-Prolog 中的 stdio 读取数字

> ID：14412144
> 
> 赞同：1
> 
> 时间：2013-01-19T07:27:51.300
> 
> 标签：prolog, b-prolog

从标准输入中读取 B-Prolog 中的一个数字或几个以空格分隔的数字（不跟句号）的最简单方法是什么？

例如，对于 EcliPse，我编写了这些简单的谓词（我不需要错误处理）：

```
read_number(N) :-
    read_token(Token, _),
    (
        Token == - 
    ->
        read_token(Nabs, _),
        N is -1 * Nabs
    ;
        N is Token
    ).

read_numbers_list(Ns) :-
    read_string(end_of_line, _, String),
    split_string(String, " ", "", Ss),
    ( foreach(S, Ss), foreach(N, Ns) do
        number_string(N, S) ). 
```

但是为 B-Prolog 写这样的东西对我来说看起来过于复杂 - 没有 read_token 或 split_string ......

这种平凡的任务有简单的方法吗？也许我忽略了一些标准谓词？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T19:56:36.080

我最终只在 Prolog 之外预处理输入，然后使用`read/1`.

此外，来自 B-Prolog 创建者 Neng-Fa Zhou 的信息（[https://groups.google.com/forum/?fromgroups#!topic/comp.lang.prolog/KSXc2QTWZck](https://groups.google.com/forum/?fromgroups#!topic/comp.lang.prolog/KSXc2QTWZck)）：

> 您可以使用名为 read_next_token(Type,Val) 的内部谓词来实现您的目的。另一个谓词，称为 b_NEXT_TOKEN_ff(Type,Val)，做同样的事情，但速度更快。这些谓词没有记录。

# javascript - 来自 chrome 开发工具的功能中出现意外的分号

> ID：14412145
> 
> 赞同：0
> 
> 时间：2013-01-19T07:27:51.877
> 
> 标签：javascript, jquery, html, ajax, xmlhttprequest

Chrome 开发者工具说这个函数在第三个右花括号之后有一个意外的分号。不应该去那里结束var表单声明吗？否则，如果我没有它，铬会说第四个花括号不应该在那里。

我对这段代码做错了什么：

```
function submitForm(form) {
    var form = $("form").submit(function() {
        var formData = new FormData(form);
        console.log("formData");
        var XHR;
        if (window.XHMLHttpRequest){XHR = new XHMLHttpRequest();}
        else {XHR = new ActiveXObject("Microsoft.XMLHTTP");}
        XHR.open("POST","mail.php",true);
        console.log("XHR opened.");
        XHR.onreadystatechange = function(e) {
            if (this.readyState == 4 && this.status == 200) {
                XHR.send(formData);
                console.log("Sent formData.");
            }       
        }
    };
} 
```

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T07:29:18.870

在您的代码中，您有：

```
var form = $("form").submit(function() { 
```

但是，您永远不会关闭`(`,`.submit(`转换`};`为`});`（在您拥有它的唯一行上），它应该可以工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T07:30:22.683

更新到

```
function submitForm(form) {
    var form = $("form").submit(function() {
        var formData = new FormData(form);
        console.log("formData");
        var XHR;
        if (window.XHMLHttpRequest){XHR = new XHMLHttpRequest();}
        else {XHR = new ActiveXObject("Microsoft.XMLHTTP");}
        XHR.open("POST","mail.php",true);
        console.log("XHR opened.");
        XHR.onreadystatechange = function(e) {
            if (this.readyState == 4 && this.status == 200) {
                XHR.send(formData);
                console.log("Sent formData.");
            }       
        }
    });
} 
```

# php - php中的文件附件邮件

> ID：14412153
> 
> 赞同：0
> 
> 时间：2013-01-19T07:28:29.583
> 
> 标签：php, html

您好，我正在通过电子邮件提交 html 表单。服务器端脚本是 PHP 。我的 html 表单是

```
<form action='sendmail.php' method='post'>
   Name:<input type="text" name="name">
    File:<input type='file' name='attach'>
<input type="submit"> 
```

我用于发送电子邮件的 php 文件是

```
<?php 
   $strTo = "xyz@gmail.com";
     $strHeader .= "From: ".$_POST["name"]."<".$_POST["name"].">";  
     $strHeader .= "MIME-Version: 1.0\n";
     $strHeader .= "MIME-Version: 1.0\n"; 
   $strHeader .= "Content-Type: multipart/mixed; boundary=\"".$strSid."\"\n\n";  
    $strHeader .= "This is a multi-part message in MIME format.\n";
   $strHeader .= "--".$strSid."\n"; 
    $strHeader .= "Content-type: text/html; charset=utf-8\n"; 
    $strHeader .= "Content-Transfer-Encoding: 7bit\n\n";  
    $strHeader .= $strMessage."\n\n";  
 if($_FILES["attach"]["name"] != "")
 {
        $strFilesName = $_FILES["fileAttach"]["name"];  
        $strContent = chunk_split(base64_encode(file_get_contents($_FILES["fileAttach"]["tmp_name"])));  
       $strHeader .= "--".$strSid."\n";  
         $strHeader .= "Content-Type: application/octet-stream; name=\"".$strFilesName."\"\n";  
       $strHeader .= "Content-Transfer-Encoding: base64\n";  
        $strHeader .= "Content-Disposition: attachment; filename=\"".$strFilesName."\"\n\n";  
       $strHeader .= $strContent."\n\n";  
       }
 $flgSend = @mail($strTo,"no-subjet",null,$strHeader); 
```

**但它不会进入 if 条件**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-19T07:32:50.037

尝试用这个替换你的表单：

```
<form action="sendmail.php" method="post" enctype="multipart/form-data">
    Name:<input type="text" name="name">
    File:<input type="file" name="attach" id="attach">
    <input type="submit">
</form> 
```

表单中的**enctype**属性很重要。

有关详细信息，请参阅以下链接：http: [//www.w3schools.com/php/php_file_upload.asp](http://www.w3schools.com/php/php_file_upload.asp)

还要确保 PHP 中的所有名称都与 HTML 匹配，例如文件输入的名称是**attach**，所以它应该在 PHP 中相同。

```
if($_FILES["attach"]["name"] != "")
{
    $strFilesName = $_FILES["attach"]["name"];
    ...
} 
```

# javascript - 如何向下滚动页面以查看单击的链接中的 div

> ID：14412157
> 
> 赞同：-1
> 
> 时间：2013-01-19T07:28:55.687
> 
> 标签：javascript, jquery, html, focus

在我的 html 页面中，存在一个注册链接和一个包含注册表单的 div。

```
<a href="index.html"><img src="images/logo2.png" alt="LOGO"></a>

<div>
            <form method="POST" action="signup.php">
                <table>
                    <tr>
                        <td>First Name</td>
                        <td><input type="text" name="fname"></input></td>
                    </tr>
                    <tr>
                        <td>Last Name</td>
                        <td><input type="text" name="lname"></input></td>
                    </tr>
                    <tr>
                        <td>Email</td>
                        <td><input type="text" name="email"></input></td>
                    </tr>
                    <tr>
                        <td>Re-enter Email</td>
                        <td><input type="text" name="remail"></input></td>
                    </tr>
                    <tr>
                        <td>Password</td>
                        <td><input type="password" name="pwd"></input></td>
                    </tr>
                    <tr>
                        <td>Confirm Password</td>
                        <td><input type="text" name="cpwd"></input></td>
                    </tr>
                    <tr>
                        <td>Birthday</td>
                        <td><input type="text" name="bday"></input></td>
                    </tr>
                    <tr>
                        <td>Sex</td>
                        <td><input type="text" name="sex"></input></td>
                    </tr>
                    <tr>
                        <td><input type="submit" value="Signup"></input></td>
                        <td><input type="button" value="Cancel"></input></td>
                    </tr>
                </table>
            </form>
        </div> 
```

当用户单击注册链接时，我需要向下滚动到 div。有人可以解释如何做到这一点。提前谢谢....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T07:31:43.320

要使用 just `HTML`，您可以使用锚标记。

```
<div><a id='form'></a>
  <form method="POST" action="signup.php">
  ...
</div> 
```

那么您的链接将如下所示：`<a href="#form">Click here to sign up</a>`

说明：该链接指向带有of的`a`锚标记。`id``form`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T07:36:17.443

使用以下，

```
<a href="index.html"><img src="images/logo2.png" alt="LOGO"></a>
<a href="#test">Sign Up</a>

<div id="test">
            <form method="POST" action="signup.php"> ... </form>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T10:26:50.467

通过使用简单的 HTML，使用锚标记，您可以将页面滚动到您的注册 div。href 中的“#”用于在页面内重定向。希望这可以帮助

```
<a href="#mySignUpDiv">Sign Up</a>

<div id="mySignUpDiv">
</div> 
```

# python - 在运行时编辑金字塔配置 .ini 文件

> ID：14412160
> 
> 赞同：0
> 
> 时间：2013-01-19T07:29:36.730
> 
> 标签：python, pyramid

我正在创建一个博客引擎，需要用户在 production.ini 中输入引擎的配置，我想创建一个用户界面，允许用户输入他/她的博客的设置

我已经可以使用从 production/development.ini 获取当前设置

```
event['theme'] = settings['theme']
event['blogname'] = settings['blogname'] 
```

但我也希望能够获取 development/production.ini 的路径或当前正在使用的配置文件的路径，然后在编辑后保存。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T17:54:26.787

这不是该`configuration.ini`文件的目的。它明确旨在成为您的应用程序的只读设置。设置字典中没有内置线程安全性。话虽如此，`global_config['__file__']`在应用程序启动时存在 INI 文件的路径，因此如果您真的需要，可以覆盖它。但一般来说，文件存储的位置应该在文件系统上是只读的。

也许您想编写一个脚本来提示用户输入信息并转储生产.ini 供他们使用？

```
env/bin/setup-blog -o production.ini 
```

也许问题的答案应该存储在数据库或一些支持在运行时变异的外部存储中？

# servicestack - 即使存在 Default.cshtml，ServiceStack 也始终默认重定向到 /metadata

> ID：14412166
> 
> 赞同：1
> 
> 时间：2013-01-19T07:31:19.287
> 
> 标签：servicestack, appharbor

我有一个添加了 ServiceStack Razor 的 ServiceStack 项目。每当我尝试导航到站点的根目录时，我都会被重定向到 /metadata。

这不会发生在我的开发机器上，只会发生在我的托管环境（AppHarbor）中。

我的项目的根目录中确实有一个 Default.cshtml。

导航到其他 URL 工作正常：`/default1.cshtml`,`/myservicewithviews`

我试过`DefaultRedirectPath`在我的 AppHost 中弄乱，但这没有帮助。

试图强制它会`DefaultRedirectPath = "default.cshtml"`导致重定向循环。这是有道理的。

这是什么原因造成的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T07:34:08.127

AppHarbor 仅在构建项目时发布标记为“内容”的文件[（AppHb 常见问题解答）](http://support.appharbor.com/kb/getting-started/frequently-asked-questions)。这个文件是唯一一个没有标记的内容，也是为什么我只在我的托管环境中遇到这个并且可以访问所有其他内容的原因。

未检测到默认文档会导致 ServiceStack 将 RedirectHttpHandler 设置为 /metadata -[此处显示](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack/WebHost.Endpoints/ServiceStackHttpHandlerFactory.cs#L71)

另一个值得注意的点是，AppHarbor 的负载均衡器会在执行响应重定向等操作时导致其内部端口号显示在 ServiceStack URL 中。

要解决此问题，请将以下内容添加到 Web.Config：

```
<appSettings>
    <!-- AppHarbor Setting to stop AppHb load balancer internal port numbers from showing up in URLs-->
    <add key="aspnet:UseHostHeaderForRequestUrl" value="true" />
</appSettings> 
```

您还可以在 AppHarbor 配置面板中配置此设置。

# php - Zend Form 输入数量可变的表单

> ID：14412168
> 
> 赞同：0
> 
> 时间：2013-01-19T07:31:43.440
> 
> 标签：php, forms, zend-framework, zend-form

我需要创建一个接受可变数量事务的表单。该表单有 4 个元素和一个交易数组（定义为：类型（cr/dr）、日期、分类帐（下拉）和金额）。可以有任意数量的事务：这由 javasript 处理并作为 post 数组发送。显然 Zend Forms 没有能力处理这个问题。如何使用 Zend Form 接受无限数量的输入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T16:08:22.463

以下链接将为您提供帮助：

1.  [http://www.jeremykendall.net/2009/01/19/dynamically-adding-elements-to-zend-form/](http://www.jeremykendall.net/2009/01/19/dynamically-adding-elements-to-zend-form/)
2.  [使用可变数据长度初始化 zend 表单](https://stackoverflow.com/questions/10620827/initializing-a-zend-form-with-variable-data-length)
3.  [http://framework.zend.com/apidoc/2.0/classes/Zend.Form.Fieldset.html（Fieldset](http://framework.zend.com/apidoc/2.0/classes/Zend.Form.Fieldset.html)标签用于对表单中的相关元素进行分组）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T08:47:53.360

您必须通过编写将所有 4 个表单字段创建为数组类型

**isArray=>真**

通过使用您的表单字段名称，例如 type[]、date[]、ledger[] 和 amount[]。并且您在表单发布后获得了控制器中的所有值。

这些元素就像数组。现在你可以做任何你想做的事情。

# vb.net - 如何使用 FileUpload 控件上传到物理路径（vb.net）

> ID：14412169
> 
> 赞同：0
> 
> 时间：2013-01-19T07:31:45.153
> 
> 标签：vb.net, file-upload, windows-server-2008-r2

我想使用 FileUpload 控件上传到 Windows 服务器上的物理路径。我在同一台服务器上有 2 个网站，我想从一个网站上传图片并将其保存在另一个网站的图片文件夹中。

我现在使用这个代码，它只接受虚拟路径

```
 FileUpload1.SaveAs(Server.MapPath("~/images/") & filename) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T19:57:24.000

[SaveAs](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.fileupload.saveas.aspx)方法将接受服务器上任何目录的完整路径。诀窍是确保 ASP.Net 应用程序对该目录具有写入权限。我们通常通过将应用程序池标识设置为网络服务，然后授予网络服务用户对该文件的写入权限来做到这一点。

另一个潜在的考虑因素是您是否使用假冒；如果您是，您模拟的用户将需要访问该目录。例如，由于需要访问其他机器上的资源，我们为所有传入请求模拟域服务帐户。由于 ASP.Net 以该用户身份执行操作，因此需要此域服务帐户才能访问该目录。

# xamarin.android - 使用 servicestack 在 Mono for Android 上进行身份验证

> ID：14412170
> 
> 赞同：1
> 
> 时间：2013-01-19T07:31:54.287
> 
> 标签：xamarin.android, servicestack

我已经让 ServiceStack 在服务器和 Windows 测试客户端上运行良好，现在需要让它在我的 Mono For Android 应用程序中运行。

我已经下载了以下内容：

*   ServiceStack.Common.dll

*   ServiceStack.Interfaces.dll

*   ServiceStack.Text.dll

来自 github 提示，并在我的 Mono for Android 项目中添加了对这些的引用。

但是，我们需要使用身份验证，因此需要 ServiceStack.ServiceInterface.Web 命名空间可供客户端使用，因此我可以执行以下操作：

```
var c = new JsonServiceClient("http://localhost:53434");
var authResponse = c.Get(new Auth { UserName = "myusername", Password = "password", RememberMe = true }); 
```

查看我的工作测试客户端，Auth 是在*ServiceStack.ServiceInterface.dll*中定义的，所以大概我需要掌握这个 DLL 或其源代码并在我的项目中编译它。

我在这里是正确的，还是有更简单的方法来设置？我四处搜索，但找不到关于如何将 ServiceStack 与 Mono For Android 一起使用的好资源 - 如果有，请随时指出我！

我注意到[这个](https://stackoverflow.com/questions/13411301/getting-servicestack-working-on-monodroid)StackOverflow 表明我在正确的路线上 - 我可能需要的是为 Mono For Android 编译的*ServiceStack.ServiceInterface.dll 。*

詹姆士

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T09:06:28.803

您不必编译服务器以在任何客户端库中使用，因为在[ServiceStack.Common.ServiceClient.Web.AuthDtos.cs](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Common/ServiceClient.Web/AuthDtos.cs)的客户端库中`ServiceStack.ServiceInterface.dll`也提供了 Auth DTO 的副本。`ServiceStack.Common.dll`

这是可能的，因为服务器和客户端 DTO 都生成相同的线格式。

# android - 在媒体播放器中出现错误：SeekTo 处于错误状态：& 开始在状态 0 中调用

> ID：14412171
> 
> 赞同：2
> 
> 时间：2013-01-19T07:31:55.010
> 
> 标签：android, media-player

当我用作服务时，我在媒体播放器中遇到了一些问题。

**1.** 如果我将 Activity 中的媒体播放器对象初始化为静态并在服务类中进一步使用，那么它会显示给我这个 `error (-38, 0)`, `Attempt to perform seekTo in wrong state: mPlayer=0x0, mCurrentState=0`, `start called in state 0`。

**2.**如果我在服务类中初始化媒体播放器对象，并且用户在活动中进行更多操作，它的节目就是我`Null Pointer`。

```
public static MediaPlayer mPlayer = null; 
```

**播放点击事件**

```
 Audio_Player_Play.setOnClickListener(new OnClickListener()
    {

        @Override
        public void onClick(View v)
        {
            // TODO Auto-generated method stub

            if (mPlayer == null)
            {

                Intent Play_Intent = new Intent(RDS_Singel_Audio.this,
                        Audio_Player.class);

                startService(Play_Intent);
                Audio_Player_Play.setVisibility(View.GONE);
                Audio_Player_Pause.setVisibility(View.VISIBLE);

            } else
            {
                // Play_Streaming();
                mPlayer.seekTo(mPlayer.getCurrentPosition());
                mPlayer.start();
                Audio_Player_Play.setVisibility(View.GONE);
                Audio_Player_Pause.setVisibility(View.VISIBLE);
            }
        }
    }); 
```

**暂停点击事件**

```
Audio_Player_Pause.setOnClickListener(new OnClickListener()
        {

            @Override
            public void onClick(View v)
            {
                // TODO Auto-generated method stub
                // Play_Streaming();
                // checking is medai player running

                Audio_Player_Play.setVisibility(View.VISIBLE);
                Audio_Player_Pause.setVisibility(View.GONE);

                // checking is audio playing in background
                if (mPlayer != null && mPlayer.isPlaying())
                {
                    mPlayer.pause();
                    /*
                     * Intent Pause_Intent = new Intent(RDS_Singel_Audio.this,
                     * Audio_Player.class); stopService(Pause_Intent);
                     */
                    Audio_Player_Play.setVisibility(View.VISIBLE);
                    Audio_Player_Pause.setVisibility(View.GONE);
                }
            }
        }); 
```

**OnResume() - OnPause() -OnDistroy()**

```
@Override
    protected void onResume()
    {
        super.onResume();
    }
@Override
    protected void onPause()
    {
        // cleanUp();
        if (mPlayer != null && mPlayer.isPlaying())
        {
            mPlayer.release();
            mPlayer = null;

        }

        super.onPause();
    }
@Override
    protected void onDestroy()
    {
        cleanUp();
        super.onDestroy();
    }

private void cleanUp()
    {
        if (mPlayer != null)
        {
            mVisualizerView.release();
            mPlayer.release();
            mPlayer = null;
        }
    } 
```

**服务.Java**

```
public class Audio_Player extends Service
{
    private static final String TAG = "MyService";

    // public static MediaPlayer mPlayer;
    Function f;
    RDS_Singel_Audio sa;
    MediaPlayer mPlayer;

    @Override
    public IBinder onBind(Intent intent)
    {
        return null;
    }

    @Override
    public void onCreate()
    {
        try
        {
            sa = new RDS_Singel_Audio();
            Toast.makeText(this, "My Service Created", Toast.LENGTH_LONG)
                    .show();

            sa.mPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
            sa.mPlayer.setDataSource(sa.Audio_URL);
            sa.mPlayer.prepare();// might take long! (for buffering, etc)
            sa.mVisualizerView.link(sa.mPlayer);
            sa.mPlayer.start();
            sa.addLineRenderer();
            sa.mPlayer.setLooping(false); // Set looping

            // sa.mPlayer.start();

        } catch (Exception e)
        {
            // TODO: handle exception
            Log.d(TAG, "" + e);
        }

    }

    @Override
    public void onDestroy()
    {
        Toast.makeText(this, "My Service Stopped", Toast.LENGTH_LONG).show();
        Log.d(TAG, "onDestroy");
        super.onDestroy();
        if (sa.mPlayer != null)
        {
            sa.mPlayer.stop();
            sa.mPlayer.release();

        }
        sa.mPlayer = null;

    }

    @Override
    public void onStart(Intent intent, int startid)
    {
        Toast.makeText(this, "My Service Started", Toast.LENGTH_LONG).show();
        Log.d(TAG, "onStart");

        // mPlayer.setDataSource("http://clients.ncrypted.net/riddimapp/images/audio/4/df9919ccb2880933c795f43d735cf9bc.mp3");

    }

} 
```

我找到了一些关于同一问题的[链接](https://stackoverflow.com/questions/9008770/media-player-called-in-state-0-error-38-0)，但我不知道如何解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-08T11:09:39.953

好吧，我看到了你的这部分代码，但不清楚你想要实现什么。您正试图让玩家转到其当前位置，但它已经在该位置？你可以删除那个部分。

```
// Play_Streaming();
mPlayer.seekTo(mPlayer.getCurrentPosition()); 
```

此外，在您的 onpause 中，您正在释放播放器，但不会在您的 onresume 上再次生成它。您可以使用您提供的链接中的代码在此处重新创建它：

```
@Override
    protected void onResume()
    {
        super.onResume();
    }
@Override
    protected void onPause()
    {
        // cleanUp();
        if (mPlayer != null && mPlayer.isPlaying())
        {
            mPlayer.release();
            mPlayer = null;

        }

        super.onPause();
    } 
```

此外，由于您似乎将媒体播放器的源设置为 url，您应该在以下部分更改 prepareAsync 的准备，以便它缓冲：

```
sa.mPlayer.setDataSource(sa.Audio_URL);
sa.mPlayer.prepare();// might take long! (for buffering, etc) 
```

您提供的链接已经有很多克服上述这些问题的建议。请尝试该链接上的代码，尤其是那些建议 prepareAsync 和 onprepared 侦听器的代码。然后，如果它不起作用，您可以回到这里。

# javascript - 用于 asp.net 的 x.xxxx 类型的正则表达式

> ID：14412172
> 
> 赞同：0
> 
> 时间：2013-01-19T07:32:16.167
> 
> 标签：javascript, jquery, regex

我正在使用正则表达式验证文本框文本。格式是`x.xxxx`，目前我正在使用`@"\d{1}.\d{1,4}"`，但现在我想更改表达式以允许`x`，如果他们按下`.`，那么它应该验证`\d{1,4}`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T07:36:03.363

在 JavaScript 中，您使用 `/^\d(\.\d{1,4})?$/`. 在 C# 中，您可以使用`@"^\d(\.\d{1,4})?$"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T07:47:20.420

试试这个

```
 // Optional deciaml points
    var regexp = /^\d+(\.\d{1,4})?$/;
    regexp.test('13.5454') 
```

这允许在小数点后最多 4 位。但小数位是可选的

# python - 在tastepie中处理多个查询参数

> ID：14412178
> 
> 赞同：1
> 
> 时间：2013-01-19T07:32:53.863
> 
> 标签：python, django, tastypie

如何处理`www.www.ww/api/user=XXX&comment=XXX&friend=XXX`样式查询（多个参数）中的参数，在文档中找不到。（可能没读好）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T08:02:12.290

我从未使用过 tasypi，但您可以`HttpRequest`像这样从对象（通常在视图中）访问 django 中的 get 参数 -

```
if 'user' in request.GET:
    user = request.GET['user'] 
```

查看[有关请求和响应对象的 django 文档](https://docs.djangoproject.com/en/1.4/ref/request-response/)。[您甚至可能会发现查看有关编写视图](https://docs.djangoproject.com/en/1.4/topics/http/views/)的文档很方便。基本视图（与基于类的视图相对）使用 HttpRequest 作为函数的参数。所以

```
def my_view(request):
    if 'user' in request.GET:
        user = request.GET['user']
    if 'comment' in request.GET:
        comment = request.GET['comment'] 
```

编辑

浏览[Tastypi 文档](http://django-tastypie.readthedocs.org/en/latest/resources.html#basic-filtering)表明您应该`class Meta`在您的资源上使用 来设置它。就像是 -

```
class MyResource(ModelResource):
    class Meta:
        filtering = {
            "user": ('exact',),
            "friend": ('exact',),
            "comment": ('exact',)
        } 
```

`bundle.request.GET`我相信如果有任何用处，您也可以通过 GET 参数获取。

# javascript - SCRIPT5007：无法获取属性“0”的值：对象为空或未定义

> ID：14412180
> 
> 赞同：1
> 
> 时间：2013-01-19T07:33:03.033
> 
> 标签：javascript, jquery, internet-explorer-9, fileapi

我通过 Chrome 和 Firefox 运行了这段代码，它运行良好。每当我通过 Internet Explorer 运行它以进行测试时，它都不起作用。我检查了 javascript 领事，我得到：**SCRIPT5007: Unable to get value of the property '0': object is null or undefined**。有人可以告诉我为什么会出现这种情况以及我能做些什么来解决它吗？

```
$('#audiofile1').bind('change', function () {
    if (this.files[0].type != 'image/png') {
        $('#audiofile1').each(function () {
            $(this).after($(this).clone(true)).remove();
        });
        alert(this.files[0].name + ' is not a valid file type.');
    } else {
        if (this.files[0].size > '5000') {
            $('#audiofile1').each(function () {
                $(this).after($(this).clone(true)).remove();
            });
            var size = this.files[0].size;
            var maxSize = 100;
            var exceedingSize = size - maxSize;
            alert(this.files[0].name + ' exceeds the maximum file size');
        } else {
            $("#audiofile1").fadeTo(1500, 0.20);
            alert(this.files[0].name + ' was added successfully.');
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T07:43:47.840

```
if (this.files[0].type != 'image/png') { 
```

在您的事件处理程序中，jQuery`this`生成注册处理程序的 DOM 元素。该元素没有定义的`files`属性，或者该属性的值为`null`或`undefined`。

这是因为 Internet Explorer 9 和更低版本不支持[文件 API](http://msdn.microsoft.com/en-us/library/ie/hh673542%28v=vs.85%29.aspx)。如果 File API 不可用，您可能应该跳过绑定处理程序：

```
if ($('#audiofile1')[0].files) {
    $('#audiofile1').bind('change', function () {
        // ...
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T07:49:01.960

显然，[IE 仅支持从版本 10 开始的 HTML5 File API。](http://msdn.microsoft.com/en-us/library/ie/hh673542%28v=vs.85%29.aspx) 因此，在 IE 9 中，根本没有`.files`可以访问的属性。

不幸的是，我不知道有什么办法可以解决这个问题，除了告诉您的用户升级和/或为旧浏览器上的用户提供一些替代（可能是服务器端）方法来完成您正在做的任何事情。在您的情况下，假设您最终将文件上传到服务器以进行进一步处理，您可以跳过对不支持它们的浏览器的客户端检查，并简单地告诉您的用户将是哪种文件公认。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T21:48:41.533

尝试打开 Jquery UI 对话框时出现此（相同/类似）错误：SCRIPT5007：无法获取属性“_focusTabbable”的值：对象为空或未定义。

我所做的更改似乎导致了此错误...：
a）更改为 Jquery 1.9.1
b）更改为 Jquery UI 1.10.1
c）在对话框调用中添加了“appendTo”选项。

a) + b) > c)

我需要做 (c)，因为我已将 (15) 个 jquery 对话框添加到一个现有页面，该页面以前将一些子表单元素设置为隐藏/显示 div 元素。我想获得包括模态在内的 jquery 对话框功能。问题是子表单元素被 jquery 通过附加到文档之外的元素重写，因此在提交表单时不再包含对话框中的表单字段。

无论如何，对于这个问题，有人有比上述更好的解决方案吗？

# python - 将 DataFrame 列写入文件

> ID：14412181
> 
> 赞同：1
> 
> 时间：2013-01-19T07:33:05.160
> 
> 标签：python, pandas

使用 pandas 模块中的 dframe：

```
df = dframe.resample('t', how = 'sum') 
```

之后我想将数据写入一个新文件。我用这个：

```
with open('dframe.txt', 'w') as fout:
   fout.write(df.price1) #it is the first column 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-19T07:43:23.920

`df.price1`返回一个`Series`。幸运的是`Series`，还有一个`to_csv`类似的方法`DataFrame's`：

```
Definition: Series.to_csv(self, path, index=True, sep=',', na_rep='',
float_format=None, header=False, index_label=None, mode='w', nanRep=None,
encoding=None) 
```

示例用法：

```
df.price1.to_csv('outfile.csv') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T07:37:57.900

尝试

```
df.to_csv('mydf.txt', sep='\t') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T19:24:46.657

仅供参考还有：

*   DataFrame.to_html()
*   DataFrame.to_excel()
*   DataFrame.to_latex()
*   和许多其他但不用于文件序列化

只需要使用to_excel：用法在方法文档或者[http://pandas.pydata.org/pandas-docs/stable/](http://pandas.pydata.org/pandas-docs/stable/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-29T01:24:08.363

你试过用`.values`吗？

```
with open('dframe.txt', 'w') as fout:
   fout.write(df.price1.values) 
```

它返回一个包含所有列值的列表。

# sql-server - 如何从一个点创建一个多边形？

> ID：14412182
> 
> 赞同：2
> 
> 时间：2013-01-19T07:33:17.420
> 
> 标签：sql-server, gis, geography

在 GIS 中，我得到一个点，并从中创建一个正多边形，基本上正是[这个函数](http://dev.openlayers.org/docs/files/OpenLayers/Geometry/Polygon-js.html#OpenLayers.Geometry.Polygon.createRegularPolygon)的作用。

不幸的是，我不知道如何实现这一目标。我什至不知道在 Google 上寻找什么。

有任何想法吗？

PS：该系统基于 SQL Server，因此我使用的是 T-SQL（如果这有帮助/有害）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T14:43:50.083

这听起来有点像家庭作业，所以如果我用通俗的语言而不是 T-SQL 来设计算法，请原谅我

首先，我们将创建一个具有 n 边的多边形，其半径为 1，围绕原点 (0,0)，然后展示如何获得半径为 r、旋转 theta 和中心 (x,y) 的多边形的一般情况.

在这个 n 边多边形中将有 n 个顶点。每个顶点都有坐标（cos（k/n），sin（k/n）），k的范围是0到n-1。从那里，为了得到你的多边形，从顶点 k 到顶点 k+1 画一条线。

现在，我们如何让它更大？如果多边形的半径为 r 而不是半径 1，则坐标将为 (r*cos(k/n), r*sin(k/n))。旋转角度θ？(r*cos((k/n)+theta), r*sin((k/n)+theta)。把它翻译到原点以外的地方？(x+r*cos((k/n)+theta) ), y+r*sin((k/n)+θ)。

# ios6 - 我在哪里可以更改 IOS 6 中的视图边界

> ID：14412183
> 
> 赞同：0
> 
> 时间：2013-01-19T07:33:44.190
> 
> 标签：ios6, interface-builder, autolayout

在 IOS 6 之前，执行此操作的正确位置是 viewWillAppear:，因为所有内容都已从界面生成器加载和设置，但现在，在 viewWillAppear: 之后框架仍然发生变化。

我能想到的唯一其他放置这种代码的地方是 viewDidAppear:，但如果我这样做，用户会在视图出现后看到屏幕突然发生变化。

那么我能做什么呢？

谢谢你。

顺便说一句，在 viewDidLayoutSubviews: 之后框架也会发生变化，所以它也不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T10:57:44.370

您关于在哪里进行布局更改的理论并不正确，并且很可能在 iOS6 下不会改变。改变的是，如果您使用自动布局，您不再更改框架或边界，自动布局会为您完成。您现在对约束进行更改。当您更改约束时，会自动为您完成诸如框架之类的事情。

# c# - 将 XML 文件读取为 DataSet

> ID：14412186
> 
> 赞同：12
> 
> 时间：2013-01-19T07:34:15.397
> 
> 标签：c#, xml, performance, xml-parsing, dataset

我对解析 XML 文件没有经验，我正在将折线图数据保存到 xml 文件中，所以我做了一些研究。根据[这篇](http://csharptutorial.blogspot.com/2006/10/reading-xml-fast.html "C# 教程：快速读取 xml")文章，在所有读取 XML 文件的方法中，`DataSet`是最快的。我使用它是有道理的，`DataSet`因为可能有大量数据。这是我的图形文档的外观：

```
<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<BreezyCalc>
    <Graph Version="3.0" Mode="static">
        <Range>
            <X Min="-20" Max="20" />
            <Y Min="-20" Max="20" />
        </Range>
        <Lines>
            <Line Name="MyLine1" R="0" G="255" B="0">
                <Point X="-17" Y="9" />
                <Point X="7" Y="-5" />
                <Point X="10" Y="4" />
                <Point X="-6" Y="2" />
            </Line>
            <Line Name="MyLine2" R="255" G="0" B="0">
                <Point X="-7" Y="3" />
                <Point X="8" Y="-1" />
                <Point X="-4" Y="-4" />
                <Point X="-1" Y="6" />
            </Line>
        </Lines>
    </Graph>
</BreezyCalc> 
```

由于这些线中可能存在大量点，因此我需要以尽可能少的资源尽快获取数据。如果有比 更快的方法`DataSet`，请赐教。否则，有人可以告诉我如何使用 a`DataSet`作为我的 XML 解析器来获取我的图形数据吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-19T11:26:20.903

如果要使用 DataSet，则非常简单。

```
// Here your xml file
string xmlFile = "Data.xml";

DataSet dataSet = new DataSet();
dataSet.ReadXml(xmlFile, XmlReadMode.InferSchema);

// Then display informations to test
foreach (DataTable table in dataSet.Tables)
{
    Console.WriteLine(table);
    for (int i = 0; i < table.Columns.Count; ++i)
        Console.Write("\t" + table.Columns[i].ColumnName.Substring(0, Math.Min(6, table.Columns[i].ColumnName.Length)));
    Console.WriteLine();
    foreach (var row in table.AsEnumerable())
    {
        for (int i = 0; i < table.Columns.Count; ++i)
        {
            Console.Write("\t" + row[i]);
        }
        Console.WriteLine();
    }
} 
```

如果您想要更快的速度，您可以尝试使用 XmlReader 逐行读取。但是开发难度有点大。你可以在这里看到它：http: [//msdn.microsoft.com/library/cc189056 (v=vs.95).aspx](http://msdn.microsoft.com/library/cc189056(v=vs.95).aspx)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-06-29T11:06:45.337

其他简单的方法是使用“ReadXml”内置方法。

```
string filePath = "D:\\Self Practice\\Sol1\\Sol1\\Information.xml";
DataSet ds = new DataSet();
ds.ReadXml(filePath); 
```

注意：XML 文件应该是有序的。

[参考](http://goo.gl/UXeyVv)

# c# - 如何将数据网格视图中选定行的数据传递到另一个表单的标签

> ID：14412188
> 
> 赞同：0
> 
> 时间：2013-01-19T07:34:42.380
> 
> 标签：c#, winforms, datagridview

我在 form1 中有一个 datagridview，在另一个表单上有标签框。我想做的是每当在form1中选择一行时，它的所有数据都将使用labelboxe显示在form 2上。这意味着，所选行的每一列都将分配到其相应的标签框中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T09:59:22.367

有几种方法可以做这样的事情。这里有两种传递数据的方法：

在 Form2 中，您需要创建第二个构造函数，该构造函数将采用两个对象：

```
public partial class Form2 : Form
    {
        public Form2()
        {
            InitializeComponent();
        }

        public string yourName { get; set; }
        public int Age { get; set; }

        public Form2(string name, int age)
        {
            InitializeComponent();

            yourName = name;
            Age = age;

        }

        private void Form2_Load(object sender, EventArgs e)
        {
            label1.Text = yourName;
            label2.Text = Age.ToString();
        }
    } 
```

在 Form1 中，您创建 Form2 的一个实例，并传递对象：

```
public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            Form2 F2 = new Form2("Jon Smith", 33);

            this.Hide();
            F2.ShowDialog();

        }
    } 
```

或者你可以这样做：

在表单 2 上，您需要将标签修饰符属性设置为公共，因为默认情况下它们将设置为私有。您可以从设计模式的属性选项卡中执行此操作。

完成后，在 form1 中，您可以创建 Form2 的实例并将值传递给公共标签：

```
Form2 f2 = new Form2();

f2.label1.text = datagridview1.currentRow.cells[0].value.tostring();

f2.ShowDialog(); 
```

希望这可以帮助。

# dtrace - 如何使用 dtrace 检测文件传输

> ID：14412189
> 
> 赞同：1
> 
> 时间：2013-01-19T07:34:55.857
> 
> 标签：dtrace

我想使用“dtrace”来跟踪 OSX 10.8 中的文件传输，例如运行命令“mv /folder1/file1 /folder2”时。

我知道有像 create/link/unlink/rename/chdir 这样的探针可以以以下形式使用

`dtra￼￼ce -n 'syscall::create:entry { printf("%s %s", execname, copyinstr(arg0)); }'`

但是如何跟踪这个“mv”命令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T22:57:51.693

**rename**是您所追求的功能：

```
dtrace -n 'syscall::rename:entry { printf("mv %s %s\n",copyinstr(arg0),copyinstr(arg1)); }' 
```

（如果需要，添加**sudo** infront）

# php - PHP exec在后台使用＆不起作用

> ID：14412190
> 
> 赞同：3
> 
> 时间：2013-01-19T07:35:04.127
> 
> 标签：php, linux, background, command

我在 Ubuntu 13.04 上使用此代码，

```
$cmd = "sleep 20 &> /dev/null &";
exec($cmd, $output); 
```

虽然它实际上在那里等待了 20 秒并等待：/ 通常它在`&`用于将进程发送到后台时工作正常，但是在这台机器上 php 就不会这样做：/
可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-19T07:44:37.823

尝试

```
<?PHP
$cmd = '/bin/sleep';
$args = array('20');

$pid=pcntl_fork();
if($pid==0)
{
  posix_setsid();
  pcntl_exec($cmd,$args,$_ENV);
  // child becomes the standalone detached process
}

echo "DONE\n"; 
```

我对其进行了测试，因为它有效。在这里，您首先 fork php 进程，然后执行您的任务。

或者，如果 pcntl 模块不可用，请使用：

```
<?PHP

$cmd = "sleep 20 &> /dev/null &";
exec('/bin/bash -c "' . addslashes($cmd) . '"'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T12:55:41.560

不起作用的原因是`exec()`执行您传递给它的字符串。由于`&`被 shell 解释为“在后台执行”，但您没有在`exec`调用中执行 shell，因此`&`只是将其传递`20`给`/bin/sleep`可执行文件——它可能只是忽略了这一点。

这同样适用于输出的重定向，因为它也由 shell 解析，而不是在 exec 中。

因此，您需要找到一种方法来分叉您的进程（如上所述），或者找到一种将子进程作为 shell 运行的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T12:47:06.003

我在 ubuntu 13.04 上使用 Apache2 和任何版本的 PHP 执行此操作的解决方法：
`libssh2-php`，我只是`nohup $cmd &`在使用 PHP 的本地 SSH 会话中使用它并且它在后台运行得很好，当然这需要放置某些安全协议，例如启用webserver 用户的 SSH 访问权限，因此它将具有类似 exec 的权限，然后只允许 localhost 登录到 webserver ssh 帐户。

# android - 非常简单的sqlite查询“没有这样的列”

> ID：14412193
> 
> 赞同：0
> 
> 时间：2013-01-19T07:35:36.600
> 
> 标签：android, sqlite

这应该是一个非常简单的任务，但我已经卡了一个小时。

**我在sqlite 浏览器**中尝试了这个查询，它的**工作原理**：

```
SELECT name FROM msUser WHERE username='admin' AND password='admin' 
```

但是当我在 Java 代码中尝试这个时，它不是 wokring ：

```
querySelect = "SELECT name FROM " + TABLE_NAME + " WHERE username = " + username + " AND password = " + password; 
```

原木猫是这样说的：

```
01-19 14:21:02.279: E/AndroidRuntime(3117): android.database.sqlite.SQLiteException: no such column: admin: , while compiling: SELECT name FROM msUser WHERE username = admin AND password = admin 
```

请帮助我，谢谢 :D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T07:37:27.007

尝试这个：

```
querySelect = "SELECT name FROM " + TABLE_NAME + " WHERE username = '" + username + "' AND password = '" + password +"'"; 
```

# android - 如何为可扩展列表中的每个孩子添加操作？

> ID：14412194
> 
> 赞同：0
> 
> 时间：2013-01-19T07:35:52.970
> 
> 标签：android, eclipse

这是我的代码。这是一个菜鸟问题。如何在列表视图中向孩子添加操作。此代码包含一个可扩展的列表视图，其中包含 3 个子项，我需要的是，当我分别单击每个子项时，它会打开另一个类，例如 page2.java。

```
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import android.app.ExpandableListActivity;
import android.os.Bundle;
import android.view.View;
import android.widget.ExpandableListView;
import android.widget.SimpleExpandableListAdapter;

public class ExpandableListDemo extends ExpandableListActivity {

@SuppressWarnings("unchecked")
public void onCreate(Bundle savedInstanceState) {
    try{
         super.onCreate(savedInstanceState);
         setContentView(R.layout.main);

    SimpleExpandableListAdapter expListAdapter =
        new SimpleExpandableListAdapter(
                this,
                createGroupList(),              // Creating group List.
                R.layout.group_row,             // Group item layout XML.           
                new String[] { "Group Item" },  // the key of group item.
                new int[] { R.id.row_name },    // ID of each group item.-Data under the key goes into this TextView.                   
                createChildList(),              // childData describes second-level entries.
                R.layout.child_row,             // Layout for sub-level entries(second level).
                new String[] {"Sub Item"},      // Keys in childData maps to display.
                new int[] { R.id.grp_child}     // Data under the keys above go into these TextViews.
            );
        setListAdapter( expListAdapter );       // setting the adapter in the list.

    }catch(Exception e){
        System.out.println("Errrr +++ " + e.getMessage());
    }
}

/* Creating the Hashmap for the row */
@SuppressWarnings("unchecked")
private List createGroupList() {
      ArrayList result = new ArrayList();
      for( int i = 0 ; i < 15 ; ++i ) { // 15 groups........
        HashMap m = new HashMap();
        m.put( "Group Item","Group Item " + i ); // the key and it's value.
        result.add( m );
      }
      return (List)result;
}

/* creatin the HashMap for the children */
@SuppressWarnings("unchecked")
private List createChildList() {

    ArrayList result = new ArrayList();
    for( int i = 0 ; i < 15 ; ++i ) { // this -15 is the number of groups(Here it's fifteen)
      /* each group need each HashMap-Here for each group we have 3 subgroups */
      ArrayList secList = new ArrayList(); 
      for( int n = 0 ; n < 3 ; n++ ) {
        HashMap child = new HashMap();
        child.put( "Sub Item", "Sub Item " + n );           
        secList.add( child );
      }
     result.add( secList );
    }        
    return result;
}
public void  onContentChanged  () {
    System.out.println("onContentChanged");
    super.onContentChanged();         
}
/* This function is called on each child click */
public boolean onChildClick( ExpandableListView parent, View v, int groupPosition,int childPosition,long id) {
    System.out.println("Inside onChildClick at groupPosition = " + groupPosition +" Child clicked at position " + childPosition);
    return true;
}

/* This function is called on expansion of the group */
public void  onGroupExpand  (int groupPosition) {
    try{
         System.out.println("Group exapanding Listener => groupPosition = " + groupPosition);
    }catch(Exception e){
        System.out.println(" groupPosition Errrr +++ " + e.getMessage());
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T07:41:19.170

看看[onChildClickListener](http://developer.android.com/reference/android/widget/ExpandableListView.html)。

*   查看这篇文章了解[如何实现 onChildClick()](https://stackoverflow.com/a/3416843/1626878)。

*   另请查看[将侦听器添加到可扩展列表项中的子节点](https://stackoverflow.com/a/8589469/1626878)。

# sql-server-2008 - 如何在不记录的情况下从大表中删除大量记录（不是所有记录）？

> ID：14412195
> 
> 赞同：0
> 
> 时间：2013-01-19T07:35:59.667
> 
> 标签：sql-server-2008, logging

我有一个包含 8,000,000 条记录的大表。我想在不记录的情况下从中删除大约 3,000,000 条记录....

最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-01T19:39:33.443

基本上你不能停止记录。

但是在删除 3 条 Mio 记录期间，您的日志会大量增加。在这种情况下，您应该删除小部分。

另一种方法是相反的方法：存储要保留的记录，而不是使用`TRUNCATE TABLE`，然后插入保存的记录。

# c++ - 获取由库调用创建的窗口的窗口句柄 (HWND)

> ID：14412197
> 
> 赞同：2
> 
> 时间：2013-01-19T07:36:06.093
> 
> 标签：c++, visual-studio, winapi, hwnd

编辑：我忘了提，我没有创建窗口的 DLL 的源代码，所以我实际上无法更改函数以返回 HWND。

我正在创建一个 Win32 应用程序，并且正在使用一个 DLL，该 DLL 通过其导出函数“void X();”为我创建一个窗口；我在 WinMain() 中调用 X()。

它确实为我创造了一个窗口。我想获取由这个导出的库函数创建的窗口的 HWND，因为 X() 返回 void，所以我可以将它用于其他 API 调用。有人可以告诉最容易获得 HWND 吗？

我在这里搜索并回答了问题，但我无法找出确切、适当的解决方案。我尝试了 EnumWIndows() 然后获取进程 ID，然后与当前线程进程 ID 进行比较。但我想应该有一种更好、更高效、更简单的方法来获得 HWND。毕竟，我在最初创建此窗口的进程的 WinMain 中。

如果我需要解释什么，我错过了写在这里，请告诉我。

我确信这是非常基本的，并且在这里公然遗漏了一些东西。对不起。感谢和问候！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T08:42:46.927

The easiest way to do that is to use the function `SetWindowsHookEx(WH_CBT, fun, NULL, GetCurrentThreadId())`. Then the `fun` function, a callback defined by you, will be called when a number of events happen. The one you want is the `HCBT_CREATEWND`.

Somethink like that (totally untested):

```
HWND hDllHandle = NULL;
LRESULT CALLBACK X_CBTProc(int nCode, WPARAM wParam, LPARAM lParam)
{
    if (nCode == HCBT_CREATEWND)
        hDllHandle = (HWND)wParam;
    return CallNextHookEx(NULL, nCode, wParam, lParam); //The first parameter is useless
}

HWND CallXAndGetHWND()
{
    HHOOK hDllHook = SetWindowsHookEx(WH_CBT, X_CBTProc, NULL, GetCurrentThreadId());
    X();
    UnhookWindowsHookEx(hDllHook);
    //hDllHandle is a global variable, so will be now you window!
    return hDllHandle;
} 
```

Note that this function is not thread-aware, but most likely you will call it just once at the beginning of your code, so it shouldn't matter.

And beware! Many functions, even Win32 API functions, create hidden windows. This code will hook all of them and return the last one to be created. Changing it to return any other, or even a list of them, if needed, should be trivial.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T16:50:32.573

使用 Spy++ 或 Winspector 之类的工具来查看`HWND`您的应用程序创建的所有 s，尤其是它们的类名和窗口标题。`FindWindow()`然后您可以将这些值复制到您的代码中，并在 DLL 创建其窗口后进行一次调用，例如：

```
int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nCmdShow)
{
    // ...
    X();
    HWND hWnd = FindWindow("ClassNameHere", "TitleHere");
    // ...
    return 0;
} 
```

# javascript - 如何使用内页模板在单个帖子 wordpress 中每 1 分钟自动刷新单个 div

> ID：14412201
> 
> 赞同：1
> 
> 时间：2013-01-19T07:36:40.623
> 
> 标签：javascript, innerhtml, partial-page-refresh, wordpress

如何设置div自动刷新？我为 wordpress 使用 Transcript 主题，在 single.php 中调用内部 php 页面：

```
</div><!-- /innerLeft -->

<?php include (TEMPLATEPATH . '/innerNarrowSidebar.php'); ?>
<?php include (TEMPLATEPATH . '/innerWideSidebar.php'); ?>
<div class="clear"></div> 
```

**innerNarrowSidebar.php**里面的代码

 **```
<?php if($trns_options['enArc'] == 1) { ?>
        <div class="widget">
            <h3 class="widget_sTitle_b"><?php _e('Archives','Transcript'); ?></h3>
            <ul>
                <?php wp_get_archives('type=monthly'); ?>
            </ul>
        </div>
    <?php } ?> 
```

而不是**innerpage_120x600.php**

我有一些谷歌广告

`**NOTE**`：我在innerNarrowSidebar.php中添加了这段代码，但没有用，div没有自动刷新我添加的代码：

```
 <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.0/jquery.min.js"></script>

<script language="JavaScript">
setInterval( "SANAjax();", 10000 );  ///////// 10 seconds 
$(function() {
SANAjax = function(){

$('#narrowSidebar').fadeOut("slow").load('ads/innerpage_120x600.php').fadeIn("slow");

}
 });
</script> 
```

如果这是不可能的，如何使文本小部件自动刷新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T07:43:15.323

如评论中所述：

```
<script language="JavaScript">

$j(function($) {
var SANAjax = function(){
  //Add here anticache modificator:
  var rnd=Math.random();
  $('#narrowSidebar').fadeOut("slow").load('ads/innerpage_120x600.php?nc='+rnd).fadeIn("slow");

}
setInterval(SANAjax, 10000 );  ///////// 10 seconds 
 });
</script> 
```**

# android - 添加多个邻近警报

> ID：14412202
> 
> 赞同：1
> 
> 时间：2013-01-19T07:36:43.893
> 
> 标签：android, android-intent, proximity, android-pendingintent

我有一个问题......我正在开发一个涉及proximityAlerts的应用程序......简而言之，我的应用程序中有'n'个POI（兴趣点），所以当我到达那个特定的POI时，我应该发送短信到从数据库中检索到的一群人...

短信发送和数据库部分工作正常。

问题：实施多个接近警报。创建待处理的意图。然后当我到达特定的 POI 时如何调用短信发送类来触发短信。

我已经筋疲力尽地尝试这个......任何人都可以帮我实现这部分..

提前谢谢.. 等待你的回复

# cakephp - 一个模型到多个控制器 - CakePHP

> ID：14412207
> 
> 赞同：0
> 
> 时间：2013-01-19T07:37:59.800
> 
> 标签：cakephp, model, controller, cakephp-2.0

我试图将一个 appmodel 加载到许多控制器。例如，我有一个名为 Item 的 appmodel，我想在 HomeController 和 ContactController 中获取一些项目。当我执行此代码时：

```
class HomeController extends AppController {
    public function index() {
        $items = $this->Item->find('all');
        $this->set('items', $items);
    }
} 
```

我收到了这个错误：

```
Call to a member function find() on a non-object 
```

如何在 CakePHP 的多个视图中从数据库中获取内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T07:40:37.140

```
var $uses=array('Item'); 
```

如果在多个控制器中使用此模型，请将其放入应用控制器中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T07:41:06.113

您需要声明要在控制器中使用的模型。

```
class HomesController extends AppController {
  var $uses = array('Item', 'AnotherModel');

  ...

} 
```

# excel - 循环浏览打开的工作簿

> ID：14412208
> 
> 赞同：2
> 
> 时间：2013-01-19T07:38:04.103
> 
> 标签：excel, vba

我设法获得了一个代码，该代码可以打开文件夹中存在的所有文件。现在我想在这些文件上一个接一个地运行一个宏（称为 donemovementReport），就像它在一个文件上运行一样，我保存文件然后在下一个文件上运行。

宏 donemovementreport 将这些打开的工作表中的所有数据粘贴到模板中。我想保存这个模板而不是打开的带有实际数据的工作簿。

有人有想法吗？

```
Sub OpenAllWorkbooks()
Set destWB = ActiveWorkbook
Dim DestCell As Range
FileNames = Application.GetOpenFilename( _
        filefilter:="Excel Files (*.csv*),*.csv*", _
        Title:="Select the workbooks to load.", MultiSelect:=True)
If IsArray(FileNames) = False Then
    If FileNames = False Then
        Exit Sub
    End If
End If
For n = LBound(FileNames) To UBound(FileNames)
    Set wb = Workbooks.Open(fileName:=FileNames(n), ReadOnly:=True)

 Next n

 'Dim i As Integer
 'i = ActiveWorkbook.AcceptAllChanges

 'For i = 1 To ActiveWorkbook

 Call donemovementReport

'Next i

 End Sub 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T08:41:03.693

如果我正确理解输入，您需要遍历所有打开的工作簿。这可以通过`Workbooks`收集来实现。使用这段代码：

```
Dim wb As Workbook

For Each wb In Workbooks

    wb.AcceptAllChanges
    Call donemovementReport

Next wb 
```

根据需要修改代码`For...Next`或提供更多输入。

阅读有关在 VBA 中引用工作簿的更多信息：[http](http://www.techrepublic.com/blog/10things/10-ways-to-reference-excel-workbooks-and-sheets-using-vba/967) ://www.techrepublic.com/blog/10things/10-ways-to-reference-excel-workbooks-and-sheets-using-vba/967 （上面的代码是 item其中列出了 10个中的**3个）。**

# android - android将editText推出屏幕调整大小

> ID：14412210
> 
> 赞同：0
> 
> 时间：2013-01-19T07:38:15.443
> 
> 标签：android, android-edittext

我通过玩组件的边距为自己做了一个幻灯片动画。

不幸的是，当我将正确的元素（编辑文本）“推”出屏幕时，它会调整它的大小而不是切割边缘部分。

我可以通过影响例如 1000dp 到 editText 来让它表现得像我想要的那样，但我希望这个 editText 适合屏幕的宽度，而不是硬编码的宽度。

开始画面：

![开始画面](../Images/fb42ad899b3858ca1704105af23f3cdc.png)

错误行为：

![错误的行为](../Images/2e01bdf9510409cf4d169b673ee086b4.png)

良好的行为：

![良好的行为](../Images/b40da1c371c8046770c4572b7596a233.png)

这是我的自定义根组件中“动画”的代码：

```
package com.example.components;

import com.example.database.NoteDataSource;
import com.example.memonotepad.R;

import android.content.Context;
import android.util.AttributeSet;
import android.util.Log;
import android.widget.LinearLayout;
import android.app.Activity;

public class SlideRightNLeft extends LinearLayout{

private LinearLayout.LayoutParams params1;

int x;

private SlideRightNLeft srnl;

private Context context_f;

private int slideDistance;

public SlideRightNLeft(Context context) {
    super(context);
}

public SlideRightNLeft(Context context, AttributeSet attrs) {
    super(context, attrs);
    context_f = context;
    srnl = this;
    slideDistance = (int) context_f.getResources().getDimension(R.dimen.slide_distance);

}

public SlideRightNLeft(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
}

public void slideLogin(){

    Thread slideIt = new Thread(new Runnable() {
        @Override
        public void run() {

            x = 0;
            params1 = new LinearLayout.LayoutParams(srnl.getChildAt(0).getWidth(), srnl.getChildAt(0).getHeight());

            while(x < slideDistance) {

                try {
                    Thread.sleep(3);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }

                ((Activity)context_f).runOnUiThread(new Runnable(){

                    @Override
                    public void run() {

                        int diff = x - slideDistance;

                        params1.setMargins(diff, 1, 1, 1);

                        srnl.getChildAt(0).setLayoutParams(params1);

                        srnl.invalidate();

                    }
                });

                x++;

            }
        }
    });

    slideIt.start();

}

} 
```

活动代码：

```
package com.example.memonotepad;

import java.util.Calendar;
import java.util.Date;

import com.example.components.SlideRightNLeft;
import com.example.database.NoteDataSource;
import com.example.adapter.NotesAdapter;

import android.os.Bundle;
import android.app.Activity;
import android.content.Context;
import android.database.Cursor;
import android.view.Display;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.WindowManager;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ListView;

public class MemoNotepad extends Activity {

private SlideRightNLeft mainGroupComponent;
private Button slideLogin;
private Button addNote;

private NoteDataSource nds;

private Date rightNowDate;

private ListView lvNote;

private Cursor lvCursor;

private NotesAdapter na;

private EditText edt;

public static int width;

WindowManager mWinMgr;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_memo_notepad);

    mWinMgr = (WindowManager)this.getSystemService(Context.WINDOW_SERVICE);
    width = mWinMgr.getDefaultDisplay().getWidth();

    edt = (EditText) findViewById(R.id.textBook);

    edt.setWidth(width);
    edt.setMinimumWidth(width);

    mainGroupComponent = (SlideRightNLeft) findViewById(R.id.mainGroupLayout);
    nds = new NoteDataSource(this);

    lvNote = (ListView) findViewById(R.id.listNotes);

    lvCursor = nds.getAllNotes();

    na = new NotesAdapter(this, lvCursor);
    lvNote.setAdapter(na);

    slideLogin = (Button) findViewById(R.id.login_button);
    slideLogin.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            mainGroupComponent.slideLogin();
        }
    });

    addNote = (Button) findViewById(R.id.new_note);
    addNote.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            Calendar rightNow = Calendar.getInstance();
            rightNowDate = rightNow.getTime();  // dt is now the new date
            nds.createNote("Note", "text inside", rightNowDate);
        }
    });

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_memo_notepad, menu);
    return true;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T07:44:27.533

> 我可以通过影响例如 1000dp 到 editText 来让它表现得像我想要的那样，但我希望这个 editText 适合屏幕的宽度，而不是硬编码的宽度。

为什么不获取设备的宽度？

```
mWinMgr = (WindowManager)context.getSystemService(Context.WINDOW_SERVICE);
int displayWidth = mWinMgr.getDefaultDisplay().getWidth(); 
```

# python - 使用 Python 获取文件的 mimetype

> ID：14412211
> 
> 赞同：13
> 
> 时间：2013-01-19T07:38:20.873
> 
> 标签：python

我想确定一个 xml 文件的 mimetype，但是我收到关于某些实例作为第一个参数的错误。我是python新手，请帮忙。以下是我正在使用的代码及其引发的错误。

```
from mimetypes import MimeTypes
import urllib 
FILENAME = 'Upload.xml'
url = urllib.pathname2url(FILENAME)
type = MimeTypes.guess_type(url)
print type

**ERROR :** Traceback (most recent call last):
File "/home/navi/Desktop/quicksort.py", line 20, in <module>
type = MimeTypes.guess_type(url)
TypeError: unbound method guess_type() must be called with MimeTypes instance as first argument (got str instance instead) 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-19T07:41:22.240

该错误表明您必须初始化`MimeTypes`该类：

```
>>> from mimetypes import MimeTypes
>>> import urllib 
>>> 
>>> mime = MimeTypes()
>>> url = urllib.pathname2url('Upload.xml')
>>> mime_type = mime.guess_type(url)
>>> 
>>> print mime_type
('application/xml', None) 
```

尽管您可以跳过此步骤并`mimetypes.guess_type`直接使用：

```
>>> import urllib, mimetypes
>>> 
>>> url = urllib.pathname2url('Upload.xml')
>>> print mimetypes.guess_type(url)
('application/xml', None) 
```

# scala - Lift - 将值列表绑定到模板

> ID：14412214
> 
> 赞同：3
> 
> 时间：2013-01-19T07:38:52.120
> 
> 标签：scala, lift

这是我的模板-

```
 <div class="lift:Admin.showInvitees">
          <tr class="success"> <!-- "success" "error" -->
            <td><invitee:name></invitee:name></td>
            <td><invitee:description></invitee:description></td>
            <td><invitee:status></invitee:status></td>
            <td></td>
          </tr>
      </div> 
```

这是片段 -

```
class Admin {  
  def showInvitees(in: NodeSeq): NodeSeq = {
    val invitees = Invitation.allInvitations
    invitees.flatMap{invitee => bind("invitee", in, "name" -> invitee.name.is, "status" -> invitee.status.is, "description" -> invitee.description.is)}
  }
} 
```

我检查了这个[问题](https://stackoverflow.com/questions/5995078/output-a-list-to-a-template-in-lift)并使用了解决方案。但这对我不起作用。价值观根本不受约束。这就是我得到的输出 -

```
<tr class="success"> 
   <td><invitee:name></invitee:name></td>
   <td><invitee:description></invitee:description></td>
   <td><invitee:status></invitee:status></td>
</tr> 
```

需要帮助将值列表绑定到模板。

在第一个答案之后，我也尝试了这个 -

```
def showInvitees(in: NodeSeq): NodeSeq = {
val invitees = Invitation.allInvitations
(".invitees" #> invitees.map{ inv =>
    ".invitee-name" #> inv.name.is &
    ".invitee-description" #> inv.description.is &
    ".invitee-status" #> inv.status.is
})(in) 
```

}

即使这也不起作用-模板-

```
<div class="lift:Admin.showInvitees">
      <tr class="invitees success"> <!-- "success" "error" -->
        <td><span class="invitee-name"></span></td>
        <td><span class="invitee-description"></span></td>
        <td><span class="invitee-status"></span> </td>
        <td></td>
      </tr>
  </div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T13:57:56.103

这是绑定值的旧语法。试试新的：

```
// snippet
class Admin {  
  def showInvitees = {
    case class Invitee(name: String, descr: String, status: String)
    val invitees = List(Invitee("Alex", "for cookies", "ok"), Invitee("Bob", "for beer", "kicked out"))
    ".invitee" #> invitees.map { i =>
      ".invitee-name" #> i.name.is &
      ".invitee-descr" #> i.description.is &
      ".invitee-status" #> i.status.is
    }
  }
} 

// html
<div class="Admin.showInvitees">
  <table>
    <tr class="invitee success"> 
      <td><span class="invitee-name"></span></td>
      <td><span class="invitee-descr"></span></td>
      <td><span class="invitee-status"></span></td>
    </tr> 
  </table>
</div>

// result
  <table>
    <tbody><tr class="invitee success">
      <td>Alex</td>
      <td>for cookies</td>
      <td>ok</td>
    </tr><tr class="invitee success">
      <td>Bob</td>
      <td>for beer</td>
      <td>kicked out</td>
    </tr>
  </tbody></table> 
```

# .htaccess - .htaccess RewriteRule 不从真实文件夹重定向

> ID：14412219
> 
> 赞同：1
> 
> 时间：2013-01-19T07:39:41.343
> 
> 标签：.htaccess, mod-rewrite, url-rewriting, rewrite

我对 .htaccess 的工作仍然有点模糊，我环顾四周，但找不到任何可以帮助解决这个特定问题的东西。

编辑：我意识到还有其他问题似乎涵盖了这个问题，但我检查了一些，他们似乎没有提供任何我能理解的帮助，我不想用我自己的问题来劫持他们。

这就是我所拥有的：

```
Options +FollowSymLinks
#RewriteBase /
RewriteEngine on
RewriteRule /mp3/(.*) http://old.domain.com/mp3/$1 [R=301,L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]*)$ /index.php?p=$1 [L] 
```

从最后一行可以看出，在服务器名称之后键入的字符串实际上是一个 URL 参数，并且根据该参数，从数据库中提取不同的内容并将该页面显示在站点上。

我遇到的问题是客户端有一个名为“播客”的内容页面，所以他们会转到`site.com/podcast`应该悄悄地重定向到`site.com/index.php?=podcast`该页面并加载该页面的内容。不幸的是，客户端`site.com/podcast/`在他们的服务器上也有一个真实的文件夹。因此，重写将被忽略，浏览器会尝试加载该文件夹。如果我禁用列表，它要么显示文件列表，要么显示禁止错误。

经过一些研究（我还是 htaccess 的新手），我了解到如果路径指向实际文件或文件夹，则前面的两行会禁用重写。不幸的是，注释掉一个`!-d`似乎没有任何效果，并且注释掉两者都会给我一个服务器错误。

诚然，这里的部分问题是缺乏远见。URL 重写应该在其他所有东西放在一起之前就已经计划好了，但是直到网站基本完成，我才被通知客户想要不包含该`?p=`部分的“友好 URL”。无论如何，也许有办法解决这个问题。

即使输入的 URL 指向实际存在的文件夹（不是特定文件），我是否可以使用一些 .htaccess 技巧来强制重写？如前所述，删除`!-d`似乎没有帮助，虽然我不知道为什么。也许我误解了它的目的。

感谢您的帮助，如果我忽略了一些明显的事情，请对我宽容。这是一个现在在客户的现场网站上出现的问题，所以我觉得解决它有点匆忙。再次感谢。

哦，是的，解决方案不能特定于`/podcast`. 客户站点的设置方式，当他们想要为站点创建新的子页面时，会根据页面标题为该内容保存一个新名称，并且可能（不太可能，但仍然可能）另一个页面可以使用与服务器上现有文件夹匹配的名称创建。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T12:50:43.467

这是[**mod_rewrite**文档](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriteoptions)中的注释：

> 默认情况下，mod_rewrite 将忽略映射到磁盘上的目录但缺少尾部斜杠的 URL，期望 mod_dir 模块向客户端发出重定向到带有尾部斜杠的规范 URL。

这就解释了为什么 mod_rewrite 会忽略 URL `/podcast`。我建议您重命名物理目录，以免（意外）匹配文章名称。

另一种选择是禁用该[`DirectorySlash`](http://httpd.apache.org/docs/current/mod/mod_dir.html#directoryslash)设置。这将阻止 Apache 重定向`/podcast`到`/podcast/`.

```
DirectorySlash Off
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([^/]*)$ /index.php?p=$1 [L] 
```

**请注意，禁用此设置会产生副作用**。首先通读文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T07:54:25.103

更改以下代码行：

```
RewriteRule ^([^/]*)$ /index.php?p=$1 [L] 
```

至

```
RewriteRule ^(podcast([^?]*)) index.php?p=$1 [L,NC] 
```

# c# - 有时我在点击右标注按钮时得到错误的纬度和经度

> ID：14412220
> 
> 赞同：1
> 
> 时间：2013-01-19T07:40:04.263
> 
> 标签：c#, xamarin.ios, annotations, mkmapview

每当我通过右侧标注附件按钮单击注释视图时，我都会获得该点的纬度和经度，工作正常，但有时它会显示另一个针的纬度和经度。

为什么会这样？

```
MKAnnotationView GetViewForAnnotation (MKMapView mapView, NSObject annotation)
 {

                    if (annotation is MKUserLocation)

                        return null;

                    // handle our two custom annotations

                    if (imgHazardType==1) 
                    {

                        const string PoliceAnnotationIdentifier = "PoliceAnnotationIdentifier";

                        MKAnnotationView pinView = (MKAnnotationView)mapView.DequeueReusableAnnotation (PoliceAnnotationIdentifier);

                        if (pinView == null) 
                        {

                            MKAnnotationView policeannotationView = new MKAnnotationView (annotation, PoliceAnnotationIdentifier);

                            policeannotationView.CanShowCallout = true;

                            UIImage flagImage = UIImage.FromFile ("Images/cop-point.png");

                            UIButton infobutton =UIButton.FromType(UIButtonType.DetailDisclosure);

                            policeannotationView.RightCalloutAccessoryView= infobutton;

                            infobutton.TouchUpInside+= (sender, e) => 
                            {

                                    NSUserDefaults.StandardUserDefaults.SetString((annotation as Annotation).Coordinate.Latitude.ToString (),"lat");
                                    NSUserDefaults.StandardUserDefaults.SetString((annotation as Annotation).Coordinate.Longitude.ToString (),"lon");

                            } ;

                            RectangleF resizeRect;
                            resizeRect.Size = flagImage.Size;

                            SizeF maxSize = View.Bounds.Inset (AnnotationPadding, AnnotationPadding).Size;

                            maxSize.Height -= NavigationController.NavigationBar.Frame.Size.Height - CalloutHeight;

                            if (resizeRect.Size.Width > maxSize.Width)

                                resizeRect.Size = new SizeF (maxSize.Width, resizeRect.Size.Height / resizeRect.Size.Width * maxSize.Width);

                            if (resizeRect.Size.Height > maxSize.Height)

                                resizeRect.Size = new SizeF (resizeRect.Size.Width / resizeRect.Size.Height * maxSize.Height, maxSize.Height);

                            resizeRect.Location = PointF.Empty;
                            UIGraphics.BeginImageContext (resizeRect.Size);
                            flagImage.Draw (resizeRect);

                            UIImage resizedImage = UIGraphics.GetImageFromCurrentImageContext ();
                            UIGraphics.EndImageContext ();
                            policeannotationView.Image = resizedImage;
                            policeannotationView.Opaque = false;
                            pinViews.Add (policeannotationView);

                            return policeannotationView;

                        }  
                        else 
                        {

                            pinView.Annotation = annotation;

                        }

                        return pinView;

                    } 

            return null;
        } 
```

# jquery - 在 ASP.NET MVC 4 中将 jQuery 1.8.3 更新为 jQuery 1.9.0

> ID：14412221
> 
> 赞同：4
> 
> 时间：2013-01-19T07:40:07.000
> 
> 标签：jquery, asp.net, asp.net-mvc, asp.net-mvc-4

我们使用 ASP.NET MVC 4，我更新我们的项目以使用 jQuery 1.8.3 中的 jQuery 1.9.0，但现在不能使用客户端脚本，如 jQuery 验证、jquery unobtrusive ajax 和 3rd 方 jQuery 库等！

根据[http://blog.jquery.com/2013/01/15/jquery-1-9-final-jquery-2-0-beta-migrate-final-released](http://blog.jquery.com/2013/01/15/jquery-1-9-final-jquery-2-0-beta-migrate-final-released)我们必须使用[jQuery Migrate 插件](https://github.com/jquery/jquery-migrate)。我们使用捆绑我们的 MVC 项目，但是当我使用这个插件时，jQuery.migrateWarnings 在控制台中不可用！

我的问题：

在启用捆绑的 ASP.NET MVC 4 中，我们如何必须将 jQuery 1.8.3 更新为 jQuery 1.9.0 而没有任何问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T00:48:53.277

运行您的应用程序并从您的浏览器查看应用程序的源代码 - jQuery 的版本是 1.9.0 还是 1.8.3？

在 Visual Studio 中，如果您转到工具 -> 库包管理器 -> 管理解决方案的 Nuget 包...然后在左侧单击更新，您应该会看到列出的 jQuery - 单击更新。

据我所知，这将照顾一切。再次检查来源。

您可以做的另一件事：转到解决方案资源管理器 -> App_Start -> BundleConfig.cs - 确保第一次`bundles.Add`调用是这样的：

```
bundles.Add(new ScriptBundle("~/bundles/jquery").Include(
                    "~/Scripts/jquery-{version}.js", 
                    "~/Scripts/jquery-migrate-1.0.0.js")); 
```

编辑：

读[这个。](https://github.com/jquery/jquery-migrate/#readme)

查看新的捆绑代码 - 显然确保您已经下载了迁移文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-17T09:51:25.550

您应该使用 Nuget 进行更新。工具 -> 库包管理器 -> 管理 Nuget 包解决方案（如果您在那里，请停止调试模式）

```
- when update jquery, you need update other js lib also like 
 + Jquery Validate
 + Microsoft Jquery Unobtrusive Validate
 + Other lib if you think it relate.. 
```

并在 _layout.cshtml 确保你有类似的东西

```
@Scripts.Render("~/bundles/jquery")
@Scripts.Render("~/bundles/jqueryval")
@Scripts.Render("~/bundles/jqueryui") 
```

如果你使用 ajax validate 和 jqueryui ...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-16T19:44:50.657

Just open the package manager console in the `nuget` package manager and run the command:

```
Install-package jQuery 
```

# mysql - mysql中的套路是什么，有什么好处

> ID：14412224
> 
> 赞同：0
> 
> 时间：2013-01-19T07:40:17.067
> 
> 标签：mysql, mysql-workbench

MySQL中的例程是什么 可能有一个简单的示例例程

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T07:48:09.887

存储过程或函数...就像数据库中的脚本。MySql 有很好的文档[http://dev.mysql.com/doc/refman/5.0/en/stored-routines-syntax.html](http://dev.mysql.com/doc/refman/5.0/en/stored-routines-syntax.html)

# c++ - 使用 OpenGL 在 Qt 项目中设置错误

> ID：14412226
> 
> 赞同：0
> 
> 时间：2013-01-19T07:40:44.473
> 
> 标签：c++, qt, opengl

在 Qt 中使用 OpenGL 的项目中，我在受保护的方法 initializeGL() 中使用了语句

```
 qglClearColor(qtPurple.dark()); 
```

在构建项目中发生以下错误：

```
 ‘qtPurple’ was not declared in this scope
 ‘qglClearColor’ was not declared in this scope 
```

包含的文件是：

```
 #include <QtGui>
 #include <QtOpenGL>
 #include <QtGui/QColor> 
```

在 .pro 文件中存在

```
QT       += core gui, opengl 
```

导致这些错误的错误在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T08:10:18.213

`QGLClearColor`是 的非静态成员`QGLWidget`。所以首先你必须包含`<QGLWidget>`到你的小部件头文件并从 QGLWidget 继承你的小部件。然后您将能够在您的小部件的方法中调用它。您会收到`was not declared in this scope`错误，因为`qglClearColor`在`QGLWidget`范围内。

或者，您可以将其称为小部件对象的常规方法。

什么是`qtPurple`？似乎它不是Qt的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T08:10:00.060

1.  添加`#include <QtOpenGL/QGLWidget>`你的头文件。你的类应该继承`QGLWidget`。

2.  好像你没有声明变量`qtPurple`，所以检查你的头文件，如果不存在，只需声明它[像这样：`QColor qtPurple;`]。

# c# - 从 C# 代码中回滚插入错误

> ID：14412231
> 
> 赞同：2
> 
> 时间：2013-01-19T07:41:19.120
> 
> 标签：c#, visual-studio-2010, sql-server-2008

如果发生任何错误，我将插入一系列带有回滚选项的行。

```
BEGIN TRY
BEGIN TRANSACTION

    INSERT INTO myTable (myColumns ...) VALUES (myValues ...);
    INSERT INTO myTable (myColumns ...) VALUES (myValues ...);

COMMIT TRAN -- Transaction Success!
END TRY
BEGIN CATCH
IF @@TRANCOUNT > 0
    ROLLBACK TRAN --RollBack 

END CATCH 
```

在 C# 中，我在 for 循环中插入行。是否也可以在这里获得相同的功能？

```
foreach(string lst in str[])
{
    //insert query
    dbl.ExecSqlNonQuery("sp_tbltest", CommandType.StoredProcedure);
} 
```

如果循环中发生任何错误，所有行都应该回滚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T07:45:24.280

是的，您可以使用 SqlTransaction 提交和回滚错误

[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqltransaction.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqltransaction.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T07:46:21.917

```
try
    {            
        using (TransactionScope scope = new TransactionScope())
        {
            //// create the connection
            using (SqlConnection connection1 = new SqlConnection(connectString1))
            {
                //// open the connection
                connection1.Open();

                foreach(string lst in str[])
                {
                     //insert query
                     connection1.ExecSqlNonQuery("sp_tbltest", CommandType.StoredProcedure);
                }                    
            }

            scope.Complete();

        }

    }
    catch (Exception)
    {
        scope.Rollback();
    } 
```

# django - 如何一起部署 Yii 和 Django

> ID：14412234
> 
> 赞同：0
> 
> 时间：2013-01-19T07:41:41.900
> 
> 标签：django, .htaccess, yii

我有一个 yii 网站。但我想让 django 为具有 url 路径 www.mysite.com/django 或子域 www.django.mysite.com 的页面提供服务。服务器安装了 fastcgi，它是一个共享服务器。

我的 yii .htaccess 文件看起来像这样（它在 www 文件夹中），因为我删除了 index.php 以获得干净的 url

```
 Options +FollowSymLinks
`   IndexIgnore */*
    RewriteEngine on

    # if a directory or a file exists, use it directly
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d

    # otherwise forward it to index.php
    RewriteRule . index.php 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T08:00:10.187

共享服务器是指付费主机吗？真正的问题是您是否可以访问 apache conf，如果没有，您是否可以礼貌地要求主机为您插入 django 的 VirtualHost。

# coq - 在 coq 中证明 max 的交换性

> ID：14412236
> 
> 赞同：1
> 
> 时间：2013-01-19T07:41:53.337
> 
> 标签：coq

我有一个功能`max`：

```
Fixpoint max (n : nat) (m : nat) : nat :=
  match n, m with
    | O, O => O
    | O, S x => S x
    | S x, O => S x
    | S x, S y => S (max x y)
  end. 
```

和以下的交换性证明`max`：

```
Theorem max_comm :
  forall n m : nat, max n m = max m n.
Proof.
  intros n m.
  induction n as [|n'];
    induction m as [|m'];
      simpl; trivial.
(* Qed. *) 
```

这离开了`S (max n' m') = S (max m' n')`，这似乎是正确的，并且鉴于基本情况已经被证明，似乎应该能够告诉 coq“只使用递归！”。但是，我不知道该怎么做。有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T13:33:54.610

问题是您`m`在对变量进行归纳之前引入变量`n`，这使得归纳假设不那么普遍。试试这个。

```
intro n; induction n as [| n' IHn'];
  intro m; destruct m as [| m'];
    simpl; try (rewrite IHn'); trivial. 
```

# java - 为 giraph 运行 hive 作业以进行图形分析时出现问题

> ID：14412237
> 
> 赞同：0
> 
> 时间：2013-01-19T07:42:29.223
> 
> 标签：java, mysql, hadoop, guava, hive

我们正在尝试在 giraph 上运行 hive 作业，进行图形分析，但每次我们都会不断遇到我们以前从未见过的新错误..即使尝试了几个小时我们也找不到解决方案..现在我们得到了新错误..

我们使用以下命令运行 hive 作业

```
sudo -u hdfs hive --service jar \
    giraph-hcatalog-0.2-SNAPSHOT-jar-with-dependencies.jar \
    org.apache.giraph.io.hcatalog.HiveGiraphRunner \
    -vertexClass org.apache.giraph.vertex.MutableVertex \
    -vertexInputFormatClass org.apache.giraph.io.hcatalog.HCatalogVertexInputFormat \
    -vertexOutputFormatClass org.apache.giraph.io.hcatalog.HCatalogVertexOutputFormat \
    -w 1 -vi giraph_input -o giraph_output \
    HIVE_OPTS="-hiveconf javax.jdo.option.ConnectionURL=jdbc:mysql://localhost/metastore 
               -hiveconf javax.jdo.option.ConnectionDriverName=com.mysql.jdbc.Driver
               -hiveconf javax.jdo.option.ConnectionUserName=root
               -hiveconf javax.jdo.option.ConnectionPassword=root
               -hiveconf datanucleus.autoCreateSchema=false
               -hiveconf datanucleus.fixedDatastore=true" 
```

i/p 有什么问题吗？只是想使用 hivegiraphrunner 运行 hive 作业，使用 hcat inputformatvertex 和 outformatvertex

使用 hadoop-0.20.2 hadoop-hive (cloudera) hadoop, hive, mysql, 正在正常工作和运行 (cofigured hadoop_env, hive-site)

giraph jars 是一个成功的构建

他们是我错过的东西，还是应该配置

任何建议都会有很大帮助..!!

得到以下异常..

```
Exception in thread "main" java.lang.NoSuchMethodError: com.google.common.util.concurrent.MoreExecutors.sameThreadExecutor()Lcom/google/common/util/concurrent/ListeningExecutorService;
    at com.google.common.cache.LocalCache.<clinit>(LocalCache.java:156)
    at com.google.common.cache.LocalCache$LocalManualCache.<init>(LocalCache.java:4765)
    at com.google.common.cache.CacheBuilder.build(CacheBuilder.java:821)
    at org.apache.hcatalog.common.HiveClientCache.<init>(HiveClientCache.java:89)
    at org.apache.hcatalog.common.HCatUtil.getHiveClient(HCatUtil.java:537)
    at org.apache.hcatalog.mapreduce.HCatUtils.getInputJobInfo(HCatUtils.java:75)
    at org.apache.giraph.io.hcatalog.GiraphHCatInputFormat.setVertexInput(GiraphHCatInputFormat.java:81)
    at org.apache.giraph.io.hcatalog.HiveGiraphRunner.run(HiveGiraphRunner.java:174)
    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:79)
    at org.apache.giraph.io.hcatalog.HiveGiraphRunner.main(HiveGiraphRunner.java:147)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.hadoop.util.RunJar.main(RunJar.java:197)
    enter code here 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T20:40:43.660

Giraph 依赖于 guava 12.0（参见它的[POM](https://github.com/apache/giraph/blob/trunk/pom.xml)，第 752-756 行），这说明[`MoreExecutors.sameThreadExecutor()`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/util/concurrent/MoreExecutors.html#sameThreadExecutor%28%29)如果您在 hive/lib 中已经有 r06 并且 Hive 直接在其 JVM 中加载 giraph，则找不到（在 10.0 中引入）。

您可以尝试在 Hive 中升级 jar，但是由于 2 个版本之间的距离如此之大，它很可能不兼容。在这种情况下，我猜你可能需要升级 Hive，虽然我不是 Hadoop 用户并且不知道细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T09:11:27.240

**您可以从/hive/lib**导入番石榴。如果出现任何其他依赖项，请将它们添加到

# java - Android：服务完成任务时如何启用按钮？

> ID：14412238
> 
> 赞同：3
> 
> 时间：2013-01-19T07:42:33.937
> 
> 标签：java, android, button, android-activity, android-service

我在 MainActivity.java 上有两个按钮**StartButton**和**StopButton 。**当我按下**StartButton**时，会创建一个**Service**并且 StartButton 会被**禁用**。在按下**StopButton** Service 被破坏并且 StartButton 被**启用**。

我想做的是在服务完成任务时**启用我的开始按钮；**它在我的 MainActivity.java 上**返回任何通知或触发类型事件或消息值**，以便我的开始按钮启用。

请给我任何想法、概念或代码，以使我易于理解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T09:44:42.777

可以有很多方法来实现这一点。让我告诉你一个广播接收器。我希望您了解 BroadcastReceiver 的概念。

您的活动需要更改

1）在您的活动中创建一个广播接收器作为内部类。

2) 用一些动作注册它，假设“MY_ACTION”。（记得在 onPause/onDestroy 方法上取消注册这个接收器）

3）假设服务完成了它的任务，并且你进入了广播接收器的onReceive方法，现在编写你的代码来启用/禁用按钮（我希望你知道怎么做）

您的服务中需要更改

1）找出您认为其任务已完成的代码。

2) 创建具有相同操作的意图 ("MY_ACTION")。

3) 使用 sendBroadcast 广播消息，intent 作为参数。你就完成了。:)

让我知道您是否在任何时候觉得自己被卡住了，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T07:50:54.287

你有没有尝试过，

```
MyButton.setClickable(false); 
```

它会使按钮被禁用。

和

```
MyButton.setClickable(true); 
```

它将启用该按钮。

但是，如果要隐藏或显示按钮，可以使用，

`MyButton.setVisibiity(VIEW.VISIBLE);`和`MyButton.setVisibiity(VIEW.INVISIBLE);`

**编辑 -**当您想要启用按钮时，一旦其任务完成，您可以打开带有标志值 true 的 mainActivity，如下所示，

```
Intent i= new Intent(getBaseContext(), myActivity.class);
i.putExtra("flag", true);
i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
getApplication().startActivity(i); 
```

在**mainActivity**中，检查 flag 的值，

```
Boolean flag;
flag = this.getIntent().getBooleanExtra("flag", false);
if(flag == true) {
MyButton.setClickable(true);
} 
```

但是对于它，您应该将 flag 的值最初保持为`false`.

一旦您单击该按钮，您就可以将其设置为不可点击。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T08:31:22.613

要了解服务和应用程序之间的通信，请查看[android 开发者文档](http://developer.android.com/reference/android/app/Service.html)中的示例。您可以在 onServiceDisconnected() 和 onServiceConnected() 方法中启用和禁用按钮。

请记住，默认情况下，该服务与您的应用程序在同一线程中运行。

# jquery-ui - 强制 jQuery UI 对话框按钮焦点

> ID：14412244
> 
> 赞同：0
> 
> 时间：2013-01-19T07:43:15.917
> 
> 标签：jquery-ui, button, dialog

我有几个带有`Ok`和`Cancel`和单选按钮的 jQueryUI 对话框（没有文本输入）。

我的要求是：

OK 按钮应该在 Cancel 按钮的右边，并且 Ok 按钮应该是焦点：

1.  当对话框打开时，
2.  在任何用户单击或拖动后。

要求 1 可以通过给 Ok 按钮一个 id 和以下代码来实现：
`open: function(event, ui) { $('#OkButton').focus(); },`

要求 2 更难。它可以通过为许多事件定义焦点代表来实现：

*   .ui-dialog-titlebar 点击
*   .ui-dialog-buttonpane 点击
*   拖动停止
*   ETC

但肯定有更简单的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T08:39:19.400

Try this code. `myDialog` is main dialog `div` When you drag your dialog this will do the job

```
jQuery('.myDialog').bind('move', function(e) {
    $('#OkButton').focus();
}).bind('moveend', function() {}); 
```

and when you click on your dialog main div this will do the job.

```
jQuery('.myDialog').click(function(){
    $('#OkButton').focus();
}); 
```

# c# - 如何获得超过 1000 个 html 控件值的 HttpContext.Current.Request？

> ID：14412250
> 
> 赞同：0
> 
> 时间：2013-01-19T07:44:23.320
> 
> 标签：c#, html, httprequest, namevaluecollection

我在一个 html 网页中有 1000 多个控件。当我提交页面时，我只得到 1000 个控件的值

```
NameValueCollection nv = (NameValueCollection) HttpContext.Current.Request.Form 
```

nv.count 是 1000，如何获得 1000 多个 html 控件值的 HttpContext.Current.Request ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T08:15:24.157

您的网络服务器对允许的请求大小有限制。

如果您使用的是 IIS，您可以查看 [http://www.iis.net/configreference/system.webserver/security/requestfiltering/requestlimits](http://www.iis.net/configreference/system.webserver/security/requestfiltering/requestlimits)

但我建议使用其他技术来发布您的数据，也许是 AJAX

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T07:53:48.917

什么 - 你怎么能明智地拥有 1000 多个输入控件？闻起来像“一页统治他们”。那是你的问题。你不会解决这个问题 - 浏览器可能不会发布它们。您最好不要提交网页，而是使用 AJAX 并使用所有值构造一些 JSON 有效负载。

# java - 将运算符符号分配给变量并将该变量用于条件检查

> ID：14412252
> 
> 赞同：7
> 
> 时间：2013-01-19T07:44:32.217
> 
> 标签：java

我可以将运算符符号分配给变量并使用该变量进行条件检查吗？

```
char operator= '>';
int val1=10;
int val2=24;
if(val2 operator val1){

    /* some code*/

} 
```

为什么我不能在条件内使用运算符变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T07:48:03.663

嘿**那不支持**我认为这对我来说很有意义。

**编译器在构建您的应用程序时会读入运算符。它无法知道操作员是什么，因此无法构建**我在[http://www.daniweb.com/software-development/csharp/threads/266385/c-using-operator-as-a-中找到的正确性计算变量](http://www.daniweb.com/software-development/csharp/threads/266385/c-using-operator-as-a-variable-in-calculations)

他们是在 C# 的上下文中讨论的，但我觉得同样的事情在这里也很有意义。

您不能直接这样做，但有一些解决方法：

[http://www.coderanch.com/t/568212/java/java/arithmetic-operations-operator-stored-variables](http://www.coderanch.com/t/568212/java/java/arithmetic-operations-operator-stored-variables)

如果确实需要，我们必须在代码中使用 eval 之类的东西。我刚刚尝试了这个示例代码。

```
package dumb;

import javax.script.ScriptEngine;
import javax.script.ScriptEngineManager;
import javax.script.ScriptException;

public class OperatorAsVariable
{
    public static void main( String args[] ) throws ScriptException
    {
        String test = "+";
        System.out.println( 1 + test + 2 );
        ScriptEngineManager manager = new ScriptEngineManager();
        ScriptEngine engine = manager.getEngineByName( "js" );
        System.out.println( engine.eval( 1 + test + 2 ) );
    }

} 
```

礼貌：[Java 中有 eval() 函数吗？](https://stackoverflow.com/questions/2605032/using-eval-in-java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T08:07:23.467

Java 中的方法参数必须是表达式。运算符不是表达式。这在 Java 中是不可能的。

更好的方法是传递代表这些运算符的对象（枚举）

例子：

```
public enum Operator{
    GREATHERTHAN(">") {
        @Override public double apply(double x1, double x2) {
            return x1 > x2;
        }
    },LEESTHAN{
        @Override public double apply(double x1, double x2) {
           return x1 < x2;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T08:30:52.940

不，你不能在 Java 中那样做。

要动态定义二元关系，您需要将关系表示为对象，并使用两个参数方法进行检查：

```
if (binaryRelation.areRelated(a,b))
{
    // Do something
} 
```

根据您的需要，标准`Comparator`接口可能适合也可能不适合。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-19T08:04:52.787

查看[Comparator](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)或[Comparable](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)接口以及它们的使用方式。然后定义你自己的接口，它接受两个参数并返回一个布尔值，并为它们提供不同的实现（这是 OOP）。

另一种方法是等待具有[lambda](http://openjdk.java.net/projects/lambda/)表达式的 Java 8。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-19T08:13:49.433

用任何编程语言编写的代码都需要转换为汇编语言。发生这种情况时，每条用高级语言编写的代码语句都会被翻译成中级等效的指令/指令集，即 JAVA 代码将被翻译成汇编语言中的机器特定指令。

这里在下面的语句中添加操作，

```
int a = a + 10; 
```

可能会转换为

添加一个 1010;

当我们尝试访问变量值时，它可能会被转换为 READ 指令。

因此，当您尝试在变量中使用“>”时，

```
char operator= '>';
int val1=10;
int val2=24;
if(val2 operator val1){

/* some code*/

} 
```

if 语句，

```
if(val2 operator val1) 
```

将转换为无效指令。它不会为两个值的比较生成等价物，而是读取“运算符”变量。

这显然会导致错误的解释。

因此，不允许这样做。

每个编译器（java、gcc 等）的行为可能不同，但目标是相同的。如果您阅读 Complier / Compilation / Execution 更多，您将了解更多。这些是一些链接：

[http://www.coderanch.com/t/559258/java/java/java-codes-converted-assembly-JVM](http://www.coderanch.com/t/559258/java/java/java-codes-converted-assembly-JVM)

[编程语言编译器首先转换为汇编还是直接转换为机器代码？](https://stackoverflow.com/questions/845355/do-programming-language-compilers-first-translate-to-assembly-or-directly-to-mac)

*AC程序的编译步骤。*

[http://www.herongyang.com/Computer-History/C-Program-Compilation-and-Execution-Process.html](http://www.herongyang.com/Computer-History/C-Program-Compilation-and-Execution-Process.html)

# javascript - 在 jQuery 中，当图像加载到“Each & Load”循环中时如何调用函数

> ID：14412253
> 
> 赞同：0
> 
> 时间：2013-01-19T07:44:33.153
> 
> 标签：javascript, jquery

我正在写一个这样的小插件：

```
(function($){
  $.fn.extend({
    myplugin: function (callback) {
      return this.each(function(){
        $(this).one('load',function(){
          // Manipulate Images
        }) ;
      }) ;
    }
  }) ;
})(jQuery); 
```

我想在插件完成工作后触发回调：

```
jQuery('img').myplugin({function(){
  // Do something
}) ; 
```

我怎样才能做到这一点？

**编辑：**它仍然没有解决，即使我得到了一个减分，因为我的问题没有明确指定。但这显然是一个有点棘手的解决方案。有没有js ninja可以解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T08:42:20.927

I would use deferred objects:

```
(function($) {

    $.fn.extend({
        myplugin: function (callback) {

            // create array of deferred objects to track loading
            var dfds = this.map(function(ix, el) {
                return $.Deferred(function(def) {
                    $(el).one('load', def.resolve)
                         .one('error', def.resolve);
                }).promise();
            }).get();

            // register the final callback
            $.when.apply($, dfds).done(callback);

            // and chain
            return this;
        }
    }) ;
})(jQuery) ; 
```

See [http://jsfiddle.net/Yq4Mf/1/](http://jsfiddle.net/Yq4Mf/1/) (thanks @salexch for the initial fiddle which I've then forked with my answer)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T08:20:54.000

最简单的解决方案是

```
 var cnt = 0;    
 (function($){
    $.fn.extend({
        myplugin: function (callback) {
            cnt = this.length;
            return this.each(function(){
                $(this).one('load',function(){
                    // Manipulate Images

                    // Fire callback
                    if (--cnt==0) callback();
                }).error(function(){
                   if (--cnt==0) callback();
                }) ;
            }) ;
        }
    }) ;
})(jQuery) ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T07:50:35.563

一个解法 ：

```
(function($){
    $.fn.extend({
        myplugin: function (callback) {
            var nb = this.length;
            return this.each(function(){
                $(this).one('load',function(){
                    // Manipulate Images
                    if (--nb==0) callback();
                }) ;
            }) ;
        }
    }) ;
})(jQuery) ; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T07:48:16.797

尝试这个：

```
(function($){
    $.fn.extend({
        myplugin: function (callback) {
            this.each(function(){
                $(this).one('load', function() {
                    // Manipulate Images
                }) ;
            });
            callback();
            return this;
        }
    }) ;
})(jQuery); 
```

编辑：恢复。你的问题没有很清楚地说明......

# php - php自动添加\到href

> ID：14412256
> 
> 赞同：1
> 
> 时间：2013-01-19T07:45:23.330
> 
> 标签：php

当我点击“编辑”按钮时，我的网页出现了这个问题，所有 href 都在链接中添加了“\”。

按下按钮时，它将继续添加。

我在 xampp-localhost 上对其进行了测试，但一切正常 - 它仅在托管时发生。

我是 php 新手；我试图谷歌它，但不知道在哪里看，下面的代码是我的编辑按钮的操作：

```
if ($img_path!=NULL){
        //delete old image  
        $sql="SELECT image FROM entry WHERE url =?";
        $stm = $db->prepare($sql);
        $stm->execute(array($_POST['url']));
        $e = $stm->fetch();
        if($e['image']!="/simple_blog/img/no_img.jpg"){
            unlink($_SERVER['DOCUMENT_ROOT'].$e['image']);
        }

        //update new contain
        $sql = "UPDATE entry SET entry=?, title=?, image=?, url=? WHERE url = ?";
        $stmt = $db->prepare($sql);
        $stmt->execute(array($_POST['wall'],$_POST['title'],$img_path,$url,$_POST['url']));
    } elseif ($img_path==NULL){
        $sql = "UPDATE entry SET entry=?, title=?,url=? WHERE url = ?";
        $stmt = $db->prepare($sql);
        $stmt->execute(array($_POST['wall'],$_POST['title'],$url,$_POST['url']));
    }
    $stmt->closeCursor();
    header('Location: /simple_blog/blog/'.$_POST['url']); 
```

抱歉，如果我没有很好地解释问题，这里是您可以查看的页面，我将问题放在第一个条目中。

[链接到博客](http://tblog.comli.com/simple_blog/)

用户：testUser

通行证：12345

非常感谢您的帮助！

谢谢 PleaseStand 提供建议链接：D 这是魔术引号

只需添加以下代码，一切都会正常工作：

```
<?php
if (get_magic_quotes_gpc()) {
$process = array(&$_GET, &$_POST, &$_COOKIE, &$_REQUEST);
while (list($key, $val) = each($process)) {
foreach ($val as $k => $v) {
    unset($process[$key][$k]);
    if (is_array($v)) {
        $process[$key][stripslashes($k)] = $v;
        $process[] = &$process[$key][stripslashes($k)];
    } else {
        $process[$key][stripslashes($k)] = stripslashes($v);
    }
}
}
unset($process);
}?> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-19T08:16:06.993

sql 查询对放在 / 之前的问号很敏感。

为了解决这个问题，你可以使用这个代码从数据库中读取

```
function dbdecode($string){
    $string=str_replace('\\',"\\",$string);
    $string=str_replace("\'","'",$string);
    $string=str_replace("\`","`",$string);
    $string=str_replace('\"','"',$string);
    $string=str_replace('\*','*',$string);
    return $string;
} 
```

# android - 我在android中没有拨号屏幕

> ID：14412261
> 
> 赞同：0
> 
> 时间：2013-01-19T07:45:53.730
> 
> 标签：android

```
btnCall.setOnClickListener(new OnClickListener()
        {
            public void onClick(View v) 
            {
                Intent intentCall=new Intent();
                intentCall.setAction(android.content.Intent.ACTION_CALL);
                intentCall.setData(Uri.parse("Calling no.."+edtText.getText()));
                startActivity(intentCall);
            }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T07:49:14.363

试试这个，

```
 Intent dial = new Intent();
    dial.setAction("android.intent.action.DIAL");
    dial.setData(Uri.parse("tel:"+edtText.getText().toString()));
    startActivity(dial); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T08:01:47.317

```
Intent callIntent = new Intent(Intent.ACTION_CALL);
callIntent.setData(Uri.parse("tel:"+edtText.getText().toString()));
startActivity(callIntent); 
```

授予您的应用程序调用 AndroidManifest 的权限

```
<uses-permission android:name="android.permission.CALL_PHONE" /> 
```

# facebook-php-sdk - Facebook PHP SDK 总是 0

> ID：14412265
> 
> 赞同：0
> 
> 时间：2013-01-19T07:46:34.710
> 
> 标签：facebook-php-sdk

我想在服务器端使用 Facebook。因此我使用 Facebook SDK API。我使用教程快速启动并添加了 curl 选项来解决经常出现的问题。

但是 getUser 再次返回 0。我做了 print_r($ *SESSION)。并看到有 fb* _[FACEBOOK_APP_ID]_state var。Facebook 将我重定向回我的页面，没有错误，但 getUser 为 0。

```
define('FACEBOOK_APP_ID',"387123884707291");
define('FACEBOOK_SECRET',"REMOVED");

$user = null;

$facebook = new Facebook(array(
    'appId' => FACEBOOK_APP_ID,
    'secret' => FACEBOOK_SECRET,
    'cookie' => true   
));

Facebook::$CURL_OPTS[CURLOPT_SSL_VERIFYPEER] = 0;
Facebook::$CURL_OPTS[CURLOPT_SSL_VERIFYHOST] = 0;  
Facebook::$CURL_OPTS[CURLOPT_CONNECTTIMEOUT] = 30; 

$user = $facebook->getUser(); 

print_r($_SESSION); //here line!

if($user == 0) {

    $login_url = $facebook->getLoginUrl(array('scope' => 'email'));   
    $content =  "<script> top.location.href='".$login_url."'</script>";

    echo "bb";

} else 
     echo "logined";
die; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T13:45:45.110

好的。我通过启用“Facebook 应用程序”选项卡解决了问题（见截图）。

![在此处输入图像描述](../Images/36a86c781076279a2cc730a865c2130f.png)

# jquery - 通过 jquery 在 asp.net mvc3 中加载模型数据

> ID：14412267
> 
> 赞同：0
> 
> 时间：2013-01-19T07:46:43.560
> 
> 标签：jquery, asp.net-mvc-3

我有这段代码可以在我的数据库中搜索某人：

```
<script type="text/javascript">
    $(function () {
        $('#search').click(function () {
            $mvc.jssearchNational.search({ nationalCode: $("#karkonan_MelliCode").val() }).success(function (data) {
                $("#searchres").replaceWith("<span id=searchres>" + data.message + "</span>");
            });
        });
    });
</script> 
```

我想在成功搜索后，通过 jquery 在页面中加载人员信息。是否有人动态绑定模型并通过 jquery 刷新页面，或者我必须将每个字段分配给我的页面控件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T22:10:27.010

如果您想使用绑定，请尝试查看 MVVM 模式和[KnockOutJS](http://knockoutjs.com/)

# asp.net-mvc - 如何为 MVC4 和自定义会员提供配置 Ninject？

> ID：14412279
> 
> 赞同：3
> 
> 时间：2013-01-19T07:48:38.970
> 
> 标签：asp.net-mvc, entity-framework, ninject, custom-membershipprovider

根据本文描述[custom-membership-provider-with-repository-injection](http://www.danharman.net/2011/06/23/asp-net-mvc-3-custom-membership-provider-with-repository-injection/)

我实现了通过注入提供的自定义会员资格。

**自定义会员提供者**

```
using Ninject;

public class CustomMembershipProvider : MembershipProvider
{
        [Inject]
        public IUserRepository UserRepository { get; set; }

[...] 
```

**自定义角色提供者**

```
using Ninject;

public class CustomRoleProvider : RoleProvider
{
      [Inject]
      public IUserRoleRepository UserRoleRepository { get; set; }
[...] 
```

在**Web.Config中**

```
<membership defaultProvider="CustomsMembershipProvider">
      <providers>
        <clear/>
        <add name="CustomsMembershipProvider" type="namespace.CustomsMembershipProvider"/>
      </providers>
</membership>
<roleManager enabled="true" defaultProvider="customRoleProvider">
      <providers>
        <clear/>
        <add name="customRoleProvider" type="namespace.customRoleProvider"/>
      </providers>
</roleManager> 
```

现在在**NinjectWebCommon**

```
private static IKernel CreateKernel()
{
      var kernel = new StandardKernel();
      kernel.Bind<Func<IKernel>>().ToMethod(ctx => () => new Bootstrapper().Kernel);
      kernel.Bind<IHttpModule>().To<HttpApplicationInitializationHttpModule>();

      RegisterServices(kernel);
      return kernel;
}

private static void RegisterServices(IKernel kernel)
{
  [...]

  kernel.Bind<IUserRepository>().To<UserRepository>();
  kernel.Bind<IUserRoleRepository>().To<UserRoleRepository>();

  // Inject user & role repository into our custom membership & role providers.
   kernel.Inject(Membership.Provider);
   kernel.Inject(Roles.Provider);
} 
```

当我运行应用程序时出现错误

> 在应用程序的预启动初始化阶段不能调用此方法。

从这 `kernel.Inject(Membership.Provider);`条线

但是如果我将内核设置放在**Application_Start中**

我得到以下错误

> 激活 IUserRepository 时出错 没有匹配的绑定可用，并且类型不是自绑定的。激活路径： 2) 将依赖 IUserRepository 注入到 CustomMembershipProvider 类型的属性 UserRepository 1) 对 CustomeMembershipProvider 的请求

如何解决。??

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-20T14:48:09.760

结果始终为空。为什么？因为asp.net 有它自己的成员静态属性。

这是membership.provider。并且此实例不是实例 ninject 管理的一部分。

要解决它，您需要使用 kernel.inject。但是在生成 aspnetmvc.cs 时，您会看到它是在 PreApplicationStart 事件中注入的，并且不会让您这样做。

这是**cipto**为我解决问题的解决方案。将此添加到您的 NinjectWebCommon

```
 [assembly: WebActivator.PreApplicationStartMethod(typeof(TopRankFantasy.App_Start.NinjectMVC3), "Start")]
    [assembly: WebActivator.PostApplicationStartMethod(typeof(TopRankFantasy.App_Start.NinjectMVC3), "RegisterMembership")]
    [assembly: WebActivator.ApplicationShutdownMethodAttribute(typeof(TopRankFantasy.App_Start.NinjectMVC3), "Stop")]

    public static void RegisterMembership()
    {
        bootstrapper.Kernel.Inject(Membership.Provider);
    } 
```

文章链接：[Ninject 和 customMembership asp.net mvc 3](http://netindonesia.net/blogs/cipto/archive/2012/02/05/ninject-and-custommembership-asp-net-mvc-3.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T07:51:25.127

我在尝试这个时遇到了很多麻烦，最后添加了一个让我获得存储库的方法

```
using System.Web.Mvc;  //Used to access dependency resolver

    private IUserRepository GetUserRepository()
    {
        return DependencyResolver.Current.GetService<IUserRepository>();
    } 
```

然后我在需要它的方法中调用它

我能够使用构造函数注入来注入存储库，但是一旦我去使用存储库，对象就被释放了。我发现上面是最简单的选择。

但是，我想您也可以使用该`Initialize()`方法

```
 IUserRepository userRepository;
    public override void Initialize(string name, NameValueCollection config)
    {
        base.Initialize(name, config);
        this.userRepository = DependencyResolver.Current.GetService<IUserRepository>();
    } 
```

或者另一种方式是使用属性

```
public IUserRepository UserRepository
{
    get
    {
        return DependencyResolver.Current.GetService<IUserRepository>();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-10T08:57:27.820

由于 custom`RoleProvider`经常与 custom 一起出现`MembershipProvider`，在这种情况下，为 Role Provider 类添加注入很有用。我使用了**ramon22 的**解决方案，并增加了一行。

```
[assembly: WebActivator.PreApplicationStartMethod(typeof(TopRankFantasy.App_Start.NinjectMVC3), "Start")]
[assembly: WebActivator.PostApplicationStartMethod(typeof(TopRankFantasy.App_Start.NinjectMVC3), "RegisterMembership")]
[assembly: WebActivator.ApplicationShutdownMethodAttribute(typeof(TopRankFantasy.App_Start.NinjectMVC3), "Stop")]

public static void RegisterMembership()
{
    bootstrapper.Kernel.Inject(Membership.Provider);
    bootstrapper.Kernel.Inject(Roles.Provider);
} 
```

# smalltalk - 如何学习法罗

> ID：14412296
> 
> 赞同：11
> 
> 时间：2013-01-19T07:50:44.740
> 
> 标签：smalltalk, pharo

我安装了 Pharo 1.4 并尝试阅读“Pharo by example”。

不幸的是，这本书和 Pharo 图像完全不同步：菜单不同；用作示例的类不存在，例如；BouncingAtomsMorph 类。

很可惜。也许一个人应该使用特定的 Pharo 版本来学习，而另一个版本来更新……有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-19T12:11:58.690

首先一定要完成 Stef 教授的教程，它提供了基础知识。您可以通过执行开始教程

```
ProfStef go. 
```

在一个工作区。*只需在工作区中键入它，选择它，右键单击，**执行***

还有一[本 Pharo 合作的书](http://book.pharo-project.org)，里面有很多有趣的东西。还有一些[Pharocasts](http://www.pharocasts.com)可以帮助你学习一些有趣的东西。

您也可以在 Stack Overflow 上提出问题，如果它更通用并且人们会帮助您，请用[pharo](/questions/tagged/pharo "显示标记为“pharo”的问题")或[smalltalk标记它们。](/questions/tagged/smalltalk "显示标记为“smalltalk”的问题")

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-19T12:41:24.823

正如@Sharphawk 所说，有一张[与本书一起使用的图片，可从主页获得](http://gforge.inria.fr/frs/download.php/31048/PBE-OneClick-1.1.app.zip)。它现在有点旧，但它应该与书同步。

Pharo 的发展太快了，我们跟不上这本书的步伐（还有很多章节在进行中），所以对于最近的图像，你必须自己适应和发现一些东西。幸运的是，还有很多其他资源可以帮助您：当然，这里是[本书](http://www.iam.unibe.ch/pipermail/sbe-discussion/)和[Pharo 本身](http://lists.gforge.inria.fr/mailman/listinfo/pharo-project)的邮件列表、irc.freenode.net 上的#pharo-project IRC 频道、@ 指向的书籍和截屏视频uko等

从经验来看，通过一些探索和指导，Smalltalk 更容易学习

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-07-18T17:03:29.083

对于绝对初学者，以下是最近的实用和动手教程，仅涵盖帮助您入门的基础知识：

[http://ceronio.net/2017/07/first-steps-with-pharo-smalltalk/](http://ceronio.net/2017/07/first-steps-with-pharo-smalltalk/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-07-19T17:17:52.610

由于您的问题有点模糊（可以理解），而且我不知道您的背景或您的需求，我将尝试对 Pharo 进行简要概述，以便您知道在哪里寻找，因为您获得更多的经验和您的需求演变。

# 语言基础

正如 Uko 所指出的，如果您是 Smalltalk 的新手，最好的入门方法是遵循**Stef 教授的教程**。这将使您熟悉该语言的核心方面。为了快速参考，您可以使用[Pharo Cheatsheet](http://files.pharo.org/media/flyer-cheat-sheet.pdf)。

# 基本工具

完成本教程后，您应该熟悉这些工具，以便您可以在 Pharo 中有效地工作。您可能已经知道，重要的工具是**Class Browser**、**Inspector**和**Debugger**。

### 从代码示例中学习

类浏览器有很多有用的特性，特别是它允许您在系统中搜索方法和类引用，将您指向具体的代码示例。您可以右键单击任何方法，然后在上下文菜单中选择“...的发件人”。同样，对于类，您可以查找引用（Analyze -> Class Refs）。这将告诉您如何使用特定的类和方法，并且通常可以让您更快地获得所需的信息。

另一个不可或缺的工具是**Spotter** (shift-enter)，它提供了一个易于使用的界面来浏览系统（用于类和示例）。但是您必须使用最新的 Pharo 版本。

# 生态系统概述

话虽如此，Pharo 生态系统非常庞大，您需要一些时间才能充分利用它（我已经与 Pharo 合作了很长时间，还有很多东西我需要学习）。

根据您的需求，Pharo 可以提供很多服务：

*   [Roassal](http://agilevisualization.com/)（用于软件和数据可视化）
*   [Glamourous Toolkit](http://gtoolkit.org/) (GT)（包括 Spotter、Debugger 和 Inspector）。GT 允许您自定义其所有工具。例如，您可以非常轻松地[自定义检查器，以便为您的对象提供特定于域的视图。](http://www.humane-assessment.com/blog/the-moldable-gtinspector-deconstructed/)许多内置库（例如[PetitParser](https://www.lukas-renggli.ch/blog/petitparser-1)）具有自定义接口，可让您更有效地处理对象。
*   用于编写 GUI 的 Morphic。还有[Spec](http://www.bahmanm.com/blogs/spec-part-1-basics)，一种建立在 morphic 之上的 DSL，它允许您描述用户界面。
*   Monticello 用于版本控制和构建可以部署到其他图像的包。
*   用于编写测试用例的[SUnit 。](http://pharo.gforge.inria.fr/PBE1/PBE1ch8.html)

Roassal 与 Morphic 非常不同，因为它是为在漂亮的布局中呈现各种图形而量身定制的（虽然在 Morphic 中也可以这样做，但您必须编写大量代码）。Roassal 也使用矢量图形，Morphic 是基于光栅的。如果您想编写 GUI 或游戏，我会坚持使用 morphic。如果您必须可视化数据，请使用 Roassal。

[Maloney](http://sdmeta.gforge.inria.fr/FreeBooks/CollectiveNBlueBook/morphic.final.pdf)（Morphic 的创始人）对 Morphic的核心概念做了很好的介绍。一些类名已经改变，但你会弄明白的。在 Morphic 中进行事件处理也有[不同的方法。](http://wiki.squeak.org/squeak/2477)一种方法是覆盖方法（就像您在其他面向对象的 GUI 框架中使用的一样），另一种方法是将事件“路由”到方法。我已经使用了这两种方法，对于更简单的应用程序，我会选择第一种。

# 从一个简单的项目开始

我的建议是从最基本的开始，最好从一个小项目开始，例如像 Snake 这样的游戏。在学习时添加内容，如果遇到困难，请随时在 stackoverflow 上提问。此外，还有 Pharo 邮件列表。我发现 Pharo / Smalltalk 社区非常热情。

我最后的建议是：保持简单。做到这一点并不总是那么容易，但 Smalltalk 是学习这一原则的绝佳环境。如果您正在寻找如何组织代码的方法，您还想查看[Kent Beck 的最佳实践模式。](http://ptgmedia.pearsoncmg.com/images/9780134769042/samplepages/013476904X.pdf)

玩得开心！

编辑：圣线复活！我刚刚意识到这个问题已经超过 4 年了。好吧，也许这篇文章对其他新人有所帮助。

# android - Closing one activity from another

> ID：14412297
> 
> 赞同：-1
> 
> 时间：2013-01-19T07:50:49.117
> 
> 标签：android, android-intent, android-activity

I am wondering if there's a `stopActivity()` function like the `stopService()` function.

My research indicates that there is no such function. However, I still need the ability to close one Activity from another.

**How can I accomplish this?**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T07:50:49.117

I had this problem a few days ago, and I'm happy to tell you I've found a way around this.

First of all, to the activity you want to stop add this in the `AndroidManifest.xml`:

```
android:launchMode="singleTop" 
```

I'm going to use a CheckBox example. When it's checked the activity is started and when unchecked will kill the activity.

Example Activity A is calling Activity B and then killing it using an intent.

Code to be put in A:

```
checkbox.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            Intent intent = new Intent(A.this, B.class);
            intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            intent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
            if (enable.isChecked()) {
                intent.putExtra("keep", true);
                startActivity(intent);
            }
            else
            {
                intent.putExtra("keep", false);
                startActivity(filterAct);
            }
        }
    }); 
```

Code to be put into B:

```
boolean keep;
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.B);
    intent = this.getIntent();
    boolean keep = brightnessIntent.getExtras().getBoolean("keep");
    if(keep==true)
    {
        //execute your code here

    }
 }
    @Override
protected void onNewIntent(Intent intent)
{
    super.onNewIntent(intent);
    keep = intent.getExtras().getBoolean("keep");
    if(keep==false)
    {
        B.this.finish();
            }
}
} 
```

Explanation : What this basically does is, when the checkbox is checked it calls the activity and passes a boolean value, if it's true the activity is kept alive and is brought to the foreground. Now, if you don't pass the flag `singleTop` then many instances of this activity will be created. `singleTop` makes sure only the same instance is called. Now, when the checkbox is unchecked a new value for keep is passed which is verified in B. If unchecked, the Activity A will be passing false, and hence B terminates itself from within the `onNewIntent()` function.

P.S - You can close Activity B from another Activity too. Just use If the other activity is C:

```
 Intent intent = new Intent(C.this, B.class);
            intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            intent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
                intent.putExtra("keep", false);
                startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T08:06:28.230

You can use the other answer to kill an Activity, but the reason that it is not straight forward is they really want you to follow the activity lifecycle.

[http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)

In your onPause() implementation, you are supposed to quiesce any long running processing associated with the Activity unless there is a good reason to keep it going.

Android keeps the Activity around unless it needs the memory since it is far faster to reuse an already instantiated Activity than it is to instantiate a new one. It's better to allow Android to manage the memory for you than to just kill activities yourself.

# apache-flex - 移动设备上的 Flex TextArea 和 TextInput 定位不正确

> ID：14412301
> 
> 赞同：3
> 
> 时间：2013-01-19T07:50:59.433
> 
> 标签：apache-flex, flex4, flex4.6, flex-spark

在我不知道如何解决的移动组件上使用 TextArea 和 TextInput 时，我遇到了两个问题。第一个是 TextArea 文本位置不正确，第二个是它与其他组件重叠。

当 TextArea 位于 Scroller 中（或软键盘激活并移动 TextArea 位置）时，会出现问题。

如果您将以下代码添加到移动应用程序，您可以看到这一点：

```
<s:Scroller width="100%" height="100%" top="100" bottom="100">
    <s:VGroup width="50%">
        <s:Button label="" height="600" width="440"/>
        <s:TextArea id="testing" />
        <s:TextArea id="testing2" />
        <s:Button label="" height="800" width="440"/>
    </s:VGroup>
</s:Scroller> 
```

第一个图像是带有一些文本的应用程序。

![在此处输入图像描述](../Images/3a876d95196eeed6abc55f761255597a.png)

在第二张图片中，我向下滚动了一些。当我向下滚动时，请注意文本仍保留在同一位置（它位于其上方按钮的顶部）！

![在此处输入图像描述](../Images/a7c0c3e9a81fc7b7cf83f29df2ed3fe5.png)

**CAVEAT**：
如果我抛出视图，那么文本会立即定位在正确的位置（在 AIR 模拟器上），并且在内容进入其最终位置时再次正确定位（在移动设备上，文本似乎会消失，直到它成为最终的静止位置）。这是一个好消息，因为在手动按下、拖动和释放（非投掷）或软键盘激活时不会发生投掷时发生的事情。

不幸的是，文本可能仍然出现在所有其他内容之上，而忽略了滚动条掩码，但如果另一个第一个问题得到解决，我可以忍受。

**更新**
如果我将宽度设置为宽度 + 1，我可以让文本重新定位在正确的位置。这不起作用，因为我不想明显地调整它的大小。我尝试使无效，但没有任何效果。这是我在 softKeyboardActivating 事件中尝试的代码。取消注释 width = width+1 以查看它“工作”：

```
 <s:TextArea id="testing" softKeyboardActivate="testing_softKeyboardActivateHandler(event)"/>

<fx:Script>
    <![CDATA[
        import mx.core.IInvalidating;
        protected function testing_softKeyboardActivateHandler(event:SoftKeyboardEvent):void {
            trace("Activating");
            /*testing.invalidateProperties();
            testing.invalidateDisplayList();
            testing.invalidateSize();
            testing.validateNow();
            parentGroup.validateNow();
            scroller.validateNow();*/
            // testing.invalidateParentSizeAndDisplayList();
            //IInvalidating(testing.parent).invalidateSize();
            //IInvalidating(testing.parent).invalidateDisplayList();
            //testing.width = NaN;
            //testing.width = testing.width+1;
        }
    ]]>
</fx:Script> 
```

**更新 2**：
此代码有效，但它是一个 hack，它比滚动视图在抛出视图时使用的代码慢得多：

```
protected function testing_softKeyboardActivateHandler(event:SoftKeyboardEvent):void {
    StageTextAreaSkin2(testing.skin).styleChanged("styleName");
} 
```

**更新 3**
我在下面的答案部分添加了一个解决方法，但它是一个 hack。此外，当它处于正确位置时，它也被正确屏蔽。所以这也很好。但是，我仍在寻找正确的方法来做到这一点。

这已经在 AIR Simulator、iPhone 5 和 Android Nexus 7 上的 Mac 上使用 Flex 4.6、AIR 3.5 进行了测试。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T22:20:59.957

这是 Flex 中的一个错误，与本机文本控件有关。如果您在顶级应用程序中包含以下内容，则可以解决问题：

```
<fx:Style>
        @namespace s "library://ns.adobe.com/flex/spark";
        @namespace mx "library://ns.adobe.com/flex/mx";
        @namespace local "*";
        s|TextInput {
            skinClass: ClassReference("spark.skins.mobile.TextInputSkin");
            showPromptWhenFocused:false;
        }
        s|TextArea {
            skinClass: ClassReference("spark.skins.mobile.TextAreaSkin");
        }
</fx:Style> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T02:09:46.817

这是一种解决方法。创建一个 MXML 文件（通常 StageTextArea.mxml 会这样做）并将此代码放入其中。

```
<?xml version="1.0" encoding="utf-8"?>
<s:TextArea xmlns:fx="http://ns.adobe.com/mxml/2009" 
            xmlns:s="library://ns.adobe.com/flex/spark"
            softKeyboardActivate="softKeyboardActivateHandler(event)"
            softKeyboardDeactivate="softKeyboardDeactivateHandler(event)"
            added="addedHandler(event)" 
            removed="removedHandler(event)">

    <!-- USAGE 
        <controls:StageTextArea id="myTextArea" parentScroller="{myScroller}"/>
    -->

    <fx:Script>
        <![CDATA[
            import mx.events.PropertyChangeEvent;

            import spark.components.Scroller;

            private var _parentScroller:Scroller;

            public function get parentScroller():Scroller {
                return _parentScroller;
            }

            /**
             * Adds a listener to an ancestor scroller. 
             * */
            [Bindable]
            public function set parentScroller(value:Scroller):void {

                if (value && value.viewport) {
                    value.viewport.addEventListener(PropertyChangeEvent.PROPERTY_CHANGE, handle, false, 0, true);
                }
                if (value==null && _parentScroller) {
                    value.viewport.removeEventListener(PropertyChangeEvent.PROPERTY_CHANGE, handle);
                }
                _parentScroller = value;
            }

            /**
             * Add listener to parent component when added to the display list
             * */
            protected function addedHandler(event:Event):void {
                if (event.target==event.currentTarget) { 
                    // we could "discover" the scroller here if we wanted
                    // or we could just use parentScroller property
                    owner.addEventListener(PropertyChangeEvent.PROPERTY_CHANGE, handle, false, 0, true);
                }
            }

            /**
             * Remove listener to parent component when removed to the display list
             * */
            protected function removedHandler(event:Event):void {
                if (event.target==event.currentTarget) {
                    owner.removeEventListener(PropertyChangeEvent.PROPERTY_CHANGE, handle);
                }
            }

            /**
             * Handle parent or ancestor scroll position changes
             */
            private function handle(e:PropertyChangeEvent):void {
                if (e.source == e.target && e.property == "verticalScrollPosition") {
                    //trace(e.property, "changed to", e.newValue);
                    updateTextFieldPosition();
                }
                if (e.source == e.target && e.property == "horizontalScrollPosition") {
                    //trace(e.property, "changed to", e.newValue);
                    updateTextFieldPosition();
                }
            }

            /**
             * Handles when keyboard activates
             * */
            protected function softKeyboardActivateHandler(event:SoftKeyboardEvent):void {
                updateTextFieldPosition();
            }

            /**
             * Handles when keyboard deactivates
             * */
            protected function softKeyboardDeactivateHandler(event:SoftKeyboardEvent):void {
                updateTextFieldPosition();
            }

            /**
             * Updates the native text fields position
             * */
            public function updateTextFieldPosition():void {
                skin.styleChanged("anything"); // force skin class to revalidate
            }

        ]]>
    </fx:Script>

</s:TextArea> 
```

# java - 如果带有迭代器标签的标签不起作用，则 Struts

> ID：14412302
> 
> 赞同：3
> 
> 时间：2013-01-19T07:50:59.303
> 
> 标签：java, jsp, struts2, jsp-tags, ognl

我正在尝试将 Struts`if`标记与迭代器一起使用，但它不起作用。

这是此的代码：

```
<s:iterator status="i" value="pages" >
   <s:set var="kk" value="<s:property />" />     

   <s:if test="%{(#kk<5)}">
      Hello
   </s:if><s:else>
      Hi
   </s:else>                        
</s:iterator> 
```

该`pages`列表是整数列表。

`Hello`如果`pages`value 小于 5，则上面的代码应该打印，但对于`pages`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T08:24:14.027

OGNL、jstl 等有很多选项，以至于检索值可能成为一场噩梦。试试这个，我认为在以下情况下`%{}`不是强制性的

```
<s:iterator id="page" value="pages">
   <s:if test="#page < 5">Hello</s:if> <!-- or <s:if test="%{#page < 5}"> -->
   <s:else>Hi</s:else>
</s:iterator> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T09:04:53.257

应该使用

```
<s:set name="kk"  value="0" /> 
```

代替

```
<s:set var="kk"  value="<s:property />" /> 
```

你不应该`<s:`在struts标签的属性中使用标签

```
<s:set name="kk" value="0"/>
<s:iterator status="i" value="bloglist" >
  <s:set name="kk"  value="%{#kk+1}" />
  <s:if test="%{(#kk<2)}">
    Hello<br>
  </s:if>
  <s:else>
  Hi<br>
</s:else>
</s:iterator> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T14:35:23.227

你甚至不需要使用`<s:set>`.

只需充分利用`Iterator`力量：

```
 <s:iterator var="itr" status="ctr" value="pages" >    
    <s:if test="%{itr[#ctr] < 5}">
       Hello
    </s:if><s:else>
       Hi
    </s:else>    
 </s:iterator> 
```

# windows - 保护进程不被其他进程访问

> ID：14412303
> 
> 赞同：0
> 
> 时间：2013-01-19T07:51:05.450
> 
> 标签：windows, debugging

在 Windows（XP 或更高版本，x86-64，如果这很重要）中，保护您的进程/程序不被其他进程访问的常用方法是什么，即使后者具有系统级特权？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T08:21:12.740

[Symantec.com 的这篇](http://www.symantec.com/connect/articles/windows-anti-debug-reference) 论文分类并介绍了在基于 Windows NT 的操作系统上使用的几种反调试技术。[这](http://www.codeproject.com/Articles/29469/Introduction-Into-Windows-Anti-Debugging)来自 codeproject.com

* * *

Windows Vista 操作系统引入了一种新型进程，称为[受保护进程](http://msdn.microsoft.com/en-us/library/windows/hardware/gg463417.aspx)。从历史上看，特权服务（作为管理员或本地系统运行）已经能够通过使用获得对进程或线程的所有访问权限，而不管其[DACL](http://msdn.microsoft.com/en-us/library/windows/desktop/aa446597%28v=vs.85%29.aspx)是什么`SeDebugPrivilege`. Starting with Windows Vista, the privileges: Process Access Rights: DELETE, READ_CONTROL, WRITE_DAC, WRITE_OWNER, PROCESS_ALL_ACCESS, PROCESS_CREATE_PROCESS, PROCESS_CREATE_THREAD, PROCESS_DUP_HANDLE, PROCESS_QUERY_INFORMATION, PROCESS_SET_QUOTA, PROCESS_SET_INFORMATION, PROCESS_VM_OPERATION, PROCESS_VM_READ, PROCESS_VM_WRITE Thread Access Rights: THREAD_ALL_ACCESS, THREAD_DIRECT_IMPERSONATION, THREAD_GET_CONTEXT, THREAD_IMPERSONATE , THREAD_QUERY_INFORMATION, THREAD_SET_CONTEXT, THREAD_SET_INFORMATION, THREAD_SET_THREAD_TOKEN, THREAD_TERMINATE 无法为受保护的进程或线程获取。搜索有关受保护进程的[更多信息。](https://www.google.com/search?hl=en&q=protected+process+site%3amicrosoft.com)

# asp.net - asp.net + 附加到 URL 的奇怪字符串

> ID：14412304
> 
> 赞同：1
> 
> 时间：2013-01-19T07:51:08.263
> 
> 标签：asp.net, url

我有这样奇怪的字符串：

```
http://localhost:10012/user.aspx#.UPpCfl54stU 
```

附加到我的 URL 的后面，并且只有当我在链接 A 页面以外的任何其他页面中单击链接 A 时才会发生，如果我在链接 A 页面上并单击链接 A（重新加载）它不会不会发生。任何人都知道这是什么以及如何摆脱它？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T14:43:18.543

该字符串 99% 来自您在网站上使用的 Facebook 插件。

Facebook 在末尾添加该字符串，从 javascript 中读取它并做他所做的事情，也许会保留统计数据，也许还有其他事情。

# php - Artisan 无法使用数据库配置文件中的 $_SERVER 变量

> ID：14412305
> 
> 赞同：1
> 
> 时间：2013-01-19T07:51:15.760
> 
> 标签：php, .htaccess, environment, laravel

我目前正在我的共享主机帐户上部署一个 Laravel 项目。它是一个开放项目，作为公共存储库托管在 GitHub 上。因此，我在生产环境的配置文件`.htaccess`中使用由文件设置的动态变量。`database.php`这使我还可以使用`git pull`主机上的命令更新我的部署，这有助于加快工作。

database.php 文件的内容类似于

```
$database = $_SERVER['DBNAME'];

$database_user = $_SERVER['DBUSER']; 
```

这很像部署到 PagodaBox 时所做的事情，并且对于应用程序来说工作得非常好，所有东西在浏览器中都按预期运行，没有任何抱怨。

我遇到的问题是工匠无法使用这些变量，而是尝试使用我认为在处理`migrate`指令时清空变量的方式连接到数据库。我收到一个错误，即工匠试图在没有密码的情况下连接到数据库。我一直在调用 artisan`--env=production`并对此进行了测试，但发现它只有在`database.php`文件具有明确指定的变量而不是环境变量时才有效。

有没有办法让工匠“看到”这些环境变量？

* * *

到目前为止证明对我有用的答案：

[http://forums.laravel.io/viewtopic.php?pid=8455](http://forums.laravel.io/viewtopic.php?pid=8455)

和

[Laravel 中的环境驱动数据库设置？](https://stackoverflow.com/questions/13860283/environment-driven-database-settings-in-laravel)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T08:49:42.617

因为 Artisan 是一个 CLI PHP 请求——请求永远不会命中`.htaccess`文件——因此你的变量永远不会被设置。

`<?php`作为一种解决方法 - 您可以在第 3 行定义 artisan 文件本身的变量（就在

```
$_SERVER['DBNAME'] = 'test';
$_SERVER['DBUSER'] = 'something'; 
```

编辑：我刚刚注意到你说这是在 github 上公共托管的 - 所以你不想在文件中包含你的用户名/密码？也许将工匠文件作为`.gitignore`组的一部分 - 所以你不推/拉那个单个文件？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-07T22:42:19.350

Laravel 内置了设置环境变量的功能，因此没有理由在`.htaccess`. Laravel 的内置方式与工匠一起工作没有任何麻烦。

请参阅有关您要保护的环境变量的文档的这一部分。

[http://laravel.com/docs/configuration#protecting-sensitive-configuration](http://laravel.com/docs/configuration#protecting-sensitive-configuration)

**报价：**

> ... 在项目的根目录中创建一个`.env.local.php`文件 [...] .env.local.php 应该返回一个键值对数组，很像典型的 Laravel 配置文件：
> 
> ```
> <?php
> return array(
>     'TEST_STRIPE_KEY' => 'super-secret-sauce',
> ); 
> ```
> 
> 此文件返回的所有键值对将自动通过 $_ENV 和 $_SERVER PHP“superglobals”可用。您现在可以从配置文件中引用这些全局变量：
> 
> ```
> 'key' => $_ENV['TEST_STRIPE_KEY'] 
> ```
> 
> 请务必将`.env.local.php`文件添加到您的`.gitignore`文件中。这将允许您团队中的其他开发人员创建他们自己的本地环境配置，并从源代码管理中隐藏您的敏感配置项。
> 
> 添加您的私有环境变量
> 
> ```
> <?php
> return array(
>     'MY_SECRET_KEY' => 'super-secret-sauce',
> ); 
> ```

# iphone - CLLocationManager 跟踪错误的位置（跟踪我）

> ID：14412307
> 
> 赞同：3
> 
> 时间：2013-01-19T07:51:18.787
> 
> 标签：iphone, ios, mkmapview, cllocationmanager, cllocation

我正在`Track me`我的代码中实现选项。`CLLocationManager`没有按预期工作。当我启动应用程序时，它保持在同一位置，`CLLocationManager`在 1 分钟内变化约 20-30 米。然后我保持不变。

如果我改变我的位置来跟踪同样的事情发生在开始 1 分钟`CLLocationManager`移动 20-30 分钟，然后以我的速度移动..

为什么会这样。。

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {  

  self.locationManager = [[CLLocationManager alloc] init];
self.locationManager.delegate = self;
self.locationManager.distanceFilter = 0.0001;
self.locationManager.desiredAccuracy = kCLLocationAccuracyBest;
 }

-(void)start {

[self.locationManager startUpdatingLocation];    
}

 - (void)locationManager:(CLLocationManager*)manager
didUpdateToLocation:(CLLocation*)newLocation 
       fromLocation:(CLLocation*)oldLocation {

[self processLocationChange:newLocation fromLocation:oldLocation];

 }

 -(void)processLocationChange:(CLLocation*)newLocation fromLocation:oldLocation {

if (newLocation != oldLocation) {

    NSLog(@"Moved from %@ to %@", oldLocation, newLocation);

    CLLocation* lastKnownLocation = NULL;
    if ([self.locationPoints count] > 0) {
        lastKnownLocation = [self.locationPoints objectAtIndex:[self.locationPoints count] - 1];
    }
    else {
        lastKnownLocation = newLocation;
        self.bottomLeft = newLocation.coordinate;
        self.topRight = newLocation.coordinate;
    }

    // Check for new boundaries
    CLLocationCoordinate2D coords = newLocation.coordinate;
    if (coords.latitude < bottomLeft.latitude || coords.longitude < bottomLeft.longitude) {
        self.bottomLeft = coords;
        NSLog(@"Changed bottom left corner");
    }
    if (coords.latitude > topRight.latitude || coords.longitude > topRight.longitude) {
        self.topRight = coords;
        NSLog(@"Changed top right corner");
    }

    double speed = fabs(newLocation.speed);
    double deltaDist = fabs([newLocation distanceFromLocation:lastKnownLocation]);
    double newAvgSpeed = (self.totalDistance + deltaDist) / ((double)[self getElapsedTimeInMilliseconds] / 1000.0);
    double accuracy = newLocation.horizontalAccuracy;
    double alt = newLocation.altitude;

    NSLog(@"Change in position: %f", deltaDist);
    NSLog(@"Accuracy: %f", accuracy);
    NSLog(@"Speed: %f", speed);
    NSLog(@"Avg speed: %f", newAvgSpeed);

        self.totalDistance += deltaDist;
        self.currentSpeed = speed;
        self.avgSpeed = newAvgSpeed;
        self.altitude = alt;

        NSLog(@"Delta distance = %f", deltaDist);
        NSLog(@"New distance = %f", self.totalDistance);

        // Add new location to path
        [self.locationPoints addObject:newLocation];

        // Update stats display
        [self.first.start1 updateRunDisplay];

        // Update map view
        [self updateMap:lastKnownLocation newLocation:newLocation];

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T08:22:53.900

我在当前的计步器应用程序中遇到了同样的问题。我伸展，撞了我的头几天。然后我发现`CLLocationManager`无法跟踪 <5 米的距离和位置生成更新。我保留`self.locationManager.distanceFilter =2.0;`了它，它给了我位置更新，即使设备是静止的。所以我只是将距离过滤器更改为 5.0 米，它开始工作得很好。尝试走 5 米，它应该可以工作，我进行了测试，我所有的错误通知问题都消失了：

```
 self.locationManager.distanceFilter =5.0; 
```

您正在采取`self.locationManager.distancefilter=0.0001`我认为`CLLocationManager`无法跟踪如此小的运动的能力。此外，您还需要过滤掉旧位置，即**[Apple 位置感知指南](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html#//apple_ref/doc/uid/TP40009497-CH2-SW9)**中提到的缓存位置更新。我在我的代码中使用了这个条件来过滤所有超过 5 秒的事件。

```
- (void)locationManager:(CLLocationManager *)manager
 didUpdateLocations:(NSArray *)locations
{
   CLLocation *currentLocation=[locations lastObject];
   NSDate* eventDate = currentLocation.timestamp;
   NSTimeInterval howRecent = [eventDate timeIntervalSinceNow];

   if(abs(howRecent)<5.0 && self.currentLocation.horizontalAccuracy<=10 && self.currentLocation.horizontalAccuracy>0)
   {
     //you have got fresh location event here.
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T08:16:10.517

我认为让距离过滤器有效

```
self.locationManager.distanceFilter = kCLDistanceFilterNone; 
```

您可以开始更新位置方法，但也可以尝试这种方法，这两种方法都是获取准确位置所必需的

```
[locationManager startMonitoringSignificantLocationChanges]; 
```

# javascript - 在jquery中重置下拉列表的简单方法

> ID：14412309
> 
> 赞同：0
> 
> 时间：2013-01-19T07:51:27.097
> 
> 标签：javascript, jquery, asp.net-mvc, drop-down-menu

我只想清除下拉列表中的 3 个元素。如何通过迭代来做，即基于索引的就可以了。

这是我的下拉列表的外观。

```
<div id = "Dropdown">
    <select id="dropdownlist" class="trace dropdown" name="dropdownlistitems">                  
        <option value="ID1" selected="selected">--Please Select--</option> 
        <option value="ID2">ID2text</option>
        <option value="ID3">ID3text</option>
    </select>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T09:39:12.280

你的意思是这样的吗？

```
$('#dropdownlist option').each(function (index, option) {
    if(index!=0)
    {
        $(this).remove();
    }
}); 
```

这将删除循环遍历的每个选项标签（当然，第一个除外）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T07:55:28.187

这个怎么样？

```
$('#dropdownlist option:lt(3)').remove(); 
```

这将选择前 3 个选项并将其删除。

# sql-server - 安装时的 SQL Server 配置

> ID：14412315
> 
> 赞同：-1
> 
> 时间：2013-01-19T07:52:19.400
> 
> 标签：sql-server, visual-studio, connection, tcp-ip

我的应用程序的引导程序下载并安装 SQL Server Express，到目前为止一切都很好。我的问题是：

1.  我想用这样的参数安装它，将 sa 密码设置为我给定的密码，而不是用户必须使用 SSMSE 并更改它。

2.  在状态中，设置是自动完成的，因为“连接到数据库引擎的权限是授予的”并且“登录”是启用的（默认情况下它是禁用的）

3.  SQL Server Browser 服务应该“正在运行”</p>

4.  用户不需要使用 SQL Server Surface Area Config。它应该自动设置为“仅使用 TCP / IP 的本地和远程连接”</p>

请告知如何实现这些目标。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T08:29:40.613

[MSDN 上的安装方法主题](http://msdn.microsoft.com/en-us/library/cc281837.aspx)是安装 SQL Server 的相当全面的参考。特别是，以下子页面包含大量有关在自定义配置中部署 SQL Server 的信息：

*   [从命令提示符安装 SQL Server 2012](http://msdn.microsoft.com/en-us/library/ms144259.aspx)
*   [使用配置文件安装 SQL Server 2012](http://msdn.microsoft.com/en-us/library/dd239405.aspx)
*   [使用 SysPrep 安装 SQL Server 2012](http://msdn.microsoft.com/en-us/library/ee210664.aspx)

如果这些步骤之一未提供所需的自定义，则应确定哪一个最符合您的要求，并将 SQL Server 实例和支持服务的其余配置视为单独的问题。

也就是说，您可能需要分两步部署SQL Server（例如使用配置文件，然后运行一些shell 命令来完成配置）。

# c++ - C++ 代码片段的汇编代码

> ID：14412323
> 
> 赞同：-5
> 
> 时间：2013-01-19T07:54:17.207
> 
> 标签：c++, disassembly

C/C++ 代码的编译结果是汇编代码。下一行将在什么汇编代码中编译：

```
a[0] = 1 
```

其中 `a`是某些 C++ 程序中的整数数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T07:58:17.250

如果您将 GCC 用于编译器，则可以使用`--save-temps`which 防止中间文件（包括程序集输出）在完成后被删除。

见[http://gcc.gnu.org/onlinedocs/gcc/Debugging-Options.html](http://gcc.gnu.org/onlinedocs/gcc/Debugging-Options.html)

# ruby - 我的 IRB 没有产生输出，点击 ENTER 后被空白

> ID：14412334
> 
> 赞同：0
> 
> 时间：2013-01-19T07:56:31.087
> 
> 标签：ruby, irb

当我尝试在线上进行一些操作`m = %r(.)(.)(\d+)(\d)/.match("THX1138.")`（取自[文档](http://www.ruby-doc.org/core-1.9.3/MatchData.html#method-i-5B-5D)）时，屏幕上没有任何内容，如下所示：

![屏幕](../Images/35391011e3212f9abee76cd8ac68c77a.png)

`>`从`IRB`出去`\`到来，光标开始闪烁，如上图所示。

我做错了什么你能指导我吗？

谢谢

* * *

***根据@valodzka 的建议，我尝试了以下方法并`>`从`/`. 呸呸呸：）***

```
irb(main):006:0> m = %r(.)(.)(\d+)(\d)/.match("THX1138.")
irb(main):007:1/ /)
SyntaxError: (irb):6: syntax error, unexpected '(', expecting $end
m = %r(.)(.)(\d+)(\d)/.match("THX1138.")
          ^
        from C:/Ruby193/bin/irb:12:in `<main>'
irb(main):008:0> 
```

非常感谢***@valodzka*** :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T08:02:10.227

正则表达式语法错误，应该是：

```
m = /(.)(.)(\d+)(\d)/.match("THX1138.") 
```

或者

```
m = %r/(.)(.)(\d+)(\d)/.match("THX1138.") 
```

文档绝对不正确。Ruby 正则表达式语法是`/regexp/`or `%r'open-symbol'regexp'close-symbol'`，例如`/test/`or `%r{test}`or `%r|test|`。通常`//`使用，但在某些情况下，当正则表达式包含“/”符号`%r`形式时会很有用。

# javascript - Node.js：在 if 语句中执行休息调用

> ID：14412335
> 
> 赞同：1
> 
> 时间：2013-01-19T07:56:42.863
> 
> 标签：javascript, node.js, heroku, express

我正在使用带有 express 的 Node JS，如果用户使用 facebook 成功登录，我想通过 REST 调用在我的数据库中创建一个新用户。此代码只是对 heroku node.js facebook 应用程序的轻微修改：[https ://github.com/heroku/facebook-template-nodejs/blob/master/web.js](https://github.com/heroku/facebook-template-nodejs/blob/master/web.js)

这是我尝试过的

```
 //create Parse Object
    var parse_app_id = process.env.PARSE_APP_ID;
    var parse_master_key = process.env.PARSE_MASTER_KEY;
    var nodeParse = new Parse(parse_app_id, parse_master_key);

function handle_facebook_request(req, res) {

  // if the user is logged in
  if (req.facebook.token) {

    async.parallel([

       function(cb) {
        // query 4 friends and send them to the socket for this socket id
        req.facebook.get('/me/friends', { limit: 4 }, function(friends) {
          req.friends = friends;
          cb();
        });
      },
      function(cb) {
        // query 16 photos and send them to the socket for this socket id
        req.facebook.get('/me/photos', { limit: 16 }, function(photos) {
          req.photos = photos;
          cb();
        });
      }

    ], function() {
      render_page(req, res);
      nodeParse.signUp('',{ username: 'tajmahal', password: 'stuff'}, function(err, response) {
            console.log(response);
      });
    });

  } 
}

app.get('/', handle_facebook_request);
app.post('/', handle_facebook_request); 
```

`handle_facebook_request`在请求应用程序时执行...除了用户创建之外，一切正常。

`signUp`在条件之外创建用户（因此该功能有效）

我怎样才能解决这个问题？

# sql - sp_MSforeachdb 问题

> ID：14412336
> 
> 赞同：3
> 
> 时间：2013-01-19T07:56:50.590
> 
> 标签：sql, sql-server, stored-procedures

我正在尝试为开发人员工作环境中的存储过程分配 VIEW DEFINITION 访问权限，并将下面的查询作为 Result to Text 运行，然后复制输出并作为 Result 运行到 Grid：

```
select 'GRANT VIEW DEFINITION ON ' + quotename(specific_schema) 
+ '.' + quotename(specific_name)
+ ' TO ' + 'TestAcct'
  from INFORMATION_SCHEMA.routines
where routine_type = 'PROCEDURE' 
```

我遇到的问题是我必须对多台服务器上的每个数据库执行此操作。我尝试使用“sp_MSforeachdb”运行它，但是当我设置查询时，它不喜欢我的选择语句。关于如何为所有数据库格式化上述查询的任何想法，以便我可以复制输出并针对服务器而不是每个单独的数据库运行它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T09:14:29.753

```
EXEC sp_MSforeachdb 
'SELECT ''GRANT VIEW DEFINITION ON '' + quotename(''?'') + ''.'' + quotename(specific_schema) 
+ ''.'' + quotename(specific_name)
+ '' TO '' + ''TestAcct'' AS ''?''
FROM ?.INFORMATION_SCHEMA.routines
WHERE routine_type = ''PROCEDURE''' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T14:47:28.453

如果您只是想让您的测试帐户查看任何内容的定义，为什么不：

```
grant view definition to [TestAccount] 
```

这样，当您在数据库中创建新对象时，它会保持最新状态。在我看来，更简单的解决方案效果更好。

# php - xlsb 文件下载不可读的内容错误与 ms excel 2007

> ID：14412338
> 
> 赞同：2
> 
> 时间：2013-01-19T07:56:59.717
> 
> 标签：php, excel, download, excel-2007, vba

我有一个 xlsb。(ms excel 2007) 文件创建。

我已将其上传到服务器，网站用户可以下载它，但是当用户下载并打开此文件时，ms excel 在单击“是”时提示错误为“Excel 发现不可读的内容”，一切正常。我不知道为什么会显示此错误。

然后我从 gmail 和 yahoomail 发送了这个 xlsb 文件，下载并打开时一切正常，没有任何错误消息。

所以请帮我纠正这个错误。我使用 php 作为我的服务器端语言，下载代码如下

```
header('Content-type: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet');
    //header('Content-type: application/octet-stream');
    //header('Content-type: application/vnd.ms-excel.sheet.binary.macroEnabled.12');

    header('Content-Disposition: attachment; filename="credit-card-payoff.xlsb"');

    readfile('exporting/excel/credit-card-payoff.xlsb'); 
```

我尝试了不同的内容类型，但没有成功。

以下是用户可以下载excel的网页

[http://utc.impexdirectory.com/credit-card-payoff-calculator.php](http://utc.impexdirectory.com/credit-card-payoff-calculator.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T12:26:34.780

我已经检查了您提供的文件，并且可以明确地告诉您错误是什么：当前网站也以某种方式附加到此二进制文件中。（如果我切断 HTML 部分，文件将打开而没有修复对话框）。

所以我最好的猜测是，你忘记了`exit`readfile 之后的语句。

您的代码应如下所示：

```
header('Content-type: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet');
header('Content-Disposition: attachment; filename="credit-card-payoff.xlsb"');

readfile('exporting/excel/credit-card-payoff.xlsb');
exit(0); // Terminate the program execution at this point 
```

这可以防止网站被附加到下载文件中。

# ruby-on-rails - 多线程是否有助于提高在 Ruby on Rails 应用程序中创建文本文件的性能？

> ID：14412340
> 
> 赞同：1
> 
> 时间：2013-01-19T07:57:50.863
> 
> 标签：ruby-on-rails, ruby, multithreading

我想生成一个输出文本文件，输入来自数据库。数据库很大，在创建输出文本文件的每个部分时需要检查很多条件。所以，它有点耗时的过程。

多线程是否有助于提高 rails 应用程序的性能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T09:02:11.240

多线程*可能*有助于提高 rails 应用程序的性能，但这在一定程度上取决于您运行的 Ruby 版本。使用 MRI Ruby，您只会在执行大量 I/O 操作（从数据库读取、将某些内容写入磁盘……）时获得改进。由于全局解释器锁，条件检查不会并行运行。

但是，当您使用 Rubinius 2 或 JRuby 时，您将获得没有全局解释器锁的 ruby​​ 解释器，因此能够使用线程并行执行条件检查。

最后，它还将取决于您的实现和要求（是否甚至可以并行进行所有检查或是否存在依赖关系等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T22:19:11.163

我会回应说多线程*可能会*有所帮助。最简单的判断方法是在程序运行时运行“top”。如果一个 cpu 核心固定为 100% 而另一个处于空闲状态，您可能会受益于多线程或多进程。这是一个明显的例子——如果不是很清楚，你必须进一步挖掘并找出瓶颈。

# windows-phone-7 - 如何在 windows phone 7 中启用 ApplicationIdleDetectionMode？

> ID：14412344
> 
> 赞同：0
> 
> 时间：2013-01-19T07:58:17.407
> 
> 标签：windows-phone-7, windows-phone-7.1, windows-phone-8

我能够将 ApplicationIdleDetectionMode 设置为禁用。即使屏幕被锁定，它也会运行。

现在我想重新启用它。为此，我为用户提供了一个拨动开关。但是当我启用它时，它会引发异常。我可以在 catch 块中处理异常。当我重新启动应用程序时，它会再次启用。

我们是否需要告诉最终用户在将其关闭时重新启动应用程序（即启用 applicationidledetectionmode）。对此有任何解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T17:52:54.853

启用后，您将无法禁用应用程序空闲检测，如[MSDN 文档的异常部分](http://msdn.microsoft.com/en-US/library/windowsphone/develop/microsoft.phone.shell.phoneapplicationservice.applicationidledetectionmode%28v=vs.105%29.aspx)所示。您需要通知用户他们需要重新启动应用程序。

# android - Android布局编辑器不显示任何东西？

> ID：14412348
> 
> 赞同：0
> 
> 时间：2013-01-19T07:59:05.627
> 
> 标签：android, layout, graphical-layout-editor

我从互联网上下载了这个布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout android:layout_width="fill_parent" android:layout_height="wrap_content"
  xmlns:android="http://schemas.android.com/apk/res/android">
    <TextView android:id="@id/left" android:background="@color/lightbackground" android:layout_width="10.0dip" android:layout_height="fill_parent" android:layout_alignTop="@id/header" android:layout_alignBottom="@id/bottom" android:layout_alignParentLeft="true" />
    <TextView android:id="@id/right" android:background="@color/lightbackground" android:layout_width="10.0dip" android:layout_height="fill_parent" android:layout_alignTop="@id/header" android:layout_alignBottom="@id/bottom" android:layout_alignParentRight="true" />
    <LinearLayout android:gravity="center_vertical" android:id="@id/header" android:background="@color/gray_review_header" android:layout_width="fill_parent" android:layout_height="wrap_content" android:layout_toLeftOf="@id/right" android:layout_toRightOf="@id/left">
        <TextView android:textStyle="bold" android:textColor="#ff111111" android:ellipsize="marquee" android:gravity="center_vertical" android:id="@id/name" android:paddingLeft="5.0dip" android:paddingRight="5.0dip" android:fadingEdge="horizontal" android:layout_width="wrap_content" android:layout_height="wrap_content" android:singleLine="true" />
        <TextView android:textSize="12.0dip" android:textStyle="bold" android:textColor="#ff666666" android:gravity="center_vertical" android:id="@id/date" android:paddingRight="5.0dip" android:layout_width="fill_parent" android:layout_height="wrap_content" android:singleLine="true" android:layout_weight="1.0" />
        <TextView android:textSize="14.0dip" android:textStyle="bold" android:textColor="@color/black" android:id="@id/likes" android:paddingRight="5.0dip" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="" android:singleLine="true" />
        <RatingBar android:id="@id/rate" android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_marginRight="5.0dip" android:max="5" android:progressDrawable="@drawable/ratebar_theme" android:numStars="5" android:stepSize="0.1" android:isIndicator="true" style="?android:attr/ratingBarStyleSmall" />
    </LinearLayout>
    <TextView android:textColor="#ff111111" android:id="@id/body" android:paddingLeft="5.0dip" android:paddingTop="2.0dip" android:paddingRight="5.0dip" android:paddingBottom="5.0dip" android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_toLeftOf="@id/right" android:layout_toRightOf="@id/left" android:layout_below="@id/header" />
    <TextView android:id="@id/bottom" android:background="@color/lightbackground" android:layout_width="fill_parent" android:layout_height="10.0dip" android:layout_below="@id/body" android:layout_alignParentLeft="true" android:layout_alignParentRight="true" android:layout_alignParentBottom="true" />
</RelativeLayout> 
```

我将该布局添加到我的项目布局文件夹中。上面的代码没有错误，但是当我打开它时`layout editor`，选项卡中没有任何东西。`Graphical layout`你知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T08:12:44.267

试试这种方式 id 应该是 android:id="@+id/text"

```
 <?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout android:layout_width="fill_parent" android:layout_height="wrap_content"
      xmlns:android="http://schemas.android.com/apk/res/android">
        <TextView android:id="@+id/left" 
            android:background="@color/navy"
             android:layout_width="10.0dip" 
             android:layout_height="fill_parent" 
             android:layout_alignTop="@+id/header" 
             android:layout_alignBottom="@id/bottom" 
             android:layout_alignParentLeft="true" />
        <TextView android:id="@id/right" 
            android:background="@color/lime"
             android:layout_width="10.0dip" 
             android:layout_height="fill_parent"
              android:layout_alignTop="@id/header" 
              android:layout_alignBottom="@id/bottom" 
              android:layout_alignParentRight="true" />
        <LinearLayout android:gravity="center_vertical" 
            android:id="@+id/header" 
            android:background="@color/gray" 
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content" 
            android:layout_toLeftOf="@id/right" 
            android:layout_toRightOf="@id/left">
            <TextView android:textStyle="bold" 
                android:textColor="#ff111111" 
                android:ellipsize="marquee" 
                android:gravity="center_vertical" 
                android:id="@+id/name" 
                android:paddingLeft="5.0dip" 
                android:paddingRight="5.0dip" 
                android:fadingEdge="horizontal" 
                android:layout_width="wrap_content" 
                android:layout_height="wrap_content"
                 android:singleLine="true" />

            <TextView android:textSize="12.0dip" 
              android:textStyle="bold" 
                android:textColor="#ff666666" 
                android:gravity="center_vertical" 
                android:id="@+id/date" 
                android:paddingRight="5.0dip" 
                android:layout_width="fill_parent"
                 android:layout_height="wrap_content" 
                 android:singleLine="true" 
                 android:layout_weight="1.0" />
            <TextView android:textSize="14.0dip" 
                android:textStyle="bold"
                 android:textColor="@color/black" 
                 android:id="@+id/likes" android:paddingRight="5.0dip"
                  android:layout_width="wrap_content"
                   android:layout_height="wrap_content" 
                   android:text=""
                    android:singleLine="true" />
            <RatingBar android:id="@+id/rate" 
                android:layout_width="wrap_content" 
                android:layout_height="wrap_content" 
                android:layout_marginRight="5.0dip" 
                android:max="5" 

                android:numStars="5"
                 android:stepSize="0.1" 
                android:isIndicator="true" 
                style="?android:attr/ratingBarStyleSmall" />
        </LinearLayout>
        <TextView android:textColor="#ff111111"
             android:id="@+id/body" 
             android:paddingLeft="5.0dip" 
             android:paddingTop="2.0dip" 
             android:paddingRight="5.0dip" 
             android:paddingBottom="5.0dip"
              android:layout_width="wrap_content" 
              android:layout_height="wrap_content" 
              android:layout_toLeftOf="@id/right" 
              android:layout_toRightOf="@id/left" 
              android:layout_below="@id/header" />
        <TextView android:id="@+id/bottom"
             android:background="@color/teal"
              android:layout_width="fill_parent" 
              android:layout_height="10.0dip" 
              android:layout_below="@+id/body" 
              android:layout_alignParentLeft="true" 
              android:layout_alignParentRight="true" 
              android:layout_alignParentBottom="true" />
    </RelativeLayout> 
```

和@color 值/颜色

颜色.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
 <color name="white">#FFFFFF</color>
 <color name="yellow">#FFFF00</color>
 <color name="fuchsia">#FF00FF</color>
 <color name="red">#FF0000</color>
 <color name="silver">#C0C0C0</color>
 <color name="gray">#808080</color>
 <color name="olive">#808000</color>
 <color name="purple">#800080</color>
 <color name="maroon">#800000</color>
 <color name="aqua">#00FFFF</color>
 <color name="lime">#00FF00</color>
 <color name="teal">#008080</color>
 <color name="green">#008000</color>
 <color name="blue">#0000FF</color>
 <color name="navy">#000080</color>
 <color name="black">#000000</color>
</resources> 
```

并打开

![在此处输入图像描述](../Images/857e3560eb17860c268d7c3e3e15e361.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T08:04:05.033

右键单击您的`layout.xml`文件，然后单击`Openwith`并选择`Android Common Xml Editor`

试试这样

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T08:07:50.663

因为有很多错误。

*   组件的 id 定义为，

    `android:id="@+id/left"`

但你有`defined`它，

`android:id="@id/left"`

*   它也给出了错误`android:background="@color/lightbackground"`，因为你没有为`color`.

而不是它，你应该使用。

```
android:background="@android:color/background_light" 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-19T08:29:56.543

而不是使用`@id/`use `@+id/`。试试我下面的代码，你的布局将在图形视图中对你可见。

> ```
>  <?xml version="1.0" encoding="utf-8"?>
>  <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
> android:layout_width="fill_parent"
> android:layout_height="wrap_content" >
> <TextView
>     android:id="@+id/left"
>     android:layout_width="10.0dip"
>     android:layout_height="fill_parent"
>     android:layout_alignBottom="@+id/bottom"
>     android:layout_alignParentLeft="true"
>     android:layout_alignTop="@+id/header"
>     android:background="@+color/lightbackground" />
> <TextView
>     android:id="@+id/right"
>     android:layout_width="10.0dip"
>     android:layout_height="fill_parent"
>     android:layout_alignBottom="@+id/bottom"
>     android:layout_alignParentRight="true"
>     android:layout_alignTop="@+id/header"
>     android:background="@+color/lightbackground" />
> <LinearLayout
>     android:id="@+id/header"
>     android:layout_width="fill_parent"
>     android:layout_height="wrap_content"
>     android:layout_toLeftOf="@+id/right"
>     android:layout_toRightOf="@+id/left"
>     android:background="@+color/gray_review_header"
>     android:gravity="center_vertical" >
>     <TextView
>         android:id="@+id/name"
>         android:layout_width="wrap_content"
>         android:layout_height="wrap_content"
>         android:ellipsize="marquee"
>         android:fadingEdge="horizontal"
>         android:gravity="center_vertical"
>         android:paddingLeft="5.0dip"
>         android:paddingRight="5.0dip"
>         android:singleLine="true"
>         android:textColor="#ff111111"
>         android:textStyle="bold" />
>     <TextView
>         android:id="@+id/date"
>         android:layout_width="fill_parent"
>         android:layout_height="wrap_content"
>         android:layout_weight="1.0"
>         android:gravity="center_vertical"
>         android:paddingRight="5.0dip"
>         android:singleLine="true"
>         android:textColor="#ff666666"
>         android:textSize="12.0dip"
>         android:textStyle="bold" />
>     <TextView
>         android:id="@+id/likes"
>         android:layout_width="wrap_content"
>         android:layout_height="wrap_content"
>         android:paddingRight="5.0dip"
>         android:singleLine="true"
>         android:text=""
>         android:textColor="@+color/black"
>         android:textSize="14.0dip"
>         android:textStyle="bold" />
>     <RatingBar
>         android:id="@+id/rate"
>         style="?android:attr/ratingBarStyleSmall"
>         android:layout_width="wrap_content"
>         android:layout_height="wrap_content"
>         android:layout_marginRight="5.0dip"
>         android:isIndicator="true"
>         android:max="5"
>         android:numStars="5"
>         android:progressDrawable="@+drawable/ratebar_theme"
>         android:stepSize="0.1" />
> </LinearLayout>
> <TextView
>     android:id="@+id/body"
>     android:layout_width="wrap_content"
>     android:layout_height="wrap_content"
>     android:layout_below="@+id/header"
>     android:layout_toLeftOf="@+id/right"
>     android:layout_toRightOf="@+id/left"
>     android:paddingBottom="5.0dip"
>     android:paddingLeft="5.0dip"
>     android:paddingRight="5.0dip"
>     android:paddingTop="2.0dip"
>     android:textColor="#ff111111" />
> <TextView
>     android:id="@+id/bottom"
>     android:layout_width="fill_parent"
>     android:layout_height="10.0dip"
>     android:layout_alignParentBottom="true"
>     android:layout_alignParentLeft="true"
>     android:layout_alignParentRight="true"
>     android:layout_below="@+id/body"
>     android:background="@+color/lightbackground" /> 
> ```

对于您`@+color/`，您需要在`colors.xml`文件中定义颜色，如下所示：

> ```
>  <?xml version="1.0" encoding="utf-8"?>
>     <resources>
>        <color name="white">#FFFFFF</color>
>        <color name="yellow">#FFFF00</color>
>        <color name="fuchsia">#FF00FF</color>
>        <color name="red">#FF0000</color>
>        <color name="silver">#C0C0C0</color>
>        <color name="gray">#808080</color>
>        <color name="olive">#808000</color>
>        <color name="purple">#800080</color>
>        <color name="maroon">#800000</color>
>        <color name="aqua">#00FFFF</color>
>        <color name="lime">#00FF00</color>
>        <color name="teal">#008080</color>
>        <color name="green">#008000</color>
>        <color name="blue">#0000FF</color>
>        <color name="navy">#000080</color>
>        <color name="black">#000000</color>
>  </resources> 
> ```

# jquery - 如何在jQuery中停止两次点击事件？

> ID：14412349
> 
> 赞同：0
> 
> 时间：2013-01-19T07:59:09.747
> 
> 标签：jquery

我正在研究 ajax 脚本，用户可以点击 add_to_cart 按钮在购物车上添加商品。但不幸的是，它增加了单击两次。

```
//here is my code
$(".add_to.cart").click(function(e){
  $(this).shoppingCart("add_item");
}); 
```

此脚本单击发送两个 ajax 请求..

如何阻止它？提前感谢您的帮助。

```
//here is my markup
<tr id='p_<?php echo $products['p_id']; ?>'>
   <td class='p-img'><img src='products.php?img=2323' /></td>
   <td class='p-name'><?php echo $products['p_name']; ?></td>
   <td class='p-price'><?php echo $products['p_price]; ?></td>
   <td><a href='javascript:void(0);' class='btn_primary add_to_cart'> Add To Cart</a></td>
</tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T08:05:27.340

`.data()`您可以通过检查是否已被单击来设置标志。

```
$('.add_to.cart').click(function(e){
    var el = $(this);

    if(el.data('hasAddedItem') === true)
        return;

    el.data('hasAddedItem', true).shoppingCart('add_item');
}); 
```

`hasAddedItem`唯一的潜在问题是，除非您将元素的数据设置回 false ，否则您将无法重新单击它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T15:57:33.043

尝试改变

```
$(".add_to.cart").click(function(e){ 
```

至

```
$(".add_to_cart").click(function(e){ 
```

因为那是您在按钮上的课程：

```
class='btn_primary add_to_cart' 
```

# php - select with count in sub select 由于 group by 子句而给出了不需要的结果

> ID：14412352
> 
> 赞同：1
> 
> 时间：2013-01-19T07:59:40.520
> 
> 标签：php, mysql

```
SELECT t.id_type, brand, model, countMod FROM types t  
    LEFT JOIN (
       SELECT p.id_type, brand, model, COUNT( model ) AS countMod 
           FROM products p  
           GROUP BY brand) p2 
    ON t.id_type = p2.id_type 
    WHERE t.id_type = "TCE" 
    ORDER BY brand 
```

此查询工作正常，但我丢失了分组的模型，当然，在每个品牌下。
有没有办法列出和计算模型？
即brand1，model1，model2，model3，countMod=3——brand2，model1，model2，countMod=2。
任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T08:06:45.360

```
SELECT brand, GROUP_CONCAT(model) models, COUNT(model) AS countMod
FROM products
GROUP BY brand 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T08:03:07.867

试试这个：：

```
SELECT 
t.id_type, 
brand,
GROUP_CONCAT(model SEPARATOR ',') as model, 
COUNT( model ) AS countMod 
FROM types t
LEFT JOIN products p  ON t.id_type = p.id_type
WHERE t.id_type = "TCE" 
GROUP BY brand
ORDER BY brand 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-19T08:02:34.720

推荐的方法是运行两个查询，一个用于数据，一个用于`COUNT()`.

使用 MySQL，您也可以使用`SQL_CALC_FOUND_ROWS`（主要是如果您有一个`LIMIT`子句），但是它的性能是有争议的，请参阅[哪个最快？SELECT SQL_CALC_FOUND_ROWS FROM `table`，或 SELECT COUNT(*)](https://stackoverflow.com/questions/186588/which-is-fastest-select-sql-calc-found-rows-from-table-or-select-count)。

# javascript - 在删除多个选项时选择选项 remove() 方法

> ID：14412354
> 
> 赞同：3
> 
> 时间：2013-01-19T08:00:14.483
> 
> 标签：javascript

我有一个包含 17 个值/选项的选择框。

```
<select id="_class" name="_class">
    <option value="0"></option>
    <option value="1">PREKG</option>
    <option value="2">LKG</option>
    <option value="3">UKG</option>
    <option value="4">I</option>
    <option value="5">II</option>
    <option value="6">III</option>
    <option value="7">IV</option>
    <option value="8">V</option>
    <option value="9">VI</option>
    <option value="10">VII</option>
    <option value="11">VIII</option>
    <option value="12">IX</option>
    <option value="13">X</option>
    <option value="14">XI</option>
    <option value="15">XII</option>
    <option value="16">XIII</option>                              
</select> 
```

现在，我尝试将选项从 5 删除到 8。为此，我使用以下 JavaScript 代码。

```
<script type="text/javascript">
 var _class = document.getElementById("_class");
 for(var i=1; i < _class.length;i++) {
   if(i>=5 && i<=8) {
     _class.remove(i);
   }
 }
</script> 
```

但是，我没有得到预期的结果，因为每次 for 循环运行时，选项的顺序都会改变。

我怎样才能得到想要的结果？

[在这里](http://jsfiddle.net/Gy8j8/)，我附上了小提琴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T08:08:58.910

通过逐步迭代选项，删除选项后的选项索引将在删除选项后立即减一（即：删除索引 5 处的选项导致选项 6 及以上选项现在被索引为选项5 及以上）。

为了满足这一点，将循环的顺序反转为向下计数：

```
var _class = document.getElementById("_class");

for(var i=Math.min(_class.options.length, 8); i >= 5; i--) {
  _class.remove(i);
} 
```

[http://jsfiddle.net/Gy8j8/2/](http://jsfiddle.net/Gy8j8/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T08:12:34.903

一个更简单的例子：从 6 个列表中删除第 2 到 4 个：在这个列表中，数字代表数组中的 INDEX：

*   1) 一个
*   2) 两个
*   3) 三
*   4）四个
*   5) 五
*   6) 六个

现在，如果我删除数字 2，其余项目将获得一个新索引：

*   1) 一个
*   2) 三
*   3）四个
*   4) 五
*   5) 六个

如果我接下来删除数字 3，我实际上会点击：

*   1) 一个
*   2) 三
*   3) 五
*   4) 六个

有一个非常简单的技巧可以避免这种情况：以相反的顺序删除：在这个例子中（删除 2 到 4）我们首先删除 4：

*   1) 一个
*   2) 两个
*   3) 三
*   4）四个
*   5) 五
*   6) 六个

删除四个后，只有高于四个的索引发生了变化，它们对我们来说无关紧要：

*   1) 一个
*   2) 两个
*   3) 三
*   4) 五
*   5) 六个

现在我们可以删除三个：

*   1) 一个
*   2) 两个
*   3) 五
*   4) 六个

在编程术语中，这意味着翻转 for 循环：

```
 for(var i=8; i >= 5;i--) {
    _class.remove(i);
 } 
```

见[http://jsfiddle.net/bjelline/XQH54/](http://jsfiddle.net/bjelline/XQH54/)

ps 如您所见，我还将循环更改为仅触及我们真正需要的索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-18T21:39:27.143

也许有点晚了，但我遇到了同样的问题。这是我的解决方案。感谢@steveukx，您的解释帮助了我！

```
function remove(el) {
    for(var i=el.length-1;i>=0;i--) {
        if(el[i].selected)
            el.remove(i);
    }
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-16T07:18:46.743

嗨，我遇到了同样的问题。我正在粘贴我的解决方案。在 fubbe 回答中，如果用户尝试先发送更高的索引然后再发送更低的索引，那么这些是一些问题..因此我正在处理传递的参数以确保索引（通过参数接收）首先按升序排序，然后我们的循环将在逆序删除索引。

```
HTMLSelectElement.prototype.removeIndexes = removeIndexes;
function removeIndexes(){
  var res = Array.prototype.slice.call(arguments).sort(function(a, b){return     a-b})
  alert(res)
  for (var i=res.length-1;i>=0;i--){
     (function(self,indx){
      self.remove(indx);  
     })(this,res[i])
  }
}
var x = document.getElementById("mySelect");
x.removeIndexes(2,3)

 //------- Another way----------------
 HTMLSelectElement.prototype.removeIndexes = removeIndexes;
 function removeIndexes(){
   var self = this;
   var res = Array.prototype.slice.call(arguments).sort(function(a, b)     {return b-a}).map(function(indx){
   alert(indx)
   self.remove(indx);
 })

 }
 var x = document.getElementById("mySelect");
 x.removeIndexes(2,0,1) 
```

希望这可以帮助

亲切的问候 Gaurav Khurana

# ruby-on-rails - 在按日期分组之前修改查询中的 created_at

> ID：14412360
> 
> 赞同：0
> 
> 时间：2013-01-19T08:02:02.380
> 
> 标签：ruby-on-rails, rails-activerecord

我有这个查询，我用它来获取特定用户的购买，然后将其映射到哈希，以便可以在图表中显示。

```
orders_graph = user.orders.where(:purchased_period => current_period).
                group("date(created_at)").
                select("purchased_at, sum(total_price) as total_price")
(start_time.to_date..Date.today).map do |date|
  order = orders_by_day.detect { |order| order.created_at.in_time_zone("#{user.time_zone}").to_date == date }
  order && order.total_price.to_f || 0 
```

但是，由于基于服务器时间而不是用户时间（这是我想要的）的查询分组，该图通常是不正确的。无论如何在分组之前（或在）修改 created_at 时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T11:13:43.267

你为什么不创建一个新的日期时间字段'created_at_in_user_time'呢？然后您可以在“before_create”回调中将正确的时间填入该字段。

# android - 形状背景渐变中的淡入淡出动画

> ID：14412361
> 
> 赞同：8
> 
> 时间：2013-01-19T08:02:06.817
> 
> 标签：android, animation, gradient

我找不到任何符合我要求的帖子...我有一个矩形：

```
<shape xmlns:android="http://schemas.android.com/apk/res/android">
<stroke android:width="2dp" android:color="#FFFFFF" />
<padding android:left="4dp"
    android:top="4dp"
    android:right="4dp"
    android:bottom="4dp" />
<corners android:radius="6dp" />
<gradient
        android:angle="90"
        android:startColor="#FF000000"
        android:centerColor="#FF000000"
        android:endColor="#FF0000cd"
        android:type="linear" /> 
```

上述形状用作 a 中的背景属性`RelativeLayout`：

```
<RelativeLayout
    android:id="@+id/layoutBottom"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:animation="@anim/slide_top_to_bottom"
    android:background="@drawable/rectangle4"
    android:orientation="vertical" > 
```

我想在这个矩形中慢慢淡入淡出不同的渐变。问题是，这`RelativeLayout`会随着内容的变化而动态改变大小，所以我不能只使用图像文件作为背景（这实际上会隐藏经常变化的布局的文本内容）。我已经尝试删除该`android:background`属性并仅在我的图像文件中使用，`RelativeLayout`但是该图像占据了整个屏幕，因为我必须使用 wrap_content 并且该图像文件必须在文本视图占据之前放置在代码中`RelativeLayout`（否则文本被图片）。我知道如何制作 Alpha 补间动画，但我不知道如何将`android:background`属性分配给动画。有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-19T08:07:46.413

创建一个 TransitionDrawable 以在您用于褪色和未褪色背景的两个可绘制对象之间淡入淡出。

```
<?xml version="1.0" encoding="UTF-8"?>
<transition xmlns:android="http://schemas.android.com/apk/res/android">
    <!-- use whatever drawables you want, gradients, shapes etc-->
    <item android:drawable="@drawable/faded" />
    <item android:drawable="@drawable/unfaded" />
</transition> 
```

[http://developer.android.com/reference/android/graphics/drawable/TransitionDrawable.html](http://developer.android.com/reference/android/graphics/drawable/TransitionDrawable.html)

然后在代码中使用，开始过渡。我已经硬编码了 2 秒（2000 毫秒）

```
TransitionDrawable trans = (TransitionDrawable) myLayout.getBackground();
trans.startTransition(2000); 
```

# c# - 修改 C# 颜色 int 或 uint 的一个字节

> ID：14412364
> 
> 赞同：1
> 
> 时间：2013-01-19T08:02:21.320
> 
> 标签：c#, pointers, colors, bitmap, int

我正在使用 C# 中的位图，如您所知，位图通常以 24bpp 或 32bpp 的形式存储在内存中（锁定时）。提取一个像素的int颜色值后，我需要一次读取一个字节来得到R、G、B并编辑相同的字节来分别修改RGB。有没有办法使用指针来修改 4 字节 32 位 int 的任何给定字节？或者也许我可以创建一个`struct`并将 int 转换为允许访问/修改单个字节的结构？

```
int color = 0xFFAABB

// attempt to read individual bytes of an int
int R = *((*color));
int G = *((*color)+1);
int B = *((*color)+2);

// attempt to modify individual bytes of an int
*((*color)) = R;
*((*color)+1) = G;
*((*color)+2) = B; 
```

我需要这样一种方法来快速读取/写入单个字节。如果有一种`unsafe`方法可以使用这些指针，我也不介意。我无法将每个像素转换为`Color`对象，因为它对于高速图像处理来说太慢了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T08:13:50.520

一般来说，我所做的是创建一个结构，如您所说：

```
public struct Pixel {
    public byte Blue;
    public byte Green;
    public byte Red;
    public byte Alpha;
} 
```

然后我有一个实用功能，例如：

```
public void SetPixel(int x, int y, Pixel colour) {
    Pixel* pixel = GetPixelAt(x, y);
    *pixel = colour;
}

public Pixel* GetPixelAt(int x, int y) {
    return (Pixel*)((byte*)_bitmapData.Scan0.ToPointer() + y * _width + x * sizeof(Pixel));
} 
```

然后你可以这样称呼它：

```
Pixel p;
p.Red = 255;
p.Green = 0;
p.Blue = 0;
p.Alpha = 255;

SetPixel(0, 0, p); 
```

`_bitmapData`是`BitmapData`通过返回的结构`LockBits`。

编辑：

来自评论。这是你将如何转换它们：

```
// from pixel to int
Pixel p;
p.Red = 0;
p.Green = 0;
p.Blue = 0;
p.Alpha = 0;

int* i = (int*)&p;

// from int to pixel
Pixel p2;

p2 = *(Pixel*)&i; 
```

未经测试，但应该没问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T09:05:30.520

要使用指针，您必须使用不安全的代码。但是您可以使用移位和位运算符来实现您想要的。

```
// attempt to read individual bytes of an int
int r = (color & 0x00FF0000)>>16;
int g = (color & 0x0000FF00)>>8;
int b = (color & 0x000000FF);

Console.WriteLine("R-{0:X}, G-{1:X}, B-{2:X}", r, g, b);
// attempt to modify individual bytes of an int
int r1 = 0x1A;
int g1 = 0x2B;
int b1 = 0x3C;
color = (color & ~0x00FF0000) | r1 << 16;
color = (color & ~0x0000FF00) | g1 << 8;
color = (color & ~0x000000FF) | b1;

Console.WriteLine("Color-{0:X}", color); 
```

您可以根据需要将此片段包装在结构中。

这是不安全代码的解决方案，您必须在构建选项中设置允许不安全代码。

```
using System;

namespace PixelTest
{
    public unsafe struct Pixel
    {
        private int _color;

        public Pixel(int color)
        {
            _color = color;
        }

        public int GetColor()
        {
            return _color;
        }

        public int GetR()
        {
            fixed(int* c = &_color)
            {
                return *((byte*)c + 2);
            }
        }

        public int GetG()
        {
            fixed(int* c = &_color)
            {
                return *((byte*)c + 1);
            }
        }

        public int GetB()
        {
            fixed(int* c = &_color)
            {
                return *(byte*)c;
            }
        }

        public void SetR(byte red)
        {
            fixed (int* c = &_color)
            {
                *((byte*)c + 2) = red;
            }
        }

        public void SetG(byte green)
        {
            fixed (int* c = &_color)
            {
                *((byte*)c + 1) = green;
            }
        }

        public void SetB(byte blue)
        {
            fixed (int* c = &_color)
            {
                *(byte*)c = blue;
            }
        }
    }

    class Program
    {
        static void Main(string[] args)
        {
            Pixel c = new Pixel(0xFFAABB);
            Console.WriteLine("R-{0:X}, G-{1:X}, B-{2:X}", c.GetR(), c.GetG(), c.GetB());
            c.SetR(0x1A);
            c.SetG(0x2B);
            c.SetB(0x3D);
            Console.WriteLine("Color - {0:X}", c.GetColor());
        }
    }
} 
```

# iterator - 迭代器如何在 TreeSet 中实现

> ID：14412366
> 
> 赞同：2
> 
> 时间：2013-01-19T08:02:40.340
> 
> 标签：iterator, treeset

我阅读了有关 TreeSet 的 java 源代码，但在 TreeSet 中找不到 Iterator 的实现。谁能告诉我Iterator在TreeSet中是如何实现的，TreeSet中的源代码在哪里？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T17:54:00.700

好吧，如果您查看源代码，[`TreeSet<E>.iterator()`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/TreeSet.java#TreeSet.iterator%28%29)您会看到：

```
public Iterator<E> iterator() {
    return m.navigableKeySet().iterator();
} 
```

接下来搜索 的定义[`m`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/TreeSet.java#TreeSet.0m)：

```
private transient NavigableMap<E,Object> m; 
```

很明显`TreeSet`，`NavigableMap`这并不令人惊讶，因为[`TreeSet`'s JavaDoc](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/TreeSet.java#27)说：

> `NavigableSet`基于`TreeMap`. _

好的，让我们检查`TreeMap`. 在那里你会发现[`navigableKeySet()`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/TreeMap.java#TreeMap.navigableKeySet%28%29)上面引用的方法，指向一个名为[`navigableKeySet`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/TreeMap.java#TreeMap.0navigableKeySet)type的成员[`TreeMap.KeySet<K>`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/TreeMap.java#TreeMap.KeySet)，一个静态内部类。反过来你会找到一种[`iterator()`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/TreeMap.java#TreeMap.KeySet.iterator%28%29)方法等等。该类`TreeMap`包含相当多的内部类，整个结构相当复杂，但如果您有兴趣可以自行整理。我想我给了你一个很好的开端。`;-)`

# php - 在不刷新页面的情况下删除jquery中的行

> ID：14412367
> 
> 赞同：1
> 
> 时间：2013-01-19T08:02:42.167
> 
> 标签：php, javascript, jquery, ajax, codeigniter

我正在使用此代码删除一行..我的代码运行良好我正在使用数据表，其中每一行前面都有一个删除按钮..我想要的是当出现确认对话框并且用户按下确定然后它会删除该行并在不刷新的情况下显示数据表中的剩余行..我的意思是当时如果我按下“确定”按钮，它会成功删除该行..但是删除行保留在表中，直到我刷新页面然后它从表中删除..这可能吗？..因为我不希望用户在按下删除后必须刷新以查看该行是否被删除..

这是我的查看代码用户名

```
 <td> <a href = "employesController/deleteEmploye/<?php echo  $row->emp_id ?>" 
             class = "deletes" >Delete</td> 
```

我的jQuery代码

```
 <script type='text/javascript'>
  $(document).ready(function(){
$(".deletes").click(function(e){
  var r =  confirm("are you sure you want to delete this");

   if (r==true){
    $this  = $(this);
    e.preventDefault();
    var url = $(this).attr("href");
    $.get(url, function(r){
        if(r.success){
            $this.closest("tr").remove();
        }
    })
   }else {
        return false;
       }

    });
     }); 
```

我的控制器

```
 function deleteEmploye($empid){

     $id = $empid;
    $this->load->model('employesModel');
    $query = $this->employesModel->deleteEmploye($id);
    return json_encode(array("success" => true)); 
```

模型

```
 public function deleteEmploye($id){

         $this->db->where('emp_id', $id);
        $query = $this->db->delete('employees');

        return $query->result();

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T08:18:35.133

首先，您需要验证是否调用了 if 条件块。如果它被正确调用，那么试试这个：

```
$this.parent('td').parent('tr').remove(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T08:19:46.507

使用 Firebug（或类似工具，如果您不使用 firefox）来调试您的 ajax 调用。在“网络”选项卡中，您可以查看您的 ajaxrequest 是否真的被发送，以及它返回的内容。

将 console.log 和 console.dir 语句添加到您的代码中以了解发生了什么：

```
$.get(url, function(r){
    console.log("returned form ajax");
    if(r.success){
        console.log("successful, $this is now ");
        console.dir($this);
        $this.closest("tr").remove();
    }
} 
```

这样你会发现，你的 ajax 确实返回了，但不是你期望的结果：它只返回数据，所以查找 r.success 总是会失败。

您正在使用的 .get 方法只接受两个参数：url 和一个仅在成功时调用的函数！所以你根本不需要 if 语句：

```
$.get(url, function(r){
  $this.closest("tr").remove();
} 
```

有关完整工作示例，请参阅[http://jsfiddle.net/bjelline/8RQQN/](http://jsfiddle.net/bjelline/8RQQN/)。

* * *

另外：不要使用**get**删除东西！改用**帖子**！您还应该考虑跨站点请求伪造：完全不同站点上的某人可能会添加链接

```
<a href="http://yoursite.com/employesController/deleteEmploye/4">free beer here</a> 
```

欺骗您的用户删除员工 - 甚至没有注意到！

见[https://www.owasp.org/index.php/Cross-Site_Request_Forgery_%28CSRF%29_Prevention_Cheat_Sheet](https://www.owasp.org/index.php/Cross-Site_Request_Forgery_%28CSRF%29_Prevention_Cheat_Sheet)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T08:16:13.870

您可以使用 jquery 发送到 php 中删除这一行的另一个脚本，并且在确认时您可以删除表的这一行

jQuery

```
$.post("functions.php", { rowId: 1231 },
    function(data) {
        if (data == "ok")
            alert("the row has ben delete");
        else
            alert("the row is not delete");

}); 
```

php

```
<?php
    function delete_row(){
        //action to delete row in db
        // when the row has bes delete you can print ok
        echo 'ok';
        //if you have a error  you can print a message that you can managed y jquery
        echo "error 2121123"
    }
    if(isset($_post["rowId"]))
        delete_row($_post["rowId"]); 
```

# ruby-on-rails - nil:NilClass 的未定义方法“用户名”

> ID：14412368
> 
> 赞同：1
> 
> 时间：2013-01-19T08:02:42.733
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我对 Rails 很陌生，我有一个基于论坛怪物的简单论坛应用程序。我目前正在将它从 rails 3.0.9 更新到 3.2.11。在解决了这个自我造成的[问题](https://stackoverflow.com/questions/14393641/undefined-method-scoped-for-forummodule/14403475)后，我遇到了另一个问题。

似乎当我尝试显示一个主题时，用户（来自 post.user）对象不应该是 nil。

这是错误

```
Extracted source (around line #17):
14:       <% @topic.posts.each do |post| %>
15:       <tr>
16:         <td class="post_author" rowspan="2">
17:           <span class="name"><%= post.user.username %></span>
18:           <span class="avatar"><%= image_tag post.user.gravatar_url %></span>
19:           <span class="info smaller">
20:             <p><strong><%= "Administrator" if post.user.admin? %></strong></p> 
```

这是我的观点 app/views/topics/show.html.erb

```
<div class="right controls"><%= link_to "Back to Forum", forum_path(@topic.forum) %></div>
<div class="module">
  <div class="module_header">
    <%= @topic.title %>
    <span class="right controls">
      <%= link_to "Edit", edit_topic_path(@topic) if can? :manage, @topic %>
      <%= link_to "Delete", @topic, :confirm => "Are you sure?", :method => :delete if can? :manage, @topic %>
      <%= link_to @topic.sticky ? "Unstick" : "Sticky", {:controller => 'topics', :action => 'update', :topic => {:sticky => @topic.sticky ? "false" : "true" }}, :method => :put if can? :moderate, @topic %>
      <%= link_to @topic.locked ? "Unlock" : "Lock", {:controller => 'topics', :action => 'update', :topic => {:locked => @topic.locked ? "false" : "true" }}, :method => :put if can? :moderate, @topic %>
    </span>
  </div>
  <div>
    <table>
      <% @topic.posts.each do |post| %>
      <tr>
        <td class="post_author" rowspan="2">
          <span class="name"><%= post.user.username %></span>
          <span class="avatar"><%= image_tag post.user.gravatar_url %></span>
          <span class="info smaller">
            <p><strong><%= "Administrator" if post.user.admin? %></strong></p>
            Posts <%= post.user.posts.size %><br />
            Registered <%=l post.user.created_at %><br />
          </span>
        </td>
        <td class="post_header">
          <span class="left post_date smaller">Posted <%=l post.created_at %></span>
          <span class="right controls">
            <%= link_to "Reply", new_topic_post_path(@topic) if can? :create, @topic.posts.new %>
            <%= link_to "Quote", new_topic_post_path(@topic, :quote => post) if can? :create, @topic.posts.new %>
            <%= link_to "Edit", edit_post_path(post) if can? :update, post %>
            <%= link_to "Delete", post, :confirm => "Are you sure?", :method => :delete if can? :destroy, post %>
          </span>
        </td>
      </tr>
      <tr>
        <td class="post_body">
          <%= post.body.bbcode_to_html().html_safe %>
        </td>
      </tr>
      <% end %>
    </table>
  </div>
</div>
<div class="right controls"><p><%= link_to "Back to Forum", forum_path(@topic.forum) %></p></div> 
```

这是控制器 app/controlers/topics_controller.rb

```
class TopicsController < ApplicationController
  load_and_authorize_resource :forum
  load_and_authorize_resource :topic, :through => :forum, :shallow => true

  def show
    @topic.hit! if @topic
  end

  def create
    @topic.user ||= current_user

    if @topic.save
      flash[:notice] = "Topic was successfully created."
      redirect_to topic_url(@topic)
    else
      render :action => 'new'
    end
  end

  def update
    if @topic.update_attributes(params[:topic])
      flash[:notice] = "Topic was updated successfully."
      redirect_to topic_url(@topic)
    end
  end

  def destroy
    if @topic.destroy
      flash[:notice] = "Topic was deleted successfully."
      redirect_to forum_url(@topic.forum)
    end
  end

end 
```

Rails 控制台输出确认视图中的代码应该可以工作，并且帖子确实有用户。

```
ricky ~/forum $ rails c
Loading development environment (Rails 3.2.11)
irb(main):001:0> Topic.find(1).posts.each do |p|
irb(main):002:1* puts p.user.username
irb(main):003:1> end
  Topic Load (0.5ms)  SELECT `topics`.* FROM `topics` WHERE `topics`.`id` = 1 ORDER BY sticky DESC, updated_at DESC LIMIT 1
  Post Load (0.4ms)  SELECT `posts`.* FROM `posts` WHERE `posts`.`topic_id` = 1 ORDER BY created_at ASC
  User Load (0.5ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
admin
=> [#<Post id: 1, body: "Forum Monster is a simple forum generator written i...", forum_id: 1, topic_id: 1, user_id: 1, created_at: "2013-01-19 06:57:23", updated_at: "2013-01-19 06:57:23">]
irb(main):004:0> 
```

我想我可能需要为 cancan can :read User 添加一个功能，但我不太确定。

在此先感谢您帮助这个困惑的 android 开发人员 0.o

**编辑**

[在这里](http://rickbarrette.org/cgit/forum.git/tree/?h=rails3.2)查看完整的源代码

正如您在下面看到的那样，post 模型确实验证了用户的存在

应用程序/模型/post.rb

```
class Post < ActiveRecord::Base

  # Associations
  belongs_to :forum, :counter_cache => true
  belongs_to :topic, :counter_cache => true, :touch => true 
  belongs_to :user, :class_name => "User", :counter_cache => true

  # Accessors
  attr_accessible :body

  # Validations
  validates :body, :presence => true
  validates :user, :presence => true

  # Default Scope
  default_scope :order => 'created_at ASC'

  # Scope to display only the last n posts. Used for "Recent Posts" display
  scope :recent, lambda {
    |c| reorder('created_at desc').limit(c)
  }

  # Callbacks
  before_save :topic_locked?

  # Methods
  private
    def topic_locked?
      if topic.locked?
        errors.add(:base, "That topic is locked")
        false
      end
    end
end 
```

是什么让我知道在已播种的数据库中仅存在 1 个帖子，并且它是通过

```
@current_user = User.find_by_username("admin")
@current_user.topics.create!(...) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T08:21:21.697

用。。。来代替：

```
<%= post.user.username unless post.user.blank? %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T16:01:40.277

我真的不明白为什么这解决了问题，因为数据库中只有一篇文章；但我找到了解决方案。

```
<% @topic.posts.each do |post| %>
  <% if !post.user.blank? %>
    ...display post here...
  <%end%>
<%end%> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T08:48:24.197

在您看来，该集合`@topic.posts`至少包含一个没有用户的帖子，并且您视图中的其余代码没有预料到这一点。

*   可能您的应用程序不应允许在没有用户的情况下创建帖子，您应该添加[验证](http://guides.rubyonrails.org/active_record_validations_callbacks.html#presence)以检查保存帖子时用户是否存在，并防止在没有用户的情况下创建帖子。

    ```
    validates :user_id, :presence => true 
    ```

*   如果您的应用程序应该允许没有用户的帖子，`if post.user.present?`请在您的视图中添加：

    ```
    <% @topic.posts.each do |post| %>
      <tr>
        <td class="post_author" rowspan="2">
          <% if post.user.present? %>
            <span class="name"><%= post.user.username %></span>
            <span class="avatar"><%= image_tag post.user.gravatar_url %></span>
            <span class="info smaller">
              <p><strong><%= "Administrator" if post.user.admin? %></strong></p>
              Posts <%= post.user.posts.size %><br />
              Registered <%=l post.user.created_at %><br />
            </span>
          <% end %>
        </td>
        ... 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T10:12:41.717

根据您是否希望帖子用户始终为空白或根本不为空白，您可以采取两种方法。

**1）如果帖子用户可以为空：**

检查 post 用户是否存在，这样您将不会获得“nil”用户。

'@userpost = post.user.blank？" ": post.user.username'

**2）如果post用户不能为空：**

在这种情况下，您可以像在 post 模型中那样强加关联，“belongs_to :user”和在用户模型中，“has_many :posts”和像“validates_presence_of :post”这样的约束。

# java - Jongo vs (DBObject)JSON.parse

> ID：14412369
> 
> 赞同：5
> 
> 时间：2013-01-19T08:02:56.937
> 
> 标签：java, mongodb, jongo

我试图找出 Jongo 的优势，而不是简单地使用 (DBObject)JSON.parse(...) 解组 json 命令并以以下方式使用 DBObject。

有性能优势吗？

```
 @Override
public List<T> getEntityList(Integer limit, String query) throws Exception {
    log.entering(DaoImpl.class.toString(), "getEntityList, with criteria of " + query);
    DBObject criteriaObject = null;
    ArrayList<T> list = new ArrayList<T>();

    if (query != null)
        criteriaObject = (DBObject)JSON.parse(query);

    DBCursor cursor = null;

    try {
        if (criteriaObject != null) {
            log.log(Level.FINEST, "getting the objects using a search criteria: " + criteriaObject);
            cursor = MongoDB.getInstance().getCollection(collection).find(criteriaObject);
        } else {
            log.log(Level.FINEST, "getting the objects without a criteria");
            cursor = MongoDB.getInstance().getCollection(collection).find();
        }

        ............etc, etc, etc 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T14:47:28.443

Jongo .3 用相同的方式解组 Mongo 查询`JSON.parse(query)`。优点是您从数据库中获取结果的方式。在您的示例中，您必须遍历游标，自己调整每个属性和子属性。

```
DBObject dbo = JSON.parse("{age: 18}");
DBCursor results = users.find(dbo);
for (DBObject result : results) {
    User user = new User();
    user.setUsername((String) result.get("username"));
    user.setAge((Integer) result.get("age"));
    user.setAddress(new Address(..));
} 
```

使用 Jongo，您可以直接操作对象：

```
Iterable<User> users = collection.find("{age: 18}").as(User.class); 
```

Jongo 的表现几乎与车手的表现相当。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T15:55:11.743

以下是使用 jongo 的一些优点列表：

*   几乎所有查询都可以模板化：

    ```
    friends.find("{name:#, age:#}", "Joe", 18) 
    ```

*   绑定参数可以是 BSON Primitives 或任何复杂类型：

    ```
    friends.find("{address: #}", new Address(..)); 
    ```

*   查询和解组与驱动程序一样快。没有杰克逊流程的额外费用
*   使用 Jackson 功能映射您的 Pojo：多态性、JsonView...

顺便说一句，您的 GSON un/marshaller 可以通过实现[Mapper](http://jongo.org/#custom-mapper)集成到 Jongo 中。

# drupal - 删除未使用的 drupal 核心模块

> ID：14412372
> 
> 赞同：2
> 
> 时间：2013-01-19T08:03:45.600
> 
> 标签：drupal, drupal-7, drupal-modules

删除未使用的drupal核心模块可以吗？我有将近 20 个这样的核心模块没有被使用……它们会对网站的性能产生影响吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T10:39:06.073

不，您不会看到任何性能改进，在模块管理页面上可能会节省几毫秒。

下次你更新 Drupal 时，这些模块文件无论如何都会被替换，所以这真的是徒劳的练习。

请[想想小猫](http://www.flickr.com/photos/hagengraf/2802915470/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T10:00:50.703

不，除非您没有启用它们，否则它不会有。

但是我不建议你删除任何核心模块，不管它是否被使用。如果它对删除没有任何影响，那么对保留也没有影响..因为这些钩子不会在页面加载中被调用..

然后核心模块保留在 Drupal 安装的默认文件夹中，因此您不会与站点/所有/模块中的贡献模块混淆

# jquery - 了解数据对象，each 和 grep

> ID：14412377
> 
> 赞同：0
> 
> 时间：2013-01-19T08:04:07.920
> 
> 标签：jquery, each

回答[如何检查 jQuery .data() 函数中是否存在值](https://stackoverflow.com/questions/14411541/how-to-check-if-value-exist-in-jquery-data-function/14411965#14411965)

（请不要反对将一堆数据值添加到表单对象的有效性，而不是我的决定）

我[使用每个创建了一个 jsfiddle](http://jsfiddle.net/mplungjan/3tuVW/)

这使

```
Object {v1: "value11", v2: "value2", v3: "value3", v4: "value4", v5: "value5"} fiddle.jshell.net:25
Uncaught TypeError: Object #<Object> has no method 'each' 
```

注意：如果我将对象包装在 $(..) 中，它也不起作用

**使用 $.each**解决了**[jsfiddle 使用 $.each](http://jsfiddle.net/mplungjan/ZLMTE/)**

 **```
$(function() {
  $("form[name=update]").data("values", {"v1": "value11", "v2": "value2", "v3": "value3", "v4": "value4", "v5": "value5"});
  $(".but").on("click",function(e) {
    var $fData = $("form[name=update]").data("values");
    var val = $(this).val();
      console.log($fData);
    $fData.each(function(n,i) { 
        console.log("!!!",n,i)
      if (n[i]===val) {
        alert("duplicate value");
        return false;
      }    
    })  
    e.preventDefault()  
  });
}); 
```

和

[jsfiddle 使用 grep](http://jsfiddle.net/mplungjan/VtcQt/)在任务中完全失败。

```
$(function() {
  $("form[name=update]").data("values", {"v1": "value11", "v2": "value2", "v3": "value3", "v4": "value4", "v5": "value5"});
  $(".but").on("click",function() {
    var $fData = $("form[name=update]").data("values");
    var val = $(this).val();
    var idx = $.grep($fData, function(n,i) { 
        console.log("n",n); // why no console output for this???
        return n[i]===val; 
    });  
    console.log(idx);  
    if (idx!=-1) {
      alert("duplicate value")
    }
  });
}); 
```

**问题：**

1.  为什么我不能`each`在返回的对象上运行
2.  `grep`我在做什么（之前只使用过一次 grep ）
3.  为什么内部没有控制台输出`grep`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T08:06:24.107

`$.each`仅适用于 jQuery 对象，因此您需要包装您的对象：

```
$($fData).each(function (n, i) { 
```

或将其传递给`$.each`：

```
$.each($fdata, function(n, i) { 
```

至于`$.grep()`，问题在于您的输入是一个对象，而不是一个数组。`$.grep`有点默默地失败了你：

```
grep: function( elems, callback, inv ) {
    var retVal,
        ret = [],
        i = 0,
        length = elems.length;  // <-- Here's why
    inv = !!inv;

    // Go through the array, only saving the items
    // that pass the validator function
    for ( ; i < length; i++ ) {
        retVal = !!callback( elems[ i ], i );
        if ( inv !== retVal ) {
            ret.push( elems[ i ] );
        }
    }

    return ret;
}, 
```**

# php - 如何为 XAMPP 更新我的 PHP 版本

> ID：14412379
> 
> 赞同：8
> 
> 时间：2013-01-19T08:04:26.030
> 
> 标签：php, xampp

> **可能重复：**
> [在 XAMPP for Windows 中升级 PHP？](https://stackoverflow.com/questions/2154762/upgrading-php-in-xampp-for-windows)

我目前正在使用 XAMPP 版本 1.8.1，它具有 PHP 版本 5.4.3

我从一天前发布的 PHP 站点版本 5.4.11 中找到了最新版本的 PHP。

现在，如果我从 php.net 下载最新的 PHP 版本并将我当前的 PHP 目录替换为最新的，它会正常/立即工作吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T14:27:49.990

*   下载[PHP 5.4.11](http://windows.php.net/download/)的最新二进制版本（确保获取 .zip 包而不是安装程序）
*   将其解压缩到目录
*   复制 XAMPP 安装目录的 php 子文件夹中的目录内容，覆盖已经存在的文件
*   用较新的版本覆盖 apache\bin 目录中已经存在的文件。
*   **现在的诀窍：**获取名称中包含“_2”的文件（例如 php5apache2_2.dll 或 php5apache2_2_filter.dll），将它们复制到 apache\bin 子目录中并删除“_2”部分，覆盖现有文件。这是必要的，因为 XAMPP 使用 Apache 版本 2.2，并且带有 2 前缀的文件是为 Apache 2.0 构建的，因此您必须为较新版本（具有不同的插件接口）构建文件并以 XAMPP 期望的文件名重命名它们.

希望这可以帮助。

# asp.net - 从 FileUploader 上传到 ImageControl 后如何显示图像

> ID：14412380
> 
> 赞同：2
> 
> 时间：2013-01-19T08:04:34.653
> 
> 标签：asp.net

我在网络表单中使用 FileUploader 上传图像。我想要做的是通过 FileUploader 浏览并选择图像，它应该作为预览显示在 ImageControl 中，以便可以进一步保存到数据库中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T07:12:48.117

> 您将需要使用某种 Ajax、Jquery 或 flash 控件来访问文件系统并显示所选文件的缩略图。否则，如果不先将文件上传到服务器，您想要什么是不可能的。
> 
> 另一种方法是您可以使用外部工具，例如[PicZard](http://piczard.com/demos/imageUpload/) 或Asp.Net/Ajax[的 Rad Controls](http://www.telerik.com/products/aspnet-ajax/asyncupload.aspx)这些工具非常有用，可以满足您的要求。

# javascript - 弹出框不显示图像？

> ID：14412385
> 
> 赞同：1
> 
> 时间：2013-01-19T08:06:16.213
> 
> 标签：javascript, jquery, html

鼠标悬停，弹出框只显示标题而不是图像

代码 ：

```
<script type="text/javascript">
$(document).ready(function(){

var img ='<img src="/assets/Excel_1.png">';

$("#blob").popover({ title: 'Format for Excel sheet', content: img , trigger:'hover' });

});
</script> 
```

在正文中：

```
 <i href="#" id="blob" class="icon-info-sign" rel="popover"  style="margin-top: 300px"> </i> 
```

但不显示图像......

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T05:37:28.743

得到了这个简单问题的解决方案......

```
$("#blob_1").popover({ title: 'Format for Excel sheet', content: img , trigger:'hover',html: true }); 
```

正是这种变化使需求成为可能

谢谢..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T09:10:03.550

试试这个：http: [//jsbin.com/iducul/1/edit](http://jsbin.com/iducul/1/edit)

html是：

```
<a href="#" id="example" class="btn btn-success" rel="popover">hover for popover</a> 
```

jQuery是：

```
$(function (){ 
    var img = '<img src="https://si0.twimg.com/a/1339639284/images/three_circles/twitter-bird-white-on-blue.png" />';
    $("#example").popover({title: 'Twitter Bootstrap Popover', content:img});  
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T11:31:35.487

我想你还没有关闭图像标签。可能是这个问题：

```
var img ='<img src="/assets/Excel_1.png">'; 
```

它应该是：

```
var img ='<img src="/assets/Excel_1.png"></img>'; 
```

# c# - ASP.NET：RegisterStartupScript 不起作用

> ID：14412392
> 
> 赞同：1
> 
> 时间：2013-01-19T08:06:53.857
> 
> 标签：c#, asp.net, .net

**我正在尝试在Page_Load**上从服务器端运行客户端脚本，我从[这里](http://www.devcurry.com/2009/01/execute-javascript-function-from-aspnet.html)找到了这段代码。这是服务器端代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!ClientScript.IsStartupScriptRegistered("alert"))
    {
        Page.ClientScript.RegisterStartupScript(this.GetType(),
            "alert", "alertMe();", true);
    }
} 
```

它是客户端代码：

```
<script type="text/javascript">
    function alertMe() {
        alert('Hello');
    }
</script> 
```

但是**Page_Load**没有任何反应。

**更新**：源代码代码[运行](http://www.coderun.com/ide/?w=XjaajP8oG0u2H_xBeiZmBw)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T08:28:01.803

您`alertMe()`在页面末尾定义之前调用您的。

在 asp.net 中注册的所有脚本都呈现在 form 标记中。

我建议将您的 javascript 块移动到页面的头部。

```
<head runat="server">
  <script type="text/javascript">
    function alertMe() {
      alert('Hello');
    }
  </script>
</head> 
```

这是您[修改后的代码运行](http://www.coderun.com/ide/?w=6SqHJA1PNEO0ZvFyjOAazA)，可以按您的预期运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T08:15:04.610

我建议你检查两件事

1.  是您的js函数不在其他函数中。然后它对服务器不可见

2.  包含您的脚本的html标签是否有`runat="server"`标签。

在你的情况下：

```
<head runat="server">
    <script type="text/javascript">
        function alertMe() {
            alert('Hello');
        }
    </script>
</head> 
```

# php - JSON中的文件上传

> ID：14412401
> 
> 赞同：0
> 
> 时间：2013-01-19T08:08:16.257
> 
> 标签：php, json, api, rest

我正在使用 PHP 构建一个 REST API 服务。我知道如何以标准 html 表单（multipart/form-data）接收文件。

但在我的服务中，我想使用 json。那么问题来了，当客户端使用 Content-Type:application-json 时如何上传文件呢？如何在 JSON 中嵌入文件？

或者关于 REST API 设计，我必须遵循一些其他或标准的方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T08:48:08.773

您必须将您的文件编码为字符串（例如在base64 中），并将此字符串作为JSON 值放入您的JSON 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T08:16:19.003

看起来这个问题已经有几个答案了。请参阅以下问题：

[如何使用带有 json 和 php 的 jquery 的 $.ajax 函数上传文件](https://stackoverflow.com/questions/10492617/how-can-i-upload-a-file-using-jquerys-ajax-function-with-json-and-php)

他们主要建议使用插件。

# c++ - 对于什么参数是 std::vector ::保留 O(1) 时间操作？

> ID：14412402
> 
> 赞同：0
> 
> 时间：2013-01-19T08:08:22.347
> 
> 标签：c++

我至少对以下问题的大致答案感兴趣：

```
int n;
...
std::vector<void*> vectorOfPointers;
vectorOfPointers.reserve(n); 
```

上面提到的程序在**O(1)**中运行到哪个数字**n**？

 **让我们假设一台运行 32 位 Ubuntu 和 3 GB 内存的笔记本电脑，没有运行任何其他程序。是几万，几万，几百万？需要知道哪些信息才能评估这样一个问题？有没有办法在不进行任何实验的情况下找出答案？

我从未研究过任何有关操作系统的东西，但在我的想象中，操作系统只需 2 个步骤即可分配内存。它确定开始块的指针和块结束的指针。情况可能会更复杂，因为系统可能必须整理才能获得足够大的内存块。但是如果我们假设系统只运行这一个程序，我们如何估计需要的时间呢？除了内存碎片，还有其他方面需要考虑吗？

编辑：

对不起，我没有把我的问题说清楚。重要的是要考虑，在调用 reserve 之前向量是空的，因此不需要复制数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T08:16:44.147

使用时不能依赖 O(1) 复杂度`reserve()`。

> ### 复杂
> 
> 与容器大小成线性关系

（参见[cppreference](http://en.cppreference.com/w/cpp/container/vector/reserve)）

基本上，新内存的分配是在恒定时间内进行的，但是您还需要将旧内存中的旧元素复制到新内存中（因此具有线性复杂性）。

所以在一个空向量上，reserve 可能会有一个恒定的时间，但我不确定标准是否明确说明了它。所以它可能取决于底层实现（即使我没有看到任何不这样做的理由）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T08:17:01.077

从 C++ 的角度来看，代码需要时间（它与容器的*当前*`O(1)`大小成线性关系，在您的情况下始终为零）。

 *现在，您的问题似乎实际上是关于分配`m`内存字节的复杂性。恐怕，这是未指定的。

有关进一步讨论，请参阅[内存分配的时间复杂度](https://stackoverflow.com/questions/282926/time-complexity-of-memory-allocation)

为了补充另一个问题中已经说过的内容，有几层复杂性：

*   首先，`malloc()`需要维护其内部数据结构。没有具体说明这样做的复杂性，但人们希望这`malloc(m)`不会花费`Θ(m)`时间。但是，复杂性很可能取决于其他因素，例如内存碎片。
*   其次，`malloc()`可能需要向操作系统请求额外的内存。在这里，期望操作系统对它分配的每个内存页做一些事情并不是没有道理的（例如，擦除它，这样你就不会看到其他人的机密数据）。如果发生这种情况，手术确实会是`Θ(m)`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T08:21:02.593

我唯一`O(1)`能想到的`std::vector::reserve()`是什么时候`n <= capacity()`什么`reserve()`都不做。***

# wpf - 在视图模型之间传递数据的正确方法是什么？

> ID：14412405
> 
> 赞同：4
> 
> 时间：2013-01-19T08:08:42.267
> 
> 标签：wpf, mvvm, viewmodel, interaction

我刚刚开始使用 MVVM，我一直在阅读它并做了一些示例。我设法创建了一个应用程序，该应用程序将从数据库中读取，然后填充到列表框中。我很难尝试将所选项目链接到另一个视图，然后在该视图 viewModel 中进行一些处理。请有人向我解释从view1列表框中获取当前选定项目然后在view2标签上输出选定项目的正确方法吗？

这是我的 XAML：

```
<local:SecondView Margin="499,30,0,20">
        <local:SecondView.DataContext>
            <v:MainViewModel />
        </local:SecondView.DataContext>
    </local:SecondView>
        <Button Height="22" HorizontalAlignment="Left" Margin="8,4,0,0" Name="button1" VerticalAlignment="Top" Width="48" Command="{Binding Path=GetDataCommand}">Button</Button>
    <ListBox ItemsSource="{Binding Path=FileData}"   SelectedItem="{Binding dr}"  Height="330" HorizontalAlignment="Left" Margin="149,30,0,0" Name="listBox1" VerticalAlignment="Top" Width="250" DisplayMemberPath="DDFName" /> 
```

这段代码在我的 viewModel1 中：

```
private DataRowView _dr;
    public DataRowView dr
    {
        get{
            return _dr;
        }

        set
        {
            _dr = value;
            OnPropertyChanged("dr");}
    } 
```

我想以某种方式让 viewModel2 获得 dr 的新值（这是在 view1 列表框中选择的项目），然后在 view2 上我想显示一些细节

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T11:36:46.120

您的 ViewModel2 类取决于 Row --> 在 ViewModel2 中注入依赖项的一种可能性是通过构造函数传递它。

```
public class ViewModel1
{
    private DataRowView _dr;
    public DataRowView dr
    {
        get
        {
            return _dr;
        }

        set
        {
            _dr = value;
            OnPropertyChanged("dr");

            this.DetailView = new ViewModel2(value); //On Change of the selected Row create a new viewModel which serves as detail view
        }
    }

    private ViewModel2 _DetailView;
    public ViewModel2 DetailView
    {
        get
        {
            return _DetailView;
        }
        set
        {
            if (_DetailView != value)
            {
                _DetailView = value;
                RaisePropertyChanged(() => this.DetailView);
            }
        }
    }
}

public class ViewModel2
{
    public ViewModel2(DataRowView row)
    {
        this.Row = row;
    }

    private DataRowView _Row;
    public DataRowView Row
    {
        get
        {
            return _Row;
        }
        set
        {
            if (_Row != value)
            {
                _Row = value;
                RaisePropertyChanged(() => this.Row);
            }
        }
    }
} 
```

并且在您的 XAML 中，您可以将 datacontext 直接设置为详细视图：

```
<local:SecondView Margin="499,30,0,20" DataContext="{Binding DetailView, Mode=OneWay}" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-19T13:40:44.573

您可以使用其他解决方案，[http://sharedprop.codeplex.com](http://sharedprop.codeplex.com)，阅读源代码是一种在对象之间共享属性的方法，并且如果第二个对象不活动也可以使用...检查只是信息

# php - 如何编写脚本来更改 MySQL 数据库中的整数？

> ID：14412408
> 
> 赞同：0
> 
> 时间：2013-01-19T08:09:11.133
> 
> 标签：php, mysql

我以前几乎从未用 PHP 和 MySQL 编写过代码，所以请原谅我的糟糕代码。

我的数据库中有 3 列。ID、类别和需求。

![表](../Images/afa535e7aee2f642fc1cc39aa3ca05cc.png)

基本上，我试图找到最简单的方法来编写页面，以允许用户将每行的“需要”值从 0 更改为 1，或从 1 更改为 0。

目前，我有 2 个按钮运行 2 个单独但几乎相同的脚本，其唯一目的是将特定行的“需要”值更改为 1 或 0（如下所示）

```
<?php
mysql_connect("localhost", "muffins", "sugarcookies") or die(mysql_error());
mysql_select_db("crackers_cheese") or die(mysql_error());

mysql_query("UPDATE recruitment SET Need=1
WHERE ID='1'");

mysql_close($con);

header("location: /admin.html"); 
?> 
```

除了“SET Need=0”之外，反向 .php 文件是相同的

那么，我能做些什么而不是拥有 22 个单独的 .php 文件，其唯一目的是将每个特定行设置为 0 或 1。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T08:20:32.357

让您的一个按钮发送一个 HTTP 参数以指示该字段应该是 0 还是 1。此外，请查看使用[PDO](http://ca.php.net/manual/en/book.pdo.php)类而不是 mysql_* 函数。

这是如何使用 PDO 函数完成的示例：

## PHP 代码

```
<?php

if(!isset($_POST['need'])) {
    die('Missing need parameter');
} elseif($_POST['need'] !== '0' && $_POST['need'] !== '1') {
    die('Invalid need values');
}

if(!isset($_POST['id']) || !is_numeric($_POST['id'])) {
    die('Missing ID');
}

$db = new \PDO('mysql:dbname=crackers_cheese;host=localhost', 'muffins', 'sugarcookies');
$statement = $db->prepare("UPDATE `recruitment` SET `Need` = :need WHERE `ID`= :id");

$statement->bindValue(':need', $_POST['need'], \PDO::PARAM_INT);
$statement->bindValue(':id', $_POST['id'], \PDO::PARAM_INT);

$statement->execute();

header("location: /admin.html"); 
?> 
```

请注意，由于您在此处使用准备好的语句，因此不需要使用 real_escape_string 或类似的东西对数据进行转义，从而减轻 SQL 注入攻击。

使用参数绑定而不是连接查询来防止 SQL 注入攻击是一种很好的做法。有关更多信息，请参阅：[PDO 准备好的语句是否足以防止 SQL 注入？](https://stackoverflow.com/questions/134099/are-pdo-prepared-statements-sufficient-to-prevent-sql-injection)

## HTML 表单

```
<form method='POST' action='update.php'>
    <label for='id'>ID:</label>
    <input type='number' name='id' id='id'>

    <input type='radio' name='need' value='0' id='needfalse'> <label for='needfalse'>Need = 0</label>
    <input type='radio' name='need' value='1' id='needtrue'> <label for='needtrue'>Need = 1</label>

<button type='submit'>Submit</button> 
```

这不是设计的最佳形式。我在这里使用了单选按钮，使用实际按钮会稍微复杂一些，但这应该足以让您入门。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T10:00:03.707

假设您只想切换（如果为 0，则设置为 1，如果为 1，则设置为 0），您可以使用以下 SQL 更新语句：

```
update table_name
set need = abs(need - 1)
where id = 1 
```

# java - 使用 ReentrantLock 实现 BlockingQueue

> ID：14412411
> 
> 赞同：3
> 
> 时间：2013-01-19T08:09:28.833
> 
> 标签：java, locks, blockingqueue, reentrantlock

我正在编写自己的 BlockingQueue 实现以供练习。我试图避免对方法使用同步关键字。相反，我想使用 ReentrantLock。

编写此实现的最佳方法是什么？我不是 Java 忍者，如果有人能在此处查明我的代码中的错误并提出更好的实现方法，我将不胜感激。

```
public class MyBlockingQueue<T> {

private Queue<T> queue;
private AtomicInteger limit = new AtomicInteger(10);
private Lock put_lock = new ReentrantLock();
private Lock take_lock = new ReentrantLock();
private Condition put_condition = put_lock.newCondition();
private Condition take_condition = take_lock.newCondition();

public MyBlockingQueue(AtomicInteger limit){
    queue = new LinkedList<T>();
    this.limit = limit;
}

public boolean put(T item) throws InterruptedException{
    put_lock.lockInterruptibly();
    try {
        while(queue.size() == limit.get()) {
            put_condition.await();
        }
        put_condition.signal();
        queue.add(item);
    } finally{
        put_lock.unlock();
    }

    return true;
}

public T take() throws InterruptedException{
    take_lock.lockInterruptibly();
    try {
        while (queue.size() == 0) {
            take_condition.await();
        }
        take_condition.signal();
        return queue.poll();
    } finally {
        take_lock.unlock();
    }
} 
```

谢谢你的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T09:37:20.180

您可以将您的逻辑与阻塞队列的开放 jdk 实现进行比较。

[数组阻塞队列](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/util/concurrent/ArrayBlockingQueue.java#ArrayBlockingQueue)

Btw..ArrayBlockingQueue 也使用**ReentrantLock**

# javascript - Android 中的 SAX 解析器错误

> ID：14412414
> 
> 赞同：0
> 
> 时间：2013-01-19T08:09:39.503
> 
> 标签：javascript, android, xml, eclipse

我需要从服务器解析 XML 文件。有人可以帮帮我吗。

我的代码：

```
public class XML2Parser extends Activity {

TextView antonis1, antonis2, antonis3, tryans1, tryans2, tryans3;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_xml2parser);
    findViewById();

    String myurl = "http://www.playhard.cu.cc/tabel.xml";
    new XMLParsing().execute(myurl);
}

private void findViewById() {
    // TODO Auto-generated method stub
    antonis1 = (TextView) findViewById(R.id.tvxml2pantonis1);
    antonis2 = (TextView) findViewById(R.id.tvxml2pantonis2);
    antonis3 = (TextView) findViewById(R.id.tvxml2pantonis3);
    tryans1 = (TextView) findViewById(R.id.tvxml2ptryans1);
    tryans2 = (TextView) findViewById(R.id.tvxml2ptryans2);
    tryans3 = (TextView) findViewById(R.id.tvxml2ptryans3);     
}

public class XMLParsing extends AsyncTask<String,Void,String>{

    @Override
    protected String doInBackground(String...url) {
        // TODO Auto-generated method stub
        try {
            String website = url[0].toString();
            URL fullurl = new URL(website);

            // mengaktifkan parse pada xml reader
            SAXParserFactory spf = SAXParserFactory.newInstance();
            SAXParser sp = spf.newSAXParser();
            XMLReader xr = sp.getXMLReader();
            XML2ParserHandler Handler = new XML2ParserHandler();
            xr.setContentHandler(Handler);
            InputSource is = new InputSource(fullurl.openStream());
            xr.parse(is);
            String information = Handler.getInfo().toString();
            return information;
        } catch (Exception e) {
            e.printStackTrace();
        }
        String error = "error";
        return error;
    }

    @Override
    protected void onPostExecute(String result) {
        // TODO Auto-generated method stub
        antonis1.setText(result);
    }
} 
```

}

处理程序类：

```
package com.projectx0001.antoni;

import org.xml.sax.SAXException;
import org.xml.sax.helpers.DefaultHandler;

public class XML2ParserHandler extends DefaultHandler{

    String testtext;

    public String getInfo(){
        return testtext;
    }

    @Override
    public void startDocument() throws SAXException {
        // TODO Auto-generated method stub
        testtext = "It's Work Just Fine!";
        super.startDocument();
    }
} 
```

日志猫：

```
01-19 17:25:41.211: D/OpenGLRenderer(3294): Enabling debug mode 0
01-19 17:25:46.609: D/OpenGLRenderer(3294): Flushing caches (mode 0)
01-19 17:25:48.398: W/System.err(3294): java.net.UnknownHostException: Unable to resolve host "www.playhard.cu.cc": No address associated with hostname
01-19 17:25:48.398: W/System.err(3294):     at java.net.InetAddress.lookupHostByName(InetAddress.java:426)
01-19 17:25:48.398: W/System.err(3294):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)
01-19 17:25:48.398: W/System.err(3294):     at java.net.InetAddress.getAllByName(InetAddress.java:220)
01-19 17:25:48.398: W/System.err(3294):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:71)
01-19 17:25:48.398: W/System.err(3294):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
01-19 17:25:48.398: W/System.err(3294):     at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:351)
01-19 17:25:48.398: W/System.err(3294):     at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:86)
01-19 17:25:48.398: W/System.err(3294):     at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
01-19 17:25:48.398: W/System.err(3294):     at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:308)
01-19 17:25:48.398: W/System.err(3294):     at libcore.net.http.HttpEngine.connect(HttpEngine.java:303)
01-19 17:25:48.398: W/System.err(3294):     at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:282)
01-19 17:25:48.398: W/System.err(3294):     at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:232)
01-19 17:25:48.398: W/System.err(3294):     at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:273)
01-19 17:25:48.406: W/System.err(3294):     at libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:168)
01-19 17:25:48.406: W/System.err(3294):     at java.net.URL.openStream(URL.java:462)
01-19 17:25:48.406: W/System.err(3294):     at com.projectx0001.antoni.XML2Parser$XMLParsing.doInBackground(XML2Parser.java:62)
01-19 17:25:48.406: W/System.err(3294):     at com.projectx0001.antoni.XML2Parser$XMLParsing.doInBackground(XML2Parser.java:1)
01-19 17:25:48.406: W/System.err(3294):     at android.os.AsyncTask$2.call(AsyncTask.java:264)
01-19 17:25:48.406: W/System.err(3294):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
01-19 17:25:48.406: W/System.err(3294):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
01-19 17:25:48.406: W/System.err(3294):     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
01-19 17:25:48.406: W/System.err(3294):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
01-19 17:25:48.406: W/System.err(3294):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
01-19 17:25:48.406: W/System.err(3294):     at java.lang.Thread.run(Thread.java:856)
01-19 17:25:48.406: W/System.err(3294): Caused by: libcore.io.GaiException: getaddrinfo failed: EAI_NODATA (No address associated with hostname)
01-19 17:25:48.414: W/System.err(3294):     at libcore.io.Posix.getaddrinfo(Native Method)
01-19 17:25:48.414: W/System.err(3294):     at libcore.io.ForwardingOs.getaddrinfo(ForwardingOs.java:55)
01-19 17:25:48.414: W/System.err(3294):     at java.net.InetAddress.lookupHostByName(InetAddress.java:411)
01-19 17:25:48.414: W/System.err(3294):     ... 23 more
01-19 17:25:48.469: D/dalvikvm(3294): GC_CONCURRENT freed 430K, 8% free 7011K/7559K, paused 2ms+3ms
01-19 17:25:48.734: D/OpenGLRenderer(3294): Flushing caches (mode 0) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T08:12:44.280

如日志：

> MalformedURLException：找不到协议：[Ljava.lang.String;@413191b8

因为目前您正在尝试将 [varags](http://java.sun.com/j2se/1.5.0/docs/guide/language/varargs.html)转换为 URL .change

```
 String website = url.toString();
  URL fullurl = new URL(website); 
```

至

```
 @Override
        protected String doInBackground(String...url) {
            // TODO Auto-generated method stub
            try {
                String website = url[0].toString();
                URL fullurl = new URL(website);
                 //..... 
```

# windows-8 - 设计器未在 Windows 8 pro 上的 Visual Studio 2012 速成版中加载

> ID：14412416
> 
> 赞同：1
> 
> 时间：2013-01-19T08:10:03.523
> 
> 标签：windows-8, visual-studio-2012, windows-phone-8, windows-phone

我最近在笔记本电脑上安装了 Windows 8 64 位专业版。之后我在上面安装了 Visual Studio 2012 速成版，然后我在网上注册了自己的开发人员许可证。

一切就绪，现在每当我创建一个新项目时说“新项目> Windows Phone App”

我的设计器从不加载，我收到以下错误消息...

> 发生了未处理的异常，
> 
> 单击此处重新加载设计器

但无论我重新加载设计器或重新启动 Visual Studio 或重新启动我的笔记本电脑多少次，这个错误都不会消失。

我在[这里粘贴](http://pastebin.com/pU6FWHgy)的整个异常。

![在此处输入图像描述](../Images/178d7aa9d92f166c562b768cd45a3467.png)

请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:26:25.100

**当我在Windows 8 - 64bit**和 Visual Studio 2012 Express上安装适用于手机的 Windows SDK 时，我也遇到了同样的问题。

对我有用的解决方案是：
1\. 卸载 VS 2012
2\. 从控制面板 -> 程序和功能列表中卸载所有 Silverlight 组件。
3.再次安装VS 2012和SDK for Phone

希望对你有帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-03T16:07:01.410

我遇到过同样的问题。它最终是Windows防火墙服务被禁用。我使用了备用防火墙，因此我禁用了该服务，因为我不使用它。一旦我启动 Windows 防火墙服务，然后在“具有高级安全性的 Windows 防火墙”中关闭防火墙，设计器就会加载并正常工作。

# c - 从 C 中不兼容的指针类型 [默认启用] 警告返回

> ID：14412419
> 
> 赞同：1
> 
> 时间：2013-01-19T08:10:19.237
> 
> 标签：c, gcc, incompatibility

当我调用这个函数时

```
 4 char *file_reader(FILE *fp, char *file_name, const char *mode) {
  5     char *buffer;
  6     fp = fopen(file_name, mode);
  7 
  8     if (fp != NULL) {
  9         fseek(fp, 0L, SEEK_END);
 10         long s = ftell(fp);
 11         rewind(fp);
 12         buffer = malloc(s);
 13         if (buffer != NULL) {
 14             fread(buffer, s, 1, fp);
 15             fclose(fp);
 16             fp = NULL;
 17         }
 18         if (fp != NULL)
 19             fclose(fp);
 20     } else {
 21         printf("No such file.\n");
 22         return "ERR";
 23     }
 24     return buffer;
 25 } 
```

经过

```
 char *file_content = file_reader(fp, input_file, "r"); 
```

gcc 一直在抱怨`return from incompatible pointer type [enabled by default]`，但我没有看到任何不兼容的指针类型。任何人对此有任何想法，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T00:14:49.827

“不兼容的指针类型”是*常量*字符串“ERR”的一种

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T08:18:20.917

作品。用`-Wall -Werror -Wextra -pedantic -std=c11`.

```
#include "stdio.h"
#include "stdlib.h"
FILE* fp;
char* input_file = "asdf.txt";
char *file_reader(FILE *fp, char *file_name, const char *mode) {
    char *buffer;
    fp = fopen(file_name, mode);
    if (fp != NULL) {
        fseek(fp, 0L, SEEK_END);
        long s = ftell(fp);
        rewind(fp);
        buffer = malloc(s);
        if (buffer != NULL) {
            fread(buffer, s, 1, fp);
            fclose(fp);
            fp = NULL;
        }
        if (fp != NULL)
            fclose(fp);
    } else {
        printf("No such file.\n");
        return "ERR";
    }
    return buffer;
}
int main() {
    char *file_content = file_reader(fp, input_file, "r");
    printf("%s\n", file_content);
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T08:18:56.063

这听起来像是在您进行调用时缺少 file_reader() 的原型。如果没有原型，`int`则假定为函数的返回类型。

要解决这个问题，您应该将函数的原型放在标头中，然后将其包含在内，或者在调用之前手动编写原型。所以你需要这个：

```
char *file_reader(FILE *fp, char *file_name, const char *mode); 
```

file_reader() 的另一个问题是您忘记设置它的`file_name`参数`const`。

# ruby - 在 ruby /sinatra 中读取 url 参数会丢弃特殊字符？

> ID：14412421
> 
> 赞同：0
> 
> 时间：2013-01-19T08:11:06.177
> 
> 标签：ruby, url, sinatra, url-parameters

我有一个如下网址：

`http://test.com:1111?langq=198&langname=C++`

当我阅读 ruby​​ 中的参数时，`params[:langname]`给了我`C`而不是`C++`. 在这种情况下，有没有一种简单的方法可以阻止 ruby​​ 这样做？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T08:57:55.237

对于 Sinatra 来说，这是一个持续存在的问题。见[https://github.com/sinatra/sinatra/issues/search?q=plus](https://github.com/sinatra/sinatra/issues/search?q=plus)

现在你必须对它们进行编码。

# asp.net - ASP.NET 会话不断死亡

> ID：14412426
> 
> 赞同：0
> 
> 时间：2013-01-19T08:11:44.167
> 
> 标签：asp.net, session, session-variables

我在使用 ASP.NET 会话时遇到了一个奇怪的问题，它每隔几分钟就会死掉一次。我在 web.config 中进行了更改，但问题仍然存在。

网络配置：

```
<system.web>
   <compilation debug="true" targetFramework="4.0"/>
   <customErrors mode="Off"></customErrors>
   <sessionState mode="InProc" timeout="900"></sessionState>

   <webServices>
     <protocols>
       <add name="HttpPost"/>
       <add name="HttpGet"/>
       <add name="HttpSoap"/>
     </protocols>
  </webServices>

</system.web> 
```

我也更改了 IIS 中的设置。我究竟做错了什么？如何使会话无休止？

# android - 替换已弃用的 Android 版 Facebook 代码

> ID：14412428
> 
> 赞同：6
> 
> 时间：2013-01-19T08:12:25.750
> 
> 标签：android, facebook, login, deprecated

我想知道没有弃用代码的以下代码的确切替换。此外，我想在新的 Facebook SDK 3.0 中尝试一下。

```
Facebook aFacebook = new Facebook("app_id");
if( !aFacebook.isSessionValid() ) {
    aFacebook.authorize(this, new String[] { "email" }, 
                        new LoginDialogListener());
} 
```

我尝试了很多东西。但是，没办法完成。

TIA

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-23T12:50:07.280

由于这个问题没有答案，我正在写一个。

在 3.0 Facebook SDK for Android 中，Session 类用于登录。最初，如问题中所述，使用了授权方法。

用作问题中提到的代码的确切替换的代码：

```
Session session = Session.getActiveSession();
    if (session == null) {
        session = new Session(getApplicationContext());
    }
Session.setActiveSession(session); 
```

# macos - 为 PowerPC 编译传输 2.76

> ID：14412429
> 
> 赞同：0
> 
> 时间：2013-01-19T08:12:31.383
> 
> 标签：macos, compiler-construction, open-source, powerpc, transmission

传输不再具有预编译的 PowerPC 支持，但它们仍然有可用的源代码。我尝试自己编译它，但收到错误消息“找不到 pkg-config 脚本或太旧......”有人知道我该如何编译它吗？或者某个地方的预编译版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T12:15:48.100

您需要先安装 pkg-config，这显然是传输的依赖项。

# java - Java 输出说明

> ID：14412433
> 
> 赞同：1
> 
> 时间：2013-01-19T08:12:43.877
> 
> 标签：java, output

代码

```
class Test {
    public static void main(String args[]) {
        StringBuffer a = new StringBuffer("A");
        StringBuffer b = new StringBuffer("B");
        modify(a, b);
        System.out.println(a + " " + b);
    }

    public static void modify(StringBuffer a, StringBuffer b) {
        a.append(b);
        a = b;
        System.out.println(a + " " + b);
    }
} 
```

我了解函数中的打印语句，`modify`并且我也知道`StringBuffer`类会就地修改字符串，因此`a.append(b)`使字符串引用“AB”。

我的问题是如何`String a`在函数外更改为“AB”，`modify`但语句在函数`a=b`外没有影响`modify`。**基本上，变量何时通过值传递，何时通过引用传递？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T08:14:00.620

`Java`始终使用按值传递。在引用的情况下，它是引用的值。传递引用时，可以更改引用所引用的对象，但分配给其他对象的引用没有任何后果。

因此，在您的情况下，`a`可以更改引用的对象，但不能将引用分配给其他对象（可以这样，但没有效果）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T08:26:33.320

这是一张简单的图片：

```
main                            modify

StringBuffer <------a           a
     ^                          |
     +--------------------------+

StringBuffer <------b           b
     ^                          |
     +--------------------------+ 
```

在`main`中，`a`和`b`都是指向单独的 StringBuffer 实例的引用。`main`调用时`modify`，它传递引用的*副本*`a`和`b`（按值传递）。 `modify`可以改变 StringBuffer 实例的内容，但如果改变 and 的值`a`，`b`它只对自己的本地副本进行操作，不会影响`main`'`a`和`b`指向的内容。

基本答案是*一切*都按值传递，但是在传递对象时，传递的是*引用*（按值），而不是对象本身。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T08:30:04.063

包含对象的变量实际上是对该对象的引用。因此，如果将其分配给另一个变量，则两个变量都引用同一个对象。

当您将变量传递给函数时，值将被传递。

在对象的情况下，传递的值是引用。

所以，你可以在 modify 中将 b 赋值给 a，但效果是引用 b 的本地值，之后它们都是一样的，并且引用对象 b。当您将 b 附加到 a 时，您正在修改变量 a 引用的对象。

# java - Java：将 CSV 文件转换为二进制文件

> ID：14412436
> 
> 赞同：1
> 
> 时间：2013-01-19T08:12:45.990
> 
> 标签：java, database, csv, binary

这是我在数据库课程中作业的问题之一。

我不明白为什么我们需要将 csv 文件转换为二进制文件。我认为这种方式会使搜索数据变得更加困难。谁能告诉我为什么我们需要这样做？我的老师是在愚弄我还是将 csv 文件转换为二进制文件以便使用二进制搜索方法读取真的更好。csv文件的一行的示例是

```
1|37|O|131251.81|1996-01-02|5-LOW|Clerk#000000951|0|nstructions sleep furiously among 
```

这是老师给我的作业。我真的被困在任务C上。

概述 本作业的目的是帮助您了解查询大型数据集所涉及的问题，这些数据集太大而无法完全放入内存中。为了调查这些问题，您将编写一个 Java 程序来读取 CSV 文件形式的数据表，并尽可能高效地对表运行查询。提供了程序模板，您的代码应添加到 Assignment1.java 文件中。提供了一个驱动程序 Driver.java，以便您可以测试您的程序。驱动程序将包含要由程序解释和执行的命令列表的文件作为输入。您将以引导的方式实施该程序的多个版本。在所有版本中，您必须假设数据可能不适合内存，即

在所有版本中，命令的基本顺序都是从加载数据开始，然后是一系列查询，这些查询要么是相等查询，要么是范围查询。你可以假设输入是正确的并且表现良好，即这个赋值的目标不是错误处理。任务 A（15 分） 在第一个版本中，您将实现最简单和最幼稚的解决方案。您的 java 程序支持的命令列表必须包括以下内容：

naiveLoad 文件名：告诉程序以下查询将针对具有文件名的 csv 文件 naiveSearchEq columnNum 值：打印表中列号 columnNum 中的值等于给定值的行。列号从一开始。naiveSearchGtr columnNum 值：打印表中列号 columnNum 中的值大于给定值的行。

搜索命令应通过使用 java 类 FileReader 逐字符读取 CSV 文件来实现。您应该阅读 FileReader、InputStreamReader 等的 java 文档。您必须使用 FileReader 类。任务 B（15 分） 在第二个版本中，您将通过使用缓冲 IO 对第一个版本进行改进。使用 BufferedReader 类编写第二个版本的搜索命令。命名命令和对应的方法如下：

naiveBufSearchEq columnNum 值：打印表中列号 columnNum 中的值等于给定值的行。列号从一开始。naiveBufSearchGtr columnNum value：打印列号 columnNum 中的值大于给定值的表的行。

任务 C（50 分）

在第三个版本中，您将采用不同的方法来解决问题。您将首先加载 CSV 数据文件并将其转换为 BINARY 文件。您必须将二进制文件命名为“data.bin”。随后的查询将对二进制文件进行操作。您可以自由设计二进制文件的格式。命名命令和对应的方法如下：

binaryLoad 文件名：将带有文件名的 csv 文件转换为二进制文件。二进制文件的文件名应该存储在您的程序中。binarySearchEq columnNum 值：打印表中列号 columnNum 中的值等于给定值的行。列号从一开始。binarySearchGtr columnNum 值：打印表中列号 columnNum 中的值大于给定值的行。

任务 D（20 分） 计算程序版本 1、2 和 3 的时间并比较运行时间。您应该对至少 10 次运行的时间进行平均。在 laulima 的在线提交中，回答以下问题：

```
Tabulate the average running time of the three versions of your program. Compare the running times of the three versions.
How are the timings of the different versions different?
Why are the timings of the different versions different ?
What did you learn in this assignment? What was most difficult/challenging (if any)? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T08:44:08.727

鉴于更新的目标，我将通过文件并在键上构建***排序索引***。索引将包含键值和具有该键的每条记录的偏移量。然后我会编写一个新文件，该文件由索引和原始数据组成。如果允许使用两个文件，只需将索引作为单独的文件写入磁盘。

索引将比原始文件小得多。当您需要搜索时，仅读取索引部分（或文件），使用二进制搜索查找键，从索引条目中检索偏移量，并使用该偏移量查找数据并仅读取该记录。

如果索引太大而无法放入 RAM，那么您必须分两步构建它。

1.  读取数据文件写入索引文件，* *un* *sorted，一次一条记录
2.  使用磁盘排序实用程序对索引进行排序

# javascript - 如何调试使用 Testacular (Karma) 运行的 Jasmine 规范？

> ID：14412437
> 
> 赞同：12
> 
> 时间：2013-01-19T08:13:04.173
> 
> 标签：javascript, jasmine, karma-runner

我有一个 Jasmine 规格的小项目，我使用 Testacular 作为我的测试运行器。我不明白如何调试应用程序代码或规范代码。当我尝试在 Chrome 开发工具中设置断点时，它不会在下次运行规范时被命中，因为它每次都使用新的查询字符串加载文件。

到目前为止，我发现最好的方法是使用 console.log()，但我更愿意使用 Chrome 开发工具断点。

（我正在使用 Visual Studio 2012 进行开发。）

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-24T06:41:32.650

Testacular 不是用于调试的最佳工具。它的强大之处在于它可以在多个浏览器中运行您的测试，并且执行速度非常快，并且可以在您每次更改文件时执行此操作，因此它会告诉您是否破坏了测试。但是如果你需要调试，它不是最好的工具。

您确实可以在您的代码中放置一个“调试器”语句以使其中断，但如果这是在多个测试中命中的常见代码行，您最终可能会在测试中多次或多次命中相同的断点。也许它只在一个给定的场景中中断，所以你必须跳过所有断点，除了你看到问题的那一次。如果您使用的是 mocha 或 jasmine，有一种方法可以在整个测试套件中只运行一个测试。使用 jasmine 将测试从 it() 更改为 iit()，使用 mocha 就是 it.only()。但即便如此，睾丸仍然是这项工作的错误工具。

一个更好的解决方案是使用不同的测试“设置”并只运行正在破坏的单个测试。这很容易使用 jasmine 或 mocha 或任何您选择的测试框架来完成。由于 testacular 是一种自动化工具而不是测试框架，因此您已经在其中一个框架中编写了 testacular 测试。因此，只需创建一个测试运行程序文件并使用它，加载文件，如果您使用的是 chrome，请进入开发工具，在 MAC 上按 Command-O 或在 Windows 上按 Control-O，然后选择您想要的文件放一个断点，设置你的断点，你正在用煤气做饭。

在您的测试框架中使用传统的“测试运行程序”根本不会与使用 testacular 发生冲突。两个人会一起快乐地奔跑。

以下是我在主要 3 个测试框架中执行此操作的首选文章的链接：

茉莉花： http: [//net.tutsplus.com/tutorials/javascript-ajax/testing-your-javascript-with-jasmine/](http://net.tutsplus.com/tutorials/javascript-ajax/testing-your-javascript-with-jasmine/)

QUnit：[http ://www.testdrivenjs.com/getting-started/qunit-setup/](http://www.testdrivenjs.com/getting-started/qunit-setup/)

摩卡：我没有链接到一个好文章的链接。到 2013 年 2 月中旬，我的 PluralSight,com 测试客户端 JavaScript 课程将发布，您可以在那里找到它，以及设置 QUnit 和 Jasmine 的详细说明。他们有一个简短的免费试用版，您可以使用它来查看内容而无需付费。此 URL 将在该课程发布时链接到该课程。 [http://pluralsight.com/training/Au​​thors/Details/joe-eames](http://pluralsight.com/training/Authors/Details/joe-eames)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-19T08:44:58.990

您可以单独使用该语句`debugger;`，只要开发人员工具面板打开并启用断点，Chrome 就会中断该语句。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-10-23T12:48:26.313

我最喜欢使用 Karma（是 Testacular）调试测试的方法是使用这个插件：

*   [https://github.com/dfederm/karma-jasmine-html-reporter](https://github.com/dfederm/karma-jasmine-html-reporter)

我像这样启动 Karma：

```
karma start karma.conf.js --browsers=Chrome --single-run=false --reporters=kjhtml 
```

这将使用“调试”按钮以调试模式打开 Karma。当您单击它时，它会在 Chrome 窗口中运行所有测试，并在经过时显示结果。此时，您可以正常使用开发人员工具、设置断点、单步执行代码等。

更好的是，您可以单击失败的测试，它将切换到只运行该测试的模式。现在，您可以快速测试和调试该一项测试，而无需等待所有其他测试运行。

要查看实际情况，这是一个 GitHub 拉取请求，我在其中将此库添加到我们的项目中：

[https://github.com/edx/edx-ui-toolkit/pull/12](https://github.com/edx/edx-ui-toolkit/pull/12)

# sml - 查看 SML 完整列表

> ID：14412439
> 
> 赞同：3
> 
> 时间：2013-01-19T08:13:36.493
> 
> 标签：sml

有没有办法使用 SML 打印完整列表？

通常在 SML 中发生的情况是，当我有太多元素时，它会打印由“，”分隔的前几个元素，然后它会省略列表的其余部分，`...`但我想查看完整列表。有没有办法做到这一点？

```
val a =[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,18,19,20] 
```

然后如果我在 REPL 上写`a`它会返回类似：

```
a=[1,2,3,4,5,...] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-19T09:13:15.343

假设您使用的是 SML/NJ。

您不想自定义的是[Control.Print](http://www.smlnj.org/doc/Compiler/pages/printcontrol.html)中的参考值。在这种情况下，您不想将值更改为`printLength`更大的值，例如

```
Control.Print.printLength := 100; 
```

一般来说，它是`print*`您不想更改的参考。`stringDepth`但是对于字符串，出于某种原因，他们选择调用它。

* * *

假设您使用的是 MosML。

从[Moscow ML Language Overview](http://www.itu.dk/people/sestoft/mosml/mosmlref.pdf)中描述了 Meta 单元暴露了这两个功能（以“控制交互系统”）

```
val printDepth : int ref  (* limit printed data depth *)
val printLength : int ref (* limit printed list and vector length *) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-19T09:18:32.823

我假设您使用的是 Poly/ML。该函数`PolyML.print_depth`表示在任何结构中应该进行多深的打印（包括列表）。将其更改为更大的内容：

```
PolyML.print_depth 500 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-20T11:20:17.457

此输出仅用于调试，虽然很方便，但不是这样做的正确方法（如果生成可执行文件，则不会从运行可执行文件中得到它）。要打印出与您选择的 ML 提示中设置的打印限制无关的所有元素，您可以执行以下操作：

```
fun listToString [] = "[]\n"
|   listToString (c::l) =
        "[" ^ (Int.toString c)
        ^ foldl (fn (s1, s2) => s2 ^ ", " ^ s1) "" (map (Int.toString) l)
        ^ "]\n"
val _  = print (listToString a) 
```

# c++ - 如何将 flex 和 bison 与 Qt 项目集成？

> ID：14412446
> 
> 赞同：5
> 
> 时间：2013-01-19T08:14:54.760
> 
> 标签：c++, qt, qt4, bison, flex-lexer

我正在 git 源代码控制（[Github 页面](https://github.com/vinayak-garg/dic-sim)）下使用 Qt4 制作一个 GUI 程序。一小部分项目需要扫描和解析。所以我想在项目中使用 flex 和 bison。我可以想到3种方法-

1.  将 flex 和 bison 文件排除在项目和源代码控制之外。生成 C 源文件并将其添加到项目中。
2.  将 flex 和 bison 文件添加到项目中，但单独运行 flex 和 bison 命令。
3.  与 IDE（Ubuntu 12.04 上的 Qt Creator）和源代码控制正确集成，以便在我构建 flex 时调用 bison 来生成词法分析器和解析器。

我显然想要第三种选择，但不知道该怎么做。

请建议最好的选择和方法。或者还有其他方法可以做到吗？

注意 - 我希望项目是跨平台的，也可以为 Windows 构建。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T14:14:40.093

通过关注@Bort 评论中的链接，我能够很好地将 Flex 和 Bison 与我的 Qt 项目集成。我在项目设置中添加了自定义构建步骤。下面是 Qt Creator 中的屏幕截图。

![在此处输入图像描述](../Images/c9a3af0975f4641072e22c8efa14fc59.png)

我问了一个相关的问题 -[即使函数存在未定义的引用错误](https://stackoverflow.com/q/14482338/558094)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-03-12T00:32:33.193

我无法在他的回答中找到*Qt Creator*配置页面 @VinayakGarg 引用。

一种解决方案（从[这里](https://jonmacey.blogspot.com/2012/03/using-flex-with-qt.html)）是直接编辑`.pro`文件。这对我有用。

```
### For building the gnu flex part
FLEXSOURCES += my_lex_sourcefile.l
flex.input = FLEXSOURCES
flex.output = ${QMAKE_FILE_BASE}.c
flex.commands = flex  -o ${QMAKE_FILE_IN_BASE}.c ${QMAKE_FILE_IN}
flex.variable_out = SOURCES
flex.CONFIG += target_predeps
flex.clean =  ${QMAKE_FILE_IN_BASE}.c
flex.name = flex
# finally add this to the qmake project so it will have the makefile generated
QMAKE_EXTRA_COMPILERS += flex 
```

哪里（显然）`my_lex_sourcefile.l`是你的弹性输入文件名。

应在该行上添加任何额外的命令行选项`flex.commands`。

参考：[https ://jonmacey.blogspot.com/2012/03/using-flex-with-qt.html](https://jonmacey.blogspot.com/2012/03/using-flex-with-qt.html)

# c# - MVC 4 中的部分实体类未显示数据注释

> ID：14412468
> 
> 赞同：4
> 
> 时间：2013-01-19T08:18:40.677
> 
> 标签：c#, entity-framework-4, asp.net-mvc-4, data-annotations

我已经看到了许多关于如何通过部分类将元数据注释添加到通过实体框架生成的类（**数据库优先**）的解释。

有人能告诉我为什么这些新的显示值没有显示在我的视图中吗？这两个都是与我的实体框架生成的类相同的命名空间的一部分。

```
[MetadataType(typeof(xRef_CodesMetadata))]
        public partial class xRef_Codes
        {
        }

public class xRef_CodesMetadata
    {
        public int CodeID { get; set; }
        public int CTB_ID { get; set; }

        [Required(ErrorMessage = "Please type a name")]
        [Display(Name = "Code Name")]
        [Column(TypeName = "Code Name")]
        public string CodeName { get; set; }

        [Required(ErrorMessage = "Please type a Description")]
        [Display(Name = "Description")]
        [Column(TypeName = "Description")]
        public string Description { get; set; }     
    } 
```

视图片段：

```
<th>
    @Html.DisplayNameFor(model => model.OfCodeID)
</th>
<th>
    @Html.DisplayNameFor(model => model.CodeName)
</th>
<th>
    @Html.DisplayNameFor(model => model.Description)
</th> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T07:10:33.623

这已经解决了！我已经查看了 30 篇或 40 篇关于为什么这个实体框架“数据库优先”部分类不起作用的教程。然后我发现这篇文章给出了以下建议：

> 对不起，这太晚了，但我自己解决了一个类似的场景。我相信这条线
> 
> [元数据类型(typeof(CompanyMD))]
> 
> 属于由 EF 生成的部分类，即使当您更改模型时它将被删除。因此，您的 EF 生成的文件应如下所示：

要查看帖子的其余部分，请转到此链接... [MVC 4 EF5 数据库首先在部分类中设置默认值](https://stackoverflow.com/questions/13616791/mvc-4-ef5-database-first-set-default-values-in-partial-class)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-23T19:05:00.280

这可能会或可能不会帮助其他人，但在遵循本教程之后（[https://docs.microsoft.com/en-us/aspnet/mvc/overview/getting-started/database-first-development/enhancing-data-validation](https://docs.microsoft.com/en-us/aspnet/mvc/overview/getting-started/database-first-development/enhancing-data-validation)） .

我也有类似的问题，即我的元数据没有反映在我的观点中。对我来说，解决方案是让我的元数据类与我的 .edmx 文件位于相同的命名空间中，这一行是关键“...，并且每个都与自动生成的类的名称和命名空间相匹配。”

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-19T08:56:41.953

您还必须如下声明`xRef_CodesMetadata`类`partial`。

```
public partial class xRef_CodesMetadata
        {
            public int CodeID { get; set; }
            public int CTB_ID { get; set; }

            [Required(ErrorMessage = "Please type a name")]
            [Display(Name = "Code Name")]
            [Column(TypeName = "Code Name")]
            public string CodeName { get; set; }

            [Required(ErrorMessage = "Please type a Description")]
            [Display(Name = "Description")]
            [Column(TypeName = "Description")]
            public string Description { get; set; }     
        } 
```

可能对您[**从现有数据库生成 EF Code First 模型类**](http://weblogs.asp.net/jgalloway/archive/2011/02/24/generating-ef-code-first-model-classes-from-an-existing-database.aspx)以及[**为数据和模型优先实体添加注释很有用**](http://www.oakwoodinsights.com/adding-annotations-data-model-first-entities/)

我希望这对你有帮助。

# jquery - 多个 jQuery 函数协同工作

> ID：14412475
> 
> 赞同：0
> 
> 时间：2013-01-19T08:20:28.287
> 
> 标签：jquery, document-ready

这是使用多个 jQuery 脚本的正确方法吗？有些在同一个 .js 文件中，但是，即使有多个 .js 文件，似乎我能让它们同时工作的唯一方法是`jQuery.noConflict()`专门为每个文件声明一个变量，然后替换所有`$`具有该变量的实例。

这不可能是正确/最好的方法：不是吗？

我在下面提供了一个示例，一切正常，但这对我来说似乎不是“正确”的方式。

HTML：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="/js/jquery-1.8.2.min.js"><\/script>')</script>
<script src="/js/test.js"></script>
<script src="/js/shareit.js"></script>
<script>var $share = jQuery.noConflict();$share(document).ready(function(){$share('.sharer').sharer();});</script> 
```

test.js 是：

```
/*faq stuff*/
var $zfaqs = jQuery.noConflict();
$zfaqs(document).ready(function () {    
$zfaqs('.faq dd').hide(); // Hide all DDs inside .faqs
$zfaqs('.faq dt').click(function(){$zfaqs(this).toggleClass('active')}); // add/remove active class on click
$zfaqs('.faq dt').click(function(){$zfaqs(this).next().slideToggle('fast')}); // toggle answer
});

/*new window link*/
var $zopen = jQuery.noConflict();
$zopen(document).ready(function() {
$zopen("a[data-window='external']").on('click', function() {
    window.open($zopen(this).attr('href')); 
    return false; 
});
});

/*fading text*/
var $zfader = jQuery.noConflict();
$zfader(document).ready(function(){
$zfader('.fadethis .fade');
    setInterval(function(){
        $zfader('.fadethis .fade').filter(':visible').fadeOut(2000,function(){
            if($zfader(this).next('.fade').size()){
                $zfader(this).next().fadeIn(1000);
            }
            else{
                $zfader('.fadethis .fade').eq(0).fadeIn(1000);
            }
        });
    },10000);   
}); 
```

编辑：

好的，我已经改成以下了。仍然有点困惑，但我到了那里。我知道使用 $(document).ready(function() { 基本上说等到页面加载然后运行代码 - 对吗？话虽如此，我已经进行了以下更改。

在 test.js 中，我将所有代码包装在一个 document.ready 中并对其进行了清理。

现在大家怎么看？现在这是为了纠正标准吗？

HTML

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="/js/jquery-1.8.2.min.js"><\/script>')</script>
<script src="/js/test.js"></script>

<script src="/js/jquery.colormodal-min.js"></script>
<script>$(document).ready(function(){$("a[data-modal^='gss']").each(function(){$(this).colormodal({rel:$(this).attr('data-modal')});});$("a[data-modal='ss']").colormodal({rel: 'nofollow'});$("a[data-modal='no']").colormodal({title: ' ',rel: 'nofollow'})});</script>

<script src="/js/shareit.js"></script>
<script>$(document).ready(function(){$('.sharer').sharer();});</script> 
```

test.js

```
/*twitter stuff*/
$(document).ready(function() {
$.getJSON('http://api.twitter.com/1/statuses/user_timeline/testing.json?count=1&callback=?', function(tweets){
$("#twitter").html(tz_format_twitter(tweets));
});

function tz_format_twitter(twitters) {
var statusHTML = [];
for (var i=0; i<twitters.length; i++){
var username = twitters[i].user.screen_name;
var status = twitters[i].text.replace(/((https?|s?ftp|ssh)\:\/\/[^"\s\<\>]*[^.,;'">\:\s\<\>\)\]\!])/g, function(url) {
  return '<a href="'+url+'">'+url+'</a>';
}).replace(/\B@([_a-z0-9]+)/ig, function(reply) {
  return  reply.charAt(0)+'<a href="http://twitter.com/'+reply.substring(1)+'">'+reply.substring(1)+'</a>';
});
statusHTML.push('<span>'+status+'</span> <br/><b><a href="http://twitter.com/'+username+'/statuses/'+twitters[i].id_str+'">'+relative_time(twitters[i].created_at)+'</a></b>');
}
return statusHTML.join('');
}

function relative_time(time_value) {
var values = time_value.split(" ");
time_value = values[1] + " " + values[2] + ", " + values[5] + " " + values[3];
var parsed_date = Date.parse(time_value);
var relative_to = (arguments.length > 1) ? arguments[1] : new Date();
var delta = parseInt((relative_to.getTime() - parsed_date) / 1000);
delta = delta + (relative_to.getTimezoneOffset() * 60);

if (delta < 60) {
return 'less than a minute ago';
} else if(delta < 120) {
return 'about a minute ago';
} else if(delta < (60*60)) {
return (parseInt(delta / 60)).toString() + ' minutes ago';
} else if(delta < (120*60)) {
return 'about an hour ago';
} else if(delta < (24*60*60)) {
return 'about ' + (parseInt(delta / 3600)).toString() + ' hours ago';
} else if(delta < (48*60*60)) {
return '1 day ago';
} else {
return (parseInt(delta / 86400)).toString() + ' days ago';
}
}

/*faq stuff*/   
$('.faq dd').hide(); // Hide all DDs inside .faqs
$('.faq dt').click(function(){$(this).toggleClass('active')}); // add/remove active class on click
$('.faq dt').click(function(){$(this).next().slideToggle('fast')}); // toggle answer

/*new window link*/
$("a[data-window='external']").on('click', function() {
    window.open($(this).attr('href')); 
    return false; 
});

/*fading text*/
setInterval(function(){
    $('.fadethis .fade').filter(':visible').fadeOut(2000,function(){
        if($(this).next('.fade').size()){
            $(this).next().fadeIn(1000);
        }
        else{
            $('.fadethis .fade').eq(0).fadeIn(1000);
        }
    });
},10000);

/*end document ready stuff*/
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T08:40:10.083

Try not using `noConflict()` at all, and to not have more than one `$(function(){` per location such as

```
<script>
  $(function(){
    $('.sharer').sharer();
  });
</script> 
```

and

```
/*faq stuff*/

$(function(){   
  $('.faq dd').hide(); // Hide all DDs inside .faqs
  $('.faq dt').click(function(){$(this).toggleClass('active')}); // add/remove active class on click
  $('.faq dt').click(function(){$s(this).next().slideToggle('fast')}); // toggle answer

  /*new window link*/

  $("a[data-window='external']").on('click', function() {
    window.open($(this).attr('href')); 
    return false; 
  });

  /*fading text*/
  $('.fadethis .fade');  //(not sure what the purpose of this line is)
  setInterval(function(){
    $('.fadethis .fade').filter(':visible').fadeOut(2000,function(){
      if($(this).next('.fade').size()){
        $(this).next().fadeIn(1000);
      }
      else{
        $('.fadethis .fade').eq(0).fadeIn(1000);
      }
    });
  },10000); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T08:42:30.327

Let's consider:

```
console.log($); // Will be defined as a jQuery() shorthand
jQuery.noConflict();
console.log($); // Will be undefined 
```

What happens is that jQuery will automatically "take" the `$` function shorthand from the global scope, ie, `window.$` will become shorthand for `window.jQuery`.

So, when we call `jQuery.noConflict()` we are *primarily* **releasing** `window.$` back to the wild, in case it conflicts with another framework or library which also uses it (there are several others, MooTools is one).

So the following:

```
var $zfaqs = jQuery.noConflict();
$zfaqs(document).ready(function () { 
    ...
});

var $zopen = jQuery.noConflict();
$zopen(document).ready(function() {
    ...
});

var $zfader = jQuery.noConflict();
$zfader(document).ready(function(){
    ...
}); 
```

You're simply releasing (over and over) `$` and then creating a *new* global reference to `jQuery` to use within that block that follows. `$zfaqs` should work every time. Unless they are included in a different order each time or whatnot.

As far as what your code is attempting to do, you could accomplish it without the global returned reference to `jQuery` that `jQuery.noConflict()` returns. For instance:

```
jQuery(document).ready(function ($) {
    $('#jQuery-ready').click(function () {
        console.log(this.id);
    });
});

jQuery(function ($) {
    $('#jQuery-only').click(function () {
        console.log(this.id);
    });
});

(function ($) {
    $(document).ready(function ($) {
        $('#Function-initializer').click(function () {
            console.log(this.id);
        });
    });
})(jQuery); 
```

[http://jsfiddle.net/userdude/D6ANv/1](http://jsfiddle.net/userdude/D6ANv/1)

And I do not have to do anything like `var $jjq = jQuery.noConflict()` *globally* and then reference those within my `onDOMReady` handlers, I can simply continue to use `$` shorthand within those scopes, as long as I am not then trying to use another global `$` that is not jQuery.

# android - 将包含标签与已经存在的 GridView 一起使用

> ID：14412482
> 
> 赞同：1
> 
> 时间：2013-01-19T08:21:10.323
> 
> 标签：android, android-layout, user-interface

我在 xml 中创建了一个用于所有活动的操作栏。我`include`为它使用了标签。
我的一项活动只​​有一个`GridView`标签。你可以在下面看到它的来源：

```
<?xml version="1.0" encoding="utf-8"?>
<GridView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/gv_level"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="1"
    android:background="@drawable/background_gradient"
    android:columnWidth="100dp"
    android:gravity="center"
    android:numColumns="auto_fit"
    android:stretchMode="columnWidth" >
</GridView> 
```

它没有任何问题，但是当我将`include`标签或任何其他标签添加到此时（类似于下面的源代码）

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

<include
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_weight="0"
    layout="@layout/action_bar" />

<GridView
    android:id="@+id/gv_level"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="1"
    android:background="@drawable/background_gradient"
    android:columnWidth="100dp"
    android:gravity="center"
    android:numColumns="auto_fit"
    android:stretchMode="columnWidth" >
</GridView> 
```

它不会给我一个错误，但是`GridView`当活动出现时它是隐藏的。这个问题有解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T09:19:56.630

> 但是当活动出现时，gridview 是隐藏的。它有蚂蚁解决方案吗？谢谢。

您可能希望将 的*方向*`LinearLayout`设置为垂直*，*这样您的包含布局就不会推动`GridView`右侧屏幕的外部，或者您可以使用`wrap_content`包含布局的宽度。使用方向变化：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    android:orientation="vertical" >

<include
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_weight="0"
    layout="@layout/action_bar" />
// ... rest of the layout 
```

# lwuit - 在 LWUIT 中将焦点应用于文本字段

> ID：14412484
> 
> 赞同：1
> 
> 时间：2013-01-19T08:21:19.043
> 
> 标签：lwuit

我创建了一个自定义键盘，`LWUIT`如下所示。我放置了一个文本字段并从“AZ”放置按钮，并为每个按钮添加了动作监听器，以便它显示在文本字段中。现在我的问题是没有可用的焦点。如果我需要在一个单词的中间编辑一个字母，除了删除之前的所有字母并更正它之外，别无他法。所以我的问题是如何在文本字段中实现焦点指针，以便我可以在任何地方更改任何字母。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T09:06:21.073

您可以创建 FocusListener 并实现您想要的，然后使用函数 add lisitner to text field ：

```
textFiledInstance.addFocusListener(Focus Listner instance) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T15:33:51.037

如果您想创建自定义 VirtualKeyboard，我建议您使用资源编辑器。

你必须看看这个 [LWUIT VKB](http://lwuit.blogspot.com.es/2010/06/pimp-virtualkeyboard-by-chen-fishbein.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T10:48:03.090

你是说在 LWUIT 的虚拟键盘中移动光标吗？

您需要做的就是触摸 VKB 中的字段，而不是正在编辑的文本字段（这将关闭 VKB）。这将移动光标。

# vba - 使用 range.text 在 Visual Basic 中创建目录

> ID：14412489
> 
> 赞同：0
> 
> 时间：2013-01-19T08:22:10.010
> 
> 标签：vba

我想使用段落中的字符串在 Microsoft Word VB 中创建一个新目录，但它是整个段落。它必须包含一个结束行字符，因此发生了路径名错误，使用 Mid，我从 range.text 中删除了最后一个字符。这是一些代码

```
Sub newDir()
    'Take the text in a paragraph selected by index and create a folder
    'MkDir ("C:\MainFolder\" & Mid(ActiveDocument.Paragraphs(2).Range.Text, 1, Len(ActiveDocument.Paragraphs(2).Range.Text) - 1))
End Sub 
```

这种方式有效。有谁知道清理一串此类字符的更好方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T09:42:31.627

更一般地说，您需要执行清理并从字符串中删除不允许的字符，这将是文件夹名称。一旦我在类似的情况下遇到同样的麻烦 - 使用主题作为名称保存来自 Outlook 的数百封电子邮件。以下是 2 种方法，均使用**RegEx**：

*   使用以下模式创建不可接受的字符列表：

    ```
    RegX_NAChars.Pattern = "[\" & Chr(34) & "\!\@\#\$\%\^\&\*\(\)\=\+\|\[\]\{\}\`\'\;\:\<\>\?\/\,]" 
    ```

`Chr(34)`是双引号，由于显而易见的原因，不可能直接列出它。对于您的特定情况，您应该添加到列表中，即所谓的“新行”字符以及使用`"[start of pattern]" & "\" & Chr(10) & "\" & Chr(13) & "[rest of pattern]"`. 模式中字符的顺序无关紧要。

*   相反的方法是声明允许的字符列表并删除所有其余的：

    ```
    RegX_NAChars.Pattern = "[^\w \-.]" 
    ```

上述模式意味着所有**BUT**拉丁字母、数字、空格、点和连字符都将被替换/删除。

这两种方法各有利弊，但我认为主要原因是：

1.  **当目标是尽可能保留原始字符串时，应使用**不允许的字符。****
***   **当名称不那么重要时，应使用**允许的字符列表，但保存任何没有错误的文件是#1 目标。******

 ****这是 RegEx 使用的相关代码：

```
 Dim RegX_NAChars As Object

    Set RegX_NAChars = CreateObject("VBScript.RegExp")
    RegX_NAChars.Pattern = [**use any of the above**]
    RegX_NAChars.IgnoreCase = True
    RegX_NAChars.Global = True
    ........[**your code**]........
    RegX_NAChars.Replace(String_to_Cleanup, "") 
```

`RegX_NAChars.Replace`上面将用定义的替换字符串替换所有匹配的字符。在我的情况下，它是`""`- 空字符串，这意味着字符被丢弃。将其替换为任何内容（当然，文件夹名称字符也必须允许这些字符 - 例如 use `_`）。

阅读更多关于正则表达式：http: [//www.jose.it-berater.org/scripting/regexp/regular_expression_syntax.htm](http://www.jose.it-berater.org/scripting/regexp/regular_expression_syntax.htm)****

# android - Android Manifest 文件中的兼容标签

> ID：14412493
> 
> 赞同：1
> 
> 时间：2013-01-19T08:23:02.873
> 
> 标签：android

```
<compatible-screens >
        <screen android:screenSize="small" android:screenDensity="ldpi"/>
    </compatible-screens> 
```

我编写此代码仅支持**240x320**屏幕分辨率。它正在根据我的需要进行过滤。但现在我希望这个 .apk 文件也支持**240x400**和**240x432**屏幕分辨率。

现在是否可以将此标记也添加到上述现有代码中：

```
 <screen android:screenSize="normal" android:screenDensity="ldpi"/> 
```

所以使用这个apk我们可以支持所有三种屏幕分辨率。因为我已经使用多个 apk 完成了这个应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T08:30:17.013

是的，您可以这样做：

```
 <compatible-screens>
        <!-- all small size screens -->
        <screen android:screenSize="small" android:screenDensity="ldpi" />
        <screen android:screenSize="small" android:screenDensity="mdpi" />
        <screen android:screenSize="small" android:screenDensity="hdpi" />
        <screen android:screenSize="small" android:screenDensity="xhdpi" />
        <!-- all normal size screens -->
        <screen android:screenSize="normal" android:screenDensity="ldpi" />
        <screen android:screenSize="normal" android:screenDensity="mdpi" />
        <screen android:screenSize="normal" android:screenDensity="hdpi" />
        <screen android:screenSize="normal" android:screenDensity="xhdpi" />
    </compatible-screens> 
```

检查此参考以获得更好的解释：

[兼容屏幕](http://developer.android.com/guide/topics/manifest/compatible-screens-element.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T08:30:57.817

试试这个会更好

```
 <compatible-screens>
    <!-- all small size screens -->
    <screen android:screenSize="small" android:screenDensity="ldpi" />
    <screen android:screenSize="small" android:screenDensity="mdpi" />
    <screen android:screenSize="small" android:screenDensity="hdpi" />
    <screen android:screenSize="small" android:screenDensity="xhdpi" />
    <!-- all normal size screens -->
    <screen android:screenSize="normal" android:screenDensity="ldpi" />
    <screen android:screenSize="normal" android:screenDensity="mdpi" />
    <screen android:screenSize="normal" android:screenDensity="hdpi" />
    <screen android:screenSize="normal" android:screenDensity="xhdpi" />
</compatible-screens> 
```

欲了解更多信息，试试[这个](http://developer.android.com/guide/practices/screen-compat-mode.html)

[http://developer.android.com/guide/topics/manifest/compatible-screens-element.html](http://developer.android.com/guide/topics/manifest/compatible-screens-element.html)

# c++ - C++：从向量中获取值

> ID：14412496
> 
> 赞同：1
> 
> 时间：2013-01-19T08:23:35.903
> 
> 标签：c++, vector

我有一个函数，我将指针传递给 unsigned char 向量。

有人可以告诉我如何获取函数内的值之一吗？

```
double CApp::GetCost(unsigned char *uBytes)
{
   unsigned char iHP;
   iHP=uBytes[49]; //this does not work
} 
```

编辑：对不起，我首先认为我应该简化我的代码，但我认为太多可能会出错。现在这是真正的声明：

```
// ---------------------------------------
struct ByteFeature
{
    unsigned char Features[52];
};

class clsByteFeatures : public CBaseStructure
{
private:
   vector<ByteFeature> m_content;

protected:
   virtual void ProcessTxtLine(string line);

public:
   vector<ByteFeature> &Content();
   void Add(ByteFeature &bf);
};

vector<ByteFeature> &clsByteFeatures::Content()
{
   return m_content;
} 
```

这就是我使用它的方式：

```
dblTargetCost  = GetCost(m_ByteFeatures.Content()[iUnitID].Features); 
```

另一个问题：像这样简单地传递向量会很糟糕吗？

```
double CApp::GetCost(vector<unsigned char> &uBytes)
{
  //...
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T08:33:20.617

```
Would it be bad to simply pass the vector like this?
double CApp::GetCost(vector<unsigned char> &uBytes) 
```

不是通过引用传递它的更好方法。但是，如果您不想`uBytes`被修改，您可能需要添加 const 限定符。

```
double CApp::GetCost(const vector<unsigned char> &uBytes)
{
   try
   {
     unsigned char iHP = uBytes.at(49);
     //... 
   }
   catch(std::exception& e)
   {
     // process e
   }
   //...
} 
```

编辑：

在您发布新帖子后，我觉得您只需返回对 m_content 元素的引用，然后将引用传递给`GetCost`函数

```
ByteFeature& clsByteFeatures::operator[](int i) { return m_content.at(i); }

double GetCost(const ByteFeature& bf)
{
    std::cout << bf.Features[49]; << std::endl;
    return 0.0;
} 
```

然后你打电话：

```
GetCost(m_ByteFeatures[iUnitID]); 
```

# javascript - HTML5 WebWorker 逻辑流程

> ID：14412500
> 
> 赞同：1
> 
> 时间：2013-01-19T08:24:43.037
> 
> 标签：javascript, html, web-worker

所以我有这个主要的js文件：

```
var worker = new Worker("../Scripts/worker.js");
worker.onmessage = function (event) {
    alert("Worker said : " + event.data);
};
worker.postMessage("Naruto");
worker.postMessage("Sakura"); 
```

worker.js 在这里：

```
self.onmessage = function (event) {
      self.postMessage("Hi " + event.data);
};

self.postMessage("WHERE'S SASUKE? [1]");
self.postMessage("WHERE'S SASUKE? [2]"); 
```

我仍然对它们的实际工作方式有些困惑。但结果是这样的（按出现顺序）：

```
Worker said: WHERE'S SASUKE? [1]
Worker said: WHERE'S SASUKE? [2]
Worker said: Hi Naruto
Worker said: Hi Sakura 
```

他们说要启动一个工人，请使用 postMessage()。

第一个问题：那么如果我的主js文件postMessage（“Naruto”），为什么worker首先显示两个“WHERE'S SASUKE？” 然后显示鸣人和小樱？它不是应该首先触发它的 onMessage 事件，因为它从主线程接收到数据吗？

第二个问题：当我发布消息（“火影忍者”）时，它显示了两个“佐助在哪里？”。但是为什么当我做 postMessage("Sakura") 时，它没有显示两个“WHERE'S SASUKE？”？我的意思是，我在主线程中调用了 postMessage() 两次，为什么只显示两个“WHERE'S SASUKE”？难道它不应该“执行”worker.js 两次也因此看到四个“WHERE'S SASUKE？”？（请赐教）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T08:40:16.880

一些注释可以帮助您了解正在发生的事情

**main.js**

```
var worker = new Worker("../Scripts/worker.js");

// register handler, 
// code is executed only when a message is received from worker
worker.onmessage = function (event) {
    alert("Worker said : " + event.data);
}; 
```

**worker.js**

```
// register onmessage handler , 
// code will not be executed at this point but only when you post a message
self.onmessage = function (event) {
      self.postMessage("Hi " + event.data);
};

// these are executed immediately
// they will be executed only once during the 'new Worker' part
self.postMessage("WHERE'S SASUKE? [1]");
self.postMessage("WHERE'S SASUKE? [2]"); 
```

# java - Spring的@Transactional注解是否会混淆其他注解

> ID：14412502
> 
> 赞同：2
> 
> 时间：2013-01-19T08:24:54.417
> 
> 标签：java, spring

我有一个自定义方法注释 (@EventListener)，我在具有 @Transactional 注释的类内的方法中使用它。

以下是该课程的示例

```
@Component
@Transactional
public class someClass {

    @EventListener
    public void someMethod() {

    }
} 
```

该类在一个包中包含在上下文文件组件扫描中。在另一个实现 ApplicationContextAware 的类中，我检查类的方法是否有我的 @EventListener 注释。出于某种奇怪的原因，当类中存在@Transactional 时，我的自定义注释丢失了。

这就是我检查方法注释的方式：

公共对象 postProcessAfterInitialization（对象 bean，字符串 beanName）抛出 BeansException {

```
 System.out.println("SCANNING :::::: " + beanName);

    for (Method method : bean.getClass().getMethods()) {

        for(Annotation a : method.getAnnotations()) {
            System.out.println("\t>>>>> " + a.toString());
        }

    ... 
```

有没有办法使用@Transactional 而不会弄乱它注释的类中的其他方法注释？

编辑：我在发布[Spring 后发现了这个 - @Transactional - 在后台会发生什么？](https://stackoverflow.com/questions/1099025/spring-transactional-what-happens-in-background)- 似乎创建了某种代理，这似乎导致我的注释“消失”。有没有办法获得对原始类的引用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T08:49:12.567

我找到了我的问题的答案并将其发布在这里，以防其他人遇到同样的问题。由于@Transactional 类是代理的，我需要获取原始代理类，所以我添加了以下内容：

```
 Class clazz;

    // if this was proxied by Spring, get the original class name
    clazz = AopUtils.getTargetClass(bean);
    if(clazz == null) {
        clazz = bean.getClass();
    }

    for (Method method : clazz.getMethods()) { 
```

我使用 AopUtils.getTargetClass 会得到原始类，如果它返回 null 则意味着该类没有被代理所以我只使用 bean.getClass()

# c# - 如何将 DataRow 添加到不同的 DataTable 中？

> ID：14412507
> 
> 赞同：0
> 
> 时间：2013-01-19T08:25:48.270
> 
> 标签：c#, datatable

我有一个从旧的 DataTable A 生成的 DataRow dr。现在我想将它添加到一个新的 DataTable B 中。A 与 B 具有相同的结构。我使用 for() 来克隆一个新的 DataRow。我想知道实现它的好方法。

```
 if (hour != this.currentHour)
            {
                ds.Tables.Add(this.currentDataTable);
                this.currentHour = hour;
                this.currentDataTable = InitMeasurementTable();
                this.currentDataTable.TableName = string.Format("Measurement_{0}", hour);
                DataRow drr = this.currentDataTable.NewRow();
                for (int i = 0; i < this.currentDataTable.Columns.Count; ++i)
                    drr[i] = dr[i]; // clone part
                this.currentDataTable.Rows.Add(drr);
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T08:28:30.823

您可以使用[DataRow.ItemArray](http://msdn.microsoft.com/en-us/library/system.data.datarow.itemarray.aspx)属性。

```
this.currentDataTable.Rows.Add(drr.ItemArray); 
```

# javascript - 使用同位素过滤动态数据

> ID：14412512
> 
> 赞同：1
> 
> 时间：2013-01-19T08:26:40.563
> 
> 标签：javascript, jquery, wordpress, jquery-isotope

我不是 JavaScript 专家，需要您的帮助。我将同位素用于带有图片的网站[http://strategenundgestalter.de](http://strategenundgestalter.de)，但在布局中是一个中断。

看起来像： ![http://i.stack.imgur.com/2noqf.png](../Images/6e8f14f223fdc0fece87cc6736479403.png)

但它应该看起来像： ![http://i.stack.imgur.com/09yu1.png](../Images/bff31b47ccb2e0d81ae59a4abad0308f.png)

我正在使用的代码是：

```
if( jQuery().isotope ) {

    jQuery(function() {

        var container = jQuery('.isotope'),
            optionFilter = jQuery('#sort-by'),
            optionFilterLinks = optionFilter.find('a');

        optionFilterLinks.attr('href','#');

        optionFilterLinks.click(function(){
            var selector = jQuery(this).attr('data-filter');
            container.isotope({ 
                filter : '.' + selector, 
                itemSelector : '.isotope-item',
                animationEngine : 'best-available',
                layoutMode : 'masonry',
                columnWidth: '220'
            });

            // Highlight the correct filter
            optionFilterLinks.removeClass('active');
            jQuery(this).addClass('active');
            return false;
        });

    });

} 
```

当我加载页面时，默认过滤器是“全部”，布局看起来像这样。当我单击所有布局的过滤器按钮时，就可以了。但不是在页面加载之后。我必须始终单击“全部按钮”。

你看到问题了吗？

哦对不起。的HTML：

```
<?php
/*
Template Name: Portfolio Template
*/
?>

<?php get_header(); ?>

            <!--BEGIN .page-header -->
            <div class="page-header">

                <h1 class="page-title"><?php the_title(); ?></h1>
                <ul id="sort-by">
                    <li><a href="#all" data-filter="type-portfolio" class="active"><?php _e('alle', 'framework'); ?></a></li>
                    <?php wp_list_categories( array('title_li' => '', 'taxonomy' => 'portfolio-type', 'walker' => new Portfolio_Walker() ) ); ?>
                </ul>

            <!--END .page-header -->
            </div>

            <!--BEGIN #primary .hfeed-->
            <div id="primary" class="hfeed isotope">
            <?php 
            $args = array(
                'post_type' => 'portfolio',
                'orderby' => 'menu_order',
                'order' => 'ASC',
                'posts_per_page' => -1
            );
            $query = new WP_Query( $args );

            while ( $query->have_posts() ) : $query->the_post(); ?>

                <?php 
                    $terms =  get_the_terms( $post->ID, 'portfolio-type' ); 
                    $term_list = '';
                    if( is_array($terms) ) {
                        foreach( $terms as $term ) {
                            $term_list .= urldecode($term->slug);
                            $term_list .= ' ';
                        }
                    }
                ?>

                <!--BEGIN .hentry -->
                <div <?php post_class("$term_list isotope-item"); ?> id="post-<?php the_ID(); ?>">              
                    <?php if ( (function_exists('has_post_thumbnail')) && (has_post_thumbnail()) ) { ?>
                    <div class="post-thumb">
                        <a title="<?php printf(__('Permanent Link to %s', 'framework'), get_the_title()); ?>" href="<?php the_permalink(); ?>">

                            <?php the_post_thumbnail('portfolio-thumb'); ?>
                        </a>
                    </div>
                    <?php } ?>

                    <h2 class="entry-title"></h2>

                    <!--BEGIN .entry-meta -->
                    <div class="entry-meta"><?php the_title(); ?><br/>
                    <span class="entry-portfolio-type"></span>  
                    <!--END .entry-meta -->
                    </div>

                <!--END .hentry-->  
                </div>

                <?php endwhile; ?>

            <?php wp_reset_postdata(); ?>

            <!--END #primary .hfeed-->
            </div>

<?php get_footer(); ?> 
```

和CSS：

```
.page-template-template-portfolio-php #primary,
.tax-portfolio-type #primary {
    width: 100%;
}

.page-template-template-portfolio-php .page-header,
.tax-portfolio-type .page-header { margin-right: 20px;}

.page-template-template-portfolio-php .hentry,
.tax-portfolio-type .hentry,
.tz-recent-portfolios-widget li {
    background: #fff;
    border-bottom: none;
    float: left;
    margin: 0px 20px 0px 0px;
    padding: 0px;
    width: 220px;
}

.page-template-template-portfolio-php .last,
.tax-portfolio-type .last { margin-right: 0; }

.page-template-template-portfolio-php .post-thumb,
.tax-portfolio-type .post-thumb,
.recent-work .post-thumb,
.portfolio-related .post-thumb,
.tz-recent-portfolios-widget .post-thumb { 
    margin: 0; 
    position: relative;
}

.page-template-template-portfolio-php .post-thumb a,
.tax-portfolio-type .post-thumb a,
.recent-work .post-thumb a,
.portfolio-related .post-thumb a,
.tz-recent-portfolios-widget .post-thumb a {
    border-bottom: none;
    display: block;
    margin: 0px;
    padding: 0;
    position: relative;
    width: 220px;
}

.page-template-template-portfolio-php .post-thumb-overlay,
.tax-portfolio-type .post-thumb-overlay,
.recent-work .post-thumb-overlay,
.portfolio-related .post-thumb-overlay,
.tz-recent-portfolios-widget .post-thumb-overlay,
{
    background-color: #333;
    color: #fff;
    display: none;
    padding: 2px 6px;
    position: absolute;
    top: 43%;
    left: 32%;
}

.page-template-template-portfolio-php a:hover .post-thumb-overlay,
.tax-portfolio-type a:hover .post-thumb-overlay,
.recent-work a:hover .post-thumb-overlay,
.portfolio-related a:hover .post-thumb-overlay,
.tz-recent-portfolios-widget a:hover .post-thumb-overlay,
.page-template-template-portfolio-php .hentry .entry-meta   { 
    display: block;
    z-index: 99;
}

.page-template-template-portfolio-php .hentry .entry-title,
.page-template-template-portfolio-php .hentry .entry-title a,
.tax-portfolio-type .hentry .entry-title,
.tax-portfolio-type .hentry .entry-title a,
.recent-work .entry-title,
.recent-work .entry-title a,
.portfolio-related .entry-title,
.portfolio-related .entry-title a,
.tz-recent-portfolios-widget .entry-title,
.tz-recent-portfolios-widget .entry-title a {
    font-size: 13px;
    line-height: 10px;
    margin: 15px 0 2px;
    text-align: left;
}

.page-template-template-portfolio-php .hentry .entry-meta,
.tax-portfolio-type .hentry .entry-meta,
.tz-recent-portfolios-widget .entry-meta{ 
font-size: 12px;
line-height: 12px;
font-weight: bold;
margin: 5%;
text-transform: uppercase;
    left: auto;
color: #fff;
text-align: center;
width: 90%;
opacity: 0.6;
}

.page-template-template-portfolio-php .post-thumb a:hover img,
.tax-portfolio-type .post-thumb a:hover img,
.recent-work .post-thumb a:hover img,
.portfolio-related .post-thumb a:hover img,
.tz-recent-portfolios-widget .post-thumb a:hover img
{ opacity: 0.1; }

.page-template-template-portfolio-php .page-title,
.tax-portfolio-type .page-title { display: inline-block; }

#sort-by { float: right; }

.ie7 #sort-by {
    position: relative;
    top: -20px;
    right: -18px;
}

#sort-by li {
    float: left;
    padding-left: 0px;
    margin-left: 7px;
}

#sort-by li:first-child { background: none; }

#sort-by a {
    border-bottom: none;
    color: #555;
    padding: 2px 5px;
    margin: 0;
}

#sort-by a.active { background-color: #ffd62c; } 
```

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T15:06:27.333

我没有看到任何实际上在加载时触发脚本的脚本。我刚刚尝试添加：

```
jQuery(document).ready(function(){
    jQuery('.isotope').isotope()
    }); 
```

有用。

我不是同位素专家，也不是 JS 专家，但这听起来很合乎逻辑。您只是在代码中包含插件，但没有执行它们，即使我不知道按钮为什么起作用。我猜想使用标记和一些经验法则，同位素确实可以很好地开箱即用。

实际上，请注意，您包含`jquery.isotope.min.js?ver=1.5.25`两次，一次在页眉中，另一次在页脚中。

我希望这可以帮助你。

# magento - 自定义核心会话在 Magento 结帐页面中不起作用

> ID：14412515
> 
> 赞同：1
> 
> 时间：2013-01-19T08:26:49.853
> 
> 标签：magento

我已经在购物车页面中设置了自定义 Magento 核心会话变量。

```
Mage::getSingleton('core/session')->setMyPoints('4'); 
```

我需要在结帐页面中检索上述 Session 值。但是在使用下面的代码在结帐页面中检索会话变量时它显示空值。

```
echo Mage::getSingleton('core/session')->getMyPoints(); 
```

任何人都可以帮助这个。

任何帮助很大的应用程序。

# python - 如何构建和安装 hcluster？

> ID：14412518
> 
> 赞同：2
> 
> 时间：2013-01-19T08:27:24.860
> 
> 标签：python, hcluster

[我从http://pypi.python.org/pypi/hcluster](http://pypi.python.org/pypi/hcluster)下载 hcluster ，然后解压缩到一个文件夹，然后键入`"python setup.py install"`. 似乎还可以，因为它显示：

```
Z:\>python setup.py install
running install
running build
running build_py
running build_ext
building '_hierarchy_wrap' extension
error: None 
```

但我尝试“导入 hcluster”，它显示：

```
In [2]: import hcluster
---------------------------------------------------------------------------
ImportError                               Traceback (most recent call last)
<ipython-input-2-002633efa200> in <module>()
----> 1 import hcluster

D:\Python\lib\site-packages\hcluster\__init__.py in <module>()
----> 1 import hierarchy as _h
      2 import distance as _d
      3 from hierarchy import *
      4 from distance import *
      5 from inspect import getmembers

D:\Python\lib\site-packages\hcluster\hierarchy.py in <module>()
    196
    197 import numpy as np
--> 198 import _hierarchy_wrap, types
    199 import hcluster.distance as distance
    200

ImportError: No module named _hierarchy_wrap 
```

我是一个为 Python 模块构建、编译、安装等的新手，有人可以详细说明如何解决这个问题吗？谢谢

（我使用的是 Windows XP 和 Python 2.6.1）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T14:35:38.573

您在 Windows 上，并且在 distutils 中遇到了一个错误，该错误会阻止您看到实际问题）：

```
set DISTUTILS_DEBUG=1
python setup.py .... 
```

我怀疑你会没有安装与 Visual Studio 相关的东西。如果您使用的是python 2.7，则需要安装VS 2008，然后重新运行setup.py 在python 3.x上，您需要更新的版本（但我不确定是最新的2010还是2012）。

另一个更简单的解决方案是安装 mingw，然后执行以下操作：

```
python setup.py build_ext -c mingw32 
```

一个更简单的解决方案是检查您需要的功能是否不在 scipy.cluster 中，它有一个适用于 Windows 的二进制安装程序。Damian Eads（hcluster 的作者）对该模块做出了相当大的贡献，并且有很大的重叠。

# .net - 代码优先（重新）将纯数组映射到 ICollection

> ID：14412520
> 
> 赞同：2
> 
> 时间：2013-01-19T08:27:40.103
> 
> 标签：.net, web-services, ef-code-first

我正在尝试使用代码优先方法将 Web 服务响应类（在服务引用中生成）映射到 SQL DB，但我遇到了以下问题：

目标类中的一些数据存储在纯数组中，如下示例所示：

```
public partial class Message
{
    public string Name { get; set; }
    public string Content { get; set; }
    public Tag[] Tags { get; set; }
}

public partial class Tag
{
    public string ShortTag { get; set; }
    public string FullTag { get; set; }        
} 
```

为了满足代码优先要求，这些示例类被扩展，如下所示：

```
public partial class Message
{
    [XmlIgnore]
    [Key]
    public int Id { get; set; }

    [XmlIgnore]
    public ICollection<Tag> CTags
    {
        get { return Tags == null ? new Collection<Tag>() : Tags.ToList(); }
        set { Tags = value.ToArray(); }
    }
}

public partial class Tag
{
    [XmlIgnore]
    [Key]
    public int Id { get; set; }
} 
```

DbContext 看起来像：

```
public class SampleContext: DbContext
{
    public DbSet<Message> Messages { get; set; }
    public DbSet<Tag> Tags { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        base.OnModelCreating(modelBuilder);
        modelBuilder.Entity<Message>().HasMany(x => x.Tags);
    }
} 
```

数据库已成功生成并按预期显示。设置和保存消息和标签也可以，但**检索总是给出空数组。**

将上面的代码更改为：

```
public partial class Message
{
    [XmlIgnore]
    [Key]
    public int Id { get; set; }

    [XmlIgnore]
    public ICollection<Tag> CTags { get; set; }        
} 
```

解决了这个问题，但我需要映射到纯数组，因为它在 SOAP 的 XML 序列化中被 web 服务使用。

请告知如何进行或我做错了什么？

# android - 带有“重用布局”与“viewflipper”的底栏

> ID：14412521
> 
> 赞同：2
> 
> 时间：2013-01-19T08:27:43.233
> 
> 标签：android, android-layout, android-xml, menubar

好的，我正在开发一个应用程序，该应用程序具有带有按钮的永久底部栏，每个按钮都会在栏顶部启动不同的活动（例如 Instagram 应用程序）。

我正在四处寻找解决方案，看起来我可以使用“viewflipper”、“reusing-layouts”或“actionbar”。我不想使用'actionbar'，所以这不在图片中。

所以'重用布局'与'viewflipper' - 在性能，内存成本和有效呈现方面更好（栏不会刷新/重新加载每个活动更改）？或者您有更好的解决方案建议吗？

*参考：
viewflipper： http: [//developer.android.com/reference/android/widget/ViewFlipper.html](http://developer.android.com/reference/android/widget/ViewFlipper.html)
重用布局：http: [//developer.android.com/training/improving-layouts/reusing-layouts.html](http://developer.android.com/training/improving-layouts/reusing-layouts.html)*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T09:02:50.303

> 好的，我正在开发一个应用程序，该应用程序具有带有按钮的永久底部栏，每个按钮都会在栏顶部启动不同的活动（例如 Instagram 应用程序）。

我不熟悉 Instagram 应用程序，但它如何在酒吧顶部启动不同的活动？我认为您指的是单击按钮时出现的*不同“内容”。* `Activity`

> 所以'重用布局'与'viewflipper' - 在性能，内存成本和有效呈现方面更好（栏不会刷新/重新加载每个活动更改）？

两个版本都将处理剩余的内容更改栏（因为您将拥有一个`Activity`），因此这不是问题。

在内存中重用布局可能会更好，因为您一次在内存中只有一个布局文件。不幸的是，使用布局会更加困难，因为每次出现新布局时都需要从这些布局中重新初始化视图（如果布局真的彼此不同，这样做会更加困难）。

将`ViewFlipper`在其中保存其子视图，因此如果您有大量屏幕要显示它，则不会很好地适应内存。您可能可以创建一个系统来从`ViewFlipper`当前不可见的子视图中删除子视图，但我不会对此感到困惑。

> 或者您有更好的解决方案建议吗？

**片段**。可重用的组件，更容易处理，框架的帮助（只要你不违背它）管理它们，更容易处理各种屏幕布局......

# wordpress - Adsense 广告没有出现在 wordpress 主页上？

> ID：14412523
> 
> 赞同：0
> 
> 时间：2013-01-19T08:27:58.870
> 
> 标签：wordpress, adsense

有谁知道为什么它们没有出现在主页上，也没有出现在一些帖子中？如果有人想检查代码，这是我的网站：http: [//videoshqip.tv](http://videoshqip.tv) >

`NOTE`：如果您不想看到接受我的 Facebook 应用程序的请求，请先从 Facebook 注销，然后访问我的网站！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T10:10:43.533

如果您最近创建了广告块，则需要一些时间才能开始展示。

如果没有，[请检查此](https://support.google.com/adsense/bin/answer.py?hl=en&answer=10036)。

# android - 请帮助我在android中的自定义布局

> ID：14412524
> 
> 赞同：0
> 
> 时间：2013-01-19T08:27:58.733
> 
> 标签：android, custom-component

```
java.lang.RuntimeException: Unable to start activity `ComponentInfo{com.example.demo/com.example.demo.Demo}: android.view.InflateException: Binary XML file line #7: Error inflating class com.example.component.MainActivity` 
```

> ```
> public class MainActivity extends FrameLayout {    
>     public MainActivity(Context context) {
>         super(context);
>         // TODO Auto-generated constructor stub
>     }
> } 
> ```

**activity_main.xml**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="@string/hello_world" />

</RelativeLayout> 
```

**演示.java**

```
public class Demo extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_demo);
    }

} 
```

**活动演示.xml**

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
 >

  <com.example.component.MainActivity
    android:id="@+id/comp"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
      />
</FrameLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T08:46:12.267

You can't put an activity in a layout. Only views or view groups.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T08:46:50.390

充气机在创建视图类的实例时使用两个参数构造函数。您必须提供

```
public MainActivity(Context context, AttributeSet attrs) {
    super(context, attrs);
    // TODO Auto-generated constructor stub
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-18T10:08:16.377

由于 Demo 是您的 Activity，因此在 Android manifest.xml 文件中使用包名定义它：com.example.demo.Demo。为什么你在 frameLayout 中添加 framelayout 只使用一个，你的自定义 framelayout。并将xml定义为：

```
<com.example.component.MainActivity
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/comp"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
 /> 
```

//希望它有效

# sql - “重复任务”的设计选项

> ID：14412527
> 
> 赞同：7
> 
> 时间：2013-01-19T08:28:19.260
> 
> 标签：sql, sql-server

我正在编写一个为人们处理任务的小应用程序。非常简单，但就表格设计而言，我坚持的领域是重复任务的情况，可以是一次，每天，每周或每月。如果是每周，它是在特定的一天，每周。每月是一个特定的日子。

我有一个任务表和一个 recurring_type_id，并且打算在代码中处理重复性任务，但这是理想的方式吗？另一种方法是在创建任务时插入所有任务 - 对于每个事件时间。但这似乎也不对。

任何人都可以就设计以及如何以可维护和有效的方式处理这个问题提出建议吗？

我正在使用 SQL Server 2008 R2

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-24T18:53:18.817

我会创建一个任务表来插入我的任务。

```
taskTable
|taskID  |Freq   |runAt       |
-------------------------------
|1       |daily  |1           |
|2       |daily  |0           |
|3       |weekly |5           |
|4       |weekly |1           |
|5       |monthly|15          |
|6       |monthly|1           |
|7       |once   |2013-7-4    | 
```

每日任务的 runAt**从未**被考虑过，因此输入什么值并不重要。

**每周**项目的runAt是任务要运行的星期几。

runAt for **mothly**是任务要运行的月份中的那一天（我通常在第一次运行月末任务，因为这样可以省去处理月份结束日期的麻烦，尽管您可以使用它来解决这个问题

```
lastDayOfMonth = datePart(d,dateadd(s,-1,dateadd(mm, datediff(m,0,getdate())+1,0))) 
```

runAt for **once**是任务运行的实际日期。

然后我会创建一个每天运行的任务，看看需要运行什么。

```
select  taskID
from    taskTable
where   (freq = 'once' and runAt = convert(varchar(10),getDate(),21))
  or    freq = 'daily'
  or    (freq = 'weekly' and runAt = datePart(dw,getDate()))
  or    (freq = 'monthly' and runAt = datePart(d,getDate()) 
```

此查询为我提供了我需要运行的任何任务的所有 taskID。

不确定这是否是您正在寻找的东西，但希望您能从中找到有用的东西。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-27T11:06:39.353

我会尝试使用一些久经考验的解决方案。Unix [Cron Table](http://en.wikipedia.org/wiki/Cron)解决方案。许多其他工具（如 Hudson/Jenkins）也使用此解决方案。

来自维基百科。

```
* * * * * 要执行的命令
┬ ┬ ┬ ┬ ┬
│ │ │ │ │
│ │ │ │ │
│ │ │ │ └───── 星期几（0 - 7）（0 或 7 为星期日，或使用名称）
│ │ │ └────────── 月 (1 - 12)
│ │ └─────────────── 一个月中的某天 (1 - 31)
│ └──────────────────── 小时 (0 - 23)
└────────────────────────── 分钟 (0 - 59)

```

此外，它还允许条目的快捷方式名称。

```
条目描述相当于
@yearly 每年 1 月 1 日凌晨午夜运行一次 0 0 1 1 *
@每年   
@monthly 每月第一天凌晨的午夜运行一次 0 0 1 * *
@weekly 每周在周日凌晨运行一次 0 0 * * 0
@daily 每天午夜运行一次 0 0 * * *
@hourly 每小时开始运行一次 0 * * * *

```

从这里，我们得到以下表格设计：

```
taskID cronExpression preDefinedDefinition
 1 30 * * * * 空
 2 0 * * * * @hourly
 3…………

```

@Timothy Britt 提到此解决方案不考虑一次性休假。那是真实的。Linux 和/或 Unix 也有一个名为[at](http://en.wikipedia.org/wiki/At_%28Unix%29)的命令。似乎它将其条目存储在单独的文件中，并且单独的守护程序监视该文件。如果我们想在此表中包括一次性工作。我们可以添加额外的布尔列 OneTimeOnly。或另一张表，其中仅包含一次工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T19:26:08.537

我做了一个非常相似的事情：

```
 _id
   interval_type
   time
   day
   next 
```

该`day`字段表示时间间隔内的日期，单次和每日为空。表中的`next`字段用于标识下一次运行任务的时间。当任务应该运行时设备关闭的情况下，这是需要的。您只需要决定如何处理一个或多个错过的间隔。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T19:41:37.737

我应该像这样使用一个日期作为参考

```
taskid      date_reference Freq            distance
----------- -------------- --------------- -----------
1           2011-01-01     daily           NULL
2           2011-01-17     monthly         NULL
3           2013-01-17     weekly          NULL
4           2013-01-24     once            NULL
5           2011-01-01     monthly         NULL
6           2011-01-01     monthly         NULL
7           2011-01-01     before_eomonth  5
8           2013-01-01     loop_day        4
9           2013-01-01     loop_month      4 
```

因此您可以通过多种方式检查经期...

传统的每周、每天、每月和一次。就像长矛的解决方案..

但你会有几种不同的方式，比如

每 4 天

每 4 个月

或 5 天到月底

或月底

应该考虑在任务循环结束时包含另一个日期......

但是，工作永远不会完成......所以，它永远不会被使用......;）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-30T20:52:52.237

我建议使用行业标准的 iCalendar 格式 ( [http://www.rfc-editor.org/rfc/rfc5545.txt](http://www.rfc-editor.org/rfc/rfc5545.txt) )，而不是尝试为此提出关系设计。[你可以在这里](https://stackoverflow.com/questions/1106751/how-to-have-an-icalendar-rfc-2445-repeat-yearly-with-duration)看到一些例子。由于您的重复模式看起来很简单，因此为它们创建 iCalendar 表达式应该是一项相当简单的任务。

这是一个有用的语法验证器：[http ://severinghaus.org/projects/icv/](http://severinghaus.org/projects/icv/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-30T22:43:48.060

目前尚不清楚您的环境究竟是什么，但开源 Job Scheduler 可以解决此类任务。

[http://en.wikipedia.org/wiki/Open_Source_Job_Scheduler](http://en.wikipedia.org/wiki/Open_Source_Job_Scheduler)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-02-15T23:57:33.113

我已经接受了这里给出的答案，并提出了以下数据库结构：

```
Column          Data Type
id              int
task_name       nvarchar(50)
frequency_type  nvarchar(10)
runat_day       int
runat_month     int
runat_year      int 
```

数据如下所示：

```
id  task_name       frequency_type  runat_day   runat_month runat_year
1   Do this Once    once            16          2           2018
2   Do this Monthly monthly         31          0           0
3   Do this Yearly  yearly          28          2           0
4   Do this Daily   daily           0           0           0
5   Do this Weekly  weekly          6           0           0 
```

将数据拉回的查询如下所示：

```
DECLARE @chosen_date datetime = '2018-02-28'
DECLARE @lastDayOfMonth int = datePart(d,dateadd(s,-1,dateadd(mm, datediff(m,0,getdate())+1,0)))

select  task_name
from    scheduled_tasks
where   (frequency_type = 'once' and runat_day = DATEPART(DAY, @chosen_date) and runat_month = DATEPART(MONTH, @chosen_date) and runat_year = DATEPART(YEAR, @chosen_date))
  or    frequency_type = 'daily'
  or    (frequency_type = 'weekly' and runat_day = DATEPART(WEEKDAY,@chosen_date))
  or    (frequency_type = 'monthly' and runat_day = DATEPART(DAY, @chosen_date))
  or    (frequency_type = 'monthly' and @lastDayOfMonth = DATEPART(DAY, @chosen_date) and runat_day >= @lastDayOfMonth)
  or    (frequency_type = 'yearly' and runat_day = DATEPART(DAY, @chosen_date) and runat_month = DATEPART(MONTH, @chosen_date)) 
```

到目前为止，我的所有用例都正确出现，即使是在给定月份中不存在的某一天的月末日期也得到了正确处理（例如，每个月的 31 日仍将在 2 月 28 日触发)

给定频率类型不需要的字段仅包含零或空值，并被查询忽略。

它不考虑闰年 2 月 29 日发生的年度事件，也不以任何方式考虑一天中的时间。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-04-24T11:13:04.057

我已经阅读了上面的答案，这是我认为应该做的：

**日程**

* * *

*   ID

*   类型（每日、每月、每周、固定、每年） - 枚举

*   频率（可以是 1-7 [星期几]、1-30（或 28）[月份中的几天]、1-365 [一年中的几天] 或 null（对于每日，固定） - ArrayField（整数） - [ 1, 7] 或 [23] 或 [235] 或空

*   时间（UTC 时间） - ArrayField（字符字符串 - ['9:00', '13:30']

*   日期（对于固定类型） - 日期时间 - 2009-03-21

*   is_active (boolean) - 用于启用、禁用计划

*   name (CharField) - 如果你想命名时间表

其余字段需要您正在构建的内容的上下文。

现在，为此我正在考虑每 30 分钟运行一次 cronjob（我将时间输入间隔 30 分钟），它运行一个脚本（在我的情况下为 django 管理命令），该脚本从该表中过滤需要运行的计划：

查询将是这样的：

```
current_day_of_week = 3
current_day_of_month = 24
current_day_of_year = 114
current_time = 13:30
current_date = 2019-04-24

Filter records that match the below query(not even psuedo code)(I'm using Q objects(https://docs.djangoproject.com/en/2.2/topics/db/queries/#complex-lookups-with-q-objects)

Q(daily AND current_time) OR
Q(weekly AND current_day_of_week AND current_time) OR
Q(monthly AND current_day_of_month AND current_time) OR
Q(yearly AND current_day_of_year AND current_time) OR
Q(fixed AND current_date AND current_time) 
```

# java - Java、C++、C# 等如何使用 < 和 > 来解决这种特殊的语法歧义？

> ID：14412533
> 
> 赞同：29
> 
> 时间：2013-01-19T08:29:03.100
> 
> 标签：java, parsing, grammar, context-free-grammar, lr

我曾经认为 C++ 是一个“奇怪”的语言，它与`<`and有所有的歧义`>`，但在尝试实现一个解析器之后，我想我找到了一个例子，它打破*了几乎**所有***使用`<`and`>`泛型类型的语言：

```
f(g<h, i>(j)); 
```

这可以在语法上被解释为一个通用的方法调用（`g`），或者它可以被解释为给出`f`两个比较的结果。

这些语言（尤其是 Java，[我认为它应该是 LALR(1) 可解析的？](http://www.cab.u-szeged.hu/WWW/java/langspec/19.doc.html)）如何解决这种句法歧义？

我只是无法想象任何非 hacky/上下文无关的方式来处理这个问题，而且我对任何这样的语言如何可以是上下文无关的感到困惑，更不用说 LALR(1) 可解析了......

（值得注意的是，即使是 GLR 解析器也无法在没有上下文的情况下为该语句返回单个解析！！）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T16:25:06.837

java中的通用方法调用将`<h,i>g(j)`是没有歧义的:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T09:13:53.097

> 我只是无法想象任何非 hacky/上下文无关的方式来处理这个问题，而且我对任何这样的语言如何可以是上下文无关的感到困惑，更不用说 LALR(1) 可解析了......

答案是它们不是（至少不是 Java 和 C++；我对 C# 知之甚少）。您链接到的 Java 语法可以追溯到 1996 年，那时还没有引入泛型。

如需进一步讨论，请参阅[C# 和 Java 语法是否为 LALR(x)？](https://stackoverflow.com/questions/8378521/are-c-sharp-and-java-grammars-lalrx)

# php - 如何在 codeigniter 中从自定义模型扩展模型

> ID：14412534
> 
> 赞同：7
> 
> 时间：2013-01-19T08:29:19.757
> 
> 标签：php, codeigniter, codeigniter-2

我从 ci_model 创建了一个名为 Model_base 的模型，并在其中添加了所有常用函数

```
class Model_base extends CI_Model {

function __construct()
{   
    parent::__construct();          
}
function create() {
    //do insert data into database
}

function read() {
    //do get data into database
}

function update() {
    //do update data into database
}

function delete() {
    //do delete data from database
}

} 
```

现在我想创建一个扩展 base_model 的新模型是否可以在 CodeIgniter

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T15:33:10.207

创建一个新的模型 PHP 文件，并使用：

```
class Model_New extends Model_Base {

   public function __construct()
   {
      parent::__construct();
   }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T15:28:47.757

是的，你可以，只要记住调用你`parent::__construct();`的`constructor`新模型。

# linux - 如何每 x 秒启动一个 sh 脚本？

> ID：14412535
> 
> 赞同：3
> 
> 时间：2013-01-19T08:29:22.113
> 
> 标签：linux, bash, cron

我有一台带有 Linux 的服务器，我需要每 5 秒启动一个带有许多命令的 sh 脚本。

使用 crontab，最短为 1 分钟。

我怎样才能做到这一点 ？？

谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T08:32:29.990

也许[`watch`](http://ss64.com/bash/watch.html)

例子

```
watch -n 5 foo.sh 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-19T08:35:40.187

您还可以`sleep`在 shell 脚本的循环中使用：

```
#!/bin/sh
while [ true ]
do
    sh foo.sh
    sleep 5
done 
```

# python-3.x - 调用 lambda 创建的函数返回函数？

> ID：14412537
> 
> 赞同：1
> 
> 时间：2013-01-19T08:29:38.763
> 
> 标签：python-3.x, lambda

我正在检查这个函数，它应该根据传递给它的参数在数组中向前或向后循环。要更新索引，代码如下所示：

```
>>> def updater(me, x, y):
...     fun = lambda x : x + 1 if x < y else lambda x : x - 1
...     return fun(me)
... 
>>> updater(2, 1, 0)
<function <lambda> at 0x7ff772a627c0> 
```

我意识到如果我只使用一个简单的`if-return-else-return`序列，上面的例子可以很容易地纠正，但这只是一个简化，在实际代码中它不仅仅是检查两个整数。是的，有一个单行条件返回一个函数（不要问，不是我自己的代码）。

理智检查我的翻译...

```
>>> updater = lambda x: x + 1
>>> updater(2)
3 
```

那么为什么第一个例子返回一个函数呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T08:33:58.390

这些括号应该可以帮助您了解您的代码是如何被解释的：

```
fun = (lambda x : (x + 1 if x < y else (lambda x : x - 1))) 
```

因此，要解决您的问题，只需添加更多括号：

```
fun = (lambda x: x + 1) if x < y else (lambda x: x - 1) 
```

或者只使用一个 lambda：

```
fun = lambda x: x + (1 if x < y else -1) 
```

# exception - 是否有可能使这种模式更干燥？

> ID：14412541
> 
> 赞同：1
> 
> 时间：2013-01-19T08:29:57.993
> 
> 标签：exception, language-agnostic, control-flow

我遇到过几次：

```
try {
  if (condition()) {
    return simpleFunction(with, some, args);
  } else {
    return complexFunction(with, other, args);
  }
catch (something) {
  // Exception thrown from condition()
  return complexFunction(with, other, args);
} 
```

有什么方法（任何语言）可以避免重复调用 complexFunction？理想情况下不会掩盖代码的意图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T08:32:47.180

如果是c#，你可以做...

```
 try
    {
        if (condition()) {
            return simpleFunction(with, some, args);
        }
    }
    catch
    {
        // Swallow and move on to complex function
    }

    return complexFunction(with, other, args); 
```

**更新以使条件异常继续向上堆栈**

```
if (condition()) {
    try
    {
        return simpleFunction(with, some, args);
    }
    catch
    {
        // Swallow and move on to complex function
    }
}
return complexFunction(with, other, args); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T08:45:06.193

`condition()`如果失败则抛出异常

```
try
{
  if (condition())
  {
    return simpleFunction();
  }
  throw conditionException();
}
catch(conditionException ce)
{
  return complexFunction();
} 
```

正如已经很好地指出的那样，这不是编写代码的方式。然而，它确实解决了这个问题——并且在某种程度上它似乎与问题中“模式”的意图相匹配，即如果条件抛出异常或返回 false，则认为它已失败。

# load-balancing - 动态负载均衡的任务队列

> ID：14412545
> 
> 赞同：0
> 
> 时间：2013-01-19T08:30:25.997
> 
> 标签：load-balancing, message-queue, task-queue, gearman

**设置**
前端机器接收 Web 请求并将 3 种不同类型的任务放入`Gearman`服务器。
在该 gearman 服务器上注册了 3 台工作机器，每台都可以执行任何这些任务。

**不同的任务消耗不同的资源。**
每个任务在 cpu/ram/io 消耗方面都是不同的。
队列中的任务数量远大于工作人员的数量，这意味着每台工作机器向 gearman 注册了多个工作人员实例。

**如何对其进行动态负载平衡**
问题是一台工作机器可以获得所有 cpu 扩展任务，另一台机器可以获得 i/o 扩展任务，而理想情况下，工作机器可以更好地并行执行所有这些不同类型的任务。

也许 gearman 不是这里的正确工具？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T11:07:03.723

可能您可以使用具有[公平调度](http://www.rabbitmq.com/tutorials/tutorial-two-python.html)的 RabbitMQ并
使用 3 个不同的队列，一个用于 cpu 消耗任务，一个用于 i/o，一个用于网络。

因此，每次工作机器完成任何这些任务时，它都会知道它已经完成并获得另一个相同资源消耗类型的任务。

# wordpress - 带有 git 集成的 Wordpress 醒目的主题子主题

> ID：14412548
> 
> 赞同：0
> 
> 时间：2013-01-19T08:31:10.490
> 
> 标签：wordpress, wordpress-theming

我正在尝试通过向页面添加样式和 DOM 元素来对[Striking 主题](http://themeforest.net/item/striking-premium-corporate-portfolio-wp-theme/128763)进行大量自定义，这样它们就不会受到更新的影响。

1.  似乎每个主题更新都会覆盖所有 php 文件（包括子文件夹？）。有没有办法保持典型的儿童主题？

2.  通过阅读[支持论坛](http://kaptinlin.com/support/)，似乎鼓励在存储在 wordpress 数据库中的自定义 css 部分中完成自定义样式。但是，我将在 git 中使用版本控制，并且数据库不会成为 git 存储库的一部分。

3.  是否可以使用孩子的 style.css 使其工作并在更新时保留？

4.  由于 Striking 的样式在 screen.css 而不是通常的 style.css 中，我可以像 Wordpress 在[http://codex.wordpress.org/Child_Themes](http://codex.wordpress.org/Child_Themes)中解释的那样激活子 style.css吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T08:38:26.103

1）子主题文件夹不在父主题内，它们通过子主题中的Template子句链接在一起。更新父母不会影响孩子

2）这取决于主题，问作者

3) 是的，所有主题都必须有一个 style.css

4) 是的，见 3)，这里唯一的问题是 css 文件将包含在其中的顺序。

所有这些都是不使用专有主题作为父主题进行自定义的一个很好的理由。它们通常很复杂，不遵循正常的主题结构。我通常从 Toolbax 或 TwentyTwelve 主题开始。这些是标准的 WordPress 主题并且表现良好。

# php - codeigniter模型中的未定义变量

> ID：14412550
> 
> 赞同：-2
> 
> 时间：2013-01-19T08:31:36.397
> 
> 标签：php, codeigniter

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T08:34:36.400

它试图在 :21 上返回 $data 但如果查询没有返回任何行，则 $data 尚未定义。

```
$data = array(); 
```

应该是这个函数的第一行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T08:34:50.417

您应该在条件`$data`之前定义`if`- 如果 $q->num_rows == 0 那么 $data 将是未定义的。

`$data = array();`和之前的条件一样简单。

# c# - 背景不更新C#

> ID：14412551
> 
> 赞同：0
> 
> 时间：2013-01-19T08:31:48.257
> 
> 标签：c#, windows, visual-studio

当涉及到 C# 时，我遇到了一些问题。

我正在尝试通过下载用户指定的图像来动态更新表单的背景。

我下载图像（并更新表单）的代码如下所示：

```
 public bool getImgFromWeb(string url)
    {
        try
        {
            HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(new Uri(url, UriKind.Absolute));
            HttpWebResponse response = (HttpWebResponse)request.GetResponse();

            //if response is okay, and it's an image
            //sometimes 404 will be okay, but will redirect to website.
            if ((response.StatusCode == HttpStatusCode.OK) &&
                (response.ContentType.StartsWith("image", StringComparison.OrdinalIgnoreCase)))
            {
                Bitmap tempImg = new Bitmap(response.GetResponseStream());
                this.BackgroundImage = tempImg; //this line does nothing.
                this.Invalidate(); //to force the window to redraw
            }
            else
            {
                MessageBox.Show("Sorry, the image your are trying to download does not exist. Please re-enter the image URL.");
                return false;
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show("Sorry, an error: " + ex.Message + " occurred.");
            return false;

        } 
```

关于为什么我的表单没有显示更新的背景的任何建议？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T12:58:23.057

我复制了您的场景并用 this.Refresh() 替换了 this.Invalidate() 并且它有效。这是在 Visual Studio 2012 中。

```
private void SetImageAsBackground(string uri)
    {
        try
        {
            HttpWebRequest request = (HttpWebRequest)WebRequest.Create(uri);
            HttpWebResponse response = (HttpWebResponse)request.GetResponse();

            if (response.StatusCode == HttpStatusCode.OK && response.ContentType.StartsWith("image", StringComparison.OrdinalIgnoreCase))
            {
                Bitmap temp = new Bitmap(response.GetResponseStream());
                this.BackgroundImage = temp;
                this.Refresh();
            }
            else 
            {
                MessageBox.Show("This isn't an image!");
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show(string.Format("Exception: {0}", ex));                
        }
    } 
```

# entity-framework - 自定义实体实现

> ID：14412552
> 
> 赞同：5
> 
> 时间：2013-01-19T08:32:13.483
> 
> 标签：entity-framework

有没有办法使用 EF6 注入自定义对象实例创建者？我需要做的是在matrialization 发生之前向EF 提供实体实例。

基本上我希望能够使用非无参数构造函数定义我的 POCO 实体，以便能够使用 DI 聚合，最终与 EF 保持一致。

我已经可以使用 ObjectMaterialized 事件实现类似的目标：

```
var oc = ( this as IObjectContextAdapter ).ObjectContext;
oc.ObjectMaterialized += ( s, e ) => 
{
   //resolve and inject dependencies here using e.g. public properties  
}; 
```

但我真的很想在构造函数上声明依赖项。

任何想法？干杯，.m

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-10T20:01:17.527

使用默认的 ObjectContext，我认为查看 EF 代码是不可能的。最终，对象由`ObjectContext.CreateObject`. 这做了两件事之一：它要么调用默认构造函数，要么，如果启用了代理创建，它会创建相关的代理类型。代理类型用于增强更改跟踪和延迟加载属性。

但是，它`ObjectContext.CreateObject`是虚拟的，因此可以在派生类中覆盖它。该派生类将提供对容器（或生命周期范围）的引用，然后在被覆盖的`CreateObject`调用中，这将用于解析实体。

那么问题就变成了，如何将派生类型指定为`ObjectContext`用于 a `DbContext`？好吧，有[一个构造函数接受`ObjectContext`](http://msdn.microsoft.com/en-us/library/dn220058%28v=vs.113%29.aspx)`DbContext`应该使用的实例。

这是我的想法开始偏离轨道的地方，因为`ObjectContext`需要[告知](http://msdn.microsoft.com/en-us/library/bb739017%28v=vs.100%29.ASPX)它在连接字符串中使用的模型。我认为这可能意味着代码优先方法不起作用，因为模型是延迟创建的，因此在`DbContext`构建之前不可用。但是，对于模型优先的方法，也许这可行？

# c# - 隐藏属性 (C#)

> ID：14412553
> 
> 赞同：0
> 
> 时间：2013-01-19T08:32:15.310
> 
> 标签：c#, .net

好吧，我有以下课程：

*   玩家管理器（添加、移除等）
*   播放器（它可以做各种事情）
*   客户端（它包含发送数据、recv 等网络操作）。

播放器管理器有一个播放器类数组，客户端类是播放器的组合，具有私有访问权限，因为我不需要用户查看客户端界面。

一切都很好，除了我想使用数组固定长度而不是列表的问题。客户端类是在运行时确定的，如果我想初始化一个播放器，我需要直接在属性上设置它或使用 setter 方法，这迫使我将客户端组合设为公共。

List 在这个问题上工作得很好，因为我可以在 Player 类的构造函数上设置 Client 属性，但想法是使用数组固定长度，因为它更快。是否有任何解决方法可以将 Client 保持为私有并从 Player Manager 类中设置它？

```
public class PlayerManager
{
    public Player[] players { get; set; }

    public PlayerManager(int maxplayers)
    {
        players = new Player[maxplayers];
    }

    public void Add(Client client)
    {
        Player player = FindPlayerSlot();
        player.client = client; //cant do this, client is private property
    }

}

public class Player
{
     private Client client { get; set; } //Need to hide this from user

     //I can set a constructor here for set the client property, but this would
     //force me to use a list.
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T08:38:42.560

试着把它变成一个[`internal`](http://msdn.microsoft.com/en-us/library/7c5ka91b%28v=vs.80%29.aspx)属性。关键字使类型或成员在`internal`定义它的程序集之外不可见。

That's assuming this is all in a single assembly and the user will be referencing your assembly and using it. If you have more than one assembly you need the internals visible to, you can use [`[assembly: InternalsVisibleTo("MyOtherAssembly")]`](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.internalsvisibletoattribute.aspx) to define the only other assemblies that have access to the members marked as internal.

Additionally, a `List<Client>` isn't going to be any slower than a fixed array except for when it's resizing. If you use the [List constructor with an initial capacity](http://msdn.microsoft.com/en-us/library/dw8e0z9z.aspx), you can get the same performance as a fixed array.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T08:38:27.023

为什么不让

```
FindPlayerSlot(); // return a int type ? 
```

并通过构造函数设置客户端属性？

```
int playerid = FindPlayerSlot();
if (playerid > -1)
{
    Player player = new Player(client);
} 
```

添加构造函数

公共类播放器{私人客户端客户端{获取；放; } //需要对用户隐藏这个

```
 //I can set a constructor here for set the client property, but this would
 //force me to use a list.
public Player(Client client)
{
    this.client = client;
} 
```

}

# javascript - 仅针对 CKEditor 跳过 onblur 事件

> ID：14412554
> 
> 赞同：0
> 
> 时间：2013-01-19T08:32:21.737
> 
> 标签：javascript, asp.net, ckeditor

我有一个 java 脚本函数，它`onblur()`在身体的事件上触发。

```
 function start() {
                var el = document.getElementById('divWarning');
                el.style.visibility = "visible";
            } 
```

开火：

```
<body onblur="start()"> 
```

它在每一页上都运行良好。除了我在其中包含 CKEditor 的那个。

```
<CKEditor:CKEditorControl ID="txtDescriptiveAnswer" runat="server" Width="75%" UIColor="#54b2ff" BorderColor="#007cdf" BorderWidth="2px" Toolbar="Source|-|Preview
                                                                        Bold|Italic|Underline|Strike|-|Subscript|Superscript
                                                                        JustifyLeft|JustifyCenter|JustifyRight|JustifyBlock
                                                                        NumberedList|BulletedList|-|Outdent|Indent|Blockquote|Styles|Format|Font|FontSize|TextColor|BGColor|Maximize"  BasePath="../ckeditor">
                            </CKEditor:CKEditorControl> 
```

每次我点击 CKeditor 写东西时，onblur 事件就会触发。我知道 CkEditor 有一个 IFrame 我认为这是问题所在。但我不知道如何仅跳过 CkEditor 的模糊事件。

请帮忙。
谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T14:40:51.880

[给你](http://jsfiddle.net/AHzgt/)。您最终可以增强此过滤器并搜索特定`name`的 ,`id`等`tagName`。还要检查[当 onblur 发生时，我如何找出哪个元素焦点*到*？](https://stackoverflow.com/questions/121499/when-onblur-occurs-how-can-i-find-out-which-element-focus-went-to)线程以获取有关您的问题的更多信息，因为有许多处理它的技术。

# java - 为什么这段代码会进入我方法的错误块？

> ID：14412555
> 
> 赞同：0
> 
> 时间：2013-01-19T08:32:27.200
> 
> 标签：java, string, null

我有一个查询我正在从同一类中的另一段代码调用这样的方法

```
String message = "null";
//In this case have too show the Yes/No button screen
return performManualVerification(transaction, patientId, scriptInfo, message); 
```

如上所示，消息包含字符串 null 我将其传递给下面的方法，但是在调试时我正在检查它是否不用于空检查块，它应该进入空检查块，它正在进行无电话块。请指教

```
private int performManualVerification(ITransaction transaction,
      String patientId, String scriptInfo, String message)
  {

    if (message.equalsIgnoreCase(null))
    {
      int UserResponse = messageBox.showMessage("patientinfoVerification",
          null, IMessageBox.YESNO);

      if (UserResponse == IMessageBox.YES) {
               Map<String, List<String>> ppvValidatedinfo = getValidatedPatientData(transaction, patientId, scriptInfo);
        if(ppvValidatedinfo.get(patientId) != null){

          return MANUALLY_VERIFIED; // manually verified
        }      

      } 
        return RETURN_SALE;   
    }

    messageBox.showMessage("Nophone", null, IMessageBox.OK);

    int UserResponse = messageBox.showMessage("patientinfoVerification",
        null, IMessageBox.YESNO);

    if (UserResponse == IMessageBox.YES) {

      Map<String, List<String>> ppvValidatedinfo = getValidatedPatientData(transaction, patientId, scriptInfo);
      if(ppvValidatedinfo.get(patientId) != null){

        return MANUALLY_VERIFIED; // manually verified
      }      

    } 
      return RETURN_SALE;   
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T08:39:35.967

> String message = "null";

This is a string with value as null. But what you need is,

```
String message = null; 
```

Read about [What is null in Java?](https://stackoverflow.com/questions/2707322/what-is-null-in-java) post and the answer written by @polygenelubricants was well explained.

And also look at this constraint, this will give you a `NullPointerException` if message is null.

```
 if (message.equalsIgnoreCase(null)) 
```

So first check whether it is null or not.

```
if(message == null) {
   // do something.
} else {
   // Do something.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T16:56:31.063

我认为您应该在引号中使用 null 来获得预期的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T08:33:43.350

要解决此问题，您应该使用带引号的“null”，而不仅仅是`null`，它具有不同的含义。

*   "null" 只是另一个 Java `String。
*   `null`（不带引号）是可以分配给对象引用的文字，通常意味着它们不引用任何对象。

另一方面，如果你只想为引用分配一个空值，你应该使用空文字而不是`String`你可以像这样比较它：

```
 String s = null;
    if(s == null) 
```

# sql-server - 如何转换计算列的数据类型

> ID：14412560
> 
> 赞同：1
> 
> 时间：2013-01-19T08:33:19.917
> 
> 标签：sql-server

我想在 sql server 中转换列的数据类型，计算我正在使用的列，但如果我插入两个较大整数的值，它不会给出预期的结果，它表示算术溢出记录没有提交。我有以下代码。

```
CREATE TABLE mytable(
    firstcol [int] NULL,
    secondcol [int] NULL,
    computedcol  AS (firstcol * secondcol) 
```

但是当我输入 10 位运算作为加法或乘法时，它支持但如果我执行 123456789 * 123456789 它会显示算术溢出错误并且无法提交记录。可能意味着 computedcol 数据类型是 int 并且 sql server 中的 int 数据类型最多 10 位，如果超过它会显示溢出错误 bigint 数据类型是希望进行此类计算，但我不知道正确的代码需要帮助......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T08:37:04.203

您可以查看此链接，它肯定会回答您的查询：- [http://blog.sqlauthority.com/2008/09/29/sql-server-puzzle-solution-computed-columns-datatype-explanation/](http://blog.sqlauthority.com/2008/09/29/sql-server-puzzle-solution-computed-columns-datatype-explanation/)

> 当运算符组合不同数据类型的两个表达式时，数据类型优先级规则指定将具有较低优先级的数据类型转换为具有较高优先级的数据类型。我们可以将计算列定义的数据类型之一转换为我们想要的数据类型，它可以解决问题。

# javascript - 用 JavaScript 动态替换单词

> ID：14412564
> 
> 赞同：0
> 
> 时间：2013-01-19T08:33:49.970
> 
> 标签：javascript, jquery

有了这行代码

```
$("body").html($("body").html().replace(/1800/g,'6:00pm')); 
```

我可以替换这个词，但我怎样才能用这个脚本让它更有活力呢？

```
var getFormattedTime = function (fourDigitTime){
    var hours24 = parseInt(fourDigitTime.substring(0,2));
    var hours = ((hours24 + 11) % 12) + 1;
    var amPm = hours24 > 11 ? 'pm' : 'am';
    var minutes = fourDigitTime.substring(2);

    return hours + ':' + minutes + amPm;
}; 
```

我的 HTML 代码是例如

```
Your class will start at 1900, please be there by 1845. 
```

将计入哪个

```
Your class will start at 07:00pm, please be there by 06:45pm. 
```

我试过这个：

```
$("body").html($("body").html().replace(fourDigitTime, getFormattedTime(fourDigitTime)));

var fourDigitTime = document.getElementById('fourDigitTime').value;

var getFormattedTime = function (fourDigitTime){
var hours24 = parseInt(fourDigitTime.substring(0,2));
var hours = ((hours24 + 11) % 12) + 1;
var amPm = hours24 > 11 ? 'pm' : 'am';
var minutes = fourDigitTime.substring(2);

return hours + ':' + minutes + amPm;
}; 
```

这没用..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T08:47:25.790

[在 EmersonF 澄清应该替换**所有四个字母时间后编辑]**

您可以使用函数作为第二个参数来替换：

```
function formatTime(str, p1) {
   // do something with p1
   return // the formated time
}

$("body").html($("body").html().replace(/(\d?\d\d\d)/g, formatTime)); 
```

使用正则表达式中的括号“捕获”的字符串部分作为第二个参数（此处称为 p1）传递给函数

有关工作示例，请参见[http://jsfiddle.net/bjelline/pb8d2/](http://jsfiddle.net/bjelline/pb8d2/)

注意：正则表达式不能区分 2015 年，除了 8pm 之后，会将年份转换为时间！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T09:03:20.163

你可以使用这个：

```
var time = "1500";

$("body").html($("body").html().replace(time, getFormattedTime(time))); 
```

`replace()`不必总是`regex`。

# javascript - 以变 量开头的文件夹的正则表达式

> ID：14412575
> 
> 赞同：0
> 
> 时间：2013-01-19T08:35:24.440
> 
> 标签：javascript, regex

尝试查找以不区分大小写的变量开头的文件夹

```
var varname = ("BUI")
var stringMatch = "\\" + varname + "\\b";
if (FolderItems[i].name.match(stringMatch)) {
//do script
} 
```

我发现 Regex 很混乱，我知道`varname = \\\BUI\\\b`，但是我需要什么才能找到以该变量开头的文件夹？我希望这个找到一个名为`'Building_v02'`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T08:43:31.340

```
 if (FolderItems[i].name.match("^[BUI]")) {
  //do script
 } 
```

^ 表示字符串应以 'BUI' 开头

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T08:50:11.030

在[JavaScript 正则表达式语法](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)中，`^`是字符串开头的锚点。不区分大小写用`i`标志单独表示：

```
var varname = "BUI";
var re = new RegExp("^" + varname, "i");
if (re.test(FolderItems[i].name)) {
    // do script
} 
```

但是，如果字符串可能包含任何不需要的正则表达式元字符，则应该[转义该字符串。](https://stackoverflow.com/questions/3561493/is-there-a-regexp-escape-function-in-javascript)

另请注意，您可能不必使用正则表达式：

```
var varname = "BUI".toLowerCase();
if (FolderItems[i].name.toLowerCase().indexOf(varname) === 0) {
    // do script
} 
```

要实际迭代项目数组：

```
for (var i = 0; i < FolderItems.length; i++) {
    // ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T08:56:32.667

您可以在浏览器控制台中轻松尝试。我会说你最好`substring`在匹配字符串的开头时使用。

```
var matchFor = "BUI";
var folders = ["Building_v02","Building_v03", "unmatched"];
folders.filter(function(folder){
     return folder.substring(0,3).toLowerCase()===(matchFor.toLowerCase());
  }).forEach(function(value){
     console.log(value)
  }); 
```

这在旧版浏览器中不起作用，除非您添加 filter 和 forEach，例如使用[underscore.js](http://documentcloud.github.com/underscore/#)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T09:52:32.233

```
var varname = "BUI";
var stringMatch = '^' + varname + '\\b';

if ( FolderItems[i].name.match( RegExp( stringMatch, 'i' ) ) {
    //do script
} 
```

您可以`match`像之前那样传递一个字符串，但如果您传递一个 RegExp 对象，您可以提供第二个参数`i`，这表明您想要一个不区分大小写的匹配。

[正则表达式 MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)

# mysql - 简单的mysql正则表达式

> ID：14412580
> 
> 赞同：1
> 
> 时间：2013-01-19T08:36:26.733
> 
> 标签：mysql, regex

如以下语句所示，它匹配以一位或多位数字开头并后跟空格的字符串。你能向我解释一下为什么这会以 0 而不是 1 结束吗？
但是，如果我只是删除**^** ，它会输出 1 。据我所知，**^**匹配字符串的开头，我没有用错吗？
提前致谢。

```
SELECT "345 boxberry ave " REGEXP '^\d*[[.space.]][[:<:]]b'; 
```

[编辑] 基本上，我想匹配任何以“b”开头的街道名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T08:57:14.223

替换`\d`为`[[:digit:]]`：

```
SELECT "345 boxberry ave " REGEXP '^[[:digit:]]*[[.space.]][[:<:]]b'; 
```

另请注意，`*`匹配零个或多个 a 字符的`+`任何序列，同时匹配一个或多个 a 字符的任何序列。我不确定您的要求，但如果需要`+`数字，您可能需要使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T09:01:24.143

以简单的方式，您可以这样做：

```
 SELECT "345 boxberry ave " REGEXP '^[0-9]*[ ]+b.*'; //for begin with zero or more digits than one space and begin with character b 

 SELECT "345 boxberry ave " REGEXP '^[0-9]+[ ]+b.*'; //for begin with one or more digits 
```

不能在mysql中使用\d、\w等缩写。

# mysql - MySQL - 存储过程之间的延迟

> ID：14412587
> 
> 赞同：1
> 
> 时间：2013-01-19T08:37:45.917
> 
> 标签：mysql, delay, sleep

我有一个需要 2 到 5 分钟才能执行的程序。我希望在执行之间有 1 分钟的延迟来一直运行它。

我一直在尝试从过程中创建事件，但从 MySQL 5.3 开始就被禁止了。

MySQL有什么办法，或者我需要为它编码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T14:15:25.800

您确定从 Mysql 5.3 开始禁用“**事件调度程序”吗？**您从哪个来源获得该信息？

为什么我问是因为我可以在 Mysql 5.5 官方文档中看到[**Create event**](http://dev.mysql.com/doc/refman/5.5/en/create-event.html)部分。

在 Mysql 5.5 文档页面中也注意到了以下示例。

```
CREATE EVENT e_call_myproc
    ON SCHEDULE
      AT CURRENT_TIMESTAMP + INTERVAL 1 DAY
    DO CALL myproc(5, 27); 
```

# java - 使用java合并两个ms访问数据库

> ID：14412609
> 
> 赞同：1
> 
> 时间：2013-01-19T08:40:58.613
> 
> 标签：java, ms-access, jdbc

我正在尝试合并两个`ms access`使用的数据库`Java`。我正在从一个数据库建立连接，并从另一个数据库建立另一个连接。我正在将每个表中的所有记录复制到另一个数据库中的表中。

除了将记录从一个数据库表复制到另一个数据库表之外，还有其他解决方案吗？两个数据库具有相同的表结构。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T10:51:41.127

在大多数情况下，复制关系数据库比简单地复制表要多得多。例如，您必须考虑复制数据的顺序以避免违反完整性。

关于用于复制的 SQL，Access 将接受外部 mdb / acdb 的名称作为目标，因此只要您没有附件或多值字段数据类型，前两个语句就可以工作。另一个问题是自动编号 ID，如果它们可能重叠，则 INSERT INTO 是不安全的，因为您最终可能会出现重复。

```
SELECT * INTO AnotherTest IN 'Z:\Docs\test.accdb'
FROM test;

INSERT INTO AnotherTest IN 'Z:\Docs\test.accdb'
SELECT  *
FROM test; 
```

虽然上面的 INSERT 通常会起作用，但列出字段会更安全，省略任何自动编号字段。

```
INSERT INTO AnotherTest ( AText, ADate, ANumber ) IN 'Z:\Docs\test.accdb'
SELECT test.AText, test.ADate, test.ANumber
FROM test; 
```

所有的语句都是使用 MS Access 查询设计窗口构建的，并且只稍作修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T09:56:12.927

您是否使用 SQL 来执行此操作？如果是这样，那可能是您的 SQL 代码的问题，而不是您的 java 代码的问题。
您可以对程序进行多线程处理，以便将每个表或表集复制到不同的线程中。如果表名不更改，这将特别有用，因为您可以创建一个表名数组和一个将名称放入 SQL 查询的线程子类。如果您使用了 10 个左右线程的线程池，这应该会加快速度，但请注意这一点，因为我在访问和 java 方面的经验是数据库很容易损坏，因此请确保在尝试之前进行备份。

# android - Android library for making some 2D graph

> ID：14412611
> 
> 赞同：2
> 
> 时间：2013-01-19T08:41:23.467
> 
> 标签：android

I need to make an application which can show some 2D graph with the following View. Please, suggest library which can make exactly this type of graph. Thank you in advance. ![enter image description here](../Images/d974d46479dee2dcfd8e1b01edcaa0dc.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T09:19:59.030

AChartEngine 是一个用于 Android 应用程序的图表库。使用它，您可以创建一个图表，如下所示[http://code.google.com/p/achartengine/](http://code.google.com/p/achartengine/)检查此以获取制作图表的完整详细信息

# javascript - Google Maps Javascript API v3 热图不显示

> ID：14412612
> 
> 赞同：1
> 
> 时间：2013-01-19T08:41:28.220
> 
> 标签：javascript, google-maps, google-maps-api-3

由于某种原因，地图不会显示....无法真正弄清楚为什么。

下面是代码，由于某种原因，地图没有显示……这是我第一次使用 Google Maps API v3 API 做热图，所以我有点迷茫。

```
<!DOCTYPE html>
<html style="height: 100%">
  <head>
<meta charset="utf-8">
<title>Heatmap</title>
<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&libraries=visualization"></script>
<style type="text/css">
 html { height: 100% }
 body { height: 100%; margin: 0px; padding: 0px }
 #map { height: 200px; width: 100% }
   </style>  
</head>
<body onload="initialize()" style="height: 100%;>
<div id="map" style="height: 600px; width: 800px;"></div>
<script>
    var map, pointarray, heatmap;
    var callsForService = [
        new google.maps.LatLng(42.2861624, -85.5813606), 
new google.maps.LatLng(42.3033738, -85.583591), 
new google.maps.LatLng(42.2453713, -85.584707), 
new google.maps.LatLng(42.3034079, -85.5973274), 
new google.maps.LatLng(42.249651, -85.595145), 
new google.maps.LatLng(42.2897601, -85.5858846), 
new google.maps.LatLng(42.321433, -85.551406), 
new google.maps.LatLng(42.2848497, -85.5906321), 
new google.maps.LatLng(42.2916942, -85.5818942), 
new google.maps.LatLng(42.3033738, -85.583591), 
new google.maps.LatLng(42.3061913, -85.5962831), 
new google.maps.LatLng(42.321433, -85.551406), 
new google.maps.LatLng(42.2917069, -85.5872286), 
    ];
    function initialize() {
        var mapOptions = {
            zoom: 15,
            center: new google.maps.LatLng(42.2800153,-85.5828371),
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };

        map = new google.maps.Map(document.getElementById('map'),
            mapOptions);

        pointArray = new google.maps.MVCArray(callsForService);

        heatmap = new google.maps.visualization.HeatmapLayer({
            data: pointArray
        });

        heatmap.setMap(map);
  }
</script>
</body>
</html>` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T10:33:21.050

缺少双引号：

```
<body onload="initialize()" style="height: 100%;">
------------------------------------------------^ 
```

同时删除结尾的逗号`callsForService`

# java - 如何使用该文件名的子字符串删除文件

> ID：14412613
> 
> 赞同：2
> 
> 时间：2013-01-19T08:41:33.063
> 
> 标签：java

我有文件

```
LOG_EXPORT_TIME_STAMP_IMAGES-LOG1-T20130119_000817
LOG_EXPORT_TIME_STAMP_IMAGES-LOG1-T20130119_000818
LOG_EXPORT_TIME_STAMP_IMAGES-LOG1-T20130119_000819 
```

在`"C:\temp"`我想删除所有以 . 开头的文件的位置`"LOG_EXPORT_TIME_STAMP_IMAGES"`。我已经做了一些谷歌并得到了类似的代码

```
File file = new File("c:\\Temp\\LOG_EXPORT_TIME_STAMP_IMAGES-LOG1-T20130119_000817");

file.delete() 
```

但我观察到我将不得不传递文件的全名。我可以通过传递该文件的子字符串来做到这一点吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T08:47:39.873

首先列出目录中的文件

```
File[] files = directory.listFiles(); 
```

然后遍历数组并单独删除每个文件。这应该使您可以更好地控制选择要删除的文件。

这些线上的东西：

```
File directory = new File("C:\temp");
File[] files = directory.listFiles();
for (File f : files)
{
    if (f.getName().startsWith("LOG_EXPORT_TIME_STAMP_IMAGES"))
    {
      f.delete();
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-19T08:55:56.487

使用 FilenameFilter 处理具有已知模式的文件名。

在你的情况下，尝试这样的事情：

```
File[] files = directory.listFiles(new FilenameFilter()
     {
         public boolean accept(File dir, String name)
         {
             if(name.startsWith(<your string here>)
             {
                 return true;
             }
             return false;
         }

     }); 
```

然后遍历返回文件数组以删除它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T08:44:52.497

您需要完整的文件名，因此您必须获取目录中的文件列表并遍历它们以确定要删除的文件。

这篇文章展示了如何获取文件列表并使用它。它确实处理目录内的目录。[列出Java中目录和子目录中的所有文件](https://stackoverflow.com/questions/3008043/list-all-files-from-directories-and-subdirectories-in-java)

# c# - How to build a solution that refers to another project without building both solutions i C#

> ID：14412615
> 
> 赞同：1
> 
> 时间：2013-01-19T08:41:47.487
> 
> 标签：c#, .net, assemblies

I'm working with two solutions, **solution_1**(incl. **project_1 and project_2**) and **solution_2**(incl. **project_3**), where I keep getting feature requests from users to add functionality in project_3 in solution_2\. The reason why I have to solutions is that another programmer needs to be able to add functionalities into **project_3** and release this, but I don't want him to access the **project_1**. When I want to release the new feature I have to build and release projects in both solutions, but I've only made changes in **project_3**, so this project should be the only one released.

As for now, **project_1** has an reference to the assembly **project_3**, where the property `Copy to local` is FALSE but this results in this error:

```
Assembly 'project_3.dll' must be strong signed in order to be marked as a prerequisite. 
```

Whenever I build project_3 the output path is set to a folder which is visible to both solutions.

My point is that I don't want to keep building and releasing **project_1** in **solution_1** in which I haven't made any changes, but only build and release **project_3** in **solution_2**, which actually has changes in it, for the new features to be available for the users.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T11:10:20.233

一个项目可以在多个解决方案中。您可以简单地将**project_3**添加到**solution_1**，这样当项目更改时，您只需重新编译一个解决方案。

请注意，如果您这样做，您应该注意一些问题；主要是常识性的东西，但仍然：

*   其他解决方案中的重构工具不知道这个解决方案。换句话说，它们可能会破坏依赖关系（例如，如果对解决方案_2 进行了重构，解决方案_1 对项目_3 的依赖关系（两者都存在）是有问题的）。
*   最好不要同时打开两个解决方案，以避免覆盖您自己的更改。
*   尽管 VS.NET 支持这一点，但它并没有特别努力使它变得简单。因此，如果您的项目文件包含对解决方案范围变量的引用，您需要手动确保这没问题（例如，如果您有任何自定义构建步骤）
*   特别是，nuget 默认将其包存储在解决方案级别的 /packages 文件夹中。如果一个项目在不同的解决方案中，这个包文件夹可能在不同的位置（不同的相对路径），这将存储在项目文件中并导致问题。我会避免 nuget 文件夹的不同（相对）路径。

您不应该引用 project_3 创建的*程序集*，您应该在解决方案 1 中包含现有项目 3，并引用项目*本身*。（这与强签名无关 - 这是一个不同的错误）。

# android - Android onPreviewFrame is not called

> ID：14412618
> 
> 赞同：15
> 
> 时间：2013-01-19T08:42:05.163
> 
> 标签：android, camera

I have a problem with camera. I want to get picture in onPreviewFrame but it's never called. I opened a camera, set preview Display and preview Callback but nothing. I just want to understand where I was wrong.

```
public class VideoCall extends Activity implements View.OnClickListener, Callback, PreviewCallback
{

    TabHost thVideoChat;
    Button btnVideoUp, btnVideoDown;
    Handler uiHandler;
    SurfaceView videoPrev;
    SurfaceHolder surfaceHolder;
    Camera camera;

    Timer timer;
    boolean getPic;

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.a_video);
        initialize();

        Log.d("RAYZ", "onCreate");
    }

    private void initialize()
    {

        thVideoChat = (TabHost) findViewById(R.id.thVideoChat);
        thVideoChat.setup();

        TabSpec specs = thVideoChat.newTabSpec("1");
        specs.setContent(R.id.tabVideo);
        specs.setIndicator("Видео", getResources().getDrawable(R.drawable.mcam));
        thVideoChat.addTab(specs);

        specs = thVideoChat.newTabSpec("2");
        specs.setContent(R.id.tabChat);
        specs.setIndicator("Чат", getResources().getDrawable(R.drawable.mchat));
        thVideoChat.addTab(specs);

        btnVideoUp = (Button) findViewById(R.id.btnVideoUp);
        btnVideoDown = (Button) findViewById(R.id.btnVideoDown);
        btnVideoUp.setOnClickListener(this);
        btnVideoDown.setOnClickListener(this);

        videoPrev = (SurfaceView) findViewById(R.id.videoPrev);

        if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_PORTRAIT)
        {

            LayoutParams lp = videoPrev.getLayoutParams();
            lp.height = 320;
            lp.width = 240;
            videoPrev.setLayoutParams(lp);

        }
        else
        {
            LayoutParams lp = videoPrev.getLayoutParams();
            lp.height = 240;
            lp.width = 320;
            videoPrev.setLayoutParams(lp);
        }

        surfaceHolder = videoPrev.getHolder();
        surfaceHolder.addCallback(this);
        surfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

        uiHandler = new Handler();
        getPic = false;
    }

    @Override
    protected void onPause()
    {
        Log.d("RAYZ", "onPause");
        if (camera != null)
        {
            camera.setPreviewCallback(null);
            camera.stopPreview();
            camera.release();
            camera = null;
        }
        if (timer != null)
        {
            timer.cancel();
        }
        super.onPause();
    }

    @Override
    protected void onResume()
    {
        super.onResume();
        camera = Camera.open();
    }

    @Override
    public void onClick(View v)
    {
        switch (v.getId())
        {
            case R.id.btnVideoUp:
            {
                btnVideoUp.setEnabled(false);
                btnVideoDown.setEnabled(true);

                timer = new Timer();

                Log.d("RAYZ", "G_BTN");

                timer.schedule(new TimerTask()
                {

                    @Override
                    public void run()
                    {
                        uiHandler.post(new Runnable()
                        {

                            @Override
                            public void run()
                            {
                                getPic = true;
                            }
                        });
                    }
                }, 0L, 1L * 500L);

                break;
            }
            case R.id.btnVideoDown:
            {
                btnVideoUp.setEnabled(true);
                btnVideoDown.setEnabled(false);
                Log.d("RAYZ", "R_BTN");
                timer.cancel();
                timer = null;
                break;
            }
            default:
                break;
        }

    }

    @Override
    public void onPreviewFrame(byte[] data, Camera camera)
    {
        Log.d("RAYZ", "getPic");
        // if (getPic)
        // {

        // }

    }

    @Override
    public void surfaceChanged(SurfaceHolder holder, int format, int width, int height)
    {

    }

    @Override
    public void surfaceCreated(SurfaceHolder holder)
    {   

        try
        {

            camera.setPreviewDisplay(holder);
            camera.setPreviewCallback(this);
            camera.startPreview();
        }
        catch (IOException e)
        {
            e.printStackTrace();
        }

    }

    @Override
    public void surfaceDestroyed(SurfaceHolder holder)
    {

    }

} 
```

Tried this code on 2 other devices (phones HTS and Sony Xperia) and everything worked fine. But on my tablet it does not work. I'm confused.

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-06-21T11:25:16.837

我一直在努力解决这个问题，我的解决方案是在 SurfaceView.surfaceChanged 中的 Camera.setPreviewDisplay 之后调用 Camera.setPreviewCallback：

```
public void onCreate(Bundle state) { log("onCreate");
    try {
        super.onCreate(state);
        setContentView(R.layout.main);
        text = (TextView) findViewById(R.id.text);
        surface = (SurfaceView) findViewById(R.id.surface);
        int type = SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS;
        surface.getHolder().setType(type);//REQUIRED:API10
        surface.getHolder().addCallback(this);
        camera = Camera.open();
        camera.setDisplayOrientation(90); // portrait mode only
    } catch (Exception e) {
        showException(e);
    }
}

public void surfaceChanged(SurfaceHolder sh, int format, int w, int h) { log("surfaceChanged");
    try {
        camera.stopPreview();
        Size s = camera.getParameters().getPreviewSize();
        LayoutParams params = surface.getLayoutParams();
        params.height = w*s.width/s.height; // portrait mode only
        surface.setLayoutParams(params);
        camera.setPreviewDisplay(sh);
        camera.setPreviewCallback(this);
        camera.startPreview();
    } catch (Exception ex) {
        showException(ex);
    }
} 
```

阅读大量文章后，我意识到如果相机没有完全初始化的 SurfaceHolder，setPreviewCallback 可能会失败。

我希望这有帮助 ...

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-25T18:56:09.850

我建议将surfaceCreated 中的代码移动到surfaceChanged 中，特别是因为您在onCreate 期间（在initialize() 中）覆盖了预览图面的布局。

一般来说，只响应 surfaceChanged 会更安全，因为每次表面大小发生变化时都会调用它。您可能应该检查是否已经在 surfaceChanged 中运行了预览。

正如其他人所说，预览表面的大小并不能决定您在预览回调中收到的预览缓冲区的大小；这是由 setPreviewSize 方法设置的，您必须使用您从中获得的受支持预览尺寸列表中的值

```
 Camera.Parameters.getSupportedPreviewSizes(). 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T09:44:09.990

您必须在surfaceChanged 方法中调用setPreviewCallback，而不仅仅是在surfaceCreated 中。这是我的主要**CameraActivity.java**：

```
package com.example.cameraview;

import java.util.Hashtable;

import android.app.Activity;
import android.hardware.Camera;
import android.hardware.Camera.Size;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.FrameLayout;
import android.widget.ImageView;

import com.google.zxing.BinaryBitmap;
import com.google.zxing.DecodeHintType;
import com.google.zxing.MultiFormatReader;
import com.google.zxing.NotFoundException;
import com.google.zxing.PlanarYUVLuminanceSource;
import com.google.zxing.Result;
import com.google.zxing.common.HybridBinarizer;

public class CameraActivity extends Activity implements Camera.PreviewCallback {

    private Camera mCamera;
    private CameraPreview mPreview;

    private Result result;
    private MultiFormatReader reader; 

    @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

        reader = new MultiFormatReader();
        Hashtable<DecodeHintType, Object> hints = new Hashtable<DecodeHintType, Object>();
        hints.put(DecodeHintType.TRY_HARDER, Boolean.TRUE);
        reader.setHints(hints);

    // Create an instance of Camera
    mCamera = getCameraInstance();

    // Create our Preview view and set it as the content of our activity.
    mPreview = new CameraPreview(this, mCamera);
    FrameLayout preview = (FrameLayout) findViewById(R.id.camera_preview);
    preview.addView(mPreview);
    }

    public void onPause() {
        super.onPause();

        if (mCamera != null) {
            mCamera.setPreviewCallback(null);
            mPreview.getHolder().removeCallback(mPreview);
            mCamera.release();
        }
    }

    /** A safe way to get an instance of the Camera object. */
    public static Camera getCameraInstance(){
    Camera c = null;
    try {
        c = Camera.open(); // attempt to get a Camera instance
    }
    catch (Exception e){
        // Camera is not available (in use or does not exist)
    }
    return c; // returns null if camera is unavailable
    }

    public void onPreviewFrame(byte[] data, Camera camera) {
    Size size = mCamera.getParameters().getPreviewSize();
        PlanarYUVLuminanceSource source = new PlanarYUVLuminanceSource(data, size.width, size.height, 0, 0, size.width, size.height, false);
        HybridBinarizer hybBin = new HybridBinarizer(source);
        BinaryBitmap bitmap = new BinaryBitmap(hybBin);

    ImageView myImage = (ImageView) findViewById(R.id.foto);

        try {
            result = reader.decode(bitmap);
        Log.d("Result", "Result found!: " + String.valueOf(result));

        myImage.setVisibility(View.VISIBLE);

        if (String.valueOf(result).contentEquals("1"))
            myImage.setImageResource(R.drawable.juan);
        else if (String.valueOf(result).contentEquals("2"))
            myImage.setImageResource(R.drawable.antonio);

        } catch (NotFoundException e1) {

            if (myImage != null)
        myImage.setVisibility(View.INVISIBLE);

        Log.d("NotFoundException", "NotFoundException");
        } finally {
        reader.reset();
        }
    }

 } 
```

这是我的 CameraPreview.java：

```
package com.example.cameraview;

import java.io.IOException;
import java.util.List;

import android.content.Context;
import android.hardware.Camera;
import android.hardware.Camera.PreviewCallback;
import android.hardware.Camera.Size;
import android.hardware.Camera.Parameters;
import android.util.Log;
import android.view.SurfaceHolder;
import android.view.SurfaceView;

/** A basic Camera preview class */
public class CameraPreview extends SurfaceView implements SurfaceHolder.Callback {
    private SurfaceHolder mHolder;
    private Camera mCamera;
    private String TAG = "CameraPreview";
    private Context context;

    @SuppressWarnings("deprecation")
    public CameraPreview(Context context, Camera camera) {
    super(context);
    mCamera = camera;
    this.context = context;

    // Install a SurfaceHolder.Callback so we get notified when the
    // underlying surface is created and destroyed.
    mHolder = getHolder();
    // deprecated setting, but required on Android versions prior to 3.0
    mHolder.addCallback(this);
    mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
    }

    public void surfaceCreated(SurfaceHolder holder) {
    // The Surface has been created, now tell the camera where to draw the preview.
    try {
        mCamera.setPreviewDisplay(holder);
        mCamera.startPreview();

    } catch (NullPointerException e) {
        Log.d(TAG, "Error setting camera preview - nullpointerexception: " + e.getMessage());
    } catch (IOException e) {
        Log.d(TAG, "Error setting camera preview: " + e.getMessage());
    }
    }

    public void surfaceDestroyed(SurfaceHolder holder) {
    // empty. Take care of releasing the Camera preview in your activity.
    }

    public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
    // If your preview can change or rotate, take care of those events here.
    // Make sure to stop the preview before resizing or reformatting it.

    if (mHolder.getSurface() == null){
      // preview surface does not exist
      return;
    }

    // stop preview before making changes
    try {
        mCamera.stopPreview();
    } catch (Exception e){
      // ignore: tried to stop a non-existent preview
    }

    // set preview size and make any resize, rotate or
    // reformatting changes here

    // start preview with new settings
    try {
        Parameters parameters = mCamera.getParameters();

        List<Size> sizes = parameters.getSupportedPreviewSizes();
        Size optimalSize = getOptimalPreviewSize(sizes, w, h);
        parameters.setPreviewSize(optimalSize.width, optimalSize.height);

        if (context.getPackageManager().hasSystemFeature("android.hardware.camera.autofocus"))
            parameters.setFocusMode(Camera.Parameters.FOCUS_MODE_CONTINUOUS_PICTURE);

        mCamera.setParameters(parameters);

        mCamera.setPreviewCallback((PreviewCallback) context);
        mCamera.setPreviewDisplay(mHolder);
        mCamera.startPreview();

    } catch (Exception e){
        Log.d(TAG, "Error starting camera preview: " + e.getMessage());
    }
    }

    private Size getOptimalPreviewSize(List<Size> sizes, int w, int h) {
    final double ASPECT_TOLERANCE = 0.05;
    double targetRatio = (double) w / h;
    if (sizes == null) return null;

    Size optimalSize = null;
    double minDiff = Double.MAX_VALUE;

    int targetHeight = h;

    // Try to find an size match aspect ratio and size
    for (Size size : sizes) {
        double ratio = (double) size.width / size.height;
        if (Math.abs(ratio - targetRatio) > ASPECT_TOLERANCE) continue;
        if (Math.abs(size.height - targetHeight) < minDiff) {
            optimalSize = size;
            minDiff = Math.abs(size.height - targetHeight);
        }
    }

    // Cannot find the one match the aspect ratio, ignore the requirement
    if (optimalSize == null) {
        minDiff = Double.MAX_VALUE;
        for (Size size : sizes) {
            if (Math.abs(size.height - targetHeight) < minDiff) {
                optimalSize = size;
                minDiff = Math.abs(size.height - targetHeight);
            }
        }
    }
    return optimalSize;
    }
} 
```

忽略阅读器和 zxing 的东西，这是 ZXing 库中显示布局超过 qr 检测的概念证明。

这是在 StackOverflow 中搜索我的代码错误时发现的混合解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T15:42:19.423

您可能需要为低功耗设备设置较低的预览分辨率。将表面视图大小设置为 320x240 对相机本身的预览分辨率没有影响，必须明确设置预览分辨率。你可以尝试这样的事情：

```
List<Camera.Size> resList = camera.getParameters().getSupportedPreviewSizes();
int w=0, h=0;
final int desiredRes_W = 176;
for ( Camera.Size size : resList ) {
    // find a supported res nearest to desired_Res
    if ( w==0 ) {
        w = size.width;
        h = size.height;
    }
    else if ( size.width >= desiredRes_W && size.width <= w  ) {
        w=size.width;
        h = size.height;
    }
}   // 176x144, 320x240 ...
Parameters par = camera.getParameters();
par.setPreviewSize(w, h);
// ALSO set width/height of the SurfaceView to the same aspect ratio.
camera.setParameters(par);
camera.setPreviewDisplay(holder); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-18T21:53:01.800

对我来说，某些设备（例如 lg Rebel 3）从不打电话`onPreviewFrame()`而其他设备（任何三星）。问题原来是我使用的是`setPreviewCallbackWithBuffer()`方法而不是`setPreviewCallback()`. 我试图提高记忆效率。一旦我变回`setPreviewCallback()`一切都在嗡嗡作响。

# python - 如何在 Python 解释器中启动 Vim？

> ID：14412625
> 
> 赞同：4
> 
> 时间：2013-01-19T08:42:49.870
> 
> 标签：python, vim

在 Ruby 中有一个 gem ，它允许在进入Ruby 解释器`interactive_editor`时进入 vim 会话。`vi`

从字面上看，我们需要[`interactive_editor.rb`](https://github.com/jberkel/interactive_editor/blob/master/lib/interactive_editor.rb)在`~/.irbrc`文件中要求，如下所示：

```
require '~/interactive_editor.rb' 
```

我们完成了。当我们`vi`在交互式会话中做时；vim 启动。一旦我们退出编辑器，vim 会话中的代码就会被执行。[这是有关在 irb 中运行 vim 的更多信息](http://vimcasts.org/episodes/running-vim-within-irb/)。

那么，在 Python 中有什么等价的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T09:09:35.493

vim-ipython 插件是 IPython 和 Vim 之间的双向集成。

引用[https://github.com/ivanov/vim-ipython](https://github.com/ivanov/vim-ipython)上的自述文件：

> 使用这个插件，您可以发送行或整个文件供 IPython 执行，还可以在 Vim 中取回对象自省和单词补全，就像您在 IPython 中得到`object?<enter>`的一样。`object.<tab>`

这是插件的演示：http: [//pirsquared.org/vim-ipython/](http://pirsquared.org/vim-ipython/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T09:42:15.107

```
from os import system as sh
def vim(fname): sh('vim ' + fname) 
```

（重新）加载模块的一种可能方式：

```
import imp
from os import system as sh

def _vim(fname, globs):
    sh('vim ' + fname)
    (dirname, _, basename) = fname.rpartition('/')
    modname = basename.rpartition('.')[0]
    m = imp.load_source(modname, fname)
    globs[modname] = m 
```

并且每当您将其导入解释器时，建议手动制作包装器：

```
def vim(fname): _vim(fname, globals()) 
```

因为`globals()`在 python 文件中调用包含文件的全局变量，而不是解释器的全局变量。我知道，这并不优雅。但我建议手动重新加载模块`reload(modname)`，它可以让你有更多的控制权，虽然可能很乏味。

# php - 文件类型验证不起作用

> ID：14412627
> 
> 赞同：0
> 
> 时间：2013-01-19T08:42:52.303
> 
> 标签：php, yii

我创建了表单来上传文件，还创建了模型来验证类型。如果我上传 php 文件或任何文件将成功上传，但在模型中我添加的文件类型只是“jpg、gif、png、pdf、rar、zip、doc、docx”

如何解决？

看法 ：

```
.......
<div class="form">
<?php $form=$this->beginWidget('CActiveForm', array(
    'id'=>'Cfiles-form',
   /*
        'enableAjaxValidation'=>true,
        'enableClientValidation'=>true,
        'clientOptions'=>array('validateOnSubmit'=>true), //This is very important
       */
       'clientOptions'=>array('validateOnSubmit'=>true), //This is very important
       'htmlOptions' => array('enctype' => 'multipart/form-data'),
)); ?>

<?php
/// difine Section model 
$models=new Courses;
?>
<?php echo $form->errorSummary($model,'يرجى تعديل الأخطاء التالية'); ?>
<table>
<h3> إضافة ملفات الدورات</h3>
<tr>
    <td>
        <div class="row">
        <?php echo $form->labelEx($model,'title'); ?>
        <?php echo $form->textField($model,'title',array('size'=>60,'maxlength'=>255)); ?>
        <?php echo $form->error($model,'title'); ?>
    </div>

    </td>
</tr>
<tr>
    <td>
            <div class="row">
        <?php echo $form->labelEx($model,'desc'); ?>
        <?php echo $form->textField($model,'desc',array('size'=>60,'maxlength'=>600)); ?>
        <?php echo $form->error($model,'desc'); ?>
    </div>
    </td>
</tr>
<tr>
    <td>
    <div class="row">
        <?php echo $form->labelEx($model,'file'); ?>
        <?php echo $form->fileField($model,'file'); ?>
        الملفات المسموحة : jpg,gif, png,pdf,rar,zip,doc,docx
        <?php echo $form->error($model,'file'); ?>
    </div>
    </td>
</tr>
....... 
```

模型：

```
....
public function rules(){
        // NOTE: you should only define rules for those attributes that
        // will receive user inputs.
        return array(
            array('title, desc,  privacy', 'required','message'=>'يرجى ملئ حقل {attribute}  '),
            array('privacy', 'numerical', 'integerOnly'=>true),
            array('title', 'length', 'max'=>255),
            array('desc', 'length', 'max'=>600),

             array('file', 'file', 'types'=>'jpg,gif, png,pdf,rar,zip,doc,docx','allowEmpty'=>true, 'on'=>'update'),
            // The following rule is used by search().
            // Please remove those attributes that should not be searched.
            array('f_id, title, desc, file, privacy', 'safe', 'on'=>'search'),
        );
    }
..... 
```

控制器 ：

```
public function actionCreate()
    {
        $model=new Cfiles;

        $models= new Courses;

        // Uncomment the following line if AJAX validation is needed
    $this->performAjaxValidation($model);

        if(isset($_POST['Cfiles'])){
            $model->attributes=$_POST['Cfiles'];
            $valdiate=$model->validate();

         /////// upload image functions 
         $rnd = rand(0,999984375);  // generate random number between 0-9999
         $model->attributes=$_POST['Cfiles']['file'];
         $uploadedFile=CUploadedFile::getInstance($model,'file');
        if(!empty($uploadedFile)){
            $ext=$uploadedFile->getExtensionName();
            $fileName = "samilox$rnd.{$ext}";  // random number + file name
            }

             ////////// end 

            if($model->save()){
                    if(!empty($uploadedFile))  // check if uploaded file is set or not
                {
                 $uploadedFile->saveAs(Yii::app()->basePath.'/../cfillaf/'.$fileName);  // upload image to server 
                  $model->file = $fileName;

                  $model->save(false);
               }   

              echo " Work ";
              $this->redirect(array('cfiles/admin'));
       }
                else{

          echo " error";

                $this->redirect(array('cfiles/admin'));
                }
        }

         $this->layout='adminsidebar';
         if(Yii::app()->request->getIsAjaxRequest())
          echo $this->renderPartial('_form',array('model'=>$model),true,true);//This will bring out the view along with its script.

                else $this->render('create',array(
                        'model'=>$model,
                ));

        } 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T14:22:32.973

删除模型文件规则功能中的 'on'=>'update' 以解决您的问题。

array('file', 'file', 'types'=>'jpg,gif, png,pdf,rar,zip,doc,docx','allowEmpty'=>true, **'on'=>'update'** ),

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T14:10:49.517

感谢 Bool.dev

是的，我忘了在插入场景中添加验证

代码 ：

```
array('file', 'file', 'types'=>'jpg,gif, png,pdf,rar,zip,doc,docx','allowEmpty'=>false, 'on'=>'insert'), 
```

# sql - PostgreSQL 各种字符串\varchar 的清理

> ID：14412635
> 
> 赞同：4
> 
> 时间：2013-01-19T08:44:12.673
> 
> 标签：sql, regex, postgresql, pattern-matching

我必须以下列方式清理一些 varchar：

1.  `!, @, #, $, %, ^, &, *, (, ), }, {, [, ], ",", ., ?, /, ',`从关闭的列表中删除特殊字符，例如： 。我已经设法通过大量使用 replace\regexp_replace 来做到这一点，但我正在寻找类似于 SQL Server 中的东西。

2.  删除以下数字但不删除相邻的含义：

    `round 1 --> round`
    `round1 --> round1`
    `round 12345 --> round`
    `round12345 --> round12345`

3.  从封闭的单词列表中删除单词，例如：**“and”、“or”、“Ltd.”、“international”，**不带子字符串：

    `more food or drinks ---> more food drinks. and not --> me food or drinks`

我正在一张大桌子上工作，我想尽可能高效地完成它。
我应该编写一个可以做到这一点的函数还是有更优雅的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T09:51:02.463

1\. 最好用空格替换不在允许列表中的字符，如下所示：

```
select regexp_replace(
    E'aśx€ ąsd, dsa w|adwf\n  as dw dgaa[aw] asdd',
    '[^a-zA-Z0-9]',
    ' ',
    'g'); 
```

这返回

```
a x   sd  dsa w adwf   as dw dgaa aw  asdd 
```

Unicode 中有数以千计的可能字符——实际上不可能列出所有*特殊*字符。

取出多个连续的空格作为练习留给读者。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-19T10:09:18.233

我会一起玩的。这是**问题2**：

```
SELECT trim(regexp_replace(
   '12 foo1 run 1457 ABC 1Foo 2456 bar 34',
   '\s*\m\d+\M\s*',
   ' ',
   'g'
   )); 
```

回报：

```
foo1 run ABC 1Foo bar 
```

我更新了使用*约束表达式*而不是*括号表达式*的答案，因为手册告知：

> 下面描述的约束转义通常是可取的；它们不再是标准的，但更容易输入。

`\s*`.. 零个或多个空格
`\m`.. 单词的开头（与 相同`[[:<:]]`）
`\d+`.. 1 个或多个数字
`\M`.. 单词的结尾（与 相同`[[:>:]]`）

需要第四个参数`'g'`来替换“全局”，而不仅仅是第一次出现。

[->](http://sqlfiddle.com/#!12/d41d8/408)用于 v9.2的 sqlfiddle
[->](http://sqlfiddle.com/#!11/d41d8/29)用于 v8.4 的 sqlfiddle 不起作用

### 为什么？

[`standard_conforming_strings`](http://www.postgresql.org/docs/current/interactive/runtime-config-compatible.html#GUC-STANDARD-CONFORMING-STRINGS). v9.1 更改了默认设置。

*这*适用于两个世界，可以说是“兼容模式”。但是上面现代版本的语法（与 结合使用`standard_conforming_strings = on`）更清晰。

```
SELECT trim(regexp_replace(
  '12 foo1 run 1457 ABC 1Foo 2456 bar 34',
  E'\\s*\\m\\d+\\M\\s*',
  ' ',
  'g'
)); 
```

[-> sqlfiddle](http://sqlfiddle.com/#!11/d41d8/30)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-19T10:50:20.693

3.我认为最快的方法是：

```
select regexp_replace(
  'And more food or drinks at the international airport Ltd',
  '[[:<:]](and|or|Ltd|international)[[:>:]]',
  ' ',
  'gi'
); 
```

这将返回：

```
 more food  drinks at the  airport 
```

我认为`Ltd.`确实是`Ltd`，因为在第一个答案中过滤掉了一个点。

# c# - MbUnit: Run code after all fixtures have been run

> ID：14412639
> 
> 赞同：0
> 
> 时间：2013-01-19T08:44:52.420
> 
> 标签：c#, unit-testing, mbunit, gallio

I'm using MbUnit + Gallio. I know that MbUnit has attributes which can be applied to methods which should run:

1.  [FixtureSetUp] - before each fixture
2.  [FixtureTearDown] - after each fixture
3.  [SetUp] - before each test
4.  [TearDown] - after each test

But, say, I run several fixtures at once. And I would like to run a piece of code after ALL fixtures have already been run.

Is it possible to do it?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T08:37:58.197

找到了解决方案。它非常简单优雅。您只需使用 [AssemblyFixture] 属性创建一个单独的类，并使用 [FixtureSetUp] 和 [FixtureTearDown] 属性定义 2 个方法。他们将在整个夹具套件之前和之后被调用。

```
 [AssemblyFixture]
    public class FixtureAssemblyClass
    {
        [FixtureSetUp]
        public void BeforeRunAssembly()
        {

        }

        [FixtureTearDown]
        public void AfterRunAssembly()
        {

        }
    } 
```

# php - php, .htaccess - 将非扩展重定向到索引 + 将用户名重定向到用户页面

> ID：14412648
> 
> 赞同：0
> 
> 时间：2013-01-19T08:45:55.910
> 
> 标签：php, .htaccess, redirect

我在谷歌和stackoverflow中搜索了很多，但没有找到完整的答案......

我想做的是：

1) 将所有非分机地址重定向到它们的页面。例如：主页 -> home.php

2）将用户名重定向到搜索用户名的页面，如果存在，则加载另一个页面。例如：www.example.com/michael 将重定向到 go.php 并获取“michael”并且如果用户存在；转到 user.php?id=michael

它完全像脸书和推特！就像你输入“home”一样，它会进入主页，如果你输入用户名，它会进入你的个人资料！

我怎么能做这样的事情？

* * *

**编辑**：或者可能是 .htaccess 在第一个斜杠之后发送任何内容到页面。例如：

```
www.example.com/this/is/test 
```

将会：

```
www.example.com/index.php?var1=this&var2=is&var3=test 
```

然后 index.php 页面将决定做什么......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T10:44:33.673

你可以试试这个：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} ^/([^/]+)?/?([^/]+)?/?([^/]+)?/?   [NC]
RewriteRule .*     index.php?var1=%1&var2=%2&var3=%3   [L] 
```

静默地图

`http://www.example.com/this/is/test`

到

`http://www.example.com/index.php?var1=this&var2=is&var3=test`

**所有参数都是可选的，最多 3 个。**

如果需要更多，`([^/]+)?/?`请在右端为每个添加

`RewriteCond %{REQUEST_URI}`

行并相应地添加键 ( `varN`) 到 RewriteRule 中的 index.php 查询，`%N`用于反向引用它们。

# c# - 如何将数据类型（字符串）转换为类型（表单）

> ID：14412652
> 
> 赞同：3
> 
> 时间：2013-01-19T08:46:17.880
> 
> 标签：c#, winforms

我有一个存储在字符串变量中的表单名称，我想将此字符串传递给采用表单类型的类

```
string Str = "MainForm";       // this is form name 
// I try to convert the data type string to form type like this
Form FormNm = (Form) Str ;
// there is the message appears cannot convert type 'sting'   to 'form'
TransLang.SaveControlsLanguage(FormNm);   // this is the class 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T08:47:59.640

```
string myType = "MyAssembly.MyType";

Assembly asm = Assembly.LoadFrom("MyAssembly.dll"); // creating instance by loading from other assembly
//Assembly asm = Assembly.GetExecutingAssembly();  // for creating instance from same assembly
//Assembly asm = Assembly.GetEntryAssembly(); // for creating instance from entry assembly
Type t = asm.GetType(myType);

Object obj = Activator.CreateInstance(t, null, null); 
```

因为它是一个 System.Windows.Form 如果你想显示你可以做的表格

```
Form frm = obj as Form; // safely typecast
if (frm != null) // kewl it is of type Form
{
    //work with your form
    fmr.Show();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T08:57:56.503

```
System.Reflection.Assembly.GetExecutingAssembly();
  Form frm = (Form)asm.CreateInstance("WindowsFormsApplication1.<string>");
  frm.Show(); 
```

将此添加到您的代码中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T08:48:33.057

您不能直接将 a 转换`string`为 a `form`。您应该创建一个新表单并将表单的名称设置为相关字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T08:51:53.023

好吧，你基本上不能。您*可以*做的是定义自定义转换运算符，它基于一些逻辑，给定指定的字符串，创建一个表单。但这将是**非常有线**的解决方案。

相反，只需重新构建您的代码并根据提供的字符串创建一个表单。例如：

```
//Dictionary of the string versus Forms
Dictionary<string,Form> data = new Dictionary<string,Form> {
   { "string1", new Form1()}, //different form type are associated
   { "string2", new Form2()}  // to different string keys
    .....
}; 

public Form GetForm(string value){    
   return data [value];
} 
```

只是一个想法，构建你*真正*需要的东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-19T10:07:52.707

您可以使用此代码，

```
System.Reflection.Assembly.GetExecutingAssembly();
Form newForm = (Form)asm.CreateInstance("WindowsFormsApplication1.<string>");
newForm.Show();` 
```

# android - MediaPlayer 声音被动画打断

> ID：14412653
> 
> 赞同：2
> 
> 时间：2013-01-19T08:46:39.517
> 
> 标签：android, animation, audio, media-player

我想在动画视图时播放声音。

我正在用 MediaPlayer 播放声音，当我播放动画时声音被打断（当我说打断时，我的意思是动画一开始就停止）。

属性动画（使用 Nineoldandroids 库完成）和序列动画（逐帧）都会发生这种情况。

声音代码：

```
MediaPlayer mp = MediaPlayer.create(context , rawSoundFileId);

            if (mp == null) {
                return;
            }

            mp.setOnCompletionListener(new OnCompletionListener() {

                @Override
                public void onCompletion(MediaPlayer mp) {
                    mp.release();
                }
            });

            if (mp != null) {
                mp.start();
            } 
```

我还尝试将声音移至单独的线程，但仍然会发生这种情况。

解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T19:26:26.817

事实证明，建议使用 SoundPool 播放短声音。如果我提前将声音加载到池中，动画就不会再打断声音了。

# shell - 如何检查字符串是否为新行？

> ID：14412661
> 
> 赞同：0
> 
> 时间：2013-01-19T08:48:13.907
> 
> 标签：shell

我有`if test '\n' = "$line"`，但这似乎没有赶上新线路。该代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T09:14:58.130

怎么样

```
if test $line = $'\n' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T13:46:20.740

如果您要测试`$line`的正是换行符，您可以执行以下任一操作

```
test "$line" = $'\n'  # This is non-standard, and will only work in some shells
test "$line" = '
'                 # This (two-liner) will work in any shell 
```

如果您想知道是否`$line`仅包含换行符（即，它至少有两行长），您可以这样做：

```
if echo "$line" | sed 1d | grep -q .; then
  echo line is at least 2 lines
fi 
```

# f# - 奇怪的表达式解析行为

> ID：14412664
> 
> 赞同：3
> 
> 时间：2013-01-19T08:48:39.733
> 
> 标签：f#

在这段代码中：

```
let f(a,b,c) = a * b + c - (d())
let g(a,b,c) = a * b + c -(d()) 
```

`f`是`(int*int*int) -> int`，并且`g`是`(int*int*(int*int)) -> int`。

`d()`删除in周围的括号`g`会导致“连续的参数应该用空格或元组分隔”错误。

这是怎么回事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T10:05:28.583

@bytebuster 在他的评论中是非常正确的，但是用外行的话来说 ;-] 一个被解析为二元减法运算符，另一个被解析为一元否定运算符 - 你只是在这里与运算符优先级作斗争。

# android - 无法从 Tapjoy 优惠墙中获得抽头点数？

> ID：14412665
> 
> 赞同：3
> 
> 时间：2013-01-19T08:48:48.483
> 
> 标签：android, tapjoy

我开发了一个安卓应用程序。在这个应用程序中，我集成了`tapjoy`和`everbadge offerwalls`. 在tapjoy offerwall 中，我正在调用以下方法来显示offerwall。

```
TapjoyConnect.getTapjoyConnectInstance().showOffers(); 
```

但是当我完成报价时，我无法在 toast 中看到点击点。以下是我编写的代码`tapjoy offerwall`。

```
public class TapjoyOfferwall implements TapjoyEarnedPointsNotifier, TapjoyNotifier{

    private Activity context;
    //private AppPreferences appPreferences;

    private String AppId_TapJoy = "bba49f11-b87f-4c0f-9632-21aa810dd6f1";
    private String SecretKey_TapJoy = "yiQIURFEeKm0zbOggubu";

    private String displayText = "";
    boolean update_text = false;
    boolean earnedPoints = false;

    int point_total;
    String currency_name;

    public TapjoyOfferwall(Activity context) {
        super();
        this.context = context;
        //appPreferences = new AppPreferences(context);

        // Enables logging to the console.
        TapjoyLog.enableLogging(true);

        // OPTIONAL: For custom startup flags.
        Hashtable<String, String> flags = new Hashtable<String, String>();
        flags.put(TapjoyConnectFlag.ENABLE_LOGGING, "true");

        // Connect with the Tapjoy server. Call this when the application first starts.
        // REPLACE THE APP ID WITH YOUR TAPJOY APP ID.
        // REPLACE THE SECRET KEY WITH YOUR SECRET KEY.
        TapjoyConnect.requestTapjoyConnect(context,AppId_TapJoy, SecretKey_TapJoy,flags);
        //TapjoyConnect.getTapjoyConnectInstance().setUserID(""+appPreferences.GetUserID());

        // Set our earned points notifier to this class.
        TapjoyConnect.getTapjoyConnectInstance().setEarnedPointsNotifier(this);
        //LaunchTapJoyOfferwall();
    }

    @Override
    public void earnedTapPoints(int amount)
    {
        earnedPoints = true;
        update_text = true;
        displayText = "You've just earned " + amount + " Tap Points!";

        // We must use a handler since we cannot update UI elements from a different thread.
        System.out.println("displayText :: "+displayText);
        OEPUtil.showAppToast(context, displayText);
    }

    public void LaunchTapJoyOfferwall() {
        TapjoyConnect.getTapjoyConnectInstance().showOffers();
    }

    @SuppressWarnings("deprecation")
    public void SetBannerAutoRefresh() {
        TapjoyConnect.getTapjoyConnectInstance().enableBannerAdAutoRefresh(false);
    }

    public void SetShutDown() {
        TapjoyConnect.getTapjoyConnectInstance().sendShutDownEvent();
    }
} 
```

单击按钮，我正在我的一个活动类中访问这个类。

请让我知道我所做的是否正确以及如何获得积分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-09T12:14:17.207

这可能会帮助你..

[http://www.jjask.com/32814/android-tapjoy-offerwall-never-makes-callback](http://www.jjask.com/32814/android-tapjoy-offerwall-never-makes-callback)

基本上

```
@Override
protected void onResume()
{
    TapjoyConnect.getTapjoyConnectInstance().getTapPoints(this);
    super.onResume();
} 
```

# android - 无法在我的 android 应用程序中使用 facebook sdk 3.0 获取基本信息

> ID：14412671
> 
> 赞同：4
> 
> 时间：2013-01-19T08:49:45.020
> 
> 标签：android, facebook-graph-api, facebook-android-sdk

我正在尝试使用访问 facebook 用户的基本信息`facebook session login`。但是我无法访问他们的基本信息。

我收到 Facebook 错误消息`An error occured. Please try again later.`

以下是我使用会话登录访问 facebook 的代码，

```
private void onClickLogin() {
        Session session = Session.getActiveSession();
        if (!session.isOpened() && !session.isClosed()) {
            session.openForRead(new Session.OpenRequest(this).setPermissions(Arrays.asList("basic_info")).setCallback(statusCallback));
        } else {
            Session.openActiveSession(this, true, statusCallback);
        }
    } 
```

请任何人帮我解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T22:06:11.933

尝试在登录按钮上设置权限：

```
LoginButton authButton = (LoginButton) view.findViewById(R.id.authButton);
authButton.setReadPermissions(Arrays.asList("basic_info")); 
```

# port - 锁存器和端口，dsPIC33f

> ID：14412672
> 
> 赞同：0
> 
> 时间：2013-01-19T08:50:00.750
> 
> 标签：port, mplab

我指的是[http://www.microchip.com/stellent/idcplg?IdcService=SS_GET_PAGE&nodeId=2123¶m=en024284上的一个简单程序（示例 2）](http://www.microchip.com/stellent/idcplg?IdcService=SS_GET_PAGE&nodeId=2123&param=en024284)

```
#include "p33Fxxxx.h"

#pragma config WDT = OFF

void main (void)
{
  TRISB = 0;

  /* Reset the LEDs */
  PORTB = 0;

  /* Light the LEDs */
  LATB = 0x005A;// tested with PORTB= 0X005A;at first, no change of PORTB in watch                      
                   window
  while (1)
  ;
} 
```

在监视窗口中，latchB 成功更改为 0x5A，而 PORTB 保持为 0x0000。我想知道为什么会这样。如果我将 portb 连接到 LED，它们会亮起吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T08:12:18.007

哦，我忘了通过 AD1PCFGL=0xffff 将模拟输入设置为数字；

# python - 使用scrapy（不是xpath）的html标签之间的额外数据

> ID：14412673
> 
> 赞同：1
> 
> 时间：2013-01-19T08:50:02.627
> 
> 标签：python, html, scrapy

我正在编写一个爬虫蜘蛛，我希望用户能够提供一个 html 标签，例如`<span class="someclass"></span>`or`<a style="somestuff"></a>`然后使用这些标签来提取 betwen 中的文本并将其放入我的结果中。我真的不希望用户必须提供 Xpath。我知道使用 xpath 编写代码可能更容易，但我会让我的爬虫可供不那么精通技术的用户使用。

你会怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T02:13:51.857

看看这个

[http://django-dynamic-scraper.readthedocs.org/en/latest/](http://django-dynamic-scraper.readthedocs.org/en/latest/)

我已经尝试过效果很好，您也可以链接到 django 模型。

你可以从那里得到很多想法，如何接受用户输入

# android - 在 11 MB 的 android 中解析一个大的 json

> ID：14412676
> 
> 赞同：2
> 
> 时间：2013-01-19T08:50:30.447
> 
> 标签：android, json, parsing, jackson, gson

我在使用 GSON 和 Jackson 在 android 中解析大约 11MB 的大型 JSON 时遇到问题。问题是发生内存不足错误异常并且堆大小不足以完成此过程。这是我的纸模型课

```
public class Paper {

public int primaryKey;

public String title;

public int entry;

public Boolean favourite;

public String comment;

public int opt;

public int score;
} 
```

这是我的响应模型类

```
public class Response {

public List<Paper> papers;

} 
```

这是我的 JSON 字符串

```
{"Paper":[[{"abstract":"Not Available","title":"A Fully Intraocular 0.0169mm<sup>2<\/sup>/pixel 512-Channel Self-Calibrating Epiretinal Prosthesis in 65nm CMOS","primaryKey":3,"entry":9,"score":-1,"comment":null,"favourite":false,"opt":1},{"abstract":"Not Available","title":"A Scalable 2.9mW 1Mb/s eTextiles Body Area Network Transceiver with Remotely Powered Sensors and Bi-Directional Data Communication","primaryKey":14,"entry":9,"score":-1,"comment":null,"favourite":false,"opt":1},{"abstract":"Not Available","title":"A 0.18Âµm CMOS SoC for a 100m-Range 10fps 200Ã—96-Pixel Time-of-Flight Depth Sensor","primaryKey":20,"entry":9,"score":-1,"comment":null,"favourite":false,"opt":1},{"abstract":"Not Available","title":"A 12b 1.6GS/s 40mW DAC in 40nm CMOS with >70dB SFDR over Entire Nyquist Bandwidth","primaryKey":26,"entry":9,"score":-1,"comment":null,"favourite":false,"opt":1},{"abstract":"Not Available","title":"All-Digital Hybrid Temperature Sensor Network for Dense Thermal Monitoring","primaryKey":49,"entry":9,"score":-1,"comment":null,"favourite":false,"opt":1},{"abstract":"Not Available","title":"32Gb/s Data-Interpolator Receiver with 2-Tap DFE in 28nm CMOS","primaryKey":51,"entry":9,"score":-1,"comment":null,"favourite":false,"opt":1},{"abstract":"Not Available","title":"A 93% Efficiency Reconfigurable Switched-Capacitor DC-DC Converter Using On-Chip Ferroelectric Capacitors","primaryKey":60,"entry":9,"score":-1,"comment":null,"favourite":false,"opt":1},{"abstract":"Not Available","title":"A 45nm CMOS Near-Field Communication Radio with 0.15A/m RX Sensitivity and 4mA Current Consumption in Card Emulation Mode","primaryKey":61,"entry":9,"score":-1,"comment":null,"favourite":false,"opt":1}]]} 
```

我不知道我在哪里做错了。我因为论文而变得无效。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T08:56:22.977

在读取完整输入之前，使用流式解析器并尝试在读取内容时对其进行处理。这样您就可以避免将完整的结构保存在内存中。

例如，如果您的输入 JSON 是一个巨大的数组，您可以逐个元素地处理输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T11:27:31.620

您也可以尝试使用[Genson](http://code.google.com/p/genson/)，检查数据绑定 api ( `new Genson().deserialize(json, ToClass.class)`) 或直接使用流 api。

这取决于你想做什么。如果您需要内存中的所有数据，那么没有太多选择，您需要增加它。如果您可以在阅读时处理内容并且不需要始终在内存中使用它，那么它将与流 api 一起工作（非常高效并且使用极少的内存）。

**编辑** 解决方案

1.  您想使用数据绑定，因此您要做的工作更少。首先看看这个项目[https://github.com/joelittlejohn/jsonschema2pojo](https://github.com/joelittlejohn/jsonschema2pojo)它允许您基于 json 示例生成 java bean 类。当您生成的类只是`new Genson().deserialize(json, MyGeneratedClass.class);`在执行多个 ser/deser 时，您应该重用 Genson 实例以获得更好的性能。

2.  如果您不想使用 1)，如果结构在运行时发生更改（这将阻止生成类），或者您仍然有内存问题，请使用[Gensons 流 api](http://genson.googlecode.com/git/javadoc/com/owlike/genson/stream/ObjectReader.html)。它高效、高效且易于使用。

# python - 将 sass 与 Flask 和 jinja2 一起使用

> ID：14412677
> 
> 赞同：55
> 
> 时间：2013-01-19T08:50:43.817
> 
> 标签：python, flask, sass, jinja2

我想在我的 Flask 应用程序中包含一个 sass 编译器。有没有普遍接受的方式来做到这一点？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-01-19T11:20:36.320

[Flask-Assets](http://elsdoerfer.name/docs/flask-assets/)扩展（使用[webassets](http://elsdoerfer.name/docs/webassets/)库）可用于此目的。以下是如何将其配置为对 SCSS 使用[pyScss](http://pypi.python.org/pypi/pyScss)编译器（在 Python 中实现）：

```
from flask import Flask, render_template
from flask.ext.assets import Environment, Bundle

app = Flask(__name__)

assets = Environment(app)
assets.url = app.static_url_path
scss = Bundle('foo.scss', 'bar.scss', filters='pyscss', output='all.css')
assets.register('scss_all', scss) 
```

在模板中包括：

```
{% assets "scss_all" %}
<link rel=stylesheet type=text/css href="{{ ASSET_URL }}">
{% endassets %} 
```

SCSS 文件也将在调试模式下编译。

pyScss 仅支持 SCSS 语法，但还有其他过滤器（`sass`和`scss`）`compass`使用原始 Ruby 实现。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-05-03T16:24:03.237

自 2013 年回答该问题以来，有些事情发生了变化。

您不能同时安装 scss 和 pyscss 并期望 pyscss 过滤器像接受的答案一样工作。

```
scss = Bundle('foo.scss', 'bar.scss', filters='pyscss', output='all.css') 
```

我收到一个错误，结果如下：

```
File "/home/sri/crap/example/flask/lib/python2.7/site-packages/webassets/filter/pyscss.py", line 110, in setup
scss.config.STATIC_ROOT = self.static_root or self.ctx.directory 
```

您必须删除 scss（即`pip uninstall scss`）并确保已安装 pyscss（即`pip install pyscss`）。

另请注意，您必须设置一些环境变量才能使 pyscss 也能正常工作：

```
app = Flask(__name__)

assets     = Environment(app)
assets.url = app.static_url_path
scss       = Bundle('index.scss', filters='pyscss', output='all.css')

assets.config['SECRET_KEY'] = 'secret!'
assets.config['PYSCSS_LOAD_PATHS'] = assets.load_path
assets.config['PYSCSS_STATIC_URL'] = assets.url
assets.config['PYSCSS_STATIC_ROOT'] = assets.directory
assets.config['PYSCSS_ASSETS_URL'] = assets.url
assets.config['PYSCSS_ASSETS_ROOT'] = assets.directory

assets.register('scss_all', scss) 
```

有关更多信息，请参阅 pyscss 过滤器的文档：[http ://webassets.readthedocs.io/en/latest/builtin_filters.html#pyscss](http://webassets.readthedocs.io/en/latest/builtin_filters.html#pyscss)

我希望这可以节省其他人很多时间，因为我浪费了一整天的时间。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2019-04-13T10:32:02.837

[使用libsass](https://sass.github.io/libsass-python)的简单单行解决方案。在您`import sass`简单地使用带有 dirname 关键字参数的 compile 函数之后，如下所示：

```
sass.compile(dirname=('path/to/sass', 'path/to/css')) 
```

您还可以选择设置输出样式，例如：

```
sass.compile(dirname=('path/to/sass', 'path/to/css'), output_style='compressed') 
```

如果您想在每次编辑时查看文件或目录以进行自动编译，请使用[boussole](https://stackoverflow.com/a/40644595/1544937)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-06-07T18:46:52.070

目前，存在一个更好的方法来解决这个问题，即 extion [Flask-Scss](http://pythonhosted.org/Flask-Scss/)。

你只需要安装它：`pip install Flask-Scss`

并在配置应用程序后实例化一个 Scss 对象（可能在您的`manage.py`文件中）：

```
from flask import Flask
from flask.ext.scss import Scss

app = Flask(__name__)
Scss(app) 
```

默认情况下，扩展程序会在 or 中查找您的 .scss 文件，`{app.root_dir}/assets/scss`并将`{app.root_dir}/assets`生成的 .css 文件放在`{default_static_dir}/css`or中`{default_static_dir}`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-11-17T00:56:45.193

Libsass 是一个很好的解决方案。

```
# Your __init__.py file

from flask import Flask
from sassutils.wsgi import SassMiddleware

app = Flask(__name__)

app.wsgi_app = SassMiddleware(app.wsgi_app, {
    'myapp': ('static/sass', 'static/css', '/static/css')
}) 
```

```
# Your HTML (Jinja) file

<link href="{{ url_for('static', filename='css/style.scss.css') }}"
      rel="stylesheet" type="text/css"> 
```

更多信息： [https ://sass.github.io/libsass-python/index.html](https://sass.github.io/libsass-python/index.html)

# plugins - 通过将引用包装在 MarshalByRefObject 中来远程处理引用？它会起作用吗？

> ID：14412679
> 
> 赞同：0
> 
> 时间：2013-01-19T08:51:48.273
> 
> 标签：plugins, remoting, maf, marshalbyrefobject

我正在尝试使用 MAF 实现插件系统。我目前要传递的对象不是可序列化的，尽管我确信我可以使它们可序列化，但我认为它的性能不会很好。

两个问题：

1) 为了让 MAF 传递实际的引用，一个对象是否只需要从 MarshalByRefObject 继承，或者还有更多的东西吗？

2) 我可以将我的类包装在从 MarshalByRefObject 继承的对象中以获取引用吗？

编辑：显然问题本身与 MAF 关系不大，但我只是想包含一些上下文，以防有人可以指出我的完全方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T13:54:11.857

1) 是的，它只需要从 MarshalByRefObject 继承，但是类中的任何公共类型也需要可序列化或从 MarshalByRefObject 继承。

2）不，这只是将问题推回，因为该类仍然需要可序列化或从 MarshalByRefObject 继承。

# android - 从通知栏中删除通知计数

> ID：14412685
> 
> 赞同：1
> 
> 时间：2013-01-19T08:52:43.047
> 
> 标签：android, alarmmanager, android-alarms, notificationmanager

我正在使用通知管理器在 android-Notification 栏上显示通知。但我的要求是，2分钟后从android通知区域清除通知计数。这在android中可能吗？如果可能的话，请给我一些示例代码。这将帮助我前进。

谢谢，加内什。

![在此处输入图像描述](../Images/031162b5bca1537a2a36be2ececa575b.png)

# image - 查找图片中“T”的数量

> ID：14412687
> 
> 赞同：1
> 
> 时间：2013-01-19T08:52:46.760
> 
> 标签：image, image-processing

鉴于以下图片：![在此处输入图像描述](../Images/0e2511a221395daed8c5499f0662781e.png)

我怎样才能找到`T`图片中的数量？我不是在使用 matlab 代码，但是我会很感激算法或某种解释如何解决这个问题。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T12:17:25.250

简单的模板匹配可能会做到这一点。您只需剪掉一个 T，然后为模板的每个位移 (T) 找到 RMS 误差信号。

伪代码

```
for each x-position of T in image
    for each y-position of T in image
        err(x,y) = sqrt(sum(sum((T - image(x:x+Tsizex, y:y+Tsizey)).^2)))
    end end

ErrBinary = err < detectionThreshold 
```

现在，errBinary 中的每个 1 都是一个检测。根据图像的分辨率，对于图像中的每个 T，您可能会在群集中获得多个 1。解决这个问题的一种方法是迭代地选择一个 1，然后清除附近的所有其他值。通过这种方式，您实际上是在定义 T 的接近程度以便被检测为两个单独的 T 的限制。

**编辑：**

模板对比说明：

基本上，此方法的作用是将参考模板（在本例中为 T 的小图像）与原始图像中的每个可能位置进行比较。对于每个位置，误差计算为两者之差的标量 RMS 值。因此，这两个 for 循环只是简单地从原始图像中挑选出所有可能具有模板大小的子图像，并使用它们来构建错误表面。此表面中的小值将意味着该特定位置的模板和子图像之间的良好匹配。原始图像中匹配的位置对应于误差表面中最小值的位置。

问候

# perl - 需要 File::Find: 如何使用 File::Find::name 而不会收到警告？

> ID：14412689
> 
> 赞同：0
> 
> 时间：2013-01-19T08:53:00.707
> 
> 标签：perl, file, find, warnings, require

当我像这样使用[require](http://perldoc.perl.org/functions/require.html)加载[File::Find](http://perldoc.perl.org/File/Find.html)时，如何修改此脚本以不收到警告？

```
#!/usr/bin/env perl
use warnings;
use strict;
use 5.10.1;

require File::Find;
File::Find->import('find');

find( {
    wanted     => sub {
        my $file = $File::Find::name;       
        #say $file; 
    },
    no_chdir   => 1,
},
shift ); 
```

输出：

```
#Name "File::Find::name" used only once: possible typo at ./perl9.pl line 11. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T11:20:11.233

只需将 替换`require`为`use`。那会解决它。

通常，使用的*唯一*原因`require`是如果您有某些特定原因在运行时执行延迟模块加载。通常，你不会。

如果您不想从模块中导入任何符号，请将空列表传递给`use`，如下所示：

```
use File::Find (); 
```

或者

```
use File::Find qw(); 
```

* * *

**编辑：**如果您*确实*有正当理由推迟模块加载，并且发现 ikegami 的解决方法太难看，您可以通过以下方式在本地禁用警告：

```
no warnings 'once'; 
```

在生成警告的语句之前。这将为最里面的封闭代码块的其余部分禁用该特定警告。要找出哪些警告消息属于哪些类，请参阅[perldiag](http://perldoc.perl.org/perldiag.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T09:11:23.103

对于初学者，不要像那样加载文件。:)

如果你这样做，只需添加：

```
$File::Find::name if 0; 
```

这样做的干净方法是更改`$File::Find::name`​​为

```
do { no warnings 'once'; $File::Find::name } 
```

# android - 附加数据后的动态列表视图位置

> ID：14412691
> 
> 赞同：2
> 
> 时间：2013-01-19T08:54:01.607
> 
> 标签：android, android-listview, lazy-loading

我在列表视图中实现了延迟加载。当我向下滚动列表并成功添加时，我在列表视图中添加了 10 行。但是在这里，在追加之后，列表会滚动到第一个位置。我希望列表与附加之前的位置相同。您能否看看下面的代码并帮助我。谢谢你。

```
package com.example.abe;

import java.util.ArrayList;
import android.annotation.TargetApi;
import android.app.Activity;
import android.content.Context;
import android.os.Build;
import android.os.Bundle;
import android.support.v4.app.ListFragment;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AbsListView;
import android.widget.AbsListView.OnScrollListener;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.Toast;

@TargetApi(Build.VERSION_CODES.HONEYCOMB)
public class Tab1Fragment extends ListFragment {
    ListView lv;
    Activity act = this.getActivity();
    Context ct = this.getActivity();
    XMLGettersSetters data;
    boolean loadingMore = false;
    String abc[] = new String[50];
    static int count = 0;
    final int itemsPerPage = 10;
    ArrayList<String> myListItems;
    ArrayList<String> myListItems2;
    ArrayAdapter<String> adapter;
    static int size = 0;
    int position;

    @SuppressWarnings("unused")
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        if (container == null) {
            return null;
        }
        myListItems2 = new ArrayList<String>();
        adapter = new ArrayAdapter<String>(getActivity().getBaseContext(),
                android.R.layout.simple_list_item_1, myListItems2);
        View root = inflater.inflate(R.layout.tab_frag1_layout, container,
                false);
        lv = (ListView) root.findViewById(android.R.id.list);
        lv.setAdapter(adapter);
        return root;
    }

    @Override
    public void onViewCreated(View view, Bundle savedInstanceState) {
        super.onViewCreated(view, savedInstanceState);
        myListItems = new ArrayList<String>();
        View footerView = ((LayoutInflater) this.getActivity()
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE)).inflate(
                R.layout.listfooter, null, false);
        this.getListView().addFooterView(footerView);
        this.setListAdapter(adapter);
        for (int i = 0; i < 50; i++) {
            abc[i] = "ab" + i;
        }
        this.getListView().setOnScrollListener(new OnScrollListener() {
            @Override
            public void onScrollStateChanged(AbsListView view, int scrollState) {
            }

            @Override
            public void onScroll(AbsListView view, int firstVisibleItem,
                    int visibleItemCount, int totalItemCount) {
                System.out.println(abc.length);
                System.out.println(count);
                System.out.println("First" + firstVisibleItem);
                System.out.println("Vis" + visibleItemCount);

                int lastInScreen = firstVisibleItem + visibleItemCount;
                System.out.println("Last" + lastInScreen);
                System.out.println("Total" + totalItemCount);
                if ((lastInScreen == totalItemCount) && !(loadingMore)) {
                    if (count < size) {
                        try {
                            Thread thread = new Thread(null, loadMoreListItems);
                            thread.start();
                        } catch (Exception e) {
                            e.printStackTrace();
                        }

                    }

                    else {
                        Toast.makeText(getActivity().getApplicationContext(),
                                "DATA =)", Toast.LENGTH_LONG).show();
                    }
                }
            }
        });
        try {
            Thread thread = new Thread(null, loadMoreListItems);
            thread.start();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    private Runnable loadMoreListItems = new Runnable() {
        @Override
        public void run() {
            loadingMore = true;
            myListItems = new ArrayList<String>();
            try {
                Thread.sleep(1000);
            } catch (InterruptedException e) {
            }
            size = abc.length;
            for (int i = 0; i < itemsPerPage; i++) {
                if (count < size) {
                    myListItems.add(abc[count].toString());
                    count = count + 1;
                } else {
                    break;
                }
            }
            Log.i("a", "b");
            try {
                getActivity().runOnUiThread(returnRes);
            } catch (Exception e) {
                e.printStackTrace();
            }
            Log.i("a", "b");
        }
    };
    private Runnable returnRes = new Runnable() {
        @Override
        public void run() {
            if (myListItems != null && myListItems.size() > 0) {
                for (int i = 0; i < myListItems.size(); i++)
                    adapter.add(myListItems.get(i));
            }
            setListAdapter(adapter);
            Log.i("a", "b");
            adapter.notifyDataSetChanged();
            lv.setSelection(position);
            lv.setSelectionFromTop(position, 0);
            Log.i("a", "b");
            getActivity().setTitle(
                    "Neverending List with "
                            + String.valueOf(adapter.getCount()) + " items");
            loadingMore = false;
        }
    };
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T10:21:47.130

这是因为以下几行：

```
lv.setSelection(position);
lv.setSelectionFromTop(position, 0); 
```

并且位置不能被设置在任何地方。只需将它们注释掉。

# optimization - 在 MonoTouch 中构建时如何禁用 PNG 文件“优化”？

> ID：14412692
> 
> 赞同：1
> 
> 时间：2013-01-19T08:54:14.150
> 
> 标签：optimization, xamarin.ios, png

我正在制作一个使用大量 PNG 文件资源的应用程序。为了最小化我的二进制文件的大小，我手动优化了所有文件，并且能够将资源文件夹大小减少到原始未优化大小的近 20%。

但是，在为设备（而非模拟器）测试构建我的应用程序时，构建过程会尝试通过运行似乎是 pngcrush 的修改版本来“优化”我的 PNG 文件，这不仅使构建过程延长了近五分钟，而且使我的大多数文件变大，但也使一些文件无法通过执行 alpha 预乘，这是我不需要的，因为我将 alpha 值用于与透明度不同的目的。

我发现可以在 xcode 中禁用此步骤，如果我制作了一个 Objective-C 项目，通过在[此网页](http://imageoptim.com/xcode.html)中描述的构建设置中将“压缩 PNG 文件”更改为“否” 。

但是，我一直无法在 MonoDevelop 项目中找到如何修改此设置。

从 MonoDevelop 构建时，如何禁用此 PNG“优化”步骤？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T15:48:28.983

此[功能](https://bugzilla.xamarin.com/show_bug.cgi?id=1587)正在开发中（在 MonoDevelop 中）。但是，iPhone 插件（用于 MonoDevelop）不是开源的，所以自己破解它是行不通的。

现在你有两个选择。

1.  在开发过程中将图像直接移动到设备上，这样就不会每次都部署它们（与应用程序一起）。[你可以从这篇文章](http://blog.xamarin.com/handling-large-assets-on-ios/)中看到如何实现这个 hack 。

2.  破解你的`iphone-optimize`脚本（这就是 MonoDevelop 所说的）。该脚本位于您的 Xcode 目录中（如果您有多个版本，则使用 MonoDevelop 的**SDK 位置**中指定的版本）。

为此，您需要：

1.  备份您现有的（原始）PNG；

2.  将优化的 PNG 复制为您的“新”原件；

3.  备份`iphoneos-optimize`脚本；

4.  编辑该脚本以忽略 PNG 文件（即不执行 pngcrush）

请记住，更新 Xcode 将替换脚本 - 因此您需要在更新后重新编辑它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T10:38:09.610

半年前这[是不可能的](http://monotouch.2284126.n4.nabble.com/Using-ImageOptim-ImageAlpha-in-the-MT-build-cycle-td4589942.html)。

然而，由于 MonoDevelop 源代码是开放的，因此可以对其进行修补并从源代码编译。

# bash - 管道未在从文件的读取命令中解释

> ID：14412693
> 
> 赞同：3
> 
> 时间：2013-01-19T08:54:29.847
> 
> 标签：bash, shell, pipe

我正在尝试编写一个用于服务器健康检查的 shell 脚本。要使用的命令位于单独的文件中，作为命令行参数传递给脚本。
该文件是逐行读取的。我的脚本是：

```
#!/bin/bash
set -x   # DEBUG MODE
FILENAME=$1
count=0
echo "Executing commands on `hostname`"
echo "The commands output can be found in /tmp/`hostname`_hc.txt"
echo "########### `hostname` ############ " > /tmp/`hostname`_hc.txt
while IFS= read COMMAND
do
let count++ 
echo >> /tmp/`hostname`_hc.txt  
echo "###################################################################" >> /tmp/`hostname`_hc.txt
echo "###################################################################" >> /tmp/`hostname`_hc.txt    
echo "$count : $COMMAND" >> /tmp/`hostname`_hc.txt
$COMMAND >> /tmp/`hostname`_hc.txt
echo "####################################################################" >> /tmp/`hostname`_hc.txt
echo "####################################################################" >> /tmp/`hostname`_hc.txt
echo >> /tmp/`hostname`_hc.txt
done < $FILENAME
echo "Commands executed on `hostname` " 
```

我的示例服务器运行状况检查命令是：

```
df -ak
vmstat 5 5
ls -lrt /opt/config/ | grep -i ss7
prtdiag -v 
ps -ef | grep ss7
swap -s
dmesg| grep "`date +%b %d`" | grep "swap space limit exceeded"
dmesg|grep -i ECC 
```

当我执行这个脚本时，我得到了“|”命令的这些错误 使用管道：

为了`ls -lrt /opt/config/ | grep -i ss7`

```
ls: cannot access |: No such file or directory
ls: cannot access grep: No such file or directory
ls: cannot access ss7: No such file or directory 
```

同样，对于`ps -ef | grep ss7`，我收到此错误消息

```
ERROR: Garbage option.
********* simple selection *********  ********* selection by list *********
-A all processes                      -C by command name
-N negate selection                   -G by real group ID (supports names)
-a all w/ tty except session leaders  -U by real user ID (supports names)
-d all except session leaders         -g by session OR by effective group name
-e all processes                      -p by process ID
T  all processes on this terminal     -s processes in the sessions given
a  all w/ tty, including other users  -t by tty
g  OBSOLETE -- DO NOT USE             -u by effective user ID (supports names)
r  only running processes             U  processes for specified users
x  processes w/o controlling ttys     t  by tty
*********** output format **********  *********** long options ***********
-o,o user-defined  -f full            --Group --User --pid --cols --ppid
-j,j job control   s  signal          --group --user --sid --rows --info
-O,O preloaded -o  v  virtual memory  --cumulative --format --deselect
-l,l long          u  user-oriented   --sort --tty --forest --version
-F   extra full    X  registers       --heading --no-heading --context
                ********* misc options *********
-V,V  show version      L  list format codes  f  ASCII art forest
-m,m,-L,-T,H  threads   S  children in sum    -y change -l format
-M,Z  security data     c  true command name  -c scheduling class
-w,w  wide output       n  numeric WCHAN,UID  -H process hierarchy 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T09:12:26.883

可能需要改变

```
$COMMAND >> /tmp/`hostname`_hc.txt 
```

到

```
eval $COMMAND >> /tmp/`hostname`_hc.txt 
```

# c++ - 为什么 64 位 ubuntu 中的 gcc 没有检测到以下数组溢出？

> ID：14412694
> 
> 赞同：1
> 
> 时间：2013-01-19T08:54:43.533
> 
> 标签：c++, gcc

所以我的代码是

```
#include <stdio.h>
#include <string.h>
int main()
{
    const char *a="123456789abcdef";
    char b[10];
    int i=0;
    while((b[i]=a[i])!='\0')
        ++i;
    printf("%s, %d\n",b,strlen(b));
    return 0;
} 
```

该代码存在数组b的数组溢出，但是当我在我的系统（64位ubuntu 12.04 lts）中使用gcc（版本4.6.3）编译它时，它成功了。

这个程序的输出是**123456789abcdef，15**返回
0表示这个程序正常退出。

不知道是我的编译器的问题还是我的系统的问题，有人可以告诉我吗？PS它似乎只出现在带有gcc的64位linux中。这是一个错误吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-19T09:07:06.603

在 C 中不检查数组访问。如果像这样溢出缓冲区，结果是未定义的行为。防止这种情况是程序员的责任，而不是编译器的责任。

虽然有一些工具可以帮助检查无效的内存访问。就像 Valgrind 在运行时这样做，以及 Clang 的静态分析器用于编译时检查。

# postgresql - junit.framework.ComparisonFailure：值但值相等

> ID：14412697
> 
> 赞同：0
> 
> 时间：2013-01-19T08:55:30.680
> 
> 标签：postgresql, testing, dbunit

```
junit.framework.ComparisonFailure: 
    value (table=XXX, row=XXX, col=XXX) 
expected:<2013-01-18 18:17:13.233099> 
 but was:<2013-01-18 18:17:13.233099>
    at org.dbunit.assertion.JUnitFailureFactory.createFailure(JUnitFailureFactory.java:39)... 
```

**我的代码：**

```
 ...
    IDataSet actualDataSet = conn.createDataSet();
    XmlDataSet expectedDataSet = new XmlDataSet(getClass().getResourceAsStream("/data.xml"));               

    Assertion.assertEquals(expectedDataSet, actualDataSet);
    ... 
```

**conn - 连接到数据库 PostgreSql 7.1**

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T13:36:47.927

没有更多信息很难说，但看起来表示“table=XXX，row=XXX，col=XXX”中值的类可能存在问题。那是什么数据类型？一些类似“日期”的课程？它是否正确实施`equals()`？

JUnit 等人的一个常见问题。是在不按值比较的`assertEquals`类型上使用-然后比较总是产生。这看起来像是其中一种情况。`equals()``false`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T11:43:21.217

```
org.dbunit.dataset.datatype.TimestampDataType.typeCast() 
```

转换为 Timestamp 然后其他类比较对象。我不明白为什么它不起作用。

为了避免这个问题，我排除了列：

```
String[] actualTablenames = actualDataSet.getTableNames();
for (int i = 0; i < actualTableNames.length; i++) {
    ITable expectedTable = expectedDataSet.getTable(actualTableNames[i]);
...
ITable filteredActualTable = DefaultColumnFilter.excludedColumnsTable(actualTable, new String[]{"changetime"}); 
```

# java - java - 如何在java中进行2 x 3阶的光栅扫描？

> ID：14412698
> 
> 赞同：-4
> 
> 时间：2013-01-19T08:55:35.710
> 
> 标签：java, image, raster

我有一个缓冲图像（说*Ib*）。我想进行光栅扫描以订购像素为*p1,p2...p6的 2 x 3 块（说**Bb* ） 。如何在java中做到这一点？

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T09:32:55.547

您可能正在寻找[`ConvolveOp`](http://docs.oracle.com/javase/7/docs/api/java/awt/image/ConvolveOp.html)；[有关示例，请参见此处](https://stackoverflow.com/a/3528196/230513)引用的文章。*

# html - innerHTML onClick 问题

> ID：14412701
> 
> 赞同：0
> 
> 时间：2013-01-19T08:55:51.470
> 
> 标签：html, cross-browser, onclick, innerhtml

我正在尝试使用子页面更改作为父页面一部分的 div 的内容。为了更新内容，我使用了 innerHTML。内容看起来很好，但图像上的 onclick 事件不起作用。这是我的代码，该代码在 Mozilla firefox 中有效，但在 Chrome 和 Safari 中无效。此外，它不适用于 iPad Safari 浏览器。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
    <head>
        <title>TEMP</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
        <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
        <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
        <script src="scripts/jquery-1.8.2.min.js"></script>         
        <script>
            $(document).ready(function() {
                    //this is the parent element
                    parent.document.getElementById('hd').innerHTML = document.getElementById('temp').innerHTML;
            });
        </script>
    </head>
    <body>
        <div id="fakeshare" style="float: left;margin-top: -30px;z-index:1000000;position: absolute;vertical-align: middle">    
        </div>
        <!-- this is the content I try to populate in the parent element -->
        <div id = "temp" style="visibility: hidden">
        <div style="float:left">
            <img id="backbtn2" class="imgtopbutton" src="images/facebook-cancel.png" onclick="javascript:history.go(-1)" align="left" style="margin-left:12px;margin-top:10px"/>
            <img class="imgtopbutton" src="images/facebook-post.png" align="right" style="margin-top:-31px;margin-left:545px" onclick="javascript:history.go(-1)">
        </div>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T09:02:54.343

尝试使用 $('#hd').parent().html($('#temp').html());

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T09:15:01.093

你试一试：

```
$("#hd").html($("#temp").html()); 
```

# java - 在 Java 中使用扫描仪方法进行简单计算

> ID：14412703
> 
> 赞同：0
> 
> 时间：2013-01-19T08:55:58.783
> 
> 标签：java

我正在尝试创建一个简单的程序，要求用户输入三个项目、它们的数量和价格。程序必须允许项目名称包含空格。这是我到目前为止编写的代码。

```
 import java.util.Scanner;
   public class AssignmentOne {

public static void main(String[] args)
{
    Scanner kb = new Scanner(System.in);

   //       System.out.printf("$%4.2f for each %s ", price, item);
   //       System.out.printf("\nThe total is: $%4.2f ", total);

    //process for item one
    System.out.println("Please enter in your first item");
    String item = kb.nextLine();
    System.out.println("Please enter the quantity for this item");
    int quantity = kb.nextInt();
    System.out.println("Please enter in the price of your item");
    double price = kb.nextDouble();

    //process for item two
    System.out.println("\nPlease enter in your second item");
    String item2 = kb.nextLine();
    System.out.println("\nPlease enter the quantity for this item");
    int quantity2 = kb.nextInt();
    System.out.print("\nPlease enter in the price of your item");
    double price2 = kb.nextDouble();
    double total2 = quantity2*price2;
   //       System.out.printf("$%4.2f for each %s ", price2, item2);
   //       System.out.printf("\nThe total is: $%4.2f ", total2);

    //process for item three
    System.out.println("\nPlease enter in your third item");
    String item3 = kb.nextLine();
    System.out.println("Please enter the quantity for this item");
    int quantity3 = kb.nextInt();
    System.out.println("Please enter in the price of your item");
    double price3 = kb.nextDouble();
    double total3 = quantity3*price3;
   //       System.out.printf("$%4.2f for each %s ", price3, item3);
   //       System.out.printf("\nThe total is: $%4.2f ", total3);

    double total = quantity*price;

    double grandTotal = total + total2 + total3;
    double salesTax = grandTotal*(.0625);
    double grandTotalTaxed = grandTotal + salesTax;

    String amount = "Quantity";
    String amount1 = "Price";
    String amount2 = "Total";
    String taxSign = "%";

    System.out.printf("\nYour bill: ");
    System.out.printf("\n\nItem");
    System.out.printf("%30s", amount);
   //       System.out.printf("\n%s %25d %16.2f %11.2f", item, quantity, price, total);
   //       System.out.printf("\n%s %25d %16.2f %11.2f", item2,quantity2, price2, total2);
   //       System.out.printf("\n%s %25d %16.2f %11.2f", item3,quantity3, price3, total3);

    System.out.printf("\n%30s", item);
    System.out.printf("%30d", quantity);
    System.out.printf("\n%30s", item2);
    System.out.printf("\n%30s", item3);

    System.out.printf("\n\n\nSubtotal %47.2f", grandTotal);
    System.out.printf("\n6.25 %s sales tax %39.2f", taxSign, salesTax);
    System.out.printf("\nTotal %50.2f", grandTotalTaxed);

} 
```

}

我的问题是，当我使用 String item = kb.nextLine(); 这是输入项目时此过程的示例

```
 Please enter in your first item
   soda

   Please enter the quantity for this item
   10

   Please enter the price for this item
   15

   Please enter in your second item
   Please enter the quantity for this item 
```

此时第一项很好，但是到了第二项，它会自动输入第二项行并直接移动到数量上，我不明白如何解决这个问题，我需要使用 nextLine() ; 所以项目名称可以有空格。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T09:10:26.790

试试这个代码

```
 import java.util.Scanner;
  class AssignmentOne {

public static void main(String[] args)
{
    Scanner kb = new Scanner(System.in);

   //       System.out.printf("$%4.2f for each %s ", price, item);
   //       System.out.printf("\nThe total is: $%4.2f ", total);

    //process for item one
    System.out.println("Please enter in your first item");
    String item = kb.nextLine();
    System.out.println("Please enter the quantity for this item");
    int quantity = Integer.parseInt(kb.nextLine());
    System.out.println("Please enter in the price of your item");
    double price = Double.parseDouble(kb.nextLine());

    //process for item two
    System.out.println("\nPlease enter in your second item");
    String item2 = kb.nextLine();
    System.out.println("\nPlease enter the quantity for this item");
    int quantity2 = Integer.parseInt(kb.nextLine());
    System.out.print("\nPlease enter in the price of your item");
    double price2 =Double.parseDouble( kb.nextLine());
    double total2 = quantity2*price2;
   //       System.out.printf("$%4.2f for each %s ", price2, item2);
   //       System.out.printf("\nThe total is: $%4.2f ", total2);

    //process for item three
    System.out.println("\nPlease enter in your third item");
    String item3 = kb.nextLine();
    System.out.println("Please enter the quantity for this item");
    int quantity3 = Integer.parseInt(kb.nextLine());
    System.out.println("Please enter in the price of your item");
    double price3 = Double.parseDouble(kb.nextLine());
    double total3 = quantity3*price3;
   //       System.out.printf("$%4.2f for each %s ", price3, item3);
   //       System.out.printf("\nThe total is: $%4.2f ", total3);

    double total = quantity*price;

    double grandTotal = total + total2 + total3;
    double salesTax = grandTotal*(.0625);
    double grandTotalTaxed = grandTotal + salesTax;

    String amount = "Quantity";
    String amount1 = "Price";
    String amount2 = "Total";
    String taxSign = "%";

    System.out.printf("\nYour bill: ");
    System.out.printf("\n\nItem");
    System.out.printf("%30s", amount);
   //       System.out.printf("\n%s %25d %16.2f %11.2f", item, quantity, price, total);
   //       System.out.printf("\n%s %25d %16.2f %11.2f", item2,quantity2, price2, total2);
   //       System.out.printf("\n%s %25d %16.2f %11.2f", item3,quantity3, price3, total3);

    System.out.printf("\n%30s", item);
    System.out.printf("%30d", quantity);
    System.out.printf("\n%30s", item2);
    System.out.printf("\n%30s", item3);

    System.out.printf("\n\n\nSubtotal %47.2f", grandTotal);
    System.out.printf("\n6.25 %s sales tax %39.2f", taxSign, salesTax);
    System.out.printf("\nTotal %50.2f", grandTotalTaxed);

}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T09:11:35.650

因为您正在使用`System.in`，所以在您点击“输入”之前，不会向扫描仪发送任何内容。这意味着如果您键入“15”而不按“回车”，则`kb.nextDouble();`呼叫会阻塞。当你点击“enter”然后`kb.nextDouble();`读取“15”，但扫描仪的缓冲区中仍然有一个换行符。这意味着这部分代码：

```
//process for item two
System.out.println("\nPlease enter in your second item");
String item2 = kb.nextLine(); 
```

立即从您输入“15”然后按“回车”读取缓冲区中的换行符。所以它不会尝试读取项目名称。

您可以从以下位置替换所有项目名称扫描：

```
//process for item two
System.out.println("\nPlease enter in your second item");
String item2 = kb.nextLine(); 
```

至：

```
//process for item two
System.out.println("\nPlease enter in your second item");
String item2 = kb.next(); 
```

或者在扫描价格时阅读换行符并解析双精度：

```
System.out.println("Please enter in the price of your item");
double price = Double.parseDouble(kb.nextLine()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T08:58:23.893

```
kb.nextDouble(); 
```

我需要检查，但它看起来很可能使`nextDouble`换行符完好无损，然后由后续的 `nextLine.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T09:09:06.417

您可以通过两种不同的方式解决此问题：

*   在您的代码中替换`.nextLine()`为。`.next()`（但这样做不会让你在字符串中有空格。

*   当你读一个原语然后你读一个文本时，`.nextLine();`在它之后添加另一个。

在您的情况下使用第二种方法，您将拥有：

```
System.out.println("Please enter in the price of your item");
double price = kb.nextDouble();

String item2 = kb.nextLine(); // -------------> Added this line also here
//process for item two
System.out.println("\nPlease enter in your second item");
item2 = kb.nextLine(); 
```

这将解决您遇到的第一个问题。对所有其他地方进行相同的操作，您的程序将按预期运行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-19T09:35:15.857

使用不同的扫描仪对象来获取字符串和数字。这解决了你的问题。

# android - 在 Android 的音乐播放器中播放音频文件

> ID：14412706
> 
> 赞同：1
> 
> 时间：2013-01-19T08:56:13.053
> 
> 标签：android

我的 Android 项目的原始文件夹中有一些音频文件。我希望通过 Android 的默认音乐播放器播放这些音频文件。有人可以分享一些示例代码片段来解释该过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T13:54:02.963

我试过这段代码： -

```
button.setOnClickListener(new OnClickListener() 
{

@Override
public void onClick(View v) 
{
Uri uri = Uri.parse("R.raw.fashion.mp3");//the audio file
Intent intent = new Intent(Intent.ACTION_VIEW, uri);
startActivity(intent); 

}
}); 
```

但是当我运行这段代码时；应用程序崩溃并且 LogCat 显示：“ActivityNotFoundException”...没有找到处理意图的活动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T09:07:14.147

首先声明`MediaPlayer`对象：

```
MediaPlayer mSoundPlayer; 
```

添加此功能：

```
//Play music
    public void playSound(int id){
            try{
                mSoundPlayer = MediaPlayer.create(mContext, id);
                mSoundPlayer.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {
                    @Override
                    public void onPrepared(MediaPlayer arg0) {
                        mSoundPlayer.start();

                    }

                });
                mSoundPlayer.setOnCompletionListener(new MediaPlayer.OnCompletionListener () {

                    @Override
                    public void onCompletion(MediaPlayer mp) {
                        // TODO Auto-generated method stub
                        mSoundPlayer.release();
                    }});
            }
            catch (Exception e) {
                // TODO: handle exception
                Log.v("Sound Exception","Sound Exception = "+e.getMessage());
            }
    } 
```

用这个打电话：

```
playSound(R.raw.sound1); 
```

发布将是一个好习惯`MediaPlayer`：

```
 @Override
    public void onPause(){
        super.onPause();
        if(mSoundPlayer!=null)
            mSoundPlayer.release();
    } 
```

谢谢。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T09:13:06.733

这是示例代码片段...

[用于在 android 中播放音频文件](http://www.androidhive.info/2012/03/android-building-audio-player-tutorial/)

[播放音频](http://www.helloandroid.com/tutorials/how-play-video-and-audio-android)

```
public void splashPlayer() {
 VideoView videoHolder = new VideoView(this);
 setContentView(videoHolder);
 Uri video = Uri.parse("android.resource://" + getPackageName() + "/"
    + R.raw.splash);
 videoHolder.setVideoURI(video);
 videoHolder.setOnCompletionListener(new OnCompletionListener() {
  public void onCompletion(MediaPlayer mp) {
   jumpMain(); //jump to the next Activity
  }
 });
 videoHolder.start();
} 
```

对于完整的教程去[这个](http://www.sherif.mobi/2012/06/how-to-play-video-from-resources.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-19T09:00:41.543

```
Intent intent = new Intent(android.content.Intent.ACTION_VIEW);

Uri data = Uri.parse("file://"+Environment.getExternalStorageDirectory()
        .getAbsolutePath()+"/" + fileName);
String type = "audio/mp3";
intent.setDataAndType(data, type);
startActivity(intent); 
```

`fileName`是您的音频的名称`SDCard`。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-28T07:03:23.910

试试这个可能会有所帮助。

```
Uri data = Uri.parse("file://"+Environment.getExternalStorageDirectory()
                .getAbsolutePath()+"/" + audioName);
        Intent intent = new Intent(android.content.Intent.ACTION_VIEW, data);

        String type = "audio/mp3";
        intent.setDataAndType(data, type);
        startActivity(intent); 
```

# php - 我需要用什么来从字符串中取出 2 个单词？正则表达式还是爆炸？

> ID：14412714
> 
> 赞同：2
> 
> 时间：2013-01-19T08:57:37.267
> 
> 标签：php, regex, explode

这是字符串：

```
Added:  yesterday Closing: 17.02.2013 
```

上面的字符串可能有变体，例如：

```
Added:  today Closing: 04.02.2013
Added:  16.01.2013 Closing: 15.02.2013 
```

我需要能够获得“昨天”和“17.02.2013”​​或“今天”和“04.02.2013”​​或“16.01.2013”​​和“15.02.2013”

现在这就是我得到的..

```
$pieces = explode(" ", $initialDate);

echo $pieces[1]; // piece2
echo $pieces[3]; // piece2
echo '<br/><br/>'; 
```

但我只得到“今天”和“结束”，应该有截止日期，但它不起作用..

我应该使用正则表达式吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T09:01:58.790

在这种情况下，可以使用爆炸。键和值与值之前的键成对出现，因此查找关键字，然后将下一个字符串作为值。我可能会将其作为 (key1 =>value1, key2=>value2,) 形式的数组返回

当它工作时，explode 可能比正则表达式更快，但在大多数情况下，速度并不是一个重要因素。

编辑：该示例在元素之间有多个空格，需要先删除这些空格，或者在结果中跳过空项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T09:09:54.463

您的字符串中有太多空格，无法按您期望的顺序排列。

为了与explode（）保持一致，不要*盲目地*用猜测的数字来寻址数组成员，而是`print_r($pieces);`首先，然后注意正确的数字，然后使用它

如果空格的数量可以变化 - 正则表达式是唯一 [明智的] 选择。虽然它可以通过使用简单的与正则表达式结合`$pieces = preg_split('#\s#',$initialDate);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T10:40:19.053

您可以使用正则表达式来做到这一点

```
$string="Added:  today Closing: 04.02.2013";
$result = preg_match_all("/([a-z A-z])*day|((\d{2}\.){2}(\d{4}))/", $string,$match);
print_r($match[0]);

 output
 Array ( [0] => today [1] => 04.02.2013 ) 
```

模式 "/([az Az])*day/" 匹配字符串以日期结尾 模式 "((\d{2}.){2}(\d{4}))" 匹配日期格式 (dd.mm .yyyy) 或 (mm.dd.yyyy) [现场演示](http://codepad.viper-7.com/vwsZvk)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-19T09:06:56.673

只要输入不变，爆炸就可以了。正则表达式也很好，但它们通常会使代码难以阅读并减慢应用程序的速度。似乎您缺少文本中的双空格，这会在您的爆炸结果中创建一个空字符串。使用 var_dump、print_r 或更好地使用调试检查内容。

```
foreach(explode("\n", $str) as $line)
    print_r(explode(' ', $line)); 
```

# iphone - TBXML 解析，找不到 nextSibling

> ID：14412719
> 
> 赞同：0
> 
> 时间：2013-01-19T08:57:58.390
> 
> 标签：iphone, xcode, xml-parsing, tbxml

我必须从网上解析这个 XML：

```
<trasporto>
 <condizioni id="0">
  <data>    </data>
  <titolo>  </titolo>
  <testo>   </testo>
  <sezione> </sezione>
 </condizioni>

 <condizioni id="1">
  <data>    </data>
  <titolo>  </titolo>
  <testo>   </testo>
  <sezione> </sezione>
 </condizioni>
 ........
 ........
 ........
</trasporto> 
```

我需要来自每个**condizioni的字段、****数据 / titolo / testo / sezione**

 **这是我的代码：

```
 ..............

    //responseString contains the text fetched from the web
NSData *data = [responseString dataUsingEncoding:NSUTF8StringEncoding];
    tbxml = [[TBXML alloc]initWithXMLData:data];

    if (tbxml.rootXMLElement)
        [self traverseElement:tbxml.rootXMLElement];
    [tbxml release];
}

    -(void) traverseElement:(TBXMLElement *)element {
    NSMutableArray *dataArr = [[NSMutableArray alloc]init];
    NSMutableArray *titoloArr = [[NSMutableArray alloc]init];
    NSMutableArray *testoArr = [[NSMutableArray alloc]init];
    NSMutableArray *sezioneArr = [[NSMutableArray alloc]init];

    do {
        NSLog(@"%@",[TBXML elementName:element]);
        if (element->firstChild)
            [self traverseElement:element->firstChild];
        if ([[TBXML elementName:element] isEqualToString:@"trasporto"]) {
            TBXMLElement *condizioni = [TBXML childElementNamed:@"condizioni" parentElement:element];
            TBXMLElement *data = [TBXML childElementNamed:@"data" parentElement:condizioni];
            TBXMLElement *titolo = [TBXML childElementNamed:@"titolo" parentElement:condizioni];
            TBXMLElement *testo = [TBXML childElementNamed:@"testo" parentElement:condizioni];
            TBXMLElement *sezione = [TBXML childElementNamed:@"sezione" parentElement:condizioni];

            [dataArr addObject:[TBXML textForElement:data]];
            [titoloArr addObject:[TBXML textForElement:titolo]];
            [testoArr addObject:[TBXML textForElement:testo]];
            [sezioneArr addObject:[TBXML textForElement:sezione]];

            NSLog(@"data: %@",dataArr);// [TBXML textForElement:data]);
            NSLog(@"titolo: %@",titoloArr);//[TBXML textForElement:titolo]);
            NSLog(@"testo: %@",testoArr);//[TBXML textForElement:testo]);
            NSLog(@"sezione: %@",sezioneArr);//[TBXML textForElement:sezione]);
           // condizioni = condizioni -> nextSibling;
        }
    } while ((element = element->nextSibling));
    } 
```

但是这样我只能解析第一个**条件**，即 id=0 的条件。看来我找不到下一个兄弟姐妹了。我哪里错了？！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:07:02.990

...这就是答案！：

```
- (void) traverseElement:(TBXMLElement *)element {
NSMutableArray *dataArr = [[NSMutableArray alloc]init];
NSMutableArray *titoloArr = [[NSMutableArray alloc]init];
NSMutableArray *testoArr = [[NSMutableArray alloc]init];
NSMutableArray *sezioneArr = [[NSMutableArray alloc]init];

TBXMLElement *condizioni = element->firstChild;
do {
    TBXMLElement *data = [TBXML childElementNamed:@"data" parentElement:condizioni];
    TBXMLElement *titolo = [TBXML childElementNamed:@"titolo" parentElement:condizioni];
    TBXMLElement *testo = [TBXML childElementNamed:@"testo" parentElement:condizioni];
    TBXMLElement *sezione = [TBXML childElementNamed:@"sezione" parentElement:condizioni];

    [dataArr addObject:[TBXML textForElement:data]];
    [titoloArr addObject:[TBXML textForElement:titolo]];
    [testoArr addObject:[TBXML textForElement:testo]];
    [sezioneArr addObject:[TBXML textForElement:sezione]];

} while ((condizioni = condizioni->nextSibling)); 
```**

# c++ - 如何编写 Qt 正则表达式来突出显示以非单词字符开头和结尾的字符串？

> ID：14412724
> 
> 赞同：0
> 
> 时间：2013-01-19T08:58:44.533
> 
> 标签：c++, regex, qt

Windows 7 SP1
MSVS 2010
Qt 4.8.4

我想突出显示以 1 个或多个连字符开头和/或以 1 个或多个连字符结尾的任何字符串（不是单词）。该字符串可能包含 Unicode，因此我需要使用字符集。

例如，这些应该突出显示（但不是周围的空白）：

```
-word --word -&#$$ --&#$$ 
word- word-- &a$$- &a$$--
-word- --word-- -&a$$- --&a$$-- 
-word-word- --word--word-- 
```

不应突出显示没有外部连字符的嵌入式连字符字符串：

```
word-word word--word &#$$-&#$$ &#$$--&#$$ 
```

不应突出显示连字符字符串：

```
------- ---- -- ---- 
```

这：

```
1\. QRegExp("-+[\\S]+|[\\S]+-+") 
```

选择我想要突出显示的所有内容（不突出显示周围的空白），但也选择我不想突出显示的内容：连字符字符串和嵌入连字符字符串的第一部分（下划线）：

```
word-word
----- 
```

我相信这不会选择连字符字符串：

```
2\. QRegExp("-+[\\S]-[-]]+|[\\S-[-]]+-+") 
```

但不知道Qt是否支持字符类减法；这个表达式没有被选中。

因此，我的想法是创建单独的规则以随后取消突出显示这些字符串。

这将选择连字符字符串（然后我取消突出显示）：

```
3\. QRegExp("[\\s-+(?=\\s)|\\s-+$|^-+(?=\\s)|^-+$"") 
```

我被困在如何处理嵌入的连字符字符串上。我认为后向断言会有所帮助，但它们不受支持。

**我的问题：** a）是否有一种简单的方法可以选择嵌入连字符字符串的第一部分，这样我就可以在不选择其他任何内容的情况下取消突出显示（没有其他副作用）？或 b) 最棒的是，在表达式 1 中是否有更好的方法来做到这一点。实现我的所有目标而不突出显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T09:48:51.017

如果您想匹配一个或多个`QRegExp("-+[\\S]+|[\\S]+-+")`后跟至少一个非空格非连字符后跟一个或多个.`QRegExp("-+[^-\\s]+-+")``-``-`

`\S`匹配任何非空格字符，包括连字符，这使得只有连字符的序列有效，因为`---`有一个连字符要匹配 first `-+`，一个连字符要匹配`\S+`，另一个连字符要匹配 last `-+`。

# ruby - Guard 在 Windows 7 上失败并出现运行时错误

> ID：14412725
> 
> 赞同：1
> 
> 时间：2013-01-19T08:58:44.613
> 
> 标签：ruby, ruby-on-rails-3, guard

跑步

```
$bundle exec guard 
```

和

```
ruby 1.9.3p327 (2012-11-10) [i386-mingw32]
Rails 3.2.11
Guard version 1.6.1 
```

在 Windows 7 64bit 上失败，对我来说：

```
17:49:03 - INFO - Guard uses Notifu to send notifications.
17:49:03 - INFO - Guard uses TerminalTitle to send notifications.
C:/Ruby193/lib/ruby/gems/1.9.1/gems/pry-0.9.11.3-x86-mingw32/lib/pry/command_set
.rb:216:in `alias_command': Command: `help` not found (RuntimeError)
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/guard-1.6.1/lib/guard/interacto
r.rb:135:in `block in create_command_aliases'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/guard-1.6.1/lib/guard/interacto
r.rb:134:in `each'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/guard-1.6.1/lib/guard/interacto
r.rb:134:in `create_command_aliases'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/guard-1.6.1/lib/guard/interacto
r.rb:95:in `initialize'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/guard-1.6.1/lib/guard.rb:161:in
 `new'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/guard-1.6.1/lib/guard.rb:161:in
 `setup_interactor'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/guard-1.6.1/lib/guard.rb:82:in
`setup'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/guard-1.6.1/lib/guard.rb:183:in
 `start'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/guard-1.6.1/lib/guard/cli.rb:11
0:in `start'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/thor-0.16.0/lib/thor/task.rb:27
:in `run'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/thor-0.16.0/lib/thor/invocation
.rb:120:in `invoke_task'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/thor-0.16.0/lib/thor.rb:275:in
`dispatch'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/thor-0.16.0/lib/thor/base.rb:42
5:in `start'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/guard-1.6.1/bin/guard:6:in `<to
p (required)>'
        from C:/Ruby193/bin/guard:23:in `load'
        from C:/Ruby193/bin/guard:23:in `<main>' 
```

我需要以特定方式启动notifu吗？我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T15:39:10.737

RKing 已向[Guard 提交了一个问题，](https://github.com/guard/guard/issues/394)并将您的问题与它相关联。看起来这要么是最新 Pry 的问题，要么是 Guard 没有正确使用 Pry API。

为了解决这个问题，我想到了两件事：

1.  禁用交互器

    由于 Pry 仅在交互器中使用，您可以在启动 Guard 时禁用它，并且您应该至少让 Guard 插件工作：

    `$ bundle exec guard -i`

2.  找到最后一个工作的 Pry 版本

    我认为你应该让它与旧版本的 Pry 一起运行，问题是哪个版本引入了不兼容。`Gemfile`您可以通过在您的和运行捆绑器中指定版本来使用固定的 Pry 版本：

    在你的`Gemfile`：

    `gem 'pry', '0.9.11.2'`

    然后在控制台中运行 bundler：

    `$ bundle update`

    如果还是不行，就用低版本吧。请尝试`0.9.11.2`,`0.9.11.1`和.`0.9.11``0.9.10`

    如果您找到了工作版本，请将其报告给 GitHub 上链接的 Guard 问题。

# django - Django 管理员翻译

> ID：14412727
> 
> 赞同：0
> 
> 时间：2013-01-19T08:59:48.870
> 
> 标签：django, django-admin, translation

我想要土耳其语的管理员。所以我设置 *LANGUAGE_CODE = 'tr-TR'* 和 USE_I18N = True 但是 django admin 仍然是英文的。还有什么我应该做的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T21:49:08.723

由于管理员基本上只是一个普通的 Django 应用程序，因此[适用语言偏好的通常规则](https://docs.djangoproject.com/en/1.3/topics/i18n/deployment/#how-django-discovers-language-preference)。我想土耳其语没有在您的浏览器中设置为首选语言。

如果您想为管理员显式设置语言，您可能想看看这个中间件：http: [//source.mihelac.org/2009/11/12/django-set-language-for-admin/](http://source.mihelac.org/2009/11/12/django-set-language-for-admin/)

# android - 无法初始化类 sun.awt.X11.XToolkit

> ID：14412728
> 
> 赞同：5
> 
> 时间：2013-01-19T08:59:59.930
> 
> 标签：android, eclipse

当我在图形视图中打开我的 xml 文件时，它无法打开。我正在使用 Ubuntu 操作系统并在 eclipse indigo 中收到以下警告。

```
Could not initialize class sun.awt.X11.XToolkit
Exception details are logged in Window > Show View > Error Log 
```

而我的`Error Log`显示如下。

```
 Message :-  selectimage.xml: Could not initialize class sun.awt.X11.XToolkit

  Exception Stack Trace :

        java.lang.NoClassDefFoundError: Could not initialize class sun.awt.X11.XToolkit
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:186)
    at java.awt.Toolkit$2.run(Toolkit.java:849)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.awt.Toolkit.getDefaultToolkit(Toolkit.java:841)
    at android.graphics.Paint_Delegate.updateFontObject(Paint_Delegate.java:1062)
    at android.graphics.Paint_Delegate.reset(Paint_Delegate.java:1039)
    at android.graphics.Paint_Delegate.<init>(Paint_Delegate.java:991)
    at android.graphics.Paint_Delegate.native_init(Paint_Delegate.java:614)
    at android.graphics.Paint.native_init(Paint.java)
    at android.graphics.Paint.<init>(Paint.java:194)
    at android.graphics.Paint.<init>(Paint.java:184)
    at android.view.ViewGroup.<init>(ViewGroup.java:277)
    at android.widget.LinearLayout.<init>(LinearLayout.java:114)
    at com.android.layoutlib.bridge.impl.RenderSessionImpl.inflate(RenderSessionImpl.java:227)
    at com.android.layoutlib.bridge.Bridge.createSession(Bridge.java:318)
    at com.android.ide.common.rendering.LayoutLibrary.createSession(LayoutLibrary.java:325)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.RenderService.createRenderSession(RenderService.java:372)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.renderWithBridge(GraphicalEditorPart.java:1361)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.recomputeLayout(GraphicalEditorPart.java:1115)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.activated(GraphicalEditorPart.java:941)
    at com.android.ide.eclipse.adt.internal.editors.layout.LayoutEditorDelegate.delegatePageChange(LayoutEditorDelegate.java:450)
    at com.android.ide.eclipse.adt.internal.editors.common.CommonXmlEditor.pageChange(CommonXmlEditor.java:358)
    at org.eclipse.ui.part.MultiPageEditorPart$2.widgetSelected(MultiPageEditorPart.java:290)
    at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:240)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1258)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1282)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1267)
    at org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:1061)
    at org.eclipse.swt.custom.CTabFolder.setSelection(CTabFolder.java:2746)
    at org.eclipse.swt.custom.CTabFolder.onMouse(CTabFolder.java:1433)
    at org.eclipse.swt.custom.CTabFolder$1.handleEvent(CTabFolder.java:257)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1258)
    at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3588)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3209)
    at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2701)
    at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2665)
    at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2499)
    at org.eclipse.ui.internal.Workbench$7.run(Workbench.java:679)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:668)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:123)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:577)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1410) 
```

这个怎么解决？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-12-03T18:23:20.033

有点晚了，但在过去我已经纠正了 X11 包的 ClassNoDefFound 告诉 Java 不要使用 X-Server 的此类错误：

```
export JAVA_OPTS="$JAVA_OPTS -Djava.awt.headless=true" 
```

# php - phpass 长度发生显着变化

> ID：14412731
> 
> 赞同：0
> 
> 时间：2013-01-19T09:00:51.210
> 
> 标签：php, phpass

我目前正在使用 phpass，但由于我交换了计算机，所以存储的密码长度已经改变。我正在本地主机上工作并重新创建数据库，而不是导出/导入，因为我才刚刚开始。

所以基本上我只是重用了相同的代码，但现在使用的是不同的（认为仍然是相同的值、表等）数据库。

第一次虽然密码看起来像`$2a$08QWasd1234FqrgA54gWERGw4$ijy2`

它们相当长。

但是第二次，他们看起来像这样`$2a$08$nUkQ`

为什么会这样？应该引起多大的关注？

# xslt - Twitter-Boostrap 的复合 C1 菜单

> ID：14412734
> 
> 赞同：0
> 
> 时间：2013-01-19T09:01:09.023
> 
> 标签：xslt, twitter-bootstrap, c1-cms

我正在尝试在 Composite C1 中为 Bootstrap 框架创建一个导航菜单，但我不确定如何让子菜单显示在菜单中。这是我所拥有的

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:in="http://www.composite.net/ns/transformation/input/1.0"
    xmlns:lang="http://www.composite.net/ns/localization/1.0"
    xmlns:f="http://www.composite.net/ns/function/1.0"
    xmlns="http://www.w3.org/1999/xhtml"
    exclude-result-prefixes="xsl in lang f">
  <xsl:param name="sitemap" select="/in:inputs/in:result[@name='SitemapXml']/Page" />
  <xsl:template match="/">
    <html>
      <head>
      </head>
      <body>
        <div class="container">
          <div class="navbar">
            <div class="navbar-inner">
              <ul class="nav">
                <xsl:for-each select="$sitemap[@isopen='true']">
                  <li>
                    <a href="{@URL}">
                      <xsl:if test="@iscurrent='true'" >
                        <xsl:attribute name="class">active</xsl:attribute>
                      </xsl:if>
                      <xsl:value-of select="@MenuTitle" />
                    </a>
                  </li>
                  <xsl:apply-templates select="Page" />
                </xsl:for-each>
              </ul>             
            </div>
          </div>
        </div>
      </body>
    </html>
  </xsl:template>

  <xsl:template match="Page">
    <xsl:if test="count(@MenuTitle)">
      <li>
        <a href="{@URL}">
          <xsl:if test="@isopen='true'" >
            <xsl:attribute name="class">active</xsl:attribute>
          </xsl:if>
          <xsl:value-of select="@MenuTitle" />
        </a>
      </li>
    </xsl:if>
  </xsl:template>
</xsl:stylesheet> 
```

我不确定我需要添加什么来获得子菜单。建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:14:45.587

试试这样的东西

```
<xsl:template match="/">
<html>
  <head>
  </head>
  <body>
    <div class="container">
      <div class="navbar">
        <div class="navbar-inner">
          <ul class="nav">
            <xsl:for-each select="$sitemap[@isopen='true']">
              <li>
                 <xsl:if test="@iscurrent='true'" >
                    <xsl:attribute name="class">active</xsl:attribute>
                 </xsl:if> 
                <a href="{@URL}">
                  <xsl:value-of select="@MenuTitle" />
                </a>
              </li>
              <xsl:apply-templates select="Page" />
            </xsl:for-each>
          </ul>             
        </div>
      </div>
    </div>
  </body>
</html>
</xsl:template>

<xsl:template match="Page">
<xsl:variable name="depth" select="@Depth" /> 
<xsl:variable name="isDropDown" select="count(./*) > 0 and $depth &lt; 3" />  
<xsl:if test="count(@MenuTitle)">
  <li>
    <xsl:if test="@isopen='true'" >
        <xsl:attribute name="class">active</xsl:attribute>
     </xsl:if>
     <xsl:if test="$isDropDown" >
        <xsl:attribute name="class">dropdown</xsl:attribute>
     </xsl:if> 
    <a href="{@URL}">
        <xsl:if test="$isDropDown" >
            <xsl:attribute name="class">dropdown-toggle</xsl:attribute>
        </xsl:if> 
        <xsl:if test="$isDropDown" >
            <xsl:attribute name="data-toggle">dropdown</xsl:attribute>
        </xsl:if> 
        <xsl:value-of select="@MenuTitle" />
         <xsl:if test="$isDropDown" >
            <b class="caret"></b>
        </xsl:if> 
    </a>
    <xsl:if test="$isDropDown">
        <ul class="dropdown-menu">
            <xsl:apply-templates select="./*" />
        </ul>
    </xsl:if>
  </li>
</xsl:if> 
```

# java - JIntellitype 与 java

> ID：14412738
> 
> 赞同：1
> 
> 时间：2013-01-19T09:01:38.753
> 
> 标签：java, hotkeys

如何在 Java 中使用 JIntellitype？如果那不可能，我将如何在系统托盘菜单上使用热键，即使应用程序不在焦点上也会起作用。

但是，我无法让 JIntellitype 在 MAC OSX 上工作。

如何在 Mac 上完成这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-14T16:46:30.503

我知道这个问题有点老了，但没有答案。JIntellitype 使用该 Java 本机接口 (JNI) 来利用直接与操作系统 API 对话的 C/C++，从而绕过 JVM 的沙盒限制。正如您已经注意到的，本机 C/C++ 代码依赖于平台，在这种情况下只能在 Windows 上运行。[Linux ( JxGrabKey](http://sourceforge.net/projects/jxgrabkey/) ) 和 Mac OSX ( [OSSupport](https://bitbucket.org/agynamix/ossupport-connector/src) )也有类似的项目，但是，每个平台的 API 不同。如果您需要更好的跨平台支持，可以尝试使用[JNativeHook](https://github.com/kwhat/jnativehook)。

# function - 修复“从字符串转换为双精度类型在 VB.NET 中无效的错误”

> ID：14412745
> 
> 赞同：-1
> 
> 时间：2013-01-19T09:02:23.917
> 
> 标签：function, arraylist, datatable, vb.net-2010

当我在类文件中调用该函数时，出现错误：

> 从字符串转换为双精度类型在 VB.NET 中是无效错误

这是类文件函数，也是.aspx页面调用函数语句：

**类文件中的函数**

```
Public Function readfunctionname(ByVal query As String) As ArrayList
    Try
        connecttodb()
        mysqlcmd = New MySqlCommand(query, con)
        da = New MySqlDataAdapter(mysqlcmd)
        dt = New DataTable
        da.Fill(dt)
        Dim i As Integer = 0
        Do While (i <= (dt.Rows.Count - 1))
            Dim j As Integer = 0
            Do While (j <= (dt.Columns.Count - 1))
                fun_name.Add(dt.Rows(i)(j).ToString)
                j = (j + 1)
            Loop
            i = (i + 1)
        Loop

    Catch ex As Exception
        Throw ex
    Finally
        disconnect()
    End Try
    Return fun_name
End Function 
```

**aspx 中的函数调用**

```
For i = 0 To count
    Dim val As Integer = CInt(ddl1.Items(i).Text.ToString)
    nameList = c1.readfunctionname("select fld_funname from tbl_user_function_mast where fld_id='" + val + "'")           
Next 
```

我在 .aspx proj 的函数调用语句中遇到上述错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T23:58:06.490

换线试试

```
fun_name.Add(dt.Rows(i)(j).ToString) 
```

至

```
fun_name.Add(dt.Rows(i)(j)) 
```

我不确定哪一行导致了错误。但我认为是那个。

# django - django 应用基于条件的样式类

> ID：14412752
> 
> 赞同：40
> 
> 时间：2013-01-19T09:03:35.273
> 
> 标签：django, django-templates

我正在显示图像列表。如果用户上传了一张图片，我想保持它的不透明度 0.5 并且在图片列表中，其他人上传的图片应该是完全不透明度的。我做了如下，有没有更好的方法呢？

```
{% if request.user == obj.shared_by %}
       <div class="item-image" style="opacity:0.5;filter:alpha(opacity=50);"> 
          {% else  %}
          <div class="item-image"> 
          {% endif %}
        ......Some code here....
       </div> 
```

谢谢！

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2013-01-19T09:06:57.913

我通常会选择：

```
<div class="item-image{% if foo %} own-image{% endif %}">...</div> 
```

但是切换出整个`div`标签可能更具可读性。

无论哪种方式，我都会使用另一个类而不是内联 css 来进行样式设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-03T21:28:45.367

我通过这种方式在 if 条件下添加了类....

```
<li class="nav-item {% if app_url == '/' %} active{% endif %}">
```

# c# - 在创建帐户时为用户分配角色 asp.net

> ID：14412760
> 
> 赞同：4
> 
> 时间：2013-01-19T09:04:49.343
> 
> 标签：c#, asp.net, visual-studio-2010, user-accounts, role

我还是个学生，我正在学习 C#。我必须在 ASP.NET 中制作一个小应用程序。应用程序必须使用角色。

因此，我将 MemberShip “链接”到我的数据库（使用 asp_regsql 工具）。现在我有所有的 asp 表，所以没关系。我使用 ASP 配置工具创建了 2 个角色（管理员和客户端）。

我的问题是：

是否可以创建一个页面（如 Register.aspx）并在此页面中传递隐藏参数以在注册时设置用户角色？

例如，我将有一个页面 RegisterClient.aspx，当用户在此页面上创建帐户时，该帐户会自动关联到客户端角色。

是否有可能或者我必须自己使用 ASP 配置器来执行此操作？

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-19T09:11:03.280

您可以添加此 Roles.AddUserToRole(model.UserName, "roleName"); 到注册控件的 onregistered 事件处理程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T09:11:23.977

您必须自己在类似这样的代码后面的代码中为用户分配角色：-

```
<asp:CreateUserWizard ID="CreateUser1" runat="server" Width="435" OnCreatedUser="CreatedUser" CreateUserButtonType="Link">

public void CreatedUser(object sender, EventArgs e)
{    
    Roles.AddUserToRole(CreateUser1.UserName, "Members");
} 
```

# java - 通过Java程序将字符串（包含时区）插入SQL Server 2008中的datetimeoffset列

> ID：14412763
> 
> 赞同：3
> 
> 时间：2013-01-19T09:05:00.973
> 
> 标签：java, sql-server

我必须插入字符串形式的数据（也包含时区，即 2013-01-19 00:00:00 +0530），列的数据类型是 DATETIMEOFFSET。我已经尝试了 java.util.date 和 sql.date 但找不到任何解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T09:08:08.397

如果您使用的是[Microsoft JDBC 驱动程序](http://msdn.microsoft.com/en-gb/sqlserver/aa937724.aspx)，则可以使用[`DateTimeOffset`](http://msdn.microsoft.com/en-us/library/ff427229.aspx)该类，使用该[`valueOf`](http://msdn.microsoft.com/en-us/library/ff427231.aspx)方法构造实例。

您需要将值解析为本地时间和偏移量（以便分别传递这两个部分），但使用`SimpleDateFormat`. （`Z`格式说明符`SimpleDateTimeFormat`将处理 +0530 之类的偏移量。）或者，使用[Joda Time](http://joda-time.sf.net)这将使生活更轻松，因为它可以让您解析为`DateTime`可让您一次性获得偏移量和本地时间的 a。我会亲自使用 Joda Time 并创建一种方法来从 a 转换`DateTime`为`DateTimeOffset`.

# php - 提取 jomsocial 2.8 字段

> ID：14412764
> 
> 赞同：-1
> 
> 时间：2013-01-19T09:05:02.020
> 
> 标签：php, joomla, jomsocial

我应该如何从 jomsocial（最新版​​本 2.8）中提取字段，以便我可以在个人资料中的其他任何地方展示？我正计划重新设计个人资料页面。

我尝试在 profile.about.php 中使用此代码，但无法使其正常工作。

```
<?php
$data = array( 'type' => 'textarea' , 'value' => $user->getInfo('FIELD_ABOUTME') );
CFactory::load( 'libraries' , 'profile' );
$value = CProfileLibrary::getFieldData( $data );
?>
<?php echo $value; ?> 
```

得到错误：

> 致命错误：在非对象上调用成员函数 getInfo()

我正在使用 jomsocial 2.8 和 joomla 2.5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:04:44.707

Jomsocial 文档建议使用以下代码来获取用户字段数据，可能是因为其字段值在数据库中设置的有点不同。

```
$user = CFactory::getUser($userId);
$data = $user->getInfo('FIELD_CODE'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T17:40:26.703

尝试这个

```
<?php
        $data = array( 'type' => 'textbox' , 'value' => $member->getInfo('FIELD_COMPANY_NAME') );
        CFactory::load( 'libraries' , 'profile' );
        $value = CProfileLibrary::getFieldData( $data );
     ?>
        <?php echo $value; ?> 
```

# ios - 如何在 UITextView 中禁用键盘或如何使返回键起作用？

> ID：14412766
> 
> 赞同：0
> 
> 时间：2013-01-19T09:05:07.173
> 
> 标签：ios, objective-c, ios6, uitextview

我在`UITextView`没有 xib 的情况下使用（以编程方式）。我有一个水平滚动的文本。我无法禁用键盘，我使用过：

```
textView.editable = NO; 
```

否则我想使用也不起作用的返回键，我使用过：

```
-(void)textFieldDidEndEditing:(UITextView *)textView{

NSLog(@"%@",textView.text);
[textView resignFirstResponder]; 
```

或者我可以有 IBAction 选项，我可以以编程方式...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T09:17:37.850

好吧，当有人在输入数据后触摸任何地方时，我可以说出一些有用的东西。使用这个方法

```
-(void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    [super touchesBegan: touches withEvent:event];
    [[self textView]resignFirstResponder];
} 
```

这是一个链接，它可以帮助您使用委派来做同样的事情。

[UITextView在iphone中隐藏键盘](https://stackoverflow.com/questions/6680693/uitextview-hide-keyboard-in-iphone)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T09:26:36.863

要在按下完成按钮时关闭键盘，请使用此

```
- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text {
  if ([text isEqualToString:@"\n"]) {
    [textView resignFirstResponder];
    return NO;
  }
  return YES;
} 
```

# javascript - 我怎样才能使这段代码更短

> ID：14412771
> 
> 赞同：0
> 
> 时间：2013-01-19T09:05:51.273
> 
> 标签：javascript, jquery, html, css

我正在努力提高我的编码技能并开始学习 jquery。我从简单的事情开始，比如制作一个非常简单的图像展示。这是我到目前为止编写的代码。但它似乎太长而且效率不高。有什么办法可以改善吗？

html:

```
<div id="galerija">
  <div style="float: left; border: 1px solid red; width: 600px; height: 450px;background-image: url(images/gora_big_main.png);" class="big_image"></div>
  <div style="float:left;"id="trumbai">

  <div style="border: 1px solid red; cursor: pointer; width: 150px; height: 75px; background-image: url(images/gora_trumb_1.png);"class="trumb_1"></div>
  <div style="border: 1px solid red; cursor: pointer; width: 150px; height: 75px; background-image: url(images/gora_trumb_2.png);"class="trumb_2"></div>
  <div style="border: 1px solid red; cursor: pointer; width: 150px; height: 75px; background-image: url(images/gora_trumb_2.png);"class="trumb_3"></div>
  <div style="border: 1px solid red; cursor: pointer; width: 150px; height: 75px; background-image: url(images/gora_trumb_main.png);"class="main_trumb"></div>
  </div>
</div> 
```

JS

```
<script type="text/javascript">
  $(function(){
    $(".trumb_1").click(function(){
      $(".big_image").css("background-image","url('images/gora_big_1.png')");
    });
  });
  $(function(){
    $(".trumb_2").click(function(){
      $(".big_image").css("background-image","url('images/gora_big_2.png')");
    });
  });
  $(function(){
    $(".trumb_3").click(function(){
      $(".big_image").css("background-image","url('images/gora_big_3.png')");
    });
  });
  $(function(){
    $(".main_trumb").click(function(){
      $(".big_image").css("background-image","url('images/gora_big_main.png')");
    });
  });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T10:06:34.650

将您的样式分离到一个链接的 css 文件中，这样您就不会在 HTML 中有太多重复的样式：

HTML：

```
<div id="galerija">
   <div id="big_image"></div>
   <div id="trumbai">

      <div id="t1" "class="trumb"></div>
      <div id="t2" "class="trumb"></div>
      <div id="t3" "class="trumb"></div>
      <div id="tmain" "class="trumb"></div>

   </div>
</div> 
```

一个好的经验法则是，如果您可以在 HTML 中找到“style=”，那么您的内联样式就太多了。

CSS：

```
#big_image
{
float: left;
border: 1px solid red;
width: 600px; height:
450px;background-image: url(images/gora_big_main.png);
}

#t1 {background-image: url(images/gora_trumb_1.png);}
#t2 {background-image: url(images/gora_trumb_2.png);}
#t3 {background-image: url(images/gora_trumb_3.png);}
#tmain {background-image: url(images/gora_trumb_main.png);}
#trumbai {float:left;}

.trumb //<--- notice how ALL of the styling for all class="trumb" is set in one place!
{
border: 1px solid red;
cursor: pointer;
width: 150px;
height: 75px;
} 
```

在 JavaScript 中使用变量：

```
imageClick("#t1", "gora_big_1")
imageClick("#t2", "gora_big_2")
imageClick("#t3", "gora_big_3")
imageClick("#tmain", "gora_big_main")

 function imageClick(id, imageName)
{
       $(function(){
            $("").click(function(){
                $(id).css("background-image","url('images/' + imageName + '.png')");
            });
        });
} 
```

请注意，我使 imageClick() 成为一个非常通用的函数，以便它可以在其他地方重复使用。我以 id 作为参数调用函数，并将 id 完全排除在函数之外。然后可以无限循环地回收一个代码块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T09:11:38.797

这个怎么样？

```
$(function() {
    $('#trumbai div').click(function() {
        $('.big_image').css('background-image', 'url('+ $(this).data('image') +')');
    });
}); 
```

要单击的 div 具有`image`包含扩展图像的 URL 的数据属性，如下所示。

```
<div data-image="image/gora.png"></div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T09:12:45.273

为大图像添加一个数据属性到您的 div 中，并为所有人提供一个通用类

```
<div data-big-image="images/gora_big_1.png" class="trumb" style...></div> 
```

然后在jQuery中使用data属性：

```
$(function(){
        $(".trumb").on('click', function(){
            var bigImage = $(this).data('big-image');
            $(".big_image").css("background-image","url('" + bigImage + "')");
        });
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T09:34:24.280

您可以执行以下操作来缩短代码：

```
$('[class^="trumb_"]').each(function() {
    $(this).click(function() {
        var i = $(this).index();
        i += 1;
        var imgUrl = "images/gora_big_" + i + ".png";
        $(".big_image").css("background-image","url('" + imgUrl + "')");
    })
});

$(".main_trumb").click(function(){
    $(".big_image").css("background-image","url('images/gora_big_main.png')");
}); 
```

**演示：http:** [//jsfiddle.net/255Qv/](http://jsfiddle.net/255Qv/)

# c++ - c++ tga 用一些分辨率解析不正确的颜色/失真

> ID：14412772
> 
> 赞同：1
> 
> 时间：2013-01-19T09:06:03.563
> 
> 标签：c++, parsing, opengl, distortion, tga

我想就我的 .tga 文件格式解析问题获得一些帮助。我有代码，我使用了很长时间：

```
 int fileLength = Input.tellg();
            vector<char> tempData;
            tempData.resize(fileLength);

            Input.seekg(0);
            Input.read(&tempData[0], fileLength);
            Input.close();

            // Load information about the tga, aka the header.
            // Seek to the width.
            w = byteToUnsignedShort(tempData[12], tempData[13]);

            // Seek to the height.
            h = byteToUnsignedShort(tempData[14], tempData[15]);

            // Seek to the depth.
            depth = unsigned(tempData[16]);

            // Mode = components per pixel.
            md = depth / 8;

            // Total bytes = h * w * md.
            t = h * w * md;

            //Delete allocated data, if need to
            clear();

            //Allocate new storage
            data.resize(t);

            // Copy image data.
            for(unsigned i = 0, s = 18; s < t + 18; s++, i++)
                data[i] = unsigned char(tempData[s]);

            // Mode 3 = RGB, Mode 4 = RGBA
            // TGA stores RGB(A) as BGR(A) so
            // we need to swap red and blue.
            if(md > 2)
            {
                char aux;

                for(unsigned i = 0; i < t; i+= md)
                {
                    aux = data[i];
                    data[i] = data[i + 2];
                    data[i + 2] = aux;
                }
            } 
```

但是对于某些图像分辨率（主要是奇数和非 POT 分辨率），它偶尔会失败。它会导致图像失真（带有对角线图案）或颜色错误。上次我遇到它 - 这是 9x9 24bpp 图像显示奇怪的颜色。

我在windows上（所以它意味着little-endian），用opengl渲染（我正在考虑alpha通道的存在，当用glTexImage2D传递图像数据时）。我正在用 Photoshop 保存我的图像，而不是设置 RLE 标志。此代码始终读取正确的图像分辨率和颜色深度。

造成问题的图像示例：http: [//pastie.org/private/p81wbh5sb6coldspln6mw](http://pastie.org/private/p81wbh5sb6coldspln6mw)

加载有问题的图像后，此代码：

```
for(unsigned f = 0; f < imageData.w * imageData.h * imageData.depth; f += imageData.depth)
{
    if(f % (imageData.w * imageData.depth) == 0)
        writeLog << endl;

    writeLog << "[" << unsigned(imageData.data[f]) << "," << unsigned(imageData.data[f + 1]) << "," << unsigned(imageData.data[f + 2]) << "]" << flush;
} 
```

输出这个：

```
[37,40,40][37,40,40][37,40,40][37,40,40][37,40,40][37,40,40][37,40,40][37,40,40][37,40,40]
[37,40,40][173,166,164][93,90,88][93,90,88][93,90,88][93,90,88][93,90,88][88,85,83][37,40,40]
[37,40,40][228,221,219][221,212,209][221,212,209][221,212,209][221,212,209][221,212,209][140,134,132][37,40,40]
[37,40,40][228,221,219][221,212,209][221,212,209][221,212,209][221,212,209][221,212,209][140,134,132][37,40,40]
[37,40,40][228,221,219][221,212,209][221,212,209][221,212,209][221,212,209][221,212,209][140,134,132][37,40,40]
[37,40,40][228,221,219][221,212,209][221,212,209][221,212,209][221,212,209][221,212,209][140,134,132][37,40,40]
[37,40,40][228,221,219][221,212,209][221,212,209][221,212,209][221,212,209][221,212,209][140,134,132][37,40,40]
[37,40,40][237,232,230][235,229,228][235,229,228][235,229,228][235,229,228][235,229,228][223,214,212][37,40,40]
[37,40,40][37,40,40][37,40,40][37,40,40][37,40,40][37,40,40][37,40,40][37,40,40][37,40,40] 
```

所以我猜它确实读取了正确的数据。这把我们带到了opengl；

```
glGenTextures(1, &textureObject);
glBindTexture(GL_TEXTURE_2D, textureObject);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);

GLenum in_comp_mode, comp_mode;

if(linear) //false for that image
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
else
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);

glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);

//i don't use 1 or 2 - channel textures, so it's always 24 or 32bpp
    if(imageData.depth == 24)
    {
        in_tex_mode = GL_RGB8;
        tex_mode = GL_RGB;
    }
    else
    {
        in_tex_mode = GL_RGBA8;
        tex_mode = GL_RGBA;
    }

glTexImage2D(GL_TEXTURE_2D, 0, in_tex_mode, imageData.w, imageData.h, 0, tex_mode, GL_UNSIGNED_BYTE, &imageData.data[0]);

glBindTexture(GL_TEXTURE_2D, NULL); 
```

纹理压缩代码被省略，因为它对该纹理无效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T11:05:17.060

这可能是填充/对齐问题。

您正在加载一个 TGA，它没有行填充，但将其传递给 GL，默认情况下它期望将像素行填充为 4 个字节的倍数。

可能的解决方法是：

*   告诉 GL 你的纹理是如何打包的，使用（例如）`glPixelStorei(GL_UNPACK_ALIGNMENT, 1);`
*   更改纹理的尺寸，以便没有填充。
*   更改纹理的加载，使填充与 GL 期望的一致

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T09:10:57.040

大多数图像格式保存图像数据对齐（通常为 4 个字节）。例如分辨率：1rows 1columns 每行有一个像素，所以如果使用RGB，每行有3bytes。并且将扩展到 4 字节以进行对齐，因为 CPU 就是这样。

英语不是我的母语，所以我糟糕的语法会害死你。试着理解它。

# android - Spring for Android，文件上传进度

> ID：14412773
> 
> 赞同：7
> 
> 时间：2013-01-19T09:06:12.060
> 
> 标签：android, spring, rest, file-upload

我使用 Spring for Android 作为 Android 应用程序中远程调用的 REST 模板。

目前正在将图像上传到服务器。

我想出了类似的东西：

```
public Picture uploadPicture(String accessToken, String fileToUpload) throws RestClientException {
    RestTemplate rest = new RestTemplate();
    FormHttpMessageConverter formConverter = new FormHttpMessageConverter();
    formConverter.setCharset(Charset.forName("UTF8"));
    CustomGsonHttpMessageConverter jsonConverter = new CustomGsonHttpMessageConverter();
    rest.getMessageConverters().add(formConverter);
    rest.getMessageConverters().add(jsonConverter);
    String uploadUri = AppConfig.ROOT_URL.concat(AppConfig.ADD_PHOTO);

    HashMap<String, Object> urlVariables = new HashMap<String, Object>();
    urlVariables.put("accessToken", accessToken);

    HttpHeaders httpHeaders = new HttpHeaders();
    httpHeaders.setAccept(Collections.singletonList(MediaType.parseMediaType("application/json")));

    MultiValueMap<String, Object> parts = new LinkedMultiValueMap<String, Object>();
    parts.add("picture", new FileSystemResource(fileToUpload));
    Picture response = rest.postForObject(uploadUri, parts, Picture.class, urlVariables);
    return response;
} 
```

这工作正常，但现在我想从中获取进度更新。

有谁知道这是否可能以及如何做到这一点？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-09T23:39:19.657

所以我遇到了同样的问题，并决定查看 Spring-Android 源代码。经过大量挖掘，我发现了我需要扩展的内容。[从这个链接](http://toolongdidntread.com/android/android-multipart-post-with-progress-bar/)中得到了一些灵​​感。

**进度监听器**

```
public interface ProgressListener {
  void transferred(long num);
} 
```

**计数输入流**

```
public class CountingInputStream extends FileInputStream {

 private final ProgressListener listener;
 private long transferred;

 public CountingInputStream(File file, ProgressListener listener) throws FileNotFoundException {
    super(file);
    this.listener = listener;
    this.transferred = 0;
 }

 @Override
 public int read(byte[] buffer) throws IOException {
    int bytesRead = super.read(buffer);
    if (bytesRead != -1) {
        this.transferred += bytesRead;
    }
    this.listener.transferred(this.transferred);
    return bytesRead;
 }

} 
```

**侦听器文件系统资源**

```
public class ListenerFileSystemResource extends FileSystemResource {

 private final ProgressListener listener;

 public ListenerFileSystemResource(File file, ProgressListener listener) {
     super(file);
     this.listener = listener;
 }

 @Override
 public InputStream getInputStream() throws IOException {
     return new CountingInputStream(super.getFile(), listener);
 }

} 
```

**发送文件任务**

```
private class SendFileTask extends AsyncTask<String, Integer, Boolean> {
    private ProgressListener listener;
    private long totalSize;

    @Override
    protected Boolean doInBackground(String... params) {
        File file = new File(filePath);
        totalSize = file.length();
        listener = new ProgressListener() {
            @Override
            public void transferred(long num) {
                publishProgress((int) ((num / (float) totalSize) * 100));
            }
        };
        ListenerFileSystemResource resource = new ListenerFileSystemResource(file, listener);
        MyResult result = new MyService().uploadFile(resource);
    } 
```

**我的服务**

```
public FileResult uploadFile(ListenerFileSystemResource resource, Long userId, FileType type) {
    String[] pathParams = {ConnectorConstants.FILE_RESOURCE };
    String[] headerKeys = {"manager_user_id"};
    String[] headerValues = {String.valueOf(userId)};
    String[] formKeys = {ConnectorConstants.FILE_FORM_PARAM};
    Object[] formValues = {resource};

    MultiValueMap<String, Object> body = createMultiValueMap(formKeys, formValues);

    HttpConnector<FileResult> connector = new HttpConnector<FileResult>(FileResult.class);
    return connector.path(pathParams).header(createValuePairs(headerKeys, headerValues)).multipart().body(body).post();
} 
```

**连接器**

```
public final class HttpConnector<T> {

    public static String API_URL = "https://myapi.com";

    private UriComponentsBuilder builder;

    private RestTemplate template;

    private Class<T> generic;

    private HttpEntity<?> requestEntity;

    private HttpHeaders headers;

    /**
     * 
     * @param generic
     */
    protected HttpConnector(Class<T> generic)
    {
            this.builder = UriComponentsBuilder.fromUriString(API_URL);
            this.template = new RestTemplate();
    this.template.setRequestFactory(new HttpComponentsClientHttpRequestFactory());
            this.generic = generic;
            this.template.getMessageConverters().add(new GsonHttpMessageConverter(getGson()));
            this.headers = new HttpHeaders();
    }

    /**
     * 
     * @param pathSegments
     * @return
     */
    protected HttpConnector<T> path(String[] pathSegments)
    {
            this.builder = builder.pathSegment(pathSegments);
            return this;
    }

    /**
     * 
     * @param headerParams
     * @return
     */
    protected HttpConnector<T> header(List<NameValuePair> headerParams)
    {
            for (NameValuePair param : headerParams)
            {
                    headers.add(param.getName(), param.getValue());
            }
            return this;
    }

    /**
     * 
     * @param queryParams
     * @return
     */
    protected HttpConnector<T> query(List<NameValuePair> queryParams)
    {
            for (NameValuePair param : queryParams)
            {
                    this.builder = builder.queryParam(param.getName(), param.getValue());
            }
            return this;
    }

    /**
     * 
     * @param body
     * @return
     */
    protected HttpConnector<T> body(MultiValueMap<String, ? extends Object> body)
    {
            this.requestEntity = new HttpEntity<Object>(body, headers);
            return this;
    }

    /**
     * 
     * @param body
     * @return
     */
    protected HttpConnector<T> body(Object body)
    {
            this.requestEntity = new HttpEntity<Object>(body, headers);
            headers.setContentType(MediaType.APPLICATION_JSON);
            return this;
    }

    /**
     * 
     * @return
     */
    protected HttpConnector<T> form()
    {
            headers.setContentType(MediaType.APPLICATION_FORM_URLENCODED);
            return addFormConverter();
    }

    /**
     * 
     * @return
     */
    protected HttpConnector<T> multipart()
    {
            headers.setContentType(MediaType.MULTIPART_FORM_DATA);
            return addFormConverter();
    }

    /**
     * 
     * @return
     */
    private HttpConnector<T> addFormConverter()
    {
            this.template.getMessageConverters().add(new FormHttpMessageConverter());
            return this;
    }

    /**
     * 
     * @return
     * @throws MeplisNotFoundException 
     */
    protected T post() throws MeplisNotFoundException
    {
            return sendRequest(HttpMethod.POST);
    }

    /**
     * 
     * @return
     * @throws MeplisNotFoundException 
     */
    protected T put() throws MeplisNotFoundException
    {
            return sendRequest(HttpMethod.PUT);
    }

    /**
     * 
     * @return
     * @throws MeplisNotFoundException 
     */
    protected T get() throws MeplisNotFoundException
    {
            return sendRequest(HttpMethod.GET);
    }

    /**
     * 
     * @param method
     * @return
     * @throws MeplisNotFoundException 
     */
    private T sendRequest(HttpMethod method) throws MyServiceNotFoundException
    {
            HttpStatus status = null;
            ResponseEntity<T> response;
            try
            {
                    response = template.exchange(toUri(), method, getRequestEntity(), generic);
                    status = response.getStatusCode();
                    if (HttpStatus.OK.equals(status))
                    {
                            return response.getBody();
                    }
            } catch (HttpClientErrorException e)
            {
                    if (HttpStatus.NOT_FOUND.equals(e.getStatusCode()))
                    {
                            throw new MyServiceNotFoundException();
                    }
                    else
                    {
                            Log.e(getClass().toString(), String.format("Error %s request, status[%s]", method.toString(), e.getStatusCode()), e);
                    }
            } catch (Exception e)
            {
                    Log.e(getClass().toString(), String.format("Error %s request, status: %s", method.toString(), status), e);
            }
            return null;
    }

    /**
     * 
     * @return
     */
    private HttpEntity<?> getRequestEntity()
    {
            if (this.requestEntity == null)
            {
                    this.requestEntity = new HttpEntity<Object>(headers);
            }
            return requestEntity;
    }

    /**
     * 
     * @return
     */
    private URI toUri()
    {
            return this.builder.build().toUri();
    }

    /**
     * 
     * @return
     */
    private Gson getGson()
    {
            return new GsonBuilder().create();
    }

    /**
     * 
     * @return
     */
    public HttpHeaders getHeaders()
    {
            return headers;
    }

} 
```

我使用**ListenerFileSystemResource**而不是**FileSystemResource**并且可以工作。希望这对将来的某人有所帮助，因为我没有找到有关 Spring 框架的任何信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-08T10:49:12.537

您需要覆盖 FormHttpMessageConverter 和 ResourceHttpMessageConverter ：

```
public class ProgressFormHttpMessageConverter extends FormHttpMessageConverter {

    OnProgressListener mOnProgressListener;

    public ProgressFormHttpMessageConverter() {
        super();

        List<HttpMessageConverter<?>> partConverters = new ArrayList<HttpMessageConverter<?>>();
        partConverters.add(new ByteArrayHttpMessageConverter());
        StringHttpMessageConverter stringHttpMessageConverter = new StringHttpMessageConverter();
        stringHttpMessageConverter.setWriteAcceptCharset(false);
        partConverters.add(stringHttpMessageConverter);
        partConverters.add(new ProgressResourceHttpMessageConverter();
        setPartConverters(partConverters);
    }

    public ProgressFormHttpMessageConverter setOnProgressListener(OnProgressListener listener) {
        mOnProgressListener = listener;
        return this;
    }

    class ProgressResourceHttpMessageConverter extends ResourceHttpMessageConverter {

        @Override
        protected void writeInternal(Resource resource, HttpOutputMessage outputMessage) throws IOException, HttpMessageNotWritableException {
            InputStream inputStream = resource.getInputStream();
            OutputStream outputStream = outputMessage.getBody();

            byte[] buffer = new byte[StreamUtils.BUFFER_SIZE];
            long contentLength = resource.contentLength();
            int byteCount = 0;
            int bytesRead = -1;
            while ((bytesRead = inputStream.read(buffer)) != -1) {
                outputStream.write(buffer, 0, bytesRead);
                byteCount += bytesRead;

                if(mOnProgressListener != null) {
                    mOnProgressListener.onProgress(resource, byteCount, contentLength);
                }
            }
            outputStream.flush();
        }
    }

    public interface OnProgressListener {
        void onProgress(Resource resource, int downloaded, int downloadSize);
    }
} 
```

# android - 在 Android 中发送一条未知字符替换为“替换字符”的 SMS 消息 (UTF-16)

> ID：14412775
> 
> 赞同：6
> 
> 时间：2013-01-19T09:06:43.617
> 
> 标签：android, unicode, sms, gsm, utf-16

我在发送 SMS 消息时遇到问题。我创建了一个带有“\uFDE8”之类的字符的字符串（它是 65000）。当我将其转换回来时，我得到 65000。看起来还可以。

但是，当我使用此字符串发送 SMS 并接收消息时，我将此字符替换为“\uFFFD”（65533）。该字符称为“替换字符”。

为什么我的角色被替换了？

//edit 我的解决方案是将字符串的每个字符转换为7位，然后发送。您必须注意到 gms 字母表与 ascii 不同（某些字符需要替换为另一个字符）。祝你好运！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T09:14:03.977

根据 Unicode 表，`U+FDE8`不是有效的代码点。

如您所料，任何无效字符都会被您的提供商的 SMS 系统替换为�，它本身是一个有效的 Unicode 字符，但仅用于表明无法正确表示原始字符。[`U+FFFD`](http://www.fileformat.info/info/unicode/char/fffd/index.htm) `REPLACEMENT CHARACTER`

# javascript - 访问仪表板的令牌粉丝页面

> ID：14412783
> 
> 赞同：0
> 
> 时间：2013-01-19T09:08:12.610
> 
> 标签：javascript, facebook, facebook-fql, facebook-opengraph, facebook-page

我想访问我的访问权限，`fanpage`以在我们公司的电视上作为仪表板在另一个网站上显示该页面的见解。

1.  如何获得访问令牌？我已经在 developer-facebook 部分尝试过。但我只获得个人资料的访问令牌。
2.  访问令牌是否过期？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T09:57:42.433

Facebook 文档已经为此提供[了分步教程](https://developers.facebook.com/docs/howtos/login/login-as-page/)。

主要是你需要：

1.  `manage_pages`允许
2.  [扩展您的用户访问令牌](https://developers.facebook.com/docs/howtos/login/extending-tokens/)
3.  使用上述用户令牌获取页面访问令牌（生成的页面令牌不会过期）
4.  您还需要`read_insights`获得特定案例的许可

# c# - 修复了另一个结构内的结构数组？

> ID：14412784
> 
> 赞同：0
> 
> 时间：2013-01-19T09:08:14.643
> 
> 标签：c#, .net, structure

我需要一个数组`structs`（它们都是非托管`structs`的，大小固定），但显然 Visual Studio 不喜欢我的代码。

基本上我需要类似的东西

`fixed page_table tables[1024];`在我的结构中。

这是使视觉工作室适合的代码，无论如何我可以实现这一点（我需要它全部预先初始化）

```
[StructLayout(LayoutKind.Explicit, Pack = 1)]
public unsafe struct page_directory
{
    [FieldOffset(0)]
    public fixed page_table tables[1024];

    [FieldOffset(0x8000)]
    public fixed uint tablesPhysical[1024];

    [FieldOffset(0x9000)]
    public uint physicalAddr;
}

[StructLayout(LayoutKind.Explicit, Pack = 1)]
public unsafe struct page_table
{
    [FieldOffset(0)]
    public fixed page pages[1024];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T09:19:21.137

错误信息非常清楚。除了列出的固定缓冲区之外，您不能使用任何其他类型。

错误消息甚至为您提供了可能的解决方案，要么使用允许的类型之一，要么不使用固定缓冲区。

如果您真的需要您尝试使用的代码，那么您已经到了无法做任何您想做的事情的地步。

# eclipse - 如何在 Eclipse 中编写和编译混合编程语言（C 和 FORTRAN）

> ID：14412785
> 
> 赞同：2
> 
> 时间：2013-01-19T09:08:14.983
> 
> 标签：eclipse, fortran, fortran-iso-c-binding

基本上，我想在 Ubuntu（Linux 环境）的 Eclipse（并行应用程序开发）IDE 中使用 C 和 FORTRAN 编写混合编程语言。

我的主程序将在 C 中，调用函数将在 FORTRAN 中。现在我应该如何将这个 FORTRAN 源程序链接到 C 项目？

我能够从终端（linux）编写和编译相同的（混合编程），没有任何问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T14:51:24.513

首先确保您安装了适当的编译器；通常是默认的 GNU 编译器集合（但这也适用于英特尔的编译器）。确保您同时安装了 C (gcc) 和 Fortran (gfortran) 编译器。在[NetBeans](http://netbeans.org/)中，确保编译器被识别。转到工具 --> 选项，然后选择 C/C++ 选项卡。C、C++ 和 Fortran 编译器应在此处列出。如果不是，请单击“恢复默认值”按钮，它应该会找到它们。

接下来，创建一个新的 C/C++ 项目（文件 --> 新建项目），选择“C/C++ 应用程序”。点击下一步”。填写项目名称、位置、文件夹等信息。选中“创建主文件”框，并确保从右侧的下拉菜单中选择“C”。单击“完成”。

此时，您应该有一个可以编译的“Hello World”C 代码。检查这个：运行 --> 清理并构建项目。然后运行它。

要添加 Fortran（或其他 C/C++）源文件，请右键单击左侧“项目”窗口中的“源文件”，然后单击“新建”并选择适当的文件类型（本例中为 Fortran）。给它一个文件名，然后选择它是 F 还是 F90（或任何其他选项）类型的文件。这将自动将其添加到构建和链接中。您还可以通过选择“添加现有项目...”选项来添加现有文件。

链接时可能需要包含一些标准的 Fortran 库。为此，请右键单击项目名称并选择“属性”。在左侧的菜单中，单击“链接器”。根据需要添加额外的库目录（第 2 行），在第 2 行到最后一行，您可以添加特定的库——添加 Fortran 文件所需的任何 Fortran 库（IO 是一种常见的库）。

至此，您应该可以毫无问题地编译混合源代码。如果您想从 C 调用 Fortran 子例程，请确保您有适当的头文件（您可以通过右键单击“头文件”并选择“新建”->“C 头文件”来添加），其中包含`extern "C" void functionname(arguments)`Fortran 文件中的任何子程序。

# php - 警告：addProfile() 缺少参数 2

> ID：14412788
> 
> 赞同：-2
> 
> 时间：2013-01-19T09:08:43.780
> 
> 标签：php, mysql

我知道在 SE 上已经有很多关于“警告：缺少论点 2”问题的文章，尽管我似乎无法真正找到答案（即使在多次查看所有其他问题之后）。

第一个错误集：http: [//i.stack.imgur.com/HTySO.png](http://i.stack.imgur.com/HTySO.png)

第二个错误集：http: [//i.stack.imgur.com/wDwxm.png](http://i.stack.imgur.com/wDwxm.png)

（我尝试发布为 SE 图像，但由于我是新手，它不会让我）

这是我目前遇到的两个错误 20 次（我有 20 个不同的数据库字段，这是一个“配置文件”部分）。

我花了大约两个小时试图弄清楚为什么它不起作用，但我一无所知。

addProfile.php ：

```
<?php
include('../includes/functions.php');

    if(isset($_POST['submit'])) {
        if(isset($_POST['profile_name'])) {
            addProfile($_POST['profile_name']);
        } else {
            echo "Please Enter A Profile Name!";
            include('manage_settings.php');
        }
        if(isset($_POST['profile_description'])) {
            addProfile($_POST['profile_description']);
        } else {
            echo "Please Enter A Profile Description!";
            include('manage_settings.php');
        }
            if(isset($_POST['first_name'])) {
                addProfile($_POST['first_name']);
            }
            if(isset($_POST['last_name'])) {
                addProfile($_POST['last_name']);
            }
            if(isset($_POST['company'])) {
                addProfile($_POST['company']);
            }
            if(isset($_POST['office_phone'])) {
                addProfile($_POST['office_phone']);
            }
            if(isset($_POST['cell_phone'])) {
                addProfile($_POST['cell_phone']);
            }
            if(isset($_POST['fax_num'])) {
                addProfile($_POST['fax_num']);
            }
            if(isset($_POST['email_addr'])) {
                addProfile($_POST['email_addr']);
            }
            if(isset($_POST['website'])) {
                addProfile($_POST['website']);
            }
            if(isset($_POST['motto'])) {
                addProfile($_POST['motto']);
            }
            if(isset($_POST['street_addr'])) {
                addProfile($_POST['street_addr']);
            }
            if(isset($_POST['city'])) {
                addProfile($_POST['city']);
            }
            if(isset($_POST['state'])) {
                addProfile($_POST['state']);
            }
            if(isset($_POST['zip'])) {
                addProfile($_POST['zip']);
            }
            if(isset($_POST['country'])) {
                addProfile($_POST['country']);
            }
            if(isset($_POST['facebook_url'])) {
                addProfile($_POST['facebook_url']);
            }
            if(isset($_POST['places_url'])) {
                addProfile($_POST['places_url']);
            }
            if(isset($_POST['twitter_url'])) {
                addProfile($_POST['twitter_url']);
            }
            if(isset($_POST['linkedin_url'])) {
                addProfile($_POST['linkedin_url']);
        }
    } else {
        header("Location: manage_settings.php");
    }
?> 
```

函数.php：

```
<?php
include('connect.php');

function getProfiles() {
    $query = mysql_query("SELECT * FROM global_profiles") or die(mysql_error());
    if(mysql_num_rows($query) == 0) {
        echo "<center><h3><b><u>No Profiles Currently Available</u></b></h3></center>";
    } else {
        while($profile = mysql_fetch_assoc($query)) {
            echo "<tr><td><input type=\"checkbox\" /></td><td>" . $profile['profile_name'] . "</td><td><a href=\"#\" title=\"title\">Coming Soon</a></td><td>" . $profile['profile_description'] . "</td><td>" . $profile['pid'] . "</td><td><a href=\"edit.php?pid=" . $profile['pid'] . "\" title=\"Edit\"><img src=\"images/pencil.png\" alt=\"Edit\" /></a> <a href=\"delete.php?pid=" . $profile['pid'] . "\" title=\"Delete\"><img src=\"images/cross.png\" alt=\"Delete\" /></a> <a href=\"duplicate.php?pid=" . $profile['pid'] . "\" title=\"Duplicate\"><img src=\"images/hammer_screwdriver.png\" alt=\"Duplicate\" /></a></td></tr>";
        }
    }
}

function deleteProfile($pid) {
    $pid = (int) $pid;
    mysql_query("DELETE FROM global_profiles WHERE pid = '$pid'") or die(mysql_error());
    header("Location: manage_settings.php");
}

function addProfile($pid, $profile_name, $profile_description, $first_name, $last_name, $company, $office_phone, $cell_phone, $fax_num, $email_addr, $website, $motto, $city, $state, $zip, $country, $facebook_url, $places_url, $twitter_url, $linkedin_url) {
    $query = mysql_query("INSERT INTO global_profiles VALUES(null,'$profile_name','$profile_description','$first_name','$last_name','$company','$office_phone','$cell_phone','$fax_num','$email_addr','$website','$motto','$city','$state','$zip','$country','$facebook_url','$places_url','$twitter_url','$linkedin_url')") or die(mysql_error());
}
?> 
```

我要做的基本上是将新信息“保存”到我的数据库中。我已经能够通过 phpMyAdmin 手动将其添加到数据库中，然后在我的管理区域内显示信息。

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T09:17:41.047

将您的修改`addProfile()`为：

```
function addProfile($post) {

    // Here check wether you have certain post array key set and add it to query

} 
```

并将其用作：

```
if(isset($_POST['profile_name'])) {

      addProfile($_POST);

} 
```

# facebook-graph-api - 如何从 facebook graph api 获取一般数据

> ID：14412789
> 
> 赞同：0
> 
> 时间：2013-01-19T09:08:59.287
> 
> 标签：facebook-graph-api

我正在研究 facebook graph api。我知道我可以通过使用当前 id 获取有关 facebook 网页的信息。同样清楚的是，在检索到访问令牌后，我可以在已登录的用户墙上发布并执行其他操作。

但是如果我想要更一般的数据怎么办？例如，我可以知道有多少瑞典用户在上周的状态更新中使用了“奥巴马”这个词吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T10:00:09.043

我不认为当前的`search`API 可以那么具体。[您可以在本文档](https://developers.facebook.com/docs/reference/api/search/)中找到有关搜索 API 的所有信息。

# javascript - 如何在 Cakephp 中一次加载所有 css 和 js

> ID：14412792
> 
> 赞同：0
> 
> 时间：2013-01-19T09:09:11.300
> 
> 标签：javascript, css, cakephp, cakephp-2.0

如何在一个请求上加载所有 css 和 js

这是一个示例 HTML 文档，它同样包含许多 CSS 和 JavaScript 文件

> > <link rel="stylesheet" type="text/css" href="path/to/960framework.css">
> > 
> > <link rel="stylesheet" type="text/css" href="path/to/base.css">
> > 
> > <link rel="stylesheet" type="text/css" href="path/to/navigations.css">
> > 
> > < script type="text/javascript" src="path/to/jQuery.js">
> > 
> > < script type="text/javascript" src="path/to/functions.js">
> > 
> > < script type="text/javascript" src="path/to/handlers.js">

... 多过

它发出 6 个请求，但我想一次加载所有 js 和 css（只有一个请求）

所以我试试

对于 CSS

> > allStyles.css.php //
> > 
> > 包括（“cssReset.css”）；
> > 
> > 包括（“960framework.css”）；
> > 
> > 包括（“base.css”）；

对于js

> > allScripts.js.php
> > 
> > 包括（“jQuery.js”）；
> > 
> > 包括（“functions.js”）；
> > 
> > 包括（“handlers.js”）；
> > 
> > 包括（“ajax.js”）；
> > 
> > 包括（“导航.css”）；

然后打电话

> > <link rel="stylesheet" type="text/css" href="path/to/allStyles.css.php">
> > 
> > < script type="text/javascript" src="path/to/allScripts.js.php">

所有 js 和 css 都已加载，但 css 和 js 没有打开页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T10:55:39.307

php 未在响应中发送适当的内容类型标头。为您将这些 line 添加到页面顶部

```
<?php header("Content-type: text/css"); ?>
<?php header("Content-type: application/javascript"); ?> 
```

# c++ - 在 STL 优先级队列 C++ 中实现 reduceKey

> ID：14412793
> 
> 赞同：4
> 
> 时间：2013-01-19T09:09:17.527
> 
> 标签：c++, stl, priority-queue, prims-algorithm, decrease-key

我正在尝试实现 Prim 算法，为此我需要为优先级队列提供 reductionKey 方法（以更新优先级队列中的键值）。我可以在 STL 优先级队列中实现这个吗？

如果有帮助，这就是我正在遵循的算法：

*   对于图 G 中的每个顶点 u
    *   将 u 的键设置为 INFINITY
    *   将你的父级设置为 NIL
*   将源顶点的键设置为 0
*   排队到优先级队列 Q 图中所有顶点与上面的键
*   而 Q 不为空
    *   弹出 Q 中键最低的顶点 u
    *   对于你的每个相邻顶点 v
        *   如果 (v 还在 Q) 并且 (key(u) + weight-function(u, v) < key(v)) 那么
            *   将 u 设置为 v 的父级
            *   将 v 的键更新为等于 key(u) + weight-function(u, v) *// 这部分给我带来了问题，因为我不知道如何在优先级队列中实现 reduceKey*

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-19T09:13:45.810

我不认为你可以在 STL 容器中实现它。请记住，您始终可以根据向量编写自己的堆（优先级队列），但有一种解决方法：

保持距离数组，比如说`d`。在您的优先队列中，您放置成对的距离和该距离的顶点索引。当您需要从队列中删除某些值时，请不要删除它，只需更新`d`数组中的值并将新对放入队列中即可。

每次从队列中获取新值时，检查距离是否真的那么好，就像在你的数组中一样`d`。如果不忽略它。

时间相同 O(MlogM)。内存为 O(MlogM)，其中 M 是边数。

还有另一种方法：使用 RB-Tree，它可以在 O(logN) 中插入和删除键并获得最小值。`std::set`您可以在容器中的 RB-Tree 的 STL 中找到实现。

但是，虽然时间复杂度相同，但 RB-Tree 的工作速度较慢且隐藏常数较大，因此可能会稍微慢一些，appx。慢 5 倍。当然，取决于数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T12:39:27.277

对于另一种方法：比使用 std::set 更好。您可以使用 btree::btree_set（或 btree::safe_btree_set）。这是一个与 google 使用 B-Tree 制作的 std::set 相同的实现，与使用 RB-Tree 的 stl 不同。这比 std::set 和 O(logN) 要好得多。检查性能比较： [http](http://code.google.com/p/cpp-btree/wiki/UsageInstructions) ://code.google.com/p/cpp-btree/wiki/UsageInstructions 而且它的内存占用也低得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-06T16:42:24.787

我不是专家，所以希望这不是太愚蠢，但是结合 lower_bound 的向量会很好地工作吗？

如果您使用 lower_bound 找到插入新值的正确位置，则向量将始终在构建时进行排序，无需排序。当您的向量被排序时，lower_bound 不是具有对数类性能的二进制搜索吗？

由于它已排序，因此找到最小值（或最大值）很容易。

要减少键，您将执行 lower_bound 搜索、删除并再次执行 lower_bound 以插入减少的键，这 = 2 对数类操作。还是不错的。

或者，您可以更新键并对向量进行排序。我猜随机访问应该仍然在对数类中，但不知道 stl 在那里做了什么。

使用排序向量，如果您知道候选键小于其中的键，那么您甚至可以对向量中具有所有较小值的部分进行排序以获得更好的性能。

另一个考虑是我认为集合/映射比向量有更多的内存开销？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-06T20:42:33.250

我认为大多数排序仅限于 NLogN，因此 2 LogN 用于重新插入而不是排序对于减少键操作可能更好。

另一件事是插入向量不是那么热，但总的来说，向量 w lower_bound 的想法是否值得考虑？

谢谢

# html - 如何使 jquery-ui 选项卡没有换行符？

> ID：14412808
> 
> 赞同：0
> 
> 时间：2013-01-19T09:11:18.667
> 
> 标签：html, css, jquery-ui-tabs, line-breaks

最近，我使用**JQuery-UI 选项卡**( [http://jqueryui.com/tabs/ ) 并在尝试使用](http://jqueryui.com/tabs/)**许多**选项卡导航 li-s时卡住了。

过多的 tabs-nav li-s 转到下一行。

**我希望它*排成一行*，*没有换行符*，并在需要时*滚动。***

我搜索了很多问题，并尝试了很多方法，但没有一个能解决我的问题。

类似的问题，但不是 jquery-ui 选项卡是：[Divs next to each other, with size, no linebreak](https://stackoverflow.com/questions/11519103/divs-next-to-each-other-with-size-no-linebreak/11519360)

等待您的宝贵答案！

==============

请参阅此处的 html 源代码：[示例](http://api.jqueryui.com/tabs/#entry-examples)

CSS是：

```
/* JQuery-UI tabs overwrites - set the width as small as possible! */
.ui-tabs { width:100px; }
.ui-tabs .ui-tabs-nav {}
.ui-tabs .ui-tabs-nav li {} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T09:41:07.087

我们在 Compilr.com 上通过破解现有的 jquery-ui 选项卡插件和它的标记来做到这一点。我正在努力清理它，以便我们可以将它作为插件开源，但现在你可能只需要尝试使用 firebug 或等效工具将它分开。我一直在从头开始重写它，它还没有完成，但我会及时通知你。

更改选项卡周围的标记和 css 确实是实现这一目标的关键组件。

### 编辑：

我已经使用[bootstrap](http://twitter.github.com/bootstrap/)开始了一个非常基本的实现。你可以在 GitHub 上 fork 它：[https ://github.com/MarkMurphy/slidetabs](https://github.com/MarkMurphy/slidetabs)

# c# - 如何将结构数组添加到字典中，

> ID：14412817
> 
> 赞同：0
> 
> 时间：2013-01-19T09:11:48.923
> 
> 标签：c#, .net, exception-handling, dictionary

我已经创建了结构元素数组，并且必须将其添加到我的字典中。我的代码如下：

```
 struct answerDetails
 {
    public string qId;
    public string question;
    public string answer;
    public string hint;
 }

private answerDetails[] answers;
private Dictionary<string, answerDetails[]> studList = new Dictionary<string, answerDetails[]>();   

foreach (var data in dynObj.Success)
{
    foreach (var student in data.Answers)
    {
        answers = new answerDetails[student.Ques_Ans.Count];

        int i = 0;
        foreach (var qInfo in student.Ques_Ans)
        {
            answers[i].qId = qInfo.qId;
            answers[i].question = qInfo.question;
            answers[i].answer = qInfo.answer;
            answers[i].hint = qInfo.hint;

            i++;                 
        }
        studList.Add(student.studentId,answers);//raising error...
    }
} 
```

但是当我将结构数组添加到我的字典中时，它会生成`RuntimeBinderException`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T09:36:58.543

如果在这一行是 RuntimeBinderException，则您当前的动态学生可能没有任何 studentId 属性，或者该属性可能不可见

# jquery - jgGrid 不会加载 json 数据

> ID：14412818
> 
> 赞同：0
> 
> 时间：2013-01-19T09:12:22.340
> 
> 标签：jquery, ajax, jqgrid

我正在将 jqGrid 用于一个项目。网格初始化没有问题，但是当我尝试用 JSON 填充它时，没有爱。

HTML：

```
<table id="search-results"></table>
<div id="search-pagination"></div> 
```

JS：

```
 //init jqGrid, no problems here

var grid = jQuery('#search-results');

grid.jqGrid({
    dataType: 'local',
    jsonReader: {
        cell: '', //this allows us to ignore the 'cell' property in the response json
        id: 0 //this defines the index in the row that contains the unique id for the row
    },
    colNames:['OrderID', 'First Name', 'Last Name', 'Maiden Name', 'Insco Code', 'Origin', 'Status', 'Appointment', 'Agent Name', 'Hprof/Interviewer', 'Case Date', 'Hprof/Interviewer', 'Street Address', 'Province', 'City', 'Branch #', 'Policy #'],
    colModel:[
        { name: 'Order.ORDERID', index: 'Order.ORDERID', sortable: true, width: '100px', frozen: true},
        { name: 'Applicant.LASTNAME', index: 'Applicant.LASTNAME', sortable: true, width: '100px', frozen: false},
        { name: 'Applicant.FIRSTNAME', index: 'Applicant.FIRSTNAME', sortable: true, width: '100px', frozen: false},
        { name: 'ApplicantMaidenName', index: 'ApplicantMaidenName', sortable: true, width: '100px', frozen: false},
        { name: 'InsCoCode.DESCRIPTION', index: 'InsCoCode.DESCRIPTION', sortable: true, width: '100px', frozen: false},
        { name: 'Order.ORIGIN', index: 'Order.ORIGIN', sortable: true, width: '100px', frozen: false},
        { name: 'MedCase.STATUS', index: 'MedCase.STATUS', sortable: true, width: '100px', frozen: false},
        { name: 'MedCase.PERFORMEDDATE', index: 'MedCase.PERFORMEDDATE', sortable: true, width: '100px', frozen: false},
        { name: 'AgentFullName', index: 'AgentFullName', sortable: true, width: '100px', frozen: false},
        { name: 'ExaminerFullName', index: 'ExaminerFullName', sortable: true, width: '100px', frozen: false},
        { name: 'MedCase.DATEORDERED', index: 'MedCase.DATEORDERED', sortable: true, width: '100px', frozen: false},
        { name: 'Exam.FOLLOWUPDATE', index: 'Exam.FOLLOWUPDATE', sortable: true, width: '100px', frozen: false},
        { name: 'ApplicantStreetAddress', index: 'ApplicantStreetAddress', sortable: true, width: '100px', frozen: false},
        { name: 'Applicant.ADDR1_STATE', index: 'Applicant.ADDR1_STATE', sortable: true, width: '100px', frozen: false},
        { name: 'Applicant.ADDR1_CITY', index: 'Applicant.ADDR1_CITY', sortable: true, width: '100px', frozen: false},
        { name: 'MedCase.MEDICALCOMPANYID', index: 'MedCase.MEDICALCOMPANYID', sortable: true, width: '100px', frozen: false},
        { name: 'Order.POLICYNUMBER', index: 'Order.POLICYNUMBER', sortable: true, width: '100px', frozen: false}

    ],
    rowNum:20,
    rowList:[10,20,30],
    pager: '#search-pagination',
    sortname: 'Order.ORDERID',
    viewrecords: true,
    sortorder: "desc",
    mtype: 'POST',
    autowidth: true,
    shrinkToFit: false
});

grid.jqGrid('setFrozenColumns');

    //trying to load grid now, no luck

    grid.jqGrid('setGridParam', {
        url: '/fasttrack/search?' + form.serialize(),
    dataType: 'json'
    }).trigger('reloadGrid'); 
```

JSON响应：

```
{
"page": 1,
"total": 5,
"records": 100,
"rows": [
    [
        0,
        "two0",
        "three0",
        "four0",
        "five0",
        "six0",
        "seven0",
        "eight0",
        "nine0",
        "ten0",
        "eleven0",
        "twelve0",
        "thirteen0"
    ],
    [
        1,
        "two1",
        "three1",
        "four1",
        "five1",
        "six1",
        "seven1",
        "eight1",
        "nine1",
        "ten1",
        "eleven1",
        "twelve1",
        "thirteen1"
    ],
    [
        2,
        "two2",
        "three2",
        "four2",
        "five2",
        "six2",
        "seven2",
        "eight2",
        "nine2",
        "ten2",
        "eleven2",
        "twelve2",
        "thirteen2"
    ],
    [
        3,
        "two3",
        "three3",
        "four3",
        "five3",
        "six3",
        "seven3",
        "eight3",
        "nine3",
        "ten3",
        "eleven3",
        "twelve3",
        "thirteen3"
    ],
    [
        4,
        "two4",
        "three4",
        "four4",
        "five4",
        "six4",
        "seven4",
        "eight4",
        "nine4",
        "ten4",
        "eleven4",
        "twelve4",
        "thirteen4"
    ],
    [
        5,
        "two5",
        "three5",
        "four5",
        "five5",
        "six5",
        "seven5",
        "eight5",
        "nine5",
        "ten5",
        "eleven5",
        "twelve5",
        "thirteen5"
    ]
] 
```

}

网格不会填充新数据。我究竟做错了什么？我已经阅读了文档并查看了几个不同的示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T10:11:42.140

您的主要错误是使用`dataType`option 而不是`datatype`.

此外，我不建议您使用具有`"."`. 您可以在名称中使用`index`have 。`"."`

# ios - NSMakeRange(i, 1) 是什么意思？

> ID：14412820
> 
> 赞同：12
> 
> 时间：2013-01-19T09:12:27.053
> 
> 标签：ios, objective-c, cocoa-touch

我刚开始学习iOS。
“ `NSMakeRange(i, 1)`”是什么意思？

```
for (int i = 0; i < [name length]; i++)
{
    NSRange range = NSMakeRange(i, 1);
    NSString *subString = [name substringWithRange:range];
    const char *cString = [subString UTF8String];
    if (strlen(cString) != 3)
    {
        return NO;
    }
} 
```

它在哪里使用？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-19T09:14:40.180

`NSMakeRange(i, 1)`创建一个带有 location`i`和 length的范围`1`。有关更多信息和相关功能，请参阅[NSMakeRange](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_Functions/#//apple_ref/c/func/NSMakeRange)和[NSString substringWithRange的文档。](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/#//apple_ref/occ/instm/NSString/substringWithRange:)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-19T09:15:07.427

`Alt`- 单击 Xcode 中的函数名称，您将获得参考。该函数创建一个从 1 开始`i`并且长度为 1 的范围。本质上，您正在从字符串中挑选单个字符。

# javascript - jQuery 实现的计算器

> ID：14412821
> 
> 赞同：1
> 
> 时间：2013-01-19T09:12:27.450
> 
> 标签：javascript, jquery, web, calculator

伙计们。我正在尝试使用 jQuery 创建一个具有基本操作*的基于 Web 的计算器。*我已经实现了加法操作。现在，我迷上了减法。

这是单击减号按钮时的代码片段：

```
$("#btnSub").click(function () {
    holdValue = $("#result").val();
    currentValue = $("#result").val("0");

    flagSub = "1";
    flagNotEmpty = "0";
    flagDecimal = "0";
}); 
```

这是单击等号按钮时的代码片段：

```
$("#btnEquals").click(function () {
    if (flagNotEmpty == "0") {
        alert("Missing Value.");
    } else {
        if (flagAdd == "1") {
            currentValue = $("#result").val();
            var output = parseFloat(holdValue) + parseFloat(currentValue);
            $("#result").val(parseFloat(output));
        } else if (flagSub == "1") {
            currentValue = $("#result").val();
            var output2 = parseFloat(holdValue) - parseFloat(currentValue);
            $("#result").val(parseFloat(output2));
        }
    }

    flagSub = "0";
    flagAdd = "0";
    flagNotEmpty = "0";
    flagDecimal = "0";
}); 
```

变量功能：

1.  `flagSub`：用于确定选择的操作是减法

2.  `flagNotEmpty`: 用于判断选择运算符后是否按下数字。如果在运算符按钮后单击等号，则显示错误消息。

3.  `flagDecimal`：用于告诉程序已经输入了一个小数。显示小数点重复的错误消息。

Problem with this program is that it cannot perform subtraction when it is the first operation you do. That is, when the browser loads the UI and you do subtraction, nothing happens. BUT, when you do, for example, click `1 + 2 =` then the program displays `3` in the textbox. Without refreshing the page, click `- 10 =`. Difference is displayed.

To start from the beginning, please refresh the page; will just add the CLEAR button after I am done with all the operations.

Just want to know what is wrong with my algorithm. For the complete code with `html` and `css`, here is its [fiddle](http://jsfiddle.net/vllnv/cQdVk/2/).

By the way, I have just started learning jQuery so please forgive me for the kind of messy and might be inefficient way of coding. Help is really much appreciated. Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T09:47:34.733

`flagAdd` needs to be initialized, you can alter the `btnSub` handler to do that

```
$("#btnSub").click(function () {
    holdValue = $("#result").val();
    currentValue = $("#result").val("0");

    flagAdd = "0";
    flagSub = "1";
    flagNotEmpty = "0";
    flagDecimal = "0";
}); 
```

alternatively you could initialize it in the document ready handler [Fiddle](http://jsfiddle.net/axrwkr/cQdVk/4/)

# drupal-7 - DRUPAL 7 - 如何隐藏非登录用户的内容？

> ID：14412834
> 
> 赞同：1
> 
> 时间：2013-01-19T09:14:08.253
> 
> 标签：drupal-7

我想向任何尝试访问页面的匿名用户显示一条消息，在“登录以查看页面”行中带有登录链接。

通过搜索，我只能对匿名用户完全隐藏一个页面，但我希望页面标题或页面链接可见；当用户点击它时，它会显示类似于“请登录以查看此页面”的错误消息。

我希望附件也一样：用户可以看到附件，但是当他们尝试下载它时，错误消息“请登录以查看此页面”。应该显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T13:37:31.783

您可以在输出页面的位置简单地编辑您的主题代码，例如在 node.tpl.php 中您可以添加：

```
global $user;
if($user->uid){
// code for the logged user output the content
}
else{
print '<div class="yourstyle">custom message</div>';
} 
```

# php - 照片上传脚本 - 旋转、更改位置、裁剪、删除缩略图？

> ID：14412835
> 
> 赞同：0
> 
> 时间：2013-01-19T09:14:22.793
> 
> 标签：php, jquery, upload, photo

也许有人知道一个照片上传脚本，人们可以在其中看到他们上传的照片缩略图并可以对其进行操作？我的意思是，他们可以删除照片，更改它们的顺序并旋转它们？还必须有一个固定大小的缩略图，就像在这个脚本中一样：

[http://www.saaraan.com/2012/05/ajax-image-upload-with-progressbar-with-jquery-and-php](http://www.saaraan.com/2012/05/ajax-image-upload-with-progressbar-with-jquery-and-php)

# c++ - c++11：给定 f(const X&) 和 f(X&&)，我们是否需要 f(X&)？

> ID：14412839
> 
> 赞同：1
> 
> 时间：2013-01-19T09:14:48.477
> 
> 标签：c++, pass-by-reference, move-semantics

标题说明了一切。

第一种情况 f(const X&) 是老式的 const 引用参数。

但是，当采用可变引用参数时，为什么不总是使用 X&& 呢？这样，客户端代码可以使用临时值或常规左值，而不是 f() 指示用法。

编辑：我的草率，对不起。我的意思是，给定 fc(const X&) 和 fm(X&&)，我们需要 fm(X&) 吗？

编辑：示例：我使用无状态装饰器作为参数传递：

```
class Base64Writer: public Writer {
public:
  Base64Writer(Writer& w): w_(w) {}
private:
  virtual void doWrite() override;
  Writer& w_;
}

void func(Writer&& w) { w.doWrite(); }

// to be called as
Writer wr = ...;
func(Base64Writer(wr)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T09:17:43.340

*   **如果您要问：同时拥有所有三个重载是否合乎逻辑？**

    在大多数情况下，这将是一个坏主意。因为重载函数的语义相互矛盾。一个承诺它**不会**修改论点，另一个不会做出任何这样的承诺（它默认说它会修改论点！）。这种重载函数的用户会感到困惑，只有`const`.

    *同时*拥有这些重载是有意义的：

    ```
    void process(std::vector<int> const&);
    void process(std::vector<int> &&); 
    ```

    但是除了上述两个之外，第三个对我来说没有多大意义：

    ```
    void process(std::vector<int> &); //contradicts the first overload 
    ```

    它只会增加混乱并使代码更难阅读。如果您想要这种语义，请为函数选择不同的名称！

*   **如果您要问：您应该拥有哪一个（尽管不一定同时拥有）？**

    我会说，这取决于语义。如果参数表现为输入和/或输出参数，则`f(X&)`有意义。如果参数*只是*输入参数，那么`f(X const&)`是有意义的，在这种情况下你也可以额外定义`f(X&&)`，以获得性能优势！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T09:21:12.220

### 绝对地！

例如，每当您操作作为参数传递的容器时，您都需要它。

事实上，您可能需要所有这三个 - 比较这些，例如：

```
vector<int> append_if_not_ends_with(vector<int> const &original, int x)
{
    vector<int> v(original);
    if (v.empty() || v.back() != x)
    { v.push_back(x); }
    return v;
}

vector<int> &append_if_not_ends_with(vector<int> &v, int x)
{
    if (v.empty() || v.back() != x)
    { v.push_back(x); }
    return v;
}

vector<int> append_if_not_ends_with(vector<int> &&original, int x)
{
    vector<int> v(std::move(original));
    if (v.empty() || v.back() != x)
    { v.push_back(x); }
    return v;
} 
```

如果您拥有所有 3 个重载，那么您可以避免在不需要时复制向量的内容。

```
vector<int> v1;
vector<int> const &v2 =
    foo ? append_if_not_ends_with(v1) :
    bar ? append_if_not_ends_with(static_cast<vector<int> const &>(v1)) :
          append_if_not_ends_with(vector<int>()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T10:38:11.923

令我惊讶的是，没有人指出您实际上可以按值传递，并且 c++11 中的这种做法实际上是您认为需要时做的正确事情`f(X&&)`。

海事组织：

*   `f(const X &)`如果您只需要从元素中读取，请使用。
*   `f(X)`如果您需要获取传递的对象的所有权，请使用。您的函数的调用者可以在适当的时候执行`f( std::move(something))`或 `f(something)`执行。
*   `f(X&)`如果您需要修改传递的对象，请使用。

# javascript - 使用 html5 文件 API 的重复部分读取

> ID：14412845
> 
> 赞同：2
> 
> 时间：2013-01-19T09:15:13.387
> 
> 标签：javascript, html

我不想将文件的全部内容读入内存；仅部分内容，且仅按需提供。

然而，似乎我只能读取一次块（使用 a `file.slice()`），而所有后续读取都返回零长度。有任何想法吗？

这是第二次调用失败的代码的简化示例：

```
var chunkNo=0;
function readNextChunk()
{
  var file=document.getElementsByTagName("input").item(0).files[0];
  var blob=file.slice(100*chunkNo, 100); 
  var reader=new FileReader();
  reader.onload=function(e) { console.log("No"+chunkNo+":\n"+reader.result);  
    chunkNo++;
  };
  reader.readAsText(blob);
} 
```

# c++ - 没有匹配的函数调用模板选择排序函数（C++）

> ID：14412846
> 
> 赞同：2
> 
> 时间：2013-01-19T09:15:21.623
> 
> 标签：c++, sorting, templates, selection, template-argument-deduction

我正在玩模板，我想知道为什么使用模板会出现不匹配的功能错误。

```
/*selection sort*/
template <typename InputIterator, typename T>
void selection_sort(InputIterator first, InputIterator last){
    InputIterator min;
    for(; first != last - 1; ++first){
        min = first;

        for(T i = (first + 1); i != last ; ++i)
        {
            if(*first < *min)
                min = i;
        }
        myswap(*first, *min);
    }
}

int main(){
    int a[] = {10, 9, 8, 7, 6, 5, 4, 3, 2, 1};
    vector<int> v(a, a+10);
    selection_sort(v.begin(),v.end());
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-19T09:18:33.433

您有一个未推导出的模板参数 T，因此您需要 1）将您的模板参数移动`typename T`为第一个模板参数：

```
// now InputIterator will be deduced
template <typename T, typename InputIterator>
void selection_sort(InputIterator first, InputIterator last)
{
    // your implementation
} 
```

和 2) 限定您的呼叫排序为`selection_sort<int>(v.begin(), v.end());`

顺便说一句，这里有一个更通用的选择排序实现，注意它只需要一个迭代器和比较函数作为模板参数，比较函数采用迭代器指向的值类型（这是 C++11 代码，因为默认函数模板参数，对于 C++98 编译器，您需要有 2 个重载，带或不带比较函数）

```
template< typename ForwardIterator, typename Compare = std::less<typename std::iterator_traits<ForwardIterator>::value_type> >
void selection_sort(ForwardIterator first, ForwardIterator last, Compare cmp = Compare())
{
        for (auto it = first; it != last; ++it) {
                auto const selection = std::min_element(it, last, cmp);
                std::iter_swap(selection, it);
        }
} 
```

调用`std::min_element`等同于您的 for 循环，而 the`iter_swap`等同于您自己的交换。使用 STL 算法的优点是它们更可能是正确的（手写代码中的一个错误很常见）

`std::upper_bound`PS：您可以类似地使用和`std::rotate`（为读者[练习](https://stackoverflow.com/a/14578502/819272)）在 2 行中编写插入排序算法

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-19T09:17:52.247

问题是那些`typename T`似乎没有被使用的，不能被编译器推导出来。您必须明确指定类型：

```
selection_sort<vector<int>::iterator, int>(v.begin(),v.end()); 
```

# c# - 无法打开文件，因为打开选项不正确

> ID：14412847
> 
> 赞同：0
> 
> 时间：2013-01-19T09:15:41.103
> 
> 标签：c#, photoshop-cs4

我在 C# 应用程序中使用 Photoshop 库。

```
public static ps.ApplicationClass app

 createPreviewThumbnail(filepath);//looks like "http://192.26.1.105/Connect/testjob/test.PSD"

  public static void createPreviewThumbnail(string sourcePath)
    {
     app = new ps.ApplicationClass();
     Photoshop.Document doc = app.Open(sourcePath, null, null);
      ......
    } 
```

这段代码工作正常，但有时我得到这个异常，`cannot open the file because the open options are incorrect`这可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-03-08T22:23:35.773

问题可能出在文件路径中。

在我最近一直在处理的一段代码中，我曾两次收到此错误消息。第一次，错误是由于目录路径中有两种不同的文件。该代码仅在目录中没有其他文件时才有效。

在我解决了这个问题之后，同样的错误信息出现了。我尝试更改文件路径，但没有成功。但是，当我将文件路径改回原来的路径时，它起作用了。我之前可能有错字或错误，但我不知道。

希望这可以帮助任何人获得相同的错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-22T00:42:28.743

我在尝试打开 Dropbox 文件夹中的文件时遇到了这个问题。*由于 Dropbox 具有“仅在线”文件，这些文件实际上只是指向单击时将下载的文件的指针，因此在 Dropbox 关闭*时，我的 Photoshop 无法打开这些文件。将其打开可修复此错误消息

致本期读者：这表明路径是否正确，文件指针是否存在其他问题？文件是否被锁定？之类的东西。

# ruby-on-rails - 如何从个人服务器推送到 Heroku？

> ID：14412848
> 
> 赞同：1
> 
> 时间：2013-01-19T09:16:15.350
> 
> 标签：ruby-on-rails, heroku, github

我最近在个人服务器上建立了裸露的共享存储库，并想直接从那里推送到 heroku——也就是说，不使用 github。

我想我不确定我是否理解我们添加遥控器的每一行：

```
git remote add heroku myherokuusername?@heroku.com:myherokureponame?.git
git remote add heroku git@heroku.com:taraswebapp.git # normally this
git remote add heroku tara.byte@heroku.com:taraswebapp.git 
```

其他信息：我正在使用 mac os x，并且最近安装了相关的 heroku 工具带。我的来源是：tara@192.168.1.160:/rails_projects/taraswebapp.git，这是我服务器的静态ip

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T09:26:07.147

如果您在本地进行更改，您曾经可以`git push heroku master`从您的仓库中进行更改。您服务器上的第二个裸仓库将是完全不同的另一件事。

现在，如果您要共享您的裸仓库，那将是另一回事。

## 更新#1：

从 heroku [docs](https://devcenter.heroku.com/articles/rails3#store-your-app-in-git)将您的应用程序存储在 git 中应该可以帮助您入门，并向您展示它是如何使用另一个 repo 完成的。

# jquery - JQUERY醉意将标题属性替换为原始标题

> ID：14412851
> 
> 赞同：0
> 
> 时间：2013-01-19T09:16:28.147
> 
> 标签：jquery, jquery-ui

我正在使用 jquery 的 Tipsy 插件。我也使用了本地化。

在我的项目中，我有一个`tittle = '@Language.ClickToEdit'` 像`<img tittle = '@Language.ClickToEdit' id = $([id])>`

当第一次显示页面时，我得到了`<img original- tittle = '@Language.ClickToEdit' id = $([id])>`这个原始标题来代替标题。

第一次不显示任何工具提示消息。

之后当我单击图像时，我可以看到工具提示消息。

那么，有什么办法可以克服这个原始标题属性。我的标题会针对各自的语言动态变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T10:50:58.840

首先，属性名称`title`不是`tittle`.

下面的报价来自[http://onehackoranother.com/projects/jquery/tipsy/](http://onehackoranother.com/projects/jquery/tipsy/)

> Tipsy 需要删除元素标题属性的任何现有值，以抑制浏览器的本机工具提示。它隐藏在元素的 original-title 属性中，以防您以后需要检索它。
> 
> 从 0.1.4 版开始，工具提示文本会在每个悬停事件上重新计算，因此更新标题属性将产生预期效果。

看起来您`original-title`在使用 Tipsy 插件时无法消除该属性。考虑在初始化 Tipsy**之前**将标题更改为相应的语言值。

# ruby - Ubuntu 的 rvm ruby 和 openssl

> ID：14412852
> 
> 赞同：3
> 
> 时间：2013-01-19T09:16:30.000
> 
> 标签：ruby, ubuntu, compilation, openssl, rvm

我正在尝试在 Ubuntu 上使用 rvm 安装 ruby​​。我用突触包管理器安装了 rvm。

```
$ which rvm
/usr/bin/rvm
$ rvm --version

rvm 1.6.9 by Wayne E. Seguin (wayneeseguin@gmail.com) [https://rvm.beginrescueend.com/] 
```

我尝试安装红宝石：

```
$ rvm install 1.9.2
...
ERROR: Error running 'make ', please read /usr/share/ruby-rvm/log/ruby-1.9.2-p180/make.log
ERROR: There has been an error while running make. Halting the installation. 
```

日志文件中的问题与 openssl 相关：

```
ossl_ssl.c:110:1: error: ‘SSLv2_method’ undeclared here (not in a function) 
```

在[https://rvm.io/packages/openssl/](https://rvm.io/packages/openssl/)它说要做，`$ rvm requirements`但它给出了一个错误：

```
$ rvm requirements
ERROR: Unrecognized command line argument: 'requirements' ( see: 'rvm usage' ) 
```

在同一页面上，它要求 do `$ rvm reinstall 1.9.2 --with-openssl-dir=/usr/local`，但这在 ruby​​ 编译期间给了我同样的错误。对于同一页面上的第二种方法，doing`rvm pkg install openssl`给了我

```
$ rvm pkg install openssl
ERROR: Unrecognized command line argument: 'pkg' ( see: 'rvm usage' ) 
```

Openssl 显然已安装：

```
$ dpkg --get-selections | grep openssl
openssl                     install
python-openssl              install 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T10:17:49.990

You're running an outdated version of RVM. You should go with the recommended install path explained on [http://rvm.io](http://rvm.io) and don't use a package installer. To fix check this instruction [https://stackoverflow.com/a/9056395/497756](https://stackoverflow.com/a/9056395/497756).

Also don't use 1.9.2 use the current 1.9.3 ruby instead and for new projects use 2.0.0 which is in RC1 and should be released soon.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T10:19:57.563

if you use ubuntu, just use ruby from this ppa..

```
http://blog.brightbox.co.uk/posts/next-generation-ruby-packages-for-ubuntu 
```

# magento - 在magento的运输方式中放置复选框

> ID：14412854
> 
> 赞同：0
> 
> 时间：2013-01-19T09:16:56.093
> 
> 标签：magento, methods, checkbox, shipping

我在 Magento 做了一个网站。在该网站中，我希望用户勾选运输方式中的复选框，如果他们想要 Traceable 或注册请求以及表格费率。如果用户勾选，额外的 4 美元将添加到下订单概览页面。如果用户没有勾选任何内容，则没有功能。

我怎么能做这个？

# php - 从 linux 上的源代码安装 mysql 然后如何让它与 php 一起工作？

> ID：14412855
> 
> 赞同：0
> 
> 时间：2013-01-19T09:16:58.290
> 
> 标签：php, mysql, linux, apache

我从源代码安装了 apache 和 php，并在一个月前让它们一起工作。因为我这个学期要学这两个。
现在我需要 mysql 来做更多的工作。我刚刚从源代码安装了mysql。但是我不知道如何让它与 php 一起工作。
我环顾四周，发现了一些关于设置 LAMP 环境的主题。他们中的大多数首先安装mysql并使用命令选项`--with-mysql=/usr/local/mysql`以及`--with-mysqli=/usr/local/mysql/bin/mysql_config`安装php。但就我而言，我先安装了 php。
有没有办法让php知道我已经安装了mysql？还是我应该重新安装 php ？

### 更新

最后我重新编译了我的 php 源代码`--with-mysql=/opt/mysql`，`--with-mysqli=/opt/mysql/bin/mysql_config`并添加`--with-pdo-mysql`了三个配置选项，让我的 php 支持 mysql 的模块。采取的步骤如下：
1> 停止 apache 和 mysql 服务
2> 备份 php.ini
3> 删除 php
4> 重新配置 php 源
`./configure --prefix=/opt/php --with-apxs2=/opt/apache/bin/apxs --with-mysql=/opt/mysql --with-mysqli=/opt/mysql/bin/mysql_config --with-pdo-mysql --...and other options`
5> make 然后 make install
6> 复制 php.ini 并取消注释 mysql 模块上的相应指令

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T09:33:11.593

为什么要从源代码安装软件包？

`yum`在 CentOS 和`apt-get`Ubuntu中使用，例如：

```
yum install php
yum install mysql 
```

要使 PHP 与 MYSQL 一起工作，您必须安装`php-mysql`扩展，例如：

```
yum install php-mysql 
```

# joomla - Joomla 3 滑块

> ID：14412857
> 
> 赞同：0
> 
> 时间：2013-01-19T09:17:31.393
> 
> 标签：joomla, joomla3.0

我在 Joomla 3.0 中放置了一个图像滑块，它是 ARI 图像滑块，它是我为 Joomla 3 找到的所有滑块中最好的评价滑块。

该滑块在 Joomla 2.5 中运行良好，因为我在那里对其进行了测试，但是当我在 Joomla 3 中使用它时，滑块上方有一个虚线面板。在第一个幻灯片放映后，滑块也会关闭，面板仍然存在。我附上屏幕截图：

[http://imgur.com/4Qq9iki](http://imgur.com/4Qq9iki)

我通过以下方式在命令中包含模板：

```
<jdoc:include type="modules" name="position-9" /> 
```

是否还有其他适用于 Joomla 3.0 的滑块？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T08:32:12.610

我只是使用了anyslider并将default.php插入到`<ul id="slider"></ul>`我自己的自定义组件`/com_slider/views/sliders/tmpl/default.php` 中`<?php if($this->items) : ?>`

似乎工作正常。

# iphone - 关于基本 UI 的基本 iPhone 应用程序开发问题

> ID：14412868
> 
> 赞同：0
> 
> 时间：2013-01-19T09:18:41.653
> 
> 标签：iphone, ios, user-interface, uiviewcontroller

我有一个关于 iOS 开发的基本问题。我创建了视图文件 ViewController.xib。我确实有 ViewController.h 文件。xib 文件包含组件，如文本字段、步进器等。当我运行 iPhone 应用程序时，窗口是空的。我知道我需要将组件从 xib 文件拖放到 ViewController.h 文件才能创建属性，但这是我无法实现的。我自己拖动项目，但应该有一个指针箭头被拖动。据我所知，甚至在此操作之前，我还需要通过将文件拖动到某处来执行其他一些操作。所以，请有人告诉我需要做什么。最好的祝福

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T09:29:47.607

基本上 .xib 文件是一个设计模板。它与 viewcontroller.h 和 viewcontroller.m 文件相关联。您可以通过从右窗格的对象部分拖动来放置控件。这些控件将在运行时自动创建。要处理这些控件，您需要在它们和您在 viewcontroller.h 文件中声明的控制变量之间建立联系。即使您没有建立连接，控件将可见且功能正常，但您无法控制它们，因为您没有将其连接到对象引用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T09:42:54.150

如果您的 .xib 正确加载，那么视图中的任何控件都应该是可见的，如果它们没有“连接”到您的类中，它们就不会起作用。听起来您刚刚开始进行 iPhone 开发，我建议您查看 Ray Wenderlich 的 Storyboard 教程 - 这将引导您创建一个基本的应用程序并创建视图层次结构：[http ://www.raywenderlich.com/5138 /beginning-storyboards-in-ios-5-part-1](http://www.raywenderlich.com/5138/beginning-storyboards-in-ios-5-part-1)

# android - Bitmap.compress 总是返回 null

> ID：14412869
> 
> 赞同：0
> 
> 时间：2013-01-19T09:19:06.893
> 
> 标签：android, android-image, android-file, android-drawable

我正在从我的服务器下载请求的图像，下载后该图像已成功显示，但是当我尝试将相同的图像存储在我的 SD 卡上时，它返回 null。这是我下载图像并保存它的代码。我在调用 bitmap.compress() 时得到空值

```
 void saveImage() {

    String root = Environment.getExternalStorageDirectory().toString();
    File myDir = new File(root + "/saved_images");
    myDir.mkdirs();
    String fname = "Image.png";
    File file = new File (myDir, fname);

    ByteArrayOutputStream bytes = new ByteArrayOutputStream();
    message_bitmap.compress(Bitmap.CompressFormat.JPEG, 40, bytes);

    //write the bytes in file
    FileOutputStream fo;
    try {
        fo = new FileOutputStream(file);

        fo.write(bytes.toByteArray());
        fo.close();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    /*if (file.exists ()) file.delete (); 
    try {
           FileOutputStream out = new FileOutputStream(file);
           message_bitmap.compress(Bitmap.CompressFormat.PNG, 90, out);
           out.flush();
           out.close();

    } catch (Exception e) {
           e.printStackTrace();
    }*/
}

static public Bitmap downloadBitmap(String url) {
    final DefaultHttpClient client = new  DefaultHttpClient();
    final HttpGet getRequest = new HttpGet(url);

    try {
        HttpResponse response = client.execute(getRequest);
        final int statusCode = response.getStatusLine().getStatusCode();
        if (statusCode != HttpStatus.SC_OK) { 
            Log.w("ImageDownloader", "Error " + statusCode + " while retrieving bitmap from " + url); 
            return null;
        }

        final HttpEntity entity = response.getEntity();
        if (entity != null) {
            InputStream inputStream = null;
            try {
                inputStream = entity.getContent(); 
                final Bitmap bitmap = BitmapFactory.decodeStream(new FlushedInputStream(inputStream));
                return bitmap;
            } finally {
                if (inputStream != null) {
                    inputStream.close();  
                }
                entity.consumeContent();
            }
        }
    } catch (Exception e) {
        // Could provide a more explicit error message for IOException or IllegalStateException
        getRequest.abort();
        Log.w("ImageDownloader", "Error while retrieving bitmap from " + url + e.toString());
    } finally {
        if (client != null) {

        }
    }
    return null;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T11:21:35.280

我认为你离那里很近。类似于以下下载并保存图像的东西怎么样：

```
 try {
            img_value = new URL("your_url");
        } catch (MalformedURLException e) {
            e.printStackTrace();
        }
        try {
            mIcon1 = BitmapFactory.decodeStream(img_value.openConnection()
                    .getInputStream());
        } catch (IOException e) {
            e.printStackTrace();
        }

        String filename = "your_filename.jpg";
        File file = new File(dir, filename);
        if (file.exists()) {
            try{
                file.delete();
            }catch(Exception e){
                //sdcard plugged in
            }
        }
        try {
            FileOutputStream out = new FileOutputStream(file);
            mIcon1.compress(Bitmap.CompressFormat.JPEG, 90, out);
            out.flush();
            out.close();

        } catch (Exception e) {
            e.printStackTrace();//will occur if the phone is plugged in
        } 
```

# mysql - connection.connect() 在 node-mysql 中做了什么？

> ID：14412876
> 
> 赞同：1
> 
> 时间：2013-01-19T09:20:06.177
> 
> 标签：mysql, node.js, node-mysql

connection.connect() 在`node-mysql`库中做了什么？

我的代码看起来像这样

```
var mysql = require('mysql');
var connection = mysql.createConnection({
  host     : 'ap-cdbr-azure-east-a.cloudapp.net',
  user     : '<user>',
  password : '<password>',
  database : '<database>',
});
connection.connect(); 
```

后来我运行查询。

即使我删除`connection.connect()`代码照常工作。有些例子有，有些没有。connect() 的具体目的是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T13:32:36.897

建立连接的推荐方法是：

```
var mysql      = require('mysql');
var connection = mysql.createConnection({
  host     : 'example.org',
  user     : 'bob',
  password : 'secret',
});

connection.connect(function(err) {
  // connected! (unless `err` is set)
}); 
```

但是，也可以通过调用查询来隐式建立连接：

```
var mysql      = require('mysql');
var connection = mysql.createConnection(...);

connection.query('SELECT 1', function(err, rows) {
  // connected! (unless `err` is set)
}); 
```

根据您处理错误的方式，任何一种方法都可能是合适的。任何类型的连接错误（握手或网络）都被视为致命错误。

礼貌：[https ://github.com/felixge/node-mysql](https://github.com/felixge/node-mysql)

# floating-point - 如何在 VHDL 中用二进制表示实数

> ID：14412878
> 
> 赞同：0
> 
> 时间：2013-01-19T09:20:08.523
> 
> 标签：floating-point, binary, vhdl

我想知道如何在 VHDL 中以二进制格式表示实数（包括浮点数）。

例如：用二进制表示 +0.5 或 -0.013

我想用 VHDL 编写一个函数，该函数可以接受输入（例如 0.5）并将其递增 0.15 直到达到 10。所有数字都需要以二进制形式表示。

我还需要知道如何将二进制数转换回它们的实际等值（十进制）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:12:16.880

VHDL 的浮点包在这里 - [http://www.vhdl.org/fphdl/](http://www.vhdl.org/fphdl/)

但是您使用 12 位 FP 格式决定的分辨率和范围可以（更简单、更准确）容纳在 17 位定点数（缩放整数）中，所以我建议改为。

# sql - 执行 UPDATE 时出现 INSERT 错误？

> ID：14412880
> 
> 赞同：2
> 
> 时间：2013-01-19T09:20:38.313
> 
> 标签：sql, sql-server, tsql, error-handling

在工作中，我们有一个 SQL Server 数据库。我不太了解数据库。我在表格中为一些新功能创建了一个新列......我马上就开始看到错误

我的陈述是这样的：

```
ALTER TABLE users
ADD locked varchar(50) NULL
GO 
```

错误是：

> *插入错误：列名或提供的值的数量与表定义不匹配*

我已经读过，当在 INSERT 操作期间提供的列名的数量或提供的值的数量与表定义不匹配时，会出现错误消息。

但是我已经检查了很多次，并且我已经更改了 PHP 代码以包含此列数据，但我仍然收到错误。

我已经直接在数据库上运行 SQL 查询，但仍然得到错误。

有趣的是，得到错误的查询是更新。

```
UPDATE "users"
SET "users"."date_last_login" = GETDATE()
WHERE id = 1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T09:22:57.107

您是否认为它可能是导致它的触发器？ 

这是您将收到的错误消息。

如果它的更新操作导致它检查该表上的更新运行的触发操作。

这样做：

```
#sp_helptrigger Users, 'UPDATE'; 
```

这将显示“更新”操作发生的触发器。

如果有触发器，请获取触发器名称并运行以下命令（但将 TriggerNameHere 替换为真实触发器）：

```
#sp_helptext TriggerNameHere; 
```

这将为您提供触发器运行的任何 SQL，并且可能是错误消息所指的 INSERT。

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T09:28:06.383

除了`TRIGGERS`,

原因是您使用的是语句`implicit`类型。`INSERT`假设您以前在表上的列数是 3。您有这种`INSERT`语句语法，

```
INSERT INTO tableName VALUES ('val1','val2','val3') 
```

执行正常。但是随后您更改了表格以添加另一列。您的所有`INSERT`查询都只在表上插入三个与总列数不匹配的值。

为了解决这个问题，您必须更新所有`INSERT`语句以在表上插入 4 个值，

```
INSERT INTO tableName VALUES ('val1','val2','val3', 'val4') 
```

它通常会正常工作。

我建议您使用必须指定要插入值的列的`EXPLICIT`类型。`INSERT`例如，

```
INSERT INTO tableName (col1, col2, col3) VALUES ('val1','val2','val3') 
```

这样，即使您通过添加其他列来更改表，您的`INSERT`语句也不会受到影响，除非该列没有默认值并且不可为空。

# wordpress - 我可以将文件保存到 wordpress 中，但它没有显示

> ID：14412888
> 
> 赞同：-1
> 
> 时间：2013-01-19T09:21:18.203
> 
> 标签：wordpress, plugins, save

我在 localhost 上运行 wordpress，我可以使用以下代码成功地将文件保存到 wordpress 的上传目录中，但是 wordpress 不会在其媒体库中显示它们，尽管它只显示我使用其上传功能上传的那些。

```
require("/Applications/MAMP/htdocs/wordpress/wp-load.php");

$Addr = "http://www.xxx.com" . $Addr;
$ch = curl_init();
curl_setopt($ch, CURLOPT_POST, 0);
curl_setopt($ch, CURLOPT_URL, $Addr);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$output = curl_exec($ch);
curl_close($ch);

ini_set( 'display_errors', TRUE );
error_reporting( E_ALL );

$upload_dir = wp_upload_dir(); 
$location= $upload_dir['basedir']. "/" . "a.jpg";

file_put_contents($location, $output);
echo 'Photo is uploaded'; 
```

当我转到以下地址时，我可以在那里看到照片。

```
http://localhost:8888/wordpress/wp-content/uploads/ 
```

我什至手动复制了一个文件，但它也没有显示该文件，但是当我使用 wordpress 本身上传相同的文件时，将显示该文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T11:56:06.723

似乎是权限问题，尝试设置 644 `chmod`：

```
file_put_contents($location, $output);
chmod($location, 0644); // <--- new code 
```

# iphone - 开始/结束外观转换的不平衡呼叫

> ID：14412890
> 
> 赞同：21
> 
> 时间：2013-01-19T09:21:52.900
> 
> 标签：iphone, ios, objective-c, ios6, uinavigationcontroller

在编译我得到的代码时

> “开始/结束外观转换的不平衡呼叫`<UINavigationController: 0xa98e050>`”

警告。

这是我的代码

```
KVPasscodeViewController *passcodeController = [[KVPasscodeViewController alloc] init];
passcodeController.delegate = self;

UINavigationController *passcodeNavigationController = [[UINavigationController alloc] initWithRootViewController:passcodeController];
[(UIViewController *)self.delegate presentModalViewController:passcodeNavigationController animated:YES]; 
```

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-12-02T01:06:11.080

我知道这是一个老问题，但为了那些再次遇到这个问题的人，这就是我发现的。

首先，这个问题没有说明 new`viewController`被调用的位置。
我怀疑这是从`-(void)viewDidLoad`

将适当的代码移到`-(void)viewDidAppear:`，问题应该会消失。

这是因为在 处`-viewDidLoad`，视图已加载，但尚未呈现，动画和视图尚未完成。

如果您的意图是推动窗口，请在窗口呈现并绘制后执行。

如果您发现自己使用计时器来控制系统行为，请问问自己做错了什么，或者如何才能更正确地做到这一点。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-01-19T09:35:26.923

*我发现如果您在上一个事务（动画*）正在进行时尝试推送新的视图控制器，则会出现此问题。

无论如何，我认为这是`presentModalViewController`问题，Set `animated:NO`，**可能会解决您的问题**

```
[(UIViewController *)self.delegate presentModalViewController:passcodeNavigationController animated:NO]; 
```

**其他选项是：**

上述代码的取值`NSTimer`和调用时间可能为**0.50 到 1**秒。这也是有用的技巧。所以你之前的 viewController 已经完成了它的动画。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-03-01T20:14:45.563

当您尝试在先前包含的视图控制器完成动画之前加载新视图控制器时，会出现此警告。如果您打算这样做，只需将您的代码添加到一个`dispatch_async(dispatch_get_main_queue()`块中：

```
dispatch_async(dispatch_get_main_queue(), ^(void){
        [(UIViewController *)self.delegate presentModalViewController:passcodeNavigationController animated:YES];
}); 
```

警告就会消失。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-11-16T11:50:58.457

现代解决方案可能是这样的：

```
double delayInSeconds = 0.5;
dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, (int64_t)(delayInSeconds *   NSEC_PER_SEC));
dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
    [self.window.rootViewController presentViewController:yourVC animated:YES completion:nil];
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-22T11:08:34.797

您没有提供太多上下文，因此我假设此错误发生在启动时，因为您正在呈现密码视图控制器。

为了摆脱这个警告，我将应用程序委托注册为导航根视图控制器的委托：

```
- (BOOL) application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    ((UINavigationController *)self.window.rootViewController).delegate = self;
    return YES;
} 
```

然后我将模态视图控制器呈现在`navigationController:didShowViewController:animated:`一个`dispatch_once`：

```
- (void) navigationController:(UINavigationController *)navigationController didShowViewController:(UIViewController *)viewController animated:(BOOL)animated
{
    static dispatch_once_t once;
    dispatch_once(&once, ^{
        KVPasscodeViewController *passcodeController = [[KVPasscodeViewController alloc] init];
        passcodeController.delegate = self;

        UINavigationController *passcodeNavigationController = [[UINavigationController alloc] initWithRootViewController:passcodeController];
        [(UIViewController *)self.delegate presentViewController:passcodeNavigationController animated:YES completion:nil];
    });
} 
```

由于`navigationController:didShowViewController:animated:`在根视图控制器确实出现后调用，因此*对开始/结束外观转换*警告的不平衡调用消失了。

# android - 选择行时，Android Simple ListView会自动刷新

> ID：14412892
> 
> 赞同：0
> 
> 时间：2013-01-19T09:22:15.333
> 
> 标签：android, android-listview, android-arrayadapter

我正在尝试找到以下问题的根源，但无法解决此问题。

**这是我的代码：**

```
 private ListView listViewRouteDownload;
        @Override
        protected void onCreate(Bundle savedInstanceState) {
            // TODO Auto-generated method stub
            super.onCreate(savedInstanceState);
            setContentView(R.layout.lyt_route_download);
                listViewRouteDownload = (ListView) findViewById(R.id.listViewRouteDownload);

                Object obj[]=routeDownloadHelper.routeInfo();
                beatId = (String[]) obj[0];
                beatName = (String[]) obj[1];
                adapter = new ArrayAdapter<String>(RouteDownloadActivity.this, android.R.layout.simple_list_item_multiple_choice, beatName);
                listViewRouteDownload.setAdapter(adapter);
                listViewRouteDownload.setItemsCanFocus(false);

                listViewRouteDownload.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
} 
```

上述代码中的所有内容都可以完美运行，**但是** *`when I am selecting choices on by clicking on checkbox my the other rows of the listview gets refreshed automatically.`*

**是的，**我可以说行正在刷新，请参见示例。如果我将字符串 15 放在该行上，然后通过单击其他行，列表视图会刷新并将 15 设为 1 `(and then below)`5

**这是第一次加载列表视图时的屏幕截图。**

![加载时](../Images/96b2d4c2fd6d5cc5c9cda2b6e12a9946.png)

**这是我单击复选框时的屏幕截图。**

![点击后](../Images/d2e3d8370ec53546df94072314d18e91.png)

你可以看到**第二**张图片，那里 22 变成了 2 `(beolw that)`2。

**我想解决这个问题。**

**这是布局文件**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textViewRDTitle"
        style="@style/HeadingTheme"
        android:text="@string/route_sel" />

    <View
        android:id="@+id/viewLine1"
        style="@style/horizontalImg"
        android:layout_below="@id/textViewRDTitle" />

    <HorizontalScrollView
        android:id="@+id/horizontalScrollView"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1.0"
        android:fadingEdge="none"
        android:fillViewport="true"
        android:scrollbars="none" >

        <RelativeLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/textViewBDRouteName"
                style="@style/ListViewHeaderTheme"
                android:gravity="center"
                android:layout_width="230dp"
                android:text="@string/route" />

            <ImageView
                android:id="@+id/imageViewselparator1"
                style="@style/ListViewHeaderSeperatorEntry"
                android:layout_height="30dp"
                android:layout_toRightOf="@id/textViewBDRouteName" />

            <TextView
                android:id="@+id/textViewBDSelecct"
                style="@style/ListViewHeaderTheme"
                android:layout_width="87dp"
                android:layout_toRightOf="@id/imageViewselparator1"
                android:gravity="center"
                android:text="@string/select" />

            <ListView
                android:id="@+id/listViewRouteDownload"
                style="@style/ListViewTheme"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_alignParentLeft="true"
                android:layout_below="@+id/textViewBDRouteName"
                android:background="@android:color/transparent" >
            </ListView>

        </RelativeLayout>
    </HorizontalScrollView>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:background="@drawable/button_bottom"
        android:gravity="center"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/buttonRDBack"
            style="@style/styleNormalButton"
            android:text="@string/back" />

        <Button
            android:id="@+id/buttonRDNext"
            style="@style/styleNormalButton"
            android:text="@string/next" />
    </LinearLayout>

</LinearLayout> 
```

任何帮助都会得到帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T13:43:32.273

试试这个 xml，虽然我删除了你在那里的一个“视图”（第 7 行），但你可能想要替换它。这个 xml 对我来说很好，没有错误，我想问题是你遗漏了很多宽度参数？或者它们包含在您的样式中，我没有看到，但是您应该在那里找到错误：

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/textViewRDTitle"
            style="@style/HeadingTheme"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/route_sel" />

        <HorizontalScrollView
            android:id="@+id/horizontalScrollView"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:fadingEdge="none"
            android:fillViewport="true"
            android:scrollbars="none" >

            <RelativeLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content">

                <TextView
                    android:id="@+id/textViewBDRouteName"
                    style="@style/ListViewHeaderTheme"
                    android:layout_width="230dp"
                    android:layout_height="wrap_content"
                    android:gravity="center"
                    android:text="@string/route" />

                <ImageView
                    android:id="@+id/imageViewselparator1"
                    style="@style/ListViewHeaderSeperatorEntry"
                    android:layout_width="wrap_content"
                    android:layout_height="30dp"
                    android:layout_toRightOf="@id/textViewBDRouteName" />

                <TextView
                    android:id="@+id/textViewBDSelecct"
                    style="@style/ListViewHeaderTheme"
                    android:layout_width="87dp"
                    android:layout_height="wrap_content"
                    android:layout_toRightOf="@id/imageViewselparator1"
                    android:gravity="center"
                    android:text="@string/select" />

                <ListView
                    android:id="@+id/listViewRouteDownload"
                    style="@style/ListViewTheme"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:layout_alignParentLeft="true"
                    android:layout_below="@+id/textViewBDRouteName"
                    android:background="@android:color/transparent" >
                </ListView>

            </RelativeLayout>
        </HorizontalScrollView>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentLeft="true"
            android:background="@drawable/button_bottom"
            android:gravity="center"
            android:orientation="horizontal" >

            <Button
                android:id="@+id/buttonRDBack"
                style="@style/styleNormalButton"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/back" />

            <Button
                android:id="@+id/buttonRDNext"
                style="@style/styleNormalButton"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/next" />

        </LinearLayout>

</LinearLayout> 
```

# ios - 如何在没有警告的情况下解决 iOS 中的单独问题？

> ID：14412897
> 
> 赞同：0
> 
> 时间：2013-01-19T09:23:10.630
> 
> 标签：ios, warnings

以下代码确实有效，但它仍然让我感到沮丧，因为在`else`块中不推荐使用的方法调用会导致警告。

```
if ([self.navigationController respondsToSelector:@selector(dismissViewControllerAnimated:completion:)])
{
    [self.navigationController dismissViewControllerAnimated:YES completion:nil];
}
else
{
    //Here,the warning goes!
    //dismissModalViewControllerAnimated is deprecated
    [self.navigationController dismissModalViewControllerAnimated:YES];
} 
```

我怎样才能隐藏被解雇的警告，或者有没有其他方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T09:27:16.643

您可以暂时禁用相关代码行周围的弃用警告：

```
#pragma clang diagnostic push
#pragma clang diagnostic ignored "-Wdeprecated-declarations"

[self.navigationController dismissModalViewControllerAnimated:YES];

#pragma clang diagnostic pop 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T10:17:38.163

我看不出有任何理由同时保留dismissViewControllerAnimated 和dismissModalViewControllerAnimated。您收到了有关 dismissModalViewControllerAnimated 的警告，因为您的项目的部署目标是 6.0，并且在 iOS 6 SDK 中不推荐使用 dismissModalViewControllerAnimated。

1.  如果您希望您的应用支持低于 6.0 的 iOS，请将部署目标更改为低于 6.0（例如 5.0）并仅使用 dismissModalViewControllerAnimated 来关闭模式。
2.  If you want your app to support iOS 6.0+, then keep deployment target as 6.0 and use only dismissViewControllerAnimated for dismissing presented controllers.

# sql - 拆分字符串并取最后一个元素

> ID：14412898
> 
> 赞同：49
> 
> 时间：2013-01-19T09:23:44.973
> 
> 标签：sql, sql-server, url, split

我有一个包含这些值的表：

```
Articles/Search/ArtMID/2681/ArticleID/2218/Diet.aspx
OurStory/MeettheFoodieandtheMD.aspx
TheFood/OurMenu.aspx 
```

我想得到这个

```
Diet.aspx
MeettheFoodieandtheMD.aspx
OurMenu.aspx 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-01-19T09:40:27.477

在 SQL 中执行此操作的方法：

```
SELECT SUBSTRING( string , LEN(string) -  CHARINDEX('/',REVERSE(string)) + 2  , LEN(string)  ) FROM SAMPLE; 
```

JSFiddle 这里[http://sqlfiddle.com/#!3/41ead/11](http://sqlfiddle.com/#!3/41ead/11)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-19T09:34:33.170

```
SELECT REVERSE(LEFT(REVERSE(columnName), CHARINDEX('/', REVERSE(columnName)) - 1))
FROM   tableName 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/31f94/9)

其他来源

*   [逆转](http://msdn.microsoft.com/en-us/library/ms180040.aspx)
*   [剩下](http://msdn.microsoft.com/en-us/library/ms177601.aspx)
*   [CHARINDEX](http://msdn.microsoft.com/en-us/library/ms186323.aspx)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-19T09:34:04.180

请试试：

```
select url,(CASE WHEN CHARINDEX('/', url, 1)=0 THEN url ELSE RIGHT(url, CHARINDEX('/', REVERSE(url)) - 1) END)
from(
    select 'Articles/Search/ArtMID/2681/ArticleID/2218/Diet.aspx' as url union
    select 'OurStory/MeettheFoodieandtheMD.aspx' as url union
    select 'MeettheFoodieandtheMD.aspx' as url
)xx 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2020-02-02T06:41:55.200

```
SELECT REVERSE ((
    SELECT TOP 1 value FROM STRING_SPLIT(REVERSE('Articles/Search/ArtMID/2681/ArticleID/2218/Diet.aspx'), '/')
)) AS fName
Result: Diet.aspx 
```

标准`STRING_SPLIT`不允许采用最后一个值。

`REVERSE`诀窍是在用 拆分之前反转字符串 ( ) `STRING_SPLIT`，从末尾 ( ) 获取第一个值`TOP 1 value`，然后需要再次反转结果 ( `REVERSE`) 以恢复原始 chars 序列。

这是使用 SQL 表时的常用方法：

```
SELECT REVERSE ((
    SELECT TOP 1 VALUE FROM STRING_SPLIT(REVERSE(mySearchString), '/')
)) AS myLastValue
FROM myTable 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2019-04-11T12:32:01.110

试试这个。这更容易。

```
SELECT RIGHT(string, CHARINDEX('/', REVERSE(string)) -1) FROM TableName 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2021-07-06T12:13:57.253

一种更紧凑的方法（类似于 ktaria 的答案，但在 SQL Server 中）将是

```
SELECT TOP 1 REVERSE(value) FROM STRING_SPLIT(REVERSE(fullPath), '/') AS fileName 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-01-23T14:31:00.010

更简单优雅：

```
select reverse(SPLIT_PART(reverse('Articles/Search/ArtMID/2681/ArticleID/2218/Diet.aspx'), '/',1)) 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-04-04T05:48:49.053

请尝试以下代码：

```
SELECT SUBSTRING( attachment, LEN(attachment) 
     - CHARINDEX('/', REVERSE(attachment)) + 2, LEN(attachment)  ) AS filename 
FROM filestable; 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-08-24T16:12:55.293

你也可以试试这个

```
( SELECT TOP(1) value 
    FROM STRING_SPLIT(#string, '/') 
ORDER BY CHARINDEX('/' + value + '/', '/' + #string+ '-') DESC) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-09-19T11:00:31.020

我更正了 jazzytomato 对单个字符标记 ( `D`) 和单个标记 ( `Diet.aspx`)的解决方案

```
SELECT SUBSTRING( string , LEN(string) -  CHARINDEX('/','/'+REVERSE(string)) + 2  , LEN(string)  ) FROM SAMPLE; 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-01-08T05:17:23.053

```
Create Table #temp
(
ID int identity(1,1) not null,
value varchar(100) not null
)

DECLARE @fileName VARCHAR(100);

INSERT INTO #temp(value) SELECT value from STRING_SPLIT('C:\Users\Documents\Datavalidation\Input.csv','\')
SET @fileName=(SELECT TOP 1 value from #temp ORDER BY ID DESC);
SELECT @fileName AS File_Name;

DROP TABLE #temp 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-07-22T12:27:46.487

PostgreSQL 的等价物：

```
SELECT reverse(split_part(reverse(column_name), '/', 1)); 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2019-05-28T09:42:19.710

```
reverse(SUBSTRING(reverse(yourString),0,CHARINDEX('/',reverse(yourString)))) as stringLastPart 
```

# php - 带有隐藏字段的多个复选框插入到 mysql

> ID：14412902
> 
> 赞同：0
> 
> 时间：2013-01-19T09:24:07.950
> 
> 标签：php, mysql, insert

例如，我有多个带有隐藏字段的复选框

```
<input name="cat" type="hidden" value="1"><input name="features[]" type="checkbox" value="105">

<input name="cat" type="hidden" value="2"><input name="features[]" type="checkbox" value="106"> 
```

我有一张这样的桌子， `features_ID | features_CAT`

我如何插入复选框值`features_ID` 和隐藏字段`features_CAT`

顺便说一句，这是多次插入..谢谢您的帮助..

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-19T09:27:55.550

不知道隐藏与这里有什么关系，但要将您的功能与猫联系起来，您只需要设置数组索引

```
<input name="features[305][]" type="checkbox" value="105">
<input name="features[215][]" type="checkbox" value="106"> 
```

然后在您的 PHP 中，您将拥有`$POST['features']`数组，该数组又将包含其键将是特征 ID 和值的数组 - 具有猫 ID 的数组。

只是`print_r($_POST);`为了给自己拍张照片。

# jquery-ui - 将新值添加到 jquery 中的现有变量

> ID：14412905
> 
> 赞同：0
> 
> 时间：2013-01-19T09:24:27.663
> 
> 标签：jquery-ui, jquery

我在 jquery 中有一个变量。首先是添加一些值。现在再次向现有变量添加更多值。这是我的代码。如果有人知道帮助我......

```
var eventToAdd = {
                        title: $("#txtSubject").val(),
                        description: $("#addEventDesc").val(),
                        start: $("#txtStartdate").val(),
                        end: $("#txtEnddate").val()
                    };
                    var ChkBox = document.getElementById("rbtnHourly");
                    if (ChkBox.checked == true) {
                         **eventToAdd = {**
                            FREQ: "Hourly",
                            INTERVAL: $("#updown").val(),
                            BYSETPOS: "",
                            BYDAY: "",
                            BYMONTH: "",
                            BYMONTHDAY: ""
                        };
                    }
                    var ChkBox = document.getElementById("rbtnDaily");
                    if (ChkBox.checked == true) {
                        var rbtnEveryday = document.getElementById("rbtnEveryday");
                        if (rbtnEveryday.checked == true) {
                            **eventToAdd  = {**
                                FREQ: "Daily",
                                INTERVAL: $("#TextBox1").val(),
                                BYSETPOS: "",
                                BYDAY: "MO,TU,WE,TH,FR,SA,SU",
                                BYMONTH: "",
                                BYMONTHDAY: ""
                            };
                        }
                        else {
                           **var eventToAdd1 = {**
                                FREQ: "Daily",
                                INTERVAL: 1,
                                BYSETPOS: "",
                                BYDAY: "MO,TU,WE,TH,FR",
                                BYMONTH: "",
                                BYMONTHDAY: ""
                            };
                        };
                    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T09:28:52.107

我不完全确定你在问什么，但看看`jQuery.extend()`

[http://api.jquery.com/jQuery.extend/](http://api.jquery.com/jQuery.extend/)

这使您可以使用其他值扩展对象

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T09:44:08.787

您可以通过将属性分配给现有对象来向现有对象添加值，如下所示：

```
if (ChkBox.checked) {
    eventToAdd.FREQ = "Hourly";
    eventToAdd.INTERVAL = $("#updown").val();
    eventToAdd.BYSETPOS = "";
    eventToAdd.BYDAY = "";
    eventToAdd.BYMONTH = "";
    eventToAdd.BYMONTHDAY = "";
} 
```

# python - 在 BeautifulSoup 中处理印度语言

> ID：14412907
> 
> 赞同：3
> 
> 时间：2013-01-19T09:24:33.290
> 
> 标签：python, web-scraping, beautifulsoup

我正在尝试在[NDTV](http://en.wikipedia.org/wiki/NDTV)网站上搜索新闻标题。[这](http://archives.ndtv.com/articles/2012-01.html)是我用作 HTML 源的页面。我正在使用 BeautifulSoup (bs4) 来处理 HTML 代码，并且一切正常，除了当我在链接到的页面中遇到印地语标题时我的代码中断。

到目前为止，我的代码是：

```
import urllib2
from bs4 import BeautifulSoup

htmlUrl = "http://archives.ndtv.com/articles/2012-01.html"
FileName = "NDTV_2012_01.txt"

fptr = open(FileName, "w")
fptr.seek(0)

page = urllib2.urlopen(htmlUrl)
soup = BeautifulSoup(page, from_encoding="UTF-8")

li = soup.findAll( 'li')
for link_tag in li:
   hypref = link_tag.find('a').contents[0]
   strhyp = str(hypref)
   fptr.write(strhyp)
   fptr.write("\n") 
```

我得到的错误是：

```
Traceback (most recent call last):
  File "./ScrapeTemplate.py", line 30, in <module>
  strhyp = str(hypref)
  UnicodeEncodeError: 'ascii' codec can't encode characters in position 0-5: ordinal not in range(128) 
```

即使我没有包含`from_encoding`参数，我也会遇到同样的错误。我最初将它用作`fromEncoding`，但 python 警告我它已被弃用。

我该如何解决？从我读过的内容来看，我需要避免使用印地语标题或将其明确编码为非 ascii 文本，但我不知道该怎么做。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T09:32:50.393

你看到的是一个 NavigableString 实例（它派生自 Python unicode 类型）：

```
(Pdb) hypref.encode('utf-8')
'NDTV'
(Pdb) hypref.__class__
<class 'bs4.element.NavigableString'>
(Pdb) hypref.__class__.__bases__
(<type 'unicode'>, <class 'bs4.element.PageElement'>) 
```

您需要使用转换为 utf-8

```
hypref.encode('utf-8') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T09:28:31.730

```
strhyp = hypref.encode('utf-8') 
```

[http://joelonsoftware.com/articles/Unicode.html](http://joelonsoftware.com/articles/Unicode.html)

# php - 如何使用 php 将电影发布到不同的类别中？

> ID：14412917
> 
> 赞同：2
> 
> 时间：2013-01-19T09:26:45.610
> 
> 标签：php, mysql, database

假设我有一个电影列表网站，我想将电影发布到不同的类别中（例如：戏剧、动作），这些类别应该来自另一个表，以便我可以在两个或多个类别中显示特定电影。这怎么可能 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T09:32:17.497

您构建一个包含电影 ID 和类别 ID 的表：

movie_category(movie_id*,category_id*)

'*' = （组成）PRIMARY KEY

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T09:33:41.833

你在找什么，我相信是一个多对多的表关系。您将有一个包含所有电影（它们的名称、持续时间等）的表格。另一个表包含所有可能类别（动作、戏剧、喜剧等）的列表。

诀窍是有一个额外的第三个表，其中包含电影与类别的关系。您引用电影的 id 和类别 id，如下所示 -

```
id | movie_id | category_id   
---|----------|-------------
 1 |    1     |      1 
 2 |    1     |      2
 3 |    2     |      3
 4 |    2     |      1 
```

在这个例子中，电影 id 1 属于类别 1 和 2。电影 id 2 属于类别 1 和 3。所以你看，一部电影可以属于多个类别。

# jquery - Ajax 提交表单

> ID：14412918
> 
> 赞同：0
> 
> 时间：2013-01-19T09:26:47.330
> 
> 标签：jquery, ajax

我有一个通过`return false`表单提交禁用提交的表单。问题是我想用`ajax`. 当我申请时`ajax`，它正在提交我不想要的表格。

这是我的 jquery 函数。

```
function RegisterCourse(form)
{

    $('.barlittle').show();
    var all_data = $('#'+form).serialize();

    $.ajax({
        url:AjaxRecord.php,
        type:get,
        data:'all_data='+all_data,
        success:function(response){
            $('.barlittle').hide();
            var mesg="Successed";
            $('#temp').val(mesg);
            return false;
            },
        error:function(){
            $('.barlittle').hide();
            var error="ERROR";
            $('#temp').val(error);
            return false;
        }
    });
    return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T09:30:52.977

给你的提交按钮一个 ID

```
<input type ='submit' id ='sbtForm' value = 'submit' />
//jquery
$("#sbtForm").click(function(e){
  e.preventDefault();
  $.ajax({.... //place your ajax code or call your ajax function
}); 
```

希望这对你有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T09:30:56.363

参数的值`url`应该是`string`

```
$("#your_button_id").click(function(e){
    e.preventDefault();
    $.ajax({
        url: 'AjaxRecord.php',
        type: get,
        data: 'all_data=' + all_data,
        success: function (response) {
            $('.barlittle').hide();
            var mesg = "Successed";
            $('#temp').val(mesg);
        },
        error: function () {
            $('.barlittle').hide();
            var error = "ERROR";
            $('#temp').val(error);
        }
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T09:59:02.493

尝试检查您传递给函数的表单的值。

如果您要发送不同的表格，这意味着`$('#'+form).serialize()`不是您想要的表格

# makefile - make *** 没有指定目标，也没有找到 makefile。停止

> ID：14412919
> 
> 赞同：46
> 
> 时间：2013-01-19T09:27:15.067
> 
> 标签：makefile

我在安装包时遇到问题`dionaea`。

在我输入这个之后：

```
./configure --with-lcfg-include=/opt/dionaea/include/ \
--with-lcfg-lib=/opt/dionaea/lib/ \
--with-python=/opt/dionaea/bin/python3.1 \
--with-cython-dir=/usr/bin \
--with-udns-include=/opt/dionaea/include/ \
--with-udns-lib=/opt/dionaea/lib/ \
--with-emu-include=/opt/dionaea/include/ \
--with-emu-lib=/opt/dionaea/lib/ \
--with-gc-include=/usr/include/gc \
--with-ev-include=/opt/dionaea/include \
--with-ev-lib=/opt/dionaea/lib \
--with-nl-include=/opt/dionaea/include \
--with-nl-lib=/opt/dionaea/lib/ \
--with-curl-config=/opt/dionaea/bin/ \
--with-pcap-include=/opt/dionaea/include \
--with-pcap-lib=/opt/dionaea/lib/ \
--with-glib=/opt/dionaea 
```

下一步是：

```
#make 
```

出现错误消息： `make: *** No targets specified and no makefile found. Stop.`

我的目录是`/usr/local/src`

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-19T09:33:04.140

`make`将 makefile 作为输入。Makefile 通常被命名为`makefile`或`Makefile`. 该`configure`命令应该生成一个生成文件，以便`make`可以依次执行。检查是否在您的工作目录下生成了 makefile。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-09-11T15:41:03.487

运行`make clean`，然后`./configure`应该可以解决您的问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-08T12:08:27.697

我得到了同样的错误，我通过查看这个站点的解决方案来修复它：

[http://trac.macports.org/ticket/40476](http://trac.macports.org/ticket/40476)。

那么运行 './configure' 后你有没有遇到任何错误？也许缺少 tclConfig.sh。如果是这样，您必须先搜索**tclConfigure.sh**，然后将其放入命令中，而不是运行“./configure”，在我的例子中，它位于 /usr/lib/ 中。然后运行：' **./configure ----with-tcl=/usr/lib --with-tclinclude=/usr/include** '

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-06-27T03:16:19.717

`./configure`命令应该生成一个 makefile，命名为`makefile`or `Makefile`。如果目录下没有这个文件，则检查`configure`命令是否执行成功。

就我而言，我配置`apr-util`：

```
./configure --prefix=/usr/local/apr-util --with-apr=/usr/local/apr/bin/apr-1-config 
```

因为`--with-apr=/usr/local/apr/bin/apr-1-config`,还没有安装, 所以出现配置失败,`apr`没有生成`apr`.`/usr/local/apr/bin/apr-1-config`

所以我安装`apr`，然后配置`apr-util`，它工作。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-10-19T00:37:11.427

你必须有这样的东西：

```
"configure: error: "Error: libcrypto required." 
```

在你的`./configure runs`. 所以你需要先解决注意到的依赖关系，然后再试`./configure`一次，然后运行 ​​make ！

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-08-23T18:29:53.037

我最近在尝试在 Ubuntu 上手动安装[texane 的开源 STLink 实用程序](https://github.com/texane/stlink)时遇到了这个问题。奇怪的是，解决方案是，

```
make clean
make 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-05-31T13:00:52.400

我认为这可能意味着 ./configure 命令由于某种原因失败，在我的情况下是由于缺少包。所以我使用我的操作系统包管理器来安装所需的包（`autoconf`在`autoconf-archive`我的情况下），然后它工作了。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-02-28T20:33:08.283

如果用户拒绝任何读写权限，则可能会发生这种情况。像 C:\Windows\System32\ 具有受限访问权限，并且您被克隆并试图从此类受限目录中进行创建。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-04-12T15:55:16.860

如果您在 VSCode 中创建 Makefile，则您的 makefile 不会运行。我不知道这个问题的原因。也许文件的配置没有添加到系统中。但我以这种方式解决了。删除创建的makefile，然后转到项目目录并右键单击鼠标稍后创建一个文件并命名为Makefile。填写 Makefile 并运行后。它会起作用的。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-01-06T02:41:07.330

删除被gunzipped或gzip压缩并提取到文件夹并再次重新提取的源代码树。再次提供您的选择

```
./configure --with-option=/path/etc ... 
```

然后，如果所有库都存在，那么您的 make 应该会成功。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-03-08T12:38:50.637

如果在 ./configure Makefile.in 和 Makefile.am 之后生成并且 make 失败（通过显示以下 make: *** No targets specified and no makefile found. Stop.）所以有些东西没有配置好，要解决它，首先运行“autoconf”命令来解决错误的配置，然后重新运行“./configure”命令，最后是“make”

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-01-22T10:12:46.803

尝试

```
make clean
./configure --with-option=/path/etc
make && make install 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2022-02-28T07:57:45.390

第一次尝试

```
make clean
make 
```

如果这些不能解决您的问题，您必须安装构建包。

Debian 基础

```
 apt-get install build-essential libgtk-3-dev 
```

对于 RHEL/CentOS

```
sudo yum install gcc glibc glibc-common gd gd-devel -y 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-04-20T21:03:36.593

就我而言，数据库库中有一个文件 [Makefile.PL：http://www.cpan.org/modules/by-module/DBI/DBI-1.630.tar.gz](http://www.cpan.org/modules/by-module/DBI/DBI-1.630.tar.gz)

以下命令创建了**makefile**

```
perl Makefile.PL 
```

之后，**使**命令起作用

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2017-02-12T12:34:01.550

从工作目录解压源代码并以 root 身份 cd 进入文件目录。使用命令 ./configure 然后 make 和 make install

# node.js - 如何使用 MongoDB / NodeJS 进行大规模随机更新

> ID：14412924
> 
> 赞同：2
> 
> 时间：2013-01-19T09:27:29.620
> 
> 标签：node.js, mongodb

我有一个包含超过 1000000 个文档的 mongoDB 集合，我想用**专用**信息一个一个地更新每个文档（每个文档都有一个来自其他集合的信息）。

目前我正在使用从集合中获取所有数据的游标，并通过 Node.js 的异步模块更新每个记录

获取所有文档：

```
inst.db.collection(association.collection, function(err, collection) {
    collection.find({}, {}, function(err, cursor) {
        cursor.toArray(function(err, items){
                 ......
        );
    });
}); 
```

更新每个文档：

```
items.forEach(function(item) {
    // *** do some stuff with item, add field etc.
    tasks.push(function(nextTask) {
       inst.db.collection(association.collection, function(err, collection) {
           if (err) callback(err, null);
           collection.save(item, nextTask);
       });
    });
}); 
```

并行调用“保存”任务

```
async.parallel(tasks, function(err, results) {
    callback(err, results);
}); 
```

您会以更有效的方式进行此类操作吗？我的意思是如何避免加载游标的初始“查找”。现在有没有办法通过一个文档来做一个操作文档，知道所有文档都应该更新？

谢谢你的支持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T04:41:11.937

您的问题启发了我创建一个[Gist 来对解决您的问题的不同方法进行一些性能测试](https://gist.github.com/4592006)。

以下是在 MongoDB 位于 localhost 的小型 EC2 实例上运行的结果。测试场景是对 100000 个元素集合的每个文档进行唯一操作。

1.  108.661 秒——使用 find().toArray 一次提取所有项目，然后用单独的“保存”调用替换文档。
2.  99.645 秒——使用 find().toArray 一次提取所有项目，然后使用单独的“更新”调用更新文档。
3.  74.553 秒——使用 batchSize = 10 迭代游标 (find().each)，然后使用单独的更新调用。
4.  58.673 秒——使用 batchSize = 10000 迭代游标 (find().each)，然后使用单独的更新调用。
5.  4.727 秒——使用 batchSize = 10000 迭代游标，并一次将 10000 个项目插入到新集合中。

虽然不包括在内，但我还使用 MapReduce 作为服务器端过滤器进行了测试，运行时间约为 19 秒。我本来希望类似地使用“聚合”作为服务器端过滤器，但它还没有输出到集合的选项。

最重要的答案是，如果你能摆脱它，最快的选择是通过游标从初始集合中提取项目，在本地更新它们并将它们大块插入到新集合中。然后，您可以将新集合换成旧集合。

如果您需要保持数据库处于活动状态，那么最好的选择是使用具有大批量大小的游标，并就地更新文档。“保存”调用比“更新”慢，因为它需要替换整个文档，并且可能还需要重新索引它。

# google-nativeclient - Native Client Web 应用程序可以在运行时创建窗口和通用控件吗？

> ID：14412925
> 
> 赞同：0
> 
> 时间：2013-01-19T09:27:53.897
> 
> 标签：google-nativeclient

我在谈论谷歌浏览器的 Native Client 东西......
开发人员声称它可以在浏览器的沙箱中运行从 c / c++ 编译的本机代码。
他们描述了很多东西，但从来没有指出我需要什么......所以，如果我使用 CreateWindow 在我的应用程序中创建窗口，当我的 Native Client 应用程序加载到浏览器中时会出现这个窗口吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T18:18:45.487

简而言之，没有。关于在 Chrome 中使用 Native Client 的应用程序需要了解的两个关键事项：

1.  它们独立于平台（不允许特定于平台的调用）。
2.  它们仍然是网络应用程序，具有随之而来的限制和可能性。

如果 Native Client 允许特定于操作系统的调用，例如`CreateWindow`，它将不再独立于平台（并且还会带来安全风险）。

相反，Native Client 提供了一组独立于平台的 API，称为[Pepper](https://developers.google.com/native-client/peppercpp/)或 PPAPI，它们对所有受支持的操作系统（目前是 Mac OS、Windows、Linux 和 Chrome OS）的工作方式相同。如前所述，使用 Native Client 的应用程序仍然是 Web 应用程序，因此 Pepper 提供了与 JavaScript 相同的可能性和限制。例如，您可以获取 URL 或要求用户获得全屏权限，但您不能从本地文件系统访问任何随机文件（应用程序特定的隔离本地存储是可能的；就像让用户上传文件供应用程序使用一样） .

将现有的 C 或 C++ 代码库迁移到 Native Client 非常类似于移植到不同的操作系统。你的应用应该使用 Pepper API 调用，而不是使用 Windows API 调用。

对于其他背景，可能值得注意的是，[Chrome 打包应用程序](http://developer.chrome.com/trunk/apps/about_apps.html)可以请求访问命名空间中更广泛的[API](http://developer.chrome.com/trunk/apps/api_index.html)`chrome.*`集。这些 API 包括 USB、套接字、打开新窗口等。仍然不允许 Chrome 打包应用程序进行特定于操作系统的调用，但它们可以访问更多的 API，所有这些 API 都是独立于平台的。

简而言之，如果您的应用程序可以使用 Pepper API 和 chrome.* API，您可以使用 Native Client 和 JavaScript 编写它，并且您将拥有一个在上述四种操作系统中以相同方式运行的应用程序多于。如果您的应用无法使用这些 API，那么 Chrome 中的 Native Client 不是正确的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T21:23:57.673

似乎没有。这有点相关：[http](http://ssj-gz.blogspot.com/2013/01/emscripten-qt-progress-faster-better.html) ://ssj-gz.blogspot.com/2013/01/emscripten-qt-progress-faster-better.html 。不过，它已被翻译成 javascript，并且仅适用于 QT。而且慢。

# wpf - 将 WPF 控件的 ControlTemplate 更改为不禁用

> ID：14412926
> 
> 赞同：0
> 
> 时间：2013-01-19T09:27:54.053
> 
> 标签：wpf, xaml, styles, label, controltemplate

我有一个 Devexpress`DateEdit`并添加了一个触发器，用于何时`IsEnabled=False`将. 这一切都很好，但我的问题是，仍然是（禁用）。`ControlTemplate``Label``Text``Label``Grayed out`

我的风格：

```
<Style x:Key="DateTimeDropDownStyle" TargetType="{x:Type dxe:DateEdit}">
        <Setter Property="Mask" Value="dd MMM yyyy"/>
        <Setter Property="MaskUseAsDisplayFormat" Value="True"/>
        <Style.Triggers>
            <Trigger Property="dxe:DateEdit.IsEnabled" Value="False">
                <Setter Property="dxe:DateEdit.Template">
                    <Setter.Value>
                        <ControlTemplate>
                            <Label Content="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Text, StringFormat={}{0:dd MMM yyyyy}}"/>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Trigger>
        </Style.Triggers>
    </Style> 
```

所以，我的问题是，我如何更改`Style`以便`Label`不禁用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T13:54:14.460

尝试`Foreground`在`Label`模板中设置。

如果没有帮助，您必须编辑标签的控制模板。一个基本的是：

```
<ControlTemplate TargetType="{x:Type Label}">
    <Border Background="{TemplateBinding Background}"
            BorderBrush="{TemplateBinding BorderBrush}"
            BorderThickness="{TemplateBinding BorderThickness}">
        <ContentPresenter Margin="{TemplateBinding Padding}"/>    
    </Border>
    <ControlTemplate.Triggers>
        <!--This is the trigger to remove-->
        <Tirgger Property="IsEnabled"
                 Value="False">
            <Setter Property="Foreground"
                    Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}" />
        </Trigger>
    </ControlTemplate.Triggers>
</ControlTemplate> 
```

# css - 在 html 表格中对齐文本

> ID：14412928
> 
> 赞同：0
> 
> 时间：2013-01-19T09:27:59.667
> 
> 标签：css, html-table

我是 CSS 新手，我有一个 html 表格，如下所示

```
+-------------------------------+---------------------+
|Text Sample                    | text                |
+-------------------------------+---------------------+
|Text Sample Sample             | text                |
+-------------------------------+---------------------+ 
```

我想改变 Text1s 的对齐方式如下：

```
+-------------------------------+---------------------+
|          Text Sample          | text                |
+-------------------------------+---------------------+
|          Text1  Sample Sample | text                |
+-------------------------------+---------------------+ 
```

这是如何使用 CSS 完成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T09:31:15.303

你只是想缩进每个表格行的第一个单元格吗？如果是这样，一种方法是这样的：

```
tr td:first-child { padding-left: 30px } 
```

（或插入您自己的值）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T09:31:57.293

您可以考虑为 td:first-child 添加 margin-left

```
// style.css
td:first-child { margin-left: 30px; } 
```

# android - Android：我的 gif 图像不在 tabhost 中运行

> ID：14412938
> 
> 赞同：0
> 
> 时间：2013-01-19T09:29:29.357
> 
> 标签：android, image, android-tabhost, gif

我的 gif 图像无法在我的 tabhost 上运行。当我尝试按下锁定/电源按钮然后返回到它运行的应用程序时。我想修复它，但我不知道我的代码中的问题是什么，因为它没有任何错误。我尝试制作一个不包含 tabhost 并且我的 gif 图像运行的新项目。

这是我的代码

**AnimatedUtils.java**

```
public class AnimatedUtils extends Activity {

    /**
     * start/stop animation
     *
     * @param view
     * @param start
     */
    static public void startViewAnimation(View view, boolean start) {
        if (view != null) {
            // background drawable
            startDrawableAnimation(view.getBackground(), start);
            if (view instanceof ImageView) {
                // image drawable
                startDrawableAnimation(((ImageView)view).getDrawable(), start);
            }
        }
    }

    /**
     * start/stop animation
     *
     * @param d
     * @param start
     */
    static public void startDrawableAnimation(Drawable d, boolean start) {
        if (d instanceof AnimationDrawable) {
            if (start) {
                ((AnimationDrawable)d).start();
            } else {
                ((AnimationDrawable)d).stop();
            }
        }

    }

    /**
     * load drawable from resource id
     *
     * @param rsrc
     * @param resid
     * @return
     */
    static public Drawable loadDrawableFromResource(Resources rsrc, int resid) {
        // load from resource
        Movie movie = Movie.decodeStream(rsrc.openRawResource(resid));
        if ((movie != null) && movie.duration() > 0) {
            return makeMovieDrawable(rsrc, movie);
        } else {
            // not animated GIF
            return rsrc.getDrawable(resid);
        }
    }

    /**
     * load drawable from file path
     *
     * @param rsrc
     * @param path
     * @return
     */
    static public Drawable loadDrawableFromFile(Resources rsrc, String path) {
        // load from file
        // Movie movie = Movie.decodeFile(path);
        Movie movie = null;
        try {
            File file = new File(path);
            FileInputStream is = new FileInputStream(file);
            byte data[] = new byte[(int)file.length()];
            is.read(data);
            is.close();
            movie = Movie.decodeByteArray(data, 0, data.length);
        } catch (Exception e) {
        }

        if ((movie != null) && movie.duration() > 0) {
            return makeMovieDrawable(rsrc, movie);
        } else {
            // not animated GIF
            return Drawable.createFromPath(path);
        }
    }

    /**
     * make AnimationDrawable from Movie instance
     *
     * @param rsrc
     * @param movie
     * @return
     */
    static private Drawable makeMovieDrawable(Resources rsrc, Movie movie) {
        int duration = movie.duration();
        int width = movie.width(), height = movie.height();

        AnimationDrawable result = new AnimationDrawable();
        result.setOneShot(false); // for loop

        Drawable frame = null;
        int start = 0;
        for (int time = 0; time < duration; time += 10) {
            if (movie.setTime(time)) {
                if (frame != null) {
                    // add previous frame
                    result.addFrame(frame, time - start);
                }

                // make frame
                Bitmap bitmap = Bitmap.createBitmap(width, height,
                        Bitmap.Config.RGB_565); // save heap
                        //Bitmap.Config.ARGB_8888); // high quality
                movie.draw(new Canvas(bitmap), 0, 0);
                frame = new BitmapDrawable(rsrc, bitmap);
                start = time;
            }
        }

        if (frame != null) {
            // add last frame
            result.addFrame(frame, duration - start);
        }
        return result;
    }
} 
```

**gifimage.java**

```
public class gifimage extends Activity {

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main3);

        Drawable d;
        d = AnimatedUtils.loadDrawableFromResource(getResources(),
                R.drawable.gif1);

        ((ImageView)findViewById(R.id.imageView1)).setImageDrawable(d);

        Drawable e;
        e = AnimatedUtils.loadDrawableFromResource(getResources(),
                R.drawable.gif2);

        ((ImageView)findViewById(R.id.imageView2)).setImageDrawable(e);

        Drawable f;
        f = AnimatedUtils.loadDrawableFromResource(getResources(),
                R.drawable.gif3);

        ((ImageView)findViewById(R.id.imageView3)).setImageDrawable(f);

        }

     @Override
     public void onWindowFocusChanged(boolean hasFocus) {
         super.onWindowFocusChanged(hasFocus);

         // start/stop animation
         AnimatedUtils.startViewAnimation(findViewById(R.id.imageView1), hasFocus);
         AnimatedUtils.startViewAnimation(findViewById(R.id.imageView2), hasFocus);
         AnimatedUtils.startViewAnimation(findViewById(R.id.imageView3), hasFocus);

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T10:40:44.290

在编写代码之前，请尝试查看文档以节省时间，`Android is not support .Gif`

请参阅[支持的格式](http://developer.android.com/guide/appendix/media-formats.html)列表。您可以使用帧动画和其他方式。

# cakephp - 使用 cakephp 对单选按钮进行 sql 搜索查询

> ID：14412941
> 
> 赞同：0
> 
> 时间：2013-01-19T09:30:02.573
> 
> 标签：cakephp

在我的侧边栏中有单选按钮，并且想要放置一个搜索查询，例如是否选择了单选按钮`new`然后`select * from products`如果`old`选择了然后`select * from posts`。其中`view/element/sidebar.ctp`包含：

```
<label class="radio">
    <input type="radio" name="optionsRadios" id="optionsRadios1" value="option1" checked>
    NEW
</label>
<label class="radio">
    <input type="radio" name="optionsRadios" id="optionsRadios2" value="option2">
    USED
</label> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T09:39:21.397

您可以在控制器中检查提交的值。

```
$this->request->data['optionsRadios']; 
```

# java - 如何创建我自己的文件扩展名，如 .odt 或 .doc？

> ID：14412942
> 
> 赞同：7
> 
> 时间：2013-01-19T09:30:02.287
> 
> 标签：java, file, file-extension

我正在做一个文档处理项目，比如 Microsoft word（学术项目）。

有什么快速的方法来创建我自己的文件扩展名？是否有第三方软件可以让您创建自己的文件扩展名？（即 myfile.funny？）

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-19T10:26:52.963

文件扩展名只是最后一个句点之后的文件名部分。

例如在路径中：

`C:\Users\Tests\My Documents\file.txt`

文件扩展名`.txt`通常表示文件包含文本数据。要创建自己的文件扩展名，您需要做的就是在文件名的最后一个句点之后放置所需的扩展名。

在 Java 中，您可以使用如下类型的对象创建文件`File`：

```
File file = new File("file.txt") 
```

该文件将在当前工作目录中创建并具有扩展名`txt`，因为这是文件名中最后一个句点之后的值。

文件格式是指文件内数据的布局。创建自定义文件格式涉及考虑如何在文件中存储数据，并以与该布局匹配的方式将其写入文件。

例如，如果我有一个地址簿应用程序，我可能决定存储人们的姓名和电话号码，用制表符分隔，并将这些数据保存在扩展名为的文件中`address`

我的 `AddressBook.Save()`函数可能看起来像这个 Java 代码。应该注意的是，我已经很多年没有用 Java 编程了，很可能会出错。

```
void Save(File file)
{
 FileWriter writer = new FileWriter(file);

foreach (AddressBookEntry entry in this.entries)
{
this.SaveEntry(entry,writer);
}
} 

void SaveEntry(AddressBookEntry entry,  FileWriter writer)
{
  String record = entry.getFirstName() + "\t" + entry.getLastName() + "\t" +
  entry.getPhoneNumber();
  writer.write(record, 0, record.length();
} 
```

如果我们有这样的地址条目：

```
First Name:Test
Last Name: Bob
Phone Number=555-1212 
```

然后该条目将出现在`.address`文件中，如下所示

`Test Bob 555-1212`

我希望这有助于解释文件扩展名和文件格式之间的区别，并以某种方式向您展示如何使用自定义扩展名创建自己的格式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-19T09:36:26.843

这不`Java`相关。选择一个没有其他人使用的扩展名，当您使用 编写文件时`Java`，只需将扩展名附加到文件名。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-19T09:48:37.277

如果会建议遵循其他人的格式，例如 .odt 甚至 HTML 来获取此类内容。如果您对创建自己的格式很认真，那么您应该查看 java 的内置 xml 库并使用 xml 制作格式，[http](http://docs.oracle.com/javase/7/docs/api/) ://docs.oracle.com/javase/7/docs/api/是一个很好的地方开始然后浏览到 javax.xml.* 包。
就像其他人所说，如果您只想更改文件扩展名，只需将扩展名放在文件路径的末尾即可。
让操作系统将您的程序与该扩展关联起来要复杂得多，但这并不是真正的 java 问题，它也依赖于平台。

# javascript - 如何在使用 Node.js 的 http 请求后阻止

> ID：14412946
> 
> 赞同：3
> 
> 时间：2013-01-19T09:30:44.923
> 
> 标签：javascript, node.js

我有以下代码：

```
var options1 = {
  host: 'maps.googleapis.com',
  port: 80,
  path: "/maps/api/geocode/json?latlng=" + lat + "," + lng + "&sensor=false",
  method: 'GET',
  headers: {
      'Content-Type': 'application/json'
  }
};

var body1 = "";

var req = http.request(options1, function(res) {
  console.log('STATUS: ' + res.statusCode);
  console.log('HEADERS: ' + JSON.stringify(res.headers));
  res.setEncoding('utf8');
  res.on('data', function (chunk) {
    //console.log('BODY: ' + chunk);
    body1 += chunk;
  });
  res.on('close', function () {
    console.log('get_zillow : ' + body1);
  });
});

req.on('error', function(e) {
  console.log('problem with request: ' + e.message);
});

req.end();

console.log('get_zillow : ' + body1); 
```

我需要用 JSON 响应的结果填充 body1。但是，第一个`console.log('get_zillow : ' + body1);`永远不会被调用——由于某种原因，结果永远不会关闭——第二个`console.log('get_zillow : ' + body1);`什么也不打印，因为它是异步的，并且在`body1`填充之前被调用。

此外，我需要连续多次向不同的外部站点发出类似的请求，每个请求都依赖于上一个结果中的 json。有没有办法做到这一点，而无需编写三个凌乱的内部回调，并在 http 请求后以某种方式阻塞？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T10:37:19.113

改变

```
res.on('close', function () {
    console.log('get_zillow : ' + body1);
  }); 
```

到

```
res.on('end', function () {
     callback_function(body1);
}); 
```

//定义新函数

```
function callback_function(finaldata)
{
 // handle your final data
} 
```

# c# - 使用 PHP Mysql 进行许可证检查

> ID：14412953
> 
> 赞同：1
> 
> 时间：2013-01-19T09:31:20.197
> 
> 标签：c#, php, mysql, apache, licensing

> **可能重复：**
> [如何在 PHP 代码中安全地存储密码？](https://stackoverflow.com/questions/1432545/how-to-safely-store-a-password-inside-php-code)

所以这是我有一个 C# 程序的场景。它会将序列号发送到我的网站。（例如：www.example.com/LicenseCheck.php）可以说它以串行方式发送 1234-1234-1234。

然后 licenseCheck.php 将连接到我的 mysql：

```
<?php
$username = "your_name";
$password = "your_password";
$hostname = "localhost"; 

//connection to the database
$dbhandle = mysql_connect($hostname, $username, $password)
  or die("Unable to connect to MySQL");
echo "Connected to MySQL<br>";
?> 
```

然后它将从有效的序列表中进行“选择”，如果表中存在许可证，则表示它是有效的序列。

基本上，我试图找到什么是解决这个问题的好方法。我最担心在哪里存储“用户名”、“密码”。基本上我只有一个用户只有读取权限。

我想尽可能地隐藏用户名和密码，并希望以安全的方式解决这个问题。

“安全”是什么意思？只是一种防止未经授权的用户进入我的数据库的方法。

感谢所有的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T09:47:32.093

mysql 功能不再使用。我将为您提供解决方案的 mysqli 程序方法。我还将介绍一种保存密码的安全方法。

基本的mysqli连接和查询：

```
$queryString = "SELECT COUNT(*) FROM table WHERE userName = ? AND password=?";//not the question marks
//the question marks are used to bind our parameters/variables so the query string cannot be adjusted I believe? 
$DBH=mysqli_connect('local','user','pass');
mysqli_select_db($DBH,'database');
$query = mysqli_prepare($DBH,$queryString);
mysqli_bind_param($query,'ss',$username,$passwordHASH);//the second parameter declares the datatypes 
mysqli_execute($query);
//mysqli_bind_result($results); ||not needed in this situation but this is how you'd get results from the database
if(mysqli_fetch($query)){ //adding  && $results = 1 would insure there is only one record
    //username and password match
}
else{
    //error builder etc
} 
```

现在对于您的密码，我建议使用 a`hmac_hash()`来提供保护。将您的密码插入数据库时​​，请确保`hmac_hash()`在您查询数据库时，这些密码受到保护。

```
$passwordHASH = hash_hmac('sha512',$hashThis, '&R4nD0m^'); 
```

所以基本上你的查询/获取将返回 true 如果`COUNT(*)`返回 1 如果用户名和密码等于`$username`and `$passwordHASH`。

**但是**说了这么多，你不能`#include <mysql.h>`在 C# 中使用 mysql 库吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T09:36:01.993

看看[这个答案](https://stackoverflow.com/a/1432589/1018290)的第二个要点。本质上，您需要将 MySQL 连接详细信息放在文档根目录之外的配置文件中（例如 public_html/ 等），然后需要该文件。

# r - 在 if .. else if .. else 中使用逻辑运算符的警告

> ID：14412955
> 
> 赞同：1
> 
> 时间：2013-01-19T09:31:57.420
> 
> 标签：r, comparison-operators

这不是一个问题。我想介绍 R 中几乎没有记录的部分。

```
a <- 0.3-0.1 # should be 0.2

b <- 0.7-0.5 # should also be 0.2 
```

然而，由于浮点表示，

```
a==b
[1] FALSE 
```

从文档中，有两种正确的布尔检查相等性的方法：

```
isTRUE(all.equal(a,b))

identical(all.equal(a,b), TRUE) 
```

不是很明显的是，如果要检查一个结构中的所有`>`, `<`,则*必须*在其他两个测试之前进行相等性测试。由于 要么或可以不可预测地变成 TRUE - 再次，由于浮点数值模糊性。`==``if .. else if .. else if` *`a > b``a < b`*

 *不良行为示例：

```
if (a < b)
{
    print('a smaller than b')

} else if (a > b) {
    print('a greater than b')

} else if (isTRUE(all.equal(a,b))) {
    print('a equal b')
}

[1] "a smaller than b" 
```

我希望这将有所帮助。

亲切的问候，卢卡

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T12:45:43.063

这就是 OP 作为解决方案的意思：

```
if (isTRUE(all.equal(a, b))) {
    print('a equals b')
} else if (a > b) {
    print('a greater than b')
} else if (a < b) {
   print('a smaller than b')
} 
```

通过首先排除`all.equal`-ity，您可以相信这一点，`<`并`>`会按照预期进行。这样，就不需要重复使用`all.equal`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-19T10:32:38.613

如果我运行你的代码，我会得到

```
> [1] "a greater than b" 
```

这并不意外。从[R inferno](http://www.burns-stat.com/pages/Tutor/R_inferno.pdf)的第一个圆圈中获取提示并查看更多数字

```
> print(c(a,b,a-b), digits=20)
[1] 1.9999999999999998335e-01 1.9999999999999995559e-01
[3] 2.7755575615628913511e-17 
```

因此，R 认为`a > b`是 TRUE 也就不足为奇了。

为了解决这个问题，你可以写类似

```
if        (a < b & ! isTRUE(all.equal(a, b))) {
    print('a smaller than b')

} else if (a > b & ! isTRUE(all.equal(a, b))) {
    print('a greater than b')

} else if (a == b |  isTRUE(all.equal(a, b))) {
    print('a equals b')
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T15:05:17.253

或者，您可以包含一个阈值。

```
thresh <- 1e-12

if (a - b > thresh)        {
    print('a greater than b')
} else if (b - a > thresh) {
    print('a smaller than b')
} else {
    print('a equals b')
} 
```*

# javascript - 带有 Cordova 2.2.0 的 Android 视频插件 Phonegap

> ID：14412957
> 
> 赞同：1
> 
> 时间：2013-01-19T09:32:11.227
> 
> 标签：javascript, android, cordova, phonegap-plugins

我正在开发一个应用程序（我的大学的一种社交网络），我遇到了[Android video Player Phonegap 插件的问题](https://github.com/macdonst/VideoPlayer/)

我已经完成了自述文件中定义的 3 个步骤来安装插件，但它在我的手机（Galaxy Ace Android 2.3.6）和模拟器（4.0）上不起作用。我只是在（cordova.js）之后加载Javascript（video.js）我有这个错误：

> 未捕获函数需要第一个参数！在科尔多瓦 2.2.0.js

看来video.js 使用cordova.js 有问题。当我点击播放按钮时，我遇到了另一个错误：

> 未捕获的类型错误：无法读取属性“videoPlayer”

在这种情况下，video.js 似乎没有创建视频播放器对象......

我的页面代码和github上的例子一样：

```
<html>
  <head>
    <meta name="viewport" content="width=320; user-scalable=yes" />
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <title>PhoneGap</title>
      <script type="text/javascript" charset="utf-8" src="cordova-2.3.0.js"></script>
      <script type="text/javascript" charset="utf-8" src="script/video.js"></script>
      <script type="text/javascript">
        function init(){
          document.addEventListener("deviceready", console.log('ready'), true);
        }
        function playVideo(vidUrl) {
          window.plugins.videoPlayer.play(vidUrl);
        }
      </script>
    </head>
    <body onload="init();">
      <a href="#" onclick="playVideo('http_link')">Play HTTP</a>
    </body> 
```

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T04:18:50.223

我刚刚对 VideoPlayer 进行了代码更改，这应该使其与旧的 window.plugins.videoPlayer 做事方式向后兼容。如果您使用的是 2.2.0 版本的插件，请获取新的 JS 文件。

[https://github.com/macdonst/VideoPlayer/blob/master/2.2.0/www/video.js](https://github.com/macdonst/VideoPlayer/blob/master/2.2.0/www/video.js)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-26T08:28:07.547

使用 html 重现视频的最佳方法是使用 HTML5 的标签。

不是所有的浏览器都支持这个，你必须尝试知道！

[http://www.w3schools.com/html/html5_video.asp](http://www.w3schools.com/html/html5_video.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T13:28:49.403

如果你添加这个

```
<plugin name="VideoPlayer" value="com.phonegap.plugins.video.VideoPlayer"/> 
```

到 res/xml 文件夹中的 plugins.xml。

然后检查代码

```
 window.plugins.videoPlayer.play("https://www.youtube.com/watch?v=en_sVVjWFKk"); 
```

在 index.html 中定义两行

```
 <script type="text/javascript" src="cordova-2.3.0.js"></script>
     <script type="text/javascript" charset="utf-8" src="video.js"></script> 
```

# python - 无法加载 mod_wsgi：找不到符号：__Py_FalseStruct

> ID：14412960
> 
> 赞同：2
> 
> 时间：2013-01-19T09:32:38.387
> 
> 标签：python, django, mod-wsgi

我正在尝试在我的 mac（山狮）上安装**mod_wsgi**（3.4），我按照这里的所有说明进行操作：[http](http://code.google.com/p/modwsgi/wiki/InstallationInstructions) ://code.google.com/p/modwsgi/wiki/InstallationInstructions但我无法加载模块由于以下错误：

```
httpd: Syntax error on line 119 of /private/etc/apache2/httpd.conf: Cannot load /usr/libexec/apache2/mod_wsgi.so into server: dlopen(/usr/libexec/apache2/mod_wsgi.so, 10): Symbol not found: __Py_FalseStruct\n  Referenced from: /usr/libexec/apache2/mod_wsgi.so\n  Expected in: flat namespace\n in /usr/libexec/apache2/mod_wsgi.so 
```

上面的消息是通过测试 apache 模块显示的：

```
apachectl -M 
```

我有默认的 python mac install (2.7) 加上使用专用 dmg 手动安装的最新 3.3，当我运行时`./configure`我尝试通过指定两个版本并添加标志`--disable-framework`（老实说我不知道​​它做了什么，但我找到了在其他讨论中提到）。

我被卡住了……我该怎么办？

**更新：**

我通过运行配置了 mod_wsgi（使用默认的 python 2.7）：

```
make distclean
./configure
make
sudo make install 
```

无论如何我想使用python 3.3，并修复我上面报告的错误

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T10:55:47.220

`mod_wsgi`如果你真的不知道随之而来的点点滴滴，安装起来会很痛苦。猜测一下，我会说它与共享 python 库有关。我可以推荐使用[自制包管理器](http://mxcl.github.com/homebrew/)吗？

安装 brew 相当简单，但不再安装 mod_wsgi。

```
brew tap homebrew/apache
brew install mod_wsgi 
```

然后在完成后按照说明进行操作。您必须更改安装 mod_wsgi 的目录。

不过，关于自制软件的警告，您需要确保安装了最新版本的 XCode，或者至少安装了 xcode 命令行工具。不过自制很棒。

# sql - Sql：查找答案是否存在

> ID：14412967
> 
> 赞同：2
> 
> 时间：2013-01-19T09:33:48.873
> 
> 标签：sql, sql-server, sql-server-2008, stored-procedures

我有两张桌子，一张有问题，一张有答案。问题架构由 questionid、question、module id 组成。一个moduleid 可能有很多问题。

```
Questionid   Question    Moduleid(FK)
--------     -----       -------
1            q1             1
2            q2             1
3            q4             2
4            q5             2 
```

答案架构由 3 列组成

```
answerid     Answer    questionid(FK)
--------     -----       -------
1            a1             1
2            a2             2
3            a4             3
4            a5             4 
```

我正在尝试构建一个存储过程，我将把 tblquestions 的 @moduleid 作为参数发送，如果特定 moduleid 的所有问题都在 tblquestions 中得到回答，我希望它返回“1”。（一个问题在 tblanswers 中只有一个答案）如果没有回答所有问题，则返回 0。关于如何制作这种方法的任何帮助？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T09:51:46.283

也许有一些更简单的东西，但这应该可以工作并且可以轻松修改它以返回所有已回答/未回答的模块或模块的缺失答案等。

```
SELECT CASE 
     WHEN EXISTS (SELECT 1 
                  FROM   tblquestions AS q 
                         INNER JOIN tblanswers AS a 
                                 ON q.questionid = a.questionid 
                  WHERE  ( q.moduleid = @ModuleId ) 
                         AND ( NOT EXISTS (SELECT 1 
                                           FROM   tblquestions AS q 
                                                  LEFT OUTER JOIN 
                                                  tblanswers AS a 
                                                               ON 
                                                  q.questionid = 
                                                  a.questionid 
                                           WHERE  ( q.moduleid = @ModuleId ) 
                                                  AND ( a.answerid IS NULL ) 
                                          ) )) 
   THEN 1  ELSE 0 
   END  AS AllQuestionsAnswered 
```

[**这是带有所有模块ID的sql-fiddle**](http://www.sqlfiddle.com/#!3/6094c/8/2)，结果是：

*   模块 ID = 1 => 1
*   模块 ID = 2 => 1
*   模块 ID = 3 => 0

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T09:45:22.620

将此查询放在存储过程中。

```
SELECT  CASE WHEN (COUNT(a.QuestionID) = COUNT(b.QuestionID))
            THEN 1 
            ELSE 0
        END as AreAllAnswered
FROM    questions a
        LEFT JOIN answers b
            ON a.QuestionID = b.questionID
WHERE   a.ModuleID = @valueHere 
```

您看不到`GROUP BY`子句的原因是因为记录已经被特定过滤了`ModuleID`。

*   [SQLFiddle Demo（*包括三个查询*）](http://www.sqlfiddle.com/#!3/9a419/3)

**完整的存储过程代码**

```
CREATE PROCEDURE ProcNameHere (@ModuleID INTEGER) 
AS 
    SELECT  CASE WHEN (COUNT(a.QuestionID) = COUNT(b.QuestionID))
                THEN 1 
                ELSE 0
            END as AreAllAnswered
    FROM    questions a
            LEFT JOIN answers b
                ON a.QuestionID = b.questionID
    WHERE   a.ModuleID = @ModuleID
GO 
```

**更新 1**

如果 OP 允许每个问题有多个答案，则查询只有轻微的修改，

```
CREATE PROCEDURE ProcNameHere (@ModuleID INTEGER) 
AS 
    SELECT  CASE WHEN (COUNT(DISTINCT a.QuestionID) = COUNT(DISTINCT b.QuestionID))
                THEN 1 
                ELSE 0
            END as AreAllAnswered
    FROM    questions a
            LEFT JOIN answers b
                ON a.QuestionID = b.questionID
    WHERE   a.ModuleID = @ModuleID
GO 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T09:48:56.587

```
 I hope this may work....

 declare @que int
 declare @ans int
 set @que=( select count(*) from Question where moduleid=1)
 set @ans=(select count(Answer.questionid) from Answer inner join Question
 on Question.Questionid=Answer.questionid where Question.moduleid=1)
 if(@que = @ans)
 begin
   select 1
 end
 else
 begin
   select 0
 end 
```

# git - 如何 Bash 脚本 Git 本地分支检查？

> ID：14412972
> 
> 赞同：3
> 
> 时间：2013-01-19T09:34:27.173
> 
> 标签：git, bash, scripting

寻求解决方案以实现以下目标：

*   如果当前未在本地创建上创建分支
*   如果它已经存在提示用户并移动到下一条语句

到目前为止，我已经让它工作了，但并不完全在那里。我的问题确实是后者，但我想花点时间重新思考整个事情，并获得一些关于如何更合理地写这个的反馈。

当分支存在时，该变量`existing_branch`提供*SHA*和*refs/heads/branchName*，否则 git 会占据并提供预期的`fatal:`

```
check_for_branch() {
 args=("$@")
 echo `$branch${args[0]}`
 existing_branch=$?
}

create_branch() {
  current="git rev-parse --abbrev-ref HEAD"
  branch="git show-ref --verify refs/heads/"

  args=("$@")
  branch_present=$(check_for_branch ${args[0]})
  echo $branch_present
  read -p "Do you really want to create branch $1 " ans
  case $ans in
    y | Y | yes | YES | Yes)
        if [  ! -z branch_present ]; then
          echo  "Branch already exists"
        else
          `git branch ${args[0]}`
          echo  "Created ${args[0]} branch"
        fi
    ;;
     n | N | no | NO | No)
      echo "exiting"
    ;;
    *)
    echo "Enter something I can work with y or n."
    ;;
    esac
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-19T11:59:28.120

您可以避免提示分支是否已存在，并稍微缩短脚本，如下所示：

```
create_branch() {
  branch="${1:?Provide a branch name}"

  if git show-ref --verify --quiet "refs/heads/$branch"; then
    echo >&2 "Branch '$branch' already exists."
  else
    read -p "Do you really want to create branch $1 " ans
    ...
  fi
} 
```

# css - 如何手动将 4 个响应式样式表的代码合并到一个样式表中

> ID：14412976
> 
> 赞同：-2
> 
> 时间：2013-01-19T09:35:09.687
> 
> 标签：css, responsive-design

我刚刚创建了一个带有 4 个响应式样式表的响应式主页。我只想**“手动”将所有 4 个样式表的代码合并到一个样式表中。**请告诉如何去做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T09:44:37.537

您可以使用 YUI 压缩器来缩小它们并将它们全部放入一个流中，您可以将它们粘贴到一个文件中。您可以手动执行此操作，也可以在部署时运行一个简单的脚本。

你可以试试它是否适合你[在线。](http://refresh-sf.com/yui/)

# c# - 字节/字符缓冲区长和/或双

> ID：14412979
> 
> 赞同：0
> 
> 时间：2013-01-19T09:35:31.947
> 
> 标签：c#, performance, bytearray, c#-2.0

在我的代码中，我需要将整数的字符串表示形式转换为`long`值`double`。

字符串表示是一个字节数组 ( `byte[]`)。例如，对于数字`12345`字符串表示是`{ 49, 50, 51, 52, 53 }`

目前，我使用以下明显的代码转换为`long`（以及几乎相同的代码转换为`double`）

```
private long bytesToIntValue()
{
    string s = System.Text.Encoding.GetEncoding("Latin1").GetString(bytes);
    return long.Parse(s, CultureInfo.InvariantCulture);
} 
```

此代码按预期工作，但*就我而言*，我想要更好的东西。这是因为目前我必须先将字节转换为字符串。

在我的例子中，`bytesToIntValue()`被调用了大约 1200 万次，大约 25% 的内存分配是在这种方法中进行的。

当然，我想优化这部分。我想在没有中间字符串的情况下执行转换（+ 速度，- 分配）。

你会推荐什么？如何在没有中间字符串的情况下执行转换？是否有更快的方法来执行转换？

**编辑：**

我正在处理的字节数组总是包含 ASCII 编码的数据。数字可以是负数。对于双值指数格式是允许的。不允许使用十六进制整数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T09:50:35.523

> 如何在没有中间字符串的情况下执行转换？

好吧，您可以轻松地将每个转换`byte`为`char`. 例如 - 未经测试：

```
private static long ConvertAsciiBytesToInt32(byte[] bytes)
{
    long value = 0;
    foreach (byte b in bytes)
    {
        value *= 10L;
        char c = b; // Implicit conversion; effectively ISO-8859-1
        if (c < '0' || c > '9')
        {
            throw new ArgumentException("Bytes contains non-digit: " + c);
        }
        value += (c - '0');
    }
    return value;
} 
```

请注意，这确实*假设*它是 ASCII（或兼容的） - 如果您的字节数组实际上是 UTF-16（例如），那么它肯定会做错事。

另请注意，这不执行任何类型的长度验证或溢出检查......并且它不处理负数。如果需要，您可以添加所有这些，但我们对您的要求知之甚少，无法知道是否值得增加复杂性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T09:49:39.767

我不确定是否有一种简单的方法可以做到这一点，请注意它不适用于其他编码，在我的计算机上进行的测试表明这仅快 3 倍（我认为不值得） .

代码+测试：

```
class MainClass
{
    public static void Main(string[] args)
    {
        string str = "12341234";
        byte[] buffer = Encoding.ASCII.GetBytes(str);

        Stopwatch sw = Stopwatch.StartNew();
        for(int i = 0; i <   1000000 ;i ++)
        {
            long val = BufferToLong.GetValue(buffer);
        }
        Console.WriteLine (sw.ElapsedMilliseconds);
        sw.Restart();
        for (int i = 0 ; i < 1000000 ; i++)
        {
            string valStr = Encoding.ASCII.GetString(buffer);
            long val = long.Parse(valStr);
        }
        Console.WriteLine (sw.ElapsedMilliseconds);
    }
}

static class BufferToLong
{

    public static long GetValue(Byte[] buffer) {

        long number = 0;

        foreach (byte currentByte in buffer) {

            char currentChar = (char)currentByte;
            int currentDigit = currentChar - '0';

            number *= 10 ;
            number += currentDigit;

        }

        return number;
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T16:33:55.867

最后，我创建了 C# 版本的`strol`函数。这个函数是 CRT 自带的，CRT 的源代码是 Visual Studio 自带的。

结果方法与@Jon Skeet 在他的回答中提供的代码几乎相同，但还包含一些溢出检查。

在我的例子中，所有的改变在速度和内存方面都被证明是非常有用的。

# login - 防止多台机器同时登录

> ID：14412982
> 
> 赞同：0
> 
> 时间：2013-01-19T09:35:52.130
> 
> 标签：login

这是您需要智能卡才能登录应用程序的场景。有时您的应用程序可能处于离线状态（即没有互联网连接）。为此，我仍然可以让用户使用他的智能卡使用该软件，因为智能卡已在应用程序中注册（请记住：您只能在系统在线时将智能卡注册到您的应用程序。一旦智能卡已在您的应用程序中注册，即使您的系统处于脱机状态，您也可以访问/登录您的应用程序。）但我的问题是，如果用户在多台计算机上将智能卡注册到应用程序上，他将能够同时使用所有电脑同时。我想知道是否可以限制用户一次只能使用一台计算机/应用程序。当用户/系统上线时，该应用程序可能会在一天或一周内保存一次来自用户/系统的数据。但在这里应用程序将同步来自所有计算机的数据。我想阻止这种情况。这个问题的可能解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T09:42:42.517

您应该仅在在线时允许使用智能卡进行注册。当用户尝试在另一台计算机上注册时，请检查该用户之前是否已在另一台计算机上进行了身份验证。如果为假，则继续注册。如果属实，那么您将采用两种不同的方式。1.对方机器在线。从另一台机器注销并注册到新机器。2.对方机器不在线。在这台机器上注册应该是不可能的。

# python - Python3x 中的 'or' 和 'and' 求值

> ID：14412984
> 
> 赞同：-2
> 
> 时间：2013-01-19T09:36:02.940
> 
> 标签：python

我不明白为什么下面的代码会这样工作。（在 Python3x 中）

```
>>>f = lambda: print('Hello') or print('Hello again')

>>>f()

Hello

Hello again 
```

也不能这样理解。

```
>>>f = lambda: print('Hello') and print('Hello again')

>>>f()

Hello 
```

对我来说，第一个 lambda 函数似乎打印了单词“Hello”**或**单词“Hello again”，但它同时打印**了**“Hello”**和**“Hello again”。

第二个函数似乎打印了单词“Hello”**和**“Hello again”，但它只打印了“Hello”。

谁能解释这个 lambda 函数发生了什么？

感谢您的热心帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T09:37:57.937

`print`返回 None （这是 Falseish），因此 python 必须评估 的另一个操作数`or`，但不是`and`，才能得到答案。

*   `return print('Hello') or print('Hello again')`
*   `Hello`被打印，打印返回`None`
*   `return None or print('Hello again')`
*   `or`如果任何操作数为 True，则返回 True。如果第一个为 True，则无需评估第二个。事实并非如此
*   `Hello again`被打印
*   `return None or None`
*   现在我们确定 False 应该返回。

*   `return print('Hello') and print('Hello again')`
*   `Hello`被打印，打印返回`None`
*   `return None and print('Hello again')`
*   `and`如果两个操作数都为 True，则返回 True。如果第一个为 False，则无需评估第二个。
*   `return False`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T10:38:00.343

这称为惰性求值，这意味着 python 不会计算超出必要的值。在：

```
Expression1 or Expression2 
```

和

```
Expression1 and Expression2 
```

如果 Expression1 为 False，则在`or`比较的情况下，python 将需要 Expression2 的结果来计算结果，但`and`如果 Expression1 为 False，则无需计算比较的第二部分，`0 and x == False`无论 x is`True`或比较中`False` 的 2sd 函数 print`and`不需要计算，因为 python 已经知道比较将等于`False`

该`print`函数不返回任何内容即返回`None`

```
>>> def print2(string):
     print(string)
     return True

>>> r=(lambda: print2('Hello') or print2('Hello again'))()
Hello 
```

但是，这只会打印第一个 Hello（因为它是真的），而不会再打印 Hello

```
>>> r=(lambda: print2('Hello') and print2('Hello again'))()
Hello
Hello again 
```

要了解惰性求值，请尝试以下命令：

```
>>> def p():
     print("foo")
     return True

>>> False and p() and p()

False

>>> True and p() and p()

foo
foo
True

>>> True and (not p()) and p()

foo
False 
```

# xml - 使用 xml 显示图像

> ID：14412986
> 
> 赞同：0
> 
> 时间：2013-01-19T09:36:31.633
> 
> 标签：xml, image, windows-phone

我正在尝试制作使用 xml 显示所有图像的简单任务。但我不能完全完成这项任务。请帮助我...

**我的 xaml 代码：**

```
<ScrollViewer>
            <ListBox x:Name="imglist" Loaded="imglist_Loaded">
                <ListBox.ItemsPanel>
                    <ItemsPanelTemplate>
                        <toolkit:WrapPanel />
                    </ItemsPanelTemplate>
                </ListBox.ItemsPanel>
                <ListBox.ItemTemplate>
                    <DataTemplate>

                        <Image x:Name="img" Source="{Binding ImageUrl}" Width="160" Height="160"/>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </ScrollViewer> 
```

我的 xml 文件：

```
 <?xml version="1.0" encoding="utf-8" ?><Image ImageUrl = "C:/Users/USER 1/Documents/Visual Studio 2012/Projects/pinchimage/pinchimage/Butterfly.jpg"/>

  <Image   ImageUrl="C:/Users/USER 1/Documents/Visual Studio 2012/Projects/pinchimage/pinchimage/Desert.jpg"/>

  <Image    ImageUrl="C:/Users/USER 1/Documents/Visual Studio 2012/Projects/pinchimage/pinchimage/Field.jpg"/>
<images>

  <Image ImageUrl = "C:/Users/USER 1/Documents/Visual Studio 2012/Projects/pinchimage/pinchimage/Butterfly.jpg"/>

  <Image   ImageUrl="C:/Users/USER 1/Documents/Visual Studio 2012/Projects/pinchimage/pinchimage/Desert.jpg"/>
</images> 
```

**Manipage.xaml.cs**：

```
private void imglist_Loaded(object sender, RoutedEventArgs e)
        {
            var element = XElement.Load("Authors.xml");
            var authors = from var in element.Descendants("Image")
                          select new images
                          {
                              ImageUrl = GetImage(var.Attribute("ImageUrl").Value)
                          };
            imglist.ItemsSource = authors;
        }

        private ImageSource GetImage(string p)
        {
            return new BitmapImage(new Uri(p, UriKind.Relative));
        } 
```

**类文件：**

```
public class images
{
    public ImageSource ImageUrl { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T22:26:49.340

检查 XML 文件中的路径。`C:/Users/USER 1/Documents/Visual Studio 2012/Projects/pinchimage/pinchimage/`您的手机/模拟器上不存在。您应该提供指向应用程序包中的图像资源或内容文件的 URI，或者提供指向 Internet 上图像的 URL。IIRC，对于隔离存储中的图像，您需要手动代理它们（尽管我可能错了）。

# iphone - 在 iOS 应用程序中使用 .mdb 文件而不是 SQLite ？

> ID：14412987
> 
> 赞同：1
> 
> 时间：2013-01-19T09:36:33.860
> 
> 标签：iphone, ios, objective-c, sqlite, ms-access

我如何使用`.mdb file`而不是`SQLite`，我正在开发一个将加载和更新数据的项目`.mdb file`。我搜索它，但找不到任何东西，你可以指导我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T09:47:36.327

[MDB Tools 是一个开源项目](https://github.com/brianb/mdbtools)，旨在为 POSIX 系统带来对 Microsoft Access 专有 MDB 文件格式的支持。由于它是用纯 C 编写的，因此将这个项目集成到您的 iOS 应用程序中应该相当容易。（您应该专门研究它的`libmdb`部分。）

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-01-19T09:41:10.817

iOS API 不支持 .mdb。您应该将 .mdb 文件转换为 sqlite 文件以通过 iOS API 访问。

# xml - 我正在尝试验证 xml 架构文件，但给了我一个错误

> ID：14412988
> 
> 赞同：1
> 
> 时间：2013-01-19T09:36:38.920
> 
> 标签：xml, xsd

我正在使用 eclipse 来编辑和 XML 模式文件。我有两个文件，文件一和文件二。文件一似乎没问题，但是因为文件二引用了文件二（外键），所以我有这个错误。虽然从文件一的代码中可以看出`namespace`. 我需要一些帮助。

```
src-resolve.4.1: Error resolving component 'pk_Top_200_Queries2'.
It was detected that 'pk_Top_200_Queries2' has no namespace, 
but components with no target namespace are not referenceable 
from schema document 
'file:///C:/java/workspace2/HomeWork2/Clicked_and_pos_12.xsd'. 
If 'pk_Top_200_Queries2' is intended to have a namespace, perhaps 
a prefix needs to be provided. If it is 
intended that 'pk_Top_200_Queries2' has no namespace, then 
an 'import' without a "namespace" attribute should be added to 
'file:///C:/java/workspace2/HomeWork2/Clicked_and_pos_12.xsd'. 
```

**文件 1：名称 =Top_200_Queries2，架构如下**

```
<?xml version="1.0" encoding="UTF-8"?>
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema"
targetNamespace="http://www.example.org/Top_200_Queries2"
xmlns="http://www.example.org/Top_200_Queries2"
elementFormDefault="qualified">

<xsd:element name="T200Q">

<xsd:complexType>

<xsd:sequence>
<xsd:element name="t200q"  maxOccurs="200">
<xsd:complexType>
<xsd:sequence>

<xsd:element name="qid" type="xsd:string" />
<xsd:element name="query" type="xsd:string" />
<xsd:element name="count" type="xsd:integer" />
</xsd:sequence>
</xsd:complexType>
</xsd:element>
</xsd:sequence>
</xsd:complexType>
<xsd:key name="pk_qid">

<xsd:selector xpath=".//t200q" />
<xsd:field xpath="qid" />
</xsd:key>

</xsd:element>
</xsd:schema> 
```

字段 2 名称 = Clicked2.xsd

```
<?xml version="1.0" encoding="UTF-8"?>
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
targetNamespace="http://www.example.org/Clicked2"
xmlns="http://www.example.org/Clicked2" elementFormDefault="qualified">

<xsd:element name = "Clicked2">
<xsd:complexType>
<xsd:sequence>
<xsd:element name = "clicks" maxOccurs="unbounded">
<xsd:complexType>
<xsd:sequence>
<xsd:element name="qid" type="xsd:string"/>
<xsd:element name="uid" type="xsd:integer"/>
</xsd:sequence>
</xsd:complexType>
</xsd:element>
</xsd:sequence>
</xsd:complexType>

<xsd:key name="pk_Clicked2">
<xsd:selector xpath=".//clicks"/>
<xsd:field xpath="qid"/>
<xsd:field xpath="uid"/>
</xsd:key>
<xsd:keyref name="fk_contains_query" refer="pk_Top_200_Queries2">
<xsd:selector xpath=".//clicks"/>
<xsd:field xpath="qid"/>
</xsd:keyref>

<xsd:keyref name="fk_contains_url" refer="pk_URL">
<xsd:selector xpath=".//clicks"/>
<xsd:field xpath="uid"/>
</xsd:keyref>
</xsd:element>
</xsd:schema> 
```

这两个文件在eclipse中的同一个包中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T08:26:37.430

你提供了两个文件，你说它们的名字是`Top_200_Queries2`和`Clicked2.xsd`。乍一看，它们看起来不错。

您引用的错误消息没有提到这些文件名中的任何一个，而是提到了名为`pk_Top_200_Queries2`and的文件`Clicked_and_pos_12.xsd`。所以要问的第一个问题是：处理器实际上是在读取您希望它读取的文件，还是在读取其他一些模式文档？

# algorithm - 树中总和最大的路径

> ID：14412990
> 
> 赞同：0
> 
> 时间：2013-01-19T09:36:59.323
> 
> 标签：algorithm, tree, amazon, binary-tree

给定具有 -ve 和 +ve 值的二叉树。将所有路径的根节点打印到具有最大总和的任何节点。在 O(n) 中执行。只有一次遍历树。

努力:) 1) [http://www.geeksforgeeks.org/find-the-maximum-sum-path-in-a-binary-tree/](http://www.geeksforgeeks.org/find-the-maximum-sum-path-in-a-binary-tree/) 是完全不同的问题。

2) O(n) + O(n) 不被接受。

我的做法。

1)

i) 找到可能的最大总和。ii) 遍历保持当前路径和总和的前序。if(curr_sum == max_sum) 打印路径。

2) i) 找到可能的最大总和。ii) 遍历保持当前路径和总和的前序。if(curr_sum == max_sum) 打印路径。还将该节点的地址保存在节点数组 Arr 中。下次当 curr_sum==max_sum 时，如果路径已经打印，只需检查 Arr[]

问题：这将多次打印一些路径。面试官想要一次遍历。这需要 2\. 一个来找到 max sum 。其他打印路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T09:42:51.457

在树上进行深度优先搜索，计算所有子路径的总和，并将它们存储在包含等长子路径的列表的排序数组中。很容易看出，这可以在 O(n) 中完成，只遍历图一次。

结果是一个数组`a`，其中`a[i]`包含长度为路径的列表`i`。记录最大索引`j`并最终打印列表中的所有路径`a[j]`。

# asp.net - 由于 EndpointDispatcher 的 AddressFilter 不匹配，无法在接收方处理

> ID：14412996
> 
> 赞同：5
> 
> 时间：2013-01-19T09:37:23.237
> 
> 标签：asp.net, wcf, c#-4.0, asp.net-ajax, wcf-binding

我正在使用启用 ajax 的 WCF，当我在 Web 浏览器中打开 url 时出现此错误。

> 由于 EndpointDispatcher 的 ContractFilter 不匹配，接收方无法处理带有 Action ' [http://localhost:22219/MobileService.svc/GetProductCategories ' 的消息。](http://localhost:22219/MobileService.svc/GetProductCategories)这可能是因为合约不匹配（发送方和接收方之间的操作不匹配）或发送方和接收方之间的绑定/安全不匹配。检查发送方和接收方是否具有相同的合同和相同的绑定（包括安全要求，例如消息、传输、无）。

移动服务代码如下

```
namespace MobileService
{
    [ServiceContract(Namespace = "")]
    [AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
    public class MobileService
    {
        // To use HTTP GET, add [WebGet] attribute. (Default ResponseFormat is WebMessageFormat.Json)
        // To create an operation that returns XML,
        //     add [WebGet(ResponseFormat=WebMessageFormat.Xml)],
        //     and include the following line in the operation body:
        //         WebOperationContext.Current.OutgoingResponse.ContentType = "text/xml";
        [OperationContract]
        public void DoWork()
        {
            // Add your operation implementation here
            return;
        }
        [OperationContract]
        [WebInvoke(Method = "POST", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.Wrapped, UriTemplate = "GetProductCategories")]
        public List<String> GetProductCategories()
        {
            List<String> categoryList = new List<string>();

            categoryList.AddRange(new String[] { "Electronics", "Housewares", "Computers", "Software", "Music" });

            return categoryList;
        }
        // Add more operations here and mark them with [OperationContract]
    }
} 
```

和服务 web.config 文件是

```
<?xml version="1.0"?>
<configuration>

  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>

    <behaviors>
      <endpointBehaviors>
        <behavior name="MobileService.MobileServiceAspNetAjaxBehavior">

        </behavior>
      </endpointBehaviors>
    </behaviors>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true"
      multipleSiteBindingsEnabled="true" />
    <services>
      <service name="MobileService.MobileService">
        <endpoint address="" behaviorConfiguration="MobileService.MobileServiceAspNetAjaxBehavior"
          binding="webHttpBinding" contract="MobileService.MobileService"  />
      </service>
    </services>
  </system.serviceModel>
 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>

</configuration> 
```

任何人都可以在我犯错的地方帮助我。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-19T15:25:41.970

您需要端点的`<webHttp/>`端点行为。如果您添加它（见下文），它应该可以工作。

```
 <endpointBehaviors>
    <behavior name="MobileService.MobileServiceAspNetAjaxBehavior">
      <webHttp/>
    </behavior>
  </endpointBehaviors> 
```

# javascript - 如何从外部 .js 文件调用代码中的函数

> ID：14412997
> 
> 赞同：0
> 
> 时间：2013-01-19T09:37:25.423
> 
> 标签：javascript, asp.net

我正在用 dotnet 开发一个网站。

```
//function to close SearchSchool.aspx
function CloseSchoolSearch()    
{
    //storing values
    window.close();
    //call function in code behind
} 
```

这是一个外部 .js 文件中的 javascript 函数，使用这个函数我在 aspx 页面的一些隐藏控件中存储一些值并关闭弹出窗口，之后我想在后面的代码中执行一个函数。并提醒一件事，我不能包含这个函数.aspx页面包含我想调用的那个方法。谁能指导我如何做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T09:50:46.317

据我了解这个问题，您在谈论两件非常不同的事情。.ASPX 页面在服务器上呈现，而 javascript 代码在客户端呈现。

让您从 JS 的 aspx 页面调用函数意味着您需要调用服务器以呈现您的页面，这是您在调用中提到的参数的其他方式。

只有这样，服务器才会重新渲染页面（也可以是 ajax）并调用这些方法。

除此之外，服务器端代码不会发送到客户端。

**在客户端：**

您可以使用任何框架或实现自己的框架。为简单起见，我将使用 jquery

> ```
> /* attach a submit handler to the form */
>  $("#form_name").submit(function(event) {
> /* stop form from submitting normally */
> event.preventDefault(); 
> ```

```
/* get some values from elements on the page: */
    url ="<server url>";

var $inputs = $('#form_name :input');

var dataString="";
$inputs.each(function() {
    if (this.type != "submit" && this.type != "button")
    dataString += (this.name +"="+ $(this).val() +"&").trim();

});

/*Remove the & at the end of the string*/
dataString = dataString.slice(0, -1);

/* Send the data using post and put the results in a div */
$.post( url, dataString,
  function( data ) {
  }
); 
```

序列化函数也可以工作，只需添加其输出而不是 dataString。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T09:43:18.483

我了解您想使用`<script></script>`从外部加载的`.js`文件调用 HTML 页面内定义的 javascript 函数。

只需确保在加载外部 JS 时内部 javascript 函数可用。

如果要调用`localFoo()`HTML 代码中定义的函数，请执行以下操作：

```
// Check for the function availability
if(typeof localFoo != undefined) {
    localFoo(arg);
} 
```