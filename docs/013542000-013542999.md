# StackOverflow 问答 13542000-13542999

# ruby - 捆绑安装损坏了我的 Gemfile.lock

> ID：13542003
> 
> 赞同：0
> 
> 时间：2012-11-24T14:11:26.350
> 
> 标签：ruby, gem, bundler

我有一个[rapidshare-ext](https://rubygems.org/gems/rapidshare-ext) gem，它依赖于[rapidshare](https://rubygems.org/gems/rapidshare) gem。在我的 Gemfile 中有一个 gem 条目：

```
gem 'rapidshare-ext', '0.0.5' 
```

在我的 Gemfile.lock 中，我看到了整个 gem 依赖项：

```
...
rapidshare (0.5.3)
  activesupport (~> 3.2.8)
  curb (~> 0.8.1)
  progressbar (~> 0.11.0)
  rake (~> 0.9.2)
rapidshare-ext (0.0.5)
  rapidshare (~> 0.5.3)
  rest-client (~> 1.6.7)
... 
```

一切正常。尝试将 gem 版本更新到 0.0.6：

```
gem 'rapidshare-ext', '0.0.6' 
```

在我运行**bundle install**之后Gemfile.lock 看起来像：

```
...
rapidshare-ext (0.0.6)
... 
```

所有像 rapidshare、rest-client 之类的依赖都消失了，gem 变成了不工作（需要丢失路径）。如果我删除 Gemfile.lock 然后**再次运行 bundle install**一切都会好起来的。我该如何解决这种行为？**bundle update rapidshare-ext**给出了相同的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T16:29:06.787

也许 ruby​​gems/bundlers 依赖项检查 API 有问题我用 ruby​​gems 源替换了，一切正常

`source "http://bundler-api.herokuapp.com"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T16:40:08.927

Shitirlic 是对的 Bundler 坏了，看看这个 [http://hone.heroku.com/bundler%20heroku/2012/10/22/rubygems-and-the-dependency-api.html](http://hone.heroku.com/bundler%20heroku/2012/10/22/rubygems-and-the-dependency-api.html)

# c# - 使用 Unicode 字符创建快捷方式

> ID：13542005
> 
> 赞同：4
> 
> 时间：2012-11-24T14:11:35.320
> 
> 标签：c#, winapi

我正在使用 IWshRuntimeLibrary 使用 c# 创建快捷方式。快捷方式文件名是印地语“नमस्ते”。

我正在使用以下代码我的片段来创建快捷方式，其中`shortcutName = "नमस्ते.lnk"`

```
 WshShellClass wshShell = new WshShellClass();
 IWshRuntimeLibrary.IWshShortcut shortcut;

shortcut = (IWshRuntimeLibrary.IWshShortcut)wshShell.CreateShortcut(destPath + "\\" + shortcutName);

 shortcut.TargetPath = sourcePath;
 shortcut.Save(); 
```

在`shortcut.Save()`我得到以下异常。

```
The filename, directory name, or volume label syntax is incorrect. (Exception from HRESULT: 0x8007007B) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T15:12:03.597

您可以判断调试器出了什么问题。检查调试器中的“快捷方式”并注意您的印地语名称已被问号替换。这会产生无效的文件名并触发异常。

您正在使用一个无法处理字符串的古老脚本支持库。您需要使用更新的东西。项目 + 添加引用，浏览选项卡并选择 c:\windows\system32\shell32.dll。这会将 Shell32 命名空间添加到您的项目中，并带有一些接口来执行与 shell 相关的工作。ShellLinkObject 接口足以让您修改 .lnk 文件的属性。需要一个技巧，它无法从头开始创建新的 .lnk 文件。您可以通过创建一个空的 .lnk 文件来解决这个问题。这很好用：

```
 string destPath = @"c:\temp";
    string shortcutName = @"नमस्ते.lnk";

    // Create empty .lnk file
    string path = System.IO.Path.Combine(destPath, shortcutName);
    System.IO.File.WriteAllBytes(path, new byte[0]);
    // Create a ShellLinkObject that references the .lnk file
    Shell32.Shell shl = new Shell32.Shell();
    Shell32.Folder dir = shl.NameSpace(destPath);
    Shell32.FolderItem itm = dir.Items().Item(shortcutName);
    Shell32.ShellLinkObject lnk = (Shell32.ShellLinkObject)itm.GetLink;
    // Set the .lnk file properties
    lnk.Path = Environment.GetFolderPath(Environment.SpecialFolder.System) + @"\notepad.exe";
    lnk.Description = "nobugz was here";
    lnk.Arguments = "sample.txt";
    lnk.WorkingDirectory = Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments);
    lnk.Save(path); 
```

# c++ - 为自定义向量类重载 operator[]

> ID：13542007
> 
> 赞同：2
> 
> 时间：2012-11-24T14:11:53.573
> 
> 标签：c++, vector

我正在创建一个类似于向量的类。它使用自己的算法来确定数据的实际存储位置和方式。从用户的角度来看，它就像法线向量一样工作。

在内部，它尝试通过不多次存储重复值来节省内存。如果多次将相同的值推送到向量上，它会使用索引执行一些花哨的舞蹈动作，但只存储一次实际值。

重载 operator[] 时，索引参数将转换为“真实”索引，以便它可以访问实际存储数据的位置。

如果用户尝试访问这样的元素：

```
int i = svec[8]; 
```

通过将 8 转换为“真实”索引并访问正确的元素来返回正确的元素。

当用户尝试像这样分配值时，问题就出现了：

```
svec[8] = 1; 
```

值 8 将再次被“真实”索引覆盖，并且对元素的引用由`operator[]()`. 但是，多个索引可能映射到该元素。如果我返回一个引用并允许对其进行更改，则会产生更改其他索引值的不良副作用。

如果我只是按值返回元素，您将无法使用 operator[] 分配值。

在`operator[]()`中，我想知道一个操作是否计划更改元素的值，以便我可以创建一个新元素，使用索引做一些更花哨的舞蹈动作，并返回对新元素的引用。

这样的事情可能吗？如果不是，似乎我被迫按值返回，从而阻止用户使用 [] 修改值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T14:23:07.967

如果这个类有一个方法`change_element`并且每个人都在更改时调用这个函数，那将很容易，不是吗？

```
template <typename T>
struct my_vec {
  T& change_element(int index, T new_value)
  { ... }
}; 
```

现在，我们的想法是返回一个代理类，`operator[]`它会为您完成这项工作。

```
 // inside my_vec:
  struct proxy {
    my_vec *vec;
    int index;

    T& operator=(T o)
    { return vec->change_element(index, std::move(o)); }

    operator T() const { return (*const_cast<my_vec const*>(vec))[index]; }
  };

  proxy operator[](int i) { return proxy{this, i}; }
  T const& operator[](int i) const { ... } 
```

没有开销，每个常见的编译器都应该优化代理元素。

这个技巧甚至在 STL 中被`vector<bool>`. 查看这个以获得更完整的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T14:16:25.880

您可以返回一个类，该类具有类型的转换运算符和一个通知向量元素需要更改的赋值运算符。

# php - mysqli 参数错误

> ID：13542008
> 
> 赞同：1
> 
> 时间：2012-11-24T14:11:56.673
> 
> 标签：php, mysqli

它没有显示任何东西

```
 $db =  new  mysqli(MYSQL_SERVER,MYSQL_USER,MYSQL_PASSWORD,DATABASE_NAME);

    $query = 'SELECT * FROM `user` WHERE `username` = ? AND `password` = ?';

    if($stmt = $db->prepare($query))
    {
        $stmt->bind_param('ss', $username, $password);
        $stmt->execute();
        $returned_name = '';
        $returned_pass = '';
        $stmt->bind_result($returned_name,$returned_pass);
        while($stmt->fetch()){
            echo $returned_name;
        }
        $stmt->close();
    }
} 
```

# javascript - 使用javascript刷新时更改html背景

> ID：13542009
> 
> 赞同：3
> 
> 时间：2012-11-24T14:11:56.273
> 
> 标签：javascript, html, css, background-image

我想在每次刷新时更改我的 html 的背景图像。

这就是我在我的 CSS 中得到的

```
html { 
    background-repeat:no-repeat;
    background-position:center center;
    background-attachment:fixed; 
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
} 
```

这就是我用 javascript 得到的（在一个单独的 js 文件中）：

```
var totalCount = 6;
function ChangeBackground()
{
var num = Math.ceil( Math.random() * totalCount );
document.body.parentNode.background = 'background/test/'+num+'.jpg';

} 
```

我在我的 html 末尾调用我的函数：

```
<script type="text/javascript">
ChangeBackground();
</script> 
```

我无法使用我拥有的 javascript 代码在 html 标记上添加背景。还有其他方法吗？

我希望它专门在 html 标签上，因为我认为那更好：

> 多亏了 CSS3 中的 background-size 属性，我们可以纯粹通过 CSS 来做到这一点。我们将使用 html 元素（比 body 更好，因为它总是至少是浏览器窗口的高度）。我们在其上设置了一个固定且居中的背景，然后使用设置为 cover 关键字的 background-size 调整其大小。

[http://css-tricks.com/perfect-full-page-background-image/](http://css-tricks.com/perfect-full-page-background-image/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T16:29:29.060

尝试将`background-image`样式属性值设置为 url 而不是直接指定链接

即：使用`document.body.parentNode.style.backgroundImage = 'url(background/test/'+num+'.jpg)';`而不是`document.body.parentNode.background = 'background/test/'+num+'.jpg';`

JSFiddle：http: [//jsfiddle.net/HHeKK/](http://jsfiddle.net/HHeKK/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T14:14:26.193

### 您不能为`<html>`标签添加背景！

以这种方式更改您的代码：

```
document.body.style.backgroundImage = 'background/test/'+num+'.jpg'; 
```

# c# - 控制台托管 WCF 服务 Http 在 mono 和 IIS 下可访问

> ID：13542013
> 
> 赞同：2
> 
> 时间：2012-11-24T14:12:11.910
> 
> 标签：c#, wcf, apache, iis, mono

我目前正在从事一个项目并尝试了解 WCF Web 服务。

我有一个托管 WCF 服务的控制台应用程序。`<baseAddress>`我在 App.config 文件的部分中添加了应该可以访问的 URL 。当我在 Visual Studio 中以调试模式运行控制台应用程序时，我会弹出一个说`your services have been hosted`.

如果我在 Visual Studio 之外运行我的应用程序并转到我无法连接的 URL，我猜我需要进行一些配置以使其工作但找不到我需要做的事情。

我有两个问题，如何让托管在控制台应用程序中的 WCF 服务可以通过 http:// 使用 IIS for Windows 访问，并使用 Mono C# 和 Apache Web 服务器使其可用。

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T19:17:24.267

**在 IIS 中托管 - 用于测试**

要在 IIS 中托管服务，您需要创建一个虚拟目录。有两种方法可以做到这一点：

为了方便测试：

*   在 Visual Studio 中右键单击您的 WCF 服务项目，选择 Properties / Web
*   在那里选择“使用本地 IIS Web 服务器”。
*   不要启用“使用 IIS Express”。
*   项目 URL 是您的服务器应该在网络上可见的地址，即。`http://yourhost/somepath/`
*   单击“创建虚拟目录”（您可能需要以管理员身份运行 Visual Studio，但这一步只需要一次，日常使用不需要管理员权限）。

之后，您的虚拟目录设置完毕，IIS 会将所有请求定向`http://yourhost/somepath`到您的 WCF 服务。请注意，这将指向项目目录中 Visual Studio 生成的二进制文件，因此重建将自动进行。

这是最简单的开发和测试选项，您甚至不需要打开 Visual Studio，但您所做的任何更改都会自动反映到已部署的实例中。

**在 IIS 中托管 - 用于生产**

对于生产，您需要创建一个真实的虚拟目录。要做到这一点：

*   创建一个应该托管您的服务的目录，例如 `C:\inetpub\yoursite\yourservice\'，这可以是文件系统上的任何目录。
*   将您的 Web 服务复制到此目录中（Visual Studio 有某种方法可以自动执行此操作，尽管我从未使用过，所以不知道它是如何工作的）。
*   打开“Internet Information Services (IIS) Manager”（需要以管理员身份运行）
*   在左侧窗格中，您将配置 IIS 实例和站点。如果您第一次运行此程序并且左侧窗格为空（应该有一个默认站点），只需右键单击并选择“添加网站”。
*   右键单击您的网站，选择“添加虚拟目录”。别名是新目录的可见名称，例如`http://yoursite/alias/`，物理路径仅指向您将服务部署到的目录。

**自托管**

您的控制台应用程序称为自托管。如果这在 Visual Studio 之外不起作用，那么您的`app.config`. 我[这里](https://github.com/baulig/Provcon-Faust/tree/master/TestWCF/ServiceHost)有一个简单的例子。

**使用 Mono 托管**

对于 Mono，您有三个选择：

1.  自托管
2.  用于生产的带有 mod-mono 的 Apache
3.  带有 mod-mono 的 Apache 使用当前目录进行测试

自托管意味着创建一个简单的控制台应用程序来做一些事情

```
var host = new System.ServiceModel.ServiceHost(typeof(MyService));
host.Open();
Console.WriteLine("Service running");
foreach (var se in host.Description.Endpoints)
    Console.WriteLine(se.Address);
Console.ReadLine();
host.Close(); 
```

并在命令行上使用 Mono 运行它。

有关如何使用 mod-mono 设置 apache 的信息，请参阅[无法使用 mod-mono 访问托管在 Apache 中的 WCF 服务，包括一些示例。](https://stackoverflow.com/questions/13495559/cannot-access-wcf-service-hosted-in-apache-with-mod-mono/13498841#13498841)

您在这里还有两个选择：将您的服务复制到 Apache 选择的某个目录中 - 或者您也可以`mod-mono-server`手动启动并指定任意目录，例如用于测试的当前目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T16:09:55.297

您不能在 IIS 中托管控制台应用程序，您应该在 IIS 中创建 WCF 服务（Wab 应用程序中的 .svc 文件）。IIS 将运行并托管您的服务。当 IIS 托管您的服务时，URL 是 iis 中 .svc 文件的路径（如网站）。此外，如果您使用 basicHttpBinding，它应该可以从任何使用基于 ASMX 的 Web 服务的平台获得。

# internet-explorer - IE开发者工具的结果栏中的灰线是什么意思？

> ID：13542018
> 
> 赞同：-2
> 
> 时间：2012-11-24T14:12:57.207
> 
> 标签：internet-explorer, ie-developer-tools

![在此处输入图像描述](../Images/c4be9d79fb1fb47520bc0c8d01ee3e2c.png)

*   响应来自缓存
*   HTTP 代码 304（不管响应来自缓存还是服务器）
*   别的东西

**编辑：**更改标题和屏幕以阐明“灰线”的含义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T17:57:35.820

我整天都在试验这个，因为我的 Web 应用程序中的浏览器缓存有问题。

从我看到的 HTTP 状态码在`304`. 但是，IE 有点愚蠢，因为这可能意味着在开发人员工具中不容易区分的 2 个不同的东西：

*   浏览器向服务器发出请求，服务器回复了`304 Not Modified`响应
*   浏览器没有请求，因为它确定缓存中的副本仍然有效，它直接使用缓存的结果

在第二种情况下，您不能相信详细视图中显示的内容，因为请求和响应标头+内容随后由存储在缓存中的数据组成，而不是来自实际请求。具体来说，如果`Expires`“Response headers”选项卡中有header，实际上是从缓存的数据中计算出来的（比如可以从`Cache-Control: max-age=xx`header中计算出来，`Cache-Control`header就不会出现在列表中）

~~我认为您可以区分这两种情况：似乎当“Taken”时间为“<1ms”时，很可能使用了缓存。如果是其他任何东西，很可能是提出了实际请求。~~

上面的部分是错误的，忽略它。

其他浏览器（如 Firefox 和 Chrome）在其开发人员工具中正确执行此操作：仅使用浏览器缓存处理的请求被注释为“来自缓存”。

我希望这可以帮助你，因为我已经失去了几个小时试图弄清楚 IE 在做什么。此信息仅从我使用具有默认设置的 IE 9、本地 JBoss 网络服务器的观察中扣除，并且在对静态文件的任何 HTTP 请求中都可以看到这种现象：JS、CSS ... 图像似乎没有出现在开发人员工具中当它们被加载一次时再次（会话缓存？）

有关浏览器缓存的一般信息，我建议阅读：[http ://www.f5.com/pdf/white-papers/browser-behavior-wp.pdf](http://www.f5.com/pdf/white-papers/browser-behavior-wp.pdf)

[编辑：我在这里](https://stackoverflow.com/questions/8936284/browser-caching-why-does-ie9-always-show-http-304-when-actually-it-did-not-hit)找到了另一个讨论这个的话题。它证实了我自己所注意到的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T14:29:14.143

### HTTP 错误 304 - 未修改

这并不真正表示错误，而是表示请求的 URL 的资源自上次访问或缓存后没有更改。只有在客户端（例如您的`304`Web 浏览器）允许时才应返回状态代码。客户端在发送到 Web 服务器的 HTTP 数据流中指定这一点，例如通过`If_Modified_Since`请求中的标头。

缓存或索引 Web 资源（如搜索引擎）的系统通常使用`304`响应来确定他们之前为特定 URL 收集的信息现在是否已过时。

### 更多信息：[HTTP 错误 304 - 未修改](http://www.checkupdown.com/status/E304.html)

# jquery - jQuery .on() 中第二个选择器的目的是什么？

> ID：13542020
> 
> 赞同：0
> 
> 时间：2012-11-24T14:13:23.743
> 
> 标签：jquery

既然你打电话`$('mySelector').on('myEvent', 'mySecondSelector'),`我不明白使用`"mySecondSelector"`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T14:20:08.893

第二个选择器是***目标***。`on()`在运行代码时目标可能不存在的情况下，此语法可以用作委托方法

假设这个标记

```
<ul id="list">
    <li class="item">Item</li>
</ul> 
```

您可以将点击处理程序添加到`item`类：

```
$('.item').on('click',doSomething); 
```

但是如果我们现在添加一个新项目到列表中

```
$('#list').append(' <li class="item">Item</li>'); 
```

**调用单击处理程序时此新项目不存在，因此不会将事件处理程序绑定到它**

相反，我们使用主要的 ul 或任何其他永久祖先，`document`因为它始终存在并以项目为目标

```
$('#list').on('click', '.item', doSomething); 
```

将其解释为： **当点击时`#list`，如果点击的目标是`.item`，则运行处理程序，否则不执行任何操作**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T14:23:03.553

如果您有一个包含多个子元素的元素，如果您不指定第二个选择器，那么无论您单击哪个子元素，都会触发该事件。如果您指定它，则仅当您使用该选择器单击选定元素时才会触发该事件。

例如，您可能有：

```
<div id="clickable">
    <div id="fireEvent">Example</div>
    <div id="dontFireEvent">Example</div>
    <div id="fireEvent"></div>
</div> 
```

现在，如果您拨打电话，`$('#clickable').on('myEvent');`无论您在该区域的哪个位置单击，该事件都会触发。

但是，如果您调用，`$('#clickable').on('myEvent','#fireEvent');`事件只会在您单击第一个和第三个 div 时触发（具有 'fireEvent' 的 id 的那些。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T14:29:35.553

在 jQuery 1.7x 中`.on()`添加了该方法。

要回答你的问题，我需要先解释一下为什么要添加它。早些时候有（并且仍然被你贬低了）方法`.live()`，例如不断监视 DOM 以查找与选择器匹配的元素。因此，在每次 DOM 更改（无论是插入、重新排列、删除等）时，侦听器都会处于活动状态，并试图查看它需要附加委托的内容。

想象一个带有容器和 1000 个子元素的页面。现在，子元素不断变化（主要是由于 Ajax），您需要将`.click()`事件绑定到每个子元素。这曾经消耗大量处理并且性能相当差。

输入`.on()`方法。基本上，这两个选择器用于：

第一个选择器 -加载 DOM 后**不应更改**`parent`的元素

 **第二个选择器 - 作为`child`您正在编写的方法的实际目标的元素，即使在加载 DOM 之后，它也可能来自第一个选择器。

为了广泛使用，许多人使用 `.on()' 之类的

```
$(body).on("click", "#mydiv", function(){
    // do something
}); 
```

这通常没问题，因为 DOM 通常不是很大。然而，它的作用是：它告诉 jQuery 观察`body`DOM 中的元素并查找其中的所有`#mydiv`元素。当您有 1000 个子元素被操作时，与旧方法没有太大区别。

因此，使用时`.on()`请尽量使第一个选择器包含第二个选择器元素，而不是进一步向上 DOM。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T14:16:13.467

```
$('mySelector').on('myEvent', 'mySecondSelector') 
```

> **我的第二选择器**：
> 
> 一个选择器字符串，用于过滤将调用处理程序的选定元素的后代。如果选择器为 null 或省略，则处理程序总是在到达所选元素时被调用。

有关详细信息，请参阅**[On()](http://api.jquery.com/on/)****

# web-services - REST DELETE 表单字段？

> ID：13542022
> 
> 赞同：1
> 
> 时间：2012-11-24T14:13:48.083
> 
> 标签：web-services, rest

执行 REST POST 和 PUT 时，您可以将表单字段值作为请求的一部分。

据我了解，REST DELETE（和 PUT）通过 URI 标识资源。在执行 REST DELETE 时还包括表单字段值是否有意义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T14:32:09.520

首先，当您 PUT 或 POST 数据时，您可能支持`application/x-www-form-urlencoded`（表单数据）以外的表示。例如，您可以发送整个实体并将其表示为 JSON 对象。您可以在请求中发送任何类型的数据。无论是表单数据还是其他。

回到你的问题。您可以在删除请求中发送数据。最初，我想不出它有多大用处，但是如果您在服务器端实现了乐观锁定方案，那么使用删除请求发送数据可能会很有用，这样服务器就可以检测客户端是否正在尝试工作关于过时的数据。

# google-app-engine - Google App Engine Mapreduce 查询

> ID：13542026
> 
> 赞同：-3
> 
> 时间：2012-11-24T14:14:00.513
> 
> 标签：google-app-engine, mapreduce, distributed-computing

所以，我想知道如何让这个问题在 Google App Engine mapreduce 框架上运行，或者实际上是否可以让它运行。所以我有一个输入文件，它被分成多个部分并存储在谷歌云中。现在我想在所有拆分的部分上运行相同的 Python 代码，然后将其按顺序组合回一个输出文件。如果我在输入文件上运行我的代码而不将其拆分，则大约需要 20 分钟。

我基本上不了解 map-shuffle-reduce 模型。如果有人可以向我解释，那就太好了。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T14:37:53.573

有一个很好的演讲`Google I_O 2012`：**Google Compute Engine 简介，您可以**[在 YouTube 上](http://www.youtube.com/watch?v=0-sF5ZWB_FY)轻松找到它，它解释了所有细节以及如何设置以及如何获得结果。

# assembly - Intel 8080：内存偏移计算

> ID：13542028
> 
> 赞同：1
> 
> 时间：2012-11-24T14:14:16.083
> 
> 标签：assembly, emulation, bit-manipulation, intel-8080

我正在阅读有关 Intel 8080 emulation [Emulator 101](http://www.emulator101.com/)的指南，当我阅读代码以检查我写的内容时，我偶然发现了这个

```
case 0x36:      //MVI   M,byte
{                   
//AC set if lower nibble of h was zero prior to dec
uint16_t offset = (state->h<<8) | state->l;
state->memory[offset] = opcode[1];
state->pc++;
}
break; 
```

从一本名为 Intel 8080/8085 Assembly Language Programming 的书中，我读到了 MVI 这个

> 该指令将存储在其第二个字节中的数据复制到由 H 和 L 寻址的内存位置。M 是对 H 和 L 寄存器对的符号引用。

所以我猜测偏移量是 H 和 L 寻址的内存位置，但我们为什么要这样做呢？那是`(state->h<<8) | state->l`

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T14:31:20.617

> << 和 | 的组合如何？给我们 16 位偏移量？

以`H`8 位寄存器为例，其中 H [7]是最高有效位，H [0]是最低有效位：

```
H 7 H 6 H 5 H 4 H 3 H 2 H 1 H 0
```

以`L`8 位寄存器为例，其中 L [7]是最高有效位，L [0]是最低有效位：

```
L 7 L 6 L 5 L 4 L 3 L 2 L 1 L 0
```

您现在想要构造由（最高 8 位）和（最低 8 位）组合产生的 16 位偏移量`H`。在C **/** **C** ++/Java 中，这可以通过左移 8 位后跟按位或如下：`L`**`<<``|`**

 **```
H =   H 7 H 6 H 5 H 4 H 3 H 2 H 1 H 0 
H<<8 = H 7 H 6 H 5 H 4 H 3 H 2 H 1 H 0 0 0 0 0 0 0 0 0 
H<< 8|L = H 7 H 6 H 5 H 4 H 3 H 2 H 1 H 0 L 7       [[[[[[[[[[[[[[[[[[[[[[[[L [6] L [5] L [4] L [3] L [2] L [1] L [0]]]]]]]]]]]]]]]]]]]]]]]]] 
```**

# android - 如何在android中控制多个聊天活动？

> ID：13542029
> 
> 赞同：2
> 
> 时间：2012-11-24T14:14:16.630
> 
> 标签：android, asmack

对不起，我的问题很长，但我需要解释一下。

我正在使用 asmack API 开发 android 聊天客户端。我已经建立了联系，可以和朋友聊天。现在我将其更改为 GUI 客户端，并希望拥有用户可以与多个朋友聊天的功能。这意味着如果两个聊天活动打开，一个将处于活动状态，一个将处于暂停状态。我需要一些想法如何添加用户可以同时与多个用户聊天的功能。我是否需要实现一些后台服务来与暂停的活动进行通信，或者这可以通过其他方式实现？

如果我需要实现后台服务，该服务的功能是什么？如果我走错了路，请指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T14:35:48.013

整个聊天系统应该与 UI 分离。UI 应该简单地“绑定”到聊天“流”以发送/接收数据。这将让您在聊天之间切换，这些“隐形”聊天仍然可以接收来自您的各方的消息。此外，即使应用程序处于“后台”，您也希望您的应用程序能够接收消息，因此实际上没有任何其他选择。更不用说这种方法将帮助您构建具有多个可见聊天的平板电脑的 UI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-03T04:54:43.107

是的，您可以使用长期运行的服务。我实际上扩展了 Application 类，它的生命周期比 Service 类短得多，但由于移动环境中带宽/连接性/电池的限制，我不需要它来维持持久连接。

为了解决这个问题，我使用广播接收器和谷歌 GCM API 来接收离线通知。

显然，您还必须实现自己的内部 Intent 服务，以便在聊天到达时通知活动。

希望这可以帮助

# git - 如何隐藏/加密部分 GIT 历史？

> ID：13542040
> 
> 赞同：1
> 
> 时间：2012-11-24T14:15:09.967
> 
> 标签：git, security, encryption

我将为一个项目招募一些开发人员。如果可能的话，我想继续使用 git repo，但我不想让部分历史可访问（通过加密），这样只有我可以访问它。原因是我在头脑中清除了历史记录中的某些专有信息，例如我在开发过程中硬编码到应用程序中的帐户密码。我不希望任何其他开发人员在没有某种形式的身份验证的情况下看到这一点。

显而易见的解决方案是在此基础上创建一个新的存储库，但如果可能的话，我想保留完整的历史记录，因为它有我可能想在以后使用的分支。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T15:23:01.930

如果是 Git 存储库，您不能只隐藏部分历史记录；由于 Git 的工作方式，每次提交都包括先前提交的哈希，为了使用 Git 存储库，您需要拥有完整的历史记录。

但是，您确实有一些选择。一种方法是使用当前内容启动一个新存储库，并保留旧存储库。然后，您可以为需要访问旧历史记录的任何人提供旧存储库。您仍然可以查看两个存储库的完整历史记录。为此，您可以为每个新旧仓库添加遥控器，然后使用[`git replace`](http://www.kernel.org/pub/software/scm/git/docs/git-replace.html)将旧仓库的最后一次提交附加到新仓库的第一次提交上。[有关更多详细信息，请参阅此问题](https://stackoverflow.com/questions/5724522/creating-github-repository-with-only-a-subset-of-a-local-repositorys-history)的答案。

另一种选择是过滤历史记录。您可以使用[`git filter-branch --tree-filter`](http://www.kernel.org/pub/software/scm/git/docs/git-filter-branch.html)在历史记录中的每次提交上运行脚本，该脚本将所有密码实例替换为“密码”之类的内容。这将保留完整的历史记录，尽管您的所有提交都会获得新的提交 ID。[有关更多详细信息，请参阅此问题](https://stackoverflow.com/questions/2110595/redaction-in-git)的答案。

Both of these options will allow you to keep your full history, while not revealing your passwords. One thing to keep in mind if that they will change the actual commit IDs so you will need to make sure all of your working repositories are checked out from the new ones, not the old, or you could accidentally push the old history to one of your new repos. I would recommend changing any passwords that are in the old repo just in case, since once they are there, it may be easy to accidentally reveal them.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T15:21:16.677

由于 git 数据模型，这实际上是不可能的。但是，您可以尝试什么：

1.  识别所有处理此类敏感数据的提交。

2.  为这些提交做一个 git rebase -i （取决于你的仓库大小，这个交互式 rebase 可以像数千个提交一样深）并将这些提交放在 HEAD 之上

3.  重置那些提交

4.  用力推

（这*会改变*历史，但如果做得正确只会影响 sha 数字）

你需要对所有分支都这样做，这很快就会失控。这就是为什么我会接受 Gumbo 更改密码的建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T14:52:52.493

我不确定这是最好的解决方案，但如果是我，我会创建一个新的 repo 并在它们之间进行集成。Github 已经在很大程度上使这变得更容易。

# jquery - jQuery理想形式不起作用

> ID：13542041
> 
> 赞同：0
> 
> 时间：2012-11-24T14:15:12.400
> 
> 标签：jquery, html, css

任何人都可以帮助我使用这个插件吗？我已经阅读了文档，据我所知，代码是最好的。谁能告诉我怎么了。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--[if IE 8]> <html class="ie8" lang="en"> <![endif]-->
<!--[if IE 9]> <html class="ie9" lang="en"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html lang="en"> <!--<![endif]-->

<head>
<title>Test Ideal Form</title>
<link media="screen" type="text/css" rel="stylesheet" href="css/jquery.idealforms.min.css">
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript" src="jquery/jquery.idealforms.min.js"></script>
</head>
<body>
<script>
  var $myform = $('#my-form').idealforms(options).data('idealforms');
</script>
  <h1>My Test Form</h1>
<form id="my-form">
  <div><label>Username:</label><input type="text" name="username" data-ideal="required username"/></div>
  <div><label>Password:</label><input type="text" name="password" data-ideal="required password"/></div>
  <div><label>E-Mail:</label><input type="text" name="email" data-ideal="required email"/></div>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T14:19:26.690

### 尝试更换：

```
var $myform = $('#my-form').idealforms(options).data('idealforms'); 
```

### 和：

```
$(document).ready(function(){
    $('#my-form').idealforms(options).data('idealforms');
}); 
```

让我们知道！另外，将`<script>`标签移动到`<head>`.

* * *

### 或另一种选择：

将`<script>`标签移到`</body>`:

```
 ....
    <script>
      var $myform = $('#my-form').idealforms(options).data('idealforms');
    </script>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T14:23:15.027

像这样试试

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--[if IE 8]> <html class="ie8" lang="en"> <![endif]-->
<!--[if IE 9]> <html class="ie9" lang="en"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html lang="en"> <!--<![endif]-->

<head>
<title>Test Ideal Form</title>
<link media="screen" type="text/css" rel="stylesheet" href="css/jquery.idealforms.min.css">
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript" src="jquery/jquery.idealforms.min.js"></script>
</head>
<body>

  <h1>My Test Form</h1>
<form id="my-form">
  <div><label>Username:</label><input type="text" name="username" data-ideal="required username"/></div>
  <div><label>Password:</label><input type="text" name="password" data-ideal="required password"/></div>
  <div><label>E-Mail:</label><input type="text" name="email" data-ideal="required email"/></div>
</form>

<script type="text/javascript">
$(document).ready(function(){
  $('#myform').idealforms();
});
</script>

</body>
</html> 
```

还要检查这个 [http://code.google.com/p/idealforms/wiki/MiniHowTo](http://code.google.com/p/idealforms/wiki/MiniHowTo)

# c# - SQL复杂数据搜索查询

> ID：13542044
> 
> 赞同：1
> 
> 时间：2012-11-24T14:15:49.223
> 
> 标签：c#, sql, sql-server-2008

我正在使用 c# .NET。

我有 3 个字段（文本框）txtName、txtSirname、txtLocation。

我的数据库表是

```
Name      | Sirname  | Location

Steve     | Jobs     | US
Kevin     | Peterson | UK
Haechelle | Gibbs    | South Africa 
```

我有一个搜索按钮。单击搜索按钮时，我想根据文本框显示所有结果。

但

如果所有文本框都是空的，我想显示整个表格。如果 name 为空，则应根据 sirname 和 place 显示结果。如果 sirname 为空，则应根据名称和地点显示结果。如果 name 和 sirname 为空......以及所有可能的组合。

我的问题是我不允许在 C# 中使用 if 语句。我只需要在一个 SQL 查询中编写它。我该怎么做。请指导我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T14:22:41.133

采用

```
WHERE     
    ([Name] = @name OR @name IS NULL) OR
    ([Sirname] = @sirname OR @sirname IS NULL) OR
    ([Location] = @location OR @location IS NULL) 
```

如果您的文本框是空`NULL`的，则将其作为查询/存储过程中的参数值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-24T14:43:16.823

> 是的。他告诉我，出于性能原因，我应该避免 10 个 if 并为它编写一个查询

他完全错了。如果您通过在 TSQL 中处理每个组合的拼凑查询来做到这一点，那么该查询将执行得非常不理想（并且特别容易受到参数嗅探的性能痛苦的影响）。

坦率地说，我会忽略他，并在 C# 代码中编写正确的查询 - 这*几乎是瞬时*的（例如：微秒） - 因为要求数据库服务器运行错误的 TSQL 查询**非常**昂贵。例如，下面是原始 TSQL 中累积过滤器的完整实现：

```
static void AppendClause(StringBuilder clause, string tsql)
{
    clause.Append(clause.Length == 0 ? " where " : " and ")
          .Append('(').Append(tsql).Append(')');
}    
static Foo[] SearchFoo(string name, int? age, string region)
{
    var whereClause = new StringBuilder();
    if (name != null) AppendClause(whereClause, "f.Name=@name");
    if (age != null) AppendClause(whereClause, "f.Age=@age");
    if (region != null) AppendClause(whereClause, "f.Region=@region");

    string tsql = "select f.* from Foo f" + whereClause;
    using (var conn = GetConnection())
    { // note I'm using "dapper" here for brevity, but any ADO.NET-based
      // code would suffice
        return conn.Query<Foo>(tsql, new { name, age, region }).ToArray();
    }
} 
```

或在 LINQ 中相同：

```
static Foo[] SearchFoo(string name, int? age, string region)
{
    using (var ctx = GetContext())
    {
        IQueryable<Foo> query = ctx.Foos;
        if(name != null) query = query.Where(f => f.Name == name);
        if(age != null) query = query.Where(f => f.Age == age);
        if(region != null) query = query.Where(f => f.Region == region);
        return ctx.ToArray();
    }
} 
```

你的同事大错特错了。如果他仍然不同意，请随时向他指出我的方向；p

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T14:33:48.460

```
select ... from ... where
    name = isnull(nullif(@name, ''), name) and
    sirname = isnull(nullif(@sirname, ''), sirname) and
    location = isnull(nullif(@location, ''), location) 
```

只要您想省略参数，只需传递`null`或空字符串。`""`它假定：`@name`和`@sirname`是`@location`参数。

# ruby-on-rails - Rails 将时间数据类型更新回 NULL

> ID：13542046
> 
> 赞同：1
> 
> 时间：2012-11-24T14:15:55.443
> 
> 标签：ruby-on-rails, ruby

用户可以分配`due_time_at`具有`TIME`数据库中数据类型的字段。在他们更新一段时间后，他们可能会改变想法并且不想要特定时间。目前，当用户尝试将时间设置回`NULL`它时，只需将该字段设置`00:00`为数据库中的值。有什么办法可以让这个恢复`nil`吗？

`""`通过强制使用帖子中的所有属性，我能够获得所需的结果。即使您将时间设置为，我看起来字段 `params[:something][:'due_time_at(1i)']`中仍然有数据。如果有人有更好的方法，请告诉我。`params[:something][:'due_time_at(2i)']``params[:something][:'due_time_at(3i)']``""`

```
if params[:something][:'due_time_at(4i)'] == ""
  params[:something][:'due_time_at(1i)'] = ""
  params[:something][:'due_time_at(2i)'] = ""
  params[:something][:'due_time_at(3i)'] = ""
  params[:something][:'due_time_at(4i)'] = ""
  params[:something][:'due_time_at(5i)'] = ""
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T14:33:13.737

这应该工作：

```
obj.update_attributes({:due_time_at => nil}) 
```

如果您将 params 哈希传递给 update_attribute 方法，则可以检查其值并将 :due_time_at 值设置为 nil。

# php - 为什么 XPath 查询只能返回最后一个匹配项？

> ID：13542049
> 
> 赞同：1
> 
> 时间：2012-11-24T14:16:13.273
> 
> 标签：php, xpath

XPath 查询只能返回最后一个匹配项的原因是什么？我正在对一个显然有多个`<a name="...">`标签的 HTML 片段运行查询，但 XPath 查询只会返回一个元素，它恰好是最后一个元素。

```
function extract($html) {
    // This test shows that the retrieved HTML fragment indeed contains multiple anchor tags
    echo "<textarea>".$html."</textarea>";

    // parse the data
    $dom = new DomDocument();
    @$dom->loadHTML($html); // we use @$dom to suppress some warnings
    $xpath = new DOMXPath($dom);

    // find the html code for the post
    $query = "//a[contains(@name, 'post')]"; 
    $rows = $xpath->query($query);

    // This will return 1
    echo "Elements found: " . count($rows);

    ...
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T14:21:08.800

你需要探查`$rows->length`。原因是它`$rows`是[`DOMNodeList`](http://php.net/manual/en/class.domnodelist.php)（一个包含实例列表的对象[`DOMNode`](http://php.net/manual/en/class.domnode.php)）的一个实例。而且由于`DOMNodeList`没有实现 interface [`Countable`](http://php.net/manual/en/class.countable.php)，因此无法以[`count()`](http://php.net/manual/en/function.count.php)您期望的方式进行探测。它只是返回`1`，因为它是单个对象，而不是`DOMNode`它聚合的 s 的数量。

因此，您的查询结果*不会*只返回最后一个匹配项。它会全部返回，您可以使用 遍历它们`foreach`，如下所示：

```
foreach( $rows as $row )
{
    // do something with $row (instance of DOMNode)
} 
```

...或使用`for`循环，如下所示：

```
for( $i = 0, $len = $rows->length; $i < $len; $i++ )
{
    $row = $rows->item( $i );
    // do something with $row (instance of DOMNode)
} 
```

... ETC。

# google-maps-api-3 - Google Maps API：获取两个位置的距离并在地图上绘图

> ID：13542052
> 
> 赞同：0
> 
> 时间：2012-11-24T14:16:23.870
> 
> 标签：google-maps-api-3

我是谷歌地图的新手。我想从一个地方到另一个地方的距离并将其绘制在地图上。

例如：Place1 和 Place2 距离 - xxx 公里（xx 英里）并将其绘制在地图上。

请[看一看](https://docs.google.com/open?id=0B6kdPzOM0lGtSkxNOEdZUmlEczg)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T14:47:13.273

使用[几何库](https://developers.google.com/maps/documentation/javascript/reference#spherical)computeDistanceBetween() 函数。如果您没有坐标，请使用[地理编码](https://developers.google.com/maps/documentation/javascript/reference#Geocoder)器获取它们。

[示例](http://www.geocodezip.com/v3_GoogleEx_geometry-headings-dist.html)（基于文档中[的示例](https://google-developers.appspot.com/maps/documentation/javascript/examples/geometry-headings)）

# c - 如何在C中对单个字符进行scanf

> ID：13542055
> 
> 赞同：126
> 
> 时间：2012-11-24T14:16:43.613
> 
> 标签：c, char, scanf

在C中：我试图从用户那里获取char，`scanf`当我运行它时，程序不要等待用户输入任何东西......

这是代码：

```
char ch;
printf("Enter one char");
scanf("%c", &ch);
printf("%c\n",ch); 
```

为什么不工作？

* * *

## 回答 #1

> 赞同：283
> 
> 时间：2012-11-24T16:31:02.577

转换说明`%c`符不会自动跳过任何前导空格，因此如果输入流中有一个杂散的换行符（例如来自前一个条目），`scanf`调用将立即使用它。

解决此问题的一种方法是在格式字符串中的转换说明符之前放置一个空格：

```
scanf(" %c", &c); 
```

格式字符串中的`scanf`空格表示跳过前导空格，第一个非空格字符将使用`%c`转换说明符读取。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2016-12-03T15:02:48.383

首先，避免`scanf()`。使用它不值得痛苦。

见：[为什么大家都说不要用scanf？我应该改用什么？](http://c-faq.com/stdio/scanfprobs.html)

使用空白字符`scanf()`会忽略输入流中剩余的任意数量的空白字符，如果您需要读取更多输入怎么办？考虑：

```
#include <stdio.h>

int main(void)
{
   char ch1, ch2;

   scanf("%c", &ch1);  /* Leaves the newline in the input */
   scanf(" %c", &ch2); /* The leading whitespace ensures it's the
                          previous newline is ignored */
   printf("ch1: %c, ch2: %c\n", ch1, ch2);

   /* All good so far */

   char ch3;
   scanf("%c", &ch3); /* Doesn't read input due to the same problem */
   printf("ch3: %c\n", ch3);

   return 0;
} 
```

虽然可以使用前导空格以相同的方式修复第三个 scanf() ，但它并不总是像上面那样简单。另一个主要问题是，`scanf()`如果输入流中的任何输入与格式不匹配，则不会丢弃它。例如，如果您输入`abc`一个`int`诸如：`scanf("%d", &int_var);`那么`abc`将不得不读取并丢弃。考虑：

```
#include <stdio.h>

int main(void)
{
    int i;

    while(1) {
        if (scanf("%d", &i) != 1) { /* Input "abc" */
            printf("Invalid input. Try again\n");
        } else {
            break;
        }
    }

    printf("Int read: %d\n", i);
    return 0;
} 
```

另一个常见问题是混合`scanf()`和`fgets()`. 考虑：

```
#include <stdio.h>

int main(void)
{
    int age;
    char name[256];
    printf("Input your age:");
    scanf("%d", &age); /* Input 10 */
    printf("Input your full name [firstname lastname]");
    fgets(name, sizeof name, stdin); /* Doesn't read! */
    return 0;
} 
```

调用`fgets()`不等待输入，因为读取了前一个 scanf() 调用留下的换行符，并且 fgets() 在遇到换行符时终止输入读取。

还有许多其他与`scanf()`. 这就是为什么通常建议避免使用它的原因。

那么，有什么选择呢？以下列方式使用[`fgets()`](http://man7.org/linux/man-pages/man3/fgetc.3.html)函数来读取单个字符：

```
#include <stdio.h>

int main(void)
{
    char line[256];
    char ch;

    if (fgets(line, sizeof line, stdin) == NULL) {
        printf("Input error.\n");
        exit(1);
    }

    ch = line[0];
    printf("Character read: %c\n", ch);
    return 0;
} 
```

如果 inut 缓冲区中有足够的空间，使用时要注意的一个细节`fgets()`将读取换行符。如果不需要，则可以将其删除：

```
char line[256];

if (fgets(line, sizeof line, stdin) == NULL) {
    printf("Input error.\n");
    exit(1);
}

line[strcpsn(line, "\n")] = 0; /* removes the trailing newline, if present */ 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2018-07-10T14:54:46.740

这对我有用 试试看

```
int main(){
char c;
scanf(" %c",&c);
printf("%c",c);
return 0;
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-01-13T08:46:28.143

这里有一个类似的东西，我想分享，

在使用 Visual Studio 时，您可能会收到如下错误：

> 'scanf'：函数或变量可能不安全。考虑`scanf_s`改用。要禁用弃用，请使用`_CRT_SECURE_NO_WARNINGS`

为防止这种情况，您应该按以下格式编写

单个字符可以按如下方式读取：

```
char c;
scanf_s("%c", &c, 1); 
```

当读取非空终止字符串的多个字符时，整数用作宽度规范和缓冲区大小。

```
char c[4];
scanf_s("%4c", &c, _countof(c)); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-11-16T18:10:40.813

fgets 和 getchar 都不能解决这个问题。唯一的解决方法是在使用 scanf scanf(" %c",ch); 时在 %c 之前保留一个空格；// 只会工作

在以下 fgets 也不起作用..

```
char line[256];
char ch;
int i;

printf("Enter a num : ");
scanf("%d",&i);
printf("Enter a char : ");

if (fgets(line, sizeof line, stdin) == NULL) {
    printf("Input error.\n");
    exit(1);
}

ch = line[0];
printf("Character read: %c\n", ch); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-10-01T15:29:32.160

尝试使用 getchar(); 反而

句法：

```
void main() {
    char ch;
    ch = getchar();
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-06-30T18:26:38.950

在 scanf 放之前`fflush(stdin);`清除缓冲区。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2019-08-06T04:41:53.390

唯一对我有用的代码是：

```
scanf(" %c",&c); 
```

我遇到了同样的问题，而且只有单个字符。经过一个小时的随机测试，我还不能报告问题。有人会认为 C 现在将具有从键盘检索单个字符的防弹功能，而不是一系列可能的变通办法......只是说......

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2016-06-22T16:47:21.253

使用字符串而不是`char` 喜欢

```
char c[10];
scanf ("%s", c); 
```

我相信它很好用。

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2014-10-11T15:03:02.633

在 %c 转换说明符之前提供一个空格，以便编译器忽略空格。程序可以写成如下：

```
#include <stdio.h>
#include <stdlib.h>
int main()
{
    char ch;
    printf("Enter one char");
    scanf(" %c", &ch); /*Space is given before %c*/
    printf("%c\n",ch);
return 0;
} 
```

* * *

## 回答 #11

> 赞同：-3
> 
> 时间：2018-12-17T01:01:41.860

您必须使用有效的变量。`ch`不是该程序的有效变量。使用`char Aaa`；

```
char aaa;
scanf("%c",&Aaa); 
```

经过测试，它可以工作。

# sql-server - 从 SQL Server 数据库表填充 Combobox VB

> ID：13542057
> 
> 赞同：1
> 
> 时间：2012-11-24T14:17:00.120
> 
> 标签：sql-server, database, vb.net, combobox

我在 SQL Server 数据库中有两个表。将我的 VB 项目链接到数据库后，我想用某个表中的值填充一个组合框。我应该怎么做？

例如，假设我有一个包含`id`和`name`列的表。组合框显示在表中找到的名称列表。如果我在这里选择了某个名称，如何将该名称的 id 插入另一个表中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T14:35:46.943

使用**DisplayMember**和**ValueMember**属性

```
cboData.DataSource = dsClients.Clients
cboData.DisplayMember = "Name"
cboData.ValueMember = "ID" 
```

# xml - 使用 maxOccurs 元素进行模式验证失败

> ID：13542063
> 
> 赞同：1
> 
> 时间：2012-11-24T14:17:42.573
> 
> 标签：xml, xml-parsing, xsd, libxml2

在 XML 中出现多次（例如 2 次）的元素的架构总是失败，并给出错误“架构有效性错误：元素 '名称'：此元素不是预期的”。“名称”是 XML 文件的中间元素，即我们在 XML 中有其他元素，而“名称”位于 XML 文件的中间。XML 文件具有正确的标题为“”

```
Sample "name" element in XML file :
<name>
 <First>1</First>
 <last>1</last>
</name>
<name>
 <First>1</First>
 <last>1</last>
</name>

Sample Schema tried  as below, but nothing works. However after commenting the second instance of "name" in XML, schema is validated successfully. PLEASE HELP.

<xs:element name="name" >
    <xs:complexType mixed="true">
      <xs:sequence>
        <xs:element ref="First"/>
        <xs:element ref="last"/>
      <xs:sequence>
    </xs:complexType>
  </xs:element>

  <xs:element name="name" >
    <xs:complexType mixed="true">
      <xs:sequence minOccurs="1" maxOccurs="3">
        <xs:element ref="First"/>
        <xs:element ref="last"/>
      <xs:sequence>
    </xs:complexType>
  </xs:element>

  <xs:element name="name" >
    <xs:complexType mixed="true">
      <xs:all>
        <xs:element ref="First"/>
        <xs:element ref="last"/>
      <xs:all>
    </xs:complexType>
  </xs:element>

 <xs:element name="name" minOccurs="1" maxOccurs="3" >
    <xs:complexType mixed="true">
      <xs:sequence >
        <xs:element ref="First"/>
        <xs:element ref="last"/>
      <xs:sequence>
    </xs:complexType>
  </xs:element>

 <xs:element name="name">
    <xs:complexType mixed="true">
      <xs:choice maxOccurs="3" >
        <xs:element ref="First"/>
        <xs:element ref="last"/>
      <xs:choice>
    </xs:complexType>
  </xs:element> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T18:08:54.010

问题可能出在 name 元素的父级类型的声明中，您没有向我们展示。

# mysql - 使用空值作为 '' 还是 NULL 更好？

> ID：13542065
> 
> 赞同：7
> 
> 时间：2012-11-24T14:18:10.627
> 
> 标签：mysql, ruby-on-rails, database, postgresql, database-design

**数据库架构**

我有这个领域：

*   标题（字符串）
*   字幕
*   描述（字符串）

最好将默认值设置为**空字符串 ''**还是**NULL**？

为了更好的读/写和大小存储性能

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-24T14:27:33.670

通常的合同是：

*   `NULL`意思是“没有可用的信息”。
*   `''`意思是“有可用的信息。它只是空的。”

除此之外，自发明`NULL`任何语言以来，都会有很多哲学讨论，而不仅仅是 SQL。

这里唯一的技术点是：在 PostgreSQL`NULL`中可以比长度为零的字符串更有效地存储。如果这对你来说真的很重要……我们不知道。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-02-20T06:28:45.630

# 专家意见：避免 NULL

与关系数据模型的创建者/发现者 ( [Codd 博士) 合作的](http://en.wikipedia.org/wiki/Edgar_F._Codd)[Chris (CJ) Date](http://en.wikipedia.org/wiki/Christopher_J._Date)博士明确表示：“不，您不应该使用 NULL。”。阅读他的书[A Guide To The SQL Standard](https://rads.stackoverflow.com/amzn/click/com/0201964260)进行大量讨论。

他与其他专家一起认为，对于各种理论和实践问题，NULL 带来了太多的风险、混乱和问题，使它们变得有价值。

解决方案：

*   在 的每一列上添加一个约束[`NOT NULL`](http://www.postgresql.org/docs/current/static/ddl-constraints.html#AEN2531)。
*   在有意义的地方，为每一列添加一个默认值，[`DEFAULT`](http://www.postgresql.org/docs/current/static/ddl-default.html). 对于文本类型列，默认值可能是空字符串 ('')。或者，默认值可能是您任意选择并始终使用的某个措辞，例如“EMPTY”或“NOT-AVAILABLE”，具体取决于您的需要。在某些列上，您可能不需要默认值，这意味着如果用户/应用程序未提供值，您希望拒绝记录的插入或更新。

## 规则的例外

以上是一个很好的规则，我习惯性地遵循它。但是，每条规则都有例外。在极少数情况下，我允许 NULL 例外。

**示例例外：**在[Postgres](http://www.postgresql.org/)中，在数百万行的表中使用[XML 数据类型时。](http://www.postgresql.org/docs/current/static/datatype-xml.html)我需要反复搜索尚未记录值的行（缺失值）。我无法存储空字符串，因为 Postgres 强制执行仅存储有效 XML 的规则，而空字符串不是有效的 XML 文档。所以我允许在那个 XML 列中使用 NULL。

您可能认为我可以存储一个不包含数据的最小 XML 文档。但我不知道如何有效地索引，以区分记录数据的行和没有记录数据的行。我可以在 NULL 上创建索引。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-24T17:43:52.657

*关于这一点，大多数人已经说过了，但是我认为如果*您最终认为使用 NULL 或“”作为“无价值”（简单地说）之间是 50/50，还有一件事需要考虑。

在 MySQL 中，如果您对列有否定条件，则不会“捕获”值 NULL。例如。

```
where column != 'text' 
```

只会返回 "column" 没有值 "text" 但不会找到 "column" 为 NULL 的行，如果你还想找到这些行，你必须使用：

```
where column != 'text' OR column IS NULL 
```

我自己仍然更喜欢在保存之前使用 NULL 并将空字符串更改为 nil，我认为最好知道数据库中的“空值”始终为 NULL。

另一方面，在某些情况下，您可能希望使用“无值”（NULL）和“空值”（“”）之间的差异。但我从未在某些应用程序中遇到过这种情况 - 还没有。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-24T14:28:11.690

您应该始终使用 NULL 来表示该列没有值，因为即使是空字符串也是一个值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-24T14:35:33.380

您需要确定“null”和空字符串的值在您的应用程序中是否意味着不同，或者它们都只是意味着“无数据”。如果是后者，那么这通常只是一个偏好问题，但你必须随之而来 - 尽量不要在给定字段中混合“空”值和空值。

通常，'null' 提供了更好的“无数据”概念，但与空字符串相比，它在应用程序中使用起来有些麻烦。但是使用空字符串代替空字符串可能会被视为过早的优化，并且在将来的某个时候将无法引入需要区分空字符串和空字符串的功能。

另一方面，有些 DBMS 不在字符串列中存储空值，只是在空字符串中存储。我会使用空值，但要使用完善且有据可查的合同（即“此字段从不包含空值，空标题意味着没有标题”，在列上强制执行 NOT NULL 约束），您可以采取任何您喜欢的方法。

如果您关心性能，则需要阅读您正在使用的 DBMS 的文档并自行进行一些测试。如果您希望空值非常频繁，您可以检查“稀疏列”是否有任何帮助 - 一些 DBMS 引入这些作为有效存储频繁出现的空值的手段，但它们通常有一些缺点，例如一般 (通常不大）检索非空值或类似的东西时的性能损失。

而且，当然，您必须考虑客户的期望。但是，当您创建客户端尚未访问的数据库时，由您决定并适当地记录它。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-24T15:45:12.780

这并不严格适用于您的情况，但为了完整起见，我会提到它：不强制执行 NULL 外键。

*如果*您的字段`foreign_id`是引用其他表的外键，则仅当`foreign_id`包含非 NULL 值时才会强制执行。

*顺便说一句，Oracle[将空字符串存储为 NULL](https://stackoverflow.com/a/203536/533120)。保证 VARCHAR2 继续以这种方式运行，而 VARCHAR 可能（有朝一日）被更改以符合 SQL 标准并区分空字符串和 NULL。其他 DBMS（据我所知）确实做出了这种区分。*

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-24T15:18:35.073

仅当数据未知或不适用时才使用 Null 值。在所有其他情况下，使用“”（空值）作为特殊考虑，在为涉及 NULL 值的数据编写查询时需要特别注意，这通常很困难。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-24T18:47:40.187

这取决于。你知道值是空的吗？示例：已知人没有中间名首字母。

或者你只是不知道？示例：您收到了“中间名首字母”字段留空的表格。

# jquery - 主干js删除异常概念

> ID：13542069
> 
> 赞同：0
> 
> 时间：2012-11-24T14:19:05.567
> 
> 标签：jquery, backbone.js, backbone-events

我正在构建一个小应用程序，用于使用 Backbonejs 从 ul 添加和删除 li。其中一个 SO 成员 cymen 帮助我编写了代码，使用它我稍微定制了代码。目前，如果我添加一个元素并删除，它可以工作，但是第二次我添加一个元素（到 ul）并删除它，我得到

> 未捕获的类型错误：无法调用未定义的方法“删除”

在这里粘贴我的代码，

HTML：

```
<input type="text" id="name">
<button id="add">Add</button>
<ul id="mylist"></ul> 
```

JS：

```
$(function(){

        var myCollection = Backbone.Collection.extend();

        var myView = Backbone.View.extend({

            el:$('body'),

            tagName:'li',

            initialize : function(e){
                this.collection.bind("add",this.render,this);
                this.collection.bind("remove",this.render,this);
            },

            events:{
                'click #add' : 'addfoo'                
            },

            addfoo : function(){
               var myname= $('#name').val();
               $('#name').val('');               
               this.collection.add({name:myname});
            },

            render : function(){

                $('#mylist').empty();
                this.collection.each(function(model){
                    console.log("myView");
                    var remove = new myRemoveView({model:model});
                    remove.render();
                });
            }
        });

        var myRemoveView = Backbone.View.extend({

        el:$('body'),

        events:{
            'click .button':'removeFoo'
        },

        removeFoo : function(){
            console.log("here");

            this.model.collection.remove(this.model);
        },

        render : function(){
            console.log("second view");
            $('#mylist').append('<li>'+this.model.get('name') + "<button class='button'>"+"delete"+"</button></li>");
            return;
        }

        });
        var view = new myView({collection: new myCollection()});
            }); 
```

我不明白的两件事：

i) 在 removeFoo 函数中，我们写

> this.model.collection.remove(this.model)

这不应该是 this.collection.model.remove 之类的吗？

ii）我向 ul 添加一个 li，然后删除它，当我添加另一个 li 时（附加到 ul 完美）但是这次当我去删除它时会抛出上述错误：Uncaught TypeError：无法调用方法'remove'未定义的

你能帮我弄清楚我的代码中的这两个疑问吗，顺便说一句，SO 成员 cymen 的代码就像一个魅力，只有我定制的代码（上面）给了我错误。

SO 成员 cymen 的代码：[JS Fiddle 的代码](http://jsfiddle.net/Gd2Rs/)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T05:03:12.607

首先，您`myRemoveView`正在使用`<body>`它`el`：

```
var myRemoveView = Backbone.View.extend({
    el:$('body'), 
```

这意味着每次你点击删除按钮时，你都会触发你所做`removeView`的每一个。`myRemoveView`这当然不是你想要发生的事情，也是 cymen 使用`tagName: 'li'`. 视图及其`el`s 有两个一般规则：

1.  每个视图一个视图`el`和一个`el`视图。`el`由于事件处理问题，您不希望视图共享相同的视图；加倍，因此您不希望同一视图的多个实例共享一个`el`.
2.  视图`el`应该是视图关心的 DOM 的一部分，不多也不少。这使得清理变得非常容易，只需删除与您的视图关联的 DOM 元素，大多数事情都会随之消失（尤其是 DOM 事件）；对于非 DOM 事件，我们有一个[`remove`](http://backbonejs.org/#View-remove)视图方法。

另一件事，您的视图（通常）不应该与它自己的 DOM 之外的 DOM 混淆`el`。这看起来很奇怪：

```
render : function(){
    $('#mylist').append(...);
    return;
} 
```

调用者应该负责弄清楚你的`el`去向，你的视图应该只关心它内部发生的事情，其他一些视图应该负责`#mylist`。此外，`render`方法通常会返回`this`，以便您可以执行以下操作：

```
$(x).append(some_view.render().el); 
```

将它们放入 DOM。

同时指定`tagName`和`el`在视图中：

```
var myView = Backbone.View.extend({
    el: $('body'),
    tagName: 'li', 
```

是没有意义的，`tagName`将被忽略并被`el`使用。

您还在小提琴中使用 Backbone 0.5.3。您应该尽可能使用最新版本。

如果我们更正上述内容，那么一切都会开始工作（再次）：

```
var myView = Backbone.View.extend({
    //...
    render: function() {
        $('#mylist').empty();
        this.collection.each(function(model) {
            var remove = new myRemoveView({
                model: model
            });
            $('#mylist').append(remove.render().el);
        });
    }
    //...
}); 
```

和：

```
var myRemoveView = Backbone.View.extend({
    tagName: 'li',
    //...
    render: function() {
        this.$el.text(this.model.get('name'));
        this.$el.append("<button class='button'>delete</button>");
        return this;
    }
}); 
```

演示：http: [//jsfiddle.net/ambiguous/2z4SA/1/](http://jsfiddle.net/ambiguous/2z4SA/1/)

* * *

那么你的原始版本发生了什么样的疯狂？关键`el: $('body')`在你的`myRemoveView`. 首先，我们将添加一个小日志记录方法，`myRemoveView`以便更轻松地观察发生的情况：

```
_log: function(method) {
    console.log(
        method,
        ': model =', this.model.cid,
        ' got-collection =', this.model.collection ? 'yes' : 'no',
        ' view =', this.cid
    );
} 
```

请注意，这`cid`是 Backbone 创建的内部唯一 ID，它只是一种方便的方式来跟踪事物。然后我们将`this._log`调用`removeFoo`and `render`：

```
removeFoo: function() {
    this._log('removeFoo');
    if(this.model.collection)
        this.model.collection.remove(this.model);
},
render: function() {
    this._log('render');
    $('#mylist').append('<li>' + this.model.get('name') + "<button class='button'>" + "delete" + "</button></li>");
    return;
} 
```

这是一个简单的过程，应该告诉你一切都出错了：

1.  **将a**添加到列表中。
2.  将**b**添加到列表中。
3.  点击**a**的删除按钮。

你可以跟着这里：http: [//jsfiddle.net/ambiguous/yLYNL/](http://jsfiddle.net/ambiguous/yLYNL/)

首先，我们将添加**一个**，这会在控制台中弹出：

```
render : model = c1  got-collection = yes  view = view2 
```

然后我们添加**b**并看到：

```
render : model = c1  got-collection = yes  view = view4
render : model = c3  got-collection = yes  view = view5 
```

您的`myView`渲染重绘了整个集合，因此我们看到`c1`了**a**和`c3`新的**b**。到目前为止一切顺利，一切都说得通。

现在，当我们尝试删除**一个**; 首先我们看到我们`removeFoo`在**一个**：

```
removeFoo : model = c1  got-collection = yes  view = view2 
```

这将触发`myView#render`重绘整个集合的 a。此时整个集合只是**b**，所以我们`c3`再次看到渲染，一切仍然有意义：

```
render : model = c3  got-collection = yes  view = view6 
```

但现在我们看到一切都在横向发展：

```
removeFoo : model = c1  got-collection = no   view = view4
removeFoo : model = c3  got-collection = yes  view = view5 
```

您会看到`c3`出现，因为您有两个`myRemoveView`实例（一个用于**a**和一个用于**b**）绑定到相同`el`的，因此它们都将看到该`click .delete`事件，碰巧`c1`首先看到它。

但那`c1`在那里做什么？那是没有集合的那个，那是触发原始错误的那个。你永远不会将你`myRemoveView`的 s 从事件中分离出来，`<body>`所以你有一个僵尸：即使s`<li>`消失了，视图仍然`<body>`通过视图的[`delegate`](http://api.jquery.com/delegate/)调用绑定到。所以你有一个僵尸视图，它引用了一个僵尸模型，到处都是僵尸，你把你的僵尸战斗套件留在了车里。但是为什么没有`c1`收藏呢？好吧，你做到了：

```
this.model.collection.remove(this.model) 
```

`c1`将其从收藏中删除；从集合中删除模型会删除模型的`collection`，因为模型不再在集合中。

# c# - 使用 ItemsSource 将预定义项目添加到 ComboBox

> ID：13542072
> 
> 赞同：4
> 
> 时间：2012-11-24T14:19:22.170
> 
> 标签：c#, wpf, data-binding, combobox

我正在尝试将预定义的 ComboBoxItem 添加到我的 ComboBox 中，该 ComboBox 已经设置了 ItemsSource 属性。例子：

```
(Select item)
Item 1
Item 2
Item 3 
```

可以在不修改原始项目集合的情况下执行此操作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T14:24:15.897

下面是来自 MSDN 的一些示例代码，展示了 CompositeCollection 的用法：

```
<ComboBox>
    <ComboBox.ItemsSource>
        <CompositeCollection>
            <ListBoxItem>Please Select</ListBoxItem>
            <CollectionContainer Collection="{Binding Source={StaticResource YOURDATASOURCE}}" />
        </CompositeCollection>
    </ComboBox.ItemsSource>
</ComboBox> 
```

以下是向您展示 CompositeCollection 用法的一些参考资料：

1- [http://msdn.microsoft.com/en-us/library/system.windows.data.compositecollection.aspx](http://msdn.microsoft.com/en-us/library/system.windows.data.compositecollection.aspx)

2- [http://robertbouillon.com/2010/04/17/adding-items-to-a-data-bound-wpf-combobox/](http://robertbouillon.com/2010/04/17/adding-items-to-a-data-bound-wpf-combobox/)

3-[如何将 ComboBox 转换为使用绑定的 CompositeCollection？](https://stackoverflow.com/questions/12750784/how-do-i-convert-a-combobox-to-use-a-bound-compositecollection)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T14:40:28.023

如果您想动态更改项目源的内容，请改用 ObservableCollection，这样您就可以访问 Add() 方法。

```
private ObservableCollection<string> myStrings;

public MyClass()
{
    myStrings = new ObservableCollection<string>();
    myControl.ItemsSource = myStrings;
}

private void AddNewItem(string item)
{
    myStrings.Add(item);
} 
```

# android - 如何在不扩展的情况下实现 listactivity

> ID：13542074
> 
> 赞同：0
> 
> 时间：2012-11-24T14:19:41.790
> 
> 标签：android, listview, adapter

我想在不扩展listActivity的情况下实现ListView，我不知道如何实现。我就是不能做 getListView(); 因为我没有从 listActivity 扩展。你能给出一个示例代码吗？

我的 xml 看起来像这样

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/linearLa"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

  <ImageView
        android:id="@+id/iconremove"
        android:layout_width="50dip"
        android:layout_height="50dip"
        android:scaleType="centerCrop"
         android:src="@drawable/removeicon"
      android:visibility="gone"
          />
  <TextView
        android:id="@+id/textView"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
            android:layout_gravity="left|center_vertical"
        android:layout_marginLeft="10dip"
        android:layout_weight="1"
        android:textSize="20dip" />

</LinearLayout> 
```

和我的代码：

```
public class ListRss extends SherlockActivity  {
    ActionBar actionbar; 
    @SuppressWarnings("unchecked")
    public ArrayList<rssLinkAndTitle> ListRssLinkAndTitle=new ArrayList();
    //public ArrayList listValue=new ArrayList();
    RssArrays rssparser=new RssArrays();
    Context con;
    public void onCreate(Bundle savedInstanceState) {

            super.onCreate(savedInstanceState);
            setContentView(R.layout.titlesrss);
            actionbar=getSupportActionBar();
            con=getApplicationContext();
        //  ListRssAdpter listAdapter;

            ListView    lv = (ListView) findViewById(R.id.linearLa ); 

            lv.setTextFilterEnabled(true);
lv.setAdapter(listAdapter) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T14:22:48.667

> 我想在不扩展 listActivity 的情况下实现 ListView

请注意，`SherlockListActivity`您可以使用一个。

> 我就是不能做 getListView(); 因为我没有从 listActivity 扩展。

正确的。您需要`setContentView()`使用包含`ListView`. 然后，您可以`ListView`通过检索它`findViewById()`，就像您对任何其他小部件一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T14:21:37.110

您可以在布局中创建 listview 并创建 listview 对象在代码中引用它您可以制作它而无需扩展 lisivew 活动

`<ListView android:id="@+id/list1" android:layout_width="wrap_content" android:layout_height="wrap_content"/>`

希望我明白你的意思

# java - 如何播放没有延迟的wav文件？

> ID：13542079
> 
> 赞同：0
> 
> 时间：2012-11-24T14:20:14.647
> 
> 标签：java, audio, wav, javasound

我在互联网上查看了播放 wav 文件的方法，但我发现它们不会在单独的线程上播放，因此会导致程序停止，直到歌曲完成，这不适用于游戏。但是，当我尝试在单独的线程上播放所有内容时，它会滞后。有没有人可以解决这个问题？

注意：我也在不断地在背景上绘画：

```
public class DrawThread extends Thread {

    JFrame j;

    public DrawThread(JFrame frame) {
        j = frame;
    }

    public void run() {
        while (!(isInterrupted())) {
            if (j.isDisplayable() && j.isActive() && j.isEnabled())
            j.update(j.getGraphics());
        }
    }

} 
```

并且更新只是调用paint，即：

```
public void paint(Graphics g) {
            Graphics2D bg = (Graphics2D) g;
    bg.setBackground(Color.black);
    int w = (int) Toolkit.getDefaultToolkit().getScreenSize().getWidth();
    int h = (int) Toolkit.getDefaultToolkit().getScreenSize().getHeight();
    if (time < 500) {
        x[time] = r.nextInt(w) + 150;
        y[time] = h;
        z[time] = r.nextInt(w) + 150;
        time++;
    }
    for (int i = 0; i < time; i++) {
        y[i] -= forward;
        x[i] -= right;
        if (y[i] < 1) {
            x[i] = r.nextInt(400) - 200;
            y[i] = 300;
            z[i] = r.nextInt(400) - 200;
        } else if (y[i] > 300) {
            x[i] = r.nextInt(400) - 200;
            y[i] = 1;
            z[i] = r.nextInt(400) - 200;
        }
        if (x[i] > 200)
            x[i] = -200;
        else if (x[i] < -200)
            x[i] = 200;
        bg.setColor(color);
        bg.drawLine(
                getWidth() / 2 + (int) Math.round(x[i] * 200 / y[i]),
                getHeight() / 2 + (int) Math.round(z[i] * 200 / y[i]),
                getWidth()
                        / 2
                        + (int) Math.round((x[i] + right) * 200
                                / Math.abs(y[i] + forward)),
                getHeight()
                        / 2
                        + (int) Math.round((z[i]) * 200
                                / Math.abs(y[i] + forward)));
    }
} 
```

编辑：添加我正在使用的音乐播放器类（我已切换到 BigClip）：

```
import java.io.File;
import java.util.Collection;
import java.util.HashMap;

import javax.sound.sampled.AudioInputStream;
import javax.sound.sampled.AudioSystem;

import org.crystalix.util.SoundListener;

public class MSHandler {
public static boolean pause = false;
public static boolean stop = false;
private static HashMap<String, BigClip> clips = new HashMap<String, BigClip>();

public static void stopAll() {
    Collection<BigClip> c = clips.values();
    for (BigClip b : c) {
        System.out.println("Stopping "+b.toString());
        b.stop();
        System.out.println("Stopped "+b.toString());
    }
}

public static void playMusic(File file) {
    try {
        AudioInputStream audioIn = AudioSystem.getAudioInputStream(file);
        BigClip clip = new BigClip();
        clip.open(audioIn);
        clip.addLineListener(new SoundListener());
        clip.loop(1);
        clip.start();
        clips.put(file.getName(), clip);
    } catch (Exception e) {
        System.err.println("Sound could not be started!");
        e.printStackTrace(System.err);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T08:44:06.893

您尚未显示用于播放 wav 文件的代码。这使得诊断可能出了什么问题有点困难！

1）wav 应该只是在它自己的线程上。如果你这样做正确，它不会阻止任何其他东西。Java sound tutorials 并没有很好地指出这一点。所以：把调用wav播放的代码放在它自己的runnable中，你应该没问题。

2) 你可以在你想播放它的时间之前“打开”wav。然后，当你最终告诉它去时，它应该立即“开始”。

另一个注意事项：如果 wav 文件已经在内存中，则播放 wav 文件的代码运行得更快。所以，有时第一个 wav 播放只是在稍有犹豫后才开始。但是可以通过以零音量播放另一个声音来将声音播放代码放入内存来解决这个问题。我经常在有声音的程序开始时这样做。

仅当您使用了太多 CPU 以至于 JVM 没有时间处理声音时，后台的连续绘制才是一个问题。如果这是问题所在，我真的会感到惊讶。如果是这样，您可能会听到带有大量咔嗒声的声音播放。

# gwt - GWT 编辑器：显示 ConstraintViolations 和 EditorErrors

> ID：13542082
> 
> 赞同：1
> 
> 时间：2012-11-24T14:20:28.280
> 
> 标签：gwt, bean-validation, gwt-editors

我很难实现 GWT 编辑器同时显示可能`ConstraintViolation`的 s 和`EditorError`s 。显示错误或验证违规都没有问题。

以下示例使用某个`number`字段`Entity`

实体.java：

```
....
@NotNull
private Integer number;

public Integer getNumber() {
    return number;
}

public void setNumber(Integer number) {
    this.number = number;
}
... 
```

实体编辑器.ui.xml

```
...
<editor:ValueBoxEditorDecorator ui:field="number">
    <editor:valuebox>
        <g:IntegerBox />
    </editor:valuebox>
</editor:ValueBoxEditorDecorator>
... 
```

实体编辑器.java

```
...
@UiField
ValueBoxEditorDecorator<Integer> number;
private Validator fValidator;
private EntityEditorDriver fEditorDriver;
...
public void validate() {
    Entity entity = fEditorDriver.flush();
    Set<ConstraintViolation<Entity>> violations = fValidator.validate(entity);
    if (!violations.isEmpty() || fEditorDriver.hasErrors()) {
        fEditorDriver.setConstraintViolations(violations);
    } else {
        // process the entity
    }
} 
```

当我`validate()`没有在号码框中输入任何内容就拨打电话时，会出现“不能为空”的消息。正确显示。使用“asdf”调用`validate()`我希望看到两条消息“不能为空”。和“坏值（asdf）”，但只显示第一个。当我不打电话时会显示编辑器错误，`setConstraintViolations()`但显然不会显示验证违规。

我错过了什么？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T00:02:11.403

您必须`getErrors()`将它们与您的约束违规合并（实现`ConstraintViolation`包装 an 的a `EditorError`）

# php - 如何裁剪选定的图像并将裁剪的图像保存到使用 php 的文件夹

> ID：13542084
> 
> 赞同：2
> 
> 时间：2012-11-24T14:20:38.740
> 
> 标签：php, jquery, html, save, jcrop

我正在使用 Jcrop 插件来裁剪图像。

我用标准的 html 表单上传我的照片。我使用以下代码显示我最后上传的图像：

```
 <img id="cropbox" src="<?php echo $target ?>" width="400" /> 
```

如下所示：![在此处输入图像描述](../Images/7ef10ea8241a70443814d5b0d87971c1.png)

我的 $target 代码如下所示：

```
 <?php 
     $target = "uploads/"; 
     $target = $target . basename( $_FILES['filename']['name']) ; 
     $ok=1; 
     if(move_uploaded_file($_FILES['filename']['tmp_name'], $target)) 
     {
     echo "De afbeelding *". basename( $_FILES['filename']['name']). "* is geupload naar de map 'uploads'";
     } 
     else {
     echo "Sorry, er is een probleem met het uploaden van de afbeelding.";
     }
 ?> 
```

现在我可以开始选择要裁剪的区域：![在此处输入图像描述](../Images/43b6e29f74855c3ab2be17b7d8f34ca3.png)

现在我想使用以下代码将选定的裁剪区域保存到新的 jpg 图像：

```
<?php

if ($_SERVER['REQUEST_METHOD'] == 'POST')
{
    $targ_w = 200;
    $targ_h = 400;
    $jpeg_quality = 90;

    $src = '';
    $img_r = imagecreatefromjpeg($src);
    $dst_r = ImageCreateTrueColor( $targ_w, $targ_h );

    imagecopyresampled($dst_r,$img_r,0,0,$_POST['x'],$_POST['y'],
    $targ_w,$targ_h,$_POST['w'],$_POST['h']);

    header('Content-type: image/jpeg');
    imagejpeg($dst_r,NULL,$jpeg_quality);

    exit;
}

?> 
```

我现在的问题是，我如何使用 $target 源来显示我刚刚在上面的 php 代码中上传的图像？

我不知道。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T14:36:39.623

您可以在上传目标时将文件路径放入 $_SESSION 中。在您上传的.php 中使用此代码（在这里您使用 session_start() 开始会话并将形成的目标路径放入 $_SESSION 数组）：

```
 <?php 
 session_start();
 $target = "uploads/"; 
 $target = $target . basename( $_FILES['filename']['name']) ; 
 $_SESSION['target_path'] = $target;

 $ok=1; 
 if(move_uploaded_file($_FILES['filename']['tmp_name'], $target)) 
 {
 echo "De afbeelding *". basename( $_FILES['filename']['name']). "* is geupload naar de map 'uploads'";
 } 
 else {
 echo "Sorry, er is een probleem met het uploaden van de afbeelding.";
 }
?> 
```

在您的crop.php 中：

```
<?php
session_start();
if ($_SERVER['REQUEST_METHOD'] == 'POST')
{
$targ_w = 200;
$targ_h = 400;
$jpeg_quality = 90;

$src = $_SESSION['target_path'];
$img_r = imagecreatefromjpeg($src);
$dst_r = ImageCreateTrueColor( $targ_w, $targ_h );

imagecopyresampled($dst_r,$img_r,0,0,$_POST['x'],$_POST['y'],
$targ_w,$targ_h,$_POST['w'],$_POST['h']);

header('Content-type: image/jpeg');
imagejpeg($dst_r,NULL,$jpeg_quality);

exit;
}

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T14:29:12.597

您需要使用指定的新图像 URL 重新加载页面，或者将该 URL 返回给 JavaScript，以便您的 JS 代码可以在不重新加载的情况下替换图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T14:38:21.387

[imagejpeg](http://php.net/manual/en/function.imagejpeg.php)采用您已设置为 NULL 的文件名参数。

您可以使用它将裁剪的图像存储到服务器上的磁盘，然后在重定向到“showimage.php”或您拥有的任何结果页面时再次加载它。您可以使用 Location 标头进行重定向。

您可以使用某种数据库在重新加载/重定向之间跟踪图像路径，或者如果这是一个快速项目，只需将图像路径存储在 cookie / session 变量中。

# windows-phone-7 - CSS 渐变未在 Windows Phone 8 WebBrowser 控件中呈现

> ID：13542089
> 
> 赞同：-1
> 
> 时间：2012-11-24T14:21:32.937
> 
> 标签：windows-phone-7, windows-phone-8, internet-explorer-10

我面临一个问题，在 Windows Phone 8 的 WebBrowser 控件中没有呈现 CSS3 背景。但是在 Windows Phone 8 的 WebBrowser 中打开相同的 HTML 时，它呈现了渐变

我使用的 HTML 是：

```
 <html>
    <head>
    <meta name="viewport" content="width=320, user-scalable=no, minimum-scale=1, maximum-scale=1"/>
    </head>
    <body style="margin:0px;overflow:hidden;"> 
            <div id="im_c" style="height:48px;width:100%25;  background: -ms-linear-gradient(
                 bottom,                
                 #432100 30%,               
                 #00AAAA 70%);"> 
                <div style="margin:0 auto;width:320px;">
                    Test
                    </div> 

            </div> 
            <style> 
                body {margin:0px} 
            </style> 
    </body>
</html> 
```

在 Windows Phone 8 中，我使用如下 HTML：

```
WebView.NavigateToString(@"<html><head><meta name=""viewport"" content=""width=320, user-scalable=no, minimum-scale=1, maximum-scale=1""/></head><body style=""margin:0px;overflow:hidden;""> <div id=""im_c"" style=""height:48px;width:100%25; background: -ms-linear-gradient(         bottom,                 #432100 30%,                #00AAAA 70%);""> <div style=""margin:0 auto;width:320px;"">Test</div></div> <style> body {margin:0px} </style> </body></html>"); 
```

有人可以在这里帮忙吗？

谢谢 SRS

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-26T02:31:27.807

看起来，我解决了这个问题。

我添加到 HTML 中，现在它可以正确呈现。

谢谢

# .net - .NET IPAddress 类将 IPv6 转换为映射的 IP 地址

> ID：13542100
> 
> 赞同：3
> 
> 时间：2012-11-24T14:22:53.800
> 
> 标签：.net

我有 IPv6 字符串，我想创建 IPAddress 对象。我尝试了以下代码

```
String ipString = "2400:3C00:3FFE:0000:0000:5EFE:8999:48AA";
System.Net.IPAddress address;
IPAddress.TryParse(ipString, out address); 
```

但 address.ToString() 返回值“2400:3c00:3ffe::5efe:137.153.72.170”。

为什么这已经转换为混合ip？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T14:24:27.373

这是，AFAIK，发生在 Windows 2003 + XP（也许是 Vista，但我不确定）上，因为它们实现了 IPv6。在较新的操作系统上它会没问题。

# php - php xdebug 的神秘 Eclipse 行为

> ID：13542104
> 
> 赞同：0
> 
> 时间：2012-11-24T14:23:11.390
> 
> 标签：php, eclipse, xdebug

昨天，我遇到了一些 xdebug 问题，这个网站上的人非常慷慨地帮助我解决了这些问题。一切工作正常，突然间，它无缘无故停止工作。

我所拥有的是运行 Zend PHP 调试器的 Eclipse。我正在阅读 David Powers 的书：*PHP 解决方案*并使用他的在线代码，所以我没有做任何异国情调的事情。当我尝试运行我的 PHP 网页时，我收到一条消息：“调试器错误”“找不到指定的脚本”。这告诉我调试器找不到 PHP.exe 程序（对吗？）。知道这一点后，我转到 Run Configurations 对话框，我注意到 PHP Executable 表单框已从 XDebug Defaut（它工作时的样子）更改为 xdebug (C:\xampp\php\php.exe) .

我没有改变它。我只是在编辑一个文件以进行更改，这本书在更改时建议进行更改，并且该死的东西停止了工作。我不太确定如何将 PHP 可执行首选项更改回工作值或防止这种情况再次发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T02:45:14.977

好的。我有一个修复。这很奇怪，但它确实有效。首先是我在上面遗漏的一些背景（在我完全理解问题之前写的）：

问题再次出现，实际上我认为这是在我将以下代码片段添加到错误位置后第一次发生的：

```
 <pre>
            <?php if($_POST) {print_r($_POST);?>
            </pre> 
```

这已添加到以下代码（由 David Powers 从 PHP Solutions 复制）到之前的位置

```
 </from> 
```

标记而不是在它之后：

```
 <?php include('./includes/title.inc.php'); ?>
    <!DOCTYPE HTML>
    <html>
    <head>
    <meta charset=utf-8">
    <title>Japan Journey<?php echo "&#8212;{$title}"; ?></title>
    <link href="styles/journey.css" rel="stylesheet" type="text/css" media="screen">
    </head>

    <body>
    <div id="header">
    <h1>Japan Journey</h1>
    </div>
    <div id="wrapper">
    <?php include('./includes/menu.inc.php'); ?>
    <div id="maincontent">
    <h2>Contact Us </h2>
     <p>Ut enim ad minim veniam, quis nostrud exercitation consectetur adipisicing
      elit.       Velit esse cillum dolore ullamco laboris nisi in reprehenderit in 
      voluptate. Mollit anim id est laborum. Sunt in culpa duis aute irure dolor   
      excepteur sint occaecat.</p>
      <form id="feedback" method="post" action="">
        <p>
            <label for="name">Name:</label>
            <input name="name" id="name" type="text" class="formbox">
        </p>
        <p>
            <label for="email">Email:</label>
            <input name="email" id="email" type="text" class="formbox">
        </p>
        <p>
            <label for="comments">Comments:</label>
            <textarea name="comments" id="comments" cols="60" rows="8"></textarea>
        </p>
        <p>
            <input name="send" id="send" type="submit" value="Send message">

    </form> 

    </body>
    </html> 
```

这导致运行配置从 PHP 网页更改为 PHP 脚本。椭圆然后找不到虚构的脚本。

这个问题的解决方法如下：

1) 修复代码 2) 进入 RUN->Run Configurations 3) 删除 PHP Script 下的虚假配置并重新选择正确的配置。4）打开或关闭自动生成，然后按应用，然后再次执行以将其恢复到原始配置。

问题应该消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-02T12:55:00.110

是时候发布尸体了:)

我也有关于“找不到脚本”的错误。就我而言，我只是打开了一个单独的 PHP 文件，尝试调试它并收到此错误消息。通过为此文件创建工作区（项目）来管理摆脱它。创建工作区后，它会定义项目的 URL 和该项目中文件的相对路径。

固定的。

# c++ - Visual C++ 获取资源的路径

> ID：13542115
> 
> 赞同：4
> 
> 时间：2012-11-24T14:24:30.520
> 
> 标签：c++, visual-studio-2010, resources

我正在尝试将图像添加到 Visual C++ 项目并获取它的路径。基本上我想要的是将一些图像添加到项目中，这样它就可以通过在项目中获取必要的图像而不是在本地驱动器上来在任何计算机上运行。

我通过右键单击资源文件（在解决方案资源管理器菜单中）和添加->现有元素来添加图像。

但是该元素仍然具有它的本地路径（C:/images/.../img.jpg）。如何正确地将这些图像添加到我的项目中并能够获取它们的路径？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T14:40:07.833

添加到资源文件的图像将被编译并嵌入到您的代码中，而不是在程序外部的目录中，您可以在运行时使用 FindResource/LoadResource 访问它们

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T14:32:15.220

创建资源目录，将图像复制到此目录（基本文件系统操作），然后从 VS 单击 Add Existing Item 并浏览此目录并添加所有图像。

现在您已将所有图像复制到此目录中，但您仍然需要知道相对路径，在这种情况下，它将类似于“Resources/myImage.png”。

# django - 用户登录后如何在 django 中管理会话（不使用默认管理员）？

> ID：13542121
> 
> 赞同：0
> 
> 时间：2012-11-24T14:25:42.540
> 
> 标签：django, django-sessions

我在 Django 中建立了一个论坛，我想在用户发布内容时管理用户会话并检查他们自己的帖子上的评论。此外，特定用户应收到有关其帖子上的任何活动的通知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T10:34:06.210

Django 会话与管理员无关。默认情况下启用它们。它们由中间件提供。

中间件将根据对您的应用程序的任何请求进行`django.contrib.sessions.middleware.SessionMiddleware`填充。`request.session``request.user`

如果用户登录`request.user`将是相应的 `User`对象，否则将是一个`AnonymousUser`实例。

[您可以在django 文档](https://docs.djangoproject.com/en/dev/topics/http/sessions/?from=olddocs)中找到更多信息。此页面包含不同的配置选项，但您应该能够使用默认值。

# node.js - node.js - 从其他文件访问所需的变量

> ID：13542122
> 
> 赞同：0
> 
> 时间：2012-11-24T14:25:47.207
> 
> 标签：node.js

我有一个主要由两个文件组成的节点应用程序，“app.js”主文件和“router.js”。在 app.js 文件中，我需要所有我需要的文件，例如 Redis 客户端。

我是一个完全的新手，我试图弄清楚如何“访问”router.js 上新创建的变量“client”：

```
//app.js file
var redis   = require("redis"),
    client  = redis.createClient(9981, "herring.redistogo.com");

app.get('/', routes.index);

//router.js file
exports.index = function(req, res){
 client.get("test", function(err, reply) {
   console.log(reply.toString());
 });
}; 
```

我显然得到一个“未定义客户端”，因为无法从该 router.js 文件访问它。我该如何解决？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T14:53:13.070

将 Redis 客户端对象放在其自己的文件中，其他文件`require`：

```
// client.js file
var redis = require("redis"),
    client = redis.createClient(9981, "herring.redistogo.com");
client.auth("mypassword");
module.exports = client;

//router.js file
var client = require("./client");
exports.index = function(req, res){
 client.get("test", function(err, reply) {
   console.log(reply.toString());
 });
}; 
```

node 中所需的模块仅加载一次，并且需要该模块的每个文件都获取相同的对象，因此它们都共享单个 Redis 客户端对象。

# algorithm - 考场座位学生处理算法

> ID：13542123
> 
> 赞同：1
> 
> 时间：2012-11-24T14:25:52.580
> 
> 标签：algorithm, graph

这是情况。假设我们有 x 个学生，编号为 1,2...x，住在一个城市的固定地点。有 y 个考试中心，编号为 1 、 2 、 3 ...y，每个考试中心的容量分别为“i-can-hold[y]”。学生 i 到考试中心 j 的距离是 'i-have-to-walk[i][j]'

你能推荐一种算法来确保总行驶距离最小吗？（即每个学生到考试中心的距离总和）

显然 i-can-hold[1]+i-can-hold[2]+...+i-can-hold[y]>x

我正在考虑创建这样一个程序，以减少进行考试的麻烦。在 googlemap 的帮助下，实际实施是可能的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T14:47:06.657

一般来说，在距离和容量没有任何限制的情况下，这是一个最小成本最大流量问题。

*   每个学生和城市都是一个顶点。
*   每个学生都连接到一个容量为 1、成本为 0 的源。
*   每个城市都连接到容量为`i-can-hold`，成本为 0 的接收器。
*   每个学生都连接到一个容量为 1 的城市，成本从`i-have-to-walk`.

Ford-Fulkerson 算法可用于找到最大流量，但不考虑成本。尽管通过更简单的示例了解流网络，但学习它可能会有所帮助。

有许多不同的算法可以最小化成本。一是“连续最短路径”。这个想法是在残差网络中反复找到一条从源到汇的最小成本路径，并沿着这条路径添加一个流，直到找不到更多路径。

例如：

![流网络](../Images/a2e3d6638543dd167d860cb3d966f5ff.png)

a) 一个流网络，其中每个顶点都被标记（成本、容量）。包含一列 3 名学生连接到一列 2 个中心。

b) 在残差网络中沿最短路径添加的流（可以使用 Bellman-Ford 找到）。残差网络是从可用容量（容量减去每个方向的流量）创建的图。

c) 沿另一条路径添加更多流量。

d) 最优流量。已沿更改已添加流的路径添加流。这是允许的，因为残差网络在流的相反方向上具有容量。

也可以看看：

*   [http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=minimumCostFlow2](http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=minimumCostFlow2)
*   [http://en.wikipedia.org/wiki/Ford%E2%80%93Fulkerson_algorithm](http://en.wikipedia.org/wiki/Ford%E2%80%93Fulkerson_algorithm)
*   [http://en.wikipedia.org/wiki/Minimum_cost_flow_problem](http://en.wikipedia.org/wiki/Minimum_cost_flow_problem)
*   [http://en.wikipedia.org/wiki/Maximum_flow_problem](http://en.wikipedia.org/wiki/Maximum_flow_problem)

# javascript - 为 JavaScript 函数提供事件参数

> ID：13542124
> 
> 赞同：1
> 
> 时间：2012-11-24T14:26:00.433
> 
> 标签：javascript, asp.net, html, javascript-events

我想在“onclick”事件上运行以下方法：

```
function dostuff(evt) {
       var currentTarget = evt.currentTarget;
       // do more stuff
    } 
```

在我的链接上，我通过以下方式添加 onclick 事件：

```
 link.Attributes.Add("onclick", "dostuff()"); 
```

但是，在我上面的示例中，evt 参数为空。我想将点击事件解析为 JavaScript 函数，这样我就可以得到 currentTarget、srcElement 等。

如何在我的 onclick 事件中添加它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T14:41:49.067

使您的`onclick`属性如下所示：

```
link.Attributes.Add("onclick", "dostuff.call(this, event)"); 
```

* * *

*   `this`在函数中将是绑定元素，

*   该`event`对象将被传递

*   它适用于标准浏览器以及 IE8 及更低版本*（包括正在传递的事件对象）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T14:41:24.233

**尝试这个：**

代码隐藏：

```
HyperLink1.Attributes.Add("onclick", "return handleHyperLinkClick(this);"); 
```

ASP:

```
<script type="text/javascript" language="javascript">

        function handleHyperLinkClick(hyperlink) {

            return confirm("Do you want to navigate to " + hyperlink.href + " ?");
        }
</script> 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T14:29:00.430

括号是额外的：

```
link.Attributes.Add("onclick", "dostuff"); 
```

您正在将返回值分配给`"dostuff"`“onclick”事件，而不是将指针分配给函数。

也不要使用应该`"evt"`使用的关键字。`"event"`使用`"srcElement"`属性访问元素。

```
function dostuff() {

    var currentElement = event.srcElement;
} 
```

希望能帮助到你。

# php - 合并两个具有选定名称=>值的数组

> ID：13542129
> 
> 赞同：1
> 
> 时间：2012-11-24T14:26:24.990
> 
> 标签：php, arrays, multidimensional-array

我有以下多维数组：

```
$record = Array(
  Array("name" => "Sheila", "exam1" => "90", "exam2" => "80", "exam3" => "85"),
  Array("name" => "Peter", "exam1" => "80", "exam2" => "95", "exam3" => "85"),
  Array("name" => "Konrad", "exam1" => "98", "exam2" => "70", "exam3" => "89") 
); 
```

我一直在使用以下代码，

```
 foreach ( $record as $student ) {
    // store exam # 1 
    foreach ( $student as  $name => $value ) {
       if ( $name == "name") {
          $name = Array ($name => $value);
       }

       if ( $name == "exam1") {
          $grade = Array ($name => $value);
       }        
    }
 } 
```

但是当我合并这两个时，我没有得到我想要的输出（基本上存储名称及其相应的等级）：

```
 $exam1 = Array( 
  Array("name" => "Sheila", "exam1" => "90"),
  Array("name" => "Peter", "exam1" => "80"),
  Array("name" => "Konrad", "exam1" => "98")
 ); 
```

如何获得我想要的数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T14:30:08.613

```
$data = array();
foreach($students as $record) {
  $data[] = array('name' => $record['name'], 'exam1' => $record['exam1']);
} 
```

或者您可以使用更高级（且更易于扩展）的版本：

```
<?php
$students = Array(
  Array("name" => "Sheila", "exam1" => "90", "exam2" => "80", "exam3" => "85"),
  Array("name" => "Peter", "exam1" => "80", "exam2" => "95", "exam3" => "85"),
  Array("name" => "Konrad", "exam1" => "98", "exam2" => "70", "exam3" => "89") 
);

$desired_metadata = array('name', 'exam1');
$data = array();
$flip = array_flip($desired_metadata);
foreach($students as $record) {
    $data[] = array_combine($desired_metadata, array_intersect_key($flip, $record));
}

var_dump($data); 
```

# database - Windows Phone 7 的默认/内置数据库

> ID：13542134
> 
> 赞同：-1
> 
> 时间：2012-11-24T14:27:09.680
> 
> 标签：database, windows-phone-7, c#-4.0, sqlite

我是 Windows Phone 编程的新手。请建议，用于存储 Windows Phone 7 数据的默认/内置数据库是什么。我已经搜索并找到了 SQLite。没问题还是我需要使用其他数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T16:37:27.473

sqlite 或隔离存储，但隔离存储不是真正的数据库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T16:48:21.157

您有 3 个选项可以在 WP7 中存储数据。

*   外部服务器 - 使用 Web 服务将数据推送到服务器
*   WP7 [SQL CE](http://windowsphonegeek.com/tips/Windows-Phone-Mango-Local-Database%28SQL-CE%29-Introduction) - 使用 LINQ to SQL 在本地存储数据。
*   隔离存储 - 将数据存储为文件

据我所知，SQLite 仅适用于 Windows Phone 8。

# wordpress - 需要具有悬停效果且没有用于 Wordpress 的滚动条的语法荧光笔

> ID：13542135
> 
> 赞同：1
> 
> 时间：2012-11-24T14:27:17.920
> 
> 标签：wordpress, syntax-highlighting

我不记得在哪里，但我见过一些网站有非常漂亮的框来显示没有滚动条的突出显示的语法代码。相反，他们所做的是在框上使用悬停效果，以便当您将鼠标悬停在框上时它会变得更宽以显示所有代码。我确定他们使用的是 CSS 过渡。

谁能告诉我一个可以做到这一点的Wordpress插件吗？或者至少给我一些代码，如果需要的话，我会把它变成一个 WP 插件。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T06:20:00.650

多亏了这个建议，我将它实现到 Crayon 中:)

[http://ak.net84.net/crayon/expanding-code-beyond-page-boundaries-in-crayon/](http://ak.net84.net/crayon/expanding-code-beyond-page-boundaries-in-crayon/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T18:58:59.613

也许[蜡笔语法荧光笔](http://wordpress.org/extend/plugins/crayon-syntax-highlighter/)会为你工作。我不确定它是否内置了悬停效果，但如果你真的想这样做，你可以尝试修改它。

# objective-c - 在所有正在运行的应用程序之间创建一个可可窗口 TOPMOST

> ID：13542148
> 
> 赞同：1
> 
> 时间：2012-11-24T14:28:24.233
> 
> 标签：objective-c, macos, cocoa, nswindow

我创建了一个由一个小窗口组成的 Cocoa 应用程序，该窗口需要成为所有正在运行的应用程序之间的最顶层窗口。例如：如果 iTunes 也在运行，我的窗口需要保持在顶部。

谁能帮我弄清楚如何做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T14:49:20.650

您需要设置窗口级别（`NSStatusWindowLevel`或者`NSScreenSaverWindowLevel`应该采取措施保持所有正在运行的应用程序的顶部）：

**ADC：**

*   [窗口层和级别](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/WinPanel/Concepts/WindowLevel.html)
*   [窗位常数](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSWindow_Class/Reference/Reference.html)

**可可开发：**

*   [窗口级别](http://cocoadev.com/wiki/NSWindowLevel)

# .net - XML 签名。错误的数字签名

> ID：13542149
> 
> 赞同：1
> 
> 时间：2012-11-24T14:28:24.607
> 
> 标签：.net, xml

拥有签署 XML 的第三方软件，并通过某些第三方服务进行验证。

提琴手显示：

```
<ds:SignatureValue>
    Ds+gdisYg7C8ZdZqEXJNkhTLabsuWwUpUcdLNRn+qr6HhmHX01g0an6No59va6+AlaSZpcjw
    3oRh7sVpUaL/Yg==
</ds:SignatureValue> 
```

我在 .net 上的签名：

```
<ds:SignatureValue>
    Ds+gdisYg7C8ZdZqEXJNkhTLabsuWwUpUcdLNRn+qr6HhmHX01g0an6No59va6+AlaSZpcjw3oRh7sVpUaL/Yg==
</ds:SignatureValue> 
```

而且无法验证。那么，为什么要格式化 SignatureValue 呢？还是没关系？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T16:51:52.650

应该没关系。但由于遗留原因，许多使用 Base64 编码的规范建议将行长度限制为 64（或 76）。XML 签名隐含地建议这样做，因为 XML 模式确实如此。我确信可以指示 .net 库将该行拆分为 64 个字符块。

# php - Wordpress wp_editor 不更新 textarea $_POST 数据

> ID：13542153
> 
> 赞同：2
> 
> 时间：2012-11-24T14:28:32.927
> 
> 标签：php, wordpress, tinymce

我在 wordpress 中有一个自定义管理页面设置，我正在使用**wp_editor()**函数来显示一个文本编辑器框，但是当我提交/发布表单时，输入到编辑器字段中的文本是空白的。

参见（删节）代码，例如：

```
<form method="POST" action="<?php echo admin_url('admin.php?page=mypage');?>">
<?php wp_editor('','newtestfield',array('textarea_name'=> 'newtestfield'));?>
<input type="submit" value="GO">
</form>

<?php
if(!empty($_POST)){
print_r($_POST); // At which point "newtestfield" is always empty (does not reflect any text entered into the editor field)
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T00:34:17.023

原来我在页面上有一些 javascript，我认为这是让编辑器运行所必需的，实际上它导致我的编辑器无法正常工作，这是我必须删除的 jquery 代码：

```
 $("#team_history").addClass("mceEditor");
        if ( typeof( tinyMCE ) == "object" && typeof( tinyMCE.execCommand ) == "function" ) {
            tinyMCE.execCommand("mceAddControl", false, "team_history");
        } 
```

# python - 循环（单向）河内塔建议？

> ID：13542156
> 
> 赞同：-1
> 
> 时间：2012-11-24T14:28:54.677
> 
> 标签：python, algorithm, recursion, towers-of-hanoi

这是我为河内塔问题编写的 Python 代码，其中必须将塔从左边的钉子转移到中间的钉子上，使用右边的钉子作为备用：

```
def hanoi(n, origin = "1", destination = "2", spare = "3"):

    if n == 1:
        print ("Move disk from", origin, "to", destination)

    else:
        hanoi(n-1, origin, spare, destination)
        hanoi(1, origin, destination, spare)
        hanoi(n-1, spare, destination, origin)

hanoi(3) 
```

现在我的教授希望我以合法移动仅从塔 1 到 2、塔 2 到 3 和塔 3 到 1 的方式实施它。所有其他规则都是相同的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T15:17:18.317

与此问题一样，您需要进行归纳思考。从最小的塔开始移动，然后问自己：如果我能做到，我该如何移动更大的塔？

由于移动大小为 1 的塔是微不足道的，让我们从大小为 2 的塔开始：

## 基本情况

将一个大小为 2 的塔向右移动：

```
|  -  |     |     |
| --- |     |     |
-------------------
Step 1:

|     |     |     |   
| --- |  -  |     |
-------------------
Step 2:

|     |     |     |
| --- |     |  -  |
-------------------
Step 3:

|     |     |     |
|     | --- |  -  |
-------------------
Step 4:

|     |     |     |
|  -  | --- |     |
-------------------
Step 5:

|     |  -  |     |
|     | --- |     |
------------------- 
```

这演示了如何将塔的一个钉子向右移动。当然，这也可以用于将塔从第二个钉子移到第三个钉子，或从第三个钉子移到第一个钉子。

## 步

假设你知道如何将一个大小为*n*的塔向右移动一个钉子，下面是你对*n + 1 个*磁盘的操作方法：

```
|    -    |         |         | Move the small tower one peg to the right
|   ---   |         |         |
|  -----  |         |         |
| ------- |         |         |
-------------------------------
Step 1:

|         |         |         | Move it another step to the right
|         |    -    |         |
|         |   ---   |         |
| ------- |  -----  |         |
-------------------------------
Step 2:

|         |         |         | Let's move the n+1 disk one peg to the right
|         |         |    -    |
|         |         |   ---   |
| ------- |         |  -----  |
-------------------------------
Step 3:

|         |         |         | Move the small tower to the right
|         |         |    -    |
|         |         |   ---   |
|         | ------- |  -----  |
-------------------------------
Step 4: 

|         |         |         | Move the small tower another peg to the right
|    -    |         |         |
|   ---   |         |         |
|  -----  | ------- |         |
-------------------------------
Final step:

|         |    -    |         | 
|         |   ---   |         |
|         |  -----  |         |
|         | ------- |         |
------------------------------- 
```

# css - 在 SASS 百分比函数中使用变量

> ID：13542164
> 
> 赞同：3
> 
> 时间：2012-11-24T14:29:40.890
> 
> 标签：css, sass

出于某种原因，当我这样做时，我的 SASS 没有编译：

假设这是我的全局变量：

```
$gridColumnCount: 12;

@function gridCalc($colNumber, $totalColumns) {
    @return percentage(($colNumber / $totalColumns));
}

@mixin columns($columnSpan: 1) {
    width: gridCalc($columnSpan, $gridColumnCount);
} 
```

返回此错误并且`scss`文件无法编译。

> 语法错误：“1/12”不是“百分比”的无单位数

它似乎不是在计算百分比，而是将参数作为字符串返回。

如果我将 mixin 更改为使用非变量参数，一切都会完美运行......就像这样：

```
@mixin columns($columnSpan: 1) {
    width: gridCalc(4, 12);
} 
```

有谁知道我要去哪里错了。

仅供参考：**SASS 版本：3.2.2**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T14:48:44.107

感谢@Wesley Murch，我发现我的代码出了什么问题。我应该使用以下语法调用我的 mixin：

```
@for $i from 1 to $gridColumnCount {
    .span#{$i}, .mq-alpha-resize-to#{$i}  { @include columns($i);  }
} 
```

不是这个：

```
@for $i from 1 to $gridColumnCount {
    .span#{$i}, .mq-alpha-resize-to#{$i}  { @include columns(#{$i});  }
} 
```

原因是 SASS 正在对数字进行[插值。](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#interpolation_)

# c++ - c++ Linux TickCount

> ID：13542165
> 
> 赞同：3
> 
> 时间：2012-11-24T14:29:44.580
> 
> 标签：c++, linux

Linux 上是否有类似 GetTickCount() 的函数？

我已经尝试过其他一些 sutff，但它们根本没有用。

所以它应该返回自启动以来的确切时间（以毫秒为单位）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-11-17T19:00:12.643

```
/// Returns the number of ticks since an undefined time (usually system startup).
static uint64_t GetTickCountMs()
{
    struct timespec ts;

    clock_gettime(CLOCK_MONOTONIC, &ts);

    return (uint64_t)(ts.tv_nsec / 1000000) + ((uint64_t)ts.tv_sec * 1000ull);
} 
```

也很有用...

```
/// Computes the elapsed time, in milliseconds, between two 'timespec'.
inline uint32_t TimeElapsedMs(const struct timespec& tStartTime, const struct timespec& tEndTime)
{
   return 1000*(tEndTime.tv_sec - tStartTime.tv_sec) +
          (tEndTime.tv_nsec - tStartTime.tv_nsec)/1000000;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T14:35:36.983

带有 CLOCK_MONOTONIC 的[clock_gettime是您](http://linux.die.net/man/3/clock_gettime)[似乎正在寻找](https://stackoverflow.com/questions/8357073/get-uptime-in-seconds-or-miliseconds-on-unix-like-systems)的魔法咒语。示例代码，未经测试：

```
struct timespec *t;
t = (struct timespec *)malloc(sizeof(t)); 
clock_gettime(CLOCK_MONOTONIC, t); 
```

让我知道你是怎么办的。我目前不在 Linux 上，因此这只是我所指的手册页的推测。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T15:14:56.213

> 嗯，编译器说它不存在，但我包括了 time.h

它会给你一个编译器或链接器错误吗？如果您收到链接器错误，可能是因为您没有与“rt”库链接。

# iphone - Storyboard 和 Container View 的疯狂行为

> ID：13542170
> 
> 赞同：2
> 
> 时间：2012-11-24T14:31:09.660
> 
> 标签：iphone, xcode, interface-builder, storyboard

我有一个小问题让我发疯。我刚开始为一个非常简单的应用程序创建故事板并运行它我不明白为什么 Xcode 中的故事板外观与运行外观完全不同。

我想下面这两张图片可以比文字更好地解释我的问题。

![Xcode 外观](../Images/6d18c318fe4f9ebd63298a2da230362c.png) 这是 Xcode 的外观，也是我希望在我的 iPhone 屏幕上看到的。默认情况下，所有控制器都配置为推断父控制器的大小。

![运行外观](../Images/66b33d8e5b81023281aecbef4f9e45a0.png)

这是正在运行的外观，我不应该在屏幕上看到它。似乎 TEST 视图控制器的视图不会推断 tabBarController 可用大小的大小，而是与主容器视图的大小相匹配。

任何建议如何解决这个问题，它可能是一个 Xcode 错误吗？我正在运行最新的 Xcode 4.5.2

先感谢您。

**编辑**

我很确定这种行为是由 Apple 在 iOS 6.0 SDK 上引入的新约束机制引起的。最后我找到了情节提要文件的一个选项，即“使用自动布局”。禁用此标志后，Xcode 和 Simulator 之间的应用程序可视化现在是一致的。更准确地说，我认为该错误是由控制器视图和 UITabBar 之间的未命中约束引起的。

我将使用他的错误报告服务通知 Apple 这个疯狂的行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:11:32.077

我建议在 iPhone 设备上使用标签栏作为情节提要的初始视图控制器。不要将其添加为 childViewController。然后将 iAd 添加到 SuperViewController，它是标签栏视图控制器的超类。希望这可以帮助！

# c - 与 C 不兼容的指针类型

> ID：13542172
> 
> 赞同：1
> 
> 时间：2012-11-24T14:31:22.770
> 
> 标签：c, pointers, warnings

我有一个小 C 程序，它需要许多向量及其相应的系数。使用此信息，它可以计算向量的长度（模数）。接下来，程序按向量的长度对数组进行排序，然后以正确的顺序显示所有向量。

一切似乎都很好。但是，当我使用 -wall 和 -ansi 参数编译代码时，会收到以下警告：

```
|23|warning: ISO C90 forbids variable-size array 'v'
|23|warning: ISO C90 forbids mixed declarations and code
|44|warning: passing argument 1 of 'swap' from incompatible pointer type
|44|warning: passing argument 2 of 'swap' from incompatible pointer type 
```

我使用的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <math.h>

void swap(double **p, double **q)
{
    double *tmp;

    tmp = *p;
    *p = *q;
    *q = tmp;
}

int main()
{
    int dim, num;
    int i, j;
    double **w;

    scanf("%d %d", &dim, &num);
    w = calloc(num, sizeof(double *));

    double v[num];

    /* Get vector coefficients for each vector and calculate the length of each vector */
    for(i = 0; i < num; i++)
    {
        w[i] = calloc(dim, sizeof(double));

        for(j = 0; j < dim; j++)
        {
            scanf("%le", &w[i][j]);
            v[i] += pow(w[i][j], 2);
        }
    }

    /* Sort vectors by length */
    for(i = 0; i < num-1; ++i)
    {
        for(j = num-1; j > i; --j)
            if(v[j-1] > v[j])
            {
                swap(&w[j-1], &w[j]);
                swap(&v[j-1], &v[j]);
            }
    }    

    /* Display vectors, including their coefficients, ordered by length */
    for(i = 0; i < num; i++)
    {
        for(j = 0; j < dim; j++)
        {
            printf("%e", w[i][j]);
            if(j != dim)
                printf(" ");
        }
        printf("\n");
    }

    return 0;
} 
```

关于如何解决这些警告的任何想法？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T14:34:17.680

尝试：

```
double *v;
v=(double *)malloc(num * sizeof(double)); 
```

代替

```
double v[num]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T14:37:57.910

您正在尝试使用相同的功能交换两种不同的类型，

```
swap(&w[j-1], &w[j]);
swap(&v[j-1], &v[j]); 
```

`&w[j]`a`double**`和`&v[i]`a在哪里`double*`。那是行不通的，因为 C 没有重载。您甚至不能使用`void*`参数，因为您需要在两者之间存储指向的值。

为此，您需要两个单独的函数，或者一个宏（但这会失去类型安全性）。

至于混合声明和代码以及可变长度数组，使用`-std=c99`代替`-ansi`.

# php - Mysql-Link 资源

> ID：13542173
> 
> 赞同：0
> 
> 时间：2012-11-24T14:31:42.767
> 
> 标签：php, mysql

每次我使用 PHP 进行 INSERT 查询时，都会收到此错误：“提供的参数不是有效的 MySQL-Link 资源”

即便如此，查询也能完美运行，并且数据始终插入到数据库中。

我应该担心吗？

提前致谢！

编辑->这里是查询

函数.php

```
function connect(){

    $h='myip';

    $un='popguest';

    $pw='mypassword';

    $connection = mysql_connect($h, $un, $pw, false);

    if(!$connection){

            die('Error connecting to database: ' . mysql_error());

    }

    mysql_set_charset('uf8',$connection);

    return $connection;

} 
```

启动子.php

```
require_once("../functions/functions.php");
$f = new functions();
$f->connect();

$username=$_COOKIE["username"];
$p=$_GET['p'];

mysql_query('SET character_set_connection=utf8');
mysql_query('SET character_set_client=utf8');
mysql_query('SET character_set_results=utf8');
$result3 = mysql_query("INSERT IGNORE INTO popguest.guest (username, promoter) VALUES ('$username', '$p')"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T17:00:56.663

尝试：

```
$connection = mysql_connect($h, $un, $pw); 
```

尝试：

```
$f = new functions();
$link = $f->connect();
$username = mysql_real_escape_string($_COOKIE['username']);
$p = mysql_real_escape_string($_GET['p']);
$result3 = mysql_query("INSERT IGNORE INTO popguest.guest (username, promoter) VALUES ('$username', '$p')",$link); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T14:37:47.330

您是否正在转义您插入的数据？

如果使用 MYSQLi，请查看：http: [//uk1.php.net/manual/en/mysqli.real-escape-string.php](http://uk1.php.net/manual/en/mysqli.real-escape-string.php)

否则，请看这里： [http ://uk1.php.net/manual/en/function.mysql-real-escape-string.php](http://uk1.php.net/manual/en/function.mysql-real-escape-string.php)

通常，您应该始终在将数据提交到数据库之前对其进行转义:)

希望这可以帮助！

# javascript - THREE.js Ray Intersect 通过添加 div 失败

> ID：13542175
> 
> 赞同：19
> 
> 时间：2012-11-24T14:32:00.503
> 
> 标签：javascript, html, three.js

当页面上只有一个目标 div（包含 renderer.domElement）时，我的 Three.js 脚本运行良好。一旦我在目标 div 上方添加另一个具有固定高度和宽度的 div，ray.intersectObjects 就会返回 null。我怀疑我为 ray 创建的向量是否会导致问题。这是代码。

```
var vector = new THREE.Vector3( ( event.clientX / divWidth ) * 2 - 1, -( event.clientY / divHeight ) * 2 + 1, 0.5 );

projector.unprojectVector( vector, camera );

var ray = new THREE.Ray( camera.position, vector.subSelf( camera.position ).normalize() );

var intersects = ray.intersectObjects( myObjects, true ); 
```

关于如何解决这个问题的任何想法。

编辑：现在是`THREE.Raycaster` （three.js r.56）

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-11-24T18:34:04.313

简短的回答是你必须考虑`offset`画布的。

长答案取决于你的代码是如何编写的，所以我会给你两个答案，它们应该涵盖基础。

有很多可能的组合，因此您可能需要进行实验。此外，不同的浏览器可能会有不同的行为。

假设您的 HTML 是这样的：

```
#canvas {
    width: 200px;
    height: 200px;
    margin: 100px;
    padding: 0px;
    position: static; /* fixed or static */
    top: 100px;
    left: 100px;
}

<body>
    <div id="canvas">
</body> 
```

你的 JS 是这样的：

```
var CANVAS_WIDTH = 200,
CANVAS_HEIGHT = 200;

var container = document.getElementById( 'canvas' );
document.body.appendChild( container );

renderer = new THREE.WebGLRenderer();
renderer.setSize( CANVAS_WIDTH, CANVAS_HEIGHT );
container.appendChild( renderer.domElement ); 
```

**方法 1**为使以下方法正常工作，请将画布位置设置为*static*；margin > 0 和 padding > 0 都可以

```
mouse.x = ( ( event.clientX - renderer.domElement.offsetLeft ) / renderer.domElement.clientWidth ) * 2 - 1;
mouse.y = - ( ( event.clientY - renderer.domElement.offsetTop ) / renderer.domElement.clientHeight ) * 2 + 1; 
```

**方法2**对于这种替代方法，将画布位置设置为*固定*；置顶 > 0，置左 > 0；填充必须为 0；边距 > 0 是可以的

```
mouse.x = ( ( event.clientX - container.offsetLeft ) / container.clientWidth ) * 2 - 1;
mouse.y = - ( ( event.clientY - container.offsetTop ) / container.clientHeight ) * 2 + 1; 
```

如果你想实验，这里是一个小提琴：http: [//jsfiddle.net/cn7ecoaa/](http://jsfiddle.net/cn7ecoaa/)

编辑：小提琴更新为 three.js r.84

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-10-18T10:40:18.507

**enent.clientX**是客户端窗口偏移量，因此要计算鼠标位置，我们还必须使用渲染器元素客户端窗口偏移量。使用 element.getBoundingClientRect() 获取元素矩形偏移窗口。

```
var rect = renderer.domElement.getBoundingClientRect();
mouse.x = ( ( event.clientX - rect.left ) / ( rect.width - rect.left ) ) * 2 - 1;
mouse.y = - ( ( event.clientY - rect.top ) / ( rect.bottom - rect.top) ) * 2 + 1; 
```

```
<html>
<head>
<script src="http://threejs.org/build/three.min.js"></script>

    <link rel="stylesheet" href="http://libs.baidu.com/bootstrap/3.0.3/css/bootstrap.min.css" />

<style>
body {
    font-family: Monospace;
    background-color: #fff;
    margin: 0px;
    overflow: hidden;
}

#canvas {
    background-color: #000;
    width: 200px;
    height: 200px;
    border: 1px solid black;
    margin: 10px;
    padding: 0px;
    top: 10px;
    left: 100px;
}

.border {
    padding:10px; 
    margin:10px;
}

</style>
</head>
<body>
<div class="border">
	<div class="border">
		<div id="canvas"></div>
	</div>
</div>
<script>
// Three.js ray.intersects with offset canvas

var container, camera, scene, renderer, mesh,

    objects = [],

    count = 0,

    CANVAS_WIDTH = 200,
    CANVAS_HEIGHT = 200;

// info
info = document.createElement( 'div' );
info.style.position = 'absolute';
info.style.top = '30px';
info.style.width = '100%';
info.style.textAlign = 'center';
info.style.color = '#f00';
info.style.backgroundColor = 'transparent';
info.style.zIndex = '1';
info.style.fontFamily = 'Monospace';
info.innerHTML = 'INTERSECT Count: ' + count;
info.style.userSelect = "none";
info.style.webkitUserSelect = "none";
info.style.MozUserSelect = "none";
document.body.appendChild( info );

container = document.getElementById( 'canvas' );

renderer = new THREE.WebGLRenderer();
renderer.setSize( CANVAS_WIDTH, CANVAS_HEIGHT );
container.appendChild( renderer.domElement );

scene = new THREE.Scene();

camera = new THREE.PerspectiveCamera( 45, CANVAS_WIDTH / CANVAS_HEIGHT, 1, 1000 );
camera.position.y = 250;
camera.position.z = 500;
camera.lookAt( scene.position );
scene.add( camera );

scene.add( new THREE.AmbientLight( 0x222222 ) );

var light = new THREE.PointLight( 0xffffff, 1 );
camera.add( light );

mesh = new THREE.Mesh( 
	new THREE.BoxGeometry( 200, 200, 200, 1, 1, 1 ), 
	new THREE.MeshPhongMaterial( { color : 0x0080ff } 
) );
scene.add( mesh );
objects.push( mesh );

// find intersections
var raycaster = new THREE.Raycaster();
var mouse = new THREE.Vector2();

// mouse listener
document.addEventListener( 'mousedown', function( event ) {

 var rect = renderer.domElement.getBoundingClientRect();
mouse.x = ( ( event.clientX - rect.left ) / ( rect.width - rect.left ) ) * 2 - 1;
mouse.y = - ( ( event.clientY - rect.top ) / ( rect.bottom - rect.top) ) * 2 + 1;

	raycaster.setFromCamera( mouse, camera );

    intersects = raycaster.intersectObjects( objects );

    if ( intersects.length > 0 ) {

        info.innerHTML = 'INTERSECT Count: ' + ++count;

    }

}, false );

function render() {

    mesh.rotation.y += 0.01;

    renderer.render( scene, camera );

}

(function animate() {

    requestAnimationFrame( animate );

    render();

})();

</script>
</body>
</html>
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-02-25T11:04:13.030

WestLangley，非常感谢您的解释。像往常一样真的很有帮助。

就我而言，我将图表放在绝对定位的 div 中，所以我必须这样做：

```
 var offset = $('.rightBlock').offset();

    mouse.x = ( ( event.clientX - offset.left ) / renderer.domElement.width ) * 2 - 1;
    mouse.y = - ( ( event.clientY - offset.top ) / renderer.domElement.height ) * 2 + 1; 
```

rightBlock 是我的容器，它只使用了 70% 的屏幕。

您启发了我并帮助我解决了这个有问题的问题！非常感谢。

# macos - 山狮上的 Applescript GUI

> ID：13542179
> 
> 赞同：2
> 
> 时间：2012-11-24T14:32:13.577
> 
> 标签：macos, pdf-generation, applescript, osx-mountain-lion

我正在尝试制作一个脚本，用 safari 打开一个 swf 文件，然后使用内置的“另存为 PDF”功能将其打印为 pdf。到目前为止，我的代码如下所示：

```
set appleworksFolder to choose folder

tell application "Finder"
set folderItems to (files of entire contents of appleworksFolder)
repeat with I from 1 to number of items in folderItems
    set the_doc to item I of folderItems
    set doc_name to name of the_doc as text
    tell application "Finder"
        set the clipboard to doc_name & ".pdf"
    end tell
    if name of the_doc is not ".DS_Store" then
        try
            tell application "Safari"
            activate
                open the_doc
                tell application "System Events"
                    tell application process "Safari"
                        delay 1
                        click menu item "Print…" of menu "File" of menu bar 1
                        delay 5
                        click menu button "PDF" of window "Print" of application process "Safari" of application "System Events"
                        delay 1
                        click menu item "Save as PDF…" of menu "PDF" of menu button "PDF" of window "Print" of application process "Safari" of application "System Events"
                        delay 1
                        keystroke "v" using command down
                        click button "Save" of window "Save" of application process "Safari" of application "System Events"
                        delay 8
                        keystroke "w" using command down
                        delay 0.5
                    end tell
                end tell
            end tell
        end try
    end if
end repeat
end tell 
```

这可以看到打印对话框，但它似乎没有点击 pdf 菜单按钮，所以没有比这更进一步的了。我想知道这是否是山狮不让我使用applescript来控制按钮的问题，如果是这样，是否有解决方法？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T20:12:15.500

我刚刚在另一个网站上向某人展示了如何在 Mail 中执行此操作。您可以在[此处](http://macscripter.net/viewtopic.php?id=39881)的帖子 #7 中看到这一点。无论如何，这是针对您的详细信息和 Safari 调整的代码。我希望它有帮助！

```
set appleworksFolder to choose folder

tell application "Finder"
    set folderItems to (files of entire contents of appleworksFolder) as alias list
end tell

repeat with i from 1 to count of folderItems
    set thisItem to (item i of folderItems) as text

    tell application "Finder"
        set n to name of file thisItem
        set c to (container of file thisItem) as text
    end tell

    tell application "Safari"
        activate
        open file thisItem
    end tell

    saveAsPDFInSafari(c, n, true)
end repeat

tell me
    activate
    display dialog "Finished!" buttons {"OK"} default button 1 with icon note
end tell

(*********** SUBROUTINES *************)
on saveAsPDFInSafari(saveFolder, saveFileName, shouldCloseWhenFinished)
    set myDelay to 0.2

    -- setup the name
    if saveFileName does not end with ".pdf" then
        if character -4 of saveFileName is "." then
            set saveFileName to text 1 thru -5 of saveFileName
        end if
        set saveFileName to saveFileName & ".pdf"
    end if

    -- setup the folder
    set saveFolder to saveFolder as text
    set posixSaveFolder to POSIX path of saveFolder
    if posixSaveFolder ends with "/" then set posixSaveFolder to text 1 thru -2 of posixSaveFolder

    -- save as pdf
    tell application "Safari" to activate
    tell application "System Events"
        tell process "Safari"
            keystroke "p" using command down
            repeat until exists sheet 1 of window 1
                delay myDelay
            end repeat

            tell sheet 1 of window 1
                click menu button "PDF"
                repeat until exists menu 1 of menu button "PDF"
                    delay myDelay
                end repeat

                click menu item "Save as PDF…" of menu 1 of menu button "PDF"

            end tell

            repeat until exists (sheet 1 of sheet 1 of window 1)
                delay myDelay
            end repeat

            keystroke saveFileName
            delay myDelay

            keystroke "g" using {command down, shift down}
            repeat until exists sheet 1 of sheet 1 of sheet 1 of window 1
                delay myDelay
            end repeat

            tell sheet 1 of sheet 1 of sheet 1 of window 1
                set value of text field 1 to posixSaveFolder
                delay myDelay
                click button "Go"
            end tell

            repeat while exists sheet 1 of sheet 1 of sheet 1 of window 1
                delay myDelay
            end repeat

            tell sheet 1 of sheet 1 of window 1
                click button "Save"
            end tell

            repeat while exists sheet 1 of sheet 1 of window 1
                delay myDelay
            end repeat

            repeat while exists sheet 1 of window 1
                delay myDelay
            end repeat

            if shouldCloseWhenFinished then
                keystroke "w" using command down
            end if
        end tell
    end tell
end saveAsPDFInSafari 
```

# jquery - 在悬停背景图像展开

> ID：13542181
> 
> 赞同：0
> 
> 时间：2012-11-24T14:32:16.527
> 
> 标签：jquery, css, jquery-animate, jquery-hover

我有一个图像覆盖另一个图像，我希望后面的图像在悬停时展开。问题是我无法使背后图像（背景图像）均匀扩展。它向右上方生长。

```
$(".wooll").hover(function() {
    $(this).animate({
        'height': $(this).height() * 1.8,
        'width' : $(this).width() * 1.8
    });
},function() {
   $(this).animate({
        'height': $(this).height() / 1.8,
        'width' : $(this).width() / 1.8
    });
}); 
```

**如何将它定位在父 div 的中心以使其均匀扩展？**

```
<div id="woolley-expand">

<img class="wooll" style="text-align: center; position: absolute; bottom: 0px;" src="/images/component-bottle-big.png" width="60" height="117" />
<img src="/images/free-spray-text.png" style="position: absolute; bottom: 0; left: 0;"/>
</div>

#woolley-expand {
position: relative;
width: 200px;
height: 300px;
} 
```

# java - 拆分组件和通信

> ID：13542190
> 
> 赞同：0
> 
> 时间：2012-11-24T14:33:43.097
> 
> 标签：java, swing, coupling

我有一个扩展 JFrame 的主类（Main.java）。

主类包含一个包含两个面板的左面板。第一个（组件）包含许多 TabelPanel，第二个名为 Property。

我有一个中心面板（设计）和一个底部面板，其中包含一个按钮。设计面板包含一个 jtree。

我从组件面板中获取元素，然后拖放到 jtree。当我在 jtree 中选择一个元素时，我需要向属性面板显示信息。

当我单击底部（底部面板）时，我需要迭代到 jtree 面板。

而不是到处都有参考，避免这种情况的最佳方法是什么？

# javascript - 点击事件在移动设备上无法使用 JavaScript 动态构建元素

> ID：13542193
> 
> 赞同：1
> 
> 时间：2012-11-24T14:34:13.563
> 
> 标签：javascript, dom-events, createelement

这就是我构建 DOM 的方式：

```
var projectOverlay = document.createElement("div");
projectOverlay.className = "projectOverlay";
projectOverlay.onclick = function(){openSlider($(this))};   
project.appendChild(projectOverlay); 
```

该`openslider(elem)`功能在除移动设备（Android 手机、iPhone、iPad 等）之外的所有浏览器中都能正常工作。有没有其他方法可以将事件绑定到尚未创建的元素，或者我在这里做错了什么？

在写你的答案之前一定要看看这个链接... [js/jquery 速度测试](http://jsperf.com/jquery-vs-createelement)

# native - 当应用程序内存达到 1.2G 时，Java VM 崩溃。有什么出路吗？

> ID：13542197
> 
> 赞同：1
> 
> 时间：2012-11-24T14:35:00.337
> 
> 标签：native, jvm-crash

我正在运行长时间浸泡（从几个小时到几天）的自动化测试用例。每当内存使用量达到大约 1.2G 时，大约 4 个小时过去了，Java 应用程序就会崩溃并生成以下 err 日志文件。操作系统是windows，64位。

您是否在产品中遇到过同样的问题？有哪位巨人能帮我一个忙，给我一条出路吗？

先感谢您！

坦率

* * *

```
#
# An unexpected error has been detected by Java Runtime Environment:
#
#  Internal Error (0xe06d7363), pid=2892, tid=3976
#
# Java VM: Java HotSpot(TM) Client VM (11.3-b02 mixed mode windows-x86)
# Problematic frame:
# C  [KERNELBASE.dll+0xb9bc]
#
# If you would like to submit a bug report, please visit:
#   http://java.sun.com/webapps/bugreport/crash.jsp
# The crash happened outside the Java Virtual Machine in native code.
# See problematic frame for where to report the bug.
#

---------------  T H R E A D  ---------------

Current thread (0x02659400):  JavaThread "main" [_thread_in_native, id=3976, stack(0x00090000,0x00190000)]

siginfo: ExceptionCode=0xe06d7363, ExceptionInformation=0x19930520 0x0018b014 0x7336aa04 

Registers:
EAX=0x0018af7c, EBX=0x72c9312c, ECX=0x00000003, EDX=0x00000000
ESP=0x0018af7c, EBP=0x0018afcc, ESI=0x0018b0b8, EDI=0x0018b0a8
EIP=0x76c0b9bc, EFLAGS=0x00000202

Top of Stack: (sp=0x0018af7c)
0x0018af7c:   e06d7363 00000001 00000000 76c0b9bc
0x0018af8c:   00000003 19930520 0018b014 7336aa04
0x0018af9c:   00000008 732d2e76 28a19088 0018b0a8
0x0018afac:   72c9312c 0018b0b8 0018afc0 732d24c4
0x0018afbc:   73376ba8 0018b000 732d17b7 00000008
0x0018afcc:   0018b004 732fc3ab e06d7363 00000001
0x0018afdc:   00000003 0018aff8 e06d7363 00000001
0x0018afec:   00000000 00000000 00000003 19930520 

Instructions: (pc=0x76c0b9bc)
0x76c0b9ac:   0c eb 03 89 45 c0 8d 45 b0 50 ff 15 5c 11 c0 76
0x76c0b9bc:   c9 c2 10 00 cc cc cc cc cc 8b ff 55 8b ec 56 8b 

Stack: [0x00090000,0x00190000],  sp=0x0018af7c,  free space=1003k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
C  [KERNELBASE.dll+0xb9bc]
C  [MOZCRT19.dll+0x2c3ab]
C  [MOZCRT19.dll+0x34d93]
C  [xul.dll+0x2ccff3]
C  [xul.dll+0x592ca0]
C  [xul.dll+0x13077]
C  [js3250.dll+0x3a2e]

Java frames: (J=compiled Java code, j=interpreted, Vv=VM code)
J  org.eclipse.swt.internal.win32.OS.DispatchMessageW(Lorg/eclipse/swt/internal/win32/MSG;)I
J  org.eclipse.swt.widgets.Display.readAndDispatch()Z
J  org.eclipse.ui.internal.Workbench.runEventLoop(Lorg/eclipse/jface/window/Window$IExceptionHandler;Lorg/eclipse/swt/widgets/Display;)V
j  org.eclipse.ui.internal.Workbench.runUI()I+555
j  org.eclipse.ui.internal.Workbench.access$4(Lorg/eclipse/ui/internal/Workbench;)I+1
j  org.eclipse.ui.internal.Workbench$7.run()V+55
j  org.eclipse.core.databinding.observable.Realm.runWithDefault(Lorg/eclipse/core/databinding/observable/Realm;Ljava/lang/Runnable;)V+12
j  org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Lorg/eclipse/swt/widgets/Display;Lorg/eclipse/ui/application/WorkbenchAdvisor;)I+18
j  org.eclipse.ui.PlatformUI.createAndRunWorkbench(Lorg/eclipse/swt/widgets/Display;Lorg/eclipse/ui/application/WorkbenchAdvisor;)I+2
j  com.xxx.svt.rcp.Application.runWorkbench()Ljava/lang/Integer;+13
j  com.xxx.svt.rcp.Application.start(Lorg/eclipse/equinox/app/IApplicationContext;)Ljava/lang/Object;+567
j  org.eclipse.equinox.internal.app.EclipseAppHandle.run(Ljava/lang/Object;)Ljava/lang/Object;+135
j  org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(Ljava/lang/Object;)Ljava/lang/Object;+103
j  org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(Ljava/lang/Object;)Ljava/lang/Object;+29
j  org.eclipse.core.runtime.adaptor.EclipseStarter.run(Ljava/lang/Object;)Ljava/lang/Object;+149
j  org.eclipse.core.runtime.adaptor.EclipseStarter.run([Ljava/lang/String;Ljava/lang/Runnable;)Ljava/lang/Object;+183
v  ~StubRoutines::call_stub
j  sun.reflect.NativeMethodAccessorImpl.invoke0(Ljava/lang/reflect/Method;Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;+0
j  sun.reflect.NativeMethodAccessorImpl.invoke(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;+87
j  sun.reflect.DelegatingMethodAccessorImpl.invoke(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;+6
j  java.lang.reflect.Method.invoke(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;+161
j  org.eclipse.equinox.launcher.Main.invokeFramework([Ljava/lang/String;[Ljava/net/URL;)V+211
j  org.eclipse.equinox.launcher.Main.basicRun([Ljava/lang/String;)V+126
j  org.eclipse.equinox.launcher.Main.run([Ljava/lang/String;)I+4
v  ~StubRoutines::call_stub

---------------  P R O C E S S  ---------------

Java Threads: ( => current thread )
  0x2600cc00 JavaThread "ExecutionThread-1" [_thread_blocked, id=3652, stack(0x27b50000,0x27b80000)]
  0x2600b000 JavaThread "Worker-35" [_thread_blocked, id=2696, stack(0x34ff0000,0x35020000)]
  0x2600d400 JavaThread "Worker-34" [_thread_blocked, id=2284, stack(0x33030000,0x33060000)]
  0x2b03a000 JavaThread "Worker-33" [_thread_blocked, id=3872, stack(0x32c10000,0x32c40000)]
  0x2b03b800 JavaThread "ExecutionThread-1" [_thread_blocked, id=2460, stack(0x2cab0000,0x2cae0000)]
  0x2600a400 JavaThread "ConsoleLoggerThread" [_thread_blocked, id=3604, stack(0x2c680000,0x2c6b0000)]
  0x2b03b400 JavaThread "Worker-32" [_thread_blocked, id=2188, stack(0x27500000,0x27530000)]
  0x24ead000 JavaThread "Worker-29" [_thread_blocked, id=2576, stack(0x43870000,0x438a0000)]
  0x24eb1c00 JavaThread "Timer-4" daemon [_thread_blocked, id=3440, stack(0x2bfb0000,0x2bfe0000)]
  0x24eb3400 JavaThread "derby.rawStoreDaemon" daemon [_thread_blocked, id=1448, stack(0x2c590000,0x2c5c0000)]
  0x24eb2c00 JavaThread "Thread-15" [_thread_blocked, id=2496, stack(0x2c520000,0x2c550000)]
  0x24eb2800 JavaThread "Worker-6" [_thread_blocked, id=3232, stack(0x2bfe0000,0x2c010000)]
  0x24eae400 JavaThread "Thread-13" daemon [_thread_blocked, id=3904, stack(0x2bf40000,0x2bf70000)]
  0x24eb1800 JavaThread "Timer-2" daemon [_thread_blocked, id=3840, stack(0x2ac10000,0x2ac40000)]
  0x24eb1000 JavaThread "derby.rawStoreDaemon" daemon [_thread_blocked, id=2556, stack(0x2aa80000,0x2aab0000)]
  0x24eb0c00 JavaThread "Timer-1" daemon [_thread_blocked, id=3948, stack(0x2a8a0000,0x2a8d0000)]
  0x24eb0400 JavaThread "derby.antiGC" daemon [_thread_blocked, id=2620, stack(0x2a870000,0x2a8a0000)]
  0x24eb0000 JavaThread "Timer-0" daemon [_thread_blocked, id=2584, stack(0x2a800000,0x2a830000)]
  0x24eaf800 JavaThread "29059446@qtp-19860713-1 - Acceptor0 SelectChannelConnector@0.0.0.0:64365" [_thread_in_native, id=2924, stack(0x2a4a0000,0x2a4d0000)]
  0x24eaf400 JavaThread "28149392@qtp-19860713-0" [_thread_blocked, id=3768, stack(0x29850000,0x29880000)]
  0x24eae800 JavaThread "Bundle File Closer" daemon [_thread_blocked, id=3972, stack(0x287c0000,0x287f0000)]
  0x24ead800 JavaThread "Workspace server" [_thread_in_native, id=3088, stack(0x27bc0000,0x27bf0000)]
  0x24eacc00 JavaThread "Workspace monitor" [_thread_blocked, id=3404, stack(0x27ae0000,0x27b10000)]
  0x26069800 JavaThread "Fanfare Heartbeat" daemon [_thread_blocked, id=3816, stack(0x26460000,0x26490000)]
  0x24e86800 JavaThread "Worker-JM" [_thread_blocked, id=2600, stack(0x25950000,0x25980000)]
  0x24dab000 JavaThread "[ThreadPool Manager] - Idle Thread" daemon [_thread_blocked, id=2936, stack(0x258b0000,0x258e0000)]
  0x24e4d000 JavaThread "[Timer] - Main Queue Handler" daemon [_thread_blocked, id=2804, stack(0x25920000,0x25950000)]
  0x24daa400 JavaThread "Framework Event Dispatcher" daemon [_thread_blocked, id=2444, stack(0x25840000,0x25870000)]
  0x24dc7800 JavaThread "Start Level Event Dispatcher" daemon [_thread_blocked, id=2740, stack(0x257d0000,0x25800000)]
  0x24dc7000 JavaThread "State Data Manager" daemon [_thread_blocked, id=3776, stack(0x24f00000,0x24f30000)]
  0x02549400 JavaThread "Low Memory Detector" daemon [_thread_blocked, id=3336, stack(0x24b90000,0x24bc0000)]
  0x02543c00 JavaThread "CompilerThread0" daemon [_thread_blocked, id=548, stack(0x24a50000,0x24b50000)]
  0x02543800 JavaThread "Attach Listener" daemon [_thread_blocked, id=2104, stack(0x249e0000,0x24a10000)]
  0x02538c00 JavaThread "Signal Dispatcher" daemon [_thread_blocked, id=3004, stack(0x24970000,0x249a0000)]
  0x02501000 JavaThread "Finalizer" daemon [_thread_blocked, id=2776, stack(0x24900000,0x24930000)]
  0x024fc800 JavaThread "Reference Handler" daemon [_thread_blocked, id=696, stack(0x01d70000,0x01da0000)]
=>0x02659400 JavaThread "main" [_thread_in_native, id=3976, stack(0x00090000,0x00190000)]

Other Threads:
  0x024f7c00 VMThread [stack: 0x24800000,0x24900000] [id=2588]
  0x02552c00 WatcherThread [stack: 0x24c00000,0x24d00000] [id=2256]

VM state:not at safepoint (normal execution)

VM Mutex/Monitor currently owned by a thread: None

Heap
 def new generation   total 9216K, used 2445K [0x04660000, 0x05050000, 0x05a10000)
  eden space 8256K,  23% used [0x04660000, 0x0484cc08, 0x04e70000)
  from space 960K,  49% used [0x04e70000, 0x04ee69c0, 0x04f60000)
  to   space 960K,   0% used [0x04f60000, 0x04f60000, 0x05050000)
 tenured generation   total 121024K, used 42844K [0x05a10000, 0x0d040000, 0x14660000)
   the space 121024K,  35% used [0x05a10000, 0x083e70a8, 0x083e7200, 0x0d040000)
 compacting perm gen  total 131072K, used 64856K [0x14660000, 0x1c660000, 0x24660000)
   the space 131072K,  49% used [0x14660000, 0x185b6380, 0x185b6400, 0x1c660000)
No shared spaces configured.

Dynamic libraries:
0x00400000 - 0x0040d000     C:\Program Files (x86)\xxxxxxxxxx\ttttt 4.2\ttttt.exe
0x77b80000 - 0x77d00000     C:\Windows\SysWOW64\ntdll.dll
0x76db0000 - 0x76ec0000     C:\Windows\syswow64\kernel32.dll
0x76c00000 - 0x76c46000     C:\Windows\syswow64\KERNELBASE.dll
0x752f0000 - 0x753f0000     C:\Windows\syswow64\USER32.dll
0x754e0000 - 0x75570000     C:\Windows\syswow64\GDI32.dll
0x75860000 - 0x7586a000     C:\Windows\syswow64\LPK.dll
0x755b0000 - 0x7564d000     C:\Windows\syswow64\USP10.dll
0x76c50000 - 0x76cfc000     C:\Windows\syswow64\msvcrt.dll
0x77220000 - 0x772c0000     C:\Windows\syswow64\ADVAPI32.dll
0x768a0000 - 0x768b9000     C:\Windows\SysWOW64\sechost.dll
0x753f0000 - 0x754e0000     C:\Windows\syswow64\RPCRT4.dll
0x75260000 - 0x752c0000     C:\Windows\syswow64\SspiCli.dll
0x75250000 - 0x7525c000     C:\Windows\syswow64\CRYPTBASE.dll
0x733e0000 - 0x73464000     C:\Windows\WinSxS\x86_microsoft.windows.common-controls_6595b64144ccf1df_5.82.7601.17514_none_ec83dffa859149af\COMCTL32.dll
0x77190000 - 0x771f0000     C:\Windows\system32\IMM32.DLL
0x76b30000 - 0x76bfc000     C:\Windows\syswow64\MSCTF.dll
0x72000000 - 0x7200d000     C:\Program Files (x86)\xxxxxxxxxx\ttttt 4.2\plugins\org.eclipse.equinox.launcher.win32.win32.x86_1.1.1.R36x_v20100810\eclipse_1309.dll
0x73970000 - 0x73979000     C:\Windows\system32\VERSION.dll
0x6d800000 - 0x6da56000     C:\Program Files (x86)\xxxxxxxxxx\ttttt 4.2\jre\bin\client\jvm.dll
0x736c0000 - 0x736f2000     C:\Windows\system32\WINMM.dll
0x7c340000 - 0x7c396000     C:\Program Files (x86)\xxxxxxxxxx\ttttt 4.2\jre\bin\MSVCR71.dll
0x6e350000 - 0x6e39c000     C:\Windows\system32\apphelp.dll
0x6d290000 - 0x6d298000     C:\Program Files (x86)\xxxxxxxxxx\ttttt 4.2\jre\bin\hpi.dll
0x768c0000 - 0x768c5000     C:\Windows\syswow64\PSAPI.DLL
0x6d7b0000 - 0x6d7bc000     C:\Program Files (x86)\xxxxxxxxxx\ttttt 4.2\jre\bin\verify.dll
0x6d330000 - 0x6d34f000     C:\Program Files (x86)\xxxxxxxxxx\ttttt 4.2\jre\bin\java.dll
0x6d7f0000 - 0x6d7ff000     C:\Program Files (x86)\xxxxxxxxxx\ttttt 4.2\jre\bin\zip.dll
0x71fa0000 - 0x71fb6000     C:\Windows\system32\CRYPTSP.dll
0x71db0000 - 0x71deb000     C:\Windows\system32\rsaenh.dll
0x734d0000 - 0x734e7000     C:\Windows\system32\USERENV.dll
0x73a00000 - 0x73a0b000     C:\Windows\system32\profapi.dll
0x6d610000 - 0x6d623000     C:\Program Files (x86)\xxxxxxxxxx\ttttt 4.2\jre\bin\net.dll
0x75570000 - 0x755a5000     C:\Windows\syswow64\WS2_32.dll
0x76b20000 - 0x76b26000     C:\Windows\syswow64\NSI.dll
0x70f90000 - 0x70fcc000     C:\Windows\system32\mswsock.dll
0x6f3a0000 - 0x6f3a6000     C:\Windows\System32\wship6.dll
0x70670000 - 0x70680000     C:\Windows\system32\NLAapi.dll
0x739d0000 - 0x739e0000     C:\Windows\system32\napinsp.dll
0x739b0000 - 0x739c2000     C:\Windows\system32\pnrpnsp.dll
0x6f370000 - 0x6f397000     C:\Program Files (x86)\Common Files\Microsoft Shared\Windows Live\WLIDNSP.DLL
0x75650000 - 0x756a7000     C:\Windows\syswow64\SHLWAPI.dll
0x72070000 - 0x720b4000     C:\Windows\system32\DNSAPI.dll
0x739e0000 - 0x739e8000     C:\Windows\System32\winrnr.dll
0x710a0000 - 0x710a5000     C:\Windows\System32\wshtcpip.dll
0x73950000 - 0x7396c000     C:\Windows\system32\IPHLPAPI.DLL
0x73940000 - 0x73947000     C:\Windows\system32\WINNSI.DLL
0x6f2e0000 - 0x6f2e6000     C:\Windows\system32\rasadhlp.dll
0x6f2a0000 - 0x6f2d8000     C:\Windows\System32\fwpuclnt.dll
0x73b40000 - 0x73bc0000     C:\Windows\system32\uxtheme.dll
0x76f10000 - 0x7706c000     C:\Windows\system32\ole32.dll
0x6d630000 - 0x6d639000     C:\Program Files (x86)\xxxxxxxxxx\ttttt 4.2\jre\bin\nio.dll
0x77100000 - 0x7718f000     C:\Windows\syswow64\OLEAUT32.DLL
0x26310000 - 0x26373000     C:\Program Files (x86)\xxxxxxxxxx\ttttt 4.2\configuration\org.eclipse.osgi\bundles\527\1\.cp\swt-win32-3655.dll
0x75870000 - 0x758eb000     C:\Windows\syswow64\comdlg32.dll
0x73bc0000 - 0x73d5e000     C:\Windows\WinSxS\x86_microsoft.windows.common-controls_6595b64144ccf1df_6.0.7601.17514_none_41e6975e2bd6f2b2\COMCTL32.dll
0x75a90000 - 0x766da000     C:\Windows\syswow64\SHELL32.dll
0x756b0000 - 0x757cb000     C:\Windows\syswow64\WININET.dll
0x77b50000 - 0x77b53000     C:\Windows\syswow64\Normaliz.dll
0x766e0000 - 0x76898000     C:\Windows\syswow64\iertutil.dll
0x76a00000 - 0x76b11000     C:\Windows\syswow64\urlmon.dll
0x73470000 - 0x73483000     C:\Windows\system32\dwmapi.dll
0x24fd0000 - 0x24fed000     C:\Program Files (x86)\xxxxxxxxxx\ttttt 4.2\configuration\org.eclipse.osgi\bundles\527\1\.cp\swt-gdip-win32-3655.dll
0x73700000 - 0x73890000     C:\Windows\WinSxS\x86_microsoft.windows.gdiplus_6595b64144ccf1df_1.1.7601.17825_none_72d273598668a06b\gdiplus.dll
0x25300000 - 0x2530e000     C:\Program Files (x86)\xxxxxxxxxx\ttttt 4.2\configuration\org.eclipse.osgi\bundles\371\1\.cp\os\win32\x86\localfile_1_0_0.dll
0x267d0000 - 0x26993000     C:\Program Files (x86)\xxxxxxxxxx\ttttt 4.2\plugins\com.xxx.svt.configuration.licensing.flexlm.nativeprovider.win32_4.2.0.64338\flexlm\lmgr11.dll
0x736a0000 - 0x736b1000     C:\Windows\system32\NETAPI32.dll
0x739a0000 - 0x739a9000     C:\Windows\system32\netutils.dll
0x73980000 - 0x73999000     C:\Windows\system32\srvcli.dll
0x73690000 - 0x7369f000     C:\Windows\system32\wkscli.dll
0x73680000 - 0x73687000     C:\Windows\system32\WSOCK32.dll
0x734f0000 - 0x7352c000     C:\Windows\system32\oleacc.dll
0x272d0000 - 0x274c0000     C:\Program Files (x86)\xxxxxxxxxx\ttttt 4.2\configuration\org.eclipse.osgi\bundles\224\1\.cp\flexlm_license.dll
0x71090000 - 0x7109d000     C:\Windows\system32\dhcpcsvc6.DLL
0x70f70000 - 0x70f82000     C:\Windows\system32\dhcpcsvc.DLL
0x73670000 - 0x73673000     C:\Windows\system32\icmp.Dll
0x73630000 - 0x73659000     C:\Windows\system32\WINSTA.dll
0x73a40000 - 0x73b35000     C:\Windows\system32\propsys.dll
0x77070000 - 0x770f3000     C:\Windows\syswow64\CLBCatQ.DLL
0x6ef60000 - 0x6f0cf000     C:\Windows\system32\explorerframe.dll
0x6ef30000 - 0x6ef5f000     C:\Windows\system32\DUser.dll
0x6ee70000 - 0x6ef22000     C:\Windows\system32\DUI70.dll
0x71f90000 - 0x71f9e000     C:\Windows\system32\RpcRtRemote.dll
0x288a0000 - 0x288b3000     C:\Program Files (x86)\xxxxxxxxxx\ttttt 4.2\configuration\org.eclipse.osgi\bundles\527\1\.cp\swt-xulrunner-win32-3655.dll
0x73380000 - 0x733aa000     C:\Program Files (x86)\xxxxxxxxxx\ttttt 4.2\plugins\org.mozilla.xulrunner.win32.x86_1.9.1.15\xulrunner\nspr4.dll
0x732d0000 - 0x7337f000     C:\Program Files (x86)\xxxxxxxxxx\ttttt 4.2\plugins\org.mozilla.xulrunner.win32.x86_1.9.1.15\xulrunner\MOZCRT19.dll
0x73620000 - 0x73627000     C:\Program Files (x86)\xxxxxxxxxx\ttttt 4.2\plugins\org.mozilla.xulrunner.win32.x86_1.9.1.15\xulrunner\plc4.dll
0x73660000 - 0x73667000     C:\Program Files (x86)\xxxxxxxxxx\ttttt 4.2\plugins\org.mozilla.xulrunner.win32.x86_1.9.1.15\xulrunner\plds4.dll
0x73250000 - 0x732c3000     C:\Program Files (x86)\xxxxxxxxxx\ttttt 4.2\plugins\org.mozilla.xulrunner.win32.x86_1.9.1.15\xulrunner\sqlite3.dll
0x733c0000 - 0x733d4000     C:\Program Files (x86)\xxxxxxxxxx\ttttt 4.2\plugins\org.mozilla.xulrunner.win32.x86_1.9.1.15\xulrunner\nssutil3.dll
0x73220000 - 0x73246000     C:\Program Files (x86)\xxxxxxxxxx\ttttt 4.2\plugins\org.mozilla.xulrunner.win32.x86_1.9.1.15\xulrunner\softokn3.dll
0x72d80000 - 0x72e1d000     C:\Program Files (x86)\xxxxxxxxxx\ttttt 4.2\plugins\org.mozilla.xulrunner.win32.x86_1.9.1.15\xulrunner\nss3.dll
0x731f0000 - 0x73211000     C:\Program Files (x86)\xxxxxxxxxx\ttttt 4.2\plugins\org.mozilla.xulrunner.win32.x86_1.9.1.15\xulrunner\ssl3.dll
0x731d0000 - 0x731e8000     C:\Program Files (x86)\xxxxxxxxxx\ttttt 4.2\plugins\org.mozilla.xulrunner.win32.x86_1.9.1.15\xulrunner\smime3.dll
0x72f40000 - 0x7300c000     C:\Program Files (x86)\xxxxxxxxxx\ttttt 4.2\plugins\org.mozilla.xulrunner.win32.x86_1.9.1.15\xulrunner\js3250.dll
0x72430000 - 0x72d7e000     C:\Program Files (x86)\xxxxxxxxxx\ttttt 4.2\plugins\org.mozilla.xulrunner.win32.x86_1.9.1.15\xulrunner\xul.dll
0x723d0000 - 0x72421000     C:\Windows\system32\WINSPOOL.DRV
0x73490000 - 0x73495000     C:\Windows\system32\MSIMG32.dll
0x733b0000 - 0x733b7000     C:\Program Files (x86)\xxxxxxxxxx\ttttt 4.2\plugins\org.mozilla.xulrunner.win32.x86_1.9.1.15\xulrunner\xpcom.dll
0x73610000 - 0x73618000     C:\Program Files (x86)\xxxxxxxxxx\ttttt 4.2\plugins\org.mozilla.xulrunner.win32.x86_1.9.1.15\xulrunner\javaxpcomglue.dll
0x723b0000 - 0x723ce000     C:\Windows\system32\t2embed.dll
0x708c0000 - 0x709bb000     C:\Windows\system32\WindowsCodecs.dll
0x72330000 - 0x72361000     C:\Windows\system32\EhStorShell.dll
0x758f0000 - 0x75a8d000     C:\Windows\syswow64\SETUPAPI.dll
0x771f0000 - 0x77217000     C:\Windows\syswow64\CFGMGR32.dll
0x76d60000 - 0x76d72000     C:\Windows\syswow64\DEVOBJ.dll
0x72250000 - 0x722c0000     C:\Windows\system32\ntshrui.dll
0x72f30000 - 0x72f3b000     C:\Windows\system32\cscapi.dll
0x723a0000 - 0x723aa000     C:\Windows\system32\slc.dll
0x6f190000 - 0x6f1be000     C:\Windows\system32\mlang.dll
0x72380000 - 0x7238f000     C:\Program Files (x86)\xxxxxxxxxx\ttttt 4.2\configuration\org.eclipse.osgi\bundles\374\1\.cp\jWinHttp-1.0.0.dll
0x70e30000 - 0x70e88000     C:\Windows\system32\WINHTTP.dll
0x70de0000 - 0x70e2f000     C:\Windows\system32\webio.dll
0x71200000 - 0x71208000     C:\Windows\system32\credssp.dll
0x6d560000 - 0x6d569000     C:\Program Files (x86)\xxxxxxxxxx\ttttt 4.2\jre\bin\management.dll
0x2bc80000 - 0x2bcd5000     C:\Users\Gavin\AppData\Local\Temp\jna2783130979677457687.dll
0x768e0000 - 0x769fe000     C:\Windows\syswow64\Crypt32.dll
0x768d0000 - 0x768dc000     C:\Windows\syswow64\MSASN1.dll
0x72370000 - 0x72373000     C:\Windows\system32\Security.dll
0x73a10000 - 0x73a31000     C:\Windows\system32\ntmarta.dll
0x76ec0000 - 0x76f05000     C:\Windows\syswow64\WLDAP32.dll
0x722f0000 - 0x72308000     C:\Program Files (x86)\xxxxxxxxxx\ttttt 4.2\plugins\org.mozilla.xulrunner.win32.x86_1.9.1.15\xulrunner\nssdbm3.dll
0x72200000 - 0x72241000     C:\Program Files (x86)\xxxxxxxxxx\ttttt 4.2\plugins\org.mozilla.xulrunner.win32.x86_1.9.1.15\xulrunner\freebl3.dll
0x721a0000 - 0x721f2000     C:\Program Files (x86)\xxxxxxxxxx\ttttt 4.2\plugins\org.mozilla.xulrunner.win32.x86_1.9.1.15\xulrunner\nssckbi.dll

VM Arguments:
jvm_args: -Xms128M -Xmx256M -Dfile.encoding=UTF-8 -XX:PermSize=128M -XX:MaxPermSize=256M -Xss192k 
java_command: <unknown>
Launcher Type: generic

Environment Variables:
PATH=C:/Program Files (x86)/xxxxxxxxxx/ttttt 4.2/jre/bin/client;C:/Program Files (x86)/xxxxxxxxxx/ttttt 4.2/jre/bin;C:/Program Files (x86)/xxxxxxxxxx/ttttt 4.2/jre/lib/i386;C:\Tcl\bin;C:\Program Files\Common Files\Microsoft Shared\Windows Live;C:\Program Files (x86)\Common Files\Microsoft Shared\Windows Live;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files (x86)\Windows Live\Shared;C:\Program Files (x86)\Ixia;C:\Tcl\lib;C:\Program Files\Common Files\Microsoft Shared\Windows Live;C:\Program Files (x86)\Common Files\Microsoft Shared\Windows Live;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files (x86)\Windows Live\Shared;C:\Program Files (x86)\xxxxxxxxxx\ttttt 4.2;C:\Program Files (x86)\xxxxxxxxxx\ttttt 4.2\tttttRT
USERNAME=someguy
OS=Windows_NT
PROCESSOR_IDENTIFIER=Intel64 Family 6 Model 23 Stepping 10, GenuineIntel

---------------  S Y S T E M  ---------------

OS: Windows NT 6.1 Build 7601 Service Pack 1

CPU:total 2 (2 cores per cpu, 1 threads per core) family 6 model 7 stepping 10, cmov, cx8, fxsr, mmx, sse, sse2, sse3, ssse3

Memory: 4k page, physical 4158712k(1651220k free), swap 4194303k(4194303k free)

vm_info: Java HotSpot(TM) Client VM (11.3-b02) for windows-x86 JRE (1.6.0_13-b03), built on Mar  9 2009 01:15:24 by "java_re" with MS VC++ 7.1

time: Fri Nov 23 11:13:12 2012
elapsed time: 74247 seconds 
```

# ios - iOS 如何以编程方式查找网络数据使用情况

> ID：13542198
> 
> 赞同：0
> 
> 时间：2012-11-24T14:35:01.133
> 
> 标签：ios, networking

我希望我的 iOS 应用报告它下载了多少数据（通过 WiFi 或网络）。

有没有这方面的API？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-27T10:28:32.423

尝试这个-

```
- (NSArray *)getDataCounters
{
BOOL   success;
struct ifaddrs *addrs;
const struct ifaddrs *cursor;
const struct if_data *networkStatisc; 

int WiFiSent = 0;
int WiFiReceived = 0;
int WWANSent = 0;
int WWANReceived = 0;

NSString *name=[[[NSString alloc]init]autorelease];

success = getifaddrs(&addrs) == 0;
if (success) 
{
    cursor = addrs;
    while (cursor != NULL) 
    {
        name=[NSString stringWithFormat:@"%s",cursor->ifa_name];
        NSLog(@"ifa_name %s == %@\n", cursor->ifa_name,name);
        // names of interfaces: en0 is WiFi ,pdp_ip0 is WWAN 

        if (cursor->ifa_addr->sa_family == AF_LINK) 
        {
            if ([name hasPrefix:@"en"]) 
            {
                networkStatisc = (const struct if_data *) cursor->ifa_data;
                WiFiSent+=networkStatisc->ifi_obytes;
                WiFiReceived+=networkStatisc->ifi_ibytes;
                NSLog(@"WiFiSent %d ==%d",WiFiSent,networkStatisc->ifi_obytes);
                NSLog(@"WiFiReceived %d ==%d",WiFiReceived,networkStatisc->ifi_ibytes);
            }

            if ([name hasPrefix:@"pdp_ip"]) 
            {
                networkStatisc = (const struct if_data *) cursor->ifa_data;
                WWANSent+=networkStatisc->ifi_obytes;
                WWANReceived+=networkStatisc->ifi_ibytes;
                NSLog(@"WWANSent %d ==%d",WWANSent,networkStatisc->ifi_obytes);
                NSLog(@"WWANReceived %d ==%d",WWANReceived,networkStatisc->ifi_ibytes);
            } 
        }

        cursor = cursor->ifa_next;
    }

    freeifaddrs(addrs);
}       

return [NSArray arrayWithObjects:[NSNumber numberWithInt:WiFiSent], [NSNumber numberWithInt:WiFiReceived],[NSNumber numberWithInt:WWANSent],[NSNumber numberWithInt:WWANReceived], nil];
} 
```

# java - eclipse中不显示纹理

> ID：13542199
> 
> 赞同：1
> 
> 时间：2012-11-24T14:35:04.463
> 
> 标签：java, eclipse, opengl, jogl, texture2d

我有 acube，并且要在所有侧面放置纹理。我在一个netbeans项目中成功地做到了这一点，但最后我知道它是在eclipse中完成的，起初听起来没什么大不了的。但问题是相同的代码在 Eclipse 中不起作用。显示立方体，但未应用纹理。继承人的代码。

```
 public void init(GLAutoDrawable drawable) {
        GL2 gl = drawable.getGL().getGL2(); // Get the GL pipeline object this 
        // GLAutoDrawable uses

        gl.glClearColor(0.0f, 0.0f, 0.0f, 1.0f); // Set clear color to black
        gl.glClearDepth(1.0f); // Set the depth value to 1.0 (the maximum value),
        // when the depth buffer is cleared

        gl.glEnable(GL_DEPTH_TEST); //Enable depth test

        gl.glEnable(GL_LIGHT0);     
        gl.glEnable(GL_LIGHTING);           

        try {
            texImg = readImage("PWelshDragon.jpg");
        } catch (IOException ex) {
         //   Logger.getLogger(CG0T.class.getName()).log(Level.SEVERE, null, ex);
        }

             gl.glDisable(GL.GL_TEXTURE_2D);
             gl.glTexImage2D(GL.GL_TEXTURE_2D, 0, GL.GL_RGB, texWidth ,texHeight, 0, GL.GL_RGB, GL.  GL_UNSIGNED_BYTE,  texImg);
        gl.glEnable(GL.GL_TEXTURE_2D);

    } 
```

在显示代码中。

```
public void display(GLAutoDrawable drawable) {
        GL2 gl = drawable.getGL().getGL2();

        gl.glClear(GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT);

        gl.glMatrixMode(GL_MODELVIEW);
        gl.glLoadIdentity();

        gl.glRotated(30, 1, 1, 1);

        gl.glBegin(GL_QUADS);
            gl.glNormal3f(1.0f, 0.0f, 0.0f);
            gl.glVertex3f(1.0f, 1.0f, 1.0f);gl.glTexCoord2d(0.0f, 0.0f);
            gl.glVertex3f(1.0f, -1.0f, 1.0f);gl.glTexCoord2d(1.0f, 0.0f);
            gl.glVertex3f(1.0f, -1.0f, -1.0f);gl.glTexCoord2d(1.0f, 1.0f);
            gl.glVertex3f(1.0f, 1.0f, -1.0f);gl.glTexCoord2d(0.0f, 1.0f);

            gl.glNormal3f(-1.0f, 0.0f, 0.0f);
            gl.glVertex3f(-1.0f, 1.0f, 1.0f);gl.glTexCoord2d(0.0f, 0.0f);
            gl.glVertex3f(-1.0f, 1.0f, -1.0f);gl.glTexCoord2d(1.0f, 0.0f);
            gl.glVertex3f(-1.0f, -1.0f, -1.0f);gl.glTexCoord2d(1.0f, 1.0f);
            gl.glVertex3f(-1.0f, -1.0f, 1.0f);gl.glTexCoord2d(0.0f, 1.0f);

            gl.glNormal3f(0.0f, 1.0f, 0.0f);
            gl.glVertex3f(1.0f, 1.0f, 1.0f);gl.glTexCoord2d(0.0f, 0.0f);
            gl.glVertex3f(1.0f, 1.0f, -1.0f);gl.glTexCoord2d(1.0f, 0.0f);
            gl.glVertex3f(-1.0f, 1.0f, -1.0f);gl.glTexCoord2d(1.0f, 1.0f);
            gl.glVertex3f(-1.0f, 1.0f, 1.0f);gl.glTexCoord2d(0.0f, 1.0f);

            gl.glNormal3f(0.0f, -1.0f, 0.0f);
            gl.glVertex3f(1.0f, -1.0f, 1.0f);gl.glTexCoord2d(0.0f, 0.0f);
            gl.glVertex3f(-1.0f, -1.0f, 1.0f);gl.glTexCoord2d(1.0f, 0.0f);
            gl.glVertex3f(-1.0f, -1.0f, -1.0f);gl.glTexCoord2d(1.0f, 1.0f);
            gl.glVertex3f(1.0f, -1.0f, -1.0f);gl.glTexCoord2d(0.0f, 1.0f);

            gl.glNormal3f(0.0f, 0.0f, 1.0f);
            gl.glVertex3f(1.0f, 1.0f, 1.0f);gl.glTexCoord2d(0.0f, 0.0f);
            gl.glVertex3f(-1.0f, 1.0f, 1.0f);gl.glTexCoord2d(1.0f, 0.0f);
            gl.glVertex3f(-1.0f, -1.0f, 1.0f);gl.glTexCoord2d(1.0f, 1.0f);
            gl.glVertex3f(1.0f, -1.0f, 1.0f);gl.glTexCoord2d(0.0f, 1.0f );

            gl.glNormal3f(0.0f, 0.0f, -1.0f);
            gl.glVertex3f(1.0f, 1.0f, -1.0f);gl.glTexCoord2d(0.0f, 0.0f);
            gl.glVertex3f(1.0f, -1.0f, -1.0f);gl.glTexCoord2d(1.0f, 0.0f);
            gl.glVertex3f(-1.0f, -1.0f, -1.0f);gl.glTexCoord2d(1.0f, 1.0f);
            gl.glVertex3f(-1.0f, 1.0f, -1.0f);gl.glTexCoord2d(0.0f, 1.0f);
        gl.glEnd();
    } 
```

我得到了 texImg 中的值，但不知道为什么它没有被应用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T14:12:15.060

我通过在显示功能的图像绘制代码之前添加以下几行来解决了这个问题。（之前`gl.glBegin(GL_QUADS);`）

```
gl.glTexParameteri(GL.GL_TEXTURE_2D,GL.GL_TEXTURE_WRAP_S,GL2.GL_CLAMP);
gl.glTexParameteri(GL.GL_TEXTURE_2D,GL.GL_TEXTURE_WRAP_T,GL2.GL_CLAMP);
gl.glTexParameteri(GL.GL_TEXTURE_2D,GL.GL_TEXTURE_MAG_FILTER,GL.GL_NEAREST);
gl.glTexParameteri(GL.GL_TEXTURE_2D,GL.GL_TEXTURE_MIN_FILTER,GL.GL_NEAREST);
gl.glTexEnvi(GL2.GL_TEXTURE_ENV,GL2.GL_TEXTURE_ENV_MODE,GL2.GL_MODULATE);
gl.glHint(GL2.GL_PERSPECTIVE_CORRECTION_HINT,GL2.GL_NICEST); 
```

我真的不知道，这些线是做什么的。我在[这里看到了](http://www.it.hiof.no/~borres/j3d/JOGL/tcube/p-tcube.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-24T15:19:48.267

我对Java中的opengl一无所知，但它不能仅仅是因为找不到或其他原因而没有加载您的图像文件“PWelshDragon.jpg”吗？

您是否尝试过放回注释行

```
 Logger.getLogger(CG0T.class.getName()).log(Level.SEVERE, null, ex); 
```

在抓到这里看看有没有问题？

# jquery-ui - 如何使 JQGrid 中的过滤器工具栏不区分大小写并在其中设置占位符？

> ID：13542200
> 
> 赞同：9
> 
> 时间：2012-11-24T14:35:17.327
> 
> 标签：jquery-ui, jqgrid

有时我不容易得到一些小东西。

今天我的问题是我使用 JQgrid，因为我使用过滤器工具栏进行搜索。

它工作正常，但我需要的是搜索只区分大小写。

示例：“A”

如果我给它显示结果安东尼。但是，如果我给出“a”，它不会显示任何我如何使它区分大小写。

这是我的代码：

```
<script type="text/javascript">
$(document).ready(function () {
    var lastsel3;
    var cl;
    var a = new Date();
    var QColName = a.getFullYear();
    var Q4ColName = (a.getFullYear()) + 1;
    var json_string = document.getElementById("hdntxt").value;

    if (json_string.length > 0) {
        var search_result = $.parseJSON(json_string);
    }
    jQuery("#gvLockHistory").jqGrid({
        contentType: "application/json; charset=utf-8",
        height: 'auto',
        width: '480',
        gridview: true,
        datatype: "local",
        data: search_result,
        colNames: ['Type', 'Month', 'Action'],
        colModel: [
        { name: 'LockType', index: 'LockType', editable: false, sortable: true, align: 'center',width:158 },
        { name: 'MonthYearStringValue', index: 'MonthYearStringValue', editable: false, sortable: false, align: 'center', width: 157 },
        { name: 'IsActive', index: 'IsActive', editable: true, align: 'center', sortable: false, search: false, width: 150 }
        ],
        rowNum: 8,
        pager: '#pager',
        rowList: [8, 10, 20, 30],
        multipleSearch: true,
        multipleGroup: true,
        shrinkToFit: false,
        viewrecords: true,
        caseSensitive: false,
        sortorder: "desc",
        //editurl: "server.php",
        gridComplete: function () {
            var ids = jQuery("#gvLockHistory").jqGrid('getDataIDs');
            for (var i = 0; i < ids.length; i++) {
                cl = ids[i];
                //be = "<input class='btn btn-mini' type='button' value='Unlock' onclick=\"unlock('" + cl + "');\"  />";
                be = "<input class='btn btn-mini' type='button' value='Unlock' onclick=\"unlock('" + cl + "');\"  />";
                jQuery("#gvLockHistory").jqGrid('setRowData', ids[i], { IsActive: be });

            }
        }
    }); 
```

这是我在网上搜索以使大小写不敏感，但它不起作用

```
 $("#gvLockHistory").filterToolbar({ stringResult: true, searchOnEnter: false,defaultSearch:"cn"});

}); 
```

请帮助我提前谢谢。并且请不要忘记需要在过滤器部分显示的占位符。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-24T14:43:08.387

如果您使用的是相对较新版本的 jqgrid，您可以设置以下选项以使搜索不区分大小写：

```
ignoreCase: true 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-08-22T19:48:52.337

您需要`ignoreCase: true`在 jqGrid 选项中进行设置。@f01 的答案对我不起作用。我正在使用 jqGrid 4.6.0 版。

```
grid.jqGrid({
    datatype: "local",
    editurl: 'clientArray',
    caption: "Values",
    ignoreCase: true, //By default the local searching is case-sensitive. 
                      //To make the local search and sorting not 
                      //case-insensitive set this options to true

    colNames: ["", "", ""],
    colModel: [{
        name: "value",
        // .. more stuff
}); 
```

# html - 为什么引用类的表中的链接采用主标记中链接的样式？

> ID：13542211
> 
> 赞同：1
> 
> 时间：2012-11-24T14:36:02.147
> 
> 标签：html, css, html-table

我正在尝试格式化表格中的链接。我已经为`<body>`标签内的链接指定了默认格式。它们显示正确。有人能指出为什么以下 CSS 会将页面上的所有链接（包括带有 标记的表格内的链接）格式化`<table class="links"></table>`为`<body>`标签中的链接吗？我已经阅读了该站点上的许多帖子以及有关使用 CSS 格式化标签内的对象（使用类）的各种其他帖子，但我认为我还缺少其他一些基本的东西。

```
body
{
    background-color:#800000;
    color:#FFFFFF;
    font:14px arial,sans-serif;
}
body a:link
{
    color:#FFFFFF; /* unvisited link */
    text-decoration:underline;
    font:11px arial,sans-serif;
}
body a:visited
{
    color:#FFFFFF; /* visited link */
    text-decoration:underline;
    font:11px arial,sans-serif;
}
body a:hover
{
    color:#FFFFFF; /* mouse over link */
    text-decoration:none;
    font:11px arial,sans-serif;
}
body a:active
{
    color:#FFFFFF; /* selected link */ 
    text-decoration:none;
    font:11px arial,sans-serif;
}

table
{
    border-collapse:collapse;
    background-color:#DDDDDD;
    color:#000000;
    font:14px arial,sans-serif;
}
table, td, th
{
    border:1px solid black;
    padding-left: 4px;
    padding-right: 4px;
}
td.header
{
    padding-left: 4px;
    padding-right: 4px;
    padding-top: 1px;
    padding-bottom: 1px;
    font-weight:bold;
}
tr.header
{
    padding-left: 4px;
    padding-right: 4px;
    padding-top: 1px;
    padding-bottom: 1px;
    font-weight:bold;
}
table.links a:link
{
    color:#000000; /* unvisited link */
    text-decoration:underline;
    font:14px arial,sans-serif;
}
table.links a:visited
{
    color:#000000; /* visited link */
    text-decoration:underline;
    font:14px arial,sans-serif;
}
table.links a:hover
{
    color:#000000; /* mouse over link */
    text-decoration:none;
    font:14px arial,sans-serif;
}
table.links a:active
{
    color:#000000; /* selected link */ 
    text-decoration:none;
    font:14px arial,sans-serif;
} 
```

编辑：这是使用样式表的来源。

```
<?php
    include "../Core/Debug_Start.php";
    include "../Core/Database.php";
    Debug::Out( "Running 'Boat/UpdateBlades.php'" );
    include "User.php";
    include "Blades.php";

    session_start();
    if( !Users::IsUserLoggedIn() )
        header( "location:../index.php" );
?>

<html>
<head>
    <link href="../Styles/Damflask/Style_Damflask.css" rel="stylesheet" type="text/css">
</head>
<body>

<?php
    /////////////////////////////////////////////////////////////

    // returns a full list of all blade sets
    $aBladeSets = Blades::GetAllBladeSets( $database );
    $iNumBladeSets = count( $aBladeSets );
    if( $iNumBladeSets == 0 )
        return;
    $iNumRows = $iNumBladeSets + 1;

    // create the table
    echo( "<table class=\"links\" align=\"center\">" );
    for( $iRowIndex = 0; $iRowIndex < $iNumRows; $iRowIndex++ )
    {
        echo( "<tr>" );
        if( $iRowIndex == 0 )
        {
            // NAME
            echo( "<td class=\"header\">NAME</td>" );

            // AVAILABLE
            echo( "<td class=\"header\">AVAILABLE</td>" );

            // ADDITIONAL INFO
            echo( "<td class=\"header\">INFO</td>" );

            // EDIT / DELETE
            echo( "<td class=\"header\" colspan=\"2\"></td>" );
        }
        else
        {
            // display the blade set
            $iBladeSetIndex = $iRowIndex - 1;
            $bladeSet = $aBladeSets[ $iBladeSetIndex ];

            // NAME
            echo( "<td>" . $bladeSet->GetName() . "</td>" );

            // AVAILABLE
            echo( "<td>" );
            if( $bladeSet->IsAvailable() )
                echo( "Yes" );
            else
                echo( "No" );
            echo( "</td>" );

            // ADDITIONAL INFO
            echo( "<td>" . $bladeSet->GetAdditionalInfo() . "</td>" );

            // EDIT
            echo( "<td><a class=\"tablelink\" href=\"UpdateBlades.php?BladesID=" . $bladeSet->GetID() . "\">EDIT</a></td>" );

            // DELETE
            echo( "<td><a class=\"tablelink\" href=\"DeleteBladeSet.php?BladesID=" . $bladeSet->GetID() . "\">DELETE</a></td>" );
        }
        echo( "</tr>" );
    }
    echo( "<tr><td colspan=\"5\"><a href=\"AddBlades.php\">ADD A NEW BLADE SET</a></td></tr>" );
    echo( "</table>" );

    /////////////////////////////////////////////////////////////

    $database->CloseConnection();
    include "../Core/Debug_End.php"
?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T15:53:26.990

刚刚意识到（4 个月后）我还没有结束这个问题。事实证明，body{} 和 table{} 标签之间有一个空格：

```
body a:active
{
    color:#FFFFFF; /* selected link */ 
    text-decoration:none;
    font:11px arial,sans-serif;
}
 <--- A space.
table
{
    border-collapse:collapse;
    background-color:#DDDDDD;
    color:#000000;
    font:14px arial,sans-serif;
} 
```

通过删除空间，它可以按预期工作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-24T20:05:30.730

您没有在 CSS 中正确定位它们，这就是原因！

```
table.links .tablelink {
 STYLES HERE
} 
```

通过使用您的当前标记来定位它们是正确的方法：

```
table.links a:link { 
```

如果您要以自己的方式定位链接，则不需要 .tablelink 的类名，它只是额外的标记，您只需要：

使用 .tablelink 类的好处是您在 CSS 中为这些链接设置样式所需的全部内容是：

```
.tablelink {
STYLES HERE
} 
```

你也不需要使用：

```
table.links { 
```

您可以使用：

```
.links { 
```

# git - Git，查看我最近 N 次提交的评论列表

> ID：13542213
> 
> 赞同：155
> 
> 时间：2012-11-24T14:36:11.900
> 
> 标签：git, git-commit

有没有办法查看我在 Git 中最后 N 次提交的评论列表和时间？

在查看 SO 之后，我发现唯一相关的是 [Git - 获取他们创建的所有提交和 blob](https://stackoverflow.com/questions/1314950/git-get-all-commits-and-blobs-they-created)，但它显示了所有用户的所有提交，并输出了许多其他信息。

* * *

## 回答 #1

> 赞同：255
> 
> 时间：2012-11-24T14:50:34.703

如果你想使用命令行，你可以使用`--author=<your name>`

例如：查看您最近的 5 次提交

```
git log -n 5 --author=Salvador 
```

如果您想要更简单的单行解决方案：

```
git log --oneline -n 5 --author=Salvador 
```

**编辑添加**

如果您喜欢单行版本，请尝试`git log`为此创建一个别名（这就是我为 zsh 所拥有的）

```
alias glog="git log --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset' --abbrev-commit" 
```

现在，我可以使用：

```
glog -n 5 
```

我得到了一个不错的输出，例如：

![终端输出](../Images/9d5bbe0cdb5dcc1484fee6f5113431da.png)

它是彩色的，显示作者的姓名并显示图表，您仍然可以传递其他标志（例如 --author），这可以让您对其进行更多过滤。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-24T14:47:17.877

使用`--author`和/或`--committer`过滤选项`git log`，加上`-n`限制提交次数的选项。例如：

```
git log --author='Salvador Dali' -n 10 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-05-02T10:48:57.697

```
git log --format="%h %B" --oneline -n 1 
```

这将为您提供带有缩写提交 ID 的最新 git log 注释块。

```
git log --format="%H %B" -n 1 
```

这将为您提供具有完整提交 ID 的最新 git log 注释块。

您可以通过以下方式构建自己的格式：[Git Pretty Format](https://git-scm.com/docs/pretty-formats)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-24T14:49:04.123

`git log --author="My name" -n 5`（请参阅`man git-log`所有替代方案）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-12-12T09:29:15.737

查看最后 N 次提交的评论列表

```
git log --oneline -10 
```

签出一个较旧的提交

```
git ckeckout 3e6bb80 
```

签出前一个提交后返回最新提交

```
git checkout - 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-12-31T22:49:01.840

如果您只关注最后 X 条 git 提交消息，则以下命令将为您提供最后 5 条提交消息，作为由新行分隔的字符串：

```
git log -5 --oneline --format=%s | sed 's/^.*: //' 
```

将输出如下内容：

```
Remove references to Node 8
Move ESLint cache file into node_modules
Update postcss packages
Add TypeScript 4.x as peerDependency to react-scripts
Create FUNDING.yml 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-10-08T19:02:28.203

git log --max-count=15 --pretty="format:%C(dim green) %<(9,trunc)%ar %C(bold magenta)%h %C(bold green)%<(12, trunc)%an %C(粗黄色)%<(113,trunc)%s" --no-merges

注意 ...yellow)%<(113,trunc) 113 是修剪注释以允许完全自定义的长度，而无需 --oneline 覆盖您的设置。

正如已经说过的，这可能是别名，或者我已经包裹在一个 powershell 函数中。

以下内容超出了 OP，但为线程带来了一些价值。

我知道我被带走了，但这是我们所做的。

```
 function logs() {
<#
    .SYNOPSIS 
     Shows my logs  
    .DESCRIPTION 
     Returns an abreviated list of logs meeting the filtering provided including max returned, committor by case sensitive pattern, branch, local or remote, and a 'my' shourcut to get the callers commits only
    .EXAMPLE
    PS>logs

    [ Basic usage gets maximum 15 logs from the origin/<current branch> ]

 origin/master logs

git log origin/master --max-count=15 --pretty="format:%C(dim green) %<(9,trunc)%ar %C(bold magenta)%h %C(bold green)%<(12,trunc)%an %C(bold yellow)%<(113,trunc)%s"

 2 days .. b6e4d0b Joe Johnston Added Posh
 2 days .. 0f1a166 Joe Johnston Updated the profile system
 4 days .. dfd3115 Joe Johnston added .net install and pinned applications. Updated git functions
 6 weeks.. 47bd9e9 Joe Johnston updated functions
 3 month.. 5148f09 Joe Johnston initial add

    .EXAMPLE
    PS>logs -l

    [ Usage gets maximum 15 local logs from the <current branch> ]

  logs

git log  --max-count=15 --pretty="format:%C(dim green) %<(9,trunc)%ar %C(bold magenta)%h %C(bold green)%<(12,trunc)%an %C(bold yellow)%<(113,trunc)%s"

 3 hours.. efb36e9 Joe Johnston updated profile to set-execution
 3 hours.. 4355a00 Joe Johnston Merge branch 'master' of https://github.com/xxx
 3 hours.. 84cd380 Joe Johnston updated gitfunctions - added undomerge
 2 days .. b6e4d0b Joe Johnston Added Posh
 2 days .. 0f1a166 Joe Johnston Updated the profile system
 4 days .. dfd3115 Joe Johnston added .net install and pinned applications. Updated git functions
 6 weeks.. 47bd9e9 Joe Johnston updated functions
 3 month.. 5148f09 Joe Johnston initial add

    .EXAMPLE
     logs 25

     [ Usage gets maximum 25 logs from the origin/<current branch> ]
    .EXAMPLE
     logs -m -c 20

     [ Usage gets maximum 20 local logs from the <current branch> commited by me]
    .EXAMPLE
     logs -b dev/iOS -c 25 -l -c "Jackson"

     [ Usage gets maximum 20 local logs from the <current branch> commited by the <pattern> Jackson]
#>
    [cmdletbinding()]
    Param(
    [parameter(Mandatory=$false,ValueFromPipeline)]
    [Alias('c')]
        [int]$Count = 15,
    [parameter(Mandatory=$false,ValueFromPipeline)]
    [Alias('b')]
        [string]$Branch = "Current",
    [parameter(Mandatory=$false,ValueFromPipeline)]
    [Alias('u')]
    [Alias('user')]
        [string]$Committer = "",
    [parameter(Mandatory=$false,ValueFromPipeline)]
    [Alias('m')]
    [Alias('me')]
    [Alias('onlyme')]
        [switch]$My = $false,
    [parameter(Mandatory=$false,ValueFromPipeline)]
    [Alias('g')]
        [switch]$Graph = $false,
    [parameter(Mandatory=$false,ValueFromPipeline)]

    [Alias('sm')]
    [Alias('merge')]
        [switch]$ShowMerges = $false,
    [parameter(Mandatory=$false,ValueFromPipeline)]

    [Alias('r')]
        [switch]$Remote = $false
    )
    $merge = '--no-merges';
    if ($ShowMerges) {
        $merge = '';
    }
    $Pretty = "--pretty=`"format:%C(dim green) %<(9,trunc)%ar %C(bold magenta)%h %C(bold green)%<(12,trunc)%an %C(bold yellow)%<(113,trunc)%s`"";
    #git config --global format.pretty $Pretty 
    if ($Branch -eq "Current") { 
        $Branch = git symbolic-ref --short HEAD; 
        write-host "************************************************";
        } else { 
        write-host "================================================";
        }

    if ($Remote -eq $true) { $Where = "origin/$Branch"; }
    if ($Graph -eq $true) { $GraphTag = "--graph"; }

     if([string]::IsNullOrEmpty($Committer) -eq $false) {
        $Who = $Committer;
        $Committer = "--committer=" + $Committer;
        write-host $Who
     }

    if ($My -eq $true) { 
        $me = git config user.name;
        $Committer = "--committer=`"$me`"";
        $Who = "**MY**";
    }

    write-host "$Who $Where logs" -foregroundcolor "Red";
    $commandOut = "git log $Where $GraphTag --max-count=$Count $Pretty $Committer $GraphTag $merge";
    write-Verbose $commandOut;
    write-host;

    git log $Where --max-count=$Count $Pretty $Committer $GraphTag $merge  
    write-host 
} 
```

# class - 同一类的2个对象之间的碰撞

> ID：13542214
> 
> 赞同：2
> 
> 时间：2012-11-24T14:36:21.137
> 
> 标签：class, xna, collision

好的，所以我有一个敌人类（具有旋转、位置、纹理等）。我在屏幕上生成了几个敌人，它们四处移动，但它们彼此重叠。所以我尝试在两个同级别的敌人之间进行碰撞检查。但无论我尝试什么方法，它都不太奏效。我尝试过的最好的事情是：

```
foreach (Enemy enemy1 in enemies)
{
 enemy1Pos = new Vector2(enemy1.position.X, enemy1.position.Y)

 foreach (Enemy enemy2 in enemies)
 {
  enemy2Pos = new Vector2(enemy2.position.X, enemy2.position.Y)
  if (Vector2.Distance(enemy2Pos, enemy1Pos) < 200)
  {
  enemy1Pos += new Vector2((float)(enemy1.Speed * Math.Cos(enemy1.Rotation)), (float)(enemy1.Speed * Math.Sin(enemy1.Rotation)));
  }
 }
} 
```

这不是精确的代码，所以它可能有一些错误。无论如何，当我实施这个解决方案时，敌人并没有重叠，所以那部分一切都很好。但是，他们总是移动到屏幕的右侧。

我也查看了植绒等，但我想知道，如何检测同一类的 2 个对象之间的碰撞？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T23:00:53.590

如果enemy1 等于enemy2 总是会发生碰撞。:)

避免这种情况......

```
foreach (Enemy enemy2 in enemies)
{
   if (enemy2 == enemy1) continue;
   enemy2Pos = new Vector2(enemy2.position.X, enemy2.position.Y)
   if (Vector2.Distance(enemy2Pos, enemy1Pos) < 200)
   {
      enemy1Pos += new Vector2((float)(enemy1.Speed * Math.Cos(enemy1.Rotation)), (float)(enemy1.Speed * Math.Sin(enemy1.Rotation)));
   }    
} 
```

Foreach 在这里不是最好的......您可以使用 for 以更有效的方式完成碰撞检查：

```
 for (int i = 0; i<enemies.Count-1; i++)
 {
       var enemy1 = enemies[i];
       for (int j=i+1; j<enemies.Count; j++)
       {
           var enemy2 = enemies[j]
       } 
```

这样您就可以避免自我碰撞检查并避免重复检查。

# c# - 在 C# 中实现 datagridview 单元格单击时发生错误

> ID：13542217
> 
> 赞同：0
> 
> 时间：2012-11-24T14:36:35.893
> 
> 标签：c#, c#-4.0, datagridview

我对datagridview甚至处理程序有问题，当我单击单元格时，我希望将该单元格中的值发送到文本框，它可以工作，但是在我更改了一些我忘记的东西后它就无法工作。我尝试重新创建 datagridview 及其事件处理程序，但没有。这是我的代码

```
private void dataGridView1_CellClick(object sender, DataGridViewCellEventArgs e)
    {
        textBox1.Text = dataGridView1.Rows[e.RowIndex].Cells[1].ToString();
    } 
```

![在此处输入图像描述](../Images/ff675a7ecc1ff8ee94cf323789f88fb4.png)

你有什么想法来解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T14:38:51.540

你需要

```
 textBox1.Text = dataGridView1.Rows[e.RowIndex].Cells[1].Value.ToString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-28T16:39:29.420

```
private void gridview_CellClick(object sender, DataGridViewCellEventArgs e)
{
  int r = e.RowIndex;
  llenartextbox(r);
}

public void llenartextbox(int index)
{
  textbox.Text = gridview.rows[index].Cells["Cliente"].Value.ToString();
} 
```

# php - 简单的 PHP 页面保护脚本，其中密码仅验证前 3 个字符？

> ID：13542219
> 
> 赞同：-2
> 
> 时间：2012-11-24T14:36:40.153
> 
> 标签：php, passwords

我正在设置一个由密码“保护”的非常简单的页面，到目前为止一切正常，但我们希望它只验证使用的前 3 个数字/字符。

该页面不是最高机密或任何东西，我们只希望以这种方式避免“一般”人（不知道如何进入）访问内容。

例如，目前我们有：

```
$password = "NBX9785"; 
```

然后隐藏的内容隐藏如下：

```
 <?php 
    if (isset($_POST["password"]) && ($_POST["password"]=="$password")) {
    ?> 
```

但是我们想要的只是 NBX 计数，而不是数字或密码的其余部分，这基本上可以让我们在不需要额外编码的情况下给出更多的代码。

这可能吗，有没有简单的方法可以做到这一点？

为了进一步推动它，是否可以将其设置为 NBX99D24，其中 NBX 是固定的，但 99、D 和 24 分别是数字和字母？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T14:41:19.567

您可以从字符串中获取前三个字符并进行比较

```
if(mb_substr( $_POST["password"],0,3) === mb_substr($password, 0, 3))
{
    // Your content here
} 
```

或者

```
if(strpos($password, mb_substr( $_POST["password"],0,3)) === 0) 
{
    // Your content here
} 
```

也都在这里： http: [//php.net/manual/en/ref.strings.php](http://php.net/manual/en/ref.strings.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T14:42:06.463

也许使用 str_len() 函数？

```
$text = "this.is.a.test.text";
echo substr($text, 0,3); 
```

上面的代码显示了前 3 个字符，因此您可以在之后操作数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T14:50:47.697

这将为您提供 NBX，但是您确定要以这种方式进行用户验证吗？这不是一种不同的安全方法，使用数据库更安全。

如果您确实想这样做，那么无限的答案会很合适。

关于您的最后一个问题，您可以由 4 个变量组成：

```
$password="NEX";
$password.="99";
$password.="D";
$password.="24"; 
```

或者，数字可以是整数（去掉引号），

# c - 为什么“for(i = 0.1 ; i != 1.0 ; i += 0.1)” 在 i = 1.0 时不会中断？

> ID：13542220
> 
> 赞同：15
> 
> 时间：2012-11-24T14:36:59.090
> 
> 标签：c, floating-point

我今天参加了 C 考试，有人问我一个类似的问题：

> 这个程序有什么问题：
> 
> ```
> for( x = .1 ; x != 1.0 ; x += .1)
>     printf("%f\n", x); 
> ```

我无法解决它，因为我必须写一些我标记`.1`为错误的东西。但是，当我回到家时，我运行了这个程序，结果它在`x`等于时并没有中断`1.0`并陷入无限循环：

```
$ cat exam.c
#include <stdio.h>

int main(int argc, char **argv)
{
    float x;

    for(x = .1 ; x != 1.0 ; x += .1)
        printf("%f\n", x);

    return 0;
}
$ gcc exam.c -o exam
$ ./exam
0.100000
0.200000
0.300000
0.400000
0.500000
0.600000
0.700000
0.800000
0.900000
1.000000 <- ?
1.100000
1.200000
1.300000
1.400000
1.500000
.... 
```

有人可以解释为什么会这样。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-24T16:46:09.560

## <= 或 < 不是解决方案！

在循环中使用浮点**并非**没有问题。舍入误差累积。即使使用`<=`，循环**也可能不会运行**正确的次数。

它适用于`<=1.0` **[(10 times)](http://ideone.com/KJtaEB)**，但运行时间比预期的`<=50.0` **[(499 times)](http://ideone.com/ouWiqC)**少一倍。

```
 for(i = 0.1 ; i <= 50.0 ; i += 0.1)
       { ... }//runs 499 times, not 500! 
```

如果您确实遇到了这个问题，可能不太容易发现。在比较之前对其进行舍入（**[舍入函数](http://www.gnu.org/software/libc/manual/html_node/Rounding-Functions.html)**）可能会有所帮助，但唯一可靠的解决方案是......

**在循环中使用整数作为控制变量。**

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-11-24T14:38:38.030

这是一个典型的家庭作业问题。

问题是 0.1 不能完全存储在浮点数中，更好地检查 <= 1.0

然而**，这只适用于**像克苏鲁所说的非常有限的范围。我完全错过了这个问题。当然**最好`int`以后再用分它的值**。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-24T14:40:19.677

永远不要`!=`在循环中使用`for`，当您的循环变量从未达到您期望的值时，它会导致很难找到错误。总是使用`<`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-24T14:54:46.723

这是由于 IEEE 浮点标准。[检查维基百科](http://en.wikipedia.org/wiki/IEEE_floating_point)

```
0.1 + 0.2 = 0.3 => FALSE - Expected: 0.3 | Real: 0.30000000000000004 
```

在此处查看真实（JavaScript）演示：http: [//k8.no-ip.org/stackoverflow/13542220.htm](http://k8.no-ip.org/stackoverflow/13542220.htm)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-24T14:39:33.903

0.1 不能完全存储在浮点数中。浮点数包含一个近似值，您正试图将其均衡为一个精确值。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-24T14:56:41.263

建议，每次你需要循环使用**integers**。

```
int x;
float y = 0;
for( x = 1; x < 11; x += 1){
    y += 0.1; 
    printf("%f\n", y);
} 
```

或者，您也可以使用它：

```
for( x = 1; x < 11; x += 1){
    printf("%f\n", ( x / 10.0 ) );
} 
```

在这两种情况下，您都将循环值保留为整数。

# php - WP FullCalendar 使用自定义字段

> ID：13542225
> 
> 赞同：1
> 
> 时间：2012-11-24T14:37:34.163
> 
> 标签：php, wordpress

基本上，我正在使用一个主题，该主题已经构建了一个事件自定义帖子并使用了 WP FullCalendar，但它有大量的自定义字段用于开始日期和结束日期，分别称为**_risen_event_start_date**和**_risen_event_end_date**。

有人可以帮我将排序顺序排序为此信息而不是发布日期本身吗？我试过在下面修改这个区域，但它什么也没做：

```
$args = array ('scope'=>array(date("Y-m-d", $_REQUEST['start']), date("Y-m-d", $_REQUEST['end'])), 'owner'=>false, 'status'=>1, 'order'=>'ASC', 'orderby'=>'post_date'); 
```

有什么我错过的吗？任何帮助都会很棒:)

提前致谢。

克里斯

# visual-c++ - 无法为 x64 构建空的“Visual C++ CLR 库”

> ID：13542235
> 
> 赞同：1
> 
> 时间：2012-11-24T14:39:04.960
> 
> 标签：visual-c++, c++-cli, visual-studio-2012

我已将“Visual C++ CLR”项目添加到我的解决方案中。一切都建立起来没有错误。然后在“配置管理器”中，我将“Win32”配置更改为“x64”，因为我需要为 x64 编译。现在我的项目无法构建。我有很多错误，我不知道如何解决

```
Error   1   error C2871: 'System' : a namespace with this name does not exist   C:\Oleg\projects\Va.MBClient\ACliAdapter\AssemblyInfo.cpp   3   1   ACliAdapter
Error   2   error C2653: 'System' : is not a class or namespace name    C:\Oleg\projects\Va.MBClient\ACliAdapter\AssemblyInfo.cpp   4   1   ACliAdapter
Error   3   error C2871: 'Reflection' : a namespace with this name does not exist   C:\Oleg\projects\Va.MBClient\ACliAdapter\AssemblyInfo.cpp   4   1   ACliAdapter
Error   4   error C2653: 'System' : is not a class or namespace name    C:\Oleg\projects\Va.MBClient\ACliAdapter\AssemblyInfo.cpp   5   1   ACliAdapter
Error   5   error C2871: 'CompilerServices' : a namespace with this name does not exist C:\Oleg\projects\Va.MBClient\ACliAdapter\AssemblyInfo.cpp   5   1   ACliAdapter
Error   6   error C2653: 'System' : is not a class or namespace name    C:\Oleg\projects\Va.MBClient\ACliAdapter\AssemblyInfo.cpp   6   1   ACliAdapter
Error   7   error C2871: 'InteropServices' : a namespace with this name does not exist  C:\Oleg\projects\Va.MBClient\ACliAdapter\AssemblyInfo.cpp   6   1   ACliAdapter
Error   8   error C2653: 'System' : is not a class or namespace name    C:\Oleg\projects\Va.MBClient\ACliAdapter\AssemblyInfo.cpp   7   1   ACliAdapter
Error   9   error C2871: 'Permissions' : a namespace with this name does not exist  C:\Oleg\projects\Va.MBClient\ACliAdapter\AssemblyInfo.cpp   7   1   ACliAdapter
Error   10  error C2337: 'AssemblyTitleAttribute' : attribute not found C:\Oleg\projects\Va.MBClient\ACliAdapter\AssemblyInfo.cpp   14  1   ACliAdapter
Error   11  error C2337: 'AssemblyDescriptionAttribute' : attribute not found   C:\Oleg\projects\Va.MBClient\ACliAdapter\AssemblyInfo.cpp   15  1   ACliAdapter
Error   12  error C2337: 'AssemblyConfigurationAttribute' : attribute not found C:\Oleg\projects\Va.MBClient\ACliAdapter\AssemblyInfo.cpp   16  1   ACliAdapter
Error   13  error C2337: 'AssemblyCompanyAttribute' : attribute not found   C:\Oleg\projects\Va.MBClient\ACliAdapter\AssemblyInfo.cpp   17  1   ACliAdapter
Error   14  error C2337: 'AssemblyProductAttribute' : attribute not found   C:\Oleg\projects\Va.MBClient\ACliAdapter\AssemblyInfo.cpp   18  1   ACliAdapter
Error   15  error C2337: 'AssemblyCopyrightAttribute' : attribute not found C:\Oleg\projects\Va.MBClient\ACliAdapter\AssemblyInfo.cpp   19  1   ACliAdapter
Error   16  error C2337: 'AssemblyTrademarkAttribute' : attribute not found C:\Oleg\projects\Va.MBClient\ACliAdapter\AssemblyInfo.cpp   20  1   ACliAdapter
Error   17  error C2337: 'AssemblyCultureAttribute' : attribute not found   C:\Oleg\projects\Va.MBClient\ACliAdapter\AssemblyInfo.cpp   21  1   ACliAdapter
Error   18  error C2337: 'AssemblyVersionAttribute' : attribute not found   C:\Oleg\projects\Va.MBClient\ACliAdapter\AssemblyInfo.cpp   34  1   ACliAdapter
Error   19  error C2337: 'ComVisible' : attribute not found C:\Oleg\projects\Va.MBClient\ACliAdapter\AssemblyInfo.cpp   36  1   ACliAdapter
Error   20  error C2337: 'CLSCompliantAttribute' : attribute not found  C:\Oleg\projects\Va.MBClient\ACliAdapter\AssemblyInfo.cpp   38  1   ACliAdapter
Error   21  error C2337: 'SecurityPermission' : attribute not found C:\Oleg\projects\Va.MBClient\ACliAdapter\AssemblyInfo.cpp   40  1   ACliAdapter
Error   22  error C2653: 'SecurityAction' : is not a class or namespace name    C:\Oleg\projects\Va.MBClient\ACliAdapter\AssemblyInfo.cpp   40  1   ACliAdapter
Error   23  error C2065: 'RequestMinimum' : undeclared identifier   C:\Oleg\projects\Va.MBClient\ACliAdapter\AssemblyInfo.cpp   40  1   ACliAdapter
Error   24  error C2871: 'System' : a namespace with this name does not exist   c:\oleg\projects\Va.mbclient\Acliadapter\ACliAdapter.h  5   1   ACliAdapter
Error   25  error C2059: syntax error : 'public'    c:\oleg\projects\Va.mbclient\Acliadapter\ACliAdapter.h  9   1   ACliAdapter
Error   26  error C2143: syntax error : missing ';' before '{'  c:\oleg\projects\Va.mbclient\Acliadapter\ACliAdapter.h  10  1   ACliAdapter
Error   27  error C2447: '{' : missing function header (old-style formal list?) c:\oleg\projects\Va.mbclient\Acliadapter\ACliAdapter.h  10  1   ACliAdapter
Error   34  The type or namespace name 'ACliAdapter' could not be found (are you missing a using directive or an assembly reference?)   C:\Oleg\projects\Va.MBClient\Va.MBClient\Program.cs 14  7   Va.MBClient
Error   35  The type or namespace name 'ACliAdapterMain' could not be found (are you missing a using directive or an assembly reference?)   C:\Oleg\projects\Va.MBClient\Va.MBClient\Program.cs 28  24  Va.MBClient
Error   36  Metadata file 'C:\Oleg\projects\Va.MBClient\Va.MBClient\bin\x64\Debug_TestGate\Va.MBClient.exe' could not be found  C:\Oleg\projects\Va.MBClient\TerminatorConsole2\CSC TerminatorConsole2 
```

为什么 x64 配置在 c++-cli 项目中不起作用？

**upd**我知道认为可能的项目引用系统的“32 位”版本，而我需要“64 位”版本。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T16:08:13.267

如果您将项目切换到`/clr:safe`它将同时针对 64 位和 32 位机器。此外，请考虑对于每个新配置，您需要再次设置所有设置。

# autocomplete - 如何在 yii 的 CJuiAutoComplete 文本字段中获取值？

> ID：13542240
> 
> 赞同：0
> 
> 时间：2012-11-24T14:39:24.387
> 
> 标签：autocomplete, yii

我正在使用这段代码。如何将值放入变量中，例如 $temp？

```
$this->widget('zii.widgets.jui.CJuiAutoComplete', array(
    'name'=>'patientSearch',
    'source'=>$arr,
    // additional javascript options for the autocomplete plugin
    'options'=>array(
        'minLength'=>'2',
),
'htmlOptions'=>array(
    'style'=>'height:20px;'
),
));

$temp = <value of autocomplete form>; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T05:16:49.783

阅读此[http://api.jqueryui.com/autocomplete/](http://api.jqueryui.com/autocomplete/)事件部分。使用`select`或`change`事件

```
$this->widget('zii.widgets.jui.CJuiAutoComplete', array(
  'name'=>'patientSearch',
  'source'=>$arr,
  // additional javascript options for the autocomplete plugin
  'options'=>array(
        'minLength'=>'2',
        'select' => 'js:function(event, ui) {
$temp = event.currentTarget.value;
}',
        'change' => 'js:function(event, ui) {
$temp = event.currentTarget.value;
}',
  ),
  'htmlOptions'=>array(
    'style'=>'height:20px;'
  ),
));

var $temp = ''; // init global variable 
```

# ios - 导航栏中的标签，可能和“允许”？

> ID：13542243
> 
> 赞同：1
> 
> 时间：2012-11-24T14:39:36.803
> 
> 标签：ios, xamarin.ios

是否可以在导航栏中添加标签？目的是显示与我正在移植的游戏相关的计时器。（我想要的是左侧的后退按钮和右侧的计时器和重新启动按钮）。

如果可能的话，从 iOS 的角度来看这是一个好主意吗？

谢谢

安克曼宁

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T19:03:20.653

每个`UiViewController`人都有一个`Title`财产。这允许您在顶部导航栏中设置文本。是的，使用它是个好主意！

# objective-c - 两次方法调用之间的时间间隔

> ID：13542245
> 
> 赞同：1
> 
> 时间：2012-11-24T14:39:50.617
> 
> 标签：objective-c, ios, client, core-bluetooth, cbperipheral

在 CoreBluetooth 中，当扫描显示附近有蓝牙设备时调用 didDiscoverPeripheral 方法。我想测量两次调用之间的时间并将其存储在一个变量中。我可以为此目的使用一种时间戳吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T14:51:27.353

在调用方法之前创建一个“NSDate”对象，`NSDate startTime = [NSDate date];`并在方法调用之后获取您想要获取时间间隔的时间间隔。`NSTimeInterval interval = [startTime timeIntervalSinceNow];`

# linux - 使用 device_create 为 dma_alloc_coherent 创建结构设备

> ID：13542246
> 
> 赞同：3
> 
> 时间：2012-11-24T14:40:02.327
> 
> 标签：linux, memory-management, kernel-module, dma

我想为我的 char 驱动程序在 DMAble 内存上实现 mmap 方法。起初我想用 DMA API 来实现它，然后是 PCI 设备。

```
dma_alloc_coherent(struct device *dev, size_t size, dma_addr_t *dma_handle, gfp_t gfp) 
```

dma_alloc_coherent 的第一个参数是指向结构设备的指针。对于 ISA 或 EISA，它可以为 NULL，但我需要支持 DMA 的有效设备。以下代码应该可以正常工作，但分配失败。

```
/* register device in sysfs */
mmrmp->udev = device_create(mmrmp->class, NULL, mmrmp->major, NULL, DEVICE_NAME);
if (mmrmp->udev == NULL)
{
    goto devcreate_failed;
}
printk(KERN_INFO "%s: Char driver initialized and added to the system at addr %p", __func__, mmrmp->udev);
if(dma_supported(mmrmp->udev,DMA_BIT_MASK(32)))
    printk(KERN_INFO "device supports DMA");
else
    printk(KERN_INFO "device does not support DMA");

if(is_device_dma_capable(mmrmp->udev))
    printk(KERN_INFO "is_device_dma_capable: device supports DMA");
else
    printk(KERN_INFO "is_device_dma_capable: device does not support DMA");

if (!dma_set_mask(mmrmp->udev, dma_get_required_mask(mmrmp->udev)))
    printk(KERN_INFO "set DMA mask failed");

if ((mmrmp->dma_handle & dma_get_required_mask(mmrmp->udev)) == mmrmp->dma_handle)
    printk(KERN_INFO "Allocated physical address is within DMA region");
mmrmp->data = dma_alloc_coherent(mmrmp->udev, PAGE_SIZE, &mmrmp->dma_handle, GFP_KERNEL); 
```

为什么 dma_supported 返回 1 而 is_dma_capable_returns 0？我应该如何创建我的设备来支持 dma_alloc_coherent？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-02-08T01:17:22.717

确保`mmrmp->udev->dma_mask pointer`不为 NULL。初始化如下：

```
static const u64 dmamask = DMA_BIT_MASK(32);
mmrmp->udev->dma_mask = (u64 *)&dmamask;
mmrmp->udev->coherent_dma_mask = DMA_BIT_MASK(32); 
```

# php - 如何在 php 包含文件中发布输入和选择值？

> ID：13542248
> 
> 赞同：0
> 
> 时间：2012-11-24T14:40:06.413
> 
> 标签：php, jquery

我有一个 HTML/PHP 文件“index.php”，我使用 jquery 和 php 从 index.php 中第一个选择中选择的值生成和填充第二个选择。生成的选择的值使用 jquery 填充输入字段。我如何将这些 php 生成的值与其他输入一起发布并立即在“index.php”中选择值

```
Diagram
 index.php 

    //other input 

      <select name="resident_type" id="resident_type"/>
        <option value="Resident">Resident</option>
        <option value="Non-Resident">Non-Resident</option>
   </select>

//jquery to get the selected value from select in index.php to pass func.php to query db

      $('#resident_type').change(function(){     
      $.get("func.php", {
        func: "resident_type",
        drop_var: $('#resident_type').val()
        .........
//more code
//included connetion.php
//func.php, the php generated select
if($_GET['func'] == "resident_type" && isset($_GET['func'])) { 
   drop_1($_GET['drop_var']); 
}
function drop_1(){
 --connection to the db
<select name="roomtype" id="roomtype"/>
   //some sql populating the generated select
        <option value="x">y</option>
        <option value="y">y</option>
   </select>
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T14:56:19.080

当您的 jquery 脚本开始在您的页面上运行时，PHP 早已不复存在并被遗忘，并且不再提供任何数据。因此，您要么必须使用数据预先填充所有元素，要么使用 AJAX（可能非常慢）在用户浏览页面并使用选择框时动态加载数据。

如果您的数据集很小，我建议您在页面上的某处预填充数据，而不是在控件中，而是在脚本中的某处，以便 jquery 可以使用这些数据为您的选择框填充正确的值。

# adobe - 如何制作退出按钮以返回 SWF

> ID：13542254
> 
> 赞同：0
> 
> 时间：2012-11-24T14:40:49.283
> 
> 标签：adobe, flash, actionscript-2, flash-cs5

我有一个虚拟游戏，在那个游戏中有一个迷你游戏，我发现了如何在另一个 SWF 之上加载一个 SWF，但是当我在迷你游戏中按下 X(/quit) 按钮时它就退出了当前会话并让您注销并重新登录。我想让它像 Club Penguin 一样加载 SWF，然后当您按下 X 按钮时，它会返回游戏，而不仅仅是让您重新登录。

我正在使用 Actionscript 2.0 顺便说一句。

*   这是用于加载 SWF 的代码：myMovieClipInstance.loadMovie("minigame.swf");

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T16:10:57.337

您可以使用 myMovieClipInstance.unLoadMovie()，然后使用 removeMovieClip() 删除影片剪辑，或者将其移出舞台。

# android - 创建新的 Google 日历

> ID：13542260
> 
> 赞同：3
> 
> 时间：2012-11-24T14:41:15.290
> 
> 标签：android, google-calendar-api

我想使用 Android 应用程序在现有帐户上创建一个新的 Google 日历，就像它所做的[这个](http://sourceforge.net/projects/lngooglecalsync/)Windows 应用程序一样。该应用程序使用 Gdata API，但我不知道如何使用它。我尝试了较新的[google-api-java-client的](http://code.google.com/p/google-api-java-client/wiki/Android)[示例](http://samples.google-api-java-client.googlecode.com/hg/calendar-android-sample/instructions.html?r=default)，但如果不启用 Calendar API，该示例将无法工作。我希望每个人都可以通过输入登录信息（如上面的 Windows 应用程序）来使用它。

如果我可以使用新的[Calendar Api](http://developer.android.com/guide/topics/providers/calendar-provider.html)直接在手机上创建一个新的可同步日历，那就更好了。

有人可以举例说明如何从 Android 应用程序创建新的 Google 日历吗？

提前非常感谢！

# javascript - 从表单提交更改 URL 哈希

> ID：13542265
> 
> 赞同：4
> 
> 时间：2012-11-24T14:42:21.530
> 
> 标签：javascript, jquery, html

在我的 index.html 上，我有以下表格：

```
<form action="/search" id="search-form">
    <input type="text" id="search-input" name="s" x-webkit-speech>
</form> 
```

哪个正确重定向到，`/search?s=searchvalue`但我怎么能把它改成`/search#s=searchvalue`使用javascript？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-24T14:46:16.630

好吧，不使用 jQuery，但应该可以：

```
<form action="/search" id="search-form"
      onsubmit="location.href=this.action+'#s='+this.s.value; return false;">
    <input type="text" id="search-input" name="s" x-webkit-speech>
</form> 
```

另请参阅此提琴手：http: [//jsfiddle.net/SujwN/](http://jsfiddle.net/SujwN/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-24T14:46:33.180

我建议：

```
$('#search-form').submit(
    function(e){
        e.preventDefault();
        var input = $('#search-input');
        window.location.hash = input.attr('name') + '=' + encodeURIComponent(input.val());
    }); 
```

以上，加上一个`on('hashchange', /* other stuff... */)`监听器似乎工作：

```
$(window).on('hashchange', function(e){
    var hash = window.location.hash.substring(1),
        attrValue = hash.split('='),
        varName = attrValue[0],
        varValue = attrValue[1];
    console.log(varName, decodeURIComponent(varValue));
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/g3QTn/)。

参考：

*   [`attr()`](http://api.jquery.com/attr/).
*   [`decodeURIComponent()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/decodeURIComponent).
*   [`encodeURIComponent()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent).
*   [`event.preventDefault()`](http://api.jquery.com/event.preventDefault/).
*   [`submit()`](http://api.jquery.com/submit/).
*   [`val()`](http://api.jquery.com/val/).
*   [`window.location.hash`](https://developer.mozilla.org/en-US/docs/DOM/window.location).

# java - DataTable 中的动态列取决于 Primefaces 中的用户输入

> ID：13542272
> 
> 赞同：0
> 
> 时间：2012-11-24T14:43:24.900
> 
> 标签：java, primefaces

**代码：**

**搜索.xhtml**

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

    <html xmlns="http://www.w3.org/1999/xhtml"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:p="http://primefaces.org/ui"
        xmlns:f="http://java.sun.com/jsf/core">
    <h:head></h:head>
    <h:form id="form">
    <h:body>
    <h:outputLabel value="Kiosk Id"> </h:outputLabel>
    <p:selectOneMenu value="#{abacusMB.kioskId}">
    <f:selectItem itemLabel="-Select-" itemValue="null"></f:selectItem>
    <f:selectItem itemLabel="1001" itemValue="1001"></f:selectItem>
    <f:selectItem itemLabel="1002" itemValue="1002"></f:selectItem>
    </p:selectOneMenu>
    <br></br>
    <h:outputLabel value="Kiosk Location"></h:outputLabel>
    <p:selectOneMenu value="#{abacusMB.location}">
    <f:selectItem itemLabel="-Select-" itemValue="null"></f:selectItem>
    <f:selectItem itemLabel="Nashik" itemValue="Nashik"></f:selectItem>
    <f:selectItem itemLabel="Lonavala" itemValue="Lonavala"></f:selectItem>
    </p:selectOneMenu>
    <br></br>
    <center>
    <p:commandButton value="Search" type="submit" actionListener="#{abacusMB.searchRecord}" update="seachResult"></p:commandButton>
    </center>
    <p:dataTable id="seachResult" rendered="#{abacusMB.recordFlag}" lazy="true" value="#{abacusMB.recordList}" var="record">
    <p:column headerText="User">
    <h:outputText value="#{record.userName}"></h:outputText>
    </p:column>
    <p:column headerText="KioskId">
    <h:outputText value="#{record.kioskId}"></h:outputText>
    </p:column>
    <p:column headerText="Location">
    <h:outputText value="#{record.location}"></h:outputText>
    </p:column>
    </p:dataTable>
    </h:body>
    </h:form>
    </html> 
```

**web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" version="3.0">
  <display-name>Abacus</display-name>
  <servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/faces/*</url-pattern>
  </servlet-mapping>
  <context-param>
    <param-name>primefaces.THEME</param-name>
    <param-value>bluesky</param-value>
  </context-param>
  <context-param>
        <description>State saving method: 'client' or 'server' (=default). See JSF Specification 2.5.2</description>
        <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
        <param-value>client</param-value>
    </context-param>
  <listener>
    <listener-class>com.sun.faces.config.ConfigureListener</listener-class>
  </listener>
</web-app> 
```

**RecordVO.java**

```
 package com.abacus.search.vo;

    import java.io.Serializable;

    public class RecordVO implements Serializable{

        private static final long serialVersionUID = 11L;
        private String location;
        private String kioskId;
        private String userName;

        public String getLocation() {
            return location;
        }

        public void setLocation(String location) {
            this.location = location;
        }

        public String getKioskId() {
            return kioskId;
        }

        public void setKioskId(String kioskId) {
            this.kioskId = kioskId;
        }

        public String getUserName() {
            return userName;
        }

        public void setUserName(String userName) {
            this.userName = userName;
        }
    } 
```

**算盘MB.java**

```
 package com.abacus.search.managedbean;

    import java.io.Serializable;
    import java.util.ArrayList;
    import java.util.List;

    import com.abacus.search.vo.RecordVO;
    public class AbacusMB implements Serializable{

        private static final long serialVersionUID = 1L;
        private String location;
        private String kioskId;
        private boolean recordFlag;
        private List<RecordVO>recordList=new ArrayList<RecordVO>();

        public String getLocation() {
            return location;
        }

        public void setLocation(String location) {
            this.location = location;
        }

        public String getKioskId() {
            return kioskId;
        }

        public void setKioskId(String kioskId) {
            this.kioskId = kioskId;
        }

        public boolean isRecordFlag() {
            return recordFlag;
        }

        public void setRecordFlag(boolean recordFlag) {
            this.recordFlag = recordFlag;
        }

        public List<RecordVO> getRecordList() {
            return recordList;
        }

        public void setRecordList(List<RecordVO> recordList) {
            this.recordList = recordList;
        }
        public void searchRecord(){
            recordFlag=true;
            List<RecordVO> recordVOTempList=new ArrayList<RecordVO>();

            if(this.kioskId.equals("1001") && this.location.equals("Nashik")){
                System.out.println("User has selected kiosk id as 1001 and location as Nashik ");
                System.out.println("We will display two records to Nashik");
                for(int i=0;i<2;i++){
                    if(i==0){
                        RecordVO recordVO=new RecordVO();
                        recordVO.setKioskId(kioskId);
                        recordVO.setLocation(location);
                        recordVO.setUserName("Sumit");
                        recordVOTempList.add(recordVO);
                    }else{
                        RecordVO recordVO=new RecordVO();
                        recordVO.setKioskId(kioskId);
                        recordVO.setLocation(location);
                        recordVO.setUserName("Aniket");
                        recordVOTempList.add(recordVO);
                        }
                }

            }else{
                if(this.kioskId.equals("1002") && this.location.equals("Lonavala")){
                    System.out.println("User has selected kiosk id as 1002 and location as Lonavala ");
                    System.out.println("We will display two records to Lonavala");
                    for(int i=0;i<2;i++){
                        if(i==0){
                            RecordVO recordVO=new RecordVO();
                            recordVO.setKioskId(kioskId);
                            recordVO.setLocation(location);
                            recordVO.setUserName("Aarti");
                            recordVOTempList.add(recordVO);
                        }else{
                            RecordVO recordVO=new RecordVO();
                            recordVO.setKioskId(kioskId);
                            recordVO.setLocation(location);
                            recordVO.setUserName("Rachana");
                            recordVOTempList.add(recordVO);
                            }
                    }//close for loop

                }//close if loop
            }//close else
            System.out.println("Record Flag value:"+recordFlag);
            System.out.println("Temp List size="+recordVOTempList.size());
            this.recordList=recordVOTempList;

        }

    }//close class 
```

假设用户只输入位置并且没有为 kiosk id 提供任何输入，那么在单击搜索按钮后显示的记录中不应显示 kiosk id 列。

如何实施？

我在想的一个解决方案是我将检查每个输入的值是否为空，并根据我将呈现相应的列。告诉我它是否正确？我的 bean 在视图范围内。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T13:31:36.663

尝试这个

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui">
<h:head>  
 <link rel="stylesheet" type="text/css" href="css/style.css" /></h:head>  

 <h:body>  

 <h:form id="form">
    <p:graphicImage value="images/Abacus.jpg" width="100%"></p:graphicImage> 
    <p:tabView id="tabView">  

    <p:tab id="tab1" title="Dashboard">  
        <h:panelGrid columns="2" cellpadding="10">  

        </h:panelGrid>  
    </p:tab>  

    <p:tab id="tab2" title="Search">  
    <center>
        <p:outputLabel value="Search Report" styleClass="sumit" ></p:outputLabel>
    </center>
    <p:panel> 

     <p:panelGrid columns="4" style="width:100%" >  

     <h:outputLabel value="Transaction Id:  " />  
       <p:inputMask value="#{abacusMB.transactionId}" mask="9999999999999999"> </p:inputMask>

     <h:outputLabel  value="Service Type:  " />  
       <p:selectOneMenu value="#{abacusMB.serviceType}">  
            <f:selectItem itemLabel="-Select-"/>
            <f:selectItem itemLabel="Deposit" itemValue="Deposit"></f:selectItem>  
       </p:selectOneMenu>  

     <h:outputLabel  value="Account Number:  " />  
       <p:inputMask value="#{abacusMB.accountNumber}" mask="9999999999999999"> </p:inputMask> 

     <h:outputLabel  value="Account Type:  " />  
       <p:selectOneMenu value="#{abacusMB.accountType}">  
            <f:selectItem itemLabel="ALL" itemValue="ALL"  />
            <f:selectItems  value="#{abacusMB.accTypes}"></f:selectItems>

       </p:selectOneMenu>  

    <h:outputLabel  value="Kiosk Location:  " />  
       <p:selectOneMenu value="#{abacusMB.kioskLocation}" >  
            <f:selectItem itemLabel="ALL" itemValue="ALL"  />  
            <f:selectItems value="#{abacusMB.kioskLocations}"/> 
            <p:ajax listener="#{abacusMB.onSelectLocation}" update="namelist"></p:ajax> 
       </p:selectOneMenu>   

       <h:outputLabel  value="Deposit Mode:  " />  
       <p:selectOneMenu value="#{abacusMB.depositMode}">  
            <f:selectItem itemLabel="-Select-"/>
            <f:selectItem itemLabel="Cash" itemValue="Cash"></f:selectItem>
            <f:selectItem itemLabel="Cheque" itemValue="Cheque"></f:selectItem>  
       </p:selectOneMenu>  

     <h:outputLabel  value="Kiosk Name:  " />  
       <p:selectOneMenu value="#{abacusMB.kioskName}" disabled="#{abacusMB.kioName}" id="namelist">  
            <f:selectItem itemLabel="ALL" itemValue="" />  
            <f:selectItems value="#{abacusMB.kname}" />  
            <p:ajax listener="#{abacusMB.onSelectName}" update="idlist"></p:ajax>
       </p:selectOneMenu>

     <h:outputLabel  value="Transaction Status:  " />  
       <p:selectOneMenu value="#{abacusMB.transactionStatus}">  
            <f:selectItem itemLabel="ALL" itemValue="" />  
            <f:selectItem itemLabel="Failed" itemValue="Failed" />  
            <f:selectItem itemLabel="Success" itemValue="Success" />  
       </p:selectOneMenu>

    <h:outputLabel  value="Kiosk Id:  " />  
     <p:selectOneMenu value="#{abacusMB.kioskId}" disabled="#{abacusMB.kioId}" id="idlist">  
            <f:selectItem itemLabel="ALL" itemValue="" />  
            <f:selectItems value="#{abacusMB.kid}" />  
     </p:selectOneMenu>

     <h:outputLabel  value="Batch Id:  " />  
     <p:selectOneMenu value="#{abacusMB.batchId}">  
            <f:selectItem itemLabel="ALL" itemValue="" />  
            <f:selectItems value="#{abacusMB.bid}" />  
     </p:selectOneMenu>

    <h:outputLabel  value="Start Date: " />
        <p:calendar value="#{abacusMB.startDate}" showOn="button" size="10" >  
    </p:calendar> 

    <h:outputLabel value="End Date: " />
       <p:calendar value="#{abacusMB.endDate}" showOn="button" size="10" required="true" requiredMessage="Please select End Date">  
    </p:calendar>    

     <h:outputLabel value="Get All Data:"></h:outputLabel>
      <h:selectBooleanCheckbox value="#{abacusMB.searchAll}" immediate="true" />
  </p:panelGrid>   
</p:panel> 

<center>
  <p:commandButton type="submit" value="Search" icon="ui-icon-check" style="margin:0" action="#{abacusMB.getSearchSubmit}" update=":form:datatbl" immediate="true"/> 
</center>
<br/><br/>
<p:dataTable  var="itr" value="#{abacusMB.searchReportList}"  rendered="#{abacusMB.showSearch}" id="datatbl" lazy="true" paginator="true" rows="5"  
                 paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}"  
                 rowsPerPageTemplate="5,10,15" emptyMessage="No Records Found!!!">

<p:column headerText="Transaction ID"/>
<h:outputText value="#{itr.transId}" ></h:outputText>
<p:column headerText="Kiosk ID"/>
<h:outputText value="#{itr.kioskId}" ></h:outputText>
<p:column headerText="Account Number"/>
<h:outputText value="#{itr.accNumber}" ></h:outputText>
<p:column headerText="Transaction Code"/>
<h:outputText value="#{itr.transCode}" ></h:outputText>
<p:column headerText="Deposite Mode"/>
<h:outputText value="#{itr.depoMode}" ></h:outputText>
<p:column headerText="Deposite Amount"/>
<h:outputText value="#{itr.depoAmt}" ></h:outputText>
<p:column headerText="Denomination"/>
<h:outputText value="#{itr.denomination}" ></h:outputText>
<p:column headerText="Checque Number"/>
<h:outputText value="#{itr.chkNumber}" ></h:outputText>
<p:column headerText="MICR Code"/>
<h:outputText value="#{itr.micrCode}" ></h:outputText>
<p:column headerText="Note Count"/>
<h:outputText value="#{itr.noteCnt}" ></h:outputText>
<p:column headerText="Batch ID"/>
<h:outputText value="#{itr.batchId}" ></h:outputText>
<p:column headerText="Date"/>
<h:outputText value="#{itr.dt}" ></h:outputText>
<p:column headerText="Time"/>
<h:outputText value="#{itr.tym}" ></h:outputText>
<p:column headerText="Service Type"/>
<h:outputText value="#{itr.serviceType}" ></h:outputText>
<p:column headerText="Account Type"/>
<h:outputText value="#{itr.accType}" ></h:outputText>
<p:column headerText="Kiosk Name"/>
<h:outputText value="#{itr.kioskName}" ></h:outputText>
<p:column headerText="City"/>
<h:outputText value="#{itr.city}" ></h:outputText>
<p:column headerText="State"/>
<h:outputText value="#{itr.state}" ></h:outputText>
<p:column headerText="Country"/>
<h:outputText value="#{itr.country}" ></h:outputText>

</p:dataTable>

    </p:tab>  

    <p:tab id="tab3" title="Monthly Report">  
        <h:panelGrid columns="2" cellpadding="10">  
        </h:panelGrid>  
    </p:tab>  
  <p:tab id="tab4" title="EOD Report">  
<center>
    <p:outputLabel value="EOD Summary Report" styleClass="sumit" ></p:outputLabel></center>
  <p:panel> 
          <p:panelGrid columns="4" style="width:100%" >  
        <h:outputLabel value="Kiosk Circle:  " />  
     <p:selectOneMenu styleClass="selectMenu">  
            <f:selectItem itemLabel="ALL" itemValue="" />  
            <f:selectItem itemLabel="Option 1" itemValue="1" />  
            <f:selectItem itemLabel="Option 2" itemValue="2" />  
            <f:selectItem itemLabel="Option 3" itemValue="3" />  
        </p:selectOneMenu>  
         <h:outputLabel  value="Payment Mode:  " />  
     <p:selectOneMenu styleClass="selectMenu">  
            <f:selectItem itemLabel="ALL" itemValue="" />  
            <f:selectItem itemLabel="Option 1" itemValue="1" />  
            <f:selectItem itemLabel="Option 2" itemValue="2" />  
            <f:selectItem itemLabel="Option 3" itemValue="3" />  
        </p:selectOneMenu>  
         <h:outputLabel  value="Kiosk Name:  " />

     <p:selectOneMenu value="#{abacusMB.userName}" styleClass="selectMenu">  
            <f:selectItem itemLabel="ALL" itemValue="" />  
            <f:selectItems value="#{abacusMB.users}"></f:selectItems>
        </p:selectOneMenu>  
     <h:outputLabel  value="Batch Id:  " />  
     <p:selectOneMenu styleClass="selectMenu">  
            <f:selectItem itemLabel="ALL" itemValue="" />  
            <f:selectItem itemLabel="Option 1" itemValue="1" />  
            <f:selectItem itemLabel="Option 2" itemValue="2" />  
            <f:selectItem itemLabel="Option 3" itemValue="3" />  
        </p:selectOneMenu>
     <h:outputLabel  value="Service:  " />  
     <p:selectOneMenu styleClass="selectMenu">  
            <f:selectItem itemLabel="ALL" itemValue=""  />  
            <f:selectItem itemLabel="Option 1" itemValue="1" />  
            <f:selectItem itemLabel="Option 2" itemValue="2" />  
            <f:selectItem itemLabel="Option 3" itemValue="3" />  
      </p:selectOneMenu>
      <h:outputLabel  value="Start Date: " />
       <p:calendar value="#{abacusMB.startDate}" showOn="button" size="10" >  
    </p:calendar> 
    <h:outputLabel value="End Date: " />
       <p:calendar value="#{abacusMB.startDate}" showOn="button" size="10" required="true" requiredMessage="Please select End Date">  
    </p:calendar>    

</p:panelGrid> </p:panel> 

<center>
  <p:commandButton type="submit" value="Search" icon="ui-icon-check" style="margin:0" action="#{abacusMB.getEODReport}" update="@form" immediate="true"/> 

</center>
</p:tab>  
  <p:tab id="tab5" title="Custom View">  
        <h:panelGrid columns="2" cellpadding="10">  
        </h:panelGrid>  
    </p:tab>  
   <p:tab id="tab7" title="Log Off">  
        <h:panelGrid columns="2" cellpadding="10">  
        </h:panelGrid>  
    </p:tab>  

</p:tabView>  

<p:panel id="Results">
<p:dataTable value="#{abacusMB.eodReport}" var="itr" rendered="true" emptyMessage="No Records Found!!!" id="record">
<p:column headerText="Kiosk Circle"/>
<h:outputText value="#{itr.circle}" ></h:outputText>
<p:column headerText="Kiosk Name"/>
<h:outputText value="#{eod.getName}"></h:outputText>
<p:column headerText="Kiosk Service"/>
<h:outputText value="#{eod.service}"></h:outputText>
</p:dataTable>
</p:panel>
 </h:form>  
 </h:body>  
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T13:54:39.763

BeanClass 为它

```
/**
 * 
 */
package com.everest.managedbean;

//use control+alt+o for auto package update
import java.io.Serializable;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Date;
import java.util.List;

import javax.faces.application.FacesMessage;
import javax.faces.context.FacesContext;

import org.primefaces.event.DateSelectEvent;

import com.everest.dao.DbManager;
import com.everest.vo.ResultVO;

import com.everest.vo.SearchVO;

/**
 * @author ANIKET
 *
 */
public class AbacusMB implements Serializable {

    /**
     * 
     */
    private static final long serialVersionUID = 1L;
    private String accountNumber;
    private String accountType;
    private List<String>accTypes;
    private String transactionId;
    private String serviceType;
    private String kioskLocation;
    private List<String> kioskLocations;
    private String kioskId;
    private List<String>kid;
    private boolean kioId=true;
    private String batchId;
    private List<String>bid;
    private String depositMode;
    private String kioskName;
    private List<String>kname;
    private boolean kioName=true;
    private String transactionStatus;
    private String userName;
    private List<String>users;

    private Date startDate;
    private Date endDate;

    private List<ResultVO>eodReport;
    private boolean showEOD=false;

    private List<SearchVO>searchReportList;
    private boolean showSearch=false;
    private boolean searchAll=false;

    DbManager db=DbManager.getDbobject();
    Statement stmt;

    public AbacusMB() {
        this.eodReport=new ArrayList<ResultVO>();
        // TODO Auto-generated constructor stub
    }
    /**
     * @return the users
     * @throws SQLException 
     */
    public List<String> getUsers() throws SQLException {

//        stmt=db.con.createStatement();
//        ResultSet rs=stmt.executeQuery("select * from abacus_user");
//        users=new ArrayList<String>();
//        while(rs.next())
//        {
//          users.add(rs.getString("name"));
//        }

        return users;
    }

    /**
     * @param users the users to set
     */
    public void setUsers(List<String> users) {
        this.users = users;
    }

    /**
     * @return the userName
     */
    public String getUserName() {
        return userName;
    }

    /**
     * @param userName the userName to set
     */
    public void setUserName(String userName) {
        this.userName = userName;
    }
     public void handleDateSelect(DateSelectEvent event) {  
            FacesContext facesContext = FacesContext.getCurrentInstance();  
            SimpleDateFormat format = new SimpleDateFormat("d/M/yyyy");  
            facesContext.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO, "Date Selected", format.format(event.getDate())));  
     }

    /**
     * @return the startDate
     */
    public Date getStartDate() {
        return startDate;
    }

    /**
     * @param startDate the startDate to set
     */
    public void setStartDate(Date startDate) {
        this.startDate = startDate;
    }

    /**
     * @return the endDate
     */
    public Date getEndDate() {
        return endDate;
    }

    /**
     * @param endDate the endDate to set
     */
    public void setEndDate(Date endDate) {
        this.endDate = endDate;
    }  
    public void getEODReport(){
    eodReport=new ArrayList<ResultVO>();
    System.out.println("Inside EOD Report");
    showEOD=true;
    ResultVO r1=new ResultVO();
    r1.setCircle("Gangapur Naka");
    r1.setName("Airtel");
    r1.setService("PrePaid");
    ResultVO r2=new ResultVO();
    r1.setCircle("Sanghvi");
    r1.setName("TataDocomo");
    r1.setService("PostPaid");
    eodReport.add(r1);
    eodReport.add(r2);
    this.setEodReport(eodReport);
    System.out.println("Size of eodReportVO: "+eodReport.size());
    }

    /**
     * @return the eodReport
     */
    public List<ResultVO> getEodReport() {

        return eodReport;
    }

    /**
     * @param eodReport the eodReport to set
     */
    public void setEodReport(List<ResultVO> eodReport) {
        this.eodReport = eodReport;
    }

    /**
     * @return the showEOD
     */
    public boolean isShowEOD() {
        return showEOD;
    }

    /**
     * @param showEOD the showEOD to set
     */
    public void setShowEOD(boolean showEOD) {
        this.showEOD = showEOD;
    }

    /**
     * @return the depositMode
     */
    public String getDepositMode() {
        return depositMode;
    }

    /**
     * @param depositMode the depositMode to set
     */
    public void setDepositMode(String depositMode) {
        this.depositMode = depositMode;
    }

    /**
     * @param serviceType the serviceType to set
     */
    public void setServiceType(String serviceType) {
        this.serviceType = serviceType;
    }

    /**
     * @return the serviceType
     */
    public String getServiceType() {
        return serviceType;
    }

    /**
     * @return the searchAll
     */
    public boolean isSearchAll() {
        return searchAll;
    }

    /**
     * @param searchAll the searchAll to set
     */
    public void setSearchAll(boolean searchAll) {
        this.searchAll = searchAll;
        if(searchAll){
            System.out.println("Get All Data is selected");
        }
        else{
            System.out.println("Get All Data is not selected");
        }
    }
    /**
     * @return the accountNumber
     */
    public String getAccountNumber() {
        return accountNumber;
    }
    /**
     * @param accountNumber the accountNumber to set
     */
    public void setAccountNumber(String accountNumber) {
        this.accountNumber = accountNumber;
    }
    /**
     * @return the kioskLocation
     */
    public String getKioskLocation() {
        return kioskLocation;
    }
    /**
     * @param kioskLocation the kioskLocation to set
     */
    public void setKioskLocation(String kioskLocation) {
        this.kioskLocation = kioskLocation;
    }
    /**
     * This list is used ton populate Kiosk Location dropdown list
     * @return the kioskLocations
     * @throws SQLException 
     */
    public List<String> getKioskLocations() throws SQLException {

        kioskLocations=new ArrayList<String>();
        stmt=db.con.createStatement();
        ResultSet rs=stmt.executeQuery("select city from kiosk_master_tbl");
        while(rs.next())
        {
            kioskLocations.add(rs.getString(1));
        }
        return kioskLocations;
    }
    /**
     * @param kioskLocations the kioskLocations to set
     */
    public void setKioskLocations(List<String> kioskLocations) {
        this.kioskLocations = kioskLocations;
    }
    /**
     * @return the transactionStatus
     */
    public String getTransactionStatus() {
        return transactionStatus;
    }
    /**
     * @param transactionStatus the transactionStatus to set
     */
    public void setTransactionStatus(String transactionStatus) {
        this.transactionStatus = transactionStatus;
    }

    /**
     * @return the accTypes
     */
    public List<String> getAccTypes() {
        accTypes=new ArrayList<String>();
            accTypes.add("Saving");
            accTypes.add("Current");

        return accTypes;
    }
    /**
     * @param accTypes the accTypes to set
     */
    public void setAccTypes(List<String> accTypes) {
        this.accTypes = accTypes;
    }
    /**
     * @return the accountType
     */
    public String getAccountType() {
        return accountType;
    }
    /**
     * @param accountType the accountType to set
     */
    public void setAccountType(String accountType) {
        this.accountType = accountType;
    }
    /**
     * @return the kioskName
     */
    public String getKioskName() {
        return kioskName;
    }
    /**
     * @param kioskName the kioskName to set
     */
    public void setKioskName(String kioskName) {
        this.kioskName = kioskName;
    }
    /**
     * @return the kname
     * @throws SQLException 
     */
    public List<String> getKname() throws SQLException {

        return kname;
    }
    /**
     * @param kname the kname to set
     */
    public void setKname(List<String> kname) {
        this.kname = kname;
    }

    /**
     * @return the transactionId
     */
    public String getTransactionId() {
        return transactionId;
    }
    /**
     * @param transactionId the transactionId to set
     */
    public void setTransactionId(String transactionId) {
        this.transactionId = transactionId;
    }
    /**
     * @return the kioskId
     */
    public String getKioskId() {
        return kioskId;
    }
    /**
     * @param kioskId the kioskId to set
     */
    public void setKioskId(String kioskId) {
        this.kioskId = kioskId;
    }
    /**
     * @return the kid
     * @throws SQLException 
     */
    public List<String> getKid() throws SQLException {

        return kid;
    }
    /**
     * @param kid the kid to set
     */
    public void setKid(List<String> kid) {
        this.kid = kid;
    }
    /**
     * @return the batchId
     */
    public String getBatchId() {
        return batchId;
    }
    /**
     * @param batchId the batchId to set
     */
    public void setBatchId(String batchId) {
        this.batchId = batchId;
    }
    /**
     * @return the bid
     * @throws SQLException 
     */
    public List<String> getBid() throws SQLException {
        bid=new ArrayList<String>();
        stmt=db.con.createStatement();
        ResultSet rs=stmt.executeQuery("select batchid from batch_info_tbl");
        while(rs.next())
        {
            bid.add(rs.getString(1));
        }
        return bid;
    }
    /**
     * @param bid the bid to set
     */
    public void setBid(List<String> bid) {
        this.bid = bid;
    }
    public void setKioName(boolean kioName) {
        this.kioName = kioName;
    }
    public boolean isKioName() {
        return kioName;
    }
    /**
     * @return the kioId
     */
    public boolean isKioId() {
        return kioId;
    }
    /**
     * @param kioId the kioId to set
     */
    public void setKioId(boolean kioId) {
        this.kioId = kioId;
    }

    public void onSelectLocation() throws SQLException
    {
        if(kioskLocation!=null)
        {
            kioName=false;
            kname=new ArrayList<String>();
            stmt=db.con.createStatement();
            ResultSet rs=stmt.executeQuery("select kioskname from kiosk_master_tbl where city='"+kioskLocation+"'" );
            while(rs.next())
            {
                kname.add(rs.getString(1));
            }
        }
    }

    public void onSelectName() throws SQLException
    {
        if(kioskName!=null)
        {
            kioId=false;
            stmt=db.con.createStatement();
            ResultSet rs=stmt.executeQuery("select kioskid from kiosk_master_tbl where kioskname='"+kioskName+"'");
            kid=new ArrayList<String>();
            while(rs.next())
            {
                kid.add(rs.getString(1));
            }
        }
    }

    public void getSearchSubmit() throws SQLException
    {
        int i=0;
        System.out.println("Inside search");
        showSearch=true;
        stmt=db.con.createStatement();
        searchReportList=new ArrayList<SearchVO>();
        ResultSet rs=stmt.executeQuery("SELECT * FROM (SELECT ct.transactionid,ct.kioskid,ct.AccountNumber,ct.TransactionCode,ct.DepositeMode,ct.DepositeAmount,ct.Denomination,ct.ChequeNumber,ct.MICRCode,ct.NoteCount,ct.BatchId,ct.Dt,ct.Tym,ct.ServiceType,ct.AccountType,kmt.kioskname,kmt.city,kmt.state,kmt.country FROM kiosk_master_tbl AS kmt ,customer_transaction AS ct WHERE ct.kioskid=kmt.kioskid) AS newtbl WHERE newtbl.AccountType='"+accountType+"' ");

        while(rs.next())
        {
            i++;
            SearchVO vo=new SearchVO();

            vo.setTransId(rs.getString(1));
            vo.setKioskId(rs.getString(2));
            vo.setAccNumber(rs.getString(3));
            vo.setTransCode(rs.getString(4));
            vo.setDepoMode(rs.getString(5));
            vo.setDepoAmt(rs.getString(6));
            vo.setDenomination(rs.getString(7));
            vo.setChkNumber(rs.getString(8));
            vo.setMicrCode(rs.getString(9));
            vo.setNoteCnt(rs.getString(10));
            vo.setBatchId(rs.getString(11));
            vo.setDt(rs.getString(12));
            vo.setTym(rs.getString(13));
            vo.setServiceType(rs.getString(14));
            vo.setAccType(rs.getString(15));
            vo.setKioskName(rs.getString(16));
            vo.setCity(rs.getString(17));
            vo.setState(rs.getString(18));
            vo.setCountry(rs.getString(19));
            searchReportList.add(vo);
        }
        this.setSearchReportList(searchReportList);
        System.out.println("No. Of Record:- "+i);
        System.out.println("Size of SearchVO: "+searchReportList.size());
    }
    /**
     * @return the showSearch
     */
    public boolean isShowSearch() {
        return showSearch;
    }
    /**
     * @param showSearch the showSearch to set
     */
    public void setShowSearch(boolean showSearch) {
        this.showSearch = showSearch;
    }
    /**
     * @return the searchReportList
     */
    public List<SearchVO> getSearchReportList() {
        return searchReportList;
    }
    /**
     * @param searchReportList the searchReportList to set
     */
    public void setSearchReportList(List<SearchVO> searchReportList) {
        this.searchReportList = searchReportList;
    }
} 
```

// 样式类

```
@CHARSET "ISO-8859-1";
.sumit{
color:blue; 
}

.selectCalendarMenu{
width:50%;  
} 
```

//值对象类

```
public class SearchVO implements Serializable{
    /**
     * 
     */
    private static final long serialVersionUID = 1L;
    private String transId;
    private String kioskId;
    private String accNumber;
    private String transCode;
    private String depoMode;
    private String depoAmt;
    private String denomination;
    private String chkNumber;
    private String micrCode;
    private String noteCnt;
    private String batchId;
    private String serviceType;
    private String accType;
    private String kioskName;
    private String dt;
    private String tym;
    private String city;
    private String state;
    private String country;
    /**
     * @return the transId
     */
    public String getTransId() {
        return transId;
    }
    /**
     * @param transId the transId to set
     */
    public void setTransId(String transId) {
        this.transId = transId;
    }
    /**
     * @return the kioskId
     */
    public String getKioskId() {
        return kioskId;
    }
    /**
     * @param kioskId the kioskId to set
     */
    public void setKioskId(String kioskId) {
        this.kioskId = kioskId;
    }
    /**
     * @return the accNumber
     */
    public String getAccNumber() {
        return accNumber;
    }
    /**
     * @param accNumber the accNumber to set
     */
    public void setAccNumber(String accNumber) {
        this.accNumber = accNumber;
    }
    /**
     * @return the transCode
     */
    public String getTransCode() {
        return transCode;
    }
    /**
     * @param transCode the transCode to set
     */
    public void setTransCode(String transCode) {
        this.transCode = transCode;
    }
    /**
     * @return the depoMode
     */
    public String getDepoMode() {
        return depoMode;
    }
    /**
     * @param depoMode the depoMode to set
     */
    public void setDepoMode(String depoMode) {
        this.depoMode = depoMode;
    }
    /**
     * @return the depoAmt
     */
    public String getDepoAmt() {
        return depoAmt;
    }
    /**
     * @param depoAmt the depoAmt to set
     */
    public void setDepoAmt(String depoAmt) {
        this.depoAmt = depoAmt;
    }
    /**
     * @return the denomination
     */
    public String getDenomination() {
        return denomination;
    }
    /**
     * @param denomination the denomination to set
     */
    public void setDenomination(String denomination) {
        this.denomination = denomination;
    }
    /**
     * @return the chkNumber
     */
    public String getChkNumber() {
        return chkNumber;
    }
    /**
     * @param chkNumber the chkNumber to set
     */
    public void setChkNumber(String chkNumber) {
        this.chkNumber = chkNumber;
    }
    /**
     * @return the micrCode
     */
    public String getMicrCode() {
        return micrCode;
    }
    /**
     * @param micrCode the micrCode to set
     */
    public void setMicrCode(String micrCode) {
        this.micrCode = micrCode;
    }
    /**
     * @return the noteCnt
     */
    public String getNoteCnt() {
        return noteCnt;
    }
    /**
     * @param noteCnt the noteCnt to set
     */
    public void setNoteCnt(String noteCnt) {
        this.noteCnt = noteCnt;
    }
    /**
     * @return the batchId
     */
    public String getBatchId() {
        return batchId;
    }
    /**
     * @param batchId the batchId to set
     */
    public void setBatchId(String batchId) {
        this.batchId = batchId;
    }
    /**
     * @return the serviceType
     */
    public String getServiceType() {
        return serviceType;
    }
    /**
     * @param serviceType the serviceType to set
     */
    public void setServiceType(String serviceType) {
        this.serviceType = serviceType;
    }
    /**
     * @return the accType
     */
    public String getAccType() {
        return accType;
    }
    /**
     * @param accType the accType to set
     */
    public void setAccType(String accType) {
        this.accType = accType;
    }
    /**
     * @return the kioskName
     */
    public String getKioskName() {
        return kioskName;
    }
    /**
     * @param kioskName the kioskName to set
     */
    public void setKioskName(String kioskName) {
        this.kioskName = kioskName;
    }
    /**
     * @return the dt
     */
    public String getDt() {
        return dt;
    }
    /**
     * @param dt the dt to set
     */
    public void setDt(String dt) {
        this.dt = dt;
    }
    /**
     * @return the tym
     */
    public String getTym() {
        return tym;
    }
    /**
     * @param tym the tym to set
     */
    public void setTym(String tym) {
        this.tym = tym;
    }
    /**
     * @return the city
     */
    public String getCity() {
        return city;
    }
    /**
     * @param city the city to set
     */
    public void setCity(String city) {
        this.city = city;
    }
    /**
     * @return the state
     */
    public String getState() {
        return state;
    }
    /**
     * @param state the state to set
     */
    public void setState(String state) {
        this.state = state;
    }
    /**
     * @return the country
     */
    public String getCountry() {
        return country;
    }
    /**
     * @param country the country to set
     */
    public void setCountry(String country) {
        this.country = country;
    }

} 
```

# python - 当第二个线程在python中完成时如何停止第一个线程？

> ID：13542276
> 
> 赞同：4
> 
> 时间：2012-11-24T14:44:14.610
> 
> 标签：python, multithreading, python-multithreading

当第二个线程完成时，有什么方法可以停止第一个线程？

例子：

```
from functools import partial

import threading

def run_in_threads(*functions):
    threads=[]

    for function in functions:
        thread=threading.Thread(target=function)
        thread.start()
        threads.append(thread)

    for thread in threads:
        thread.join()

def __print_infinite_loop(value):
    while True:print(value)

def __print_my_value_n_times(value,n):
    for i in range(n):print(value)

if __name__=="__main__":
    run_in_threads(partial(__print_infinite_loop,"xyz"),partial(__print_my_value_n_times,"123",1000)))))) 
```

在上面的 axample 中，我在线程中运行两个函数，当第二个线程完成时，我必须停止第一个线程。我读到它支持事件，但不幸的是我还没有使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T14:56:34.910

你可以使用`threading.Event`这样的：

```
import functools
import threading

def run_in_threads(*functions):
    threads = []

    for function in functions:
        thread = threading.Thread(target = function)
        thread.daemon = True
        thread.start()
        threads.append(thread)

    for thread in threads:
        thread.join()

def __print_infinite_loop(value, event):
    while not event.is_set():
        print(value)

def __print_my_value_n_times(value, n, event):
    for i in range(n):
        print(value)
    event.set()

if __name__ == "__main__":
    event = threading.Event()
    infinite_loop = functools.partial(__print_infinite_loop, "xyz", event)
    my_values = functools.partial(__print_my_value_n_times, "123", 10, event)
    run_in_threads(infinite_loop, my_values) 
```

# gcc - rax、rbx 的 x86_64 gcc 内联汇编约束，

> ID：13542278
> 
> 赞同：1
> 
> 时间：2012-11-24T14:44:33.603
> 
> 标签：gcc, clang, inline-assembly

在下面的：

```
#include <string.h>

struct cpuidOut
{
   long a ;
   long b ;
   long c ;
   long d ;
} ;

void callcpuid( cpuidOut * p, long a )
{
   memset( p, 0xFF, sizeof(*p) ) ;
   p->a = a ;

   __asm__ ( "cpuid"
             : "+a"(p->a), "=b"(p->b), "=c"(p->c), "=d"(p->d)  // output
             :                                                 // no (only) inputs
             : "a", "b", "c", "d"                              // clobbered registers
           ) ;
} 
```

我得到一个编译错误：

```
t.C:22: error: unknown register name 'd' in 'asm'
t.C:22: error: unknown register name 'c' in 'asm'
t.C:22: error: unknown register name 'b' in 'asm'
t.C:22: error: unknown register name 'a' in 'asm' 
```

（来自 g++ 或 clang++ 的相同类型的错误）

这让我很吃惊，因为我在 gcc 文档的 i386 clobbers 中看到了 a、b、c、d

[http://gcc.gnu.org/onlinedocs/gcc/Machine-Constraints.html#Machine-Constraints](http://gcc.gnu.org/onlinedocs/gcc/Machine-Constraints.html#Machine-Constraints)

我可以通过明确来修复clobber约束：

```
"%rax", "%rbx", "%rcx", "%rdx"                  // clobbered registers 
```

但我很惊讶我必须这样做？我只需要它在 x86_64 上工作，但我认为“a”、“b”、“c”、“d”样式约束会更好，以防以后在 i386 上也需要代码。

编辑：我最初发布了错误的asm，经过几次调整以使其正常工作，并在此过程中弄混了。上面的 asm 与我最初的问题一致，但是会导致编译器无法调度 A 寄存器的编译错误。这似乎可行：

```
void callcpuid( cpuidOut * p, long a, long b )
{
   __asm__ ( "cpuid"
             : "=a"(p->a), "=b"(p->b), "=c"(p->c), "=d"(p->d)  // output
             : "0"(a), "1"(b)                                  // inputs
           ) ;
} 
```

但请注意，它完全避免了对任何 clobber 约束的要求，因为所有 clobber 都是输出。这可能是正确的方法，尽管在阅读 gcc 文档后我仍然感到惊讶，我不能在 clobber 约束中使用通用的 reg 名称“a”、“b”、“c”、“d”，而不是必须使用 "%eax", "%rax", ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T18:20:08.323

> 这让我很吃惊，因为我在 gcc 文档的 i386 clobbers 中看到了 a、b、c、d

破坏者不是约束。

当您告诉 GCC 为 insn 操作数分配寄存器时，会使用约束，这些约束定义了从中绘制寄存器的可接受的寄存器类。

另一方面，在输入/输出约束不明显的情况下，clobbers 告诉 GCC 有关由 insns 修改的寄存器，例如修改固定寄存器的 insn，这不是它的操作数或当您在内联程序集中使用硬编码的寄存器名称时。

这是必需的，因此在执行内联汇编之前，GCC 可以隐藏值，它恰好保存在被破坏的寄存器中。

PS。对于输入输出操作数，您可以使用`"+"`修饰符：

```
void callcpuid( cpuidOut * p, long a, long b )
{
   __asm__ ( "cpuid" : "+a"(p->a), "+b"(p->b), "=c"(p->c), "=d"(p->d)) ;
} 
```

PS。生成的 32 位代码：

```
movl    (%esi), %eax  ; load p->a
movl    4(%esi), %ebx ; load p->b
cpuid
movl    %ebx, 4(%esi)  ; write back into p->b
movl    (%esp), %ebx   
movl    %eax, (%esi)   ; write back into p->a
movl    %ecx, 8(%esi)  ; write p->c
movl    %edx, 12(%esi) ; write p->d 
```

生成的 64 位代码：

```
movq    (%rdi), %rax   ; load p->a
movq    8(%rdi), %rbx  ; load p->b
cpuid
movq    %rbx, 8(%rdi)  ; write back p->b
movq    %rax, (%rdi)   ; write back p->a
movq    %rcx, 16(%rdi) ; write p->c
movq    %rdx, 24(%rdi) ; write p->d 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T14:52:57.003

如果您可以等待下一个 GCC 4.8 版本，或者如果您可以使用 GCC 的最新快照（即从 svn 源编译主干），请考虑使用新的[内置函数](http://gcc.gnu.org/onlinedocs/gcc/X86-Built_002din-Functions.html#X86-Built_002din-Functions) `__builtin_cpu_is`和`__builtin_cpu_supports`;

否则，请执行您的建议，例如明确使用clobber 约束。

注意：您所指的[链接也适用于未来的 GCC 4.8，而不适用于 4.7 或更早版本](http://gcc.gnu.org/onlinedocs/gcc/Machine-Constraints.html#Machine-Constraints)

# java - 注入的 MessageSource 为空

> ID：13542279
> 
> 赞同：0
> 
> 时间：2012-11-24T14:44:42.367
> 
> 标签：java, spring

**框架：Spring 3。**

我真的不明白为什么 bean 中的消息源注入端总是为 NULL。

这是片段：

这`servlet.xml`

```
<context:annotation-config />

<context:component-scan base-package="com.myproject.controllers" />

<mvc:annotation-driven />

<bean id="messageSource" class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
    <property name="basename" value="/WEB-INF/messages/messages" />
    <property name="cacheSeconds" value="0" />
</bean> 
```

messageSource 注入的类

```
import com.myproject.controllers.forms.RegistrationForm;

@Component
public class RegistrationFormValidator implements Validator {

@Autowired
@Qualifier("messageSource")
private MessageSource messageSource;

    //other stuff here...

} 
```

这是控制器

```
@Controller
@SessionAttributes("userSearchForm")
public class UsersController extends PaginationController<ProfiledUser>{

@InitBinder(value="registrationForm")
public void initBinder(WebDataBinder binder)
{
    binder.setValidator(new RegistrationFormValidator());
} 
```

我已经尝试过以下方法：

1.  删除注解并通过xml配置文件注入消息源
2.  实现 MessageSourceAware 接口
3.  试图注入一个`ReloadableresourceBundleMessageSource`而不是使用接口`MessageSource`

一切都以史诗般的失败告终；-) 如何正确注入 MessageSource？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T15:58:14.157

~~我认为您正在检查 CGLIB 类的字段值~~

~~请参阅[spring 单例 bean 字段未填充](https://stackoverflow.com/questions/11580911/spring-singleton-bean-fields-are-not-populated)~~ **更新**

## 关于自动装配的一般说明

`@Autowired``AutowiredAnnotationBeanPostProcessor`可以通过在相应的spring配置文件中指定注释来处理`<context:annotation-config />`注释（bean后处理器在每个容器的基础上工作，因此您需要为servlet和应用程序根上下文设置不同的后处理器=>您需要将`<context:annotation-config />`两者都放入Web 应用程序上下文和调度程序 servlet 配置）。

请注意，`@Autowired`注解具有`required`默认设置为 true 的属性，这意味着如果发生自动装配过程，Spring 将检查指定 bean 的一个实例是否存在。如果注解字段的 bean`@Autowired`是单例，则检查将在应用程序初始化期间执行。

**更新**在这个特定的问题中，`Validator`实例根本不是由 Spring 创建的，这就是为什么没有执行自动装配并且没有引发初始化异常的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-06T15:03:49.797

将 basename 更改为如下所示：

```
<property name="basename" value="classpath:messages/messages" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-30T06:39:59.980

当我尝试在自定义日期格式化程序中使用 MessageSource 时，我遇到了类似的问题。

代码 AppDateFormatter

```
public class AppDateFormatter implements Formatter<Date> {

    @Autowired
    private MessageSource messageSource;

    other stuff.....

    private SimpleDateFormat createDateFormat(final Locale locale) {
        final String format = this.messageSource.getMessage("date.format", null, locale);
        final SimpleDateFormat dateFormat = new SimpleDateFormat(format);
        dateFormat.setLenient(false);
       return dateFormat;
   }

} 
```

这对我有用：

```
public class WebMvcConfiguration extends WebMvcConfigurerAdapter {

  other stuff.....

    @Bean
    public MessageSource messageSource() {
        ResourceBundleMessageSource messageSource = new ResourceBundleMessageSource();
        messageSource.setBasenames("Messages/Messages", "Messages/Labels");
        messageSource.setDefaultEncoding("UTF-8");
        messageSource.setCacheSeconds(1);
        return messageSource;
    }    

    @Bean
    public AppDateFormatter appDateFormatter(){
        return new AppDateFormatter();
    }

    @Bean
    public FormattingConversionService mvcConversionService() {
        FormattingConversionService conversionService = new DefaultFormattingConversionService();
        conversionService.addFormatter(appDateFormatter()); 
        return conversionService;
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-18T14:14:44.950

在 java configs 类中添加以下 bean。

```
@Bean
public MessageSource messageSource() {
    ResourceBundleMessageSource messageSource = new ResourceBundleMessageSource();
    messageSource.setBasename("messages");

    return messageSource;
}

@Bean
public LocaleResolver localeResolver() {
    SessionLocaleResolver resolver = new SessionLocaleResolver();
    resolver.setDefaultLocale(Locale.ENGLISH);

    return resolver;
}

@Bean
public MessageSourceAccessor messageSourceAccessor(MessageSource messageSource){
    return new MessageSourceAccessor(messageSource, Locale.ENGLISH );
} 
```

然后`MessageSourceAccessor`可以如下注入bean

```
@Autowired
private MessageSourceAccessor msgs; 
```

获取消息字符串如下，

```
msgs.getMessage("controller.admin.save.success") 
```

该`message_en.properties`文件应该在`/src/main/resources`文件夹内。也为其他语言添加必要的属性文件。

希望这可以帮助。

# php - css下拉菜单在iphone/ipad上不起作用

> ID：13542280
> 
> 赞同：3
> 
> 时间：2012-11-24T14:45:01.883
> 
> 标签：php, javascript, iphone, css, ipad

我在我的网站上使用了一个基于 CSS 的下拉菜单，它似乎与 iphone/ipad 不兼容。

我相信这可能与菜单应该出现在悬停时有关，但当然 iphone 是触摸屏。但是，通过单击您通常悬停的位置并出现下拉菜单，它确实可以在 android 上运行。

不幸的是，我没有 iAnything，所以测试取决于我朋友的好意，他并不总是有空。

该插件来自： [http ://www.zen-cart.com/downloads.php?do=file&id=353](http://www.zen-cart.com/downloads.php?do=file&id=353)

我的实现在： [http ://www.traditionalirishgifts.c​​om/](http://www.traditionalirishgifts.com/)

还有一个我很想看看它是否有效但我现在是 iLess 的版本是： **编辑**：哎呀，网址出错了 - 这是 - [http://makeupconnection.com](http://makeupconnection.com)

有没有人对如何排序有任何想法，以便它也出现在点击上？或者至少在 iphone 上的行为与在 android 上的行为方式相同

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T16:42:51.133

您可以在适用于 iphone/ipad 的下拉菜单中查看此示例：[http ://www.cssplay.co.uk/menus/cssplay-ipad-dropdown-menu-fixed.html](http://www.cssplay.co.uk/menus/cssplay-ipad-dropdown-menu-fixed.html)

# html - 有没有办法减少带有边距或其他东西的元素的高度？

> ID：13542281
> 
> 赞同：0
> 
> 时间：2012-11-24T14:45:02.793
> 
> 标签：html, css, height, margin

因为我想要一个固定高度的栏和一个占据页面其余部分的地图，所以这会很棒。

我试过这样：

```
#header{
 position:fixed;
 top:0;
 left:0;
 width:100%;
 height:30pt;
 background-color:#ff0066;
 z-index:2;
}

 //element to reduce
#map{
 position:absolute;
 height: 100%;   
 width: 100%;
 background-color:blue;
 margin-top:30pt;
 margin-bottom:-30pt;
} 
```

如果创建了这个小提琴：http: [//jsfiddle.net/bmPpq/](http://jsfiddle.net/bmPpq/)

PS我已经积极地在网上搜索了一个没有成功的解决方案（除了使用JS，但这很糟糕..）

基本上这就是我想要的：

```
 #map{
 height: 100% - 30pt;   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T14:50:25.443

为此，您可以在地图上使用 min-height 。这应该有效：

```
#map{
  min-height: 100%;
  width: 100%;
  height: auto;
  position: fixed;
  top: 30;
  left: 0;
  background-color:blue;
} 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T15:02:16.433

尝试这个..

```
 #header{
     position:relative;
    ...

    #map{
     position:relative;
      .... 
```

# asp.net - 日历弹出窗口如何显示服务器日期

> ID：13542282
> 
> 赞同：1
> 
> 时间：2012-11-24T14:45:03.343
> 
> 标签：asp.net, calendar, ajaxcontroltoolkit

![日历扩展控件](../Images/c454a3e83af2faf04021fb83a9a32a18.png)

```
<asp:TextBox ID="txtBirthDate" AutoCompleteType="Disabled" onkeydown="return txtBirthDate_OnKeyDown();"
                    class="csstextbox" runat="server" Width="175px"></asp:TextBox>
                <asp:CalendarExtender ID="calendarBirthDate" OnClientDateSelectionChanged="calendarBirthDate_DateSelectionChanged"
                    runat="server" Enabled="True" 
                    TargetControlID="txtBirthDate" Format="dd-MMM-yyyy">
                </asp:CalendarExtender> 
```

在日历弹出客户端日期中显示我必须显示服务器日期。（这是客户端日期“今天：2012 年 11 月 13 日”）

# javascript - arguments.callee 替代方案

> ID：13542283
> 
> 赞同：8
> 
> 时间：2012-11-24T14:45:10.110
> 
> 标签：javascript

由于`arguments.callee`将被弃用，我将在以下表达式中使用什么来代替 arguments.callee`：

```
var self = this;

this.async(function(){
  if(test()){
    then();
  }else{
    self.async(arguments.callee);
  }
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T14:57:11.353

这应该有效。但我不确定它是否适用于所有浏览器。

```
var self = this;

this.async(function someMethod(){
  if(test()){
    then();
  }else{
    self.async(someMethod);
  }
}); 
```

# php - 如何在 JSON API 中访问（读/写）本地 cookie？

> ID：13542286
> 
> 赞同：0
> 
> 时间：2012-11-24T14:45:39.897
> 
> 标签：php, json, http, curl

我使用 PHP 创建了一个 JSON API，当我直接访问它时（通过地址栏），它能够在本地浏览器中读取和写入 cookie。

当我使用`cURL`或者`file_get_contents`我无法在本地机器上读取和写入 cookie 时，我尝试使用：

```
curl_setopt($ch, CURLOPT_COOKIE, $_SERVER['HTTP_COOKIE']); 
```

这适用于读取 cookie，但我无法将 cookie 设置回浏览器。

我使用的 cookie 非常重要（身份验证），因此我需要使用 API 获取它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T14:51:36.253

使用 cookie jar 并在您的 cURL“调用”之间共享它。设置`CURLOPT_COOKIEFILE`和`CURLOPT_COOKIEJAR` 指向同一个文件，你不需要使用`CURLOPT_COOKIE`

# android - 哪个监听器通过在多个视图上滑动来实现选择多个视图？

> ID：13542287
> 
> 赞同：0
> 
> 时间：2012-11-24T14:45:41.683
> 
> 标签：android, hover, slide, android-view, android-event

我很困惑我应该用什么来监听在视图中滑动手指并选择这些视图的事件。这是悬停事件吗？Android 文档说[`The hover may be generated via exploring the screen by touch or via a pointing device.`](http://developer.android.com/reference/android/view/accessibility/AccessibilityEvent.html)或者我是否应该尝试仅使用 onTouch 事件来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T14:53:24.997

悬停事件适用于带有指针设备的设备。例如带有鼠标键盘的 Transformer Prime。或者带有手写笔的三星 Note 设备。您可以使用手写笔悬停（例如，将笔放在屏幕上方，不触摸）按钮/文本视图等。

当用手指实际触摸设备时，您的按钮将进入按下、选择或聚焦状态......祝你好运

# php - 无法连接到 MySQL / 其他错误。使用 PHP

> ID：13542288
> 
> 赞同：0
> 
> 时间：2012-11-24T14:45:46.520
> 
> 标签：php, mysql, database

试图访问我机器上的 MySQL 数据库。它位于端口 1338 上。

这是 PHP 文件：

```
<!DOCTYPE html>

<html>

<head>

</head>

<body>

    <table>
    <?php

        $connection = mysql_connect("localhost:1338","root","password"); //connects to db
        $selected = mysql_select_db("site_updatelog"); //selects the db to be used
        //Check whether connection was successful
        if(!$connection){
            die('Could not connect to database: ' . mysql_error()); //Stop further execution of php script and show the error that occured
        }

        $sql = "SELECT comments, version, datetime FROM changeLog ORDER BY id DESC"; //form the query to be executed on the db
        $result = mysql_query($sql, $connections) or die (mysql_error()); //execute the query, or die if there was an error

        while($row = mysql_fetch_array($result)){
            //Display the table of results
            echo "<tr><td>". $row['version'] ."</td><td>". $row['comments'] ."</td><td>". $row['datetime'] ."</td></tr>";
        }

        mysql_close($connection);
     ?>
</table>

</body>

</html> 
```

这是输出：

```
"; } mysql_close($connection); ?>
". $row['version'] ."   ". $row['comments'] ."  ". $row['datetime'] ." 
```

折腾了好久还是不行。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T14:49:26.073

改变`mysql_query($sql, $connections)`_`mysql_query($sql, $connection)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T15:15:59.667

可能是因为您在回显的数据中有未转义的字符 - 尝试将您的 $row['comments']、$row['version'] 和 $row['datetime'] 包装到[htmlspecialschars](http://php.net/manual/en/function.htmlspecialchars.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T17:44:03.937

使用下面的代码只会在以下情况下死亡并报告错误`(!$connection)`

```
$connection = mysql_connect("localhost:1338","root","password"); //connects to db
        $selected = mysql_select_db("site_updatelog"); //selects the db to be used
        //Check whether connection was successful
        if(!$connection){
            die('Could not connect to database: ' . mysql_error()); //Stop further execution of php script and show the error that occured
        } 
```

尝试使用

```
$connection = mysql_connect("localhost:1338","root","password"); //connects to db
        //Check whether connection was successful
        if(!$connection){
            die('Could not connect to database: ' . mysql_error()); //Stop further execution of php script and show the error that occured
        }
        $selected = mysql_select_db("site_updatelog",$connection); //selects the db to be used
        if (!$db_selected) {
            die ("Can\'t use db : " . mysql_error());
        }
        $sql = "SELECT comments, version, datetime FROM changeLog ORDER BY id DESC"; //form the query to be executed on the db
        $result = mysql_query($sql) ;

        while($row = mysql_fetch_assoc($result)){
            //Display the table of results
            echo "<tr><td>". $row['version'] ."</td><td>". $row['comments'] ."</td><td>". $row['datetime'] ."</td></tr>";
        }

        mysql_close($connection); 
```

这会在运行查询之前引发错误。也改为`mysql_fetch_array()`as`mysql_fetch_assoc()`需要`mysql_fetch_array()`2 个参数

# javascript - Bootstrap 响应式附加菜单

> ID：13542295
> 
> 赞同：3
> 
> 时间：2012-11-24T14:46:24.003
> 
> 标签：javascript, css, twitter-bootstrap, responsive-design

我希望有一个像 bootstrap doc 中那样的附加菜单，[它](http://twitter.github.com/bootstrap/base-css.html#)没有贴在手机上，就像在 bootstrap doc 上一样。我有以下代码：

```
<div class="container">
  <div class="row">
    <div class="span3 bs-docs-sidebar ">
      <ul class="nav nav-list bs-docs-sidenav" data-spy="affix">
        <li><a href="#a"><i class="icon-home"></i> A</a></li>
        <li><a href="#b"><i class="icon-chevron-right"></i> B</a></li>
        <li><a href="#c"><i class="icon-chevron-right"></i> C</a></li>
      </ul>
    </div>

    <div class="span9">
      ...
    </div>
  </div>
</div> 
```

我已经尝试过使用和不使用`data-spy="affix"`for the`ul`并且我也尝试过`$(function(){ $('.bs-docs-sidenav').affix() })`.

但是菜单总是固定的，所以我无法阅读手机上的文字。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-24T15:13:59.620

我刚刚在他们页面上的 bootstraps doc.css 文件中找到了我的问题的答案。您必须添加以下 css（如果您在不同的类上使用词缀，可能需要更改类）

```
/* Tablet
------------------------- */
@media (max-width: 767px) {
  .bs-docs-sidenav.affix {
    position: static;
    width: auto;
    top: 0;
  }
} 
```

我也只是将类添加`affix`到`bs-docs-sidenav`元素中并且没有使用任何 JavaScript（即`data-spy`）

# php - 通过链接在现场添加 youtube 视频

> ID：13542299
> 
> 赞同：1
> 
> 时间：2012-11-24T14:47:06.510
> 
> 标签：php, hyperlink, youtube, embed

我正在做一个项目，但有些事情我无法完全解决。

用户只需在表单中添加 YouTube 剪辑的链接，就可以将 YouTube 视频添加到他们的个人资料中，例如：

优酷链接：`youtube.com/watch?v=9YgjZ4oPrj4`

现在，一旦用户单击提交，就必须嵌入视频。唯一的问题是我只需要这部分`9YgjZ4oPrj4`来嵌入（见下面的代码）

```
<iframe width="560" height="315" src="http://www.youtube.com/embed/9YgjZ4oPrj4" frameborder="0" allowfullscreen></iframe> 
```

现在，如您所知，YouTube 视频有不同类型的链接：

```
youtube.com/watch?v=9YgjZ4oPrj4
youtu.be/9YgjZ4oPrj4 
```

我如何使这个工作？它实际上与 Facebook 使用的相同

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T15:11:23.940

下面是一些将从字符串中提取 YouTube ID 的代码。**注意**我只是[从 Forrst 复制它](http://forr.st/~T6O)，但它应该做你想做的事。

```
function youtube_id($url){
  $url = preg_replace('((http://)?(www\.)?(youtube\.com|youtu\.be)(/v/|/watch\?v=|/)([a-zA-Z0-9_-]*)(.*))',"$5",$url);
  return (preg_match('(([a-zA-Z0-9_-]*){11,18})',$url) ? $url : '');
} 
```

测试了以下网址。

```
"http://www.youtube.com/watch?v=pkPgYbdQ1kQ&feature=feedu"
"www.youtube.com/watch?v=pkPgYbdQ1kQ&feature=feedu"
"youtube.com/watch?v=pkPgYbdQ1kQ&feature=feedu"
"http://www.youtube.com/v/pkPgYbdQ1kQ&feature=feedu"
"www.youtube.com/v/pkPgYbdQ1kQ&feature=feedu"
"http://youtu.be/pkPgYbdQ1kQ"
"youtu.be/pkPgYbdQ1kQ" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T15:01:38.283

您可以构建主机名和闭包映射：

```
$tubes = array(
  'youtube.com' => function($parsed_url) {
    //$parsed_url contains data as returned by parse_url()
  },
  'youtu.be' => function($parsed_url) {
    //
  },
); 
```

然后使用正则表达式解析内容，获取 URL，并通过对地图中适当元素的调用传递它们。

**这种方法更通用**，因为你不限于youtube，你可以很容易地为任何主机添加助手，包括vimeo和天知道，当需要弹出时。

**示例工作实现**，剩下的交给你：

```
<?php
$text = 'http://youtube.com/watch?v=9YgjZ4oPrj4

http://youtu.be/9YgjZ4oPrj4';

$tubes = array(
    'youtube.com' => function($parse_url) {
        parse_str($parse_url['query'], $query);
        return "<iframe width='560' height='315' src='http://www.youtube.com/embed/$query[v]' frameborder='0' allowfullscreen></iframe>";
    },
);

$replace = function($matches) use ($tubes) {
    $url = parse_url($matches[0]);
    if(isset($tubes[$url['host']])) {
        return $tubes[$url['host']]($url);
    }
    return $matches[0];
};

$matches = preg_replace_callback('/((([A-Za-z]{3,9}:(?:\/\/)?)(?:[-;:&=\+\$,\w]+@)?[A-Za-z0-9.-]+|(?:www.|[-;:&=\+\$,\w]+@)[A-Za-z0-9.-]+)((?:\/[\+~%\/.\w-_]*)?\??(?:[-\+=&;%@.\w_]*)#?(?:[\w]*))?)/', $replace, $text);

var_dump($matches); 
```

如果您需要新的启发式方法，只需将它们添加到`$tubes`地图中即可。

# java - 将子类类型（整数/字符串）插入到 ArrayList 中的超类类型（对象）中

> ID：13542307
> 
> 赞同：0
> 
> 时间：2012-11-24T14:47:37.523
> 
> 标签：java, generics

我正在学习泛型。

我尝试了以下代码：

对于哈希集

```
Set<Object> setOfAnyType = new HashSet<Object>();
setOfAnyType.add(1);
setOfAnyType.add("abc"); 
```

但是当我在 Object 类型的 ArrayList 中尝试同样的事情并尝试插入整数和字符串时，它会给我编译时错误，为什么？请指导。

```
 List<Object> superArray=new ArrayList<Object>();
    superArray.put(1);
    superArray.put("abc"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T14:48:57.110

该方法`put`未定义`List`，您可以使用：

```
superArray.add(1);
superArray.add("Sakina"); 
```

# objective-c - 将一组托管对象转换为字典？

> ID：13542308
> 
> 赞同：1
> 
> 时间：2012-11-24T14:47:47.313
> 
> 标签：objective-c, ios, nsdictionary, nsmanagedobject, nsset

我有一个`NSSet`（例如“水果”），它由以下过滤代码组成`NSManagedObjects`并使用以下过滤代码创建：

```
NSSet *fruits = [self.allFruits filteredSetUsingPredicate:
                         [NSPredicate predicateWithFormat:@"quantity > 10"]; 
```

每种水果都具有以下属性（属性）：（`name`例如：苹果、橙子、香蕉）、`color`（红色、黄色、绿色）和`quantity`（100、20、10）。

什么是最有效的方法来创建一个`NSDictionary`包含`NSSet`水果的`name`s 作为键和`quantities`对象（例如键：对象：苹果：100 橙：20）的最有效方法？

这是如何使用块枚举来完成的：

```
__block NSMutableDictionary *fruitsAndColors = [NSMutableDictionary dictionary];

[fruits enumerateObjectsUsingBlock:^(id fruit, BOOL *stop) {
      [fruitsAndColors setObject:fruit.color forKey:fruit.name];
}]; 
```

有没有更优雅的方式来完成同样的事情？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-01T04:41:49.897

这是一种快速简便的方法。

```
NSMutableArray *array = [NSMutableArray arrayWithCapacity:ManagedObjectItems.count];
[[ManagedObjectItems allObjects] enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
    Diary_item_food *food = obj;
    NSArray *keys = [[[food entity] attributesByName] allKeys];
    NSDictionary *dict = [obj dictionaryWithValuesForKeys:keys];
    [array addObject:dict];
}]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T14:57:00.187

您是否尝试过使用自定义 NSManagedObject 子类和一个方法，该方法将每个对象写入带有您想要的键和值的字典。

然后您可以枚举您的 NSSet 并在每个对象上调用此方法来创建字典集合。

我只是给你一个一般的想法，因为你问了一个一般的问题。如果您尝试编写代码，您可能会遇到任何进一步的问题。

# vim - Vim 文件可读对用户脚本返回 true，但对插件返回 false

> ID：13542310
> 
> 赞同：0
> 
> 时间：2012-11-24T14:47:54.430
> 
> 标签：vim

如果我创建`test.vim`具有以下内容的文件并运行`:so %`然后`filereadable`返回 true 和 foo，则将 bar 附加到文件中。

```
let lines = ["foo", "bar"]
let g:neobundle#log_filename=expand('~/.vim/plugin_install.log')
if filereadable(g:neobundle#log_filename)
  let lines = readfile(g:neobundle#log_filename) + lines
endif
call writefile(lines, g:neobundle#log_filename) 
```

[但是，如果我从neobundle.vim](https://github.com/Shougo/neobundle.vim) 运行完全相同的代码（**[此处](https://github.com/Shougo/neobundle.vim/blob/4c3ae4e6e6fa4dc0a3138ec4f15bd571ebee1a54/autoload/neobundle/installer.vim#L585-L592)****突出显示**的代码），则`filereadable`返回 false 并且文件被覆盖。即使我`chmod 777`的文件。

什么可能导致这种行为变化，`filereadable`我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:33:42.677

Neobundle 的日志在安装前被清除。（代码在[这里](https://github.com/Shougo/neobundle.vim/blob/4c3ae4e6e6fa4dc0a3138ec4f15bd571ebee1a54/autoload/neobundle/installer.vim#L68)）

# python - 如何使用 PyQt4.QtWebKit 从选项列表中选择值

> ID：13542312
> 
> 赞同：4
> 
> 时间：2012-11-24T14:48:29.280
> 
> 标签：python, qt, pyqt4, option, qtwebkit

我正在尝试使用 PyQt4.QtWebKit 从我网站上的选项列表中自动选择生日，但我在执行此操作时遇到了麻烦。

当我想选择一个单选按钮时，我这样做：

```
doc = webview.page().mainFrame().documentElement()
g = doc.findFirst("input[id=gender]")
g.setAttribute("checked", "true") 
```

或者设置一些文本输入：

```
doc = webview.page().mainFrame().documentElement()
s = doc.findFirst("input[id=say_something]")
s.setAttribute("value", "Say Hello To My Little Friends") 
```

但是我如何从这个选项列表中选择一个月？

```
<select tabindex="11" name="birthday_m">
 <option value="">---</option>
 <option value="1">JAN</option>
 <option value="2">FEB</option>
 <option value="3">MAR</option>
</select> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T19:11:31.263

这些`QWebKit`类使用[CSS2 选择器语法](http://www.w3.org/TR/CSS2/selector.html#pattern-matching)来查找元素。

所以可以像这样找到所需的选项：

```
doc = webview.page().mainFrame().documentElement()
option = doc.findFirst('select[name="birthday_m"] > option[value="3"]') 
```

然后`selected`可以像这样在选项元素上设置属性：

```
option.setAttribute('selected', 'true') 
```

但是，由于某种原因，这不会立即更新页面（也不会调用`webview.reload()`）。

So if you need an immediate update, a better way might be to get the `select` element:

```
doc = webview.page().mainFrame().documentElement()
select = doc.findFirst('select[name="birthday_m"]') 
```

and then set the selected option like so:

```
select.evaluateJavaScript('this.selectedIndex = 3') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T17:48:49.677

我是这样做的：

```
doc.evaluateJavaScript('document.getElementsByName("birthdate_m")[0].options[3].selected = true') 
```

如果您有任何建议，如何改进它，请告诉我。

# css - 两个 div 相同的 CSS？

> ID：13542330
> 
> 赞同：0
> 
> 时间：2012-11-24T14:51:24.037
> 
> 标签：css, html

是否可以使用相同的 css 制作两个 div，例如：

```
.Navig1, .Navig11 a {
  display: block;
  height: 15px;
  width: 70px;
  background-color: {color: Navig Bg 1};
  text-align: center;
  font-size: 8px;
  line-height: 15px;
  color: #FFF;
} 
```

因为我不希望我的样式代码太长，并且我需要这两个看起来相同，但悬停时不同，我认为这样做可以，但是这段代码不起作用。我在哪里犯错？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T14:55:37.940

是的，有可能：

```
.Navig1 a, .Navig11 a {
  display:block;
  height:15px;
  width:70px;
  background-color:#000;
  text-align:center;
  font-size:8px;
  line-height:15px;
  color:#FFF;
}

.Navig1 a:hover {
  /*css property*/
}

.Navig11 a:hover {
  /*other css property*/
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T14:54:15.163

css 不是“可编程的”。没有变量或方法可以说“使用此处第 X 节中包含的样式”。

但是，您可以通过从此块中删除 bgcolor 定义并创建一个新的来修复它

```
.Navig1, .Navig11 a {
    ... as before ...
}

.Navig1, .Navig11 {
    background-color: #xxx;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T14:55:26.850

你可以做你想做的事：

```
.Navig1, .Navig11 a {
    /* Common Styles */
}

.Navig1:hover {
    /* Navig1 Specific Styles on Hover */
}

.Navig11 a:hover {
    /* Navig1 a Specific Styles on Hover */
} 
```

但是，正如其他回答者提到的那样，您破坏了 CSS。背景颜色应该怎么回事？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T15:05:51.997

如果您还提供 html，则更容易确定您要实现的目标。不需要有两个 CSS 类。您可以使用单个 CSS 类为页面上的多个元素设置样式。

如果你有多个 div 容器，其中两个容器带有一个名为 mynav 的类：

```
<div class="mynav"></div>
<div></div>
<div class="mynav"></div> 
```

然后一个 CSS 类将同时影响两者。

```
div.mynav a {
    display: block;
    height: 15px;
    width: 70px;
    text-align: center;
    font-size: 8px;
    line-height: 15px;
    color: #fff;
}

div.mynav a:hover {
    /* new css */
} 
```

如果您希望有一个变化，那么您只需要根据您正在执行的操作创建元素如何更改的规则。

如果需要，还可以考虑为单个元素使用多个类。你的 div 可能是：

```
<div class="mynav someotherclass"></div> 
```

您可能会发现，对于您正在做的事情，一些简单的 Javascript 是最好的解决方案。

# c# - 捕捉 Metro 应用程序时的 GridView 背景

> ID：13542331
> 
> 赞同：0
> 
> 时间：2012-11-24T14:51:26.013
> 
> 标签：c#, xaml, gridview, microsoft-metro

我已将我的 Metro（Windows 商店）应用程序的背景颜色设置为红色，当应用程序充满或全屏时它工作正常。但是当我在快照视图中有应用程序时，背景颜色是默认灰色。我怎样才能改变它？谢谢 ![在此处输入图像描述](../Images/252f848ef0020302065d97fe21db0c92.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T17:01:38.707

我还没有很好地理解您的问题，但是如果您的意思是在将窗口向右或向左对齐时出现应用程序背景，我会回答您：

当然您使用的是 Visual Studio 2012 和 windows 8，在 VS 2012 中有一个名为 Device 这个窗口可以帮助您模拟您的窗口模式按下所需的模式并设置适当的背景

# json - 带有表单和链接的 JSON 超媒体 API

> ID：13542335
> 
> 赞同：20
> 
> 时间：2012-11-24T14:52:36.127
> 
> 标签：json, forms, rest, hateoas, hypermedia

我正处于规划 REST api 的早期阶段，我希望它遵守 REST 的 HATEOAS 约束。但我也想提供 JSON 格式。所以我的问题是是否有约定可以在 JSON 中表示链接和表单。

我找到了链接的示例，看起来这是表示链接的一种非常常见的方式：

```
"links": [ 
{"rel": "self", "href":"http://example.org/entity/1"},
{"rel": "friends", "href":"http://example.org/entity/1/friends"}] 
```

另一方面，表示形式并不是我见过的很多东西。我在想也许有人坐下来想出了一些类似的东西，但考虑了所有的警告：

```
"forms" : [
{"rel" : "new client", "action" : "/clients", "method": "post", 
"fields" : ["name":"string", "zipcode":"int", "signedup":"date", "state": ["Alabama",...]...]}] 
```

对此的灵感来自观看此视频，Jon Moore 认为 JSON 不是超媒体 api 的好格式：

[http://oredev.org/2010/sessions/hypermedia-apis](http://oredev.org/2010/sessions/hypermedia-apis)

顺便说一句真的很好！

感谢所有输入！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-09-13T00:50:53.810

我已经研究了这个话题一段时间，但我不确定人们使用哪些可能的解决方案，哪些不使用。只有几个示例可用...所以我需要专家的一些评论...（我的示例将主要使用 HAL+JSON。）

1.)

我有一种感觉，链接关系应该只是 GET，因为在 HTML 中它们用于包含样式表之类的东西。我想其他人也有同样的感觉，因为存在 an`edit-form`和 a `create-form`by IANA 链接关系。

*   因此，第一个可能的解决方案是取消引用带有表单关系的链接，并下载用于写入操作的表单描述。这些表单描述可以包含 HTML 片段或我们可以用来生成表单的模式。例如

    顺便提一下，您可以通过在标头中发送相同的链接并将原始 JSON 作为正文发送来使用相同的方法。

    ```
    {
        "_links": {
            "edit-form": {
                "href": "http://example.com/users/1?form=edit",
                "type": "text/html",
                "title": "Edit user"
            }
        }
    } 
    ```

那么，如果链接关系不只是为了阅读目的呢？

2.)

然后我们可以使用 HAL 的内置功能：

*   如果我们发送数据，那么我们可以使用`type`来描述请求体而不是响应体。办公室。在这种情况下，不应该有响应体，否则这个解决方案会令人困惑。

    ```
     {
            "_links": {
                "curies": [
                    {
                        "name": "my",
                        "href": "http://example.com/rels/{rel}",
                        "templated": true
                    }
                ],
                "my:edit": {
                    "href": "http://example.com/users/1",
                    "type": "application/vnd.example.user+json",
                    "title": "Edit user"
                }
            }
        } 
    ```

    所以在这种情况下，客户端会知道这`my:edit`意味着这是一个编辑表单，并且通过检查 MIME 类型，它会知道要显示哪种类型的表单。

*   为相同目的使用自定义链接关系的另一种解决方案：

    ```
     {
            "_links": {
                "curies": [
                    {
                        "name": "my",
                        "href": "http://example.com/rels/{rel}",
                        "templated": true
                    }
                ],
                "my:edit-user": {
                    "href": "http://example.com/users/1",
                    "type": "application/json",
                    "title": "Edit user"
                }
            }
        } 
    ```

    因此，通过获取文档`http://example.com/rels/edit-user`，我们可以找到有关如何构建用于编辑用户的表单的描述，因此我们可以支持`my:edit-user`客户端中的链接关系。文档可以包含可选的 HTML 表单或某些模式，或使用表单描述词汇的 RDF 文档等...

*   `profile`我们可以通过链接的属性遵循相同的方法。例如：

    ```
     {
            "_links": {
                "curies": [
                    {
                        "name": "my",
                        "href": "http://example.com/rels/{rel}",
                        "templated": true
                    }
                ],
                "my:edit": {
                    "href": "http://example.com/users/1",
                    "type": "application/json",
                    "title": "Edit user",
                    "profile": "http://example.com/profiles/user"
                }
            }
        } 
    ```

    所以这里的链接关系意味着这是一个编辑表单，并且`profile`描述了如何在`http://example.com/profiles/user`URL 下生成表单。

3.)

或者我们可以使用自定义属性扩展 HAL。

*   例如[dougrain-forms](https://github.com/weluse/dougrain-forms)这样做：

    ```
     {
            "_forms": {
                "edit": {
                    "href": "http://example.com/users/1",
                    "headers": {
                        "content-type": "application/json"
                    },
                    "title": "Edit user",
                    "method": "PUT",
                    "schema": {
                        "required": [
                            "name"
                        ],
                        "type": "object",
                        "properties": {
                            "name": {
                                "type": "string"
                            }
                        },
                        "title": "user properties"
                    }
                }
            }
        } 
    ```

*   但是您可以使用任何替代方法，只要我们没有关于 HAL 和 HAL 表单的标准，例如，我宁愿使用像解决方案这样的[猫鼬模式](http://mongoosejs.com/docs/guide.html)：

    ```
     {
            "name": "John",
            "_links": {
                "curies": [
                    {
                        "name": "my",
                        "href": "http://example.com/rels/{rel}",
                        "templated": true
                    }
                ],
                "my:edit": {
                    "href": "http://example.com/users/1",
                    "type": "application/json",
                    "title": "Edit user",
                    "method": "PUT",
                    "_embedded": {
                        "schema": {
                            "name": "String"
                        }
                    }
                }
            }
        } 
    ```

4.)

不要使用链接关系和简单的 JSON 格式（如 HAL），而是使用带有一个或多个词汇表的 RDF。使用 RDF 比较困难，但它是一种用于将客户端与 REST 服务解耦的细粒度解决方案，而 HAL 只是一个粗粒度解决方案......

*   例如带有[Hydra](http://www.markus-lanthaler.com/hydra/spec/latest/core/)和自定义词汇的[JSON-LD ：](http://json-ld.org/)

    ```
    {
        "@context": [
            "http://www.w3.org/ns/hydra/core",
            "https://example.com/docs#"
        ],
        "@id": "https://example.com/users/1",
        "name": "John",
        "operation": {
            "@type": "ReplaceResourceOperation",
            "title": "Edit user",
            "method": "PUT",
            "expects": {
                "@id": "https://example.com/docs#User",
                "supportedProperty": {
                    "@type": "SupportedProperty",
                    "title": "name",
                    "property": "https://example.com/docs#User.name",
                    "range": "http://www.w3.org/2001/XMLSchema#string",
                    "required": true
                }
            }
        }
    } 
    ```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-12-24T21:45:00.780

我一直在使用 JSON Hyper Schema 开发 API。您可以四处浏览，甚至可以注册、登录和执行一些操作。在这里查看：http: [//api.psprt.com](http://api.psprt.com)

[编辑] 在这里查看我的最新资料：www.passportedu.com [https://github.com/bpanahij/HypermediaServer](https://github.com/bpanahij/HypermediaServer) [https://github.com/bpanahij/client-schema.json](https://github.com/bpanahij/client-schema.json)

我还开源了 API 代码： [https ://github.com/bpanahij/passportedu_schema](https://github.com/bpanahij/passportedu_schema)

随意看看，借用和评论。

[JSON Hyper Schema](http://json-schema.org/latest/json-schema-hypermedia.html)（另见[JSON-Schema](http://json-schema.org/)）有一种方法可以通过属性成员指定表单：

```
{
"id": "/api/v1",
"$schema": "http://json-schema.org/draft-04/schema#",
"title": "PassportEDU API",
"name": "PassportEDU API",
"type": "object",
"description": "Bringing global students together with global schools.",
"links": [
   {
      "title": "Log In",
      "rel": "authenticate",
      "href": "/api/v1/authenticate",
      "method": "POST",
      "properties": {
        "username": {
          "title": "Your username",
          "description": "Your email address or username",
          "type": "string"
        },
        "password": {
          "title": "Your password",
          "description": "Your password",
          "type": "password"
        }
      },
      "required": ["username", "password"]
   }
   ]
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-18T18:17:21.483

[JSON Schema](http://json-schema.org/)标准（尤其是“超模式”）绝对允许这样做。您引用 JSON (Hyper-)Schema（使用 HTTP 标头），并且该模式定义了有关如何将数据解释为超文本的规则。

用于构建链接的信息可以在任何地方。超模式记录了如何从数据中组装链接 URI（可以是模板），它们还指定了 HTTP 方法、编码类型等。

要获得表单功能：您可以为要与请求一起提交的数据指定完整架构。必需/可选属性、数组长度约束等。

作为演示，这里是 JavaScript 库的演练的一部分，该库理解超模式并可以为链接提供适当的形式：[jsonary.com](http://jsonary.com/feature-tour/stage3/)。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-24T22:22:17.303

查看 Collection+JSON、HAL 和/或 Siren。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-03T08:22:59.040

据我所知，目前还没有公开指定的通用 JSON 格式的表单。如果需要，您可以自由定义并发布规范。作为个人喜好，我建议基于 HAL。

如果您决定自己写一篇，请创建一个邮件列表并邀请其他人参与。如果你不这样做，你就有可能将它剪得太紧而无法满足你自己的需求，并且不小心忽略了一些阻止它被广泛应用的要求。

# django-cache - Django 缓存系统是如何工作的？

> ID：13542336
> 
> 赞同：2
> 
> 时间：2012-11-24T14:52:42.453
> 
> 标签：django-cache, django-caching

Django 缓存系统是如何工作的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T14:54:45.820

> Django 带有一个强大的缓存系统，可以让您保存动态页面，因此不必为每个请求计算它们。为方便起见，Django 提供了不同级别的缓存粒度：您可以缓存特定视图的输出，您可以只缓存难以生成的部分，或者您可以缓存整个站点。

检查这篇[文章](https://docs.djangoproject.com/en/dev/topics/cache/?from=olddocs)

# java - 2d Jump 'n' 的击中地面值，例如地线

> ID：13542337
> 
> 赞同：1
> 
> 时间：2012-11-24T14:52:50.383
> 
> 标签：java, android, math, game-physics, curves

我正在尝试对 Android Jump 'n' Run 进行编程，但我陷入了一般逻辑。

我想要一个不直的底线或底线。它应该像曲线，或丘陵和山谷（比较 Game Limbo）。有没有描述这种状态的数学结构？我不想将每个 X 值都保存到数组中。

请只给出提示，没有源代码；）

我已经在考虑编辑鼻窦但在游戏中它看起来很超现实......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T15:03:32.737

[AndEngine 浮现](http://www.andengine.org/)在脑海中。还负责碰撞和游戏物理。有大量的源[示例](https://play.google.com/store/apps/details?id=org.anddev.andengine.examples)和追随者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T15:30:18.553

以下是一些可用于描述路径的数学结构。

*   [**贝塞尔曲线**](http://en.wikipedia.org/wiki/B%C3%A9zier_curve)——整齐的曲线
*   [**线**](http://en.wikipedia.org/wiki/Line_%28geometry%29)——通过两点（多项式的特殊情况）
*   [**椭圆**](http://en.wikipedia.org/wiki/Ellipse)——圆的泛化
*   [**多项式**](http://en.wikipedia.org/wiki/Polynomial)——通过一组点

# java - 为什么我的 Glassfish3.1.2.2/MyFaces2.1.9/JSF 管理的性能优于 TomEE1.5+/CDI 管理的性能？

> ID：13542338
> 
> 赞同：0
> 
> 时间：2012-11-24T14:52:52.537
> 
> 标签：java, jsf, glassfish, cdi, openejb

我刚刚将我的 Web 应用程序从 JSF 托管 bean 迁移到 CDI 托管 bean，我特别希望 Tomcat 或 TomEE Plus 成为首选容器，因为我听说过有关“OpenWebBeans”的好消息。在部署、配置和测试 TomEE 1.5+ / CDI-managed-beans Web 应用程序后，整页刷新比 Glassfish 3.1.2.2 / MyFaces 2.1.9 / JSF 托管 bean 慢得多。

使用 Glassfish 3.1.2.2 / MyFaces 2.1.9 / JSF 托管 bean，整页刷新只需 2 到 3 秒。

使用 TomEE 1.5+ / CDI-managed-beans，整页刷新需要 5 到 10 秒，有时甚至更长。:(

你能告诉我这是为什么吗？

昨天，在将 TomEE 1.5+ / CDI 托管 bean web 应用程序部署到生产服务器（Windows 2003 32 位 4GB RAM 和 1TB 磁盘空间）之前，我阅读了以下内容，这真的没有回答我/这个问题：

[glassfish v3 vs tomcat 7](https://stackoverflow.com/questions/3557679/glassfish-v3-vs-tomcat-7)

我读到 PPR 在性能上比 FPR 更好，但是我的会话超时/管理实现涉及以下内容：

1.  LoginFilter（servlet 过滤器）

2.  h:head 中的以下内容

meta http-equiv="refresh" content="#{session.maxInactiveInterval};url=pf_viewExpired.jsf"

CDI 是否比 JSF 管理的 bean 更（时间）昂贵，还是 TomEE 是 CDI 的首选容器？我知道 JBoss（或 Weld）是或有 CDI 的参考实现，所以最好考虑 JBoss/Weld。

在完成从 JSF 管理的 bean 迁移到 CDI 管理的 bean（以及从 Glassfish 迁移到 TomEE）的任务之前，我在 Glassfish/Weld 上启动 CDI 管理的 bean Web 应用程序时遇到了问题。

请回答上述问题，和/或提出建议。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T04:26:32.427

如上面的评论所示，我正在与 OpenEJB (TomEE) 提交者合作解决这个问题。就个人而言，我觉得这个问题可能是由于以下原因：

1.  在应用程序中定义和引用的 CDI 托管 bean
2.  可能的 CDI 循环引用（可能会在 CDI 1.1 中解决）
3.  一个非常大的 CDI @SessionScoped bean，它引用/注入许多其他 CDI bean 以在应用程序中完成业务逻辑（或任务）
4.  TomEE/OpenWebBeans（仍在开发中）

所以，答案还有待确定。我为此问题打开了以下 OpenEJB JIRA（以下 URL）。如果有兴趣，请随意观看此 JIRA。

[TomEE 1.5.1 SNAPSHOT（和 CDI bean）在我的生产服务器上运行缓慢](https://issues.apache.org/jira/browse/OPENEJB-1955)

更新：

现在，TomEE/CDI-managed-beans 在生产服务器上的表现与 Glassfish/JSF-managed-beans 一样好，因为我最近做了以下事情：

1.  用 @entity 命名查询替换常用的动态 SQL
2.  向 JPA createQuery() 和 createNamedQuery() 添加了查询提示
3.  用新的 facelets 和 ui:include src="#{EL expression}" 替换了常用的 render="#{EL expression}"，因为 TomEE 提交者建议 render="#{EL expression}" 被调用了 6 次。

所以，我的 TomEE/CDI 托管 bean 现在正在生产服务器上运行，我正在监视性能和最终用户报告/体验。

# node.js - 运行everyauth 示例中的问题

> ID：13542341
> 
> 赞同：0
> 
> 时间：2012-11-24T14:53:03.233
> 
> 标签：node.js, everyauth

我正在尝试运行everyauth 示例。但是，它显示以下错误

```
ReferenceError: /Users/tyler/clicker/everyauth/example/views/home.jade:1
  > 1| - if (!everyauth.loggedIn)
    2|   h2 Not Authenticated
    3|   #register
    4|     a(href='/register') Register

everyauth is not defined 
```

我已经安装了everyauth。当我执行 sudo node server.js 运行示例时，它显示应用程序正在运行。但是，当我在 localhost:3000 访问该站点时，它显示了上述错误。

它显示了诸如未定义的everyauth之类的东西。可能是什么原因？我的意思是肯定安装了everyauth。难道是没有正确导入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T16:00:42.770

我的猜测是您已经安装了 express 3.x，并且everyauth 示例仍在使用`app.dynamicHelpers`express 2.x。安装 express 2.x 后重试。

具体来说，everyauth调用中的[这行代码](https://github.com/bnoguchi/everyauth/blob/master/index.js#L56)`app.dynamicHelpers`是 express 2.X API，在 express 3.x 中不存在。而[everyauth package.json 中的这一行](https://github.com/bnoguchi/everyauth/blob/master/package.json#L39)进一步支持了此示例尚未针对 express 3.0 更新的概念。

您的短期解决方案是：

```
npm uninstall express
npm install express@2.5.11 
```

从长远来看，需要为 express 3.x API 更新everyauth 示例。

# vim - 映射已在使用中：" 某人”，模式“n”

> ID：13542343
> 
> 赞同：5
> 
> 时间：2012-11-24T14:53:11.080
> 
> 标签：vim, vim-plugin

我最近安装了一些插件，所以我可以使用 Vim 作为我的开发 IDE。似乎有些插件不能很好地相互配合。

目前，我的插件目录中有以下 vim 插件：

*   code_complete.vim
*   cscope_maps.vim
*   doxygen-support.vim
*   源美化
*   标记列表.vim
*   vcs命令.vim
*   vcsgit.vim
*   vcssvk.vim
*   crefvim.vim
*   c.vim
*   minibufexpl.vim
*   symfony.vim
*   vcsbzr.vim
*   vcscvs.vim
*   vcshg.vim
*   vcssvn.vim

我的 ~/.vimrc 文件有以下内容：

```
autocmd BufRead *.vala,*.vapi set efm=%f:%l.%c-%[%^:]%#:\ %t%[%^:]%#:\ %m
au BufRead,BufNewFile *.vala,*.vapi setfiletype vala

set nocp ts=4 sw=4 noet ai cin bs=2 cb=unnamed
set number ruler wrap autoread showcmd showmode fdm=marker nobackup
syntax on
filetype plugin on

set incsearch
set tags=./tags;/
map <C-\> :tab split<CR>:exec("tag ".expand("<cword>"))<CR>
map <A-]> :vsp <CR>:exec("tag ".expand("<cword>"))<CR> 
```

当我尝试打开 C 或 C++ 文件时，我收到以下警告消息：

```
Mapping already in use: "<LocalLeader>sb", mode "n"
Press Enter to Continue 
```

有谁知道是哪个插件导致了这个问题，以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T10:11:24.930

`:verbose map <LocalLeader>sb`

这将向您显示哪个插件设置了该映射

# c - 如何将 st_mtime（从 stat 函数获取）转换为字符串或字符

> ID：13542345
> 
> 赞同：11
> 
> 时间：2012-11-24T14:53:14.927
> 
> 标签：c, datetime, android-ndk, string-conversion

我需要将 st_mtime 转换为字符串格式以将其传递给 java 层，我尝试使用此示例[http://www.cplusplus.com/forum/unices/10342/](http://www.cplusplus.com/forum/unices/10342/)但编译器会产生错误

> 从“long unsigned int*”到“const time_t* {aka long int const*}”的无效转换
> 
> 初始化 'tm* localtime(const time_t*)' [-fpermissive] 的参数 1

我做错了什么，如何在字符串表示中使用 stat 函数来创建文件的时间。

请帮忙。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-24T15:01:00.583

根据[stat(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/stat.2.html)手册页，该`st_mtime`字段是一个`time_t`（即在阅读[time(7)手册页后，自](http://www.kernel.org/doc/man-pages/online/pages/man7/time.7.html)[unix Epoch](http://en.wikipedia.org/wiki/Unix_time)以来的秒数）。

您需要[localtime(3)](http://www.kernel.org/doc/man-pages/online/pages/man3/localtime.3.html)将其转换`time_t`为`struct tm`本地时间的 a，然后[strftime(3)](http://www.kernel.org/doc/man-pages/online/pages/man3/strftime.3.html)将其转换为`char*`字符串。

所以你可以编写如下代码：

```
time_t t = mystat.st_mtime;
struct tm lt;
localtime_r(&t, &lt);
char timbuf[80];
strftime(timbuf, sizeof(timbuf), "%c", &lt); 
```

然后`timbuf`也许通过`strdup`-ing 来使用它。

注意。我正在使用`localtime_r`它是因为它对线程更友好。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-24T15:00:10.070

使用[手册页](http://linux.die.net/man/3/strftime)`strftime()`中有一个示例，例如：

```
struct tm *tm;
char buf[200];
/* convert time_t to broken-down time representation */
tm = localtime(&t);
/* format time days.month.year hour:minute:seconds */
strftime(buf, sizeof(buf), "%d.%m.%Y %H:%M:%S", tm);
printf("%s\n", buf); 
```

将打印输出：

```
"24.11.2012 17:04:33" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-23T06:49:51.967

You can achieve this in an alternative way:

1.  Declare a pointer to a `tm` structure:

    ```
    struct tm *tm; 
    ```

2.  Declare a character array of proper size, which can contain the time string you want:

    ```
    char file_modified_time[100]; 
    ```

3.  Break the `st.st_mtime` (where `st` is a `struct` of type `stat`, i.e. `struct stat st`) into a local time using the function `localtime()`:

    ```
    tm = localtime(&st.st_mtim); 
    ```

    Note: `st_mtime` is a macro (`#define st_mtime st_mtim.tv_sec`) in the man page of [stat(2)](http://man7.org/linux/man-pages/man2/stat.2.html).

4.  Use `sprintf()` to get the desired time in string format or whatever the format you'd like:

    ```
    sprintf(file_modified_time, "%d_%d.%d.%d_%d:%d:%d", tm->tm_year + 1900, tm->tm_mon + 1, tm->tm_mday, tm->tm_hour, tm->tm_min, tm->tm_sec); 
    ```

NB: You should use

```
memset(file_modified_time, '\0', strlen(file_modified_time)); 
```

before `sprintf()` to avoid the risk of any garbage which arises in multi-threading.

# java - 在 Rhino js 中，换行符没有正确转换

> ID：13542346
> 
> 赞同：0
> 
> 时间：2012-11-24T14:53:19.217
> 
> 标签：java, javascript, newline, rhino

我正在试验我想嵌入到我的项目中的 Rhino java 引擎。我创建了一个 Scriptable 对象范围，它定义了`print, printLine, log, logLine`JavaScript 中的全局函数。我可以通过调用来提取这些函数打印和记录的所有数据`pullOutput`，这将返回一对所有打印的输出和记录的输出。我已经测试了这些功能，一切都按预期工作，但有一件事。

当我为我的日志函数提供一个新行作为参数时，该字符串不包含新行字符，而只是“\n”。例如下面的代码：

```
 Context context;
    try {
        context = Context.enter();
        TemplateScope scope = TemplateScope.init(context);
        context.evaluateString(scope, "log(\"test\" + \"\\n\");", "test source", 1, null);
        Pair<String, String> result = scope.pullOutput();
        System.out.println("log is: " + result.b);
    } finally {
        Context.exit();
    } 
```

给出：

```
 out is: 
    log is: test\n 
```

这显然不是我所期待的。

完整的代码在这里：

[https://gist.github.com/4139978](https://gist.github.com/4139978)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T13:17:06.133

已经修好了。另一个库用旧版本覆盖了我自己的 rhino 版本并引入了这个错误。

# android - StateListDrawable 在自定义视图中不起作用

> ID：13542353
> 
> 赞同：1
> 
> 时间：2012-11-24T14:53:53.000
> 
> 标签：android, view, background, custom-controls, statelistdrawable

我在自定义视图上遇到了 StateListDrawable 的大问题。我有一个直接从 LinearLayout 继承的自定义视图，并且在其 XML 布局中，背景是一个简单的状态列表可绘制对象，它按照当前状态的顺序设置视图的背景启用或禁用。我不明白为什么如果我打电话

```
this.SetEnabled(false); 
```

在我的自定义视图中，背景不会改变。

也许我的问题不是很清楚，所以我做了一个简单的例子。你可以[在这里](https://dl.dropbox.com/u/60231308/StateListDrawableSample.rar)下载。查看“ViewCustom.java”文件并找到 FIXME 标记。

希望可以有人帮帮我。

PS与Button关联的相同状态列表drawable有效，但在我的自定义视图中没有。

ViewCustom.java

```
public class ViewCustom extends LinearLayout {

public ViewCustom(Context context, AttributeSet attrs) {
    super(context, attrs);

    //Inflate layout
    final LayoutInflater inflater = (LayoutInflater) this.getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    inflater.inflate(R.layout.view_custom, this);

    /**FIXME: Try to set "enabled" to false in order to get the
     * "panel_disabled" background, but it doesn't work. 
     */
    this.setEnabled(false);
} 
```

}

查看.custom.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="match_parent"
   android:layout_height="match_parent"
   android:background="@drawable/sld_panel"
   android:orientation="vertical" >
</LinearLayout> 
```

sld_panel.xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
   <item android:drawable="@drawable/panel_disabled" android:state_enabled="false"/>
   <item android:drawable="@drawable/panel_enabled" android:state_enabled="true"/>
</selector> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T16:16:11.580

问题是，您不能只禁用线性布局。您需要做的是禁用其中的所有内容。[这个问题](https://stackoverflow.com/a/7687934/544198)回答了这个问题，但归结为两件事之一。

1.  您可以通过 使布局消失`setVisibility(View.GONE)`。
2.  您可以通过以下方式遍历视图中的每个项目：

    ```
    for ( int i = 0; i < myLayout.getCount();  i++ ){
        View view = getChildAt(i);
        view.setEnabled(false); // Or whatever you want to do with the view.
    } 
    ```

# php - 从字符串中获取数据并在 PHP 中以 JSON 形式返回

> ID：13542355
> 
> 赞同：1
> 
> 时间：2012-11-24T14:54:20.483
> 
> 标签：php, html, arrays, json, string

```
NOTE : This is for a PHP script ! 
```

所以我一直在研究一个程序，但现在我被卡住了，因为我无法正确拆分数据。

我有一个像这样的数字列表：

```
50.0.1 581 50.0.2 545 50.0.3 541 50.0.4 18 50.0.5 2 50.0.6 33 50.0.7 1 [...] 
```

我已将该信息添加到 ARRAY 或 JSON 格式（首选 JSON）中。

主要数据看起来像这样（我们分组）：50.0.1 581 所以基本上我必须将 50.0.1 从 581 中拆分出来，将其添加到 JSON/ARRAY，然后移动到下一个组，在我们的例子中是 50.0.2 545。 （等等）

示例 JSON：

```
{"result": {
    "50.0.1": "581",
    "50.0.2": "545"
}} 
```

注意：第一个值将始终具有相同的格式：[0-9]{2}.[0-9].[0-9]（例如：50.0.1）

但是，第二个值可以是 1 到 4 位长：[0-9]{1,4}。

如果我没有说清楚，我很抱歉——这很难解释。如果需要，将添加更多示例！

```
Thank you very much ! 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T14:57:22.093

简单地在空间上爆炸，例如

```
$arr = explode(' ', $your_string); 
```

然后使用每对元素构建一个新数组：

```
$newarr = array();
for ($i = 0; $i < count($arr); $i += 2) {  // note the += 2
    $newarr[$arr[$i]] = $arr[$i+1];
}
echo json_encode($newarr); 
```

请注意，如果这些“关键”值中的任何一个重复，这可能会破坏事物。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T17:28:53.073

我自己的工作解决方案： /([.\d] *)\t(\d* )/ 。将输出 3 个数组。简单地将第二和第三结合起来，我得到了我想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T18:10:12.743

另一种方法是使用`array_chunk()`after `explode()`，然后在 JS 中作为`item[0]`和`item[1]`为每一对访问值。

# filter - 谷歌分析配置文件简单过滤器无法正常工作？

> ID：13542370
> 
> 赞同：0
> 
> 时间：2012-11-24T14:56:12.383
> 
> 标签：filter, google-analytics, profile

我已经在这几天了，不知道出了什么问题。我网站大约一半的流量来自某个域名（scavengerhunt.org）。我为配置文件设置了一个非常简单的过滤器，旨在仅显示来自该域的流量。我将过滤器设置为仅包含 - 来自 ISP 域的流量 - 包含 - scavengerhunt.org

我在报告中看不到流量（当我删除过滤器时，我当然可以看到流量）。有任何想法吗？宜兰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T22:35:14.613

您应该使用自定义过滤器来仅包括 - 来自**主机名**的流量。

ISP 域是基于用户 IP 地址而不是您的网站域的用户的 ISP（互联网服务提供商）域。

# android - 本地使用相同应用程序的两部Android手机之间的Wifi通信（无需互联网）

> ID：13542371
> 
> 赞同：0
> 
> 时间：2012-11-24T14:56:13.137
> 
> 标签：android, connection, wifi

> **可能重复：**
> [用 wi-fi 连接两部安卓手机（没有笔记本电脑或接入点）并发送文件](https://stackoverflow.com/questions/5993768/connect-two-android-phones-with-wi-fi-without-laptop-or-access-point-and-send)

我想构建一个应用程序，通过 Wifi 在两部安卓手机之间进行通信。他们应该能够在没有互联网访问的情况下进行通信（例如发送消息）。因此，用户只需要安装相同的应用程序并激活 Wifi。我不想使用蓝牙或 NFC（原因：wifi 范围更广）。如果它适用于 Android 2.2，那就太好了。我搜索了很多 stackoverflow 问题，但找不到确切的案例。

到目前为止，我能够在一个 android 上激活一个 wifi 热点（接入点）并让第二个设备访问该连接。问题是其他设备也可以访问互联网。但我只想让这两个设备在不需要互联网的情况下进行通信。是否可以限制热点连接不允许互联网访问？

另一个选项称为“Wifi direct”，仅适用于 4.0 或更高版本的 Android。4.0以下的设备有类似的东西吗？

我进一步阅读了有关套接字的信息。我是对的，我需要在同一个无线局域网中进行通信还是需要互联网访问？我的机箱可以使用插座吗？

你会建议哪个选项，我在这里错过任何选项吗？

# javascript - 骨干将项目添加到其他项目之间的集合（不推入堆栈）

> ID：13542378
> 
> 赞同：1
> 
> 时间：2012-11-24T14:57:03.163
> 
> 标签：javascript, backbone.js

我想问你如何将项目添加到收藏中，但在其他项目之间。例如。我有一个 todoItem { name: todoItem2, date: 2012-11-24}，我想在集合中的其他项目之间添加它（在 todoItem1 和 todoItem3 之间而不是在 todoItem3 之后）。

现在我添加的项目如下：

`items.push(form_Data); this.collection.add(new itemM(form_Data));`

有什么简单的方法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-24T16:35:36.953

如果您知道集合中的索引，则可以将其作为选项传递。例如：

```
this.collection.add(new Item(data), {at: 3}); 
```

如果你知道你希望集合的顺序，你可以在集合上实现 sort 或 sortBy。然后您添加的任何模型实例都将自动放置在正确的位置。

我建议您阅读[http://backbonejs.org](http://backbonejs.org)上的文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T15:00:41.070

如果`items.collection`是一个普通的 JavaScript 数组，这篇文章可能会帮助你[如何在特定索引处将一个项目插入到数组中？](https://stackoverflow.com/questions/586182/javascript-insert-item-into-array-at-a-specific-index)

# permissions - 为 cloudera hadoop 设置权限

> ID：13542384
> 
> 赞同：10
> 
> 时间：2012-11-24T14:57:36.763
> 
> 标签：permissions, hadoop, cloudera

我在大约 20 个节点的集群上安装了 coudera hadoop 4。使用 cloudera manager 它非常顺利，但是当我想使用创建输入目录时，`hadoop fs -mkdir input`我收到以下错误：`mkdir: Permission denied: user=root, access=WRITE, inode="/user":hdfs:supergroup:drwxr-xr-x`看起来像一个经典的错误权限案例，但我不知道从哪里开始解决这个问题。我找到[了这份](https://ccp.cloudera.com/display/CDH4DOC/Configuring+Hadoop+Security+in+CDH4#ConfiguringHadoopSecurityinCDH4-UserAccounts)文件，如果我知道如何处理它，我认为它可以解决我的问题。对于初学者，我不知道我是否使用 v2 的 MapReduce v1（我在我的 cloudera 管理器中没有看到任何纱线服务，所以我的猜测是 v1（？））。其次，由于整个安装是自动的，我不知道安装了什么以及安装在哪里。

谁能指出我一些简单的步骤来解决我的问题？我真的在这里寻找最简单的解决方案，我根本不关心安全性，因为它只是一个测试。如果我可以给所有用户所有可能的权限就好了。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-26T18:12:29.243

我解决了我的问题：在cloudera manager中，进入高级下的hdfs配置，并将以下代码放入HDFS服务配置安全阀中：

```
<property>
  <name>dfs.permissions</name>
  <value>false</value>
</property> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-01T10:41:03.020

更改`dfs.permission`始终是一种解决方案，但您也可以尝试更改用户。在我的系统中，写入权限仅分配给“hdfs”用户。可以通过以下命令更改用户：

```
su hdfs 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-10T15:39:10.203

hdfs1 -> 配置 -> 查看和编辑 -> 取消选中“检查 HDFS 权限”这工作感谢 Shehaz

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-18T10:57:21.377

# 1.不要修改dfs.permissions。保持其值为true。

2.如果需要，为特定用户添加组。（可选）

组添加开发组添加生产

echo "创造了集团生产和发展。"

使用现有组创建用户并分配要使用的 hdfs 目录

useradd -g development clouddev3 sudo -u hdfs hadoop fs -mkdir -p /user/clouddev3 sudo -u hdfs hadoop fs -chown -R clouddev3:development /user/clouddev3 echo "用户 clouddev3 创建并拥有 hdfs 中的 /user/clouddev3 目录"

现在使用 clouddev3 用户登录并尝试，

hdfs dfs -ls /user/clouddev3

或 hdfs dfs -ls

# php - 删除记录后显示错误

> ID：13542386
> 
> 赞同：0
> 
> 时间：2012-11-24T14:57:43.857
> 
> 标签：php

我使用此代码来触发行删除：

```
<a href="javascript:void(0);" onclick='$.get("web_page.php",{ cmd: "delete_stmt", id_f: "<?php echo $rrows['id_f']; ?>", id: "<?php echo $row['id']; ?>" } ,self.location="web_page.php");'>delete</a> 
```

这是代码：

```
if($get['cmd'] == 'delete_stmt') {
        $stmt = $conn_bd->prepare("DELETE FROM table WHERE id_f=:id_f and id=:id");
        $stmt->execute(array('id_f' => $get[id_f], 'id' => $get[id]));
        $stmt->execute();
    } 
```

记录总是从数据库表中删除，但有时记录会显示在网页上。这发生在 IE、Firefox、Chrome 中......

你知道是什么原因造成的吗？

想

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T15:09:42.087

将您的链接更改为：

```
<a href="javascript:void(0);" onclick='deleteItem("<?php echo $row['id_f']; ?>", "<?php echo $row['id']; ?>");'>delete</a> 
```

...并添加此功能：

```
function deleteItem(row_id_f, row_id)
{
    $.get(
            "web_page.php",
            { cmd: "delete_stmt", id_f: row_id_f, id: row_id },
            function(data){

                self.location="web_page.php";

            }
        );
} 
```

该链接将调用执行 ajax 调用的 deleteItem 函数，然后在执行页面重定向之前等待成功事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T15:22:33.180

self.location 在 $.get() 调用之前执行。尝试创建一个函数并等待 $.get()。

可以使用jquery ajax[这里是官方页面](http://api.jquery.com/jQuery.ajax/)功能。它很容易使用。此外，如果您重定向这个自己的页面，您可以尝试隐藏“删除”并抛出一个警告框。

# objective-c - 交换指向对象的两个变量的值

> ID：13542387
> 
> 赞同：0
> 
> 时间：2012-11-24T14:57:50.027
> 
> 标签：objective-c, cocoa, pointers

我有以下问题，因为我刚刚开始编写objective-c。

我有一些例子

```
@interface MyClass
    @property (strong) MySecondClass *first;
    @property (strong) MySecondClass *second;
@end

@implementation MyClass
    @synthesize first = _first;
    @synthesize second = _second;

    /*this is called while initialisation*/
    -(void) initialisation{
        _first = [[MySecondClass alloc] init];
        _second = [[MySecondClass alloc] init];
     }

    /*what i want to do*/
    -(void) swap{
        // second one should be replaced with first one
        _second = _first; 

        // first pointer should be replaced by new instance
        _first = [[MySecondClass alloc] init];
    }

@end 
```

问题是，当我调用交换方法时，_first 仍然指向旧对象，因此 _second 将被相同的新对象替换。

我已经尝试过如下复制，但它引发了异常。

```
 _second = [_first copy]; 
```

PS：我使用ARC

**编辑**

我真正想要完成的是：

```
 _second = _first
 MySecondClass *tmp = [[MySecondClass alloc] init];
 _first = &tmp; 
```

但这显示了编译器错误：ARC 不允许将间接指针隐式转换为指向“MySecondClass *”的 Objective-C 指针

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T15:11:12.473

***我的新答案：***

您还应该确保您尝试复制的类实现了[" `NSCopying`" 协议](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Protocols/NSCopying_Protocol/Reference/Reference.html)。例如，[UIViewController 没有实现它](https://stackoverflow.com/questions/8539522/ios-copywithzone-unrecognized-selector-only-when-using-device)，因此它不会响应对“复制”或“ `copyWithZone`”的调用。

尝试以不同于使用“ `copy`”的方式重置该指针。

***我原来的答案：***

尝试通过其访问器引用属性。

例如：

```
self.second = self.first;

self.first = [[MySecondClass alloc] init]; 
```

等等

唯一必须直接使用“ `_second`”&“ `_first`”的地方是类的 init 方法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-24T18:12:01.340

> 我真正想要完成的是：
> 
> ```
> _second = _first
> MySecondClass *tmp = [[MySecondClass alloc] init];
> _first = &tmp; 
> ```
> 
> 但这显示了编译器错误：ARC 不允许将间接指针隐式转换为指向“MySecondClass *”的 Objective-C 指针

That's because the values of `_first`, `_second`, and `tmp` are already pointers, so “<code>&tmp” is a pointer to a pointer—an “indirect pointer” (not especially clear wording on the compiler authors' part).

The solution there is to not say `&tmp`. You just want `tmp` here.

# jquery - Colorbox 无法使用 ajax 表单按预期工作

> ID：13542388
> 
> 赞同：0
> 
> 时间：2012-11-24T14:57:59.880
> 
> 标签：jquery, ajax, colorbox

我在编码方面不太好。我尝试使用 Colorbox 来显示我的一个页面。这个页面有一个联系表。不幸的是，如果我在 Colorbox 中打开此页面并单击提交按钮，不幸的是 Colorbox 正在关闭。（我不太明白，但也许 Colorbox 发出了一个简单的 http 请求而不是 ajax 请求？）

总之，我想使用 colorbox 来显示我的联系表格，但无法让它工作。

我的联系表格php：

```
 <div class="text">
                                                    <div class="contacter_head" style="border-bottom:1px dotted #ccc; color:#124C7A">Contact form!</div>
                                                <form id="contactform" name="contactform" method="post" action="submit_contact.php">

    <div class="my_left_box">
                                                <p>name *   </p>
                                                <input type="text" name="name" value="<?php echo $_SESSION['post']['name']?>" id="name" class="validate[required,custom[onlyLetter]]" />
                                                <p>Email* </p>
                                                <input type="text" name="email" value="<?php echo $_SESSION['post']['email']?>" id="email" class="validate[required,custom[email]]" />
                                                <p>subject </p>
                                                <input type="text" name="subject" value="<?php echo $_GET['sbject'];?>" />
                                                <p>Phone</p>
                                                <input type="text" name="phone" value="<?php echo $_SESSION['post']['phone']; unset($_SESSION['post']['phone']);?>" id="phone" class="validate[onlyNumber]" />
                                                <p>Captcha</p>
                                                    <label for="captcha_contact"><?=$_SESSION['n1']?> + <?=$_SESSION['n2']?> =</label><input type="text" class="validate[required,custom[onlyNumber]] captcha_aj" name="captcha" id="captcha" />

                                                    </div>                                          
                                                <div class="my_right_box">
                                                <p>Message</p>
                                                <textarea name="message" id="message_aj" rows="6" cols="5" class="validate[required]"><?=$_SESSION['post']['message']?></textarea>

                                                <input type="submit" name="button" value="Submit" id="button" class="button medium"/>
                                                     <?=$str?>          <img id="loading" src="images/ajax-load.gif" width="16" height="16" alt="loading" />
                                                        </form>
                                            <?=$success?>               

                                            <div id="errOffset">&nbsp;</div>
    </div>

                                            </div> 
```

这是我的 ajax 片段，如果我直接打开联系表单 php，效果很好：

```
var use_ajax=true;
$.validationEngine.settings={};

 $("#contactform").validationEngine({
    inlineValidation: false,
    promptPosition: "centerRight",
    success :  function(){use_ajax=true},
    failure : function(){use_ajax=false;}
 })

 $("#contactform").submit(function(e){
     alert("itt");
        if(use_ajax)
        {
            $('#loading').css('visibility','visible');
            $.post('submit_contact.php',$(this).serialize()+'&ajax=1',

                function(data){
                    if(parseInt(data)==-1)
                        $.validationEngine.buildPrompt("#captcha","* Captcha error","error");

                    else
                    {
                        $("#ajanlat-form").hide('slow').after('<h1>Thank you,.</h1>');
                    }

                    $('#loading').css('visibility','hidden');
                }

            );
        }
        e.preventDefault();
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T18:31:38.757

您如何通过 ColorBox 打开弹出窗口？我建议考虑使用 ColorBox 的**iFrame**选项，因为它会在它自己的“html 沙盒”中打开弹出窗口。此外，如果本机 Submit 事件仍然给您带来问题，请考虑使用 Jquery 捕获它，防止默认行为，并自行启动表单操作。

PS。指向您的项目的链接将帮助社区帮助您。

# javascript - 您可以制作一个失败的 javascript 正则表达式，而不是在找到匹配项时通过吗？

> ID：13542389
> 
> 赞同：2
> 
> 时间：2012-11-24T14:58:12.670
> 
> 标签：javascript, node.js, express

例如，如果字符串*不*包含“foo”，我可以制作一个正则表达式以使字符串通过吗？

我正在做的是使用 nodejs express 来匹配 URL。如何匹配任何*不*包含“foo”的 URL？

例如，以下匹配根页面：

```
app.get('/', function(req, res){
  res.send('hello world');
}); 
```

但是我怎么能做同样的事情来匹配除了 之外的路线`/login`？

```
app.get(/regex_here/, function(req, res){
  res.send('hello world');
}); 
```

`regex_here`匹配除 之外的所有页面的值应该是`/login`多少？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T11:30:02.970

[**从文档**](http://expressjs.com/api.html#app.VERB)中，您似乎**必须使用**正则表达式。

所以你需要使用[**nhahtdh 的模式**](https://stackoverflow.com/questions/13542389/can-you-make-a-javascript-regex-that-fails-instead-of-passing-when-a-match-is-fo/13550600#comment18545798_13542389)：

```
/^(?!.*foo).*$/ 
```

* * *

> 究竟是什么`/^(?!.*foo).*$/`意思？

## 解释

带括号的表达式称为负前瞻，即模式只能在`.*foo` *不*紧跟*在当前位置之后*的情况下匹配，当前位置是字符串的开头，用 表示`^`。

因此，该模式匹配所有内容`.*`- ，除非`foo`在开头之后的某处找到，也就是说与以下内容相同：

```
The pattern matches everything unless `foo` occurs in the string somewhere. 
```

# matlab - Kinect 深度图像是如何创建的？可以将简单的 RGB 图像转换为像那些深度图像这样的图像吗？

> ID：13542392
> 
> 赞同：2
> 
> 时间：2012-11-24T14:58:20.557
> 
> 标签：matlab, image-processing, kinect, gesture, gesture-recognition

我的主要动机是从简单的 RGB 图像（来自我的网络摄像头的图像）中检测手部。我找到了一个示例代码 find_hand_point

```
 function [result, depth] = find_hand_point(depth_frame)

    % function result = find_hand_point(depth_frame)
    %
    % returns the coordinate of a pixel that we expect to belong to the hand.
    % very simple implementation, we assume that the hand is the closest object
    % to the sensor.

    max_value = max(depth_frame(:));
    current2 = depth_frame;
    current2(depth_frame == 0) = max_value;
    blurred = imfilter(current2, ones(5, 5)/25, 'symmetric', 'same');
    minimum = min(blurred(:));
    [is, js] = find(blurred == minimum);
    result = [is(1), js(1)];
    depth = minimum; 
```

结果变量是离相机最近的物体（手）的坐标。

将来自 kinect 设备的深度图像传递给此函数，结果如下：

[http://img839.imageshack.us/img839/5562/testcs.jpg](http://img839.imageshack.us/img839/5562/testcs.jpg)

绿色矩形显示离相机最近的东西（手）。

**问题：**

1.  我的笔记本电脑相机捕获的图像不是深度图像，而是简单的 RGB 图像。
2.  有没有办法将我的 RGB 图像转换为那些深度图像？
3.  **是否有一种简单的替代技术来检测手？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T16:02:27.157

Kinect 使用额外的传感器来检索深度数据。单个网络摄像头图像中没有足够的信息来重建 3D 图片。但是可以根据一系列图像做出影响深远的估计。[这就是XTR-3D](http://www.israelmediainnovations.com/company/extrime-reality-ltd-xtr3d/)和类似解决方案背后的原理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T15:24:25.397

可以在[http://www.andol.info/hci/830.htm中找到更简单的方法](http://www.andol.info/hci/830.htm)

在那里，作者将 rgb 图像转换为 hsv，他只保留 H、S 和 V 值的特定范围，他认为这些是手感颜色。

在 Matlab 中：

```
function [hand] = get_hand(rgb_image) 
    hsv_image = rgb2hsv(rgb_image) 
    hand = ( (hsv_image(:,:,1)>= 0) & (hsv_image(:,:,1)< 20) ) & ( (hsv_image(:,:,2)>= 30) & (hsv_image(:,:,2)< 150) ) & ( (hsv_image(:,:,3)>= 80) & (hsv_image(:,:,3)< 255) ) 
end 
```

将为`hand=...`您提供一个矩阵，其中的像素为 1

0 <= H < 20 AND 30 <= S < 150 AND 80 <= V < 255

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T18:00:13.700

我发现了一种通过肤色检测手的更好技术:)

[http://www.edaboard.com/thread200673.html](http://www.edaboard.com/thread200673.html)

# scala - Scala :: 惰性值是 null 除非打印？

> ID：13542394
> 
> 赞同：6
> 
> 时间：2012-11-24T14:58:28.053
> 
> 标签：scala, nullpointerexception, lazy-initialization

给定特征（简化）

```
trait A {
  val eventStream: EventStream
  val credentialsStorage = // something here
  val userStorage = // something here
  val crypto = // something here
  ...    
  lazy val authSvc = new CoreAuthentication(credentialsStorage, new AuthenticationProviderResolver, userStorage, eventStream, crypto)
}

class T extends A with TraitProvidingEventStream with FlatSpec with [lot of another traits here] {

  val eventStream = systemFromTraitProvidingEventStream.eventStream

  "This" should "work" in {
    println(authSvc) // this is "magic"
    val user = authSvc.doSomethingWithUser(...);
  }
} 
```

如果我删除标记为**//this is "magic"**的行，那么我将在下一行得到 NullPointerException，因此 authSvc 为空。

那里可能有什么问题？

我无法为此创建干净的小测试用例，通常效果很好

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T18:32:42.117

这在 ML 上出现过一次：如果在初始化惰性 val 时抛出异常，则 val 为 null；但是您可以尝试再次初始化，它可以神奇地工作。（也就是说，延迟验证的“已初始化”位标志未在第一次尝试初始化失败时设置。）

我认为 ML 上的案例与特征中 vals 的 init 顺序有关，所以也许这就是你的问题。依赖它是出了名的危险，因此建议在特征中使用 defs。请参阅 Luigi 对 DelayedInit 的评论。

# jquery - IE8 在鼠标悬停时删除边距底部

> ID：13542396
> 
> 赞同：0
> 
> 时间：2012-11-24T14:58:41.923
> 
> 标签：jquery, html, css

[我的网站](http://singhharmeet.com/akhileshsir/)

在其他浏览器甚至 IE7 中一切都很好，但只有在 ie8 上，鼠标悬停在菜单上后，li(s) 上的边距底部才会被删除。由于某种原因，字体在 chrome 中也不起作用。

# xml - 传递的 oauth_token 无效或已过期

> ID：13542397
> 
> 赞同：0
> 
> 时间：2012-11-24T14:58:41.797
> 
> 标签：xml, vimeo

我正在尝试将 vimeo 添加[`getByTag`](https://developer.vimeo.com/apis/advanced/methods/vimeo.videos.getByTag)到我的`rma`应用程序中。

```
vimeo.com/api/rest/v2?format=xml&method=vimeo.test.login&oauth_consumer_key=456b2fecee2080ed734a1357467e0fd9d9e1e2bb&oauth_nonce=35bf1a696da9e26ac8f9dbcf866fc938&oauth_signature_method=HMAC-SHA1&oauth_timestamp=1352889238&oauth_token=08387a1bfa80277c6e7f79436bf57113&oauth_signature=kvuC%2Fp8jxgcyRHAkjNN7q%2FOVldI%3D&oauth_version=1.0 
```

当我将上面的链接粘贴到我的 URL 栏中时，我收到以下错误：

```
The oauth_token passed was either not valid or has expired
or
The oauth_nonce passed has already been used 
```

当您尝试该方法时，您可以看到的不是 XML 结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T18:19:09.870

您不能重复使用 OAuth url - 如果可以，可能会有重放攻击。正如错误所说：“传递的 oauth_nonce 已被使用”

您需要阅读一下 OAuth，然后阅读：http: [//zinclabs.com/VimeoAPIforPHP.html](http://zinclabs.com/VimeoAPIforPHP.html)

如果您不使用 PHP，则需要使用社区开发的 API 包装器之一执行相同的步骤。

# wpf - 仅给定一个表名，获取数据库数据并在 DataGrid 中对其进行编辑？

> ID：13542398
> 
> 赞同：0
> 
> 时间：2012-11-24T14:58:55.747
> 
> 标签：wpf, datagrid

我有一个数据库表，但架构更改太频繁，无法将列硬编码到应用程序（WPF 应用程序）中。如何将表中的所有行显示到 DataGrid 中并拥有它，以便网格中的行可编辑？

从数据库中获取数据并更新我可以做的数据库，但是考虑到我不能用各种列提前作为属性 - 因为列变化非常频繁。

有没有人遇到过这个问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T15:17:09.050

我已经使用几个为 ListView 创建 GridView 的转换器完成了这项工作。我将列名和列数据（格式化为字符串）读入数组，并使用了这些转换器：

```
<ValueConversion(GetType(String()), GetType(GridView))>
Public Class TableToGridViewConverter
    Implements IValueConverter

Private Shared ReadOnly ItemConverter As New ArrayToItemConverter
Public Function Convert(value As Object, targetType As System.Type, parameter As Object, culture As System.Globalization.CultureInfo) As Object Implements System.Windows.Data.IValueConverter.Convert
    Dim header() As String = TryCast(value, String())
    Dim result As New GridView
    If header IsNot Nothing Then
        For i As Integer = 0 To header.Length - 1
            result.Columns.Add(New GridViewColumn() With {.Header = header(i), .DisplayMemberBinding = New Binding() With {.Converter = ItemConverter, .ConverterParameter = i}})
        Next
    End If
    Return result
End Function

Public Function ConvertBack(value As Object, targetType As System.Type, parameter As Object, culture As System.Globalization.CultureInfo) As Object Implements System.Windows.Data.IValueConverter.ConvertBack
    Throw New NotSupportedException
End Function
End Class

<ValueConversion(GetType(String()), GetType(String))>
Public Class ArrayToItemConverter
Implements IValueConverter

Public Function Convert(value As Object, targetType As System.Type, parameter As Object, culture As System.Globalization.CultureInfo) As Object Implements System.Windows.Data.IValueConverter.Convert
    Dim result As String = String.Empty
    If TypeOf value Is String() AndAlso IsNumeric(parameter) Then
        Dim values() As String = value
        Dim index As Integer = CInt(parameter)
        If index >= 0 And index < values.Length Then
            result = values(index)
        End If
    End If
    Return result
End Function

Public Function ConvertBack(value As Object, targetType As System.Type, parameter As Object, culture As System.Globalization.CultureInfo) As Object Implements System.Windows.Data.IValueConverter.ConvertBack
    Throw New NotSupportedException
End Function
End Class 
```

诀窍是为数组中的每一列创建一个 GridViewColumn，并使用一个转换器，该转换器绑定到一个值数组，并使用列索引作为 ConverterParameter 为相应列选择值。你会像这样使用它：

```
 <ListView x:Name="TableDataListView" View="{Binding Path=DisplayTable.Header, Converter={StaticResource tableToGridView}}" ItemsSource="{Binding Path=DisplayRows}">
                    <ListView.ItemContainerStyle>
                        <Style TargetType="ListViewItem">
                            <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                            <Setter Property="VerticalContentAlignment" Value="Top"/>        
                        </Style>
                    </ListView.ItemContainerStyle>
                </ListView> 
```

其中绑定属性 DisplayTable.Header 和 DisplayRows 将分别包含具有列名的字符串数组和包含实际数据的字符串数组数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T15:23:46.850

如果它符合您的要求，可能会有一种不同且更简单的方法：只需使用 System.Data.DataTable 来保存您的数据并在 DataGrid 上设置 AutoGenerateColumns="True"。就我而言，我需要数组......

# python - 如何使用 numpy.mgrid 创建多维数组

> ID：13542402
> 
> 赞同：6
> 
> 时间：2012-11-24T14:59:12.567
> 
> 标签：python, multidimensional-array, numpy, grid

我想知道如何为未知数量的维度（D）创建一个带有 numpy mgrid 的网格（多维数组），每个维度都有一个下限和上限以及箱数：

```
n_bins =  numpy.array([100 for  d in numpy.arrange(D)])
bounds = numpy.array([(0.,1) for d in numpy.arrange(D)])
grid = numpy.mgrid[numpy.linspace[(numpy.linspace(bounds(d)[0], bounds(d)[1], n_bins[d] for d in numpy.arrange(D)] 
```

我猜上面不起作用，因为 mgrid 创建索引数组而不是值。但是如何使用它来创建值数组。

谢谢

敏捷的

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T15:34:46.047

你可能会使用

```
np.mgrid[[slice(row[0], row[1], n*1j) for row, n in zip(bounds, n_bins)]] 
```

* * *

```
import numpy as np
D = 3
n_bins =  100*np.ones(D)
bounds = np.repeat([(0,1)], D, axis = 0)

result = np.mgrid[[slice(row[0], row[1], n*1j) for row, n in zip(bounds, n_bins)]]
ans = np.mgrid[0:1:100j,0:1:100j,0:1:100j]

assert np.allclose(result, ans) 
```

* * *

请注意，它`np.ogrid`可以在许多使用的地方`np.mgrid`使用，并且由于数组更小，它需要更少的内存。

# performance - 在 Jmeter 中编写脚本以在不使用 GUI 的情况下模拟 http 请求

> ID：13542403
> 
> 赞同：1
> 
> 时间：2012-11-24T14:59:19.040
> 
> 标签：performance, http, automation, jmeter, load-testing

有没有办法在 JMeter 中编写模拟 HTTP 请求的脚本。我知道这可以使用 GUI 来完成，但是有没有办法使用脚本来自动化它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T16:08:32.910

编写 JMeter 脚本的主要方法是使用 GUI。另一种选择是手动编辑 JMX 文件，但（几乎）没有人将其用作：

*   它的格式没有记录（至少我没有看到它）
*   JMeter GUI 真的很容易使用。请参阅[JMeter 新的 GUI 功能以提高您的工作效率](http://www.ubik-ingenierie.com/ubikwiki/index.php?title=JMeter_New_GUI_features_to_increase_your_productivity)。JMX XML文件不能说

非 GUI 模式用于运行 JMeter 脚本（它比 GUI 模式占用更少的资源）

# javascript - How to make this script perform other function

> ID：13542405
> 
> 赞同：0
> 
> 时间：2012-11-24T14:59:42.850
> 
> 标签：javascript, jquery

I recently found this expandable table with Jquery, it is very lightweight and awesome code. However, I need to make small changes to it, but I don't know how. If you take a looks at this [demo](http://www.jankoatwarpspeed.com/post/2009/07/20/Expand-table-rows-with-jQuery-jExpand-plugin.aspx) when you go clicking from the first row to the second, third, fourth...so on. The row just keeps on expanding, instead I need the in-active rows to contract. Meaning, when a user goes from click first row to second, then the previous one contracts..

I hope it is clear, and I would provide the code but you can see the source code, it is neat and [Here](http://www.jankoatwarpspeed.com/post/2009/07/20/Expand-table-rows-with-jQuery-jExpand-plugin.aspx) is the full tutorial.

thanks.

Ok, here is the code in [Jsfiddle](http://jsfiddle.net/MDfG8):

```
 $(document).ready(function(){
        $("#report tr:odd").addClass("odd");
        $("#report tr:not(.odd)").hide();
        $("#report tr:first-child").show();

        $("#report tr.odd").click(function(){
            $(this).next("tr").toggle();
            $(this).find(".arrow").toggleClass("up");
        });
        //$("#report").jExpand();
    }); 
```

​</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T15:34:07.233

Change your click handler to this, which contracts everything before expanding the selected one:

```
$("#report tr.odd").click(function() {
    if ($(this).next("tr").is(":visible")) {
        $(this).next("tr").hide();
        $(this).find(".arrow").removeClass("up");
    } else {
        $("#report tr:not(.odd)").hide();
        $(".arrow").removeClass("up");
        $(this).next("tr").show();
        $(this).find(".arrow").addClass("up");
    }
}); 
```

See [fiddle](http://jsfiddle.net/barmar/MDfG8/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T15:41:38.633

Here's one approach, though I feel it could be somewhat simplified:

```
$('#report tbody tr:nth-child(odd)').addClass('odd');
$('#report tbody tr:nth-child(even)').addClass('even').hide();
$('tr.odd').click(
    function(){
        var that = $(this),
            next = that.next('.even');
        that.find('.arrow').toggleClass('up');
        next.toggle().siblings('.even').hide();
        $('.even:not(":visible")').each(
            function(){
                $(this).prev('.odd').find('.up').removeClass('up');
            });
    }); 
```

[JS Fiddle demo](http://jsfiddle.net/davidThomas/MDfG8/3/).

References:

*   [`addClass()`](http://api.jquery.com/addClass/).
*   [`each()`](http://api.jquery.com/each/).
*   [`find()`](http://api.jquery.com/find/).
*   [`hide()`](http://api.jquery.com/hide/).
*   [`:not()` selector](http://api.jquery.com/not-selector/).
*   [`prev()`](http://api.jquery.com/prev/).
*   [`removeClass()`](http://api.jquery.com/removeClass/).
*   [`siblings()`](http://api.jquery.com/siblings/).

# javascript - 获取 JSON 数据并放入 HTML 标签

> ID：13542415
> 
> 赞同：3
> 
> 时间：2012-11-24T15:00:48.107
> 
> 标签：javascript, jquery, html, json

我正在尝试解决有关 JSON 数据的问题（获取并发布它）。贝娄我发布了我的代码不起作用，我不知道为什么？我检查了 Firebug 并说没关系：`200 OK sourceforge.net 1.4 KB 216.34.181.60:80`

我正在尝试做的是从 sourceforge 项目中获取一些统计信息并将其放入 div 标签中。

该链接是有效的 json ( `http://sourceforge.net/projects/rdss/files/stats/json?start_date=2010-12-01&end_date=2012-11-24`)。

```
<html>
  <head>...</head>
  <body>
    <script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
    <script type="text/javascript">
      $(function() {
        $(document).ready(function() {
          $.getJSON("http://sourceforge.net/projects/rdss/files/stats/json?start_date=2010-12-01&end_date=2012-11-24", function(data) {
            $.each(data.posts, function(i,data) {
              var div_data = "<div>"+data.oses+"</div>";
              $(div_data).appendTo("#testjson");
            });
          });
          return false;
        });
      });
    </script>
    <div id="testjson"></div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T02:18:56.897

这是一个跨域问题。检查控制台。您需要在服务器端编写一个代理才能绕过。根据您的服务器端语言，您可以使用 Google 代理代码段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-28T21:03:44.523

您正在尝试执行跨浏览器请求：[http](http://en.wikipedia.org/wiki/Same-origin_policy) ://en.wikipedia.org/wiki/Same-origin_policy 。

所以，`getJSON`失败并抛出异常..请参阅[“请求的资源上不存在'Access-Control-Allow-Origin'标头”](https://stackoverflow.com/questions/20035101)

发生这种情况时，您可以[使用 CORS](https://stackoverflow.com/questions/5750696)解决方法。

但是对于这个解决方法，您[需要服务器启用 CORS](http://enable-cors.org/server.html)，不幸的是 sourceforge 不是。

您可以通过检查响应标头来查看这一点。它有钥匙`Access-Control-Allow-Origin:*`。

通常，您可以通过访问浏览器中的开发人员工具来执行此操作：
- 选择网络选项卡。
- 识别 JSON 页面并选择。
- 打开标题选项卡
- 转到响应标题部分。

看一个例子：

![在此处输入图像描述](../Images/fa0be1162717695f7e11d88419d16f64.png)

# python - 这是 ndb async urlfetch tasklets 的一个很好的用例吗？

> ID：13542419
> 
> 赞同：1
> 
> 时间：2012-11-24T15:01:03.427
> 
> 标签：python, google-app-engine, python-2.7, urlfetch

我想搬到`ndb`，并且一直想知道是否使用异步`urlfetch` [任务](https://developers.google.com/appengine/docs/python/ndb/async#urlfetch)。我不确定我是否完全理解它是如何工作的，因为文档有点差，但对于这个特定的用例来说似乎很有希望。

目前我像这样使用异步`urlfetch`。它与实际的线程或并行代码相去甚远，但与仅顺序请求相比，它仍然显着提高了性能。

```
def http_get(url):
    rpc = urlfetch.create_rpc(deadline=3)
    urlfetch.make_fetch_call(rpc,url)
    return rpc

rpcs = []
urls = [...] # hundreds of urls

while rpcs < 10:
    rpcs.append(http_get(urls.pop()))

while rpcs:
    rpc = rpcs.pop(0)
    result = rpc.get_result()
    if result.status_code == 200:
        # append another item to rpcs
        # process result
    else:
        # re-append same item to rpcs 
```

请注意，此代码已简化。实际的代码会捕获异常，进行一些额外的检查，并且只会尝试重新附加相同的项目几次。在这种情况下没有区别。

我应该补充一点，处理结果不涉及任何`db`操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T09:53:04.717

实际上是的，在这里使用 async urlfetch 是个好主意。它是如何工作的（粗略的解释）： - 你的代码达到了异步调用的地步。它触发长后台任务并且不等待它的结果，而是继续执行。- 任务在后台工作，当结果准备好时 - 它会将结果存储在某个地方，直到您要求它。

简单的例子：

```
def get_fetch_all():
    urls = ["http://www.example.com/", "http://mirror.example.com/"]
    ctx = ndb.get_context()
    futures = [ctx.urlfetch(url) for url in urls]
    results = ndb.Future.wait_all(futures)
    # do something with results here 
```

如果您想将结果存储在 ndb 中并使其更优化 - 为此编写自定义 tasklet 是个好主意。

```
@ndb.tasklet
def get_data_and_store(url):
    ctx = ndb.get_context()
    # until we don't receive result here, this function is "paused", allowing other 
    # parallel tasks to work. when data will be fetched, control will be returned
    result = yield ctx.urlfetch("http://www.google.com/") 
    if result.status_code == 200:
        store = Storage(data=result.content)
        # async job to put data
        yield store.put_async()
        raise ndb.Return(True)
    else:
        raise ndb.Return(False) 
```

您可以在第一个示例中使用此 tasklet 与循环结合。您应该获得ther/false 值的列表，表明获取成功。

我不确定这会在多大程度上提高整体生产力（这取决于谷歌方面），但应该如此。

# unicode - 简化字符串，删除变音符号的通用方法

> ID：13542421
> 
> 赞同：2
> 
> 时间：2012-11-24T15:01:45.007
> 
> 标签：unicode, diacritics, iconv

我正在寻找一种方法来删除文本中的[变音符号](http://en.wikipedia.org/wiki/Diacritic)和其他字母标记，并以适合文本搜索索引的方式对其进行简化。

为了删除变音符号，我已经找到了这些：

*   PHP的[问题](https://stackoverflow.com/questions/3635511/remove-diacritics-from-a-string)：[1、2](https://stackoverflow.com/questions/1770250/how-to-remove-diacritics-from-text)
*   Java的问题：[1](https://stackoverflow.com/questions/1453171/n-n-n-or-remove-diacritical-marks-from-unicode-cha)，相关：[2](https://stackoverflow.com/questions/10392339/how-to-remove-diacritics-only-for-uppercase-characters-in-a-string)
*   Bash的问题：[1](https://stackoverflow.com/questions/10207354/how-to-remove-all-of-the-diacritics-from-a-file)
*   .Net 的[问题](https://stackoverflow.com/questions/2566793/string-replace-diacritics-in-c-sharp)：[1、2](https://stackoverflow.com/questions/249087/how-do-i-remove-diacritics-accents-from-a-string-in-net)
*   Javascript问题：[1](https://stackoverflow.com/questions/3939266/javascript-function-to-remove-diacritics)
*   Python的问题：[1](https://stackoverflow.com/questions/517923/what-is-the-best-way-to-remove-accents-in-a-python-unicode-string)

我想知道一个通​​用的解决方案，独立于语言。（此外，此参考列表可能对某些人有用。）

删除变音符号适用于äöüò等。但我也想要：

*   Ø → Ø
*   Я → R
*   Ł → L
*   ɲ → n
*   æ → a（也可以是“ae”，但在我的情况下，“a”更有意义，因为我也想用“a”替换“ae”）

例如，我想索引名称 Røyksopp，有时也出现在简化名称 Royksopp 下的 Röyksopp。或者 KoЯn 应该是 KoRn。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T14:52:34.023

一些ICU魔法：

```
echo "ë ö ø Я Ł ɲ æ å ñ 開 당" | uconv -x any-name | perl -wpne 's/ WITH [^}]+//g;' | uconv -x name-any | uconv -x any-latin -t iso-8859-1 -c | uconv -f iso-8859-1 -t ascii -x latin-ascii -c 
```

产量

```
e o o A L n ae a n ki dang 
```

这使用 cmdline 工具 uconv，但同样可以使用 ICU 的 Java 或 C 或 C++ API 完成，并且 ICU 具有几乎任何语言的绑定。

Note Я -> A because that is the correct behavior. What you want is not how Unicode defines that character - blame KoЯn for abusing it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T15:06:56.633

在特定于 Python 的问题中，提出了一种通用解决方案来至少删除变音符号：

*   将 unicode 字符串转换为其长规范化形式（字母和变音符号使用单独的字符）
*   删除所有 unicode 类型为“变音符号”的字符

不过，这不适用于 ø。

# javascript - HTML Javascript改变表格单元格的内容

> ID：13542423
> 
> 赞同：0
> 
> 时间：2012-11-24T15:01:47.747
> 
> 标签：javascript

我想通过按下按钮来更改表格中单元格的内容，而不使用输入文本框。我应该用什么来做到这一点？谢谢！

这是我的代码：

`

```
var images = new Array();
var i=0;

images[0] ="1.jpg";
images[1] ="2.jpg";
images[2] ="3.jpg";
images[3] ="4.jpg";

names = ["New York", "Nagasaki", "Nottingham", "Netherlands"]

function next(){
    if(i>=images.length){
        i=0;
        document.getElementById('names').value=names[i];
        document.getElementById('img').src=images[i];   
        i++;
    }
    else{
        document.getElementById('img').src=images[i];
        document.getElementById('names').value=names[i];
        i++;
    }
}
</script>
</head>
<body><center>
<h3>LabExercise3</h3>
<h2>By <i><b><u>Nurbek Zhapar</u></b></i></h2></center>
<form>
<h1>Around the World</h1><br/>
<hr/>
<br/>
    <table align="center">
        <tr><td><input type="text" value="" id="names" readonly="readonly"/></td></tr>
            <tr><td><p style="text-align:center;">
            <img src="1.jpg" alt=""  id="img"/>
            </p></td></tr></table>

<table align="center">
  <tr>
       <td><input type="button" value=" Next " onclick="next()" /></td>
  </tr>
</table>        
</form>` 
```

我想用其他东西替换我在这里用来显示国家名称的输入文本框，或者以其他方式显示国家名称。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T17:29:29.450

您可以`<span id="name"></span>`在表格单元格内添加一个，并更新`document.getElementById("name").textContent`而不是文本框。

您还应该考虑您的 HTML 和 JavaScript。您正在使用的很多东西已被弃用。

请参阅[http://jsfiddle.net/3sEYq/](http://jsfiddle.net/3sEYq/)。

# asp.net - 启用 ViewStateMac 的 URL 重写回发

> ID：13542424
> 
> 赞同：2
> 
> 时间：2012-11-24T15:02:03.570
> 
> 标签：asp.net, .net-4.0, url-rewriting, postback, viewstate

使用：带有 ASP.net 4.0 的 Visual Studio 2010

我有一个使用 URL 重写的网站，我想将重写的 URL 保留在 Postback 上。我已经阅读了很多关于这个主题的主题，但我仍然无法弄清楚这是否可能。

例如：

```
http://localhost/ActualPage.aspx?PageID=4 
```

改写为：

```
http://localhost/member/forum.aspx 
```

该页面包含许多使用回发的控件（例如带有排序和分页的 Telerik RadGrid）。通常，当回发发生时，浏览器会重定向到未重写的 url - 地址栏显示`/ActualPage.aspx?PageID=4`等。在这种情况下，一切正常。

但是我想在回发后保留重写的 URL，所以我编写了代码以将`Form.Action`属性更改为重写的 URL，如下所示：

```
Page.Form.Action = "/member/forum.aspx" 
```

现在页面正确地保留了地址栏中的 URL，但`"Validation of viewstate MAC failed" error`在回发发生时抛出了一个 - 我也希望它是因为视图状态来自不同的 URL。

奇怪的是，即使`enableViewStateMac`设置为 false（在页面中或在 中`web.config`），也会出现此问题 - 但无论如何我都不想禁用它。

实际上，我认为我需要做的是告诉页面/视图状态 mac 授权可以接受来自此替代 URL 的输入，但无论如何我都找不到这样做。我尝试了不同的 URL 重写系统来查看是否有所不同，并且我尝试添加了一个生成的 machineKey - 这两者都没有任何区别。有没有办法做到这一点？

简而言之，我想要：

*   重写的页面，回发到重写的 URL
*   ViewStateMac 已启用
*   没有视图状态验证错误

我记得在早期版本的 .NET 中使用`.browser`文件，`FormRewriterControlAdapter`但这在 .NET 4 中似乎没有任何区别（我不记得它是否成功保留了 URL）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T00:48:26.367

我找到了一个解决方案 - 事实证明这个问题实际上是不相关的，并且将其自身隐藏为 ViewStateMac 问题。

以前我一直将所有 URL 重定向到一个页面，进行数据库查找，然后使用 Server.Transfer() 将正确的页面传递给浏览器。真正的问题是由使用 Server.Transfer() 引起的 - 在使用视图状态时，微软似乎认为这是一个问题。

我进行了调整，以便 IIS 执行数据库查找、整个重写，因此不使用 Server.Transfer() - 我原来的问题已经解决。

# directory - 用 wxWidgets 找出答案：这是一个可写目录吗？

> ID：13542426
> 
> 赞同：0
> 
> 时间：2012-11-24T15:02:13.917
> 
> 标签：directory, wxwidgets

我有一个`wxFilenName mydir`应该*指向*一个可写目录。最终，`mydir`已经通过`mydir=otherfilename.GetPath()`（尽管可能通过一些离题）获得。假设`mydir`指的是（在 Windows 框上）`C:\foo\bar`，我需要确保它`C:\foo\bar`存在并且是一个目录（不是文件）并且我有写权限（所以我可以创建`C:\foo\bar\baz`）。我要做的是检查`mydir.IsOk() && mydir.DirExists() && mydir.IsDirWriteable()`，但我怀疑这不符合我的要求。通过阅读 wxwidgets 文档，我了解到它*确实*区分了“目录中的文件/目录”意义上的`wxFileName`引用与“目录中没有特定文件”的意义上的引用），所以我期望我的工作方法`C:\foo\bar``bar``C:\foo``C:\foo\bar``C:\foo\bar``GetPath()`应该返回这样一个“纯”目录。但是，我怀疑（并且测试表明）我的检查确实检查是否`C:\foo`是可写目录......

什么是更好的方法（在 wxWidgets 框架内）？在执行检查之前，我真的需要附加一些虚拟文件名吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T12:35:08.257

使用[wxFileName::DirName()](http://docs.wxwidgets.org/trunk/classwx_file_name.html#afed95ad83636ed634bbe09564457bfe2)创建一个表示目录的对象。

# mysql - 多个 if 语句缺少数据

> ID：13542427
> 
> 赞同：1
> 
> 时间：2012-11-24T15:02:13.437
> 
> 标签：mysql, vb.net, if-statement, datareader

只是想问为什么这对我不起作用？

我正在尝试为预订系统（或类似的东西）带回数据。

问题是它只使用一个 if 语句而忽略第二个。

使用 VB.net 并尝试连接到 MySQL 数据库。

谢谢大家...

彼得

谢谢大家的回答，我会尝试所有的问题是，如果它不是=让说星期一，那么它应该使复选框的颜色变为白色。

我将尝试选择案例并查看。

我做了一些更改，添加了复选框列表，使其更容易。问题是在不同的日子清除复选框。

```
 CheckBoxListMon.BackColor = Drawing.Color.White
    CheckBoxListMon.Enabled = True
    CheckBoxListMon.ClearSelection() 
```

这使复选框已启用且未选中，但我仍然无法单击它们，它们已被禁用。

有人有什么想法吗？

```
 Try
        strQuery = "SELECT BookingDate, BookingTime,BookRegUserID,Booked FROM bookings"

        MySQLCmd = New MySqlCommand(strQuery, dbCon)

        dbCon.Open()

        DR = MySQLCmd.ExecuteReader

        While DR.Read

            bookDate = DR.Item("BookingDate")
            bookTime = DR.Item("BookingTime")
            bookRegID = DR.Item("BookRegUserID")
            booked = DR.Item("Booked")

            Select Case True

                Case bookDate = lblMonday.Text And    CheckBoxListMon.Items.FindByValue(test) IsNot Nothing

                    CheckBoxListMon.Items.FindByValue(bookTime).Enabled = False
                    CheckBoxListMon.Items.FindByValue(bookTime).Selected = True
                    CheckBoxListMon.Items.FindByValue(bookTime).Attributes.Add("Style", "color: red;")

                Case bookDate = lblTuesday.Text And CheckBoxListTue.Items.FindByValue(test) IsNot Nothing

                    CheckBoxListTue.Items.FindByValue(bookTime).Enabled = False
                    CheckBoxListTue.Items.FindByValue(bookTime).Selected = True
                    CheckBoxListTue.Items.FindByValue(bookTime).Attributes.Add("Style", "color: red;")
        End While
        DR.Close()
        dbCon.Close()
    Catch ex As Exception

    End Try 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T15:18:27.683

我认为我现在看到了问题。如果它们不匹配，您不想将组合框翻转回来。假设您的结果集中返回了星期一星期二。第一行将星期一翻转为真，星期二翻转为假，第二行将星期一设置为假-我认为您不希望这样做-并将星期二设置为真，一切都由最后一行决定。答案是在处理行之前将它们全部设置为 false，并且只有在匹配时才设置为 true，否则忽略它。

```
 CbMon10.BackColor = Drawing.Color.White
    CbMon10.Checked = False
    CbMon10.Enabled = True
    CbTue10.BackColor = Drawing.Color.White
    CbTue10.Checked = False
    CbTue10.Enabled = True 
```

而读博士

```
bookDate = DR.Item("BookingDate")
bookTime = DR.Item("BookingTime")
bookRegID = DR.Item("BookRegUserID")
booked = DR.Item("Booked")

    Select Case True
        Case bookDate = lblMonday.Text And bookTime = CbMon10.Text
            CbMon10.BackColor = Drawing.Color.Red
            CbMon10.Checked = True
            CbMon10.Enabled = False

        Case bookDate = lblTuesday.Text And bookTime = CbTue10.Text
            CbTue10.BackColor = Drawing.Color.Red
            CbTue10.Checked = True
            CbTue10.Enabled = False

    End Select

End While 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T15:07:31.180

你应该`if-else-if`像这样使用梯子：

```
 If bookDate = lblMonday.Text And bookTime = CbMon10.Text Then
        CbMon10.BackColor = Drawing.Color.Red
        CbMon10.Checked = True
        CbMon10.Enabled = False
 Else If bookDate = lblTuesday.Text And bookTime = CbTue10.Text Then
        CbTue10.BackColor = Drawing.Color.Red
        CbTue10.Checked = True
        CbTue10.Enabled = False
 Else
        CbTue10.BackColor = Drawing.Color.White
        CbTue10.Checked = False
        CbTue10.Enabled = True
 End If 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T15:07:32.397

而不是多个if，你可以像这样使用它： -

```
 If (bookDate = lblMonday.Text And bookTime = CbMon10.Text) or (bookDate = lblTuesday.Text And bookTime = CbTue10.Text) Then
            CbMon10.BackColor = Drawing.Color.Red
            CbMon10.Checked = True
            CbMon10.Enabled = False
        Else

            CbMon10.BackColor = Drawing.Color.White
            CbMon10.Checked = False
            CbMon10.Enabled = True
        End If 
```

# c# - ToolstripControlHost 导致工具条在程序执行暂停时不会消失

> ID：13542429
> 
> 赞同：1
> 
> 时间：2012-11-24T15:02:25.963
> 
> 标签：c#, winforms, toolstripdropdown, toolstripcontrolhost

我正在尝试构建一个自定义 WinForms ToolStripDropDownMenu。我需要自定义菜单项，所以我使用 ToolStripControlHosts。问题是，当菜单打开并且我遇到断点时，菜单不会消失并保持在所有应用程序的顶部。

有没有人遇到过这个问题？这是 Visual Studio 错误吗？

简单的例子：

```
Button b = new Button();
b.Click += delegate(object sender, EventArgs e)
{
   int i = 0;
};
toolStripDropDownButton1.DropDownItems.Add(new ToolStripControlHost(b)); 
```

![在此处输入图像描述](../Images/b3bead2d5d8c907b8a1c947f184986bd.png)

# orbeon - Orbeon：链接资源（css、图像、js）会导致不稳定的行为

> ID：13542432
> 
> 赞同：2
> 
> 时间：2012-11-24T15:02:37.490
> 
> 标签：orbeon

我正在开发一个基于 orbeon 示例的新 webapp。我正在使用 orbeon 3.9 CE。当我使用自定义资源时，我的行为**非常不稳定。**它们位于以下文件夹中：

```
/orbeon/WEB-INF/resources/config/theme/*.css
/orbeon/WEB-INF/resources/config/theme/*.js
/orbeon/WEB-INF/resources/config/theme/images/*.jpg 
```

在我的自定义主题文件（/orbeon/WEB-INF/resources/config/theme-xnotes.xsl）中，它们是这样链接的（几个例子）：

```
<xhtml:link rel="stylesheet" href="/config/theme/bootstrap.css" type="text/css" media="all"/>
<xhtml:script src="/config/theme/bootstrap.js"/>
<xhtml:link rel="icon" href="/config/theme/images/icone_grue.png" type="image/png"/> 
```

当我将浏览器指向应用程序 (http://localhost:8080/orbeon) 时，它有时工作，有时不工作（css 被忽略，页面转换错误），有时它部分工作（css 可以，js 不, 一些图像是好的，其他的不是等等）

当我查看页面源代码时，链接似乎没问题，以与上面相同的示例为例：

```
<link rel="stylesheet" href="/orbeon/config/theme/bootstrap.css" type="text/css" media="all">
<script src="/orbeon/config/theme/bootstrap.js">
<link rel="icon" href="/orbeon/config/theme/images/icone_grue.png" type="image/png"> 
```

但是有些链接是无效的并且指向应用程序的根目录。主要问题是**我无法使这种行为一致**以隔离问题。

帮助真的很感激！这让我疯狂...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T18:05:20.140

我认为每个请求不能有超过一个 GET 或 POST，但每个打开的连接肯定是。

但是，这可能与您提到的身份验证有关`j_security_check`。您能否尝试确保 CSS 和其他资源不受表单身份验证的保护？

# hadoop - Hadoop MR1 和 MR2 的共存

> ID：13542441
> 
> 赞同：3
> 
> 时间：2012-11-24T15:04:18.607
> 
> 标签：hadoop, mapreduce, hadoop-yarn

是否可以在同一个集群中同时运行 Hadoop MR1 和 MR2（至少在理论上）？

如果是，我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T02:36:03.927

理论上，您可以这样做：

*   在一台机器上运行 DataNode TaskTracker 和 NodeManager
*   在其他机器上运行 NameNode SecondaryNameNode 和 ResourceManager
*   具有不同端口的所有进程

但是，不建议这样做，请参阅[cloudera 博客](https://ccp.cloudera.com/display/CDH4DOC/Deploying+MapReduce+v2+%28YARN%29+on+a+Cluster#DeployingMapReducev2%28YARN%29onaCluster-Step9)：

> “确保您没有尝试在同一组节点上同时运行 MRv1 和 YARN。这是不支持的；它会降低性能并可能导致集群部署不稳定。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T14:33:44.313

理论上，是的。

1.  将 tarball 解压到 2 个不同的位置，由不同的用户拥有。

2.  在它们中，将所有与 mapred/yarn 相关的端口更改为互斥集。

3.  仅从其中一个位置运行数据节点。

4.  在两个位置启动 mapred/yarn 相关的守护进程

如果有效，请在此处发布。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-16T05:05:24.613

对于 MR1 和 MR2，dfs name dir 和 data dir 也应该不同。

```
<property>
    <name>dfs.name.dir</name>
    <value>/home/userx/hdfs/name</value>
</property>
<property>
    <name>dfs.data.dir</name>
    <value>/home/userx/hdfs/data</value>
</property> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-26T21:18:46.090

您不需要同时运行两者，只需运行 Hadoop 2.0，它为为 Hadoop 1.0 编写的 MapReduce 应用程序提供完全的向后兼容性。API 有一些小的更改，请查看[链接](https://hadoop.apache.org/docs/r2.7.2/hadoop-mapreduce-client/hadoop-mapreduce-client-core/MapReduce_Compatibility_Hadoop1_Hadoop2.html)以检查任何更改是否会影响您的应用程序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-26T17:09:30.950

对于 Mapr 来说，这不仅是理论，而且是实践，请查看此[链接](https://www.mapr.com/blog/memory-management-calculations-clusters-running-both-mr1-and-mr2-services)。

# javascript - 在 Symfony 2 项目中使用 JQuery

> ID：13542442
> 
> 赞同：0
> 
> 时间：2012-11-24T15:04:18.307
> 
> 标签：javascript, web-applications, symfony, twig

JQuery 在我的 Symfony2 项目中似乎不起作用。

我使用这 2 个片段在 twig html 文件中测试 JQuery，但它们都不起作用：

```
 {% block myJavascript %}
    <script type="text/javascript">

    if (typeof jQuery != 'undefined') {
        alert('hi'); }

     $(document).ready(function() {
        alert('hi');
     });
    </script>
    {% endblock %} 
```

仅此代码正在运行，这意味着 Javascript 正在运行

```
 alert('hi'); 
```

我在我的 app/resources/view/base.html.twig

```
 <link rel="javascript" href="{{ asset('bundles/etiennepsav/js/jquery-1.8.3.js') }}" type="text/javascript" media="all" /> 
```

参考位于以下位置的 jQuery 文件：

```
 app/src/Etienne/Bundle/PsavBundle/Resources/Public/js/jquery-1.8.3.js 
```

有什么想法有什么问题吗？有什么特殊的配置要设置吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T15:42:45.280

Javascript 需要`<script>`标签而不是`<link>`标签才能加载到页面中

# neural-network - 棋盘游戏逼近函数的神经网络

> ID：13542444
> 
> 赞同：0
> 
> 时间：2012-11-24T15:04:27.007
> 
> 标签：neural-network

我正在尝试制作一个神经网络来逼近一些未知函数（对于我的神经网络课程）。问题是这个函数有很多变量，但其中许多并不重要（例如在 [f(x,y,z) = x+y] z 中​​并不重要）。我如何为这类问题设计（和学习）网络？

更具体地说，该功能是一些具有未知规则的棋盘游戏的评估功能，我需要通过代理的经验以某种方式学习这些规则。每次移动后，都会将分数提供给代理，因此实际上它需要找到如何获得最高分数。

我试图将代理的邻域传递给网络，但有太多变量对分数并不重要，代理正在寻找非常本地的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T05:02:42.483

如果您有足够的数据量，您的 ANN 应该能够忽略噪声输入。您可能还想尝试其他学习方法，例如缩放共轭梯度或简单的启发式方法，例如动量或提前停止，这样您的 ANN 就不会过度学习训练数据。

如果您认为可能有多个本地解决方案，并且您认为可以获得足够的训练数据，那么您可以尝试“混合专家”方法。如果您与专家混合使用，您应该使用太“小”的人工神经网络来解决整个问题，以迫使它使用多个专家。

那么，你得到了一组状态和动作，而你的目标值是动作应用于状态后的分数？如果这个问题变得更棘手，它听起来就像一个强化学习问题。

这个游戏有离散动作吗？它有离散的状态空间吗？如果是这样，也许决策树值得尝试？

# controller - 我不明白 PID 控制器的积分部分

> ID：13542447
> 
> 赞同：12
> 
> 时间：2012-11-24T15:04:58.223
> 
> 标签：controller, integral, control-theory, pid-controller

我不了解 PID 控制器的组成部分。让我们假设这个来自维基百科的伪代码：

```
previous_error = 0
integral = 0 
start:
  error = setpoint - measured_value
  integral = integral + error*dt
  derivative = (error - previous_error)/dt
  output = Kp*error + Ki*integral + Kd*derivative
  previous_error = error
  wait(dt)
  goto start 
```

积分在开始时设置为零。然后在循环中，它会随着时间的推移整合错误。当我对测量值或设定点进行（正）更改时，误差将变为正，并且积分将随着时间的推移（从一开始）“吃掉”这些值。但是我不明白的是，当误差稳定回零时，积分部分仍然会有一些值（随着时间的推移积分误差）并且仍然会有助于控制器的输出值，但它不应该。

有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-06-09T18:55:51.530

考虑稳定状态下的输出......您希望测量值是设定点，误差为零，输出是保持过程稳定在测量值所需要的任何东西。（在某些情况下可能为零，但输出可能并不总是需要为零 - 例如：您需要将加热器设置为标记 6.5 以将房间保持在 72F。）

如果误差为零，则比例误差项对输出没有任何贡献。

如果过程处于稳定状态，则 error-previous_error 为零，并且导数项没有任何贡献。

如果输出是将过程保持在稳定状态的适当设置，则积分项必须是提供输出值的唯一项。它已经积累了正确的错误记忆，以测量单位乘以观察时间测量，可以通过 Ki 项转换为输出单位，单位为 outputUnits/(error*measurementTime)。

以恒温器为例，如果房间内电加热器旋钮上的输出为 0-11 单位，并且您正在测量房间内的华氏度与每 1 分钟 72 华氏度的设定点，那么积分相加您一直在记录的degreeFtooCold*minute，Ki 项会将观察到的误差总和转换为刻度盘上的单位。

积分在稳态下不为零是完全可以预期的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T17:03:18.233

根据您要控制的系统和传感器的质量，控制器和系统/设备之间总会存在某种干扰。当有这种干扰时，控制器的积分部分不会归零，而是会抵消它！这是因为积分将不断变化，直到系统的输出等于参考值（即积分值与干扰相反）。

例如，参见描述控制参数的[此页面：当系统和输入具有特定特征时，可能会出现](http://www.feedcontfinals.ewebsite.com/articles/chapter-10/chapter-10-page-2/)[稳态误差](http://teal.gmu.edu/~gbeale/ece_421/ess_01.html)，积分将尝试与之相反，这会导致最终误差低得多，但在某些情况下会出现更多超调。

此外，传感器的精度/噪声会对积分值的精度施加限制，积分值可能会在零附近振荡。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T15:37:30.163

让我们这样看：误差本身稳定为零是不够的。要求*积分*为零，这意味着测量值随时间的平均值与设定值匹配。

一个不好的例子是尝试使用一些 Ki,Kp,Kd 从零达到 100% 的值。

x = 0,60,80,90,98,99,100,100,100。

x的值是多少？平均值为 80.777。甚至没有接近100。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T21:36:21.907

稳态误差需要 I 项。查看 Wikipedia 上的示例图。

[http://en.wikipedia.org/wiki/File:Change_with_Ki.png](http://en.wikipedia.org/wiki/File:Change_with_Ki.png)

您可以通过更改 I 项的增益来查看图表中的变化。显然，由于积分饱和，Ki = 2 太高了，这就是导致剧烈过冲的原因。Ki = .5 看起来不错，但如果您想尽快达到稳定值，则需要将 Ki 增加一点。看看 Ki = 1，它有点过冲，但仍然比 Ki = .5 更快地达到稳定。所以你必须决定这种权衡是否值得。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-08-18T08:12:28.197

我认为这里的部分解释是，随着积分部分的过冲，比例部分将开始反对它。因此，第二个过冲将更小，第三个甚至更小，依此类推。但如上所述，通常会有一些过程噪声导致误差不为零，控制器可能永远不会达到恒定输出，但输出的变化应该非常小。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-12-24T19:16:27.267

恕我直言，您有理由质疑 PID 定义，因为它使 PID 控制中的错误与积分项有关。错误可以说明如下： 1）即使有零错误，积分项也会导致输出动作。2) 积分基于不再相关的先前错误。如果控制器将输入与输出进行比较并通过负反馈将误差驱动为零，则比例控制可以产生 0 误差。

正确的 PID 项： D 项：将变化（微分）添加到要在求和结中组合的稳态 INPUT。

I term：将变化（微分）添加到稳态 OUTPUT 的负（负反馈）以在求和结中组合。

当跨（围绕）负反馈结合时，整合就是差异化

输出连接到具有非常高的游戏和负极性（反相）的求和点。

P 项：是所需的 OUTPUT 除以所需的 INPUT 或通过 OUTPUT 馈入求和点的信号除以通过 INPUT 馈入求和点的信号的比率。

D 项，微分加快了输出对输入的响应，因此输出更快地接近正确值。

当接近正确/期望值时，积分会减慢输出响应。

# vim - C.Vim 插件，在 *.h 文件中添加 Automatic Header

> ID：13542448
> 
> 赞同：4
> 
> 时间：2012-11-24T15:05:15.307
> 
> 标签：vim, vim-plugin

我刚刚下载并安装了用于在 Vim 中进行 C/C++ 开发的[C-Vim](http://www.vim.org/scripts/script.php?script_id=213)插件。

当我创建一个新的 .c 文件时，会自动从模板创建一个标题 - 我希望在创建一个新的 .h 文件时发生同样的事情。

相反，我收到以下警告（在创建新的 .h 文件时）：

```
template does not exist 
```

如何修改插件设置，以便新的 .h 文件也有为它们生成的模板？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T23:32:13.423

将此行添加到您的 .vimrc 文件中：

```
let g:C_SourceCodeExtensions  = 'h cc cp cxx cpp CPP c++ C i ii' 
```

这里要注意的重要部分是`h`字符串的开头。有关此工作原理的更多信息，请参阅`:h csupport-comm-frame`。

**注意：**为了查看帮助文档，请确保`:helptags ~/.vim/doc`在安装插件后运行。否则插件附带的文档将不会被安装。

# javascript - Javascript中的文本字符串到矩阵

> ID：13542449
> 
> 赞同：1
> 
> 时间：2012-11-24T15:05:33.533
> 
> 标签：javascript, matrix

初学者在这里。我有一个文本区域。我想将文本分解成一个矩阵，然后转置行和列。我有将文本分成组的功能。另一个将它们放入数组的函数，就我所知。我真的不知道如何将它们组合成一个功能或是否需要。我相信我应该通过创建子数组将数组转换为矩阵，然后我最终可以将文本从 [i][j] 转置为 [j][i]。到目前为止这是对的还是我遗漏了什么？我很想在某个地方看到一个可行的示例，但似乎找不到。

```
 function G_Group(size, count)
{
   if (size <= 0)
   {
      size = document.encoder.group_size.value;
      if (size <= 0)
      {
         alert('Invalid group size');
     return false;
      }
   }
   if (count <= 0)
   {
      count = document.encoder.group_count.value;
      if (count <= 0)
      {
         alert('Invalid group count');
     return false;
      }
   }
   var t = document.encoder.text.value;
   var o = '', groups = 0;
   t = Tr(t, " \r\n\t");
   while (t.length > 0)
   {
      if (o.length > 0)
      {
         o += ' ';
      }
      if (groups >= count)
      {
         o += "\n";
     groups = 0;
      }
      groups ++;
      o += t.slice(0, size);
      t = t.slice(size, t.length);
   }
   document.encoder.text.value = o;
   return false;
}

   function toArray()
    {
    var str = document.encoder.text.value;
    var nstr = str.split(" ");
    document.encoder.text.value = nstr;
    }
//i am having trouble with this part.  don't know how to call the document.encoder.text.value into the list and don't know how to call group_size into elementsPerSubArray 

    function toMatrix(list, elementsPerSubArray) {
        var matrix = [], i, k;
        for (i = 0, k = -1; i < list.length; i++) {
            if (i % elementsPerSubArray === 0) {
                k++;
                matrix[k] = [];
            }

            matrix[k].push(list[i]);
        }

        return matrix;
    } 
```

最后，我不知道如何将结果发布回 textarea

到目前为止，我可以将文本分组到我从选择框中选择多少个字符的块中（我有 30 个选项），并且可以在任何我想要的地方进行换行。就矩阵而言，将在 1 组 (X) 字符后进行换行。鉴于此文本：

```
OOMUCHABOUTMYCOUNTRYICAREALOTH 
```

我可以把它分成这样的组。

```
OOMUC HABOU TMYCO UNTRY ICARE ALOTH 
```

或者如果我想这样。

```
OOMUC 
HABOU 
TMYCO 
UNTRY 
ICARE 
ALOTH 
```

我想要做的是能够翻转矩阵，所以它看起来像这样

```
AIUTHO
LCNMAO
...ect
HEYOUC 
```

# c++ - DirectX 9 设备。在渲染时创建顶点和索引缓冲区。（2 个线程）

> ID：13542450
> 
> 赞同：1
> 
> 时间：2012-11-24T15:05:51.093
> 
> 标签：c++, multithreading, directx

一段时间以来，我一直在寻找这个问题的答案。有人知道该怎么做吗？

我有一些想法，你能告诉我它们是否有效以及哪个是最好的使用（如果确实有合适的解决方案）。

1.  创建单个 directx9 设备。为不同的线程制作一个副本。在加载新关卡资产并创建它们的顶点和索引缓冲区时渲染加载屏幕（带有已加载的缓冲区）。
2.  创建 2 个不同的 directx9 设备。每个线程一个。一个设备只负责渲染（并连接到窗口），另一个没有渲染表面，负责制作和填充缓冲区。
3.  创建一个带有线程安全标志的设备（我认为有这样的东西，但它可能不会这样调用）并与 1 中的相同。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T16:09:10.133

如果你只是想加载一个关卡，那么你真的不需要单独的线程。例如，您可以在加载资源时重新绘制场景。我建议避免使用多线程，除非你离不开它。

如果您仍然想要多线程，请传入[`D3DCREATE_MULTITHREADED`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb172527%28v=vs.85%29.aspx)IDirect3D9 [::CreateDevice](http://msdn.microsoft.com/en-us/library/windows/desktop/bb174313%28v=vs.85%29.aspx)。请注意，DirectX SDK 明确警告使用此标志可能会降低性能。

创建单个设备是首选解决方案，即我建议使用 #1 。

可以在多个设备之间[共享资源](http://msdn.microsoft.com/en-us/library/windows/desktop/bb219800%28v=vs.85%29.aspx)，但此功能仅在 windows vista 上可用。因为今天人们仍在使用 WinXP，如果你使用类似的东西，你的用户会讨厌你。

# c# - SignalR 1.0 - 向特定客户端发送数据

> ID：13542453
> 
> 赞同：1
> 
> 时间：2012-11-24T15:06:05.420
> 
> 标签：c#, asp.net-mvc, signalr

我希望能够向特定客户端发送消息，我有工作代码，但我找不到识别用户的方法，因为在每个页面加载/刷新时客户端 ID 都会改变，所以我不能依赖它。我试图将查询字符串附加到连接，但我只能找到相同上下文的查询字符串。

这是我的集线器，在发送方法中，我希望能够在发送消息时将发送到特定连接 id 的 id 匹配：

```
public class Chat : Hub
{
    public string addMsg()
    {
        return "";
    }

    public void Send(string message, string id)
    {

        Clients.Client(Context.ConnectionId).receiveMessage(message);
    }
} 
```

这是我的客户端代码，我想将要发送消息的人的 id 传递给服务器发送方法，并使用其他连接用户的查询字符串值将其与我发送的 id 匹配。

```
var chat = $.connection.chat;

chat.client.receiveMessage = function (message) {
  alert("Received from server: " + message);
};

chat.addMsg = function (message) {

};

$("#sendMessage").click(function () {
  chat.server.send($('#newMessage').val(), 6);
});

$.connection.hub.qs = "id=1";

$.connection.hub.start().done(function () {
  var myClientId = $.connection.hub.id;
  var qs = $.connection.hub.qs;
}); 
```

我希望我的问题是有道理的，我已经尝试破解这个问题一段时间了，下面是一些链接到我用来到达我现在所在位置的一些文章，我只是错过了最后一块拼图，请对我放轻松:)

[http://weblogs.asp.net/davidfowler/archive/2012/11/11/microsoft-asp-net-signalr.aspx](http://weblogs.asp.net/davidfowler/archive/2012/11/11/microsoft-asp-net-signalr.aspx)

[SignalR-向特定客户端发送数据](https://stackoverflow.com/questions/13495976/signalr-send-data-to-a-specific-client/13499307#13499307)

[https://github.com/SignalR/SignalR/wiki/QuickStart-Hubs](https://github.com/SignalR/SignalR/wiki/QuickStart-Hubs)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T18:05:55.137

我不认为这会按照你想要的方式工作。连接 ID 就是这样 - 特定连接的标识符。SignalR 本身对用户身份验证一无所知。然而，它是建立在 ASP.NET 之上的，所有您熟悉的身份验证方法（Windows、Forms 等）都可以按您的预期工作。

一旦 ASP.NET 对用户进行了身份验证，您就可以在集线器中以`Context.User`. 现在由您负责维护此用户与一个或多个连接 ID 之间的映射。除了浏览器刷新之外，您可能还需要处理从多个浏览器或机器访问您的服务的用户。向该用户发送消息意味着将其发送到所有这些浏览器和机器。

[Jabbr](https://github.com/davidfowl/JabbR)做到了这一切，甚至更多。您确实应该查看该代码以找到实现此功能的好方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-10T15:14:55.970

如何在集线器中使用 Clients.Caller 对象，并覆盖 OnConnected 方法：

```
public override Task OnConnected()
{
    Clients.Caller.sendInitMessage(...);
    return base.OnConnected();
} 
```

# matlab - Matlab 绘制 3d 图

> ID：13542455
> 
> 赞同：0
> 
> 时间：2012-11-24T15:06:28.510
> 
> 标签：matlab

我创建了一个 3d 垫子，垫子中的一些点来自计算，垫子中的一些点对我无效，因此我将“inf”放在这些点中

但是，当我编写代码来绘制这个 3D 图时：

```
rotating_vec=logspace(0,log10(8e3-1),50);
adding_vec=logspace(0,log10(8e3-1),50); 
```

以及绘制 3D 图形的代码：

```
surf(adding_vec,rotating_vec,3d_mat_to_plot); 
```

matlab 显示一条错误消息（male_spc_3d_mat 是一个 51X51 的垫子，我从我创建的函数中得到它）：

```
rotate_vec=logspace(500,log10(8e3-1),50);
rotate_vec=[25,rotate_vec];
add_vec=rotate_vec;
>> [rotate_mat_mesh,add_mat_mesh]=meshgrid(rotate_vec,add_vec);
>> surf(rotate_mat_mesh,add_mat_mesh,male_spc_3d_mat)
Warning: Axes limits too large.  Not rendering... 
Warning: Axis limits outside float precision, use ZBuffer or
Painters instead. Not rendering 
Warning: Axis limits outside float precision, use ZBuffer or
Painters instead. Not rendering 
```

问题是什么？我该如何解决？

多谢

# core-plot - 如何在coreplot中的符号填充后面绘制绘图符号阴影？

> ID：13542456
> 
> 赞同：0
> 
> 时间：2012-11-24T15:06:49.473
> 
> 标签：core-plot

是否可以在符号填充后面绘制符号阴影？正如这里所解释的，[CorePlot 问题 478](http://code.google.com/p/core-plot/issues/detail?id=478 "核心情节第 478 期")填充是在绘图填充之后绘制的，这导致看起来像这样的东西![核心图符号](../Images/4b5b297edc2cc57a671c67584eed2698.png)，其中红色是阴影，蓝色是填充。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T16:55:27.427

核心情节问题 #478 已修复。拉取最新代码修复符号绘制。

如果您不想这样做，则修复涉及向符号绘图添加透明层。查看更改的[差异](http://code.google.com/p/core-plot/source/detail?r=cb8b991b805a72e8c7499191d47d2c36285fe2fd)以了解如何修复您的副本。之前的变更集也修复了`-copyWithZone:`问题跟踪器中提到的问题。

# python-3.x - 如何为列表的每个索引打分

> ID：13542458
> 
> 赞同：0
> 
> 时间：2012-11-24T15:07:03.260
> 
> 标签：python-3.x

```
def voting_borda(rank_ballots):
    '''(list of list of str) -> tuple of (str, list of int) 
```

该参数是一个 4 元素列表的列表，代表单次选区的排名投票。

[博尔达计数](http://en.wikipedia.org/wiki/Borda_count)是通过根据排名分配积分来确定的。一方每获得第一名得3分，每名第二名得2分，每名第三名得1分。（排名第四不得分。）例如，上面显示的排名投票将为自由党计数贡献 3 分，为绿色计数贡献 2 分，为 CPC 计数贡献 1 分。得分最多的一方赢得席位。

返回一个元组，其中第一个元素是根据 Borda Count 的获胜方的名称，第二个元素是一个四元素列表，其中包含每一方的总点数。列表元素的顺序对应于 PARTY_INDICES 中各方的顺序。

```
#>>> voting_borda([['GREEN','NDP', 'LIBERAL', 'CPC'], ['GREEN','CPC','LIBERAL','NDP'],
    ['LIBERAL','NDP', 'CPC', 'GREEN']])
#('GREEN',[4, 6, 5, 3])

list_of_party_order = []
for sublist in rank_ballots:
    for party in sublist[0]:
        if party == 'GREEN':
            GREEN_COUNT += 3
        elif party == 'NDP':
            NDP_COUNT += 3
        elif party == 'LIBERAL':
            LIBERAL_COUNT += 3
        elif party == 'CPC':
            CPC_COUNT += 3

    for party in sublist[1]:
        if party == 'GREEN':
            GREEN_COUNT += 2
        elif party == 'NDP':
            NDP_COUNT += 2
        elif party == 'LIBERAL':
            LIBERAL_COUNT += 2
        elif party == 'CPC':
            CPC_COUNT += 2

   for party in sublist[2]:
        if party == 'GREEN':
            GREEN_COUNT += 1
        elif party == 'NDP':
            NDP_COUNT += 1
        elif party == 'LIBERAL':
            LIBERAL_COUNT += 1
        elif party == 'CPC':
            CPC_COUNT += 1 
```

我不知道如何更简单地为列表中的每个索引打分。有人可以帮帮我吗？不用太复杂。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T16:48:36.657

这并不**完全**符合您的要求，它返回一个包含两个值的元组：获胜者的姓名，以及所有各方及其值的**字典，而不是仅包含值的列表。**在我看来，这几乎适用于任何情况，如果您不喜欢它，可以将其转换为列表。

它也需要多个参数而不是一个列表，但是您可以通过简单地删除`*`from`*args`

但是请注意，如果您关心速度而不是小代码，那么这不是最好的方法。它确实有效。

它在这种方式上也优于您的代码，允许您在函数内不使用任何参与方名称或参与方数量，这使得添加、重命名或删除参与方成为可能。

```
def voting_borda(*args):
    results = {}
    for sublist in args:
        for i in range(0, 3):
            if sublist[i] in results:
                results[sublist[i]] += 3-i
            else:
                results[sublist[i]] = 3-i

    winner = max(results, key=results.get)
    return winner, results

print(voting_borda(
    ['GREEN','NDP', 'LIBERAL', 'CPC'],
    ['GREEN','CPC','LIBERAL','NDP'],
    ['LIBERAL','NDP', 'CPC', 'GREEN']
)) 
```

将导致：`('GREEN', {'LIBERAL': 5, 'NDP': 4, 'GREEN': 6, 'CPC': 3})`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T19:56:53.087

[我在网上](http://www.cdf.toronto.edu/~csc108h/fall/assignments/a2/handout/index.shtml)找到了您的投票模拟作业，并在此处添加了一些常量，以简化解决问题的代码（尽管一开始的定义可能看起来不像）。

返回的元组的第一个元素并不*完全*符合请求的格式——它是一个列表而不是单个值——以处理相当真实的平局投票的可能性，如下面使用的示例数据值所示`rank_ballots`。即使没有平局，返回的元素也是一个单例列表——实际上这通常比让它根据是否有多个而变化更容易处理。

```
PARTY_NAMES = ['NDP', 'GREEN', 'LIBERAL', 'CPC']
NAME_TO_INDEX = {party:PARTY_NAMES.index(party) for party in PARTY_NAMES}
INDEX_TO_NAME = {PARTY_NAMES.index(party):party for party in PARTY_NAMES}

def voting_borda(rank_ballots):
    results = [0 for _ in PARTY_NAMES]
    MAX_POINTS = len(PARTY_NAMES)-1
    for ballot in rank_ballots:
        for i,party in enumerate(ballot):
            results[NAME_TO_INDEX[party]] += MAX_POINTS-i

    highest_rank = max(results)
    winners = [INDEX_TO_NAME[i] for i,total in enumerate(results) if total == highest_rank]
    return winners, results

rank_ballots = [['GREEN','NDP', 'LIBERAL', 'CPC'],
                ['GREEN','CPC','LIBERAL','NDP'],
                ['LIBERAL', 'GREEN', 'NDP', 'CPC'],
                ['LIBERAL','NDP', 'CPC', 'GREEN'],]

print(voting_borda(rank_ballots)) 
```

输出：

```
(['GREEN', 'LIBERAL'], [5, 8, 8, 3]) 
```

# android - 如果抛出许多异常，ACRA 会变得很无聊

> ID：13542460
> 
> 赞同：1
> 
> 时间：2012-11-24T15:07:09.837
> 
> 标签：android, acra

我在我的 android 应用程序中使用[ACRA 。](https://github.com/ACRA/acra)它非常有用，但有时很无聊。

有时，有几个异步任务在后台运行。而对于赛季，他们都失败了（例如无法连接到互联网）。ACRA 会反复显示 toast 信息，并拒绝退出。

是否能够让 ACRA 捕获第一个异常？还是只显示一次 toast 消息？

* * *

**更新**

添加演示：[https ://github.com/freewind/android-acra-multi-reports](https://github.com/freewind/android-acra-multi-reports)

本项目有4项活动。最后一个会抛出异常，之前的每个活动都会抛出异常`onActivityResult`。可以看到 ACRA 在退出前会多次报告。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T16:02:04.200

在我看来，这听起来像是您实际上应该捕获一些异常，并且不要让所有异常都冒出来。

ACRA`Thread.UncaughtExceptionHandler`在主线程上注册 a。在这里，所有未捕获的异常（正如处理程序的名称所暗示的）都得到处理。通常这意味着应用程序即将崩溃，ACRA 将发挥它的报告魔力。ACRA 本身使用多个线程来完成它的工作，并会等到一切都完成后才真正终止应用程序的进程。所以我猜如果出现很多异常，ACRA 只是忙于处理它们，以至于它不会达到会终止进程的地步。

您可以注册自己的实现`UncaughtExceptionHandler`来捕获异常并决定何时将它们交给 ACRA 以及何时执行其他操作。如果我没记错的话，ACRA 会调用`UncaughtExceptionHandler`在 ACRA 初始化之前已经注册的那个。所以你也可以尝试链接这些处理程序。

# c# - java和C#中如何实现运算符重载？

> ID：13542461
> 
> 赞同：-1
> 
> 时间：2012-11-24T15:07:13.873
> 
> 标签：c#, java, polymorphism, operator-overloading

我知道在 Java 和 C# 中没有运算符重载之类的东西。我的老师给了我一个任务，以在任何这些语言中实现运算符重载。我不知道这些语言的深层概念，只知道基本的 OOP。那么任何人都可以告诉是否有任何其他方法可以实现这一目标？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T15:09:36.813

在 C# 中有一种称为*运算符重载*的东西，请查看[MSDN](http://msdn.microsoft.com/en-us/library/aa288467%28v=vs.71%29.aspx)中的以下代码片段：

```
public struct Complex 
{
   public int real;
   public int imaginary;

   public Complex(int real, int imaginary) 
   {
      this.real = real;
      this.imaginary = imaginary;
   }

   // Declare which operator to overload (+), the types 
   // that can be added (two Complex objects), and the 
   // return type (Complex):
   public static Complex operator +(Complex c1, Complex c2) 
   {
      return new Complex(c1.real + c2.real, c1.imaginary + c2.imaginary);
   }
} 
```

[可重载运算符的完整列表](http://msdn.microsoft.com/en-us/library/8edha89s.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T15:34:49.403

正如 des 所示，C# 确实有运算符重载。另一方面，Java 没有。Java 比较两个对象是否相等的方式是通过重写`equals(Object)`从基对象继承的方法来完成的`java.lang.Object`。这是一个示例用法：

```
public class MyClass {
    private int value;

    @Override
    public boolean equals(Object o) {
        return o instanceof MyClass && ((MyClass)o).value == this.value;
    }
} 
```

当然，这只是复制重载`==`运算符的一种解决方法。对于其他运营商，如`>=`或`<=`没有。但是，您可以使用 OO*使用*通用接口重新创建它：

```
interface Overloadable<T> {
    public boolean isGreaterThan(T other);
    public boolean isLessThan(T other);
}

public class MyClass implements Overloadable<MyClass> {
    private int value;

    @Override
    public boolean equals(Object o) {
        return o instanceof MyClass && ((MyClass)o).value == this.value;
    }

    @Override
    public boolean isGreaterThan(MyClass other) {
        return this.value > other.value;
    }

    @Override
    public boolean isLessThan(MyClass other) {
        return this.value < other.value;
    }
} 
```

这绝不是真正的运算符重载，因为，你并没有重载运算符。然而，它确实提供了以相同方式比较对象的能力。

# html - 帮助查看器缓存文件在哪里？Mac Help Viewer 不显示最新版本的 HTML 文件。这工作了几个星期。怎么了？

> ID：13542462
> 
> 赞同：5
> 
> 时间：2012-11-24T15:07:22.140
> 
> 标签：html, macos, help-viewer

Xcode 4.5.2 山狮，Mac 应用程序

我严格按照文档进行。帮助文件夹及其子文件夹被添加到项目/资源文件夹并显示为蓝色。

如有必要，xcode 添加了文件夹引用。

无论我是在 Xcode 中还是在外部文本编辑器中查看 HTML 文件，我都会看到文件的新版本。

在应用程序内部，帮助页面全部显示，锚点工作，但页面是旧版本。

最新版本中未显示的特定文件是 DgxFiles.html 它位于以下方案中，为 ../pgs/DgxFiles.html。

当我在应用程序中访问帮助时，我看到了旧版本的 HTML 文件。旧的帮助文件似乎缓存在某处。

App的Info.plist有

```
<key>CFBundleHelpBookFolder</key>
<string>HungryMeHelp</string>
<key>CFBundleHelpBookName</key>
<string>com.DrummingGrouse.HungryMe.help</string> 
```

登陆页面，HungryMe.html 有：

```
<meta name="AppleTitle" CONTENT="com.DrummingGrouse.HungryMe.help"/> 
```

我拖入项目的文件夹命名为：HungryMeHelp

帮助文件夹结构为：

```
HungryMeHelp/
    Contents/
    Info.plist
    Resources/
    shrd/ <shared artwork>
    English.lproj/
        HungryMe.html <title page>
        HungryMe.helpindex
            pgs/ <the rest of the content pages>
            sty/ <style sheets, generated list template>
            scrpt/ <scripts> 
```

我有：

```
 0\. Deleted /HungryMeHelp and re-added it.
 1\. Cleaned the project.
 2\. Reloaded Xcode
 3\. Rebooted Mac 
```

在 Home > Library > Preferences 文件夹中删除以下文件

```
com.apple.help.plist
com.apple.helpui.plist
com.apple.helpviewer.plist 
```

在您的主页 > 库 > 缓存文件夹中删除以下文件夹

```
com.apple.helpui folder
com.apple.helpdata
com.apple.helpd
com.apple.helpviewer 
```

我错过了什么？

谢谢阅读。标记

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-25T02:40:41.117

我在这里找到了 Apple Help Viewer Cache 问题的答案：

[http://www.cocoabuilder.com/archive/cocoa/312037-updating-an-app-help.html](http://www.cocoabuilder.com/archive/cocoa/312037-updating-an-app-help.html) [http://macergun.blogspot.com/2011/06/dealing-with-help-viewer-cache.html](http://macergun.blogspot.com/2011/06/dealing-with-help-viewer-cache.html)

我在 cocoabuilder.com 上找到了以下帖子结果，我从系统中删除了该应用程序的现有副本。帮助系统随即更新！

* * *

2011 年 12 月 13 日下午 5:17，Graham Cox 写道：

> 随着我们应用程序的每次更新，我们通常会更改帮助手册。我们发现系统在识别这一点方面非常差，并且会缓存旧版本的帮助，这会导致我们添加的新内容不可用。虽然我可以手动删除帮助缓存并强制更新，但这不是我们可以要求或期望我们的用户的事情。

搜索档案，您会发现您可能遇到了一个已经存在很长时间的众所周知的问题。它通常只影响开发人员，而不影响您的用户。如果另一个旧版本的应用程序仍在您的计算机上，在 Applications 文件夹中，或者可能以仍然存在的早期构建产品的形式存在，那么开发人员会特别恼火，因为这样会破坏帮助缓存并强制更新不一定会阻止系统在旧版本的应用程序中使用旧版本的帮助文件夹。

当我处理我的帮助文件夹时，我会定期将所有旧版本的应用程序压缩到 zip 文件中，并在每次测试之前删除帮助缓存。

典型用户在安装新版本时会丢弃旧版本的应用程序，一切都很好。

--

比尔·奇斯曼——

# javascript - 一页网站，显示/隐藏 div，菜单按钮不会保持选中状态

> ID：13542464
> 
> 赞同：4
> 
> 时间：2012-11-24T15:07:30.743
> 
> 标签：javascript, jquery, css

我正在尝试制作一个带有菜单（图片、css 翻转...）的单页网站，当单击每个菜单按钮时，它将显示不同的 div。但是，一次只会显示一个 div，如果一个已经打开，它应该被隐藏。这运作良好。

我遇到的问题是显示结果的菜单按钮不会保持选中状态，即在与翻转（悬停）相同的图片上。

**HTML：**

```
<ul class="menu">
    <li class="home"><a href="javascript:showHide('content1');" title="Home"><span class="displace"></span></a></li>
    <li class="credits"><a href="javascript:showHide('content2');" title="Credits"><span class="displace"></span></a></li>
    <li class="idea"><a href="javascript:showHide('content3');" title="Idea"><span class="displace"></span></a></li>
</ul>

<div id="content1">home text</div>
<div id="content2">credits text1</div>
<div id="content3">idea text</div>​ 
```

**JS / jQuery :**

```
function showHide(d)
{
var onediv = document.getElementById(d);
var divs=['content1','content2','content3'];
for (var i=0;i<divs.length;i++)
  {
  if (onediv != document.getElementById(divs[i]))
    {
    document.getElementById(divs[i]).style.display='none';
    }
  }
onediv.style.display = 'block';
}

$(function stay() {
    $('menu').click(function stay() {
            $('menu').removeClass('selected');
            $(this).addClass('selected');

    });
});
​ 
```

演示：http: [//jsfiddle.net/anKT3/159/](http://jsfiddle.net/anKT3/159/)

我尝试创建一个函数来更改类，但我没有任何运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T15:14:02.557

这是[JS小提琴](http://jsfiddle.net/anKT3/161/)

```
$(function stay() {
    $('ul.menu li a').click(function () {
            $('ul.menu li a').removeClass('selected');
            $(this).addClass('selected');

    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T15:21:14.150

将您的功能更改`stay()`为如下：

```
$(function stay() {
    $('.menu li a').click(function stay() {            
            $('.menu li a').removeClass('selected');
            $(this).addClass('selected');                        
    });
}); 
```

# c++ - 我可以使用字符串流作为 C# 中的“MemoryStream”之类的内存流吗？

> ID：13542468
> 
> 赞同：9
> 
> 时间：2012-11-24T15:08:21.073
> 
> 标签：c++, stringstream

在 C/C++ 中，字符串以 NULL 结尾。

我可以`stringstream`像`MemoryStream`在 C# 中那样用作内存流吗？

内存流的数据可能`\0`在数据中间有值，但 C++ 字符串以 NULL 结尾。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-24T16:16:08.250

在 a 中存储字符序列时，`std::string`您可以包含空字符。相应地， a`std::stringstream`也可以处理嵌入的空字符。但是，流上的各种格式化操作不会通过空字符。此外，当使用内置字符串将值分配给`std::string`空字符时，这很重要，即，您需要使用各种重载，将字符序列的大小作为参数。

你到底想达到什么目的？可能有比在字符串流中旅行更简单的方法。例如，如果您想读取流接口以与内存缓冲区进行交互，那么自定义流缓冲区真的很容易编写和设置：

```
struct membuf
    : std::streambuf 
{
        membuf(char* base, std::size_t size) {
        this->setp(base, base + size);
        this->setg(base, base, base + size);
    }
    std::size_t written() const { return this->pptr() - this->pbase(); }
    std::size_t read() const    { return this->gptr() - this->eback(); }
};

int main() {
    // obtain a buffer starting at base with size size
    membuf       sbuf(base, size);
    std::ostream out(&sbuf);
    out.write("1\08\09\0", 6); // write three digits and three null chars
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-24T17:39:22.133

> 在 C/C++ 中，字符串以 NULL 结尾。

*   两种完全**不同的**语言（在语法上有一些共同点）。但是 C 与 C++ 的接近程度与 Jave 与 C# 的接近程度一样（因为它们是不同的）。

每种语言都有自己的字符串特征。

*   C 使用一个字节序列，按照惯例以 '\0' 字节终止。
    *   通常称为 C 字符串。
    *   这个内存区域没有什么特别之处，它只是一个字节序列。
    *   没有强制执行约定，也没有标准的构建方式。
    *   这是 C 程序中存在大量错误的地方。
*   C++ 使用一个类（带有方法）std::string。

> 我可以使用 stringstream 作为 C# 中的 MemoryStream 之类的内存流吗？

当然。内存流是由内存（而不是文件）支持的流。这正是 std::stringstream 是什么。界面有一些差异，但这些差异很小，使用文档应该很容易解决任何混淆。

> 内存流的数据可能在数据中间有 \0 值，但 C++ 字符串以 NULL 结尾。

这是完全不正确的。

*   C-String 以 '\0' 结尾。
*   C++ std::string 不是空终止的，可以包含**任何字符**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T15:22:06.443

C 和 C++ 是两种不同的语言，在 C 中连续字符的序列表示字符串，您可以将其视为可以设置/获取其值的内存部分，使用`memcpy()`, `memset()`, `memcmp()`.

在 C++ 中，字符串是指用于获取正确数据的一类信息作为字符串。因此，您不能将其视为具有`char`类型的内存位置序列。

# php - file_get_contents 的 json_encode 问题

> ID：13542474
> 
> 赞同：0
> 
> 时间：2012-11-24T15:09:07.147
> 
> 标签：php, json

我有一个包含以下内容的 .json 文件：

```
{ "questions": "reponse" } 
```

我想将文件的内容解析成一个 PHP 数组，但我有一个奇怪的问题......

```
$path = 'myFile.json';
echo file_get_contents($path); 
echo var_dump(json_decode(file_get_contents($path), true));
echo var_dump(json_decode(utf8_encode(file_get_contents($path), true)));
$json = '{ "questions": "reponse" }';
echo var_dump(json_decode($json, true)); 
```

我屏幕上的结果是：

```
{ "questions": "reponse" }
null
null
array (size=1)
  'questions' => string 'reponse' (length=7) 
```

文件中的字符串和我程序中的字符串有什么区别？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T15:12:18.603

尝试运行此代码：

```
var_dump(json_decode(trim(file_get_contents($path)), true)); 
```

我希望有一些空格（如 BOM/UTF-8 标头）会造成麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T15:13:30.633

`utf8_encode()`只接受一个参数。你通过两个。一旦它被修复它应该工作：

```
{ "questions": "reponse" }
array(1) {
  ["questions"]=>
  string(7) "reponse"
}
object(stdClass)#1 (1) {
  ["questions"]=>
  string(7) "reponse"
}
array(1) {
  ["questions"]=>
  string(7) "reponse"
} 
```

# vim - 使用 tabularize 插件根据空格对齐 vim 中的文本

> ID：13542478
> 
> 赞同：4
> 
> 时间：2012-11-24T15:09:52.130
> 
> 标签：vim

我正在尝试使用[tabularize](https://github.com/godlygeek/tabular)在 vi​​m 中对齐以下文本：

```
typedef struct {
    int a;
    int *pa;
    float b;
    float *pb;
    double c;
    double *pc;
} foo_t; 
```

对此：

```
typedef struct {
    int    a;
    int    *pa;
    float  b;
    float  *pb;
    double c;    /* notice there's only one space between 'double' and 'c' */
    double *pc;
} foo_t; 
```

我尝试使用，但它在和`:'<,'>Tab/.*\s`之间留下了两个空格。我怎样才能做到这一点？`double``c`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-24T17:44:56.453

你可以使用这个命令：

```
:'<,'>Tabularize /\S\+;$/l1 
```

*   `/\S\+;$/`模式： make `a;`, `*pa;`...`*pc;`作为列分隔符。
*   `l1`标志：使每列`left`对齐并`one`在其后留出空格。（这里不需要，因为这是默认行为）

# r - 如何在用户放大和缩小时自动调整大小的散点图中绘制数据点？

> ID：13542480
> 
> 赞同：2
> 
> 时间：2012-11-24T15:10:22.180
> 
> 标签：r, svg, autoresize, scatter-plot, zooming

> **可能重复：**
> [在缩放父元素时保留后代元素的大小](https://stackoverflow.com/questions/8880668/preserve-descendant-elements-size-while-scaling-the-parent-element)

我有一个带有一千个点的散点图（使用 RSVGTipsDevice 创建的 SVG 图像），如果用户放大，我想减小每个数据点的大小，以便在放大时数据点之间的间隔增加。

[此处](http://tinyurl.com/bnpfk7o "这里")为 SVG 散点图示例。

编辑：用于创建上述 SVG 散点图的代码

```
library(scatterplot3d)
library(RSVGTipsDevice)
devSVGTips(file="Test.svg", toolTipMode=1, onefile=FALSE, title="plot")
s3d<-scatterplot3d("x","y","z", xlim=c(0,10), ylim=c(0,10), zlim=c(0,10))
k<-c(1:1000)
sapply(k,function(k){setSVGShapeToolTip(title=k)
myHyperLink1<-paste("http://www.wikipedia.org/wiki/", k , sep="")
setSVGShapeURL(myHyperLink1, "_blank") 
s3d$points3d(runif(1, 0, 10),runif(1, 0, 10),runif(1, 0, 10), pch=16, cex=1, col="green")})
dev.off() 
```

# c++ - 确定进程的输入线程 ID

> ID：13542486
> 
> 赞同：2
> 
> 时间：2012-11-24T15:11:43.257
> 
> 标签：c++, windows, winapi

有谁知道确定进程输入线程的方法？

场景是我想调用[GetKeyboardLayout](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646296%28v=vs.85%29.aspx)，从单独的应用程序（可以是任何程序）中传入输入线程 ID。每个线程都可以有自己的键盘输入语言集，但是为另一个进程找到合适的输入线程 ID 似乎是不可能的。

例如，我创建了一个函数，向其中传递记事本的进程 ID，该函数在内部确定输入线程 ID，并从 GetKeyboardLayout 返回值。然后，此函数的调用者将在屏幕上显示为记事本选择的输入语言。

各位好心人有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T16:12:55.260

Windows 不需要进程具有与用户交互的特定线程。它不一定是进程的启动线程，尽管它经常是。它并不将程序限制为单个线程，尽管它通常只使用一个线程。

您需要首先找到窗口。使用 FindWindow、FindWindowEx 或 EnumWindows 等 api 函数。一旦你知道了，你可以用 GetWindowThreadProcessId() 找出哪个线程拥有窗口。注意工作线程可能创建的隐藏帮助窗口。Spy++ 是您的基本调试工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T16:24:38.623

你可以试试，它会遍历所有顶层窗口并搜索属于 process-id 的窗口：

```
// complle and link with: cl layout.cxx user32.lib
#include <windows.h>
#include <stdio.h>
#include <assert.h>
DWORD desiredProcId;
BOOL CALLBACK enumCallBack(HWND hwnd, LPARAM lParam) {
  DWORD procId;
  DWORD winThread=GetWindowThreadProcessId(hwnd, &procId);
  if (procId==desiredProcId) {
    HKL hkl=GetKeyboardLayout(winThread);
    char buf[1000];
    GetWindowText (hwnd, buf, sizeof(buf));
    printf ("hwnd=%x name=%s, winThread=%x, HKL=%x\n", hwnd, buf, winThread, hkl);
    return false;
  }
  return true; 
}
int main (int argc, char *argv[]) {
  if (argc==1) {
    printf ("usage: %s processId (in decimal like from taskmanager)\n", argv[0]);
  }
  else {
    sscanf (argv[1], "%d", &desiredProcId);
    EnumWindows (enumCallBack, 0);
  }
} 
```

# c++ - C++ 动态大小数组

> ID：13542487
> 
> 赞同：1
> 
> 时间：2012-11-24T15:11:55.347
> 
> 标签：c++, arrays, char

我需要你对 C/С++ 数组的帮助。我已经用 Python 编程三年了，它的数组（称为`list`）很容易使用。

```
>>> array = [1,2,3,4]
>>> array.append(5)
>>> array
[1,2,3,4,5] 
```

正如我在 C/C++ 中所读到的，我需要创建一个指向数组的指针。请您制作一个类的小草图，其中包含数组`char`并且只有一个方法 append，它被调用`append`并接收 a`char`作为参数。此方法将数组的大小增加 1 并将给定的值添加`char`到该数组中。

有人可能会认为这是一个功课，但我就是无法理解数组、指针和内存分配的工作原理。我想这并不难，但在 Python 之类的语言之后就很难了，因为我不关心 Python 中的这些东西。请您提供一小段带有解释的代码吗？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T15:18:11.890

这是一个标准的 C++ 程序：

```
#include <iostream>
#include <vector>
using namespace std;

int main()
{
    vector<int> array = {1, 2, 3, 4};
    array.push_back( 5 );

    for( auto const item : array )
    {
        cout << item << " ";
    }
    cout << endl;
} 
```

* * *

*Visual C++ 特定。*

即使是 Microsoft 的 Visual C++ 的最新版本，即[2012 年 11 月的 CTP](http://blogs.msdn.com/b/vcblog/archive/2012/11/02/visual-c-c-11-and-the-future-of-c.aspx)，它是 11.0 版，其中包含许多支持 C++11 标准的修复程序，还不支持上面使用的一般初始化。

在 Visual C++ 中，就像在 C++03 中一样，这种表示法仅支持所谓的**聚合类型**，它们本质上是纯原始数组或纯原始结构（可能包含更多 C++'ish 类型）或内置类型。因此，使用 Visual C++ 的一种方法是使用该符号表示*原始数组*，然后使用该原始数组初始化`vector`：

```
#include <iostream>
#include <iterator>     // std::begin, std:.end
#include <vector>
using namespace std;

int main()
{
    int const   data[]  = {1, 2, 3, 4};
    vector<int> array( begin( data ), end( data ) );
    array.push_back( 5 );

    for( auto const item : array )
    {
        cout << item << " ";
    }
    cout << endl;
} 
```

这也与 Visual Studio 2012 附带的基本 Visual C++ 11.0 一起编译得很好。

但是，基于范围的`for`循环可能无法使用 Visual C++ 10.0（对应于 Visual Studio 2010）进行编译。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T15:14:56.997

C 和 C++ 是不同的语言。

在现代 C++ 中，您通常不使用原始数组，但例如[std::vector](http://www.cplusplus.com/reference/vector/vector/)为您提供[push_back](http://www.cplusplus.com/reference/vector/vector/push_back/)成员函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T15:16:07.397

在 C++ 中，通常从不使用原始（C 风格）数组，而是使用容器，如`std::vector`（动态大小）或`std::array`（固定大小，在 C++11 中）。通过这些实现，您的`array`类是直截了当的（尽管您没有指定访问元素的方法，所以非常不可用）。

```
class array {
    std::vector<char> v_;
  public:
    void append(char c) {
      v_.push_back(c);
    }
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T17:08:30.680

C 和 C++ 中的术语数组都用于表示包含一个或多个**相同类型**的数据元素的连续内存块。

数组有两种类型：静态数组和动态数组。静态数组是在编译程序时在内存中分配的，并存储在程序的数据段中。顾名思义，动态数组是在运行时从堆（用于访问程序可用于动态分配的内存的数据结构）分配的。

使用指针和索引器（[] 运算符）以相同的方式访问这两种数组类型。

在 C 和 C++ 中，指针都是指向内存中某个位置的变量。它指向的内存可能包含一个类或原始数据类型。

然而，静态数组和动态数组之间存在差异。以下是重要的：

1.  必须分配动态数组以使用它们并释放它们以防止内存泄漏
2.  静态数组无法调整大小

在 C 中，您使用 分配内存`malloc`并使用`free`. 您可以使用调整它的大小`realloc`

在 C++ 中，您使用 分配内存`new`并使用`delete`. 您必须编写自己的代码来调整它的大小。

对于大多数用途，C++ 中的动态数组将使用`std::vector`. 在 C 中，如果你想要这样的机制，你将不得不自己动手。你从**@Cheers 和hth 那里得到了很好的回答。- 阿尔夫**开`std::vector`。

我不认为这是用 C 或 C++ 编写有关动态内存的完整教程的地方。[你可以从http://www.cplusplus.com/doc/tutorial/dynamic/](http://www.cplusplus.com/doc/tutorial/dynamic/)得到很好的介绍

然而，这里有一个示例代码，它将向您展示如何在 C 中做您想做的事情。对于 C++ 使用`std::vector`。

```
/*
C CODE
*/

#include <stdlib.h>
#include <limits.h>

typedef struct DARRAY dynamic_int_array_t;

typedef struct DARRAY
{
    int length;
    int *data;
    void (*alloc)(dynamic_int_array_t * the_array, int length);/*allocate*/
    void (*free)(dynamic_int_array_t * the_array);/*free*/
    void (*resize)(dynamic_int_array_t * the_array, int new_length);/*resize*/
    void (*append)(dynamic_int_array_t * the_array, int new_value);
    int (*get_at)(dynamic_int_array_t * the_array, int pos);/*use 1 based index getter*/
    void (*set_at)(dynamic_int_array_t * the_array, int pos, int value);/*use 1 based index setter*/
}dynamic_int_array_t;

void allocIntArray(dynamic_int_array_t * the_array, int length)
{
    /*
    Allocate memory to contain length number of integers
    */
    the_array->data = (int*)malloc(length*sizeof(int));
    the_array->length = length;
}

void freeIntArray(dynamic_int_array_t * the_array)
{
    if(NULL != the_array->data)
        free(the_array->data);/*Free the memory*/
    the_array->length = 0;/*Reset the length of the array*/
}

void resizeIntArray(dynamic_int_array_t * the_array, int new_length)
{
    if(NULL != the_array->data && the_array->length > 0 && new_length >= 0)
    {

        if(new_length == 0)/*Free the array if a value of 0 was requested*/
            the_array->free(the_array);
        else
        {
            /*Resize the memory block*/
            the_array->data = (int*)realloc(the_array->data, new_length*sizeof(int));
        }
        the_array->length = new_length;
    }
}

void appendIntArray(dynamic_int_array_t * the_array, int new_value)
{   
    the_array->resize(the_array, the_array->length + 1);
    the_array->data[the_array->length - 1] = new_value;
}

int getAt(dynamic_int_array_t * the_array, int pos)
{
    if(NULL != the_array->data && pos > 0 && pos <= the_array->length)
        return the_array->data[pos-1];
    return INT_MIN;/*use INT_MIN to indicate error*/
}

void setAt(dynamic_int_array_t * the_array, int pos, int value)
{
    if(NULL != the_array->data && pos > 0 && pos <= the_array->length)
        the_array->data[pos-1] = value;
}

int main(int argc, char **argv)
{
    dynamic_int_array_t int_array = 
    {
        0,
        NULL,
        allocIntArray,
        freeIntArray,
        resizeIntArray,
        appendIntArray,
        getAt,
        setAt       
    };

    int_array.alloc(&int_array, 4);
    int_array.data[0] = 1, int_array.data[1] = 2,
        int_array.data[2] = 3, int_array.data[3] = 4;
    printf("array length: %d, last member: %d\n", int_array.length, int_array.get_at(&int_array,4));
    int_array.resize(&int_array, 5);
    int_array.data[4] = 5;/* can also use int_array.set_at(&int_array,5) = 5; */
    printf("array length: %d, last member: %d\n", int_array.length, int_array.get_at(&int_array,5));
    int_array.append(&int_array, 6);
    printf("array length: %d, last member: %d\n", int_array.length, int_array.get_at(&int_array,5));
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-24T15:15:51.610

数组不能改变大小。但是，您可以在 C++ 中使用列表

[http://www.cplusplus.com/reference/list/list/](http://www.cplusplus.com/reference/list/list/)

# ios - NSNotification 不起作用

> ID：13542492
> 
> 赞同：0
> 
> 时间：2012-11-24T15:12:37.577
> 
> 标签：ios, xcode

我一直在努力`NSNotification`工作。对于测试，我想要一个使用storyBoards 加载新viewController 的按钮。当您单击该按钮时，它应该会触发 appObserver 的通知，以便在第二个 ViewController（我已命名为 Page2）中获取。在 Page2 中`NSNotificationCenter`应该启动一个方法 (myMethod:) 并打印出一个简单的`NSLog`. 不幸的是，它不起作用，因为 myMethod 没有被调用。我究竟做错了什么 ？？？

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

- (IBAction)goToPage2Button:(id)sender {

    [[NSNotificationCenter defaultCenter] postNotificationName:@"test" object:nil];

}

#import "Page2.h"

@interface Page2 ()

@end

@implementation Page2

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{

    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
       [[NSNotificationCenter defaultCenter]addObserver:self selector:@selector(myMethod:) name:@"test" object:nil];

    }
    return self;
}

-(void)myMethod:(NSNotification *)notification{

    if ([[notification name] isEqualToString:@"test"])
        NSLog (@"Successfully received the test notification!");

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T15:29:54.363

当你使用storyboards时，`initWithNibName`一般不会调用。它使用`initWithCoder`. 您确定您正在处理添加观察者的那行代码吗？

如果您遇到看起来某行代码没有被调用的行为，那么最好在此处放置一个断点或 a`NSLog`并确认它确实如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T15:19:06.190

我认为这可能是因为触发通知时您的 page2 视图控制器不存在。

第二个视图控制器在从它的 nib 唤醒时注册观察，但如果它还没有被创建，那么它还没有注册你的第一个视图控制器正在发送的通知。

您应该做的是使用 segues 根据操作加载视图控制器。

# cakephp - CakePHP 2.2 saveAll 多模型验证

> ID：13542493
> 
> 赞同：3
> 
> 时间：2012-11-24T15:12:43.387
> 
> 标签：cakephp, cakephp-2.2

我正在尝试在 saveAll 上验证多个模型。第一个模型中的验证正在被触发，但是当涉及到相关模型时，似乎什么都没有发生。我什至尝试通过退出来检查 beforeValidate() 和 beforeSave() 方法是否被调用；在它们中，但代码继续正常执行。

联系方式型号：

```
<?php
class ContactDetails extends ContactAppModel {  
    public $actsAs = array("MapValidate");
    public $hasMany = array(
        'ProjectLocation' => array(
            'className'     => 'ProjectLocation',
            'foreignKey'    => 'project_id'
        )
    );

    public $validate = array(
        'name' => array(
            'required' => array(
                'rule' => array('notEmpty'),
                'message' => 'Contact name is required'
            )
        ),
        'address1' => array(
            'required' => array(
                'rule' => array('notEmpty'),
                'message' => 'Contact address 1 is required'
            )
        ),
        'email' => array(
            'required' => array(
                'rule' => array('notEmpty'),
                'message' => 'Contact email is required'
            ),
            'email' => array(
                'rule' => array('email'),
                'message' => 'Contact email format is not valid'
            )
        )
    );
} 
```

项目位置模型：

```
<?php
class ProjectLocation extends ContactAppModel {
    public $actsAs = array("MapValidate");
    public $belongsTo = array(
        "ContactDetails" => array(
            "className" => "ContactDetails",
            "foreignKey" => "project_id"
        );
    );

    public $validate = array(
        'lat' => array(
           'checkLocation' => array(
                'rule'    => array('checkMap', 'lat'),
                'message' => 'One or more positions on the map are invalid.'
            )
        )
    );  
} 
```

这是我要保存的 $this->request->data ：

```
Array
(
    [ContactDetails] => Array
        (
            [id] => 1
            [name] => PreeoStudios
            [address1] => 4, Stivala Street
            [address2] => Mosta, MST 3205
            [address3] => Malta
            [telephone] => 34562737
            [email] => info@preeostudios.com
            [fax] => N/A
            [skype] => N/A
        )

    [ProjectLocation] => Array
        (
            [0] => Array
                (
                    [lat] => 35.886277456343024
                    [lon] => 14.428907312499973
                )

            [1] => Array
                (
                    [lat] => 35.886277456343024
                    [lon] => 14.528907312499973
                )

        )

) 
```

saveAll 调用：

```
$this->ContactDetails->saveAll($this->request->data, array('validate' => 'first')) 
```

*编辑*

我还尝试从关联模型中删除验证规则，并在 beforeSave 函数中放置一个出口......代码只是继续执行

```
<?php
class ProjectLocation extends ContactAppModel {
    public $actsAs = array("MapValidate");
    public $belongsTo = array(
        "ContactDetails" => array(
            "className" => "ContactDetails",
            "foreignKey" => "project_id"
        );
    );

    public function beforeSave(){
        exit;
    }

    public $validate = array(

    );  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-14T17:00:42.620

You can get validation result for multiply models using saveAll:

```
$validate = $this->Model->saveAll($this->request->data, array('validate' => 'only')); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T10:18:18.657

尝试深度添加选项：

```
$this->ContactDetails->saveAll($this->request->data, array('validate' => 'first', 'deep' => true)) 
```

来自：[http ://book.cakephp.org/2.0/en/models/saving-your-data.html#model-saveassociated-array-data-null-array-options-array](http://book.cakephp.org/2.0/en/models/saving-your-data.html#model-saveassociated-array-data-null-array-options-array)

# c# - 需要帮助为 Where 子句创建表达式树

> ID：13542496
> 
> 赞同：2
> 
> 时间：2012-11-24T15:13:00.200
> 
> 标签：c#, linq-to-entities, expression-trees

我需要创建一个表达式树，我可以将它作为子句中的`predicate`参数传递`Where`给 Linq To Enities 查询。

```
public static IQueryable<TSource> Where<TSource>(this IQueryable<TSource> source,
    Expression<Func<TSource, bool>> predicate); 
```

表达式树必须等同于如下指定的 where 子句：

```
var query = context.Products.Select(product => 
    new { product.Name, product.Color });

var arr = "Red;Black".Split(';');
query = query.Where(obj => arr.Contains(obj.Color)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T15:59:57.000

谷歌了！

```
var paramExpr = Expression.Parameter(typeof(TSource), "src");
var memberExpr = (MemberExpression)property.Body;

List<Expression> arrayInits = new List<Expression>();

var arrExpr = Expression.Constant(((string)values[0]).Split(new char[] { ';' }));

MethodInfo containsMethod = typeof(ICollection<string>).GetMethod("Contains");

var containsExpression = Expression.Call(null, contains, arrExpr, memberExpr);
var containsLambda = Expression.Lambda<Func<TSource, bool>>(containsExpression, property.Parameters); 
```

它有效！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T16:09:29.600

```
public static Expression<Func<T, bool>> CreateContainsExpression<T>(T obj, string[] array)
{
    var paramExpr = Expression.Parameter(typeof(T), "obj");
    var arrExpr = Expression.Constant(array);

    var colourPropExpr = Expression.Property(paramExpr, "Color");
    MethodInfo containsMethod = typeof(ICollection<string>).GetMethod("Contains");

    var containsExpr = Expression.Call(arrExpr, containsMethod, colourPropExpr);
    return Expression.Lambda<Func<T, bool>>(containsExpr, paramExpr);
} 
```

# javascript - 节元素的jQuery不一致加载

> ID：13542497
> 
> 赞同：0
> 
> 时间：2012-11-24T15:13:01.360
> 
> 标签：javascript, jquery

我的页面中有多个部分，每个部分都有自己的 ID。当页面加载后，我试图从控制器中为每个视图加载真实视图，并按照下面的示例代码将其放入该部分。

但是，每当我刷新页面时，我发现有时内容会到达，有时不会。所以有时我对他们所有人都有内容，然后只有 2 或 3 个，然后对他们所有人等等。我做错了什么？从 Controller 返回的数据只是一小部分 html。

索引.cshtml

```
<table class="table1">
    <tr>
        <td colspan="2"><section id="id1" class="ctrl1 mainPanel"></section></td>
        <td colspan="2"><section id="id2" class="ctrl2 mainPanel"></section></td>
    </tr>
    <tr>
        <td colspan="2"><section id="id3" class="ctrl3 mainPanel"></section></td>
        <td><section id="id4" class="ctrl4 mainPanel"></section></td>
        <td><section id="id5" class="ctrl5 mainPanel"></section></td>
    </tr>
</table>

@section scripts {
     <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.js"></script>
    <script src="http://code.jquery.com/ui/1.9.1/jquery-ui.js"></script>

     <script>

         $(document).ready(function () {

             $("#id1").load("/MyController/GetData1");
             $("#id2").load("/MyController/GetData2");
             $("#id3").load("/MyController/GetData3");
             $("#id4").load("/MyController/GetData4");

         });

    </script> 
```

来自 MyController：

```
public ActionResult GetData1()
{
    String s = "<b>Section 1 header</b><br><br>";
    s += "<ul><li>3 appointments</li><li>2 tasks</li></ul>";
    return Content(s);
} 
```

ETC...

# r - 使用 ggplot ggsave 将文本保存为曲线

> ID：13542509
> 
> 赞同：1
> 
> 时间：2012-11-24T15:15:20.133
> 
> 标签：r, pdf-generation

以下代码将在`PDF`文件中创建一个绘图

```
library(ggplot2)

ggplot(data=mtcars, aes(x=cyl, y=hp))+
  geom_point() +
ggsave(filename="test1.pdf") 
```

只有很少的字符，但只要不是曲线，它们就很脆弱。我想保留外观。

```
$ pdffonts test1.pdf 
name                                 type              emb sub uni object ID
------------------------------------ ----------------- --- --- --- ---------
ZapfDingbats                         Type 1            no  no  no      10  0
Helvetica                            Type 1            no  no  no      11  0 
```

如何将文本和符号转换为曲线？

```
running R 2.15 on debian squeeze 
```

[图片解释文本到曲线的](http://blog.echoenduring.com/wp-content/uploads/2010/12/text-vs-curves.jpg)含义

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T17:03:42.027

[从https://tex.stackexchange.com/questions/27327/how-to-convert-text-in-a-pdf-file-from-fonts-text-to-outlines](https://tex.stackexchange.com/questions/27327/how-to-convert-text-in-a-pdf-file-from-fonts-text-to-outlines)复制：我调用了这个脚本`pdfsquash`

```
#!/bin/sh

if [ "x$1" = "x" -o "x$2" = "x" ]; then
    echo Usage: `basename "$0"` "<input.pdf>" "<output.pdf>" >&2
    exit 1
fi
gs -sDEVICE=pswrite -dNOCACHE -sOutputFile=- -q \
   -dbatch -dNOPAUSE -dQUIET "$1" -c quit | ps2pdf - "$2" 
```

我运行了你的代码，然后（在 R 之外，虽然你也可以使用`system()`）：

```
pdfsquash test1.pdf test1S.pdf 
```

原本的：

```
pdffonts test1.pdf
name                                 type              emb sub uni object ID
------------------------------------ ----------------- --- --- --- ---------
ZapfDingbats                         Type 1            no  no  no      10  0
Helvetica                            Type 1            no  no  no      11  0 
```

新的：

```
pdffonts test1S.pdf
name                                 type              emb sub uni object ID
------------------------------------ ----------------- --- --- --- --------- 
```

# objective-c - 将 UITextView 存储到核心数据中

> ID：13542511
> 
> 赞同：0
> 
> 时间：2012-11-24T15:15:31.827
> 
> 标签：objective-c, core-data, uitextview, textfield

我有一个应用程序将 UITextView 中的文本添加到核心数据中。但是核心数据条目是一个“字符串”，所以它只将 UITextView 的第一行保存到核心数据库中。

我该如何解决？我想将 UITextView 中的所有文本保存到核心数据库中。

不幸的是，来自 Apple 的 CoreRecipes 示例项目不再起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T15:44:59.490

它保存了所有文本——你一定是错的。如果您查看它，则 DB 符号/换行符是 '\n'

# java - 在 Android 中检查 Typeface 对象的系列

> ID：13542513
> 
> 赞同：4
> 
> 时间：2012-11-24T15:15:51.763
> 
> 标签：java, android, typeface

是否可以检查[字体](http://developer.android.com/reference/android/graphics/Typeface.html)对象在 Android API 8 中使用的系列？

我正在像这样在 Paint 对象上创建字体

```
//Simplified code, the user actually selects the family and style from a list
Paint paint = new Paint();
paint.setTypeface(Typeface.create(Typeface.SANS_SERIF, Typeface.BOLD)); 
```

我以后希望能够像这样检查家庭

```
Typeface tf= paint.getTypeface();

if (tf.equals(Typeface.DEFAULT) || tf.equals(Typeface.DEFAULT_BOLD)) {
    //do something
} else if (...) {
    //do something else
} 
```

这不起作用，因为它们不是同一个对象，我也尝试过`tf == value`，但结果还是一样。Typeface 对象似乎没有公开任何有助于家庭检测的有用信息，是否有解决方法？我只需要检测基本的 Android 字体（SERIF、SANS-SERIF、DEFAULT、MONOSPACE 等）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T15:27:25.430

不轻易。该系列的关键是 a `native_instance` `int`，它是包私有的，不直接公开，正如您在[源代码](https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/graphics/java/android/graphics/Typeface.java)中看到的那样。

获取该信息的方法有很多种，它们可能适用于所有设备以及所有过去/现在/未来版本的 Android，也可能不适用。

`Typeface`也许您可以围绕跟踪此信息创建自己的包装器对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T15:27:33.260

如果您查看源代码，您会看到默认的源代码是使用样式`DEFAULT`(*) 创建的，因此：

```
Typeface paintTf = paint.getTypeface();
Typeface.SERIF.equals(Typeface.create(paintTf, Typeface.DEFAULT)); 
```

可能会完成这项工作（在这里我检查的是家庭是衬线）。

注意： (*) 不适用于 DEFAULT_BOLD。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-03T21:02:19.830

我建议您[使用 Resources 中的字体](https://developer.android.com/guide/topics/ui/look-and-feel/fonts-in-xml)，以便您可以通过 equals() 简单地比较字体

例子：

```
Typeface toCompare = ResourcesCompat.getFont(context, R.font.my_font);
assert tf.equals(toCompare) 
```

# python - Python For循环和数据类型解释请

> ID：13542514
> 
> 赞同：1
> 
> 时间：2012-11-24T15:15:52.790
> 
> 标签：python, string, for-loop, int, user-input

我正在创建一个 python 程序，它根据变量值为网站创建一个 xhtml 表。

请看以下两个代码。第二个不起作用。

```
rows = int(input('How many rows would you like? '))
for i in range(rows):
    print 'lol'

rows = raw_input('How many rows would you like? ')
int(rows)
for i in range(rows):
    print 'lol' 
```

即使我已经正确地说明`rows`变量正在更改为整数，为什么`range`函数不接受这个，并将其视为整数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T15:16:54.980

> 我已经正确声明 rows 变量正在更改为整数

**不**，行没有被更改为整数。仅应用`int(rows)`on`rows`不会将`str`对象更改`rows`为`int`. 但它**返回**一个`integer`对象。

您要么需要将返回值存储在变量中，然后使用它。或者，直接在`range`函数中使用它。

```
int(rows)
for i in range(rows):  // rows used here is still a string 
```

上面的代码应该是： -

```
for i in range(int(rows)): 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T16:10:34.410

**int()**方法不会*就地*修改。相反，它会*返回您指定的参数的修改副本*，而保持参数（行）不变。

```
>>> rows = "45"
>>> i_rows = int(rows)
>>> type(rows)
<type 'str'>
>>> type(i_rows)
<type 'int'> 
```

当您在代码片段的第 6 行中简单地键入**int(rows)**时，结果将返回到堆栈，或者，如果您使用的是[交互式 shell](http://docs.python.org/tutorial/interpreter.html)，则它会立即输出到终端。

# c# - 检查实体是否具有相同的属性

> ID：13542522
> 
> 赞同：0
> 
> 时间：2012-11-24T15:16:55.057
> 
> 标签：c#, entity-framework-4

我有点苦恼，我将在这里描述它。我有一个 foreach 循环，我在表中插入行。但在插入之前，我想检查我是否已经有一行具有相同的 ID，如果是，其他属性（列）是否具有相同的值。

这就是我所做的：

```
var sourceList = LoadFromOtherDataBase();
var res = ListAll(); // Load all rows from database which were already inserted...

foreach (Whatever w in sourceList)
{
   Entry entry = new Entry();

   entry.id = w.id;
   entry.field1 = w.firstfield;
   entry.field2 = w.secondfield;
   //so on...

   //Now, check if this entry was already inserted into the table...

   var check = res.Where(n => n.id == entry.id);

   if (check.Count() > 0)
   {
     var alreadyInserted = res.Single(n => n.id == entry.id);
     //Here, I need to see if 'alreadyInserted' has the same properties as 'entry' and act upon it. If same properties, do nothing, otherwise, update alreadyInserted with entry's values.
   }
   else
   {
      //Then I'll insert it as a new row obviously....
   }

} 
```

**我想到了 Object.Equals() 但 Entity Framework 为alreadyInserted**创建了一个非 null *EntityKey*属性，该属性在**entry**中设置为 null 。我认为这就是为什么它不起作用。*EntityKey*不能设置为 null。

 *****关于如何做到这一点的任何想法，而不必手动检查所有属性（在我的情况下实际上是 25+）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T15:31:16.717

您可以像这样使用反射：

```
/// <summary>
/// Check that properties are equal for two instances
/// </summary>
/// <typeparam name="T"></typeparam>
/// <param name="first"></param>
/// <param name="other"></param>
/// <param name="skipPropeties">A list of names for properties not to check for equality</param>
/// <returns></returns>
public static bool PropertiesEquals<T>(this T first, T other, string[] skipPropeties=null) where T : class
{
    var type = typeof (T);
    if(skipPropeties==null)
        skipPropeties=new string[0];
    if(skipPropeties.Except(type.GetProperties().Select(x=>x.Name)).Any())
        throw new ArgumentException("Type does not contain property to skip");
    var propertyInfos = type.GetProperties()
                                 .Except(type.GetProperties().Where(x=> skipPropeties.Contains( x.Name)));
    foreach (PropertyInfo propertyInfo in propertyInfos)
    {
        if (!Equals(propertyInfo.GetValue(first, null), 
                    propertyInfo.GetValue(other, null)))
            return false;
    }
    return true;
} 
```*****

# php - php从数组中获取特定列的所有值

> ID：13542524
> 
> 赞同：2
> 
> 时间：2012-11-24T15:17:09.253
> 
> 标签：php

```
Array ( [0] => Array ( [No.,"Ticker","Company"] => 
                        1,"A","Agilent Technologies Inc." ) 
        [1] => Array ( [No.,"Ticker","Company" ] => 
                        2,"AA","Alcoa, Inc.") 
      ) 
```

这是我输入 print_r($arrayOne); 时的输出 我该怎么办，我只能得到公司专栏，即 Agilent Technologies Inc 和 Alocoa, Inc.

我尝试了 echo $arrayOne['Company'] 和 $arrayOne[0]['Company'] 但它只输出了'Array'。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T15:20:24.767

你所拥有的是一个带有两个子数组的外部数组，每个子数组只有一个值。它的键是3列的描述，它的值是CSV值。如果您有 PHP 5.3，请使用[`str_getcsv()`](http://php.net/manual/en/function.str-getcsv.php)解析它并返回第三列

```
// Loop over the outer array
foreach ($arrayOne as  $subarr) {
  // Loop over the sub-arrays (though your sample only has one value each)
  // could also use array_pop()
  foreach ($subarr as $key => $csvstring) {
    // $csvstring holds the CSV value like  '1,"A","Agilent Technologies Inc."'
    // Parse it with str_getcsv()
    $cols = str_getcsv($csvstring);
    // Company name is the 3rd value, key [2]
    echo $cols[2] . "\n";
  }
} 
```

例如输入：

```
$arrayOne = array(
  array('No.,"Ticker","Company"' => '1,"A","Agilent Technologies Inc."' ), 
  array('No.,"Ticker","Company"'  => '2,"AA","Alcoa, Inc."') 
);
// The above loop prints:
Agilent Technologies Inc.
Alcoa, Inc. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T15:21:46.267

你的数组应该是这样的：

```
$arrayOne = array(array('no' => 1, 'ticker' => 'A', 'company' => 'Agilent Technologies Inc.'),
                  array('no' => 2, 'ticker' => 'AA', 'company' => 'Alcoa Inc.'));

echo $array[0]['company']; // will print Agilent Technologies 
```

# iphone - 如何检测 WebView 是否在 iPhone 上显示特定网站

> ID：13542529
> 
> 赞同：1
> 
> 时间：2012-11-24T15:17:53.363
> 
> 标签：iphone, xcode, uiwebview, detect

我是 iOS 开发的新手，并尝试制作一个名为的按钮，该按钮`backhome`仅在用户点击我在 loadRequest 中设置的本机网站的更改时才可见。

现在我的问题是：有什么方法可以检测用户是否离开了我在 if 语句中设置的网站？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T15:35:44.270

为您的“”对象设置一个委托`UIWebView`，然后编写一个方法来响应：

[webView:shouldStartLoadWithRequest:navigationType:](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIWebViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIWebViewDelegate/webView%3ashouldStartLoadWithRequest%3anavigationType%3a)

该调用中的请求参数有[一个 URL](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSURLRequest_Class/Reference/Reference.html#//apple_ref/occ/instm/NSURLRequest/URL)，您可以从那里判断用户是否离开了您的默认网站。

# python - Python 空闲和终端导入差异

> ID：13542530
> 
> 赞同：3
> 
> 时间：2012-11-24T15:17:54.207
> 
> 标签：python, terminal, python-idle

我刚开始使用 Python，我有一个关于空闲与终端的问题。

在空闲时，我制作了一个名为 Robot.py 的文件

我有一门叫机器人的课

```
class Robot(object)

    def __init__(self,x,y):
        #some code here etc...

def HelloWorld()
    print "Hello World!" 
```

我有另一个名为 testrobot.py 的文件，它看起来像这样：

```
import Robot
r = Robot(1,4) 
```

在空闲时，我可以在运行 testrobot.py 时成功创建一个 Robot 对象。但是在终端中，它会给出错误消息`NameError: Robot is not defined`

我不确定如何在终端中运行我的程序。

还：

如何`HelloWorld()`在外部文件（例如 testrobot.py）中调用 Robots.py 中的而不是 Robot 类的函数？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T16:01:22.990

当您在 IDLE 中加载和运行脚本时，它们会自动为解释器加载。这意味着只要您在 IDLE 中运行脚本，Python shell 就已经定义了这些类型。

当您想从 IDLE 外部运行它时，即不先运行模块，您需要从该模块导入您的机器人。为此，您导入模块，而不是类型：

```
import Robot
myRobot = Robot.Robot(...) 
```

或者，如果你想`Robot`直接使用，你需要使用`from ... import`语法：

```
from Robot import Robot
myRobot = Robot(...) 
```

同样，您可以通过`Robot.HelloWorld`在第一种情况下使用来调用您的函数，或者`HelloWorld`在第二种情况下直接添加到导入列表中：

```
from Robot import Robot, HelloWorld
myRobot = Robot(...)
HelloWorld() 
```

如您所见，将文件命名为小写通常是个好主意，因为这些是模块名称（或其他语言中的“命名空间”）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T15:59:13.770

您正在尝试创建一个导入类，而不是导入的类。

您正在尝试导入`Robot.py`使用该导入语句调用的文件。要导入您的机器人类，您必须输入`import Robot`然后编写`Robot.Robot(1,4)`以创建它的对象。或者，您可以从文件中导入所有引用：`from Robot import *`然后写入`Robot(1,4)`.

它适用于 IDLE 的原因是它基本上从您运行的文件中导入所有内容，允许您使用该文件中的方法和类。

# android - 我可以模拟 wi-fi 连接来测试 Wi-fi Direct 吗？

> ID：13542531
> 
> 赞同：4
> 
> 时间：2012-11-24T15:18:00.897
> 
> 标签：android, android-wifi

在 API 14 或更高版本 (ICS) 中，ad-hoc wi-fi 网络是可能的。我目前拥有以下内容，并且我正在尝试弄清楚如何测试 wi-fi direct 功能，或者是否需要使用 Android 4.0 获得另一台设备。

*   计算机，通过有线网络连接到 wi-fi 路由器。
*   Galaxy Nexus，全面更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:48:47.390

问题在于，从用户体验的角度来看，Android 中的 Wi-Fi Direct 功能相当糟糕。是的，它确实有一个用于协商和控制 Wi-Fi Direct 连接的 API，但是如果用户需要，“vanilla”Android 没有任何用户应用程序来协商这个连接。

如果您是软件开发人员并正在开发多人游戏 Android 游戏，那么您拥有所需的一切：

*   用于启用 Wi-Fi Direct 的 API
*   接收附近启用了 Wi-Fi Direct 的所有设备的列表
*   向另一台设备发送连接请求
*   接受此请求并建立连接

但是，如果您只是一个拥有两台设备和多人游戏的用户，无法协商建立 Wi-Fi Direct 连接，并且只想在没有接入点的情况下连接两台设备，我们很抱歉。

因此，如果您只想在您的设备上测试 Wi-Fi Direct 功能，有两种方法可以做到这一点：

*   购买/借用具有“开箱即用”适当软件的设备，例如[Sony Xperia T](http://www.dailymotion.com/video/xr9kva_sony-xperia-s-connectivity-dlna-wifi-direct-hdmi_tech)、[Samsung Galaxy SII](http://youtu.be/1z-vMD4JuWc?hd=1)或[Samsung Galaxy SIII](http://youtu.be/ENteq-canMk?hd=1)。
*   从 Android Market 安装第三方应用程序，例如[WiFi Shoot！](https://play.google.com/store/apps/details?id=com.budius.WiFiShoot), [WiFi 直连](https://play.google.com/store/apps/details?id=de.j4velin.wifidirect)等

希望我回答了你的问题。

# node.js - phantomjs // 从给定 dom 渲染网页

> ID：13542533
> 
> 赞同：0
> 
> 时间：2012-11-24T15:18:04.540
> 
> 标签：node.js, screen-scraping, phantomjs, screen-capture

是否有机会仅从给定的 DOM 呈现/处理网页？
目前我们可以使用`page.open`，但只需要一个 url。在我的应用程序中，我从其他地方获得了 DOM，因此无需获取两次 :)

我现在可以通过设置页面内容，`page.content = "<html></html>"`但我缺少加载图像的回调等。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T09:40:06.590

看看[casperjs](http://casperjs.org/)的[`bbcshot.js`](https://github.com/n1k0/casperjs/blob/master/samples/bbcshots.js)代码示例，它完全符合您的要求。

# php - 实时音频流有效的 HTTP 资源

> ID：13542534
> 
> 赞同：3
> 
> 时间：2012-11-24T15:18:06.063
> 
> 标签：php, streaming, mp3, shoutcast

Shoutcast 服务器不生成有效的 HTTP 资源。我们的移动播放器链接 (Android) 需要有效的 HTTP 资源。我如何使用 php 脚本进行直播流？此脚本提供有效的 http 资源？有谁知道？

```
<?php

$track = "shoutcaststream.mp3";

if (file_exists($track)) {
    header("Content-Type: audio/mpeg");
    header('Content-Length: ' . filesize($track));
    header('Content-Disposition: inline; filename="shoutcaststream.mp3"');
    header('X-Pad: avoid browser bug');
    header('Cache-Control: no-cache');
    readfile($track);
    exit;
} else {
    header($_SERVER['SERVER_PROTOCOL'].' 404 Not Found', true, 404);
    echo "no file";
} 
```

**更新 2**

按照“布拉德”的指示，现在一切都很好。我们使用 set_time_limit(0) 但是我的流在 3 分钟到 5 分钟后仍然关闭？怎么修？请帮助我.. :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T18:24:52.223

是的，你所拥有的是有效的。

SHOUTcast 流的无效部分是它们返回`ICY 200 OK`而不是`HTTP/1.0 200 OK`响应。如果您希望更改您的脚本来代理 SHOUTcast 请求，您可能需要通过正常的 TCP 连接（请参阅 参考资料[`fsockopen()`](http://php.net/manual/en/function.fsockopen.php)）连接到您的 SHOUTcast 服务器，并发送原始请求数据。

建立连接并接收数据后，将此数据回显给您的客户端。

另请注意，您将需要调用`set_time_limit(0)`，以便您的脚本不会在 30 秒左右超时。还要确保不发送`Content-Length`标头，并将您的响应设置为`HTTP/1.0`，这样您就不必将数据作为分块发送。（分块编码播放仅适用于 Android 2.3 或更高版本。）

最后，如果你发现用 PHP 破解某些东西太麻烦了，我有一个[流托管服务可用于测试](http://audiopump.co/preview.php)，它完全符合你的要求，它适用于 Android 上的内置音频播放器。

# c# - cab 安装后无法在 ac# 移动应用程序中找到 dll

> ID：13542537
> 
> 赞同：0
> 
> 时间：2012-11-24T15:18:12.203
> 
> 标签：c#, visual-studio-2008, mobile, dll, cab

我没有练习移动应用程序，我在部署时遇到了一些问题。

我用 c# 编写了一个应该在移动计算机上运行的 Form 应用程序（我想这没关系，但它是 Dolphin 6100）......让我们说“myApp”。我在视觉工作室的解决方案中包含了“myApp”项目，之后我按照本教程一步一步添加了一个出租车项目，一切似乎都正常——> [http://www.mobilepractices.com/2008/02/how -to-create-windows-mobile-smart.html](http://www.mobilepractices.com/2008/02/how-to-create-windows-mobile-smart.html)

但是在我将 cab 安装程序放入我的移动设备并重新启动安装应用程序后，我不知道如何，当我单击 myApp.exe 时总是出现此错误：“文件或程序集名称‘System.Windows .Forms、Version=2.0.0.0、Culture=neutral、PublicKeyToken=B77A5C561934E089'，或其依赖项之一未找到"

...即使 dll 在文件夹中是正确的！

我真的不知道我在哪里做错了......！谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T18:30:04.387

我解决了这个问题。只是有点缺乏经验；您不能使用 Visual Studio 使用 Form 应用程序来制作移动应用程序……您必须改用 Device 应用程序。

现在一切正常。

# windows-phone-7 - c# for WP7.5：如何远程备份 .txt 文件？

> ID：13542539
> 
> 赞同：0
> 
> 时间：2012-11-24T15:18:13.747
> 
> 标签：windows-phone-7, backup

我想使用自动下载或上传三个由我的应用程序生成的 .txt 文件的功能来完成我的应用程序。怎么做？我可以使用我的网站之一吗？如何？我应该使用哪些功能？

我要做的与 EverNote 类似，所以我知道我想做的在 C# 中是可能的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T23:41:22.107

[SkyDrive](http://msdn.microsoft.com/en-us/library/live/hh826550.aspx)和[DropBox](https://www.dropbox.com/developers)都支持从 Windows Phone 上传和下载，并且在 iOS 和 Android 上也可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T16:34:08.263

我会假设你有一个服务器为你的网站。您可以将服务器用作端点并通过流发送或创建您自己的一组 api。

# android - 在 GLSurfaceView 上绘制 2D

> ID：13542541
> 
> 赞同：2
> 
> 时间：2012-11-24T15:18:19.473
> 
> 标签：android, opengl-es, glsurfaceview

我正在尝试在 2D 模式下在 GLSurfaceView 上绘制 2D 正方形。我可以在 3D 模式下绘制对象，并测试了正方形是否在 3D 空间中。然后我尝试为二维绘图配置矩阵，当我尝试绘制我的对象时，什么都没有出现。

我的 GLSurfaceView 实例实现了 GLSurfaceView.Renderer。

我已将设置分为两个功能：

```
private void prepare3Ddrawing(GL10 gl)
{
    gl.glLoadIdentity();
    gl.glViewport(0, 0, getWidth(), getHeight());
    gl.glDisable(GL10.GL_DITHER);
    gl.glEnable(GL10.GL_DEPTH_TEST);
    gl.glEnable(GL10.GL_CULL_FACE);
    gl.glMatrixMode(GL10.GL_PROJECTION);
    gl.glLoadIdentity();
    GLU.gluPerspective(gl, 45.0f, (float)getWidth()/(float)getHeight(),0.1f,100.0f);    
}
private void prepare2Ddrawing(GL10 gl)
{
    gl.glDisable(GL10.GL_CULL_FACE);
    gl.glDisable(GL10.GL_DEPTH_TEST);
    gl.glMatrixMode(GL10.GL_PROJECTION);
    gl.glLoadIdentity();
    GLU.gluOrtho2D(gl,0,getWidth(), 0, getHeight());
    gl.glScalef(1, -1, 1);
    gl.glTranslatef(0, -getHeight(), 0);
    gl.glMatrixMode(GL10.GL_MODELVIEW);
} 
```

这是我的绘图方法...

```
public void onDrawFrame(GL10 gl)
{
    gl.glClear(GL10.GL_DEPTH_BUFFER_BIT|GL10.GL_COLOR_BUFFER_BIT);  
    prepare3Ddrawing(gl);

    camera.draw(gl);
    go2d.draw(gl);

    prepare2Ddrawing(gl);
    go2d.draw(gl);

} 
```

最后，我的 go2d 对象是我创建的名为 GameObject2d 的对象的一个​​实例。它的绘制方法看起来像这样......

```
@Override
public void draw(GL10 gl)
{
    super.draw(gl);

    gl.glEnable(GL10.GL_TEXTURE_2D);
    gl.glEnable(GL10.GL_ALPHA_TEST);
    gl.glAlphaFunc(GL10.GL_GREATER, 0.0f);
    gl.glEnableClientState(GL10.GL_TEXTURE_COORD_ARRAY);
    gl.glTexCoordPointer(2,GL10.GL_FLOAT,0,textureBuffer);
    gl.glBindTexture(GL10.GL_TEXTURE_2D, textureID);

    gl.glBlendFunc(GL10.GL_SRC_ALPHA, GL10.GL_ONE_MINUS_SRC_ALPHA);
    gl.glEnable(GL10.GL_BLEND);

    gl.glFrontFace(GL10.GL_CW);
    //gl.glEnable(GL10.GL_CULL_FACE);
    gl.glCullFace(GL10.GL_BACK);
    gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
    gl.glVertexPointer(3, GL10.GL_FLOAT, 0, vertexBuffer);

    gl.glDrawElements(GL10.GL_TRIANGLES, 6, GL10.GL_UNSIGNED_SHORT, indexBuffer);
    gl.glDisableClientState(GL10.GL_VERTEX_ARRAY);
    gl.glDisableClientState(GL10.GL_TEXTURE_COORD_ARRAY);
    gl.glDisable(GL10.GL_CULL_FACE);
    gl.glDisable(GL10.GL_ALPHA_TEST);
    gl.glDisable(GL10.GL_TEXTURE_2D);   
} 
```

有没有人有任何想法？同样，我仍然能够看到 go2D 对象的 3D 渲染版本，但我看不到 2D 版本。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T15:26:20.870

由于您不包含任何数据，我只能提出两种方法来调试问题。

第 1 步：尝试强制您的 2d - 透视矩阵和模型视图矩阵为单位矩阵。然后，如果您将 Square 数据顶点强制在剪辑空间内（例如 x,y = +-1 或 x,y= +-0.75, z=0，您应该会看到一个正方形出现在屏幕上。

第 2 步：现在数据模型正确，检查模型视图和透视矩阵的作用：将每个方形顶点 (x,y,z, w=1) 与 ModelView Matrix * CameraMatrix * PerspectiveMatrix 相乘。你得到了什么？x,y,z 是否在 |w| 之外？?

# java - Jdbc Postgresql 没有执行查询

> ID：13542548
> 
> 赞同：1
> 
> 时间：2012-11-24T15:19:17.373
> 
> 标签：java, android, postgresql, jdbc

我正在尝试通过 jdbc 将我的 android 应用程序连接到我的 postgresql 数据库，登录顺利但是当我尝试运行查询 explotes 并给我这个错误：

```
11-24 11:03:14.966: E/AndroidRuntime(673):  at org.postgresql.jdbc2.AbstractJdbc2Statement.executeWithFlags(AbstractJdbc2Statement.java:403)
11-24 11:03:14.966: E/AndroidRuntime(673):  at org.postgresql.jdbc2.AbstractJdbc2Statement.executeQuery(AbstractJdbc2Statement.java:283) 
```

这是建立连接的函数的代码：

```
public void save_info(Element plate_info){
         String retval = "";
         try {
             Class.forName("org.postgresql.Driver");
         } catch (ClassNotFoundException e) {
             e.printStackTrace();
             retval = e.toString();
         }
         String url = "jdbc:postgresql://test.com:5432/test_db?user=adsfsdfasd&password=2222222";
         Connection conn;
         try {
             DriverManager.setLoginTimeout(5);
             conn = DriverManager.getConnection(url);
             Statement st = conn.createStatement();
             ResultSet rs = st.executeQuery("INSERT INTO order_tbl (custumer, _name, additional, ingredients_) VALUES('adsfasdf','asdfasdfasdf', 'asdfasdfasd', 'asdfasdfasdf', 'dasfasdf')");
             while(rs.next()) {
                 retval = rs.getString(1);
             }
             rs.close();
             st.close();
             conn.close();
             System.out.println(retval);
         } catch (SQLException e) {
             e.printStackTrace();
             retval = e.toString();

         }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T15:39:02.840

这就是你所需要的。

```
DriverManager.setLoginTimeout(5);
conn = DriverManager.getConnection(url);
Statement st = conn.createStatement();
st.execute("INSERT INTO order_tbl (custumer, _name, additional, ingredients_) VALUES('adsfasdf','asdfasdfasdf', 'asdfasdfasd', 'asdfasdfasdf', 'dasfasdf')"); 
```

这是关于如何使用 SQL 插入的快速教程[http://www.youtube.com/watch?v=Zto0PovkbKo](http://www.youtube.com/watch?v=Zto0PovkbKo)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T15:30:24.277

你需要打电话`executeUpdate`，而不是`executeQuery`

```
int numRowsAffected = st.executeUpdate("INSERT INTO order_tbl (custumer, _name, additional, ingredients_) VALUES('adsfasdf','asdfasdfasdf', 'asdfasdfasd', 'asdfasdfasdf', 'dasfasdf')"); 
```

# database - 将数据保存在大富翁游戏的数据库中

> ID：13542549
> 
> 赞同：0
> 
> 时间：2012-11-24T15:19:21.010
> 
> 标签：database, database-design

假设我有一个有很多用户的应用程序（大富翁游戏），每个用户都有一个余额，他们在他们之间进行交易。

我有一个包含所有用户（用户 ID、姓名、电子邮件）的表和一个包含所有交易和进行交易的用户（用户 1、用户 2、金额）的表。

现在，如果我需要为每个用户提供余额，最好将每个用户的余额保留在用户表中并在每次进行交易时更新它，或者我应该每次从交易表中计算它我不会要介绍吗？假设这款游戏会有大量流量，那么对于 10,000+ 用户和每周 120,000+ 笔交易，更合理的做法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T15:32:28.823

在用户表中有一个新的列余额是一种冗余，因为可以通过对事务表的查询来计算该值。

然而，数据库设计过程之一是估计特定表上可能发生的读取和写入次数。如果该估计值很高，则可以简化某些读取或写入的结果并在数据库上具有冗余以提供网页请求的许多读取并以更少的处理时间显示值是合乎逻辑的。

在您的情况下，余额列更新可以通过事务表上的触发器来完成，该触发器计算所涉及的两个用户的余额。

# php - 您可以在 html 电子邮件中嵌入 Facebook 或 Twitter 提要吗？

> ID：13542550
> 
> 赞同：1
> 
> 时间：2012-11-24T15:19:22.583
> 
> 标签：php, javascript, html, facebook, email

> **可能重复：**
> [我可以在我的电子邮件中嵌入 Twitter 提要吗？](https://stackoverflow.com/questions/4310778/can-i-embed-a-twitter-feed-in-my-email)

我知道在 html 电子邮件中嵌入表单是不可以的，但是显示 Twitter 和 facebook 提要呢？这可能吗 ？谢谢

# opengl - glReadPixels 在对象单击时未给出 RGBA 值

> ID：13542551
> 
> 赞同：0
> 
> 时间：2012-11-24T15:19:27.843
> 
> 标签：opengl, sdl

我正在尝试在我的应用程序中实现一些简单的对象拾取，但从一开始就遇到了问题。为了测试，我正在尝试使用本教程中给出的内容：[OpenGL Programming/Object selection](http://en.wikibooks.org/wiki/OpenGL_Programming/Object_selection)

在我的代码中，我现在执行以下操作：

```
GLbyte color[4];
GLfloat depth;
GLuint index;
glReadPixels(click->x, WINDOW_HEIGHT - click->y - 1, 1, 1, GL_RGBA, GL_UNSIGNED_BYTE, color);
glReadPixels(click->x, WINDOW_HEIGHT - click->y - 1, 1, 1, GL_DEPTH_COMPONENT, GL_FLOAT, &depth);
glReadPixels(click->x, WINDOW_HEIGHT - click->y - 1, 1, 1, GL_STENCIL_INDEX, GL_UNSIGNED_INT, &index);

printf("Clicked on pixel %d, %d, color %02hhx%02hhx%02hhx%02hhx, depth %f, stencil index %u\n", click->x, click->y, color[0], color[1], color[2], color[3], depth, index); 
```

这给了我以下输出： ![程序的输出](../Images/91319a7ae82f7d4284ad01368998f7bd.png)

没有 RGBA 或模板索引值。我只放了 1 个对象`glStencilFunc(GL_ALWAYS, 99, -1);`，所以我不希望在大多数地方看到模板索引。但是对于颜色，我认为不需要任何额外的东西？

对于调试，这里是我的 OGL 初始化代码的一些核心部分：

```
glEnable(GL_DEPTH_TEST);
glEnable(GL_BLEND);
glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
glEnable(GL_MULTISAMPLE);

glEnable(GL_STENCIL_TEST);
glStencilOp(GL_KEEP, GL_KEEP, GL_REPLACE); 
```

和 SDL 初始化代码：

```
 SDL_GL_SetAttribute(SDL_GL_RED_SIZE, 8);
   SDL_GL_SetAttribute(SDL_GL_GREEN_SIZE, 8);
   SDL_GL_SetAttribute(SDL_GL_BLUE_SIZE, 8);
   SDL_GL_SetAttribute(SDL_GL_ALPHA_SIZE, 8);
   SDL_GL_SetAttribute(SDL_GL_DOUBLEBUFFER, 1);
   SDL_GL_SetAttribute(SDL_GL_DEPTH_SIZE, 24);
   SDL_GL_SetAttribute(SDL_GL_MULTISAMPLEBUFFERS, 1);
   SDL_GL_SetAttribute(SDL_GL_MULTISAMPLESAMPLES, 4);
   SDL_GL_SetAttribute(SDL_GL_STENCIL_SIZE, 8); 
   window = SDL_CreateWindow(windowTitle.c_str(), SDL_WINDOWPOS_CENTERED, 
    SDL_WINDOWPOS_CENTERED, width, height, SDL_WINDOW_OPENGL | SDL_WINDOW_SHOWN); 
```

从这些信息中是否可以提取为什么我`glReadPixels`没有报告例如 RGBA 值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T18:22:55.593

```
glReadPixels(click->x, WINDOW_HEIGHT - click->y - 1, 1, 1, GL_RGBA, GL_UNSIGNED_BYTE, color); 
```

你错过了一个`&`：

```
glReadPixels(click->x, WINDOW_HEIGHT - click->y - 1, 1, 1, GL_RGBA, GL_UNSIGNED_BYTE, &color); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T19:07:48.603

找到了解决这个问题的方法...

它在运行`glReadPixels`.

# php - mongo db group-order

> ID：13542553
> 
> 赞同：-1
> 
> 时间：2012-11-24T15:19:47.393
> 
> 标签：php, mongodb, group-by, mongo-collection, nosql

我想 mongodb 查询这个 sql 查询的：

```
select x,y,message,foo from messege where x=1 and y=1 group by x,y order by _id DESC 
```

但有：

MongoCollection::组

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T15:27:23.540

为了这

```
select a,b,sum(c) csum from coll where active=1 group by a,b 
```

分别是

```
db.coll.group(
           {key: { a:true, b:true },
            cond: { active:1 },
            reduce: function(obj,prev) { prev.csum += obj.c; },
            initial: { csum: 0 }
            }); 
```

您无法对从组中获得的结果进行排序，您可以使用 sort for find 像这样的 desc -1 ， 1 for asc ： .sort({"_id":-1}) desc

检查这个[http://www.mongodb.org/display/DOCS/Aggregation#Aggregation-Group](http://www.mongodb.org/display/DOCS/Aggregation#Aggregation-Group)

# c# - 通过c#或者其他方式控制浏览器

> ID：13542557
> 
> 赞同：0
> 
> 时间：2012-11-24T15:20:27.340
> 
> 标签：c#, plugins, browser, firebreath

好的，我知道 c# 有一个广泛且非常易于使用的应用程序开发程序，但这是我现在想学习的内容。所以当用户打开他的浏览器并在其中输入一些 url 时。是否可以将此数据或输入的数据发送`url address`到其他代码，例如 ac# 代码或位于其硬盘上的其他示例 c++。

简单来说，当用户单击网页上的某个链接或输入某个 url 或关闭浏览器或打开 Web 浏览器时，我们能否通过 c# 代码或任何其他方式检测他在 Web 浏览器上执行的所有操作（我猜想添加- on 或 pluins 它的工作方式）但是是否可以将他的操作发送到 c# 代码并对其进行编程并将某些输出返回给浏览器，以便浏览器执行它并输出给用户。

像浏览器--> c#code--> website .. 我希望c# 代码在浏览器和网页之间起作用。

**到目前为止我尝试过的工作**

我开始在谷歌上搜索，对浏览器的工作原理知之甚少，但仍然找不到解决方案。但是我猜插件是完成这些任务的方式，并且发现`firebreath`了跨平台，一种为浏览器开发插件的方式。那么这可以通过插件实现吗？如果是这样，您能否建议我一些好工具来开发我自己的插件。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T15:34:36.890

根据您要实现的目标，有几种选择：

*   代理人

    您可以实现一个 http 代理并将浏览器配置为使用该代理。代理可以看到所有流量并且可以做它想做的任何事情......这相当“与浏览器无关”。[请参阅此处](https://stackoverflow.com/a/8113066/847363)和[此处](https://stackoverflow.com/a/8558384/847363)的链接。

*   插入

    你可以实现一个插件......虽然这是一个特定于浏览器的......例如IE曾经对这种东西有BHO（不确定IE10是否仍然可能......）。可以在[此处](http://www.culater.net/software/SIMBL/SIMBL.php)、[此处](http://www.enhanceie.com/ie/dev.asp)、[此处](http://www.codeproject.com/Articles/350432/BHO-Development-using-managed-code)、[此处](https://stackoverflow.com/a/3781180/847363)和[此处](http://code.google.com/p/firebreath/)找到一些选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T17:58:59.667

您可以为此使用[FiddlerCore](http://www.fiddler2.com/fiddler/Core/)

```
Fiddler.FiddlerApplication.BeforeRequest += sess =>
{
    Console.WriteLine("REQUEST TO : " + sess.fullUrl);
    sess.bBufferResponse = true;
};

Fiddler.FiddlerApplication.Startup(8877, true, true);

Console.ReadLine();

Fiddler.FiddlerApplication.Shutdown();
System.Threading.Thread.Sleep(750); 
```

运行此代码后，打开浏览器并导航到任何页面。

# c# - 带有四个 && 的 LINQ Where 子句

> ID：13542558
> 
> 赞同：4
> 
> 时间：2012-11-24T15:20:37.647
> 
> 标签：c#, linq, sqlite, windows-8, microsoft-metro

我正在尝试在 Where 子句中创建一个带有 4 个参数的 LINQ 查询。这是一个 Windows 8 App 项目，我使用的是 SQLite 数据库。（[SQLite 实现](https://github.com/praeclarum/sqlite-net)）

这是代码片段：

```
public List<FinancialListBoxExpenseItem> retrieveExpenseItems(int month, int year, bool isPaid, StaticResources.FrequencyEnum frequencyEnum)
{
    List<FinancialListBoxExpenseItem> tmpList = null;

    connection.RunInTransaction(() =>
    {
        var items = from s in connection.Table<FinancialListBoxExpenseItem>()
                    where (s.expenseDateNextPayment.Month == month)
                       && (s.expenseDateNextPayment.Year == year)
                       && (s.expensePaidForCurrentPeriod == isPaid)
                       && (s.expenseFrequencyTypeEnum == frequencyEnum)
                    select s;
        tmpList = items.ToList<FinancialListBoxExpenseItem>();
    });

    return tmpList;
} 
```

它抛出 NotSupportedAction: Member access failed to compile expression 异常

我不知道这是什么意思以及我应该如何解决它。

编辑：**它在没有 where 子句**的情况下工作，因此错误必须与代码的这个 where 子句部分有关

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T20:39:32.913

您的 LINQ 提供程序可能`.Month`不支持。您必须解决这个问题，可能通过为月份和年份创建专门的列。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-24T22:18:50.763

这就是我解决问题的方法：

```
public List<FinancialListBoxExpenseItem> retrieveExpenseItems(int month, int year, bool isPaid, StaticResources.FrequencyEnum frequencyEnum)
{
    List<FinancialListBoxExpenseItem> tmpList = new List<FinancialListBoxExpenseItem>();

    connection.RunInTransaction(() =>
    {
        var items = from s in connection.Table<FinancialListBoxExpenseItem>()
                    let convertedDate = (DateTime)s.expenseDateNextPayment
                    where (convertedDate.Month == month)
                       && (convertedDate.Year == year)
                       && (s.expensePaidForCurrentPeriod == isPaid)
                       && (s.expenseFrequencyTypeEnum == frequencyEnum)
                    select s;
        tmpList = items.ToList();
    });

    return tmpList;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-10T05:51:50.127

在我的应用程序中，我`NotSupportedException`在运行 LINQ 查询时得到了一个，并且显示了异常的详细信息

> 成员访问编译表达式失败

正如这个线程让我知道的那样，发出的问题似乎是由`DateTime`查询中引用的变量引起的。除了找到像这样的 StackOverflow 线程来为您指明正确的方向之外，我不确定任何人应该如何自己解决这个问题，但对我来说，改变我编写查询的方式解决了这个问题。

此语法抛出“NotSupportedException”：*

```
IEnumerable<Foo> foos = connection.Table<Foo>().Where(foo => foo.Timestamp.Year == year); 
```

切换到这种语法效果很好：

```
IEnumerable<Foo> foos = connection.Table<Foo>().Where(
    delegate(Foo foo)
{
    return (foo.Timestamp.Year == year);
}); 
```

# php - 从 URL 中删除 index.php 导致 yii 中的 404

> ID：13542560
> 
> 赞同：3
> 
> 时间：2012-11-24T15:20:39.680
> 
> 标签：php, apache, ubuntu, yii

# 问题

**最初的问题：** 您好我有一个新创建的 Yii 站点，我想从 URL 中删除 index.php。
示例：“/index.php/site/index”应该是“/site/index”

我一直在使用这个[http://www.yiiframework.com/doc/guide/1.1/en/topics.url#hiding-x-23x](http://www.yiiframework.com/doc/guide/1.1/en/topics.url#hiding-x-23x)指南，但我只收到 404。

我希望你能指出错误或帮助我调试这个问题！
如果我遗漏了任何相关信息，请告诉我。

OBS：“主页”按预期工作，其他页面已损坏。

**问题状态：** 似乎是 mod_rewrite.so 的 apache/ubuntu 问题

## 回答

在不同人的帮助下，现在一切正常：DI 必须安装“rewrit”才能运行，我通过编写 Running a2enmod rewrit 来做到这一点 我系统的以下配置为我解决了这个问题，我希望这个线程可以帮助其他人类似的问题。

## 我的系统

```
Server version: Apache/2.2.22 (Ubuntu)  
Server built:   Nov  8 2012 21:37:45 
```

### Apache httpd.conf

```
<Directory "/var/www/MY_SITE/FOLDER_CONTAINING_YII/">
AllowOverride All
#...
</Directory>
LoadModule rewrite_module modules/mod_rewrite.so 
```

*这是文件的全部内容*

### Apache 错误日志

```
File does not exist: /.../htdocs/site, referer: http://.../htdocs/index.php/site/index 
```

*我加了点*

### 重启阿帕奇

```
kah@webaalborg:/etc/apache2/sites-available$ sudo service apache2 restart
 * Restarting web server apache2 
[Mon Nov 26 20:16:35 2012] [warn] module rewrite_module is already loaded, skipping
  ... waiting 
[Mon Nov 26 20:16:36 2012] [warn] module rewrite_module is already loaded, skipping
                                                                          [ OK ] 
```

### /ect/apache2/av​​ailable-sites/default

```
...
DocumentRoot /var/www
    <Directory />
            Options FollowSymLinks
            AllowOverride None
    </Directory>
    <Directory /var/www/>
            Options Indexes FollowSymLinks MultiViews
            AllowOverride None
            Order allow,deny
            allow from all
    </Directory>
    <Directory /var/www/MY_SITE>
            Options Indexes FollowSymLinks MultiViews
            AllowOverride all
            Order allow,deny
            allow from all
     </Directory>
... 
```

### Yii 目录结构：

*   框架
*   文档
    *   资产
    *   css
    *   .htaccess
    *   索引.php
    *   索引-test.php
    *   主题
*   受保护

### .htaccess

```
RewriteEngine on

# if a directory or a file exists, use it directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# otherwise forward it to index.php
RewriteRule . index.php 
```

### main.php 配置文件

```
'urlManager'=>array(
        'urlFormat'=>'path',
        'showScriptName'=>false,
        'caseSensitive'=>false,
        'rules'=>array(
            '<controller:\w+>/<id:\d+>'=>'<controller>/view',
            '<controller:\w+>/<action:\w+>/<id:\d+>'=>'<controller>/<action>',
            '<controller:\w+>/<action:\w+>'=>'<controller>/<action>',   
        ),
    ), 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T05:42:46.070

如果你在 Linux（比如 ubuntu）上工作，那么转到那里的路径`/etc/apache2/sites-available/`，你会发现一个名为的文件`default`，

```
 <Directory /var/www/> <--- ***root directory***
    Options Indexes FollowSymLinks MultiViews
    AllowOverride all <---- ***change this line***
    Order allow,deny
    allow from all
    </Directory> 
```

我认为你的问题会解决。

谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T15:34:37.453

你`AllowOverride`在你的目录指令中吗？

```
<Directory "/your/path">
AllowOverride All
#...
</Directory> 
```

如果不是，这将解释为什么您的重写规则不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T15:27:30.140

尝试将其放入 .htaccess

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

并且还从 httpd.conf 中删除行 'LoadModule rewrite_module modules/mod_rewrite.so' 并从命令行启用重写模块，执行 a2enmod 重写。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-17T06:36:30.410

```
<Directory /var/www/>
    Options Indexes FollowSymLinks
    AllowOverride all <---- ***change this line***
    Order allow,deny  <---- ***change this line***
    allow from all
    Require all granted
</Directory> 
```

# java - 在 MongoDB 和 Apache Solr 之间同步数据的简单方法

> ID：13542564
> 
> 赞同：7
> 
> 时间：2012-11-24T15:21:26.460
> 
> 标签：java, mongodb, solr

我最近开始使用 MongoDB 和 Apache Solr。我正在使用 MongoDB 作为数据存储，并且我希望 Apache Solr 为我的数据创建索引以用于我的应用程序中的搜索功能。

经过一番研究，我发现，基本上有两种方法可以在 MongoDB 和 Solr 之间同步数据。

1）使用 Solr DataImportHandler -

为此，我使用了 james 创建的 SolrMongoImporter，并按照他在[github上的教程进行操作](https://github.com/james75/SolrMongoImporter)

我能够成功运行 Import Handler，Solr 识别了 ImportHandler，但它没有将任何文档导入 solr。每次它说更新的文档=0。

2）然后我尝试切换到MongoDB端，看看那里是否存在任何东西，我发现 了10gen提供的[MongoDBConnector](https://github.com/10gen-labs/mongo-connector)。

当我按照说明运行连接器时，它正在尝试将大量文档发布到 Solr，并提供以下输出。

```
2012-11-24 15:15:20,665 - INFO - Finished 'http://localhost:8983/solr/update/?commit=true' (POST) with body '<commit />' in 0.010 seconds.
2012-11-24 15:15:21,674 - INFO - Finished 'http://localhost:8983/solr/update/?commit=true' (POST) with body '<commit />' in 0.009 seconds.
2012-11-24 15:15:22,683 - INFO - Finished 'http://localhost:8983/solr/update/?commit=true' (POST) with body '<commit />' in 0.008 seconds.
2012-11-24 15:15:23,694 - INFO - Finished 'http://localhost:8983/solr/update/?commit=true' (POST) with body '<commit />' in 0.010 seconds.
2012-11-24 15:15:24,702 - INFO - Finished 'http://localhost:8983/solr/update/?commit=true' (POST) with body '<commit />' in 0.008 seconds.
2012-11-24 15:15:25,711 - INFO - Finished 'http://localhost:8983/solr/update/?commit=true' (POST) with body '<commit />' in 0.008 seconds.
2012-11-24 15:15:26,722 - INFO - Finished 'http://localhost:8983/solr/update/?commit=true' (POST) with body '<commit />' in 0.010 seconds. 
```

但是 Solr 中没有数据。

我想知道哪种方法对你们有用，有没有关于 MongoDB 和 Solr 集成的好教程。

此外，我正在寻找 MongoDB 和 solr 之间的实时同步，即，只要将任何产品添加到我的 mongodb，我希望它在 solr 索引中更新并反映在搜索结果中。

我正在使用 MongoDB 2.0.4 和 Solr 3.6.1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T16:40:46.023

Hadoop 是创建 SOLR 索引的一个选项。我还没有亲身体验过，但从[etsy 等](http://www.slideshare.net/lucenerevolution/solr-lucene-and-hadoop-etsy-12985268)人那里听说过。

在lucene 革命的[这门课程](http://www.lucenerevolution.org/training)中，他们谈到了使用 hadoop 更新某些 SOLR 内核中的索引。不幸的是，我不认为课程材料是公开的。

在[这次演讲](http://www.10gen.com/presentations/mongodb-uk-2012/humongous)中，演讲者谈到了对 mongo/hadoop 的支持。

其他相关链接：

*   [通过 Solr 和 Java MapReduce 索引文件](http://blog.cloudera.com/blog/2012/03/indexing-files-via-solr-and-java-mapreduce/)
*   [使用 Hadoop 创建 Solr 索引](http://www.likethecolor.com/2010/09/26/using-hadoop-to-create-solr-indexes/)
*   [Mongo-Hadoop 连接器](http://api.mongodb.org/hadoop/MongoDB%2BHadoop+Connector.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-25T12:28:30.327

你设置了副本集模式吗？[http://docs.mongodb.org/manual/reference/replica-configuration/](http://docs.mongodb.org/manual/reference/replica-configuration/)

一开始，尽管 Solr 中没有数据，但我得到的输出与您描述的相同。之后，我设置了复制模式，似乎创建了 oplog 文件并且 mongodbconnector 与 SOLR 正确同步。对我来说效果很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-17T16:16:36.683

考虑使用 mongoConnector。查看[http://blog.mongodb.org/post/29127828146/introducing-mongo-connector](http://blog.mongodb.org/post/29127828146/introducing-mongo-connector)

# javascript - JqueryTools 在按钮单击时公开关闭

> ID：13542565
> 
> 赞同：2
> 
> 时间：2012-11-24T15:21:28.687
> 
> 标签：javascript, jquery, jquery-tools

我禁用了默认的 .expose() closeonclick 功能，因为我想用按钮关闭它。问题是我找不到如何正确关闭它的代码。

```
$('#button').on('click',function(){

...?

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T18:53:21.913

只需单击按钮即可：

```
$.mask.close(); 
```

[JSFiddle](http://jsfiddle.net/kmpRy/)

# android - 在主/详细流模板中添加“上一个”和“下一个”按钮

> ID：13542566
> 
> 赞同：3
> 
> 时间：2012-11-24T15:21:32.553
> 
> 标签：android, eclipse

我正在使用 android 中的主/详细流模板创建一个应用程序...默认情况下，它在平板电脑的 2 窗格活动中显示数据，在手机中显示带有导航的单窗格......我想添加“上一个”和“下一步”按钮在详细活动中（用于手机），以便导航变得更容易，（每次返回 listActivity 非常麻烦.....）......但我无法做到这一点...... ..请帮助:(。这是ItemDetailActivity的主要代码

```
if (savedInstanceState == null) {
        Bundle arguments = new Bundle();
        arguments.putString(ItemDetailFragment.ARG_ITEM_ID,
                getIntent().getStringExtra(ItemDetailFragment.ARG_ITEM_ID));
        ItemDetailFragment fragment = new ItemDetailFragment();
        fragment.setArguments(arguments);
        getSupportFragmentManager().beginTransaction()
                .add(R.id.item_detail_container, fragment)
                .commit();
    } 
```

# javascript - 可能是一件容易的事，但我如何让 javascript 只在有东西的情况下才拆分，如果不保持原样

> ID：13542567
> 
> 赞同：0
> 
> 时间：2012-11-24T15:21:33.620
> 
> 标签：javascript

我正在使用以下内容从提要中获取标题：

```
var posttitleGETcalendar = entry.title.$t;
var posttitleREMcalendar = posttitleGETcalendar.split("_");
var title =  posttitleREMcalendar[0] + "<small>" + posttitleREMcalendar[1] + "</small>"; 
```

我想要做的是拆分我在下划线之后得到的标题，并将标签添加到它后面的部分。当下划线存在时效果很好，但如果下划线不在标题上，它会在最后一个单词之后显示单词*undefined 。*有没有办法使用

```
if underscore is on title, do 
if not, leave it as is 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T15:24:16.490

您可以将最后一行更改为：

```
var title = posttitleREMcalendar[0] 

if ( posttitleREMcalendar.length > 1 )
{
    title = title + "<small>" + posttitleREMcalendar[1] + "</small>";
} 
```

这样，您只会添加第二部分（如果存在）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T15:24:28.143

```
if(/_/.test(posttitleGETcalendar)) {
    // posttitleGETcalendar.indexOf('_') != -1 would do too

    // do your stuff here
} 
```

或者，您可以使用该`replace`方法并跳过其他辅助变量：

```
var title = entry.title.$t.replace('_', '<small>') + '</small>'; 
```

# jquery - HTML5 布局，如 Android 选项卡和滑动布局

> ID：13542572
> 
> 赞同：2
> 
> 时间：2012-11-24T15:22:14.637
> 
> 标签：jquery, html, android-layout, jquery-mobile

我正在为客户开发一个 HTML5 移动应用程序，但他想要一些我只在本机 (android) java 应用程序中见过的东西。他正在寻找的布局是这个模板之间的交叉

[http://carbonyzed.co.uk/Websites/Jason/sites/3/templates/](http://carbonyzed.co.uk/Websites/Jason/sites/3/templates/)

以及这个 android 应用程序的风格 - 或许多其他应用程序（groupon 就是一个很好的例子）。

[![安卓应用](../Images/5c762c71b46b8cc970bc4b82cb6ddc14.png)](https://i.stack.imgur.com/ZVwfg.png)
[（来源：[blogspot.com](http://4.bp.blogspot.com/-T0ubrNZd4ro/TlOx2EZGnXI/AAAAAAAAAp0/p7PQWuJc8Ns/s1600/MarketSwipe.png)）]

[![Groupon 安卓应用](../Images/1cdb8086263634414c17c817472c2994.png)](https://i.stack.imgur.com/TsmuX.jpg)
[（来源：[dayviews.com](http://cdn02.dayviews.com/105/_u3/_u3/_u1/_u6/_u7/_u5/u3316756/72187_1342683255.jpg)）]

关键的 2 个功能是像在链接模板中那样弹出左右菜单栏，然后​​是 3 个选项卡式滑动样式页面（一个用于今天、明天和未来）。

我能想到的唯一方法是使用 jquery 滑块或其他东西，并在其中包含文本而不是图像，但是我确信，必须有更好的方法，因此我来这里。

根据我的研究，我确信我必须使用 JQUERY MOBILE 或某种 JQUERY 脚本来执行此操作。

如果有人有任何建议/可以为我指明正确的方向，或者甚至向我展示一些这样的设计模板（我似乎看不到），我将不胜感激。

谢谢

亨利

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T16:45:15.800

首先它可以完成，但是在完成这个项目之前你会尿血。

这里的主要问题是jquery mobile（和其他类似产品）不适合那么多定制。JQM 可以与 jQuery UI 组件一起使用，但它往往会因大量定制而停止（UI 组件渲染有时会因为 JQM 页面兑现而失败。

另一个问题是运行在 iPhone 上的 JQM 和运行在 Android 手机上的 JQM 之间的兼容性。iPhone 是 JQM 更好的平台。Android 在页面转换方面存在巨大问题（android 版本 2.X）。它已在 4.X 版中修复。

即使你可以创建一个防弹应用程序，你仍然会遇到像 phobegap/cordoba 这样的包装器框架的问题。

我给你的建议是创建一个原生应用程序。

# safari-extension - 如何以编程方式显示 Safari 扩展弹出框

> ID：13542576
> 
> 赞同：2
> 
> 时间：2012-11-24T15:22:36.973
> 
> 标签：safari-extension

我正在尝试编写一个 Safari 扩展，该扩展由主工具栏上的一个按钮和一个关联的弹出框组成，以及一个上下文菜单项。基本感觉模仿了 1Password 扩展的感觉。

弹出框的工作之一是允许一个人登录。我还在有条件地更改上下文菜单项的操作，如果未登录的人单击我想显示的菜单项popover 允许他们登录，但我在开发人员指南中找不到这样做的方法。

我如何“显示”弹出窗口？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T21:47:18.830

如果您只有一个工具栏项和一个弹出框（并且从不打算添加更多），那么它只是一行。假设您已经将弹出框分配给 Extension Builder 中的工具栏项，您可以使用：

```
safari.extension.toolbarItems[0].showPopover(); 
```

但是，如果您有多个弹出框和（可能）多个工具栏项，这里有一个通用函数，用于在活动浏览器窗口中的指定工具栏项下打开由其标识符指定的弹出框：

```
function showPopover(popoverId, toolbarItemId) {
    var toolbarItem = safari.extension.toolbarItems.filter(function (tbi) {
        return tbi.identifier == toolbarItemId && tbi.browserWindow == safari.application.activeBrowserWindow;
    })[0];
    var popover = safari.extension.popovers.filter(function (po) {
        return po.identifier == popoverId;
    })[0];
    toolbarItem.popover = popover;
    toolbarItem.showPopover();  
} 
```

# java - 大蛋白质序列中的比对序列

> ID：13542577
> 
> 赞同：1
> 
> 时间：2012-11-24T15:22:49.653
> 
> 标签：java, sequence, bioinformatics

我有一个大约 5000 的大蛋白质序列，所以我把它放在一个文本文件（p_sqn.txt）中，我有以下序列

例如 ; SDJGKLDJGSNMMUWEURYI

我必须找到百分比同一性评分函数，因此我必须找到蛋白质序列中最相似的序列。（蛋白质序列.txt）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T19:16:27.253

我将从检查序列中每个点的[Levenshtein 距离开始。](http://en.wikipedia.org/wiki/Levenshtein_distance)

长度只有 5000，通过它不会花费很长时间（毫秒）。

幸运的是，[Apache commons-lang 库](http://commons.apache.org/lang/)提供了[`StringUtils.getLevenshteinDistance()`](http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/StringUtils.html#getLevenshteinDistance%28java.lang.String,%20java.lang.String%29)实用方法。有了这个，代码将只有几行：

```
import org.apache.commons.lang.StringUtils;

String protein; // the full sequence
String part; // your search string
int bestScore = Integer.MAX_VALUE;
int bestLocation = 0;
String bestSeqence = "";
for (int i = 0; i < protein.length() - part.length(); i++) {
    String sequence = protein.substring(i, part.length());
    int score = StringUtils.getLevenshteinDistance(sequence, part);
    if (score < bestScore) {
        bestScore = score;
        bestLocation = i;
        bestSeqence = sequence;
    }
}

// at this point in the code, the "best" variables will have data about the best match. 
```

仅供参考，零分意味着找到了完全匹配。

* * *

为了便于读取文件，您可以使用[Apache common-io 库](http://commons.apache.org/io/)实用程序方法[`FileUtils.readFileToString()`](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html#readFileToString%28java.io.File%29)，如下所示：

```
import org.apache.commons.io.FileUtils;

String protein = FileUtils.readFileToString(new File("/some/path/to/myproteinfile.txt")); 
```

# ajax - jquery插件中的$ .ajax不更新变量

> ID：13542578
> 
> 赞同：2
> 
> 时间：2012-11-24T15:22:50.107
> 
> 标签：ajax, jquery, jquery-plugins

小提琴：http: [//jsfiddle.net/gpTpK/](http://jsfiddle.net/gpTpK/)

我遇到的问题是执行 $.ajax 时标题变量没有更新/更改，我知道 ajax 调用正在工作，因为我尝试替换该行

`title = $(xml).find("title").text();`

和

`console.log($(xml).find("title").text());`

果然它确实返回了标题但是当使用原始行时变量标题不会改变

我已经尝试过，它确实可以将 ajax 调用放在外面 (function($){})(jQuery);

```
(function($) {
    $.fn.getPost = function(options) {
        var $this = $(this);
        var defaults = {
            method: "html",
            blogID: "",
            postID: "",
            done: null
        };
        var options = $.extend(defaults, options);
        var title;
        $.ajax({
            type: "GET",
            url: "http://www.blogger.com/feeds/724793682641096478/posts/default/3551136550258768001",
            dataType: "xml",
            dataType: 'jsonp',
            success: function(xml) {
                title = $(xml).find("title").text();
            }
        });
        return $this.each(function() {
            if (options.done) {
                options.done.call(undefined, title);
            }
        });
    };
})(jQuery); 
```

我已经尝试了以下方法，我还尝试将 ajax 包装在一个函数中，例如 getTitle(){ajax code here with return title;}

```
(function($) {
    $.fn.getPost = function(options) {
        var $this = $(this);
        var defaults = {
            method: "html",
            blogID: "",
            postID: "",
            done: null
        };
        var options = $.extend(defaults, options);
        var title;
        getAjax();
        return $this.each(function() {
            if (options.done) {
                options.done.call(undefined, title);
            }
        });

        function getAjax() {
            $.ajax({
                type: "GET",
                url: "http://www.blogger.com/feeds/724793682641096478/posts/default/3551136550258768001",
                dataType: "xml",
                dataType: 'jsonp',
                async: false,
                success: function(xml) {
                    title = $(xml).find("title").text();
                }
            });
        }
    };
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T15:30:53.623

抱歉，我花了很长时间试图弄清楚（我不是因为懒惰而问：P），不管这里是那些感兴趣的人的解决方案：）

```
(function($) {
    $.fn.getPost = function(options) {
        var $this = $(this);
        var defaults = {
            method: "html",
            done: null
        };
        var options = $.extend(defaults, options);
        var title;
        var sorf;
        $.ajax({
            type: "GET",
            url: "http://www.blogger.com/feeds/724793682641096478/posts/default/3551136550258768001",
            dataType: "xml",
            dataType: 'jsonp',
            success: function(xml) {
                title = $(xml).find("title").text();
                sorf = 1;
            },
            error: function(){
                sorf = 0;
            },
            complete: function() {
                returnvals(sorf);
            }
        });

        function returnvals(sorf) {
         if(sorf){
         //success
            return $this.each(function() {
                if (options.done) {
                    options.done.call(undefined, title);
                }
            });
         }else{// failure}
        }
    };
})(jQuery); 
```

# c# - 我的表格 1 如何知道表格 2 中的复选框已启用？

> ID：13542581
> 
> 赞同：2
> 
> 时间：2012-11-24T15:23:34.057
> 
> 标签：c#, checkbox

这是我的表格 2，这是复选框所在的位置。

![在此处输入图像描述](../Images/e40edc063de62c8fcfe5659944abf5d1.png)

我在中间的操作员有一个随机字符生成器，​​我的代码是这样的：

```
 char[] select = new char[] { '+', '-', '/', '%', '*' };
        var rand = new Random();
        char num = select[rand.Next(5)];
        lbloperator.Text = Convert.ToString(num); 
```

如果唯一的检查是加法，我的表格 1 将只执行加法，或者如果加减，我的表格 1 将只执行加法和减法。请在这件事上给予我帮助！:(

表格1

![在此处输入图像描述](../Images/69a0f692d76a4d0ebbb3bd2eb2283971.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T16:40:06.420

有两种方法可以做到这一点：

1-第一种方法是在form2中定义公共属性，可以告诉form1 checkBox1的状态：

表格2：

```
public bool MyCheckBoxStatus
{
    get {return checkBox1.Checked;}
} 
```

表格 1（例如）：

```
Form2 frm = new Form2;
frm.ShowDialog();

if (frm.MyCheckBoxStatus)
{
    //Do something...
} 
```

2- 另一种方式：如果您使用的是 Windows 窗体应用程序，那么您的所有控件都有一个名为 Modifiers 的属性，将其值更改为 public 并在 Form1 中编写此代码：

```
Form2 frm = new Form2;
frm.ShowDialog();

if (frm.checkBox1.Checked)
{
    //Do something...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T15:29:33.390

我不太确定你在问什么，但听起来你正试图在表单之间传递一些数据。

在 Form2 中，您可以添加一个读取您的标签的公共属性

```
public string TheOperator {
    get { return lblOperator.Text; }
} 
```

然后从 Form1 中，您可以创建一个新的 form2 实例，然后在需要时引用该属性。

```
Form2 fm = new Form2();
fm.Show();
string theOp = fm.TheOperator; 
```

//////////

作为对您的编辑的回应：您可以将其添加到 Form1，在那里公开操作员变量：

```
public string MyOperator {
    get { return lblOperator.Text; }
    set {
                lblOperator.text = value;
                //You can perform any updates to 
                //your calculations here, or call 
                //another method to do so
        }
}

private void OpenForm2()
{
    Form2 frm2 = new Form2(this);
    frm2.Show();
} 
```

然后在 Form2 内部，传递对 Form1 的引用，以便访问公共属性：

```
private Form1 frm;
public New(Form1 _frm)
{
    frm = _frm;
}

private void UpdateOperator()
{
    //call this method, calculating your operator and then
        //set the operator on the first form (variable frm) to
        //What you need it to do
    frm.MyOperator = lblOperator.Text;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T15:30:49.053

尝试这个：

```
public partial class Form2: Form
{
public string checkBoxSelected = "";
}

public partial class Form1 : Form
{
private void MakeResult()
{
Form2 result = new Form2();
result.checkBoxSelected = "+";
result.Show();
}
} 
```

# java - 使用重复分隔符拆分 Java 字符串

> ID：13542584
> 
> 赞同：1
> 
> 时间：2012-11-24T15:23:53.070
> 
> 标签：java, string, split

我有一个格式如下的字符串：

```
String str = "AA.BBB..CC.DDDD...EE....F.G..H"; 
```

我想用一个点分割这个字符串，并以此作为输出：

```
AA
BBB
.CC
DDDD
.
EE
..
F
G
.H 
```

`str.split("\\.")`当然没有工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T15:27:20.527

这应该有效：

```
str.split("(?<!\\.)\\.|(?<=\\.\\.)\\.(?!\\.)") 
```

在这两种情况下应该拆分字符串：

*   前面`.`没有另一个`.`
*   后面`.`没有`.`, 前面有 2 个连续的`.`。

# asp.net-4.5 - 安装 VS 2012 时如何安装 ASP 4.5

> ID：13542586
> 
> 赞同：0
> 
> 时间：2012-11-24T15:24:00.610
> 
> 标签：asp.net-4.5

我想在安装了 Microsoft Visual Studio 2012 的机器上安装 ASP 4.5。

.net 4.5 与 Visual Studio 一起安装。所以在这台机器上，%Windows%\Microsoft.NET\Framework64 中没有 4.5 文件夹，只有 v4.0.30319，即 .net 4.0。

所以我不能运行 aspnet_regiis -i 因为我没有 4.5 文件夹...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T18:39:11.253

.NET 4.5 是对 .NET 4.0 的就地更新。只需按照 v4.0 的正常 aspnet_regiis 步骤操作即可。

当您进入 inetmgr 并选择用于给定应用程序池的 CLR 版本时，请选择 CLR 版本 4.0（运行 .NET Framework 4.5）。这类似于 CLR 2.0 版运行 .NET Framework 2.0、3.0 和 3.5 的方式。

# r - R中的“子集”没有按照我想要的方式进行子集化

> ID：13542587
> 
> 赞同：0
> 
> 时间：2012-11-24T15:24:15.290
> 
> 标签：r, subset

> **可能重复：**
> [在 R 中的子集数据框中删除因子级别](https://stackoverflow.com/questions/1195826/dropping-factor-levels-in-a-subsetted-data-frame-in-r)

我在这里对 R 感到有些沮丧，如果有人可以帮助我解决以下问题，那就太好了：我正在尝试从我的数据集中提取一个子集，但它无法正常工作。

细节：我有一个电子表格，其中包含与每个单词相关的单词和不同特征，例如单词文章长度……现在我正在尝试查看单个单词，例如拉出单词为“hairbrush”的所有实例。为此，我尝试了：

```
hairbrush=subset(dataset, word=="hairbrush") 
```

这似乎工作正常，当我用`fix`or查看它时，它给了我正确的数据集`head`。但是，一旦我尝试进行诸如`xtabs`或任何类型的计算之类的事情，我就不会走得太远，因为所有其他词仍然“存在”并弄乱了我的统计数据。例如，当我这样做时`levels`，它给了我“发刷”，但也给了我所有其他 200 个单词。与这些“隐藏词”有关的所有数据都是`NA`，但它仍然会弄乱我的统计数据。

这是 的通常行为`subset`吗？还是我做错了什么？或者这是错误的方法？

哦，在谷歌上的一些类似问题中，人们总是要求输出`str`，所以这里是：

```
> str(hairbrush)
'data.frame':   41 obs. of  10 variables:
 $ id       : Factor w/ 1352 levels "1-1-1-11-a.eaf",..: 210 240 267 295 320 351 378 403 427 452 ...
 $ speaker  : num  24 25 26 28 29 30 32 33 34 35 ...
 $ loc      : Factor w/ 2 levels "nb","xx": 1 1 1 1 1 1 1 1 1 1 ...
 $ gilbertno: Factor w/ 27 levels "1","10","108",..: 1 1 1 1 1 1 1 1 1 1 ...
 $ tword    : Factor w/ 65 levels "abaddream","afuneral",..: 4 4 4 4 4 4 4 4 4 4 ...
 $ word     : Factor w/ 228 levels "abbe","aepfel",..: 164 93 99 93 92 100 94 94 28 93 ...
 $ loan     : Factor w/ 5 levels "FILE","maybe",..: 4 3 5 3 5 5 3 3 3 3 ...
 $ article  : Factor w/ 40 levels "a","das","dat",..: 34 34 33 33 34 34 34 34 13 34 ...
 $ gender   : Factor w/ 13 levels "a","af","amn",..: 11 11 7 7 11 11 11 11 7 11 ...
 $ comment  : Factor w/ 4 levels "0","die macht ja vorschlaege",..: 1 1 1 1 1 1 1 1 1 1 ... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T15:33:06.237

您需要`droplevels`在子集后使用以清除未使用的级别。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-24T15:35:37.917

`subset`正在按预期工作。`word`您遇到的问题是由于`factor`. 当您对 , 进行子集化时`data.frame`，`subset`不会重新定义您的变量，因此会`word`继续携带作为原始数据集一部分的所有级别信息。尝试使用`droplevels`从您的`data.frame`.

# java - 使用线性坐标检查 AI

> ID：13542592
> 
> 赞同：1
> 
> 时间：2012-11-24T15:25:13.497
> 
> 标签：java, trigonometry, coordinate-systems, game-ai

我正在研究一些人工智能，我希望我的人工智能不会遇到给定的坐标，因为这些是墙/边界的参考。

首先，每次我的 AI 撞墙时，它都会引用那个位置 (x, y)。当它击中同一面墙三次时，它使用线性检查点来“想象”有一堵墙穿过这些坐标。

我现在想阻止我的 AI 再次进入那堵墙。

为了检测我的坐标是否成直线，我使用：

```
private boolean collinear(double x1, double y1, double x2, double y2, double x3, double y3) {
    return (y1 - y2) * (x1 - x3) == (y1 - y3) * (x1 - x2);
} 
```

如果给定的点彼此线性，则返回 true。

所以我的问题是：

1.  如何确定我的机器人是否正在从其当前轨迹接近墙壁？

2.  不是 Java 的“想象”，而是从 1 到 3 的一条线。但是要“想象”一条线一直穿过这些线性坐标，直到无穷大（或接近）。

我有一种感觉，这将需要一些令人困惑的三角函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T15:56:02.497

对于＃2，您可以检查任何点与您想要的墙壁/线上的一点之间的斜率是否与线上两点之间的斜率相同。

```
private boolean onWall(double x, double y, double wallX1, double wallY1, double wallX2, double wallY2) {
    return (wallY1 - y) / (wallX1 - x) == (wallY2 - wallY1) / (wallX2 / wallX1);
} 
```

所以，计算的斜率共享一个点，所以如果它们相同，它们都在同一条线上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T16:28:05.893

有趣的问题。好吧，我想到了两种方法：

*   因此，您可以做的是，一旦检测到每条线，就按照 line存储其斜率`m`和线常数。因此，一旦您将坐标更改为新坐标。把你的新方程放在上面的方程中，看看是否。整个操作在计算上将是昂贵的，因为每个新坐标移动*检测到的线数*是多少`c``y= mx +c``(x1,y1)``y1 == m*x1 + c``O(n)``n`

 *您可以通过对点进行聚类并根据聚类而不是每条线检查线匹配来减少上述情况。即存储所有线路通过集群的内容，并仅在您当前位于相应集群中时检查这些线路。这应该是一个理想的解决方案

*   `r`另一种解决方案是在当前点周围有一个假想的半径圆。获得圆后，找出所有通过当前集群的线（如上所述）。对于每一个新动作，检查墙壁或不仅仅是那些线条。移出集群后，再次绘制一个新圆圈

我认为这个问题更适合programmers.stackexchange.com而不是这里:)*

# php - 特殊字符存储为 ? 在我的 mysql 数据库中

> ID：13542593
> 
> 赞同：2
> 
> 时间：2012-11-24T15:25:48.767
> 
> 标签：php, mysql

我使用以下代码在我的数据库中存储和更新数据。

```
<?php
header("Content-Type: text/html;charset=UTF-8", true);
mysql_connect("localhost", "test", "test") or die(mysql_error());
    mysql_select_db("test") or die(mysql_error());

    // mysql_set_charset('UTF8');
    mysql_query("SET NAMES 'utf8'");
    mysql_query("SET CHARACTER SET utf8");
    mysql_query("SET COLLATION_CONNECTION = 'utf8_unicode_ci'");

    mysql_query("UPDATE `test`.`english` SET age = '".$age."', city = '".mysql_real_escape_string($_REQUEST['city'])."', aboutMe = '".$_REQUEST['about']."' WHERE `english`.`username` = '".$_REQUEST['username']."' LIMIT 1 ;") 
    or die(mysql_error()); 
```

代码运行良好。但是如果字符串，例如 "city" 包含 ä,ö,ü 它被存储为 ? 例如，单词“Bär”转到“B?r”。

我已经添加了这些 utf8 的东西，但它没有帮助。服务器只支持php4.x

编辑：数据库使用 latin1_general_ci 作为排序规则。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T20:30:53.893

保留 ut8_unicode_ci 并将其添加到您的 php 代码中：

```
mb_language('uni');
mb_internal_encoding('UTF-8');
mysql_query("set names 'utf8'",$connection); 
```

我到处都在使用它（西里尔文、中文等），它适用于每个查询（插入或更新）。

```
 <?php
        header("Content-Type: text/html;charset=UTF-8", true);
        $connection = mysql_connect("localhost", "test", "test") or die(mysql_error());

        mb_language('uni');
        mb_internal_encoding('UTF-8');
        mysql_query("set names 'utf8'",$connection);

        mysql_select_db("test") or die(mysql_error());
        mysql_query("UPDATE `test`.`english` SET age = '".$age."', city = '".mysql_real_escape_string($_REQUEST['city'])."', aboutMe = '".$_REQUEST['about']."' WHERE `english`.`username` = '".$_REQUEST['username']."' LIMIT 1 ;") 
        or die(mysql_error()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T12:47:11.567

我让它工作了。我对这种行为没有任何解释。我已将 php 文件从 utf8 更改为 latin1：

```
mysql_query("SET NAMES 'latin1'");
mysql_query("SET CHARACTER SET latin1");
mysql_query("SET COLLATION_CONNECTION = 'latin1_general_ci'"); 
```

在 MySQL 数据库中，表和列的排序规则是 utf8_unicode_ci。

它现在适用于 € 符号旁边的所有字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T15:27:23.973

使用 utf8 作为排序规则，也许`utf8_bin`或者`utf8_unicode_ci`

（ci 表示它不区分大小写，因此像 "John" = "JOHN" 这样的比较返回 true）。您可以通过在 MySQL 中运行以下查询来执行此操作：

```
alter table `test`.`english` convert to character set utf8 collate utf8_unicode_ci; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T15:27:28.203

将表排序规则更改为`utf8_bin`.

要更改包含现有列的表的默认字符集和排序规则（注意 convert to 子句）：

```
ALTER TABLE tableName CONVERT TO CHARACTER SET utf8 COLLATE utf8_bin 
```

在`utf8_general_ci`

```
ä = a
ö = o
ü = u 
```

但在`utf8_bin`

```
ä != a
ö != o
ü != u 
```

# c++ - 寻找相机之间的外在因素

> ID：13542598
> 
> 赞同：4
> 
> 时间：2012-11-24T15:26:28.720
> 
> 标签：c++, opencv, computer-vision, bundler, levenberg-marquardt

我处于需要根据图像对应关系找到两个/或多个摄像头之间的相对摄像头姿势的情况（因此摄像头不在同一点）。[为了解决这个问题，我尝试了与这里](http://www.morethantechnical.com/2012/02/07/structure-from-motion-and-3d-reconstruction-on-the-easy-in-opencv-2-3-w-code/)描述的相同的方法（下面的代码）。

```
cv::Mat calibration_1 = ...;
cv::Mat calibration_2 = ...;
cv::Mat calibration_target = calibration_1;
calibration_target.at<float>(0, 2) = 0.5f * frame_width;  // principal point
calibration_target.at<float>(1, 2) = 0.5f * frame_height; // principal point

auto fundamental_matrix = cv::findFundamentalMat(left_matches, right_matches, CV_RANSAC);
fundamental_matrix.convertTo(fundamental_matrix, CV_32F);
cv::Mat essential_matrix = calibration_2.t() * fundamental_matrix * calibration_1;
cv::SVD svd(essential_matrix);
cv::Matx33f w(0,-1,0,
    1,0,0,
    0,0,1);
cv::Matx33f w_inv(0,1,0,
    -1,0,0,
    0,0,1);
cv::Mat rotation_between_cameras = svd.u * cv::Mat(w) * svd.vt; //HZ 9.19 
```

但在我的大多数情况下，我得到的结果非常奇怪。所以我的下一个想法是使用一个成熟的捆绑调节器（它应该做我正在寻找的东西？！）。目前我唯一的大依赖是 OpenCV，他们只有一个未记录的捆绑调整实现。

所以问题是：

*   是否有没有依赖关系并使用允许商业使用的许可证的捆绑调节器？
*   还有其他简单的方法可以找到外在因素吗？
*   与相机距离非常不同的物体是否有问题？（大视差）

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T02:10:48.053

我也在解决同样的问题并面临更棘手的问题。这里有一些建议——

1.  在分解前修改基本矩阵：在分解前修改基本矩阵 [UW Vt] = SVD(E)，并且 new E' = diag(s,s,0) 其中 s = W(0,0) + W(1,1) / 2

2.  2 阶段基本矩阵估计：使用 RANSAC 内点重新计算基本矩阵

这些步骤应该使旋转估计更容易受到噪声的影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-24T06:20:49.400

您必须获得 4 种不同的解决方案，并选择具有最多 # 点具有正 Z 坐标的解决方案。解决方案是通过将基本矩阵的符号反转并用 w_inv 替换 w 来生成的，尽管您计算了 w_inv，但您并没有这样做。你在重用别人的代码吗？

# asp.net - 安装 sql server 后如何在 Visual Studio 2010 中创建数据库？

> ID：13542602
> 
> 赞同：1
> 
> 时间：2012-11-24T15:27:05.703
> 
> 标签：asp.net, visual-studio-2010, sql-server-2008

我想在我的网站中创建一个数据库（.mdf）。当我尝试通过以下方式添加 sql server 数据库时：

右键单击项目->添加新项目->Sql Server 数据库。我收到以下错误：![在此处输入图像描述](../Images/416aea573cd3353194f2a9c670729873.png)

我的机器上安装了 sql server 2008，我一直在使用它来连接到不同的 sql server 数据库，方法是进入 Visual Studio 的“服务器资源管理器”部分，如下所示： ![在此处输入图像描述](../Images/b4d6ec09c28ed433f55dbc93c90f5f4e.png)

但是当我尝试用我的网站创建数据库时，我遇到了问题。我正在使用 Visual Studio 2010。

请帮忙？

# python - 在python中创建一系列字符串

> ID：13542611
> 
> 赞同：-3
> 
> 时间：2012-11-24T15:27:31.350
> 
> 标签：python, string, list, series

有谁知道在 Python 中创建一系列连续调用的字符串的方法？

像'ABCDEF'然后先是'A'，然后是'B'然后是'C'等等？或者你可以从不同的角度调用它们，比如'D'然后'E'然后'F'然后'A'等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T16:12:58.830

对于启用起点、长度和围绕终点“旋转”的东西，您可以使用：（注意切片、`.index()`命令和方便的`ascii_uppercase`常量）

```
from itertools import islice, cycle
from string import ascii_uppercase

def func(start='A', length=1, source=ascii_uppercase):
    src = list(source)
    idx = src.index(start)
    cyc = cycle(src[idx:] + src[:idx])
    return ''.join(islice(cyc, length))

>>> func(length=10)
'ABCDEFGHIJ'
>>> func(length=10, start='X')
'XYZABCDEFG'
>>> func()
'A'
>>> func(length=3)
'ABC' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T15:29:31.143

我不确定你想要什么：

```
for c in "ABCDEF":
    print (c) 
```

一次会给你1个字符。或者您可以从中构建一个列表：

```
print(list("ABCDEF")) 
```

字符串是可下标的：

```
a = "ABCDEF"
print (a[1]) #B 
```

因此，您可以通过这种方式获取各个元素...

如果要构造一个从元素 3 开始的循环字符串：

```
a = "ABCDEF"
cycle = a[3:] + a[:3] 
```

然后可以像上面那样迭代或下标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T15:33:14.710

你的意思是这样的：

```
In [3]: for i in range(len(s)+1):
   ...:     print s[i:]
   ...: 
ABCDEF
BCDEF
CDEF
DEF
EF
F 
```

# java - 在 onCreate() 中更改文本时出现 Nullpointer 异常

> ID：13542615
> 
> 赞同：1
> 
> 时间：2012-11-24T15:27:59.917
> 
> 标签：java, android, nullpointerexception

我得到一个空指针异常，这是它放置的代码。

```
 final TextView view = (TextView) findViewById(R.id.textView2);
final Button next = (Button) findViewById(R.id.button1);
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    next.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            view.setText("These questions will help me to help you :)");
        }
    }); 
```

这是我的日志文件：

```
24 15:21:45.441: E/AndroidRuntime(376): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.icemountaininc.app/com.icemountaininc.app.MainActivity}: java.lang.NullPointerException
11-24 15:21:45.441: E/AndroidRuntime(376):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1660)
11-24 15:21:45.441: E/AndroidRuntime(376):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1752)
11-24 15:21:45.441: E/AndroidRuntime(376):  at android.app.ActivityThread.access$1500(ActivityThread.java:123)
11-24 15:21:45.441: E/AndroidRuntime(376):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:993)
11-24 15:21:45.441: E/AndroidRuntime(376):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-24 15:21:45.441: E/AndroidRuntime(376):  at android.os.Looper.loop(Looper.java:126)
11-24 15:21:45.441: E/AndroidRuntime(376):  at android.app.ActivityThread.main(ActivityThread.java:3997)
11-24 15:21:45.441: E/AndroidRuntime(376):  at java.lang.reflect.Method.invokeNative(Native Method)
11-24 15:21:45.441: E/AndroidRuntime(376):  at java.lang.reflect.Method.invoke(Method.java:491)
11-24 15:21:45.441: E/AndroidRuntime(376):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
11-24 15:21:45.441: E/AndroidRuntime(376):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
11-24 15:21:45.441: E/AndroidRuntime(376):  at dalvik.system.NativeStart.main(Native Method)
11-24 15:21:45.441: E/AndroidRuntime(376): Caused by: java.lang.NullPointerException
11-24 15:21:45.441: E/AndroidRuntime(376):  at android.app.Activity.findViewById(Activity.java:1741)
11-24 15:21:45.441: E/AndroidRuntime(376):  at com.icemountaininc.app.MainActivity.<init>(MainActivity.java:14)
11-24 15:21:45.441: E/AndroidRuntime(376):  at java.lang.Class.newInstanceImpl(Native Method)
11-24 15:21:45.441: E/AndroidRuntime(376):  at java.lang.Class.newInstance(Class.java:1424)
11-24 15:21:45.441: E/AndroidRuntime(376):  at android.app.Instrumentation.newActivity(Instrumentation.java:1022)
11-24 15:21:45.441: E/AndroidRuntime(376):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
11-24 15:21:45.441: E/AndroidRuntime(376):  ... 11 more 
```

请问有什么帮助吗？

被这个问题困了很久！

我使用 Android 的 SDK VERSION 8

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T15:30:43.640

实际上你得到了**NullPointerException**因为你`TextView view`和`Button next`是`NULL`。

**解决方案：**

您必须在Activity中定义`TextView view`和`Button next`after`setContentView()`方法。`onCreate()`

像：

```
setContentView(R.layout.activity_main);
final TextView view = (TextView) findViewById(R.id.textView2);
final Button next = (Button) findViewById(R.id.button1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T15:30:25.147

试试这个

```
final TextView view;
final Button next;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    view = (TextView) findViewById(R.id.textView2);
    next = (Button) findViewById(R.id.button1);
    next.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            view.setText("These questions will help me to help you :)");
        }
    }); 
```

在您的代码中

```
final TextView view = (TextView) findViewById(R.id.textView2);
final Button next = (Button) findViewById(R.id.button1); 
```

之前被调用

```
setContentView(R.layout.activity_main); 
```

这就是为什么意见没有得到解决

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T16:42:40.530

你得到空指针异常是因为你在 setContentView() 之前找到了按钮和 textViews。在了解布局之前，无法识别按钮和 textView。你的代码应该像 -

@Override public void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); setContentView(R.layout.activity_main);

```
 final TextView view = (TextView) findViewById(R.id.textView2);
   final Button next = (Button) findViewById(R.id.button1);
   next.setOnClickListener(new OnClickListener() 
 {

    public void onClick(View v) {
        view.setText("These questions will help me to help you :)");

    }
}); 
```

还有一个建议是不要对 UI 控件使用 final 修饰符。如果您遇到必须在每次按钮单击时更新视图的情况，则最终变量不会在每个按钮单击实例上被修改。

# java - Android 中的希伯来语短信

> ID：13542616
> 
> 赞同：5
> 
> 时间：2012-11-24T15:28:16.263
> 
> 标签：java, android, unicode, phonegap-plugins

我正在使用 Phonegap 创建旨在发送短信的插件。以下是我用来执行此操作的功能。

```
private void sendSMS(String phoneNumber, String message) {
  // Activity currentActivity = (Activity)this.ctx;
  SmsManager manager = SmsManager.getDefault();
  PendingIntent sentIntent = PendingIntent.getActivity(cordova.getContext(), 0, new Intent(), 0);
  manager.sendTextMessage(phoneNumber, null, message, sentIntent, null);
} 
```

当变量“消息”包含英语时，一切正常。但如果消息是希伯来语，我会收到错误消息。

请参阅以下希伯来语输入

סךהלכלמןמן2简约סלטיצוצצוציצוצצוצפלללללל.ותותלללללללללפסיפסייייייפספספספספספספספספסלללללללללללללללללללללללל

下面是一个包含文本描述的类。我怀疑问题出在 unicode 上，但我不知道如何解决。

请帮忙。

```
public class MenuEntry {
  public String getPid() {
    return pid;
  }
  public void setPid(String pid) {
    this.pid = pid;
  }
  public String getTitle() {
    return title;
  }
  public void setTitle(String title) {
    this.title = title;
  }
  public String getDescription() {
    return description;
  }
  public void setDescription(String description) {
    this.description = description;
  }
  public double getPrice() {
    return price;
  }
  public void setPrice(double price) {
    this.price = price;
  }
  public String getCategoryName() {
    return categoryName;
  }
  public void setCategoryName(String categoryName) {
    this.categoryName = categoryName;
  }
  public MenuEntry() {
    super();
    this.pid = "";
  }
  public String GetPriceAndDescription(int unit) {
    StringBuilder result = new StringBuilder();
    result.append(this.getTitle());
    result.append(" שווה ל ");
    result.append(this.getPrice());
    result.append(" כמות  ");
    result.append(unit);
    result.append("\n");
    return result.toString();
  }
  public String GetPriceAndDescription() {
    StringBuilder result = new StringBuilder();
    result.append(this.getTitle());
    result.append(" שווה ל ");
    result.append(this.getPrice());
    result.append("\n");
    return result.toString();
  }
  public MenuEntry(String pid, String title, String description, double price, String categoryName) {
    super();
    this.pid = pid;
    this.title = title;
    this.description = description;
    this.price = price;
    this.categoryName = categoryName;
  }
  private String pid;
  private String title;
  private String description;
  private double price;
  private String categoryName;
} 
```

请参阅下面的清单文件定义，以查看目标版本。

```
 <uses-sdk
    android:minSdkVersion="7"
    android:targetSdkVersion="15" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T19:49:35.977

我找到了答案。问题出在“SmsManager”类上。当消息太长时，该类抛出异常，但没有描述。

所以我需要使用 SmsManager 类的其他方法“sendMultipartTextMessage”。

```
private void sendSMS(String phoneNumber, String message) {

        SmsManager manager = SmsManager.getDefault();

        ArrayList<String> parts = manager.divideMessage(message);

        manager.sendMultipartTextMessage(phoneNumber, null, parts, null, null);

} 
```

# orbeon - 在重复网格中，我们不能为每一行的文本输出控件提供不同的标签

> ID：13542625
> 
> 赞同：-1
> 
> 时间：2012-11-24T15:30:08.693
> 
> 标签：orbeon

在 Orbeon Forms M16（最新）中构建重复网格中，我们不能为每一行的文本输出控件提供不同的标签。这不实用。在以前的里程碑版本中，这是可能的。这就是为什么我们不能像在 MS Excel 中那样在第一列和第一行中制作一个带有标题的简单表格。是否有解决方法 - 用其他方法制作一个在第一列和第一行中带有标题的简单表格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T06:45:01.423

问题已解决。我们必须做：
1）最大重复次数：1
2）按“在下面插入行而不是”+“按钮

# asterisk - 如何扩展具有不同上下文的可以相互通信？

> ID：13542636
> 
> 赞同：2
> 
> 时间：2012-11-24T15:30:55.717
> 
> 标签：asterisk

sip.conf

```
[101]
context = technical-office
[102]
context = employment-department 
```

扩展名.conf

```
[technical-office]
exten => 101,1,answer()
exten => 101,2,dial(sip/101)
exten => 101,3,hangup()

[employment-department]
exten => 102,1,answer()
exten => 102,2,dial(sip/102)
exten => 102,3,hangup() 
```

当我使用“101”分机拨打“102”时，出现错误“没有路由到目的地”。但是上下文是相同的没有错误

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T04:44:49.597

那是因为你没有正确的上下文。SIP 对等体 101 指向上下文技术办公室，而您在该上下文中没有分机 102。要使其正常工作，请使用：

sip.conf

```
 [101]
    context = technical-office
    [102]
    context = technical-office 
```

扩展名.conf

```
 [technical-office]
    exten => _1XX,1,answer()
    exten => _1XX,n,dial(sip/${EXTEN})
    exten => _1XX,n,hangup() 
```

哪部电话都在同一个上下文中，所以如果 101 拨 102，它会工作，如果 102 拨 101，它也会工作。实际上 _1XX 被称为模式，而 ${EXTEN} 是指您拨打的分机。这在 Asterisk 拨号方案中很常见。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-12T08:07:13.930

当然，您可以从一个上下文拨号到下一个上下文。

sip.conf：

```
[101]
context = technical-office
[102]
context = employment-department 
```

extensions.conf：

```
[technical-office]
include => dial-context

[employment-department]
include => dial-context

[dial-context]
exten => _1XX,1,answer()
exten => _1XX,n,dial(sip/${EXTEN})
exten => _1XX,n,hangup() 
```

您的示例不起作用，因为 exten => XXX 表示拨打的电话，而不是来自电话。如果您在拨号方案 (extensions.conf) 101 通过 102 上交换，您的示例将起作用，允许上下文 A 上的分机调用分机 102 并以另一种方式执行相同的操作。

检查[voip-info](http://www.voip-info.org/)或查找[Asterisk：电话的未来 (O'Reilly)](http://shop.oreilly.com/product/9780596009625.do)一书以完整介绍 Asterisk。

希望能帮助到你

# c++ - 如何在 C++ 中获取数组的长度？

> ID：13542640
> 
> 赞同：3
> 
> 时间：2012-11-24T15:31:26.870
> 
> 标签：c++

我试图为此编写自己的函数，但我得到了错误的结果

```
#include <iostream>

using namespace std;

template<typename T>
int array_length(T v[]) {
    return (sizeof v)/sizeof(T);
}

int main() {
    int v[] = {1, 2, 3, 4};
    cout << array_length(v) << endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T15:33:21.880

像这样的东西：

```
#include <cstddef> // for size_t

template< typename T, std::size_t N >
std::size_t length( const T (&)[N] )
{
  return N;
} 
```

用法

```
int data[100];
std::cout << length(data) << "\n"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T15:34:10.040

长度由数组提供。所以试试这个：

```
template <typename T, std::size_t N> std::size_t length( T (&)[N] ) {
    return N;
} 
```

[[`std::size_t`](http://en.cppreference.com/w/cpp/types/size_t)在 header 中找到`<cstddef>`。它是无符号整数类型。]

# asp.net - 在asp.net中注销后如何禁用浏览器的后退按钮？

> ID：13542643
> 
> 赞同：1
> 
> 时间：2012-11-24T15:31:45.590
> 
> 标签：asp.net

我想在登录 asp.net 后禁用浏览器的后退按钮。我试图把javascript像window.history.forward(1)函数或Response.Cache函数。该编码适用于我的 Web 应用程序。但是后退按钮没有被禁用。怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T15:36:05.307

我们无法禁用浏览器后退按钮。您可以尝试以下代码，它可能会有所帮助：-

```
 <META HTTP-EQUIV="CACHE-CONTROL" CONTENT="NO-CACHE">

 <META HTTP-EQUIV="EXPIRES" CONTENT="0">

 <meta http-equiv="pragma" content="no-cache"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T15:36:14.140

这是不可能的。回溯历史由浏览器维护，您需要关闭窗口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T16:16:19.487

也许您可以将登录用户重定向到您想要的页面，例如用户仪表板或当他们返回您的登录页面时？您可以使用会话来确定登录用户。

# java - Android 屏幕尺寸和密度。如何选择文字大小？

> ID：13542647
> 
> 赞同：1
> 
> 时间：2012-11-24T15:32:10.023
> 
> 标签：java, android, android-screen-support

我正在尝试了解 android 中的多屏支持。是的，我阅读了文档，但仍然有几个问题。

据我了解，我需要为每个密度创建可绘制对象，但是如何处理文本大小？

我想在我的活动上设置适合任何屏幕的标题（需要足够大并且不要扭曲文本）我在我的 Nexus7（大屏幕）上测试它看起来不错`android:textSize="100dp"'`

当我在具有“普通屏幕”大小的模拟器上启动它时，我会得到非常大的文本。那么为每个屏幕尺寸制作布局是正确的解决方案吗？

```
'layout'
'layout-large'
'layout-small'
.... 
```

只是制作`android:textSize="70dp"`普通屏幕和`android:textSize="50dp"`小屏幕？

另一个问题是如何以更有效的方式测试所有这些？我需要创建模拟器吗？在哪里获取创建模拟器以获得此结果的参数？

1.  超大屏幕
    *   低密度脂蛋白
    *   mdpi
    *   电视转播
    *   hdpi
    *   xhdpi
2.  大屏幕
    *   低密度脂蛋白
    *   mdpi
    *   电视转播
    *   hdpi
    *   xhdpi
3.  中屏
    *   低密度脂蛋白
    *   mdpi
    *   电视转播
    *   hdpi
    *   xhdpi
4.  小屏幕
    *   低密度脂蛋白
    *   mdpi
    *   电视转播
    *   hdpi
    *   xhdpi

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T15:33:39.690

对于文本大小，您应该使用`sp`单位。[文档说](http://developer.android.com/guide/topics/resources/more-resources.html#Dimension)：

> Scale-independent Pixels - 这类似于 dp 单位，但它也根据用户的字体大小偏好进行缩放。建议您在指定字体大小时使用此单位，以便根据屏幕密度和用户偏好进行调整。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T15:39:23.790

> 据我了解，我需要为每个密度创建可绘制对象，但是如何处理文本大小？

正如 WebnetMobile 所指出的，您首先使用`sp`，因为这会将用户选择的字体比例考虑在内。但是，您可能需要的还不止这些。

> 那么为每个屏幕尺寸制作布局是正确的解决方案吗？

我建议使用维度资源，根据不同场景的需要对文本大小维度进行不同的定义。

但是，在可能的情况下，将您的 UI 设计为在字体大小方面更加灵活。同样，如果您使用`sp`，*用户*可以在 Android 4.0+ 上更改文本的大小，使其变大或变小，以帮助他们阅读设备上的文本。因此，您不能假设您可以完全控制字体的大小，因此需要进行相应的设计。这与设计一个考虑用户在浏览器中调整字体大小的网站没有太大区别。

> 另一个问题是如何以更有效的方式测试所有这些？我需要创建模拟器吗？

对于您所关心的任何场景，您都需要模拟器或设备。

> 在哪里获取创建模拟器以获得此结果的参数？

在工具的（现在最新的）R21 版本上，您可以在 AVD 管理器的“设备定义”选项卡中设置屏幕大小和密度，然后根据需要根据这些定义创建 AVD。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T17:43:14.740

为了在不同的屏幕和密度下进行测试，您可以创建具有不同组合的模拟器。当我们创建模拟器设备时，我们可以设置密度（硬件下的抽象 LCD 密度）。

```
 ldpi - 120 
  mdpi - 160
  hdpi - 240
  xhdpi - 320 
```

您也可以在启动模拟器时设置屏幕大小

# c - 在 C 中使用分隔符拆分字符串 - 分段错误

> ID：13542663
> 
> 赞同：1
> 
> 时间：2012-11-24T15:33:46.737
> 
> 标签：c, arrays, string, split, char

我想编写一个将字符串拆分为 char 数组的函数。我知道结果数组总是只有两个元素——服务器名和服务器端口。我写了这个，但编译后它给了我“分段错误”：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

char* splitString(char stringToSplit[])
{
    int i = 0;
    char serverinfo[2];
    char *tmp;
    tmp = strtok(stringToSplit, ":");
    while (tmp != NULL)
    {
        serverinfo[i] = tmp;
        tmp = strtok(NULL, ":");
        i++;
    }
    return serverinfo;
}

int main(int argc, char **argv)
{
    char st[] = "servername:1234";
    char *tab = splitString(st);

    printf("%s\n", tab[0]);
    printf("%s\n", tab[1]);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T15:35:14.277

```
char serverinfo[2]; 
```

为两个 s 分配空间`char`，但你将`char*`s 存储在那里，所以让它

```
char* serverinfo[2]; 
```

但是你从函数中返回它，但是，函数返回后局部变量不再存在，所以你需要`malloc`它

```
char **serverinfo = malloc(2*sizeof *serverinfo); 
```

并将函数声明为

```
char **splitString(char stringToSplit[]) 
```

为正确的类型。

# android - Facebook 和 Android - GraphAPI 还是 FQL？

> ID：13542664
> 
> 赞同：1
> 
> 时间：2012-11-24T15:33:49.260
> 
> 标签：android, facebook, facebook-graph-api, facebook-fql, facebook-android-sdk

如果我想在移动 android 应用程序中向用户显示他的新闻提要\个人资料等，

我应该使用什么来获取数据？

GraphAPI 还是 FQL？

是否有任何数据在其中一种方法中可用但在另一种方法中不可用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T22:05:20.633

Fetch the data using the FB Android SDK, [https://developers.facebook.com/android/](https://developers.facebook.com/android/)

Then make FQL or Graph API calls:

[https://developers.facebook.com/docs/howtos/androidsdk/3.0/run-fql-queries/](https://developers.facebook.com/docs/howtos/androidsdk/3.0/run-fql-queries/)

[https://developers.facebook.com/docs/reference/android/3.0/Request](https://developers.facebook.com/docs/reference/android/3.0/Request)

You may find it easier to access some data via one method or the other. Check the fql tables and use the [Graph API Explorer](https://developers.facebook.com/tools/explorer) to inspect the data that is available.

FQL Tables: [https://developers.facebook.com/docs/reference/fql/toc/](https://developers.facebook.com/docs/reference/fql/toc/)

# javascript - 在 Node.js 中写入文件时创建目录

> ID：13542667
> 
> 赞同：201
> 
> 时间：2012-11-24T15:34:01.927
> 
> 标签：javascript, node.js

我一直在修补 Node.js，发现了一个小问题。我有一个脚本，它位于一个名为`data`. 我希望脚本将一些数据写入子目录中子目录中的文件`data`。但是我收到以下错误：

```
{ [Error: ENOENT, open 'D:\data\tmp\test.txt'] errno: 34, code: 'ENOENT', path: 'D:\\data\\tmp\\test.txt' } 
```

代码如下：

```
var fs = require('fs');
fs.writeFile("tmp/test.txt", "Hey there!", function(err) {
    if(err) {
        console.log(err);
    } else {
        console.log("The file was saved!");
    }
}); 
```

如果 Node.js 不退出以写入文件，任何人都可以帮助我找出如何让 Node.js 创建目录结构吗？

* * *

## 回答 #1

> 赞同：208
> 
> 时间：2012-11-24T18:54:26.743

## 节点 > 10.12.0

[fs.mkdir](https://nodejs.org/dist/latest-v10.x/docs/api/fs.html#fs_fs_mkdir_path_options_callback)现在接受`{ recursive: true }`如下选项：

```
// Creates /tmp/a/apple, regardless of whether `/tmp` and /tmp/a exist.
fs.mkdir('/tmp/a/apple', { recursive: true }, (err) => {
  if (err) throw err;
}); 
```

或承诺：

```
fs.promises.mkdir('/tmp/a/apple', { recursive: true }).catch(console.error); 
```

## 节点 <= 10.11.0

您可以使用[mkdirp](https://github.com/substack/node-mkdirp)或[fs-extra](https://www.npmjs.com/package/fs-extra)之类的软件包解决此问题。如果您不想安装软件包，请参阅下面的 Tiago Peres França 的回答。

* * *

## 回答 #2

> 赞同：167
> 
> 时间：2015-12-29T11:04:00.690

如果您不想使用任何额外的包，您可以在创建文件之前调用以下函数：

```
var path = require('path'),
    fs = require('fs');

function ensureDirectoryExistence(filePath) {
  var dirname = path.dirname(filePath);
  if (fs.existsSync(dirname)) {
    return true;
  }
  ensureDirectoryExistence(dirname);
  fs.mkdirSync(dirname);
} 
```

* * *

## 回答 #3

> 赞同：61
> 
> 时间：2017-08-02T16:09:41.047

使用[node-fs-extra](https://github.com/jprichardson/node-fs-extra)，您可以轻松完成。

## 安装它

```
npm install --save fs-extra 
```

然后使用`outputFile`方法。它的文档说：

> 几乎与`writeFile`（即覆盖）相同，除了如果父目录不存在，则创建它。

您可以通过四种方式使用它。

### 异步/等待

```
const fse = require('fs-extra');

await fse.outputFile('tmp/test.txt', 'Hey there!'); 
```

### 使用承诺

如果你使用[promises](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Using_promises)，代码如下：

```
const fse = require('fs-extra');

fse.outputFile('tmp/test.txt', 'Hey there!')
   .then(() => {
       console.log('The file has been saved!');
   })
   .catch(err => {
       console.error(err)
   }); 
```

### 回调样式

```
const fse = require('fs-extra');

fse.outputFile('tmp/test.txt', 'Hey there!', err => {
  if(err) {
    console.log(err);
  } else {
    console.log('The file has been saved!');
  }
}) 
```

### 同步版本

如果您想要同步版本，只需使用以下代码：

```
const fse = require('fs-extra')

fse.outputFileSync('tmp/test.txt', 'Hey there!') 
```

如需完整参考，请查看[`outputFile`文档](https://github.com/jprichardson/node-fs-extra/blob/master/docs/outputFile.md)和所有[node-fs-extra 支持的方法](https://github.com/jprichardson/node-fs-extra#methods)。

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2012-11-24T15:35:58.723

无耻的插头警报！

您必须检查所需路径结构中的每个目录，如果不存在则手动创建它。所有这样做的工具都已经在 Node 的 fs 模块中了，但是你可以简单地使用我的 mkpath 模块来完成所有这些：[https ://github.com/jrajav/mkpath](https://github.com/jrajav/mkpath)

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2016-12-06T10:52:37.560

由于我还不能发表评论，因此我发布了基于@tiago-peres-frança 出色解决方案的增强答案（谢谢！）。在路径中仅缺少最后一个目录的情况下，他的代码不会创建目录，例如输入是“C:/test/abc”并且“C:/test”已经存在。这是一个有效的片段：

```
function mkdirp(filepath) {
    var dirname = path.dirname(filepath);

    if (!fs.existsSync(dirname)) {
        mkdirp(dirname);
    }

    fs.mkdirSync(filepath);
} 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2016-11-02T17:02:41.687

我的建议是：**当你可以用几行代码轻松完成时，尽量不要依赖依赖项**

以下是您试图在**14**行代码中实现的目标：

```
fs.isDir = function(dpath) {
    try {
        return fs.lstatSync(dpath).isDirectory();
    } catch(e) {
        return false;
    }
};
fs.mkdirp = function(dirname) {
    dirname = path.normalize(dirname).split(path.sep);
    dirname.forEach((sdir,index)=>{
        var pathInQuestion = dirname.slice(0,index+1).join(path.sep);
        if((!fs.isDir(pathInQuestion)) && pathInQuestion) fs.mkdirSync(pathInQuestion);
    });
}; 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2021-01-07T15:52:51.493

与上述相同的答案，但`async await`已准备好使用！

```
const fs = require('fs/promises');
const path = require('path');

async function isExists(path) {
  try {
    await fs.access(path);
    return true;
  } catch {
    return false;
  }
};

async function writeFile(filePath, data) {
  try {
    const dirname = path.dirname(filePath);
    const exist = await isExists(dirname);
    if (!exist) {
      await fs.mkdir(dirname, {recursive: true});
    }

    await fs.writeFile(filePath, data, 'utf8');
  } catch (err) {
    throw new Error(err);
  }
} 
```

例子：

```
(async () {
  const data = 'Hello, World!';
  await writeFile('dist/posts/hello-world.html', data);
})(); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-05-10T10:19:48.820

我刚刚发布了这个模块，因为我需要这个功能。

[https://www.npmjs.org/package/filendir](https://www.npmjs.org/package/filendir)

它就像 Node.js fs 方法的包装器一样工作。因此，您可以像使用`fs.writeFile`and一样使用它`fs.writeFileSync`（异步和同步写入）

# libgit2 - libgit2 不获取更改，但始终获取所有内容

> ID：13542671
> 
> 赞同：3
> 
> 时间：2012-11-24T15:34:14.027
> 
> 标签：libgit2

我正在尝试使用 libgit2 首先克隆一个裸存储库，然后使用来自 github 源的更改对其进行更新。克隆工作正常：

```
git_repository *_repository
git_clone_bare(&_repository, REPOSITORY_URL, path, &transferProgressCallback, NULL);
git_repository_free(_repository); 
```

但是当我尝试从源 libgit2 更新存储库时，总是会再次下载整个存储库。它只是不只获取更改。我正在使用这段代码：

```
git_remote *remote;
git_repository *_repository;

git_repository_open(&_repository, path);
git_remote_load(&remote, _repository, "origin");
git_remote_connect(remote, GIT_DIR_FETCH);
git_remote_download(remote, &transferProgressCallback, NULL);

git_remote_disconnect(remote);
git_remote_update_tips(remote);
git_remote_free(remote); 
```

（我删除了错误处理。）我使用这样的回调来报告进度：

```
void transferProgressCallback(const git_transfer_progress *stats, void *payload) {
    float receivedMegaBytes = (float)stats->received_bytes/(1024*1024.0);
    float progress = ((float)stats->received_objects / (float)stats->total_objects) * 100.0;
    printf("Loading: %.1f (%.1f)\n", progress, receivedMegaBytes);
} 
```

根据回调，所有内容都已下载（与 git_clone_bare 的字节数相同）。我一定是错过了什么或做错了什么，对吧？但我不知道在哪里。我想要的是代码只获取更改（即本地不存在的东西）。但相反，它会不断获取整个存储库的所有内容。

请问，这里可能是什么问题？非常感谢您！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-24T18:12:47.293

这*很*奇怪。我无法重现该问题。

你运行的是哪个版本的 libgit2？

我已经在本地向 libgit2 提取套件添加了一个测试，它重现了您的问题，并且......它通过了**[当前最新的 libgit2 开发技巧](https://github.com/libgit2/libgit2/commit/c4d8df27bc4d3c0ef5ea46f4953614955fc4bdc2)**。已成功检查以下网址：

*   [http://github.com/libgit2/libgit2.git](http://github.com/libgit2/libgit2.git)
*   [http://github.com/libgit2/TestGitRepository.git](http://github.com/libgit2/TestGitRepository.git)
*   [https://github.com/libgit2/libgit2.git](https://github.com/libgit2/libgit2.git)
*   [https://github.com/libgit2/TestGitRepository.git](https://github.com/libgit2/TestGitRepository.git)

```
static void transferProgressCallback(const git_transfer_progress *stats, void *payload)
{
    bool *invoked = (bool *)payload;
    *invoked = true;
}

void test_network_fetch__doesnt_retreive_a_pack_when_the_repository_is_up_to_date(void)
{
    git_repository *_repository;
    git_remote *remote;
    bool invoked = false;

    cl_git_pass(git_clone_bare(&_repository, "https://github.com/libgit2/TestGitRepository.git", "./fetch/lg2", NULL, NULL));
    git_repository_free(_repository);

    cl_git_pass(git_repository_open(&_repository, "./fetch/lg2"));

    cl_git_pass(git_remote_load(&remote, _repository, "origin"));
    cl_git_pass(git_remote_connect(remote, GIT_DIR_FETCH));

    cl_assert_equal_i(false, invoked);

    cl_git_pass(git_remote_download(remote, &transferProgressCallback, &invoked));

    cl_assert_equal_i(false, invoked);

    cl_git_pass(git_remote_update_tips(remote));
    git_remote_disconnect(remote);

    git_remote_free(remote);
    git_repository_free(_repository);
} 
```

## 更新：

我已经向 libgit2 项目发送了一个拉取请求，以确保测试也通过 CI 服务器 Travis。

*   **[拉取请求](https://github.com/libgit2/libgit2/pull/1102)**
*   **[PR 构建日志](https://travis-ci.org/libgit2/libgit2/builds/3342172)**
*   **[具体测试结果](https://travis-ci.org/libgit2/libgit2/jobs/3342175/#L1075)**

## 更新 2：

好的，我已经进行了更多故障排除，但仍然无法重现该问题。

*   我通过 Web 界面在 GitHub 上创建了一个新存储库
*   通过 bash 会话，我创建了一个提交，然后将其推送到上游
*   然后我通过 libgit2 将它克隆到一个新的临时文件夹中。已下载 3 个对象
*   然后我再次获取它，没有下载任何内容。
*   回到 bash 会话，我创建了另一个提交并将其推送到上游
*   回到 libgit2 代码，再次获取从第二次提交下载 3 个新对象。

下面的代码，即使这不是一个真正的测试（因为它需要用户的一些交互），也演示了上面解释的内容。

```
void test_network_fetch__retrieve_a_pack_when_the_remote_repository_has_been_updated(void)
{
    git_repository *_repository;
    git_remote *remote;
    bool invoked = false;

    /*
     * $ mkdir /tmp/so-check/ && cd /tmp/so-check/
     * 
     * $ touch README.md
     * 
     * $ git init
     * Initialized empty Git repository in d:/temp/so-check/.git/
     * 
     * $ git add README.md
     * 
     * $ git commit -m "first commit"
     * [master (root-commit) e3454be] first commit
     *  0 files changed
     *  create mode 100644 README.md
     * 
     * $ git remote add origin https://github.com/nulltoken/so-check.git
     * 
     * $ git push -u origin master
     * Username for 'https://github.com': nulltoken
     * Password for 'https://nulltoken@github.com':
     * Counting objects: 3, done.
     * Writing objects: 100% (3/3), 212 bytes, done.
     * Total 3 (delta 0), reused 0 (delta 0)
     * To https://github.com/nulltoken/so-check.git
     *  * [new branch]      master -> master
     * Branch master set up to track remote branch master from origin.
     * 
     * $
     */

    cl_git_pass(git_clone_bare(&_repository, "https://github.com/nulltoken/so-check.git", "./fetch/soc", NULL, NULL));
    git_repository_free(_repository);

    cl_git_pass(git_repository_open(&_repository, "./fetch/soc"));

    cl_git_pass(git_remote_load(&remote, _repository, "origin"));
    cl_git_pass(git_remote_connect(remote, GIT_DIR_FETCH));

    cl_assert_equal_i(false, invoked);

    cl_git_pass(git_remote_download(remote, &transferProgressCallback, &invoked));

    cl_assert_equal_i(false, invoked);

    cl_git_pass(git_remote_update_tips(remote));
    git_remote_disconnect(remote);

    git_remote_free(remote);
    git_repository_free(_repository);

    /*
     * $ mkdir /tmp/so-check2 && cd /tmp/so-check2
     * 
     * $ git clone https://github.com/nulltoken/so-check.git .
     * Cloning into '.'...
     * remote: Counting objects: 3, done.
     * remote: Total 3 (delta 0), reused 3 (delta 0)
     * Unpacking objects: 100% (3/3), done.
     *
     * $ echo "Test" > README.md
     * 
     * $ git add README.md
     * 
     * $ git commit -m "Now with a meaningful content"
     * [master 9c6c300] Now with a meaningful content
     *  1 file changed, 1 insertion(+)
     *
     $ git push
     * Username for 'https://github.com': nulltoken
     * Password for 'https://nulltoken@github.com':
     * Counting objects: 5, done.
     * Writing objects: 100% (3/3), 262 bytes, done.
     * Total 3 (delta 0), reused 0 (delta 0)
     * To https://github.com/nulltoken/so-check.git
     *    e3454be..9794f71  master -> master
     * $
     */

    /* Set a breakpoint below in order to push the additional commit.
     * Once it's done, let the code run again.
     */
    cl_git_pass(git_repository_open(&_repository, "./fetch/soc"));

    cl_git_pass(git_remote_load(&remote, _repository, "origin"));
    cl_git_pass(git_remote_connect(remote, GIT_DIR_FETCH));

    cl_assert_equal_i(false, invoked);

    cl_git_pass(git_remote_download(remote, &transferProgressCallback, &invoked));

    cl_assert_equal_i(true, invoked);

    cl_git_pass(git_remote_update_tips(remote));
    git_remote_disconnect(remote);

    git_remote_free(remote);
    git_repository_free(_repository);
}
```

在控制台的输出下方，是第二次下载的结果。可以注意到，只检索了 3 个对象：

```
Fetching: (0/3)
Fetching: (1/3)
Fetching: (2/3)
Fetching: (3/3)
Fetching: (3/3) 
```

并且存储库包含 6 个对象（第一次提交中的 3 个，第二次提交中的 3 个）：

```
$ git count-objects --verbose
count: 6
size: 0
in-pack: 0
packs: 0
size-pack: 0
prune-packable: 0
garbage: 0 
```

**从我的角度来看，看起来 libgit2 确实能够下载差异包。**

# algorithm - 设计和分析线性时间算法

> ID：13542677
> 
> 赞同：4
> 
> 时间：2012-11-24T15:34:57.373
> 
> 标签：algorithm, linear-search

> 设计和分析一个线性时间算法，以确定在 n 个元素的列表中是否存在一个在列表中至少重复 n/10 次的元素。

我怎样才能做到这一点？我发布我自己的想法作为答案。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-24T15:59:01.087

我认为这些元素是可比较的。

执行以下[选择算法](http://en.wikipedia.org/wiki/Selection_algorithm)：n/10th、2n/10th、...、9n/10th、10(n/10)th 最小元素¹

这些是你的候选人。检查每个问题的#occurrences，如果其中一个重复至少 n/10 次，则答案是`true`。否则，它是`false`。

**证明：**
如果一个元素至少出现 n/10 次，那么它必须与`k*n/10`for some `k`(在排序列表中) ² “相交” 。因此，该元素将被选为“候选者”，稍后您将准确地发现（通过计算）它出现了多少次，并将返回`true`。

如果没有元素重复`n/10`多次，则算法将`false`在检查每个候选者的最后一步中轻松返回。

**复杂度**：
每个选择算法都是`O(n)`，做 10 次。此外，对于每个候选人，都需要对列表进行线性扫描，这也是总体上的`O(n)`总计`O(n)`——但常数很糟糕。

* * *

**说明**：

(1) 选择算法会在一个有序列表中找到索引n/10, 2n/10,...9n/10 中的元素，而算法本身只是`O(n)`

（2）我们看一下`[1,2,..,100,100,..,100]`（11乘以100）的例子。
请注意，列表已排序，元素 100 出现在：`list[9*n/10]`(index `9*n/10`) 中。选择算法的思想是——即使你打乱列表`select(list,9*n/10)`——总是会返回相同的元素——在本例中为 100——因为它是`9n/10`排序列表中的第 th 个元素（这就是算法所做的）。

`e`现在，您可以看到对于重复次数的每个元素（让它成为） `n/10`，都有一些索引`i`，使得在列表的排序版本中，索引中的所有元素都`i,i+1,...,i+n/10`将是`e`。这些指数之一***必须***是`k*n/10`某些指数之一`k`（说服自己为什么！）。因此，选择算法`k*n/10`将产生`e`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-24T16:51:30.673

让我告诉你一个聪明的单通算法来找到一个多数元素（一个频率高于 n/2 的元素），你应该看看如何适应它：

```
best = null
count = 0

foreach x in list:
   if (count == 0)
      count++
      best = x
   else if (best == x)
      count++
   else
      count--

return best 
```

如果存在多数元素，则上述算法将找到它（一次通过，恒定空间）。一旦你弄清楚它是如何工作的，你就会看到它如何适应 n/10 的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T15:52:53.783

我的解决方案是将列表分成 10/n 个组，每个组包含 10 个元素，然后对每个组执行随机选择排序，这将花费 O(1)*O(n) 时间，即 O(n ）。

由于要满足要求，候选元素必须在 n/10 组中的每一个中显示，我们可以对第一组中的 10 个元素中的每一个执行扫描，这将花费 10*O(n) 时间。

所以算法的总时间是O(n)+10*O(n)，还是O(n)。

但是，如果组中的元素如下所示，这将不起作用：

```
1,2,3,4,5,6,7,8,9,10
11,11,11,11,11,11,11,11,11,11
...
11,11,11,11,11,11,11,11,11,11 
```

我的算法将返回不存在这样`11`的元素，而实际上是出现超过 n/10 次的元素。

# c++ - 调用 STL 容器的内置函数

> ID：13542678
> 
> 赞同：2
> 
> 时间：2012-11-24T15:34:58.293
> 
> 标签：c++

我正在用 C++ 编程，但不知道如何访问父类中的 STL 容器。我有以下课程：

```
class Card
class CardPile : private vector<Card*>
class Deck : public CardPile{Foo()} 
```

我知道如果`Foo()`在 CardPile 类中，我可以用`size()`. 我将如何`size()`从`Foo()`.

编辑：不幸的是，我不允许更改任何类定义

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T15:40:16.803

`size()`是 的私有方法`CardPile`，但如果适合设计，您可以将其公开或受保护：

```
class CardPile : private std::vector<Card*>
{
 public: // or protected
  using std::vector<Card*>::size;
}; 
```

这将允许您在`size()`任何地方（公共）或派生类（受保护）调用。

但请记住，标准库容器并非旨在继承，特别是公开继承。所以你可以改变你的`CardPile`类来保存一个`std::vector<Card*>`数据成员。之后，如果您当前正在处理动态分配的`Card`对象，您可能会考虑在向量中保存智能指针。

```
class CardPile : 
{
 public: // or protected
  std::vector<Card*>::size_type size() const { return cards_.size(); }
 private: 
  std::vector<Card*> cards_
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T16:05:33.647

```
class Card {};

class CardPile : private std::vector<Card*> 
{};

class Deck : public CardPile
{
   public:
   void Foo(){this->size();} //FAIL
}; 
```

通过私有继承，您实际上是在说您想要实现，但接口不是您想要公开的。所以你真的应该提供一个接口来反映你正在建模的对象。

因此，除非您公开继承（或使用 juanchopanzas 建议）来公开所有（部分）vectors 接口，否则您需要提供调用您需要的特定vector 方法的方法（A Cardpile Interface）。就像是：

```
class CardPile : private std::vector<Card*> 
{ size_t pileHeight() {return size(); }; 
```

这里有更多关于私有/受保护与公共继承的讨论：

[为什么我们实际上需要 C++ 中的 Private 或 Protected 继承？](https://stackoverflow.com/questions/374399/why-do-we-actually-need-private-or-protected-inheritance-in-c)

# c# - DateTime.ParseExact 在 windows xp 上引发异常

> ID：13542683
> 
> 赞同：0
> 
> 时间：2012-11-24T15:35:43.117
> 
> 标签：c#, .net, visual-studio-2010, datetime, window

我有以下代码行：

```
dt.Rows[0]["duedate"] = DateTime.ParseExact(textBox_duedate.Text, "dd-MM-yyyy", CultureInfo.InvariantCulture); 
```

其中“duedate”是 DataTable dt 中的 DateTime 列。当我在具有 .Net 框架 3.5 的 Windows 7 上运行它时，它运行良好，但是当我在具有 .Net 框架 3.5（它还安装了 .Net 框架 2.0）的 Windows XP SP3 上运行它时，我的应用程序抛出异常“字符串不是被识别为有效的日期时间......”

当我在异常详细信息中看到“加载的程序集信息”时，似乎加载了 .net 框架程序集版本 2.0。这也可能是问题吗？此外，如何让我的应用程序使用 .net 程序集 3.5 版？我正在 Visual Studio 2010 中编译我的应用程序。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T15:42:35.327

我相信这不是框架的问题，因为它是操作系统当前文化的问题。两台电脑在其操作系统中都有不同的文化设置，这就是发生此问题的原因。

试试这个

```
dt.Rows[0]["duedate"] = DateTime.ParseExact(textBox_duedate.Text, 
                            new CultureInfo("en-US")).ToString("dd-MM-yyyy"); 
```

希望这会有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T15:56:36.600

也许输入字符串包含空格？你可以`Trim`在解析它之前。

# php - Laravel 中的菜单逻辑放在哪里？

> ID：13542688
> 
> 赞同：10
> 
> 时间：2012-11-24T15:36:03.240
> 
> 标签：php, menu, laravel

在 Laravel 中放置菜单数据逻辑的最佳概念位置是什么？如果我使用菜单包放在哪里。在`Base_Controller`创建附加功能或不同的东西？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-01T04:06:46.870

> **注意**：这个答案是为 Laravel 3 编写的，可能适用于最新的 Laravel 4，也可能不适用

* * *

我最喜欢的创建动态菜单的方法是通过将菜单部分与主布局分离并通过 Laravel 的 Composer 注入菜单数据来实现（不要将它与 Composer PHP 包管理器混淆，它们是不同的东西）

```
<!-- layouts/default.blade.php -->

<div id="header">Title</div>

<div id="menu">
    @render('parts.menu')
</div>

<div id="content"></div>
<div id="footer"></div> 
```

```
<!-- parts/menu.blade.php -->

<ul>
@foreach($menuitems as $menuitem)
    <li>{{ $menuitem->title }}</li>
@endforeach
</ul> 
```

最后我们可以通过 composer 注入变量。

```
<?php 

// application/routes.php

View::composer('parts.menu', function($view){
    $view->with('menuitems', Menu::all());
}); 
```

这样每次`parts/menu.blade.php`调用时，Composer 都会拦截视图并将其注入`$menuitems`变量。与使用`with`on相同`return View::make('blahblah')->with( 'menuitems', Menu::all() )`

希望能帮助到你 ：）

* * *

**编辑**：如果你不喜欢有逻辑，`routes.php`你可以把它放进去，`start.php`并考虑 Jason Lewis 将其拆分`start.php`成单独文件的方式。

`application`在调用中创建一个目录`start`并用一些文件填充它。

```
 + application [DIR]
    \-> + start [DIR]
        |-> autoloading.php
        |-> composers.php
        |-> filters.php
        \-> validation.php 
```

然后将这些代码行添加到您的末尾`application/start.php`

```
require __DIR__ . DS . 'start' . DS . 'autoloading.php';
require __DIR__ . DS . 'start' . DS . 'filters.php';
require __DIR__ . DS . 'start' . DS . 'composers.php';
require __DIR__ . DS . 'start' . DS . 'validation.php'; 
```

你明白了。将作曲家函数放在 composers.php 中。

在此处阅读整篇文章：http: [//jasonlewis.me/article/laravel-keeping-things-organized](http://jasonlewis.me/article/laravel-keeping-things-organized)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T17:26:45.847

[在视图](http://laravel.com/docs/views#view-composers)编辑器中获取数据并使用[HTML 宏](http://laravel.com/docs/views/html#custom-macros)生成 HTML 怎么样？

Laravel 经常有很多做事的方式。也就是说，这有时可能会让人有点不知所措和困惑。

# php - 获取相关表单字段的列表作为关联数组

> ID：13542692
> 
> 赞同：2
> 
> 时间：2012-11-24T15:36:18.727
> 
> 标签：php, javascript, forms

主要作为个人实践，我正在为我正在开发的个人网站编写框架。目前我正在尝试创建一种在我的网站上显示表单的通用方式。我正在使用 JSON 模型对表单进行建模，该表单由 PHP 转换为 HTML。我目前试图允许的是这样的：

```
[type] [contact address]
[type] [contact address]
+ Add More 
```

我知道对于像“type[]”这样的表单元素名称，各种类型字段的值作为数组发送到 php。但是，在这种情况下，a`type`和 a`contact address`属于一起。我知道实现这一点的各种方法，例如循环类型，然后获取相关的其他字段，但是以某种方式将其转换为关联数组似乎更容易在代码中使用。

请注意，我知道实现这一目标的各种方法，但我正在尝试一些最佳实践。我更喜欢在 PHP 中执行此操作，因为我试图尽量减少我网站上的 javascript 数量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T15:40:14.193

您实际上可以构建多维数组，例如`contact[id][type]`和`contact[id][address]`。因此，如果您有一个`id`，如果您要添加新的，这可能是一个增量值，请`id`为两者提供相同的值。PHP 会将其视为一个多维数组，例如`$_POST['contact'][1]['type'] == 'sometype, $_POST['contact'][1]['address'] == 'theaddress'`.

因此，您的新表单输入如下所示：

```
<input id='someid_type_123' name='contact[123][type]' />
<input id='someid_address_123' name='contact[123][address]' />

<input id='someid_type_124' name='contact[124][type]' />
<input id='someid_address_124' name='contact[124][address]' /> 
```

然后你可以循环`$_POST['contact']`：

```
foreach ($_POST['contact'] as $id => $values) {
  echo $values['type'] . ' ' . $values['address'];
} 
```

with 示例输入`var_dump($_POST)`看起来像：

```
array(1) {
  ["contact"]=>
  array(2) {
    [123]=>
    array(2) {
      ["type"]=>
      string(5) "type1"
      ["address"]=>
      string(5) "addr1"
    }
    [124]=>
    array(2) {
      ["type"]=>
      string(5) "type2"
      ["address"]=>
      string(5) "addr2"
    }
  }
} 
```

用于在 JavaScript 中生成 id 的方法（假设您事先不知道它们）完全取决于您。您可以在`1`每次单击`add more`链接时启动一个变量并增加它。的值`id`并不重要，只要输入对的值相同即可。

```
// Initialize curId on page load.
var curId = 1;

addMoreLink.onclick = function() {
  // append the new inputs using curId
  // and then increment the value
  curId++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T15:39:19.223

您需要一个键来将所有相关元素结合在一起。像唯一用户 ID 或系统中**唯一**的任何东西。因此，每个类型的元素都可以是任何东西，但如果它们属于一个父元素（如用户/客户等），那么它们必须共享父对象 ID。我怀疑有什么更简单的

# awk - 如何删除文本文件中的重复单词

> ID：13542693
> 
> 赞同：2
> 
> 时间：2012-11-24T15:36:55.890
> 
> 标签：awk, grep, duplicates

我有文本文件：

```
abandonovať
abandonovať, neabandonovať
abandonovať, abandonujem
abandonovať, abandonuješ
abandonovať, abandonuje
abandonovať, abandonuje
abandonovať, abandonuje
abandonovať, neabandonujem
abandonovať, neabandonuješ 
```

我想删除每个重复的单词。它看起来像这样：

```
abandonovať
neabandonovať
abandonujem
abandonuješ
abandonuje
neabandonujem
neabandonuješ 
```

有人知道如何在 GREP、AWK 中制作它...？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T15:52:51.360

这是一种使用方法`GNU awk`：

```
awk -F "[, ]" '{ for(i=1;i<=NF;i++) if (!a[$i]++ && $i != "") print $i }' file 
```

结果：

```
abandonovať
neabandonovať
abandonujem
abandonuješ
abandonuje
neabandonujem
neabandonuješ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-24T15:54:28.897

您可以尝试使用：

```
grep -o '\w*' a.txt | sort | uniq 
```

其中 a.txt 是您的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T20:02:25.683

谢谢你们，在 GREP 中它可以工作，但它按字母对单词进行排序。在 AWK 中它也可以工作，但我还有一个小问题。我的文本文件是：

```
abandonovať
abandonovať, neabandonovať
abandonovať, abandonujem
.
.
. 
```

如果我在 awk 中输入您的代码，我的结果是：

```
abandonovať
abandonovať,
neabandonovať
abandonujem
.
.
. 
```

一个词有两次。一次带“，”，一次不带“，”。

# c - 在文件中搜索字符串

> ID：13542694
> 
> 赞同：2
> 
> 时间：2012-11-24T15:37:06.757
> 
> 标签：c, file, search

我必须在文件中搜索输入的字符串，但下面的代码不起作用。它总是说“在字典中找不到。文件（称为`Dictionary.txt`）的内容如下：

```
pow
jaw
pa$$word 
```

代码是：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define MAX 30

main()
{
    char inPassword[MAX + 1];
    printf("\nEnter a password: ");
    gets(inPassword);

    printf("\n\nYou entered: %s, please wait, checking in dictionary.\n\n",inPassword);
    checkWordInFile("Dictionary.txt",inPassword);

    printf("\n\n\n");
    system("pause");
}//end of main

void checkWordInFile(char *fileName, char *password);
{
    char readString[MAX + 1];
    FILE *fPtr;
    int iFound = -1;
    //open the file
    fPtr = fopen(fileName, "r");

    if (fPtr == NULL)
    {
        printf("\nNo dictionary file\n");
        printf("\n\n\n");
        system("pause");
        exit(0);    // just exit the program
    }

    while(fgets(readString, MAX, fPtr))
    {
            if(strcmp(password, readString) == 0)
        {
            iFound = 1;
        }

    }

    fclose(fPtr);

    if( iFound > 0 )
    {
        printf("\nFound your word in the dictionary");
    }
    else
    {
        printf("\nCould not find your word in the dictionary");
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T15:49:51.277

fgets() 将 \n 留在字符串末尾，除非 EOF。这修复了它：

```
while(fgets(readString, MAX, fPtr))
{
    size_t ln = strlen(readString);
    if (ln && readString[ln-1] == '\n') { readString[ln-1] = 0; --ln; }
    if(ln && strcmp(password, readString) == 0)
    {
        iFound = 1;
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T17:54:16.117

我将如何更改此函数以搜索此文件包含的子字符串？例如，如果我输入一个单词“repow234”，我应该会收到一条消息，指出这是不正确的，因为“pow”是文件，不能使用

这不起作用：

```
while(fgets(readString, MAX, fPtr))
{
    if (strstr( password, readString) != NULL)
    {
        iFound = 1;
    }
}

fclose(fPtr);

if( iFound > 0 )
{
    printf("\nThis password cannot be used because it contains the word in the dictionary");
}
else
{
    printf("\nThis password can be used");
} 
```

# php - 在服务器 asp.net/php 上注入 javascript 函数

> ID：13542696
> 
> 赞同：3
> 
> 时间：2012-11-24T15:38:19.370
> 
> 标签：php, javascript, asp.net

我创建了一个小型 javascript 库，它使得使用 POST 和 JSON 进行 ajax 调用对于 webmethods 来说更加容易。现在我仍然需要为每个匹配的 webmethod 在 javascript 中创建一个函数存根。我主要想在asp.net中做，如果可能的话，在php中做的是，在将页面发送到客户端之前，服务器会检查暴露的webmethods并在发送之前自动在页面上的javascript中注入存根给客户的页面。

在 ASP.NET 中，我确信有某种方法可以使用反射来找到这些，然后在发送之前通过某种方法将 javascript 注入页面。我确定我可以弄清楚反射部分，但不确定如何从服务器将 javascript 注入页面。**有谁知道如何将javascript注入服务器端的页面？**

此外，php 是否有办法反映它的功能也可以做到这一点？如果这个解决方案可以在多个平台上运行，那就太酷了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T15:55:29.970

您可以使用：

```
ClientScript.RegisterClientScriptBlock(GetType(), "FunctionName", "code", true); 
```

您还检查方法是否已经存在：

```
ClientScript.IsClientScriptBlockRegistered(GetType(), "FunctionName"); 
```

如果您想这样做，您甚至可以插入对回发（或回调）的引用：

```
ClientScript.GetPostBackEventReference(..)
ClientScript.GetCallbackEventReference(..) 
```

# android - 使 NFC/Beam 更加自动化

> ID：13542697
> 
> 赞同：5
> 
> 时间：2012-11-24T15:38:35.847
> 
> 标签：android, nfc, hce, nfc-p2p, android-beam

我正在向我的应用程序添加 NFC/Beam 功能，我希望它尽可能自动地工作。我想摆脱发送方的“Touch To Beam”屏幕和接收方的“新标签扫描”屏幕。基本上，我希望它像三星广告中那样工作！！！我在stackoverflow中读到似乎没有办法摆脱“Touch To Beam”屏幕，但是我希望有人有一些更新的信息或知道如何删除接收器屏幕。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-16T05:37:54.667

## 发送方

在两个 Android (4.0+) 设备之间使用 NFC 点对点通信（又名 Android Beam）时，无法避免 Beam UI。因此，如果没有“Touch to Beam”，就无法传输数据。

在 Android Beam（实际上是 Android 2.3.3-2.3.7）之前，这可以通过前台 NDEF 推送（现在 (a) 已弃用并且 (b) 在 Android 4.0+ 上通过 Beam 实现）来实现。在这种情况下，NDEF 消息在没有“Touch to Beam”窗口的情况下立即传输。

从 Android 4.4 开始，可以在没有 Beam UI 的情况下通过 NFC 在两台 Android 设备之间进行通信（实际上根本不使用 Android Beam 和点对点模式）：如果两台设备都是 4.4+，则一台设备可以使用 Android HCE 模拟非接触式智能卡，一个设备可以使用读卡器模式 API（这只适用于 4.4 中引入的读卡器模式 API，因此两台设备都需要 4.4+）与模拟的智能卡通信。

## 接收方

如果你通过 Beam 发送 NDEF 消息，你至少可以让接收方做你想做的事。在这种情况下，您需要在应用的 AndroidManifest.xml 中注册一个正确的 NDEF_DISCOVERED 意图过滤器（与发送的 NDEF 消息的第一个 NDEF 记录的记录类型/数据类型匹配）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T16:53:32.877

您可以通过foregroundDispatch [http://developer.android.com/guide/topics/connectivity/nfc/advanced-nfc.html](http://developer.android.com/guide/topics/connectivity/nfc/advanced-nfc.html)手动处理 发送，这将允许您的应用程序自动发送。

至于接收，您可以使用活动来捕获意图并将其转发到服务进行处理。

# python - 如何使 python apt 库中的提交函数静音？

> ID：13542698
> 
> 赞同：3
> 
> 时间：2012-11-24T15:38:39.077
> 
> 标签：python, apt

我使用 python apt 库，我希望该`commit()`函数不会产生任何输出。

我在网上搜索过，发现 fork 函数可以解决问题，但我不知道该怎么做，或者是否存在其他方法。我不使用任何 GUI，我通过终端工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-10T16:18:25.640

最简单的解决方案可能是使用类似的东西：

```
class LogInstallProgress(apt.progress.base.InstallProgress):
    def fork(self):
        pid = os.fork()
        if pid == 0:
            logfd = os.open("dpkg.log", os.O_RDWR | os.O_APPEND | os.O_CREAT, 0o644)
            os.dup2(logfd, 1)
            os.dup2(logfd, 2)
        return pid 
```

然后在 commit() 中：

```
 cache.commit(install_progress=LogInstallProgress()) 
```

但要小心，注意 deb 包可能会做 conffile 提示和类似的事情，所以你会想要覆盖 conffile() （还有错误）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T16:28:11.883

我认为使用 fork 只是一种可能性。我已经尝试重定向 sys.stdout 甚至 sys.stderr ：No Joy，它不会工作。

# java - 为什么 neo4j 的 .db 文件路径无效？

> ID：13542701
> 
> 赞同：1
> 
> 时间：2012-11-24T15:39:02.877
> 
> 标签：java, neo4j, dbpedia

我正在尝试配置我的`neo4j`服务器（打开`Mac`）以使用`dbpedia4neo`这里是文件 `neo4j-server.properties`：

```
################################################################
# Neo4j configuration
#
################################################################

#***************************************************************
# Server configuration
#***************************************************************

# location of the database directory 
org.neo4j.server.database.location=/Users/0x90/dbpedia4neo/index.db

# let the webserver only listen on the specified IP. Default
# is localhost (only accept local connections). Uncomment to allow
# any connection. Please see the security section in the neo4j 
# manual before modifying this.
#org.neo4j.server.webserver.address=0.0.0.0

#
# HTTP Connector
#

# http port (for all data, administrative, and UI access)
org.neo4j.server.webserver.port=7474

#
# HTTPS Connector
#

# Turn https-support on/off
org.neo4j.server.webserver.https.enabled=true

# https port (for all data, administrative, and UI access)
org.neo4j.server.webserver.https.port=7473

# Certificate location (auto generated if the file does not exist)
org.neo4j.server.webserver.https.cert.location=conf/ssl/snakeoil.cert

# Private key location (auto generated if the file does not exist)
org.neo4j.server.webserver.https.key.location=conf/ssl/snakeoil.key

# Internally generated keystore (don't try to put your own
# keystore there, it will get deleted when the server starts)
org.neo4j.server.webserver.https.keystore.location=data/keystore

#*****************************************************************
# Administration client configuration
#*****************************************************************

# location of the servers round-robin database directory. possible values:
# - absolute path like /var/rrd
# - path relative to the server working directory like data/rrd
# - commented out, will default to the database data directory.
org.neo4j.server.webadmin.rrdb.location=data/rrd

# REST endpoint for the data API
# Note the / in the end is mandatory
org.neo4j.server.webadmin.data.uri=/db/data/

# REST endpoint of the administration API (used by Webadmin)
org.neo4j.server.webadmin.management.uri=/db/manage/

# Low-level graph engine tuning file
org.neo4j.server.db.tuning.properties=conf/neo4j.properties

# Comma separated list of JAX-RS packages containing JAX-RS resources, one package name for each mountpoint.
# The listed package names will be loaded under the mountpoints specified. Uncomment this line
# to mount the org.neo4j.examples.server.unmanaged.HelloWorldResource.java from neo4j-examples
# under /examples/unmanaged, resulting in a final URL of
# http://localhost:7474/examples/unmanaged/helloworld/{nodeId}
#org.neo4j.server.thirdparty_jaxrs_classes=org.neo4j.examples.server.unmanaged=/examples/unmanaged

#*****************************************************************
# HTTP logging configuration
#*****************************************************************

# HTTP logging is disabled. HTTP logging can be enabled by setting this property to 'true'.
org.neo4j.server.http.log.enabled=false 

# Logging policy file that governs how HTTP log output is presented and archived.
# Note: changing the rollover and retention policy is sensible, but changing the
# output format is less so, since it is configured to use the ubiquitous common log format
org.neo4j.server.http.log.config=conf/neo4j-http-logging.xml 
```

我拥有的文件的替代品`.db`是：

```
./index/lucene-store.db
./index/neostore.relationshipstore.db
./index/neostore.relationshipstore.db/index/lucene-store.db
./index/neostore.relationshipstore.db/neostore.nodestore.db
./index/neostore.relationshipstore.db/neostore.propertystore.db
./index/neostore.relationshipstore.db/neostore.relationshipstore.db
./index/neostore.relationshipstore.db/neostore.relationshiptypestore.db
./index.db
./neostore.nodestore.db
./neostore.propertystore.db
./neostore.relationshipstore.db
./neostore.relationshiptypestore.db
./upgrade_backup/neostore.nodestore.db
./upgrade_backup/neostore.propertystore.db
./upgrade_backup/neostore.relationshipstore.db
./upgrade_backup/neostore.relationshiptypestore.db 
```

但是当我尝试它们时，我得到了这个错误：

```
./bin/neo4j start
Starting Neo4j Server...WARNING: not changing user
process [31011]... waiting for server to be ready.. Failed to start within 120 seconds.
Neo4j Server may have failed to start, please check the logs. 
```

这是日志：

```
java.lang.IllegalArgumentException: Invalid value '/Users/0x90/dbpedia4neo/index.db' for config property 'store_dir': Must be a valid file path.
    at org.neo4j.graphdb.factory.GraphDatabaseSetting.illegalValue(GraphDatabaseSetting.java:963)
    at org.neo4j.graphdb.factory.GraphDatabaseSetting.illegalValue(GraphDatabaseSetting.java:951)
    at org.neo4j.graphdb.factory.GraphDatabaseSetting$DirectorySetting.validate(GraphDatabaseSetting.java:668)
    at org.neo4j.graphdb.factory.GraphDatabaseSetting.validate(GraphDatabaseSetting.java:903)
    at org.neo4j.kernel.configuration.ConfigurationValidator.validate(ConfigurationValidator.java:50)
    at org.neo4j.kernel.configuration.Config.applyChanges(Config.java:125)
    at org.neo4j.kernel.configuration.Config.<init>(Config.java:81)
    at org.neo4j.kernel.InternalAbstractGraphDatabase.<init>(InternalAbstractGraphDatabase.java:206)
    at org.neo4j.kernel.EmbeddedGraphDatabase.<init>(EmbeddedGraphDatabase.java:77)
    at org.neo4j.graphdb.factory.GraphDatabaseFactory$1.newDatabase(GraphDatabaseFactory.java:70)
    at org.neo4j.graphdb.factory.GraphDatabaseBuilder.newGraphDatabase(GraphDatabaseBuilder.java:205)
    at org.neo4j.server.database.CommunityDatabase.start(CommunityDatabase.java:55)
    at org.neo4j.server.AbstractNeoServer.start(AbstractNeoServer.java:103)
    at org.neo4j.server.Bootstrapper.start(Bootstrapper.java:79)
    at org.neo4j.server.Bootstrapper.main(Bootstrapper.java:46) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T17:43:26.333

路径值应该指向包含数据库文件的目录，而不是单个文件。

试一试

```
org.neo4j.server.database.location=/Users/0x90/dbpedia4neo 
```

# iphone - iPhone模拟器无法连接到互联网

> ID：13542706
> 
> 赞同：30
> 
> 时间：2012-11-24T15:39:30.120
> 
> 标签：iphone, xcode4.5

我正在使用 Xcode 4.5，我的 iPhone 模拟器无法连接到互联网。互联网在我所有的 Mac 浏览器上工作，但 iPhone 模拟器无法连接。我尝试在 iPhone 模拟器中的 Safari 中打开网页，但没有帮助。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2014-09-23T10:59:25.763

1.关闭局域网连接；
2.打开wifi；
3.在iOS模拟器>设置>开发者>允许HTTP服务（开启）；
4.重启Xcode和模拟器。

![截屏](../Images/2a257e8f87daae368841e45c4913b3b3.png)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2016-04-28T12:06:35.817

我对 Xcode 6.2 和 iOS 8.2 模拟器有同样的问题。响应字段为零。我尝试重置模拟器，在 Xcode 中清理产品，重新启动两者，重新启动计算机，关闭和打开 wifi 并更改为不同的 wifi 网络。没有任何效果。最后我禁用了 Avast Antivirus Shields 并且它起作用了。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-02-03T23:36:27.100

iOS 模拟器（菜单，左上角）> 重置内容和设置...为我修复了它。请注意，这将删除您在模拟器上的所有应用程序和相关数据。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-04-07T12:06:20.290

我多次遇到这个问题。原来我在我的家庭网络的网络首选项中添加了代理设置，但办公网络没有使用任何代理。这碰巧只影响 iPhone 模拟器，但浏览器可以很好地使用它。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-12-07T09:52:03.090

我在 xCode8.0 中遇到了这个问题。我通过禁用代理解决了转到
系统偏好设置->网络->高级（按钮）->选择“代理”选项卡->在“选择要配置的协议：”下禁用“自动代理发现”

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-03-12T11:13:50.310

我更改了我的 dns 设置并将其设置为 google dns 然后它工作。希望它也适合你。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-08T09:04:25.037

我遇到了这个问题（也适用于 App Store），我解决它的方法是转到网络偏好设置，在左侧删除当前连接的连接 (-) 并再次添加 (+)。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-09-25T19:55:10.023

我在 OSX Yosemite 的模拟器中运行 iPhone 6s 时遇到了相同症状的问题。检查您的 Xcode 版本。从版本 6 升级到 7.0 解决了我遇到的网络问题。

# c# - 与 NOSQL 相比，实体框架代码首先最适合 RAD？

> ID：13542710
> 
> 赞同：0
> 
> 时间：2012-11-24T15:40:15.317
> 
> 标签：c#, entity-framework, couchbase

我一直在用 C# 尝试 NOSQL。我现在也在尝试使用 SQL Server 的实体框架。

对于 NOSQL 数据库（尝试过 couchbase），我可以简单地使用 POCO 而不必担心 DB。Entity Framework 代码可以先提供类似的功能吗？

是否有任何捷径可以快速开发完全基于 POCO 的应用程序，而无需深入了解数据库，同时使用实体框架，就像它用于诸如 Couchbase 之类的 NOSQL 数据库一样？

请提出一个解决方案，我可以只专注于编码，让数据库完全由某个框架处理。我希望这可以通过 SQL Server 实现。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T17:10:23.967

不知道NOSQL，我没有在实际项目中使用过。但我已经使用 EF Code First 有一段时间了。

我认为使用 EF Code First 进行编码非常容易。您只需编写 POCO 类，将 DBSet<T> 属性添加到您的 Context 类中，就完成了。然后您可以使用 linq 查询对象，并且插入、更新、删除也非常容易。

但是，当您的 POPO 类发展时，您可能需要花一些时间来了解迁移以更新数据库。不过，这是一次性的事情，我只花了几个小时的学习就让它发挥作用。

所以，恕我直言，是的，您可以完全基于 POCO 开发应用程序，而无需深入了解数据库。

# sql - 更新 tsvector 更新触发器

> ID：13542712
> 
> 赞同：4
> 
> 时间：2012-11-24T15:40:17.687
> 
> 标签：sql, postgresql, relational-database, tsvector

我在允许我执行全文搜索的表上的 tsvector 列“user_tsv”有以下 tsvector 更新触发器，

```
CREATE TRIGGER tsvector_user_update BEFORE INSERT OR UPDATE ON users
FOR EACH ROW EXECUTE PROCEDURE 
tsvector_update_trigger(user_tsv, 'pg_catalog.english', firstname, surname, email);
CREATE INDEX user_index_tsv ON users USING gin(user_tsv); 
```

我已经向表中添加了另一列我想包含在这个触发器中，有没有办法更新触发器（以及 tsvector 列）或者我需要删除列/触发器并重新添加它们？

PostgreSQL 9.0

提前致谢

大卫

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T01:06:12.240

您不需要删除列或索引，只需删除并重新创建触发器并更新任何更改的字段。

使用常规`DROP TRIGGER`语句删除触发器，然后使用新列重新创建它`tsvector_update_trigger`，所有这些都在同一个事务中。`UPDATE tablename SET user_tsv = ... WHERE new_column IS NOT NULL`如果您已经添加了列，现在更新列。检查 tsvector 更新触发器的源以找出要在赋值中使用的适当表达式。

# php - PHP Ffmpeg 加入音频文件和视频

> ID：13542714
> 
> 赞同：1
> 
> 时间：2012-11-24T15:40:44.440
> 
> 标签：php, ffmpeg

我正在尝试使用下面的代码在我的输入视频文件的第 6 秒加入一个音频文件，并将所有内容导出到一个新的视频文件中，但它没有运行。

```
<?php
session_start();

$au = $_SESSION['mysound'];
$ffmpeg = "/usr/local/bin/ffmpeg";
$videofile = "video/sample.mp4";
$outputfile = "upload/outputvideo.mp4"; //This folder has full permissions

if (exec("-i $au -itsoffset 6 -i $videofile -acodec copy -vcodec copy $outputfile")){
echo "SUCCESS";
}else{
echo "FAILURE";
}

?> 
```

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T15:48:38.140

你可以试试这个，它在合并期间设置执行顺序

```
ffmpeg -i $videofile -itsoffet 6 -i $au -acodec copy -vcodec copy $outputfile -map 0:0 -map 1:0 
```

# visual-studio-2010 - Crystal Report with VB 2010 使用多个记录选择公式

> ID：13542715
> 
> 赞同：1
> 
> 时间：2012-11-24T15:40:50.067
> 
> 标签：visual-studio-2010, crystal-reports-2010

我有一个水晶报表，我在其中使用报表查看器列出 3 个下拉框。用户可以从每个框中选择过滤（例如，名字和姓氏下拉菜单，他们可以选择“包含”、以“开头”等。然后另一个下拉菜单包含“大于”、“小于”、等等。每个下拉列表下方都包含一个文本框，用户可以在其中选择进行过滤。

我已经能够让名字和姓氏下拉列表与记录选择公式中的每个下拉列表一起工作。但是，当我尝试添加销售公式时，我不断收到错误。我已经绞尽脑汁研究了几个小时，研究如何在记录选择公式中添加多个公式，我用它成功地添加了名字和姓氏，但是添加销售公式的所有方法都不起作用。销售公式本身（没有名字和姓氏公式）可以正常工作，但我无法让所有 3 个公式一起工作。

任何帮助表示赞赏。以下是我到目前为止的代码。

`公开课表1

```
Private Sub btnSearch_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnSearch.Click

    Dim reportToView As New CrystalReport1

    'User inputs filters for first name
    Dim firstname As String
    Dim searchFirst As String      
    firstname = txtFirstName.Text
    Dim firstnamesearch As String

    'Begins with
    If cboFirstName.SelectedIndex = 0 Then
        searchFirst = firstname & "*"
        'Ends with
    ElseIf cboFirstName.SelectedIndex = 1 Then
        searchFirst = "*" & firstname
        'Contains
    ElseIf cboFirstName.SelectedIndex = 2 Then
        searchFirst = "*" & firstname & "*"
        'Equals
    ElseIf cboFirstName.SelectedIndex = 3 Then
        searchFirst = firstname
    End If

    'User inputs filters for last name
    Dim lastname As String
    lastname = txtLastName.Text
    Dim searchLast As String
    Dim lastnamesearch As String

    'Begins with
    If cboLastName.SelectedIndex = 0 Then
        searchLast = lastname & "*"
        'Ends with
    ElseIf cboLastName.SelectedIndex = 1 Then
        searchLast = "*" & lastname
        'Contains
    ElseIf cboLastName.SelectedIndex = 2 Then
        searchLast = "*" & lastname & "*"
        'Equals
    ElseIf cboLastName.SelectedIndex = 3 Then
        searchLast = lastname
    End If

    'User inputs filters for sales data
    Dim lastsales As String
    lastsales = txtLastYearSales.Text
    Dim searchSales As String
    Dim salesearch As String

    'If "Greater Than" chosen
    If cboLastYearSales.SelectedIndex = 0 Then
        searchSales = " >" + lastsales
        'If "Less Than" chosen
    ElseIf cboLastYearSales.SelectedIndex = 1 Then
        searchSales = " < " + lastsales
        'If "Equal" chosen
    ElseIf cboLastYearSales.SelectedIndex = 2 Then
        searchSales = " = " + lastsales
    End If

   'Dim firstnamesearch As String
    firstnamesearch = "{Person_Contact.FirstName} like """ & searchFirst & """"
    'Dim lastnamesearch As String
    lastnamesearch = "{Person_Contact.LastName} like """ & searchLast & """"
    'Dim salesearch As String 
```

'（这是我要添加到下面的记录选择公式中的内容） salesearch = "{Sales_SalesPerson.SalesLastYear} " + searchSales

```
 'AND formula (must select an option in all fields)
    reportToView.DataDefinition.RecordSelectionFormula = "{Person_Contact.FirstName} like '" & searchFirst & "' AND {Person_Contact.LastName} like '" & searchLast & "'" 
```

Me.CrystalReportViewer1.ReportSource = reportToView

```
End Sub 
```

`

# javascript - javascript/php div 下拉搜索结果

> ID：13542716
> 
> 赞同：3
> 
> 时间：2012-11-24T15:40:51.123
> 
> 标签：javascript, search, dropdownbox

我在页面顶部有一个搜索框。使用 ajax 我想要一个 div 在页面上下拉以显示搜索结果。关键是我希望搜索结果覆盖下面的页面而不是向下推。出于这个原因，我不能只在搜索框下方放置一个 div。我需要做一些更复杂的事情——但我不确定是什么。

以下代码在搜索框下填充了一个 div。任何人都可以提出一种经济的方法来让 div 浏览页面而不是将所有内容都向下推。感谢您的任何建议！

javascript

```
function showResults(str) {

document.getElementById("results").innerHTML=xmlhttp.responseText;
document.getElementById("results").style.border="1px solid #A5ACB2";

//some ajax

xmlhttp.open("GET","search.php?str="+str,true);
xmlhttp.send();
} 
```

html

```
<html>
<body>
<table><tr><td><img src="logo.gif"></td><td>
<input type="text" id="string" onkeyup="showResults(this.value)">
<div id="results"></div><td></tr>
<tr><td colspan=2
Main body of page.  All sorts of text and html go here that I do not want pushed down.
</td></tr></table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T15:50:19.780

你必须绝对定位你的结果 div。

像 ：

```
<div id="results" style="position:absolute"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T15:51:02.840

```
<html>
<body>
<table><tr><td><img src="logo.gif"></td><td style="position:relative">
<input type="text" id="string" onkeyup="showResults(this.value)">
<div id="results" style="position:absolute"></div><td></tr>
<tr><td colspan=2
Main body of page.  All sorts of text and html go here that I do not want pushed down.
</td></tr></table>
</body>
</html> 
```

position relative 和 absolute 将帮助您找到解决方案，同时，onload，您需要隐藏 div，一旦搜索结果，您必须再次显示它。

# android - 在实际设备上调试，需要文件访问 - 如何？

> ID：13542718
> 
> 赞同：1
> 
> 时间：2012-11-24T15:41:13.467
> 
> 标签：android, debugging

我的应用读取和处理设备上以 .xml 格式存储的数据。安装后工作正常。

但是，我更喜欢在手机本身上使用 Eclipse 进行调试，而不是使用模拟器。但是，这会阻止文件系统访问。

有没有解决的办法？在我看来，在设备上进行调试要好得多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T16:48:32.910

> 有没有解决的办法？

根您的设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T16:49:00.483

您可以将文件保存到 SD 卡并从 Eclipse 调试或从 Eclipse 调试访问`/sdcard`它们`adb shell`。

除此之外，您可以根您的设备并获得对任何文件的无限制访问，这对于调试目的非常有用，只是不要忘记在完成调试后取消根。

# python - 带有列表的 For 循环中的 Hangman Python 游戏索引错误

> ID：13542720
> 
> 赞同：0
> 
> 时间：2012-11-24T15:41:26.663
> 
> 标签：python, string, list

好的，我正在做一个家庭作业，用 python 构建一个刽子手游戏。到目前为止，一切都很顺利，直到我收到这个烦人的错误：

```
Traceback (most recent call last):  
  File "/Users/Toly/Downloads/ps2 6/ps2_hangman.py", line 82, in <module>
    if (remLetters[i] == userGuess):
IndexError: string index out of range 
```

这是我的代码：

```
 # 6.00 Problem Set 3
    # 
    # Hangman
    #

    # -----------------------------------
    # Helper code
    # (you don't need to understand this helper code)
    import random
    import string
    import time

    WORDLIST_FILENAME = "words.txt"

    def load_words():
        print "Loading word list from file..."
        # inFile: file
        inFile = open(WORDLIST_FILENAME, 'r', 0)
        # line: string
        line = inFile.readline()
        # wordlist: list of strings
        wordlist = string.split(line)
        print "  ", len(wordlist), "words loaded."
        return wordlist

    def choose_word(wordlist):
        """
        wordlist (list): list of words (strings)

        Returns a word from wordlist at random
        """
        return random.choice(wordlist)

    wordlist = load_words()

    blankword="_ "
    word=random.choice (wordlist)    
    remLetters = string.lowercase
    remGuesses = 8 #starting number of guesses
    remWord=len(word)

    #makes a blank with the length of the word
    print "Welcome to Hangman"
    time.sleep(1)
    print
    print "Your word is", remWord,"letters long."
    print
    time.sleep (1)

    while (remGuesses != 0 or blankword != word):
        remBlankword=len(blankword)

 remWordDoubled=remWord*2
    while (remWordDoubled!=len(blankword)):
        blankword=blankword + "_ "
    print blankword
    print
    print "You have",remGuesses," guesses left."
    print
    time.sleep(1)
    userGuess= str(raw_input ("Guess a letter:"))
    print
    if (userGuess in word):
        print "Excellent guess!"

    else:
       print "Bad Guess"
       remGuesses=remGuesses-1
    for i in range (1, len(remLetters)):
       if (remLetters[i] == userGuess):
            remLetters = remLetters[0:i] + remLetters[i+1:len(remLetters)]

    print remLetters

if (remGuesses == 0):
    print
    print "Sorry, you died! Ha, sucks!"
    print
    print
    time.sleep (1)
    print "End of Game"

if (blankword == word):
    print
    print "Congradulations! You won!"
    print
    time.sleep(1)
    print 
    print
    print
    print "End of Game" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T15:43:40.617

您首先获得 中的索引范围`remLetters`，但如果字母 == `userGuess`，则从 中删除一个字母`remLetters`。这意味着现在最大的指数`remLetters`比以前少了 1。当您尝试索引您的范围返回的最高数字时，您现在超出范围，因此您得到一个`IndexError`.

像这样的东西可能是你正在寻找的东西：

```
remLetters = ''.join(x for x in remLetters if x != userGuess) 
```

或者：

```
try:
    idx = remLetters.index(userGuess)
    remLetters = remLetters[:idx] + remLetters[idx+1:]
except ValueError:
    pass 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T15:43:51.517

您正在更改`remLetters`循环中的字符串，使其更短。所以你最终得到一个超出长度的索引`remLetters`：

```
for i in range (1, len(remLetters)):
   if (remLetters[i] == userGuess):
        remLetters = remLetters[0:i] + remLetters[i+1:len(remLetters)] 
```

改为使用`.index()`来查找匹配项：

```
while userGuess in remLetters:
    i = remLetters.index(userGuess)
    remLetters = remLeters[:i] + remLetters[i+1:] 
```

# ruby-on-rails - will_paginate 在分页 div 之外呈现当前页面

> ID：13542722
> 
> 赞同：1
> 
> 时间：2012-11-24T15:41:50.783
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, will-paginate

我在我的 rails 项目中使用 will_paginate 并且我得到了这种行为，当前页码超出了数字。这是一张图片。

![will_paginate](../Images/336380dcb1e0d863b99f79c0e16fadcc.png)

这是will_paginate生成的html代码

```
<div style="text-align:center;">
    <div class="pagination">
        <a class="previous_page" rel="prev start" href="/offers?page=1">← Previous</a> 
        <a rel="prev start" href="/offers?page=1">1</a>
        <em class="current">2</em> 
        <span class="next_page disabled">Next →&lt;/span>
    </div>
</div> 
```

有没有人可以帮我解决这个问题，拜托？？？

* * *

导轨代码：

```
def index
    @offers = Offer.paginate(:page => params[:page], :per_page => 7).order('created_at DESC')
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T16:23:23.693

如果您使用的是引导程序，请查看此 gem：

[https://github.com/yrgoldteeth/bootstrap-will_paginate](https://github.com/yrgoldteeth/bootstrap-will_paginate)

来自的标记`will_paginate`与引导程序有点不同 - 这个 gem 对其进行调整以与引导程序一起使用。

# c# - C# 动态表单文本

> ID：13542725
> 
> 赞同：1
> 
> 时间：2012-11-24T15:42:28.023
> 
> 标签：c#, winforms

我有一个继承的表格并将其用作设置表格。我要求用户输入要存储的名称，我想根据输入数据动态更改表单标题（表单的文本属性）。但是如果我更改基本表单标题，则会发生溢出。我还在基本表单中创建 FormTitle 属性以保存当前表单名称。

例如，我的应用程序名称是 SerenaIR，我想为我的所有表单显示以下样式。

塞雷纳航空 | 店铺名称 |
表格名称 ex: SerenaAIR | 超市 | 销售

FormTitle 属性

```
 private string _frmTitle;
    /// <summary>
    /// current form title for showing on title bar.
    /// </summary>
    [Category("JSCustomizer"),
     Description("The text that is displayed on form title bar.")]
    public string FormTitle
    {
        get { return _frmTitle; }
        set
        {
            try
            {
                _frmTitle = value;
                Invalidate();
                var appPreName = Properties.Settings.Default.AppNamePre + @" " + Properties.Settings.Default.AppName;

                if(_frmTitle.Length < 3)
                {
                    base.Text = appPreName;
                }
                else
                {
                    base.Text = appPreName + @" | " + _frmTitle;
                }
            }
            catch
            {
                return;
            }
        }
    } 
```

在设置表单中，当我想通过以下代码更改标题时，我保存有关商店名称和基本表单的设置，所有继承的表单都会引发错误！

```
 private void JSfrmBaseLoad(object sender, EventArgs e)
    {
            Text = Properties.Settings.Default.AppNamePre + @" " + Properties.Settings.Default.AppName;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T16:09:19.077

假设Form2继承了Form1，var strInput是用户输入的文本。然后，在新建 Form2 时，也许您可​​以编写：

```
//Form1, Form2 definition
public partial class Form2 : Form1
//set Form2 title.
var strInput = "Sale";
var d2 = new Form2 {Text = base.Text + " | " + strInput}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T16:43:35.400

我的猜测是您正在创建导致溢出的无限循环。但我认为真正的问题是您误解了在这种情况下继承是如何工作的。更改基本表单上的非静态属性值不会更新继承表单的值，因为每个表单都是一个新实例。

我的建议是使用 Program.cs 中的属性来存储表单标题。在此示例中，我正在更改单击按钮时的表单标题。所有继承 Form1 的表单都会在 OnLoad 中设置新的表单标题。

程序.cs：

```
static class Program
{
    /// <summary>
    /// The main entry point for the application.
    /// </summary>
    [STAThread]
    static void Main()
    {
        FormTitle = Properties.Settings.Default.FormTitle;

        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        Application.Run(new Form1());
    }

    public static string FormTitle { get; set; }
} 
```

表格1：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    protected override void OnLoad(EventArgs e)
    {
        Text = Program.FormTitle;
        base.OnLoad(e);
    }

    private void button1_Click(object sender, EventArgs e)
    {
        Program.FormTitle = "new form title";
        Text = Program.FormTitle;
        new Form2().Show();
    }
} 
```

# php - 使用 mysql 数据库中的 datepicker 中的事件突出显示日期

> ID：13542733
> 
> 赞同：0
> 
> 时间：2012-11-24T15:43:37.023
> 
> 标签：php, jquery, mysql, ajax, jquery-ui

尝试使用 jquery 和 php 在日期选择器中“突出显示”我的数据库中的日期。我到处寻找可以帮助我的东西...

这是我目前正在使用的代码。请注意，它具有 onSelect 状态，可以单击日期并从数据库中获取事件并将其打印到 div，这有效，现在我想突出显示事件的日期..

```
$(document).ready(function() {
        var SelectedDates = {};
        $.getScript('eventdates.php', function(eventsdate) {
            eventsdate;
        });
        $("#kalender").datepicker({
            firstDay: 1,
            dayNamesMin: ['Sö', 'Må', 'Ti', 'On', 'To', 'Fr', 'Lö'],
            monthNames: ['Januari', 'Februari', 'Mars', 'April', 'Maj', 'Juni', 'Juli', 'Augusti', 'September', 'Oktober', 'November', 'December'],
            dateFormat: "yy-mm-dd",
            beforeShowDay: function(date) {
                var Highlight = SelectedDates[date];
                if (Highlight) {
                    return [true, "Highlighted", Highlight];
                }
                else {
                    return [true, '', ''];
                }
            },
            onSelect: function(dateText, inst) {
                var myDate = new Date(dateText);
                var newFormat = $.datepicker.formatDate('yy-mm-dd', myDate);
                $.ajax({
                    url: 'events.php',
                    type: 'POST',
                    dataType: 'json',
                    data: {selectedData: newFormat},
                    success: function(result) {
                        if (result.date === newFormat) {
                            $('#event').html(result['date'] + " " + result['event']);
                        }
                        else {
                            $('#event').html(result['none']);
                        }
                    }
                });
            }
        });

    });​ 
```

事件日期.php

```
<?php

include_once ('connect.php');
$sql = mysql_query("SELECT * FROM `events`");
while ($row = mysql_fetch_array($sql)) {
    echo "SelectedDates[new Date('{$row['date']}')] = new Date('{$row['date']}')<br/>";
}
?> 
```

事件.php

```
<?php
include_once ('connect.php');
if (isset($_POST['selectedData'])) {
    $sql2 = mysql_query("SELECT * FROM `events` WHERE `date`='{$_POST['selectedData']}'");
    $row2 = mysql_fetch_array($sql2);
    if ($row2['date'] == $_POST['selectedData']) {
        $sql = mysql_query("SELECT * FROM `events` WHERE `date`='{$_POST['selectedData']}'");
        while ($row = mysql_fetch_array($sql)) {
            $data = array(
                "date" => $row['date'],
                "event" => utf8_encode($row['event'])
            );
            echo json_encode($data);
        }
    } else {
        $data = array(
            "none" => "Inget event denna dag!"
        );
        echo json_encode($data);
    }
}

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T21:46:37.853

我解决了这个问题，并想与其他遇到这种 och 问题的人分享我的解决方案！

jQuery 脚本

```
<script>
    $(document).ready(function() {
        $("#kalender").datepicker({
            firstDay: 1,
            dayNamesMin: ['Sö', 'Må', 'Ti', 'On', 'To', 'Fr', 'Lö'],
            monthNames: ['Januari', 'Februari', 'Mars', 'April', 'Maj', 'Juni', 'Juli', 'Augusti', 'September', 'Oktober', 'November', 'December'],
            dateFormat: "yy-mm-dd",
            onSelect: function(dateText, inst) {
                var myDate = new Date(dateText);
                var newFormat = $.datepicker.formatDate('yy-mm-dd', myDate);
                $.ajax({
                    url: 'events.php',
                    type: 'POST',
                    dataType: 'json',
                    data: {selectedData: newFormat},
                    success: function(result) {
                        if (result.date === newFormat) {
                            $('#event').html(result['date'] + "<br />\n" + result['event']);
                        }
                        else {
                            $('#event').html(result['none']);
                        }
                    }
                });
            }, beforeShowDay: function(date) {

                var yy = date.getFullYear(), mm = date.getMonth() + 1, dd = date.getDate();
                if (dd < 10) {
                    var dt = yy + "-" + mm + "-0" + dd;
                } else {
                    var dt = yy + "-" + mm + "-" + dd;
                }
<?php include_once ('eventdates.php') ?>
                return [true, ''];

            }
        });

    });
</script> 
```

事件.php

```
<?php
include_once ('connect.php');
if (isset($_POST['selectedData'])) {
    $sql2 = mysql_query("SELECT * FROM `events` WHERE `date`='{$_POST['selectedData']}'");
    $row2 = mysql_fetch_array($sql2);
    if ($row2['date'] == $_POST['selectedData']) {
        $sql = mysql_query("SELECT * FROM `events` WHERE `date`='{$_POST['selectedData']}'");
        while ($row = mysql_fetch_array($sql)) {
            $data = array(
                "date" => $row['date'],
                "event" => utf8_encode($row['event'])
            );
            echo json_encode($data);
        }
    } else {
        $data = array(
            "none" => "Inget event denna dag!"
        );
        echo json_encode($data);
    }
}

?> 
```

事件日期.php

```
<?php

include_once ('connect.php');
$sql = mysql_query("SELECT * FROM `events`");

while ($row = mysql_fetch_array($sql)) {
    echo "var selDate" . $row['event_ID'] . " = '" . $row['date'] . "';";
    echo "if (dt === selDate" . $row['event_ID'] . ") {";
    echo "return [true, 'Highlighted'];";
    echo "}";
}
?> 
```

希望这对其他人有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T15:54:51.080

AJAX 根据定义是异步的。这意味着您在`$.geScript`完成之前运行 datepicker 代码。您需要在回调中调用 datepicker 代码`$.getScript`

```
$.getScript('eventdates.php', function() {
         /* new script has fired*/
         $("#kalender").datepicker({.....});

}); 
```

# tags - 规范标签混淆

> ID：13542736
> 
> 赞同：0
> 
> 时间：2012-11-24T15:44:00.367
> 
> 标签：tags, canonical-link

我朋友的网站重新设计了，网络开发人员也改变了 URL 结构（我认为它的网站是这样构建的......），我们现在有这样的页面：http: [//optykbrilliant.pl/index.php/aktualnosci](http://optykbrilliant.pl/index.php/aktualnosci)

真正让我担心的是这一点.../index.php/...在整个网站上都使用...

通常人们只在主页上拥有它并在其上放置 rel ='canonical' 并解决重复内容问题......显然这里的内容不会在整个网站上重复，但只有在我们拥有这些时才会出现在主页上2个版本：

optykbrilliant.pl/

optykbrilliant.pl/index.php/

但我的问题是，如果我将 rel canonical 放在**http://www.optykbrilliant.pl/index.php/**上是否会影响包含[http://www.optykbrilliant.pl/index.php/](http://www.optykbrilliant.pl/index.php/)的任何其他页面.. 和另一个这里的参数（我的意思是放在/index.php/....之后）？

或者它不会影响任何其他页面，但仅适用于 optykbrilliant.pl/index.php/？

感谢您对此的意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T06:32:38.103

规范标签是确定的，而不是全部。因此，如果您将规范放在

```
optykbrilliant.pl/index.php/ 
```

它只会影响该页面

# twitter-bootstrap - Twitter Bootstrap 中的中等启动页面

> ID：13542744
> 
> 赞同：2
> 
> 时间：2012-11-24T15:46:12.143
> 
> 标签：twitter-bootstrap

最近，Twitter 创始人建立了一个新的很酷的社交媒体发布，名为[https://medium.com/](https://medium.com/)

我的第一个想法是：*哦，哇，这家伙是怎么做这个很好的启动页面的？*

所以，我的愚蠢问题是：有没有一种快速简单的方法可以用 Twitter Bootstrap 做类似的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T17:01:24.053

这对我来说似乎很容易。如果您查看代码（这里是经过美化的版本）：

```
 <body itemscope itemtype="http://schema.org/CreativeWork" style="background-image:url('//dnqgz544uhbo8.cloudfront.net/_/fp/img/home/b.PJ4x7XRiSEPMkdWrQj2WbQ.jpg')">
    <div class="mask">
    </div>
    <div class="content page-splash">
      <div class="logo-terms">
        <a href="//medium.com/policy/9db0094a1e0f" class="tos">
          Our Terms of Service
        </a>
        <div class="logo">
          Medium
        </div>
      </div>
      <div class="message">
        <span class="quote">
          “
        </span>
        <span class="pull-quote">
          We’re rethinking publishing and building a new platform from scratch. This is a preview.
        </span>
        <span class="actions">
          <a href="//medium.com/about/9e53ca408c48">
            Read more
          </a>
          <span class="or">
            or
          </span>
          <a href="/m/account/authenticate-twitter">
            Sign in with Twitter&nbsp;
            <span class="twitter">
            </span>
          </a>
        </span>
      </div>
    </div>
  </body> 
```

重要的部分是这里定义`body` `background-image`的 CSS 和`mask`CSS >>> dnqgz544uhbo8.cloudfront.net/_/fp/css/splash-base.umkWq9wEC0rFHI0pblZljA.css <<< -`mask`宽度/高度 100% 位于 body 上方，`z-index`100 和 a透明色#E3E3E1。其他项目`quote`,`pull-quote`和`actions`位于其上方（您可以在上述链接中查看它们的 CSS 定义）。

您还需要一些尺寸为不同分辨率/设备类型（如安卓手机）的图片，这样您就可以非常快速地提供正确尺寸的图像，并在页面加载时作为背景图像插入正文。

编辑：链接在>>> <<<之间，显然SO的正则表达式不喜欢链接的结构（它与http://混淆）

# iphone - ViewController 的问题

> ID：13542747
> 
> 赞同：0
> 
> 时间：2012-11-24T15:46:31.950
> 
> 标签：iphone, ios, viewcontroller

> **可能重复：**
> [其视图不在窗口层次结构中](https://stackoverflow.com/questions/11862883/whose-view-is-not-in-the-window-hierarchy)

我的代码有问题。

我想去另一个视图控制器，所以这是我的代码：

```
- (void)reloadMyTB {
       TestViewController *vc = [[TestViewController alloc] init];
       UINavigationController *cntrol = [[UINavigationController alloc] initWithRootViewController:vc];
       [self presentModalViewController:cntrol animated:NO];
       [cntrol release];
} 
```

但它不起作用，我可以在日志中阅读以下行：

```
Warning: Attempt to present <UINavigationController: 0x133db4b0> on <ArticleViewController: 0x13828330> whose view is not in the window hierarchy! 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T15:59:08.887

首先检查您是否在应用程序中实现了导航控制器，如果没有则先实现它然后继续如下

并将视图与文件所有者绑定

请重写您的代码如下

```
 TestViewController *vc = [[TestViewController alloc] initWithNibName:@"TestViewController" bundle:nil]; //or write TestViewController nib Name here
   UINavigationController *cntrol = [[UINavigationController alloc] initWithRootViewController:vc];
   [self presentModalViewController:cntrol animated:NO];
   [cntrol release]; 
```

# objective-c - 在 initWithTarget 调用中使用 Selector 发送参数

> ID：13542748
> 
> 赞同：1
> 
> 时间：2012-11-24T15:46:40.470
> 
> 标签：objective-c, syntax, arguments, selector

我正在尝试将以下代码精简为一个方法。目前，八种相同的方法用于处理对八个`UIButton`实例的点击。理想情况下，我只想将`UIButton`作为参数传递给，`@selector`这样我就可以避免需要八个相同的方法。我正在努力将参数传递给选择器的语法。如果可能的话，我想要一个`handleTap: onButton:`方法。目前，在按钮 1 到 8 上，有八种方法（`handleTap1`通过）可以进行相同的操作。`handleTap8`

```
UITapGestureRecognizer *tap1 = [[UITapGestureRecognizer alloc] initWithTarget: self action: @selector(handleTap1:)];
UITapGestureRecognizer *tap2 = [[UITapGestureRecognizer alloc] initWithTarget: self action: @selector(handleTap2:)];
UITapGestureRecognizer *tap3 = [[UITapGestureRecognizer alloc] initWithTarget: self action: @selector(handleTap3:)];
UITapGestureRecognizer *tap4 = [[UITapGestureRecognizer alloc] initWithTarget: self action: @selector(handleTap4:)];
UITapGestureRecognizer *tap5 = [[UITapGestureRecognizer alloc] initWithTarget: self action: @selector(handleTap5:)];
UITapGestureRecognizer *tap6 = [[UITapGestureRecognizer alloc] initWithTarget: self action: @selector(handleTap6:)];
UITapGestureRecognizer *tap7 = [[UITapGestureRecognizer alloc] initWithTarget: self action: @selector(handleTap7:)];
UITapGestureRecognizer *tap8 = [[UITapGestureRecognizer alloc] initWithTarget: self action: @selector(handleTap8:)];
[let1Button addGestureRecognizer: tap1];
[let2Button addGestureRecognizer: tap2];
[let3Button addGestureRecognizer: tap3];
[let4Button addGestureRecognizer: tap4];
[let5Button addGestureRecognizer: tap5];
[let6Button addGestureRecognizer: tap6];
[let7Button addGestureRecognizer: tap7];
[let8Button addGestureRecognizer: tap8]; 
```

这是其中一种方法的示例，显然我想`let1Button`用传入的参数替换来表示任何按钮。

```
- (void) handleTap1: (UITapGestureRecognizer *) recognizer
{
    [_box setText: [_box.text stringByAppendingString: [let1Button titleForState: UIControlStateNormal]]];
    [let1Button setUserInteractionEnabled:NO];
    [let1Button setTitleColor: [UIColor blackColor] forState: UIControlStateNormal];

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T16:00:21.697

[UIView](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIGestureRecognizer_Class/Reference/Reference.html)（`UIButton`是一个子类`UIView`）有一个属性`view`。这是手势识别器附加到的视图

```
UITapGestureRecognizer *tap1 = [[UITapGestureRecognizer alloc] initWithTarget: self action: @selector(handleTap:)];
[let1Button addGestureRecognizer: tap1];

- (void) handleTap: (UITapGestureRecognizer *) recognizer
{
    UIButton *button = (UIButton *)recognizer.view;
    [_box setText: [_box.text stringByAppendingString: [UIButton titleForState: UIControlStateNormal]]];
    [UIButton  setUserInteractionEnabled:NO];
    [UIButton setTitleColor: [UIColor blackColor] forState: UIControlStateNormal];

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T15:52:37.327

手势识别器有一个属性视图。您可以检查以找出在哪个按钮上执行了手势。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T16:01:44.987

手势识别器作为参数传递给动作。在 action 方法中，您可以访问视图。

```
UIView myView = recognizer.view
if (myView isKindOfClass:[UIButton class])
{
   ...
} 
```

# android - 如何使用标签在 Android 屏幕内运行片段？

> ID：13542750
> 
> 赞同：0
> 
> 时间：2012-11-24T15:46:49.410
> 
> 标签：android, android-layout, tabs, android-fragments, android-activity

我有一个带有两个选项卡的屏幕，对于每个选项卡，我都在尝试以不同的布局运行不同的片段。

我目前有以下内容：

*   MainFragmentActivity - 扩展 FragmentActivity 的活动
*   mainFragment_screen - MaiFragmentActivity 的 XML
*   Fragment1 - 用户点击 Tab1 时的活动
*   fragmnet1_screen - 用于那个的 XML
*   Fragment2 - 用户点击 Tab2 时的活动
*   fragment2_screen - 用于那个的 XML

一切正常，但问题是当应用程序在带有选项卡 Tab1 和 Tab2 的空屏幕中启动时。例如，某些活动的片段仅在用户单击 Tab2 时出现。当他再次点击 Tab1 时，Tab1 的片段会正常显示。

我希望 Tab1 的那个片段在应用程序启动时立即启动，但我不知道如何实现。

有任何想法吗？:D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T16:48:16.657

这听起来像片段交易问题。但我需要查看 MainActivity 的代码。

我假设您正在使用 FragmentTransactions.add 和 FragmentTransaction.replace 将它们移入和移出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T08:09:25.517

解决方案是添加所有选项卡后，这需要在 onCreate() 中完成：

```
TabInfo activeTab = (TabInfo) this.hashMapTab.get("Tab1");
    FragmentTransaction ft = this.getSupportFragmentManager().beginTransaction();
    activeTab.fragment = Fragment.instantiate(this,activeTab.className.getName(), activeTab.args);
    ft.add(R.id.tab1, activeTab.fragment, activeTab.tag);
    ft.attach(activeTab.fragment);
    lastTab = activeTab;
    ft.commit(); 
```

hashMapTab 是所有选项卡的 TabInfo 的哈希映射。TabInfo 是所有 Tab 数据的容器，例如选项卡的类名和标签。

# loading - 在 Button_Click 后显示“正在加载...”图像/消息，同时 Page_Load / GridView 更新

> ID：13542751
> 
> 赞同：0
> 
> 时间：2012-11-24T15:46:52.187
> 
> 标签：loading

我现在想为 ASP.NET 项目做一些界面改进。例子：

当 Page_Load()、Button_Click 之后、GridView 更新时，显示带有加载图像 GIF 的加载消息...

我在这里使用加载元素（HTML/CSS + jQuery）：在此处[输入链接描述](https://stackoverflow.com/questions/10548385/how-to-show-loading-page-indicator-in-asp-net)

例子：

```
protected void Page_Load(object sender)
{
//code to show up element...
//code do something: check db connection, check cookie, check session,...
//code to hide loading element...
} 
```

我的问题是我以前从未使用过 AjaxToolkit，所以我不知道如何使用 UpdatePanel、UpdateProcess 来显示上面的加载元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T16:01:22.533

这里的好例子：

[带有 UpdatePanel 回发的 ajax“加载”图标](https://stackoverflow.com/questions/2813590/ajax-loading-icon-with-updatepanel-postbacks)

只需在之间插入加载元素`<ProgressTemplate> ... </ProgressTemplate>`

谢谢阅读。

编辑：它适用于 Button_Click() 事件。我如何在 Page_Load() 事件中调用它？

# c++ - 尝试从客户端接收时出现分段错误

> ID：13542752
> 
> 赞同：0
> 
> 时间：2012-11-24T15:47:10.157
> 
> 标签：c++, udp

以下代码给了我错误。每当我执行它时都会发生分段错误。

```
bool handshake() {
    node recv;
    void *ptr = recv;
    recverror = recvfrom(sock,(void*) recv, sizeof((void *) recv), 0, (struct sockaddr*)&from, &len);
    cout << recv.data; 
    return true;
} 
```

这是节点的结构：

```
struct node {
    char *data;
    int size_data;
    int dest_port;
    int src_port;
    int flag;
    double checksum;
    int seq;
    int ack;
    int windowsize;
    node* next;
    node() {next = NULL;}
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T15:55:29.080

您的代码有几个大问题：

一、赋值`ptr`不正确，应该是：

```
void *ptr = &recv; 
```

您应该从您的代码中得到一个关于类型不匹配的编译器错误。

接下来，您的论点`recvfrom`是错误的：

```
recverror = recvfrom(sock, ptr, sizeof(recv), 0, (struct sockaddr*)&from, &len); 
```

您不能将结构转换为指针，您想传递结构的地址。

`char*`最后，也是最重要的一点，在通过网络传递的结构中拥有成员是没有意义的。指针仅在单个进程中有意义，您不能在进程或机器之间传递它们。您需要先对数据进行[序列化](http://en.wikipedia.org/wiki/Serialization)，然后再将其放在网络上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T15:53:08.167

`void *ptr = recv`是错的。而是做`void *ptr = &recv`.

# javascript - 拉斐尔如何移动文本

> ID：13542755
> 
> 赞同：3
> 
> 时间：2012-11-24T15:47:29.627
> 
> 标签：javascript, text, raphael

我有一些文本，我想使用 Raphael 库将其向上移动。但是，还有一种方法可以在 3 秒或类似的情况下将其向上移动。

```
var t1 = paper.text(700, 168, "Hi");
t1.attr({fill:"white"}); 
```

我尝试使用此代码，以便将文本向上移动，但事实并非如此。

```
t1.animate({cy: 10 , cx: 700}, 10000); 
```

我只是想对曲线路径问同样的问题。

```
 var curvePath = paper.path("M690,124s20,15 10,19Z");
    curvePath.attr({fill:"orange"}); 
```

我也尝试过同样的事情，但我想我又弄错了。

```
 curvePath.animate({m: 10 , z: 700}, 10000); 
```

再次感谢所有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T16:40:37.130

代替，

```
t1.animate({cy: 10 , cx: 700}, 10000); 
```

用这个，

```
t1.animate({y: 10 , x: 700}, 10000); 
```

纸有`x`and`y`属性，没有`cx`and `cy`。

[参考](http://raphaeljs.com/reference.html#Paper.text)

***编辑（评论后）：***

从同一个参考，我给了

```
var t1 = paper.text(700, 168, "Hi");
t1.attr({fill:"white"});
var anim = Raphael.animation({y: 10 , x: 700}, 10000)
t1.animate(anim.delay(5000));   // animation will start after 5 seconds. 
```

# mysql - MySQL 如何复制表中的行？以及按什么顺序

> ID：13542756
> 
> 赞同：2
> 
> 时间：2012-11-24T15:47:35.847
> 
> 标签：mysql, database, replication, database-replication

我有一个用于复制的主服务器和从属数据库设置。

我正在尝试从从属数据库中的表中提取行，并且丢失了一些行。下面给出的示例场景：

说当前时间 12:00:00

我根据基于时间戳的列从从属数据库中的表中提取 11:00:00 到 12:00:00 的行。（更新约束 - 修改行的日期时间）

可以说我从结果集中得到了 100 和 MAX 的修改日期计数为 11:45:00（复制滞后 15 分钟，PS：每秒钟都在 master 中连续插入行）。

在 12:45 说，当没有复制滞后时，如果我从 11:00:00 到 11:45:00 运行行数，我在从属数据库中得到 150 的计数。

问题：MYSQL如何复制表中的行？按什么顺序？

# database - 如果它包含最新的模式，则处理“向下”的 mnesia 节点？

> ID：13542761
> 
> 赞同：0
> 
> 时间：2012-11-24T15:49:04.997
> 
> 标签：database, erlang, distribution, mnesia

我有两个节点——1 和 2，都在运行。节点 1 关闭。

节点 2 继续运行——它是一个远程节点。

节点 2 的计算机已关闭。当我启动节点 1 时，它知道节点 2 具有最新的模式。

处理这种情况的最佳策略是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T23:47:46.617

这个策略怎么样？

1.  应该连接节点的 mnesia。
2.  当整个系统被你的特定命令关闭时，而不是突然中止，文件系统的一个文件将被标记。所以如果文件没有被标记，节点就不是干净的。
3.  在节点启动之前，将完成以下检查：

如果是第一个节点，

3.1 如果上面的文件标记为ok，则节点会正常启动。

3.2 如果上面的文件没有标记ok，节点将无法启动。

3.3\. 如果上述文件不存在，它是第一次运行，mnesia 数据库模式将被建立，然后，启动。

如果不是第一个节点，

3.4\. 如果上面的文件标记为 ok，从已经启动的节点复制 mnesia 数据，然后启动。

3.5\. 如果上述文件没有标记为ok，则根据已启动节点删除schema和setup schema，并从已启动节点复制数据，然后启动。

3.6\. 如果上述文件不存在，则为首次运行，应根据已启动节点构建模式，然后启动。

# reporting-services - 在报表设计器中为上下文菜单项分配键盘快捷键

> ID：13542762
> 
> 赞同：5
> 
> 时间：2012-11-24T15:49:12.077
> 
> 标签：reporting-services, keyboard-shortcuts, bids

我目前正在 BIDS（SQL Server 2008 R2、VS2008）中创建一些报告。

我觉得我经常需要访问对话框`Expression...`和`Textbox properties...`设计 器

![文本框上下文菜单](../Images/5ee6d2f7af36a0d3371405f93d6e0c15.png)

但它会减慢我一直使用鼠标和上下文菜单的速度。（它们甚至不是菜单中的顶级项目！）我的笔记本电脑上的键盘更糟糕，不幸的是它没有上下文菜单按钮。

有没有办法为这些对话框分配键盘快捷键（如`CTRL``1`& ）？`CTRL``2`

我试图在键盘自定义对话框中找到它们，甚至尝试录制宏但没有任何效果。

我得到的最接近的是`Shift``F10``E`，`Shift``F10``P`但为此我需要双手。

几年前我最后一次在 VS2005 中处理报告时，我得到了它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T06:44:32.457

通常使用 Visual Studio (BIDS) 中的快捷方式，您可以转到工具 --> 选项 --> 环境 --> 键盘

如果您过滤命令列表以使列表更短，您可以找到所需的命令并单击“按快捷键：”文本框，然后按所需的快捷键组合。

我试过了，但与 Expression 相关的所有内容都不起作用:(。基本上很难知道所有这些命令是什么，也很难找到你想要的那个。

但还有另一种选择。这有点绕圈子，但效果很好。它基本上涉及创建一个宏，它将 shift-F10-E 发送到您的活动上下文，然后将该宏绑定到您选择的快捷键，例如 CTRL-1。我正在使用 Visual Studio 2008（从 SQL Server 2008R2 磁盘安装）

1) 通过选择 View--> Other windows --> Macro Explorer 来显示宏窗口

2）在“MyMacros”下创建一个新模块

3) 输入这个 VB.NET 代码：

```
Imports System
Imports EnvDTE
Imports EnvDTE80
Imports EnvDTE90
Imports System.Diagnostics

Public Module UserShortcuts
    Public Sub ShowExpression()
        System.Windows.Forms.SendKeys.SendWait("+{F10}E")
    End Sub
End Module 
```

4) 转到工具--> 选项--> 环境--> 键盘

5）在“显示包含的命令”文本框中键入“宏”，上面代码中模块中定义的子将出现，您可以突出显示它。

6) 然后您可以选择“按下快捷键”文本框并键入 [CTRL] + [1](http://msdn.microsoft.com/en-us/library/system.windows.forms.sendkeys%28v=vs.100%29.aspx)或您喜欢的任何内容，然后单击 [分配] 按钮。

7) [这个 MSDN 页面](http://msdn.microsoft.com/en-us/library/system.windows.forms.sendkeys%28v=vs.100%29.aspx)显示了您可以为 SendWait 方法选择的所有关键选项。如果要添加更多键盘快捷键，只需在模块中为每个快捷键添加更多 Sub() 条目，然后按照步骤 4 到 6 映射它们。

我在[这里](http://davoscollective.com/2013/macros-in-visual-studio-bids/)写了这个解决方案的扩展版本。

# android - 强制关闭声明无法启动活动组件信息

> ID：13542765
> 
> 赞同：-1
> 
> 时间：2012-11-24T15:49:36.257
> 
> 标签：android, android-intent, android-activity, android-sqlite

我正在通过意图从另一个活动中调用一个活动并通过捆绑（字符串值）传递值但它无法启动活动这是代码和日志猫错误请帮我解决这个问题

## 正在调用另一个活动的活动

```
if(v==btndate){
    Intent i2=new Intent(accounts.this,calcok.class);
        String frm=edtdate1.getText().toString();
        String to=edtdate2.getText().toString();
        Log.e("acc->calcok","inbetween intents");
        Log.e("from date",frm);
            Log.e("to date",to);
        i2.putExtra("from",(String)frm);
        i2.putExtra("to",(String) to);
        startActivity(i2);
} 
```

## 前一个调用的活动

```
package dlp.android.digichronicle;

import java.io.IOException;
import java.util.ArrayList;
import android.app.Activity;
import android.content.Intent;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;
import android.util.Log;
import android.widget.Toast;

public class calcok extends Activity{
DBHandandler  myDbHelper=new DBHandandler(this);
SQLiteDatabase Mydatabase;
float inc,exp;
String s1,s2,s3;
String stattionlist,DBname="widgets";

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.myDbHelper = new DBHandandler(this);
     Bundle b=getIntent().getExtras();
System.out.println("Got from acc"+b);
String frm=b.getString("frm");
String to=b.getString("to");
    if(b!=null)
    {

        Log.e("frm",frm);
        Log.e("to",to);
             Log.e("Entered accounts->" +"CALCCCC","");
             try {
                    FetchingData();
                    myDbHelper.openDataBase();

                    Mydatabase = myDbHelper.getWritableDatabase();

                    String s =second.ge;

                    if(s.equalsIgnoreCase("accounts")){
                ArrayList<Float> inclist=new  ArrayList<Float>();
                ArrayList<Float> explist=new ArrayList<Float>();
                        try{
                 explist =myDbHelper.calc(Mydatabase,"exp",frm,to);

                inclist =myDbHelper.calc1(Mydatabase,frm,to);
                         }
                         catch(Exception e){
                        inclist.add(500.0f);
                                explist.add(320.0f);
                         }
                float inc= sum(inclist);
                float exp= sum(explist);
                    float sav=inc-exp;
                    if(sav<0){
                        s3="Deficit Amount";
                        }
                        else
                        {
                            s3=Float.toString(sav);
                        }
                        s1=Float.toString(inc);
                        s2=Float.toString(exp);
                      }
           Toast.makeText(getApplicationContext(), "GOt Details",Toast.LENGTH_LONG).show();

             } catch (SQLException e) {
                 //TODO Auto-generated catch block
                e.printStackTrace();
            }
        myDbHelper.close();
        Mydatabase.close();
        Intent i3=new Intent(calcok.this,accounts.class);
       i3.putExtra("inc",s1);
       i3.putExtra("exp",s2);
       i3.putExtra("sav",s3);
        startActivity(i3);
       }

         }
 public static float sum(ArrayList<Float> list){
      if(list==null || list.size()<1)
        return 0;

      float sum = 0;
      for(Float i: list)
        sum = sum+i;

      return sum;
    }

private void FetchingData() {

     try {  myDbHelper.onCreateDataBase();

    } catch (IOException ioe) {

        throw new Error("Unable to create database");
    } 
    try {

        myDbHelper.openDataBase();
        Mydatabase = myDbHelper.getWritableDatabase();

    }catch(SQLException sqle){

        throw sqle;

    }

}
  } 
```

## Logcat 错误

```
11-24 20:52:26.318: I/System.out(842): cursortrue
11-24 20:52:29.267: D/Testing(842): Checkpoint 2
11-24 20:52:29.647: D/dalvikvm(842): GC_FOR_ALLOC freed 9093K, 24% free 30100K/39303K, paused 91ms
 11-24 20:52:29.817: I/dalvikvm(842): threadid=3: reacting to signal 3
 11-24 20:52:29.837: I/dalvikvm(842): Wrote stack traces to '/data/anr/traces.txt'
 11-24 20:52:32.247: D/dalvikvm(842): GC_CONCURRENT freed 655K, 21% free 31399K/39303K, paused 5ms+23ms
 11-24 20:52:32.337: I/dalvikvm(842): threadid=3: reacting to signal 3
 11-24 20:52:32.366: I/dalvikvm(842): Wrote stack traces to '/data/anr/traces.txt'
 11-24 20:52:32.767: I/dalvikvm(842): threadid=3: reacting to signal 3
 11-24 20:52:32.797: I/dalvikvm(842): Wrote stack traces to '/data/anr/traces.txt'
 11-24 20:52:35.757: E/acc->calcok(842): inbetween intents
 11-24 20:52:35.847: I/System.out(842): Got from accBundle[mParcelledData.dataSize=64]
 11-24 20:52:35.847: D/AndroidRuntime(842): Shutting down VM
 11-24 20:52:35.858: W/dalvikvm(842): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
 11-24 20:52:35.897: E/AndroidRuntime(842): FATAL EXCEPTION: main
 11-24 20:52:35.897: E/AndroidRuntime(842): java.lang.RuntimeException: Unable to start   activity ComponentInfo{dlp.android.digichronicle/dlp.android.digichronicle.calcok}: java.lang.NullPointerException: println needs a message
 11-24 20:52:35.897: E/AndroidRuntime(842):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
 11-24 20:52:35.897: E/AndroidRuntime(842):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
  11-24 20:52:35.897: E/AndroidRuntime(842):    at android.app.ActivityThread.access$600(ActivityThread.java:123)
 11-24 20:52:35.897: E/AndroidRuntime(842):     at and roid.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
 11-24 20:52:35.897: E/AndroidRuntime(842):     at android.os.Handler.dispatchMessage(Handler.java:99)
 11-24 20:52:35.897: E/AndroidRuntime(842):     at android.os.Looper.loop(Looper.java:137)
 11-24 20:52:35.897: E/AndroidRuntime(842):     at android.app.ActivityThread.main(ActivityThread.java:4424)
 11-24 20:52:35.897: E/AndroidRuntime(842):     at java.lang.reflect.Method.invokeNative(Native Method)
 11-24 20:52:35.897: E/AndroidRuntime(842):     at java.lang.reflect.Method.invoke(Method.java:511)
 11-24 20:52:35.897: E/AndroidRuntime(842):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
 11-24 20:52:35.897: E/AndroidRuntime(842):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
 11-24 20:52:35.897: E/AndroidRuntime(842):     at dalvik.system.NativeStart.main(Native Method)
11-24 20:52:35.897: E/AndroidRuntime(842): Caused by: java.lang.NullPointerException: println needs a message
11-24 20:52:35.897: E/AndroidRuntime(842):  at android.util.Log.println_native(Native Method)
 11-24 20:52:35.897: E/AndroidRuntime(842):     at android.util.Log.e(Log.java:231)
 11-24 20:52:35.897: E/AndroidRuntime(842):     at dlp.android.digichronicle.calcok.onCreate(calcok.java:30)
 11-24 20:52:35.897: E/AndroidRuntime(842):     at android.app.Activity.performCreate(Activity.java:4465)
 11-24 20:52:35.897: E/AndroidRuntime(842):     at an droid.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
  11-24 20:52:35.897: E/AndroidRuntime(842):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
  11-24 20:52:35.897: E/AndroidRuntime(842):    ... 11 more
   11-24 20:52:36.297: I/dalvikvm(842): threadid=3: reacting to signal 3
  11-24 20:52:36.317: I/dalvikvm(842): Wrote stack traces to '/data/anr/traces.txt'
  11-24 20:52:36.567: I/dalvikvm(842): threadid=3: reacting to signal 3
  11-24 20:52:36.576: I/dalvikvm(842): Wrote stack traces to '/data/anr/traces.txt'
  11-24 20:52:37.117: I/dalvikvm(842): threadid=3: reacting to signal 3
  11-24 20:52:37.137: I/dalvikvm(842): Wrote stack traces to '/data/anr/traces.txt'
  11-24 20:52:37.619: I/dalvikvm(842): threadid=3: reacting to signal 3
   11-24 20:52:37.647: I/dalvikvm(842): Wrote stack traces to '/data/anr/traces.txt'
   11-24 20:52:38.147: I/dalvikvm(842): threadid=3: reacting to signal 3
   11-24 20:52:38.177: I/dalvikvm(842): Wrote stack traces to '/data/anr/traces.txt'
   11-24 20:52:38.697: I/dalvikvm(842): threadid=3: reacting to signal 3
  11-24 20:52:38.707: I/dalvikvm(842): Wrote stack traces to '/data/anr/traces.txt'
  11-24 20:52:39.217: I/dalvikvm(842): threadid=3: reacting to signal 3
   11-24 20:52:39.237: I/dalvikvm(842): Wrote stack traces to '/data/anr/traces.txt'
   11-24 20:52:39.737: I/dalvikvm(842): threadid=3: reacting to signal 3
  11-24 20:52:39.757: I/dalvikvm(842): Wrote stack traces to '/data/anr/traces.txt'
  11-24 20:52:39.877: I/Process(842): Sending signal. PID: 842 SIG: 9
  11-24 20:52:41.037: I/dalvikvm(857): threadid=3: reacting to signal 3
  11-24 20:52:41.107: I/dalvikvm(857): Wrote stack traces to '/data/anr/traces.txt'
  11-24 20:52:41.246: D/dalvikvm(857): GC_FOR_ALLOC freed 70K, 3% free 9121K/9347K, paused 68ms 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T16:13:24.713

你`frm`在活动中（正如它在 Logcat 中非常清楚地指出的那样）`null`。`calcok`

```
11-24 20:52:35.897: E/AndroidRuntime(842): Caused by: java.lang.NullPointerException: println needs a message
11-24 20:52:35.897: E/AndroidRuntime(842):  at android.util.Log.println_native(Native Method)
 11-24 20:52:35.897: E/AndroidRuntime(842):     at android.util.Log.e(Log.java:231)
 11-24 20:52:35.897: E/AndroidRuntime(842):     at dlp.android.digichronicle.calcok.onCreate(calcok.java:30) 
```

所以，我想这是你收到额外费用的方式。尝试：

```
String frm = getIntent().getStringExtra("frm");
String to = getIntent().getStringExtra("to"); 
```

**编辑**：刚刚意识到您将额外的作为`from`，并将其作为`frm`. 这就是错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T16:15:54.993

在你的 logcat 中看到这一行： Caused by: java.lang.NullPointerException: println needs a message。在某个地方，您没有将任何打印消息传递给您的日志语句。请检查您所有的日志语句增益。并确保您已将活动包含在 AndroidManifest 文件中。在收到意图的同时，您错过了。尝试按照建议接收意图。肯定会解决的。

# spotify - 有没有办法使用 spotify 应用程序 api 设置“正在播放”？

> ID：13542767
> 
> 赞同：1
> 
> 时间：2012-11-24T15:50:01.653
> 
> 标签：spotify

在 spotify 应用程序 api 中有没有办法设置“正在播放”播放列表而不中断当前播放的曲目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T16:22:37.123

不，当前正在播放的曲目和正在播放的内容*一起*构成“正在播放”。根据定义，您不能在不中断正在播放的内容的情况下更改“正在播放”。

如果您想修改当前曲目*之后*播放的内容，请注意播放器对象上的相关事件 - 当当前曲目结束时，您可以无缝更改接下来播放的内容。

# module - Zend Framework 2：路由器“解析为无效的控制器类或别名：”

> ID：13542771
> 
> 赞同：12
> 
> 时间：2012-11-24T15:50:28.737
> 
> 标签：module, zend-framework2, router

我正在寻找有关 ZF2 路由器配置的帮助。

我想在开发环境中将多个控制器添加到单个模块中，尽管最终必须弄清楚如何指定特定的路由。

为此，我目前正在尝试使用 MVC 快速入门文档中指定的通用 module.config。但是，这似乎不像 ZF2 文档所建议的那样执行。

[http://framework.zend.com/manual/2.0/en/modules/zend.mvc.quick-start.html](http://framework.zend.com/manual/2.0/en/modules/zend.mvc.quick-start.html)

文档说明：

> “ZendSkeletonApplication 附带了一个“默认路由”，它可能会让您执行此操作。该路由基本上需要“/{module}/{controller}/{action}”，它允许您指定：“/zend-user/ hello/world”。我们将在这里创建一个路由，主要是为了说明目的，因为创建显式路由是推荐的做法。”

但是，控制器渲染 /landlord、/landlord/home/index，而不是 /landlord/sandbox/index。Home 和沙盒是控制器。沙盒已根据命名约定“SandboxController”进行命名。我的看法是，文档中代码的 child_routes 部分可能需要一些我错过的修改。

在沙箱实例中，我在 404 错误页面上收到此错误。

> *Landlord\Controller\Sandbox（解析为无效的控制器类或别名：Landlord\Controller\Sandbox）*

我尝试将 'Landlord\Controller\Sandbox' => 'Landlord\Controller\SandboxController', 添加到可调用对象中，但这会产生错误。

我的控制器如下所列：

```
return array(
'controllers' => array(
    'invokables' => array(
        'Landlord\Controller\Home' => 'Landlord\Controller\HomeController',

    ),
),
'router' => array(
    'routes' => array(
        'landlord' => array(
            'type'    => 'Literal',
            'options' => array(
                // Change this to something specific to your module
                'route'    => '/landlord',
                'defaults' => array(
                    // Change this value to reflect the namespace in which
                    // the controllers for your module are found
                    '__NAMESPACE__' => 'Landlord\Controller',
                    'controller'    => 'home',
                    'action'        => 'index',
                ),
            ),
            'may_terminate' => true,
            'child_routes' => array(
                // This route is a sane default when developing a module;
                // as you solidify the routes for your module, however,
                // you may want to remove it and replace it with more
                // specific routes.
                'default' => array(
                    'type'    => 'Segment',
                    'options' => array(
                        'route'    => '/[:controller[/:action]]',
                        'constraints' => array(
                            'controller' => '[a-zA-Z][a-zA-Z0-9_-]*',
                            'action'     => '[a-zA-Z][a-zA-Z0-9_-]*',
                        ),
                        'defaults' => array(
                        ),
                    ),
                ),
            ),
        ),
    ),
),
'view_manager' => array(
    'template_path_stack' => array(
        'landlord' => __DIR__ . '/../view',
    ),
),
); 
```

如果有一种简单的方法可以直接配置 url，这也会很有用，或者一个非常好的教程，这也将不胜感激。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-30T18:34:53.970

这里的问题是，即使路由器会尝试路由到您添加的新控制器，您仍然需要为您添加的每个控制器添加 Invokable 部分。因此，此时您的路由器似乎很好，但是如果您添加例如一个新的 AboutController，那么您将需要像这样修改配置的顶部...

```
return array(
'controllers' => array(
    'invokables' => array(
        'Landlord\Controller\Home' => 'Landlord\Controller\HomeController',
        'Landlord\Controller\About' => 'Landlord\Controller\AboutController',
    ),
), 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T20:14:13.247

只需找到答案...在此处发布，它可能会对某些人有所帮助...我假设您已遵循 zf2 docs 提供的专辑模块示例，现在添加新模块，例如在我的情况下为“管理员”，我添加新的控制器，如管理员、新闻等，

这是路由器设置...

```
'router' => array(
        'routes' => array(
            'admin' => array(
                'type' => 'segment',
                'options' => array(
                    'route' => '/admin/admin[/:action][/:id]',
                    'constraints' => array(
                        'action' => '[a-zA-Z][a-zA-Z0-9_-]*',
                        'id' => '[0-9]+',
                    ),
                    'defaults' => array(
                        'controller' => 'Admin\Controller\Admin',
                        'action' => 'index',
                    ),
                ),

            ),
            'news' => array(
                'type' => 'segment',
                'options' => array(
                    'route' => '/admin/news[/:action][/:id]',
                    'constraints' => array(
                        'action' => '[a-zA-Z][a-zA-Z0-9_-]*',
                        'id' => '[0-9]+',
                    ),
                    'defaults' => array(
                        'controller' => 'Admin\Controller\News',
                        'action' => 'index',
                    ),
                ),

            ),
        ),
    ), 
```

在这里添加你的控制器..

```
'controllers' => array(
        'invokables' => array(
            'Admin\Controller\News' => 'Admin\Controller\NewsController',
            'Admin\Controller\Admin' => 'Admin\Controller\AdminController',

        ),
    ), 
```

现在你可以在你的模块中调用你的控制器，就像我的例子一样

```
localhost/{foldername}/admin/news/index and localhost/{foldername}/admin/admin/index 
```

谢谢

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-28T12:01:47.070

我也是这种情况，我找到了与上一篇文章一样的解决方案，但我认为这不是更好的方法。

为了在我的路由中添加 le “clientController”：

```
'router' => array(
    'routes' => array(
        'home' => array(
            'type' => 'Zend\Mvc\Router\Http\Literal',
            'options' => array(
                'route' => '/',
                'defaults' => array(
                    'controller' => 'Fcm\Controller\Index',
                    'action' => 'index',
                ),
            ),
        ),
        'client' => array(
            'type' => 'Segment',
            'options' => array(
                'route' => '/client[/:action][/:id]',
                'constraints' => array(
                    'action' => '[a-zA-Z][a-zA-Z0-9_-]*',
                    'id' => '[0-9]+',
                ),
                'defaults' => array(
                    'controller' => 'Fcm\Controller\Client',
                    'action' => 'index',
                ),
            ),
        ),
    ),
), 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-29T10:20:08.760

像这样配置路由：-
模块：- 用户
控制器：- IndexController

```
'router' => array(
        'routes' => array(
            'users' => array(
                'type' => 'Literal',
                'options' => array(
                    // Change this to something specific toyour module
                    'route' => '/users',
                    'defaults' => array(
                                // Change this value to reflect the namespace in which
                        // the controllers for your module are found
                        '__NAMESPACE__' => 'Users\Controller',
                        'controller' => 'Index',
                        'action' => 'index',
                    ),
                ),
                'may_terminate' => true,
                'child_routes' => array(
                    'default' => array(
                        'type' => 'Segment',
                        'options' => array(
                            'route' =>
                            '/[:controller[/:action][/:id]]',
                            'constraints' => array(
                                'controller' =>'[a-zA-Z][a-zA-Z0-9_-]*',
                                'action' =>'[a-zA-Z][a-zA-Z0-9_-]*',
                                'id' =>'[0-9]+',
                            ),
                            'defaults' => array(
                            ),
                        ),
                    ),
                ),
            ),
        ),
    ), 
```

# javascript - 在 JQuery/JQuery Mobile 中格式化数字

> ID：13542772
> 
> 赞同：0
> 
> 时间：2012-11-24T15:50:30.217
> 
> 标签：javascript, jquery, jquery-ui, cordova, jquery-mobile

我正在使用 Phonegap 和 JQuery Mobile 创建一个应用程序，并且有一个需要格式化特定计数器的特定场景。

基本上，计数器从 1 开始，并在触发某个事件时不断增加。但是，为了显示它，我需要将它们显示为 0001，然后一旦触发事件，它将转到 0002 .... 0099 ... 0999 ... 9999（最大值）。

到目前为止，我所拥有的是输出 15 等数字，但我找不到如何将 00 填充放在前面，以便该值始终显示为 4 个字符。

有人可以帮助我或指导我使用任何可用的插件吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T15:52:42.850

要格式化您的号码，您可以这样做

```
var formattedNumber = ("000"+number).slice(-4); 
```

编辑以下评论：

你可以这样做 ：

```
 var eventCounter = parseInt($('.eventCount').text(), 10) +1;
 $('.eventCount').text(("000"+number).slice(-4)); 
```

不要忘记[parseInt](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt)的第二个参数，基数，`parseInt("0009")`原样`0`......

但我建议使用 id 而不是类作为选择器：这会更快，因为你只有一个 div。所以你的 HTML 将是

```
<div id=eventCount>0001</div> 
```

并且您的 jQuery 选择器将`"#eventCount"`代替“.eventCount”。

# stream - fql流表：检索包含标签的特定用户的所有帖子

> ID：13542773
> 
> 赞同：0
> 
> 时间：2012-11-24T15:50:42.883
> 
> 标签：stream, tags, facebook-fql

我必须编写一个 FQL 查询来检索包含标签的特定用户的所有帖子。我试过：

```
SELECT post_id, source_id, target_id, actor_id, message
FROM stream
WHERE
    source_id = [tagPublisherId]
    AND actor_id = [tagPublisherId]
    AND tagged_ids != NULL 
```

但它不起作用，因为“NULL 不是流表的成员”。如何在 FQL 查询中检查非空数组类型？

# visual-c++ - 如何通过 C++ 中的两个应用程序同时访问/打开串行端口

> ID：13542776
> 
> 赞同：0
> 
> 时间：2012-11-24T15:51:14.407
> 
> 标签：visual-c++, serial-port, hyperterminal

当我使用应用程序[hercules_3-2-5](http://www.hw-group.com/products/hercules/index_en.htm "串口终端") 并打开一个串行端口时，任何其他应用程序都无法打开该端口，直到它被端口开放应用程序释放。问题是在新笔记本电脑上没有串行端口，我希望我的 c++ 应用程序打开由 (hercules_3-2-5) 打开的同一个端口并与之通信。

有没有办法在另一个应用程序已经打开的同一个串行端口上打开/通信？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T15:54:19.297

不能用同一个串口打开2个程序。

# jquery - ajax响应后的jQuery .remove（）

> ID：13542778
> 
> 赞同：0
> 
> 时间：2012-11-24T15:51:35.050
> 
> 标签：jquery, ajax, checkbox

我使用和`HTML`动态创建复选框。它们看起来像这样：`PHP``MySQL`

```
<input type='checkbox' name ='chkDel' value='11'>
<input type='checkbox' name ='chkDel' value='18'>
<input type='checkbox' name ='chkDel' value='55'> 
```

然后我有这个`jQuery`脚本来检查是否选中了一个或多个复选框并处理`PHP`文件中的信息。对于选中的每个复选框，它都会删除数据库表中的一行。

```
$('#delete_absence_row').click(function() {
        var query_string = ''; 
        $('input[type=checkbox]').each( 
            function() { 
                if (this.checked) { 
                        query_string += "&chkDel[]=" + this.value; 
                    } 
            });
    $.ajax({ 
        type: "POST", 
        url: "../updateAbsence.php", 
        data: query_string, 
        success: 
            function(t) { 
                $("div#content_response").empty().append(t);
            }, 
        error: 
            function(){ 
                $("div#content_response").append("An error occured during processing"); 
            } 
        }); 
    }); 
```

现在我想`.remove();`在每个标记的复选框上附加一个，即`query_string`在`success:function(t)`

我`jQuery`不太了解，上面的代码是我在网上找到的不同解决方案的混合体，所以请耐心等待。

如何删除成功功能后标记的复选框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T16:12:55.930

```
$('#delete_absence_row').click(function() {
        var query_string = '';
        var todelete = [];
        $('input[type=checkbox]:checked').each( 
            function() { 
                query_string += "&chkDel[]=" + this.value;
                todelete.push(this);
            });
    $.ajax({ 
        type: "POST", 
        url: "../updateAbsence.php", 
        data: query_string, 
        success: 
            function(t) { 
                $("div#content_response").empty().append(t);
                $.each(todelete, function (i, e) {
                    $(e).remove();
                });
            }, 
        error: 
            function(){ 
                $("div#content_response").append("An error occured during processing"); 
            } 
        }); 
    }); 
```

# facebook-like - Facebook“喜欢”按钮并不总是显示

> ID：13542779
> 
> 赞同：0
> 
> 时间：2012-11-24T15:51:37.590
> 
> 标签：facebook-like, facebook-authentication

我通过 iframe 为我的网站实现了一个点赞按钮，但它只显示人们何时登录 Facebook，这正常吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T15:56:17.977

我有同样的问题。它与“仅向以下国家/地区的用户显示此计数”或类似内容有关。将其关闭，它将始终显示计数。

转到您的 Facebook 页面，单击编辑页面 > 管理权限 > 国家限制。确保此框中没有任何物品。

几个月前，我不得不深入挖掘为我找到这个解决方案，但从那以后它就像一种魅力。

# c++ - 读取和写入套接字

> ID：13542780
> 
> 赞同：2
> 
> 时间：2012-11-24T15:51:43.663
> 
> 标签：c++, sockets

我制作了一个简单的 tcp 服务器/客户端应用程序，客户端向服务器写入一些内容，然后将其回显给客户端。但是，当我尝试读取服务器在客户端回显的内容时遇到了一些问题。

```
string s;
while((n = read(socketFD[0],readBuf, BUFFER_SIZE)) > 0){
  cout<<"\nBytes read: "<<n<<endl;
  s.append(readBuf, n);
}
cout<<"\nTest after read\n"; 
```

我将 16 KB 的文本写入服务器。当我在客户端阅读时，我一次阅读 4 KB。

这段代码的输出是：

```
Bytes read: 4096

Bytes read: 4096

Bytes read: 4096

Bytes read: 4046 
```

read 调用似乎在完成从套接字读取之后阻塞并且永远不会离开循环。我怎样才能解决这个问题？

编辑：这是处理连接客户端的服务器中的代码。

```
if((childpid = fork()) == 0){
  close(listenFD);
  while ((n = read(connectFD, buf, BUFFSIZE)) > 0){
    cout<<"\nBytes read: "<<n<<endl;
    write(connectFD, buf, n);
  }
  cout<<"\nTest after read\n";
  exit(0);
} 
```

这个输出是：

```
Bytes read: 4096

Bytes read: 4096

Bytes read: 4096

Bytes read: 4046

Test after read 
```

与客户端中的代码相比，这里有什么不同？为什么读取调用不像在客户端那样阻塞？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T16:11:01.213

> **read 调用似乎在完成从套接字读取之后阻塞并且永远不会离开循环。我怎样才能解决这个问题？**

`read`简短的回答，收到所有数据后不要打电话。

编写代码来检测您何时收到了当时想要接收的所有数据，如果是，则退出循环。您必须实际实现某种协议。

```
s+=readBuf; 
```

这不可能。它如何知道要添加多少字节的数据`s`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T16:08:38.383

如果您不想将读取循环放在另一个线程中，您将需要[轮询](http://linux.die.net/man/2/poll)或[选择，这样您就可以查看队列中是否存在某些内容，而无需实际读取它。](http://linux.die.net/man/2/select)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T16:46:03.977

这是对 Python 中套接字的非常好的介绍的摘录。它是 Python，是的，但它公开了 C-Socket API，所以那里写的内容在您的上下文中也是正确的。你可以在这里阅读：http: [//docs.python.org/dev/howto/sockets.html](http://docs.python.org/dev/howto/sockets.html)

关于“使用套接字”的部分准确地告诉您您正在观察的问题是什么。它讨论了`recv`函数，但它转换为`read`文件描述符上的函数。

> 但是，如果您打算重用您的套接字进行进一步的传输，您需要意识到套接字上没有 EOT。我再说一遍：如果一个套接字 send 或 recv 在处理 0 个字节后返回，则连接已断开。如果连接没有断开，您可能会永远等待 recv，因为套接字不会告诉您没有更多要阅读的内容（现在）。现在，如果您稍微考虑一下，您就会意识到套接字的一个基本事实：消息必须是固定长度的（yuck），或者是定界的（耸肩），或者表明它们有多长（更好），或者以关闭连接结束。选择完全是你的，（但有些方法比其他方法更正确）。

# random - Fisher-Yates Shuffle：如果在 m 次后停止，则随机？

> ID：13542783
> 
> 赞同：4
> 
> 时间：2012-11-24T15:52:24.540
> 
> 标签：random, shuffle

我有整数 1,2,3,...,n 我必须从中随机选择 m < n 个不同的整数。我打算将这些整数放入一个数组中，然后使用 Fisher Yates Shuffle：

随机选择数组中的一个条目。将其与最后一个条目交换。然后，在数组中随机选择一个条目，最后一个条目除外。将其与倒数第二个条目交换。重复直到最后 m 个条目以这种方式获得。

**问题**

我的理解是，如果持续到 n 次，那么每次可能的安排都同样可能与这种洗牌。因此，如果在 m < n 次后停止，最后 m 个条目的每一个排列都是同样可能的。因此，最后 m 个条目是我需要的 m 个随机不同整数。

我的理解正确吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T17:12:52.890

是的，也许更容易前进：

让`rand(z)`返回范围内`[0..z)`

```
for (int i = 0; i < m; i++)
    swap(X[i], X[i+rand(n-i)]) 
```

`X[0..m-1]`现在是随机样本

# c - 基于汉明权重的索引

> ID：13542794
> 
> 赞同：13
> 
> 时间：2012-11-24T15:53:20.237
> 
> 标签：c, sorting, cuda, indexing, hammingweight

假设我们有一个整数`bitsize n=4;`
我正在描述的问题是你将如何根据汉明权重和它的值将一个数字索引到一个数组位置`bitsize`。例如，位大小为 4 的具有 16 个元素的数组将/可能如下所示：

```
|0|1|2|4|8|3|5|6|9|10|12|7|11|13|14|15| 
```

其中元素按其汉明权重（必要）分组并根据大小排序（非必要）。只要您可以使用例如 3(0011) 进行一些操作并取回索引 5、5(0101) -> 6 等，就不需要排序。

所有`n`位组合都将存在，并且不会有重复。例如 bitsize of`3`会有数组：

```
|0|1|2|4|3|5|6|7| 
```

我最好有一个没有循环的解决方案。或任何讨论类似解决方案的论文。或者最后只是抛出任何关于如何去做的想法。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-28T20:52:36.793

请注意，您可以使用以下函数枚举具有*相同汉明权重的数字（按计数顺序）：*

```
int next(int n) { // get the next one with same # of bits set
  int lo = n & -n;       // lowest one bit
  int lz = (n + lo) & ~n;      // lowest zero bit above lo
  n |= lz;                     // add lz to the set
  n &= ~(lz - 1);              // reset bits below lz
  n |= (lz / lo / 2) - 1;      // put back right number of bits at end
  return n;
}

int prev(int n) { // get the prev one with same # of bits set
   int y = ~n;
   y &= -y; // lowest zero bit
   n &= ~(y-1); // reset all bits below y
   int z = n & -n; // lowest set bit
   n &= ~z;        // clear z bit
   n |= (z - z / (2*y)); // add requried number of bits below z
   return n;
 } 
```

例如，在 x = 5678 上重复应用 prev()：

```
0: 00000001011000101110 (5678)
1: 00000001011000101101 (5677)
2: 00000001011000101011 (5675)
3: 00000001011000100111 (5671)
4: 00000001011000011110 (5662)
5: 00000001011000011101 (5661)
6: 00000001011000011011 (5659)
..... 
```

因此，理论上您可以通过重复应用来计算数字的索引。但是，这可能需要很长时间。更好的方法是“跳过”某些组合。

有2条规则：

```
 1\. if the number starts with: ..XXX10..01..1 we can replace it by ..XXX0..01..1
adding corresponding number of combinations
 2\. if the number starts with: ..XXX1..10..0 again replace it by XXX0..01..1 with corresponding number of combinations 
```

以下算法计算具有*相同*汉明权重的数字中的数字的索引（我不关心二项式的快速实现）：

```
#define LOG2(x) (__builtin_ffs(x)-1)

int C(int n, int k) { // simple implementation of binomial
 int c = n - k; 
 if(k < c) 
   std::swap(k,c);
 if(c == 0)
  return 1;
 if(k == n-1) 
  return n;
 int b = k+1;
 for(int i = k+2; i <= n; i++) 
    b = b*i;
 for(int i = 2; i <= c; i++)
   b = b / i;
 return b;
}
int position_jumping(unsigned x) {
   int index = 0;
  while(1) {

    if(x & 1) { // rule 1: x is of the form: ..XXX10..01..1
        unsigned y = ~x;
        unsigned lo = y & -y; // lowest zero bit
        unsigned xz = x & ~(lo-1); // reset all bits below lo
        unsigned lz = xz & -xz; // lowest one bit after lo
        if(lz == 0) // we are in the first position!
           return index;

        int nn = LOG2(lz), kk = LOG2(lo)+1;       
        index += C(nn, kk); //   C(n-1,k) where n = log lz and k = log lo + 1

        x &= ~lz; //! clear lz bit
        x |= lo; //! add lo

    } else { // rule 2: x is of the form: ..XXX1..10..0
        int lo = x & -x; // lowest set bit
        int lz = (x + lo) & ~x;  // lowest zero bit above lo  
        x &= ~(lz-1); // clear all bits below lz
        int sh = lz / lo;

        if(lz == 0) // special case meaning that lo is in the last position
            sh=((1<<31) / lo)*2;
        x |= sh-1;

        int nn = LOG2(lz), kk = LOG2(sh);
        if(nn == 0)
           nn = 32;
        index += C(nn, kk);
    }
    std::cout << "x: " << std::bitset<20>(x).to_string() << "; pos: " << index << "\n";
  }
 } 
```

例如，给定数字 x=5678，算法将在 4 次迭代中计算其索引：

```
 x: 00000001011000100111; pos: 4
  x: 00000001011000001111; pos: 9
  x: 00000001010000011111; pos: 135
  x: 00000001000000111111; pos: 345
  x: 00000000000001111111; pos: 1137 
```

请注意，1137 是 5678 在具有**相同**汉明权重的数字组中的位置。因此，您必须相应地移动该指数以考虑所有具有较小汉明权重的数字

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T15:35:02.223

这是一个概念作品，只是为了开始讨论。
第一步是最难的 - 使用近似计算阶乘来解决。
还有什么好主意吗？

[ideone链接](http://ideone.com/dNT3o4)

```
#include <stdio.h>
#include <math.h>

//gamma function using Lanczos approximation formula
//output result in log base e
//use exp() to convert back
//has a nice side effect: can store large values in small [power of e] form
double logGamma(double x)
{
    double tmp = (x-0.5) * log(x+4.5) - (x+4.5);
    double ser = 1.0 + 76.18009173     / (x+0) - 86.50532033    / (x+1)
                     + 24.01409822     / (x+2) -  1.231739516   / (x+3)
                     +  0.00120858003  / (x+4) -  0.00000536382 / (x+5);
    return tmp + log(ser * sqrt(2*M_PI) );  
}

//result from logGamma() are actually (n-1)!
double combination(int n, int r)
{
    return exp(logGamma(n+1)-( logGamma(r+1) + logGamma(n-r+1) ));
}

//primitive hamming weight counter
int hWeight(int x)
{
    int count, y;
    for (count=0, y=x; y; count++)
        y &= y-1; 
    return count;
}

//-------------------------------------------------------------------------------------
//recursively find the previous group's "hamming weight member count" and sum them
int rCummGroupCount(int bitsize, int hw)
{
    if (hw <= 0 || hw == bitsize) 
        return 1;
    else
        return round(combination(bitsize, hw)) + rCummGroupCount(bitsize,hw-1);
}
//-------------------------------------------------------------------------------------

int main(int argc, char* argv[])
{
    int bitsize = 4, integer = 14;
    int hw = hWeight(integer);
    int groupStartIndex = rCummGroupCount(bitsize,hw-1);
    printf("bitsize: %d\n", bitsize);
    printf("integer: %d  hamming weight: %d\n", integer, hw);
    printf("group start index: %d\n", groupStartIndex);
} 
```

> 输出：
> 
> 位大小：4
> 整数：14 汉明权重：3
> 组起始索引：11

# wordpress - 在 wordpress 中向 gravatar img 添加类

> ID：13542796
> 
> 赞同：10
> 
> 时间：2012-11-24T15:54:01.137
> 
> 标签：wordpress, wordpress-theming, gravatar

我一直在尝试使用 get_avatar**在 wordpress 模板中**的每个帖子下显示作者的 gravatar，但我找不到将 class="pic-2" 添加到 gravatar 图像代码甚至更改 gravatar 高度和宽度的方法分别为 100px 和 77px

```
<?php echo get_avatar( get_the_author_meta('ID'), 32 ); ?> 
```

任何帮助家伙？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-03T02:02:29.903

我认为处理这个问题的最好方法是使用过滤器，而不是像 George 建议的那样使用 jQuery。您只需将其添加到主题的*functions.php*文件中即可。

```
add_filter('get_avatar','add_gravatar_class');

function add_gravatar_class($class) {
    $class = str_replace("class='avatar", "class='avatar pic-2", $class);
    return $class;
} 
```

*注意，我没有对此进行测试，但相信它会起作用。有关更多信息，请参阅[此线程](http://wordpress.org/support/topic/customize-get_avatar-css-class)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T16:57:01.777

查看 WordPress Codex 了解更多信息：

[http://codex.wordpress.org/Using_Gravatars](http://codex.wordpress.org/Using_Gravatars)

对于大小，尝试像这样包装第二个参数：

```
<?php echo get_avatar( get_the_author_meta('ID'), $size = '96' ); ?> 
```

默认的 html 输出是这样的：

```
<img alt='' src='http://gravatarurl_or_default' class='avatar avatar-$size' height='$size' width='$size' /> 
```

您可以设置默认类 'avatar' 的样式来代替 'pic-2'。如果您仍想添加一个 class ，您可以通过 javascript 来完成，如下所示：

```
$("img[class='avatar']").addClass("pic-2"); 
```

希望这可以帮助！:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-16T14:54:14.720

如果@Ryan 回答（标记为解决方案）对您不起作用，请尝试更改

```
add_filter('get_avatar','add_gravatar_class');

function add_gravatar_class($class) {
    $class = str_replace("class='avatar", "class='avatar pic-2", $class);
    return $class;
} 
```

进入

```
add_filter('get_avatar','add_gravatar_class');

function add_gravatar_class($class) {
    $class = str_replace('class="avatar', 'class="avatar pic-2', $class);
    return $class;
} 
```

在将“替换为”之后，这个开始对我有用。

抱歉，我没有将此作为对该答案的评论，但我没有 50 名声望来评论其他帖子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-23T10:14:28.067

为将来的搜索者执行此操作的另一种方法，非常简单的字符串操作，如果他们将来更改函数可能会更安全一些，例如它可能总是有一个“类”。

```
 $grvimg = get_avatar('email address', 200);
    $grvimg = explode("class='", $grvimg);
    $grvimg[1] = 'your-class ' . $grvimg[1];
    $grvimg = $grvimg[0] . $grvimg[1];
    echo $grvimg; 
```

# c# - 带前导 0 的 Int 到字符串转换

> ID：13542805
> 
> 赞同：3
> 
> 时间：2012-11-24T15:54:44.560
> 
> 标签：c#, string, int, zero-pad

我目前将整数转换为字符串以显示在屏幕上，但希望保持 4 位数字 - 即 10 =“0010”。从整数 10 到字符串“0010”的最佳方法是什么？

这是在 C# 和 .NET 4 中。

干杯!

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-24T15:56:20.677

```
int num = 1;
// pad with 0 up to 4 places
string str = num.ToString("D4"); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-24T15:56:13.937

```
var str = 10.ToString("0000"); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-24T15:58:29.273

你可以试试 ：-

```
 string str = num.ToString("D8"); //padding with 8 zero's 
```

检查此[链接](http://msdn.microsoft.com/en-us/library/dd260048.aspx)

# android - Android的渐变drawables：Eclipse中的截图质量很差

> ID：13542808
> 
> 赞同：6
> 
> 时间：2012-11-24T15:54:58.677
> 
> 标签：android, eclipse, gradient, android-drawable

我正在使用如下可绘制的渐变背景：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle">
    <gradient
        android:startColor="#ffffff"
        android:endColor="#cccccc"
        android:angle="-90"
        android:dither="true" />
</shape> 
```

这会导致模拟器上出现带状渐变，当我截取模拟器的屏幕截图（使用 Eclipse）时，结果更差：

![在此处输入图像描述](../Images/938e66aa6a9ac8b0ef9eb52ae31d3554.png)

为什么？以及如何解决这个问题？尽管我`android:dither="true"`在可绘制对象的 XML 中使用并将其设置在`Activity`'s中`onCreate()`：

```
 getWindow().setFormat(PixelFormat.RGBA_8888);
    getWindow().addFlags(WindowManager.LayoutParams.FLAG_DITHER); 
```

顺便说一句，蓝色部分是本机操作栏，灰色渐变是`ListView`带有背景可绘制的行。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-03T14:58:44.237

*只是为了确保阅读此问题的每个人都能看到解决方案：*

正如**davehale23**和**Chris Stratton**指出的那样，问题不在于 Eclipse 或应用程序被“拍照”。问题在于 Android 模拟器，它显然使用了减少的位深度。

因此，如果要截取应用程序的屏幕截图，则应始终使用真实设备。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-06-18T10:11:59.063

正如@Marco W. 上面提到的，这个问题与Android Eclipse Emulator 直接相关。

因此，在较新版本的 Eclipse SDK 中，提高图像质量（可能还有更好的仿真器性能）的解决方案是在 Android 设备管理器仿真选项中启用“使用主机 GPU”。

要为现有的 AVD 打开此功能：

*   选择要为其启用 GPU 仿真的 AVD 名称
*   点击“编辑”
*   选中“仿真选项”部分下的“使用主机 GPU”
*   单击“确定”以保存您的 AVD 配置更改

或者在创建新的 AVD 时简单地打开此选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T07:01:24.327

进一步我上面的评论，尝试这样的事情，我通常会从中得到很好的质量，虽然没有注意到渐变是什么样子。DRAWING_CACHE_QUALITY_HIGH 可能会有所帮助，但不确定。

```
void getScreenCap(View yourView) {
    yourView.setDrawingCacheEnabled(true);
    yourView.setDrawingCacheQuality(LinearLayout.DRAWING_CACHE_QUALITY_HIGH);
    yourView.buildDrawingCache();
    Bitmap bmp = null;
    if (yourView != null) { 
        try {
            bmp = Bitmap.createBitmap(yourView.getDrawingCache());
        } catch (NullPointerException e) { }
    }
    yourView.setDrawingCacheEnabled(false);
    yourView.destroyDrawingCache();

    if (bmp != null) {
        String file_path = Environment.getExternalStorageDirectory().getAbsolutePath() + "/";
        File dir = new File(file_path);
        if (!dir.exists()) { 
            dir.mkdirs();
        }
        File file = new File(dir, "screencap.png");
        FileOutputStream fOut = null;
        try { fOut = new FileOutputStream(file); } catch (FileNotFoundException e1) { }
        bmp.compress(Bitmap.CompressFormat.PNG, 85, fOut);
        try { fOut.flush(); fOut.close(); } catch (IOException e1) { }
    }
} 
```

我不确定这是否会编译，但它有你需要为你的应用程序截屏的东西。

您的 AVD 需要 SDCARD，并且在清单中您还需要：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"></uses-permission> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T18:45:04.177

我认为截图位深度问题是两方的错；Android DDMS/监视器以及被捕获的设备/模拟器。

如果设备/仿真器的显示位深度较低，那么您对这种特定情况（GIGO）无能为力。虽然，我已经清楚地看到，在某些设备/模拟器上，DDMS 拍摄的屏幕捕获质量低于实际显示。

在我的搜寻中，我刚刚找到了一个我认为可以解决这个问题的应用程序，称为“Android 屏幕监视器”，您可以在此处获取：

[http://code.google.com/p/android-screen-monitor/](http://code.google.com/p/android-screen-monitor/)

# neo4j - 来自继承的 @NodeEntity 的索引不返回预期结果

> ID：13542812
> 
> 赞同：0
> 
> 时间：2012-11-24T15:55:19.613
> 
> 标签：neo4j, spring-data-neo4j

我有一个共同的实体类：

```
@NodeEntity
public class Entity {
    /*** Common Fields ***/
    @GraphId
    protected Long nodeId;

    @Indexed(level = Indexed.Level.INSTANCE)
    protected Long id;

    @Indexed(level = Indexed.Level.INSTANCE)
    protected String someProperty;        

    ...
} 
```

一个扩展 Entiy 类的 Employee 类：

```
public class Employee extends Entity {

    @Indexed
    private String someOtherProperty;

    ...
} 
```

我在测试中注意到：

```
@Autowired private GraphDatabaseService service;
Node node1 = service.index().forNodes("Employee").get("id", 1l).getSingle(); 
```

不返回任何值，而

```
Node node2 = service.index().forNodes("Employee").get("someProperty", "someValue").getSingle();        
Node node3 = service.index().forNodes("Employee").get("someOtherProperty", "someOtherValue").getSingle(); 
```

两者都按预期返回。

我尝试将“id”的名称更改为其他文字，并使用 1（数字）和“1”（字符串）进行搜索，但情况仍然相同。我怀疑它与数值有关。

所以我想知道我是否以错误的方式使用@Indexed？

使用：neo4j-version：1.8 spring-data-neo4j.version：2.1.0.RC4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T10:45:43.240

数字字段的索引默认为数值，然后以不同的方式存储在 lucene 中，这意味着必须使用`NumericRangeQuery`，这是在`Neo4jTemplate.lookup`方法内部完成的。

如果您不想以数字方式索引数据，请使用`@Indexed(numeric=false)`. 然后它被索引为一个字符串，并通过密码和字符串索引查找找到。

# php - 点击链接后的 SQL 查询

> ID：13542814
> 
> 赞同：-1
> 
> 时间：2012-11-24T15:55:25.350
> 
> 标签：php, javascript

我有一个链接，我想在单击它后对数据库执行查询，然后重新加载页面。从我读到的，它可以使用 javascript 来完成，但我无法弄清楚。

编辑

忘了提到我想向脚本发送 4 个变量，但我不能使用 GET，因为我设置了 htaccess 来修改我的 URL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T15:59:04.833

这是将解决您的问题的jquery代码。在 javascript 函数中编写此代码。该按钮的 onclick 事件应调用此函数。在 yourpage.php 中编写所有数据库编码。

```
url = "yourpage.php";

    $.get
    (
        url,
        {
            'act'       :'getdata'
        },
        function(responseText)
        {           
            strData = responseText;

            $('#div_id').html(strData);

        },
        "html"
    ); 
```

它会起作用的。

检查此链接[http://api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T16:13:29.940

在这种情况下，您需要使用这些概念：

1.  用于提交 from 值的 JavaScript 函数
2.  PHP 代码

您需要使用以下代码：

```
 <a href = "javascript:submit()">Submit</a>
 <form action = "$_SERVER['PHP_SELF']" method = "post">
 <input type = "hidden" value = "some value"/>
 <input type = "hidden" value = "some value"/>
 <input type = "hidden" value = "some value"/>
 <input type = "hidden" value = "some value"/>
 </form>
<?php
//Connect to the database
$conn = mysqli_connect('host','user','password','db_name');
if($conn){
     $query = "SOME QUERY";
     $result = mysqli_query($conn, $query);
}
?> 
```

在您的`JavaScript`函数中编写代码以通过单击提交链接提交。

# php - PHP基础转换为唯一ID

> ID：13542818
> 
> 赞同：2
> 
> 时间：2012-11-24T15:55:32.127
> 
> 标签：php, unique

我正在使用`uuid`从 cassandra 生成此 utf8 字符串：

`f6195c60-364e-11e2-b43e-c78503d589ce21rvhf9q21`

但我需要将它缩短到 4-6 个字母之间，经过一番谷歌搜索后我发现

`base_convert($id, 5, 36);`

哪个做到了这一点，但它真的会保持独特吗？

这可能是一个愚蠢的问题，但我需要一些解释。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T16:03:22.413

这不是 utf8 字符串。UTF8 是字符编码，而 UUID 甚至完全适合 7 位编码。`base_convert()`将不起作用，因为 UUID 不是数字（至少由于`-`）。不，将其缩短为 4 个字母不会让它变得更好。假设您使用 0-9 并且 az 仅给出 36!4 个组合，因此很可能发生碰撞（谁知道您如何生成该 ID 以及多久生成一次）。一般来说 - 如果你想要独一无二 -**让它**独一无二（比如将已经生成的 ID 存储在数据库中，这样你就知道何时发生冲突）。现在您只是希望并尝试交叉手指。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T16:19:38.223

来自卡桑德拉维基：

```
[...] UUIDs are represented by a 32 digit hexadecimal number in the form of xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx 
```

正如我在您的示例 UUID 中看到的那样，有一些荒谬的字符，例如`r`,和. 我认为这是由错误引起的，并将尝试回答您的问题：`v``h``q`

如果你想使用`base_convert`，首先你应该省略连字符。

`base_convert()`函数签名如下：

```
string base_convert ( string $number , int $frombase , int $tobase ) 
```

请注意，`frombase`您的案例中的参数应该是 16 而不是 5，这是因为 UUID 是 32 位十六进制数字。

最后，您可以按原样使用的最大数量`tobase`（`36`根据[手册](http://php.net/manual/en/function.base-convert.php)）。

所以你能做的最好的事情是：

```
base_convert($yourNumber, 16, 36); 
```

并且转换后的数字长度将超过 4-6 个字符。所以不可能缩小 UUID 并通过使用`base_convert()`.

从技术上讲，如果您将 UUID 假定为十六进制数字并将其转换为基数 128，您将得到 4 个字母长度的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T16:18:06.870

您是否查看过 PHP 中内置的 uniqid() 函数？我相信它默认返回一个 14 个字符的字符串，并让您能够输入自定义前缀以添加额外的唯一性。

您可以在此处找到有关 uniqid() 的更多信息：http: [//php.net/manual/en/function.uniqid.php](http://php.net/manual/en/function.uniqid.php)

# google-app-engine - 如何从应用引擎中的数据存储区重新加载字节码

> ID：13542819
> 
> 赞同：2
> 
> 时间：2012-11-24T15:55:50.910
> 
> 标签：google-app-engine, import, python-2.7, hook, jinja2

我创建了一个导入钩子（基于[PEP 302](http://www.python.org/dev/peps/pep-0302/)），以从数据库中动态加载 python 字节码（编译后的 python 代码）。

```
import dyn_imports.test   #@UnresolvedImport 
```

这很好用，但是如果我更改模块并重新加载模块，模块会重新加载，但我看不到更改。

这就是我创建字节码的方式：

```
code_object = compile(db.Text(dyn.py_source).encode(), dyn.name.encode(), 'exec')
key_name = 'dyn_imports.' + name
dynmod = models.Dynmods(key_name = key_name, name = key_name, bytecode = db.Blob(marshal.dumps(code_object)))
dynmod.put()
reload(sys.modules[key_name])             # reload the updated code 
```

reload() 执行导入钩子的 load_module 部分。
这是导入钩子类中 load_module 函数的简化版本：

```
def load_module(self, mod_name):
    mod = imp.new_module(mod_name)
    mod.__loader__ = self
    dynmod = models.Dynmods.get_by_key_name(mod_name)    # load from DB
    mod.__file__ = mod_name
    exec marshal.loads(db.Blob(dynmod.bytecode)) in mod.__dict__
    sys.modules[mod_name] = mod
    return mod 
```

当我关闭实例时，它工作正常。

**更新：**我还使用 py 源代码而不是字节码测试了导入加载器。这也不起作用。我已经在开发服务器上完成了大部分测试。

我之前创建了一个 Jinja2[模块加载器](https://stackoverflow.com/questions/13485294/compiled-templates-with-macros-do-not-work-on-app-engine)，它从数据存储区加载 Jinja 编译的模板（= py 源）。当我重新创建 Jinja 环境并从 sys.modules 中删除模块（已编译的模板）时，会重新加载新模块，而无需重新启动实例。那么我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T07:01:04.617

我找到了解决方案。除了重新加载更改的模块外，我还必须重新加载所有使用（导入）此模块的模块。我做了一些测试，效果很好。正确的顺序也很重要。所以现在我必须弄清楚，如何创建一个导入依赖图并使用它来重新加载模块。

但这是一个新问题。

当模块导入动态模块时，我会创建一个依赖项列表。使用这个列表，我可以重新加载依赖模块。我还必须标记我的 GAE appid 的其他实例。这些其他实例必须重新加载标记的动态模块（如果使用）并重新加载该其他实例中动态模块的依赖模块。

为了为每个实例创建唯一的实例 ID，我添加了类变量：

```
instance = datetime.datetime.utcnow() 
```

到导入钩子类。setter 实例使用 Memcache 来标记其他实例。此标志包含每个重新加载的动态模块：标志设置器实例和动态模块的重新加载日期时间戳。其他（标志获取器）实例可以检查是否必须重新加载动态模块。

# c++ - C++ 中的全局类

> ID：13542821
> 
> 赞同：2
> 
> 时间：2012-11-24T15:56:04.390
> 
> 标签：c++

我试图创建一个全局类，以便我可以在任何地方访问它，但它不起作用，我收到错误：

```
a storage class can only be specified for objects and functions 
```

有谁知道我要去哪里错了？

这是我的 h 文件：

```
extern class Payments : public QObject
{
Q_OBJECT
public:
    Payments(QObject *parent = 0);
    virtual ~Payments();
    void purchase(const QString &id, const QString &sku, const QString &name, const QString &metadata);
    void getExisting(bool refresh);
    void getPrice(const QString &id, const QString &sku);

public slots:
    void purchaseResponse();
    void existingPurchasesResponse();
    void priceResponse();

signals:
    void purchaseResponseSuccess(const QString &receiptString);
    void existingPurchasesResponseSuccess(const QString &receiptsString);
    void priceResponseSuccess(const QString &price);
    void infoResponseError(int errorCode, const QString &errorText);

private:
    bb::platform::PaymentManager *paymentManager;

}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T15:58:41.223

storage-class 关键字`extern`会导致问题。您不能为类定义指定它。而且您无论如何都不需要它：您的类定义可以从任何地方访问（只要您`#include`在其中定义它的文件）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-24T15:58:49.040

你不需要`extern`，在 C++ 中将类声明为 extern 甚至是不合法的。只要您不混淆特定于编译器的可见性标志和多个共享对象（即[GCC 可见性](http://gcc.gnu.org/wiki/Visibility)）并且不创建嵌套、受保护或私有类，就可以从其他任何地方访问任何类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T15:59:39.947

`C++`允许使用`extern`only 对象或函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-24T16:04:48.767

对于类来说，“全局”的概念并没有多大意义：类在任何声明它们的地方都被声明，仅此而已。因此，定义类时不允许存储分类：您需要删除`extern`.

要使类定义普遍可用，您需要在要访问该类的每个翻译单元中包含其定义。这样做的方法是将其放入头文件中，并在您需要该类时包含该文件：

```
#ifndef INCLUDED_PAYMENTS
#define INCLUDED_PAYMENTS

// headers needed to define Payments

class Payments : public QObject
{
    ...
};

#endif INCLUDED_PAYMENTS 
```

为避免命名冲突，您应该考虑在命名空间内声明您的类：C++ 程序中的类定义必须是唯一的。也就是说，如果另一个不包含上述标头的文件也在`Payments`全局命名空间中定义了一个类，但在某些方面有所不同，则这些定义将相互冲突。但是，编译器不需要检测不同的用途，这可能会导致难以诊断问题。

# android - 在发布应用程序时删除 AdMob 的测试设备 ID 是否是个好主意？

> ID：13542825
> 
> 赞同：4
> 
> 时间：2012-11-24T15:56:19.847
> 
> 标签：android, admob

我正准备在 Play 商店中启动一个应用程序，在尝试了 AdMob（在测试模式下使用我的设备 ID）之后，我现在想知道是否应该删除测试设备 ID，只留下 TEST_EMULATOR。

你怎么看，有必要吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T16:04:39.733

是的，您应该在发布之前删除测试模式：

```
 AdView adView = (AdView) findViewById(R.id.ad);
    AdRequest adRequest = new AdRequest();
    adView.loadAd(adRequest); 
```

在 onDestroy() 中：`adView.destroy();`

在布局中：

```
<com.google.ads.AdView
    android:id="@+id/ad"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    ads:adSize="BANNER"
    ads:adUnitId="@string/admob_publisher_id"
    ads:loadAdOnCreate="true" >
</com.google.ads.AdView> 
```

在 AdMob 应用设置中选择此项： **禁用所有请求的测试模式**

# mysql - INSERT IGNORE INTO SELECT LAST_INSERT_ID()

> ID：13542830
> 
> 赞同：1
> 
> 时间：2012-11-24T15:56:46.487
> 
> 标签：mysql

我有下面的代码。事情是 SELECT LAST_INSERT_ID() 这总是返回最后插入的行。如果在获取最后一行之前实际插入了一行，我可以使用 INSERT IGNORE 进行检查，还是我简单地再次执行一个选择语句，即

```
SET _inserted_geolocation_id  =(SELECT id FROM geolocation where latitude= _geolocation_latitude AND longitude = _geolocation_longitude
    AND zoom = _geolocation_zoom AND yaw = _geolocation_yaw AND pitch =_geolocation_pitch);

BEGIN

DECLARE _inserted_geolocation_id int;

INSERT IGNORE INTO geolocation (latitude, longitude, zoom, yaw, pitch) 
VALUES (_geolocation_latitude, _geolocation_longitude, _geolocation_zoom, _geolocation_yaw, _geolocation_pitch);

/*SET _inserted_geolocation_id  = (SELECT LAST_INSERT_ID());*/
SET _inserted_geolocation_id  =(SELECT id FROM geolocation where latitude= _geolocation_latitude AND longitude = _geolocation_longitude
    AND zoom = _geolocation_zoom AND yaw = _geolocation_yaw AND pitch =_geolocation_pitch);

SELECT _inserted_geolocation_id;
END 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T17:08:18.343

`LAST_INSERT_ID()`如果没有插入任何行，则返回 0 `INSERT IGNORE`，请参阅[文档](http://dev.mysql.com/doc/refman/5.1/en/information-functions.html#function_last-insert-id)：

> 如果您使用 INSERT IGNORE 并且该行被忽略，则 AUTO_INCREMENT 计数器不会增加并且 LAST_INSERT_ID() 返回 0，这反映了没有插入任何行。

# bash - Bash中单方括号和双方括号的区别

> ID：13542832
> 
> 赞同：201
> 
> 时间：2012-11-24T15:56:58.103
> 
> 标签：bash, if-statement

我正在阅读 bash 示例，`if`但有些示例是用单方括号编写的：

```
if [ -f $param ]
then
  #...
fi 
```

其他带双方括号的：

```
if [[ $? -ne 0 ]]
then
    start looking for errors in yourlog
fi 
```

有什么不同？

* * *

## 回答 #1

> 赞同：235
> 
> 时间：2012-11-24T15:59:25.173

Single`[]`是符合 posix shell 的条件测试。

Double`[[]]`是标准的扩展，`[]`并且受到 bash 和其他 shell（例如 zsh、ksh）的支持。它们支持额外的操作（以及标准的 posix 操作）。例如：`||`而不是`-o`和正则表达式匹配`=~`。更完整的差异列表可以在[bash 手册的条件结构部分](http://www.gnu.org/software/bash/manual/bashref.html#Conditional-Constructs)中找到。

`[]`每当您希望脚本可跨 shell 移植时使用。`[[]]`如果您想要不支持`[]`且不需要可移植的条件表达式，请使用此选项。

* * *

## 回答 #2

> 赞同：117
> 
> 时间：2015-07-12T10:21:22.610

**行为差异**

在 Bash 4.3.11 中测试：

*   POSIX 与 Bash 扩展：

    *   `[` [是 POSIX](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/test.html)
    *   `[[` 是一个受 Korn shell 启发[的 Bash 扩展](https://www.gnu.org/software/bash/manual/html_node/Conditional-Constructs.html#index-_005b_005b)
*   常规命令与魔法

    *   `[`只是一个带有奇怪名称的常规命令。

        `]`只是 的最后一个参数`[`。

    Ubuntu 16.04 实际上有一个`/usr/bin/[`由[coreutils](https://www.gnu.org/software/coreutils/manual/html_node/test-invocation.html#test-invocation)提供的可执行文件，但 bash 内置版本优先。

    Bash 解析命令的方式没有任何改变。

    特别是，`<`是重定向，`&&`并`||`连接多个命令，`( )`生成子shell，除非转义`\`，并且单词扩展照常发生。

    *   `[[ X ]]`是一个`X`可以神奇地解析的单一结构。`<`, `&&`,`||`和`()`被特殊对待，分词规则不同。

        还有更多的区别，如`=`和`=~`。

    在 Bashese：`[`是一个内置命令，`[[`是一个关键字：[https ://askubuntu.com/questions/445749/whats-the-difference-between-shell-builtin-and-shell-keyword](https://askubuntu.com/questions/445749/whats-the-difference-between-shell-builtin-and-shell-keyword)

*   `<`

    *   `[[ a < b ]]`: 字典比较
    *   `[ a \< b ]`: 同上。`\`required 或者像任何其他命令一样进行重定向。Bash 扩展。
    *   `expr x"$x" \< x"$y" > /dev/null`或`[ "$(expr x"$x" \< x"$y")" = 1 ]`：POSIX 等价物，请参阅：[How to test strings for lexicographic less than or equal in Bash?](https://stackoverflow.com/questions/21294867/how-to-test-strings-for-lexicographic-less-than-or-equal-in-bash/52707989#52707989)
*   `&&`和`||`

    *   `[[ a = a && b = b ]]`: 真实的，合乎逻辑*的*
    *   `[ a = a && b = b ]`: 语法错误，`&&`解析为 AND 命令分隔符`cmd1 && cmd2`
    *   `[ a = a ] && [ b = b ]`: POSIX 可靠等价物
    *   `[ a = a -a b = b ]``a`: 几乎等价，但被 POSIX 弃用，因为它是疯狂的，并且对于or `b`like `!`or的某些值会失败，或者`(`将被解释为逻辑操作
*   `(`

    *   `[[ (a = a || a = b) && a = b ]]`： 错误的。没有`( )`, 会是真的，因为`[[ && ]]`它的优先级高于`[[ || ]]`
    *   `[ ( a = a ) ]`: 语法错误，`()`被解释为子shell
    *   `[ \( a = a -o a = b \) -a a = b ]`: 等效，但是`()`, `-a`, 和`-o`被 POSIX 弃用。没有`\( \)`会是真的，因为`-a`优先级高于`-o`
    *   `{ [ a = a ] || [ a = b ]; } && [ a = b ]`不推荐使用的 POSIX 等效项。然而，在这种特殊情况下，我们可以写成：`[ a = a ] || [ a = b ] && [ a = b ]`因为`||`和`&&`shell 运算符具有相同的优先级，不像`[[ || ]]`and`[[ && ]]`和`-o`, `-a`and`[`
*   扩展时的分词和文件名生成 (split+glob)

    *   `x='a b'; [[ $x = 'a b' ]]`：是的，不需要引号
    *   `x='a b'; [ $x = 'a b' ]`: 语法错误，展开为`[ a b = 'a b' ]`
    *   `x='*'; [ $x = 'a b' ]`: 如果当前目录中有多个文件，则语法错误。
    *   `x='a b'; [ "$x" = 'a b' ]`: POSIX 等价物
*   `=`

    *   `[[ ab = a? ]]`：是的，因为它会进行[模式匹配](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/V3_chap02.html#tag_18_13)（`* ? [`很神奇）。不 glob 扩展到当前目录中的文件。
    *   `[ ab = a? ]`: `a?`glob 扩展。所以可能是真或假，具体取决于当前目录中的文件。
    *   `[ ab = a\? ]`: false，不是全局扩展
    *   `=`and在and`==`中是相同的，但是是一个 Bash 扩展。`[``[[``==`
    *   `case ab in (a?) echo match; esac`: POSIX 等价物
    *   `[[ ab =~ 'ab?' ]]`: false，`''`在 Bash 3.2 及更高版本中失去魔力，并且未启用对 bash 3.1 的兼容性（如 with `BASH_COMPAT=3.1`）
    *   `[[ ab? =~ 'ab?' ]]`： 真的
*   `=~`

    *   `[[ ab =~ ab? ]]`: true，POSIX[扩展正则表达式](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap09.html#tag_09_04)匹配，`?`不全局扩展
    *   `[ a =~ a ]`: 语法错误。没有 bash 等价物。
    *   `printf 'ab\n' | grep -Eq 'ab?'`: POSIX 等效项（仅单行数据）
    *   `awk 'BEGIN{exit !(ARGV[1] ~ ARGV[2])}' ab 'ab?'`: POSIX 等价物。

**建议：一直使用`[]`**

`[[ ]]`我见过的每个构造都有 POSIX 等价物。

如果你使用`[[ ]]`你：

*   失去便携性
*   迫使读者了解另一个 bash 扩展的复杂性。`[`只是一个名称怪异的常规命令，不涉及特殊语义。

感谢[Stéphane Chazelas](https://unix.stackexchange.com/users/22565/st%C3%A9phane-chazelas)的重要更正和补充。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-11-24T15:59:11.710

`=`在用于条件测试的单括号内（即 [ ... ]），所有 shell 都支持诸如 single 的一些运算符，而`==`一些较旧的 shell 不支持使用运算符。

在条件测试的双括号内（即 [[ ... ]]），在旧 shell 或新 shell 中使用`=`or没有区别。`==`

编辑：我还应该注意：在 bash 中，如果可能，请始终使用双括号 [[ ... ]]，因为它比单括号更安全。我将通过以下示例说明原因：

```
if [ $var == "hello" ]; then 
```

如果 $var 恰好为 null / 空，​​那么这就是脚本所看到的：

```
if [ == "hello" ]; then 
```

这会破坏你的脚本。解决方案是使用双括号，或者始终记住在变量周围加上引号 ( `"$var"`)。双括号是更好的防御性编码实践。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2012-11-24T16:17:18.757

`[[`是一个与命令类似（但比`[`命令更强大）的 bash 关键字。

看

[http://mywiki.wooledge.org/BashFAQ/031](http://mywiki.wooledge.org/BashFAQ/031)和[http://mywiki.wooledge.org/BashGuide/TestsAndConditionals](http://mywiki.wooledge.org/BashGuide/TestsAndConditionals)

除非您正在编写 POSIX sh，否则我们建议使用`[[`.

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2021-06-26T22:08:04.820

*   `[`类似于`builtin`printf。Bash 语法期望在与命令相同的位置看到它。除了内置`]`函数期望它之外，这对 Bash 没有任何意义。`[`（man bash / SHELL BUILTIN 命令）
*   `[[`是一个`keyword`如果。Bash 语法开始也期望它在与命令相同的位置，但不是执行它，而是进入条件上下文。并且`]]`也是结束此上下文的关键字。（man bash / SHELL GRAMMAR / 复合命令）

按顺序，bash 尝试解析：语法关键字 > 用户别名 > 内置函数 > 用户函数 > $PATH 中的命令

```
type [  # [ is a shell builtin
type [[  # [[ is a shell keyword
type ]  # bash: type: ]: not found
type ]]  # ]] is a shell keyword
compgen -k  # Keywords: if then else ...
compgen -b  # Builtins: . : [ alias bg bind ...
which [  # /usr/bin/[ 
```

*   `[`较慢 <= 我猜它执行更多的解析代码。但我知道它调用了相同数量的系统调用（经过测试
*   `[[`即使对于人类来说，它在语法上也更容易解析，因为它开始了一个上下文。对于算术条件，考虑使用`((`.

```
time for i in {1..1000000}; do [ 'a' = 'b' ] ; done  # 1.990s
time for i in {1..1000000}; do [[ 'a' == 'b' ]] ; done  # 1.371s

time for i in {1..1000000}; do if [ 'a' = 'a' ]; then if [ 'a' = 'b' ];then :; fi; fi ; done  # 3.512s
time for i in {1..1000000}; do if [[ 'a' == 'a' ]]; then if [[ 'a' == 'b' ]];then :; fi; fi; done  # 2.143s

strace -cf  bash -c "for i in {1..100000}; do if [ 'a' = 'a' ]; then if [ 'a' = 'b' ];then :; fi; fi  ; done;"  # 399
strace -cf  bash -c "for i in {1..100000}; do if [[ 'a' == 'a' ]]; then if [[ 'a' == 'b' ]];then :; fi; fi  ; done;"  # 399 
```

我建议使用`[[`：如果您不明确关心 posix 兼容性，则意味着您不是，所以不要关心获得“更多”兼容​​的脚本不是。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-24T15:58:48.293

您可以使用方括号进行轻度正则表达式匹配，例如：

`if [[ $1 =~ "foo.*bar" ]] ; then`

（只要您使用的 bash 版本支持此语法）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-10-28T23:43:40.947

[Bash手册](https://www.gnu.org/software/bash/manual/bash.html#Bourne-Shell-Builtins)说：

> 当与 [[ 一起使用时，'<' 和 '>' 运算符使用当前语言环境按字典顺序排序。测试命令使用 ASCII 排序。

（测试命令等同于 [ ] ）

# android - 尝试发送彩信时“抱歉，您无法将此图片添加到您的信息中”

> ID：13542834
> 
> 赞同：0
> 
> 时间：2012-11-24T15:57:31.173
> 
> 标签：android, save, mms

我尝试发送带有已保存到 SD 卡的图片的彩信，并且在打开消息服务时，我收到“抱歉，您无法将此图片添加到您的消息中”的声明，并且它没有附加文件。我尝试将文件解析为 uri，尝试将文件直接传递到 MMS 意图中，以及其他一些事情。我不确定我缺少什么，我很确定它正在保存它，因为我可以在文件查看器中看到该文件。我是否必须通过扫描将图像提供给媒体商店（最好不要将其放入图片库），是否必须先打开文件才能将其传入？关于我应该做什么的一点方向将不胜感激。

我的档案

```
private static final String FILENAME = "data.pic";
File dataFile = new File(Environment.getExternalStorageDirectory(), FILENAME); 
```

保存图像

```
// Selected image id
int position = data.getExtras().getInt("id");
ImageAdapter imageAdapter = new ImageAdapter(this);
ChosenImageView.setImageResource(imageAdapter.mThumbIds[position]);
Resources res = getResources();
Drawable drawable = res.getDrawable(imageAdapter.mThumbIds[position]);
Bitmap bitmap = ((BitmapDrawable)drawable).getBitmap();
ByteArrayOutputStream stream = new ByteArrayOutputStream();
bitmap.compress(Bitmap.CompressFormat.PNG, 100, stream);
byte[] bitmapdata = stream.toByteArray();
try {
    File file = new File(dataFile, FILENAME);
    file.mkdirs();
    FileOutputStream fos = new FileOutputStream(file);
    fos.write(bitmapdata);
    fos.close();
 }catch (FileNotFoundException e) {
 e.printStackTrace();
 } catch (IOException e) {
 e.printStackTrace();
 } 
```

}

我想附上它的地方和我目前的尝试

```
// Create a new MMS intent
Intent mmsIntent = new Intent(Intent.ACTION_SEND);
mmsIntent.putExtra("sms_body", "I sent a pic to you!");
mmsIntent.putExtra("address", txt1);
mmsIntent.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(new File(FILENAME)));
mmsIntent.setType("image/png");
startActivity(mmsIntent);
}}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T16:07:39.023

**啊对不起，你不能。**

**问题：**

`new File(FILENAME)`是不存在的。

看看这三个不同的文件代码行..

```
1\. File dataFile = new File(Environment.getExternalStorageDirectory(), FILENAME);

2\. File file = new File(dataFile, FILENAME);

3\. Uri.fromFile(new File(FILENAME)) 
```

都有不同的参考。

**解决方案：**

更改您的代码

```
try {
     File file = new File(dataFile, FILENAME); 
     file.mkdirs(); // You are making a directory here
     FileOutputStream fos = new FileOutputStream(file); // set Outputstream for directory which is wrong
     fos.write(bitmapdata);
     fos.close();
    }catch (FileNotFoundException e) {
     e.printStackTrace();
    } catch (IOException e) {
      e.printStackTrace();
    } 
```

和

```
try {
      FileOutputStream fos = new FileOutputStream(dataFile);
      fos.write(bitmapdata);
      fos.close();
     }catch (FileNotFoundException e) {
      e.printStackTrace();
     } catch (IOException e) {
      e.printStackTrace();
    } 
```

以及发送彩信的主要代码行，

```
if(dataFile.exists())
{
 Intent mmsIntent = new Intent(Intent.ACTION_SEND);
     mmsIntent.putExtra("sms_body", "I sent a pic to you!");
     mmsIntent.putExtra("address", txt1);
     mmsIntent.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(dataFile));
     mmsIntent.setType("image/png");
     startActivity(mmsIntent);
} 
```

只需为您的所有代码使用一个`dataFile File`参考。

# c# - Visual Studio 2010 c#表单使用geckoWebBrowser将数据发布到php页面？

> ID：13542835
> 
> 赞同：1
> 
> 时间：2012-11-24T15:57:37.753
> 
> 标签：c#, php, visual-studio-2010, geckofx

我想知道如何使用 geckoWebBrowser 将数据从 c# 表单发布到 php？我已经在表单上使用 IE 浏览器完成了

```
 public Form1()
    {
        InitializeComponent();
        String postdata = "data=somedata";

        System.Text.Encoding a = System.Text.Encoding.UTF8;

        byte[] byte1 = a.GetBytes(postdata);

        webBrowser1.Navigate("somepage.php", "", byte1, "Content-Type: application/x-www-form-urlencoded");
    } 
```

但是如何使用 geckoWebBrowser1.Navigate 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T16:26:51.823

该方法[`GeckoWebBrowser.Navigate()`](http://code.google.com/p/geckofx/source/browse/trunk/Skybound.Gecko/GeckoWebBrowser.cs?r=2)将其参数传递给一个[`nsIWebNavigation`](https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIWebNavigation)实例，该实例是[`XPCOM`](https://developer.mozilla.org/en/docs/XPCOM)运行浏览器实例的接口，在这种情况下使用[`XULRunner 1.8`](https://developer.mozilla.org/en/docs/XULRunner_1.8.0.1_Release_Notes)（它很旧）。

不幸的是， 的`Navigate()`方法`GeckoWebBrowser`没有为`postData`;提供重载。它只是通过`Intptr.Zero`了那个论点。

我无法测试它，但是如果您在 中创建这样的新方法`GeckoWebBrowser.cs`，您可以使用包含发布数据的字符串来调用它：

```
public bool Navigate(string url, string postData, GeckoLoadFlags loadFlags)
{
    if (url == null)
    {
        throw new ArgumentNullException("url");
    }

    if (!IsHandleCreated)
    {
            throw new InvalidOperationException("Cannot call Navigate() before the window handle is created.");
    }

    if (IsBusy)
    {
        this.Stop();
    }

    return WebNav.LoadURI(url, (uint)loadFlags, null, GetStreamFromString(postData), IntPtr.Zero) == 0;
}

public static Stream??? CreateStreamFromString(string input)
{
    return new StreamReader???(input);
} 
```

请注意，该`LoadURI`方法接受一个[`nsIInputStream`](https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIInputStream)我不知道的参数。尝试找到参数类型以及如何实例化它，并修复`CreateStreamFromString()`方法以返回和实例化正确的类型。

另请查看参数的[文档](https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIWebNavigation#loadURI%28%29)`postData`：

> 如果 URI 对应于 HTTP 请求，则此流直接附加到 HTTP 请求标头。它可能带有额外的 HTTP 标头作为前缀。此流必须包含将任何 HTTP 标头与 HTTP 请求正文分开的 \r\n 序列。此参数可能为空。

* * *

但是，如果仅用于将数据发布到某个 URL，那么您可能只想使用一个[`WebClient`](http://msdn.microsoft.com/en-us/library/system.net.webclient%28v=vs.100%29.aspx)或（仅限 .NET 4.5）类。[`HttpClient`](http://msdn.microsoft.com/en-us/library/system.net.http.httpclient.aspx)

# bash - 如何在 Linux 终端的子文件夹中解压缩不同的压缩格式

> ID：13542842
> 
> 赞同：0
> 
> 时间：2012-11-24T15:58:23.210
> 
> 标签：bash, unzip

[我在此线程](https://stackoverflow.com/questions/11804438/unix-unzip-how-to-batch-unzip-zip-files-in-a-folder-and-save-in-subfolders)中看到了以下代码，用于将子文件夹中的所有 .zip 格式解压缩到相应的子文件夹中。我对这段代码的问题如下。

(1) 这是批处理作业的 bash 脚本吗？如果是这样，我可以将其作为**sudo bash *filename.bat***运行。

(2)如何在代码中指定父文件夹目录。父目录下包含所有子文件夹，这些子文件夹又包含压缩（压缩）文件。

(3)如何修改代码以包含*.rar*和*.7z等其他压缩格式*

```
 for file in *.zip; do
       dir=$(basename "$file" .zip) # remove the .zip from the filename
       mkdir "$dir"
       cd "$dir" && unzip ../"$file" && rm ../"$file" # unzip and remove file if successful
       cd ..
  done 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T15:38:36.253

1.  是的，该代码片段看起来像一个`bash`脚本。如果它被命名`filename.bat`，你应该可以使用`sudo bash filename.bat`它来运行它。

2.  该代码假定当前目录是包含所有压缩文件的“父文件夹”。`.zip`您需要修改代码以处理包含文件的子目录。有很多方法可以做到这一点。

3.  鉴于需要处理文件以外的格式`.zip`，您可能会修改代码以使用作为参数提供的文件名作为要解压缩的文件。

此代码可能有效：

```
for file in "$@"
do
    dir=$(dirname "$file")
    extn=${base##*.}
    base=$(basename "$file" .$extn)
    mkdir -p "$dir/$base"
    (
    cd "$dir/$base"
    case $extn in
    zip)   unzip "../$base.$extn";;
    esac
    )
done 
```

现在，理论上，您可以扩展`case`语句中的扩展名列表以包含其他文件格式。但是，您应该知道，并非所有压缩器都打包多个文件。通常，您具有复合格式，例如`.tar.gz`or`.tar.xz`或`.tar.bz2`。`.tar`对应的压缩器（或解压器），只是简单地解压文件（丢失压缩后缀），而不需要从文件里面提取数据。但是，如果`rar`和`7z`确实表现得像`zip`，那么您可以使用：

```
 case $extn in
    (zip)   unzip "../$base.$extn";;
    (rar)   unrar "../$base.$extn";;  # Or whatever the command is
    (7z)    un7z  "../$base.$extn";;  # Or whatever the command is
    (*)     echo "$0: unrecognized extension $extn on $file" >&2;;
    esac 
```

如果您认为合适，您还可以恢复代码以删除文件的压缩形式。

# python - 找到给定点的最小面积矩形以计算长轴和短轴长度的算法

> ID：13542855
> 
> 赞同：25
> 
> 时间：2012-11-24T15:59:37.123
> 
> 标签：python, geometry

我有一组点（地理坐标值中的黑点）来自多边形（红色）的凸包（蓝色）。见图：![在此处输入图像描述](../Images/02e72a48b682d40c24e33fbd9d6693ab.png)

```
[(560023.44957588764,6362057.3904932579), 
 (560023.44957588764,6362060.3904932579), 
 (560024.44957588764,6362063.3904932579), 
 (560026.94957588764,6362068.3904932579), 
 (560028.44957588764,6362069.8904932579), 
 (560034.94957588764,6362071.8904932579), 
 (560036.44957588764,6362071.8904932579), 
 (560037.44957588764,6362070.3904932579), 
 (560037.44957588764,6362064.8904932579), 
 (560036.44957588764,6362063.3904932579), 
 (560034.94957588764,6362061.3904932579), 
 (560026.94957588764,6362057.8904932579), 
 (560025.44957588764,6362057.3904932579), 
 (560023.44957588764,6362057.3904932579)] 
```

[我需要按照这些步骤（在 R-project 和Java](http://opencarto.svn.sourceforge.net/viewvc/opencarto/trunk/server/src/main/java/org/opencarto/server/algo/SmallestSurroundingRectangle.java?revision=924&view=markup)中编写这篇[文章](https://gis.stackexchange.com/questions/22895/how-to-find-the-minimum-area-rectangle-for-given-points)）或按照[这个示例过程](http://cgm.cs.mcgill.ca/~orm/maer.html)计算长轴和短轴长度

![在此处输入图像描述](../Images/a0f0e6bc6b89218fd9f183f4884ec679.png)

1.  计算云的凸包。
2.  对于凸包的每个边缘：2a。计算边缘方向，2b。使用此方向旋转凸包，以便轻松计算具有旋转凸包的 x/y 的 min/max 的边界矩形区域，2c。存储与找到的最小区域相对应的方向，
3.  返回与找到的最小区域对应的矩形。

之后我们知道**角度 Theta**（表示边界矩形相对于图像 y 轴的方向）。求所有边界点上**a**和**b**的最小值和最大值：

*   a(xi,yi) = xi*cos Theta + yi sin Theta
*   b(xi,yi) = xi*sin Theta + yi cos Theta

值 (a_max - a_min) 和 (b_max - b_min) 分别定义了方向 Theta 的边界矩形的长度和宽度。

![在此处输入图像描述](../Images/0e29b40037326f332f8d1324b0f81cde.png)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2015-11-09T21:57:19.940

I just implemented this myself, so I figured I'd drop my version here for others to view:

```
import numpy as np
from scipy.spatial import ConvexHull

def minimum_bounding_rectangle(points):
    """
    Find the smallest bounding rectangle for a set of points.
    Returns a set of points representing the corners of the bounding box.

    :param points: an nx2 matrix of coordinates
    :rval: an nx2 matrix of coordinates
    """
    from scipy.ndimage.interpolation import rotate
    pi2 = np.pi/2.

    # get the convex hull for the points
    hull_points = points[ConvexHull(points).vertices]

    # calculate edge angles
    edges = np.zeros((len(hull_points)-1, 2))
    edges = hull_points[1:] - hull_points[:-1]

    angles = np.zeros((len(edges)))
    angles = np.arctan2(edges[:, 1], edges[:, 0])

    angles = np.abs(np.mod(angles, pi2))
    angles = np.unique(angles)

    # find rotation matrices
    # XXX both work
    rotations = np.vstack([
        np.cos(angles),
        np.cos(angles-pi2),
        np.cos(angles+pi2),
        np.cos(angles)]).T
#     rotations = np.vstack([
#         np.cos(angles),
#         -np.sin(angles),
#         np.sin(angles),
#         np.cos(angles)]).T
    rotations = rotations.reshape((-1, 2, 2))

    # apply rotations to the hull
    rot_points = np.dot(rotations, hull_points.T)

    # find the bounding points
    min_x = np.nanmin(rot_points[:, 0], axis=1)
    max_x = np.nanmax(rot_points[:, 0], axis=1)
    min_y = np.nanmin(rot_points[:, 1], axis=1)
    max_y = np.nanmax(rot_points[:, 1], axis=1)

    # find the box with the best area
    areas = (max_x - min_x) * (max_y - min_y)
    best_idx = np.argmin(areas)

    # return the best box
    x1 = max_x[best_idx]
    x2 = min_x[best_idx]
    y1 = max_y[best_idx]
    y2 = min_y[best_idx]
    r = rotations[best_idx]

    rval = np.zeros((4, 2))
    rval[0] = np.dot([x1, y2], r)
    rval[1] = np.dot([x2, y2], r)
    rval[2] = np.dot([x2, y1], r)
    rval[3] = np.dot([x1, y1], r)

    return rval 
```

Here are four different examples of it in action. For each example, I generated 4 random points and found the bounding box.

[![examples](../Images/be753b1f2c241a38099eba994a1f0650.png)](https://i.stack.imgur.com/afWu5.png)

(edit by @heltonbiker) A simple code for plotting:

```
import matplotlib.pyplot as plt
for n in range(10):
    points = np.random.rand(4,2)
    plt.scatter(points[:,0], points[:,1])
    bbox = minimum_bounding_rectangle(points)
    plt.fill(bbox[:,0], bbox[:,1], alpha=0.2)
    plt.axis('equal')
    plt.show() 
```

(end edit)

It's relatively quick too for these samples on 4 points:

```
>>> %timeit minimum_bounding_rectangle(a)
1000 loops, best of 3: 245 µs per loop 
```

[Link to the same answer over on gis.stackexchange](https://gis.stackexchange.com/a/169633/48041) for my own reference.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-24T20:06:33.127

给定一组点的凸包中的 n 个点的顺时针排序列表，找到最小面积的封闭矩形是一个 O(n) 操作。（对于凸包查找，在 O(n log n) 时间内，请参阅[activestate.com 配方 66527](http://code.activestate.com/recipes/66527-finding-the-convex-hull-of-a-set-of-2d-points/)或在 tixxit.net 上查看非常紧凑的[Graham 扫描代码](http://tixxit.net/2010/03/graham-scan/)。）

下面的 python 程序使用类似于通常 O(n) 算法的技术来计算凸多边形的最大直径。也就是说，它维护三个索引（iL、iP、iR）到相对于给定基线的最左边、对面和最右边的点。每个索引最多前进 n 个点。接下来显示程序的示例输出（带有添加的标题）：

```
 i iL iP iR    Area
 0  6  8  0   203.000
 1  6  8  0   211.875
 2  6  8  0   205.800
 3  6 10  0   206.250
 4  7 12  0   190.362
 5  8  0  1   203.000
 6 10  0  4   201.385
 7  0  1  6   203.000
 8  0  3  6   205.827
 9  0  3  6   205.640
10  0  4  7   187.451
11  0  4  7   189.750
12  1  6  8   203.000 
```

例如，i=10 条目表示相对于从点 10 到 11 的基线，点 0 在最左边，点 4 相对，点 7 在最右边，产生的面积为 187.451 个单位。

请注意，代码用于`mostfar()`推进每个索引。告诉它要测试什么极端的`mx, my`参数；`mostfar()`例如， with `mx,my = -1,0`,`mostfar()`将尝试最大化 -rx （其中 rx 是一个点的旋转 x），从而找到最左边的点。请注意，当以不精确的算术完成时，可能应该使用 epsilon 余量`if mx*rx + my*ry >= best`：当船体有许多点时，舍入误差可能是一个问题，并导致该方法错误地不推进索引。

代码如下所示。船体数据取自上述问题，忽略了不相关的大偏移量和相同的小数位。

```
#!/usr/bin/python
import math

hull = [(23.45, 57.39), (23.45, 60.39), (24.45, 63.39),
        (26.95, 68.39), (28.45, 69.89), (34.95, 71.89),
        (36.45, 71.89), (37.45, 70.39), (37.45, 64.89),
        (36.45, 63.39), (34.95, 61.39), (26.95, 57.89),
        (25.45, 57.39), (23.45, 57.39)]

def mostfar(j, n, s, c, mx, my): # advance j to extreme point
    xn, yn = hull[j][0], hull[j][1]
    rx, ry = xn*c - yn*s, xn*s + yn*c
    best = mx*rx + my*ry
    while True:
        x, y = rx, ry
        xn, yn = hull[(j+1)%n][0], hull[(j+1)%n][1]
        rx, ry = xn*c - yn*s, xn*s + yn*c
        if mx*rx + my*ry >= best:
            j = (j+1)%n
            best = mx*rx + my*ry
        else:
            return (x, y, j)

n = len(hull)
iL = iR = iP = 1                # indexes left, right, opposite
pi = 4*math.atan(1)
for i in range(n-1):
    dx = hull[i+1][0] - hull[i][0]
    dy = hull[i+1][1] - hull[i][1]
    theta = pi-math.atan2(dy, dx)
    s, c = math.sin(theta), math.cos(theta)
    yC = hull[i][0]*s + hull[i][1]*c

    xP, yP, iP = mostfar(iP, n, s, c, 0, 1)
    if i==0: iR = iP
    xR, yR, iR = mostfar(iR, n, s, c,  1, 0)
    xL, yL, iL = mostfar(iL, n, s, c, -1, 0)
    area = (yP-yC)*(xR-xL)

    print '    {:2d} {:2d} {:2d} {:2d} {:9.3f}'.format(i, iL, iP, iR, area) 
```

*注意：*要获取最小面积包围矩形的长度和宽度，请修改上面的代码，如下所示。这将产生一个输出线，如

```
Min rectangle:  187.451   18.037   10.393   10    0    4    7 
```

其中第二个和第三个数字表示矩形的长度和宽度，四个整数给出位于矩形边上的点的索引号。

```
# add after pi = ... line:
minRect = (1e33, 0, 0, 0, 0, 0, 0) # area, dx, dy, i, iL, iP, iR

# add after area = ... line:
    if area < minRect[0]:
        minRect = (area, xR-xL, yP-yC, i, iL, iP, iR)

# add after print ... line:
print 'Min rectangle:', minRect
# or instead of that print, add:
print 'Min rectangle: ',
for x in ['{:3d} '.format(x) if isinstance(x, int) else '{:7.3f} '.format(x) for x in minRect]:
    print x,
print 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-11-11T01:49:51.517

在 github 上已经有一个模块可以做到这一点。 [https://github.com/BebeSparkelSparkel/MinimumBoundingBox](https://github.com/BebeSparkelSparkel/MinimumBoundingBox)

您需要做的就是将点云插入其中。

```
from MinimumBoundingBox import minimum_bounding_box
points = ( (1,2), (5,4), (-1,-3) )
bounding_box = minimum_bounding_box(points)  # returns namedtuple 
```

您可以通过以下方式获得长轴和短轴长度：

```
minor = min(bounding_box.length_parallel, bounding_box.length_orthogonal)
major = max(bounding_box.length_parallel, bounding_box.length_orthogonal) 
```

它还返回面积、矩形中心、矩形角度和角点。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-05-13T06:42:26.707

OpenCV 有这个。看到这个：

[http://docs.opencv.org/trunk/dd/d49/tutorial_py_contour_features.html](http://docs.opencv.org/trunk/dd/d49/tutorial_py_contour_features.html)

7.b。旋转矩形

和

```
cv2.minAreaRect(cnt) 
```

您可以获得矩形的长度和宽度以及它的角度。如果你想画它，你也可以计算角。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-24T18:36:10.727

我找到[了计算凸包的方法](http://code.activestate.com/recipes/66527-finding-the-convex-hull-of-a-set-of-2d-points/)。

如果我们谈论的是“完整的解决方案”（一个功能来做所有的事情），我发现只有[`arcpy`](http://help.arcgis.com/en/arcgisdesktop/10.0/help/index.html#//000v00000001000000)哪个是[`ArcGIS`](http://www.esri.com/software/arcgis)程序的一部分。它提供了[`MinimumBoundingGeometry_management`](http://help.arcgis.com/en/arcgisdesktop/10.0/help/index.html#//00170000003q000000)看起来像您正在寻找的功能。但它不是开源的。不幸的是，缺乏 python 开源 GIS 库。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-02-01T00:03:17.390

**最初发布于 2013 年 2 月：**

上面的代码示例并不健壮。我用真实数据（许多点的凸包）对其进行了测试，它产生了接近正确的结果。然而，对于简单的 4 到 6 边多边形，它不起作用。

这是一个独立的解决方案，用 Python 编写： [https ://github.com/dbworth/minimum-area-bounding-rectangle/](https://github.com/dbworth/minimum-area-bounding-rectangle/)

使用 qhull (QuickHull) 算法的 2D 实现找到凸包。解决方案是计算多边形所有边的角度，然后仅对旋转的第一象限（90 度）唯一的角度进行操作。找到最小面积边界矩形后，输出所有数据，包括中心点和角点。提供了一个简单的测试程序。使用 Matlab 验证了答案。

请注意，此解决方案依赖于边界框将与输入多边形共享至少一条边的假设。这适合我的应用程序，但是我听说有一篇论文，作者展示了一些罕见的解决方案，但事实并非如此。如果这个结果很重要，你应该调查一下！

# c++ - 为什么是无限循环？

> ID：13542858
> 
> 赞同：5
> 
> 时间：2012-11-24T15:59:46.263
> 
> 标签：c++, char, infinite-loop, integer-overflow

我试图将 255 ascii 字符写入控制台，但我有一个无限循环

```
for(char i=0; i<256; i++) {
    cout << i << ' ';
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-24T16:00:48.493

因为`i`永远不可能大于或等于`256`。它会在它之前溢出。请记住，如果它是*unsigned*`char` ，则它的类型是其最大值，否则如果它是*signed*。`255`*`127`*

 **`char`是*unsigned*还是*signed*，是实现定义的。`char`但通常，根据我的经验，它是有符号的，这意味着通常可以达到的最大值是`127`.

所以`i`从 增加`0`到`127`，然后变成`-128`增加 到`127`，依此类推，如果它是有*符号*的。如果它是*unsigned*，那么它会从`0`to `255`，然后它会变成`0`（由于溢出），故事又开始了，一次又一次！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-24T16:01:14.177

因为的*所有*值`char`都小于 256。

为了进行比较，将`char` `i`转换为`int`，通常会产生介于 -128 和 127 之间的值（带符号的二进制补码 8 位`char`s），或者如果`char`是无符号 8 位类型，则介于 0 和 255（含）之间。

一旦达到 a 可以保持的最大值，如果是无符号的，`char`进一步的增量将导致回绕到 0 ，并导致增量产生的值 128的实现定义的转换，当它被存储回来时，通常是结果是 -128，当被签名时。`char``int``char``char`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-24T16:14:10.237

您应该在编译时（`-Wtautological-compare`针对此问题）发出警告。

在 C++ 中，每个整数类型都有一系列可能的值。这个范围是（通常）实现定义的，尽管在通用平台（x86）上经常有：

*   `signed char`在 [-128, +127] (+)
*   `short`在 [-2* *15, 2* *15-1]
*   `int`在 [-2* *31, 2* *31-1]

如果你试图增加一个有符号整数类型超过它的最大值，你就进入了**未定义行为**的领域。在常见的实现中，它会环绕（就像无符号类型一样），所以 127 + 1 变成 -128 （对于 a `char`）。

与 进行比较时`256`，首先将值 from`i`转换为 an `int`（`256`不带整数后缀的类型），然后执行比较。但是，由于`i`始终在 [-128, 127] (+) 范围内，因此严格低于`256`此条件，因此条件始终为真。

*(+) 是否`char`有符号是实现定义的，如果`char`是无符号的，那么它的范围更可能是 [0, 255]。*

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-24T18:13:26.037

尝试这个！

```
for(int i=0; i<256; i++)
 {
    cout << char(i) << " ";
 } 
```**

# ec2-ami - 如何在 EC2 上创建具有来自另一个实例的所有自定义项（库、文件夹）的实例

> ID：13542867
> 
> 赞同：2
> 
> 时间：2012-11-24T16:00:46.280
> 
> 标签：ec2-ami, ec2-api-tools

我是 EC2 的新手。我尝试这样做的方式是：1）从 instance1 创建快照；2）从快照创建卷；3) 将卷附加到 instance2

当我 ssh 到 instance2 时，它仍然是没有我的文件夹和自定义的基本实例。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-05T22:12:08.970

您需要从实例 1 中创建一个 AMI。[这里](https://robpickering.com/2010/07/create-a-full-backup-image-of-your-amazon-ec2-instance-2-129)是一个关于如何做的教程的链接。您还可以查看有关如何操作的亚马逊说明。他们通常完成了大约 80% 的工作，并包含您需要的大约 10% 的背景信息，但您可以按照他们的指示来完成。

# facebook - 将异步关键字添加到 Facebook 图形 api

> ID：13542871
> 
> 赞同：0
> 
> 时间：2012-11-24T16:01:05.317
> 
> 标签：facebook, asynchronous

以下给了我 8 秒的页面加载

```
 $temp_facebook_comments = file_get_contents("https://graph.facebook.com/comments/?ids=" . $comment_page);
$facebook_comments = json_decode($temp_facebook_comments);
$facebook_comments_array = array();
if(isset($facebook_comments->{$comment_page}->comments->data)) 
```

我正在寻找一种添加异步关键字以延迟 facebook 加载的方法。

# objective-c - 如何在 iOS 中实现部分透视效果？

> ID：13542875
> 
> 赞同：0
> 
> 时间：2012-11-24T16:01:16.017
> 
> 标签：objective-c, ios, cocoa-touch, draw, alphablending

基本上我想将图像放在 UIView 上，然后用半透明视图覆盖此图像以使图像模糊，最终将 UIButton 放在半透明视图上，现在我希望图像**仅在按钮的框架中清晰显示**。我怎样才能做到这一点？谢谢。

一张图抵得上一千字。

![在此处输入图像描述](../Images/1c242c776db222d1c6ce1809c20c87cf.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T16:46:12.083

部分透视效果通常是通过将图像视图放在前面以较低的 alpha 来实现的。所以我想象三层，背景，文本，然后是噪音/线条/着色。这让你非常接近。如果您需要模糊，我想您可以执行类似[How to implement a box or gaussian blur on iPhone](https://stackoverflow.com/questions/1140117/how-to-implement-a-box-or-gaussian-blur-on-iphone)之类的操作。或者，如果您渲染框和文本，光栅化，然后旋转，这可能会让您对图像进行足够的柔化，而您不必通过模糊算法。你必须做一些实验。

# android - API 身份/授权

> ID：13542877
> 
> 赞同：0
> 
> 时间：2012-11-24T16:01:21.930
> 
> 标签：android, iphone, security, node.js, oauth

我正在制作一个私有 API，其中客户端（应用程序）调用 API 提供者并检索或发送信息。我需要一种方法来授权或识别哪个应用程序正在执行操作，如果它可以访问它，同一个应用程序将在用户签入的不同位置使用，并且可以进行 API 调用从该位置而不是从另一个位置获取信息，但是我不确定是否通过使用 API 密钥或 OAUTH 之类的一些身份验证方法来允许这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T16:12:30.063

一般来说，您无法 100% 确定您的客户是接收数据的人。黑客总能找到一种方法来欺骗你的程序。

尽管如此，还是有几种方法可以做某事。最好的方法是让每个客户端都有自己的密钥，他们以某种方式将其传递给服务器，进行身份验证。这些密钥必须以某种方式安全地传递到服务器。这不太可能发生。此密钥将唯一标识每个客户端。如果任何客户滥用权限，他们可能会被拒绝。

下一步是创建上面提到的密钥，使用公钥加密它们，然后将它们发送到服务器。如果您愿意，您甚至可以进行审批。

客户端查询服务器的另一种解决方案，产生一个数字。然后，用户将该号码输入他们之前登录的网站。该数字需要适当复杂，并且仅在几分钟内有效，以降低有人接管设备的风险。这适用于单向应用程序，例如 Netflix。

总而言之，这取决于您对程序的需求。

# ruby - 当被问及元素是否存在时，Watir-webdriver 超时？

> ID：13542880
> 
> 赞同：2
> 
> 时间：2012-11-24T16:01:35.580
> 
> 标签：ruby, watir, watir-webdriver

*   红宝石 1.9.3p327
*   Watir-webdriver 0.6.1

在全新的 Ruby 安装和全新的 webdriver 安装中，我无法使用等待或呈现？使用不存在的元素而不会导致非Watir Timeout 错误。

在下面的示例中，id 'gb_32' 在页面上，但被隐藏。ID 'gb_50000' 不存在。在这两种情况下“在场？” 应该返回 false，但第二个在 60 秒后给我一个超时错误。任何想法为什么会发生这种情况？

```
 irb(main):014:0> b.link(:id,'gb_32').present?
    => false
    irb(main):015:0> b.link(:id,'gb_50000').present?
    Timeout::Error: Timeout::Error
            from C:/Ruby193/lib/ruby/1.9.1/net/protocol.rb:146:in `rescue in rbuf_fill'
            from C:/Ruby193/lib/ruby/1.9.1/net/protocol.rb:140:in `rbuf_fill'
            from C:/Ruby193/lib/ruby/1.9.1/net/protocol.rb:122:in `readuntil'
            from C:/Ruby193/lib/ruby/1.9.1/net/protocol.rb:132:in `readline'
            from C:/Ruby193/lib/ruby/1.9.1/net/http.rb:2562:in `read_status_line'
            from C:/Ruby193/lib/ruby/1.9.1/net/http.rb:2551:in `read_new'
            from C:/Ruby193/lib/ruby/1.9.1/net/http.rb:1319:in `block in transport_request'
            from C:/Ruby193/lib/ruby/1.9.1/net/http.rb:1316:in `catch'
            from C:/Ruby193/lib/ruby/1.9.1/net/http.rb:1316:in `transport_request'
            from C:/Ruby193/lib/ruby/1.9.1/net/http.rb:1293:in `request'
            from C:/Ruby193/lib/ruby/1.9.1/net/http.rb:1286:in `block in request'
            from C:/Ruby193/lib/ruby/1.9.1/net/http.rb:745:in `start'
            from C:/Ruby193/lib/ruby/1.9.1/net/http.rb:1284:in `request'
            from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/remote/http/default.rb:82:in `response_for'
            from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/remote/http/default.rb:38:in `request'
            from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/remote/http/common.rb:40:in `call'
            from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/remote/bridge.rb:598:in `raw_execute'
            from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/remote/bridge.rb:576:in `execute'
            from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/remote/bridge.rb:544:in `find_element_by'
            from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/common/search_context.rb:42:in `find_element'
            from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-webdriver-0.6.1/lib/watir-webdriver/locators/element_locator.rb:247:in `by_id'
            from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-webdriver-0.6.1/lib/watir-webdriver/locators/element_locator.rb:26:in `locate'
            from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-webdriver-0.6.1/lib/watir-webdriver/elements/element.rb:384:in `locate'
            from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-webdriver-0.6.1/lib/watir-webdriver/elements/element.rb:362:in `assert_exists'
            from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-webdriver-0.6.1/lib/watir-webdriver/elements/element.rb:37:in `exists?'
            from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-webdriver-0.6.1/lib/watir-webdriver/elements/element.rb:296:in `present?'
    from (irb):15 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T10:32:07.957

I'd add this as a comment but evidently I can't yet. Are you using Firefox 17? Watir-webdriver isn't yet compatible with 17, so if you are then try reverting to Firefox 16 and see if your code works. I understand that a watir-webdriver update to resolve this compatibility issue is being released next week.

# javascript - 不需要 node.js 的 javascript 包管理器

> ID：13542882
> 
> 赞同：1
> 
> 时间：2012-11-24T16:01:37.930
> 
> 标签：javascript, package-managers

我正在寻找一个不需要安装 node.js 并且最好只使用标准命令行工具的 JavaScript 包管理器。有这样的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T16:12:48.020

[CommonJS 包管理器](https://github.com/kriszyp/cpm)怎么样？

> CPM（CommonJS 包管理器）旨在将 CommonJS 包简单、直接地安装到目标位置/包中。这是专门为方便安装包以在浏览器或任何服务器端 JS 环境（如 Node）中使用而设计的。CPM 基于 CommonJS Mappings 规范，并将安装依赖项或映射哈希中列出的所有依赖项。

默认情况下，它使用 Rhino（*因为几乎到处都安装了 JVM*，引用了他们的评论）。

# ruby-on-rails - 如何在更新对象后始终将状态更改为 awaiting_review？

> ID：13542885
> 
> 赞同：0
> 
> 时间：2012-11-24T16:01:48.233
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, state-machine

我在应用程序中有以下状态机：

```
class Cv < ActiveRecord::Base
  include Workflow
  workflow do
    state :new do
      event :submit, :transitions_to => :awaiting_review
    end
    state :awaiting_review do
      event :review, :transitions_to => :being_reviewed
    end
    state :being_reviewed do
      event :accept, :transitions_to => :accepted
      event :reject, :transitions_to => :rejected
    end
    state :accepted
    state :rejected
  end

  def submit
    halt unless valid?
  end
end

# cvs_controller.rb
def update
  @cv = Cv.find(params[:id])
  if @cv.update_attributes(params[:cv])
    # @cv.back_to_review!
    redirect_to root_path
  end
end 
```

我希望`awaiting_review`在更新对象后始终将状态移动到。

那么我应该在每个状态块中添加`event :back_to_review!, :transitions_to => :awaiting_reviewed`吗？

我正在使用这个宝石：[https ://github.com/geekq/workflow](https://github.com/geekq/workflow)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T16:41:27.897

你可以这样尝试：

**编辑**：根据您的评论

```
 before_save do |w| 
     w.transition_to_awaiting_review if w.changes['attr_name']
 end

 event :transtion_to_awaiting_review do
    transition all => :awaiting_review
 end 
```

这只会在模型的特定属性发生变化时更新。

# java - 读取和打印 unicode 字符串

> ID：13542887
> 
> 赞同：0
> 
> 时间：2012-11-24T16:02:19.950
> 
> 标签：java, character-encoding, intellij-idea, javafx-2, system.out

我正在开发一个将使用许多不同语言和字符的程序。

例如，我需要从文件中读取带有德语字符 ß 的字符串，并在 JavaFX 标签上正确显示该字符串，或者将其打印到 System.out。我的 IDE 建议我将其转换为`\u00DF`，而不是正常工作，但我想自动执行此操作。

或者制作一个字符串“ß”并正确显示。

我怎样才能实现我的目标？

顺便说一句，我正在使用 Intellij Idea。

编辑：当尝试手动编译文件时，使用 UTF-8 W/O BOM（通过 notepad++ 验证），我收到以下错误：![不同的编码](../Images/f33fbf93242c2b37c53316b74c4c7a57.png) 似乎 java 出于某种原因尝试使用 Cp1255 进行编译。帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T16:47:23.360

在顶部的主类中添加

```
static {
    System.setProperty("file.encoding", "your-encoding");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T16:27:21.077

尝试使用所需的编码值设置以下 JVM 参数`-Dfile.encoding='your encoding'` 这可能不会一直有效，因为它是在 JVM 启动时设置的。在这种情况下，如果您正在编码或解码，请检查`file.encoding property`or`Charset.defaultCharset()`以找到当前的默认编码，并使用适当的方法重载或构造函数重载来指定它。

# jquery - 使用 jQuery/AJAX 在 Rails 应用程序中创建新记录时出现删除链接时遇到问题

> ID：13542891
> 
> 赞同：0
> 
> 时间：2012-11-24T16:02:52.230
> 
> 标签：jquery, ruby-on-rails, ajax

我正在创建一个待办事项列表应用程序。用户通过类别拥有_many 任务。我正在通过 jQuery/ajax 为每个类别创建新的任务记录，以使用户体验更好。我在每个任务之后都有一个删除链接，但是通过 ajax 创建新记录时，删除链接不显示。如果我重新加载它出现的页面。如何使删除链接出现在新记录上？我已经尝试遵循此 railscast 并设置了大部分内容，但无法显示删除链接： [http](http://railscasts.com/episodes/136-jquery-ajax-revised?autoplay=true) ://railscasts.com/episodes/136-jquery-ajax-revised?autoplay=true 。

这是我的一些代码：

```
class TasksController < ApplicationController
  def new
   @category = Category.find(params[:category_id])
   @task = @category.tasks.new
  end

  def create
    @category = Category.find(params[:category_id])
    @user = @category.user
    @task = @category.tasks.create(params[:task])
    respond_to do |format|
      format.html { 
       if @task.save
         redirect_to user_path(@user), notice: "Task created."
       else
         render 'new'
       end
    }
      format.js
    end
  end

  def destroy
    @category = Category.find(params[:category_id])
    @task = @category.tasks.find(params[:id])
    @user = @category.user
    @task.destroy
    redirect_to user_path(@user)
  end
end 
```

新的.js.erb：

```
$('.category-<%= @category.id %>-task-link').hide().after('<%= j render("form") %>'); 
```

创建.js.erb：

```
$('form.new_task').remove();
$('.category-<%= @category.id if @category %>-task-link').show();
$('div.category-<%= @category.id if @category %>-tasks').append('<li class="<%= @task.id if @task %>"><%= j @task.name if @task %></li>');
$('li.task').loadOnCreate(); 
```

tasks.js（这个函数应该是在删除链接中加载的函数，但我想不通）：

```
jQuery.fn.loadOnCreate = function() {
  this.find('a.delete-task').show();
  return this;
}

$(function(){
  $('#new_task').loadOnCreate();
}); 
```

谢谢。

**编辑**

这是我的 Rails 代码链接：

```
<div class="category-<%= category.id %>-tasks">
    <% category.tasks.each do |task| %>
        <li class="task">
            <%= task.name if task %>
            <%= link_to "x", category_task_path(category, task), class: "delete-task pull-right", :method => :delete, :confirm => "Are you sure?" %>
        </li>
    <% end %>
</div> 
```

每个任务的 HTML 应该如下所示：

```
<li class="task">Task<a href="/categories/1/tasks/27" class="delete-task pull-right" data-confirm="Are you sure?" data-method="delete" rel="nofollow">x</a>
</li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T12:13:59.730

从您的`create.js.erb`文件中：

```
$('div.category-<%= @category.id if @category %>-tasks').append('<li class="<%= @task.id if @task %>"><%= j @task.name if @task %></li>'); 
```

您缺少 中的删除链接`append`。它实际上应该看起来像：

```
$('div.category-<%= @category.id if @category %>-tasks').append('<li class="<%= @task.id if @task %>"><%= j @task.name if @task %><%= link_to "x", category_task_path(category, task), class: "delete-task pull-right", :method => :delete, :confirm => "Are you sure?" %></li>'); 
```

# android - Android：通过 Content Provider 访问 SQLite 数据库还是实现 DAO？

> ID：13542892
> 
> 赞同：16
> 
> 时间：2012-11-24T16:03:13.620
> 
> 标签：android, database, sqlite, android-contentprovider, dao

我想知道访问我的应用程序数据库的最佳方法是：使用内容提供程序，还是手动实现我的 DAO？从我最近的调查来看，内容提供者似乎更可取，即使是应用程序内部使用，但我不知道每种方法的缺点是什么。你能对此提供一些反馈吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-24T16:24:47.767

如果您担心数据库的关闭或锁定，我更喜欢使用[ContentProvider 。](http://developer.android.com/reference/android/content/ContentProvider.html)检查[简单内容提供程序以进行数据库操作](http://myandroidnote.blogspot.in/2011/11/at-last-i-concluded-it-is.html)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-04-24T10:52:28.340

来自谷歌[文档](http://developer.android.com/guide/topics/providers/content-provider-creating.html)。

> ## 在你开始建造之前
> 
> 在开始构建提供程序之前，请执行以下操作：
> 
> 确定您是否需要内容提供者。
> 如果要提供以下一项或多项功能，则需要构建内容提供程序：
> 
> *   您想向其他应用程序提供复杂的数据或文件。
> *   您希望允许用户将复杂数据从您的应用程序复制到其他应用程序。
> *   您想使用搜索框架提供自定义搜索建议。
> 
> 如果使用完全在您自己的应用程序中，则不需要提供程序来使用 SQLite数据库*。*

但是当我阅读这篇文章和其他一些帖子时，我有点困惑。如果内容提供程序事件仅供您自己的应用程序使用，那么使用它是否有意义？

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-18T18:54:12.900

从 ContentProvider 文档：

内容提供者是 Android 应用程序的主要构建块之一，为应用程序提供内容。它们封装数据并通过单个 ContentResolver 接口将其提供给应用程序。仅当您需要在多个应用程序之间共享数据时才需要内容提供程序。例如，联系人数据由多个应用程序使用，并且必须存储在内容提供程序中。如果您不需要在多个应用程序之间共享数据，您可以通过 SQLiteDatabase 直接使用数据库。

在我看来，如果您不打算与其他应用程序共享数据，则不需要内容提供者。

链接：http: [//developer.android.com/reference/android/content/ContentProvider.html](http://developer.android.com/reference/android/content/ContentProvider.html)

# python - nginx + uwsgi下的flask

> ID：13542894
> 
> 赞同：0
> 
> 时间：2012-11-24T16:03:33.510
> 
> 标签：python, nginx, flask, uwsgi

我们正在开发一个烧瓶应用程序，但在尝试配置服务器 4 小时后我无法弄清楚。

事情是这样的：

*   虚拟机可通过 xx.xx.xx.xx:81 访问

*   在这台服务器上，我的应用程序位于：/var/hg/repositories/data/test.py

我想通过 xx.xx.xx.xx:81/ws 访问这个应用程序

这就是我对 nginx 所做的：

```
 location = /var/hg/repositories/data { rewrite ^ /var/hg/repositories/data/; }
     location /ws { try_files $uri @ws; }
     location @ws {
        include uwsgi_params;
        uwsgi_param SCRIPT_NAME /var/hg/repositories/data;
        uwsgi_modifier1 30;
        uwsgi_pass unix:/tmp/uwsgi.sock;
     } 
```

我有一个 yaml 文件来午餐 uwsgi ：

```
uwsgi:
  socket: 127.0.0.1:9090
  master: 1
  workers: 1
  chmod-socket: 666
  auto-procname: 1
  python-path: .
  pidfile: /tmp/uwsgi.pid
  daemonize: /var/log/uwsgi.log
  module: test:app 
```

转到 xx.xx.xx.xx:81 给了我经典的 nginx 欢迎信息。

去 xx.xx.xx.xx:81/ws 给我一个 404。

我究竟做错了什么？

conf更新后，我有

> ```
>  location = /var/hg/repositories/data/
>     location /var/hg/repositories/data/ { try_files $uri @web }
>     location @ws {
>              uwsgi_pass unix:/tmp/uwsgi.sock;
>     } 
> ```

我的 uwsgi 配置文件：

```
uwsgi:
  socket: unix:/tmp/uwsgi.lock
  master: 1
  workers: 1
  chmod-socket: 666
  auto-procname: 1
  pidfile: /tmp/uwsgi.pid
  deamonize: /var/log/uwsgi.log
  manage-script-name: true
  mount: /ws=/var/hg/repositories/data/test.py
  callable: app 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T17:07:00.720

您必须在 uWSGI 中“挂载”应用程序，目前您已将其“挂载”为空 SCRIPT_NAME

挂载：/ws=test.py

可调用：应用程序

（删除“模块”指令）可以解决问题。

我建议您避免使用 nginx 管理 SCRIPT_NAME 因为它不太聪明，并且使用 modify1 30 确实是一个丑陋的黑客。

只需从 nginx 中删除 uwsgi_param 和 uwsgi_modifier1 并将 manage-script-name: true 添加到 uWSGI

# delphi - 在 Delphi 的 ASM 函数中存储函数变量

> ID：13542896
> 
> 赞同：1
> 
> 时间：2012-11-24T16:03:41.327
> 
> 标签：delphi, assembly, basm

如何正确存储`n`以下功能？`n`由于我使用一次后由于某种原因发生变化 的价值。

```
function Test(n: Integer): Byte;
asm
  mov eax, n
  add eax, eax
  add eax, n
  mov ecx, eax
  mov ebx, eax
  mov ecx, n
end; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T16:08:39.757

函数的第一个参数`n`, 存储在 中`eax`，所以你的行

```
mov eax, n 
```

非常奇怪（移至`n`）`n`。另外，如果你改变了`eax`，你就改变了`n`。

您可以保存参数以供将来使用（因为您可能需要更改`eax`）：

```
var
  tempN: integer;
asm
  mov tempN, eax 
```

此外，IIRC，在编写内联 ASM 时*不得*更改 的值。`ebx`因此，您需要用`push ebx`和包围您的代码`pop ebx`。

# android - 从 SQLite 库中删除条目时无法自动刷新 ListView

> ID：13542898
> 
> 赞同：0
> 
> 时间：2012-11-24T16:03:58.967
> 
> 标签：android, sqlite, listview, refresh

我已经浏览 StackOverflow 好几天了，寻找解决我的问题的方法，但是所有被问到的类似问题对我来说都太复杂了！

所以这里是：我有一个 ListView，它显示我的 SQLite 数据库中的元素。为此，它使用 SimpleCursorAdapter。我的代码没有优化，但我只是一个新手。

这是我的代码：

```
protected boolean onLongListItemClick(final View v, final int pos, long id) 
        {
           final String str=ReservationList.getItemAtPosition(pos).toString();
           Log.i("ListView", "onLongListItemClick string=" + str);
           AlertDialog.Builder builder = new AlertDialog.Builder(FlightBook.this);
           builder.setMessage("Delete this entry from Flight Book?")
           .setCancelable(false)
           .setPositiveButton("Yes", new DialogInterface.OnClickListener() 
           {
               public void onClick(DialogInterface dialog, int id) 
               {
                   Log.i("ID",""+pos);
                   rdb.removeReservationWithID((int)mAdapter.getItemId(pos));
                   **//NEED SOME CODE HERE TO REFRESH LISTVIEW AUTOMATICALLY**
               }
           })
           .setNegativeButton("No", new DialogInterface.OnClickListener() 
           {
               public void onClick(DialogInterface dialog, int id) 
               {
                   dialog.cancel();
               }
           });
           AlertDialog alert = builder.create();
           alert.show();
           return true;
        } 
```

我所需要的和我想要的只是知道我应该在代码中提到的行中输入什么以使 ListView 自动刷新。我在我的适配器上尝试了 notifyDataChanged()，但它不起作用（我知道我应该使用线程和非常复杂的东西，例如 ASyncTask，但也没有正确解释如何在这种特定情况下使用它们）。

感谢您的帮助，如果您真的想帮助我，请给我代码，而不是链接！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T16:09:30.187

您需要使用新数据创建一个新游标并将其加载到您的适配器中，如下所示：

```
myListAdapter.changeCursor(getCursor()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T16:51:30.610

您应该在这里使用[Loader](http://developer.android.com/guide/components/loaders.html)。
LoaderManager 是一个更加智能和通用的实现。[startManagingCursor](http://developer.android.com/reference/android/app/Activity.html#startManagingCursor%28android.database.Cursor%29)也已弃用[Restart Loader](http://developer.android.com/guide/components/loaders.html#restarting)
调用 将刷新您的视图

参考
[正确加载数据](http://mobile.tutsplus.com/tutorials/android/android-sdk_loading-data_cursorloader/)
[了解LoaderManager](http://www.androiddesignpatterns.com/2012/07/understanding-loadermanager.html)

# php - 如何使用 php 检测未选中的复选框？

> ID：13542900
> 
> 赞同：3
> 
> 时间：2012-11-24T16:04:21.810
> 
> 标签：php, checkbox

我的表单中有 3 个（我不知道有多少可以更改。仅 3 个示例）复选框，我想在发布时使用 php 检测未选中的复选框。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-24T16:07:46.543

[仅提交选中的复选框。](http://www.w3.org/TR/html4/interact/forms.html#h-17.13.2)因此，任何未提交的复选框都未选中。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-24T16:15:16.303

[秋葵是对的](https://stackoverflow.com/questions/13542900/how-can-i-detect-unchecked-checkbox-with-php#13542924)。但是，有一种解决方法，如下所示：

```
<form action="" method="post">
    <input type="hidden" name="checkbox" value="0">
    <input type="checkbox" name="checkbox" value="1">
    <input type="submit">
</form> 
```

换句话说：例如，有一个与复选框同名的隐藏字段和一个表示未选中状态的值`0`。然而，重要的是让隐藏字段位于表单中的复选框*之前。*否则，如果复选框被选中，隐藏字段的值将在发布到后端时覆盖复选框值。

跟踪这一点的另一种方法是在后端有一个可能的复选框列表（例如，甚至用该列表填充后端的表单）。像下面这样的东西应该给你一个想法：

```
<?php

$checkboxes = array(
    array( 'label' => 'checkbox 1 label', 'unchecked' => '0', 'checked' => '1' ),
    array( 'label' => 'checkbox 2 label', 'unchecked' => '0', 'checked' => '1' ),
    array( 'label' => 'checkbox 3 label', 'unchecked' => '0', 'checked' => '1' )
);

if( strtolower( $_SERVER[ 'REQUEST_METHOD' ] ) == 'post' )
{
    foreach( $checkboxes as $key => $checkbox )
    {
        if( isset( $_POST[ 'checkbox' ][ $key ] ) && $_POST[ 'checkbox' ][ $key ] == $checkbox[ 'checked' ] )
        {
            echo $checkbox[ 'label' ] . ' is checked, so we use value: ' . $checkbox[ 'checked' ] . '<br>';
        }
        else
        {
            echo $checkbox[ 'label' ] . ' is not checked, so we use value: ' . $checkbox[ 'unchecked' ] . '<br>';
        }
    }
}
?>
<html>
<body>
<form action="" method="post">
    <?php foreach( $checkboxes as $key => $checkbox ): ?>
    <label><input type="checkbox" name="checkbox[<?php echo $key; ?>]" value="<?php echo $checkbox[ 'checked' ]; ?>"><?php echo $checkbox[ 'label' ]; ?></label><br>
    <?php endforeach; ?>
    <input type="submit">
</form>
</body>
</html> 
```

...选中一两个复选框，然后单击提交按钮，看看会发生什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-17T12:37:28.663

您可以使用以下函数完全在 PHP 中执行此检查：

```
function cbToBool($cb = true) {
    if (isset($cb)) {
        return true;
    } else {
        return false;
    }
} 
```

像这样使用它

```
$_POST["blocked"] = cbToBool($_POST["blocked"]); 
```

# sql - 如何通过连接获得单个结果？

> ID：13542901
> 
> 赞同：0
> 
> 时间：2012-11-24T16:04:36.460
> 
> 标签：sql, postgresql

使用 postgres，我写了这个 SQL 请求：

```
SELECT projects.id
     , projects.title
     , comments.message as comment_message 
FROM "projects" 
RIGHT OUTER JOIN comments 
ON comments.project_id = projects.id
GROUP BY projects.id, comments.message 
```

我有这种结果：

```
 id |     title      | comment_message 
----+----------------+-----------------
  6 | simple project | simple comment
  6 | simple project | simple message 
```

是否有可能只有第一个结果？我只想按项目获得一个结果。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T16:11:49.737

你可以写：

```
SELECT projects.id,
       projects.title,
       MIN(comments.message) AS comment_message 
  FROM "projects"
 RIGHT
 OUTER
  JOIN comments
    ON comments.project_id = projects.id
 GROUP
    BY projects.id
; 
```

# c - 实体和标识符有什么区别？

> ID：13542905
> 
> 赞同：2
> 
> 时间：2012-11-24T16:05:16.067
> 
> 标签：c, c99

来自 C99 标准：

6.2.1/2

> 对于标识符指定的每个不同实体，标识符仅在称为其范围的程序文本区域内可见（即，可以使用）。由同一标识符指定的不同实体要么具有不同的范围，要么位于不同的名称空间中。

我对实体和标识符（我知道它可以是对象的名称）感到困惑。根据此引用示例，实体到底是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T16:11:00.577

实体是变量、函数、类型等。标识符是这些实体的名称。例如：

```
#include <stdlib.h>
#include <stdio.h>

static int foo()
{
    static int x = 0; // "x" is an identifier, the variable "x" inside
                      // this function "foo()" is an entity.
    return x++;
}

int main()
{
    int x = 1; // "x" is an identifier as well, and it is the same name "x"
                   // as of that used inside "foo()". However, this entity
                   // (variable) is not the same as in "foo()", it has different
               // scope and is a totally different entity.
    printf("foo()+x++ = %d\n", foo()+x++);
    printf("foo()+x++ = %d\n", foo()+x++);
    printf("foo()+x++ = %d\n", foo()+x++);
    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T16:47:07.747

请注意，单个标识符可以同时指定不同的实体。

```
#include <stdio.h>

static int x = 42;             // 1

struct x { int x; };           // 2 & 3

int func(struct x x)           // 4
{
    if (x.x > 10) goto x;      // 5
    int y = x.x;
    {
    int x = 37;                // 6
    printf("%d %d\n", x, y);
    }
x:                             // 7
    return(x.x);
} 
```

我认为我们可以同意`x`这是一个彻底过度使用的标识符。

1.  `x``int`是文件范围内的静态类型变量。
2.  `x`是一个结构标签。
3.  `x`是结构成员。
4.  `x`是类型的参数/局部变量`struct x`（隐藏文件范围变量）。
5.  `x`是对标签的引用。
6.  `x`是一个新的局部变量（隐藏文件范围变量和参数）。
7.  `x`是标签的定义。

> 对于标识符指定的每个不同实体，标识符仅在称为其范围的程序文本区域内可见（即，可以使用）。由同一标识符指定的不同实体要么具有不同的范围，要么位于不同的名称空间中。

结构标记`x`从第一次引用到文件末尾的位置可见。它位于标签命名空间中，因此不会与`x`. 标签`x`位于标签名称空间中，因此它不会与`x`. 该结构成员`x`位于“成员的`struct x`”命名空间中，并且与`x`. 这些是三个特殊的名称空间。

其他引用`x`都在“普通标识符”命名空间中。Typedef 名称也在普通命名空间中；这就是为什么我没有使用`typedef`. 调用的三个不同变量`x`具有不同的作用域。

我已经放弃了宏命名空间；如果我`#define x z`在开始时添加，那么我所说的一切`x`都必须是关于“`z`预处理后”的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T16:10:28.167

实体是变量，我的意思是它暗示了一些包含数据的内存（或寄存器），或编译对象，如类型、枚举等，它们具有一些属性，如大小、组件字段等。标识符只是某些实体的名称.

两个可区分的实体可以具有相同的名称（取决于范围），但在程序的任何一点上，一个名称只匹配*一个*实体。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-24T16:17:35.510

考虑以下 C 程序

```
#include<stdio.h>

int main(void)
{

 int var1, var2;
 .....
 .....

}

int newfun(void)
{
 int var1;
 float var2;
 ....
 ....

} 
```

因此，对于每个不同的实体（可以被认为是一个变量），一个标识符（变量名，上图：var1，var2）可以在程序文本的区域内使用。即，main() 函数中定义的 var1 和 var2 只能在其中使用。

虽然 main() 和 newfun() 函数中的标识符是相同的，即 int var1 和 float var2。它们在每个函数中的处理方式不同。

现在，main() 函数中的变量（或标识符）是 int 类型。它们可以统称为一个实体。但是，下一个函数中的同一个变量 var2 是 float 类型，它属于不同的类型，因此属于不同的实体。

# html - 即使在jsp中点击

> ID：13542907
> 
> 赞同：0
> 
> 时间：2012-11-24T16:05:25.620
> 
> 标签：html, jsp, onclick

我是开发和 JSP 的新手，我有一个学校项目要做。我有一个主要问题阻止我继续编码。

**我的问题：** 当用户单击按钮时，我试图在变量中执行放置。但实际上，变量值是列表中的最后一个值。换句话说，该`onClick`功能不起作用。

这是代码：

```
<input type = "submit" id = "buy" name = "buy" value="Buy this <% out.println(rs1.getString("items.item_maker"));%> Now!" onclick = <% car = rs1.getString("items.item_maker").toString(); %> > 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T18:47:26.147

这是不可能的，因为 JSP 是服务器端的。这意味着它在页面到达客户端之前执行。你的代码：

```
<input type = "submit" id = "buy" name = "buy" value="Buy this <% out.println(rs1.getString("items.item_maker"));%> Now!" onclick = <% car = rs1.getString("items.item_maker").toString(); %> > 
```

将导致：

```
<input type = "submit" id = "buy" name = "buy" value="Buy this [string returned by rs1.getString("items.item_maker")] Now!" onclick = [result of rs1.getString("items.item_maker").toString();]> 
```

但是，由于变量赋值不返回任何东西，这将变成

```
<input type = "submit" id = "buy" name = "buy" value="Buy this [string returned by rs1.getString("items.item_maker")] Now!" onclick = > 
```

你看，一个空的 onclick 属性。**编辑：**我实际上是错的。分配对被分配的事物进行评估。这就是为什么像`while ((line = br.readLine()) != null)`工作这样的事情。

此外，该`onclick`属性仅接受将在单击时执行的 javaSCRIPT（您没有说）。所以让它空着意味着`do nothing on click`。

PS 你错过了一个结束`</input>`标签，或者忘记`/`在 onclick 属性之后添加一个以使其成为自结束标签。

# asp.net - 如何在 Page_Load 上获取参数

> ID：13542914
> 
> 赞同：4
> 
> 时间：2012-11-24T16:06:29.553
> 
> 标签：asp.net

我正在尝试将 url 参数发送到 .aspx 页面。现在我需要在 Page_Load() 函数上获取那些参数。

我正在使用此代码来调用新页面。我需要如何添加参数。

```
window.location = 'AttendanceExcelReport.aspx'; 
```

那么我需要做什么才能在 Page_Load 函数上获取这些参数。

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-24T16:09:32.957

您将使用查询字符串。

IE 你的 URL 的格式应该如下：

`[URL][?][Key=value]`

如果您要添加多个参数，则与`[&]`您的下一个分开`[key=value]`

所以：

这是您的 URL，带有 2 个参数，ID 和名称：

`AttendanceExcelReport.aspx?id=1&name=Report`

您只需调用即可访问这些

`Request("id")`在 VB 和`Request["id"]`c# 中

`Request("name")`在 VB 和`Request["name"]`c# 中

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T07:30:04.540

假设您要处理传递给页面的未确定数量的参数，您可以获取包含所有查询字符串参数的 Request 对象的 QueryString 属性，然后通过几个 for-each 获取这些参数。例如：

```
 Dim parameters As System.Collections.Specialized.NameValueCollection
    parameters = Request.QueryString
    Dim key As String
    Dim values() As String 

    System.Diagnostics.Debug.Print("Number of parameters: " & parameters.Count)
    For Each key In parameters.Keys
        values = parameters.GetValues(key)
        For Each value As String In values
            System.Diagnostics.Debug.Print(key & " - " & value)
        Next
    Next 
```

# actionscript-3 - 从数组制作舞台，需要 hitTestObject 帮助

> ID：13542916
> 
> 赞同：0
> 
> 时间：2012-11-24T16:06:35.683
> 
> 标签：actionscript-3

我正在尝试制作我的脚本，以便它根据数组制作关卡。积木放置得很好，但我必须保证，如果你跳下来摔倒，玩家就会停止碰撞。

我已经尝试了一些方法，但我无法弄清楚，所以我在这里寻求帮助。

变量列表：

```
 var player1:MovieClip;
    var up:Boolean = false;
    var left:Boolean = false;
    var right:Boolean = false;
    var isWalking:Boolean = false;
    var isJumping:Boolean = false;
    var isOnFloor:Boolean = false;
    var lastPressed = "";
    var jumpSpeedLimit:int = 15;
    var jumpSpeed:Number = jumpSpeedLimit;
    var currentLevel:Number;
    var newBlock:MovieClip;
    var level1:Array
    var blockHolder:Sprite = new Sprite; 
```

跳转脚本：

```
public function playerJumpRight():void {
        if (!isJumping) {
            isOnFloor = false;
            isJumping = true;
            var xVel:Number = 2;
            var yVel:Number = -jumpSpeedLimit;  //velocity = snelheid
            var yAcc:Number = 1;

            addEventListener(Event.ENTER_FRAME, onLoop);
            function onLoop(e:Event):void {
                if (isJumping) {
                    player1.y += yVel;
                    yVel += yAcc;
                    if (player1.hitTestObject(newBlock)) {
                        isOnFloor = true;
                    }
                }
            }
        }
    } 
```

创建级别脚本：

```
 function createLevel() {
        addChild(blockHolder);
        level1 = new Array(
        0,1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1
        );
        for (var i:int = 1; i < level1.length; i++) {
            if (level1[i] == 1) {
                newBlock = new MovieClip();
                newBlock.graphics.beginFill(0xFF0000, 1);
                newBlock.graphics.drawRect(0, 0, 25, 25);
                newBlock.y = 400;
                newBlock.x = (i*newBlock.width+i)
                blockHolder.addChild(newBlock);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T19:55:49.260

据我所知，您只检查最后创建的块。您将需要遍历所有块以查看它们是否与播放器重叠。此外，要创建游戏，请尝试一些已经存在的游戏引擎，例如 Flashpunk 或 Flixel，使用它们会更容易。

# scala - Akka - 重新发送“破坏”消息

> ID：13542921
> 
> 赞同：23
> 
> 时间：2012-11-24T16:07:27.997
> 
> 标签：scala, playframework, akka

在官方[akka 2.0.4 文档](http://doc.akka.io/docs/akka/2.0.4/scala/actors.html#Restart_Hooks)中它说：

> Actor 重启只替换实际的 Actor 对象；邮箱的内容不受重启的影响，所以在 postRestart 钩子返回后会继续处理消息。触发异常的消息将不会再收到。重新启动时发送给actor的任何消息都将像往常一样排队到其邮箱中。

假设我有一条消息导致我的演员重新启动。它不再在邮箱中，因此将不会被取代它的演员处理。如果我无论如何都希望演员处理此消息（假设在这种情况下顺序无关紧要），那么演员在重新启动时将消息发送给自己会是一个坏主意吗？

一些（伪）代码来说明我的意思：

```
class ResendingActor extends Actor {
  var curMessage: Option[MyMessage] = None
  def receive = {
    case MyMessage(x) => {
      curMessage = Some(MyMessage(x))
      /* processing */
      curMessage = None
    }
  }
  override def preRestart(reason: Throwable, message: Option[Any]) {
    curMessage match {
      case Some(x) => self ! x
      case None => ;
    }
  }
} 
```

这样，在重新启动之前未由 Actor 处理的消息将被推送到新 Actor 的队列末尾。

**所以我的问题是：**有什么理由我不应该这样做吗？

我唯一能想到的是，如果消息由于某种原因格式错误，它永远不会离开系统并导致actor定期重启......

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-25T01:32:35.777

您已经在 preRestart 中收到了失败消息（请参阅：消息：Option[Any]），因此无需自己隐藏它。是的，将它重新发送给自己是完全可以的，但要小心与此相结合的无限重启，因为你很可能最终会收到一条永远不会被丢弃的消息。

# javascript - 如何防止选择后关闭菜单？

> ID：13542923
> 
> 赞同：3
> 
> 时间：2012-11-24T16:07:41.463
> 
> 标签：javascript, jquery, jquery-ui, autocomplete, widget

我正在使用[jQuery Autocomplete](http://api.jqueryui.com/autocomplete)小部件，并且受[这个问题](https://stackoverflow.com/questions/6043506/jquery-ui-autocomplete-disable-select-close-events)的启发，为了*防止在 select 后关闭菜单*，我想出了以下代码：

```
$(#input_field).autocomplete({
  select   : function(event, ui) {

    // I also tried to run 'ui.item.data( "item.autocomplete" );' and it happens
    // the same thing (keep reading for more information).
    ui.item.option.selected = false;

  },
  ...
}); 
```

它有效：选择后菜单未关闭。但是，我收到以下错误（在 Firebug 控制台中）：

```
TypeError: ui.item.option is undefined 
```

即使通过使用`option.selected = false`我得到`TypeError: option is undefined`但它按预期工作。

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T18:37:15.080

不幸的是，当前的 jQuery UI 中没有选项/方法来处理这个问题。您尝试使用的方法适用于旧版本的 jQuery UI。在当前版本`ui.item`中没有您尝试访问的比例。它只有`{"label":"Java","value":"java"}`内部，所以这就是你有错误的原因。

因此，要使其正常工作，您需要某种技巧。通过检查 jQuery UI 源代码，我发现最简单和最可靠的方法是在`close`没有自定义方法的情况下覆盖公共方法。如果您永远不需要关闭自动完成功能，这真的很容易：

```
$("#input_field").data('autocomplete').close = function() {}; 
```

但是，如果您只想在使用鼠标选择项目时阻止关闭，则会更复杂：

```
// custom close method
(function(){
    var instance = $("#input_field").data('autocomplete');
    var origClose = instance.close, mouseFlag;

    // capture mouse events
    instance.menu.element.on('mousedown', function() {
        mouseFlag = true;
    });
    instance.close = function(e) {
        if(!mouseFlag) {
            // call original method if drop isn't closed by mouse
            origClose.apply(this, arguments);
        } else {
            // clean flag in setTimeout to avoid async events
            setTimeout(function(){
                mouseFlag = false;    
            },1);
        }
    }
}());​ 
```

工作[JSFiddle](http://jsfiddle.net/6hcVE/)

# java - 线光栅化 / 4-connected Bresenham

> ID：13542925
> 
> 赞同：5
> 
> 时间：2012-11-24T16:07:53.067
> 
> 标签：java, raster, rasterizing, bresenham

对于碰撞测试，我需要光栅一条线。bresenham 算法几乎可以按预期工作，但存在如下缺陷： ![](../Images/8f97477955860abdbf6f751d08eee272.png)

我需要：

![](../Images/277826aed38ec0422b394b1768d4a2dc.png)

我当前的实现（基于[http://en.wikipedia.org/wiki/Bresenham%27s_line_algorithm#Simplification](http://en.wikipedia.org/wiki/Bresenham%27s_line_algorithm#Simplification)）：

```
public boolean isInsideLine(int x1, int y1, int x2, int y2) {
    final int dx = abs(x2 - x1), dy = abs(y2 - y1);
    final int sx = x1 < x2 ? 1 : -1, sy = y1 < y2 ? 1 : -1;
    int err = dx - dy;

    while (true) {
        if (isInside(x1, y1)) //Lookup in pixel array
            return true;
        if (x1 == x2 && y1 == y2)
            break;
        final int e2 = err << 1;
        if (e2 > -dy) {
            err -= dy;
            x1 += sx;
        }
        if (e2 < dx) {
            err += dx;
            y1 += sy;
        }
    }
    return false;
} 
```

有没有我可以使用的其他线光栅化算法，或者有人知道如何修改 bresenham？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-31T10:17:34.670

也许它会很有用，有我的**非整数端点**版本。这是`GridMap`我用于几何形状的空间索引以加速 2D 地图中的碰撞检测的类方法。

```
int GridMap::insertLine( int lineId, double ax, double ay, double bx, double by ){
    // get index of endpoints in GridMap
    int ix    = getIx( ax ); 
    int iy    = getIy( ay );
    int ixb   = getIx( bx );
    int iyb   = getIy( by );
    // insert endpoints to GridMap
    insert( lineId, ix, iy   ); 
    insert( lineId, ixb, iyb );
    // raster central part of the line
    double dx = fabs( bx - ax );
    double dy = fabs( by - ay );
    int dix = ( ax < bx ) ? 1 : -1;
    int diy = ( ay < by ) ? 1 : -1;
    double x=0, y=0;
    while ( ( ix != ixb ) && ( iy != iyb  ) ) {
        if ( x < y ) {
            x  += dy;
            ix += dix;
        } else {
            y  += dx;
            iy += diy;
        }
        insert( lineId, ix, iy );
    }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T17:08:26.447

感谢 koan，有时您只是缺少要搜索的关键字，[绘制 4 连接线的算法](https://stackoverflow.com/questions/5186939/algorithm-for-drawing-a-4-connected-line)似乎可以解决它：

```
public boolean isInsideLine(int x1, int y1, int x2, int y2) {
    final int dx = abs(x2 - x1), dy = abs(y2 - y1);
    final int sx = x1 < x2 ? 1 : -1, sy = y1 < y2 ? 1 : -1;
    int err = dx - dy;

    while (true) {
        if (isInside(x1, y1)) //Lookup in pixel array
            return true;
        if (x1 == x2 && y1 == y2)
            break;
        final int e2 = err << 1;
        if (e2 > -dy) {
            err -= dy;
            x1 += sx;
        } else if (e2 < dx) { // else if instead of if
            err += dx;
            y1 += sy;
        }
    }
    return false;
} 
```

# nltk - 在我自己的语料库上使用 Python 与 NLTK 的作者身份

> ID：13542928
> 
> 赞同：2
> 
> 时间：2012-11-24T16:08:22.940
> 
> 标签：nltk

我正在尝试使用NLTK实现作者身份识别，到目前为止，我无法弄清楚我应该如何安排语料库，并假设使用BOW作为特征的最简单场景，我不知道如何存储这个特征，如列表、集合、FreqDist 或 Dic？我想做的是将我的文档放在文件夹中，每个文件夹都是类标签，就像 author1 作为文件夹，他的所有培训文档都在该文件夹中，其他作者也是如此。到目前为止我所玩的是制作所有一位作者的文档作为一个大文本文件保存在古腾堡语料库中，并移动了原始古腾堡文件并使用：

从 nltk.corpus 导入古腾堡

通过这种方式，我确实可以访问我的文件并且可以执行 BOW，但不知道如何存储它们以进行分类。我试图修改以下示例的 movie_reviews 以适合我的语料库，但失败了：

```
import numpy as np
import nltk
from nltk.probability import FreqDist
from nltk.classify import SklearnClassifier
from sklearn.feature_extraction.text import TfidfTransformer
from sklearn.feature_selection import SelectKBest, chi2
from sklearn.naive_bayes import MultinomialNB
from sklearn.pipeline import Pipeline

pipeline = Pipeline([('tfidf', TfidfTransformer()),
                     ('chi2', SelectKBest(chi2, k=200)),
                     ('nb', MultinomialNB())])
classif = SklearnClassifier(pipeline)

from nltk.corpus import movie_reviews
pos = [FreqDist(movie_reviews.words(i)) for i in movie_reviews.fileids('pos')]
neg = [FreqDist(movie_reviews.words(i)) for i in movie_reviews.fileids('neg')]
add_label = lambda lst, lab: [(x, lab) for x in lst]
classif.train(add_label(pos[:100], 'pos') + add_label(neg[:100], 'neg'))

l_pos = np.array(classif.batch_classify(pos[100:]))
l_neg = np.array(classif.batch_classify(neg[100:]))
print "Confusion matrix:\n%d\t%d\n%d\t%d" % (
          (l_pos == 'pos').sum(), (l_pos == 'neg').sum(),
          (l_neg == 'pos').sum(), (l_neg == 'neg').sum()) 
```

任何帮助将不胜感激，如果有任何人可以合作，最好是为每个作者在文件夹中保存文件，或者为每个作者保存一个大文本文件

谢谢

# git - git 提交不同的文件集来开发和掌握

> ID：13542929
> 
> 赞同：1
> 
> 时间：2012-11-24T16:08:28.823
> 
> 标签：git, version-control, dvcs, release-management, git-flow

我最近开始开发一个新库，并使用 Git 进行版本控制。我决定关注广受欢迎的博客文章[A successful Git branching model](http://nvie.com/posts/a-successful-git-branching-model/)来管理分支。现在是我发布第一个版本的时候了，我想要一些关于管理特定文件集的建议，如下所述。

在开发分支和功能分支上，我想要所有的“支持文件”，例如用于编译的 makefile 和 doxygen 用于生成文档的 readme.md 文件。（请注意，这些只是几个示例。我还有更多“支持文件”。）

博客文章还说，提交到 master 分支是*定义*上的发布。我希望该版本包含所有“二进制文件”（例如，包括编译产生的目标文件和包含文档的 html 文件）。这些文件应该提交到主分支，以便客户可以从带有标签的存储库中克隆并获得所需的版本。

我不想在版本中包含“支持文件”（因为我不想给客户一堆他们不想要或不能使用的文件）。同样，我不希望在开发和功能分支中对“二进制文件”进行版本控制。因此，我想提交一组文件来开发，另一组文件来掌握。（当然，还有一组文件对两个分支都是“通用的”。）但是，我对保持主分支和开发分支不同步持怀疑态度，就像刚才描述的那样。

我提出的模型听起来不错吗？如果是这样，我应该如何处理提交开发和掌握的不同文件？有没有更好的方法来处理这种情况？

我浏览了上述博客页面上的每一条评论，搜索了互联网，也在 StackOverflow 上搜索了这里。从搜索结果来看，这个[带有一些不同文件的帖子 GIT 存储库](https://stackoverflow.com/questions/8713784/git-repositories-with-some-different-files)似乎是唯一一个接近我的问题的地方。这些都没有帮助我找出解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T16:52:14.727

IMO 提出的解决方案并不好。您的问题的常见解决方案是：

*   版本控制所有“支持文件”。如果您关心这些文件是否被修改或删除，那么它们应该受版本控制
*   不要对“二进制文件”进行版本控制，如果它们只是由编译过程生成的话。编译的代码和 Makefile 是最重要的。如果它们用于编译代码，您可能会在“bin”文件夹中包含二进制文件。
*   围绕要交付给客户端的包创建构建过程。您可以为他们可以访问的客户端构建一个包，或者您可以让他们自己运行您的“包脚本”。“包脚本”只需在命令行上执行即可克隆 repo、构建包和删除 repo。

要了解有关 git 分支模型以及它们如何应用于开发的更多信息，请查看[http://git-scm.com/book/en/Git-Branching](http://git-scm.com/book/en/Git-Branching)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T19:03:29.810

使用 git-flow，主分支包含最新版本的提示，该语句中的缺陷是当您处理需要编译的软件时。

在这种情况下，主分支是您从中创建实际版本的源版本分支。如果您根据定义查看分支模型，您还需要主分支中的所有支持文件。这样，您始终可以创建最新版本的二进制文件。

在您的情况下，您说您不希望客户拥有一堆他们不需要的文件，这意味着您在发布后需要一些额外的工作。在 git-flow 术语中，完成 git flow 发布后，您需要执行额外的步骤来编译您的发布。编译结果不应受修订控制。使用原始的 git-flow 软件，您需要手动启动编译过程，如果您使用我的 fork，[git-flow (AVH 版)](http://bit.ly/S2k1S2)，您实际上可以使用钩子自动完成此操作。

我愿意说 github 上 99% 的需要某种编译的项目的所有支持文件也都在 master 分支中。

# sql-server - SQL Server 2012 插入块读取

> ID：13542935
> 
> 赞同：3
> 
> 时间：2012-11-24T16:09:03.260
> 
> 标签：sql-server, entity-framework, sql-server-2012, isolation-level

我在 SQL Server 2012 中有一个大表，它包含大约 3400 万条记录。我有一个批处理程序，每 5 分钟插入/更新一次表，并且我有一个可以随时从表中读取的 Web 应用程序。

每次批处理程序写入表时，都会导致读取速度非常慢。我认为这与隔离级别有关，但我不太喜欢 SQL Server，所以我不知道如何修复它。

对我来说最好的方案是让插入不会阻止读取。是否可以在查询中指定？还是我必须更改读取查询以获取“脏行”？

该应用程序并不依赖于“新鲜”数据，因此如果我可以强制数据库允许脏读，那就没问题了。但我不知道如何实现这一点，或者它是否是更好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T19:29:53.387

有一个简单的答案和一个艰难的答案：

如果能开启并使用快照隔离，就很容易解决。这解决了读者的阻塞和一致性问题。

如果你不能这样做，问题可能很难解决，但这里没有足够的信息来回答。

因此，请尝试为读者使用快照隔离，并确保在使用前阅读它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T18:21:39.467

你当然不能停止插入/更新加锁，事情很快就会出错。您可以在读取操作上设置隔离级别以表示未提交读取，或者将其指定为选择中的提示。它们只是提示，如果存在丢失数据完整性的风险，而不是简单地返回脏数据（并且有很多陷阱），dbms 将完全正确地忽略它们。您可以做其他事情，但是如果您认真的话，请在其中获得一个sql server dba，这种事情已经超出了天才的业余水平，更不用说新手了。

# java - java中的浮点数和双精度数有多少位有效数字？

> ID：13542944
> 
> 赞同：86
> 
> 时间：2012-11-24T16:09:52.573
> 
> 标签：java, floating-point

浮点数是否有 32 个二进制数字，双精度数是否有 64 个二进制数字？文档太难理解了。

所有位都转换为有效数字吗？还是小数点的位置占用了一些位？

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2012-11-24T17:22:04.000

**float**：**32 位**（4 个字节），其中**23 位**用于尾数（大约 7 个十进制数字）。8 位用于指数，因此浮点数可以使用这 8 位将小数点向右或向左“移动”。这样做可以避免在尾数中存储大量零，如 0.0000003 (3 × 10 ^(-7) ) 或 3000000 (3 × 10 ⁷ )。有 1 位用作符号位。

**double**：**64 位**（8 字节），其中**52 位**用于尾数（大约 16 个十进制数字）。11 位用于指数，1 位是符号位。

由于我们使用二进制（只有 0 和 1），所以当数字非零时，尾数中的一位隐含为 1（浮点数和双精度数都使用此技巧）。

此外，由于所有内容都是二进制（尾数和指数），因此转换为十进制数通常不准确。像 0.5、0.25、0.75、0.125 这样的数字被精确存储，但 0.1 不是。正如其他人所说，如果您需要精确存储美分，请不要使用 float 或 double，使用 int、long、BigInteger 或 BigDecimal。

资料来源：

[http://en.wikipedia.org/wiki/Floating_point#IEEE_754:_floating_point_in_modern_computers](http://en.wikipedia.org/wiki/Floating_point#IEEE_754:_floating_point_in_modern_computers)

[http://en.wikipedia.org/wiki/Binary64](http://en.wikipedia.org/wiki/Binary64)

[http://en.wikipedia.org/wiki/Binary32](http://en.wikipedia.org/wiki/Binary32)

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2018-06-16T04:42:16.573

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-11-24T16:11:13.547

来自[java规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.2.3)：

> 浮点类型为 float 和 double，它们在概念上与 IEEE 二进制浮点算术标准、ANSI/IEEE 中指定的单精度 32 位和双精度 64 位格式 IEEE 754 值和运算相关联标准 754-1985（IEEE，纽约）。

由于在不了解 IEEE754 基础知识的情况下很难对数字做任何事情，这里有[另一个链接](http://en.wikipedia.org/wiki/IEEE_floating_point)。

重要的是要了解精度不是统一的，并且这不是对整数的精确存储。

一个例子 ：

```
double a = 0.3 - 0.1;
System.out.println(a); 
```

印刷

```
0.19999999999999998 
```

如果您需要任意精度（例如出于财务目的），您可能需要[Big Decimal](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigDecimal.html)。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-11-24T16:30:23.293

一个普通的数学答案。

了解浮点数被实现为一些表示指数的位和其余部分，大多数用于数字（在二进制系统中），有以下情况：

使用高指数，例如 10²³，如果最低有效位发生变化，则两个相邻可区分数字之间会出现很大差异。此外，以 2 为底的小数点使得许多以 10 为底的数字只能近似；1/5、1/10 是无穷无尽的数字。

所以*一般来说*：如果您关心有效数字，则不应使用浮点数。对于计算金额，e,a，最好使用**BigDecimal**。

对于*物理*浮点**双打**就足够了，几乎从不**浮动。**此外，处理器的浮点部分 FPU 甚至可以在内部使用更高的精度。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-11-24T16:26:58.340

浮点数使用指数形式编码，类似于`m * b ^ e`，即根本不像整数。[您提出的问题在定点数](http://en.wikipedia.org/wiki/Fixed-point_arithmetic)的上下文中是有意义的。有许多可用的[定点算术库](http://sourceforge.net/projects/jmfp/)。

关于浮点运算：小数位数取决于表示和数字系统。例如，周期数 ( `0.33333`) 没有十进制的有限表示，但有二进制表示，反之亦然。

另外值得一提的是，直到某个点的浮点数确实有大于 1 的差异，即`value + 1`产量`value`，因为`value + 1`不能使用`m * b ^ e`、 where和 进行编码`m`，`b`并且`e`长度是固定的。对于小于 1 的值也会发生同样的情况，即所有可能的代码点的距离都不相同。

因此，没有像定点数那样精确的`n`数字精度，因为并非每个带有`n`十进制数字的数字都具有 IEEE 编码。

您应该阅读一份几乎强制性的文档，其中解释了浮点数： [每个计算机科学家都应该了解浮点运算](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-24T16:33:58.763

查看[`Float.intBitsToFloat`](http://docs.oracle.com/javase/6/docs/api/java/lang/Float.html#intBitsToFloat%28int%29)和[`Double.longBitsToDouble`](http://docs.oracle.com/javase/6/docs/api/java/lang/Double.html#longBitsToDouble%28long%29)，它解释了位如何对应于浮点数。特别是，正常的位`float`看起来像

```
 s * 2^exp * 1.ABCDEFGHIJKLMNOPQRSTUVW 
```

其中 A...W 是 23 位 - 0 和 1 - 表示二进制小数 - s 是 +/- 1，分别由 0 或 1 表示，exp 是有符号的 8 位整数。

# regex - 在正则表达式中支持 \K

> ID：13542950
> 
> 赞同：51
> 
> 时间：2012-11-24T16:10:27.777
> 
> 标签：regex

转义序列将`\K`匹配的开头重置为标记列表中的当前位置（这只影响报告为完整匹配的内容）。

哪些环境/语言/版本`\K`在其正则表达式引擎中支持（保留）以及需要哪些库（如果有）在模式中使用此功能？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-11-24T16:20:57.520

多个引擎、语言或工具支持转义序列，`\K`例如：

*   提升（因为？？？）
*   grep -P                                                      *← 使用 PCRE*
*   Oniguruma（[自 5.13.3 起](https://github.com/k-takata/Onigmo/blob/master/README)）
*   PCRE（[自 7.2 起](http://en.wikipedia.org/wiki/Perl_Compatible_Regular_Expressions)）
*   Perl（[从 5.10.0 开始](http://search.cpan.org/~rgarcia/perl/pod/perl5100delta.pod)）
*   PHP（[自 5.2.4 起](http://php.net/manual/en/regexp.reference.escape.php)）
*   红宝石（自 2.0.0 起）
*   记事本++（从 6.0 开始）

...并且（到目前为止）不受以下支持：

*   [。网](https://stackoverflow.com/questions/3417644/translate-perl-regex-to-net)
*   awk
*   重击
*   [重症监护室](http://userguide.icu-project.org/strings/regexp)
*   [爪哇](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)
*   Javascript
*   Objective-C
*   POSIX
*   Python
*   Qt/QRegExp
*   sed
*   Tcl
*   vim         *← 它没有 \K，但它的 \zs 是等价的*
*   XML
*   XPath

# xml - Perl - 我如何计算包含几个 xml 开始和结束标签的 XML 文件中的一些标签

> ID：13542960
> 
> 赞同：0
> 
> 时间：2012-11-24T16:11:37.690
> 
> 标签：xml, perl, parsing, tags

我有一个这样的 XML 文件。

文件的每一行都以一个`process_info`标签开始和结束。该文件可以包含许多这样的行，可能有许多类似的文件。

```
<process_info><module>pe_gw_a</module><result code="3">D14 - Calls *144</result><data><input><event_data origin_id="asn1"><CallType>moc</CallType><OtherParty ton="2" npi="1" int_code="55">55009999999991222</OtherParty><OtherLocation>55009999999991222</OtherLocation><IntCodeCallingPartyNumber>55</IntCodeCallingPartyNumber><IntCodeServedParty>55</IntCodeServedParty><TicketType>0</TicketType><original_cdr FILENAME="TIM+ZGNA01-99703-1211241250-D.TTF"><Report>FILE=/gold/rte/data/IncomingCDRs/ASN1/010/TIM+ZGNA01-99703-1211241250-D.TTF;TICKET=6</Report><CDRType>1</CDRType><networkCallReference>29722352746</networkCallReference><switchIdentity>7274</switchIdentity><originatedCode>1</originatedCode><subscriptionType>1</subscriptionType><speechCoderPreferenceList>2010005030</speechCoderPreferenceList><radioChannelProperty>30</radioChannelProperty><incomingAssignedRoute>BGNA05N</incomingAssignedRoute><translatedNumber>12#222</translatedNumber><miscellaneousInformation>0</miscellaneousInformation><incomingRoute>BGNA05N</incomingRoute><outgoingRoute>ZBSA1CO</outgoingRoute><mSCIdentification>11556281138800</mSCIdentification><exchangeIdentity>ZGNA01</exchangeIdentity><tariffClass>0010</tariffClass><chargingCase>1</chargingCase><originForCharging>62</originForCharging><chargedParty>00</chargedParty><timeFromRegisterSeizureToStartOfCharging>0</timeFromRegisterSeizureToStartOfCharging><interruptionTime>0</interruptionTime><chargeableDuration>5</chargeableDuration><timeForStopOfCharge>194949</timeForStopOfCharge><timeForStartOfCharge>194944</timeForStartOfCharge><dateForStartOfCharge>20121123</dateForStartOfCharge><disconnectingParty>00</disconnectingParty><calledPartyNumber>12#222</calledPartyNumber><callingSubscriberIMEI>355921042890190</callingSubscriberIMEI><callingSubscriberIMSI>724046008971498</callingSubscriberIMSI><callingPartyNumber>11556281020633</callingPartyNumber><typeOfCallingSubscriber>10</typeOfCallingSubscriber><recordSequenceNumber>2987070</recordSequenceNumber><callIdentificationNumber>1362570</callIdentificationNumber><tAC>721421</tAC><internalCauseAndLoc>3</internalCauseAndLoc><eosInfo>00</eosInfo><callPosition>30</callPosition><firstRadioChannelUsed>00</firstRadioChannelUsed><gSMTeleServiceCode>17</gSMTeleServiceCode><cellIDForLastCellCalling>724046213C64F8A</cellIDForLastCellCalling><cellIDFor1stCellCalling>7240400C64F8A</cellIDFor1stCellCalling><timeForTCSeizureCalling>194943</timeForTCSeizureCalling></original_cdr><TypeOfCommunication>voi</TypeOfCommunication><MSC_ID>11556281138800</MSC_ID><CallStart>20121123194944</CallStart><CallDuration>5</CallDuration><CallDuration_30_inf>30</CallDuration_30_inf><CallDuration_60_inf>60</CallDuration_60_inf><CallDuration_MC>30</CallDuration_MC><CallDuration_30_60>30</CallDuration_30_60><ServedParty ton="1" npi="1" int_code="55">556281020633</ServedParty><ServedLocation>7240462</ServedLocation><ScenarioName>NA</ScenarioName><ServedZone>ZO00031</ServedZone><OtherZone>ZP30158</OtherZone></event_data><dupChk></dupChk><account map_type="2">556281020633</account><other_account map_type="2">55#222</other_account><operation alternate_rating="1" type="charge"/><transaction id="0000000050B0DE9C-0000DB98-00002876-62F2B0C6"><Report>FILE=/gold/rte/data/IncomingCDRs/ASN1/010/TIM+ZGNA01-99703-1211241250-D.TTF;TICKET=6</Report></transaction><start>20121123194944</start></input></data><filename>/gold/rte/data/IncomingCDRs/ASN1/010/TIM+ZGNA01-99703-1211241250-D.TTF</filename><index_into_file>6</index_into_file></process_info>
<process_info><module>pe_gw_a</module><result code="707">Error on CDR level; File processing continued.</result><data><file_info result="partial">CDR-Counter: (IN=16, BAD=0): (NORM_ERR=0 DUP_ERR=0, RAL_ERR=0), DUPLICATE=1, DISCARDED=0, OK=15</file_info></data><filename>/gold/rte/data/IncomingCDRs/ASN1/010/TKM_SMS+STKM01-28129-1211241251-A.TTF</filename></process_info>
<process_info><module>pe_gw_a</module><result code="705">Duplicate CDR</result><data><input><event_data origin_id="asn1"><CallType>mosms</CallType><OtherParty ton="1" npi="1" int_code="55">556291860209</OtherParty><OtherLocation>55006234191860209</OtherLocation><IntCodeCallingPartyNumber>55</IntCodeCallingPartyNumber><IntCodeOtherParty>55</IntCodeOtherParty><IntCodeServedParty>55</IntCodeServedParty><TicketType>0</TicketType><original_cdr FILENAME="TKM_SMS+STKM01-28129-1211241251-A.TTF"><Report>FILE=/gold/rte/data/IncomingCDRs/ASN1/010/TKM_SMS+STKM01-28129-1211241251-A.TTF;TICKET=15</Report><CDRType>5</CDRType><serviceCentreAddress>11556291860209</serviceCentreAddress><miscellaneousInformation>41</miscellaneousInformation><gSMTeleServiceCode>34</gSMTeleServiceCode><cellIDFor1stCellCalling>7240462003E0000</cellIDFor1stCellCalling><mSCIdentification>11551189848200</mSCIdentification><exchangeIdentity>STKM01</exchangeIdentity><originForCharging>62</originForCharging><chargedParty>00</chargedParty><timeForStartOfCharge>124619</timeForStartOfCharge><dateForStartOfCharge>20121124</dateForStartOfCharge><callingSubscriberIMSI>724046012529641</callingSubscriberIMSI><callingPartyNumber>11556282361092</callingPartyNumber></original_cdr><TypeOfCommunication>sms</TypeOfCommunication><CallDuration>0.9</CallDuration><CallStart>20121124124619</CallStart><MSC_ID>11551189848200</MSC_ID><ServedParty int_code="55" ton="1" npi="1">556282361092</ServedParty><ServedLocation>7240462</ServedLocation><ScenarioName>Sms_SMS___TIM_TIM</ScenarioName><ServedZone>ZO00031</ServedZone><OtherZone>ZP37744</OtherZone></event_data><dupChk></dupChk><account map_type="2">556282361092</account><other_account map_type="2">556291860209</other_account><operation alternate_rating="1" type="charge"/><transaction id="0000000050B0DE9D-0000DBC9-00002876-62F2B0C6"><Report>FILE=/gold/rte/data/IncomingCDRs/ASN1/010/TKM_SMS+STKM01-28129-1211241251-A.TTF;TICKET=15</Report></transaction><start>20121124124619</start></input></data><filename>/gold/rte/data/IncomingCDRs/ASN1/010/TKM_SMS+STKM01-28129-1211241251-A.TTF</filename><index_into_file>15</index_into_file></process_info>
<process_info><module>pe_gw_a</module><result code="3">D14 - Calls *144</result><data><input><event_data origin_id="asn1"><CallType>moc</CallType><OtherParty ton="2" npi="1" int_code="55">55009999999991144</OtherParty><OtherLocation>55009999999991144</OtherLocation><IntCodeCallingPartyNumber>55</IntCodeCallingPartyNumber><IntCodeServedParty>55</IntCodeServedParty><TicketType>0</TicketType><original_cdr FILENAME="TMX+ZBHE01-95068-1211241251-AG.TTF"><Report>FILE=/gold/rte/data/IncomingCDRs/ASN1/010/TMX+ZBHE01-95068-1211241251-AG.TTF;TICKET=6</Report><CDRType>1</CDRType><networkCallReference>447382755812</networkCallReference><switchIdentity>6628</switchIdentity><originatedCode>1</originatedCode><subscriptionType>21</subscriptionType><speechCoderPreferenceList>2010005030</speechCoderPreferenceList><radioChannelProperty>30</radioChannelProperty><incomingAssignedRoute>BMCL01B</incomingAssignedRoute><translatedNumber>12#144</translatedNumber><originatingLocationNumber>11553191938800</originatingLocationNumber><miscellaneousInformation>0</miscellaneousInformation><incomingRoute>BMCL01B</incomingRoute><outgoingRoute>XMCL1AO</outgoingRoute><mSCIdentification>11553191938800</mSCIdentification><exchangeIdentity>ZBHE01</exchangeIdentity><tariffClass>0010</tariffClass><chargingCase>1</chargingCase><originForCharging>38</originForCharging><chargedParty>00</chargedParty><timeFromRegisterSeizureToStartOfCharging>4</timeFromRegisterSeizureToStartOfCharging><interruptionTime>0</interruptionTime><chargeableDuration>426</chargeableDuration><timeForStopOfCharge>182128</timeForStopOfCharge><timeForStartOfCharge>181421</timeForStartOfCharge><dateForStartOfCharge>20121123</dateForStartOfCharge><disconnectingParty>00</disconnectingParty><calledPartyNumber>12#144</calledPartyNumber><callingSubscriberIMEI>358855043501160</callingSubscriberIMEI><callingSubscriberIMSI>724023016557605</callingSubscriberIMSI><callingPartyNumber>11553891610047</callingPartyNumber><typeOfCallingSubscriber>10</typeOfCallingSubscriber><recordSequenceNumber>1489944</recordSequenceNumber><callIdentificationNumber>11705419</callIdentificationNumber><tAC>721421</tAC><internalCauseAndLoc>3</internalCauseAndLoc><eosInfo>00</eosInfo><callPosition>30</callPosition><firstRadioChannelUsed>00</firstRadioChannelUsed><gSMTeleServiceCode>17</gSMTeleServiceCode><cellIDForLastCellCalling>7240238279ADEE5</cellIDForLastCellCalling><cellIDFor1stCellCalling>72402009ADEE5</cellIDFor1stCellCalling><timeForTCSeizureCalling>181417</timeForTCSeizureCalling></original_cdr><TypeOfCommunication>voi</TypeOfCommunication><MSC_ID>11553191938800</MSC_ID><CallStart>20121123181421</CallStart><CallDuration>426</CallDuration><CallDuration_30_inf>426</CallDuration_30_inf><CallDuration_60_inf>426</CallDuration_60_inf><CallDuration_MC>426</CallDuration_MC><CallDuration_30_60>60</CallDuration_30_60><ServedParty ton="1" npi="1" int_code="55">553891610047</ServedParty><ServedLocation>7240238</ServedLocation><ScenarioName>NA</ScenarioName><ServedZone>ZO00461</ServedZone><OtherZone>ZP30411</OtherZone></event_data><dupChk></dupChk><account map_type="2">553891610047</account><other_account map_type="2">55#144</other_account><operation alternate_rating="1" type="charge"/><transaction id="0000000050B0DEA8-0000DBE8-00002876-62F2B0C6"><Report>FILE=/gold/rte/data/IncomingCDRs/ASN1/010/TMX+ZBHE01-95068-1211241251-AG.TTF;TICKET=6</Report></transaction><start>20121123181421</start></input></data><filename>/gold/rte/data/IncomingCDRs/ASN1/010/TMX+ZBHE01-95068-1211241251-AG.TTF</filename><index_into_file>6</index_into_file></process_info> 
```

我想记录`result`元素的所有不同值，所以我的输出将是这样的：

“D14 - 调用 *144”计数 2
“重复 CDR”计数 1
“CDR 级别错误；文件处理继续。” 计数 1

我该怎么办？我想使用`XML:Twig`or `XML:Parser`，但由于文件中有许多开始/结束标签，我无法找出解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T18:12:57.830

使用任何 Perl XML 模块都可以方便地完成此操作，但既然您提到[`XML::Twig`](https://metacpan.org/module/XML%3a%3aTwig)了 ，这就是我在此解决方案中使用的。

您说可能有许多类似的 XML 文件，但没有说明如何识别它们，所以我所能做的就是为您提供单个文件的解决方案，并希望您可以从这里推断。

该程序通过逐行读取文件，将每一行解析为单独的 XML 文档，并提取具有`result`标记的根文档的第一个子元素的文本值来工作。此文本值用作哈希键以跟踪每个不同结果的出现次数。

```
use strict;
use warnings;

use XML::Twig;

my $twig = XML::Twig->new;

my %results;

open my $fh, '<', 'my.xml' or die $!;

while (<$fh>) {
  $twig->parse($_);
  my $result = $twig->root->first_child('result');
  if ($result) {
    $result = $result->trimmed_text;
    $results{$result}++;
  }
}

for (sort keys %results) {
  my $n = $results{$_};
  printf qq("%s" count %d\n), $_, $n;
} 
```

**输出**

```
"D14 - Calls *144" count 2
"Duplicate CDR" count 1
"Error on CDR level; File processing continued." count 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T17:17:28.830

您可以使用 Mojolicious 套件中出色的 DOM 解析器[Mojo::DOM](http://mojolicio.us/perldoc/Mojo/DOM)来计算这些。这很简单。使用哈希 ( `%count`) 来跟踪您找到结果的频率。这是这类问题的典型 Perl 习惯用法。

```
#!/usr/bin/env perl

use strict;
use warnings;
use feature 'say';
use Mojo::DOM;

# read all input lines at once
my $dom = Mojo::DOM->new(do {local $/; <DATA>});

# prepare count hash
my %count = ();

# iterate result elements
$dom->find('result')->each(sub {
    my $element = shift;
    $count{$element->text}++;
});

# output
say "$_: $count{$_}" for keys %count;

__DATA__
<process_info><module>pe_gw_a</module><result code="3">D14 - Calls *144</result><data><input><event_data origin_id="asn1"><CallType>moc</CallType><OtherParty ton="2" npi="1" int_code="55">55009999999991222</OtherParty><OtherLocation>55009999999991222</OtherLocation><IntCodeCallingPartyNumber>55</IntCodeCallingPartyNumber><IntCodeServedParty>55</IntCodeServedParty><TicketType>0</TicketType><original_cdr FILENAME="TIM+ZGNA01-99703-1211241250-D.TTF"><Report>FILE=/gold/rte/data/IncomingCDRs/ASN1/010/TIM+ZGNA01-99703-1211241250-D.TTF;TICKET=6</Report><CDRType>1</CDRType><networkCallReference>29722352746</networkCallReference><switchIdentity>7274</switchIdentity><originatedCode>1</originatedCode><subscriptionType>1</subscriptionType><speechCoderPreferenceList>2010005030</speechCoderPreferenceList><radioChannelProperty>30</radioChannelProperty><incomingAssignedRoute>BGNA05N</incomingAssignedRoute><translatedNumber>12#222</translatedNumber><miscellaneousInformation>0</miscellaneousInformation><incomingRoute>BGNA05N</incomingRoute><outgoingRoute>ZBSA1CO</outgoingRoute><mSCIdentification>11556281138800</mSCIdentification><exchangeIdentity>ZGNA01</exchangeIdentity><tariffClass>0010</tariffClass><chargingCase>1</chargingCase><originForCharging>62</originForCharging><chargedParty>00</chargedParty><timeFromRegisterSeizureToStartOfCharging>0</timeFromRegisterSeizureToStartOfCharging><interruptionTime>0</interruptionTime><chargeableDuration>5</chargeableDuration><timeForStopOfCharge>194949</timeForStopOfCharge><timeForStartOfCharge>194944</timeForStartOfCharge><dateForStartOfCharge>20121123</dateForStartOfCharge><disconnectingParty>00</disconnectingParty><calledPartyNumber>12#222</calledPartyNumber><callingSubscriberIMEI>355921042890190</callingSubscriberIMEI><callingSubscriberIMSI>724046008971498</callingSubscriberIMSI><callingPartyNumber>11556281020633</callingPartyNumber><typeOfCallingSubscriber>10</typeOfCallingSubscriber><recordSequenceNumber>2987070</recordSequenceNumber><callIdentificationNumber>1362570</callIdentificationNumber><tAC>721421</tAC><internalCauseAndLoc>3</internalCauseAndLoc><eosInfo>00</eosInfo><callPosition>30</callPosition><firstRadioChannelUsed>00</firstRadioChannelUsed><gSMTeleServiceCode>17</gSMTeleServiceCode><cellIDForLastCellCalling>724046213C64F8A</cellIDForLastCellCalling><cellIDFor1stCellCalling>7240400C64F8A</cellIDFor1stCellCalling><timeForTCSeizureCalling>194943</timeForTCSeizureCalling></original_cdr><TypeOfCommunication>voi</TypeOfCommunication><MSC_ID>11556281138800</MSC_ID><CallStart>20121123194944</CallStart><CallDuration>5</CallDuration><CallDuration_30_inf>30</CallDuration_30_inf><CallDuration_60_inf>60</CallDuration_60_inf><CallDuration_MC>30</CallDuration_MC><CallDuration_30_60>30</CallDuration_30_60><ServedParty ton="1" npi="1" int_code="55">556281020633</ServedParty><ServedLocation>7240462</ServedLocation><ScenarioName>NA</ScenarioName><ServedZone>ZO00031</ServedZone><OtherZone>ZP30158</OtherZone></event_data><dupChk></dupChk><account map_type="2">556281020633</account><other_account map_type="2">55#222</other_account><operation alternate_rating="1" type="charge"/><transaction id="0000000050B0DE9C-0000DB98-00002876-62F2B0C6"><Report>FILE=/gold/rte/data/IncomingCDRs/ASN1/010/TIM+ZGNA01-99703-1211241250-D.TTF;TICKET=6</Report></transaction><start>20121123194944</start></input></data><filename>/gold/rte/data/IncomingCDRs/ASN1/010/TIM+ZGNA01-99703-1211241250-D.TTF</filename><index_into_file>6</index_into_file></process_info>
<process_info><module>pe_gw_a</module><result code="707">Error on CDR level; File processing continued.</result><data><file_info result="partial">CDR-Counter: (IN=16, BAD=0): (NORM_ERR=0 DUP_ERR=0, RAL_ERR=0), DUPLICATE=1, DISCARDED=0, OK=15</file_info></data><filename>/gold/rte/data/IncomingCDRs/ASN1/010/TKM_SMS+STKM01-28129-1211241251-A.TTF</filename></process_info>
<process_info><module>pe_gw_a</module><result code="705">Duplicate CDR</result><data><input><event_data origin_id="asn1"><CallType>mosms</CallType><OtherParty ton="1" npi="1" int_code="55">556291860209</OtherParty><OtherLocation>55006234191860209</OtherLocation><IntCodeCallingPartyNumber>55</IntCodeCallingPartyNumber><IntCodeOtherParty>55</IntCodeOtherParty><IntCodeServedParty>55</IntCodeServedParty><TicketType>0</TicketType><original_cdr FILENAME="TKM_SMS+STKM01-28129-1211241251-A.TTF"><Report>FILE=/gold/rte/data/IncomingCDRs/ASN1/010/TKM_SMS+STKM01-28129-1211241251-A.TTF;TICKET=15</Report><CDRType>5</CDRType><serviceCentreAddress>11556291860209</serviceCentreAddress><miscellaneousInformation>41</miscellaneousInformation><gSMTeleServiceCode>34</gSMTeleServiceCode><cellIDFor1stCellCalling>7240462003E0000</cellIDFor1stCellCalling><mSCIdentification>11551189848200</mSCIdentification><exchangeIdentity>STKM01</exchangeIdentity><originForCharging>62</originForCharging><chargedParty>00</chargedParty><timeForStartOfCharge>124619</timeForStartOfCharge><dateForStartOfCharge>20121124</dateForStartOfCharge><callingSubscriberIMSI>724046012529641</callingSubscriberIMSI><callingPartyNumber>11556282361092</callingPartyNumber></original_cdr><TypeOfCommunication>sms</TypeOfCommunication><CallDuration>0.9</CallDuration><CallStart>20121124124619</CallStart><MSC_ID>11551189848200</MSC_ID><ServedParty int_code="55" ton="1" npi="1">556282361092</ServedParty><ServedLocation>7240462</ServedLocation><ScenarioName>Sms_SMS___TIM_TIM</ScenarioName><ServedZone>ZO00031</ServedZone><OtherZone>ZP37744</OtherZone></event_data><dupChk></dupChk><account map_type="2">556282361092</account><other_account map_type="2">556291860209</other_account><operation alternate_rating="1" type="charge"/><transaction id="0000000050B0DE9D-0000DBC9-00002876-62F2B0C6"><Report>FILE=/gold/rte/data/IncomingCDRs/ASN1/010/TKM_SMS+STKM01-28129-1211241251-A.TTF;TICKET=15</Report></transaction><start>20121124124619</start></input></data><filename>/gold/rte/data/IncomingCDRs/ASN1/010/TKM_SMS+STKM01-28129-1211241251-A.TTF</filename><index_into_file>15</index_into_file></process_info>
<process_info><module>pe_gw_a</module><result code="3">D14 - Calls *144</result><data><input><event_data origin_id="asn1"><CallType>moc</CallType><OtherParty ton="2" npi="1" int_code="55">55009999999991144</OtherParty><OtherLocation>55009999999991144</OtherLocation><IntCodeCallingPartyNumber>55</IntCodeCallingPartyNumber><IntCodeServedParty>55</IntCodeServedParty><TicketType>0</TicketType><original_cdr FILENAME="TMX+ZBHE01-95068-1211241251-AG.TTF"><Report>FILE=/gold/rte/data/IncomingCDRs/ASN1/010/TMX+ZBHE01-95068-1211241251-AG.TTF;TICKET=6</Report><CDRType>1</CDRType><networkCallReference>447382755812</networkCallReference><switchIdentity>6628</switchIdentity><originatedCode>1</originatedCode><subscriptionType>21</subscriptionType><speechCoderPreferenceList>2010005030</speechCoderPreferenceList><radioChannelProperty>30</radioChannelProperty><incomingAssignedRoute>BMCL01B</incomingAssignedRoute><translatedNumber>12#144</translatedNumber><originatingLocationNumber>11553191938800</originatingLocationNumber><miscellaneousInformation>0</miscellaneousInformation><incomingRoute>BMCL01B</incomingRoute><outgoingRoute>XMCL1AO</outgoingRoute><mSCIdentification>11553191938800</mSCIdentification><exchangeIdentity>ZBHE01</exchangeIdentity><tariffClass>0010</tariffClass><chargingCase>1</chargingCase><originForCharging>38</originForCharging><chargedParty>00</chargedParty><timeFromRegisterSeizureToStartOfCharging>4</timeFromRegisterSeizureToStartOfCharging><interruptionTime>0</interruptionTime><chargeableDuration>426</chargeableDuration><timeForStopOfCharge>182128</timeForStopOfCharge><timeForStartOfCharge>181421</timeForStartOfCharge><dateForStartOfCharge>20121123</dateForStartOfCharge><disconnectingParty>00</disconnectingParty><calledPartyNumber>12#144</calledPartyNumber><callingSubscriberIMEI>358855043501160</callingSubscriberIMEI><callingSubscriberIMSI>724023016557605</callingSubscriberIMSI><callingPartyNumber>11553891610047</callingPartyNumber><typeOfCallingSubscriber>10</typeOfCallingSubscriber><recordSequenceNumber>1489944</recordSequenceNumber><callIdentificationNumber>11705419</callIdentificationNumber><tAC>721421</tAC><internalCauseAndLoc>3</internalCauseAndLoc><eosInfo>00</eosInfo><callPosition>30</callPosition><firstRadioChannelUsed>00</firstRadioChannelUsed><gSMTeleServiceCode>17</gSMTeleServiceCode><cellIDForLastCellCalling>7240238279ADEE5</cellIDForLastCellCalling><cellIDFor1stCellCalling>72402009ADEE5</cellIDFor1stCellCalling><timeForTCSeizureCalling>181417</timeForTCSeizureCalling></original_cdr><TypeOfCommunication>voi</TypeOfCommunication><MSC_ID>11553191938800</MSC_ID><CallStart>20121123181421</CallStart><CallDuration>426</CallDuration><CallDuration_30_inf>426</CallDuration_30_inf><CallDuration_60_inf>426</CallDuration_60_inf><CallDuration_MC>426</CallDuration_MC><CallDuration_30_60>60</CallDuration_30_60><ServedParty ton="1" npi="1" int_code="55">553891610047</ServedParty><ServedLocation>7240238</ServedLocation><ScenarioName>NA</ScenarioName><ServedZone>ZO00461</ServedZone><OtherZone>ZP30411</OtherZone></event_data><dupChk></dupChk><account map_type="2">553891610047</account><other_account map_type="2">55#144</other_account><operation alternate_rating="1" type="charge"/><transaction id="0000000050B0DEA8-0000DBE8-00002876-62F2B0C6"><Report>FILE=/gold/rte/data/IncomingCDRs/ASN1/010/TMX+ZBHE01-95068-1211241251-AG.TTF;TICKET=6</Report></transaction><start>20121123181421</start></input></data><filename>/gold/rte/data/IncomingCDRs/ASN1/010/TMX+ZBHE01-95068-1211241251-AG.TTF</filename><index_into_file>6</index_into_file></process_info> 
```

输出：

```
Duplicate CDR: 1
Error on CDR level; File processing continued.: 1
D14 - Calls *144: 2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T02:21:39.380

您可以使用 XML::SAX::PurePerl，它**非常**防故障，并且根据我的经验，可以很好地处理混乱的 XML：

```
#!/usr/bin/env perl
package Result::Extractor;
use strict;
use warnings qw(all);

use base qw(XML::SAX::Base);

sub new {
    return bless {
        count   => {},
        data    => '',
    };
}

sub start_element {
    my ($self, $el) = @_;
    $self->{data} = '';
}

sub end_element {
    my ($self, $el) = @_;
    if ($el->{Name} eq 'result') {
        ++$self->{count}{$self->{data}};
    }
}

sub characters {
    my ($self, $data) = @_;
    $self->{data} .= $data->{Data};
}

1;

package main;
use strict;
use warnings qw(all);

use Data::Printer;
use XML::SAX::PurePerl;

my $handler = Result::Extractor->new;
my $parser = XML::SAX::PurePerl->new(Handler => $handler);

$parser->parse_string(do { local $/; '<wrapper>' . <DATA> . '</wrapper>' });

p $handler->{count};

__DATA__
<process_info><module>pe_gw_a</module><result code="3">D14 - Calls *144</result><data><input><event_data origin_id="asn1"><CallType>moc</CallType><OtherParty ton="2" npi="1" int_code="55">55009999999991222</OtherParty><OtherLocation>55009999999991222</OtherLocation><IntCodeCallingPartyNumber>55</IntCodeCallingPartyNumber><IntCodeServedParty>55</IntCodeServedParty><TicketType>0</TicketType><original_cdr FILENAME="TIM+ZGNA01-99703-1211241250-D.TTF"><Report>FILE=/gold/rte/data/IncomingCDRs/ASN1/010/TIM+ZGNA01-99703-1211241250-D.TTF;TICKET=6</Report><CDRType>1</CDRType><networkCallReference>29722352746</networkCallReference><switchIdentity>7274</switchIdentity><originatedCode>1</originatedCode><subscriptionType>1</subscriptionType><speechCoderPreferenceList>2010005030</speechCoderPreferenceList><radioChannelProperty>30</radioChannelProperty><incomingAssignedRoute>BGNA05N</incomingAssignedRoute><translatedNumber>12#222</translatedNumber><miscellaneousInformation>0</miscellaneousInformation><incomingRoute>BGNA05N</incomingRoute><outgoingRoute>ZBSA1CO</outgoingRoute><mSCIdentification>11556281138800</mSCIdentification><exchangeIdentity>ZGNA01</exchangeIdentity><tariffClass>0010</tariffClass><chargingCase>1</chargingCase><originForCharging>62</originForCharging><chargedParty>00</chargedParty><timeFromRegisterSeizureToStartOfCharging>0</timeFromRegisterSeizureToStartOfCharging><interruptionTime>0</interruptionTime><chargeableDuration>5</chargeableDuration><timeForStopOfCharge>194949</timeForStopOfCharge><timeForStartOfCharge>194944</timeForStartOfCharge><dateForStartOfCharge>20121123</dateForStartOfCharge><disconnectingParty>00</disconnectingParty><calledPartyNumber>12#222</calledPartyNumber><callingSubscriberIMEI>355921042890190</callingSubscriberIMEI><callingSubscriberIMSI>724046008971498</callingSubscriberIMSI><callingPartyNumber>11556281020633</callingPartyNumber><typeOfCallingSubscriber>10</typeOfCallingSubscriber><recordSequenceNumber>2987070</recordSequenceNumber><callIdentificationNumber>1362570</callIdentificationNumber><tAC>721421</tAC><internalCauseAndLoc>3</internalCauseAndLoc><eosInfo>00</eosInfo><callPosition>30</callPosition><firstRadioChannelUsed>00</firstRadioChannelUsed><gSMTeleServiceCode>17</gSMTeleServiceCode><cellIDForLastCellCalling>724046213C64F8A</cellIDForLastCellCalling><cellIDFor1stCellCalling>7240400C64F8A</cellIDFor1stCellCalling><timeForTCSeizureCalling>194943</timeForTCSeizureCalling></original_cdr><TypeOfCommunication>voi</TypeOfCommunication><MSC_ID>11556281138800</MSC_ID><CallStart>20121123194944</CallStart><CallDuration>5</CallDuration><CallDuration_30_inf>30</CallDuration_30_inf><CallDuration_60_inf>60</CallDuration_60_inf><CallDuration_MC>30</CallDuration_MC><CallDuration_30_60>30</CallDuration_30_60><ServedParty ton="1" npi="1" int_code="55">556281020633</ServedParty><ServedLocation>7240462</ServedLocation><ScenarioName>NA</ScenarioName><ServedZone>ZO00031</ServedZone><OtherZone>ZP30158</OtherZone></event_data><dupChk></dupChk><account map_type="2">556281020633</account><other_account map_type="2">55#222</other_account><operation alternate_rating="1" type="charge"/><transaction id="0000000050B0DE9C-0000DB98-00002876-62F2B0C6"><Report>FILE=/gold/rte/data/IncomingCDRs/ASN1/010/TIM+ZGNA01-99703-1211241250-D.TTF;TICKET=6</Report></transaction><start>20121123194944</start></input></data><filename>/gold/rte/data/IncomingCDRs/ASN1/010/TIM+ZGNA01-99703-1211241250-D.TTF</filename><index_into_file>6</index_into_file></process_info>
<process_info><module>pe_gw_a</module><result code="707">Error on CDR level; File processing continued.</result><data><file_info result="partial">CDR-Counter: (IN=16, BAD=0): (NORM_ERR=0 DUP_ERR=0, RAL_ERR=0), DUPLICATE=1, DISCARDED=0, OK=15</file_info></data><filename>/gold/rte/data/IncomingCDRs/ASN1/010/TKM_SMS+STKM01-28129-1211241251-A.TTF</filename></process_info>
<process_info><module>pe_gw_a</module><result code="705">Duplicate CDR</result><data><input><event_data origin_id="asn1"><CallType>mosms</CallType><OtherParty ton="1" npi="1" int_code="55">556291860209</OtherParty><OtherLocation>55006234191860209</OtherLocation><IntCodeCallingPartyNumber>55</IntCodeCallingPartyNumber><IntCodeOtherParty>55</IntCodeOtherParty><IntCodeServedParty>55</IntCodeServedParty><TicketType>0</TicketType><original_cdr FILENAME="TKM_SMS+STKM01-28129-1211241251-A.TTF"><Report>FILE=/gold/rte/data/IncomingCDRs/ASN1/010/TKM_SMS+STKM01-28129-1211241251-A.TTF;TICKET=15</Report><CDRType>5</CDRType><serviceCentreAddress>11556291860209</serviceCentreAddress><miscellaneousInformation>41</miscellaneousInformation><gSMTeleServiceCode>34</gSMTeleServiceCode><cellIDFor1stCellCalling>7240462003E0000</cellIDFor1stCellCalling><mSCIdentification>11551189848200</mSCIdentification><exchangeIdentity>STKM01</exchangeIdentity><originForCharging>62</originForCharging><chargedParty>00</chargedParty><timeForStartOfCharge>124619</timeForStartOfCharge><dateForStartOfCharge>20121124</dateForStartOfCharge><callingSubscriberIMSI>724046012529641</callingSubscriberIMSI><callingPartyNumber>11556282361092</callingPartyNumber></original_cdr><TypeOfCommunication>sms</TypeOfCommunication><CallDuration>0.9</CallDuration><CallStart>20121124124619</CallStart><MSC_ID>11551189848200</MSC_ID><ServedParty int_code="55" ton="1" npi="1">556282361092</ServedParty><ServedLocation>7240462</ServedLocation><ScenarioName>Sms_SMS___TIM_TIM</ScenarioName><ServedZone>ZO00031</ServedZone><OtherZone>ZP37744</OtherZone></event_data><dupChk></dupChk><account map_type="2">556282361092</account><other_account map_type="2">556291860209</other_account><operation alternate_rating="1" type="charge"/><transaction id="0000000050B0DE9D-0000DBC9-00002876-62F2B0C6"><Report>FILE=/gold/rte/data/IncomingCDRs/ASN1/010/TKM_SMS+STKM01-28129-1211241251-A.TTF;TICKET=15</Report></transaction><start>20121124124619</start></input></data><filename>/gold/rte/data/IncomingCDRs/ASN1/010/TKM_SMS+STKM01-28129-1211241251-A.TTF</filename><index_into_file>15</index_into_file></process_info>
<process_info><module>pe_gw_a</module><result code="3">D14 - Calls *144</result><data><input><event_data origin_id="asn1"><CallType>moc</CallType><OtherParty ton="2" npi="1" int_code="55">55009999999991144</OtherParty><OtherLocation>55009999999991144</OtherLocation><IntCodeCallingPartyNumber>55</IntCodeCallingPartyNumber><IntCodeServedParty>55</IntCodeServedParty><TicketType>0</TicketType><original_cdr FILENAME="TMX+ZBHE01-95068-1211241251-AG.TTF"><Report>FILE=/gold/rte/data/IncomingCDRs/ASN1/010/TMX+ZBHE01-95068-1211241251-AG.TTF;TICKET=6</Report><CDRType>1</CDRType><networkCallReference>447382755812</networkCallReference><switchIdentity>6628</switchIdentity><originatedCode>1</originatedCode><subscriptionType>21</subscriptionType><speechCoderPreferenceList>2010005030</speechCoderPreferenceList><radioChannelProperty>30</radioChannelProperty><incomingAssignedRoute>BMCL01B</incomingAssignedRoute><translatedNumber>12#144</translatedNumber><originatingLocationNumber>11553191938800</originatingLocationNumber><miscellaneousInformation>0</miscellaneousInformation><incomingRoute>BMCL01B</incomingRoute><outgoingRoute>XMCL1AO</outgoingRoute><mSCIdentification>11553191938800</mSCIdentification><exchangeIdentity>ZBHE01</exchangeIdentity><tariffClass>0010</tariffClass><chargingCase>1</chargingCase><originForCharging>38</originForCharging><chargedParty>00</chargedParty><timeFromRegisterSeizureToStartOfCharging>4</timeFromRegisterSeizureToStartOfCharging><interruptionTime>0</interruptionTime><chargeableDuration>426</chargeableDuration><timeForStopOfCharge>182128</timeForStopOfCharge><timeForStartOfCharge>181421</timeForStartOfCharge><dateForStartOfCharge>20121123</dateForStartOfCharge><disconnectingParty>00</disconnectingParty><calledPartyNumber>12#144</calledPartyNumber><callingSubscriberIMEI>358855043501160</callingSubscriberIMEI><callingSubscriberIMSI>724023016557605</callingSubscriberIMSI><callingPartyNumber>11553891610047</callingPartyNumber><typeOfCallingSubscriber>10</typeOfCallingSubscriber><recordSequenceNumber>1489944</recordSequenceNumber><callIdentificationNumber>11705419</callIdentificationNumber><tAC>721421</tAC><internalCauseAndLoc>3</internalCauseAndLoc><eosInfo>00</eosInfo><callPosition>30</callPosition><firstRadioChannelUsed>00</firstRadioChannelUsed><gSMTeleServiceCode>17</gSMTeleServiceCode><cellIDForLastCellCalling>7240238279ADEE5</cellIDForLastCellCalling><cellIDFor1stCellCalling>72402009ADEE5</cellIDFor1stCellCalling><timeForTCSeizureCalling>181417</timeForTCSeizureCalling></original_cdr><TypeOfCommunication>voi</TypeOfCommunication><MSC_ID>11553191938800</MSC_ID><CallStart>20121123181421</CallStart><CallDuration>426</CallDuration><CallDuration_30_inf>426</CallDuration_30_inf><CallDuration_60_inf>426</CallDuration_60_inf><CallDuration_MC>426</CallDuration_MC><CallDuration_30_60>60</CallDuration_30_60><ServedParty ton="1" npi="1" int_code="55">553891610047</ServedParty><ServedLocation>7240238</ServedLocation><ScenarioName>NA</ScenarioName><ServedZone>ZO00461</ServedZone><OtherZone>ZP30411</OtherZone></event_data><dupChk></dupChk><account map_type="2">553891610047</account><other_account map_type="2">55#144</other_account><operation alternate_rating="1" type="charge"/><transaction id="0000000050B0DEA8-0000DBE8-00002876-62F2B0C6"><Report>FILE=/gold/rte/data/IncomingCDRs/ASN1/010/TMX+ZBHE01-95068-1211241251-AG.TTF;TICKET=6</Report></transaction><start>20121123181421</start></input></data><filename>/gold/rte/data/IncomingCDRs/ASN1/010/TMX+ZBHE01-95068-1211241251-AG.TTF</filename><index_into_file>6</index_into_file></process_info> 
```

结果：

```
\ {
    'Duplicate CDR'                                    1,
    'D14 - Calls *144'                                 2,
    'Error on CDR level; File processing continued.'   1
} 
```

您还可以检查[XML::SAX::Expat](https://metacpan.org/module/XML%3a%3aSAX%3a%3aExpat)、[XML::SAX::ExpatXS](https://metacpan.org/module/XML%3a%3aSAX%3a%3aExpatXS)和[XML::LibXML::SAX](https://metacpan.org/module/XML%3a%3aLibXML%3a%3aSAX)；它们速度更快，但更容易出错。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-24T16:45:03.723

如果您假设 的每个实例`<result>...</result>`都是您感兴趣的实例，那么您也许可以使用正则表达式：

```
my $doc = read_file("file.xml"); # slurp in the doc
my %count;

while ($doc =~ m,<result.*?>(.*?)</result>,g) {
  $count{$1}++;
} 
```

但我会为此使用一个真正的 XML 处理库，例如`XML::XPath`. `XML::Path`将示例程序改编为您的 XML 文件非常容易：

```
use XML::XPath;
use XML::XPath::XMLParser;

my $xp = XML::XPath->new(filename => 'file.xml');

my $nodeset = $xp->find('/zzz/process_info/result'); # find all results

my %count;
foreach my $node ($nodeset->get_nodelist) {
  $count{ $node->string_value } ++;
} 
```

请注意，我使用的 xpath `/zzz/...`- 您的 XML 文档的顶层必须是单个元素，因此我将您的示例附在`<zzz>...</zzz>`.

这是一个更加健壮的解决方案，因为它只会定位`result`元素的子`process_info`元素。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-24T17:48:40.993

```
perl -MXML::Twig -E'XML::Twig->new( twig_handlers => { result => sub { $count{$_->text}++ } })->parsefile( $ARGV[0]); say "$_: $count{$_}" foreach sort keys %count; ' count.xml 
```

如果您的数据是 XML，它将起作用。

它不是。

# macos - 自 SDK 更新以来，NSButton 不显示替代标题？

> ID：13542965
> 
> 赞同：5
> 
> 时间：2012-11-24T16:11:57.723
> 
> 标签：macos, xcode4.5, nsbutton

## 背景资料：

我最近从 Lion 升级到了 MountainLion 和最新的 xCode。我正在开发的应用程序的部署目标是 10.7。

## 问题：

我`NSButton`在 Interfacebuilder 中设置了**Title: "Start"**和**Alternate: "Stop"**。在按钮`IBAction`中，我检查应用程序的状态（BOOL isRunning）并在每次按下按钮时更改状态，如下所示：

```
[startStopButton setState:[appDelegate.dataController appIsRunning]]; 
```

一切正常。**由于我升级到新的 xCode，按钮不再更改标题。**

## 我已经尝试过的事情：

*   根据此按钮检查 IBAction 和 IBOutlet 之间的所有连接。重置一切。没有帮助。
*   创建了一个新的 NSButton 也试过了。不工作。
*   通过代码设置标题：没有用。

    ```
    [startStopButton setTitle:@"Start"];
    [startStopButton setAlternateTitle:@"Stop"]; 
    ```

*   认为这可能是布尔值的问题。所以我检查了按钮是否未处于混合模式。然后用 int 类型的 1 和 0 硬编码 statechanges。完全没有变化。

*   不知何故，当我使用`[startStopButton setTitle:@"TEST"]`然后更改状态时，它会将状态一次更改为交替但不再返回。“TEST”字符串也从未出现在按钮上......

*   我记录了 的值，`[appDelegate.dataController appIsRunning]`它返回了正确的值。

我不知道如何解决这个问题。一切正常，我什么都没做，对我来说没有任何意义。有没有人遇到过类似的问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-13T09:53:05.443

在 Interface Builder 中，将按钮类型更改为“Toggle”。我不确定原因，但似乎备用标题不适用于“瞬时”和“按下”按钮类型。

# c++ - 模板运算符重载中的类型冲突

> ID：13542966
> 
> 赞同：5
> 
> 时间：2012-11-24T16:12:08.533
> 
> 标签：c++, c++11

很抱歉，这听起来像是一个常见问题，就我所看到的而言，我找不到问题的答案。最接近的帖子是：[Template Specialization for basic POD only](https://stackoverflow.com/questions/8863965/template-specialization-for-basic-pod-only)

假设我有一个 class `template <class T> class A {...};`，我想重载 operator+ 作为内部二元运算符（A 类型的两个对象）和混合二元运算符（A 类型和数字 POD 类型的对象）。

理想情况下，我想写的是：

```
#include <type_traits>
using namespace std;

// Declare/fine template
template <class T> class A {...};

// Internal binary operator
template < class T, class U >
    A< typename common_type<T,U>::type >
operator+ ( const A<T> &a, const A<U> &a ) { ... }

// Mixed binary operator
template < class T, class U >
    A< typename common_type<T,U>::type >
operator+ ( const A<T> &a, const U &b ) { ... } 
```

但似乎第二个定义与第一个定义相冲突。使用第二个定义，我知道如何确保 U 是数字 POD 类型，这不是重点。如果我这样做，问题是我无法知道 U 中包含的底层模板类型（如果它是某个 A）。

如果我的问题不够清楚，请告诉我，并提前感谢！:)

编辑：模板规范被 HTML 过滤器清除，在我的最后一句“U if it is some `A<T>`”中。简而言之，我是说 T 是隐藏的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T16:56:16.210

您可以使用一些辅助特征使其工作，以区分专业化和`A`更一般的类型：

```
#include <type_traits>

// "A" template    

template <typename> class A {};

// Traits for "A-ness":

template <typename> struct is_a : std::false_type { };
template <typename T> struct is_a<A<T>> : std::true_type { };

// Operators:

template <class T, class U>
A<typename std::common_type<T, U>::type>
operator+(const A<T> & a, const A<U> & b);

template <class T, class U,
          typename = typename std::enable_if<!is_a<U>::value>::type>
A<typename std::common_type<T, U>::type>
operator+(const A<T> & a, const U & b); 
```

这会立即从可行集中排除第二个重载，因此当只需要第一个重载时，永远不会出现确定第二个重载的返回类型的问题。

（这是使用`enable_if`默认模板参数来控制重载集的示例。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T09:40:34.130

你可以写一个对 SFINAE 友好的东西`common_type`——我个人认为特质应该几乎总是 SFINAE。以机智：

```
// Black hole metafunction that eats everything
template<typename...> struct void_ { using type = void; };

template<typename... T>
using Void = typename void_<T...>::type;

// Due to std::common_type being variadic we need to
// pass a variadic pack around
template<typename... T> struct list {};

// Actually defined, but with no member types for SFINAE purposes
template<typename Sequence, typename Sfinae = void>
struct common_type_impl {};

template<typename... T>
struct common_type_impl<list<T...>, Void<typename std::common_type<T...>::type>>
: std::common_type<T...> {};

template<typename... T> struct common_type: common_type_impl<list<T...>> {}; 
```

现在，当两者之间没有公共类型时，`A<T>`重载`U`将从候选列表中删除，而不是大声抱怨。

也可以`std::common_type`完全替换，因为它计算的结果有其自身的问题，如[DR 2141](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3473.html#2141)中所述。我不会概述替代方案，因为不清楚什么是更好的解决方案，特别是我认为提议的 DR 解决方案更糟糕。

# php - PHP for 循环 - 在表格中显示数据

> ID：13542968
> 
> 赞同：1
> 
> 时间：2012-11-24T16:12:31.400
> 
> 标签：php, html, mysql

我不明白为什么我的代码不起作用；它只显示 1 个结果，而表中有多个条目。

```
<?php  

    $search = $_POST['search'];
    print ($search);
    $query  = "SELECT * FROM student WHERE county= 'sussex'";
    $result = mysql_query($query,$conn);
    $counter = 0;
    $z=0;
    while($row = mysql_fetch_assoc($result)){
    $id[$counter] = $row['roll_number'];
    $counter = $counter + 1;
    }
?>
<table border="1" id="table1" >
    <th>Id</th>
    <th>Type</th>
    <th>Description</th>
    <th>Operator Id</th>

<?
    if($counter>0)
    {
        for($z=0;$z<$counter;$z++)
        {
?> 
            <tr>
            <?
                if($z<$counter)
                {
            ?>
                <td >
                    <?php echo $id[$z]?>                            
                </td> 
            <?
                }
                $z = $z + 1;
            ?>   
            </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T16:15:59.450

您忘记关闭 FOR 循环及其封闭的 IF，我在下面完成了它：

```
<?
if($counter>0)
{
    for($z=0;$z<$counter;$z++)
    {
?> 
        <tr>
            <?
                if($z<$counter)
                {
            ?>
                <td >
                    <?php echo $id[$z]?>                            
                </td> 
            <?
                }
                //$z = $z + 1;  <!-- REMOVE or comment out this line -->
            ?>   
            </tr>
     <? }
     }  ?> <!-- HERE we close the for loop and the IF -->
</table> 
```

**更新**：注意到，感谢 VinceBurn，$z 增加了两次

# javascript - 将 dgrid 连接到在 JSON 中具有不同级别字段的商店

> ID：13542973
> 
> 赞同：0
> 
> 时间：2012-11-24T16:12:55.997
> 
> 标签：javascript, dgrid, dojo

我正在使用绑定到 JSON 存储的 dojo dgrid。这是商店中的一行： ![样本行](../Images/55cd7cd19b96e816b12c1f8411e12867.png)

Store 从包含字段（id、naziv、nivo、sifra）的表中检索数据。该表有一个指向包含字段（id、naziv、sifra、testDatumOd、testDatumDo）的表 JEZICI 的外键。

当我显示原始表中的字段时，一切正常。但是有人知道是否可以将子表 JEZICI 中的字段作为网格中的列与原始表中的列并排引用？

大概是这样的：

```
columns: [
    { field: "id", label: "ID" },
    { field: "sifra", label: "Sifra" },
    { field: "naziv", label: "Naziv" },
    { field: "jezici.id", label "Jezici ID"}
], 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T16:47:08.677

是的，您所要做的就是定义一个格式化程序：

```
columns: [
    {
        id: "jezici-id",
        label: "Jezici ID",
        formatter: function(/*Object*/ row) {
            return row.jezici.id;
        }
    }
] 
```

# database-design - ERD 保持或不保持一对一的关系

> ID：13542975
> 
> 赞同：1
> 
> 时间：2012-11-24T16:13:03.220
> 
> 标签：database-design, erd

我正在为在线零售店设计 ERD 图。我有一个客户表，其中存储了所有相关详细信息。我还有一个客户登录详细信息表，其中仅包含；电子邮件和密码字段。我能看到的唯一关系是一对一的，电子邮件是两者之间的链接。

我的问题是我最好将这张表吸收到客户表中吗？还是将其分开有什么好处？

我会很感激任何帮助，因为数据库不是我的强项

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T16:27:27.203

是的，对于这样的一对一，我希望将所有细节都放在一张表中。

一些例外情况可能是：

*   表现。如果有成千上万的用户，您会希望主表尽可能“薄”，有时这意味着将单个细节移到一对一的表中。

*   数据库中的安全性。将密码放在与其他用户详细信息不同的字段中，可以让您在保护该表上投入更多工作，而不会减慢或阻止对用户详细信息表的访问。用户详细信息将包含个人信息，但几乎没有什么比密码更重要的了，它使冒名顶替者可以访问实际做的事情（包括轻松查找更多个人信息只是假登录）。

*   ERD 的安全性。由于您的问题在标题中有 ERD，因此如果 ERD 在单独的表中，则显示 ERD 具有实际省略表名和列名和密码的能力会容易得多，并且在共享 ERD、进行演示时可能需要这样做，等等

*   多次登录的要求。Stack Exchange 之类的网站允许您将多个帐户关联到一个主“登录”。在这些场景中，将用户名密码分开，因为这实际上是一对多的关系。因此，如果您确信一对一的关系永远不会改变，并且/或者您正在开发一个在实际制作功能之前不预测功能的敏捷流程，那么您就不需要单独使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T16:22:40.090

如果您的所有列都与客户直接相关并且它们不会造成冗余（重复行），那么请将它们放在同一个表中。例如以下字段：姓名、家庭、电子邮件和密码都应该在同一个表（实体）上，这是您的用户，因为它们与用户实体密切相关。

如果您假设存储了有关您的用户的地址信息，包括街道、城市、州等。那么有一个地址实体与用户之间的一对多关系是合乎逻辑的。

最后一件事，当您存储有关用户的各种数据时，规范化的想法很棒，因此只有在这种情况下才有意义。过度规范化也会对查询的性能造成额外的开销，毕竟规范化越多，选择查询运行的速度就越慢。

# php - 公共变量中的逗号

> ID：13542977
> 
> 赞同：2
> 
> 时间：2012-11-24T16:13:12.840
> 
> 标签：php

我记得在某处读过这段代码：

```
<?php

class test {
    public $foo = 6, $bar;
}

$a = new test();
echo $a->foo; //6
echo $a->bar; //no output 
```

逗号有什么作用`public $foo = 6, $bar;`？为什么我的 IDE 在我删除时给我错误`public`？我确实发现`$bar`这样做是声明的，但我认为这不是你以这种方式编码的唯一原因。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T16:16:19.190

逗号在功能上与以下内容相同：

```
<?php
class test {
    public $foo = 6;
    public $bar;
}

$a = new test();
echo $a->foo; //6
echo $a->bar; //no output 
```

基本上，它只是意味着声明另一个公共变量。如果您删除 public，您将不再声明一个公共变量，因此您的 IDE 会抱怨。人们以这种方式编码的原因是为了节省空间。它只是较长形式的简写。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-24T16:27:12.567

> *public $foo = 6, $bar; 中的逗号有什么作用？*

它允许你声明两个类属性—— `$foo`（默认值为 6）和`$bar`（默认值`null`）——使用**相同的访问修饰符**——`public`无需重复两次，如下所示：

```
public $foo = 6;
public $bar; 
```

顺便说一句，`no output`是将此`null`值转换为字符串（空字符串）的结果。

> *为什么我的 IDE 在我删除 public 时给我错误？*

因为你不能指定一个属性而不指定它的访问修饰符。引用[文档](http://php.net/manual/en/language.oop5.properties.php)：

> 类成员变量称为“属性”。[...] 它们是通过使用关键字`public`、`protected`或之一来定义的`private`，然后是普通的变量声明。[...]
> 
> 为了保持与 PHP 4 的向后兼容性，PHP 5 仍将接受`var`在属性声明中使用关键字来代替（或除此之外）`public`、`protected`或`private`. 如果您声明一个属性 using `var`，那么 PHP 5 将把该属性视为已声明为`public`.

换句话说，除非您使用`var`，否则 PHP 中没有像`default access modifier`（或特殊处理`no access modifier`）成员*变量*这样的东西。是的，这是一种不一致 - 因为可以在没有访问修饰符的情况下定义成员*函数*（在这种情况下，它们被处理为`public`）。

...顺便说一句，这就是那个令人困惑的`unexpected T_VARIABLE, expecting T_FUNCTION`错误消息的原因；最后，该`$foo = 6`语句被视为函数声明。

# java - android webview留在应用程序中

> ID：13542982
> 
> 赞同：24
> 
> 时间：2012-11-24T16:13:43.057
> 
> 标签：java, android, webview, android-widget

我的 android 应用程序中有一个 webview，但是当有人在网站上导航时，它会在一个新窗口中打开，我希望它留在 webview 内。有没有办法轻松做到这一点？这是我活动中的代码：

```
super.onCreate(savedInstanceState);
    setContentView(R.layout.shop);
    WebView webview;
    webview = (WebView) findViewById(R.id.webview);
    webview.getSettings().setJavaScriptEnabled(true);
    webview.loadUrl("http://www.google.co.uk"); 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-11-24T16:16:00.167

您必须创建一个`WebViewClient`：

```
public class myWebViewClient extends WebViewClient {
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        view.loadUrl(url);
        return true;
    }
} 
```

然后`WebView`像这样设置它：

```
webview.setWebViewClient(new myWebViewClient()); 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-08-25T21:44:16.307

或者您可以这样做，而无需创建新类：

```
myWebView.setWebViewClient(new WebViewClient()); 
```

这个对我有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-17T02:34:09.043

```
webview.setWebViewClient(new WebViewClient()); 
```

如果要自定义，则应覆盖`shouldOverrideUrlLoading (WebView view, String url)`. 但它在 API 24 中已弃用。您可以使用`public boolean shouldOverrideUrlLoading (WebView view,WebResourceRequest request)`. 实际上他们都需要返回false。

[Android WebView 示例](https://androidride.com/android-webview-example-tutorial-kotlin-java-download-source-code/)

# c++ - 为什么我的 OpenGL 纹理不起作用？

> ID：13542983
> 
> 赞同：1
> 
> 时间：2012-11-24T16:13:44.323
> 
> 标签：c++, opengl

我正在尝试恢复我在大学工作的一个旧项目。

这是一个基本的 OpenGL 动画，带有一些相机控制和模型加载。我已经让它工作了，但我不知道为什么没有为“天空盒”或“云平面”加载纹理。

我敢肯定他们几年前使用几乎相同的代码。我所做的最大改变是从 SDL 移植到 GLUT，但我看不出这会对事情产生什么影响。

以下是一些与渲染天空盒相关的行：

```
glBindTexture(GL_TEXTURE_2D, skybox[i]);

glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);

glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP);

glVertexPointer(3, GL_FLOAT, 0, face);
glTexCoordPointer(2, GL_FLOAT, 0, texture);
glDrawArrays(GL_QUADS, 0, 4); 
```

我没有收到任何警告或运行时异常。纹理根本不显示。

我的代码中有这样的东西：`glEnableClientState(GL_TEXTURE_COORD_ARRAY);`和`glEnable(GL_TEXTURE_2D);`

有任何想法吗？我真的很想让它再次正常工作。

完整来源在这里：

```
//Camera start location and rotation, boundaries are -0.5 -> +0.5 in each axis.
#define CAMERA_START_X -0.6
#define CAMERA_START_Y -0.2
#define CAMERA_START_Z -1.8
#define CAMERA_START_R 330
#define CAMERA_START_MOMENTUM 0.15

//Camera keyboard-event motion speed per second, independent of frame rate or machine.
#define CAMERA_ROTATION 100
#define CAMERA_ELEVATION 2
#define CAMERA_MOMENTUM 0.1

//Cloud plane configuration constants.
#define CLOUDS 12
#define CLOUD_SECTIONS 3
#define CLOUD_INNER_PLANES 0.2
#define CLOUD_OUTER_PLANES 0.8

//Frame rate, lowering the frame rate may improve performance on older computers.
#define FPS 60

//Other global constants.
#define PI 3.141592
#define SCALE_FACTOR 0.0001

//Print OpenGL errors to console if true.
#define DEBUG false

#include <GLUT/glut.h>
#include "glm.h"
#include <math.h>
#include <stdlib.h>
#include <stdio.h>

//*****************************************
//           Global Variables
//*****************************************

//Use glm's texture id variable to maintain consistency.
extern GLenum _glmTextureTarget;

//Models.
GLMmodel* eagle;
GLMmodel* airplane;

//Cloud plane.
float cloudPlaneV[CLOUDS][CLOUDS][7][CLOUD_SECTIONS][3];
GLuint cloudTexture;

//Camera location and rotation.
float cameraX = CAMERA_START_X * SCALE_FACTOR;
float cameraY = CAMERA_START_Y * SCALE_FACTOR;
float cameraZ = CAMERA_START_Z * SCALE_FACTOR;
float cameraR = CAMERA_START_R;

//Key event values for camera control.
float rotationDirection = 0;
float elevationDirection = 0;
float momentumDirection = 0;

//Skybox texture indices.
GLuint skybox[6];

//Skybox vertices.
GLfloat vertices[8][3] =
  {{-1, -1, -1}, // 0: left,  bottom, back
   {-1, -1, +1}, // 1: left,  bottom, front
   {-1, +1, -1}, // 2: left,  top,    back
   {-1, +1, +1}, // 3: left,  top,    front
   {+1, -1, -1}, // 4: right, bottom, back
   {+1, -1, +1}, // 5: right, bottom, front
   {+1, +1, -1}, // 6: right, top,    back
   {+1, +1, +1}};// 7: right, top,    front

//Skybox cube faces.
GLubyte faces[6][4] =
  {{1, 0, 2, 3}, // 0: west
   {4, 5, 7, 6}, // 1: east
   {4, 0, 1, 5}, // 2: below
   {7, 3, 2, 6}, // 3: above
   {5, 1, 3, 7}, // 4: south
   {0, 4, 6, 2}};// 5: north

//Standard texture winding.
GLfloat texture[4][2] =
  {{0.0, 0.0}, // 0: left,  bottom
   {1.0, 0.0}, // 1: right, bottom
   {1.0, 1.0}, // 2: right, top
   {0.0, 1.0}};// 3: left,  top

//Animation variables.
bool fullscreen = 0;
float window_w, window_h;
bool forceReshape = false;
int frame = -1;
bool paused = false;
float momentum = CAMERA_START_MOMENTUM * SCALE_FACTOR;
float momentumBeforePause;

float planePriorX = 0, planePriorY = 0, planePriorZ = 0;
float planePostX = 0, planePostY = 0, planePostZ = 0;
float planeRotX = 0, planeRotY = 0, planeRotZ = 0;

float eaglePriorX = -0.5, eaglePriorY = 0.03, eaglePriorZ = 0.1;
float eaglePostX = 0, eaglePostY = 0, eaglePostZ = 0;
float eagleRotX = 0, eagleRotY = 0, eagleRotZ = 0;

//*****************************************
//           Loading Objects
//*****************************************

void loadObjects() {
  eagle = glmReadOBJ("resources/models/eagle.obj");
  glmVertexNormals(eagle, 180.0, false);
  glmUnitize(eagle);

  airplane = glmReadOBJ("resources/models/airplane.obj");
  glmVertexNormals(airplane, 180.0, false);
  glmUnitize(airplane);
}

//*****************************************
//               Camera
//*****************************************

void updateCamera() {
  //Reset position and rotation.
  glLoadIdentity();

  //Camera rotation.
  cameraR += rotationDirection * CAMERA_ROTATION / FPS;
  if (cameraR < 0) cameraR += 360;
  if (cameraR > 360) cameraR -= 360;

  //Camera location.
  momentum += momentumDirection * CAMERA_MOMENTUM * SCALE_FACTOR / FPS;
  if (momentum < 0) momentum = 0;
  cameraX += momentum * -sin(cameraR * PI / 180);
  cameraY += elevationDirection * CAMERA_ELEVATION * SCALE_FACTOR / FPS;
  cameraZ += momentum * cos(cameraR * PI / 180);

  //Move the world, not the camera.
  glRotatef(cameraR, 0, 1, 0);
  glTranslatef(cameraX, cameraY, cameraZ);
}

//*****************************************
//                Skybox
//*****************************************

void loadSkybox() {
  GLfloat width = 600, height = 600;
  skybox[0] = glmLoadTexture("resources/textures/skybox/west.jpeg",   GL_TRUE, GL_TRUE, GL_TRUE, GL_TRUE, &width, &height);
  skybox[1] = glmLoadTexture("resources/textures/skybox/east.jpeg",   GL_TRUE, GL_TRUE, GL_TRUE, GL_TRUE, &width, &height);
  skybox[2] = glmLoadTexture("resources/textures/skybox/bottom.jpeg", GL_TRUE, GL_TRUE, GL_TRUE, GL_TRUE, &width, &height);
  skybox[3] = glmLoadTexture("resources/textures/skybox/top.jpeg",    GL_TRUE, GL_TRUE, GL_TRUE, GL_TRUE, &width, &height);
  skybox[4] = glmLoadTexture("resources/textures/skybox/south.jpeg",  GL_TRUE, GL_TRUE, GL_TRUE, GL_TRUE, &width, &height);
  skybox[5] = glmLoadTexture("resources/textures/skybox/north.jpeg",  GL_TRUE, GL_TRUE, GL_TRUE, GL_TRUE, &width, &height);
}

//Draws the skybox.
void drawSkybox() {
  //Disable lighting, enable textures.
  glDisable(GL_LIGHTING);
  glEnableClientState(GL_TEXTURE_COORD_ARRAY);

  //Augment such that camera is at the center.
  GLfloat center[8][3];
  for (int i = 0; i < 8; i++) {
    center[i][0] = vertices[i][0] - cameraX;
    center[i][1] = vertices[i][1] - cameraY;
    center[i][2] = vertices[i][2] - cameraZ;
  }

  //Draw eace face.
  GLfloat face[4][3];
  for (int i = 0; i < 6; i++) {
    for (int j = 0; j < 4; j++) {
      for (int k = 0; k < 3; k++) {
        face[j][k] = center[faces[i][j]][k];
      }
    }

    glBindTexture(GL_TEXTURE_2D, skybox[i]);

    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);

    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP);
    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP);

    glVertexPointer(3, GL_FLOAT, 0, face);
    glTexCoordPointer(2, GL_FLOAT, 0, texture);
    glDrawArrays(GL_QUADS, 0, 4);
  }

  //Enable lighting, disable textures.
  glEnable(GL_LIGHTING);
  glDisableClientState(GL_TEXTURE_COORD_ARRAY);
}

//*****************************************
//             Cloud Plane
//*****************************************

void calculateCloudPlane() {
  //Calculate the increment.
  float incr = 2 * PI / CLOUD_SECTIONS;

  //Use cosArr and sinArr to reuse the sine and cosine calculation.
  float cosArr[CLOUD_SECTIONS + 1], sinArr[CLOUD_SECTIONS + 1];
  for (int i = 0; i < CLOUD_SECTIONS + 1; i++) {
    cosArr[i] = cos(i * incr);
    sinArr[i] = sin(i * incr);
  }

  //Calculate a circle.
  float circle[CLOUD_SECTIONS][3];
  for (int i = 0; i < CLOUD_SECTIONS; i++) {
    circle[i][0] = cosArr[i];
    circle[i][1] = 0;
    circle[i][2] = sinArr[i];
  }

  //Calculate a cloud from the circle.
  float cloud[7][CLOUD_SECTIONS][3];
  float xScale, zScale, xTrans, zTrans;
  for (int i = 0; i < 7; i++) {
    switch (i) {
      //Scale everything down quite a bit, we only want a light covering.
      case 0: xScale = 0.0625; zScale = 0.0625; xTrans = 0; zTrans = 0;
      break;
      case 1: xScale = 0.0625; zScale = 0.0625; xTrans = 0.0625; zTrans = 0;
      break;
      case 2: xScale = 0.0625; zScale = 0.0625; xTrans = -0.0625; zTrans = 0;
      break;
      case 3: xScale = 0.0625; zScale = 0.0625; xTrans = 0.0625 * cos(60 * PI / 180); zTrans = 0.0625 * sin(60 * PI / 180);
      break;
      case 4: xScale = 0.0625; zScale = 0.0625; xTrans = 0.0625 * cos(120 * PI / 180); zTrans = 0.0625 * sin(120 * PI / 180);
      break;
      case 5: xScale = 0.0625; zScale = 0.0625; xTrans = 0.0625 * cos(240 * PI / 180); zTrans = 0.0625 * sin(240 * PI / 180);
      break;
      case 6: xScale = 0.0625; zScale = 0.0625; xTrans = 0.0625 * cos(300 * PI / 180); zTrans = 0.0625 * sin(300 * PI / 180);
      break;
    }
    for (int j = 0; j < CLOUD_SECTIONS; j++) {
      cloud[i][j][0] = circle[j][0] * xScale + xTrans;
      cloud[i][j][1] = circle[j][1];
      cloud[i][j][2] = circle[j][2] * zScale + zTrans;
    }
  }

  //Calculate a cloud plane from the cloud.
  for (int i = 0; i < CLOUDS; i++) {
    for (int j = 0; j < CLOUDS; j++) {
      for (int k = 0; k < 7; k++) {
        for (int l = 0; l < CLOUD_SECTIONS; l++) {
          cloudPlaneV[i][j][k][l][0] = cloud[k][l][0] - CLOUDS / 2 + i;
          cloudPlaneV[i][j][k][l][1] = cloud[k][l][1];
          cloudPlaneV[i][j][k][l][2] = cloud[k][l][2] - CLOUDS / 2 + j;
        }
      }
    }
  }

  //Load texture.
  float width = 256, height = 256;
  cloudTexture = glmLoadTexture("resources/textures/cloud.jpeg", GL_TRUE, GL_TRUE, GL_TRUE, GL_TRUE, &width, &height);
}

//Draws 4 planes containing 'cloud' type objects with parameters defined as constants above.
void drawCloudPlane() {
  glPushMatrix();
  glDisable(GL_LIGHTING);
  glEnableClientState(GL_TEXTURE_COORD_ARRAY);

  //Move the plane with camera, utilises integer truncation.
  int xOffset = -cameraX / SCALE_FACTOR;
  float yOffset = -cameraY / SCALE_FACTOR;
  int zOffset = -cameraZ / SCALE_FACTOR;
  glTranslatef(xOffset, yOffset, zOffset);

  //Bind data pointers.
  glBindTexture(GL_TEXTURE_2D, cloudTexture);
  glVertexPointer(3, GL_FLOAT, 0, cloudPlaneV);
  glTexCoordPointer(2, GL_FLOAT, 0, texture);

  //Top plane.
  glPushMatrix();
  glTranslatef(0, CLOUD_OUTER_PLANES, 0);
  for (int i = 0; i < CLOUDS * CLOUDS * 7; i++) {
    glDrawArrays(GL_POLYGON, i * CLOUD_SECTIONS, CLOUD_SECTIONS);
  }
  glPopMatrix();

  //2nd plane.
  glPushMatrix();
  glTranslatef(0, CLOUD_INNER_PLANES, 0);
  for (int i = 0; i < CLOUDS * CLOUDS * 7; i++) {
    glDrawArrays(GL_POLYGON, i * CLOUD_SECTIONS, CLOUD_SECTIONS);
  }
  glPopMatrix();

  //3rd plane.
  glPushMatrix();
  glTranslatef(0, -CLOUD_INNER_PLANES, 0);
  for (int i = 0; i < CLOUDS * CLOUDS * 7; i++) {
    glDrawArrays(GL_POLYGON, i * CLOUD_SECTIONS, CLOUD_SECTIONS);
  }
  glPopMatrix();

  //Bottom plane.
  glPushMatrix();
  glTranslatef(0, -CLOUD_OUTER_PLANES, 0);
  for (int i = 0; i < CLOUDS * CLOUDS * 7; i++) {
    glDrawArrays(GL_POLYGON, i * CLOUD_SECTIONS, CLOUD_SECTIONS);
  }
  glPopMatrix();

  glEnable(GL_LIGHTING);
  glDisableClientState(GL_TEXTURE_COORD_ARRAY);
  glPopMatrix();
}

//*****************************************
//                Lights
//*****************************************

//Set up lights at points on the skybox that match the textures.
void setupLights() {
  glEnable(GL_LIGHTING);
  glEnable(_glmTextureTarget);
  glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_MODULATE);
  glEnable(GL_RESCALE_NORMAL);

  //Set global ambience.
  GLfloat global_ambient[] = {0.5, 0.5, 0.5, 1};
  glLightModelfv(GL_LIGHT_MODEL_AMBIENT, global_ambient);

  //Set up a light source at the sun's location.
  glEnable(GL_LIGHT0);
  GLfloat light0_ambient[] = {0, 0, 0, 1};
  GLfloat light0_diffuse[] = {0.5, 0.5, 0.5, 1};
  GLfloat light0_specular[] = {0.7, 0.7, 0.7, 1};
  GLfloat light0_position[] = {-1, 1, -1, 1};

  glLightfv(GL_LIGHT0, GL_AMBIENT, light0_ambient);
  glLightfv(GL_LIGHT0, GL_DIFFUSE, light0_diffuse);
  glLightfv(GL_LIGHT0, GL_SPECULAR, light0_specular);
  glLightfv(GL_LIGHT0, GL_POSITION, light0_position);

  //Set up a light source at the sun's reflection.
  //The reflection is half as bright as the sun.
  glEnable(GL_LIGHT1);
  GLfloat light1_ambient[] = {0, 0, 0, 1};
  GLfloat light1_diffuse[] = {0.25, 0.25, 0.25, 1};
  GLfloat light1_specular[] = {0.35, 0.35, 0.35, 1};
  GLfloat light1_position[] = {-1, -1, -1, 1};

  glLightfv(GL_LIGHT1, GL_AMBIENT, light1_ambient);
  glLightfv(GL_LIGHT1, GL_DIFFUSE, light1_diffuse);
  glLightfv(GL_LIGHT1, GL_SPECULAR, light1_specular);
  glLightfv(GL_LIGHT1, GL_POSITION, light1_position);
}

//This augments the lighting to match the skybox, required after camera rotation.
void augmentLights() {
  GLfloat light0_position[] = {-1 / SCALE_FACTOR, 1 / SCALE_FACTOR, -1 / SCALE_FACTOR, 1};
  glLightfv(GL_LIGHT0, GL_POSITION, light0_position);

  GLfloat light1_position[] = {-1 / SCALE_FACTOR, -1 / SCALE_FACTOR, -1 / SCALE_FACTOR, 1};
  glLightfv(GL_LIGHT1, GL_POSITION, light1_position);
}

//*****************************************
//              Main Scene
//*****************************************

void drawEagle() {
  glPushMatrix();

  //Scale the eagle down to size.
  glScalef(0.5, 0.5, 0.5);

  //Face forward.
  glRotatef(180, 0, 1, 0);

  glmDraw(eagle, GLM_SMOOTH | GLM_MATERIAL);

  glPopMatrix();
}

void drawAirplane() {
  glPushMatrix();

  //Rotate the plane so that it faces forward.
  glRotatef(270, 1, 0, 0);
  glRotatef(90, 0, 0, 1);

  glmDraw(airplane, GLM_SMOOTH | GLM_MATERIAL | GLM_TEXTURE);

  glPopMatrix();
}

//Keeps angles within bounds - prevents overflow.
void bounds(float &angle) {
  if (angle > 360) angle -= 360;
  if (angle < 0) angle += 360;
}

void drawScene() {
  glPushMatrix();

  //Set the animation control variables.
  if (!paused) frame++;
  int ticks = frame % 1440;
  if (frame % 1440 == 0) {
    ticks = 0;

    //Reset animation object positions and rotations.
    planePriorX = 0, planePriorY = 0, planePriorZ = 0;
    planePostX = 0, planePostY = 0, planePostZ = 0;
    planeRotX = 0, planeRotY = 0, planeRotZ = 0;

    eaglePriorX = -0.5, eaglePriorY = 0.03, eaglePriorZ = -0.1;
    eaglePostX = 0, eaglePostY = 0, eaglePostZ = 0;
    eagleRotX = 0, eagleRotY = 0, eagleRotZ = 0;
  }

  //Apply scene transformations.
  glRotatef(30, 0, 1, 0);
  glTranslatef(0, 0, -1500 * frame * SCALE_FACTOR);

  //Make sure angles are in bounds.
  bounds(planeRotX); bounds(planeRotY); bounds(planeRotZ);
  bounds(eagleRotX); bounds(eagleRotY); bounds(eagleRotZ);

  if (!paused) {
    //Airplane transformation events.
    //Constant swaying.
    planeRotZ -= 0.5 * cos(ticks * 2 * PI / 180);
    planePostY -= 0.01 * cos(ticks * PI / 180);

    //Spin upside-down.
    if (ticks >= 180 && ticks < 360) planeRotZ -= PI * 0.5 * sin(ticks * PI / 180);

    //Spin back round.
    if (ticks >= 360 && ticks < 540) planeRotZ += PI * 0.5 * sin(ticks * PI / 180);

    //Dive.
    if (ticks >= 720 && ticks < 900) {
      planeRotX -= 0.25 * PI * sin(ticks * 2 * PI / 180);
      planePriorY -= 0.005 * PI * sin(ticks * PI / 180);
      planePriorZ -= 0.01 * PI * sin(ticks * 0.5 * PI / 180);
    }

    //Loop-the-loop
    if (ticks >= 900 && ticks < 1220) {
      planeRotX += 1;
      planePriorY += 0.015 * PI * sin((ticks - 180) * PI / 180);
      planePriorZ -= 0.015 * PI * cos((ticks - 180) * PI / 180);
    }

    //Reset position.
    if (ticks >= 1220 && ticks < 1440) {
      // These values were found by minimising errors using binary division.
      planeRotX -= 0.1262345 * PI * sin(ticks * PI / 180);
      planePriorY -= 0.002379563 * PI * sin(ticks * 0.5 * PI / 180);
      planePriorZ -= 0.003826425 * PI * sin(ticks * 0.5 * PI / 180);
    }

    //Eagle transformation events.
    //Set default position.
    eaglePriorX = -1;
    eaglePriorZ = 0.4;

    //Set start position over left wing.
    if (ticks >= 0 && ticks < 180) {
      eaglePriorX = -0.5;
      eaglePriorY = 0.03;
      eaglePriorZ = -0.1;
    }

    //Move a little with the wing.
    if (ticks >= 0 && ticks < 90) {
      eagleRotZ -= cos(ticks * 2 * PI / 180);
      eaglePostY -= 0.009 * sin(ticks * 2 * PI / 180);
    }

    //Move back, up and left.
    if (ticks >= 90 && ticks < 180) {
      eaglePriorX -= (float)0.5 / 90 * (ticks - 90);
      eaglePriorZ += (float)0.5 / 90 * (ticks - 90);
      eaglePostY += 0.009 * sin((ticks - 90) * 2 * PI / 180);
    }

    //Swaying.
    if (ticks >= 90 && ticks < 1350) {
      eagleRotZ -= 0.6 * cos((ticks + 90) * PI / 180);
      eaglePostY -= 0.01 * cos((ticks + 90) * 2 * PI / 180);
    }

    //Avoid plane collision.
    if (ticks >= 360 && ticks < 540) eagleRotZ += 0.25 * PI * sin(ticks * 2 * PI / 180);

    //Glide from side to side.
    if (ticks >= 720 && ticks < 1080) eaglePriorX += 0.4 * PI * sin(ticks * 0.5 * PI / 180);

    //Move back to start position.
    if (ticks >= 1350 && ticks < 1440) {
      eaglePriorX += (float)0.5 / 90 * (ticks - 1350);
      eaglePriorZ -= (float)0.5 / 90 * (ticks - 1350);
    }

    //Avoid plane collision.
    if (ticks >= 1400 && ticks < 1420) eaglePriorY += 0.01;
    if (ticks >= 1420 && ticks < 1440) eaglePriorY -= 0.01;
  }

  //Apply the transformations then draw the airplane.
  glPushMatrix();
  glTranslatef(planePriorX, planePriorY, planePriorZ);
  glRotatef(planeRotX, 1, 0, 0);
  glRotatef(planeRotY, 0, 1, 0);
  glRotatef(planeRotZ, 0, 0, 1);
  glTranslatef(planePostX, planePostY, planePostZ);
  drawAirplane();
  glPopMatrix();

  //Apply the transformations then draw the eagle.
  glPushMatrix();
  glTranslatef(eaglePriorX, eaglePriorY, eaglePriorZ);
  glRotatef(eagleRotX, 1, 0, 0);
  glRotatef(eagleRotY, 0, 1, 0);
  glRotatef(eagleRotZ, 0, 0, 1);
  glTranslatef(eaglePostX, eaglePostY, eaglePostZ);
  drawEagle();
  glPopMatrix();
  glPopMatrix();
}

//*****************************************
//                 GLUT
//*****************************************

//Initialisation function.
void init(int argc, char **argv) {
  //Initialise GLUT.
  glutInit(&argc, argv);

  // Use doule buffering.
  glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGB | GLUT_DEPTH);
  glutInitWindowSize(760, 760);

  //Create window.
  glutCreateWindow("Come Fly With Me - by Chris Patuzzo");

  //Set up camera.
  glMatrixMode(GL_PROJECTION);
  glLoadIdentity();
  gluPerspective(90, 1, 0.00001, 1 / SCALE_FACTOR);
  glMatrixMode(GL_MODELVIEW);

  //Set the clear color.
  glClearColor(0, 0, 0, 1);

  //Use z-buffer, lighting, normal scaling.
  glEnable(GL_DEPTH_TEST);

  //Set up two lights; the sun and its reflection.
  setupLights();

  //Use vertex arrays.
  glEnableClientState(GL_VERTEX_ARRAY);
  glEnable(GL_TEXTURE_2D);

  //Load skybox and objects.
  loadSkybox();
  loadObjects();

  //Calculate cloud plane.
  calculateCloudPlane();
}

void reshape(int width, int height) {
  int min = (width > height) ? height : width;
  glViewport((width - min) / 2, (height - min) / 2, min, min);
}

//Main display loop.
void display() {
  //Clear buffers.
  glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

  //Augment camera, draw skybox.
  updateCamera();
  drawSkybox();

  //Scale the world and reset light positions.
  glScalef(SCALE_FACTOR, SCALE_FACTOR, SCALE_FACTOR);
  augmentLights();

  //Draw the plane containing clouds and the main scene.
  drawCloudPlane();
  drawScene();

  //Swap buffers.
  glutSwapBuffers();
}

void timer(int n) {
  if (DEBUG) {
    printf("%s\n", gluErrorString(glGetError()));
    fflush(stdout);
  }

  if (forceReshape) {
    float w = glutGet(GLUT_WINDOW_WIDTH);
    float h = glutGet(GLUT_WINDOW_HEIGHT);

    reshape(w, h);
  }

  glutPostRedisplay();
  glutTimerFunc(1000 / FPS, timer, 0);
}

void keyDown(unsigned char key, int x, int y) {
  switch (key) {
    case 'q': exit(0);

    case 'w': momentumDirection++;  break;
    case 'a': rotationDirection--;  break;
    case 's': momentumDirection--;  break;
    case 'd': rotationDirection++;  break;
    case '=': elevationDirection--; break;
    case '-': elevationDirection++; break;

    case '0': momentum = 0; break;

    case ' ':
      if (paused) {
        paused = false;
        momentum = momentumBeforePause;
      }
      else {
        paused = true;
        momentumBeforePause = momentum;
        momentum = 0;
      }
    break;

    case 'r':
      //Reset the camera.
      cameraX = CAMERA_START_X * SCALE_FACTOR;
      cameraY = CAMERA_START_Y * SCALE_FACTOR;
      cameraZ = CAMERA_START_Z * SCALE_FACTOR;
      cameraR = CAMERA_START_R;

      momentum = CAMERA_START_MOMENTUM * SCALE_FACTOR;
      rotationDirection  = 0;
      elevationDirection = 0;
      momentumDirection  = 0;

      //Reset animation frame, set unpaused.
      frame = -1;
      paused = false;

      //Reset animation object positions and rotations.
      planePriorX = 0, planePriorY = 0, planePriorZ = 0;
      planePostX = 0, planePostY = 0, planePostZ = 0;
      planeRotX = 0, planeRotY = 0, planeRotZ = 0;

      eaglePriorX = -0.5, eaglePriorY = 0.03, eaglePriorZ = -0.1;
      eaglePostX = 0, eaglePostY = 0, eaglePostZ = 0;
      eagleRotX = 0, eagleRotY = 0, eagleRotZ = 0;
    break;

    case 'p':
      //Pause the animation.
      paused = true;
      momentumBeforePause = momentum;
      momentum = 0;

      //Set frame.
      frame = 605;

      //Move the camera.
      cameraX = 0.004524;
      cameraY = 0.000052;
      cameraZ = 0.007764;
      cameraR = 306;

      //Reset animation object positions and rotations.
      planePriorX = 0, planePriorY = -0.871533, planePriorZ = -1.577791;
      planePostX = 0, planePostY = -0.44244, planePostZ = 0;
      planeRotX = 312, planeRotY = 0, planeRotZ = 13.651090;

      eaglePriorX = -1, eaglePriorY = 0.03, eaglePriorZ = 0.4;
      eaglePostX = 0, eaglePostY = -0.293748, eaglePostZ = 0;
      eagleRotX = 0, eagleRotY = 0, eagleRotZ = 18.295479;
    break;

    case 'y':
      //Pause the animation.
      paused = true;
      momentumBeforePause = momentum;
      momentum = 0;

      //Set frame.
      frame = 224;

      //Move the camera.
      cameraX = 0.001829;
      cameraY = -0.000004;
      cameraZ = 0.00298;
      cameraR = 138;

      //Reset animation object positions and rotations.
      planePriorX = 0, planePriorY = 0, planePriorZ = 0;
      planePostX = 0, planePostY = -0.5829, planePostZ = 0;
      planeRotX = 0, planeRotY = 0, planeRotZ = 267.401611;

      eaglePriorX = -1, eaglePriorY = 0.03, eaglePriorZ = 0.4;
      eaglePostX = 0, eaglePostY = 0.000001, eaglePostZ = 0;
      eagleRotX = 0, eagleRotY = 0, eagleRotZ = 43.981647;
    break;

    case 'u':
      //Pause the animation.
      paused = true;
      momentumBeforePause = momentum;
      momentum = 0;

      //Set frame.
      frame = -1;

      //Move the camera.
      cameraX = 0.000094;
      cameraY = -0.000036;
      cameraZ = -0.000103;
      cameraR = 42;

      //Reset animation object positions and rotations.
      planePriorX = 0, planePriorY = 0, planePriorZ = 0;
      planePostX = 0, planePostY = 0, planePostZ = 0;
      planeRotX = 0, planeRotY = 0, planeRotZ = 0;

      eaglePriorX = -0.5, eaglePriorY = 0.03, eaglePriorZ = -0.1;
      eaglePostX = 0, eaglePostY = 0, eaglePostZ = 0;
      eagleRotX = 0, eagleRotY = 0, eagleRotZ = 0;
    break;

    case 'h':
      printf("\n\n*** Controls ***\n\nW: Accelerate\nS: Decelerate\nA: Turn left\nD: Turn right\n=: Increase elevation\n-: Decrease elevation\n0: Stop moving\nSpace: Pause animation\n\nF: Fullscreen\nP: Set viewpoint A\nU: Set viewpoint B\nY: Set viewpoint C\n\nH: Help\nR: Reset\nQ: Quit");
    break;

    case 'f':
      if (fullscreen) {
        glutReshapeWindow(window_w, window_h);
        fullscreen = false;
      }
      else {
        window_w = glutGet(GLUT_WINDOW_WIDTH);
        window_h = glutGet(GLUT_WINDOW_HEIGHT);

        glutFullScreen();
        fullscreen = true;
      }

      forceReshape = true;
    break;
  }
}

void keyUp(unsigned char key, int x, int y) {
  switch (key) {
    case 'w': momentumDirection--;  break;
    case 'a': rotationDirection++;  break;
    case 's': momentumDirection++;  break;
    case 'd': rotationDirection--;  break;
    case '=': elevationDirection++; break;
    case '-': elevationDirection--; break;
  }
}

//Entry point.
int main(int argc, char **argv) {
  init(argc, argv);
  glutDisplayFunc(display);
  glutTimerFunc(1000 / 60, timer, 0);
  glutSetKeyRepeat(0);
  glutKeyboardFunc(keyDown);
  glutKeyboardUpFunc(keyUp);
  glutReshapeFunc(reshape);
  glutMainLoop();

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T17:52:11.020

谢谢立方。

我添加了一个调试片段来帮助追踪问题：

```
if (DEBUG) {
  printf("%s\n", gluErrorString(glGetError()));
  fflush(stdout);
} 
```

使用二进制除法，我很快发现这一行因“无效枚举”而出错：

```
glEnable(GL_VERTEX_ARRAY); 
```

这是因为它应该是：

```
glEnableClientState(GL_VERTEX_ARRAY); 
```

我今天学到了宝贵的一课。

# python - 如何在wxPython中删除sizer之间的空白区域

> ID：13542985
> 
> 赞同：0
> 
> 时间：2012-11-24T16:13:54.513
> 
> 标签：python, wxpython

我的代码有什么问题吗？我在主框架的 1 个 boxsizer 中使用了 3 个 sizer。底部尺寸器用于绘图，另外两个用于用户交互。最重要的问题是现在3个sizer之间存在太多的空白区域。我希望我的 GUI 看起来更紧凑，如果可能的话，绘图区域应该更大。

```
 # -*- coding: utf-8 -*- 

###########################################################################
## Python code generated with wxFormBuilder (version Oct  8 2012)
## http://www.wxformbuilder.org/
##
## PLEASE DO "NOT" EDIT THIS FILE!
###########################################################################

import os
import wx
import wx.xrc
import matplotlib
matplotlib.use('WXAgg')
from matplotlib.figure import Figure
from matplotlib.backends.backend_wxagg import \
    FigureCanvasWxAgg as FigureCanvas, \
    NavigationToolbar2WxAgg as NavigationToolbar
#from numpy import arange, sin, pi

###########################################################################
## Class MainFrame
###########################################################################

class MainFrame ( wx.Frame ):

    def __init__( self, parent ):
        wx.Frame.__init__ ( self, parent, id = wx.ID_ANY, title = u"计算机插值 v0.1", pos = wx.DefaultPosition, size = wx.Size( 508,530 ), style = wx.DEFAULT_FRAME_STYLE|wx.FRAME_SHAPED|wx.TAB_TRAVERSAL )

        self.SetSizeHintsSz( wx.DefaultSize, wx.DefaultSize )
        self.SetForegroundColour( wx.SystemSettings.GetColour( wx.SYS_COLOUR_3DLIGHT ) )

        ####################################################################
        self.MainMenu = wx.MenuBar( 0 )
        self.File = wx.Menu()
        self.SaveAs = wx.MenuItem( self.File, wx.ID_ANY, u"另存为...", wx.EmptyString, wx.ITEM_NORMAL )
        self.File.AppendItem( self.SaveAs )

        self.Exit = wx.MenuItem( self.File, wx.ID_ANY, u"退出...", wx.EmptyString, wx.ITEM_NORMAL )
        self.File.AppendItem( self.Exit )

        self.MainMenu.Append( self.File, u"文件" ) 

        self.About_M = wx.Menu()
        self.About = wx.MenuItem( self.About_M, wx.ID_ANY, u"关于", wx.EmptyString, wx.ITEM_NORMAL )
        self.About_M.AppendItem( self.About )

        self.MainMenu.Append( self.About_M, u"关于" ) 

        self.SetMenuBar( self.MainMenu )

        ####################################################################        
        MainSizer = wx.BoxSizer( wx.VERTICAL )

        self.MainPanel = wx.Panel( self, wx.ID_ANY, wx.DefaultPosition, wx.DefaultSize, wx.TAB_TRAVERSAL )
        UserSizer = wx.BoxSizer( wx.VERTICAL )

        upperSizer = wx.BoxSizer( wx.HORIZONTAL )
        ####################################################################

        self.TextExplanation = wx.StaticText( self.MainPanel, wx.ID_ANY, u"请在下面输入框内输入要插值的数，以空格间隔。\n输入范围在(1.2, 2.0)。", wx.DefaultPosition, wx.DefaultSize, 0 )
        self.TextExplanation.Wrap( -1 )
        upperSizer.Add( self.TextExplanation, 0, wx.ALL, 20 )

        upperSizer.AddSpacer( ( 0, 0), 1, wx.EXPAND, 5 )

        RadioBoxInterpolationChoices = [ u"线性插值", u"抛物线插值" ]
        self.RadioBoxInterpolation = wx.RadioBox( self.MainPanel, wx.ID_ANY, u"插值种类", wx.DefaultPosition, wx.DefaultSize, RadioBoxInterpolationChoices, 1, wx.RA_SPECIFY_COLS )
        self.RadioBoxInterpolation.SetSelection( 1 )
        upperSizer.Add( self.RadioBoxInterpolation, 0, wx.ALL, 5 )

        UserSizer.Add( upperSizer, 1, wx.ALL|wx.EXPAND|wx.SHAPED, 5 )

        lowerSizer = wx.BoxSizer( wx.HORIZONTAL )

        self.TextCtrVal = wx.TextCtrl( self.MainPanel, wx.ID_ANY, wx.EmptyString, wx.DefaultPosition, wx.DefaultSize, wx.TE_PROCESS_ENTER )
        lowerSizer.Add( self.TextCtrVal, 0, wx.ALL, 20 )

        lowerSizer.AddSpacer( ( 0, 0), 1, wx.EXPAND, 5 )

        self.ButtonCal = wx.Button( self.MainPanel, wx.ID_ANY, u"计算", wx.DefaultPosition, wx.DefaultSize, 0 )
        lowerSizer.Add( self.ButtonCal, 0, wx.ALL, 20 )

        self.ButtonCls = wx.Button( self.MainPanel, wx.ID_ANY, u"清空", wx.DefaultPosition, wx.DefaultSize, 0 )
        lowerSizer.Add( self.ButtonCls, 0, wx.ALL, 20 )

        UserSizer.Add( lowerSizer, 1, wx.EXPAND|wx.SHAPED, 5 )

        PlotSizer = wx.BoxSizer( wx.VERTICAL )

        #################################################
        p1 = PlotPanel(self)
        PlotSizer.Add(p1, 1, wx.EXPAND |wx.ALL,1)

        #################################################    
        UserSizer.Add( PlotSizer, 1, wx.EXPAND, 5 )

        self.MainPanel.SetSizer( UserSizer )
        self.MainPanel.Layout()
        UserSizer.Fit( self.MainPanel )
        MainSizer.Add( self.MainPanel, 1, wx.EXPAND |wx.ALL, 1 )

        self.SetSizer( MainSizer )
        self.Layout()

        self.Centre( wx.BOTH )

        # Connect Events
        self.Bind( wx.EVT_MENU, self.SaveAsFile, id = self.SaveAs.GetId() )
        self.Bind( wx.EVT_MENU, self.ExitNow, id = self.Exit.GetId() )
        self.Bind( wx.EVT_MENU, self.Dialog, id = self.About.GetId() )
        self.TextCtrVal.Bind( wx.EVT_TEXT_ENTER, self.Calculate )
        self.ButtonCal.Bind( wx.EVT_BUTTON, self.Calcualte )
        self.ButtonCls.Bind( wx.EVT_BUTTON, self.ClearPlot )

        # Necessary varibles
        selection = self.RadioBoxInterpolation.GetSelection()       

    def __del__( self ):
        pass

    # Virtual event handlers, overide them in your derived class
    def SaveAsFile( self, event ):
        event.Skip()

    def ExitNow( self, event ):
        self.Close(True) 

    def Dialog( self, event ):
        dlg = wx.MessageDialog( self, u"Test", u"Test", wx.OK)
        dlg.ShowModal() 
        dlg.Destroy() 

    def Calculate( self, event ):
        event.Skip()

    def Calcualte( self, event ):
        event.Skip()

    def ClearPlot( self, event ):
        event.Skip()

###########################################################################
## Class PlotPanel
###########################################################################

class PlotPanel(wx.Panel):
    def __init__(self,parent):
        wx.Panel.__init__(self,parent, -1,size=(300,530))
        self.sizer = wx.BoxSizer(wx.VERTICAL)
        self.figure = matplotlib.figure.Figure(figsize=(5,4))
        self.axes = self.figure.add_subplot(111)
        self.y_max = 2.0
        self.canvas = FigureCanvas(self,-1,self.figure)

        self.sizer.Add(self.canvas,proportion =1, border = 5,flag = wx.ALL | wx.EXPAND)
        self.SetSizer(self.sizer)

if __name__ == '__main__': 
    app = wx.PySimpleApp()
    app.frame = MainFrame(None)
    app.frame.Show()
    app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T18:42:51.440

我更改了两行代码，并认为它可能是您正在寻找的。

```
UserSizer.Add( upperSizer, 0, wx.EXPAND, 5 ) 
```

和

```
UserSizer.Add( lowerSizer, 0, 0, 5 ) 
```

这是更新的代码：

```
 # -*- coding: utf-8 -*-

###########################################################################
## Python code generated with wxFormBuilder (version Oct  8 2012)
## http://www.wxformbuilder.org/
##
## PLEASE DO "NOT" EDIT THIS FILE!
###########################################################################

import os
import wx
import wx.xrc
import matplotlib
matplotlib.use('WXAgg')
from matplotlib.figure import Figure
from matplotlib.backends.backend_wxagg import \
    FigureCanvasWxAgg as FigureCanvas, \
    NavigationToolbar2WxAgg as NavigationToolbar
#from numpy import arange, sin, pi

###########################################################################
## Class MainFrame
###########################################################################

class MainFrame ( wx.Frame ):

    def __init__( self, parent ):
        wx.Frame.__init__ ( self, parent, id = wx.ID_ANY, title = u"计算机插值 v0.1", pos = wx.DefaultPosition, size = wx.Size( 508,530 ), style = wx.DEFAULT_FRAME_STYLE|wx.FRAME_SHAPED|wx.TAB_TRAVERSAL )

        self.SetSizeHintsSz( wx.DefaultSize, wx.DefaultSize )
        self.SetForegroundColour( wx.SystemSettings.GetColour( wx.SYS_COLOUR_3DLIGHT ) )

        ####################################################################
        self.MainMenu = wx.MenuBar( 0 )
        self.File = wx.Menu()
        self.SaveAs = wx.MenuItem( self.File, wx.ID_ANY, u"另存为...", wx.EmptyString, wx.ITEM_NORMAL )
        self.File.AppendItem( self.SaveAs )

        self.Exit = wx.MenuItem( self.File, wx.ID_ANY, u"退出...", wx.EmptyString, wx.ITEM_NORMAL )
        self.File.AppendItem( self.Exit )

        self.MainMenu.Append( self.File, u"文件" )

        self.About_M = wx.Menu()
        self.About = wx.MenuItem( self.About_M, wx.ID_ANY, u"关于", wx.EmptyString, wx.ITEM_NORMAL )
        self.About_M.AppendItem( self.About )

        self.MainMenu.Append( self.About_M, u"关于" )

        self.SetMenuBar( self.MainMenu )

        ####################################################################
        MainSizer = wx.BoxSizer( wx.VERTICAL )

        self.MainPanel = wx.Panel( self, wx.ID_ANY, wx.DefaultPosition, wx.DefaultSize, wx.TAB_TRAVERSAL )
        UserSizer = wx.BoxSizer( wx.VERTICAL )

        upperSizer = wx.BoxSizer( wx.HORIZONTAL )
        ####################################################################

        self.TextExplanation = wx.StaticText( self.MainPanel, wx.ID_ANY, u"请在下面输入框内输入要插值的数，以空格间隔。\n输入范围在(1.2, 2.0)。", wx.DefaultPosition, wx.DefaultSize, 0 )
        self.TextExplanation.Wrap( -1 )
        upperSizer.Add( self.TextExplanation, 0, wx.ALL, 20 )

        upperSizer.AddSpacer( ( 0, 0), 1, wx.EXPAND, 5 )

        RadioBoxInterpolationChoices = [ u"线性插值", u"抛物线插值" ]
        self.RadioBoxInterpolation = wx.RadioBox( self.MainPanel, wx.ID_ANY, u"插值种类", wx.DefaultPosition, wx.DefaultSize, RadioBoxInterpolationChoices, 1, wx.RA_SPECIFY_COLS )
        self.RadioBoxInterpolation.SetSelection( 1 )
        upperSizer.Add( self.RadioBoxInterpolation, 0, wx.ALL, 5 )

        UserSizer.Add( upperSizer, 0, wx.EXPAND, 5 )

        lowerSizer = wx.BoxSizer( wx.HORIZONTAL )

        self.TextCtrVal = wx.TextCtrl( self.MainPanel, wx.ID_ANY, wx.EmptyString, wx.DefaultPosition, wx.DefaultSize, wx.TE_PROCESS_ENTER )
        lowerSizer.Add( self.TextCtrVal, 0, wx.ALL, 20 )

        lowerSizer.AddSpacer( ( 0, 0), 1, wx.EXPAND, 5 )

        self.ButtonCal = wx.Button( self.MainPanel, wx.ID_ANY, u"计算", wx.DefaultPosition, wx.DefaultSize, 0 )
        lowerSizer.Add( self.ButtonCal, 0, wx.ALL, 20 )

        self.ButtonCls = wx.Button( self.MainPanel, wx.ID_ANY, u"清空", wx.DefaultPosition, wx.DefaultSize, 0 )
        lowerSizer.Add( self.ButtonCls, 0, wx.ALL, 20 )

        UserSizer.Add( lowerSizer, 0, 0, 5 )

        PlotSizer = wx.BoxSizer( wx.VERTICAL )

        #################################################
        p1 = PlotPanel(self)
        PlotSizer.Add(p1, 1, wx.EXPAND |wx.ALL,1)

        #################################################
        UserSizer.Add( PlotSizer, 1, wx.EXPAND, 5 )

        self.MainPanel.SetSizer( UserSizer )
        self.MainPanel.Layout()
        UserSizer.Fit( self.MainPanel )
        MainSizer.Add( self.MainPanel, 1, wx.EXPAND |wx.ALL, 1 )

        self.SetSizer( MainSizer )
        self.Layout()

        self.Centre( wx.BOTH )

        # Connect Events
        self.Bind( wx.EVT_MENU, self.SaveAsFile, id = self.SaveAs.GetId() )
        self.Bind( wx.EVT_MENU, self.ExitNow, id = self.Exit.GetId() )
        self.Bind( wx.EVT_MENU, self.Dialog, id = self.About.GetId() )
        self.TextCtrVal.Bind( wx.EVT_TEXT_ENTER, self.Calculate )
        self.ButtonCal.Bind( wx.EVT_BUTTON, self.Calcualte )
        self.ButtonCls.Bind( wx.EVT_BUTTON, self.ClearPlot )

        # Necessary varibles
        selection = self.RadioBoxInterpolation.GetSelection()

    def __del__( self ):
        pass

    # Virtual event handlers, overide them in your derived class
    def SaveAsFile( self, event ):
        event.Skip()

    def ExitNow( self, event ):
        self.Close(True)

    def Dialog( self, event ):
        dlg = wx.MessageDialog( self, u"Test", u"Test", wx.OK)
        dlg.ShowModal()
        dlg.Destroy()

    def Calculate( self, event ):
        event.Skip()

    def Calcualte( self, event ):
        event.Skip()

    def ClearPlot( self, event ):
        event.Skip()

###########################################################################
## Class PlotPanel
###########################################################################

class PlotPanel(wx.Panel):
    def __init__(self,parent):
        wx.Panel.__init__(self,parent, -1,size=(300,530))
        self.sizer = wx.BoxSizer(wx.VERTICAL)
        self.figure = matplotlib.figure.Figure(figsize=(5,4))
        self.axes = self.figure.add_subplot(111)
        self.y_max = 2.0
        self.canvas = FigureCanvas(self,-1,self.figure)

        self.sizer.Add(self.canvas,proportion =1, border = 5,flag = wx.ALL | wx.EXPAND)
        self.SetSizer(self.sizer)

if __name__ == '__main__':
    app = wx.PySimpleApp()
    app.frame = MainFrame(None)
    app.frame.Show()
    app.MainLoop() 
```

# html - div 中的 CSS/HTML 奇怪的文本位置

> ID：13542995
> 
> 赞同：0
> 
> 时间：2012-11-24T16:15:59.697
> 
> 标签：html, css

我现在正在制作一个网站，它在左列有一个固定的宽度，在右列有一个填充剩余宽度的列。我有一个问题，主列中的文本（左侧的列，主页内容所在的位置）似乎从 div 的中间开始，这很丑陋，而不是我想要的。我希望主列中的文本从顶部开始，而不是在内容框的中间。

我正在开发的网站的在线示例[http://creationation.eu/testsite/](http://creationation.eu/testsite/)

```
#content{
    position: relative;
    display: block;
    top: 132px;
    margin-right: 455px;
    background-color: #F2F2F2;
    padding-top: 15px;
    padding-left: 30px;
    padding-right: 30px;
    text-align: left;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T16:44:34.090

更新你的CSS：

```
#content {
    background-color: #F2F2F2;
    border: 3px none;
    float: left;
    height: 610px;
    margin-top: 22px;
    width: 535px;
} 
```

和

```
#nav {
    background-color: #F2F2F2;
    border-bottom: 2px solid #000000;
    border-top: 2px solid #000000;
    float: left;
    font-size: 35px;
    list-style: none outside none;
    margin: 0;
    min-width: 100%;
    padding: 0;
    position: relative;
} 
```

# html - HTML5 中的清单是什么？以及如何使用它？

> ID：13542998
> 
> 赞同：-1
> 
> 时间：2012-11-24T16:16:13.403
> 
> 标签：html

即使网络连接中断，我也希望页面对用户可见，因此有办法将页面存储至少一段时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T16:20:08.010

在 SO 答案中描述缓存清单将占用大量空间。而不是这样做，我将为大家节省一些时间并为您发布教程：http: [//www.html5rocks.com/en/tutorials/appcache/beginner/](http://www.html5rocks.com/en/tutorials/appcache/beginner/)

如果您无法理解缓存清单的特定部分，则 StackOverflow 更适合。