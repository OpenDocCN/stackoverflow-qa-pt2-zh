# StackOverflow 问答 12597000-12597999

# ios - mapkit iphone中的图像

> ID：12597000
> 
> 赞同：0
> 
> 时间：2012-09-26T07:50:47.987
> 
> 标签：ios, mapkit

我是mapkit的新手。我遵循了一个教程并在我的项目中使用了该代码。

我想显示图像而不是图钉，并且该图像位于资源文件夹中。我应该怎么把它弄进去？

谢谢

到目前为止的代码：

`viewDidLoad`方法`NewMapViewController`：

```
MKCoordinateRegion region;
region.center.latitude=/*latitude*/;
region.center.longitude=/*longitude*/;
region.span.longitudeDelta=0.01;
region.span.latitudeDelta=0.01;
[mapview setRegion:region animated:YES];
MapAnnotation *ann=[[MapAnnotation alloc]init];
ann.title=@"MLeaf";
ann.subtitle=@"Headquarters";
ann.coordinate=region.center;
[mapview addAnnotation:ann];

MapAnnotationView *ann1=[[MapAnnotationView alloc]initWithAnnotation:ann reuseIdentifier:YES];
ann1.canShowCallout=YES;
ann1.img=[UIImage imageNamed:@"eg.png"]; 
```

我在 MapAnnotation 中初始化了标题和副标题，并在 MapAnnotationView 中初始化了 canShowCallout 和 img

这是正确的方法吗？我的应用程序崩溃是因为`NSInvalidArgumentException`我在 viewdidload 中初始化 MapAnnotationView 的那一行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T08:15:33.010

检查此[如何将自定义引脚添加到 iPhone MapKit？](https://stackoverflow.com/questions/2699171/how-do-i-add-custom-pins-to-the-iphone-mapkit)和[iOS MapKit 自定义引脚](https://stackoverflow.com/questions/7145797/ios-mapkit-custom-pins)。主要是，您必须在地图视图的委托方法（`-(MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation`）中初始化地图注释视图。

# sql - 在 SQL 中使用 Pivot 查询进行多个聚合和自定义值

> ID：12597001
> 
> 赞同：2
> 
> 时间：2012-09-26T07:50:49.587
> 
> 标签：sql, sql-server, sql-server-2008-r2, pivot

我正在构建数据透视查询以在报告表单中显示数据，如下所示。

```
CREATE TABLE #Table1 (ColId INT)
INSERT INTO #Table1 VALUES(29)
INSERT INTO #Table1 VALUES(49)
INSERT INTO #Table1 VALUES(59)

DECLARE @cols NVARCHAR(2000)
SELECT  @cols = COALESCE(@cols + ',[' + Convert(varchar(10), ColId)  + ']',
                         '[' + Convert(varchar(10), ColId) + ']')
FROM    #Table1
print (@cols)

Declare @final NVARCHAR(2000)
set @final=
'SELECT *
FROM (
SELECT tv
        , rv
        , dpv
FROM (

      ---Inner join query with multiple tables ----    

) As C
) P
PIVOT (
Max(dpv)
FOR tv IN (' + @cols + ')
) AS PVT'

exec(@final)

drop table #Table1 
```

和上述查询的结果如下。

![在此处输入图像描述](../Images/249871867d174c003373de20c423e2cc.png)

我想要如下结果

![在此处输入图像描述](../Images/0b1e2bf5dcf09f784c00705c0679630b.png)

在此我需要在 tv 中附加“C”，因此将有 2 列 29C 和 29，在 29C 下我需要显示 29C + dpv，在 29 下我需要显示 tv + dpv 的总和（即 29+ 5=34）像所有列一样。

我怎样才能实现它？我们如何添加多个聚合值？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T10:04:54.050

添加这个...

```
DECLARE @c2 varchar(2000)
select @c2 = ''
SELECT  
        @c2 = @c2+ ', '''+ col + 'C+'' + CONVERT(varchar(5), ['+col+']) as ['+col+'C], ['+col+']+'+col+' as ['+col+'] '                             
FROM    (select convert(varchar(10),colid) as col from #Table1) v

declare @sql nvarchar(2000)
    select @sql = 'select rv ' + @c2 + ' from (' +@final + ') v'

exec (@sql) 
```

# rabbitmq - RabbitMQ：交换、队列和绑定——谁来设置什么？

> ID：12597006
> 
> 赞同：17
> 
> 时间：2012-09-26T07:51:08.610
> 
> 标签：rabbitmq, message-queue, publish-subscribe

使用 RabbitMQ 发送消息时，您基本上有交换、队列和绑定。我已经了解他们的想法以及它们之间的关系，但我不太确定谁设置了什么。

基本上，我的应用程序中有三个场景。

# 场景 1：一个发布者，多个工作进程

我想要实现的是一个向队列发送消息的组件，并且应该有几个工作进程来处理该队列中的项目。这对我来说似乎很容易。设置如下：

*   交换：1 次“直接”类型的交换
*   队列：1个队列
*   Binding：队列绑定到交换机

每当一条消息被发送到交换器时，它就会被传递到队列中，并且工作进程会得到它们的任务。

一切都将是耐用的。

那么谁设置了什么？在我看来：

*   生产者创建交换
*   生产者创建队列（因为当前可能没有工作进程在运行，否则如果没有队列，消息将丢失）
*   生产者将队列绑定到交换器
*   消费者只需在队列中收听

正确的？

# 场景 2：一个发布者，多个订阅者，易失性消息

第二种情况完全不同。基本上，这是一个 pub / sub 场景，其中每条消息都发送到每个当前正在侦听的客户端。如果客户端离线，它将不再接收消息，并且它们不会为他存储在任何地方。这意味着以下设置：

*   交换：1 次交换类型为“扇出”
*   队列：n个队列，每个消费者一个
*   Binding：每个队列都需要绑定到exchange

那么谁设置了什么？在我看来：

*   生产者创建交换
*   消费者创建队列（因为它是自己的队列，生产者无法知道谁对消息感兴趣）
*   消费者为其队列创建与交换的绑定
*   消费者监听它的队列

正确的？

# 场景 3：一个发布者，多个订阅者，持久消息

与场景 2 基本相同，但如果消费者下线，消息不应丢失。在我看来，这不应该改变任何东西——对吧？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T16:23:11.640

我认为你说的是​​对的，除了场景 3。

如果消费者离线时消息不应该丢失，那么您需要持久队列并且队列不能被自动删除。

其他一切对我来说似乎都是正确的。

在场景 2 的情况下，您还可以让 RabbitMQ 为您自动生成队列名称，然后让这些队列在消费者断开连接后自动删除。

# ios - 如何在提交到应用商店之前测试应用中为 iCloud 同步所做的更改

> ID：12597010
> 
> 赞同：2
> 
> 时间：2012-09-26T07:51:23.393
> 
> 标签：ios, testing, icloud

我有一种情况，我的应用从 iCloud 下载时无法在新的 iPhone 设备上运行。我假设考虑了该条件并应用了补丁以使其在此 icloud 同步条件下工作。

但是在提交之前，我如何确认我的应用程序可以完美地解决 iCloud 问题？

我们是否有办法从 iCloud 同步修改后的二进制文件，而不是我们在应用商店发布的二进制文件。

我尝试在 iCloud 上备份修改后的二进制文件。在恢复时，它试图恢复修改后的二进制文件，但它默默地失败了。

任何帮助将不胜感激。

# cloudbees - 复制到发布存储库

> ID：12597016
> 
> 赞同：1
> 
> 时间：2012-09-26T07:51:42.727
> 
> 标签：cloudbees

我想知道用简单的 ant 脚本将构建结果复制到发布存储库的最简单方法是什么。我希望手动触发它（而不是在everey构建上）。你能给我一些指示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T07:51:42.727

部署到 CloudBees 发布存储库需要 webDav 客户端和存储库凭据，因此最简单的 ant 脚本方法是使用[maven-ant-tasks](http://maven.apache.org/ant-tasks/index.html)

```
<artifact:deploy file="target/my-project-1.0.jar">
  <remoteRepository url="dav:https://repository-nicolas.forge.cloudbees.com/release/"
                    id="cloudbees-private-repository" />      
  <pom refid="mypom"/>
</artifact:deploy> 
```

使用 id "cloudbees-private-repository" 存储库凭据将从默认的 maven settings.xml 中获取，该设置是在您的帐户上使用伪造凭据设置的，因此您不必传递它们。您也可以将它们作为参数传递：

```
<remoteRepository url="dav:https://repository-nicolas.forge.cloudbees.com/release/">
  <authentication username="..." privateKey="..."/>
</remoteRepository> 
```

# javascript - Twitter Bootstrap 下拉菜单在平板电脑上不可点击

> ID：12597018
> 
> 赞同：13
> 
> 时间：2012-09-26T07:51:47.350
> 
> 标签：javascript, android, twitter-bootstrap, tablet

在我们网站的菜单上，我们有一个用于用户帐户选项的按钮下拉菜单，该选项会根据用户名和登录状态动态变化。它在浏览器中运行良好，但是，在 Android 平板电脑（使用 Firefox）上，我们似乎无法单击下拉列表中的任何链接，尽管确实出现了链接，但无论何时单击它们，下拉列表都会消失并且什么也没有发生。

我正在使用带有[下拉插件](http://twitter.github.com/bootstrap/javascript.html#dropdowns)的最新版本的 Bootstrap(2.1.1) 。它适用于台式机，并且可以通过平板电脑单击，单击时链接会关闭弹出窗口。

这是代码：

```
 <div class="btn-group pull-right">
        <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
          <i class="icon-user"></i> <?php echo $_SESSION['username']; ?>
          <span class="caret"></span>
        </a>
        <ul class="dropdown-menu">
          <li><a href="/Profile">Profile</a></li>
          <li class="divider"></li>
          <li><a href="#" onClick="logOut();">Sign Out</a></li>
        </ul>
      </div> 
```

有谁知道让平板电脑上的链接可点击的方法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-03T01:17:41.313

这是 Bootstrap 中的一个错误，有望在 2.1.2 中得到纠正 - 同时，GitHub 上有两个流行的问题（[#2975](https://github.com/twitter/bootstrap/issues/2975)和[#4550](https://github.com/twitter/bootstrap/issues/4550)）包含临时修复。

这个 jQuery 修复似乎适用于大多数人，并且不会修改 Bootstrap 源：

```
$('body').on('touchstart.dropdown', '.dropdown-menu', function (e) { e.stopPropagation(); }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T12:57:33.180

要修复子菜单：

```
$('body').on('touchstart.dropdown', '.dropdown-menu', function (e) { e.stopPropagation(); })
         .on('touchstart.dropdown', '.dropdown-submenu', function (e) { e.stopPropagation(); }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T03:05:10.497

这已在 v2.2 及更高版本中得到确认。

# assembly - 比较多个字节

> ID：12597025
> 
> 赞同：-1
> 
> 时间：2012-09-26T07:52:09.747
> 
> 标签：assembly, microchip

我从 USART 接收字节并将它们放入内存寄存器。字节是我必须阅读并相应地回复消息的命令。正如我知道如何比较单个字节，会建议我一个算法来比较多个字节。

例如，接收到的字节在 hex 16 04 32 01 00 32 中看起来像这样。它们的长度不同，因此比较会更加困难。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T08:51:57.627

您只需要比较足够的字节就可以清楚地识别它是什么类型的消息（在第一步中您不需要关心的实际数据有效负载）。对于大多数串行协议，它只是指定位置的一个字节。

通过查看您的示例消息，我猜第一个字节是消息类型，第二个字节是数据有效负载的长度。如果是这种情况，那么您不需要检查比第一个字节更多的内容并相应地跳转。这主要是通过使用消息类型（第一个字节）索引的跳转表来完成的。

处理实际消息数据有效负载的函数可以对数据做任何它想做的事情，但您不需要检查完整的消息只是为了找出如何处理该消息。

# c++ - c++ Qt常量违规？

> ID：12597026
> 
> 赞同：0
> 
> 时间：2012-09-26T07:52:12.400
> 
> 标签：c++, map, constants, qmap

我有一个类 orders，它的实例存储在 QMap/Map 中，并且有一个 Key:int, value:order 模式。一切都很顺利，直到我开始遍历地图并访问类的函数。首先，我尝试使用它的 getter 方法打印出订单对象的值，例如：

```
orderSet.value(i).getDate().toString("dd/MM/yyyy");
//OrderSet is my map 
```

然而，这产生了一个错误

```
error: passing 'const order' as 'this' argument of 'QDate order::getDate()' discards qualifiers [-fpermissive] 
```

然后我通过在 getter 方法中添加“const”来解决这个问题，前一行代码将成功运行并将对象日期打印为字符串。

但是现在的问题是我无法实现我的 setter 方法，因为我会得到同样的错误，而且显然 setter 方法有一行改变了原始成员变量，所以这本身就会违反常量规则，所以我怎样才能改变对象地图中的变量？？

如果有帮助，这是我的代码：

```
class order
{
    QDate dateOrdered;
    int totOrders;
    double totValue;

public:
   order();
   order(QDate,int,double);
   //Sets
   void setDate(QDate); //Cant add const since values are being altered
   void setOrderTot(int);
   void setValueTot(double);

   //Gets
   QDate getDate() const; //Adding const solved these methods 
   int getOrderTot()const;
   double getValueTot()const;

};

#endif // ORDER_H 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T08:52:28.130

[QMap::value()](http://doc.qt.digia.com/latest/qmap.html#value)返回 a `const T`，因此您不能在其上调用非 const 成员函数。此外，它返回映射中对象的*副本*，因此调用 setter 不会按照您的想法进行，并且映射中的对象将保持不变。唯一返回引用的成员函数是`operator[]`，但请记住，您首先需要检查映射是否包含带有 的键`contains()`，因为`operator[]`会将其添加到映射中。

或者，您可以使用迭代器访问项目并对其进行修改。

```
QMap<int, order>::iterator it = orderSet.find(i);
if (it != orderSet.end()) {
    // Found it
    it->callSetter();
} 
```

# wix - Wix 的 TFS 构建服务器问题 - 未定义的预处理器变量“$(var.Interview.ProjectDir)”

> ID：12597030
> 
> 赞同：1
> 
> 时间：2012-09-26T07:52:29.887
> 
> 标签：wix, tfsbuild

我正在尝试为我们的项目设置构建服务器，以便可以自动化构建。

我可以在本地构建，我刚刚签入构建，但我不断收到此错误

C:\Builds\1\Deployment\Sources\Services\Deployment\Interview.wxs(19)：错误 CNDL0150：未定义的预处理器变量“$(var.Interview.ProjectDir)”。

在本地它可以工作，所以参考是存在的，但在 TFS 上它似乎不存在。

我才发现我太仓促了

也有这个警告

C:\Program Files\MSBuild\Microsoft\WiX\v3.x\wix2010.targets (971)：引用的项目 '..\Interview\Interview.csproj' 不存在。

有任何想法吗？

# html - 在 Unicode 中转换字符串

> ID：12597032
> 
> 赞同：1
> 
> 时间：2012-09-26T07:52:32.180
> 
> 标签：html, unicode, joomla

我想像这样在 Unicode 中隐藏一个简单的字符串：

```
simple string =  `Pritesh & Nilesh is a good friend.` 
```

我想以这种形式获得：

```
string =  `Pritesh&nbsp;&amp;&nbsp;Nilesh&nbsp;is&nbsp;good&nbsp;friend.` 
```

我想转换成这种类型的字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T12:49:14.547

你可以`htmlentities`这样尝试

```
$text= "Pritesh & Nilesh is good friend.";

$text2=htmlentities($text); //for converting all special character in string

$text3=str_ireplace(' ','&nbsp;',$text2); //for removing the white space 
```

欲了解更多信息，请访问此[链接](http://php.net/manual/en/function.htmlentities.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T12:56:45.467

您需要在 php.ini 中使用 htmlentities()。这会将所有特殊的 html 字符替换为其 &xxxx; 符号。PHP 手册页在[这里](http://php.net/manual/en/function.htmlentities.php)获取更多信息。对于您的示例，这将是：

```
$string = "Pritesh & Nilesh is good friend.";
$string = htmlentities($string, ENT_HTML5); 
```

但是，这不会用换行符替换您的空格，因为这些被认为是标准的 html 字符，无论如何在 99.9% 的情况下都不需要。但是，如果真的需要这个，你可以使用任何一个 php：

```
$string = str_replace(" ", "&nbsp;", $string); 
```

或JavaScript：

```
var myString= $string;
myString.replace(/ /g,'&nbsp;'); 
```

就像[这里所做的那样](https://stackoverflow.com/questions/8084613/to-replace-with-nbsp)

# iphone - 推送通知问题

> ID：12597033
> 
> 赞同：0
> 
> 时间：2012-09-26T07:52:41.490
> 
> 标签：iphone, push

在我的 iPhone 应用程序中，我可以获得推送通知，它显示为警报视图。当我单击它在指定视图中导航时，我想要在那个警报“查看详细信息”按钮中。可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-02T05:01:20.020

[http://www.raywenderlich.com/32960/apple-push-notification-services-in-ios-6-tutorial-part-1](http://www.raywenderlich.com/32960/apple-push-notification-services-in-ios-6-tutorial-part-1)

浏览这个网站。它解释了如何从您可以导航到特定视图的位置清楚地处理以下功能

如果 App 处于 Ative/InActive/Background 状态

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo 
```

如果应用程序不在后台：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T07:55:29.010

点击推送通知警报，您可以导航到应用程序的特定视图；但是您不能在该警报框中添加按钮。

为此，您需要实现两个委托方法。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
```

和

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo 
```

第一个用于检查用户单击通知时是否启动了应用程序。如果是这样，那么在该方法中，您可以将适当的视图控制器推送到堆栈上，就像您通常使用应用内使用一样。

有关更多详细信息，请[在此处查看苹果的文档](http://developer.apple.com/library/ios/#DOCUMENTATION/NetworkingInternet/Conceptual/RemoteNotificationsPG/IPhoneOSClientImp/IPhoneOSClientImp.html#//apple_ref/doc/uid/TP40008194-CH103-SW4)。

要查看确切的[示例，您可以](http://www.x2x1.com/show/8350178/how_to_open_different_view_controllers_on_app_launch_in_iphone_app_.aspx)转到此页面，该页面显示了当用户单击通知时如何带来视图。

# android - 对话框显示两次

> ID：12597039
> 
> 赞同：2
> 
> 时间：2012-09-26T07:52:56.970
> 
> 标签：android, dialog, spinner

我正在我的 上制作一个对话框`EditText`，所以当我触摸 时`EditText`，该框将显示 (setOntouchListener)。问题是：当我触摸 时`EditText`，该框显示两次（当我单击框中的关闭按钮时，第二个框显示并且框的内容完全相同）

```
FoodText.setOnTouchListener(new OnTouchListener() {
    @Override           
    public boolean onTouch(View arg0, MotionEvent arg1) {

        final Dialog dialog = new Dialog(context);
        dialog.setContentView(R.layout.customfoodinput);
        dialog.setTitle("Insert your Food");

        spinner1 = (Spinner) dialog.findViewById(R.id.spinner_foodTime);            
        spinner2 = (Spinner) dialog.findViewById(R.id.spinner_foodType);

        foodtimeArray.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spinner1.setAdapter(foodtimeArray);

        foodtypeArray.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spinner2.setAdapter(foodtypeArray);

        Button btntampung = (Button) dialog.findViewById(R.id.btn_inputfood);

        btntampung.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {

                Object item = spinner1.getSelectedItem();
                String dataspinner = item.toString();

                Object item2 = spinner2.getSelectedItem();
                String dataspinner2 = item2.toString();

                dialog.dismiss();
                FoodText.setText(dataspinner + "; " + dataspinner2);

            }
        });

        dialog.show();

        return false;           
    }
}); 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T08:17:04.233

问题是触摸事件检测到的交互比您想要的要多。它检测到按下和释放，因此被调用了两次。您只想检测新闻，您可以使用 if ( `if(arg1.getAction(); == MotionEvent.ACTION_DOWN)`) 检查 touchListener 中的事件类型：

```
FoodText.setOnTouchListener(new OnTouchListener() {
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        if(event.getAction() == MotionEvent.ACTION_DOWN)
            showDialog();

        return false;
   }
}); 
```

如果您想要一个更简单的解决方案，您可以将您的`onTouchListener`for 替换为`onClickListener`.

而不是设置`setOnTouchListener(new OnTouchListener()`和覆盖`public boolean onTouch(View arg0, MotionEvent arg1)`替换这两行代码：

```
FoodText.setOnClickListener(new OnClickListener() {
@Override
    public void onClick(View v) {
    }
}); 
```

如果您想忽略键盘，请尝试使用[此问题](https://stackoverflow.com/questions/6066095/how-to-prevent-keyboard-appearing-for-edittext-that-is-not-enabled/6216789#6216789)禁用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:12:32.177

您必须使用 onClickListener！

如果您将手指放在屏幕上并四处移动，您会看到针对您手指的每个新位置出现几个框。

# sql-server - 使用 Dynamic Pivot 时超出字符串的容量

> ID：12597047
> 
> 赞同：0
> 
> 时间：2012-09-26T07:53:13.740
> 
> 标签：sql-server, database, pivot

我在一些网站上走了一圈，发现解决 Dynamic Pivot 的（唯一）方法是将查询存储为字符串，然后执行该字符串查询。但是，就我而言，我似乎无法应用此解决方案，因为列数超过了一个字符串的容量。

```
declare @columns nvarchar(max)

select @columns = COALESCE(@columns + ', ','') + QUOTENAME(name)
from table1 
```

虽然我声明了@columns 的最大容量，但它仍然没有足够的空间并导致错误。有什么办法可以解决这种情况，或者如何在不将查询存储为字符串的情况下构建动态数据透视？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T07:58:52.207

如果您的列名仅包含英文字母，请尝试**Varchar(MAX)**而不是 Nvarchar(max)

Varchar(max) 最多可以容纳 2B 的数据，而 Nvarchar(max) 只能容纳 4k 个字符

# image - 如何用 html5/css3 技术替换图像

> ID：12597049
> 
> 赞同：0
> 
> 时间：2012-09-26T07:53:27.263
> 
> 标签：image, html, css

请参阅此图片![在此处输入图像描述](../Images/4a0fa10b02b9a491eaf3b643cfaedf67.png)或此处[http://cl.ly/image/0a2R2V0C1y2l](http://cl.ly/image/0a2R2V0C1y2l)

我们有一个使用此图像作为背景图像的 div

```
.header_background{
    display: inline-block;
    position: relative;
    top: 10px; left: 0; right: 0; bottom: 0;
    background-image: url(../img/header-back.png);
    height: 47px;
    width: 899px;
    float: right;   
} 
```

它有圆角和渐变。

我们将在 div 中放入其他 html，如文本、更多 div 元素和图像按钮。

有没有办法让我不使用图像作为语音气泡，而是使用 html5/css3 技术？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T08:01:25.747

我们可以使用 HTML5+CSS3 实现无图像背景。

[有关气泡](http://css-tricks.com/examples/ShapesOfCSS/)和[渐变背景](http://css-tricks.com/examples/CSS3Gradient/)CSS 技巧，请参阅教程。它会帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T08:13:16.073

检查这个[现场演示](http://jsfiddle.net/gionaf/sh6sE/)

这是代码：

```
.header_background {
    position: relative;
    background: #FFF;
    background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiPjxsaW5lYXJHcmFkaWVudCBpZD0iZzEiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4MT0iMCUiIHkxPSIwJSIgeDI9IjAlIiB5Mj0iMTAwJSI+PHN0b3Agb2Zmc2V0PSIwLjUiIHN0b3AtY29sb3I9IiNGRkZGRkYiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNDQ0NDQ0MiLz48L2xpbmVhckdyYWRpZW50PjxyZWN0IHg9IjAiIHk9IjAiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZzEpIiAvPjwvc3ZnPg==);
    background-image: -webkit-gradient(linear, center top, center bottom, color-stop(50%, #FFFFFF), color-stop(100%, #CCCCCC));
    background-image: -webkit-linear-gradient(top, #FFFFFF 50%, #CCCCCC 100%);
    background-image: -moz-linear-gradient(top, #FFFFFF 50%, #CCCCCC 100%);
    background-image: -ms-linear-gradient(top, #FFFFFF 50%, #CCCCCC 100%);
    background-image: -o-linear-gradient(top, #FFFFFF 50%, #CCCCCC 100%);
    background-image: linear-gradient(to bottom, #FFFFFF 50%, #CCCCCC 100%);
    border: 1px solid #CCC;
    padding:10px;
    -moz-border-radius:5px;
    -webkit-border-radius:5px;
    border-radius:5px;
}
.header_background:after, .header_background:before {
    right: 100%;
    border: solid transparent;
    content: " ";
    height: 0;
    width: 0;
    position: absolute;
}

.header_background:after {
    border-color:transparent;
    border-right-color: #FFF;
    border-width: 5px;
    top: 50%;
    margin-top: -5px;
}
.header_background:before {
    border-color:transparent;
    border-right-color:#CCC;
    border-width: 6px;
    top: 50%;
    margin-top: -6px;
}​ 
```

我已经使用了这个[在线渐变制作工具](http://www.colorzilla.com/gradient-editor/)，[请使用 css 箭头](http://cssarrowplease.com/)并稍作修改。

* * *

`data:image/svg+xml;base64,...etc...`是一个内联 SVG 图像，以 base64 编码。这将在不支持任何纯 CSS3 渐变功能的 IE9 上呈现渐变。

实际上[，其他现代浏览器](http://rod.vagg.org/2012/05/data-uri-svg/)（FF13+、Opera12+）也支持它，但正如[Lea Verou 报告](http://lea.verou.me/2011/08/css-gradients-are-much-faster-than-svg/)的那样，它比纯 CSS3 渐变慢，这就是为什么你仍然需要其他声明的原因。

* * *

对于 IE8，您可以使用渐变滤镜：

```
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#feffff', endColorstr='#eeeeee',GradientType=0 ); 
```

这是非常直接的（`GradientType=0`意味着垂直，如果你将它更改为`1`你将有一个水平渐变）。问题是IE9也支持它！因此，为避免重叠，您需要使用[条件注释](http://kaioa.com/node/107)。

在这种特定情况下，我建议您...不要对 IE8 不屑一顾。它只会显示一个白色背景（这就是我添加`background:#FFF;`为第一个声明的原因），这完全没问题。

# jenkins - 詹金斯的工作，可能有工作相互独立吗？

> ID：12597051
> 
> 赞同：1
> 
> 时间：2012-09-26T07:53:48.937
> 
> 标签：jenkins

我很想看到 Jenkins 有一个管道插件，这几乎就是我所关心的。

我想做的是配置一个管道“模板”，在其中分配作业并创建单独的参数。问题是我看到管道插件的工作方式以及一般的 Jenkins 是你分配一个作业来执行另一个作业。这使得两者紧密耦合，对吧？我想要一个名为“CleanAndBuild”的作业，我可以自己自动执行它，但我也想使用该作业作为管道的一部分。流水线和詹金斯的工作方式，我认为这不可能吗？它迫使您创建一支具有非常相似的工作概况的军队，对吗？

作业目前似乎作为类实例工作，而如果您知道我的意思，那么拥有一个作业“类”然后创建几个具有不同配置的作业“类实例”会很好......

# android - 无法在未调用 looper.prepare() asynctask 的线程内创建处理程序

> ID：12597057
> 
> 赞同：0
> 
> 时间：2012-09-26T07:54:01.773
> 
> 标签：android, android-asynctask, android-location, locationlistener

我正在使用以下异步类来显示对话框并获取用户的当前位置，但出现上述错误。

```
ProgressDialog progressDialog;

class LoadJsonTask extends AsyncTask<Void, Void, Void> {
      protected void onPreExecute() {
      progressDialog = ProgressDialog.show(NewTraveler.this, "", "Loading...");
    }

@Override
protected Void doInBackground(Void... arg0) {
try {
         // Acquire a reference to the system Location Manager
        LocationManager locationManager = (LocationManager) this
                    .getSystemService(Context.LOCATION_SERVICE);

    // Define a listener that responds to location updates
        LocationListener locationListener = new LocationListener() {
            public void onLocationChanged(Location location) {
                latitude = location.getLatitude();
                longitude = location.getLongitude();

                System.out.println("Latitude:- " + latitude);
                System.out.println("Longitude:- " + longitude);
        }

        public void onStatusChanged(String provider, int status,
                Bundle extras) {
        }

        public void onProviderEnabled(String provider) {
        }

        public void onProviderDisabled(String provider) {
        }
    };

    // Register the listener with the Location Manager to receive
    // location
    // updates
    locationManager.requestLocationUpdates(
            LocationManager.NETWORK_PROVIDER, 0, 0, locationListener);

        } catch (Exception e) {
                System.out.println("error ".getMessage());
            }

        return null;
    }

    @Override
    protected void onPostExecute(Void result) {
        progressDialog.dismiss();
    }
} 
```

在我的 onCreate 方法中，我使用
new LoadJsonTask().execute();调用上述类

请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T08:17:04.863

用这个

```
// Define a listener that responds to location updates
        LocationListener locationListener = new LocationListener() {
            public void onLocationChanged(Location location) {
                latitude = location.getLatitude();
                longitude = location.getLongitude();

                System.out.println("Latitude:- " + latitude);
                System.out.println("Longitude:- " + longitude);
        }

        public void onStatusChanged(String provider, int status,
                Bundle extras) {
        }

        public void onProviderEnabled(String provider) {
        }

        public void onProviderDisabled(String provider) {
        }
    }; 
```

在 doInBackground 方法之外。

# python - 将输入用作字典调用的函数的参数

> ID：12597058
> 
> 赞同：0
> 
> 时间：2012-09-26T07:54:11.773
> 
> 标签：python, dictionary

我使用了字典来允许用户输入内容，但下一个问题是使用第二个单词作为被调用函数的参数。目前，我有：

```
def moveSouth():
    Player.makeMove("south")
def moveNorth():
    Player.makeMove("north")
def moveEast():
    Player.makeMove("east")
def moveWest():
    Player.makeMove("west")

function_dict = {'move south':moveSouth, 'wait':wait, 'sleep':sleep,
                 'move north':moveNorth, 'move':move, 'look':look,
                 'move east':moveEast,
                 'move west':moveWest} 
```

并获得输入：

```
command = input("> ")
command = command.lower()
try:
   function_dict[command]()
except KeyError:
   i = random.randint(0,3)
   print(responses[i]) 
```

然而，我希望有一种方法可以让用户输入“向南移动”，而不是必须有 4 个不同的函数来移动，它使用第一个单词来调用函数，然后使用“南”作为该函数中方向的参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T08:00:36.573

这个怎么样：

```
command = input("> ")
command_parts = command.lower().split(" ")
try:
   if len(command_parts) == 2 and command_parts[0] == "move":
       Player.makeMove(command_parts[1])
   else:
       function_dict[command_parts[0]]()
except KeyError:
   i = random.randint(0,3)
   print(responses[i]) 
```

本质上，我只是尝试用空格分割输入，并通过第一部分（*move*、*wait*、*look* ...）来决定命令的类型。第二部分用作参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T08:02:38.510

`split()`输入，然后分别传递每个部分。

```
command = input("> ")
user_input = command.lower().split()
command = user_input[0]
if len(user_input) > 1:
    parameter = user_input[1]
    function_dict[command](parameter)
else:
    function_dict[command]() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T08:01:12.130

对于这种类型的命令行处理，您可以轻松使用该`cmd`模块。它允许您通过创建方法来创建命令，例如`do_<cmd>`, 将行的其余部分作为参数。

如果您无法使用该`cmd`模块，则必须自己解析命令行。您可以使用`command.split()`.

# php - 如何使用 composer 在 Symfony2 中安装 phpdoc

> ID：12597061
> 
> 赞同：2
> 
> 时间：2012-09-26T07:54:26.000
> 
> 标签：php, symfony, documentation, composer-php, packagist

我想安装[phpdoc](http://www.phpdoc.org)来为我的 symfony2 项目构建文档。有没有办法像与[作曲家](http://getcomposer.org)和供应商目录的捆绑一样安装它？

我不需要任何其他工具的[Pear](http://pear.php.net)，所以使用[composer](http://getcomposer.org)会很好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T08:18:16.220

在 packagist 上有一个[phpDocumentor 的官方包。](http://packagist.org/packages/phpdocumentor/phpdocumentor)只需将其添加到您的 require-dev 部分（因为您只需要它进行开发）：

```
{
    "require-dev": {
        "phpdocumentor/phpdocumentor": "~2.2"
    },
    "config": {
        "bin-dir": "bin"
    }
} 
```

安装您的依赖项：

```
php composer.phar install 
```

# haskell - 通用字符串类型类的默认类型

> ID：12597062
> 
> 赞同：2
> 
> 时间：2012-09-26T07:54:31.320
> 
> 标签：haskell, typeclass

[https://github.com/xich/scotty/issues/26](https://github.com/xich/scotty/issues/26)

[https://github.com/xich/scotty/pull/27](https://github.com/xich/scotty/pull/27)

```
class ScottyString a where
  toContent :: a -> Content
  toText :: a -> T.Text
  fromScotty :: T.Text -> a

instance ScottyString B.ByteString where
  toContent bs = ContentBuilder (fromByteString bs)
  toText bs = toText $ BL.fromChunks [bs]
  fromScotty = B.concat . BL.toChunks . fromScotty

instance ScottyString BL.ByteString where
  toContent bs = ContentBuilder (fromLazyByteString bs)
  toText = decodeUtf8
  fromScotty = encodeUtf8

instance ScottyString T.Text where
  toContent = toContent . encodeUtf8
  toText = id
  fromScotty = id

instance ScottyString String where
  toContent = toContent . T.pack
  toText = T.pack
  fromScotty = T.unpack 
```

对我来说它工作得很好，但是旧代码被破坏了......因为现在某些函数没有默认类型。

如何为此类型类添加默认类型（例如**Text**）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T05:46:47.170

顺便说一句，我在 hackage 上开始了一个几乎相同的 Stringable 类型类：http: [//hackage.haskell.org/package/stringable](http://hackage.haskell.org/package/stringable)

写是因为我厌倦了必须记住如何将所有内容相互转换。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T08:51:34.567

类型类没有默认类型。有一个默认类型的“全局”列表，可以使用`default`声明进行修改，但是这仅适用于数字类型并且仅影响当前模块，以及其他限制。有关详细信息，请参阅[Haskell 报告](http://www.haskell.org/onlinereport/haskell2010/haskellch4.html#x10-790004.3.4)。

您也许可以使用 GHC 一起破解某些东西[`ExtendedDefaultRules`](http://www.haskell.org/ghc/docs/latest/html/users_guide/interactive-evaluation.html#extended-default-rules)，但我建议您尝试以其他方式解决歧义，例如通过定义具有更多约束类型的辅助函数。

# java - 平滑快速移动和重绘（）

> ID：12597063
> 
> 赞同：2
> 
> 时间：2012-09-26T07:54:33.877
> 
> 标签：java, swing, graphics

我正在编写简单的太空入侵者，并且在移动船时遇到了问题。基本上我改变船的位置，然后`repaint()`。如果变化很大，则更像是跳跃而不是移动。如果变化很小，动画会更平滑但变慢。有什么解决办法吗？

我在 JPanel 上绘图并使用`paintComponent()`.

@edit：我真的不明白我的电脑如何能够流畅地显示普通（新）游戏并且简单的绘图图像具有低帧率。这就是为什么我认为这是软件问题而不是硬件问题。所以也许我做了一些影响帧速率的事情。

@edit：好的，粘贴一些代码，但要理解 - 我大约 2 周前开始使用 java 并通常对图形进行编程。

```
 package pl.spaceInvaders;
    import java.awt.Color;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Image;
import java.awt.Insets;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;

import javax.swing.JPanel;
import javax.swing.Timer;

class GamePanel extends JPanel{
SpaceInvadersMain sim;
private Image dbImage; 
private Graphics dbg; 
int moveDistHor=0;
int moveDistVer=0;
int shipMove=0;
int dir=1;

GamePanel(SpaceInvadersMain sim){
    this.sim=sim;
    setFocusable(true);
    moveMonsters();
    MyKeyListener mkl = new MyKeyListener();
    addKeyListener(mkl);
    Timer t = new Timer(500, new ActionListener() {
          public void actionPerformed(ActionEvent e) {
              if(moveDistHor<304){moveDistHor+=16*dir;}
              if(moveDistHor==304 || moveDistHor==0){dir*=-1;moveDistHor+=16*dir;moveDistVer+=16;}
              moveMonsters();
              moveProjectiles();
              detectColissions();
              repaint();
          }
       });
    t.start();
}
@Override
public void paintComponent(Graphics g){
    super.paintComponent(g);
    setBackground(Color.white);
    Graphics2D g2 = (Graphics2D)g;
    Insets insets = getInsets();
    g2.translate(insets.left, insets.top);
    // drawing monsters
    for(int i=0;i<SpaceInvadersMain.M_WIDTH;i++){
        for(int j=0;j<SpaceInvadersMain.M_HIGHT;j++){
            if(sim.monsters[i][j].ifExists()){
            if((moveDistHor+moveDistVer)%32==0) 
                g2.drawImage(sim.monsters[i][j].img, sim.monsters[i][j].posX, sim.monsters[i][j].posY, 32, 32, null);
            else 
                g2.drawImage(sim.monsters[i][j].img2, sim.monsters[i][j].posX, sim.monsters[i][j].posY, 32, 32, null);
            }}
    }
    //drawing ship
    if(sim.ship.exists()) g2.drawImage(sim.ship.img, sim.ship.getPosX(), sim.ship.getPosY(),32,32,null);
}
protected void detectColissions() {
    // TODO Auto-generated method stub

}
protected void moveProjectiles() {
    // TODO Auto-generated method stub

}
protected void moveShip() {
    if(sim.ship.posX+shipMove>0 && sim.ship.posX+shipMove<750) {
        sim.ship.posX+=shipMove;
        shipMove=0;
    }

}
protected void moveMonsters(){
    for(int i=0;i<SpaceInvadersMain.M_WIDTH;i++){
        for(int j=0;j<SpaceInvadersMain.M_HIGHT;j++){
            if(sim.monsters[i][j].ifExists()){
                 sim.monsters[i][j].posX=10+i*48+moveDistHor;
                 sim.monsters[i][j].posY=10+j*48+moveDistVer;

            }}
    }
}
private class MyKeyListener implements KeyListener{

    @Override
    public void keyPressed(KeyEvent e) {
        switch(e.getKeyCode()){
        case KeyEvent.VK_LEFT:
            //System.out.println("Arrow left caught");
            shipMove=-10;
            break;
        case KeyEvent.VK_RIGHT:
            //System.out.println("Arrow right caught");
            shipMove=10;
            break;
        }
        moveShip();
        repaint();
    }

    @Override
    public void keyReleased(KeyEvent e) {

    }

    @Override
    public void keyTyped(KeyEvent e) {

    }

} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T11:27:05.117

[*Space Invaders - 2D Rendering in Java*](http://www.cokeandcode.com/index.html?page=tutorials)教程作为使用显式`BufferStrategy`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T08:23:22.747

请贴一些代码？整个游戏是在画布中运行还是每艘船都是 JComponent？对于游戏，我会使用 JavaFX 或类似[http://jmonkeyengine.com](http://jmonkeyengine.com)的游戏引擎。要在 Swing 中创建流畅的动画，您可以使用动画框架：

*   [http://java.net/projects/timingframework](http://java.net/projects/timingframework)
*   [http://kenai.com/projects/trident/pages/Home](http://kenai.com/projects/trident/pages/Home)

# iphone - iPhone：视频网址未使用 MPMoviePlayer 播放

> ID：12597075
> 
> 赞同：-2
> 
> 时间：2012-09-26T07:55:18.670
> 
> 标签：iphone, objective-c, mpmovieplayer

我给了一个播放视频文件的网址，我使用以下代码播放视频

```
NSURL *url = [NSURL URLWithString:@"http://www.hddeo.com/video/more.html"];
    player = [[MPMoviePlayerController alloc] initWithContentURL:url];;

    [player setControlStyle:MPMovieControlStyleNone];
    player.view.frame = CGRectMake(110,375,540,250);
    // player.view.frame = CGRectMake(50, 375, 600, 415);
    [self.view addSubview:player.view]; 
```

在模拟器视频不播放我不知道为什么会这样

如果你有任何想法请分享

提前谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T08:10:43.090

您传递的内容 URL 是一个嵌入了 SWF 文件的 HTML 页面。 `MPMoviePlayerController`需要一个直接指向视频文件的内容 URL，例如“http://www.example.com/video.mp4”。

请注意，iOS 设备不支持 Adob​​e Flash 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:27:08.620

```
//try this code   

  NSURL *url = [NSURL URLWithString:@"http://www.hddeo.com/video/more.html"];
        player = [[MPMoviePlayerController alloc] initWithContentURL:url];;

        [player setControlStyle:MPMovieControlStyleNone];
        player.view.frame = CGRectMake(110,375,540,250);
        // player.view.frame = CGRectMake(50, 375, 600, 415);
        [moviePlayer play];
        [self.view addSubview:player.view];

        //   [moviePlayer prepareToPlay];
         //   [moviePlayer play];
         //   [moviePlayer pause];     // it preform action play pause ,stop
         //   [moviePlayer stop]; 
```

# android - 返回空值的网络提供商和 GPS 提供商

> ID：12597076
> 
> 赞同：3
> 
> 时间：2012-09-26T07:55:24.960
> 
> 标签：android, android-mapview, android-maps

我想找到当前位置的当前纬度和经度，但网络提供商和 GPS 提供商都返回空值：

```
 public class GPSTracker  extends Service implements LocationListener {

private final Context mContext;

// flag for GPS status
boolean isGPSEnabled = false;

// flag for network status
boolean isNetworkEnabled = false;

// flag for GPS status
boolean canGetLocation = false;

Location location; // location
double latitude; // latitude
double longitude; // longitude

// The minimum distance to change Updates in meters
private static final long MIN_DISTANCE_CHANGE_FOR_UPDATES = 10; // 10 meters

// The minimum time between updates in milliseconds
private static final long MIN_TIME_BW_UPDATES = 1000 * 60 * 1; // 1 minute

// Declaring a Location Manager
protected LocationManager locationManager;

public GPSTracker(Context context) {
    this.mContext = context;
    getLocation();
}

public Location getLocation() {
    try {
        locationManager = (LocationManager) mContext
                .getSystemService(LOCATION_SERVICE);

        // getting GPS status
        isGPSEnabled = locationManager
                .isProviderEnabled(LocationManager.GPS_PROVIDER);

        // getting network status
        isNetworkEnabled = locationManager
                .isProviderEnabled(LocationManager.NETWORK_PROVIDER);

        if (!isGPSEnabled && !isNetworkEnabled) {
            Log.i("info", " no network provider is enabled");
        } else {
            this.canGetLocation = true;
            // First get location from Network Provider
            if (isNetworkEnabled) {
                locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER,MIN_TIME_BW_UPDATES,MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                Log.d("Network", "Network");
                if (locationManager != null) {
                    location = locationManager
                            .getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
                    Log.i("location", ""+longitude);
                    if (location != null) {
                        latitude = location.getLatitude();
                        longitude = location.getLongitude();
                    }
                }
            }
            // if GPS Enabled get lat/long using GPS Services
            if (isGPSEnabled) {
                if (location == null) {
                    locationManager.requestLocationUpdates(
                            LocationManager.GPS_PROVIDER,
                            MIN_TIME_BW_UPDATES,
                            MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                    Log.d("GPS Enabled", "GPS Enabled");
                    if (locationManager != null) {
                        location = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);
                    //  location = locationManager.getLastKnownLocation("gps");
                        Log.i("location,GPS", ""+location);
                        if (location != null) {
                            latitude = location.getLatitude();
                            longitude = location.getLongitude();
                        }
                    }
                }
            }
        }

    } catch (Exception e) {
        e.printStackTrace();
    }

    return location;
}

/**
 * Stop using GPS listener
 * Calling this function will stop using GPS in your app
 * */
public void stopUsingGPS(){
    if(locationManager != null){
        locationManager.removeUpdates(GPSTracker.this);
    }
}

/**
 * Function to get latitude
 * */
public double getLatitude(){
    if(location != null){
        latitude = location.getLatitude();
    }

    // return latitude
    return latitude;
}

/**
 * Function to get longitude
 * */
public double getLongitude(){
    if(location != null){
        longitude = location.getLongitude();
    }

    // return longitude
    return longitude;
}

/**
 * Function to check GPS/wifi enabled
 * @return boolean
 * */
public boolean canGetLocation() {
    return this.canGetLocation;
}

/**
 * Function to show settings alert dialog
 * On pressing Settings button will lauch Settings Options
 * */
public void showSettingsAlert(){
    AlertDialog.Builder alertDialog = new AlertDialog.Builder(mContext);

    // Setting Dialog Title
    alertDialog.setTitle("GPS is settings");

    // Setting Dialog Message
    alertDialog.setMessage("GPS is not enabled. Do you want to go to settings menu?");

    // On pressing Settings button
    alertDialog.setPositiveButton("Settings", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog,int which) {
            Intent intent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);
            mContext.startActivity(intent);
        }
    });

    // on pressing cancel button
    alertDialog.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
        dialog.cancel();
        }
    });

    // Showing Alert Message
    alertDialog.show();
}

@Override
public void onLocationChanged(Location location) {
}

@Override
public void onProviderDisabled(String provider) {
}

@Override
public void onProviderEnabled(String provider) {
}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) {
}

@Override
public IBinder onBind(Intent arg0) {
    return null;
} 
```

}

在主要活动中，

```
 gps = new GPSTracker(MainActivity.this);

    // check if GPS enabled
    if(gps.canGetLocation()){

        double latitude = gps.getLatitude();
        double longitude = gps.getLongitude();

        // \n is for new line
        Toast.makeText(getApplicationContext(), "Your Location is - \nLat: " + latitude + "\nLong: " + longitude, Toast.LENGTH_LONG).show();
    }else{
        // can't get location
        // GPS or Network is not enabled
        // Ask user to enable GPS/network in settings
        gps.showSettingsAlert();
    } 
```

但最后它显示经纬度为0,0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T08:05:21.750

它现在工作：

我只是覆盖 onLocationChanges(Location location) 方法及其工作。

```
 @Override
     public void onLocationChanged(Location location) {
    if (location != null)
    {
        Log.i("SuperMap", "Location changed : Lat: " + location.getLatitude() + " Lng: " + location.getLongitude());
        latitude = location.getLatitude();
        longitude = location.getLongitude();
        Log.i("latitude,longitude", ""+latitude+","+longitude);

    } 
} 
```

# asp.net-mvc-4 - ASP NET MVC 4\. 自定义异常过滤器中的 RedirectToRouteResult

> ID：12597078
> 
> 赞同：0
> 
> 时间：2012-09-26T07:55:29.523
> 
> 标签：asp.net-mvc-4

我有一个自定义异常过滤器属性：

```
 public class RedirectOnErrorAttribute : FilterAttribute, IExceptionFilter {

        #region IExceptionFilter Members

        public void OnException(ExceptionContext filterContext) {
            if(filterContext.ExceptionHandled) return;

            filterContext.Controller.TempData["Exception"] = filterContext.Exception;
            filterContext.Result = new RedirectToRouteResult(new RouteValueDictionary(new {area = "Desktop", controller = "Exception", action = "HandleError" }));
            filterContext.ExceptionHandled = true;
            filterContext.HttpContext.Response.Clear();
            filterContext.HttpContext.Response.StatusCode = 500;
            filterContext.HttpContext.Response.TrySkipIisCustomErrors = true;
        }

        #endregion
    } 
```

'ExceptionController' 的 Action 'HandleError' 包含一些业务逻辑。
在“HandleError”动作中

```
public ActionResult HandleError() {
        Exception ex = (Exception)TempData["Exception"];
        logger.Log(ex);
} 
```

在 ex 变量中，我总是收到异常消息“执行处理程序 'System.Web.Mvc.HttpHandlerUtil+ServerExecuteHttpHandlerAsyncWrapper' 的子请求时出错。”
如何解决我的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T08:12:13.327

您可以尝试查看`ex.InnerException`. 如果它不为空，它可能包含更多有用的信息。

# c# - c# 规范中关于关键执行点的“线程创建和终止”的确切含义是什么

> ID：12597084
> 
> 赞同：3
> 
> 时间：2012-09-26T07:56:11.613
> 
> 标签：c#, volatile

在 c# 规范的 3.10 中，以下是：

必须保留这些副作用顺序的关键执行点是对 volatile 字段（第 10.5.3 节）、锁定语句（第 8.12 节）以及**线程创建和终止**的引用。

问题是：线程创建意味着“new Thread();” 还是“th.start()”？

据我所知，我认为它至少包含“th.start()”。

# javascript - 具有复杂功能的 javascript/html 图表组件

> ID：12597086
> 
> 赞同：0
> 
> 时间：2012-09-26T07:56:11.833
> 
> 标签：javascript, html, charts

> **可能重复：**
> [JavaScript 图表库](https://stackoverflow.com/questions/119969/javascript-chart-library)

我们正在寻找具有以下功能的 javascript 图表组件：

*   混合折线图和柱形图
*   线图必须是阶梯式的（没有插值）
*   柱形图必须从图表顶部向下增长
*   多值轴
*   缩放和滑动

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T11:19:53.690

也看看 TeeChart Javascript。

在这里下载：http: [//www.steema.com/download/html5](http://www.steema.com/download/html5)

在这里找到在线演示：http: [//www.steema.com/files/public/teechart/html5/v2012.06.1.1/demos/](http://www.steema.com/files/public/teechart/html5/v2012.06.1.1/demos/)

> *   混合折线图和柱形图

**支持**。只需添加系列和一些值。

> *   线图必须是阶梯式的（没有插值）

**支持**。Line 系列可以平滑，但默认情况下不是：http: [//www.steema.com/files/public/teechart/html5/v2012.06.1.1/demos/series/line/linepoint.htm](http://www.steema.com/files/public/teechart/html5/v2012.06.1.1/demos/series/line/linepoint.htm)

> *   柱形图必须从图表顶部向下增长

**支持**。您可以反转左轴。在以下示例中，有一个复选框： http: [//www.steema.com/files/public/teechart/html5/v2012.06.1.1/demos/series/bar/bar.htm](http://www.steema.com/files/public/teechart/html5/v2012.06.1.1/demos/series/bar/bar.htm)

> *   多值轴

**支持**。在这里找到一个例子： http: [//www.steema.com/files/public/teechart/html5/v2012.06.1.1/demos/axes/multiple_axes.htm](http://www.steema.com/files/public/teechart/html5/v2012.06.1.1/demos/axes/multiple_axes.htm)

> *   缩放和滑动

**支持**。用鼠标左键（从左上角到右下角）绘制矩形以放大绘制区域。在另一个方向上绘制矩形以缩小（从右下角到左上角）。使用鼠标右键滚动拖动。

如果您发现其中任何一个问题，请随时告诉我们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:22:09.793

检查 - [http://www.jqchart.com/](http://www.jqchart.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T06:06:01.973

[amcharts.com](http://amcharts.com)支持所有这些功能：1）混合折线图和柱形图：http: [//amcharts.com/javascript/column-and-line-chart-mix/](http://amcharts.com/javascript/column-and-line-chart-mix/)

2）阶梯线图： [http ://amcharts.com/javascript/step-line-chart/](http://amcharts.com/javascript/step-line-chart/)

3）我没有从顶部开始的列示例，但 amcharts 也支持反向值轴，因此您可以通过在此示例中将图形类型更改为“列”来简单地获得此示例： [http ://amcharts.com/javascript/line-带有反转值轴的图表/](http://amcharts.com/javascript/line-chart-with-reversed-value-axis/)

4）多值轴： [http ://amcharts.com/javascript/line-chart-with-multiple-value-axes/](http://amcharts.com/javascript/line-chart-with-multiple-value-axes/)

5）缩放和滑动： [http ://amcharts.com/javascript/line-chart-with-scroll-and-zoom/](http://amcharts.com/javascript/line-chart-with-scroll-and-zoom/)

当然，您提到的所有功能都可以组合在一张图表中。

# erlang - 如何在 Cowboy-server 中手动关闭 websocket-connection？

> ID：12597087
> 
> 赞同：3
> 
> 时间：2012-09-26T07:56:11.620
> 
> 标签：erlang, websocket, cowboy

如何在 Cowboy-server 中手动（从服务器端）关闭 websocket 连接？我会在**init/3**的回调模块中检查登录名/密码，并用一些返回码踢“错误”的用户。做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T12:12:38.630

尝试从您的处理程序返回 {shutdown, Req, State}：

[https://github.com/extend/cowboy/blob/master/src/cowboy_websocket_handler.erl](https://github.com/extend/cowboy/blob/master/src/cowboy_websocket_handler.erl)

# android - 如何在安卓上登录脸书

> ID：12597094
> 
> 赞同：0
> 
> 时间：2012-09-26T07:56:40.000
> 
> 标签：android, facebook, user-interface

我已经尝试了教程[http://developers.facebook.com/docs/mobile/android/build/#sdk](http://developers.facebook.com/docs/mobile/android/build/#sdk)并且我能够成功登录。此代码提供了一个登录对话框。但我想把它作为一个 Activity 。因为我还必须从这个活动中执行其他任务。就像在成功登录后新活动开始时一样，在以前的 facebook 状态下再次回到以前的（facebook）活动。请帮我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T08:30:33.077

该对话框仅为用户登录 Facebook 而创建。一旦他们这样做了，它将返回到原始活动。这是你要求的对吗？

假设您想向 Facebook 发布消息。

```
try {
        Log.d(TAG, "postToFaceBook()");
        if (facebook == null) {
            facebook = new Facebook(API);
            String access_token = prefs.getFBAccesTocken();

            long expires = prefs.getFBExpiry();
            if (access_token != null) {
                facebook.setAccessToken(access_token);
            }
            if (expires != 0) {
                facebook.setAccessExpires(expires);
            }
        }

        if (facebook.isSessionValid()) {
            Log.d(TAG, "Session is valid");
            facebook.extendAccessTokenIfNeeded(this, null);
            postToFacebook();
        } else {
            Log.d(TAG, "not valid");
            // Using SSO OAuth
            // facebook.authorize(this, new String[] { "publish_stream"
            // },new LoginDialogListener());

            // Not using SSO
            facebook.authorize(this, new String[] { "publish_stream" },
                    Facebook.FORCE_DIALOG_AUTH, new LoginDialogListener());
        }
    } catch (NullPointerException e) {
        Log.e(TAG, "An error occurd trying to open facebook app"); 
```

如果用户过去曾登录过 facebook 并且有一个有效的会话，它会简单地发布到 Facebook，如果没有一个有效的会话，它将打开对话框并尝试登录。

LoginDialogListener() 响应这个响应。

```
public class LoginDialogListener extends BaseDialogListener {

    @Override
    public void onComplete(Bundle values) {
        Log.d(TAG, "Login response recieved");
        prefs.saveToken(facebook.getAccessToken());
        prefs.saveExpiry(facebook.getAccessExpires());
        facebook.extendAccessTokenIfNeeded(MyActivity.this, null);
        Log.d(TAG, "Logged in ");
        postToFacebook();
    }

} 
```

另一种选择是查看使用 SSO（我已在示例代码中注释掉）。

# git - git，github记错账号

> ID：12597096
> 
> 赞同：2
> 
> 时间：2012-09-26T07:56:44.597
> 
> 标签：git, github

我开始使用 git 和 github.com。对于测试，我使用 account1 创建了一个 repo，然后导入并提交更改，推送。都好。然后我创建了另一个帐户（account2），将它们克隆到我计算机上的另一个文件夹中，进行了一些更改然后推送。

奇怪的是，“git log”命令显示最后一次“推送”的作者是 account1，而不是 account2。该评论明确是我从account2中发表的评论，但作者搞砸了。

我使用的客户端是运行在 MINGW32 上的 GitBash，我已经尝试过多次关闭/重启客户端，没有希望。有人遇到同样的问题吗？Tks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T08:04:31.030

检查您的全局配置是否不包括`user.email`set to`account1`的电子邮件地址。

电子邮件地址将是 GitHub 确定提交作者的参数。

请参阅此问题的说明“ [Git author Unknown](https://stackoverflow.com/questions/8283915/git-author-unknown) ”。

正如[demas](https://stackoverflow.com/users/205270/demas)的[回答](https://stackoverflow.com/a/12597453/6309)中提到的，您需要在本地 git 配置中为每个 repo 设置该信息：`git config user.email ...`。
这样，即使你有一个全局配置，当你从一个或另一个 repo 推送时，你也不会遇到任何识别问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:19:51.363

您可以在全球范围内设置您的电子邮件和姓名：

```
git config --global user.name    'Some Name'
git config --global user.email   'some.email@gmail.com' 
```

或者只是为当前存储库设置它们

```
git config user.name    'Some Name'
git config user.email   'some.email@gmail.com' 
```

# css - 内联元素的垂直对齐

> ID：12597097
> 
> 赞同：0
> 
> 时间：2012-09-26T07:56:45.983
> 
> 标签：css, html

我在标题的水平导航菜单中遇到内联列表项的垂直对齐问题。由于布局的其余部分，我不能使用浮动。

我在想我可以为列表项使用更大的行高，但这次并没有太大帮助。列表项或多或少只是坐在那里，至少当我使用 Google Droid 字体时。我也尝试了垂直对齐，但没有。

基本结构为 header -> header-content ->navigation > li > a 所有列表项都设置为 display:inline。还有一个包含 h1 元素的列表项，其中包含一个图像：li > h1 >img 和一个子菜单：li > ul > >li > a，其中的图像使事情变得复杂，因为它具有 39 像素的固定高度。

标题 div 设置 4 em 的高度和背景颜色。在这 4 个 em 中，我需要垂直对齐导航的内容。

我需要一些想法如何完成这种垂直对齐。建议？:-)

您可以在此处找到问题的完整代码示例：http: [//pastebin.com/zcLspjJz](http://pastebin.com/zcLspjJz)

我需要支持现代浏览器和 IE7 及更高版本。但真的欢迎任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T10:26:18.853

您可以尝试这些方法，如果有帮助：

*   使用`height`和`line-height`属性，并为两者使用相同的值。（例如`height:20px;line-heigt:20px;`）
*   或设置`display:table-cell; vertical-align:middle;`

# asp.net - 安装打包为 MSI 的 ASP.NET 应用程序

> ID：12597100
> 
> 赞同：1
> 
> 时间：2012-09-26T07:57:00.733
> 
> 标签：asp.net, windows-installer

![在此处输入图像描述](../Images/9ffc32cd24e60d16c62ddf47146e38bc.png)

我从 ASP.NET 应用程序创建了一个 MSI 包，当我运行 MSI 时，它会询问我要安装应用程序的站点。我专门为它创建了一个站点，但是当我安装到这个站点时，如果我在 IIS 中“浏览”，它就不起作用。使用生成的 MSI 安装和运行 ASP.NET 应用程序的正确方法是什么？（VS 2010 中的网络设置）

# c++ - 在 Qt 中增加文本和复选框之间的空间

> ID：12597101
> 
> 赞同：6
> 
> 时间：2012-09-26T07:57:12.817
> 
> 标签：c++, qt, qcheckbox

如果您设置固定的复选框大小，则文本将与复选框本身对齐。在标准布局方向下，文本将在框之后开始，而在*从右到左的*布局中，文本将在框之前结束，就像这样（边框只是小部件的边框，表示小部件的实际大小，不要混淆）：

![](../Images/80f3e62915ca9f6b7d041c6d3ed80f60.png)

有没有办法将文本与另一侧对齐来实现这一点：

![在此处输入图像描述](../Images/9129a7d9bf029bf50d757214c593f71e.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-26T08:56:26.200

正如您提到的，您有一个**固定大小的 QCheckBox**。无需子类化就可以很容易地使用样式表获得所需的 QCheckBox。但不幸的是**text-align**属性只适用于**QPushButton**和**QProgressBar**。但是您可以使用的备用样式表是：

```
QCheckBox{
spacing:100px;
} 
```

使用QCheckBox 的*RightToLeft*方向和此样式表，您的复选框已准备就绪！:) 。根据您的应用更改**间距。**
希望这可以帮助。
![这是我的输出](../Images/1e10a85029fbf85dcefd7ab5cbfb7c5c.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:36:47.727

您可以尝试从 QCheckBox 继承并绘制您想要的内容。查看此示例自定义 push_button（为按钮上的文本添加阴影）。

 `````
#include "CustomButton.h"
#include <QStylePainter>
#include <QStyleOptionButton>
#include <QMenu>

CustomButton::CustomButton(QWidget *parent):
    QPushButton(parent)
{
}

void CustomButton::paintEvent(QPaintEvent *event)
{
    QStylePainter p(this);
    QFontMetrics font = this->fontMetrics();

    QRect textRect = font.boundingRect(text());
    int x = rect().center().x()-textRect.center().x();
    int y = rect().center().y()-textRect.center().y();
    ++y;
    p.drawControl(QStyle::CE_PushButton, getStyleOption()); //draw button with stylesheet
    QStyleOptionButton opt = getStyleOption();
    opt.text = text();
    QPen tempPen = p.pen();
    p.setPen(Qt::white);
    p.drawText(x, y,  text()); //draw text shadow on the button
    p.setPen(tempPen);
    p.drawControl(QStyle::CE_PushButtonLabel, opt); //draw text with stylesheet 
    //QPushButton::paintEvent(event);
}

QStyleOptionButton CustomButton::getStyleOption() const
{
    QStyleOptionButton opt;
    opt.initFrom(this);
    opt.features = QStyleOptionButton::None;
    if (isFlat())
        opt.features |= QStyleOptionButton::Flat;
    if (menu())
        opt.features |= QStyleOptionButton::HasMenu;
    if (autoDefault() || isDefault())
        opt.features |= QStyleOptionButton::AutoDefaultButton;
    if (isDefault())
        opt.features |= QStyleOptionButton::DefaultButton;
    if (isDown() || (menu() && menu()->isVisible()))
        opt.state |= QStyle::State_Sunken;
    if (isChecked())
        opt.state |= QStyle::State_On;
    if (!isFlat() && !isDown())
        opt.state |= QStyle::State_Raised;
    //opt.text = text();
    opt.icon = icon();
    opt.iconSize = iconSize();

    return opt;
} 
`````

# c - 如何创建一个makefile linux

> ID：12597102
> 
> 赞同：2
> 
> 时间：2012-09-26T07:57:30.310
> 
> 标签：c, makefile, autoconf, automake

我有以下内容：一个 .c 代码、一个 .h 代码加上一个 .o 文件和一个 -lib... 库。当我用 gcc 编译 c 代码时，我会：

```
gcc code.c -o code file.o -library 
```

如何创建生成文件？

我目前有 autoconf 和 automake？

我目前有：

```
Makefile

all: 
  gcc code.c -o code file.o -library

clean:

 rm -f code 
```

当我编译 make 我得到：

```
make: Nothing to be done for `all'. 
```

需要一些帮助。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T07:59:37.997

很抱歉，我必须给出这个答案，但是您是否尝试过[https://www.google.com/search?q=makefile+tutorial](https://www.google.com/search?q=makefile+tutorial)？

选择一个，并学习如何创建 Makefile。你不需要自动工具。

[通过阅读Makefile 教程](http://mrbook.org/tutorials/make/)，我花了 5 分钟才想出这个：

```
CC=gcc
CFLAGS=-Wall
CLIBS=-lX11
OUT=code
OBJS=code.o file.o

$(OUT): code.o file.o
    $(CC) $(CFLAGS) $(CLIBS) -o $(OUT) $(OBJS)
code.o: code.c
    $(CC) $(CFLAGS) -c code.c -o code.o
file.o: file.c
    $(CC) $(CFLAGS) -c file.c -o file.o

.PHONY: clean

clean:
    rm -rf *.o $(OUT) 
```

> 如果在计算机上 -library 不存在，我想自动安装它。

这是特定于使用的发行版的，您需要在机器上进行 root 访问。这样做不是这样做的。相反，您应该创建一个特定于您的发行版的包，您可以在其中指定依赖项。

例如，对于 Ubuntu（因为它是最常用的发行版），您将创建一个 .deb 文件：[http ://wiki.debian.org/IntroDebianPackaging](http://wiki.debian.org/IntroDebianPackaging)

但是，这与您最初的问题无关。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-09T18:35:34.677

请参阅此代码，这可能会对您有所帮助。

例如，创建一个 C 测试文件“test.c”，然后创建 makefile，如下所示。

**生成文件**

```
 all:

        cc -o test test.c

 clean:

        rm -f test 
```

将此文件另存为“Makefile”

1.  `make`通过命令运行此 makefile 。然后它在当前目录创建测试可执行文件

2.  使用运行文件`./test`

3.  您可以使用`make clean`删除可执行文件（测试）。

有关任何参考，请参阅[Makefile 教程](https://www.cs.umd.edu/class/fall2002/cmsc214/Tutorial/makefile.html)

# css - 悬停更改子背景的CSS

> ID：12597106
> 
> 赞同：11
> 
> 时间：2012-09-26T07:57:36.777
> 
> 标签：css

我有一个菜单：

```
<ul class="menu">
   <li><div class="home"></div> Home</li>
   <li><div class="forum"></div> Forum</li>
   <li><div class="music"></div> Music</li>
</ul> 
```

这个CSS：

```
.menu{
   list-style:none;
   width:100px;
   border:1px solid #ccc;
   padding:0px;
   margin:0px;
}

.menu li{
   height:20px;
   margin-top:5px;
   padding-left:10px;
}

.menu li div{
    display:inline-block;
    width:10px;
    height:10px;
}

.menu li:hover{
   background-color:green;
}

.home{background-color:black;}
.forum{background-color:red;}
.music{background-color:yellow;} 
```

这一切都很好而且工作，但我想做的是当用户悬停在列表项上时，div应该改变它的背景，每个div应该改变为不同的颜色，所以我需要类似的东西：

```
.home li:hover{
   background-color:brown;
} 
```

但现在我只是想在那个不存在的 div 中选择另一个 li，无论如何我希望你明白，这里也是 js fiddle：http: [//jsfiddle.net/xShBB/](http://jsfiddle.net/xShBB/)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-26T08:00:52.820

你几乎拥有它！

```
li:hover .home {
   background-color:brown;
} 
```

CSS 总是应用于选择器最右端的元素（除非我们在将来的某个时候看到对父选择器的支持）。因此，您选择的 div 必须位于选择器的右侧，而`li:hover`其父级必须位于其左侧。

[**您的小提琴已编辑**](http://jsfiddle.net/xShBB/3/)。

# php - 无法使用 CakePHP 中的复选框保存 BelongsTo 数据

> ID：12597110
> 
> 赞同：1
> 
> 时间：2012-09-26T07:57:54.563
> 
> 标签：php, cakephp, cakephp-2.0

我有两个模型的关系`Advisor belongsTo Room`，`Room hasMany Advisor`。在数据库 ( ) 中有一个指向特定房间`Advisor`的 foreignKey 约束。`Advisor.room_id`其默认值为该`NULL`值（表示没有房间的顾问）。

假设我有一个`Advisor`,`room_id`设置为`n`. 我现在希望取消分配`nth`房间`Advisor`- 使用选择字段，我可以重置`room_id`为`NULL`，具有以下`request->data`结构：

```
[Room] => Array
    (
        [name] => TestRoom2
        [type] => single suite
        [id] => 4
    )

[Advisor] => Array
    (
        [0] => Array
            (
                [id] => 14
                [room_id] => 
                [name] => foo
            )
    ) 
```

但是，当我尝试通过使用具有相同 generate 的复选框来执行此操作时`$this->request->data`，MySQL 拒绝更新该`NULL`值。

此外，似乎在第二种情况下更改`room_id`显式 in的值`request->data`没有效果。但是，如果我要更改`Advisor.0.name`为`hax`，（通过`request->data`直接修改）该`name`字段*会*保存。

我通过调用保存`$this->Room->saveAll($request->data, array('deep' => true))`- 在选择字段和复选框的情况下都是如此。

我通过重复调用`Form`助手来生成一系列复选框：

```
$count = 0;
// $key is the Advisor id, and $attributes is an array of the form
//      array('name' => (string), 'disabled' => (bool))
foreach($options['advisorList'] as $key => $attributes) {
    $form[] = $this->Form->hidden(sprintf('Advisor.%s.id', $count), array('value' => $key));
    $form[] = $this->Form->input(sprintf('Advisor.%s.room_id', $count), array(
        'type' => 'checkbox',
        'label' => $attributes['name'],
        'disabled' => $attributes['disabled']));
    $count++;
} 
```

*此外*，如果`room_id`已经设置为`NULL`，则设置没有问题`room_id`- 除了，`room_id`无论是否选中复选框，都会设置。

任何帮助将不胜感激 - 谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T06:08:20.563

解决了！这与 hasMany 关系上的时髦 cakePHP $model->saveAll() 有关。

为了正确更新此表单，所有**可能**在 saveAll() 中更改的顾问必须取消设置它们与各自房间的关系并保存在数据库中

```
foreach($copyOfData['Advisor'] as $advisor) {
    $advisor['room_id'] = null;
    $this->Advisor->save(array('Advisor' => $advisor));
} 
```

只有在完成此操作后，我们才能调用`$this->Advisor->saveAll($this->request->data, array('deep' => true))`并按`saveAll()`预期运行。

# javascript - 如何将手指指针更改为十字准线？

> ID：12597112
> 
> 赞同：1
> 
> 时间：2012-09-26T07:58:08.447
> 
> 标签：javascript

```
var eles = document.querySelectorAll('li.level a'),
    i;

for (i = 0; i < eles.length, i++) {
  eles[i].onclick = function() {
    //...
  };

} 
```

现在，我想当鼠标悬停在文本上时，我想将手指指针更改为十字准线。所以我将上面的代码设置为：但它不起作用。

```
for (i = 0; i < eles.length, i++) {
      eles[i].onclick = function() {
        //...
      };
eles[i].onmouseover = function(this) {
        this.style.cursor="crosshair";
      };

    } 
```

代码不起作用，如何更正？谢谢你

如果我只想用上面的代码通过javascript更改它，我该怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T08:02:34.823

如果你摆脱争论，你所拥有的就会奏效。由于`this`是保留字，您不能命名参数`this`：

```
eles[i].onmouseover = function() {
    this.style.cursor="crosshair";
}; 
```

这是一个[工作示例](http://jsfiddle.net/jamesallardice/4426W/1/)。

但是，正如评论中已经说明的那样，更好的方法可能是只使用 CSS：

```
li.level a:hover {
    cursor: crosshair;
} 
```

这是[CSS 版本的示例](http://jsfiddle.net/jamesallardice/4426W/)。

* * *

*旁注*

*   您的`for`循环中也有语法错误：

    ```
    for (i = 0; i < eles.length, i++) // Wrong
    for (i = 0; i < eles.length; i++) // Right (semi-colon, not comma) 
    ```

*   `addEventListener`使用而不是设置`onsomevent`属性通常是更好的做法。您可以使用`attachEvent`IE 来支持旧版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T08:03:37.647

代码有问题。从争论中删除它。

```
eles[i].onmouseover = function(/*this*/) {
        this.style.cursor="crosshair";
      };

    } 
```

# timer - 需要 timerStartDate 的 timer 和 timerconfig ejb3.0

> ID：12597116
> 
> 赞同：0
> 
> 时间：2012-09-26T07:58:38.383
> 
> 标签：timer, ejb-3.0

我有一个 TimerConfig 和一个 Timer 对象并使用 EJB 3.0。一切正常，但“ **onTimeout** ”我想在定时器初始化时获取信息。我找不到诸如**timerStartDate 之**类的方法。

我应该使用 timerConfig.setInfo 并输入定时器初始化的日期吗？这是唯一的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T13:52:21.843

是的，如果您想知道何时调用 createTimer，则必须将其存储在 setInfo 中。没有内置机制。

# css - 没有 JS 依赖的基于 CSS 的响应式多级下拉菜单的解决方案？

> ID：12597120
> 
> 赞同：9
> 
> 时间：2012-09-26T07:59:01.800
> 
> 标签：css, navigation

我一直在查看可用的响应式下拉菜单/导航栏，但似乎没有任何工作正常。我主要需要一个不依赖于 JavaScript hack 的基于 CSS 的菜单。

为什么不使用 JS？基于 JS 的解决方案无法在像 Opera Mini 这样的代理浏览器上运行，我们的大多数观众都在使用它，而黑莓浏览器在 JS 上表现不佳。

很多人提倡使用选择菜单进行移动导航。一个有趣的解决方案，但这又依赖于 JS，并且对于嵌套的多级菜单非常乏味。

那么，您遇到过哪些可能适合您的导航系统？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T09:53:53.703

对于没有 java 脚本的多级下拉菜单，我[在这里创建了一个示例](http://jsfiddle.net/VVqBU/1/)。

**HTML：**

```
<ul>
    <li>
        Menu 1
        <ul>
            <li>Menu 1.1</li>
            <li>
                Menu 1.2
                <ul>
                    <li>Menu 1.2.1</li>
                    <li>
                        Menu 1.2.2
                        <ul>
                            <li>Menu 1.2.2.1</li>
                            <li>Menu 1.2.2.2</li>
                        </ul>
                    </li>
                    <li>Menu 1.2.3</li>
                    <li>Menu 1.2.4</li>
                </ul>
            </li>
            <li>Menu 1.3</li>
        </ul>
    </li>
    <li>Menu 1</li>
    <li>Menu 1</li>
    <li>Menu 1</li>
    <li>Menu 1</li>
</ul>​ 
```

**CSS：**

```
ul{
}
ul li{
    display:inline-block;
    position:relative;
}
ul li> ul{
    display:none;
    position:absolute;
    left:95%;
    top:15px;
}
ul li> ul li{
    display:block;
}
ul li:hover> ul{
    display:block;
}
​ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T07:55:23.067

You only have one option for a pure-CSS dropdown menu that works with iOS devices: use anchor tags and toggle `display: none/block` ([short article on iOS Safari hover behavior](http://www.elfboy.com/blog/making_css_drop_down_menus_work_on_the_iphone)).

**HTML**:

```
<ul>
    <li><a href="#">Menu Item 1</a>
         <ul>
             <li>SubLink1.1</li>
             <li>SubLink1.2</li>
             <li>SubLink1.3</li>
             <li>SubLink1.4</li>
         </ul>
    </li>
    <li><a href="#">Menu Item 2</a>
         <ul>
             <li>SubLink2.1</li>
             <li>SubLink2.2</li>
             <li><a href="#">SubMenu3 &gt;&gt;</a>
                 <ul>
                     <li><a href="#">Nested Link 2.3.1 &gt;&gt;</a>
                     <ul>
                         <li>Nested Link 2.3.1.1</li>
                         <li>Nested Link 2.3.1.2</li>
                     </ul>
                     </li>
                     <li>Nested Link 2.3.2</li>
                 </ul>
             </li>
         </ul>
    </li>
    <li><a href="#">Menu Item 3</a>
         <ul>
             <li><a href="#">SubMenu3.1 &gt;&gt;</a>
                 <ul>
                     <li>Nested Link 3.1.1</li>
                     <li>Nested Link 3.1.2</li>
                     <li>Nested Link 3.1.3</li>
                     <li>Nested Link 3.1.4</li>
                     <li>Nested Link 3.1.5</li>
                     <li>Nested Link 3.1.6</li>
                 </ul>
             </li>
             <li>SubMenu3.2</li>
         </ul>
    </li>
</ul> 
```

**CSS**:

```
li>ul { display: none; }
li:hover>ul{
    display: block;
} 
```

I have tested this on an iPhone 4 iOS6 and it works fine. Also tested on a Kindle Fire. I don't have access to an android phone for testing, so you want to check those devices.

JS Fiddle: [http://jsfiddle.net/aGYnU/2/](http://jsfiddle.net/aGYnU/2/)

**Making it responsive**:

Play with the styles a bit. Change the positioning. Use `em` or `percentage%` values for the dimensions. You may need to use `em` values for the font-sizes within the menu as well (or media queries to set font-size based on viewport size).

Functionality should continue to work.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-02T13:58:05.533

我要在前面说这个解决方案/模式不是*下拉*解决方案。但是，这是重新考虑响应式设计导航的一种非常酷的方式。我也不知道您的导航需求的全部范围，所以这对您来说可能不够复杂。

看看内容杂志网站：[http ://contentsmagazine.com/](http://contentsmagazine.com/)

请注意徽标下的主导航。在较小的视口中查看（调整浏览器大小）时，您将看到“探索”链接。点击该链接后，您将进入导航。

事情是这样的：**它只是一个简单的锚链接**。

模式是这样的：就页面源顺序而言，您的导航实际上是朝向页面*底部*的。（而且，就语义而言，这很有意义。）页面顶部有一个简单的锚链接，可以跳转到导航（这也是可访问性的最佳实践）。

因此，考虑到移动优先，页面在页面底部加载导航，但用户可以单击锚链接来访问它。由于是锚链接，所以跳跃是瞬间的，实际上几乎*感觉就像是一个下拉*。

然后，随着视口变大，*仅使用 CSS*将导航（无论如何）移动到页面顶部，并位于徽标下方。这是通过简单的绝对定位来实现的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-08T12:02:14.193

我也试图解决这个问题。而且我认为根本不可能找到满足我所有需求的解决方案。但这对大多数人来说可能已经足够了：http: [//jsfiddle.net/selfthinker/T7dDm/](http://jsfiddle.net/selfthinker/T7dDm/)

HTML：

```
<ul>
  <li class="dropdown" onclick=""><span>Menu</span>
    <ul>
      <li><a href="#">Menu item</a></li>
      <li><a href="#">Another menu item</a></li>
    </ul>
  </li>
</ul> 
```

CSS：

```
li.dropdown > span {
    cursor: pointer;
    /* style the "Menu" to make it appear clickable (e.g. replace it with a house icon?) */
    font-size: 2em;
    font-weight: bold;
    color: #00c;
}
li.dropdown {
    position: relative;
}
li.dropdown:hover > ul,
li.dropdown:active > ul,
li.dropdown:focus > ul {
    display: block;
}
li.dropdown > ul {
    display: none;
    position: absolute;
    top: 1.5em;
    left: 0;
    /* and style away: */
    background-color: #ccc;
    font-size: 1.5em;
} 
```

我已经在新 iPad 上的 Safari 和 Opera Mini、Android（2.2.2，HTC Desire）的股票浏览器和 Opera Mini 以及一些桌面浏览器上测试了这个。它基本上适用于任何地方。这些是**剩下的问题**：

1.  它不是键盘可访问的，即您不能通过菜单项进行选项卡。您可以使菜单下拉菜单本身出现在选项卡上，但是我不知道（没有 JavaScript）可以让您访问其中的项目。这对我来说是最大的问题。
2.  在 iPad 和所有 Opera Mini 上的 Safari 中，一旦您点击菜单，菜单就不会关闭。您需要重新加载或单击链接。（在 Android 浏览器中，您只需点击屏幕上的任何其他位置即可关闭菜单。）可能有解决方案吗？
3.  在 Opera Mini 中，点击菜单触发器后整个页面会重新加载，但之后菜单会正常显示。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-02T13:57:32.853

移动浏览器通常会在点击时显示/隐藏任何 :hover 内容，如果不是链接的话。使用此代码：

HTML：

```
<ul>
<li id="showhide">I am visible, and can be tapped/hovered.
     <ul id="menu">
          <li>Menu item 1</li>
          <li>Menu item 2</li>
     </ul>
</li>
</ul> 
```

CSS：（无样式）

```
#showhide{
     position:relative;
}
#menu{
     position: absolute;
     left: -999px
}
#showhide :hover #menu{
     left: 0px;
} 
```

看到这是 JSFiddle：http: [//jsfiddle.net/VVqBU/](http://jsfiddle.net/VVqBU/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-09T09:43:51.440

用 div 和锚点做了一个例子。希望能帮助到你！

[http://jsfiddle.net/UufP5/9/](http://jsfiddle.net/UufP5/9/)

html：

```
 <div class="mymenu">
<div class="menu">
    <div class="menu_title">
        menu 1
    </div>
    <div>
        <a href="#">submenu1</a>
        <a href="#">submenu2</a>
        <a href="#">submenu3</a>
        <a href="#">submenu4</a>
        <a href="#">submenu5</a>
        <a href="#">submenu6</a>
    </div>
</div>
<div class="menu">
    <div class="menu_title">
        menu 2
    </div>
    <div>
        <a href="#">submenu1</a>
        <a href="#">submenu2</a>
        <a href="#">submenu3</a>
        <a href="#">submenu4</a>
    </div>                
</div>
<div class="menu">
    <div class="menu_title">
        menu 3
    </div>
    <div>
        <a href="#">submenu1</a>
    </div>           
</div> 
```

​</p>

CSS：

```
 .mymenu{
font-size: 18px;
position:absolute;
z-index:1;
}
.menu{
    background: #222;
    color: #f9f9f9;
    height: 1em;
    overflow:hidden;
    display:inline-block;
    float:left;
    padding: 0.3em;
}

.menu:hover{
    height: auto;
}

.menu a{
    display:block;
    color: #abc;
} 
```

# android - Android SeekBar Thumb Image change on Normal , on press , on release

> ID：12597121
> 
> 赞同：0
> 
> 时间：2012-09-26T07:59:08.230
> 
> 标签：android, android-layout

我想在 SeekBar 移动时实现不同的图像它在第一次加载（白色图像）和（按下时 - 黄色图像）时工作正常，但（在新闻稿时 - 蓝色图像）没有显示。这是我的代码

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@drawable/default_seek_thumb_pressed_new" 
        android:state_pressed="true" android:state_window_focused="true"/>

    <item android:drawable="@drawable/default_seek_thumb_selected_new" 
        android:state_selected="false" />

    <item android:drawable="@drawable/default_seek_thumb_normal_new"/>

</selector> 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T08:32:36.123

当您松开按钮时，它将恢复到默认状态。如果您想在从按钮上抬起手指时获得不同的图像，请尝试

```
<item android:drawable="@drawable/default_seek_thumb_selected_new" 
    android:state_focused="true" android:state_pressed="false"/> 
```

代替

```
<item android:drawable="@drawable/default_seek_thumb_selected_new" 
    android:state_selected="false" /> 
```

# javascript - 在 div 上制作三角形

> ID：12597123
> 
> 赞同：1
> 
> 时间：2012-09-26T07:59:13.503
> 
> 标签：javascript, css, jquery

有人可以告诉我如何在背景图像上向我的用户展示一个三角形。我想做一个三角形的用户界面。为此，我屏蔽了两个图像（一个 background.jpg 和一个屏蔽图像，triangle.png）。我在我的 div 的背景中使用这个新图像。我已经使用[MaskImage](http://verens.com/2011/08/25/jquery-maskimage-plugin/)完成了这项工作。

![生成的图像](../Images/c6676e2da9416f13951dcdbd4a956eb2.png)

但问题是我的背景图像的大小发生了变化，但 triangle.png 的大小是固定的。我也尝试过使用线性渐变、css 属性。但它在 IE 中不起作用。那么是否有任何插件可以屏蔽两个图像，而不管它们的大小。或任何其他最佳方式来实现我的目标。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T10:23:47.940

您应该能够在 CSS 中使用`:before`和覆盖两个遮罩三角形，并使用[http://css-tricks.com/snippets/css/css-triangle/](http://css-tricks.com/snippets/css/css-triangle/)`:after`等不均匀的边框属性创建三角形。

编辑： http: [//jsfiddle.net/A9Zbj/11/](http://jsfiddle.net/A9Zbj/11/)（耶！）

# c# - 在 Metro 应用程序中绘制文本

> ID：12597124
> 
> 赞同：1
> 
> 时间：2012-09-26T07:59:14.547
> 
> 标签：c#, xaml, canvas, drawing, microsoft-metro

我正在使用 c# 为 Window 8 创建绘图 Metro 应用程序。我在画布内使用文本块和墨水管理器进行绘图。这项工作很好，但我只想在文本块的淹没文本上绘制墨水，而不是在孔画布中。

这是代码： -

```
<Canvas Name="canvas"  Background="Transparent" >
<TextBlock  x:Name="txtblock" Margin="80,0,0,0" Foreground="White"  
VerticalAlignment="Top" HorizontalAlignment="Center"  FontSize="60"/> </Canvas> 
```

请帮助我如何实现此功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:49:41.827

我认为最直接的方法是将你的包装`TextBlock`在另一个`Canvas`.

因此，您将拥有两个`Canvas`，子 Canvas 位于主 Canvas 内。

这种方法关注的一个方面是子对象的大小`Canvas`，其中需要根据容器的大小动态调整大小`TextBlock`。

```
<Canvas Name="canvas"  Background="Transparent" >
  <Canvas Name="childCanvas" Background="Transparent">
    <TextBlock  x:Name="txtblock" Margin="80,0,0,0" Foreground="White" FontSize="60"/> 
  </Canvas>
</Canvas> 
```

# mysql - GROUP BY MONTH() 隐藏结果

> ID：12597127
> 
> 赞同：1
> 
> 时间：2012-09-26T07:59:29.803
> 
> 标签：mysql, group-by

我试图计算每个月有多少结果。

这是我的查询：

```
SELECT 
    COUNT(*) as nb,
    CONCAT(MONTH(t.date),0x3a,YEAR(t.date)) as period
FROM table1 t
WHERE t.criteria = 'value'
GROUP BY MONTH(t.date)
ORDER BY YEAR(t.date) 
```

我的结果：

```
nb  period
---------------
7   6:2009
46  8:2009
2   10:2009
1   11:2009
14  1:2009
9   9:2010
161 7:2010
5   2:2010
88  3:2010
28  4:2010
4   5:2011
2   12:2011 
```

问题是，我确定我的结果介于 5:2011 和 12:2011 之间，以及自 2009 年以来的其他时期......：/

这是我的请求还是mysql配置的问题？

多谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T08:02:57.400

您必须按年和月分组。否则，您 2012 年 4 月的行也将与 2011 年 4 月（和 2010 年 4 月 ...）行分组。

```
SELECT 
    COUNT(*) AS nb,
    CONCAT(MONTH(t.date), ':', YEAR(t.date)) AS period
FROM table1 AS t
WHERE t.criteria = 'value'
GROUP BY YEAR(t.date)
       , MONTH(t.date) ; 
```

* * *

`0x3a`（你使用而不是有理由`':'`吗？）

* * *

您还可以使用 MySQL 的其他一些[DATE 和 TIME 函数](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)，因此每行调用的函数更少，并且可能是更有效的查询：

```
SELECT 
    COUNT(*) AS nb,
    DATE_FORMAT(t.date, '%m:%Y') AS period
FROM table1 AS t
WHERE t.criteria = 'value'
GROUP BY EXTRACT( YEAR_MONTH FROM t.date) ; 
```

* * *

对于多个查询，在数据库中有一个永久的日历表（包含所有日期或所有年月）或什至几个日历表很有用。例子：

```
CREATE TABLE CalendarYear
  ( Year SMALLINT UNSIGNED NOT NULL
  , PRIMARY KEY (Year)
  ) ENGINE = InnoDB ;

INSERT INTO CalendarYear
  (Year)
VALUES
  (1900), (1901), ..., (2099) ;

CREATE TABLE CalendarMonth
  ( Month TINYINT UNSIGNED NOT NULL
  , PRIMARY KEY (Month)
  ) ENGINE = InnoDB ;

INSERT INTO CalendarMonth
  (Month)
VALUES
  (1), (2), ..., (12) ; 
```

这些也可以帮助我们制作我们需要的：

```
CREATE TABLE CalendarYearMonth
  ( Year SMALLINT UNSIGNED NOT NULL
  , Month TINYINT UNSIGNED NOT NULL
  , FirstDay DATE NOT NULL
  , NextMonth_FirstDay DATE NOT NULL
  , PRIMARY KEY (Year, Month)
  ) ENGINE = InnoDB ;

INSERT INTO CalendarYearMonth
  (Year, Month, FirstDay, NextMonth_FirstDay)
SELECT
    y.Year
  , m.Month
  , MAKEDATE(y.Year, 1) + INTERVAL (m.Month-1) MONTH
  , MAKEDATE(y.Year, 1) + INTERVAL (m.Month) MONTH
FROM
    CalendarYear AS y
  CROSS JOIN
    CalendarMonth AS m ; 
```

然后，您可以使用日历表编写更复杂的查询，例如您想要的变化（缺少月份）并且可能更有效。在**[SQL-Fiddle](http://sqlfiddle.com/#!2/b32ee/5)**中测试：

```
SELECT 
    COUNT(t.date) AS nb,
    CONCAT(cal.Month, ':', cal.Year) AS period
FROM
        CalendarYearMonth AS cal
    JOIN
        ( SELECT
              YEAR(MIN(date))  AS min_year
            , MONTH(MIN(date)) AS min_month
            , YEAR(MAX(date))  AS max_year
            , MONTH(MAX(date)) AS max_month
          FROM table1
          WHERE criteria = 'value'
        ) AS mm
      ON  (cal.Year, cal.Month) >= (mm.min_year, mm.min_month)
      AND (cal.Year, cal.Month) <= (mm.max_year, mm.max_month)
    LEFT JOIN
        table1 AS t
      ON  t.criteria = 'value'
      AND t.date >= cal.FirstDay
      AND t.date < cal.NextMonth_FirstDay
GROUP BY 
    cal.Year, cal.Month ; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T08:01:53.807

您还必须`GROUP BY`在年份：

```
GROUP BY MONTH(t.date), YEAR(t.date) 
```

您的原始查询在任何聚合函数之外`YEAR(t.date)`的`SELECT`子句中使用，而不按它进行分组——因此，您得到正好 12 个组（每个可能的月份一个），并且对于每个组（可能包含多年的日期）一个“随机" 年份由 MySql 选择进行选择。严格来说，这是没有意义的，查询不应该被允许执行。但是 MySql...*叹息*。

# jetty - jetty osgi：使用一个 securityHandler 保护所有 servlet

> ID：12597137
> 
> 赞同：1
> 
> 时间：2012-09-26T08:00:01.240
> 
> 标签：jetty, osgi, security, pax-web

我正在使用码头作为与 paxweb 的 osgi 捆绑包。我想确保通过 OSGI HttpService 注册的所有 servlet 和资源都由一个通用的 SecurityHandler 保护（此外，我想使用 JAASLoginService）。我还想将所有未经身份验证的请求重定向到单个登录页面。

是否可以配置此场景？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T07:16:57.253

查看 Apache Felix 白板 HTTP 支持。您可以在注册表中注册过滤器，它们被底层 Jetty 使用：http: [//felix.apache.org/site/apache-felix-http-service.html](http://felix.apache.org/site/apache-felix-http-service.html)

过滤器支持的过滤器服务属性：

```
pattern - Regular expression pattern to register filter with.
contextId - Id of context to register with.
service.ranking - Where in the chain this filter should be placed.
init.* - Filter initialization values. 
```

我自己还没有尝试过，但很快就会......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T13:33:04.197

如果所有 Servlet 都使用相同的 HttpContext ，这是可能的。作为具有工作 Jaas 的运行时容器，我建议使用[Apache Karaf](http://karaf.apache.org/)。它提供了所有需要的东西，包括作为 HTTPService 的 Pax Web，包括 HttpWhiteboard Extender。

# javascript - Angularjs单选按钮

> ID：12597138
> 
> 赞同：32
> 
> 时间：2012-09-26T08:00:02.753
> 
> 标签：javascript, data-binding, angularjs

我知道在某些 Google 线程中已经谈到了这一点，但我仍然找不到将我的无线电输入绑定到模型的正确解决方案（以简洁的方式），

目前我有 HTML：

```
<input ng-model="searchByRma" type="radio" name="search-type">
<input ng-model="searchByDelivery" type="radio" name="search-type"> 
```

在控制器中：

```
$scope.searchByRma      = true;
$scope.searchByDelivery = false; 
```

这不起作用（就像复选框一样）......

关于如何在第一个单选按钮上设置默认值而不丢失数据绑定的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-09-26T08:06:09.053

我认为您应该在这两个单选按钮中使用具有不同值的相同变量。

```
<input ng-model="searchBy" value="Rma" type="radio" name="search-type">
<input ng-model="searchBy" value="Delivery" type="radio" name="search-type"> 
```

然后，您应该`searchBy`根据用户输入设置“Rma”或“Delivery”。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-11-01T19:28:00.287

对我有用的是将模型变量设置为 { }，这会将单选按钮重置为默认（未选中）状态。当然，这只有在您的单选按钮标签正确时才有效，如 tosh 的回答。

在你的情况下：

```
$scope.searchBy = { }; 
```

# php - 具有多个结果集的 MSSQL、PHP 和存储过程

> ID：12597139
> 
> 赞同：1
> 
> 时间：2012-09-26T08:00:12.940
> 
> 标签：php, sql-server

我好像有问题。我继承了一些在 Windows 机器上运行的 PHP 代码，它连接到同一台机器上的 MSSQL DB。不幸的是，我们是一家 Linux 公司，我们现在需要让这段代码在 linux 机器上运行。所以我正在慢慢经历这一切并进行调整以确保它在 Linux 中正确运行。大多数更改是针对 C:\ 而不是 /var/www 和变量检查的配置设置。

不过，我碰到了一点砖墙。该代码运行一个查询，该查询返回有限的分页结果。

php 代码如下所示：

```
if ( $offset !== null ) {
  $querystring = "exec SSDEV.dbo.sp_limit '".str_replace("'", "''",$querystring)."', '".intval($offset)."','".intval($limit)."';";
} 
```

查询字符串最终看起来像这样：

```
exec SSDEV.dbo.sp_limit 'select  users.*  from users order by users.first_name asc', '0','20'; 
```

使用以下代码行运行查询：

```
$result = mssql_query($querystring,$this->connection); 
```

sp_limit 如下所示：

```
SET QUOTED_IDENTIFIER OFF 
GO
SET ANSI_NULLS ON 
GO

ALTER procedure sp_limit (@sql text, @offset int, @limit int)
as
declare @cursor int;

set @offset=@offset+1;
exec sp_cursoropen @cursor output, @sql, 8,8193;
exec sp_cursorfetch @cursor,32,@offset,@limit;
exec sp_cursorclose @cursor;

GO
SET QUOTED_IDENTIFIER OFF 
GO
SET ANSI_NULLS ON 
GO 
```

在查询分析器中运行存储过程，它运行没有问题，但我注意到它返回 2 个结果集，一个为 sp_cursoropen 的空白（虽然带有列字段），一个来自 sp_cursorfetch，其中包含我正在寻找的数据.

如果我注释掉在 PHP 中创建存储过程查询字符串的行并只运行基本 SQL 语句而没有“限制”，则代码运行良好。

但是，当它使用存储过程运行时，页面将永远挂起，然后在 mssql_query() 函数上失败。这是来自 apache 日志的错误：

```
[Wed Sep 26 09:26:34 2012] [error] [client 127.0.0.1] PHP Warning:  mssql_query(): Query failed in /var/www/mysite/libs/DB.class.php on line 80, referer: http://mysite/
[Wed Sep 26 09:26:34 2012] [error] [client 127.0.0.1] PHP Warning:  mssql_query(): Unable to set query in /var/www/mysite/libs/DB.class.php on line 80, referer: http://mysite/
[Wed Sep 26 09:26:34 2012] [error] [client 127.0.0.1] PHP Fatal error:  Uncaught exception 'Exception' with message 'Query failed: Changed database context to 'SSDEV'.' in /var/www/mysite/libs/DB.class.php:82
    Stack trace:
    #0 /var/www/mysite/libs/HTML.class.php(22): DB->select('select region_c...', 2, 1)
    #1 /var/www/mysite/controllers/SS_Users_Controller.class.php(264): HTML->get_select_query('select region_c...', 'region_code', 'region_name', 'fk_regions', '', ' a Region', Array)
    #2 /var/www/mysite/libs/Controller.class.php(72): SS_Users_Controller->index()
    #3 /var/www/mysite/index.php(34): Controller->execute()
    #4 {main}
       thrown in /var/www/sweetspot/libs/DB.class.php on line 82, referer: http://mysite/
[Wed Sep 26 09:26:34 2012] [error] [client 127.0.0.1] PHP Notice:  Unknown: Skipping numeric key 0 in Unknown on line 0, referer: http://mysite/ 
```

如您所见，执行存储过程时出现问题。据我所知，在 PHP 中返回多个结果集并进行处理应该不是什么大问题。如果它在尝试访问结果集时抛出错误，那么我会更容易相信这是有两个结果集的事实，但从我的谷歌搜索来看，我知道 PHP 不应该有问题，除了你需要使用 mssql_next_result()。什么让我烦恼，这在 Windows 版本上可以正常工作吗，为什么突然出现问题，为什么只有存储过程而不是正常的 SQL 语句？

非常感谢任何帮助。

# ibm-mq - Websphere MQ 和高可用性

> ID：12597140
> 
> 赞同：3
> 
> 时间：2012-09-26T08:00:16.040
> 
> 标签：ibm-mq, high-availability

当我阅读 Websphere MQ 中的 HA 时，我总是直言不讳，最佳实践是创建两个队列管理器来处理同一个队列并使用开箱即用的负载平衡。因此，当一个人倒下时，另一个人会接替他的工作。

好吧，这很好，但是队列中属于宕机的队列管理器的消息呢？我的意思是这些消息是否驻留在那里（当然当队列是持久的时）直到 QM 重新启动并运行？

此外，是否可以为这个双倍队列管理器创建一个公共存储？然后没有消息会等待 QM 启动。每条消息都将以正确的顺序传递。这个对吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T10:13:40.167

WebSphere MQ 根据您的要求为 HA 提供不同的功能。WebSphere MQ 集群使用并行性在队列的多个实例之间分配负载。这提供*了服务的*可用性，但不适用于飞行中的消息。

硬件集群和多实例队列管理器 (MIQM) 都是使用队列管理器的多个实例的设计，这些实例可以看到该队列管理器状态的单个磁盘映像。这些提供了正在运行*的消息的可用性，*但在集群故障转移时服务暂时不可用。

结合使用这些，可以提供飞行中消息的恢复以及跨多个队列实例的服务可用性。

在硬件集群模型中，磁盘仅安装到一台服务器，集群软件监控故障并将磁盘、IP 地址和可能的其他资源交换到辅助节点。这需要诸如 PowerHA 之类的硬件集群监视器来管理集群。

Multi-Instance QMgr 完全在 WebSphere MQ 中实现，不需要其他软件。它的工作原理是让 QMgr 的两个运行实例指向同一个 NFS 4 共享磁盘安装。两个实例都在争夺文件的锁。第一个获得锁的成为活动 QMgr。因为没有硬件集群监视器来执行 IP 地址接管，这种类型的集群将有多个 IP 地址。任何现代版本的 WMQ 都允许使用多实例来实现这一点`CONNAME`，您可以在其中提供以逗号分隔的 IP 或 DNS 名称列表。以前使用客户端通道定义表 (CCDT) 来管理跨多个 QMgrs 的故障转移的客户端应用程序将继续工作，并且当前版本的 WMQ 继续支持 CCDT。

有关硬件集群和 MIQM 支持的详细信息，请参阅信息中心主题[*将 WebSphere MQ 与高可用性配置一起使用。*](http://pic.dhe.ibm.com/infocenter/wmqv7/v7r5/topic/com.ibm.mq.con.doc/q017820_.htm)

客户渠道定义表文件在信息中心主题[*客户渠道定义*](http://pic.dhe.ibm.com/infocenter/wmqv7/v7r5/topic/com.ibm.mq.con.doc/q016730_.htm)表文件中进行了讨论。

# sql - 查询如何在sql中添加缺失的日期

> ID：12597143
> 
> 赞同：4
> 
> 时间：2012-09-26T08:00:25.700
> 
> 标签：sql, sql-server, sql-server-2008

需要知道如何在相应字段中添加缺少空数据的日期

```
**05/28/2012    NULL
05/29/2012  NULL
05/30/2012  NULL
05/30/2012  Break In
05/30/2012  Break Out
05/31/2012  NULL**

06/03/2012  NULL
06/03/2012  Break In
06/03/2012  Break Out
06/03/2012  In Duty
06/03/2012  Out Duty
06/04/2012  NULL
06/04/2012  In Duty
06/04/2012  Out Duty
06/05/2012  NULL
06/05/2012  Break In
06/05/2012  Break Out
06/06/2012  NULL
06/06/2012  Break In
06/06/2012  Break Out
06/06/2012  In Duty
06/06/2012  Out Duty
06/07/2012  NULL
06/07/2012  In Duty
06/07/2012  Out Duty

06/10/2012  NULL
06/10/2012  Break Out
06/10/2012  In Duty
06/10/2012  Out Duty
06/11/2012  NULL
06/11/2012  In Duty
06/11/2012  Out Duty
06/12/2012  NULL
06/13/2012  NULL
06/14/2012  NULL 
```

我需要的结果是：

```
05/28/2012  NULL
05/29/2012  NULL
05/30/2012  NULL
05/30/2012  Break In
05/30/2012  Break Out
05/31/2012  NULL
06/01/2012      null
06/02/2012      null
06/03/2012  NULL
06/03/2012  Break In
06/03/2012  Break Out
06/03/2012  In Duty
06/03/2012  Out Duty
06/04/2012  NULL
06/04/2012  In Duty
06/04/2012  Out Duty
06/05/2012  NULL
06/05/2012  Break In
06/05/2012  Break Out
06/06/2012  NULL
06/06/2012  Break In
06/06/2012  Break Out
06/06/2012  In Duty
06/06/2012  Out Duty
06/07/2012  NULL
06/07/2012  In Duty
06/07/2012  Out Duty
06/08/2012      null
06/09/2012      null
06/10/2012  NULL
06/10/2012  Break Out
06/10/2012  In Duty
06/10/2012  Out Duty
06/11/2012  NULL
06/11/2012  In Duty
06/11/2012  Out Duty
06/12/2012  NULL
06/13/2012  NULL
06/14/2012  NULL 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T08:03:18.597

最好的选择是保留一个日历表，其中包含您要计算的几年的所有日期，然后加入该表

```
select date,col1
from calender_table c
left join 
your_table t
on c.[date]=t.[date] 
```

你可以很容易地创建一个日历表。网络上有很多可用的脚本。 [点击查看示例](http://www.kodyaz.com/articles/sql-server-dates-table-using-tsql-cte-calendar-table.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T08:07:33.977

```
Declare @stDate datetime='05/28/2012'
declare @eddate datetime='06/14/2012'
select DATEADD(day,number,@stdate) from master..spt_values where type='P'
and DATEADD(day,number,@stdate) <= @eddate 
```

在这里只需将此结果与日期列上的表格连接起来即可获取缺失的日期

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T08:13:58.787

形成具有开始和结束日期范围的日期日历，并与您的表执行左连接以获得所需的结果。

例如

```
DECLARE @t TABLE(Dt Datetime, Value VARCHAR(20) NULL)
INSERT INTO @t VALUES
('05/28/2012',NULL),
('05/29/2012',NULL),
('05/30/2012',NULL),('05/30/2012','Break In'),('05/30/2012','Break Out'),
('05/31/2012',NULL),
('06/03/2012',NULL),('06/03/2012','Break In'),('06/03/2012','Break Out'),('06/03/2012','In Duty'),('06/03/2012','Out Duty'),
('06/04/2012',NULL),('06/04/2012','In Duty'),('06/04/2012','Out Duty'),
('06/05/2012',NULL),('06/05/2012','Break In'),('06/05/2012','Break Out'),
('06/06/2012',NULL),('06/06/2012','Break In'),('06/06/2012','Break Out'),('06/06/2012','In Duty'),('06/06/2012','Out Duty'),
('06/07/2012',NULL),('06/07/2012','In Duty'),('06/07/2012','Out Duty'),
('06/10/2012',NULL),('06/10/2012','Break Out'),('06/10/2012','In Duty'),('06/10/2012','Out Duty'),
('06/11/2012',NULL),('06/11/2012','In Duty'),('06/11/2012','Out Duty'),
('06/12/2012',NULL),
('06/13/2012',NULL),
('06/14/2012',NULL)

DECLARE @startDate DATETIME, @endDate DATETIME
SELECT @startDate = '2012-05-28', @endDate = '2012-06-14' --yyyy-mm-dd
;WITH Calender AS (
    SELECT @startDate AS CalanderDate
    UNION ALL
    SELECT CalanderDate + 1 FROM Calender
    WHERE CalanderDate + 1 <= @endDate
)
SELECT 
    [Date] = Convert(VARCHAR(10),CalanderDate,101)
    ,Value
FROM Calender c
LEFT JOIN @t t 
ON t.Dt = c.CalanderDate 
```

**结果**

```
Date    Value
05/28/2012  NULL
05/29/2012  NULL
05/30/2012  NULL
05/30/2012  Break In
05/30/2012  Break Out
05/31/2012  NULL
06/01/2012  NULL
06/02/2012  NULL
06/03/2012  NULL
06/03/2012  Break In
06/03/2012  Break Out
06/03/2012  In Duty
06/03/2012  Out Duty
06/04/2012  NULL
06/04/2012  In Duty
06/04/2012  Out Duty
06/05/2012  NULL
06/05/2012  Break In
06/05/2012  Break Out
06/06/2012  NULL
06/06/2012  Break In
06/06/2012  Break Out
06/06/2012  In Duty
06/06/2012  Out Duty
06/07/2012  NULL
06/07/2012  In Duty
06/07/2012  Out Duty
06/08/2012  NULL
06/09/2012  NULL
06/10/2012  NULL
06/10/2012  Break Out
06/10/2012  In Duty
06/10/2012  Out Duty
06/11/2012  NULL
06/11/2012  In Duty
06/11/2012  Out Duty
06/12/2012  NULL
06/13/2012  NULL
06/14/2012  NULL 
```

希望这可以帮助

# css - 从 CSS 样式中排除组件

> ID：12597147
> 
> 赞同：0
> 
> 时间：2012-09-26T08:00:43.280
> 
> 标签：css, xhtml, primefaces

我正在写一个简单的 xhtml 页面，我使用模板、css .. 来设置它的样式。

在此页面中，我必须显示一条消息，我的问题是该消息是用 css 设置样式的，我不希望它被设置样式，这是消息代码：

```
 <p:messages id="messages" showDetail="true" autoUpdate="true" closable="true" /> 
```

那么有没有办法从我的 css 样式中排除消息。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T22:15:17.677

css 中没有排除项，您可以通过更具体地处理元素来覆盖样式。如果您可以选择的类或 ID 仅影响您想要的元素，那么您可以添加或否决其上已有的任何样式。

向您的元素添加一个类（例如），使其看起来像：

```
<p:messages id="messages" class="unstyled" showDetail="true" autoUpdate="true" closable="true" /> 
```

然后添加任何你想要的css。

```
.unstyled {
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T18:52:29.070

尝试使用 h:messages 代替。标准组件几乎没有风格。否则彼得是正确的

# java - 如何启动 postgresql 实例进行集成测试

> ID：12597148
> 
> 赞同：6
> 
> 时间：2012-09-26T08:00:46.230
> 
> 标签：java, postgresql, integration-testing

通常我使用 hsqldb 进行一些集成测试，它工作正常。但是有些测试需要有一个 postgresql 实例。当我们的生产服务器运行 postgresql 时，无论如何对生产数据库运行测试是一个好主意。

是否有 maven 插件或类似的东西可以轻松地在给定端口上安装和启动 postgresql 数据库并在运行所有测试后将其关闭？

[mysql-je之](http://mysql-je.sourceforge.net/)类的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T08:26:22.753

我什么都不知道。但是您可能不想启动和停止实际的 PostgreSQL 服务器；您希望服务器一直运行，并根据需要创建和销毁数据库。

您可以[在 SQL 中创建数据库](http://www.postgresql.org/docs/9.1/static/sql-createdatabase.html)，也可以[将其销毁](http://www.postgresql.org/docs/9.1/static/sql-dropdatabase.html)。如果您设置了一个空的初始数据库，并且不用于存储任何数据，您可以拥有如下工作流程：

1.  连接到空数据库
2.  发出创建新数据库的命令
3.  针对新数据库运行测试
4.  发出命令以删除新数据库

# django - 带有客户端更新的异步视图，用于长时间运行的进程/视图

> ID：12597152
> 
> 赞同：4
> 
> 时间：2012-09-26T08:01:00.847
> 
> 标签：django, asynchronous, progress-bar

我的应用程序中有一个视图，在请求时可能需要很长时间才能提供给客户。为了通知用户服务器正在工作，我想向用户呈现某种进度条，但它并不是真正的进度条，它更像是这样：

a) 客户端正在请求 /myapp/longrunningview/

b）服务器返回部分 h​​tml 端，包括看起来服务器正在工作的动画。同时服务器正在计算剩余的响应，这个过程需要很长时间

c) 服务器完成并将响应返回给客户端

d) 在客户端呈现响应

它不是真正的进度条，因为用户可能会从我的应用程序外部的页面请求此页面，并且我想立即向用户返回一些内容，而无需等待整个过程完成。我发现的进度条实现都是基于发送到服务器的某种形式，而客户端在等待响应时显示进度条。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T12:03:51.300

我会为这类事情使用芹菜任务。当用户发出请求时，启动任务，然后发回一个带有进度微调器或其他内容的页面，然后每隔几秒钟让一段 AJAX 访问服务器，询问它是否完成，或者使用 socketio 和 django-socketio 或类似的包向客户端推送“完成”通知，然后可以将您重定向到您需要去的任何地方。

资源：

*   Django-SocketIO [https://github.com/stephenmcd/django-socketio](https://github.com/stephenmcd/django-socketio)
*   SocketIO [http://socket.io/](http://socket.io/)
*   芹菜[http://celeryproject.org/](http://celeryproject.org/)
*   Django 芹菜[http://docs.celeryproject.org/en/latest/django/index.html](http://docs.celeryproject.org/en/latest/django/index.html)

# scheme - 调试我的校验和函数

> ID：12597155
> 
> 赞同：-1
> 
> 时间：2012-09-26T08:01:16.050
> 
> 标签：scheme

我们有这个代码

```
(define (checksum-2 ls)
  (let ([x (reverse ls)])
    (cond
      [(null? ls) 0]
      [else (+ (*  (length ls) (car x)) (checksum-2 (cdr x)))]))) 
```

它颠倒了这个列表

```
'(4 6 7 5 6) 
```

假设返回 87 但它返回 80。任何人都可以帮助我们调试这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T08:06:27.960

如所写，此函数将返回

```
5 * 6 + 4 * 4 + 3 * 5 + 2 * 6 + 1 * 7 = 80 
```

这是因为在每个阶段，它取反向列表的第一个元素（即列表的最后一个元素）并将其乘以列表长度，并将其添加到调用*反向*列表`checksum-2`的结果中。然后列表再次反转，因此要添加的下一个元素是最初位于列表*前面*的元素（在这种情况下）。**`4`**

 **您要做的是将列表反转*一次*，然后从那时起使用反转的列表。为此，您可以使用辅助函数：

```
(define (chksum ls)
  (chksum-helper (reverse ls)))

(define (chksum-helper ls)
  (cond
    ((null? ls) 0)
    (else (+ (* (length ls) (car ls))
             (chksum-helper (cdr ls)))))) 
```

现在您只需将列表反转一次，这在效率上是一个巨大的胜利。要清理代码，您可以在 的定义中`chksum-helper`分解 的定义`chksum`，得到如下内容：

```
(define (chksum ls)
  (define (chksum-helper x)
    (cond
      ((null? x) 0)
      (else (+ (* (length x) (car x))
               (chksum-helper (cdr x))))))
  (chksum-helper (reverse ls))) 
```

我将参数重命名为`chksum-helper`from `ls`to`x`以防止混淆，但您实际上不必这样做 - 如果您将其保留为`ls`. 这与您将要获得的一样紧凑。**

# html - html dd标签问题

> ID：12597156
> 
> 赞同：-1
> 
> 时间：2012-09-26T08:01:17.910
> 
> 标签：html

我正在使用 dd 标签，但 ie / firefox 显示不同

1.ie 正常视图：没有填充，没有边距 2.firefix 奇怪的视图：一些填充或一些边距

html源代码是

dd 标签左对齐，无边距，内边距

html源码

```
<STYLE>
.sortable { list-style-type: none; margin: 0 0 0 0 ; padding: 0 0 0 0; width: 100%; float:left; }
.sortable li { float:left; width:100%; }
.sortable li dd { 
    float:left;
    text-align:left;
    border:thin inset;  
}
.sortable #topmenu dd { background-color:#e7e7e7;}
.sortable li .seq {width:4%;}
.sortable li .mdp {width:11%;}
.sortable li .korname {width:10%;}
.sortable li .chrCd {width:10%;}
.sortable li .name {width:30%;}
.sortable li .direct {width:18%;}
.sortable li .result {width:7%;}
.liList { 
    font-family: 굴림,arial;
    font-size: 9pt;
    line-height: 11pt;
    text-decoration: none;
    height:17px;
    text-align:center;      
}       
</STYLE>
<div>
<ul class="sortable">
    <li class="liList" id="topmenu">
        <dd class="seq"><b>번호</b></dd>
        <dd class="mdp"><b>MDP구분</b></dd>
        <dd class="korname"><b>학습단계</b></dd>
        <dd class="chrCd"><b>강좌코드</b></dd>
    </li>
</ul>
<ul id="sortable" class="sortable"> 
    <li class="liList">
            <dd class="seq" id="re">5</dd>
            <dd class="mdp">MDP</dd>
            <dd class="korname">특강</dd>
            <dd class="chrCd" id="chrCd_1">12131</dd>
    </li>   
    <li class="liList">
            <dd class="seq" id="re">4</dd>
            <dd class="mdp">MDP</dd>
            <dd class="korname">문제풀이&lt;/dd>
            <dd class="chrCd" id="chrCd_2">12227</dd>
    </li>   
    <li class="liList">
            <dd class="seq" id="re">3</dd>
            <dd class="mdp">MDP</dd>
            <dd class="korname">특강</dd>
            <dd class="chrCd" id="chrCd_3">12215</dd>
    </li>   
    <li class="liList">
            <dd class="seq" id="re">2</dd>
            <dd class="mdp">MDP</dd>
            <dd class="korname">기본완성</dd>
            <dd class="chrCd" id="chrCd_4">12171</dd>
    </li>   
    <li class="liList">
            <dd class="seq" id="re">1</dd>
            <dd class="mdp">MDP</dd>
            <dd class="korname">기본완성</dd>
            <dd class="chrCd" id="chrCd_5">12147</dd>
    </li>   
</ul> 
```

为什么不同的节目？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T08:33:45.903

DD 标签只能出现在 DL 中，并且应该带有 DT。在我看来，您应该使用这样的 UL 和 LI：

```
<ul class="sortable">
    <li class="liList" id="topmenu">
        <ul>
          <li class="seq"><b>번호</b></li>
          <li class="mdp"><b>MDP구분</b></li>
          <li class="korname"><b>학습단계</b></li>
          <li class="chrCd"><b>강좌코드</b></li>
        </ul>
    </li>
</ul> 
```

# php - php对mysql查询的误解

> ID：12597159
> 
> 赞同：0
> 
> 时间：2012-09-26T08:01:20.887
> 
> 标签：php, mysql

我有一个带有“文本”col 的数据库，其中包含一个像这样的 javascript 对象：

```
{
    "description"       : "", 
    "title"             : " diagramm1",
    "xlabel"            : "Zeit",
    "ylabel"            : "",
    "ylabel1"           : "Anzahl Stabis aufgelegt",
    "ylabel2"           : "Anzahli.O.",
    "tablename"         : "edmat1",
    "xvaluecol"         : "timestamp",
    "y1valuecol"        : "EDMAT1Q001",
    "y2valuecol"        : "EDMAT1Q002",
    "showRangeSelector" : true,
    "divid"             : "diagramm1",
    "refreshtime"       : 30000
 } 
```

如果我用 php 从数据库中得到它，它会被解释为一个 php 数组。我该怎么做才能强制 php 将其视为字符串？之后我想将此 javascript 对象提供给 javascript。

`json_encode`在 php 端和Javascript 端尝试过`JSON.parse`，必须有其他解决方案。

编辑：

```
$db=mysql_connect("localhost","root","");
mysql_select_db("visualization");
$anfrage="SELECT options FROM mat1 WHERE id=1";
$a=mysql_query($anfrage);
$b=mysql_fetch_row($a);
echo $b; 
```

只有上排！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T08:25:40.150

> 如果我用 php 从数据库中得到它，它会被解释为一个 php 数组。我该怎么做才能强制 php 将其视为字符串？

如果将其存储为字符串，则它将保持为字符串。即使在 JavaScript 中，您也必须将其解析为对象或数组。

您使用 mysql_fetch_row，这意味着您将在索引数组中包含您的结果。由于 yoy 仅选择了一列，因此您的数组也将仅包含一列。所以你的解决方案是（如评论中所说）`$your_result = $db[0];`

此外，根据 php 文档，我建议您将 mysql_ 函数切换到 mysqli_ 函数，这些函数更新、性能更高并且支持更新版本的 Mysql SGBD。

# iis-7 - Stackoverflow 发生在一个 IIS 站点上，但不在另一个站点上

> ID：12597162
> 
> 赞同：0
> 
> 时间：2012-09-26T08:01:27.220
> 
> 标签：iis-7

我有一个托管在测试站点上的网站，现在我将其发布到 IIS7 上的一个面向公众的演示站点。我首先将网站复制到演示机器上，创建了一个单独的网站并将其指向我复制的文件。我登录该站点并快速浏览了主要功能，一切都运行良好。配置文件与现有的 Demo 配置完全相同，除了一些额外的应用程序设置。

然后我将演示站点指向我的新网站文件夹。旧网站文件夹位于 C:\inetpub\wwwroot\DemoSite\10.5

新的位于 C:\inetpub\wwwroot\DemoSite\10.7

当我浏览到登录页面时，它会出现。当我尝试登录时，它挂起并最终给我一个找不到页面的错误。我检查了事件日志，有以下错误

```
Application: w3wp.exe

Framework Version: v4.0.30319

Description: The process was terminated due to stack overflow.

Faulting application w3wp.exe, version 7.0.6002.18005, time stamp 0x49e023cf, 
faulting module clr.dll, version 4.0.30319.269, time stamp 0x4ee9ae83, exception code
0xc00000fd, fault offset 0x00012f71, process id 0x%9, application start time 0x%10. 
```

这一定与 IIS 有关，因为我可以使用同一文件夹中的相同代码登录，但使用不同的 IIS 站点

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T08:38:57.777

在完成所有 IIS 设置后，我注意到应用程序池的“启用 32 位应用程序”具有不同的值。我将演示上的设置从“是”更改为“否”，它起作用了。我的猜测是，它之前是在 32 位机器上构建的，现在它是在 x64 处理器上构建的。

# python - 强制 python 解释器重新加载代码模块

> ID：12597164
> 
> 赞同：22
> 
> 时间：2012-09-26T08:01:41.267
> 
> 标签：python, openerp

OpenERP python代码开发周期是编辑你的代码，重启服务器并测试它。重新启动服务器是必要的，因为它会使您的源代码重新加载到内存中，但它会增加您工作节奏的恼人延迟。

由于 python 是一种动态语言，我想知道是否有一种方法可以强制正在运行的 python 解释器（应用程序服务器）动态重新加载代码模块，以便可以在不重新启动应用程序服务器的情况下对其进行测试？

**更新：** 按照`reload`@ecatmur 建议的路径，我得到了下面的代码，但它仍然不起作用：

```
class module(osv.osv):
    _inherit = "ir.module.module"

    def action_reload(self, cr, uid, ids, context=None):
        for obj in self.browse(cr, uid, ids, context=context):
            modulename = 'openerp.addons.' + obj.name
            tmp = __import__(modulename)
            pycfile = tmp.__file__
            modulepath = string.replace(pycfile, ".pyc", ".py")
            code=open(modulepath, 'rU').read()
            compile(code, modulename, "exec")
            execfile(modulepath)
            reload( sys.modules[modulename] )
        openerp.modules.registry.RegistryManager.delete(cr.dbname)
        openerp.modules.registry.RegistryManager.new(cr.dbname) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-26T08:12:35.057

[`reload`](http://docs.python.org/library/functions.html#reload)内置函数将重新加载单个模块。有多种解决方案可以递归地重新加载更新的包；请参阅[如何在 Python 解释器中重新导入更新的包？](https://stackoverflow.com/questions/684171/how-to-re-import-an-updated-package-while-in-python-interpreter)

部分问题是需要调整现有对象以从重新加载的模块中引用新类等；[reimport](http://code.google.com/p/reimport/)做得相当好。在 IPython 交互式控制台中，我使用了[autoreload](http://ipython.org/ipython-doc/dev/config/extensions/autoreload.html)扩展，尽管它不是为在 IPython 之外使用而设计的。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-04T19:28:12.597

**更新：从 v8 开始，Odoo 服务器提供了一个`--auto-reload`选项来执行此操作。**

很好的问题，我经常想知道同样的问题。我认为您发布的代码的主要问题是它只重新加载 OpenERP 模块的`__init__.py`文件，而不是所有单个文件。[ecatmur](https://stackoverflow.com/a/12597338/4794)`reimport`推荐的模块可以解决这个问题，我还必须在重新加载所有内容之前取消注册模块的报告解析器和模型类。

我已经在[Launchpad](http://bazaar.launchpad.net/~zaber/openobject-addons/zaber-custom/files/head:/module_reload/)`module_reload`上发布了我的模块。它似乎适用于模型类、向导和报告解析器的更改。它不适用于旧式向导，可能还有其他场景不起作用。`osv_memory`

这是重新加载模块的方法。

```
def button_reload(self, cr, uid, ids, context=None):
    for module_record in self.browse(cr, uid, ids, context=context):
        #Remove any report parsers registered for this module.
        module_path = 'addons/' + module_record.name
        for service_name, service in Service._services.items():
            template = getattr(service, 'tmpl', '')
            if template.startswith(module_path):
                Service.remove(service_name)

        #Remove any model classes registered for this module
        MetaModel.module_to_models[module_record.name] = []                    

        #Reload all Python modules from the OpenERP module's directory.
        modulename = 'openerp.addons.' + module_record.name
        root = __import__(modulename)
        module = getattr(root.addons, module_record.name)

        reimport(module)
    RegistryManager.delete(cr.dbname)
    RegistryManager.new(cr.dbname)
    return {} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T09:54:27.650

ipython 有一个 deepreload 模块，文档在这里：http: [//ipython.org/ipython-doc/stable/api/generated/IPython.lib.deepreload.html#module-IPython.lib.deepreload](http://ipython.org/ipython-doc/stable/api/generated/IPython.lib.deepreload.html#module-IPython.lib.deepreload)

我认为它可以在 ipython REPL 之外使用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T19:04:46.917

如果你只是在做开发，那么重新加载是可以的，但如果你在部署中，你应该避免这样的技巧，因为它们永远不会 100% 工作。总会有一些微妙之处，这些变化不会传播。例如，如果某些代码复制一个对象而不是仅使用对它的引用，那么在重新加载后它将保持不变。相反，如果一个引用没有正确地向前传播，那么`is`当预期它可以工作时，比较就会失败，因为其中一个对象将来自“旧的”未发布的模块。唯一 100% 确定的触发方法是重新加载所有内容，这本质上就是服务器重启。

即使您只是在进行开发，您偶尔也会遇到错误的错误，这些错误只是不完全重新加载的副作用。如果您没有尝试干净重启，您可能会花费很*长时间*来尝试追踪幻影错误。因此，如果您最终这样做，请记住这一点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T09:27:18.853

reload 内置函数重新加载模块或包。但是，在 OpenERP 的上下文中，您需要更多，因为重新加载 OpenERP 插件需要处理 XML 文件等。但我同意在 OpenERP 中使用它会很好。

# c# - 从 100 个文本文件中提取电子邮件地址

> ID：12597166
> 
> 赞同：0
> 
> 时间：2012-09-26T08:01:43.730
> 
> 标签：c#, full-text-search

我的 SMTP 服务器在发送大量电子邮件时出现了 100 多个错误。现在有很多 .BAD 文件，每个文件都包含一条错误消息，中间的某个地方是它应该发送到的实际电子邮件地址。

从每个文件中“仅”提取“电子邮件地址”的最简单方法是什么，以便我可以获得实际失败电子邮件的列表？

我可以用 C# 编写代码，任何建议都会受到欢迎。

## 错误的示例文本：

```
From: postmaster@my.server.com
To: me@me.com
Date: Tue, 25 Sep 2012 12:12:09 -0700
MIME-Version: 1.0
Content-Type: multipart/report; report-type=delivery-status;
    boundary="9B095B5ADSN=_01CD9B35032DF58000000066my.server.co"
X-DSNContext: 7ce717b1 - 1386 - 00000002 - C00402D1
Message-ID: <FRaqbC8wS00000068@my.server.com>
Subject: Delivery Status Notification (Failure)

This is a MIME-formatted message.  
Portions of this message may be unreadable without a MIME-capable mail program.

--9B095B5ADSN=_01CD9B35032DF58000000066my.server.co
Content-Type: text/plain; charset=unicode-1-1-utf-7

This is an automatically generated Delivery Status Notification.

Unable to deliver message to the following recipients, due to being unable to connect successfully to the destination mail server.

       email@stackoverflow.com

--9B095B5ADSN=_01CD9B35032DF58000000066my.server.com
Content-Type: message/delivery-status

Reporting-MTA: dns;my.server.com
Received-From-MTA: dns;Social
Arrival-Date: Tue, 25 Sep 2012 11:45:15 -0700

Final-Recipient: rfc822;email@stackoverflow.com
Action: failed
Status: 4.4.7

--9B095B5ADSN=_01CD9B35032DF58000000066my.server.com
Content-Type: message/rfc822

Received: from Social ([127.0.0.1]) by my.server.com with Microsoft SMTPSVC(7.5.7601.17514);
     Tue, 25 Sep 2012 11:45:15 -0700 
```

主要是我想`email@stackoverflow.com`在中间找到电子邮件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T09:28:09.153

你不需要 C# 来完成这个任务，这可以用[Grep](https://en.wikipedia.org/wiki/Grep)更简单地解决。通过编写新的 C# 程序，您正在为 40 年前解决的问题创建新的解决方案 :)

Grep 是专门为解决此类问题而设计的命令行工具。[它搜索与glob](http://en.wikipedia.org/wiki/Glob_%28programming%29)（例如）匹配的文件列表`*.bad`并找到正则表达式匹配项。然后，您可以让它将所有这些匹配项导出到一个文本文件中。

[这个正则表达式](http://regexr.com?32ala)应该足以匹配您的电子邮件地址：

```
(?<=^Final-Recipient: rfc822;)(.*)$ 
```

grep 命令将是这样的：

```
grep "(?<=^Final-Recipient: rfc822;)(.*)$" *.bad >> emails.txt 
```

这会将所有匹配的电子邮件地址放在一个名为`emails.txt`.

[您可以在此处](http://www.wingrep.com/)获得 Windows 版本的 Grep > ，或者 Windows 有一个内置的 grep 替代品，称为[findstr](http://technet.microsoft.com/en-us/library/bb490907.aspx)，它也可能符合您的需求。

编辑：如果你决定走这条路，你可能想在[ServerFault](https://serverfault.com/)`grep`上再次问这个问题。与 StackOverflow 上的开发人员相比，那里的系统管理员在这类事情上拥有更多的专业知识:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:21:41.460

我有一个解决方案....首先您必须找到 (To:) 的索引，然后使用如下所示的正则表达式

```
 start = emailbody.IndexOf("To:");

                        if (start < 0)
                            start = 0;

     string emailExpression = @"([a-zA-Z0-9_\.]+)@([a-zA-Z0-9_\.]+)\.([a-zA-Z]{2,3})";
      System.Text.RegularExpressions.Regex regExp = new System.Text.RegularExpressions.Regex(emailExpression);

                        if (regExp.IsMatch(eamilbody, start))

               {
                     System.Text.RegularExpressions.Match match = regExp.Match(emailbody, start);
                            string email = match.Value;

                 } 
```

# ios - 包含在静态 iOS 框架中时未正确导入 MKNetworkKit 类别

> ID：12597168
> 
> 赞同：0
> 
> 时间：2012-09-26T08:01:47.287
> 
> 标签：ios, ios-frameworks, mknetworkkit

我正在使用来自[jverkoey/iOS-Framework](https://github.com/jverkoey/iOS-Framework)的模板构建一个静态 iOS 框架，并在框架中包含[MKNetworkKit](https://github.com/MugunthKumar/MKNetworkKit)的源文件。

我添加了`#import "MKNetworkKit.h"`，并且在 Xcode 中一切似乎都运行良好。项目构建和类别方法由代码完成找到。

但是当代码运行时，我发现每当在类别上调用方法时`- [NSString md5]`，应用程序都会崩溃并出现错误，例如`-[__NSCFString md5]: unrecognized selector sent to instance 0x71cab20`：

我可以通过在另一个文件中包含该类别并尝试调用该类别的任何方法来重现该问题。在代码编辑器中，它看起来很好，构建也很好，但是在运行时它会爆炸。

我正在为 iOS 6 构建并将框架作为 iOS 应用程序项目的依赖项运行。所有使用类别的代码都在框架内。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T08:13:24.450

在我发布之后，我在[这里](https://stackoverflow.com/questions/6820778/linking-objective-c-categories-in-a-static-library)找到了解决方案。

您需要做的是将链接器标志 -all_load 添加到主项目的构建设置中。

# prolog - 证明的一阶逻辑语句。操纵量词

> ID：12597170
> 
> 赞同：0
> 
> 时间：2012-09-26T08:01:53.890
> 
> 标签：prolog, logic, quantifiers, first-order-logic

好的，我有给定的关系：如果 F(x) 不正确，则没有任何情况满足 G(x) 和 H(y,x)。((∀x ¬F(x)) ⇒¬(∀y G(y) ˄ H(y,x)))

现在，我可以将其转换为： (∀y G(y) ˄ H(y,x))) ⇒ ((∀x F(x)) ????

如果不是，则左侧基本上必须暗示：如果 F(x) 不正确.... 没有提及 For All 或 Existential 量词。我可以把否定放在量词之外，即把它写成 (¬(∀x F(x))，因为这让工作更容易？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T12:49:23.670

我不确定这是正确的地方，但是，不，你不能。将否定移出会改变量词。此外，初始公式可能不是您想要的：最后一个 x 是一个自由变量。

# sql-server - Oracle 字体错误不正确

> ID：12597172
> 
> 赞同：-5
> 
> 时间：2012-09-26T08:01:54.963
> 
> 标签：sql-server, oracle, character-encoding, globalization

我有两台服务器，一台位于 IP 10.92.92.92 的 Oracle 服务器，一台位于 IP 10.92.92.93 的 SQL 服务器。在 Oracle Server 中，我使用 Arial 字体存储数据库并正确查看。现在，我想通过Linked Server将数据库从Oracle Server推送到SQL Server，结果它从SQL Server查看不正确，会发生什么错误？

当我使用非常简单的语句时，例如：SELECT * FROM SERVERXX..SERVER119.TABLENAME 它也会错误地查看，请帮帮我？

谢谢大家！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T10:37:27.533

字体是一种在屏幕上呈现文本的客户端机制。数据库没有字体。他们所拥有的是字符集，它们是将代码转换为字符的协议。只有 ASCII 0-127 是标准的。除此之外，客户端如何解释字符值`230`完全取决于字符集。

将数据从一个数据库传输到另一个数据库时，*数据不会改变*。但是如果字符集不同并且接收字符集不是源字符集的超集，则编码将出现乱码。

在此处了解有关[Oracle 中字符集的](http://docs.oracle.com/cd/B19306_01/server.102/b14225/ch1overview.htm#NLSPG001)更多信息。我对 SQL Server 不是很熟悉，但 MSSQL 中的等效功能似乎是排序规则。[在这里了解更多信息](http://msdn.microsoft.com/en-us/library/ms143726.aspx)。

# multiplatform - 除了目标之外，我如何将 buildroot 用于我的开发机器？

> ID：12597175
> 
> 赞同：0
> 
> 时间：2012-09-26T08:02:19.283
> 
> 标签：multiplatform, buildroot

我正在使用 buildroot 为嵌入式目标开发一个，将我们的自定义应用程序添加为新包。

这些包依赖于一些非标准库（我们已经集成到 buildroot 中），这些库在开发工作站上本地安装很痛苦。我可以使用 buildroot out-of-tree 构建来为我的开发机器编译应用程序来测试它们吗？假设所有库都到位，它们是通用的 linux 应用程序，在 PC 上运行应该没有问题。

有没有更方便的方法来管理这两个版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T10:16:25.270

唯一受支持的方法是为您的主机系统使用“交叉编译器”。

使用主机工具链查看[buildroot 环境](https://stackoverflow.com/questions/10833672/buildroot-environment-with-host-toolchain)

# php - 如何在不重新加载页面的情况下保持会话活动？

> ID：12597176
> 
> 赞同：27
> 
> 时间：2012-09-26T08:02:20.267
> 
> 标签：php, session, cookies

我的在线考试管理系统有一个奇怪的问题。

测试表单（test.php）中的一些用户需要很长时间才能回答问题并提交表单。

提交表单后，会话过期，用户必须再次登录

这不是代码问题

我将此值设置在所有页面的顶部

```
ini_set('session.gc_maxlifetime', 18000); 
```

有没有办法在不以测试表单重新加载页面的情况下刷新会话 evrey 10 分钟以防止会话过期？

请帮我

谢谢

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-09-26T08:12:35.510

您可以使用 javascript XHR，或者其他人称之为 AJAX。

*   [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)
*   [http://api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)

使用 ajax，您可以调用每 10 分钟刷新一次会话的 php 脚本。:)

* * *

这是我所能达到的“精确”。

javascript

```
var refreshSn = function ()
{
    var time = 600000; // 10 mins
    setTimeout(
        function ()
        {
        $.ajax({
           url: 'refresh_session.php',
           cache: false,
           complete: function () {refreshSn();}
        });
    },
    time
);
};

// Call in page
refreshSn() 
```

refresh_session.php

```
<?php
session_start();

// store session data
if (isset($_SESSION['id']))
$_SESSION['id'] = $_SESSION['id']; // or if you have any algo.
?> 
```

* * *

无论如何，另一种解决方案是仅使用此处提供的解决方案来延长测试页面的会话时间

[如何在 30 分钟后使 PHP 会话过期？](https://stackoverflow.com/questions/520237/how-do-i-expire-a-php-session-after-30-minutes)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-05-15T21:58:32.273

你所需要的就是这个（对 $.post 使用 jQuery）：

**JavaScript**（把它放在你的 onload-function 里面）

```
setInterval(function(){
  $.post('path/to/refresh_session.php');
},600000); //refreshes the session every 10 minutes 
```

**refresh_session.php**

```
<?php
  session_start();

  // if you have more session-vars that are needed for login, also check 
  // if they are set and refresh them as well
  if (isset($_SESSION['token'])) { 
    $_SESSION['token'] = $_SESSION['token'];
  }
?> 
```

最大的变化是在 JavaScript 中——你不需要一个完整的函数，只需要一行。

* * *

**额外信息**

虽然我认为只调用`session_start()`php 就足够了，但如果我没看错的话（[http://nl3.php.net/function.session-start](http://nl3.php.net/function.session-start)）：

> 读取回调将检索任何现有的会话数据（以特殊的序列化格式存储）并将被反序列化并用于在读取回调将保存的会话数据返回给 PHP 会话处理时自动填充 $_SESSION 超全局变量。

在测试期间，我只将上述代码放在我的访问者页面上，而不是放在管理页面上。但是我在同一个浏览器（Chrome）中打开了两个页面，并且管理页面也保持登录状态，至少一个多小时（不再检查）。 **但是，我不知道如果你只使用它是否仍然有效`session_start()`，而根本没有手动刷新任何 session-var..**

无论哪种方式，我都希望确保我需要的会话变​​量确实仍然存在:)

# c++ - atoi(string.c_str()) 偶尔出现未处理的异常已更新

> ID：12597177
> 
> 赞同：0
> 
> 时间：2012-09-26T08:02:20.670
> 
> 标签：c++, c, exception, exception-handling, atoi

更新

我认为 stoi(string) 解决了它，但它只工作了一会儿。我在下面添加了 splitString 和解密的代码。

我偶尔会在 atoi() 使用假定的相同值时遇到未处理的异常。

我的代码如下所示：

```
ifstream myfile ("Save.sav");
string line = "";
if (myfile.is_open())
{
    while ( myfile.good() )
    {
        getline (myfile,line);

    }
    myfile.close();

    line = StaticFunctions::decrypt(line);

}
vector<string> splitString = StaticFunctions::splitString(line, 's');
return atoi(splitString[0].c_str()); 
```

所以它所做的是读取一个保存文件，然后解密它，然后用每个's'分割字符串。当我调试时，保存文件总是相同的，第一个值为 3。

这项工作有时，也许每 10 次尝试。因此，每 10 次尝试中的 9 次，我都会在内存位置获得未处理的异常。

监控转换后的值显示它始终返回 3，然后应用程序不会崩溃，直到我开始游戏，这在代码中有点远。

如果我删除 atoi 并返回 3 应用程序工作正常。

我试过 strtod 但没有帮助。

谢谢，

*   马库斯

拆分字符串代码：

```
 vector<string> StaticFunctions::splitString(string str, char splitByThis)
 {
vector<string> tempVector;
unsigned int pos = str.find(splitByThis);
unsigned int initialPos = 0;

// Decompose statement
while( pos != std::string::npos ) {
    tempVector.push_back(str.substr( initialPos, pos - initialPos + 1 ) );
    initialPos = pos + 1;

    pos = str.find(splitByThis, initialPos );
}

// Add the last one
tempVector.push_back(str.substr(initialPos, std::min(pos, str.size()) - initialPos + 1));

return tempVector; 
```

}

解密代码（很简单）：

```
string StaticFunctions::decrypt(string decryptThis)
{
for(int x = 0; x < decryptThis.length(); x++)
{
    switch(decryptThis[x])
    {
        case  '*':
        {
            decryptThis[x] = '0';
            break;
        }
        case  '?':
        {
            decryptThis[x] = '1';
            break;
        }
        case  '!':
        {
            decryptThis[x] = '2';
            break;
        }
        case  '=':
        {
            decryptThis[x] = '3';
            break;
        }
        case  '#':
        {
            decryptThis[x] = '4';
            break;
        }
        case  '^':
        {
            decryptThis[x] = '5';
            break;
        }
        case  '%':
        {
            decryptThis[x] = '6';
            break;
        }
        case  '+':
        {
            decryptThis[x] = '7';
            break;
        }
        case  '-':
        {
            decryptThis[x] = '8';
            break;
        }
        case  '"':
        {
            decryptThis[x] = '9';
            break;
        }
    }
}
return decryptThis;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T08:29:26.207

stoi(string) 而不是 atoi(string.c_str()) 解决了它。

更新：它没有解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:12:52.847

尝试改用 strtol

strtol (splitString[0].c_str(),NULL,10);

# authentication - LiveJournal OpenID / OAuth

> ID：12597179
> 
> 赞同：1
> 
> 时间：2012-09-26T08:02:28.833
> 
> 标签：authentication, oauth, openid

有没有办法通过 LiveJournal 帐户对用户进行身份验证？

# sql - 将 django models.ImageField 映射到 SQL 表中

> ID：12597183
> 
> 赞同：0
> 
> 时间：2012-09-26T08:02:42.513
> 
> 标签：sql, django, django-models, sql-types

我的模型中有一个图像，我想自己编写 SQL 创建表查询我的模型是这样的：

```
pic = models.ImageField(u"initial_picture",blank=True,upload_to="/face") 
```

我想使用命令来创建我的表，但我不知道我应该为我[在这里](https://stackoverflow.com/questions/416881/insert-picture-into-sql-server-2005-image-field-using-only-sql)`CREATE TABLE SOME_TABLE_NAME`读到的字段类型使用什么，我可以使用这样的东西：

```
Photo varbinary(max) not null 
```

但我不知道它是否与django兼容，以及它是否适合我`pic IMAGE DEFAULT NULL`的[模型](http://www.dreamincode.net/forums/topic/103960-save-and-retrieve-images-with-sql-server/)

任何帮助都会得到帮助;-)

我都试过了`Photo varbinary(max) not null`，并且`Photo varchar(max) not null` 该字段正在显示，但是当我按保存时，我收到以下错误：

`Attempted access to '\face\sample.gif' denied.`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T08:16:31.210

为什么不将图像作为普通文件保存在文件系统中？这将是相应的 SQL

```
`pic` varchar(100) NOT NULL, 
```

为您的图片字段。

```
pic = models.ImageField(u"initial_picture",blank=True,upload_to="/face") 
```

在数据库中，该`pic`字段将仅包含实际图像文件的路径。

# java - 获取两个 IP 地址之间的 IP 地址列表

> ID：12597192
> 
> 赞同：1
> 
> 时间：2012-09-26T08:03:28.557
> 
> 标签：java, javascript, ip, ipv4

我正在编写一个程序，它从用户那里获取 From IP 地址和 To IP 地址，并显示它们之间的 IP 地址列表。例如，如果用户给出 10.0.0.1 和 10.0.0.5，那么我将显示这两个之间的五个 IP 地址。我想到的当前解决方案是：

1.  拥有所有 IP 地址的列表，然后查找生成的 IP 地址列表
2.  使用嵌套循环

我应该在这些之间采用什么解决方案（或提出更好的解决方案）？对于第一个解决方案，IP 地址表/列表的链接是什么？

JavaScript 或 Java 方面的解决方案是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T08:09:57.630

首先用 . 分割 IP 地址`.`。从第一个 IP 地址开始，将第四部分增加到 255，然后将第三部分加 1，并将第四部分设置为 1。直到到达 IP 地址。

*   IP 地址字节 -> 位 -> Int32
*   从：`10.0.10.10`-> `00001010 00000000 00001010 00001010`->`167774730`
*   至：`10.1.45.1`-> `00001010 00000001 00101101 00000001`->`167849217`
*   从 From 到 To 开始计数，然后检查不需要的字节，即`11111111`和`00000000`。

就这样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T08:13:25.163

“点”字是为人类写的。对于计算机，它是一个 4 字节的数字。所以将其解析为一个数字。然后，您将通过简单地增加一个数字直到达到界限来获得该范围内的所有地址，并将它们格式化以供输出。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T08:15:56.063

我正在尝试[更新的 jsFiddle](http://jsfiddle.net/LhyLS/4/)，最后我找到了下面的解决方案。以下代码应适用于所有 IP 地址。您必须提供十六进制的开始和结束 IP 地址（因为这很容易，我没有为它编写代码）。

```
var startIp = 0x0A000001,
endIp = 0x0A000F05;

var  temp, list = [],str;
for(var i=startIp ; i <= endIp ; i++){
    temp = (i).toString(16);
    str ='';
    if(temp.length == 7){
        temp = "0"+temp;
    }

    for(var k=temp.length-1; k  >= 0 ; k-=2){
       str = parseInt(temp[k-1] + "" + temp[k], 16) +"." + str ;
    }
    document.write(temp + " " + str+ "<br>");
    list.push(str.substring(0, str.length-1));
}

? 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-09-26T08:09:51.010

如果您足够了解获取地址（来自网络、文件系统或用户输入），则可以通过减法测试地址本身并在此处获取 IP 地址的数量。

这是简化的，但是如果您知道地址，您将得到它：`000044-000002 = 000042`。

# java - Spring 3.0 注解 bean 组件扫描

> ID：12597195
> 
> 赞同：0
> 
> 时间：2012-09-26T08:03:41.810
> 
> 标签：java, spring-3

`component-scan`spring 3.0 怎么办？我对 jar 和项目都使用 @Service、@Reponsity 等注释。这没用。当项目中的bean从jar中的bean注入时。

在 jar 文件中

```
 com.java.spring.support 
```

在项目中

```
 org.me.project 
```

我的配置是

```
 <context:annotation-config/>
    <context:component-scan base-package="com.java.spring.support, org.me.project"/> 
```

在 Jar 文件中

```
 package com.java.spring.support;

    @Service("CommonService")
    public class CommonService {
    } 
```

在项目中

```
 package org.me.project;

    @Service(value = "OtherService")
    public class OtherService {
        @Resource(name = "CommonService")
        private CommonService service;
    } 
```

我收到错误

```
 15:41:53,043 DEBUG [org.springframework.context.support.ClassPathXmlApplicationContext] Unable to locate LifecycleProcessor with name 'lifecycleProcessor': using default [org.sprin
    gframework.context.support.DefaultLifecycleProcessor@510ebe18]
    15:41:53,044 DEBUG [org.springframework.beans.factory.support.DefaultListableBeanFactory] Returning cached instance of singleton bean 'lifecycleProcessor'
    Exception in thread "main" org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'CommonService' is defined
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanDefinition(DefaultListableBeanFactory.java:529)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getMergedLocalBeanDefinition(AbstractBeanFactory.java:1095)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:277)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
        at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1093)
        at org.ace.java.support.delete.Test.main(Test.java:13) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T08:48:14.983

```
<context:component-scan base-package="org.me.project"/> 
```

您正在对存储库注释使用排除过滤器，请将其删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:11:47.683

仅使用`<context:component-scan base-package="com.java.spring.support, org.me.project"> <context:exclude-filter type="annotation" expression="org.springframework.stereotype.Repository"/>`应该有效。

# php - 如何仅通过一个查询使用 Idiorm 和 Paris 从关联表中检索信息？

> ID：12597197
> 
> 赞同：2
> 
> 时间：2012-09-26T08:03:44.667
> 
> 标签：php, orm, idiorm

我正在使用[Paris](https://github.com/j4mie/paris)（它建立在[Idiorm 之上](https://github.com/j4mie/idiorm)）。

我有以下模型类（示例来自[github 上的文档](https://github.com/j4mie/paris#has-many)）：

```
<?php
class Post extends Model {
    public function user() {
        return $this->belongs_to('User');
    }
}

class User extends Model {
    public function posts() {
        return $this->has_many('Post'); // Note we use the model name literally - not a pluralised version
    }
} 
```

所以现在我可以执行以下操作（效果很好）：

```
// Select a particular user from the database
$user = Model::factory('User')->find_one($user_id);
// Find the posts associated with the user
$posts = $user->posts()->find_many();

// Select a particular post from the database
$post = Model::factory('Post')->find_one($post_id);
// Find the user associated with the post
$user = $post->user()->find_one(); 
```

但我也想做以下事情：

```
$posts = Model::factory('Post')->find_many();
foreach ($posts as $post) {
     echo($post->user()->find_one()->username); // generates a query each iteration
} 
```

不幸的是，这会为每次迭代创建一个查询。有没有办法告诉 Paris 或 Idiorm 在第一个 find_many 查询中获取相关信息？

您应该如何使用 Paris 检索信息以最大程度地减少查询次数？我不想手动指定连接条件（这就是我使用 Paris 而不是 Idiorm 的原因）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T15:38:35.170

我是 Paris 和 Idiorm 项目的当前维护者。不幸的是，您在这里描述的是自定义查询的案例，而不是 Paris 旨在解决的问题。Paris and Idiorm 的理念是尽可能地坚持 80/20 原则，而你的用例在 20 中。

知道你最终是如何解决这个问题的会很有趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-10T19:12:43.987

我遇到了完全相同的问题，最终得到了这个（有点难看）的解决方案：

```
$posts = Model::factory('Post')...->limit($perpage)->find_many();
$user_ids = $user_lookup = array();

foreach($posts as $post) $user_ids[] = $post->user_id;

$users = Model::factory('User')->where_id_in($user_ids)->find_many();
foreach($users as $user) $user_lookup[$user->id] = $user; 
```

只有2个选择。稍后在模板中：

```
{% for post in posts %}
   <h2>{{ post.title }}</h2>
   by author: {{ user_lookup[post.user_id].username }}
{% endfor %} 
```

但它只有在您没有在一页上显示数百个帖子时才有效。

# javascript - jquery中：偶数伪选择器的意外行为

> ID：12597199
> 
> 赞同：2
> 
> 时间：2012-09-26T08:03:53.900
> 
> 标签：javascript, jquery, css, html-table

我已经为问题创建了这个小提琴，因为您将看到三个使用 jQuery 的带有斑马线的表。

表 1 以正确的形式显示，因为它从 0 开始 tr 索引为偶数。表 2 从最后一个表继续，第一行显示为白色而不是黑色。我认为它正在发生，因为它从最后一个表的 tr 索引继续。

*HTML：*

```
<table>
    <caption> Table 1</caption>
    <tr>
        <th>Table Head 1</th>
        <td>Table Data 1</td>
    </tr>
    <tr>
        <th>Table Head 2</th>
        <td>Table Data 2</td>
    </tr>
    <tr>
        <th>Table Head 3</th>
        <td>Table Data 3</td>
    </tr>
</table>

<table>
    <caption> Table 2</caption>
    <tr>
        <th>Table Head 1</th>
        <td>Table Data 1</td>
    </tr>
    <tr>
        <th>Table Head 2</th>
        <td>Table Data 2</td>
    </tr>
    <tr>
        <th>Table Head 3</th>
        <td>Table Data 3</td>
    </tr>
</table>

<table>
    <caption> Table 3</caption>
    <tr>
        <th>Table Head 1</th>
        <td>Table Data 1</td>
    </tr>
    <tr>
        <th>Table Head 2</th>
        <td>Table Data 2</td>
    </tr>
    <tr>
        <th>Table Head 3</th>
        <td>Table Data 3</td>
    </tr>
</table>​ 
```

*JavaScript：*

```
$('table').find('tr:even').css('background','#d0d0d0'); 
```

小提琴：http: [//jsfiddle.net/daljir/gryh5/](http://jsfiddle.net/daljir/gryh5/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T08:07:20.803

您可以[`find()`](http://api.jquery.com/find/)分别“使用”每个表：

```
$("table").find("tr:even").css("background", "#d0d0d0"); 
```

**演示：http:** [//jsfiddle.net/gryh5/1/](http://jsfiddle.net/gryh5/1/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-26T08:10:22.157

您正在选择`<tr>`文档中的所有元素，您可以使用`nth-child`to 选择器来选择文档中的所有偶数`<tr>`。

```
$('table tr:nth-child(2n)').css('background','#d0d0d0'); 
```

[http://jsfiddle.net/Kyle_Sevenoaks/gryh5/7/](http://jsfiddle.net/Kyle_Sevenoaks/gryh5/7/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T08:06:57.053

这是因为您通常选择所有 tr（与表格无关），并且当它们堆叠时您会得到这种特殊行为。试试这个：

```
$('table').find('tr:even').css('background','#d0d0d0'); 
```

检查[小提琴](http://jsfiddle.net/sushanth009/gryh5/4/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T08:08:39.300

这有效

```
<table id="t1">
    <caption> Table 1</caption>
    <tr>
        <th>Table Head 1</th>
        <td>Table Data 1</td>
    </tr>
    <tr>
        <th>Table Head 2</th>
        <td>Table Data 2</td>
    </tr>
    <tr>
        <th>Table Head 3</th>
        <td>Table Data 3</td>
    </tr>
</table>

<table id="t2">
    <caption> Table 2</caption>
    <tr>
        <th>Table Head 1</th>
        <td>Table Data 1</td>
    </tr>
    <tr>
        <th>Table Head 2</th>
        <td>Table Data 2</td>
    </tr>
    <tr>
        <th>Table Head 3</th>
        <td>Table Data 3</td>
    </tr>
</table>

<table id="t3">
    <caption> Table 3</caption>
    <tr>
        <th>Table Head 1</th>
        <td>Table Data 1</td>
    </tr>
    <tr>
        <th>Table Head 2</th>
        <td>Table Data 2</td>
    </tr>
    <tr>
        <th>Table Head 3</th>
        <td>Table Data 3</td>
    </tr>
</table> 
```

和JS：

```
$(function(){
    $('#t1 tr:even, #t2 tr:even, #t3 tr:even').css('background','#d0d0d0');
}); 
```

jsfiddle：http: [//jsfiddle.net/SnakeEyes/gryh5/2/](http://jsfiddle.net/SnakeEyes/gryh5/2/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T08:20:07.233

[http://jsfiddle.net/gryh5/9/](http://jsfiddle.net/gryh5/9/)

```
$('table').each(function(){
   $(this).find('tr').filter(':even').css('background','#d0d0d0');
}); 
```

# c++ - 如何将整数传递给 CreateThread()？

> ID：12597205
> 
> 赞同：8
> 
> 时间：2012-09-26T08:04:08.333
> 
> 标签：c++, int, createthread

如何将 int 参数传递给 CreateThread 回调函数？我试试看：

```
DWORD WINAPI mHandler(LPVOID sId) {
...
arr[(int)sId]
...
}

int id=1;
CreateThread(NULL, NULL, mHandler, (LPVOID)id, NULL, NULL); 
```

但我收到警告：

```
warning C4311: 'type cast' : pointer truncation from 'LPVOID' to 'int'
warning C4312: 'type cast' : conversion from 'int' to 'LPVOID' of greater size 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T08:06:37.287

传递整数的地址而不是其值：

```
// parameter on the heap to avoid possible threading bugs
int* id = new int(1);
CreateThread(NULL, NULL, mHandler, id, NULL, NULL);

DWORD WINAPI mHandler(LPVOID sId) {
    // make a copy of the parameter for convenience
    int id = *static_cast<int*>(sId);
    delete sId;

    // now do something with id
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T09:38:57.050

您可以通过使用适当的类型来消除此警告。在这种情况下，使用 INT_PTR 或 DWORD_PTR（或任何其他 _PTR 类型）类型而不是 int（请参阅MSDN 中的[Windows 数据类型](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383751.aspx)）。

```
DWORD WINAPI mHandler(LPVOID p)
{
    INT_PTR id=reinterpret_cast<INT_PTR>(p);
}
...

INT_PTR id = 123;
CreateThread(NULL, NULL, mHandler, reinterpret_cast<LPVOID>(id), NULL, NULL); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-05T12:20:56.623

我会 `CreateThread(..., reinterpret_cast<LPVOID>(static_cast<INT_PTR>(id)), ...);` 在你的线程函数中使用 and `int my_int = static_cast<int>(reinterpret_cast<INT_PTR>(sId));`

这也适用于枚举而不是`int`. 它应该可以在 32 位和 64 位模式下工作。

# c# - 保存列表 在每次开始时保存添加项目

> ID：12597209
> 
> 赞同：0
> 
> 时间：2012-09-26T08:04:22.437
> 
> 标签：c#, wpf, list

我使用了一个`List<string>`，我添加了几十万个随机字符串，然后在我的程序中使用。

我在程序开始时就需要这个列表，它使用的随机字符串保存在一个文本文件中。目前程序加载后做的第一件事就是将所有项目添加到列表中。但是，由于列表每次都完全相同，我想知道是否有一种方法可以在内部以某种方式保存它，以便可以直接使用该列表，而无需在每次启动时扩展。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T08:06:56.787

该列表需要保留在某个地方，否则当应用程序关闭时，您将丢失所有值。当应用程序关闭时，用于存储此列表的内存将返回给操作系统。所以，不，没有其他方法可以在应用程序启动时将列表保存在内存中，而无需从某个地方读取它——无论是文件、数据库还是其他存储，您都需要从那里加载它或从头开始重新生成它。

如果您不关心存储列表的文件格式，则可以使用[BinaryFormatter](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.formatters.binary.binaryformatter.aspx)与 XML、JSON 和其他格式相比更快的序列化和反序列化。

# php - PHP嵌套foreach循环：其中的html表

> ID：12597210
> 
> 赞同：0
> 
> 时间：2012-09-26T08:04:24.887
> 
> 标签：php, html, loops, foreach, html-table

我需要我的 PHP 页面来显示以下结构：

```
 <table border="1">
  <tr>
         <td>Title one</td><td>Title two</td>
  </tr>
  <tr>
         <td>I'm content one</td><td>And here's content two</td>
  </tr>
  </table> 
```

这是我的php页面：

```
$array = array( array( Title => "Title one"), array( Title => "Title two") );
$array2 = array( array( Content => "I'm content one"), array( Content => "And here's content two") );
 $myvar ="Title one";

$htm .="<table border='1'>";
    for ($i=0; $i<=1; $i++) 
    {
        $htm .="<tr>";
        foreach ($array[$i] as $title)
        {   
            $htm .="<td >".$title."</td>"; 
            foreach($array2 as $b)
            {
                $content  = $b['Content'];
                    if ($myvar == $title)
                    {
                        $htm .="<tr><td>".$content."</td></tr>"; 
                    }else
                    {
                        $htm .="<tr><td ></td></tr>"; 
                    }

            } 
        }
    }

$htm .="</table>";
echo $htm; 
```

正在输出：

```
<table border='1'>
<tr>
<td >Title one</td><tr><td>I'm content one</td>
</tr>
<tr>
<td>And here's content two</td></tr>
<tr><td >Title two</td><tr>
<td></td></tr><tr><td ></td></tr>
</table> 
```

如何修改 html 输出以获得我需要的结构？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T09:45:32.873

```
<?php
$array  = array( array( Title => "Title one"), array( Title => "Title two") );
$array2 = array("I'm content one", "And here's content two");`enter code here`
// A variable to print the corrosponding value in array2.
// increment it in inner for loop and break to get out of the loop.
$incr = 0;
$htm = "<table border='1'>";
    for ($i=0; $i<=1; $i++) 
    {
        $htm .="<tr>";
    foreach ($array[$i] as $title)
        {   
            $htm .="<td >".$title."</td>";
        $htm .="<td>".$array2[$incr]."</td>"; 
            $htm .="</tr>";
    $incr++;
    break;
        }

   }
$htm .="</table>";
echo $htm;
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:11:09.877

试试这个代码，我希望这是你想要的：

```
$array = array( array( Title => "Title one"), array( Title => "Title two") );
$array2 = array( array( Content => "I'm content one"), array( Content => "And here's content two") );

$htm .="<table border='1'>";
    for ($i=0; $i<=1; $i++) 
    {
        $htm .="<tr>";
        foreach ($array[$i] as $title)
        {   
            $htm .="<td >".$title."</td>"; 
            $j=0;
            foreach($array2 as $b)
            {

                $content  = $b['Content'];
                    if ($j == $i)
                    {
                        $htm .="<td>".$content."</td></tr>"; 
                    }
                    $j++;

            } 
        }
    }

$htm .="</table>";
echo $htm; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T08:18:35.807

对于初学者，您的数组结构很差。最好从以下开始：

```
$ArrTitles = array("Title one", "Title two");
$ArrContent = array("I'm content one","And here's content two"); 
```

这是一个少得多的噪音。:-)

甚至：

```
$ArrTitles = array("Title one", "Title two");
$ArrContent = array(
array("I'm content one","And here's content two"),
array("I'm content one for next row","And here's content two for next row")
); 
```

这样您就可以轻松地向表中添加更多行。

我会考虑到这个更新的结构（不是你原来的）来回答你的问题。

如果你真的需要原始结构，它也可以很容易地使用。这是代码：

```
$ArrTitles = array("Title one", "Title two");
$ArrContent = array(
  array("I'm content one","And here's content two"),
  array("I'm content one for next row","And here's content two for next row")
);
// assuming the number of elements in the arrays in $ArrContent match the number of titles.
$htm ="<table border='1'>\n<tr>";
foreach ($ArrTitles as $oneTitle){
  $htm .= "<td>{$oneTitle}</td>\n";
}
$htm .="</tr>\n";
foreach ($ArrContent as $oneContentRow){
  $htm .= "<tr>";
  foreach ($oneContentRow as $oneContent){
    $htm .= "<td>{$oneContent}</td>\n";
  }
  $htm .= "</tr>";
}
$htm .= "</table>";
echo $htm; 
```

（我添加了一些 \n 以提高输出 HTML 的可读性。

# java - 从整个日期获取时间

> ID：12597212
> 
> 赞同：0
> 
> 时间：2012-09-26T08:04:30.517
> 
> 标签：java, date, datetime

我必须从整个日期开始

例如时间=`11:00:00`从日期`2012-09-01 11:00:00.0`

我尝试了以下代码段但出现错误`Error : Unparseable date: "2012-9-1.13.30\. 0\. 0"`

```
DateFormat inputFormat = new SimpleDateFormat("yyyy-MM-dd hh:mm:ss");
Date date = inputFormat.parse(iResultSet1.getString(i));
DateFormat outputFormat = new SimpleDateFormat("hh:mm:ss");
String outputString = outputFormat.format(date); 
```

编辑：现在我只得到日期而不是我只想要时间

```
 if (iResultSet1.getDate(i) != null) {
                            Date date = iResultSet1.getDate(i);

                            System.out.println("date-->" + date);
                            // Format date into output format
                            DateFormat outputFormat = new SimpleDateFormat(
                                    "HH:mm:ss");
                            String outputString = outputFormat.format(date);

                            // System.out.println("date1-->"+date1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T08:18:15.567

您可能正在从数据库中检索您的日期，`(iResultSet1.getString(i))`问题是您的格式错误，即 2012-9-1.13.30。0\. 0\. 更改数据库中的日期格式或使用：

```
Date date = iResultSet1.getDate(i); 
```

代替

```
DateFormat inputFormat = new SimpleDateFormat("yyyy-MM-dd hh:mm:ss");
Date date = inputFormat.parse(iResultSet1.getString(i)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:40:42.123

我会建议，在这种情况下，而不是在 java 中进行解析和操作，将您的 SQL 更改为格式化并仅返回日期为

**例子**

```
SELECT TIME_FORMAT(NOW(), '%H:%i:%s'); 
```

# multithreading - Parallel.For 的线程限制？

> ID：12597219
> 
> 赞同：1
> 
> 时间：2012-09-26T08:05:19.537
> 
> 标签：multithreading, c#-4.0

我的问题是，当我们使用 Parallel.For 循环时，有什么方法可以限制线程数。

假设我的机器有 I3 处理器并且能够一次运行 4 个进程。所以当我在我的机器上运行 Parallel.For 循环时，会有 4 个线程在后台运行。

有没有办法限制线程数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:22:07.280

你可以`ParallelOptions`使用`MaxDegreeOfParallelism = 4`

```
 Parallel.ForEach(words, 
                  new ParallelOptions {
                        MaxDegreeOfParallelism = 4
                        }, 
                  s => DoAction(s)); 
```

# c# - 使用 Linq，从列表中获取另一个列表中的所有项目

> ID：12597221
> 
> 赞同：5
> 
> 时间：2012-09-26T08:05:21.733
> 
> 标签：c#, linq, entity-framework

我有以下场景：一个 int 列表：`List<int> idsOnly = new List<int>();` 和另一个对象列表，该列表应该带来其 id 与列表 idsOnly 匹配的所有项目

```
var myList = db.Items.Where(item => idsOnly.Contains(item.ID.Value))
                     .Select(a => new { a.Title })
                     .ToList(); 
```

我只需要从 myList 中获取标题

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-26T08:07:36.127

您的代码有效，但它会创建匿名对象列表，而不是字符串类型

如果您只想获取标题`(a => new { a.Title }`，则只需使用，而不是使用：`a => a.Title`

```
var myList = db.Items.Where(item => idsOnly.Contains(item.ID.Value))
                     .Select(a => a.Title).ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T08:09:50.180

你可以使用一个`Join`

```
var titlesInIdList = from item in db.Items
                     join id in idsOnly
                     on item.ID.Value equals id
                     select item.Title;
var list = titlesInIdList.ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T08:09:46.077

```
var myList =
    (from item in db.Items
    where idsOnly.Contains(item.ID.Value)
    select item.Title).ToList() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T08:10:05.697

您可以尝试（如果转换有问题：转换为 int 您的 Id，如果不是 int 类型）

```
var myList = db.Items.Where(item => (idsOnly.Contains(Convert.ToInt32(item.ID.Value)))).Select(a => a.Title ).ToList(); 
```

无需转换

```
var myList = db.Items.Where(item => (idsOnly.Contains(item.ID.Value))).Select(a => a.Title ).ToList(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-24T11:53:21.997

```
var Result = (from item in db.Items
                 join id in idsOnly
                 on item.ID.Value equals id
                 select new {item.Title}).ToList(); //Here U can return ToArray or ToList() 
```

# javascript - 使 SVG 元素只读

> ID：12597222
> 
> 赞同：1
> 
> 时间：2012-09-26T08:05:23.447
> 
> 标签：javascript, xml, svg

我正在为需要能够编辑非常基本的 SVG 文件的项目实施自定义版本的[SVG-edit 。](https://code.google.com/p/svg-edit/ "SVG编辑")要求是这些 SVG 文件中的文本是可编辑的，而不是图像。

因此，其中一个文件的常见示例将在顶部有一个文本元素，在其下方有一个图像元素。是否有任何属性可以添加到图像元素，因此我可以在 javascript 编辑器本身上进行任何配置，以防止用户更改图像元素？

（显然，我可以在不使用 SVG 编辑的情况下实现这一点。即，只需为用户输入一个 TextBox，并用其值替换 SVG 上的文本元素，但这很难看。）

非常感谢任何帮助..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T09:32:06.770

要 SVG Edit，您的所有 SVG DOM 都是可编辑的，即使有诸如`readonly`SVG Edit 之类的属性也会忽略它，除非您自己实现它。

我也有自己[的 SVG Edit 实现](http://editor.method.ac)，我碰巧遇到了一个和你自己类似的用例。我所做的是隐藏图层面板并将可编辑的内容放在最顶层。这样用户就无法访问底层。您必须修改您的 SVG 文件，使其看起来像这样......

```
<svg xmlns="http://www.w3.org/2000/svg">
    <g>
      <title>Layer 1</title>
      <!-- NON EDITABLE CONTENT -->
    </g>
    <g>
      <title>Layer 2</title>
      <!-- YOUR TEXT ELEMENTS -->
    <g>
</svg> 
```

然后你只需用一些 CSS 隐藏图层面板

```
#svg_editor #sidepanels {
  display: none;
} 
```

[http://tinyurl.com/9q9s7d9](http://tinyurl.com/9q9s7d9)

（指向 SVG Edit 主干构建的 URL 链接，但它被缩短了，因为它加载了编码的 SVG 字符串）

# mysql - 从 mysql 列中删除枚举值

> ID：12597223
> 
> 赞同：9
> 
> 时间：2012-09-26T08:05:26.400
> 
> 标签：mysql, enums, alter

我有一个带有枚举列的表，名为`action`. 当前允许的值为： `act1,act2,act3,act4`. 我想要`act3`和`act4`被删除，并且我的表的当前状态不包含任何带有`act3`or的行`act4`。

当我尝试使用新值集修改列时，它会抛出错误 `Data Truncated for column action`。

请建议我如何删除所需的值。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-26T08:56:00.067

用于添加枚举`ALTER TABLE`值是可以的，并在[MySQL 文档](http://dev.mysql.com/doc/refman/5.1/en/alter-table.html)中进行了描述。

但是，要删除枚举值，更好的选择是创建一个新列来进行更改。

```
ALTER TABLE your_table ADD new_action_column ENUM('act1', 'act2') ... ;
UPDATE your_table SET new_action_column = action;
ALTER TABLE your_table DROP action;
ALTER TABLE your_table CHANGE new_action_column action ENUM('act1', 'act2') ... ; 
```

* * *

**编辑**

顺便一提。使用`ENUM`不是最好的主意，你应该使用`INT`。

[MySQL 的 ENUM 数据类型邪恶的 8 个原因](http://komlenic.com/244/8-reasons-why-mysqls-enum-data-type-is-evil/)

我建议您使用类似的映射

```
+------+-----+
| ENUM | INT |
+======+=====+
| act1 |  0  |
+------+-----+
| act2 |  1  |
+------+-----+ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T09:02:47.947

首先运行一个查询。

```
UPDATE table_name SET action = '' WHERE action IN ( 'act3', 'act4' ); 
```

在此之后运行此查询。

```
ALTER TABLE table_name CHANGE action action ENUM( 'act1', 'act2' ); 
```

无需删除您的表格或删除您的字段。但是您需要删除或更新所有具有要删除的值的数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-04T11:58:53.880

其他两个答案已经更详细地介绍了这个问题，但这里有一个简单的问题，为什么*您*可能无法简单地执行 ALTER TABLE。如果你有一个 ENUM('BAR','FOO','REMOVEME') 并且它给出了一个错误，说明了一些类似于 Data truncated somethingsomething 的内容，那么你可能已经为要删除的 Enum 成员设置了一个条目。所以你首先需要做类似的事情

> UPDATE yourtable SET enumrow='FOO' WHERE yourenumrow = 'REMOVEME';

这样，所有具有 REMOVEME 的条目现在都将是 FOO 并且可以使用更改表

> ALTER TABLE yourtable CHANGE yourenumrow yourenumrow ENUM('FOO','BAR') DEFAULT NULL;

# loops - 使用按钮终止 VBS 中的循环

> ID：12597226
> 
> 赞同：1
> 
> 时间：2012-09-26T08:05:42.360
> 
> 标签：loops, vbscript, terminate

我有这样的事情：

```
Stop = False
Do until stop = True
Objshell.sendkeys "Blah blah blah"
Wscript.sleep 100
Loop
Wscript.echo "Stop?"
Stop = True 
```

我想要做的是让循环运行，但是“停止？” 对话框是打开的，当它被点击时，停止值设置为真，循环应该终止。所以我真正要问的是我是否可以让循环外的代码与循环内的代码同时运行。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T11:24:48.500

为此，您必须使用 InternetExplorer COM 对象创建一个自定义对话框：

```
Set ie = CreateObject("InternetExplorer.Application")
ie.Offline = True
ie.Navigate "about:blank"

Do While ie.Busy : WScript.Sleep 100 : Loop

ie.document.Title = "Exit loop?"
ie.document.body.innerHTML = "<button name='exit' " _
  & "onClick=document.all('continue').value='no'>Exit</button>" _
  & "<input name='continue' type='hidden' value='yes'>"

ie.Height     = 200
ie.Width      = 425
ie.MenuBar    = False
ie.StatusBar  = False
ie.AddressBar = False
ie.Toolbar    = False

ie.Visible = True

Do Until ie.document.all("continue").Value = "no"
  ' do stuff
  WScript.Sleep 100
Loop

ie.Quit 
```

# ember.js - ember 计算属性在何时执行

> ID：12597228
> 
> 赞同：0
> 
> 时间：2012-09-26T08:05:57.350
> 
> 标签：ember.js

我继承了一个用 Ember 0.9.8.1 编写的代码库。在某些情况下，它可能非常慢。我正在缩小为什么它很慢。我注意到以下内容。

调用 ArrayController 中的函数来加载数据。要加载从后端获取 json 的数据（快速），然后为每一行创建一个（先前定义的）Ember.Object（慢速）并将其推送到 ArrayController 的 content[]。

例子：

```
App.ExOb = Ember.Object.extend({
  data1: null,
  data2: null,
  func1: function () { // statements }.property('data1').cacheable()
  func2: function () { // statements }.property('data2').cacheable()
..etc..
})

App.lotsOfData = Ember.ArrayController.create({
  content: [],
  loaddata: function() { 
    var self=this;
    get_data().forEach(function (row, index) {
       var d = App.ExOb.create(row.data);
       self.pushObject(d);
    }
  }
}) 
```

我试图弄清楚为什么 Ember.Object 的创建和推送很慢。我注意到的是，在创建对象时（在示例 App.ExOb.create() 中），对象的每个属性函数（在示例 func1() 和 func2() 中）都会被调用。

我已经尝试了一些 ember 代码来了解为什么会发生这种情况，但似乎无法模拟这一点。我唯一能看到正在执行的计算属性是当我对该属性执行 get() 时。

任何人都可以告诉我（或指出我错过的文档）何时执行计算的属性函数（除了执行 get() ofcourse :-) ）吗？

编辑：到目前为止，我发现执行计算属性的原因如下： 1\. 直接调用/使用该属性 2\. 在浏览器中显示的车把模板中使用该属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T10:17:45.783

这只是一个快速解决问题的方法，但您是否尝试过创建 ExOb 并手动初始化其属性，例如：

```
self.pushObject(App.ExOb.create({
    data1: row.data.data1,
    data2: row.data.data2,
    ... etc ...
}); 
```

这可能会更快，因为 Ember 不必猜测从 row.data 对象复制到 App.ExOb 对象的内容。

一般来说，在我看来，func1() 和 func2() 函数在创建对象时不需要重载，但您的要求可能另有规定。

# php - 避免在不使用 select 语句的情况下根据日期输入重复条目

> ID：12597229
> 
> 赞同：0
> 
> 时间：2012-09-26T08:06:04.587
> 
> 标签：php, mysql

我正在运行一个插入语句来插入数据，但我想根据日期检查任何重复的条目，然后执行一个条目。

我想要的只是如果今天用户输入`product_name='x'`，'x' 是唯一的，因此今天没有人可以`x`再次输入产品名称。但当然第二天他们可以。

我不想在插入之前运行选择来进行检查。有替代方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T08:08:16.777

您可以使用

```
1\. Insert into... on duplicate update
2\. insert.. ignore 
```

这篇文章将回答你的问题

[“INSERT IGNORE”与“INSERT ... ON DUPLICATE KEY UPDATE”](https://stackoverflow.com/questions/548541/insert-ignore-vs-insert-on-duplicate-key-update)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T08:07:25.153

您可以使用 mysql`insert into... on duplicate update`语法，如果没有新行，或者如果新行会导致键约束启动，则该语法基本上会进入新行，那么它可以用于更新。

假设您有下表：

```
MyTable
ID | Name
1  | Fluffeh
2  | Bobby
3  | Tables 
```

并且 ID 被设置为数据库中的主键（这意味着它不能有两行具有相同的值）你通常会尝试像这样插入：

```
insert into myTable 
    values (1, 'Fluffster'); 
```

但这会产生错误，因为其中已经存在 ID 为 1 的行。

通过使用`insert on duplicate update`查询现在看起来像这样：

```
insert into myTable 
    values (1, 'Fluffster') 
    on duplicate key update Name='Fluffster'; 
```

现在，它不会返回错误，而是使用新名称更新行。

编辑：您可以使用以下语法在两列中添加唯一索引：

```
ALTER TABLE myTable
ADD UNIQUE INDEX (ID, `name`); 
```

现在，这将允许您使用上面的语法插入行，同时具有与其他行相同的 ID，但前提是名称不同 - 或者在您的情况下，在 varchar 和 date 字段上添加约束。

最后，请务必将此类信息添加到您的问题中，这样可以节省大家一点时间:)

# ruby-on-rails - 如果用户更新帐户不成功（设计 gem），如何显示通知？

> ID：12597232
> 
> 赞同：0
> 
> 时间：2012-09-26T08:06:07.180
> 
> 标签：ruby-on-rails, devise, overriding

我重写了一个小设计gem，以允许用户根据情况更改有或没有帐户的一些细节。

我不想使用设计错误消息，因为我使用的是 jQuery 验证插件。

**当存在一些设计错误时，我想显示一些通知错误，但我无法到达需要放置 flash[:error] 的位置。**

这是我的更新操作：

```
def update

self.resource = resource_class.to_adapter.get!(send(:"current_#{resource_name}").to_key)
# custom logic
if params[:user][:password].present?
  result = resource.update_with_password(params[resource_name])
else
  result = resource.update_without_password(params[resource_name])
end

# standart devise behaviour
if result
  if is_navigational_format?
    if resource.respond_to?(:pending_reconfirmation?) && resource.pending_reconfirmation?
      flash_key = :update_needs_confirmation
    end
    set_flash_message :notice, flash_key || :updated
  end
  sign_in resource_name, resource, :bypass => true
  respond_with resource, :location => after_update_path_for(resource)
 else
   if params[:user][:password].present?
    clean_up_passwords resource
    render "edit_user/edit_password"
    end
  end 
```

那么，有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T08:48:00.903

如果您使用的是 Jquery 验证，您是否通过执行类似操作在视图上启用了此功能`<%= form_for @user, :validate => true, do |f|%>`

**更新** 你可以做一些类似的事情

```
def update_password
    @user = current_user    
    @current_password = params[:user][:current_password]
    @password = params[:user][:password]

    if @user.valid_password?(@current_password)
      if @current_password == @password
        redirect_to user_path(@user)
        flash[:error] = "Current password cannot be the same as your new password."
      else
        if @user.update_attributes(params[:user])
          redirect_to login_path
          flash[:success] = "Password has been changed."
        else
          redirect_to user_path(@user)
          flash[:error] = "Didn't save contact an administrator."
        end
      end
    else
        redirect_to user_path(@user)
        flash[:error] = "Current password is incorrect."
    end
  end 
```

如果您将我建议的最高位添加到您的视图中并正确安装了 Jquery 验证，这应该可以工作

# java - 抛出我自己的异常？

> ID：12597235
> 
> 赞同：0
> 
> 时间：2012-09-26T08:06:10.427
> 
> 标签：java, eclipse, exception, exception-handling

我已经定义了自己的期望类：

```
public class ProduktException extends Exception {

    public ProduktException(String msg){
    //null
    }

    public static void throwProduktNotCreatedException() throws ProduktException {
        throw new ProduktException("Cannot be created!");
    }

    public static void throwProduktNotDeletedException () throws ProduktException {
        throw new ProduktException("Cannot be deleted!");
    }
} 
```

我的问题是我尝试时不知道如何扔它们：

```
try {
...
} catch(ProduktNotDeletedException e) {
    e.toString();
} 
```

那行不通...但是我想要这些结构！怎么了？

我很欣赏你的回答！！！

**更新：**

我的问题是，我不想创建多个异常类，我想在一个类中包含所有异常。有可能解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T08:11:38.833

如果您需要区分不同类型的异常，只需创建 2 个不同的异常，可能类似于：

```
public class ProduktException extends Exception
{
    public ProduktException(String msg){
    //null
    }
} 
```

然后有：

```
public class ProduktNotDeletedException extends ProduktException
{
    ....
} 
```

和

```
public class ProduktNotCreatedException extends ProduktException
{
    ....
} 
```

然后你可以抓住一个或另一个，或两者兼而有之。

```
try {
    ...
} catch(ProduktNotDeletedException e1) {
    e1.toString();
} catch(ProduktNotCreatedException e2) {
    e2.toString();
} 
```

* * *

编辑：

对于一个班级，我的意思是：

```
public class ProduktException extends Exception {

    boolean notDeleted;
    boolean notCreated;

    public ProduktException(String msg){
        super(msg);
    }

    public boolean isNotDeleted() {
        return(notDeleted);
    }

    public boolean isNotCreated() {
        return(notCreated);
    }

    public static void throwProduktNotCreatedException() throws ProduktException {
        ProduktException e = new ProduktException("Cannot be created!");
        e.notCreated = true;
        throw e;
    }

    public static void throwProduktNotDeletedException () throws ProduktException {
        ProduktException e = new ProduktException("Cannot be deleted!");
        e.notDeleted = true;
        throw e;
    }
} 
```

然后在您的尝试/捕获中：

```
try {
    ...
} catch(ProduktException e) {
    e.toString();
    if(e.isNotCreated()) {
        // do something
    }
    if(e.isNotDeleted()) {
        // do something
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:07:53.343

你需要要么 catch `ProduktException`，例如

```
try {
  ...
} catch (ProduktException e) {
  e.toString();
} 
```

或声明子类型，例如

```
public ProduktNotDeletedException extends ProduktException 
```

您可能希望在构造函数中向上传递消息，因此在构造函数中添加以下内容：

```
super(msg); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T08:17:22.947

下面给出的语法。

```
class RangeException extends Exception
{
    String msg;

    RangeException()
    {
        msg = new String("Enter a number between 10 and 100");
    }
}

public class MyCustomException
{
    public static void main (String args [])
    {
        try
        {
            int x = 1;

            if (x < 10 || x >100) throw new RangeException();
        }
        catch(RangeException e)
        {
            System.out.println (e);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T08:24:15.783

如果您不想为需要抛出的每种不同类型的异常创建 ProduktException 的多个子类，您可以做的是在异常中包含一个代码，让您知道哪里出了问题。像这样的东西：

```
public class ProduktException extends Exception {
    private Code exceptionCode;  
    private String message 

    public ProduktException(Code code, String msg){
        this.message = msg;
        this.exceptionCode = code;
    }  

    //Getters and setters for exceptionCode and message      
} 
```

代码可以是一个枚举，以便您的应用程序可以知道每个代码对应于一个特定的“问题”（未创建产品、未删除产品等）。然后你可以像这样抛出你的异常

```
throw new ProduktException(Code.PRODUCT_NOT_CREATED, 
                     "Error while creating product"); 
```

当你抓住它时，你可以根据代码进行区分。

```
catch (ProduktException ex) {
    if (ex.getExceptionCode().equals(Code.PRODUCT_NOT_CREATED)) {
        ...
    }
    else {
        ...
    }
} 
```

# django - 模板标签和反向函数中的 django admin 冒号语法

> ID：12597238
> 
> 赞同：9
> 
> 时间：2012-09-26T08:06:30.113
> 
> 标签：django, django-templates, django-admin, reverse, colon

在通过示例学习 Django 时，我发现了一些我还不知道的东西，也没有找到任何参考。我确信它在某处有很好的记录，但我还没有找到如何搜索它。另外，如果我重新提出一个已经回答的问题，我深表歉意，我也没有在这里找到它。我想了解的是“admin: ...”语法，我在几种情况下遇到过：

在模板 .html 文件中：

```
<a href="{% url admin:todo_datetime_add %}">Add Todo items</a> 
```

在视图函数中：

```
return HttpResponseRedirect(reverse("admin:todo_item_changelist")) 
```

我已经浏览了djangoproject教程和djangobook的前8章，在那里我没有遇到。不过，我知道，在反向函数中，可能会传递视图函数，并且 {% %} 模板标记“做某事”，但到目前为止，我只看到用于这些情况的虚线语法。可能是为了引用管理功能，而不是点语法，我们使用这个冒号？我真的很感激对它的作用进行一些简短的解释，或者参考链接也很棒。再次，如果我重新提出一个已经回答的问题，我很抱歉。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T08:19:29.857

它是 URL 命名空间。管理文档： [https](https://docs.djangoproject.com/en/2.2/ref/contrib/admin/#admin-reverse-urls) ://docs.djangoproject.com/en/2.2/ref/contrib/admin/#admin-reverse-urls ，通用 URL 命名空间文档：[https ://docs.djangoproject.com/en/2.2/topics /http/urls/#url-namespaces](https://docs.djangoproject.com/en/2.2/topics/http/urls/#url-namespaces)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T08:21:06.547

来自 django 文档：

> 如果您想检索命名空间 URL，请指定完全限定名称：
> 
> {% url 'myapp:view-name' %} 这将遵循正常的命名空间 URL 解析策略，包括使用上下文提供的关于当前应用程序的任何提示。

# mysql - 坚持Doctrine2时如何跳过列？

> ID：12597240
> 
> 赞同：4
> 
> 时间：2012-09-26T08:06:41.123
> 
> 标签：mysql, orm, symfony, doctrine-orm, persistence

我有一列用于对象为时的时间`created`和一列用于对象时的时间`updated`。当我创建并保留新对象时，我从 MySQL 收到错误消息：

> 更新不能为空。

我没有为其设置任何值，因为我希望`updated`列保持不变并最终获得默认数据库值，无论它是什么。

如何告诉教义只保留那些我明确设置/更改的值的列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T08:14:55.680

确保您的列定义已`nullable`定义为`true`.

```
/**
 * @Column(type="datetime", nullable=true)
 */
protected $updated; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:16:22.270

然后，您应该将实体中的列设置为可为空的 false。

在您的实体中：

```
/**
 * @var datetime $date_updated
 *
 * @ORM\Column(type="datetime", nullable=true)
 */
private $date_updated; 
```

# html - IE 移动 CSS 和图像不会在重定向时加载

> ID：12597242
> 
> 赞同：0
> 
> 时间：2012-09-26T08:06:47.207
> 
> 标签：html, css, image, mobile

我正在使用诺基亚 610 来测试 IE 手机。

我们有一个按钮，可以将用户重定向到通过 HTTPs 提供的另一个页面。当用户重定向到页面时，不会加载 CSS 和图像。

但是，如果您刷新页面或直接转到该页面，则会加载 CSS 和图像。有没有人见过这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-14T00:13:11.960

您是否指定图像的完整路径并使用“http”？由于 https 上的内容不安全，IE 可能不会加载它们。

# linux - 与设备对话的守护程序

> ID：12597248
> 
> 赞同：0
> 
> 时间：2012-09-26T08:07:11.747
> 
> 标签：linux, linux-kernel, embedded-linux

我阅读了有关守护程序编程的信息，我想我需要它来检测我的设备是否在线，例如（RS232、usb、以太网）。然后获取 web 服务 PHP。

本站的代码。[http://www.netzmafia.de/skripten/unix/linux-daemon-howto.html](http://www.netzmafia.de/skripten/unix/linux-daemon-howto.html)

我添加了一些部件来测试我是否可以检测到设备。

```
#include <sys/types.h>
#include <sys/stat.h>
#include <stdio.h>
#include <stdlib.h>
#include <fcntl.h>
#include <errno.h>
#include <unistd.h>
#include <syslog.h>
#include <string.h>
int devfd;
int main(int argc, char *argv[]) {

        int c;

        while((c=getopt(argc,argv,"s")) != -1)
            switch(c){

            case 's': devfd = open("/dev/ttyUSB0", O_RDWR);
                        if(devfd==-1){
                        printf("offline\n");
                        }
                        else{
                        printf("online\n");
                        }
                        break;
            default: printf("Wrong command\n");

            }

        /* Our process ID and Session ID */
        pid_t pid, sid;

        /* Fork off the parent process */
        pid = fork();
        if (pid < 0) {
                exit(EXIT_FAILURE);
        }
        /* If we got a good PID, then
           we can exit the parent process. */
        if (pid > 0) {
                exit(EXIT_SUCCESS);
        }

        /* Change the file mode mask */
        umask(0);

        /* Open any logs here */        

        /* Create a new SID for the child process */
        sid = setsid();
        if (sid < 0) {
                /* Log the failure */
                exit(EXIT_FAILURE);
        }

        /* Change the current working directory */
        if ((chdir("/")) < 0) {
                /* Log the failure */
                exit(EXIT_FAILURE);
        }

        /* Daemon-specific initialization goes here */

        /* The Big Loop */
        while (1) {

        }
   exit(EXIT_SUCCESS);
} 
```

我添加了这个代码..

```
while((c=getopt(argc,argv,"s")) != -1)
            switch(c){

            case 's': devfd = open("/dev/ttyUSB0", O_RDWR);
                        if(devfd==-1){
                        printf("offline\n");
                        }
                        else{
                        printf("online\n");
                        }
                        break;
            default: printf("Wrong command\n");

            } 
```

所以在终端中这样做。

./daemon -s //因为没有连接USB0设备所以离线打印。

我还有其他方法可以检测我的设备吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T08:32:50.183

如果它有 udev，您可以使用[libudev](http://www.freedesktop.org/software/systemd/libudev/)来检测和监控您的设备。[从signal11](http://www.signal11.us/oss/udev/)结帐不错的教程。

# c# - 桌面应用程序启动缓慢

> ID：12597250
> 
> 赞同：-3
> 
> 时间：2012-09-26T08:07:15.477
> 
> 标签：c#, winforms, visual-studio-2008, desktop-application

**在.NET 3.5**中开发的应用程序**启动缓慢**的可能原因是什么？这个问题可能涉及哪些因素以及如何避免此类问题？

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T08:41:36.957

从我的头顶上掉下来......

慢/强烈的启动代码。这可能在 Program、在启动时创建的对象的构造函数或第一种形式的 Show/Load 事件中。

启动时基于数据库/Internet 的连接，**尤其是**在该连接无法连接的情况下。有多少人编写同步网络相关代码并抱怨他们的应用程序运行缓慢，这一点总是令人惊讶。

正在加载大量库，这是一个奇怪的库，因为性能分析器并不总是显示您在等待什么。

请注意，以上所有内容都可以在带有进度条的启动/启动屏幕中运行。**

# c# - 为什么网站项目在config中没有发布模式？

> ID：12597252
> 
> 赞同：4
> 
> 时间：2012-09-26T08:07:22.260
> 
> 标签：c#, debugging, visual-studio-2008, build

我目前正在**网站项目**中工作。我想以**发布**模式构建项目，不幸的是看到 Visual Studio 没有用于构建的**发布**模式，只有**调试**模式。

在**web 应用程序项目中，我们在 build** **debug**和**release**中看到了两个选项。

我想知道为什么网站项目在构建中有调试模式。我读到了调试和发布模式构建，发布模式**优化代码**并且**开销更少**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T08:11:57.460

您需要通过在对话框中右键单击解决方案>属性>来设置发布模式，将其更改为发布模式或直接从vidual studio的rop设置发布，请参见下图中标有红色的图片

![在此处输入图像描述](../Images/70e7d991e5665b8d1d5b88040cac5383.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-03T08:59:44.790

在网站项目中，页面是在第一次请求时动态编译的。除非您在配置文件中另外指定，否则它将在没有调试符号的情况下编译。

您无法使用配置管理器更改它，也无法在其选项中看到它。

在您的网络配置文件中找到这些选项

```
<system.web>
 ...
<compilation debug="true">
...
</compilation>
</system.web> 
```

将 true 设置为 false 然后它将以发布模式发布。希望能帮助到你

# c++ - 了解 Windows 中代码块的 g++ 版本

> ID：12597254
> 
> 赞同：1
> 
> 时间：2012-09-26T08:07:27.633
> 
> 标签：c++, c++11

我正在 Interviewstreet.com 上解决问题。他们说他们使用 C++ 版本 g++ 4.6.3，C0x 模式。我正在代码块上编写代码。所以我想知道我在代码块中使用的版本是 C0x 模式还是 C11 模式？

我试过使用 g++ --version 我得到了 g++ TDM-2 mingw32 4.4.1。你能告诉我在哪里可以获得这种信息吗？C++ 0x 和 C++11 有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T08:21:22.360

如果要使用 c++11 功能，则必须将 g++ 的版本更新到 4.6.3（或更高版本）。看到[这个问题，它是](https://askubuntu.com/questions/26498/choose-gcc-and-g-version)关于如何为 deb linux 做的答案。

然后你必须`--std=c++0x`在选项中传递给编译器。您应该能够在代码块中轻松找到它们。

> C++ 0x 和 C++11 有什么区别？

c++0x 是 c++11 的同义词。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:37:04.577

命令：

```
g++ --version 
```

为您提供 g++ 或 mingw 编译器的版本。既然你得到了，`g++ TDM-2 mingw32 4.4.1`那么你的版本是`4.4.1`. 如果您想使用`4.6.3`该网站中的版本，则必须进行更新。

使用更新版本的 mingw 不会有什么坏处`4.6.3`，所以请[在此处](http://sourceforge.net/projects/mingw/files/Installer/mingw-get-inst/mingw-get-inst-20120426/)查看最新版本。此页面提供了一个用于 mingw 的 Windows 安装程序。

安装后，您必须配置 CodeBlocks 以使用新安装的编译器，方法是查看`Compiler and debugger settings`->`Toolchain executables`选项卡并将编译器相关可执行文件的路径设置为新的。

希望这可以帮助。

**编辑**：

[这](http://www.ogre3d.org/tikiwiki/tiki-index.php?page=Code%20Blocks%20Compiler%20Setup)是 CodeBlocks 设置的小教程/示例。

# javascript - JavaScript 可以画虚线吗？

> ID：12597258
> 
> 赞同：-1
> 
> 时间：2012-09-26T08:07:38.213
> 
> 标签：javascript

我是一个 JavaScript 新手。我知道 JavaScript 可以画线，但它可以画虚线吗？如果可以，我该怎么做？它可以绘制抗锯齿线吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T08:09:13.870

我认为您正在寻找[RaphaelJS](http://raphaeljs.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:09:31.670

如果只是画线，为什么不使用 CSS 边框属性：

```
border-top:1px dashed #000; 
```

# jquery - 如何从jquery对话框中的按钮触发asp代码

> ID：12597259
> 
> 赞同：-1
> 
> 时间：2012-09-26T08:07:48.300
> 
> 标签：jquery, asp.net, linq

任何人都可以教我如何在我单击出现在 jquery 弹出对话框中的按钮后触发背后的 asp 代码吗？我希望我的数据发送到服务器端

这是我的表格：

```
<div id="dialog" hidden>

 fullname:<asp:TextBox ID="TextBox1" runat="server"></asp:TextBox></br>
 password:<asp:TextBox ID="TextBox2" runat="server"></asp:TextBox></br>
 email:<asp:TextBox ID="TextBox3" runat="server"></asp:TextBox></br>

<asp:Button ID="Submit" runat="server" Text="Button" onclick="Button1_Click" hidden/>

</div> 
```

我的 jquery 对话框将弹出我的表单：

```
<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>

<script type="text/javascript" language="javascript" >

jQuery(document).ready(function () {

    $('#<%=open.ClientID%>').click(function () {

        $('#dialog').dialog({ modal: true,
            height: 500,
            width: 600,
            resizable: false,
            show: 'fold',
            hide: 'fold',
            }

        });
        return false;
    });
}); 
```

这是我的asp代码。我正在使用 linq 在 gridview 中显示数据：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        showData();
    }

     protected void showData()
     {
         using(AutoBetDataContext db = new AutoBetDataContext())
         {
             var query = from u in db.UserDetails
                         select u;

             GridView.DataSource= query;
             GridView.DataBind();
         }
     }

     protected void Button1_Click(object sender, EventArgs e)
     {
         using (AutoBetDataContext db = new AutoBetDataContext())
         {
             UserDetail user = new UserDetail();
             user.Fullname = TextBox1.Text;
             user.Password = TextBox2.Text;
             user.EmailAddress = TextBox3.Text;
             db.UserDetails.InsertOnSubmit(user);
             db.SubmitChanges();
             showData();
         }
     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T08:15:42.890

单击对话框时，您似乎在最后返回 false ..

```
 });
 return false; 
```

这将防止回发发生..

尝试在此处**返回 true** ..

如果这没有帮助，您必须显式调用**__doPostback()**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T13:13:26.197

我怀疑您的问题出在`command`按钮上 - 它似乎与回帖有关，页面已刷新，您的对话框无法显示。

您单击`open`并显示对话框，然后`return false`防止回发。

然后在对话框中，输入详细信息并单击带有 ID 的按钮`Submit`- 这会触发回发，从而触发事件`Button1_Click`。

为了阻止表单被新数据填充，我个人会更改以下内容：

```
protected void Page_Load(object sender, EventArgs e)
{
    if(!IsPostBack)
    { // Only do this if the page is a fresh request.
        showData();
    }
} 
```

否则，页面将加载，新的详细信息将被加载。

然而，由于页面现在被回发，jQuery 对此一无所知，因此对话被隐藏（按照正常的页面加载）。

你总是可以有一个隐藏的字段：

```
<asp:hidden id="hdnOpenDialogue" runat="server" value="false" /> 
```

然后在`Button1_Click`奔跑中`hdnOpenDialogue.value = "true";`

然后使用以下 jQuery：

```
$('[id$="hdnOpenDialogue"]').each(function(idx) {
    if($(this).attr("value") == "true") {
                $('#dialog').dialog({ modal: true, height: 500,
                        width: 600, resizable: false,
                        how: 'fold', hide: 'fold',
                  }
               });       
    };
}); 
```

如果隐藏字段设置为“true”，这将打开您的对话

这更多的是关于如何在回发后保持对话开放的理论，而不是逐字复制，因为我刚刚将其编码！

# dataview - 过滤过滤的数据视图

> ID：12597262
> 
> 赞同：0
> 
> 时间：2012-09-26T08:08:00.270
> 
> 标签：dataview, asp.net-1.1

我有一个 DataSet 将被过滤两次，如下所示。如何设置 DataView 的 RowFilter 属性两次？或者还有比下面的更好的实现吗？

```
DataView dv = new DataView(myDataSet.Tables[0]);
dv.RowFilter = "approved = 1";
dv.Sort = "BookingDate";
foreach row{
    //Filter by shiftTime in filtered DataView
    foreach column{
        //Find date in filtered DataView
    }
} 
```

预先感谢您的帮助。

谢谢，艺人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T20:02:37.740

我不知道你是否已经找到了解决方案。我假设你有，但如果它对某人有帮助，我仍然会发布一个可能的解决方案。虽然它在 VB.NET 中。

```
Dim dv_docs As New DataView(ds_allDocsInfo.Tables(0))
Dim rowFilter As String = ""
rowFilter = "DocumentStatus='Published' And templateFrameID='2'
dv_docs.RowFilter = rowFilter
DLDocument.DataSource = dv_docs
DLDocument.DataBind() 
```

注意：要拥有多个过滤器，我使用了“和”并在将其应用于 DataView 之前分别构建了一个行过滤器。

希望这可以帮助。

# php - 使用PHP在登录期间比较用户名和密码

> ID：12597263
> 
> 赞同：0
> 
> 时间：2012-09-26T08:07:59.843
> 
> 标签：php, cakephp

假设我有如下 PHP 代码：

```
<form action="index.php" method="post" id="myform">
     <tr>
        <td>User Name </td>
        <td><input type="text" name="text_username" placeholder="your username here" class="validate[required]"/></td>
     </tr>
      <tr>
        <td>Pass Word </td>
        <td><input type="password" name="text_password" placeholder="your password here" class="validate[required]" /></td>
     </tr>
     <?php 
            $userPass = array();
            $userName = array();
            $userID = array();
            include ('include/connectdb.php');
            if(isset($_POST['tbn_submit'])){
                $query = mysql_query("SELECT * FROM tblusers");
                $username = $_POST['text_username'];
                $password = $_POST['text_password'];

                 while($value= mysql_fetch_array($query)){ 
                            $userPass = $value['user_password'];
                            $userName = $value['user_username'];
                            $userID = $value['user_id'];
                                if($username == $userName && $password == $userPass){
                                     header("location:DataInfo.php?uid=".$userID);
                                   }
                                 else if($username != $userName && $password == $userPass) {
                                    echo'<tr><td colspan="2"><center><b style="color:red;">Invalide username or password, please check again!   </b></center></td></tr>';             
                                    }
                }
             }      
    ?>
     <tr>
        <td></td>
        <td><input type="submit" name="tbn_submit" class="btn btn-success" value="Login"/><input type="reset" class="btn btn-warning" value="Cancel"/></td>
     </tr>
     </form> 
```

问题：

当我使用错误的用户名和密码时，它会`Invalide username or password, please check again!`多次显示重复消息，我不想这样。我该如何解决这个问题。请帮助我，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T08:13:02.167

这是非常错误的，首先，

为什么要在 php 中检查密码和登录匹配？您可以进行如下查询：

```
SELECT * FROM tblusers WHERE username = *username* AND password = *password* 
```

如果查询返回结果，则用户可以登录，否则，错误消息。

然后，您的代码的问题是您将所有用户数据库与登录名和密码进行比较。如果 pass/login 匹配，您将用户重定向到另一个页面，否则，您将显示错误消息。问题是脚本在不匹配时不会停止！

所以每次用户名/密码为假时，它都会显示一条错误消息，并且对于您的用户数据库的每一列。

如果你得到这个工作，我建议你使用 sha1 这样人们就无法读取纯文本密码......

只需将密码存储`sha1($password)`并与`sha1()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T08:13:23.503

您的问题可能是您的查询：

```
mysql_query("SELECT * FROM tblusers"); 
```

您正在从表中选择所有用户，然后对其进行迭代。相反，您想按用户名选择，然后比较密码：

```
mysql_query("SELECT * FROM tblusers WHERE user_username = ".$_POST['text_username']); 
```

您可能还想为该查询添加密码。

当然，这对安全问题和问题以及其他问题都是开放的，您可能应该研究 PDO 和 MySQLi。

最后一点，在 PHP 中以正确的方式设置密码总是好的：[如何在 PHP 中使用 bcrypt 对密码进行哈希处理？](https://stackoverflow.com/questions/4795385/how-do-you-use-bcrypt-for-hashing-passwords-in-php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T08:14:33.710

在您的代码中，您查询所有已知用户，并检查每个用户（如果用户名和密码相同）。这是不必要的慢，不需要从数据库中获取所有用户，只需搜索具有给定用户名的用户即可。

将密码纯文本存储在数据库中不是一个好主意，您应该使用像 BCrypt 这样的散列函数，并且只将散列后的密码存储在数据库中。

然后我建议切换到 mysqli 或 PDO，而不是 mysql_* 函数。不推荐使用 mysql 函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T08:21:55.643

您从代码中得到的输出很明显。你正在做的是：

1.  从用户表（tblusers）中获取所有记录

    mysql_query("SELECT * FROM tblusers");

2.  然后你循环每条记录

    而（$值= mysql_fetch_array（$查询））

因此，如果表`tblusers`有 1000 条记录，您将收到 1000 次消息。

您应该将其重写为：

```
include ('include/connectdb.php');
if(isset($_POST['tbn_submit'])){
  $username = $_POST['text_username'];
  $password = $_POST['text_password'];
  $query = mysql_query("SELECT * FROM tblusers WHERE username = $userName AND password = $userPass");

  if(mysql_num_rows($query)){
    $user = mysql_fetch_assoc($query)
    header("location:DataInfo.php?uid=".$user['user_id']);
  } else {
    echo '<tr><td colspan="2"><center><b style="color:red;">Invalide username or password, please check again!   </b></center></td></tr>';             
  }
} 
```

请注意以下问题：

*   变量 $userName 和 $userPass 在这里没有被转义，请在你的代码中这样做。你可以看看[这里](http://php.net/manual/en/mysqli.real-escape-string.php)。否则你可能会把自己置于危险之中！
*   您需要修复`else { }`块中的标记。
*   显示的代码/逻辑中还有其他可能的改进。我只是给你的想法！
*   还看时间，您已将纯文本密码存储在您的数据库中，您不能这样做！至少使用mysql[原生的password()](http://dev.mysql.com/doc/refman/5.1/en/password-hashing.html)函数！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-22T11:12:37.813

```
<html>

<h1 align="center">LOGIN PAGE</h1>
<br>
<?php
if(isset($_POST['submit']))
{
$uname=$_POST['$uname'];
$pname=$_POST['$pname'];
echo $uname;
}
?>
<body>
<form action="nexts.php" method="GET">
<table border=1 align=center>
<tr>
<th>USERNAME<th>
<input type="text" name="uname">
</tr>
<tr>
<th>PASSWORD<th>
<input type="password" name="pname">
<br>
<input type="submit" name="submit" value="submit">
</tr>
</html>`<html>

<h1 align="center">LOGIN PAGE</h1>
<br>
<?php
if(isset($_POST['submit']))
{
$uname=$_POST['$uname'];
$pname=$_POST['$pname'];
echo $uname;
}
?>
<body>
<form action="nexts.php" method="GET">
<table border=1 align=center>
<tr>
<th>USERNAME<th>
<input type="text" name="uname">
</tr>
<tr>
<th>PASSWORD<th>
<input type="password" name="pname">
<br>
<input type="submit" name="submit" value="submit">
</tr>
</html>

------------------------------------------------

nexts.php
----------------------------

<?php
include_once('connections.php');
?>

<?php

if(isset($_GET['submit']))
{

$uname = $_GET['uname'];
$pname = $_GET['pname'];

$query = mysql_query("SELECT * FROM dayz");
while($value= mysql_fetch_array($query))
{ 
$varuname = $value['uname'];
$varpname = $value['pname'];

if($varuname == $uname && $varpname == $pname)
{
echo "login successful";
}
else if($varuname != $uname && $varpname == $pname) 
{
echo "Invalide username or password, please check again!";             
}
}
}     

?> 
```

# php - 带有 OAuth 2 的 Youtube PHP 库

> ID：12597266
> 
> 赞同：2
> 
> 时间：2012-09-26T08:08:14.323
> 
> 标签：php, zend-framework, youtube, oauth-2.0, gdata

根据[Google 的文档](https://developers.google.com/accounts/docs/AuthSub)，官方不推荐使用 AuthSub 方法来代替 OAuth 2.0。问题是，他们的 PHP 库 v2 是使用 Zend Gdata 构建的，据我所知，它不适用于 OAuth。另一方面，[他们的 API v3](http://code.google.com/p/google-api-php-client/)不仅仍在开发中，而且看起来还不支持 YouTube 调用。

所以我的问题是，在使用 OAuth2 进行身份验证后，使用库的 v2 进行 API 调用的最佳方法是什么？在新库出现之前，我最好只使用 AuthSub 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-12T21:24:18.387

您实际上可以使用 v3 php 库调用 Youtube api。[您可以在此处](https://developers.google.com/youtube/v3/code_samples/php)找到代码示例。

# c# - 当字段可能为空时，如何将数据库编号转换为十六进制？

> ID：12597268
> 
> 赞同：0
> 
> 时间：2012-09-26T08:08:16.290
> 
> 标签：c#, linq, hex

我无法从十进制转换为十六进制。

这是我的代码：

```
select new
{
    MessageID = table1.Field<Int32?>("MessageID"),
    MessageIDHex = (String)table1.Field<Int32>("MessageID").ToString("X")
} 
```

它给了我错误

> DBNUll.Value 不能更改为 System.In32

所以我试过了

```
MessageIDHex= (String)table1.Field<Int32?>("MessageID").ToString("X")} 
```

但它给了我另一个错误。

我该如何解决它，或者它确实有另一种方法来解决它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T08:10:37.270

显然，`MessageID`可以是DBNull。最简单的解决方案是将值读取为可为*空*的int（以防止发生转换错误）。如果您使用`Field`可空类型，`DBNull`则自动转换为`null`，然后可以使用`??`运算符将​​其强制为 0：

```
MessageIDHex = (table1.Field<Int32?>("MessageID") ?? 0).ToString("X") 
```

或者，如果您愿意，您可以让数据库中的 DBNull 值生成空字符串或空字符串`MessageIDHex`：

```
MessageIDHex = table1.IsNull("MessageID") ? "" : table1.Field<Int32>("MessageID").ToString("X")
MessageIDHex = table1.IsNull("MessageID") ? null : table1.Field<Int32>("MessageID").ToString("X") 
```

# jquery - 如何在 qtip2.. 中呈现文本？

> ID：12597270
> 
> 赞同：0
> 
> 时间：2012-09-26T08:08:25.900
> 
> 标签：jquery, qtip, qtip2

我需要在演出前拿起每个值

```
$('a#functionDescription').attr('title') 
```

这是怎么回事..？

```
 $('a#functionDescription').qtip({
        content: { 
            text: false
        },
        style: {
            width: 250,
            tip: 'leftMiddle',
            color: 'white',
            background: '#66CC33',
            name: 'green'
        },
        position: {
            corner: { 
                target: 'topRight',
                tooltip: 'bottomLeft'
            },
            adjust: { x: 0, y: -25 }
        },
        events: {
            render: function(event, api) {
                //what to write here ?
            }
        }
    }); 
```

**更新：**

$('a#functionDescription').attr('title') 已更改

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T08:15:06.977

您需要指定`text`为函数：

```
content: {
    text: function() {
        return $(this).attr('title');
    }
} 
```

函数内部`this`将是悬停的元素。无需使用任何事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:14:08.510

```
$('a#functionDescription').qtip({
        content: { 
            text: $(this).attr('title'); //Replace this with any element attributes
        },
        style: {
            width: 250,
            tip: 'leftMiddle',
            color: 'white',
            background: '#66CC33',
            name: 'green'
        },
        position: {
            corner: { 
                target: 'topRight',
                tooltip: 'bottomLeft'
            },
            adjust: { x: 0, y: -25 }
        },
        events: {
            render: function(event, api) {
                //what to write here ?
            }
        }
    }); 
```

您可以在 Content 中获取任何元素属性。

# iphone - 框架中的移动网站搞砸了

> ID：12597273
> 
> 赞同：-1
> 
> 时间：2012-09-26T08:08:50.570
> 
> 标签：iphone, ios, iframe, safari

通常，当您在 iPhone 上浏览移动网站时，它会正确显示。但是当我把同一个网站放在iframe中，尝试通过另一个网站访问时，移动端的网站被拉伸缩小了，就好像显示在桌面浏览器上一样。

如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T08:20:49.100

通常，提供移动版本的网站会询问哪种客户端正在调用该 URL。您的 iPhone 浏览器会提供该信息。通过 iFrame 访问站点时，客户端信息不能传递到目标网站，而只能传递到定义 iFrame 的周围 HTML。

通常不建议在 iPhone 上使用 iFrame。见那里： [iFrames 和 iPhone](http://www.smashinghtml5.com/2011/01/03/iframes-and-iphones/)

# java - 持久性 API 的类注释与接口

> ID：12597274
> 
> 赞同：1
> 
> 时间：2012-09-26T08:08:51.810
> 
> 标签：java, oop, google-app-engine, design-patterns

我正在开发一个用于持久化对象的 java API，其中您对字段使用注释，但我不确定关于类的更好实现是什么。

```
public interface Persistent{        
        public Key getKey();
    public void setKey(Key key);
}
public class PersistentObject implements Persistent{
    Key key;        
    public Key getKey() {
        return key;
    }
    public void setKey(Key key) {
        this.key=key;
    }       
} 
```

或者

```
public @interface Persistent {  
}
@Persistent
public class PersistentObject {
    Key key; //the coder must create this variable or the system doesn't work
} 
```

1.  第一个使用OOP中广泛使用的接口机制，它需要创建一个变量来实现这个接口，但假设程序员知道它。
2.  第二种对于最终程序员来说更容易，并且在许多库中广泛用于持久性，但是强制程序员按照不适合 OOP 模型的约定创建一个具有同一个名称的变量。

感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T10:13:23.733

不，我不会给你答案。但我建议您阅读Joshua Bloch 在 Effective Java 中的[“Prefer annotations to Naming patterns”一章。](http://books.google.co.in/books?id=Ft8t0S4VjmwC&pg=PA169&lpg=PA169&dq=%22Prefer%20annotations%20to%20naming%20patterns%22&source=bl&ots=D3xd-6pEGj&sig=mGWjDkMoLmzRsqGt4AIkjetl2oM&hl=en&sa=X&ei=1tRiUNyID8yJrAet1IDgDQ&redir_esc=y#v=onepage&q=%22Prefer%20annotations%20to%20naming%20patterns%22&f=false)

请让我知道这是否是您正在寻找的答案。

# android - 在 Eclipse 4.2 中生成云端点时出错

> ID：12597276
> 
> 赞同：1
> 
> 时间：2012-09-26T08:08:56.590
> 
> 标签：android, eclipse, google-app-engine, eclipse-plugin, google-cloud-endpoints

在过去的几天里，我在尝试在 Eclipse 中生成云端点库时不断收到此错误。

这是完整的错误日志：

```
eclipse.buildId=I20120608-1400
java.version=1.6.0_31
java.vendor=Sun Microsystems Inc.
BootLoader constants: OS=win32, ARCH=x86, WS=win32, NL=it_IT
Framework arguments:  -product org.eclipse.epp.package.jee.product
Command-line arguments:  -os win32 -ws win32 -arch x86 -product org.eclipse.epp.package.jee.product

Error
Wed Sep 26 09:39:46 CEST 2012
Unexpected Exception

com.google.api.client.http.HttpResponseException: 503 Service Unavailable
{
 "error": {
  "errors": [
   {
    "domain": "global",
    "reason": "backendError",
    "message": "Backend Error"
   }
  ],
  "code": 503,
  "message": "Backend Error"
 }
}

at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:861)
at com.google.api.server.spi.tools.CloudDiscoveryDocGenerator.postRequest(CloudDiscoveryDocGenerator.java:61)
at com.google.api.server.spi.tools.CloudDiscoveryDocGenerator.generateDiscoveryDoc(CloudDiscoveryDocGenerator.java:53)
at com.google.gdt.eclipse.appengine.swarm.wizards.helpers.SwarmApiCreator.generateAndWriteDiscovery(SwarmApiCreator.java:217)
at com.google.gdt.eclipse.appengine.swarm.wizards.helpers.SwarmApiCreator.createClientLibFromApiConfig(SwarmApiCreator.java:177)
at com.google.gdt.eclipse.appengine.swarm.wizards.helpers.SwarmApiCreator.createSwarmApi(SwarmApiCreator.java:169)
at com.google.gdt.eclipse.appengine.swarm.wizards.helpers.SwarmServiceCreator.create(SwarmServiceCreator.java:190)
at com.google.gdt.eclipse.appengine.swarm.wizards.helpers.SwarmServiceCreator$1.run(SwarmServiceCreator.java:271)
at org.eclipse.jface.operation.ModalContext.runInCurrentThread(ModalContext.java:464)
at org.eclipse.jface.operation.ModalContext.run(ModalContext.java:372)
at org.eclipse.jface.dialogs.ProgressMonitorDialog.run(ProgressMonitorDialog.java:507)
at com.google.gdt.eclipse.appengine.swarm.wizards.helpers.SwarmServiceCreator.createWebApi(SwarmServiceCreator.java:267)
at com.google.gdt.eclipse.appengine.swarm.wizards.GenerateSwarmApiAction.run(GenerateSwarmApiAction.java:79)
at org.eclipse.ui.internal.PluginAction.runWithEvent(PluginAction.java:251)
at org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:584)
at org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:501)
at org.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContributionItem.java:411)
at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4169)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3758)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1022)
at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:916)
at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:86)
at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:585)
at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:540)
at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)
at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
at org.eclipse.equinox.launcher.Main.run(Main.java:1438) 
```

起初我以为是我的错，但现在我从 android 项目重新创建了一个简单的 app-engine 后端项目，但仍然是同样的问题。

请帮助我，我正在按计划进行，这让我很长时间。

如果我尝试在 app-engine 上部署，则没有问题......

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-01T17:39:41.947

最常见的问题是原始类型，返回值或参数。sdk 1.8.2 支持集合
这个问题的另一个来源是@Api 注解的name 属性的值。如果值包含点或破折号，则会引发相同的异常。[值应与https://developers.google.com/appengine/docs/java/endpoints/annotations](https://developers.google.com/appengine/docs/java/endpoints/annotations)中所述的以下正则表达式 [az]+[A-Za-z0-9]* 匹配

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-11T00:23:14.003

就我而言，问题在于其中一个 API 使用了错误的 HTTP 方法。错误地，我将其中一种方法的**httpMethod**属性设置为**“UPDATE”**，但没有这样的 HTTP 方法。我将其更改为**HttpMethod.POST**并且**503 服务器错误**消失了。

注意：始终使用**com.google.api.server.spi.config.ApiMethod.HttpMethod**来设置 httpMethod 属性。

# java - 为什么有人会在 java 中使用 Collections.emptyList？

> ID：12597277
> 
> 赞同：11
> 
> 时间：2012-09-26T08:09:00.193
> 
> 标签：java, list, collections

> **可能重复：**
> [Collections.emptyList() 与新实例](https://stackoverflow.com/questions/5552258/collections-emptylist-vs-new-instance)

我试图了解使用以下方法创建列表的新实例之间的区别：

```
new ArrayList<X> 
```

和

```
Collections.emptyList(); 
```

据我了解，后者返回一个不可变列表。这意味着无法添加、删除或修改它。我想知道为什么要创建和不可变的 emptyList ？有什么用？谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-26T08:11:43.527

不可变允许可重用​​实例。

Collections.emptyList 将始终返回完全相同的单例实例。

这是非常有效的。

除此之外，不可变数据可以在线程之间安全地共享，并保证避免由于编码错误导致的奇怪副作用。出于这个原因，它也使防御性副本变得不必要。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-26T08:12:08.160

假设您必须返回一个集合，并且您不想每次都创建几个对象。

```
interface Configurable {
    List<String> getConfigurationList();
}

// class which doesn't have any configuration
class SimpleConfigurable implements Configurable {
    public List<String> getConfigurationList() { return Collections.emptyList(); }
} 
```

返回一个空集合通常比返回更可取`null`

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-26T08:12:00.547

我经常使用空列表作为[Null 对象](http://en.wikipedia.org/wiki/Null_Object_pattern)：这避免了检查`null`。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-09-26T08:13:31.407

我已经使用`Collections.emptyList`了返回列表但使用没有意义的参数调用的方法。

例如，您想要访问流的不同部分的流处理应用程序，可能基于日期。您从流中查询项目的时间跨度，但如果在该时间跨度内没有项目，您将返回一个空列表。抛出异常没有任何意义，因为查询没有任何问题。返回`null`也没有多大意义，因为所有调用代码都需要检查`null`.

返回一个不可变的空列表允许调用代码很好地处理返回值，您无需担心线程问题，因为不可变列表本质上是线程安全的。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-09-26T08:55:14.800

避免不需要的 NullPointerException。

在您的代码中，您可能会返回一个普通的“空”ArrayList 而不是返回 null。但是，这样一来，您将在每次执行时继续创建新对象（默认容量为 10），这不是一种内存高效的方法。相反，如果您返回 emptyList，则每次调用都将返回相同的实例。这样，它以更有效的方式将您从不需要的 NullPointerException 中拯救出来。以下是 emptyList 的 Javadoc 的片段：

```
/**
 * Returns the empty list (immutable).  This list is serializable.
 *
 * <p>This example illustrates the type-safe way to obtain an empty list:
 * <pre>
 *     List&lt;String&gt; s = Collections.emptyList();
 * </pre>
 * Implementation note:  Implementations of this method need not
 * create a separate <tt>List</tt> object for each call.   Using this
 * method is likely to have comparable cost to using the like-named
 * field.  (Unlike this method, the field does not provide type safety.)
 *
 * @see #EMPTY_LIST
 * @since 1.5
 */ 
```

# c# - 无法创建新的构建配置

> ID：12597280
> 
> 赞同：9
> 
> 时间：2012-09-26T08:09:18.087
> 
> 标签：c#, asp.net, visual-studio-2012, buildconfiguration

这是一个烦人的。

我在 Visual Studio 2012 中有一个解决方案，其中包含一个 .Net 4.5 类库、一个 .NET 4.5 Web 应用程序和一个 .NET 4.5 网站。

我想创建一个新的构建配置，我们称之为 Publish 或 Live，主要是这样我可以在发布 Web 应用程序时选择它并使用 web.config 转换。

所以我单击我的解决方案，转到构建然后配置管理器。在配置下拉列表中，我选择 ，然后我得到一个小弹出窗口，询问我新配置的名称等。我填写此内容，单击确定，然后......什么都没有。纳达。

无论我如何称呼新配置，无论我选择从现有配置中复制等，都不会创建新配置。我错过了一些非常明显的东西吗？

谢谢，

马特

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-14T14:16:52.490

我遇到了同样的问题，但是当我取消选择“创建新项目配置”时，我能够创建一个新的解决方案配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2022-01-10T16:02:26.687

我最近遇到了同样的问题。我发现 VS 2019 不喜欢将项目分组在与项目名称相同的项目文件夹（虚拟文件夹）中。或者“虚拟”文件夹名称与实际项目同名

例子：

（虚拟）项目文件夹名称：CompanyName.Webservice 内容：CompanyName.Webservice（来自 CompanyName.Webservice.csproj）

在那种情况下，我既不能添加或重命名项目配置，也不能执行该项目的 web.config 文件的转换

希望这么多年后对某人有所帮助...

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-26T11:32:35.240

如果您在标准工具栏上找不到解决方案配置设置或无法访问配置管理器，则可能应用了 Visual Basic 开发人员设置。有关更多信息，请参阅如何：管理应用了 Visual Basic 开发人员设置的生成配置。

链接：http: [//msdn.microsoft.com/en-us/library/kkz9kefa.aspx](http://msdn.microsoft.com/en-us/library/kkz9kefa.aspx)

解决方案 ：

链接：http: [//msdn.microsoft.com/en-us/library/ms165414.aspx](http://msdn.microsoft.com/en-us/library/ms165414.aspx)

# php - 我想使用贝宝付款进行包裹销售，哪种贝宝方式最好？

> ID：12597281
> 
> 赞同：3
> 
> 时间：2012-09-26T08:09:26.617
> 
> 标签：php, paypal

我想要打包销售，当用户点击购买时想要在贝宝网站上发送用户，成功付款后返回我的网站，如果付款我会更新付款状态，否则不会更新付款状态。第二个问题我怎么知道用户付费？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T08:11:11.123

PayPal IPN 允许 PayPal 服务器与您的服务器交互，告诉他们是否已付款、未付款或失败等状态。

[https://www.paypal.com/ipn](https://www.paypal.com/ipn)

例如，如果您使用的是网站支付标准 (https://www.paypal-business.co.uk/accept-online-payments-with-paypal/index.htm)，您可以通过发送隐藏在表格中的信息，他们在 PayPal 上做他们的事情，然后被发回。然后，PayPal 将使用已发送或帐户中的 IPN 详细信息通知服务器，让服务器知道它是否成功或是否发生了其他任何事情。然后，您的应用程序将获取 IPN，进行安全检查，然后执行适当的操作（例如，允许发送项目或允许他们登录等）。

但是 - 如果您正在订阅，我**强烈**建议您**不要**使用 PayPal。他们很讨厌订阅。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T08:13:36.747

访问以下链接 [http://www.evoluted.net/thinktank/web-development/paypal-php-integration](http://www.evoluted.net/thinktank/web-development/paypal-php-integration)

并按照分步指南进行操作。

如果不起作用，请在此处提问。

# url - 为 gmail 预配置 mailto URL - 使用 from 和 html 正文参数

> ID：12597286
> 
> 赞同：2
> 
> 时间：2012-09-26T08:09:44.080
> 
> 标签：url, gmail

在这里，我发现了如何制定 URL 以在 gmail 中打开撰写弹出窗口

[使用 HTML 文本预填充 gmail 撰写屏幕](https://stackoverflow.com/questions/2583928/prefilling-gmail-compose-screen-with-html-text)

效果很好，但我想更进一步

1.  我想设置 FROM 参数。因为在我的 gmail 帐户中，我可以选择要发送的电子邮件...如果可能，我想预设这个

2.  我想在我的 body 参数中做一些基本的 HTML 格式...如果我只是添加**文本**它不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-28T18:50:02.237

我肯定知道正文中没有 HTML： [是否可以在 MAILTO 链接的正文中添加 HTML 链接](https://stackoverflow.com/questions/247245/is-it-possible-to-add-an-html-link-in-the-body-of-a-mailto-link)

正在寻找一个`from`参数...

# typo3 - TYPO3 Formhandler“找不到附件：！”

> ID：12597293
> 
> 赞同：1
> 
> 时间：2012-09-26T08:09:58.680
> 
> 标签：typo3

我试图实现typo3-formhandler。我遵循了本教程：[如何逐步设置简单的表单](http://www.typo3-formhandler.com/documentation/articles-howtos/b/how-to-set-up-a-simple-form/) ，但我不断收到此错误：

> 找不到附件！邮件未发送至：[邮件地址]

我为整个调试日志制作了几张图片： [http://img6.imagebanana.com/img/tg5sjj9x/Bildschirmfoto.png](http://img6.imagebanana.com/img/tg5sjj9x/Bildschirmfoto.png) [http://img6.imagebanana.com/img/f6btnnxq/Bildschirmfoto1.png](http://img6.imagebanana.com/img/f6btnnxq/Bildschirmfoto1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T08:11:25.117

问题是，我没有在我的服务器上配置 PHP 的邮件功能。我只是假设表单处理程序会使用 TYPO3-Configuration，但它没有。

从 1.2 版开始，您可以告诉 FormHandler 使用 TYPO3 的配置： [http ://www.typo3-formhandler.com/documentation/release-notes/version-120/](http://www.typo3-formhandler.com/documentation/release-notes/version-120/)

该问题的正确 Typoscript-Script 是：

```
plugin.Tx_Formhandler.settings {  
  debug = 1   
  templateFile = fileadmin/contactform/1-contactform.html  
  formValuesPrefix = formhandler   
  finishers {    
    1 {      
      class = Tx_Formhandler_Finisher_Mail
      config {
        mailer.class = Mailer_TYPO3Mailer
      }
    }    
    2 {      
      class = Tx_Formhandler_Finisher_SubmittedOK      
      config.returns = 1    
    }  
  }
} 
```

# javascript - 使用 jQuery 解析 XML

> ID：12597300
> 
> 赞同：0
> 
> 时间：2012-09-26T08:10:25.023
> 
> 标签：javascript, jquery, xml, ajax

我需要读取 XML 并在此之后在表格上使用它来填充图表。这是我的**XML**：

```
<?xml version="1.0" encoding="utf-8"?>
<Export>
  <Columns>
    <Dim1>Heures</Dim1>
    <Metric1>Visites</Metric1>
  </Columns>
  <Row Dim1="0h" Metric1="5347" Var1="" Diff1="5347" Rat1="0,0728940874947173" Metric12="0,0728940874947173" Var12="" Diff12="-2147483648" Metric2="116946" Var2="" Diff2="116946" Rat2="0,35501654473149" Metric5="21,8713297175987" Var5="" Diff5="21,8713297175987" />
  <Row Dim1="1h" Metric1="3121" Var1="" Diff1="3121" Rat1="0,0425476803948032" Metric12="0,0425476803948032" Var12="" Diff12="-2147483648" Metric2="7831" Var2="" Diff2="7831" Rat2="0,023772805925746" Metric5="2,50913168856136" Var5="" Diff5="2,50913168856136" />
  <Row Dim1="2h" Metric1="2362" Var1="" Diff1="2362" Rat1="0,0322004553324336" Metric12="0,0322004553324336" Var12="" Diff12="-2147483648" Metric2="6513" Var2="" Diff2="6513" Rat2="0,0197717130627485" Metric5="2,75740897544454" Var5="" Diff5="2,75740897544454" />
  <Row Dim1="3h" Metric1="1591" Var1="" Diff1="1591" Rat1="0,0216896377789593" Metric12="0,0216896377789593" Var12="" Diff12="-2147483648" Metric2="5406" Var2="" Diff2="5406" Rat2="0,0164111593454965" Metric5="3,39786297925833" Var5="" Diff5="3,39786297925833" />
  <Row Dim1="4h" Metric1="1692" Var1="" Diff1="1692" Rat1="0,0230665412457568" Metric12="0,0230665412457568" Var12="" Diff12="-2147483648" Metric2="5630" Var2="" Diff2="5630" Rat2="0,0170911629883732" Metric5="3,3274231678487" Var5="" Diff5="3,3274231678487" />
  <Row Dim1="5h" Metric1="2206" Var1="" Diff1="2206" Rat1="0,030073752948073" Metric12="0,030073752948073" Var12="" Diff12="-2147483648" Metric2="10108" Var2="" Diff2="10108" Rat2="0,0306851643848092" Metric5="4,58204895738894" Var5="" Diff5="4,58204895738894" />
  <Row Dim1="6h" Metric1="4684" Var1="" Diff1="4684" Rat1="0,063855602361185" Metric12="0,063855602361185" Var12="" Diff12="-2147483648" Metric2="16577" Var2="" Diff2="16577" Rat2="0,0503233053034213" Metric5="3,53906917164816" Var5="" Diff5="3,53906917164816" />
  <Row Dim1="7h" Metric1="10821" Var1="" Diff1="10821" Rat1="0,147519528853626" Metric12="0,147519528853626" Var12="" Diff12="-2147483648" Metric2="34800" Var2="" Diff2="34800" Rat2="0,105643423089767" Metric5="3,21596894926532" Var5="" Diff5="3,21596894926532" />
  <Row Dim1="8h" Metric1="19478" Var1="" Diff1="19478" Rat1="0,265537878478045" Metric12="0,265537878478045" Var12="" Diff12="-2147483648" Metric2="66604" Var2="" Diff2="66604" Rat2="0,202191797456058" Metric5="3,41944758188726" Var5="" Diff5="3,41944758188726" />
  <Row Dim1="9h" Metric1="22051" Var1="" Diff1="22051" Rat1="0,300614835112402" Metric12="0,300614835112402" Var12="" Diff12="-2147483648" Metric2="58995" Var2="" Diff2="58995" Rat2="0,179092923712091" Metric5="2,675388871253" Var5="" Diff5="2,675388871253" />
</Export> 
```

然后这是我尝试过的，但没有任何反应，我只有一个空白页，有人可以帮助我吗？

```
<script type="text/javascript">
$.get( "graph.xml", function( data, textStatus, jqXHR ){
        var heures,
            nbr,
            divItems = $( "<div/>", {
                "class" : "items"
            });

        $( data ).find( "Export" ).children().each( function( i, item){
            $( item ).children().each( function( j , jtem ){
                heures = $( jtem ).attr( "Dim1" );
                nbr = $( jtem ).attr( "Metric1" );

                $( divItems )
                    .clone()
                    .html( '<a href="' + heures + '">' + nbr + '</a>')
                    .appendTo( "#xml" );
            });
        });
         </script>

         </head>
         <body>
          <div id="xml"></div>
          </body> 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T09:52:34.743

`Row`而是迭代每个：

```
var $divItems = $( "<div/>", {
    "class" : "items"
});

$(data).find("Row").each(function(i, item) {
    var heures = $(item).attr("Dim1");
    var nbr = $(item).attr("Metric1");
    $divItems.clone()
        .html('<a href="' + heures + '">' + nbr + '</a>')
        .appendTo("#xml");
}); 
```

这是一个**[演示](http://jsfiddle.net/vjsqw/)**。

# java - 在 Java 中加载资源

> ID：12597306
> 
> 赞同：0
> 
> 时间：2012-09-26T08:10:42.847
> 
> 标签：java

关于的一个简单问题`class.getResource("path")`。路径是否根据班级位置？有人告诉我看看 ClassLoader，但我什么也没得到。如何获取根目录上的文件（如果可以在任何地方搜索，除了键入绝对路径）。感谢任何回复。

```
try
{
    image = ImageIO.read(Images.class.getResourceAsStream(imageName));
    BufferedImage img = new BufferedImage(image.getWidth(), image.getHeight(), BufferedImage.TYPE_INT_ARGB);
    Graphics g = img.getGraphics();
    g.drawImage(image, 0, 0, null);
    g.dispose();
    image = img;
}
catch (IOException e)
{
    e.printStackTrace();
    return null;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T08:14:11.770

在 java 应用程序中加载资源文件的方法有很多。sun 推荐的是使用`Class.getResource("resource_name")`，否则`Class.getResourceAsStream("resource_name")`您将分别获得 URL 和 InputStream。如果没有指定 resource_name `/`，它将在 Class 包之前添加。所以资源文件必须与类在同一个地方[文件夹结构]。我喜欢做的是调用资源文件`getResource()`并将`/`其放在包的根目录下。

```
this.getClass().getResource("/resource/buttons1.png") 
```

或者

```
this.getClass().getResourceAsStream("/resource/TX_Jello2.ttf") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:15:11.110

在你的情况下：

```
Images.class.getResourceAsStream("/" + fileName) 
```

将返回一个由相对于类根文件夹指定的`InputStream`一个。因此，如果您的类在一个包中（文件夹将是 com/company），则该文件（如果这只是一个文件名）将位于与“com”文件夹相同的文件夹中。`File``imageName``com.company``imageName`

# erlang - Erlang错误代码，需要更多细节

> ID：12597308
> 
> 赞同：3
> 
> 时间：2012-09-26T08:10:47.147
> 
> 标签：erlang

我正在尝试在 erlang 中使用 file:open(....) 函数，但它似乎不起作用。我不断收到 {error, eio} 异常。

我已经在 erlang 文档中查看了它，我发现它是输入/输出的 posix 错误......去图。

我输出的文件名是“C：/directory/file.txt”的格式我不确定这是否与它有关。

无论如何我可以让erlang给我一个更具体的解释是什么错了吗？

谢谢，杰克

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T08:53:31.247

不幸的是，我不知道如何在不窥视 Erlang/VM 的情况下找到更多信息。

如果您查看 windows erlang 源代码，则会出现许多不同的错误，这些错误可能会导致 en eio 错误。您可以在[此处](https://github.com/erlang/otp/blob/maint/erts/emulator/drivers/win32/win_efile.c#L155)找到它们的列表。为了弄清楚它是哪个特定的，我会附上 windbg 并逐步执行代码，因为在 Windows 上检测和重新编译它是一种痛苦。

您可能还可以使用[Process Monitor](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)之类的工具来找出正在进行的系统调用以及它们返回的内容。

# apache - htaccess mod_rewrite 中的 if/else 和 file_exists 函数

> ID：12597310
> 
> 赞同：0
> 
> 时间：2012-09-26T08:10:52.160
> 
> 标签：apache, .htaccess, mod-rewrite, xampp, lamp

我真的不知道如何解释这种情况，但我试一试。所以，我有这个网址： **http://localhost/static/some_picture.png**，我的文件夹看起来像这样：

*   静态/x/picture.png
*   静态/y/logo.png

我想要的是，如果用户键入提到的 url，他将看到“statics/x/picture.png”中的“picture.png”，但如果他键入**http://localhost/static/some_logo。 png**然后他将在“statics/y/logo.png”中看到“logo.png”。

我的最后一次尝试：

```
RewriteEngine On
RewriteCond statics/x/$1 -f
RewriteRule ^static/some_(.*)$ statics/x/$1  [L]

RewriteEngine On
RewriteCond statics/y/$1 -f
RewriteRule ^static/some_(.*)$ statics/y/$1  [L] 
```

目前我有这个.htaccess：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteRule %{REQUEST_FILENAME} ^static/some_(.*)$
RewriteCond %{DOCUMENT_ROOT}/statics/x/%1 -f
RewriteRule ^static/some_(.*)$ statics/x/$1  [L]

RewriteEngine On
RewriteRule %{REQUEST_FILENAME} ^static/some_(.*)$
RewriteCond %{DOCUMENT_ROOT}/statics/y/%1 -f
RewriteRule ^static/some_(.*)$ statics/y/$1  [L]

RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ index.php [QSA,L]
</IfModule> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:03:16.480

您可以尝试以下方法；

```
RewriteEngine On
RewriteRule %{REQUEST_FILENAME} ^static/some_(.*)$
RewriteCond %{DOCUMENT_ROOT}/statics/x/%1 -f
RewriteRule ^static/some_(.*)$ statics/x/$1  [L]

RewriteEngine On
RewriteRule %{REQUEST_FILENAME} ^static/some_(.*)$
RewriteCond %{DOCUMENT_ROOT}/statics/y/%1 -f
RewriteRule ^static/some_(.*)$ statics/y/$1  [L] 
```

诀窍是使用[RewriteCond 反向引用](http://httpd.apache.org/docs/2.0/mod/mod_rewrite.html#rewritecond)（语法类似于`%1`）来匹配前一个 RewriteCond 上的分组部分。

另外，感谢**Jon Lin**注意到 RewriteCond`-f`选项需要一个绝对本地路径。

**更新**：将 %{DOCUMENT_ROOT} 添加到 RewriteCond -f ，由**Jon Lin发现**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T09:02:39.113

你走在正确的轨道上，但你的`-f`条件不对。

尝试：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} ^/static/some_(.*)$
RewriteCond %{DOCUMENT_ROOT}/statics/x/%1 -f
RewriteRule ^ /statics/x/%1  [L]

RewriteCond %{REQUEST_URI} ^/static/some_(.*)$
RewriteCond %{DOCUMENT_ROOT}/statics/y/%1 -f
RewriteRule ^ /statics/y/%1  [L] 
```

# datetime - 如何使用 MonoTouch 以短时间格式将 DateTime 格式化为本地用户区域设置

> ID：12597317
> 
> 赞同：5
> 
> 时间：2012-09-26T08:11:15.257
> 
> 标签：datetime, xamarin.ios, nsdateformatter

我尝试了多种方法，这是其中之一：

```
System.Globalization.DateTimeFormatInfo format = System.Globalization.CultureInfo.CurrentCulture.DateTimeFormat;      
return dt.Value.ToString (format.ShortTimePattern); 
```

这个问题是 .NET 3.5 返回一个“。” 作为最有可能是错误的时间分隔符（因为我的挪威语言环境使用冒号） [：.NET（3.5）使用点而不是冒号格式化时间作为 IT 文化的 TimeSeparator？](https://stackoverflow.com/questions/7498058/net-3-5-formats-times-using-dots-instead-of-colons-as-timeseparator-for-it-it)

我也看过这里： [在 iPhone 上检索当前本地时间？](https://stackoverflow.com/questions/566265/retrieving-current-local-time-on-iphone)

但是 MT 在 NSDateFormatter 上似乎没有 setTimeStyle？

那么，有人有什么神奇的技巧吗？

我的目标是输出：

晚上 21:00 / 晚上 9:00

上午 10:09 / 10:09

就像 iPhone 中的状态栏一样。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T09:38:49.830

试试这个：

```
var formatter = new NSDateFormatter ();
formatter.TimeStyle = NSDateFormatterStyle.Short;
Console.WriteLine (formatter.ToString (DateTime.Now)); 
```

也就是说，使用点/冒号作为挪威语言环境的时间分隔符的错误已在 Mono 2.12 中得到修复，因此当 MonoTouch 切换到使用 Mono 2.12 而不是 Mono 2.10 时（希望在明年年初），您将能够使用这个托管替代方案也：

```
Console.WriteLine (DateTime.Now.ToString (new CultureInfo ("nb-NO").DateTimeFormat.ShortTimePattern)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T09:38:23.530

我对单声道源进行了小型研究，发现 ShortTimePattern 和 TimeSeperator 彼此[不相关](https://github.com/mono/mono/blob/master/mcs/class/corlib/System.Globalization/DateTimeFormatInfo.cs)（如果我错了，请 Mono-guru 纠正我）。

因此，我尝试制作仅限 iOS（而非跨平台）的解决方案。那就是：

```
using MonoTouch.Foundation;
    ...
    public override void ViewDidLoad ()
    {
        base.ViewDidLoad ();

        var d = DateTime.Now;
        Console.WriteLine("NSDate: " + GetCorrectTime(d));
    }
    ...
        // iOS-only (not cross-platform)
    public string GetCorrectTime (DateTime d)
    {
        var nsdate = DateTimeToNSDate(d);
        var nsdateformatter = new .NSDateFormatter();
        nsdateformatter.DateStyle = NSDateFormatterStyle.None;
        nsdateformatter.TimeStyle = NSDateFormatterStyle.Short;
        return nsdateformatter.ToString(nsdate);
    }
    ...
        // DateTime to NSDate was taken from [that post][2]
    public static NSDate DateTimeToNSDate(DateTime date)
    {
        return NSDate.FromTimeIntervalSinceReferenceDate((date-(new DateTime(2001,1,1,0,0,0))).TotalSeconds);
    } 
```

输出：

```
NSDate: 17:40 
```

请注意，我将使用模拟器和“nn-NO”（挪威尼诺斯克（挪威））语言环境对其进行测试。

# iphone - iPhone 通话屏幕备注

> ID：12597320
> 
> 赞同：0
> 
> 时间：2012-09-26T08:11:25.387
> 
> 标签：iphone, objective-c, ios, cordova, phonegap-plugins

我想在 iPhone 的通话屏幕上显示有关来电号码的特别说明。

例如，我将 Jane 作为联系人保存在 iPhone 上的通讯录中。我还有一个与 Jane 的联系人相关的便笺，假设该便笺是“牙医”。
现在，如果我接到简的电话，我应该能够在通话屏幕上看到“牙医”。

我目前正在使用 PhoneGap 框架。我一直在寻找它，但没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T08:17:13.303

不，您无法影响未越狱 iPhone 电话中联系人的显示方式。信息仅取自地址簿。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:34:41.080

这在未越狱的 iPhone 上是不可能的。但是您可以通过其他方式实现它，例如便笺应用程序的工作方式，

1.  要求用户创建注释
2.  从用户设计的笔记生成图像（使用代码）
3.  最后要求用户将图像分配给联系人。

# sql - SQL select case when 子句

> ID：12597328
> 
> 赞同：2
> 
> 时间：2012-09-26T08:12:01.410
> 
> 标签：sql, oracle, plsql, case

以下是查询

```
select *,  "Price Range" = 
  CASE 
     WHEN ListPrice =  0 THEN 'Mfg item - not for resale'
     WHEN ListPrice < 50 THEN 'Under $50'
     WHEN ListPrice >= 50 and ListPrice < 250 THEN 'Under $250'
     WHEN ListPrice >= 250 and ListPrice < 1000 THEN 'Under $1000'
     ELSE 'Over $1000'
  END
  FROM Production.Product
      ORDER BY ProductNumber 
```

但是有SQL错误，FROM之前缺少重要的单词。

`case`如果我想选择所有列，我们使用的蓝图是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T08:23:14.273

试试这个

```
select *, 
  CASE 
     WHEN ListPrice =  0 THEN 'Mfg item - not for resale'
     WHEN ListPrice < 50 THEN 'Under $50'
     WHEN ListPrice >= 50 and ListPrice < 250 THEN 'Under $250'
     WHEN ListPrice >= 250 and ListPrice < 1000 THEN 'Under $1000'
     ELSE 'Over $1000'
  END AS [Price Range]
  FROM Production.Product
      ORDER BY ProductNumber 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-26T08:15:54.097

把列名放在end之后，你的查询不对，应该是

```
SELECT p.ProductName, 
  CASE 
     WHEN ListPrice =  0 THEN 'Mfg item - not for resale'
     WHEN ListPrice < 50 THEN 'Under $50'
     WHEN ListPrice >= 50 and ListPrice < 250 THEN 'Under $250'
     WHEN ListPrice >= 250 and ListPrice < 1000 THEN 'Under $1000'
     ELSE 'Over $1000'
  END AS Price_Range
FROM Product p 
```

但是您的产品和客户之间是否存在联系

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T08:12:51.300

我认为`alias`应该在`Oracle`. 试试这个，

```
SELECT  *  ,
        CASE 
            WHEN ListPrice =  0 THEN 'Mfg item - not for resale'
            WHEN ListPrice < 50 THEN 'Under $50'
            WHEN ListPrice >= 50 and ListPrice < 250 THEN 'Under $250'
            WHEN ListPrice >= 250 and ListPrice < 1000 THEN 'Under $1000'
            ELSE 'Over $1000'
        END AS "Price Range"
FROM    Production.Product
ORDER BY ProductNumber 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T08:15:09.377

你为什么选择`from customer`？

```
select *, 
  CASE  
     WHEN ListPrice =  0 THEN 'Mfg item - not for resale' 
     WHEN ListPrice < 50 THEN 'Under $50' 
     WHEN ListPrice >= 50 and ListPrice < 250 THEN 'Under $250' 
     WHEN ListPrice >= 250 and ListPrice < 1000 THEN 'Under $1000' 
     ELSE 'Over $1000' 
  END as [Price Range]
  FROM Production.Product 
      ORDER BY ProductNumber 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-26T08:20:22.693

它应该是：

```
 select *, "Price Range" = 
 CASE 
    WHEN ListPrice =  0 THEN 'Mfg item - not for resale'
    WHEN ListPrice < 50 THEN 'Under $50'
    WHEN ListPrice >= 50 and ListPrice < 250 THEN 'Under $250'
    WHEN ListPrice >= 250 and ListPrice < 1000 THEN 'Under $1000'
 ELSE 'Over $1000'
 END
    FROM Production.Product
    ORDER BY ProductNumber 
```

# javascript - 如何同时保存从数据库中检索到的所有记录？

> ID：12597333
> 
> 赞同：0
> 
> 时间：2012-09-26T08:12:21.107
> 
> 标签：javascript, asp-classic

我有一个工资计算表格，它从从数据库中检索工资总和开始，然后在用户添加一些额外的付款以计算净工资后，再次将它们保存回数据库。

我的问题是我的代码一次只能保存一条记录。我需要的是能够同时保存所有记录。所以你能帮帮我吗？

```
<%
if Rs.eof then 
    response.write "<tr><td colspan=""9"">&nbsp;"
    call displayNotFoundRecord
    response.write "</td></tr>"
Else

    Do while Rs.AbsolutePage = strPageCurrent And Not Rs.EOF
    dim color 

            y = n mod 2
                if y > 0 then
                    color =  "EFF4FA"
                else 
                    color = "ffffff"
                end if                  

    if rs.fields.item("if_social_sec") = "True"  then
        displaytxt = "" 
        soc_sec_v = soc_sec
    else
        displaytxt = "none"
        soc_sec_v = 0
    end if 

    wage_v = rs.fields.item("Total")
    salary_v = rs.fields.item("lb_salary")

    if rs.fields.item("lb_type") = "perunit"  then
        salary_wage = wage_v
        displaytxt_w = "readonly class=""bgdisable""" 
        displaytxt_lb = "readonly class=""bgdisable"""      
    else
        salary_wage = salary_v
        displaytxt_w = ""
        displaytxt_lb = ""      
    end if

if_pm = request.form("if_pm")

pm_pay = rs.fields.item("lb_pmPay") 
    if if_pm <> "" then
        if_pm_v = pm_pay   
        disable_txt_pm = "readonly"     
    else
        if_pm_v = 0 
        disable_txt_pm = "readonly class=""bgdisable""" 
    end if  

%>
<form name="myform2_<%=n%>" action="salary_action.asp" method="POST">
<tr bgcolor="#<%=color%>"> 
<td class="btline difcursor" nowrap  width="7%">&nbsp;<%=rs.fields.item("lb_name")%></td>
<td class="btline center"  nowrap  width="8%"><input type="text" name="working_day" id="working_day" value="<%=rs.fields.item("MaxOfdays")%>" size="7" <%=displaytxt_w%> onFocus="startCalc(this);" onBlur="stopCalc(this);"></td>
<td class="btline "  nowrap width="10%"><input type="text" name="wage" id="wage" value="<%=salary_wage%>"  onFocus="startCalc(this);" onBlur="stopCalc(this);"></td>
<td class="btline center"  nowrap  width="8%"><input type="text" name="OT" id="OT" size="7" value="<%=if_OT_v%>" onFocus="startCalc(this);" onBlur="stopCalc(this);" <%=disabled_ot%>></td>
<td class="btline center" nowrap  width="6%" ><input type="text"  name="OT_rate" id="OT_rate" size="5" value="<%=rs.fields.item("lbOT")%>" <%'=disabled_txt%> readonly class="bgdisable"></td>
<td class="btline center" nowrap  width="6%" ><input type="text" name="OT_amt" id="OT_amt" size="5" value="" <%'=disabled_txt%>  readonly class="bgdisable"></td>
<td class="btline center" nowrap  width="8%"  ><input type="text" name="soc_sec" id="soc_sec" size="7" value="<%=soc_sec_v%>" <%=disable_txt_soc%> onFocus="startCalc(this);" onBlur="stopCalc(this);"></td>
<td class="btline center"  nowrap  width="8%"><input type="text" name="pmPay" id="pmPay" size="7" value="<%=if_pm_v%>" onFocus="startCalc(this);" onBlur="stopCalc(this);" <%'=disable_txt_pm%> readonly class="bgdisable"></td>
<td class="btline" nowrap style="padding-left: 10px" width="8%" ><input type="text" name="ex_pay" id="ex_pay" size="7" onFocus="startCalc(this);" onBlur="stopCalc(this);"></td>
<td class="btline bold " width="10%"><input type="text" name="net_wage" id="net_wage" size="7"  readonly class="bgdisable">
<input type="hidden" name="lb_type" id="lb_type" size="7" value="<%=rs.fields.item("lb_type")%>">
<input type="hidden" name="date_from" id="date_from" size="7" value="<%=date_from_txt%>">
<input type="hidden" name="date_to" id="date_to" size="7" value="<%=date_to_txt%>">
<input type="hidden" name="lb_id" id="lb_id" size="7" value="<%=rs.fields.item("lb_id")%>">
<input type="hidden" value="N" name="edit_salary">
</td>
<td class="btline"><input type="text" name="sar_note"  value="" size="14"></td>
<td class="btline"   > <input type="submit" value="Save1"></td>
</tr>

</form>
<%
        Rs.movenext
        n = n + 1       
    Loop
End if
Rs.close

set Rs=nothing
Call DBConnClose()
%>

<tr>
    <td colspan="12" align="center" style="padding:10px;">
            <input type="submit" value="Save2">
    </td>
</tr> 
```

我需要的是让“Save2”工作。但现在只有“Save1”有效。

添加（我的脚本）：

```
<script>
var intervals = {};
function startCalc(sender){ 
  var key = sender.form.name;
  intervals[key] = setInterval(function() {
    calc(key);
  },1);
}
function calc(key){
  var oForm = document.forms[key];

working_day = oForm.working_day.value;

  wage = oForm.wage.value;
  lb_type_v = oForm.lb_type.value;

    if (lb_type_v == "daily")
    {
        wage = wage * working_day;
    }
    else
    {
        wage = wage;
    }

  OT_rate = oForm.OT_rate.value;
  OT = oForm.OT.value; 
      OT_amt = OT_rate * OT;
  soc_sec = oForm.soc_sec.value; 
  ex_pay= oForm.ex_pay.value; 
  pmPay = oForm.pmPay.value; 

 net_wage = (wage * 1) + (OT_amt * 1) - (soc_sec * 1) + (ex_pay * 1) + (pmPay * 1);

  oForm.OT_amt.value = OT_amt;
  oForm.net_wage.value = net_wage.toFixed(2);
}

function stopCalc(sender){
  var key = sender.form.name;
  clearInterval(intervals[key]);
}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T11:33:09.513

在您的循环中，您必须更改每个输入名称以使其唯一。您还应该更改 ID 以使其唯一，具体取决于您对 ID 执行的操作，但如果一次性检索所有记录值，则名称很重要。

最简单的方法是将您的数据库 ID 添加到名称和 ID。

因此，例如，更改此行...

```
<td class="btline center"  nowrap  width="8%"><input type="text" name="OT" id="OT" size="7" value="<%=if_OT_v%>" onFocus="startCalc(this);" onBlur="stopCalc(this);" <%=disabled_ot%>></td> 
```

...到...

```
<td class="btline center"  nowrap  width="8%"><input type="text" name="OT_<%=rs.fields.item("lb_id")%>" id="OT_<%=rs.fields.item("lb_id")%>" size="7" value="<%=if_OT_v%>" onFocus="startCalc(this);" onBlur="stopCalc(this);" <%=disabled_ot%>></td> 
```

（这样做是通过添加下划线字符和数据库中的 lb_id 值使每个名称和 id 唯一。）

然后在您检索值的脚本中（您没有发布此代码，所以我不确定它是什么样子），您将需要打开相同的记录集并循环检查值。

所以在你可能有这样的台词之前...

x = 请求（“OT”）

你会做这样的事情......

```
'Open your recordset
Do while Rs.AbsolutePage = strPageCurrent And Not Rs.EOF
    x = Request("OT_" & Rs("lb_id"))
    '....all your other requests here
    'save to database here etc etc
Loop 
```

好的，这是您修改的代码（查看评论以了解我在哪里移动和删除了东西）...

```
<!--move form tag outside of table-->
<form name="myform2" action="salary_action.asp" method="POST"> 
<% 
if Rs.eof then  
    response.write "<tr><td colspan=""9"">&nbsp;" 
    call displayNotFoundRecord 
    response.write "</td></tr>" 
Else 

    Do while Rs.AbsolutePage = strPageCurrent And Not Rs.EOF 
    dim color  

            y = n mod 2 
                if y > 0 then 
                    color =  "EFF4FA" 
                else  
                    color = "ffffff" 
                end if                   

    if rs.fields.item("if_social_sec") = "True"  then 
        displaytxt = ""  
        soc_sec_v = soc_sec 
    else 
        displaytxt = "none" 
        soc_sec_v = 0 
    end if  

    wage_v = rs.fields.item("Total") 
    salary_v = rs.fields.item("lb_salary") 

    if rs.fields.item("lb_type") = "perunit"  then 
        salary_wage = wage_v 
        displaytxt_w = "readonly class=""bgdisable"""  
        displaytxt_lb = "readonly class=""bgdisable"""       
    else 
        salary_wage = salary_v 
        displaytxt_w = "" 
        displaytxt_lb = ""       
    end if 

if_pm = request.form("if_pm") 

pm_pay = rs.fields.item("lb_pmPay")  
    if if_pm <> "" then 
        if_pm_v = pm_pay    
        disable_txt_pm = "readonly"      
    else 
        if_pm_v = 0  
        disable_txt_pm = "readonly class=""bgdisable"""  
    end if   

%> 
<!--form tag moved outside of table-->
<tr bgcolor="#<%=color%>">  
<td class="btline difcursor" nowrap  width="7%">&nbsp;<%=rs.fields.item("lb_name")%></td> 
<td class="btline center"  nowrap  width="8%"><input type="text" name="working_day_<%=rs.fields.item("lb_id")%>" id="working_day_<%=rs.fields.item("lb_id")%>" value="<%=rs.fields.item("MaxOfdays")%>" size="7" <%=displaytxt_w%> onFocus="startCalc(<%=rs.fields.item("lb_id")%>);" onBlur="stopCalc(<%=rs.fields.item("lb_id")%>);"></td> 
<td class="btline "  nowrap width="10%"><input type="text" name="wage_<%=rs.fields.item("lb_id")%>" id="wage_<%=rs.fields.item("lb_id")%>" value="<%=salary_wage%>"  onFocus="startCalc(<%=rs.fields.item("lb_id")%>);" onBlur="stopCalc(<%=rs.fields.item("lb_id")%>);"></td> 
<td class="btline center"  nowrap  width="8%"><input type="text" name="OT_<%=rs.fields.item("lb_id")%>" id="OT_<%=rs.fields.item("lb_id")%>" size="7" value="<%=if_OT_v%>" onFocus="startCalc(<%=rs.fields.item("lb_id")%>);" onBlur="stopCalc(<%=rs.fields.item("lb_id")%>);" <%=disabled_ot%>></td> 
<td class="btline center" nowrap  width="6%" ><input type="text"  name="OT_rate_<%=rs.fields.item("lb_id")%>" id="OT_rate_<%=rs.fields.item("lb_id")%>" size="5" value="<%=rs.fields.item("lbOT")%>" <%'=disabled_txt%> readonly class="bgdisable"></td> 
<td class="btline center" nowrap  width="6%" ><input type="text" name="OT_amt_<%=rs.fields.item("lb_id")%>" id="OT_amt_<%=rs.fields.item("lb_id")%>" size="5" value="" <%'=disabled_txt%>  readonly class="bgdisable"></td> 
<td class="btline center" nowrap  width="8%"  ><input type="text" name="soc_sec_<%=rs.fields.item("lb_id")%>" id="soc_sec_<%=rs.fields.item("lb_id")%>" size="7" value="<%=soc_sec_v%>" <%=disable_txt_soc%> onFocus="startCalc(<%=rs.fields.item("lb_id")%>);" onBlur="stopCalc(<%=rs.fields.item("lb_id")%>);"></td> 
<td class="btline center"  nowrap  width="8%"><input type="text" name="pmPay_<%=rs.fields.item("lb_id")%>" id="pmPay_<%=rs.fields.item("lb_id")%>" size="7" value="<%=if_pm_v%>" onFocus="startCalc(<%=rs.fields.item("lb_id")%>);" onBlur="stopCalc(<%=rs.fields.item("lb_id")%>);" <%'=disable_txt_pm%> readonly class="bgdisable"></td> 
<td class="btline" nowrap style="padding-left: 10px" width="8%" ><input type="text" name="ex_pay_<%=rs.fields.item("lb_id")%>" id="ex_pay_<%=rs.fields.item("lb_id")%>" size="7" onFocus="startCalc(<%=rs.fields.item("lb_id")%>);" onBlur="stopCalc(<%=rs.fields.item("lb_id")%>);"></td> 
<td class="btline bold " width="10%"><input type="text" name="net_wage_<%=rs.fields.item("lb_id")%>" id="net_wage_<%=rs.fields.item("lb_id")%>" size="7"  readonly class="bgdisable"> 
<input type="hidden" name="lb_type_<%=rs.fields.item("lb_id")%>" id="lb_type_<%=rs.fields.item("lb_id")%>" size="7" value="<%=rs.fields.item("lb_type")%>"> 
<input type="hidden" name="date_from_<%=rs.fields.item("lb_id")%>" id="date_from_<%=rs.fields.item("lb_id")%>" size="7" value="<%=date_from_txt%>"> 
<input type="hidden" name="date_to_<%=rs.fields.item("lb_id")%>" id="date_to_<%=rs.fields.item("lb_id")%>" size="7" value="<%=date_to_txt%>"> 
<input type="hidden" name="lb_id_<%=rs.fields.item("lb_id")%>" id="lb_id_<%=rs.fields.item("lb_id")%>" size="7" value="<%=rs.fields.item("lb_id")%>"> 
<input type="hidden" value="N" name="edit_salary_<%=rs.fields.item("lb_id")%>"> 
</td> 
<td class="btline"><input type="text" name="sar_note"  value="" size="14"></td> 
<td class="btline"   > <!--submit button removed--></td> 
</tr> 

<!--form tag removed-->
<% 
        Rs.movenext 
        n = n + 1        
    Loop 
End if 
Rs.close 

set Rs=nothing 
Call DBConnClose() 
%> 

<tr> 
    <td colspan="12" align="center" style="padding:10px;"> 
            <input type="submit" value="Save2"> 
    </td> 
</tr> 

<!--move form tag after end of table-->
</form> 
```

...和您的 JavaScript（我只是在记事本中完成了它，所以希望它可以工作）...

```
<script> 
var intervals = {}; 
function startCalc(key){  
  intervals[key] = setInterval(function() { 
    calc(key); 
  },1); 
} 
function calc(key){ 
 // var oForm = document.forms[key]; 

working_day = document.getElementById("working_day_" + key).value; //oForm.working_day.value; 

  wage = document.getElementById("wage_" + key).value; //oForm.wage.value; 
  lb_type_v = document.getElementById("lb_type_" + key).value; //oForm.lb_type.value; 

    if (lb_type_v == "daily") 
    { 
        wage = wage * working_day; 
    } 
    else 
    { 
        wage = wage; 
    } 

  OT_rate = document.getElementById("OT_rate_" + key).value; //oForm.OT_rate.value; 
  OT = document.getElementById("OT_" + key).value; //oForm.OT.value;  
      OT_amt = OT_rate * OT; 
  soc_sec = document.getElementById("soc_sec_" + key).value; //oForm.soc_sec.value;  
  ex_pay= document.getElementById("ex_pay_" + key).value; //oForm.ex_pay.value;  
  pmPay = document.getElementById("pmPay_" + key).value; //oForm.pmPay.value;  

 net_wage = (wage * 1) + (OT_amt * 1) - (soc_sec * 1) + (ex_pay * 1) + (pmPay * 1); 

  document.getElementById("OT_amt_" + key).value = OT_amt; //oForm.OT_amt.value = OT_amt; 
  document.getElementById("net_wage_" + key).value = net_wage.toFixed(2); //oForm.net_wage.value = net_wage.toFixed(2); 
} 

function stopCalc(key){ 
  clearInterval(intervals[key]); 
} 
</script> 
```

您还需要修改表单提交到的页面。希望您可以使用我上面给出的说明来做到这一点？？？

# r - 非线性回归'abline'

> ID：12597344
> 
> 赞同：2
> 
> 时间：2012-09-26T08:12:52.393
> 
> 标签：r, regression, quadratic-curve

R 还是很新的（老实说统计数据），我目前只将它用于简单的线性回归模型。但现在我的一个数据集清楚地显示了倒 U 型图案。我想我必须对这些数据进行二次回归分析，但我不确定如何。到目前为止我尝试的是：

```
 independentvar2 <- independentvar^2
    regression <- lm(dependentvar ~ independentvar + independentvar2)
    summary (regression)
    plot (independentvar, dependentvar)
    abline (regression) 
```

虽然这适用于正常的线性回归，但不适用于非线性回归。我什至可以使用 lm 函数，因为我认为这意味着线性模型？

谢谢伯特

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T08:28:14.630

这个例子来自@Tom Liptrot的[这篇 SO 帖子。](https://stackoverflow.com/questions/4097831/get-quadratic-equation-term-of-a-graph-in-r)

```
plot(speed ~ dist, data = cars)
fit1 = lm(speed ~ dist, cars) #fits a linear model
plot(speed ~ dist, data = cars)
abline(fit1) #puts line on plot
fit2 = lm(speed ~ I(dist^2) + dist, cars) #fits a model with a quadratic term
fit2line = predict(fit2, data.frame(dist = -10:130)) 
```

![在此处输入图像描述](../Images/1be32369fb265adce5bd7951281e0073.png)

# api - 通过 LinkedIn API 获取网站上的所有信息

> ID：12597356
> 
> 赞同：0
> 
> 时间：2012-09-26T08:13:43.623
> 
> 标签：api, linkedin

我正在为 LinkedIn 开发一个应用程序。我想访问网站上所有可用的信息，但 API 没有返回其中的大部分。我想知道如何得到它们。

我可以使用屏幕抓取，但我想知道为什么当我可以在网站上轻松访问时 API 不返回信息？

例如[，此个人资料](http://www.linkedin.com/pub/pedro-dos-santos/1/811/b46)有许多教育信息并且是公开的，但没有通过 API 返回！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T23:29:21.577

LinkedIn API 旨在返回某些数据集，其中一些只能通过网站而不是 API 访问。

此外，抓取 LinkedIn 网站或其内容的任何部分都违反了 LinkedIn API 使用条款：[https ://developer.linkedin.com/documents/linkedin-apis-terms-use](https://developer.linkedin.com/documents/linkedin-apis-terms-use)

# javascript - 如何将 Javascript 对象保存到文件中？

> ID：12597364
> 
> 赞同：14
> 
> 时间：2012-09-26T08:14:24.997
> 
> 标签：javascript

我需要将复杂的 javascript 对象保存到文件中以供以后调查。这是一个非常大的对象，有 50 多个方法和属性。

我可以在 DOM 页面上的 Firefox-Firebug 中看到对象及其方法和属性（及其值），但我无法从那里将其保存到文件中。

我想用当前的属性值保存对象，而不是 HTML 文档。任何格式的文件 - HTML 或 JSON 或其他任何格式对我都有好处 :)

如何保存对象？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-26T08:40:00.120

嗯……你可以做一些事情，但我不能说有多丑。你可以做类似的事情

`JSON.stringify(my_big_javascript_object)`然后将生成的 JSON（纯文本）保存在文件中。

您可以稍后使用一些 JSON 查看器查看这些值，例如[http://jsonviewer.stack.hu/](http://jsonviewer.stack.hu/)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-12-14T20:03:53.640

现在可以使用 Blob API：

```
 function downloadObject(obj, filename){
    var blob = new Blob([JSON.stringify(obj, null, 2)], {type: "application/json;charset=utf-8"}).slice(2,-1);
    var url = URL.createObjectURL(blob);
    var elem = document.createElement("a");
    elem.href = url;
    elem.download = filename;
    document.body.appendChild(elem);
    elem.click();
    document.body.removeChild(elem);
  } 
```

您可以在此处阅读更多相关信息：[https ://developer.mozilla.org/en-US/docs/Web/API/Blob](https://developer.mozilla.org/en-US/docs/Web/API/Blob)

它要求您有一个带有实时 DOM 的网页，如果您正在调试页面上的 javascript，这应该可以工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-01-01T15:56:01.933

这对我很有效。

```
//Initialization of object to save
var objectToSave={first:'string', second: function(){}};
//Start of saving method
var textToSave='';//String to be saved
var count=0;
for(var i in objectToSave){
//Adding every key name + type + text value to string
textToSave+=objectToSave[i].constructor.name+' '+ Object.keys(objectToSave)[count]+' = '+objectToSave[i]+'\n';
count++;
}
//Saving string to file using html clicking trick
var hiddenElement = document.createElement('a');
hiddenElement.href = 'data:attachment/text,' + encodeURI(textToSave);
hiddenElement.target = '_blank';
hiddenElement.download = 'myFile.txt';
hiddenElement.click();
```

此方法的结果是保存带有文本的 txt 文件：

> 字符串优先 = 字符串
> 
> 函数第二 = 函数 (){}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T09:14:27.740

您可以使用 AJAX 将对象从您的页面传递到服务器端脚本，如下所示（jQuery）：

```
var ajax_object // Your object    

.ajax({
    type: "POST",
    url: "tofile.php",
    data: ajax_object,
}); 
```

然后使用服务器端脚本将其写入 HTML 文件（例如使用 PHP）：

```
// File: tofile.php

$ajax_object // Object, which You have passed using AJAX

ob_start();
print_r("<pre>".print_r($ajax_object, true)."</pre>");
$var = ob_get_contents();
ob_end_clean();
$fp = fopen('somefile.htm', 'w');
fputs($fp, $var);
fclose($fp); 
```

somefile.htm 中的输出类似于：

```
Some_Object Object
(
    [some_element] => 123
    [some_array] => Array
        (
            [element1] => 456
            [element2] => 789
            [element3] => 012
        )
) 
```

如果您想知道如何仅使用 Javascript 而不使用服务器端语言将您的对象保存到文件中，那么恐怕这是不可能的。

# c# - 创建 exe 应用程序时的 C# Xml 文件

> ID：12597365
> 
> 赞同：-1
> 
> 时间：2012-09-26T08:14:27.693
> 
> 标签：c#

我打算将我的 winform 构建成一个 .exe 文件。我只是想知道如何处理我的应用程序需要的 XML 文件？

我做了一些研究，发现我可以在创建 .exe 文件之前将 XML 文件添加到 Resource 文件夹中。
或者我需要创建一个安装文件？当用户运行安装文件时，XML 文件将被安装到他们的电脑中。
现在我想知道哪个是最好的方法，

**注意：**用户可能会修改 XML 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T08:18:39.473

如果您想将 XML 文件单独发送到 .EXE，则可以将“复制到输出目录”设置为“如果更新”则为“复制”。（单击文件，然后转到属性）。

或者，如果您希望它作为 .EXE 的一部分，我认为您可以将构建操作更改为嵌入式资源。

我个人会根据您的编辑创建一个设置并包含 XML 文件。我通常只是从 bin/release 文件夹中添加创建安装文件时所需的所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:16:33.750

您可以将必要的文件与可执行文件一起部署在同一文件夹中，也可以将它们作为资源嵌入（如果它们是只读的）。如果您需要修改它们，请不要将它们作为资源嵌入到可执行文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T08:19:49.313

正确的方法取决于您打算如何使用这些文件。如果文件始终与您的应用程序一起部署，应用程序从不向它们写入数据，并且在不升级应用程序的情况下它们永远不会升级，您可以将它们作为资源嵌入。

如果您需要与应用程序分开更新它们，则需要将它们作为物理文件。

您不一定需要安装包，除非您需要在安装过程中应用一些逻辑，例如根据用户输入更新安装内容或检查先决条件。无论您是否嵌入了文件，都可以将应用程序复制到位。

# python - Python用函数的输出替换字符串模式

> ID：12597370
> 
> 赞同：69
> 
> 时间：2012-09-26T08:14:50.583
> 
> 标签：python, regex

我在 Python 中有一个字符串，比如说`The quick @red fox jumps over the @lame brown dog.`

我试图用`@`一个以单词作为参数的函数的输出替换每个开头的单词。

```
def my_replace(match):
    return match + str(match.index('e'))

#Psuedo-code

string = "The quick @red fox jumps over the @lame brown dog."
string.replace('@%match', my_replace(match))

# Result
"The quick @red2 fox jumps over the @lame4 brown dog." 
```

有没有聪明的方法来做到这一点？

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2012-09-26T08:36:33.720

您可以将函数传递给[`re.sub`](http://docs.python.org/library/re.html#re.sub). 该函数将接收一个匹配对象作为参数，用于`.group()`将匹配提取为字符串。

```
>>> def my_replace(match):
...     match = match.group()
...     return match + str(match.index('e'))
...
>>> string = "The quick @red fox jumps over the @lame brown dog."
>>> re.sub(r'@\w+', my_replace, string)
'The quick @red2 fox jumps over the @lame4 brown dog.' 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-05-31T21:00:47.480

我不知道你可以将一个函数传递给一个`re.sub()`。根据@Janne Karila 的回答来解决我遇到的问题，该方法也适用于多个捕获组。

```
import re

def my_replace(match):
    match1 = match.group(1)
    match2 = match.group(2)
    match2 = match2.replace('@', '')
    return u"{0:0.{1}f}".format(float(match1), int(match2))

string = 'The first number is 14.2@1, and the second number is 50.6@4.'
result = re.sub(r'([0-9]+.[0-9]+)(@[0-9]+)', my_replace, string)

print(result) 
```

输出：

`The first number is 14.2, and the second number is 50.6000.`

这个简单的示例要求所有捕获组都存在（没有可选组）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-26T08:31:47.777

尝试：

```
import re

match = re.compile(r"@\w+")
items = re.findall(match, string)
for item in items:
    string = string.replace(item, my_replace(item) 
```

这将允许您用函数的输出替换以 @ 开头的任何内容。我不太清楚您是否也需要有关该功能的帮助。让我知道是否是这种情况

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-26T08:43:12.087

一个简短的正则表达式和减少：

```
>>> import re
>>> pat = r'@\w+'
>>> reduce(lambda s, m: s.replace(m, m + str(m.index('e'))), re.findall(pat, string), string)
'The quick @red2 fox jumps over the @lame4 brown dog.' 
```

# html - 带有“此站点”后缀的 Sharepoint 搜索

> ID：12597384
> 
> 赞同：0
> 
> 时间：2012-09-26T08:15:32.567
> 
> 标签：html, sharepoint, search

我正在尝试使用 CSS 以 HTML 格式创建一个团队网站（主要是指向其他来源的链接）。这部分进展顺利，但我想集成对我们的 SharePoint 网站的搜索，它包含 000 多个文档，这些文档非常便于访问。

成立：

```
<form method="get" action="<SharePoint-search-results-page-URL>">
<input name="k" type="text" />
<input name="Search" type="submit" value="Search" />
</form> 
```

(http://blogs.msdn.com/b/zwsong/archive/2010/02/16/how-to-create-a-html-search-box-for-sharepoint-search.aspx)

这是可行的，但是我们的 Sharepoint 设置方式实际上是在搜索整个文件数据库，而不仅仅是我们的子站点。我尝试更改 URL 以使其包含 sc 和 u 标志，这将使我得到相同的结果，但有一个“此站点”下拉列表。

提交搜索时，如何将搜索 url 与正确的后缀连接起来？

谢谢

# php - 未定义的索引

> ID：12597390
> 
> 赞同：-1
> 
> 时间：2012-09-26T08:15:44.883
> 
> 标签：php, mysql, html, css

> **可能重复：**
> [PHP：“注意：未定义的变量”和“注意：未定义的索引”](https://stackoverflow.com/questions/4261133/php-notice-undefined-variable-and-notice-undefined-index)

大家好，我在更新我的记录时遇到问题..当我单击编辑按钮时，它不会更新记录，但会为所有帖子变量提供以下错误..我非常感谢任何评论或帮助...

这是课程-edit.php

```
<?php include("../includes/config.php"); ?>
<?php

if ($_SESSION["isteacher"])
{

$con=mysql_connect($dbserver,$dbusername,$dbpassword);
if (!$con) { die('Could not connect: ' . mysql_error()); }

mysql_select_db($dbname, $con);
$courseid=$_GET["id"];
$result = mysql_query("SELECT * FROM courses WHERE (id='".$courseid."')");
while($row = mysql_fetch_array($result))
{
   $id=$row['id'];
   $title = $row['title'];
   $des = $row['description'];
   $subjectid = $row['subjects-id'];
}
mysql_close($con);
?>

<script type="text/javascript">
$(function() {
            $("form").validity(function() {
                $("#title")
                    .require("This Field Must Be Filled!!")
            });
        });
    </script>
<?php include("../includes/header.php"); ?>
<?php include("includes/nav.php"); ?>
<div id="maincontent">
<div class="span-24 last">
<div id="breadcrumbs">
    <a href="index.php">Home</a> >
     <a href="manage-courses.php">Manage Courses</a> >
     <a href="courses-list.php">List Courses</a> >
     Edit Course
</div>
</div>
<?php include("../teacher/includes/manage-courses-aside.php"); ?>
<div class="span-18 last">
<h2 class="alt">Edit Course</h2>

<form id="form" method="post" action="courses-edit-action.php">
<input type="hidden" value="<?php echo $courseid; ?>" name="id" />
 <label>Course Name:</label><input type="text" name="title" id="title" class="text"   value="<?php echo $title; ?>" /><br /><br />
<label>Choose Subject:</label>
<?php

$con=mysql_connect($dbserver,$dbusername,$dbpassword);
if (!$con) { die('Could not connect: ' . mysql_error()); }

mysql_select_db($dbname, $con);
$result = mysql_query("SELECT * FROM subjects");

echo "<select name='subjects-id'>\n";
while($row = mysql_fetch_array($result))
{
echo "<option value='".$row['id'] . "'";
if ($subjectid==$row['id'])
echo 'selected="selected"';
echo " >" . $row['subjectname'] . "</option>\n";
}
echo "</select>\n";
mysql_close($con);
?>
<label>Description:</label><textarea name="description" id="description"><?php echo    $des; ?></textarea><br /> <br />
    <input type="submit" value="Edit Course" class="button" />
</form>

<?php include("../includes/footer.php"); ?>
<?php
}
else
{
    header("Location: ".$fullpath."login/unauthorized.php");

}
?> 
```

这是课程-编辑-action.php

```
<?php include("../includes/config.php");?>
<?php

$id=$_POST["id"];
$title=$_POST["title"];
$des=$_POST["description"];
$subjectid=$_POST["subjects-id"];

$con=mysql_connect($dbserver,$dbusername,$dbpassword);
if (!$con) { die('Could not connect: ' . mysql_error()); }
mysql_select_db("ombts", $con);
$query=("UPDATE courses SET title='".$title."', description='".$des."', 'subjects-  id'='".$subjectid."' WHERE (id='".$id."')");
$query=mysql_query($query);
 if($result){
echo header("Location:manage-courses.php?status=2");
}
mysql_close($con);
?> 
```

警告是

```
Notice: Undefined index: id in C:\xampp\htdocs\project\teacher\courses-edit-action.php on line 4

Notice: Undefined index: title in C:\xampp\htdocs\project\teacher\courses-edit-action.php on line 5

Notice: Undefined index: description in C:\xampp\htdocs\project\teacher\courses-edit-action.php on line 6

Notice: Undefined index: subjects-id in C:\xampp\htdocs\project\teacher\courses-edit-action.php on line 7 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T08:20:00.143

您尝试访问

```
$id=$_POST["id"];
$title=$_POST["title"];
$des=$_POST["description"];
$subjectid=$_POST["subjects-id"]; 
```

这个 POST 变量。但是，当您第一次访问脚本时，不会在 POST 变量中设置此值。

[使用isset](http://php.net/manual/de/function.isset.php)检查值。

```
if(!isset($_POST["id"]) {
    $_POST["id"] = '';
} 
```

或将检查的值安全地保存在新变量中

```
$id = isset($_POST["id"]) ? $_POST["id"] : 0; 
```

例如。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T11:42:03.230

@Stony 的回答是检查您是否发送任何 POST 数据的好方法——如果没有，请不要尝试获取不存在的数据。

现在，如果您认为`$_POST["id"];`应该在那里，那么就缺少一些东西。你使用 GET 而不是 POST 吗？

要查看提交了哪些数据，请执行`print_r($_POST)`. 如果这是空白，请执行`print_r($_REQUEST)`. 如果这仍然是空白，则没有从前一页提交数据。

您也可以通过在您的 URL 中添加它来检查`&id=75`（或者`?id=75`如果您的 url 中没有其他参数）。这将提交数据，您将看到少一个错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T08:18:52.680

像这样修改你的脚本....

```
 $id= isset($_POST["id"]) ?$_POST["id"] : 0 ;
    $title= isset($_POST["title"]) ? $_POST["title"] : '' ;
    $des=isset($_POST["description"]) ? $_POST["description"] : '';
    $subjectid= isset($_POST["subjects-id"]) ? $_POST["subjects-id"] : ''; 
```

编辑另外，我在这里看到一个错误......

```
$query=mysql_query($query);
 if($result){ 
```

应该

```
$result=mysql_query($query);
 if($result){ 
```

如果您仍然无法更新表，请在执行 mysql_query 之前打印 $query 变量。告诉我你看到了什么，我会帮助你......

# wpf - 使用 ScrollViewer 时，DataGrid 中出现烦人的空额外列

> ID：12597392
> 
> 赞同：0
> 
> 时间：2012-09-26T08:15:54.307
> 
> 标签：wpf, datagrid, scrollviewer

首先，查看最后一列的宽度。这是 ”*”。

这是重现问题的 xaml：

```
<Window x:Class="DataGridStaredColumnTest.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:System="clr-namespace:System;assembly=mscorlib" Title="MainWindow" Height="350" Width="525">
    <Grid>
        <ScrollViewer HorizontalScrollBarVisibility="Auto">
            <Grid MinWidth="200" HorizontalAlignment="Stretch">
                <DataGrid AutoGenerateColumns="False" HorizontalAlignment="Stretch">
                    <DataGrid.Columns>
                        <DataGridTemplateColumn Header="1" Width="Auto">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="Column1" Background="Green"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTemplateColumn Header="2" Width="*">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBox Text="Column2" Background="Yellow" HorizontalAlignment="Stretch"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                    </DataGrid.Columns>

                    <DataGrid.Items>
                        <System:Int16>1</System:Int16>
                        <System:Int16>2</System:Int16>
                        <System:Int16>3</System:Int16>
                    </DataGrid.Items>
                </DataGrid>
            </Grid>
        </ScrollViewer>
    </Grid>
</Window> 
```

此处的滚动查看器肯定存在一些问题，因为如果禁用 Horizo​​ntalScrollbar，则一切正常。

我发现[这篇文章](http://wpf.codeplex.com/discussions/67058)与问题有关。然而，该解决方案包含另一个在窗口扩大后边框不断增长的错误。

有人知道如何杀死这个额外的列吗？

# python - Python 3 和 Python 2 之间的通信

> ID：12597394
> 
> 赞同：3
> 
> 时间：2012-09-26T08:15:57.857
> 
> 标签：python, python-3.x, python-2.x

在 Python 3.x 和 Python 2.x 程序之间进行通信的最佳方式是什么？

我们正在编写一个 Web 应用程序，其前端服务器将用 Python 3（CherryPy + uWSGI）编写，主要是因为它是 unicode 重应用程序，并且 Python 3.x 对 unicode 有更清晰的支持。

但是我们需要使用像 Redis 和 Boto（AWS 客户端）这样的系统，它们还没有 Python 3 支持。

因此，我们需要创建一个可以在 Python 3.x 和 2.x 程序之间进行通信的系统。

您认为最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T10:23:50.280

最好的方法？用 Python 2.x 编写所有内容。这是一个简单的问题：我可以在 Python 2.x 中做所有事情吗？是的！我可以在 Python 3.x 中做所有事情吗？不，那你有什么问题？

但是如果你真的，真的必须使用两个不同的 Python 版本（例如为什么不使用两种不同的语言？），那么你可能必须创建两个不同的服务器（它们同时是客户端），它们将通过 TCP/UDP 进行通信或您想要的任何协议。如果您考虑将来扩展应用程序，这实际上可能非常方便。虽然让我警告你：这根本不容易。

# c++ - 计算包含高维向量的两个矩阵之间的最小欧几里得距离的最快方法

> ID：12597397
> 
> 赞同：6
> 
> 时间：2012-09-26T08:16:09.203
> 
> 标签：c++, performance, opencv, matrix-multiplication, eigen

我在[另一个线程](https://stackoverflow.com/questions/12479663/cvmat-cv-8u-product-error-and-slow-cv-32f-product/12527400#12527400)上提出了一个类似的问题，但后来我专注于如何使用 OpenCV。未能达到我最初想要的，我将在这里确切地问我想要什么。

我有两个矩阵。矩阵 a 是 2782x128，矩阵 b 是 4000x128，都是 unsigned char 值。这些值存储在单个数组中。对于 a 中的每个向量，我需要 b 中具有最近欧几里德距离的向量的索引。

好的，现在我的代码来实现这一点：

```
#include <windows.h>
#include <stdlib.h>
#include <stdio.h>
#include <cstdio>
#include <math.h>
#include <time.h>
#include <sys/timeb.h>
#include <iostream>
#include <fstream>
#include "main.h"

using namespace std;

void main(int argc, char* argv[])
{
    int a_size;
    unsigned char* a = NULL;
    read_matrix(&a, a_size,"matrixa");
    int b_size;
    unsigned char* b = NULL;
    read_matrix(&b, b_size,"matrixb");

    LARGE_INTEGER liStart;
    LARGE_INTEGER liEnd;
    LARGE_INTEGER liPerfFreq;
    QueryPerformanceFrequency( &liPerfFreq );
    QueryPerformanceCounter( &liStart );

    int* indexes = NULL;
    min_distance_loop(&indexes, b, b_size, a, a_size);

    QueryPerformanceCounter( &liEnd );

    cout << "loop time: " << (liEnd.QuadPart - liStart.QuadPart) / long double(liPerfFreq.QuadPart) << "s." << endl;

    if (a)
    delete[]a;
if (b)
    delete[]b;
if (indexes)
    delete[]indexes;
    return;
}

void read_matrix(unsigned char** matrix, int& matrix_size, char* matrixPath)
{
    ofstream myfile;
    float f;
    FILE * pFile;
    pFile = fopen (matrixPath,"r");
    fscanf (pFile, "%d", &matrix_size);
    *matrix = new unsigned char[matrix_size*128];

    for (int i=0; i<matrix_size*128; ++i)
    {
        unsigned int matPtr;
        fscanf (pFile, "%u", &matPtr);
        matrix[i]=(unsigned char)matPtr;
    }
    fclose (pFile);
}

void min_distance_loop(int** indexes, unsigned char* b, int b_size, unsigned char* a, int a_size)
{
    const int descrSize = 128;

    *indexes = (int*)malloc(a_size*sizeof(int));
    int dataIndex=0;
    int vocIndex=0;
    int min_distance;
    int distance;
    int multiply;

    unsigned char* dataPtr;
    unsigned char* vocPtr;
    for (int i=0; i<a_size; ++i)
    {
        min_distance = LONG_MAX;
        for (int j=0; j<b_size; ++j)
        {
            distance=0;
            dataPtr = &a[dataIndex];
            vocPtr = &b[vocIndex];

            for (int k=0; k<descrSize; ++k)
            {
                multiply = *dataPtr++-*vocPtr++;
                distance += multiply*multiply;
                // If the distance is greater than the previously calculated, exit
                if (distance>min_distance)
                    break;
            }

            // if distance smaller
            if (distance<min_distance)
            {
                min_distance = distance;
                (*indexes)[i] = j;
            }
            vocIndex+=descrSize;
        }
        dataIndex+=descrSize;
        vocIndex=0;
    }
} 
```

并附有样本矩阵的文件。

[矩阵](https://dl.dropbox.com/u/1474325/matrixa) [a 矩阵b](https://dl.dropbox.com/u/1474325/matrixb)

我使用windows.h只是为了计算消耗时间，所以如果你想在windows以外的其他平台测试代码，只需更改windows.h头文件并改变计算消耗时间的方式。

我电脑中的这段代码大约是 0.5 秒。问题是我在 Matlab 中有另一个代码可以在 0.05 秒内完成同样的事情。在我的实验中，我每秒收到几个矩阵，比如矩阵 a，所以 0.5 秒太多了。

现在计算这个的matlab代码：

```
aa=sum(a.*a,2); bb=sum(b.*b,2); ab=a*b'; 
d = sqrt(abs(repmat(aa,[1 size(bb,1)]) + repmat(bb',[size(aa,1) 1]) - 2*ab));
[minz index]=min(d,[],2); 
```

好的。Matlab 代码使用的是 (xa)^2 = x^2 + a^2 - 2ab。

所以我的下一个尝试是做同样的事情。我删除了自己的代码以进行相同的计算，但大约是 1.2 秒。

然后，我尝试使用不同的外部库。第一次尝试是 Eigen：

```
const int descrSize = 128;
MatrixXi a(a_size, descrSize);
MatrixXi b(b_size, descrSize);
MatrixXi ab(a_size, b_size);

unsigned char* dataPtr = matrixa;
for (int i=0; i<nframes; ++i)
{
    for (int j=0; j<descrSize; ++j)
    {
        a(i,j)=(int)*dataPtr++;
    }
}
unsigned char* vocPtr = matrixb;
for (int i=0; i<vocabulary_size; ++i)
{
    for (int j=0; j<descrSize; ++j)
    {
        b(i,j)=(int)*vocPtr ++;
    }
}
ab = a*b.transpose();
a.cwiseProduct(a);
b.cwiseProduct(b);
MatrixXi aa = a.rowwise().sum();
MatrixXi bb = b.rowwise().sum();
MatrixXi d = (aa.replicate(1,vocabulary_size) + bb.transpose().replicate(nframes,1) - 2*ab).cwiseAbs2();

int* index = NULL;
index = (int*)malloc(nframes*sizeof(int));
for (int i=0; i<nframes; ++i)
{
    d.row(i).minCoeff(&index[i]);
} 
```

这个特征码的成本大约为 1.2，仅用于以下行： ab = a*b.transpose();

还使用了使用 opencv 的类似代码，并且 ab = a*b.transpose(); 的成本 为 0.65 秒。

所以，matlab 能够这么快地做同样的事情，而我在 C++ 中却做不到，这真的很烦人！当然，能够运行我的实验会很棒，但我认为缺乏知识才是真正让我烦恼的地方。我怎样才能达到至少与 Matlab 相同的性能？欢迎任何形式的解决方案。我的意思是，任何外部库（如果可能的话免费）、循环展开的东西、模板的东西、SSE 指令（我知道它们存在）、缓存的东西。正如我所说，我的主要目的是增加我的知识，以便能够以更快的性能编写这样的想法。

提前致谢

编辑：David Hammen 建议的更多代码。在进行任何计算之前，我将数组转换为 int 。这是代码：

```
void min_distance_loop(int** indexes, unsigned char* b, int b_size, unsigned char* a, int a_size)
{
    const int descrSize = 128;

    int* a_int;
    int* b_int;

    LARGE_INTEGER liStart;
    LARGE_INTEGER liEnd;
    LARGE_INTEGER liPerfFreq;
    QueryPerformanceFrequency( &liPerfFreq );
    QueryPerformanceCounter( &liStart );

    a_int = (int*)malloc(a_size*descrSize*sizeof(int));
    b_int = (int*)malloc(b_size*descrSize*sizeof(int));

    for(int i=0; i<descrSize*a_size; ++i)
        a_int[i]=(int)a[i];
    for(int i=0; i<descrSize*b_size; ++i)
        b_int[i]=(int)b[i];

    QueryPerformanceCounter( &liEnd );

    cout << "Casting time: " << (liEnd.QuadPart - liStart.QuadPart) / long double(liPerfFreq.QuadPart) << "s." << endl;

    *indexes = (int*)malloc(a_size*sizeof(int));
    int dataIndex=0;
    int vocIndex=0;
    int min_distance;
    int distance;
    int multiply;

    /*unsigned char* dataPtr;
    unsigned char* vocPtr;*/
    int* dataPtr;
    int* vocPtr;
    for (int i=0; i<a_size; ++i)
    {
        min_distance = LONG_MAX;
        for (int j=0; j<b_size; ++j)
        {
            distance=0;
            dataPtr = &a_int[dataIndex];
            vocPtr = &b_int[vocIndex];

            for (int k=0; k<descrSize; ++k)
            {
                multiply = *dataPtr++-*vocPtr++;
                distance += multiply*multiply;
                // If the distance is greater than the previously calculated, exit
                if (distance>min_distance)
                    break;
            }

            // if distance smaller
            if (distance<min_distance)
            {
                min_distance = distance;
                (*indexes)[i] = j;
            }
            vocIndex+=descrSize;
        }
        dataIndex+=descrSize;
        vocIndex=0;
    }
} 
```

整个过程现在是 0.6，开始的铸造循环是 0.001 秒。也许我做错了什么？

EDIT2：关于本征的任何信息？当我寻找外部库时，他们总是谈论 Eigen 及其速度。我做错了什么？这是一个使用 Eigen 的简单代码，表明它不是那么快。也许我缺少一些配置或一些标志，或者......

```
MatrixXd A = MatrixXd::Random(1000, 1000);
MatrixXd B = MatrixXd::Random(1000, 500);
MatrixXd X; 
```

这段代码大约是 0.9 秒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-22T09:50:29.467

正如您所观察到的，您的代码由代表大约 2.8e9 算术运算的矩阵乘积支配。Yopu 说 Matlab（或者更确切地说是高度优化的 MKL）在大约 0.05 秒内计算它。这代表 57 GFLOPS 的速率，表明它不仅使用矢量化，还使用多线程。`-fopenmp`使用 Eigen，您可以通过启用 OpenMP（使用 gcc）进行编译来启用多线程。在我 5 年前的计算机（2.66Ghz Core2）上，使用浮点数和 4 个线程，您的产品大约需要 0.053 秒，而没有 OpenMP 则需要 0.16 秒，所以您的编译标志肯定有问题。总而言之，要充分利用 Eigen：

*   64位模式编译
*   使用浮点数（由于矢量化，双打速度慢了一倍）
*   启用 OpenMP
*   如果你的 CPU 有超线程，那么要么禁用它，要么将`OMP_NUM_THREADS`环境变量定义为物理内核的数量（这很重要，否则性能会很差！）
*   如果您有其他任务正在运行，最好减少`OMP_NUM_THREADS`到`nb_cores-1`
*   尽可能使用最新的编译器，GCC、clang 和 ICC 最好，MSVC 通常较慢。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T09:22:50.693

~~在你的 C++ 代码中肯定会伤害你的一件事是它有大量的 char 到 int 的转换。装船时，我的意思是最多 2*2782*4000*128 char 到 int 的转换。那些`char`转换`int`很慢，非常慢。~~

您可以通过分配一对`int`数组（一个 2782*128 和另一个 4000*128）将其减少到 (2782+4000)*128 这样的转换，以包含您的`char* a`和`char* b`数组的转换为整数的内容。使用这些`int*`数组而不是您的`char*`数组。

~~另一个问题可能是您对`int`vs的使用`long`。我不在 Windows 上工作，所以这可能不适用。在我工作的机器上，`int`是 32 位，`long`现在是 64 位。32 位绰绰有余，因为 255*255*128 < 256*256*128 = 2 ^(23)。~~

**这显然不是问题。**

引人注目的是，有问题的代码并未计算 Matlab 代码正在创建的那个巨大的 2728 x 4000 数组。更引人注目的是，Matlab 最有可能使用双精度而不是整数来执行此操作——而且它仍然在 C/C++ 代码中脱颖而出。

一个大问题是缓存。那个 4000*128 数组对于 1 级缓存来说太大了，你正在迭代那个大数组 2782 次。您的代码在内存上等待太多了。要克服这个问题，请使用较小的`b`数组块，以便您的代码尽可能长时间地使用 1 级缓存。

另一个问题是优化`if (distance>min_distance) break;`。我怀疑这实际上是一种优化。在`if`最里面的循环中进行测试通常是个坏主意。尽可能快地冲破那个内积。除了浪费计算之外，摆脱这个测试并没有什么坏处。有时，如果这样做可以删除最内层循环中的分支，则最好进行明显不需要的计算。这是其中一种情况。**您可能只需消除此测试即可解决您的问题。**尝试这样做。

回到缓存问题，您需要摆脱这个分支，以便可以将`a`和`b`矩阵上的操作拆分成更小的块，一次不超过 256 行的块。这就是两个现代 Intel 芯片的 L1 缓存之一中有多少行 128 个无符号字符。由于 250 除以 4000，因此请考虑在逻辑上将该`b`矩阵拆分为 16 个块。您可能希望形成 2872 x 4000 的大内积数组，但要分小块进行。您可以将其`if (distance>min_distance) break;`重新添加，但在块级别而不是逐字节级别添加。

您应该能够击败 Matlab，因为它几乎可以肯定是使用双精度数，但您可以使用无符号字符和整数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T14:18:53.377

矩阵乘法通常对两个矩阵之一使用最差的缓存访问模式，解决方案是转置其中一个矩阵并使用专门的乘法算法来处理以这种方式存储的数据。

您的矩阵已转置存储。通过将其转换为正常顺序，然后使用正常矩阵相乘，您绝对会扼杀性能。

编写您自己的矩阵乘法循环，将索引的顺序反转到第二个矩阵（具有转置它的效果，而实际上没有移动任何东西并破坏缓存行为）。并通过您的编译器启用自动矢量化的任何选项。

# c# - Sql - 未连接到本地数据库

> ID：12597399
> 
> 赞同：0
> 
> 时间：2012-09-26T08:16:20.420
> 
> 标签：c#, sql, sql-server-2008, stored-procedures

我正在使用两个数据库。从服务器中的第一个数据库中，我使用存储过程将所有表插入到一个空数据库中的本地计算机中。

这是我的存储过程：

```
SET ANSI_NULLS ON
 GO
SET QUOTED_IDENTIFIER ON
GO
ALTER proc [dbo].[ImportScriptAndData]

@Branch int,
@MainServer varchar(20),
@LocalServer varchar(20),
@LocalDBName varchar(20),
@AuditType int

AS Begin

set nocount on;

-- Delete the master tables

-- dbo.AuditArea
print ('delete from ['+ @LocalServer +'].['+ @LocalDBName +'].[dbo].AuditArea')
exec  ('delete from ['+ @LocalServer +'].['+ @LocalDBName +'].[dbo].AuditArea')

-- Insert data into master tables

-- dbo.AuditArea
print ('insert into ['+ @LocalServer +'].[HDFCAudit].dbo.AuditArea
select * from ['+ @MainServer +'].[HDFCAudit].dbo.AuditArea')
exec ('insert into ['+ @LocalServer +'].['+ @LocalDBName +'].dbo.AuditArea
select * from ['+ @MainServer +'].['+ @LocalDBName +'].dbo.AuditArea')

End 
```

此存储过程位于服务器数据库上。

我在局域网上连接两台电脑。一个是服务器，另一个是客户端

在客户端应用程序上，当我想将所有表从服务器数据库转移到本地空数据库时，可以单击该按钮。

我的点击按钮代码是：

```
SqlConnection con = new SqlConnection(newConn);  //string newConn = "Data Source=Servername;Initial Catalog=Audit;uid=sa;pwd=admin@123";
            con.Open();
            SqlConnection conn = new SqlConnection(connectionstringLOCAL); //string connectionstringLOCAL = "Data Source=Clientname;Initial Catalog=Audit;uid=sa;pwd=admin@123";
            conn.Open();
            BranchCode = Convert.ToInt32(cboBranch.SelectedValue.ToString());
            MainServer = "Servername";
            LocalServer = "ClientName"; //express
            LocalDatabase = "Audit";
            AuditType = 1;
            SqlCommand cmd = new SqlCommand("dbo.ImportScriptAndData", con);
            cmd.CommandType = CommandType.StoredProcedure;
            cmd.Parameters.Add(new SqlParameter("@Branch", SqlDbType.Int)).Value = BranchCode;
            cmd.Parameters.Add(new SqlParameter("@MainServer", SqlDbType.VarChar)).Value = MainServer;
            cmd.Parameters.Add(new SqlParameter("@LocalServer", SqlDbType.VarChar)).Value = LocalServer;
            cmd.Parameters.Add(new SqlParameter("@LocalDBName", SqlDbType.VarChar)).Value = LocalDatabase;
            cmd.Parameters.Add(new SqlParameter("@AuditType", SqlDbType.Int)).Value = AuditType;
            //cmd.Parameters.AddWithValue("@Branch", BranchCode);
            //cmd.Parameters.AddWithValue("@MainServer", MainServer);
            //cmd.Parameters.AddWithValue("@LocalServer", LocalServer);
            //cmd.Parameters.AddWithValue("@LocalDBName", LocalDatabase);
            cmd.ExecuteNonQuery(); // **error on this line** 
```

我在这一行收到以下错误：

> 在 sys.servers 中找不到服务器“客户端名称”。验证是否指定了正确的服务器名称。如有必要，执行存储过程 sp_addlinkedserver 将服务器添加到 sys.servers。

现在做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T08:20:58.443

先查表

```
select * from sys.servers 
```

检查是否包含服务器名称“clientname”。

如果不是，您需要添加链接服务器来执行插入操作。这意味着在您的服务器计算机上，您必须添加客户端服务器名称作为链接服务器。

或者

您可以使用 C#.net **SqlBulkCopy**方法轻松执行数据传输。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T09:08:56.400

在两台服务器之间运行分布式查询。看到必须链接两个服务器。

```
USE master;
GO
EXEC sp_addlinkedserver 
   N'Other Server',
   N'SQL Server';
GO 
```

链接：http: [//msdn.microsoft.com/fr-fr/library/ms190479.aspx](http://msdn.microsoft.com/fr-fr/library/ms190479.aspx)

# java - Java中的非可重入非阻塞信号量

> ID：12597407
> 
> 赞同：2
> 
> 时间：2012-09-26T08:16:53.617
> 
> 标签：java, concurrency, semaphore, nonblocking

我需要一个具有以下功能的信号量：

1.  它应该是非阻塞的，即如果线程无法获得许可，它应该更进一步而无需等待
2.  它应该是不可重入的，即如果同一个线程两次进入受保护的代码段，它应该带走两个许可而不是一个

我写了以下代码：

```
public class SimpleSemaphore
{

    private int permits;

    private AtomicLong counter = new AtomicLong();

    SimpleSemaphore(int permits)
    {
        this.permits = permits;
    }

    boolean acquire()
    {

        if (counter.incrementAndGet() < permits)
        {
            return true;
        }
        else
        {
            counter.decrementAndGet();
            return false;
        }

    }

    void release()
    {
        counter.decrementAndGet();

    }
} 
```

另一种选择是这个信号量：

```
public class EasySemaphore
{

    private int permits;

    private AtomicLong counter = new AtomicLong();

    EasySemaphore(int permits)
    {
        this.permits = permits;
    }

    boolean acquire()
    {
        long index = counter.get();

        if (index < permits)
        {
            if (counter.compareAndSet(index, index + 1))
            {
                return true;
            }
        }

        return false;
    }

    void release()
    {
        counter.decrementAndGet();
    }
} 
```

这两种实现都是线程安全且正确的吗？哪一个更好？你将如何完成这项任务？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T08:22:03.473

不是[`java.util.concurrent.Semaphore`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Semaphore.html)已经做了这一切吗？

它有一个`tryAcquire`非阻塞获取，它维护一个简单的剩余许可计数（同一个线程可以取出多个许可）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:23:18.293

我会说第二个更好，因为计数器永远不会大于 0（并且它的效率略高）

我会使用一个循环，否则当仍然有许可时，你可以让方法失败。

```
public class EasySemaphore {
    private final AtomicInteger counter;

    EasySemaphore(int permits) {
        counter = new AtomicInteger(permits);
    }

    boolean acquire() {
        // highly unlikely to loop more than once.
        while(true) {
            int count = counter.get();
            if (count <= 0) return false;
            if (counter.compareAndSet(count, count -1)) 
                return true;
        }
    }

    void release() {
        counter.incrementAndGet();
    }
} 
```

# java - JPA 将简单字符串对象映射到 Oracle 日期类型？

> ID：12597411
> 
> 赞同：1
> 
> 时间：2012-09-26T08:17:10.343
> 
> 标签：java, jpa, orm, eclipselink

我有一个表，其中日期列存储为 varchar。在进行对象关系映射（我正在使用 eclipselink）时，我想将此字符串/varchar 映射到 java 中的 Date 对象。

我的桌子是：

```
T_BUSINESS
  TRAN_ID 号码，
  BUSINESS_DATE瓦查尔

```

我想选择业务日期在两个输入日期之间的所有行，这里的问题是因为 BUSINESS_DATE 是 varchar 我无法进行比较。我无法修改表，也不想使用本机 sql。

谁能告诉我我该怎么做。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:06:53.197

您可以使用 TypeConverter 来映射它，

看，

[http://www.eclipse.org/eclipselink/documentation/2.4/jpa/extensions/a_typeconverter.htm#CHDHCCJF](http://www.eclipse.org/eclipselink/documentation/2.4/jpa/extensions/a_typeconverter.htm#CHDHCCJF)

在查询中进行比较可能会更困难，我认为默认日期格式是 yyyy-mm-dd 因此 varchar 比较可能有效。否则，您确实需要数据库上的真实 DATE 字段。您可以使用数据库函数将 varchar 转换为 DATE 进行比较，例如使用 EclipseLink 支持的 CAST 或 FUNCTION 是 JPQL。

见， [http://www.eclipse.org/eclipselink/documentation/2.4/jpa/extensions/j_cast.htm#cast](http://www.eclipse.org/eclipselink/documentation/2.4/jpa/extensions/j_cast.htm#cast)

[http://www.eclipse.org/eclipselink/documentation/2.4/jpa/extensions/j_func.htm#func](http://www.eclipse.org/eclipselink/documentation/2.4/jpa/extensions/j_func.htm#func)

# c# - 如何从该表中正确提取记录？

> ID：12597414
> 
> 赞同：0
> 
> 时间：2012-09-26T08:17:15.450
> 
> 标签：c#, .net, algorithm, tsql, linq-to-sql

我有一个带有**DATE**字段的关联表：

```
|       DATE          |  USER_ID  | GROUP_ID   |
| 2012-09-20 00:00:00 |     7     |     1      |
| 2012-09-20 00:00:00 |     6     |     1      |
| 2012-09-13 00:00:00 |     5     |     1      |
| 2012-09-10 00:00:00 |     1     |     1      |
| 2012-09-02 00:00:00 |     5     |     3      |
| 2012-08-02 00:00:00 |     5     |     2      |
| 2012-07-01 00:00:00 |     5     |     1      |
| 2012-07-01 00:00:00 |     3     |     1      | 
```

每条记录代表一个用户和一个组之间的关联。每个关联从表中指示的日期开始有效，并保持不变，直到在表中插入新的关联。

要知道某个日期的用户组关联非常简单：只需选择最大日期 <= 比指定日期。

但现在**我需要提取与某个日期范围内的某个组关联的所有用户**。提供的参数是：**group_id**、**date_from**、**date_to**。

我必须用 Linq 来实现它，但我正在尝试使用 T-SQL 测试该过程。

这就是我尝试过的：

```
SELECT *
FROM user_group
where group_id = 1
and '2012-09-11' <= date
and date <= '2012-09-20'
UNION
SELECT TOP 1 *
FROM user_group
where group_id = 1
and date <= '2012-09-11'
order by date desc 
```

但显然它不起作用......

**笔记：**

主要困难是在**from_date**之前创建关联但仍然有效。为了清楚起见，我需要得到这个结果：

```
|       DATE          |  USER_ID  | GROUP_ID   |
| 2012-09-20 00:00:00 |     7     |     1      |
| 2012-09-20 00:00:00 |     6     |     1      |
| 2012-09-13 00:00:00 |     5     |     1      |
| 2012-09-10 00:00:00 |     1     |     1      |
| 2012-07-01 00:00:00 |     3     |     1      | 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T08:19:38.453

 ~~~~```
select * from user_group where group_id=1 and date<=convert(date,'2012-09-20',120)
except
select * from user_group where group_id=1 and date<=convert(date,'2012-09-11',120) 
```~~ 

~~或者也许这...~~

 ~~```
select date, user_id, group_id
from
(
    select *, ROW_NUMBER() over (partition by user_id order by date desc) rn 
    from user_group
    where date<=convert(date,'2012-09-20',120)
) v
where rn=1
and group_id=1    
order by date desc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T09:40:58.497

最后我找到了这个对我有用的解决方案：

```
var innerAssoc = from assoc in user_group
                 where assoc.group_id == group_id
                 && dateFrom.Date <= assoc.date.Date
                 && date.Date <= dateTo.Date
                 select assoc;

var outerAssoc = from assoc in user_group
                 where assoc.group_id == group_id
                 && assoc.date.Date == user_group
                 .Where(a => a.user_id == assoc.user_id && a.date.Date <= dateFrom.Date)
                 .Select(a => a.date.Date).Max()
                 select assoc;

var res = innerAssoc.Union(outerAssoc); 
```~~~~

# java - 带有 JPA 配置的 Glassfish 3

> ID：12597417
> 
> 赞同：0
> 
> 时间：2012-09-26T08:17:32.933
> 
> 标签：java, jakarta-ee, jpa, glassfish, eclipselink

我在独立应用程序中使用了 JPA 和 Hibernate，但现在我想尝试使用应用程序服务器。我知道 GlassFish 为 JPA 提供了 EclipseLink 实现，但我有几个问题。

1.  我是否需要在`persistence.xml`EclipseLink 中指定我的持久性单元的提供者？
2.  `persistence.xml`看起来是否与未部署应用程序相同？如果它看起来不一样，它看起来如何？
3.  我是否需要专门下载 EclipseLink 的实现 jar 并使用它们进行构建，或者容器是否在我的应用程序部署后处理这个问题？
4.  如何在 中指定 jdbc 驱动程序`persistence.xml`？
5.  我的应用程序是否需要部署为`.ear`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T09:39:27.923

1.  您不需要指定持久性提供程序，默认情况下将使用包含在您的应用程序服务器中的提供程序（当然，如果它至少具有 Web 配置文件，否则诸如 Tomcat 之类的服务器不会为您提供 EclipseLink）。

2.  是的，它将具有相同的外观（在两个应用程序中，您只是以相同的方式使用 JPA）。

3.  要编译您的代码，您只需要在类路径中包含 persistence-api.jar（如果您使用 Maven，请将范围设置为“已提供”）。然后服务器会自动提供它的实现jar。

4.  您可以使用[本页](http://docs.jboss.org/hibernate/entitymanager/3.5/reference/en/html/configuration.html)中描述的持久性单元（“Java SE 环境中的典型配置”）。但我宁愿建议您改用 a `<jta-data-source>`，它指的是[GlassFish 提供的数据源](http://docs.oracle.com/cd/E18930_01/html/821-2432/gkyan.html)。

5.  据我所知，它也可以是 WAR 文件，部署它没有任何问题（webapp 作为 Maven WAR 模块 + JAR 模块中的 bean）。

# ios5 - iOS 6.0 上的 GKSession 无法在 iOS5.1 上“看到”会话

> ID：12597424
> 
> 赞同：0
> 
> 时间：2012-09-26T08:18:16.537
> 
> 标签：ios5, ios6, game-center, wireless, gksession

刚刚注意到在运行 iOS6 和 iOS5.1 的设备上测试 GKsession 的一些奇怪行为似乎在本地无线网络上使用相同会话 ID 的 GKSession 在 sessionMode:GKSessionModePeer 从 6.0 到 5.1 可以正常工作，但反之则不行。即，在 6.0 上创建的会话被 5.1“看到”，但反之则不然。

```
self.theGame.hostListSession = [[GKSession alloc] initWithSessionID:@"FRED" 
                                                      displayName:[KYTConfig sharedInstance].localPlayerAlias
                                                      sessionMode:GKSessionModePeer];
[self.theGame.hostListSession setDelegate:self];  
[self.theGame.hostListSession setDataReceiveHandler:self withContext:nil];
[self.theGame.hostListSession setAvailable:YES]; 
```

还有其他人经历过这种情况或知道任何解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T08:45:40.403

感谢 saulobrito 确认它对您有效。这促使我进行清理并构建并重新安装游戏中心框架，问题就消失了。

# python - 正则表达式与值不匹配

> ID：12597427
> 
> 赞同：1
> 
> 时间：2012-09-26T08:18:24.290
> 
> 标签：python, regex

我有一个文件将 IP 地址保存为格式的名称

```
<<%#$192.168.8.40$#% %#@Name_of_person@#% >> 
```

我读了这个文件，现在想使用 pythons 正则表达式提取列表

```
list=re.findall("<<%#$(\S+)$#%\s%#@(\w+\s*\w*)@#%\s>>",ace)
    print list 
```

但是列表始终是一个空列表..

谁能告诉我正则表达式的错误在哪里

`edit-ace`是保存从文件中读取的内容的变量

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T08:21:22.830

$ 是正则表达式中的一个特殊字符，意思是“行尾”（或“字符串尾”，取决于风格）。您的正则表达式在 $ 之后有其他字符，因此仅匹配结尾后具有这些字符的字符串，这是不可能的。

您将需要转义 $，如下所示：`\$`

我建议使用以下正则表达式（格式化为原始字符串，因为您使用的是 Python）：

```
 r"<<%#\$([^$]+)\$#%\s%#@([^@]+)@#%\s>>" 
```

即，`<<%#$`，然后是一个或多个非$ 字符，`$#%`，一个空格字符，`%#@`，一个或多个非@ 字符，`@#%`，空格，`>>`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:48:41.353

就像是：

```
text = '<<%#$192.168.8.40$#% %#@Name_of_person@#% >>'
ip, name = [el[1] for el in re.findall(r'%#(.)(.+?)\1#%', text)] 
```

如果您只需拆分“@”和“$”就可以得到任何结果......

```
from itertools import itemgetter

ip, name = itemgetter(1, 3)(re.split(r'[@\$]', text)) 
```

您也可以只使用内置的字符串函数：

```
tmp = text.split('$')
ip, name = tmp[1], tmp[2].split('@')[1] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T09:09:34.123

你使用了无效的正则表达式模式。您可以使用 r"<\%#\$(\S+)\$#\%\s\%#@(\w+\s*\w*)@#\%\s>>" 替换 "<<% #$(\S+)$#%\s%#@(\w+\s*\w*)@#%\s>>" 在 fandall 方法中

祝你好运~！

# php - PHPUnit - 在缓存开/关的情况下运行所有 测试两次？

> ID：12597432
> 
> 赞同：4
> 
> 时间：2012-09-26T08:18:45.023
> 
> 标签：php, unit-testing, phpunit

无论 memcached 服务器是否可用，我都想确保我的代码始终按预期工作。

我的大部分功能如下所示：

```
function foo($parameter,$force = FALSE)
{
    $result = Cache::get('foo_'.$parameter);

    if (empty($result) || $force)
    {
        // Do stuff with the DB...
        $result = "something";
        Cache::put('foo_'.$parameter,$result,$timeout);
    }

    return $result;
} 
```

现在在一个测试用例中我正在这样做：

```
class MyClassTest extends PHPUnit_Framework_TestCase {
    function testFoo()
    {
        $result = $myClass->foo($parameter);
        $this->assertSomething($result);
    }
} 
```

我可以像这样在 PHPUnit 期间全局禁用缓存`setUp()`：

```
class MyClassTest extends PHPUnit_Framework_TestCase {

    protected function setUp()
    {
        Cache::disable();
    }
} 
```

在调用之后`Cache::disable()`，所有调用都`Cache::get()`将`false`在该请求期间返回。现在，我想在这个类中运行所有测试两次，一次有`Cache::disable();`，一次没有。

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-26T10:53:41.783

一种选择是创建一个`MyClassNoCacheTest`扩展自`MyClassTest`并覆盖（或实现）该`setUp`方法的方法`MyClassNoCacheTest`

# asp.net - 短暂等待后asp.net网站变慢

> ID：12597440
> 
> 赞同：2
> 
> 时间：2012-09-26T08:19:11.293
> 
> 标签：asp.net

我管理了一个使用集成 Windows 身份验证的 ASP.NET Intranet 站点。它部署在许多不同的国家，供这些国家的员工使用。本周，我已部署到三个与其他互联网连接速度较慢的国家/地区。也就是说，这里的本地网络非常快。

当用户不断向服务器发出请求（点击）时，该站点相对较快。但是如果用户处于非活动状态一两分钟之间，下一个请求就会非常慢。之后请求再次快速，直到请求之间有一分钟的停顿。

什么可能导致这种情况？

另外，我想知道集成 Windows 域日志记录是否会影响页面的初始加载时间。它是否查询活动目录服务器或其他什么？

# c# - 已签名程序集的 Net 4 安全设置

> ID：12597442
> 
> 赞同：0
> 
> 时间：2012-09-26T08:19:23.020
> 
> 标签：c#, security, .net-4.0

我有一个应用程序一直运行良好，直到现在使用 Net 3.5 下的强名称程序集。

最近我将项目移至 Net 4.0，并且我还使用代码签名证书对程序集进行了签名。当我在安装了 Windows 7 的机器上启动应用程序时，程序不会启动（它在执行第一行代码之前抛出异常）。

为了尝试找出问题所在，我安装了程序，仍然使用 Net 4.0，但没有使用代码签名证书对程序集进行签名；程序运行正常。

所以，我的问题是：在 Net 4 下，如何将 FullTrust 授予已使用我们的代码签名证书签名的程序集？

谢谢，马丁。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:32:47.397

如果没有异常或其他细节，很难确定发生了什么，但 .Net 4.0 中的安全性发生了显着变化。恢复到 4.0 之前的设置的最简单方法是包含以下属性：

```
[assembly: SecurityRules(SecurityRuleSet.Level1)] 
```

有关更多详细信息，请参阅[安全透明代码](http://msdn.microsoft.com/en-us/library/ee191569.aspx)。

# .net - 使用 Web Deploy 和 TeamCity 修改应用程序池

> ID：12597450
> 
> 赞同：0
> 
> 时间：2012-09-26T08:19:42.943
> 
> 标签：.net, teamcity, msdeploy, web-deployment, application-pool

我们正在使用 Teamcity 并使用 msbuild MSDeployPublish 目标部署我们的网站。这工作正常，但我们还想确保我们部署到的服务器上的应用程序池将“加载用户配置文件”设置为 true。

我们应该怎么做？

如果不能使用 MSDeployPublish，是否可以使用命令行步骤和 MsDeploy.exe 来完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T11:12:42.553

[使用 MSBuild](https://stackoverflow.com/questions/7690954/how-do-i-control-the-apppool-used-for-deploy-through-vs-msdeploy-settings)是不可能的，但使用 MSDeploy 是可能的。

MSDeploy 不会让您直接指定设置，但它会让您备份应用程序池并将其应用到另一台服务器（如果有任何设置差异，它将修改设置）。

首先，您需要备份您的设置并将它们提交给 SVN：

```
msdeploy -verb:sync 
         -source:appPoolConfig="name of your apppool"
         -dest:package="apppool.zip" 
```

在编译期间，您需要将输出包同步*到*appppol 包中，因为清单提供程序不能包含 package/archivedir 提供程序：

```
msdeploy -verb:sync
         -source:ApplicationPackage.zip
         -dest:appool.zip
         -skip:skipAction:Delete 
```

（跳过会阻止部署从目标包中删除 appPoolConfig 提供程序）

*注意：不要以相反的方式执行此操作（将 apppool.zip 转换为 ApplicationPackage.zip），因为它会删除您声明的所有参数，我不知道如何跳过它。*

可能可以在生成之前将 apppool.zip 复制到 ApplicationPackage.zip 的“下方”（通过`MsDeploySourceManifest`），因此它实际上是一步合并的，但在我有时间对其进行测试之前，我会将其作为练习留给您。

*注意：如果您希望将文件放在目录中而不是 zip 文件中，也可以使用 dest:archivedir*

# osgi - 在 WSO2 平台上运行 OSGi 应用程序

> ID：12597454
> 
> 赞同：0
> 
> 时间：2012-09-26T08:19:52.303
> 
> 标签：osgi, wso2, wso2carbon

我的组织正在从传统的基于 EAR/WAR 的应用程序转向 OSGi 以构建我们的业务应用程序。WSO2 平台提供了许多我们希望在应用程序中利用的支持服务（esb、治理、身份等）。

是否可以将我们的 OSGi 组件直接部署到 WSO2 应用程序服务器，还是只部署到 WSO2 carbon 更有意义？这种方法有什么我们应该考虑的问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T17:48:13.587

WSO2 Carbon 是 WSO2 平台的核心服务器，包括用作 WSO2 产品基础的所有常用功能。Application Server 是 Carbon Server + Service Hosting 功能和其他一些用于服务托管方面的功能。您可以直接使用 Carbon Server 来部署 OSGi 包。只需添加 P2 存储库，您就可以通过 configure--> features 安装所需的任何功能。如果您不需要服务托管功能，只需从 Carbon 服务器开始并添加您需要的任何功能来满足您的需求。（功能是满足一个方面的 OSGi 捆绑包的集合）。您可以像通常那样构建您的 p2 存储库并将您的功能直接安装到 Carbon Server。有几种方法可以将您的 OSGi 捆绑包放入基于 WSO2 Carbon 的服务器中。

以下[链接](http://wso2.org/projects/carbon/provisioning-wso2-carbon-with-equinox-p2)将帮助您了解如何在 Carbon Server 中使用 OSGi。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T13:56:43.800

WSO2 AS 与其他所有 WSO2 实例一样基于 Carbon 平台，因此应该没有太大区别，但使用 Application Server 是有意义的。

我没有尝试部署 OSGI 组件，但我知道这是可能的。对不起，我帮不上什么忙。

# asp.net-mvc - 如何覆盖一些默认的 CurrentCulture 值

> ID：12597455
> 
> 赞同：0
> 
> 时间：2012-09-26T08:19:53.163
> 
> 标签：asp.net-mvc, cultureinfo

我需要覆盖当前（或指定）CurrentCulture 对象的默认 DayNames。

我试图通过几种方式来实现这一点：

1) 在 Global.asax 级别：

```
protected void Application_PreRequestHandlerExecute(object sender, EventArgs e) {
    System.Threading.Thread.CurrentThread.CurrentCulture = new System.Globalization.CultureInfo(XXX);
    string[] newNames = { YYY };
    System.Threading.Thread.CurrentThread.CurrentCulture.DateTimeFormat.DayNames = newNames;
} 
```

2）在控制器级别：

```
public HomeController() {
    System.Threading.Thread.CurrentThread.CurrentCulture = new System.Globalization.CultureInfo(XXX);
    string[] newNames = { YYY };
    System.Threading.Thread.CurrentThread.CurrentCulture.DateTimeFormat.DayNames = newNames;
} 
```

正确应用了指定的“CurrentCulture”对象（根据指定的 XXX 文化名称）。`@DateTime.Now.ToString("ddd")`我可以通过表达式看到特定于文化的日期名称。但是，指定的“DayNames”对象似乎被忽略了（但是，我可以看到“CurrentCulture”和“DayNames”属性都在调试器中正确应用）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T20:01:17.583

有必要改写默认的 AbbreviatedDayNames：

```
protected void Application_PreRequestHandlerExecute(object sender, EventArgs e) {
    System.Threading.Thread.CurrentThread.CurrentCulture = new System.Globalization.CultureInfo(...);
    System.Threading.Thread.CurrentThread.CurrentCulture.DateTimeFormat.AbbreviatedDayNames = ...;
}

@DateTime.Now.ToString("ddd") 
```

# java - 如何用两个分隔符拆分字符串？

> ID：12597458
> 
> 赞同：18
> 
> 时间：2012-09-26T08:20:15.853
> 
> 标签：java, regex, string, split

我知道您可以使用`myString.split("something")`. 但我不知道如何用两个分隔符分割一个字符串。

例子：

```
mySring = "abc==abc++abc==bc++abc"; 
```

我需要这样的东西：

```
myString.split("==|++") 
```

它的正则表达式是什么？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-09-26T08:24:45.960

用这个 ：

```
 myString.split("(==)|(\\+\\+)") 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-26T08:39:04.877

如果我必须使用两个子字符串进行拆分，我会怎么做：

```
String mainString = "This is a dummy string with both_spaces_and_underscores!"
String delimiter1 = " ";
String delimiter2 = "_";
mainString = mainString.replaceAll(delimiter2, delimiter1);
String[] split_string = mainString.split(delimiter1); 
```

将第二个分隔符的所有实例替换为第一个并拆分为第一个。

注意： using`replaceAll`允许您将正则表达式用于`delimiter2`. 因此，您实际上应该将所有匹配项替换为`delimiter2`与 的正则表达式匹配的某个字符串`delimiter1`。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-04-29T10:11:33.827

你可以用这个

```
 mySring = "abc==abc++abc==bc++abc";
        String[] splitString = myString.split("\\W+"); 
```

正则表达式**\W+** ---> 它将根据非单词字符拆分字符串。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-09-26T08:27:12.960

试试这个

```
String str = "aa==bb++cc";
String[] split = str.split("={2}|\\+{2}");
System.out.println(Arrays.toString(split)); 
```

答案是一个数组

```
[aa, bb, cc] 
```

{2} 匹配前导字符的两个字符。即 = 或 +（转义） | 匹配任何一方

我在java中转义\所以正则表达式实际上是`={2}|\+{2}`

# apache - 使用 htaccess 从重定向中排除图像 url

> ID：12597459
> 
> 赞同：0
> 
> 时间：2012-09-26T08:20:18.617
> 
> 标签：apache, .htaccess, mod-rewrite, url-rewriting

我的旧博客位于 www.example.com/myblog 我更改了服务器，我想使用 www.example.com/blog

为此，我使用了 htaccess 代码 Redirect 301 /myblog [http://www.example.com/blog](http://www.example.com/blog)

这有助于重定向博客主页和个人博客文章。

这些图像被放在新服务器中名为 myblog 的文件夹中。所以图片网址是 www.example.com/myblog/wp-content/uploads/2010/04/something.jpg

但是我上面写的 htaccess 将它重定向到 www.example.com/blog/wp-content/uploads/2010/04/something.jpg 返回 404。

任何人都可以帮我编写 htaccess 代码以仅重定向博客文章 url，不包括博客图片 url 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T08:54:40.390

不要使用 mod_alias 和`Redirect`指令，而是尝试 mod_rewrite 并添加一些条件：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^/?myblog/(.*)$ http://www.example.com/blog/$1 [L,R=301]

# redriect the index
RewriteRule ^/?myblog/?$ http://www.example.com/blog/ [L,R=301] 
```

# oracle - Oracle 中 DUMP 函数的 DB2 等价物是什么？

> ID：12597462
> 
> 赞同：1
> 
> 时间：2012-09-26T08:20:25.140
> 
> 标签：oracle, db2, dump

Oracle 中的[转储函数](http://www.techonthenet.com/oracle/functions/dump.php)显示数据存储方式的字符集和按位表示。

请问有人知道DB2中是否有等效的命令吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T00:20:25.940

使用下面的查询和下面的函数可能会想出一个 UDF 来做你需要的事情。

```
 SELECT NAME, VALUE
    FROM SYSIBMADM.DBCFG
    where NAME in ('codepage','codeset','collate_info')

    BITAND
    BITOR
    BITXOR
    BITNOT
    BITANDNOT 
```

# python - 不能将序列乘以浮点类型的非整数？

> ID：12597464
> 
> 赞同：1
> 
> 时间：2012-09-26T08:20:27.480
> 
> 标签：python, python-2.7

我被要求编写一个模拟器，最终目标是查看在大约 15 个滚筒链末端的滚筒上最终有多少墨水。我目前正在尝试建立一个定义滚轮的字典。由此我想编写一个函数，它将接受用户输入“roller_diameter”，找到给定直径与固定直径的比率并将其转换为整数个“段”。我不是程序员（我正在使用互联网资源学习 Python [2.7]）并且正在努力解决 TypeError: can't multipy sequence by non-int type 'float' 我确信这是一个微不足道的问题，我已经查看了相关答案，但无法理解我做错了什么...任何建议将不胜感激，这是代码（只有几个'

```
Rubber = True  
Copper = False  
CW = 1  
ACW = -1  
num_rollers = 4  
plate_diameter = 406.4  

rollers = [{} for i in range(num_rollers)]  
rollers[0] = {'top_seg': 0, 'roller_diameter': [], 'segments': [], 'material': Copper, 'direction': ACW, 'ink': []}  
rollers[1] = {'top_seg': 0, 'roller_diameter': [], 'segments': [], 'material': Rubber, 'direction': CW, 'ink': []}  
rollers[2] = {'top_seg': 0, 'roller_diameter': [], 'segments': [], 'material': Copper, 'direction': ACW, 'ink': []}  
rollers[3] = ['top_seg': 0, 'roller_diameter': [], 'segments': [], 'material': Rubber, 'direction': CW, 'ink': []}  

R = rollers[i]  

def roller_data():  
    global roller_diameter  
    roller_diameter = float(raw_input("Enter the roller diameter" + str(i) + ': '))

for i in range(num_rollers):  
    roller_data()  
R['segments'] = int(round(rollers[3]['segments']*roller_diameter/plate_diameter))  
R['angle'] = (360.0/R['segments'])  

print rollers[3]['segments'] 
```

TraceBack 是：

```
Traceback (most recent call last):
File "\\datasvr\users\rioliver\Python2.7\dict_test_v2.py", line 24, in <module>
R['segments'] = int(round(rollers[3]['segments']*roller_diameter/plate_diameter))
TypeError: can't multiply sequence by non-int of type 'float' 
```

当您运行此代码时，您输入的直径无关紧要（我一直使用 85、95、110、120），但使用的数字没有区别。我希望它采用任何数字（整数或浮点数）并舍入任何浮点数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T12:02:35.790

在这一行：

```
R['segments'] = int(round(rollers[3]['segments']*roller_diameter/plate_diameter)) 
```

你把`rollers[3]['segments']`它乘以`roller_diameter`，然后除以`plate_diameter`。这会给你错误信息

```
TypeError: can't multiply sequence by non-int of type 'float' 
```

这告诉我您正在尝试将一个序列（例如，一个列表或一个元组）乘以一个浮点数。如果我理解正确，`rollers[3]['segments']`它仍然是一个空列表，而您正试图将它乘以`roller_diameter`浮点数。我不确定您要在这里做什么，因为您从不为`segments`密钥分配任何东西，就我所知。

其他一些注意事项：

```
rollers[3] = ['top_seg': 0, 'roller_diameter': [], 'segments': [], 'material': Rubber, 'direction': CW, 'ink': []} 
```

这一行给出了一个 SyntaxError，所以很明显它不是你运行的代码。请始终将您实际运行的代码复制并粘贴到框中，否则人们必须区分“OP 代码中的错误”和“OP 如何在 StackOverflow 上编辑代码的错误”。

```
R = rollers[i] 
```

我认为您认为这意味着 that`R`现在将始终指向 中的`i`-th 元素`rollers`，但这不是 Python 的工作方式。它的意思是“告诉名称`R`它现在指的是`rollers[i]`当前描述的任何对象”。 `i`此时为 3（您使用的列表理解的剩余部分），所以`R = rollers[3]`. 如果你`for i in range(num_rollers)`改为`for j in..`，你会得到

```
 R = rollers[i]  
NameError: name 'i' is not defined 
```

因为它试图获得`i`那一刻的价值，*并且*没有`i`.

```
def roller_data():  
    global roller_diameter  
    print i
    roller_diameter = float(raw_input("Enter the roller diameter" + str(i) + ': ')) 
```

您在这里不需要全局变量。如果你想让输入成为一个函数，只需返回一个值：

```
def read_diameter(i):
    return float(raw_input("Enter the roller diameter # {}: ".format(i))) 
```

然后在你拿回来的时候把它分配到某个地方，比如

```
rollers[i]['roller_diameter'] = read_diameter(i) 
```

并在计算中使用*该*值，而不是全局`roller_diameter`.

我认为你的最后几行有一个缩进错误，你希望该`R['segments']`位被缩进——但是你硬编码`rollers[3]`而不是使用`rollers[i]`，所以也许我错了——但记住你`R`的总是`rollers[3]`。在循环中使用`rollers[i]`或在循环`R = rollers[i]` *内*设置，以便该行在`i`每次执行时都获得一个新值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:27:15.110

错误输出显示

```
R['segments'] = int(round(rollers[i]['segments']*roller_diameter/plate_diameter)) 
```

在您的代码中，您有 R['segments'] = float(round(rollers[3]['segments']*roller_diameter/plate_diameter))

您是否正在运行正确或最新版本的代码？您在此处拥有的代码块是否与您从中收到此错误的代码相同？

问候

# postgresql - 如果 PostgreSQL 上不存在，如何添加列？

> ID：12597465
> 
> 赞同：185
> 
> 时间：2012-09-26T08:20:29.840
> 
> 标签：postgresql, postgresql-9.1

问题很简单。如何将列添加`x`到表中`y`，但仅当`x`列不存在时？我在[这里](https://stackoverflow.com/questions/9991043/how-can-i-test-if-a-column-exists-in-a-table-using-an-sql-statement)找到了唯一的解决方案，如何检查列是否存在。

```
SELECT column_name 
FROM information_schema.columns 
WHERE table_name='x' and column_name='y'; 
```

* * *

## 回答 #1

> 赞同：521
> 
> 时间：2016-08-02T13:33:07.760

对于[Postgres 9.6](https://www.postgresql.org/docs/9.6/static/sql-altertable.html)，这可以使用选项来完成`if not exists`

```
ALTER TABLE table_name ADD COLUMN IF NOT EXISTS column_name INTEGER; 
```

* * *

## 回答 #2

> 赞同：147
> 
> 时间：2012-09-26T18:59:08.023

这是使用“DO”语句的简短版本：

```
DO $$ 
    BEGIN
        BEGIN
            ALTER TABLE <table_name> ADD COLUMN <column_name> <column_type>;
        EXCEPTION
            WHEN duplicate_column THEN RAISE NOTICE 'column <column_name> already exists in <table_name>.';
        END;
    END;
$$ 
```

您不能将这些作为参数传递，您需要在客户端的字符串中进行变量替换，但这是一个自包含查询，仅在列已存在时发出消息，如果不存在则添加，并且将继续因其他错误（如无效数据类型）而失败。

如果这些方法是来自外部来源的随机字符串，我不建议使用任何这些方法。无论您使用哪种方法（作为查询执行的客户端或服务器端动态字符串），这都会导致灾难，因为它会使您面临 SQL 注入攻击。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2012-09-26T19:41:49.213

[**添加了**Postgres 9.6****](https://www.postgresql.org/docs/current/sql-altertable.html) **`ALTER TABLE tbl ADD COLUMN IF NOT EXISTS column_name`。
所以这现在大多已经过时了。您可能会在旧版本中使用它，或者在变体中使用它来检查的不仅仅是列名。**

 *** * *

```
CREATE OR REPLACE function f_add_col(_tbl regclass, _col  text, _type regtype)
  RETURNS bool
  LANGUAGE plpgsql AS
$func$
BEGIN
   IF EXISTS (SELECT FROM pg_attribute
              WHERE  attrelid = _tbl
              AND    attname  = _col
              AND    NOT attisdropped) THEN
      RETURN false;
   ELSE
      EXECUTE format('ALTER TABLE %s ADD COLUMN %I %s', _tbl, _col, _type);
      RETURN true;
   END IF;
END
$func$; 
```

称呼：

```
SELECT f_add_col('public.kat', 'pfad1', 'int'); 
```

成功返回`true`，否则`false`（列已存在）。
引发无效表或类型名称的异常。

### 为什么是另一个版本？

*   这可以通过`DO`语句来完成，但`DO`语句不能返回任何内容。如果它是为了重复使用，我会创建一个函数。

*   我使用[对象标识符类型](https://www.postgresql.org/docs/current/datatype-oid.html) `regclass`和`regtype`用于a) 防止 SQL 注入`_tbl`和`_type`b) 立即检查两者的有效性（最便宜的方法）。列名`_col`仍需使用 进行`EXECUTE`清理`quote_ident()`。看：

    *   [表名作为 PostgreSQL 函数参数](https://stackoverflow.com/questions/10705616/table-name-as-a-postgresql-function-parameter/10711349#10711349)
*   [`format()`](https://www.postgresql.org/docs/current/functions-string.html#FUNCTIONS-STRING-OTHER)需要 Postgres 9.1+。对于旧版本手动连接：

    ```
     EXECUTE 'ALTER TABLE ' || _tbl || ' ADD COLUMN ' || quote_ident(_col) || ' ' || _type; 
    ```

*   您可以对表名进行模式限定，但您不必这样做。
    您可以在函数调用中对标识符进行双引号以保留驼峰式和保留字（但无论如何您都不应该使用其中的任何一个）。

*   我查询`pg_catalog`而不是`information_schema`. 详细解释：

    *   [如何检查给定模式中是否存在表](https://stackoverflow.com/questions/20582500/how-to-check-if-a-table-exists-in-a-given-schema/24089729#24089729)
*   包含`EXCEPTION`子句的块要慢得多。
    这更简单，更快捷。[手册：](https://www.postgresql.org/docs/current/plpgsql-control-structures.html#PLPGSQL-ERROR-TRAPPING)

> 提示
> 
> 包含`EXCEPTION`子句的块的进入和退出比没有子句的块要昂贵得多。因此，不要在`EXCEPTION`没有必要的情况下使用。

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2014-12-03T08:05:14.813

以下选择查询将返回`true/false`，使用[`EXISTS()`](http://www.postgresql.org/docs/9.5/static/functions-subquery.html)函数。

> **EXISTS()**：
> EXISTS 的参数是任意的 SELECT 语句或子查询。评估子查询以确定它是否返回任何行。如果返回至少一行，则 EXISTS 的结果为“true”；如果子查询不返回任何行，则 EXISTS 的结果为“false”

```
SELECT EXISTS(SELECT  column_name 
                FROM  information_schema.columns 
               WHERE  table_schema = 'public' 
                 AND  table_name = 'x' 
                 AND  column_name = 'y'); 
```

并使用以下动态 SQL 语句来更改您的表

```
DO
$$
BEGIN
IF NOT EXISTS (SELECT column_name 
                 FROM  information_schema.columns 
                WHERE  table_schema = 'public' 
                  AND  table_name = 'x' 
                  AND  column_name = 'y') THEN
ALTER TABLE x ADD COLUMN y int DEFAULT NULL;
ELSE
RAISE NOTICE 'Already exists';
END IF;
END
$$ 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2020-02-20T01:41:23.240

对于那些使用 Postgre 9.5+（我相信你们中的大多数人）的人来说，有一个非常简单和干净的解决方案

```
ALTER TABLE if exists <tablename> add if not exists <columnname> <columntype> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-26T10:28:45.677

下面的函数将检查该列是否存在返回适当的消息，否则它将将该列添加到表中。

```
create or replace function addcol(schemaname varchar, tablename varchar, colname varchar, coltype varchar)
returns varchar 
language 'plpgsql'
as 
$$
declare 
    col_name varchar ;
begin 
      execute 'select column_name from information_schema.columns  where  table_schema = ' ||
      quote_literal(schemaname)||' and table_name='|| quote_literal(tablename) || '   and    column_name= '|| quote_literal(colname)    
      into   col_name ;   

      raise info  ' the val : % ', col_name;
      if(col_name is null ) then 
          col_name := colname;
          execute 'alter table ' ||schemaname|| '.'|| tablename || ' add column '|| colname || '  ' || coltype; 
      else
           col_name := colname ||' Already exist';
      end if;
return col_name;
end;
$$ 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-26T14:23:31.383

这基本上是sola的解决方案，但只是清理了一下。不同的是，我不只是想“改进”他的解决方案（另外，我觉得这有点粗鲁）。

主要区别在于它使用 EXECUTE 格式。我认为这有点干净，但我相信这意味着您必须使用 PostgresSQL 9.1 或更高版本。

这已经在 9.1 上进行了测试并且可以工作。注意：如果 schema/table_name/或 data_type 无效，它将引发错误。这可以“修复”，但在许多情况下可能是正确的行为。

```
CREATE OR REPLACE FUNCTION add_column(schema_name TEXT, table_name TEXT, 
column_name TEXT, data_type TEXT)
RETURNS BOOLEAN
AS
$BODY$
DECLARE
  _tmp text;
BEGIN

  EXECUTE format('SELECT COLUMN_NAME FROM information_schema.columns WHERE 
    table_schema=%L
    AND table_name=%L
    AND column_name=%L', schema_name, table_name, column_name)
  INTO _tmp;

  IF _tmp IS NOT NULL THEN
    RAISE NOTICE 'Column % already exists in %.%', column_name, schema_name, table_name;
    RETURN FALSE;
  END IF;

  EXECUTE format('ALTER TABLE %I.%I ADD COLUMN %I %s;', schema_name, table_name, column_name, data_type);

  RAISE NOTICE 'Column % added to %.%', column_name, schema_name, table_name;

  RETURN TRUE;
END;
$BODY$
LANGUAGE 'plpgsql'; 
```

用法：

```
select add_column('public', 'foo', 'bar', 'varchar(30)'); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-03-12T13:57:14.647

可以添加到迁移脚本调用函数并在完成时删除。

```
create or replace function patch_column() returns void as
$$
begin
    if exists (
        select * from information_schema.columns
            where table_name='my_table'
            and column_name='missing_col'
     )
    then
        raise notice 'missing_col already exists';
    else
        alter table my_table
            add column missing_col varchar;
    end if;
end;
$$ language plpgsql;

select patch_column();

drop function if exists patch_column(); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-08-19T22:24:48.273

就我而言，由于它是如何创建的，我们的迁移脚本很难跨越不同的模式。

为了解决这个问题，我们使用了一个刚刚捕获并忽略错误的异常。这也有一个很好的副作用，即更容易查看。

但是，请注意其他解决方案有自己的优势，可能超过此解决方案：

```
DO $$
BEGIN
  BEGIN
    ALTER TABLE IF EXISTS bobby_tables RENAME COLUMN "dckx" TO "xkcd";
  EXCEPTION
    WHEN undefined_column THEN RAISE NOTICE 'Column was already renamed';
  END;
END $$; 
```

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2016-03-29T04:51:47.810

您可以通过以下方式做到这一点。

```
ALTER TABLE tableName drop column if exists columnName; 
ALTER TABLE tableName ADD COLUMN columnName character varying(8); 
```

因此，如果该列已存在，它将删除该列。然后将该列添加到特定表中。

* * *

## 回答 #11

> 赞同：-4
> 
> 时间：2012-09-26T08:23:34.483

只需检查查询是否返回了 column_name。

如果没有，请执行以下操作：

```
ALTER TABLE x ADD COLUMN y int; 
```

在哪里放置对“x”和“y”有用的东西，当然还有我使用 int 的合适数据类型。**

# java - 通用对象的哈希函数

> ID：12597468
> 
> 赞同：4
> 
> 时间：2012-09-26T08:20:42.407
> 
> 标签：java, data-structures, hashmap, hashtable

你如何想出一个通用对象的散列函数？如果用户定义的两个对象“相等”，则存在两个对象需要具有相同哈希值的约束。Java 是如何做到这一点的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T08:32:28.633

首先，基本上你通过重写[hashCode() 方法](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#hashCode%28%29)来定义一个类的散列函数。Javadoc 指出：

> hashCode 的一般合约是：
> 
> *   每当在 Java 应用程序执行期间对同一个对象多次调用它时，hashCode 方法必须始终返回相同的整数，前提是没有修改对象上的 equals 比较中使用的信息。该整数不需要从应用程序的一次执行到同一应用程序的另一次执行保持一致。
> *   **如果两个对象根据 equals(Object) 方法相等，则对两个对象中的每一个调用 hashCode 方法必须产生相同的整数结果。**
> *   如果根据 equals(java.lang.Object) 方法，如果两个对象不相等，则不需要对两个对象中的每一个调用 hashCode 方法都必须产生不同的整数结果。但是，程序员应该意识到，为不相等的对象生成不同的整数结果可能会提高哈希表的性能。

所以更重要的问题是：是什么让你的两个对象相等？反之亦然：哪些属性使您的对象独一无二？如果您对此有答案，请创建一个[equals()](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)方法来比较所有属性，`true`如果它们都相同则返回，`false`否则返回。

该`hashCode()`方法涉及更多，我建议您不要自己创建它，而是让您的 IDE 来做。在 Eclipse 中，您可以选择*Source*，然后从菜单中选择*Generate hashCode() 和 equals() 。*这也保证了上述要求。

* * *

这是一个小（简化的）示例，其中使用 Eclipse 生成了这两种方法。请注意，我选择不包括该`city`属性，因为它`zipCode`已经唯一标识了一个国家/地区内的城市。

```
public class Address {

    private String streetAndNumber;
    private String zipCode;
    private String city;
    private String country;

    @Override
    public int hashCode() {
        final int prime = 31;
        int result = 1;
        result = prime * result + ((country == null) ? 0 : country.hashCode());
        result = prime * result
                + ((streetAndNumber == null) ? 0 : streetAndNumber.hashCode());
        result = prime * result + ((zipCode == null) ? 0 : zipCode.hashCode());
        return result;
    }

    @Override
    public boolean equals(final Object obj) {
        if(this == obj)
            return true;
        if(obj == null)
            return false;
        if(!(obj instanceof Address))
            return false;
        final Address other = (Address) obj;
        if(country == null) {
            if(other.country != null)
                return false;
        }
        else if(!country.equals(other.country))
            return false;
        if(streetAndNumber == null) {
            if(other.streetAndNumber != null)
                return false;
        }
        else if(!streetAndNumber.equals(other.streetAndNumber))
            return false;
        if(zipCode == null) {
            if(other.zipCode != null)
                return false;
        }
        else if(!zipCode.equals(other.zipCode))
            return false;
        return true;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T08:36:01.790

我刚刚找到了我自己问题的答案。Java 这样做的方式是它为每个对象定义一个 hashCode，默认情况下，如果两个对象在内存中相同，则两个对象的 hashCode 相同。因此，当哈希表的客户端覆盖对象的 equals() 方法时，他还应该覆盖计算哈希码的方法，这样如果 a.equals(b) 为真，则 a.hashCode() 也必须等于 b.hashCode ()。这样，可以确保相等的对象具有相同的哈希码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T08:38:42.187

Java 不这样做。如果 hashCode() 和 equals() 没有显式实现，JVM 将为有意义相等的实例生成不同的 hashCode。您可以查看 Joshua Bloch 的 Effective Java。这真的很有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T08:35:27.353

几个选项：

*   阅读 Joshua Bloch 的《Effective Java》。它包含一个很好的哈希码算法
*   让您的 IDE 生成 hashCode 方法
*   Java SE 7 及更高版本：使用[Objects.hash](http://docs.oracle.com/javase/7/docs/api/java/util/Objects.html#hash%28java.lang.Object...%29)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T08:39:09.113

班级`java.lang.Object`作弊。它将相等性（由 确定`equals`）定义为对象身份（由 确定`==`）。所以，除非你在你的子类中重写，否则你`equals`的类的两个实例是“相等的”，如果它们碰巧是同一个对象。

与此相关的哈希码由系统函数实现`System.identityHashCode`（它不再真正基于对象地址——曾经是这样吗？——但可以认为是以这种方式实现的）。

如果你 override `equals`，那么这个实现`hashCode`就不再有意义了。

考虑以下示例：

```
class Identifier {

    private final int lower;
    private final int upper;

    public boolean equals(Object any) {
        if (any == this) return true;
        else if (!(any instanceof Identifier)) return false;
        else {
            final Identifier id = (Identifier)any;
            return lower == id.lower && upper == id.upper;
        }
    }
} 
```

这个类的两个实例被认为是相等的，如果它们的“lower”和“upper”成员具有相同的值。由于相等性现在由对象成员确定，我们需要以`hashCode`兼容的方式定义。

```
public int hashCode() {
    return lower * 31 + upper;  // possible implementation, maybe not too sophisticated though
} 
```

如您所见，我们使用的字段与`hashCode`我们在确定相等性时也使用的字段相同。将哈希码基于所有成员通常是一个好主意，在比较相等性时也会考虑这些成员。

请考虑以下示例：

```
class EmailAddress {

    private final String mailbox;
    private final String displayName;

    public boolean equals(Object any) {
        if (any == this) return true;
        else if (!(any instanceof EmailAddress)) return false;
        else {
            final EmailAddress id = (EmailAddress)any;
            return mailbox.equals(id.mailbox);
        }
    }
} 
```

由于在这里，相等性仅由`mailbox`成员确定，因此哈希码也应仅基于该成员：

```
public int hashCode() {
    return mailbox.hashCode();
} 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-09-26T08:33:52.737

对象的散列是通过覆盖[`hashCode()`方法](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html#hashCode%28%29)建立的，开发人员可以覆盖该方法。

Java 在默认哈希码计算中使用素数。

如果`equals()`and`hashCode()`方法没有实现，JVM 会为对象隐式生成 hashcode（对于 Serializable 类，`serialVersionUID`会生成 a）。

# php - Wordpress 用户登录身份验证查询作为核心 php

> ID：12597469
> 
> 赞同：0
> 
> 时间：2012-09-26T08:20:46.260
> 
> 标签：php, wordpress

在 WordPress 中，用户登录查询在哪里，就像我们在 php 核心中所做的那样：

```
$query = mysql_query("select * from user where username= 'this' and password = 'this'"); 
```

哪个文件/代码在管理员登录时运行？我需要检查我对管理员、子管理员、超级管理员的自定义权限，例如：

```
$query = mysql_query("select * from user where username= 'this' and password = 'this' and login_auth = 'true'"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T15:20:17.740

这不是做你想要完成的事情的方法。WordPress 不会以您尝试使用它们的方式处理用户。

好消息是，您可以使用一些方法向用户添加参数，然后检查这些参数，所有这些都利用内置的 WP 功能。这将是您可以添加其他自定义权限的方式，并且仍然可以在 WordPress 结构中工作。

查看这篇文章：
[添加和使用自定义用户配置文件字段](http://justintadlock.com/archives/2009/09/10/adding-and-using-custom-user-profile-fields)

顺便说一句，永远不要修改核心 WP 文件。这样做会导致无法更新 WordPress。他们发布定期更新，通常包括安全增强功能，因此您肯定希望保持 WordPress 更新。

# sql - 是否使用 iq 唯一选项创建了表？

> ID：12597470
> 
> 赞同：0
> 
> 时间：2012-09-26T08:20:47.047
> 
> 标签：sql, sap-iq

我在**sybase-iq**数据库上有一些表，例如创建：

```
create  table tab
(   
   id   int  not null IQ Unique (10)
) 
```

如何检查表`tab`是否是使用`iq unique`选项创建的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:25:25.730

我们可以使用 procedure 来做到这一点`sp_column`。它返回有关表中每一列的信息。在一`est_cardinality`列中是来自 的值`IQ Unique`。例如：

```
sp_iqcolumn tab 
```

返回

```
table_name  table_owner column_name domain_name width   scale   nulls   default cardinality est_cardinality location    isPartitioned   remarks check
tab         DBA         id          integer     4       0       N               0           10               Main       N 
```

[这](http://infocenter.sybase.com/help/index.jsp?workingSet=All%20topics&searchWord=sp_iqcolumn)是文档的链接。

# java - 为什么我看不到使用此 ShadowRenderer 生成的阴影？

> ID：12597472
> 
> 赞同：1
> 
> 时间：2012-09-26T08:20:48.093
> 
> 标签：java, swing, shadow, swingx

我正在尝试使用[swingx](http://download.java.net/javadesktop/swinglabs/releases/weekly/week-44-2006-10-29/swingx/javadoc/org/jdesktop/swingx/graphics/ShadowRenderer.html#createShadow%28java.awt.image.BufferedImage%29)的 ShadowRenderer 为面板创建阴影。这是我到目前为止所做的：

*   在面板构造函数中创建一次阴影渲染器。

    ```
    public CustomPanel() {
        super();
        renderer = new ShadowRenderer(20, 0.5f, Color.RED);
    } 
    ```

*   每次调整面板大小时，我都会重新计算新的阴影。

    ```
    @Override
    public void setBounds(int x, int y, int width, int height) {
        super.setBounds(x, y, width, height);
        shadow = renderer.createShadow(GraphicsUtilities.createCompatibleTranslucentImage(width, height));
    } 
    ```

*   然后我重写`paintComponent`面板的方法来绘制生成的图像：

    ```
    protected void paintComponent(Graphics g) {
        Graphics2D g2 = (Graphics2D) g.create();

        g2.drawImage(shadow, 0, 0, null);
        //super.paintComponent(g);
    } 
    ```

但`shadow`图像从未显示。为什么？我读[了这篇](http://www.curious-creature.org/2007/08/01/rounded-corners-and-shadow-for-dialogs-extreme-gui-makeover/)文章，除了我的代码来绘制一种由阴影渲染器生成的“阴影”图像。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T10:14:39.750

这是[DropShadowDemo 的简短示例](http://www.java.net/download/javadesktop/filthyrichclients/frc-chapter16.zip)

```
JXPanel panel = new JXPanel() {
    int shadowSize = 40;
    ShadowRenderer renderer = new ShadowRenderer(shadowSize/ 2, 0.5f, Color.RED); 
    BufferedImage imageA = 
            XTestUtils.loadDefaultImage("moon.jpg");
    BufferedImage shadow;

    @Override
    public void setBounds(int x, int y, int width, int height) {
        super.setBounds(x, y, width, height);
        // not really needed here - the base image size is fixed
        shadow = renderer.createShadow(imageA); 
    }

    @Override
    protected void paintComponent(Graphics g) {
        int x = (getWidth() - imageA.getWidth()) / 2;
        int y = (getHeight() - imageA.getHeight()) / 2;

        Graphics2D g2 = (Graphics2D) g;
        Composite c = g2.getComposite();
        g2.setComposite(AlphaComposite.SrcOver.derive(renderer.getOpacity()));
        g.drawImage(shadow, x - shadowSize / 2, y - shadowSize / 2, null);
        g2.setComposite(c);
        g.drawImage(imageA, x, y, null);
    }

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(imageA.getWidth() + shadowSize, imageA.getHeight()+ shadowSize);
    }

};
panel.setOpaque(false); 
```

# c# - TabControl 项目标题文本在旋转选项卡后显得模糊

> ID：12597474
> 
> 赞同：1
> 
> 时间：2012-09-26T08:20:55.767
> 
> 标签：c#, wpf, xaml, .net-4.0

我需要创建一个带有向左旋转选项卡的 WPF TabControl 控件。

我在网上找到的资源表明，这可以通过将以下两件事应用于 TabControl 来完成：

```
<Setter Property="LayoutTransform">
   <Setter.Value>
     <RotateTransform Angle="270"/>
   </Setter.Value>
</Setter> 
```

和

```
<TabControl TabStripPlacement="Left" ... 
```

所有这些都有效，并且选项卡根据需要显示，但由于某种原因，选项卡中的标题文本在旋转后显得模糊，请说明为什么会发生这种情况，如果我能做些什么来解决这个问题。

**完整的 XAML：**

```
<Window x:Class="WpfApplication2.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <TabControl BorderBrush="Gray" BorderThickness="1" TabStripPlacement="Left">
            <TabControl.ItemContainerStyle>
                <Style TargetType="{x:Type TabItem}">
                    <Setter Property="LayoutTransform">
                        <Setter.Value>
                            <RotateTransform Angle="270"/>
                        </Setter.Value>
                    </Setter>
                    <Setter Property="Template">
                        <Setter.Value>                            
                            <ControlTemplate TargetType="{x:Type TabItem}">
                                <Grid>
                                    <Border Name="Border" BorderBrush="Gray" BorderThickness="1" CornerRadius="6,6,0,0">
                                        <ContentPresenter x:Name="ContentSite"
                                        VerticalAlignment="Center" HorizontalAlignment="Center" 
                                        ContentSource="Header" Margin="12,2,12,2"/>
                                    </Border>
                                </Grid>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
            </TabControl.ItemContainerStyle>
            <TabItem Header="Item 1" />
            <TabItem Header="Item 2" />
            <TabItem Header="Item 3" />
        </TabControl>
    </Grid>
</Window> 
```

![在此处输入图像描述](../Images/cf533aad1b9fcdbe9b5595cb3b560922.png)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-26T10:44:51.593

将以下属性添加到窗口声明 XAML

```
TextOptions.TextFormattingMode="Display"
TextOptions.TextRenderingMode="ClearType"
UseLayoutRounding="true" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T09:25:57.960

您可以查看控制对象渲染行为的 RenderOptions 类。例如看到这个（[WPF 中的图像变得模糊](https://stackoverflow.com/questions/5645274/image-in-wpf-getting-blurry)），它用于减少图像的模糊。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T09:40:19.937

尝试将`SnapsToDevicePixels="True"`和添加`UseLayoutRounding="True"`到您的 Border 或 TabControl 标签。在大多数情况下，这些解决了我的模糊问题。
我建议这个代码片段：

```
<TabControl TabStripPlacement="Left" Margin="5"  FontSize="13" FontFamily="Verdana" Grid.ColumnSpan="2" SnapsToDevicePixels="True" UseLayoutRounding="True" >
                        <TabControl.Resources>
                            <Style TargetType="{x:Type TabItem}">
                                <Setter Property="BorderThickness" Value="0"/>
                                <Setter Property="Padding" Value="0" />
                                <Setter Property="HeaderTemplate">
                                    <Setter.Value>
                                        <DataTemplate>
                                            <Border x:Name="grid" Margin="0" >
                                                <Border.LayoutTransform>
                                                    <RotateTransform Angle="270" ></RotateTransform>
                                                </Border.LayoutTransform>
                                                <ContentPresenter>
                                                    <ContentPresenter.Content>
                                                        <TextBlock FontFamily="Verdana"   Margin="4"  Text="{TemplateBinding Content}">

                                                        </TextBlock>

                                                    </ContentPresenter.Content>
                                                </ContentPresenter>
                                            </Border>
                                        </DataTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </TabControl.Resources>
                        <TabItem Name="General"   Header="YourHeader"  > .. 
```

# html - 从第二行开始

> ID：12597476
> 
> 赞同：0
> 
> 时间：2012-09-26T08:21:05.080
> 
> 标签：html, css

我正在尝试从第二行开始添加文本。我只知道文本间距和边距，但在这种情况下没有帮助。怎么做，如下图。

![在此处输入图像描述](../Images/4decb2f31dba0c8139106a40482b6a64.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T08:40:38.933

您可以使用 HTML 中的内置编号列表。即`<ol>`标签：

**演示**：http: [//jsfiddle.net/x9v2t/](http://jsfiddle.net/x9v2t/)

**代码**：

```
<ol>
    <li>Hello World. This is a line in this paragraph that can span mulitple lines. Hello World. This is a line in this paragraph that can span mulitple lines.</li>
    <li>Hello World. This is a line in this paragraph that can span mulitple lines. Hello World. This is a line in this paragraph that can span mulitple lines.</li>
    <li>Hello World. This is a line in this paragraph that can span mulitple lines. Hello World. This is a line in this paragraph that can span mulitple lines.</li>
</ol> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T08:28:32.503

* * *

嗨，现在习惯了

```
 p+p{
  margin-top:10px;} 
```

***[现场演示](http://tinkerbin.com/2h8tCmRa)***

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T08:49:32.713

我希望这对你有帮助..

```
 <dl>
 <dt>1\. Coffee</dt>
 <dd>black hot drink</dd>
 <dt>2.Milk</dt>
 <dd>white cold drink</dd>
 </dl> 
```

**演示**：[小提琴](http://jsfiddle.net/22w48/)

否则使用这个

```
<ol>
<li></p>Something here...</p></p>Something more here...</p></p>Something something something</p> </li>
<li></p>Something else...</p></p>Something else here...</p></p>Something something something</p> </li>
</ol> 
```

1.  这里有什么...

    这里还有更多...

    某事某事某事

2.  还有什么...

    这里还有别的...

    某事某事某事

# serial-port - 使用 com2 访问 DRAC 控制台显示乱码

> ID：12597478
> 
> 赞同：1
> 
> 时间：2012-09-26T08:21:08.313
> 
> 标签：serial-port

我们编写了一个期望脚本来连接到 Dell Drac 并使用映像 (pxe) 重新映像该框。

实现细节（在期望脚本中）： ssh to admin@hostname -c 输入密码发送命令以重新启动主机连接 com2（这会将主机的控制台输出重定向到终端）等待消息“F12 PXE”并发送“F12 ”。

问题描述：有时，在连接到 com2 时，控制台开始显示乱码。因此我们的脚本失败了。

非常感谢解决此问题的任何帮助。

谢谢， 迪内什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-18T20:59:42.560

我在使用运行 Lucid 的 iDRAC 6 卡的 Dell PowerEdge R310 上遇到了类似的问题。我从这个问题中找到了一些帮助，并能够提出一个解决方案：

[使用 Dell Drac 进行串行控制台重定向时出现乱码](https://serverfault.com/questions/269382/garbled-using-from-dell-drac-for-serial-console-redirection)

# ruby-on-rails - Rails 中的多对一双向关系

> ID：12597486
> 
> 赞同：1
> 
> 时间：2012-09-26T08:21:30.440
> 
> 标签：ruby-on-rails, activerecord

我从 Rails 开始，我对这些关系有点困惑。问题很简单，我有一个`Station`代表火车站的班级和一个`Shop`班级。我只是希望商店有一个车站，代表最近的火车站，所以我想这将是一个多对一的关系。

如果没有任何 ORM，我只需在 shop 表中添加站的外键。在查找了rails关系之后，我最终得到了

```
class Shop < ActiveRecord::Base
    belongs_to :station
end

class Station < ActiveRecord::Base
    has_many :shop
end 
```

正确地说，这家商店并不真正属于我觉得这种奇怪的车站，所以我想知道这是否是正确的前进方式，或者我是否感到困惑。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T09:40:49.863

`belongs_to`并且`has_many`不描述它们相关对象的所有权或范围或生命周期。它们只是描述对象之间的引用（键）。

此类引用的生命周期可以与 :dependent、:autosave 等选项相关联。其他选项，例如 :read_only 减少版本的权限从引用到另一个。

所有权是一个你必须自己定义的概念。例如：论坛中的帖子可以“属于”具有不同权限的不同用户。所有者是谁？管理员？最后一个编辑？创建帖子的那个？对于此类行为，需要额外的定义和机制。我建议您为此查看 CanCan gem ( [https://github.com/ryanb/cancan](https://github.com/ryanb/cancan) )。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T10:02:13.307

这是进行的正确方法。“属于”仅仅意味着“有一个外键”——这并不一定意味着这是一种描述实际关系的明智方式。

如发布的那样，代码将无法正常工作-您需要将 has_many 方复数；IE：

```
class Station < ActiveRecord::Base
    has_many :shops
end 
```

您可以通过从您的应用程序文件夹中启动 rails 控制台（'rails c'）并尝试创建对象来测试关系是否有效。假设您已经创建了相应的表，您应该能够执行以下操作：

```
station = Station.create
shop = Shop.create
shop.station = station
station.shops
station.shops.build 
```

...ETC

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T11:19:15.967

```
class Station < ActiveRecord::Base
    has_many :shops, :dependent => "nullify"
end 
```

如果您的电台仍然被删除，商店将是他们的

# qt - 尽管安装了 Qt，但未找到 qmake

> ID：12597487
> 
> 赞同：5
> 
> 时间：2012-09-26T08:21:36.443
> 
> 标签：qt, unix, qmake

我在 MS Visual Studio 2010 中创建了 Qt 项目，我正在尝试将其移植到 linux OS。我得到了**Linux**，上面**安装了****Qt 4.6.3**（附带分发包）。

 **我需要为我的项目（project_name.pro）生成**Makefile**，所以我尝试`qmake -project`获取`command not found`

当我安装了 Qt 时（在终端中执行 qtconfig 可以让我知道 qt 版本），这对我来说非常不明显和奇怪为什么有 Qt 我不能使用它的实用程序 qmake？

你能给我一些解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T08:27:30.780

那是什么发行版？可能 qmake 在单独的包中，例如在 Debian 中它是 qt4-qmake 包，也可以寻找一些 qt-devel、qt4-devel 或类似的包。

```
pwadas@vao:~$ which qmake
/usr/bin/qmake
pwadas@vao:~$ ls -al /usr/bin/qmake
lrwxrwxrwx 1 root root 23 mar 26  2012 /usr/bin/qmake -> /etc/alternatives/qmake
pwadas@vao:~$ update-alternatives --list qmake
/usr/bin/qmake-qt3
/usr/bin/qmake-qt4
pwadas@vao:~$ dpkg -S /usr/bin/qmake-qt4
qt4-qmake: /usr/bin/qmake-qt4
pwadas@vao:~$ 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-14T07:06:24.170

看到 Qt3/Qt4 库在我尝试过的所有 Linux 发行版中都有重叠，我认为提供更彻底的答案来解决这个问题可能是个好主意。如果您正在运行基于 debian 的发行版，那么之前建议的使用答案`dpkg`可能会起作用；但是，在其他 Linux 发行版上，例如 Fedora，这将无法正常工作。

更合适的解决方案，无论您正在运行什么发行版，如果您已`alternatives`安装，则执行以下操作：

> `update-alternatives --install /usr/bin/qmake qmake /usr/bin/qmake-qt4 10`

然后，为了更好的衡量，你可以遵循：`update-alternatives --set qmake /usr/bin/qmake-qt4`**

# javascript - Javascript / jQuery - 搜索编号的类，如果找不到类，则跳转到最近的数字

> ID：12597488
> 
> 赞同：0
> 
> 时间：2012-09-26T08:21:37.520
> 
> 标签：javascript, jquery

我有一个列表，它代表一天中的*几个*小时。像这样：

```
<ol>
    <li class="9">Item</li>
    <li class="10">Item</li>
    <li class="11">Item</li>
    <li class="13">Item</li>
    <!-- and so on .... -->
</ol> 
```

我有一个“现在”按钮，它可以获取当前时间，然后通过动画在列表中找到该时间，如下所示：

```
$('#jump-to-now').click(function () {
        // new date object
    var date = new Date(),
        // give us the hour
        theHour = date.getHours();

    scrollToHour(theHour);
});

function scrollToHour(hourAsNumber) {
    // use the hour number and match it against a day with a class of that number
    var theListingItem = listingDays.filter('.active-day').find('li').filter('.' + hourAsNumber),
        // get the offset relative to the document
        offsetTop = theListingItem.offset().top;

    $('html, body').animate({
        scrollTop: offsetTop
    }, slideAnimationTime);
} 
```

这里唯一的问题是，如果没有包含该小时类的列表项，则不会发生任何事情。我想做的是在当前时间*之后*转到最近的时间。

例如，现在是上午 7 点，用户单击按钮，代码发现上午 7 点*之后*最近匹配的列表项是上午 9 点，并跳转到该列表项。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T08:27:56.217

大致的逻辑（您可能需要调整）：

```
function scrollToHour(hourAsNumber) {

    var lis = listingDays.filter('.active-day').find('li');

    // use the hour number and match it against a day with a class of that number
    var theListingItem = lis.filter('.' + hourAsNumber);

    // if no item for the specified hour, find nearest
    if(theListingItem.length == 0) {
        var delta = 1;

        while(theListingItem.length == 0 && delta <= lis.length) {
            // check next
            theListingItem = lis.filter('.' + (hourAsNumber + delta) );

            // check previous (uncomment if needed)
            /*
            if(theListingItem.length == 0) {
                theListingItem = lis.filter('.' + (hourAsNumber - delta) );
            }
            */

            delta++;
        }
    }

    // get the offset relative to the document
    var offsetTop = theListingItem.offset().top;

    $('html, body').animate({
        scrollTop: offsetTop
    }, slideAnimationTime);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T08:30:49.603

*假设一个类不应该以数字开头，这是一个具有有效*类名的示例 jsbin ：http: [//jsbin.com/ibeteb/3/edit](http://jsbin.com/ibeteb/3/edit)

```
<ol>
    <li class="h9">Item</li>
    <li class="h10">Item</li>
    <li class="h14">Item</li>
    <li class="h19">Item</li>
    <!-- and so on .... -->
</ol> 
```

* * *

```
var hourAsNumber = 12;
var theListingItem = $('ol li').filter(function(i, el) {
  var h = +($(el).attr('class').substring(1));
  if (h >= hourAsNumber) return $(el);
})[0];

console.log(theListingItem); // jump to this element (li.h14 in the example) 
```

* * *

请注意，`theListingItem`当`undefined`没有可用的项目时（例如，在示例中`hourAsNumber = 20`）。

因此，在检查`offset()`并开始滚动之前，请确保该元素存在，例如

```
if (theListingItem.length) {
   /* an available hour was found - here you scroll */
}
else {
   /* say the user "you arrived too late. try again tomorrow" :)
    * or do nothing 
    */
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T08:31:10.170

你不应该以数字开头的类名。改变你的班级

```
<ol>
    <li class="h9">Item</li>
    <li class="h10">Item</li>
    <li class="h11">Item</li>
    <li class="h13">Item</li>
    <!-- and so on .... -->
</ol> 
```

然后你可以试试这个

```
function scrollToHour(hourAsNumber) {   
    var hours = listingDays.filter('.active-day').find('li');
    var theListingItem = hours.filter('.h' + hourAsNumber);

    while(!theListingItem.get(0))
    {
      if(hourAsNumber<=24)
         theListingItem = hours.filter('.h' + (++hourAsNumber));
     }
     // get the offset relative to the document
     var offsetTop = theListingItem.offset().top;

     $('html, body').animate({
         scrollTop: offsetTop
     }, slideAnimationTime);
} 
```

# oracle - Update_or_insert（合并到）在 Oracle 中不起作用

> ID：12597491
> 
> 赞同：1
> 
> 时间：2012-09-26T08:21:43.437
> 
> 标签：oracle, join, oracle11g, insert-update

**下面我的 UPDATE_OR_INSERT 代码有什么问题？**

```
MERGE INTO EMAIL_LIST d USING (SELECT 'foo@gmail.com' EMAIL) s
    ON (d.EMAIL = s.EMAIL)
        WHEN MATCHED THEN
            UPDATE SET d.EMAIL = s.EMAIL
        WHEN NOT MATCHED THEN
            INSERT (EMAIL) VALUES (s.EMAIL); 
```

给定表格：

```
CREATE TABLE EMAIL_LIST ( 
    EMAIL VARCHAR2 (100)  NOT NULL
);
ALTER TABLE EMAIL_LIST
    ADD CONSTRAINT PK_EMAIL_LIST PRIMARY KEY ( EMAIL ) ; 
```

**错误**

> 错误报告：
> 
> SQL 错误：ORA-00923：FROM 关键字未在预期的位置找到 00923。00000 -“FROM 关键字未在预期的位置找到”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T08:31:25.377

几件事；

您需要从某些东西中选择常数，在 Oracle 的情况下，DUAL；

```
MERGE INTO EMAIL_LIST d 
USING 
    (SELECT 'foo@gmail.com' EMAIL FROM DUAL) s
ON (d.EMAIL = s.EMAIL)
WHEN MATCHED THEN
    UPDATE SET d.EMAIL = s.EMAIL
WHEN NOT MATCHED THEN
    INSERT (EMAIL) VALUES (s.EMAIL); 
```

此外，您无法在 d.EMAIL 上匹配并同时更新它。您的线路；

```
WHEN MATCHED THEN
    UPDATE SET d.EMAIL = s.EMAIL 
```

无论如何都没有意义，因为 d.EMAIL 已经等于 s.EMAIL 或者匹配不会发生。删除`WHEN MATCHED`，您将完成工作；

```
MERGE INTO EMAIL_LIST d 
USING 
    (SELECT 'foo@gmail.com' EMAIL FROM DUAL) s
ON (d.EMAIL = s.EMAIL)
WHEN NOT MATCHED THEN
    INSERT (EMAIL) VALUES (s.EMAIL); 
```

# c# - 无法正确显示小数

> ID：12597499
> 
> 赞同：0
> 
> 时间：2012-09-26T08:22:20.697
> 
> 标签：c#, numbers, double, decimal

```
 Console.Write("Please type in the first floating point number: ");
        double floating_1 = Convert.ToDouble(Console.ReadLine());
        Console.Write("Please type in the second floating point number: ");
        double floating_2 = Convert.ToDouble(Console.ReadLine());

        double product = floating_1 * floating_2;
        double difference = floating_1 - floating_2;
        double sum = floating_1 + floating_2;

        Console.WriteLine("The product of the two floating point numbers is: " + product + "\nThe sum of the two floating point numbers is: " + sum + "\nThe difference between the two floating point numbers is: " + difference);
        Console.ReadLine(); 
```

我有这段代码。每当我执行程序时，小数点显示不正确（如数字：45.23 将显示为 4523）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T08:29:03.037

我的猜测是您的国家/地区设置设置为使用 ，而不是 . 确定小数。

尝试输入例如 14,5 而不是 14.5 看看会发生什么。

c# 根据您的国家/地区默认值解析数字输入并格式化数字输出

# php - 如何添加节点以生成 XML 文件

> ID：12597500
> 
> 赞同：0
> 
> 时间：2012-09-26T08:22:21.583
> 
> 标签：php, html, xml

帮助我创建这样的 XML 格式：

[http://telkomvision.com/soap/timetable/monday.xml](http://telkomvision.com/soap/timetable/monday.xml)

我这样写的代码：

```
<?php
date_default_timezone_set("Asia/Jakarta");
$NowDate                = date("Y-m-d G:i:s");
$FormatWM               = date('Y-m-d',strtotime($NowDate));
$FormatLagi             = date('Y-m-d',strtotime($NowDate));

mysql_connect("localhost", "root", "");
mysql_select_db("telkncom_epg");

$namaTabel = "epg";

header('Content-Type: text/xml');

$query = "SELECT * FROM $namaTabel where tgl_mulai='26-SEP-12' limit 0,30";
$hasil = mysql_query($query);
$jumField = mysql_num_fields($hasil);

echo "<?xml version='1.0' ?>";
echo "<data>";
while ($data = mysql_fetch_array($hasil))
{
   echo "<".$namaTabel.">";
   for ($i=0; $i<=$jumField-1; $i++)
   {
      $namaField = mysql_field_name($hasil, $i);
      echo "<".$namaField.">".$data[$namaField]."</".$namaField.">";
   }
   echo "</".$namaTabel.">";
}
echo "</data>";
?> 
```

我的代码结果是：

[http://telkomvision.com/soap/timetable/CreateXML.php](http://telkomvision.com/soap/timetable/CreateXML.php)

我的数据库设计：

| 编号 | 频道代码 | 频道名 | 日期 | s_time | e_time | 话题 | 罪孽 |

我应该在我的代码中进行哪些更改以获得我想要的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T09:02:31.760

Bertho，您应该考虑将 XQuery 作为重组 XML 文档的一个选项。还有一些软件供应商提供 SQL 应用程序，有些是免费的，有些是付费的，它们具有 XML 处理程序。除非您试图避免使用查询语言，否则我认为您应该使用查询语言而不是 PHP。很长一段时间以来，我一直在努力用 PHP 编辑 XML，并且我发现通过 PHP 创建与查询语言代码一样好的代码并不值得。我认为，如果您使用 PHP，您将要排查错误并添加例程来处理错误和异常，并努力优化数月；另一方面，您可以使用一两天的查询语言并完成它。XQuery 非常容易学习，它是 Web 标准，并且支持 XPath 2.0。你' 肯定会比使用 XPath 或 SimpleXML 更快乐。您也可以考虑 XSLT。有些人更喜欢它，因为它需要较少的管理，但我更喜欢 XQuery 的简单性。

如果您愿意使用 XQuery，我想我可以发布必要的代码。

# c++ - 在向量数组中查找元素

> ID：12597501
> 
> 赞同：1
> 
> 时间：2012-09-26T08:22:27.863
> 
> 标签：c++, vector, find, c++builder, vcl

> **可能重复：**
> [如何在 std::vector 中查找项目？](https://stackoverflow.com/questions/571394/how-to-find-an-item-in-a-stdvector)

我正在使用 C++ Builder 创建一个 VCL Forms 应用程序。我还有一个约会对象的向量数组，每个对象都有一个名称、类型、提醒日期/时间、日期/时间、位置和评论。

我想实现一个查找功能，让用户在给定特定条件的情况下找到约会。

用户可以通过选择名称、类型等或每一个的组合来选择在向量数组中查找约会。

对于这种情况，最好的编程概念是什么？向量不大。不超过 10 或 20 个元素。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T08:26:33.177

使用[`std::find_if()`](http://en.cppreference.com/w/cpp/algorithm/find)并定义所需的谓词（如果 C++11，您可以使用 lambda 函数）。

请参阅在线演示[http://ideone.com/Md7sp](http://ideone.com/Md7sp)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T08:26:51.137

```
std::find_if(A.begin(),A.end(),isthatit(conditions)); 
```

where`isthatit`是从条件构造的谓词对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T09:39:06.690

如果您有许多标准，您应该考虑针对不同搜索索引的 Boost.MultiIndex 容器。 [http://www.boost.org/doc/libs/1_51_0/libs/multi_index/doc/tutorial/index.html](http://www.boost.org/doc/libs/1_51_0/libs/multi_index/doc/tutorial/index.html)

# php - 当页面第一次登陆时，fancybox 只显示

> ID：12597506
> 
> 赞同：0
> 
> 时间：2012-09-26T08:22:59.200
> 
> 标签：php, html

如何安装fancybox，使其仅在您第一次访问主页时显示。这应包括：

```
<h1> Please select your language </h1>
<div> class="select-language" </div> 
```

无论您登陆哪个页面，fancybox 都只会显示一次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T08:41:33.323

```
You can try this.

$(document).ready(function{

if (! $.cookie("cookieName")){

// do your stuff

// set cookie now

$.cookie("cookieName", "firstSet", {"expires" : 7})

}

}) 
```

以上使用以下插件。[http://www.electrictoolbox.com/jquery-cookies/](http://www.electrictoolbox.com/jquery-cookies/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:43:02.263

用cookie尝试以下代码，

```
$(document).ready(function() {
    var visited = $.cookie('visited');
    if (visited == 'yes') {
        return false;
    } else {
        $.fancybox({
            'width': '60%',
            'height': '80%',
            'autoScale': true

        });
    }
    $.cookie('visited', 'yes', { expires: 7 });
    }); 
```

# java - 将 java gui 组件的外观更改为 windows 外观

> ID：12597507
> 
> 赞同：1
> 
> 时间：2012-09-26T08:23:07.560
> 
> 标签：java, user-interface, look-and-feel

是否可以将 Java GUI 的外观更改为您的操作系统（例如 Windows）的外观？如果是这样，那我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T08:26:45.017

是的，请参阅Oracle 的 Java 教程中的[如何设置外观。](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html)

要将外观设置为当前系统外观：

```
UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T08:26:46.167

请参阅[UIManager](http://docs.oracle.com/javase/6/docs/api/javax/swing/UIManager.html)。

> UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());

# c# - 从C#中的字符串中提取多个子字符串？

> ID：12597513
> 
> 赞同：-6
> 
> 时间：2012-09-26T08:23:30.333
> 
> 标签：c#, string, substring

我有一个固定长度为 14 的字符串...并且该字符串包含从 0 到 9 的数字...现在我必须从第一个子字符串将具有第一个 2 个字符然后第二个子字符串将具有接下来的 6 个字符和最后一个子字符串将具有最后 6 个字符。例如。

```
string =  "12345678901234";

substr1 =" 12";
substr2 = "345678";
substr3 = "901234"; 
```

像这样...任何人帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T08:26:18.863

**[C# 子字符串示例](http://www.dotnetperls.com/substring)**

```
string x  =  "12345678901234";
MessageBox.Show(x.Substring(0, 2)); // sub1
MessageBox.Show(x.Substring(2, 6)); // sub2
MessageBox.Show(x.Substring(8, 6)); // sub3 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T08:37:59.020

```
string str = "12345678901234";

string str1 = string.Empty;
string str2 = string.Empty;
string str3 = string.Empty;
for (int i = 0; i < str.Length; i++)
{
    if (i < 2)
        str1 += str[i];
    else if (i > 1 && i < 8)
        str2 += str[i];
    else
        str3 += str[i];
} 
```

# tfs - VSS 到 TFS 迁移

> ID：12597516
> 
> 赞同：0
> 
> 时间：2012-09-26T08:23:54.437
> 
> 标签：tfs, visual-sourcesafe, vssconverter

我已经从 VSS 迁移到 TFS。但是我的一些团队成员再次检查了对 VSS 的一些修改。如何将这些更改再次迁移到 TFS？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T11:58:19.290

ID：

*   使用 VSS 上的历史记录来确定他们更改了哪些文件
*   将这些更改放入您的 VSS 工作区，并检查 TFS 工作区中的等效文件
*   将更改的 (VSS) 文件复制到 TFS 工作区中的文件上
*   构建、测试、签入到 TFS
*   使用 VSS Admin 工具撤销对 SourceSafe 代码库的所有写入权限，以免再次发生这种情况。
*   如果不再需要 VSS，请让开发人员卸载它，这样就不会再次发生

# latex - 如何将乳胶引用添加到 pandoc 降价文件的代码块？

> ID：12597517
> 
> 赞同：2
> 
> 时间：2012-09-26T08:24:00.270
> 
> 标签：latex, markdown, pandoc

我已阅读指南[http://johnmacfarlane.net/pandoc/README.html#verbatim-code-blocks](http://johnmacfarlane.net/pandoc/README.html#verbatim-code-blocks)

在示例中

```
~~~~ {#mycode .haskell .numberLines startFrom="100"}
qsort []     = []
qsort (x:xs) = qsort (filter (< x) xs) ++ [x] ++
               qsort (filter (>= x) xs)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 
```

如何`\label{code}`在此代码块中添加乳胶标签，以便我可以引用它`\ref{code}`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T18:48:55.057

根据您链接到的页面`#mycode`位是代码块的标识符，这相当于 LaTeX 的`\label`. 您可以使用[内部链接](http://johnmacfarlane.net/pandoc/README.html#internal-links)和标识符引用此代码块`#mycode`。

# java - 如果用户登录后访问登录页面，如何重定向到主页？

> ID：12597519
> 
> 赞同：18
> 
> 时间：2012-09-26T08:24:03.037
> 
> 标签：java, spring-security

这是我的弹簧安全配置：

```
<http pattern="/auth/login" security="none" />
<http pattern="/auth/loginFailed" security="none" />
<http pattern="/resources/**" security="none" />

<http auto-config="true" access-decision-manager-ref="accessDecisionManager">
    <intercept-url pattern="/auth/logout" access="permitAll"/>
    <intercept-url pattern="/admin/**" access="ADMINISTRATIVE_ACCESS"/>
    <intercept-url pattern="/**" access="XYZ_ACCESS"/>

    <form-login
        login-page="/auth/login"
        authentication-failure-url="/auth/loginFailed"
        authentication-success-handler-ref="authenticationSuccessHandler" />
    <logout logout-url="/auth/logout" logout-success-url="/auth/login" />
</http> 
```

`authenticationSuccessHandler`扩展了`SavedRequestAwareAuthenticationSuccessHandler`确保用户被重定向到他最初请求的页面。

但是，由于`/auth/login`标记为`security="none"`，如果用户在登录后访问登录页面，我无法成功将用户重定向到主页。我相信这也是正确的[用户体验](https://ux.stackexchange.com/questions/26100/what-should-happen-if-the-login-page-is-accessed-post-login)。

我也尝试了以下方法，但`Principal`对象总是`null`，大概是因为该`security="none"`属性。

```
@RequestMapping(value = "/auth/login", method = GET)
public String showLoginForm(HttpServletRequest request, Principal principal) {
    if(principal != null) {
        return "redirect:/";
    }

    return "login";
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-26T13:04:12.150

我比上次更深入地检查了该主题，发现您必须确定用户是否在控制器中由您自己进行身份验证。Row Winch（Spring Security 开发人员）[在这里说](http://forum.springsource.org/showthread.php?119015-Login-page-is-not-redirecting-for-logged-user)：

> Spring Security 不知道您的应用程序的内部结构（即，如果您想根据用户是否登录来使您的登录页面灵活）。要在请求登录页面并且用户登录时显示您的主页，请使用`SecurityContextHolder`登录页面（或其控制器）并将用户重定向或转发到主页。

因此，解决方案将确定用户请求`/auth/login`是否是匿名的，如下所示。

*applicationContext-security.xml*：

```
<http auto-config="true" use-expressions="true"
        access-decision-manager-ref="accessDecisionManager">
    <intercept-url pattern="/auth/login" access="permitAll" />
    <intercept-url pattern="/auth/logout" access="permitAll" />
    <intercept-url pattern="/admin/**" access="ADMINISTRATIVE_ACCESS" />
    <intercept-url pattern="/**" access="XYZ_ACCESS" />

    <form-login login-page="/auth/login"
        authentication-failure-url="/auth/loginFailed"
        authentication-success-handler-ref="authenticationSuccessHandler" />
    <logout logout-url="/auth/logout" logout-success-url="/auth/login" />
</http>

<beans:bean id="defaultTargetUrl" class="java.lang.String">
    <beans:constructor-arg value="/content" />
</beans:bean>

<beans:bean id="authenticationTrustResolver"
        class="org.springframework.security.authentication.AuthenticationTrustResolverImpl" />

<beans:bean id="authenticationSuccessHandler"
        class="com.example.spring.security.MyAuthenticationSuccessHandler">
    <beans:property name="defaultTargetUrl" ref="defaultTargetUrl" />
</beans:bean> 
```

添加到*applicationContext.xml* bean 定义：

```
<bean id="securityContextAccessor"
    class="com.example.spring.security.SecurityContextAccessorImpl" /> 
```

这是类

```
public final class SecurityContextAccessorImpl
      implements SecurityContextAccessor {

  @Autowired
  private AuthenticationTrustResolver authenticationTrustResolver;

  @Override
  public boolean isCurrentAuthenticationAnonymous() {
    final Authentication authentication =
        SecurityContextHolder.getContext().getAuthentication();
    return authenticationTrustResolver.isAnonymous(authentication);
  }
} 
```

实现简单的接口

```
public interface SecurityContextAccessor {
  boolean isCurrentAuthenticationAnonymous();
} 
```

（[`SecurityContextHolder`访问代码与控制器分离，我遵循了这个答案的建议](https://stackoverflow.com/a/8765597/708434)，因此是`SecurityContextAccessor`接口。）

最后但并非最不重要的重定向控制器中的逻辑：

```
@Controller
@RequestMapping("/auth")
public class AuthController {
  @Autowired
  SecurityContextAccessor securityContextAccessor;

  @Autowired
  @Qualifier("defaultTargetUrl")
  private String defaultTargetUrl;

  @RequestMapping(value = "/login", method = RequestMethod.GET)
  public String login() {
    if (securityContextAccessor.isCurrentAuthenticationAnonymous()) {
      return "login";
    } else {
      return "redirect:" + defaultTargetUrl;
    }
  }
} 
```

定义`defaultTargetUrl`String bean 似乎是一个 hack，但我没有更好的方法不硬编码 url...（实际上在我们的项目中，我们使用[`<util:constant>`](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#xsd-config-body-schemas-util-constant)包含静态 final String 字段的类。）但它毕竟有效。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-01-13T14:33:28.190

您还可以将登录页面限制为`ROLE_ANONYMOUS`并设置`<access-denied-handler />`：

```
<access-denied-handler ref="accessDeniedHandler" />
<intercept-url pattern="/auth/login" access="ROLE_ANONYMOUS" /> 
```

并在您的处理程序中检查用户是否已通过身份验证：

```
@Service
public class AccessDeniedHandler extends AccessDeniedHandlerImpl {
    private final String HOME_PAGE = "/index.html";

    @Override
    public void handle(HttpServletRequest request, HttpServletResponse response, AccessDeniedException e) throws IOException, ServletException {
        Authentication auth = SecurityContextHolder.getContext().getAuthentication();
        if (auth != null && !(auth instanceof AnonymousAuthenticationToken)) {
            response.sendRedirect(HOME_PAGE);
        }

        super.handle(request, response, e);
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-08-02T08:21:12.270

为此目的实现一个重定向拦截器：

拦截器（实现[`HandlerInterceptor`](http://docs.spring.io/spring/docs/3.1.4.RELEASE/javadoc-api/org/springframework/web/servlet/HandlerInterceptor.html)接口）检查是否有人尝试访问登录页面，如果此人已经登录，则拦截器发送重定向到索引页面。

```
public class LoginPageRedirectInterceptor extends HandlerInterceptorAdapter {    

    private String[] loginPagePrefixes = new String[] { "/login" };

    private String redirectUrl = "/index.html";

    private UrlPathHelper urlPathHelper = new UrlPathHelper();

    @Override
    public boolean preHandle(HttpServletRequest request,
                             HttpServletResponse response,
                             Object handler) throws Exception {

        if (isInLoginPaths(this.urlPathHelper.getLookupPathForRequest(request))
                           && isAuthenticated()) {
            response.setContentType("text/plain");
            sendRedirect(request, response);
            return false;
        } else {
            return true;
        }
    }

    private boolean isAuthenticated() {
        Authentication authentication =
                        SecurityContextHolder.getContext().getAuthentication();
        if (authentication == null) {
            return false;
        }
        if (authentication instanceof AnonymousAuthenticationToken) {
            return false;
        }
        return authentication.isAuthenticated();
    }

    private void sendRedirect(HttpServletRequest request,
                              HttpServletResponse response) {

        String encodedRedirectURL = response.encodeRedirectURL(
                                 request.getContextPath() + this.redirectUrl);
        response.setStatus(HttpStatus.SC_TEMPORARY_REDIRECT);
        response.setHeader("Location", encodedRedirectURL);
    }

    private boolean isInLoginPaths(final String requestUrl) {   
        for (String login : this.loginPagePrefixes) {
            if (requestUrl.startsWith(login)) {
                return true;
            }
        }
        return false;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-07T20:04:11.837

```
<http pattern="/login" auto-config="true" disable-url-rewriting="true">
  <intercept-url pattern="/login" access="ROLE_ANONYMOUS"/>
  <access-denied-handler error-page="/index.jsp"/>
</http> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-04T06:45:38.070

您可以通过元素中的`access-denied-page`属性保持简单流程，或者像[dtrunk](https://stackoverflow.com/users/1163457/dtrunk)所说的那样编写拒绝访问的处理程序。配置就像`http`

```
<http access-denied-page="/403" ... >
 <intercept-url pattern="/login" access="ROLE_ANONYMOUS" />
 <intercept-url pattern="/user/**" access="ROLE_USER" />
 <intercept-url pattern="/admin/**" access="ROLE_ADMIN" />
 <form-login login-page="/login" default-target-url="/home" ... />
 ...
</http> 
```

在控制器中`/403`

```
@RequestMapping(value = "/403", method = RequestMethod.GET)
public String accessDenied() { //simple impl
    return "redirect:/home";
} 
```

并且对于`/home`

```
@RequestMapping(value = "/home", method = RequestMethod.GET)
public String home(Authentication authentication) {
 // map as many home urls with Role
    Map<String, String> dashBoardUrls = new HashMap<String, String>();
    dashBoardUrls.put("ROLE_USER", "/user/dashboard");
    dashBoardUrls.put("ROLE_ADMIN", "/admin/dashboard");

    String url = null;

    Collection<? extends GrantedAuthority> grants = authentication
            .getAuthorities();
 // for one role per user
    for (GrantedAuthority grantedAuthority : grants) {
        url = dashBoardUrls.get(grantedAuthority.getAuthority());
    }
    if (url == null)
        return "/errors/default_access_denied.jsp";

    return "redirect:" + url;
} 
```

当您在未登录的情况下发出请求时`/admin/dashboard`，它将`/login`由安全自动重定向

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-10-30T22:20:21.377

您可以尝试检查

```
if(SecurityContextHolder.getContext().getAuthentication() == null) 
```

True 表示用户未通过身份验证，因此可以发送到登录页面。我不知道这是多么强大/可靠，但尝试似乎是合理的。

# emacs - Emacs 中是否有快速自动换行的方法？

> ID：12597524
> 
> 赞同：1
> 
> 时间：2012-09-26T08:24:56.577
> 
> 标签：emacs, word-wrap

有没有像 KDE 的 Kate 的“应用自动换行”功能那样快速简便的自动换行方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T08:29:51.117

*   **进入包装模式**=`M-x auto-fill-mode`
*   **换行**= 选择文本 ->`M-q`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T14:55:26.313

虽然 mishadoff 的答案非常适合默认自动换行，但我曾经不得不重新实现它，因为我对 Emacs 的做法不满意，所以我试着把它的一些部分拼凑起来，这里是：[http：/ /pastebin.com/75q65hRf](http://pastebin.com/75q65hRf)以备不时之需。

使用那段代码，您可以配置要换行的字符，终止单词的字符，并且还可以设置异常规则，以防止本来会破坏行的字符不会执行此操作。它还可以在右侧和左侧填充创建的列（我使用此功能来格式化和显示文档文本）。

# android - PayPal 付款页面未显示

> ID：12597526
> 
> 赞同：2
> 
> 时间：2012-09-26T08:25:01.817
> 
> 标签：android

我正在创建测试目的的贝宝应用程序。我已经创建了测试贝宝帐户，并在我的按钮单击活动中编写了下面给出的代码。但什么都没有显示并出现异常：

```
09-26 13:52:51.908: E/NetworkHandler(540): postXML caught exception doing I/O, mobileclient.sandbox.paypal.com 
```

代码：

```
float ammount = Float.parseFloat(_details.get(_G_no)
            .get_product_price());
     PayPalPayment newPayment = new PayPalPayment();
     newPayment.setSubtotal(BigDecimal.valueOf(ammount));
     newPayment.setCurrencyType("USD");
     newPayment.setRecipient("account@gmail.com");
     newPayment.setMerchantName("Merchant");
    PayPal pp = PayPal.getInstance();
     if(pp==null)
     pp = PayPal.initWithAppID(this, id, PayPal.ENV_SANDBOX);

    final Intent paypalIntent = pp.checkout(newPayment, this);
        this.startActivityForResult(paypalIntent, 1); 
```

我的应用程序中有互联网许可。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-10T17:12:59.020

我已从 MPL 库（已弃用）更新为新的 PayPal [Android SDK](https://github.com/paypal/PayPal-Android-SDK)。我已经解决了这个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-03T09:01:52.727

我不知道，这是否正确。但我通过在您的代码之前创建互联网连接找到了解决方案，感谢 Vikalp patel 进行识别`Have you found the solution of NetworkHandler Error`。

```
public void PayPalButtonClick_ ( View v )
{
    class asynctaskToInitLibrary extends AsyncTask<String, Integer, String >
    {
        @Override
        protected String doInBackground(String... params) 
        {

            URL actualUrl = null;
            try 
            {
                actualUrl = new URL("http://www.google.com") ;
            } 
            catch (MalformedURLException e) 
            {
                e.printStackTrace();
            }
            try 
            {
                HttpURLConnection cn = (HttpURLConnection)actualUrl.openConnection();
                Log.i(cn.getResponseMessage(),"tushar:connectionResponse") ;
            } 
            catch (IOException e) 
            {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            PayPal pp = PayPal.getInstance();

            // If the library is already initialized, then we don't need to initialize it again.
            if(pp == null) 
            {
                // This is the main initialization call that takes in your Context, the Application ID, and the server you would like to connect to.
                pp = PayPal.initWithAppID(Paypal_MPL.this, "APP-80W284485P519543T", PayPal.ENV_SANDBOX );

                // -- These are required settings.
                pp.setLanguage("en_US"); // Sets the language for the library.
                // --

                // -- These are a few of the optional settings.
                // Sets the fees payer. If there are fees for the transaction, this person will pay for them. Possible values are FEEPAYER_SENDER,
                // FEEPAYER_PRIMARYRECEIVER, FEEPAYER_EACHRECEIVER, and FEEPAYER_SECONDARYONLY.
                pp.setFeesPayer(PayPal.FEEPAYER_EACHRECEIVER); 
                // Set to true if the transaction will require shipping.
                pp.setShippingEnabled(true);
                // Dynamic Amount Calculation allows you to set tax and shipping amounts based on the user's shipping address. Shipping must be
                // enabled for Dynamic Amount Calculation. This also requires you to create a class that implements PaymentAdjuster and Serializable.
                pp.setDynamicAmountCalculationEnabled(false);
                // --
            }

            if (pp.isLibraryInitialized()) 
            {
                return "initialized" ;
            }
            else 
            {
                return "not-initialized" ;
            }
        }
        protected void onPostExecute(String result)
        {
            initializationStatus ( result ) ;
        }
    }

    asynctaskToInitLibrary object = new asynctaskToInitLibrary() ;
    object.execute("") ;
} 
```

# asp.net - 从 ASP.NET/Web 服务访问远程 SQL 服务器

> ID：12597527
> 
> 赞同：0
> 
> 时间：2012-09-26T08:25:08.277
> 
> 标签：asp.net, sql-server, web-services, vsto

我有需要访问 SQL 服务器数据库的 VSTO 应用程序，但它不能直接访问。我已经想到了两种方法来执行这项任务，但我不知道这些是否是最好的：

*   创建将从 VSTO 访问并调用 SQL 服务器数据库的“假”aspx
*   在我的远程服务器上托管 Web 服务。此 Web 服务将从 VSTO 访问，并将调用 SQL 服务器数据库

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T08:27:49.377

你的第二个选择是要走的路。创建 WCF 服务，并在受信任的环境中访问 SQL Server。您可以使用 Windows 身份验证保护服务，或者在每次调用时传递用户名/密码或会话密钥。

# ios - 上传二进制文件后更改元数据

> ID：12597534
> 
> 赞同：3
> 
> 时间：2012-09-26T08:25:46.447
> 
> 标签：ios, app-store, app-store-connect

我有一个简单的问题。

我可以在 itunesconnect.apple.com 的“元数据和上传”部分中更改元数据（如“关键字”字段或“支持 URL”），在我上传二进制文件之后，但在提交应用程序之前？

谢谢。

# c# - 如何通过 zip 从列表中访问城市名称？

> ID：12597536
> 
> 赞同：0
> 
> 时间：2012-09-26T08:25:45.883
> 
> 标签：c#, linq

我有一个名为地址的列表。现在我想要 Address.City 名称，其中 Address.Zip = 822。如何通过在列表中选择查询从地址列表中访问城市名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T08:29:06.717

这是非常简单的 LINQ。

```
string city = Address
    .Where(a => a.Zip == 822)
    .Select(a => a.City)
    .FirstOrDefault(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T08:29:01.857

尝试，

```
Address obj = list.FirstOrDefault(o => o.Zip == 822);

if (obj != null)
{
  string city = obj.City;
} 
```

# javascript - 从上到下滑动文本（书页）

> ID：12597540
> 
> 赞同：1
> 
> 时间：2012-09-26T08:26:05.267
> 
> 标签：javascript, scroll, slide, marquee

我正在开发一个小型应用程序（phonegap），当用户按下音频按钮同时收听文本时，它会滚动一本书的页面。总体思路:-)

我已经研究了 Marquee 版本，到目前为止有效，但它有一些奇怪的行为：

```
<marquee behavior="scroll" height="100%" vspace="0%" direction="up" id="mymarquee" scrollamount="3" scolldelay="1000" loop="1"> TEXT HERE </marquee> 
```

将“id="mymarquee”连接到音频播放按钮。这有效，但不像他们所说的那样推荐。最好使用 javascript 版本。所以到目前为止我在网上找到了一个很酷的版本，但它从右边到左边。现在我不是世界上最好的程序员，所以我想知道是否有人可以帮助调整下面的脚本，以便我们可以为其添加方向。这样脚本将是多功能的（对于其他人也是如此），因为我只需要从上到下滚动。

这是 HTML 部分：

```
<script src="js/slideandfade.js" type="text/javascript"></script>

<DIV ID="fader" STYLE="text-align:right;"></DIV>

<SCRIPT TYPE="text/javascript">
fadeandscroll('TEXT HERE', '#676F77', '#DFF5FF', 40, 70, 250, 10); 
</SCRIPT> 
```

这是 slideandfade.js

```
//Text fade
var bgcolor; 
var fcolor;  
var heading;

//Number of steps to fade
var steps; 

var colors;
var color = 0;
var step = 1;

var interval1;
var interval2;

//fade: fader function
// Fade from backcolor to forecolor in specified number of steps
function fade(headingtext,backcolor,forecolor,numsteps) {
if (color == 0) {   
    steps = numsteps;
    heading = "<font color='{COLOR}'>"+headingtext+"</strong></font>";
    bgcolor = backcolor;
    fcolor = forecolor;
    colors = new Array(steps);
    getFadeColors(bgcolor,fcolor,colors);
}

// insert fader color into message
var text_out = heading.replace("{COLOR}", colors[color]);

// write the message to the document
document.getElementById("fader").innerHTML = text_out;

// select next fader color
color += step;

if (color >= steps) clearInterval(interval1);
}

//getFadeColors: fills colors, using predefined Array, with color hex strings fading from ColorA to ColorB
//Note: Colors.length equals the number of steps to fade
function getFadeColors(ColorA, ColorB, Colors) {
len = Colors.length;

//Strip '#' from colors if present
if (ColorA.charAt(0)=='#') ColorA = ColorA.substring(1);
if (ColorB.charAt(0)=='#') ColorB = ColorB.substring(1);

//Substract red green and blue components from hex string
var r = HexToInt(ColorA.substring(0,2));
var g = HexToInt(ColorA.substring(2,4));
var b = HexToInt(ColorA.substring(4,6));
var r2 = HexToInt(ColorB.substring(0,2));
var g2 = HexToInt(ColorB.substring(2,4));
var b2 = HexToInt(ColorB.substring(4,6));

// calculate size of step for each color component
var rStep = Math.round((r2 - r) / len);
var gStep = Math.round((g2 - g) / len);
var bStep = Math.round((b2 - b) / len);

// fill Colors array with fader colors
for (i = 0; i < len-1; i++) {
    Colors[i] = "#" + IntToHex(r) + IntToHex(g) + IntToHex(b);
    r += rStep;
    g += gStep;
    b += bStep;
}
Colors[len-1] = ColorB; // make sure we finish exactly at ColorB
}

//IntToHex: converts integers between 0 - 255 into a two digit hex string.
function IntToHex(n) {
var result = n.toString(16);
if (result.length==1) result = "0"+result;
return result;
}

//HexToInt: converts two digit hex strings into integer.
function HexToInt(hex) {
return parseInt(hex, 16);
}

var startwidth = 0;

//scroll: Make the text scroll using the marginLeft element of the div container
function scroll(startw) {
if (startwidth == 0) {
    startwidth=startw;
}

document.getElementById("fader").style.marginLeft = startwidth + "px";

if (startwidth > 1) {
    startwidth -= 1;    
} else {
    clearInterval(interval2);
}
}

function fadeandscroll(txt,color1,color2,numsteps,fademilli,containerwidth,scrollmilli) {
interval1 = setInterval("fade('"+txt+"','"+color1+"','"+color2+"',"+numsteps+")",fademilli);
interval2 = setInterval("scroll("+containerwidth+")",scrollmilli);
} 
```

# vb.net - 过滤 linq 的多个选项

> ID：12597542
> 
> 赞同：0
> 
> 时间：2012-09-26T08:26:21.180
> 
> 标签：vb.net, linq, linq-to-sql, search

我想有 3-4 个搜索选项。现在我在 If 语句中使用我的查询。

```
 if inputcol1 > 0 And Not inputCol2 = "" then 
         Dim list = (From P In db.table
                     Where P.column1 = inputCol1 and P.column2 = inputCol2
                     Select P).ToList()
     end if 
```

还有一个（或 4 个）具有另一个条件但几乎相同的查询，只有一个不同的 where 子句。所以这个查询是简化和简短的。因此，如果我有一个非常大的查询，那将是一团糟。而且我不希望其他程序员只为几个选项阅读这么多代码。

是否有一种适当的简单方法来查看搜索选项是否已填写并进行查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-12-13T20:35:24.137

现在已经很晚了，但我目前正在研究一个 VB.NET 项目，除了 Gert Arnold 的[回答](https://stackoverflow.com/a/12601019/2011156)之外，选择相同的对象也很重要。P 链接时，因为例如说 P 是项目实体，并且在您的最终结果中（过滤后）您正在选择其他列或对象详细信息，例如`query = (From P in query Select P.Name, P.Deadline)`，它将引发转换异常，因为该变量`query`与`Select P.Name, P.Deadline`. 因此，如果您想在最终选择中使用不同的结构，请使用另一个变量，例如：

```
Dim query = (From P in query Where P.Col2 = inputCol2 Select P)
Dim result = From P In query Select P.Name, P.Deadline ... 
'and then displaying it 
DataGridView.DataSource = result.toList() 
```

但是，我确实尝试过创建一个新类型，`result = From P in query Select New With {P.Name, P.Deadline}`但它没有用。不知道为什么，有空就去研究一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T09:15:16.337

您可能喜欢尝试[LinqKit](http://www.albahari.com/nutshell/linqkit.aspx "LinqKit")。有了这个库，你就有了一个`PredicateBuilder`带有方法的类：

```
public static Expression<Func<T, bool>> True<T>();
public static Expression<Func<T, bool>> False<T>();
public static Expression<Func<T, bool>> Or<T>(this Expression<Func<T, bool>> expr1, Expression<Func<T, bool>> expr2);
public static Expression<Func<T, bool>> And<T>(this Expression<Func<T, bool>> expr1, Expression<Func<T, bool>> expr2); 
```

这些是`Expression`对象的扩展，可以从 lambda 轻松创建。

有了这样的表情你就可以做到`yourDataSource.Where(expression)`。

对不起 c# 符号，我不知道 VB.net ...如果有人想将它修复到 VB，请随意。

编辑：

好吧，`PredicateBuilder`只是一个简洁的语法糖。在他们的网站上，您可以找到非常简单的完整源代码。不幸的是，在 C# 中。它是这样的：

```
using System;
using System.Linq;
using System.Linq.Expressions;
using System.Collections.Generic;

public static class PredicateBuilder
{
  public static Expression<Func<T, bool>> True<T> ()  { return f => true;  }
  public static Expression<Func<T, bool>> False<T> () { return f => false; }

  public static Expression<Func<T, bool>> Or<T> (this Expression<Func<T, bool>> expr1,
                                                      Expression<Func<T, bool>> expr2)
  {
    var invokedExpr = Expression.Invoke (expr2, expr1.Parameters.Cast<Expression> ());
    return Expression.Lambda<Func<T, bool>>
          (Expression.OrElse (expr1.Body, invokedExpr), expr1.Parameters);
  }

  public static Expression<Func<T, bool>> And<T> (this Expression<Func<T, bool>> expr1,
                                                       Expression<Func<T, bool>> expr2)
  {
    var invokedExpr = Expression.Invoke (expr2, expr1.Parameters.Cast<Expression> ());
    return Expression.Lambda<Func<T, bool>>
          (Expression.AndAlso (expr1.Body, invokedExpr), expr1.Parameters);
  }
} 
```

就是这样！表达式（在 .net 中是标准的，不需要额外的库）提供了一些很好的方法来处理它们，它们可以在`where`子句中使用。试试看 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T10:53:05.900

您的代码走在了正确的轨道上。您只需要更改[三元运算符](https://stackoverflow.com/questions/576431/is-there-a-conditional-ternary-operator-in-vb-net)的 if 语句：

```
 Dim table = New Dictionary(Of Integer, String)
    table.Add(1, "one")
    table.Add(2, "two")
    table.Add(3, "three")

    Dim inputCol1 As Integer
    Dim inputCol2 As String = "one"

    Dim list = (From P In table Where _
                (inputCol1 < 1 OrElse P.Key = inputCol1) _
                And (inputCol2 = "" OrElse P.Value = inputCol2) _
                Select P).ToList() 
```

在此问题上查找有关此情况的更多信息：[条件过滤](https://stackoverflow.com/questions/1005961/conditional-multiple-fields-searching-and-filtering-in-linq)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T11:45:57.610

最好的方法是有条件地扩展您的查询：

```
Dim query = (From P In db.table Select P)

If inputCol1.HasValue
    query = (From P in query Where P.column1 = inputCol1 Select P)
End If
If inputCol2.HasValue
    query = (From P in query Where P.inputCol2 = inputCol2 Select P)
End If
' And so on...

Dim list = query.ToList() 
```

条件过滤 with`Not inputCol2.HasValue OrElse P.Value = inputCol2`将创建一个带有无用谓词的查询。通过有条件地扩展您的查询，只会合并重要的谓词。

# blackberry - 黑莓下载失败

> ID：12597555
> 
> 赞同：0
> 
> 时间：2012-09-26T08:26:58.473
> 
> 标签：blackberry, download

我正在为 Blackberry OS 5 开发。

当我尝试`Browser`通过我的应用程序从 Internet 下载文件时，加载时间过长且失败。有谁知道为什么？

```
int clearConfirm = Dialog.ask(Dialog.D_YES_NO,
                              "Do you want to download?",
                              Dialog.NO);

if (clearConfirm == Dialog.YES) {
    try {
        Browser.getDefaultSession().displayPage("http://mysite/blackberry/file.cod");
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

这是我的代码......怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T11:48:51.750

**设备中部署/安装步骤（模拟黑莓Appworld环境）：**

*   在您的服务器中创建一个黑莓文件夹并将 xxx.cod 和 xxx.jad 粘贴到服务器中。使用 zip 提取器提取 .cod 文件。（为此，首先将 .cod 重命名为 .zip，然后在同一文件夹中解压缩）。

*   确保您的服务器可以从移动设备访问。

注意：如果服务器部署在私有 IP (LAN) 中，则移动设备需要 Wi-Fi 连接才能访问服务器。如果它部署在公共 IP 上，那么我们可以使用任何网络 Wi-Fi、2G 或 2G 或其他网络运营商 APN 设置连接进行访问。

*   在上面的代码中，将 url 更改为

> Browser.getDefaultSession().displayPage("http://mysite/blackberry/file.jad");

浏览器将下载并安装 jad 文件，然后在内部安装所有其他文件。如果需要，重新启动设备。

这对我有用。它也应该对你有用。

**编辑-1**

上述问题可能是由于 cod 文件的大小。但我的解决方案将最适合它。

# javascript - 是否有 JavaScript 的依赖管理工具/库？

> ID：12597557
> 
> 赞同：2
> 
> 时间：2012-09-26T08:27:06.170
> 
> 标签：javascript, dependency-management

是否有 JavaScript 的依赖管理工具/库？

PHP 有[Composer](http://getcomposer.org/)和[Packagist](http://packagist.org/)。

Ruby on Rails 有[Bundler](http://gembundler.com/)。

什么可用于 JavaScript？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T08:29:36.190

看看[鲍尔](https://github.com/bower/bower)。

您可以指定一个`components.json`包含项目所有依赖项的文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T09:15:41.063

在浏览器中有用于 nodejs的[npm](https://npmjs.org/)和用于依赖管理的[requirejs 。](http://requirejs.org/)

# java - Apache AXIS 在解析时忽略/跳过附加元素

> ID：12597558
> 
> 赞同：6
> 
> 时间：2012-09-26T08:27:07.480
> 
> 标签：java, apache, axis2, axis

我们使用第三方的网络服务。每当他们像添加新元素一样更新 XML 模式时，我们都会收到以下错误消息。

“SAXException：无效元素...”

AXIS 中是否有任何方法可以在解析 XML 时跳过接收到的附加元素？

我之前使用 AXIS 生成了 Web 服务客户端，我以前用于接收 XML，如下所示

```
<Flight>
   <AirlineCode>AB</AirlineCode> 
</Flight> 
```

一切正常。但现在我得到了一个额外的标签作为回应。

```
<Flight>
   <AirlineCode>AB</AirlineCode> 
   <OtherCode>XX</OtherCode> 
</Flight> 
```

为此，我得到了“无效元素”异常。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-02T17:28:50.480

Apache Axis2 版本 1.7.0-SNAPSHOT 能够通过使用开关进行编译来[忽略意外元素。](http://issues.apache.org/jira/browse/AXIS2-4859)`-Eiu`

[1.7.0-SNAPSHOT 的下载](https://repository.apache.org/content/groups/snapshots/org/apache/axis2/axis2-codegen/1.7.0-SNAPSHOT/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-28T20:59:30.123

Daniel 的回答应该会有所帮助，但请注意，您从 Axis2 获得的输出与您从 Axis 获得的输出非常不同，因此您可能不得不在某种程度上重写您的集成。此外，他提供的链接是针对 Axis2 的一个子集的。

您将需要整个 shebang 才能使其工作，并且可以在此处获得，因为在撰写本文时，我找不到在任何 maven 存储库上管理的此版本： [https ://repository.apache.org/content/groups /snapshots/org/apache/axis2/axis2/1.7.0-SNAPSHOT/](https://repository.apache.org/content/groups/snapshots/org/apache/axis2/axis2/1.7.0-SNAPSHOT/)

因为这个版本现在没有在 maven 中管理，所以弄清楚依赖关系是一个很大的痛苦。这是我使用的 gradle 依赖项的快照：

```
compile 'org.apache.ws.commons.schema:XmlSchema:1.4.7'
compile 'org.apache.ws.commons.axiom:axiom-api:1.2.15'
compile 'org.apache.neethi:neethi:3.0.1'
compile 'axis:axis-wsdl4j:1.6.3'
compile 'commons-logging:commons-logging:1.1.1'
compile files('C:\\temp\\wsdl\\axis2-1.7.0-SNAPSHOT.jar', 'C:\\temp\\wsdl\\axiom.jar')
compile group: 'commons-collections', name: 'commons-collections', version: '3.2' 
```

公理依赖项是我必须手动下载的，因为尝试使用存储库管理的版本无法正常工作，原因我不清楚。

除此之外，如果您没有与 Axis 技术堆栈结婚，我建议您避免使用它，而是将动态 WSDL 集成到 Java 框架中，该框架可以适应其 Schema 结构可能发生变化的 WebServices。

# mysql - 从 MySql 获取前一周的记录

> ID：12597560
> 
> 赞同：0
> 
> 时间：2012-09-26T08:27:11.083
> 
> 标签：mysql, sql, phpmyadmin

我有一个有很多记录的 MySql 表。但我想获取当前和前一周的单独记录。

查询完美运行的当前周记录

```
SELECT * FROM tbl_track WHERE WEEK(`date_created`) = WEEK(CURDATE()) 
```

查询前一周，但它不起作用

```
SELECT * FROM tbl_track WHERE WEEK(`date_created`) = WEEK(CURDATE()) INTERVAL 7 DAY 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T08:29:52.147

```
SELECT * FROM tbl_track 
WHERE WEEK(`date_created`) = WEEK(DATE_SUB(CURDATE(), INTERVAL 7 DAY)) 
```

或者：

```
SELECT * FROM tbl_track 
WHERE WEEK(`date_created`) = WEEK(CURDATE() - INTERVAL 7 DAY) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-26T08:33:05.860

这看起来不像可以使用索引，但这确实是一个附带问题。您希望您的 curdate 为 - 7 天

SELECT * FROM tbl_track WHERE WEEK( `date_created`) = WEEK(ADDDATE(CURDATE(), INTERVAL -7 DAY));

# scala - 具有对对象共享缓存、scala.concurrent.Lock、反应与接收的并发访问权限的 Scala 演员

> ID：12597563
> 
> 赞同：1
> 
> 时间：2012-09-26T08:27:24.300
> 
> 标签：scala, shared-memory, actor, locks

我正在编写一个软件，其中各种参与者同时创建同一个图形的部分。

图的节点通过类层次结构建模，层次结构的每个具体类都有一个伴生对象。

```
 abstract class Node
    class Node1(k1:Node, k2:Node) extends Node
    object Node1 {
      def apply(k1:Node, k2:Node) = ...
    }
    class Node2(k1:Node, k2:Node) extends Node
    object Node2 {
      def apply(k1:Node, k2:Node) = ...
    }
    ... 
```

到目前为止，一切都很好。

我们在创建时对节点执行结构哈希。也就是说，每个伴生对象都有一个 HashTable 存储节点实例，该节点实例以它们的构造函数参数为键，这用于检测具有相同子节点的给定节点类的实例是否已经存在，并返回该实例而不是创建新实例。这可以避免内存爆炸，并允许进行需要恒定时间的节点相等测试（参考比较而不是图形比较）。使用 scala.concurrent.Lock 保护对该映射的访问。

然而问题在于 Lock 在 jvm 线程级别上运行，并且根据 actor 的编码方式，它们可以分配在它们自己的 jvm 线程上，或者与同一个 JVM 线程中的几个其他 actor 交错，在这种情况下结构哈希不再起作用（即，可以创建几个结构相同的节点，并且只有其中一个会存储在缓存中，结构相等性将不再起作用）。

首先，我知道这种结构化哈希架构违背了参与者无共享的理念，但是出于性能原因，我们确实需要这种哈希来工作（恒定的时间相等性给我们带来了一个数量级的改进），但是有没有办法实现相互与将在参与者级别而不是 jvm 线程级别工作的参与者共享资源的排除？

我想过将节点伴侣封装在一个actor中以完全顺序访问工厂，但这意味着对所有现有代码的完全重写，还有其他想法吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T12:14:17.050

如果您共享了可变状态，请使用一个改变此状态的参与者。您可以让其他演员阅读，但让一名演员负责写入。

# c++ - 在 SystemC 中启用 debugf

> ID：12597564
> 
> 赞同：2
> 
> 时间：2012-09-26T08:27:25.280
> 
> 标签：c++, systemc

我正在查看 SystemC 的源代码，发现有以下内容：

```
#define DEBUGF \
    if (0) std::cout << "sc_cor_pthread.cpp(" << __LINE__ << ") " 
```

后来有几行，例如：

```
 DEBUGF << this << ": sc_cor_pthread::sc_cor_pthread()" << std::endl; 
```

（这些来自`sc_cor_pthread.cpp`）

我在配置使用时已经启用了调试选项，`../configure --enable-debug`但它似乎没有激活这些东西。我应该如何打开这些而不是手动修改源？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T20:06:49.803

将此添加到您的编译行：

```
-DDEBUGF 
```

# asp.net - 当从 webservice 顶部标签返回 json 数据时正在添加

> ID：12597574
> 
> 赞同：0
> 
> 时间：2012-09-26T08:28:08.440
> 
> 标签：asp.net, ajax, asp.net-ajax

大家好，当从 web 服务顶部标签返回 json 数据时，请让我知道如何删除 web 服务中的顶部 xml 标签，
如果有人遇到这个问题，请告诉我

我用下面的方法读

var obj = 新列表（）；

```
 //MakesInfo objMakes = new MakesInfo();
    MakesBL objMakesBL = new MakesBL();

    if (Session["Makes"] == null)
    {
        obj = (List<MakesInfo>)objMakesBL.GetMakes();
        Session["Makes"] = obj;
    }
    else
    {
        obj = (List<MakesInfo>)Session["Makes"];
    }
    StringBuilder str = new StringBuilder();

    //var oSerializer = new System.Web.Script.Serialization.JavaScriptSerializer();
    //string sJSON = oSerializer.Serialize(obj);

    //return sJSON;

    //yourobject is your actula object (may be collection) you want to serialize to json
    DataContractJsonSerializer serializer = new DataContractJsonSerializer(typeof(List<MakesInfo>));

    //create a memory stream
    MemoryStream ms = new MemoryStream();
    //serialize the object to memory stream
    serializer.WriteObject(ms, obj);
    //convert the serizlized object to string
    string jsonString = Encoding.Default.GetString(ms.ToArray());
    //close the memory stream
    ms.Close();
    return jsonString; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:19:17.220

使用 WCF 只返回列表 json 对象数据返回

# javascript - 将小书签脚本应用于 URL

> ID：12597578
> 
> 赞同：0
> 
> 时间：2012-09-26T08:28:23.423
> 
> 标签：javascript, url, bookmarklet

是否可以将 javascript 片段附加到 URL，以便在加载 URL 时同时执行脚本。举个例子：

```
<a href="some/path/to/file.html:javascript:alert('Welcome')">Link text</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:05:14.403

答案是不！如果你能做到这一点，那么安全性就会有很大的问题。脚本可以复制 cookie 或用户数据...

# java - 在java android中将图像作为背景进行编辑

> ID：12597585
> 
> 赞同：1
> 
> 时间：2012-09-26T08:28:48.103
> 
> 标签：java, android, image, edit

我通过以下代码创建了一个图像：

```
Bitmap bmp = Bitmap.createBitmap(512, 512, Bitmap.Config.ARGB_8888);
Canvas canvas = new Canvas(bmp);

try {
    int tile1ResID = getResources().getIdentifier("drawable/m" + String.valueOf(tileOfPoint.x) + "_" + String.valueOf(tileOfPoint.y), "drawable", "com.example.sabtt1");

    canvas.drawBitmap(Bitmap.createScaledBitmap(BitmapFactory.decodeResource(getResources(), tile1ResID), 256, 256, true), 0, 0, null);
    canvas.save();
}
catch (Exception e) {
}

canvas.save();

ImageView imgMap1 = (ImageView) findViewById(R.id.imgMap1);
imgMap1.setImageDrawable(new BitmapDrawable(Bitmap.createBitmap(bmp, 0, 0, 500, 500))); 
```

现在我想把它作为背景。这样用户就可以添加图像或在其上绘图。如何将其设置为背景？是否可以同时添加图像和用手指绘制？

我使用此代码进行绘制：

```
@Override
public void onClick(View arg0) {
    try {
        Bitmap gestureImg = gesture.getGesture().toBitmap(100, 100, 8, Color.BLACK);

        ByteArrayOutputStream bos = new ByteArrayOutputStream();
        gestureImg.compress(Bitmap.CompressFormat.PNG, 100, bos);
        byte[] bArray = bos.toByteArray();

        Intent intent = new Intent(Activity1.this, Activity2.class);

        intent.putExtra("draw", bArray);
        startActivity(intent);
    }
    catch (Exception e) {
        e.printStackTrace();
        Toast.makeText(Activity1.this, "No draw on the string", 3000).show();
    }
} 
```

和 OnDragListener 用于添加和移动图像。

我知道我应该使用以下代码作为背景：

```
LinearLayout ll = new LinearLayout(this);
    ll.setBackgroundResource(R.drawable.nn);
    this.setContentView(ll); 
```

但是通过使用此代码，我看不到其他图像。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T10:19:31.890

您可以在主位图上绘制其他位图：

```
Bitmap bmp = Bitmap.createBitmap(512, 512, Bitmap.Config.ARGB_8888);
bmp = <load from resource>
Canvas canvas = new Canvas(bmp);
Bitmap gestureImg = <get bitmap from gesture or loading>
canvas.drawBitmap(gestureImg); 
```

然后加载最终的位图：

```
ImageView imgMap1 = (ImageView) findViewById(R.id.imgMap1);
imgMap1.setImageDrawable(new BitmapDrawable(Bitmap.createBitmap(bmp, 0, 0, 500, 500))); 
```

或者，您可以将主位图和所有其他手势/加载位图存储在单独的对象中，当您想要更新时，`imgMap1`您可以制作组合位图；

还可以将新位图用作背景：

```
ll.setBackgroundDrawable( new BitmapDrawable( bmp ) ); 
```

# ios - 奇怪的 iOS 应用商店更新/安装行为

> ID：12597587
> 
> 赞同：0
> 
> 时间：2012-09-26T08:28:55.967
> 
> 标签：ios, xcode, xcode4, app-store

我最近发布了一个 iOS 应用程序的重大更新，我们称之为新版本 2.0 和之前上传的 1.0。v2.0 更新已准备好销售，并于 2012 年 9 月 20 日 09:35（约 6 天前）发布到商店。从那以后，当用户第一次更新或安装我的应用程序时，我看到了一些非常奇怪的行为。尽管应用商店元数据准确地反映了新版本，但一些用户（和我自己）下载了更新，只是为了看到之前上传的 v1.0 二进制文件已安装。卸载应用程序并重新下载它会导致安装正确的 v2.0 应用程序。这种行为最近在 12 小时前就已经出现。我还看到一些用户抱怨更新中的崩溃，我很肯定这只会出现在旧版本中。我是否有可能通过项目设置导致此问题出现？我不这么认为，但我真的很想弄清楚这一点，因为它会对应用程序评级产生负面影响。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-19T12:54:49.653

以下步骤解决了我的问题。

*   在 iTunes 连接中单击应用程序图标。
*   选择“权利和定价”
*   选择“管理此应用的 iCloud 设置”
*   现在检查您不希望用户从 iCloud 下载的版本。

# gemfire - Gemfire 地区放

> ID：12597588
> 
> 赞同：0
> 
> 时间：2012-09-26T08:28:56.717
> 
> 标签：gemfire, geode

我有两个不同的线程，其中一个将信息放入 Gemfire 区域，另一个从同一个 Gemfire 区域读取并删除相同的信息。问题是：如果第二个线程忙，第一个线程继续将信息放入 Gemfire 区域。

需要什么 - 如果达到区域中的某些项目限制，则阻止第一个线程。可以手动实现此功能，但 Gemfire 中可能已经存在相同的机制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T18:29:10.787

GemFire 没有任何类型的阻塞队列抽象，所以你是对的，你必须手动实现它。但是，我还想问你为什么觉得有必要以这种方式限制 GemFire？如果您担心内存消耗，您始终可以将您的区域配置为在达到特定条目计数阈值或达到堆阈值时溢出到磁盘。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-15T23:32:10.847

不要认为 gemfire 可以选择阻止 put 操作，但它可以选择溢出到磁盘。

但是，如果您仍然想使用阻止选项。您可以在您的区域上使用 CacheListener 并且可以执行大小操作和块/睡眠操作。放置操作将被阻止，直到侦听器完成。

您可以轻松地重用/删除/添加侦听器组件。

# macos - QRawFont::fromFont 无法正常工作

> ID：12597595
> 
> 赞同：2
> 
> 时间：2012-09-26T08:29:12.540
> 
> 标签：macos, qt

我在 Mac OS X 10.6.3 上的 Qt 上发现了一些问题：

```
QFont font = QFont("Wingdings");    //font.family() == "Wingdings"
QRawFont rawFont = QRawFont::fromFont(font);    //rawFont.familyName() == "Lucida Grande" 
```

我认为 rawFont.familyName() 应该是“Wingdings”。在 Windows 上，此代码可以正常工作。

我试过这个方法：

```
QRawFont ( const QString & fileName, qreal pixelSize, QFont::HintingPreference hintingPreference = QFont::PreferDefaultHinting ) 
```

在字体文件上，它可以正常工作。

我真的不知道如何纠正这个。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T10:16:55.093

您*可能*已经发现了一个错误。

如果您查看[4.8 的 QRawFont::fromFont 实现](https://qt.gitorious.org/qt/qt/blobs/4.8/src/gui/text/qrawfont.cpp#line628)，您会看到：

```
[...]
#if defined(Q_WS_MAC)   
    QTextLayout layout(QFontDatabase::writingSystemSample(writingSystem), font);
    layout.beginLayout();
    QTextLine line = layout.createLine();
    layout.endLayout();
    QList<QGlyphRun> list = layout.glyphRuns();
    if (list.size()) {
        for (int i = 0; i < list.size(); i++) {
            rawFont = list.at(i).rawFont();
            if (rawFont.familyName() == font.family())
                return rawFont;
        }
        return list.at(0).rawFont();
    }
#else
[...] 
```

显然，这种方法是 Mac OS X 上的 hack。该方法在 HEAD 修订版（大概是 5.x）中发生了变化，并且不再有针对 OS X 的 hack。

# c# - C#从窗口句柄获取父进程

> ID：12597599
> 
> 赞同：1
> 
> 时间：2012-09-26T08:29:26.817
> 
> 标签：c#, process, handle, intptr

我有一个 C# windows 应用程序，并最终从互操作组件启动一个对话框。问题是这个对话窗口有时会出现在 c# 应用程序的主窗口后面，迫使用户使用 alt-tab 来找到它。

我已经采取措施找到这个对话窗口并将其提出来......

```
private static extern bool SetForegroundWindow(IntPtr hWnd);

public class SearchData
{
    public string Wndclass;
    public string Title;
    public IntPtr hWnd;
}

private static extern bool EnumWindows(EnumWindowsProc lpEnumFunc, ref SearchData data);
private delegate bool EnumWindowsProc(IntPtr hWnd, ref SearchData data);

public static bool EnumProc(IntPtr hWnd, ref SearchData data)
{
  //Code to determine whether the window from handle hWnd is our target window.
  //apply handle, title, class to data and halt the enumeration
} 
```

...但是“找到”对话框是有问题的，因为对话框的 className 和表单标题发生了变化。

但是，对话框窗口的父进程（任务管理器>转到进程）与当前进程相同。因此，为了正确“找到”这个对话框窗口，我的目标是枚举所有窗口，找到父进程 ID 并与 CurrentProcess 进行比较。

有没有办法从窗口句柄获取整个父进程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T08:54:05.800

[GetWindowThreadProcessId](https://msdn.microsoft.com/en-us/library/windows/desktop/ms633522%28v=vs.85%29.aspx)将完成这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:32:20.850

在打开对话框之前尝试隐藏您的应用程序窗口。这样它就不会出现在它后面。

# iphone - 如何设置指向 CGColor 对象 nil / NULL 的指针？

> ID：12597600
> 
> 赞同：0
> 
> 时间：2012-09-26T08:29:33.550
> 
> 标签：iphone, objective-c, ios, cocoa-touch, memory-management

我有以下财产：

```
@property (nonatomic) CGColorRef *strokeColor; 
```

在我的程序的某个时刻，我将它设置为 nil。然后稍后在我的程序中，我检查它是否为零：

```
CGColorRef strokeColor = (*graphicPath.strokeColor != nil) ? CGColorRetain(*graphicPath.strokeColor)  : nil; 
```

我在这条线上的访问权限不好。我也尝试过使用 NULL 并且仍然没有骰子。当其中存储了一些东西并且它不是 nil / NULL 时，它就可以工作。

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T08:43:09.027

从`*`您的 strokeColor 的定义中删除（它已经是一个指针，因为它是 a `CGColorRef`）以及从图形路径中删除，它可能会解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T09:08:31.020

检查我上面的评论：

> 无论我不明白您要做什么还是您的语法肯定是错误的。为什么在比较中使用间接（*）？记住 CGColorRef 已经是一个引用，你不需要将它用作指针！

如果对您有帮助，请接受这个答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T11:22:56.150

不得不改变

```
(*graphicPath.strokeColor != nil) 
```

到

```
(graphicPath.strokeColor != nil) 
```

（去掉星号）。

# mysql - 将数据添加到 HTML 组合框

> ID：12597602
> 
> 赞同：0
> 
> 时间：2012-09-26T08:29:39.077
> 
> 标签：mysql, html, jsp

我的JSP 页面中有两个组合框，分别命名为combo1 和combo2。我在 mysql 中有一个名为 ZoneData 的表。在此表中，有两列称为区域和子区域。当网页加载时，我希望当我从 combo1 中选择区域名称时，应从 ZoneData 表中提取所选区域的所有子区域并添加到 combo2 中。我无法做到这一点。我应该使用任何combo1的事件吗？请帮助我是网络编程的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T08:42:01.543

做这类事情的常用方法是使用 javascript 来管理 combo1 onChange 事件。

我建议你使用 jQuery 框架，因为它简化了很多 JavaScript 客户端编码的基础[http://jquery.com](http://jquery.com)

当事件被触发时，您所做的是在 javascript 函数上捕获它并对您的服务器进行 AJAX 调用，在那里您有一些服务器方法来过滤必须加载到您的 combo2 中的 combo2 值，具体取决于 combo1 的值. 当此方法返回时，AJAX 调用将接收来自该方法的值，并允许您更新 combo2 中的数据

这是管理更改事件和进行 AJAX 调用所需的 jQuery 代码的简短示例：

```
$("#combo1").change(function () {
    $.ajax({
        url: herePutTheUrlToYourServerMethod,
        data: $("#combo1").val(),
        success: function (returnedValueFromYourServerMethod) {
            //Here use returnedValueFromYourServerMethod data to reload combo2 info
            //There are several differents ways to do it that depends on what will 
            //   your server method return
        } 
    });
}); 
```

# jquery - 确保 ajax 输出是最新的

> ID：12597603
> 
> 赞同：0
> 
> 时间：2012-09-26T08:29:44.593
> 
> 标签：jquery, post

我有一个检索 json 数据的 Ajax jquery 函数 ($.post)。它的执行方式之一是通过 keydown ($('#lkj').keyup(function(event)) 延迟 250 毫秒。然而，一个问题是检索到的数据并不总是最新的。尤其是当用户对服务器的 ping 很高。例如，当我输入“test”时，jquery .post 脚本将（取决于我的输入速度）执行两到四次：

1.  吨
2.  你
3.  测试
4.  测试

有时包含“te”的实例很慢并且是最后一个完整的，因此会覆盖包含“test”的实例写入的输出。我该如何防止呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T08:34:25.750

一种技术是在您的请求中使用序列号，并且仅当它与最新的请求序列号匹配时才处理输出。

例如：

```
var reqSeq = 0; 
```

拨打 $.post 电话时：

```
reqSeq++;
$.post('yourserver.com/yoururl?data=X&seq='+reqSeq, function(data) {

    // convert from JSON etc..

    // check if this response is for the latest request, if not, ignore response.
    if(data.seqNum < reqSeq) return;

    // process the response

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:36:54.283

您需要限制事件，而不仅仅是延迟。

现在发生了什么：你快速输入“test”。4 个 keyup 事件背靠背触发，250 毫秒后您收到 4 个 ajax 请求，每个事件一个。

你想发生什么：你快速输入“测试”。如果在第一个 keyup 事件后 250 毫秒内收到另一个 keyup 事件，那么您想取消第一个事件并重置计时器，每次在 250 毫秒内收到一个 keyup 时再次执行此操作。这最终将只是 1 个 ajax 请求。

您可以手动实现它，或者有可以处理它的插件，这个：

[http://benalman.com/projects/jquery-throttle-debounce-plugin/](http://benalman.com/projects/jquery-throttle-debounce-plugin/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T08:43:26.643

Yoy 可以在您的响应消息中添加用于制作结果的“文本”。并检查此文本（扮演角色 - 标志）与当前日期的兼容性，如果当前值已更改，则不应将结果 int 字段。

我认为如果您设置标志，这意味着是否现在执行 ajax 请求，那会很好。这有助于避免用户快速更改文本而服务器收到大量更新请求的情况。

# c++ - Visual Studio 2012：编译器设置（可以使用 SDK 中的编译器，例如 VC++2008-Compiler VC++ 2010-Compiler）

> ID：12597604
> 
> 赞同：7
> 
> 时间：2012-09-26T08:29:45.047
> 
> 标签：c++, visual-studio-2010, visual-studio, compiler-construction, visual-studio-2012

我真的很喜欢 Visual Studio 2012，因为它的 GUI 非常快速和灵活。问题是我需要 VS2010 的 VC++-Compiler。是否有可能在 VS 2012 中设置旧的编译器、SDK。我真的很讨厌 VS 2010-Gui，因为它真的很慢而且滞后。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-26T08:39:58.613

是的，只需修改平台工具集（[参考](http://msdn.microsoft.com/en-us/library/ff770576.aspx)）：

`Property Pages->Configuration Properties->General`，然后单击`Platform Toolset`并选择所需的工具集。根据您安装的内容，您应该会看到 MSVC2008 的 v90 和 MSVC2010 的 v100。

[这里](http://blogs.msdn.com/b/vcblog/archive/2009/12/08/c-native-multi-targeting.aspx)还有更详细的信息。

# virtualization - 硬件和硬件辅助虚拟化有什么区别？

> ID：12597607
> 
> 赞同：1
> 
> 时间：2012-09-26T08:29:50.180
> 
> 标签：virtualization

我对虚拟化真的很陌生，我在某些地方读到硬件虚拟化也称为硬件辅助虚拟化，是真是假。

根据我的理解，硬件虚拟化意味着硬件本身有一些嵌入式软件，有助于管理操作系统之间的系统资源，对吗？

如果可能的话，请告诉我有哪些不同类型的虚拟化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-08T19:45:43.190

**不同类型的虚拟化**

在传统的 x86 架构中，操作系统内核期望直接 CPU 访问运行在 Ring 0 中，这是最高特权级别。

**软件虚拟化**

借助软件虚拟化，客户操作系统无法在环 0 中运行，因为 VMM 位于环 0 中。因此，客户操作系统必须在 Ring 1 中运行，但有一个问题：一些 x86 指令只能在 Ring 0 中运行，因此必须重新编译操作系统以避免它们。这个过程称为半虚拟化，它是不切实际的——尤其是在操作系统的源代码不可用的情况下。为了解决这个问题，VMM 捕获这些指令并模拟它们，不幸的是，这会导致巨大的性能损失：虚拟机可能比真实的物理机慢得多。

**硬件辅助虚拟化**

因此，英特尔和 AMD 推出了他们的新虚拟化技术、一些新指令以及——至关重要的是——新的特权级别。管理程序现在可以在“Ring -1”运行；因此客户操作系统可以在 Ring 0 中运行。不需要半虚拟化，VMM 做的工作更少，性能影响也降低了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:50:19.310

[维基](http://en.wikipedia.org/wiki/Hardware_virtualization)把它说得很好

**虚拟化**
术语“虚拟化”是在 1960 年代创造的，指的是虚拟机（有时称为“伪机”），这个术语本身可以追溯到实验性的 IBM M44/44X 系统。虚拟机的创建和管理最近被称为“平台虚拟化”或“服务器虚拟化”。
平台虚拟化由主机软件（控制程序）在给定的硬件平台上执行，主机软件为其客户软件创建模拟计算机环境，即虚拟机 (VM)。来宾软件不限于用户应用程序；许多主机允许执行完整的操作系统。来宾软件就像直接在物理硬件上运行一样执行，但有几个值得注意的警告。对物理系统资源的访问（例如网络访问、显示器、键盘和磁盘存储）通常在比主机处理器和系统内存更严格的级别进行管理。来宾通常被限制访问特定的外围设备，或者可能被限制为设备本机功能的子集，这取决于虚拟主机实施的硬件访问策略。

**硬件辅助虚拟化** 在硬件辅助虚拟化中，硬件提供有助于构建虚拟机监视器并允许客户操作系统独立运行的架构支持。硬件辅助虚拟化于 1972 年首次在 IBM System/370 上引入，用于第一个虚拟机操作系统 VM/370。在 2005 年和 2006 年，英特尔和 AMD 提供了额外的硬件来支持虚拟化。Sun Microsystems（现为 Oracle Corporation）于 2005 年在其 UltraSPARC T 系列处理器中添加了类似的功能。适用于此类硬件的虚拟化平台示例包括 Linux KVM、VMware Workstation、VMware Fusion、Microsoft Hyper-V、Microsoft Virtual PC、Xen、Parallels Desktop for Mac、Oracle VM Server for SPARC、VirtualBox 和 Parallels Workstation。

另请参阅以下链接以获取更多说明： [http://searchvmware.techtarget.com/definition/hardware-virtualization](http://searchvmware.techtarget.com/definition/hardware-virtualization) http://www.anandtech.com/show/2480

# android - 处理来自服务的 NFC 标签发现事件

> ID：12597611
> 
> 赞同：2
> 
> 时间：2012-09-26T08:30:21.117
> 
> 标签：android, android-intent, nfc

好吧，我正在尝试制作一个 android 服务来处理 NFC 标签发现的事件并相应地在后台执行操作。

从我在这里和那里读到的（https://groups.google.com/forum/?fromgroups=#!topic/android-developers/K4JKF8iN0BI）

您只能通过活动处理这些意图。有没有办法我可以创建一个模拟活动（ui 少，很像服务）来处理这个问题，然后关闭应用程序并将刚刚读取的 nfc 标签信息传递给我的服务以执行我想要在后台完成的操作服务？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T09:23:32.537

确实，您无法在后台服务中接收 NFC 意图，只有 Activity 才能做到这一点。您当然可以使用不可见或透明的 UI 来执行您的建议。我没有创建这样的应用程序的经验，但我使用[NFC 任务启动器](https://play.google.com/store/apps/details?id=com.jwsoft.nfcactionlauncher)，当我扫描我用它创建的标签时，它的行为就像你描述的那样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T08:54:29.273

您可以`android:theme="@android:style/Theme.NoDisplay"`在活动的清单条目中使用。这将有效地隐藏活动。

请注意，它仍将位于堆栈的顶部，因此将获取点击事件并在任何先前可见的活动上导致 onPause。

# iphone - 是否可以为分组的 tableView 设置自定义背景图像？

> ID：12597612
> 
> 赞同：0
> 
> 时间：2012-09-26T08:30:22.853
> 
> 标签：iphone, objective-c, uitableview

我想为我的分组表视图设置自定义背景（图像）。在 xib 文件中，我在表格下添加了 imageView，将表格设置回 clearColor，它看起来很正常（在 Xib 中！）但是当我启动应用程序时，我看到标准背景

在 Xib 文件中：

![在此处输入图像描述](../Images/458d00b313309fe5f965763d91cef787.png)

在应用中：

![在此处输入图像描述](../Images/5c9e8b036cad062cd4e86fd12c346f1d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T08:36:12.503

```
// instead of adding a UIImageView to the background
self.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"image_name"]];
self.tableView.backgroundColor = [UIColor clearColor]; 
```

# android - onActivityResult() Uri 到字节数组

> ID：12597613
> 
> 赞同：5
> 
> 时间：2012-09-26T08:30:23.677
> 
> 标签：android, android-intent

我想从 Android Uri（onActivityResult 返回的那种）到一个简单的字节数组，以便将文件作为多部分消息的一部分上传。谁能提供一个如何从 Uri 到 byte[] 数组的示例？

编辑：我的意思是`android.net.Uri`Uri

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-26T08:50:08.743

在将一些 SO 示例和 google 组代码放在一起后，我可以通过以下代码实现它：

```
Uri data = result.getData();   
ByteArrayOutputStream baos = new ByteArrayOutputStream();  
FileInputStream fis;  
try {  
    fis = new FileInputStream(new File(data.getPath()));  
    byte[] buf = new byte[1024];  
    int n;  
    while (-1 != (n = fis.read(buf)))  
        baos.write(buf, 0, n);  
} catch (Exception e) {  
    e.printStackTrace();  
}  
byte[] bbytes = baos.toByteArray(); 
```

# android - 在Android中使用递增的日期值填充数组

> ID：12597614
> 
> 赞同：1
> 
> 时间：2012-09-26T08:30:25.563
> 
> 标签：android, arrays, auto-increment

//好吧，我经历了这么多教程，但找不到我的东西，所以我在这里提出我的查询，我有两个`DatePicker` `FromDate`，`ToDate` 我想要的是当用户选择它应该进入`String Array`的日期时，假设我的日期是`Start_Date="1/09/2012"`我想要的像填充数组

```
String[] Date Arrau= {"1/09/2012","2/09/2012","3/09/2012","4/09/2012"} 
```

我所做的是

```
 DateDifference=Integer.parseInt(EndDate)-Integer.parseInt(StartDate);

SimpleDateFormat sdf= new SimpleDateFormat("dd-MM-yyyy");

    Date myDate= null;
    try {
        myDate= sdf.parse(StartDate);
    } catch (ParseException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    Date newFirstDate= new Date(myDate.getDate()); // 7 * 24 * 60 * 60 * 1000

    for(int i=0;i<=DateDifference;i++){
        Calendar c= Calendar.getInstance();
        c.setTime(newFirstDate);
        c.add(Calendar.DATE, 1);
        Date newDate= c.getTime();  
        DateArray[i]=newDate.toString();

    } 
```

我得到一个空指针异常错误

它给了我错误请帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T09:07:08.040

像这样创建 startDate 和 endDate

```
 Calendar startDate, endDate;
   startDate = Calendar.getInstance();
   endDate = Calendar.getInstance();

        startDate.clear();
        endDate.clear();

        startDate.set(2012, 8, 1);
        endDate.set(2012, 8, 30); 
        ArrayList<String> list = getList(startDate, endDate); 
```

此方法正在生成一个 arrayList。

```
public ArrayList<String> getList(Calendar startDate, Calendar endDate) {
        ArrayList<String> list = new ArrayList<String>();
        while (startDate.compareTo(endDate) <= 0) {
                    list.add(getDate(startDate));
            startDate.add(Calendar.DAY_OF_MONTH, 1);
        }
        return list;

    } 
```

使用它来格式化日期字符串

```
public String getDate(Calendar cld) {

        String curDate = cld.get(Calendar.YEAR) + "/" + (cld.get(Calendar.MONTH) + 1) + "/"
                + cld.get(Calendar.DAY_OF_MONTH);
        try {
            Date date = new SimpleDateFormat("yyyy/MM/dd").parse(curDate);

            curDate = new SimpleDateFormat("yyyy/MM/dd").format(date);
        } catch (ParseException e) {
            e.printStackTrace();
        }

        return curDate;
    } 
```

# android - 我的应用程序不允许我打开任何其他应用程序

> ID：12597615
> 
> 赞同：0
> 
> 时间：2012-09-26T08:30:29.227
> 
> 标签：android

我创建了一个示例包侦听器应用程序，该应用程序在用户单击任何其他应用程序时启动。但目前我无法卸载旧版本，甚至无法安装更新版本。该应用程序不允许我打开设置或任务管理器或其他任何东西。我无能为力请帮帮我。我的手机被应用程序黑了。

有什么方法可以卸载应用程序吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T08:50:58.133

您可以使用[adb](http://developer.android.com/tools/help/adb.html)卸载您的应用程序。将您的设备连接到您的计算机，然后从终端或命令提示符处执行以下命令：

```
adb uninstall <package name> 
```

（假设您安装了 Android SDK 并且 adb 在应用程序路径中）

# c++ - C++ 64 位时间戳到 32 位 time_t

> ID：12597618
> 
> 赞同：2
> 
> 时间：2012-09-26T08:30:33.907
> 
> 标签：c++, 32bit-64bit

我想将 64 位时间戳（在我们中）转换为日期字符串，以便通过系统命令“date”设置系统日期。我发现/实施了这个解决方案：

```
char loc_ach_buf[25];
uint64_t loc_ui64_TimeStamp_us;
time_t loc_t_TimeStamp_s;
...         
loc_t_TimeStamp_s = loc_ui64_TimeStamp_us / 1000000;
strftime(loc_ach_buf, sizeof(loc_ach_buf), "date %Y%m%d%H%M.%S", gmtime(&loc_t_TimeStamp_s));
system(loc_ach_buf); 
```

这很好用，但我的问题是，time_t 在我的系统上是一个 32 位的值，所以会有问题[Year 2038 question](http://en.wikipedia.org/wiki/Year_2038_problem)。任何想法如何解决这个问题？或者有没有 strftime 的替代品。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T08:37:18.700

为什么使用系统命令'date'？使用[SetSystemTime](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724942%28v=vs.85%29.aspx) API 调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T09:06:07.027

我不确定您使用的是哪个工具集，但 Microsoft 编译器支持一个函数[_localtime64_s](http://msdn.microsoft.com/en-us/library/a442x3ye%28v=vs.80%29.aspx) ，该函数会将 64 位时间值转换为 tm 结构，然后您可以将其与[strftime](http://msdn.microsoft.com/en-us/library/fe06s4ak%28v=vs.100%29.aspx)一起使用。

如果您的 CRT 不支持 64 位时间函数，请查看：[A version of gmtime() that works around the 2038 bug](http://2038bug.com/index.php/articles/43-code/62-a-version-of-gmtime-that-works-around-the-2038-bug)

# internet-explorer - 在 Internet Explorer windows phone 中打开链接

> ID：12597619
> 
> 赞同：1
> 
> 时间：2012-09-26T08:30:37.527
> 
> 标签：internet-explorer, windows-phone-7, hyperlink, browser

我有这个屏幕：![图 1](../Images/82005ac329a9f7f5cce1e11bcb983e1a.png)

当我单击链接时，它就像：![在此处输入图像描述](../Images/0af0f21c1de1c9ec3ac3a65425e19708.png)

那么当我单击 webBrowser 中的链接时，如何让它打开一个新的 Internet Explorer 浏览器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T08:58:25.650

1) 订阅 WebBrowser 的`Navigating`事件。
2) 设置 NavigatingEventArgs.Cancel = true
3) 在事件主体中使用 NavigatingEventArgs.Uri 属性创建一个 WebBrowserTask。

```
void web_Navigating(object sender, NavigatingEventArgs e)
    {
        e.Cancel = true;

        WebBrowserTask webBrowserTask = new WebBrowserTask();
        webBrowserTask.Uri = e.Uri; //Uri of the link clicked
        webBrowserTask.Show();
    } 
```

# mysql - #1242 - 子查询返回多于 1 行 - mysql

> ID：12597620
> 
> 赞同：9
> 
> 时间：2012-09-26T08:30:39.090
> 
> 标签：mysql, mysql-error-1242

我正在尝试创建一个从 MySQL 数据库中选择图像名称的 select 语句。该表称为-pictures_archive。我也在尝试根据它们拥有的类别来选择这些图片。代码是：

```
SELECT pictures_archive_filename FROM pictures_archive 
WHERE pictures_archive_id = (SELECT pictures_archive_id 
FROM pictures_archive_category WHERE pictures_category_id = 9) 
```

它给了我一个“#1242 - 子查询返回超过 1 行”错误。我知道为什么，但不知道该怎么做。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-26T08:32:11.040

由于您的子查询可以返回多个值，`IN`因此应该适合您的 where 子句。

```
SELECT pictures_archive_filename 
FROM pictures_archive 
WHERE pictures_archive_id IN 
(
   SELECT pictures_archive_id 
   FROM pictures_archive_category 
   WHERE pictures_category_id = 9
) 
```

一个替代方案`join`是更有效的两个表。

```
SELECT  pictures_archive_filename 
FROM    pictures_archive a 
        INNER JOIN pictures_archive_category b
            ON a.pictures_archive_id = b.pictures_archive_id
WHERE   b.pictures_category_id = 9 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:31:49.697

使用 IN 而不是等于 (=)

```
SELECT pictures_archive_filename FROM pictures_archive 
WHERE pictures_archive_id IN (SELECT pictures_archive_id 
FROM pictures_archive_category WHERE pictures_category_id = 9) 
```

或者如果可能的话，在 2 个表之间使用 JOIN

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T08:33:27.900

```
SELECT pictures_archive_filename FROM pictures_archive 
WHERE pictures_archive_id = (SELECT pictures_archive_id 
FROM pictures_archive_category WHERE pictures_category_id = 9 LIMIT 1) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T08:35:49.960

```
SELECT p.pictures_archive_filename FROM 
pictures_archive p inner join pictures_archive_category pc 
on p.pictures_archive_id = pc.pictures_archive_id 
where pc.pictures_category_id=9 
```

# forms - 如何防止spring mvc从请求中覆盖sessionattributes

> ID：12597627
> 
> 赞同：1
> 
> 时间：2012-09-26T08:30:57.793
> 
> 标签：forms, spring, model-view-controller

我有一个用户登录的 MVC spring 应用程序，它存储了一个 User @SessionAttribute ，我随后引用它，例如，在 POST 请求中更新 Customer 对象时，我希望将会话用户信息添加到该对象。我的问题是当我在客户 POST 中访问 @ModelAttribute("user") User 对象时，spring 将请求参数绑定到其中，即 User.name 具有来自提交表单的 Customer.name 的值。

注意，我有点破解了这一点，因为所有控制器都是我的 AppController 的子类，这是声明 @SessionAttributes 的地方。但如果是单个控制器，原理是一样的。

那么我可以防止弹簧绑定表单：客户名称值到 User.name 吗？

（我怀疑 webflow 将是一个更合适的框架，但现在没有时间使用它重写）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T11:23:23.917

您可以使用以下方法允许或禁止绑定模型属性的某些字段`@InitBinder`：

```
@InitBinder("user")
public void configureBindingOfUser(WebDataBinder binder) {
    binder.setAllowedFields(); // No fields allowed
} 
```

但是，我认为`@SessionAttributes`用于存储当前用户或其他类似对象并不是一个好主意。`@SessionAttributes` 最初旨在维护`GET`和`POST`请求之间的表单支持对象的状态，而不是作为访问会话的通用方式。

`session`也许使用-scoped beans 或自定义参数解析器来访问此类信息会更好。

# android - 获取数据的 Android 实时图表

> ID：12597635
> 
> 赞同：1
> 
> 时间：2012-09-26T08:31:25.577
> 
> 标签：android, eclipse

我必须开发一个能够实时获取数据并绘制图表的安卓应用程序。

现在，`Android`平台上没有内置图形库，但是它是开源的，所以有很多库可以下载和安装。

其中许多无法执行实时图表，并且大部分缺少教程和代码示例，因此我不知道我可以选择哪个。

我刚刚测试了 Android Plot 但`graphic thread`与线程发生冲突`acquisition and the main thread`，导致 a`deadlock`我不知道为什么。

我在一个网络论坛上发现这个库不太适合实时图表，所以我决定放弃它。

如果您建议我哪个库更适合我的问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T10:02:43.090

[尽管技术上可行的解决方案是将AJAX-y 请求](http://code.google.com/p/android-query/wiki/AsyncAPI)与[Google Charts Query Wrapper](https://developers.google.com/chart/interactive/docs/examples#querywrapper)结合使用，但我从未尝试过这个？

可能很棒，但这意味着您的应用程序只能在连接到互联网时才能绘制图表。数据存储在哪里？在线还是在本地 SQLite 数据库中？如果您只是从本地数据库中读取数据，则查询包装图表不太合适，但这种方法（AJAX 和谷歌图表）会很不错。

# c# - 使用指定的PickupDirectory 将电子邮件保存到 .eml 文件会在电子邮件正文中创建双位小数点

> ID：12597638
> 
> 赞同：1
> 
> 时间：2012-09-26T08:31:34.033
> 
> 标签：c#, email, save, app-config, decimal-point

我想验证保存到磁盘的 .eml 文件中的电子邮件正文内容。我已将以下部分添加到我的 App.config 文件中：

```
<system.net>
    <mailSettings>
        <smtp deliveryMethod="SpecifiedPickupDirectory">
            <specifiedPickupDirectory pickupDirectoryLocation="d:\temp\emails\"/>
        </smtp>
    </mailSettings>
</system.net> 
```

有时 .eml 文件中的某些正文内容保存不正确。我有一些用双小数点保存的值

例子：

```
ABC, XYZ, 2.00, 0..19609, 0.2117772 
```

当我取出配置部分并将电子邮件发送到我的 Outlook 收件箱时，我没有收到此问题。例子：

```
ABC, XYZ, 2.00, 0.19609, 0.2117772 
```

正确和错误的值总是相同的。我不希望保存文件会修改内容。任何关于这里可能发生的事情的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:10:15.137

据我了解，这是可以预料的，因为生成的文件不应该是直接副本，而是遵循 rfc822 规范（参见[http://www.w3.org/Protocols/rfc822/3_Lexical.html](http://www.w3.org/Protocols/rfc822/3_Lexical.html)）。

如果您想将文件输出与输入进行比较，那么我认为您需要找到/编写一个例程来将 rfc822 解码回普通测试。

# php - jQuery Load，防止发生两次？

> ID：12597640
> 
> 赞同：5
> 
> 时间：2012-09-26T08:31:46.607
> 
> 标签：php, jquery, ajax

我正在使用 jquery load 将 php 页面加载到我的内容区域中。

如果用户反复滥用导航菜单项，我注意到一些奇怪的行为。

现在我的代码就像隐藏内容窗格一样简单，加载新页面，然后淡入：

```
 $("#homeLink").click(function(){
    $("#contentPane").hide();
    $("#contentPane").load("welcome.php");
    $("#contentPane").fadeIn();
 }); 
```

有问题的行为：单击新链接，窗格淡入上一页（然后更新到新页面）

我尝试使用`$.ajax({async:false});`，但这一切都持续存在。在这一点上，我正在考虑重写我的导航系统以根据 url 参数改变包含，除非可以提供一些关于如何阻止它排队第二个加载调用直到第一个完成？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-26T08:33:14.593

您可以使用[**“完成”**](http://api.jquery.com/load/)回调。它在请求完成时执行。

```
$("#homeLink").click(function() {
    var pane = $("#contentPane");

    pane.hide();
    pane.load("welcome.php", function() {
        pane.fadeIn();
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T08:35:17.073

您可以链接您的方法：

```
 $("#homeLink").click(function(){
    $("#contentPane").hide().load('welcome.php', function() {
        $(this).fadeIn();
    });
 }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T08:41:11.587

load 方法可以接受两个额外的参数：一组查询字符串键/值对，以及一个回调函数，该函数将在 load 方法完成时执行，无论它是成功还是失败。这是一个示例，我们使用回调函数来通知结果。通常，您可能只会在方法失败时显示一条消息，但为了说明它是如何工作的，如果方法也失败了，我们也会这样做。我通过请求一个不存在的文件来确保该示例失败：

```
<div id="divTestArea3"></div>
<script type="text/javascript">
$(function()
{
        $("#divTestArea3").load("no-content.html", function(responseText, statusText, xhr)
        {
                if(statusText == "success")
                        alert("Successfully loaded the content!");
                if(statusText == "error")
                        alert("An error occurred: " + xhr.status + " - " + xhr.statusText);
        });
});
</script> 
```

如您所见，回调函数指定了 3 个参数，jQuery 将为您填写。如果调用成功，第一个参数将包含结果内容。第二个参数是指定调用状态的字符串，例如“成功”或“错误”。您可以使用它来查看调用是否成功。第三个参数是用于执行 AJAX 调用的 XMLHttpRequest 对象。它将包含属性，您可以使用这些属性来查看出了什么问题以及许多其他事情。在您的情况下，最好在请求完成时使用回调来加载页面。

# jquery - jQuery ui 地图：如何将大小添加到信息窗口

> ID：12597643
> 
> 赞同：1
> 
> 时间：2012-09-26T08:31:58.517
> 
> 标签：jquery, jquery-ui-map

有谁知道如何将大小应用于信息窗口？谢谢。

```
map_container.gmap('addMarker', markerOptions).click(function () {
   map_container.gmap('openInfoWindow', { 
      'content':this.description, 
       'size': WHAT GOES HERE?
    }, this);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T09:21:53.150

解决。

对于其他任何人，文档位于[https://developers.google.com/maps/documentation/javascript/reference?hl=sv-SE#InfoWindowOptions](https://developers.google.com/maps/documentation/javascript/reference?hl=sv-SE#InfoWindowOptions)

```
map_container.gmap('addMarker', markerOptions).click(function () {
   map_container.gmap('openInfoWindow', { 
      'content':this.description, 
      'maxWidth': '200'
    }, this);
}); 
```

# performance - 从 3.1.2 升级到 3.3.0 后多流启动非常慢

> ID：12597645
> 
> 赞同：1
> 
> 时间：2012-09-26T08:32:09.710
> 
> 标签：performance, jboss, startup, esb, mule

我们最近从 Mule 3.1.2 升级到 3.3.0。我们正在使用在 JBoss 5.1 的战争中部署的 Mule。在我们的后台应用程序中，我们有大量使用石英入站端点的流，然后运行各种处理器。像这个 ：

```
<flow name="ImportXXX">
    <quartz:inbound-endpoint repeatInterval="5000" startDelay="10000" jobName="QuartzImportXXX" >
        <quartz:event-generator-job>
            <quartz:payload>${XXX.depot} | ${archive}</quartz:payload>
        </quartz:event-generator-job>
    </quartz:inbound-endpoint>
    <component>
       ...
    </component>
    <component>
    ...
    </component>
</flow> 
```

我们有大约 40 个与此类似的流（处理器根据石英有效负载做不同的事情）

在 mule 3.3.0 中，这些流程中的每一个都需要大约 5 秒才能启动，而 3.1.2 流程中完全相同的配置会立即启动（每个流程不到 1/10 秒）。我们也没有对底层处理器实现进行任何更改，这是一次纯粹的迁移。我试图删除我们所有的特定处理器，并用一个除了记录一行什么都不做的替换它们。现在每个流程的启动都“减少”到了 1.5 秒，但仍然比 3.1.2 慢很多。总体而言，问题随着流的数量和加载的组件而增加（如果我注释一半的流，则单流启动时间会提高 1 或 2 秒）

这似乎是在 JBoss 的战争中部署时所特有的，我在从基本 maven 原型创建的独立 Mule 应用程序中尝试了完全相同的 mule-config.xml，并且所有流程都像在 3.1.2 中一样顺利快速地启动。

在 Mule 3.3 中初始化流程的方式是否有任何变化可以解释这一点？关于我可以检查或尝试什么的任何想法？

谢谢你的帮助，

洛朗

# c - 客户端套接字无法使用轮询/选择接收数据

> ID：12597647
> 
> 赞同：0
> 
> 时间：2012-09-26T08:32:10.913
> 
> 标签：c, linux, sockets, client-server

```
/* SEND FUNC. */
int mysend(unsigned char *buffer, int len) {

int     sock,ret;
int     status,flags;
struct sockaddr_in6 servaddr;
int opt = 1;
char *addr = "1101::1";

sock = socket(AF_INET6,SOCK_DGRAM,0);
if (sock < 0)
    return -1;
if( setsockopt(sock, SOL_SOCKET, SO_REUSEADDR, (char *)&opt, sizeof(opt)) < 0 ) 
    return -1;
flags = fcntl(sock, F_GETFL, 0);
fcntl(sock, F_SETFL, flags|O_NONBLOCK);

servaddr.sin6_family = AF_INET6;
servaddr.sin6_port = htons(61616);

status = inet_pton(AF_INET6, addr, &servaddr.sin6_addr);
if (status <= 0) {
    perror("inet_pton");
    return -1;
}
/* send message to server */
status = sendto(sock, buffer, len, 0, (struct sockaddr *)&servaddr, sizeof(servaddr));
if (status < 0) {
    perror("sendto");
    return -1;
}
close(sock);
printf("MESSAGE SENT SUCCESSFULLY\n");
return 0;
}

/* RECEIVE FUNC. */
int myrcv() {

int     sock,ret;
int     status,len,rx_bytes;
int timeout,nfds =1;
struct sockaddr_in6 servaddr;
struct timeval wait;
unsigned char rxbuff[1024];
char *rcv;
char *addr = "1101::1";
fd_set rd;
struct pollfd *fds;

sock = socket(AF_INET6,SOCK_DGRAM,0);
if (sock < 0) 
    return -1;

servaddr.sin6_family = AF_INET6;
servaddr.sin6_port = htons(61616);

status = inet_pton(AF_INET6, addr, &servaddr.sin6_addr);
if (status <= 0) 
    return -1;
bind(sock,(struct sockaddr *)&servaddr,sizeof(servaddr));
timeout = (1* 1000);

wait.tv_sec = 10;
wait.tv_usec = 0;

len = sizeof(servaddr);
fds->fd = sock;
fds->events = POLLIN;

for(;;) {
  //FD_ZERO(&rd);
  //FD_SET(sock,&rd);

    printf("Waiting for data....\n");
    ret = poll(fds,nfds,timeout);

  //ret = select(1,&rd,NULL,NULL,&wait);
    if(ret < 0)
        break;
    if(fds->revents == 0)
      printf("revents 0 %d\n",ret);

    if(ret == 0)
       continue;

    memset(rxbuff,0,1024);
   //if(FD_ISSET(sock,&rd)) {
        printf("receiving message\n");
        rx_bytes = recvfrom(sock,rxbuff,1024,0,(struct sockaddr *)&servaddr,&len);
        memcpy(rcv,rxbuff,rx_bytes);
  //}      
}
close(sock);
return 0;
}

int main()
{
/* call mysend() periodically using sigaction() */
/* create a thread that continuously monitors(calls myrcv()) for incoming data */
    return 0;
} 
```

我无法从服务器接收数据包，但我可以在 tcpdump 输出中看到数据包。以上是示例客户端代码片段，它尝试从/向服务器接收和发送数据。场景是：客户端需要定期向服务器发送数据，并且还应该能够从服务器接收任何数据。我试过同时使用 poll 和 select 方法，但没有收到。如果我遗漏了什么，请告诉我。谢谢你的支持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T08:42:59.107

您接收的问题是您需要`bind`将接收套接字连接到本地端口。

您还有其他可以改进的地方，例如为发送*和*接收创建单个套接字，并`SO_REUSEADDR`在发送套接字上使用（在只写套接字上不需要）。

你应该做的是：

1.  创建套接字
2.  设置套接字选项
3.  绑定到本地地址（`IN6ADDR_ANY_INIT`用于绑定到所有接口）
4.  写入服务器
5.  投票回复

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:44:24.880

几件事：

1.  您的接收函数 (myrcv) 没有通过 bind() 调用指定监听端口。这是最有可能的问题。您的发送功能同上，尽管为您随机选择了一个端口。

2.  在您的 myrcv() 函数中，我看不到您在调用 poll() 之前实际初始化 fds 或 nfsd 的位置。

3.  在每次调用 mysend() 时重新打开和关闭套接字看起来有问题。如果您希望服务器在接收消息的同一端口上向同一客户端发送回消息，那么您很可能已经关闭了套接字。您应该只打开一个用于发送和接收的套接字。您可以在发送线程和接收线程之间共享同一个套接字。

# c++ - Qt - 如何在不使用插槽的情况下检测自定义事件循环中的关闭窗口

> ID：12597648
> 
> 赞同：4
> 
> 时间：2012-09-26T08:32:11.897
> 
> 标签：c++, qt, event-loop

我正在开发一个使用 QGLWidget 作为前端的基于 OpenGL 的游戏。但是由于所有不必要的开销（加上必须分发沉重的 QT 库！）我计划迁移到 GLUT，并且在大飞跃之前正在用更标准的替代品替换“Qt-stuff”。

为了替换控制帧速率和 fps 计时器的 QTimers，我试图将这些函数楔入一个简单的循环中，以替换 app.exec() 调用，如下所示：

```
//main.cpp
#include <QApplication>
#include <windows.h>
#include "mainwindow.h"

int main(int argc, char *argv[]) {
  QApplication app(argc, argv);
  MainWindow mainWin;//only contains a glwidget
  mainWin.show();

  do {
    app.processEvents();
    //call draw functions/fps based on system tick count
    //...
    Sleep(10);
  } while (!app.closingDown()); //<-- this doesn't terminate

  return 0;
} 
```

到目前为止，它在运行时运行良好，但是一旦您尝试关闭窗口（通过系统“X”按钮），窗口就会消失，但程序会在后台挂起。问题是我找不到指示已调用 exit() 或 close() 的静态标志或查询函数。 `bool closingDown()`似乎总是错误的，我尝试在`~MainWindow`析构函数中切换一个静态标志并检测到它，但这也不起作用，因为直到`main`结束才会调用它。我知道我可能可以通过绑定 QApps 的`aboutToQuit()`信号来做到这一点，或者可能从 Qapp 创建一个派生类并拦截它，但这违背了远离信号/插槽的目的。有没有一种简单的方法可以从课堂外判断 QApplication 是否已被命令关闭？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T09:55:54.833

你可以重新实现

```
void QWidget::closeEvent ( QCloseEvent * event ) 
```

设置静态标志的方法。该方法从窗口调用关闭事件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T09:59:01.890

我建议在通话`app.sendPostedEvents();`之前添加。`QApplication::processEvents()`它实际上可以解决您的问题，但如果没有，您至少可以使用@dzhon 提到的事件处理程序。

Nitpick：Qt 通常不采用全大写格式。说“QT”会让你看起来好像在谈论 QuickTime！

# .htaccess - 具有请求长度的 htaccess 重写规则

> ID：12597650
> 
> 赞同：0
> 
> 时间：2012-09-26T08:32:19.303
> 
> 标签：.htaccess, mod-rewrite

我目前有代码

```
RewriteRule ^(.+)$  index.php 
```

这会将所有请求重定向到 index.php

我想检查请求是否有 16 个字符然后想重定向到`index.php?param=ABCDEFGHJK123456`

如果请求的长度不是 16 个字符`index.php`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T08:57:28.720

尝试：

```
RewriteRule ^(.{16})$ index.php?param=$1 [L,QSA]
RewriteRule ^(.*)$ index.php [L] 
```

# android - 传递意图值并从 SQLite 数据库中检索数据

> ID：12597652
> 
> 赞同：1
> 
> 时间：2012-09-26T08:32:25.983
> 
> 标签：android, android-intent

我在android中编写了一个类似于联系人的应用程序。我的列表中有一些项目，当我单击它们时，我从数据库中获取信息并显示在另一个视图中。但是当我单击列表视图中的一个名称时，我得到一个空屏幕（模拟器变为空白） . 请帮忙，我是android编程的新手。欢迎所有建议

谢谢你

```
public class Contacts extends Activity implements OnClickListener {
    int NewContact_Request_Code = 1;
    Button newcontact;
    ListView listview;
    public static final String LOG_TAG = "Contacts";
    int mInt = 0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.contactview);
        // Set the content to contactview.xml

        // newcontact = NEW CONTACT button
        // listview = MyList List View
        newcontact = (Button) findViewById(R.id.baddcontact);
        listview = (ListView) findViewById(R.id.mylist);

        // Make a New Database
        DBContact info = new DBContact(this);
        // Open , get Information from database and close it
        info.open();
        String[] data = info.queryAll();
        info.close();
        // listview = getListView();
        listview.setTextFilterEnabled(true);
        // Display the names
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(Contacts.this,
                android.R.layout.simple_list_item_1, data);
        listview.setAdapter(adapter);
        listview.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView adapterView, View view,
                    int position, long id) {

                String nameclicked = adapterView.getItemAtPosition(position)
                        .toString();
                Intent viewintent = new Intent(Contacts.this, ViewContact.class);
                viewintent.putExtra("name_clicked", nameclicked);
                startActivity(viewintent);

            }
        });
        newcontact.setOnClickListener(this);

    }

    public void onClick(View v) {
        // TODO Auto-generated method stub
        Intent newintent = new Intent(Contacts.this, AddNewContact.class);
        // start actiivity for result - to get the name of the new contact
        startActivityForResult(newintent, 0);
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        // TODO Auto-generated method stub
        super.onActivityResult(requestCode, resultCode, data);
        // pass the value of the string via cursor and update the list
    }

} 
```

ViewCONtact.class

```
public class ViewContact extends Activity implements OnClickListener {
    Button ViewPPhone, ViewHPhone, ViewOPhone, EditContact;
    TextView ViewName;
    TextView ViewPersonalPhone;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.viewcontact);
        Bundle extras = getIntent().getExtras();
       String name = extras.getString("name_clicked");
        Long l = Long.parseLong(name);
        DBContact getdetails = new DBContact(this);
        getdetails.open();
        String returnedname = getdetails.getName(l);
        String returnedpphone = getdetails.getPphone(l);
        String returnedhphone = getdetails.getHphone(l);
        String returnedophone = getdetails.getOphone(l);
        getdetails.close();
        ViewName.setText(returnedname);
        ViewPPhone.setText(returnedpphone);
        ViewHPhone.setText(returnedhphone);
        ViewOPhone.setText(returnedophone);

        EditContact = (Button) findViewById(R.id.bEditContact);
        EditContact.setOnClickListener(this);
        ViewPPhone = (Button) findViewById(R.id.ViewPersonalPhoneNumber);
        ViewPPhone.setOnClickListener(this);
        ViewHPhone = (Button) findViewById(R.id.ViewHomePhoneNumber);
        ViewHPhone.setOnClickListener(this);
        ViewOPhone = (Button) findViewById(R.id.ViewOfficePhoneNumber);
        ViewOPhone.setOnClickListener(this);

    }

    public void onClick(View view) {
        // TODO Auto-generated method stub
        switch (view.getId()) {
        case R.id.ViewPersonalPhoneNumber:
            Intent dialpersonalphone = new
            Intent(android.content.Intent.ACTION_DIAL,
            Uri.parse("returnedpphone"));
            startActivity(dialpersonalphone );
            break;

        case R.id.ViewHomePhoneNumber:
            Intent dialhome = new
            Intent(android.content.Intent.ACTION_DIAL,
            Uri.parse("returnedhphone"));
            startActivity(dialhome);
            break;

        case R.id.ViewOfficePhoneNumber:
            Intent dialoffice = new
            Intent(android.content.Intent.ACTION_DIAL,
            Uri.parse("returnedophone"));
            startActivity(dialoffice);
            break;

        case R.id.bEditContact:
            startActivity(new Intent("com.example.contactlist.EDITCONTACT"));
            break;
        }
    }

} 
```

LOGCAT

```
09-26 02:52:11.527: W/dalvikvm(1605): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
09-26 02:52:11.558: E/AndroidRuntime(1605): FATAL EXCEPTION: main
09-26 02:52:11.558: E/AndroidRuntime(1605): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.contactlist/com.example.contactlist.ViewContact}: java.lang.NumberFormatException: Invalid long: ""
09-26 02:52:11.558: E/AndroidRuntime(1605):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
09-26 02:52:11.558: E/AndroidRuntime(1605):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
09-26 02:52:11.558: E/AndroidRuntime(1605):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
09-26 02:52:11.558: E/AndroidRuntime(1605):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
09-26 02:52:11.558: E/AndroidRuntime(1605):     at android.os.Handler.dispatchMessage(Handler.java:99)
09-26 02:52:11.558: E/AndroidRuntime(1605):     at android.os.Looper.loop(Looper.java:137)
09-26 02:52:11.558: E/AndroidRuntime(1605):     at android.app.ActivityThread.main(ActivityThread.java:4745)
09-26 02:52:11.558: E/AndroidRuntime(1605):     at java.lang.reflect.Method.invokeNative(Native Method)
09-26 02:52:11.558: E/AndroidRuntime(1605):     at java.lang.reflect.Method.invoke(Method.java:511)
09-26 02:52:11.558: E/AndroidRuntime(1605):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
09-26 02:52:11.558: E/AndroidRuntime(1605):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
09-26 02:52:11.558: E/AndroidRuntime(1605):     at dalvik.system.NativeStart.main(Native Method)
09-26 02:52:11.558: E/AndroidRuntime(1605): Caused by: java.lang.NumberFormatException: Invalid long: ""
09-26 02:52:11.558: E/AndroidRuntime(1605):     at java.lang.Long.invalidLong(Long.java:125)
09-26 02:52:11.558: E/AndroidRuntime(1605):     at java.lang.Long.parseLong(Long.java:346)
09-26 02:52:11.558: E/AndroidRuntime(1605):     at java.lang.Long.parseLong(Long.java:319)
09-26 02:52:11.558: E/AndroidRuntime(1605):     at com.example.contactlist.ViewContact.onCreate(ViewContact.java:24)
09-26 02:52:11.558: E/AndroidRuntime(1605):     at android.app.Activity.performCreate(Activity.java:5008)
09-26 02:52:11.558: E/AndroidRuntime(1605):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
09-26 02:52:11.558: E/AndroidRuntime(1605):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
09-26 02:52:11.558: E/AndroidRuntime(1605):     ... 11 more 
```

数据库类

```
public class DBContact {

    public static final String KEY_ROWID = "_id";
    public static final String KEY_NAME = "Name";
    public static final String KEY_PERSONALPHONE = "Personalnumber";
    public static final String KEY_HOMEPHONE = "Homenumber";
    public static final String KEY_OFFICEPHONE = "Officenumber";

    private static final String DATABASE_NAME = "Contacts";
    private static final String DATABASE_TABLE = "ContactList";
    private static final int DATABASE_VERSION = 1;

    // Instance of the class DbHelper
    private DbHelper ourHelper;
    private final Context ourContext;
    private SQLiteDatabase ourDatabase;

    public static final String[] KEYS_ALL = { DBContact.KEY_ROWID,
            DBContact.KEY_NAME, DBContact.KEY_PERSONALPHONE,
            DBContact.KEY_HOMEPHONE, DBContact.KEY_OFFICEPHONE };

    private static class DbHelper extends SQLiteOpenHelper {

        private static final String DATABASE_CREATE = "create table ContactList (_id integer primary key autoincrement, "
                + "Name text not null, Personalnumber text not null, Homenumber text not null, Officenumber text not null); ";

        public DbHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
            // TODO Auto-generated constructor stub
        }

        @Override
        public void onCreate(SQLiteDatabase ourDatabase) {
            // TODO Auto-generated method stub
            try {
                ourDatabase.execSQL(DATABASE_CREATE);
            } catch (SQLException e) {
                e.printStackTrace();
            }
        }           

        @Override
        public void onUpgrade(SQLiteDatabase ourDatabase, int oldVersion, int newVersion) {
            // TODO Auto-generated method stub
            ourDatabase.execSQL("DROP TABLE IF EXISTS ContactList");
            onCreate(ourDatabase);

        }

    }

    // Context of constructor withhin our Class
    public DBContact(Context c) {
        ourContext = c;
    }

    // Opens the database
    public DBContact open() throws SQLException {
        // Constructor for DB Helper class takes in a Context
        // Context is passed in is "ourContext" for within our class

        ourHelper = new DbHelper(ourContext);
        // Passes in DB Name and Version
        // ourDatabase is of type SQLite DataBase
        ourDatabase = ourHelper.getWritableDatabase();
        return this;
    }

    // Closes the database connection
    public void close() {
        // refer to our DbHelper and close the SQLite DataBase Helper
        ourHelper.close();
        ourHelper = null;
        ourDatabase = null;
    }

    // Deletes the Row
    public boolean deleteRow(long rowId) {
        return ourDatabase.delete(DATABASE_TABLE, DBContact.KEY_ROWID + "="
                + rowId, null) > 0;
    }

    public String[] queryAll() {
        String[] columns = new String[] { KEY_NAME };
        Cursor cursor = ourDatabase.query(DATABASE_TABLE, columns, null, null,
                null, null, null);
        if (cursor != null) {
            try {
        final int nameColumnIndex = cursor.getColumnIndex(KEY_NAME);
        List<String> names = new ArrayList<String>();
        cursor.moveToFirst();
        while (cursor.moveToNext()) {
            names.add(cursor.getString(nameColumnIndex));
        }
        return names.toArray(new String[names.size()]);
    } finally {
        cursor.close();
   }
        }
        return null;
        //return columns;

    }

    /*public Cursor queryAll(){
    String[] columns = new String[] {KEY_NAME};
        return   ourDatabase.query(DATABASE_TABLE, columns, null, null, null, null, null);
    if(data == null){
        columns[0] = "NO CONTACTS PRESENT";
        return columns;
    }else{
        return columns;
    }

    }*/

    public long newRow(String name, String pphone, String hphone, String ophone) {
        // TODO Auto-generated method stub
        ContentValues newvalue = new ContentValues();
        newvalue.put(KEY_NAME, name);
        newvalue.put(KEY_PERSONALPHONE, pphone);
        newvalue.put(KEY_HOMEPHONE, hphone);
        newvalue.put(KEY_OFFICEPHONE, ophone);
        return ourDatabase.insert(DATABASE_TABLE, null, newvalue);

    }

    public String getName(Long l) {
        // TODO Auto-generated method stub
        String[] columns = new String[] { KEY_ROWID, KEY_NAME,
                KEY_PERSONALPHONE, KEY_HOMEPHONE, KEY_OFFICEPHONE };
        Cursor c = ourDatabase.query(DATABASE_TABLE, columns, KEY_ROWID + "="
                + 1, null, null, null, null);
        if (c != null) {
            c.moveToFirst();
            String name = c.getString(1);
            return name;
        }
        return null;
    }

    public String getPphone(Long l) {
        // TODO Auto-generated method stub
        String[] columns = new String[] { KEY_ROWID, KEY_NAME,
                KEY_PERSONALPHONE, KEY_HOMEPHONE, KEY_OFFICEPHONE };
        Cursor c = ourDatabase.query(DATABASE_TABLE, columns, KEY_ROWID + "="
                + 1, null, null, null, null);
        if (c != null) {
            c.moveToFirst();
            String Pphone = c.getString(2);
            return Pphone;

        }
        return null;
    }

    public String getHphone(Long l) {
        // TODO Auto-generated method stub
        String[] columns = new String[] { KEY_ROWID, KEY_NAME,
                KEY_PERSONALPHONE, KEY_HOMEPHONE, KEY_OFFICEPHONE };
        Cursor c = ourDatabase.query(DATABASE_TABLE, columns, KEY_ROWID + "="
                + 1, null, null, null, null);
        if (c != null) {
            c.moveToFirst();
            String Hphone = c.getString(3);
            return Hphone;

        }
        return null;
    }

    public String getOphone(Long l) {
        // TODO Auto-generated method stub
        String[] columns = new String[] { KEY_ROWID, KEY_NAME,
                KEY_PERSONALPHONE, KEY_HOMEPHONE, KEY_OFFICEPHONE };
        Cursor c = ourDatabase.query(DATABASE_TABLE, columns, KEY_ROWID + "="
                + 1, null, null, null, null);
        if (c != null) {
            c.moveToFirst();
            String Ophone = c.getString(4);
            return Ophone;

        }
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T10:33:17.593

```
Long l = Long.parseLong(name); 
```

是问题。。

```
String nameclicked = adapterView.getItemAtPosition(position)
                    .toString(); 
```

这里nameclicked是一个字符串

您正在发送一个字符串值并尝试将其解析为数字格式。那么我能知道你为什么要解析 nameClicked 吗？

# android - Android 警报对话框仅部分呈现

> ID：12597655
> 
> 赞同：0
> 
> 时间：2012-09-26T08:32:44.860
> 
> 标签：android, dialog, android-dialog

我知道这很奇怪，但我认为我做错了什么。

```
public void checkUpgrade( final Context context, final int PREF_ID ) {
    if (!StringHelper.isEmpty( type ) && !type.equals( TYPE_HIDDEN )) {

        if ( type.equals( TYPE_SUGGESTED ) && lastRemind + reminderInterval < System.currentTimeMillis() ) {
            return;
        }

        AlertDialog.Builder builder = new AlertDialog.Builder( context );
        builder.setTitle( title ).setMessage( description ).setCancelable( type.equals( TYPE_SUGGESTED ) ).setPositiveButton( "Update", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int id) {
                final Intent browserIntent = new Intent( Intent.ACTION_VIEW, Uri.parse( link ) );
                context.startActivity( browserIntent );
                lastRemind = Long.MAX_VALUE;
                save( context, PREF_ID );
            }
        } );
        if (type.equals( TYPE_SUGGESTED )) {
            builder.setNegativeButton( "Skip", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {
                    dialog.cancel();
                    lastRemind = System.currentTimeMillis();
                    save( context, PREF_ID );
                }
            } );
        }
        AlertDialog alert = builder.create();
        alert.show();
    }
} 
```

这是我的警报对话框的代码。我都在我的活动 onResume 上检查升级。我真的不知道为什么它只呈现**升级按钮**而不是所有布局。你知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T12:09:54.677

我使用您的代码制作了一个 AlertDialog，它按预期显示。您是否定义了自定义主题？如果是这样，请尝试仅使用系统默认主题，看看是否有帮助。

**更多的**

好的，主题不是您的问题... XML 中定义的静态布局怎么样？

# c - 客户端断开连接后第一次调用“发送”时没有收到 sigpipe

> ID：12597660
> 
> 赞同：2
> 
> 时间：2012-09-26T08:32:56.753
> 
> 标签：c, tcp

我正在开发一个 TCP 服务器端应用程序，它将数据转发到客户端。

我面临的问题是我试图在我的服务器端应用程序上找出我的客户端是否断开连接以及哪些数据已发送，哪些未发送。

我的研究表明，基本上有两种方法可以找出答案：

*   1) 从套接字读取并检查 FIN 信号是否返回
*   2) 等待发送调用上的 sigpipe 信号

第一个解决方案对我来说似乎并不可靠，因为我不能保证客户端不会发送任何随机数据，因此即使它不应该成功也会使我的测试成功。

第二种解决方案的问题是，我只在调用 X 之后才获得 sigpipe，`send`因此无法保证真正发送了哪些数据，哪些没有。我在 SO 和其他网站上读到这里，sigpipe 只应该在第二次调用之后出现`send`，如果我只通过 localhost 发送和接收，我可以重现这种行为，但如果我真的使用网络就不行。

我现在的问题是 X 可以变化是否正常，如果是，我可能会考虑哪些参数来改变这种行为，或者由于 TCP 的性质，这是否可能不可靠。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T13:06:46.207

TCP 连接是双向的。来自客户端的 FIN 表示客户端将不再发送任何数据，但另一个方向（从服务器到客户端）的数据仍然可以发送（如果客户端没有重置与 RST 的连接）。从客户端检测 FIN 的可靠方法是从客户端套接字（如果您使用套接字接口）读取，直到读取返回 0。

TCP 保证，如果两端都以确认的 FIN 终止连接，则在连接中交换的所有数据都被另一端接收。如果使用 RST 终止连接，则 TCP 本身无法确定对方成功读取了哪些数据。为此，您需要一些应用程序级别的机制，例如应用程序级别的确认。但最好的方法是以这样的方式设计你的协议，在正常情况下，连接总是优雅地关闭（来自双方的 FIN，没有 RST）。

# c# - 初始化对象时为 NullReferenceExn，但前提是存在 Lambda 表达式（在 C# 中）

> ID：12597663
> 
> 赞同：1
> 
> 时间：2012-09-26T08:33:19.723
> 
> 标签：c#, lambda, closures, nullreferenceexception

我有以下奇怪的情况：`Pair`是一个持有 a`Widget`和 an的值类型`Int32`，并`GetNonNullWidget()`返回一个特定的 non-null `Widget`。`List<Pair> lstWidgetsAndNumbers`是一个列表。

以下代码*在初始化局部变量时*抛出空引用异常：

编辑：

```
Widget widgetX = null;        //this throws a NulLRefExn

widgetX = GetNonNullWidget();

var pairX = lstWidgetsAndNumbers.Find(pair => pair.First == widgetX);     //but only if this line exists. 
```

VisulStudio2008 中的本地窗口显示 `widgetX`红色警告，并显示消息“'' is null”。

如果我将第三行与 lambda 封装在一个方法中，那么一切正常。

我清楚地了解 lambda，甚至比我想象的还要少；谁能解释这里发生了什么？谢谢！

编辑：

需要明确的是：`GetNonNullWidget()`返回 a `Widget`，并且它是非空的，可以在调试时检查。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:18:03.090

[`as`操作员永远不应该抛出 NullReferenceException ，这](http://msdn.microsoft.com/en-us/library/cscsdfbt%28v=vs.100%29.aspx)就是为什么我认为根据您当前的描述，调试器有问题。

验证以下内容：

*   你在调试`Debug`构建吗？
*   [构建属性中是否未选中“优化代码”复选框？](http://joelblogs.co.uk/2010/02/10/visual-studio-2008-%E2%80%93-when-debugging-highlights-the-wrong-line/)

如果所有这些都正确，请尝试以下一项或多项：

*   重建您的解决方案。
*   重新启动 Visual Studio。

# hyperlink - 带有目标的 IE9 链接不起作用

> ID：12597664
> 
> 赞同：2
> 
> 时间：2012-09-26T08:33:21.050
> 
> 标签：hyperlink, internet-explorer-9, href

我在 IE9 中看到一个奇怪的行为：

```
 1 <a href="http://stackoverflow.com" target="_blank">Link is not working in IE9</a>
    2 <a href="http://stackoverflow.com" target="mywindow">Link is not working in IE9</a>
    3 <a href="http://stackoverflow.com">Link is working in IE9</a> 
```

用 IE8 测试它，所有 3 个链接都可以正常工作。用一个 IE9 链接 1 和 2 测试它不起作用（不幸的是，如果这是 IE9 中的一般问题或只是在我正在测试的系统上，我没有人使用 IE9 进行测试）。

我试图这样做[http://www.pcwindowstips.com/2007/internet-explorer-tips/hyperlinks-not-working-in-internet-explorer/](http://www.pcwindowstips.com/2007/internet-explorer-tips/hyperlinks-not-working-in-internet-explorer/)但没有成功。即使重置内部设置也无济于事。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T08:37:18.087

使用这个片段它对我有用，但在新标签而不是新窗口中打开：

```
<html>
    <head>
        <title>test a</title>
    </head>
    <body>
        <a href="http://stackoverflow.com" target="_blank">Link is not working in IE9</a>
        <a href="http://stackoverflow.com" target="mywindow">Link is not working in IE9</a>
        <a href="http://stackoverflow.com">Link is working in IE9</a>
    </body>
</html> 
```

你有多确定他们没有被弹出窗口阻止程序阻止？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T13:30:45.420

这似乎是 IE 中的选项卡的问题：如果您打开选项卡并告诉 IE 在新窗口而不是新选项卡中打开链接，它不起作用。如果您告诉 IE 在新选项卡中打开链接，它会起作用。

# android - 为什么android sdks之间存在依赖关系？

> ID：12597667
> 
> 赞同：0
> 
> 时间：2012-09-26T08:33:33.393
> 
> 标签：android, android-emulator, android-sdk-2.3, qemu, android-image

我要安装的是ARM EABI，但是我必须选择很多我已经安装的sdk，而且为了断网而下载它们是很糟糕的:(

我只是想知道，为什么 android sdk 之间存在如此复杂的依赖关系？

![sdk 之间的依赖关系](../Images/d9ff65821bdcc0431bbd7ab7b1c95471.png)

顺便问一下，SDK Manager 是开源的吗？

此问题与[未显示 Android SDK 不同](https://stackoverflow.com/questions/8822261/android-sdks-dont-show-up)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T08:39:30.757

实际上，您**无需**选择任何 SDK 来安装`ARM EABI v7a`

其余的都是自动选择的，作为可用的更新版本。

因此，只需在 SDK 管理器中检查 ARM EABI 选项即可安装。

实际上 ARM EABI 仅支持 API 级别 14。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T08:37:47.397

返回并检查在 avd 管理器中标记了哪些软件包，您当时只能下载 1 个图像，可能您选择了多个内容或所有这些都是建议的更新。

# mysql - 尝试创建表时 MySql 语法错误

> ID：12597671
> 
> 赞同：0
> 
> 时间：2012-09-26T08:33:51.660
> 
> 标签：mysql, sql

我正在尝试在我的数据库中创建一个表（由 godaddy 托管）

当我尝试在数据库中创建一个表时，它会给我一个错误

```
#1046 - No database selected 
```

所以我正在尝试创建一个这样的表

```
USE orderformuser

CREATE TABLE `users`(
`user_id` int NOT NULL AUTO_INCREMENT,
`username` char(25),
`password` char(40),
UNIQUE (User_Id)
) 
```

但是我现在收到这个错误..我只是不知道我做错了什么

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'CREATE TABLE `users`(
`user_id` int NOT NULL AUTO_INCREMENT,
`username` char(2' at line 3 
```

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T08:37:38.460

您忘记`;`在`use ...`. `;`用于终止mysql中的行。

```
USE orderformuser;

CREATE TABLE `users`
(
   `user_id` int NOT NULL AUTO_INCREMENT,
   `username` char(25),
   `password` char(40),
   CONSTRAINT u_pk PRIMARY KEY (User_Id)
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T08:39:16.710

首先，您必须创建一个空白数据库 orderformuser。在您必须进入此数据库并尝试使用更改代码创建表后，因为您忘记了“;” 像这样：

```
USE orderformuser;
CREATE TABLE `users`
(
`user_id` int NOT NULL AUTO_INCREMENT,
`username` char(25),
`password` char(40),
UNIQUE (User_Id)
) 
```

# javascript - 设置一个 cookie，然后用另一个 div 替换一个 div

> ID：12597673
> 
> 赞同：0
> 
> 时间：2012-09-26T08:33:56.497
> 
> 标签：javascript, jquery, session, cookies

我在尝试使用 Carhartl 的 jQuery 插件时遇到问题：[https ://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)

我认为这将是一件相当容易的事情，但我对 jQuery 和 cookie 还很陌生，尤其是我现在真的很挣扎。

我想做的是：

1.  设置一个记录访问的cookie
2.  将一个 div 切换为另一个（在这种情况下，将粘性栏更改为具有不同内容的不同粘性栏）
3.  为回访者保留新内容 x 时间（如果我能指定确切的时间，那就更好了）

当前代码如下所示：

```
$(function() {
    if(!$.cookie('repeatVisitor')) {
        $.cookie("repeatVisitor", "true", { expires: 3 }); //expires in 3 days
        setTimeout('showDivTwo();', 3000);    
    }
})

function showDivTwo() {
    $('#sticky-bar').fadeOut();
    $('#sticky-private').fadeIn();
} 
```

我真的很感激一些帮助，我急需！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T08:47:47.580

您的 cookie 插件使用看起来正确；您的所有代码也是如此。我认为这可能是一个逻辑问题。

第一次之后，您的代码将永远不会显示私有 div。

您可以进行此调整，但请注意，如果您这样做，您将始终看到私有 div。

似乎缺少的是用户需要采取的特定操作来触发 cookie，而不仅仅是 cookie 不存在：

```
$(function() {
    if(!$.cookie('repeatVisitor')) {
        // if the user is not a repeat visitor, set the cookie
        $.cookie("repeatVisitor", "true", { expires: 3 }); //expires in 3 days
    }

    if ($.cookie('repeatVisitor')) {
        // if the cookie exists, show the custom div
        setTimeout('showDivTwo();', 3000);
    }
})

function showDivTwo() {
    $('#sticky-bar').fadeOut();
    $('#sticky-private').fadeIn();
} 
```

# c# - 压缩格式的数据

> ID：12597675
> 
> 赞同：0
> 
> 时间：2012-09-26T08:34:11.053
> 
> 标签：c#, algorithm

我需要一个库，它可以帮助我以压缩格式（本质上是迷你 DSL）保存和查询数据，这是我想要的示例：

**更新 1** - 请注意，上面示例中的数字被缩小只是为了更容易遵循逻辑，实际数字受`c# long`类型容量的限制，例如： `1,18,28,29,39,18456789,18456790,18456792,184567896`.

样本原始数据集：`1,2,3,8,11,12,13,14`

**压缩样本数据集：** `1..3,8,11..14`

能够`1,2,4,5,6,7,8,9,10`以`1..10-3`.

**查询样本数据集：**

查询 1（获取范围）： `1..5`->`1..3`

查询2（检查值是否存在） `?2`->`true`

查询 3（获取多个范围和标量值）： `1..5,11..12,14`->`1..3,11..12,14`

我不想从头开始开发它，并且非常喜欢使用已经存在的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T08:57:45.013

我不知道有任何现成的库可以完全满足您的需求，但我不确定您是否需要一个。

我建议你考虑使用现有的`BitArray`类。如果，正如您的示例所暗示的，您对压缩小整数集感兴趣，那么单个`BitArray`具有（例如 256 位）的整数可以表示 range 中的任何整数集`[0..255]`。当然，如果您的典型集合中只有 5 个整数，那么这种方法实际上会扩展您的存储需求；您必须根据自己对集合的了解来确定此类数组的正确大小。

我建议还将您的数据视为整数集，因此您的示例`1,2,3,8,11,12,13,14`将通过设置 a 中的相应位来表示`BitArray`。然后，您的查询操作减少为测试`BitArray`和数据之间的交集`BitArray`。

顺便说一句，我认为您的示例 2`2 -> true`会更好地停留在将整数集映射到整数集的函数域中，即它应该 transform `2 -> 2`。如果您愿意，请编写一个返回布尔值的不同方法。

我猜你需要编写代码来将整数打包和解`BitArrays`包`BitArrays`成整数，但这是压缩成本的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T07:37:26.713

自从我阅读您的问题以来，这是我这些天以来的一些想法。我不能确定它们中的任何一个是否真的适用于您的用例，但我希望您能在这里找到有用的东西。

### 存储压缩数据

您可以采取的步骤来减少数字在磁盘上占用的空间量：

*   如果您的值在 1 到 ~10M 之间，请不要使用 a `long`，使用 a `uint`。（每个数字 4 个字节。）
*   实际上，不要使用`uint`. 将您的数字 7 位存储到一个字节，其余位用于表示“此数字中有更多字节”。（然后 1-127 适合 1 个字节，128-~16k 适合 2 个字节，~16k-~2M 适合 3 个字节，~2M-~270M 适合 4 个字节。）

这应该会将您的存储空间从每个数字 8 个字节（如果您最初将它们存储为`long`s）减少到平均 3 个字节。此外，如果您最终需要更大的数字，可变字节存储将能够容纳它们。

然后我可以想出一些方法来进一步减少它，因为你知道数字总是在增加并且可能包含很多运行。哪种方法最适合您，只有您通过在实际数据上尝试才能知道。

*   对于每个实际数字，存储两个数字：数字本身，后跟连续的数字数（例如`2,3,4,5,6`=> `2,4`）。您必须存储单独的数字，例如`8,0`这样会增加这些数据的存储空间，但如果您的数据有很多运行（尤其是长数据），这应该会平均减少存储空间。您*可以*在运行中进一步存储“单个间隙”，例如`1,2,3,5,6,7`=> `1,6,4`（明确，因为`4`太小而不能成为下一次运行的开始），但这会使处理更加复杂并且不会节省太多空间，所以我不会打扰。
*   或者，与其存储数字本身，不如存储增量（所以`3,4,5,7,8,9`=> `3,1,1,2,1,1`。这将减少用于存储较大数字的字节数（例如`15000,15005`（4 个字节）=> `15000,5`（3 个字节））。此外，如果数据包含很多运行（例如很多`1`字节），然后它会很好地压缩（例如zip）。

### 代码中的处理

我只是建议您编写几个方法，将文件从磁盘流式传输到一个`IEnumerable<uint>`（或者`ulong`如果您最终得到更大的数字），然后执行相反的操作，同时处理您从上面实现的任何内容。

如果您以一种懒惰的方式执行此操作 - 使用`yield return`在从磁盘读取它们并计算它们时返回数字，并将数字流式传输到磁盘而不是将它们保存在内存中并立即返回它们，您可以降低内存使用量存储数据的大小。

（我*认为*，但我*不确定*，即使是[GZipStream](http://msdn.microsoft.com/en-us/library/system.io.compression.gzipstream.aspx)和其他压缩流也可以让您流式传输数据，而无需将其全部存储在内存中。）

### 查询

如果您要比较两个大数据集，我不建议使用 LINQ 的`Intersect`方法，因为它需要将其中一个源完全读入内存。但是，您知道两个序列都在增加，您可以编写一个类似的方法，只需要为每个序列保存一个枚举器。

如果您要针对用户输入的小数字列表查询其中一个数据集，您可以愉快地使用`Intersect`当前实现的 LINQ 方法，因为它只需要*第二个*序列完全在内存中。

# delphi - Delphi/C++Builder 的标签编辑器组件

> ID：12597678
> 
> 赞同：14
> 
> 时间：2012-09-26T08:34:24.987
> 
> 标签：delphi, components, c++builder, vcl

我需要一个用于 Delphi 或 C++Builder 的 VCL 标签编辑器组件，类似于 JavaScript 可用的组件：例如[this one](http://aehlke.github.com/tag-it/examples.html)，或者[this one](http://xoxco.com/projects/code/tagsinput/)或 StackOverflow 自己的标签编辑器。

有这样的东西可用还是我需要从头开始制作？

我需要的一些具体的东西是：

*   如果存在的标签多于编辑器的宽度允许的数量，编辑器应允许滚动或变为多行。如果是多行，应该有一个选项来定义一些最大高度，但是，防止它变得太高
*   选择按空格键或逗号键时是否创建标签的选项
*   编辑器中的提示文本，当它没有被聚焦时（例如“添加新标签”）
*   理想情况下，您应该能够使用键盘箭头在标签之间移动（突出显示它们），因此您可以仅使用键盘删除任何标签

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-09-26T11:05:06.737

你当然想自己做这个！编写 GUI 控件既有趣又有益！

你可以做类似的事情

```
unit TagEditor;

interface

uses
  Windows, Messages, SysUtils, Classes, Controls, StdCtrls, Forms, Graphics,
  Types, Menus;

type
  TClickInfo = cardinal;
  GetTagIndex = word;

const TAG_LOW = 0;
const TAG_HIGH = MAXWORD - 2;
const EDITOR = MAXWORD - 1;
const NOWHERE = MAXWORD;

const PART_BODY = $00000000;
const PART_REMOVE_BUTTON = $00010000;

function GetTagPart(ClickInfo: TClickInfo): cardinal;

type
  TTagClickEvent = procedure(Sender: TObject; TagIndex: integer;
    const TagCaption: string) of object;
  TRemoveConfirmEvent = procedure(Sender: TObject; TagIndex: integer;
    const TagCaption: string; var CanRemove: boolean) of object;
  TTagEditor = class(TCustomControl)
  private
    { Private declarations }
    FTags: TStringList;
    FEdit: TEdit;
    FBgColor: TColor;
    FBorderColor: TColor;
    FTagBgColor: TColor;
    FTagBorderColor: TColor;
    FSpacing: integer;
    FTextColor: TColor;
    FLefts, FRights, FWidths,
    FTops, FBottoms: array of integer;
    FCloseBtnLefts, FCloseBtnTops: array of integer;
    FCloseBtnWidth: integer;
    FSpaceAccepts: boolean;
    FCommaAccepts: boolean;
    FSemicolonAccepts: boolean;
    FTrimInput: boolean;
    FNoLeadingSpaceInput: boolean;
    FTagClickEvent: TTagClickEvent;
    FAllowDuplicates: boolean;
    FPopupMenu: TPopupMenu;
    FMultiLine: boolean;
    FTagHeight: integer;
    FEditPos: TPoint;
    FActualTagHeight: integer;
    FShrunk: boolean;
    FEditorColor: TColor;
    FTagAdded: TNotifyEvent;
    FTagRemoved: TNotifyEvent;
    FOnChange: TNotifyEvent;
    FOnRemoveConfirm: TRemoveConfirmEvent;
    FMouseDownClickInfo: TClickInfo;
    FCaretVisible: boolean;
    FDragging: boolean;
    FAutoHeight: boolean;
    FNumRows: integer;
    procedure SetBorderColor(const Value: TColor);
    procedure SetTagBgColor(const Value: TColor);
    procedure SetTagBorderColor(const Value: TColor);
    procedure SetSpacing(const Value: integer);
    procedure TagChange(Sender: TObject);
    procedure SetTags(const Value: TStringList);
    procedure SetTextColor(const Value: TColor);
    procedure ShowEditor;
    procedure HideEditor;
    procedure EditKeyPress(Sender: TObject; var Key: Char);
    procedure mnuDeleteItemClick(Sender: TObject);
    procedure SetMultiLine(const Value: boolean);
    procedure SetTagHeight(const Value: integer);
    procedure EditExit(Sender: TObject);
    function Accept: boolean;
    procedure SetBgColor(const Value: TColor);
    function GetClickInfoAt(X, Y: integer): TClickInfo;
    function GetSeparatorIndexAt(X, Y: integer): integer;
    procedure CreateCaret;
    procedure DestroyCaret;
    function IsFirstOnRow(TagIndex: integer): boolean; inline;
    function IsLastOnRow(TagIndex: integer): boolean;
    procedure SetAutoHeight(const Value: boolean);
  protected
    { Protected declarations }
    procedure Paint; override;
    procedure MouseDown(Button: TMouseButton; Shift: TShiftState; X: Integer;
      Y: Integer); override;
    procedure MouseMove(Shift: TShiftState; X: Integer; Y: Integer); override;

    procedure KeyPress(var Key: Char); override;
    procedure WndProc(var Message: TMessage); override;
    procedure KeyDown(var Key: Word; Shift: TShiftState); override;
    procedure MouseUp(Button: TMouseButton; Shift: TShiftState; X: Integer;
      Y: Integer); override;
  public
    { Public declarations }
    constructor Create(AOwner: TComponent); override;
    destructor Destroy; override;
  published
    { Published declarations }
    property TabOrder;
    property TabStop;
    property Color;
    property Anchors;
    property Align;
    property Tag;
    property Cursor;
    property BgColor: TColor read FBgColor write SetBgColor;
    property BorderColor: TColor read FBorderColor write SetBorderColor;
    property TagBgColor: TColor read FTagBgColor write SetTagBgColor;
    property TagBorderColor: TColor read FTagBorderColor
      write SetTagBorderColor;
    property Spacing: integer read FSpacing write SetSpacing;
    property Tags: TStringList read FTags write SetTags;
    property TextColor: TColor read FTextColor write SetTextColor;
    property SpaceAccepts: boolean read FSpaceAccepts write FSpaceAccepts
      default true;
    property CommaAccepts: boolean read FCommaAccepts write FCommaAccepts
      default true;
    property SemicolonAccepts: boolean read FSemicolonAccepts
      write FSemicolonAccepts default true;
    property TrimInput: boolean read FTrimInput write FTrimInput default true;
    property NoLeadingSpaceInput: boolean read FNoLeadingSpaceInput
      write FNoLeadingSpaceInput default true;
    property AllowDuplicates: boolean read FAllowDuplicates write FAllowDuplicates
      default false;
    property MultiLine: boolean read FMultiLine write SetMultiLine default false;
    property TagHeight: integer read FTagHeight write SetTagHeight default 32;
    property EditorColor: TColor read FEditorColor write FEditorColor
      default clWindow;
    property AutoHeight: boolean read FAutoHeight write SetAutoHeight;
    property OnTagClick: TTagClickEvent read FTagClickEvent write FTagClickEvent;
    property OnTagAdded: TNotifyEvent read FTagAdded write FTagAdded;
    property OnTagRemoved: TNotifyEvent read FTagRemoved write FTagRemoved;
    property OnChange: TNotifyEvent read FOnChange write FOnChange;
    property OnRemoveConfirm: TRemoveConfirmEvent read FOnRemoveConfirm
      write FOnRemoveConfirm;
  end;

procedure Register;

implementation

uses Math, Clipbrd;

procedure Register;
begin
  RegisterComponents('Rejbrand 2009', [TTagEditor]);
end;

function IsKeyDown(const VK: integer): boolean;
begin
  IsKeyDown := GetKeyState(VK) and $8000 <> 0;
end;

function GetTagPart(ClickInfo: TClickInfo): cardinal;
begin
  result := ClickInfo and $FFFF0000;
end;

{ TTagEditor }

constructor TTagEditor.Create(AOwner: TComponent);
var
  mnuItem: TMenuItem;
begin
  inherited;
  FEdit := TEdit.Create(Self);
  FEdit.Parent := Self;
  FEdit.BorderStyle := bsNone;
  FEdit.Visible := false;
  FEdit.OnKeyPress := EditKeyPress;
  FEdit.OnExit := EditExit;

  FTags := TStringList.Create;
  FTags.OnChange := TagChange;

  FBgColor := clWindow;
  FBorderColor := clWindowFrame;
  FTagBgColor := clSkyBlue;
  FTagBorderColor := clNavy;
  FSpacing := 8;
  FTextColor := clWhite;
  FSpaceAccepts := true;
  FCommaAccepts := true;
  FSemicolonAccepts := true;
  FTrimInput := true;
  FNoLeadingSpaceInput := true;
  FAllowDuplicates := false;
  FMultiLine := false;
  FTagHeight := 32;
  FShrunk := false;
  FEditorColor := clWindow;
  FCaretVisible := false;
  FDragging := false;

  FPopupMenu := TPopupMenu.Create(Self);
  mnuItem := TMenuItem.Create(PopupMenu);
  mnuItem.Caption := 'Delete';
  mnuItem.OnClick := mnuDeleteItemClick;
  mnuItem.Hint := 'Deletes the selected tag.';
  FPopupMenu.Items.Add(mnuItem);

  TabStop := true;
end;

procedure TTagEditor.EditExit(Sender: TObject);
begin
  if FEdit.Text <> '' then
    Accept
  else
    HideEditor;
end;

procedure TTagEditor.mnuDeleteItemClick(Sender: TObject);
begin
  if Sender is TMenuItem then
  begin
    FTags.Delete(TMenuItem(Sender).Tag);
    if Assigned(FTagRemoved) then
      FTagRemoved(Self);
  end;
end;

procedure TTagEditor.TagChange(Sender: TObject);
begin
  Invalidate;
  if Assigned(FOnChange) then
    FOnChange(Self);
end;

procedure TTagEditor.WndProc(var Message: TMessage);
begin
  inherited;
  case Message.Msg of
    WM_SETFOCUS:
      Invalidate;
    WM_KILLFOCUS:
      begin
        if FCaretVisible then DestroyCaret;
        FDragging := false;
        Invalidate;
      end;
    WM_COPY:
      Clipboard.AsText := FTags.DelimitedText;
    WM_CLEAR:
      FTags.Clear;
    WM_CUT:
      begin
        Clipboard.AsText := FTags.DelimitedText;
        FTags.Clear;
      end;
    WM_PASTE:
      begin
        if Clipboard.HasFormat(CF_TEXT) then
          if FTags.Count = 0 then
            FTags.DelimitedText := Clipboard.AsText
          else
            FTags.DelimitedText := FTags.DelimitedText + ',' + Clipboard.AsText;
      end;
  end;
end;

function TTagEditor.Accept: boolean;
begin
  Assert(FEdit.Visible);
  result := false;
  if FTrimInput then
    FEdit.Text := Trim(FEdit.Text);
  if (FEdit.Text = '') or
    ((not AllowDuplicates) and (FTags.IndexOf(FEdit.Text) <> -1))  then
  begin
    beep;
    Exit;
  end;
  FTags.Add(FEdit.Text);
  result := true;
  HideEditor;
  if Assigned(FTagAdded) then
    FTagAdded(Self);
  Invalidate;
end;

procedure TTagEditor.EditKeyPress(Sender: TObject; var Key: Char);
begin

  if (Key = chr(VK_SPACE)) and (FEdit.Text = '') and FNoLeadingSpaceInput then
  begin
    Key := #0;
    Exit;
  end;

  if ((Key = chr(VK_SPACE)) and FSpaceAccepts) or
    ((Key = ',') and FCommaAccepts) or
    ((Key = ';') and FSemicolonAccepts) then
    Key := chr(VK_RETURN);

  case ord(Key) of
    VK_RETURN:
      begin
        Accept;
        ShowEditor;
        Key := #0;
      end;
    VK_BACK:
      begin
        if (FEdit.Text = '') and (FTags.Count > 0) then
        begin
          FTags.Delete(FTags.Count - 1);
          if Assigned(FTagRemoved) then
            FTagRemoved(Sender);
        end;
      end;
    VK_ESCAPE:
      begin
        HideEditor;
        Self.SetFocus;
        Key := #0;
      end;
  end;

end;

destructor TTagEditor.Destroy;
begin
  FPopupMenu.Free;
  FTags.Free;
  FEdit.Free;
  inherited;
end;

procedure TTagEditor.HideEditor;
begin
  FEdit.Text := '';
  FEdit.Hide;
//  SetFocus;
end;

procedure TTagEditor.KeyDown(var Key: Word; Shift: TShiftState);
begin
  inherited;
  case Key of
    VK_END:
      ShowEditor;
    VK_DELETE:
      Perform(WM_CLEAR, 0, 0);
    VK_INSERT:
      Perform(WM_PASTE, 0, 0);
  end;
end;

procedure TTagEditor.KeyPress(var Key: Char);
begin
  inherited;

  case Key of
    ^C:
      begin
        Perform(WM_COPY, 0, 0);
        Key := #0;
        Exit;
      end;
    ^X:
      begin
        Perform(WM_CUT, 0, 0);
        Key := #0;
        Exit;
      end;
    ^V:
      begin
        Perform(WM_PASTE, 0, 0);
        Key := #0;
        Exit;
      end;
  end;

  ShowEditor;
  FEdit.Perform(WM_CHAR, ord(Key), 0);
end;

function TTagEditor.GetClickInfoAt(X, Y: integer): TClickInfo;
var
  i: integer;
begin
  result := NOWHERE;
  if (X >= FEditPos.X) and (Y >= FEditPos.Y) then
    Exit(EDITOR);

  for i := 0 to FTags.Count - 1 do
    if InRange(X, FLefts[i], FRights[i]) and InRange(Y, FTops[i], FBottoms[i]) then
    begin
      result := i;
      if InRange(X, FCloseBtnLefts[i], FCloseBtnLefts[i] + FCloseBtnWidth) and
        InRange(Y, FCloseBtnTops[i], FCloseBtnTops[i] + FActualTagHeight) and
        not FShrunk then
        result := result or PART_REMOVE_BUTTON;
      break;
    end;
end;

function TTagEditor.IsFirstOnRow(TagIndex: integer): boolean;
begin
  result := (TagIndex = 0) or (FTops[TagIndex] > FTops[TagIndex-1]);
end;

function TTagEditor.IsLastOnRow(TagIndex: integer): boolean;
begin
  result := (TagIndex = FTags.Count - 1) or (FTops[TagIndex] < FTops[TagIndex+1]);
end;

function TTagEditor.GetSeparatorIndexAt(X, Y: integer): integer;
var
  i: Integer;
begin
  result := FTags.Count;
  Y := Max(Y, FSpacing + 1);
  for i := FTags.Count - 1 downto 0 do
  begin
    if Y < FTops[i] then Continue;
    if (IsLastOnRow(i) and (X >= FRights[i])) or
      ((X < FRights[i]) and (IsFirstOnRow(i) or (FRights[i-1] < X))) then
    begin
      result := i;
      if (IsLastOnRow(i) and (X >= FRights[i])) then inc(result);
      Exit;
    end;
  end;
end;

procedure TTagEditor.MouseDown(Button: TMouseButton; Shift: TShiftState; X,
  Y: Integer);
begin
  FMouseDownClickInfo := GetClickInfoAt(X, Y);
  if GetTagIndex(FMouseDownClickInfo) <> EDITOR then
    SetFocus;
end;

procedure TTagEditor.CreateCaret;
begin
  if not FCaretVisible then
    FCaretVisible := Windows.CreateCaret(Handle, 0, 0, FActualTagHeight);
end;

procedure TTagEditor.DestroyCaret;
begin
  if not FCaretVisible then Exit;
  Windows.DestroyCaret;
  FCaretVisible := false;
end;

procedure TTagEditor.MouseMove(Shift: TShiftState; X, Y: Integer);
var
  SepIndex: integer;
begin
  inherited;

  if IsKeyDown(VK_LBUTTON) and
    InRange(GetTagIndex(FMouseDownClickInfo), TAG_LOW, TAG_HIGH) then
  begin
    FDragging := true;
    Screen.Cursor := crDrag;
    SepIndex := GetSeparatorIndexAt(X, Y);
    TForm(Parent).Caption := IntToStr(SepIndex);
    CreateCaret;
    if SepIndex = FTags.Count then
      SetCaretPos(FLefts[SepIndex - 1] + FWidths[SepIndex - 1] + FSpacing div 2,
        FTops[SepIndex - 1])
    else
      SetCaretPos(FLefts[SepIndex] - FSpacing div 2, FTops[SepIndex]);
    ShowCaret(Handle);
    Exit;
  end;

  case GetTagIndex(GetClickInfoAt(X,Y)) of
    NOWHERE: Cursor := crArrow;
    EDITOR: Cursor := crIBeam;
    TAG_LOW..TAG_HIGH: Cursor := crHandPoint;
  end;

end;

procedure TTagEditor.MouseUp(Button: TMouseButton; Shift: TShiftState; X,
  Y: Integer);
var
  pnt: TPoint;
  CanRemove: boolean;
  ClickInfo: TClickInfo;
  i: word;
  p: cardinal;
  SepIndex: integer;
begin
  inherited;

  if FDragging then
  begin
    DestroyCaret;
    FDragging := false;
    Screen.Cursor := crDefault;
    SepIndex := GetSeparatorIndexAt(X, Y);
    if not InRange(SepIndex, GetTagIndex(FMouseDownClickInfo),
      GetTagIndex(FMouseDownClickInfo) + 1) then
      FTags.Move(GetTagIndex(FMouseDownClickInfo), SepIndex -
        IfThen(SepIndex > GetTagIndex(FMouseDownClickInfo), 1, 0));
    Exit;
  end;

  ClickInfo := GetClickInfoAt(X, Y);

  if ClickInfo <> FMouseDownClickInfo then Exit;

  i := GetTagIndex(ClickInfo);
  p := GetTagPart(ClickInfo);

  case i of
    EDITOR:
      ShowEditor;
    NOWHERE: ;
  else
    case Button of
      mbLeft:
        begin
          case p of
            PART_BODY:
              if Assigned(FTagClickEvent) then
                FTagClickEvent(Self, i, FTags[i]);
            PART_REMOVE_BUTTON:
              begin
                if Assigned(FOnRemoveConfirm) then
                begin
                  CanRemove := false;
                  FOnRemoveConfirm(Self, i, FTags[i], CanRemove);
                  if not CanRemove then Exit;
                end;
                FTags.Delete(i);
                if Assigned(FTagRemoved) then
                  FTagRemoved(Self);
              end;
          end;
        end;
      mbRight:
        begin
          FPopupMenu.Items[0].Tag := i;
          pnt := ClientToScreen(Point(X,Y));
          FPopupMenu.Items[0].Caption := 'Delete tag "' + FTags[i] + '"';
          FPopupMenu.Popup(pnt.X, pnt.Y);
        end;
    end;
  end;

end;

procedure TTagEditor.Paint;
var
  i: integer;
  w: integer;
  x, y: integer;
  R: TRect;
  MeanWidth: integer;
  S: string;
  DesiredHeight: integer;
begin
  inherited;
  Canvas.Brush.Color := FBgColor;
  Canvas.Pen.Color := FBorderColor;
  Canvas.Rectangle(ClientRect);
  Canvas.Font.Assign(Self.Font);
  SetLength(FLefts, FTags.Count);
  SetLength(FRights, FTags.Count);
  SetLength(FTops, FTags.Count);
  SetLength(FBottoms, FTags.Count);
  SetLength(FWidths, FTags.Count);
  SetLength(FCloseBtnLefts, FTags.Count);
  SetLength(FCloseBtnTops, FTags.Count);
  FCloseBtnWidth := Canvas.TextWidth('×');
  FShrunk := false;

  // Do metrics
  FNumRows := 1;
  if FMultiLine then
  begin
    FActualTagHeight := FTagHeight;
    x := FSpacing;
    y := FSpacing;
    for i := 0 to FTags.Count - 1 do
    begin
      FWidths[i] := Canvas.TextWidth(FTags[i] + ' ×') + 2*FSpacing;
      FLefts[i] := x;
      FRights[i] := x + FWidths[i];
      FTops[i] := y;
      FBottoms[i] := y + FTagHeight;

      if x + FWidths[i] + FSpacing > ClientWidth then
   { no need to make room for the editor, since it can reside on the next row! }
      begin
        x := FSpacing;
        inc(y, FTagHeight + FSpacing);
        inc(FNumRows);
        FLefts[i] := x;
        FRights[i] := x + FWidths[i];
        FTops[i] := y;
        FBottoms[i] := y + FTagHeight;
      end;

      FCloseBtnLefts[i] := x + FWidths[i] - FCloseBtnWidth - FSpacing;
      FCloseBtnTops[i] := y;

      inc(x, FWidths[i] + FSpacing);
    end;
  end
  else // i.e., not FMultiLine
  begin
    FActualTagHeight := ClientHeight - 2*FSpacing;
    x := FSpacing;
    y := FSpacing;
    for i := 0 to FTags.Count - 1 do
    begin
      FWidths[i] := Canvas.TextWidth(FTags[i] + ' ×') + 2*FSpacing;
      FLefts[i] := x;
      FRights[i] := x + FWidths[i];
      FTops[i] := y;
      FBottoms[i] := y + FActualTagHeight;
      inc(x, FWidths[i] + FSpacing);
      FCloseBtnLefts[i] := FRights[i] - FCloseBtnWidth - FSpacing;
      FCloseBtnTops[i] := y;
    end;
    FShrunk := x + 64 {FEdit} > ClientWidth;
    if FShrunk then
    begin

      // Enough to remove close buttons?
      x := FSpacing;
      y := FSpacing;
      for i := 0 to FTags.Count - 1 do
      begin
        FWidths[i] := Canvas.TextWidth(FTags[i]) + 2*FSpacing;
        FLefts[i] := x;
        FRights[i] := x + FWidths[i];
        FTops[i] := y;
        FBottoms[i] := y + FActualTagHeight;
        inc(x, FWidths[i] + FSpacing);
        FCloseBtnLefts[i] := FRights[i] - FCloseBtnWidth - FSpacing;
        FCloseBtnTops[i] := y;
      end;

      if x + 64 {FEdit} > ClientWidth then // apparently no
      begin
        MeanWidth := (ClientWidth - 2*FSpacing - 64 {FEdit}) div FTags.Count - FSpacing;
        x := FSpacing;
        for i := 0 to FTags.Count - 1 do
        begin
          FWidths[i] := Min(FWidths[i], MeanWidth);
          FLefts[i] := x;
          FRights[i] := x  + FWidths[i];
          inc(x, FWidths[i] + FSpacing);
        end;
      end;
    end;
  end;

  FEditPos := Point(FSpacing, FSpacing + (FActualTagHeight - FEdit.Height) div 2);
  if FTags.Count > 0 then
    FEditPos := Point(FRights[FTags.Count - 1] + FSpacing,
      FTops[FTags.Count - 1] + (FActualTagHeight - FEdit.Height) div 2);
  if FMultiLine and (FEditPos.X + 64 > ClientWidth) and (FTags.Count > 0) then
  begin
    FEditPos := Point(FSpacing,
      FTops[FTags.Count - 1] + FTagHeight + FSpacing +
      (FActualTagHeight - FEdit.Height) div 2);
    inc(FNumRows);
  end;

  DesiredHeight := FSpacing + FNumRows*(FTagHeight+FSpacing);
  if FMultiLine and FAutoHeight and (ClientHeight <> DesiredHeight) then
  begin
    ClientHeight := DesiredHeight;
    Invalidate;
    Exit;
  end;

  // Draw
  for i := 0 to FTags.Count - 1 do
  begin
    x := FLefts[i];
    y := FTops[i];
    w := FWidths[i];
    R := Rect(x, y, x + w, y + FActualTagHeight);
    Canvas.Brush.Color := FTagBgColor;
    Canvas.Pen.Color := FTagBorderColor;
    Canvas.Rectangle(R);
    Canvas.Font.Color := FTextColor;
    Canvas.Brush.Style := bsClear;
    R.Left := R.Left + FSpacing;
    S := FTags[i];
    if not FShrunk then
      S := S + ' ×';
    DrawText(Canvas.Handle, PChar(S), -1, R, DT_SINGLELINE or DT_VCENTER or
      DT_LEFT or DT_END_ELLIPSIS or DT_NOPREFIX);
    Canvas.Brush.Style := bsSolid;
  end;

  if FEdit.Visible then
  begin
    FEdit.Left := FEditPos.X;
    FEdit.Top := FEditPos.Y;
    FEdit.Width := ClientWidth - FEdit.Left - FSpacing;
  end;
  if Focused then
  begin
    R := Rect(2, 2, ClientWidth - 2, ClientHeight - 2);
    SetBkColor(Canvas.Handle, clWhite);
    SetTextColor(clBlack);
    Canvas.DrawFocusRect(R);
  end;
end;

procedure TTagEditor.SetAutoHeight(const Value: boolean);
begin
  if FAutoHeight <> Value then
  begin
    FAutoHeight := Value;
    Invalidate;
  end;
end;

procedure TTagEditor.SetBgColor(const Value: TColor);
begin
  if FBgColor <> Value then
  begin
    FBgColor := Value;
    Invalidate;
  end;
end;

procedure TTagEditor.SetBorderColor(const Value: TColor);
begin
  if FBorderColor <> Value then
  begin
    FBorderColor := Value;
    Invalidate;
  end;
end;

procedure TTagEditor.SetMultiLine(const Value: boolean);
begin
  if FMultiLine <> Value then
  begin
    FMultiLine := Value;
    Invalidate;
  end;
end;

procedure TTagEditor.SetTagBgColor(const Value: TColor);
begin
  if FTagBgColor <> Value then
  begin
    FTagBgColor := Value;
    Invalidate;
  end;
end;

procedure TTagEditor.SetTagBorderColor(const Value: TColor);
begin
  if FTagBorderColor <> Value then
  begin
    FTagBorderColor := Value;
    Invalidate;
  end;
end;

procedure TTagEditor.SetTagHeight(const Value: integer);
begin
  if FTagHeight <> Value then
  begin
    FTagHeight := Value;
    Invalidate;
  end;
end;

procedure TTagEditor.SetTags(const Value: TStringList);
begin
  FTags.Assign(Value);
  Invalidate;
end;

procedure TTagEditor.SetTextColor(const Value: TColor);
begin
  if FTextColor <> Value then
  begin
    FTextColor := Value;
    Invalidate;
  end;
end;

procedure TTagEditor.ShowEditor;
begin
  FEdit.Left := FEditPos.X;
  FEdit.Top := FEditPos.Y;
  FEdit.Width := ClientWidth - FEdit.Left - FSpacing;
  FEdit.Color := FEditorColor;
  FEdit.Text := '';
  FEdit.Show;
  FEdit.SetFocus;
end;

procedure TTagEditor.SetSpacing(const Value: integer);
begin
  if FSpacing <> Value then
  begin
    FSpacing := Value;
    Invalidate;
  end;
end;

initialization
  Screen.Cursors[crHandPoint] := LoadCursor(0, IDC_HAND); // Get the normal hand cursor

end. 
```

产生

![截屏](../Images/af851e7bc7af7ca2f7af979ff737eee5.png)

[示例视频](https://privat.rejbrand.se/tageditor.mp4)

[演示（编译EXE）](https://privat.rejbrand.se/tagEditorTest.exe)

如果我今天晚些时候有更多的时间，我会在这个控件上做更多的工作，例如，鼠标悬停时按钮突出显示、标签点击事件、按钮最大宽度等。

**更新：**增加了很多功能。

**更新：**添加了多行功能。

**更新：**更多功能。

**更新：**添加剪贴板界面，修复了一些问题等。

**更新：**添加了拖放重新排序并修复了一些小问题。顺便说一句，这是我将在这里发布的最后一个版本。更高版本（如果有的话）将发布在[http://specials.rejbrand.se/dev/controls/](http://specials.rejbrand.se/dev/controls/)。

**更新：**添加`AutoHeight`属性，使编辑框垂直居中，并更改了拖动光标。（是的，我忍不住再做一次更新。）

# android - locationListener 只被调用一次

> ID：12597682
> 
> 赞同：1
> 
> 时间：2012-09-26T08:34:41.100
> 
> 标签：android, geolocation, android-asynctask, locationlistener

我想每 10 秒向远程服务器发送一些数据和坐标。我想，最好的比赛将是

```
public void onCreate( Bundle savedInstanceState ) {
  //snip
  locationManager.requestLocationUpdates( LocationManager.GPS_PROVIDER, 10000, 0, new SendingLocationListener() );
} 
```

在侦听器中，我有以下代码：

```
public void onLocationChanged( Location location ) {
  if( null == location ) return;
  TrackerNotifierTask task = new TrackerNotifierTask();
  task.execute( location );
} 
```

使用它的`TrackerNotifierTask`方法，所以很简单。`httpclient``doInBackground()`

现在，如果我开始活动，我可以看到活动`onLocationChanged()`被执行并且数据成功到达远程服务器。但只有一次！无论我以后做什么，改变坐标或任何东西，任务都不会被调用。

这是在android中实现这种东西的正确方法还是我应该求助于一些`background-service`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T12:09:30.833

Shrikant 的链接给了我一些关于`LocationListener`实现的类结构的提示。

类不一定必须定义为`inner anonymous class`. 我将它定义为内部，但命名为一个，它也有效。

诀窍是，必须将侦听器实例声明为字段：

```
private LocationListener listener;

@Override
public void onCreate( Bundle savedInstanceState ) {
  //snip
  locationManager = (LocationManager)this.getSystemService( Context.LOCATION_SERVICE );
  listener = new MyLocationListener( SomeActivity.this );
  locationManager.requestLocationUpdates( provider, 1000, 0, listener );
} 
```

否则它将在第一次运行后被垃圾收集，如果定义如下：

```
locationManager.requestLocationUpdates( provider, 1000, 0, new MyLocationListener() ); 
```

那是解决方案的一半。另一部分 - 关于 minTime - 仍未解决。也许它与模拟器有关......我会在找到方法后立即发布缺失的部分。

更新：似乎在真实设备上 minInterval 似乎会导致侦听器触发，无论坐标是否更改

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:45:45.410

请看[这个](https://stackoverflow.com/questions/4772686/location-managers-requestlocationupdates-called-only-once)。

当`LocationListener`实现为`anonymous class`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-18T12:47:28.337

我有类似的问题，当我使用

```
private LocationListener mLocationListener1 = new LocationListener() {
   @Override
       public void onLocationChanged(Location location) {
       }
} 
```

在我的课堂上，onLocationChanged 只被调用一次，但是在我添加“final”之后

```
private final LocationListener mLocationListener1 = new LocationListener() { 
```

问题已经解决了。（在我的情况下，由前台服务使用）

看起来
如果变量没有用 final 关键字定义，在它被调用一次之后，它将被垃圾收集并且不会再次被调用......

# xml - XML中的递归元素

> ID：12597683
> 
> 赞同：2
> 
> 时间：2012-09-26T08:34:44.550
> 
> 标签：xml, xsd

我正在尝试在 XML 模式中设计和实现**递归元素**，但我一般不太擅长使用 XML。关于如何设计它的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T13:38:54.817

下面的模型基于一种创作风格，其中元素声明是全局的，并且通过引用元素定义来实现递归。

```
<?xml version="1.0" encoding="utf-8" ?>
<!--XML Schema generated by QTAssistant/XML Schema Refactoring (XSR) Module (http://www.paschidev.com)-->
<xsd:schema targetNamespace="http://tempuri.org/XMLSchema.xsd" elementFormDefault="qualified" xmlns="http://tempuri.org/XMLSchema.xsd" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <xsd:element name="recursive">
        <xsd:complexType>
            <xsd:sequence>
                <xsd:element ref="recursive" minOccurs="0"/>
            </xsd:sequence>
        </xsd:complexType>
    </xsd:element>
</xsd:schema> 
```

或者，您可以通过重新使用类型来实现相同的目的：

```
<?xml version="1.0" encoding="utf-8" ?>
<!--XML Schema generated by QTAssistant/XML Schema Refactoring (XSR) Module (http://www.paschidev.com)-->
<xsd:schema targetNamespace="http://tempuri.org/XMLSchema.xsd" elementFormDefault="qualified" xmlns="http://tempuri.org/XMLSchema.xsd" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <xsd:element name="recursive" type="Trecursive"/>
    <xsd:complexType name="Trecursive">
        <xsd:sequence>
            <xsd:element name="recursive" type="Trecursive" minOccurs="0"/>
        </xsd:sequence>
    </xsd:complexType>
</xsd:schema> 
```

或者您可以介于两者之间：

```
<?xml version="1.0" encoding="utf-8" ?>
<!--XML Schema generated by QTAssistant/XML Schema Refactoring (XSR) Module (http://www.paschidev.com)-->
<xsd:schema targetNamespace="http://tempuri.org/XMLSchema.xsd" elementFormDefault="qualified" xmlns="http://tempuri.org/XMLSchema.xsd" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <xsd:element name="recursive" type="Trecursive"/>
    <xsd:complexType name="Trecursive">
        <xsd:sequence>
            <xsd:element ref="recursive" minOccurs="0"/>
        </xsd:sequence>
    </xsd:complexType>
</xsd:schema> 
```

有效的示例 XML：

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<!-- Sample XML generated by QTAssistant (http://www.paschidev.com) -->
<recursive xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://tempuri.org/XMLSchema.xsd">
    <recursive>
        <recursive/>
    </recursive>
</recursive> 
```

# r - Ubuntu下的xlsx包无法设置值

> ID：12597685
> 
> 赞同：4
> 
> 时间：2012-09-26T08:34:53.677
> 
> 标签：r, ubuntu-12.04, xlsx, rjava

我正在运行以下脚本

```
library(xlsx);
wb <- loadWorkbook("/home/.../MyFile.xlsx") #works fine
sh <- getSheets(wb) #works fine
rw <- getRows(sh[[1]]) #-works fine
rc <- getCells(rw) # works fine
v <- lapply(rc, getCellValue) # works fine
v['21.4'] #works fine, returns the correct value
setCellValue(rc['21.4'], 'Hallo') #fails

Error in .jcall(cell, "V", "setCellValue", value) : 
  java.lang.ClassNotFoundException 
```

重复命令后

```
Error in .jcall(cell, "V", "setCellValue", value) : 
  RcallMethod: cannot determine object class 
```

它发生在 RStudio 和 Ubuntu 12.04 32Bit 下的经典 R 终端中。请帮忙！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-28T16:57:14.550

我在 Windows 7 x64 中遇到了同样的问题，我认为“xlsx”文档中存在错误。然而，而不是

```
setCellValue(rc['21.4'], 'Hallo') 
```

尝试

```
setCellValue(rc[['21.4']], 'Hallo') 
```

为我工作。库巴

# node.js - 通过node js实时视频编码？

> ID：12597686
> 
> 赞同：3
> 
> 时间：2012-09-26T08:35:00.087
> 
> 标签：node.js, video, ffmpeg

有人知道使用 ffmpeg 在节点中实时编码视频吗？我知道 transloadit 在这方面做得很好。任何想法 ？

[https://transloadit.com/blog/2010/12/realtime-encoding-over-150x-faster](https://transloadit.com/blog/2010/12/realtime-encoding-over-150x-faster)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-10-25T15:20:20.627

[Transloadit](https://transloadit.com)的联合创始人在这里 :) 我们使用管道。Node.js 允许我们看到仍在上传的数据（我们使用了[node-formidable](https://www.npmjs.com/package/formidable)模块）。FFmpeg 允许使用标准输入通过`ffmpeg -i -`. 因此，您可以将上传的字节通过管道传输到生成的 child_process 的标准输入中，就是这样:)

题外话，我们后来弃用了该功能。事实证明，市场对它的兴趣没有我们想象的那么大，而且令人遗憾的是，它引入了足够多的运营难题，以至于我们告别了这个我们心爱的功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-28T08:37:52.397

使用流畅的 FFMpeg。一个可以即时转码的巨大模块：

[https://github.com/schaermu/node-fluent-ffmpeg](https://github.com/schaermu/node-fluent-ffmpeg)

# html - 如何用 HTML5 画布将一个圆圈分成三个相等的部分？

> ID：12597696
> 
> 赞同：2
> 
> 时间：2012-09-26T08:35:44.130
> 
> 标签：html, math, canvas, geometry, 2d-context-api

![在此处输入图像描述](../Images/30ce6393d0c1e20f00f13c70f806b27a.png)

如何使用 HTML5 canvas 2D context API 将一个圆圈分成三个相等的部分，如上图？

我正在尝试[这个](http://jsfiddle.net/mithun/V8xms/)

有人可以提出更好的方法吗？可能用百分比（或度数）而不是硬编码坐标？

```
var can = document.getElementById('mycanvas');
var ctx = can.getContext('2d');

ctx.fillStyle = "#BD1981";
ctx.beginPath();
ctx.arc(200, 200, 150, 0, Math.PI*2, true);
ctx.closePath();
ctx.fill();

ctx.strokeStyle = "#FFC8B2";
ctx.lineWidth = "2";
ctx.beginPath();
ctx.moveTo(200, 200);
ctx.lineTo(100, 100);
ctx.closePath();
ctx.stroke();

ctx.beginPath();
ctx.moveTo(200, 200);
ctx.lineTo(350, 200);
ctx.closePath();
ctx.stroke();

ctx.beginPath();
ctx.moveTo(200, 200);
ctx.lineTo(100, 300);
ctx.closePath();
ctx.stroke(); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-26T09:02:35.120

[这是一个函数（演示）](http://jsfiddle.net/eLdCA/3/)，它允许您指定起点、长度和角度（以度为单位）：

```
var drawAngledLine = function(x, y, length, angle) {
    var radians = angle / 180 * Math.PI;
    var endX = x + length * Math.cos(radians);
    var endY = y - length * Math.sin(radians);

    ctx.beginPath();
    ctx.moveTo(x, y)
    ctx.lineTo(endX, endY);
    ctx.closePath();
    ctx.stroke();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-16T19:28:14.357

把它们放在一起（使用@phant0m's `drawAngledLine`）：

```
var c = document.getElementById("canvas");
var ctx = c.getContext("2d");
var RADIUS = 70;

function drawCircle(x, y, r) {
    ctx.beginPath();
    ctx.arc(x, y, r, 0, 2 * Math.PI);
    ctx.stroke();
}

function drawAngledLine(x, y, length, angle) {
    var radians = angle / 180 * Math.PI;
    var endX = x + length * Math.cos(radians);
    var endY = y - length * Math.sin(radians);
    ctx.beginPath();
    ctx.moveTo(x, y)
    ctx.lineTo(endX, endY);
    ctx.closePath();
    ctx.stroke();
}

drawCircle(140, 140, RADIUS);
drawAngledLine(140, 140, RADIUS, 1 * (360 / 3));
drawAngledLine(140, 140, RADIUS, 2 * (360 / 3));
drawAngledLine(140, 140, RADIUS, 3 * (360 / 3)); 
```

演示在这里：

*   [http://jsfiddle.net/My8eX/](http://jsfiddle.net/My8eX/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-11T16:54:26.317

我知道你可能得到了你的答案，但我发现韦恩的 jsfiddle 很有帮助，所以我添加了我的贡献，它可以让你设置你想要将圆圈分成的自定义数量的部分。

[http://jsfiddle.net/yorksea/3ef0y22c/2/](http://jsfiddle.net/yorksea/3ef0y22c/2/)

（也使用@phant0m 的drawAngledLine）

```
var c = document.getElementById("canvas");
var ctx = c.getContext("2d");
var RADIUS = 300;
var num_sections = 19; //set this for number of divisions

function drawCircle(x, y, r) {
  ctx.beginPath();
  ctx.arc(x, y, r, 0, 2 * Math.PI);
  ctx.stroke();
}

function drawAngledLine(x, y, length, angle) {
  var radians = angle / 180 * Math.PI;
  var endX = x + length * Math.cos(radians);
  var endY = y - length * Math.sin(radians);
  ctx.beginPath();
  ctx.moveTo(x, y)
  ctx.lineTo(endX, endY);
  ctx.closePath();
  ctx.stroke();
}

//draw circle outline
drawCircle(320, 320, RADIUS);

//loop the number of sections to draw each
for (i = 1; i <= num_sections; i++) {
  drawAngledLine(320, 320, RADIUS, i * (360 / num_sections));
}
```

```
<canvas id="canvas" width="650" height="650"></canvas>
```

# lucene - tis 文件中的 Lucene 术语查询

> ID：12597697
> 
> 赞同：1
> 
> 时间：2012-09-26T08:35:45.887
> 
> 标签：lucene

你知道lucene首先查询tii中的术语然后指向tis，我的问题是lucene如何过滤字段。例如：tis文件有100万个词，99.9万个词属于内容字段，另外1000个属于标题字段。因此，如果我查询标题：城市，那么 Lucene 将搜索术语城市不可区分字段？即首先搜索两个字段术语（内容和标题），然后删除内容字段。或者有两个 tis 文件，一个用于内容字段，另一个用于标题字段。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:10:01.377

单独的字段值对 Lucene 没有意义。术语由一个值（“城市”）**和**一个字段名称（“标题”、“内容”……）组成。

如果您搜索“title:city”，Lucene 将只搜索字段名称“title”的“city”值。

# node.js - 使用 __proto__ 混合 EventEmitter 方法

> ID：12597699
> 
> 赞同：4
> 
> 时间：2012-09-26T08:35:50.627
> 
> 标签：node.js, events, eventemitter

给定一个任意对象，我想让它成为一个 EventEmitter：

```
var obj = {}
// mixin eventemitter
obj.on('event', ...)
obj.emit('event') 
```

此外，当我输入 obj 时，我不希望它将 EventEmitter 方法显示为方法。通过 CLI：

```
> obj
{} 
```

因此，现在我正在做：

```
function mixinEventEmitter(obj) {
  obj.__proto__ = EventEmitter.prototype
  return obj
} 
```

但是人们说 using`__proto__`是一种反模式：[Node.js - 从 EventEmitter 继承](https://stackoverflow.com/questions/8898399/node-js-inheriting-from-eventemitter)

我做得对吗？你有更好的方法吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T13:03:19.843

执行此操作的常用方法是使用[util.inherits](http://nodejs.org/api/util.html#util_util_inherits_constructor_superconstructor)（链接文档包含一个几乎正是您想要的示例）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-18T20:19:14.960

问题`__proto__`不在于您使用的是原型而不是构造函数。问题是使用原型的方法是错误的。但是你不想要原型。你想要一个mixin。Using`__proto__`是一种避免创建 mixin 工作的技巧。如果你想要一个 mixin，你必须手动完成，没有原型。

```
var EventEmitter = require("events").EventEmitter,
    obj = {};

function emitter(obj) {
    // copy EventEmitter prototype to obj, but make properties
    // non-enumerable
    for (var prop in EventEmitter.prototype) {
        Object.defineProperty(obj, prop, {
            configurable: true,
            writable: true,
            value: EventEmitter.prototype[prop]
        });
    }

    // also, make sure the following properties are hidden
    // before the constructor adds them
    ["domain", "_events", "_maxListeners"].forEach(function(prop) {
        Object.defineProperty(obj, prop, {
            configurable: true,
            writable: true,
            value: undefined
        });
    });

    // call EventEmitter constructor on obj
    EventEmitter.call(obj);

    // return the obj, which should now function as EventEmitter
    return obj;
}

emitter(obj);
obj.on("event", console.log.bind(console));
obj.emit("event", "foo"); 
```

# actionscript-3 - AS3 SharedObject，唯一变量？

> ID：12597705
> 
> 赞同：0
> 
> 时间：2012-09-26T08:36:10.113
> 
> 标签：actionscript-3

我正在玩 AS3 并尝试制作一个简单的笔记应用程序。

所以我想我会用它来存储笔记，`SharedObject`所以有可能以某种方式`so.data.myVariable`动态地说出和获取/创建该共享对象吗？

我用谷歌搜索但没有找到任何东西？

编辑：我的解决方案！

经过几个小时的思考，我设法解决了它！

在 Main.as 创建对象时。

```
addChild(Obj)
Obj.setUniqueID(SomeID); 
```

在我的类中将包含 sharedObject。（对象.as）

```
public function setUniqueID(uniqueID:String):void
{
   soData = SharedObject.getLocal(uniqueID);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T13:27:33.287

我认为实际上可能 SharedObject.data 是动态类的对象，因此我们可以创建属性。请遵循以下代码。

```
public var sharedObj:SharedObject;

        private function initSharedObject():void{
            sharedObj = SharedObject.getLocal("myNotes");
        }

        private function clearAllNotes():void 
        {
            sharedObj.clear();
        }

        private function saveNote(variableName:String,valueToSave:*/* need to specify your type */):void
        {
            sharedObj.data[variableName] = valueToSave;
            sharedObj.flush();
        }

        private function getNote(variableName:String):* /* need to specify your type */
        {
            return sharedObj.data[variableName];
        } 
```

更多详细信息[http://learn.adobe.com/wiki/display/Flex/Shared+Objects](http://learn.adobe.com/wiki/display/Flex/Shared+Objects) [http://livedocs.adobe.com/flex/3/html/help.html?content=lsos_2.html](http://livedocs.adobe.com/flex/3/html/help.html?content=lsos_2.html)

# iphone - 如何将所有图像格式转换为 .png 格式？

> ID：12597710
> 
> 赞同：2
> 
> 时间：2012-09-26T08:36:32.583
> 
> 标签：iphone, objective-c, ios, uiimage, image-formats

我正在制作一个小型应用程序，我在其中接收来自网络服务的图像。我正在获取图片网址。并且图像的格式不同，例如 .jpg、.gif、.png 等。我想将这些图像保存到我的沙箱中，然后再将其显示到图像视图中。

为此，我给出了一个自我名称并将扩展名指定为 .png。但是在检索 .png 图像时，会显示不同的图像，但不会显示不同的图像。那么你能告诉我如何将所有图像转换为 .png 格式或任何其他方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T08:39:37.760

检索图像/网址后，以这种方式保存它们：

```
NSData *imageData = UIImagePNGRepresentation(image);
[imageData writeToFile:savedImagePath atomically:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:43:19.350

如果您使用像 SDWebImage 这样的图像库来处理所有异步图像下载和图像缓存到您的设备上，这不是更容易吗？

[https://github.com/rs/SDWebImage](https://github.com/rs/SDWebImage)

然后您可以执行以下操作：

```
[myImageView setImageWithURL:[NSURL URLWithString:@"http://www.domain.com/path/to/image.jpg"]
                   placeholderImage:[UIImage imageNamed:@"placeholder.png"]]; 
```

# xamarin.ios - Monotouch / iPhone 5 和开发中

> ID：12597716
> 
> 赞同：3
> 
> 时间：2012-09-26T08:37:02.000
> 
> 标签：xamarin.ios, ios6, iphone-5

我正在尝试编写一个希望与 iPhone 5 和 4 兼容的应用程序。我已阅读出色的文章[让您的 MonoTouch 应用程序为 iPhone 5 / iOS 6 做好准备！](http://redth.info/get-your-monotouch-apps-ready-for-iphone-5-ios-6-today/ "立即为 iPhone 5 / iOS 6 准备好 MonoTouch 应用程序！")但这意味着您必须向每个 UIViewController 添加一个 UIImage 以强制它以新的分辨率显示。这也意味着我必须为我添加的每个 UIViewController 执行此操作。

我明显的问题是如果我不想要背景图片会发生什么？如果我只想要一个使用整个屏幕的标准 UITableVIew 怎么办？如果我想支持这两种分辨率会发生什么，我不能只将图像放入目录中。你怎么处理？这真的是 Apple 设计的方式吗？您需要加载空白图像吗？

我错过了一些非常明显的事情吗？希望如此。

谢谢

麦克风

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T12:36:43.747

要让*高*屏幕在您的应用程序上运行（对于 iPhone 5 或 iOS6 模拟器），您**只**需要在应用程序中有一个*大小* `Default-568h@2x.png`合适的文件。

您链接到的文章更详细地讨论了如何处理背景 - 但这是**可选**的，即只有在您拥有（或想要）您的观点的背景时才需要它。

# zend-framework - 如何解决 Android GCM 401 错误？

> ID：12597718
> 
> 赞同：2
> 
> 时间：2012-09-26T08:37:05.467
> 
> 标签：zend-framework, google-cloud-messaging

在 Google Code APIs 控制台上设置了一个项目，并在“服务器应用程序的密钥（具有 IP 锁定）”处有一个服务器密钥。我正在尝试使用“API 密钥”和存储在数据库中的一个注册 ID 向 GCM 设备发送推送通知。

对于服务器端，我正在使用 Zend_Mobile_Push_Gcm 并且有这样的东西：

```
$token = 'REGISTRATION ID';
$apiKey = 'API KEY';

//Send test push
$message = new Zend_Mobile_Push_Message_Gcm();
$message->setId(time());
$message->addToken($token);
$message->setData(array('foo' => 'bar', 'bar'=>'foo'));

$gcm = new Zend_Mobile_Push_Gcm();
$gcm->setApiKey($apiKey);

try {
    $response = $gcm->send($message);
} catch (Zend_Mobile_Push_Exception $e) {
    die($e->getMessage());
} 
```

在应用程序方面，我使用了 GCM 演示，目前正在服务器服务上注册它的注册 ID。

我无法发送推送，总是收到 401 错误。已完成故障排除并在[http://developer.android.com/guide/google/gcm/gcm.html#auth_error](http://developer.android.com/guide/google/gcm/gcm.html#auth_error)上使用 CLI 测试行尝试了我的 API KEY 和注册 ID，但没有成功。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-04T10:57:26.830

我意识到这是不久前发布的，但请务必使用您的服务器 API 密钥，而不是您的 android API 密钥。

尝试将 PHP 中的 Android API 密钥与 Zend 一起使用时，我遇到了同样的问题。

# node.js - 上限集合上的慢尾光标

> ID：12597722
> 
> 赞同：2
> 
> 时间：2012-09-26T08:37:21.923
> 
> 标签：node.js, mongodb, publish-subscribe

我正在使用[MubSub](https://github.com/scttnlsn/mubsub)允许用户订阅某个查询并在它们可用时立即获得推送更新。该库使用上限集合来获取可尾游标。我遇到的问题是，当我只有一个可尾光标时，一切都很好。获取光标大约需要几毫秒。但随着我添加更多订阅（从而打开更多游标），接收游标有时可能需要长达 8 秒。我试过添加索引，但这根本没有帮助。

以下是我收藏的统计数据：

```
{
        "ns" : "mDB.myCollection",
        "count" : 395669,
        "size" : 325551880,
        "avgObjSize" : 822.7884418541761,
        "storageSize" : 1000001536,
        "numExtents" : 1,
        "nindexes" : 3,
        "lastExtentSize" : 1000001536,
        "paddingFactor" : 1,
        "flags" : 1,
        "totalIndexSize" : 81678240,
        "indexSizes" : {
                "subscriptionIndex" : 32704000,
                "_id_" : 11593568,
                "subscriptionQueryAsc" : 37380672
        },
        "capped" : 1,
        "max" : 2147483647,
        "ok" : 1
} 
```

这是一段执行时间过长的代码：

```
this.collection.then(handle(true, function(collection) {
    var latest = null;
    // The next statement takes a few ms for the first cursor, 
    // then 5+ seconds for more cursors
    collection.find({}).sort({ $natural: -1 }).limit(1).nextObject(handle(function(doc) {
        if (doc) latest = doc._id;

        (function poll() {
            if (latest) query._id = { $gt: latest };

            var options = { tailable: true, awaitdata: true, numberOfRetries: -1 };
            var cursor = collection.find(query, options).sort({ $natural: 1 });

            (function more() {
                cursor.nextObject(handle(function(doc) {
                    if (!doc) return setTimeout(poll, self.wait);

                    callback(doc);
                    latest = doc._id;
                    more();
                }));
            })();
        })();
    }));
})); 
```

这是一个已知问题，还是我只是做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T19:44:51.367

我通过删除上面粘贴的代码中的以下行来解决此问题：

```
collection.find({}).sort({ $natural: -1 }).limit(1).nextObject(handle(function(doc) { 
```

该特定语句使代码非常慢，可能是因为它正在获取所有 ({}) 文档，并且游标的数量以某种方式减慢了进程。我做了这样的事情：

```
this.collection.then(handle(true, function(collection) {
    var latest = null;
    if (doc) latest = doc._id;

    (function poll() {
        if (latest) query._id = { $gt: latest };

        var options = { tailable: true, awaitdata: true, numberOfRetries: -1 };
        var cursor = collection.find(query, options).sort({ $natural: 1 });

        (function more() {
            cursor.nextObject(handle(function(doc) {
                if (!doc) return setTimeout(poll, self.wait);

                callback(doc);
                latest = doc._id;
                more();
            }));
        })();
    })();
})); 
```

我不完全理解为什么 MubSub 的作者会这样做，因为最后一个文档的 _id 是什么并不重要。这是因为文档被插入到一个有上限的集合中，该集合保留了插入顺序。

# java - java.rmi.ServerException：服务器线程发生RemoteException；ClassNotFoundException

> ID：12597723
> 
> 赞同：2
> 
> 时间：2012-09-26T08:37:22.097
> 
> 标签：java, rmi

当我通过 eclipse 运行我的服务器代码时，我得到了以下异常：

```
java.rmi.ServerException: RemoteException occurred in server thread; nested exception is: 
    java.rmi.UnmarshalException: error unmarshalling arguments; nested exception is: 
    java.lang.ClassNotFoundException: com.RMIInterface
    at sun.rmi.server.UnicastServerRef.oldDispatch(UnicastServerRef.java:413)
    at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:267)
    at sun.rmi.transport.Transport$1.run(Transport.java:177) 
```

我只需在 cmd 行中键入“start rmiregistry”即可启动 RMI 注册表。一个新窗口打开，标题为“c:\Program Files\Java\jdk1.7.0\bin\rmiregistry.exe”。在这条路上，只有我有 JDK。

此路径中可用的所有 .class 文件：D:\Workspace\Study\bin\com。

在 com 文件夹下，我拥有所有三个文件“RMIInterface、RMIServer、RMIClient”。

当我从 Eclipse 运行服务器代码时，我得到了上面提到的异常。（即）找不到 RMIInterface。但我在同一个文件夹中。

我还应该做什么来运行服务器？

这是我的服务器代码：

```
RMIServer serRef = new RMIServer();
try {
    RMIInterface inref = (RMIInterface)UnicastRemoteObject.exportObject(serRef, 0);
    Registry reg = LocateRegistry.getRegistry();
    reg.bind("ServerObj", inref); -------->Exception in this line
} catch (AlreadyBoundException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-03T13:37:56.670

```
Remote Server Error:RemoteException occurred in server thread; nested exception is:
java.rmi.UnmarshalException: error unmarshalling arguments; nested exception is:
java.lang.ClassNotFoundException: mathInterface 
```

该错误非常简单，只需执行以下步骤即可解决：

*   例如你的java文件考虑D盘
*   启动 rmiregistry D 驱动器（例如 D:\start rmiregistry）然后不要在其他驱动器上启动 rmiregistry，它会产生上述错误

（无论您的文件在哪里，开始`rmiregistry`）

参考：[java.rmi.ServerException：RemoteException发生在服务器线程（ClassNotFoundException）](https://stackoverflow.com/questions/9531158/java-rmi-serverexception-remoteexception-occurred-in-server-thread)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T09:02:07.917

我认为问题在于您访问界面的方式。

如你所说，`Under the com folder I have all three files "RMIInterface, RMIServer,RMIClient".`

如果您确实将所有文件都放在同一个包/文件夹中，那么您为什么要写`com.RMIInterface`

应该只是`RMIInterface`因为您提到的方式会搜索`com`当前包中调用的另一个`com`包。

我希望你明白我的意思。

**编辑**

在运行 RMI 程序时，我们确实需要运行 rmiregistry。

您应该在启动服务器程序`rmiregistry` **之前运行。**

尝试从 Windows 中的控制台或 CMD 运行它。

尝试`rmiregistry`或`start rmiregistry`在 CMD 中。从 CMD 运行时，我们确实需要从我们运行的相同文件夹/包启动 rmiregistry，`javac`并且`java`. 如果是 Eclipse，我猜你应该尝试从你的 com 文件夹运行 rmiregistry。

**更新**

我认为直到现在您都在尝试从 com 文件夹中启动 rmiregistry。只需尝试从您的 com 文件夹中启动它。

尽管 `D:\Workspace\Study\bin\com>start rmiregistry`

尝试

`D:\Workspace\Study\bin\start rmiregistry`

# ruby-on-rails-3 - Ruby on Rails 中的开源 CRM/ERP 系统

> ID：12597728
> 
> 赞同：0
> 
> 时间：2012-09-26T08:37:43.517
> 
> 标签：ruby-on-rails-3, open-source, crm, erp

你知道一些像[xlsuite.org](http://xlsuite.org)这样的开源 CRM/ERP 系统吗？XLSUITE 对我和我的服务器来说已经很老了。我需要开源系统，因为我可以为我的工作定制它，而且我知道 RoR。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T08:40:35.327

我想到的一个例子是： http: [//www.fatfreecrm.com/](http://www.fatfreecrm.com/)

# python - python while循环等待条件更改或超时

> ID：12597732
> 
> 赞同：1
> 
> 时间：2012-09-26T08:37:55.003
> 
> 标签：python, timeout, while-loop

我想在python中构建一个while循环，等待某个条件（函数`foo`）改变，或者在某个指定时间后给出超时。这是我将如何编码

```
def wait_change():
  import time
  timeout = 10 # time out of 10 seconds for example

  # set initial time and initial variables
  start_time = time.time()
  current_time = 0
  start_state = foo()
  current_state = start_state

  while current_time<timeout and start_state==current_state:
    current_time = time.time()-start_time
    current_state = foo()

 if current_time<timeout:
   return None
 else:
   return current_state 
```

此功能运行良好，但我不确定这是否是最佳方式。重要的是我想检查一些状态并返回它，并在超时的情况下通知调用函数（这里返回`None`）。这是最好的实现，还是有更pythonic的方法来处理这个？特别是我担心

*   对函数进行两次调用`foo`
*   如果返回值是适当的（即凋谢返回值或`None`）
*   如果使用`signal`or`threading`可能更有用导致更好的代码

谢谢，亚历克斯

# tooltwist - Tooltwist 设计器同步错误

> ID：12597735
> 
> 赞同：1
> 
> 时间：2012-09-26T08:37:56.770
> 
> 标签：tooltwist

我得到以下错误

错误 GitRepository - getSyncList() 中的错误：exit-status=1 stderr=/usr/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require': no such file to load -- xmlsimple (LoadError) from /usr/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in`require' from /home/widgetti/server/extension-projects/ ttWbd/config/bin/syncWithGit.rb:5

在我们的一位设计师中进行同步时，会出现什么错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T08:43:32.803

这个问题是因为尚未安装名为 xml-simple 的 Ruby gem。在 Linux 机器上，Designer 需要执行以下 Ruby 安装步骤才能工作。

```
yum install ruby  
yum install rubygems 
gem update  
gem update --system   
gem install xml-simple
gem install mail 
```

# wpf - 隐藏 datgrid 自动添加的列

> ID：12597738
> 
> 赞同：0
> 
> 时间：2012-09-26T08:38:06.320
> 
> 标签：wpf, xaml, wpfdatagrid

xaml datagrid 下面给了我两个额外的列，在 Image 列之前和 price 列之后。我怎样才能禁用它？

```
<DataGrid Name="dgProductList" AutoGenerateColumns="False" FontSize="18" 
                                  ScrollViewer.CanContentScroll="False"      
                                  ScrollViewer.VerticalScrollBarVisibility="Auto" 
                                  ScrollViewer.HorizontalScrollBarVisibility="Auto">
                            <DataGrid.Columns>
                                <DataGridTemplateColumn Header="Image">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <Image Height="10" Width="10" Source="{Binding Picture}" Stretch="Uniform"></Image>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                                <DataGridTextColumn Binding="{Binding Name}" Header="Item" />
                                <DataGridTextColumn Header="Qty" />
                                <DataGridTextColumn Binding="{Binding Price}" Header="Price" />
                            </DataGrid.Columns>
                        </DataGrid> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T09:05:46.200

在 DataGrid 中添加 itemssource 绑定：

```
<DataGrid Name="dgProductList" AutoGenerateColumns="False" FontSize="18"
                              ScrollViewer.CanContentScroll="False"
                              ScrollViewer.VerticalScrollBarVisibility="Auto"
                              ScrollViewer.HorizontalScrollBarVisibility="Auto"
          ItemsSource="{Binding Products}" MouseDoubleClick="dgProductList_MouseDoubleClick"> 
```

代码隐藏：

```
public class Product : NotificationObject
{
    public string Name { get; set; }
}

public IList<Product> Products { get; set; }

public MainWindow()
{
    Products = new ObservableCollection<Product>
    {
        new Product {Name = "test1"},
        new Product {Name = "test2"},
    };

    DataContext = this;

    InitializeComponent();
}

private void dgProductList_MouseDoubleClick(object sender, MouseButtonEventArgs e)
{
    Products.Add(new Product { Name = "test x" });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T08:42:26.630

如果我只是复制并粘贴您的 xaml，则没有额外的列。也许在创建列的代码隐藏文件中有一些代码？

# c# - 为什么自定义十进制格式化程序在视图中显示而不是逗号

> ID：12597742
> 
> 赞同：0
> 
> 时间：2012-09-26T08:38:22.750
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我正在尝试编写一个可以在我的视图中使用的十进制格式化程序扩展。由于某种或其他原因，我没有得到所需的结果。

我最初的扩展是这样的：

```
public static string FormatCurrency(this decimal instance)
{
     return string.Format("{0:c}", instance);
} 
```

我发现并非我们所有的服务器都配置为南非，有些仍然默认为美国。所以货币符号不会总是正确显示。

我不关心货币符号，如果它不显示也没关系。我将格式化程序更改为如下所示：

```
public static string FormatCurrency(this decimal instance)
{
     return string.Format("{0:0.00}", instance);
} 
```

我所需要的只是如果我的值为 100000000，那么它需要显示为 100, 000, 000.00，如果我有 10000，那么它需要显示为 10, 000.00。目前它显示为 10 000.00。当我查看 HTML 时，它看起来像这样：

```
<td>10&#160;000.00</td> 
```

在我看来，我这样使用它：

```
@(Model.SpouseGrossSalary == null ? "N/A" : ((decimal)Model.SpouseGrossSalary).FormatCurrency()) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T08:57:56.037

您可以指定所需的格式：

```
public static class DecimalExtensions
{
    public static string FormatCurrency(this decimal instance)
    {
        var format = new NumberFormatInfo
        {
            NumberGroupSeparator = ",",
            NumberDecimalDigits = 2,
            NumberDecimalSeparator = "."
        };
        return string.Format(format, "{0:N}", instance);
    }
} 
```

或使用货币：

```
public static class DecimalExtensions
{
    public static string FormatCurrency(this decimal instance)
    {
        var format = new NumberFormatInfo
        {
            CurrencyGroupSeparator = ",",
            CurrencyDecimalDigits = 2,
            CurrencyDecimalSeparator = ".",
            CurrencySymbol = "R"
        };
        return string.Format(format, "{0:C}", instance);
    }
} 
```

就`&#160;`符号而言，这是因为该值是 HTML 编码的，它应该是这样的。它将在浏览器中正确显示。

# xml - XSL - 根据属性将 XML 元素转换为 HTML

> ID：12597745
> 
> 赞同：1
> 
> 时间：2012-09-26T08:38:30.063
> 
> 标签：xml, xslt

也许有人有类似的问题。我需要使用 XSL 转换输入 XML 文件：

```
<decision>
    <akapit nr = 1>
           This is <b>important</b> decision for the query number <i>0123456</i>
    </akapit>
</decision> 
```

作为输出，我需要一个 html 文档，它将元素中的文本显示`<b></b>`为粗体，元素显示`<i></i>`为斜体......等等。所以，基本上我需要`<akapit>`根据子元素的名称来格式化来自 XML 元素的输出 HTML。知道在这种情况下如何使用 XSL 模板吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T09:28:04.107

解决此类问题的基本方法是

```
<xsl:template match="akapit">
  <div>
   <xsl:copy-of select="node()"/>
  </div>
</xsl:template> 
```

只要 XML 输入使用与 HTML 使用的相同元素（例如粗体或斜体），这就足够了。

如果输入 XML 中有其他元素，例如

```
<decision>
    <akapit nr = 1>
           This is <bold>important</bold> decision for the query number <i>0123456</i>
    </akapit>
</decision> 
```

那么你需要转换东西，例如

```
<xsl:template match="akapit">
  <div>
    <xsl:apply-templates/>
  </div>
</xsl:template>

<xsl:template match="akapit//*">
  <xsl:copy>
    <xsl:apply-templates/>
  </xsl:copy>
</xsl:template>

<xsl:template match="akapit//bold">
  <b>
    <xsl:apply-templates/>
  </b>
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T12:51:12.860

**In case the markup elements names aren't the same as the corresponding Html element names, for example:**

```
<decision>
    <akapit nr="1">
    This is 
        <bold>important</bold> decision for the query number
        <italic>0123456</italic>
    </akapit>
</decision> 
```

**Then a very simple application of the [*identity rule*](http://dpawson.co.uk/xsl/sect2/identity.html) is this**:

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="akapit">
  <div><xsl:apply-templates/></div>
 </xsl:template>

 <xsl:template match="bold"><b><xsl:apply-templates/></b></xsl:template>
 <xsl:template match="italic"><i><xsl:apply-templates/></i></xsl:template>

 <xsl:template match="/*"><xsl:apply-templates/></xsl:template>
</xsl:stylesheet> 
```

**And when this transformation is applied on the above XML document, the wanted, correct result is produced**:

```
<div>
    This is 
        <b>important</b> decision for the query number
        <i>0123456</i>
</div> 
```

**Do Note**: Using `xsl:apply-templates` should be preferred to `xsl:copy-of` as the latter doesn't allow flexibility to further process the selected nodes -- it only copies them.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T09:33:44.277

如果我理解正确，您可以使用`copy-of`复制`akapit`元素下的所有内容。

```
<xsl:template match="/decision/akapit[@nr='1']">
    <xsl:copy-of select="child::node()"/>
</xsl:template> 
```

# php - PHP 旨在用作 css，但用作 MIME 类型 text/html

> ID：12597754
> 
> 赞同：2
> 
> 时间：2012-09-26T08:39:15.517
> 
> 标签：php, css, mime-types

我在网页上有一些表格。表单由 CMS 组件生成。表单的样式是通过 template_css.php 文件设置的，该文件有助于在给定表单变量的情况下进行动态样式设置。

在我的本地环境中，文件加载正常，css 按预期呈现。但在公共服务器中，css 未呈现，我从 Chrome 调试器收到以下警告：

资源解释为样式表，但使用 MIME 类型 text/html 传输：...文件路径

即使是 PHP 文件，我能做些什么来强制将此文件作为 CSS 读取？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T08:40:51.687

您想将标题设置为 text/css：

`<?php header("Content-type: text/css"); ?>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T08:43:29.620

我怀疑您的公共服务器正在为 php 文件指定 mime 类型。如果是 apache，请参阅[mod_mime](http://httpd.apache.org/docs/2.2/mod/mod_mime.html%20mod_mime)了解详情。

# iphone - ios 4、ios 5 和 ios6 的 Apple Push Notification 服务是否有任何变化？

> ID：12597756
> 
> 赞同：0
> 
> 时间：2012-09-26T08:39:26.313
> 
> 标签：iphone, ios, apple-push-notifications

嗨，我是 Apple 新手。

ios4、ios5 和 ios6 的推送通知实现之间是否有任何变化或差异。如果可能，请提供任何文档

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T12:34:34.593

执行上没有区别。

# jquery - superfish ie8 访问的菜单更改大小

> ID：12597760
> 
> 赞同：0
> 
> 时间：2012-09-26T08:39:48.207
> 
> 标签：jquery, joomla, superfish

我有一个网站[cmse.bemoore.com](http://cmse.bemoore.com)。如果在 IE8 中查看，当您单击 superfish 菜单时，大小会发生变化。这在我测试过的任何其他浏览器中都不会发生。我该如何解决？

谢谢

# magento - 如何用尽可能少的复制粘贴覆盖 Magento 模型类？

> ID：12597765
> 
> 赞同：1
> 
> 时间：2012-09-26T08:40:27.520
> 
> 标签：magento

我想在例如类中的单个方法中更改单行代码`Mage_Reports_Model_Resource_Product_Collection`。最简单的方法似乎是将整个类文件复制到`app/code/local/...`，但后来我已经*替换*了原始类，而不是*覆盖*了方法。

如何创建一个继承自 eg`Mage_Reports_Model_Resource_Product_Collection`并且只覆盖一个方法的新类？并且仍然告诉 Magento 使用我的新类而不是原来的类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T11:11:01.007

这是重写产品集合的工作代码：

```
<global>
    <models>
        <reports_resource>
            <rewrite>
                <product_collection>Company_ModelName_Model_Resource_Product_Collection</product_collection>
            </rewrite>
        </reports_resource>
    </models>
</global> 
```

它应该适用于`Mage::getResourceModel('reports/product_collection')`通话。

是的，我没有包括`<config>`标签，我认为你应该已经有`<global>`一个，所以我觉得没有必要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T10:04:17.043

从理论上讲，模型的重写将是......

```
<config>
    <global>
        <models>
            <reports>
                <rewrite>
                    <resource_product_collection>Namespace_Extension_Model_Resource_Product_Collection</resource_product_collection>
                </rewrite>
            </reports>
        </models>
    </global>
</config> 
```

不过，我从来没有亲自重写过资源模型，所以我不能发誓它会起作用。这在很大程度上取决于集合的加载方式。

# c# - 正则表达式行为奇怪.net

> ID：12597767
> 
> 赞同：0
> 
> 时间：2012-09-26T08:40:38.580
> 
> 标签：c#, asp.net, regex

我有一些代码可以读取 CSV 文件的每一行，如果该值与正确的值不匹配，它会将其添加到返回到用户屏幕的错误列表中。我遇到的问题是正则表达式本身。

```
protected void ReadData(string filePath, bool upload)
{
    StringBuilder sb = new StringBuilder();
    #region upload
    if (upload == true) // CSV file upload chosen
    {
        using (CsvReader csv = new CsvReader(new StreamReader(filePath), true)) // Cache CSV file to memory
        {
            int fieldCount = csv.FieldCount; // Total number of fields per row
            string[] headers = csv.GetFieldHeaders(); // Correct CSV headers stored in array 
            SortedList<int, string> errorList = new SortedList<int, string>(); // This list will contain error values
            bool errorFlag = false;
            int errorCount = 0;

            // Check if headers are correct first before reading data
            if (headers[0] != "first name" || headers[1] != "last name" || headers[2] != "job title" || headers[3] != "email address" || headers[4] != "telephone number" || headers[5] != "company" || headers[6] != "research manager" || headers[7] != "user card number")
            {
                sb.Append("Headers are incorrect");
            }

            else 
            {
                while (csv.ReadNextRecord())
                    try
                    {
                        //Check csv obj data for valid values
                        for (int i = 0; i < fieldCount; i++)
                        {
                            if (i == 0 || i == 1) // FirstName and LastName
                            {
                                if (Regex.IsMatch(csv[i].ToString(), "[a-zA-Z]", RegexOptions.IgnoreCase)) //REGEX letters only min of 5 char max of 20
                                {
                                    errorList.Add(errorCount, csv[i]);
                                    errorCount += 1;
                                    errorFlag = true;
                                    string text = csv[i].ToString();
                                }
                            }

                            else if (i == 5) // Company name
                            {
                                string text = csv[i];
                                text.Replace("&", "and");
                            }
                        } 

                        if (errorFlag == true)
                        {
                            sb.Append("<b>" + "Number of Error: " + errorCount + "</b>");
                            sb.Append("<ul>");
                            foreach (KeyValuePair<int, string> key in errorList)
                            {
                                sb.Append("<li>" + key.Value + "</li>");
                            }
                        }
                        else // All validation checks equaled to false. Create User
                        {

                            ORCLdap.CreateUserAccount(rootLDAPPath, svcUsername, svcPassword, csv[0], csv[1], csv[2], csv[3], csv[4], csv[5], csv[7]);
                            sb.Append("<b>New user data uploaded successfully</b>");
                        }

                    }// end of try

                    catch (Exception ex)
                    {
                        sb.Append(ex.ToString());
                    }

                    finally
                    {
                        lblMessage.Text = sb.ToString();
                        sb.Remove(0, sb.Length);

            }
        }
    }
    #endregion 
```

lblMessage.text 包含这个 html：

> 错误数：4
> 
> *   大卫1212
> *   史密斯
> *   尼克444
> *   高迪333

什么时候应该是 3 个错误，因为 smith 不包含数字。

有人对此有建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T08:50:51.547

您还有一个逻辑错误：

```
if (Regex.IsMatch(csv[i].ToString(), "[a-zA-Z]", RegexOptions.IgnoreCase)) //REGEX letters only min of 5 char max of 20 
```

应该

```
if (!Regex.IsMatch(csv[i].ToString(), "^[a-zA-Z]+$", RegexOptions.IgnoreCase)) //REGEX letters only min of 5 char max of 20 
```

因为只有名称中包含其他字符时才会出现错误`[a-zA-Z]`，对吗？

（如果你使用`RegexOptions.IgnoreCase`你不需要`[a-zA-Z]`，`[a-z]`会做）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:44:52.553

您需要在您的正则表达式中添加单词边界，或者以 '^' 开头并以 '$' 结尾，即 `^[a-zA-Z]+$`

[http://regexr.com?3298g](http://regexr.com?3298g)

您当前的正则表达式不正确，并且将匹配包含 az 或 AZ 的任何字符串，任何字母，在任何位置。

[http://regexr.com?3298j](http://regexr.com?3298j)

# php - 无法读写xlsx文件php

> ID：12597769
> 
> 赞同：-3
> 
> 时间：2012-09-26T08:40:38.643
> 
> 标签：php, phpexcel

这是我的代码，我想附上这个文件并发送它，这些值是excel文件中的数字变量，我用它们来绘制图表它根本不起作用，我的老板生我的气，帮助

让我再解释一下。我必须附上一个excel文件{其中包含4个测试结果数字并绘制图表}我已经完成了测试我有结果，我已经完成了附件发送但我无法制作文件。

```
require_once '../Classes/PHPExcel.php';

$fileType = 'Excel2007';
$fileName = 'Result.xlsx';

// Read the file
$objReader = PHPExcel_IOFactory::createReader($fileType);
$objPHPExcel = $objReader->load($fileName);

// Change the file
$objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, $fileType);

$objSheet = $objPHPExcel->setActiveSheetIndex(0);

 objSheet->getCell('A2')->setValue($SumY );
  objSheet->getCell('B2')->setValue($SumR );
 objSheet->getCell('C2')->setValue($SumB );
  objSheet->getCell('D2')->setValue($SumG );

// Write the file
$objWriter->save('Result.xlsx'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:09:59.927

告诉 PHPExcel 在读写时要包含图表

假设图表是在您的模板中定义的

```
require_once '../Classes/PHPExcel.php'; 

$fileType = 'Excel2007'; 
$fileName = 'Result.xlsx'; 

// Read the file (including chart template)
$objReader = PHPExcel_IOFactory::createReader($fileType); 
$objReader->setIncludeCharts(TRUE);
$objPHPExcel = $objReader->load($fileName); 

// Change the file 
$objSheet = $objPHPExcel->setActiveSheetIndex(0); 

$objSheet->getCell('A2')->setValue($SumY ); 
$objSheet->getCell('B2')->setValue($SumR ); 
$objSheet->getCell('C2')->setValue($SumB ); 
$objSheet->getCell('D2')->setValue($SumG ); 

// Write the file (including chart)
$objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, $fileType); 
$objWriter->setIncludeCharts(TRUE);
$objWriter->save('Result.xlsx'); 
```

如果您的模板中没有定义图表，那么您需要在代码中创建它

# eclipse - Google Plugin for Eclipse 4.2 安装后不显示

> ID：12597770
> 
> 赞同：1
> 
> 时间：2012-09-26T08:40:39.720
> 
> 标签：eclipse, gwt, plugins

我在 Mac OS X 10.5.8 上运行。

问题是在我完成安装 GPE 4.2 和 GWT SDK 2.4 插件后，“g”工具栏图标没有出现。当我转到“首选项”时，应该有一个谷歌标签，但也没有出现。

安装没有问题。如果我转到“安装新软件...”->“已安装...”，则会列出 GPE 4.2 和 GWT SDK 2.4。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T03:09:38.590

Mac 是 64 位的。需要安装 64 位版本的 Eclipse。

# c# - 具有许多值检查的对象 c#

> ID：12597772
> 
> 赞同：2
> 
> 时间：2012-09-26T08:40:45.760
> 
> 标签：c#, .net, object

我想看看您对检查新序列化对象值的有效方法的想法。

示例 我有一个已序列化为对象的 xml 文档，现在我想做值检查。我能想到的第一个也是最基本的想法是使用嵌套的 if 语句并检查每个属性，可以是从一个值检查它是否具有正确的 url 格式，到检查另一个属性值，它是一个日期，但使其在正确的范围等

所以我的问题是人们将如何检查对象中的所有值？类型检查并不重要，因为这已经被处理了，它更多地与值本身有关。它需要用于相当大的对象，这就是我不想使用嵌套 if 语句的原因。

编辑：

我想对给定对象中的所有属性实现完整的值验证。

我想检查它自己的值而不是它是否为空。如果我有，我想检查特定事物的值，一个具有许多属性的对象是字符串类型并命名为主页。

如果没有失败，我希望能够检查 URL 格式中的字符串是否正确。这只是同一对象中的一个示例，我可以检查日期是否在给定范围内，如果不是，我将返回 false 或某种形式的失败。

我正在使用 c# .net 4。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T09:27:08.180

尝试使用[Fluent Validation](http://fluentvalidation.codeplex.com/documentation?referringTitle=Home)，它是关注点分离并从您的对象中配置验证

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T09:04:16.030

我建议将 Automapper 与 ValueResolver 一起使用。您可以使用 autommaper 以一种非常优雅的方式将 XML 反序列化为对象，并使用 ValueResolver 检查您获得的值是否有效。

您可以使用基本 ValueResolver 检查 Null 或无效转换，以及一些 CustomResolver 检查您获得的值是否正确。它可能不是您正在寻找的东西，但我认为这是一种优雅的方式。

在这里查看：http: [//dannydouglass.com/2010/11/06/simplify-using-xml-data-with-automapper-and-linqtoxml](http://dannydouglass.com/2010/11/06/simplify-using-xml-data-with-automapper-and-linqtoxml)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T09:05:25.233

```
public class Validator<T>
{
    List<Func<T,bool>> _verifiers = new List<Func<T, bool>>();

    public void AddPropertyValidator(Func<T, bool> propValidator) 
    {
        _verifiers.Add(propValidator);
    }

    public bool IsValid(T objectToValidate)
    {
         try {
         return _verifiers.All(pv => pv(objectToValidate));
         } catch(Exception) {
            return false;
         }
    }
}

class ExampleObject {
     public string Name {get; set;}
     public int BirthYear { get;set;}
}

public static void Main(string[] args) 
{
    var validator = new Validator<ExampleObject>();
    validator.AddPropertyValidator(o => !string.IsNullOrEmpty(o.Name));
    validator.AddPropertyValidator(o => o.BirthYear > 1900 && o.BirthYear < DateTime.Now.Year );
    validator.AddPropertyValidator(o => o.Name.Length > 3);

    validator.Validate(new ExampleObject());
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T09:04:12.803

我假设您的问题是：如何有效地检查我的对象是否有效？

如果是这样，那么您的对象只是从某个文本源反序列化并不重要。**如果您的问题是在**反序列化时检查对象以在发现错误时快速停止反序列化，那是另一个问题，您应该更新您的问题。

当涉及到 C# 和管理工具时，通常不会讨论有效地验证对象。原因是不管你怎么做都很快。更常见的是讨论如何以易于阅读和易于维护的方式进行检查。

由于您的问题**是**关于效率的，因此这里有一些想法：

*   如果要检查大量对象并且性能至关重要，则可能需要将对象更改为数据数组，以便以一致的方式检查它们。例子：

不要让 MyObject[] MyObjects 其中 MyObject 有很多属性，而是分解每个属性并将它们放入这样的数组中：

```
int[] MyFirstProperties
float[] MySecondProperties 
```

这样，遍历列表并检查值的循环可以尽可能快，并且 CPU 缓存中不会有很多缓存未命中，因为您在内存中向前循环。请务必使用未实现为链表的常规数组或列表，因为这可能会产生大量缓存未命中。

*   如果您不想将对象分解为属性数组，似乎最高速度并不重要，但几乎是最高速度。然后，最好的办法是将对象保存在串行数组中并执行以下操作：

.

```
bool wasOk = true;
foreach (MyObject obj in MyObjects)
{
    if (obj.MyFirstProperty == someBadValue)
    {
        wasOk = false;
        break;
    }
    if (obj.MySecondProperty == someOtherBadValue)
    {
        wasOk = false;
        break;
    }
} 
```

这将检查所有对象的属性是否正常。我不确定你的情况到底是什么，但我认为你明白了。仅检查对象的属性时，速度已经很不错了。

如果您进行字符串比较，请确保在可能的情况下使用 x = y，而不是使用更复杂的字符串比较，因为 x = y 有一些快速退出，例如如果其中任何一个为空，则返回，如果内存地址是一样的，如果我没记错的话，字符串是相等的，还有一些更聪明的东西。对于任何阅读本文的 Java 人，**不要在 Java**中这样做！它有时会起作用，但并非总是如此。

如果我没有回答您的问题，您需要改进您的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T08:56:35.400

我不确定我是否理解你的问题的深度，但是，你不会做这样的事情吗？

```
public SomeClass
{
    private const string UrlValidatorRegex = "http://...

    private const DateTime MinValidSomeDate = ...
    private const DateTime MaxValidSomeDate = ...

    public string SomeUrl { get; set; }

    public DateTime SomeDate { get; set; }

    ...

    private ValidationResult ValidateProperties()
    {
        var urlValidator = new RegEx(urlValidatorRegex);
        if (!urlValidator.IsMatch(this.Someurl))
        {
            return new ValidationResult
                {
                    IsValid = false,
                    Message = "SomeUrl format invalid."
                };
        }

        if (this.SomeDate < MinValidSomeDate 
            || this.SomeDate > MinValidSomeDate)
        {
            return new ValidationResult
                {
                    IsValid = false,
                    Message = "SomeDate outside permitted bounds."
                };
        }

        ...
        // Check other fields and properties here, return false on failure.
        ...

        return new ValidationResult
                {
                    IsValid = true,
                };
    }

    ...

    private struct ValidationResult
    {
        public bool IsValid;
        public string Message;
    }
} 
```

确切的验证代码会根据您希望班级的工作方式而有所不同，不是吗？考虑一个熟悉类型的属性，

```
public string SomeString { get; set; } 
```

此属性的有效值是什么。两者都可能有效`null`，`string.Empty`也可能无效，具体取决于`Class`装饰的财产。可能存在应该允许的最大长度，但是这些细节会因实现而异。

* * *

如果任何建议的答案比上面的代码更复杂而没有提高性能或功能，它会更有效吗？

实际上，您的问题是，如何在无需编写大量代码的情况下检查对象的值？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-26T09:06:06.573

在 Haskell 等函数式语言中，可以使用 Maybe-monad 解决您的问题：

> Maybe monad 体现了组合计算链的策略，如果任何步骤产生**Nothing**作为输出，每个计算链都可能通过提前结束链来返回**Nothing 。**当计算需要一系列相互依赖的步骤并且其中某些步骤可能无法返回值时，它很有用。

 **将*Nothing*替换为*null*，同样的事情也适用于 C#。

有几种方法可以尝试解决这个问题，但都不是特别漂亮。如果你想要一个运行时验证某些东西不为空，你可以使用[AOP 框架](http://en.wikipedia.org/wiki/Aspect-oriented_programming)将空检查代码注入你的类型。否则你真的不得不做嵌套的 if 检查 null ，这不仅丑陋，而且可能违反[Demeter 法则](http://en.wikipedia.org/wiki/Law_of_Demeter)。

作为一种折衷方案，您可以使用类似 Maybe-monad 的一组扩展方法，这将允许您查询对象，并选择在其中一个属性为空的情况下要做什么。

看看 Dmitri Nesteruk 的这篇文章：http: [//www.codeproject.com/Articles/109026/Chained-null-checks-and-the-Maybe-monad](http://www.codeproject.com/Articles/109026/Chained-null-checks-and-the-Maybe-monad)

希望有帮助。**

# eclipse - 是否有一个简单的 Eclipse 源代码查看器插件？

> ID：12597773
> 
> 赞同：0
> 
> 时间：2012-09-26T08:40:47.063
> 
> 标签：eclipse

例如

```
 setMediamixDefaultTime(mediamixVO);

    boolean booked = false;
    Long campaignSeq = mediamixVO.getCampaignSeq(); 
```

当我想知道如何声明 setMediamixDefaultTime() 方法时，我必须跳到 setMediamixDefaultTime() 声明行。这很烦人，尤其是源代码很长..

所以我需要的是，如果我将鼠标移动到该方法或键盘快捷键，则方法声明会在小窗口中弹出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T08:42:41.137

只需 crtl+单击您要跳转到的项目。

还有一个大纲视图，它显示了程序结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:44:13.553

Control + 鼠标单击方法将带您进入方法声明，您可以使用后退按钮返回之前的代码。

后退按钮的快捷方式再次是 Alt + 左箭头

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T18:42:33.837

如果您不想失去位置，可以使用声明视图，但导航菜单的“最后编辑位置”、后退和前进操作也可以使用。

# python - 每个循环的字符串的新值

> ID：12597778
> 
> 赞同：0
> 
> 时间：2012-09-26T08:41:05.993
> 
> 标签：python, loops

我正在制作一个类似rpg的游戏。玩家和敌人轮流战斗的地方。敌人和玩家都有一个伤害范围 [ex (4,10)]，当他们攻击时，它会从这个范围内随机取一个数字。

我有这个函数循环，直到其中一个字符达到 0 HP。唯一的问题是第一个循环只需要一个随机数，然后在其余循环中使用相同的数字。如何为每个新循环获得一个新的随机数？

```
 import time
import random
global myhp
myhp = 20
global mydmg
mydmg = random.randint(2,5)
mygold = 0
mystr = 2

def start():
    print "Hello there."
    myname = raw_input("What is your name? ")
    print "Welcome %s, this is..." %myname
    uname = myname.upper()
    print "\t\t\tTHE ADVENTURES OF %s" %uname
    choice0 = ''
    allowed = ["y", "n"]
    while choice0.lower() not in allowed:
        choice0 = raw_input("\nWould you like to play the game? Y/N ")
        choice0 = choice0.lower()
    if choice0 == "y":
        game1()
    if choice0 == "n":
        print "Alright, bye!"

def fightmode(name, hp, dmg, gold):
    global myhp
    print '\n\n\nYou are in a fight with %s' %name
    print '%s has %sHP' %(name, hp)
    while myhp > 0 and hp > 0:
        print '\n\t1\. Attack \n\t2\. Guard \n\t3\. Run away.'
        opt1= ''
        allowed = ["1", "2", "3"]
        while opt1 not in allowed:
            opt1 = raw_input("\nWhat will you do? ")
            if opt1 == "1":
                hp = hp - mydmg
                myhp = myhp - dmg
                print "You have inflicted %d damage on %s. %s's HP is %s" %(mydmg, name, name, hp)
                print "%s attacked you and did %d damage. Your HP fell down to %s" %(name, dmg, myhp)
            if opt1 == "2":
                myhp = myhp + 5
                print "You are now guarding yourself. Your HP is now %d" %myhp
                myhp = myhp - dmg
                print "%s attacked you and did %d damage. Your HP fell down to %s" %(name, dmg, myhp)

    if myhp > 0 :
        print"myhp"
    if hp > 0 :
        print"theirhp"

    def fightmode0():
        print """\n\nThis is your first fight. You have 3 seconds each turn
    if you fail to make a move in 3 seconds, you will lose your turn.

    By "Attacking", you inflict damage on the enemy\'s HP, get it down to 0 to defeat him.
    If your HP reaches 0, you will be defeated. 

    By "Guarding", you will regain 10HP back, but that counts as your turn.
    By defeating enemies, you gain gold Use gold to purchase upgrades 
    when you come across a shop.

    You can choose to "Run Away", but you will only have a 1/10 chance of it being sucessful
    """
        raw_input("\nPress any key to continue to battle")
        fightmode("Scrawny Thug", 15, random.randint(1,5), 4)

    def game1():
        print "You wake up and find yourself locked in a room..."
        print "You think you're kidnapped."
        print "Yea, you're probably kidnapped."
        print "You hear footsteps approaching the door..."
        print "\n\t1\. Remain in fetal position \n\t2\. Attempt a sneak attack" 
        choice1 = ''
        allowed = ["1", "2"]
        while choice1 not in allowed:
            choice1 = raw_input("\nWhat will you do? ")
        print "The doorknob rattles..."
        print "..."
        print "..."
        if choice1 == "1":
            print '"Hey!"'
            print '"Get up maggot!"'
            print 'You see that the thug is small and scrawny'
            print 'He grabs you by your hair and pulls you up'
            print "\n\t1\. Punch him in the face. \n\t2\. Do nothing" 
            choice1_1 = ''
            allowed = ["1", "2",]
            while choice1_1 not in allowed:
                choice1_1= raw_input("\nWhat will you do?? ")
            if choice1_1 == "1":
                print '\nYou punch the scrawny thug and he lets you go'
                print '"You\'re going to pay for that."'
                print '\n\t\t>>>>>>>>>>ENTERING FIGHT MODE'
                fightmode0()

    start() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T09:12:43.590

放入函数中`dmg = random.randint(dmg_min, dmg_max)`的循环内部，以便重新计算每个循环，并将函数重新定义为：`while``fightmode`

```
def fightmode(name, hp, dmg_min, dmg_max, gold): 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T09:14:53.683

只需在需要时生成一个新的随机数：

代替：

```
fightmode("Scrawny Thug", 15, random.randint(1,5), 4) 
```

将其更改为：

```
fightmode("Scrawny Thug", 15, (1, 5), 4) 
```

并稍微改变功能：

```
def fightmode(name, hp, dmg_range, gold): # takes range as randint parameters
    global myhp    
    print '\n\n\nYou are in a fight with %s' %name    
    print '%s has %sHP' %(name, hp)    
    while myhp > 0 and hp > 0:   
        dmg = random.randint(*dmg_range) # generate new each time
        print '\n\t1\. Attack \n\t2\. Guard \n\t3\. Run away.' 
```

# python - 如何在自定义 django 表单中隐藏 django 标签？

> ID：12597780
> 
> 赞同：13
> 
> 时间：2012-09-26T08:41:15.000
> 
> 标签：python, django, forms, widget

我有一个自定义表单，它创建一个字段的隐藏输入：

```
class MPForm( forms.ModelForm ):
    def __init__( self, *args, **kwargs ):
        super(MPForm, self).__init__( *args, **kwargs )
        self.fields['mp_e'].label = "" #the trick :)

class Meta:
    model = MeasurementPoint
    widgets = { 'mp_e': forms.HiddenInput()  }
    exclude = ('mp_order') 
```

我必须做这个小技巧来“隐藏”标签，但我想做的是将它从表单中删除。我创建这样的表格：

```
forms.MPForm() 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-26T09:58:20.667

我不建议删除标签，因为它会使表单无法访问。您可以[将自定义 CSS 类添加](http://djangosnippets.org/snippets/2487/)到该字段，并在您的 CSS[中使该类不可见](http://xhtml.com/en/css/reference/visibility/)。

**编辑**

我错过了输入是隐藏的，所以可访问性不是问题。

您可以直接在模板中呈现表单字段：

```
<form ...>
    {% for field in form.hidden_fields %}
        {{ field }}
    {% endfor %}

    {% for field in form.visible_fields %}
        {{ field.label }} {{ field }}
    {% endfor %}
</form> 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2019-02-15T06:46:58.680

现在，（我的django版本是2.1.4），可以这样解决->编辑forms.py文件：

```
password = forms.CharField(label=False) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-26T10:24:31.433

如果您使用`form.as_p`or`form.as_table`方法，Django 无论如何都不应该显示隐藏字段的标签，因此无需更改`__init__`方法中的标签。

```
{{ form.as_table }} 
```

如果您正在[自定义表单模板](https://docs.djangoproject.com/en/dev/topics/forms/#looping-over-the-form-s-fields)，您可以使用该`field.is_hidden`属性来检查该字段是否隐藏。

```
{% if field.is_hidden %}
   {# Don't render label #}
{% endif %} 
```

或者，您可以[分别循环隐藏和可见字段](https://docs.djangoproject.com/en/dev/topics/forms/#looping-over-hidden-and-visible-fields)，并省略隐藏字段的标签。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-07-03T10:56:47.360

你需要给 False ，它会起作用：

```
self.fields['mp_e'].label = False 
```

django版本：2.2

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-06-07T13:09:18.983

我发现这很有用，对我有用！

```
class CustomForm(forms.Form):
class Meta:
    ...  #other properties such as model, fields, widgets and help text
    labels = {
       'comment' : '',
    } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-02-25T18:36:53.070

转到您的 forms.py 文件并添加 label = false

如下

```
name = forms.CharField(required=True, max_length=100, widget=forms.TextInput(attrs={'placeholder': 'Enter Name *'}), label=False) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-26T10:06:45.593

除非我误解了您的问题，否则您只需将 mp_e 字段添加到元类下的排除元组中。这不是你需要的吗？

```
class MPForm( forms.ModelForm ):
    def __init__( self, *args, **kwargs ):
        super(MPForm, self).__init__( *args, **kwargs )

    class Meta:
        model = MeasurementPoint
        exclude = ('mp_order','mp_e') 
```

# doctrine - Symfony 1.4 原则 - 与中间表中的额外字段的多对多关系

> ID：12597786
> 
> 赞同：2
> 
> 时间：2012-09-26T08:41:46.063
> 
> 标签：doctrine, many-to-many, symfony-1.4, field

有3个表：shelf、section和shelf_has_section中间表来支持nm关系。从 symfony 学说构建的模式：build-schema 如下所示。

简单地，

```
shelf(id, position)
section(id, name)
shelf_has_section(shelf_id, section_id, number_of_books) 
```

架构。

```
Shelf:
  connection: doctrine
  tableName: shelf
  columns:
    id:
      type: integer(4)
      fixed: false
      unsigned: true
      primary: true
      autoincrement: true
    position:
      type: string(255)
      primary: false
      notnull: true
      autoincrement: false
  relations:
    ShelfHasSection:
      local: id
      foreign: shelf_id
      type: many

Section:
  connection: doctrine
  tableName: section
  columns:
    id:
      type: integer(1)
      primary: true
      autoincrement: false
    name:
      type: string(20)
      primary: false
      notnull: true
  relations:
    ShelfHasSection:
      local: id
      foreign: section_id
      type: many

ShelfHasSection:
  connection: doctrine
  tableName: shelf_has_section
  columns:
    shelf_id:
      type: integer(4)
      primary: true
      autoincrement: false
    section_id:
      type: integer(1)
      primary: true
      autoincrement: false
    number_of_books:
      type: integer(4)
      primary: false
      notnull: false
      autoincrement: false
  relations:
    Shelf:
      local: shelf_id
      foreign: id
      type: one
    Section:
      local: section_id
      foreign: id
      type: one 
```

通过在架构中添加以下与 Shelf 的关系，我设法将 Sections 显示为复选框列表。我还需要在部分复选框前面显示一个文本字段以输入书籍数量。

```
Sections:
  class: Section
  refClass: ShelfHasSection
  local: shelf_id 
```

就像检查可用部分的复选框列表并添加已检查部分的书籍数量一样。

我试图通过 embedRelation() 等实现它，但缺乏我的 symfony 知识并没有让我到达那里。任何帮助高度赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T18:19:18.117

从理论上讲，如果一个 nm 关系表有它自己的字段，它本身就成为一个实体，因此 nm 关系的学说模型不匹配这个问题......但是： - 首先，您必须重新定义您的架构以添加 foreignAliases纳米实体：

```
ShelfHasSection:
  connection: doctrine
  tableName: shelf_has_section
  columns:
    shelf_id:
      type: integer(4)
      primary: true
      autoincrement: false
    section_id:
      type: integer(1)
      primary: true
      autoincrement: false
    number_of_books:
      type: integer(4)
      primary: false
      notnull: false
      autoincrement: false
  relations:
    Shelf:
      local: shelf_id
      foreign: id
      type: one
      **foreignAlias: ShelfHasSections**
    Section:
      local: section_id
      foreign: id
      type: one
      **foreignAlias: ShelfHasSections** 
```

如果您试图使其在生成的模块上工作，那么您的复选框想法没有解决方案。我建议您使用 ahDoctrineEasyEmbeddedRelationsPlugin，并将关系 ShelfHasSections 嵌入到您的货架表单中。插件嵌入的 ShelfHasSectionForm 可能具有该部分的自动完成字段，以及书籍数量的输入。因此，当您想将某个架子与一个部分相关联时，添加一个表单（使用插件）并选择值。最新的问题变成了如何避免重复的部分......我想你应该应用一些 javascript 过滤器来记住女巫部分已经相关并与自动完成查询一起发送，所以学说查询可以排除这些部分......听起来非常讨厌，确实如此，但这是我能想出的唯一一种解决方案。

如果您不使用生成器，而是使用一些自定义操作/模板，我想问题会变得更容易：将 1 个 CustomShelfHasSectionForm 嵌入到您的货架表单（每个部分一个）。然后，在每个表单中添加一个复选框小部件（可能带有 sfWidgetFormInputCheckbox）以选择关系。他们在处理表单时会删除那些没有选中复选框的嵌入表单。像这样的东西：

```
class CustomShelfHasSectionForm extends ShelfHasSectionForm {
 public function configure() {
   unset($this['shelf_id']);
   $this->widgetSchema['selected'] = new sfWidgetFormInputCheckbox();
   $this->validatorSchema['selected'] = new sfValidatorBoolean(array('required' => false));
 }

}

class CustomShelfForm extends ShelfForm {
  private $unselected_sections = array();
  public function configure() {

    $sections = Doctrine::getTable('Section')->findAll();
    foreach($sections as $section) {
      $shelfHasSection = new ShelfHasSection();
      $shelfHasSection->setShefl($this->getObject());
      $shelfHasSection->setSection($section);
      $this->embedForm('section_'.$section->getId(), new CustonShelfHasSectionForm($shelfHasSection));
    }

  }

  public function doBind(array $values) {
    $sections = Doctrine::getTable('Section')->findAll();
    foreach($sections as $section) {
       // Do some debug with print_r($values) to find something like
       ...
       if(empty($values['section_'.$section->getId()]['selected']) {
          $this->unselected_sections[] = $section->getId();

       }
    }
    return parent::doBind($values);
  }

  public function doSave($con = null) {
       foreach($this->unselected_sections as $section_id) {
          // disembed form, something like
          unset($this->embeddedForms["section_".$section->getId()]);
       }
  }
} 
```

然后，在你的 action.class.php

```
$shelfObject = ....
$this->form = new CustomShelfForm($shelfObject);
if(....) { 
   $this->form->bind...
   if($this->form->isValid()) {
      $this->form->save();
   }

} 
```

这都是“播出”的代码，所以可能有些东西不能很好地工作。也许您可以尝试其中一种解决方案，让我们知道它是如何为您工作的。我希望这可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T09:22:53.187

你不是第一个提出这种行为的人。遗憾的是，symfony 并没有被设计用来处理关系表中的额外字段。

我过去做过一次，但我找不到有关它的源代码。但我记得这是一种很难用 embedRelation 处理的 hack。

我在网上发现了一些可能对您有所帮助的主题（至少作为一个起点）：

*   [带有额外字段的多对多关系表格](http://forum.symfony-project.org/viewtopic.php?t=28066)
*   [Doctrine 多对多关系表上的额外字段](http://faitaccompli.blogspot.fr/2012/06/extra-field-on-doctrine-many-to-many.html)
*   （可能太旧）[中间表问题](http://oldforum.symfony-project.org/index.php/m/56427/)

在第一个链接中，*johandouma*似乎有一个合适的解决方案，但没有发布。你可以联系[他](https://github.com/johandouma)，看看他是否记得解决方案。

# php - 如果在编辑表单时选择了某个值，则禁用下拉菜单

> ID：12597788
> 
> 赞同：0
> 
> 时间：2012-09-26T08:41:53.480
> 
> 标签：php, forms, drop-down-menu, edit

当用户编辑表单并且下拉菜单的选定值为`1`.

这是我目前拥有的：当用户单击时`submit`，它会检查所选值是否为`1`，然后会弹出一个警告框。

我想做的是弹出警报框并禁用下拉菜单。

下拉菜单是一个回显值：

```
< td >< ?php echo $this->item->statusList;?>< /td > 
```

先感谢您！

```
else if (document.getElementById('status')[document.getElementById('status').selectedIndex].value == 1) 
{
    document.getElementById('status').focus();
    alert("<?php echo JText::_('This cannot be modified because it is 1', true); ?>");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T08:54:34.663

```
<script type="text/javascript">
function hideselect(value)
{
if(value ==1)
{
document.getElementById('status').disabled=true;
}
}
</script>

<select name='test' onchange='hideselect(this.value)';>
<option value='1'>one</option>
<option value='2'>two</option>
</select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:46:04.397

给定您希望禁用的选项的索引，您可以执行以下操作：

```
document.getElementById('status')[1].disabled = true; 
```

（例如，使用 1 的索引。）

# axapta - MS Dynamics AX 在驻留机器中写入哪些日志会占用机器的空间和内存？

> ID：12597789
> 
> 赞同：0
> 
> 时间：2012-09-26T08:41:58.137
> 
> 标签：axapta, dynamics-ax-2009, business-connector

我有一个在 ASP .NET Web 窗体中开发的第三方应用程序，它使用 AX 2009 业务连接器来集成 MS Dynamics AX 2009。安装 AX 2009 的机器由于可疑日志而降低了性能AX 已创建。不幸的是，第三方应用程序也受到影响，因为 AX 2009 在性能问题方面存在问题。日志文件是否因为 AX 而使服务器或机器本身过载？

非常感谢您提供任何友好的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T22:45:14.857

不确定日志文件，但确保您的 Windows 事件日志未满，这会导致严重的业务连接器性能问题并且很容易修复，只需增加限制或设置为满时覆盖即可。

# .net-cf-3.5 - .net 紧凑框架上的 ProcessStartInfo.RedirectOutput

> ID：12597790
> 
> 赞同：2
> 
> 时间：2012-09-26T08:41:58.933
> 
> 标签：.net-cf-3.5

我想在设备上启动一个外部进程并想捕获它的输出。所有的谷歌搜索都显示了 ProcessStartInfo.RedirectOutput - 但在 .net 紧凑框架中似乎缺少此选项。

有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T13:14:51.747

我已经通过使用 OpenNETCF.IO 项目中的内存映射文件将数据从被调用进程获取回调用进程来解决了这个问题。这是图书馆的链接：[http ://www.opennetcf.com/library/sdf/](http://www.opennetcf.com/library/sdf/)

# jquery - 结合jQuery淡入淡出多个div的列表项

> ID：12597794
> 
> 赞同：1
> 
> 时间：2012-09-26T08:42:09.060
> 
> 标签：jquery, jquery-cycle

**问题：**

我目前有一个正在运行的脚本，它基本上用一类“赞助商”浏览我的列表项，并以设定的速度循环浏览它们。

**所以我的html看起来像：**

```
<ul>
  <li class="sponsor-1">This is sponsor one</li>
  <li class="sponsor-2">This is sponsor two</li>
  <li class="sponsor-3">This is sponsor three</li>
</ul> 
```

**工作 jQuery：**

```
$(document).ready(function() {

var divs = $('li[class^="sponsor-"]').hide(),
    i = 0;

(function cycle() {

    divs.eq(i).fadeIn(400)
              .delay(1000)
              .fadeOut(400, cycle);

    i = ++i % divs.length;

})();
}); 
```

到目前为止这一切都很好，但我需要知道如何将额外的列表项添加到同一个函数中。我有另一个列表，其中包含一个“事实”类，我也想循环浏览。这无疑是非常错误的，但这是我尝试过的。

**我接下来尝试了什么（不工作）**

```
$(document).ready(function() {

var sponsors = $('li[class^="sponsor-"]').hide(),

var facts = $('li[class^="fact-"]').hide(),

    i = 0;

(function cycle() {

    sponsors.eq(i).fadeIn(400),
     facts.eq(i).fadeIn(400)
              .delay(1000)
              .fadeOut(400, cycle);

    i = ++i % sponsors.length;
    i = ++i % facts.length;

})();
}); 
```

这不起作用，我只需要一些帮助来尝试将更多内容添加到同一功能中，以便我可以针对其他各种循环列表。

**为清晰而编辑**

我**不是**在寻找第一个周期赞助商的周期，然后是事实，我希望两个周期同时运行。很抱歉有任何混淆。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T08:49:40.840

在工作 jQuery 代码中，只需更改：

`$('li[class^="sponsor-"]')`

至

`$('li[class^="sponsor-"], li[class^="fact-"]')`

要将两个列表分开，只需复制代码（不是最干净的方式，但它是最快和最简单的）。

```
$(document).ready(function() {

var sponsors = $('li[class^="sponsor-"]').hide(),

var facts = $('li[class^="fact-"]').hide(),

var facts_i = 0;
var sponsors_i = 0;

(function cycle() {

     sponsors.eq(sponsors_i).fadeIn(400)
              .delay(1000)
              .fadeOut(400, cycle);

    sponsors_i = ++sponsors_i % sponsors.length;

})();

(function cycle2() {

     facts.eq(facts_i).fadeIn(400)
              .delay(1000)
              .fadeOut(400, cycle2);

    facts_i = ++facts_i % facts.length;

})();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:54:11.300

如果您将`divs`变量更改为此，一切正常`var divs = $('li[class^="sponsor-"],li[class^="fact-"]')`

[请参阅此处](http://jsfiddle.net/r6avD/)的工作示例。

**编辑** 更新[小提琴](http://jsfiddle.net/r6avD/8/)以使用多个列表。现在两个循环同时在两个完全分离的列表中工作。

```
$(document).ready(function() {
    var sponsors = $('li[class^="sponsor-"]').hide(),
    facts = $('li[class^="fact-"]').hide(),
    i = 0;

    function cycle(list,itemNbr) {
        list.eq(itemNbr).fadeIn(400).delay(1000)
            .fadeOut(400,function(){cycle(list,++itemNbr % list.length)});
    };

    cycle(sponsors,i);
    cycle(facts,i);    
});​ 
```

# google-maps - 无法向谷歌地图发出请求

> ID：12597795
> 
> 赞同：0
> 
> 时间：2012-09-26T08:42:13.383
> 
> 标签：google-maps, google-maps-api-3

嗨，我正在向谷歌地图提出一个安静的请求，但我遇到了以下错误；

```
java.io.IOException: Server returned HTTP response code: 400 for URL: 
       http://maps.googleapis.com/maps/api/distancematrix/xml?origins=Washington, DC  
        USA&destinations=Los+Angeles+CA+USA&mode=driving&sensor=false
at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1436)
at java.net.URLConnection.getContent(URLConnection.java:688) 
```

我相信它建立了正确的连接，因为我可以通过将上述 URL 复制到浏览器中来获得正确的响应，我想知道为什么我在控制台中收到 400 错误代码，而当 java 发送请求时我没有得到正确的响应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T09:35:55.773

解决方案是我应该在起点和终点都用 + 替换所有空格。

# c# - 将 Async CTP 与可移植类库一起使用

> ID：12597797
> 
> 赞同：6
> 
> 时间：2012-09-26T08:42:19.750
> 
> 标签：c#, windows-8, windows-phone, async-ctp, portable-class-library

我正在尝试将项目重写为可移植类库。但问题是它使用的是异步 CTP，我无法将其编译为 WP 和 Windows Store App 的库。如果我不包含参考 AsyncCtpLibrary.dll，编译器会说

> 命名空间“System.Threading”中不存在类型或命名空间名称“Tasks”（您是否缺少程序集引用？）

如果我包含它，编译器仍然会显示相同的错误并添加警告：

> 无法解析主要引用“AsyncCtpLibrary”，因为它间接依赖于框架程序集“mscorlib，Version=4.0.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089”，在当前目标框架中无法解析。“.NETPortable，版本=v4.0，配置文件=Profile104”。要解决此问题，请删除引用“AsyncCtpLibrary”或将您的应用程序重新定位到包含“mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089”的框架版本。

我该如何忍受呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T14:43:49.783

当面向 .NET 4.5 和 Window Store 应用程序时，您目前只能在便携式设备中使用 async/await。除了便携式之外，您还可以使用适用于 .NET 4.0 和 Silverlight 5 的 Async Targeting Pack。

尽管如此，我们正在开发一个更新的异步定位包，当定位到 Phone 7.5、Silverlight 5 和 .NET 4.0 时，它增加了对便携式异步/等待的支持，请参阅：http: [//visualstudio.uservoice.com/forums/121579 -visual-studio/suggestions/2691068-support-async-in-portable-class-libraries](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/2691068-support-async-in-portable-class-libraries)。你会在 10 月初看到这个。

**更新**：我们刚刚发布了一个测试版：http: [//blogs.msdn.com/b/bclteam/archive/2012/10/22/using-async-await-without-net-framework-4-5.aspx](http://blogs.msdn.com/b/bclteam/archive/2012/10/22/using-async-await-without-net-framework-4-5.aspx)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T11:23:05.540

简单的答案 - AsyncCTP 在 Visual Studio 2012 中不起作用，不能在任何项目中使用。对于 .NET 4.0 和 Silverlight 5，您可以从 NuGet 安装以类似方式工作的 Async Targeting Pack。
Async/await 在可移植类库中仅在面向 WinRT、.NET4.5 或 Windows Phone 8 时受支持，即便如此，其使用也非常有限。我不能在这里详细介绍，因为 Windows Phone 8 SDK 仍处于 NDA 之下。
对于 WP7.5 和 VS2012，目前无法使用 async/await，但该平台的更新 Async Targeting Pack 应该会在某个时候可用。
另请注意，AsyncCTP 和 Async Targeting Pack 不能在可移植类库中使用，并且将来不太可能发生变化。结果是在 VS2010 中，您不能在可移植类库中使用 async/await。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T08:45:50.240

您可以尝试使用 AsyncBridge 项目而不是 AsyncCTP。我不知道它是否会有所帮助。您必须在 VS2012 中编译才能使其正常工作（您仍然可以针对 .NET4.0）：

*   [http://omermor.github.com/AsyncBridge/](http://omermor.github.com/AsyncBridge/)
*   [http://www.simple-talk.com/blogs/2012/04/08/asyncbridge-async-on-net-4-0-using-vs11/](http://www.simple-talk.com/blogs/2012/04/08/asyncbridge-async-on-net-4-0-using-vs11/)

# python - Python从多个文件中提取第一个匹配实例

> ID：12597798
> 
> 赞同：0
> 
> 时间：2012-09-26T08:42:24.337
> 
> 标签：python, text, for-loop, fileoutputstream

我编写了一个代码，它在一个目录中打开多个文件，并且只打印每个文件中所需文本的第一个匹配实例作为输出。

现在我想要这个输出在一个文件中。简单地通过 put `print >> file.txt,...`or `.write`or `csv.write`inside 循环来做这件事不会达到目的。

我的代码是：

```
import re, os, csv, sys

path = "D:\\"
in_files = os.listdir(path)
moldesc = ['Match1', 'Match2']

for f in in_files:
    file = os.path.join(path, f)
    text = open(file, "r")
    for line in text:
        if moldesc[0] in line:
            Text1 = line.split()[-1]          
        if moldesc[1] in line:
            Text2 = line.split()[-1]
            print f, Text1, Text2               # I WANT THIS OUTPUT IN A FILE
            break
    text.close()

print "We are extraction done !!!" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T08:49:18.120

您设法打开一个文件进行读取，距离打开一个文件进行写入仅一步之遥。

```
out = open(outfile, "w") 
for f in in_files:
    ...
    output_string = "{},{},{}\n".format(f, HOMO, LUMO)
    out.write(output_string) 
```

# nginx - userid_expires nginx

> ID：12597799
> 
> 赞同：0
> 
> 时间：2012-09-26T08:42:25.333
> 
> 标签：nginx

我需要根据这个文档在 nginx 上定义一个 cookie：[http](http://wiki.nginx.org/HttpUseridModule) ://wiki.nginx.org/HttpUseridModule 但是当我设置时：

```
userid          on;
userid_name     SessionStatId;
userid_domain   orange.fr;
userid_path     /;
userid_expires  8y; 
```

过期设置为会话，而不是定义的十年！

你知道为什么以及如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T16:57:25.483

我找到了 ！在我的 Firefox 配置中，我调整了它以通过 Firefox 关闭来清除所有 cookie。因此，所有 cookie 都设置为在会话结束时过期。就是这样！

# winforms - 多线程问题 + DataReady 已打开

> ID：12597801
> 
> 赞同：0
> 
> 时间：2012-09-26T08:42:34.177
> 
> 标签：winforms, multithreading, ado.net, datareader

我们正在我的公司开发一个 WinForms 应用程序。
我们正面临线程问题。

线程 TH 在运行时开始时启动。
TH 定期从表 TB 中读取一条记录。
DataTable 用于检索记录。
DataTable 由 SqlDataAdapter 填充。
一旦创建了对检索记录进行建模的对象，就会释放 DataTable。

Form 中的 DataGridView 可以在运行时填充来自 TB 的数据。
DataGridView 必须在主线程上填充，主线程是创建用户控件的线程。
但是在填充 DataTable 时会引发异常。
异常消息表明 DataReader 已在用于从 TB 检索记录的命令上打开。

我尝试在锁块中包围在 TH 上执行的语句，但没有成功。
我不习惯线程编程，所以我不知道我能做些什么来防止异常。
任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T07:59:53.467

我从这个网页获得了有用的信息：http: [//msdn.microsoft.com/en-us/library/haa3afyz (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/haa3afyz(v=vs.80).aspx)

该网页包含以下信息：

> 请注意，当 DataReader 打开时，Connection 由该 DataReader 独占使用。在关闭原始 DataReader 之前，您无法为 Connection 执行任何命令，包括创建另一个 DataReader。

在我的上下文中：
分别在主线程和线程 TH 上使用的 DataReader 为同一连接执行选择命令。
SqlDataAdapter.Fill 方法可能使用内部 DataReader。
可以在主线程上尝试执行 Fill 方法，而另一个对 Fill 方法的调用尚未在线程 TH 上完成。

# iis-7 - 在 Apache 中包含指令 - IIS7 中的类似指令？

> ID：12597803
> 
> 赞同：0
> 
> 时间：2012-09-26T08:42:38.003
> 
> 标签：iis-7, include

Apache 的**Include**指令包括服务器配置文件中的其他配置文件。例如，

```
Include /usr/local/apache2/conf/vhosts/*.conf 
```

IIS7 是否有类似的指令来包含其他配置文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T00:49:57.340

是的 - 请查看以下任何/所有内容：

[web.config 可以从外部 xml 文件中读取吗？](https://stackoverflow.com/questions/2411184/can-a-web-config-read-from-an-external-xml-file)

[将 IIS7 url rewrite 部分移出 web.config 文件](https://stackoverflow.com/questions/3333964/iis7-url-rewrite-web-config-section)

[IIS7 urlrewrite 模块 - 外部 xml 文件中的规则](https://stackoverflow.com/questions/3767864/iis7-urlrewrite-module-rules-in-external-xml-file)

# javascript - 命名数组的最小值，返回数组名

> ID：12597805
> 
> 赞同：0
> 
> 时间：2012-09-26T08:42:50.633
> 
> 标签：javascript, arrays, min

数组如下所示：

```
arr[0] = "value";
arr[1] = "value2"; 
```

或者它可以是这样的：

```
var items = {
  "dioxanes"     :  0,
  "shunning"     :  1,
  "plowed"       :  2,
  "hoodlumism"   :  3,
  "cull"         :  4,
  "learnings"    :  5,
  "transmutes"   :  6,
  "cornels"      :  7,
  "undergrowths" :  8,
  "hobble"       :  9,
  "peplumed"     : 10,
  "fluffily"     : 11,
  "leadoff"      : 12,
  "dilemmas"     : 13,
  "firers"       : 14,
  "farmworks"    : 15,
  "anterior"     : 16,
  "flagpole"     : 17
}; 
```

现在这里的值将是百分比并且必须进行比较，但返回的值应该是最小值数组对象的名称。

如您所知，相同项目的值可以有 2 个或更多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T08:57:26.293

`items`不是数组，它是一个对象。

```
var items = {"dioxanes": 0,  "shunning": 1,  "plowed": 2,
            "hoodlumism": 3, "cull": 4,      "learnings": 5,
            "transmutes": 6, "cornels": 7,   "undergrowths": 8,
            "hobble": 9,     "peplumed": 10, "fluffily": 11,
            "leadoff": 12,   "dilemmas": 13, "firers": 14,
            "farmworks": 15, "anterior": 16, "flagpole": 17};

var min = null, key_min, key;

for (key in items) {
  if (items.hasOwnProperty(key)) {
     if (min === null || items[key] < min) {
         min = items[key];
　　　　　key_min = key;
     }
  }
}

console.log("The key holds min value is: " + key_min); 
```

# java - @Entity 和 @Embeddable 之间的继承

> ID：12597806
> 
> 赞同：2
> 
> 时间：2012-09-26T08:42:54.430
> 
> 标签：java, database, hibernate, jpa

**动机**

我的应用程序根据表 foo 的内容向某些 Web 服务发出请求。我想记录这些请求（在数据库中）以及用于制作它们的 foo 行的值。尽管如此，由于表 foo 中的数据会随着时间而改变，我需要记录行的确切内容（而不是它的 id）。我正在使用 Hibernate，所以我想，我可以将 foo 行嵌入到表示请求的实体中。为了有干净的类层次结构，我想要这样的东西：

```
 class Foo
 {
   /*
    * Here goes some properties of Foo, which specify columns names etc.
    */
 }

 @Embeddable
 class EmbeddableFoo extends Foo
 {
   //EmbeddableFoo should have the same properties as Foo
 }

 @Entity
 class EntityFoo extends Foo
 {
   @Id
   Long getId() { //EntityFoo  has some id }
   //EntityFoo should have the same properties as Foo, except that
   //it has id
 } 
```

**问题**

这不起作用，因为*EmbeddableFoo*看*不到**Foo*的属性。我可以在*Foo上添加**@Inheritance*注释，以便*EntityFoo* *看到* *Foo*的属性，但它不会解决我的*EmbeddableFoo问题*

 *****问题**

是否有一种简单的（即不需要编写大量冗余代码）方法让*@Embeddable*和@Entity* 从同一个类继承？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T08:55:59.500

你检查注释了`@MappedSuperclass`吗？这可能就是你要找的。

[http://docs.oracle.com/javaee/5/api/javax/persistence/MappedSuperclass.html](http://docs.oracle.com/javaee/5/api/javax/persistence/MappedSuperclass.html)

> 指定一个类，其映射信息应用于从它继承的实体。映射的超类没有为其定义单独的表。
> 
> 使用 MappedSuperclass 注释指定的类可以以与实体相同的方式映射，除了映射将仅应用于其子类，因为映射的超类本身不存在表。当应用于子类时，继承的映射将应用于子类表的上下文中。通过使用 AttributeOverride 和 AssociationOverride 注释或相应的 XML 元素，可以在此类子类中覆盖映射信息。***

# sql - 比较两个表之间的字符串数据

> ID：12597811
> 
> 赞同：3
> 
> 时间：2012-09-26T08:43:05.350
> 
> 标签：sql, sql-server-2008

我有两个表表 1 与列

```
ID Text           email ID
============================
1  This is Test   123@g.com    
2  Make my day    1234@g.com 
```

表 2 一列

```
words(column)
=============    
Test    
trip    
day 
```

现在我想做的是将文本（每个单词）`Table 1`与每一行 ow 单词进行比较`TABLE 2`，如果找到，则 id 应该记录在不同的表上。

例如：如果 from`TABLE1` `Test`是单词，它是`TABLE 2`单词列中的行值。所以它应该登录`ID =1`另一个表。

同样，一旦找到这个词，它就不应该进行进一步的迭代。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T11:09:01.223

这有效

```
SELECT t1.*,t2.words
FROM Table1 t1
JOIN Table2 t2
ON PATINDEX('%' + t2.words + '%',t1.text)>0 
```

**输出**

```
ID  Text            email_ID    words
1   This is Test    123@g.com   Test
2   Make my day     1234@g.com  day 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T08:47:12.180

尝试这个：

```
select *
from TABLE1 
join 
TABLE2
on ' '+Text+' ' like '% '+words+' %' 
```

# [SQL小提琴演示](http://sqlfiddle.com/#!2/2bb1d/4)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T09:42:37.800

您可以使用`CHARINDEX`以下功能：

```
select *
from TABLE1 t1
where exists 
(
   select 1
   from TABLE2 t2
   where CHARINDEX(t2.words,t1.text)>0
) 
```

[链接](http://msdn.microsoft.com/pl-pl/library/ms186323.aspx)到文档。

# c# - 如何删除名称中的特殊字符，如 Frédéric？

> ID：12597819
> 
> 赞同：3
> 
> 时间：2012-09-26T08:43:30.637
> 
> 标签：c#, .net, asciiencoding

我有一个名为 的联系人`Frédéric`。

当我在站点的联系人列表中搜索它时，名称会像这样更改`"FrÃ©dÃ©ric"`，因为它`FrÃ©dÃ©ric`在数据库中搜索此名称（），所以我在其中有名称`Frédéric`。

所以在数据库中不会有这样的名字，它说没有找到联系人。

我如何获得这个名字以外的真实姓名`FrÃ©dÃ©ric`。？

我的解码方法是

```
public static string Decode(string text)
        {
            if (text == null)
            {
                return "";
            }

            string result = "";
            string[] values = text.Split('@');
            bool escaped = false;
            try
            {
                for (int i = 0; i < values.Length; i++)
                {
                    if (!escaped)
                    {
                        result += values[i].Replace("_"," ");
                    }
                    else
                    {
                        //result += System.Text.ASCIIEncoding.ASCII.GetChars(new byte[] { byte.Parse(values[i]) })[0];

                    }
                    escaped = !escaped;
                }
            }
            catch { }
            return result;
        } 
```

这里方法的参数是 Frédéric 但它实际上必须是 Frédéric。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-26T08:48:02.363

您的系统中某处存在错误，其中使用所谓的 ANSI 代码页对 UTF-8 编码的字符串进行解码。此代码演示了该错误：

```
var name = "Frédéric";
var bytes = Encoding.UTF8.GetBytes(name);
var wrongName = Encoding.Default.GetString(bytes); 
```

现在`wrongName`是`FrÃ©dÃ©ric`。

你需要做的是：

```
var name = "Frédéric";
var bytes = Encoding.UTF8.GetBytes(name);
var correctName = Encoding.UTF8.GetString(bytes); 
```

`Encoding.Default`取决于您的 Windows 区域设置。在我的计算机上，代码页是 Windows 1252，也称为 ISO 8859:1，但在世界其他地方，它可能是另一个代码页。我相信日文 ANSI 代码页是 932，在这种情况下，错误的名称会显示为`Frﾃｩdﾃｩric`.

无论如何，要使用的正确编码是 UTF-8，因为您的字符串是使用该编码编码的。尝试“修复”损坏的字符串并不是一条富有成效的路径，因为它取决于执行代码的系统的 ANSI 代码页。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:45:11.010

您可以使用`HtmlEncode`为了编码您的字符

```
string encoded = HttpUtility.HtmlEncode("Frédéric"); 
```

链接（特殊字符）：[http ://www.utexas.edu/learn/html/spchar.html](http://www.utexas.edu/learn/html/spchar.html)

# mysql - MySQL 作为 Linux (Ubuntu) 中 SQL Server 2008 的桥梁

> ID：12597822
> 
> 赞同：0
> 
> 时间：2012-09-26T08:43:39.857
> 
> 标签：mysql, linux, sql-server-2008, odbc, linktable

在 Windows 中，SQL Server（或 MS Access）中有一个链接表功能。基本上，如果我链接 SQL-Server 和 MySQL，那么当我的应用程序在 SQL-Server 中编写某些内容时，MySQL 也会通过 ODBC 连接进行更新。

基本上流程是：win-apps -> sql-server 2008 -> (via win-odbc) mysql (linux)

现在我想将Linux环境中的过程反转为：

我想要的流程是：nix-apps -> mysql (linux) -> (via nix-odbc?) sql-server 2008 ...

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:35:35.520

如果您想从 unixODBC 连接到 SQL Server，有几个商业选项[Easysoft SQL Server ODBC 驱动程序](http://www.easysoft.com/products/data_access/odbc-sql-server-driver/index.html)，或者如果您更喜欢不受支持的免费版本，[免费 TDS ODBC 驱动程序](http://freetds.schemamania.org/)

其他 ODBC 驱动程序可用，但可能与 unixODBC 不兼容。

# c++ - 这个 C++/C++11 构造是什么意思？

> ID：12597823
> 
> 赞同：5
> 
> 时间：2012-09-26T08:43:42.190
> 
> 标签：c++, c++11

我有这个简短的代码片段。我不明白这个结构是什么意思。我知道这段代码从输入中读取数字并在 unordered_map 中计算其频率。但什么是`[&]`？是什么意思`(int x)`？代表什么`input(cin)`？我的意思是括号中的“cin”？for_each 如何迭代`input(cin)`到空的 eof 参数？我不明白这整个结构。

```
unordered_map<int,int> frequency;
istream_iterator<int> input(cin);
istream_iterator<int> eof;

for_each(input, eof, [&] (int x)
    { frequency[x]++; }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T08:47:49.373

[`istream_iterator`](http://www.cplusplus.com/reference/std/iterator/istream_iterator/)[`istream`](http://www.cplusplus.com/reference/iostream/istream/)允许您从传递给构造函数的 中迭代地提取项目。`eof`对象是这样解释的：

> 此迭代器存在一个特殊值：流结束；当迭代器设置为此值时，要么已到达流的末尾（应用于流的运算符 void* 返回 false），要么已使用其默认构造函数构造（未将其与任何 basic_istream 对象关联）。

[`for_each`](http://www.cplusplus.com/reference/algorithm/for_each/)是一个循环构造，它采用迭代器#1 并递增它直到它与迭代器#2 相等。在这里，它采用包装标准输入的迭代器[`cin`](http://www.cplusplus.com/reference/iostream/cin/)并将其递增（转换为提取项目），直到没有更多输入要消耗——这使得`input`比较等于`eof`并且循环结束。

该构造`[&] (int x) { frequency[x]++; }`是一个[匿名函数](http://en.wikipedia.org/wiki/Anonymous_function#C.2B.2B)；它只是内联编写函数的一种简写方式。可以达到大致相同的效果

```
unordered_map<int,int> frequency; // this NEEDS to be global now
istream_iterator<int> input(cin);
istream_iterator<int> eof;

void consume(int x) {
    frequency[x]++;
}

for_each(input, eof, consume); 
```

简而言之：这段代码从标准输入中读取整数，直到所有可用数据都被消耗完，同时记录每个整数在地图中出现的频率。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T09:03:27.313

你的问题有两个部分。

1.  第一个涉及流迭代器。An`std::istream_iterator<T>`是由 some 构造的`std::istream & s`，并且在取消引用时，它的行为类似于`{ T x; s >> x; return x; }`。一旦提取失败，迭代器就等于默认构造的迭代器，用作“结束”迭代器。

    流迭代器允许您将流视为令牌的容器。例如：

    ```
    std::vector<int> v(std::istream_iterator<int>(std::cin),
                       std::istream_iterator<int>());

    std::copy(v.begin(), v.end(), std::ostream_iterator<int>(std::cout, " ")); 
    ```

2.  C++11 引入了*lambda 表达式*，它定义了匿名函数或函子（称为*闭包*）。一个简单的看起来像这样：

    ```
    auto f = [](int a, int b) -> double { return double(a) / double(b); };

    auto q = f(1, 2);  // q == 0.5 
    ```

    这`f`可以写成普通的自由函数，但自由函数必须出现在命名空间范围内或作为本地类的静态成员函数。（实际上这就是 lambda 表达式的类型！）请注意，lambda 表达式的类型是不可知的，只能通过 new`auto`关键字捕获。

    当 Lambda 充当可以捕获环境状态的复杂函数*对象时，它们会变得更加有用。*你的例子可能是这样写的：

    ```
    auto f = [&frequency](int x) -> void { ++frequency[x]; }; 
    ```

    *捕获*出现在第一个方括号之间的变量。此 lambda 等效于以下本地类和对象：

    ```
    struct F
    {
        F(std::unordered_map<int, int> & m) : m_(m) { }
        void operator()(int x) { ++m_[x]; }
    private:
        std::unordered_map<int, int> & m_;
    } f; 
    ```

没有`&`在捕获列表中的变量是按值捕获的，即在闭包对象中创建一个副本。作为简写，您可以按值或按引用分别表示`[=]`或`[&]`捕获*所有内容。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T08:46:52.993

这是 STL **std::for_each** (non-C++11) 迭代**输入**直到等于**eof**；`[&] (int x) { frequency[x]++; }`为每个值调用 lambda

因此，此代码计算 istream 中字符的频率；将它们保存到**地图中**

# android - android在刷新前无法清除listview中的数据

> ID：12597825
> 
> 赞同：0
> 
> 时间：2012-09-26T08:43:43.807
> 
> 标签：android, listview, android-arrayadapter

我有一个显示交易列表的应用程序。当我单击一个按钮以获取第二天的交易时，列表视图仍然会附加前一天的交易。如何在 getView 重新填充之前清除数组或适配器？

我试过 clear() 和 adapter.notifyDataSetChanged() 但它仍然不起作用。

```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.getrotalayout);

         setCurrentDateOnView();

        Log.e(TAG, "title = " + getTitle());
        Log.e(TAG, "super.title = " + super.getTitle());
        nfcscannerapplication = (NfcScannerApplication) getApplication();
        date = nfcscannerapplication.getDate();
        listView = (ListView) findViewById(R.id.rotalist);
        intent = this.getIntent();
        Bundle bundle = intent.getBundleExtra("rotaArrayBundle");
        if(array != null){
            array.clear();
        }
        array = (ArrayList<?>) bundle.get("rotaArray");

        arrayAdapter = new MySimpleArrayAdapter(this, array);
        arrayAdapter.notifyDataSetChanged();

        listView.setAdapter(arrayAdapter);
        listView.setOnItemClickListener(this); 
```

。[更新]

```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.getrotalayout);

         setCurrentDateOnView();

        Log.e(TAG, "title = " + getTitle());
        Log.e(TAG, "super.title = " + super.getTitle());
        nfcscannerapplication = (NfcScannerApplication) getApplication();
        date = nfcscannerapplication.getDate();
        listView = (ListView) findViewById(R.id.rotalist);
        intent = this.getIntent();
        Bundle bundle = intent.getBundleExtra("rotaArrayBundle");

        array = (ArrayList<?>) bundle.get("rotaArray");

        if (arrayAdapter == null){

        arrayAdapter = new MySimpleArrayAdapter(this, array);
        }else{

            ((MySimpleArrayAdapter)getListAdapter()).clear();

        }

        for(YourListItem item : yourNewDataArray){
            ((MySimpleArrayAdapter)getListAdapter()).add(item);
        }

        listView.setAdapter(arrayAdapter);
        listView.setOnItemClickListener(this);

    }// end of onCreate

    private MySimpleArrayAdapter getListAdapter() {
        // TODO Auto-generated method stub
        return arrayAdapter;
    } 
```

. [更新2]

```
public class GetRota extends NfcBaseActivity implements OnItemClickListener {

    private static final String TAG = GetRota.class.getSimpleName();
    ListView listView;
    Intent intent;
    String callID;
    DateTime date;
    NfcScannerApplication nfcscannerapplication;
    ArrayList<?> array;
    String needName = "";
    MySimpleArrayAdapter arrayAdapter;
    private DatePicker dpResult;
    private int year;
    private int month;
    private int day;

    static final int DATE_DIALOG_ID = 999;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.getrotalayout);

         setCurrentDateOnView();

        Log.e(TAG, "title = " + getTitle());
        Log.e(TAG, "super.title = " + super.getTitle());
        nfcscannerapplication = (NfcScannerApplication) getApplication();
        date = nfcscannerapplication.getDate();
        listView = (ListView) findViewById(R.id.rotalist);
        intent = this.getIntent();
        Bundle bundle = intent.getBundleExtra("rotaArrayBundle");

        array = (ArrayList<?>) bundle.get("rotaArray");

        if (arrayAdapter == null){

        arrayAdapter = new MySimpleArrayAdapter(this, array);
        }else{

            ((MySimpleArrayAdapter)getListAdapter()).clear();

        }

//      for(YourListItem item : yourNewDataArray){
//          ((MySimpleArrayAdapter)getListAdapter()).add(item);
//      }

        listView.setAdapter(arrayAdapter);
        listView.setOnItemClickListener(this);

    }// end of onCreate

    private MySimpleArrayAdapter getListAdapter() {

        return arrayAdapter;
    }

    public void setCurrentDateOnView() {

        dpResult = (DatePicker) findViewById(R.id.datepicker1);

        final Calendar c = Calendar.getInstance();
        year = c.get(Calendar.YEAR);
        month = c.get(Calendar.MONTH);
        day = c.get(Calendar.DAY_OF_MONTH);

    }

    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.menurotadetails, menu);
        return true;
    }

    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case R.id.previous:
            DateTime now2 = nfcscannerapplication.getDate();
            Log.e(TAG, "now2 = " + now2);
            DateTime dateTimePlusOne2 = now2.minusDays(1);
            Log.e(TAG, "now2 after -1 = " + dateTimePlusOne2);
            nfcscannerapplication.setDate(dateTimePlusOne2);
            DateTimeFormatter fmt2 = DateTimeFormat.forPattern("d-MMM-Y");
            String nextDay2 = fmt2.print(dateTimePlusOne2);

            Intent i2 = new Intent(this, NfcscannerActivity.class);
            i2.putExtra("nextRota", nextDay2);
            i2.setAction("NEXT_ROTA");
            startActivity(i2);
            return true;

        case R.id.next:

            DateTime now = nfcscannerapplication.getDate();
            Log.e(TAG, "now = " + now);
            DateTime dateTimePlusOne = now.plusDays(1);
            Log.e(TAG, "now after +1 = " + dateTimePlusOne);
            nfcscannerapplication.setDate(dateTimePlusOne);
            DateTimeFormatter fmt = DateTimeFormat.forPattern("d-MMM-Y");
            String nextDay = fmt.print(dateTimePlusOne);

            Intent i = new Intent(this, NfcscannerActivity.class);
            i.putExtra("nextRota", nextDay);
            i.setAction("NEXT_ROTA");
            startActivity(i);
            return true;

        case R.id.today:
            setCurrentDateOnView();
            showDialog(DATE_DIALOG_ID);
            return true;

        default:

            return super.onOptionsItemSelected(item);
        }
    }

    @Override
    protected Dialog onCreateDialog(int id) {
        switch (id) {
        case DATE_DIALOG_ID:
            // set date picker as current date
            return new DatePickerDialog(this, datePickerListener, year, month,
                    day);
        }
        return null;
    }

    private DatePickerDialog.OnDateSetListener datePickerListener = new DatePickerDialog.OnDateSetListener() {

        // when dialog box is closed, below method will be called.
        public void onDateSet(DatePicker view, int selectedYear,
                int selectedMonth, int selectedDay) {
            year = selectedYear;
            month = selectedMonth;
            day = selectedDay;

            DateTime spinnyTime = new DateTime(year, month+1, day, 1, 1);
            Log.e(TAG, "spinnyTime = " + spinnyTime);
            DateTimeFormatter fmt = DateTimeFormat.forPattern("d-MMM-Y");
            String formattedSpinnyTime = fmt.print(spinnyTime);
            Log.e(TAG, "spinnyTime = " + formattedSpinnyTime);
            Log.e(TAG, "year = " + year);
            Log.e(TAG, "month = " + month);
            Log.e(TAG, "day = " + day);

            Intent i = new Intent(GetRota.this, NfcscannerActivity.class);
            i.putExtra("nextRota", formattedSpinnyTime);
            i.setAction("NEXT_ROTA"); 
            startActivity(i);

        }
    };

    private class MySimpleArrayAdapter extends ArrayAdapter<String> {
        private final Context context;
        private final ArrayList<?> list;

        public MySimpleArrayAdapter(Context context, ArrayList<?> list) {

            super(context, R.layout.rotarowlayout);
            Log.e(TAG, "inside adapter constructor");
            this.context = context;
            this.list = list;

            if(list.get(6).toString().equalsIgnoreCase("Out of range")){

                AlertDialog alertDialog = new AlertDialog.Builder(GetRota.this).create();
                alertDialog.setTitle("No Rota Available Error");
                alertDialog.setMessage("Unable To View Rota For That Day");
                alertDialog.setButton("OK", new DialogInterface.OnClickListener() {
                      public void onClick(DialogInterface dialog, int which) {

                    } }); 

                alertDialog.show();
            }
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {

            LayoutInflater inflater = (LayoutInflater) context
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

            View rowView = inflater.inflate(R.layout.rotarowlayout, parent,
                    false);

            TextView startTime = (TextView) rowView
                    .findViewById(R.id.rowstarttime);
            TextView duration = (TextView) rowView
                    .findViewById(R.id.rowduration);
            TextView status = (TextView) rowView.findViewById(R.id.rowstatus);
            TextView name = (TextView) rowView.findViewById(R.id.rowclientname);

            String record = list.get(position).toString();
            String[] itemsInRecord = record.split(",");
            Log.e(TAG, "itemin record = " + itemsInRecord.length);
            String[] recordItem = new String[itemsInRecord.length];

            for (int x = 0; x < itemsInRecord.length; x++) {

                recordItem[x] = itemsInRecord[x];
                Log.e(TAG, "x = " + x);
            }

            startTime.setText("Start Time: " + recordItem[0]);
            duration.setText("Duration:" + recordItem[1]);
            status.setText("Status:" + recordItem[2]);
            name.setText("Client:" + recordItem[3] + recordItem[4]);
            callID = recordItem[5];
            needName = recordItem[6];

            return rowView;

        }

        @Override
        public int getCount() {
            return this.list.size();
        }

    }// end of adapter class

    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position,
            long id) {

        Log.e(TAG, "inside onItemClick");

        Intent intent = new Intent(GetRota.this, GetRotaDetails.class);
        intent.putExtra("callIDExtra", callID);

        startActivity(intent);

    }

}// end of GetRota 
```

.

[更新3]

```
@Override
    protected void onNewIntent(Intent intent) {
        setIntent(intent);
        super.onNewIntent(intent);

        // Get your ArrayList from getIntent.getExtras() here, and use my code from above
        Bundle bundle = intent.getBundleExtra("rotaArrayBundle");
        array = (ArrayList<?>) bundle.get("rotaArray");
    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.getrotalayout);

         setCurrentDateOnView();

        Log.e(TAG, "title = " + getTitle());
        Log.e(TAG, "super.title = " + super.getTitle());
        nfcscannerapplication = (NfcScannerApplication) getApplication();
        date = nfcscannerapplication.getDate();
        listView = (ListView) findViewById(R.id.rotalist);
        onNewIntent(intent);
        //intent = this.getIntent();
        //Bundle bundle = intent.getBundleExtra("rotaArrayBundle");

        //array = (ArrayList<?>) bundle.get("rotaArray");

        if (arrayAdapter == null){

        arrayAdapter = new MySimpleArrayAdapter(this, array);
        }else{

            ((MySimpleArrayAdapter)getListAdapter()).clear();

        }

//      for(YourListItem item : yourNewDataArray){
//          ((MySimpleArrayAdapter)getListAdapter()).add(item);
//      }

        listView.setAdapter(arrayAdapter);
        listView.setOnItemClickListener(this);

    }// end of onCreate 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T08:49:24.803

您应该保留旧适配器，并且每当您想更新列表时，您可以执行以下操作：

```
((MySimpleArrayAdapter)getListAdapter()).clear();
for(String[] item : array){
    ((MySimpleArrayAdapter)getListAdapter()).add(item);
} 
```

你也不必打电话`notifyDataSetChange()`，因为`clear()`and`add()`会为你做。

**编辑：**`android:launchMode="singleTop"`在您的活动的清单 XML 中设置，然后覆盖这样的`onNewIntent()`方法：

```
@Override
protected void onNewIntent(Intent intent) {
    setIntent(intent);
    super.onNewIntent(intent);
} 
```

**编辑2：**

```
@Override
protected void onNewIntent(Intent intent) {
    setIntent(intent);
    super.onNewIntent(intent);
}

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.getrotalayout);

     setCurrentDateOnView();

    Log.e(TAG, "title = " + getTitle());
    Log.e(TAG, "super.title = " + super.getTitle());
    nfcscannerapplication = (NfcScannerApplication) getApplication();
    date = nfcscannerapplication.getDate();
    listView = (ListView) findViewById(R.id.rotalist);

    listView.setAdapter(arrayAdapter);
    listView.setOnItemClickListener(this);

}

@Override
protected void onResume(){
    super.onResume();
    ArrayList<String[]> array = (ArrayList<String[]>)getIntent().getBundleExtra("rotaArrayBundle").get("rotaArray"); 
    MySimpleArrayAdapter arrayAdapter = new MySimpleArrayAdapter(this, array);
    listView.setAdapter(arrayAdapter)
} 
```

.

[更新 4]

```
 for(int i = 0; i < count; i++){

                String s = new Integer(i).toString();

                 JSONObject jsonobject2 = (JSONObject) jsonObject1.get(s);
                 String startdate = jsonobject2.getString("StartDate");
                 String duration = jsonobject2.getString("Duration");
                 String callStatusName = jsonobject2.getString("CallStatusName");
                 String clientForeName = jsonobject2.getString("ClientForename");
                 String clientSurName = jsonobject2.getString("ClientSurname");
                 String clientCallId = jsonobject2.getString("CallID");
                 String needName = jsonobject2.getString("NeedName");

                 ArrayList<String> arr = new ArrayList<String>();
                 arr.add(startdate);
                 arr.add(duration);
                 arr.add(callStatusName);
                 arr.add(clientForeName);
                 arr.add(clientSurName);
                 arr.add(clientCallId);
                 arr.add(needName);

                 Log.e(TAG, "arr size = "+arr.size());
                arrayList.add(i, arr);

                }

            } catch (Exception e) {

                e.printStackTrace();
            }
            return arrayList;

class TwoDimentionalArrayList<T> extends ArrayList<ArrayList<T>> {

        private static final long serialVersionUID = 1L;

        public void addToInnerArray(int index, T element) {
            while (index >= this.size()) {
                this.add(new ArrayList<T>());
            }
            this.get(index).add(element);
        }

        public void addToInnerArray(int index, int index2, T element) {
            while (index >= this.size()) {
                this.add(new ArrayList<T>());
            }

            ArrayList<T> inner = this.get(index);
            while (index2 >= inner.size()) {
                inner.add(null);
            }

            inner.set(index2, element);
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T09:00:04.780

你能不能换个顺序试试。

```
listView.setAdapter(arrayAdapter);
arrayAdapter.notifyDataSetChanged(); 
```

# python - 如何继承 numpy.`ma.core.masked_array`？

> ID：12597827
> 
> 赞同：3
> 
> 时间：2012-09-26T08:43:56.840
> 
> 标签：python, oop, inheritance, python-2.7, subclass

我正在尝试编写一个子类 a `masked_array`。到目前为止，我得到的是：

```
class gridded_array(ma.core.masked_array):
    def __init__(self, data, dimensions, mask=False, dtype=None,
                 copy=False, subok=True, ndmin=0, fill_value=None,
                 keep_mask=True, hard_mask=None, shrink=True):
        ma.core.masked_array.__init__(data, mask, dtype, copy, subok,
                                      ndmin, fill_value, keep_mask, hard_mask,
                                      shrink)
        self.dimensions = dimensions 
```

但是，当我现在创建一个时`gridded_array`，我没有得到我所期望的：

```
dims = OrderedDict()
dims['x'] = np.arange(4)
gridded_array(np.random.randn(4), dims)

masked_array(data = [-- -- -- --],
             mask = [ True  True  True  True],
             fill_value = 1e+20) 
```

我希望有一个未屏蔽的数组。我怀疑`dimensions`我传递的参数会在`masked_array.__init__`调用中传递，但由于我对 OOP 很陌生，所以我不知道如何解决这个问题。

任何帮助是极大的赞赏。

PS：我在 Python 2.7

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T10:04:57.967

*一句警告：如果您是 OOP 的新手，那么子类`ndarrays`化`MaskedArrays`并不是最简单的入门方法，到目前为止...*

首先，您应该去查看本[教程](http://docs.scipy.org/doc/numpy/user/basics.subclassing.html)。这应该向您介绍子类化所涉及的机制`ndarrays`。

`MaskedArrays`和 一样`ndarrays`，使用`__new__`创建类实例的方法，而不是`__init__`. 当你到达`__init__`你的子类时，你已经有了一个完全实例化的对象，实际的初始化委托给了`__array_finalize__`方法。简而言之：您`__init__`的标准 Python 对象无法正常工作。（*实际上，我想知道它是否被调用...之后`__array_finalize__`，如果我没记错的话...*）

既然您已经被警告过，您可能需要考虑是否真的需要经历子类化 a 的麻烦`ndarray`：

*   你的目标是什么`gridded_array`？
*   你应该支持的*所有*方法`ndarrays`，还是只支持一些？所有数据类型？
*   当您获取单个元素或对象的一部分时会发生什么？
*   你会`gridded_arrays`广泛使用 NumPy 函数的输入吗？

如果您有疑问，那么将 a （或 a ）作为属性（例如）设计`gridded_array`为通用类可能会更容易，并且只添加您需要在.`ndarray``MaskedArray``gridded_array._array``self._array`

## 建议

*   如果您只需要“标记”您的每个项目，您可能会对[pandas](http://pandas.pydata.org/)`gridded_array`感兴趣。
*   如果你只需要处理浮点数，`MaskedArray`可能有点矫枉过正：只是`nans`用来表示无效数据，很多 numpy 函数都有`nans`等价的。在最坏的情况下，您总是可以`gridded_array`在需要时屏蔽您的：查看`ndarray`with的子类`.view(np.ma.MaskedArray)`应该返回您输入的屏蔽版本......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T10:00:45.073

问题是`masked_array`使用`__new__`而不是`__init__`，所以你的`dimensions`论点被误解了。

要覆盖[`__new__`](http://docs.python.org/reference/datamodel.html#object.__new__)，请使用：

```
class gridded_array(ma.core.masked_array):
    def __new__(cls, data, dimensions, *args, **kwargs):
        self = super(gridded_array, cls).__new__(cls, data, *args, **kwargs)
        self.dimensions = dimensions
        return self 
```

# extjs - 在 XTemplate 中渲染自定义组件

> ID：12597830
> 
> 赞同：1
> 
> 时间：2012-09-26T08:44:08.140
> 
> 标签：extjs, extjs4, extjs4.1, extjs-mvc

```
Ext.define('GB.view.DigestList',{
    extend: 'Ext.panel.Panel',
    alias:'widget.digestlist',

            items:[ {
                xtype:'dataview',
                store: 'GB.store.Digests',
                tpl: new Ext.XTemplate(
                          '<tpl for=".">',
                            '<div class="container">',
                              '{name}',
                              '<div class="davidfun"></div>',
                            '</div>',
                          '</tpl>'
                ),      
                listeners: {
                    viewready: function(){
                        var home_d = Ext.create('GB.view.MyOwnDigest');
                        home_d.render(Ext.query('.davidfun')[0]);
                        // home_d.render(Ext.getBody()); <- it'll work fine with this line
                    },
                }
              }],

    bind: function(record, store) {
        this.getComponent(0).bindStore(record);
    }

});

Ext.define('GB.store.Digests', {
    extend:'Ext.data.Store',
    model: 'GB.model.Digest',
    data:[
        {'name':'name111'},
        {'name':'name222'}
    ]
}); 
```

有人知道为什么我不能通过 Ext.query('.davidfun')[0] 在 Xtemplate 中获得“davidfun”的 div 类，

它总是显示“未定义”，首先感谢您的回复:)

代码更新：

> > 问题解决了！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T10:23:12.497

您可以尝试数据视图的“viewready”事件。

请参阅我的示例[http://jsfiddle.net/2huvt/](http://jsfiddle.net/2huvt/)

# el - 表达式语言中的字符串比较是否区分大小写？

> ID：12597833
> 
> 赞同：0
> 
> 时间：2012-09-26T08:44:16.053
> 
> 标签：el

就这么简单。比较两个仅区分大小写的字符串

```
${"a" == "A"} 
```

返回真还是假？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T08:54:23.507

在 EL 中比较两个字符串时，比较始终区分大小写。如果你想做一个不区分大小写的字符串比较，你可以使用 equalsIgnoreCase 方法。

该比较将返回错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T10:42:34.233

它区分大小写，所以它会返回`false`。另一种对字符串进行不区分大小写比较的可能性是使用[JSTL 函数](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/fn/tld-summary.html)：

```
${fn:toLowerCase(stringA) == fn:toLowerCase(stringB)} 
```

这对旧版本的 EL 很有用。请参阅[https://stackoverflow.com/tags/el/info](https://stackoverflow.com/tags/el/info)并滚动到“调用非 getter 方法”。

# php - 如何为鼠标悬停编写 CSS

> ID：12597834
> 
> 赞同：-7
> 
> 时间：2012-09-26T08:44:19.413
> 
> 标签：php, html, css

> **可能重复：**
> [如何在 html-tag 中使用 CSS 悬停？](https://stackoverflow.com/questions/1834537/how-to-use-css-hover-inside-html-tag)

```
<body>
   <div id="he">
      <div id="header">
         <div class="headertabs">
            <ul class="nav">
               <li class="divide">&nbsp;</li>
               <li class="tab"><a href="a.php">OVERVIEW1</a></li>
               <li class="divide">&nbsp;</li>
               <li class="tab"><a href="a.php">OVERVIEW2</a></li>
</body> 
```

当我在overview1和overview2选项卡上移动鼠标（悬停）时如何编写css，它必须将其文本颜色更改为绿色。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T08:45:29.013

Simnply 使用 :hover 伪选择器：

```
li.tab a:hover
{
   color: green
} 
```

[http://jsfiddle.net/Kyle_/duj2d/](http://jsfiddle.net/Kyle_/duj2d/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T08:46:10.257

我从一个打开的文件中抓取了一些 CSS，应该可以很好地解释它：

这是我的锚的正常 CSS：

```
a
{
    color: #006699;
    text-decoration: underline;
} 
```

这是当它悬停时改变颜色的位。

```
a:hover
{
    text-decoration: none;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T08:52:02.803

另一种方式

```
li a:hover{
 color:green;
}​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T08:47:07.917

为了更好的 IE 支持，我将鼠标悬停在IE 上`<a>`，我还将更改焦点颜色，以便在通过链接切换时仅对键盘用户进行更改，因此：

```
.tab a:hover, .tab a:focus {
  color: green
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T11:06:45.627

短一点：

```
 .tab a:hover{color:green} 
```

# jquery-plugins - 如何在 jquery 插件中使用事件和事件处理程序？

> ID：12597837
> 
> 赞同：1
> 
> 时间：2012-09-26T08:44:24.397
> 
> 标签：jquery-plugins, event-handling, jquery

我正在尝试构建一个简单的动画 jQuery 插件。主要思想是获取一个元素并以某种方式在固定的间隔内重复操作它，这将是动画的 fps。

我想通过事件来实现这一点。我不想使用 for() 或 while() 之类的循环，而是想通过触发事件重复某些操作。这背后的想法：我最终希望能够对某些事件调用多个动作，例如在第一个动画完成时启动第二个动画，或者甚至在一个动画序列在某个帧上时启动它。

现在我尝试了以下（非常简化的插件版本）：

```
(function($) {
    $.fn.animation = function() {
        obj = this;
        pause = 1000 / 12; //-> 12fps

        function setup(o) {
            o.doSomething().trigger('allSetUp');
        }

        function doStep(o, dt) {
            o.doSomething().delay(dt).trigger('stepDone');
        }

        function sequenceFinished(o) {
            o.trigger('startOver');
        }

        function checkProgress(o) {
            o.on({
                'allSetup': function(event) {
                    console.log(event); //check event
                    doStep(o, pause);
                },
                'stepDone': function(event) {
                    console.log(event); //check event
                    doStep(o, pause);
                },
                'startOver': function(event) {
                    console.log(event); //check event
                    resetAll(o);
                }
            });
        }

        function resetAll(o) {
            /*<-
                reset stuff here
            ->*/
            //then start over again
            setup(o);
        }

        return this.each(function() {
            setup(obj);
            checkProgress(obj);
        });
    };

})(jQuery); 
```

然后我这样调用动画：

```
$(document).ready(function() {
    $('#object').animation();
}); 
```

然后——什么都没有发生。没有事件被触发。我的问题：为什么？不能在 jQuery 插件中使用这样的事件吗？我是否必须在 $(document).ready() 中“手动”触发它们（我不喜欢，因为这将是完全不同的事情——从插件外部控制动画。相反，我想使用事件在插件内部具有一定程度的“自我控制”）。我觉得我错过了一些关于自定义事件的基本知识（注意：我对此还是很陌生）以及如何使用它们......

感谢您的帮助。

**解决方案：**

事件处理和触发确实有效，我只需要先调用 checkProgress 函数：

代替

```
return this.each(function() {
  setup(obj);
  checkProgress(obj);
}); 
```

我不得不这样做：

```
return this.each(function() {
  checkProgress(obj);
  setup(obj);
}); 
```

所以必须在任何事件被触发之前调用事件监听函数，这当然很有意义......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T09:13:22.127

例如，您需要在 DOM 模型上设置事件：

```
$('#foo').bind('custom', function(event, param1, param2) {
    alert('My trigger')

});

$('#foo').on('click', function(){  $(this).trigger('custom');});​ 
```

您的 DOM 元素应该知道他应该何时触发您的触发器。

请注意，在您的插件中，您不会调用任何内部函数 -`ONLY DECLARATION`

# java - 如何删除气氛广播

> ID：12597838
> 
> 赞同：3
> 
> 时间：2012-09-26T08:44:27.567
> 
> 标签：java, websocket, atmosphere

需要你的建议，请。我的系统是关于客户端程序和网络服务的。客户端是某些事件的实例化者，它们向 Web 服务发送消息，对其进行处理并在完成后广播回来。我需要做的是关闭服务器端的 web-socket 连接，并清理资源。现在，当我关闭码头时，我可以看到所有广播公司仅在该步骤被删除。如果我向一个客户发送 10 条消息，我会得到 10 个广播公司挂在网络服务上。在广播器上尝试了 .destroy() ，但并没有真正看到它工作，还尝试在客户端破坏连接，但也没有成功。

我的订阅是：

```
@GET
@Suspend
public SuspendResponse<String> subscribe(){
....
Broadcaster broadcaster = BroadcasterFactory.getDefault().get("/"+path+"/"+id);

            ...somecallback here....
                        @Override
                        public void onMessage(String message) {
                             broadcaster.broadcast(message);
                             //here I want to destroy broadcaster and cleanup resources.
                        }

    return new SuspendResponse.SuspendResponseBuilder<String>()
        .broadcaster(broadcaster)
        .outputComments(true)
        .build();
} 
```

我认为，这种方法也可能是错误的，还有其他方法可以使事情正常进行。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T12:30:39.013

只需添加以下 web/application.xml 元素

```
 <init-param>
      <param-name>org.atmosphere.cpr.broadcasterLifeCyclePolicy</param-name>
      <param-value>IDLE_DESTROY</param-value>
  </init-param> 
```

有关更多信息，请参阅[本页](https://github.com/Atmosphere/atmosphere/wiki/Understanding-Broadcaster)底部。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-13T09:42:07.853

您还可以使用策略 EMPTY_DESTROY，如果没有与此广播者关联的 AtmosphereResource，它将删除广播者。

您可以在 web.xml 中配置它，如@jfarcand 所述或以编程方式如下所示

```
Broadcaster b = broadcasterFactory.get();
b.setBroadcasterLifeCyclePolicy(BroadcasterLifeCyclePolicy.EMPTY_DESTROY); 
```

# iphone - 将我的 UIView 添加到 Storyboard 中的 ViewController

> ID：12597843
> 
> 赞同：0
> 
> 时间：2012-09-26T08:45:11.603
> 
> 标签：iphone, objective-c, ios, xcode, storyboard

我是 iPhone 开发的新手。

我在情节提要中有一个 UIViewController，其中包含一个滚动视图。

我想在上面放两个 UIImageViews 和一些 UILabels。

我的想法是：创建一个 .xib 文件。在上面放一个 UIView，然后在这个 UIView 上设置我的 UIImageview 和标签。

最后将作为 .xib 文件的 UIView 添加到我的 UIScrollView。

这是个好主意吗？如果不是你的建议是什么。

直到现在我无法让它工作。这是我的代码：

```
OfferUIView *newPageView = [[OfferUIView alloc] init];      // UIView that I created as .xib
self.newPageView.contentMode = UIViewContentModeScaleAspectFill;
newPageView.frame = frame;
[self.scrollView addSubview:newPageView];
[self.pageViews replaceObjectAtIndex:page withObject:newPageView]; 
```

你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T08:49:19.640

我知道这听起来很愚蠢，但是您是否尝试过删除`self`from `self.scrollView`and `self.pageViews`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:51:03.840

您是如何创建 .xib 文件的？它应该是**UIView**的子类。希望您没有将其创建为 UIViewController 的子类的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T10:17:48.353

我找到了答案：

```
NSArray *views = [[NSBundle mainBundle] loadNibNamed:@"OfferView" owner:self options:nil];
UIView *newPageView = [views lastObject]; 
```

# ruby-on-rails - Rails：尝试呈现为 JSON 时 attr_accessor 不显示

> ID：12597844
> 
> 赞同：4
> 
> 时间：2012-09-26T08:45:14.117
> 
> 标签：ruby-on-rails, ruby, json, oop, model

在我的应用程序中，我有一个模型如下；

```
class Init < ActiveRecord::Base
  attr_accessor :clientAvailability
  attr_accessible :returnCode, :returnMessage, :tokenCode, :updateURL
end 
```

在这里，当我稍后添加 **attr_accessor** 以及尝试应用 **render json: init** 时，即使我已将其设置为，它也不会显示 **clientAvailability** 属性；

```
init=Init.new
init.clientAvailability="3" 
```

当我**调试**它时，我可以看到它已设置，但当我尝试将它呈现为 json 时并没有简单地显示出来。我错过了什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-26T08:54:48.213

clientAvailability 是数据库中的一列吗？如果不是，那么我认为这是默认方式 - 仅序列化 DB 属性。但你可以这样做：

```
render json: init, methods: [:clientAvailability] 
```

包括 clientAvailability 属性。

# facebook - 如何检索页面名称中包含特殊字符的页面

> ID：12597846
> 
> 赞同：0
> 
> 时间：2012-09-26T08:45:21.527
> 
> 标签：facebook, facebook-graph-api

尝试使用 Jquery/Ajax 调用使用 Facebook 图形 API 检索一般页面信息。在我请求一个名称中包含特殊字符或破折号的页面之前，这可以完美地工作。

在 ajax 请求期间，特殊字符似乎是 ANSI 编码的，因此名称格式错误并且无法找到页面。我找不到避免这种情况的方法。

示例网址：[https](https://graph.facebook.com) : //graph.facebook.com /Musée-de-la-Photographie-Charleroi?access_token=[my_access_token]

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T14:36:53.687

> 在 ajax 请求期间，特殊字符似乎是 ANSI 编码的，因此名称格式错误并且无法找到页面。

不，我不认为这是问题所在。

正如您从[https://developers.facebook.com/tools/explorer?method=GET&path=18521449287](https://developers.facebook.com/tools/explorer?method=GET&path=18521449287)看到的那样，此页面还没有设置*用户名*- 因为它不能通过 just 访问`www.facebook.com/Musée-de-la-Photographie-Charleroi`，但只能通过`www.facebook.com/pages/Musée-de-la-Photographie-Charleroi/18521449287`包含页面ID。

因此，关于 Graph API 上的页面信息也只能通过页面 id 获得。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T12:47:46.110

我认为您应该在 contentType 参数中测试不同的值。它允许设置字符编码。看看这里： [http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-27T22:54:55.207

尝试改用 page_id（在本例中为 131141113604635）。

```
https://graph.facebook.com/131141113604635?access_token=[my_access_token] 
```

您可以通过在浏览器上打开页面并按 Ctrl+U、Ctrl+F 并搜索“page_id”值来获取此 ID。

# ant - ant文件中的绑定标签出错

> ID：12597848
> 
> 赞同：-1
> 
> 时间：2012-09-26T08:45:25.240
> 
> 标签：ant

使用 ant 构建应用程序 jar 时出现此错误

问题：创建任务或类型绑定失败原因：名称未定义。行动：检查拼写。行动：检查是否已声明任何自定义任务/类型。行动：检查任何/声明已经发生。

这是一个片段是我的 build.xml 文件：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:36:18.760

您的`<bind verbose="true" load="true" binding="mdb-src/com/arj/sms/xmlHandler/mapping/binding.xml">`

需要 JiBX 绑定编译器的任务定义。就像任何其他自定义 Ant 任务一样。更清楚地说，它`bind`不是您所说的“ant 标签”，也不是 ant 语法的“一部分”。你需要定义它：

`<taskdef name="bind" ..`+ 类名/类路径/文件集等。

你拥有了它？

如果有，请确保任务定义具有指向 JiBX 安装的 lib 目录的正确路径。另请注意，如果 JiBX 安装路径包含空格字符，某些版本的 Ant 可能无法正常工作。

祝你好运。

# javascript - 在另一个选项卡中调用 showModalDialog 时，onLoad 未执行

> ID：12597849
> 
> 赞同：2
> 
> 时间：2012-09-26T08:45:27.250
> 
> 标签：javascript, onload, showmodaldialog

**概述：** 我的应用程序检测到用户在特定时间段内没有做任何事情，然后加载一个带有倒数计时器的对话框。这给了用户 2 分钟的反应时间，否则他会自动注销。

我这样调用倒数计时器对话框： `window.showModalDialog("/webapp1/html/timeout_popup.htm",items,"dialogHeight: 170px; dialogWidth: 400px; help: 0; status: 0");`

问题：问题在于，如果应用程序在用户当前关注的不同选项卡 (IE 9) 中运行，则选项卡只会闪烁，但倒数计时器在用户单击选项卡之前不会启动。

我知道`body.onLoad`在创建对话框之前事件不会触发，但我希望计时器在此期间仍然倒计时。

`HEAD`我已经尝试在&标签内放置警报`SCRIPT`，但这只会在我单击选项卡后触发。

# c# - 如何在解决方案中使用 WCF 服务库

> ID：12597852
> 
> 赞同：0
> 
> 时间：2012-09-26T08:45:30.197
> 
> 标签：c#, visual-studio

我知道如何使用 WCF 创建一个宁静的 Web 服务。如果我将服务创建为“WCF 服务库”并在解决方案中实现它，当它不是主项目时如何激活它？

我正在使用 N 层架构。webservice 应该可以访问它下面的一些层，而来自外部的客户端应该能够调用 webservice。

就我而言，托管服务的最佳方式是什么？视窗服务？信息系统？自托管？

多谢你们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T08:51:54.670

我认为你可以通过两种方式做到这一点：

*   如果您愿意，Visual Studio 可以为您托管服务（它应该自动设置）

![Visual Studio WCF 配置](../Images/4c7dbc7846ccb5bfdc7757ade9aa865b.png)

*   创建一个单独的控制台项目，用于托管 WCF 服务。然后将解决方案更改为具有多个启动项目，以便您可以同时启动您的应用程序和 WCF 控制台。更多关于自助托管的信息[在这里](http://msdn.microsoft.com/en-us/library/ms731758.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:51:58.670

您可以配置一个解决方案来启动多个项目。这是此的[MSDN](http://msdn.microsoft.com/en-us/library/ms165413%28v=vs.80%29.aspx)链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T11:53:33.343

Thera 有多种托管 wcf 服务的选项，每个选项背后的理论都在此处详细说明

[http://msdn.microsoft.com/en-us/library/ms730158.aspx](http://msdn.microsoft.com/en-us/library/ms730158.aspx)

看起来您没有任何托管代码，在这种情况下，使用 iis 托管是您的最佳选择，因为所有其他选项都要求您拥有一些托管代码，即主入口点。

对于 iis，您只需按照以下文章 [http://www.codeproject.com/Articles/150066/Create-Host-Self-Hosting-IIS-hosting-and-中的 iis 托管部分中的说明创建一个 Web 应用程序项目消费-W](http://www.codeproject.com/Articles/150066/Create-Host-Self-Hosting-IIS-hosting-and-Consume-W)

# ruby-on-rails - 将 JOIN 查询转换为 Rails 活动记录关联

> ID：12597854
> 
> 赞同：0
> 
> 时间：2012-09-26T08:45:41.833
> 
> 标签：ruby-on-rails, associations

我有 3 种不同的型号

```
class GroupMember < ActiveRecord::Base
attr_accessible :group_id, :user_id, :owner_id
has_one :user
end

class Group < ActiveRecord::Base
attr_accessible :name, :owner, :permission
has_many :groupMembers
end

class User < ActiveRecord::Base
end 
```

当我在**groups_controller.rb**中时，我想通过关联实现以下查询

```
SELECT * FROM groups 
LEFT JOIN  group_members ON groups.id = group_members.group_id 
LEFT JOIN users ON group_members.user_id = users.id WHERE users.id = 1 
```

或连接查询

```
Group.joins('LEFT JOIN  group_members ON groups.id = group_members.group_id LEFT JOIN users ON group_members.user_id = users.id').where('users.id = ?', current_user.id ); 
```

这可能吗？

```
 Group.joins(:user_id => current_user.id) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T10:40:36.500

我相信这是可能的，但是一旦我没有带有这些表的数据库，就很难进行测试。大概是这样的：

```
Groups.joins(:group_members, :user).merge(User.where(:id => current_user.id)) 
```

* * *

但是设计有点奇怪。我想您想获取某个用户的所有组，最好这样：

```
@user = User.find_by_id(current_user.id)
@groups = @user.groups 
```

为此，您应该`groups`在您的用户模型中有关联。

我也不清楚你为什么有`GroupMember has_one :user`. 我知道组成员仅与一个用户相关，但是一个用户可以表示为不同组的多个组成员吗？如果是，那么 Rails 的设计方法是：

```
class GroupMember < ActiveRecord::Base
  attr_accessible :group_id, :user_id, :owner_id
  belongs_to :user
  belongs_to :group
end

class Group < ActiveRecord::Base
  attr_accessible :name, :owner, :permission
  has_many :group_members
  has_many :users, :through => :group_members
end

class User < ActiveRecord::Base
  has_many :group_members
  has_many :groups, :through => :group_members
end 
```

# ios5 - 未知类型的视图

> ID：12597857
> 
> 赞同：0
> 
> 时间：2012-09-26T08:45:54.863
> 
> 标签：ios5, view

我正试图在我的应用程序像这样启动后显示一个自定义视图。

![自定义视图](../Images/dac9357b7e5057d48733d23030fdb7c0.png)

我不知道要创建什么样的视图，以及如何以这种方式实现它

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T13:31:28.017

[KGModal](https://github.com/kgn/KGModal)可能是一个好的开始。

正如开发人员所说：

> KGModal 是一个简单的控件，允许您在模式弹出窗口中显示任何视图。模态将自动缩放以适应内容视图，并在屏幕上以漂亮的动画居中！

这是一个屏幕截图：

![KG模态](../Images/b9977ba29bac347ffaf05804fba8ce91.png)

# django - 如何根据 Django 中的用户类型限制对页面的访问

> ID：12597864
> 
> 赞同：3
> 
> 时间：2012-09-26T08:46:16.703
> 
> 标签：django, django-templates, django-views

我有一个对新 Django 开发人员有用的基本问题。

我在 Django 中创建了自己的 UserProfile。此用户配置文件有一个名为“类型”的特定字段。该字段可以有两个值（直到现在可能会更多）：男 - M / 女 - F：

```
from django.contrib.auth.models import User

GENDER = (
    (M, 'Male'),
    (F, 'Female'),
)

class UserProfile(models.Model):
    user = models.OneToOneField(User)
    type = models.CharField( max_length=2,
                             choices=GENDER,
                             default='F') 
```

基本上，我想允许访问以限制访问或根据用户类型调整页面内容。到目前为止，我使用了一种非常基本的初学者方法，即在视图中测试用户类型，然后处理页面：

```
def OnePage(request):
    if request.user.type == 'M':
        ....
    else if request.user.type =='F':
        .... 
```

然后我还需要根据用户类型调整呈现的模板：男性用户不会拥有与女性用户相同的个人资料页面。

我确信有更好的方法可以做到这一点，但作为一个 Django 初学者，我对所有 Django 的可能性感到迷茫。因此，如果您有任何最佳实践来实现这一点，请告诉我（显然我想要一个可以在每个视图上使用的 DRY 代码！）

感谢您的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T10:23:56.240

要限制访问，请使用[用户通过测试](https://docs.djangoproject.com/en/dev/topics/auth/#limiting-access-to-logged-in-users-that-pass-a-test)装饰器：

```
from django.contrib.auth.decorators import user_passes_test

male_only = lamda u: u.type == 'M'
female_only = lamda u: u.type == 'F'

@user_passes_test(male_only)
def myfunc(request):
   pass

@user_passes_test(female_only)
def myotherfunc(request):
   pass 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T10:02:03.783

一种解决方案可能是根据用户类型更改基本模板名称：

```
@render_to('some_template.html')
def some_view(request):
    base_template = 'base_%s.html' % request.user.profile.type
    # …
    return {
        'base_template': base_template,
    } 
```

在您的模板中：

```
{% extends base_template %}
{% block some-block %}
…
{% endblock %} 
```

如果您需要在每个视图上执行此操作，您可以使用中间件来设置此值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T09:37:16.773

要向用户添加额外数据，请参阅

[存储有关用户的附加信息](https://docs.djangoproject.com/en/1.4/topics/auth/#storing-additional-information-about-users)

然后将配置文件添加到您的上下文中，您可以在模板中使用 {{profile}} 变量

```
{% if profile.type == "F" %}
    blah, blah
{% else %}
    blah, blah
{% endif %} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T10:32:49.920

根据你想要做什么，如果你需要为不同的性别使用非常不同的 html，你可以尝试这种方法：

```
def gender_filter(func):
    def _view(request,*args,**kwargs):
        res=func(request,*args,**kwargs)
        if request.user.get_profile().type=='F':
            res.template_name='template_f.html'
            res.context_data['gender']='female'
        elif request.user.get_profile().type=='M':
            res.template_name='template_m.html'
            res.context_data['gender']='male'
        return res.render()
    return _view

@gender_filter
def my_view(request):
    t=TemplateResponse(request,'template_f.html',{...})
    return t 
```

因此，不是在视图中返回 Http 响应，而是可以让它们返回[TemplateResponse](https://docs.djangoproject.com/en/1.3/ref/template-response/)对象并使用装饰器来更改模板，在一般上下文中添加，然后将它们转换为 HttpResponse。

或类似权限检查的东西：

```
def gender_only(gender):
    def _dec(func):
        def _view(request,*args,**kwargs):
            if request.user.get_profile().type==gender
                return func.render(request,*args,**kwargs)
            else:
                raise Exception("You do not have the right gender")
        return _view
    return _dec

@gender_only('F')
def my_view(request):
    ...
    return render_to_response('template.html',{...},context_instance=RequestContext(request)) 
```

# ios - 如何在 xcode 4.5 的初始视图的标签栏控制器中重新排序 segues？

> ID：12597870
> 
> 赞同：20
> 
> 时间：2012-09-26T08:46:52.397
> 
> 标签：ios, xcode, uitabbarcontroller, storyboard, uitabbar

如何重新排序初始视图的选项卡栏控制器元素，而不必删除所有 segue 并以所需的顺序手动重新连接它们？有没有办法在它们连接后改变它们的顺序？

我可以通过在 xcode 4.4 中拖动它们来做到这一点，但该选项在 xcode 4.5 中似乎不可用。

希望这可以从情节提要模式中实现。但是，如果只能以编程方式进行，那也没关系，只需寻找任何适当的方法来完成此操作，而不必将它们全部删除并重新连接起来。![在此处输入图像描述](../Images/6d8d715b373685d343e292b22081d173.png)

例如，我如何将“主页”项目移动到第一个位置？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-09-26T09:14:03.517

每个视图中的位置与标签栏控制器底部栏上的位置相关联。如果您重新排序该栏，您将重新排序您的视图。您可以通过在界面构建器上拖放来重新排序它们。

在您的示例中，只需在选项卡栏控制器中选择主页并将其拖动到第一个位置。

如果您在拖放时遇到问题，请先尝试选择您的选项卡视图控制器或退出您的 XCode 并再次打开它（如@thepumpkin1979 和@Rick 指出的）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-28T14:38:57.367

![重新排列 tabBar 图标/项目](../Images/e0a5ecdf33bbbc16624be1d8c21e135e.png)只需编辑 xml 文件即可。

单击“故事板”，然后单击“编辑器”中 3 个按钮中最右侧的按钮。

这将在左侧显示一个 xml 文件，您可以随意编辑该文件。

在那个文件里面你应该看到xml标签“tabBar”，里面是“items”，里面是“tabBarItem”。您的所有 tabBar 项目将被列出。您可以按照您希望的顺序剪切和粘贴它们。

我现在只是在 Xcode 4.5.2 中做到了。

希望它也对你有用。

附言。我是 iOS 新手，所以我不能使用所有正确的 Xcode 名称。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-05-20T07:09:31.160

我认为您可以控制+拖动选项卡项目以重新排序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-08T14:50:04.760

拖放应该可以工作

您可以将条形项目拖动到左侧以从情节提要重新排列其位置。

# java - java强制开发人员处理未经检查的异常

> ID：12597872
> 
> 赞同：1
> 
> 时间：2012-09-26T08:46:56.763
> 
> 标签：java, exception-handling, unchecked

有没有办法让开发人员用户处理代码中的所有未经检查的异常，以便在处理所有未经检查的异常之前代码不会编译？我想强制用户处理异常，例如

```
iterator.next() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T08:51:29.683

不，你不能。通常，如果您想强制用户处理未检查的异常，您可以手动捕获它们并将它们包装在已检查的异常中

例如

```
Integer a;
try {
    a = 1;
}
catch (NullPointerException e) {
     throw new Exception(e);
} 
```

a 为 null 将抛出 NPE。然后将其包裹在一个已检查的`Exception`. （这里的异常可能太通用了，所以您可能必须创建自己的检查异常类）

这种模式的问题在于，您必须到处检查可能存在未经检查的异常的地方。这些没有被声明为方法签名的一部分，因此它可能意味着通过 API 拖网。

或者你可能更脏，并且有很多 try/catch 块可以 catch `Exception`。Exception 是 RuntimeException 的超类，因此它会捕获未经检查的异常。

我不确定你想做的是正确的方法。未经检查的异常通常是程序员错误，因此确实应该被捕获。它们通常是代码中的错误。（关于未经检查/检查的异常的观点存在大量争论，您可以用谷歌搜索）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T08:54:13.613

不，您不能完全强制用户处理未经检查的**异常**，这不是未经检查的异常的含义。对于强制处理，有**检查异常**。但是，您可以要求用户处理程序中的所有异常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T09:41:25.463

不，你不能。AFAIK 最好的机会是使用[关闭挂钩](http://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html#addShutdownHook%28java.lang.Thread%29)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T08:49:41.223

不，你不能强迫用户这样做，你可以很好地问他......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T08:51:10.263

不。

编译器将如何做到这一点？由于这些异常是未经检查的，它们没有在方法签名中声明（大部分情况下），那么它如何知道需要处理什么？

# security - 防止非正版客户端与服务器交互的技术

> ID：12597876
> 
> 赞同：1
> 
> 时间：2012-09-26T08:47:02.930
> 
> 标签：security, authentication, client-server

> **可能重复：**
> [如何确保 .Net 应用程序是正版的？](https://stackoverflow.com/questions/3774128/how-to-ensure-a-net-application-is-genuine)

我似乎找不到任何关于此的好文章。在客户端/服务器环境中，有什么方法可以确保连接的客户端没有被篡改？

我能想到的唯一两件事是：

1.  在真正的客户端中包含一个用于身份验证的密钥，以防止完全重写客户端

2.  监控客户我认为偏离真正客户所做的行为

[1] 不会阻止黑客攻击，只会重写。另外，大概您最终可以通过查看字节码找到密钥？

[2] 可能非常棘手，有时还很主观

除了上述两种之外，还有已知的技术吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T10:33:38.077

[如何确保 .Net 应用程序是正版的？](https://stackoverflow.com/questions/3774128/how-to-ensure-a-net-application-is-genuine)

看起来这个已经被覆盖了，答案是响亮的：“没有好办法”

随意关闭这个问题。

# maven - 即使脚本使用“开始”，使用 Maven exec 插件启动 Windows 批处理脚本也会阻止构建

> ID：12597879
> 
> 赞同：25
> 
> 时间：2012-09-26T08:47:16.187
> 
> 标签：maven, maven-3, exec-maven-plugin

我正在尝试在自定义容器的顶部执行我的应用程序部署的集成测试。由于我的容器是自定义的，我不能使用 Maven Cargo 插件来设置容器。

我的容器：

*   必须通过适当的 bat 文件启动，该文件位于运行测试的机器的路径中。
*   可以手动关闭，因为我有一个包含所有集成测试的 maven 模块，即使有一天我想知道在测试完成后如何关闭进程。

我的问题是我必须在不同的进程中运行我的容器，因为它需要在执行测试时继续运行。此外，我的测试中有一个 API，可以让我等待容器准备好（一种超时查找）。

我已将以下几行添加到我的 pom.xml

```
 <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>exec-maven-plugin</artifactId>
            <version>1.1</version>
            <executions>
                <execution>
                    <phase>pre-integration-test</phase>
                    <goals>
                        <goal>exec</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <executable>scripts/start-agent.bat</executable>
            </configuration>
        </plugin> 
```

这将调用一个脚本，其中仅包含

> 开始调用 gs-agent.bat

但是 mvn exec 插件被卡住了，我的测试没有运行。根据[如何从我的 Java 应用程序运行批处理文件中的建议？](https://stackoverflow.com/questions/615948/how-do-i-run-a-batch-file-from-my-java-application)，我修改了我的 pom.xml 如下：

```
 <configuration>
                <executable>cmd</executable>
                <arguments>
                    <argument>/C</argument>
                    <argument>start</argument>
                    <argument>gs-agent.bat</argument>
                </arguments>
            </configuration> 
```

但这似乎并不能解决问题：

![马文停了下来](../Images/2d3cf514acdba62bb45ce7e36e90c3c8.png)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-26T15:11:46.113

exec 插件无法做到这一点，我也发现了它的问题：http: [//jira.codehaus.org/browse/MEXEC-87](http://jira.codehaus.org/browse/MEXEC-87)（由于codehaus rampdown，链接现在失效，可以从[网络档案](http://web.archive.org/web/20150506051628/http://jira.codehaus.org/browse/MEXEC-87)中找到）

在上面链接的 jira 问题中，有[一个 fork for exec 插件的提及和链接，该插件将具有功能](https://github.com/ispringer/exec-maven-plugin)。

除此之外，我认为您暂时需要使用 antrun-plugin。

这是一个取自工作配置并使用`mvn verify`. 这需要在`<plugins>`, 而不是`<pluginManagement>`（exec 可以驻留在 pluginmanagement 中就好了）。

```
<plugin>
   <groupId>org.apache.maven.plugins</groupId>
   <artifactId>maven-antrun-plugin</artifactId>
    <version>1.6</version>
    <executions>
        <execution>
            <phase>pre-integration-test</phase>
            <configuration>
                <target>
                    <exec executable="cmd.exe"
                          spawn="true">
                        <arg value="/c"/>
                        <arg value="D:\myfolder\test.bat"/>
                    </exec>
                </target>
            </configuration>
            <goals>
                <goal>run</goal>
            </goals>
       </execution>
   </executions>      
</plugin> 
```

请注意，`spawn="true"`如果您不想阻止执行，就像问题中指定的那样，这是关键。如果您确实希望它阻止并立即查看输出，请将其设置为 false。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-26T13:51:32.053

请参阅此问题：[如何从我的 Java 应用程序运行批处理文件？](https://stackoverflow.com/questions/615948/how-do-i-run-a-batch-file-from-my-java-application)

Windows 批处理文件不可执行。它们是由`cmd`可执行文件运行的脚本。

**更多信息**

Exec 插件[源代码](http://svn.codehaus.org/mojo/tags/exec-maven-plugin-1.2.1/src/main/java/org/codehaus/mojo/exec/ExecMojo.java)显示[Apache Commons Executor](http://commons.apache.org/exec/apidocs/org/apache/commons/exec/Executor.html)用于实际执行命令行。

您可以在这里阅读大量内容，即在 Apache Commons Executor 文档及其[JIRA 问题](https://issues.apache.org/jira/browse/EXEC)中，但简短的版本是：这不是“Maven”的问题，而是依赖于平台的性质的问题执行`exec()`命令。

我以前解决过这类问题，我一直设计的解决方案是将`.bat`脚本解构为其实际命令并直接从`exec`插件启动它，而不是调用脚本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-01T14:14:50.723

Fallowing Code 对我有用

```
<plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-antrun-plugin</artifactId>
        <version>1.3</version>
        <executions>
            <execution>
              <phase>generate-sources</phase>
                <configuration>
                    <tasks>
                        <exec dir="${project.basedir}" executable="Script.bat"  failonerror="true">
                        </exec>
                    </tasks>
                </configuration>
                <goals>
                    <goal>run</goal>
                </goals>
       </execution>
   </executions>      
</plugin> 
```

来源[https://maven.apache.org/guides/mini/guide-using-ant.html](https://maven.apache.org/guides/mini/guide-using-ant.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-03T04:45:26.020

就我而言，我在使用 npm 和 ng.. 时遇到了问题。根本问题是`exec-maven-plugin`试图执行 sh 脚本（没有扩展名）。

重命名

`C:\Users\User\AppData\Roaming\npm\ng`至`C:\Users\User\AppData\Roaming\npm\ng.sh`

和

`C:\apps\nodejs\npm`至`C:\apps\nodejs\npm.sh`

解决了这个问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-07T17:46:11.943

如果您想使用**exec-maven-plugin**，这里有一个使用参数运行批处理脚本的示例。例如运行类似的东西：

```
.\test.bat arg1 arg2 arg3 
```

将以下内容添加到 pom.xml：

```
 <plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>exec-maven-plugin</artifactId>
    <version>1.6.0</version>
    <executions>
        <execution>
            <id>exec-test</id>
            <phase>prepare-package</phase>
            <goals>
                <goal>exec</goal>
            </goals>
        </execution>
    </executions>
    <configuration>
        <executable>cmd</executable>
        <workingDirectory>./</workingDirectory>
        <arguments>
            <argument>/c</argument>
            <argument>start</argument>
            <argument>""</argument>
            <argument>exec.bat</argument>
            <argument>arg1</argument>
            <argument>arg2</argument>
            <argument>arg3</argument>
        </arguments>
    </configuration>
  </plugin> 
```

# php - 跟踪类型的错误 mySql PDO php

> ID：12597880
> 
> 赞同：0
> 
> 时间：2012-09-26T08:47:19.840
> 
> 标签：php, mysql, pdo

我想跟踪使用 PDO 准备和执行执行查询时发生的错误类型。

例如，如果我必须插入电子邮件、姓名、出生日期，并且电子邮件需要唯一，而不是编写特殊查询来检查电子邮件是否已被使用，我想跟踪发生的错误并知道相同的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T08:54:30.310

您可以在插入查询周围使用 try/catch 块并在异常处理程序中处理双重电子邮件。

```
$sql = "INSERT INTO `mystuff` (email, name ) VALUES (:email, :name)";

try {
  $sth = $dbh->prepare($sql);
  $sth->execute(array(':email' => $email, ':name' => $name)); 
}
catch (Exception $e)  {
  echo 'email already taken';
} 
```

当然，您必须配置 PDO，使其在错误时引发异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T08:55:23.007

首先，您将配置您的数据库以放置一个`UNIQUE KEY`

```
ALTER TABLE yourtable ADD CONSTRAINT uniqukey_for_mail  UNIQUE(email); 
```

然后您将使用带有 ERRMODE_EXCEPTION 的 PDO

```
$bddConnect = new PDO('dsn',$user,$password);
$bddConnect->setAttribute(PDO::ATTR_ERRMOD,PDO::ERRMOD_EXCEPTION); 
```

然后，当您更新或插入数据时，您只需使用 try/catch 包装查询，并检查您的错误是否违反约束

```
try{
    $bddConnect->exec("UPDATE yourtable SET email='already in table EMAIL' WHERE
   id='other id than the one that has the email'");
}catch(PDOException $e){
    if(strpos('constraint violation',$e->getMessage())!==false){
       echo "already taken";
    }
} 
```

# wordpress - Wordpress：小型编辑器不存储数据

> ID：12597884
> 
> 赞同：0
> 
> 时间：2012-09-26T08:47:36.813
> 
> 标签：wordpress, tinymce

我试图在我的主题选项中保存来自微型编辑器的数据，但它没有保存。这是我的完整案例

```
case 'tiny':

    $tinysettings = array(
        'editor_class' => 'theme_editor',
        'tinymce' => array(
            'theme_advanced_buttons1' => 'bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,bullist,numlist,link,unlink,anchor,|,blockquote',
            'theme_advanced_buttons2' => 'formatselect,forecolor,|,image,|,sub,sup',
            'theme_advanced_buttons3' => '',
            'theme_advanced_buttons4' => '',
            'width' => '450',
            'height' => '200',
        ),
    );

?>

    <div class="options_input options_textarea">
        <div class="options_desc"><?php echo $value['desc']; ?></div>
        <span class="labels"><label for="<?php echo $value['id']; ?>"><?php echo $value['name']; ?></label></span>

        <div class="tiny-editor">
            <?php wp_editor( '', $value['id'], $tinysettings ); ?>
        </div>
    </div>
<?php
break; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-30T17:37:51.333

在

```
<?php wp_editor( '', $value['id'], $tinysettings ); ?> 
```

第一个参数是编辑器的实际内容，但您将其设置为空字符串。如果您将内容保存在名为 $content 的变量中，那么这将起作用：

```
<?php wp_editor( $content, $value['id'], $tinysettings ); ?> 
```

# asp.net - 另一个 UserControl 中的 AJAX ModalPopupExtender 中的 UserControl

> ID：12597885
> 
> 赞同：1
> 
> 时间：2012-09-26T08:47:40.367
> 
> 标签：asp.net, vb.net, user-controls, asp.net-ajax, modalpopupextender

我正在开发一个 ASP.NET（使用 Visual Basic）Web 应用程序。

两天来我一直在尝试制作用户控件，但我遇到了一个我无法解决的问题。

我有一个我想用一个对象填充的 FormView，我从另一个用户控件获得。当我单击 ImageButton 时，第二个用户控件必须显示在 ModalPopupExtender 中。这可以正常工作。但是，当我使用控件时，模式弹出窗口会关闭。

我在 ModalPopupExtender 和其他 .aspx 页面中使用相同的用户控件，并且它工作正常，所以我不认为错误来自它。仅当用户控件和 ModalPopupExtender 在另一个控件中使用时才会失败。

我向您展示一些屏幕截图以更容易解释：

www.noelshack.com/2012-39-1348649045-1.png

1：.aspx 网页，2：显示弹出窗口的按钮，3：.ascx 用户控件，4：关闭弹出窗口的按钮

此配置正常工作：我可以使用我的用户控件，并且仅在必须关闭弹出窗口时才关闭。

www.noelshack.com/2012-39-1348649045-2.png

1：.ascx 用户控件，2：显示弹出窗口的 ImageButton，3：.ascx 用户控件，4：关闭弹出窗口的按钮

带有控件的弹出窗口已正确打开，但是当我尝试使用控件搜索时（单击“RECHERCHER”），弹出窗口已关闭。

www.noelshack.com/2012-39-1348649045-3.png

然后，如果我再次单击显示弹出窗口的 ImageButton

www.noelshack.com/2012-39-1348649045-4.png

我们可以看到用户控件正常工作。所以唯一的问题是当我尝试使用用户控件时弹出窗口关闭。这只发生在我在另一个用户控件中工作时，它在页面中正常工作。

这是我使用弹出窗口和用户控件的代码部分：

在页面中，它有效：

www.noelshack.com/2012-39-1348649045-6.png

在用户控件中，这不起作用：

www.noelshack.com/2012-39-1348649044-5.png

如果您有不明白的地方或者您需要更多解释，您可以问我谢谢您的帮助，对不起我的英语。抱歉链接，我不能发布图片或超链接...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T01:15:27.637

尝试使用 RECHERCHER 按钮底部的以下内容：

```
mymodalpopupextender.show() 
```

# php - Phonegap 联系表格无法在 PHP 上运行

> ID：12597891
> 
> 赞同：2
> 
> 时间：2012-09-26T08:48:04.547
> 
> 标签：php, html, cordova, contact-form

我有一个非常奇怪的问题

我正在使用 phonegap 在 HTML5 中构建一个移动应用程序，以将其编译为本机应用程序。

该应用程序内部是一个联系表格，我无法让它工作。我尝试了我能想到的一切。但是每次我提交表单时，我都会在屏幕上收到 php 部分的代码。显然，该应用程序在浏览器上运行良好，但在我的 iPhone 上却不行。

我什至尝试使用 iframe 并在那里添加表单，结果相同。

所以我的问题是。如何在我的应用程序中添加联系表格（需要将用户信息发送到客户电子邮件）

任何帮助将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T09:01:26.420

如果采用整体方法（通过 Titanium/Phonegap 将 html5 转换为原生），您的结构应该是这样的

```
/projects/apps/html5app/index.html
/projects/apps/html5app/contact.html

/projects/apps/html5app/assets/js/phonegap.js
/projects/apps/html5app/assets/js/jquery.js

/projects/apps/html5app/assets/css/css.css

/projects/apps/html5app/assets/images/logo.jpg
/projects/apps/html5app/assets/images/button.jpg 
```

在 contact.html 中，您需要使用 PHP 文件指向实时服务器

```
<form action="https://service.cdn-app.com/contact-form.php" method="get"> 
```

然后使用回发以 AJAX 或 JSON 格式提交感谢页面，这样就不会提示用户离开应用程序。

**或者**更新 - 更简单的方法就是像这样做按钮

```
<input type="button" onclick="submit()" value="submit contact"/> 
```

然后在您的 jQuery 上，您可以执行他们的操作（他们不会离开您的应用程序，您可以用感谢等触发替换 div）

// 启动 jQuery 表单流程引擎

# jQUERY 示例

```
$.post('https://service.cdn-app.com/contact-form.php', {

    // These are the names of the form values

    FirstName: $('#FirstName_input').val(),
    LastName: $('#LastName_input').val(),
    Email: $('#Email_input').val(),
    MessageText: $('#MessageText_input').val()

    // HTML function

    }, function (html) {
        // Place the HTML in a astring
        var response=html;

        // PHP was done and email sent
        if (response=="success") {
            alert("Message sent!"); 
        } else {

            // Error postback
            alert("Sorry please fill all fields!"); 
        return false;
    }
}); 
```

# PHP 示例

```
<?php

    // VARS
    $FirstName=$_GET["FirstName"];
    $LastName=$_GET["LastName"];
    $Email=$_GET["Email"];
    $MessageText=$_GET["MessageText"];
    $Headers = "From:" . $Email;

    //VALIDATION
    if(
    $FirstName=="" ||
    $LastName=="" ||
    $Email=="" ||
    $MessageText==""
    ) {
        echo "Error";
    } else {
        mail("youradmin@cdn.com","mobile app message",$MessageText, $Headers);
        echo "Success";
    }
?> 
```

# extjs - Extjs 在长时间处理时加载掩码

> ID：12597892
> 
> 赞同：9
> 
> 时间：2012-09-26T08:48:06.247
> 
> 标签：extjs, extjs4

我在面板上正确设置负载掩码时遇到问题。单击按钮后，正在生成新的树存储（本地），这需要相当长的时间。加载掩码仅在（我认为）整个函数评估后显示一毫秒。在我的代码`console.log(0)`和`console.log(1)`整个功能处理后的显示中，按钮单独冻结几秒钟然后解冻，然后在控制台显示`0 and 1`. 处理这种情况的正确方法是什么。这是代码：

按钮定义：

```
 xtype:'button',
    text:'Rozdziel działki',
    iconCls:'icon-map_link',
    scope:this,
    handler:function(){
       console.log(0);
       this.splitParcels();
    } 
```

拆分包裹功能：-

```
    拆分包裹：函数（）{
    var mask = new Ext.LoadMask(Ext.getBody(), {msg:"请稍候..."});
        掩码.show();
        控制台.log(1);

        this.mgstore.getRootNode().removeAll();

        控制台.log(this.response);
        var root_node = this.mgstore.getRootNode();
        Ext.each(this.response.plans, function(plan){
            var plan_obj = {
                    id:plan.plan.id,
                    文本：plan.plan.abbreviation,
                    gsip_plan：计划，
                    gsip_type:'计划',
                    iconCls:'图标地图',
                    扩展：真，
                    叶：假
            };

            ext.each(plan.parcels, function(parcel){
                var parcel_obj = {
                        id:parcel.parcel.id,
                        文本：parcel.parcel.name，
                        叶：真，
                        gsip_plan：计划，
                        gsip_parcels：包裹，
                        gsip_type:'包裹',
                        iconCls:'图标矢量'
                };

                var planNode = root_node.appendChild(plan_obj);
                planNode.appendChild(parcel_obj);
            });
        });

        if (mask != undefined) mask.hide();
}

```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-26T12:22:58.720

The reason for that is quite simple - JS is single threaded*. If you modify DOM (for example by turning mask on) the actual change is made immediately after current execution path is finished. Because you turn mask on in begining of some time-consuming task, browser waits with DOM changes until it finshes. Because you turn mask off at the end of method, it might not show at all. Solution is simple - invoke store rebuild after some delay.

Working sample: [http://jsfiddle.net/25z3B/2/](http://jsfiddle.net/25z3B/2/)

*If you want to have true multi threading see [web workers](http://en.wikipedia.org/wiki/Web_worker#Example)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T05:48:08.847

按着这些次序：

1.  在body标签下面创建一个Div Like

    ```
    <div id="myLoading" class="myloadingjs" style="float: center; overflow: auto; margin-top:290px"><div> 
    ```

2.  在头上包含 Ext Js 库作为脚本

3.  创建一个脚本标签并在脚本标签内写下以下行

    ```
    var Mask;
    function loadMask(el,flag,msg){
    Mask= new Ext.LoadMask(Ext.get(el), {msg:msg});
    if(flag)
        Mask.show();
    else
        Mask.hide(); 
    ```

    }

4.  `beforeload`在网格存储上使用回调函数并调用您的函数`loadMask`，如下所示

    ```
    javascript:loadMask('myLoading',true,'Loading ...') 
    ```

5.  在 body 标签上调用函数 onload 并调用 javascript:loadMask('myLoading',false,'Loading ...')

如果（4）步骤不起作用，则创建一个新函数 unloadMask 并在此函数中编写以下代码并在加载主体标签时调用此函数

```
function unloadMask(){ 
     Ext.util.CSS.createStyleSheet(".myloadingjs {\n visibility:hidden;  \n } ", "GoodParts");
} 
```

# javascript - JavaScript 创建图像和 document.readyState

> ID：12597893
> 
> 赞同：2
> 
> 时间：2012-09-26T08:48:10.527
> 
> 标签：javascript, image, onload, readystate

为了确保在做任何事情之前准备好文档，我执行以下操作：

```
(function() {
    var interval = window.setInterval(function() {
        if("complete" === document.readyState) {
            window.clearInterval(interval);
            // Some stuff
        }
    }, 10);
})(); 
```

如果在我的代码中的某个地方，我从 JavaScript 创建一个图像，如下所示：

```
var image = new Image();
image.onload = function() {
   // Some other stuff
};
image.src = 'some_url'; 
```

我在 document.readyState 上执行的检查是否也会等待加载“图像”，还是只等待 HTML 代码中存在的图像，并且只有那些图像被加载？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T08:51:31.213

你不需要你的`setInterval`.

[来自 MDN](https://developer.mozilla.org/en-US/docs/DOM/window.onload)：

> load 事件在文档加载过程结束时触发。至此，文档中的所有对象都在 DOM 中，所有图片和子帧都加载完毕。

您可以简单地对静态包含的图像执行此操作：

```
window.onload = function() {
    // Some stuff
}; 
```

由于这不考虑您稍后创建的图像，您可以这样做：

```
window.onload = function() {
    var image = new Image();
    image.onload = function(){
        // Some stuff
    };
    image.src = 'some_url';
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:58:15.937

在 jquery document.ready() 函数中，当整个 html 页面准备好时调用，或者我们可以说 bind（在技术术语中）。

您应该尝试增加间隔时间。或包括执行这些东西的图像加载回调。

# c# - 将值从后面的代码返回到 aspx 页面

> ID：12597896
> 
> 赞同：0
> 
> 时间：2012-09-26T08:48:25.873
> 
> 标签：c#, asp.net, css

所以，我想用一个看起来像这样的代码隐藏函数设置我的 cssclass，但它不起作用，我在最终代码中只得到一个空字符串，我做错了什么？

ASP:

```
<td align="left" class="<% GetCssForUser("start") %>"> 
```

代码隐藏：

```
 protected string GetCssForUser(string field)
    {
        string css = "";

        switch(field)
        {
            case "start":
                css = "start";
                break;
            case "end":
                css = "end";
                break;
            case "course":
                css = "course";
                break;
            case "group":
                css = "group";
                break;
            case "teacher":
                css = "teacher";
                break;
            case "room":
                css = "room";
                break;
            case "plan":
                css = "plan";
                break;
        }

        if (User.ActiveRole == Teacher)
        {
            css += "Teacher";
        }
        else 
        {
            css += "Student";
        }

        return css;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T08:53:31.723

我认为你在这段代码中弄乱了语法

```
<td align="left" class="<% GetCssForUser("start") %>"> 
```

它是这样使用的

```
<td align="left" class="<%=GetCssForUser("start") %>"> 
```

我想这会对你有所帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T08:56:37.667

尝试：

```
class='<%=GetCssForUser("start") %>' 
```

注意`%=`and 的打开`'<`和关闭`>'`（因为后者`"start"`）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T08:51:40.063

试试这个： `<td align="left" class="<%= GetCssForUser("start") %>">`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T08:55:52.100

您可以尝试使用此代码

```
youControl.Attributes.Add("class", css ); 
```

# html - 如何使表格可滚动

> ID：12597897
> 
> 赞同：27
> 
> 时间：2012-09-26T08:48:27.573
> 
> 标签：html, css, css-tables

有谁知道仅使用 html 和 css 使表格的主体可滚动的香草方法？

显而易见的解决方案

```
tbody {
    height: 200px;
    overflow-y: scroll;
} 
```

不起作用。

这不是表格的明显用途吗？

难道我做错了什么？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-09-26T08:51:05.487

您需要先声明一个高度，否则您的表格将根据其内容展开。

```
table{
   overflow-y:scroll;
   height:100px;
   display:block;
} 
```

编辑：在澄清你的问题后，我编辑了小提琴：看看[这个例子](http://jsfiddle.net/poikl/nDmgy/1/)或者[那个方式](http://jsfiddle.net/poikl/nDmgy/3/)。它相当hacky并且不能保证跨浏览器工作，但可能适用于您的情况。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-26T08:51:21.557

你不能用桌子做到这一点。用 div 包裹表格，给它一些类似的东西：

```
div.wrapper {
    overflow:hidden;
    overflow-y: scroll;
    height: 100px; // change this to desired height
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2020-04-28T12:17:07.403

**您可以按照scoota269 的**建议将表格与父母一起包装`div`并使其可滚动：

 **```
.div_before_table {
    overflow:hidden;
    overflow-y: scroll;
    height: 500px;
} 
```

为了保持**表格标题的粘性**，您可以添加一个`fixed`类：

```
.th.fixed {
    top: 0;
    z-index: 2;
    position: sticky;
    background-color: white;
 } 
```

```
table {
  font-family: arial, sans-serif;
  border-collapse: collapse;
  width: 100%;
}

td,
th {
  text-align: left;
  padding: 8px;
}

tr:nth-child(even) {
  background-color: #ddd;
}

/* The scrollable part */

.scrollable {
  height: 150px;
  overflow-y: scroll;
  border-bottom: 1px solid #ddd;
}

th {
  position: sticky;
  background-color: white;
  z-index: 2;
  top: 0;
}
```

```
<div class="scrollable">
  <table>
    <tr>
      <th>Company</th>
      <th>Contact</th>
      <th>Country</th>
    </tr>
    <tr>
      <td>Alfreds Futterkiste</td>
      <td>Maria Anders</td>
      <td>Germany</td>
    </tr>
    <tr>
      <td>Centro comercial Moctezuma</td>
      <td>Francisco Chang</td>
      <td>Mexico</td>
    </tr>
    <tr>
      <td>Centro comercial Moctezuma</td>
      <td>Francisco Chang</td>
      <td>Mexico</td>
    </tr>
    <tr>
      <td>Centro comercial Moctezuma</td>
      <td>Francisco Chang</td>
      <td>Mexico</td>
    </tr>
    <tr>
      <td>Ernst Handel</td>
      <td>Roland Mendel</td>
      <td>Austria</td>
    </tr>
    <tr>
      <td>Island Trading</td>
      <td>Helen Bennett</td>
      <td>UK</td>
    </tr>
    <tr>
      <td>Laughing Bacchus Winecellars</td>
      <td>Yoshi Tannamuri</td>
      <td>Canada</td>
    </tr>
    <tr>
      <td>Magazzini Alimentari Riuniti</td>
      <td>Giovanni Rovelli</td>
      <td>Italy</td>
    </tr>
  </table>
</div>
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T09:56:04.227

你想要这样的东西吗？

带有固定标题的纯 CSS 可滚动表格 (1)

[http://anaturb.net/csstips/sheader.htm](http://anaturb.net/csstips/sheader.htm)

[http://www.scientificpsychic.com/blogentries/html-and-css-scrolling-table-with-fixed-heading.html](http://www.scientificpsychic.com/blogentries/html-and-css-scrolling-table-with-fixed-heading.html)**

# php - 在两列中排列复选框值

> ID：12597900
> 
> 赞同：0
> 
> 时间：2012-09-26T08:48:38.277
> 
> 标签：php, html

我有一个带有复选框值的表单我想将复选框排列在两列中，而不是

一根长柱。

我怎样才能把它分成两列？

这是代码：

```
<form id="form" name="form" method="post" action="">

<table width="502" border="0">
<tr>
<td>
 Name :
<input type="textbox" name="rcv_group_name" value="">
<input type="hidden" name="add" value="add" />
</td>

</tr>

 <tr>
 <td align="left">
 <strong>HEADING</strong>

 <?php 
 $q = "select * from Config_RCV";

  $r = mysqli_query ($dbc, $q);
  if (mysqli_num_rows($r) > 0) 
  {
    $k=0;
   while ($row = mysqli_fetch_array($r,MYSQLI_NUM)) 
   {

    ?>
    <br> <input type="checkbox" name ="rcv_val[]" value ="<? echo $row[0];?>" />         &nbsp;<? echo $row[1];?> 

   <?

   $k++;
   }
      }

     ?>

  </td>
   </tr>
 <tr>
    <td align="right"><input type="submit" name="Submit" id="Submit" value="Submit"     style="background-color:#999" />        

   < /td>
    <td height="26" align="left">&nbsp;</td>
   <td>&nbsp;</td>
   </tr>
     </table>
     <form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T08:53:22.123

添加另一个表并通过拆分第二个结果来制作 2 列：

```
if (mysqli_num_rows($r) > 0) {
    $k=0;
    echo '<table><tr>';
    while ($row = mysqli_fetch_array($r,MYSQLI_NUM)) {
    ?>
        <td><input type="checkbox" name ="rcv_val[]" value ="<?php echo $row[0];?>" /> &nbsp;<?php echo $row[1];?> </td>
    <?php
        $k++;
        if($k%2 == 0){
            echo '</tr><tr>';
        }
    }
    echo '</table>';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:53:48.860

使用你的 $k

```
if ($k%2==0){
echo "<br />";
} 
```

而不是现在的孤独

使用上面的表格可能会更好看

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T08:58:51.457

您可以在表中添加第二列：

```
echo "<tr>";
$i = 0;
while ($row = mysqli_fetch_array($r,MYSQLI_NUM)) {
    if ($i++%2==0) {
        echo "</tr><tr>";
    }
    echo "<td>".$CELL_CONTENT_HERE."</td>";
}
echo "</tr>"; 
```

# silverlight - Silverlight 项目在“任何 CPU”选项下停止编译

> ID：12597908
> 
> 赞同：0
> 
> 时间：2012-09-26T08:49:26.200
> 
> 标签：silverlight, msbuild, anycpu

我有一个 x64 构建服务器，它已经编译 Silverlight 项目很长时间了，没有任何问题。然后突然开始抱怨“没有安装Silverlight 4 SDK”，现在我只能在“x86”平台下编译SL项目。我想继续对所有项目使用“任何 CPU”，但我不知道发生了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T16:28:45.563

此问题几乎总是由于错误地调用了 x64 版本的 MSBuild。确保您使用的是 x86 版本的构建工具。

# f# - F# Pipelines 从上面的管道阶段访问数据

> ID：12597909
> 
> 赞同：2
> 
> 时间：2012-09-26T08:49:27.703
> 
> 标签：f#

我写了一个这样的函数

```
let GetAllDirectAssignmentsforLists (spWeb : SPWeb) =    
  spWeb.Lists 
  |> Seq.cast<SPList> 
  |> Seq.filter(fun l -> l.HasUniqueRoleAssignments) 
  |> Seq.collect (fun l -> l.RoleAssignments 
                           |> Seq.cast<SPRoleAssignment> 
                           |> Seq.map(fun ra -> ra.Member)
                 )
  |> Seq.filter (fun p -> p.GetType().Name = "SPUser")
  |> Seq.map(fun m -> m.LoginName.ToLower()) 
```

`l.Title`我想返回一个元组，其中包含发送管道中的列表名称（取自）和`m.LoginName.ToLower()`.

有没有一条干净的方法可以让我从上面的管道元件中得到一些东西？

一种方法当然是在管道的第二阶段对返回值进行元组处理，然后将标题一直向下传递....但这会污染代码，所有后续阶段都必须接受并返回元组值为了最后阶段获得价值。

我想知道是否有一个干净和简单的方法......

另外，在管道的第 4 阶段，`(fun p -> p.GetType().Name = "SPUser")`如果在这里比较类型，我可以使用吗？而不是转换`typename`为`string`然后匹配字符串？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T09:06:19.100

我们利用`Seq.filter`并且`Seq.map`可以在`Seq.collect`不改变结果的情况下被推入内部的事实。在这种情况下，`l`仍然可以访问。

最后一个`filter`函数更适合与[type test operator](http://msdn.microsoft.com/en-us/library/dd233220.aspx) `:?`一起使用。

```
let GetAllDirectAssignmentsforLists(spWeb: SPWeb) =    
    spWeb.Lists 
    |> Seq.cast<SPList> 
    |> Seq.filter (fun l -> l.HasUniqueRoleAssignments) 
    |> Seq.collect (fun l -> l.RoleAssignments 
                             |> Seq.cast<SPRoleAssignment> 
                             |> Seq.map (fun ra -> ra.Member)
                             |> Seq.filter (fun p -> match box p with
                                                     | :? SPUser -> true
                                                     | _ -> false)
                             |> Seq.map (fun m -> l.Title, m.LoginName.ToLower())) 
```

为了进一步简化，您可以将`Seq.map`和的系列更改`Seq.filter`为[Seq.choose](http://msdn.microsoft.com/en-us/library/ee340250.aspx)：

```
Seq.choose (fun ra -> match box ra.Member with
                      | :? SPUser -> Some (l.Title, ra.Member.LoginName.ToLower())
                      | _ -> None) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T12:42:58.313

虽然您可以通过提升内部的其余计算来解决问题`collect`，但我认为您可以通过使用*序列表达式*而不是流水线来使代码更具可读性。

我无法运行代码来测试它，但这应该是等效的：

```
let GetAllDirectAssignmentsforLists (spWeb : SPWeb) = seq {
  // Corresponds to your 'filter' and 'collect'
  for l in Seq.cast<SPList> spWeb.Lists do
    if l.HasUniqueRoleAssignments then
      // Corresponds to nested 'map' and 'filter'
      for ra in Seq.cast<SPRoleAssignment> l.RoleAssignments do
        let m = ra.Member
        if m.GetType().Name = "SPUser" then 
          // This implements the last 'map' operation
          yield l.Title, m.LoginName.ToLower() } 
```

上面的代码与@pad 的版本比与您的原始代码更接近，因为其余的计算嵌套在下面`for`（对应于嵌套在下面`collect`），因此您可以看到已经在范围内的所有变量 - 就像`l`您需要。

序列表达式的好处是您可以使用 F# 构造，例如`if`(instead of `filter`)、`for`(instead of `collect`) 等。另外，我认为它更适合编写嵌套操作（您需要在这里将变量保持在范围内），因为它仍然具有很强的可读性并保持熟悉的代码结构。

# php - getElementById() 返回 Null

> ID：12597911
> 
> 赞同：-3
> 
> 时间：2012-09-26T08:49:33.390
> 
> 标签：php, javascript, jquery, mysql, ajax

我需要在页面末尾显示结果。当我尝试使用添加反馈`getElementById()`时，它总是返回`null`，我猜它超出了范围。你有什么想法可以解决这个问题吗？

这是我的 JavaScript 函数。

```
 function handler(var1,quizId,isCorrect,score,name,email) {
        alert(var1);
        //var id = parseInt(quizId);
        quizId++;
        var points=10;

        if(isCorrect=='true'){
            score=score+points;
            document.getElementById("result").innerHTML="Correct<br/>";
            var string_url="quiz.php?qusId="+quizId+"&score="+score+"&name="+name+"&email="+email;
            setTimeout(function() {
  window.location = string_url
}, 5000);
        }
        else{
            document.getElementById("result").innerHTML="Wrong<br/>";
            var string_url="quiz.php?qusId="+quizId+"&score="+score+"&name="+name+"&email="+email;
            setTimeout(function() {
  window.location = string_url
}, 5000);
            } 
```

## }

这是我的 PHP 代码。

```
<body >
<?php 
$qusId=$_GET['qusId'];
$passscore=70;

if(isset($_GET['score'])){
    $score=$_GET['score'];
}
else{
    $score=0;
}
if(isset($_POST['name'])){
    $name=$_POST['name'];

}
else{
    $name=$_GET['name'];
}

if(isset($_POST['email'])){
    $email=$_POST['email'];
}
else{

    $email=$_GET['email'];
}
?>
<form action="email.php?name=<?php echo $name; ?>&email=<?php echo $email;?>&score=<?php echo $score;?>" method="POST">

   <?php
            $result = select("SELECT * FROM questions WHERE question_id='$qusId'");
            //$row = mysql_fetch_array($result);

        ?>
<?php
$i=$_GET['qusId'];

if($qusId<11){

while($row = mysql_fetch_array($result))
{
?>
<table width="581" height="175" border="0"  align="center">
<tr>
<td><h4><?php echo $i.'.' .$row['questions']; ?></h4>
<?php $i++; ?>
</td>
</tr>
<tr>
<td>
<?php $qId=$row['question_id'];?>
<?php

$result1=select("SELECT * FROM answers WHERE questionId='$qId' ORDER BY RAND()");
while($row1=mysql_fetch_array($result1)){

    ?><input type="radio" name="answers" value="<?php echo $row1['answers'];?>"  onclick="handler('<?php echo $row1["feedback"]; ?>',<?php echo $qusId;?>,'<?php echo $row1["isCorrect"]; ?>',<?php echo $score;?>,'<?php echo $name; ?>', '<?php echo $email; ?>')
"/ ><?php echo $row1['answers']; ?><br/>

<?php 
} ?>
&nbsp;</td>
</tr>

</table>
</form>
<p>
  <?php
}
}
else{

    ?>
</p>
<p>

<table>
<tr><td>
Your Name:<?php echo $name;?><br /><br/>
Your Email:<?php echo $email;?><br /><br/>
Pass Score:<?php echo $passscore;?><br /><br/>
Your Score:<?php echo $score;?><br/><br/>

<?php if($score>=$passscore){?>
Result:Congratulation! You Have passed the questionnaire.<br/><br/
<?php }else{ ?>
Result:Sorry! Please <a href="/uaquiz/index.php">Try again</a><br/>
<?php } ?>

 </p>
    </td></tr>
    <tr><td><input class="submit" type="submit" value="Send Result"  /></td></tr>
    </table>
    </form>

   <table id="feedback">
<tr>
<td id="questions">1\.   What is Union Assurance brand pay off line<br/>
2\.  What does the Union Assurance brand colour orange signify<br/> 
3\.  What does the Union Assurance brand colour grey signify<br/>
4\.  Union Assurance is baked by <br/>
5\.  Union Assurance Brand is built on the platform of <br/>
6\.  Union Assurance brand promise trust is delivered through <br/>
7\.  Union Assurance Symbol depicts<br/>
8\.  What’s Union Assurance brand ranked in the LMD Brands.<br/>
9\.  What’s Union Assurance brand value?<br/>
10\. What is the best way to build your brand <br/> </td>
<td id="result">aaa</td>
</tr></table>

    <?php

    }

?>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T10:52:37.390

getElementById() will always return null. because there in no "result" id available.

because of php script condition

```
if($qusId<11){}else{} 
```

you need to put this line `<td id="result">aaa</td>`

at the end of php script or you can add this line inside the if condition not in the else part.

# java - 使用 Spring MVC 部署 Web 应用程序

> ID：12597912
> 
> 赞同：1
> 
> 时间：2012-09-26T08:49:34.543
> 
> 标签：java, web-applications, spring-mvc, war, activiti

我以前从未遇到过这个问题。实际上，我有一个通过war文件运行的Web应用程序。我已经将 Spring 配置为使用它并且它运行良好。

问题是我正在尝试通过 Spring 配置 Activiti。基本上，WEB-INF/processes 文件夹中有一组 .bpmn20.xml 文件。Activiti 团队提到他们不知道如何在 Web 应用程序中进行配置。作为一个独立的应用程序，我可以自动部署资源 .bpmn20.xml 文件，因为进程文件夹位于类路径上。我在配置 Web 应用程序结构时遇到问题。

请看下面：

我创建了一个 Spring MVC 应用程序并通过运行 DbSchemaCreate.main() 创建了一个 Activiti 数据库。实际上，我的流程似乎没有部署在战争文件上。当 Tomcat 启动时，ProcessEngine 通过 Spring 启动并工作。我可以访问 RuntimeService。代码如下：

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://java.sun.com/xml/ns/j2ee"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web- app_2_5.xsd"
   version="2.5">

   <display-name>WebApp</display-name>

   <context-param>
      <!-- Specifies the list of Spring Configuration files in comma separated format.-->
      <param-name>contextConfigLocation</param-name>
      <param-value>/WEB-INF/spring/activiti.xml
      </param-value>
   </context-param>

   <listener>
      <!-- Loads your Configuration Files-->
      <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
   </listener>

   <servlet>
      <servlet-name>example</servlet-name>
      <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
      <load-on-startup>1</load-on-startup>
   </servlet>

   <servlet-mapping>
      <servlet-name>example</servlet-name>
      <url-pattern>/</url-pattern>
   </servlet-mapping>

   <welcome-file-list>
      <welcome-file>index.jsp</welcome-file>
   </welcome-file-list> 
```

活动.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:context="http://www.springframework.org/schema/context"
   xsi:schemaLocation="http://www.springframework.org/schema/beans    http://www.springframework.org/schema/beans/spring-beans.xsd
  http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

  <bean id="processEngineConfiguration" class="org.activiti.spring.SpringProcessEngineConfiguration">
     <property name="dataSource" ref="dataSource"/>
     <property name="databaseSchemaUpdate" value="true"/>
     <property name="jobExecutorActivate" value="false"/>
     <property name="transactionManager" ref="transactionManager"></property>
     <!-- <propety name="beans">
        <map>
           <entry key="printer" value-ref="printer"/>
        </map>
        </property>-->
     <property name="deploymentResources" value="classpath*:/processes.*.bpmn20.xml"/>
  </bean>

  <bean id="processEngine" class="org.activiti.spring.ProcessEngineFactoryBean">
     <property name="processEngineConfiguration" ref="processEngineConfiguration"/>
  </bean>

  <bean id="dataSource" class="org.springframework.jdbc.datasource.SimpleDriverDataSource">
     <property name="driverClass" value="com.mysql.jdbc.Driver"/>
     <property name="url" value="jdbc:mysql://localhost:3306/activiti_example"/>
     <property name="username" value="root"/>
     <property name="password" value="password"/>
  </bean>

  <bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
     <property name="dataSource" ref="dataSource"/>
  </bean>

  <bean id="repositoryService" factory-bean="processEngine" factory-method="getRepositoryService"/>
  <bean id="runtimeService" factory-bean="processEngine" factory-method="getRuntimeService"/>
  <bean id="taskService" factory-bean="processEngine" factory-method="getTaskService"/>
  <bean id="historyService" factory-bean="processEngine" factory-method="getHistoryService"/>
  <bean id="managementService" factory-bean="processEngine" factory-method="getManagementService"/> 
```

未部署自动资源部署。我也尝试过通过代码进行部署，但它会引发异常：

```
 repositoryService.createDeployment().addClasspathResource("ProcessExample.bpmn20.xml").deploy();
 runtimeService.startProcessInstanceByKey("processExample", mapOfProcessVariables);

org.springframework.web.util.NestedServletException: Request processing failed; nested exception  is org.activiti.engine.ActivitiException: resource 'ProcessExample.bpmn20.xml' not found
   org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:656)
   org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:560)
  javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
   javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
root cause

  org.activiti.engine.ActivitiException: resource 'ProcessExample.bpmn20.xml' not found
  org.activiti.engine.impl.repository.DeploymentBuilderImpl.addClasspathResource   (DeploymentBuilderImpl.java:59)
  com.webchannel.web.EmailController.sendE(EController.java:46)
  sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
  sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
  sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
  java.lang.reflect.Method.invoke(Method.java:597)
  org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176)
  org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:426)
   org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:414)
  org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:790)
  org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
  org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)
  org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:560)
  javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
  javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 
```

该资源如何位于 webapp 中？

我试过把它放在 WEB-INF/processes/ProcessExample.bpmn20.xml 中。

我也试过：

```
<property name="deploymentResources" value="/WEB-INF/processes.*.bpmn20.xml"/> 
```

编辑

这个网站可能会有所帮助，但我被卡住了。

[WEB-INF 在 CLASSPATH 中吗？](https://stackoverflow.com/questions/793917/is-web-inf-in-the-classpath)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T08:13:34.823

也许尝试将定义进程的文件夹（您的 bpmn20.xml 文件）添加到*构建路径*。

错误告诉你，Activiti-Engine 找不到你的文件，这就是为什么你需要告诉它在哪里可以找到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-23T16:49:20.887

尝试这个 ：

```
<web-app xmlns="http://xmlns.jcp.org/xml/ns/javaee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee 
		 http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd"
         version="3.1">

	<!-- for specifies the Web application display name  --> 
	<display-name>APMC</display-name>

   <!-- For Authentication processing mechanisms -->
   <filter>  
        <filter-name>springSecurityFilterChain</filter-name>  
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>  
    </filter>  
    <filter-mapping>  
        <filter-name>springSecurityFilterChain</filter-name>  
        <url-pattern>/*</url-pattern>  
    </filter-mapping>  

  	<!-- For mapping request resource and combine its results with the matching JSP -->
	<servlet>
    <servlet-name>mvc-dispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
      <param-name>contextConfigLocation</param-name>
      <param-value>/WEB-INF/spring-security.xml
      </param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>mvc-dispatcher</servlet-name>
    <url-pattern>/</url-pattern>
  </servlet-mapping>

 <servlet>
 	<servlet-name>rest</servlet-name>
 	<servlet-class>
  		org.springframework.web.servlet.DispatcherServlet
 	</servlet-class>
 	<load-on-startup>2</load-on-startup>
 </servlet>

 <servlet-mapping>
 	<servlet-name>rest</servlet-name>
 	<url-pattern>/rest/*</url-pattern>
 </servlet-mapping>

 <!-- ContextLoaderListener  provides access to the ServletContext  -->
 <context-param>
   <param-name>contextConfigLocation</param-name>
   <param-value>/WEB-INF/spring-config.xml, 
      			 /WEB-INF/spring-security.xml
   </param-value>
 </context-param>
  <listener>
	<listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
  </listener>

</web-app>
```

上面的文件是 web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
	xmlns:task="http://www.springframework.org/schema/task"
	xmlns:context="http://www.springframework.org/schema/context"
	xmlns:util="http://www.springframework.org/schema/util" xmlns:mvc="http://www.springframework.org/schema/mvc"	
	xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd
					    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
					    http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task-3.2.xsd
					    http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.2.xsd
					    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.2.xsd">

  	<context:component-scan base-package="com.apmc.dao" />

	<context:component-scan base-package="com.apmc.services" />
	<task:annotation-driven executor="taskExecutor" scheduler="taskScheduler" />
    <task:executor id="taskExecutor" pool-size="1"  /> 
    <task:scheduler id="taskScheduler" pool-size="1"  />

	<context:component-scan base-package="com.apmc.controller" />
	<context:component-scan base-package="com.apmc.rest" />
  	<context:property-placeholder location="classpath:database.properties" />
  	<context:property-placeholder location="classpath:log4j.properties" />

	<mvc:resources mapping="/resources/**" location="/resources/mytheme/" />
	<mvc:annotation-driven />

	<bean id="dataSource"
		class="org.springframework.jdbc.datasource.DriverManagerDataSource">
		<property name="driverClassName" value="${database.driver}" />
		<property name="url" value="${database.url}" />
		<property name="username" value="${database.user}" />
		<property name="password" value="${database.password}" />
	</bean>

	<bean id="sessionFactory"
		class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
		<property name="dataSource" ref="dataSource" />
		<property name="annotatedClasses">  
            <list>  
                <value>com.apmc.domain.Vehicle</value>
            </list>  
        </property> 

		<property name="hibernateProperties">
			<props>
				<prop key="hibernate.dialect">org.hibernate.dialect.MySQL5Dialect</prop>
				<prop key="hibernate.hbm2ddl.auto">update</prop>
				<prop key="hibernate.show_sql">${hibernate.show_sql}</prop>
				<prop key="hibernate.format_sql">false</prop>
				<prop key="hibernate.use_sql_comments">false</prop>
			</props>
		</property>

	</bean>

	<bean id="txManager"
		class="org.springframework.orm.hibernate4.HibernateTransactionManager">
		<property name="sessionFactory" ref="sessionFactory" />
	</bean>

	<bean id="persistenceExceptionTranslationPostProcessor"
		class="org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor" />

	<bean
		class="org.springframework.web.servlet.view.InternalResourceViewResolver">
		<property name="prefix">
			<value>/WEB-INF/pages/</value>
		</property>
		<property name="suffix">
			<value>.jsp</value>
		</property>
	</bean>

	<bean id="messageSource"
		class="org.springframework.context.support.ReloadableResourceBundleMessageSource">

		<property name="basename" value="/WEB-INF/messages" />

	</bean>

	<bean id="hibernateTemplate" class="org.springframework.orm.hibernate4.HibernateTemplate">  
		<property name="sessionFactory" ref="sessionFactory" />
    </bean> 

</beans>
```

上面的代码是spring-config.xml

在 src 文件夹的 resources 文件夹中添加 database.properties 文件。所以在database.properties中写代码

```
database.driver=com.mysql.jdbc.Driver
database.url=jdbc:mysql://localhost:3306/apmc_db
database.user=root
database.password=
hibernate.show_sql=true 
```

# c - sigaction：是否恢复处理程序？

> ID：12597915
> 
> 赞同：2
> 
> 时间：2012-09-26T08:49:41.320
> 
> 标签：c, unix, signals

如果我在代码开头调用 sigaction，

```
sigaction(SIGPIPE, &pipe_act, NULL); 
```

如果我收到 sigpipe，在执行 pipe_act 后，安装的处理程序仍然是 pipe_Act，还是自动为 sigpipe 设置默认处理程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T09:07:34.597

这取决于您的标志（`pipe_act->sa_flags`）是否包括`SA_RESETHAND`. 如果是，则信号处理程序是“一次性的”，并在被调用后被删除（即处理程序被重置为默认处理程序），但如果不是，则处理程序保持原位，直到您手动更改它。

# android - 如何在我的应用程序中使用 ScreenCap.cpp？

> ID：12597917
> 
> 赞同：3
> 
> 时间：2012-09-26T08:50:04.627
> 
> 标签：android, screen-capture, surfaceflinger

Android 平台有一个实用程序类，用于获取 android screenshot 。我将“ [ScreenCap.cpp](https://github.com/android/platform_frameworks_base/blob/master/cmds/screencap/screencap.cpp) ”复制到 JNI 文件夹中，然后通过 NDK 构建但失败了。NDK 编译器没有找到需要的库：

```
#include <binder/IMemory.h>
#include <gui/SurfaceComposerClient.h>

#include <SkImageEncoder.h>
#include <SkBitmap.h>
#include <SkData.h>
#include <SkStream.h> 
```

这是错误日志：

```
jni/ScreenCap.cpp:28:28: fatal error: SkImageEncoder.h: No such file or directory 
```

编译终止。

请告诉我如何解决这个问题。

顺便说一句，是否有任何解决方案可以以编程方式捕获整个 android 屏幕？我需要每秒至少捕获 10 次。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:02:09.883

您忘记将 SkImageEncoder.h 包含到 Local_C_Include 中。将此行添加到您的 Android.mk 文件中

```
LOCAL_C_INCLUDES := PATH_TO_SKImageEncoder_HEADER 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-11T11:49:58.337

这个问题已经很老了，但我会尽力帮助以防万一。

问题是 SkImageEncoder.h 不是 NDK 的一部分，而是来自系统的 libskia 库（在 NDK 中不可用），因此应该与整个系统的构建过程一起构建。

如果您希望此应用程序在单个设备上运行，例如您的个人设备，您应该能够通过修改您的 Android.mk 文件来创建一个工作二进制文件：

```
include $(CLEAR_VARS)
LOCAL_MODULE := system_libskia
LOCAL_SRC_FILES := PATH_TO_LIBSKIA/libskia.so
include $(PREBUILT_SHARED_LIBRARY)

include $(CLEAR_VARS)

LOCAL_C_INCLUDES := PATH_TO_SKIA_INCLUDE_FOLDER

LOCAL_SHARED_LIBRARIES := system_libskia 
```

您可以通过运行以下命令获取设备的 libskia.so：

```
adb pull /system/lib/libskia.so 
```

另一种可能但丑陋的解决方法是通过 dlopen 加载 libskia.so，然后从中读取所有需要的符号。只要符号的签名保持不变，这将适用于任何设备。

希望这可以帮助。

# uitextview - 在富 UITextView (iOS 6) 中使用 NSUndoManager 撤消操作

> ID：12597923
> 
> 赞同：5
> 
> 时间：2012-09-26T08:50:38.367
> 
> 标签：uitextview, ios6, nsattributedstring, nsundomanager, uitextinput

我想更改富 UITextView (iOS 6) 的部分或全部属性文本，并允许用户撤消更改。

阅读[NSUndoManager 文档](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/UndoArchitecture/Articles/RegisteringUndo.html#//apple_ref/doc/uid/20000206-BABICFDE)后，我尝试了第一种方法：

```
“Simple undo” based on a simple selector with a single object argument. 
```

我希望撤消操作很简单：
声明此方法：

```
- (void)setAttributedStringToTextView:(NSAttributedString *)newAttributedString {

     NSAttributedString *currentAttributedString = self.textView.attributedText;

    if (! [currentAttributedString isEqualToAttributedString:newAttributedString]) {
         [self.textView.undoManager registerUndoWithTarget:self
                                    selector:@selector(setAttributedStringToTextView:)
                                      object:currentAttributedString];
         [self.textView.undoManager setActionName:@"Attributed string change"];
         [self.textView setAttributedText:newAttributedString];
    }
} 
```

通过调用更改我的 UITextView 中的文本：

```
[self setAttributedStringToTextView:mutableAttributedString]; 
```

但是在这样做之后，NSUndoManager 说它无法撤消。

```
NSLog(@"Can undo: %d", [self.textView.undoManager canUndo]);
// Prints: "Can undo: 0" 
```

所以我尝试了第二种方法：

```
“Invocation-based undo” which uses an NSInvocation object. 
```

声明：

```
- (void)setMyTextViewAttributedString:(NSAttributedString *)newAttributedString {

        NSAttributedString *currentAttributedString = [self.textView attributedText];
    if (! [currentAttributedString isEqualToAttributedString:newAttributedString]) {
        [[self.textView.undoManager prepareWithInvocationTarget:self]
         setMyTextViewAttributedString:currentAttributedString];
        [self.textView.undoManager setActionName:@"Attributed string change"];
        [self.textView setAttributedText:newAttributedString];
    }
} 
```

并更改文本：

```
[self setMyTextViewAttributedString:mutableAttributedString]; 
```

之后，NSUndoManager 也表示无法撤消。

为什么？

请注意，当触发将更改属性文本的代码时，用户正在编辑 UITextView。

一种解决方法是直接通过 UITextInput 协议方法替换文本。下面的方法还是挺方便的，但是我还没有找到 NSAttributedString 的等价物。我错过了吗？

```
- (void)replaceRange:(UITextRange *)range withText:(NSString *)text 
```

这里建议的 hack 是模拟粘贴操作。如果可能的话，我宁愿避免这种情况（还没有理由，只是觉得太脏了，以后不回来咬我）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-17T13:14:24.097

我还是有点震惊这行得通。我在这里发布了相同的答案[UITextView undo manager do not work with replacement attributes string (iOS 6)](https://stackoverflow.com/questions/12501541/uitextview-undo-manager-do-not-work-with-replacement-attributed-string-ios-6)。

```
- (void)applyAttributesToSelection:(NSDictionary*)attributes {
    UITextView *textView = self.contentCell.textView;

    NSRange selectedRange = textView.selectedRange;
    UITextRange *selectedTextRange = textView.selectedTextRange;
    NSAttributedString *selectedText = [textView.textStorage attributedSubstringFromRange:selectedRange];

    [textView.undoManager beginUndoGrouping];
    [textView replaceRange:selectedTextRange withText:selectedText.string];
    [textView.textStorage addAttributes:attributes range:selectedRange];
    [textView.undoManager endUndoGrouping];

    [textView setTypingAttributes:attributes];
} 
```

# java - 单元测试 Web API 消费者模块

> ID：12597925
> 
> 赞同：1
> 
> 时间：2012-09-26T08:50:44.013
> 
> 标签：java, api, unit-testing

我的代码是 API 的使用者 (www.abc.com/public/news/apple.json)。我得到一个 json 数组作为回报，然后我解析并填充到我自己的数据结构中。负责执行此操作的代码是：

```
 public Map<String,List<NewsItem>> populateNewsArray() throws Exception
        {
            url = domain + newsApiStr;
            InputStream stream = getNews(url, true);

           //jackson library object mapper
           ObjectMapper mapper = new ObjectMapper();

          //NewsApiObject class implements the structure of the json array returned.
           List<NewsApiObject> mappedData = mapper.readValue(stream, NewsApiObject.class));

           //populate the properties in a HashMap.
          //return HashMap
     }

     public InputStream getNews(String request, boolean bulk) throws Exception
     {
        URL url = new URL(request); 
        connection = (HttpURLConnection) url.openConnection();           
        connection.setDoOutput(true);
        connection.setInstanceFollowRedirects(false);
        connection.setRequestMethod("GET"); 
        connection.setRequestProperty("Content-Type", "text/plain"); 
        connection.setRequestProperty("charset", "utf-8");
        connection.connect();

        return connection.getInputStream();
     } 
```

如您所见，我不是 api 的控制器，只是消费者。据说在单元测试中，不应该发出http请求。在这种情况下，如何对 populateNewsArray() 函数进行单元测试以查看对象映射是否正确（没有任何异常）并返回有效的哈希图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T10:54:36.563

您应该提取`getNews()`到一个单独的界面，例如 NewsReader（虽然这个词`Reader`在 JDK 中具有特定的含义，但我喜欢这个名字......）

```
public interface NewsReader {
    InputStream getNews(String request, boolean bulk) throws Exception
} 
```

然后根据您的代码使用实现该接口`HttpURLConnection`并更新您的代码以允许注入该特定接口。然后，如果您需要测试您的代码如何处理`InputStream`，您可以创建一个模拟，`NewsReader`该模拟返回`InputStream`具有众所周知的内容的 a 。

请记住以高内聚为目标：您的类不应该是 HTTP 客户端**和**流解析器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T10:28:18.743

我会创建一个子类并覆盖方法`getNews(...)`。然后，在子类中，您可以`InputStream`为您的测试返回一个。
由于您不应该在单元测试中依赖某些外部文件，并且为了获得更好的可测试设计，我还将更改`getNews(...)`方法以返回某种可以由映射器进一步处理的值。

# python - 熊猫分层数据框

> ID：12597926
> 
> 赞同：5
> 
> 时间：2012-09-26T08:50:48.393
> 
> 标签：python, dataframe, pandas

我有一个数据框：

```
Form nr Element Type    Text    Options
   1    Name1   select  text1   op1
   1    Name1   select  text    op2
   1    Name1   select  text    op3
   1    Name2   input   text2   NaN
   2    Name1   input   text2   NaN 
```

有没有办法像这样增加“嵌套”分层索引：

```
Form nr Element Type    Text    Options
   1    Name1   select  text1   op1
                                op2
                                op3
        Name2   input   text2   NaN
   2    Name1   input   text2   NaN 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-26T09:16:28.867

假设 Text 列中有错字， text <-> text1? 我会从你的第一个 DataFrame 开始。

```
In [11]: df
Out[11]: 
   Form nr Element    Type   Test Options
0     1      Name1  select  text1     op1
1     1      Name1  select   text     op2
2     1      Name1  select   text     op3
3     1      Name2   input  text2     NaN
4     2      Name1   input  text2     NaN

In [12]: df.set_index(['Form', 'nr Element', 'Type', 'Test'])
Out[12]: 
                             Options
Form nr Element Type   Test         
1    Name1      select text1     op1
                       text      op2
                       text      op3
     Name2      input  text2     NaN
2    Name1      input  text2     NaN 
```

# mysql - mysql 从字符串列表中获取不同的标记

> ID：12597934
> 
> 赞同：3
> 
> 时间：2012-09-26T08:51:05.533
> 
> 标签：mysql, sql

我在`mysql`该`group concats`记录中有一个查询，并给出了一个具有冗余标记的值。以下是查询的输出：

```
Problem Area->ACC-HO->ACC-HO->Credit Note (C/N)->Problem description ->Problem description 
```

但我想要这个字符串的不同标记如下

```
Problem Area->ACC-HO->Credit Note (C/N)->Problem description 
```

有没有办法在 sql`SELECT`查询本身中做到这一点？

**编辑** 这是[架构和查询](http://www.sqlfiddle.com/#!2/e8b02/3) 以下是我的查询：

```
SELECT 
t2.transaction_id AS transaction_id, 
GROUP_CONCAT(
CONCAT(
 t1.display_text,
 '->',
   (CASE (NOT EXISTS (SELECT 1 FROM mst_node a WHERE a.parent_node_id = t1.node_id))
      WHEN 1 THEN t1.display_text ELSE 
      (SELECT b.display_text AS DISPLAY FROM mst_node b 
      WHERE parent_node_id = t2.node_id AND b.display_seq = t2.entered_value) 
     END)
     ) 
  ORDER BY t2.logtime_stamp SEPARATOR '->'
) AS display_text 
FROM

mst_node t1 
  JOIN trn_user_log t2 
    ON t1.app_id = t2.app_id AND t1.node_id = t2.node_id     
WHERE (t1.app_id = 105) 
  AND t1.parent_node_id IS NOT NULL 
  AND t1.save_as_default IS NULL 
GROUP BY transaction_id,
  mobile_no 
ORDER BY t2.transaction_id DESC,
  t2.logtime_stamp,
  t2.mobile_no 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T08:52:51.577

在您`GROUP CONCAT`添加`DISTINCT`时，它只会连接唯一值。

```
SELECT GROUP_CONCAT(DISTINCT colName),....
FROM   ...
WHERE  ...
GROUP BY ... 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/f8fa6/7)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:54:08.077

在您的分组子句中，您也可以`group by`按此字符串列添加另一个分组。

```
SELECT GROUP_CONCAT(myStringColumn),....
FROM   ...
WHERE  ...
GROUP BY myOtherColumn,myStringColumn 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T13:20:01.490

我终于能够通过使用`UNION`两个选择查询中的一个然后执行`GROUP_CONCAT(DISTINCT column ORDER BY another_column)`.

以下是我使用的查询：

```
SELECT 
transaction_id,
GROUP_CONCAT(DISTINCT display_text ORDER BY logtime_stamp SEPARATOR '->') AS display_text
FROM
 (SELECT 
  t2.transaction_id AS transaction_id,
  t2.logtime_stamp,
  t1.display_text AS display_text 
  FROM mst_node t1 
  JOIN trn_user_log t2 ON t1.app_id = t2.app_id 
   AND t1.node_id = t2.node_id 
   WHERE (t1.app_id = 105) 
   AND t1.parent_node_id IS NOT NULL 
   AND t1.save_as_default IS NULL 
  UNION
 SELECT t2.transaction_id AS transaction_id,t2.logtime_stamp,
  CASE(NOT EXISTS (SELECT 1 FROM mst_node a WHERE a.parent_node_id = t1.node_id)) 
  WHEN 1 THEN NULL 
  ELSE (SELECT b.display_text AS display_text FROM mst_node b WHERE parent_node_id = t2.node_id AND b.display_seq = t2.entered_value) 
  END AS display_text
FROM   mst_node t1 JOIN trn_user_log t2 
      ON t1.app_id = t2.app_id AND t1.node_id = t2.node_id    
  WHERE (t1.app_id = 105) 
  AND t1.parent_node_id IS NOT NULL 
  AND t1.save_as_default IS NULL 
  ORDER BY transaction_id DESC,logtime_stamp
  ) AS T 
  GROUP BY transaction_id 
  ORDER BY transaction_id DESC,logtime_stamp 
```

# python - 使用 stoppbit 的 Python 套接字

> ID：12597936
> 
> 赞同：1
> 
> 时间：2012-09-26T08:51:17.417
> 
> 标签：python, sockets, tcp

我正在尝试使用套接字将多个图像文件从客户端发送到服务器。我的问题是我无法让 stoppbit（或 word）工作。

客户：

```
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.connect(("server",port))
#grab image ...
s.send(imagedata)
s.send("#FINISH#")
s.close() 
```

服务器：

```
s = socket.socket(socket.AF_INET,socket.SOCK_STREAM)
s.bind(("",port))
s.listen(1)

c,a = s.accept()

while True:
    imagedata = c.recv(1024)

    if not imagedata or "#FINISH#" in imagedata:
        komm.close()
        break

    image = image + imagedata

s.close()
#remove stoppword and save image ... 
```

这只是一个简单的示例，但您可以看到问题所在。我无法获取“#FINISH#”，因为第二次发送（客户端）将字符串（有时）附加到图像数据。我知道这是因为recv 的bufsize。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T08:54:36.627

不要发送“停止位”，而是先发送固定长度字段中的数据长度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T09:30:59.350

如果您真的想这样做，请检查您收到的完整数据中的“停止位”，即 `"#FINISH#" == image[-len("#FINISH#"):]`.

# azure - Windows Azure 上的 Web 角色和 iisreset 副作用

> ID：12597939
> 
> 赞同：4
> 
> 时间：2012-09-26T08:51:26.150
> 
> 标签：azure, instance, reset, webrole, iisreset

我注意到，当您 RDP 到 Windows Azure 上的 Web 角色实例以创建`iisreset`. 时，系统会`World Wide Web Publishing Service`关闭，而让您的角色重新启动并再次运行的唯一方法是重新启动上述服务或重新启动/重新启动您的实例。

由于我不知道的原因，Windows Azure 默认启动模式为`World Wide Web Publishing Service`to `Manual`，为什么`iisreset`你的 Web 角色对 WWW 不可用。

我找到了一个解决方案 - IMO - 奇怪的行为，并回答了这篇文章的原始问题。

但是，在 Windows Azure 上是否有替代方案`iisreset`- 也许以编程方式我可以在其中查明确切的实例？因为那是另一个问题；现在我必须对每个实例使用 RDP .. 如果可以精确定位每个实例，那就太好了。

想想看；我有 www.awesome-azure.com 的 CNAME；这是由 3 个实例以循环方式托管的，我想通过 REST API（类似的）重置/监视/诊断/检测每个实例，而不像现在 - 通过 RDP。

这是否可以实现。

**编辑**

试图更清楚地说明挑战是什么以及要实现的目标。

**编辑 2**

`iisreset`为挑战提供了解决方案；如果可能，更新问题以通过 Internet 查明实例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T11:08:48.040

好吧，我仍然不知道为什么 Microsoft Azure 决定设置`World Wide Web Publishing Service`为启动模式`Manual`，但我找到了改变它的方法。

对于原始问题的第二部分，我仍然希望得到答案，但在那之前，请找到我的第一部分的解决方案，以解决`iisreset`Startup Task 的（IMO）问题：

在我放置在应用程序根目录中的**启动文件夹中的****startup.cmd**（或您所命名的任何名称）中，包含以下文本行：

 ****powershell -ExecutionPolicy Unrestricted .\startup\w3svc.ps1**

在同一文件夹中，创建一个名为 w3svc.ps1 的 PowerShell 文件，其内容如下：

**Set-ItemProperty -Path HKLM:\SYSTEM\CurrentControlSet\Services\W3SVC -Name Start -Value 2**

瞧；您的 IIS 现在按预期工作 -`World Wide Web Publishing Service`现在设置为启动模式`Automatically`。

Note: for the above to work, you need to have your **osFamily** property set to **2** in you **ServiceConfiguration.cscfg** file.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T09:57:45.367

您可以处理 WebRole.cs 中的[RoleEnvironment.Changing](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.serviceruntime.roleenvironment.changing.aspx)事件，并将事件参数对象的 Cancel 属性设置为 true。然后，您只需要更改配置设置，Azure 就会以有序的方式重新启动您的所有实例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T22:27:54.760

我不知道为什么`iisreset`不起作用。至于您的第二个问题，您可以使用服务管理 API 重新启动或重新映像实例。这可能会做你想要的。当然，您也可以编写自己的代码来做任何您想做的事情。（您的 Web 角色中可以有代码轮询调用的 blob`<instance ID>.txt`并`iisreset`在 blob 更改时执行。）**

# ruby-on-rails - 回形针 has_one 关联

> ID：12597940
> 
> 赞同：1
> 
> 时间：2012-09-26T08:51:27.617
> 
> 标签：ruby-on-rails, paperclip

我`User model`与一个有`has_one :image`关系`Image model`。我希望每个用户都有一张照片，但我希望将照片存储在与用户模型分开的模型中，即图像模型。我正在使用回形针来帮助添加图像。但是，当我尝试通过视图创建新用户时，出现以下错误：

```
ActiveModel::MassAssignmentSecurity::Error in UsersController#create
Can't mass-assign protected attributes: image_attributes 
```

我没有 image_attributes 变量。为什么会这样？我的实施有缺陷吗？我想要一个单独的表格来保存图像，因为将来我希望用户有很多图像。

```
<% provide(:title, 'Sign up') %>
<h1>Sign up</h1>

<%= form_for @user do |f| %>

<%= render 'shared/error_messages' %>

      <%= f.label :first_name %>
      <%= f.text_field :first_name %>
<br>
      <%= f.label :last_name %>
      <%= f.text_field :last_name %>
<br>
      <%= f.label :email %>
      <%= f.text_field :email %>
<br>

<%= f.fields_for :image, :html => {:multipart => true} do |asset| %>
      <%= asset.label :photo %>
      <%= asset.file_field :photo %>
  <% end %>

<br>
      <%= f.label :password %>
      <%= f.password_field :password %>
<br>
      <%= f.label :password_confirmation, "Confirmation" %>
      <%= f.password_field :password_confirmation %>
<br>
      <%= f.submit "Create my account"%>
    <% end %> 
```

用户控制器

```
 class UsersController < ApplicationController

  #calls method signed_in_users.
  before_filter :signed_in_user, only: [:index, :edit, :update, :show]
  #ensures only the correct user can modify their own data
  before_filter :correct_user,   only: [:edit, :update]

  def new
    @user = User.new
    #@user.image.build
    @user.build_image

  end

  def show # personal profile page

    #Method to make sure only the signed in user can edit their information
    if User.id_equals_cookie(params[:id], cookies[:remember_token])
      @user = User.find(params[:id])
    else
      redirect_to root_url
    end
  end

  def create
    @user = User.new(params[:user])
    if @user.save
      sign_in @user #method defined in sessions_helper
      flash[:notice] = "Thank you for signing up." #the view template must be configured to be seen.
      redirect_to @user #does user_path work???
    else
      render 'new' #flash[:warning]
    end
  end

  def edit
  end

  def update
    @user = User.find(params[:id])
    if @user.update_attributes(params[:user])
      flash[:success] = "Profile updated"
      sign_in @user
      redirect_to @user
    else
      render 'edit'
    end
  end

  def index

  end

  private

  #should this be in the users_helper.rb file
    def signed_in_user
      redirect_to signin_url, notice: "Please sign in." unless signed_in?
    end

    def correct_user
      @user = User.find(params[:id])
      redirect_to(root_path) unless current_user?(@user) #current_user is defined in the sessions_helper.rb
    end

end 
```

用户模型

```
# == Schema Information
#
# Table name: users
#
#  id              :integer          not null, primary key
#  email           :string(255)
#  created_at      :datetime         not null
#  updated_at      :datetime         not null
#  password_digest :string(255)
#  remember_token  :string(255)
#  first_name      :string(255)
#  last_name       :string(255)
#  full_name       :string(255)
#  birthdate       :date
#

class User < ActiveRecord::Base
  has_one :image, :dependent => :destroy #images?
  accepts_nested_attributes_for :image #images?
  attr_accessible :email, :first_name, :last_name, :full_name, :birthdate, :password, :password_confirmation

  #magic to require a password, make sure passwords match, authenticate
  has_secure_password

  before_save { |user| user.email = email.downcase } #help ensure uniqueness
  before_save :create_remember_token

  #validates :name,  presence: true, length: { maximum: 50 }
  VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
  validates :email, presence: true, format: { with: VALID_EMAIL_REGEX }, uniqueness: {case_sensitive: false}
  validates :password, presence: true, length: { minimum: 6 }
  validates :password_confirmation, presence: true

  def self.id_equals_cookie(id, cookie)
    @user_of_cookie = find_by_remember_token(cookie)
    @user_of_id = find(id)    
    if @user_of_cookie == nil
      false
    elsif @user_of_id == @user_of_cookie
      true
    else
      false
    end
  end

  private

    def create_remember_token
      self.remember_token = SecureRandom.urlsafe_base64
    end
end 
```

图像模型

```
# == Schema Information
#
# Table name: images
#
#  id                 :integer          not null, primary key
#  created_at         :datetime         not null
#  updated_at         :datetime         not null
#  photo_file_name    :string(255)
#  photo_content_type :string(255)
#  photo_file_size    :integer
#  photo_updated_at   :datetime
#  user_id            :integer
#

require 'paperclip'
class Image < ActiveRecord::Base
  belongs_to :user
  has_attached_file :photo
  attr_accessible :photo, :photo_file_name, :photo_content_type, :photo_file_size, :photo_updated_at

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T11:20:04.033

把它写在你的模型中

```
attr_accessible :image_attributes 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T11:14:51.927

做就是了`attr_accessible :photo_attributes`

# css - 引导“容器”阴影

> ID：12597943
> 
> 赞同：1
> 
> 时间：2012-09-26T08:51:32.460
> 
> 标签：css, twitter-bootstrap

我试图给我的页面容器一个阴影效果（从底部开始变暗，在顶部变成白色）但是，只在左侧和右侧（想象两条垂直线）。但是大部分教程只发现顶部或左/右或左/右下的“阴影”。我真的需要给我的网站容器一个阴影效果，所以任何帮助都会很棒

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T09:03:50.507

这个技巧可能会有所帮助

[盒子阴影](http://jsfiddle.net/afshinprofe/8YsAg/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T08:56:57.517

尝试使用[css3 生成器网站](http://css3generator.com/)来生成阴影，也许你遗漏了一些东西，或者你的容器周围是其他具有绝对位置和高 z-index 的元素。也许你可以做一个打印屏幕？

# iphone - 适用于 iOS 的 ARC 兼容图表框架

> ID：12597946
> 
> 赞同：0
> 
> 时间：2012-09-26T08:51:43.880
> 
> 标签：iphone, objective-c, ios, charts, automatic-ref-counting

我正在寻找适用于 iOS 的 ARC 兼容图表框架。我知道 Core Plot 的存在，但显然这个框架是 MRC 并且在 ARC 环境中不起作用。谷歌搜索没有出现任何像样的东西。

具体来说，我正在寻找一个带有两个轴的直方图（条形图）和一些基本的 iPhone 上的值显示，所以实际上没什么太复杂的。

有谁知道可以实现这一目标的 Core Plot 的 ARC 替代品？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T09:10:07.960

您仍然可以在项目中使用 Core Plot，即使它是手动引用计数。

在 Target -> Buld Phases -> Compile Sources 中，您可以添加编译器标志来禁用 Core Plot 相关文件上的 ARC。

1.  导航到目标 -> 构建阶段 -> 编译源
2.  选择您想要的文件
3.  添加编译器标志**-fno-objc-arc**

Core Plot 现在应该可以在启用 ARC 的项目中使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T09:10:36.903

有稍微不那么复杂的[ECGraph](http://code.google.com/p/ecgraph/)，但我真的建议你使用 Core Plot 并简单地禁用这些文件的 ARC，或者链接项目作为参考。ARC 二进制文件与非 ARC 二进制文件兼容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T09:10:16.057

`-fno-objc-arc`您可以通过在 XCode 中选择项目文件、选择目标、转到“构建阶段”->“编译源”来将此标志设置为源文件来关闭 CorePlot 的 ARC 。

# android - 移动应用程序的安全性

> ID：12597950
> 
> 赞同：0
> 
> 时间：2012-09-26T08:51:57.363
> 
> 标签：android

如果用户登录到应用程序然后在没有注销的情况下切换到其他应用程序，我们如何管理凭证的记忆，所以一旦用户回到上一个应用程序，他就不需要再次输入凭证详细信息（用户/密码）-（请提供理论答案）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T09:20:12.717

您可以`applicationPreference`用于存储用户名和密码。谷歌，你可以很容易地得到它的代码。但出于安全原因，请始终尝试以加密形式保存此类信息。在从 applicationPrefernces 中检索信息时，您必须对其进行解密。这是链接[http://www.androidsnippets.com/encryptdecrypt-strings](http://www.androidsnippets.com/encryptdecrypt-strings)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T08:56:34.720

定义一些静态数据来存储首选项文件名和您要使用的键：

```
public static final String PREFS_NAME = "MyPrefsFile";
private static final String PREF_USERNAME = "username";
private static final String PREF_PASSWORD = "password"; 
```

然后，您将保存用户名和密码，如下所示：

```
getSharedPreferences(PREFS_NAME,MODE_PRIVATE)
    .edit()
    .putString(PREF_USERNAME, username)
    .putString(PREF_PASSWORD, password)
    .commit(); 
```

所以你会像这样检索它们：

```
SharedPreferences pref = getSharedPreferences(PREFS_NAME,MODE_PRIVATE);   
String username = pref.getString(PREF_USERNAME, null);
String password = pref.getString(PREF_PASSWORD, null);

if (username == null || password == null) {
//Prompt for username and password
}

Alternatively, if you don't want to name a preferences file you can just use the default:

SharedPreferences pref = PreferenceManager.getDefaultSharedPreferences(this); 
```

# ios - 从 StackScrollView 中删除视图

> ID：12597958
> 
> 赞同：0
> 
> 时间：2012-09-26T08:52:34.263
> 
> 标签：ios, uiviewcontroller, stack

我正在尝试使用[StackScrollView 类](https://github.com/raweng/StackScrollView)，但我觉得这里缺少一些重要的东西：我们可以向堆栈添加视图，但不能删除它们。

有没有人做了一个功能来做到这一点？

我已经尝试添加一个 nil 控制器但它不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:13:34.043

您可以通过滑动删除它们。如果您查看 StackScrollViewController.m，您会看到有一个`bounceBack:finished:context:`方法负责在您返回时为视图设置动画。

如果你想以编程方式反弹（也许你有一个按钮或类似的东西）你应该看看`bounceBack:finished:context:`在 StackScrollViewController.m 中如何使用该方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-20T03:18:01.637

只需将此自定义方法添加到 StackScrollViewController，然后从您想要的位置调用它。

```
- (void)dismissStackViewController {

    [[[slideViews subviews] lastObject] removeFromSuperview];
} 
```

# nginx - Nginx – 多个站点一个 VPS – 正确配置？

> ID：12597960
> 
> 赞同：0
> 
> 时间：2012-09-26T08:52:40.573
> 
> 标签：nginx

我对此一无所知，但我已经做了一些阅读。如果我将我的两个域指向 VPS 名称服务器，我的 app-nginx.conf 看起来像这样：

```
server {
      listen 80;
      server_name www.domain1.com;
      root /path/to/your/project;
   }

server {
      listen 80;
      server_name www.domain2.com;
      root /path/to/your/project;
   } 
```

还有什么我需要做的吗？它目前似乎不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T18:44:34.123

please try on server:

```
telnet localhost 80
GET / HTTP/1.1
Host: www.domain2.com
<double ENTER> 
```

What you see now?

What you see in logs, when nginx start? What is output of nginx -T ?

# javascript - 鼠标绑定和滚动到

> ID：12597965
> 
> 赞同：0
> 
> 时间：2012-09-26T08:52:54.147
> 
> 标签：javascript, scroll

我想将“鼠标滚动”绑定到“scrollTo”事件——当我向下滚动时，id 为“next”的链接应该将我带到下一个 div。

```
<a id="next" href="#">Next</a> 
```

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:00:30.363

你可以看看这个 jQuery 插件，[scrollTo](http://demos.flesler.com/jquery/scrollTo/)。

# ruby-on-rails - 如何在 ruby on rails 中更改 text_area_tag 助手的大小

> ID：12597966
> 
> 赞同：2
> 
> 时间：2012-09-26T08:52:57.010
> 
> 标签：ruby-on-rails, ruby

目前我有一个文本区域，下面是相应的代码。我想更改它包含的行数，并希望文本区域在移动设备上水平填充屏幕。我该如何改变。我是 ruby​​ on rails 的新手，不知道添加行的正确语法。

```
<div class="control-group">
        <%= label_tag(:message_body, "Body", :class => "control-label") %>
        <div class="controls">
        <%= text_area_tag :message_body,  @message_body %>
        </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T09:00:12.667

参考[`text_area_tag`](http://api.rubyonrails.org/v2.3.8/classes/ActionView/Helpers/FormTagHelper.html#M002245)

```
<%= text_area_tag :message_body,  @message_body, :size =>"25x10" %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T09:02:43.220

```
text_area_tag 'message_body', nil, :rows => 10, :cols => 25
# => <textarea cols="25" id="body" name="body" rows="10"></textarea> 
```

更多信息 -[文本区域标签](http://api.rubyonrails.org/v2.3.8/classes/ActionView/Helpers/FormTagHelper.html#M002245)

# java - 从 HashMap 中删除键值对在 for 循环期间会出错

> ID：12597967
> 
> 赞同：0
> 
> 时间：2012-09-26T08:52:59.747
> 
> 标签：java, for-loop, nullpointerexception, hashmap

我有一组存储在 HashMap 中的数据。比较数据中的元素，如果满足条件，则将它们从元素中删除。但是，我使用 for 循环来迭代元素，它给了我一个 Java Null Pointer 错误。

```
Example of comparisons:

Item: 0-1
Item: 0-2
Item: 0-3
Item: 0-4
Item: 1-2
Item: 1-3
Item: 1-4
Item: 2-3
Item: 2-4
Item: 3-4

Condition: IF Item 0-1 > (1-2, 1-3 and 1-4): store value 0-1 in another array 
           then remove Item 0-1, 1-2, 1-3 and 1-4 from HahsMap list. ELSE continue to next set
Condition: IF Item 0-2 > (2-3 and 2-4): store value 0-2 in another array 
           then removed Item 0-2, 2-3 and 2-4 from HahsMap list. ELSE continue to next set.

import java.util.HashMap;
import java.util.Map;

public class TestHashMapLoop {
    public static void main(String[] args) 
    {
        Map<String, Integer> myMap = new HashMap<String, Integer>();

        myMap.put("0-1", 33);
        myMap.put("0-2", 29);
        myMap.put("0-3", 14);
        myMap.put("0-4", 8);
        myMap.put("0-5", 18);
        myMap.put("1-2", 41);
        myMap.put("1-3", 15);
        myMap.put("1-4", 17);
        myMap.put("1-5", 28);
        myMap.put("2-3", 1);
        myMap.put("2-4", 16);
        myMap.put("2-5", 81);
        myMap.put("3-4", 12);
        myMap.put("3-5", 11);
        myMap.put("4-5", 21);

        int myMapCount = 6;

        for(int i = 0; i < myMapCount; i++)
        {
            for(int j = i+1; j < myMapCount; j++)
            {
                String indexKey = i+"-"+j;

                for(int k = 0; k < myMapCount; k++)
                {
                    String compareKey = j+"-"+k;                        
                    System.out.println("Index " + indexKey + " : " + compareKey);

                    if((myMap.get(indexKey)) > (myMap.get(compareKey)))
                    {
                        //Store value indexKey in another array (not shown here)
                        System.out.println("Index" + myMap.get(compareKey) + " is removed..");
                        myMap.remove(compareKey);
                    }
                    System.out.println("Index " + myMap.get(indexKey) + " is removed..");
                    myMap.remove(indexKey);
                }
            }
        }  
    }
} 
```

任何人都可以建议即使元素被删除，如何让循环继续进行，还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:00:20.477

在第一次迭代中

```
indexKey = 0-1;
   compareKey=1-0;

if((myMap.get(indexKey)) > (myMap.get(compareKey))) 
```

您的 mymap.get("1-0") 将返回**null**

**编辑：**

正如**菲尔多**在评论中所说：

```
check if myMap.get(indexKey) and myMap.get(compareKey) are NUll  
IF Null
Continue your innermost loop
else continue what ever you were doing . 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T09:47:44.493

删除所有不是特定对`keys`的人将是一项微不足道的任务`value`。`less``key-value`

因为你必须将“0-1”与所有以“1-”开头的元素进行比较，如果你发现所有元素都小于“0-1”，那么只有你会删除它们。所以，你会必须遍历您的地图，以删除它们..

更好的方法是创建另一个`map`，您可以在发现元素“0-1”更大之后将其放入其中。

我宁愿使用增强的for循环..

```
public class TestHashMapLoop {
    public static void main(String[] args) 
    {
        Map<String, Integer> myMap = new HashMap<String, Integer>();
        Map<String, Integer> newMap = new HashMap<String, Integer>();

        /** Initialize Map **/

        boolean flag = true;
        Set<String> keySet = myMap.keySet();

        for (String key: keySet) {
            flag = true;
            for (String innerKey: keySet) {

                if (innerKey.startsWith(String.valueOf(key.charAt(2)))) {

                    if (myMap.get(key) > myMap.get(innerKey)) {
                        continue;

                    } else {
                        flag = false;
                        break;
                    }
                }

            }
            if (flag) {
                newMap.put(key, myMap.get(key));
            }
        }
        System.out.println(newMap);
    }
} 
```

但是，这也不是一个很好的方法。请注意，这样您正在迭代`map with n keys :- n * n times`

您宁愿找到一种更好的方法，也不愿使用 a`HashMap`来做您想做的事情。

# uitextview - insertText 在 iOS6 的 UITextView 中不起作用？

> ID：12597968
> 
> 赞同：1
> 
> 时间：2012-09-26T08:53:02.057
> 
> 标签：uitextview, ios6, xcode4.5

我开发了一个小函数来在 UITextView 中插入文本并自动向下滚动。它适用于 iOS 5，但由于我已使用 iOS6 将 Xcode 更新为 Xcode 4.5，因此此方法不再适用。

你可以帮帮我吗 ？

这是这个方法：

```
- (void) insertTextInAPP : (UITextView*) tv : (NSString*) s {
     NSRange range = {[tv.text length], 0};
     [tv setSelectedRange:range];
     [tv insertText:s];
     [tv insertText:@"\n"];
     range.location = [tv.text length];
     [tv scrollRangeToVisible:range];
} 
```

我像这样使用这个功能：

```
NSString *newEventString = [[NSString alloc] initWithFormat : @"Test"];
[self insertTextInAPP:self.outPutTextView: newEventString]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T10:46:37.833

它在这里工作得很好（iOS 6，Xcode 5.5）。当然，我需要更改`(UITextView) tv`to`(UITextView*) tv`和`"Test"`to `@"Test"`，但除此之外没关系。

当你尝试它时会发生什么？

# java - 播放框架 2 身份验证选项

> ID：12597969
> 
> 赞同：4
> 
> 时间：2012-09-26T08:53:03.210
> 
> 标签：java, authentication, playframework-2.0

我即将为 Play 2 Java 应用程序选择一个身份验证。目前它将是简单的用户名/密码和 Facebook，支持 MongoDB。

看起来有两个选项：[securesocial](https://github.com/jaliss/securesocial)和[play-authenticate](https://github.com/joscha/play-authenticate)

这些如何比较？我可以看到两者都支持通用提供程序，并且基于快速查看播放验证似乎更复杂。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T22:57:51.757

Play-authenticate 基于 SecureSocial 的设计。这两个模块都为 Play 应用程序提供身份验证，所以我想这只是尝试两者并查看最适合您的问题。
SecureSocial 是用 Scala 编写的，并提供 Java 和 Scala 的 API，因此您可以使用您喜欢的语言。[在http://www.securesocial.ws](http://www.securesocial.ws)查看最新的用户指南。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T09:09:41.797

play-authenticate 是“更高级的”，它使用`securesocial's`基本思想 + 另外还包含`deadbolt-2`在内部，可以立即为您提供完整的身份验证授权堆栈。

你写了'*现在它会很简单...... '但是你应该像'**最终它会很简单/高级，所以我需要在一开始就选择正确的解决方案*'来思考这个话题。我建议PA。

另见[其他答案](https://stackoverflow.com/a/11816859/1066240)

# cakephp - 使用 CakePHP 2 在 postLink 内打印

> ID：12597972
> 
> 赞同：0
> 
> 时间：2012-09-26T08:53:07.740
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1, cakephp-2.2

我想知道是否有任何方法可以使用 CakePHP 在 postLink 元素中打印“”。

我想得到这样的东西：

```
<a href="#">&nbsp;</a> 
```

并尝试这个：

```
'.$this->Form->postLink(nl2br("&nbsp;"), array('action'=> 'xxxx')).' 
```

我得到了这个：

```
<a href="#">&amp;nbsp;</a> 
```

这会在链接中打印我而不是打印空白。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T09:11:02.000

由于 postLink() 只不过是 link() 的特殊包装器，因此还应该有`escape`

```
$this->Form->postLink(nl2br('&nbsp;'), array('action' => 'xxxx'), array('escape' => false)); 
```

见[https://github.com/cakephp/cakephp/blob/master/lib/Cake/View/Helper/FormHelper.php#L1582](https://github.com/cakephp/cakephp/blob/master/lib/Cake/View/Helper/FormHelper.php#L1582)

# sql-server-2008 - 使用位数据类型作为复合主键的一部分，好还是坏？

> ID：12597974
> 
> 赞同：2
> 
> 时间：2012-09-26T08:53:16.537
> 
> 标签：sql-server-2008, database-design, primary-key

我只是想检查使用位类型的列（SQL Server 2008）和形成复合主键的 guid 是否是不好的做法。IE

```
id1 (GUID) pk
id2 (GUID) pk
id3 (int) pk
isTrue (bit) pk
col1 (int)
col2 (datetime) 
... 
```

我有 4 列组成我的复合 pk。

请建议它是否好主意。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T09:20:58.203

我认为使用这种组合没有问题，但这里只有一个建议是使用 NEWSEQUENTIALID() 插入 newid() 来填充 id1 和 id2。

# ruby-on-rails - Rails3.1：这是要求我在 Gemfile 中本地开发的 gem/engine 的正确方法吗？

> ID：12597976
> 
> 赞同：0
> 
> 时间：2012-09-26T08:53:19.793
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, gem, bundler, rails-engines

仍然潜入开发我自己的 gem/engine 的有趣（但有点令人困惑）的世界。

我已成功将它部署到我的（私人）GitHub 帐户，但由于 gem 正在持续开发中，我不想一次又一次地部署它然后做`bundle update`等等，所以我找到了需要 gem 的选项指定这样的路径：

```
gem 'my_gem', path: 'path/to/my/gem' 
```

这在开发时效果很好（它甚至似乎在`rails s`运行时从 gem 重新加载更改的文件[至少对于帮助者和视图来说它似乎这样做了，还没有使用控制器和模型，但希望他们会是这种情况, too]，这对于在主机 Rails 应用程序中直接使用引擎的同时开发引擎非常有用）。

但是在部署到生产服务器时，我想从 github 获取 gem：

```
gem 'my_gem', git: "git@github.com:my_company/my_gem" 
```

可悲的是，bundler 不允许多次需要 gem（即使它们在单独`development/test`的`production`组中），所以我正在执行以下操作：

```
if File.directory?('../my_gem')
  gem 'my_gem', path: '../my_gem'
else
  gem 'my_gem', git: "git@github.com:my_company/my_gem.git"
end 
```

到目前为止，这似乎工作得很好（虽然还没有使用 Capistrano 测试部署）。但它留下了一些问题：

1）这是解决我的问题的“正确”方法吗？似乎有点奇怪，我还没有找到更简单的方法，例如：

```
gem 'my_gem', path: '../my_gem', git: "git@github.com:my_company/my_gem.git" 
```

...我希望捆绑程序首先简单地尝试该`:path`选项，如果它不可用，它会尝试该`:git`选项。但据我所知，这样做时，它只使用该`:git`选项。

2）开发这样的宝石是一种好习惯吗？我正在从我的主机应用程序中提取一些功能到一个引擎中，同时，我正在增强这个功能。所以我在我的主机应用程序中加载了引擎 gem，并从我的主机应用程序中更改引擎的代码（感谢上帝！）反映在我的主机应用程序中，而无需重新启动 rails 服务器。这感觉很“正确”，但由于在创建的引擎中有一个虚拟的 Rails 应用程序，我有点不确定我是否应该开发我的引擎与我的主机应用程序严格隔离，或者不。我认为这是一个哲学问题，但也许有人对此有意见并且可以发表利弊？

3) 我如何告诉 Capistrano 始终自动从 GitHub 将我自己的 gem 更新到最新版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T00:34:49.947

你可以做

```
if ENV['RAILS_ENV'] != "development"
  gem 'my_gem', git: "git@github.com:my_company/my_gem.git"
else
  gem 'my_gem', path: '../my_gem'
end 
```

假设它`RAILS_ENV`被传递到`bundle`命令中（使用 capistrano 时也是如此）。

要将您的 gem 更新到最新版本，请尝试制作一个基本上执行此操作的 capistrano 任务

```
/path/to/bundler update my_gem 
```

我真的无法评论你的其他观点。只是我的2美分。

# c# - 数据表中的文本转换

> ID：12597978
> 
> 赞同：0
> 
> 时间：2012-09-26T08:53:30.700
> 
> 标签：c#

在 CSS 中，我们可以使用 text-transform: capitalize; 使每个首字母大写。我有一个数据表，我想让每列中的每个第一个字母都大写。我如何执行文本转换：大写为 sql 数据表？（我使用 c# 作为后面的代码）这是我的代码..

```
public void myfunction(DataSet ds)
{
    DataTable myTable = ds.Tables[0];
    // and now have to transform each first letter capital for 
    // all the columns in this table..
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T09:05:05.263

你需要循环所有`DataRows`：

```
foreach(DataRow r in ds.Tables[0].Rows)
{
    foreach(DataColumn c in ds.Tables[0].Columns)
    {
        if(!r.IsNull(c))
        {
            var field = r[c].ToString().Trim();
            if (field.Length == 1)
                r[c] = field.ToUpper();
            else
                r[c] = char.ToUpper(field[0]) + field.Substring(1);
        }
    }
} 
```

但最好的方法是在 dbms 中进行。

```
UPPER(substring(Column1,1,1)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T09:03:11.347

```
foreach (var column in myTable.Columns.OfType<DataColumn>())
{
    string name = column.ColumnName;

    char[] chars = name.ToCharArray();
    chars[0] = char.ToUpper(chars[0]);

    column.ColumnName = new string(chars);
} 
```

另外的选择：

```
 string name = column.ColumnName;
 column.ColumnName =  char.ToUpper(name.First()) 
                              + new string(name.Skip(1).ToArray()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T09:03:22.877

你可以试试

```
foreach(var column in YourDataTable.Columns)
{
   var result = UppercaseFirst(column.ColumnName);
   Console.WriteLine(result);

   column.ColumnName = result;
} 
```

方法

```
public string UppercaseFirst(string s)
{
    // Check for empty string.
    if (string.IsNullOrEmpty(s))
    {
        return string.Empty;
    }
    // Return char and concat substring.
    return char.ToUpper(s[0]) + s.Substring(1);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T09:03:55.300

如果我理解正确的问题

```
foreach (DataColumn column in myTable.Columns)
{
    column.ColumnName=UppercaseFirst(column.ColumnName);
}

static string UppercaseFirst(string s){
    // Check for empty string.
    if (string.IsNullOrEmpty(s))
    {
        return string.Empty;
    }
    // Return char and concat substring.
    return char.ToUpper(s[0]) + s.Substring(1);
} 
```

由[DotNetPerls提供的 UppercaseFirst](http://www.dotnetperls.com/uppercase-first-letter)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T09:01:04.143

尝试这个

```
string ToCamelCase(string input)
{
    string output = string.Empty;
    foreach (string word in input.Split(' '))
        output += word[0].ToString().ToUpper() + word.Substring(1) + " ";
    return output.Trim();
} 
```

# php - VirusTotal 服务 API 始终返回响应代码 1

> ID：12597981
> 
> 赞同：2
> 
> 时间：2012-09-26T08:53:38.800
> 
> 标签：php, validation, url

我正在尝试使用[VirusTotal](https://www.virustotal.com/documentation/public-api/)服务 API 扫描 URL，但`response_code = 1`即使 URL 不存在也总是会收到：

```
stdClass Object
(
    [permalink] => https://www.virustotal.com/url/a92faaf82a911b2fe10ecbc51c6432f903b2a66d0686d6be0eeec78abf17cded/analysis/1348649385/
    [resource] => http://www.sdfjiodsffnsdklfjksdhf.com/
    [url] => http://www.sdfjiodsffnsdklfjksdhf.com/
    [response_code] => 1
    [scan_date] => 2012-09-26 08:49:45
    [scan_id] => a92faaf82a911b2fe10ecbc51c6432f903b2a66d0686d6be0eeec78abf17cded-1348649385
    [verbose_msg] => Scan request successfully queued, come back later for the report
) 
```

但在[上面的手册](https://www.virustotal.com/documentation/public-api/)中，他们写道：

“response_code：如果您搜索的项目不在 VirusTotal 的数据集中，则此结果将为 0。如果请求的项目仍在排队等待分析，则为 -2。如果该项目确实存在并且可以检索，则为1\. 其他情况在下文详述。”

**我为此使用[VirusTotalApiV2 类](http://www.ab-weblog.com/en/php-script-for-accessing-virustotal-api-version-2-0/)。**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T07:43:57.480

已收到支持的答复：

> 你好，
> 
> 也许文档不够清楚。
> 
> 每当您发送一个 URL 进行扫描时，该 URL 可能会或可能不会在同一时刻被扫描，您所做的就是将其排入队列以进行扫描。response_code 等于 1 表示您的入队成功，将尽快执行扫描（API 的优先级低于 Web 界面）。
> 
> 为了检索扫描结果，您必须稍后返回并使用以下命令索取它们：
> 
> [https://www.virustotal.com/documentation/public-api/#getting-url-scans](https://www.virustotal.com/documentation/public-api/#getting-url-scans)
> 
> 理想的工作流程如下：
> 
> 1) 检查过去是否已经扫描过 URL：
> 
> [https://www.virustotal.com/documentation/public-api/#getting-url-scans](https://www.virustotal.com/documentation/public-api/#getting-url-scans)
> 
> 如果确实已扫描并且扫描日期足够近，请使用您刚刚检索到的报告，如果没有，请转到 [2]。
> 
> 2) 使用以下命令进行扫描：
> 
> [https://www.virustotal.com/documentation/public-api/#scanning-urls](https://www.virustotal.com/documentation/public-api/#scanning-urls)
> 
> 3) 稍等片刻（为了安全起见需要几个小时），然后在 URL 上请求报告：
> 
> [https://www.virustotal.com/documentation/private-api/#getting-url-scans](https://www.virustotal.com/documentation/private-api/#getting-url-scans)
> 
> 如果它仍然没有被扫描，请稍等片刻，稍后再轮询 API。
> 
> 希望这很清楚，如果您仍然遇到问题，请随时与我们联系。
> 
> 问候。

# java - 我在运行 debian wheezy 的树莓派上的 Java 蓝牙服务器需要 bluecove 本机库 - 我在哪里可以找到它？

> ID：12597986
> 
> 赞同：2
> 
> 时间：2012-09-26T08:53:50.537
> 
> 标签：java, bluetooth, debian, raspberry-pi, bluecove

我有一个在 Windows 机器上运行的 Java 蓝牙服务器，我想将它移植到 Raspberry pi。我在 Java 方面有很多经验，但在蓝牙或 Linux 方面却很少。

pi 目前有 Debian Wheezy 操作系统，我已经安装了蓝牙和 Java ok，并将 bluecove-gpl 和 bluecove jar 放在类路径中。

但是，当我尝试运行服务器时，Java 抱怨

> 本机库 bluecove_arm 不可用。

我尝试`libbluecove_arm.so`从 gpl jar 重命名但没有成功，即使设置 `-Dbluecove.native.path`指向它也是如此。

有谁知道在哪里可以找到正确的库，应该叫什么，应该放在哪里？

[解决了}

在 google 代码站点上找到了一个 sh 构建脚本，该脚本展示了如何编译 java 源文件、生成 jni 头文件、编译和链接 c 文件以生成 so 库文件。唯一的问题是库文件需要重命名为 libbluecove_arm.so 才能找到。全部在pi上完成！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-06T03:51:21.470

```
mkdir bluecovelib

cd bluecovelib

wget http://snapshot.bluecove.org/distribution/download/2.1.1-SNAPSHOT/2.1.1-SNAPSHOT.63/bluecove-gpl-2.1.1-SNAPSHOT-sources.tar.gz

tar -zxvf bluecove-gpl-2.1.1-SNAPSHOT-sources.tar.gz

mkdir -p bluecove/target

cd bluecove/target

wget http://snapshot.bluecove.org/distribution/download/2.1.1-SNAPSHOT/2.1.1-SNAPSHOT.63/bluecove-2.1.1-SNAPSHOT.jar

cd ../../bluecove-gpl-2.1.1-SNAPSHOT
ant all 
```

[http://privateblog.by/raspberry-pi-kak-rabotat-s-bluetooth-na-java/](http://privateblog.by/raspberry-pi-kak-rabotat-s-bluetooth-na-java/)

# c# - 为什么重载方法在仅符合 CLS 的参考方面有所不同

> ID：12597991
> 
> 赞同：7
> 
> 时间：2012-09-26T08:54:12.737
> 
> 标签：c#, cls-compliant

公共语言规范对方法重载非常严格。

> 方法只允许根据其参数的数量和类型进行重载，如果是泛型方法，则可以根据其泛型参数的数量进行重载。

为什么根据 csc，此代码符合 CLS（无 CS3006 警告）？

```
using System;

[assembly: CLSCompliant (true)]

public class Test {
    public static void Expect<T>(T arg)
    {
    }

    public static void Expect<T>(ref T arg)
    {
    }

    public static void Main ()
    {
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T09:17:32.297

这是符合 CLS 的，因为类型不同。重载规则要求满足一个（或多个）条件，而不是同时满足所有条件。

A `ref T`（或`out T`，使用相同类型的不同语义）正在声明对`T`引用（对于类）或实例（在值类型的情况下）的“引用”。

有关更多详细信息，请查看该[`Type.MakeByRefType()`](http://msdn.microsoft.com/en-us/library/system.type.makebyreftype.aspx)方法 - 它创建表示对原始类型的引用的类型，例如对于 a`T`这返回 a `T&`（在 C++ 表示法中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-12T08:20:36.460

To be clear, in general, overloaded methods differing only in ref or out, or in array rank, are **not** CLS-compliant, according to [MSDN](http://msdn.microsoft.com/en-us/library/8k2kbc25(v=vs.90).aspx).

You can verify the compiler does indeed check for this specific case by writing a simple non-generic version:

```
using System;

[assembly: CLSCompliant (true)]

public class Test {
    public static void Expect(int arg)
    {
    }

    public static void Expect(ref int arg)
    {
    }

    public static void Main ()
    {
    }
} 
```

However, you seem to have hit upon a compiler edge-case, since if you add in the generic method overloads, the compiler doesn't seem to complain.

I would say this is either a bug in the compiler (as in this similar [question](https://stackoverflow.com/questions/897249/is-warning-cs3006-valid-in-this-case)), or there is indeed a more relaxed specification for generics, since they are a latter addition to the specification.

I would err on the side of some kind of compiler limitation, given that this example also raises CS3006:

```
using System;

[assembly: CLSCompliant(true)]

public class Test<T>
{
    public static void Expect(T arg)
    {
    }

    public static void Expect(ref T arg)
    {
    }

    public static void Main()
    {
    }
} 
```

Apparently adding the generics to the class, rather than the method, raises the compiler's attention...

# winforms - 在 Visual Studio Toolbox 中添加多个版本的 WinForms 控件

> ID：12597994
> 
> 赞同：2
> 
> 时间：2012-09-26T08:54:17.727
> 
> 标签：winforms, visual-studio, ide, controls, toolbox

我有多个针对不同版本的 .NET Framework 的 WinForms 控件的 DLL，需要将它们全部添加到 Visual Studio 工具箱中，同时只显示最适合当前所选版本的 .NET 的一个。

该控件在针对不同版本的 .NET 编译时具有不同的功能，这就是为什么最好只显示最“本机”版本的原因。例如，控件在 .NET 4.0 客户端配置文件中删除了一些功能，或者在可用时使用了 .NET 3.0 功能（在 .NET 2.0 中不可用）。

问题是控件具有相同的名称并使用相同的强名称密钥 (SNK) 进行签名。

我可以修改源代码，但是如何使组件的所有版本都驻留在 VS Toolbox 中？

# web-services - Magento 与第三方应用程序的集成

> ID：12597995
> 
> 赞同：1
> 
> 时间：2012-09-26T08:54:18.173
> 
> 标签：web-services, magento

我是 magento 的新手，我有任务将第三方应用程序（内置于 Dot Net）与 magento 集成。虽然我知道 Magento 提供 Web 服务，我们可以将其与第三方应用程序集成并检索从 Magento 到第三方应用程序的所有电子商务记录。

但在我的情况下，我有一个奇怪的要求，我必须将第三方应用程序集成到 magento 中，并且只使用 magento 的购物车功能。这里要注意的是我不想在 magento 中创建产品或目录，但我必须从中获取所有数据。净应用。购物成功后，将发票号发回.net 应用程序。

谁能告诉我是否可以集成第三方应用程序并在 magento 中获取其所有数据。

简而言之，我会说，是否可以在 magento 中使用第三方应用程序 Web 服务。