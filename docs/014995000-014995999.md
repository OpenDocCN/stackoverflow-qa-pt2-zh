# StackOverflow 问答 14995000-14995999

# sql - SQL Inner 连接两个以上的表

> ID：14995000
> 
> 赞同：76
> 
> 时间：2013-02-21T05:11:38.397
> 
> 标签：sql, inner-join

我目前可以通过以下方式查询两个表关于外键/主键是否相等的连接。

```
 $result = mysql_query("SELECT * FROM `table1` 
                         INNER JOIN 
                       `table2` ON table1.primaryKey=table2.table1Id"); 
```

我想将此扩展到多个表（所有表都具有相同的外键）。我正在尝试以下不返回任何内容的代码。谁能指出我做错了什么？

```
 $result = mysql_query("SELECT * FROM `table1` 
                        INNER JOIN `table2` 
                        INNER JOIN table3 
                        ON table1.primaryKey=table2.table1Id=table3.table1Id"); 
```

* * *

## 回答 #1

> 赞同：164
> 
> 时间：2013-02-21T05:13:28.467

```
SELECT * 
FROM table1 
INNER JOIN table2
      ON table1.primaryKey=table2.table1Id
INNER JOIN table3
      ON table1.primaryKey=table3.table1Id 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-02-21T05:24:10.690

这是连接三个或更多表的通用 SQL 查询语法。此 SQL 查询应该适用于所有主要的关系数据库，例如 MySQL、Oracle、Microsoft SQLServer、Sybase 和 PostgreSQL：

```
SELECT t1.col, t3.col FROM table1 join table2 ON table1.primarykey = table2.foreignkey
                                  join table3 ON table2.primarykey = table3.foreignkey 
```

我们首先连接表 1 和表 2，它们生成一个临时表，其中包含来自 table1 和 table2 的组合数据，然后将其连接到 table3。这个公式可以扩展到超过3个表到N个表，你只需要确保SQL查询应该有N-1个连接语句才能连接N个表。就像连接两个表，我们需要 1 个连接语句，连接 3 个表，我们需要 2 个连接语句。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-10-04T13:27:21.443

```
SELECT eb.n_EmpId,
   em.s_EmpName,
   deg.s_DesignationName,
   dm.s_DeptName
FROM tbl_EmployeeMaster em
 INNER JOIN tbl_DesignationMaster deg ON em.n_DesignationId=deg.n_DesignationId
 INNER JOIN tbl_DepartmentMaster dm ON dm.n_DeptId = em.n_DepartmentId
 INNER JOIN tbl_EmployeeBranch eb ON eb.n_BranchId = em.n_BranchId; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-17T14:15:33.877

一个可能的解决方案：

```
SELECT Company.Company_Id,Company.Company_Name,
    Invoice_Details.Invoice_No, Product_Details.Price
  FROM Company inner join Invoice_Details
    ON Company.Company_Id=Invoice_Details.Company_Id
 INNER JOIN Product_Details
        ON Invoice_Details.Invoice_No= Product_Details.Invoice_No
 WHERE Price='60000'; 
```

-- tets 变化

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T05:15:22.117

正确的[语法](http://msdn.microsoft.com/en-us/library/aa213227%28v=sql.80%29.aspx)如下：

```
SELECT * FROM table1 INNER JOIN table2 ON table1.primaryKey = table2.ForeignKey
INNER JOIN table3 ON table3.primaryKey = table2.ForeignKey 
```

或者在 table1 上加入 table3 的最后一行，如：

```
ON table3.ForeignKey= table1.PrimaryKey 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-18T02:11:45.170

```
select * from Employee inner join [Order] 
On Employee.Employee_id=[Order].Employee_id
inner join Book 
On Book.Book_id=[Order].Book_id
inner join Book_Author
On Book_Author.Book_id=Book.Book_id
inner join Author
On Book_Author.Author_id=Author.Author_id; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-12-10T10:34:17.740

请在此处找到超过 2 个表的内部联接

这里有 4 个表名，比如

1.  订单
2.  顾客
3.  学生
4.  讲师

所以 SQL 代码将是：

```
select o.orderid, c.customername, l.lname, s.studadd, s.studmarks 
from orders o 
    inner join customers c on o.customrid = c.customerid 
    inner join lecturer l  on o.customrid = l.id 
    inner join student s   on o.customrid=s.studmarks; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-08-25T14:04:22.330

试试下面给出的这个方法，修改以满足您的需要。

```
SELECT
  employment_status.staff_type,
  COUNT(monthly_pay_register.age),
  monthly_pay_register.BASIC_SALARY,
  monthly_pay_register.TOTAL_MONTHLY_ALLOWANCES,
  monthly_pay_register.MONTHLY_GROSS,
  monthly_pay_register.TOTAL_MONTHLY_DEDUCTIONS,
  monthly_pay_register.MONTHLY_PAY
FROM 
  (monthly_pay_register INNER JOIN deduction_logs 
ON
  monthly_pay_register.employee_info_employee_no = deduction_logs.employee_no)
INNER JOIN
  employment_status ON deduction_logs.employee_no = employment_status.employee_no
WHERE
  monthly_pay_register.`YEAR`=2017
and 
  monthly_pay_register.`MONTH`='may' 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-05-21T12:04:56.550

```
select WucsName as WUCS_Name,Year,Tot_Households,Tot_Households,Tot_Male_Farmers  from tbl_Gender
INNER JOIN tblWUCS
ON tbl_Gender.WUCS_id =tblWUCS .WucsId 
INNER JOIN tblYear
ON tbl_Gender.YearID=tblYear.yearID 
```

有 3 个表 1\. tbl_Gender 2\. tblWUCS 3\. tblYear

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2014-02-21T04:16:21.953

# 试试这个这里的语法是

```
SELECT table1 .columnName, table3 .columnName 
   FROM table1 
     inner join table2 
          ON table1.primarykey = table2.foreignkey 
     inner join table3 
          ON table2.primarykey = table3.foreignkey 
```

例如： *`Select SalesHeader.invoiceDate,ActualSales,DeptName,tblInvDepartment.DeptCode ,LocationCode from SalesDetail Inner Join SalesHeader on SalesDetail.InvoiceNo = SalesHeader.InvoiceNo inner join tblInvDepartment on tblInvDepartment.DeptCode = SalesDetail.DeptCode`*

# javascript - 切换交互中 JQuery .is() 的问题

> ID：14995009
> 
> 赞同：1
> 
> 时间：2013-02-21T05:12:48.600
> 
> 标签：javascript, jquery, coffeescript

我有这个滑块交互，我想在任何地方折叠或展开 div，除非他们单击那个大 div 中的链接，然后我只希望链接在没有任何折叠/展开的情况下工作。问题是， .is() （看看我在那里做了什么？）。

我正在使用 jquery。

这是代码（对不起，它在coffeescript中，但我懒得反向翻译）：

```
$ ->
  # SLIDER INTERACTION
  $(".page-content").click (e) ->
    # This first part is just because ie only recognizes srcElement, not target
    if e.target
      $targ = e.target
    else $targ = e.srcElement  if e.srcElement

    # Now I check to see if they clicked a link, if so, follow the link
    if $targ.is("a")
      true

    # If they clicked a collapsed profile, expand it
    else if $(this).hasClass(".collapsed")
      $(this).css "margin-bottom": "0px"
      $(this).removeClass ".collapsed"
      $(this).find(".review-btns, .section-header, .dl-horizontal").show()

    # Otherwise, collapse it
    else
      $(this).css "margin-bottom": "20px"
      $(this).addClass ".collapsed"
      $(this).find(".review-btns, .section-header, .dl-horizontal").hide() 
```

现在这对我来说似乎很可靠，但是当我单击任何内容时，我会在控制台中收到此错误：

```
Uncaught TypeError: Object #<HTMLDivElement> has no method 'is' 
```

我一直用头撞桌子。这可能是愚蠢的，我在这里超出了我的深度。

在此先感谢，马特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T05:23:09.800

我不知道coffeescript，但很明显你的错误源于`$targ`一个DOM元素，而不是一个jQuery对象（因此没有[`is`](http://api.jquery.com/is/)方法）。我相信要修复它，您只需要包装它：

```
if e.target
  $targ = $(e.target)
else $targ = $(e.srcElement)  if e.srcElement 
```

（我相信这是正确的方法，在这个网站上看到[其他例子](https://stackoverflow.com/q/10613787/520779)，但如果不是，我恐怕无法帮助你......）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T05:23:03.497

而不是`$targ = e.target`使用`$targ = $(e.target)`

或者您可以将 if 条件更新为

```
if $($targ).is("a")
      true 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T05:28:16.587

快速浏览一下，您似乎没有将目标作为 jQuery 对象及其方法。

尝试改变

```
if e.target
  $targ = e.target
else $targ = e.srcElement  if e.srcElement 
```

到

```
if e.target
  $targ = $(e.target)
else $targ = $(e.srcElement)  if e.srcElement 
```

这应该将 $targ 设置为被引用节点的实际 jquery 对象。

# java - jsp显示时如何去除多余数据

> ID：14995012
> 
> 赞同：2
> 
> 时间：2013-02-21T05:13:18.777
> 
> 标签：java, mysql, sql, jsp, jdbc

我正在从三个表中获取数据。我想在jsp页面中显示这些数据。我的问题是加入后数据是多余的

我不想显示冗余数据。

我的桌子是

```
 create table questions(id integer,title varchar(140),body varchar(2000),
 primary key(id));

 create table question_tags(id integer,tag_name varchar(50),question_id integer,
 primary key(id),foreign key(question_id) references questions(id));

create table answers(id integer,answer varchar(2000),question_id integer,
primary key(id),foreign key(question_id) references questions(id)); 
```

查询以获取数据

```
SELECT questions.*,`question_tags`.*, `answers`.* 
FROM `questions`
JOIN  `answers` 
ON `questions`.`id` = `answers`.`question_id`
JOIN `question_tags` 
ON `questions`.`id` = `question_tags`.`question_id`
WHERE `questions`.`id` = '1' 
```

获取数据后的结果

```
 ID     TITLE   BODY    TAG_NAME    QUESTION_ID ANSWER
  1     a   hello   java                 1          good
  1     a   hello   java                 1          exellent
  1     a   hello   java                 1          ok
  1     a   hello   mysql                1          good
  1     a   hello   mysql                1          exellent
  1     a   hello   mysql                1          ok
  1         a   hello   jquery               1          good
  1     a   hello   jquery               1          exellent
  1     a   hello   jquery               1          ok 
```

在这里，我正在使用结果集填充数据并在 jsp 中显示

我想在我的jsp中显示以下数据

```
 question.id|question.title|question.body|tag_names | answers
      1               a           hello       java        good  
                                              mysql       excellent
                                              jquery      ok 
```

这仅适用于几行。这里总的o / p行是1 * 3 * 3 = 9如果表中的数据增加了，那么重复的数据就会增加如何解决它。这是上面代码的[sql fiddle](http://sqlfiddle.com/#!2/e9606/21)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T05:16:07.927

将`distinct`子句与您的选择语句一起使用以获取没有重复的记录

```
SELECT distinct questions.*,`question_tags`.*, `answers`.* 
FROM `questions`
JOIN  `answers` 
ON `questions`.`id` = `answers`.`question_id`
JOIN `question_tags` 
ON `questions`.`id` = `question_tags`.`question_id`
WHERE `questions`.`id` = '1' 
```

**更新**

```
ResultSet rs = st.execute();   //Assuming that you have the resultset

Set<String> id = new LinkedHashSet<String>();
Set<String> body = new LinkedHashSet<String>();
Set<String> tag_name = new LinkedHashSet<String>();
Set<String> answer = new LinkedHashSet<String>();

while(rs.next())
{
    id.add(rs.getString("id"));
    body.add(rs.getString("body"));
    tag_name.add(rs.getString("tag_name"));
    answer.add(rs.getString("answer"));
} 
```

因为`LinkedHashSet`唯一不同的值将被存储。现在你需要迭代来填充你的表

**注意**：这仅限于特定的问题 ID

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T13:56:29.440

我期待的是这个

```
SELECT  `questions`.`id` AS  `question_id` ,
(
SELECT GROUP_CONCAT(  `question_tags`.`tag_name` SEPARATOR ';') 
FROM  `question_tags` 
WHERE  `question_id` =1
) AS  `Tags` ,
(
SELECT GROUP_CONCAT(  `answers`.`answer` SEPARATOR ';' ) 
FROM  `answers` 
WHERE  `question_id` =1
) AS  `Answers` 
FROM  `questions` 
WHERE  `questions`.`id` =1 
```

# c# - 如何将按钮连接到 GridView 中的复选框，并从 GridView 中删除选定的行（通过集成在 GridView 中的 CheckBoxes 勾选）？

> ID：14995015
> 
> 赞同：1
> 
> 时间：2013-02-21T05:13:29.510
> 
> 标签：c#, asp.net, button, gridview, datatable

我创建了一个 Gridview，其中包含从 TextBox 中提取的数据。如果需要，我在 GridView 上有一个“删除链接”可以从 GridView 中删除该行。

现在我想对其进行一些更改。而不是 GridView 上的**“删除链接”**，我想要 GridView 的每一行上的复选框。在 GridView 之外，应该有一个 Button。单击该按钮时，应删除通过 Gridview 上的复选框选择的行。

**必须对以下代码进行哪些更改才能实现此功能？**请清楚地说明更改。

**默认.aspx**

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="_Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>

        <br />

        Employee 
        ID&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
        <br />
        <br />
        Employee Name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <asp:TextBox ID="TextBox2" runat="server"></asp:TextBox>
        <br />
        <br />
        Salary&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <asp:TextBox ID="TextBox3" runat="server"></asp:TextBox>
        <br />
        <br />
        <br />
<asp:Button ID="Button1" runat="server" Text="Add to Grid" OnClick="Button1_Click" />
        <br />
        <br />
        <br />
        <br />
        <br />
<asp:Button ID="Button2" runat="server" Text="Export data to Database" OnClick="Button2_Click" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <br />
        <br />
        <asp:Label ID="Label1" runat="server"></asp:Label>
        <br />
        <br />

<asp:GridView ID="GridView1" runat="server" DataKeyNames="EmpID" AutoGenerateColumns="false"
        OnRowEditing="GridView1_RowEditing" OnRowCancelingEdit="GridView1_RowCancelingEdit"
        OnRowDeleting="GridView1_RowDeleting" OnPageIndexChanging="GridView1_PageIndexChanging"
        PageSize="5" AllowPaging="true" OnRowUpdating="GridView1_RowUpdating" Width="800">
    <Columns>
        <asp:TemplateField HeaderText="Employee ID">
            <ItemTemplate>
                <%#Eval("EmpID")%>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Employee Name">
            <ItemTemplate>
                <%#Eval("EmpName")%>
            </ItemTemplate>
            <EditItemTemplate>
                <asp:TextBox ID="txtEmpName" runat="server" Text='<%#Eval("EmpName") %>'></asp:TextBox>
            </EditItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Salary">
            <ItemTemplate>
                <%#Eval("EmpSalary")%>
            </ItemTemplate>
            <EditItemTemplate>
                <asp:TextBox ID="txtEmpSalary" runat="server" Text='<%#Eval("EmpSalary") %>'></asp:TextBox>
            </EditItemTemplate>
        </asp:TemplateField>
        <asp:CommandField HeaderText="Modify" ShowEditButton="true" EditText="Edit">
            <ControlStyle Width="50" />
        </asp:CommandField>
        <asp:TemplateField HeaderText="Delete">
            <ItemTemplate>
                <asp:LinkButton ID="lnkDelete" CommandName="Delete" runat="server" OnClientClick="return confirm('Are you sure you want to delete these records?');">Delete</asp:LinkButton>
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView>

    </div>
    <p style="width: 799px">
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <asp:Button ID="Button3" runat="server" onclick="Button3_Click" 
            Text="Delete Checked items" Width="162px" />
    </p>
    <p>
        &nbsp;</p>
    <p>
        &nbsp;</p>
    <p>
<asp:GridView ID="GridView2" runat="server" BackColor="White" 
            BorderColor="Black" BorderStyle="Solid" BorderWidth="1px" CellPadding="3" 
            Width="580px">
            <PagerStyle HorizontalAlign="Left" />
</asp:GridView>
    </p>
    </form>
    <p>
        &nbsp;</p>
</body>
</html> 
```

**示例.aspx.cs**

```
using System;
using System.Collections;
using System.Collections.Generic;
using System.Configuration;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.HtmlControls;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Linq;
using System.Xml.Linq;
using System.Data;
using System.Data.SqlClient;

public partial class _Default : System.Web.UI.Page
{
    SqlConnection sqlcon = new SqlConnection(ConfigurationManager.AppSettings["constring"]);
    SqlCommand sqlcmd = new SqlCommand();
    SqlDataAdapter da = new SqlDataAdapter();
    DataTable dt = new DataTable();
    DataTable dt1 = new DataTable();
    DataRow dr;
    DataRow dr1;
    DataSet ds = new DataSet();

    protected void Page_Load(object sender, EventArgs e)
    {
        Label1.Text = "";
        //lbldbmsg.Text = "";
        if (!Page.IsPostBack)
        {
            dt.Columns.Add("EmpID");
            dt.Columns.Add("EmpName");
            dt.Columns.Add("EmpSalary");
            Session["reptable"] = dt;
            GridData();            
        }
    }

    protected void GridView1_RowEditing(object sender, GridViewEditEventArgs e)
    {
        GridView1.EditIndex = e.NewEditIndex;
        GridData();
    }

    void GridData()
    {
        GridView1.DataSource = (DataTable)Session["reptable"];
        GridView1.DataBind();
    }

    protected void GridView1_RowCancelingEdit(object sender, GridViewCancelEditEventArgs e)
    {
        GridView1.EditIndex = -1;
        GridData();
    }

    protected void GridView1_RowUpdating(object sender, GridViewUpdateEventArgs e)
    {
        GridViewRow row = GridView1.Rows[e.RowIndex];
        string EmpID;

        EmpID = GridView1.DataKeys[e.RowIndex].Value.ToString();

        TextBox EmpName = (TextBox)row.FindControl("txtEmpName");
        TextBox EmpSalary = (TextBox)row.FindControl("txtEmpSalary");

        if (Session["reptable"] != null)
        {
            DataTable dt1 = new DataTable();
            dt1.Clear();
            dt1 = Session["reptable"] as DataTable;
            for (int i = 0; i <= dt1.Rows.Count - 1; i++)
            {
                DataRow dr;
                if (dt1.Rows[i][0].ToString() == EmpID)
                {
                    dr = dt1.Rows[i];
                    dt1.Rows[i].Delete();
                }
            }
            Session.Remove("reptable");
            Session["reptable"] = dt1;

            //add that updated row here
            dt = (DataTable)Session["reptable"];
            dr1 = dt.NewRow();
            dr1["EmpID"] = EmpID;
            dr1["EmpName"] = EmpName.Text;
            dr1["EmpSalary"] = EmpSalary.Text;
            dt.Rows.Add(dr1);
            Session.Remove("reptable");
            Session["reptable"] = dt;
        }

        GridView1.EditIndex = -1;
        GridData();
    }

    protected void GridView1_RowDeleting(object sender, GridViewDeleteEventArgs e)
    {
        string EmpID;
        EmpID = GridView1.DataKeys[e.RowIndex].Value.ToString();
        if (Session["reptable"] != null)
        {
            DataTable dt1 = new DataTable();
            dt1.Clear();
            dt1 = Session["reptable"] as DataTable;
            for (int i = 0; i <= dt1.Rows.Count - 1; i++)
            {
                DataRow dr;
                if (dt1.Rows[i][0].ToString() == EmpID)
                {
                    dr = dt1.Rows[i];
                    dt1.Rows[i].Delete();
                    //dt1.Rows.Remove(dr);
                }
            }
            Session.Remove("reptable");
            Session["reptable"] = dt1;
        }
        GridData();
    }

    protected void GridView1_PageIndexChanging(object sender, GridViewPageEventArgs e)
    {
        GridView1.PageIndex = e.NewPageIndex;
        GridData();
    }

    protected void Button1_Click(object sender, EventArgs e)
    {
        dt = (DataTable)Session["reptable"];
        dr = dt.NewRow();
        dr["EmpID"] = TextBox1.Text;
        dr["EmpName"] = TextBox2.Text;
        dr["EmpSalary"] = TextBox3.Text;
        dt.Rows.Add(dr);
        Session.Remove("reptable");
        Session["reptable"] = dt;
        GridData();
        TextBox1.Text = "";
        TextBox2.Text = "";
        TextBox3.Text = "";
    }

    //Bulk Insert data into sql server database
    protected void Button2_Click(object sender, EventArgs e)
    {
        dt = (DataTable)Session["reptable"];
        //Upload data to Database using bulk copy
        SqlBulkCopy sqlBulk = new SqlBulkCopy(ConfigurationManager.AppSettings["constring"]);
        sqlBulk.DestinationTableName = "Emp";          //table name
        sqlBulk.WriteToServer(dt);

        //remove data after insert
        dt.Clear();
        Session["reptable"] = dt;
        GridData();
        Label1.Text = "All Records Inserted successfully into the database";

    }

    protected void Button3_Click(object sender, EventArgs e)
    {

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T05:34:36.560

试试这个..

**ASPX 代码**：

在gridview的项目模板中添加复选框控件..

```
 <asp:TemplateField>
 <ItemTemplate>
 <asp:CheckBox ID="chkdelete" runat="server" />
 </ItemTemplate>
 </asp:TemplateField> 
```

**C#代码**：

```
 protected void Button3_Click(object sender, EventArgs e)
{
    foreach (GridViewRow gvrow in GridView1.Rows)
    {
        //Finiding checkbox control in gridview for particular row
        CheckBox chkdelete = (CheckBox)gvrow.FindControl("chkdelete");
        //Condition to check checkbox selected or not
        if (chkdelete.Checked)
        {
            if (Session["reptable"] != null)
            {
                string EmpID = GridView1.DataKeys[gvrow.RowIndex].Value.ToString();
                DataTable dt1 = new DataTable();
                dt1.Clear();
                dt1 = Session["reptable"] as DataTable;
                for (int i = 0; i <= dt1.Rows.Count - 1; i++)
                {
                    DataRow dr;
                    if (dt1.Rows[i][0].ToString() == EmpID)
                    {
                        dr = dt1.Rows[i];
                        dt1.Rows[i].Delete();
                        //dt1.Rows.Remove(dr);
                    }
                }
                //Session.Remove("reptable");
                Session["reptable"] = dt1;
            }

        }
    }
  GridData();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T06:27:32.447

ASPX 的变化：

从

```
<asp:TemplateField HeaderText="Employee ID">
            <ItemTemplate>
                <%#Eval("EmpID")%>
            </ItemTemplate>
 </asp:TemplateField> 
```

到

```
<asp:TemplateField HeaderText="Employee ID">
            <ItemTemplate>
                <%#Eval("EmpID")%>
<asp:CheckBox ID="chkdelete" value='<%#Eval("EmpID")%>' runat="server" />
            </ItemTemplate>
        </asp:TemplateField> 
```

注意单引号

> value='<%#Eval("EmpID")%>'

代码后面的代码：

```
 protected void Button3_Click(object sender, EventArgs e)
        {
    for(int i = 0; i< GridView1.Rows; i++)
{
If((GridView1.Rows[i].FindControl("ckhdelete") as CheckBox) != null && (GridView1.Rows[i].FindControl("ckhdelete") as CheckBox).checked)
{
//Delete dataRow with EmpID = convertToInt( (GridView1.Rows[i].FindControl("ckhdelete") as CheckBox).value);
}
}
        } 
```

编辑：这在分页的情况下不起作用，您将会话或限制当前页面的行只会被删除。

# javascript - 这个例子是否证明 JavaScript 不是真正的静态作用域？

> ID：14995018
> 
> 赞同：0
> 
> 时间：2013-02-21T05:13:49.173
> 
> 标签：javascript

所以我正在阅读[这篇](http://mark-story.com/posts/view/picking-up-javascript-closures-and-lexical-scoping)关于 JavaScript Lexical scoping 的文章，作者指出“JavaScript 并不是真正的静态”。然后，他通过以下示例“证明”了这一点：

```
var count = 5;

function tellCount() {
    console.log(count);
};
tellCount(); //prints 5
count = 7;
tellCount(); //prints 7; 
```

我在这里想念什么？他将全局命名空间中的count变量设为5，调用引用全局变量的方法并打印出5，然后将全局变量改为7并再次调用该方法。如果我没记错的话，更改全局变量并重新调用使用该变量的方法将在任何静态范围的语言中执行此操作。

作者是否真的证明了 JavaScript 不是真正的静态作用域？

注意：我知道 JavaScript 中的 eval 在 JS 中引入了一种动态范围，但我更感兴趣的是证明/反驳作者所写的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T05:51:08.587

你没有遗漏任何东西，作者错了。词法范围意味着闭包*可以访问*定义函数中的变量，而不是在定义闭包时神奇地复制它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T05:41:42.740

我认为这是一个不好的例子。文章的下一个例子展示了更有效的参考机制：

```
var numbers = [1, 2, 3, 4, 5];
for (var i in numbers) {
    var num = numbers[i];
    var anchor = document.createElement('A');
    anchor.setAttribute('href', '#');
    anchor.appendChild(document.createTextNode(num));
    document.body.appendChild(anchor);

    anchor.addEventListener('click', function(event) {
        alert('My number is ' + num);
        event.preventDefault();
    }, false);
} 
```

# android - 将文件从android上传到wcf服务

> ID：14995023
> 
> 赞同：2
> 
> 时间：2013-02-21T05:14:06.040
> 
> 标签：android, asp.net, wcf, file-upload

当我将 doc 文件从 android 发送到 wcf 服务时，我在 wcf 端遇到问题。问题是在 wcf 端打开上传的文件时，doc 文件的内容是一些不可读的文本。下面是代码： **wcf 代码**

```
FileStream fileToupload = new FileStream("D:\\myfile.doc", FileMode.Create, FileAccess.Write);

    byte[] bytearray = new byte[10000];
    int bytesRead, totalBytesRead = 0;
    do
    {
    bytesRead = mystream.Read(bytearray, 0, bytearray.Length);
    totalBytesRead += bytesRead;
    } while (bytesRead > 0);

    fileToupload.Write(bytearray, 0, bytearray.Length);
    fileToupload.Close();
    fileToupload.Dispose();
    return "success"; 
```

和**安卓代码**

```
 package com.example.filedemo;

import java.io.File;
import java.io.IOException;

import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.entity.mime.MultipartEntity;
import org.apache.http.entity.mime.content.FileBody;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.params.BasicHttpParams;
import org.apache.http.params.HttpParams;
import org.apache.http.params.HttpProtocolParams;
import org.apache.http.protocol.HTTP;

import android.os.Environment;

public class HttpUpload {

    public static int res ;

    public void myUploadedfile(){

        try {

            HttpParams httpParameters = new BasicHttpParams();
            HttpProtocolParams.setContentCharset(httpParameters, HTTP.UTF_8);
            HttpProtocolParams.setHttpElementCharset(httpParameters, HTTP.UTF_8);
            HttpClient httpclient = new DefaultHttpClient(httpParameters);

            HttpPost httpost = new HttpPost("http://10.160.0.18:85/Service.svc/UploadImage?fn=abc.doc");
            httpost.setHeader("Content-type","application/octet-stream");

            MultipartEntity entity = new MultipartEntity();
            entity.addPart("fileContents", new FileBody(new File(Environment.getExternalStorageDirectory(),"abc.doc")));

            httpost.setEntity(entity);
            HttpResponse response;

            response = httpclient.execute(httpost);

            System.out.println("Response : "+response.getStatusLine().getStatusCode());

            res = response.getStatusLine().getStatusCode();

        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();

        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();

        }catch (Exception e) {

            e.printStackTrace();
            System.out.println("Error: "+ e.getMessage());
            // TODO: handle exception
        }

    }

} 
```

请尽快回复。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T05:20:57.977

您的逻辑`WCF`似乎不正确，请尝试以下修改：

```
FileStream fileToupload = new FileStream("D:\\myfile.doc", FileMode.Create, FileAccess.Write);

byte[] bytearray = new byte[10000];
int bytesRead, totalBytesRead = 0;

while((bytesRead = mystream.Read(bytearray)) > 0) 
{    
  fileToupload.Write(bytearray, 0, bytesRead); // Write directly to the file
  totalBytesRead += bytesRead;
} 

fileToupload.Close();
fileToupload.Dispose(); 
```

# php - 在日期范围内选择季度

> ID：14995024
> 
> 赞同：2
> 
> 时间：2013-02-21T05:14:06.423
> 
> 标签：php, mysql, sql, date, between

我有一张桌子，上面有学校宿舍及其开始和结束日期。

```
|yrq |开始日期|结束日期 |
|--------------------------|
|B233|2013-01-07|2013-03-23|
|B232|2012-09-24|2012-12-20|
|B231|2012-06-25|2012-09-13|
|B124|2012-04-02|2012-06-21|
|B123|2012-01-09|2012-03-27|
...

```

仅获取 yrqs，这意味着 yrqs 完全在日期范围内：

`SELECT yrq FROM yrq WHERE start_date>='2012-02-01' AND end_date<='2013-02-01';`

返回除第一个和最后一个 yrq 之外的所有日期 ( `B124, B231, B232`)，即使日期在`B233`and内`B123`。好走！

我发现了如何包含 yrqs，这意味着如果日期落在 yrq 的中间，包括它（翻转 '<' 和 '>' 符号以及传入的开始和结束日期）：

`SELECT yrq FROM yrq WHERE start_date<='2013-02-01' AND end_date>='2012-02-01';`

这将返回所有列出的季度，而不是其他季度。好走！

我遇到问题的查询是获取开始日期和结束日期完全在其中的 yrq。示例：我想查找日期范围`2013-02-01`为的 yrq `2013-02-15`，即`B233`。

我正在调用一个运行查询的 php 函数。我正在传递一个包容性标志，而我没有答案的情况应该在包容性情况下返回结果。为了封装所有包容性案例，我计划首先运行我没有答案的查询，如果它返回一个空集，然后运行上面的包容性查询。如果有更优雅的方式，我会全神贯注。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T07:56:06.163

此查询返回 yrq，其中参数位于 start_date 和 end_date 内。这是你想要的？

```
SELECT *
  FROM yrq
 WHERE '2013-02-01' BETWEEN start_date AND end_date
   AND '2013-02-15' BETWEEN start_date AND end_date 
```

[小提琴](http://www.sqlfiddle.com/#!2/980e7/1)

# python - 在 Flask-SQLAlchemy 中使用计数进行选择

> ID：14995026
> 
> 赞同：1
> 
> 时间：2013-02-21T05:14:08.777
> 
> 标签：python, sqlalchemy, flask, flask-sqlalchemy

我仍然对 SQLAlchemy 的工作方式感到困惑。截至目前，我有一个看起来像这样的查询

```
SELECT cast(a.product_id as bigint) id, cast(count(a.product_id) as bigint) itemsSold, cast(b.product_name as character varying)
    from transaction_details a 
    left join product b
    on a.product_id = b.product_id
    group by a.product_id, b.product_name
    order by itemsSold desc; 
```

我不太确定这是如何在 Flask 中转换的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T10:11:38.763

如果您是 SQLAlchemy 的新手，请阅读[对象关系教程](http://docs.sqlalchemy.org/en/rel_0_8/orm/tutorial.html)和[SQL 表达式语言教程](http://docs.sqlalchemy.org/en/rel_0_8/core/tutorial.html)以熟悉它的工作方式。由于您使用的是 Flask-SQLAlchemy 扩展，请记住，在上述教程的示例中导入的许多名称可以通过`SQLAlchemy`类的实例（通常`db`在 Flask-SQLAlchemy 示例中命名）来访问。您的 SQL 查询在转换为 SA 后将如下所示（未经测试）：

```
# Assuming that A and B are mapped objects that point to tables a and b from
# your example.
q = db.session.query(
    db.cast(A.product_id, db.BigInteger),
    db.cast(db.count(A.product_id), db.BigInteger).label('itemsSold'),
    db.cast(B.product_name, db.String)
# If relationship between A and B is configured properly, explicit join
# condition usually is not needed.
).outerjoin(B, A.product_id == B.product_id).\
group_by(A.product_id, B.product_name).\
order_by(db.desc('itemsSold')) 
```

# ajax - Alexa 如何处理 Meteor 或 Ajax 请求？

> ID：14995030
> 
> 赞同：1
> 
> 时间：2013-02-21T05:14:23.613
> 
> 标签：ajax, seo, meteor, alexa

我尝试了 Meteor JS 框架，非常棒。我计划在我们公司的网站上使用它。

但我担心这会影响 Alexa 流量排名和 PV。

Alexa 如何处理 Meteor 或 Ajax 请求？Meteor Framework 会影响 Alexa 流量排名吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T07:50:57.043

是的，流星很棒！并实时运行，这就是为什么：

陨石每隔一段时间就会随机坠落，我们需要猜测它们会坠落的频率。如果它们掉在像俄罗斯城镇这样的人口稠密地区，[我们可以推断它们在任何地方](http://www.alexa.com/help/traffic-learn-more)（包括大海）坠落的频率，因为我们目前只能在人口稠密的地区监测它们。

虽然原始流星有许多碎片，但在计算时，我们计算的是经过的流星（独特的命中），而且比单个碎片（命中）更多。

所以简而言之，使用 ajax/websockets 不会有所作为。

# javascript - 动态地向 JSON 子数组添加值？

> ID：14995037
> 
> 赞同：1
> 
> 时间：2013-02-21T05:14:42.880
> 
> 标签：javascript, jquery, json, algorithm, angularjs

我正在尝试实现如图所示的过滤器。我正在使用 Angular JS 框架，JQuery。

要求是，我有复选框过滤器，如应用程序名称、状态等。在选择应用程序或状态时，我需要动态创建 JSON，如下所示。“filterValues”中的值应根据复选框值自动添加或删除。

根据 json 值，我将查询数据库并获取结果并显示。

我正在构建如下所示的复选框：

```
<div class="row-fluid">
<div ng-repeat="status in keywords.kw_Status">
    <label class="checkbox">
        <input type="checkbox" value="{{status}}" ng-model="isChecked" ng-change="change('Status','txt_Status',status,isChecked)">{{status}}
    </label>
</div> 
```

对应的控制器代码如下

```
$scope.change=function(filterCategory, filterField, filterValue, filterAdd){
$scope.filters[filterCategory]={"filterField":filterField,"filterValues":[filterValue]};
console.log($scope.filters); 
```

}

任何帮助深表感谢！！

![我正在尝试实现如图所示的过滤器](../Images/be37b5ef1418a34afa8cceb4a4f96855.png)

```
{
"Region": {
    "filterField": "kw_Region",
    "filterValues": [
        "aa",
        "bb"
    ]
},
"ApplicationName": {
    "filterField": "kw_ApplicationName",
    "filterValues": [
        "aa",
        "bb"
    ]
},
"IssueType": {
    "filterField": "kw_IssueType",
    "filterValues": [
        "aa",
        "bb"
    ]
},
"Outage": {
    "filterField": "kw_Outage",
    "filterValues": [
        "aa",
        "bb"
    ]
},
"Priority": {
    "filterField": "kw_Priority",
    "filterValues": [
        "aa",
        "bb"
    ]
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-06T02:09:16.203

> “filterValues”中的值应根据复选框值自动添加或删除。

使用 JSON.stringify 和替换回调来实现这一点：

```
function replacer(match, offset, fullstring)
  {
  return replacer.str;
  }

replacer.str = "\u0022filterValues\u0022:[\u0022hi\u0022,\u0022bye\u0022]"; /* Use DOM node value */

var foo = JSON.stringify({
"Region": {
    "filterField": "kw_Region",
    "filterValues": [
        "aa",
        "bb"
    ]
},
"ApplicationName": {
    "filterField": "kw_ApplicationName",
    "filterValues": [
        "aa",
        "bb"
    ]
},
"IssueType": {
    "filterField": "kw_IssueType",
    "filterValues": [
        "aa",
        "bb"
    ]
},
"Outage": {
    "filterField": "kw_Outage",
    "filterValues": [
        "aa",
        "bb"
    ]
},
"Priority": {
    "filterField": "kw_Priority",
    "filterValues": [
        "aa",
        "bb"
    ]
}
}).replace(/"filterValues[^\]]+./g, replacer) 
```

# filesystems - cloudbees上的文件存储

> ID：14995041
> 
> 赞同：1
> 
> 时间：2013-02-21T05:14:53.700
> 
> 标签：filesystems, cloudbees

我的应用程序需要存储来存储图像等文件，我不想将它们存储在数据库中（RDBMS 和 NoSQL 都不是），而是作为普通文件存储。这可能吗？干杯玛尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T15:04:31.660

文件系统不是持久的，因此在重新部署/重新启动后内容将会丢失。一种可能的解决方法是使用本地文件系统快速访问文件资源，但将它们存储在 amazon S3（或任何其他存储服务）中。您可以使用 jClouds API 来避免与提供者 API 的锁定，并且能够在本地运行以进行测试，以切换到 FileSystem 实现

# php - 如何使用 dcpcrypt 在 delphi 和 php 之间同步加密

> ID：14995052
> 
> 赞同：1
> 
> 时间：2013-02-21T05:15:38.417
> 
> 标签：php, delphi, mcrypt

我正在使用 Delphi 2009，我在这里看到的大多数答案都是针对 2010+ 我正在尝试将加密（delphi）同步到解密（php）并且失败。

在delphi中生成加密字符串：

```
program Project4;

{$APPTYPE CONSOLE}

uses
  SysUtils,
  DCPcrypt2,
  DCPsha1,
  DCPblockciphers,
  DCPdes,
  EncdDecd;

var des: tdcp_des;
    enc,dec: ansistring;

begin
  try
  des:=tdcp_des.Create(nil);
  des.InitStr('test', tdcp_sha1);
  enc:=encodestring(des.EncryptString('this is a test'));
  des.Free;

  des:=tdcp_des.Create(nil);
  des.InitStr('test', tdcp_sha1);
  dec:=des.DecryptString(decodestring(enc));
  des.Free;

  writeln(enc);
  writeln(dec);
  except
    on E:Exception do
      Writeln(E.Classname, ': ', E.Message);
  end;
end. 
```

在 php 中解密：

```
<?php
function decrypt($str, $key)
{
    $size = mcrypt_get_iv_size(MCRYPT_DES, MCRYPT_MODE_CBC);
    $iv = mcrypt_create_iv($size, MCRYPT_DEV_RANDOM);
    $data = base64_decode($str);
    $block = mcrypt_get_block_size('des', 'ecb');
    $k = substr(sha1($key), 0, $block);
    $str = mcrypt_decrypt(MCRYPT_DES, $k, $data, MCRYPT_MODE_CBC, $iv);
    $pad = ord($str[($len = strlen($str)) - 1]);
    return substr($str, 0, strlen($str) - $pad);
}

$enc = 'TW5mbVFhODUyR2FoOTA2WWJIOD0=';
$dec = decrypt($enc, 'test');
echo "$dec\n";
?> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T13:06:41.913

我认为有几个问题:-)

*   des.InitStr() 在内部从 8 个空字节创建一个 IV，然后对其进行加密。您需要在 PHP 中使用相同的 IV。

*   sha1($key) 生成一个十六进制字符串，而不是密码的实际字节。你需要类似 mhash 的东西。

*   我无法使用给定的 Delphi 函数重现您的 $enc 字符串。

*   Unicode 问题 - 密码和源文本在 Delphi 中将被视为 unicode。

*   您似乎在 Delphi 例程中对源代码进行了两次 base 64 编码。des.EncryptString 和 des.DecryptString 生成和使用 base 64 编码字符串，因此无需再次执行此操作。

*   填充

根据我之前的回答-[这](https://stackoverflow.com/a/7078230/197962)是我的建议：

```
function EncryptStringDES: string;
var
  des: TDCP_des;
  src, enc, b64: TBytes;
  index, slen, bsize, padsize: integer;
begin
  des:=tdcp_des.Create(nil);
  try
    des.InitStr(AnsiString('test'), tdcp_sha1);

    src := TEncoding.UTF8.GetBytes('this is a test');
    slen := Length(src);
    // Add padding
    bsize := des.BlockSize div 8;
    padsize := bsize - (slen mod bsize);
    Inc(slen, padsize);
    SetLength(src, slen);
    for index := padsize downto 1 do
    begin
      src[slen - index] := padsize;
    end;

    SetLength(enc, slen);
    des.EncryptCBC(src[0], enc[0], slen);
    result := EncdDecd.EncodeBase64(@enc[0], Length(enc));
  finally
    des.Free;
  end;
end;

function DecryptStringDES(ASource: string): string;
var
  des: TDCP_des;
  key, src, dec, b64: TBytes;
  pad, slen: integer;
begin
  des := TDCP_des.Create(nil);
  try
    des.InitStr(AnsiString('test'), tdcp_sha1);

    src := EncdDecd.DecodeBase64(AnsiString(ASource));
    slen := Length(src);
    SetLength(dec, slen);
    des.DecryptCBC(src[0], dec[0], slen);

    // Remove padding
    pad := dec[slen - 1];
    SetLength(dec, slen - pad);

    result := TEncoding.UTF8.GetString(dec);
  finally
    des.Free;
  end;
end; 
```

和 PHP：

```
<?php
function decrypt_SO($str, $key)
{
    //$ivsize = mcrypt_get_iv_size(MCRYPT_DES, MCRYPT_MODE_CBC);
    //$blocksize = mcrypt_get_block_size(MCRYPT_DES, MCRYPT_MODE_CBC);
    $keysize = mcrypt_get_key_size(MCRYPT_DES, MCRYPT_MODE_CBC);

    // Need to use the SAME IV as the Delphi function. By default
    // this is (0,0,0,0,0,0,0,0) encrypted using ECB mode and gives the
    // following bytes:
    $ivbytes = array(72, 163, 99, 62, 219, 111, 163, 114);
    $iv = implode(array_map("chr", $ivbytes));

    $enc = base64_decode($str);
    $k = mhash(MHASH_SHA1, $key);
    $dec = mcrypt_decrypt(MCRYPT_DES, substr($k, 0, $keysize), $enc, MCRYPT_MODE_CBC, $iv);

    $pad = ord($dec[strlen($dec) - 1]);
    return substr($dec, 0, strlen($dec) - $pad);
}

$enc = 'WRaG/8xlxqqcTAJ5UAk4DA==';
$dec = decrypt_SO($enc, 'test');
echo "$dec\n";
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-05T18:00:39.127

iv字节是谁

```
$ivbytes = array(72, 163, 99, 62, 219, 111, 163, 114); 
```

钥匙：test123456

```
$ivbytes = array(??, ??, ??, ??, ??, ??, ??, ??); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T12:01:21.277

我成功地使用了这种集成，但我无法提供更多信息，它属于我的雇主。

你初始化mycrypt了吗？

```
$iv = "nononono";
$key = "nononono";
$td = mcrypt_module_open(MCRYPT_RIJNDAEL_128, '', MCRYPT_MODE_CBC, '');
mcrypt_generic_init($td, $key, $iv);
$decoded = base64_decode($mySecretString);
$decryptedcbc = mdecrypt_generic($td, $decoded);
mcrypt_generic_deinit($td); 
```

不要忘记在delphi中正确编码你的字符串，我使用 Base64EncodeStr(Buffer);

我希望它有帮助。

# c - 如何使用 scanf 在空白处阅读？

> ID：14995058
> 
> 赞同：0
> 
> 时间：2013-02-21T05:15:48.690
> 
> 标签：c, whitespace

它在看到空格后完全停止读取代码。如何更改我的代码，使其在空白处读取

```
char line[300];

printf("Enter a string to be checked: ");
scanf("%s", line); 
```

我试图通过重定向输入的字符串是：

( ( aa ) < > [ [ [ { [ x ] ]]] <>)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T05:24:04.770

您可以使用 scanf 的 fgets intsead。例如：

```
 fgets(line, 1024, stdin); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T00:50:19.417

你应该`fgets(line, size, stdin);`像以前发布的那样使用。你不应该使用`gets()`，因为它每次都需要相同的输入大小。编译器，至少是 gcc，会警告你不要使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T05:19:14.123

%s 匹配一系列非空白字符；next 指针必须是指向 char 的指针，并且数组必须足够大以接受所有序列和终止 NUL 字符。输入字符串在空白处或最大字段宽度处停止，以先发生者为准。

需要选择不同的格式字符串。从您的输入字符串中并不清楚您到底想要完成什么。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-21T05:23:10.610

请检查代码..

```
 printf("Enter a string to be checked: ");
    gets( line);
    puts(line); 
```

输出：-

```
Enter a string to be checked: ( ( a a ) < > [ [ [ { [ x ] ]]] <>)
( ( a a ) < > [ [ [ { [ x ] ]]] <>)
Press any key to continue . . . 
```

# mysql - mysqldump version 从 MySQL 导出数据时出错

> ID：14995059
> 
> 赞同：8
> 
> 时间：2013-02-21T05:15:52.720
> 
> 标签：mysql, mysql-workbench

导出数据时出现错误`mysql 5.5.29(winx-64)`。我正在使用`mysql workbench -gpl-5.2.45(win 32)`.

错误信息是：

```
**WARNING**

Error checking mysqldump version
Error retrieving version from mysqldump.exe:
(exit 1) 
```

我是 MySQL 新手。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-17T16:25:11.300

检查文件->编辑->首选项，管理员选项卡。您需要在此处提供 mysqldump 的正确路径，或者清除字段以使用 Workbench 附带的 mysqldump.exe。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-04-25T09:25:04.877

您必须以管理员身份启动 MySql Workbench。右键单击该图标并选择“以管理员身份运行”以解决该问题。如果这不能解决，请查看帮助 > 显示日志文件

最好的，尼尔斯

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-07-17T10:00:54.317

![mysqldump 版本修复](../Images/3ea7c5b7f1c68d147c01208e3ca6fa45.png)

“wb_admin_export.py”查看 PATH 变量以查找 mysqldump 并获取版本号....

# pagination - DynamoDB：有没有办法在没有 LastEvaluatedKey 的情况下获取任意页面？

> ID：14995061
> 
> 赞同：3
> 
> 时间：2013-02-21T05:16:01.500
> 
> 标签：pagination, range, amazon-dynamodb

我有一个带有范围键 CreationDate 的消息表...

我将如何查询任意页面？这是否可能无需提供上一个查询返回的 LastEvaluatedKey？这意味着客户端还必须跟踪它并在每个请求中返回它。这不允许您在不进行每个中间查询的情况下跳转到任意页面。

我是否必须更新另一个仅包含 PageKey = someTimestamp 的表 MessagePageKeys 才能实现快速页面检索？

```
 QueryRequest queryReq = new QueryRequest();

        queryReq.WithTableName(tableName);
        queryReq.WithLimit(perPage);

        var startIndex = startPage * perPage;

        queryReq.WithExclusiveStartKey(new Key
        {
            HashKeyElement = new AttributeValue().WithN(hashKeyValue),
            RangeKeyElement = new AttributeValue().WithN(prevKey.ToString() )
        });

        // sort by newest (highest time signature)
        queryReq.ScanIndexForward = false; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T03:40:49.837

不，不使用“lastEvaluatedKey”是不可能的。

最后评估的密钥不一定存在，它只需要是一个有效的密钥，这可能对您有用。例如，如果您在同一个哈希键下有以下范围键：

```
6
9
12
15 
```

而且你想要范围键大于 10 的所有内容，你可以创建一个具有范围键的 ExclusiveStartKey `10`，你会得到

```
12
15 
```

这与“页面边界”的更有用的定义相结合（比如我想查看这一小时或这一分钟等的每个项目）可能对您有用。我觉得很少有数据消费者会知道“我的结果在第八页，不管自上次查询此表以来其他数据如何变化”。

# android - 应用程序可以使用 Google Cloud Messaging 从服务器中提取数据吗

> ID：14995067
> 
> 赞同：2
> 
> 时间：2013-02-21T05:16:19.497
> 
> 标签：android, google-app-engine, google-cloud-messaging

我正在尝试使用 GCM 在我的 App 和 AppEngine 服务器之间同步数据。例如，数据是一组用户档案，包括姓名、年龄、性别、档案图像（在 BLOB 中）等。

我知道我的应用程序可以执行 POST 请求（这是最好的方法吗？）将数据发送到服务器。服务器可以通过 GCM 向我的应用程序发送消息，要求删除和/或更新特定的用户条目。但是有没有办法我的应用程序可以从服务器中提取数据，而不是等待服务器发送消息？

我想这样做的原因是，在执行 POST 请求时，我只想将我的应用程序上新添加的数据更新到服务器。所以我需要先从服务器中提取所有现有的 ID，然后进行增量更新。否则，每次我都需要将所有日期更新到服务器，这很耗时。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T19:10:23.820

您的 POST 请求将向您的应用返回 HTTP 响应。您可以将数据放入响应中。

# .net - 在.Net中转换基于城市的时区

> ID：14995070
> 
> 赞同：2
> 
> 时间：2013-02-21T05:16:28.287
> 
> 标签：.net, timezone

像这样的基于城市的时区（或任何你称之为的）在 PHP 和 Java`Asia/Shanghai`中`America/Los_Angeles`被广泛使用，例如，

```
java.util.TimeZone.TimeZone timeZoneNewYork = java.util.TimeZone.TimeZone.getTimeZone("America/New_York"); 
```

据我所知，.Net 使用不同的键来获取相应的时区，因为`America/New_York`它是`Eastern Standard Time`

```
TimeZoneInfo timeZoneInfoNewYork = TimeZoneInfo.FindSystemTimeZoneById("Eastern Standard Time"); 
```

如果我有一个基于城市的时区字符串，例如`"America/New_York"`，如何将其转换为 .Net 中的正确时区，`TimeZoneInfo{Eastern Standard Time}`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-09T19:25:03.420

这些是 IANA/Olson 时区标识符，它们比 .Net 使用的 Windows 时区更通用。[阅读时区标签 wiki](https://stackoverflow.com/tags/timezone/info)的“时区数据库”部分。

在 .Net 中有几个库可用于处理这些库，但恕我直言，最好的库是[Noda Time](http://nodatime.org/)。有了这个库，你根本*不需要*使用`TimeZoneInfo`。

## 更新

[我在这里发布了转换函数](https://stackoverflow.com/q/17348807/634824)。

# c++ - 表的 C++ SQL 解析器

> ID：14995074
> 
> 赞同：1
> 
> 时间：2013-02-21T05:16:34.093
> 
> 标签：c++, sql, database, parsing, tree

我正在用 C++ 从头开始​​编写一个非常简单的数据库以及一个 SQL 解析器。我已经做了一切。因此，如果我有这样的 SQL 输入：

```
SELECT * FROM table WHERE `First Name`="John" AND `Last Name`="Doe" 
```

解析器对此进行解析。现在的问题是如何处理这些信息。我需要查看我的表并实际找到名字为 John 且姓氏为 Doe 的所有记录。

我在想我可以实现一棵树，它将 AND 作为主节点，并`==`作为它的子节点。左孩子是名字，右孩子是姓氏。只要它是真的，将该记录推入一个向量，然后在最后打印出该向量。

这一切在理论上听起来都很棒，但我不知道如何实际实现这一点。如果我有一个 if 语句

```
if(record.firstname == "John") 
```

我如何动态改变`==`，也许可以`!=`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T05:37:02.420

您需要将 SQL 翻译成可以直接执行的语言。这方面的技术术语是“查询计划”。查询计划是数据库引擎将执行的低级操作（例如索引搜索、连接、排序），以及这些操作如何组合在一起。

任何体面的数据库引擎都会为您提供查看查询计划的方法。对于 SQL 系统，它通常称为`EXPLAIN`. 我建议您购买您最喜欢的 DBMS（如果您没有最喜欢的，所有像样的开源 DBMS 都可以，包括 MySQL 和 PostgreSQL），并查看各种查询的计划，以了解哪种操作才是“真正的” "系统实施。

我还建议研究关系代数。如果您可以访问一个藏书丰富的图书馆，那么任何体面的数据库教科书都会有一节或章节，但询问谷歌会返回相当多的好参考资料。关系代数的优势在于它在理论上很好，并且有一种“明显”的方式来使用低级数据库操作来实现它。您最终可能会将其修改得面目全非，但这应该会给您一个良好的开端。

因此，让我们看一个基本概述。首先阅读有关关系代数的内容，然后继续阅读。

您需要实现的主要数据结构是元组流。流中的每个元组都是不同的，但它们都具有相同的形状：元组的每个字段都有一个名称和一个类型。查询操作采用一个或多个元组流（顺便说一下，可以将表视为元组流）并返回单个元组流。

考虑以下形式的基本 SQL`SELECT`语句：

```
SELECT fields
FROM table1,table2
WHERE select_conditions, join_conditions 
```

在这里，`select_conditions`是任何条件，例如`gender='F'`或`age > 18`，其中将字段与常数进行比较。是任何将`join_conditions`一个表中的字段与另一表中的字段匹配的条件。（我们暂时忽略比较同一个表中的两个字段的情况。）

那么一个简单的查询计划可能是：

```
s1 := Select(table1, select_conditions_1)
s2 := Select(table2, select_conditions_2)
j := Join(join_conditions, s1, s2)
res := Project(fields, j) 
```

该`Select`操作接受一个元组流，并返回一个具有相同形状的元组流，并删除任何不符合条件的元组。该`Project`操作接受一个元组流并返回一个不同类型的元组流；它所做的只是删除、重新排列或复制字段。最后，该`Join`操作将两个元组流连接在一起，连接任何两个匹配连接条件的元组。（如果你不知道什么是数据库连接操作，你真的需要知道这一点。问谷歌，并查找 Unix 的“连接”命令。）

因此，在这种情况下，`s1`是一个元组流，它表示表 1 中的元组，这些元组与适用于表 1 的选择条件相匹配。对于`s2`. 流`j`是流`s1`并`s2`根据加入条件加入。最后，您只投影查询中提到的字段。

将 SQL 转换为类似关系代数的中间形式实际上非常容易。然而，简单的翻译往往效率极低。在这里，我们通过检查表中的每条记录并仅返回匹配的记录来实现选择操作。因此，需要根据查询的结构以及表中可用的信息来优化查询。

例如，假设`table1`有字段`age`和`gender`，并且我们有选择条件`age > 18`和`gender = 'F'`。进一步假设在该字段上`table1`有一个索引（称为`table1_age_idx`）`age`，但在该字段上没有索引`gender`。显然我们应该使用索引。我们可以通过将操作拆分为两个更基本的操作来做到这一点：

```
s1a := IndexSelect(table1_age_idx, age > 18)
s2b := FilterSelect(s1a, gender = 'F') 
```

在这里，我们将选择操作一分为二。第一个选择是使用索引查询实现的（请注意，选择现在在索引上，而不是表上！），第二个可以通过过滤流来实现，删除任何`gender`不是的元组`'F'`。

可以通过多种方式实现连接（排序合并连接和哈希连接很流行）。哪一个最好再次取决于查询和数据库。一些索引（例如 B-tree 和朋友）返回按键排序的记录，因此如果您已经`IndexSelect`对随后加入的字段进行了操作，那么排序合并连接可能会更好，因为排序是不必要的。`ORDER BY`如果连接字段上有子句，这同样适用。

正如你所看到的，这就是真正聪明的事情发生的地方。真正的查询优化器使用有关表大小和中间元组流的可能大小的统计信息作为其计算的一部分。在这里了解关于编译器的一两件事是值得的。

# html - 图像看起来高于输入

> ID：14995078
> 
> 赞同：0
> 
> 时间：2013-02-21T05:16:51.707
> 
> 标签：html, css

我有一个假设在输入旁边的图像是代码：

```
<style type="text/css">
#post_comments{
    margin-top:1px;
    max-width: 568px;
    border: 1px solid #eee;
}
.comments{
    text-align: center;
    background: #eee;
    color:#555;
    max-width: 568px;
    height: 40px;
    margin-left: auto;
    margin-right: auto;
}
.comments:hover{
    color: #333;
}
.make_comment{
    margin-top: 0px;
    margin-bottom: 2px;  
    width: 400px;
    height: 25px;
}
</style>
<div id="post_comments">
    <div class="comments">
        <img src="/elitequorum/images/image.jpg" style="margin-top: 2px;" width="35" height="35">
        <input placeholder="Make a comment...." type="text" class="make_comment">
    </div>
</div> 
```

你们能帮我将图像和输入对齐在一起，这样图像就不会高于输入吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T05:20:43.890

图像会自动与顶部对齐。尝试将其添加到输入 css：

```
vertical-align:top; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T05:26:29.603

在 CSS 中使用：

```
<style type="text/css">
#post_comments{
    margin-top:1px;
    max-width: 568px;
    border: 1px solid #eee;
}
.comments{
    text-align: center;
    background: #eee;
    color:#555;
    max-width: 568px;
    height: 40px;
    margin-left: auto;
    margin-right: auto;
    vertical-align:top;
    margin-top: 10px;
}
.comments:hover{
    color: #333;
}
.make_comment{
    margin-top: 5px;
    margin-bottom: 2px;  
    width: 400px;
    height: 25px;
}
</style> 
```

在 HTML 中使用：

```
<div id="post_comments">
    <div class="comments">
        <img src="/elitequorum/images/image.jpg" style="margin-top: 2px;vertical-align:top;" width="35" height="35">
        <input placeholder="Make a comment...." type="text" class="make_comment" >
    </div>
</div> 
```

希望对你有帮助...

# dart - Dart 编译器或命令行语法检查

> ID：14995085
> 
> 赞同：2
> 
> 时间：2013-02-21T05:17:33.150
> 
> 标签：dart

有没有办法调用 Dart 编译器来验证我的程序的有效性而不从命令行运行它？

如果我有一个 web_ui 应用程序，我可以调用 dwc，但是 Dart 库包呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T06:00:46.440

您可以随时运行`dart_analyzer`，它就是为此而设计的。它实际上（几乎）是驱动 Dart 编辑器的相同代码，因此您可能会收到语法错误、静态类型警告、弃用警告等。

# ipad - PopoverViewController 的框架

> ID：14995086
> 
> 赞同：0
> 
> 时间：2013-02-21T05:17:33.730
> 
> 标签：ipad, cocoa-touch, uipopovercontroller

我已显示 a`PopoverViewController`但无法正确设置其框架。当我单击一个按钮时，我`PopoverViewController`将显示。

```
-(IBAction)AddTheTimePicker:(id)sendar {

    if(UI_USER_INTERFACE_IDIOM()==UIUserInterfaceIdiomPad)
    {

        UIButton *button = (UIButton *)sendar;
        [button setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];

        UIViewController* popoverContent = [[UIViewController alloc] init]; 
        UIView *popoverView = [[[UIView alloc] init]autorelease];   //view
        popoverView.backgroundColor = [UIColor blackColor];

       DatePicker=[[[UIDatePicker alloc]init]autorelease];//Date picker
        DatePicker.frame=CGRectMake(0,44,320, 216);
      DatePicker.datePickerMode = UIDatePickerModeDate;
        [DatePicker setTag:10];

        UIToolbar *pickerDateToolbar = [[[UIToolbar alloc] initWithFrame:[self isViewPortrait]?CGRectMake(0, 0, 320, 44):CGRectMake(0, 0, 320, 44)]autorelease];
        pickerDateToolbar.barStyle = UIBarStyleBlackOpaque;
        [pickerDateToolbar sizeToFit];

        NSMutableArray *barItems = [[[NSMutableArray alloc] init]autorelease];

        UIBarButtonItem *doneBtn = [[[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(dateChanged:)]autorelease];

        [barItems addObject:doneBtn];
        UIBarButtonItem *flexSpace = [[[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:self action:nil]autorelease];

        UILabel *toolBarItemlabel;
        if([self interfaceOrientation] == UIInterfaceOrientationPortraitUpsideDown || [self interfaceOrientation] == UIInterfaceOrientationPortrait)
            toolBarItemlabel= [[[UILabel alloc]initWithFrame:CGRectMake(0, 0, 180,30)]autorelease];
        else
            toolBarItemlabel = [[[UILabel alloc]initWithFrame:CGRectMake(0, 0, 200,30)]autorelease];
        [toolBarItemlabel setTextAlignment:UITextAlignmentCenter];
        [toolBarItemlabel setTextColor:[UIColor whiteColor]];
        [toolBarItemlabel setFont:[UIFont boldSystemFontOfSize:16]];
        [toolBarItemlabel setBackgroundColor:[UIColor clearColor]];

        UIBarButtonItem *buttonLabel =[[[UIBarButtonItem alloc]initWithCustomView:toolBarItemlabel]autorelease];

        [barItems addObject:buttonLabel];

        [barItems addObject:flexSpace];

        UIBarButtonItem *SelectBtn = [[[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemCancel target:self action:@selector(DatePickercancelClick:)]autorelease];
        [barItems addObject:SelectBtn];

        [pickerDateToolbar setItems:barItems animated:YES];

        [popoverView addSubview:DatePicker];
        [popoverView addSubview:pickerDateToolbar];
        popoverContent.view = popoverView;
        popoverController = [[UIPopoverController alloc] initWithContentViewController:popoverContent];
        popoverController.delegate=self;
        [popoverContent release];

        [popoverController setPopoverContentSize:CGSizeMake(320, 264) animated:NO];

        [popoverController presentPopoverFromRect:[sendar frame] inView:self.view permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES];

    }
} 
```

`UIButton`的框架是`(450,285,80 30)`。我想在此按钮下方显示弹出框，并带有指向按钮的箭头标记。但我得到了这样的：

我怎么才能得到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T06:42:51.753

尝试这个：-

```
 -(IBAction)products:(id)sender{
UIButton* btn = (UIButton *)sender;
[productsPopover presentPopoverFromRect:[btn bounds] inView:btn permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T06:29:34.277

而不是自己制作，已经有很多自定义弹出框可以处理你想要的一切，[这里是列表](http://www.cocoacontrols.com/search?utf8=%E2%9C%93&q=Popover)。我使用[了 WEPopOver](http://www.cocoacontrols.com/platforms/ios/controls/wepopover)，我发现它简单而有用，在计划在您的项目中使用它之前不要忘记检查许可证。

# php - 如何使用文本框异步编辑/更新静态 mysql 结果？

> ID：14995098
> 
> 赞同：0
> 
> 时间：2013-02-21T05:18:50.843
> 
> 标签：php, javascript, jquery, mysql, asynchronous

我正在将 MySQL 中的值拉入 php 页面，如下所示：

```
$query = 'SELECT cinfo.`client_id`, cinfo.`client_first_name`, cinfo.`client_last_name` ';
$query.= 'FROM `client_information` AS cinfo ';
$query.= 'ORDER BY cinfo.`client_id` '; 
```

这些显示在每行都有一个循环的表中：

```
$result = mysql_unbuffered_query( $query );
echo "<table border='1'>";
    echo "<tr>";
    echo "<th>Client ID</th>";
    echo "<th>Client First Name</th>";
    echo "<th>Client Last Name</th>";
    echo "</tr>";
while ($row = mysql_fetch_assoc($result))
{   
    echo "<tr>";
    echo "<td>" . $row['client_id'] . "</td>";
    echo "<td>" . $row['client_first_name'] . "</td>";
    echo "<td>" . $row['client_last_name'] . "</td>";
    echo "</tr>";
}
echo "</table>"; 
```

我还在一个单独的文件中设置了一个更新/删除脚本，假设存储信息的“更新”或“删除”变量将被传递到该文件并根据 ID 运行对客户端信息的更新。

我缺乏知识是提交的异步方面，我无法将 javascript/jquery 合并到结果中以编辑和更新存储在数据库中的值而无需刷新页面。有谁知道如何最好地做到这一点？

本质上，我希望页面如下所示：

从 MySQL 中提取的信息： ![从 MySQL 中提取的信息](../Images/10095580c0ab4182c0ac9c66e807a8f1.png)

用户点击“编辑”后： ![编辑信息](../Images/727f4bc00c4174b0d6cd41ccbcd9571f.png)

更新后信息： ![带有通知的更新信息](../Images/e3d1afa1adfd7f0d1ed8d2fe77e2d9ed.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T05:38:12.200

[AJAX](http://en.wikipedia.org/wiki/Ajax_%28programming%29)将为您解决问题。

查看这些：[jQuery POST](http://api.jquery.com/jQuery.post/)和[jQuery Ajax POST 示例](https://stackoverflow.com/questions/5004233/jquery-ajax-post-example)。

# c++ - 如何使用 x11 窗口背景加载 bmp 文件

> ID：14995104
> 
> 赞同：2
> 
> 时间：2013-02-21T05:19:00.723
> 
> 标签：c++, linux, x11, embedded-linux, xlib

我尝试使用 bmp 文件在 x11 窗口中设置背景图像。我使用了 XReadBitmapFile 但它不起作用。如何使用 bmp 文件设置 x11 窗口背景。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T10:33:05.220

XReadBitmapFile 仅用于读取 .xbm 文件。需要的是一个用于读取 BMP 文件的库，一种可能性是 ImLib2，它可以读取多种类型的文件并与 Xlib 配合得很好。

这是一个使用它的长示例：

```
/* displays an image or sets root background
 * PUBLIC DOMAIN - CC0 http://creativecommons.org/publicdomain/zero/1.0/
 * J.Mayo 2013
 *
 * gcc -Wall -W -g3 -o xrootbg xrootbg.c -lX11 -lImlib2
 *
 */
#include <stdio.h>
#include <X11/Xlib.h>
#include <Imlib2.h>

int main(int argc, char **argv)
{
    Imlib_Image img;
    Display *dpy;
    Pixmap pix;
    Window root;
    Screen *scn;
    int width, height;
    const char *filename = NULL;

    if (argc < 2)
        goto usage;
    filename = argv[1];

    img = imlib_load_image(filename);
    if (!img) {
        fprintf(stderr, "%s:Unable to load image\n", filename);
        goto usage;
    }
    imlib_context_set_image(img);
    width = imlib_image_get_width();
    height = imlib_image_get_height();

    dpy = XOpenDisplay(NULL);
    if (!dpy)
        return 0;
    scn = DefaultScreenOfDisplay(dpy);
    root = DefaultRootWindow(dpy);

    pix = XCreatePixmap(dpy, root, width, height,
        DefaultDepthOfScreen(scn));

    imlib_context_set_display(dpy);
    imlib_context_set_visual(DefaultVisualOfScreen(scn));
    imlib_context_set_colormap(DefaultColormapOfScreen(scn));
    imlib_context_set_drawable(pix);

    imlib_render_image_on_drawable(0, 0);
    XSetWindowBackgroundPixmap(dpy, root, pix);
    XClearWindow(dpy, root);

    while (XPending(dpy)) {
        XEvent ev;
        XNextEvent(dpy, &ev);
    }
    XFreePixmap(dpy, pix);
    imlib_free_image();
    XCloseDisplay(dpy);
    return 0;
usage:
    fprintf(stderr, "usage: %s <image_file>\n", argv[0]);
    return 1;
} 
```

# java - 父类和子类对象的引用

> ID：14995110
> 
> 赞同：1
> 
> 时间：2013-02-21T05:19:54.843
> 
> 标签：java, core

为什么在Java中，我们需要创建父类的引用和子类的对象？我们用这个实现什么？显而易见的答案是多态性，但范围是什么？它如何实时提供帮助？我在学习java时遇到了这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T05:37:37.923

在您的示例中，通过使用父类引用，您可以编写一个采用任何类型 List 并对其进行操作的方法，而无需关心它正在传递的特定类型的列表。

另一方面，子类指定了实际的实现，因此该方法的用户可以选择最有效或最适合其要求的任何列表。

假设您编写了一个计算 List 总和的方法：

```
int sum(List<Integer> input); 
```

现在假设你的方法的一个用户有一个列表，他关心快速随机访问，所以他创建了一个 ArrayList，而另一个用户想要经常拼接和加入他的列表，所以他使用了 LinkedList。

这两个用户现在都可以使用您的 sum 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T05:53:46.597

多态性如何在现实生活中帮助您？

通过增加代码的灵活性来适应不同的参数或实现。
例如，可以想到一种方法：

```
void foo(ArrayList<T> arg) {
  for (T t : arg) {
    // do something
  }
} 
```

我们真的需要将此方法限制为仅接受 ArrayList 吗？毕竟，我们在那里使用的函数同样可以在 LinkedList 或 Set 上执行。如果我们改为这样写，它会更加实用：

```
void foo(Iterable<T> arg) {
  for (T t : arg) {
    // do something
  }
} 
```

同样，如果我们写：

```
ArrayList<T> arg = new ArrayList<T>(); 
```

这仅在我们想在 arg 中使用的方法仅对 ArrayList 可用时才有用。如果我们想要的方法是在 ArrayList 的超类中声明的，那么我们可以通过将其更改为：

```
Collection<T> arg = new ArrayList<T>(); 
```

然后，如果我们确定 arg 实际上需要排序，我们可以很容易地将其更改为

```
Collection<T> arg = new PriorityQueue<T>(); 
```

不会破坏我们代码中的任何其他内容，因为 foo() 将像接受 ArrayList 一样愉快地接受 PriorityQueue。如果你不再依赖任何子类的具体实现细节，你可以很快地改变很多。

正如评论中提到的，一旦你把它从非常简单的例子中分解出来，它就会变得更加强大。假设我们有一个与数据库接口的应用程序。如果我们的数据库是 MySQL，您可能会忙于编写非常具体的 MySQL 代码：（注意，我一直没有做过任何 JDBC 的东西，所以这完全是人为的）

```
MySQL db = new MySQL();
int results = db.mySqlExecute("SELECT count(*) FROM names WHERE firstname = 'Bobby';"); 
```

在大型应用程序中进行了很多之后，您的代码与 MySQL 完全密不可分，您无法实现另一个数据库系统，如 PostgreSQL 或其他任何东西。相反，如果你写：

```
DataBase db = new MySQL();
int results = db.getCount("names", "firstname = 'Bobby'"); 
```

您可以轻松地将第一行更改为

```
DataBase db  = new PostgreSQL(); 
```

只需一个简单的更改，您的代码就可以很好地工作。这就是多态的力量：不依赖于单一的实现。

# javascript - 如何让这个 jquery 分页插件正常工作

> ID：14995112
> 
> 赞同：7
> 
> 时间：2013-02-21T05:20:28.477
> 
> 标签：javascript, jquery, html, pagination

我一直试图让这个[jQuery 分页插件](http://flaviusmatis.github.com/simplePagination.js/)工作。出于某种原因，它没有，我真的不确定为什么。

```
<!doctype html>
<html>
<head>
    <link rel="stylesheet" href="css/simplePagination.css" type="text/css" />
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/jquery.simplePagination.js"></script>
</head>
<body>

    <div id="selector">
        <ul class="selector">
        <li>
            <p>One</p>
        </li>
        <li>
            <p>Two</p>
        </li>
        <li>
            <p>Three</p>
        </li>
        <li>
            <p>Four</p>
        </li>
        <li>
            <p>Five</p>
        </li>
        <li>
            <p>Six</p>
        </li>
        <li>
            <p>Seven</p>
        </li>
        <li>
            <p>Eight</p>
        </li>
    </ul>
    </div>

    <script language="javascript">
    $(function() {
        $(selector).pagination({
            items: 8,
            itemsOnPage: 1,
            cssStyle: 'light-theme'
        });
    });
    </script>

</body>
</html> 
```

页面的按钮显示，但内容消失了。我究竟做错了什么？

这是一个演示：http: [//jsbin.com/obacig/1/edit](http://jsbin.com/obacig/1/edit)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-14T17:37:18.487

我遇到了完全相同的问题。查看文档后，该工具似乎只是用于渲染分页工具，我们需要注意如何自己绑定数据。

首先，您不需要选择器 div 内的任何内容 - 那是分页控件出现的地方：

所以把它留空，让你的内容以段落或其他形式放在它上面：

```
<p class="selection" id="page-1">one</p>
<p class="selection" id="page-2">Two</p>
<p class="selection" id="page-3">Three</p>
<p class="selection" id="page-4">Four</p>
<p class="selection" id="page-5">Five</p>
<p class="selection" id="page-6">Six</p>
<p class="selection" id="page-7">Seven</p>
<p class="selection" id="page-8">Eight</p>

<div id="selector">
</div> 
```

如果您正在使用动态数据，则必须动态生成 id

然后在正文结束标记之前的下方，您需要此脚本：

```
<script language="javascript">
    $(function() {
        $('#selector').pagination({
            items: 10,
            itemsOnPage: 2,
            cssStyle: 'compact-theme',
            onPageClick: function(pageNumber){test(pageNumber)}
        });
    });
</script> 
```

请注意，我添加了 onPageClick 函数（需要重命名），它将页码传递给我的函数。

我的标题部分有这个：

```
<style type="text/css">
    .selection {
        display: none;
    }
</style>

<script>

function test(pageNumber)
{

  var page="#page-"+pageNumber;
  $('.selection').hide()
  $(page).show()

}

</script>

</head> 
```

css 最初按类将它们全部隐藏，然后该函数关闭所有当前打开的并通过 id 打开您想要的。

现在对我来说似乎可以正常工作，但这太令人沮丧了:)

这是整个脚本：

```
<!doctype html>
<html>
<head>
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="pager.js"></script>
<link href="style.css" rel="stylesheet" type="text/css" />

<style type="text/css">
    .selection {
        display: none;
    }
</style>

<script>

function test(pageNumber)
{

  var page="#page-"+pageNumber;
  $('.selection').hide()
  $(page).show()

}

</script>

</head>
<body>

<p class="selection" id="page-1">one</p>
<p class="selection" id="page-2">Two</p>
<p class="selection" id="page-3">Three</p>
<p class="selection" id="page-4">Four</p>
<p class="selection" id="page-5">Five</p>
<p class="selection" id="page-6">Six</p>
<p class="selection" id="page-7">Seven</p>
<p class="selection" id="page-8">Eight</p>

<div id="selector">
</div>

    <script language="javascript">
    $(function() {
        $('#selector').pagination({
            items: 10,
            itemsOnPage: 2,
            cssStyle: 'compact-theme',
            onPageClick: function(pageNumber){test(pageNumber)}
        });
    });
    </script>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-07-22T21:38:25.743

D.Mac 有一个非常棒的答案，但是如果您实施，它不会自动显示第一页，只有在单击另一个页面然后您返回一个页面时才会自动显示。

所以我添加了这个小功能以确保分页在第一页启动

```
function pageOne() {
    var page_1 = "#page-1";
    $('.selection').hide()
    $(page_1).show()
}

<script language="javascript">
    $(function() {
        $('#selector').pagination({
            items: 10,
            itemsOnPage: 2,
            cssStyle: 'compact-theme',
            currentPage: 1,
            onPageClick: function(pageNumber){test(pageNumber)},
            onInit: function(){pageOne()},

        });
    });
    </script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-08T08:39:20.523

自这个问题发布以来已经过去了三年。[您可能会在此2014 stackoverflow 页面](https://stackoverflow.com/questions/20896076/how-to-use-simplepagination-jquery)上找到更好的答案。特别是，看看 Bilal Akil 的答案，我自己的贡献就在他的正下方。

我也完全被如何使用 simplepagination.js 弄糊涂了，Bill (Bilal) 向我展示了方法。他的[网络文章](http://www.bilalakil.me/simplepagination/)应该可以为您解决问题，但我在 2014 年 stackoverflow 文章中发布的简单版本是我仍在使用的版本，它仍然有效。

如果您使用该版本，或者也可能使用 Bill 当前的修订版本，您应该始终将 #page-n 附加到您在自己网站中放置到您自己页面的任何链接 URL，除非您已实现 target="_blank" ---即使关闭它仍然会让用户访问页面（必要的是帮助后退导航按钮工作）。我在 2014 年文章中的回答对此进行了解释。

幽默的一面是，我在寻找返回导航按钮问题的解决方案时发现了我们现在所在的页面，这是我刚刚在当前网站修订期间遇到的问题。我在自己 2014 年的答案中找到了答案！我忘记了那个细节。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T05:50:23.363

$(selector) 应该是 $("#selector")

要在 jquery 中选择 ID，您需要一个哈希标签

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T03:12:19.210

我为需要一个简单分页列表的项目构建并共享了我自己的 jquery 移动分页插件。基本上，插件会在列表末尾附加一个“显示更多”按钮，您可以配置通过 Ajax 调用返回的“每页”项目。当然，您需要在服务器端挂钩偏移量和限制，但总的来说，我认为它非常简单且有用。试一试[http://listomatic.stakbit.com/](http://listomatic.stakbit.com/)

# asp.net - 如何在链接中发送带有查询字符串值的电子邮件

> ID：14995115
> 
> 赞同：1
> 
> 时间：2013-02-21T05:20:39.850
> 
> 标签：asp.net

我们正在发送带有查询字符串值的电子邮件。但是邮件中的查询字符串值未显示在激活链接中：

```
msg.Body = "<a href=\'http://www.example.com/SignUp.aspx?nyckel= uniqueid'>Click</a>"; 
```

这里 uniqueid 是随机生成的值，随机生成的值不会显示在链接中。

电子邮件中的链接 ( [http://www.example.com/SignUp.aspx?nyckel=uniqueid](http://www.example.com/SignUp.aspx?nyckel=) )，显示在 ( [http://www.example.com/SignUp.aspx?nyckel=](http://www.example.com/SignUp.aspx?nyckel=) XXXXXXX) 的位置。

这是代码：

```
public static void sendMail(string Email, string uniqueid)
    {   
        uniqueid = GenerateRandom.GetUniqueReferalid(14);
        MailMessage msg = new MailMessage();
        msg.From = new MailAddress("Admin");
        string _toId = Email.ToString();
        msg.To.Add(new MailAddress(_toId));
        msg.Subject = ("Refer a Friend");   
        msg.IsBodyHtml = true;
        msg.Body = "<a href=\'http://www.example.com/SignUp.aspx?nyckel=uniqueid'></a>";
        SmtpClient client = new SmtpClient();
        client.EnableSsl = true;
        client.UseDefaultCredentials = true;
        try
        {
            client.Send(msg);              
        }
        catch
        {                
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T06:09:21.110

您需要将您的`uniqueid`字符串连接到您正在为其创建的字符串`msg.Body`。要在 C# 中连接字符串，请`+`在两个字符串之间使用连接运算符。

```
 public static void sendMail(string Email, string uniqueid)
    {   
        uniqueid = GenerateRandom.GetUniqueReferalid(14);
        MailMessage msg = new MailMessage();
        msg.From = new MailAddress("Admin");
        string _toId = Email.ToString();
        msg.To.Add(new MailAddress(_toId));
        msg.Subject = ("Refer a Friend");   
        msg.IsBodyHtml = true;
        msg.Body = "<a href='http://www.xxx.com/SignUp.aspx?nyckel=" + uniqueid + "'></a>";
        SmtpClient client = new SmtpClient();
        client.EnableSsl = true;
        client.UseDefaultCredentials = true;
        try
        {
            client.Send(msg);              
        }
        catch
        {                
        }
    } 
```

# objective-c - 地理围栏 iOS 崩溃 EXC_BAD_ACCESS

> ID：14995116
> 
> 赞同：0
> 
> 时间：2013-02-21T05:20:41.573
> 
> 标签：objective-c, exc-bad-access, core-location

我正在尝试在我的应用程序中实施地理围栏。我正在编写[Kevin McMahon](http://www.netmagazine.com/tutorials/get-started-geofencing-ios)的精彩教程。

我的问题是每次尝试创建地理围栏时都会收到“EXC_BAD_ACCESS (code=1, address= ...)。

这是我的代码：

```
NSMutableArray *placeID = [[NSMutableArray alloc] init];
    NSMutableArray *lats = [[NSMutableArray alloc] init];
    NSMutableArray *longs = [[NSMutableArray alloc] init];

    for (int i = 0; i < [responseObject count]; i++) {
        [placeID addObject:[[responseObject objectAtIndex:i]objectForKey:@"id"]];
        [longs addObject:[[responseObject objectAtIndex:i]objectForKey:@"long"]];
        [lats addObject:[[responseObject objectAtIndex:i]objectForKey:@"lat"]];
    }

    NSMutableDictionary *latDict = [[NSMutableDictionary alloc] initWithObjects:lats forKeys:placeID];
    NSMutableDictionary *longDict = [[NSMutableDictionary alloc] initWithObjects:longs forKeys:placeID];

    NSMutableArray *geofences = [[NSMutableArray array] init];

    for(int k = 0; k < [responseObject count]; k++) {
        CLRegion *geofence = [self mapDictionaryToRegionWithLat:latDict withLong:longDict usingID:[placeID objectAtIndex:k]];
        [geofences addObject:geofence];
    }

    [self initializeRegionMonitoring:geofences]; 
```

## 创建 CLRegion

```
 - (CLRegion*)mapDictionaryToRegionWithLat:(NSDictionary *)latDict withLong:(NSDictionary *)longDict usingID: (NSString *)placeStringID {

        NSString *title = [NSString stringWithFormat:@"title %@", placeStringID];

        CLLocationDegrees latitude = [[latDict objectForKey:placeStringID] doubleValue];
        CLLocationDegrees longitude = [[longDict objectForKey:placeStringID] doubleValue];

        CLLocationCoordinate2D centerCoordinate = CLLocationCoordinate2DMake(latitude, longitude);

        CLLocationDistance regionRadius = 10.0;

        return [[CLRegion alloc] initCircularRegionWithCenter:centerCoordinate
                                                       radius:regionRadius
                                                   identifier:title];
    } 
```

## 初始化区域监视器

```
 - (void) initializeRegionMonitoring:(NSArray*)geofences {
        if (locationManager == nil) {
            //[NSException raise:@"Location Manager Not Initialized" format:@"You must initialize location manager first."];
        }

        if(![CLLocationManager regionMonitoringAvailable]) {
            //[self showAlertWithMessage:@"This app requires region monitoring features which are unavailable on this device."];
            return;
        }

        for(CLRegion *geofence in geofences) { //ERROR HAPPENS HERE AFTER 7 ITERATION
            [locationManager startMonitoringForRegion:geofence];
            NSLog(@"geofence made here:\n\n%@\n\n",geofences);
        }
    } 
```

该错误似乎发生在“for（CLRegion *geofence in geofences）”的第 7 次迭代（b/c 有 7 个地理围栏）之后，因为我在“locationManager：manage didStartMonitoringForRegion：region”中的 NSLog 没有出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T06:05:26.900

这个问题根本与地理围栏、位置或核心位置无关。我只是忘记释放我发起的这些可变数组：

```
NSMutableDictionary *latDict = [[NSMutableDictionary alloc] initWithObjects:lats forKeys:placeID];
NSMutableDictionary *longDict = [[NSMutableDictionary alloc] initWithObjects:longs forKeys:placeID]; 
```

刚刚在方法结束时发布了这些字典，一切正常！

# jquery - 单击菜单时滑动内容

> ID：14995118
> 
> 赞同：0
> 
> 时间：2013-02-21T05:20:47.407
> 
> 标签：jquery, css

当单击右侧的链接内容之一将向左滑动时，我只希望左侧有一个简单的网站菜单。

[在这里](http://jsfiddle.net/jhunlio/2DY8M/3/)工作小提琴

html

```
<div class="contentLeft">
        <ul>
            <li><a class="selectBox" href="#">sample</a></li>
            <li><a class="selectBox" href="#">sample1</a></li>
            <li><a class="selectBox" href="#">sample2</a></li>
        </ul>    

    </div>

<div class="contentRight">
    <div class="selectBoxContent">its</div>
    <div class="selectBoxContent">my</div>
    <div class="selectBoxContent">way</div>
</div> 
```

jQuery

```
$(function() {

            $('.selectBox').click(function() {
         $('.selectBoxContent').slideLeft('fast');
        return false;

    });
        }); 
```

css

```
.contentLeft {
    border:1px solid green;
    width:30%;
    float:left;
}

.contentRight {
    border:1px solid red;
    width:64%; 
    float:right;
    height:400px;
}
.selectBoxContent {
    width:100%;
    height:400px;
    display:none;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T06:04:40.610

You could use .animate rather then slide. So something like

JQuery

```
$(function() {
  $('.selectBox').click(function() {
    $('.selectBoxContent').fadeIn().animate({
      right: "0"
     }, 1000);
    return false;
  });
}); 
```

CSS

```
.contentRight {
    border:1px solid red;
    width:64%; 
    float:right;
    height:400px;
    overflow: hidden;
    position: relative;
}

.selectBoxContent {
    width:100%;
    height:400px;
    display:none;
    right: -100%;
    position: relative;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T06:40:14.760

通过使用[jQuery UI - Slide Effect](http://api.jqueryui.com/slide-effect/)我们可以实现这一点。

**jQuery** :

```
 $('.selectBoxContent').toggle( "slide" );
    return false;
 }); 
```

[**看演示**](http://jsfiddle.net/2DY8M/9/)

# function - pol2cart matlab 不提供 [XY]

> ID：14995121
> 
> 赞同：2
> 
> 时间：2013-02-21T05:21:05.770
> 
> 标签：function, matlab

matlab 中的`pol2cart`函数应将角度和距离数组转换为`[X Y]`位置列表。当我执行以下命令时，我得到了这个：

```
a1 = [1 2 3 4 5]';
a2 = [6 7 8 9 10]';
pol2cart(a1, a2)

ans =

 3.2418
-2.9130
-7.9199
-5.8828
 2.8366 
```

阅读信息`help pol2cart`似乎表明我应该得到一个不应该的XY值`5x2`数组`5x1`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T05:27:42.847

您需要像这样调用函数：

```
[X,Y] = pol2cart(a1, a2); 
```

这将为您提供两个向量：`X`和`Y`。

# asp.net - 菜单中的固定高度和重复列 - CSS

> ID：14995122
> 
> 赞同：2
> 
> 时间：2013-02-21T05:21:10.130
> 
> 标签：asp.net, html, css, drop-down-menu, menu

我有一个菜单，我希望菜单的高度是固定的，并且想要垂直而不是水平地呈现菜单。即，我希望菜单在一定高度后在下一列中继续，以便没有空格。请看这个截图...

![菜单屏幕截图](../Images/1146cc93cb6a729d05db3c19ed87084b.png)

我希望“Admission Desk”菜单位于“Patient”菜单下方，然后是下一个菜单，依此类推......，所以不会显示空白......

这是我的CSS...

```
menurepository .submenudiv
{
    float: left;
    padding: 1px 3px 3px 2px;
    margin: 4px;
    text-align: center;
}
.menurepository .submenudiv h3
{
    color: #111111;
    font-size: 6pt;
    float: left;
    font-family: Tahoma;
    text-align: left;
}
.linkdiv
{
    clear: both;
}
.menurepository .submenudiv .linkdiv a
{
    color: #28A1E2;
    font-size: 7pt;
    clear: both;
    display: block;
    padding: 2px 0px;
    margin: 4px 4px 4px 0px;
    text-align: left;
    font-family: Tahoma;
    width: 100%;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T22:05:04.023

可以使用新的 css3 列计数规则 [http://www.w3schools.com/css3/css3_multiple_columns.asp] 执行此操作。根据 w3schools，这仅适用于现阶段的 Firefox/Chrome/Safari。对于 IE，菜单优雅地降级为一长列。IE 10 可能有效，但我无法验证。

您需要简化标记以使菜单列正常工作。有关工作示例，请参阅 [http://jsfiddle.net/sSwpZ/]。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T07:25:24.803

[FTColumnflow](https://github.com/ftlabs/ftcolumnflow)为您的问题提供了一个相当优雅的解决方案。

# ruby-on-rails - Shopify ApplicationCharge 删除？

> ID：14995123
> 
> 赞同：0
> 
> 时间：2013-02-21T05:21:14.600
> 
> 标签：ruby-on-rails, shopify

通过应用程序收费并对其进行测试，它们是一种以后删除不需要的方法吗？我在这个 api 页面上看不到删除示例：http: [//api.shopify.com/applicationcharge.html](http://api.shopify.com/applicationcharge.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:29:40.380

您不能删除 ApplicationCharge。ApplicationCharge 是一次性的立即收费（一旦激活）。

# lua - 测试两个输入是否为数字且不为空

> ID：14995125
> 
> 赞同：3
> 
> 时间：2013-02-21T05:21:29.030
> 
> 标签：lua

我有一个可以使用 0、1 或 2 个参数调用的函数。我想测试一下输入了多少参数以及它们是否是实际数字。这是代码：

```
first = tonumber(frame.args[1])
second = tonumber(frame.args[2])

if first then
  if first <= second then
    return math.random(first, second)
  end
return math.random(first)
end   
return math.random() 
```

我的想法是，如果它们不是数字（或为空），那么当我调用 tonumber() 时，变量将为假。如果它们都是 NaN，则 <= 可能为真，但它们必须经历作为数字存在的“第一个”，因此它们都必须是数字，并且比较不会使 if 语句短路。如果任何一个 if 失败，它就会跳到下一个有效的返回。看起来不错？有人看到任何问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T11:17:54.397

`first`如果是数字并且为 nil，则您的代码会中断`second`，因为将数字与 nil 进行比较是错误的。这是一个更正确的版本：

```
first = tonumber(frame.args[1])
second = tonumber(frame.args[2])

if second and first and (first <= second) then
  return math.random(first, second)
elseif first then
  return math.random(first)
else return math.random() end 
```

然而，这段代码非常脆弱：它不检查参数的类型，也不确保数字是整数。根据它的用途，您可能希望使其更严格。一个非常严格的版本看起来像：

```
local is_int = function(n)
  return (type(n) == "number") and (math.floor(n) == n)
end

local first, second = frame.args[1], frame.args[2]

if first == nil then
  assert(second == nil)
  return math.random()
else
  assert(is_int(first))
  if second == nil then
    return math.random(first)
  else
    assert(is_int(second))
    return math.random(first,second)
  end
end 
```

当然，您也可以决定返回`nil`意外输入而不是使用断言...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T07:46:05.157

如果可以接受包含数字的字符串，`tonumber(foo)`则可以正常工作，并且实际上会在内部将其转换为“数字”值。但是，如果您需要知道 Lua 是否将其视为实际数字而不是字符串，`'number' == type(foo)`请在您的测试条件中使用。

# java - 为什么 RuntimeException 不需要显式的异常处理？

> ID：14995127
> 
> 赞同：8
> 
> 时间：2013-02-21T05:21:39.980
> 
> 标签：java, exception, try-catch

一般来说，Java 中有两种处理异常的方法。

1.  在方法签名中添加 throws 声明
2.  用 try/catch 块包围。

但是，我注意到某些异常，尤其是继承自 的异常，`RuntimeException`不需要这种显式的异常处理。

例如，我创建了如下示例方法，并为不需要显式异常处理的方法标记了“不需要”。

```
public void textException(){
    int i = (new Random()).nextInt(100);

    switch (i){
    case 1:
        throw new NullPointerException();   //Not required
    case 2:
        throw new NumberFormatException();  //Not required
    case 3:
        throw new RuntimeException();       //Not required
    case 4:         
        throw new ClassNotFoundException(); //Required
    case 5:
        throw new IOException();            //Required
    case 6:
        throw new Exception();              //Required
    default:
        return;
    }
} 
```

我注意到`RuntimeException`继承自`Exception`.

为什么`RuntimeException`不需要显式捕获来编译而其他`Exceptions`需要？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T05:29:26.803

对于 Java，RuntimeException 被认为是系统异常，一般情况下是不可恢复的，所以不需要在方法上添加 throws 声明或使用 try catch 块来处理它。但是，Exception 被认为是应用程序异常，它是可恢复的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-22T13:17:42.587

“如果可以合理地期望客户从异常中恢复，则将其设为受检异常。如果客户无法从异常中恢复，则将其设为未受检异常。” [http://docs.oracle.com/javase/tutorial/essential/exceptions/runtime.html](http://docs.oracle.com/javase/tutorial/essential/exceptions/runtime.html)

# javascript - 适用于每个变量的 JQuery addclass 和 Remove 类不起作用

> ID：14995131
> 
> 赞同：1
> 
> 时间：2013-02-21T05:21:48.860
> 
> 标签：javascript, jquery, addclass, removeclass

在我的页面中，我使用了 jquery addclass 并删除了类功能来为所选图像添加边框。但图像在 for 循环内。所以它对我不起作用，我尝试了各种编码。但我没有得到预期的结果。我使用的编码

**for循环中的四个图像列表**

```
<div id="containerborder">
        <?php foreach ($images as $image) { ?>

        <a href="javascript:;" title="<?php echo $heading_title; ?>" class="colorboxs" rel="<?php echo $image['popup'];?>"onclick="document.getElementById('image').src=this.rel"> <img src="<?php echo $image['thumb']; ?>" title="<?php echo $heading_title; ?>" alt="<?php echo $heading_title; ?>" id="<?php echo $image['popup']; ?>" onclick="swapborder(this.id);"/>
        </a>
        <?php } ?> 
```

**查询函数**

```
<script>
 $(function() { 
 $('#contianer a').click(function() { return swapborder(this); }); 
 }); 
 // 
 function swapborder(clickObject) {
 var currentId=clickObject; 
 alert(currentId);
 $('#containerborder a').each(function() { 
 if ($(this).attr('id')==currentId) { 
 $(this).addClass('active-class'); 
 } 
else { $(this).removeClass('active-class'); } 
 }); 
 return false; 
 } 
 </script> 
```

它在警报中显示 ID。但在那之后**$('#containerborder a').each(function() {** 不起作用并且图像的边框没有应用。谁能帮我解决这个问题。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T05:25:27.220

你的意思是写`var currentId = $(clickObject).attr('id')`

但是，这样做会更容易：

```
function swapBorder(elem) {
    $("#containerborder a").removeClass('active-class');
    $(elem).addClass('active-class');
} 
```

# jsp - 从客户网站登录到另一个网站

> ID：14995137
> 
> 赞同：0
> 
> 时间：2013-02-21T05:22:21.650
> 
> 标签：jsp, iframe, login, web

我正在开发一个 JSP/servelet Web 应用程序。我在我的一个网页中使用[http://emma.msrb.org/Search/Search.aspx显示这个网站](http://emma.msrb.org/Search/Search.aspx)

```
<iframe width="825" height="800" src="http://emma.msrb.org/Search/Search.aspx"></iframe> 
```

我想在加载到该网站时自动登录到该网站`<iframe>`

登录位于“MyEMMA”网站的右上角，当我单击链接时，它会弹出一个登录窗口。然后输入电子邮件 && 密码。通过查看登录功能下方的页面源代码是一个 Javascript。

是否可以在加载到该网站时登录到该网站？如果是这样，谁能给我一些提示如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T05:25:17.907

看看login java script函数是怎么写的。从某种意义上说，它在哪里发布登录凭据，以及它传递的参数是什么。现在在加载此页面时，首先将凭据发布到同一个 servlet 上，然后再加载此页面。

# libmemcache - 未检测到 memcached 故障

> ID：14995138
> 
> 赞同：1
> 
> 时间：2013-02-21T05:22:33.687
> 
> 标签：libmemcache, libmemcached

我正在使用 libmemcached-0.32。我将行为标志设置如下

> memcached_behavior_set(memcached, MEMCACHED_BEHAVIOR_SERVER_FAILURE_LIMIT, 5); memcached_behavior_set(memcached, MEMCACHED_BEHAVIOR_AUTO_EJECT_HOSTS, 1);

但是当两台 memcached 主机中的一台出现故障时，它不会弹出它。

我需要某种切换机制，比如如果一台服务器出现故障，libmemcached 应该在另一台服务器上获取/设置请求。

我应该怎么办 ？

# mysql - 在 Wordpress 中使用 $wpdb->insert 语句传递 null

> ID：14995139
> 
> 赞同：0
> 
> 时间：2013-02-21T05:22:41.353
> 
> 标签：mysql, wordpress

我有这个现有的代码来插入空值：

```
if (item['data'] == 'NULL') {
        $item['data'] = NULL;
    }   

     $wpdb->insert($wpdb->prefix.'mydata', $item); 
```

但是我检查了数据库，它只是插入空白作为值。我想插入真正的空值并检查它。有什么方法可以修改我现有的代码。

如果您插入任何值，表中有一个空列，如果您检查它，它将给出真正的空值。但我很难弄清楚如何插入这个。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T06:07:05.407

数据应该是`column->value`格式的数组。

```
$wpdb->insert(
  $wpdb->prefix.'table_name', //param 1 = table name
    array( //param 2 is an array with column name and value
     'column_name' => $yourdata
    )
); 
```

# appfog - 错误信息，无法将 MySQL 服务绑定到 App

> ID：14995140
> 
> 赞同：0
> 
> 时间：2013-02-21T05:22:43.733
> 
> 标签：appfog

当我尝试将 MySQL 服务绑定到我的应用程序 (AppFog) 时遇到问题。

消息：名称：VmcError，端点：POST：/服务，状态代码：502，代码：503，描述：来自服务网关的意外响应

问题是什么？

安东尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T19:45:26.370

这看起来像是 AppFog 方面的问题。502 是错误网关，因此 AppFog 上的服务服务器之一没有响应。

尝试从 Web UI 进行绑定，尝试不同的基础架构，或在 AppFog 上提交支持票。

# android - 无法从数据库中检索数据并将其添加到列表中

> ID：14995147
> 
> 赞同：-1
> 
> 时间：2013-02-21T05:23:04.047
> 
> 标签：android, sqlite, android-listview

这个问题可能已经在某个地方解决了，但我无法正确解决，所以请帮助我刚开始使用数据库，所以我对此知之甚少。

我正在尝试从创建的数据库中检索数据，并且调用了一个空指针异常。

这是显示列表 ID 的类。

ReviewList.java

```
public class ReviewList extends ListActivity{
    private ReviewsDataSource datasource;
    // Place Details
    PlaceDetails placeDetails;

    @Override
      public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.review);
        Button b = (Button) findViewById(R.id.reviewbutton);
        datasource = new ReviewsDataSource(this);
        datasource.open();

        List<Review> values = datasource.getAllReviews(placeDetails.result.reference);

        // Use the SimpleCursorAdapter to show the
        // elements in a ListView
        ArrayAdapter<Review> adapter = new ArrayAdapter<Review>(this,
        android.R.layout.simple_list_item_1, values);
        setListAdapter(adapter);

        b.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                @SuppressWarnings("unchecked")
                ArrayAdapter<Review> adapter = (ArrayAdapter<Review>) getListAdapter();
               Review review = null;

               EditText et = (EditText) findViewById(R.id.reviewtext);
               String text= et.getText().toString();

               review=datasource.createReview(text, placeDetails.result.reference);
               adapter.add(review);
               adapter.notifyDataSetChanged();
            }
        });
      }

     @Override
      protected void onResume() {
        datasource.open();
        super.onResume();
      }

      @Override
      protected void onPause() {
        datasource.close();
        super.onPause();
      }

} 
```

这是复习课

```
public class Review {

    private String id;
      private String review;

      public String getId() {
        return id;
      }

      public void setId(String id) {
        this.id = id;
      }

      public String getReview() {
        return review;
      }

      public void setReview(String review) {
        this.review = review;
      }

      // Will be used by the ArrayAdapter in the ListView
      @Override
      public String toString() {
        return review;
      }
} 
```

这是进行所有数据库操作的ReviewsDataSource.java。

```
public class ReviewsDataSource {

     private SQLiteDatabase database;
     private Database dbHelper;

     private String[] allColumns = { Database.COLUMN_ID,
              Database.COLUMN_REVIEW };

     public ReviewsDataSource(Context context) {
            dbHelper = new Database(context);
          }

     public void open() throws SQLException {
            database = dbHelper.getWritableDatabase();
          }

     public void close() {
            dbHelper.close();
          }
     public Review createReview(String review, String reference) {
            ContentValues values = new ContentValues();
            values.put(Database.COLUMN_REVIEW, review);
            values.put(Database.COLUMN_ID, reference);
            database.insert(Database.TABLE_REVIEWS, null, values);
            Cursor cursor = database.query(Database.TABLE_REVIEWS,
                allColumns, Database.COLUMN_ID + " = " + reference, null,
                null, null, null);
            cursor.moveToFirst();
            Review newReview = cursorToReview(cursor);
            cursor.close();
            return newReview;
          }

     public void deleteReview(Review comment) {
            String id = comment.getId();
            System.out.println("Comment deleted with id: " + id);
            database.delete(Database.TABLE_REVIEWS, Database.COLUMN_ID
                + " = " + id, null);
          }
     public List<Review> getAllReviews(String reference) {
            List<Review> comments = new ArrayList<Review>();
            Cursor cursor = database.query(Database.TABLE_REVIEWS,
                    allColumns, null, null, null, null, null);
            cursor.moveToFirst();
            while (!cursor.isAfterLast()) {
              Review review = cursorToReview(cursor);
              if(cursor.getString(0)==reference)
              {
              comments.add(review);
              }
              cursor.moveToNext();
            }
            // Make sure to close the cursor
            cursor.close();
            return comments;

     }

    private Review cursorToReview(Cursor cursor) {
        // TODO Auto-generated method stub
        Review review = new Review();
        review.setId(cursor.getString(0));
        review.setReview(cursor.getString(1));
        return review;
    }

} 
```

最后是 database.java 类

```
public class Database extends SQLiteOpenHelper {

    public static final String TABLE_REVIEWS = "reviews";
      public static final String COLUMN_ID = "_id";
      public static final String COLUMN_REVIEW = "REVIEW";

      private static final String DATABASE_NAME = "reviews.db";
      private static final int DATABASE_VERSION = 1;

      private static final String DATABASE_CREATE = "create table "
              + TABLE_REVIEWS + "(" + COLUMN_ID
              + " text not null, " + COLUMN_REVIEW
              + " text not null);";

      public Database(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
          }

    @Override
    public void onCreate(SQLiteDatabase database) {
        // TODO Auto-generated method stub
        database.execSQL(DATABASE_CREATE);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub
        Log.w(Database.class.getName(),
                "Upgrading database from version " + oldVersion + " to "
                    + newVersion + ", which will destroy all old data");
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_REVIEWS);
        onCreate(db);
    }
} 
```

这是我的日志猫

```
 02-21 10:49:08.957: E/AndroidRuntime(24586): FATAL EXCEPTION: main
 02-21 10:49:08.957: E/AndroidRuntime(24586):
 java.lang.RuntimeException: Unable to start activity
 ComponentInfo{com.example.fueled_assignment_1/com.example.fueled_assignment_1.ReviewList}:
 java.lang.NullPointerException 02-21 10:49:08.957:
 E/AndroidRuntime(24586):   at
 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1872)
 02-21 10:49:08.957: E/AndroidRuntime(24586):   at
 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1893)
 02-21 10:49:08.957: E/AndroidRuntime(24586):   at
 android.app.ActivityThread.access$1500(ActivityThread.java:135) 02-21
 10:49:08.957: E/AndroidRuntime(24586):     at
 android.app.ActivityThread$H.handleMessage(ActivityThread.java:1054)
 02-21 10:49:08.957: E/AndroidRuntime(24586):   at
 android.os.Handler.dispatchMessage(Handler.java:99) 02-21
 10:49:08.957: E/AndroidRuntime(24586):     at
 android.os.Looper.loop(Looper.java:150) 02-21 10:49:08.957:
 E/AndroidRuntime(24586):   at
 android.app.ActivityThread.main(ActivityThread.java:4389) 02-21
 10:49:08.957: E/AndroidRuntime(24586):     at
 java.lang.reflect.Method.invokeNative(Native Method) 02-21
 10:49:08.957: E/AndroidRuntime(24586):     at
 java.lang.reflect.Method.invoke(Method.java:507) 02-21 10:49:08.957:
 E/AndroidRuntime(24586):   at
 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849)
 02-21 10:49:08.957: E/AndroidRuntime(24586):   at
 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607) 02-21
 10:49:08.957: E/AndroidRuntime(24586):     at
 dalvik.system.NativeStart.main(Native Method) 02-21 10:49:08.957:
 E/AndroidRuntime(24586): **Caused by: java.lang.NullPointerException
 02-21 10:49:08.957: E/AndroidRuntime(24586):   at
 com.example.fueled_assignment_1.ReviewList.onCreate(ReviewList.java:26)**
 02-21 10:49:08.957: E/AndroidRuntime(24586):   at
 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1072)
 02-21 10:49:08.957: E/AndroidRuntime(24586):   at
 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1836)
 02-21 10:49:08.957: E/AndroidRuntime(24586):   ... 11 more 
```

请帮我解决我一团糟的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T05:32:23.963

您将不得不编写一个自定义数组适配器 - 使用 Review 作为您的 DAO

检查此示例 [仅将文本作为数组](http://www.mkyong.com/android/android-listview-example/)

[图像和数组](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)

让我知道

# bash - ssh + here 文档 + 交互模式

> ID：14995148
> 
> 赞同：0
> 
> 时间：2013-02-21T05:23:07.040
> 
> 标签：bash, ssh

我可以在具有交互模式的远程计算机上通过 ssh 运行此处的文档脚本吗？

代码示例是：

```
ssh -t xijing@ggzshop.com 'bash -s' <<EOF
sudo ls
......Other big scripts......
EOF 
```

## double -t 也无法正常工作。

-----------------------------一种可能的解决方案：----------------- --

经过多次尝试，我得出以下答案：

```
Script=`cat <<'EOF'
sudo ls
.....Big scripts.....
EOF`

ssh -t user@host ${Script} 
```

这将允许用户输入密码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-25T19:06:39.810

西京的解决方案似乎对我有用。但是，我做了一些外观上的改变。首先，为了便于阅读，我使用“美元括号”而不是反引号。对于另一件事，我不提供任何解释：即使命令是在单独的行上编写的，也需要分号来分隔脚本片段中的多个命令。我的测试：

```
Script=$( cat <<'HERE'
hostname;
cat /etc/issue;
sudo id
HERE
)

ssh -t user@host ${Script} 
```

sudo 密码会以正常方式询问，无需省略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T14:49:22.600

不，我不认为你可以运行这样的交互式脚本。

为了实现您想要的，您可以为常见的管理任务创建专用用户，这些用户可以在`sudo`没有密码的情况下运行管理命令。接下来，设置 ssh 密钥身份验证以作为专用用户登录并执行必要的任务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-11T18:14:33.697

`Script`如果有引号，则不必使用分号分隔多个命令。

```
Script="$( cat <<'HERE'
hostname;
cat /etc/issue;
sudo id
HERE
)"

- ssh -t user@host ${Script}
+ ssh -t user@host "${Script}"

# alternative (not recommended)
# set IFS variable to null string to avoid deletion of newlines \n in unquoted variable expansion
export IFS=''
ssh -t user@host ${Script} 
```

# java - 需要关于设计表格分页的建议

> ID：14995153
> 
> 赞同：0
> 
> 时间：2013-02-21T05:23:24.703
> 
> 标签：java, javascript, performance, jquery

**问题陈述：**在 Oracle 表中，我有 3000000 条记录。用户希望在浏览器中将此表视为带有分页（每页 100 条记录）的表（jquery 数据表）。当我设计它时，它大约有 30000 页。当用户单击单个页面时，我正在查询带有排序的表，显示它将返回那么多行。这里的问题是加载每个页面需要大约 20 秒的时间。

任何人都可以建议我“如何解决这种情况？这样用户就不会从他身边感到缓慢。在服务器端缓存这些许多记录是一个好的选择吗？”

查询类似于：

```
SELECT /*+ ALL_ROWS */ * FROM 
(SELECT ROWNUM SNO , A.* FROM 
( SELECT /*+ PARALLEL(ABCTABLE 4)*/ COUNT(*) OVER ( ) CNT, 
            columnA, columnb,columnc
             FROM ABCTABLE )
       order by columnA, columnb,columnc ) a )
       where sno between ? and ?; 
```

? 和 ？:- 是页面范围 1 到 30/30 到 60/.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T05:30:54.320

我仍然怀疑您的 GUI 用户会看到所有 3000000 条记录。肯定他对大约 1000 条记录（10 页）的最新行（过滤器）感兴趣，所以你最好将前 1000 条记录传递给客户端，让客户端在每页显示 100 条记录，直到 10 页。之后，您可以 ping 服务器以获取接下来的 1000 条记录。

如果延迟是在 ORACLE 提取中，请考虑为您的表建立索引以减少查询时间。 [http://www.codeproject.com/Articles/39006/Overview-of-SQL-Server-2005-2008-Table-Indexing-Pa](http://www.codeproject.com/Articles/39006/Overview-of-SQL-Server-2005-2008-Table-Indexing-Pa)

还要仔细检查[解释计划](http://www.akadia.com/services/ora_interpreting_explain_plan.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T08:55:56.633

大多数屏幕限制只显示 30 条记录。

想法是向用户显示 30 条记录，因为用户在孔屏幕中看不到 30000 条记录，他必须向下滚动才能查看其余记录。

当他向下滚动时，尝试获取接下来的 30 条记录，直到每页达到 30000 条记录。

您可以在 Sql 查询中使用 limit 来限制记录数而不是获取所有记录，这将减少页面加载时间。

有这样的基本限制，每页 1 到 30000、30001 到 60000 等等。

然后在每个滚动条上的 SQL 限制为 1 到 30

sql_limit = base_limit + 30

如果用户向下滚动到第 30 条记录的末尾，则获取新的 30 条记录

sql_limit+30

继续此过程，直到达到 30000 页限制

直到 sql_limit >= page_limit

如果 sql_limit 超过 page_limit 则跳转到新页面并再次对每个页面执行相同的处理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T05:38:00.077

要提高性能，首先需要找到瓶颈。这可能是很多事情：

1.  由于查询计划错误/缺少索引等，查询返回缓慢。
2.  由于网络慢，数据返回缓慢
3.  数据在您的应用程序中呈现缓慢

没有人愿意浏览 300 万条记录。人们正在寻找一些东西。如果您添加一些合理的搜索/过滤条件和索引，您将获得更有用的应用程序。

# javascript - 将背景设置为动态创建的复选框和 div 中的文本

> ID：14995158
> 
> 赞同：0
> 
> 时间：2013-02-21T05:23:41.390
> 
> 标签：javascript, jquery

我想为每个复选框应用背景并用一些空格分隔。**是否可以将背景应用于div**中动态创建的复选框

 **我必须为这条线设置背景。

`'<input type="checkbox" value="'+ ar2[i] + " " + " " + ar1[i] + '"/>' + ar1[i] + " " + " " + ar2[i] + '</br>' + '</br>' + '</br>'`

```
 for ( var i = 0; i < ar2.length; i++) {
        var newTextBoxDiv = $(document.createElement('div')).attr("id", 'TextBoxDiv' + counter);
        newTextBoxDiv.after().html('<input type="checkbox" value="'+ ar2[i] + "   " + "   " + ar1[i] + '"/>' + ar1[i] + "   " + "   " + ar2[i] + '</br>' + '</br>' + '</br>' );
        newTextBoxDiv.appendTo("#TextBoxesGroup");
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T06:20:26.623

尝试;

```
classx="classname";
for ( var i = 0; i < ar2.length; i++) {
        var newTextBoxDiv = $(document.createElement('div')).attr("id", 'TextBoxDiv' + counter);
        newTextBoxDiv.after().html('<input class="'+classx+'" type="checkbox" value="'+ ar2[i] + "   " + "   " + ar1[i] + '"/>' + ar1[i] + "   " + "   " + ar2[i] + '</br>' + '</br>' + '</br>' );
        newTextBoxDiv.appendTo("#TextBoxesGroup");
    } 
```

您可以在 css 中创建自定义类并分配一个类名`classx`，它将将该类应用于动态创建的复选框。复选框将得到相应的样式。**

# php - php中的Clickbank API？

> ID：14995160
> 
> 赞同：0
> 
> 时间：2013-02-21T05:24:00.957
> 
> 标签：php, api, curl, clickbank

我需要从点击银行获取数字产品，所以我正在使用他们的 API 来获取产品，不幸的是，他们给出的示例代码不起作用，我正在使用 CURL 来执行此操作，

代码如下：

```
<?php
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL,"https://api.clickbank.com/rest/1.3/products/list");
curl_setopt($ch, CURLOPT_HEADER, true); 
curl_setopt($ch, CURLOPT_HTTPGET, true); 
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_HTTPHEADER, array("Accept: application/xml", "Authorization:DEV-KEY:API-KEY"));
$result = curl_exec($ch);
curl_close($ch);

print $result;

?> 
```

但我收到以下错误

```
HTTP/1.1 400 Bad Request Date: Thu, 21 Feb 2013 05:20:47 GMT Server: Apache/2.2.23 (FreeBSD) mod_jk/1.2.37 mod_ssl/2.2.23 OpenSSL/0.9.8x Vary: Accept-Encoding Connection: close Transfer-Encoding: chunked Content-Type: text/plain The API call (/api/rest/1.3/products/list) requires parameters which are missing : [site]1 
```

以前有人遇到过这个错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T05:30:00.103

它需要一个名为 site 的参数。请在此处查看文档： [https ://api.clickbank.com/rest/1.3/products](https://api.clickbank.com/rest/1.3/products)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-22T08:06:12.947

尝试这个：

```
<?php
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL,"https://api.clickbank.com/rest/1.3/products/list?site=<your unique affiliate id>");
    curl_setopt($ch, CURLOPT_HEADER, true); 
    curl_setopt($ch, CURLOPT_HTTPGET, true); 
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
    curl_setopt($ch, CURLOPT_HTTPHEADER, array("Accept: application/xml", "Authorization:DEV-KEY:API-KEY"));
    $result = curl_exec($ch);
    curl_close($ch);

    print $result;

    ?> 
```

# ios - UITextView的Phonegap iOS插件？

> ID：14995164
> 
> 赞同：1
> 
> 时间：2013-02-21T05:24:10.383
> 
> 标签：ios, cordova, uitextview

我正在尝试为 Phonegap iOS 应用程序查找文本视图/编辑器。

基本上我希望它看起来像

![在此处输入图像描述](../Images/8063c84c45ced95d2fd1a4879b4ce070.png)

带有自定义标题。所以我的问题是我可以从插件中继承 UITextView 部分（如果有的话）并且仍然使用我自定义的 HTML 标题吗？

这是我正在创建的一个笔记应用程序，它需要这个。我尝试为此使用常规的 jQuery、Html、CSS，但是当我输入文本时它开始跳来跳去。

# php - 在从 PHP 生成 DOC 时需要有关分页符的帮助

> ID：14995168
> 
> 赞同：0
> 
> 时间：2013-02-21T05:24:40.397
> 
> 标签：php, html, ms-word

我正在尝试使用 headers 方法生成一个通过 PHP 中的 HTML 代码包装它的 doc 文件。该方法工作正常，我得到了一个正确的 docx 文件。但是 docx 文件中没有分页符。无论文本有多长，它都在一页中。这是示例代码..

```
&lt;?php
header("Content-type: application/vnd.ms-word");
header("Content-Disposition: attachment;Filename=demo.doc");
echo "&lt;html>";
echo "&lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset= Windows-1251\">";
echo "&lt;body>";
echo "<b>Random Text</b>";
echo "&lt;/body>";
echo "&lt;/html>";
?> 
```

在发布这个问题之前，我还尝试了谷歌，并通过添加下面的代码提出了很多人解决了类似的问题。

```
echo "&lt;br style='mso-special-character:line-break; pageBreakBefore:auto'>"; 
```

但是，此解决方案不适用于我的情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T05:38:44.400

1.  打开词
2.  创建带有分页符的文档
3.  在您喜欢的 zip 文件程序中打开 docx
4.  查找内容

这是我使用 LibreOffice Writer 得到的结果：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<w:document xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:v="urn:schemas-microsoft-com:vml" xmlns:w="http://schemas.openxmlformats.org/wordprocessingml/2006/main" xmlns:w10="urn:schemas-microsoft-com:office:word" xmlns:wp="http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing">
    <w:body>
        <w:p>
            <w:pPr>
                <w:pStyle w:val="style0"/>
            </w:pPr>
            <w:r>
                <w:rPr></w:rPr>
                <w:t>Before page break</w:t>
            </w:r>
        </w:p>
        <w:p>
            <w:pPr>
                <w:pStyle w:val="style0"/>
                <w:pageBreakBefore/>
            </w:pPr>
            <w:r>
                <w:rPr></w:rPr>
                <w:t>After</w:t>
            </w:r>
        </w:p>
        <w:sectPr>
            <w:type w:val="nextPage"/>
            <w:pgSz w:h="15840" w:w="12240"/>
            <w:pgMar w:bottom="1134" w:footer="0" w:gutter="0" w:header="0" w:left="1134" w:right="1134" w:top="1134"/>
            <w:pgNumType w:fmt="decimal"/>
            <w:formProt w:val="false"/>
            <w:textDirection w:val="lrTb"/>
        </w:sectPr>
    </w:body>
</w:document> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-26T18:05:28.437

您只需在需要分页符的地方向 HTML 元素添加样式。

```
<h2 style="page-break-before: always;">Next Page</h2> 
```

此标题将显示在新页面中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-25T04:07:49.047

我知道这是一个很老的问题，但这是我正在使用的，它工作得很好。

Docx XML 使用它来打破页面

```
<w:br w:type="page"/> 
```

只需在您想要分页的任何地方使用它即可。

有关分页符的更多信息在[这里](https://social.msdn.microsoft.com/Forums/office/en-US/12e84734-b7c9-4b7b-9dbc-d8730e779b57/determine-the-page-breaks-in-open-xml-document-for-docx-file?forum=oxmlsdk)。

# android - 从 android market 安装应用程序后如何拉取 android 应用程序代码

> ID：14995169
> 
> 赞同：-6
> 
> 时间：2013-02-21T05:24:53.493
> 
> 标签：android, command-prompt, pull

从 android market 安装应用程序后，我们是否有可能提取 android 应用程序代码。

我怎样才能拉出那个代码？

请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T05:31:34.820

*在我提出建议之前，我知道如何去做，并不意味着我纵容这样的任务。*

您可以使用一些工具来获得所需的内容：

1.  [APK 管理器](http://forum.xda-developers.com/showthread.php?t=1310151)实用程序
2.  dex2jar[实用](http://code.google.com/p/dex2jar/)程序

您自然需要有一个根设备才能将 APK 从系统分区中拉出。

如果您需要查看 XML（资源文件），*APK 管理器*就是您的最佳选择。如果您需要查看 JAVA 代码，则需要使用*dex2jar*实用程序。

注意：dex2jar 不会显示您在 eclipse 下的项目中看到的**实际代码。**您将需要加入很多点以及大量假设。

*这就是我结束帖子并划定界限的地方。不太喜欢看到其他开发人员如何构建他们的应用程序。我宁愿做一个惨不忍睹的申请，也不愿明目张胆地抄袭甚至引用别人的辛勤工作。*

# c# - 高分辨率的PDF到PNG

> ID：14995170
> 
> 赞同：0
> 
> 时间：2013-02-21T05:24:59.150
> 
> 标签：c#, ghostscript

我想将 PDF 文件转换为 PNG，我希望输出为 595*842 的高分辨率，

我使用了这个命令：

> gswin64.exe -q -sDEVICE=png16m -dSAFER -dMaxBitmap=1000000000 -dTextAlphaBits=4 -dGraphicsAlphaBits=4 -dPDFFitPage=true -sDEVICE=pngalpha -dBATCH -dNOPAUSE -sOutputFile=C:\cover.png C:\cover.pdf

我知道我可以使用`-r300`，但它也会将尺寸更改为 2479*3509，我试过`-sPAPERSIZE=a4 + -r300`了，但没有用。

如何以高分辨率输出 595x842？

当前代码：

```
ProcessInfo = new System.Diagnostics.ProcessStartInfo( "gswin64.exe", "-q -sDEVICE=pngalpha -dBATCH -dNOPAUSE -sOutputFile=C:\\Users\\MNiyatkhair\\Desktop\\cairoCopy\\cover.png C:\\Users\\MNiyatkhair\\Desktop\\cairoCopy\\Holding.pdf" ); 
// -r300 
ProcessInfo.CreateNoWindow = true; 
ProcessInfo.UseShellExecute = true; 
ProcessInfo.WindowStyle = System.Diagnostics.ProcessWindowStyle.Hidden; 
Process = Process.Start(ProcessInfo); Process.WaitForExit(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-09T06:23:38.777

You can try to increase the image resolution (for example -r(72*3)) and add proportional downscale factor **-dDownScaleFactor=3**. It will work like native PDF MatrixTransform.

# c - Char* 数组不保留值 C

> ID：14995173
> 
> 赞同：0
> 
> 时间：2013-02-21T05:25:23.267
> 
> 标签：c, string, char

对于我的网络课程，我们正在构建一个基于 UDP 协议的 bittorrent 客户端，这非常酷，但由于某些原因，我在使用 C 字符串时遇到了很多麻烦。

第一次收到数据包时，我会：

```
if(server_data == NULL){
    server_data = malloc(one_block.total_blocks*sizeof(char*));
    int i;
    for(i = 0; i < one_block.total_blocks; i++){
        server_data[i] = malloc(sizeof(char*));
        server_data[i] = "";
    }
} 
```

这里，server_data 是一个`char**`，one_block 是`struct`保存数据包信息和有效负载。

接下来我做：

```
server_data[one_block.which_block] = one_block.payload;
blocks_rcv++;
if(blocks_rcv == one_block.total_blocks-1)
    done = TRUE; //macro
if(done){
    int i;
    for(i = 0; i < one_block.total_blocks; i++){
        printf("%s", server_data[i];
    }
} 
```

一切看起来都很好，但是无论出于什么疯狂的原因，当我在收到所有数据包之前打印 server_data 的内容时，我看到每个数据包的数据不同。之后我设置 done = TRUE 并进入那个 for 循环，数组中的每个点都包含相同的字符串值。

我不知道为什么会发生这种情况，我真的很想了解从帖子的开头到结尾，数组的内容如何变化，即使我通过循环的每次迭代来验证它们，该循环在一个数据包中读取时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T05:27:13.893

这条线是问题所在：

```
server_data[i] = ""; 
```

它用指向字符串文字的指针*覆盖分配的指针。*并且由于字符串文字不能被修改，如果你稍后复制到这个指针中，你会遇到*未定义的行为*。

如果要确保字符串为空，请使用`calloc`，将第一个字符设置为`'\0'`，或使用`strcpy`复制*新*字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T07:48:35.920

这里有几个问题：

1) 首先，server_data，如果它被声明为 char**，则可能会或可能不会立即为空，除非您这样声明。我不确定您是否将其初始化为 NULL。将其显式初始化为 NULL 是个好主意。

2）如果您打算让数组 server_data 的每个项目都保存一个 char* （换句话说，对字符串的引用），或者让数组本身成为一个字符串，我不确定发生了什么。one_block.payload 是一个字符串，还是一组指向字符串的指针？

我用一些测试值运行了你的代码，我个人没有遇到任何意外值的问题......我认为问题可能在于保存有效负载数据的结构的设置方式。你能告诉我们你的 one_block 结构吗？one_block.payload 是什么类型的变量/数组？

# matlab - 在 MATLAB 中获取向量的残差

> ID：14995178
> 
> 赞同：2
> 
> 时间：2013-02-21T05:25:36.493
> 
> 标签：matlab, formatting, regression, matlab-guide

任何人都知道如何将以下 matlab 代码创建的残差转换为向量`A`？

我试图通过`r`在命令提示符下键入来获取残差，但没有得到残差

谢谢。

代码：

```
clc;
clear;

a0 = 0.05; a1 = 0.1; b1 = 0.85;
nu = randn(2300,1);
epsi = zeros(2300,1);
h = zeros(2300,1);

for i=2: 2300 
    h(i) = a0 + a1 * epsi(i-1)^2 + b1 * h(i-1)  ; 
    epsi(i) = nu(i) * sqrt(h(i));

end

ytlast=epsi(2300);
htlast=h(2300);

yt1 = zeros(2300,1);

for i=1: 2300 
    yt1(i) = epsi(i)*epsi(i);
end

yt=yt1(1301:2300);

order = 15;
m = arx(yt1, order);

r = resid(iddata([yt1(1:order);yt1]), m);
r = r(order+1:end); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T06:13:05.510

先用`get`看看`r`有什么：

```
get(r)
ans = 
              Domain: 'Time'
                Name: ''
          OutputData: [2315x1 double]
                   y: 'Same as OutputData'
          OutputName: {'e@y1'}
          OutputUnit: {''}
           InputData: [2315x0 double]
                   u: 'Same as InputData'
           InputName: {0x1 cell}
           InputUnit: {0x1 cell}
              Period: [0x1 double]
         InterSample: {0x1 cell}
                  Ts: 1
              Tstart: []
    SamplingInstants: [2315x0 double]
            TimeUnit: 'seconds'
      ExperimentName: 'Exp1'
               Notes: {}
            UserData: [] 
```

然后，我假设您想查看：

```
r.OutputData 
```

获得你想要的向量...

# ruby-on-rails - Ruby on Rails：[BUG] 分割错误 ruby 1.8.7 (2011-06-30 patchlevel 352) [x86_64-linux]

> ID：14995179
> 
> 赞同：1
> 
> 时间：2013-02-21T05:25:41.487
> 
> 标签：ruby-on-rails, rails-activerecord

我在 Rails 外使用 Active Record。我创建了一个 rb 文件

```
/usr/share/puppet-dashboard/bin/process.rb 
```

进程代码.rb

```
#!/usr/bin/ruby

require 'rubygems'
gem 'mysql2'
gem 'activerecord'

require 'active_record'

ActiveRecord::Base.establish_connection(
  :adapter  => "mysql2",
  :host     => "localhost",
  :username => "root",
  :password => "root123",
  :database => "testproject_development"
) 
```

但是当我运行这个 rb 文件时，我得到以下错误：-

```
/usr/local/rvm/gems/ruby-1.9.3-p362@artwork_auto/gems/json-1.7.7/lib/json/ext/parser.so: 
[BUG] Segmentation fault ruby 1.8.7 (2011-06-30 patchlevel 352) [x86_64-linux] 
```

如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-23T16:16:10.140

从这里：[https ://www.ruby-forum.com/topic/4411143](https://www.ruby-forum.com/topic/4411143)

尝试更改您的 shebang 以防止您的版本混淆。

{{{

# !/usr/bin/env 红宝石

}}}

# objective-c - NSNumber 可以存储的最大值是多少？

> ID：14995180
> 
> 赞同：8
> 
> 时间：2013-02-21T05:25:48.200
> 
> 标签：objective-c, max, nsnumber, primitive

NSNumber 可以存储的最大值是多少？

```
// ok
    NSNumber *value = @(1 << 31); 

// gives compiler error, so max NSNumber is 32-bit uint?
    NSNumber *value = @(1 << 32); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T05:31:19.850

NSNumber 实际上是一个[类簇](http://developer.apple.com/library/ios/#documentation/general/conceptual/CocoaEncyclopedia/ClassClusters/ClassClusters.html)，这意味着当您创建一个实例时，您可能会获得各种具体子类中的任何一个，每个子类都能够存储不同类型的数字类型。可用的实际类型及其大小可能取决于机器。

查看[NSNumber 文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNumber_Class/Reference/Reference.html)向您展示了可以存储的不同类型的数字：两个最大的整数选项是[`+numberWithLongLong:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSNumber_Class/Reference/Reference.html#//apple_ref/occ/clm/NSNumber/numberWithLongLong%3a)(or `+numberWithUnsignedLongLong:`)，它存储一个`long long`，和[`+numberWithInteger:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSNumber_Class/Reference/Reference.html#//apple_ref/occ/clm/NSNumber/numberWithInteger%3a)(or `+numberWithUnsignedInteger:`)，它存储一个[NSInteger](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/NSInteger)。因此，最大 NSNumber 值受这些类型的限制。

基金会文件指出：

> 在构建 32 位应用程序时，NSInteger 是一个 32 位整数。64 位应用程序将 NSInteger 视为 64 位整数。

编译器很聪明，会创建一个与数字文字相同类型的 NSNumber。正如上面评论中提到的，`@(1ULL << 32)`如果您的机器具有`unsigned long long`超过 32 位的类型，则可以使用。

此外，NSNumber 与 CFNumber 是免费桥接的，这意味着您可以尝试像[`CFNumberGetByteSize()`](https://developer.apple.com/library/mac/documentation/CoreFOundation/Reference/CFNumberRef/Reference/reference.html#//apple_ref/c/func/CFNumberGetByteSize)自己一样的功能 - 并查看 CFNumber 文档的[Number Types](https://developer.apple.com/library/mac/documentation/CoreFOundation/Reference/CFNumberRef/Reference/reference.html#//apple_ref/doc/uid/20001209-CH2g-C007966)部分。您会看到这些与 NSNumber 选项基本相同。

此外，NSDecimalNumber 类（NSNumber 的子类）提供了[`+maximumDecimalNumber`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSDecimalNumber_Class/Reference/Reference.html#//apple_ref/occ/clm/NSDecimalNumber/maximumDecimalNumber)一种方法，您可以使用该方法来查找可以存储在 NSDecimalNumber 中的最大值。NSDecimalNumber 和浮点类型可能能够存储比整数类型更大的数字，但精度会降低。

# android - Android Openg GL ES 2 绘制大纹理缓慢

> ID：14995181
> 
> 赞同：8
> 
> 时间：2013-02-21T05:25:52.437
> 
> 标签：android, opengl-es, opengl-es-2.0, glsles

我对 OpenGL**很陌生。**

我正在尝试绘制带纹理的四边形（2 个三角形）。纹理大小为 900x900px。我对一个四边形没有任何问题，但是当我尝试绘制 5-10 个四边形时，我发现速度明显变慢。

也许我做错了什么......

代码：

```
public void onDrawFrame(GL10 gl) {
    GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT | GLES20.GL_DEPTH_BUFFER_BIT);
    ... matrix calculation ...
    GLES20.glUniformMatrix4fv(mMVPMatrixHandle, 1, false, mvpMatrix, 0);
    GLES20.glDrawArrays(GLES20.GL_TRIANGLE_STRIP, 0, 4);
} 
```

顶点着色器：

```
uniform mat4 uMVPMatrix;
attribute vec4 vPosition;
attribute vec2 a_TexCoordinate;
varying vec2 v_TexCoordinate;
void main() {
  gl_Position = uMVPMatrix*vPosition;
  v_TexCoordinate = a_TexCoordinate;
} 
```

片段着色器：

```
 precision mediump float;
    uniform sampler2D u_PreviewTexture;
    varying vec2 v_TexCoordinate;

    void main() {
      vec4 color = texture2D(u_PreviewTexture, v_TexCoordinate);
      gl_FragColor = color;
    } 
```

测试平台为 Galaxy S3。在分析器中，我看到大约 60 毫秒需要 eglSwapBuffers 调用。

如何快速绘制具有大纹理的四边形？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T14:21:45.253

这可能是由于纹理的大小以及您正在使用的设备的 OpenGL 驱动程序实现所致。

大多数现代 GPU 在 NPOT（没有二次幂）纹理方面做得非常好，但这会导致每次需要将纹理绘制到最接近的 2 次幂（在您的情况下为 1024X1024）时重新缩放纹理。

尝试使用以下两种解决方案：

1-将您的纹理转换为 1024x1024 并使用几何中的坐标仅绘制您需要的 (900x900)

2-尝试生成 mipmap，如果您有很多缩放，这在许多情况下都是性能救星。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T11:22:08.397

您的 S3 可能有大约 600M 纹素/秒的填充率（请参阅[GLBenchmark](http://www.glbenchmark.com/phonedetails.jsp?D=Samsung+GT-I9300+Galaxy+S+III&testgroup=lowlevel&benchmark=glpro25&var=avg)）。如果您正在渲染全屏四边形 - 十个双纹理四边形每帧提供 20M 纹素。假设 GLBenchmark 做到了它所说的（测量纹理吞吐量）20M 纹素是填充率的 1/30，硬件可以处理一帧的**最佳时间为 33 毫秒。**帧缓冲混合我敢肯定会积极竞争填充率 - 混合的 1000 万像素是相当多的，所以我猜瓶颈也可能在那里。

您可以尝试确定什么是慢速部分 - 将纹理尺寸减小到 512x512，看看它如何影响性能。减小渲染四边形的屏幕尺寸（相当大，与纹理一样 - 例如使其成为屏幕的一半/四分之一）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T23:50:35.190

根据我的经验，纹理性能问题通常源于 MIPMAP 过滤的设置方式。如果以下参数没有最佳设置（显示的最小设置），可能会损失很多性能：

`glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAX_ANISOTROPY_EXT, 1.0f);` `glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);` `glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);`

如果可能，请尝试禁用深度测试。@marekb 关于纹理压缩的建议也提供了很多性能优势。

# wpf - 元素 wpf 的初始大小

> ID：14995182
> 
> 赞同：2
> 
> 时间：2013-02-21T05:25:56.587
> 
> 标签：wpf

我有这个标记的窗口

```
<Window x:Class="TestCloseWindow.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow">

        <Button Command="ApplicationCommands.Close">Foo</Button>

</Window> 
```

我想按钮 MinWidth 和 MinHeight 100 和 MaxHeight 和 MinHeight 等于 500

就像大小窗口一样，所以我做了这个

```
<Window x:Class="TestCloseWindow.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" SizeToContent="WidthAndHeight" >

        <Button MaxHeight="500" MaxWidth="500" MinHeight="100" MinWidth="100" Command="ApplicationCommands.Close">Foo</Button>

</Window> 
```

我想设置按钮 200 x 200 的初始大小而不在窗口中写入宽度和高度

如果我在按钮中写 Width="200" Height="200"，则按钮变得不可调整大小。

如何设置控件的**初始**大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T08:02:28.063

我不确定您到底要完成什么，但看看这是否符合您的要求。我正在使用 ViewBox 在调整窗口大小时拉伸内容，并在窗口中设置约束。请注意，窗口大小不同于窗口客户区大小。

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow"  MaxHeight="500" MaxWidth="500" 
        MinWidth="100" MinHeight="100" 
        Width="200" Height="200">
    <Viewbox StretchDirection="Both" Stretch="Fill">
        <Button >Hello</Button>
    </Viewbox> 
```

# ios - 在 ios sdk 中向 UIButton 添加操作

> ID：14995193
> 
> 赞同：1
> 
> 时间：2013-02-21T05:26:41.940
> 
> 标签：ios, cocoa-touch

我正在尝试以编程方式将按钮添加到视图中，并且我正在使用以下代码：

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[button setTitle:@"Click Me" forState:UIControlStateNormal];
[button addTarget:self action:@selector(click:) forControlEvents:UIControlEventTouchDown];
[button setFrame:CGRectMake(50, 20, 80, 70)];
[self addButton:button]; 
```

根据我的说法，代码看起来正确，但我收到错误“未知操作单击”

addbutton 和 click 是同一个类的方法，我在构造函数中添加按钮

点击方法有什么问题？有没有语法错误！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T05:29:45.710

您的问题是您有一个名为的方法`click`，但您正在告诉您的按钮该方法已命名`click:`。注意区别（冒号）。

将 更改`@selector`为`@seletor(click)`使其与实际方法名称匹配。

另一种选择是保持`@selector`原样，但将您的`click`方法更新为`click:`：

```
- (void)click:(UIButton *)button {
    // button was tapped - do something
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T08:46:14.683

如何向按钮添加操作的示例....

```
UIButton *button = [UIButton buttonWithTypeRoundRect];  
[button addTarget:self action:@selector(myMethod) forControlEvents:UIControlEventTouchUpInside];  
button.frame = CGRectMake(10,10,100,50);
//Do some more Configuration of the button like title.. Look at UIButton Class Reference
[self.view addSubview:button]; 
```

有时您会在选择器中的方法名称后看到一个小冒号 (:)，类似于 @selector(myMethod:)
，这意味着该方法需要一些参数。冒号在方法名称中没有任何作用。如果您没有向函数发送任何参数，则不要在函数名称后加上冒号.....
在 addtarget 选项中，您可以看到 self 已指定，因为 self 包含 myMethod 函数。在这里，您应该指定包含您的方法的对象的引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T06:06:26.010

嗨，只需尝试一下，`-(void)click { // do what ever }`即只需删除 @selector(click:) 中的冒号，希望它会起作用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T05:30:21.177

改变

```
 - (void)click:(id)sender{ NSLog(@"Button Clicked"); } 
```

或改变动作点击：点击

```
[button addTarget:self action:@selector(click) forControlEvents:UIControlEventTouchUpInside]; 
```

# core-data - 核心数据：不保存

> ID：14995194
> 
> 赞同：0
> 
> 时间：2013-02-21T05:26:44.810
> 
> 标签：core-data, nsmanagedobjectcontext, save

我无法保存到一个变量letsMeet.startTimeLabel。在选择 NSLog 后立即显示正确的值，但是，在我保存到另一个变量 (letsMeet.endTimeLabel) 后，letsMeet.startTimeLabel 更改为 (NULL)。下面是代码：

```
- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex
{
letsMeet = (LetsMeet *) [NSEntityDescription insertNewObjectForEntityForName:@"LetsMeet" inManagedObjectContext:managedObjectContext];
switch (actionSheet.tag)
{
    case 1:
    {
        if (buttonIndex == 0)
        {
            UIDatePicker *startDatePicker = (UIDatePicker *)[actionSheet viewWithTag:kDatePickerTag1];

            NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
            [dateFormatter setDateFormat:@"dd"];
            NSDate *selectedDate = [startDatePicker date];

            NSDateFormatter *dayFormatter = [[NSDateFormatter alloc] init];
            [dayFormatter setDateFormat:@"EEEE"];
            NSDate *selectedDay= [startDatePicker date];

            NSDateFormatter *monthFormatter = [[NSDateFormatter alloc] init];
            [monthFormatter setDateFormat:@"MMMM"];
            NSDate *selectedMonth = [startDatePicker date];

            NSString *date = [[NSString alloc] initWithFormat:@"%@", [dateFormatter stringFromDate:selectedDate]];
            DateLabel.text = date;
            [letsMeet setDateLabel:date];

            NSString *month = [[NSString alloc] initWithFormat:@"%@", [dayFormatter stringFromDate:selectedMonth]];
            MonthLabel.text = month;
            [letsMeet setMonthLabel:month];

            NSString *day = [[NSString alloc] initWithFormat:@"%@", [monthFormatter stringFromDate:selectedDay]];
            DayLabel.text = day;
            [letsMeet setDateLabel:day];

            NSDateFormatter *timeFormatter = [[NSDateFormatter alloc] init];
            [timeFormatter setDateFormat: @"h:mm a"];
            NSDate *selectedStartTime = [startDatePicker date];

            NSString *startTime = [[NSString alloc] initWithFormat:@"%@", [timeFormatter stringFromDate:selectedStartTime]];
            StartTimeLabel.text = startTime;
            [letsMeet setStartTimeLabel:startTime];

            NSError *error = nil;
            if (![managedObjectContext save:&error]){

                NSLog(@"Error Saving");
            }
        }
        NSLog (@"This is the StartTime after selecting %@", letsMeet.startTimeLabel);
    }
    break;

    case 2:
    {
        if (buttonIndex == 0)
        {
            UIDatePicker *endTimePicker = (UIDatePicker *)[actionSheet viewWithTag:kDatePickerTag2];
            NSDateFormatter *endTimeFormatter = [[NSDateFormatter alloc] init];
            [endTimeFormatter setDateFormat: @"h:mm a"];
            NSDate *endSelectedTime = [endTimePicker date];
            NSString *endTime = [[NSString alloc] initWithFormat:@"%@", [endTimeFormatter stringFromDate:endSelectedTime]];
            EndTimeLabel.text = endTime;
            [letsMeet setEndTimeLabel:endTime];
            NSLog (@"This is the EndTime %@", letsMeet.endTimeLabel);
            NSLog (@"This is the StartTime after selecting BOTH %@", letsMeet.startTimeLabel);
        }
        else if (buttonIndex == 1)
        {
            EndTimeLabel.text = @"Whenever";
            [letsMeet setEndTimeLabel:EndTimeLabel.text];
        }
        NSError *error = nil;
        if (![managedObjectContext save:&error]) {
    }

}break;

    // Handle the error.
}

}

-(void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    UIViewController *destinationViewController = segue.destinationViewController;
    NSLog (@"Prepare For Segue StartTime %@", letsMeet.startTimeLabel);
    NSLog (@"Prepare For Segue EndTime%@", letsMeet.endTimeLabel);
} 
```

这是日志：

```
2013-02-20 21:38:24.253 AppointmentTime[3129:c07] This is the StartTime after selecting 9:30 AM
2013-02-20 21:38:32.325 AppointmentTime[3129:c07] This is the EndTime 12:15 PM
2013-02-20 21:38:32.325 AppointmentTime[3129:c07] This is the StartTime after Selecting BOTH (null)
2013-02-20 21:38:34.069 AppointmentTime[3129:c07] Prepare For Segue StartTime (null)
2013-02-20 21:38:34.069 AppointmentTime[3129:c07] Prepare For Segue EndTime12:15 PM 
```

问：为什么letsMeet.startTimeLabel第一次显示正确，选择EndTime后，它变为NULL。请注意，EndTime 一直显示正确的值，直到 prepareForSegue。诡异的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T05:53:38.657

根据您的日志和代码，您输入了两次 switch 块。这意味着您要输入该`actionSheet:clickedButtonAtIndex:`方法两次。所以每次输入方法

```
letsMeet = (LetsMeet *) [NSEntityDescription insertNewObjectForEntityForName:@"LetsMeet" inManagedObjectContext:managedObjectContext]; 
```

语句执行两次，依次创建两个对象。您可以通过从商店取货来查看这一点。

因此，您正在检查两个不同对象中的属性，因此`null`.

如果您只使用一个托管对象，您可以`nil`在执行之前添加对对象的检查`insertNewObjectForEntityForName:inManagedObjectContext:`。这将确保您使用的是相同的对象。
如果您同时使用多个对象，请使用对象 ID 或某个唯一键来识别您的对象并对其进行操作。

**编辑：**
您可以使用以下代码检查 nil：

```
if(letsMeet==Nil){
    letsMeet = (LetsMeet *) [NSEntityDescription insertNewObjectForEntityForName:@"LetsMeet" inManagedObjectContext:managedObjectContext];
} 
```

仅当您调用该`actionSheet:clickedButtonAtIndex:`方法的对象始终在内存中时，这才有效。但是由于您正在坚持，您可能希望从商店中获取对象，然后检查是否。的对象。

```
NSError *error;
NSFetchRequest *request = [[NSFetchRequest alloc] init];
[request setEntity:[NSEntityDescription entityForName:@"LetsMeet" inManagedObjectContext:managedObjectContext]];
NSArray *objectArray = [managedObjectContext executeFetchRequest:request error:&error]
if(objectArray.count==0){
    letsMeet = (LetsMeet *) [NSEntityDescription insertNewObjectForEntityForName:@"LetsMeet" inManagedObjectContext:managedObjectContext];
}else{
    letsMeet = (LetsMeet *)[objectArray objectAtIndex:0];
} 
```

**注意：**如果您只需要保留几个变量，那么 core-data 可能有点过头了。改用 NSUserDefaults 并保持简单。

# .net - 无法启动托管具有 NetNamedPipeBinding 绑定的 WCF 服务的 Windows 服务

> ID：14995197
> 
> 赞同：1
> 
> 时间：2013-02-21T05:27:04.163
> 
> 标签：.net, wcf, windows-services, netnamedpipebinding

我正在创建一个 Windows 服务，它应该使用**NetNamedPipeBinding**绑定来托管 WCF 服务。以下是代码：

```
protected override void OnStart(string[] args)
{
    var serviceType = typeof(IServeHi);

    var namedPipeBinding = new NetNamedPipeBinding();
    namedPipeBinding.Security.Mode = NetNamedPipeSecurityMode.None;
    var namedPipeEndpoint = "";

    var baseNamedPipeUri = new Uri("net.pipe://MyWorkstation:51301/"); // Line # 41

    host = new ServiceHost(typeof(ServeHi), baseNamedPipeUri);

    host.AddServiceEndpoint(serviceType, namedPipeBinding, namedPipeEndpoint);

    host.Description.Behaviors.Add(new ServiceMetadataBehavior { HttpGetEnabled = true});
    host.Open();
} 
```

`installutil.exe`能够成功安装它。但是，当我尝试启动该服务时，我收到一条消息***本地计算机上的 WindowsServiceHost1 已启动然后停止。如果某些服务没有被其他服务或程序使用，它们会自动停止***。

此外，Windows 日志显示为：

```
Service cannot be started. System.UriFormatException: Invalid URI: The hostname could not be parsed.
   at System.Uri.CreateThis(String uri, Boolean dontEscape, UriKind uriKind)
   at System.Uri..ctor(String uriString)
   at WindowsServiceHost1.WindowsServiceHost1.OnStart(String[] args) in C:\WindowsServiceHost1\Service1.cs:line 41
   at System.ServiceProcess.ServiceBase.ServiceQueuedMainCallback(Object state) 
```

我已经尝试过**WSHttpBinding**和**NetTcpBinding**并且它们工作正常。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T06:29:30.557

您需要从 net.pipe URI 中删除端口号。尝试将第 41 行更改为：

```
var baseNamedPipeUri = new Uri("net.pipe://MyWorkstation/"); 
```

或者如果您需要一个更具描述性的管道名称：

```
var baseNamedPipeUri = new Uri("net.pipe://MyWorkstation_51301/"); 
```

[这篇博客文章](http://bgottschall.wordpress.com/2010/10/20/system-uri-can-parse-namedpipe-net-pipe-urls/)对这个问题有一些有用的见解。

# r - 如何计算唯一玩家的数量（允许重复输入时）？

> ID：14995206
> 
> 赞同：3
> 
> 时间：2013-02-21T05:27:50.267
> 
> 标签：r

我试图在允许每个玩家重新进入游戏的实验中计算唯一玩家的数量。这是数据的样子

```
x <- read.table(header=T, text="group timepast Name NoOfUniquePlayer
1 0.02703 A 1
1 0.02827 B 2
1 0.02874 A 2
1 0.02875 A 2
1 0.02875 D 3
2 0.03255 M 1
2 0.03417 K 2
2 0.10029 T 3
2 0.10394 T 3
2 0.10605 K 3
2 0.16522 T 3
3 0.11938 E 1
3 0.12607 F 2
3 0.13858 E 2
3 0.16084 G 3
3 0.19830 G 3
3 0.24563 V 4") 
```

原始实验数据包含前3列，第一列是每个实验的组数（这里是3组），第二列是每个玩家加入实验的归一化时间（我已经将这一列从小到大排序） ，第三个是每个玩家的名字（每个玩家只加入一个单组）。

我要生成的是最后一列称为唯一玩家数，例如对于第 1 组，记录了 5 名玩家（ABAAD），但那里只有 3 名唯一玩家（ABD），玩家 A 开始游戏（第一行）并重新加入（第 3 行）玩家 B 玩完（第 2 行）后，玩家 A 再次加入游戏（由此记录第 4 行），最后玩家 D 进入并完成整个游戏。

谁能帮我弄清楚如何用 R 编程来解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T05:48:59.690

我认为这会给你你想要的（我认为你的第 2 组示例中有一个错误）

```
x$uniquenum <- unlist(
  tapply(
     x$Name,
     x$group,
     function(y) 
       cummax(as.numeric(factor(y,levels=y[!duplicated(y)])))
    )
)

   group timepast Name NoOfUniquePlayer uniquenum
1      1  0.02703    A                1         1
2      1  0.02827    B                2         2
3      1  0.02874    A                2         2
4      1  0.02875    A                2         2
5      1  0.02875    D                3         3
6      2  0.03255    M                1         1
7      2  0.03417    K                2         2
8      2  0.10029    T                3         3
9      2  0.10394    T                3         3
10     2  0.10605    K                4         3
11     2  0.16522    T                4         3
12     3  0.11938    E                1         1
13     3  0.12607    F                2         2
14     3  0.13858    E                2         2
15     3  0.16084    G                3         3
16     3  0.19830    G                3         3
17     3  0.24563    V                4         4 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T06:01:26.953

稍微更紧凑，使用 data.table

```
DT <- data.table(x)

DT[, uniqueNum := cummax(match(Name,unique(Name))), by = group] 
```

如果你想要唯一玩家的总数，那么

```
DT[, totalUnique := max(uniqueNum), by = group] 
```

# c# - 使用 Linq To SQL 选择具有最大聚合的记录

> ID：14995208
> 
> 赞同：1
> 
> 时间：2013-02-21T05:28:07.110
> 
> 标签：c#, .net, linq-to-sql, group-by, linqpad

我有以下两个表：

```
DocumentType
    Id INT,
    Name VARCHAR(100),
    Active BIT,
    CreatedBy INT

Document
    Id INT,
    DocumentTypeId INT,
    Version SMALLINT,
    Text NTEXT 
```

我想选择与最大值`DocumentType`相关的记录。我尝试了以下查询：`Document``Version`

```
from t in Documents 
join tt in DocumentTypes on  t.DocumentTypeId equals tt.Id 
where tt.CreatedBy == 10
group t by t.DocumentTypeId into g
//let v = new {Version = g.Max( t => t.Version), TypeId =g.Key}
select new 
       {
           Key = g.Key, 
           Version = g.Max(t=>t.Version), 
           Text = t.Text //ERROR AT t.Text
       }; 
```

但它在以下行给了我一个错误：

```
Text = t.Text

The name 't' does not exist in the current context 
```

我也尝试过`g.Text`，但没有帮助。请帮我解决这个查询。我正在 LinqPad 中尝试这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T11:20:19.833

似乎您需要检索具有相同属性的最大值的`Document`实体。无需按列分组。`DocumentType``Version``ntext`

分组后，您将拥有多组文档。剩下的唯一事情就是`Version`为每个组获得一个最大值。我将按此属性按降序对组进行排序，并获得第一个值：

```
from t in Documents
join tt in DocumentTypes on t.DocumentTypeId equals tt.Id
where tt.CreatedBy == 10
group t by t.DocumentTypeId into g
select g.OrderByDescending(t => t.Version).FirstOrDefault(); 
```

如果需要，您可以将结果`Document`实体投影为匿名类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T19:19:15.750

尝试

```
from t in Documents 
join tt in DocumentTypes on  t.DocumentTypeId equals tt.Id 
where tt.CreatedBy == 10
orderby t.Version descending
group t by t.DocumentTypeId into g

select new 
    {
        Key      = g.Key, 
        Version  =  g.First().Version, 
        Text     =  g.First().Text 
    }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T05:30:09.803

`t`已经代表别的东西了。
试试这个方法

```
Version = g.Max(x=>t.Version), 
```

# .net - 转储引用的程序集

> ID：14995212
> 
> 赞同：1
> 
> 时间：2013-02-21T05:28:21.950
> 
> 标签：.net, ildasm

ILDASM 的哪个命令行选项仅转储引用的程序集？如果不可能，是否有替代工具/方法将引用程序集转储到 .NET DLL 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T05:35:21.303

[Mono.Cecil](http://www.mono-project.com/Cecil)可以做到这一点：

```
string assemblyPath = "...";
ModuleDefinition module = ModuleDefinition.ReadModule(assemblyPath);
foreach (AssemblyNameReference reference in module.AssemblyReferences)
    Console.WriteLine(reference.Name); 
```

# c++ - 如何从getter函数中的类返回结构数组

> ID：14995216
> 
> 赞同：1
> 
> 时间：2013-02-21T05:28:35.097
> 
> 标签：c++, arrays, struct, allegro

我有一个相对简单的问题，但我似乎无法找到适合我的案例的答案，而且我可能没有以正确的方式解决这个问题。我有一个看起来像这样的类：

```
struct tileProperties
{
    int x;
    int y;
};

class LoadMap
{      
  private:        
    ALLEGRO_BITMAP *mapToLoad[10][10];   
    tileProperties *individualMapTile[100]; 

  public: 
    //Get the struct of tile properties
    tileProperties *getMapTiles();
}; 
```

对于 getter 函数，我有一个看起来像这样的实现：

```
tileProperties *LoadMap::getMapTiles()
{
    return individualMapTile[0];
} 
```

我在 LoadMap 类中有代码，它将为数组中的每个结构分配 100 个平铺属性。我希望能够在我的 main.cpp 文件中访问这个结构数组，但我似乎无法找到正确的语法或方法。我的 main.cpp 看起来像这样。

```
 struct TestStruct
{
    int x;
    int y;
};

int main()
{
   LoadMap  _loadMap;
   TestStruct *_testStruct[100];
    //This assignment will not work, is there
    //a better way?
   _testStruct = _loadMap.getMapTiles();

   return 0;
} 
```

我意识到有很多方法可以解决这个问题，但我试图让这个实现尽可能私密。如果有人能指出我正确的方向，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T05:33:47.090

```
TestStruct *_testStruct;
_testStruct = _loadMap.getMapTiles(); 
```

这将为您提供指向返回数组中*第一个元素*的指针。然后，您可以遍历其他 99 个。

我强烈建议使用向量或其他容器，并编写不返回指向此类裸数组的指针的 getter。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:35:13.430

首先，在这里，我们为什么需要TestStruct，可以使用“tileProperties”结构本身...

还有小鬼，tileProperties *individualMapTile[100]; 是指向结构的指针数组。

因此，individualMapTile 中会有指针。您已返回第一个指针，因此您只能访问第一个结构。其他人呢？？？？

```
tileProperties** LoadMap::getMapTiles()
{
  return individualMapTile;
}

int main()
{
   LoadMap _loadMap;
   tileProperties **_tileProperties;
  _tileProperties = _loadMap.getMapTiles();

    for (int i=0; i<100;i++)
{
    printf("\n%d", (**_tileProperties).x);
    _tileProperties;
}
   return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T12:02:16.793

尽可能使用向量而不是数组。还可以直接考虑 TestStruct 的数组/向量，而不是指向它们的指针。我无法从您的代码示例中判断这是否适合您。

```
class LoadMap
{      
public:
    typedef vector<tileProperties *> MapTileContainer;

    LoadMap()
        : individualMapTile(100) // size 100
    {
        // populate vector..
    }

    //Get the struct of tile properties
    const MapTileContainer& getMapTiles() const
    {
        return individualMapTile;
    }

    MapTileContainer& getMapTiles()
    {
        return individualMapTile;
    }

private:         
    MapTileContainer individualMapTile; 
};

int main()
{
    LoadMap _loadMap;
    LoadMap::MapTileContainer& _testStruct = _loadMap.getMapTiles();
} 
```

# javascript - css/js 摆动（旋转）图像 VS Photoshop 动画

> ID：14995218
> 
> 赞同：-1
> 
> 时间：2013-02-21T05:28:41.220
> 
> 标签：javascript, css, animation, rotation, photoshop

我打算使用 Photoshop 制作动画图像 - 一个像陀螺一样旋转的 3D 对象。

我正在制作的网页将显示几个完全相同的图像，它们以完全相同的方式旋转。

此外，它们都需要来回“摆动”（顺时针/逆时针旋转几度），但每个都以不同的速度......

我的问题是，我是否应该制作 1 个陀螺图像，然后使用 css/js 来处理摆动，使用相同的文件作为图像源？或者我应该在 Photoshop 中制作几张图像，每张图像都在动画中内置了它们独特的摆动？

无论哪种方式，我都应该考虑哪些优点/缺点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T06:36:32.763

您的网站将服务于哪些受众？如果它是大型站点，您应该根据哪个选项使用最少的带宽来做出决定。

如果您要迎合一小部分观众，我会使用看起来最好的任何效果。

至于动画，我会使用 javascript 来控制摆动。这更好，因为您将拥有稍后可以修改的内容，而不是您可能需要重新制作的静态动画。

# cherrypy - 如何在cherrypy中返回jsonp？

> ID：14995219
> 
> 赞同：0
> 
> 时间：2013-02-21T05:28:44.703
> 
> 标签：cherrypy

如何用cherrypy返回jsonp？我目前正在使用以下内容返回 json：

```
class Root(object):
   @cherrypy.expose
   @tools.json_out
   def index(self):
      return {'key':'value'} 
```

jsonp有一些注释吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:36:09.407

看看这个实现......

[jsonp](http://snipplr.com/view/15486/)

希望这可以帮助，

安德鲁

# android - 由 ClassNotFoundException 引起的 XML 文件中的 InflateException

> ID：14995221
> 
> 赞同：0
> 
> 时间：2013-02-21T05:28:53.443
> 
> 标签：android, android-fragments, classnotfoundexception, radio-group, inflate-exception

```
android.view.InflateException: Binary XML file line #254: Error inflating class com.****.***.SegmentedRadioGroup
Caused by: java.lang.ClassNotFoundException: com.***.***.SegmentedRadioGroup 
```

这是我的`detail.xml`文件：

```
<com.***.***.SegmentedRadioGroup
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_margin="5dip"
    android:orientation="horizontal"
    android:id="@+id/segment_text"
    android:checkedButton="@+id/button_one">

    <RadioButton android:id="@id/button_one"
        android:minWidth="150dip"
        android:minHeight="40dip"
        android:text="One"
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:button="@null"
        android:gravity="center"
        android:textColor="@color/radio_colors" />

</com.***.***.SegmentedRadioGroup> 
```

在`detailfragment.java`：

```
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    final Database db=new Database(getActivity().getApplicationContext());
    View view = inflater.inflate(R.layout.detail, container, false);
    // ...
} 
```

我在以下位置出现错误：

```
View view = inflater.inflate(R.layout.detail, container, false); 
```

# ios - 需要澄清 Cocoa 错误代码 1570

> ID：14995223
> 
> 赞同：4
> 
> 时间：2013-02-21T05:29:15.123
> 
> 标签：ios, cocoa, core-data

在这里的好帖子的帮助下，我理解了这个错误。但我需要一些澄清。

假设我的托管对象上下文（模式）有 3 个表（实体），并说每个实体有 3 个属性，其中每个条目的一个属性不是可选的。

所以现在我的应用程序第一次为第一个实体创建了一个托管对象，填充了它的强制属性；应用程序尚未为第二个和第三个实体创建托管对象 - 还没有。当我此时尝试保存上下文时，我收到错误代码 1570。是因为我没有填写第二个和第三个实体的值吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-21T05:37:29.260

我不确定这是否对您有帮助。

但是 cocoa 错误 1570 表示未填写必填字段。所以请确保您的必填字段不为零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T02:15:15.533

[iphone核心数据保存时出现未解决的错误](https://stackoverflow.com/questions/1283960/iphone-core-data-unresolved-error-while-saving)

是的，这是一个未填写的必填字段。上面的帖子向我展示了哪个字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-25T10:59:47.847

如果您之前在您的设备（或模拟器）上运行它并将属性设置为强制，然后将其更改为可选，请在再次运行之前从设备中删除该应用程序。这就是我的应用程序的问题。

希望对某人有所帮助！:-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-10T20:07:38.287

就我而言，我直接将强制`BOOL`属性设置为`YES`or `NO`，但您应该使用

> NSNumber numberWithBOOL

为了使它工作。

# php - iphone发布请求标头

> ID：14995224
> 
> 赞同：1
> 
> 时间：2013-02-21T05:29:18.087
> 
> 标签：php, iphone, json, zend-framework

我将开发基于 REST API 的 Web 服务。这是我的第一个 Web 服务项目。

我有一个关于网络服务-iPhone 应用程序的问题。

假设当用户使用 iPhone 应用程序登录时，他将获得身份验证令牌。

使用此令牌，他/她将被授权使用 app 的进一步操作。我正在计划 iPhone 应用程序需要发送听众以及带有身份验证密钥的 post/get 请求方法。

请求看起来像：www.mydomaoin.com

但是要在服务器上授权，我需要将特殊参数传递给请求的标头：

```
Headers: X-Testing-Auth-Secret: kI7wGju76kjhJHGklk76
Headers: Content-Type : application/json 
```

将在控制器中使用（zend 框架）

```
public function preDispatch()  
{
    $request = new Zend_Controller_Request_Http();
    $key = $request->getHeader('X-Testing-Auth-Secret');
    $type = $request->getHeader('Content-Type');
} 
```

我不知道 iPhone 是否能够发送标头。就像安卓的情况一样。

我是一个php开发者

请帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T09:46:35.197

是的，您可以从 iPhone 和 Android 手机发送标头

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T07:04:37.643

您可以使用一些委托方法。

```
-(void) parser:(NSXMLParser *) parser
didStartElement:(NSString *) elementName``
  namespaceURI:(NSString *) namespaceURI
 qualifiedName:(NSString *) qName
   attributes:(NSDictionary *) attributeDict {

    if( [elementName isEqualToString:@"AddGeneralInformationResult"])
   {
    if (!soapResults)
    {
        soapResults = [[NSMutableString alloc] init];
    }
    elementFound = YES;
   }

    }

  -(void)parser:(NSXMLParser *) parser foundCharacters:(NSString *)string
   {
if (elementFound)
{
    [soapResults appendString: string];
}
}

-(void)parser:(NSXMLParser *)parser
 didEndElement:(NSString *)elementName
  namespaceURI:(NSString *)namespaceURI
  qualifiedName:(NSString *)qName
 {

 if ([elementName isEqualToString:@"AddGeneralInformationResult"])
 {
    elementFound = NO;
    //NSLog(@"AddGeneralInformationResult %@",soapResults);
    if([soapResults isEqualToString:@"true"])
    {

  [objDB updateDatabaseTable:@"GeneralInformation":@"Yes":
    [[arrGenralInfo          objectAtIndex:0] intValue]];
    }
    [soapResults setString:@""];
    elementFound = FALSE;
   }

  }
 -(void) connection:(NSURLConnection *) connection
 didReceiveResponse:(NSURLResponse *) response {
 [webData setLength: 0];

//NSLog(@"receive response");
  }  

 -(void) connection:(NSURLConnection *) connection
 didReceiveData:(NSData *) data {
  [webData appendData:data];
  }

    -(void) connection:(NSURLConnection *) connection
       didFailWithError:(NSError *) error {

    //NSLog(@"Server error");

    }

  -(void) connectionDidFinishLoading:(NSURLConnection *) connection {
     //NSLog(@"DONE. Received Bytes: %d", [webData length]);
      NSString *theXML = [[NSString alloc]
                    initWithBytes: [webData mutableBytes]
                    length:[webData length]
                    encoding:NSUTF8StringEncoding];
//---shows the XML---
//NSLog(@"%@",theXML);

// [activityIndicator stopAnimating];
if (xmlParser)
{

}
xmlParser = [[NSXMLParser alloc] initWithData: webData];
[xmlParser setDelegate: self];
[xmlParser setShouldResolveExternalEntities:YES];
[xmlParser parse]; 
```

}

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T05:36:05.037

您可以使用以下代码

```
NSMutableURLRequest *req = [[NSMutableURLRequest alloc]initWithURL:[NSURL URLWithString:url]];
    NSString *post = @"your json";
    //NSLog(@"%@",post);
    NSData *postdata = [NSData dataWithBytes:[post UTF8String] length:[post length] ];
    [req setHTTPMethod:@"POST"];
    [req setValue:@"application/json" forHTTPHeaderField:@"content-type"];
    [req setValue:@"kI7wGju76kjhJHGklk76" forHTTPHeaderField:@"Content-Length"];
    [req setValue:[NSString stringWithFormat:@"%d",[postdata length]] forHTTPHeaderField:@"X-Testing-Auth-Secret"];
    [req setHTTPBody:postdata];

    (void)[NSURLConnection connectionWithRequest:req delegate:self]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T06:57:24.857

请求解析 xml 数据。

假设这是请求的方法-

-（无效）PostPipeSeaAam异常{

```
NSString *soapMsg =
[NSString stringWithFormat:
 @"<?xml version=\"1.0\" encoding=\"utf-8\"?>"
 "<soap:Envelope xmlns:xsi="
 "\"http://www.w3.org/2001/XMLSchema-instance\" "
 "xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" "
 "xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">"
 "<soap:Body>"
 "<PostPipeSeAamAnomaly xmlns=\"http://tempuri.org/\">"
 "<PDAIRID>%d</PDAIRID>n"
 "<AssociatedItemIDILI>%@</AssociatedItemIDILI>n"
 "<AssociatedItemIDOther>%@</AssociatedItemIDOther>n"
 "<RGW>%@</RGW>n"
 "<StartDistance>%@</StartDistance>n"
 "<Length>%@</Length>n"
 "<Width>%@</Width>n"
 "<Orientation1>%@</Orientation1>n"
 "<Orientation2>%@</Orientation2>n"
 "<AnomalyType>%@</AnomalyType>n"
 "<OrientationToWeld>%@</OrientationToWeld>n"
 "<LongestLinearIndication>%@</LongestLinearIndication>n"
 "<LocalWallThickness>%@</LocalWallThickness>n"
 "<AnomalyDepthMinimum>%@</AnomalyDepthMinimum>n"
 "<AnomalyDepthAverage>%@</AnomalyDepthAverage>n"
 "<AnomalyDepthMaximum>%@</AnomalyDepthMaximum>n"
 "<AnomalyDepthSurface>%@</AnomalyDepthSurface>n"
 "<AnomalyDepthMaximumPercentage>AA</AnomalyDepthMaximumPercentage>n"
 "<AnomalyDepthMinimumPercentage>AA</AnomalyDepthMinimumPercentage>n"
 "<SizingMethod>%@</SizingMethod>n"
 "<AnomalyRemoved>%@</AnomalyRemoved>n"
 "<RemedialActionRequired>%@</RemedialActionRequired>n"
 "<RemedialActionIncidental>%@</RemedialActionIncidental>n"
 "<Comment>%@</Comment>n"
 "</PostPipeSeAamAnomaly>n"
 "</soap:Body>"
 "</soap:Envelope>",PDAirID ,[arrPipeSeamAnomaly objectAtIndex:2] ,[arrPipeSeamAnomaly objectAtIndex:3],[arrPipeSeamAnomaly objectAtIndex:4] ,[arrPipeSeamAnomaly objectAtIndex:5] ,[arrPipeSeamAnomaly objectAtIndex:6],[arrPipeSeamAnomaly objectAtIndex:7] ,[arrPipeSeamAnomaly objectAtIndex:8] ,[arrPipeSeamAnomaly objectAtIndex:9],[arrPipeSeamAnomaly objectAtIndex:10],[arrPipeSeamAnomaly objectAtIndex:11] ,[arrPipeSeamAnomaly objectAtIndex:12] ,[arrPipeSeamAnomaly objectAtIndex:13],[arrPipeSeamAnomaly objectAtIndex:2] ,[arrPipeSeamAnomaly objectAtIndex:2],[arrPipeSeamAnomaly objectAtIndex:14] ,[arrPipeSeamAnomaly objectAtIndex:15],[arrPipeSeamAnomaly objectAtIndex:16] ,[arrPipeSeamAnomaly objectAtIndex:17],[arrPipeSeamAnomaly objectAtIndex:18],[arrPipeSeamAnomaly objectAtIndex:19] ,[arrPipeSeamAnomaly objectAtIndex:20]];

//NSLog(@"%@",soapMsg);
NSURL *url = [NSURL URLWithString:
              WEBSERVICEURL];
NSMutableURLRequest *req = [NSMutableURLRequest requestWithURL:url];

//---set the various headers---
NSString *msgLength = [NSString stringWithFormat:@"%d", [soapMsg length]];
[req addValue:@"text/xml; charset=utf-8" forHTTPHeaderField:@"Content-Type"];
[req addValue:@"http://tempuri.org/PostPipeSeAamAnomaly" forHTTPHeaderField:@"SOAPAction"];
[req addValue:msgLength forHTTPHeaderField:@"Content-Length"];

//---set the HTTP method and body---
[req setHTTPMethod:@"POST"];
[req setHTTPBody:[soapMsg dataUsingEncoding:NSUTF8StringEncoding]];

//[activityIndicator startAnimating];

conn = [[NSURLConnection alloc] initWithRequest:req delegate:self];
if (conn) {
    webData = [NSMutableData data];

    //NSLog(@"go to delegateMethods");
} 
```

}

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-21T05:35:31.487

这就是您可以在“发布”请求中附加令牌的方式。示例代码：

```
NSURL *url = [NSURL URLWithString:@"http://www.deveinvoice.sirus/process/user.asmx"];
req = [NSMutableURLRequest requestWithURL:url];

//---set the headers---

NSString *msgLength = [NSString stringWithFormat:@"%d",[strSoapMsg length]];
[req addValue:@"application/soap+xml; charset=utf-8" forHTTPHeaderField:@"Content-Type"];
[req addValue:@"http://tempuri.org/CheckTransactionIDExist" forHTTPHeaderField:@"SOAPAction"];
[req addValue:msgLength forHTTPHeaderField:@"Content-Length"];

//---set the HTTP method and body---

[req setHTTPMethod:@"POST"];
[req setHTTPBody: [strSoapMsg dataUsingEncoding:NSUTF8StringEncoding]]; 
```

# iphone - 如何获取保存在文档目录中的 CSV 文件的列名？

> ID：14995228
> 
> 赞同：0
> 
> 时间：2013-02-21T05:29:37.663
> 
> 标签：iphone, ios, objective-c, xcode, import

我正在导入保存在文档目录中的 CSV 文件。文档目录中存储了多个 CSV 文件。

我正在获取所有 CSV 文件的列表。我想要导入选定的 CSV 文件。

当我选择任何 CSV 文件时，我想获取该 CSV 文件的列名。

如何仅获取该 CSV 文件的 cloumn 名称？

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T05:47:36.420

看看这个[http://www.cocoawithlove.com/2009/11/writing-parser-using-nsscanner-csv.html](http://www.cocoawithlove.com/2009/11/writing-parser-using-nsscanner-csv.html)

最后还有一个示例程序。它的工作量很大，但它会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T06:01:34.377

解析 CSV 文件将需要您的努力。

虽然希望这个链接可以帮助你。

1.  [链接 1](https://stackoverflow.com/questions/12589545/how-to-read-seperate-fields-in-a-csv-file-and-compare-with-user-input)
2.  [链接 2](https://stackoverflow.com/questions/3344628/where-can-i-find-a-csv-to-nsarray-parser-for-objective-c/3380724#3380724)
3.  [链接 3](https://stackoverflow.com/questions/4936281/iphone-app-that-reads-csv-file)

# wordpress - 如何在横幅上添加超链接返回主页

> ID：14995231
> 
> 赞同：1
> 
> 时间：2013-02-21T05:29:52.307
> 
> 标签：wordpress, hyperlink, banner

我有一个 wordpress 博客，我想在我的横幅上添加一个链接，当点击它时，它会将你带回主页。我知道 wordpress 在“标题”设置中具有此功能，但我必须删除该字段才能让我的横幅单独出现。

有关如何超链接横幅的任何帮助？谢谢！链接到我的[博客](http://tradingliberation.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T01:33:39.650

对不起，我不太明白你们的意思（我在不到 2 个月前创建这个博客时才开始使用编码）。

将高度添加到#header .sitename 究竟如何使横幅成为主页的超链接？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T05:53:33.583

我会在 style.css 中删除全局导航（第 190 行）上的 margin-top。然后添加高度：118px；到第 167 行的#header .siteName a。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T05:42:39.107

为您的 siteName 上的锚文本添加高度

```
#header .siteName a {
  margin-top: 25px;
  display: block;
  height: 118px;
} 
```

[这是您的http://tradingliberation.com/wp-content/themes/mxs2/style.css](http://tradingliberation.com/wp-content/themes/mxs2/style.css)文件的第 166 行。

# sockets - 如何使用 udp 套接字手动发送音频数据

> ID：14995232
> 
> 赞同：1
> 
> 时间：2013-02-21T05:29:57.357
> 
> 标签：sockets, audio, networking, udp, voice

我正在使用 udp 套接字开发视频聊天应用程序，我能够捕获巨大的原始音频数据。因为它是聊天应用程序，所以我应该能够连续传输此音频数据。

问题是这个音频数据很大，所以套接字 mtu 不允许我传输这些数据。

我正在寻找可以拆分这些数据并通过套接字发送并在另一端捕获它们并将它们组合以产生语音数据的方法。请指导我如何使用 udp 套接字

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T08:35:26.070

`UDP`您必须自己处理传输顺序（`UDP datagram` *数字 1*可能会收到数字*2*）和丢失的数据包（`AFTER`不授予数据报的传递）`UDP datagram` *`UDP`*

 *您应该使用`TCP`数据包顺序很重要的大尺寸传输。

关于`MTU`，您不必关心它是否小于您要发送的数据的大小。操作系统将为您进行碎片整理。

只需将数据分成`64k`块（单个`send()`调用允许的最大大小）并循环直到您的数据完全传输。*

# sql-server-2008 - SQL Server 2008 表中每行的计数

> ID：14995233
> 
> 赞同：-1
> 
> 时间：2013-02-21T05:29:58.303
> 
> 标签：sql-server-2008

我在 SQL Server 2008 中有一个表，其中有一列`product`s：示例行将是

```
product1
product1
product1
product2
product2
product3 
```

我想从表中获取每个不同的`product`: ( `product1=3,product2=2,product3=1`) 的计数。我该如何查询这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T05:35:12.200

```
select [column name],count(*) from [table name] group by [column name] 
```

# c# - 负载平衡上的 wcf 服务

> ID：14995237
> 
> 赞同：0
> 
> 时间：2013-02-21T05:30:17.253
> 
> 标签：c#, wcf, load-balancing

我们有一个 Windows 应用程序，它消耗 WCF 服务，我们使用网络负载平衡。有时客户端无法连接到 wcf 服务（服务器）。我们使用`NetTcpBinding`绑定。谁能给我一个解决这个问题的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T00:56:38.767

你能在这里张贴你的绑定吗？

我会在您的 Web 服务配置中打开跟踪，以检查流量是否确实到达了所有预期的端点。默认情况下，NetTcpBinding 池化 TCP 连接，因此可能是客户端连接已将自身关联到现在不可用的特定服务器。这意味着连接将开始失败。建议您在负载均衡场景中调整 NetTcpBinding 的默认绑定设置，以减少租用超时，从而更好地对请求进行负载均衡。[http://msdn.microsoft.com/en-us/library/ms730128.aspx](http://msdn.microsoft.com/en-us/library/ms730128.aspx)

# c++ - QProcess：进程仍在运行时被销毁

> ID：14995241
> 
> 赞同：1
> 
> 时间：2013-02-21T05:30:46.873
> 
> 标签：c++, c, multithreading, qt4, multiprocess

我正在使用 Qt 为 2D 绘图库 xmgrace 开发自定义控制界面。我的项目中有 3 个组件：

1.  用 Qt 制作的 GUI
2.  一个 QThread，它在后台线程中从 C 运行一些共享对象代码。
3.  使用管道连接到上述两者的 xmgrace 窗口。（使用 Grace_np 库）

`(1) --> (2)`通过更改共享对象代码中声明的一些全局变量的状态来完成通信。

来自`(1) --> (3)`&`(2) --> (3)`的通信使用由 grace_np 库提供的内置函数。

现在，来自的通信`(2) --> (1)`是导致问题的原因。我尝试了两种我能想到的方法：a）在 Qt 代码中声明一个共享对象，它发出一个 Qt 信号并在 C 代码中调用。b) 从线程返回并使用返回值执行一些操作，然后重新启动线程。

这两种方法都给出了不可靠的结果。我的 GUI 卡住/导致分段错误，我收到以下消息：

`QProcess: Destroyed while process is still running`

我没有在我的代码中的任何地方使用 QProcess 类。所以这成了一个谜。请提供一些信息，说明这可能是什么原因。

PS：管道`(3)`是一种方式，仅需要这种方式。

**编辑1：**

仅供参考，我使用的是 Qt 4.2，所以我不能使用 QObject 方法，然后使用 movetothread() 我很抱歉没有放代码，因为我不能因为公司政策，也因为我没有知道该放什么（它太大了）。共享的 c 代码是 400k+ 行

我相信我找到了问题的罪魁祸首。似乎使用类 QMessageBox 导致了这个问题。我最初使用的是 QMessageBox 的静态函数。现在我尝试在堆栈和堆上声明它，但问题仍然存在。但是我发现从我的代码中删除对 QMessageBox 的所有调用可以解决问题。但是现在的问题是，我如何显示消息？我只是在这里推测，但是 QMessageBox 的模式性质是否可能阻塞了我的程序和 xmgrace 之间存在的管道并随后导致它退出？然后创建一个自定义 QMessageBox（非模态）可能会解决这个问题。

**编辑2：**

我没有从工作线程调用 QMessageBox 。加上我使用工作线程的方式，除非我关闭程序，否则它永远不会返回。给出一个想法，我的 QThread::run 函数的形式是：

```
QThread_Object::run()
{
  c_init();
  c_main();
} 
```

其中 c_init 和 c_run 是从共享 c 代码链接的函数。所以不可能直接从这些内部调用 QMessageBox 。现在我打算取消 QMessageBox 并改用 QMainWindow 状态栏。但是它并没有提供全部功能。我想这可能是 Qt 4.2 中的一个错误

**编辑3：**

我之前提到过，沟通`(2) --> (1)`是导致问题的原因。现在我已经完全取消了这种通信，并且更准确地发现问题是由启动工作线程后随时调用 QMessageBox 引起的。前面提到的通信导致 Qt 间接发出信号并调用 QMessageBox，我认为这是罪魁祸首。

**编辑4：**

好吧，我忘了提到从一开始就围绕这个问题的最大谜团。我基本上通过 ssh 在工作站（位置 B）上工作（位置 A），我在该工作站上编写代码并运行该程序。B 连接在 2 个物理网络上。A 通过网络 1 连接到 B。现在，从我在 A 的终端（即通过网络 1 在 ssh 上）工作时，这个问题**从未发生过。**但是当我直接访问 B 或通过网络 2 通过 ssh 访问 B 时，它始终会发生。请注意，每次代码仅在 B 上执行。这两个网络都被数百人使用。

**编辑 5**

最后，我通过子类化 QDialog 并制作自定义 MessageBox 解决了我的问题，因为我真的不需要 QMessageBox 的扩展功能。我仍然不知道 QMessageBox 中究竟是什么导致了这个问题。我想 Qt 中的一些错误将永远是一个谜。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:32:38.403

由于没有代码我在这里有点暗中拍摄，但听起来你的 QProcess 是有意或无意地在堆栈上创建的，或者你的 QThread 过早地被破坏了。我会把钱花在你的 QThread 对象被错误地启动上。很难怪你，因为文档是（或直到最近）搞砸了。考虑阅读[这个线程](http://blog.qt.digia.com/blog/2010/06/17/youre-doing-it-wrong/)和[这个线程](http://blog.qt.digia.com/blog/2006/12/04/threading-without-the-headache/)，并且根本不要子类 QThread。

**编辑：** 如果 QMessageBox 是你的罪魁祸首，那么我猜你是从子线程中显示它的。从[文档](http://qt-project.org/doc/qt-4.8/threads-starting.html)中：

> 在 GUI 应用程序中，主线程也称为 GUI 线程，因为它是唯一允许执行 GUI 相关操作的线程。

有几种方法可以显示来自子线程的消息。就个人而言，我使用 qt 的错误报告方案并将 qCritical、qDebug 等重定向到`stderr`. 另一种更简单的方法是让您`emit`从工作线程中获取一个 QString 信号，该信号被您的 GUI 线程捕获，然后显示/收集错误。我喜欢让我的 MainWindow 收集错误，然后在工作线程完成时一次显示它们。

**编辑 2：** 由于问题似乎是[QMessageBox](http://doc.qt.digia.com/4.2/qmessagebox.html#details)是模态的（即，在工作线程向前移动时阻塞主线程），您可以通过在其非模态模式下使用 QMessageBox 轻松解决此问题。只需`0`在 QMessageBox 构造函数/静态函数中作为父小部件传递。处理将继续，无需等待用户退出窗口——这也可能导致同时打开多个消息框。如果这可以帮助您避免错误，请仔细检查您的代码，以确保窗口在关闭后被正确销毁。

# r - 查找不规则数据的大型数据集的每日百分位数

> ID：14995248
> 
> 赞同：0
> 
> 时间：2013-02-21T05:31:18.393
> 
> 标签：r, percentile

我有一个非常大的数据集（> 100 万行），其中需要计算同一天的所有百分位数（例如，所有 1 月 1 日，所有 1 月 2 日，...，所有 12 月 31 日）。有很多行相同的年月日的数据不同。以下是数据示例：

```
 Year  Month  Day  A  B  C  D
    2007  Jan    1    1  2  3  4
    2007  Jan    1    5  6  7  8
    2007  Feb    1    1  2  3  4
    2007  Feb    1    5  6  7  8
    .
    .
    2010  Dec    30   1  2  3  4
    2010  Dec    30   5  6  7  8
    2010  Dec    31   1  2  3  4
    2010  Dec    31   5  6  7  8 
```

因此，要计算 1 月 1 日的第 95 个百分位数，需要包括所有年份（例如 2007-2010）和所有列（A、B、C 和 D）的所有 1 月 1 日。然后对所有 1 月 2 日、1 月 3 日、...、12 月 30 日和 12 月 31 日执行此操作。这可以通过使用嵌套 if 语句在 Excel 中的小型数据集轻松完成；例如，={PERCENTILE(IF(月($B$2:$B$1000000)="Jan",IF(日($C$2:$C$1000000)="1",$D$2:$G$1000000)), 95%)}

然后可以将百分位数添加到仅包含月份和日期的新数据表中：

```
 Month  Day  P95  P05
    Jan    1
    Jan    2
    Jan    3
    .
    .
    Dec    30
    Dec    31 
```

然后使用百分位数，我需要评估列名 A、B、C 和 D 中各自日期（例如，1 月 1 日）的每个数据值是否大于 P95 或小于 P05。然后可以将新列添加到包含 1 或 0 的第一个数据表（如果大于或小于百分位数，则为 1，如果不大于或小于百分位数，则为 0）：

```
 Year  Month  Day  A  B  C  D  A05  B05  C05  D05  A95  B95  C95  D95
    2007  Jan    1    1  2  3  4  1    0    0    0    0    0    0    0
    2007  Jan    1    5  6  7  8  0    0    0    0    0    0    1    1
    .
    .
    2010  Dec    31   5  6  7  8  0    0    0    0    0    0    0    1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T05:54:36.387

我已经调用了您的数据`dat`：

```
library(plyr)
library(reshape2)

# melt values so all values are in 1 column
dat_melt <- melt(dat, id.vars=c("Year", "Month", "Day"), variable.name="letter", value.name="value")

# get quantiles, split by day
dat_quantiles <- ddply(dat_melt, .(Month, Day), summarise, 
                   P05=quantile(value, 0.05), P95=quantile(value, 0.95))

# merge original data with quantiles
all_dat <- merge(dat_melt, dat_quantiles)

# See if in bounds
all_dat <- transform(all_dat, less05=ifelse(value < P05, 1, 0), greater95=ifelse(value > P95, 1, 0))

   Month Day Year letter value  P05  P95 less05 greater95
1    Dec  30 2010      A     1 1.35 7.65      1         0
2    Dec  30 2010      A     5 1.35 7.65      0         0
3    Dec  30 2010      B     2 1.35 7.65      0         0
4    Dec  30 2010      B     6 1.35 7.65      0         0
5    Dec  30 2010      C     3 1.35 7.65      0         0
6    Dec  30 2010      C     7 1.35 7.65      0         0
7    Dec  30 2010      D     4 1.35 7.65      0         0
8    Dec  30 2010      D     8 1.35 7.65      0         1
9    Dec  31 2010      A     1 1.35 7.65      1         0
10   Dec  31 2010      A     5 1.35 7.65      0         0
11   Dec  31 2010      B     2 1.35 7.65      0         0
12   Dec  31 2010      B     6 1.35 7.65      0         0
13   Dec  31 2010      C     3 1.35 7.65      0         0
14   Dec  31 2010      C     7 1.35 7.65      0         0
15   Dec  31 2010      D     4 1.35 7.65      0         0
16   Dec  31 2010      D     8 1.35 7.65      0         1
17   Feb   1 2007      A     1 1.35 7.65      1         0
18   Feb   1 2007      A     5 1.35 7.65      0         0
19   Feb   1 2007      B     2 1.35 7.65      0         0
20   Feb   1 2007      B     6 1.35 7.65      0         0
21   Feb   1 2007      C     3 1.35 7.65      0         0
22   Feb   1 2007      C     7 1.35 7.65      0         0
23   Feb   1 2007      D     4 1.35 7.65      0         0
24   Feb   1 2007      D     8 1.35 7.65      0         1
25   Jan   1 2007      A     1 1.35 7.65      1         0
26   Jan   1 2007      A     5 1.35 7.65      0         0
27   Jan   1 2007      B     2 1.35 7.65      0         0
28   Jan   1 2007      B     6 1.35 7.65      0         0
29   Jan   1 2007      C     3 1.35 7.65      0         0
30   Jan   1 2007      C     7 1.35 7.65      0         0
31   Jan   1 2007      D     4 1.35 7.65      0         0
32   Jan   1 2007      D     8 1.35 7.65      0         1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T07:56:08.847

这些方面的东西可以合并到原始数据框：

```
aggregate(dfrm[ , c("A","B","C","D")] , list(dfrm$month, dfrm$day), 
                                              FUN=quantile, probs=c(0.05,0.95)) 
```

注意我建议`merge()`。您的描述建议（但未明确）您希望将所有年份的 Jan-1 值一起提交。我认为这比您在 Excel 中使用的表达式“容易”得多。这在所有四列上都为 0.05 和 0.95。

# java - 如何从 java 中的服务器证书获取 OCSP url？

> ID：14995252
> 
> 赞同：0
> 
> 时间：2013-02-21T05:31:46.830
> 
> 标签：java, certificate, x509certificate

我需要一些 java 实现来读取传入的服务器证书。从那里我需要获取 OCSP url 来检查撤销。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:05:49.513

为了完成这项工作，我必须包括充气城堡供应商 jar。

另一个相关查询：

说产品分为两个存储库。Accurev 和 GIT。我们在 GIT 平台代码中使用 bouncycastle 库。该平台在 Android 上运行。

但是我的应用程序在 accurev 代​​码中运行。这就是原因，我必须将充气城堡 jar 包含到我的应用程序 java 项目中。但我不想这样做。

问：我想从 Accurev 应用程序代码访问在 GIT 中运行的充气城堡类文件。这可行吗？

# java - 如何在java中获取ftp传输速率？

> ID：14995256
> 
> 赞同：1
> 
> 时间：2013-02-21T05:32:14.150
> 
> 标签：java, ftp, ftp-client, apache-commons-net

我正在使用 FTPClient (apache commons net) 来执行 FTP 上传和下载。获取传输率的最佳方法是什么？

一种方法是在 ftp.storeFile() 之前获取开始时间，在 ftp.storeFile() 之后获取结束时间，并使用时间差和文件大小来获取传输速率。但这似乎真的很幼稚和低效。有什么更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T07:57:44.583

您描述的方法似乎有问题，因为在传输完成之前您不会获得文件传输速率。您可以考虑使用上述技术，但仅使用以下任一方法（来自 FTPClient API）进行部分文件传输（并在每个块后获取传输速率）：

`appendFile( String filename, InputStream dataToWrite);`

或者

`appendFileStream( String filename );`这将返回要写入的 OutputStream。

我自己没有这样做，但它似乎是一个更好的主意，然后只使用整个文件完成后估计的传输速率。如果我必须等待传输完成才能获得传输速度，那会让我发疯，但我是一个不耐烦的人......

希望有帮助

# objective-c - 根据 NSTableview 中的值启用按钮

> ID：14995257
> 
> 赞同：0
> 
> 时间：2013-02-21T05:32:15.023
> 
> 标签：objective-c, cocoa, nstableview, nsbutton

我有一个 NSTableview。我需要根据表格视图中列的值启用按钮。例如，在表格视图中，我有一列，状态。我有两种状态，撤回和预订。如果我单击状态为已撤回的行，我需要禁用撤回按钮。我可以通过绑定来做到这一点吗？我该怎么做？请帮帮我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T07:04:04.040

如果您创建了一个 custom `NSValueTransformer`，您可以使用绑定启用或禁用该按钮。

`Enabled`您可以按如下方式绑定按钮的属性：

绑定到：`arrayController`

控制器键：`selection`

模型密钥路径：`status`

价值转换器：`MDStatusValueTransformer`

注意：代替`arrayController`，您应该选择 nib 文件中阵列控制器的名称。代替`MDStatusValueTransformer`，您应该指定最终命名我在下面提供的类的任何类名。

正如我所提到的，您需要创建一个自定义`NSValueTransformer`. enabled 属性需要一个`BOOL`包裹在一个 中`NSNumber`，但您的`status`属性是一个`NSString`. 因此，您将创建一个自定义`NSValueTransformer`来检查传入的`status` `NSString`，`NO`如果`status`等于则返回`@"Withdrawn"`。

自定义`NSValueTransformer`应如下所示：

MDStatusValueTransformer.h：

```
@interface MDStatusValueTransformer : NSValueTransformer

@end 
```

MDStatusValueTransformer.m：

```
@implementation MDStatusValueTransformer

+ (Class)transformedValueClass {
    return [NSNumber class];
}

+ (BOOL)allowsReverseTransformation {
    return NO;
}

- (id)transformedValue:(id)value {
    if (value == nil) return nil;
    if (![value isKindOfClass:[NSString class]]) return nil;

    if ([value isEqualToString:@"Withdrawn"]) {
         return [NSNumber numberWithBool:NO];
    }
    return [NSNumber numberWithBool:YES];
}

@end 
```

# android - TextView 未在片段布局中添加

> ID：14995261
> 
> 赞同：0
> 
> 时间：2013-02-21T05:32:24.343
> 
> 标签：android, android-layout, android-fragments

我有一个带有片段的主细节活动。我尝试`TextView`动态添加详细片段。但它并没有增加细节片段布局。但是布局显示正确。

**片段代码：**

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,Bundle savedInstanceState) {
    View rootView = inflater.inflate(
            R.layout.fragment_configuration_detail, container, false);
    RelativeLayout cdf_detail_part1=((RelativeLayout) rootView.findViewById(
            R.id.cdf_detail_part1));

    Log.i("config", "mItem1->"+mItem1);
    if (mItem1 != null) {
        TextView name_text = (TextView) cdf_detail_part1.findViewById(
                R.id.cdf_tv_name);
        name_text.setText(name);
    }

    return rootView;
} 
```

**我的布局 XML 文件：**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:baselineAligned="false"
    android:orientation="horizontal"
    tools:context="com.x.y.configurations.ConfigurationDetailFragment" >

    <RelativeLayout
        android:id="@+id/cdf_detail_part1"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:background="#00FF00" >

        <TextView
            android:id="@+id/cdf_tv_name"
            style="?android:attr/textAppearanceLarge"
            android:layout_width="match_parent"
            android:layout_height="match_parent" />

      </RelativeLayout>

    <RelativeLayout
        android:id="@+id/cdf_detail_part2"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1"
         android:background="#0000FF" >
    </RelativeLayout>

</LinearLayout> 
```

# jboss7.x - Jboss AS7 - jboss-deployment-structure.xml 部署错误

> ID：14995263
> 
> 赞同：1
> 
> 时间：2013-02-21T05:32:28.807
> 
> 标签：jboss7.x

当我将 jboss-deployment-structure.xml 添加到我的 .war 并在 AS7 中部署时，会出现以下错误。

```
Caused by: javax.xml.stream.XMLStreamException: ParseError at [row,col]:[2,1]
Message: Unexpected element '{urn:jboss:deployment-structure:1.2}jboss-deployment-structure'
    at org.jboss.staxmapper.XMLMapperImpl.processNested(XMLMapperImpl.java:108) [staxmapper-1.1.0.Final.jar:1.1.0.Final]
    at org.jboss.staxmapper.XMLMapperImpl.parseDocument(XMLMapperImpl.java:69) [staxmapper-1.1.0.Final.jar:1.1.0.Final] 
```

示例 xml 附在下面。

```
 <jboss-deployment-structure>
    <deployment>
        <exclusions>
            <module name="org.apache.log4j" />
        </exclusions>
    </deployment>
</jboss-deployment-structure> 
```

我收到部署错误有什么原因吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T17:11:58.997

看起来它在抱怨您没有指定命名空间。我更新了排除 log4j 的[文档](https://docs.jboss.org/author/display/AS71/How+To#HowTo-HowdoIuselog4j.propertiesorlog4j.xmlinsteadofusingtheloggingsubsystemconfiguration%3F)以添加命名空间。

试试这个：

```
<?xml version="1.0" encoding="UTF-8"?>
<jboss-deployment-structure xmlns="urn:jboss:deployment-structure:1.1">
    <deployment>
        <exclusions>
            <module name="org.apache.log4j" />
        </exclusions>
    </deployment>
</jboss-deployment-structure> 
```

# java - 在 Windows Media Player 中获取当前正在播放的媒体

> ID：14995265
> 
> 赞同：1
> 
> 时间：2013-02-21T05:32:38.160
> 
> 标签：java, windows, windows-media-player

如何使用 Java 在 Windows 媒体播放器中获取当前播放的歌曲？关于这个有很多问题，但答案在 C# 中。如何使用 Java 做到这一点 - 使用库或有 WMP API？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T05:36:07.317

> ..当前使用 java 在 Windows 媒体播放器中播放的歌曲

不在 OS X 或 *nix 上，也不在我运行 VLC/WinAmp 的这台 Windows 7 机器上。所以你可以认为 Java 没有内置的 API。

不过，Java 可以使用本机，所以在 C# 中使用它并从 Java 中调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T05:37:29.703

我认为[JIntellitype](http://code.google.com/p/jintellitype/) API 会帮助你。它使用 JNI 调用。

**有些人对本机调用使用完整参考：**

[http://msdn.microsoft.com/en-us/library/windows/desktop/dd758070%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd758070%28v=vs.85%29.aspx)

[http://msdn.microsoft.com/en-us/library/windows/desktop/dd562624%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd562624%28v=vs.85%29.aspx)

# c - 如何计算函数中的行数

> ID：14995266
> 
> 赞同：-1
> 
> 时间：2013-02-21T05:32:38.933
> 
> 标签：c, perl

我需要计算文件中函数的行数。我有以下输入。

输入：

*   文件名，
*   函数名

所需输出：

*   函数中的行数

例子：

```
int main()
{
    line1;
    line2;
    line3;
}
int func()
{
    line1
    line2
    line3
    line4
    line5
    if(---)  //line 6
    {        //line 7
        line 8
        line 9
    }        //line10
} 
```

所以如果我们将文件名和函数名作为“func”传递，上面的例子应该返回 10

请建议一些方法来做到这一点...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T08:42:54.147

1.  代码有严格的格式，**缩进**你的源文件

    > 缩进 -kr -bap -nce -i8 -ts8 -sob -l80 -ss -bs -npsl -bl -bli0 file.c

2.  awk + ​​substr($0,1,1) 匹配 '{' 和 '}'

    > ```
    >  awk -F"," '{
    >     if( index(v_func,$0)<10 )
    >     {
    >             findfunc=1;
    >     }
    > 
    >     if( findfunc == 1)
    >     {
    >        if( substr($0,1,1) == "{" )
    >        {
    >                lineCnt=0;
    >        }
    >        else if(substr($0,1,1) == "}" )
    >        {
    >                print lineCnt;
    >        }
    >        else
    >        {
    >                lineCnt = lineCnt+1;
    >        }
    >     } }' v_func=$2 $1 
    > ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T07:21:42.257

```
import sys,re

if len(sys.argv)<3:
    print "Usage: %s filename functionname"%(sys.argv[0])
    exit(0)

f=open(sys.argv[1],"r")
func=sys.argv[2]
linec=0
braces=1
lines=f.readlines()

for i in range(len(lines)):
    if re.match(".{4}"+func,lines[i]):
        break

lines=[s.strip() for s in lines]
lines=[s for s in lines if len(s)!=0]

for k in lines[i+2:]:
    if k=="{":
        braces+=1
    if k=="}":
        braces-=1
    if braces<=0:
        break
    linec+=1

print linec 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T07:23:18.867

> 建议以某种方式去做..

非常粗略：

```
a) assume this is pedantic exercise for class, so ignore tricky bits like macros
b) open "filename"
c) read file into memory
d) strstr() for "function"
e) scan until you hit "{"
f) for(bracecount=1; bracecount > 0; )
g) ++ on {, -- }, skip char constants, skip comments, keep newline count
h) print newline count 
```

# jquery - 删除时重置jquery ui datepicker的minDate maxDate

> ID：14995271
> 
> 赞同：1
> 
> 时间：2013-02-21T05:33:19.180
> 
> 标签：jquery, jquery-ui

我有两个用于日期范围选择的日期选择器，它与 jquery UI 演示页面上的演示相同，但​​是，当用户实际手动删除日期字段值时，我需要将另一个日期字段重置为最初的样子。我尝试编写下面的代码，但出于某种奇怪的原因，每当我在`from`日历中选择一个日期时，它都会显示在该`to`字段中，并且 minDate/maxDate 设置似乎根本不起作用。

```
$( "#dt_from" ).blur(function(){
        if($(this).val()=="")
        {
            $( "#dt_to" ).datepicker( "option", "minDate", "+0" );
        }
    }).datepicker({
        defaultDate: "+0d",
        showOn: "button",
        buttonImage: "images/Cal.gif",
        buttonImageOnly: true,
        minDate:+0,
        changeMonth: true,
        numberOfMonths: 3,
        onClose: function( selectedDate ) {
            $( "#dt_to" ).datepicker( "option", "minDate", selectedDate );
        }
    });
    $( "#dt_to" ).blur(function(){
        if($(this).val()=="")
        {
            $( "#dt_from" ).datepicker( "option", "maxDate", "" );
        }
    }).datepicker({
        defaultDate: "+0d",
        showOn: "button",
        buttonImage: "images/Cal.gif",
        buttonImageOnly: true,
        minDate:+0,
        changeMonth: true,
        numberOfMonths: 3,
        onClose: function( selectedDate ) {
            $( "#dt_from" ).datepicker( "option", "maxDate", selectedDate );
        }
    }); 
```

我相信模糊事件以某种方式导致了这种混乱，但我不知道如何解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T05:51:38.780

啊，感谢这里的另一篇文章[如何清除/重置 jQuery UI Datepicker 日历上的选定日期？](https://stackoverflow.com/questions/9435086/jquery-ui-datepicker-how-do-i-clear-reset-the-datepicker-calendar)我想出了如何解决这个问题。我在这里发布代码以供将来参考。

```
$( "#dt_from" ).prop("readonly",true).datepicker({
        defaultDate: "+0d",
        showOn: "button",
        buttonImage: "images/Cal.gif",
        buttonImageOnly: true,
        minDate:+0,
        changeMonth: true,
        numberOfMonths: 3,
        onClose: function( selectedDate ) {
            if(selectedDate!="")
            {
                $( "#dt_to" ).datepicker( "option", "minDate", selectedDate );
            }
        }
    }).keyup(function(e) {
        if(e.keyCode == 8 || e.keyCode == 46) {
            $.datepicker._clearDate(this);
            $( "#dt_to" ).datepicker( "option", "minDate", "today" );
        }
    });
    $( "#dt_to" ).prop("readonly",true).datepicker({
        defaultDate: "+0d",
        showOn: "button",
        buttonImage: "images/Cal.gif",
        buttonImageOnly: true,
        minDate:+0,
        changeMonth: true,
        numberOfMonths: 3,
        onClose: function( selectedDate ) {
            if(selectedDate!="")
            {
                $( "#dt_from" ).datepicker( "option", "maxDate", selectedDate );
            }
        }
    }).keyup(function(e) {
        if(e.keyCode == 8 || e.keyCode == 46) {
            $.datepicker._clearDate(this);
            $( "#dt_from" ).datepicker( "option", "maxDate", "" );
        }
    }); 
```

为了安全起见，我将字段设置为只读，然后在 del/bkspace 键检查中重置选项。

# c++ - 包含虚成员函数的类的大小

> ID：14995275
> 
> 赞同：0
> 
> 时间：2013-02-21T05:33:41.297
> 
> 标签：c++, inheritance

我是 C++ 编程的新手，我对包含虚拟成员函数的类的大小有疑问。请通过我的以下代码：

```
#include "stdafx.h"
#include <iostream>
using namespace std;

class BaseClass
{
private:
    int a, b;
public:
    BaseClass()
    {
        a = 10;
        b = 20;
    }

    virtual int area()
    {
        return 0;
    }
};

class DerivedClass1 : public BaseClass
{
    int x;

public:
    virtual void simple()
    {
        cout << "inside simple" << endl;
    }
};

int main()
{
    DerivedClass1 Obj;
    cout << sizeof(Obj) << endl; // Displays 16 bytes

    return 0;
} 
```

上面的代码显示大小为 16 个字节。根据我的说法，它应该显示 20 个字节，因为两个虚拟指针（一个是从基类继承的，一个是由于它自己的虚函数而添加到派生类本身）+派生类中的三个数据成员等于 20 个字节。所以请解释一下它是怎么回事....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-01T16:55:09.043

在这种情况下，因为虚拟表指针将在类层次结构中通用。所以，BaseClass 已经有了虚函数，在 DeriveClass1 的附加虚函数不会增加类的大小。

这是您班级的内存布局：

```
class DerivedClass1 size(16):
    +---
    | +--- (base class BaseClass)
 0  | | {vfptr}
 4  | | a
 8  | | b
    | +---
12  | x
    +---

Derivedass1::$vftable@:
    | &DerivedClass1_meta
    |  0
 0  | &BaseClass::area
 1  | &DerivedClass1::simple 
```

在 MVSC 中编译时可以使用 -d1reportAllClassLayout 选项来显示类的内存布局。

# php - 下面的 php 代码中逻辑 OR 的作用是什么

> ID：14995285
> 
> 赞同：2
> 
> 时间：2013-02-21T05:34:32.193
> 
> 标签：php

```
if($post_id === null) {
    $this->db->insert($data);
    !isset($data[$this->page_id]) || $data[$this->page_id] = NULL;

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T05:38:09.920

逻辑运算符执行**[短路评估](http://en.wikipedia.org/wiki/Short-circuit_evaluation)**。如果逻辑 OR 的第一部分为真，则整个表达式为真，因此无需计算第二部分。

它所做的相当于：

```
if(isset($data[$this->page_id])){
    $data[$this->page_id] = NULL
} 
```

**[从文档](http://en.wikipedia.org/wiki/Short-circuit_evaluation)**中举例说明这是如何工作的：

```
// foo() will never get called as those operators are short-circuit
$a = (false && foo());
$b = (true  || foo()); 
```

# apache - 如果我删除 apache 日志文件会怎样？

> ID：14995288
> 
> 赞同：3
> 
> 时间：2013-02-21T05:34:44.400
> 
> 标签：apache

我在 /var/log/apache2 中有 4 个文件，我刚刚删除了其中的 2 个（我确实有备份）。它会影响 apache 的日志记录功能吗？如果文件不存在，apache会自动创建文件并写入它们吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T09:28:18.430

它将自动创建新文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-12T20:17:14.010

该文件被删除，但文件句柄仍然存在，直到您重新加载/重新启动 apache，至少在 Rhel 7 上。您可以通过`sudo lsof | grep access_log`在删除 /var/log/httpd/access_log 后运行来验证这一点。您可能会在稍后运行 logrotate 时看到文件自动重新创建，因为这会发出重新加载，然后会触发再次创建文件。

# c# - Firefox 浏览器中的 jQuery AJAX beforeSend 失败

> ID：14995289
> 
> 赞同：1
> 
> 时间：2013-02-21T05:34:47.863
> 
> 标签：c#, ajax, rest, jquery

我在 AJAX jQuery 中使用 beforeSend 来传递 REST 服务中的标头值。标头值在 Internet Explorer 8 中可以很好地传递。但标头值在 Firefox 中没有传递，也没有调用服务。

这是我的代码：

```
var postCall = function () {
$.support.cors = true;
var HFAssociateRefId = document.getElementById('MainContent_HFAssociateRefId').value;
var Input = {
     AssociateRefId: HFAssociateRefId
 };       
 alert(JSON.stringify(Input));
 var url = document.URL;
 var currentdate = new Date();
 var datetime = (currentdate.getMonth() + 1) + "/"
 + currentdate.getDate() + "/"
 + currentdate.getFullYear() + " "
 + currentdate.getHours() + ":"
 + currentdate.getMinutes() + ":"
 + currentdate.getSeconds();
 $.ajax({
       type: "POST",
       headers: { Accept: "text/plain; charset=utf-8", "Content-Type": "text/plain; charset=utf-8"
                },
       beforeSend: function (xhr, settings) {
       xhr.setRequestHeader("Date", datetime);
       xhr.setRequestHeader("URL", url);
                },
       url: "http://localhost:40680/LinkService.svc/TokenInsertion",
       data: JSON.stringify(Input),
       contentType: "application/json",
       dataType: "json",
       success: function (response) {
       alert(response);
                },
       error: function (xhr, status, error) {           
       alert(status);
                },              
}); 
```

我还尝试将 xhr 称为此[链接](https://stackoverflow.com/questions/10806980/xmlhttprequest-receiving-no-data-or-just-undefined)中指定的新 XMLHttpRequest 。但它在 Firefox 中不起作用。??
提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T08:25:08.370

看起来 Firefox 不尊重 header `Date`。它正在发送标头`URL`。我找不到任何资源来解释这种行为。

作为一种解决方案，您可以将标题重命名为`Date`其他名称。

Chrome 也显示相同的行为。

经过进一步调查，它看起来像标准的标准[行为](http://www.w3.org/TR/XMLHttpRequest)。查看标题为的部分`Terminate these steps if header is a case-insensitive match for one of the following headers:`

这个问题也有同样的[问题](https://stackoverflow.com/questions/6973403/chrome-extension-refuse-header-date-in-ajax-request)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T07:58:06.617

第一个问题是：

```
type: "post",
data: JSON.stringify(Input), <=== this is fail
correct is: data:{data:JSON.stringify(Input)}, 
recuest to $_POST['data']; is better if using arrays... 
```

我建议您尝试使用 jquery ...这个示例非常简单。

基本样本！

Page 1 到 Html 或 PHP 不是很重要这个名字...

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Prueba Array 1</title>
**<!-- important download JQUERY 1.3 or late... -->**
    <script type="text/javascript" src="js/jquery-1.3.min.js"></script>
    <script>
    $(document).ready(function(){
    function toSend(d) {
        $.ajax({  
            type: "get", **// this is posible chain by "post"**
            url: 'test.php', 
            data: {datos:JSON.stringify(d)},  
            dataType: "json",
            success: function(test) { 
                //console.log("visualizacion del registro Name[1]: "+ test.names[1])
                console.info("Array Send");

                $.each( test, function( key, value ) {
                      console.log( key + ": " + value );
                      });
            }
        });

    }

    // send Submit
            $(":send").live('click',function(){
                                    console.log("preparing to send! ");              
                            // lista de entradas en un ID
                            var data    =   $('#form_1 input').serializeArray();
                        // Serializacion de las entradas input
    //                  // Acciones
                    toSend(data);

                    });

    });
    </script>
    </head>

    <body>
    <div id="ie">
    <form id="form_1" action="#" >
    <input name="Nombre" type="text" value="Petronila">
    <input name="Apellido" type="text" value="Sinforosa">
    <input name="Telefono" type="text" value="phone">
    <input name="Ciudad" type="text" value="Living in Caracas">
    <input type="submit" value="Send">
    </form>

    </div>

    </body>
    </html> 
```

到下一个，复制这段代码，然后保存为test.php！并运行

```
<?php 
if(isset($_GET['datos'])){
$names  = array('john doe', 'JANE doe');
$ids    = array('123', $datos);

$data['names'] = $names;
$data['ids'] = $ids;

    echo json_encode($data);
}else{
    $error  =   array('error','No se recibieron metodos');
    $error  =   array('messeng','Method need chain test to Get');
    echo json_encode($error);
}
?> 
```

ok 非常非常重要，在浏览器控制台中检查结果 F12 检查其中任何一项，您需要激活控制台 firefox 有时我测试并且可以！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T05:21:14.230

参考 [链接](http://www.gethifi.com/blog/browser-rest-http-accept-headers)。Firefox 和 Chrome 从不接受添加新的自定义标头，因为它违反了浏览器安全规则。

# asp.net - 路由在 Server 2008 R2 上不起作用

> ID：14995291
> 
> 赞同：-1
> 
> 时间：2013-02-21T05:34:54.370
> 
> 标签：asp.net, vb.net, routing, iis-7.5, windows-server-2008-r2

我在我的一个 asp.net 项目中使用路由，它不使用 MVC 架构......它在我的 PC 甚至 Windows Server 2003 上工作。

以下是我的**global.asax**文件代码：

```
 Sub Application_Start(ByVal sender As Object, ByVal e As EventArgs)
        If ConfigurationManager.AppSettings("SeoFriendlyUrl") = "true" Then
            RegisterRoutes(RouteTable.Routes)
        End If
    End Sub

    Public Shared Sub RegisterRoutes(routes As RouteCollection)
        routes.MapPageRoute("HomePage", "", "~/index.aspx", True)
        routes.MapPageRoute("SignUpRoute", "SignUp", "~/Register.aspx", True)
        routes.MapPageRoute("WorkWithUsRoute", "Work-With-Us", "~/WorkWithUs.aspx", True)
        routes.MapPageRoute("AdvertiseWithUsRoute", "Advertise-With-Us", "~/AdvertiseWithUs.aspx", True)
        routes.MapPageRoute("PrivacyRoute", "PrivacyPolicy", "~/PrivacyPolicy.aspx", True)
        routes.MapPageRoute("NewsLetterRoute", "Get-Alerts", "~/NewsLetters.aspx", True)
End Sub 
```

我在搜索问题时尝试了以下操作： **web.config 中的更改：**

```
<system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
</system.webServer> 
```

**并且 ：**

```
<system.webServer>    
    <modules runAllManagedModulesForAllRequests="true">    
      <remove name="UrlRoutingModule"/>    
      <add name="UrlRoutingModule" type="System.Web.Routing.UrlRoutingModule, System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />    
    </modules>    
    <handlers>    
      <add
         name="UrlRoutingHandler" preCondition="integratedMode" verb="*" path="UrlRouting.axd" type="System.Web.HttpForbiddenHandler, System.Web,     
          Version=2.0.0.0, Culture=neutral,    
          PublicKeyToken=b03f5f7f11d50a3a"/>    
    </handlers>
</system.webServer> 
```

**并使用Http Redirection**更新了我的 IIS

 **但没有什么对我有用。

还有其他我遗漏的部分吗？

**编辑：** 我收到以下错误，即找不到 404 文件； ![在此处输入图像描述](../Images/be5c9e8d3ceafa0e7227d5bc917885e9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T05:46:00.570

如果不在机器上就很难诊断出这样的事情，它可能有很多事情......

我将从[Route Debugger](http://haacked.com/archive/2011/04/12/routedebugger-2.aspx)开始。这将告诉您请求进入时会命中哪些路由。

其他可能的情况是，.Net 安装不正确。向站点发出请求时，您会看到 IIS 错误页面。如果在安装 .Net 之后安装 IIS，则 ASP_net_regiis 不会运行并且 ASP.Net 没有正确设置。.Net 框架的版本错误。您可能会认为它只会说“.Net 的错误版本”，但事实并非如此。这听起来可能很愚蠢，但是您是否正在访问该网站？有时我会混淆路线并最终在错误的站点上颠簸。这需要永远弄清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-20T19:16:54.707

我尝试了所有方法一个多小时，然后我意识到我没有将 packages.config 文件复制到实时服务器 - 一旦我这样做了，所有路由都工作了。没有所有 web.config 和 IIS 更改。那个文件对我有用。对于其他有这个问题的人，仅供参考：D**

# asp.net - 根据汇率动态改变物品的价格

> ID：14995295
> 
> 赞同：0
> 
> 时间：2013-02-21T05:35:20.163
> 
> 标签：asp.net, exchange-server, rate

我正在建立一个网站，我需要在其中显示某些商品的价格。价格需要每天根据汇率更新。我该如何在 asp.net 中执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T06:05:21.653

If question is about how to get currency rates in ASP.NET, than you can use something like this:

```
 private static string GetCurrencyRate(string fromCurrency, string toCurrency)
    {
        WebRequest webrequest = WebRequest.Create(string.Format("http://www.webservicex.net/CurrencyConvertor.asmx/ConversionRate?FromCurrency={0}&ToCurrency={1}", fromCurrency, toCurrency));
        using (WebResponse response = webrequest.GetResponse())
        {
            using (Stream dataStream = response.GetResponseStream())
            {
                using (StreamReader reader = new StreamReader(dataStream))
                {
                    string responseFromServer = reader.ReadToEnd();
                    XmlDocument doc = new XmlDocument();
                    doc.LoadXml(responseFromServer);
                    return doc.InnerText;                     
                }
            }
        }
    } 
```

Using:

```
Console.WriteLine(GetCurrencyRate("GBP", "USD")); 
```

If thereis a problem with displaying this data in web page, than you can tell us more precise about your site, because thereis a few different methods.

# php - 如何使我的 php 项目像 .exe 文件一样可分发

> ID：14995297
> 
> 赞同：1
> 
> 时间：2013-02-21T05:35:21.690
> 
> 标签：php, xampp, wamp

我想让我的 php 项目像 .exe 文件一样可分发。

是否可以自定义 wamp 或 xampp 以在其中包含我的项目文件夹，以便我可以要求客户安装该 wamp/xampp 并且我的项目将在他们的系统上自动设置

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T05:36:54.760

查看[phar](http://php.net/manual/en/intro.phar.php)以创建 php 存档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-30T10:52:11.537

使用 uWamp 服务器，我们可以将 php 项目与 mysql 捆绑并轻松分发。[检查这个](http://www.uwamp.com/en/)

# django - 管理员中的 GenericForeignKey

> ID：14995301
> 
> 赞同：0
> 
> 时间：2013-02-21T05:35:39.237
> 
> 标签：django, django-admin, django-grappelli

我尝试使用 grappelli 获取通用外键的小部件。这是我需要得到的：[http](http://code.google.com/p/django-grappelli/wiki/generic_2_1) ://code.google.com/p/django-grappelli/wiki/generic_2_1 。我有一个模型：

```
class Circuit(models.Model):
    circuit_id = models.PositiveIntegerField(verbose_name=_("Circuit ID"), blank=True, null=True)
    model = models.ForeignKey(Versiiplates, verbose_name=_("Model"))
    date_created = models.DateField(blank=True, null=True, verbose_name=_("Date Created"), default=datetime.date.today())
    manufacturer = models.ForeignKey(Manufacturer, null=True, blank=True, verbose_name="Производитель")
    manufacturer_comments = models.TextField(max_length=2500, null=True, blank=True, verbose_name="Комментарии производителя")
    keeper_type = models.ForeignKey(ContentType, blank=True, null=True, related_name="keeper_type")
    keeper_id = models.PositiveIntegerField(blank=True, null=True)
    keeper = generic.GenericForeignKey('keeper_type', 'keeper_id')
    status = models.PositiveIntegerField(verbose_name=_("Status"), choices=STATUS_TYPE, default=0)
    status_history = models.ManyToManyField(Status, blank=True, null=True)
    status_comment = models.TextField(max_length=2500, blank=True, null=True, verbose_name="Комментарий")

    def __unicode__(self):
        return u"%s #%d" % (self.model, self.circuit_id)

    class Meta:
        verbose_name = _("Circuit")
        verbose_name_plural = _("Circuits") 
```

和它的 AdminModel：

```
class CircuitAdmin(admin.ModelAdmin):
    fieldsets = [
        (None, {'fields': ['circuit_id', 'model', 'date_created']}),
        (_("Manufacturer"), {'fields':['manufacturer', 'manufacturer_comments']}),
        (_("Status"), {'fields': ['status', 'status_comment']})
    ]
    list_display = ('circuit_id', 'model', 'date_created', 'keeper', 'status')
    search_fields = ('circuit_id', )
    list_filter = ('model', 'status')
    related_lookup_fields = {
        'generic': [['keeper_type', 'keeper_id']]
    } 
```

但是在管理员中我的 GenericForeignKey 仍然没有小部件。为什么在grapelli 的使用示例中有两个GenericForeignKey 字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T09:54:28.843

答案很简单。我只需要添加 keeper_id 和 keeper_type 字段集，如下所示：

```
fieldsets = [
        (None, {'fields': ['circuit_id', 'model', 'date_created', 'keeper_type', 'keeper_id']}),
        (_("Manufacturer"), {'fields':['manufacturer', 'manufacturer_comments']}),
        (_("Status"), {'fields': ['status', 'status_comment']})
    ] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-18T22:28:18.120

对于更新的答案，正确的方法现在似乎是：

```
class ProjectTreeAdmin(MPTTModelAdmin):
    related_lookup_fields = {
        'generic': [['content_type', 'object_id']],
    } 
```

从[这个问题](https://stackoverflow.com/questions/6756747/django-admin-genericforeignkey-widget?rq=1)来看，指向[文档](https://django-grappelli.readthedocs.org/en/autocomplete/customization.html#related-lookups)

# javascript - 将字符串转换为变量名。(JavaScript)

> ID：14995303
> 
> 赞同：0
> 
> 时间：2013-02-21T05:35:44.443
> 
> 标签：javascript, function, random

我确实看过前面的问题，但它们是针对整数值的，我需要一个文本值的答案。

我在本周早些时候问了一个与此相关的问题，但这里有。如下所示，我的 Make[x] 等于某个字符串值（Acura、Honda、Toyota）。当我将该 Make[x] 传递给函数 Models(Make) 时，如何让该字符串成为 Models(Make) 函数中的变量 Acura、Honda 和 Toyota 的变量名称？

```
function Models(Make){
var Acura=['RSX','NSX','Integra',];
var Honda=['Accord','Civic','Prelude',];
var Toyota=['MR2','Celica','Camry',];
var holder = Make;
var Model = holder[Math.floor(Math.random()*holder.length)];
return Model;
}

function main(){
var Makes=['Acura','Honda','Toyota',];
var Make = Makes[Math.floor(Math.random() * Makes.length)];
var Model = Models(Make);
var Out = Make + " " + Model;
return Out;
}

document.write(main()); 
```

如果运行，您将获得 Make 的名称，但它不是模型，而是从模型名称中吐出一个字母来代替 make。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T05:38:41.483

你不能用你目前拥有的东西来做你所要求的事情，但无论如何创建模型的对象会更有意义

```
function Models(Make) {
    var Models = {"Acura": ['RSX','NSX','Integra'] /* snip */};
    return Models[Make][random()];
} 
```

# c# - 在 Gridview 中选择所有复选框需要很长时间

> ID：14995305
> 
> 赞同：0
> 
> 时间：2013-02-21T05:35:52.417
> 
> 标签：c#, .net, winforms, performance, datagridview

我正在开发一个应用程序，它有一个带有一列类型复选框的 Datagridview。还有一个复选框可以切换网格视图的选定行（选择/取消选择复选框）。

这是我用来实现上述逻辑的代码。

```
 private void gvBankUnrencolised_CellContentClick(object sender, DataGridViewCellEventArgs e)
    {
        selectCells_gvBankUnreconciled();
        gvBankUnrencolised.CommitEdit(DataGridViewDataErrorContexts.Commit);
    }

private void gvBankUnrencolised_CellValueChanged(object sender, DataGridViewCellEventArgs e)
{
    selectCells_gvBankUnreconciled();
    string id = null;
    //   gvBankUnrencolised.DefaultCellStyle.BackColor = Color.White;
    int sum = 0;

    for (int i = 0; i < gvBankUnrencolised.Rows.Count; i++)
    {
        if (Convert.ToBoolean(gvBankUnrencolised.Rows[i].Cells[0].Value) == true)
        {
            //gvBankUnrencolised.Rows[i].DefaultCellStyle.BackColor = Color.LightGreen;
            id = id + gvBankUnrencolised.Rows[i].Cells[1].Value + ",";
            Int32 amt = Convert.ToInt32(gvBankUnrencolised.Rows[i].Cells["AMT_WITH_SIGN"].Va

            sum = sum + amt;

        }
        else
        {
            //gvBankUnrencolised.Rows[i].DefaultCellStyle.BackColor = Color.White;
        }
    }
    if (id == null)
    {
        // MessageBox.Show("Nothing is selected");
    }
    else if (id != null)
    {
        id = id.Remove(id.Length - 1);
    }
    lblVmTotal.Text = sum.ToString();
    //lblVmTotal.Text = id;
    Bankid = id;

private void gvBankUnrencolised_CellValueChanged(object sender, DataGridViewCellEventArgs e)
{
    selectCells_gvBankUnreconciled();
    string id = null;
    //   gvBankUnrencolised.DefaultCellStyle.BackColor = Color.White;
    int sum = 0;

    for (int i = 0; i < gvBankUnrencolised.Rows.Count; i++)
    {
        if (Convert.ToBoolean(gvBankUnrencolised.Rows[i].Cells[0].Value) == true)
        {
            //gvBankUnrencolised.Rows[i].DefaultCellStyle.BackColor = Color.LightGreen;
            id = id + gvBankUnrencolised.Rows[i].Cells[1].Value + ",";
            Int32 amt = Convert.ToInt32(gvBankUnrencolised.Rows[i].Cells["AMT_WITH_SIGN"].Value);

            sum = sum + amt;

        }
        else
        {
            //gvBankUnrencolised.Rows[i].DefaultCellStyle.BackColor = Color.White;
        }
    }
    if (id == null)
    {
        // MessageBox.Show("Nothing is selected");
    }
    else if (id != null)
    {
        id = id.Remove(id.Length - 1);
    }
    lblVmTotal.Text = sum.ToString();
    //lblVmTotal.Text = id;
    Bankid = id;
}

private void selectCells_gvBankUnreconciled()
{
    foreach (DataGridViewRow row in gvBankUnrencolised.Rows)
    {
        if (Convert.ToBoolean(row.Cells[0].Value) == true)
            row.Selected = true;
    }
} 
```

当数据很小（500 行）时，代码可以正常工作，但随着数据增长（>1000）行，应用程序会挂起。有没有办法做到这一点？

编辑

这是选择所有列并需要优化的代码。我不知何故留下了这条重要的信息

```
private void chkBankCheckAll_CheckedChanged(object sender, EventArgs e)
        {
            for (int j = 0; j < gvBankUnrencolised.Rows.Count; j++)
            {
                if (chkBankCheckAll.Checked == true)
                {
                    gvBankUnrencolised.Rows[j].Cells[0].Value = true;
                }
                if (chkBankCheckAll.Checked == false)
                {
                gvBankUnrencolised.Rows[j].Cells[0].Value = false;
                }
            }

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T06:00:39.660

根据我的说法，更改您的代码以执行触发内容单击的单元格的选择逻辑，而不是 DataGridView 控件中的所有行。

## 代码

```
private void gvBankUnrencolised_CellContentClick(object sender, DataGridViewCellEventArgs e)
{
    selectCells_gvBankUnreconciled(e);
    gvBankUnrencolised.CommitEdit(DataGridViewDataErrorContexts.Commit);
}

// Some other code snippets 

private void selectCells_gvBankUnreconciled()
{
    object cellValue = gvBankUnreconciled.Rows[e.RowIndex].Cells[e.ColumnIndex].Value;
    if (celValue is DBNull) { return; }

    if (Convert.ToBoolean(cellValue) == true)
            gvBankUnreconciled.Rows[e.RowIndex].Selected = true;
} 
```

# php - 将“var_dump”发送到 FireBug 控制台

> ID：14995307
> 
> 赞同：11
> 
> 时间：2013-02-21T05:35:54.150
> 
> 标签：php, firebug, var-dump, firephp

如您所知`var_dump()`，除了 value 还显示其**数据类型**和**length**。

有没有办法将其输出记录到**FireBug 控制台**？

我尝试了**FirePHP**和**FireLogger**，但都只输出变量的值（有时甚至不正确的变量值）。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-09T23:02:49.550

也许你需要的是这样的：

```
function var2console($var, $name='', $now=false)
{
   if ($var === null)          $type = 'NULL';
   else if (is_bool    ($var)) $type = 'BOOL';
   else if (is_string  ($var)) $type = 'STRING['.strlen($var).']';
   else if (is_int     ($var)) $type = 'INT';
   else if (is_float   ($var)) $type = 'FLOAT';
   else if (is_array   ($var)) $type = 'ARRAY['.count($var).']';
   else if (is_object  ($var)) $type = 'OBJECT';
   else if (is_resource($var)) $type = 'RESOURCE';
   else                        $type = '???';
   if (strlen($name)) {
      str2console("$type $name = ".var_export($var, true).';', $now);
   } else {
      str2console("$type = "      .var_export($var, true).';', $now);
   }
}

function str2console($str, $now=false)
{
   if ($now) {
      echo "<script type='text/javascript'>\n";
      echo "//<![CDATA[\n";
      echo "console.log(", json_encode($str), ");\n";
      echo "//]]>\n";
      echo "</script>";
   } else {
      register_shutdown_function('str2console', $str, true);
   }
} 
```

用法：`var2console($myvar, '$myvar');`或者干脆`var2console($myvar);`

很少需要将`$now`参数设置为`true`，从而导致`<script>`标签立即输出。使用的好处[`register_shutdown_function()`](http://www.php.net/manual/en/function.register-shutdown-function.php)是不需要关注 HTML 中的“你在哪里”。

保留从 PHP 到 JavaScript 的传输中的[`json_encode()`](http://www.php.net/manual/en/function.json-encode.php)所有字符。唯一需要注意的是编码：`json_encode()`仅适用于`UTF-8`（无论如何，在大多数情况下，这是推荐的编码）。您可能需要类似的东西，[`utf8_encode()`](http://www.php.net/manual/en/function.utf8-encode.php)或者[`mb_convert_encoding()`](http://www.php.net/manual/en/function.mb-convert-encoding.php)如果您使用不同的编码（或者更确切地说，您可以考虑切换到`UTF-8`）。

Firebug 控制台的输出只是 的输出[`var_export()`](http://www.php.net/manual/en/function.var-export.php)，前面是变量的类型，包括字符串的长度和数组的计数，以及可选的变量名称。

`var_export()`提供比[`var_dump()`](http://www.php.net/manual/en/function.var-dump.php). 如果你真的需要 的输出`var_dump()`，你可以使用这样的东西：

```
function dump2console($var, $name='', $now=false)
{
   ob_start();
   if (strlen($name)) {
      echo "$name =\n";
   }
   var_dump($var);
   $str = ob_get_clean();
   str2console($str, $now);
} 
```

用法：`dump2console($myvar, '$myvar');`或者干脆`dump2console($myvar);`

您应该避免循环引用（`var_dump()`检测到它们为时已晚，并且`var_export()`根本没有检测到它们）。这是如何做到的，例如，对于`$GLOBALS`：

```
function globals2console($now=false)
{
   $g = $GLOBALS;
   $g['GLOBALS'] = '(recursion)';
   var2console($g, '$GLOBALS', $now);
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-02-21T06:24:27.923

您可以通过将 console.log() 放在脚本标记中来将 JavaScript 转储到控制台：

```
<script type="text/javascript">
console.log("hello");
</script> 
```

所以如果你在那里做一个php转储......

```
<script type="text/javascript">
console.log("<?php var_dump('abc'); ?>");
</script> 
```

你只需要小心 var_dump 中的 ' 和 " 会破坏你的 JavaScript。在这个例子中它会没问题，因为 HTML 将是：

```
<script type="text/javascript">
console.log("string 'abc' (length=3)");
</script> 
```

只要记住 php 被处理然后放入 JavaScript。您也可以将其转储到评论中：

```
<!--
<?php 
var_dump('abc');
?>
--> 
```

然后您可以查看源代码或检查元素。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-07T23:31:24.083

```
<script>console.log( <?= json_encode( $var ) ?> )</script> 
```

只是把我的帽子扔进戒指。听起来 FirePHP 是最好的选择。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-21T05:48:17.197

[FirePHP](http://www.firephp.org/HQ/Use.htm)可以很好地完成这项工作 + 您可以在开发 Ajax 时使用它。

示例代码：

```
require_once('FirePHPCore/fb.php'); # add the library

fb($var); #log the variable
fb( var_export($var,true) ); # log the variable with the var_export format 
```

如果您将数组传递给它，您可以从控制台单击它，它将在屏幕上打开一个弹出窗口。您甚至可以展开/折叠数组和对象。

**编辑：** 如果您正在寻找数据类型和长度，请使用`var_dump()`.

```
fb( var_dump( array(
    1,
    'a',
    true
  ) ) ); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-08T15:31:31.960

我总是将此脚本与 Zend_Log_Writer_Firebug 结合使用（使用 firephp [http://www.firephp.org/](http://www.firephp.org/)），因为在应用程序或 ajax 请求中重定向后，使用 xdebug 调试并不总是按预期工作：

```
require_once '/Zend/Log.php';
require_once '/Zend/Log/Writer/Firebug.php';  
require_once '/Zend/Controller/Response/Http.php';
require_once '/Zend/Controller/Request/Http.php';

// create the logger and log writer
$writer = new Zend_Log_Writer_Firebug();
$logger = new Zend_Log($writer);

// get the wildfire channel
$channel = Zend_Wildfire_Channel_HttpHeaders::getInstance();

// create and set the HTTP response
$response = new Zend_Controller_Response_Http();
$channel->setResponse($response);

// create and set the HTTP request
$channel->setRequest(new Zend_Controller_Request_Http());

// record log messages
$logger->info('test');
$logger->info(var_export($_SESSION,true));
$logger->info(count(var_export($_SESSION,true)));
$logger->info(strlen(var_export('hello',true)));
$logger->info(get_type($_SESSION,true));  

// insert the wildfire headers into the HTTP response
$channel->flush();

// send the HTTP response headers
$response->sendHeaders(); 
```

您可以构建自己的库来获取变量的类型：

```
<?php
function get_type($var) 
{
    if(is_object($var))
        return get_class($var);
    if(is_null($var))
        return 'null';
    if(is_string($var))
        return 'string';
    if(is_array($var))
        return 'array';
    if(is_int($var))
        return 'integer';
    if(is_bool($var))
        return 'boolean';
    if(is_float($var))
        return 'float';
    if(is_resource($var))
        return 'resource';
    //throw new NotImplementedException();
    return 'unknown';
}
?> 
```

使用对 var_dump_ret 的函数调用作为 $logger->info() 的参数也可能会有所帮助。我还没有测试过。

```
function var_dump_ret($mixed = null) {
  ob_start();
  var_dump($mixed);
  $content = ob_get_contents();
  ob_end_clean();
  return $content;
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-09T20:25:48.017

如果您只想查看`var_dump`firebug（客户端）中的输出**而不在 Javascript 中执行任何操作，**我建议您使用**cookie**以下是如何以这种方式执行它的说明：

```
<?php
$str =  "Abu Romaïssae";

sendVarDumpToFront($str);

echo "<pre>";
echo $str."\n";

function sendVarDumpToFront( $mixed ){
    ob_start();
    var_dump($mixed);
    $content = ob_get_contents();
    ob_end_clean();
    setcookie("var_dump",$content);
} 
```

比你可以通过这种方式在萤火虫中拥有它：

![从 Firebug 读取 cookie 内容](../Images/0fbcceb9140a0422c3e52f36ab2d1f6d.png)

> ## 重要的
> 
> 由于这种方式使用 cookie，因此您必须在输出任何内容之前放置 var_dump 内容，否则这将不起作用

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-21T05:45:14.157

来自：[http](http://sixrevisions.com/web-development/how-to-debug-php-using-firefox-with-firephp/) `Fb::log($array, "dumping an array")` ://sixrevisions.com/web-development/how-to-debug-php-using-firefox-with-firephp/ 这将为您提供类型和数据。您必须手动进行额外的日志记录以获取长度/计数。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-03-07T19:39:31.303

以下将从 var_dump() 中获取任何内容并在尝试将其发送到 console.log() 之前将其编码为 JSON。这可以防止特殊字符弄乱输出。

```
<?php
$myArray = array('Red','Green','Blue','Orange','Yellow','Purple');

ob_start();
var_dump($myArray);
$var_dump = ob_get_contents();
ob_end_clean();
?>

<script>
var var_dump = <?php echo json_encode($var_dump); ?>;
console.log(var_dump);
</script> 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-03-07T21:26:40.710

如果您有一个使用 var_dump() 生成输出的 Ajax (XHR) 调用，那么您可以在 FireBug 中的**'Console'**或**'Net'**下检查请求。**单击加号**将其展开并查看**“响应”**选项卡。

否则，如果您将 var_dump() 放入您正在查看的主页中，它应该只显示在所查看的页面中，尽管格式可能会混乱。尝试

```
echo '<PRE>' 
```

在 var_dump() 之前，或者查看页面源而不是直接输出。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-03-08T15:02:32.100

我认为实现这一目标的一种简单方法是做一个简单的

`console.log(<?php var_export($var, true) ?>);`

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-03-09T00:24:42.290

你把一个简单的问题复杂化了。Firebug（以及任何其他控制台/dom 日志查看器用于查看客户端输出。PHP 是服务器端，推送到控制台日志没有多大意义。

话虽如此，如果您真的想将服务器端输出通过管道传输到控制台日志，您应该将该输出转换为 json 并将其传递到控制台日志。如果您只是想在生活站点上输出变量值，而人们不知道您正在使用它（而且您无论如何都不应该使用实时版本，但这不是重点）为什么不将输出通过管道传输到文件并读取无论您喜欢该输出，您甚至可以使用 ajax 通过 jquery 将转储传递到日志。

我想说的是……你把你想做的事情过度复杂化了。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2013-02-21T08:43:50.747

仅来自 JavaScript 的 jquery 来自 firebug 和 chrome 中的数组是：

```
 console.dir('[object arrays]'); 
```

打开控制台并激活到 F12 ...并在控制台中编写此代码是从 jquery 到 php 的 var_dump。数组到 json

```
var test = {"names":["john doe","JANE doe"],"ids":["123",null]}; console.dir(test); 
```

如果你需要直接从 PHP 控制台需要一个插件

# jsp - HTTP Status 500 - java.lang.NumberFormatException: null

> ID：14995313
> 
> 赞同：0
> 
> 时间：2013-02-21T05:36:54.900
> 
> 标签：jsp, servlets, nullpointerexception, servlet-filters

I am creating a standard dynamic web project including a Servlet, a filter to filter the request and jsp pages. I am taking the number of books from the welcome.jsp and depending on the count I am populating the input boxes on the add.jsp. I want to filter the data coming through the add.jsp. When I verify data through Regex, its showing me error. Also is my flow correct i.e. from the start FILTER --> CONTROLLER --> FILTER --> PAGE and so on???

Error: java.lang.NumberFormatException: null

full trace is like:

* * *

```
HTTP Status 500 - java.lang.NumberFormatException: null

type Exception report

message java.lang.NumberFormatException: null

description The server encountered an internal error that prevented it from fulfilling this request.

exception

org.apache.jasper.JasperException: java.lang.NumberFormatException: null
    org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:549)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:470)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
    com.filter.RequestFilter.doFilter(RequestFilter.java:107)

root cause

java.lang.NumberFormatException: null
    java.lang.Integer.parseInt(Unknown Source)
    java.lang.Integer.parseInt(Unknown Source)
    org.apache.jsp.WEB_002dINF.add_jsp._jspService(add_jsp.java:139)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
    com.filter.RequestFilter.doFilter(RequestFilter.java:107) 
```

* * *

The code where its showing is:

```
public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {
    // TODO Auto-generated method stub
    // place your code here
    boolean flag = true;
    HttpServletRequest httpServletRequest = (HttpServletRequest) request;
    HttpServletResponse httpResponse = (HttpServletResponse) response;
    httpServletRequest.getServletPath();
    System.out.println(httpServletRequest.getServletPath());

    String address = InetAddress.getLocalHost().getHostAddress();
    System.out.println(address); 

    // For the first time (Welcome page) i will be 0 so that it will perform first if

    if(i == 0)
    {
        System.out.println(i);
        if(verify(address))
        {
            chain.doFilter(request, response);
            i++;
        }

        else
        {
            RequestDispatcher requestDispatcher = httpServletRequest.getServletContext().getRequestDispatcher("/WEB-INF/forbidden.jsp");
            requestDispatcher.forward(request, response);
            return;
        }

    }

    // For the second time (Controller) i will be 1 so that it will perform first if

    else if(i == 1)
    {
        System.out.println(i);
        i++;
        System.out.println("after ++"+i);
        chain.doFilter(request, response);
    }

    // For the second time (add page) i will be 2 so that it will perform first if

    else if(i == 2)
    {

        if(specialChara(httpServletRequest))
            {
                System.out.println(i);
                System.out.println("done");
                i++;
                chain.doFilter(request, response);
            }

            else
            {
                System.out.println(i);
                flag = false;
                System.out.println(""+httpServletRequest.toString()+ "\n"+httpResponse.toString());
                RequestDispatcher requestDispatcher = httpServletRequest.getServletContext().getRequestDispatcher("/WEB-INF/add.jsp");
                requestDispatcher.forward(request, response);

            }
    }

    // For the third time (Controller) i will be 2 so that it will perform first if

    else if(i == 3)
    {
        System.out.println(i);
        i++;
        chain.doFilter(request, response);
        i = 0;
    } 
```

Its giving error on the line of forward() in the loop where i==2\. What might be the issue?

link of add.jsp is [https://docs.google.com/document/d/1fOzymYvlLXS577DrSrznRoeBnI7_hMmuqzFoK02xKoU/edit?usp=sharing](https://docs.google.com/document/d/1fOzymYvlLXS577DrSrznRoeBnI7_hMmuqzFoK02xKoU/edit?usp=sharing)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T05:48:05.627

From the stack trace it seems that the problem is not with your java class, but rather your JSP. My guess is in the line

```
int no = Integer.parseInt(request.getParameter("no")); 
```

no seems to be null.Also you are better off using and other conditional tags rather than using scriptlets in your JSP.

# javascript - 表单验证多维选择框

> ID：14995314
> 
> 赞同：0
> 
> 时间：2013-02-21T05:36:58.377
> 
> 标签：javascript, validation

这是作品的截图。

颜色下拉菜单有子颜色。现在颜色的名称是`color[]`。对于这种情况，您可以看到有 3 种颜色。第一种颜色有 1 个子颜色，第 2 种颜色有 3 个子颜色，颜色 3 有 1 个子颜色

![在此处输入图像描述](../Images/e0e5cc2cb6f742c200414f2f4378daae.png)

我需要检查许多验证。

1.  任何颜色，子颜色不应该是“选择”（在图像中，所有下拉菜单都被选中）
2.  所有 3 种颜色的父百分比（第一种颜色在图像中缺少百分比框，但在现场）应该正好是 100
3.  每种颜色的子百分比也应该是精确的 100%，例如颜色 2 有 3 个子颜色，3 种颜色有 20、40、40 作为子百分比

我在 JS 中验证表单时遇到问题。

我试过`frm["color[]"].length`了，它给了我三个，现在第一种颜色的子颜色有了`color[1][]`名字。如果我得到它的长度`color[]`并循环它。

```
for (i = 0; i < frm["color[]"].length; i++){
    k = i+1;
    console.log( frm["color["+k+"][]"] ); 
} 
```

这行得通。

由于现在有 3 种颜色并 `console.log(frm["color[]"].length)`返回 3，如果只有 1 种颜色，它会返回下拉列表中的项目数，例如 2k+

如果您有任何问题，请告诉我 jQuery 解决方案也很受欢迎

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T06:59:11.117

jQuery：

```
$('select[name^="color["]').each(function() {
  if ($(this).val()=="SELECT") {
    alert(this.name.replace(/[^color0-9]/gi," ")+"is not selected");
    return false;
  }
}); 
```

# date - 在awk中使用mktime时如何保留毫秒信息？

> ID：14995317
> 
> 赞同：2
> 
> 时间：2013-02-21T05:37:05.270
> 
> 标签：date, awk, strftime, mktime

我有一个格式为 2012-12-20T01:16:02.05 的日期字符串，我想转换为格式 2011-12-20-01.16.02.050000

目前我这样做如下

```
format = "%F-%H.%M.%S.%N"
split(stringinput,input,"T"); 
split(input[1],date,"-")
split(input[2],time,":")

 return strftime(format,mktime(date[1] " " date[2] " " date[3] " " time[1] " " time[2] " " time[3] " " time[4])); 
```

但我正在丢失微秒信息或毫秒信息。我怎么能得到那个。它正在返回 2011-12-20-01.16.02.%N

还有任何使字符串解析更通用的建议。目前它只支持一种格式。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T06:18:40.417

您将需要单独处理毫秒数据。此外，用于`gensub()`格式化您的字符串信息。像这样运行：

```
awk -f script.awk 
```

内容`script.awk`：

```
BEGIN {

    string = "2012-12-20T01:16:02.05"

    groups = "^(....)-(..)-(..).(..):(..):(..).*"
    format = "\\1 \\2 \\3 \\4 \\5 \\6"

    datespec = gensub(groups, format, "", string)
    timestamp = mktime(datespec)

    newstring = strftime("%F-%H.%M.%S", timestamp)

    sub(/.*\./,"",string)

    printf "%s.%s0000\n", newstring, string
} 
```

结果：

```
2012-12-20-01.16.02.050000 
```

* * *

***编辑：***

```
BEGIN {

    string = "2011-01-10T14:45:13.815-05:00"

    groups = "^(....)-(..)-(..).(..):(..):(..).*"
    format = "\\1 \\2 \\3 \\4 \\5 \\6"

    datespec = gensub(groups, format, "", string)
    timestamp = mktime(datespec)

    sub(/.*\./,"",string)

    offset = substr(string,4)

    split(offset,array,":")

    seconds = (array[1] * 60 * 60) + (array[2] * 60)

    newstring = strftime("%F-%H.%M.%S", timestamp - seconds, 1)

    printf "%s.%s00\n", newstring, substr(string,0,3)
} 
```

结果：

```
2011-01-10-09.45.13.81500 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T12:19:44.520

Why are you using mktime()? The change you describe is just a text change:

```
$ echo "2012-12-20T01:16:02.05" | awk '{sub(/T/,"-"); gsub(/:/,"."); print $0 "0000"}'
2012-12-20-01.16.02.050000 
```

I'm assuming it was just a typo when you changed 2012 to 2011 in your output.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-30T21:39:51.520

因为我希望我的 GNU 日期精度与 awk 匹配，所以我必须按以下方式进行：

```
x='2019-05-30 14:09:20.074'
echo $x | awk '{split($1,a,"-");;split($2,b,".");split(b[1],c,":");s=a[1]" "a[2]" "a[3]" "c[1]" "c[2]" "c[3];tt=mktime(s);print tt b[2] "000000"}'
1559196560074000000

date --date=$x +'%s%N'
1559196560074000000 
```

现在，我能够使这两者达成一致，我现在能够在 awk 中进行比较逻辑。

# c++ - Efficient way to do random file access?

> ID：14995320
> 
> 赞同：1
> 
> 时间：2013-02-21T05:37:25.953
> 
> 标签：c++, c, filesystems

Actually here are couple of questions regarding to traditional hard disk.

Is every read / write on disk aligned to the system cache / sector size?

Is every file created on disk aligned to sector? I mean, if I create a file, the starting point of the file will be the same as starting point of a sector?

If my sector size is 4096 and I want to read 4096 bytes from position 10 using `fseek ( pFile , 10 , SEEK_SET );` so I end up with reading twice?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T05:56:30.127

I don't have time for an extensive answer, so I will be brief:

1.  Disk sector size on modern disks operates at a lower level than is visible to an application; most of the time even the OS can't trust the numbers reported by disks. It is also largely irrelevant to performance.

2.  Assuming a traditional filesystem, the key alignment is between the disk blocksize and the buffercache. This occurs in the OS/filesystem, and the key constraint on you is that all application-level IO-ops are integral numbers of blocks. Understand that while this persists down onto the disk, extents and the elevator can cause operations to be delayed, split, or reordered.

3.  All modern disks have disk-caches, although more advanced ones may be disabled for performance/reliability reasons. Again, mapping from blocks to sector-equivalents and the on-disk elevator can cause delays, splits, merges, and reorderings; however, most of the time you won't need to worry about this. Just make sure the disk doesn't lie about the current status of the write.

4.  In most filesystems files are aligned to blocks. Given 1-block is the minimum read, sector alignment isn't your concern, and you can't do anything about it anyway. Trust the filesystem/io-subsystem to do this appropriately

5.  It is highly unlikely you will end up reading twice if the blocks are contiguous. You will read two blocks, but given the low inter-track seek times, and sequential read speed of the average disk these days, read-ahead has probably read half-dozen blocks for your single block request so the second block is free. Note: This only applies if the blocks are contiguous. Should there be fragmentation you will get a short or long seek, and that will kill your performance if you do it too many times.

If this is important to you, you need to take time to learn about the filesystems you have available; their tuning parameters; and plan your data-structures accordingly. You should probably also parametrize your structures so you can play with slightly different application-level block/read-buffer/write-buffer sizes.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T02:16:02.150

**Just Do It** the simplest way that works. Complicating things further than that *will* cost you dearly (in programming, debugging, and maintenance time), and unless *measurements* show that this is the bottleneck in your system, it is just wasted effort.

# fortran - 我是否需要显式接口来在子例程中分配派生类型的组件？

> ID：14995322
> 
> 赞同：0
> 
> 时间：2013-02-21T05:37:29.067
> 
> 标签：fortran, derived-types, allocatable-array

我有一个派生类型：

```
module foo
  type bar
      integer, allocatable, dimension(:) :: data
  end type bar
end module foo 
```

现在我想`bar`在没有显式接口的子例程中分配数据：

```
program main
  use foo
  type(bar) :: mybar
  call alloc_my_bar(10,mybar)
  print*, mybar
end program

subroutine alloc_my_bar(n,mybar)
  use foo
  type(bar) :: mybar
  integer :: n
  allocate(mybar%data(n))
  mybar%data = 42
end subroutine alloc_my_bar 
```

这似乎与 . 一起工作得很好`ifort`，但我知道如果 mybar 不是用户定义类型的一部分，我将需要一个显式接口...... ? 此代码与（F90、F95、F2003 ...）兼容的 fortran 标准的哪个版本（如果有）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T07:33:50.143

可分配组件在 TR15581 到 F95 中定义，并被纳入 Fortran 2003 标准。为此，您不需要显式接口，只需类型定义的使用关联就可以了。您不是传递数组，而是传递它周围的结构。

# performance - 使用蒙特卡洛算法的期权定价

> ID：14995325
> 
> 赞同：0
> 
> 时间：2013-02-20T07:07:35.767
> 
> 标签：performance, cuda, opencl, gpu

我必须使用蒙特卡洛算法在 GPU 上进行期权定价。我有两个选择：一个是 NVIDIA GPU 上的 CUDA，另一个是 OpenCL。我很困惑我应该使用哪个 API。我知道与 CUDA 相比，OpenCl 的开发可能需要更多时间，但由于我更关心性能，我想知道我应该走哪条路，为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T23:09:20.100

CUDA 和 OpenCL 是用于编程 GPU 的两个不同平台。OpenCL 是异构平台（如 Cpu、Gpu 等）的开放**标准**，而 CUDA 是**特定****于**NVIDIA **GPU**的。作为工程经验法则，如果您想要可移植性，请继续使用 OpenCL。如果您想要性能，请继续使用 CUDA。

 ******您可以在以下参考资料中找到有关其性能的更多信息：

*   [Coding Gorilla](http://codinggorilla.domemtech.com/?p=1135)博客：它展示了一些示例应用程序的两个平台的性能。
*   [CUDA 和 OpenCL 的综合性能比较](http://ieeexplore.ieee.org/xpls/abs_all.jsp?arnumber=6047190&tag=1)，作者 Jianbin Fang 等。人。根据他们的研究，CUDA 的性能似乎**最多比 OpenCL 好 30%**。******

# r - 找到 git.exe 的位置

> ID：14995328
> 
> 赞同：2
> 
> 时间：2013-02-21T05:37:39.297
> 
> 标签：r, git

我正在尝试使用 R 中的 git 通过 curl 向 github 发送命令（即，我正在尝试使[这个问题](https://stackoverflow.com/questions/14912161/repo-from-rstudio-to-github)作为 R 函数工作）。如果我能找到 git.exe 的位置，我就可以做到这一点。我以为我可以使用`Sys.which`，但它不起作用。

```
> Sys.which("git")
git 
 "" 
```

但是我知道当我这样做时文件就在那里：

```
> system('"C:\\Program Files (x86)\\Git\\bin\\git" --version')
git version 1.7.11.msysgit.1 
```

如何在 Windows 上找到 git.exe？（或者也许我正在解决整个问题，就像我[在这里](https://stackoverflow.com/questions/14964457/check-if-a-program-is-installed)发生的那样）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T06:50:03.783

您可以配置`list.files()`为通过最可能的文件夹进行递归搜索：

```
list.files(
  path=c("c:/program files", "c:/program files (x86)"), 
  pattern="git.exe", 
  full.names=TRUE,
  recursive=TRUE
) 
```

在我的机器上，这会导致：

```
[1] "c:/program files (x86)/Git/bin/git.exe"             
[2] "c:/program files (x86)/Git/cmd/git.exe"             
[3] "c:/program files (x86)/Git/libexec/git-core/git.exe" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-15T07:52:58.753

嘿，现在已经有一段时间了，不确定是否有人需要这个。我从谷歌搜索中偶然发现了一个类似的痛点。

但是，我找到了路径。这有点棘手。我想我安装了这个新的 GitHub 软件包，它把 exe 放在了与我预期不同的路径中。

C:\Users\your_user_name_here\AppData\Local\GitHub\PortableGit_c7e0cbde92ba565cb218a521411d0e854079a28c\cmd\git.exe

*   这里唯一需要注意的是我添加了 git.exe，因为它只会显示图像和 cmd，所以只要知道它是一个应用程序，只需在路径中的 git 旁边添加 .exe，然后单击 PHP Storm 中的测试或其他您正在使用的 IDE。

希望这对某人有帮助！

# authentication - 如何将域帐户用户添加到本地组？

> ID：14995329
> 
> 赞同：1
> 
> 时间：2013-02-21T05:37:43.663
> 
> 标签：authentication, vbscript, adsi

那里有数百篇文章教导这一点，但我的情况是“独特的”。所以我在下面的行中被拒绝访问：

```
Set objDomainUser = GetObject("WinNT://" & domainControllerIP & "/" & domainAccount & ",user") 
```

所以我意识到我必须传递用户的凭据。大多数人只通过域名，这很好。它将连接到可以通过查看环境变量 %LOGONSERVER% 知道的域控制器。我需要指定域控制器名称（或 IP），否则它对我们不起作用。

所以我只是想让这个sintax正确。这是我的代码：

```
Sub AddAccountToLocalGroup(domainName, domainControllerIP, localGroup, domainAccount)

  Dim localComputer : localComputer = GetMachineName()
  Dim objLocalGroup
  Dim objDomainUser

  const ADS_SECURE_AUTHENTICATION = &h0001
  const ADS_SERVER_BIND           = &h0200

  Set objLocalGroup = GetObject("WinNT://" & localComputer      & "/" & localGroup    & ",group")
 'Set objDomainUser = GetObject("WinNT://" & domainControllerIP & "/" & domainAccount & ",user")   'ACCESS DENIED

'Error happens in Set objDomainUser
' Set objDomainUser = GetObject("WinNT:").OpenDSObject("WinNT://" & domainName & "/" & domainControllerIP & "/" & "Bob", "Bob", "Password", ADS_SECURE_AUTHENTICATION or ADS_SERVER_BIND)
' Set objDomainUser = GetObject("WinNT:").OpenDSObject("WinNT://" & domainName & "/" & domainControllerIP & "/" & "Bob", "Bob", "Password", ADS_SECURE_AUTHENTICATION or ADS_SERVER_BIND)
' Set objDomainUser = GetObject("WinNT:").OpenDSObject("WinNT://" & domainName & "/" & domainControllerIP & "/" & ",user", "Bob", "Password", ADS_SECURE_AUTHENTICATION or ADS_SERVER_BIND)
' Set objDomainUser = GetObject("WinNT:").OpenDSObject("WinNT://" & domainName & "/" & "Bob" & ",user", "Bob", "Password", ADS_SECURE_AUTHENTICATION or ADS_SERVER_BIND)

  'Add domain user to local group
  objLocalGroup.Add(objDomainUser.ADsPath)

  If Err.Number <> 0 Then
       WScript.Echo Err.Number
  Else
       WScript.Echo domainAccount & " has been added to local group."
  End If
End Sub 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T10:51:59.917

您应该能够使用针对特定 DC 的显式凭据连接到 AD，如下所示：

```
Const ADS_SECURE_AUTHENTICATION = &h0001
Const ADS_SERVER_BIND           = &h0200

server   = "..."
username = "DOMAIN\user"
password = "password"

Set rootDSE = GetObject("LDAP:").OpenDSObject("LDAP://" & server & "/RootDSE" _
  , username, password, ADS_SERVER_BIND + ADS_SECURE_AUTHENTICATION)
base   = "<LDAP://" & server & "/" & rootDSE.Get("defaultNamingContext") & ">"
filter = "(&(objectCategory=person)(objectClass=user))"
attr   = "distinguishedName"
scope  = "subtree"

Set conn = CreateObject("ADODB.Connection")
conn.Provider = "ADsDSOObject"
conn.Properties("User ID")   = username
conn.Properties("Password")  = password
conn.Properties("Encrypt Password") = True
conn.Properties("ADSI Flag") = ADS_SERVER_BIND + ADS_SECURE_AUTHENTICATION
conn.Open "Active Directory Provider"

Set cmd = CreateObject("ADODB.Command")
Set cmd.ActiveConnection = conn
cmd.CommandText = base & ";" & filter & ";" & attr & ";" & scope
cmd.Properties("Page Size") = 100
cmd.Properties("Timeout") = 30
cmd.Properties("Cache Results") = False

Set rs = cmd.Execute
Do Until rs.EOF
  'enumerate AD records returned by query
  rs.MoveNext
Loop
rs.Close

conn.Close 
```

请参阅Richard L. Mueller 的[这篇文章](http://www.rlmueller.net/ADOAltCredentials.htm)。

**编辑：**啊，我的错误。以上是针对不能处理本地组的 LDAP 提供者。`ADsPath`此外，无法将LDAP添加到从 WinNT 提供程序获得的组对象中。你的尝试没有奏效的原因是你尝试了`WinNT://DOMAIN/...`，但应该使用`WinNT://DOMAIN_CONTROLLER/...`. 像这样的东西应该工作：

```
Const ADS_SECURE_AUTHENTICATION = &h0001
Const ADS_SERVER_BIND           = &h0200

dc       = "..."
username = "DOMAIN\user"
password = "password"

domainuser = "Bob"
localgroup = "Users"

Set nt   = GetObject("WinNT:")
Set user = nt.OpenDSObject("WinNT://" & dc & "/" & domainuser & ",user" _
  , username, password, ADS_SERVER_BIND + ADS_SECURE_AUTHENTICATION)

GetObject("WinNT://./" & localgroup & ",group").Add user.ADsPath 
```

# node.js - 如何让mongodb在appfog上工作？

> ID：14995336
> 
> 赞同：0
> 
> 时间：2013-02-21T05:38:12.447
> 
> 标签：node.js, mongodb, appfog

我是nodeJS的新手，所以我只是从基础开始尝试几件事。

我在从 MongoDB 检索数据时遇到问题，所以这里是代码：

```
var port = (process.env.VMC_APP_PORT || 3000);
var host = (process.env.VCAP_APP_HOST || 'localhost');
var http = require('http');
var mongo = require('mongodb');
http.createServer(function (req, res) {
    var mongoUrl = "mongodb://<userid>:<password>@linus.mongohq.com:10090/<db>";
    if (process.env.VCAP_SERVICES) {
        mongoUrl = process.env.MONGOHQ_URL;
    }
    selectTable(req, res, mongoUrl);
}).listen(port, host);

var selectTable = function (req, res, mongoUrl) {
    res.writeHead(200, { 'Content-Type': 'text/plain' });
    res.write("Start\n");
    mongo.connect(mongoUrl, function (err, conn) {
        conn.collection('Test', function (err, coll) {
            coll.find({}, {}, function (err, cursor) {
                cursor.toArray(function (err, items) {
                    for (i = 0; i < items.length; i++) {
                        res.write(JSON.stringify(items[i]) + "\n");
                    }
                    res.end();
                });
            });
        });
    });
} 
```

这在我的本地工作正常，它显示行，但是当我将它上传到我的 appfog 的一个应用程序时，它不显示行，它只是在“开始”处停止，并且没有显示任何其他内容。

请帮助，非常感谢提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:22:53.203

您可以查看[文档](https://docs.appfog.com/services/mongodb)或[github](https://github.com/appfog/af-node-sample-mongodb/blob/master/server.js)上的示例。他们为您需要连接的每个细节提供**VCAP_SERVICES 。**所以跟随（来自文档）会做所有的魔法。

```
if(process.env.VCAP_SERVICES){
var env = JSON.parse(process.env.VCAP_SERVICES);
var mongo = env['mongodb-1.8'][0]['credentials'];
}
else{
var mongo = {
"hostname":"localhost",
"port":27017,
"username":"",
"password":"",
"name":"",
"db":"db"
}
}
var generate_mongo_url = function(obj){
obj.hostname = (obj.hostname || 'localhost');
obj.port = (obj.port || 27017);
obj.db = (obj.db || 'test');
if(obj.username && obj.password){
return "mongodb://" + obj.username + ":" + obj.password + "@" + obj.hostname + ":" + obj.port + "/" + obj.db;
}
else{
return "mongodb://" + obj.hostname + ":" + obj.port + "/" + obj.db;
}
}
var mongourl = generate_mongo_url(mongo); 
```

# tortoisesvn - 从新文件夹创建一个分支（非版本化代码）

> ID：14995337
> 
> 赞同：0
> 
> 时间：2013-02-21T05:38:13.087
> 
> 标签：tortoisesvn

我刚刚创建了一个新文件夹/项目和很多新代码，我想将此代码提交到一个新分支，我该如何使用 torotiseSVN 做到这一点？

这个新创建的代码永远不会被签出/提交，它是纯未版本化的代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T06:32:05.967

1.  从服务器端的主干创建（在 repobrowser 中）分支
2.  结帐分支到新的，与主干，WC 无关
3.  将 WC 的内容与“新文件夹/项目”中的文件同步

**PS**：修复工作流程，以后总是从准备工作空间（新分支）开始，您可以节省大量时间并避免 p.3 的猴子工作

# android - 防止 achartengine 和 textview 在应用程序发送到后台后重置

> ID：14995344
> 
> 赞同：2
> 
> 时间：2013-02-21T05:38:48.450
> 
> 标签：android, graph, bluetooth, achartengine

我从蓝牙接收数据，然后将其显示在 TextView 中，并使用 AChartEngine 绘制它。当我第一次开始活动时，情节显示正常。我还在通知（文本视图）中显示相同的数据。当我按下 HOME 按钮时，我可以看到活动仍在运行，因为通知中的数据正在更新。但是当我回到活动时，图表不会绘制，并且 TextView 保持为空（布局已重置）。

我已经阅读了一些关于这个主题的内容，我相信我每次都需要保存布局的状态。但我不确定如何为 AChartEngine 绘图和 textview 执行此操作。

我读到我需要跟踪更改，并在每次更改时保存布局，例如`onPause`或`onStop`。我已阅读我需要使用`onConfigurationChanged`.

谁能向我解释如何在`AChartEngine`and上保存状态`TextView`？这一切都让我感到困惑，因为即使应用程序在后台运行，图表也应该“更新”，当我恢复布局时，它会恢复图表中的旧数据吗？还是会显示最新数据？

谢谢

**更新（1）：** 我添加了以下代码（使用@Dan 建议的示例）：

```
@Override
protected void onSaveInstanceState(Bundle outState) {
    //TODO 
    super.onSaveInstanceState(outState);
    // save the current data, for instance when changing screen orientation
    outState.putSerializable("datasetHR", mDatasetHR);
    outState.putSerializable("datasetRR", mdatasetRR);
    outState.putSerializable("datasetO2", mDatasetO2);

    outState.putSerializable("rendererHR", mRendererHR);
    outState.putSerializable("rendererRR", mRendererRR);
    outState.putSerializable("rendererO2", mRendererO2);

    outState.putSerializable("current_seriesHR", HRCurrentSeries);
    outState.putSerializable("current_seriesRR", RRCurrentSeries);
    outState.putSerializable("current_seriesO2", O2CurrentSeries);

    outState.putSerializable("current_rendererHR", hrrenderer);
    outState.putSerializable("current_rendererRR", rrrenderer);
    outState.putSerializable("current_rendererO2", o2renderer);

    outState.putSerializable("current_TV_HR", tvHR);
    outState.putSerializable("current_TV_RR", tvRR);
    outState.putSerializable("current_TV_O2", tvO2);

}

@Override
protected void onRestoreInstanceState(Bundle savedState) {
    super.onRestoreInstanceState(savedState);
    // restore the current data, for instance when changing the screen orientation
    mDatasetHR = (XYMultipleSeriesDataset) savedState.getSerializable("datasetHR");
    mdatasetRR = (XYMultipleSeriesDataset) savedState.getSerializable("datasetRR");
    mDatasetO2 = (XYMultipleSeriesDataset) savedState.getSerializable("datasetO2");

    mRendererHR = (XYMultipleSeriesRenderer) savedState.getSerializable("rendererHR");
    mRendererRR = (XYMultipleSeriesRenderer) savedState.getSerializable("rendererRR");
    mRendererO2 = (XYMultipleSeriesRenderer) savedState.getSerializable("rendererO2");

    HRCurrentSeries = (XYSeries) savedState.getSerializable("current_seriesHR");
    RRCurrentSeries = (XYSeries) savedState.getSerializable("current_seriesRR");
    O2CurrentSeries = (XYSeries) savedState.getSerializable("current_seriesO2");

    hrrenderer = (XYSeriesRenderer) savedState.getSerializable("current_rendererHR");
    rrrenderer = (XYSeriesRenderer) savedState.getSerializable("current_rendererRR");
    o2renderer = (XYSeriesRenderer) savedState.getSerializable("current_rendererO2");

    tvHR = (TextView) savedState.getSerializable("current_TV_HR");
    tvRR = (TextView) savedState.getSerializable("current_TV_RR");
    tvO2 = (TextView) savedState.getSerializable("current_TV_O2");

} 
```

但这仍然无济于事。TextView 和图形仍然恢复到它们的原始状态。问题不止于此。我不断地从蓝牙接收数据。我在 AChartEngine 中绘制该数据，并在 TextView 中显示它。在经过`onPause`和后活动恢复后`onStop`，数据不会被更新。

它在处理程序接收到 a 时更新`MESSAGE_READ`，并运行一个方法。在该方法中，我使用以下方法更新 TextView：

```
TextView tvHR = (TextView) findViewById(R.id.HRdisplay); // update the textview
TextView tvRR = (TextView) findViewById(R.id.RRdisplay); // update the textview
TextView tvO2 = (TextView) findViewById(R.id.O2display); // update the textview
tvHR.setText(hr);
tvRR.setText(rr);
tvO2.setText(o2); 
```

在活动被发送到后台（通过`onPause`和`onStop`），然后它恢复回来后，TextView 不会更新。但我知道数据进来了，它确实通过了上面的代码，因为同样的方法更新了通知，我可以看到那里的传入数据一直在更新。

**更新#2：** 我在里面添加了以下代码`onResume`：

```
 if (savedInstanceState != null) {
        //Then the application is being reloaded
        onRestoreInstanceState(savedInstanceState);
    } 
```

但是依然没有恢复到之前的状态，显示的TextView和Graph依然没有更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T06:11:10.917

您肯定需要覆盖`onSaveInstanceState`并`onRestoreInstanceState`存储和检索图表的数据集和渲染器以及 textview 值。[请在此处](http://code.google.com/p/achartengine/source/browse/trunk/achartengine/demo/org/achartengine/chartdemo/demo/chart/XYChartBuilder.java)查看示例。

# asp.net-mvc - 使用具有 50 个并行线程的 Xenu 爬网时出现 Asp.net MVC DataContext 问题

> ID：14995345
> 
> 赞同：0
> 
> 时间：2013-02-21T05:38:52.480
> 
> 标签：asp.net-mvc, linq-to-sql, iis-7

有一些非常奇怪的问题，不知道这些是关于什么的。

我有一个 asp.net mvc2 站点。我正在使用 Linq to SQL 类 ( `.dbml`) 进行数据访问。数据库位于 SQL Server 2008 R2 中。

一切都很好，我的网站运行良好。当我使用 Xenu 抓取我的网站时，问题就开始了，我开始遇到一大堆不同的问题。以下是其中一些示例。

> *已经有一个与此命令关联的打开的 DataReader，必须先关闭它。
> 阅读器关闭时调用 Read 的尝试无效。*
> 
> *成员自动同步失败。对于要在插入后自动同步的成员，该类型必须具有自动生成的标识或插入后数据库未修改的键。*
> 
> *不允许启动新请求，因为它应该带有有效的事务描述符。*
> 
> *指数数组的边界之外。*

更让我困惑的是我停止 Xenu 并在 2 分钟后访问相同的页面，它们开始正常工作。

我已经在window server 2008上的站点上发布了该站点的IIS7。

只是寻找提示以便我可以进行故障排除，目前不知道从哪里开始。

关于 Xenu 的 Link Sleuth 的信息：[http ://en.wikipedia.org/wiki/Xenu%27s_Link_Sleuth](http://en.wikipedia.org/wiki/Xenu%27s_Link_Sleuth)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T06:40:12.027

我认为你只是在杀死你的服务器。本地 LAN 上有 50 个高速并行线程？拨回来一点。我认为这些错误是由于超载造成的。是的，您的实施中可能存在缺陷，或者您可以采取一些措施使其变得更好。数据库和IIS在同一台机器上？这是您期望的负载吗？你可能很好。

# javascript - 如何在不使用javascript的iOS中仅禁用UIWebView上的长按手势

> ID：14995347
> 
> 赞同：1
> 
> 时间：2013-02-21T05:39:11.060
> 
> 标签：javascript, ios, uiwebview

我在这方面遇到了将近 3 周的重大危机......我在谷歌上花了很多时间，发现即使我禁用了长按手势（LPG），webview 本身也有自己的手势，所以它不起作用. （我通过将 LPG 持续时间设置为 0.3 进行了检查，它捕获了 LPG 但为 0.4，复制菜单在它检测到之前弹出）另外我的 url 有 iframe，这就是为什么它不接受 javascript 代码的原因。

这是我的做法

1.  `view > webview`（webview 位于视图中（mycontroller））
2.  我需要对 iframe 中的内容禁用 LPG
3.  我需要禁用 c`opy/paste/cut/delete`并且还`hyperlink`
4.  应该在 iOS 5.0+ 中工作

我要求

1.  有什么办法可以禁用 webview 自己的手势？
2.  有没有办法在 iframe 上应用 javascript？
3.  还是有其他方法可以在 webview 上禁用 LPG？

请大家帮帮我！！！

# php - PHP数组的Json解码不返回任何结果

> ID：14995350
> 
> 赞同：0
> 
> 时间：2013-02-21T05:39:35.383
> 
> 标签：php, json, gnip

在对 Gnip 进行了几次研究之后，我将它集成到了我的应用程序中，并且我设法添加了新规则并从 Gnip 获取流结果，但是现在我在将其转换为 PHP 数组并显示它时遇到了问题

我使用 CURLOPT_RETURNTRANSFER => TRUE 来不打印 curl 结果，并将其存储到变量中并使用 json_decode 函数对其进行解码，然后打印它但仍然得到一个空页面。

如果有人可以帮助我，这对我来说将节省大量时间

提前致谢

这是我的代码

```
 $ch = curl_init();
    curl_setopt_array($ch, array(
        CURLOPT_URL => $stream_url,
        CURLOPT_ENCODING => "gzip",
        CURLOPT_FOLLOWLOCATION => true,
        CURLOPT_HTTPAUTH => CURLAUTH_BASIC,
        CURLOPT_USERPWD => $user.":".$pass,
        CURLOPT_WRITEFUNCTION => "print_out_data",
       CURLOPT_RETURNTRANSFER => TRUE,
        CURLOPT_LOW_SPEED_TIME=> 60,
        CURLOPT_TIMEOUT => 10,

 //CURLOPT_VERBOSE => true // uncomment for curl verbosity

    ));

    $content = curl_exec($ch);

    $arr = json_decode($content, true);
    $foo = $arr['id']; 
    $bar = $arr['objectType']; 

   print_r($foo);
    print_r($bar); 
```

打印时得到的结果

```
{"id":"tag:search.twitter.com,2005:304468052219662336","objectType":"activity","actor":{"objectType":"person","id":"id:twitter.com:348088144","link":"http://www.twitter.com/Devin_Giordan0","displayName":"ᎠƎϑᎥИ ᗩИ✞ℍ⚙ИУ","postedTime":"2011-08-03T21:21:01.000Z","image":"http://a0.twimg.com/profile_images/3271229767/481419170edf2c639441ce43cd540f0e_normal.jpeg","summary":"I will see a Million Before I diee\nInstagram-Youngnrecklessss\nFollow me and ill follow back \nFuck what people think, stay real. ","links":[{"href":null,"rel":"me"}],"friendsCount":476,"followersCount":265,"listedCount":0,"statusesCount":2773,"twitterTimeZone":null,"verified":false,"utcOffset":null,"preferredUsername":"Devin_Giordan0","languages":["en"],"location":{"objectType":"place","displayName":"Brooklyn, Ny"}},"verb":"share","postedTime":"2013-02-21T05:50:15.000Z","generator":{"displayName":"Echofon","link":"http://www.echofon.com/"},"provider":{"objectType":"service","displayName":"Twitter","link":"http://www.twitter.com"},"link":"http://twitter.com/Devin_Giordan0/statuses/304468052219662336","body":"RT @julianneromero1: All I wanna do is make youuu happy ","object":{"id":"tag:search.twitter.com,2005:304448192165076993","objectType":"activity","actor":{"objectType":"person","id":"id:twitter.com:383846395","link":"http://www.twitter.com/julianneromero1","displayName":"julieeeeee","postedTime":"2011-10-02T16:35:38.000Z","image":"http://a0.twimg.com/profile_images/3259175129/bdd9337b0e266c851a471f7034ca319a_normal.jpeg","summary":"Old enough to know better, young enough to not give a fuck. ✊","links":[{"href":null,"rel":"me"}],"friendsCount":409,"followersCount":483,"listedCount":0,"statusesCount":18986,"twitterTimeZone":"Quito","verified":false,"utcOffset":"-18000","preferredUsername":"julianneromero1","languages":["en"]},"verb":"post","postedTime":"2013-02-21T04:31:20.000Z","generator":{"displayName":"Twitter for iPhone","link":"http://twitter.com/download/iphone"},"provider":{"objectType":"service","displayName":"Twitter","link":"http://www.twitter.com"},"link":"http://twitter.com/julianneromero1/statuses/304448192165076993","body":"All I wanna do is make youuu happy ","object":{"objectType":"note","id":"object:search.twitter.com,2005:304448192165076993","summary":"All I wanna do is make youuu happy ","link":"http://twitter.com/julianneromero1/statuses/304448192165076993","postedTime":"2013-02-21T04:31:20.000Z"},"twitter_entities":{"hashtags":[],"urls":[],"user_mentions":[]}},"twitter_entities":{"hashtags":[],"urls":[],"user_mentions":[{"screen_name":"julianneromero1","name":"julieeeeee","id":383846395,"id_str":"383846395","indices":[3,19]}]},"retweetCount":5,"gnip":{"matching_rules":[{"value":"Happy","tag":null}],"klout_score":42,"language":{"value":"en"}}} {"id":"tag:search.twitter.com,2005:304468052492300288","objectType":"activity","actor":{"objectType":"person","id":"id:twitter.com:1192574623","link":"http://www.twitter.com/Krystlegtsi","displayName":"Tracee Pavlik","postedTime":"2013-02-18T09:14:11.000Z","image":"http://a0.twimg.com/profile_images/3271765828/92aae4995378723671641594159a6ad7_normal.jpeg","summary":null,"links":[{"href":"http://tinyurl.com/b23r4ee","rel":"me"}],"friendsCount":20,"followersCount":0,"listedCount":0,"statusesCount":4,"twitterTimeZone":null,"verified":false,"utcOffset":null,"preferredUsername":"Krystlegtsi","languages":["en"]},"verb":"post","postedTime":"2013-02-21T05:50:15.000Z","generator":{"displayName":"web","link":"http://twitter.com"},"provider":{"objectType":"service","displayName":"Twitter","link":"http://www.twitter.com"},"link":"http://twitter.com/Krystlegtsi/statuses/304468052492300288","body":"It was an Amazing event tonight ...and makes me happy to see the president is educated speaks English Mashallah.","object":{"objectType":"note","id":"object:search.twitter.com,2005:304468052492300288","summary":"It was an Amazing event tonight ...and makes me happy to see the president is educated speaks English Mashallah.","link":"http://twitter.com/Krystlegtsi/statuses/304468052492300288","postedTime":"2013-02-21T05:50:15.000Z"},"twitter_entities":{"hashtags":[],"urls":[],"user_mentions":[]},"retweetCount":0,"gnip":{"matching_rules":[{"value":"Happy","tag":null}],"language":{"value":"en"}}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T08:10:58.073

看来您在 rsult 字符串的**displayName中有非 UTF 字符**

对于 JSON 编码/解码函数，您应该只使用 UTF 字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T05:43:24.393

1.  检查内容`$content`
2.  如果内容在那里，则检查 ( `print_r($arr)`)，检查结构并根据它打印。

# c# - 实现某些运算符的对象的 .NET 接口/约束

> ID：14995351
> 
> 赞同：3
> 
> 时间：2013-02-21T05:39:41.007
> 
> 标签：c#, .net, generics, operators, operator-overloading

我正在制作一个泛型方法，想知道是否有某种方法可以向泛型类型添加约束`T`，例如`T`具有特定运算符，如 +、+=、-、-= 等。

```
public void TestAdd<T>(T t1, T t2)
{
    return t1 + t2;
} 
```

产生以下错误文本：

```
Operator '+' cannot be applied to operands of type 'T' and 'T' 
```

我在 Google/SO 上搜索了一段时间，并没有真正找到任何相关的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T05:44:42.347

我认为这是做不到的

您可以通过以下方式减少花哨：

```
interface IAddable { void Add(object item); }
...
public void TestAdd<T>(T t1, T t2) where T : IAddable
{
   return t1.Add(t2);
} 
```

# java - 多线程 - 共享数据

> ID：14995352
> 
> 赞同：2
> 
> 时间：2013-02-21T05:39:47.523
> 
> 标签：java, multithreading

我在一次采访中被问到以下问题。

> 有一个对象被多个线程共享。该对象具有以下功能。你如何确保不同的线程可以同时为不同的参数 x 值执行函数？如果两个线程以相同的 x 值执行，则其中一个线程应该被阻塞。

```
public void func(String x){
-----
} 
```

“synchronized”关键字在这种情况下不起作用，因为它会确保一次只能执行一个线程。请让我知道这将是什么解决方案

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T05:44:24.080

首先想到的是

```
public void func(String x){
    synchronized (x.intern()) {
        // Body here
    }
} 
```

这将像描述的那样运行；当然，这感觉像是一种讨厌的 hack，因为正在同步的对象是公开可访问的，因此其他代码可能会干扰锁定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T05:47:55.990

创建一个 HashMap 作为成员变量。

```
private HashMap<String,Lock> lockMap = new HashMap<String,Lock>();
public void func(String x){
    if(lockMap.get(x) == null){
        lockMap.put(x,new ReentrantLock());
    }  
    lockMap.get(x).lock(); 
    ...
    ...  
    lockMap.get(x).unlock(); 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T06:01:40.867

可能面试官对 Ernest Friedman-Hill 提出的解决方案很感兴趣。但是，由于它的缺点，它通常不能在生产代码中使用。一旦我编写了以下同步实用程序来处理这个问题：

```
package com.paypal.risk.ars.dss.framework.concurrent;

import java.util.concurrent.ConcurrentHashMap;
import java.util.concurrent.locks.ReentrantLock;

public class MultiLock <K>{
    private ConcurrentHashMap<K, ReentrantLock> locks = new ConcurrentHashMap<K, ReentrantLock>();  

    /**
     * Locks on a given id.
     * Make sure to call unlock() afterwards, otherwise serious bugs may occur.
     * It is strongly recommended to use try{ }finally{} in order to guarantee this.
     * Note that the lock is re-entrant. 
     * @param id The id to lock on
     */
    public void lock(K id) {
        while (true) {
            ReentrantLock lock = getLockFor(id);
            lock.lock();
            if (locks.get(id) == lock)
                return;
            else // means that the lock has been removed from the map by another thread, so it is not safe to
                 // continue with the one we have, and we must retry.
                 // without this, another thread may create a new lock for the same id, and then work on it.
                lock.unlock();
        }
    }

    /**
     * Unlocks on a given id.
     * If the lock is not currently held, an exception is thrown.
     *  
     * @param id The id to unlock
     * @throws IllegalMonitorStateException in case that the thread doesn't hold the lock
     */
    public void unlock(K id) {
        ReentrantLock lock = locks.get(id);
        if (lock == null || !lock.isHeldByCurrentThread())
            throw new IllegalMonitorStateException("Lock for " + id + " is not owned by the current thread!");
        locks.remove(id);
        lock.unlock();
    }

    private ReentrantLock getLockFor(K id) {
        ReentrantLock lock = locks.get(id);
        if (lock == null) {
            lock = new ReentrantLock();
            ReentrantLock prevLock = locks.putIfAbsent(id, lock);
            if (prevLock != null)
                lock = prevLock;
        }
        return lock;
    }
} 
```

请注意，它可以通过简单的映射和全局锁以更简单的方式实现。但是，我想避免全局锁，以提高吞吐量。

# css - 在图像中居中数字（导轨）

> ID：14995354
> 
> 赞同：0
> 
> 时间：2013-02-21T05:40:07.610
> 
> 标签：css, ruby-on-rails

我希望数字在我使用的图像中居中。目前，该数字仅作为一个数字看起来不错，但在三位数时它会留下背景图像。

![在此处输入图像描述](../Images/e172b18e648ec2ab777cec715c8f5c2a.png)![在此处输入图像描述](../Images/1df2b4c0d5d648247d1e4169c9073b20.png)

红宝石：

```
 <%= image_tag("chat-bubble-icon.png", id: "comment_bubble") %> 
 <%= micropost.comments.count %> 
```

CSS：

```
#comment_bubble {
  margin-left: 18px;
  margin-right: -20px;
} 
```

解决方法是去掉图片标签，用css设置为comment.count的背景

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T05:51:45.823

像这样的东西

```
.comment_count{
 background: bubble.png;
 height: 100px;
 line-height:100px;
 width: 100px;
 text-align:center;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T05:43:28.043

如果没有看到更多的 CSS 和生成的 HTML，很难说清楚。

但是，您应该能够使用

`margin:0 auto;`

并删除

```
margin-left: 18px;
margin-right: -20px; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T05:50:54.117

尝试：

```
#comment_bubble {
  margin: auto;
} 
```

# java - 从 InputStream 创建的 ZipArchiveInputStream，无法读取内容

> ID：14995356
> 
> 赞同：1
> 
> 时间：2013-02-21T05:40:19.250
> 
> 标签：java, apache, apache-commons, apache-commons-compress

工作代码：

```
InputStream is  = zipFile.getInputStream(zipArchiveEntry);
BufferedReader br = new BufferedReader(new InputStreamReader(zis));
StringBuilder sb = new StringBuilder();

String line;
while ((line = br.readLine()) != null) {
      System.out.println(line);
} 
```

不工作的代码

```
 InputStream is  = zipFile.getInputStream(zipArchiveEntry);

    ZipArchiveInputStream zis = new ZipArchiveInputStream(is);
    if(zis.canReadEntryData(zipArchiveEntry)) {
            // Start
        BufferedReader br = new BufferedReader(new InputStreamReader(zis));
        StringBuilder sb = new StringBuilder();
        String line;
        while ((line = br.readLine()) != null) {
                System.out.println(line);
        } 
} 
```

想法不是从 InputStream 中读取，而是尝试从 InputStream 创建 ZipArchiveInputStream，以便我可以利用 canReadEntryData() 方法。canReadEntryData() 工作得很好。它对普通文件返回 true，但我无法从 ZipArchiveInputStream 读取内容。

请帮忙。请指出我哪里出错了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T06:19:23.200

**[`ZipArchiveInputStream`](http://commons.apache.org/compress/apidocs/org/apache/commons/compress/archivers/zip/ZipArchiveInputStream.html)对比[`ZipFile`](http://commons.apache.org/compress/apidocs/org/apache/commons/compress/archivers/zip/ZipFile.html)**

`ZipArchiveInputStream`正如官方[文档](http://commons.apache.org/compress/zip.html)所述，它似乎有一些限制：

> ZIP 档案按顺序存储档案条目，并在档案的最后包含所有条目的注册表。档案可以包含多个同名条目，并让注册表（称为中央目录）决定实际使用哪个条目（如果有）。
> 
> 此外，ZIP 格式仅在中央目录中存储某些信息，而不是与条目本身一起存储，这是：
> 
> *   内部和外部属性
> *   不同或额外的额外字段
> 
> 这意味着在读取不可搜索的流时，ZIP 格式无法真正正确解析，这`ZipArchiveInputStream` 是被迫做的。因此`ZipArchiveInputStream`
> 
> *   可能会返回根本不属于中央目录的条目，不应将其视为存档的一部分。
> *   可能会返回多个具有相同名称的条目。
> *   不会返回内部或外部属性。
> *   可能会返回不完整的额外字段数据。
> 
> `ZipArchiveInputStream`与 共享这些限制 `java.util.zip.ZipInputStream`。
> 
> `ZipFile`能够首先读取中央目录并提供有关任何 ZIP 存档的正确和完整信息。
> 
> ZIP 存档知道一个称为数据描述符的功能，它是一种在条目数据之后存储条目长度的方法。只有在可以从中央目录获取大小信息或数据本身可以发出完整的信号时，这才能可靠地工作，这对于使用 DEFLATED 压缩算法压缩的数据是正确的。
> 
> `ZipFile`可以访问中央目录，并且可以使用数据描述符可靠地提取条目。`ZipArchiveInputStream`只要条目是 DEFLATED，也是如此 。对于 STORED 条目`ZipArchiveInputStream`，可以尝试提前读取，直到找到下一个条目，但这种方法不安全，必须由构造函数参数显式启用。

结论：

> 如果可能的话，你应该总是更`ZipFile`喜欢`ZipArchiveInputStream`.

我相信，`ZipFile`上面这句话的意思是使用`InputStream`created using a `ZipFile`：

`InputStream is = zipFile.getInputStream(zipArchiveEntry);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T06:31:10.703

我认为此代码示例将帮助您使用 commons compress 阅读 Zip

```
 ZipFile zipFile = new ZipFile("C:\\test.zip");
            byte[] buf = new byte[65536];
            Enumeration<?> entries = zipFile.getEntries();
            while (entries.hasMoreElements()) {
                ZipArchiveEntry zipArchiveEntry = (ZipArchiveEntry) entries.nextElement();
                int n;
                InputStream is = zipFile.getInputStream(zipArchiveEntry);
                ZipArchiveInputStream zis = new ZipArchiveInputStream(is);
                if (zis.canReadEntryData(zipArchiveEntry)) {
                    while ((n = is.read(buf)) != -1) {
                        if (n > 0) {
                            System.out.println(new String(buf));
                        }
                    }
                }
                zis.close();
            } 
```

# python - 创建许多类并能够引用它们

> ID：14995358
> 
> 赞同：0
> 
> 时间：2013-02-21T05:40:22.763
> 
> 标签：python, pyglet

我正在用 Python 和 Pyglet 开发简单的游戏。我想给射击的可能性，所以我创建了一个子弹类。例如，如果我创建该类的一个实例，
`self.new_bullet = bullet()`
我现在只能拥有一个实例。我的问题是如何同时创建多个实例并能够引用它们及其变量？示例代码（带有伪代码）：

```
if key pressed:
    self.new_bullet = bullet()

... somewhere in main loop ...
bullet_image.blit(new_bullet.x, new_bullet.y)
self.new_bullet.x += 5

class bullet:
    def __init__(self):
        self.pos_x = player.pos_x
        self.pos_y = player.pos_y 
```

那么我应该如何根据玩家的意愿创建尽可能多的子弹，并且仍然能够为他们提供速度并更新他们在屏幕上的位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T03:41:29.330

您可能还希望将您的子弹[`Sprites`](http://www.pyglet.org/doc/api/pyglet.sprite.Sprite-class.html)分组以[`Batch`](http://www.pyglet.org/doc/api/pyglet.graphics.Batch-class.html)更快[地执行](http://www.pyglet.org/doc/programming_guide/batched_rendering.html)（在大火的情况下）。`pyglet`文档[显示了它是如何完成](http://www.pyglet.org/doc/api/pyglet.sprite-module.html#rst-drawing-multiple-sprites)的：

```
batch = pyglet.graphics.Batch()

bullet_image = pyglet.image.load('bullet.png')
bullet_sprites = [] # I've changed the variable names to fitting our issue
for i in range(100):
  x, y = i * 10, 50
  bullet_sprites.append(pyglet.sprite.Sprite(bullet_image, x, y, batch=batch) 
```

`Batch`首先，创造一个新鲜的。接下来，实例化 100 个不同的`Sprite`对象，每个对象都充当一个非常适合容纳一颗子弹（或多个球，但我们假设这里有子弹）的容器。构造函数的每次调用都会`Sprite`传递一个对我们的可选引用`batch`，从而将所有新创建的子弹附加`Sprites`到子弹上`Batch`。

它的美妙之处在于课堂的`draw()`方法。`Batch`调用它时，会注意批次中每个子弹的 blitting。您不必自己调用每个 bullet`Sprite`的`draw()`方法，因为只需一次调用即可[更有效地完成此操作：](http://www.pyglet.org/doc/api/pyglet.graphics-module.html#rst-batches-and-groups)

```
@window.event
def on_draw():
  batch.draw() 
```

您会认识到，这个示例与@Xymotech 在第一个答案中给出的非常相似，它也填充了一个包含所有项目符号实例的列表。您仍然需要像这样的 Collection 结构来保留对您`Sprite`的 s 的引用，因为`Batch`没有函数可以返回附加到它的对象列表。

因此，您将坚持使用上一个答案中的解决方案，当然除了 Image blitting。
使用的另一个优点`Sprites`是您不必为`bullet`类配备自己的位置字段，因为您可以使用[对象的相应](http://www.pyglet.org/doc/api/pyglet.sprite.Sprite-class.html#position)[参数`Sprite`](http://www.pyglet.org/doc/api/pyglet.sprite.Sprite-class.html#position)。除了允许更新其`(x, y)`坐标外，`Sprites`还可以[旋转](http://www.pyglet.org/doc/api/pyglet.sprite.Sprite-class.html#rotation)和[淡出](http://www.pyglet.org/doc/api/pyglet.sprite.Sprite-class.html#opacity)。

实际上，您应该考虑通过[继承](http://docs.python.org/2/tutorial/classes.html#inheritance)`bullet`来将您的类修改为该类的扩展。`Sprite`

```
class Bullet(pyglet.sprite.Sprite): # btw, class names usually start with an Uppercase letter
  def __init__(self):
    super(pyglet.sprite.Sprite, self).__init__()
    self.x = player.pos_x
    ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T05:44:23.830

我认为您想要一个子弹对象列表。然后，您可以使用添加到列表中`append`，并且在主循环期间，您可以使用循环遍历所有这些`for`。

```
self.bullets = []
self.bullets.append(bullet())
self.bullets.append(bullet()) 
```

在你的主循环中：

```
for bullet in self.bullets:
    bullet_image.blit(bullet.x, bullet.y)
    bullet.x += 5 
```

# java - java中如何将字符串拆分为长度为10的数组？

> ID：14995360
> 
> 赞同：0
> 
> 时间：2013-02-21T05:40:51.553
> 
> 标签：java, regex, arrays, string, split

```
5163583,601028,30,,0,"Leaflets, samples",Cycle 5 objectives,,20100804T071410, 
```

如何将字符串变成长度为10的数组？我预计数组是：

```
array[0]="5163583";
array[1]="601028";
array[2]="30";
array[3]="";
array[4]="0";
array[5]="Leaflets, samples";
array[6]="Cycle 5 objectives";
array[7]="";
array[8]="20100804T071410";
array[9]=""; 
```

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T06:01:09.407

您正在寻找 CSV 阅读器。您可以使用[opencsv](http://opencsv.sourceforge.net/)。

使用 opencsv 库：

```
new CSVReader(new StringReader(inputString)).readNext() 
```

它返回一个列值数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T05:42:01.923

```
String string = 
    "5163583,601028,30,,0,\"Leaflets, samples\",Cycle 5 objectives,,20100804T071410,";

Matcher m = Pattern.compile ("(\"[^\"]*\"|[^,\"]*)(?:,|$)").matcher (string);

List <String> chunks = new ArrayList <String> ();
while (m.find ())
{
    String chunk = m.group (1);
    if (chunk.startsWith ("\"") && chunk.endsWith ("\""))
        chunk = chunk.substring (1, chunk.length () - 1);
    chunks.add (chunk);
}

String array [] = chunks.toArray (new String [chunks.size ()]);
for (String s: array)
    System.out.println ("'" + s + "'"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T06:13:51.403

```
String sb = "5163583,601028,30,,0,\"Leaflets, samples\",Cycle 5 objectives,,20100804T071410,";

String[] array = new String[10];
StringBuilder tmp = new StringBuilder();
int count=0;
for(int i=0, index=0; i<sb.length(); i++)
{
    char ch = sb.charAt(i);
    if(ch==',' && count==0)
    {
        array[index++] = tmp.toString();
        tmp = new StringBuilder();
        continue;
    }
    else if(ch=='"')
    {
        count = count==0 ? 1 : 0;
        continue;
    }

    tmp.append(ch);
}
for(String s : array)
    System.out.println(s); 
```

# java - 单例提供者与常规提供者

> ID：14995363
> 
> 赞同：0
> 
> 时间：2013-02-21T05:41:13.163
> 
> 标签：java, dependency-injection, singleton, provider

我正在尝试（第一次）使用依赖注入来构建令牌。我有一个菱形层次结构问题，我需要将我的数据的签名哈希添加到实际数据本身。

结果，我发现自己多次在原始数据提供者上调用 get()。这很好，但在图表的下方，有基于时间的组件，因此，后续调用返回的数据是不同的。

建议使用 Singleton Provider 模型的解决方案。对于此 Provider，对 get() 的后续调用返回相同的对象（引用）。此 Provider 缓存第一次调用 get() 的结果并不断返回该结果。在注入依赖项时，我两次注入此提供程序的同一个实例，结果它两次返回相同的数据。

这让我想到，有没有什么情况你不想使用 Singleton Provider？如果你期待不同的结果，不应该每次都创建一个新的 Provider 实例吗？

```
public MyUnderscoreStringSingletonProvider implements Provider<String>
{
    private final Provider<String> mySomeOtherStringProvider;
    private String myCachedString;

    public MyUnderscoreStringSingletonProvider( 
        Provider<String> someOtherStringProvider )
    {
        mySomeOtherStringProvider = someOtherStringProvider;
        myCachedString = null;
    }

    @Override
    public String get()
    {
        if( myCachedString == null )
        {
            myCachedString = create();
        }
        return myCachedString;
    }

    private String create()
    {
        return "_" + mySomeOtherStringProvider.get();
    }
}

// ...

public class SomeCoolService
{
    // ...

    public Provider<String> injectStringDoubler()
    {
        final Provider<String> stringProvider = 
            injectUnderScoreStringProvider();
        return new TwoConcatendatedStringsProvider(
            stringProvider,
            stringProvider );
        // This would not work if Singleton Provider was not used.
        // Why should we ever use non-Singleton Providers?
    }

    protected Provider<String> injectUnderScoreStringProvider()
    {
        return new MyUnderscoreStringSingletonProvider(
            injectMyTimebasedStringProvider() // returns different result
                                              // depending
                                              // on time.
            );
    }

    // ...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T21:38:10.690

初始化对象有两种方法，一种是从头开始创建它。另一种是将现有对象重置为其初始状态。

最终，就像软件开发中的许多其他事情一样，它归结为对所涉及的成本的估计。

单例很容易实现，并且在大多数情况下提供了一种资源高效的解决方案，但是它们不能在非线程安全的条件下使用。例如，SimpleDateFormat 作为单例将提供“随机”错误。

对象池在这些情况下很有用遵循正常的对象创建/销毁流程是更好的方法。

# php - 在字符串中搜索单词以进行完全匹配/即使以该单词开头也不起作用

> ID：14995365
> 
> 赞同：1
> 
> 时间：2013-02-21T05:41:40.493
> 
> 标签：php, cakephp-2.0

我有一个 id 和一个文本字段。

我需要搜索一个完全匹配的单词或以单个 mysql 查询的字符串中的单词开头。

例如`select * from tablename where textfield like "%cam%.` ，这将返回 cam 在单曲中的任何位置找到的所有文本 id。

但我需要通过在一个句子中拆分单个单词来获得可以查询的结果。

标识文本

```
1 Camel_walk.
2 camel does drink water.
3 does Camel_store water.
4 In deset people can find_camel
5 this will not return 
```

当我查询 `select * from tablename where textfield like "%camel%.` 返回前 1,2,3,4

但我需要得到单词以camel开头的id

```
1)select * from tablename where textfield like "Camel%"
return 1,3 ( which is not working for me)
or even
2)select * from tablename where textfield like "%Camel"
return 4 
```

这两个查询不起作用可以有人帮忙吗

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T06:14:55.637

当您在类似 SQL 的查询中使用骆驼（正确）大小写时，字符串将找到字符串的区分大小写匹配，但是，“骆驼”和“骆驼”将寻找骆驼/骆驼/骆驼......等等（不区分大小写匹配）

`select id from tablename where text like "%Camel%"`将返回 1,3。

`select id from tablename where text like "%camel"`将返回 4。

`select id from tablename where text like "%camel%"`将返回 1,2,3,4。

`select id from tablename where text like "Camel%"`将返回 1。

`select id from tablename where text like "camel%"`将返回 1,2。

`select id from tablename where text like "camel %"`（“camel”和“%”之间的空格）将返回 2。

注意字符串大小写的区别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T05:49:40.630

```
select * from tablename where textfield like "Camel%" or textfield like ' %Camel' 
```

注意`%`第二个条件之前的空格。当字符串中的任何单词以开头时，这两个条件都会匹配`Camel`，无论它是否是第一个单词。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T11:53:52.130

用户匹配

$conditions[]=array("MATCH(MODEL_name.fieldname) AGAINST('$text' IN BOOLEAN MODE)");

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T05:56:21.203

这应该适用于所有情况

```
SELECT id
  from tablename
 WHERE textfield like '%[^A-z^0-9]Camel%' -- In the middle of a sentence
    OR textfield like 'Camel%'            -- At the beginning of a sentence 
```

# xcode - Mac - 开发人员 ID - 代码签名 - 签署了什么？

> ID：14995370
> 
> 赞同：3
> 
> 时间：2013-02-21T05:42:13.087
> 
> 标签：xcode, bundle, code-signing

我正在使用 Xcode 4.6、10.8.2。

当我在 Xcode 中对我的 Cocoa 应用程序进行代码签名时，作为导出过程的一部分，实际代码签名的是什么？它只是可执行文件吗？

签名后，我可以安全地修改捆绑包资源文件夹中的文件吗？

谢谢。

[编辑]

好的，感谢下面的建议，这就是我正在做的......

将**ResourceRules.plist**添加到项目中（如果需要，每个 Target 一个）

使用“省略”键值对列表填充 ResourceRules.plist，每个文件或目录对应一个您不想进行代码签名的文件或目录。从网上某处复制 plist 结构。

在目标的构建设置中，在“代码签名资源规则路径”下，添加字符串“ResourceRules.plist”（不带引号）

选择“产品”->“存档”

在管理器窗口中，按“分发”

选择“导出开发者 ID 签名的应用程序”

使用您的开发者 ID 进行代码设计

在 Finder 中打开生成的应用程序包，根据需要修改文件

在终端中测试应用程序：

```
codesign -vv myApp 
```

（这将告诉您是否缺少或已添加任何代码签名文件。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T05:46:09.230

> 它只是可执行文件吗？

可执行文件实际上被修改为包含代码签名信息（哈希和可能的权利文件），但代码签名目录 ( `_CodeSignature`) 也被添加到包含应用程序中所有文件的哈希的应用程序包中。

> 签名后，我可以安全地修改捆绑包资源文件夹中的文件吗？

不。（好吧，是的，如果您之后再次对其进行代码签名。）

或者，实际上，如果您使用资源文件来描述要用于创建代码签名的文件，那么您可以排除某些文件，然后您可以稍后修改它们并且仍然具有有效的代码签名。

# python - 在 Python 中，如何拆分 .txt 文件并将我想要的部分存储在列表中？

> ID：14995374
> 
> 赞同：1
> 
> 时间：2013-02-21T05:42:48.147
> 
> 标签：python, string, list, text, split

我对编码很陌生，我在 SO 上看到了一些类似的问题，但没有一个真正解决了我的问题。我开始这是一个学习练习，认为这将是一项相对容易的任务，但我遇到的麻烦比我想象的要多。

如果我有一个 .txt 文档，其中有几种情况会发生这种情况：

> 以下答案是可以接受的：
> caía

我试图弄清楚如何拆分字符串并将答案添加到列表中。

如果我只处理一个字符串，它会变成这样吗？

```
 txt = """
    The following answer is acceptable: 
    caía

    more stuff down here...
    """
    list = []
    try = txt.split(": ") # I know this is wrong...  
    # How can I get from the colon (or newline) to the end of the answer?
    list.append(try) 
```

我真的不知道如何从答案的开头抓取到答案的结尾并将其放入列表中。为了让它更复杂（至少对我来说），因为我正在使用一个带有 6 或 7 个这样的答案的 .txt 文件，我需要弄清楚如何将所有答案添加到列表中。我猜我需要某种循环？使用 txt.readlines 逐行分割？或者我目前不熟悉的东西......

此外，我的计划是经常切换 .txt 文件中的不同文本集。语法将始终保持不变，但答案的数量会有所不同，所以我知道我需要弄清楚如何让程序识别有 n 个答案，并且它应该将所有答案添加到那个我正在谈论的列表，直到它到达文档的末尾。

我知道这个网站对问题非常严格，所以我认为我遵守了所有规则。我只是在学习这些东西，它真的触动了我的激情。我真的没有任何有经验的人可以学习，从书本中学习给我留下了很多问题。我希望这没问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T05:55:37.773

你把问题复杂化了。看起来您想要做的是识别一行何时以冒号结尾，如果是，则将值存储在下一行中。

```
txt = """
The following answer is acceptable: 
caía

more stuff down here...
"""
results = []

chopped_up_text = txt.split('\n')
for i, line in enumerate(chopped_up_text):
    if line[-1]==":" :
        results.append(chopped_up_text[i+1]) 
```

这有点不雅，但它有效。

编辑：关于具有多个枚举答案的问题：

```
txt = """
The following answer is acceptable:
answer1
answer2
answer3

more stuff down here...
"""
results = []

chopped_up_text = txt.split('\n')
n=0
while chopped_up_text:    
    line = chopped_up_text.pop(0)
    try:
        if line.strip()[-1]==":" :
            line = chopped_up_text.pop(0)
            while line not in ("\n", "", " ", None): 
                results.append(line)
                line = chopped_up_text.pop(0)
    except:
        continue 
```

晚了。这段代码应该更漂亮。但你明白了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T06:37:31.553

假设答案之前的那一行只是单行

```
lines = [line.strip() for line in open('some.txt')]
nlines=[]
for line in lines:
    if line[-1]==':': 
        nlines.append(':'+line)
    else:
        nlines.append(line)
total="\n".join(nlines)
temp=total.split(':')
answers=temp[2::2]
for ans in answers:print ans 
```

一些.txt

```
first answer:
first line 1
second line 1
third line 1
second answer:
first line 2
secon line 2
third line 2
third answer:
first 3
second 3
third 3
fourth answer:
first 4
second 4
third 4
fourth 4 
```

输出

```
first line 1
second line 1
third line 1

first line 2
secon line 2
third line 2

first 3
second 3
third 3

first 4
second 4
third 4
fourth 4 
```

# android - 从用户的声音中获取幅度

> ID：14995388
> 
> 赞同：-2
> 
> 时间：2013-02-21T05:44:31.807
> 
> 标签：android, audio, record, microphone

如何检测用户语音的幅度？只需检测用户是否说话。AudioRecorder、MediaRecorder、Audio Capture 有什么区别？请给我一个完整的解释和代码

我从教程中尝试了这个类，但它在“mRecorder.prepare():”中有错误

```
import android.media.MediaRecorder;

 public class SoundMeter {
    static final private double EMA_FILTER = 0.6;

    private MediaRecorder mRecorder = null;
    private double mEMA = 0.0;

    public void start() {
            if (mRecorder == null) {
                    mRecorder = new MediaRecorder();
                    mRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
                    mRecorder.prepare();
                mRecorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
                mRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
                mRecorder.setOutputFile("/dev/null"); 

                mRecorder.start();
                mEMA = 0.0;
            }
    }

    public void stop() {
            if (mRecorder != null) {
                    mRecorder.stop();       
                    mRecorder.release();
                    mRecorder = null;
            }
    }

    public double getAmplitude() {
            if (mRecorder != null)
                    return  (mRecorder.getMaxAmplitude()/2700.0);
            else
                    return 0;

    }

    public double getAmplitudeEMA() {
            double amp = getAmplitude();
            mEMA = EMA_FILTER * amp + (1.0 - EMA_FILTER) * mEMA;
            return mEMA;
    } 
```

}

更新我的第二次尝试

```
 public class MainActivity extends Activity {

 static final private double EMA_FILTER = 0.6;
private MediaRecorder mRecorder = null;
private double mEMA = 0.0;
TextView tv;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

      mRecorder = new MediaRecorder();
      mRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);

      mRecorder.start();
      mEMA = 0.0;

     tv = (TextView) findViewById(R.id.textView1);
    double a = getAmplitude();
    tv.setText(String.valueOf(a));
    new Timer().schedule(new TimerTask() {

        @Override
        public void run() {
            // TODO Auto-generated method stub
            down();
        }
    }, 500, 10);

}
public void down() {
    this.runOnUiThread(Update);
}
private Runnable Update=new Runnable() {

    @Override
    public void run() {
        // TODO Auto-generated method stub
        double a = getAmplitude();
        tv.setText(String.valueOf(a));
    }
};

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
public double getAmplitude() {
       if (mRecorder != null)
               return  (mRecorder.getMaxAmplitude());
       else
               return 0; 
```

} }

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T06:53:19.760

有几件事：

1.  您需要在 prepare() 语句*之前设置输出格式。*来自prepare()的[文档](http://developer.android.com/reference/android/media/MediaRecorder.html#prepare%28%29)：如果在之后或之前`IllegalStateException`调用它，则抛出`start()``setOutputFormat()`

2.  MediaRecorder.prepare() 也会抛出 IOException。您可能希望用 try/catch 构造包围 prepare()。

尝试：

```
if (mRecorder == null) {
    try {
        mRecorder = new MediaRecorder();
        mRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
        mRecorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
        mRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
        mRecorder.setOutputFile("/dev/null"); 

        mRecorder.prepare();
        mRecorder.start();
        mEMA = 0.0;
    }
    catch (IOException e) {
        //do something with e
    }
} 
```

# git - .gitignore 后切换分支并丢失 .gitinored 文件

> ID：14995389
> 
> 赞同：9
> 
> 时间：2013-02-21T05:44:31.073
> 
> 标签：git, version-control, github, git-branch, missing-data

我是 git 新手，如果这个问题已经得到解答，我很抱歉。我很难找到这个问题的答案。

我想忽略一组以前从未提交过的文件进行提交，并使用 github 应用程序选择它们并忽略它们。我切换到另一个分支一段时间，当我回到我的分支时，我忽略的文件不见了。

这些文件被删除了吗？

我使用 git checkout 切换回分支，然后使用 git status --ignored 。我丢失的文件不存在。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-07-05T20:54:03.417

您可以通过使用`git reflog --all`获取 SHA 代码来执行此操作，当 Github 应用程序在切换到另一个分支之前自动隐藏您忽略的文件时。请参阅[https://stackoverflow.com/a/8865242/2970321](https://stackoverflow.com/a/8865242/2970321)。

例如，我`/pr/364`使用应用程序 (SHA ) 获取了一个拉取请求 ( `2ba129d`)。在我切换回之前`gh-pages`，它隐藏了我忽略的文件（SHA `36edfc6`）。

![查找丢弃的存储的 SHA 代码](../Images/12035894781fc6d1313a1a4605c09636.png)

所以要恢复，我需要做的就是：

`git checkout 36edfc6`

我的文件神奇地重新出现了，我能够安全地将它们手动存放在其他地方，然后再切换回`gh-pages`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T18:39:34.243

`git`不会删除它不关心的文件，除非明确告知这样做（`checkout -f`在某些情况下通过签出或`clean`）。由于`git`对他们一无所知，它也无法恢复他们。`git stash`在四处走动和做可能有害的事情之前使用。仔细考虑哪些文件进入`.gitignore`，将*所有*非自动生成的文件添加到版本控制中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-04-05T11:30:37.393

看起来您忽略了 branch 中的文件`A`，然后切换到 branch`B`但没有忽略那里的文件。

如果您只忽略 branch 中的文件`A`而不忽略 branch 中的文件，那么当从 切换回`B`时它们会被删除。但是，如果您从 切换回 ，它们应该会重新出现。`B``A``A``B`

如果您从任何分支结帐`X`到`Y`，这是正常的 git 行为，所有不在分支中`Y`但在分支中的文件`X`都将被删除。如果一个文件在 中被忽略，`Y`但在 中没有`X`，那么你就有这种情况。

为了防止您的文件被删除，您可以将它们添加到`.gitignore`您其他分支的文件中`B`。

# .net - 如何停止默认的 SET 语句？

> ID：14995393
> 
> 赞同：0
> 
> 时间：2013-02-21T05:44:48.853
> 
> 标签：.net, sql, sql-server, tsql, ado.net

当我使用 ADO.Net 运行 SQL 探查器并发出查询时，我在 SQL 探查器中看到这些语句：

```
set quoted_identifier on
set arithabort off
set numeric_roundabort off
set ansi_warnings on
set ansi_padding on
set ansi_nulls on
set concat_null_yields_null on
set cursor_close_on_commit off
set implicit_transactions off
set language us_english
set dateformat mdy
set datefirst 7
set transaction isolation level read committed 
```

我从来没有在任何查询中写过这些语句。如何停止这些 Set 语句？SQL 服务器是否发出单独的请求只是为了设置这些 SET 语句？

两个问题：

1.  关闭所有这些 SET 语句会更好吗？如果是，那我该怎么做？

2.  这些 SET 的最佳设置是什么？我知道 arithabort 应该打开，因为它在大多数情况下都能提高性能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T08:12:33.843

这些是由您的客户端驱动程序设置的，因此将始终在您创建的新连接上设置。

1.  最好把所有这些都关掉。尽管这些是在您的连接打开时设置的，但这并不意味着您不能通过在连接上执行 set SQL 语句来覆盖它们，就像上面的那些。

2.  我会将 ARITHABORT 设置为 on，因为此设置选项是用于计算列和索引视图的索引的选项之一。如果您不是美国人，您可以更改日期格式/语言，但这并不重要，可以在登录级别完成。如果您不想使用 READ_COMMITTED 隔离，则可以更改此设置，尽管在大多数情况下这很好，因此它是默认设置。其余的看起来不错。

# c# - 如何在 windows Phone 7.1 中实现等待功能

> ID：14995397
> 
> 赞同：0
> 
> 时间：2013-02-21T05:45:22.850
> 
> 标签：c#, silverlight, windows-phone-7, windows-phone-7.1

我想使用来自客户端的 IP 地址连接到服务器。要获取我正在使用下面的代码的服务器的 IP 地址，它可以正确检测服务器，但我想在`HostEndPoint`事件处理程序设置变量后执行一些其他功能，直到我需要等待我该如何实现它？.. 下面用于扫描的代码是正确的方法吗？如果没有怎么办？

谢谢

```
int startIp = 0;
int EndIp = 255;
int HostPort = 4678;
string = ipPrefix = "192.168.1.";
EndPoint HostEndPoint;

private void ScanHosts()
        {

           Socket clientSocket = new Socket(AddressFamily.InterNetwork,   SocketType.Stream, ProtocolType.Tcp);

        for (startIP = 0; startIP <= endIP; startIP++)
        {
            DnsEndPoint endPoint = new DnsEndPoint(ipPrefix + startIP.ToString(), HostPort);

            try
            {
                SocketAsyncEventArgs socketEventArgs = new SocketAsyncEventArgs();
                socketEventArgs.RemoteEndPoint = endPoint;
                socketEventArgs.UserToken = clientSocket;
                socketEventArgs.Completed += new EventHandler<SocketAsyncEventArgs>(socketEventArgs_Connected);

                clientSocket.ConnectAsync(socketEventArgs);

            }
            catch { }

        }

    }

private void socketEventArgs_Connected(object sender, SocketAsyncEventArgs e)
        {
            if (e.SocketError == SocketError.Success)
            {
                HostEndPoint = e.RemoteEndPoint;                
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T06:49:05.500

您可以使用 AutoResetEvent 。FE 我的用法：

```
 AutoResetEvent autoResetLoadDiscTitleAndPersonalDataById = new AutoResetEvent(false);
                                    DataService.LoadDiscTitleAndPersonalDataById(titleToSync.id_on_server, titleInfoXML =>
                                    {
                                        Title TitleInfo = new Title(titleInfoXML);
                                        TitleInfo.UpdateToDb();
                                        autoResetLoadDiscTitleAndPersonalDataById.Set();
                                    });
                                    autoResetLoadDiscTitleAndPersonalDataById.WaitOne(); 
```

# android - 调用自定义适配器时找不到类异常

> ID：14995399
> 
> 赞同：0
> 
> 时间：2013-02-21T05:45:31.360
> 
> 标签：android, classnotfoundexception, custom-adapter

获取数据后，我的应用程序尝试通过调用自定义适配器来扩充 ListView 中的数据。充气时显示以下错误。

```
02-21 11:14:39.156: E/AndroidRuntime(499): java.lang.NoClassDefFoundError: com.daedalus.sarkarinaukriblog.CustomAdapter$1
02-21 11:14:39.156: E/AndroidRuntime(499):  at com.daedalus.sarkarinaukriblog.CustomAdapter.<init>(CustomAdapter.java:42)
02-21 11:14:39.156: E/AndroidRuntime(499):  at com.daedalus.sarkarinaukriblog.ListActivity$DownloadFeeds.onPostExecute(ListActivity.java:176)
02-21 11:14:39.156: E/AndroidRuntime(499):  at com.daedalus.sarkarinaukriblog.ListActivity$DownloadFeeds.onPostExecute(ListActivity.java:1)
02-21 11:14:39.156: E/AndroidRuntime(499):  at android.os.AsyncTask.finish(AsyncTask.java:417)
02-21 11:14:39.156: E/AndroidRuntime(499):  at android.os.AsyncTask.access$300(AsyncTask.java:127)
02-21 11:14:39.156: E/AndroidRuntime(499):  at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429)
02-21 11:14:39.156: E/AndroidRuntime(499):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-21 11:14:39.156: E/AndroidRuntime(499):  at android.os.Looper.loop(Looper.java:123)
02-21 11:14:39.156: E/AndroidRuntime(499):  at android.app.ActivityThread.main(ActivityThread.java:3683)
02-21 11:14:39.156: E/AndroidRuntime(499):  at java.lang.reflect.Method.invokeNative(Native Method)
02-21 11:14:39.156: E/AndroidRuntime(499):  at java.lang.reflect.Method.invoke(Method.java:507)
02-21 11:14:39.156: E/AndroidRuntime(499):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
02-21 11:14:39.156: E/AndroidRuntime(499):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
02-21 11:14:39.156: E/AndroidRuntime(499):  at dalvik.system.NativeStart.main(Native Method) 
```

我的后期执行代码：

```
protected void onPostExecute(Boolean result) {
            // TODO Auto-generated method stub
            //super.onPostExecute(result);  
            try {
                if(result) {
                    adapterCust = new CustomAdapter(ListActivity.this, values);
                    listView1.setAdapter(adapterCust); 
                    progress.dismiss();                  
                } else {
                    progress.dismiss();
                    Toast.makeText(ListActivity.this, "Error in fetching data", Toast.LENGTH_SHORT).show();
                }               
            } catch(Exception e) {
                Toast.makeText(ListActivity.this, "Error in fetching data", Toast.LENGTH_SHORT).show();
            }
        } 
```

我的工作适配器：

```
public class CustomAdapter extends BaseAdapter{
    Context context; 
    int layoutResourceId;    
    List<Map<String, String>> data = null;
    WeatherHolder holder = null;
    LruCache<String, Bitmap> mMemoryCache;

public CustomAdapter(Context context, List<Map<String, String>> data) {
    this.data = data;
    this.context = context;
    int maxMemory = (int) (Runtime.getRuntime().maxMemory() / 1024);
    // Use 1/8th of the available memory for this memory cache.
    int cacheSize = maxMemory / 8;

    mMemoryCache = new LruCache<String, Bitmap>(cacheSize){

    };
}

public void addBitmapToMemoryCache(String key, Bitmap bitmap) {
    if (getBitmapFromMemCache(key) == null) {
        mMemoryCache.put(key, bitmap);
    }
}

public Bitmap getBitmapFromMemCache(String key) {
    return mMemoryCache.get(key);
}

@Override
public View getView(int position, View convertView, ViewGroup parent){
    View row = convertView;
    LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    row = inflater.inflate(R.layout.listview_row, null);
    holder = new WeatherHolder();
    holder.imgIcon = (ImageView)row.findViewById(R.id.imgIcon);
    holder.txtTitle = (TextView)row.findViewById(R.id.txtTitle);
    holder.txtPubDate = (TextView)row.findViewById(R.id.txtPubDate);   
    holder.imgNext = (ImageView)row.findViewById(R.id.nextImg);
    row.setTag(holder);     
    holder.txtTitle.setText(getTitle(position));
    holder.txtPubDate.setText("Published Date : " + getPubDate(position));
    holder.imgNext.setColorFilter(Color.BLACK);
    Bitmap bm = getBitmapFromMemCache(String.valueOf(position));
    if( bm != null){
        holder.imgIcon.setImageBitmap(bm);
    }else {
          BitmapWorkerTask task = new BitmapWorkerTask(holder.imgIcon, position);
          task.execute(getUrl(position)); 
    }
    return row;
}

static class WeatherHolder
{
    ImageView imgIcon;
    TextView txtTitle;
    TextView txtPubDate;
    ImageView imgNext;
}

@Override
public int getCount() {
    // TODO Auto-generated method stub
    return data.size();
}

@Override
public Object getItem(int position) {
    // TODO Auto-generated method stub
    return data.get(position);
}

@Override
public long getItemId(int position) {
    // TODO Auto-generated method stub
    return position;
}

public String getTitle(int position) {
    Map<String, String> record = data.get(position);
    String title = record.get("title");
    return title;
}

public String getPubDate(int position) {
    Map<String, String> record = data.get(position);
    String pubdate = record.get("pubdate");
    return pubdate;
}

public String getDescription(int position) {
    Map<String, String> record = data.get(position);
    String description = record.get("description");
    return description;
}

public String getUrl(int position) {
    Map<String, String> record = data.get(position);
    String url = record.get("url");
    return url;
}

public String getactualUrl(int position) {
    Map<String, String> record = data.get(position);
    String acturl = record.get("actualURL");
    return acturl;
}

private class BitmapWorkerTask extends AsyncTask<String, Void, Bitmap> {
    private final WeakReference<ImageView> imageViewReference;
    private String url = null;
    private String key;
    public BitmapWorkerTask(ImageView imageView, int position) {
        // Use a WeakReference to ensure the ImageView can be garbage collected
        imageViewReference = new WeakReference<ImageView>(imageView);   
        this.key = String.valueOf(position); 
    }

    // Decode image in background.
    @Override
    protected Bitmap doInBackground(String... params) {
        url = params[0];
        return loadBitmap(url);
    }

    // Once complete, see if ImageView is still around and set bitmap.
    @Override
    protected void onPostExecute(Bitmap bitmap) {
        if (imageViewReference != null && bitmap != null) {
            final ImageView imageView = imageViewReference.get();
            if (imageView != null && imageView.isShown()) {
                Animation anim = AnimationUtils.loadAnimation(context, android.R.anim.fade_in);
                imageView.setAnimation(anim);
                imageView.setImageBitmap(bitmap); 
                anim.setDuration(5000);
                anim.start();
                addBitmapToMemoryCache(key, bitmap);
            }
        }
    }

    public Bitmap loadBitmap(String url) {
        Bitmap bm = null;
        try {
            URL aURL = new URL(url);
            URLConnection conn = aURL.openConnection();
            conn.connect();
            InputStream is = conn.getInputStream();
            BufferedInputStream bis = new BufferedInputStream(is);
            bm = BitmapFactory.decodeStream(bis);
            bis.close();
            is.close();
       } catch (Exception e) {
          // Log.e(TAG, "Error getting bitmap", e);
       }

            return bm;
        }
    }   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T05:48:49.097

清理您的项目，这可能会解决问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-04T11:34:41.877

在添加**com.handlerexploit.prime.widgets.RemoteImageView**而不是 ImageView 之后，它的适配器类给出了 classNotFound 异常并知道如何解决这个问题？

# wcf - 在 WCF 服务中支持二维数组

> ID：14995404
> 
> 赞同：1
> 
> 时间：2013-02-21T05:46:11.320
> 
> 标签：wcf, c#-4.0, vba, excel, multidimensional-array

我需要将一个二维数组从 VBA (excel) 传递给 WCF 服务。WCF 服务在其操作合同中不支持二维数组。任何人都可以为此提出一些替代方案，例如，

[VBA]

```
ReDim Data(nCol, row) As String 
```

该数组是 VBA 中的动态数组，其中插入了值。我想在 WCF Service 中传递这个二维数组。

```
Dim WCFSvcObj As Object
Set WCFSvcObj = GetObject(WcfServiceAddress)
WCFSvcObj.SendData(data, nCol, row) 
```

[WCF]

```
[operationContract]
void Senddata(string[,] data, nCol, row) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:52:30.117

尝试使用锯齿状数组

[操作合同] void Senddata(string[][] data, nCol, row)

它由 WCF 支持

# django - 如何使用ajax jquery访问在视图中的发布请求上完成的表单数据

> ID：14995407
> 
> 赞同：1
> 
> 时间：2013-02-21T05:46:42.387
> 
> 标签：django

我试图找出将帖子数据发送到 Django View 函数的最佳方法。

我目前在我的 jquery 代码中是这样的：

```
in the jquery:

function ajax_request(type) {
 var a="{{parameter}}";
  alert(type);
  var frm = $('#form1');
  form_data=frm.serialize();
  alert(form_data);
  $.ajax({
    type : type,

    data: form_data,
    url : geturl(a),

    dataType : 'json',

)} 
```

我已经编写了一个名为 ajax_request 的函数。我只需要在我的视图中访问我在 jquery 中检索到的数据。我怎么能在我的观点中得到它。

```
 function event_page_load() {
alert("hi");
  ajax_request('GET')
   }

  function click_submit_button() {
  ajax_request('POST')
  }

  function ajax_request(type) {
   var a="{{parameter}}";
   alert(type);
  var frm = $('#form1');
  form_data=frm.serialize();
  alert(form_data);

  $.ajax({
    type : type,

    data: form_data,
    url : geturl(a),

    dataType : 'json',

    error : function(result) {
         alert("error");
        // alert("Error occured!!");

    },

    success : function(result,data) 
    {
        alert("success");
        // alert("data");
        // $('#container').html(data);
        var chart = new Highcharts.Chart({

    chart: {
        renderTo: 'container',
        type: 'line',
            marginRight: 220,
            marginBottom: 75,
            marginLeft:100,
            marginTop:80

    },
    title: {
        marginTop:90,
        text: 'Power Consumption Vs Generator Consumption'
    },
    xAxis: {

        categories: result[0]

    },
    yAxis: {
        title: {
            text: 'Units Of Time'
        }
    },

    series: [{
        name: 'Truepower Consumed',
        data: result[1]},
    {
        name: 'Generator Consumed',
        data:result[2]}],
  });

        }

 })

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T05:51:26.717

您可以使用`$.post`

```
 $.post({
         geturl(a),
         { data: form_data, dataType : 'json' },
          // response handler 

}); 
```

例子 ：

```
 $.post()  
    $("#post").click(function(){  
        $("#result").html(ajax_load);  
        $.post(  
            loadUrl,  
            {language: "php", version: 5},  
            function(responseText){  
                $("#result").html(responseText);  
            },  
            "html"  
        );  
    }); 
```

[http://net.tutsplus.com/tutorials/javascript-ajax/5-ways-to-make-ajax-calls-with-jquery/](http://net.tutsplus.com/tutorials/javascript-ajax/5-ways-to-make-ajax-calls-with-jquery/)上提供了一个有用的教程

Django + AJAX 示例的完整列表可在[https://github.com/sivaa/django-jquery-ajax-exmaples获得](https://github.com/sivaa/django-jquery-ajax-exmaples)

# ios - 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“索引 0 部分中索引 2 处没有对象”

> ID：14995408
> 
> 赞同：3
> 
> 时间：2013-02-21T05:46:48.937
> 
> 标签：ios, core-data, nsfetchedresultscontroller, nsmanagedobject, nsmanagedobjectcontext

有一个使用 tableview 和 NSFetchedResultsController 的应用程序。我收到错误：由于未捕获的异常而终止应用程序' `NSInternalInconsistencyException`'，原因：' `no object at index 2 in section at index 0`'

.........对于给出错误的事物对象行。Project 是一个表，其中 displayOrder 是一个属性。

```
- (void)tableView:(UITableView *)tableView
moveRowAtIndexPath:(NSIndexPath *)sourceIndexPath
      toIndexPath:(NSIndexPath *)destinationIndexPath;
{
    NSMutableArray *things = [[fetchedResultsController fetchedObjects] mutableCopy];

    // Grab the item we're moving.
    NSManagedObject *thing = [[self fetchedResultsController] objectAtIndexPath:sourceIndexPath];

    // Remove the object we're moving from the array.
    [things removeObject:thing];
    // Now re-insert it at the destination.
    [things insertObject:thing atIndex:[destinationIndexPath row]];

    // All of the objects are now in their correct order. Update each
    // object's displayOrder field by iterating through the array.
    int i = 0;
    for (NSManagedObject *mo in things)
    {
        [mo setValue:[NSNumber numberWithInt:i++] forKey:@"displayOrder"];
    }

    //[things release], things = nil;

    [__managedObjectContext save:nil];
}

- (NSFetchedResultsController *)fetchedResultsController
{
    if (fetchedResultsController != nil) return fetchedResultsController;

    fetchRequest = [[NSFetchRequest alloc] init];
    entity = [NSEntityDescription entityForName:@"Project" inManagedObjectContext:[self managedObjectContext]];
    [fetchRequest setEntity:entity];

    NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"displayOrder" ascending:YES];
    NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sortDescriptor, nil];
    [fetchRequest setSortDescriptors:sortDescriptors];

    NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest
                                                                                                managedObjectContext:__managedObjectContext
                                                                                                  sectionNameKeyPath:nil cacheName:@"ThingsCache"];
    aFetchedResultsController.delegate = self;
    [self setFetchedResultsController:aFetchedResultsController];

    return fetchedResultsController;
} 
```

# flex4 - 滑动手势在 StageWebview 中不起作用

> ID：14995410
> 
> 赞同：2
> 
> 时间：2013-02-21T05:46:57.080
> 
> 标签：flex4, stagewebview

我正在 flex 4.6 中开发阅读器应用程序，并在 StageWebView 中显示我的内容。我在该视图中实现了滑动手势，但它不起作用。

当我在 StageWebView 下方“滑动”时，它工作正常，当我在 StageWebView 上“滑动”时，它无法识别它。

我的代码：

```
private function handleSwipe(event:TransformGestureEvent):void
{
trace('handleSwirpe()');
// Swipe was to the right
if (event.offsetX == 1 )
{ // or -1 for the left
webView.viewPort = null;
navigator.popView();
}
} 
```

我怎样才能做到这一点....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:56:42.533

如果您想在 StageWebView 中捕获滑动手势，您应该使用 javascript 方法来检测手势。这必须在您正在加载到 StageWebView 空间的页面中进行编码。

希望能帮助到你 ：）

# windows-phone-8 - 设置中的 Windows Phone 8 锁定屏幕超时选项

> ID：14995412
> 
> 赞同：1
> 
> 时间：2013-02-21T05:47:06.517
> 
> 标签：windows-phone-8, lockscreen

关于 Windows Phone 8 锁屏的几个问题：

1.  windows phone 8 模拟器在锁屏超时设置中有一个“从不”选项。为什么这个选项在实际的 Windows Phone 8 设备中不可用（我检查过诺基亚 Lumia 820 和 HTC 8S）？

2.  可以以编程方式设置锁定屏幕超时吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T09:20:04.187

它是可用的。这是HTC 8S（国际欧盟）

是的，您可以通过禁用 UserIdleDetection 来做到这一点。

样品和更多背景信息在这里。

[PhoneApplicationService.UserIdleDetectionMode 属性 (Microsoft.Phone.Shell)](http://msdn.microsoft.com/en-us/library/microsoft.phone.shell.phoneapplicationservice.useridledetectionmode%28v=VS.92%29.aspx)

[Windows Phone 的空闲检测](http://msdn.microsoft.com/en-us/library/ff941090%28v=VS.92%29.aspx)

![在此处输入图像描述](../Images/d1e28727eaba5d2df3b6d14ef69da2fa.png)

# android - android home键响应流程

> ID：14995413
> 
> 赞同：0
> 
> 时间：2013-02-21T05:47:08.210
> 
> 标签：android

关于android4.2上的android HOME键有一些问题！

*   在 KeyEvent.java$getKeyCode() 处添加日志
*   adb logcat 并按主页键

输出键码 = `122`！但是HOME键码是3，MOVE_HOME键码是`122` 这样，我不能使用home键！

将/frameworks/base/data/keyboards/下的文件与普通文件对比，是一样的！

*   Home键如何工作？
*   键映射多少次？（来自Linux内核-驱动程序-框架）
*   映射关系如何（Linux内核--驱动--框架）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T04:25:42.983

感谢大家

这个问题已经解决了！

两个音量键和电源键与BACK HOME MENU键不同！

音量、电源键使用默认键盘布局**Generic.kl**。

但是，BACK HOME 和 MENU 键使用 从 Linux 内核发送的**ft5x06_ts.kl**

解决方案：

修改makefile

**LOCAL_MODULE :=ft5x06_ts.kl**

# android - 如何将点击监听器添加到 ListFragment 空白区域

> ID：14995426
> 
> 赞同：0
> 
> 时间：2013-02-21T05:48:15.307
> 
> 标签：android, fragment, onclicklistener, android-listfragment, onitemclicklistener

**更新 ：**

**我的活动.java**

```
 public class MyActivity extends FragmentActivity implements AdapterView.OnItemClickListener, View.OnClickListener {
    private ListView mListView;
    private ViewGroup mParent;
    private SimpleArrayAdapter mAdapter;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        mListView = (ListView) findViewById(android.R.id.list);
        mListView.setOnItemClickListener(this);
        mAdapter = new SimpleArrayAdapter(this);
        mAdapter.add(System.currentTimeMillis() + "");
        mListView.setAdapter(mAdapter);

        mParent = (ViewGroup) findViewById(android.R.id.content);
        mParent.setOnClickListener(this);
    }

    @Override
    public void onClick(View v) {
        Toast.makeText(MyActivity.this, v.getClass().getName(), 100).show();
    }

    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
        Toast.makeText(MyActivity.this, position + " " + view.getClass().getName(), 100).show();
    }

    class SimpleArrayAdapter extends ArrayAdapter<String> {
        public SimpleArrayAdapter(Context context) {
            this(context, android.R.layout.simple_list_item_1);
        }

        private SimpleArrayAdapter(Context context, int textViewResourceId) {
            super(context, textViewResourceId);
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            if (convertView == null) {
                convertView = new TextView(getContext());
                convertView.setLayoutParams(new AbsListView.LayoutParams(AbsListView.LayoutParams.MATCH_PARENT, AbsListView.LayoutParams.MATCH_PARENT));
            }
            ((TextView) convertView).setText(getItem(position));
            return convertView;
        }
    }
} 
```

**主要的.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout  xmlns:android="http://schemas.android.com/apk/res/android"
             android:id="@android:id/content"
             android:layout_width="fill_parent"
             android:layout_height="fill_parent"
        >
    <ListView android:id="@android:id/list"
              android:background="@android:color/white"
              android:layout_height="match_parent"
              android:layout_width="match_parent"/>
</LinearLayout > 
```

**AndroidManifest.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
          package="com.example.EditListViewDemo"
          android:versionCode="1"
          android:versionName="1.0">
    <uses-sdk android:minSdkVersion="8" android:targetSdkVersion="17"/>
    <application android:label="@string/app_name" android:icon="@drawable/ic_launcher">
        <activity android:name="MyActivity"
                  android:label="@string/app_name"
                  android:windowSoftInputMode="adjustPan">
            <intent-filter>
                <action android:name="android.intent.action.MAIN"/>
                <category android:name="android.intent.category.LAUNCHER"/>
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

**问题：** 我可以使用 getListView().setOnItemClickListener(listener) 到 ListFragment ListView。但是如何将点击监听器添加到空白区域？如下图所示。

![在此处输入图像描述](../Images/11954759be4e8246c9cb2e264f7913b3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T07:15:04.087

只需将您的添加`ListView`到一些`Parent View`，如 a`LinearLayout`或 a `RelativeLayout`，并`clickListener`为此实现`Parent`。

这样，当您单击时`ListViewItem`，`setOnItemClickListener(listener)`会调用 ，而单击其他地方将调用`parent.setOnClickListener(listener)`。

# c - C Unix - fork()、execl() 和循环中的管道

> ID：14995428
> 
> 赞同：1
> 
> 时间：2013-02-21T05:48:17.567
> 
> 标签：c, unix, exec, fork, pipe

我想以我没有受过正规教育的事实作为序言`pipes`，所以这是我的第一次冒险。更不用说我找不到任何与我的情况类似的问题。

注意：这是一个更大的学校作业项目的一部分，所以我不要求任何人为我做这件事。我只想要一些方向/有用的代码段。（我试图使其尽可能通用以避免“骗子”言论。）

我正在尝试运行一个`for-loop`元素`int k`，其中父进程`k`使用`fork()`and产生子进程`execl()`，然后使用 a`pipe()`将输出发送回父进程。这是我尝试使用的一些通用代码以及遇到的错误/问题：

注意：`helloworld`= 用它编译的可执行文件`GCC`产生`printf("hello world\n");`

```
int k = 10; //The number of children to make
int fd[2]; //Used for each pipe
int readFromMe[k]; //Holds the file IDs of each pipe fd[0]
int writeToMe[k]; //Holds the file IDs of each pipe fd[1]
int processID[k]; //Holds the list of child process IDs

//Create children
int i;
for(i = 0; i < k; i++)
{
    if(pipe(fd) == -1)
    {
        printf("Error - Pipe error.\n");
        exit(EXIT_FAILURE);
    }

    //Store the pipe ID
    readFromMe[i] = fd[0];
    writeToMe[i] = fd[1];

    if((processID[i] = fork()) == -1)
    {
        fprintf(stderr, "fork failure");
        exit(EXIT_FAILURE);
    }

    //If it is a child, change the STDOUT to the pipe-write file descriptor, and exec
    if(processID[i] == 0)
    {
        dup2 (writeToMe[i], STDOUT_FILENO);
        close(readFromMe[i]);

        execl("./helloworld", (char *)0);
    }

    //If it is the parent, just close the unnecessary pipe-write descriptor and continue itterating
    else
    {
        close(writeToMe[i]);
    }
}

//Buffer for output
char output[100000];

//Read from each pipe and print out the result  
for(i = 0; i < k; i++)
{
    int r = read(readFromMe[i], &output, (sizeof(char) * 100000));

    if(r > 0)
    {
        printf("result = %s\n", output);
    }

    close(readFromMe[i]);
} 
```

我的程序根本没有输出，所以我试图弄清楚为什么会出现这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T05:53:16.007

可能无关，但你`execl`说错了。程序之后的额外参数是`argv`数组对其他程序的`main`作用。如您所知，它始终只有一个条目，即程序名称。所以你需要这样称呼它：

```
execl("./helloworld", "helloworld", NULL); 
```

与您的问题更相关，您还应该检查错误，它实际上可能会失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T06:02:18.910

尝试在打印输出函数中打印 'r' 的值。我怀疑读取返回的是您没有看到的错误（可能是 EPIPE）。此外，您的示例代码正在尝试 printf 'c'，而不是像您想要的那样输出。

# android - 带有单选按钮和验证按钮的对话框

> ID：14995429
> 
> 赞同：13
> 
> 时间：2013-02-21T05:48:18.567
> 
> 标签：android

![在此处输入图像描述](../Images/db1b27045632063f75a93e24f6e2b2ed.png)
我想在两个单选第二单选按钮 B 下方添加一个居中的按钮，当我选中一个选项并单击验证时，会发生一个动作。请提供任何帮助

```
final CharSequence[] photo = {"A","B"};

AlertDialog.Builder alert = new AlertDialog.Builder(this);

alert.setTitle("Select Gender");

alert.setSingleChoiceItems(photo,-1, new 

DialogInterface.OnClickListener()

{

    @Override
    public void onClick(DialogInterface dialog, int which) 
    {
        if(photo[which]=="A")

        {

            gen="B";
        }

        else if (photo[which]=="B")

        {

            gen="B";

        }
    }

});
alert.show(); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-09-25T13:35:52.537

尝试这样做，您只需选择默认选择并在对话框中添加一个整数 - >`inputSelection`

```
final CharSequence[] items = { " HDMI IN ", " AV IN" };

        // Creating and Building the Dialog
        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setTitle("Select Input Type");

        builder.setSingleChoiceItems(items,inputSelection,
                new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int item) {
                        inputSelection = item;
                        levelDialog.dismiss();
                    }
                });
        levelDialog = builder.create();
        levelDialog.show(); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-21T07:17:44.977

> 我制作自定义对话框的方法

[http://www.helloandroid.com/tutorials/how-display-custom-dialog-your-android-application](http://www.helloandroid.com/tutorials/how-display-custom-dialog-your-android-application)从这里参考

1.  创建一个 xml 自定义对话框

    > ```
    >  <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    >     android:layout_width="wrap_content"
    >     android:layout_height="wrap_content" >
    > 
    >     <RadioButton
    >         android:id="@+id/rd_!"
    >         android:layout_width="wrap_content"
    >         android:layout_height="wrap_content"
    >         android:text="A" />
    > 
    >     <RadioButton
    >         android:id="@+id/rd_2"
    >         android:layout_width="wrap_content"
    >         android:layout_height="wrap_content"
    >         android:layout_below="@+id/rd_!"
    >         android:text="B" />
    > 
    >     <Button
    >         android:layout_width="fill_parent"
    >         android:layout_height="wrap_content"
    >         android:layout_below="@+id/rd_2"
    >         android:layout_centerInParent="true"
    >         android:text="OK" />
    >     </RelativeLayout> 
    > ```

和 activity.java 文件

```
 Dialog dialog = new Dialog(Dialogeshow.this);
    dialog.setContentView(R.layout.custom_dialoge);
    dialog.setTitle("This is my custom dialog box");
    dialog.setCancelable(true);
    // there are a lot of settings, for dialog, check them all out!
    // set up radiobutton
    RadioButton rd1 = (RadioButton) dialog.findViewById(R.id.rd_);
    RadioButton rd2 = (RadioButton) dialog.findViewById(R.id.rd_2);

    // now that the dialog is set up, it's time to show it
    dialog.show(); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-21T07:23:11.573

您可以使用以下方法显示对话框

```
public void showDialog(Context context, String title, String[] btnText,
        DialogInterface.OnClickListener listener) {

    final CharSequence[] items = { "One", "Two" };

    if (listener == null)
        listener = new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface paramDialogInterface,
                    int paramInt) {
                paramDialogInterface.dismiss();
            }
        };
    AlertDialog.Builder builder = new AlertDialog.Builder(context);
    builder.setTitle(title);

    builder.setSingleChoiceItems(items, -1,
            new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int item) {

                }
            });
    builder.setPositiveButton(btnText[0], listener);
    if (btnText.length != 1) {
        builder.setNegativeButton(btnText[1], listener);
    }
    builder.show();
} 
```

调用部分可以如下完成：

```
showDialog(MainActivity.this, "Your Title", new String[] { "Ok" },
    new DialogInterface.OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int which) {

            if(which==-1)
            Log.d("Neha", "On button click");
            //Do your functionality here
        }
    }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T06:18:11.090

您可以使用 向对话框添加单个按钮`Builder.setNeutralButton`。

# c# - DataGrid RowDetailsTemplate 绑定在主数据上下文中查找

> ID：14995431
> 
> 赞同：0
> 
> 时间：2013-02-21T05:48:21.710
> 
> 标签：c#, silverlight, xaml, data-binding

显而易见的事情，但我被困在这里..

我想在 DataGrid 中显示 DataGrid，这里是 XAML：

```
<sdk:DataGrid 
    ItemsSource="{Binding RNPPayPlanLanes}" 
    RowDetailsVisibilityMode="Visible">
    <sdk:DataGrid.Columns>
        <sdk:DataGridTextColumn Header="From region" Binding="{Binding FromRegionKey, Mode=TwoWay}" />
        <sdk:DataGridTextColumn Header="To region" Binding="{Binding ToRegionKey, Mode=TwoWay}" />        
    </sdk:DataGrid.Columns>
    <sdk:DataGrid.RowDetailsTemplate>
        <DataTemplate>
            <sdk:DataGrid 
                HorizontalAlignment="Right"
                ItemsSource="{Binding RNPPayPlanLaneDistances}">
                <sdk:DataGrid.Columns>
                    <sdk:DataGridTextColumn Header="UpToDistance" Binding="{Binding UpToDistance, Mode=TwoWay}" />
                    <sdk:DataGridTextColumn Header="PayPerDistanceUnitAmount" Binding="{Binding PayPerDistanceUnitAmount, Mode=TwoWay}" />                    
                </sdk:DataGrid.Columns>
            </sdk:DataGrid>
        </DataTemplate>
    </sdk:DataGrid.RowDetailsTemplate>
</sdk:DataGrid> 
```

MyViewModel 包含`RNPPayPlanLane`对象集合，我看到它们正确绑定。

虚拟机伪代码：

```
class MyViewModel
{
public List<RNPPayPlanLane> RNPPayPlanLanes { get; set; }
}

class RNPPayPlanLane
{
public List<RNPPayPlanLaneDistance> RNPPayPlanLaneDistances { get; set; }
}

class RNPPayPlanLaneDistance {} 
```

`RNPPayPlanLane`有我试图用于嵌套网格的集合属性“RNPPayPlanLaneDistances”。这行不通。我得到错误：

> System.Windows.Data 错误：BindingExpression 路径错误：在“MyViewModel”上找不到“RNPPayPlanLaneDistances”属性

因此，它没有绑定到“当前项目”，而是试图绑定到我的主 DataContext。为什么？我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T08:18:21.313

我使用 Telerik 的分层网格。我需要定义一个层次结构，没有使用 RowDetailsTemplate 但你的错误说该属性丢失了，

我认为

每个**LanesData**有一个**RNPPayPlanLane** 1-1

每个**RNPPayPlanLane**有许多**RNPPayPlanLaneDistances** 1-N (master-detail)

就好像它应该是这样的，

```
 ItemsSource="{Binding RNPPayPlanLane.RNPPayPlanLaneDistances}"> 
```

# asp.net - 参数未传递到 asp.net C# 中的水晶报表

> ID：14995434
> 
> 赞同：0
> 
> 时间：2013-02-21T05:48:23.473
> 
> 标签：asp.net, crystal-reports

我已将存储过程参数化为 Crystal Report 的源。我试图从 Code C# 后面传递它们。

我提到了很多主题，但仍然遗漏了一些东西，并且出现了错误：

`Failed to open a rowset.` `Details:` `ADO Error Code: 0x` `Source: Microsoft SQL Native Client` `Description: Procedure 'SP_GetProductsbySales' expects parameter '@top', which was not supplied.` `SQL State: 42000` `Native Error: Failed to open a rowset.` `Error in File C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp\TopSelling_Report {B8B4EAE6-D01E-4D18-9003-23A047F9DD5B}.rpt: Failed to open a rowset`

这是我的代码：

```
 private void ConfigureCrystalReports()
{
    rpt = new ReportDocument();

    string reportPath = Server.MapPath("TopSelling_Report.rpt");

    CrystalReportViewer1.ParameterFieldInfo.Clear();
    ParameterFields param = CrystalReportViewer1.ParameterFieldInfo;
    ParameterField top = new ParameterField();
    top.Name = "@top";
    ParameterDiscreteValue top_val = new ParameterDiscreteValue();
    top_val.Value = 100;
    top.CurrentValues.Add(top_val);

    ParameterField all = new ParameterField();
    all.Name = "@all";
    ParameterDiscreteValue all_val = new ParameterDiscreteValue();
    all_val.Value = false;
    all.CurrentValues.Add(all_val);

    param.Add(top);
    param.Add(all);
    CrystalReportViewer1.ParameterFieldInfo = param;

    rpt.Load(reportPath);
    rpt.SetParameterValue(0, Convert.ToInt32(50));
    rpt.SetParameterValue(1, Convert.ToBoolean(false));

    ConnectionInfo connectionInfo = new ConnectionInfo();
    connectionInfo.ServerName = "xxxx";
    connectionInfo.DatabaseName = "xxxxx";
    connectionInfo.UserID = "xxx";
    connectionInfo.Password = "xxxx";
    SetDBLogonForReport(connectionInfo, rpt);
    CrystalReportViewer1.ReportSource = rpt;
}
private void SetDBLogonForReport(ConnectionInfo connectionInfo, ReportDocument reportDocument)
{
    Tables tables = reportDocument.Database.Tables;
    foreach (CrystalDecisions.CrystalReports.Engine.Table table in tables)
    {
        TableLogOnInfo tableLogonInfo = table.LogOnInfo;
        tableLogonInfo.ConnectionInfo = connectionInfo;
        table.ApplyLogOnInfo(tableLogonInfo);
    }
} 
```

如您所见，我尝试以两种方式传递参数，但仍然出现错误。我发现了特定问题，如果我删除**SetDBLogonForReport()**方法，那么它工作正常。所以，如果我删除自动登录，那么它工作正常，但如果我保持原样或修改那个的代码，那么它会给出高于错误。

我尝试用 SetDatabaseLogon() 方法替换我的代码，但它仍然给了我不期望的登录提示。

我正在使用 Visual Studio 2005。感谢您的帮助。谢谢。

# android - 带有图标的 android 选项菜单

> ID：14995437
> 
> 赞同：19
> 
> 时间：2013-02-21T05:48:32.917
> 
> 标签：android

如何使用选项菜单显示图标。我尝试了以下代码，但我的选项菜单没有图像图标。我正在使用 android 4.0 版开发应用程序。

**Java代码**：

```
 public boolean onCreateOptionsMenu(Menu menu) {
            super.onCreateOptionsMenu(menu);
             menu.add("Add Contacts").setIcon(
                    R.drawable.ic_launcher);

            return true;
        } 
```

以下是我的应用程序的屏幕截图

![在此处输入图像描述](../Images/4b12770a5373e21b173234dbd5922d55.png)

我需要将图像显示在“添加联系人”项目的顶部。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-27T17:57:50.843

我尝试了两行代码，它可以工作：

```
public boolean onCreateOptionsMenu(Menu menu) {
        super.onCreateOptionsMenu(menu);
        menu.add("Add Contacts");
        menu.getItem(0).setIcon(R.drawable.ic_launcher);
        return true;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-17T01:39:06.620

也从那里覆盖`OnPrepareOptionsMenu`并添加图标

如果它高于 3.0，请`android:showAsAction`在 xml 中使用。

例如。`android:showAsAction="ifRoom|withText"`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-21T06:04:53.937

You can create a custom menu like this:

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/add_contacts"
          android:icon="@drawable/ic_launcher"
          android:title="@string/add_contacts"
         />
</menu> 
```

And then inflate it

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.my_menu, menu);
    return true;
} 
```

More on this here: [http://developer.android.com/guide/topics/ui/menus.html#options-menu](http://developer.android.com/guide/topics/ui/menus.html#options-menu)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-21T06:07:12.040

您可以直接将其设置到 xml 文件中。

```
 <item android:id="@+id/add_contacts"
  android:icon="@android:drawable/plus_icon"
  android:title="Add Contacts"/> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-21T06:21:21.137

您可以尝试关注此[链接](http://android-helper.blogspot.in/2011/04/android-simple-menu-example.html)。

检查一下并告诉我它是否有效。

或者你可以做一些这样的事情。
创建menu.xml

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
      <item android:id="@+id/next"
              android:icon="@drawable/ic_next"
              android:title="@string/next" />
      <item android:id="@+id/previous"
            android:icon="@drawable/ic_previous"
            android:title="@string/previous" />
      <item android:id="@+id/list"
            android:icon="@drawable/ic_list"
            android:title="@string/list" /> 
</menu> 
```

现在您将能够在菜单上设置 ICON

现在在 CreateOptionMenu

```
public boolean onCreateOptionsMenu(Menu menu) {
      MenuInflater inflater = getMenuInflater();
      inflater.inflate(R.menu.menu, menu);
      return true;
    } 
```

并访问该菜单。

```
public boolean onOptionsItemSelected(MenuItem item) {
      switch (item.getItemId()) {
      case R.id.next:
            Toast.makeText(this, "You have chosen the " + getResources().getString(R.string.next) + " menu option",
                        Toast.LENGTH_SHORT).show();
            return true;
      …
      default:
            return super.onOptionsItemSelected(item);
      }
   } 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-10-07T22:03:18.523

要启用带有图标的选项菜单：

`Item`用with`showAsAction="always"`和 a包裹 Items `Menu`：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto">
    <item
        android:title="@string/title_menu"
        android:icon="@mipmap/ic_icon_menu"
        app:showAsAction="always">
        <menu>
            <item
                android:id="@+id/action1"
                android:orderInCategory="100"
                android:title="@string/action1"
                android:icon="@mipmap/ic_icon_action1"
                app:showAsAction="never" />
        </menu>
    </item>
</menu> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-08T06:59:23.007

如果您在清单文件中使用以下属性，那么它将显示您的图标....

```
<activity android:name=".ui.CategoryActivity"
        android:label="@string/app_name"
        **android:theme="@android:style/Theme.NoTitleBar"**></activity> 
```

这对我来说很好...... :) +1 为我自己的努力......

**必须输入。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-10-11T17:12:20.297

最简单的方法是仅在设置菜单项时使用@drawable。

或者

只需将 @drawable 放在标题声明之前。

```
<?xml version="1.0" encoding="UTF-8" ?>
<menu
xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:app    ="http://schemas.android.com/apk/res-auto">
<item
  android:id      ="@+id/addToFavorites"
  android:icon = "@drawable/ic_favorite_border_white_24dp"
  android:title = "Hello"
  app:showAsAction="always" />
<item
  android:id      ="@+id/about"
  android:title   ="About"
  app:showAsAction="never" />
</menu> 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2013-12-13T19:27:44.040

问题是Androidmanifest.xml。删除 `android:theme="@style/AppTheme"`它会正常工作

# android - Android onclick 按钮序列

> ID：14995438
> 
> 赞同：1
> 
> 时间：2013-02-21T05:48:45.553
> 
> 标签：android, onclick, sequence, onclicklistener

我有 5 个按钮，每个按钮都有字母（按钮“H”，按钮“E”按钮“L”按钮“L”按钮“O”）组成“HELLO”这个词。我需要对这些按钮进行点击顺序，所以如果我先点击“H”，然后点击“E”，直到完成单词，应用程序会做一些事情，但如果我先点击“L”会给我一些错误消息。

做这个序列的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T06:27:05.077

我不确切知道你的流程，但你可以试试这个。

1.  将标签设置为每个按钮作为其文本，如下所示。

    b.setTag("H");

而不是像这样。

```
Button b;
String name = "";
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    b.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            String s = (String) v.getTag();

            name +=s;

                          if( "HELLO".startsWith(name)){
                                  <VALID>
                          }else{
                                  <ERROR>
                          }   
        }
    });

} 
```

`name`使用您的原始单词检查每个按钮单击的变量，即`HELLO`如上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T06:27:33.433

你可以做类似的事情

当活动开始时，您只需制作类似的其他按钮`Enabled = false`。但是使第一个按钮启用。**不要**使`Visible=false`.

现在点击按钮“H”使启用按钮“E”等等。

所以用户只需要按顺序点击按钮。按钮不能以任何随机方式按下。

试试这个，让我知道它是否有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T06:45:06.087

非常有趣，完全符合您的要求..检查一次..

如果您提供任何字符串以外的其他字符串`HELLO`也会更好。

```
public class ButtonTest extends Activity
{
    private String result="";
    String sampleText   =   "HELLO";

    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.test);

        int noOfBtns        =   sampleText.length();

        LinearLayout ll = (LinearLayout)findViewById(R.id.btnlay);
        final TextView tvtext = (TextView)findViewById(R.id.result);

        final Button[] btns     =   new Button[noOfBtns];

        for(int i=0;i<noOfBtns;i++)
        {
            btns[i] =   new Button(this);
            btns[i].setText(sampleText.substring(i,i+1));

            LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
            ll.addView(btns[i], lp);

            final int j = i;
            btns[i].setOnClickListener(new OnClickListener() {

                public void onClick(View v) 
                {
                    System.out.println(j+" "+result.length());
                    if(j == result.length())
                    {
                        result = result+btns[j].getText().toString();

                        if(sampleText.startsWith(result))
                        {
                            tvtext.setText(result);
                        }
                    }
                    else
                    {
                        Toast.makeText(getApplicationContext(), "Wrong Button Pressed", Toast.LENGTH_SHORT).show();
                    }
                }
            });
        }
    }
} 
```

布局文件

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <TextView 
        android:id="@+id/result"
        android:layout_width="fill_parent"
        android:layout_height="50dp"
        android:textColor="#fff"/>

    <LinearLayout 
        android:id="@+id/btnlay"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="horizontal">

    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T07:00:00.820

尝试以下

```
package com.example.buttonsequence;

import java.util.ArrayList;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends Activity
{   

    ArrayList<Button> buttonList=null;
    TextView resultTextView=null;
    Button buttons[]=null;
    String helloStr="HELLO";

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        buttonList=new ArrayList<Button>();
        buttons=new Button[5];

        this.resultTextView=(TextView) this.findViewById(R.id.result_text);
        this.resultTextView.setText("");

        buttons[0]=(Button)this.findViewById(R.id.h_button);
        buttons[1]=(Button)this.findViewById(R.id.e_button);
        buttons[2]=(Button)this.findViewById(R.id.l_button);
        buttons[3]=(Button)this.findViewById(R.id.l2_button);
        buttons[4]=(Button)this.findViewById(R.id.o_button);

        for(int k=0;k<5;k++)
            buttons[k].setOnClickListener(onClickListener);

        Button button=(Button)this.findViewById(R.id.exit_button);
        button.setOnClickListener
        (
                new OnClickListener()
                {

                    @Override
                    public void onClick(View arg0) {
                        // TODO Auto-generated method stub
                        finish();
                    }

                }
        );
    }

    OnClickListener onClickListener=new OnClickListener() 
    {

        @Override
        public void onClick(View v)
        {
            // TODO Auto-generated method stub

            Button b=(Button)v;
            buttonList.add(b);

            int size=buttonList.size();
            if(size>0)
            {
                StringBuilder resultBuilder=new StringBuilder();
                for(int i=0;i<size;i++)
                {
                    Button tempButton=buttonList.get(i);
                    if(tempButton==buttons[i])
                    {
                        resultBuilder.append(helloStr.charAt(i));

                        if(i==4)
                        {
                            resultTextView.setText(resultBuilder.toString()+" clicked");
                            buttonList.clear();
                        }
                        else
                        {
                            resultTextView.setText(resultBuilder.toString()+" clicked");
                        }

                    }
                    else
                    {
                        buttonList.remove(i);
                        Toast.makeText(getApplicationContext(), "No correctly clicked", Toast.LENGTH_SHORT).show();
                        break;
                    }
                }
            }
            else
            {
                resultTextView.setText("Invalid pressed");
            }

        }

    };

} 
```

**activity_main.xml**

```
 <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/hello_world" />

    <Button
        android:id="@+id/h_button"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="H" />

    <Button
        android:id="@+id/e_button"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="E" />

    <Button
        android:id="@+id/l_button"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="L" />

    <Button
        android:id="@+id/l2_button"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="L" />

    <Button
        android:id="@+id/o_button"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="O" />

    <TextView
        android:id="@+id/result_text"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Small Text"
        android:textAppearance="?android:attr/textAppearanceSmall" />

    <Button
        android:id="@+id/exit_button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Exit" />

</LinearLayout> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-21T07:10:11.520

只要有一个这样的数组：

```
int[] tracker = new int[5]; 
```

当你点击一个按钮时，说“H”，设置`tracker[0] = 1;`

但是当你点击一个按钮时，说“L”，检查之前所有的按钮值是否都是`1`. 如果是，则将对应的tracker设置为`1`else，显示错误信息，并且不对tracker Array进行任何更改。

**像这样的东西：**

```
onHClick{

tracker[0] = 1;
}

onEClick{

for(int i=0; i<1; i++){
if(tracker[i] == 0){    
//show error message and return;
}else{
tracker[1] = 1;
return;
}
}
} 
```

# android - 如何在活动android中设置Imageview的高度和宽度

> ID：14995440
> 
> 赞同：0
> 
> 时间：2013-02-21T05:48:54.700
> 
> 标签：android, height, imageview

嗨，我想在我的活动中更改图像视图的高度和宽度属性，我按以下方式尝试了它，但它对我不起作用......

```
View card_view = getLayoutInflater().inflate(R.layout.card_details1,null);
coupon_img = (ImageView) card_view.findViewById(R.id.coupon_image);
// I tried this ////////
coupon_img.getLayoutParams().height = 20;
coupon_img.getLayoutParams().width = 20;
// I also tried this ////
LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(100, 100);
    coupon_img.setLayoutParams(layoutParams);
// also this one ////
coupon_img.setMaxHeight(10); 
```

但我无法更改 imageview src 的高度和宽度。我做错了什么吗？这该怎么做？需要帮助...谢谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T05:57:02.067

在这段代码中，我`ImageView`在运行时创建了一个新实例并为其设置维度：

```
// SET THE IMAGEVIEW DIMENSIONS
int dimens = 120;
float density = activity.getResources().getDisplayMetrics().density;
int finalDimens = (int)(dimens * density);

LinearLayout.LayoutParams imgvwDimens = 
        new LinearLayout.LayoutParams(finalDimens, finalDimens);
imgAlbumPhoto.setLayoutParams(imgvwDimens);

// SET SCALETYPE
imgAlbumPhoto.setScaleType(ScaleType.CENTER_CROP);

// SET THE MARGIN
int dimensMargin = 5;
float densityMargin = activity.getResources().getDisplayMetrics().density;
int finalDimensMargin = (int)(dimensMargin * densityMargin);

LinearLayout.LayoutParams imgvwMargin = 
        new LinearLayout.LayoutParams(finalDimens, finalDimens);
imgvwMargin.setMargins
(finalDimensMargin, finalDimensMargin, finalDimensMargin, finalDimensMargin); 
```

这将设置`ImageView`. 但是，它们将在**px**中。**如果您需要dp**值，请使用此处的代码： [https ://stackoverflow.com/a/9563438/450534](https://stackoverflow.com/a/9563438/450534)

**更新：**

`ImageView`要更改已在 XML 中定义的现有尺寸，请使用以下命令：

```
coupon_img.setLayoutParams(new LayoutParams(100, 100)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T05:56:21.953

尝试这样的事情......

```
 LayoutParams params = new LayoutParams(100, 100);
 parantlayout.addView(coupon_img, params); 
```

我想这会对你有所帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T05:57:41.013

我认为您没有将更改后的图像添加到布局中。

```
LinearLayout ll = (LinearLayout)findViewById(R.layout.yourlinearlayout);

image.setLayoutParams(
          new LinearLayout.LayoutParams(
                 bmp.getWidth(), 
                 bmp.getHeight())); 
ll.addView(image);// Then add the image to linear layout 
```

# dynamically-generated - highstock 单线图？

> ID：14995445
> 
> 赞同：0
> 
> 时间：2013-02-21T05:49:30.590
> 
> 标签：dynamically-generated, highstock, linechart

我正在尝试使用 highstock 图表中的单折线图，即[http://www.highcharts.com/stock/demo/](http://www.highcharts.com/stock/demo/) 如果您看到该图表右侧按钮缩放选项存在，则该特定缩放开始日期和结束日期显示在右侧侧顶，即从日期到现在。但是在代码中他们没有提到任何东西。我们必须在哪里找到该代码？

动态更新图表也有缩放选项，但对于此图表，没有起始日期和日期，即[http://www.highcharts.com/stock/demo/dynamic-update](http://www.highcharts.com/stock/demo/dynamic-update)。我想要这个动态更新的图表的日期和日期。怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:59:05.747

您可以通过将 inputEnabled 参数设置为 true 来启用此输入

```
inputEnabled: true 
```

[http://api.highcharts.com/highstock#rangeSelector.inputEnabled](http://api.highcharts.com/highstock#rangeSelector.inputEnabled)

# flex4 - 警报未在 StageWebview 中显示在前面

> ID：14995451
> 
> 赞同：2
> 
> 时间：2013-02-21T05:49:49.357
> 
> 标签：flex4, alert, stagewebview

我正在使用 StageWebview 在 flex 4.6 中显示我的内容。当我打开警报框时，它总是显示 StaegeWebview 的背景。如何在 StageWebview 前面显示警报框。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T18:26:38.490

对于您的问题，一个棘手的解决方案是，当您想要显示警报时，只需获取`StaegeWebview`使用此`drawViewPortToBitmapData`方法的快照，然后将其添加`Bitmap`到视图层次结构中。删除`StaegeWebview`对话框后删除和后者重新添加。

# c++ - 为什么我在 for 循环中收到“Else without previous if”错误？

> ID：14995454
> 
> 赞同：1
> 
> 时间：2013-02-21T05:50:10.223
> 
> 标签：c++, syntax, if-statement

我是 C++ 的新手，并且一直盯着我的（可能很糟糕的）代码有一段时间了，不知道它有什么问题。

我正在尝试遍历 if 和 else 语句的几次迭代，并且必须在语法上做一些不正确的事情 - 因为它显示了“else without a previous if”的编译器错误

这是一门课，我正在努力解决，但如果你看到一些明显的我忽略的东西，我很想知道。

谢谢！

```
for (i = 0; i < iterationsNum; i++){
if (charlieAlive == 0) // Aarron's shot
        {
        if (aaronShot() == 1)
        charlieAlive = 1;
        }       
else (charlieAlive == 1 && bobAlive == 0);{         
        if (aaronShot() == 1)
        bobAlive = 1;
        }
else (charlieAlive == 1 && bobAlive == 1 && aaronAlive == 0);{
        cout << "Aaron is the Winner!\n";
        totalShot++;
        aaronCounter++;
        }
continue;

if (charlieAlive == 0 && aaronAlive ==0) // Bob's shot
        {
        if (bobShot() == 1) 
        charlieAlive = 1;
        }
else (charlieAlive == 1 && aaronAlive == 0);{
        if (bobShot() == 1)
        aaronAlive = 1;
        }
else (charlieAlive == 1 && aaronAlive == 1 && bobAlive == 0);{
        cout << "Bob is the Winner!\n";
        bobCounter++;
        totalShot++;
        }
continue;

if (charlieAlive == 0 && bobAlive == 0) // Charlie's shot   
        {
        bobAlive = 1;
        }
else (charlieAlive == 0 && bobAlive == 1 && aaronAlive == 0);{          
        aaronAlive = 1;
        totalShot++;
        }
else (charlieAlive == 0 && bobAlive == 1 && aaronAlive == 1);{
        cout << "Charlie is the Winner!\n";
        }
continue; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T05:55:01.420

`else`不采取任何条件，但你已经写了这个：

```
else (charlieAlive == 1 && bobAlive == 0);  //else : (notice semicolon) 
```

这不会做你打算做的事情。

你想做这些：

```
else if (charlieAlive == 1 && bobAlive == 0)  //else if : (semicolon removed) 
```

注意区别。

此外，最多可以有一个`else`区块，与一个`if`区块或一串区块相关联`if, else-if, else-if`。也就是说，你可以这样写：

```
if (condition) {}
else {} 
```

或者，

```
if (condition0) {}
else if (condition1) {}
else if (condition2) {}
else if (condition3) {}
else if (condition4) {}
else {} 
```

在任何情况下，`else`块**始终**是最后一个块。之后，如果您编写另一个`else`块，那将是一个错误。

除此之外，你还有一个分号在错误的地方。还修复了：

```
else (charlieAlive == 1 && bobAlive == 0); <---- remove this semicolon! 
```

希望有帮助。

* * *

选择一本好的 C++ 入门书籍。以下是针对所有级别的一些建议。

*   [The Definitive C++ Book Guide and List](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T05:57:53.407

我在这里看到几个问题：

1.  你的 else 语句中有分号 - 这些不应该在那里
2.  一个 if 有多个 else 子句。在评估另一个条件时使用“else if” - else 是不满足条件时的全部
3.  我强烈推荐正确的缩进和一致的大括号使用——不这样做不一定是错误，但它会让你更容易注意到错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T05:54:43.540

你不能把条件语句放在`else`语句中

正确的**所有其他**陈述

像`else (charlieAlive == 1 && bobAlive == 0);`

`else`只是替代流程`if`- 即

```
if(condition)  // if this fails go to else part
  {
--- // if condition true execute this
}
else{
 --- // will run when condition in if fails
} 
```

所以你不必为 else 语句设置条件

**编辑**
as`else if`需要条件的地方似乎你想这样做
`else if(your condition statements)` // 注意：末尾没有分号

# algorithm - 从算法介绍到计数排序的奇怪步骤

> ID：14995455
> 
> 赞同：5
> 
> 时间：2013-02-21T05:50:13.707
> 
> 标签：algorithm, sorting

这似乎是一本非常普通的书（Cormen、Leiserson、Rivest、Stein），因此希望有人能够提供帮助。第8章给出了计数排序算法。输入数组 A 的位置是有意义的，并且对于数组 C 的大小，您可以找到从 0 到 k 的范围。然后使 C[i] 包含 A 中等于 i 的元素数。例如：

```
A: [2,5,3,0,2,3,0,3]
C: [2,0,2,3,0,1] 
```

但在此之后，他们使 C[i] 包含小于或等于 i 的元素数。例如：

```
C: [2,2,4,7,7,8] 
```

为什么这是必要的？您不能只遍历原始 C 并从中获得一个排序数组吗？您知道每个数字的确切计数，因此您可以按顺序将每个数字的正确数量放入 B 并拥有一个排序数组。将 C 从第一种形式转换为第二种形式是否会使其稳定？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T06:16:41.617

我想您建议对中间体执行以下操作`C`（使用索引 1 数组）：

```
i = 1
for k = 1 to len(C)
  for j = 1 to C[i]
    B[i] = k
    i = i + 1 
```

这似乎是合理的，并且具有相同的渐近运行时间。但是，请考虑您要对其进行排序的项不仅是单个整数，而且还附加了一些其他数据的情况。计数算法使排序稳定；具有相同键的项目的相对顺序被保留（参见[Wikipedia 文章](http://en.wikipedia.org/wiki/Counting_sort)）。如果仅从 的索引分配输出，您将失去对一般数据进行排序的能力`C`。因此，为什么排序通过`B[C[A[j]]] <- A[j]`.

对于其他好奇的人，这是原始算法的完成：

```
# C[i] now contains the number of elements equal to i.
for i = 1 to k
  C[i] <- C[i] + C[i-1]
# C[i] now contains the number of elements less than or equal to i.
for j = length[A] downto 1
  B[C[A[j]]] <- A[j]
  C[A[j]] <- C[A[j]] - 1 
```

为了解释最后一部分的递减，我引用了这本书，这本书也解释了排序的稳定性：

> 因为元素可能不是不同的，所以`C[A[j]]`每次将值`A[j]`放入`B`数组时我们都会递减。递减`C[A[j]]`会导致下一个具有等于 的输入元素`A[j]`（如果存在）转到`A[j]`输出数组中紧邻的位置。

此外，如果我们这样做，我想我们将无法再调用它`COUNTING-SORT`，因为它不会计算小于输入数组中任何特定项目的项目数（正如他们定义的那样）。:)

# php - EC2 Nginx 负载测试

> ID：14995461
> 
> 赞同：0
> 
> 时间：2013-02-21T05:50:59.810
> 
> 标签：php, amazon-ec2

有人可以提供关于不同 ec2 服务器可以在 nginx + php-fpm 上处理多少事务的统计信息吗？考虑 PHP 脚本就像这样简单：

```
<?php exit; ?> 
```

# android - phonegap 图像调整器插件来保存图像

> ID：14995462
> 
> 赞同：0
> 
> 时间：2013-02-21T05:51:03.560
> 
> 标签：android, cordova

我在这里找到了一个 phonegap image-resizer 插件[https://github.com/raananw/PhoneGap-Image-Resizer](https://github.com/raananw/PhoneGap-Image-Resizer)

我试图在相机成功时将其添加到我的 phonegap 索引中以尝试保存图像。

```
function onSuccess(imageURI) {

    window.imageResizer.storeImage(
        function(data) { 
            var image = document.getElementById('smallImage');
            image.src = imageURI; 
            alert('got img')
        }, function (error) {
            alert("Error : \r\n" + error);
            //console.log("Error : \r\n" + error);
        }, imageURI, {filename :"test",imageDataType:ImageResizer.IMAGE_DATA_TYPE_URL ,format:'jpg',directory:"/DCIM/Camera"}
    );
} 
```

已解决：我在 logcat 中收到错误 IMAGE_DATA_TYPE_URL 未定义

已解决：我收到一条错误消息，提示为 null，并且名为 test.jpg 的黑色图像已放入相机文件夹但未显示在图库中（通过编辑 imageData ImageResizer.IMAGE_DATA_TYPE_URL 无法正常工作解决了这个问题，仍然在 java 中设置了 base64 默认值文件只需将其永久编辑为 url 类型 XD 另一个是 uri 有错误并将文件：/// 去掉，图像被保存而没有更多问题）

已解决：保存在与画廊相同的文件夹中，但除非您在文件管理器中重命名它，否则看不到它（使用代码片段）

```
 private void scanPhoto(String imageFileName)
{
  Intent mediaScanIntent = new Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE);
  File f = new File(imageFileName);
  Uri contentUri = Uri.fromFile(f);
  mediaScanIntent.setData(contentUri);
  this.cordova.getActivity().sendBroadcast(mediaScanIntent); 
} 
```

问题：将其保存在与相机相同的目录中，但是在查看图库时，它显示在一个名为缓存的组中，我怎样才能使其成为图库中的应用程序名称而不是缓存

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T01:32:49.593

我认为您无需寻找其他图像插件来调整大小。 [phonegap 中的选项 camera.getPicture](http://docs.phonegap.com/en/2.4.0/cordova_camera_camera.md.html#camera.getPicture)将为您执行此操作。改变 quality,targetWidth,targetHeight 做你想做的事。

# ajax - datepicker更改日期时如何使用ajax post？

> ID：14995464
> 
> 赞同：6
> 
> 时间：2013-02-21T05:51:09.880
> 
> 标签：ajax, jquery, datepicker

下午好

使用 datepicker ui 更改输入中的值。

当输入中的值将发生变化时，我想使用 ajax post。

为此，我使用脚本：

```
<input type="text" name="date" class="datepicker" id="datepicker">

$(".datepicker").datepicker({changeYear: true});

$(".datepicker").on("change",function(){
var date=$(this).val();
$.post("test.php", {
date:date
},
function(data){$('#testdiv').html('');$('#testdiv').html(data);
});
}); 
```

但是 ajax post 查询是使用旧日期执行的。

Datepicker 在输入中没有时间变化值。

告诉我 datepicker 更改字段中的日期后如何查询？

我需要：

1) datepicker 更改日期；

2) 查询应以新日期发送。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-21T05:59:51.897

您可以在 datepicker 事件上触发 ajax 发布：

```
$("#datepicker").datepicker({

    onSelect: function(date, instance) {

        $.ajax
        ({
              type: "Post",
              url: "www.example.com",
              data: "date="+date,
              success: function(result)
              {
                  //do something
              }
         });  
     }
}); 
```

希望这会有所帮助-@Codebrain

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T06:00:48.437

也许您应该考虑使用`onSelect`日期选择器的事件（请参见[此处](http://api.jqueryui.com/datepicker/#option-onSelect)）。

使用该事件，新选择的日期（作为字符串）作为第一个参数传递。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-02-09T20:21:59.777

您可以使用`changeDate`

```
$('.datepicker').datepicker()
 .on('changeDate', function(e) {
    // `e` here contains the extra attributes
}); 
```

你可以在这里查看：http: [//bootstrap-datepicker.readthedocs.io/en/latest/events.html](http://bootstrap-datepicker.readthedocs.io/en/latest/events.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T06:21:27.410

而不是使用`on(change`datepicker `onSelect`，它会在日期更改时触发。

```
$(function(){
    $('.datepicker').datepicker({
        onSelect:function(dateText,instance){
            alert(dateText); //Latest selected date will give the alert.
            $.post("test.php", {
            date:dateText // now you will get the selected date to `date` in your post
            },
            function(data){$('#testdiv').html('');$('#testdiv').html(data);
            });
        }
    });
}); 
```

希望能帮助到你。

# javascript - HTML5 编辑器/库自动将图像插入 HTML

> ID：14995465
> 
> 赞同：-1
> 
> 时间：2013-02-21T05:51:18.790
> 
> 标签：javascript, html, frameworks, editor

我希望 HTML 编辑器或 JavaScript 库**在 HTML**点（`<div>, <section>`等）中放置图像时执行以下操作：
1）将图像放在与此 .html 文件相同的文件夹中
2）为图像插入 HTML 标记`<a href="/"><img src="image.png" alt="image"></a>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T05:57:34.763

你有没有研究过一些开源的东西，比如[`eclipse`](https://www.eclipse.org/)

[![日食html ide](../Images/e61b7628339ca7109511050e01642e58.png)](https://i.stack.imgur.com/XfrKX.png)
[（来源：[eclipse4you.com](http://www.eclipse4you.com/files/eclipse_plugins/richhtml4eclipse.png)）]

[`netbeans`](https://netbeans.apache.org/)

[![Netbeans IDE](../Images/ddc578d7b4de33628efe6defed81e58e.png)](https://i.stack.imgur.com/TDszi.png)
[（来源：[netbeans.org](https://platform.netbeans.org/images/tutorials/htmleditor/73/pic10.png)）]

甚至[`aptana`](http://www.aptana.com/)是伟大的。

# django - 我应该使用 Django 管理员来处理用户提交的内容吗？

> ID：14995474
> 
> 赞同：0
> 
> 时间：2013-02-21T05:52:10.660
> 
> 标签：django

我正在创建一个允许用户通过 Facebook 进行身份验证并创建内容的站点。

我应该使用 Django 管理界面来创建内容还是创建自己的界面会更聪明。如果我应该自己动手，有什么好的教程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T06:19:08.063

作为一般规则，django admin 最适合在开发和测试期间验证您的模型；并且不应用作前端用户界面。

由于每个站点/应用程序都有自己独特的要求，因此很难推荐教程。熟悉 django 后，您会发现以下库很有帮助：

*   [`django-bootstrap-toolkit`](https://github.com/dyve/django-bootstrap-toolkit)- 这集成了 django 中优秀的[引导 css/javascript 框架](http://twitter.github.com/bootstrap/)。
*   [`django-social-auth`](https://github.com/omab/django-social-auth)- 允许您的用户使用他们的社交网络凭据登录。
*   [`pinax`项目](http://pinaxproject.com/)- 用于开发几乎任何类型的前端网站的常用实用程序的集合。

对于自定义现有的管理应用程序：

*   [`grappelli`](https://github.com/sehmaschine/django-grappelli)- 管理员的自定义皮肤
*   [`django-frontendadmin`](https://github.com/bartTC/django-frontendadmin)- 使用模板标签在前端编辑模型
*   [`django-admin-tools`](https://bitbucket.org/izi/django-admin-tools/wiki/Home)- 为管理应用程序定制的小部件和 UI 元素

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T05:57:03.077

您可以使用管理员登录页面和自定义 URL 重定向。这是 facebook 身份验证的工作示例。 [https://github.com/sivaa/django-social-auth-facebook](https://github.com/sivaa/django-social-auth-facebook)

# php - PHP从列值显示图像

> ID：14995479
> 
> 赞同：-2
> 
> 时间：2013-02-21T05:52:38.143
> 
> 标签：php, mysql, sql

```
Table
+-----+--------+---------+
|  ID |  Name  |  Images |
+-----+--------+---------+
| 001 | John   |    5    |
| 002 | Mark   |    3    |
+-----+--------+---------+ 
```

我想这样显示

```
Jon, 001-1.jpg | 001-2.jpg | 001-2.jpg | 001-3.jpg | 001-4.jpg | 001-5.jpg | 

Mark, 002-1.jpg | 002-2.jpg | 002-2.jpg | 002-3.jpg | 
```

数据库表上的图像值将是创建图像链接返回的图像数量

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T05:56:55.093

你可以使用这个。不知道你为什么觉得难。

```
$c = 0
while (false !== ($data = fetch_array_as_row_function()))
{
    echo "<tr>";
    echo "<td>", $data["name"], "</td>";
    for ($i = 0; $i < $data["images"]; $i++)
        echo "<td>00", $c,"-", $i, "</td>";
    echo "</tr>";
} 
```

在这里，函数`fetch_array_as_row_function()`相当于什么`mysql_fetch_array()`。

# android - android 媒体播放器在播放时出错：E/MediaPlayer(4768): error (1, -2147483648)

> ID：14995483
> 
> 赞同：3
> 
> 时间：2013-02-21T05:53:10.683
> 
> 标签：android, android-mediaplayer

在 Android 4.0 中播放声音时出错，但此代码适用于 2.3.3

```
 mp = new MediaPlayer();
            mp.setDataSource(recordedSoundFilePath);
            mp.prepare();
            mp.start(); 
```

**错误日志是**

```
02-21 05:42:44.542: E/MediaPlayer(4768): error (1, -2147483648)
02-21 05:42:44.550: E/MediaPlayer(4768): Error (1,-2147483648)
02-21 05:42:44.550: D/MediaPlayer(4768): Info (1,-2147483648) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-11-05T09:43:12.363

```
 {final FileInputStream i = openFileInput("local file name with no /s");
    player.setDataSource(i.getFD());
    i.close();
   } 
```

# python-2.x - pexpect 脚本中的错误以 root 身份登录

> ID：14995487
> 
> 赞同：1
> 
> 时间：2013-02-21T05:53:21.967
> 
> 标签：python-2.x, pexpect

导入 pexpect，操作系统，系统

cmd = "须藤苏-"

p = pexpect.spawn(cmd, timeout=60)

pass_expect = ".*assword.*" （当我收到提示说 "[sudo] password for user" ）

p.expect(pass_expect)

打印“我要密码”

p.sendline("我的密码")

p.logfile = sys.stdout

p.sendline("注销")

p.close()

执行上述脚本时出现以下错误

**错误**

回溯（最近一次通话最后）：

文件“test.py”，第 11 行，在 p.expect(pass_expect)

文件“/usr/lib/python2.6/dist-packages/pexpect.py”，第 1311 行，在预期中

```
return self.expect_list(compiled_pattern_list, timeout, searchwindowsize) 
```

文件“/usr/lib/python2.6/dist-packages/pexpect.py”，第 1325 行，在 expect_list

```
return self.expect_loop(searcher_re(pattern_list), timeout, searchwindowsize) 
```

文件“/usr/lib/python2.6/dist-packages/pexpect.py”，第 1409 行，在 expect_loop

```
raise TIMEOUT (str(e) + '\n' + str(self)) 
```

pexpect.TIMEOUT：read_nonblocking() 中超时。

版本：2.3（$修订：399 $）

命令：/usr/bin/sudo

参数：['/usr/bin/sudo', 'su', '-']

搜索者： searcher_re：

```
0: re.compile(".*assword.*") 
```

缓冲区（最后 100 个字符）：root@:~#

之前（最后 100 个字符）：root@:~#

后：

匹配：无 match_index：无 exitstatus：无 flag_eof：错误 pid：16933 child_fd：3 关闭：错误超时：60

分隔符：日志文件：无 logfile_read：无 logfile_send：无 maxread：2000 ignorecase：错误 searchwindowsize：无 delaybeforesend：0.05 delayafterclose：0.1 delayafterterminate：0.1

有人可以帮助我，因为我几天以来一直陷入这个问题。

任何帮助将不胜感激。谢谢 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T06:00:05.713

如果您以超级用户身份登录意味着输入**root@localhost**

```
child = pexpect.spawn("ssh root@localhost")
child.logfile = open("/tmp/mylog", "w")
child.expect(".*assword:")
child.send("guest\r")
child.expect(".*\$ ")
child.sendline("python -V\r")
print child.before 
```

[如何使用 pexpect 在远程主机系统中登录超级用户（root）？](https://stackoverflow.com/questions/14895847/how-to-login-the-super-userroot-in-remote-host-system-using-pexpect)

# jboss - 由于端口在使用中，JBoss 无法启动

> ID：14995491
> 
> 赞同：2
> 
> 时间：2013-02-21T05:53:51.003
> 
> 标签：jboss

总而言之，我对JBoss并不熟悉，最近我因为工作而在使用它，现在我在启动JBoss时遇到了一个问题。在谷歌搜索答案后，我没有发现任何有用的东西，希望你能帮助我审查它。谢谢。

JBoss 启动时的主要异常表示。

```
13:30:07,653 INFO  [ServerInfo] Java version: 1.7.0_05,Oracle Corporation
13:30:07,653 INFO  [ServerInfo] Java VM: Java HotSpot(TM) Server VM 23.1-b03,Oracle Corporation
13:30:07,654 INFO  [ServerInfo] OS-System: Windows 7 6.1,x86
13:30:10,515 INFO  [Server] Core system initialized
13:30:19,756 INFO  [EncryptedSystemPropertiesService] Loaded system properties from: file:/D:/AA7.2.0/av.7.2.0/av.biz/conf/av/ServerConfig.properties
13:30:19,778 INFO  [EncryptedSystemPropertiesService] Loaded system properties from: file:/D:/AA7.2.0/av.7.2.0/av.biz/conf/av/system.properties
13:30:21,692 INFO  [WebService] Using RMI server codebase: http://joe-wang.achievo.com:3083/
13:30:21,693 INFO  [Log4jService$URLWatchTimerTask] Configuring from URL: resource:jboss-log4j.xml
13:30:22,666 WARN  [ServiceController] Problem starting service jboss:service=WebService
 java.lang.Exception: Port 3083 already in use.
      at org.jboss.web.WebServer.start(WebServer.java:233)
      at org.jboss.web.WebService.startService(WebService.java:322)
      at org.jboss.system.ServiceMBeanSupport.jbossInternalStart(ServiceMBeanSupport.java:289) 
```

首先，我认为有一些进程已经使用端口 3083。所以我使用 dos 命令显示所有端口状态。

```
netstat -a 
```

以下是所有端口列表。

```
Proto  Local Address          Foreign Address        State
TCP    0.0.0.0:21             joe-wang:0             LISTENING
TCP    0.0.0.0:80             joe-wang:0             LISTENING
TCP    0.0.0.0:82             joe-wang:0             LISTENING
TCP    0.0.0.0:135            joe-wang:0             LISTENING
TCP    0.0.0.0:443            joe-wang:0             LISTENING
TCP    0.0.0.0:445            joe-wang:0             LISTENING
TCP    0.0.0.0:902            joe-wang:0             LISTENING
TCP    0.0.0.0:912            joe-wang:0             LISTENING
TCP    0.0.0.0:1025           joe-wang:0             LISTENING
TCP    0.0.0.0:1026           joe-wang:0             LISTENING
TCP    0.0.0.0:1027           joe-wang:0             LISTENING
TCP    0.0.0.0:1045           joe-wang:0             LISTENING
TCP    0.0.0.0:1054           joe-wang:0             LISTENING
TCP    0.0.0.0:1316           joe-wang:0             LISTENING
TCP    0.0.0.0:1322           joe-wang:0             LISTENING
TCP    0.0.0.0:2074           joe-wang:0             LISTENING
TCP    0.0.0.0:2137           joe-wang:0             LISTENING
TCP    0.0.0.0:2138           joe-wang:0             LISTENING
TCP    0.0.0.0:2140           joe-wang:0             LISTENING
TCP    0.0.0.0:2382           joe-wang:0             LISTENING
TCP    0.0.0.0:3389           joe-wang:0             LISTENING
TCP    0.0.0.0:8787           joe-wang:0             LISTENING
TCP    0.0.0.0:8890           joe-wang:0             LISTENING
TCP    0.0.0.0:8898           joe-wang:0             LISTENING
TCP    0.0.0.0:8988           joe-wang:0             LISTENING
TCP    0.0.0.0:9089           joe-wang:0             LISTENING
TCP    0.0.0.0:54321          joe-wang:0             LISTENING
TCP    0.0.0.0:56789          joe-wang:0             LISTENING
TCP    10.50.70.133:139       joe-wang:0             LISTENING
TCP    10.50.70.133:445       ACA-SERVER:45627       ESTABLISHED
TCP    10.50.70.133:1411      cs109p1:5050           ESTABLISHED
TCP    10.50.70.133:1450      sip105p2:5050          ESTABLISHED
TCP    10.50.70.133:1461      tmg01:8080             ESTABLISHED
TCP    10.50.70.133:2265      tmg01:8080             ESTABLISHED
TCP    10.50.70.133:2274      tmg01:8080             ESTABLISHED
TCP    10.50.70.133:2302      tmg01:8080             ESTABLISHED
TCP    10.50.70.133:2327      tmg01:8080             ESTABLISHED
TCP    10.50.70.133:2333      tmg01:8080             ESTABLISHED
TCP    10.50.70.133:2343      tmg01:8080             ESTABLISHED
TCP    10.50.70.133:2345      tmg01:8080             ESTABLISHED
TCP    10.50.70.133:2349      tmg01:8080             ESTABLISHED
TCP    10.50.70.133:2397      tmg01:8080             ESTABLISHED
TCP    10.50.70.133:2454      tmg01:8080             ESTABLISHED
TCP    10.50.70.133:2455      tmg01:8080             ESTABLISHED
TCP    10.50.70.133:2456      tmg01:8080             ESTABLISHED
TCP    10.50.70.133:2457      tmg01:8080             ESTABLISHED
TCP    10.50.70.133:2458      tmg01:8080             ESTABLISHED
TCP    10.50.70.133:2459      tmg01:8080             ESTABLISHED
TCP    10.50.70.133:2460      tmg01:8080             ESTABLISHED
TCP    10.50.70.133:2461      tmg01:8080             ESTABLISHED
TCP    10.50.70.133:2462      tmg01:8080             ESTABLISHED
TCP    10.50.70.133:2463      tmg01:8080             ESTABLISHED
TCP    10.50.70.133:2465      tmg01:8080             ESTABLISHED
TCP    10.50.70.133:2466      tmg01:8080             ESTABLISHED
TCP    10.50.70.133:2467      tmg01:8080             ESTABLISHED
TCP    10.50.70.133:2468      tmg01:8080             ESTABLISHED
TCP    10.50.70.133:2469      tmg01:8080             ESTABLISHED
TCP    10.50.70.133:2470      tmg01:8080             ESTABLISHED
TCP    10.50.70.133:2471      tmg01:8080             ESTABLISHED
TCP    10.50.70.133:2472      tmg01:8080             ESTABLISHED
TCP    10.50.70.133:2495      sitesz:epmap           TIME_WAIT
TCP    10.50.70.133:2496      sitesz:1025            ESTABLISHED
TCP    10.50.70.133:2498      tmg01:8080             TIME_WAIT
TCP    10.50.70.133:2499      tmg01:8080             TIME_WAIT
TCP    10.50.70.133:2500      tmg01:8080             TIME_WAIT
TCP    10.50.70.133:2501      tmg01:8080             TIME_WAIT
TCP    10.50.70.133:2502      tmg01:8080             TIME_WAIT
TCP    10.50.70.133:2503      tmg01:8080             TIME_WAIT
TCP    10.50.70.133:2504      tmg01:8080             TIME_WAIT
TCP    10.50.70.133:2505      tmg01:8080             TIME_WAIT
TCP    10.50.70.133:2506      tmg01:8080             TIME_WAIT
TCP    127.0.0.1:1355         joe-wang:1356          ESTABLISHED
TCP    127.0.0.1:1356         joe-wang:1355          ESTABLISHED
TCP    127.0.0.1:1405         joe-wang:1406          ESTABLISHED
TCP    127.0.0.1:1406         joe-wang:1405          ESTABLISHED
TCP    127.0.0.1:1448         joe-wang:1449          ESTABLISHED
TCP    127.0.0.1:1449         joe-wang:1448          ESTABLISHED
TCP    127.0.0.1:1777         joe-wang:0             LISTENING
TCP    127.0.0.1:1777         joe-wang:31000         ESTABLISHED
TCP    127.0.0.1:2075         joe-wang:0             LISTENING
TCP    127.0.0.1:8307         joe-wang:0             LISTENING
TCP    127.0.0.1:12001        joe-wang:0             LISTENING
TCP    127.0.0.1:31000        joe-wang:1777          ESTABLISHED
TCP    192.168.98.1:139       joe-wang:0             LISTENING
TCP    192.168.198.1:139      joe-wang:0             LISTENING
TCP    [::]:21                joe-wang:0             LISTENING
TCP    [::]:80                joe-wang:0             LISTENING
TCP    [::]:82                joe-wang:0             LISTENING
TCP    [::]:135               joe-wang:0             LISTENING
TCP    [::]:443               joe-wang:0             LISTENING
TCP    [::]:445               joe-wang:0             LISTENING
TCP    [::]:1025              joe-wang:0             LISTENING
TCP    [::]:1026              joe-wang:0             LISTENING
TCP    [::]:1027              joe-wang:0             LISTENING
TCP    [::]:1045              joe-wang:0             LISTENING
TCP    [::]:1316              joe-wang:0             LISTENING
TCP    [::]:1322              joe-wang:0             LISTENING
TCP    [::]:2074              joe-wang:0             LISTENING
TCP    [::]:2137              joe-wang:0             LISTENING
TCP    [::]:2138              joe-wang:0             LISTENING
TCP    [::]:2140              joe-wang:0             LISTENING
TCP    [::]:2382              joe-wang:0             LISTENING
TCP    [::]:3389              joe-wang:0             LISTENING
TCP    [::]:8890              joe-wang:0             LISTENING
TCP    [::]:8898              joe-wang:0             LISTENING
TCP    [::]:8988              joe-wang:0             LISTENING
TCP    [::]:9089              joe-wang:0             LISTENING
TCP    [::]:54321             joe-wang:0             LISTENING
TCP    [::]:56789             joe-wang:0             LISTENING
TCP    [::1]:2075             joe-wang:0             LISTENING
TCP    [::1]:8307             joe-wang:0             LISTENING
TCP    [::1]:12001            joe-wang:0             LISTENING
UDP    0.0.0.0:123            *:*
UDP    0.0.0.0:500            *:*
UDP    0.0.0.0:1434           *:*
UDP    0.0.0.0:3600           *:*
UDP    0.0.0.0:4500           *:*
UDP    0.0.0.0:5355           *:*
UDP    0.0.0.0:54847          *:*
UDP    0.0.0.0:56477          *:*
UDP    0.0.0.0:57586          *:*
UDP    0.0.0.0:64553          *:*
UDP    10.50.70.133:137       *:*
UDP    10.50.70.133:138       *:*
UDP    10.50.70.133:1900      *:*
UDP    10.50.70.133:55282     *:*
UDP    127.0.0.1:1900         *:*
UDP    127.0.0.1:49890        *:*
UDP    127.0.0.1:50195        *:*
UDP    127.0.0.1:50469        *:*
UDP    127.0.0.1:52636        *:*
UDP    127.0.0.1:54848        *:*
UDP    127.0.0.1:55285        *:*
UDP    127.0.0.1:56474        *:*
UDP    127.0.0.1:62117        *:*
UDP    192.168.98.1:137       *:*
UDP    192.168.98.1:138       *:*
UDP    192.168.98.1:1900      *:*
UDP    192.168.98.1:55283     *:*
UDP    192.168.198.1:137      *:*
UDP    192.168.198.1:138      *:*
UDP    192.168.198.1:1900     *:*
UDP    192.168.198.1:55284    *:*
UDP    [::]:123               *:*
UDP    [::]:500               *:*
UDP    [::]:1434              *:*
UDP    [::]:4500              *:*
UDP    [::]:5355              *:*
UDP    [::1]:1900             *:*
UDP    [::1]:55281            *:*
UDP    [fe80::35f5:46d0:818f:3594%16]:1900  *:*
UDP    [fe80::35f5:46d0:818f:3594%16]:55280  *:*
UDP    [fe80::b01e:59e5:ee84:87f9%11]:1900  *:*
UDP    [fe80::b01e:59e5:ee84:87f9%11]:55278  *:*
UDP    [fe80::b4e4:39b:b59a:9463%14]:1900  *:*
UDP    [fe80::b4e4:39b:b59a:9463%14]:55279  *:* 
```

但是我发现3083不在上面的端口列表中。谁能告诉我为什么？我错过了什么吗？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T22:23:17.057

在不知道你在运行什么环境的情况下，很难说它是什么。这是Windows的解释：

端口号：3083（Windows 7/Windows Vista/Windows XP/Windows Server 系列）TL1 Telnet- 使用的协议：tcp/udp 服务类型：tl1-telnet 已知端口 3083 漏洞利用：是 已知端口 3083 安全风险：是

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-11T13:29:41.080

您必须更改端口号。运行eclipse点击服务器并更改 ![在此处输入图像描述](../Images/8db1866ce9af5b6a5169d46ca5432456.png)1。

# css - 样式不适用于生产中的按钮

> ID：14995492
> 
> 赞同：0
> 
> 时间：2013-02-21T05:53:54.250
> 
> 标签：css, ruby-on-rails-3.2

我有一个包含按钮的 rails3 应用程序。部署到实时服务器后，该字体不仅适用于按钮。但是，相同的字体适用于文本消息。这个问题在本地不会出现。在本地主机中一切都很好。

请提出解决方案。

# ios - Xcode 仪器使用 iOS 6.1.2 升级？

> ID：14995495
> 
> 赞同：0
> 
> 时间：2013-02-21T05:54:04.123
> 
> 标签：ios, xcode, instruments, profile

刚刚错误地将我的 iPhone（它也兼作我的开发设备）升级到 iOS 6.1.2；Xcode 将在手机上运行我的开发工作，但我正在尝试分析内存使用情况并且仪器屏幕不起作用（出现但不会运行）。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T07:36:10.607

在经历了一段时间后，我有一个答案给你。您在 Instruments 中看不到的是一些在后台进行的活动。打开 Xcode，然后打开 Organizer 以查看设备。选择您要定位的那个，您会看到它正在准备设备。完成后再次查看仪器。在设备可用之前，您可能需要重新启动 Instruments。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T20:36:13.030

好的，重启了很多次后，没有新的下载，它又开始工作了。我对 XCode 的了解比我想象的要少。

# jquery - 我无法让 jquery 插件 autoNumeric 工作

> ID：14995496
> 
> 赞同：0
> 
> 时间：2013-02-21T05:54:06.433
> 
> 标签：jquery

我对 jquery 相当陌生，但正在学习。我在程序顶部拉入 jquery 并在头部末尾附近添加了 autoNumeric 插件。

```
<script src="jquery/js/jquery-1.9.1.js"></script> 
```

... #numeric { 文本对齐：右；} ...

```
<script src="jquery/autoNumeric-master/autoNumeric.js" type="text/javascript"></script>
<script> $("#numeric").autoNumeric('init'); </script>
<script> alert("just loaded and inited autonumeric"); </script> 
</head> 
```

......

```
<input id="numeric" class="input" name="Labor" type="text" size="20" maxlength="10" /> 
```

我有另一个用于分页的 jquery 插件。

它必须是简单的。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T12:55:14.457

尝试这个

```
 <script type="text/javascript">
     $(document).ready(function() { 
        $("#numeric").autoNumeric('init');
      }); 
     </script> 
```

而不是（用上面的替换你的原件）

```
<script> $("#numeric").autoNumeric('init'); </script> 
```

# heroku - 无法从 CLI 访问 Heroku postgres，SSL 支持问题

> ID：14995498
> 
> 赞同：4
> 
> 时间：2013-02-21T05:54:20.530
> 
> 标签：heroku, heroku-toolbelt

我无法连接到 Heroku 上的 Postgres 数据库。我`heroku pg:psql`从终端运行，并得到错误：

```
psql: sslmode value "require" invalid when SSL support is not compiled in 
```

我在网上发现这个错误的所有实例都与 php 相关，而且它最近才开始起作用。有人知道这是怎么回事吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T14:02:03.210

您的本地 psql 二进制文件未使用 SSL 支持进行编译。您将需要使用 SSL 在本地重新编译（或以其他方式为您的操作系统获取二进制文件）postgres。

# java - java中的数组长度错误

> ID：14995500
> 
> 赞同：-6
> 
> 时间：2013-02-21T05:54:27.173
> 
> 标签：java, arrays

我已经定义了一个用 12 个元素初始化的数组，但它的*长度*属性的值被 JVM 设置为 10，我无法访问第 11 个和第 12 个元素。我应该怎么做才能解决问题？假设这个数组定义如下：

```
private static final Type[] p = new Type[]{ null, null, null, null, null, null, null, null, null, null, null, null }; 
```

在某些函数中，我使用 Type x = p[11]; 然后我得到上述异常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T06:08:03.980

```
public static void main(String[] args) {
    int[] arr ={1,2,3,4,5,6,7,8,9,10,11,12};
    System.out.println(arr[11]);
} 
```

这将打印 12。数组索引从 0 开始到 arr.lenghth-1。所以如果你想访问 arr[12] 你会得到 java.lang.ArrayIndexOutOfBoundsException。

```
public class SetTest {
private static final String[] arr1 = { null, null, null, null, null, null,
        null, null, null, null, null, null };

public static void main(String[] args) {
    String p = arr1[11];
    System.out.println(p);
    System.out.println(arr1.length);

}
} 
```

输出：

```
null
12 
```

# android - 永久打开应用程序后，将我的 android 应用程序最小化

> ID：14995501
> 
> 赞同：0
> 
> 时间：2013-02-21T05:54:35.570
> 
> 标签：android

我正在开发一个 android 应用程序，一旦用户打开该应用程序，我想保持最小化，直到设备重新启动。我读到默认情况下，android 主页按钮会最小化应用程序，但似乎我的应用程序在我单击主页按钮后就会关闭。如果我再次打开我的应用程序，它会从登录页面显示。我希望它打开用户上次查看的页面。

android 最低版本和目标版本分别为 3 和 15。谁能让我知道如何实现上述目的？

先谢谢各位大佬！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T06:08:31.560

如果我正确理解你的问题。你需要做很多事情。

**方式最小化已经运行的应用程序。**

```
Intent startMain = new Intent(Intent.ACTION_MAIN);
startMain.addCategory(Intent.CATEGORY_HOME);
startMain.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(startMain); 
```

**恢复到上次运行的活动**

[在此](http://developer.android.com/guide/topics/manifest/activity-element.html)链接中阅读有关 android:launchMode 的信息。我认为标准模式是默认的，应该适合你。

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-13T15:30:39.790

只需单击**设置** 并单击**开发人员选项**并**打开**它现在最后向下查看如果选中则**不要保留活动然后取消选择它。**你的问题解决了。没有享受您的 Android 手机。

# qt - 为什么在 QTreeWidget 中没有 find 项来获取唯一项？

> ID：14995505
> 
> 赞同：0
> 
> 时间：2013-02-21T05:54:47.673
> 
> 标签：qt, qtreewidget, qtreewidgetitem

我在 QTreeWidget 中有唯一的 QTreeWidgetItems，我正在使用 findItems() 来查找特定项目，它返回项目列表。从此列表中取出第一项并存储在 QTreeWidgetItem 中。但我想知道是否有任何方法可以找到一个只返回一个项目的项目，如果找到的话？

# git - 如何在 git 存储库中获取旧版本文件的副本？

> ID：14995506
> 
> 赞同：59
> 
> 时间：2013-02-21T05:54:48.473
> 
> 标签：git, git-checkout

我有一个`.tex`来自多次提交的文件版本，我想获得一份副本。对于具有我想要的文件版本的提交，我有 sha1 哈希值。我不想替换文件的当前版本。相反，我只想获得它的单独副本，以反映其在旧版本中的状态。

许多类似的问题建议使用`git checkout <sha1> -- file.tex`，但这只是不断给出“错误：pathspec 'file.tex' 与 git 已知的任何文件不匹配。”

我感兴趣的文件最初存在于存储库的顶级目录中。我目前在存储库的子目录中尝试运行此命令，以便在子目录中获取旧版本的 file.tex。

这可能吗？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2013-02-21T06:56:44.873

您可以使用`git cat-file`将文件的内容转储到标准输出并将其重定向到您想要的目标：

```
git cat-file -p <sha1>:./file.tex > wherever.tex 
```

如果您在存储库的子目录中，则这`./`是必需的，如果您在存储库的顶层，则可以省略它。此外，这可能不适用于旧版本的 git，在这种情况下，您需要显式提供文件相对于存储库根目录的完整路径。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-21T06:00:06.873

我认为最好的解决方案是暂时覆盖您的文件。在您的存储库的顶层：

```
git checkout <sha1> file.tex
cp file.tex directory
git checkout HEAD file.tex 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2018-11-05T20:09:25.130

**`git show`**与绝对存储库路径一起 **使用：**

> workdir$ git show revision:repo/module/package/code.file > code.file.old

或相对于当前目录的路径：

> package$ git show revision:./code.file > workdir/code.file.old

与检出文件相比，`show`它本质上不会改变您的工作空间，您可以对输出做任何您喜欢的事情。

归功于[这个答案](https://stackoverflow.com/a/338470/2835086)，当然，请参阅[手册](https://git-scm.com/docs/git-show)中的全部详细信息。

# blackberry - 在 BlackBerry 中取消计时器 - Java

> ID：14995507
> 
> 赞同：1
> 
> 时间：2013-02-21T05:54:56.877
> 
> 标签：blackberry, java-me, timer

我正在使用具有多个计时器的 BlackBerry 应用程序来安排将报告发送到服务器平台。在我更改逻辑以优先报告报告之前，一切正常。因此，现在我正在检查，例如，报告 A 是否已打开并且用户也激活了报告 B，那么只有报告 B 应该通过并且报告 A 应该停止直到 B 被激活。一旦 B 被停用（定时器取消），报告 A 应该恢复。但是，即使代码在取消计时器任务代码中循环，报告 A 仍会继续执行，而 B 仍处于激活状态。

```
FieldChangeListener reportingListener = new FieldChangeListener() {   
        public void fieldChanged(Field field, int context) 
        {
            try {

            if (field == slider) {
                int i = slider.getValue();
                if(i==0) 
                    lblInterval.setText(1+" minute");
                if(i==1) 
                    lblInterval.setText(2+" minutes");
                if(i==2) 
                    lblInterval.setText(5+" minutes");
                if(i==3) 
                    lblInterval.setText(10+" minutes");
                if(i==4) 
                    lblInterval.setText(15+" minutes");
                if(i==5) 
                    lblInterval.setText(30+" minutes");
                if(i==6) 
                    lblInterval.setText(1+" hour");
                if(i==7) 
                    lblInterval.setText(2+" hours");
                if(i==8) 
                    lblInterval.setText(6+" hours");
                if(i==9) 
                    lblInterval.setText(12+" hours");
                if(i==10) 
                    lblInterval.setText(24+" hours");
                setSliderPosition(i);
                value=setLblIntervalValue(i);
                value2=setGpsTimerIntervalValue(i);
                gpsReportValue=lblInterval.getText();
                gpsIntervalValue1=setGpsTimerIntervalValue(i);
            }

            if (PersistentStoreHelper.persistentHashtable.containsKey("image")) 
                 {
            boolean trackONOFFImage = ((Boolean) PersistentStoreHelper.persistentHashtable.get("image")).booleanValue();
            if(trackONOFFImage==true)
            {
                if (PersistentStoreHelper.persistentHashtable.containsKey("panic"))
                 {
                     boolean panicImage = ((Boolean)PersistentStoreHelper.persistentHashtable.get("panic")).booleanValue();
                     if(panicImage==true)
                     {
                         MyScreen.currentlyReporting.setText("PANIC ALARM TRIGGERED");
                         if (PersistentStoreHelper.persistentHashtable.containsKey("tabTrackValid"))
                     {
                         boolean trackingTab = ((Boolean)PersistentStoreHelper.persistentHashtable.get("tabTrackValid")).booleanValue();
                         if(trackingTab==false)
                         {
                            trackSlider.cancel();
                         }
                        PersistentStoreHelper.persistentHashtable.put("tabTrackValid", Boolean.TRUE);
                     }

                     }
                     else
                     {
                        //int gpsIntervalValue1=setGpsTimerIntervalValue(i);
                    if (PersistentStoreHelper.persistentHashtable.containsKey("gpsTimerIntervalValue")) 
                     {
                        String intervalValue=((String)PersistentStoreHelper.persistentHashtable.get("gpsTimerIntervalValue"));
                        if(gpsIntervalValue1==Integer.parseInt(intervalValue))
                        {
                            //do nothing
                        }
                        else
                        {
                            trackSlider = new TimerTask() {
                                 public void run() {

                                    try {
                                        UiApplication.getUiApplication().invokeLater(new Runnable() 
                                        {
                                            public void run() {
                                               //Dialog.alert("Invalid login details");
                                            }
                                        });
                                        sendTrackingReport();
                                    } catch (Exception e) {
                                        Dialog.alert("Unable to track at the new interval set");
                                    }

                                 }
                              };
                              //trackSlider.run();
                              trackingTimerSlider.scheduleAtFixedRate(trackSlider , 0, gpsIntervalValue1);
                             PersistentStoreHelper.persistentHashtable.put("tabTrackValid", Boolean.FALSE);
                        }
                     }
                     }
                 }

            }//this
                }

        } catch (IllegalStateException e) {
            //Dialog.alert("CANCEL TRACK1");
            e.printStackTrace();
        } catch (NullPointerException e) {
            //Dialog.alert("CANCEL TRACK2");
            e.printStackTrace();
        }
        }   
     }; 
```

注意：报告 A = 跟踪。报告 B = 恐慌。恐慌优先于跟踪。滑块正在更改计时器间隔值。

我调试了我的代码，当它进入循环并取消请求报告的计时器任务时，我仍然看到这些报告正在通过。我没有正确取消计时器吗？请指教。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T14:30:28.553

从[`TimerTask.cancel`javadoc](http://www.blackberry.com/developers/docs/5.0.0api/java/util/TimerTask.html#cancel%28%29)：

> *...如果任务已被安排重复执行，它将永远不会再次运行。（如果此调用发生时任务正在运行，则任务将运行到完成，但永远不会再次运行。） ...*

所以首先，`cancel`从线程调用不会立即停止 Timer 线程，如您所见。

此外，您每次都在屏幕上创建一个新的计时器：

```
trackSlider = new TimerTask() 
```

因此，如果您在应用程序运行期间创建多个屏幕实例，则可能会创建多个相同类型的计时器。

# magento - 如何让单个管理员只访问单个商店的产品

> ID：14995510
> 
> 赞同：7
> 
> 时间：2013-02-21T05:55:02.437
> 
> 标签：magento, magento-1.7, magento-1.6

在 magento 中，我有 3 个网站，它包含 6 到 7 个商店视图。我希望单个管理员只能访问单个商店的产品。他不应该修改其他商店的产品。我怎样才能做到这一点？

我已阅读磁电机文档，以在系统/权限/角色中创建新管理员并在那里进行修改。但是尝试这样做时，新管理员仅限于创建产品或仪表板或运输或税收模块。但我需要像新管理员一样只能访问一家商店..

那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-11T10:48:11.250

我知道这是一个有点晚的回复，但是任何有兴趣的人，只要您/您的客户使用 Magento Enterprise 版本，mprototype 的回答是完全有效的。签入版本 1.12 及更高版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-18T09:16:21.713

我不知道我是否迟到了，但其中任何一个都可以满足您的要求。事实上，它将提供更大的灵活性。

[http://www.aitoc.com/en/magentomods_advanced_permissions.html](http://www.aitoc.com/en/magentomods_advanced_permissions.html) [http://amasty.com/magento-advanced-permissions.html](http://amasty.com/magento-advanced-permissions.html)

快乐编码！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T06:22:08.573

当你去：

系统 -> 权限 -> 角色

在定义角色时，您可以选择自定义范围并选中您想要访问的商店。

# python - Python 线程在 for 循环中

> ID：14995511
> 
> 赞同：1
> 
> 时间：2013-02-21T05:55:11.147
> 
> 标签：python, multithreading, sublimetext2

我正在创建一个 python 脚本，它从 API 中获取信息并创建一个上下文菜单，让您可以访问它们。我想使用线程，因为它在一次调用 API 时运行速度有点慢，但我不确定如何使用我的代码实现线程。我正在使用此站点进行线程参考：[http](http://www.ibm.com/developerworks/aix/library/au-threadingpython/) ://www.ibm.com/developerworks/aix/library/au-threadingpython/ 我了解代码中的逻辑我只是不想为每个方法编写线程类我想要穿线。

这是创建上下文菜单然后解析返回的json的类，我想我应该将它添加到运行命令中的for循环中。任何帮助是极大的赞赏。

```
class SyncsnippetsCommand(sublime_plugin.TextCommand):

  def __init__(self, queue):
      threading.Thread.__init__(self)
      self.queue = queue

  def buildLexerDict(self,snippets):
      lexers = snippets[0]['user']['lexers']
      lexer_dict = {}
      for lexer in lexers:
          lexer_dict[lexer] = []
      return lexer_dict

  def buildsnippetsContextDict(self,snippets,lexer_dict):
      snippets_dict = lexer_dict
      for snippet in snippets:
          snippets_dict[snippet['lexer']].append({"id":str(snippet['id']),
                                         "title":snippet['title']})
      return snippets_dict

  def run(self, edit):
      snippet_url = buildsnippetURL()
      snippets_count = 1;
      snippets = getsnippets(snippet_url)
      context_menu = '['
      context_menu += '\n\t{ "caption": "snippets", "id": "file", "children":'
      context_menu += '\n\t\t['
      if snippets == None:
          {"caption":"No snippets available"}
      else:
          snippets = snippets['objects']
          lexers = self.buildLexerDict(snippets)
          snippets_dict = self.buildsnippetsContextDict(snippets, lexers)
          for j,key in reversed(list(enumerate(reversed(snippets_dict.keys())))):
              ... loop through JSON and create menu ...
              if j == 0:
                  context_menu += ''
              else:
                  context_menu += ',' 
      context_menu += '\n\t\t]'
      context_menu += '\n\t}'
      context_menu += '\n]'
      f = open(sublime.packages_path() + '\snippetSync\\Context.sublime-menu', 'w')
      f.write(context_menu)
      f.close
      self.view.set_status('snippet', 'snippet Sync: Added ' + str(snippets_count) + ' snippets from your account.')
      sublime.set_timeout(lambda: self.view.erase_status('snippet'), 3000)
      return 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T04:57:42.807

这是一个简单的带有线程的 Sublime Text 2 插件。它的作用是`Hello World!`在 3 秒后插入。您会注意到，在这三秒钟内您仍然可以移动光标。

在您的情况下，您似乎只需要从 API 中获取一堆片段并从返回的数据中创建一个上下文菜单。然后底部会有一个通知，告诉您添加了多少片段。我可能是错的，但您应该能够修改此代码以使您的插件工作。

```
import threading
import time
import sublime
import sublime_plugin

"""
The command just creates and runs a thread.
The thread will do all the work in the background.

Note that in your Thread constructor, you will need to pass in an 
instance of your Command class to work with in your thread.
"""
class ExampleCommand(sublime_plugin.TextCommand):

    def run(self, edit):

        exampleThread = ExampleThread(self, edit)
        exampleThread.start()

"""
Extend the Thread class and add your functionality in 
the run method below.

One thing to remember when moving your code over is 
you need to use self.cmd instead of self.
"""
class ExampleThread(threading.Thread):

    """
    Remember to pass in the parameters you need
    in this thread constructor.
    """
    def __init__(self, cmd, edit):
        threading.Thread.__init__(self)
        self.cmd = cmd
        self.edit = edit

    """
    Add your functionality here.

    If you need to access the main thread, you need to
    use sublime.set_timeout(self.callback, 1).

    In my example here, you can't call insert text into the editor
    unless you are in the main thread.

    Luckily that is fast operation.

    Basically, time.sleep(3) is a slow operation and will block, hence it
    is run in this separate thread.
    """
    def run(self):
        time.sleep(3)
        sublime.set_timeout(self.callback, 1)

    """
    This is the callback function that will be called to 
    insert HelloWorld. 

    You will probably need to use this to set your status message at 
    the end. I'm pretty sure that requires that you be on main thread 
    to work.
    """
    def callback(self):
        self.cmd.view.insert(self.edit, 0, "Hello, World!") 
```

**更新**

我发现有时间使用我上面概述的方法集成您的代码片段。您仍然需要填写一些空白，但希望这能让您了解将代码放在哪里。我测试了基本骨架仍然有效，这就是为什么在这个例子中你正在构建上下文菜单的部分被注释掉了。

```
import threading
import time
import sublime
import sublime_plugin

def buildsnippetURL():
    return ""

def getsnippets(snippet_url):
    time.sleep(3)
    return ""

class SyncsnippetsCommand(sublime_plugin.TextCommand):
    def run(self, edit):
        syncsnippetsThread = SyncsnippetsThread(self, edit)
        syncsnippetsThread.start()

class SyncsnippetsThread(threading.Thread):
    def __init__(self, cmd, edit):
        threading.Thread.__init__(self)
        self.cmd = cmd
        self.edit = edit

    def buildLexerDict(self,snippets):
        lexers = snippets[0]['user']['lexers']
        lexer_dict = {}
        for lexer in lexers:
            lexer_dict[lexer] = []
        return lexer_dict

    def buildsnippetsContextDict(self,snippets,lexer_dict):
        snippets_dict = lexer_dict
        for snippet in snippets:
            snippets_dict[snippet['lexer']].append({"id":str(snippet['id']),
                                         "title":snippet['title']})
        return snippets_dict

    def run(self): 
        snippet_url = buildsnippetURL()
        snippets_count = 1;
        snippets = getsnippets(snippet_url)

        """
        context_menu = '['
        context_menu += '\n\t{ "caption": "snippets", "id": "file", "children":'
        context_menu += '\n\t\t['
        if snippets == None:
            {"caption":"No snippets available"}
        else:
            snippets = snippets['objects']
            lexers = self.buildLexerDict(snippets)
            snippets_dict = self.buildsnippetsContextDict(snippets, lexers)
            for j,key in reversed(list(enumerate(reversed(snippets_dict.keys())))):
                ... loop through JSON and create menu ...
                if j == 0:
                    context_menu += ''
                else:
                    context_menu += ',' 
        context_menu += '\n\t\t]'
        context_menu += '\n\t}'
        context_menu += '\n]'
        f = open(sublime.packages_path() + '\snippetSync\\Context.sublime-menu', 'w')
        f.write(context_menu)
        f.close
        """

        sublime.set_timeout(lambda: self.callback(snippets_count), 1)

    def callback(self, snippets_count):
        self.cmd.view.set_status('snippet', 'snippet Sync: Added ' + str(snippets_count)  + ' snippets from your account.')
        sublime.set_timeout(lambda: self.cmd.view.erase_status('snippet'), 3000) 
```

# c++ - OpenCV：如何找到运动信息的质心/质心

> ID：14995512
> 
> 赞同：2
> 
> 时间：2013-02-21T05:55:11.057
> 
> 标签：c++, opencv, video-processing, motion-detection, centroid

问题是我无法使用现有代码实现质心，在检测到的对象以矩形为边界后使用哪个图像对象等，以便我可以获得路径的轨迹。我正在使用`Opencv2.3`。我发现有 2 种方法 - [Link1](https://stackoverflow.com/questions/11542121/finding-an-images-contours-centroid)和[Link2](https://stackoverflow.com/questions/9074202/opencv-2-centroid)谈论时刻的使用。另一种方法是使用边界框[Link3](https://stackoverflow.com/questions/10942742/opencv-c-usage-of-cvmoments)的信息。矩量法需要图像阈值处理。然而，当使用 SURF 时，图像是灰度的。因此，在传递灰度图像进行阈值处理时会显示白色图像！现在，我很难理解我应该如何使用下面的代码计算质心（尤其是我应该使用什么而不是`points[i].x`因为我正在使用

```
obj.push_back( kp_object[ good_matches[i].queryIdx ].pt );
scene.push_back( kp_image[ good_matches[i].trainIdx ].pt ) 
```

在我的情况下`numPoints=good_matches.size()`，表示特征点的数量），如文档中所述。如果有人可以提出如何将 SURF 与质心一起使用的实现，那将会很有帮助。

```
#include <stdio.h>
#include <iostream>
#include "opencv2/core/core.hpp"
#include "opencv2/features2d/features2d.hpp"
#include "opencv2/highgui/highgui.hpp"
#include "opencv2/imgproc/imgproc.hpp"
#include "opencv2/calib3d/calib3d.hpp"

using namespace cv;

int main()
{
    Mat object = imread( "object.png", CV_LOAD_IMAGE_GRAYSCALE );

    if( !object.data )
    {
        std::cout<< "Error reading object " << std::endl;
        return -1;
    }

    //Detect the keypoints using SURF Detector
    int minHessian = 500;

    SurfFeatureDetector detector( minHessian );
    std::vector<KeyPoint> kp_object;

    detector.detect( object, kp_object );

    //Calculate descriptors (feature vectors)
    SurfDescriptorExtractor extractor;
    Mat des_object;

    extractor.compute( object, kp_object, des_object );

    FlannBasedMatcher matcher;

    VideoCapture cap(0);

    namedWindow("Good Matches");

    std::vector<Point2f> obj_corners(4);

    //Get the corners from the object
    obj_corners[0] = cvPoint(0,0);
    obj_corners[1] = cvPoint( object.cols, 0 );
    obj_corners[2] = cvPoint( object.cols, object.rows );
    obj_corners[3] = cvPoint( 0, object.rows );

    char key = 'a';
    int framecount = 0;
    while (key != 27)
    {
        Mat frame;
        cap >> frame;

        if (framecount < 5)
        {
            framecount++;
            continue;
        }

        Mat des_image, img_matches;
        std::vector<KeyPoint> kp_image;
        std::vector<vector<DMatch > > matches;
        std::vector<DMatch > good_matches;
        std::vector<Point2f> obj;
        std::vector<Point2f> scene;
        std::vector<Point2f> scene_corners(4);
        Mat H;
        Mat image;

        cvtColor(frame, image, CV_RGB2GRAY);

        detector.detect( image, kp_image );
        extractor.compute( image, kp_image, des_image );

        matcher.knnMatch(des_object, des_image, matches, 2);

        for(int i = 0; i < min(des_image.rows-1,(int) matches.size()); i++) //THIS LOOP IS SENSITIVE TO SEGFAULTS
        {
            if((matches[i][0].distance < 0.6*(matches[i][4].distance)) && ((int) matches[i].size()<=2 && (int) matches[i].size()>0))
            {
                good_matches.push_back(matches[i][0]);
            }
        }

        //Draw only "good" matches
        drawMatches( object, kp_object, image, kp_image, good_matches, img_matches, Scalar::all(-1), Scalar::all(-1), vector<char>(), DrawMatchesFlags::NOT_DRAW_SINGLE_POINTS );

        if (good_matches.size() >= 4)
        {
            for( int i = 0; i < good_matches.size(); i++ )
            {
                //Get the keypoints from the good matches
                obj.push_back( kp_object[ good_matches[i].queryIdx ].pt );
                scene.push_back( kp_image[ good_matches[i].trainIdx ].pt );
            }

            H = findHomography( obj, scene, CV_RANSAC );

            perspectiveTransform( obj_corners, scene_corners, H);

            //Draw lines between the corners (the mapped object in the scene image )
            line( img_matches, scene_corners[0] + Point2f( object.cols, 0), scene_corners[1] + Point2f( object.cols, 0), Scalar(0, 255, 0), 4 );
            line( img_matches, scene_corners[1] + Point2f( object.cols, 0), scene_corners[2] + Point2f( object.cols, 0), Scalar( 0, 255, 0), 4 );
            line( img_matches, scene_corners[2] + Point2f( object.cols, 0), scene_corners[3] + Point2f( object.cols, 0), Scalar( 0, 255, 0), 4 );
            line( img_matches, scene_corners[3] + Point2f( object.cols, 0), scene_corners[0] + Point2f( object.cols, 0), Scalar( 0, 255, 0), 4 );
        }

        //Show detected matches
        imshow( "Good Matches", img_matches );

        key = waitKey(1);
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:47:28.653

所以，你已经有了你的点单，

```
obj.push_back( kp_object[ good_matches[i].queryIdx ].pt );
scene.push_back( kp_image[ good_matches[i].trainIdx ].pt ); 
```

我认为，基于此计算质心是完全有效的，无需进一步的图像处理。

有两种方法，“质心”方式，这只是所有点的平均位置，如下所示：

```
Point2f cen(0,0);
for ( size_t i=0; i<scene.size(); i++ )
{
    cen.x += scene[i].x;
    cen.y += scene[i].y;
}
cen.x /= scene.size(); 
cen.y /= scene.size(); 
```

和“bbox 中心”的方式

```
Point2f pmin(1000000,1000000);
Point2f pmax(0,0);
for ( size_t i=0; i<scene.size(); i++ )
{
    if ( scene[i].x < pmin.x ) pmin.x = scene[i].x;
    if ( scene[i].y < pmin.y ) pmin.y = scene[i].y;
    if ( scene[i].x > pmax.x ) pmax.x = scene[i].x;
    if ( scene[i].y > pmax.y ) pmax.y = scene[i].y;
}
Point2f cen( (pmax.x-pmin.x)/2,  (pmax.y-pmin.y)/2); 
```

请注意，结果会有所不同！它们仅对圆形和正方形、点对称对象相同

```
// now draw a circle around the centroid:
cv::circle( img, cen, 10, Scalar(0,0,255), 2 );

// and a line connecting the query and train points:
cv::line( img, scene[i], obj[i], Scalar(255,0,0), 2 ); 
```

# sql - PHPMYADMIN 中的过程和触发器

> ID：14995513
> 
> 赞同：0
> 
> 时间：2013-02-21T05:55:10.943
> 
> 标签：sql, database, database-design, stored-procedures, phpmyadmin

在哪里创建以及如何在 phpmyadmin 中运行过程和触发器？
我可以在 MYSQL 控制台中创建和运行程序，但不能在 phpmyadmin 中。
当我试图调用在 MYSQL 控制台中创建的过程时，将我带到 phpmyadmin 主页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T06:12:30.707

请按照以下步骤操作：-

```
 1\. Open PhpMyAdmin
    2\. Select the database which you want to create Procedure
    3\. in the right Side you can see the **Routines** click on that you can see the Procedures already created for the availlable database
    4\. To create Procedure Click on SQL (TAB) then type your procedure. you then Go, After that you can see the Procedure in **Routines** section 
```

# mysql - mysql to excel - 错误的字符集输出

> ID：14995521
> 
> 赞同：0
> 
> 时间：2013-02-21T05:56:16.847
> 
> 标签：mysql, excel, odbc, export-to-excel, cp1252

**服务器**：RHEL 5.5、2.6.18-194.el5、MySQL 5.0.77

**客户端**：Win 7 Corporate x86、MS Excel 2010、MySQL ODBC 5.2w 驱动程序

在服务器上， mysql base `test`，并且有一个 table `rr`。每次 insert.sh 启动它都会截断`test`。`rr`并向其写入新值。我需要的是excel来获取这些数据。

因此，我使用 select 将 ODBC 驱动程序连接到基础，一切正常，值写入 excel 中的列，但仅当我不使用西里尔字母时（我真的需要使用它们）。当我这样做时，输出就像“Ñ€Ð¾Ð²Ð°Ð»Ð¾ÑÑŒ Ð¿”。我想这是 UTF-8 → CP1252。

所以，我的猜测是，excel 只使用 cp1252。我尝试删除 db 并使用 CHARACTER SET latin1 再次创建它（这是 cp 1252 的 mysql 名称，对吗？），然后对表做了同样的事情，但我仍然得到相同的输出。

我还将 MySQL 连接器中的字符集更改为 latin1，但仍然没有运气。有什么我想念的吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-07-27T16:10:35.393

Excel 文件的字符集是 UTF-8？要使用此字符集保存您的 Excel 文件，请尝试：另存为... → 服务 → 字符集

# cakephp - 如何创建基于数据库表的动态表单助手？

> ID：14995529
> 
> 赞同：1
> 
> 时间：2013-02-21T05:57:08.877
> 
> 标签：cakephp, helper

使用 cakephp 2.3.0 助手的条件是：1）我需要以多种形式使用许多下拉框，我不想在每个控制器中都做 loadModel（12）2）需要从数据库表 3）我正在考虑不为表烘焙文件。4）想使用自定义mysql查询。

例如，我有一个名为国家的表，下拉列表应该是 key=>abbreviated name 和 name=>full name。

任何建议将不胜感激..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:04:31.780

我在 helper ` 中创建了一个函数

```
public function getDropDownList($table,$key,$value)
    {
        //$db =& ConnectionManager::getDataSource('default');
        $fields = $key.','.$value;
        $CommercialHeaders =& ClassRegistry::init('tablename');
        $sql = $CommercialHeaders->query('select '.$fields.' from '.$table.' as DropDown');
        foreach($sql as $val)
        {
            $countryList[$val['DropDown'][$key]] = $val['DropDown'][$value];    

        }
        //debug($countryList);
        return $countryList;    
    } 
```

` 并且只是通过传递表名和字段从视图中调用它，这将生成一个数组，因此它解决了我的问题，而无需在 appcontroller 中设置它或使用 requestAction

# android - 如何在我的 Android 应用中提供“隐藏”菜单选项？

> ID：14995531
> 
> 赞同：1
> 
> 时间：2013-02-21T05:57:22.717
> 
> 标签：android

我想向我的Android应用程序添加一个“隐藏”或“开发人员”菜单选项以进行调试目的 - 基本上我只想要一个菜单​​选项，在选中时，将应用程序数据库复制到用户磁盘上某处的文件.

有没有简单的方法来实现这一目标？我更喜欢通常隐藏但可以“在现场”启用的东西，但需要快速简便的编译标志的东西也可以。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T06:11:07.737

据我所知，在 Android 中没有开发人员唯一的选择来做独家的事情。您可以派生出您自己的 ie - 10 次单击特定视图、任何活动的特定手势。由你决定！

# iphone - 如何在 iphone 中解析多个 .xml 文件？

> ID：14995533
> 
> 赞同：3
> 
> 时间：2013-02-21T05:57:28.620
> 
> 标签：iphone, ios6, xml-parsing, nsxmlparser

这是我对 xmls 的第一次体验，所以如果我的问题质量低，请不要对我苛刻。我正在开发应用程序，我使用服务器中的 xml 文件检索所有数据。

在这里发布问题之前，我阅读了一些关于 xml 文件解析的[教程。](https://stackoverflow.com/questions/11323326/xml-parsing-in-ios-tutorial)但是当我开始在我的应用程序中实现它时，当我尝试解析第二个 Xml 文件等等时，我完全感到困惑。

现在我想用一些截图来解释我的应用程序流程，以便每个人都能轻松实现我想要的。

1.  [第一视角](http://tinypic.com/view.php?pic=280qq36&s=6)
2.  [第二种观点](http://tinypic.com/view.php?pic=9u3v9y&s=6)
3.  [第三视图](http://tinypic.com/view.php?pic=zn3lh3&s=6)

现在，当我在第一个视图中单击任何行时，它会转到第二个视图并在第二个视图中显示所有相关数据，当我单击第二个视图中的任何项目时，它会转到第三个视图并显示有关该特定项目的详细信息。

在解释了应用程序流程之后，现在我展示我的代码到目前为止我尝试过的内容。按照教程，我只是简单地将类（XMLParser、Book）拖到我的应用程序中进行测试。

代码：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
 {
NSURL *url = [[NSURL alloc] initWithString:@"Firstviewxmlurl"];
NSXMLParser *xmlParser = [[NSXMLParser alloc] initWithContentsOfURL:url];
XMLParser *parser = [[XMLParser alloc] initXMLParser];
[xmlParser setDelegate:parser];
BOOL success = [xmlParser parse];
if(success)
    NSLog(@"No Errors");
else
    NSLog(@"Error Error Error!!!");
 } 
```

现在我的 XMLParser.m 代码是

```
- (XMLParser *) initXMLParser {

[super init];

appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];

return self;
  }

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName 
  namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qualifiedName 
attributes:(NSDictionary *)attributeDict {

if([elementName isEqualToString:@"Collections"]) {
    //Initialize the array.
    appDelegate.books = [[NSMutableArray alloc] init];
}
else if([elementName isEqualToString:@"Collection"]) {

    //Initialize the book.
    aBook = [[Book alloc] init];

    //Extract the attribute here.
    aBook.bookID = [[attributeDict objectForKey:@"id"] integerValue];

    NSLog(@"Reading id value :%i", aBook.bookID);
}

NSLog(@"Processing Element: %@", elementName);
    }

   - (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string { 

if(!currentElementValue) 
    currentElementValue = [[NSMutableString alloc] initWithString:string];
else
    [currentElementValue appendString:string];

NSLog(@"Processing Value: %@", currentElementValue);
}

 - (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName 
   namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName {
if([elementName isEqualToString:@"Collections"])
    return;
if([elementName isEqualToString:@"Collection"]) {
    [appDelegate.books addObject:aBook];

    [aBook release];
    aBook = nil;
}
else 
    [aBook setValue:currentElementValue forKey:elementName];

[currentElementValue release];
currentElementValue = nil;
  } 
```

最后我的第一个视图类代码是

```
 #pragma mark Table Methods

  - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
  {
return 1;
  }

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section 
 {
//return [tblViewData count];
return [appDelegate.books count];
 }

  - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
    {
static NSString *CellIdentifier = @"SimpleTableIdentifier";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil)
{
    cell=[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier];
    cell.selectionStyle=UITableViewCellSelectionStyleGray;
    cell.accessoryType=UITableViewCellAccessoryDisclosureIndicator;
}
//cell.textLabel.text=[[tblViewData objectAtIndex:indexPath.row]
                    // stringByReplacingOccurrencesOfString:@"*" withString:@""];
   Book *aBook = [appDelegate.books objectAtIndex:indexPath.row];

cell.textLabel.text = aBook.title;

if([deviceType isEqualToString:@"ipad"])
{
    [cell.textLabel setFont:[UIFont fontWithName:@"Helvetica-Bold" size:20]];
}
//cell.textLabel.font=[UIFont fontWithName:@"Walkway_SemiBold" size:16];
return cell;
   } 
```

在执行所有上述代码后，我得到了这种形式的结果[现在](http://tinypic.com/view.php?pic=280qq36&s=6)，我很困惑如何传递我的第二个视图 xml 文件 url，然后是第三个视图 url。我的 xml 文件是这种格式

第一个xml文件

```
 <?xml version="1.0" encoding="UTF-8"?>
<Collections> <Collection id="5"><title>Allegroo</title> </Collection> 
```

第二个xml文件

```
 <?xml version="1.0" encoding="UTF-8"?>
 <Collection id="5"><colletciontitle>Allegroo</colletciontitle>  <weaveimage>"imageurl"   </weaveimage><Rug id="48"><Rugthumb>"firstimageurl"</Rugthumb><RugSku>AL-637</RugSku></Rug><Rug id="51"><Rugthumb>"Secondimageurl"</Rugthumb><RugSku>AL-641</RugSku></Rug> 
```

第三个xml文件

```
 <?xml version="1.0" encoding="UTF-8"?>
 <Rug id="47"><Rugmainimage>"imageurl"</Rugmainimage> <Rugtitle>AL-636 Aged Indigo / Vintage Beige</Rugtitle> <Rugdiscription>Hand Knotted
  Distressed Wool Pile / Cotton Foundation </Rugdiscription><Availablesizes><Size>10x14</Size><Size>12x15</Size><Size>2x3</Size><Size>3x5</Size><Size>4x6</Size><Size>6x9</Size><Size>8x10</Size><Size>9x12</Size><Runner>2'6"x10'</Runner><Runner>2'6"x12'</Runner><Runner>2'6"x8'</Runner></Availablesizes></Rug> 
```

与我的问题和建议相关的链接或示例代码形式的任何帮助都将受到高度重视。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T06:10:26.393

嗯，所以定义长话短说，你想按顺序解析多个 url 吗？

所以这里是答案，

1.  在 appDelegate 中使用变量/标识符来告诉您正在解析哪个 xml。
2.  使用您的 xml 解析器作为委托类对象
3.  使用委托方法切换到下一个 xml 解析

    ```
     - (void)parserDidEndDocument:(NSXMLParser *)parser {
         // Change URL accordingly 
         NSURL *url = [[NSURL alloc] initWithString:@"Firstviewxmlurl"];
         NSXMLParser *xmlParser = [[NSXMLParser alloc] initWithContentsOfURL:url];
         XMLParser *parser = [[XMLParser alloc] initXMLParser];
         [xmlParser setDelegate:parser];
          BOOL success = [xmlParser parse];
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T06:40:57.820

我添加了一些代码以使您理解。尝试根据您的情况实施。下面的代码仅供参考，因为我没有做出所有你需要先理解的更改，然后相应地实施

```
//int i = 0;   // in AppDelegate 
```

代码：

```
//Or ViewDidLoad Method
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
 int = 1;    //For First View
NSURL *url = [[NSURL alloc] initWithString:@"Firstviewxmlurl"];
NSXMLParser *xmlParser = [[NSXMLParser alloc] initWithContentsOfURL:url];
XMLParser *parser = [[XMLParser alloc] initXMLParser];
[xmlParser setDelegate:parser];
BOOL success = [xmlParser parse];
if(success)
    NSLog(@"No Errors");
else
    NSLog(@"Error Error Error!!!");
 } 
```

XMLParser.m

```
- (XMLParser *) initXMLParser 
    {  
      [super init];
      appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate]; 
      return self;
    }

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName 
      namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qualifiedName 
    attributes:(NSDictionary *)attributeDict {

    if([elementName isEqualToString:@"Collections"]) 
   {
        //Initialize the array.
      if (int == 1)
        appDelegate.books = [[NSMutableArray alloc] init];

      else if (int == 2)
        appDelegate.secondArray = [[NSMutableArray alloc] init];

      else if (int == 3)
        appDelegate.thirdArray = [[NSMutableArray alloc] init];
    }

    else if([elementName isEqualToString:@"Collection"]) 
  {
         if (i == 1)
        {
          //Initialize the book.
          aBook = [[Book alloc] init];

          //Extract the attribute here.
          aBook.bookID = [[attributeDict objectForKey:@"id"] integerValue];

          NSLog(@"Reading id value :%i", aBook.bookID);
        }

         else if (i == 2)
        {
           //Second Xml 
        }

        else if (i == 3)
       {
           //Third Xml
       }

    }

  NSLog(@"Processing Element: %@", elementName);
 }

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string { 
    //Check condition 
    if(!currentElementValue) 
        currentElementValue = [[NSMutableString alloc] initWithString:string];
    else
        [currentElementValue appendString:string];

    NSLog(@"Processing Value: %@", currentElementValue);
    }

     - (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName 
       namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName {
//Check COndition
    if([elementName isEqualToString:@"Collections"])
        return;
    if([elementName isEqualToString:@"Collection"]) {
        [appDelegate.books addObject:aBook];

        [aBook release];
        aBook = nil;
    }
    else 
        [aBook setValue:currentElementValue forKey:elementName];

    [currentElementValue release];
    currentElementValue = nil;
      } 
```

# google-chrome - 您如何以编程方式在 chrome devtools 中切换页面上下文？

> ID：14995535
> 
> 赞同：1
> 
> 时间：2013-02-21T05:57:34.483
> 
> 标签：google-chrome, google-chrome-devtools

chrome devtools javascript 控制台底部的下拉菜单之一是页面上下文菜单，它允许您切换到浏览器扩展上下文。有没有办法直接从 js 控制台执行此操作？

# python - 在 Py.Test 中使用 funcarg 工厂时的引用循环

> ID：14995538
> 
> 赞同：1
> 
> 时间：2013-02-21T05:57:51.317
> 
> 标签：python, pytest

考虑以下虚拟`Resource`类：

```
import pytest

class Resource:

    def __init__(self, param):
        self.param = param
        print "\nResource created", self.param, self

    def __del__(self):
        print "Resource deleted", self.param, self 
```

它模拟了我想在每个测试用例之前创建的一些资源，并在测试用例之后完全取消初始化。使用旧式 funcargs，我编写了一个类似的测试

```
def pytest_funcarg__resource_fa(request):
    res = Resource(request.param)
    return res

def pytest_generate_tests(metafunc):
    metafunc.parametrize("resource_fa", [1, 2], indirect=True)

def test_funcarg_resource(resource_fa):
    print "Testcase: resource", resource_fa.param 
```

当我运行时`py.test -s -v`，我得到以下输出：

```
============================================ test session starts =============================================
platform linux2 -- Python 2.7.3 -- pytest-2.3.3 -- /usr/bin/python
plugins: cov
collected 2 items 

test_factory.py:48: test_funcarg_resource[1] 
Resource created 1 <test_factory.Resource instance at 0x292cab8>
Testcase: resource 1
PASSED
test_factory.py:48: test_funcarg_resource[2] 
Resource created 2 <test_factory.Resource instance at 0x292cfc8>
Testcase: resource 2
PASSED

========================================== 2 passed in 0.01 seconds ========================================== 
```

如您所见，这`__del__`两个资源的 从未被调用过。如果我使用新型固定装置，则会观察到相同的行为：

```
@pytest.fixture(scope="function", params=[1, 2])
def resource_fx(request):
    res = Resource(request.param)
    return res

def test_fixture_resource(resource_fx):
    print "Testcase: resource", resource_fx.param 
```

当然，我可以添加一个自定义终结器并强制取消初始化 Resource 内需要取消初始化的任何内容，但这让我觉得有点多余——在测试之外，这`__del__`足以确保 Resource 的内部得到正确释放，而我没有看看为什么`Py.Test`需要保留`res`对测试用例何时完成的任何引用。这是预期的行为`Py.Test`，还是我应该提交错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T15:37:41.513

依赖`__del__`终结不是一个好主意，因为它是由垃圾收集周期触发的（根据 Python 实现，它看起来会有所不同）。使用 pytest，您通常会`request.addfinalizer(resource.finalize)`从您的资源/funcarg 工厂调用以适当地调用您的终结器函数。pytest 然后保证独立于 GC 细节的最终确定。

# javascript - 为什么 .style.display="block" 会改变我的表格的长度？

> ID：14995541
> 
> 赞同：2
> 
> 时间：2013-02-21T05:57:58.447
> 
> 标签：javascript, css

我有两张表，它们都具有相同的类和结构。我用 CSS 为类设置样式，它们看起来就像我想要的一样。

问题是，如果其中一个表格开始隐藏，然后使用 JavaScript 显示，则轮廓会缩小到文本所在的任何位置。

这是用于显示表格的代码：

```
function setTable(){    
   if(document.getElementById("forfeitTable2").style.display=="none"){
      document.getElementById("forfeitTable2").style.display="block";
   }
   else if(document.getElementById("forfeitTable2").style.display=="block"){
      document.getElementById("forfeitTable2").style.display="none";
   }
} 
```

这个演示可能比我能更好地解释它：

[http://jsfiddle.net/DelightedD0D/6Ajyn/1/](http://jsfiddle.net/DelightedD0D/6Ajyn/1/)

1.  为什么会这样？
2.  我能做些什么来阻止它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T06:02:34.620

采用

```
document.getElementById("forfeitTable2").style.display="table"; 
```

代替

```
document.getElementById("forfeitTable2").style.display="block"; 
```

JS 小提琴：- [http://jsfiddle.net/6Ajyn/3/](http://jsfiddle.net/6Ajyn/3/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T06:00:22.273

您可以尝试将显示设置为表格而不是块！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T06:06:50.827

如果将显示设置为无，宽度：100% 不知道如何测量宽度。

试试这个：

```
if(document.getElementById("forfeitTable2").style.display=="none"){
document.getElementById("forfeitTable2").style.display="block";
document.getElementById("forfeitTable2").style.width="100%";
}
else if(document.getElementById("forfeitTable2").style.display=="block"){
document.getElementById("forfeitTable2").style.display="none";
}
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T06:09:33.957

只需清空 css`display`属性，而不是像这样设置`block`它`table`：

```
if(document.getElementById("forfeitTable2").style.display=="none"){
    document.getElementById("forfeitTable2").style.display="";
}

else if(document.getElementById("forfeitTable2").style.display==""){
    document.getElementById("forfeitTable2").style.display="none";
} 
```

[**演示**](http://jsfiddle.net/6Ajyn/8/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-25T14:31:18.687

要查看属性的可能值的完整列表，`display`请参阅 [样式显示属性](http://www.w3schools.com/jsref/prop_style_display.asp)

当您隐藏表格以再次显示时，请使用

```
document.getElementById("tableId").style.display="table"; 
```

当您隐藏表格行以再次显示它时，请使用

```
document.getElementById("rowId").style.display="table-row"; 
```

# sql - SQL Join 帮助将另一个表中的成员包含到搜索结果中

> ID：14995544
> 
> 赞同：0
> 
> 时间：2013-02-21T05:58:21.340
> 
> 标签：sql, sql-server

此查询仅返回填写问题 11042 并回答“是”的主要记录。很好很好没有问题。但是这个主要可能有分配给他们的组成员，他们可能也需要加入这个搜索查询。但是，他们没有回答问题 11042，因此不在字段 t2 表中。然而，它们在另一个表 grpMems t3 中，可以说，它也加入了 id。所以我的问题是我如何显示这两个，回答问题是的初级，因此在 t2 表中，以及在另一个 t3 表中搜索结果的组成员？

```
select t1.id,t1.firstname,t1.lastname,t2.field1,t2.field2
from names t1
inner join fields t2 on t1.id=t2.id and t2.field1=2388 and t2.field2=11042 and t2.field3='Yes' 
where 1=1
<cfif searchby>
and t1.firstname like '%#searchFIRST#%'
</cfif>
order by t1.lastname,t1.firstname 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T06:01:18.107

使用两个左连接并至少需要其中一个才能拥有数据：

```
SELECT ...
FROM names t1
LEFT OUTER JOIN fields t2 ON ...
LEFT OUTER JOIN another t3 ON ...
WHERE t2.id IS NOT NULL OR t3.id IS NOT NULL 
```

如果这些关系中的任何一个是多对多的，那么您将需要做一些事情来清除重复项。

* * *

使用联合：

```
SELECT ...
FROM names t1
INNER JOIN fields t2 ON ...
UNION ALL
SELECT ...
FROM names t1
INNER JOIN another t3 ON ... 
```

同样，如果您有重复项，您将需要使用 a`UNION`将它们清除或执行其他操作。

# php - 验证规则不适用于 CActiveForm 中的文件字段

> ID：14995545
> 
> 赞同：0
> 
> 时间：2013-02-21T05:58:21.850
> 
> 标签：php, yii, yii-extensions, yii-components

这里我在 CActiveForm 中使用 fileField 但在模型中验证规则不适用于该字段这是我的代码

## 型号代码

```
public function rules()
{
    // NOTE: you should only define rules for those attributes that
    // will receive user inputs.
    return array(
        array('image', 'required'),
        //array('imageId, userId, courseId, departmentId, createdOn, lastModifiedOn, lastModifiedBy', 'required'),
        array('image', 'file', 'types' => 'jpg, txt, pdf, gif, png', 'allowEmpty'=>'false'),
        array('courseId, departmentId', 'numerical', 'integerOnly'=>true),
        array('lastModifiedBy', 'length', 'max'=>45),
        array('createdOn, lastModifiedOn', 'safe'),
        // The following rule is used by search().
        // Please remove those attributes that should not be searched.
        array('id, image, imageId, userId, courseId, departmentId, createdOn, lastModifiedOn, lastModifiedBy', 'safe', 'on'=>'search'),
    );
} 
```

## 查看代码

```
<?php $form=$this->beginWidget('CActiveForm', array(
'id'=>'uploadinfo-form',
'enableAjaxValidation'=>false,
'enableClientValidation' => false,
'htmlOptions' => array('enctype' => 'multipart/form-data'),
)); ?>

<p class="note">Fields with <span class="required">*</span> are required.</p>

<?php //echo $form->errorSummary($model); ?>

<div class="row">
    <?php echo $form->labelEx($model,'image'); ?>
    <?php echo $form->fileField($model,'image'); ?>
    <?php echo $form->error($model,'image'); ?>
</div> 
```

## 控制器代码

```
 public function actionCreate()
{

    $model=new Uploadinfo;
    if(isset($_POST['Uploadinfo']))
    {
        $model->attributes=$_POST['Uploadinfo'];
        print_r($_POST['Uploadinfo']);
        $file=CUploadedFile::getInstance($model,'image');
        print_r($file->getName());
        die();
        if($model->save())
        {
            $model->image->saveAs('path/to/localFile');
            // redirect to success page
        }
    }
    $this->render('create', array('model'=>$model));

} 
```

这里所需的文件验证规则不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T07:12:17.560

试试这个为你的控制器代码：

```
 public function actionCreate()
 {      
     $model=new Uploadinfo;
     if(isset($_POST['Uploadinfo']))
     {
        $model->attributes=$_POST['Uploadinfo'];
        $file=CUploadedFile::getInstance($model,'image');
        if($model->validate() && $model->save())
        {
            $model->image->saveAs('path/to/localFile');
        }
    }
    $this->render('create', array('model'=>$model));

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-01T19:25:24.997

你应该设置`allow_empty=>true`它工作看这个帖子[链接](https://stackoverflow.com/questions/16382880/yii-file-upload-is-not-validating-file-type)：

```
array('image', 'file', 'types' => 'jpg, txt, pdf, gif, png', 'allowEmpty'=>true,'on'=>'update', 'on'=>'insert'), 
```

在你看来

```
<?php
  $form = $this->beginWidget('CActiveForm', array(
  'id'=>'uploadinfo-form',
  'enableAjaxValidation'=>true,
  'enableClientValidation' => true,
  'htmlOptions' => array('enctype' => 'multipart/form-data'),
)); ?> 
```

# database - 如何使用 MyBatis Spring Integration 连接多个数据库？

> ID：14995548
> 
> 赞同：2
> 
> 时间：2013-02-21T05:58:37.297
> 
> 标签：database, spring, mybatis

我在我的应用程序中使用 MyBatis 和 Spring Integration。我们公司有几个 Oracle 数据库。一个查询必须在一个数据库中执行，另一个查询必须在另一个数据库中执行。如何配置 MyBatis 使用不同的数据库连接来进行不同的查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T09:50:40.620

这是 MyBatis 3 用户指南中首先涉及的主题之一。基本上，每个数据库都应该有几个 XML 配置文件。最简单的方法是通过传递配置来创建映射器

```
String resource = "org/mybatis/example/Configuration.xml";
Reader reader = Resources.getResourceAsReader(resource);
sqlMapper = new SqlSessionFactoryBuilder().build(reader); 
```

编辑：对不起，没有仔细阅读。无论如何，我相信代码片段是不言自明的：

```
<jee:jndi-lookup id="jndiDatabase1"                jndi-name="jdbc/database1"/>
<jee:jndi-lookup id="jndiDatabase2"                jndi-name="jdbc/database2"/>

 <bean id="database1" class="org.mybatis.spring.SqlSessionFactoryBean">
    <property name="configLocation"     value="classpath:/some/path/to/database1Config.xml"/>
    <property name="dataSource"         ref="jndiDatabase1"/>
</bean>

<bean id="database2" class="org.mybatis.spring.SqlSessionFactoryBean">
    <property name="configLocation"     value="classpath:/some/path/to/database2Config.xml"/>
    <property name="dataSource"         ref="jndiDatabase2"/>
</bean> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-25T07:59:28.093

如果有人正在寻找支持**不同类型的数据库**，我的答案就是这样。
Mybatis 3 开始，内部支持多数据。有关详细配置，请参阅[此处](http://mybatis.github.io/mybatis-3/configuration.html#databaseIdProvider)的官方文档。

以下是如何使用 Spring 配置它

```
<bean id="vendorProperties" class="org.springframework.beans.factory.config.PropertiesFactoryBean">  
    <property name="properties">  
        <props>  
            <prop key="SQL Server">sqlserver</prop>  
            <prop key="DB2">db2</prop>  
            <prop key="Oracle">oracle</prop>  
            <prop key="MySQL">mysql</prop>  
        </props>  
    </property>
</bean>
<bean id="databaseIdProvider" class="org.apache.ibatis.mapping.VendorDatabaseIdProvider"> 
     <property name="properties" ref="vendorProperties"/>
</bean>
<bean  id="sqlSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean">
      <property name="dataSource" ref="dataSource" />
      <property name="databaseIdProvider" ref="databaseIdProvider" />
</bean> 
```

# git - 完全重置 git 存储库

> ID：14995549
> 
> 赞同：0
> 
> 时间：2013-02-21T05:58:41.090
> 
> 标签：git

我有一个 git 存储库，我在其中进行了很多更改，并将其推送到远程位置。

我希望将存储库重置为第一次提交的 3 次提交，将其推送到远程分支。我正在考虑执行以下操作：-

*   git 重置
*   git push 起源大师

对此有几个疑问？

*   这是正确的方法吗？
*   在第三次提交（从第一次提交）之后，我删除了某些文件并添加了一些文件。我希望将所有这些更改回第三次提交的状态（取回已删除的文件，删除新添加的文件）。我怎么能这样做呢？

谢谢。

[编辑] 目前我是这个项目的独立开发者。此外，还有很多提交，所以我不必手动恢复每个提交。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T06:04:56.373

由于您已经将文件发送到远程存储库，因此执行 a 不是一个好主意，`git reset`因为其他开发人员应该更新他们的本地存储库并获取新的更新。最好的解决方案是执行`git revert`, 一个生成新提交的命令，以撤消先前提交所做的操作。有关更多信息，请查看此[链接](http://git-scm.com/docs/git-revert.html)。

但是如果你是这个项目的唯一开发者，你可以删除提交。为此，您可以使用以下`git reset`命令：

```
git reset --hard hash 
```

其中 hash 是您要返回的提交哈希。选项`--hard`是在您通过提交哈希后几乎完全删除提交。

当您更改项目历史时，您无法执行简单的`push`. 您将需要标志 -f 来强制更新：

```
git push -f origin master 
```

但是，一些远程存储库有一些[钩子](http://git-scm.com/book/ch7-3.html)，禁止您强制更新历史记录。您将需要删除此挂钩以允许您执行历史记录更新。如果你不能这样做，你将需要使用`git revert`命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T06:06:12.390

您可以使用

```
git reset --hard <3rd commit> 
```

取回所有文件并删除新添加的文件。

然后使用

```
git push -f origin master 
```

强制更新遥控器。

# c++ - 派生类的大小

> ID：14995550
> 
> 赞同：1
> 
> 时间：2013-02-21T05:58:46.753
> 
> 标签：c++, virtual-inheritance

我是 C++ 编程的新手，在下面的代码中，我使用虚拟继承，所以派生类的大小显示为 24 字节，但我不知道它是怎么回事，所以请帮我看看它到底是怎么回事。

```
#include "stdafx.h"
#include <iostream>
using namespace std;

class BaseClass
{
      private : int a, b;
      public :
  BaseClass()
  {
    a = 10;
    b = 20;
  }
  virtual int area()
  {
    return 0;
  }
};

class DerivedClass1 : virtual public BaseClass
{
  int x;
      public:
  virtual void simple()
  {
    cout << "inside simple" << endl;
  }
};

int main()
{
   DerivedClass1 Obj;
   cout << sizeof(Obj) << endl;
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T06:12:31.167

我猜你正在编译为64位？在这种情况下，您的 DerivedClass1 可能会以这种字节排列方式布置在内存中：

```
offset     size    type
0          8       pointer to virtual function table
8          4       int BaseClass::a
12         4       int BaseClass::b
16         4       int DerivedClass1::x
20         4       filler, so that the total size of this class is an even number of 64-bit (8-byte) words 
```

对于属于包含任何虚函数的类继承层次结构的任何类，C++ 编译器会默默地将指向虚函数表的指针添加到您的类中。

# asp.net - 如何在 Visual Studio 2005/2010 中调试代码，该代码托管在 LAN 中的其他一些系统（windows xp）的 IIS 上？

> ID：14995551
> 
> 赞同：0
> 
> 时间：2013-02-21T05:58:52.040
> 
> 标签：asp.net, deployment, visual-studio-debugging

我将在 Visual Studio 2005 中制作的网站的已发布代码部署到我系统的 IIS。网站运行良好。

将相同的代码部署到 QC 环境进行测试，但代码在那里运行不佳。在 QC 环境中，我们收到一些错误：“无法获取记录。对象引用未设置为对象的实例。”

我的本地代码没有收到该错误。

您能否建议我如何使用本地 Visual Studio 调试代码，将代码部署到 QC 的系统？

# sql - 使用sql在同一个表中将一行的值更改为另一行

> ID：14995563
> 
> 赞同：0
> 
> 时间：2013-02-21T06:00:23.437
> 
> 标签：sql

我有这样的桌子。

```
 code  |     name
-------+--------------- 
   102 |    chennai
   101 |    delhi 
```

我想将chennai的代码更改为101，将delhi的代码更改为102。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T06:08:34.390

```
update table1 set code = 103 where code = 102;

update table1 set code = 102 where code = 101;

update table1 set code = 101 where code = 103; 
```

或者你可以使用[CURSOR](http://en.wikipedia.org/wiki/Cursor_%28databases%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T06:29:13.097

假设没有外键，表名是city，城市名是唯一的，数据库是mysql。您可以对其他数据库使用相同的概念。1\. 删除索引。2\. 更新值 3\. 重新创建索引

```
CREATE TABLE `city` (
    `id` int(11) unsigned NOT NULL,
    `name` varchar(255) DEFAULT NULL,
    PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

alter table city drop primary key;
update city, (
    select 101 as id, 'chennai' as name
    union all
    select 102 as id, 'delhi' as name
) newIDs
set city.id = newIDs.id
where city.name = newIDS.name ;
alter table city add primary key (id); 
```

# javascript - 验证 web url JavaScript 以接受 url 条目 google.com

> ID：14995567
> 
> 赞同：0
> 
> 时间：2013-02-21T06:00:42.450
> 
> 标签：javascript, regex, validation, url, web

我有以下正则表达式

```
RegExp("((http|https)(:\/\/))?([a-zA-Z0-9]+[.]{1}){2}[a-zA-z0-9]+(\/{1}[a-zA-Z0-9]+)*\/?",
   "i"); 
```

工作正常，但显示以下 url 模式无效

> 例如：“google.com”

我感谢你的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T06:10:41.293

您的代码至少`something.something.something`需要`stuff.google.com`. 交换`{2}`a`+`以允许二级域。

```
RegExp("((http|https)(://))?([a-zA-Z0-9]+[.]{1})+[a-zA-z0-9]+(/{1}[a-zA-Z0-9]+)*/?", "i"); 
```

我要补充一点，关于这个正则表达式还有其他几个……奇怪之处（比如使用`{1}`and `[.]`），并且它不考虑一些有效的域（比如`something-something.com`）。此外，您可以在 JS 中使用正则表达式文字，例如`var regex = /just a regex/`. 所以我推荐一些阅读。

# iphone - 出队的 UITableViewCell 的布局不正确，直到滚动（使用自动布局）

> ID：14995573
> 
> 赞同：23
> 
> 时间：2013-02-21T06:01:01.383
> 
> 标签：iphone, ios, objective-c, interface-builder

我有一个自定义`UITableViewCell`子类，它在 Interface Builder 中应用了自动布局约束。该单元格包含多个视图，包括一个`UITextField`.

相关地，它的大小`UITextField`受到限制，使其与下一个视图之间存在默认的水平间距。

单元格实例化如下：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"ProgressCell";
    ProgressCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier
                                                     forIndexPath:indexPath]

    cell.textField.text = @"Some string that is different for each cell";

    return cell;
} 
```

当单元格第一次出现时，`UITextField`超出了正确的框架，并出现在`UIView`其右侧的后面。但是，当我将单元格滚动出屏幕、暂停然后向后滚动时，文本会被正确截断。

下面显示了一个示例（在第二次编辑时）。

我曾尝试调用`[cell setNeedsLayout]`和`[cell setNeedsDisplay]`中的单元格`cellForRowAtIndexPath`，并在延迟后执行它们。两者都无效。

什么是滚动屏幕导致单元格正确显示，我该如何复制或修复潜在问题？

编辑：

打电话

```
[self.tableView reloadData];
[self.tableView reloadSections:[NSIndexSet indexSetWithIndex:0] withRowAnimation:UITableViewRowAnimationAutomatic]; 
```

为了重新加载单元格，似乎会导致布局第一次正确显示。

但是，它现在（偶尔）在滚动时*中断*（即，当向上滚动时，布局约束现在没有正确应用）。

打电话似乎不能解决这个问题`[cell setNeedsLayout]`。`cellForRowAtIndexPath`

编辑2：

[如此处所示](http://imgur.com/a/IKv0Z)的顶部单元格正确显示（与底部单元格一样），直到我向下滚动屏幕。从此消失了。

这反映了第一次编辑时的问题 - 这是第二次渲染的问题（让我认为它可能与重用单元格有关？）

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-02-21T23:53:46.443

如果您在`UITableViewCell`子类`textLabel`或上命名属性`defaultTextLabel`，则 IB 将忽略您指定的约束并用默认约束覆盖它们，不会发出警告。

即使在 IB 中使用自定义样式设计的单元格也是如此，这些单元格没有可见`textLabel`或`detailTextLabel`属性。

`UIImageView`如果在子类上添加类型属性的属性`UITableViewCell`并将其命名，也会发生这种情况`imageView`。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-02-06T01:10:56.760

按照这个[多行`UILabel`GitHub issue](https://github.com/smileyborg/TableViewCellWithAutoLayoutiOS8/issues/22#issuecomment-89853337)，这是一个挥之不去的 iOS 错误。

我发现在 iOS 9+ 中，这种情况多发生在编辑模式下，具有很大的不可预测性。

以下解决方法仅部分有效：它需要重绘`UITableView`两次，但仍不能涵盖所有场景。

```
override func viewDidLoad() {
    super.viewDidLoad()

    tableView.setNeedsLayout()
    tableView.layoutIfNeeded()
    tableView.reloadData()
} 
```

* * *

**笔记：**

*   Using`UITextView`是 multi line 的一个很好的替代方案`UILabel`，没有错误。`UITextView`也没有表现出任何`IULabel`其他奇怪现象，例如[对齐错误](https://stackoverflow.com/q/35440342/218152)或[闪烁](https://stackoverflow.com/q/35260912/218152)。
*   [SO-25947146](https://stackoverflow.com/a/25967370/218152)上还有一个替代解决方案，它对我不起作用，但值得一提。
*   似乎`self.tableView.editing`在`true`
*   使用低值来`tableView.estimatedRowHeight`减少发生率
*   [SwiftArchitect/TableViewControllerRowHeightBug](https://gist.github.com/SwiftArchitect/c2f1bea2c575e3dadf09)上的错误演示要点

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-29T08:14:45.760

就我而言，我在 viewDidAppear 中调用方法 tableView.reloadData() 并且布局正确显示

```
override func viewDidAppear(_ animated: Bool) {
    super.viewDidAppear(animated)
    self.tableView.reloadData()
} 
```

# asp.net-mvc-3 - TableSorter 记录太多

> ID：14995575
> 
> 赞同：2
> 
> 时间：2013-02-21T06:01:10.063
> 
> 标签：asp.net-mvc-3, jquery, pagination, tablesorter

我已经`TableSorter`在我的项目中实现了。现在的问题是，在某些情况下，我需要超过一千条记录。`TableSorter`插件通过ajax进行分页客户端。我希望它进行服务器端分页+我想在单个页面上排序，而不是在整个数据上。即，如果 的单页上有 10 条记录，则`TableSorter`必须在该单页上进行排序（仅在这 10 条记录上）。我无法更改为另一个表插件。我该怎么办？我的数据来自模型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T15:57:54.587

对于[寻呼机 ajax 演示](http://mottie.github.com/tablesorter/docs/example-pager-ajax.html)，我必须手动更改`serverSideSorting`选项以使其对当前表格内容进行排序。也许这也对你有用？尝试包含以下代码：

```
$('table').bind('pagerInitialized', function(e, c){
    // allow current content sorting; this variable is automatically
    // set to true when ajax is initialized
    this.config.serverSideSorting = false;
}); 
```

# asp.net-mvc - ReadOnly 属性在 ASP.NET MVC 模型中不起作用

> ID：14995577
> 
> 赞同：16
> 
> 时间：2013-02-21T06:01:21.937
> 
> 标签：asp.net-mvc, attributes, data-annotations

我在模型类中将一个属性标记为**只读，如下所示：**

```
public class RegisterModel
{
    [Display(Name = "User name")]
    [ReadOnly(true)]
    public string UserName { get; set; }
    ...
} 
```

在我看来：

```
@Html.EditorFor(m => m.UserName) 
```

但是当我运行应用程序时，文本框**不是**只读的。

我知道我可以在视图中使用 html 属性将其设置为只读，但我希望这可以在模型类本身中完成。

可以实现吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-21T06:14:50.750

[更新] 我认为没有`new { @readonly = "readonly" }`. `Readonly`property 指定此属性绑定到的属性是只读的还是读/写的。[详情在这里。](https://msdn.microsoft.com/en-us/library/system.componentmodel.readonlyattribute.aspx)

但是您可以尝试[自定义助手](https://stackoverflow.com/a/11232195/769678)或尝试在模型上使用`Editable`而不是`Readonly`在您的视图中使用元数据属性。

```
[Editable(false)] 
```

我想您已经研究过 [ReadOnly(true) 是否与 Html.EditorForModel 一起工作？](https://stackoverflow.com/questions/3510081/does-readonlytrue-work-with-html-editorformodel)

也是一篇很好的文章[odetocode.com](http://odetocode.com/blogs/scott/archive/2012/03/11/complete-guide-to-mass-assignment-in-asp-net-mvc.aspx)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-10-03T10:01:34.187

`ReadOnly`属性不会阻止 HMTL 帮助器将该字段显示为启用的输入。这是唯一 MVC 数据 Binder 将尊重的信息。

这意味着`RegisterModel`将在用户提交表单后发回的实例将始终`null`在其属性上具有价值`UserName`，而不管用户在表单的相应字段中的输入如何。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-02-21T06:06:16.117

ReadOnly 属性不会将输入设置为只读。

试试这个

```
Html.TextBoxFor(x => x.UserName, new { readonly = "readonly" }) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-22T01:11:39.243

如果您使用的是 SETTER，则必须使用 { get; 私人套装；}。这将使客户无法更改该值。您也可以只使用 HTML 5 输入并在此处进行标记。

# android - 与内存泄漏有关的致命异常

> ID：14995579
> 
> 赞同：-1
> 
> 时间：2013-02-21T06:01:31.950
> 
> 标签：android

```
Bitmap newImage = Bitmap.createBitmap(wid,hgt, Bitmap.Config.ARGB_8888); 
```

当我第二次在相机覆盖中使用它来捕获图像时，这会导致内存泄漏致命异常。提供一些代码功能为什么它会发生

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T06:46:29.317

我面临着类似的问题。如果您只想显示位图（不是一些与大小和质量相关的操作），缩小图像是最好的选择。此外，您使用的是 ARGB_888，它需要 4 个字节来存储每个像素，因此这个问题更经常发生。您可以使用 RGB_565，它需要 2 个字节来存储 1 个像素。确保您正在回收位图并在使用后将其分配为 null。调用 System.gc() 将减少此问题的发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T06:36:10.590

请参考这个网站（[http://developer.android.com/training/displaying-bitmaps/index.html](http://developer.android.com/training/displaying-bitmaps/index.html)）你知道如何有效地使用位图。

# php - 联系表未发送信息

> ID：14995580
> 
> 赞同：0
> 
> 时间：2013-02-21T06:01:32.163
> 
> 标签：php, forms, email, contact

我最近在另一个主题上获得了一些帮助，并且能够从我的联系表单中收到一封电子邮件，但是除了消息文本之外的所有信息都被排除在外，并且它是从“Apache”发送的。有什么原因可能会发生这种情况吗？

```
<?php
if(isset($_POST['submit'])){
$name = $_POST['name'];
$company = $_POST['company'];
$email = $_POST['email'];
$phone = $_POST['phone'];
$message = $_POST['message'];
$formcontent="From: $name \n Message: $message";
$recipient = "______@gmail.com";
$subject = "Contact Form";
$mailheader = "From: $email \r\n";

$to ='______@gmail.com';
$send_contact=mail($to,$subject,$message,$header);

// Check, if message sent to your email 
// display message "We've received your information, thank you"

if($send_contact){
echo "We've received your contact information, thank you";
}
else {
echo "Error, please try again";
} }
?>

<form action = "../mail.php"method="POST">
<p>Name</p> <input type="text" name="name">
<p>Company</p> <input type="text" name="company">
<p>Email</p> <input type="text" name="email">
<p>Phone</p> <input type="text" name="phone">
<p>Message</p><textarea name="message" rows="4" cols="25"></textarea><br />
<input type="submit" value="Submit" name="submit">
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T06:05:57.543

编辑这个

```
send_contact=mail($to,$subject,$message,$header); 
```

到

```
send_contact=mail($to,$subject,$message,$mailheader); 
```

你也可以这样发送

```
send_contact = main($to,$subject,$formcontact,$mailheader); 
```

如果你想......和

用 php 发送邮件不是一步到位的过程。mail() 返回真/假，但即使它返回真，也不意味着消息将被发送。所有 mail() 所做的就是将消息添加到队列中（使用 sendmail 或您在 php.ini 中设置的任何内容）

没有可靠的方法来检查消息是否已在 php 中发送。您将不得不查看邮件服务器日志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T06:06:45.207

您使用了错误的变量名。

请将邮件调用的最后一个参数从 $header 更改为 $mailHeader

```
$send_contact=mail($to,$subject,$message,$header); 
```

到

```
$send_contact=mail($to,$subject,$message,$mailHeader); 
```

在发送之前附加您需要的所有信息。使用下面的代码，

```
$name = $_POST['name'];
$company = $_POST['company'];
$email = $_POST['email'];
$phone = $_POST['phone'];
$message = $_POST['message'];
$messageContent = $name."\n".$company."\n".$email."\n".$phone."\n".$message."\n";

$send_contact=mail($to,$subject,$messageContent,$mailHeader); 
```

# java - 速度模板中的乘法

> ID：14995583
> 
> 赞同：0
> 
> 时间：2013-02-21T06:01:36.203
> 
> 标签：java, velocity

我有指导方针来做到这一点

```
#set( $foo = $bar + 3 )
#set( $foo = $bar - 4 )
#set( $foo = $bar * 6 )
#set( $foo = $bar / 2 ) 
```

所以我尝试了这些没有用，请帮忙

```
"#set( $foo = $pod.totalprice * $pod.ordqt)$foo " 
```

结果是 $foo

```
 "$pod.totalprice * $pod.ordqt" 
```

请帮助我了解这项工作。这给出了 100.00 * 13213

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T15:10:34.770

如果您使用的是较旧版本的 Velocity（例如[1.4](http://velocity.apache.org/engine/releases/velocity-1.4/user-guide.html#Math)），则只允许整数运算。

# android - 安装 Android SDK 后 Rails 报错

> ID：14995590
> 
> 赞同：-2
> 
> 时间：2013-02-21T06:02:05.563
> 
> 标签：android, ruby-on-rails, sdk

上次，我正在安装 Android SDK，现在当我创建 ruby​​onrails 时，我收到了一些通知，

> /usr/local/lib/ruby/gems/1.9.1/gems/railties-3.2.11/lib/rails/generators/app_base.rb:254：警告：不安全的世界可写目录/root/android-sdk-linux in PATH，模式 040757 /usr/local/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler.rb:263：警告：不安全的世界可写目录 /root/android-sdk-linux in路径，模式 040757

怎么了？请帮帮我？谢谢的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T11:44:34.090

这里没有与rails相关的东西。检查您是否在具有权限的目录中创建新应用程序。

# asp.net - 跨多个应用程序的表单身份验证

> ID：14995596
> 
> 赞同：0
> 
> 时间：2013-02-21T06:02:44.750
> 
> 标签：asp.net, iis, form-authentication

我们正在尝试在我们 PC 上的两个应用程序（Windows 7、IIS 7.5）之间使用身份验证，并且一切正常。但问题是当我们尝试发布这些站点（Windows web server 2008、IIS 7.0）时，交叉身份验证不起作用！！

经过长时间的调查，我们发现错误发生在第二个站点的以下代码中：

```
Dim formsCookie As HttpCookie = Request.Cookies(FormsAuthentication.FormsCookieName)
    If (formsCookie IsNot Nothing) Then
    Else
    ' always null 
```

我们试图在后面的代码中检查这样的路径：

```
 Dim ticket As New FormsAuthenticationTicket(1, smsProfile, DateTime.Now, _
                                                       DateTime.Now.AddDays(1), True, AdminSessions.UserObj.Pid, _
                                                       FormsAuthentication.FormsCookiePath)
    Dim hash As String = FormsAuthentication.Encrypt(ticket)
    Dim cookie As New HttpCookie(
       FormsAuthentication.FormsCookieName,
       hash)
    If (ticket.IsPersistent) Then
        cookie.Expires = ticket.Expiration
    End If
    Response.Cookies.Add(cookie)
    Response.Redirect(smsPortal) 
```

在 web.config 中：

```
 <authentication mode="Forms">

        <forms name=".ASPXFORMSAUTH" enableCrossAppRedirects="true" domain="mydomain.com.jo" loginUrl="http://..." protection="All" path="/"/>

    </authentication> 
```

请告诉我们本地PC和服务器中的IIS有什么区别。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T06:09:32.743

浏览器很可能没有将身份验证 cookie 从第一个站点发送到第二个站点。检查 cookie 路径和域。两个站点必须在同一个域中，并且 cookie 路径必须设置为一个共同的根。

有关更多详细信息，请参阅此链接： [Cookie 域和路径](http://en.wikipedia.org/wiki/HTTP_cookie#Domain_and_Path)

为了帮助进行故障排除，请使用 Fiddler 或 Firebug 等实用程序查看请求中发送的 cookie，并验证站点 1（用户登录的位置）设置的身份验证 cookie 是否也发送到站点 2。

如果站点不在同一台服务器上，还要检查它们是否使用相同的 machineKey 配置。

# java - 无法访问 DonationsActivity 类型的封闭实例

> ID：14995597
> 
> 赞同：1
> 
> 时间：2013-02-21T06:02:45.657
> 
> 标签：java, android, android-activity

我对所有这些编码的东西都非常陌生，而且我自己已经走了很远，但我似乎无法弄清楚这个错误。感谢所有帮助。

“范围内无法访问 DonationsActivity 类型的封闭实例”

```
package com.ganttbros.shadowui;

import org.donations.DonationsActivity;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.content.Intent;

public class DonateActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_donate);

final Button donate = (Button) findViewById(R.id.donatebutton);
    donate.setOnClickListener(new View.OnClickListener() {
                public void onClick(View v) 
                {
                    startActivity(new Intent(DonationsActivity.this, DonationsActivity.class));
                }
            });
        }

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.donate, menu);
    return true;
  }

 } 
```

我应该告诉你我正在尝试实现这个库：[https](https://github.com/dschuermann/android-donations-lib#readme) ://github.com/dschuermann/android-donations-lib#readme 我已经设置了按钮，但我只需要让它启动“DonationsActivity”按下时。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T06:04:52.747

采用

```
startActivity(new Intent(DonateActivity.this, DonationsActivity.class)); 
```

**或者**

```
startActivity(new Intent(v.getContext(), DonationsActivity.class)); 
```

代替

```
startActivity(new Intent(DonationsActivity.this, DonationsActivity.class)); 
```

用于从`DonationsActivity`Activity启动`DonateActivity`Activity

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T06:05:48.467

改变这个：

```
startActivity(new Intent(DonationsActivity.this, DonationsActivity.class)); 
```

到：

```
startActivity(new Intent(DonateActivity.this, DonationsActivity.class)); 
```

# java - Lagrange Interpolation in java using BigInteger

> ID：14995601
> 
> 赞同：0
> 
> 时间：2013-02-21T06:03:11.130
> 
> 标签：java, interpolation, biginteger

I am trying to find a function to perform Lagrange Interpolation in java. I have 3 (x,y) pairs, where x and y are BigInteger objects, and would like to use some interpolation function to determine f(0) for the polynomial f used to calculate my x,y these pairs. Something like this seems perfect, except that this class doesn't seem to actually belong to a package I can import: [http://nssl.eew.technion.ac.il/files/Projects/thresholddsaimporvement/doc/javadoc/Lagrange.html](http://nssl.eew.technion.ac.il/files/Projects/thresholddsaimporvement/doc/javadoc/Lagrange.html)

Forgive me if my question is naive, any help I can get would really be appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T06:48:17.033

[Apache Commons Math](http://commons.apache.org/math/)中似乎有一个类似的课程。这可能比您发现的要可靠得多。

[http://commons.apache.org/math/apidocs/org/apache/commons/math3/analysis/polynomials/PolynomialFunctionLagrangeForm.html](http://commons.apache.org/math/apidocs/org/apache/commons/math3/analysis/polynomials/PolynomialFunctionLagrangeForm.html)

看来您是用 构造它`PolynomialFunctionLagrangeForm(double[] x, double[] y)`，然后调用`value(0)`以获取 的值`x = 0`。

# javascript - 我怎么知道连接是否安全？

> ID：14995602
> 
> 赞同：0
> 
> 时间：2013-02-21T06:03:16.030
> 
> 标签：javascript, node.js, mongodb, mongoskin, nosql

我对mongodb上的连接提出了很多问题，我还不能理解很多东西，但我尝试......

有了这个联系...

```
db.collection('usuarios').insert(campos,{safe:true}, function(err, result) 
```

我得到了一个安全的连接....但是 mongodb 拉我这个警告

```
========================================================================================
=  Please ensure that you set the default safe variable to one of the                  =
=   allowed values of [true | false | {j:true} | {w:n, wtimeout:n} | {fsync:true}]     =
=   the default value is false which means the driver receives does                    =
=   return the information of the success/error of the insert/update/remove            =
=                                                                                      =
=   ex: new Db(new Server('localhost', 27017), {safe:true})                            =
=                                                                                      =
=   http://www.mongodb.org/display/DOCS/getLastError+Command                           =
=                                                                                      =
=  The default of false will change to true in the near future                         =
=                                                                                      =
=  This message will disappear when the default safe is set on the driver Db           =
======================================================================================== 
```

所以我尝试这种方式...

```
var db = mongo.db("root:toor@127.0.0.1:27017/cordoba",{safe:true});
db.collection('usuarios').insert(campos,{new:true}, function(err, result) 
```

但我不确定这是否是安全的：真正的连接，所以我这样说

```
var db = mongo.db("root:toor@127.0.0.1:27017/cordoba",{safe:true});
    db.collection('usuarios').insert(campos,{safe:true},{new:true}, function(err, result) 
```

可能这样是安全的：true 但是当我在 new:true 之前放置 safe:true 时，mongodb 会返回旧的 var，所以我在 new:true 之后放置了 safe:true

```
var db = mongo.db("root:toor@127.0.0.1:27017/cordoba",{safe:true});
    db.collection('usuarios').insert(campos,{new:true},{safe:true}, function(err, result) 
```

并且工作正常，但我不确定它是否安全：true，所以我尝试像这样将 safe:true 放入 new:true 对象中

```
var db = mongo.db("root:toor@127.0.0.1:27017/cordoba",{safe:true});
        db.collection('usuarios').insert(campos,{new:true,safe:true},function(err, result) 
```

我以为 mondb 吓坏了！但是什么都没有...没有错误没有什么...所以我不知道我怎么知道mongodb何时使用安全：真或不安全：真...

我怎么知道？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T07:11:55.383

the api is no longer `{safe: true}` but `{w: 1}` [http://mongodb.github.com/node-mongodb-native/api-generated/db.html](http://mongodb.github.com/node-mongodb-native/api-generated/db.html)

```
var db = mongo.db('mongodb://127.0.0.1:27017/test', {w: 1}) 
```

`{safe: true}` will still work, but it's deprecated. if you set it at the DB level, you don't need to set it at the `collection.insert()` level.

the api signature for insert is `insert(docs[, options][, callback])`, so you should only have one options object.

also, there is no `{new: true}` options for `collection.insert`.

so basically, you don't need to set any options (on insert).

# mysql - 在 MySQL 中工作的 GROUP BY 查询被 PostgreSQL 拒绝

> ID：14995609
> 
> 赞同：0
> 
> 时间：2013-02-21T06:03:54.593
> 
> 标签：mysql, sql, postgresql

我有这个查询（在 MySQL 中运行良好）：

```
SELECT units.*, activity_logs.created_at 
FROM "units" left join activity_logs on units.id=activity_logs.unit_id 
GROUP BY units.id 
ORDER BY activity_logs.created_at desc 
```

Postgres 给出了这个错误：

```
PG::Error: ERROR:  column "activity_logs.created_at" must appear in the GROUP BY clause or be used in an aggregate function 
```

我知道 Postgres 在 SQL 方面是正确的，但我怎样才能得到我想要的呢？那是与所有单位表连接的每个单位的最新活动日志条目吗？

提前致谢！

*   雅各布

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T06:45:07.183

错误解释了它：您需要使用聚合函数来使这个确定性，例如：

```
SELECT units.*, max(activity_logs.created_at)
FROM "units" left join activity_logs on units.id=activity_logs.unit_id 
GROUP BY units.id 
ORDER BY max(activity_logs.created_at) desc; 
```

# python - 如何使用任意数据使用 matplotlib 制作 4d 图

> ID：14995610
> 
> 赞同：31
> 
> 时间：2013-02-21T06:03:59.947
> 
> 标签：python, matplotlib

这个问题与这个[有关](https://stackoverflow.com/questions/7855229/how-to-make-a-4d-plot-using-python-with-matplotlib)。

我想知道的是如何将建议的解决方案应用于一堆数据（4列），例如：

```
0.1 0 0.1 2.0
0.1 0 1.1 -0.498121712998
0.1 0 2.1 -0.49973005075
0.1 0 3.1 -0.499916082038
0.1 0 4.1 -0.499963726586
0.1 1 0.1 -0.0181405895692
0.1 1 1.1 -0.490774988618
0.1 1 2.1 -0.498653742846
0.1 1 3.1 -0.499580747953
0.1 1 4.1 -0.499818696063
0.1 2 0.1 -0.0107079119572
0.1 2 1.1 -0.483641823093
0.1 2 2.1 -0.497582061233
0.1 2 3.1 -0.499245863438
0.1 2 4.1 -0.499673749657
0.1 3 0.1 -0.0075248589089
0.1 3 1.1 -0.476713038166
0.1 3 2.1 -0.49651497615
0.1 3 3.1 -0.498911427589
0.1 3 4.1 -0.499528887295
0.1 4 0.1 -0.00579180003048
0.1 4 1.1 -0.469979974092
0.1 4 2.1 -0.495452458086
0.1 4 3.1 -0.498577439505
0.1 4 4.1 -0.499384108904
1.1 0 0.1 302.0
1.1 0 1.1 -0.272727272727
1.1 0 2.1 -0.467336140806
1.1 0 3.1 -0.489845926622
1.1 0 4.1 -0.495610916847
1.1 1 0.1 -0.000154915998165
1.1 1 1.1 -0.148803329865
1.1 1 2.1 -0.375881358454
1.1 1 3.1 -0.453749548548
1.1 1 4.1 -0.478942841849
1.1 2 0.1 -9.03765566114e-05
1.1 2 1.1 -0.0972702806613
1.1 2 2.1 -0.314291859842
1.1 2 3.1 -0.422606253083
1.1 2 4.1 -0.463359353084
1.1 3 0.1 -6.31234088628e-05
1.1 3 1.1 -0.0720095219203
1.1 3 2.1 -0.270015786897
1.1 3 3.1 -0.395462300716
1.1 3 4.1 -0.44875793248
1.1 4 0.1 -4.84199181874e-05
1.1 4 1.1 -0.0571187054704
1.1 4 2.1 -0.236660992042
1.1 4 3.1 -0.371593983211
1.1 4 4.1 -0.4350485869
2.1 0 0.1 1102.0
2.1 0 1.1 0.328324567994
2.1 0 2.1 -0.380952380952
2.1 0 3.1 -0.462992178846
2.1 0 4.1 -0.48400342421
2.1 1 0.1 -4.25137933034e-05
2.1 1 1.1 -0.0513190921508
2.1 1 2.1 -0.224866151101
2.1 1 3.1 -0.363752470126
2.1 1 4.1 -0.430700436658
2.1 2 0.1 -2.48003822279e-05
2.1 2 1.1 -0.0310025255124
2.1 2 2.1 -0.158022037087
2.1 2 3.1 -0.29944612818
2.1 2 4.1 -0.387965424205
2.1 3 0.1 -1.73211484062e-05
2.1 3 1.1 -0.0220466245862
2.1 3 2.1 -0.12162780064
2.1 3 3.1 -0.254424041889
2.1 3 4.1 -0.35294082311
2.1 4 0.1 -1.32862131387e-05
2.1 4 1.1 -0.0170828002197
2.1 4 2.1 -0.0988138417802
2.1 4 3.1 -0.221154587294
2.1 4 4.1 -0.323713596671
3.1 0 0.1 2402.0
3.1 0 1.1 1.30503380917
3.1 0 2.1 -0.240578771191
3.1 0 3.1 -0.41935483871
3.1 0 4.1 -0.465141248676
3.1 1 0.1 -1.95102493785e-05
3.1 1 1.1 -0.0248114638773
3.1 1 2.1 -0.135153019304
3.1 1 3.1 -0.274125336409
3.1 1 4.1 -0.36965644171
3.1 2 0.1 -1.13811197906e-05
3.1 2 1.1 -0.0147116366819
3.1 2 2.1 -0.0872950700627
3.1 2 3.1 -0.202935925412
3.1 2 4.1 -0.306612285308
3.1 3 0.1 -7.94877050259e-06
3.1 3 1.1 -0.0103624783432
3.1 3 2.1 -0.0642253568271
3.1 3 3.1 -0.160970897235
3.1 3 4.1 -0.261906474418
3.1 4 0.1 -6.09709039262e-06
3.1 4 1.1 -0.00798626913355
3.1 4 2.1 -0.0507564081263
3.1 4 3.1 -0.133349565782
3.1 4 4.1 -0.228563754423
4.1 0 0.1 4202.0
4.1 0 1.1 2.65740045079
4.1 0 2.1 -0.0462153115214
4.1 0 3.1 -0.358933906213
4.1 0 4.1 -0.439024390244
4.1 1 0.1 -1.11538537794e-05
4.1 1 1.1 -0.0144619860317
4.1 1 2.1 -0.0868190343718
4.1 1 3.1 -0.203767982755
4.1 1 4.1 -0.308519215265
4.1 2 0.1 -6.50646078271e-06
4.1 2 1.1 -0.0085156584289
4.1 2 2.1 -0.0538784714494
4.1 2 3.1 -0.140215240068
4.1 2 4.1 -0.23746380125
4.1 3 0.1 -4.54421180079e-06
4.1 3 1.1 -0.00597669061814
4.1 3 2.1 -0.038839789599
4.1 3 3.1 -0.106675396816
4.1 3 4.1 -0.192922262523
4.1 4 0.1 -3.48562423225e-06
4.1 4 1.1 -0.00459693165308
4.1 4 2.1 -0.0303305231375
4.1 4 3.1 -0.0860368842133
4.1 4 4.1 -0.162420599686 
```

初始问题的解决方案是：

```
# Python-matplotlib Commands
from mpl_toolkits.mplot3d import Axes3D
from matplotlib import cm
import matplotlib.pyplot as plt
import numpy as np

fig = plt.figure()
ax = fig.gca(projection='3d')
X = np.arange(-5, 5, .25)
Y = np.arange(-5, 5, .25)
X, Y = np.meshgrid(X, Y)
R = np.sqrt(X**2 + Y**2)
Z = np.sin(R)
Gx, Gy = np.gradient(Z) # gradients with respect to x and y
G = (Gx**2+Gy**2)**.5  # gradient magnitude
N = G/G.max()  # normalize 0..1
surf = ax.plot_surface(
    X, Y, Z, rstride=1, cstride=1,
    facecolors=cm.jet(N),
    linewidth=0, antialiased=False, shade=False)
plt.show() 
```

据我所知，这适用于所有 matplotlib-demos，变量 X、Y 和 Z 都准备好了。在实际情况下，情况并非总是如此。

想法如何用任意数据重用给定的解决方案？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2015-07-22T23:21:46.013

好问题 Tengis，所有数学家都喜欢炫耀带有给定函数的浮华表面图，而忽略处理现实世界的数据。您提供的示例代码使用梯度，因为变量的关系是使用函数建模的。对于这个例子，我将使用标准正态分布生成随机数据。

无论如何，这里是您如何快速绘制 4D 随机（任意）数据，前三个变量在轴上，第四个是颜色：

```
from mpl_toolkits.mplot3d import Axes3D
import matplotlib.pyplot as plt
import numpy as np

fig = plt.figure()
ax = fig.add_subplot(111, projection='3d')

x = np.random.standard_normal(100)
y = np.random.standard_normal(100)
z = np.random.standard_normal(100)
c = np.random.standard_normal(100)

img = ax.scatter(x, y, z, c=c, cmap=plt.hot())
fig.colorbar(img)
plt.show() 
```

注意：第 4 维使用具有热配色方案（黄色到红色）的热图

结果：

![](../Images/d762a1ed769a06ab9df7ea3eafd7b19b.png)] [1](https://i.stack.imgur.com/1O3aI.png)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2019-08-24T14:30:36.477

我知道这个问题很老了，但我想提出这个替代方案，而不是使用“散点图”，我们有一个 3D 表面图，其中颜色基于第四维。就我个人而言，在“散点图”的情况下，我并没有真正看到空间关系，因此使用 3D 表面可以帮助我更容易地理解图形。

主要思想与公认的答案相同，但我们有一个表面的 3D 图，可以更好地直观地看到点之间的距离。这里的下面代码主要是根据[这个问题](https://stackoverflow.com/questions/24218543/colouring-the-surface-of-a-sphere-with-a-set-of-scalar-values-in-matplotlib/24229480)给出的答案。

```
import numpy as np
from mpl_toolkits.mplot3d import Axes3D
import matplotlib.pyplot as plt
import matplotlib.tri as mtri

# The values ​​related to each point. This can be a "Dataframe pandas" 
# for example where each column is linked to a variable <-> 1 dimension. 
# The idea is that each line = 1 pt in 4D.
do_random_pt_example = True;

index_x = 0; index_y = 1; index_z = 2; index_c = 3;
list_name_variables = ['x', 'y', 'z', 'c'];
name_color_map = 'seismic';

if do_random_pt_example:
    number_of_points = 200;
    x = np.random.rand(number_of_points);
    y = np.random.rand(number_of_points);
    z = np.random.rand(number_of_points);
    c = np.random.rand(number_of_points);
else:
    # Example where we have a "Pandas Dataframe" where each line = 1 pt in 4D.
    # We assume here that the "data frame" "df" has already been loaded before.
    x = df[list_name_variables[index_x]]; 
    y = df[list_name_variables[index_y]]; 
    z = df[list_name_variables[index_z]]; 
    c = df[list_name_variables[index_c]];
#end
#-----

# We create triangles that join 3 pt at a time and where their colors will be
# determined by the values ​​of their 4th dimension. Each triangle contains 3
# indexes corresponding to the line number of the points to be grouped. 
# Therefore, different methods can be used to define the value that 
# will represent the 3 grouped points and I put some examples.
triangles = mtri.Triangulation(x, y).triangles;

choice_calcuation_colors = 1;
if choice_calcuation_colors == 1: # Mean of the "c" values of the 3 pt of the triangle
    colors = np.mean( [c[triangles[:,0]], c[triangles[:,1]], c[triangles[:,2]]], axis = 0);
elif choice_calcuation_colors == 2: # Mediane of the "c" values of the 3 pt of the triangle
    colors = np.median( [c[triangles[:,0]], c[triangles[:,1]], c[triangles[:,2]]], axis = 0);
elif choice_calcuation_colors == 3: # Max of the "c" values of the 3 pt of the triangle
    colors = np.max( [c[triangles[:,0]], c[triangles[:,1]], c[triangles[:,2]]], axis = 0);
#end
#----------
# Displays the 4D graphic.
fig = plt.figure();
ax = fig.gca(projection='3d');
triang = mtri.Triangulation(x, y, triangles);
surf = ax.plot_trisurf(triang, z, cmap = name_color_map, shade=False, linewidth=0.2);
surf.set_array(colors); surf.autoscale();

#Add a color bar with a title to explain which variable is represented by the color.
cbar = fig.colorbar(surf, shrink=0.5, aspect=5);
cbar.ax.get_yaxis().labelpad = 15; cbar.ax.set_ylabel(list_name_variables[index_c], rotation = 270);

# Add titles to the axes and a title in the figure.
ax.set_xlabel(list_name_variables[index_x]); ax.set_ylabel(list_name_variables[index_y]);
ax.set_zlabel(list_name_variables[index_z]);
plt.title('%s in function of %s, %s and %s' % (list_name_variables[index_c], list_name_variables[index_x], list_name_variables[index_y], list_name_variables[index_z]) );

plt.show(); 
```

[![具有随机值的结果示例](../Images/a635b4039059384d76003bc0426da22a.png)](https://i.stack.imgur.com/YZhzE.png)

对于我们绝对希望每个点具有第 4 维的原始值的情况，另一种解决方案是简单地使用“散点图”结合 3D 表面图，该图将简单地链接它们以帮助您查看之间的距离他们。

```
name_color_map_surface = 'Greens';  # Colormap for the 3D surface only.

fig = plt.figure(); 
ax = fig.add_subplot(111, projection='3d');
ax.set_xlabel(list_name_variables[index_x]); ax.set_ylabel(list_name_variables[index_y]);
ax.set_zlabel(list_name_variables[index_z]);
plt.title('%s in fcn of %s, %s and %s' % (list_name_variables[index_c], list_name_variables[index_x], list_name_variables[index_y], list_name_variables[index_z]) );

# In this case, we will have 2 color bars: one for the surface and another for 
# the "scatter plot".
# For example, we can place the second color bar under or to the left of the figure.
choice_pos_colorbar = 2;

#The scatter plot.
img = ax.scatter(x, y, z, c = c, cmap = name_color_map);
cbar = fig.colorbar(img, shrink=0.5, aspect=5); # Default location is at the 'right' of the figure.
cbar.ax.get_yaxis().labelpad = 15; cbar.ax.set_ylabel(list_name_variables[index_c], rotation = 270);

# The 3D surface that serves only to connect the points to help visualize 
# the distances that separates them.
# The "alpha" is used to have some transparency in the surface.
surf = ax.plot_trisurf(x, y, z, cmap = name_color_map_surface, linewidth = 0.2, alpha = 0.25);

# The second color bar will be placed at the left of the figure.
if choice_pos_colorbar == 1: 
    #I am trying here to have the two color bars with the same size even if it 
    #is currently set manually.
    cbaxes = fig.add_axes([1-0.78375-0.1, 0.3025, 0.0393823, 0.385]);  # Case without tigh layout.
    #cbaxes = fig.add_axes([1-0.844805-0.1, 0.25942, 0.0492187, 0.481161]); # Case with tigh layout.

    cbar = plt.colorbar(surf, cax = cbaxes, shrink=0.5, aspect=5);
    cbar.ax.get_yaxis().labelpad = 15; cbar.ax.set_ylabel(list_name_variables[index_z], rotation = 90);

# The second color bar will be placed under the figure.
elif choice_pos_colorbar == 2: 
    cbar = fig.colorbar(surf, shrink=0.75, aspect=20,pad = 0.05, orientation = 'horizontal');
    cbar.ax.get_yaxis().labelpad = 15; cbar.ax.set_xlabel(list_name_variables[index_z], rotation = 0);
#end
plt.show(); 
```

[![第二种方法的随机值样本结果](../Images/b0d759d6c5a41bf41a4ea3cf258d2e08.png)](https://i.stack.imgur.com/wXX6y.png)

最后，还可以使用“plot_surface”，我们定义将用于每个面的颜色。在这种情况下，我们每个维度有 1 个值向量，问题是我们必须对这些值进行插值以获得 2D 网格。在第 4 维插值的情况下，只根据 XY 定义，不考虑 Z。结果，颜色代表 C (x, y) 而不是 C (x, y, z)。以下代码主要基于以下响应：[plot_surface 每个维度都有一个 1D 向量](https://stackoverflow.com/a/30539444/7082712)；[plot_surface 为每个表面选择颜色](https://stackoverflow.com/a/32480062/7082712)。请注意，与以前的解决方案相比，计算量很大，显示可能需要一点时间。

```
import matplotlib
from scipy.interpolate import griddata

# X-Y are transformed into 2D grids. It's like a form of interpolation
x1 = np.linspace(x.min(), x.max(), len(np.unique(x))); 
y1 = np.linspace(y.min(), y.max(), len(np.unique(y)));
x2, y2 = np.meshgrid(x1, y1);

# Interpolation of Z: old X-Y to the new X-Y grid.
# Note: Sometimes values ​​can be < z.min and so it may be better to set 
# the values too low to the true minimum value.
z2 = griddata( (x, y), z, (x2, y2), method='cubic', fill_value = 0);
z2[z2 < z.min()] = z.min();

# Interpolation of C: old X-Y on the new X-Y grid (as we did for Z)
# The only problem is the fact that the interpolation of C does not take
# into account Z and that, consequently, the representation is less 
# valid compared to the previous solutions.
c2 = griddata( (x, y), c, (x2, y2), method='cubic', fill_value = 0);
c2[c2 < c.min()] = c.min(); 

#--------
color_dimension = c2; # It must be in 2D - as for "X, Y, Z".
minn, maxx = color_dimension.min(), color_dimension.max();
norm = matplotlib.colors.Normalize(minn, maxx);
m = plt.cm.ScalarMappable(norm=norm, cmap = name_color_map);
m.set_array([]);
fcolors = m.to_rgba(color_dimension);

# At this time, X-Y-Z-C are all 2D and we can use "plot_surface".
fig = plt.figure(); ax = fig.gca(projection='3d');
surf = ax.plot_surface(x2, y2, z2, facecolors = fcolors, linewidth=0, rstride=1, cstride=1,
                       antialiased=False);
cbar = fig.colorbar(m, shrink=0.5, aspect=5);
cbar.ax.get_yaxis().labelpad = 15; cbar.ax.set_ylabel(list_name_variables[index_c], rotation = 270);
ax.set_xlabel(list_name_variables[index_x]); ax.set_ylabel(list_name_variables[index_y]);
ax.set_zlabel(list_name_variables[index_z]);
plt.title('%s in fcn of %s, %s and %s' % (list_name_variables[index_c], list_name_variables[index_x], list_name_variables[index_y], list_name_variables[index_z]) );
plt.show(); 
```

[![第三个解决方案的随机值结果示例](../Images/ceb787a3690deee2a23e8606c00d4242.png)](https://i.stack.imgur.com/ebagf.png)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2021-04-04T09:45:04.927

我想加我的两分钱。给定一个每个条目代表一个特定数量的三维矩阵，我们可以使用 Numpy 的`unravel_index()`函数结合 Matplotlib 的`scatter()`方法创建一个伪四维图。

```
import numpy as np
import matplotlib.pyplot as plt

def plot4d(data):
    fig = plt.figure(figsize=(5, 5))
    ax = fig.add_subplot(projection="3d")
    ax.xaxis.pane.fill = False
    ax.yaxis.pane.fill = False
    ax.zaxis.pane.fill = False
    mask = data > 0.01
    idx = np.arange(int(np.prod(data.shape)))
    x, y, z = np.unravel_index(idx, data.shape)
    ax.scatter(x, y, z, c=data.flatten(), s=10.0 * mask, edgecolor="face", alpha=0.2, marker="o", cmap="magma", linewidth=0)
    plt.tight_layout()
    plt.savefig("test_scatter_4d.png", dpi=250)
    plt.close(fig)

if __name__ == "__main__":
    X = np.arange(-10, 10, 0.5)
    Y = np.arange(-10, 10, 0.5)
    Z = np.arange(-10, 10, 0.5)
    X, Y, Z = np.meshgrid(X, Y, Z, indexing="ij")
    density_matrix = np.sin(np.sqrt(X**2 + Y**2 + Z**2))
    plot4d(density_matrix) 
```

[![在此处输入图像描述](../Images/258542e421af8a24fb8e57b61662ea36.png)](https://i.stack.imgur.com/Ci0jB.jpg)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-23T06:37:14.210

一种可能性是使用颜色空间，例如 RGBA 或 HSVA，它们是 4 维的，但很好地显示 alpha（透明度）可能是个问题。

其他可能性是带有滑块的动态图。其中一个维度将由滑块表示。

不过，我不确定这是否是您要问的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-13T23:45:03.880

我还想加我的两分钱！

不久前，我为我正在教授的一门多变量微积分课程创建了一个程序，并认为我会将它包括在这里。

我的方法与已发布的其他方法相似（使用散点图），但是，我进行了一些更改以真正使图形流行。

具体来说，我包含了一个函数来删除 Alpha 通道范围的一部分，以使部分范围透明。这由下面代码中的函数 f_AlphaControl 控制。

我在演示中使用的函数是函数 f(x,y,z)=x *y* z*exp(-x^2-y^2-z^2)。它有 4 个局部最大值和 4 个局部最小值，所有这些都显示在下图中。我认为结果不言自明，所以请看看它们，让我知道你的想法。

2700 点： [epsilon=2](https://i.stack.imgur.com/LiZeG.png) , [epsilon=1](https://i.stack.imgur.com/WI9VL.png) , [epsilon=.5](https://i.stack.imgur.com/nSnM8.png) , [epsilon=.1](https://i.stack.imgur.com/m2eXL.png) , [epsilon=5Andx0=-1](https://i.stack.imgur.com/PUjGB.png)

1000000 点：[epsilon=5](https://i.stack.imgur.com/F3C5u.png)，[epsilon=1](https://i.stack.imgur.com/JIkpk.png)

此代码允许创建与 Mayavi-VTK 和/或 OpenGL 相媲美的等体积图，但无需付出所有努力。我在 Mayavi 中编写了类似的例程，但是，由于 OP 刚刚询问了 matplotlib，我想展示它的强大功能。

```
 import numpy as np
import matplotlib.pyplot as plt
from mpl_toolkits.mplot3d import Axes3D
from matplotlib import cm

from matplotlib.colors import ListedColormap

## The following code creates the figure plotting function
def MakePlot(xx,yy,zz,ww,cmapO=cm.jet): 
    ##Create Custom Colormap with Alpha varying depending on the functions behavior. 
    ## This produces very nice isovolume plots similar to Mayavi and OpenCV

    ##Preallocate new colormap
    my_cmapN=cmapO(np.arange(cmapO.N))

    #set Alpha of new colormap to be small in the middle of the colormap range using a bump function
    # this can be changed to emphasize different areas of the range that are of interest.   
    nA=cmapO.N    
    xA=np.linspace(-1,1,nA)
    epsilon=1.5 #Width of range to exclude from alpha channel
    x_0=0#Center of range to exclude from alpha channel

    def f_AlphaControl(x):
        u=(x-x_0)/epsilon
        return 1-np.exp(-u**2/(1-u**2))*(np.abs(u)<1.)

    yA=f_AlphaControl(xA) 
    plt.plot(xA,f_AlphaControl(xA))
    plt.xlim([-1,1])
    plt.ylim([0,1])

    my_cmapN[:,-1]=yA

    fig = plt.figure(dpi=200) 

    # Create new colormap
    my_cmap = ListedColormap(my_cmapN) 

    plt.style.use('dark_background')
    fig = plt.figure(dpi=200) 
    ax = fig.add_subplot(projection='3d')
    points=ax.scatter(xx,yy,zz,c=ww,cmap=my_cmap)   
    cbar=fig.colorbar(points)
    # cbar.solids.set_rasterized(True)

    cbar.set_alpha(1)
    cbar.draw_all()

    ## Make Title for plot
    ax.set_title(r'Plot of $f:\mathbb{R}^3\rightarrow \mathbb{R}$'+'\n'+r'$w=f(x,y,z)$')

    ##Plot x, y, and z axis useful for visual referencing when viewing the plot
    eps=.3
    tt=np.linspace(-(1+eps)*L,(1+eps)*L,2)
    ax.plot(tt,0*tt,0*tt,c='magenta',linewidth=2);
    ax.plot(0*tt,tt,0*tt,c='magenta',linewidth=2);
    ax.plot(0*tt,0*tt,tt,c='magenta',linewidth=2)

    ## Set viewing angle
    xang=-76;pang=12;
    ax.view_init(pang, xang)

    # Set axis limits
    ax.set_xlim([-(1+eps)*L,(1+eps)*L]);ax.set_ylim([-(1+eps)*L,(1+eps)*L]);ax.set_zlim([-(1+eps)*L,(1+eps)*L]);

    #Set axis labels
    ax.set_xlabel('$x$');ax.set_ylabel('$y$');ax.set_zlabel('$z$')
    plt.savefig("ScatterPlotVaryingAlpha.png",dpi=200)

if __name__ == "__main__":

    #Set Plot Grid 

    L=1.5
    x_C=0.0;y_C=0.0;z_C=0.0;
    # Set XYZ Plotting Grid
    a1=x_C-L;b1=x_C+L;
    a2=y_C-L;b2=y_C+L;
    a3=z_C-L;b3=z_C+L;

    n=30;
    NT=n**3

    ##The following if statement determines whether you want to use a random grid R=1 
    ## or a uniform grid R=0

    grid_flag=1

    if grid_flag==1:
       ## Random Grid
       xx=np.random.uniform(a1,b1,NT);
       yy=np.random.uniform(a2,b2,NT);
       zz=np.random.uniform(a3,b3,NT)
    else:
        ## Even Grid
        x = np.linspace(a1,b1,n);
        y = np.linspace(a2,b2,n);
        z = np.linspace(a3,b3,n);

        X, Y, Z = np.meshgrid(x, y, z, indexing='ij', sparse=False)

        xx=X.reshape(X.size);yy=Y.reshape(Y.size);zz=Z.reshape(Z.size);

    ## The following code defines the function of 3 variables that we wish to visualize
    ## This can be replaced with the flattened data array that you wish to plot

    def f(x,y,z):
        return x*y*z*np.exp(-(x**2+y**2+z**2))

    ww=f(xx,yy,zz)
    ww[np.isinf(ww)]=np.nan

    MakePlot(xx,yy,zz,ww)
    plt.show() 
```

# ios - Design pattern for waiting for user interaction in iOS?

> ID：14995611
> 
> 赞同：2
> 
> 时间：2013-02-21T06:04:05.623
> 
> 标签：ios, objective-c, user-input, state-machine

I'm developing a BlackJack game for iOS. Keeping track of the current state and what needs to be done is becoming difficult. For example, I have a C++ class which keeps track of the current Game:

```
class Game {
  queue<Player> playerQueue;
  void hit();
  void stand();
} 
```

Currently I'm implementing it using events (Method A):

```
- (void)hitButtonPress:(id)sender {
  game->hit();
}

void Game::hit() {
  dealCard(playerQueue.top());
}

void Game::stand() {
  playerQueue.pop();
  goToNextPlayersTurn();
} 
```

as more and more options are added to the game, creating events for each one is becoming tedious and hard to keep track of.

Another way I thought of implementing it is like so (Method B):

```
void Game::playersTurn(Player *player) {
  dealCards(player);
  while (true) {
    string choice = waitForUserChoice();
    if (choice == "stand") break;
    if (choice == "hit")
      dealCard(player);
    // etc.
  }
  playerQueue.pop();
  goToNextPlayersTurn();
} 
```

Where `waitForUserChoice` is a special function that lets the user interact with the `UIViewController` and once the user presses a button, only then returns control back to the `playersTurn` function. In other words, it pauses the program until the user clicks on a button.

With method A, I need to split my functions up every time I need user interaction. Method B lets everything stay a bit more in control. Essentially the difference between method A and B is the following:

A:

```
function A() {
  initialize();
  // now wait for user interaction by waiting for a call to CompleteA
}

function CompleteA() {
  finalize();
} 
```

B:

```
function B() {
  initialize();
  waitForUserInteraction();
  finalize();
} 
```

Notice how B keeps the code more organized. Is there even a way to do this with Objective-C? Or is there a different method which I haven't mentioned recommended instead?

A third option I can think of is using a finite state machine. I have heard a little about them, but I'm sure if that will help me in this case or not.

What is the recommended design pattern for my problem?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:28:34.393

我理解你遇到的困境。当我第一次开始使用 iOS 时，我很难将自己的注意力集中在放弃与操作系统之间的控制权上。

一般来说，iOS 会鼓励你使用方法 A。通常你的 ViewController 中有变量在方法 A() 中设置，然后在 CompleteA() 中检查它们以验证 A() 是否首先运行等。

关于您关于有限状态机的问题，我认为它可以帮助您解决问题。我在 iOS 中写的第一件事是 FSM（这是非常糟糕的代码），但是你可以看一下这里（在 FlipsideViewController.m 的底部附近：

[https://github.com/esromneb/ios-finite-state-machine](https://github.com/esromneb/ios-finite-state-machine)

一般的想法是你把它放在你的 .h 文件中的 @interface 块内

```
static int state = 0;
static int running = 0; 
```

在你的 .m 你有这个：

```
- (void) tick {

    switch (state) {
        case 0:
            //this case only runs once for the fsm, so setup one time initializations

            // next state
            state = 1;

            break;
        case 1:
            navBarStatus.topItem.title = @"Connecting...";
            state = 2;
            break;
        case 2:
            // if something happend we move on, if not we wait in the connecting stage
            if( something )
                state = 3;
            else
                state = 1;
            break;
        case 3:
            // respond to something

            // next state
            state = 4;
            break;
        case 4:
            // wait for user interaction
            navBarStatus.topItem.title = @"Press a button!";
            state = 4;

            globalCommand = userInput;

            // if user did something
            if( globalCommand != 0 )
            {
                // go to state to consume user interaction
                state = 5;  
            }

            break;

        case 5:
            if( globalCommand == 6 )
            {
                // respond to command #6
            }
            if( globalCommand == 7 )
            {
                // respond to command #7
                }

                        // go back and wait for user input
                        state = 4;
            break;

        default:
            state = 0;
            break;
    }

    if( running )
    {
        [self performSelector:@selector(tick) withObject:nil afterDelay:0.1];
    }
} 
```

在此示例中（根据 github 上的示例修改）globalCommand 是一个表示用户输入的 int。如果 globalCommand 为 0，则 FSM 将在状态 4 中旋转，直到 globalCommand 不为零。

要启动 FSM，只需将 running 设置为 1 并从 viewController 调用 [self tick]。FSM 将每 0.1 秒“滴答”一次，直到运行设置为 0。

在我最初的 FSM 设计中，我必须响应来自运行它自己的软件的 Windows 计算机的用户输入和网络输入。在我的设计中，Windows PC 也运行着类似但不同的 FSM。对于这个设计，我使用 NSMutuableArray 构建了两个 FIFO 队列对象的命令。用户交互和网络数据包会将命令排入队列，而 FSM 会将项目出列并响应它们。我最终使用[https://github.com/esromneb/ios-queue-object](https://github.com/esromneb/ios-queue-object)作为队列。

如果您需要任何澄清，请发表评论。

# c# - 如何在网站中加密第三方 api 密钥

> ID：14995612
> 
> 赞同：4
> 
> 时间：2013-02-21T06:04:08.277
> 
> 标签：c#, javascript, jquery, asp.net

我从 yelp 获得了一个 api 密钥。我仍在学习如何在我的网站中使用这个 api。到目前为止，我的 api 密钥在每个人都可以看到的 java 脚本中。我正在使用视觉工作室来开发这个网站。

谁能告诉我如何加密这个 api 密钥？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T06:06:54.427

使用 JCryption **[http://www.jcryption.org/](http://www.jcryption.org/)**

Cryption 是一个 javascript HTML-Form 加密插件，它对提交表单时发送的 POST/GET-Data 进行加密。

# c# - 在共享 MVC 组件中使用 AJAX

> ID：14995616
> 
> 赞同：0
> 
> 时间：2013-02-21T06:04:37.823
> 
> 标签：c#, asp.net-mvc, jquery, razor

我让 AJAX 为单个页面工作，但我希望它可以在所有页面上工作。我怎样才能实现它？

这是 scripts.cshtml 中的 JavaScript：

```
function changeTab(tabId) {
    var url = "Home/changeTab/" + tabId;
    $.ajax({
        url: "Home/changeTab/" + tabId,
        success: function (tab) {
            var t = tab;
            $("#menu1").html(t);
        }
    });
} 
```

我有一个组件 Home.cs：

```
namespace Web.Controllers
{
  public class HomeController : Controller
  {
    [Authorize]
    public ActionResult Index()
    {
        return View();
    }

    [AcceptVerbs("GET")]
    public JsonResult changeTab(int id)
    {
        var saveTab = id;
        string username = User.Identity.Name;
        [...]
        return Json(username, JsonRequestBehavior.AllowGet);
    }
  }
} 
```

该代码在主页上运行良好，但在任何其他页面上都运行良好。我在哪里放置 changeTab 函数以便每个页面都可以调用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T06:09:35.353

尝试将您的脚本更改为以下内容：

```
function changeTab(tabId) {
    var url = '@Url.Action("changeTab", "Home")/' + tabId;
    $.ajax({
        url: url,
        success: function (tab) {
            var t = tab;
            $("#menu1").html(t);
        }
    });
} 
```

# ruby-on-rails - Active Merchant and Authorize.net returning failure in production

> ID：14995618
> 
> 赞同：3
> 
> 时间：2013-02-21T06:04:43.413
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, authorize.net, activemerchant

I have an app that has some basic ecommerce activity. I tried it with a test authorize.net account, and it works fine. I entered in the APIs for production mode though, and I keep getting redirected to the failure screen when I try to purchase anything. I'm not getting any errors, nothing in the logs on heroku, and I don't even know where to start debugging. I am connecting to Authorize.net successfully, transactions are successful in development mode - I based it heavily off of Ryan Bate's RailsCast episode 145 ([http://railscasts.com/episodes/145-integrating-active-merchant](http://railscasts.com/episodes/145-integrating-active-merchant)), but here are some highlights of my code (since I'm testing ti, I'm forcing it to do 1 cent transactions despite what I order)

in enviroments/production.rb

```
config.after_initialize do
  ActiveMerchant::Billing::Base.mode = :production
  ::GATEWAY = ActiveMerchant::Billing::AuthorizeNetGateway.new(
    :login => "scrubbed",
    :password => "scrubbed",
    :test => false
  )
  end 
```

orders_controller.rb

```
 def create
    @order = Order.new(params[:order])
    @order.cart = current_cart
    if @order.save
      if @order.purchase
        @order.state = 'paid'
        @order.save
        render :action => "success"
        end
      else
        render :action => "failure"
      end
    else
      redirect_to home_page_path, notice: "The order failed to save"
    end
  end

def purchase
    response = GATEWAY.purchase(1, credit_card, purchase_options)
    transactions.create!(:action => "purchase", :amount => price_in_cents, :response => response)
    #cart.update_attribute(:purchased_at, Time.now) if response.success?
    response.success?
  end 
```

order.rb

```
 def purchase
    response = GATEWAY.purchase(1, credit_card, purchase_options)
    transactions.create!(:action => "purchase", :amount => price_in_cents, :response => response)
    #cart.update_attribute(:purchased_at, Time.now) if response.success?
    response.success?
  end

private

  def purchase_options
    {
      :ip => ip_address,
      :billing_address => {
        :first_name   => first_name,
        :last_name    => last_name,
        :address1     => address_line_1,
        :address2     => address_line_2,
        :city         => city,
        :state        => billing_state,
        :country      => "US",
        :zip          => zip_code,
        :phone        => phone_number,
        :company      => company
      },
      :shipping_address => {
        :first_name   => sfirst_name,
        :last_name    => slast_name,
        :address1     => saddress_line_1,
        :address2     => saddress_line_2,
        :city         => scity,
        :state        => sbilling_state,
        :country      => "US",
        :zip          => szip_code,
        :phone        => sphone_number,
        :company      => scompany
      }
    }
  end

  def validate_card
    unless credit_card.valid?
      credit_card.errors.full_messages.each do |message|
        errors.add :base, message
      end
    end
  end

  def credit_card
    @credit_card ||= ActiveMerchant::Billing::CreditCard.new(
      :brand              => card_type,
      :number             => card_number,
      :verification_value => card_verification,
      :month              => card_expires_on.month,
      :year               => card_expires_on.year,
      :first_name         => first_name,
      :last_name          => last_name
    )
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T19:08:46.710

我需要问一下以确保 - 您是否已完成所有操作以使用 Authorize.net 和您的银行设置您的商家帐户以供生产使用，并且您已与他们协调以在资金开始时开始将资金存入您的银行帐户进来？

如果是这样，请在此处查看他们的开发人员文档页面，了解测试和生产事务之间的区别

[http://developer.authorize.net/guides/AIM/5_TestTrans.html](http://developer.authorize.net/guides/AIM/5_TestTrans.html)

在网关端正确配置一切后，在测试模式下工作的事务应该在生产模式下工作。我会联系 authorize.net 可能需要最终确定您的帐户以处理实时交易的技术或管理细节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T06:11:59.710

我没有亲自处理过 authorize.net，但我使用了类似的 Web 服务，它也需要 PCI 合规性。在我的情况下，这意味着我需要一个有效的 SSL 证书才能在生产中进行交易。事实上，如果我没记错的话，交易以非常相似的方式失败，而且原因并不明显。

看起来 authorize.net 需要某种类型的安全性，具体取决于您使用的 API。 [http://developer.authorize.net/integration/](http://developer.authorize.net/integration/)

# android - C2DM/Notification server other than google

> ID：14995619
> 
> 赞同：1
> 
> 时间：2013-02-21T06:04:50.143
> 
> 标签：android, notifications, android-c2dm

I would like to have a application which can receive notification/messages.Is it possible to have our own c2dm/notification server rather than using google gcm for our android device?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T07:12:34.053

您可以构建自己的服务器。但请注意，这将很困难，并且有大量错误的余地。除了 GCM 之外，您还可以使用许多选项。[我在上一个答案](https://stackoverflow.com/a/14271725/1369222)中给出了选项列表。

# jquery - Partial scroll follow on a long jQuery UI dialog

> ID：14995623
> 
> 赞同：1
> 
> 时间：2013-02-21T06:04:56.967
> 
> 标签：jquery, jquery-ui

I have a jquery dialog that I tried to implement a type of scroll follow on. First attempt was using `position:fixed` but resulted in one of my taller dialogs being cut of at the bottom and the user unable to get there because scrolling only scroll the background.

Next attempt was resetting `position` option on the dialog to `center` on resize and scroll events.

This had the same affect as the first.

The effect I'm looking for is when the dialog bottom is off screen, scrolling makes the dialog scroll with the background UNTIL the whole dialog is visible then locks and allows the background only to continue scrolling.

This of course would have to work in reverse if the top gets cut off after they scroll to the bottom.

Please suggest some starting code.

# javascript - HTML / CSS Ad position fixing

> ID：14995624
> 
> 赞同：0
> 
> 时间：2013-02-21T06:05:04.057
> 
> 标签：javascript, html, css

I need 2 ad containers to be displayed next to my website body (right hand side), but the ads should be displayed only if I am in a desktop / screen size = wider than my website container width. This website is mainly for mobile & I don't need the ads to be displayed in mobile, because we cannot accomodate this ads in mobile screen.

Given my html code below;

```
<div style="width:320px; height:500px; background-color:#C60; margin:0 auto;">Website</div>
<div id="ad-contextual" style="width:222px; height:150px; float:left; margin-right:20px; background-color:#39F;">Contextual Ads</div>
<div id="ad-sky" style="width:222px; height:600px; float:left; background-color:#996;">Skyscrapers Ads</div> 
```

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T06:08:58.527

通常我会说“使用 CSS3 媒体查询”，但在这种情况下，隐藏该框还不够好 - 您会以这种方式生成欺诈性视图，尤其是如果该网站主要用于移动设备。

相反，使用 JavaScript 来检测`if( screen.width > 800)`（根据需要调整数量）并仅在条件为真时插入广告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T06:11:37.163

您可以通过嗅探用户代理来识别浏览器和操作系统。然后您可以通过在 JavaSript 中设置条件语句来投放广告。如果平台 id 桌面，则显示广告，否则，隐藏广告。

参考这个stackoverflow问题[移动检测](https://stackoverflow.com/questions/743129/mobile-detection-using-javascript)

这一个也[自动检测移动浏览器（通过用户代理？）](https://stackoverflow.com/questions/1005153/auto-detect-mobile-browser-via-user-agent)

也可以搜索谷歌以获取更多选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T06:21:59.063

您有两种方法可以做到这一点：

首先使用 jQuery：

```
var pagewidth = $(window).width();
if (pagewidth > 320) {      
    $("#ad-contextual").css("display", "block");
    $("#ad-sky").css("display", "block");

}
else { 
    $("#ad-contextual").css("display", "none");
    $("#ad-sky").css("display", "none");
} 
```

第二次使用 CSS 媒体查询：

```
/* Smartphones (portrait and landscape) ----------- */
@media only screen 
and (min-device-width : 320px) 
and (max-device-width : 480px) {
     #ad-contextual { display:none; }
     #ad-sky { display:none; }
}

/* Smartphones (landscape) ----------- */
@media only screen 
and (min-width : 321px) {
     #ad-contextual { display:none; }
     #ad-sky { display:none; }
}

/* Smartphones (portrait) ----------- */
@media only screen 
and (max-width : 320px) {
     #ad-contextual { display:none; }
     #ad-sky { display:none; }
} 
```

# javascript - Jquery和canvas代码不能在同一个外部文件上工作

> ID：14995625
> 
> 赞同：0
> 
> 时间：2013-02-21T06:05:05.500
> 
> 标签：javascript, jquery, canvas

我一直在使用 jquery 和 canvas（不一起）进行一些编码。

我有一个外部 javascript 文件，其中包含；

```
$(document).ready(function() {
/*
    NAME CHOOSER
*/
var carl = ['Sha', 'Shads', 'Cai', 'Moon', 'Sun', 'Staffy',];
var rosie = ['Mum',];
var prev;
$('button').click(function() {
    prev = $('h2').text();
    $('h2').empty().text(carl[Math.floor(Math.random() * carl.length)] + rosie[Math.floor(Math.random() * rosie.length)]).after('<p>' + prev + '</p>');
});
}); 
```

我还有一些用于 canvas 元素的内联 javascript；

```
<script>
var canvas = document.getElementById('draw');
if(canvas.getContext) {
 var ctx = canvas.getContext('2d');
 ctx.fillStyle = 'red';
 ctx.fillRect(0, 0, 800, 500);
}
</script> 
```

当通过对画布使用内联 javascript 和为 jquery 使用外部文件来分隔时，一切正常并按预期工作。

将内联画布 javascript 添加到外部文件时，画布元素不起作用，但 jquery 起作用。javascript 在 canvas 元素之后加载，因为我的外部 javascript 在结束 body 标记之前链接，此外，如果我从外部文件中删除所有 jquery，canvas 元素将再次开始工作。

为什么是这样？

谢谢

**编辑**

我现在还尝试将画布代码放在 jquerys 文档就绪函数内部和外部，但它仍然无法正常工作。我将画布代码包装在一个匿名函数中仍然无济于事，甚至尝试使用 jquery 本身选择画布元素，如下所示；

```
var canvas = $('canvas')[0]; 
```

但它还是不想知道。将画布代码放在所有 jquery 之前然后画布代码执行但 jquery 没有，我真的很困惑！将它分开并不打扰我，但我想知道它为什么会发生。

再次感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T06:50:34.810

如果您使用浏览器控制台，可能会注意到这个简单的问题。就是这样！您可以按以下方式打开控制台`Ctrl+Shift+J`：

### 在主页中：

错误：`Uncaught ReferenceError: $ is not defined`
解决方案：在您的源代码中链接 jQuery

### 在名称选择器页面中：

错误：`Uncaught TypeError: Cannot read property 'getContext' of null`

问题：

您正试图像操作画布一样操作 div，但您无法获取`div`元素的上下文。所以这是你的 HTML：

```
<div id="wrap">
   <h1>PORTFOLIO PROJECT <a href="/">:)</a></h1>
   <button>Click here to generate a company name!</button>
</div> 
```

解决方案：

更改`<div>`为`<canvas>`

### 如何避免将来出现此类问题？

使用浏览器控制台，就是这样！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T06:25:06.590

好的，如果我结合上面的代码，它应该看起来像这样：（请参阅我的 jsFiddle 以获得完整的上下文：http: [//jsfiddle.net/mori57/TqamB/](http://jsfiddle.net/mori57/TqamB/)）

```
$(document).ready(function () {
    /*
    NAME CHOOSER
*/
    var carl = ['Sha', 'Shads', 'Cai', 'Moon', 'Sun', 'Staffy'];
    var rosie = ['Mum'];
    var prev;
    $('button').click(function () {
        prev = $('h2').text();
        $('h2').empty().text(carl[Math.floor(Math.random() * carl.length)] + rosie[Math.floor(Math.random() * rosie.length)]).after('<p>' + prev + '</p>');
    });

    var canvas = document.getElementById('draw');
    if(canvas.getContext) {
     var ctx = canvas.getContext('2d');
     ctx.fillStyle = 'red';
     ctx.fillRect(0, 0, 800, 500);
    }
}); 
```

而且，在 jsFiddle 的上下文中运行，这非常有效。

因此，要么您没有正确组合这两个脚本（例如，将画布放在文档就绪块之外，或者以某种方式缺少右括号），要么您的脚本文件或标记中存在其他问题。

# ruby-on-rails - ActiveModel::MassAssignmentSecurity::Error even when using accepts_nested_attributes_for

> ID：14995632
> 
> 赞同：1
> 
> 时间：2013-02-21T06:05:39.997
> 
> 标签：ruby-on-rails, ruby-on-rails-3

My complete error message is:

> ActiveModel::MassAssignmentSecurity::Error in WorkoutsController#create Can't mass-assign protected attributes: workout_entry

The params that I am sending looks like:

```
{"workout"=>{"unit"=>"kg", "name"=>"2013-02-20T21:26:19", "note"=>nil, "workout_entry"=> [{"workout_entry_number"=>"1", "exercise_id"=>2, "entry_detail"=>[{"set_number"=>"1", "weight"=>"32", "reps"=>"43"}]}]}} 
```

I have a workout that has many workout entries and each workout entries can have many entry details. The note is optional.

workout.rb

```
class Workout < ActiveRecord::Base
    has_many :workout_entries, dependent: :destroy

    attr_accessible :id, :name, :note, :unit, :workout_entries_attributes
    belongs_to :user
    accepts_nested_attributes_for :workout_entries

    validates_presence_of :name
    validates_presence_of :unit, :inclusion => %w(kg lb)
    validates_associated :workout_entries

    default_scope order("created_at DESC")

end 
```

workout_entry.rb

```
class WorkoutEntry < ActiveRecord::Base

    belongs_to :workout
    belongs_to :exercise
    has_many :entry_details, dependent: :destroy

    attr_accessible :workout_id, :exercise_id, :workout_entry_number, :entry_details_attributes
    accepts_nested_attributes_for :entry_details

    validates :exercise_id, presence: true, numericality: {only_integer: true}, :inclusion => { :in => 1..790 }
    validates :workout_id, presence: true, numericality: {only_integer: true, greater_than_or_equal_to: 1}
    validates :workout_entry_number, presence: true, numericality: {only_integer: true, greater_than_or_equal_to: 1}

end 
```

workouts_controller.rb

```
class WorkoutsController < ApplicationController
    respond_to :json
    before_filter :authenticate_user!

    def index
        respond_with(current_user.workouts)
    end

    def show
        respond_with(current_user.workouts.find(params[:id]))
    end

    def create
        respond_with(current_user.workouts.create(params[:workout]))
    end

    def update
        @workout = current_user.workouts.find(params[:id])
        if @workout.update_attributes(params[:workout])
          render json: @workout, status: :ok
        else
          render json: @workout.errors, status: :unprocessable_entity
        end
    end

    def destroy
        respond_with(current_user.workouts.destroy(params[:id]))
    end

end 
```

I tried switching the ordering of attr_accessible and accepts_nested_attributes_for within the workout.rb, but it does not work.

I even tried to set

```
config.active_record.whitelist_attributes = true 
```

but creating was still prevented.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T06:46:49.843

尝试在您的锻炼模型中可访问的 attr 中添加锻炼入口 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T07:55:16.723

我决定不在锻炼和锻炼入口模型中使用accepts_nested_attributes_for，因为它不适合我。我还更新了发送的 json 格式。详细信息在下面的链接中

[关联](http://pastebin.com/7Pv8BXJA)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T06:10:46.127

`accepts_nested_attributes_for`不会将任何属性添加到白名单中。无论您尝试传递给 update_attributes 的什么键都必须列在 attr_accessible 中，在您的情况下，您需要添加`workout_entry`到`attr_accessible`.

看起来您的表单确实有错误，如果您使用 fields_for 那么它应该使用`workout_entries_attributes`您可以访问的 key 。

# aem - CQ5 页面中的多个段落不起作用

> ID：14995633
> 
> 赞同：3
> 
> 时间：2013-02-21T06:05:41.547
> 
> 标签：aem

我尝试在模板的 JSP 中添加多个“par”组件。但只有最先出现的那个在页面上可见。

在页面中使用段落是否有限制？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T07:56:02.117

只需更改路径变量的值

```
<cq:include path="par1" resourceType="foundation/components/parsys" />
<cq:include path="par2" resourceType="foundation/components/parsys" /> 
```

这应该可以帮助您拥有多个段落组件

# android - Setting Value of Number Picker

> ID：14995635
> 
> 赞同：1
> 
> 时间：2013-02-21T06:05:46.673
> 
> 标签：android, nullpointerexception, numberpicker

I have an array list of objects. Each object has a quantity. When The user loads up the `StartersActivity` I have a `ListView` displaying a list of items they can add to there order. In each list there is a `NumberPicker`.

When the user opens the activity for the first time the value of the `NumberPicker` is set to 0\. However when they add and Item to their Order I Increment the quantity of the item in the list. Upon returning to the `StartersActivity` I would now like to have the value of the `NumberPicker` set to the quantity of each item.

At the moment this is how i am attempting to implement his. I am getting this error when I open the `StartersActivity`:

**FATAL EXCEPTION: main java.lang.IndexOutOfBoundsException: Invalid index 1, size is 1**

This is line error occurs at:

```
np.setValue(Order.getInstance().getOrderItems().get(position).getQty()); 
```

**`MenuItemArrayAdapter` class:**

```
 public class MenuItemArrayAdapter extends ArrayAdapter<MenuItem> {

//This list holds the items pulled from the web server.
private List<MenuItem> menuItems;
//This list holds the current items the user wants to add to their order.

//Number picker - lets user set quantity of item they wish to order. Adjusts the sub total of the order (price text view).
private static NumberPicker np;

//This text view is updated as user adds/removes items.
private TextView price;
//used to calculate the price.
private double amount = Order.getInstance().getAmount();
private double total = 0.0;

private OrderApplication app;

// Constructor - Takes reference to the Text View price - which will be updated when the value of number picker is adjusted.
public MenuItemArrayAdapter(Context context, List<MenuItem> menuItems,
        TextView price) {
    super(context, R.layout.menuitem_row, menuItems);
    this.menuItems = menuItems;
    this.price = price;

}

public MenuItemArrayAdapter(Context context) {
    super(context, R.layout.menuitem_row);
}

public View getView(final int position, View convertView, ViewGroup parent) {

    View v = convertView;
    if (v == null) {
        LayoutInflater vi = (LayoutInflater) getContext().getSystemService(
                Context.LAYOUT_INFLATER_SERVICE);
        v = vi.inflate(R.layout.menuitem_row, null);
        v.setFocusable(true);
    }

    // assign values to view
    final MenuItem item = this.menuItems.get(position);

    TextView nameView = (TextView) v.findViewById(R.id.item_name);
    final TextView priceView = (TextView) v.findViewById(R.id.item_price);

    nameView.setText(item.getName() + " ");
    priceView.setText("€" + String.valueOf(item.getPrice()));

    // number picker
    np = (NumberPicker) v.findViewById(R.id.numpick);
    np.setMaxValue(20);
    np.setMinValue(0);
    if(Order.getInstance().getOrderItems().size()>0){
    np.setValue(Order.getInstance().getOrderItems().get(position).getQty());
    }else{
        np.setValue(0);
    }
    np.setFocusable(false);
    // calculation occurs when values are changed...
    np.setOnValueChangedListener(new OnValueChangeListener() {
        public void onValueChange(NumberPicker picker, int oldVal,
                int newVal) {
            //Add to order - increment price
            if (newVal > oldVal) {
                total = (item.getPrice() * newVal) - item.getPrice()
                        * oldVal;
                Order.getInstance().addToOrder(item);
                item.incQty();
                amount += total;
                Order.getInstance().setAmount(amount);
                Toast.makeText(picker.getContext(), "Item Added: " + item.getName() + " Size: " + Order.getInstance().getOrderItems().size(), Toast.LENGTH_SHORT).show();
            }
            //remove from order - decrement price
            if (newVal < oldVal) {
                total = (item.getPrice() * oldVal) - item.getPrice()
                        * newVal;
        Order.getInstance().removeFromOrder(position);
        item.decQty();
        amount -= total;
    Order.getInstance().setAmount(amount);
    Toast.makeText(picker.getContext(), "Item removed: " + item.getName() + " Size: " + Order.getInstance().getOrderItems().size(), Toast.LENGTH_SHORT).show();

            }
            //update the text view price.
            price.setText("€" + String.valueOf(Order.getInstance().getAmount()));
        }
    });
    return v;
}
 } 
```

Can anyone explain what is going wrong with my code. I can't figure it out. Many thanks.

Modified the code to set the value of `NumberPicker` to this: Still getting NPE

```
if(Order.getInstance().getOrderItems().size() > 0){
    //Loop to adjust the number picker to the quantity of dishes ordered.
    for(int i = 0; i != Order.getInstance().getOrderItems().size(); i ++){
        np.setValue(Order.getInstance().getOrderItems().get(position - 1).getQty());
    }
    }else{
        np.setValue(0);
    } 
```

STACK TRACE:

> ```
> 02-21 06:00:51.979: E/AndroidRuntime(6876): FATAL EXCEPTION: main
> 02-21 06:00:51.979: E/AndroidRuntime(6876):
> java.lang.IndexOutOfBoundsException: Invalid index 1, size is 1 02-21
> 06:00:51.979: E/AndroidRuntime(6876):     at
> java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:251)
> 02-21 06:00:51.979: E/AndroidRuntime(6876):   at
> java.util.ArrayList.get(ArrayList.java:304) 02-21 06:00:51.979:
>  E/AndroidRuntime(6876):  at
>  com.example.waitronproto9.MenuItemArrayAdapter.getView(MenuItemArrayAdapter.java:84)
>  02-21 06:00:51.979: E/AndroidRuntime(6876):  at
>  android.widget.AbsListView.obtainView(AbsListView.java:2159) 02-21
>  06:00:51.979: E/AndroidRuntime(6876):    at
>  android.widget.ListView.makeAndAddView(ListView.java:1831) 02-21
>  06:00:51.979: E/AndroidRuntime(6876):    at
>  android.widget.ListView.fillDown(ListView.java:674) 02-21
>  06:00:51.979: E/AndroidRuntime(6876):    at
>  android.widget.ListView.fillFromTop(ListView.java:735) 02-21
>  06:00:51.979: E/AndroidRuntime(6876):    at
>  android.widget.ListView.layoutChildren(ListView.java:1652) 02-21
>  06:00:51.979: E/AndroidRuntime(6876):    at
>  android.widget.AbsListView.onLayout(AbsListView.java:1994) 02-21
>  06:00:51.979: E/AndroidRuntime(6876):    at
>  android.view.View.layout(View.java:14008) 02-21 06:00:51.979:
>  E/AndroidRuntime(6876):  at
>  android.view.ViewGroup.layout(ViewGroup.java:4373) 02-21 06:00:51.979:
>  E/AndroidRuntime(6876):  at
>  android.widget.LinearLayout.setChildFrame(LinearLayout.java:1663)
>  02-21 06:00:51.979: E/AndroidRuntime(6876):  at
>  android.widget.LinearLayout.layoutVertical(LinearLayout.java:1521)
>  02-21 06:00:51.979: E/AndroidRuntime(6876):  at
>  android.widget.LinearLayout.onLayout(LinearLayout.java:1434) 02-21
>  06:00:51.979: E/AndroidRuntime(6876):    at
>  android.view.View.layout(View.java:14008) 02-21 06:00:51.979:
>  E/AndroidRuntime(6876):  at
>  android.view.ViewGroup.layout(ViewGroup.java:4373) 02-21 06:00:51.979:
>  E/AndroidRuntime(6876):  at
>  android.widget.FrameLayout.onLayout(FrameLayout.java:448) 02-21
>  06:00:51.979: E/AndroidRuntime(6876):    at
>  android.view.View.layout(View.java:14008) 02-21 06:00:51.979:
>  E/AndroidRuntime(6876):  at
>  android.view.ViewGroup.layout(ViewGroup.java:4373) 02-21 06:00:51.979:
>  E/AndroidRuntime(6876):  at
>  android.widget.LinearLayout.setChildFrame(LinearLayout.java:1663)
>  02-21 06:00:51.979: E/AndroidRuntime(6876):  at
>  android.widget.LinearLayout.layoutVertical(LinearLayout.java:1521)
>  02-21 06:00:51.979: E/AndroidRuntime(6876):  at
>  android.widget.LinearLayout.onLayout(LinearLayout.java:1434) 02-21
>  06:00:51.979: E/AndroidRuntime(6876):    at
>  android.view.View.layout(View.java:14008) 02-21 06:00:51.979:
>  E/AndroidRuntime(6876):  at
>  android.view.ViewGroup.layout(ViewGroup.java:4373) 02-21 06:00:51.979:
>  E/AndroidRuntime(6876):  at
>  android.widget.FrameLayout.onLayout(FrameLayout.java:448) 02-21
>  06:00:51.979: E/AndroidRuntime(6876):    at
>  android.view.View.layout(View.java:14008) 02-21 06:00:51.979:
>  E/AndroidRuntime(6876):  at
>  android.view.ViewGroup.layout(ViewGroup.java:4373) 02-21 06:00:51.979:
>  E/AndroidRuntime(6876):  at
>  android.view.ViewRootImpl.performLayout(ViewRootImpl.java:1892) 02-21
>  06:00:51.979: E/AndroidRuntime(6876):    at
>  android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1711)
>  02-21 06:00:51.979: E/AndroidRuntime(6876):  at
>  android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:989) 02-21
>  06:00:51.979: E/AndroidRuntime(6876):    at
>  android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4351)
>  02-21 06:00:51.979: E/AndroidRuntime(6876):  at
>  android.view.Choreographer$CallbackRecord.run(Choreographer.java:749)
>  02-21 06:00:51.979: E/AndroidRuntime(6876):  at
>  android.view.Choreographer.doCallbacks(Choreographer.java:562) 02-21
>  06:00:51.979: E/AndroidRuntime(6876):    at
>  android.view.Choreographer.doFrame(Choreographer.java:532) 02-21
>  06:00:51.979: E/AndroidRuntime(6876):    at
>  android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:735)
>  02-21 06:00:51.979: E/AndroidRuntime(6876):  at
>  android.os.Handler.handleCallback(Handler.java:725) 02-21
>  06:00:51.979: E/AndroidRuntime(6876):    at
>  android.os.Handler.dispatchMessage(Handler.java:92) 02-21
>  06:00:51.979: E/AndroidRuntime(6876):    at
>  android.os.Looper.loop(Looper.java:137) 02-21 06:00:51.979:
>  E/AndroidRuntime(6876):  at
>  android.app.ActivityThread.main(ActivityThread.java:5041) 02-21
>  06:00:51.979: E/AndroidRuntime(6876):    at
>  java.lang.reflect.Method.invokeNative(Native Method) 02-21
>  06:00:51.979: E/AndroidRuntime(6876):    at
>  java.lang.reflect.Method.invoke(Method.java:511) 02-21 06:00:51.979:
>  E/AndroidRuntime(6876):  at
>  com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
>  02-21 06:00:51.979: E/AndroidRuntime(6876):  at
>  com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560) 02-21
>  06:00:51.979: E/AndroidRuntime(6876):    at
>  dalvik.system.NativeStart.main(Native Method) 
> ```

# c# - VB.NET / C#.Net MSHTML: Unable to get "name" attribute from Outerhtml after using "setAttribute('name',value)" for certain elements

> ID：14995638
> 
> 赞同：0
> 
> 时间：2013-02-21T06:05:58.270
> 
> 标签：c#, html, vb.net, mshtml, outerhtml

I am developing a WYSIWYG application specifically for my company usage with custom integration with company's existing tools.

I was unable to get the "name" attribute out of certain elements when trying to get the html string by using ".OuterHtml", especially INPUT tag element.

# Code example:

```
 `Dim inElem as windows.forms.htmlElement = hdoc.CreateElement("INPUT")`
    `inElem.Id = "txt01"`
    `inElem.setAttribute("name", inElem.Id)`
    `inElem.setAttribute("type", "text")`
    `inElem.setAttribute("placeholder","text here....")`

    '' append the created element to html body
    `hdoc.Body.AppendChild(inElem)`

    --> Getting html string:
        ** hdoc.body.getElementById("txt01").OuterHtml => "<input id=txt01 placeholder='text here....'></input>"
    --> What I really want is:
        ** hdoc.body.getElementById("txt01").OuterHtml => "<input id=txt01 placeholder='text here....' type='text' name='txt01'></input>" 
```

Yes, not only name attribute were missing, some other too. (e.g. TYPE) Anyone could help me on this matter?

# Solution attempted:

```
 For Each inputEle As Windows.Forms.HtmlElement In hdoc.Body.GetElementsByTagName("input")
        CType(inputEle.DomElement, mshtml.IHTMLInputElement).name = inputEle.Id
    Next 
```

** FAILED ** :(

# ULTIMATE SOLUTION:

```
 Use HTML Agility Pack:
    ----------------------
    Dim inputEle3 As HtmlAgilityPack.HtmlNode = new_wb.CreateElement("input")
    inputEle3.Attributes.Add("id", "txt01")
    inputEle3.Attributes.Add("name", inputEle3.Id)
    inputEle3.Attributes.Add("type", "text")
    inputEle3.Attributes.Add("placeholder", "text here ....")

    RESULT:
    -------
    inputEle3.OuterHtml => <input id="txt01" name="txt01" type="text" placeholder="text here ...." > 
```

It works now, provided I use HtmlAgilityPack.dll :( Microsoft mshtml sucks! :(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T07:15:59.733

这对我有用。请原谅我使用数据类型，由于某种原因，我的 Visual Studio 上`dynamic`没有该库。`mshtml`

```
private void Form1_Load(object sender, EventArgs e)
        {
            this.webBrowser1.Navigate("about:blank");
            this.webBrowser1.Document.Write("<INPUT id='hell' class='blah' placeholder='text here'   name='hell' type='text'></INPUT>");
            dynamic htmldoc = webBrowser1.Document.DomDocument as dynamic;
            dynamic node = htmldoc.getElementById("hell") as dynamic;
            string x = node.OuterHtml; //gets name but not type
            string s = node.GetAttribute["type"]; //gets type
            string name = node.GetAttribute["name"]; //gets name
        } 
```

所以说的 OuterHtml 没有得到属性，但是在调用 GetAttribute 方法时它确实有效。希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T16:14:51.863

# 终极解决方案：

```
Use HTML Agility Pack:
----------------------
Dim inputEle3 As HtmlAgilityPack.HtmlNode = new_wb.CreateElement("input")
inputEle3.Attributes.Add("id", "txt01")
inputEle3.Attributes.Add("name", inputEle3.Id)
inputEle3.Attributes.Add("type", "text")
inputEle3.Attributes.Add("placeholder", "text here ....")

RESULT:
-------
inputEle3.OuterHtml => <input id="txt01" name="txt01" type="text" placeholder="text here ...." > 
```

它现在可以工作，只要我使用 HtmlAgilityPack.dll :( Microsoft mshtml 糟透了！:(

# asp.net - Need to freeze a column when using jqGrid tableToGrid function

> ID：14995639
> 
> 赞同：0
> 
> 时间：2013-02-21T06:05:58.623
> 
> 标签：asp.net, jqgrid

I have a c# asp.net application that uses a Listview control to render a wide table (many columns).

To make this problem a little more generic, the Listview simply renders an HTML table, and is incidental to the problem.

I want to use jqGrid's "tableToGrid" function to freeze the headers and handle vertical and horizontal scrolling, and preferably freeze the 1st column of the resulting HTML table. The frozen headers and scrolling are working, but after considerable research, I don't seem to be able to "put the pieces together" to freeze the column.

I don't want to have to expicitly create colNames and colModel for all the columns in my table unless necessary, since this is handled by the tableToGrid function, so I used an example of changing a frozen column and came up with this javascript:

```
tableToGrid($('#parcelTable'),
{
 sortable: false,
 multiselect: false,
 shrinkToFit: false,
 width: 952,
 height: 300
})
.jqGrid('destroyFrozenColumns')
.jqGrid("setColProp", "rowEdit", { frozen: true })
.jqGrid("setFrozenColumns")
.trigger('reloadGrid'); 
```

When I tried the above, I got the message ***Microsoft JScript runtime error: 'undefined' is null or not an object***
I also tried not chaining the code for the frozen columns, as in
$('#parcelTable').jq('destroyFrozenColumns');
$('#parcelTable').(jqGrid("setColProp", "rowEdit", { frozen: true }), etc
and got the same message.

I have undoubtedly made some dumb syntax or usage error, but I don't know where to go from here, and don't really know if this is the best approach. Any help appreciated--thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T04:04:29.580

要冻结标题，您可以使用：

```
 $("#gridId").setLabel("Column Index",'Label',"jqgridheaderLocked"); 
```

这可以在`loadComplete()`jqgrid中执行

要冻结列，您只需将类添加到列定义中

```
 classes:'jqgridbodyLock' 
```

例如 ：

```
 {name:"Col1",index:"Col1",width:80,eight:50,sortable:false,classes:'jqgridbodyLock'}, 
```

还将以下 css 定义添加到您的公共 css 文件中

```
.jqgridbodyLock{
    position:relative; 
    left: expression(parentNode.parentNode.parentNode.parentNode.parentNode.scrollLeft);
    z-index: 10;
}

.jqgridheaderLocked{
    position:relative;
    left: expression(parentNode.parentNode.parentNode.parentNode.parentNode.scrollLeft); /* IE5+ only */
    z-index:30;
} 
```

# c# - 如何解密几个片段中的大缓冲区？充气城堡，AES/CTR/NoPadding

> ID：14995640
> 
> 赞同：3
> 
> 时间：2013-02-21T06:06:00.930
> 
> 标签：c#, encryption, bouncycastle

我认为我的问题需要一些我可能没有的基本知识。

我正在解密这样的字节数组：

```
var cipher = CipherUtilities.GetCipher("AES/CTR/NoPadding");
cipher.Init(false, new ParametersWithIV(new KeyParameter(bkey), bIV));
byte[] DecryptedChunk = cipher.ProcessBytes(EncryptedChunk, 0, ChunkSize); 
```

我想了解如何将这个缓冲区切成 2 并解密前半部分和后半部分。

如果我只是这样做：

```
var cipher = CipherUtilities.GetCipher("AES/CTR/NoPadding");
cipher.Init(false, new ParametersWithIV(new KeyParameter(bkey), bIV));
byte[] FirstDecryptedChunk = cipher.ProcessBytes(FirstEncryptedChunk, 0, FirstChunkSize);
byte[] SecondDecryptedChunk = cipher.ProcessBytes(SecondEncryptedChunk, 0, SecondChunkSize); 
```

那么第一个 Chunk 是可以的，但是第二个是错误的。

我在互联网上花了大约 6 个小时阅读，我找不到解释。与某种必须更新的计数器和IV有关吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T12:58:14.690

也许这里有一些混淆，因为 BC C# 版本目前提供 CTR 模式作为分组密码，即 BufferedBlockCipher，尽管它应该也可以作为流密码，即 BufferedStreamCipher。

为了获得完整的输出，您应该在所有其他处理之后调用 DoFinal 方法之一（在密码上）。密码一次缓冲一个块的输入，并且只有在知道您完成后才能输出部分块。

即使它是 BufferedStreamCipher，调用 DoFinal 也是一种很好的做法，以指示底层密码清理并重置以进行另一次运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T13:10:36.003

我不敢相信我在这个问题上花了 10 个小时！！！！

我刚刚编写了一个最小的应用程序，只是为了隔离问题，基本上它看起来就像我在原始线程中发布的代码并且它正在工作！

我发现在我的原始代码中我在每个段之间调用 .dofinal，这就是下一个段的混乱！！！！

Pfffiuuu ... 早上 8 点，我已经花了整夜的时间，我想我可以去睡觉了 ;-)

# matlab - 在matlab中更改图例图

> ID：14995643
> 
> 赞同：0
> 
> 时间：2013-02-21T06:06:07.930
> 
> 标签：matlab, figure

我有一些基本上可以做到这一点的代码：

```
for i = 1:length(ReliabilityStruct)
    if (FailureFlags(i) == 0) 
        plot(X(i), Y(i), '.b');
    elseif (FailureFlags(i) == 1)
        plot(X(i), Y(i), 'or');
    elseif (FailureFlags(i) == 2)
        plot(X(i), Y(i), 'og');
    elseif (FailureFlags(i) == 3)
        plot(X(i), Y(i), 'ok');
    else
        fprintf('\nUnknown Flag, check Data\n')
        return
    end
end
drawnow;
legend('Recovery', '1', '2', '3'); 
```

所以我的目标是制作一个具有不同标志的不同符号的图表。见下文：

![在此处输入图像描述](../Images/14c398ec791ae6133620b6e51cb86333.png)

如您所见，图例并不完全适合数据。您如何更改每个图例条目以解决此问题？或者，有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T06:16:11.563

我认为你可以使用这样的东西（额外的好处是你可以避免循环！）：

```
ind = FailureFlags==0;
plot(X(ind), Y(ind), '.b');

ind = FailureFlags==1;
plot(X(ind), Y(ind), 'or');

ind = FailureFlags==2;
plot(X(ind), Y(ind), 'og');

ind = FailureFlags==3;
plot(X(ind), Y(ind), 'ok');

legend('Recovery', '1', '2', '3'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T06:14:57.140

试试这个。在您的循环中为每个图分配如下：

```
 p1=plot(X(i), Y(i), '.b');
elseif (FailureFlags(i) == 1)
 p2=plot(X(i), Y(i), 'or');
elseif (FailureFlags(i) == 2)
 p3=plot(X(i), Y(i), 'og');
elseif (FailureFlags(i) == 3)
 p4=plot(X(i), Y(i), 'ok'); 
```

然后您可以将图例用于特定事物：

```
legend([p1 p2],'stuff','morestuff') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T06:20:28.857

请记住，您可以使用`help`命令参考任何功能的用法。对于您的情况，`help legend`将为您提供如下使用示例。

```
legend(H,string1,string2,string3, ...) puts a legend on the plot
containing the handles in the vector H using the specified strings as
labels for the corresponding handles. 
```

因此，您可以通过将绘图分配给变量来获取绘图处理程序，例如`p1=plot(X(i), Y(i), '.b');`. 然后通过调用以处理程序作为第一个参数的命令来绘制图例，例如`legend([p1], 'something')`.

# aem - CQ5 页面中的通用组件

> ID：14995644
> 
> 赞同：0
> 
> 时间：2013-02-21T06:06:08.720
> 
> 标签：aem

我的问题很基本。我正在创建一个新模板，在该模板中，我将有一个使用 DIV 元素的具体结构。但是在几乎 7-8 的 DIV 中，我需要用户输入数据。

我可以使用哪些组件/代码行来让页面创建者可以编辑和自定义所有这些 7-8 DIV？

我尝试了多个段落：

```
<cq:include path="par" resourceType="foundation/components/parsys"/> 
```

但只有最上面的一个出现在页面上。！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T07:59:38.793

对于有多个段落，只需重命名 cq:include 标记中的路径值。也检查[这里](https://stackoverflow.com/a/14997145/2094081)

# mysql - 合并相关记录

> ID：14995646
> 
> 赞同：0
> 
> 时间：2013-02-21T06:06:15.960
> 
> 标签：mysql, sql

我有这个 MySQL 查询：

```
select day(ReservationDate) as ReservationDay, sum(SleighSeats) as SleighSeats, sum(CabSeats) as CabSeats, 0 as IsFullMoon, '' as OverrideText
from Reservations
where month(ReservationDate) = 2
group by ReservationDate
union
select day(CalendarDate) as ReservationDay, 0 as SleighSeats, 0 as CabSeats, IsFullMoon, OverrideText
from CalendarOverrides
where month(CalendarDate) = 2
group by CalendarDate
order by ReservationDay 
```

Reservations 表可以包含任何给定日历日期的任意数量的记录，或者根本不包含任何记录。CalendarOverrides 表可以正好包含每个日历日期的 1 条或 0 条记录。我正在尝试将结果合并在一起，但并不完全正确。

这是我的结果集：

![在此处输入图像描述](../Images/94a1732f81f915e65e9e09230f447b1c.png)

预订第 23 天是个问题。我希望将这 2 条记录合并为 1，以便 5 个值是： 23、6、8、1
、[空白/空]

澄清：
- ReservationDay 在两个表中（在 CalendarOverrides 中命名为 CalendarDate）
- SleighSeats 和 CabSeats 存在仅在 Reservations 表中
- IsFullMoon 和 OverrideText 仅存在于 CalendarOverrides 表

中联合中的顶部查询将已经合并同一 ReservationDay 上的所有 Reservations 记录，但是如何将底部查询中的任何记录与顶部查询中的记录合并，为同一个预订日？（因此任何一天的记录都不会超过 1 条。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T06:16:49.763

```
select 
    ReservationDay, 
    max(SleighSeats) as SleighSeats, 
    max(CabSeats) as CabSeats, 
    max(IsFullMoon) as IsFullMoon,
    max(OverrideText) as OverrideText
from (

    select 
        day(ReservationDate) as ReservationDay, 
        sum(SleighSeats) as SleighSeats, 
        sum(CabSeats) as CabSeats, 
        0 as IsFullMoon, 
        '' as OverrideText
    from Reservations
    where month(ReservationDate) = 2
    group by ReservationDate
    union
    select 
        day(CalendarDate) as ReservationDay, 
        0 as SleighSeats, 
        0 as CabSeats, 
        IsFullMoon, 
        OverrideText
    from CalendarOverrides
    where month(CalendarDate) = 2
    group by CalendarDate, IsFullMoon, OverrideText
) as subtbl 
group by ReservationDay
order by ReservationDay, IsFullMoon 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T06:20:55.053

```
select day(ReservationDate) as ReservationDay, sum(SleighSeats) as SleighSeats,
    sum(CabSeats) as CabSeats, COALESCE(IsFullMoon,0) as IsFullMoon,
    COALESCE(OverrideText,'') as OverrideText
from Reservations
left outer join CalendarOverrides 
    ON Reservations.ReservationDate = CalendarOverrides.CalendarDate
where month(ReservationDate) = 2
group by ReservationDate, IsFullMoon, OverrideText

union all

select day(CalendarDate) as ReservationDay, 0 as SleighSeats, 
    0 as CabSeats, IsFullMoon, 
    OverrideText
from CalendarOverrides
where month(CalendarDate) = 2
and NOT EXISTS
(
    SELECT 1 
    FROM Reservations 
    WHERE Reservations.ReservationDate = CalendarOverrides.CalendarDate
)

order by ReservationDay 
```

* * *

如果您的 RDBMS 支持它，您也应该能够执行完全连接（由于`COALESCE`where 子句，这可能会更慢？）：

```
select day(COALESCE(ReservationDate, CalendarDate)) as ReservationDay,
    COALESCE(sum(SleighSeats),0) as SleighSeats,
    COALESCE(sum(CabSeats),0) as CabSeats, COALESCE(IsFullMoon,0) as IsFullMoon,
    COALESCE(OverrideText,'') as OverrideText
from Reservations
full join CalendarOverrides 
    ON Reservations.ReservationDate = CalendarOverrides.CalendarDate
where month(COALESCE(ReservationDate, CalendarDate)) = 2
group by ReservationDate, CalendarDate, IsFullMoon, OverrideText
order by ReservationDay 
```

# oracle - 是否有以特定顺序执行 where 子句的 oracle 提示？

> ID：14995650
> 
> 赞同：0
> 
> 时间：2013-02-21T06:06:26.467
> 
> 标签：oracle, indexing, optimizer-hints

考虑对 datecolumn 进行索引的表上的以下两个查询 -

```
Q1: select * from table where datecolumn > sysdate - 5;
Q2: select * from table where datecolumn > sysdate - 5 and datecolumn < sysdate - 1; 
```

Q1 使用索引。但是，Q2 以某种方式进行了全表扫描。是因为 oracle 以某种方式选择先执行“datecolumn < sysdate - 1”吗？在这种情况下，有没有办法强制执行涉及一列的 where 子句的执行顺序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T06:16:20.390

您可以指定索引提示，如下所示：

```
select /*+ INDEX (table datecolumn_ix)*/ 
       * 
  from table 
  where datecolumn > sysdate - 5 and datecolumn < sysdate - 1; 
```

有关详细信息，请参阅[Oracle 索引提示。](http://docs.oracle.com/cd/B19306_01/server.102/b14200/sql_elements006.htm#SQLRF50405)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T06:16:33.873

当然有`index` [提示](http://psoug.org/reference/hints.html)。

```
/*+ INDEX(table index_name) */ 
```

但是，在您的情况下，收集表的统计信息可能会更好。

使用[DBMS_STATS.GATHER_TABLE_STATS('schema','table')](http://docs.oracle.com/cd/B28359_01/appdev.111/b28419/d_stats.htm)过程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-23T09:40:33.160

默认情况下，Oracle 不保证您的表将按照您提到的顺序加入，因此您可以使用以下提示：

1.  **订购** [https://docs.oracle.com/cd/B10500_01/server.920/a96533/hintsref.htm#5555](https://docs.oracle.com/cd/B10500_01/server.920/a96533/hintsref.htm#5555) 它将按照您在*where*语句中提到的顺序加入您的表格

2.  **领先的** [https://docs.oracle.com/cd/B10500_01/server.920/a96533/hintsref.htm#5730](https://docs.oracle.com/cd/B10500_01/server.920/a96533/hintsref.htm#5730) 您可以指定表的连接顺序

    ```
    select /*+ leading (c b a) */
      a.*
    from
      tablea a
      , tableb b
      , tablec c
    where
      a.some_id = b.some_id
      and c.some_id = b.other_id 
    ```

    此外，对于您的 Q2，您可以尝试`between`选项 [https://docs.oracle.com/cd/B28359_01/server.111/b28286/conditions011.htm](https://docs.oracle.com/cd/B28359_01/server.111/b28286/conditions011.htm)

# iphone - 防止 UIWebview 上的捏缩放和双击缩放

> ID：14995653
> 
> 赞同：3
> 
> 时间：2013-02-21T06:06:44.103
> 
> 标签：iphone, objective-c, ios6, uiwebview

我知道这个问题以前曾以各种方式提出过，但我想把我试图解决的问题提出来。我在 UIWebview 上加载谷歌地图，而不是使用 Mapkit。缩放地图有一个限制。因此，我想限制用户使用双击或捏合来缩放，这恰好是 UIWebview 的默认行为。我为应用程序用户的使用提供了单独的放大/缩小按钮。任何人都可以提供相同的解决方案。使用 iOS6 SDK。

```
webView.multipleTouchEnabled = NO; 
```

或者

```
webView.scalesPageToFit = NO; 
```

以上对我没有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T16:56:17.603

我认为您必须注入 html 才能使其正常工作。

```
<meta name="viewport" content="width=1000px;  user-scalable=0;" /> 
```

# join - 改变 Yii 中的关系条件

> ID：14995654
> 
> 赞同：1
> 
> 时间：2013-02-21T06:06:47.147
> 
> 标签：join, yii, conditional-statements, has-many, yii-relations

我遇到了一个小问题，我需要你的帮助。我想连接两个表，但连接还有其他条件，而不仅仅是外键。我尝试设置条件参数，但它在我的查询中创建了一个 WHERE，这将导致我的主表将被过滤而不是连接的表。

```
'dokumentumok' => array(self::HAS_MANY, 'Fileuploader', 'foreign_id', 'joinType' => 'LEFT JOIN', 'condition' => "(dokumentumok.fileuploader_type='nyomtatvany') AND dokumentumok.fileuploader_deleted = 0"), 
```

这将是条件->

```
'condition' => "(dokumentumok.fileuploader_type='nyomtatvany') AND dokumentumok.fileuploader_deleted = 0 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T07:05:24.540

替换`condition`为`on`：

```
'dokumentumok' => array(self::HAS_MANY, 'Fileuploader', 'foreign_id', 
  'joinType' => 'LEFT JOIN', 
  'on' => "(dokumentumok.fileuploader_type='nyomtatvany') 
  AND dokumentumok.fileuploader_deleted = 0"
) 
```

另见：[http ://www.yiiframework.com/forum/index.php/topic/10185-using-relations-and-conditions/](http://www.yiiframework.com/forum/index.php/topic/10185-using-relations-and-conditions/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-04T17:23:29.657

或者例如。

**关于**

> 'dokumentumok' => array(self::HAS_MANY, 'Fileuploader', 'foreign_id');

**并获取模型**

> YouModelName::model()->with(array('dokumentumok' => array('on' => "(dokumentumok.fileuploader_type='nyomtatvany') AND dokumentumok.fileuploader_deleted = 0")))->findAll();

# android - 由于键盘，无法在自定义 ListView 中看到 EditText

> ID：14995657
> 
> 赞同：0
> 
> 时间：2013-02-21T06:06:57.203
> 
> 标签：android, listview, keyboard

我有一个带有动态添加的 Edittexts 的 Listview。我使用 BaseAdapter 来填充我的列表视图。键盘挡住了底部几个 Edittexts 的视图。我该如何防止这种情况？

我尝试添加这是清单，但它不起作用。

```
android:windowSoftInputMode="adjustResize" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T06:26:20.970

在清单文件的活动标签中使用它

```
 android:windowSoftInputMode="adjustPan" 
```

如：

```
 <activity android:name="com.exmple.activity"
        android:label="@string/app_name" 
        android:screenOrientation="portrait"
        android:windowSoftInputMode="adjustPan"
        > 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T06:24:48.257

我不确定，但我在使用 ScrollView 时遇到了同样的问题。所以，我所做的是，我将视图内的所有内容滚动到最大顶部（1000 太高了，所以它滚动到它可以滚动的位置）。这将所有内容都带到了键盘之上。

```
ScrollView sv;
sv.post(new Runnable() { 
    @Override
    public void run() { 
         sv.scrollTo(0, 10000);
    } 
}); 
```

因此，每当用户在底部添加任何其他元素时，一切都在键盘上方。我还没有看到你的代码，但这个想法可能会对你有所帮助。祝一切顺利。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T06:24:58.360

改用 android:windowSoftInputMode="adjustPan"。它将向上移动布局。

# json - Laravel 4 JSON 响应与 Cookie

> ID：14995660
> 
> 赞同：5
> 
> 时间：2013-02-21T06:07:10.563
> 
> 标签：json

如何设置带有 json 响应的 cookie？

我注意到，至少对我来说，以下命令是唯一可以设置 cookie 的命令：

```
 return Redirect::to('/')
                ->withCookie(Cookie::make('blog', $cookie_values, 1000)); 
```

当然，如果它是一个 ajax 请求，它将返回重定向的目标。

我如何将其转换为 ajax 请求并返回带有 cookie 的 json 响应？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T06:12:08.243

我能够使用以下代码设置一个带有 json 响应的 cookie：

```
 $cookie_values = array(
                'name' => Input::get('name'),
                'id' => Auth::user()->id,
                'login_success' => 1);

            if(Request::ajax())
            {                    
                $cookie = Cookie::make('blog', $cookie_values, 1000);
                $response = Response::json($cookie_values);
                $response->headers->setCookie($cookie);

                return $response;
            } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-27T10:24:32.790

很好的提示！

查看 Symfony\Component\HttpFoundation\ResponseHeaderBag 还揭示了如何在 HTTP 访问控制出现问题时为 json 响应设置标头：

```
$response->headers->set('Access-Control-Allow-Origin', '/* your subdomain */'); 
```

# javascript - Javascript选择数组长度

> ID：14995663
> 
> 赞同：1
> 
> 时间：2013-02-21T06:07:24.170
> 
> 标签：javascript, validation

我在这里发布了一个很长的问题[表单验证多维选择框](https://stackoverflow.com/questions/14995314/form-validation-multidimensional-objects/14995478#14995478)

一个简短的问题是，我允许用户添加多行数据输入。每行都有

```
<select name="color[]">
   <option>1</option>
   <option>2</option>
   <option>3</option>
   <option>4</option>
</select> 
```

如果有 3 个选择框，我可以使用它来获取它的长度，`frm["color[]"].length`它将返回 3。

但是如果只有 1 个选择框`frm["color[]"]`会从选择中返回我的选项数量并返回 4

**编辑**

使用`document.getElementsByName("color[]")`过并且有效。谢谢科林，

```
 colors= document.getElementsByName("colors[]").length;

    console.log(colors); // print proper numbers now
    for(i=0; i<colors; i++){
        dd = frm["colors["+i+"]"].value; // <- how to check value
        console.log(dd);
        k = i+1;
        var subColors = document.getElementsByName("colors["+k+"][]").length

    } 
```

我如何从选择框中获取所选选项的值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T06:10:21.817

使用更具体的`frm.getElementsByName("color[]")`，这将显式选择`<select>`元素而不是当前所做的。

编辑：这是如何使用它：

```
var sels = document.getElementsByName("colors[]"), l = sels.length, dd;
for( i=0; i<l; i++) {
    dd = sels[i];
    // do stuff
} 
```

# python - 调整 curses 终端的大小不会调整程序窗口的大小

> ID：14995664
> 
> 赞同：1
> 
> 时间：2013-02-21T06:07:23.683
> 
> 标签：python, curses

我在 Windows 上，curses 模块不是本机的，所以我正在使用适用于 python 3.2 的 Windows curses 模块，在[此处](http://www.lfd.uci.edu/~gohlke/pythonlibs/#curses)找到。

我的目标是调整终端的大小，目前终端的大小为 25 行 x 80 列。首先，我尝试了该`curses.resizeterm(lines, cols)`命令，该命令显然在 windows curses 模块中找不到（并`hasattr(curses, 'resizeterm')`返回 false）。因此，我查看了替代模块 unicurses，它也适用于 Windows，但它甚至没有调整大小命令。

所以我做更多的阅读和了解环境变量`'LINES'`，`'COLS'`当设置时`os.environ`，应该调整终端的大小。他们确实这样做了。终端本身被调整了大小，但是显示终端的 Windows 程序仍然是和以前一样大小，25 x 80。我已经确认这两个变量确实已经改变了，写了一个小东西来显示它们在左上角。此外，该`box()`函数确实在屏幕周围绘制了一个边框，就好像变量已更改一样。

那么，任何人都可以解释 1）如何调整“Windows 窗口”的大小以匹配终端或 2）如何开始`resizeterm()`我的 python 安装？我的程序的相关代码和它的外观图片附在下面。

![控制台截图](../Images/d4d088bab0c52b4f0aa01f509a6a265b.png)

```
import random, sys, math, curses, os
from curses import *

curses.use_env(True)
os.environ['LINES'] = "80"
os.environ['COLS'] = "60"

stdscr = curses.initscr()
curses.noecho()
curses.cbreak()
curses.start_color()
stdscr.keypad(1)
curses.curs_set(0)

LINES, COLS = stdscr.getmaxyx() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-07-29T16:51:28.427

此代码可能会有所帮助：

```
 import curses

 screen = curses.initscr()

 # Check if screen was re-sized (True or False)
 resize = curses.is_term_resized(y, x)

 # Action in loop if resize is True:
 if resize is True:
     y, x = screen.getmaxyx()
     screen.clear()
     curses.resizeterm(y, x)
     screen.refresh() 
```

# python - 会话错误？使用 POST 使用请求或 urllib2

> ID：14995666
> 
> 赞同：0
> 
> 时间：2013-02-21T06:07:36.103
> 
> 标签：python, python-requests

`requests`尝试对网站进行身份验证并使用lib填写表格

```
import requests
payload = {"name":"someone", "password":"somepass", "submit":"Submit"}

s = requests.Session()
s.post("https://someurl.com", data=payload)

next_payload = {"item1":"something", "item2":"something", "submit":"Submit"}
r = s.post("https://someurl.com", data=next_payload)
print r.text 
```

身份验证有效，我验证我可以发布到表单，但是我遇到的这个问题`The action could not be completed, perhaps because your session had expired. Please try again` 在 urllib2 中给出了尝试和相同的结果——不要认为它是 cookie 的问题。我想知道这个页面上的 javascript 是否与给出会话错误有关？其他表单页面没有任何 javascripts。

感谢您的输入...

# c++ - 为 UDP 服务器响应重用 sock_fd 与新的 sock_fd

> ID：14995673
> 
> 赞同：1
> 
> 时间：2013-02-21T06:08:45.103
> 
> 标签：c++, c, sockets, udp, winsock

如果我有一个 UDP 服务器来处理传入的请求，处理传入`recvfrom`的请求（可能很耗时），可能会发回响应，然后`recvfrom`再次调用，最好创建一个带有信息的新 sock_fd`sockaddr* from`来发送使用服务器的 sock_fd 回复还是使用服务器的 sock_fd 发送回复？

**基本上，问题是我是否需要创建新的 sock_fd 的开销，或者我是否希望我的服务器能够处理请求而不必等待发送先前的请求响应。**

我无法根据应用程序的需求来决定，因为这将在库中使用（因此我不知道是否需要响应，以及处理请求需要多长时间）。

**我看不出这不是一个真正的问题。上面的粗体部分和第一句的最后部分清楚地提出了这个问题**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T06:50:06.043

没有必要创建一个新`sock_fd`的，因为创建的那个已经`bind`作为它的服务器进行了调用。

此外，您必须确保客户端不会在阻塞中等待响应`recvfrom`。

如果大多数服务器无法给出正确的响应，并且客户端会根据该错误代码执行重复请求或其他操作，则大多数服务器会发送一些错误代码，您可能需要以请求-响应的方式设计协议。

如果处理是一个问题，那么您始终可以将`struct sockaddr` **客户端**的数据+放在队列中并通过向线程发出唤醒信号来延迟处理，这样做您的侦听线程可以`recvfrom`快速恢复，然后您可以发送来自处理的响应完成后线程保存`struct sockaddr` **到客户端**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T07:05:20.750

> 我想要创建一个新的 sock_fd 的开销吗

不。

> 或者我是否希望我的服务器能够处理请求而不必等待发送前一个请求响应。

没有人必须等待通过 UDP 套接字发送消息。如果您愿意，您可以在单独的线程上处理每个传入的请求，并且`sendmsg()`如果需要，它们都可以同时调用。

您肯定只想使用一个套接字。一方面，这意味着回复将返回给客户端，并带有与他们发送的相同的源地址信息，这将全面减少混乱。

# ruby-on-rails - Rails：优雅地从“Has_many，Belongs_to”更改现有关联？

> ID：14995674
> 
> 赞同：0
> 
> 时间：2013-02-21T06:08:47.563
> 
> 标签：ruby-on-rails, ruby-on-rails-3, database-design, has-many-through, rails-activerecord

目前，用户可以创建一个 Track（想想文档）。用户还可以为这些曲目添加书签。我想添加一个共同作者功能，许多用户可以在其中编辑单个曲目。如何在保持当前作者的同时更改现有的“用户 has_many 曲目，曲目属于用户”关系？

用户.rb：

```
#authors(creates) track
has_many :creations, :class_name => "Track", :foreign_key => "author_id"

#bookmarks track
has_many :track_users
has_many :tracks, :through => :track_users 
```

轨道.rb：

```
belongs_to :author, :class_name => "User", :foreign_key => "author_id"

#bookmarked users
has_many :track_users
has_many :users, :through => :track_users 
```

我是否只需要像使用书签（“：through => :track_users”）一样创建另一个连接表，并使用脚本将作者移动到新的连接表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T07:07:35.673

你至少可以用两种方式

1.  保持作者关联，只需创建一个连接表。如果您不打算在此连接表上添加更多属性，则可以将 habtm 与此一起使用
2.  您可以将 author_id 放在轨道上并将作者布尔值添加到连接表中。

我更喜欢第二种解决方案，所以让我们这样做。创建一个创建连接表并将作者移动到连接表的迁移

```
def up
  create_table :track_authors do |t|
    t.integer :user_id
    t.integer :track_id
    t.boolean :author, default: false
  end

  add_index :track_authors, :user_id
  add_index :track_authors, :track_id

  # let's call the join table track_authors
  Track.find_each do |track|
    TrackAuthor.create(user_id: track.author_id, track_id: track.id, author: true)
  end
end 
```

然后在你的模型中，你可以这样做

```
# track.rb
has_many :track_authors
has_many :authors, through: :track_authors
has_one :author, through: :track_authors, conditions: { track_authors: { author: true } }

# track_author.rb
belongs_to :author, class_name: 'User'
belongs_to :track

# user.rb
has_many :track_authors
has_many :tracks, through: :track_authors
has_many :authored_trackes, through: :track_authors, conditions: { track_authors: { author: true } } 
```

# ruby - 为什么rabbitmq会丢失消息？

> ID：14995678
> 
> 赞同：3
> 
> 时间：2013-02-21T06:09:09.667
> 
> 标签：ruby, rabbitmq, amqp

我先用send.rb向rabbitmq发送100条消息，然后用`rabbitmqctl list_queues`它来查看状态，队列中有100条消息。然后我启动 recv.rb 来接收消息，实际上我收到了 100 条消息。

然后，我先启动recv.rb，然后用send.rb发送100条消息，最后只能得到95条消息。我尝试了很多次，在这种情况下我从来没有收到过 100 条消息。

为什么我丢失了消息？

**接收文件**

```
require 'amqp'

AMQP.start(:host => '127.0.0.1') do |connection|
  channel = AMQP::Channel.new(connection)
  queue   = channel.queue("test_queue", :durable => true)

  Signal.trap("INT") do
    connection.close do
      EM.stop { exit }
    end
  end

  channel.prefetch(1)

  queue.subscribe(:ack => true) do |header, body|
    puts body
    header.ack  # A 
  end
end 
```

如果我将`# A`行替换为

```
 EM.add_timer(body.count(".")) do
      puts " [x] Done"
      header.ack
    end 
```

和 rabbitmq-tutorials 一样，这个脚本崩溃了：

```
 /usr/local/lib/ruby/gems/1.9.1/gems/amq-client-0.9.10/lib/amq/client/async/adapter.rb:247:in `send_frame': Trying to send frame through a closed connection. Frame is #<AMQ::Protocol::MethodFrame:0x000000019dc6e0 @payload="\x00<\x00P\x00\x00\x00\x00\x00\x00\x00\x03\x00", @channel=2> (AMQ::Client::ConnectionClosedError)
    from /usr/local/lib/ruby/gems/1.9.1/gems/amq-client-0.9.10/lib/amq/client/async/channel.rb:138:in `acknowledge'
    from /usr/local/lib/ruby/gems/1.9.1/gems/amqp-0.9.8/lib/amqp/channel.rb:1003:in `acknowledge'
    from /usr/local/lib/ruby/gems/1.9.1/gems/amqp-0.9.8/lib/amqp/header.rb:35:in `ack'
    from recv.rb:22:in `block (3 levels) in <main>'
    from /usr/local/lib/ruby/gems/1.9.1/gems/eventmachine-1.0.0/lib/eventmachine.rb:187:in `call'
    from /usr/local/lib/ruby/gems/1.9.1/gems/eventmachine-1.0.0/lib/eventmachine.rb:187:in `run_machine'
    from /usr/local/lib/ruby/gems/1.9.1/gems/eventmachine-1.0.0/lib/eventmachine.rb:187:in `run'
    from /usr/local/lib/ruby/gems/1.9.1/gems/amqp-0.9.8/lib/amqp/connection.rb:38:in `start'
    from recv.rb:5:in `<main>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T09:40:42.647

这意味着您正在尝试通过已关闭的连接进行发布。请在 RabbitMQ 日志中发布您用于发布的脚本以及您最近收到的任何消息。

# ruby-on-rails - Rails 导入嵌套属性 CSV

> ID：14995684
> 
> 赞同：1
> 
> 时间：2013-02-21T06:09:31.410
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, csv, ruby-on-rails-3.2

我正在尝试使用其嵌套属性实现导入，紧随其后： [Rails Cast CSV Import](http://railscasts.com/episodes/396-importing-csv-and-excel "导轨铸件")

要导入的字符串的示例如下：

id subject_list_name subject_codes

```
1   CE2A    [CPE205, CPE206, CPE301, CPE302, CPE303] 
```

使用以下代码，我正在尝试导入

1.  主题列表模型的数据（id 和 subject_list_name）
2.  与来自主题模型的数据的多对一关系-主题列表有许多主题（主题代码）

现在，我能够导入主题列表的数据，但在导入关系数据时遇到了问题。（即我可以更改主题列表名称，但不能更改主题代码）

以下代码段是我所做的。

```
 def self.import(file)
    CSV.foreach(file.path, headers: true) do |row|

      #each row
      subject_list = find_by_id(row["id"]) || new
      subject_list.attributes = row.to_hash.slice(*accessible_attributes)
      subject_list.save!

      subject_codes = row["subject_codes"]
      subject_codes = subject_codes.delete('[]')
      subject_codes = subject_codes.split(', ')

      #each subject code
      subject_codes.each do |code|
        subject_list.subjects.where(subject_code:code)
         .first_or_create!(subject_code:code)
      end

    end
  end 
```

任何关于我如何实现两者之间关系的建议将不胜感激。

# javascript - Dragdealer 初始化

> ID：14995693
> 
> 赞同：0
> 
> 时间：2013-02-21T06:10:10.763
> 
> 标签：javascript, jquery, jquery-plugins

编辑 - 感谢下面一位友好的评论者，我设法解决了这个问题。事实证明这是非常基本的，因为我没有在正确的位置调用我的函数。我将函数调用移至打开我正在使用 DragDealer 的 div 组的 click 事件，现在它可以工作了。

我正在尝试为我正在构建的网站上的滑块设置[Dragdealer](http://code.ovidiu.ch/dragdealer/)插件

在我稍微调整浏览器窗口大小之前，我的滑块按钮是不可移动的。滑块本身在页面加载时位于隐藏的 div 中，因此我已将对 DragDealer 的调用连接到它的父 div 打开时，但它仍未初始化。

```
<div id="assetTable">
    <div id="assetTableHeaders">
        <div class="investmentHeading odd">Investment option</div>
            <div class="investmentHeading even">Allocation</div>
        </div>
        <div class="investmentOption" id="global_property">
            <div class="investmentTitle"><a href="#">Global Property</a></div>
            <div class="investmentSlider">
                <div class="slider short">
                    <div class="slider-bg">
                        <div class="slider-indicator"><div class="active">&nbsp;</div></div>
                <div id="slider_global_property" class="dragdealer">
                                                <div class="handle ir" style="left: 208px;">Drag</div>
                </div>
            </div>
        </div>
    </div>
    <div class="investmentInput">
    <input type="text" id="input_global_property" class="investmentPercent" name="input_global_property" value="0%">
</div>
</div>
</div> 
```

“asseTtable”被隐藏，直到通过 jquery 由 onclick 处理程序展开

```
function setUpSliders() {
var val_global_property = document.getElementById('input_global_property');

var sliderGlobalProperty = new Dragdealer('slider_global_property',
    {
        steps: 100,
        animationCallback: function(x, y)
    {
        val_global_property.value = (Math.round(x * 100) + '%');
    }
});

$('#input_global_property').change(function(){
    sliderGlobalProperty.setStep(stripPercentages());
        return false;
    }); 
```

}

```
$('#investmentOption_selfSelect').click(function(){
    setUpSliders();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-12T22:23:54.760

我在 DragDealer 上遇到了同样的问题，并通过谷歌在这里找到了这个答案。如图所示，我使用 JQuery 从一个 HTML 页面视图转换到另一个 HTML 页面视图，并且在 fadeOut/fadeIn 完成之前调用了我的 setUpSliders()。阅读此答案后，我将代码更改为在 fadeIn 完成后调用 setUpSliders() 。这解决了问题。这个例子可以帮助别人。

```
//switch from Home page to Charts page DOM
var switchToChartsPage = function () {
    $("#HomePage").fadeOut(fadeOutTime, function () {
        $("#chartsPage").fadeIn(fadeInTime, function () { setUpSliders(); }); 
        //Note: delay setting up DragDealer sliders until after DOM settles
    });
    startChartPage();
}

var startChartPage = function () {
    showPanels = true; //initialization switch
      <some code removed>
    carouselPaneCount = buildCharts(); //build the charts and tables html
    //setUpSliders(); // do NOT set up the sliders here - see comment above
    $(".chartspagetitle").text(pageTitleTextLine[currentLocalStorageKey]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T08:42:53.363

感谢一位友好的评论者@Juhana，我设法解决了这个问题。事实证明这是非常基本的，因为我没有在正确的位置调用我的函数。我将函数调用移至打开我正在使用 DragDealer 的 div 组的 click 事件，现在它可以工作了。

# javascript - JavaScript 原型函数在构造对象中不可用

> ID：14995694
> 
> 赞同：1
> 
> 时间：2013-02-21T06:10:15.333
> 
> 标签：javascript, oop, prototypejs

对于下面的代码，我在`GameStatsPanel`函数的第二行收到以下错误：

> “未捕获的类型错误：对象 #Timer 没有方法‘开始’”

我真的很困惑为什么会发生这种情况——我觉得我在某个地方遗漏了一些简单的东西，但我需要开悟。请随时访问 www.letsplayglobalgames.com 并选择“播放！”来查看问题。主页上的选项。如果您需要更多详细信息，请告诉我。

```
function GameStatsPanel() {
    this.timer = new Timer();
    this.timer.start(); /* error is thrown here */
}
function Timer() {
    this.container = document.getElementById('game_time');
    this.current_flag_time_start;
    this.current_flag_time_stop;
    this.time_start = new Date();
    this.time_stop;
    this.time_difference;
    this.current_flag_time_difference;
}
Timer.prototype.start = function() {
    this.current_flag_time_start = new Date();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T06:59:23.560

您在有机会使用您的方法设置`Timer`之前调用构造函数。`Timer.prototype`

该`Timer`函数是可用的，因为函数声明是“提升的”，因此可以立即使用。

扩展名`Timer.prototype`不是“提升”的，所以当你做的时候你`Timer`有一个未修改的.`.prototype``new Timer`

```
gameStatsPanel = new GameStatsPanel(); // Invoking this too soon. Put it and
// ...                            // anything else that uses the constructors at
                                  // the bottom so the prototypes can be set up.
function main() {
   // ...
}

function GameStatsPanel() {
    this.timer = new Timer(); // The `Timer.prototype` extensions haven't run yet
    // ...
    this.timer.start(); // .start doesn't yet exist
}

// ...

function Timer() {
    // ...
}

// ...

 // *Now* the .start() method is getting added.
Timer.prototype.start = function () {
    this.current_flag_time_start = new Date();
}

// ... 
```

# c++ - 编译器可以跳过对逗号运算符左操作数的评估吗？

> ID：14995695
> 
> 赞同：4
> 
> 时间：2013-02-21T06:10:16.317
> 
> 标签：c++, comma

编译器优化有时会跳过对某些没有结果的语句的评估。但是，这也适用于逗号运算符吗？

以下代码在[ideone](http://ideone.com/39pGah)上运行没有任何错误，但我预计它会崩溃。

```
#include <iostream>

int main() {
    int x = (1/0, 2);
    std::cout << x << std::endl;
} 
```

如果我将语句更改为，程序确实会崩溃`int x = 1/0;`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T06:14:35.350

编译器优化使用**[As-if 规则](http://en.cppreference.com/w/cpp/language/as_if)**。

> **好像规则**
> 
> 允许任何和所有不改变程序可观察行为的代码转换

所以是的，编译器可以对此进行优化。检查以下**[修改后的示例](http://ideone.com/l3Tsbx)**：

```
#include <iostream>

int main() 
{
    int y = 1;
    int x = (y=1/0, 2);
    std::cout << x << std::endl;
    //std::cout << y << std::endl;
} 
```

注释最后一行可以正确编译并执行此代码，而取消注释它会为您提供预期的未定义行为。

As @jogojapan correctly points out,
It is important to note that compiler optimizations are not guaranteed by the standard and divide by zero is a Undefined behavior. So this code does have an undefined behavior. Whether the observable behavior is because of compiler optimizing out the divide by zero or due to undefined behavior we can never know. Technically, it is Undefined behavior all the same.

# php - 如何让它随机显示 PHP 数组中的一项？

> ID：14995705
> 
> 赞同：1
> 
> 时间：2013-02-21T06:10:53.117
> 
> 标签：php, arrays, random

我正在尝试这样做，以便在`$hello`输入其中一个单词时随机选择其中一个单词`$bye`并显示它。在我尝试它的那一刻，它只显示 0、1 或 2。我该如何解决这个问题，所以它会随机给我`$bye`数组中的一个单词。

```
<?php
$words = $_POST['words'];
$hello = array('hello', 'hi', 'yo', 'sup');
$bye = array('bye', 'seeya', 'aurevoir');
$words = preg_replace('/\b('.implode('|', $hello).')\b/i', '<span class="highlight">'.array_rand($bye).'</span>', $words);
echo $words;
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T06:15:29.950

```
$index = array_rand($bye);
echo $bye[$index]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T06:15:19.377

```
$hello = array("Hi", "Hola", "Yo dawg! I heard you liked words in your hello!");
$bye = array("Later","Hasta Luego","Guten Tag");
echo $bye[array_rand($hello)]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T06:15:53.603

你可以使用数组`preg_replace`

```
$words="this is any text bye";
$bye = array('/bye/', '/seeya/', '/aurevoir/'); //pattern

$hello=array('hello', 'hi', 'yo');  //$replacements
shuffle($hello);

echo preg_replace($bye, $hello, $words); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T06:25:32.277

我没有清楚地理解你的问题，如果你想从`$bye`数组中选择一个随机项，如果`$word`在`$hello`数组中，试试这个：

```
$hello = array('hello', 'hi', 'yo', 'sup');
$bye = array('bye', 'seeya', 'aurevoir');
if(in_array($word,$hello))
    echo $bye[array_rand($bye)];
else
    echo "word is not in hello array"; 
```

# java - 在 java 中使用 Bouncy Castle 从 CSR 文件中获取公钥

> ID：14995711
> 
> 赞同：3
> 
> 时间：2013-02-21T06:11:21.617
> 
> 标签：java, rsa, bouncycastle, public-key-encryption

我有一个客户端生成的 CSR 文件，我想从中提取公钥。他们提供了 KeyStore Explorer 软件来检查它。

但是我无法使用该工具从中提取公钥。如何使用 BC 使用 Java 程序从 CSR 文件中获取公钥？

CSR 使用 RSA 2048 生成，使用 SHA1 和 RSA。

从工具中，我可以看到公钥的 ASN1 数据，但看不到 ASCII 格式。至少我如何使用 ASN1 数据使用 BC 获取 ASCII 格式的公钥

```
SEQUENCE
{
    SEQUENCE
    {
        OBJECT IDENTIFIER=RSA encryption (1.2.840.113549.1.1.1)
        NULL
    }
    BIT STRING= //BITS HERE
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T07:44:43.930

这取决于“ASCII 格式”的含义。但通常你可以这样做：

```
// Read the CSR
FileReader fileReader = new FileReader("/path/to/your.csr");
PemReader pemReader = new PemReader(fileReader);

PKCS10CertificationRequest csr = 
    new PKCS10CertificationRequest(pemReader.readPemObject().getContent());

pemReader.close();
fileReader.close();

// Write the Public Key as a PEM-File
StringWriter output = new StringWriter();
PemWriter pemWriter = new PemWriter(output);

PemObject pkPemObject = new PemObject("PUBLIC KEY", 
    csr.getSubjectPublicKeyInfo().getEncoded());

pemWriter.writeObject(pkPemObject);
pemWriter.close();

System.out.println(output.getBuffer());

// Extract the Public Key as "RSAKeyParameters" so you can use for
// encryption/signing operations.
RSAKeyParameters pubkey = 
    (RSAKeyParameters)PublicKeyFactory.createKey(csr.getSubjectPublicKeyInfo()); 
```

这就是你会得到的：

```
-----BEGIN PUBLIC KEY-----
MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAxlRixVjOXAmUQ2zORREO
VSQDQejyjWzT3bDznPltiPMwM3SOmPmZyrB8jF3iFvzdFge1QG2WdDj7PzmysXNL
/1xRa0efWv8nURx1eV86hvU6ThNqY3WPyYYXSjTcN74uhGSJo7d5zG6JSL4Cj+l4
RO+nh/5Pa8438ufS+9hXndKPFT2aub9roKysxWpsctpNoOIjfyxkLv9Z9sqxuggG
nwYkwYmoDjPAQp2gRpCp7Hw5F6jSkA33NR5S/aPdyvzKZDbuoRdAl2sTubL1TLG3
nC6tetGsmFRRkNiJjPSNtbXXtN6RB2eJL0epyaFFLksFBaL6nvYIgB1uqFroUY15
2QIDAQAB
-----END PUBLIC KEY----- 
```

我已经用最新版本的 BC-provider 对此进行了测试。您需要“provider”和“PKIX/PKCS...”jar（否则您必须处理已弃用的 API 调用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T09:40:07.890

getSubjectPublicKeyInfo() 不是可用的 PKCS10CertificationRequest 类。

# c# - C#继承类执行标准启动代码

> ID：14995712
> 
> 赞同：0
> 
> 时间：2013-02-21T06:11:29.093
> 
> 标签：c#, app-startup

我们有一套应用程序，我想在应用程序在 Main() 例程中启动时执行一些标准代码。

我希望我可以通过继承来做到这一点，而不必在 Main() 例程的每次出现中都放置相同的代码，但我不确定最好的方法。

任何人都可以建议如何去做吗？

谢谢

马特

# android - 带有可点击按钮的 Android Listview

> ID：14995715
> 
> 赞同：0
> 
> 时间：2013-02-21T06:11:38.907
> 
> 标签：android, listview, custom-adapter

我有一个`ListView`其中有 3 个按钮。所有这些都可以单击。这是一个`ListView`带有单独`CustomAdapter`类的自定义。

我想单击一个按钮，它将把它带到`another activity`第二个按钮将`remove the row`来自列表

我该怎么做？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T09:09:55.573

```
For this we have to customize the layout instead of listview. it is not possible with listview because listview takes items so individual onclick methods developing is not possible.see the following code. it will help you alot.

Activity:

package com.example.customlistexample;

import android.app.Activity;
import android.content.Intent;
import android.graphics.Color;
import android.graphics.Typeface;
import android.os.Bundle;
import android.util.TypedValue;
import android.view.Gravity;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.TableLayout.LayoutParams;
import android.widget.TextView;

public class SearchResults extends Activity {
    /** Called when the activity is first created. */

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        /** create a new layout to display the view */
        final LinearLayout mainLinearLayout = (LinearLayout) findViewById(R.id.mainLinearLayout);

        String listData[] = new String[]{"A","B","C","D","E","F","G"};

            for (int i = 0; i < listData.length; i++) {

                TextView tv1 = new TextView(this);
                tv1.setText(listData[i]);
                tv1.setLayoutParams(new LayoutParams(50,50,Gravity.LEFT));
                tv1.setTextColor(Color.BLACK);
                tv1.setTypeface(null, Typeface.BOLD);
                tv1.setTextSize(TypedValue.COMPLEX_UNIT_PX, 22);

                    ImageView iv1 = new ImageView(this);
                    iv1.setLayoutParams(new LayoutParams(50, 50,Gravity.LEFT));
                    iv1.setImageResource(R.drawable.ic_launcher);

                    ImageView iv2 = new ImageView(this);
                    iv2.setImageResource(R.drawable.ic_launcher);
                    iv2.setLayoutParams(new LayoutParams(50,50,Gravity.LEFT));

                    final LinearLayout ll3 = new LinearLayout(this);
                    ll3.setOrientation(LinearLayout.HORIZONTAL);
                    ll3.setLayoutParams(new LayoutParams(
                            LayoutParams.WRAP_CONTENT,
                            LayoutParams.WRAP_CONTENT,Gravity.CENTER_HORIZONTAL));
                    ll3.addView(tv1);
                    ll3.addView(iv1);
                    ll3.addView(iv2);
                    ll3.setPadding(0, 20, 0, 25);

                    mainLinearLayout.addView(ll3);

                    final LinearLayout ll5 = new LinearLayout(this);
                    ll5.setLayoutParams(new LayoutParams(1, 1));
                    ll5.setBackgroundColor(Color.parseColor("#CCCCCC"));
                    mainLinearLayout.addView(ll5);
                    mainLinearLayout.setPadding(10, 10, 10, 30);

                    iv1.setOnClickListener(new OnClickListener() {

                        @Override
                        public void onClick(View v) {
                            // TODO Auto-generated method stub
                            startActivity(new Intent(SearchResults.this,SecondActivity.class));

                        }
                    });
                    iv2.setOnClickListener(new OnClickListener() {

                        @Override
                        public void onClick(View v) {
                            // TODO Auto-generated method stub
                            mainLinearLayout.removeView(ll3);
                            mainLinearLayout.removeView(ll5);
                        }
                    });
                }
            }

}

Layout:

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".SearchResults" >

 <ScrollView
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
         android:orientation="vertical">

        <LinearLayout
            android:id="@+id/mainLinearLayout"
            android:layout_width="fill_parent"
            android:layout_height="match_parent"
            android:layout_gravity="left"
            android:orientation="vertical">

            <TextView
                android:id="@+id/tv_results"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Results"
                android:layout_marginTop="10dp"
                android:layout_marginBottom="10dp"
                android:layout_marginLeft="10dp"
                android:textAppearance="?android:attr/textAppearanceLarge"
                android:textColor="#800000"
                android:textSize="22px"
                android:textStyle="bold" >
            </TextView>
        </LinearLayout>
    </ScrollView>

</RelativeLayout>

try this definately helps you. Let me know your doubt is clarified or not. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T07:01:18.477

谢谢大家的回答，我的思路是这样的：

为了让一行中的一个按钮带我去另一个活动-

我在主 Activity 中创建了一个私有适配器类，当我单击该按钮时，它的 onClickListener 会调用 Activity 中的另一个公共函数，从而触发另一个 Activity 的意图。

但是我仍然不确定如何在单击其中的按钮时删除一行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T06:23:26.570

通过使用此方法，您可以获得 Listview 项目位置。然后您需要设置的任何内容。

`public void onListItemClick(ListView parent, View v, int position,long id) { selection.setText(items[position]); }`

我希望这对你有帮助:)

# xml - 为什么这是一个使用 Xmllint 的 XPath 无效查询表达式，但对 Saxon 有效？

> ID：14995717
> 
> 赞同：0
> 
> 时间：2013-02-21T06:11:47.023
> 
> 标签：xml, xpath, saxon, xmllint

我正在尝试在 Linux 中使用命令行工具学习 XPath 查询（我正在学习斯坦福的 Class2Go 课程数据库简介）。给定一个名为 [BookstoreQ.xml](http://pastebin.com/jgeAYzpk)的 XML 文件，该文件包含 Books 和 Magazines，我可以在命令行运行以下查询：

```
$ java -cp Saxon-HE-9.4.0.6.jar net.sf.saxon.Query -s:"BookstoreQ.xml" \
       -qs:'<results>{/Bookstore/(Book|Magazine)/Title}</results>' 
```

它将返回以下结果：

```
<?xml version="1.0" encoding="UTF-8"?>
<results>
  <Title>A First Course in Database Systems</Title>
  <Title>Database Systems: The Complete Book</Title>
  <Title>Hector and Jeff's Database Hints</Title>
  <Title>Jennifer's Economical Database Hints</Title>
  <Title>National Geographic</Title>
  <Title>National Geographic</Title>
  <Title>Newsweek</Title>
  <Title>Hector and Jeff's Database Hints</Title>
</results> 
```

如果我在命令行中使用 xmllint，我会得到相同的结果，如下所示：

```
$ xmllint --xpath '/Bookstore/Book/Title | /Bookstore/Magazine/Title' 
```

但是，如果我尝试使用与 Saxon 示例中相同的 XPath 查询，则会收到如下错误：

```
$ xmllint --xpath '/Bookstore/(Book|Magazine)/Title' BookstoreQ.xml
XPath error: Invalid Expression
/Bookstore/(Book|Magazine)/Title
           ^
xmlXPathEval: evaluation failed
XPath evaluation failure 
```

为什么？

# 更新：

感谢 Francis 和 Michael 帮助我理解这个问题。在 linux 的命令行中使用 XPath 的一种解决方法是使用类似于以下脚本的内容。

```
#!/bin/bash
# This script to run xpath queries
java -cp Saxon-HE-9.4.0.6.jar net.sf.saxon.Query -qs:"<results>{$1}</results>" \ 
\!indent=yes
echo 
```

它假定您已将[saxon](http://mvnrepository.com/artifact/net.sf.saxon/Saxon-HE/9.4.0.6)放置在 Java 类路径中的某个位置。因此，下面的查询将输出上述结果（正确缩进）：

```
$ xpath.sh "doc('BookstoreQ.xml')/Bookstore/(Book|Magazine)/Title" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T06:16:06.173

xmllib2（由 xmllint 使用）只知道 XPath 1.0，它不能在路径步骤（`(Book|Magazine)`部分）中使用联合运算符。

在 XPath 1.0 中，您必须编写`(/Bookstore/Book/Title | /Bookstore/Magazine/Title)` 或`/Bookstore/*[name()='Book' or name()='Magazine']/Title`

这种限制的根本原因是 XPath 1.0 没有序列的概念，只有节点集。为 XPath 2 和 XQuery 创建了序列数据类型。`/Bookstore/(Book|Magazine)/Title`沿每个路径步骤传递一个序列：与文档节点的序列，然后是 Bookstore 子元素，然后是按文档顺序排序的 Book 和 Magazine 子元素序列的并集，然后是它们的 Title 元素子元素。XPath 1.0 的联合运算符只能将两个节点集统一为另一个节点集，因此它必须在“最外层”表达式上下文中，而不是在路径分隔符之前或之后。

# c - 任何语义正确和句法正确的 C 程序都是算法吗？

> ID：14995721
> 
> 赞同：3
> 
> 时间：2013-02-21T06:12:06.320
> 
> 标签：c, algorithm, data-structures

“算法被定义为有限的操作序列，执行时将完成特定任务”与此定义。我们可以说任何语法和语义正确的 C 程序也是一种算法吗？

我的答案是对的，但是我的教授说答案是错的，我的搭档也是。他们使用的反例是

```
while(1) {

} 
```

和

```
printf("%s","blahblah"); 
```

无限循环在语义上不正确，而 printf() 完成了一项任务，因此它是一种算法。因为您可以使用循环和 putchar() 而不是 printf();

那么大家觉得谁是对的呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T06:30:51.387

你告诉你的教授，如果他甚至不知道正确的术语，他最好停止分裂头发（所以从这一点来看，他的问题没有意义，但无论如何......）。

“算法”在概念上与程序不同。所以答案

> 任何语义正确和句法正确的 C 程序都是算法吗？

不是**，**因为程序与算法不同——程序是……程序。*算法*是与*语言无关*的问题解决方案的一种具体表现形式（即，它可以用非常通用的方式表达）。程序是算法的依赖于语言的**具体实现**（在 C 中，由于“as-if”规则和编译器优化，实际上不需要与算法相同，只需要模拟它）。

还有一条评论：

> 无限循环在语义上不正确

嗯，是的。当然，不能简单地解决停机问题，但这并不意味着无限循环“在语义上是不正确的”。当一个程序做的事情超出你的预期时，它在语义上是不正确的。除非您希望您的程序在编写时执行除挂起之外`while (1) { }`的其他操作，否则没有问题。

无限循环的概念是否被认为是一种算法是另一个问题。通常，永不终止的指令序列**不**被视为算法，这可能就是您的教授所说的。根据[维基百科](https://en.wikipedia.org/wiki/Algorithm)：

> 更准确地说，算法是一种有效的方法，表示为用于计算函数的定义明确的指令的**有限列表**。

（强调我的）

# python - 如何在管理员中动态地向表单添加额外的属性

> ID：14995730
> 
> 赞同：0
> 
> 时间：2013-02-21T06:13:18.083
> 
> 标签：python, django

我正在为我的自定义应用程序使用 django 管理站点，没有自定义前端视图。

我正在做所有事情`admin.py`

在我的一个模型中，我想在其中添加额外的文本字段，该字段`change_form`不会被持久化，而是用于对某些外部站点执行一些 ajax 请求

但我不知道如何添加那个额外的字段

我不想创建新表单，因为这是由管理站点自动完成的

有什么办法可以像这样在代码中添加字段

```
def get_form(self, request, obj=None, **kwargs):
   search = forms.CharField(label='search')  
   add search to existing code // here 
   return super(PersonAdmin, self).get_form(request, obj, **kwargs) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T06:35:56.243

有 2 个选项。

1.  [扩展/自定义此链接](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.get_changelist_form)中提到的默认更改列表表单
2.  自定义[更改列表模板](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.change_list_template)并在 jQuery ready() 事件中注入（动态添加）额外字段。

# java - @Autowired 给了我 NPE

> ID：14995731
> 
> 赞同：0
> 
> 时间：2013-02-21T06:13:18.943
> 
> 标签：java, spring

源代码是

```
public class MailSenzer {
@Autowired
private JavaMailSender mailSender;

public void setMailSender(JavaMailSender mailSender) { this.mailSender = mailSender; }

public static void send(MailForm mail) {
    new MailSenzer().senz(mail);
}

private void senz(MailForm mail) {
    MimeMessage msger = mailSender.createMimeMessage();

    try {
        MimeMessageHelper msg = new MimeMessageHelper(msger, mail.getEncoding());
        msg.setSubject(mail.getSubject());
        msg.setText(mail.getContent(), true);
        msg.setFrom(new InternetAddress(mail.getFrom()));
        msg.setTo(new InternetAddress(mail.getTo(), mail.getTo_name(), mail.getEncoding()));

        if(mail.getAttachment() != null) {
            msg.addAttachment(MimeUtility.encodeText(mail.getAttachment_name(), "euc-kr", "B"), mail.getAttachment());
        }
    } catch(Exception ex) { System.out.println(ex); }

    try {
        mailSender.send(msger);
    } catch(Exception ex) { System.out.println(ex); }
} 
```

}

这是我写的代码。我在控制器中完全测试了相同的代码并且它有效，但是，当我尝试作为静态方法运行时，它给了我错误。

```
java.lang.NullPointerException
at kr.co.ubplay.utility.mail.MailSenzer.senz(MailSenzer.java:25)
at kr.co.ubplay.utility.mail.MailSenzer.send(MailSenzer.java:21)
at kr.co.ubplay.service.b2biz.controller.CoopEmailController.coop_send(CoopEmailController.java:116)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:213)
at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)
at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
at org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1822)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662) 
```

具有 npe 的行是

```
MimeMessage msger = mailSender.createMimeMessage(); 
```

我有一个名为 com.ubis 的通用包用于扫描，所有包都在该域下。

jsp 2.0 中的自定义标记库会发生这种情况。我试图访问一个工作的 dao，但这也给了一个带有自动装配 sqlSession 的 npe。无法弄清楚这些问题有什么问题:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T06:57:37.653

使其`MailSenzer`成为 Spring bean，并将`JavaMailSender`自动连接。`Spring`不会将 bean 自动连接到使用`new`（@Affe 提到的）创建的对象中。如果您开始使用它的 IoC 容器，请尝试构建更多“类似 Spring”的系统 :)

```
@Service
public class MailSender {

@Autowired
private JavaMailSender mailSender;

// other stuff 

}

public class SomeBusinessLogicClass {

@Autowired
private MailSender mailSender;

// other stuff

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T08:56:08.350

当您使用 new 创建 bean 时，您必须处理它，并且不能自动装配。

如果想使用 Autowired，则使用任何注释使其成为 spring bean。

# xml - 如何使用检查 xml 节点名称

> ID：14995732
> 
> 赞同：12
> 
> 时间：2013-02-21T06:13:20.750
> 
> 标签：xml, xslt

我有一个这样的 xml 文件。

```
<RootTag>
    <Form>
        <Section>
             <Annex>
                <Group>
                        <Label value = "Name"></Label>
                        <Text Value = "Enter Name"></Text>
                </Group>
                <Group>
                        <Label value = "Gender"></Label>
                       <Radio Value = "Male||Female"></Text>
                </Group>
            </Annex>
        </Section>
    </Form>
</RootTag> 
```

现在在我的 xsl 中，我必须检查标签是否为`<Text>`or并根据该结果`<Radio>`生成标签。`<input>`

有什么我可以使用的`<xsl:if>`吗？像`<xsl:if test = 'node = <Text>'>`

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-21T06:17:50.043

```
<xsl:if test="name() = 'Form'"> 
```

但是，还有其他可能更好的方法：

一种是对这个项目使用模板；XSLT 引擎将自动执行测试，如果您想这样看的话。

```
<xsl:template match="Form"> 
```

另一种是使用`self::`轴

```
<xsl:for-each select="self::Form"> 
```

# python - FileBrowser，它使用 python QtGUI 显示来自不同目录的文件

> ID：14995737
> 
> 赞同：0
> 
> 时间：2013-02-21T06:13:55.957
> 
> 标签：python, python-2.7, file-browser, qtgui

我有一些位于不同目录中的 pdf 文件的完整路径，我想在一个窗口中显示这些文件，用户可以在其中单击并通过文档查看器打开它们。

由于我是 python 和 QtGUI 的新手，我无法弄清楚如何做到这一点。[这是](https://stackoverflow.com/questions/9251644/simple-file-browser-file-chooser-in-python-programe-with-qt-gui)我见过的东西，但无法弄清楚它是如何发生的。当我运行它时，显示文件夹层次结构，但我只想显示我有完整路径的文件。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T07:56:24.200

这段代码对我有用

```
import subprocess
import os
import sys
files = ['/home/test/kelvin/refresh.html','/home/test/kelvin/thread.html']
print list(enumerate(files))
no=raw_input("enter the file no\n")
no1 = int(no)
if sys.platform == 'linux2':
    subprocess.call(["xdg-open", files[no1]])
else
    os.startfile(files[no1]) 
```

# java - Java RegularExpressions 上的“StackOverflowError”是否总是意味着需要优化正则表达式？

> ID：14995741
> 
> 赞同：1
> 
> 时间：2013-02-21T06:14:28.250
> 
> 标签：java, regex, stack-overflow

要读取 CSV 文件，我在 Java 中有以下正则表达式：

```
Pattern csvline = Pattern.compile("((([^\\\"]|\\\"\\\")+|\\\"([^\\\"]|\\\"\\\")+\\\"))*", Pattern.DOTALL); 
```

这个表达式通过[了这个在线 Regex 测试](http://regexpal.com/)。但是，在运行它时它总是抛出一个`StackOverflowError`.

经过一番研究，我发现解决方案是将表达式替换为

```
Pattern csvline = Pattern.compile("((([^\\\"]|\\\"\\\")++|\\\"([^\\\"]|\\\"\\\")++\\\"))*", Pattern.DOTALL); 
```

在这里，我使用所有格量词而不是贪婪的量词。在这种情况下，它也算是一种优化。

我的问题是，是因为 Java 不能处理很多回溯（它会消耗堆栈空间，我相信一个好的引擎不应该这样），所以任何时候当你看到`StackOverflowError`由正则表达式引起的，你应该考虑优化减少回溯的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T06:47:50.747

是的，Java 正则表达式引擎坏了。它使用回溯，因此它可以支持反向引用，因此具有所有类似 perl 的正则表达式引擎所共有的病态指数空间/时间问题。你是对的，它可能会分析表达式以确定它实际上是正则的，并使用你期望的多项式空间/时间算法。

在这种情况下，我总是建议使用级联正则表达式，最好是通过[JFlex](http://jflex.de/)，尽管如果您坚持 2 或 3 个级别，手动执行它们并不会太痛苦。不仅如此，如果您使用词法分析器，它将更易于维护并且更容易编写和调试。

这个想法是您通过重复应用简单的正则表达式来解析行。在您的情况下，第一个标识下一个字段的开始；第二个标识字段的结尾（捕获内容）；第三个检查“下一个字段”；重复。

这些几乎与您使用 JFlex 识别的 3 个标记相同，唯一的区别是字段分隔符标记非常简单，您可能会在手动执行时将其包含在“字段结束”正则表达式中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T06:35:53.200

Java throwing`StackOverflowError`表明匹配是通过递归调用在内部完成的。这很糟糕，但也有其自身的好处，因为它表明您的正则表达式存在潜在问题。

`+`回溯地狱是由您在另一个有限多次匹配中进行有限多次匹配的事实引起的`*`：（`((A+|B))*`这是您的正则表达式的*形式*）。

通常，如果您可以编写一个不需要回溯且不需要堆栈的非正则表达式解决方案（例如括号匹配问题），那么您可以编写一个带有所有格量词的正则表达式（`+`在正常量词之后添加额外的）执行相同的任务，因为所有格量词不（允许）回溯，这与您在非正则表达式解决方案中所做的类似。

# c++ - 我遇到了可怕的 LNK2019 错误，不知道要从这里开始。

> ID：14995742
> 
> 赞同：1
> 
> 时间：2013-02-21T06:14:30.330
> 
> 标签：c++, visual-c++, unresolved-external, lnk2019

我已经环顾了一个多小时，但找不到任何对我的处境有益的东西。我是 C++ 的初学者，这是我第一次尝试将代码拆分为两个 .cpp 文件和一个 .h 文件。我还没有遇到任何成功。这是我的代码：

```
#include "stdafx.h"
#include <iostream>
#include "Cat.h"
using namespace std;
int main()
{
   Cat Frisky; // declare variable of type Cat, creates an object
   Frisky.SetAge( 5 ); // put value INTO object
   Frisky.Meow( ); // make object do something
   std::cout << "Frisky is a cat who is " ;
   std::cout << Frisky.GetAge() << " years old.\n " ;
   Frisky.Meow( ); // make object do something
   return 0;
}

// This is my cat.h
class Cat {

public:
   int GetAge();                        // accessor
   void SetAge( int age ); // accessor
   void Meow();         // general function

private:
   int itsAge;     // member variable

};

#include "Cat.h"
int Cat::GetAge( )
{
   return itsAge;

} // end function GetAge

// set function, PUT VALUE IN to the object
void Cat::SetAge( int age )
{
   itsAge = age ;

} // end function SetAge

// What do Cats do?

// What action should a Cat object perform?
void Cat::Meow( )
{
   std::cout << "Meow.\n";

} // end function Meow 
```

这是我一个多小时以来一直遇到的错误消息。

```
1>------ Build started: Project: TestCat, Configuration: Debug Win32 ------
1>  TestCat.cpp
1>TestCat.obj : error LNK2019: unresolved external symbol "public: int __thiscall Cat::GetAge(void)" (?GetAge@Cat@@QAEHXZ) referenced in function _main
1>TestCat.obj : error LNK2019: unresolved external symbol "public: void __thiscall Cat::Meow(void)" (?Meow@Cat@@QAEXXZ) referenced in function _main
1>TestCat.obj : error LNK2019: unresolved external symbol "public: void __thiscall Cat::SetAge(int)" (?SetAge@Cat@@QAEXH@Z) referenced in function _main
1>C:\Documents and Settings\Geena\Desktop\TestCat\Debug\TestCat.exe : fatal error LNK1120: 3 unresolved externals
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

我将 Cat.cpp 文件和 Cat.h 文件放入以下目录：C:\Documents and Settings\Geena\Desktop\TestCat\TestCat

只是在寻找让这个该死的程序启动并运行的答案。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:51:12.537

我强烈建议您在下一个问题之前休[读本](http://www.cplusplus.com/doc/tutorial/)教程

## 猫.h

```
class Cat {
public:
    int GetAge();                      
    void SetAge( int age ); 
    void Meow(); 
private:
    int itsAge;  
}; 
```

## 猫.cpp

```
#include "cat.h"
#include <iostream>

using namespace std;

int Cat::GetAge(){return itsAge;}
void Cat::SetAge(int age){itsAge = age ;}
void Cat::Meow(){cout << "Meow.\n";} 
```

## 主文件

```
#include "cat.h"
#include <iostream>

using namespace std;

int main()
{
   Cat Frisky; 
   Frisky.SetAge(5);
   Frisky.Meow(); 
   cout << "Frisky is a cat who is " ;
   cout << Frisky.GetAge() << " years old.\n " ;
   Frisky.Meow( );
   system("pause");
   return 0;
} 
```

# python - 如何反序列化python中json对象中的日期时间？

> ID：14995743
> 
> 赞同：6
> 
> 时间：2013-02-21T06:14:33.943
> 
> 标签：python, json, datetime

我原来的字典是

```
A = {                                                                                                  
    'date': datetime.date(2013, 1, 1),
    'price': 100
} 
```

由于`datetime.date`不可序列化，我添加了一个默认函数来处理它：

```
B = json.dumps(A, default=lambda obj:obj.isoformat() if hasattr(obj, 'isoformat') else obj) 
```

`'date'`我的问题是，当我用来将字段`json.loads`转换回原始字典时，如何反序列化该字段？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-21T06:37:07.433

```
from datetime import datetime

def load_with_datetime(pairs, format='%Y-%m-%d'):
    """Load with dates"""
    d = {}
    for k, v in pairs:
        if isinstance(v, basestring):
            try:
                d[k] = datetime.strptime(v, format).date()
            except ValueError:
                d[k] = v
        else:
            d[k] = v             
    return d

dump = json.dumps(A, default = f)
json.loads(dump, object_pairs_hook=load_with_datetime)

# {u'date': datetime.date(2013, 1, 1), u'price': 100} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T06:30:08.057

继续您的示例代码，

```
C = json.loads(B)
C['date'] = datetime.datetime.strptime(C['date'], '%Y-%m-%d')
print C
# {u'date': datetime.datetime(2013, 1, 1, 0, 0), u'price': 100} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T06:28:09.610

使用泡菜模块

```
 import pickle
    fileop = open("timeformat.txt","wb")
    pickle.dump(A,fileop)
    fileop.close()
    print pickle.load(open("timeformat.txt","rb"))
    print A['Date']

    >>>{'date': datetime.date(2013, 1, 1), 'price': 100}
    >>>2013-01-01 
```

# php - 像 stackoverflow 这样的网站是如何工作的？

> ID：14995745
> 
> 赞同：0
> 
> 时间：2013-02-21T06:14:37.067
> 
> 标签：php, mysql, seo, stack-overflow, dynamic-pages

例如，当我创建这样的帖子/问题时。stackoverflow 是如何使用它的？我的意思是，它是为问题创建一个新页面，还是将它变成碎片并将这些碎片放在一个动态页面上？

我读过创建一个新页面会很糟糕，因为它会给服务器带来沉重的压力。但它对 SEO 有好处吗？（不确定）另一方面，生成动态页面在服务器上的负担要轻得多，但我不确定何时涉及 SEO。

那么像 stackoverflow 这样的网站是如何处理内容的呢？生成新页面还是仅生成一个动态页面？或者他们可能会做一些我没有读过或听说过的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T06:28:05.303

它都是动态生成的，并且 URL 只是使关键字变得丰富，因为它对搜索引擎友好。

它通过重写 URL 在大多数 Web 服务器中完成，以便搜索引擎可以在 URL 中找到重要的关键字

在 Apache HTTP 服务器中，`.htaccess`文件中的规则将重写请求 URL 以转换为处理脚本可以使用的实际参数

例如这样的 URL

```
http://www.example.com/forum-name-3/topic-name-28/22/ 
```

将被转换为

```
http://www.example.com/index.php?forum=3&topic=28&page=22 
```

通过使用这个简单的规则`.htaccess`

```
RewriteRule ([0-9A-Za-z-\+._]+)-([0-9]+)/([0-9A-Za-z-\+._]+)-([0-9]+)/([0-9]+)/$ ./index.php?forum=$2&topic=$4&page=$5 
```

如果您使用的是 Apache HTTP 服务器，那么您可以[在这里找到所有花哨的东西](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)

您需要根据自己的需要制定规则，上面的示例只是为了解释它的工作原理，因此可能需要一些调整才能使其工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T06:19:58.693

我不熟悉 stackoverflow.com 架构，但通常它遵循这两个原则

1) 为新帖子/问题生成一个永久链接 url 2) 这个永久链接 url 在内部处理并转换为动态 url

例如`https://stackoverflow.com/questions/14995745/how-do-websites-like-stackoverflow-work` 可能很容易在内部转换为 [https://stackoverflow.com/questions/?id=14995745](https://stackoverflow.com/questions/?id=14995745)

永久链接网址是您进行 SEO 所需的全部

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T06:35:25.180

我将介绍我在我们的项目中设计的 CMS。

当用户提交文章/新闻时，我们在服务器端创建包含文章详细信息的 XML。例如

```
modules/cms/YYYY/MM/DD/<<title>>-<<unqid>>.xml 
```

XML str 与此类似-

```
<blog>
  <title>..</title>
  <author>..</author> 
  <comment>...</comment>
</blog> 
```

当我保存 XML 时，我还将关于内容的元数据存储在 DB 中（articleId、title、author、status、comments、voteupCnt、viewcount 等）我还使用一些技术从内容中提取关键字并存储它们在 DB 中。在 DB 中存储元数据有助于我更快地进行搜索。

我已经编写了控制器来阅读基于 url 的文章

```
www.xyz.com/article/YYYY/MM/DD/title-unqid 
```

此控制器将读取 XML 模块/cms/YYYY/MM/DD/-.xml 并将其显示为 HTML。它还将在 HTML 的元标记中包含关键字以使其对 SEO 友好。

# java - 奇怪的循环数学

> ID：14995751
> 
> 赞同：1
> 
> 时间：2013-02-21T06:14:59.313
> 
> 标签：java, for-loop, do-while

```
int i = 3, j = 3;
for (; i++ == j--; i += 2, j -= 2) {
    do {
        i = i + j;
    } while (i % j != 0);
}
System.out.println(i);
System.out.println(j); 
```

我尝试在 Eclipse 中调试它，结果如下：

*   我,j
*   3,3
*   4,2
*   6,2
*   9,-1

由于上次for循环检查了i和j的值，它们不相等，为什么会跳出循环呢？不会是无限循环吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T06:20:51.483

它们彼此不相等，因此循环终止。如果它们相等，循环将不会终止，这是您的条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T06:23:35.683

```
for (; ++i != --j; i += 2, j -= 2) {} 
```

条件`++i != --j`or `i++ != --j`or`++i != j--`会导致死循环。

i++ 和 j-- 分别是后递增和递减，所以首先它会检查条件，然后递增值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T06:23:59.400

不，它不会进入无限循环
1\. i 和 j 被初始化 (i=3, j=3)
2\. 检查条件。在检查条件后，值会发生变化 (i=3, j=2) --> *Post increment and post decrement*
3\. 在 do while 循环内.. i=4 和 j 保持不变 (j=2)
4\. 的条件做while循环中断。as (6%2 != 0 ==> 返回 false)
5\. 现在执行 for 循环的第三部分，使 i=6 和 j=0
6\. 现在执行条件部分。返回 false 然后将 i 和 j 的值更改为 (i=9 and j=-1)

然后他们将值打印为 i=9 和 j=-1

如果它本来是*预递增和预递减*，那么它们将进入无限循环

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T06:24:48.803

您可以将代码更改为 while() 循环，如下所示：（我分别将 i, j 替换为 m, n）

```
int m = 3, n = 3;
while( m++ == n-- ){    //Initially m and n are 3
    //m becomes 4 due to ++
    //n becomes 2 due to --

    m = m + n;  //m becomes 6 
    while( m % n != 0){ // 6 % 2 is 0
        m = m + n;  // Not called
    }

    m = m + 2; // m becomes 8
    n = n - 2; // n becomes 0

   //Goes back to the while(m++ == n--) to check condition again. 
   //However ( 8++ == 0--) is false, so while loop is not called again.
   //but, the values of m and n change to 9 and -1 respectively. 
} 
```

混合各种类型的循环可能会使调试变得有点复杂。

# android - InAppBilling V3 什么是 SKU(Item ID) 让应用程序上线？

> ID：14995754
> 
> 赞同：7
> 
> 时间：2013-02-21T06:15:19.910
> 
> 标签：android, in-app-purchase, in-app-billing

我已经创建了 inallbilling 示例代码。出于测试目的，我已通过 SKU="android.test.purchases" 但现在我想在 google play store 上发布我的应用程序，那么我应该通过什么来代替“android.test.purchase”。我的用户将从应用程序购买的应用程序包名称或项目 ID。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T06:22:19.853

为此，您必须首先使用产品 ID (SKU) 在 Google 市场上创建产品。要创建产品，您必须在谷歌市场上创建 Marchents 帐户。之后，您可以将该产品 ID 添加到您的代码中。在市场上上传您的 apk，然后在创建 marchents 帐户后，您可以在新上传的应用程序下看到 Inapp 产品选项。单击它并创建产品。如果您遇到任何问题，请告诉我。

**编辑：**

检查此链接以在谷歌市场上发布您的应用程序

[链接1](http://www.xoriant.com/blog/android/how-to-publish-android-apps-in-to-an-android-market.html)

这个链接是创建 Inapp 产品的指南

[链接2](http://support.google.com/googleplay/android-developer/answer/1072599?hl=en)

# sharepoint - 在 aspx 任务表单中显示以前的评论

> ID：14995755
> 
> 赞同：0
> 
> 时间：2013-02-21T06:15:22.490
> 
> 标签：sharepoint, sharepoint-workflow

我正在使用 aspx 任务表单处理自定义 SharePoint 2010 状态机工作流。它是一个 3 级工作流。我的场景是 Ex：如果批准者发表评论并提交到工作流，则向发布者创建一个任务。然后发布者打开我想要显示上一步评论的项目。请让我知道如何实现这一目标。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T02:05:07.763

添加了新字段，当用户与任务交互时，我在其中存储了评论。

# android - android中原始和资产文件夹中的存储限制

> ID：14995756
> 
> 赞同：10
> 
> 时间：2013-02-21T06:15:23.040
> 
> 标签：android, android-resources

我想在我的应用程序的原始文件夹中存储一些视频/音频文件。

我不知道原始和资产文件夹的存储限制。

谁能告诉我我可以在原始和资产文件夹中存储多少数据。

还有，如果我将批量数据存储在这些文件夹中，它会影响执行速度或从市场下载的应用程序的大小吗？

提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-07-09T01:40:14.507

Android2.3发布新的aapt后，现在对任何资源都没有限制。限制是旧的aapt由于系统性能原因造成的，现在不应该发生。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-21T06:25:06.677

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T07:19:04.860

当您直接从资产文件夹或原始文件夹加载大文件时，前面有很多问题。有时可能会导致 android 中的 vm 预算错误。

为了解决您的问题 将您的资源放在服务器中。在第一次安装您的应用程序时加载它们并将它们存储在 sd 卡中。然后从您的 sd 卡将它们访问到您的应用程序中......

# django - django 表单向导 as_view() 示例因 AttributeError 而失败

> ID：14995757
> 
> 赞同：0
> 
> 时间：2013-02-21T06:15:24.630
> 
> 标签：django, django-forms

我是 django 的新手，正在尝试使用表单向导。我正在关注[官方文档](https://docs.djangoproject.com/en/1.4/ref/contrib/formtools/form-wizard/)，并从中尝试以下示例：

```
from django import forms
from django.contrib.formtools.wizard.views import SessionWizardView

class ContactForm1(forms.Form):
    subject = forms.CharField(max_length=100)
    sender = forms.EmailField()

class ContactForm2(forms.Form):
    message = forms.CharField(widget=forms.Textarea)

class ContactWizard(SessionWizardView):
    pass # I tried with a done() method as well, just to be sure.

initial = {
    '0': {'subject': 'Hello', 'sender': 'user@example.com'},
    '1': {'message': 'Hi there!'}
}
wiz = ContactWizard.as_view([ContactForm1, ContactForm2], initial_dict=initial)
form1 = wiz.get_form('0')
form2 = wiz.get_form('1') 
```

但是上面在该行引发了以下错误`form1 = wiz.get_form('0')`：

```
Traceback (most recent call last):
  File "fw.py", line 19, in <module>
    form1 = wiz.get_form('0')
AttributeError: 'function' object has no attribute 'get_form' 
```

这是文档中的错误，django 本身，还是（很可能）我的代码有问题？我在 Linux (Ubuntu) 上使用 django 1.4.1。

谷歌搜索只显示两个相关链接：[一个来自 django IRC](http://django-irc-logs.com/2012/may/29/)，一个来自[Django Brasil](https://groups.google.com/forum/?fromgroups=#!topic/django-brasil/W9QtG1qBOP4)，但没有一个链接有任何解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T00:21:58.037

[我在这张票](https://code.djangoproject.com/ticket/19880)中向 Django 团队报告了这个文档错误，现在它已在[master](https://docs.djangoproject.com/en/dev/ref/contrib/formtools/form-wizard/#providing-initial-data-for-the-forms)中修复。

它应该是：

```
wiz = ContactWizard.as_view([ContactForm1, ContactForm2], initial_dict=initial)(request) 
```

# python - 路径中的转义序列

> ID：14995761
> 
> 赞同：1
> 
> 时间：2013-02-21T06:15:45.087
> 
> 标签：python

```
source = "C:\Program Files (x86)\xxx\yyy\Agent\node.default\blr-w2k8-252\data\somefile.iso"
print source 
```

输出：

```
"C:\Program Files (x86)\xxx\yyy\Agent
 ode.defaulblr-w2k8-252\data\somefile.iso" 
```

请注意，对于`\n`ode 我有一个新行并且 deaful `t\`blr 消失了

我做了，`source=source.replace('\\', '/')` 但得到了相同的输出，甚至`/n`也导致了新行。

我`source=source.encode('string-escape')`现在做了输出是别的东西

输出：

```
"C:\\Program Files (x86)\\xxx\\yyy\\Agent\node.default\x08lr-w2k8-252\\data\\somefile.iso" 
```

只有一个原始字符串在工作，即

```
source=r"C:\Program Files (x86)\xxx\yyy\Agent\node.default\blr-w2k8-252\data\somefile.iso" 
```

但是在我的程序中，我只有字符串变量。如何使其工作或如何将字符串变量设为 raw ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T07:43:59.360

阅读[转义序列](http://learnpythonthehardway.org/book/ex10.html)。在字符串之前使用 'r' 告诉 Python 忽略转义序列并按字面意思获取字符串。当您将源代码硬编码为一个值时，它与通过调用函数分配源值时不同。如果它不起作用，请检查您正在调用的函数如何创建该路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T06:21:28.743

在字符串文字之前指定“r”不会更改字符串的数据类型；它只会影响字符串文字的解释方式。因此，您的问题可能是信息收集到字符串中的方式，而不是收集后字符串的存储方式。另请注意，当您在 Python 中打印字符串时，输出会自动包含转义字符（例如“输出：”示例中的双斜杠）。该字符串仅包含一个斜杠，即使两者都显示了。

# c# - ASP.NET Web API - 使用基类

> ID：14995768
> 
> 赞同：3
> 
> 时间：2013-02-21T06:16:22.637
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4, asp.net-web-api

在 ASP.NET MVC 中，可以创建一个继承自 Controller 的 ControllerBase 类。然后你可以让你的所有控制器都从 ControllerBase 继承，如果你想让你的所有控制器都接收一个特定的属性，你所要做的就是将它添加到 ControllerBase 并设置好。

我正在尝试对 Web API 和 ApiController 做同样的事情。我创建了一个基础 ApiControllerBase 类，该类装饰有一个属性，然后我从我所有的 ApiControllers 上的 ApiControllerBase 继承。这似乎不起作用。

我确实有标准的 MVC 控制器，它们展示了它们从我的 BaseController 接收到的属性的行为。而且我可以用我的属性专门装饰一个 ApiController 类并且它可以工作，但是当我尝试使用 ApiControllerBase 类时我无法让它工作。

任何想法我可能做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T07:05:47.443

我可以确认以下工作。如果没有一些发布的代码，我不确定您的问题到底是什么。

```
public class BaseApiController : ApiController
{
    public readonly KiaEntities Db = KiaEntities.Get();
}

public class ColorsController : BaseApiController
{
    // GET api/colors
    [Queryable]
    public IEnumerable<ColorViewModel> Get()
    {
        var colors = Db.Colors;
        return Mapper.Map<IEnumerable<ColorViewModel>>(colors);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T07:17:12.950

请注意，Api 控制器不能使用 MVC 属性，反之亦然。

`System.Web.Http`对于 Api 控制器，您必须使用命名空间中的属性，而`System.Web.Mvc`对于常规控制器，您必须使用命名空间中的属性。如果您创建自己的属性，请确保它们从正确的命名空间继承属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-12T17:59:38.157

我相信以下代码段会对您有所帮助。

```
public class HomeController : BaseController
{
   public IHttpActionResult Get()
   {
            base.InitialiseUserState();
            var info = Info;
                return Ok(info);
        }
}

public class BaseController : ApiController
    {
        public string Info { get; set; }
        public void InitialiseUserState()
        {
            Info = "test";
        }
    } 
```

# metaprogramming - 使用参数值访问php中的对象成员？

> ID：14995774
> 
> 赞同：0
> 
> 时间：2013-02-21T06:16:54.600
> 
> 标签：metaprogramming, php, variable-variables

`myobject`我想要返回类似以下代码的属性：

```
class myobject{
   var $foo = 1;
   var $bar = 2;

   function getProperty($Field) {
       return $this->$Field;// this line have error
   }

} 
```

$object = new myobject();

我这样调用方法

```
$object->getProperty("foo"); 
```

但线

> 返回 $this->$Field;

有错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T06:20:34.580

我想你想使用魔术方法`__get`：[http ://www.php.net/manual/en/language.oop5.overloading.php#object.get](http://www.php.net/manual/en/language.oop5.overloading.php#object.get)

# c# - 如何在单击按钮时从 GridView 中删除选定的行（使用的复选框）？

> ID：14995776
> 
> 赞同：0
> 
> 时间：2013-02-21T06:17:01.543
> 
> 标签：c#, asp.net, sql-server, web-applications, gridview

我有一个 GridView，其中包含从 TextBox 中提取的多行数据（使用会话）。GridView 上应该有一列包含每行上的 CheckBox，以选择要删除的行。**我在 GridView 之外有一个按钮。单击它后，GridView 中的所有选定行（使用 CheckBox）都应从 GridView 中“删除”。我不想要 GridView 上的“删除链接”。**

**请对下面给出的代码进行必要的更改以实现此功能。**

**默认.aspx**

```
<body>
    <form id="form1" runat="server">
    <div>

<asp:Button ID="Button1" runat="server" Text="Add to Grid" OnClick="Button1_Click" />
        <br />

<asp:GridView ID="GridView1" runat="server" DataKeyNames="EmpID" AutoGenerateColumns="false"
    OnRowEditing="GridView1_RowEditing" OnRowCancelingEdit="GridView1_RowCancelingEdit"
    OnRowDeleting="GridView1_RowDeleting" OnPageIndexChanging="GridView1_PageIndexChanging"
    PageSize="5" AllowPaging="true" OnRowUpdating="GridView1_RowUpdating" Width="800">
    <Columns>
        <asp:TemplateField HeaderText="Employee ID">
            <ItemTemplate>
                <%#Eval("EmpID")%>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Employee Name">
            <ItemTemplate>
                <%#Eval("EmpName")%>
            </ItemTemplate>
            <EditItemTemplate>
                <asp:TextBox ID="txtEmpName" runat="server" Text='<%#Eval("EmpName") %>'></asp:TextBox>
            </EditItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Salary">
            <ItemTemplate>
                <%#Eval("EmpSalary")%>
            </ItemTemplate>
            <EditItemTemplate>
                <asp:TextBox ID="txtEmpSalary" runat="server" Text='<%#Eval("EmpSalary") %>'></asp:TextBox>
            </EditItemTemplate>
        </asp:TemplateField>
        <asp:CommandField HeaderText="Modify" ShowEditButton="true" EditText="Edit">
            <ControlStyle Width="50" />
        </asp:CommandField>
        <asp:TemplateField HeaderText="Delete">
            <ItemTemplate>
                <asp:LinkButton ID="lnkDelete" CommandName="Delete" runat="server" OnClientClick="return confirm('Are you sure you want to delete these records?');">Delete</asp:LinkButton>
            </ItemTemplate>
        </asp:TemplateField>

        **<asp:TemplateField HeaderText="Tick to Delete Rows">
            <ItemTemplate>
                <asp:CheckBox ID="chkDelete" runat="server" Text="Select" />
            </ItemTemplate>
            <HeaderTemplate>
            </HeaderTemplate>
        </asp:TemplateField>**

    </Columns>

</asp:GridView>

</div>

<p style="width: 799px">       
 <asp:Button ID="Button3" runat="server" onclick="Button3_Click" Text="Delete Checked items" Width="162px" /></p>

</body> 
```

**默认.aspx.cs**

```
using System;
using System.Collections;
using System.Collections.Generic;
using System.Configuration;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.HtmlControls;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Linq;
using System.Xml.Linq;
using System.Data;
using System.Data.SqlClient;

public partial class _Default : System.Web.UI.Page
{
    SqlConnection sqlcon = new SqlConnection(ConfigurationManager.AppSettings["constring"]);
    SqlCommand sqlcmd = new SqlCommand();
    SqlDataAdapter da = new SqlDataAdapter();
    DataTable dt = new DataTable();
    DataTable dt1 = new DataTable();
    DataRow dr;
    DataRow dr1;
    DataSet ds = new DataSet();

    protected void Page_Load(object sender, EventArgs e)
    {
        Label1.Text = "";
        //lbldbmsg.Text = "";
        if (!Page.IsPostBack)
        {
            dt.Columns.Add("EmpID");
            dt.Columns.Add("EmpName");
            dt.Columns.Add("EmpSalary");
            Session["reptable"] = dt;
            GridData();            
        }
    }

protected void GridView1_RowDeleting(object sender, GridViewDeleteEventArgs e)
    {
        string EmpID;
        EmpID = GridView1.DataKeys[e.RowIndex].Value.ToString();
        if (Session["reptable"] != null)
        {
            DataTable dt1 = new DataTable();
            dt1.Clear();
            dt1 = Session["reptable"] as DataTable;
            for (int i = 0; i <= dt1.Rows.Count - 1; i++)
            {
                DataRow dr;
                if (dt1.Rows[i][0].ToString() == EmpID)
                {
                    dr = dt1.Rows[i];
                    dt1.Rows[i].Delete();
                    //dt1.Rows.Remove(dr);
                }
            }
            Session.Remove("reptable");
            Session["reptable"] = dt1;
        }
        GridData();
    }

    protected void GridView1_PageIndexChanging(object sender, GridViewPageEventArgs e)
    {
        GridView1.PageIndex = e.NewPageIndex;
        GridData();
    }

protected void Button1_Click(object sender, EventArgs e)
    {
        dt = (DataTable)Session["reptable"];
        dr = dt.NewRow();
        dr["EmpID"] = TextBox1.Text;
        dr["EmpName"] = TextBox2.Text;
        dr["EmpSalary"] = TextBox3.Text;
        dt.Rows.Add(dr);
        Session.Remove("reptable");
        Session["reptable"] = dt;
        GridData();
        TextBox1.Text = "";
        TextBox2.Text = "";
        TextBox3.Text = "";
    }

protected void Button3_Click(object sender, EventArgs e)
   {

   }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T06:32:58.167

这真的很简单，你所要做的就是：

1.  遍历删除按钮 OnClick 事件中的网格视图行
2.  在每一行中找到删除复选框，看看它是否被打勾
3.  实现你的删除逻辑

这是一个示例，我相信您可以根据需要更改它以适应您的场景：

```
 protected void DeleteClick(object sender,EventArgs e)
    {
        for (int i=0; i < GridView1.Rows.Count;i++)
        {
            CheckBox chkDelete = GridView1.Rows[i].FindControl("chkDelete") as CheckBox;
            if (chkDelete != null && chkDelete.Checked)
            {
                //Delete the item
            }
        }
    } 
```

**更新：**

这是如何删除行的示例

```
protected void DeleteClick(object sender,EventArgs e)
{
    DataTable table = (DataTable)Session["reptable"];
    for (int i = 0; i < GridView1.Rows.Count; i++)
    {
        CheckBox chkDelete = GridView1.Rows[i].FindControl("chkDelete") as CheckBox;
        if (chkDelete != null && chkDelete.Checked)
        {
            var empId = GridView1.DataKeys[i]["EmpID"];
            DataRow dr = table.Select(String.Format("EmpID={0}", empId)).First();
            if (dr != null)
            dr.Delete();
        }
    }
    //Rebind your grid view here to view the changes e.g
    GridView1.DataSource = table;
    GridView1.DataBind();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-05T10:00:20.950

```
 foreach (GridViewRow row in GridView1.Rows)
{
    CheckBox checkbox1 = (CheckBox)row.FindControl("checkboxdelete");
    if (checkbox1.Checked)
    {
        int (primrary key) = Convert.ToInt32(GridView1.DataKeys[row.RowIndex].Value.ToString());
        SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["cn"].ConnectionString);
        SqlCommand cmd = new SqlCommand("delete from student where Primrarykey = @Primrarykey ", con);
        cmd.CommandType = CommandType.Text;
        cmd.Parameters.Add("Primrarykey", SqlDbType.Int).Value = Primrarykey.ToString();
        con.Open();
        cmd.ExecuteNonQuery();
        con.Close();
        cmd.Dispose();
    }
}
grdview_bnd();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T06:28:28.380

您可以在 girdview 中使用按钮字段而不是复选框，然后您可以将 rowcommand 事件添加到您的 gridview 中，例如：
[Gridview rowcommand](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowcommand.aspx)

# javascript - 有没有办法限制 Twitter 时间线小部件中的推文？

> ID：14995777
> 
> 赞同：15
> 
> 时间：2013-02-21T06:17:05.137
> 
> 标签：javascript, twitter, widget

我正在使用下面看到的 Twitter 的时间线小部件，并希望将推文的数量限制为 5。默认情况下为 20。嵌入的网站是为使用屏幕阅读器的视障人士准备的。屏幕阅读器被困在小部件内，用户被迫浏览所有 20 条推文才能退出。twitter 的文档中没有更改数字的说明。我愿意使用其他代码。谢谢！

```
<a class="twitter-timeline" data-dnt="true" href="https://twitter.com/myprofile" data-widget-id="3007449998460120999">Tweets by @myprofile</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script> 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-07-22T23:28:51.140

您可以为标签设置`data`属性以自定义时间线。`<a>`查看[嵌入式时间轴文档](https://developer.twitter.com/en/docs/twitter-for-websites/timelines/overview)以获取更多选项。

你会想要`data-tweet-limit=5`的。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2018-10-22T04:36:17.713

嗨，您可以将链接中的属性设置为`data-tweet-limit="3"`

例如。

```
<a class="twitter-timeline" data-lang="en" data-dnt="true" data-tweet-limit="3" href="https://twitter.com/AdliveTech">Tweets by AdliveTech</a> <script async src="//platform.twitter.com/widgets.js" charset="utf-8"> 
```

# java - FLEX java.home PATH 反斜杠

> ID：14995779
> 
> 赞同：1
> 
> 时间：2013-02-21T06:17:09.497
> 
> 标签：java, apache-flex, actionscript

我在我的 config.jvm 中写道：

```
java.home=C:/Program Files/Java/jre6 
```

但是当我在控制台 mxmlc.exe 中写入时，它给了我一个错误：

```
Error loading: C:/Program Files/Java/jre6\bin\server\jvm.dll 
```

它会自动在路径中添加一个反斜杠，但是如果我将完整路径写入 jvm.dll，如下所示：

```
java.home=C:/Program Files/Java/jre6/bin/server 
```

它给了我一个错误：

```
Could not find a JVM 
```

我能做些什么？

我在 Windows 7 上

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T06:26:02.703

根据[这篇博](http://www.qlambda.com/2010/07/mxmlc-error-loading-filesjavajre6binser.html)文，您需要使用 32 位的 JRE `Program Files (x86)`（而其中的JRE`Program Files`是 64 位的）。所以：

```
java.home=C:\Program Files (x86)\Java\jre6 
```

# php - 插入和更新记录

> ID：14995782
> 
> 赞同：0
> 
> 时间：2013-02-21T06:17:29.420
> 
> 标签：php, mysql, insert-update

您好，任何人都可以帮助我...我已经尝试了几种不同的方法，同时试图实现这样的输出。

```
id   idnumber    datein      timein     dateout     timeout

1     123      2013-02-21   08:00:01   2013-02-21   11:12:45

2     456      2013-02-21   10:15:01   2013-02-21   05:30:01

3     123      2013-02-21   06:58:52   2013-02-21   03:20:16

4     123      2013-02-21   10:05:35   2013-02-21 
```

但是我仍然无法得到它......我正在尝试进行出勤监控，只要将其记录到数据库中，一个人就可以按他/她的意愿计时和超时。我在 php 中有这两个代码可以工作，但不是我想要的输出。

下面的代码只插入一条记录，但更新不起作用：

```
if (isset($_POST['idnumber'])){
      $query = "INSERT INTO tblattendance SET idnumber='".$_POST['idnumber']."', datein=CURDATE(), timein = CURTIME()";
      $insert_result = mysql_query($query);
}else{
      $query1 = "UPDATE tblattendance SET dateout=CURDATE(), timeout = CURTIME() WHERE idnumber='".$_POST['idnumber']."' ORDER BY id DESC LIMIT 1 ";
      $insert_result1 = mysql_query($query1);   
} 
```

下面的代码仅在没有 idnumber 的现有记录时执行插入和更新，但如果 idnumber 存在，它只是更新超时列。

```
$query = "SELECT * FROM tblattendance WHERE idnumber='".$_POST[idnumber']."'";
$res = mysql_query($query);
list($exist) = mysql_fetch_array($res);

    if (!$exist){
          $query = "INSERT INTO tblattendance SET idnumber='".$_POST['idnumber']."', datein=CURDATE(), timein = CURTIME()";
          $insert_result = mysql_query($query);
    }else{
         $query1 = "UPDATE tblattendance SET dateout=CURDATE(), timeout = CURTIME() WHERE idnumber='".$_POST['idnumber']."' ORDER BY id DESC LIMIT 1 ";
         $insert_result1 = mysql_query($query1);    
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T06:25:13.517

原始代码试图使用[`UPDATE`](http://www.w3schools.com/sql/sql_update.asp)语法（而不是一般[`INSERT`](http://www.w3schools.com/sql/sql_insert.asp)语法，尽管基于此[源](http://dev.mysql.com/doc/refman/5.5/en/insert.html)它似乎是正确的）插入到数据库中。

```
 $query = "INSERT INTO tblattendance SET idnumber='".$_POST['idnumber']."', datein=CURDATE(), timein = CURTIME()"; 
```

对于我的示例，我使用下面的表模式...

```
CREATE TABLE IF NOT EXISTS `tblattendance` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `idnumber` int(11) NOT NULL,
  `timein` datetime DEFAULT NULL,
  `datein` datetime DEFAULT NULL,
  `timeout` datetime DEFAULT NULL,
  `dateout` datetime DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=6 ; 
```

[rhein](https://stackoverflow.com/users/1841014/rhein)从原始代码中删除了一些重复项

```
//grab the id_number
$id_number = $_POST['idnumber'];
//fetch rows
$query = "SELECT * FROM test.tblattendance WHERE idnumber='".$id_number."'";
$res = mysql_query($query);
$rows = mysql_fetch_array($res);
//create an initial query to update the database
$query = "UPDATE test.tblattendance SET dateout=CURDATE(), timeout = CURTIME() WHERE idnumber='".$id_number."'";
//check we have no rows
if (empty($rows)){
      //because we have no rows modify the query
      $query = "INSERT INTO test.tblattendance VALUES('', $id_number, CURDATE(), CURDATE(), null, null);";
} @mysql_query($query); 
```

为了有效对抗SQL注入。在查询数据库之前，所有元素`$_POST`都应该被包裹起来，[`mysqli_real_escape_string`](http://www.php.net/manual/en/mysqli.real-escape-string.php)或者你应该用 ASCII 字符替换中的撇号。`$_POST`

# ssis - 如何在将数据加载到数据库之前验证 Excel 列是否为 NULL？

> ID：14995784
> 
> 赞同：0
> 
> 时间：2013-02-21T06:17:47.283
> 
> 标签：ssis

在将它们加载到数据库表之前，我正在验证多个 excel 文件。

首先，我要检查`NULL`，确保文件中有效行数的阈值标准符合**`60%`**标记；如果标准低于**`60%`**，拒绝文件并发送邮件通知，否则 60% 及以上，处理文件，将数据加载到表中并发送邮件通知。为了清楚起见，下面是一个示例测试数据。在此示例数据中，以下是验证标准

1.  ID 不能**`NULL`**，创建一个标记为 NULL 的新列

2.  如果`(Non-NULL row count / total row count) < 60%`，则发送错误通知并拒绝文件

3.  如果`(Non-NULL row count / total row count) > 60%`，则将文件移动到最终目的地并发送成功消息

### 示例输入文件 1：

```
ID    Name
----- ------
1     John
2     Dave
NULL  Jonny
NULL  Kevin
NULL  David 
```

这应该被拒绝，因为它不符合*`60 percent`*标准。

```
ID    Name   NULL_Flag Percent
----- ------ --------- -------
1     John       N       40
2     Dave       N       40
NULL  Jonny      Y       40
NULL  Kevin      Y       40
NULL  David      Y       40 
```

### 示例输入文件 2：

```
ID    Name
----- ------
100   Jack
200   Jill
300   Naomi
400   Tim 
```

应处理此文件，因为它符合*`60 percent`*条件并且应将数据加载到目标表中。

```
ID    Name   NULL_Flag Percent
----- ------ --------- -------
100   Jack       N      100
200   Jill       N      100
300   Naomi      N      100
400   Tim        N      100 
```

我应该如何在 SSIS 中解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T21:42:21.043

假设每个 Excel 文件具有相同的列布局，我将构建一个数据流来处理验证并设置一个布尔变量来控制如何处理任何特定文件。将数据流链接到后续任务的优先约束将在表达式中使用该布尔变量：

![控制流截图](../Images/d33d816e9c6eba4b3837a5ae35a57c49.png)

数据流将使用 Excel 源和脚本转换集作为目标：

![数据流截图](../Images/8cb8898026aea7e9eecaf630c2c089e1.png)

脚本转换的代码 SCR_DST_ValidateFile 如下所示：

```
public class ScriptMain : UserComponent
{
    private double _nullCount = 0;
    private double _rowCount = 0;
    public override void PreExecute()
    {
        base.PreExecute();
    }

    public override void PostExecute()
    {
        base.PostExecute();
        Variables.ValidFile = ((_nullCount / _rowCount) > .6);
    }

    public override void Input0_ProcessInputRow(Input0Buffer Row)
    {
        _rowCount += 1;
        if (Row.ID_IsNull) _nullCount += 1;
    }

} 
```

其中`ValidFile`是布尔变量的名称。

**编辑：**上面控制流中的`SEQ_Valid`和`SEQ_NotValid`序列容器代表您可能需要处理您的特定要求的任何组件（例如，发送电子邮件，将文件的内容加载到数据库中等）；我使用序列容器作为占位符。

至于设置优先约束，从`DFT_CheckIfSpreadsheetValid`to的约束`SEQ_Valid`是这样配置的：

![@ValidFile 优先约束的截图](../Images/2ed7cd7ea18ab07729757b01ed498437.png)

而`DFT_CheckIfSpreadsheetValid`to的约束`SEQ_NotValid`是这样配置的：

![!@ValidFile 优先约束的屏幕截图](../Images/0e60e1ddeb9c10bcb3ede8c92d38f9e7.png)

# android - 如何从android中的动态视图中获取动态选定值？

> ID：14995789
> 
> 赞同：0
> 
> 时间：2013-02-21T06:18:20.467
> 
> 标签：android, checkbox

![在此处输入图像描述](../Images/86828c106695691178a924800a3a2f51.png)

如何从线性布局中动态创建的复选框中获取选定的复选框值。请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T06:21:37.490

您可以在复选框上使用 CheckedChange 列表器。

示例：chkBox.setOnCheckedChangeListener(new OnCheckedChangeListener() {

```
 @Override
        public void onCheckedChanged(CompoundButton buttonView,
                boolean isChecked) {
            if (isChecked) {
                //Do operations when checked
            }

        }
    }); 
```

# iphone - 根据 PFRelation 检查 PFTableViewCell

> ID：14995790
> 
> 赞同：1
> 
> 时间：2013-02-21T06:18:29.653
> 
> 标签：iphone, ios, objective-c, parse-platform

我`PRelation`在类别和项目之间有一个我正在寻找`PFQueryTableViewController`用于将项目添加到类别的项目。`PFQueryTableViewController`列出所有项目，用户选择要放入类别的项目。我想弄清楚的是如何确定项目是否在类别中并将`PFTableViewCell`附件类型设置为`UITableViewCellAccessoryCheckmark`

当前代码：

```
- (PFTableViewCell*)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath object:(PFObject *)object {

    static NSString * CellIdentifier = @"Cell";

    BOOL itemInCategory = ?; //This is where I am determining the hierarchy

    PFTableViewCell * cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    cell.textLabel.text = [sendingObject valueForKey:@"Title"];
    cell.accessoryType = itemInCategory ? UITableViewCellAccessoryCheckmark : UITableViewCellAccessoryNone;
    return cell;

} 
```

**编辑**

我还需要一些帮助从类别中删除项目：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    BOOL itemInCategory = ?;

    if (itemInCategory) {

        //Remove Item?

    } else {
        PFRelation * relation = [sendingObject relationforKey:@"Items"];
        [relation addObject:[self.objects objectAtIndex:[indexPath row]]];
        [self save];
    }

} 
```

应该很简单

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:04:32.793

我遇到过类似的情况。我制作了一个容器来保存选定的 indexPaths。

```
@property (nonatomic, strong) NSMutableArray*selectedIndexPaths; 
```

初始化选择容器

```
- (void)viewDidLoad
{
    self.selectedIndexPaths = [@[] mutableCopy];
} 
```

检查特定的 indexPath 是否存储在选择容器数组中

```
- (PFTableViewCell*)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath object:(PFObject *)object {

    static NSString * CellIdentifier = @"Cell";

    BOOL itemInCategory = [self.selectedIndexPaths containsObject:indexPath];

    PFTableViewCell * cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    cell.textLabel.text = [sendingObject valueForKey:@"Title"];
    cell.accessoryType = itemInCategory ? UITableViewCellAccessoryCheckmark : UITableViewCellAccessoryNone;
    return cell;

} 
```

如果 indexPath 存储在选择数组中，则从关系中删除项目，否则添加它并重新加载 tableView。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

       BOOL itemInCategory = [self.selectedIndexPaths containsObject:indexPath];
       PFRelation * relation = [sendingObject relationforKey:@"Items"];

       if (itemInCategory) {

           //Remove the item from selectedIndex container and also relation
           [self.selectedIndexPaths removeObject:indexPath];
           [relation removeObject:self.objects[indexPath.row]];

       } 
       else {

           [self.selectedIndexPaths addObject:indexPath];
           [relation addObject:self.objects[indexPath.row]];
           [self save];
       }

       [tableView reloadData];

   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T22:16:27.683

下面的这种技术会根据部分和行号跟踪先前选择和未选择的项目。
由于 tableview 是基于已经存在并且我们拥有的列表建立的......
在要执行的操作时**“ `checkMarkSectionsDictionary`”**将为我们提供所选项目的列表。
[checkMarkSectionsDictionary ALLKEYS]// 返回部分的键
并且针对每个部分，我们将选择行。

```
 NSMutableDictionary *checkMarkSectionsDictionary = nil; //need to be defined at class level

if ([checkMarkSectionsDictionary objectForKey:[NSNumber numberWithInt:indexPath.section]]) {
    NSDictionary * checkMarkRowDictionary = [checkMarkSectionsDictionary objectForKey:[NSNumber numberWithInt:indexPath.section]];
    if ([checkMarkRowDictionary objectForKey:[NSNumber numberWithInt:indexPath.row]]) {
        [cell setAccessoryType:UITableViewCellAccessoryCheckmark];            
    }
}
else{
        // category was not found in selected items
}

//DID SELECT

//CHECK / UNCHECK
if ([checkMarkSectionsDictionary objectForKey:[NSNumber numberWithInt:indexPath.section]]) {
    //SECTION EXISTS
    NSMutableDictionary * checkMarkRowDictionary = [checkMarkSectionsDictionary objectForKey:[NSNumber numberWithInt:indexPath.section]];
    if ([checkMarkRowDictionary objectForKey:[NSNumber numberWithInt:indexPath.row]]) {
        [checkMarkRowDictionary removeObjectForKey:[NSNumber numberWithInt:indexPath.row]];
    }
    else{
        [checkMarkRowDictionary setObject:[NSNumber numberWithInt:indexPath.row] forKey:[NSNumber numberWithInt:indexPath.row]];
    }
    if (checkMarkSectionsDictionary.count == 0) {
        [checkMarkSectionsDictionary removeObjectForKey:[NSNumber numberWithInt:indexPath.section]];
    }
}

else{

    //SECTION DOESNOT EXIST CREATE IT AND SET THE SELECTED ROW
    NSMutableDictionary *checkMarkRowDictionary = [NSMutableDictionary dictionaryWithObject:[NSNumber numberWithInt:indexPath.row] forKey:[NSNumber numberWithInt:indexPath.row]];
    [checkMarkSectionsDictionary setObject:checkMarkRowDictionary forKey:[NSNumber numberWithInt:indexPath.section]];

}

[_tableView reloadData]; 
```

# java - 单个实例或单个程序打开

> ID：14995792
> 
> 赞同：-2
> 
> 时间：2013-02-21T06:18:38.313
> 
> 标签：java

我使用java创建了一个程序。现在我完成了我构建它。我怎样才能让我的程序只能运行一次或他们所谓的单实例。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-21T06:44:50.987

这就是您创建单例类的方式

```
public class MyClass
{
  private MyClass instance;

  private MyClass() { }

  public static MyClass getInstance()
  {
     return instance == null ? new MyClass() : instance;
  }
} 
```

因此，无论您在哪里尝试调用该类，都以这种方式进行

```
public class Main
{
  public static void main(String[] args)
  {
     MyClass mc = MyClass.getInstance();

     //With this only one instance of your class is possible
  }
} 
```

# java - 在 OnReceive() android中注册另一个接收器

> ID：14995794
> 
> 赞同：0
> 
> 时间：2013-02-21T06:18:49.040
> 
> 标签：java, android

我在 OnReceive() 方法中使用 SMSManager 发送消息，我想为 SMSManager 添加发送和传递报告意图，当我通过编程方式和清单在另一个接收器中注册接收器时，它不调用发送的短信接收器。

是否可以在 onReceive() 中执行或帮助我如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T18:02:17.657

答案是`IntentReceiver`不允许组件注册以接收意图。您不能`BroadcastReceiver`在现有的`BroadcastReceiver`.

# c# - 使用 esc 关闭 mdi 子项

> ID：14995798
> 
> 赞同：3
> 
> 时间：2013-02-21T06:19:06.517
> 
> 标签：c#, winforms

我需要`mdi child`用`Esc`键关闭。我尝试使用`keydown`和`keypress`事件，但我什至无法让表单在按下任何键时响应这些事件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T06:21:18.550

试试这个

```
private void Form_KeyDown(object sender, KeyEventArgs e)
{
    if (e.KeyCode == Keys.Escape)
    {
        this.Close();
    }
} 
```

**或**利用

[`Form.CancelButton Property`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.cancelbutton.aspx)- 获取或设置当用户按下 ESC 键时单击的按钮控件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T06:27:47.587

设置表单的属性`KeyPreview=True` 并使用`Keydown Event`

```
if (e.KeyCode == Keys.Escape){
   this.Close();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T06:26:02.753

如果您的 MDI 表单有`Close`按钮，那么您可以在表单中分配具有按钮`CancelButton`ID 的属性`Close`。

所以当你按下`ESC`键时，它会调用`Close`按钮点击。

更多：[取消按钮](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.cancelbutton.aspx)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-21T06:29:39.187

首先你必须设置`Form.KeyPreview = true`并且你必须知道[KeyUp](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.keyup.aspx)和[KeyDown](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.keydown.aspx)事件之间的区别是什么

```
private void Form1_KeyUp(object sender, KeyEventArgs e)
{
    if (e.KeyCode == Keys.Escape)
    {
        this.Close();
    }
} 
```

如果你想要 KeyPress 事件

```
private void Form1_KeyPress(object sender, KeyPressEventArgs e)
{
    if (e.KeyChar == 27)
    {
        this.Close();
    }
} 
```

# ios - NSOperationQueue 的 maxConcurrentOperationCount 的默认值

> ID：14995801
> 
> 赞同：27
> 
> 时间：2013-02-21T06:19:23.653
> 
> 标签：ios, objective-c, nsoperation, nsoperationqueue

正如标题所示，NSOperationQueue 的 maxConcurrentOperationCount 的默认值是多少？

它是否设置为值 1？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-21T06:23:31.067

从[文档](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/NSOperationQueue_class/Reference/Reference.html#//apple_ref/occ/instm/NSOperationQueue/maxConcurrentOperationCount)中，

> 使用 setMaxConcurrentOperationCount: 方法在接收器上显式设置的最大并发操作数。**如果没有显式设置值，则此方法默认返回 NSOperationQueueDefaultMaxConcurrentOperationCount**。

所以它是`NSOperationQueueDefaultMaxConcurrentOperationCount`。如果设置了此项，它将根据可用处理器的数量和其他相关因素选择适当的值。

这是[它的定义方式](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/NSOperationQueue_class/NSOperationQueue_class.pdf)：

```
enum {
  NSOperationQueueDefaultMaxConcurrentOperationCount = -1
}; 
```

> **NSOperationQueueDefaultMaxConcurrentOperationCount：**默认的最大操作数由 NSOperationQueue 对象根据当前系统条件动态确定。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-10-07T23:45:01.407

在我的一个应用程序中，我一次添加了大约 35k`NSOperation`个实例`NSOperationQueue`。如果我设置`maxConcurrentOperationCount`为 64，与默认值相比，我获得了大约 20 倍的性能。CPU 负载从 ~120% 上升到 400%，这似乎表明默认值太高以至于 CPU 主要忙于处理操作队列开销。

结论：如果你有很多短暂的生命`NSOperation`，那么玩`maxConcurrentOperationCount`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-11-17T12:37:38.710

# `maxConcurrentOperationCount`of`NSOperationQueue`在 iPhone 平台上只能设置为 1 到 6。

`maxConcurrentOperationCount`设置为`NSOperationQueue`默认值不是一个好主意。因为这意味着无限数量的队列。

## 什么时候应该将`maxConcurrentOperationCount`of`NSOperationQueue` 设置为 1 到 6 ？

当可以同时调用多个任务时，`maxConcurrentOperationCount`of`NSOperationQueue`应该设置为6。例如，可以同时下载多个图像。

为什么是 6 而不是 10 或 100？

在名为 的框架`SDWebImage`中，我们可以看到源代码如下：

```
- (instancetype)init {
   self = [super init];
   if (self) {
       _maxConcurrentDownloads = 6;
       _downloadTimeout = 15.0;
       _executionOrder = SDWebImageDownloaderFIFOExecutionOrder;
       _acceptableStatusCodes = [NSIndexSet indexSetWithIndexesInRange:NSMakeRange(200, 100)];
   }
   return self;
} 
```

此代码表示默认值为 6。 [SDWebImage 参考 SDWebImageDownloaderConfig 类参考](https://sdwebimage.github.io/SDWebImage/Classes/SDWebImageDownloaderConfig.html#/c:objc(cs)SDWebImageDownloaderConfig(py)maxConcurrentDownloads "SDWebImage 参考 SDWebImageDownloaderConfig 类参考")

的含义 `maxConcurrentDownloads`与`maxConcurrentOperationCount`（[Apple-Docs-NSOperationQueue-maxConcurrentOperationCount](https://developer.apple.com/documentation/foundation/nsoperationqueue/1414982-maxconcurrentoperationcount "Apple-Docs-NSOperationQueue-maxConcurrentOperationCount")）相同

为什么是 6 而不是 10 或 100？

`SDWebImage` 说它的编码器是通过实验：

参考：[为什么 SDWebImageDownloader maxConcurrentOperationCount = 6？#1961](https://github.com/SDWebImage/SDWebImage/issues/1961)

忽略实验， 从 iPhone 到 iPhone 13/13 Pro/13 Pro Max，iOS 平台上处理器核心的最大数量是 6 个，所以应该设置为 1 到 6 `maxConcurrentOperationCount`。`NSOperationQueue`

| 苹果手机 | 首次发布 | 系统开启 | 处理器核心数 |
| --- | --- | --- | --- |
| 苹果手机 | 2007年 | S (三星 S5L8900) | 1个核心 |
| iPhone 3G | 2008年 | S (三星 S5L8900) | 1个核心 |
| iPhone 3GS | 2009 | S（三星S5PC100 | 1个核心 |
| iPhone 4 | 2010 | A4 | 1个核心 |
| iPhone 4S | 2011 | A5 | 2个核心 |
| iphone 5 | 2012 | A6 | 2个核心 |
| iPhone 5S | 2013 | A7 | 2核 |
| iPhone 6/6 加 | 2014 | A8 | 2个核心 |
| iPhone 6s/6s plus/SE | 2015 | A9 | 2个核心 |
| iPhone 7/加 | 2016 年 | A9 | 4核（使用2核） |
| iPhone 8/加/X | 2017 | A11 | 6 个核心 = 2 个高功率 Monsoon 核心 + 4 个低功率 Mistral 核心 |
| iPhone XS/XS MAX/XR | 2018 | A12 | 6 个核心 = 2 个高功率 Vortex 核心 + 4 个低功率 Tempest 核心 |
| iPhone 11 /11 Pro/11 Pro Max | 2019 | A13 | 6 个核心 = 2 个性能 + 4 个效率核心 |
| iPhone 12 /12 Pro/12 Pro Max | 2020 | A14 | 6 个核心 = 2 个性能 + 4 个效率核心 |
| iPhone 13 /13 Pro/13 Pro Max | 2021 | A15 | 6 个核心 = 2 个性能 + 4 个效率核心 |

我们可以使用如下代码打印处理器内核的数量：

```
 NSUInteger cpuCoresCount = [[NSProcessInfo processInfo] processorCount]; 
```

我们可以使用如下代码打印活动处理器内核的数量：

```
 NSUInteger activeCPUCoresCount = [[NSProcessInfo processInfo] activeProcessorCount]; 
```

参考文档：[Apple-Docs-NSProcessInfo-processorCount](https://developer.apple.com/documentation/foundation/nsprocessinfo/1415622-processorcount "Apple-Docs-NSProcessInfo-processorCount")

`_maxConcurrentDownloads`在 iPhone 平台上设置为 CPU 核心数是合理 的。至于进一步的评论，`activeProcessorCount`可能会更好。

在名为 的框架中`YYKit`，`queueCount`设置为`activeProcessorCount`.

```
#define MAX_QUEUE_COUNT 16
   static int queueCount;
   static dispatch_queue_t queues[MAX_QUEUE_COUNT];
   static dispatch_once_t onceToken;
   static int32_t counter = 0;
   dispatch_once(&onceToken, ^{
       queueCount = (int)[NSProcessInfo processInfo].activeProcessorCount;
       queueCount = queueCount < 1 ? 1 : queueCount > MAX_QUEUE_COUNT ? MAX_QUEUE_COUNT : queueCount;
       if ([UIDevice currentDevice].systemVersion.floatValue >= 8.0) {
           for (NSUInteger i = 0; i < queueCount; i++) {
               dispatch_queue_attr_t attr = dispatch_queue_attr_make_with_qos_class(DISPATCH_QUEUE_SERIAL, QOS_CLASS_USER_INITIATED, 0);
               queues[i] = dispatch_queue_create("com.ibireme.yykit.render", attr);
           }
       } else {
           for (NSUInteger i = 0; i < queueCount; i++) {
               queues[i] = dispatch_queue_create("com.ibireme.yykit.render", DISPATCH_QUEUE_SERIAL);
               dispatch_set_target_queue(queues[i], dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0));
           }
       }
   });
   int32_t cur = OSAtomicIncrement32(&counter);
   if (cur < 0) cur = -cur;
   return queues[(cur) % queueCount];
#undef MAX_QUEUE_COUNT 
```

## 什么时候应该设置`maxConcurrentOperationCount`为`NSOperationQueue` 1 ？

它们设置`maxConcurrentOperationCount`为一个意味着只能同时调用一个任务。

当只能同时调用一个任务时， `maxConcurrentOperationCount`应设置为1。例如，只能同时动画一张GIF图像；只能同时播放一个视频。此外，只能同时解码一个视频/图像。

参考：[Apple-Docs-NSOperationQueue-maxConcurrentOperationCount](https://developer.apple.com/documentation/foundation/nsoperationqueue/1414982-maxconcurrentoperationcount "Apple-Docs-NSOperationQueue-maxConcurrentOperationCount")

# graphite - 无法用石墨启动碳

> ID：14995802
> 
> 赞同：0
> 
> 时间：2013-02-21T06:19:35.673
> 
> 标签：graphite

我正在使用石墨`0.9.2`。今天，我使用这个命令启动 carbon `export PYTHONPATH=/home/local/ZOHOCORP/bharathi-1397/softwares/graphite/whisper-0.9.10; nohup ./bin/carbon-cache.py --debug start &`。我收到以下错误。

```
 Traceback (most recent call last):
  File "./bin/carbon-cache.py", line 30, in <module>
    run_twistd_plugin(__file__)
  File "/opt/graphite/lib/carbon/util.py", line 92, in run_twistd_plugin
    runApp(config)
  File "/usr/lib/python2.7/dist-packages/twisted/scripts/twistd.py", line 23, in runApp
    _SomeApplicationRunner(config).run()
  File "/usr/lib/python2.7/dist-packages/twisted/application/app.py", line 386, in run
    self.application = self.createOrGetApplication()
  File "/usr/lib/python2.7/dist-packages/twisted/application/app.py", line 446, in createOrGetApplication
    ser = plg.makeService(self.config.subOptions)
  File "/opt/graphite/lib/twisted/plugins/carbon_cache_plugin.py", line 21, in makeService
    return service.createCacheService(options)
  File "/opt/graphite/lib/carbon/service.py", line 127, in createCacheService
    from carbon.writer import WriterService
  File "/opt/graphite/lib/carbon/writer.py", line 34, in <module>
    schemas = loadStorageSchemas()
  File "/opt/graphite/lib/carbon/storage.py", line 139, in loadStorageSchemas
    except InvalidConfiguration, e:
NameError: global name 'InvalidConfiguration' is not defined 
```

我的`storage-schemas.conf`档案。

```
 [carbon]
pattern = ^carbon\.
retentions = 60:90d

[stats_schema_data_storage_retention]
pattern = stats.*
retentions = 1m:7d,5m:21d,1h:30d,1d:1y,1m:3y

[service_registration]
pattern = registration.*
retentions = 1m:7d,5m:21d,1h:30d,1d:1y,1m:3y

[server_load]
priority=100
pattern=^servers\.
retentions=60:43200,900:350400 
```

请帮我解决问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T11:58:18.833

问题是您定义了相同的保留 - 1m：

保留 = **1m** :7d,5m:21d,1h:30d,1d:1y, **1m** :3y

这是错误的，当您定义保留设置时，您必须按照从较高精度到较低精度的顺序来定义它 - 所以实际上直到 1m:3y 一切都很好。

可以参考： [https ://github.com/tmm1/graphite/blob/master/whisper/whisper.py](https://github.com/tmm1/graphite/blob/master/whisper/whisper.py)

请参阅 validateArchiveList 方法说明：**与高精度归档相比，低精度归档必须覆盖更大的时间间隔。**

另外我建议您阅读以下内容：

[http://graphite.wikidot.com/getting-your-data-into-graphite](http://graphite.wikidot.com/getting-your-data-into-graphite) [http://graphite.readthedocs.org/en/1.0/whisper.html#multi-archive-storage-and-retrieval-behavior](http://graphite.readthedocs.org/en/1.0/whisper.html#multi-archive-storage-and-retrieval-behavior)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T08:07:56.800

我认为您的问题是您在 storage-schemas.conf 中指定了两次保留 1 分钟数据的事实。您已指定 1m:7d 和 1m:3y。

但是，您得到的错误看起来石墨源代码中有问题。当我查看代码时，它应该报告一些更有帮助的消息。也许这在较新的版本中已修复（最新的是 0.9.10），否则将其报告为错误可能是个好主意；）

# r - 针对高斯曲线绘制值

> ID：14995803
> 
> 赞同：0
> 
> 时间：2013-02-21T06:19:36.373
> 
> 标签：r, statistics, ggplot2

我是 R 和统计学的新手，仍然理解基本概念。我需要针对高斯曲线创建矩阵列中所有值的图表。下面是代码

```
#Generates a random matrix with 50 columns
randomMatrix1 <- matrix(c(1:30000), ncol=50)

#Base sequence
x  <- seq(15001,30000, 25)

#Normal function using mean and sd of randomMatrix1
y1 <- dnorm(x/1000,mean=mean(randomMatrix1[,50]),sd=sd(randomMatrix1[,50]))

#Getting the actual values in randomMatrix1
y2 <- cbind(randomMatrix1[,50]/1000)

df <- data.frame(x,y1,y2)

require(ggplot2)

ggplot(df, aes(x)) +                    # basic graphical object
geom_line(aes(y=y1), colour="red") +  # first layer
geom_line(aes(y=y2), colour="green")  # second layer 
```

我需要在同一个图上的两个图的输出，但是输出没有缩放，我尝试了一些改变平均值和标准差的组合，但没有任何效果。

我知道这一定是一个非常基本的问题，但是我应该更改哪个参数，以便将两个图缩放并彼此相邻显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T06:56:46.477

我不确定我是否正确理解了这个问题，但这有帮助吗？

```
library(reshape2)
ggplot(melt(df, id="x"), aes(x=x, y=value)) + 
  geom_line() + 
  facet_wrap(~ variable, scale="free_y") 
```

![在此处输入图像描述](../Images/95d3ef8bbbe1a97f26f0e728f23b24c4.png)

# javascript - 动态生成表，然后根据某些条件添加 td？

> ID：14995805
> 
> 赞同：-2
> 
> 时间：2013-02-21T06:19:47.133
> 
> 标签：javascript, jquery, jquery-plugins

我有javascript方法，根据条件我添加表和tr。然后基于其他条件，我调用另一个 javascript 方法，我想每次都添加新的 td 。

我查看了这个链接[http://forum.jquery.com/topic/jquery-insert-td-before-previous-td](http://forum.jquery.com/topic/jquery-insert-td-before-previous-td)

但是这里 td 是在任何其他 td 之前添加的，我想在前一个 td 之后添加一些条件。如果有任何 jquery 方式请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T06:36:25.753

你可以试试这个例子；

```
<table id="mytable">
    <tr>
        <td>cell1</td>
    </tr> 
</table>
</br><a id="clickme">clickme</a>

$("#clickme").click(function() {
    $('<td>cell</td>').appendTo('#mytable tr');
    i++;
}); 
```

当您单击该链接时，它会`<td>`在当前的旁边添加新的`<td>`。

这是一个**[工作现场演示](http://jsfiddle.net/Lg2tm/1/)**。

您可以根据需要自定义此设置。

# coldfusion - 发现无效的 CFML 构造

> ID：14995806
> 
> 赞同：1
> 
> 时间：2013-02-21T06:19:54.597
> 
> 标签：coldfusion, components, coldbox

我有coldfusion8，windows7。我已经在我的coldfusion 的wwwroot 上安装了**ColdBox**版本“coldbox_3.5.3”。当我尝试运行 **`http://localhost:8500/coldbox/samples/`** 时，我遇到了错误-

```

```
Invalid CFML construct found on line 28 at column 22.

ColdFusion was looking at the following text:
{

The CFML compiler was processing:

A script statement beginning with this.flash on line 28, column 9.
A cfscript tag beginning on line 12, column 2.

The error occurred in C:\ColdFusion8\wwwroot\coldbox\system\web\config\Settings.cfc: line 28
Called from C:\ColdFusion8\wwwroot\coldbox\system\web\loader\FrameworkLoader.cfc: line 51
Called from C:\ColdFusion8\wwwroot\coldbox\system\web\Controller.cfc: line 43
Called from C:\ColdFusion8\wwwroot\coldbox\system\Coldbox.cfc: line 69
Called from C:\ColdFusion8\wwwroot\coldbox\samples\Application.cfc: line 35
26 : 
27 :    // flash scope defaults
28 :    this.flash = {
29 :        scope = "session",
30 :        properties = {}, 
```

如何解决这个错误？

谢谢

```

# javascript - Javascript：返回 false 不起作用：即使在我按下取消后，代码也会被执行

> ID：14995809
> 
> 赞同：2
> 
> 时间：2013-02-21T06:20:09.900
> 
> 标签：javascript, asp.net, return

**Javascript**：返回 false 不起作用，即使在我按下取消后代码被执行

我正在尝试用 1 个按钮执行 2 个 javascript。当第二个脚本执行时，即使我单击取消，代码也会被执行。下面是代码。有人能帮帮我吗？

```
<script type="text/javascript" language="javascript">
  var TargetBaseControl = null;
  window.onload = function () {
    try {
      //get target base control.
      TargetBaseControl = document.getElementById('<%= this.GridView1.ClientID %>');
    } catch (err) {
      TargetBaseControl = null;
    }
  }

  function TestCheckBox() {
    if (TargetBaseControl == null) return false;
    //get target child control.
    var TargetChildControl = "chkSelect";
    //get all the control of the type INPUT in the base control.
    var Inputs = TargetBaseControl.getElementsByTagName("input");
    for (var n = 0; n < Inputs.length; ++n)
    if (Inputs[n].type == 'checkbox' && Inputs[n].id.indexOf(TargetChildControl, 0) >= 0 && Inputs[n].checked) return true;
    alert('Please select at least one Request to Close!');
    return false;
  }

  function UpdateConfirmation() {
    if (confirm("Are you sure, you want to close selected request ?") == true) return true;
    else return false;
  }
</script>

<asp:Button ID="btnUpdate" runat="server" 
        OnClick="btnUpdate_Click" Text="Close Request" 
         OnClientClick="var b = TestCheckBox(); if (b) UpdateConfirmation(); return b"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T06:42:21.627

您应该在调用函数时添加 return。

```
<asp:Button ID="btnUpdate" runat="server" 
        OnClick="btnUpdate_Click" Text="Close Request" 
         OnClientClick="if(TestCheckBox()) return UpdateConfirmation();"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T06:37:35.893

您应该使用两个`asp:Button`（一个按钮是不可见的）。例如 -

```
//some code
//
function UpdateConfirmation() {
    if (confirm("Are you sure, you want to close selected request ?") == true) 
    document.getElementById('<%= this.btn.ClientID %>').click();//fire hidden button
    else return false;
  }
</script>

<asp:Button ID="btnUpdate" runat="server" Text="Close Request" 
   OnClientClick="var b = TestCheckBox(); if (b) UpdateConfirmation(); return b" 
   UseSubmitBehavior="false"/>
<asp:Button ID="btn" runat="server" Text="Button" 
    OnClick="btnUpdate_Click" CssClass="VisibleFalse" TabIndex="-1" /> 
```

`btn`是隐藏按钮，`btnUpdate`是主按钮。
不要忘记设置`UseSubmitBehavior`为`false`

**编辑**：使用`document.getElementById('<%= this.btn.ClientID %>').click();`而不是`document.getElementById(ClientIDPrefix + "btn").click();`.

它只是一个触发按钮点击的javascript代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T08:22:46.473

感谢 Shafeeq 和其他所有人

工作代码

```
<script type="text/javascript" language="javascript">

             var TargetBaseControl = null;

             window.onload = function () {
                 try {
                     //get target base control.
                     TargetBaseControl =
       document.getElementById('<%= this.GridView1.ClientID %>');
                 }
                 catch (err) {
                     TargetBaseControl = null;
                 }
             }

             function TestCheckBox() 
             {
                 if (TargetBaseControl == null) return false;

                 //get target child control.
                 var TargetChildControl = "chkSelect";

                 //get all the control of the type INPUT in the base control.
                 var Inputs = TargetBaseControl.getElementsByTagName("input");

                 for (var n = 0; n < Inputs.length; ++n)
                     if (Inputs[n].type == 'checkbox' &&
        Inputs[n].id.indexOf(TargetChildControl, 0) >= 0 &&
        Inputs[n].checked)
                         return true;

                 alert('Please select at least one Request to Close!');
                 return false;
             }

          function UpdateConfirmation() {
              if (confirm("Are you sure, you want to close selected request ?") == true)

                     return true;

                 else return false;

             } 
```

```
<asp:Button ID="btnUpdate" runat="server" 
        Text="Close Request" 
        OnClick="btnUpdate_Click" 
OnClientClick="var b = TestCheckBox(); if (b) return UpdateConfirmation(); return b"/> 
```

# android - 相机和颜色识别

> ID：14995812
> 
> 赞同：0
> 
> 时间：2013-02-21T06:20:27.510
> 
> 标签：android, colors, android-camera

我正在尝试编写一个应用程序，告诉用户在相机预览中放置的任何颜色。预览的一小部分被标记，并且当该部分指向一种颜色时。该应用程序会实时告诉用户是什么颜色。我已经编写了相机预览类，但现在我只需要知道如何分析相机看到的内容。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T06:55:12.240

只需获取当时的位图图像并使用 bitmap.getpixel(int x,int y) 来获取颜色。

# vb.net - 我在单击按钮的代码部分收到 System.NullReferenceException

> ID：14995818
> 
> 赞同：0
> 
> 时间：2013-02-21T06:20:47.277
> 
> 标签：vb.net, visual-studio-2010

我在单击按钮的代码部分收到 System.NullReferenceException。我有问题`WebBrowser1.Document.GetElementById("Giriş Yap").InvokeMember("click")`。同时我不是编码员，我在 web.xml 中找到了该代码。我想做自动 facebook 登录代码。

```
Public Class Form1

Private Sub Button1_Click(ByVal sender As System.Object, 
                          ByVal e As System.EventArgs) Handles Button1.Click
    WebBrowser1.Navigate("https://www.facebook.com/")
End Sub

Private Sub Button2_Click(ByVal sender As System.Object, 
                          ByVal e As System.EventArgs) Handles Button2.Click
    WebBrowser1.Document.GetElementById("email").SetAttribute("value", TextBox1.Text)
    WebBrowser1.Document.GetElementById("pass").SetAttribute("value", TextBox2.Text)

    WebBrowser1.Document.GetElementById("Giriş Yap").InvokeMember("click")
End Sub

End Class 
```

# linux - 从用户空间程序获取动态次要编号

> ID：14995826
> 
> 赞同：0
> 
> 时间：2013-02-21T06:21:21.607
> 
> 标签：linux, linux-device-driver

我已经开发了简单的字符驱动程序和一个简单的用户空间应用程序。加载驱动程序后，我可以使用**/dev/xxx0**（示例）访问它。因此，当我下次加载驱动程序时，我可以看到**/dev/xxx0**到**/dev/xxx1**，所以每次加载驱动程序时我都需要在用户程序**/dev/xxx0**到**/dev/xxx1**中进行更改。用户程序有什么方法可以自动获取它。

# php - str_replace 换行？

> ID：14995828
> 
> 赞同：4
> 
> 时间：2013-02-21T06:21:25.063
> 
> 标签：php

我正在尝试用换行符替换正则表达式。现在我正在尝试这个不起作用：

```
$string = str_replace(';', '\n', $string); 
```

我需要确保分号与 '\n' 换行符完全相同，我该如何完成？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-21T06:23:28.493

使用双引号，否则`\n`不解析。[文档](http://php.net/string)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-21T06:30:36.820

尝试这个 ：

str_replace ：

```
$string = str_replace(';', "\n", $string);
echo $string; 
```

preg_replace ：

```
$string  = 'sdasdasd;asdasd;asdasd';

$string1 = preg_replace("/;/","\n",$string);
echo nl2br($string1); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T06:24:25.997

`$string = str_replace(';', "\r\n", $string);`

# c# - 将数据表保存为文本并稍后查找

> ID：14995831
> 
> 赞同：0
> 
> 时间：2013-02-21T06:21:32.427
> 
> 标签：c#, arrays, datatable, lookup

我有一个关于 C# 的作业，要计算一些东西，保存在数据库（或文本文件）中并稍后查找。这是我的代码。我试过了，但它似乎不起作用。谁能帮我检查一下？太感谢了。

```
private void button1_Click(object sender, EventArgs e)
{
    int l0 = 210;
    int l1 = 440;
    int l2 = 330;
    int l3 = 435;
    DataTable workspace = new DataTable();
    workspace.Columns.Add("Xd", typeof(double));
    workspace.Columns.Add("Yd", typeof(double));
    workspace.Columns.Add("Zd", typeof(double));
    workspace.Columns.Add("Th1", typeof(double));
    workspace.Columns.Add("Th2", typeof(double));
    workspace.Columns.Add("Th3", typeof(double));
    workspace.Columns.Add("Th4", typeof(double));
    workspace.Columns.Add("Th5", typeof(double));
    workspace.Columns.Add("Th6", typeof(double));
    workspace.Columns.Add("Th7", typeof(double));

    int th1 = 0, th2 = 0, th3 = -90, th4 = -45, th5 = -130, th6 = -130, th7 = -45;
    while (th1 <= 180)
    {
        double t1 = th1 * Math.PI / 180;
        while (th2 <= 180)
        {
            double t2 = th1 * Math.PI / 180;
            while (th3 <= 90)
            {
                double t3 = th3 * Math.PI / 180;
                while (th4 <= 45)
                {
                    double t4 = th4 * Math.PI / 180;
                    while (th5 <= 130)
                    {
                        double t5 = th5 * Math.PI / 180;
                        while (th6 <= 130)
                        {
                            double t6 = th6 * Math.PI / 180;
                            while (th7 <= 45)
                            {
                                double t7 = th7 * Math.PI / 180;
                                double Xd = l3 * (Math.Cos(t6) * (Math.Sin(t4) * (Math.Sin(t1) * Math.Sin(t3) + Math.Cos(t1) * Math.Cos(t2) * Math.Cos(t3)) + Math.Cos(t1) * Math.Cos(t4) * Math.Sin(t2)) + Math.Sin(t6) * (Math.Cos(t5) * (Math.Cos(t4) * (Math.Sin(t1) * Math.Sin(t3) + Math.Cos(t1) * Math.Cos(t2) * Math.Cos(t3)) - Math.Cos(t1) * Math.Sin(t2) * Math.Sin(t4)) + Math.Sin(t5) * (Math.Cos(t3) * Math.Sin(t1) - Math.Cos(t1) * Math.Cos(t2) * Math.Sin(t3)))) + l0 * Math.Cos(t1) + l2 * (Math.Sin(t4) * (Math.Sin(t1) * Math.Sin(t3) + Math.Cos(t1) * Math.Cos(t2) * Math.Cos(t3)) + Math.Cos(t1) * Math.Cos(t4) * Math.Sin(t2)) + l1 * Math.Cos(t1) * Math.Sin(t2);
                                double Yd = l0 * Math.Sin(t1) - l3 * (Math.Cos(t6) * (Math.Sin(t4) * (Math.Cos(t1) * Math.Sin(t3) - Math.Cos(t2) * Math.Cos(t3) * Math.Sin(t1)) - Math.Cos(t4) * Math.Sin(t1) * Math.Sin(t2)) + Math.Sin(t6) * (Math.Cos(t5) * (Math.Cos(t4) * (Math.Cos(t1) * Math.Sin(t3) - Math.Cos(t2) * Math.Cos(t3) * Math.Sin(t1)) + Math.Sin(t1) * Math.Sin(t2) * Math.Sin(t4)) + Math.Sin(t5) * (Math.Cos(t1) * Math.Cos(t3) + Math.Cos(t2) * Math.Sin(t1) * Math.Sin(t3)))) - l2 * (Math.Sin(t4) * (Math.Cos(t1) * Math.Sin(t3) - Math.Cos(t2) * Math.Cos(t3) * Math.Sin(t1)) - Math.Cos(t4) * Math.Sin(t1) * Math.Sin(t2)) + l1 * Math.Sin(t1) * Math.Sin(t2);
                                double Zd = l3 * (Math.Sin(t6) * (Math.Cos(t5) * (Math.Cos(t2) * Math.Sin(t4) + Math.Cos(t3) * Math.Cos(t4) * Math.Sin(t2)) - Math.Sin(t2) * Math.Sin(t3) * Math.Sin(t5)) - Math.Cos(t6) * (Math.Cos(t2) * Math.Cos(t4) - Math.Cos(t3) * Math.Sin(t2) * Math.Sin(t4))) - l2 * (Math.Cos(t2) * Math.Cos(t4) - Math.Cos(t3) * Math.Sin(t2) * Math.Sin(t4)) - l1 * Math.Cos(t2);

                                textBoxX.Text = Xd.ToString();
                                textBoxY.Text = Yd.ToString();
                                textBoxZ.Text = Zd.ToString();
                                workspace.Rows.Add(Xd, Yd, Zd, t1, t2, t3, t4, t5, t6, t7);
                                th7 = th7 + 5;
                            }
                            th6 = th6 + 5;
                        }
                        th5 = th5 + 5;
                    }
                    th4 = th4 + 5;
                }
                th3 = th3 + 5;
            }
            th2 = th2 + 5;
        }
        th1 = th1 + 5;
    }

} 
```

* * *

当我如下运行应用程序时，它有一个问题：*XML 文档中存在错误 (12504158, 75)。*我做错什么了吗？错误是什么意思？再次感谢你。

```
 //Reading saved data
        var dtDeserializer = new XmlSerializer(typeof(DataTable));
        var data = (DataTable)dtDeserializer.Deserialize(File.Open("out.xml", FileMode.Open));

        DataRow[] result = data.Select("Xd= '100' AND Yd = '1000' AND Zd = '0'");
        foreach (DataRow row in result)
        {
            Console.WriteLine("{0}, {1}, {2}, {3}, {4}, {5}, {6}, {7} {8}, {9}", row[0], row[1], row[2], row[3], row[4], row[5], row[6], row[7], row[8], row[9]);
        }

        Console.ReadLine(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:39:03.580

只需序列化/反序列化您的数据表，这里有一些示例代码：

```
 //Saving the DataTable
        workspace.TableName = "SomeName"; //A name is required in order to save the datable
        var dtSerializer = new XmlSerializer(typeof(DataTable));
        dtSerializer.Serialize(File.Create("out.xml"), workspace);

        //Reading saved data
        var dtDeserializer = new XmlSerializer(typeof(DataTable));
        var data = (DataTable)dtDeserializer.Deserialize(File.Open("out.xml", FileMode.Open)); 
```

# scala - 使用 Akka 以编程方式获取临时端口

> ID：14995834
> 
> 赞同：3
> 
> 时间：2013-02-21T06:22:02.707
> 
> 标签：scala, akka

如果我在 Akka 中配置 ActorSystem 以使用临时 tcp 端口（更具体地说，我将 http 端口配置为 0），一旦 ActorSystem 启动，有没有办法以编程方式获取此端口？

任何尝试使用actorOf 创建一个actor，然后打印出actor 路径都会显示一个本地引用的actor。此外，我尝试在事件流上注册 RemoteLifeCycleEvent 侦听器，但这只能在服务器启动后完成，因此会错过 RemoteServerStarted 事件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T18:37:16.850

干得好：

```
class MyExtensionImpl(system: ExtendedActorSystem) extends Extension {
  def address = system.provider match {
    case rarp: RemoteActorRefProvider => rarp.transport.address
    case _ => system.provider.rootPath.address
  }
}

object MyExtension extends ExtensionKey[MyExtensionImpl]

val address = MyExtension(system).address
val port = address.port.getOrElse(sys.error("not a remote actor system")) 
```

（注意此代码适用于 Akka 2.0.x。在 2.1.x 中，您可以避免`RemoteActorRefProvider`使用`system.provider.getDefaultAddress`）

# memory - 使用 boundsChecker 检测内存泄漏

> ID：14995837
> 
> 赞同：0
> 
> 时间：2013-02-21T06:22:16.310
> 
> 标签：memory, detection, using, bounds-checker

我正在使用 boundsChecker 检测我的源代码以进行内存检测，但是当我使用本机 c/c++ 检测管理器的错误检测类型检测构建它时，我遇到了构建错误。当我看到输出窗口时，它显示 NM2002: Inline expansion (/Ob) used during instrumentation this error..

但是当我选择仪器类型作为性能或覆盖分析时，源正在成功构建，但是当我运行测试用例检查内存泄漏时，它没有显示任何内存泄漏..有人可以帮我解决这个问题...还请建议我哪种类型的我应该使用仪器来检测内存泄漏..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:07:34.597

With regards to detecting memory leaks, you need to activate the "Memory Tracking" subsystem. It is activated by default. However, it does not track memory allocated by managed C/C++, only by unmanaged.

Would you mind sharing your test case? I am one of the developers maintaining the product, and if necessary we can arrange for an NDA agreement.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:12:06.603

/Obn 内联确实会导致检测代码错误，因为我们在两次编译之间检测代码。代码会进行第一次编译，一些代码可能会被标记为可能的内联。然后，我们将所有工具添加到中间语言中。然后进行最后一次编译，如果他们尝试使用插桩内联代码，可能会发生坏事。这就是我们尽可能禁用内联并在需要时生成错误的原因。

你用的是哪个VS版本？哪个版本的 Devpartner？

您将需要使用错误检测进行编译以捕获内存泄漏。我建议在关闭内联的情况下进行调试构建编译。

编辑我刚刚使用 VS2008 和 VS2010 以及当前的 11.1 候选版本进行了一些测试

我没有收到错误，而是

1> Instrumentation 正在添加 (/Ob0) 以关闭内联 1>cl：命令行警告 D9025：用 '/Ob0' 覆盖 '/Ob1'

警告 1 警告 D9025：用 '/Ob0' 覆盖 '/Ob1' e:\cust\Anthony\Test\Test\cl 测试 警告 2 警告 D9025：用 '/Ob0' 覆盖 '/Ob1' e:\cust\Anthony\测试\测试\cl 测试

这些消息告诉我们正在禁用内联。如果您已启用将警告视为错误，您只会将此视为错误。

# c# - 如何从绑定到数据表的列表框中检索所选项目的 ID？

> ID：14995844
> 
> 赞同：0
> 
> 时间：2013-02-21T06:22:52.527
> 
> 标签：c#, sql-server

我有一个绑定到`Datable`[ `employee`] 的列表框，其中列表框显示员工姓名。

如何从数据库中获取所选项目的`id`喜欢？`employee_id`

这是我的部分，如果代码

**XAML-**

```
ListBox ItemsSource="{Binding}" DisplayMemberPath="employee_name" HorizontalAlignment="Left" Margin="16.362,108.171,0,44.541" Name="lstbxEmloyee" Width="333.603" SelectionChanged="lstbxEmployee_SelectionChanged" 
```

**。CS**

```
EmployeeData _employeeData = new EmployeeData();

_employeeData.GetEmployeeName();

lstbxEmloyee.ItemsSource = _employeeData._dataTable.DefaultView; 
```

我想从列表框中获取`employee_id`所选内容`employee_name`

请帮帮我

谢谢你....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T08:43:47.680

你可以试试这个：

```
 private void Window_Loaded(object sender, RoutedEventArgs e)
    {
         // you can bind your data as per your requirement
        lstbxEmloyee.ItemsSource = GetTable().DefaultView; 
    }

    private void lstbxEmloyee_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
      DataRow dr=((DataRowView) (lstbxEmloyee.SelectedItem)).Row;
      int Emp_id = Convert.ToInt32(dr["employee_ID"]);
      MessageBox.Show(Emp_id.ToString());
    }

    DataTable GetTable()
    {
        DataTable table = new DataTable();
        table.Columns.Add("employee_ID", typeof(int));
        table.Columns.Add("employee_name", typeof(string));        

        table.Rows.Add(1,"David");
        table.Rows.Add(2,"Sam");
        table.Rows.Add(3,"Christoff");
        table.Rows.Add(4, "Janet");
        table.Rows.Add(5, "Melanie");

        return table;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T06:28:40.380

是的，我做到了。我为我的问题找到了解决方案我在代码中进行了如下更改 **XAML-** ListBox ItemsSource="{Binding}" DisplayMemberPath="employee_name" **SelectedValuePath="employee_id** " Horizo​​ntalAlignment="Left" Margin="16.362,108.171 ,0,44.541" 名称="lstbxEmloyee" 宽度="333.603" SelectionChanged="lstbxEmployee_SelectionChanged"

**.cs** 字符串 _selectedProject = lstbxProjects.SelectedItem.ToString();

它在“SelectedValuePath”和“SelectedValue”之间绑定，其中 - SelectedValuePath - 引用数据表 SelectedValue 中的哪一列 - 从

# asp.net - 数据库结果中日期时间的 Gridview 空值对象不能从 DBNULL 转换为其他类型错误

> ID：14995845
> 
> 赞同：0
> 
> 时间：2013-02-21T06:23:21.360
> 
> 标签：asp.net, sql-server, datetime, gridview, dbnull

我正在使用通过 sqldatasource 连接到我的数据库的 gridview 控件。我可以直接从此 gridview 进行更新和删除。

当我编辑日期字段并删除内容时，它不是将 null 写入数据库，而是将数据库中的值更改为 1900-01-01，如果我手动将 null 写入数据库，并在其上使用 gridview 的编辑按钮其他一些单元格的行，下面是错误。

> 对象不能从 DBNull 转换为其他类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T09:46:20.000

首先检查数据库列是否可以为空？

您还没有提到您使用的是哪个版本的 asp.net 框架。

对于 .net framework >= 3.5，您可以使用可为空的数据类型，即绑定应该使用日期时间？字段而不是日期时间。您提到的错误是由于您试图将空值绑定到 datetime 类型的变量。使用日期时间？并且您的错误**“对象无法从 DBNull 转换为其他类型”**将得到解决。或者您可以在 itemdatabound 事件中执行以下操作：

```
yourTextBox.value = string.empty
if(((DataRow)e.Item.DataItem)["YourDateField"] != dbnull.value)
{
   yourTextBox.value = ((DataRowView)e.Item.DataItem)["YourDateField"] .toString();
} 
```

您还没有提到您为数据绑定/数据保存所做的工作。在数据保存代码中执行以下操作：

```
datetime? saveDate = null;
if(!string.isnullorempty( yourTextBox.value))
    {
     saveDate = converto.datetime(  yourTextBox.value);

     }

//Use the saveDate for the saving. 
```

# html5-canvas - 如何在 kineticjs 中将 Zindex 用于不同的层？

> ID：14995848
> 
> 赞同：1
> 
> 时间：2013-02-21T06:23:28.830
> 
> 标签：html5-canvas, kineticjs

好吧，我一直在尝试这个小应用程序，我在其中使用两个不同的图层来显示对象。一个用于背景（整个舞台），另一个用于显示在其上的对象。所以当我在“单击”时更改背景时，我的图层会在之前清除绘制一个新的，它被添加到舞台但与另一层重叠。所以我需要在不影响另一层的情况下更改背景。我们不能使用“setZIndex”来处理图层或其他方式......！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T14:10:34.310

添加到舞台后，您可以使用 setZIndex。

如果不属于阶段，则无法设置 zIndex。原因是layer需要找到parent，也就是stage。

因此，首先将图层添加到舞台，然后设置 zIndex。

[http://jsfiddle.net/bighostkim/QTu8K/](http://jsfiddle.net/bighostkim/QTu8K/)

```
stage.add(layer1);
stage.add(layer2);

layer1.setZIndex(1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-23T05:35:53.643

我试图使用：

```
stage.add(menuLayer);
menuLayer.setZIndex(10);

stage.add(backgroundLayer); 
```

在我画完之后我就`backgroundLayer`在前面了。`menuLayer``backgroundLayer`

我的解决方法是`backgroundLayer`在添加到舞台后设置 Z 索引：

```
stage.add(menuLayer);
menuLayer.setZIndex(10);

stage.add(backgroundLayer);
backgroundLayer.setZIndex(0); 
```

突然菜单正确地出现在背景前面！

# android - 在 Android 服务中启动的新线程中的 Handler 出现空指针异常

> ID：14995860
> 
> 赞同：0
> 
> 时间：2013-02-21T06:24:41.660
> 
> 标签：android, service, handler, android-context

我无法从我的 android Service 类中打印出简单的 Toast 消息：

```
 @Override
public void run() {
    handler.post(new Runnable() {
        @Override
        public void run() {
            Toast.makeText(context, "thread is running", Toast.LENGTH_LONG).show();
        }
    }); 
  } 
```

此运行方法位于实现`Runnable`该类的 Service 内部，因此我正在使用`handler.post`，但是无法在内部`run()`方法内部进行任何工作。我认为这`handler.post`会发布会起作用，有什么问题？

其余代码和 logcat 打印输出如下；

```
public class LotteryServer extends Service implements Runnable {

            Handler handler = new Handler();
            Context context = this;

            @Override
            public int onStartCommand(Intent intent, int flags, int startId){
                 super.onStartCommand(intent, startId, startId);
                 Toast.makeText(context, "My Service Started", Toast.LENGTH_LONG).show();
                 return START_STICKY;
            }

            @Override
            public IBinder onBind(Intent arg0) {
                 // TODO Auto-generated method stub
                 return null;
            }
            @Override   
            public void onDestroy() {
                super.onDestroy();
                Toast.makeText(context, "My Service Stopped", Toast.LENGTH_LONG).show();
            }
            @Override
            public void run() {
            handler.post(new Runnable() {
                     @Override
                     public void run() {
                          Toast.makeText(context, "thread is running",     Toast.LENGTH_LONG).show();
                     }
            }); 

    }
} 
```

日志猫；

```
02-21 15:09:33.279: E/AndroidRuntime(24038): FATAL EXCEPTION: main
02-21 15:09:33.279: E/AndroidRuntime(24038): java.lang.NullPointerException
02-21 15:09:33.279: E/AndroidRuntime(24038): at android.content.ContextWrapper.getResources(ContextWrapper.java:81)
02-21 15:09:33.279: E/AndroidRuntime(24038):    at android.widget.Toast.<init>(Toast.java:92)
02-21 15:09:33.279: E/AndroidRuntime(24038):    at android.widget.Toast.makeText(Toast.java:233)
02-21 15:09:33.279: E/AndroidRuntime(24038):    at com.lottery.clientplayer.LotteryServer$1.run(LotteryServer.java:44)
02-21 15:09:33.279: E/AndroidRuntime(24038):    at android.os.Handler.handleCallback(Handler.java:605)
02-21 15:09:33.279: E/AndroidRuntime(24038):    at android.os.Handler.dispatchMessage(Handler.java:92)
02-21 15:09:33.279: E/AndroidRuntime(24038):    at android.os.Looper.loop(Looper.java:137)
02-21 15:09:33.279: E/AndroidRuntime(24038):    at android.app.ActivityThread.main(ActivityThread.java:4699)
02-21 15:09:33.279: E/AndroidRuntime(24038):    at java.lang.reflect.Method.invokeNative(Native Method)
02-21 15:09:33.279: E/AndroidRuntime(24038):    at java.lang.reflect.Method.invoke(Method.java:511)
02-21 15:09:33.279: E/AndroidRuntime(24038):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
02-21 15:09:33.279: E/AndroidRuntime(24038):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
02-21 15:09:33.279: E/AndroidRuntime(24038):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T08:35:51.987

改变这个

```
Toast.makeText(context, "thread is running", Toast.LENGTH_LONG).show(); 
```

至

```
Toast.makeText(LotteryServer.this, "thread is running", Toast.LENGTH_LONG).show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T06:29:55.553

```
Toast.makeText(context, "thread is running", Toast.LENGTH_LONG).show(); 
```

取而代之的是上下文使用 getApplicationContxt() 希望这可以工作..因为这将获得整个上下文的范围。试试看

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T06:37:18.673

如果不起作用，请使用 runOnUIThread(Runnable)，试试这个

```
Handler mHandler = new Handler();
final Runnable mUpdateResults = new Runnable() {
public void run() {
    Toast(this, message, duration).show();
}

new Thread() {
 public void run() {
    mHandler.post(mUpdateResults);
 }
}.start(); 
```

# asp.net - 如何使用vb代码在asp.net中设置div的大小

> ID：14995861
> 
> 赞同：2
> 
> 时间：2013-02-21T06:24:47.463
> 
> 标签：asp.net, vb.net, html

在 HTML 中设置 div 的大小：

```
height: 1000px; 
```

是否可以使用 vb 代码在 asp.net 中设置 div 的大小？我的意思是如何在 vb 代码中添加标记语言

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T06:30:08.107

首先，如果你想`Div`从你的代码访问你必须确保它具有`runat="server"`和`ID="SomeID"`属性集，然后你可以像任何其他 Asp.Net 控件一样从后面的代码访问它。

标记：

```
<div runat="server"  id="myDiv"></div> 
```

VB.Net

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        myDiv.Attributes.Add("style", "height:1000px")
End Sub 
```

# c# - 如何在 C# ASP.Net 中使用 AutoGenerateColumns="true" 编辑 GridView 的值？

> ID：14995866
> 
> 赞同：1
> 
> 时间：2013-02-21T06:24:53.547
> 
> 标签：c#, asp.net

我有一个简单`Gridview`的 with `AutoGeneratecolumns=true`，它根据要求在每次执行时绑定来自不同表的数据。每个表上的列数不同，这就是我不使用“ `asp:TemplateField`”或“ `asp:BoundField`”的原因。

有什么方法可以编辑`GridView`列吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T06:47:02.573

您可以使用`AutogenerateEditbutton`属性自动生成编辑按钮，或者您可以手动添加按钮并编辑网格视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T06:40:18.350

Gridview 具有属性`AutoGenerateDeleteButton`，`AutoGenerateEditButton`您可以设置为 true。尝试使用它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T07:11:55.677

asp.net gridview 在浏览器中呈现为 html 表，我认为您可以使用 Jquery 从表中选择每个单元格，然后更新：
[使用 jquery 获取表单元格值](https://stackoverflow.com/questions/376081/how-to-get-a-table-cell-value-using-jquery)

# c - sizeof 在可变长度数组上的行为（仅限 C）

> ID：14995870
> 
> 赞同：19
> 
> 时间：2013-02-21T06:25:08.673
> 
> 标签：c, sizeof

`sizeof()`我的问题是，当传递的参数是~~动态数组~~可变长度数组时，其行为究竟如何。

让我们考虑一个例子：

```
int fun(int num_of_chars)
{
    char name_arr[num_of_chars] = {0};

    /* Do something*/

    return sizeof(name_arr);
} 
```

在这个例子中，很明显返回值不是编译时间常数。因为大小取决于`num_of_chars`.

来自 C99 标准（6.5.3.4）的引用：

> 运算符产生其`sizeof`操作数的大小（以字节为单位），它可以是表达式或带括号的类型名称。大小由操作数的类型决定。结果是一个整数。如果操作数的类型是变长数组类型，则计算操作数；否则，不计算操作数，结果是一个整数常量。

我可以从 [....操作数被评估....] 中理解的是，当传递的参数`sizeof()`是~~动态数组~~可变长度数组时，**`sizeof()`“表现得像”一个函数而不是一个运算符**。

我的理解对吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-21T06:31:26.683

它仍然充当运算符。Cast 也是运算符，并且还评估它的参数，`*`or也是如此`&`。作为一个操作符是一个句法范畴。这不会改变。

重要的区别是它表现为**表达式**，而在其他情况下它表现为**常量**。

* * *

更新：我在下面评论说我不明白为什么评估会有所不同，但现在我意识到有*两种*方法可以用可变长度数组编写 sizeof。您可以传递声明为可变长度数组的变量：

```
int a[x];
sizeof(a) 
```

在这种情况下，评估`a`确实没有区别。但您也可以使用*类型*作为参数，即

```
sizeof(int[x]) 
```

在这种情况下，结果是`x * sizeof(int)`并且`x`必须被评估。我想这就是规范提到它的原因。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-21T06:45:02.983

> 我的问题是当传递的参数是动态数组时 sizeof() 的行为究竟如何。

1.  好吧，您的意思是“可变长度数组”（VLA）。

2.  它的行为几乎完全相同：它以字节为单位返回数组的大小。

> sizeof() '表现得像'一个函数，而不是一个运算符。

Nah, it never was a function. The only thing that changes is that if used on VLAs, this operator doesn't yield a compile-time constant, otherwise it does.

# java - 如何在 Java-mysql 中验证用户名和密码？

> ID：14995873
> 
> 赞同：4
> 
> 时间：2013-02-21T06:25:22.183
> 
> 标签：java, passwords

如何以最正确的方式验证用户输入数据库的用户名和密码？

```
In c++, we used to verify by using if-else:
    if((user == "username")&&(pass == "password")){
             cout<<"You are now logon!";
    } 
```

在 java-mysql 中，我不确定我是否走在正确的轨道上：

登录按钮

```
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
        // TODO add your handling code here:

        user = jTextField1.getText();
        pass = jPasswordField1.getPassword();
        login();
} 
```

方法/功能

```
private void login() {

        try {
                if (user != null) {
                sql = "Select * from users_table Where username='" + user + "'";
                rs = stmt.executeQuery(sql);

                rs.next();
                username = rs.getString("username");
                password = rs.getString("password");

            }
        } 
    catch (SQLException err) {
            JOptionPane.showMessageDialog(this, err.getMessage());
        }

} 
```

如果用户输入的用户名和密码与数据库中的用户名和密码匹配，那么他将被引导到一个新的 jFrame 否则将弹出消息对话框，提示用户名或密码无效。有人可以帮我写代码吗，我不知道如何在 mysql 中使用 if-else 语句；

谢谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T06:31:09.677

*   始终将哈希加密密码存储在数据库中，有关加密密码的更多详细信息，请参阅[JASYPT](http://www.jasypt.org/encrypting-passwords.html)
*   对用户输入的密码进行加密，比较两个加密后的密码
*   查询数据库时使用[参数化查询](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T06:50:52.403

实现以下代码：

```
private void login() {
    try {
        if (user != null && pass != null) {
            String sql = "Select * from users_table Where username='" + user + "' and password='" + pass + "'";
            rs = stmt.executeQuery(sql);
            if (rs.next()) {
                //in this case enter when at least one result comes it means user is valid
            } else {
                //in this case enter when  result size is zero  it means user is invalid
            }
        }

        // You can also validate user by result size if its comes zero user is invalid else user is valid

    } catch (SQLException err) {
        JOptionPane.showMessageDialog(this, err.getMessage());
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T06:40:41.283

你不必再对 mySQL 做任何事情了。您已经拥有凭据。一个例子：

```
if ((user.equals(username)) && (pass.equals(password))) {
   JFrame newFrame = new JFrame();
} else {
   JOptionPane.showMessageDialog(null, "alert", "alert", JOptionPane.ERROR_MESSAGE); 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-16T16:28:09.417

将准备好的语句与 DButils 之类的库一起使用，这将大大简化您的工作。

此外，不要使用替换传递参数，例如`select name from members where code =?`. 如果您有许多参数，请创建一个对象数组并将它们传递到一个对象数组中，例如`Objects[] parms = {code1,code2}`.

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-04-19T13:28:58.840

```
if (username.length()>0 && password.length()>0)
{
    String query = "Select * from adminlogin Where Username='" + username + "' and Password='" + password + "'";

    rs = sta.executeQuery(query);

   if (rs.next()) 
   {

        home hme=new home();
        this.setVisible(false);
        hme.setVisible(true);
   } 
   else 
   {
       JOptionPane.showMessageDialog(null,"username and password are wrong ");
   }
}
else
{
      JOptionPane.showMessageDialog(null,"please field username and password ");
} 
```

# html - 链接在标题中不起作用

> ID：14995875
> 
> 赞同：1
> 
> 时间：2013-02-21T06:25:46.663
> 
> 标签：html, css

当我尝试在横幅顶部链接时不起作用。我的事情 Div z-index 有问题。但我无法得到它。任何人都可以帮我解决这个问题。我已附上与此相关的内容。请使用以下链接查看该网站。

```
http://10.8.12.41/srilanka/

     #header{

    color: #CFCFCF;
    font-weight: 600;
    /*border-bottom: 4px solid #84AE03;*/
    background:#fff;
    width: 100%;
    z-index: 10;

      }
    #banner{
             height: 100%;
    margin: 0px auto 0;
    position: relative;
    width: 1000px;
    z-index: 1;}
    #topnavbar{
        height: 26px;
   /* margin:-5px 102px 0 0;*/

    position: relative;
   background:url(../images/top_lin.png) repeat-x;
    float:left;
    width:100%;
    float:right;

    }
    #topnavmenu{
        float:right;
        width:300px;
        padding:3px;
    }
    #topnavmenu a{
         color: #FFFFFF;
    display: inline-block;
    font-family: 'Open Sans Condensed',sans-serif;
    font-size: 11px;
    font-weight: 600;
    /*line-height: 35px;*/
    padding: 0;
    text-align: center;
    text-decoration: none;
    width: auto;
    z-index:10px;
    }
#apDiv2 {
    height: 100%;
    margin:0px auto;
    position: relative;
    width: 1000px;
    z-index: 1;
    background:url(../images/menubg.png) repeat;
    background-color:#00247d;

}

Html
------------------------------------------------

<div id="topnavbar">
<div id="topnavmenu">
<a href="#">CheckmyTrip</a> |<a href="#">Baggage</a> | <a href="#">Travel Tips</a>
</div>
</div>

<div id="banner">

<img src="images/Banner.png" />

</div>

<div id="apDiv2">
<!-- Start css3menu.com BODY section id=2 -->
<ul id="css3menu2" class="topmenu">

    <li class="toplast"><a href="contactus.php" style="height:32px;line-height:32px;"><img src="index_files/css3menu2/contact.png" alt=""/>Contact Us</a></li>
</ul>
<p style="display:none"><a href="http://css3menu.com/">Pure CSS Dropdown Menus Css3Menu.com</a></p>
<!-- End css3menu.com BODY section -->

<p style="display:none"><a href="http://css3menu.com/">Pure CSS Dropdown Menus Css3Menu.com</a></p>
<!-- End css3menu.com BODY section -->

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T08:59:36.463

`z-index`on`#banner`是你的大部分问题。

[http://jsfiddle.net/JwPjA/3/](http://jsfiddle.net/JwPjA/3/)

```
 #header {
     color: #CFCFCF;
     font-weight: 600;
     /*border-bottom: 4px solid #84AE03;*/
     background:#fff;
     width: 100%;
 }
 #banner {
     height: 100%;
     margin: 0px auto 0;
     position: relative;
     width: 1000px;
     z-index: -1;
 }
 #topnavbar {
     height: 26px;
     /* margin:-5px 102px 0 0;*/
     position: relative;
     background:url(http://placehold.it/26x26) repeat-x;
     width:100%;
     float:right;
 }
 #topnavmenu {
     float:right;
     width:300px;
     padding:3px;
 }
 #topnavmenu a {
     color: #FFFFFF;
     display: inline-block;
     font-family:'Open Sans Condensed', sans-serif;
     font-size: 11px;
     font-weight: 600;
     /*line-height: 35px;*/
     padding: 0;
     text-align: center;
     text-decoration: none;
     width: auto;
     z-index:10px;
 }
 #apDiv2 {
     height: 100%;
     margin:0px auto;
     position: relative;
     width: 1000px;
     z-index: 1;
     background:url(http://placehold.it/300x300) repeat;
     background-color:#00247d;
 } 
```

另一方面，我看到你正在学习，因为这段代码有很多问题。你做得很好，但这里有一些建议。首先，`float: left`和`float:right`在同一个班级没有意义。然后你也是浮动元素，在一些地方不需要它。`position`是一种高级属性，`z-index`如果`z-index`没有它就无法工作`position`，它可以而且通常应该与以下至少一个一起使用：`top` `left` `right` `bottom`. 如果你认为你需要它，我只会使用它。我认为您的布局原样都可以在没有`position`.

这里网站上的很多人不喜欢[W3Schools](http://w3schools.com/)，但它们非常适合像您这样的初学者。

继续努力，你会变得更好。

# c++ - IDE 使用 Visual Studio，但跨平台配置使用 CMake

> ID：14995877
> 
> 赞同：12
> 
> 时间：2013-02-21T06:25:54.323
> 
> 标签：c++, visual-studio, cmake

我发现了很多与我要问的问题类似的问题，但它们似乎并没有完全帮助我理解如何做我想做的事情，假设它甚至是可行的。

我非常喜欢 Visual Studio，我想将它用作 C++ 项目的开发环境，但如果我愿意，我也希望能够在我的双引导 Linux 系统上构建我的任何项目。我还希望能够将我的头文件和源文件组织到共享驱动器上的特定目录结构中。我想使用 CMake 来配置项目以使用 Linux 上的 Make 或 Windows 上的 Visual Studio 来构建它。

那么是否可以在 Visual Studio 2012 Pro 中维护一个项目以利用其 IntelliSense 和编译以便快速编写代码和测试它，然后轻松地将源文件作为 CMake 配置的一部分放在不同的目录中（我图无论如何我仍然需要维护我的 CMake .txt 文件）？

每次添加或修改代码时，我都可以将源代码从项目目录复制到 CMake 文件夹，然后更新我的 CMake .txt 文件，但这似乎很耗时。

我知道有一个转换器可以将解决方案转换为 CMake 文件。那是我最好的选择吗？如果是这样，它运作良好吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T19:57:35.107

## 我对你问题的最佳回答：

虽然我不能推荐这个工具，因为我没有使用它，但它似乎是最接近你正在寻找的东西。

[http://sourceforge.net/projects/vcproj2cmake/](http://sourceforge.net/projects/vcproj2cmake/)

它需要在您的计算机上安装[Ruby](http://en.wikipedia.org/wiki/Ruby_%28programming_language%29)运行时，但它会根据您的 Visual Studio 项目生成[CMakeLists.txt文件。](https://cmake.org/cmake/help/latest/manual/cmake-language.7.html#organization)

我会谨慎对待这一点，因为在转换中可能会丢失一些细微的 CMake 细微差别，但它有几个好评，并且肯定会使过程更容易，即使在检查之前涉及一些手动步骤in（验证 CMake 脚本是否正确）。

也许您可以将其与单元测试集成以验证 CMake 脚本的完整性？您可以随时为您发现的问题提供补丁。

## 一个潜在的替代方案：

我在推断一些事情，如果我做出任何假设，请原谅我。

如果您的目标是跨平台，并且 CMake 不是一项技术要求（只是达到目的的一种手段），但您不想采用推荐的 CMake 工作流程，因为它不是很直观（我完全可以理解那），也许您可​​以看一下[Premake](http://industriousone.com/premake)，它是较新的，但仍然是一个相当强大的项目生成工具：

我发现语法（纯[Lua](http://en.wikipedia.org/wiki/Lua_%28programming_language%29)）更容易理解，并且它的项目建模更接近 Visual Studio 解决方案。这对您来说可能是更自然的工作流程。

它也是开源的，我发现添加扩展实际上非常容易（我上次使用它已经一年了，我不确定它现在的状态）。也许您也可以构建一个反向生成器，因为该库带有一个完整的 Visual Studio 项目解析器，并且您可以让它在两个方向上生成。

一年前我选择不采用它，因为当时它很难生成相互依赖的 Xcode 项目（也许它已经修复了！）。不过，我对 Makefile 或 Visual Studio 解决方案没有任何问题。

## 最后的建议

我不建议从 Visual Studio 项目反向生成项目生成脚本的原因仅仅是它对您的项目产生了非常尴尬的依赖。Visual Studio 项目不是标准化的，甚至是开放的——如果 Microsoft 更改格式，您可能会破坏您的工作流程，直到您或其他人为您的反向生成器创建一个补丁以让您再次工作。

您可能会争辩说，项目生成存在相同的问题，但 Visual Studio 历来都是向后兼容的 - 或者至少附带了执行项目更新的工具。在较旧版本中生成项目很可能始终有效，而尝试解析 Visual Studio 解决方案的较新版本则更容易出错和损坏。

如果这是一个您希望在未来很多年继续使用和维护的严肃的生产项目，我强烈建议采用经过验证的工作流程（直接在 CMake 或 Premake 文件中工作），即使它不太理想或不舒服首先对于开发人员。如果这将是一个长期项目，那么您熟悉新工作流程所花费的时间与您继续跨多个平台和不同团队维护临时构建系统所花费的时间相比将相形见绌。另外，作为开发人员，它还会为您的腰带添加另一个工具。只是我的两分钱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T10:20:33.057

考虑到我最近的经验，当我设法使用 CMake 生成[Eclipse](http://en.wikipedia.org/wiki/Eclipse_%28software%29)或 Visual Studio 解决方案文件时，我不建议您将解决方案自动转换为 CMake 文件。Visual Studio 项目文件包含过多的信息和参数，这些信息和参数通常是不需要的，CMake 不直接支持（用不同结构表达的功能），或者不受支持。

此外，所有源文件和项目文件的解决方案布局可能很奇怪，并且对于其他平台不方便。

我估计清理生成的文件比从头开始编写干净的 CMake 文件需要更多时间。这也是一种更合理的方式，因为您可以完全控制项目结构。

就我而言，我最终使用以下 CMake 命令来生成 Visual Studio 解决方案：

```
cmake -G "Visual Studio 10" -D DEBUG=0 . 
```

对于 Windows 上的命令行批处理构建和安装，我会：

```
cmake --build . --target install --config VC_CONFIGURATION_1  -- "/v:m"
cmake --build . --target install --config VC_CONFIGURATION_2  -- "/v:m" 
```

CMake 文件本身是跨平台的。当然，它有几个特定于 Windows 的行定义配置，以及 add_executable() 中的 WIN32 选项，但您只能针对此平台调整它们。

# c# - 如何在窗体应用程序中换行？

> ID：14995878
> 
> 赞同：0
> 
> 时间：2013-02-21T06:25:58.753
> 
> 标签：c#, winforms

```
private void button1_Click(object sender, EventArgs e)
{
    textBox2.Text += textBox1.Text + "\n\n";
    textBox1.Text = "";
} 
```

我试过使用`\n`，`\br`但我无法得到它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T06:38:51.263

使用[Environment.NewLine 属性](http://msdn.microsoft.com/en-in/library/system.environment.newline.aspx)

NewLine 的属性值是专门为.NET Framework 的当前平台和实现定制的常量。此属性包含`"\r\n"`用于*非 Unix 平台*或 *Unix*`"\n"`平台。

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T06:27:44.183

```
string text2 = "line1\r\nline2"; 
```

但最好使用[Environment.NewLine](http://msdn.microsoft.com/en-in/library/system.environment.newline.aspx)。

```
string text = "line1" + Environment.NewLine + "line2"; 
```*

# javascript - 从用户区域选择日期格式字符串

> ID：14995882
> 
> 赞同：2
> 
> 时间：2013-02-21T06:26:18.350
> 
> 标签：javascript, dojo

我在我的网站中使用 Dojo DateTextBox，它采用约束`"dd-mm-yyyy"`等形式的日期格式。我需要选择访问者区域设置的日期格式字符串并将其传递给此 DateTextBox 以以本地格式显示日期。我不需要获取格式化日期的方法，而是获取格式字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:19:20.793

```
require(["dojo/i18n", "dojo/date/locale"], function(i18n) {

    var defaultLocale = i18n.normalizeLocale();
    var bundle = i18n.getLocalization("dojo.cldr", "gregorian", defaultLocale);

    // all available formats
    console.dir(bundle);

    // some of them
    console.log(bundle['dateFormat-full']);
    console.log(bundle['dateFormat-long']);
    console.log(bundle['dateFormat-medium']);
    console.log(bundle['dateFormat-short']);
}); 
```

在行动中看到它：http: [//jsfiddle.net/phusick/4ZDCv/](http://jsfiddle.net/phusick/4ZDCv/)

**或者**`dojo/i18n`通过插件直接要求本地化包：

```
require(["dojo/i18n!dojo/cldr/nls/gregorian"], function(gregorian) {

    console.dir(gregorian); // all available formats

    console.log(gregorian['dateFormat-full']);
}); 
```

jsFiddle：http: [//jsfiddle.net/phusick/jJVEU/](http://jsfiddle.net/phusick/jJVEU/)

**编辑：** `dijit/form/DateTextBox`处理语言环境本身，因此您可能只需要设置`formatLength`：

```
<input
    data-dojo-type="dijit/form/DateTextBox"
    data-dojo-props="constraints: { formatLength: 'long' }"
/> 
```

它如何与页面上的多个语言环境一起工作的示例：http: [//jsfiddle.net/phusick/PhHwg/](http://jsfiddle.net/phusick/PhHwg/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T06:58:41.350

试试这个（参考：[在哪里可以找到有关在 JavaScript 中格式化日期的文档？](https://stackoverflow.com/questions/1056728/formatting-a-date-in-javascript)）：

```
<script type="text/javascript">

var d = new Date();

var curr_date = d.getDate();
var curr_month = d.getMonth() + 1;
var curr_year = d.getFullYear();

curr_date = (curr_date < 10 ? "0" + curr_date : curr_date);
curr_month = (curr_month < 10 ? "0" + curr_month : curr_month);

var formatted_date = "" + curr_date + "-" + curr_month + "-" + curr_year;

</script> 
```

# angularjs - 选择输入焦点上的文本

> ID：14995884
> 
> 赞同：121
> 
> 时间：2013-02-21T06:26:27.447
> 
> 标签：angularjs, angularjs-directive

我有一个文本输入。当输入获得焦点时，我想选择输入内的文本。

使用 jQuery 我会这样做：

```
<input type="text" value="test" /> 
```

```
$("input[type=text]").click(function() {
    $(this).select();
    // would select "test" in this example
}); 
```

我四处寻找尝试找到 Angular 方式，但我发现的大多数示例都是处理一个指令，该指令正在监视模式属性以进行更改。我假设我需要一个指令来监视接收焦点的输入。我该怎么做？

* * *

## 回答 #1

> 赞同：218
> 
> 时间：2013-02-21T06:53:18.913

在 Angular 中执行此操作的方法是创建一个自定义指令，为您执行自动选择。

```
module.directive('selectOnClick', ['$window', function ($window) {
    return {
        restrict: 'A',
        link: function (scope, element, attrs) {
            element.on('click', function () {
                if (!$window.getSelection().toString()) {
                    // Required for mobile Safari
                    this.setSelectionRange(0, this.value.length)
                }
            });
        }
    };
}]); 
```

像这样应用指令：

```
<input type="text" value="test" select-on-click /> 
```

`[View demo](http://plnkr.co/edit/bgUG0vbQ3nwuZXfiS71W?p=preview)`

**Update1**：​​删除了 jQuery 依赖项。

**Update2**：限制为属性。

**更新 3**：适用于移动 Safari。允许选择部分文本（需要 IE>8）。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2014-06-04T15:35:08.790

这是一个增强的指令，当用户单击以将光标定位在输入框中时，它可以避免重新选择文本。

```
module.directive('selectOnClick', function () {
    return {
        restrict: 'A',
        link: function (scope, element) {
            var focusedElement;
            element.on('click', function () {
                if (focusedElement != this) {
                    this.select();
                    focusedElement = this;
                }
            });
            element.on('blur', function () {
                focusedElement = null;
            });
        }
    };
}) 
```

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2014-04-13T22:29:09.687

**对于 Angular 1.x，这是一个旧答案**

更好的方法是使用`ng-click`内置指令：

```
<input type="text" ng-model="content" ng-click="$event.target.select()" /> 
```

**编辑：**

正如[JoshMB](https://stackoverflow.com/users/2966090/joshmb)善意地提醒的那样；不再允许在 Angular 1.2+ 中引用 DOM 节点。所以，我已经`$event.target.select()`进入了控制器：

```
<input type="text" ng-model="content" ng-click="onTextClick($event)" /> 
```

然后在你的控制器中：

```
$scope.onTextClick = function ($event) {
    $event.target.select();
}; 
```

这是一个[**示例小提琴**](http://jsfiddle.net/onury/R63u5/)。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2015-07-17T09:17:54.460

两种提议的解决方案都不适合我。经过快速研究，我想出了这个：

```
module.directive('selectOnFocus', function ($timeout) {
    return {
        restrict: 'A',
        link: function (scope, element, attrs) {
            var focusedElement = null;

            element.on('focus', function () {
                var self = this;
                if (focusedElement != self) {
                    focusedElement = self;
                    $timeout(function () {
                        self.select();
                    }, 10);
                }
            });

            element.on('blur', function () {
                focusedElement = null;
            });
    }

  }

}); 
```

它混合了几种提出的解决方案，但同时适用于点击和对焦（想想自动对焦），并允许手动选择输入中的部分值。

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2016-12-25T20:17:47.523

对我来说，ng-click 没有意义，因为如果不再次选择所有文本，您将永远无法重新定位光标，我发现这很烦人。然后最好使用 ng-focus，因为只有当输入没有聚焦时才会选择文本，如果再次单击以重新定位光标，那么文本就会按预期取消选择，并且您可以在两者之间进行书写。

我发现这种方法是预期的用户体验行为。

使用[ng-focus](https://docs.angularjs.org/api/ng/directive/ngFocus)

**选项1：**单独的代码

```
<input type="text" ng-model="content" ng-focus="onTextFocus($event)" /> 
```

并在控制器中

```
$scope.onTextFocus = function ($event) {
  $event.target.select();
}; 
```

**选项 2：**作为替代方案，您可以将上面的代码加入到这个“单线”中（我没有对此进行测试，但它应该可以工作）

```
<input type="text" ng-model="content" ng-focus="$event.target.select()" /> 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2019-02-08T19:47:05.920

不需要指令，只需将`onfocus="this.select()"`本机 javascript 添加到输入元素或文本区域。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2017-03-14T17:06:01.650

在 Angular 2 中，这对我有用，无论是在 Chrome 和 Firefox 中：

```
<input type="text" (mouseup)="$event.target.select()"> 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2015-04-30T13:47:47.543

接受的答案是使用 click 事件，但是如果您使用 focus 事件，则只有第一次单击会触发该事件，并且当使用其他一些方法来关注输入时它也会触发（例如点击选项卡或在代码中调用焦点）。

这也使得没有必要检查元素是否已经像 Tamlyn 的回答所暗示的那样聚焦。

```
app.directive('selectOnClick', function () {
    return {
        restrict: 'A',
        link: function (scope, element, attrs) {
            element.on('focus', function () {
                this.select();
            });
        }
    };
}); 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2020-08-06T17:21:41.670

在单击或焦点或选项卡上选择所有文本的最简单方法是!!!：

```
<input (focus)="inputFocused($event)"> 
```

...

```
inputFocused(event: any){
    event.target.select()
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-10-24T10:22:56.870

对我有用的修改版。第一次单击选择文本，第二次单击同一元素取消选择文本

```
module.directive('selectOnClick', function ($timeout) {
return {
    restrict: 'A',
    link: function (scope, element, attrs) {
        var prevClickElem = null; //Last clicked element
        var ignorePrevNullOnBlur = false; //Ignoring the prevClickElem = null in Blur massege function

        element.on('click', function () {
            var self = this;
            if (prevClickElem != self) { //First click on new element
                prevClickElem = self; 
                $timeout(function () { //Timer
                    if(self.type == "number")
                        self.select();
                    else
                        self.setSelectionRange(0, self.value.length)
                }, 10);
            }
            else { //Second click on same element
                if (self.type == "number") {
                    ignorePrevNullOnBlur = true;
                    self.blur();
                }
                else
                    self.setSelectionRange(self.value.length, self.value.length); //deselect and set cursor on last pos
            }
        });

        element.on('blur', function () {
            if (ignorePrevNullOnBlur == true)
                ignorePrevNullOnBlur = false; //blur called from code handeling the second click 
            else
                prevClickElem = null; //We are leaving input box
        });
    }
} 
```

})

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2021-08-10T07:52:26.063

`$event.target.select()`未在 Angular 模板中解决

事件目标可以是任何 HTML 元素，并且应在此处应用对应用程序界面的强制转换（如`HTMLSelectElement`），但是，Angular 表达式不允许强制转换。最好的解决方法是`$event.target`用`$any()`

所以，它应该是这样的：`(focus) = $any($event.target).select()`

[在这里](https://youtrack.jetbrains.com/issue/WEB-39140)找到进一步的解释。

# c# - 编辑时无法更改文本框中的值

> ID：14995886
> 
> 赞同：1
> 
> 时间：2013-02-21T06:26:36.983
> 
> 标签：c#, asp.net

在页面加载方法中，我为这样的文本框设置了值

```
txtid.Value = pro.getId().ToString();
txtmodel.Text = pro.getModal();
txtname.Text = pro.getName();
cbCategory.SelectedValue = pro.getCategory();
txtprice.Text = pro.getPrice().ToString();
txtDescription.Text = pro.getDescription(); 
```

当我提交编辑产品时，我得到了价值

```
string id = txtid.Value.ToString();
string modal = txtmodel.Text.ToString();
int category = int.Parse(cbCategory.SelectedValue);
string name = txtname.Text.ToString();
string description = txtDescription.Text.ToString(); 
```

我尝试更改与原始值不同的值，但是当我出错时，它仍然保持原始值并保存到数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T07:08:52.973

在 Asp.net 中，对于每个点击事件，页面都将被回发，因此将代码放入页面加载中的 if(!ispostback) 中

```
if (!IsPostBack)
{
     txtid.Value = pro.getId().ToString();
     txtmodel.Text = pro.getModal();
     txtname.Text = pro.getName();
     cbCategory.SelectedValue = pro.getCategory();
     txtprice.Text = pro.getPrice().ToString();
     txtDescription.Text = pro.getDescription();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T06:34:24.090

你在哪里设置这些值`page load`可能是原因。
里面设置`if (!Page.IsPostBack)`
如下

```
if (!Page.IsPostBack)
{
     txtid.Value = pro.getId().ToString();
     txtmodel.Text = pro.getModal();
     txtname.Text = pro.getName();
     cbCategory.SelectedValue = pro.getCategory();
     txtprice.Text = pro.getPrice().ToString();
     txtDescription.Text = pro.getDescription();
} 
```

你为什么使用`txtid.Value`它是一个`hidden-field`？

# php - 使用 google gps api 和 php 获取两点之间的距离

> ID：14995887
> 
> 赞同：1
> 
> 时间：2013-02-21T06:26:41.387
> 
> 标签：php, javascript, google-maps, gps

我在 Stack Overflow [Google Maps 上找到了这个链接 - 如何获取两点之间的距离（以米为单位）？](https://stackoverflow.com/questions/7997627/google-maps-how-to-get-the-distance-between-two-point-in-metre)它显示了关于在给定两个不同的纬度和经度值的情况下查找公里距离的以下解决方案：

```
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false&libraries=geometry"></script>

var p1 = new google.maps.LatLng(45.463688, 9.18814);
var p2 = new google.maps.LatLng(46.0438317, 9.75936230000002);

alert(calcDistance(p1, p2));

//calculates distance between two points in km's
function calcDistance(p1, p2){
    return (google.maps.geometry.spherical.computeDistanceBetween(p1, p2) / 1000).toFixed(2);
   }

} 
```

这很棒并且有效，但是我正在创建一个应用程序，该应用程序从数据库中提取纬度和经度值并将每个值与恒定的纬度和经度值进行比较，以确定我从数据库中提取的用户是否在一定范围内一组经纬度。

我在 PHP 中执行此操作，但我想将常量 lat 和 long 值以及当前的 lat 和 long 值传递给上述 JavaScript 函数，计算距离，然后将值返回给 PHP 变量。换句话说，我想在 PHP 中调用一个 JavaScript 函数并将 JavaScript 值返回给 PHP 变量。

我看到很多论坛都说这是不可能的，然后有人说这是不可能的。任何人都可以帮助我或建议另一种方法吗？我只需要在 PHP 中做一些老式的微积分而忘记 Google API 插件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T06:36:38.203

如果您的数据库中有纬度和经度值，您可以使用以下查询。

```
SELECT a.*,
            3956 * 2 * ASIN(SQRT( POWER(SIN(($lat - lat) * pi()/180 / 2), 2) + COS($lat * pi()/180) * COS(lat * pi()/180) *
            POWER(SIN(($long - longi) * pi()/180 / 2), 2) )) as
            distance FROM table
            GROUP BY id HAVING distance <= 500 ORDER by distance ASC 
```

$lat 和 $long 变量是用户的当前位置。lat and longi 是条目的纬度和经度。

另请参阅“[使用 PHP、MySQL 和 Google 地图创建商店定位器](https://developers.google.com/maps/articles/phpsqlsearch_v3)”以了解上述查询如何工作

# asp.net - 从键盘单击 ENTER 键时如何保存 asp.net 中的文件？

> ID：14995889
> 
> 赞同：1
> 
> 时间：2013-02-21T06:26:46.927
> 
> 标签：asp.net, .net, keyboard-events

![单击键盘上的 ENTER 键时保存文件](../Images/64cbd7a7b4916059449a027d9f28b00f.png)

嗨，在我的屏幕上，点击添加按钮时我需要保存到数据库的字段很少，但是当我点击键盘上的 ENTER 键时，我想保存这些字段。当我输入所有字段并从键盘单击 ENTER 键时，所有这些字段必须保存到数据库中，我该如何实现？

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T06:31:07.380

“默认按钮”属性。这可以应用于 asp:Form 或 asp:panel 并允许确定当用户按下回车键时应该触发哪个按钮事件

例子

```
<asp:panel defaultbutton="button2" runat="server">
        <asp:textbox id="textbox3" runat="server"/>
        <asp:button id="button2" runat="server"/>
    </asp:panel> 
```

[按 Enter 键在 ASP.Net 中提交表单](http://blogs.msdn.com/b/yardman/archive/2010/03/01/hitting-the-enter-key-to-submit-a-form-in-asp-net.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T06:42:33.717

对于完整的页面，您可以使用 FORM 属性 -

```
<form id="form1" runat="server" defaultbutton="Button1">
    <div>
       <asp:Button Id="Button1" runat="server" Text="ADD"></asp:Button>
    </div>
</form> 
```

# jquery - Twitter bootstrap collaspe 专注于输入

> ID：14995891
> 
> 赞同：0
> 
> 时间：2013-02-21T06:26:49.303
> 
> 标签：jquery, twitter-bootstrap

我正在使用 twitter bootstrap collaspe 功能。li 元素如下所示，每个选项卡内容由类 .attrInputs 的输入元素组成

当我单击类药丸的元素时，我希望每个选项卡中的输入元素都能聚焦，这样用户就不需要单击输入元素。当单击 .pill 类时，我添加了一些 jquery 来使用 .focus 执行此操作，但它只能在第二次单击而不是第一次单击时进行。

```
 <ul class="nav nav-pills">
           <li>
              <a class="pill" href="#a" data-toggle="pill">
                A
              </a>
           </li>
           <li>
               <a class="pill" href="#b" data-toggle="pill">
                B
               </a>
           </li>
    <ul> 
```

我的标签内容。每个选项卡的 html 都是相同的

```
<div class="span10 offset1 tab-pane active" id="collar">
    <div class="span4">
          <input class="attrInputs" name="collar" type="text">
    </div>
    <div class="span4 offset1">
          <img src="http://placehold.it/300x300/156153">
    </div>
</div>

$('.pill').on('click',function(){
   $('.attrInputs').focus(); 
}); 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T06:40:21.330

你可以试试：

```
$('.pill').on('click',function(){
   setTimeout(function() {
     $('.attrInputs').focus(); 
   },0);
}); 
```

`setTimeout()`将打破点击处理程序链。

有关更多信息，请参阅[https://github.com/twitter/bootstrap/issues/2380](https://github.com/twitter/bootstrap/issues/2380)

# java - 是否可以使用其引用访问对象数组？

> ID：14995892
> 
> 赞同：1
> 
> 时间：2013-02-21T06:26:51.857
> 
> 标签：java

我有一个方法可以返回对对象数组的引用，我需要获取数组中项目的计数。可能吗 ？该方法的片段如下：

```
public Object getAllDChannelId()
{
  Object[] items = getAllItems();
  Object[] ids = new Object[items.length];
  for (int i = 0; i < items.length; i++)
    ids[i] = items[i].getId();
  return ids;
} 
```

现在我正在尝试通过 getAllDChannelId() 获取返回的项目数。如何得到？

编辑：我不想（实际上不能）更改方法 getAllDChannelId() 的签名。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T06:28:57.580

铸造回报`Object`并`Object[]`使用它。

```
Object[] objs = (Object[]) getAllDChannelId(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T06:30:51.407

在此处输入代码更改函数的返回类型

```
public Object[] getAllDChannelId()
{
  Object[] items = getAllItems();
  Object[] ids = new Object[items.length];
  for (int i = 0; i < items.length; i++)
    ids[i] = items[i].getId();
  return ids;
} 
```

在调用环境

```
Object[] returnObj = getAllDChannelId();
System.out.println("Length: "+returnObj.length); 
```

**更新**
如果在某些情况下您只需要参考，那么当您需要对象数组时执行此操作

```
Object[] returnObj = (Object[])getAllDChannelId();
System.out.println("Length: "+returnObj.length); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T07:11:14.957

您只需要在返回类型的方法中`Object`转换一件事。`Object[]`它会起作用的。

# c# - 当另一个文件更改时，如何自动生成一个文件？

> ID：14995894
> 
> 赞同：4
> 
> 时间：2013-02-21T06:26:55.997
> 
> 标签：c#, asp.net, visual-studio, t4, resx

**我的asp.net mvc**项目中有一个**xml**文件（resource.xml）和一个**T4**文件（resource.tt），用于将该文件转换为 .js 文件（resource.js）中的**json**。

 ******问题是我想在 resource.xml 文件更改或保存时自动运行 t4 文件。

我知道在 asp.net 中有一个**.resx**文件，当它发生变化时，一个自定义工具会自动生成一个文件，

我想要那样的东西

**更新：** 在我的项目中，我在**/Resources/Resource.fr.xml**中有一个 xml 文件和一个 t4 文件，它读取 xml 文件并在**/Resources/Resource.fr.js**文件中生成 json 对象。我希望 t4 文件在 xml 文件保存或更改时生成 .js 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-03T20:17:08.133

[我刚刚在这个帖子](https://stackoverflow.com/questions/28243926/run-t4-script-as-custom-tool-for-resx-file/28307797#28307797)中回答了这类问题

> 看看这个：https://github.com/thomaslevesque/AutoRunCustomTool 或 https://visualstudiogallery.msdn.microsoft.com/ecb123bf-44bb-4ae3-91ee-a08fc1b9770e 从自述文件：
> 
> > 安装扩展后，您应该会在每个项目项的属性上看到一个新的运行自定义工具。只需编辑此属性即可添加目标文件的名称。而已！
> 
> “目标”文件是您的 .tt 文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T06:33:26.150

看一下 FileSystemWatcher 类。它监视对文件甚至文件夹的更改。

看这个例子：

使用系统；使用 System.IO；使用 System.Security.Permissions；

```
namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            Run(@"C:\Users\Hanlet\Desktop\Watcher\ConsoleApplication1\bin\Debug");  
        }
        [PermissionSet(SecurityAction.Demand, Name = "FullTrust")]
        public static void Run(string path)
        {

            FileSystemWatcher watcher = new FileSystemWatcher();
            watcher.Path =path;
            watcher.NotifyFilter = NotifyFilters.LastAccess | NotifyFilters.LastWrite
               | NotifyFilters.FileName | NotifyFilters.DirectoryName;
            watcher.Filter = "*.xml";

            watcher.Changed += new FileSystemEventHandler(OnChanged);
            watcher.Created += new FileSystemEventHandler(OnChanged);
            watcher.Deleted += new FileSystemEventHandler(OnChanged);

            watcher.EnableRaisingEvents = true;

            Console.WriteLine("Press \'q\' to quit the sample.");
            while (Console.Read() != 'q') ;
        }

        private static void OnChanged(object source, FileSystemEventArgs e)
        {
            if(e.FullPath.IndexOf("resource.xml") > - 1)
                Console.WriteLine("The file was: " + e.ChangeType);
        }
    }
} 
```

每当 resource.xml 文件发生某种变化（创建、删除或更新）时，它都会监控并捕获。祝你好运！******

# c# - 获取listpiker wp7中长按项目的索引

> ID：14995897
> 
> 赞同：0
> 
> 时间：2013-02-21T06:27:10.300
> 
> 标签：c#, windows-phone-7

我有一个 ListPicker 说 listPicker1，其中使用隔离存储填充了项目，当我长按（按住）listPicker1 中的任何项目时，将出现一个上下文菜单，其中包含“删除”、“取消”等选项。现在当我点击“删除'，我想从 lisPicker1 中删除该项目，但我无法在 DeleteEvent Handler 中获得长按项目的索引或实际数据（即使我曾尝试使用 GestureListener_Hold，但徒劳无功）。下面是我尝试过的代码。如果可以的话，PL 会帮助我。提前致谢。

```
<toolkit:ListPicker SelectionChanged="listPicker1_SelectionChanged"   FontSize="24"  ItemCountThreshold="1" Name="listPicker1"  Margin="6,0,102,513" ListPickerMode="Full" Height="72" VerticalAlignment="Bottom" >           
            <toolkit:ListPicker.ItemTemplate >
                <DataTemplate x:Name="PickerFullModeItemTemplate">
                    <StackPanel x:Name="sp" Orientation="Horizontal" >
                       <TextBlock x:Name="txt" Text="{Binding ContactName}" Margin="16 0 0 0" FontSize="35" />                  
                        <TextBlock  Name="number" Text="{Binding ContactNumber}" Foreground="Azure" FontSize="28"/>
                          <toolkit:ContextMenuService.ContextMenu >
                            <toolkit:ContextMenu>
                                <toolkit:MenuItem Header="Delete" Click="MenuItem_Click" />
                                <toolkit:MenuItem Header="Cancel" />
                            </toolkit:ContextMenu>
                        </toolkit:ContextMenuService.ContextMenu>
                    </StackPanel>
                </DataTemplate>
            </toolkit:ListPicker.ItemTemplate>
        </toolkit:ListPicker>
     }

   private void MenuItem_Click(object sender, RoutedEventArgs e)
    {

        SaveNumber data = (sender as ListPicker).SelectedItem as SaveNumber; //nullRef exception here//
        if (MessageBox.Show("Are you sure you want to delete the contact from list?", "Delete Contact", MessageBoxButton.OKCancel) == MessageBoxResult.OK)
        {       
           XmlWriterSettings xmlWriterSettings = new XmlWriterSettings();
            xmlWriterSettings.Indent = true;
            using (IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication())
            {
                using (IsolatedStorageFileStream stream = myIsolatedStorage.OpenFile("People.xml", FileMode.Create))
                {
                    XmlSerializer serializer = new XmlSerializer(typeof(List<SaveNumber>));
                    using (XmlWriter xmlWriter = XmlWriter.Create(stream, xmlWriterSettings))
                    {                            
                        serializer.Serialize(xmlWriter, DeletePersonData(data));
                        this.listPicker1.ItemsSource = data2;
                    }
                }
            }
        }
    }
    private List<SaveNumber> DeletePersonData(SaveNumber ob)
    {   
        //data2.RemoveAt(listPicker1.SelectedIndex); //selected index is always set to 1//

        this.data2.Remove(ob);              
        return data2;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-07T09:50:15.757

SaveNumber data = (sender as MenuItem).DataContext as SaveNumber;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T07:25:37.737

您需要找到被长按的项目的根，然后从这里您可以获取该项目在容器内的索引。使用[LinqToVisualTree](http://www.scottlogic.co.uk/blog/colin/2010/03/linq-to-visual-tree/)：

```
private void MenuItem_Click(object sender, RoutedEventArgs e)
{

  StackPanel rootItem = e.OriginalSource.Ancestors()
                                        .OfType<StackPanel>()
                                        .Where(i => i.Name == "sp");

  int index = listPicker1.ItemContainerGenerator.IndexFromContainer(rootItem);
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-18T12:26:28.817

为保持事件创建处理程序，然后使用其索引获取项目

listPicker1.SelectedIndex;

# magento - 从 Magento 导入订单、付款到 Quickbooks Desktop

> ID：14995898
> 
> 赞同：1
> 
> 时间：2013-02-21T06:27:12.080
> 
> 标签：magento, intuit-partner-platform

我们正在将 Magento 中的订单和付款数据导入 Quickbooks 桌面版。下面是两个查询——它们给出了成功的响应，但没有导入数据。对我们有什么想法吗？

首先，我们创建一个查询来形成一个订单堆栈

```
$qb_order = new QuickBooks_IPP_Object_Invoice();

        $qb_meta = new QuickBooks_IPP_Object_MetaData();
        $qb_meta->setCreateTime($order->getCreatedAt());
        $qb_meta->setLastUpdatedTime($order->getUpdatedAt());
        $qb_order->setMetaData($qb_meta);

        $qb_header = new QuickBooks_IPP_Object_Header();
        $qb_header->setDocNumber($order->getIncrementId());
        if (!$qb_customer_id = $this->_getQbCustomerId($order->getCustomerId())) return false;
        $qb_header->setCustomerId($qb_customer_id);
        $qb_header->setShipDate($order->getDeliveryDate());
        $qb_header->setSubTotalAmt($order->getBaseSubtotal());
        $qb_header->setTaxAmt($order->getBaseTaxAmount());
        $qb_header->setTotalAmt($order->getBaseGrandTotal());
        $qb_header->setARAccountId("Accounts Receivable");

        if ($address = $order->getBillingAddress()) {
            $qb_header->setBillAddr($this->_convertAddress($address, "Billing"));
        }

        if ($address = $order->getShippingAddress()) {
            $qb_header->setShipAddr($this->_convertAddress($address, "Shipping"));
        }

        $qb_header->setDiscountAmt($order->getBaseDiscountAmount());
        $qb_order->setHeader($qb_header);

        foreach($order->getItemsCollection() as $item) {
            $qb_order->addLine($this->_convertOrderItem($item));
    } 
```

这是查询后形成的 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<Add xmlns="http://www.intuit.com/sb/cdm/v2" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    RequestId="4562cdf8407178e362082c0441dffa74" 
    xsi:schemaLocation="http://www.intuit.com/sb/cdm/v2 ./RestDataFilter.xsd ">
    <OfferingId>ipp</OfferingId>
    <ExternalRealmId>631645715</ExternalRealmId>
    <Object xsi:type="Invoice">
        <Header>
            <DocNumber>100001570</DocNumber>
            <CustomerId>103699</CustomerId>
            <ShipDate>2013-02-21</ShipDate>
            <SubTotalAmt>33.0000</SubTotalAmt>
            <TaxAmt>2.6400</TaxAmt>
            <TotalAmt>35.64</TotalAmt>
            <ARAccountId>Accounts Receivable</ARAccountId>
            <BillAddr>
                <Line1>⁣&lt;/Line1>
                <Line2></Line2>
                <Line3></Line3>
                <Line4></Line4>
                <City>⁣&lt;/City>
                <Country>⁣&lt;/Country>
                <CountrySubDivisionCode>⁣&lt;/CountrySubDivisionCode>
                <PostalCode>⁣&lt;/PostalCode>
                <Tag>Billing</Tag>
            </BillAddr>
            <ShipAddr>
                <Line1>⁣&lt;/Line1>
                <Line2></Line2>
                <Line3></Line3>
                <Line4></Line4>
                <City>⁣&lt;/City>
                <Country>⁣&lt;/Country>
                <CountrySubDivisionCode>⁣&lt;/CountrySubDivisionCode>
                <PostalCode>⁣&lt;/PostalCode>
                <Tag>Shipping</Tag>
            </ShipAddr>
            <DiscountAmt>0.0000</DiscountAmt>
        </Header>
        <Line>
            <Desc>Special Product For POS
sdf</Desc>
            <Amount>33.0000</Amount>
            <ItemType>Product</ItemType>
            <UnitPrice>33.0000</UnitPrice>
            <Qty>1</Qty>
        </Line>
    </Object>
</Add> 
```

这是服务器响应：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<RestResponse xmlns="http://www.intuit.com/sb/cdm/v2">
  <Success RequestId="4562cdf8407178e362082c0441dffa74">
    <ObjectRef>
      <Id idDomain="NG">494527</Id>
      <SyncToken>1</SyncToken>
      <LastUpdatedTime>2013-02-21T05:44:12Z</LastUpdatedTime>
    </ObjectRef>
    <RequestName>InvoiceAdd</RequestName>
    <ProcessedTime>2013-02-21T05:44:12Z</ProcessedTime>
  </Success>
</RestResponse> 
```

==================================================== ================

这是用于根据订单创建付款的第二组代码。同样的问题，成功的 XML 但没有导入数据：

```
$order = Mage::getModel("sales/order")->load($invoice->getOrderId());
        if (!$qb_order_id = $this->getHelper()->getObjectQbId($order)) return false;
        $qb_payment = new QuickBooks_IPP_Object_Payment();

        $qb_meta = new QuickBooks_IPP_Object_MetaData();
        $qb_meta->setCreateTime($invoice->getCreatedAt());
        $qb_meta->setLastUpdatedTime($invoice->getUpdatedAt());
        $qb_payment->setMetaData($qb_meta);

        $qb_header = new QuickBooks_IPP_Object_Header();
        $qb_header->setDocNumber($invoice->getIncrementId());
        $qb_header->setTxnDate($invoice->getCreatedAt());
        if (!$qb_customer_id = $this->_getQbCustomerId($order->getCustomerId())) return false;
        $qb_header->setCustomerId($qb_customer_id);
        $qb_header->setTotalAmt($invoice->getBaseGrandTotal());
        $qb_header->setProcessPayment('false');

        $qb_payment->setHeader($qb_header);

        $qb_line = new QuickBooks_IPP_Object_Line();
        $qb_line->setAmount($invoice->getBaseGrandTotal());
        $qb_line->setTxnId($qb_order_id);
        $qb_payment->addLine($qb_line); 
```

这是在代码之后形成的 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<Add xmlns="http://www.intuit.com/sb/cdm/v2" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    RequestId="dc07317b838eb3d0c89e310b4984468a" 
    xsi:schemaLocation="http://www.intuit.com/sb/cdm/v2 ./RestDataFilter.xsd ">
    <OfferingId>ipp</OfferingId>
    <ExternalRealmId>631645715</ExternalRealmId>
    <Object xsi:type="Payment">
        <Header>
            <DocNumber>100000265</DocNumber>
            <TxnDate>2013-02-21</TxnDate>
            <CustomerId>103699</CustomerId>
            <TotalAmt>35.64</TotalAmt>
            <ProcessPayment>false</ProcessPayment>
        </Header>
        <Line>
            <Amount>35.6400</Amount>
            <TxnId>494527</TxnId>
        </Line>
    </Object>
</Add> 
```

这是来自服务器的答案：

```
<?xml version="1.0" ?>
<RestResponse xmlns="http://www.intuit.com/sb/cdm/v2">
  <Success RequestId="dc07317b838eb3d0c89e310b4984468a">
    <ObjectRef>
      <Id idDomain="NG">494529</Id>
      <SyncToken>1</SyncToken>
      <LastUpdatedTime>2013-02-21T05:48:07Z</LastUpdatedTime>
    </ObjectRef>
    <RequestName>PaymentAdd</RequestName>
    <ProcessedTime>2013-02-21T05:48:07Z</ProcessedTime>
  </Success>
</RestResponse> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:27:10.340

首先，为了清楚起见，请确保您正在为正确的平台构建 - 根据[Intuit 常见问题解答](https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0025_Intuit_Anywhere/0080_FAQ)（截至 2013 年 2 月），如果这只是针对您公司的内部集成，您不应该在任何地方使用 Intuit/国际电联。从常见问题解答：

> 问：我想将我的自定义（非 SaaS、单租户）解决方案与 Intuit Anywhere 集成。我可以这样做吗？
> 
> 答：不是今天，但我们正在考虑。

附带说明一下，对于与 QuickBooks for Windows 的内部集成，Web 连接器比 Intuit Anywhere 更可靠且更易于排除故障。

综上所述……您的问题可能与订单项以及您（未）所指的项目有关。在 QuickBooks 中，每个单行项目都附加到 QuickBooks 中的特定项目记录（它是 GUI 中的“项目名称/SKU”下拉菜单）。

但是，您的订单项：

```
 <Line>
    <Desc>Special Product For POS sdf</Desc>
    <Amount>33.0000</Amount>
    <ItemType>Product</ItemType>
    <UnitPrice>33.0000</UnitPrice>
    <Qty>1</Qty>
   </Line> 
```

仅提及项目“类型”（例如“库存”、“产品”、“服务”等）。

您应该在每个订单项中都有一个标签：

```
<ItemName>Your QuickBooks Item Name</ItemName> 
```

或者：

```
<ItemId>123</ItemId> 
```

如果您查看[文档](https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0050_Data_Services/0500_QuickBooks_Windows/0600_Object_Reference/Invoice)或一些漂浮在网络上的[QuickBooks IDS/Intuit Anywhere 示例](http://www.consolibyte.com/docs/index.php/IDS_XML_for_Adding_an_Invoice)，您会发现它们在每个行项目中都使用 ItemName 或 ItemId。

您可能还想研究[如何获取回写错误](https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0050_Data_Services/0500_QuickBooks_Windows/0700_Error_Codes)，因为这将为您提供更多信息（值得注意的是，PHP DevKit 目前没有用于获取这些错误的本机方法，但这是我们正在努力的- 如果您需要进一步的帮助，请与我联系）。

# c# - C# 无法连接到我的异步 TCP 服务器

> ID：14995900
> 
> 赞同：0
> 
> 时间：2013-02-21T06:27:16.273
> 
> 标签：c#, tcplistener

我有一个我构建的异步 TCP 服务器，它充当远程客户端应用程序和 SQL 服务器之间的中介。无论如何，当我去测试来自远程机器的连接时 - 它不会连接。我正在使用 Putty 测试与 TCP 服务器的连接，并且在我推送连接后，Putty 立即关闭。我在两台机器上都设置了 Wireshark，我看到来自源 IP 的端口通过某种通信，但我不知道如何读取它。两台机器都是 Windows，我关闭了 Windows 防火墙。谁能帮我诊断我的问题？谢谢。

这是我的异步服务器代码：[PasteBin](http://pastebin.com/ELyBNp68)

这是我的 Wireshark 捕获（服务器端）：[PasteBin](http://pastebin.com/kCrs9Yu3)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T08:47:24.053

[您是否按照 putty文档](http://the.earth.li/~sgtatham/putty/0.62/htmldoc/Chapter3.html#using-rawprot)中的说明设置了 putty 以使用原始 tcp 连接？

默认情况下，putty 创建安全 shell (ssh) 连接。

# javascript - 检查jQuery中的未定义和空值

> ID：14995904
> 
> 赞同：5
> 
> 时间：2013-02-21T06:27:42.573
> 
> 标签：javascript, jquery, ternary-operator

`!==`在检查 null 或 undefined 以及我是否应该使用or`!=`和“未定义”或未定义时，我有点困惑。

这是我正在处理的一些代码。我的 null/unudefined 等哪里出了问题？

```
var c = (jQuery(this).prop("target") != null && jQuery(this).prop("target") != undefined && jQuery(this).prop("target").toLowerCase() == "_blank") ? 1 : 0; 
```

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-21T06:37:43.113

一般来说，保持简单。

要检查`undefined`，请使用：

```
foo === undefined
foo !== undefined 
```

* * *

要检查`null`，请使用：

```
foo === null
foo !== null 
```

* * *

要同时检查任何一个，请使用：

```
foo == null
foo != null 
```

* * *

无论如何，请将您的变量存储`.prop()`到一个变量中以保持其干净。但在你的情况下，如果它等于`"_blank"`，那么你知道它不是`null`or `undefined`，所以：

```
var targ = jQuery(this).prop("target").toLowerCase();

var c = targ === "_blank" ? 1 : 0; 
```

* * *

或者，您可以通过强制将其缩短`boolean`为 a `number`：

```
var targ = jQuery(this).prop("target").toLowerCase();

var c = +(targ === "_blank"); 
```

* * *

这最后两个解决方案是安全的，因为`.prop()`总是会返回一个`string`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-21T06:36:54.137

*   两者`null`和`undefined`都是“虚假”值，因此可以像检查布尔值一样检查它们。因此，除了您需要知道它们是否是这样的值的某些情况之外，`null`没有任何意义。`undefined`

*   比较时，最好使用严格比较（如`===`，`!==`等）

*   如果前面的条件是“假的”，则`&&`in a 条件不会评估以下条件。

*   [您甚至不需要 jQuery](http://jsfiddle.net/Pq9RB/)，因为`this`您的 DOM 对象（大概是一个`<a>`）并且您正在尝试获取该`target`属性：

到底：

```
var c = (this.target && this.target.toLowerCase() === "_blank") ? 1 : 0; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T06:38:34.810

这是检查未定义的最佳方法：

```
if(typeof variable_here != 'undefined'){
   // your code here.
 }; 
```

这是检查 null 的最佳方法：

```
if(variable_here !== null){
       // your code here.
     }; 
```

所以你的代码应该是这样的：

```
var c = (jQuery(this).prop("target") !== null && typeof jQuery(this).prop("target") !== 'undefined' && jQuery(this).prop("target").toLowerCase() == "_blank") ? 1 : 0; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T06:34:56.983

由于 undefined 将是变量类型，请使用`typeof`

```
var c = (
 $(this).attr("target") != NULL && 
 typeof $(this).attr("target") != "undefined" && 
 $(this).attr("target").toLowerCase() == "_blank"
) ? 1 : 0; 
```

但是，我认为您只需要最后一次检查。是目标`"_blank"`，`c`需要是`1`，否则，`0`。是否`target`设置真的很重要吗？

此外，使用[attr()](http://api.jquery.com/attr/)方法获取属性，因为`prop()`if 用于类似`selectedIndex`or的属性`tagName`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T06:35:21.483

不要仅仅为了检查一个值而获得相同的属性 3 次。

```
var c = 0;
var prop = $(this).prop("target");
if(prop && prop.toLowerCase() === "_blank") c = 1; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-01T08:05:01.873

我得到了这样的东西，这与你的问题无关，但会帮助你

```
var targ = jQuery(this).prop("target").toLowerCase(); 
```

现在如果你想检查 targ 是 null 还是 undefined

```
 var c = (!targ || "") ? 1 : 0 
```

希望对你有帮助

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-07-08T14:45:03.747

在 JavaScript 中，您不需要显式检查变量是否为 null 或未定义，因为：

1.  null 或 undefined 在布尔表达式中返回 false。

2.  JS 表达式从左到右计算。所以对于一个 || b，如果 a 为假，则只评估 b。但如果 a 为真，则不会检查 b。同样，对于 a && b，如果 a 为假，则不会评估 b。

因此， if (a != null) { "do something" } 可以写成 if (a) { "do something" } 或简单的 && "do something"。

同理，当值设置为 null 或 undefined 时，可以使用它来设置默认值：

```
function someFunction(age){
    var age= age|| 18;
} 
```

参考：[https ://codereview.stackexchange.com/questions/472/usage-of-the-ternary-operator-with-functions-listening-to-click-events](https://codereview.stackexchange.com/questions/472/usage-of-the-ternary-operator-with-functions-listening-to-click-events)

# php - 会话未识别

> ID：14995907
> 
> 赞同：0
> 
> 时间：2013-02-21T06:28:01.437
> 
> 标签：php, mysql

我创建了一个会话，但在“login.php”中输入电子邮件和密码后，页面再次重定向到“login.php”。以下代码是检查电子邮件和密码验证的“login.php”的下一页。

```
<?php
    $con = mysql_connect("localhost","Rahul","");

    if (!$con) {
        die('Could not connect: ' . mysql_error());
    }

    mysql_select_db("ebusiness", $con);
    $result=mysql_query("select * from members where Email='$_POST[login]' and Password='$_POST[pwd]' ") or die(mysql_error());

    while($row=mysql_fetch_array($result)) {
        if(strcmp("trim($_POST[login])","trim($row[Email])"==0 ) && strcmp("trim($_POST[pwd])","trim($row[Password])")==0) {
            echo "<meta http-equiv='refresh' content='0.5;url=home.php'/>";
            session_start();
            $_SESSION['email']=$_POST['login'];
            $_SESSION['id']=$row['id'];
            echo "<br><br><br>";
            echo "<table align='center' border='0' cellspacing='0' cellpadding='0' bgcolor='#F0F0F0'><tr></tr><tr align='center'><td><h3>Please wait...</td></tr></table>";
            return;
        }
    }
    mysql_close($con);
?> 
```

“home.php”页面是在成功验证后显示信息的页面。home.php 的代码：

```
 <?php
   session_start();

    if (!isset($_SESSION['email'])) {
        header("Location: login.php");
        return;
   } else {
        $con = mysql_connect("localhost","Rahul","");
        mysql_select_db("ebusiness", $con);
        $result = mysql_query("SELECT * FROM members WHERE id = $_SESSION[id]") or die(mysql_error());

        while($row = mysql_fetch_array($result)) {
            echo "<table height=100% width=100% border='0' cellspacing='0'><tr height=20%><td colspan=2>";
            include 'header.php';
            echo "</td></tr>";
        }
   }
?> 
```

会话首先在“welcome.php”上创建，然后在“home.php”上检查会话是否存在。然后它重定向到“login.php”。但是因为我已经创建了一个会话.. 我不明白为什么 home.php 没有加载。请帮助我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T07:07:31.713

您`session_start();`在 login.php 页面中丢失了，将其添加到页面顶部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T06:56:34.483

尝试

**登录.php**

```
<?php
    ob_start();
    session_start();
    $con = mysql_connect("localhost","Rahul","")or die(mysql_error());
    mysql_select_db("ebusiness", $con)or die(mysql_error());;

    $result = mysql_query("select * from members where Email = '".$_POST['login']."' and Password = '".$_POST['pwd']."' LIMIT 1") or die(mysql_error());

    if(mysql_num_rows($result) > 0)
    {
        while($row = mysql_fetch_array($result))
        {
            echo "<meta http-equiv='refresh' content='0.5;url=home.php'/>";
            $_SESSION['email'] = $_POST['login'];
            $_SESSION['id'] = $row['id'];
            echo "<br /><br /><br />";
            echo "<table align='center' border='0' cellspacing='0' cellpadding='0' bgcolor='#F0F0F0'><tr></tr><tr align='center'><td><h3>Please wait...</td></tr></table>";
            return;
        }
    }

    mysql_close($con);
    flush();
?>
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T06:57:08.060

放

> session_start();

每页的顶部。但是，您在下面看到的并不是您问题的答案。检查这一行：

```
if(strcmp("trim($_POST[login])","trim($row[Email])"==0 ) && strcmp("trim($_POST[pwd])","trim($row[Password])")==0)
{ 
```

看看`strcmp("trim($_POST[login])","trim($row[Email])"==0 )` 这意味着

```
strcmp("sometext","someothertext"==0 ) 
```

意思是

```
strcmp("sometext",true) 
```

所以你的线

```
if(strcmp("trim($_POST[login])","trim($row[Email])"==0 ) && strcmp("trim($_POST[pwd])","trim($row[Password])")==0)
    { 
```

和

```
if(true && strcmp("evenmoretext","evenevenevenmoremoretext")==0)
    { 
```

这是

```
if(true && 0==0) 
```

这是

```
if(true && true) 
```

所以你达到这个`echo "<meta http-equiv='refresh' content='0.5;url=home.php'/>";`是因为`When a string is specified in double quotes or with heredoc,` **变量** `are parsed within it.`但是没有**函数**（在这种情况下是修剪）被解析！

一些测试：

```
$_POST['login'] = 'postemail';
$_POST['pwd'] = 'posttest';
$row['Email'] = 'postemail';
$row['Password'] = 'posttest';

var_dump("trim($_POST[login])"); // string(15) "trim(postemail)"
var_dump("trim($row[Email])"); // string(15) "trim(postemail)"
var_dump("trim($row[Email])"==0); // bool(true)
var_dump(strcmp("trim($_POST[login])","trim($row[Email])"==0 )); //int(1) 
```

在我看来，您应该清除并修复您的代码。例如，第一个 if 语句应该是：

```
if(strcmp(trim($_POST["login]"),trim($row["Email"]))==0 && strcmp(trim($_POST["pwd]"),trim($row["Password"]))==0) 
```

# jquery - 敲除 + 验证一些 html 元素协作

> ID：14995908
> 
> 赞同：1
> 
> 时间：2013-02-21T06:28:01.847
> 
> 标签：jquery, html, knockout.js, validation

我这里有一个情况，我有一个带有一些 html 元素的 div，这些元素已经与 knockout.js 框架绑定。

我正在尝试创建一个错误面板，该面板在特定 div 的保存按钮上验证 html 元素并生成错误消息。

任何想法如何从淘汰赛中做到这一点，或者我们需要淘汰赛 + jquery？

提前致谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T07:28:02.230

您可以通过以下方式执行此操作：例如，将简单的文本属性添加到您的视图模式中，例如

```
function ViewModel()
{
  this.error = ko.observable('');
} 
```

将此属性应用于您的错误面板可能如下所示：

```
<div class='error' data-bind="visible:error != '', text:error"></div> 
```

当你想显示一些错误时，只需将消息设置为错误属性。当然这个例子很简单，但你可以像起点一样使用它。

# jquery - 按钮未在数据表中触发

> ID：14995910
> 
> 赞同：1
> 
> 时间：2013-02-21T06:28:06.843
> 
> 标签：jquery, html, datatable

我使用 datatable jquery 插件创建了一个表。以下是使用的json

```
{
"aaData":[{
"Month": "Jan-2013",
"Comments": "",
"Details": " <button class='dialog-link'>View</button>"
}]
} 
```

因此，正如预期的那样，创建了一个按钮。

然后我对此进行了一些jquery操作

```
 $(".dialog-link").click(function (event) {
    console.log("clicked");
    window.open('details.aspx', 'winname', 'directories=no,titlebar=no,toolbar=no,location=no,status=no,menubar=no,scrollbars=no,resizable=no,width=850,height=650');
    return false;
}); 
```

此功能不起作用...调试中没有错误，但父窗口被刷新并且没有子窗口（details.aspx）被打开......这里有什么问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T06:42:59.547

试试这个，而不是：

```
$(document).on('click', ".dialog-link", function (event) {
    console.log("clicked");
    window.open('details.aspx', 'winname', 'directories=no,titlebar=no,toolbar=no,location=no,status=no,menubar=no,scrollbars=no,resizable=no,width=850,height=650');
    return false;
}); 
```

.click() 有一种恼人的倾向，即不处理页面加载事件完成后动态添加到 DOM 的元素。这就是不推荐使用 .click、.bind 和 .live 的原因之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T06:43:49.903

尝试：

```
 $(document).on('click', '.dialog-link', function() { ... }); 
```

使用 .on() 将事件处理程序附加到父元素，并将选择器作为参数传递。

# internet-explorer - FuelPHP表单验证不适用于IE（Internet Explorer）浏览器......客户端验证不起作用

> ID：14995912
> 
> 赞同：0
> 
> 时间：2013-02-21T06:28:14.777
> 
> 标签：internet-explorer, fuelphp

我正在使用`FuelPHP 1.0`版本...我创建表单字段验证服务器端...

例如 -`$fs->add('test', 'test', array('type'=>'text'), array('required'));`

`FuelPHP`根据服务器端验证自动创建客户端验证......并继续运行`Firefox`，`Chrome` 客户端验证工作正常但`IE` `client side validation`不工作......有什么问题`IE`吗？`FuelPHP`

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:46:43.417

Fuel 只输出带有表单元素的 HTML5 验证规则。由浏览器来支持它们。

*   谷歌浏览器（16 岁以上）
*   火狐 (8+)
*   和 Internet Explorer (10+)

您可以实现[h5validate](http://ericleads.com/h5validate/) jQuery 库来模拟不受支持的浏览器上的行为。

# ios - 从另一个相同类型的对象数组中减去一个复杂对象数组

> ID：14995913
> 
> 赞同：0
> 
> 时间：2013-02-21T06:28:15.863
> 
> 标签：ios, objective-c, ipad, nsarray

我知道从 NSArray 中减去 NSArray 如果它是[在此处找到的单个基本对象](https://stackoverflow.com/questions/9341767/subtracting-arrays)

但我拥有的是这样的对象

```
@interface Set : NSObject
@property (nonatomic, strong) NSString *ItemId;
@property (nonatomic, strong) NSString *time;
@property (nonatomic, strong) NSString *Category_id;
@property (nonatomic, strong) NSString *List_id;
@property (nonatomic, strong) NSString *name;
@end 
```

如何从另一个具有相同对象的数组中删除具有集合对象的数组？它可以通过我知道的迭代来完成。还有其他方法吗？

编辑：为清楚起见

我有带有 5 个 Set 对象的**数组 A ，我在****数组 B**中有 4 个 Set 对象， 数组 A 和数组 B 包含 3 个具有共同值的集合对象.. [**注意：内存可能不同**] 常见

我只需要一个**数组 C =数组 A - 数组 B**，它在结果数组 C 中有 2 个对象

谢谢你 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T06:50:38.953

您需要在类中实现`- (NSUInteger)hash`and`- (BOOL)isEqual:(id)object`方法`Set`。

例如：-

```
- (NSUInteger)hash {
   return [self.ItemId hash];
}

- (BOOL)isEqual:(id)object
{
    return ([object isKindOfClass:[self class]] &&
            [[object ItemId] isEqual:_ItemId])

} 
```

之后试试这个：

```
NSMutableSet *set1 = [NSMutableSet setWithArray:array1];
NSMutableSet *set2 = [NSMutableSet setWithArray:array2];
[set1 intersectSet:set2]; //this will give you only the obejcts that are in both sets

NSArray *commonItems = [set1 allObjects];

[mutableArray1 removeObjectsInArray:commonItems];//mutableArray1 is the mutable copy of array1 
```

`mutableArray1`删除公共对象后，所有对象的顺序与之前相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T07:27:07.577

通过使用`NSSet`，`NSPredicate`我们可以满足您的要求。

```
Assessors *ass1 = [[Assessors alloc] init];
ass1.AssessorID = @"3";

Assessors *ass2 = [[Assessors alloc] init];
ass2.AssessorID = @"2";

Assessors *ass3 = [[Assessors alloc] init];
ass3.AssessorID = @"1";

Assessors *ass4 = [[Assessors alloc] init];
ass4.AssessorID = @"2";

NSSet *nsset1 = [NSSet setWithObjects:ass1, ass2,  nil];
NSSet *nsset2 = [NSSet setWithObjects:ass3, ass4, nil];

// retrieve the IDs of the objects in nsset2
NSSet *nsset2_ids = [nsset2 valueForKey:@"AssessorID"];

// only keep the objects of nsset1 whose 'id' are not in nsset2_ids
NSSet *nsset1_minus_nsset2 = [nsset1 filteredSetUsingPredicate:[NSPredicate predicateWithFormat:@"NOT AssessorID IN %@",nsset2_ids]];

for(Assessors *a in nsset1_minus_nsset2)
    NSLog(@"Unique ID : %@",a.AssessorID); 
```

这里 Assessors 是我的 NSObject 类（在您的情况下设置），而 AssessorID 是该类的一个属性。

希望这能有所帮助。

# android - 如果我有许多具有不同 URL 的按钮，如何在 web 视图中设置 URL？

> ID：14995915
> 
> 赞同：1
> 
> 时间：2013-02-21T06:28:26.783
> 
> 标签：android, button, webview

例如，如果我有 3 个按钮，并且我想使用此按钮重定向到不同的 url，而不使用许多 webview，但只使用一个 webview。

```
button1 = http://example.com
button2 = http://stackoverflow.com
button3 = http://android.com 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T06:32:42.297

点击每个`Button`：

```
Intent intent = new Intent(context, THE_ACTIVITY_THAT_HOLDS_WEBVIEW.class);
intent.setData(Uri.parse("http://www.facebook.com"));
startActivity(intent); 
```

`WebView`根据`Button`单击的情况更改必须传递给的 URL 。

在`Activity`那个持有`WebView`：

```
WebView webView = (WebView) findViewById(R.id.web_view);
webView.getSettings().setJavaScriptEnabled(true);
webView.loadUrl(this.getIntent().getDataString()); 
```

如果你做的事情有点不同，请调整代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T06:32:56.837

将**HashMap**与**Integer、String 键值对**一起使用，

```
Like Map<Integer,String> webUrls = new HashMap<Integer,String>(); 
```

现在将按钮的 id 存储为键，将 url 存储为值。

```
webUrls.put(button1.getId(),"http://facebook.com"); 
```

并像`onClick()`按钮一样加载

```
String url = webUrls.get(view.getId());
webView.loadUrl(url); 
```

现在，您不必为每个按钮编写 onClick。只需在 onClick() 中，您就可以从 HashMap 中获取 Url。

# linux - 如何将某些文件从dos格式转换为unix

> ID：14995923
> 
> 赞同：3
> 
> 时间：2013-02-21T06:29:09.817
> 
> 标签：linux, bash, shell, dos2unix

我知道如何通过 use 将文件格式从 dos 更改为 unix `dos2unix`，但是如何更改目录树下的所有文件。可以`dos2unix`递归更改文件吗？

例如，我有一些文件如下：

```
TOPDIR
|
+-----dir1
|      |
|      +---file1,file2, file3
|
+-----dir2
       |
       +---file4,file5 
```

如何一次性更改它们，或使用一些 shell 脚本？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T06:38:13.633

最好做`find /path -type -f -exec dos2unix '{}' \;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T06:31:01.060

`find /path -name '*' -type f -exec dos2unix {} \;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T06:31:26.600

```
dos2unix -k `find . -type f`
find . -type f -exec dos2unix -k '{}' \;
find . -type f -print | xargs dos2unix -k 
```

可以从 TOPDIR 使用上述任何命令

# c# - C# 值不在预期范围内

> ID：14995924
> 
> 赞同：2
> 
> 时间：2013-02-21T06:29:10.993
> 
> 标签：c#

您好，我的应用程序出现了一个奇怪的错误。

有时我在设计视图中打开我的表单（表单未运行），我没有收到任何错误，有时我收到错误`value does not fall within expected range`。

当我关闭我的解决方案并再次打开它时，表单工作正常，然后开始运行应用程序，然后停止它并打开表单（同样的东西，它可能工作或有时它可能不工作）。

这并不总是发生在相同的形式上，它发生在随机的不同形式上，有时我可以在表格 1 中得到它，有时在表格 2 中，

![这是该错误的打印屏幕](../Images/a53f05ce44208663f2e3f95866073029.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-06-01T15:56:21.530

1.  关闭 Visual Studio 并删除所有 *.user 和其他临时或特定于用户的文件。
2.  打开 Visual Studio 并重建您的项目。
3.  打开表格，问题应该就解决了。

如果您使用 SVN，只需使用“清理”命令删除所有未版本控制或忽略的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-11T14:24:06.597

看到这个屏幕可能会让人抓狂，因为它是在设计时抛出异常的结果（即，如果它是在运行时抛出的，那么处理包罗万象的 AppDomain.CurrentDomain.UnhandledException 可能会提供线索）。

但是有一种方法可以通过使用 Visual Studio 调试 Visual Studio 来获取设计器尝试加载时引发的异常的可见性：

*   打开两个 Visual Studio 实例。
*   在主菜单上的实例一中选择调试\附加到进程
*   通过选择 devenv.exe 作为进程附加到 Visual Studio 的实例二。
*   现在只需在实例二中打开您的项目。

两个主要好处：

1.  INSTANCE ONE 的输出窗口将在您的解决方案加载时提供详细报告。
2.  当您尝试在实例二中打开项目中的设计器时发生的设计时异常将导致实例一中的异常中断。现在有时堆栈跟踪有帮助，有时没有。但我通常发现有一些可见性而不是根本没有可见性更有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-16T13:02:07.203

关闭 VS 然后删除 .suo 文件（.vs\solution_name\vXX.suo）。这将关闭所有选项卡，但您可以重新打开它们。

# entity-framework - GUID 性能

> ID：14995935
> 
> 赞同：0
> 
> 时间：2013-02-21T06:30:02.453
> 
> 标签：entity-framework, sql-server-2012

我们正在开发一个非常大的 OLTP 数据库（SQL server 2012），并考虑使用 GUID 作为主键（我要记住不要使其集群化），但是，我们不确定特别是性能的后果。我们首先使用 EF 代码。

有人可以帮我们决定吗？请包括文章链接。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T06:43:09.227

`GUID`s 似乎是您的主键的自然选择 - 如果您真的必须，您可能会争辩将其用作表的 PRIMARY KEY。我强烈建议**不要**使用该`GUID`列作为**clustering key**，SQL Server 默认会这样做，除非您明确告诉它不要这样做。

您确实需要将两个问题分开：

1.  主**键**是一个逻辑结构 - 唯一且可靠地标识表中每一行的候选键之一。这可以是任何东西，真的——一个`INT`、一个`GUID`、一个字符串——选择对你的场景最有意义的东西。

2.  **聚集键**（在表上定义**聚集索引**的一列或多列）——这是一个与*物理*存储相关的东西，在这里，一个小的、稳定的、不断增长的数据类型是你最好的选择——`INT`或者`BIGINT`作为你的默认选项.

默认情况下，SQL Server 表上的主键也用作集群键——但不必这样！在将以前的基于 GUID 的主键/集群键分解为两个单独的键——GUID 上的主（逻辑）键和单独`INT IDENTITY(1,1)`列上的集群（排序）键时，我个人看到了巨大的性能提升。

正如[Kimberly Tripp](http://www.sqlskills.com/BLOGS/KIMBERLY/post/GUIDs-as-PRIMARY-KEYs-andor-the-clustering-key.aspx) - 索引女王 - 和其他人多次声明的那样 - 作为集群键的 GUID 并不是最优的，因为由于它的随机性，它会导致大量的页面和索引碎片以及通常糟糕的性能。

是的，我知道 -`newsequentialid()`在 SQL Server 2005 及更高版本中有 - 但即使这样也不是真正的和完全顺序的，因此也会遇到与 GUID 相同的问题 - 只是不那么突出。

然后还有另一个问题需要考虑：表上的集群键也将添加到表上每个非聚集索引的每个条目中 - 因此您真的希望确保它尽可能小。通常，具有 2+ 十亿行的 INT 对于绝大多数表来说应该足够了 - 与作为集群键的 GUID 相比，您可以在磁盘和服务器内存中节省数百兆字节的存储空间。

快速计算 - 使用`INT`vs. GUID 作为主键和聚类键：

*   具有 1'000'000 行的基表（3.8 MB 与 15.26 MB）
*   6 个非聚集索引（22.89 MB 与 91.55 MB）

**总计：25 MB 与 106 MB** - 这只是在一张桌子上！

更多值得深思的东西——金伯利·特里普（Kimberly Tripp）的优秀作品——读一读，再读一遍，消化一下！这是 SQL Server 索引的福音，真的。

*   [GUID 作为 PRIMARY KEY 和/或集群键](http://www.sqlskills.com/BLOGS/KIMBERLY/post/GUIDs-as-PRIMARY-KEYs-andor-the-clustering-key.aspx)
*   [聚集索引辩论仍在继续](http://sqlskills.com/BLOGS/KIMBERLY/post/The-Clustered-Index-Debate-Continues.aspx)
*   [不断增加的聚类键 - 聚类索引辩论............再次！](http://www.sqlskills.com/BLOGS/KIMBERLY/post/Ever-increasing-clustering-key-the-Clustered-Index-Debateagain!.aspx)
*   [磁盘空间很便宜——这**不是**重点！](http://www.sqlskills.com/BLOGS/KIMBERLY/post/Disk-space-is-cheap.aspx)

# linux - 如何检测linux机器上是否安装了tomcat和ant

> ID：14995936
> 
> 赞同：3
> 
> 时间：2013-02-21T06:30:03.637
> 
> 标签：linux, apache, tomcat, ant, version

我正在尝试在我的 linux 机器上安装`Tomcat`和`Ant`，但在安装它们之前，我只需要检查它们是否已经安装。

**关于 tomcat**：

我用谷歌搜索了很多，并在我的机器上的以下目录中搜索了 tomcat

```
/usr/local/, /opt/, /usr/share/ 
```

但是我在上面的任何路径中都没有找到tomcat文件夹，是否表明`tomcat`没有安装？所以实际上

```
1\. what is the path to `look/find` exactly to know/check whether tomcat is installed or not in 
   all linux machines
2\. what will be the path the tomcat will be installed exactly after installation
3\. How to find the version of tomcat on any linux machine (if tomcat already installed) 
4\. Whether there are any commands to look for both whether `tomcat` installed and `ant` 
   installed 
```

**关于蚂蚁**：

我用谷歌搜索并得到了以下命令，因此执行后我得到了以下结果

```
sh-4.2$ ant -v 
```

**结果**

```
sh-4.2$ ant -v
Apache Ant(TM) version 1.8.2 compiled on November 21 2011
Trying the default build file: build.xml
Buildfile: build.xml does not exist!
Build failed 
```

所以实际上

```
1\. Does the above result mean that `Ant` is installed ? or not ?
2\. what is the path to `look/find` exactly to know/check whether ant is installed or not in 
   all linux machines
3\. what will be the path the `ant` will be installed exactly after installation
4\. How to find the version of `Ant` on any linux machine (if Ant already installed) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T06:48:57.257

一般来说，你可以检查它们是否在 $PATH 上，如果它们不在 $PATH 上，则安装一个。

对于蚂蚁：

`ant -v`代表详细，`ant -version`打印出它的版本。

```
 -help, -h
          print help on the command line options

   -projecthelp, -p
          gives information on possible targets for this project

   -version
          prints the version number and then exits ant

   -quiet, -q
          be extra quiet

   -verbose, -v
          be extra verbose

   -debug, -d
          print debugging information

   -emacs, -e
          produce logging information without adornments

   -logfile <file>, -l <file>
          use the given file to output log to

   -logger <classname>
          the class which is to perform logging

   -listener <classname>
          add an instance of the given class as a project listener

   -noinput
          do not allow interactive input

   -buildfile <file>, -file <file>, -f <file>
          use  the  given buildfile instead of the default build.xml file.
          This is the ant equivalent of Makefile

   -D<property>=<value>
          use value for the given property

   -keep-going, -k
          execute all targets that do not depend on failed target(s)

   -propertyfile <file>
          load all properties from file with -D properties  taking  prece-
          dence

   -inputhandler <class>
          the class which will handle input requests

   -find <file>, -s <file>
          (s)earch  for  buildfile  towards the root of the filesystem and
          use it

   -nice number
          A niceness value for the main thread: 1 (lowest)  to  10  (high-
          est); 5 is the default

   -nouserlib
          Run ant without using the jar files from ${user.home}/.ant/lib

   -noclasspath
          Run ant without using CLASSPATH

   -autoproxy
          Java 1.5+ : use the OS proxies

   -main <class>
          override ant's normal entry point 
```

对于Tomcat：

如果 tomcat/bin 在 $PATH 变量上，version.sh 将打印出版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-08T09:46:06.163

对于 linux ubuntu 18.04：

```
Go to terminal and command:$ sudo systemctl status tomcat 
```

此命令还显示是否正在运行 tomcat（如果已安装）

# objective-c - WebView 中的 OSX OAuth redirect_uri

> ID：14995937
> 
> 赞同：6
> 
> 时间：2013-02-21T06:30:04.183
> 
> 标签：objective-c, macos, oauth

我正在尝试通过 OAuth 验证 OSX 应用程序 - 特别是使用[Instagram API](http://instagram.com/developer/authentication/)。我已经使用 Instagram 设置了一个应用程序 - 有客户端 ID 和密码 - 但我不确定如何处理`redirect_url`以及如何检索 access_token，一旦通过身份验证。

到目前为止，我只是一个简单的 WebView 加载登录页面......

```
[[_webView mainFrame] loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"https://instagram.com/oauth/authorize/?client_id=THECLIENTID&redirect_uri=REDIRECT_URI&response_type=code"]]]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T17:13:56.790

`- (void)webView:(WebView *)webView didFinishLoadForFrame:(WebFrame *)webFrame`从[WebFrameLoadDelegate](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/WebKit/Protocols/WebFrameLoadDelegate_Protocol/Reference/Reference.html)非正式委托实现该方法。然后（在 Interface Builder 中）将插座`frameLoadDelegate`从 WebView 连接到您实现的类的实例`- (void)webView:(WebView *)webView didFinishLoadForFrame:(WebFrame *)webFrame`。示例实现：

```
- (void)webView:(WebView *)webView didFinishLoadForFrame:(WebFrame *)webFrame {
    NSString *currentURL = [[[[webFrame dataSource] request] URL] absoluteString];
    NSLog(@"Our WebView just loaded: %@", currentURL);
    if ([currentURL hasPrefix:yourRedirectURIString]) {
        // We are at the redirect URI!
    }
} 
```

# matlab - 未定义的函数或变量“somevariable”，matlab

> ID：14995940
> 
> 赞同：0
> 
> 时间：2013-02-21T06:30:16.973
> 
> 标签：matlab, undefined

这是matlab给出的错误

```
Undefined function or variable "stream".

Error in ==> proclpc at 158
stream = filter(1, [1 -preemp], stream)';

Error in ==> changepitchf1 at 43
[aCoeff,resid, pitch, G, parcor, stream ] = proclpc(input2, Fs, L);

Error in ==> voiceunvoiced14 at 126
      processedframe = changepitchf1(patch1, gci_2 , 0.7, Fs); 
```

同样的事情总是发生，但有时在我初始化变量时它会消失。但有时它不会。我不明白这个问题的根本原因。

`changepitchf1`是我创建的一个函数。我从`voicedunvoiced14.m`. `proclpc`是 中使用的函数`changepitchf1`。这是matlab工具箱自带的功能。

# ruby - Rubygems 安装问题

> ID：14995944
> 
> 赞同：0
> 
> 时间：2013-02-21T06:30:27.073
> 
> 标签：ruby, rubygems

我正在尝试安装 ruby​​gems，与管家（IRC Bot）一起使用

Ruby 安装成功，使用 yum install ruby

和 ruby​​ -v 给我`ruby 1.8.5 (2006-08-25) [i386-linux]`

现在，安装 ruby​​ gems，我正在使用`wget http://rubyforge.org/frs/download.php/76728/rubygems-1.8.25.zip`然后`unzip rubygems-1.8.25.zip`一切都解压缩了

现在，在我的[教程中，我正在使用](http://docs.rubygems.org/read/chapter/3)它告诉我去做`ruby setup.rb`我正在做的事情，然后，我收到了这个错误：

```
./lib/rubygems.rb:335: warning: parenthesize argument(s) for future version
./lib/rubygems.rb:517: warning: parenthesize argument(s) for future version
./lib/rubygems.rb:32:in `require': ./lib/rubygems/deprecate.rb:54: syntax error (SyntaxError)
        define_method name do |*args, &block| # TODO: really works on 1.8.7?
                                     ^
./lib/rubygems/deprecate.rb:55: syntax error
./lib/rubygems/deprecate.rb:64: syntax error
./lib/rubygems/deprecate.rb:69: syntax error    from ./lib/rubygems.rb:32
        from setup.rb:27:in `require'
        from setup.rb:27 
```

我不知道从哪里开始尝试解决这个问题，或者我需要做什么。我正在寻找安装 ruby​​gems，我什至做得对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T00:36:39.737

确保 ruby​​gems 的版本与您安装的 ruby​​ 版本兼容。

对于 Ruby 1.8.5，最新的兼容 ruby​​gems 版本是 ruby​​gems-1.3.5

```
$ ruby --version
ruby 1.8.5 (2006-08-25) [i386-linux] 
```

以下是安装所需版本的方法：

```
$ cd ~/sources
$ wget http://rubyforge.org/frs/download.php/60718/rubygems-1.3.5.tgz
$ tar xzvf rubygems-1.3.5.tgz
$ cd rubygems-1.3.5
$ sudo ruby setup.rb
RubyGems 1.3.5 installed

=== 1.3.5 / 2009-07-21

Bug fixes:

* Fix use of prerelease gems.
* Gem.bin_path no longer escapes path with spaces. Bug #25935 and #26458.

Deprecation Notices:

* Bulk index update is no longer supported (the code currently remains, but not
  the tests)
* Gem::manage_gems was removed in 1.3.3.
* Time::today was removed in 1.3.3.

------------------------------------------------------------------------------

RubyGems installed the following executables:
    /usr/bin/gem 
```

相信您现在已经弄清楚了，但也许将来必须在较旧的操作系统上安装 ruby​​gems 的其他人可以从这些信息中受益。

这是查找 ruby​​gems 源下载文件的 URL： [http ://rubyforge.org/frs/?group_id=126&release_id=15425](http://rubyforge.org/frs/?group_id=126&release_id=15425)

# delphi - Delphi 7调用DelphiXE2 dll获取损坏的宽字符串

> ID：14995945
> 
> 赞同：1
> 
> 时间：2013-02-21T06:30:35.430
> 
> 标签：delphi, dll, unicode, delphi-7, widestring

我有一个 Delphi 7 应用程序，它需要调用一个对于可用的 SOAP 导入器来说太新的 SOAP API。我很满意 D7 调用 SOAP API 需要付出太多努力才值得。但我也有 Delphi XE2，它可以导入 SOAP 并非常愉快地调用它。所以我在 XE2 中编写了一个简单的 dll 包装器，它公开了soap接口的必要部分。我可以从 XE 程序中调用 dll。

在 Delphi7 中，我从 XE 中获取了 SOAP API 导入文件，去掉了 {$SCOPED_ENUMS ON} 定义和调用不可用 SOAP 包装器的初始化部分，并在整个过程中将字符串更改为宽字符串。编译。我正在使用启用了 ShareMM 的 FastMM 来进行字符串传递工作并避免进行所有 stdcall。

我尝试这样做的原因是，如果它有效，它将使 SOAP shim 非常易于编码和维护，因为 90% 的代码是由 XE2 SOAP 导入器生成的，这意味着当我们将 D7 应用程序移至现代 Delphi 代码将基本保持不变。

但是当我运行它时，我得到了奇怪的字符串（以及随之而来的访问冲突）。我有一些不使用 SOAP 代码的简单函数来使问题更加明显。

将 Delphi7 exe 中的宽字符串传递到 DelphiXE2 dll 中，字符串长度加倍（根据 Length() 函数），但没有匹配的数据转换。因此，D7 中的宽字符串“123”在 XE2 中变为“1234....”，其中 .... 是堆栈上碰巧出现的任何垃圾。被视为字节数组都具有预期的半零字节。

将宽字符串从 XE2 dll 传递回 D7 我得到了镜像效果 - 字符串长度减半并且字符串被简单地截断（“1234”变为“12”）。

我正在粘贴代码，因为我知道你会要求它。

在 Delphi XE2 中，我正在导出这些函数：

```
// testing
function GetString(s:string):string; export;
function AddToString(s:string):string; export;

implementation

function GetString(s:string):string;
begin
  Result := '0987654321';
end;

function AddToString(s:string):string;
begin
  Result := s + '| ' + IntToStr(length(s)) + ' there is more';
end; 
```

在德尔福 7 中：

```
function GetString(s:widestring):widestring; external 'SMSShim.dll';
function AddToString(s:widestring):widestring; external 'SMSShim.dll';

procedure TForm1.btnTestGetClick(Sender: TObject);
var
  s: widestring;
begin
  s := widestring('1234');
  Memo1.Lines.Add(' GetString: ' + GetString(s));
end;

procedure TForm1.btnTestAddClick(Sender: TObject);
var
  s: widestring;
begin
  s := widestring('1234567890');
  Memo1.Lines.Add(' AddToString: ' + AddToString('1234567890'));
end; 
```

我可以从任一端运行，使用 D7 可执行文件作为主机应用程序来调试 dll。在调试器中检查参数和返回值会得到上述结果。

烦人的是，如果我在 delphi7 中将导入声明为字符串，我会得到正确的长度但无效的数据。如图所示，当我尝试返回时，我得到了有效的数据、错误的长度和访问冲突。

将其全部设置为 stdcall 不会改变行为。

显而易见的解决方案是只编写简单的包装函数，以准确地公开我现在需要的功能。我可以这样做，但我更喜欢上述狡猾的方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T06:34:05.397

在 Delphi XE2（或任何高于 2009 的版本）中无法禁用 UNICODE，但是有许多资源可以帮助您迁移应用程序。

*   [`White Paper: Delphi and Unicode (from Marco Cantù)`](http://edn.embarcadero.com/article/38980)
*   [Delphi 转换 Unicode 问题](https://stackoverflow.com/questions/1598211/delphi-conversion-unicode-issues)
*   [“全球化您的 Delphi 应用程序” - Delphi Unicode 资源](http://blogs.embarcadero.com/pawelglowacki/2009/06/16/38739/)
*   [迁移到 Delphi 2009/2010 Unicode 的资源编译](http://theroadtodelphi.wordpress.com/2009/10/22/compilatation-of-resources-for-delphi-20092010-unicode/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T18:46:32.360

有问题的 DLL 导出期望接收`UnicodeString`参数的函数。（如您所知，该`string`类型在 Delphi 2009 中成为别名`UnicodeString`。） Delphi 7 应用程序无法使用该 DLL；运行时库不知道如何操作该类型，因为它在 2002 年 Delphi 7 发布时还不存在。

尽管 的字符大小与`UnicodeString`兼容`WideString`，但它们不是同一类型。`UnicodeString`结构类似于 new `AnsiString`，因此它有一个长度字段、一个引用计数、一个字符大小和一个代码页。`WideString`有一个长度字段，但它携带的任何其他元数据都没有记录。`WideString`只是 Delphi 暴露 COM`BSTR`类型的方式。

一个通用的规则是永远不要导出 C 不能使用的 DLL 函数^(。1)特别是，这意味着对于任何函数参数和返回类型只使用 C 兼容的类型，所以`string`它已经过时了，但`WideString`由于以下原因是安全的它的`BSTR`根源。

更改 DLL 以`WideString`用于其参数，而不是`string`.

* * *

¹保持 C 兼容性还意味着使用 C 支持的调用约定。`register`Microsoft C 不支持Delphi 的默认调用约定，因此请使用`cdecl`or`stdcall`代替，就像您在曾经使用过的每个 Windows DLL 中看到的那样。

# objective-c - 在 mkmapview 上添加注释并将 mapview 设置为添加新注释的区域

> ID：14995955
> 
> 赞同：0
> 
> 时间：2013-02-21T06:31:01.897
> 
> 标签：objective-c, mkmapview, mkannotation

我有`MKMapView`很多`MKAnnotations`。单击按钮时，将添加另一组注释。

现在单击按钮，我有一个注释数组。我将注释数组添加到`Mkmapview`.

我希望地图视图移动到添加新注释的区域，而无需缩小或放大。

请帮我解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T06:41:27.037

我认为将中心设置为注释数组中的一个坐标将达到您的目的

```
[_mapView setCenterCoordinate:annotationCoOrd zoomLevel:_zoomLvl animated:YES]; 
```

其中 ,annotationCoOrd 是数组中的坐标之一， _zoomLvl 是您当前的缩放级别。

如果您在此处发布代码会更有帮助。

缩放级别

```
- (double)getZoomLevel{
MKCoordinateRegion reg=self.region; // the current visible region
MKCoordinateSpan span=reg.span; // the deltas
CLLocationCoordinate2D centerCoordinate=reg.center; // the center in degrees
// Get the left and right most lonitudes
CLLocationDegrees leftLongitude=(centerCoordinate.longitude-(span.longitudeDelta/2));
CLLocationDegrees rightLongitude=(centerCoordinate.longitude+(span.longitudeDelta/2));
CGSize mapSizeInPixels = self.bounds.size; // the size of the display window

// Get the left and right side of the screen in fully zoomed-in pixels
double leftPixel=[self longitudeToPixelSpaceX:leftLongitude]; 
double rightPixel=[self longitudeToPixelSpaceX:rightLongitude];
// The span of the screen width in fully zoomed-in pixels
double pixelDelta=abs(rightPixel-leftPixel);

// The ratio of the pixels to what we're actually showing
double zoomScale= mapSizeInPixels.width /pixelDelta;
// Inverse exponent
double zoomExponent=log2(zoomScale);
// Adjust our scale
double zoomLevel=zoomExponent+20; 
return zoomLevel; 
```

}

```
- (double)longitudeToPixelSpaceX:(double)longitude
{
return round(MERCATOR_OFFSET + MERCATOR_RADIUS * longitude * M_PI / 180.0);
}

- (double)latitudeToPixelSpaceY:(double)latitude
{
return round(MERCATOR_OFFSET - MERCATOR_RADIUS * logf((1 + sinf(latitude * M_PI / 180.0)) / (1 - sinf(latitude * M_PI / 180.0))) / 2.0);
} 
```

要获得地图的缩放级别，请在您的 MKMapView 实现（覆盖 MKMapview 实现）中添加上述代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T06:52:49.203

使用 belo 方法进行移动而不缩放

```
 [mapview setCenterCoordinate:cordinate animated:YES]; 
```

# mysql - 如何在本地 phpmyadmin 中设置/映射远程 mysql 数据库

> ID：14995959
> 
> 赞同：1
> 
> 时间：2013-02-21T06:31:10.490
> 
> 标签：mysql, database, phpmyadmin

我正在使用远程开发服务器。我有那个远程服务器的 mysql 主机名、数据库名、用户名、密码。我想在我的本地 phpmyadmin 中设置/复制/映射该开发服务器 mysql，以便我可以在本地访问远程服务器数据库（例如：-/mylocalip/remote-server-db）。因此，我不必进行 ssh 连接并在终端中打开 mysql。我们如何在 phpmyadmin/config.inc.php 中做到这一点。

让我再通过一个例子来解释一下。假设可以通过 213.81.203.130/phpmyadmin 访问远程服务器数据库。我想通过创建一个映射（即 192.168.10.140/remote-db）从我的本地 IP 通过别名访问该数据库。基本上，这可以通过在 phpmyadmin/config.inc.php 或 config.db.php 中添加某种代码来完成。但是我不确定该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T07:14:23.057

如果你想避免使用终端，为什么不试试**[MySQL Workbench](http://dev.mysql.com/downloads/workbench/)**连接数据库呢？

**更新**

鉴于对这个问题的所有观点，我正在添加一个更准确地匹配该问题的解决方案。请查看[此链接](http://digitalmemo.neobie.net/2010/10/12/connecting-to-multiple-database-on-phpmyadmin/)，我相信它会有所帮助。它涉及编辑 phpmyadmin config.inc.php 文件以添加其他服务器。这是保持本地主机连接并添加任何远程数据库连接的方法。只需从登录屏幕的下拉菜单中选择服务器到 phpmyadmin。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T07:39:12.267

有 3 种方法可以设置它

方法 #1：MySQL 复制

在从站具有此选项的情况下设置 MySQL 复制

```
replicate_do_table=mydb.mytable 
```

然后，您执行的任何 DML（INSERT、UPDATE、DELETE）或 DDL（ALTER TABLE）将立即转到 serverB。这使得方法#1 是最快和最细粒度的方法。

方法#2：将表复制到另一台服务器

而不是rehash，这是一个较早的帖子，RolandoMySQLDBA 先生在 2011 年 5 月 31 日为这个方法做了：[如何将表从 MySqlServer_A 复制到 MySqlServer_B？][1]

方法 #3：联合表（仅限 MyISAM）

假设 serverA 上的 mytable 看起来像这样

> 创建表 mydb.mytable ( ... ) ENGINE=MyISAM;

您可以像这样在 serverA 上运行它来映射 serverB 中的目标表

> 创建表 mydb.mytable_remote LIKE mytable; ALTER TABLE mydb.mytable_remote ENGINE=FEDERATED CONNECTION='mysql://username:password@serverB/mydb/mytable';

# ruby-on-rails-3 - Rspec 显示与浏览器不同的状态代码

> ID：14995963
> 
> 赞同：0
> 
> 时间：2013-02-21T06:31:36.947
> 
> 标签：ruby-on-rails-3, rspec

我正在尝试为 Rails 中的自定义重定向页面编写 rspec 测试。基本上，我在 routes.rb 中有一个通配符匹配，它获取一个页面名称，以及一个“页面”控制器中的一个 show 方法，用于检查该名称的部分是否存在。如果它没有找到匹配的部分，它会呈现一个 404 页面并将状态设置为 404。所有这些都在浏览器中工作，但是 rspec 将其视为 200“OK”响应，而不是 404。

代码：页面控制器显示方法（partial_exists？是我已经彻底测试过的私有方法，我可以使用测试日志验证 _missing.html.erb 在 rspec 运行时按预期呈现）

```
def show
  @page_name = params[:page_name].to_s.gsub(/\W/,'')
  unless partial_exists?(@page_name)
    render :partial => 'missing', :status => :not_found
  end
end 
```

路线.rb：

```
match '/' => 'pages#show', :page_name => 'index'
match '*page_name' => 'pages#show' 
```

规格：

```
require 'spec_helper'

describe PagesController do

render_views

  describe "get page name of request" do
    it "should generate http success for a defined partial" do
      visit '/'
      response.should be_success
    end

    it "should give respond with the 404 missing page for an undefined partial" do
      visit '/blahblahblah'
      response.status.should be(404)
    end
  end

end 
```

第一个测试按预期运行，并呈现 _index.html.erb 部分状态代码为 200。第二个测试呈现 _missing.html.erb（我通过查看测试日志验证了这一点），但报告了一个状态代码200，而不是预期的 404。当我在浏览器中运行它时，它会使用状态码 404 呈现 _missing.html.erb。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T23:18:26.283

您似乎将请求（功能）规范与控制器规范混淆了。`visit`用于请求规范。对于控制器规范，您需要这样的东西：

```
 describe "get page name of request" do
    it "should generate http success for a defined partial" do
      get :index
      response.should be_success
    end
 end 
```

使用`get`或`post`与适当的动作名称一起测试控制器中的相应动作。

# jsp - 在 JSP 页面中显示 ArrayList 值

> ID：14995971
> 
> 赞同：0
> 
> 时间：2013-02-21T06:32:18.477
> 
> 标签：jsp, struts, jsp-tags, struts-1, struts-tags

我有这样的场景..

```
ArrayList<String> list1=new ArrayList<String>();
     list1.add("str1");
     list1.add("str2");
     list1.add("str3");

ArrayList<String> list2=new ArrayList<String>();
     list1.add("str1");
     list1.add("str2");
     list1.add("str3");
     .
     .// like this i have 10 lists
     .
    list10.

ArrayList<ArrayList<String>> AllLists=new  ArrayList<ArrayList<String>>();

    AllLists.add(list1);
    AllLists.add(list2);
      .
      .
    AllLists.add(list10);

in Struts Action Class 
   request.setAttribute("allLists",AllLists); 
```

如何使用在 JSP 页面中显示此 Arraylist 值

`<logic:iterator> and <bean:write>`标签给我一些想法..

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:36:57.123

```
<logic:notEmpty name="allLists" indexId="idx">
  <logic:iterate id="value" name="allLists">
    <bean:write name="value"/> or ${value} with index ${idx}.
  </logic:iterate>
</logic:notEmpty> 
```

# c# - 从 Visual Studio 2008 访问 Oracle 数据库

> ID：14995972
> 
> 赞同：2
> 
> 时间：2013-02-21T06:32:26.353
> 
> 标签：c#, .net, oracle, oracle10g, oracle11g

我需要能够从 Visual Studio 2008（框架 3.0/3.5）访问 Oracle 数据库。数据库版本为 11g。

但是我可能还需要访问这个数据库的旧版本，可以追溯到 2007 年。我厌倦了在我的具有 Windows 7 企业版的台式计算机上安装 Oracle 数据库客户端 11gR2。
它不是从设置菜单运行的，而是从后台运行的。确实注意到 C:/Oracle 中有一个文件夹，其中包含 2 个文件 sqlnet.ora 和 TnsNames.ora，但除此之外，我注意到在 c:\windows\assembly 中没有安装 Oracle.DataAccess 组件。

我需要安装哪些客户端或工具才能从 Visual Studio 2008 访问 Oracle 版本？

假设您建议每个数据库版本都有一个客户端版本，我可以在另一个之上安装一个客户端版本吗？

现在我已经安装了客户端 11gR2，你能告诉我是否需要安装它吗，我在“所有程序”菜单下没有看到卸载程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T07:38:45.343

首先，您需要按照评论中的说明安装[ODAC](http://www.oracle.com/technetwork/database/windows/downloads/index-101290.html)。

然后在您的项目中您需要参考`Oracle.DataAccess`，并且在您的代码中您需要包含以下内容

```
using Oracle.DataAccess.Client;
using Oracle.DataAccess.Types; 
```

# asp.net - ASP.NET 连接在 >2MB 图像文件处理时意外关闭

> ID：14995976
> 
> 赞同：0
> 
> 时间：2013-02-21T06:32:36.300
> 
> 标签：asp.net, image-processing

我有以下代码：

```
var myImage = Image.FromStream(imageStream); 
```

一旦我的应用程序遇到这行代码，它就会抛出以下异常：

```
 System.Net.WebException: The request was aborted: 
           The connection was closed unexpectedly. 
```

请注意，我的应用程序位于共享主机上，并且仅在大于 2MB 的图像文件上引发异常。

有什么解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T06:44:48.270

尝试增加 web 配置文件中的响应时间。

```
<?xml version="1.0" encoding="utf-8" ?>
 <configuration>
  ...
  <system.web>
   <httpRuntime executionTimeout="90" maxRequestLength="4096"
    useFullyQualifiedRedirectUrl="false"
    minFreeThreads="8"
    minLocalRequestFreeThreads="4"
    appRequestQueueLimit="100" />
 </system.web>
... 
</configuration> 
```

有关详细信息，请参阅[msdn 页面](http://msdn.microsoft.com/en-us/library/e1f13641(vs.71).aspx)。
[如何增加 web.config 中执行 sql 查询的时间](https://stackoverflow.com/questions/7976737/how-to-increse-time-in-webconfig-for-executing-query)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T08:56:14.627

我发现了这个问题。我`debug=true`在`web.config`文件中有将`executionTimeout`值覆盖为系统默认值的文件。

# list - 悬停时是否可以更改嵌套列表的颜色？

> ID：14995984
> 
> 赞同：0
> 
> 时间：2013-02-21T06:32:59.910
> 
> 标签：list, css, nested

我创建了一个仅 CSS 的导航，我试图弄清楚当鼠标悬停在嵌套列表中时是否可以更改文本的颜色。

```
 <div id="navigation">
    <ul class="top-level">
        <li><a href="#">Home</a></li>
        <li><a href="#">Residential</a>
            <ul class="sub-level">
                <li><a href="#">Project 1</a></li>
                <li><a href="#">Project 2</a></li>
                <li><a href="#">Project 3</a></li>
                <li><a href="#">Project 4</a></li>
            </ul> 
```

因此，当我将鼠标悬停在“住宅”上时，会出现“项目 1 - 4”，并且我设法使文本的颜色和背景与“住宅”不同。但是，我现在想做的是在悬停时更改“项目 1-4”中文本的颜色。这在 CSS 中可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T06:39:39.430

您可以使用**[CSS 伪类](http://www.w3schools.com/css/css_pseudo_classes.asp)**来实现这一点。

`.elementclass:hover`可用于在悬停时设置元素样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T17:44:49.973

我想通了...我很确定我已经尝试过了，但也许由于某种原因它没有更新。显然，在下面的课程下，我需要添加白色，然后我需要确保下面的课程也有黑色（它确实如此）。BlasterAlfred 我也必须给你一些荣誉。

```
#navigation a:hover{
text-decoration: none;
color: white;
}

#navigation li li a {
color: black;
} 
```

# list - 根据 Racket 中的用户选择从列表列表中删除元素

> ID：14995991
> 
> 赞同：0
> 
> 时间：2013-02-21T06:33:33.077
> 
> 标签：list, racket

如问题所示，我正在尝试获取用户输入以从列表列表中删除元素。该列表的格式是这样的。 `'((X X X) (X X X X) (X X))`其中每个子列表包含任意数量的 X。

用户为每个子列表选择 1,2,3,...。因此，如果用户键入 1，则`'(X X X)`选择子列表。然后用户选择要删除多少元素。

我为此拥有的当前代码如下。

```
(define (humanTurn rows player playerNumber)
    (drawBoard (with-handlers ([exn:fail?
                                  (lambda (exn)
                                      (display 
                                           "ILLEGAL MOVE, PLEASE ENTER A VALID NUMBER\n"))])
                              (getRowAndSticks rows))
               (list (first (rest player)) (first player)) 
               (cond [(equals? playerNumber 1) 2]
                     [(equals? playerNumber 2) 1]
                     [else "error"])))

(define (getRowAndSticks rows)
    (list-tail (list-ref rows (sub1 (getRow)))
               (begin
                   (display "How many sticks:........ ")
                   (read))))

(define (getRow)
    (display "Which row do you choose: ")
    (read)) 
```

问题是我不知道如何将列表重新附加在一起。我只设法获得了从中删除元素的列表。我没有看到任何解决方案，因为我不允许使用变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T06:49:25.437

我很难遵循您的代码，但是要将列表重新连接在一起，请使用`list`函数或`list*`. 两者之间的区别在于后者列出了所有论点，除了最后一个附加的论点。

# google-chrome-extension - 在 Chrome 上劫持 OnAuthRequired 事件（通过扩展程序）后，如何返回浏览器向用户寻求身份验证？

> ID：14995995
> 
> 赞同：2
> 
> 时间：2013-02-21T06:33:57.467
> 
> 标签：google-chrome-extension

所以我试图通过执行以下操作自动登录某个站点

```
chrome.webRequest.onAuthRequired.addListener(function(){..}); 
```

但是假设身份验证失败，我该如何逃出 lambda 并告诉浏览器我们放弃了，请向用户寻求身份验证？

现在发生的情况是，如果我返回，它只会在状态栏上显示“等待扩展 blabla..”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-04T13:23:39.860

如果您无法提供身份验证详细信息，则应使用 asyncBlocking 并调用不带参数的回调。

```
chrome.webRequest.onAuthRequired.addListener(
  function(details, callback) {
    if (everything is fine) {
      callback({authCredentials: {username: email, password: password}});
    } else {
      callback();
    }
  }, 
  {urls: ["<your urls>"]},
  ["asyncBlocking"]
); 
```