# StackOverflow 问答 14986000-14986999

# parse-platform - Parse.com REST API 方法 $in 似乎不起作用

> ID：14986006
> 
> 赞同：1
> 
> 时间：2013-02-20T17:21:07.447
> 
> 标签：parse-platform

这将返回 0 个结果：

```
https://api.parse.com/1/classes/Photo?where={"event_id":{"$in":[383,391,392]},"approved":"1"}&order=-createdAt 
```

但这会按预期返回事件 383 的所有结果：

```
https://api.parse.com/1/classes/Photo?where={"event_id":"383","approved":"1"}&order=-createdAt 
```

第一个查询是否应返回与第二个查询相同的结果以及为事件 391 或 392 找到的任何照片？

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T20:09:24.077

从 Parse.com 开发人员那里听到，他指出“event_id”是一个字符串，上面的第一个查询在需要字符串数组时传入一个数字数组。

# eclipse - GWT 和 Eclipse：UiBinder - 字段在模板文件中没有对应的字段

> ID：14986012
> 
> 赞同：1
> 
> 时间：2013-02-20T17:21:30.890
> 
> 标签：eclipse, gwt, field, uibinder

具有以下内容：

```
public class PromotionTableComposite<T extends Promotion> extends Composite {

    @UiField(provided=true)
    protected CellTable<T> displayTable;

    @UiField(provided=true)
    protected SimplePager pager; 
```

和

```
<!DOCTYPE ui:UiBinder SYSTEM "http://dl.google.com/gwt/DTD/xhtml.ent">
<ui:UiBinder
  xmlns:ui="urn:ui:com.google.gwt.uibinder"
  xmlns:g="urn:import:com.google.gwt.user.client.ui"
  xmlns:c="urn:import:com.google.gwt.user.cellview.client">

  <g:DockLayoutPanel
    unit="EM">
    <!-- DataGrid. -->
    <g:center>
      <c:CellTable
        ui:field='displayTable'/>
    </g:center>

    <!-- Pager. -->
    <g:south
      size="3">
      <g:HTMLPanel>
        <table
          style="width:100%">
          <tr>
            <td
              align='center'>
              <c:SimplePager
                ui:field='pager'/>
            </td>
          </tr>
        </table>
      </g:HTMLPanel>
    </g:south>
  </g:DockLayoutPanel>
</ui:UiBinder> 
```

Eclipse 给了我错误：

“字段displayTable在模板文件PromotionTableComposite.ui.xml中没有对应的字段”

“Field pager 在模板文件 PromotionTableComposite.ui.xml 中没有对应的字段”。

当我运行项目时，出现以下运行时错误：

java.lang.AssertionError: 'provided = true' 的 UiField 寻呼机为空

我做错了什么？我检查了构建属性，使其包含所有源文件并排除非（因此 ui.xml 文件与 java 文件一起包含）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T22:34:04.573

我的猜测是，在你的构造函数中你没有初始化`displayTable`和`pager`之前`initWidget(uiBinder.createAndBindUi(this));`。

```
private static PromotionTableCompositeUiBinder uiBinder = 
                             GWT.create(PromotionTableCompositeUiBinder.class);

@UiField(provided=true)
CellTable<T> displayTable;

@UiField(provided=true)
SimplePager pager;    

public PromotionTableComposite(){

    this.displayTable = new CellTable<T>();
    this.pager = new SimplePager();

    initWidget(uiBinder.createAndBindUi(this));

    ...

} 
```

# json - 如何在 MacOS 上的 Excel 中从 HTTP 端点检索 JSON 并解析它？

> ID：14986015
> 
> 赞同：8
> 
> 时间：2013-02-20T17:21:38.880
> 
> 标签：json, excel, vba, macos

我已经看到[如何使用 VBA 从 Excel 向服务器发送 HTTP POST 请求？](https://stackoverflow.com/questions/158633/how-can-i-send-an-http-post-request-to-a-server-from-excel-using-vba)

以及 描述如何使用 QueryTables 从 HTTP 端点检索数据[的 MacOS 友好响应。](https://stackoverflow.com/a/4617566/48082)它演示了如何检索单个字符串并将其填充到单元格中。

都好。现在我想检索多个值。这是一个很大的 JSON 字符串，我想在填充一个或多个单元格之前在 Excel VBA 中对其进行后处理。

这怎么可能？

我可以想到一种方法 - 将 QueryTables 事物的结果放入隐藏单元格，然后对隐藏单元格进行后处理以填充其他单元格。我还没有评估一些用于 VBA 的 JSON 库。

但这似乎很hacky。真的，我不想依赖将 JSON 作为值存储在单元格中。我只想将它存储到我的 VBA 代码中的变量中。就像我在使用 CreateObject("MSXML2.ServerXMLHTTP") 一样。（*注意：CreateObject() 在 MacOS 上的 Excel 中不可用*）。

而且我知道最好的答案可能是： *如果您想在 Excel 中运行应用程序，请购买一台 Windows 机器。*

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-01T18:20:08.953

您可以`Worksheets(0).QueryTable`在 VBA 中实际使用该方法。只需查看手册或谷歌即可。因此，您不必将 json 字符串存储到单元格中。

或者我用过类似的东西

```
Public Function GetWebSource(ByRef URL As String) As String
    Dim xml As IXMLHTTPRequest
    On Error Resume Next
    Set xml = CreateObject("Microsoft.XMLHTTP")
    With xml
        .Open "GET", URL, False
        .send
        GetWebSource = .responseText
    End With
    Set xml = Nothing
End Function 
```

下载一个 json 字符串。

四处寻找解析器。像[Parsing JSON in Excel VBA](https://stackoverflow.com/questions/6627652/parsing-json-in-excel-vba)这样的东西应该可以满足您的需求。

# php - 如何在 URL 中使用字母数字字符串作为 id 而不是整数？

> ID：14986027
> 
> 赞同：0
> 
> 时间：2013-02-20T17:22:08.057
> 
> 标签：php, mysql, url, hash

我正在构建一个网站，其中页面上有公共内容，但我不希望用户能够通过更改`id`直接在 URL 中的行来猜测下一页是什么。

我在[这里](https://stackoverflow.com/questions/2581510/why-do-websites-generate-random-alphanumeric-strings-for-urls-instead-of-using-r)发现要做的方法是对十进制/基数 36 进行编码和解码。但是这种方法的问题`id`是仍然很容易猜到，因为 1 仍然是 1，而 13 将是 D，等等。

使用较长的哈希/字母数字字符串作为的最佳实践和方法是`id`什么？有点像 Youtube URL，没有任何冲突的可能性？

感谢您的帮助和建议，非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:29:09.197

您可以加密/解密您的 ID 而不是编码。但是，听起来您有必须按顺序执行的特定步骤（页面）序列。

我相信一个更好的方法是有一个业务类来确定用户是否真的被允许（还）看到请求的页面。这样，您可以使用 URL 上的 ID，但依靠您的代码来确定访问权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T17:34:42.883

也许最好的想法是使用简单的非线性算法修改散列之前的数字。也许是这样的：

```
<?php

$id = ($_GET['id']*3)+2;

$id = base_convert($id, 10, 36); 
```

然后取消散列，只需反转算法：

```
<?php

$id = dase_convert($id, 36, 10);

$id = ($id-2)/3; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T17:26:55.000

实施使用 GUID 作为您的身份。

GUID（全局唯一标识符）是 128 位值，因此如果您想获取某人的 ID，您需要进行大量猜测。

有多种工具可以生成 GUID，VS2010 有一个实用程序可以为您将 GUID 转换为纯文本，但我不知道如何从代码生成，因为我从来不需要，只是一次性用法。

GUID 对身份非常有用。:)

# java - cassandra 字段字符串与长

> ID：14986029
> 
> 赞同：0
> 
> 时间：2013-02-20T17:22:13.127
> 
> 标签：java, schema, cassandra, astyanax

好吧，我在这里发疯了。有许多行为我无法用 Cassandra 解释，我什至不确定它们是否相关。

我创建了一个如下表（为简洁起见，未显示所有列）：

```
create column family cachekey  
    with comparator = UTF8Type  
    and column_metadata =  
    [  
    {  
        column_name : accountNumber,  
        validation_class : UTF8Type  
    },  
    {  
        column_name : homeId,  
        validation_class : LongType  
    }  
 ...  
]; 
```

一些记录被添加到该表中（不是我）。现在，当我显示架构时，我不确定为什么看不到我创建的列

```
[default@cachekeydata] show schema;
...

use cachekeydata;

create column family cachekey  
  with column_type = 'Standard'  
  and comparator = 'UTF8Type'  
  and default_validation_class = 'BytesType'  
  and key_validation_class = 'BytesType'  
  and read_repair_chance = 0.1  
  and dclocal_read_repair_chance = 0.0  
  and gc_grace = 864000  
  and min_compaction_threshold = 4  
  and max_compaction_threshold = 32  
  and replicate_on_write = true  
  and compaction_strategy = 'org.apache.cassandra.db.compaction.SizeTieredCompactionStrategy'  
  and caching = 'KEYS_ONLY'  
  and compression_options = {'sstable_compression' :   'org.apache.cassandra.io.compress.SnappyCompressor'}; 
```

现在，真正让我感到困惑的是：当我从 java 代码中提取数据时，在尝试检索 long 时出现空指针异常，但在检索某些记录的字符串时却没有：

```
System.out.println("Mac=" + mac);
System.out.println("  cidx=<" + result.getStringValue("homeId",null) + ">");
System.out.println("  cidx=<" + result.getLongValue("homeId",null) + ">");
System.out.println("  cidx=<" + result.getColumnByName("homeId").getLongValue() + ">"); 
```

导致：

```
Mac=001DD67CFF46
  cidx=<50190074>
  cidx=<3832617404583655220>
  cidx=<3832617404583655220>
Mac=001DCFE2122C
  cidx=<3663580> 
```

后跟 NullPointerException。换句话说，result.getStringValue("homeId",null) 返回 3663580 但 result.getLongValue("homeId",null) 在 Cassandra 库代码中运行以下行时会导致 NullPointerException：

```
LongSerializer.get().fromBytes(column.getValue()); 
```

最后，从 cli 控制台显示与上面相同的两条记录对我来说没有任何可疑之处：

```
[default@cachekeydata] get cachekey[utf8('001DD67CFF46')];
=> (column=accountNumber, value=30373833373132303730323036, timestamp=1361305382124)
=> (column=corp, value=3037383337, timestamp=1361305382124)
=> (column=homeId, value=3530313930303734, timestamp=1361305382124)
=> (column=zip, value=3130343732, timestamp=1361305382124)
Returned 4 results.
Elapsed time: 70 msec(s).
[default@cachekeydata] get cachekey[utf8('001DCFE2122C')];
=> (column=accountNumber, value=30373830383132333437323032, timestamp=1361305376659)
=> (column=corp, value=3037383038, timestamp=1361305376659)
=> (column=homeId, value=33363633353830, timestamp=1361305376659)
=> (column=zip, value=3036393033, timestamp=1361305376659)
Returned 4 results.
Elapsed time: 45 msec(s). 
```

我的问题：

*   Q1。大问题。为什么我在上面的例子中得到一个空指针？
*   Q2。较小的：
    *   Q2a。鉴于我如何在 1 中设置表格，我在 3 中观察到的情况是正常的吗？
    *   Q2b。为什么我的字符串和长值不匹配？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T15:03:01.793

Not sure the answer will be useful to anyone, but the data that were expected to be long were inserted as string. This apparently caused at least two issues that I explained above:

*   displaying a different result whether the data was read as String or Long (something I wasn't used to coming from the Oracle world)
*   causing these occasional null pointer exceptions

# android - ListView 在 getView() 中返回不正确的位置

> ID：14986031
> 
> 赞同：0
> 
> 时间：2013-02-20T17:22:14.717
> 
> 标签：android

我有一个 listView 有 checkTextView 和一个 textView 作为每个 textView 中的项目。checkedTextView 值将从数据库表中填充。对于每个值，数据库中都有一个计时器值为 10、15、30 的列。一旦检查了checkedTextView，我检查计时器列中是否有一个值，如果存在，我设置textView，计时器值每秒更新一次。如果第一个元素具有计时器值，则 textView 会填充计时器 mm:ss 值。当我向下滚动时，会有一些其他的 listView 项目填充了相同的值不正确。

这是因为该位置返回了错误的值吗？我在某处读到当我们滚动时视图会刷新。例如：如果项目 1 填充了该值，当我滚动时我发现元素 6 也具有该值

下面是适配器类

```
public class MethodLazyAdapter extends BaseAdapter {

Activity activity;
private String[] preparationSteps;
private String[] timeToPrepare;
private String[] arrowValue;
private int [] noOfStepsFlag;
String recipeID;
ListView list;
Intent intent;
Context context;
int minutes;
int noOfSteps;
private HashMap<Integer, Boolean> mIsChecked = new HashMap<Integer, Boolean>();
private ArrayList<Boolean> itemChecked = new ArrayList<Boolean>();

private static LayoutInflater inflater=null; 
MediaPlayer player;
String vibratorService;
Vibrator vibrator;

public MethodLazyAdapter(Activity a,String[] preparationSteps,String [] timeToPrepare,String [] arrowValue,int noOfSteps,ListView list) {
    this.activity = a;
    this.preparationSteps = preparationSteps;
    this.timeToPrepare= timeToPrepare;
    this.arrowValue=arrowValue;
    this.list=list;
    this.noOfSteps = noOfSteps;

    noOfStepsFlag = new int[noOfSteps];
    for(int i=0;i<noOfSteps;i++){
        noOfStepsFlag[i]=0;
        itemChecked.add(i, false);
    }

    inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
}

public View getView(final int position, View convertView, ViewGroup parent) {
    View vi=convertView;
    if(convertView==null)
        vi = inflater.inflate(R.layout.method_item, null);

    final CheckedTextView checkedTextView = (CheckedTextView)vi.findViewById(R.id.checkedTextView);
    checkedTextView.setText(preparationSteps[position]);

    final TextView textView = (TextView)vi.findViewById(R.id.textView1);

    final AlertDialog.Builder alert = new AlertDialog.Builder(activity);

    checkedTextView.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v)
        {
            ((CheckedTextView) v).toggle();

            if(checkedTextView.isChecked())
                itemChecked.set(position, true);
            else if(!checkedTextView.isChecked())
                itemChecked.set(position,false);

            if(!timeToPrepare[position].equals("NA")  && checkedTextView.isChecked() && noOfStepsFlag[position]==0){
                noOfStepsFlag[position]=1;
                playAudio();
                new CountDownTimer(Integer.parseInt(timeToPrepare[position])*60*1000, 500) { //the timer runs for 30 seconds in this case
                     public void onTick(long leftTimeInMilliseconds) {
                         long seconds = leftTimeInMilliseconds / 1000;
                         textView.setText(String.format("%02d", seconds / 60) + ":" + String.format("%02d", seconds % 60));

                     }

                     public void onFinish() {
                         textView.setText("Done");
                         alert.setTitle("Done!!");
                         alert.setMessage(arrowValue[position]);
                         alert.setIcon(R.drawable.savai_upma);
                         playAudio();
                         vibratorService = Context.VIBRATOR_SERVICE;
                         vibrator = (Vibrator)activity.getSystemService(vibratorService);
                         vibrator.vibrate(1000); //vibrate for 1sec.

                         alert.setPositiveButton("Yes", new DialogInterface.OnClickListener() {
                             public void onClick(DialogInterface dialog, int which) {
                                // Some code
                             }

                          });
                         alert.show();
                     }
                  }.start();

            }
        }

        private void playAudio() {
            // TODO Auto-generated method stub
            player = MediaPlayer.create(activity, R.raw.facebook_ringtone_pop);
            player.setOnCompletionListener(new OnCompletionListener() {

                @Override
                public void onCompletion(MediaPlayer player) {
                    // TODO Auto-generated method stub
                    player.release();                           
                }
            });
            player.start();
        }
    });

    /*
     * The checkedTextView click state is saved in array itemChecked when the row is clicked and by default its set 
     * to false.
     * Outside onClick the checkTextView row will be checked or unchecked from the 
     * value stored in array itemChecked.
     */
    checkedTextView.setChecked(itemChecked.get(position));

    return vi;
}

public int getCount() {
    return preparationSteps.length;
}

public Object getItem(int position) {
    return position;
}

public long getItemId(int position) {
    return position;
} 
```

}

checkedTextView 已正确切换，但 textView 值填充不正确。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T17:29:27.120

Android尽量重用View

你`checkedTextView`的设置是正确的，因为你设置它不考虑条件

`textView`但是您只有在单击时才会更改文本，`checkedTextView`因此您`textView`可能会附带已经设置的文本（因为 Android 正在重用视图）

# jsf - 导航 p:commandButton Primefaces Mobile

> ID：14986033
> 
> 赞同：1
> 
> 时间：2013-02-20T17:22:26.560
> 
> 标签：jsf, primefaces, primefaces-mobile

在我的应用程序中，如果`<pm:view id="mobileLogin">`在下一个视图中登录成功是`<pm:view id="mobileTree">`. 在 mobileTree 视图中，我想要一个 commandButton 来调用一个注销方法，该方法将返回 String '`pm:mobileTree?reverse=true'`。问题是这不起作用。有任何想法吗？

我的代码：

```
 <!-- Login View -->
    <pm:view id="mobileLogin">
        <pm:header title="LiteDoc" />

        <pm:content>
            <h:form id="mobileLoginForm">
                <p:outputPanel id="container">
                    <h:panelGroup rendered="#{not loginManager.loggedIn}" >
                        <p:inputText id="username" value="#{loginManager.username}" />
                        <p:watermark for="username" value="Login" />
                        <p:password id="password" value="#{loginManager.password}" />
                        <p:watermark for="password" value="Senha" />

                        <p:separator />

                        <p:commandButton value="Login" icon="refresh" process="@form" update=":mobileTreeForm" action="#{loginManager.loginMobile}" />
                    </h:panelGroup>
                </p:outputPanel>
            </h:form>
        </pm:content>
    </pm:view>

    <!-- Tree View -->
    <pm:view id="mobileTree">
        <pm:header title="LiteDoc">
            <!-- Here's the problem --><p:commandButton value="Go" action="pm:mobileLogin?reverse=true" />
        </pm:header>

        <pm:content>
            <h:form id="mobileTreeForm">

                <p:dataList  value="#{cabinetManager.cabinets}" var="cabinet" rendered="#{loginManager.loggedIn}">
                    <p:column>
                       <h:outputText value="#{cabinet.name}" />
                    </p:column>
                </p:dataList>

            </h:form>
        </pm:content>
    </pm:view> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T02:39:55.860

在服务器中执行方法并导航到其他方法的正确方法`pm:view`是这样

```
 <p:commandButton value="Text of the button" actionListener="#{youBean.yourLogOutMehod}" action="pm:theViewYouWantToNavigate" update="theViewYouWantToNavigate" /> 
```

您可以在移动视图中导航的其他方式是使用标题

```
<pm:view id="youSourceView">
        <pm:header title="YourTitleView">
            <f:facet name="left"><p:button value="HOME" icon="home" href="#yourHomeViewID?reverse=true"/></f:facet>
            <f:facet name="left"><p:button value="BACKVIEW" icon="back" href="#yourBackViewID?reverse=true"/></f:facet>
        </pm:header>
        <pm:content>
           <!-- your content in the view -->
        </pm:content>      
</pm:view> 
```

您可以尝试注销您的 Bean 并执行简单的重定向到 /loginPage.jsf 它将刷新 url 并默认加载第一个`pm:view`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T20:04:42.770

如 PrimeFaces 的移动手册（第 12 页）中所述，如果您想调用服务器操作，然后导航到`pm:view`id `myViewId`，您必须执行以下操作：

```
<p:commandButton value="Logout" oncomplete="PrimeFaces.navigate('#myViewId', {reverse : 'true'})" action="#{loginBean.logout}" /> 
```

# c# - 在 Repository 层中查询多个实体时返回什么类型？

> ID：14986035
> 
> 赞同：10
> 
> 时间：2013-02-20T17:22:34.073
> 
> 标签：c#, entity-framework, repository-pattern

我在这个问题中涉及以下层：

*   服务层（使用 IoC 调用 Repository）
*   域模型（POCO / 域实体，定义的存储库接口）
*   存储库层（EF .edmx 和实施的存储库）

很多时候它真的很简单：存储层通过实体框架查询数据库并返回`IList<SomeDomainEntity>`给服务层的调用者。返回的*类型*是领域模型中定义的类型。

我遇到的问题是当我需要查询 POCO A、B 和 C 并从所有要​​返回的数据中获取数据时。由于我不处理存储库中的任何逻辑，因此我需要将此数据返回到服务层进行处理（直接或更有可能通过调用域模型上的某些逻辑）。但是，我不再有从存储库查询结果返回给调用者的*单一类型。*

在我看到的示例中，一个匿名类型当然会处理这个问题，但由于我没有直接在存储库中处理来自返回数据的逻辑并且它需要返回，所以我需要一个物理类型来返回。以下是我想到的一些解决方案，但不确定我是否喜欢：

1.  在域模型中创建一个新的域实体，它本质上是我查询的所有数据的组合，因此可以返回这个新的单一类型。创建满足查询需求的任意类型似乎是错误的。
2.  使服务层分别调用 A、B、C 实体上的各个存储库，然后处理来自每个返回对象的数据。这似乎是很多额外的工作。
3.  创建要返回的 ViewModel。这对我来说似乎也不合适。我在服务层和 UI 层之间大量使用 ViewModel 类，但从未见过它们被用于从存储库返回。

我不能是唯一一个跨多个实体查询以获取需要添加到类型并返回给调用者的数据集合的人。解决我的问题的常见做法或标准方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T17:55:54.133

如果这些实体是**相关**的并且您在一个地方查询所有这些实体，那么您应该尝试在您的域模型中找到它们的[聚合根](https://stackoverflow.com/questions/1958621/whats-an-aggregate-root)，或者如果它还不存在，您应该引入一个新的，正如您在第一个中所说选项。在有意义之前，这没有错。它应该对域概念进行建模，并且您可能拥有一个，因为您创建了该存储库方法。

如果这些实体**不相关**（嗯，可能以某种方式相关，但不像上面那样紧密）并且您只想一次性获取它们，那么您应该在服务层中处理它，您可以使用多个存储库并组成一个结果对象。

您可能听说过[导航属性](http://msdn.microsoft.com/en-us/library/vstudio/bb738520%28v=vs.100%29.aspx)和[急切加载](http://msdn.microsoft.com/en-us/data/jj574232.aspx)的概念，但我在这里写它是因为它可能是您问题的另一个答案（我没有看到您的域模型）

我不会接受您的第三个建议（在存储库中创建视图模型），因为它打破了分隔。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T07:07:43.177

不同的实体可以相互关联，但其中一个实体不是聚合根。服务用于此类查询。我通常会这样做：

```
public class MyService
{
    IEnumerable<UserWithMessages> Find()
    {
        var messages = _messageRepository.FindAll();
        var userIds = _messages.Select(x => x.UserId).Distinct().ToArry();
        var users = _userRepository.Find(userIds);
        return users.Select(x => new UserWithMessages(x, messages.Where(x => x.UserId == x.Id));
    }
} 
```

它只是两个可以利用数据库中的索引的数据库查询。所以应该很快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T17:58:17.603

我建议您为此目的使用 DTO（数据传输对象）。将服务层与视图分离是一种常见的做法，而 DTO 允许您仅共享视图所需的重要信息。

根据系统的大小，有多种方法可以实现系统的这一部分。在小型系统中，您可以使用扩展方法将 POCO 实体映射到数据传输对象中

我建议你看看“AutoMapper”。我认为这对您非常有用

[http://www.codeproject.com/Articles/61629/AutoMapper](http://www.codeproject.com/Articles/61629/AutoMapper)

[http://lostechies.com/jimmybogard/2009/01/23/automapper-the-object-object-mapper/](http://lostechies.com/jimmybogard/2009/01/23/automapper-the-object-object-mapper/)

# c - 当 while 循环中的条件涉及在循环内获取值的变量时，我应该使用哪个循环？

> ID：14986036
> 
> 赞同：0
> 
> 时间：2013-02-20T17:22:38.400
> 
> 标签：c, loops

例如，我想知道如何在使用变量时使用循环。如果标准输入来自文件，它应该循环直到遇到“*”。只要它获得 a 的价值，它就应该迭代。

```
 while(a!='*')
   {
         scanf("%d",&a);
         ...
           ....
          ....
         ....

      } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T17:25:58.970

如果你想立即终止你阅读 a `'*'`，怎么样

```
for (;;) {
    scanf("%d", &a);
    if (a == '*') {
        break;
    }
    ....
} 
```

或者，如果`'*'`是您应该处理的最后一个值，您可以使用

```
do {
    scanf("%d", &a);
    ....
} while (a != '*'); 
```

请注意，我接受了 WhozCraig 和 Armin 的建议，并更改了您的`scanf`线路以传递`a`. 如果`a`已经是指针类型，则比较应该更改以取消引用它 - 例如`*a == '*'`. （在后一种情况下，您还需要确保分配了`a`指向的内存。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T17:28:37.850

怎么样：

```
char a;
while (scanf("%c", &a) == 1 && a != '*')
{
} 
```

将格式说明符更改为`%c`，传入地址`a`并检查返回值`scanf()`以确保`char`读取有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T17:24:02.293

也许您想改用 do { } while 循环。

# java - 文本文件的名称

> ID：14986038
> 
> 赞同：1
> 
> 时间：2013-02-20T17:22:47.510
> 
> 标签：java, eclipse

我必须从当前工作目录中的所有文本文件名称中构建一个列表...

我写了这样的东西，但它并没有真正起作用我只是在网上看到这个

`String[] allomanyok2 = fl.list();``fl`类型在哪里`File`......

我需要文本文件的名称，因为我必须对它们做不同的事情......

谁能帮助我如何在列表或其他内容中获取这些名称？...谢谢预期

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T17:26:36.387

假设您想要带有`.txt`扩展名的文本文件，您可以执行以下操作：

```
File file = new File("myDirectory");
String[] myTextFiles = file.list(new FilenameFilter() {
    public boolean accept(File dir, String name) {
        return name.toLowerCase().endsWith(".txt"); // Andrew Thompson's comment
    }
}); 
```

在这里，该`list()`方法采用一个`FilenameFilter`实现该方法的匿名类`accept(File, String)`。此方法仅检查文件名是否以 结尾`.txt`，如果是则返回 true，如果不是则返回 false。

然后，该`list()`方法将仅返回以 . 结尾的文件`.txt`。

如果您希望您的数组作为列表：

```
List<String> myListTextFiles = Arrays.asList(myTextFiles); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T17:25:34.587

您需要使用`File#list(FilenameFilter)`. 实现一个过滤器，它只接受以 . 结尾的字符串`txt`。我假设所有文本文件都有`.txt`扩展名。

```
String[] allomanyok2 = fl.list(new FilenameFilter() {
    public boolean accept(File dir, String name) {
        return name.toLowerCase().endsWith(".txt");
    };
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T17:27:33.670

尝试这个：

```
File workingDir = new File(".");
String[] textFiles = workingDir.list(new FilenameFilter() {
    public boolean accept(File dir, String name) {
        return name.endsWith(".txt");
    };
}); 
```

# c# - Is GMT same as UTC?

> ID：14986043
> 
> 赞同：38
> 
> 时间：2013-02-20T17:22:57.743
> 
> 标签：c#, javascript, asp.net, c#-4.0, timezone

I am running a world targeted website where people from all over the world visit. The database contains time in International Date Line West format. I am taking the user time zone using JavaScript and converting the time in the database to user's time and then showing on the page. I want to ask that is International Date Line West is correct format for world level website? Or setting to UTC or GMT will be better? And what is the difference between UTC and GMT and International Date Line West? Are these three same? Finally what time should I set onto my server that will be converted using offset of timezone of user?

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-20T17:25:15.303

UTC is effectively the new name for GMT. It has very minor differences, but none that will impact you in that scenario.

Servy's comment is completely wrong saying GMT includes daylight savings. That's a different timezone called BST that the UK moves to from GMT over summer.

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-02-20T17:32:17.270

If you're interested in astronomical observations, for example of satellites such as [GPS](https://en.wikipedia.org/wiki/Global_Positioning_System), or if you want to cite a technical standard ([ITU-R TF.460-6](https://www.itu.int/rec/R-REC-TF.460/en)), then you might care that we use UTC and that GMT no longer has a precise definition. Otherwise you probably consider GMT to be the same thing as UTC, and also consider [UT and UT1](https://en.wikipedia.org/wiki/Universal_Time) to be the same as [UTC](https://en.wikipedia.org/wiki/Coordinated_Universal_Time) — which technically they are not.

Also, if you're tracking computer criminals or other distributed activity, then you need to determine whether certain events at various sites may or may not have occurred before certain other events. For that purpose you will want to learn and use [Network Time Protocol (NTP)](https://en.wikipedia.org/wiki/Network_Time_Protocol). That will have a much bigger effect on your understanding of time than the little differences between UTC, UT1, and UT.

"[International Date Line](https://en.wikipedia.org/wiki/International_Date_Line) West" is just a friendly name for a timezone where the time is defined as twelve hours less than UTC (that is, UTC-12).

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T17:42:52.570

Usually when you have to present dates or times to people in different timezones what you should do is save all time information in UTC on your database and convert it to the users timezone on the display layer (when your presenting the information to your user)

However you will find a couple of challenges: - The timezone you get from javascript may not be trustworthy - Finding the location of the user through the IP and then getting the timezone is also not trustworthy

A good approach in my opinion is to use a "best guess" to find the default timezone (javascript timezone should suffice) and give the user the ability to actively configure his timezone.

On some google applications their approach is to prompt the user for his timezone before starting, this should be done only when you can guarantee that you don't have to repeat this every time the user visits your site (through user accounts or cookies)

# objective-c - 使用 QTKit 以随机帧速率将 NSImages 添加到电影

> ID：14986044
> 
> 赞同：1
> 
> 时间：2013-02-20T17:22:57.807
> 
> 标签：objective-c, macos, cocoa, qtkit

我是一个 OS X 编程新手，我必须以不同的时间间隔从互联网上获取一堆 NSImage，并从中构建一个渐进式电影文件。例如，NSImage 的到达速率可以是毫秒到 3 秒之间的任何时间间隔。

1.  我想知道这是否是使用 QTKit 的正确方法，以及如何计算帧速率，因为帧几乎是随机出现的。

2.  我也想知道内存使用情况，它会在最后写入之前尝试将整部电影保存在内存中吗？

这是我从网上拼凑的代码：

```
-(void)startRecording  
{
    NSDictionary *myDict = nil;
    myDict = [NSDictionary dictionaryWithObjectsAndKeys:@"mp4v",
              QTAddImageCodecType,
              [NSNumber numberWithLong:codecHighQuality],
              QTAddImageCodecQuality,
              nil];

    long long timeValue = 1;
    long timeScale      = 3;
    QTTime duration     = QTMakeTime(timeValue, timeScale);
    QTMovie *mMovie =[[QTMovie alloc] initToWritableFile:@"tmpfps.tmp" error:NULL];

    self.mMovie=mMovie;
    self.duration=duration;
    self.myDict=myDict;
}

-(void) addFrame:(NSImage*)imageFrame
{
    [mMovie addImage:imageFrame
         forDuration:self.duration
      withAttributes:self.myDict];
}

-(void) stopRecording
{
    myDict = [NSDictionary dictionaryWithObject:[NSNumber numberWithBool:YES]
                                         forKey:QTMovieFlatten];
    [self.mMovie writeToFile:@"my.mov" withAttributes:myDict];
    self.mMovie=nil;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T17:55:19.010

自从我使用 QTKit 以来已经有一段时间了，但在过去，我编写了一个应用程序，该应用程序的功能与您描述的非常相似（通过网络获取一些不规则的图像并将它们写入 QuickTime 电影）。

1.  当您调用`-[QTMovie addImage:forDuration:withAttributes]`时，duration 参数是影片中图像的持续时间。QTKit 将负责复制它以创建足够的电影帧来覆盖持续时间。简而言之，您无需直接担心帧速率，只需担心每一帧的持续时间。

    您可以通过跟踪接收帧的时间和接收最后一帧的时间来计算帧的持续时间。*本质上，当下一个*图像出现时，您将每个图像添加到电影中，并使用两个图像的接收时间之间的时间差作为持续时间。当然，你必须做一些稍微不同的事情来解释最后一个图像，这取决于记录是如何停止的（明确地由用户，通过超时等）。

2.  我不确定这个问题的答案，但我认为你可以假设这是一个你不需要担心的实现细节。在您使用可写文件初始化 QTMovie 对象的情况下，您可能确实可以`-updateMovieFile`定期调用以将当前内存中的更改刷新到磁盘。这需要测试，但与所有性能优化一样，在测试和分析表明存在问题之前，您不应该担心它。

# wpf - WPF如何将混合交互触发器添加到样式资源

> ID：14986045
> 
> 赞同：1
> 
> 时间：2013-02-20T17:23:01.893
> 
> 标签：wpf, mvvm, mvvm-light, expression-blend, eventtocommand

我正在使用带有 WPF 4.5 的 VS 2012

我希望能够将混合交互触发器添加到样式资源，以便我可以在一个地方（资源字典）定义它并在我的应用程序中的许多地方使用。

具体来说，我想使用 MVVM-Light 框架附带的 EventToCommand 并将其插入文本框样式并附加到文本框的 LostFocus 事件。我计划使用它来标记某些文本框，其*ValidationStyle*触发绑定命令（在视图模型中）到文本框的 LostFocus 事件。此验证样式将使用 IDataErrorInfo 通过 UI 向用户显示错误。

这个问题类似于以下问题（但它们没有完整的解决方案）：

[按钮样式的 EventToCommand](https://stackoverflow.com/questions/4883111/eventtocommand-in-button-style/4883471#4883471)

[如何在样式设置器中添加混合行为](https://stackoverflow.com/questions/1647815/how-to-add-a-blend-behavior-in-a-style-setter/4779168#4779168)

**问题：** 如何将混合 EventToCommand 添加到绑定到视图模型数据上下文中的命令的文本框 lostfocus（我不想使用代码隐藏或附加属性，我希望它完全在 XAML 中定义）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T17:49:47.173

所以我必须承认，当我写这篇文章时，我有一个可行的答案，但我花了很长时间才弄清楚，所以我在这里发布它希望它可以帮助其他人，即使它是一个非常具体的场景。

我正在为我的应用程序使用 MVVM 模型，所以我不想在 xaml 页面后面有代码。我还想要一种将文本框绑定到 IDataErrorInfo 属性的方法，其中该文本框的验证是通过文本框的 lostfocus 事件触发的。此事件将绑定到视图模型上的中继命令，该命令将验证适用对象并添加实际错误。

所以我需要让文本框 lostfocus 事件命令将文本框名称（与数据库中的列名匹配）作为命令参数。

这是我想要完成的屏幕截图 ![文本框验证样式的 WPF 屏幕截图](../Images/37fcc3761df8f26bea5e0d9a90e47a3f.png)

**这是我的做法：**

首先我在视图模型上定义了命令：

```
Imports GalaSoft.MvvmLight.Command
Private _LostFocusValidateCommand As RelayCommand(Of String)

    Public ReadOnly Property LostFocusValidateCommand() As RelayCommand(Of String)
        Get
            If _LostFocusValidateCommand Is Nothing Then
                _LostFocusValidateCommand = New RelayCommand(Of String)(AddressOf LostFocusValidateExecute)
            End If
            Return _LostFocusValidateCommand
        End Get
    End Property
    Private Sub LostFocusValidateExecute(sParam As String)
        NewClient.PropertyValitaion(False, sParam)
    End Sub 
```

这是使用 IDataErrorInfo 的属性验证（我省略了 IDataErrorInfo 的基本实现以节省空间，如果您希望我发布，请留下评论）

```
 Public Sub PropertyValitaion(bAllProperties As Boolean, Optional sProperty As String = "")
    'initialize validation helper
    Dim vhelper As New ValidationHelper

    If bAllProperties Or sProperty = "chrCompany" Then
        If String.IsNullOrEmpty(chrCompany) Then
            AddError("chrCompany", "You must enter a Company Name")
        Else
            RemoveError("chrCompany")
        End If
    End If
    If bAllProperties Or sProperty = "chrFirst" Then
        If String.IsNullOrEmpty(chrFirst) Then
            AddError("chrFirst", "You must enter a First Name")
        Else
            RemoveError("chrFirst")
        End If
    End If
    If bAllProperties Or (sProperty = "chrPhone1" Or sProperty = "chrPhone1Ext") Then
        If String.IsNullOrEmpty(Trim(chrPhone1Ext)) = False And String.IsNullOrEmpty(Trim(chrPhone1)) Then
            Me.AddError("chrPhone1", "Provide a phone number or remove extension")
        Else
            RemoveError("chrPhone1")
        End If
        If String.IsNullOrEmpty(Trim(chrPhone1)) = False Then
            If vhelper.CheckPhoneNumber(Me.chrPhone1) = False Then
                Me.AddError("chrPhone1", "Phone 1 format invalid")
            Else
                RemoveError("chrPhone1")
            End If
        End If
    End If

End Sub 
```

困难的部分是弄清楚如何定义风格。样式很长，对不起，“可读” xml 的乐趣：

```
 <Style x:Key="FTC_ValidateTextBox" BasedOn="{x:Null}" TargetType="{x:Type TextBox}">
    <Style.Setters>
        <Setter Property="FontFamily" Value="Open Sans Condensed"/>
        <Setter Property="FontSize" Value="19" />
        <Setter Property="Margin" Value="3,3,15,6"/>
        <Setter Property="Padding" Value="10,3"/>
        <Setter Property="TextWrapping" Value="Wrap" />
        <Setter Property="HorizontalAlignment" Value="Stretch" />
        <Setter Property="VerticalAlignment" Value="Center" />
        <Setter Property="Background" Value="{StaticResource DetailTextBox}" />
        <Setter Property="BorderBrush" Value="{StaticResource MediumGray}" />
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="Foreground" Value="Black" />
        <Setter Property="AllowDrop" Value="true"/>
        <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
        <Setter Property="ScrollViewer.PanningMode" Value="VerticalFirst"/>
        <Setter Property="Stylus.IsFlicksEnabled" Value="False"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type TextBox}">
                    <Border Name="Bd" SnapsToDevicePixels="true" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}">
                        <ScrollViewer x:Name="PART_ContentHost" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}">
                            <i:Interaction.Triggers>
                                <i:EventTrigger EventName="LostFocus">
                                    <cmd:EventToCommand Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}},Path=DataContext.LostFocusValidateCommand}"
                                                        CommandParameter="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type TextBox}},Path=Name}"/>
                                </i:EventTrigger>
                            </i:Interaction.Triggers>
                        </ScrollViewer>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsEnabled" Value="false">
                            <Setter Property="Background" TargetName="Bd" Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"/>
                            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
        <Setter Property="Validation.ErrorTemplate">
            <Setter.Value>
                <ControlTemplate>
                    <Border BorderBrush="{StaticResource MediumRed}" >
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>
                            <AdornedElementPlaceholder Name="parentTextBox" />
                            <TextBlock Grid.Row="1" Style="{StaticResource FTC_DetailError}"
                                       Text="{Binding ElementName=parentTextBox, Path=AdornedElement.(Validation.Errors).CurrentItem.ErrorContent}"/>
                        </Grid>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style.Setters>
    <Style.Triggers>
        <Trigger Property="Validation.HasError" Value="true">
            <Setter Property="ToolTip" Value="{Binding RelativeSource={x:Static RelativeSource.Self}, Path=(Validation.Errors).CurrentItem.ErrorContent}"/>
            <Setter Property="BorderBrush" Value="{StaticResource MediumRed}"/>
            <Setter Property="Foreground" Value="{StaticResource MediumRed}"/>
            <Setter Property="Margin" Value="3,3,15,31"/>
        </Trigger>
    </Style.Triggers>
</Style>

<Style x:Key="FTC_DetailError" TargetType="TextBlock">
    <Style.Setters>
        <Setter Property="FontFamily" Value="Open Sans Condensed"/>
        <Setter Property="Control.FontWeight" Value="Light" />
        <Setter Property="Foreground" Value="{StaticResource TitleWhite}"/>
        <Setter Property="FontSize" Value="15" />
        <Setter Property="Margin" Value="0"/>
        <Setter Property="Padding" Value="10,3"/>
        <Setter Property="HorizontalAlignment" Value="Stretch"/>
        <Setter Property="Background" Value="{StaticResource MediumRed}"/>
    </Style.Setters>             
</Style> 
```

所有的魔法都发生在属性模板中。以下内容必须包含在资源字典的顶部声明中：

```
> xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
> xmlns:cmd="http://www.galasoft.ch/mvvmlight" 
```

all the magic happens in the template property that defines the control template. You can not wrap a i:interaction in the control template itself, it must be contained within a derived object, almost anything really, border, scrollviewer, wrappanel etc... Then you set the vent trigger and the command properties. They should be easy enough to follow, I pass the textbox name as the command parameter. The client "box" you see in the screen shot is a grid with its data context set to a new client object property of the parent viewmodel. SO in order to access the command in the parent viewmodel, I had to reference the parent's datacontext and call the command property.

再一次，我意识到这是一个非常具体的场景，但我认为它有一些例子可以帮助其他人。我现在能够为应用程序中的所有文本框定义一种样式，这些文本框是数据输入并且我想触发基本的验证过程。这将使我不必在所有这些文本框上单独定义自定义命令行为，这一切都在 xaml 中完成，没有代码。

干杯

# jquery - 使用 jQuery 改变不透明度的问题

> ID：14986046
> 
> 赞同：0
> 
> 时间：2013-02-20T17:23:09.727
> 
> 标签：jquery, jquery-animate, mouseover, opacity

我有这段代码，它通过淡化不透明度来将焦点集中在导航栏元素上`mouseover`

这里是：

```
$("#Nav-bar").mouseover(function(){
    $(".content").animate({opacity: 0.3,}, 350 );
}).mouseout(function(){
    $(".content").animate({opacity: 1.0,}, 350 );
}); 
```

这里的问题是页面在沿着元素浏览时不断进出效果。例如，当我悬停链接时，页面会淡出然后再次出现。我该如何阻止这个？

[**jsFiddle**](http://jsfiddle.net/2WQY7)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T17:24:47.743

使用 jQuery 的[`stop`](http://api.jquery.com/stop/)函数来发布之前的动画。

```
 $("#Nav-bar").mouseover(function () {
     $(".content").stop(true).animate({
         opacity: 0.3,
     }, 350);
 }).mouseout(function () {
     $(".content").stop(true).animate({
         opacity: 1.0,
     }, 350);
 }); 
```

[**现场演示**](http://jsfiddle.net/2WQY7/2/)

# json - 我如何提前输入以在 json 字符串数组中返回 id 而不是 name

> ID：14986051
> 
> 赞同：0
> 
> 时间：2013-02-20T17:23:32.143
> 
> 标签：json, return-value, typeahead, bootstrap-typeahead

在 Joomla 中使用引导程序。我已经尝试寻找解决方案并在此处尝试了一些不同的答案，但似乎无法使其正常工作。

到目前为止，我有以下返回名称，但我希望它发送 id 而不是搜索输入中的名称。

到目前为止，这是我通过 php 打印的内容：

```
 jQuery(document).ready(function() {

        var artistData = [{"id":"3","artist_name":"DJ One"},{"id":"2","artist_name":"DJ Two"},{"id":"1","artist_name":"Another DJ"}];

        jQuery('#artist_id').typeahead({

        source: function(query, process) {
            artists = [];
             ids = {};

            jQuery.each(artistData, function(id, artist) {
                ids[artist.artist_name] = artist.id;
                artists.push(artist.artist_name);
            });
            process(artists);
        },
        matcher: function (item) {
            if (item.toLowerCase().indexOf(this.query.trim().toLowerCase()) != -1) {
                return true;
            }
        },

        sorter: function (items) {
            return items.sort();
        },
        updater: function (item) {
            selectedArtist = item.id;
            return item;
        }

        });

    }); 
```

我已经尝试了各种答案，但这至少会返回`artist_name`但显然会引发 mysql 错误。如果我在输入中输入 id 号，它工作正常。

我只需要弄清楚如何在提交时将值更改为 id。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T02:24:52.020

我意识到这可能已经晚了，但是这里发生了一些错误：

1.  我不确定您在哪里使用`selectedArtist`，因为它不是由任何可见的东西定义的。
2.  在`matcher`，你从不`return`为`false`。这实际上可能是巧合，因为 JavaScript 会`undefined`认为`false`.
3.  您经历了分解 的努力`artistData`，但您实际上从未明确使用该函数之外的任何一个数组（在这种情况下应声明为 with`var`而不是通过不使用将其添加到全局对象中`var`）。
4.  由于您将`artists`数组传递给`process`，因此此后`item`传递的任何内容都将只是`string`该数组包含的个人；它不会是原始数组中的 JSON 对象。

从那里，您可以参考[我对其他类似问题的回答](https://stackoverflow.com/questions/16072956/how-to-avoid-to-display-json-string-with-custom-typeahead)。默认情况下，Typeahead 2.x 不支持使用 JSON 对象，但是如果您覆盖`render`and`select`方法，它确实支持使用它们，您当前必须作弊才能做到这一点（在另一个答案中显示）。

最后，您可以`updater`使用原始 JSON `item`（例如，`{"id":"3","artist_name":"DJ One"}`）做任何您想做的事情。因此，您可能应该`return item.artist_name`在那里，并且可能将一些全局（我想您可能已经在尝试这样做）设置`item.id`为跟踪实际选择的值。

另请注意：如果——在用户`item`从生成的预输入列表中选择了一个之后——他们*输入*了一个数据库中不存在的艺术家，那么你*应该*取消设置你设置的全局`updater`以避免声明`id`——无论如何（例如， 3) 代表他们刚刚输入的未知艺术家。

# java - 从 EContentAdapter 更新 UI 的正确方法

> ID：14986053
> 
> 赞同：1
> 
> 时间：2013-02-20T17:23:35.857
> 
> 标签：java, user-interface, eclipse-emf, eclipse-emf-ecore, emf

我有一个 econtent 适配器，它本质上会导致许多表的刷新。虽然理论上可以将所有通知过滤到应该导致表刷新的确切通知，但由于我们有一个庞大的模型以及许多可能触发的不同事件和更改，这将非常困难和耗时。刷新。此外，经常发生的是单个“用户事件”（例如在我们的应用程序中单击 state->new），触发 4 个在幕后创建的对象，从通知的角度来看，所有这些对象看起来都非常相似，因此很难过滤掉。我想知道是否有一种好方法可以完成某种“延迟工作”，以便 4 个通知仅导致一次刷新。例如，类似于：

```
public void notifyChanged(final Notification notification)
     super.notifyChanged(notification);
     @Override
     public void run() {
         if(matchesFilters(notification)) { 
           //some sort of check to see if we recently had another event that would have triggered a refresh?
           if(!schedulingJob) {
              scheduleDelayedJob();
           }
         }  
     }
 } 
```

不幸的是，我在工作和类似的事情上经验很少，所以如果有人能提供帮助，这将是非常有帮助的。

再举一个例子，如果有人在我们的应用程序中快速按下 control-N 20 次，它会迅速创建 20 个新状态，我们只想在这 20 个通知结束时更新 UI，而不是刷新 20 次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:28:00.843

如果我理解正确，Eclipse 会为您提供所需的一切。首先，应该在显示线程上更新 GUI。其次，还有一种异步执行的方法，如下：

```
final IWorkbench workbench = PlatformUI.getWorkbench();
workbench.getDisplay().asyncExec(new Runnable() {
  public void run() {
    // Do your thing, e.g. refresh()
  }
}); 
```

您在 Runner 中执行的操作取决于 GUI 框架。如果您使用的是 JFace，则可以执行 refresh()，我认为这对于排队工作很聪明。

# extjs - 如何将自定义 UX 添加到 Sencha touch

> ID：14986058
> 
> 赞同：0
> 
> 时间：2013-02-20T17:24:09.240
> 
> 标签：extjs, sencha-touch, sencha-touch-2

可能是基本问题，但有人可以澄清我如何将自定义用户体验包含到我的 Sencha 触摸应用程序中。

以下是详细信息 1\. 我正在将 youtubeplayer 添加到 sencha touch ( [http://code.google.com/p/ext-ux-youtubeplayer/downloads/detail?name=ext-ux-youtubeplayer-0.5.rar&can=2&q =](http://code.google.com/p/ext-ux-youtubeplayer/downloads/detail?name=ext-ux-youtubeplayer-0.5.rar&can=2&q=) )

1.  我已经下载并放置在我的应用程序的根文件夹中 (C:\xampp\htdocs\Sencha_New\touch-2.2.0\kids\ux)

2.  我在 app.js 中添加了这个条目

    // Ext.Loader.setPath({ 'Ext': 'touch/src', 'kids': 'app', 'Ext.ux.YoutubePlayer': './ux/ext-ux-youtubeplayer' //Pavan -为 Youtube 播放器添加 EXTJS });

3.  在 app\sencha.cfg 中添加了这个条目

    app.classpath=${app.dir}/app.js,${app.dir}/app,ux

当我尝试实例化它时，出现错误

> 未捕获的类型错误：无法读取未定义的属性“YoutubePlayer”

谢谢帕万

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T00:10:55.477

嗯...在我的 app.js 中，我使用了一个 Ux 插件，但我的调用`setPath`如下所示：

```
Ext.Loader.setPath({
  'Ext': 'touch/src',
  'MyApp': 'app',
  'Ux': 'vendor/Ux'
}); 
```

插件的类是`Ux.layout.Accordion`，我的文件夹结构是这样的：

```
root
|_app
|_resources
...
|_vendor
 |_Ux
  |_layout
   |_Accordion.js 
```

我的 sencha.cfg 中对应的行是：

```
app.classpath=${app.dir}/vendor,${app.dir}/app.js,${app.dir}/app 
```

我想知道您的`setPath`论点是否正确，也许您不应该完全扩展类名？此外，路径应该与您的`index.html`文件相关，我很确定。

# zend-framework2 - Zend 框架 2 Zend\Db\Sql\Sql - prepareStatementForSqlObject 与 getSqlStringForSqlObject

> ID：14986069
> 
> 赞同：0
> 
> 时间：2013-02-20T17:24:37.003
> 
> 标签：zend-framework2, zend-db

在阅读 Zend Framework 2 文档时：http: [//framework.zend.com/manual/2.0/en/modules/zend.db.sql.html](http://framework.zend.com/manual/2.0/en/modules/zend.db.sql.html)给出了两个示例，说明如何从数据库中查询数据。作为参考，它们是：

准备（使用 Select 对象）：

```
use Zend\Db\Sql\Sql;
$sql = new Sql($adapter);
$select = $sql->select();
$select->from('foo');
$select->where(array('id' => 2));

$statement = $sql->prepareStatementForSqlObject($select);
$results = $statement->execute(); 
```

执行（使用 Select 对象）

```
use Zend\Db\Sql\Sql;
$sql = new Sql($adapter);
$select = $sql->select();
$select->from('foo');
$select->where(array('id' => 2));

$selectString = $sql->getSqlStringForSqlObject($select);
$results = $adapter->query($selectString, $adapter::QUERY_MODE_EXECUTE); 
```

我无法在文档中找到任何进一步的说明，说明在某些情况下一种方法可能比另一种方法有哪些优点/缺点。我可以看到，如果我们需要调试 SQL 查询，getSqlStringForSqlObject 将帮助我们这样做。但除此之外，有没有人知道一种方法可能比另一种更好的情况？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T10:20:58.250

我当然会使用 prepareStatementForSqlObject() 来准备要执行的语句。

```
prepareStatementForSqlObject() will return a StatementInterface type object.

getSqlStringForSqlObject() will get you back an actual raw SQL string. 
```

prepareStatementForSqlObject() 在库中的任何地方都没有使用，并且可能无论如何都不打算在外部使用。如果可以的话，我会坚持使用语句对象来执行查询。

第二个示例可能只是为了说明您可以在需要时执行原始 SQL 字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:20:14.580

我认为您的疑问与这些特定的 Zend 方法没有直接关系，而更多地来自于不了解准备好的 SQL 语句是什么。维基百科有一个[很好的概述](http://en.wikipedia.org/wiki/Prepared_statement)。

总而言之，我希望 prepareStatementForSqlObject() 使用数据库系统对准备好的查询的支持，这具有以下优点：a) 在多次执行的情况下提供更好的性能；b) 有助于防止 SQL 注入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-21T12:37:50.440

ZF1 和 ZF2 如此不同和令人难过的部分令人困惑，以至于大多数公共文档都是 ZF1

阅读 PDO 文档是值得的，因为 ZF2 DB 主要作为 PDO 的包装器

我花了几个小时调试，直到决定跟踪 SQL

如果使用 MYSQL，您必须跟踪 SQL 以了解和调试 ZF2

[如何查看实时 MySQL 查询？](https://stackoverflow.com/questions/568564/how-can-i-view-live-mysql-queries) 很容易

以下代码有效 $sql = new Sql(self::getadapter()); $select = $sql->select(); $select->from('tbl_login');

```
$select ->where('logincd = ?', $logincd);
$select ->where('password = ?', $password);
$select ->where('active = ?', "Y");

$statement = $sql->prepareStatementForSqlObject($select);
// $result = $statement->execute(); // WRONG
$result = $statement->execute(array($logincd,$password,"Y")); // RIGHT

$rowset = new ResultSet;
$rowset->initialize($result);
$onerow=$rowset->current(); 
```

我错过了 array($logincd,$password,"Y") 并且到达 MSQL 服务器的 SQL 是 SELECT `tbl_login`.* FROM `tbl_login`WHERE logincd = NULL AND password= NULL AND active = NULL

当我将数组参数放入执行时，它是 SELECT `tbl_login`.* FROM `tbl_login`WHERE logincd = 'jnc' AND password = 'secret' AND active = 'Y'

追踪并没有帮助我解决我编写的噩梦般的错误

```
$dbtable=new TableGateway('tbl_event_log',self::getadapter());

$dbtable->insert( array(
  'logincd' => $logincd  ,
  'eventdttm' => date('Y-m-d H:i:s'),
  'storecd'   => "S01", // $_SESSION["storecd"],
  'eventcd'   => $eventcd ,
  'eventtxt'  => $eventtxt )
 ); 
```

但我的错误是，我在“logincd”中有 1 个额外的空间，得到了 PDO 例外码，没有 trce！

经过很多痛苦后，将适配器（驱动程序是 Pdo_Mysql）更改为“驱动程序”=>“Mysqli”在“字段列表”中使用解决方案“未知列 'logincd'

在驱动程序的两种选择中，SQL INSERT 都没有到达服务器；跟踪没有帮助

所以我的建议是使用 SQL Trace 和翻转驱动程序来解决 ZF2 DB 问题

尽管有这些小故障，ZF2 DB 还是很不错的

贾扬塔@加尔各答

# sql-server - 加速 MSAccess 2003 和 MSSQL

> ID：14986071
> 
> 赞同：0
> 
> 时间：2013-02-20T17:24:46.803
> 
> 标签：sql-server, ms-access, odbc, oledb, ms-access-2003

我想将我当前的数据库从 MDB 移动到 MSSQL 服务器。当我通过 ODBC 完成此操作时，查询变得特别慢。我有红色，它导致了 ODBC，它不支持 group by 和 JOIN，join 等它必须在当前机器上执行多个查询和处理数据。

我怎样才能更快地切换到某些东西（对于 MSAccess 2003）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T09:01:42.050

实际上，在大多数情况下，Access 做得不错。如果您的查询有一些连接，但特别是有一些聚合分组依据，那么只需创建一个视图，然后链接到该视图。它的运行速度可能与传递查询一样快，但在访问端没有麻烦和努力。

因此，在大多数情况下，使用 Access 作为 SQL Server 的前端应该能够获得出色的性能。

所以，对于调用存储过程，或者对于一些报表，可以考虑使用直通查询。

但是，为了节省您的时间和精力，然后对于具有连接的查询，尤其是具有分组依据或计数等聚合的查询，然后只需创建一个视图服务器端，然后链接到该端即可。

当您这样做时，您会发现性能一流。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T09:05:14.070

只是一个基本而愚蠢的问题：您是否在 SQL 数据库中定义了所有需要的索引？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T17:27:50.900

您是否尝试过这种方法： http: [//www.packtpub.com/article/transferring-data-ms-access-2003-to-sql-server-2008](http://www.packtpub.com/article/transferring-data-ms-access-2003-to-sql-server-2008)？

为了让它重演，在最后一步，勾选“保存 SSIS 包”并适当地安排它。

这是 Microsoft for Microsoft 的方法，因此除非存在已知问题，否则我会将其用作最佳方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T17:36:55.980

在使用 MS Access 时，您可以使用 Access 数据项目。这为您提供了一个带有 SQL Server 后端的 MS Access 前端。Access 数据项目的主要好处是 (a) 您可以获得真实 SQL 数据库的稳定性、可扩展性和安全性，同时 (b) 仍然使用著名的 MS Access 前端和编程。

有关深入讨论，请参阅此 stackoverflow 问题：[Access 数据项目的优点和缺点（MS Access 前端与 SQL Server 后端）](https://stackoverflow.com/questions/2500519/pros-and-cons-of-access-data-project-ms-access-front-end-with-sql-server-backen)

# java - 将字符串列表转换为字符串数组 - (String[])list.toArray() 和 list.toArray(new String[0]) 之间的区别

> ID：14986075
> 
> 赞同：3
> 
> 时间：2013-02-20T17:25:05.140
> 
> 标签：java, gwt

我有一个`List<String>`Java，想把它转换成一个数组。

起初，我使用将数组作为输入的 toArray 语法，但后来我切换到无参数版本，即我从：

```
String[] myArray = myList.toArray(new String[0]); 
```

到

```
String[] myArray = (String[])myList.toArray(); 
```

通读[文档](http://docs.oracle.com/javase/6/docs/api/index.html?java/util/ArrayList.html)（我的基础类型是 ArrayList），似乎功能应该是相同的。我认为后一个版本更有效，因为它不需要分配和收集空数组。我错过了任何细微的差异吗？

（注意：我问的原因是 GWT 确实以不同的方式处理语句。后者给出了动态转换错误，而前者没有。我只是想知道这是否是我使用 GWT 的细微差别还是我如何使用 Java 的细微差别。）

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-20T17:42:22.463

`toArray()`返回 an `Object[]`，而不是 a `String[]`（请记住：Java 中的泛型通过类型擦除工作，因此 an`ArrayList<String>`实际上可以包含 a `Number`），因此会出现*动态转换错误*（aka `ClassCastException`）。

常用的方法`toArray(…)`是传递一个适当大小的数组，因此不需要重新分配：

```
String[] myArray = myList.toArray(new String[myList.size()]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T17:43:56.280

在您的示例中，由于您指定的原因，选项 2 的效率略高。

```
String[] myArray = myList.toArray(new String[0]); /* option 1 */
String[] myArray = (String[])myList.toArray();    /* option 2 */ 
```

还有第三个选项可以避免任何不必要的分配，并避免选项 2 中潜在的强制转换问题：

```
String[] myArray = myList.toArray(new String[myList.size()]); /* option 3 */ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-19T12:51:26.090

在java 8中，可以通过

```
String[] myArray = myList.stream().toArray(String[]::new) 
```

# javascript - JavaScript XML 处理

> ID：14986076
> 
> 赞同：0
> 
> 时间：2013-02-20T17:25:09.053
> 
> 标签：javascript

我有一些 HTML 和 XML 知识，并且对 Javascript 完全陌生。

我有一个 html 表格。现在我需要使用 XML 文件更新表中的某些字段。例如，用 XML 文件中的销售字段更新表中的总计字段。总应该=总+销售额。

# sql-server - Xml 批量加载错误消息“消息 4860”

> ID：14986078
> 
> 赞同：0
> 
> 时间：2013-02-20T17:25:14.357
> 
> 标签：sql-server, sql-server-2008, tsql, sql-server-2008-r2

尝试更新 xml 数据类型的现有列时出现以下错误。当我将文件复制到服务器并远程进入服务器并运行它更新的脚本时，它不会让我从我的机器上运行脚本。如何从我的机器运行命令，或者我是否需要将数据存储在服务器也可以访问的地方？

```
Msg 4860, Level 16, State 1, Line 3
Cannot bulk load. The file "C:\Data\Data.xml" does not exist. 
```

# symfony - symfony2 不是有效的实体或映射的超类

> ID：14986080
> 
> 赞同：0
> 
> 时间：2013-02-20T17:25:15.427
> 
> 标签：symfony, doctrine-orm, centos, symfony-2.1, cpanel

我有一个 symfony2 应用程序，在我的本地电脑上使用 ubuntu 并且运行良好，但是在使用 CentOS 和 Cpanel 的服务器上不工作，我得到了这个错误：

> 类“Propa\PageBundle\Entity\Page”不是有效的实体或映射的超类。
> 
> CRITICAL - Doctrine\ORM\Mapping\MappingException：类“Propa\PageBundle\Entity\Page”不是有效的实体或映射的超类。（未捕获的异常）在 /home/estudi83/domains/serverprova.com.es/propa/vendor/doctrine/orm/lib/Doctrine/ORM/Mapping/MappingException.php 行 216

我证明：

```
$page=$em->getRepository('PropaPageBundle:Page')->findOneBy(array('codi'=>'0001')); 
```

并获得此错误：`Unknown Entity namespace alias 'PropaPageBundle'.`

我证明：

```
 $page=$em->getRepository('Propa\PageBundle\Entity\Page')->findOneBy(array('codi'=>'0001')); 
```

并获得相同的错误：`Class "Propa\PageBundle\Entity\Page" is not a valid entity or mapped super class.`

这是实体：

```
<?php
namespace Propa\PageBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Validator\Constraints as Assert;
use Doctrine\Common\Collections\ArrayCollection;
use Vich\UploaderBundle\Mapping\Annotation as Vich;
use Propa\PageBundle\Util;
use Gedmo\Mapping\Annotation as Gedmo;

/**
 * @ORM\Entity(repositoryClass="Propa\PageBundle\Repository\PageRepository")
 * @Gedmo\TranslationEntity(class="Propa\PageBundle\Entity\Translation\PageTranslation")
 * @ORM\HasLifecycleCallbacks
 * @Vich\Uploadable
 */

class Page {

    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue
     */
    protected $id; 
```

我已经证明：

```
auto_mapping: true 
```

和

```
auto_mapping: false
mappings:
    PageBundle: ~ 
```

但总是得到相同的错误。

我能做些什么？

更新：使用 symfony2 注释解决了 eAccelerator 中的问题，我卸载了 eAccelerator 并安装了 APC 并且工作正常！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T17:34:28.773

最后，它可能是缓存优化器问题。如果您使用的是 eAccelerator，那么您将遇到问题，可能是 Doctrine。原因是 eAccelerator 从代码中删除了注释！您可以尝试在学说方面表现良好的 APC。

阅读[apc vs eaccelerator vs xcache](https://stackoverflow.com/questions/930877/apc-vs-eaccelerator-vs-xcache)

* * *

看一下

```
http://you.site.name/config.php 
```

它向您展示了使您的应用程序工作应该存在的要求。

和

请公开您的页面实体类。

* * *

这个错误可能有很多原因，在文件系统中移动类之后，您的问题已经在 SO [“Class XXX is not a valid entity or mapped super class”上被问到](https://stackoverflow.com/questions/7820597/class-xxx-is-not-a-valid-entity-or-mapped-super-class-after-moving-the-class-i)

[https://github.com/symfony/symfony/issues/4554](https://github.com/symfony/symfony/issues/4554)

* * *

```
$page=$em->getRepository('PageBundle:Page')->findOneBy(array('codi'=>'0001')); 
```

将其更改为

```
 $page=$em->getRepository('PropaPageBundle:Page')->findOneBy(array('codi'=>'0001')); 
```

或者

```
 $page=$em->getRepository('Propa\PageBundle\Entity\Page')->findOneBy(array('codi'=>'0001')); 
```

看看它是否有效。

# java - Java - 根据是否为元音转换字符串数组中的字符

> ID：14986084
> 
> 赞同：0
> 
> 时间：2013-02-20T17:25:32.393
> 
> 标签：java, string, character

该方法接受任何名称并测试字符是元音还是辅音。如果是元音，则将字符变为大写，如果是辅音，则将字符变为小写。有什么想法吗？我不知道如何在 if else 语句中添加`.toUpperCase`和。`.toLowerCase`

```
public static void parsing(String name[])
{
    String temp = name[0];

    int i = 0;
    for(i = 0; i < temp.length(); i++)
    {
        if(temp.charAt(i) == 'a' || temp.charAt(i) == 'A' ||
           temp.charAt(i) == 'e' || temp.charAt(i) == 'E' ||
           temp.charAt(i) == 'i' || temp.charAt(i) == 'I' ||
           temp.charAt(i) == 'o' || temp.charAt(i) == 'O' ||
           temp.charAt(i) == 'u' || temp.charAt(i) == 'U')
        {
         System.out.print(temp.charAt(i).toUpperCase);
        }//Obviously wrong but I don't know what to do.
            else
            {
            System.out.print(temp.charAt(i).toLowerCase);
            }//Obviously wrong but I don't know what to do.     
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T17:29:30.487

要转换单个字符，请使用[Character](http://docs.oracle.com/javase/6/docs/api/java/lang/Character.html)类中的方法：

```
System.out.print(Character.toUpperCase(temp.charAt(i)));
System.out.print(Character.toLowerCase(temp.charAt(i))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T17:29:19.827

创建两个最终数组 - 一个带有元音，第二个带有辅音。然后检查循环中的当前字符是元音还是辅音，并进行适当的更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T17:34:40.927

由于 String 是不可变的，因此您正在打头。重建生成的字符串。一个（位次优的）解决方案是：

```
public static void parsing(String[] names)
{
    for (int i = 0; i < names.length; ++i) {
        names[i] = chAngEd(names[i]);
    }
}

private static String chAngEd(String s) {
    String result = "";
    for (int i = 0; i < s.length(); ++i) {
        char ch = s.charAt(i);
        if (ch == 'a' || ...) {
            ch = Character.toUpperCase(ch);
        } else {
            ch = ...
        }
        result += ch;
    }
    return result;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T17:41:17.043

```
public static void parsing(String names[]){
   for (int i=0; i<names.length; ++i){
       names[i] = capitaliseConsts(names[i]);
   }
}

private static String capitaliseConsts(String name){
    StringBuilder sb = new StringBuilder();
    Character c;

    for (int i=0; i<name.length(); ++i){
        c = name.charAt(i);
        if (c.equalsIgnoreCase('a') || 
            c.equalsIgnoreCase('e') ||
            c.equalsIgnoreCase('i') ||
            c.equalsIgnoreCase('o') ||
            c.equalsIgnoreCase('u')){

          sb.append(Character.toUpperCase(c));
       }
       else{
             sb.append(Character.toLowerCase(c));
       }
    }
    return sb.toString();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T17:41:55.740

```
String vowelsArray = "aeiuo";
String constantsArray = "uppercase constants";
int stringLength = name.length();
String givenNameCopy = name.ToString();
for(int i = 0; i < stringLength; i++){
if(vowelsArray.contains(givenNameCopy[i]))
   then uppercase
else if(constantsArray.contains(givenNameCopy[i]))
   then lowercase
else
    continue; 
```

希望这可以帮助。

# database - 如何在时间注册应用程序中模拟多个“暂停”

> ID：14986085
> 
> 赞同：0
> 
> 时间：2013-02-20T17:25:32.610
> 
> 标签：database, database-design

我正在尝试创建一个网站，我可以在其中创建作业并记录每个作业所花费的时间。应该有一个开始、停止、暂停和继续按钮。

我认为数据库中的每个作业都有一个开始和结束日期。这样，当按下开始按钮时，当前日期时间将被保存，当按下停止按钮时，当前日期时间也会被记录下来。然后我可以减去这两个日期并得到完成作业所花费的时间。

但是，如果想暂停一项作业，并在以后继续它怎么办？减去开始和结束日期不会返回以这种方式花费在分配上的实际时间量。

我该怎么做？

谢谢

根据@Gilbert Le Blanc 的回答，我创建了一个小型 C# 应用程序来演示解决方案，如果有人需要的话：

```
class Program
    {
        static List<DateTime> datetimes;

        static void Main(string[] args)
        {

            // DateTime(Int32, Int32, Int32, Int32, Int32, Int32) 
            // Initializes a new instance of the DateTime structure to the specified year, month, day, hour, minute, and second.

            datetimes = new List<DateTime>();

            datetimes.Add(new DateTime(2013, 08, 18, 15, 15, 51));
            datetimes.Add(new DateTime(2013, 08, 19, 15, 15, 51));
            datetimes.Add(new DateTime(2013, 08, 20, 15, 15, 51));
            //datetimes.Add(new DateTime(2013, 08, 21, 15, 15, 51));

            double numberOfMinutes = CalculateTimeInMinutes(datetimes.OrderByDescending(x => x.Date).ToList());
            bool isRunning = IsOdd(datetimes.Count);

        }

        // Hvis der er et ulige antal rækker, kører opgaven stadig
        // Hvis der er et lige antal rækker, er opgaven pauset
        private static bool IsOdd(int value)
        {
            return value % 2 != 0;
        }

        private static double CalculateTimeInMinutes(List<DateTime> timelist) 
        {

            double numberOfMinutes = 0;

            for (int i = 0; i < timelist.Count; i++)
            {
                int nextDate = i + 1;

                if (nextDate <= timelist.Count - 1)
                {
                    TimeSpan ts = timelist[i] - timelist[nextDate];
                    Console.WriteLine(ts.TotalMinutes);
                    numberOfMinutes = numberOfMinutes + ts.TotalMinutes;
                }
            }

            return numberOfMinutes;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:44:01.817

您将创建一个单独的时间段表。

每个开始/停止时间戳都会有一行。

您的网站只需要开始和停止按钮。我假设网站的用户有一种方法可以指示她或他当前正在从事的任务。

您可以根据您的报告需要总结一周、两周或一个月的时间段行。

# jquery - [Rails]jQuery：语法错误，无法识别的表达式

> ID：14986089
> 
> 赞同：4
> 
> 时间：2013-02-20T17:25:41.420
> 
> 标签：jquery, ruby-on-rails, syntax-error, sizzle

我的 Rails 3 应用程序有问题：我的视图中有一个脚本来显示上传进度条（上传过程有效）：

```
<h1>Ajouter des images:</h1>

<%= form_for [:admin, :gallery,  @painting], html: { multipart: true} do |f| %>

  <%= f.hidden_field :gallery_id %>

  <%= f.label :image, "Upload paintings:" %>

  <%= f.file_field :image, multiple: true, name: "painting[image]" %>

<% end %>

<script id="template-upload" type="text/x-tmpl">
  <div class="upload">
    {%=o.name%}
    <div class="progress"><div class="bar" style="width: 0%"></div></div>
  </div>
</script> 
```

但是当我尝试上传文件时，我收到了这个错误：

```
Uncaught Error: Syntax error, unrecognized expression: <div class="upload">
  Argentina.gif
  <div class="progress"><div class="bar" style="width: 0%"></div></div>
</div> 
```

来自 jquery.js 文件：

```
Sizzle.error = function( msg ) {
    throw new Error( "Syntax error, unrecognized expression: " + msg ); 
```

我真的不知道如何解决它，我已经寻求了很多！谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-22T05:31:59.920

发生这种情况是因为您的模板标签内的标识。看看：[jquery-htmlstring-versus-jquery-selectorstring](http://stage.jquery.com/upgrade-guide/1.9/#jquery-htmlstring-versus-jquery-selectorstring)

您可以使用以下方法避免它[`$.parseHTML()`](http://api.jquery.com/jQuery.parseHTML/)：

```
data.context = $($.parseHTML(tmpl("template-upload", file))[1]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T22:43:36.640

jquery-file-upload 在 ruby​​ 1.9.x 中存在兼容性问题。最近有一个修复[https://github.com/blueimp/jQuery-File-Upload/pull/2031](https://github.com/blueimp/jQuery-File-Upload/pull/2031)

其他人也有同样的问题（包括我自己）[https://github.com/waynehoover/s3_direct_upload/issues/47](https://github.com/waynehoover/s3_direct_upload/issues/47)。

尝试使用`bundle update jquery-fileupload-rails`. （我假设您正在使用该宝石。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T08:13:02.000

使用模板时删除 Jquery 函数**$( ) 。**这与 Jquery 1.9.1 兼容。你应该像下面这样处理模板

```
tmpl("template-upload", {file: file, icon: icon_name[type]}) 
```

代替

```
$(tmpl("template-upload", {file: file, icon: icon_name[type]})) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-15T18:14:54.087

使用最新版本的 jquery，添加`tril`它应该可以解决问题

```
$(tmpl("template-upload", {file: file, icon: icon_name[type]}).trim()) 
```

# css - CSS：基于兄弟的动态位置/边距

> ID：14986093
> 
> 赞同：0
> 
> 时间：2013-02-20T17:25:53.967
> 
> 标签：css, css-selectors, css-transitions

我正在尝试使用 css 制作类似效果的堆叠卡片。我想要基于其前一张卡的位置卡。有没有办法可以在 CSS 中编写某种方程式。我可以使用 jquery 来实现这一点，但我想知道我是否可以在 css 中做到这一点。在这种情况下，没有卡片是动态的。

![这些是卡片。 他们将是动态的](../Images/60bf75cb6a10ebe8c18af117d24e5486.png)

```
.card{ position:relative;left10px;} // this didnt work

    /*html*/
   <div id="uno-game">
        <div id="pot">
        </div>   
        <div id="my-cards">
            <ul>
                <li class="green card"><div class="card-inner">3</div></li>
                <li class="red card"><div class="card-inner">3</div></li>
                <li class="green card"><div class="card-inner">3</div></li>
                <li class="blue card"><div class="card-inner">3</div></li>
                <li class="yellow card"><div class="card-inner">3</div></li>
            </ul>
        </div>
    </div>
    /*css*/
    #uno-game{
        height: 500px;
        width: 800px;
        background: green;
        border: 5px solid #000000;
        border-radius: 10px;
        margin: 100px;
    }
    #pot{
        height: 100px;
        width: 100px;
        background: darkgreen;
        margin: auto;
        border: 3px solid darkolivegreen;
        border-radius: 5px;
        margin-top: 200px;
    }
    #my-cards{
        position: relative;
        bottom: 5px;
        margin: auto;
    }
    .card{
        display: block;
        height: 100px;
        width: 75px;
        color: brown;
        border: 1px solid #000;
        border-radius: 5px;
        position: relative;
        left: 10px;
        bottom: 10px;
        float: left;
        padding: 5px;
      -moz-transition: all 0.5s ease-in-out;
      -webkit-transition: all 0.5s ease-in-out;
    }
    .card:hover{
        z-index: 1;
    }
    .card-inner{
        height: 49%;
        width: 54%;
        background: wheat;
        border-radius: 40px;
        margin-top: 25px;
        margin-left: 5px;
        padding-left: 23px;
        padding-top: 6px;
        font-size: 35px;
        font-weight: bold;
    }
    .green{
        background: rgb(101, 156, 16);
    }
    .red{
        background: orangered;
    }
    .blue{
        background: skyblue;
    }
    .yellow{
        background: yellow;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T17:27:50.910

您可以将卡片浮动到左侧。

```
.card{
    float: left;
    margin-right: -5px; //you can change it according to your needs
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-20T17:34:59.337

试试这个 CSS

```
.card + .card {
    margin-left:-70px;
} 
```

# pdf - 从 PDF 中提取文本内容

> ID：14986097
> 
> 赞同：3
> 
> 时间：2013-02-20T17:26:02.313
> 
> 标签：pdf, ghostscript, pdftotext

我一直在使用 pdftotext 从 PDF 中提取文本。我也用 Ghostscript 做到了这一点。最近，一家实用程序提供商更改了他们的 PDF，因此这些方法无法提取其中的一部分。具体来说，我错过了到期日和到期总额。当我在阅读器中打开 PDF 时，可以突出显示、复制“缺失”文本并将其粘贴到外部编辑器中。当我在 Acrobat Pro 中打开它并查看内容（查看 -> 显示/隐藏 -> 导航窗格 -> 内容）时，我需要的文本就在那里。如何在不手动复制和粘贴的情况下将其取出？（这不是一个选择，因为我将在数千个 PDF 上执行此操作）？

这是我正在处理的一个例子。我已删除所有敏感数据：

[链接到 PDF](https://docs.google.com/file/d/0B3pfeUdf84-AdTdnLWlvNzdFR0U/edit?usp=sharing)

编辑：我在发布此内容后注意到，当您点击文件的链接（托管在 Google Drive 上）时，它将允许您选择和复制页面上的大多数文本，但不是我缺少的内容。下载文件时，您可以在 PDF 阅读器中选择缺失的文本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T17:29:06.453

最近发布的 Ghostscript 有一个可能值得一试的 txtwrite 设备。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T18:19:48.543

我通过从 git 获取最新的未发布版本的 Ghostscript 并构建它来解决这个问题。现在 txtwrite 设备给了我我需要的东西。感谢 chrisl 的回答和评论将我引向正确的方向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T01:30:22.240

有一种非常 HACKY 的方法来提取数据，但它只适用于旧版本的 ghostscript，如 8.51 或 8.62。在旧版本的 ghostscript 中，PDF 命令定义在 /lib/pdf_ops.ps 中，新版本做了别的事情。

此处提供了经过测试的 8.62 版本。

```
http://sourceforge.net/projects/ghostscript/files/GPL%20Ghostscript/8.62/gs862w32.exe/download 
```

使用`/Tj {} def`并通过在每个定义的开头`/TJ {} def`添加 a来打印您所追求的文本。`dup ==`（这可以变得更复杂）我也不必担心字体警告消息，但如果将数据写入文件，这些将被过滤掉。

由于正在执行字距调整，因此有些单词被分成几部分和单独的字母。给定时间，这也可以被过滤。

修改 /Tj from pdf_ops.ps /Tj { dup == 0 0 moveto Show settextposition } bdef

从 pdf_ops.ps 修改 /TJ

```
/TJ { dup == 
  0 0 moveto {
    dup type /stringtype eq {
      Show
    } { -1000 div
      currentfont /ScaleMatrix .knownget { 0 get mul } if
      0 Vexch rmoveto
    } ifelse
  } forall settextposition
} bdef 
```

输出

```
(Help a neighbor within your county each month by contributing to The Salvation )
(Army's Project SHARE and Georgia Power will match your gift. To help, simply check )
($1, $2, $5, or $10 on the return portion of this bill. Starting next month, your pledge )
(amount will be included on your monthly bill.)
(Our business offices will be closed on December 24 and 25 for Christmas and January )
(1 for New Year's Day. In case of an emergency, please call us at the number on your )
(bill 24 hours a day, 7 days a week.)
(PLEASE KEEP THIS PORTION FOR YOUR RECORDS.)
(PLEASE RETURN THIS PORTION WITH YOUR PAYMENT, MAKING SURE THE RETURN ADDRESS SHOWS IN THE ENVELOPE WINDOW.)
(Account Number)
(Mail To:) 
```

后记不好玩吗？

# xcode - 尝试在将 iOS 应用程序上传到 AppStore 之前对其进行验证时出错

> ID：14986099
> 
> 赞同：15
> 
> 时间：2013-02-20T17:26:08.097
> 
> 标签：xcode, ios6, app-store

当我尝试使用 Organizer 使用应用程序验证存档时，在将其上传到 App Store 之前，我收到以下错误：“由于一般错误，此时无法处理 lookupPurpleSoftwareVersions 请求”。有没有人收到过这个消息？是因为 Apple 开发者门户问题吗？

谢谢，

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T18:51:02.200

退出并重新启动 Xcode。再次存档应用程序，现在尝试验证应用程序，它可能会工作。（这种情况适用于我的情况:)）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-20T17:36:33.843

苹果服务器有问题。如果我继续提交，我有时会看到此错误：

> “服务器返回无效响应。这可能表明网络代理正在干扰通信，或者 Apple 服务器出现问题。请稍后再试您的请求。”

# ios - 如何在 iOS 编程中向视频文件添加和检索自定义元数据？

> ID：14986103
> 
> 赞同：10
> 
> 时间：2013-02-20T17:26:23.393
> 
> 标签：ios, video, metadata

我正在尝试使用与我的应用相关的自定义元数据保存视频，并在用户从库中选择该视频时尝试检索它。我不确定我是否正确保存了元数据，因为当我尝试检索元数据时看不到任何内容。我也不确定我是否正确检索元数据。我是iOS新手，感谢任何帮助。我搜索了许多线程和开发人员库，但无法使其正常工作。

我正在尝试将元数据保存在 recordingDidFinishToOutputFileURL 委托函数中。视频正在库中保存。

```
NSMutableArray *metadata = [NSMutableArray array];
    AVMutableMetadataItem *mi = [AVMutableMetadataItem metadataItem];
    mi.key = AVMetadataCommonKeyTitle;
    mi.keySpace = AVMetadataKeySpaceCommon;
    mi.value = @"title";
    [metadata addObject:mi];

    NSLog(@"Output saving:%@",outputFileURL);
    AVAsset *video = [AVAsset assetWithURL:outputFileURL];
    AVAssetExportSession *exportSession = [AVAssetExportSession      exportSessionWithAsset:video presetName:AVAssetExportPresetPassthrough];
    exportSession.shouldOptimizeForNetworkUse = YES;
    exportSession.outputFileType = AVFileTypeMPEG4;
    exportSession.metadata = metadata;
    exportSession.outputURL = outputFileURL;
    [exportSession exportAsynchronouslyWithCompletionHandler:^{
        NSLog(@"done processing video!");
        UISaveVideoAtPathToSavedPhotosAlbum(outputFileURL.path, self, @selector(video:didFinishSavingWithError: contextInfo:), nil); 
    }]; 
```

我正在尝试在 didFinishPickingMediaWithInfo 委托函数中检索视频以检查元数据，但在 completionhandler 函数中看不到任何内容

```
 if ([mediaType isEqualToString:(NSString *)kUTTypeMovie]) {
        video_selected = TRUE;
        NSURL *videoURL = [info objectForKey:UIImagePickerControllerMediaURL];

        NSLog(@"video has %@", videoURL.path);
        AVAsset *videoAsset = [AVAsset assetWithURL:videoURL];
        NSLog(@"Loading metadata...");
        NSArray *keys = [[NSArray alloc] initWithObjects:@"commonMetadata", nil];
        NSMutableArray *metadata = [[NSMutableArray alloc] init];
        [videoAsset loadValuesAsynchronouslyForKeys:keys completionHandler:^{

            [metadata removeAllObjects];
            for (NSString *format in [videoAsset availableMetadataFormats])
            {
                [metadata addObjectsFromArray:[videoAsset metadataForFormat:format]];
                NSLog(@"Printing metadata-%@",metadata);
            }

        }]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-15T16:28:31.270

check your errors. You're exporting to where the file already exists so it's exporting into itself which won't work. Just export to a different location

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-28T09:14:04.070

这些键工作正常：

*   AVMetadataCommonKeyAuthor
*   AVMetadataCommonKeyDescription
*   AVMetadataCommonKey版权所有

MP4 文件支持 ISO 用户数据键空间和 iTunes 元数据键空间。上面的键没有 ISO 用户数据映射，所以这就是它们不起作用的原因。同样，您不能将 AVMetadataQuickTimeMetadataKey* 放在 MP4 文件中，因为它不支持该键空间。

```
var metadata: [AVMetadataItem] = []
let mi = AVMutableMetadataItem()
mi.identifier = AVMetadataIdentifier.commonIdentifierDescription
mi.keySpace = .common
mi.value = "Milan Description" as (NSCopying & NSObjectProtocol)?
metadata.append(mi)

let mi1 = AVMutableMetadataItem()
mi1.identifier = AVMetadataIdentifier.commonIdentifierCopyrights
mi1.keySpace = .common
mi1.value = "Milan copy" as (NSCopying & NSObjectProtocol)?
metadata.append(mi1)

print("Output saving:\(trackObj.getTrackUrl())")
let video = AVAsset(url: trackObj.getTrackUrl())
let exportSession = AVAssetExportSession(asset: video, presetName: AVAssetExportPresetPassthrough)
exportSession?.metadata = metadata

exportSession?.outputURL = volumeBoosterViewModel.audioResultRootFolderURL.appendingPathComponent(trackObj.filePathName)
exportSession?.outputFileType = AVFileType.mp3

exportSession?.exportAsynchronously(completionHandler: {[weak self]
    () -> Void in
    if exportSession!.status == AVAssetExportSession.Status.completed  {
        // All is working fine!!
        print("success")
        //get metadata
        let asset = AVAsset(url: Your url)
        if asset.commonMetadata.count > 0 {
            for item in asset.metadata {
                //get metadata
                print(item.value)
            }
        }
    }
}) 
```

# android - 无法让 JQueryMobile CSS/JS 在 PhoneGap 中加载

> ID：14986105
> 
> 赞同：1
> 
> 时间：2013-02-20T17:26:28.680
> 
> 标签：android, jquery, html, cordova, jquery-mobile

我正在尝试使用 PhoneGap 和 JQuery mobile 设置一个基本示例。我无法让页面在我的浏览器中正确加载。问题是页面只是像普通的 html 一样呈现。

我咨询过的来源..
[http://docs.phonegap.com/en/2.4.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android_2_install_sdk_cordova](http://docs.phonegap.com/en/2.4.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android_2_install_sdk_cordova) [http://jquerymobile.com/demos/1.2。 0/docs/about/getting-started.html](http://jquerymobile.com/demos/1.2.0/docs/about/getting-started.html) [http://jquerymobile.com/demos/1.2.0/docs/pages/phonegap.html](http://jquerymobile.com/demos/1.2.0/docs/pages/phonegap.html)

它应该看起来像这样：http: [//jquerymobile.com/demos/1.2.0/docs/pages/page-template.html](http://jquerymobile.com/demos/1.2.0/docs/pages/page-template.html)

我得到了什么：
![在此处输入图像描述](../Images/39278e84af031c824477a54a10960711.png)

我的文件夹结构：

```
/assets/  
-/www/  
--/cordova-2.4.0.js  
--/index.html  
--/jquery-1.8.2.js  
--/jquery.mobile-1.2.0.css  
--/jquery.mobile-1.2.0.js 
```

这是我的基本 html 页面：

```
<!DOCTYPE HTML>
<html>
    <head>
        <title>PhoneGap</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <script type="text/javascript" charset="utf-8" src="cordova-2.4.0.js"></script>
        <link rel="stylesheet" type="type/css" href="jquery.mobile-1.2.0.css"/>
        <script src="jquery-1.8.2.js"></script>
        <script src="jquery.mobile-1.2.0.js"></script>
    <body> 

        <div data-role="page">

            <div data-role="header">
                <h1>Single page</h1>
            </div><!-- /header -->

            <div data-role="content">   
                <p>This is a single page boilerplate template that you can copy to build your first jQuery Mobile page. Each link or form from here will pull a new page in via Ajax to support the animated page transitions.</p>      
                <p>Just view the source and copy the code to get started. All the CSS and JS is linked to the jQuery CDN versions so this is super easy to set up. Remember to include a meta viewport tag in the head to set the zoom level.</p>
                <p>This template is standard HTML document with a single "page" container inside, unlike a <a href="multipage-template.html" data-ajax="false">multi-page template</a> that has multiple pages within it. We strongly recommend building your site or app as a series of separate pages like this because it's cleaner, more lightweight and works better without JavaScript.</p>
            </div><!-- /content -->

            <button>text</button>

            <div data-role="footer">
                <h4>Footer content</h4>
            </div><!-- /footer -->

        </div><!-- /page -->

    </body>
</html> 
```

编辑：这是我的 logcat 中的内容..

```
02-20 11:31:47.342: E/Web Console(18138): Uncaught SyntaxError: Unexpected token ; at file:///android_asset/www/jquery.mobile-1.2.0.js:2655 
```

这是一个指向谷歌驱动器的链接，其中包含我的 www 文件夹......
[https://docs.google.com/folder/d/0B3ALaz5FfLwgZUJjdW1PTnJyblE/edit?usp=sharing](https://docs.google.com/folder/d/0B3ALaz5FfLwgZUJjdW1PTnJyblE/edit?usp=sharing)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T17:37:30.330

您的问题出在**jquery-1.9.1.js**中，jQuery Mobile 1.2 不适用于 1.8.3 以上版本的任何 jQuery。

您甚至可以在这个 jSFiddle 示例上对其进行测试：http: [//jsfiddle.net/Gajotres/yWTG2/](http://jsfiddle.net/Gajotres/yWTG2/)，您只需要更改左上角的 jQuery 版本。将其更改为 1.9.1。一切都会刹车。

所以改变这个：

```
<script src="jquery-1.9.1.js"></script> 
```

到版本 1.8.3。

**编辑 ：**

我已经下载了你的源码。我发现您的 jQuery Mobile css 和 js 源代码有问题，请从我的 jsFiddle 示例中重新下载它们。然后一切都会正常工作。

# ios - 不调用协议中的方法

> ID：14986111
> 
> 赞同：0
> 
> 时间：2013-02-20T17:26:57.903
> 
> 标签：ios, objective-c, protocols

我遇到了下一个问题 我有 3 个视图（一个 UITableView 和 2 个视图控制器）我制作了接下来的 2 个协议：AddViewControllerDelegate 和 ViewAlarmControllerDelegate：AddViewController.h：

```
@protocol AddViewControllerDelegate <NSObject>

- (void)addAlarm:(AlarmObject *)alarm;

@end

@interface AddViewController : UIViewController
{
    id <AddViewControllerDelegate> delegate;
}
@property (retain) id delegate; 
```

ViewAlarmController.h：

```
@protocol ViewAlarmControllerDelegate <NSObject>

- (void)changeAlarm:(AlarmObject *)alarm atIndex:(int) alarmID;
- (void)deleteAlarmAtIndex:(int) alarmID;

@end

@interface ViewAlarmController : UIViewController
{
    id <ViewAlarmControllerDelegate> delegate;
}

@property (retain) id delegate; 
```

然后在 HomeViewController.h 我作为休闲导入：

```
#import "AddViewController.h"
#import "ViewAlarmController.h"
#import "AlarmObject.h"
@interface HomeViewController : UITableViewController <AddViewControllerDelegate, ViewAlarmControllerDelegate> 
```

我在 HomeViewController.m 中有下一个方法声明

```
- (void)addAlarm:(AlarmObject *)alarm{
    [self.items addObject:alarm];
    [self.tableView reloadData];
    NSLog (@"added");
}

- (void)deleteAlarmAtIndex:(int)alarmID{
    NSLog(@"alarmID: %d", alarmID);
    [self.items removeObjectAtIndex:alarmID];
    NSLog(@"items: %@", items);
    [self.tableView reloadData];
}

- (void)changeAlarm:(AlarmObject *)alarm atIndex:(int)alarmID{
    NSLog(@"change");
} 
```

ViewAlarmController.m 调用协议的方法代码块：

```
- (IBAction)save:(id)sender {
    AlarmObject* alarmObj = [[AlarmObject alloc]init];
    if(![self.alarmNameField.text isEqual: @""]){
        [alarmObj setValue:self.alarmNameField.text forKey:@"alarmName"];
        NSLog (@"change alarm id = %d", alarmID);
        [self.delegate changeAlarm:alarmObj atIndex:alarmID];
    }
    [self dismissViewControllerAnimated:YES completion:nil];
}

- (IBAction)reverse:(id)sender {
    alarmNameField.text = [alarm valueForKey:@"alarmName"];
}

- (IBAction)deleteAlarm:(id)sender {
    NSLog (@"delete alarm id: %d",alarmID);
    [self.delegate deleteAlarmAtIndex:alarmID];
    [self dismissViewControllerAnimated:YES completion:nil];
} 
```

问题是 addAlarm 可以工作，但是当我进入 ViewAlarm 并按下按钮删除或保存更改时，不会调用 deleteAlarmAtIndex 和 changeAlarm 方法。

问题出在下一个方法中：

```
 - (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
    if ([segue.identifier isEqualToString:@"addAlarmSegue"]){
        AddViewController *avc = segue.destinationViewController;
        avc.delegate = self;
    }else if ([segue.identifier isEqualToString:@"viewAlarmSegue"]){
        NSIndexPath *selectedRowIndex = [self.tableView indexPathForSelectedRow];
        ViewAlarmController *vac = segue.destinationViewController;
        [vac getObject:[self.items objectAtIndex:selectedRowIndex.row] withId:selectedRowIndex.row];

        vac.delegate = self;
    }
} 
```

我没写`vac.delegate = self;`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T17:52:17.517

确保应该符合您的协议的对象不是`nil`

```
My1Object *a = [My1Object new];
My2Object <Myprotocol> *b = [My2Object new];

a.delegate = b;

@interface My1Object <MyProtocol> 

@property (nonatomic, weak /* or 'unsafe_unretained' for iOS less than 5.0*/) id <MyProtocol> delegate;

@end

@implementation My1Object

...

 - (void)somethingHappened {
     // just for check as I said:
     NSLog(@"self.delegate = %@", self.delegate); // make sure this is not nil!
     if ([self.delegate respondsToSelector:@selector(myProtocolMethod:)]) {
         [self.delegate myProtocolMethod:self];
     }
 }

...

@end 
```

请记住，您不应该保留（强大）您的代表！

# javascript - 当 DOM 发生变化时调用 Objective C 方法。

> ID：14986113
> 
> 赞同：1
> 
> 时间：2013-02-20T17:26:59.157
> 
> 标签：javascript, ios, objective-c, uiwebview

当 DOM 从 JavaScript 代码更改（使用 JavaScript 突出显示）时，我需要调用目标 C 代码。这可能吗？

我不能使用委托

> 应该StartLoadWithRequest：

因为当 DOM 改变时它永远不会被调用。而且我也不想进行硬刷新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:32:11.523

您可能想在 iOS 和 javascript 之间引入通信桥梁。看看这个[iOS JavaScript 桥](https://stackoverflow.com/questions/9473582/ios-javascript-bridge)

# android - 使用多列检查重复的Android sql

> ID：14986115
> 
> 赞同：0
> 
> 时间：2013-02-20T17:27:04.247
> 
> 标签：android, sqlite

我需要根据多列中的信息检查重复记录。如果我只使用一列来检查，我可以让它工作，但我需要它来检查三列，如果所有三列都匹配，则显示敬酒。下面的代码运行，但没有写入数据库。如果我从 if 语句中删除两个字符串，它可以正常工作并写入数据库。我曾尝试使用多个游标，但在尝试检查多个列是否有重复项时，我得到了相同的结果。

```
private void saveState() {

    Calendar calendar = Calendar.getInstance();
    SimpleDateFormat sdf = new SimpleDateFormat("MM/dd/yyyy");
    eventDate = sdf.format(calendar.getTime());

    String date = eventDate;
    String event = eventTitle.getText().toString();
    String empID = result;

    Cursor cursor = mDbHelper.fetchAllEntries();

    while (cursor.moveToNext()) {

    String enteredDate = cursor.getString(cursor.getColumnIndex("date"));
    String enteredEvent = cursor.getString(cursor.getColumnIndex("event"));
    String enteredEmpId = cursor.getString(cursor.getColumnIndex("empID"));

        if ( (enteredEmpId.equals(empID)) && (enteredDate.equals("date") && (enteredEvent.equals(event)))) {
            Toast.makeText(this, "Employee has already been scanned for this event.", Toast.LENGTH_LONG).show();  
        } else {
            mDbHelper.createEntry(date, event, empID);
        }
    }
} 
```

如果需要，这也是我的 Helper 类中的 fetchAllEntries() ：

```
public Cursor fetchAllEntries() {

    return mDb.query(DATABASE_TABLE, new String[] {KEY_ROWID, KEY_DATE,
            KEY_EVENT, KEY_EMPID}, null, null, null, null, null);
} 
```

编辑：我让它显示吐司，但由于某种原因它仍在写入数据库。我还注意到吐司在屏幕上停留了很长时间。我认为这是因为它在 while 循环中并且在完成之前不会关闭。我之前忘了提到，这个应用程序正在扫描条码，所以它需要能够识别它们是否已经被扫描，以了解扫描发生的日期和事件。这是更新的代码

```
private void saveState() {

    Calendar calendar = Calendar.getInstance();
    SimpleDateFormat sdf = new SimpleDateFormat("MM/dd/yyyy");
    eventDate = sdf.format(calendar.getTime());

    String date = eventDate;
    String event = eventTitle.getText().toString();
    String empID = result;

    Cursor cursor = mDbHelper.fetchAllEntries();

    if (cursor.getCount() == 0) {

        mDbHelper.createEntry(date, event, empID);

    } else if (cursor.getCount() > 0 ) {

    while (cursor.moveToNext()) {

    String enteredDate = cursor.getString(cursor.getColumnIndex("date"));
    String enteredEvent = cursor.getString(cursor.getColumnIndex("event"));
    String enteredEmpId = cursor.getString(cursor.getColumnIndex("empID"));

         if ((enteredDate.equals(date)) && (enteredEvent.equals(event)) && (enteredEmpId.equals(empID))) {

            Toast.makeText(this, "Employee has already been scanned for this event.", Toast.LENGTH_SHORT).show();  

        } else {

            mDbHelper.createEntry(date, event, empID);

        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T17:39:52.147

检查是否有超过 1 行具有相同的值：

```
SELECT COUNT(*) FROM myTable WHERE column1 = 'x' AND column2 = 'y' AND column3 = 'z' 
```

如果 count 超过 1，则有重复，获取第一个这样的行的 id：

```
SELECT id FROM myTable WHERE column1 = 'x' AND column2 = 'y' AND column3 = 'z' LIMIT 1 
```

现在删除其余的行：

```
DELETE * FROM myTable WHERE column1 = 'x' AND column2 = 'y' AND column3 = 'z' AND id != myId 
```

# c# - JET OLEDB 参数如何将字符串与 Access DB 中的文本字段进行比较

> ID：14986118
> 
> 赞同：0
> 
> 时间：2013-02-20T17:27:09.790
> 
> 标签：c#, database, ms-access-2007, oledb, jet

我使用 JET OLEDB 连接在 C# 中有以下更新查询，连接到 ms 访问 DB 文件。查询无法更改字段，它运行正确，但仅更改了 0 行。

我认为问题在于如何处理参数并与数据库进行比较，但不知道如何修复它。

“用户”列设置为文本。我有一个插入语句，它以与参数相同的方式完美设置。

```
com.CommandText = "UPDATE [ExamMaster] SET [User] =  (DLookup('LName', 'Users', 'ID' = '@correctUser') WHERE [User] = '@user'";

com.Parameters.AddWithValue("@correctUser", correctUser);
com.Parameters.AddWithValue("@user", userName); 
```

如果我不使用 where 子句的参数，而只是将其插入到命令字符串中，如下所示：

```
WHERE [User] = '"+userName+"'";</code> 
```

它会更新数据库就好了。我在这里想念什么？更新：带或带单引号没有区别，重新排列参数的顺序也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T18:10:04.030

顺序很重要。由于 DLOOKUP 函数，我在您的查询`user`中“认为”首先被调用。`correctUser`

```
com.Parameters.AddWithValue("@user", userName);
com.Parameters.AddWithValue("@correctUser", correctUser); 
```

您不需要单引号参数：

```
WHERE [User] = @user"; 
```

我猜 DLOOKUP 也不需要单引号，如果字段名称有空格或者是保留字（可能是 [User]），则只需 [brackets]。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T00:04:30.013

你需要改变一下，试试：

```
OleDbConnection cn = new OleDbConnection(aconnectionstring);
cn.Open();

//testing
int correctUser = 1;
string userName = "1";

OleDbCommand com = new OleDbCommand();
com.Connection = cn;

//You cannot have a parameter in DLookUp
com.CommandText = "UPDATE [ExamMaster] SET [User] = " +
   "DLookup('LName', 'Users', 'ID = " + correctUser + "') WHERE [User] = @user";

com.Parameters.AddWithValue("@user", userName);

//You must execute the query
com.ExecuteNonQuery(); 
```

# php - php中的动态页面/链接如何工作

> ID：14986120
> 
> 赞同：-1
> 
> 时间：2013-02-20T17:27:17.167
> 
> 标签：php, url, dynamic-pages

我为用户做了一个小的登录系统，他们可以在 account_setting 页面上登录并更改他们的用户信息。

但由于我对 php 很陌生，我想知道如何为每个用户提供自己的页面？公开的页面。

例如，用户“Steven”拥有`user_id=17`.

如何为该用户创建一个页面，以便在那里显示他的信息。像`website.com/user=17`……他的信息。

而且，如果页面可以充当模板，则只需根据用户的不同信息/网址。

我没有要求任何人为我写这篇文章，一个好的教程的链接就可以了：) 但是请不要在这个主题上发表 5 年的帖子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T17:30:11.920

您需要**userprofile.php?userid=17**并使用**$_GET['userid']**根据该用户绘制信息。在 userprofile.php 上的 HTML 应该是相同的，只有数据会根据用户 ID 改变。如果未设置用户 ID，则显示错误消息或其他内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T17:30:45.430

一般说：

```
if (!empty($_GET['user']) && is_numeric($_GET['user'])){
  //Find him in database
  if (user_found($_GET['user'])){
    include "left_column.php" ;
    include "user_info.php" ;
  } else {
    echo "Page is not found" ; //or set header error 404
  }
} else {
  include "news_column.php" ;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T17:36:09.970

website.com/index.php?user=17

```
<?php
require_once 'db/connect.php';

//Pull in 'user' from the query string.
$user = isset($_GET['user']) ? trim($_GET['user']) : null;

//Try to pull that user's info from the database.
$stmt = $dbh->prepare("SELECT * FROM user WHERE user_id = :user_id");
$stmt->bindParam(':user_id', $user);
$stmt->execute();
$user= $stmt->fetch(PDO::FETCH_ASSOC);

if(!is_array($user)){
    //User not found. Throw 404 or redirect.
    header('HTTP/1.0 404 Not Found');
    exit;
}
?>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title><?php echo htmlentities($user['name'], ENT_QUOTES, "utf-8"); ?></title>
    </head>
    <body>
        <h1><?php echo htmlentities($user['name'], ENT_QUOTES, "utf-8"); ?></h1>
        <p>
            <?php echo nl2br(htmlentities($user['bio'], ENT_QUOTES, "utf-8")); ?>
        </p>
    </body>
</html> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-20T17:30:56.640

我将假设您将用户信息存储在数据库中。为了争论，我们会说它是一个 mysql 数据库。您需要做的是捕获用户 ID，然后从数据库中读取该列。

如果您的 URL 是 website.com/user/view.php?id=17，您的用户变量将在 $_GET['id']

所以是这样的：

```
$id = mysqli_real_escape_string($_GET['id']);
$results = mysqli->query("select * from users where id = '$id'");
$results = $results->fetch_assoc(); 
```

...将为用户显示信息；然后你只需构建一个页面来显示它。

# java - 一系列没有递归的嵌套循环

> ID：14986124
> 
> 赞同：3
> 
> 时间：2013-02-20T17:27:25.033
> 
> 标签：java, recursion, for-loop, nested-loops

在 Java 中，我有以下用于整数的通用代码- 最多为最大数（因此对于该范围内的每个值都重复此代码`d`）：`2, 3, 4, ..., dmax``dmax : d < dmax``d`

```
// d is the number of wrapper loops
int[] ls = new int[d];
...
// let ls array be filled with some arbitrary positive numbers here
...
// first wrapper loop
for (int i1 = 0; i1 < ls[0]; i1++) {

    ...

        // last wrapper loop
        for (int id = 0; id < ls[d - 1]; id++) {

            // internal loop
            for (int j = id + 1; j < ls[d - 1]; j++) {

                myCode();

            }

        }

    ...

} 
```

如果`d = 3`它看起来像：

```
int ls = new int[3];
ls[0] = 5; ls[1] = 7; ls[2] = 5;

for (int i1 = 0; i1 < ls[0]; i1++) {

    for (int i2 = 0; i2 < ls[1]; i2++) {

        for (int i3 = 0; i3 < ls[2]; i3++) {

            for (int j = i3 + 1; j < ls[2]; j++) {

                myCode();

            }

        }

    }

} 
```

我想将所有重复的代码收集到一个通用的代码中。为此，我可以使用如下`while`循环和递归：

```
int d = 2, dmax = 10;
while (d < dmax) {
    // in algorithm ls is pre-filled, here its length is shown for clearance
    int[] ls = new int[d];
    for (int i = 0; i < ls[0]; i++) {
        doRecursiveLoop(1, d, -1, ls);
    }
    d++;
}

doRecursiveLoop(int c, int d, int index, int[] ls) {

    if (c < d) {
        for (int i = 0; i < ls[c]; i++) {
            // only on the last call we give the correct index, otherwise -1
            if (c == d - 1) index = i;
            doRecursiveLoop(c + 1, d, index, ls);
        }
    } else {
        for (int j = index + 1; j < ls[d - 1]; j++) {

            myCode();

        }
    }

} 
```

任何人都可以阐明我将如何在没有递归的情况下解决动态发生的嵌套循环的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:29:08.060

您在这里有效地进行了[*尾递归*](http://en.wikipedia.org/wiki/Tail_recursion)。任何尾递归函数都可以使用循环轻松[转换](http://en.wikipedia.org/wiki/Tail_recursion#Relation_to_while_construct)为迭代函数。

例如：

```
void foo() {
    // ... Stuff ...

    if (someCondition) {
        foo();
    } else {
        bar();
    }
} 
```

变成：

```
void foo() {
    while (someCondition) {
        // ... Stuff ...
    }
    bar();
} 
```

# php - 如何配置 Swiftmailer 以使用使用 CRAM-MD5 身份验证的服务器？

> ID：14986128
> 
> 赞同：1
> 
> 时间：2013-02-20T17:27:38.667
> 
> 标签：php, swiftmailer

我用来使用 Swiftmailer 库发送邮件的电子邮件服务器已从正常登录切换到 CRAM-MD5 身份验证。我的 Swfitmailer 实例不再使用此配置。有没有办法设置传输以与 CRAM-MD5 一起使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:50:04.773

找到了。在传输集中：

->setAuthMode('cram-md5')

# python - 为什么 django 和 python MySQLdb 每个数据库都有一个游标？

> ID：14986129
> 
> 赞同：6
> 
> 时间：2013-02-20T17:27:38.893
> 
> 标签：python, mysql, django, mysql-python

示例场景：

MySQL 运行单个服务器 -> HOSTNAME

该服务器上的两个 MySQL 数据库 -> USERS ， GAMES 。

任务 -> 从 GAMES.my_games_table 获取 10 个最新游戏，并从 USERS.my_users_table 获取玩这些游戏的用户（假设没有加入）

在 Django 和 Python MySQLdb 中，为什么每个数据库都有一个游标更可取？

每个 MySQL 服务器单个的扩展游标的缺点是什么，并且可以切换数据库（例如通过查询“use USERS;”），然后在相应的数据库上工作

MySQL 连接很便宜，但如果存在线性流并且没有可能需要两个游标的复杂事务，那么单个连接是否比许多连接更好？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-10T22:54:16.063

更简短的回答是“MySQL 不支持那种类型的游标”，Python-MySQL 也不支持，所以首选连接命令的原因是因为 MySQL 就是这样工作的。这是一种重言式。

然而，更长的答案是：

1.  根据您的定义，“游标”是访问 RDMS 中的表和索引的某种类型的对象，能够维护其状态。
2.  根据您的定义，“连接”将接受命令，并分配或重用游标来执行命令的操作，将其结果返回给连接。
3.  根据您的定义，“连接”将/可以管理多个游标。
4.  您认为这将是访问数据库的首选/高性能方式，因为“连接”很昂贵，而“游标”很便宜。

然而：

1.  MySQL（和其他 RDMS）中的A`cursor`不是用于执行操作的用户可访问机制。MySQL（和其他的）以“set”的形式执行操作，或者更确切地说，它们将您的 SQL 命令编译为内部命令列表，并根据您的 SQL 命令的性质和表结构执行大量复杂的位。
2.  A`cursor`是一种特定机制，在存储过程中使用（并且仅在存储过程中使用），为开发人员提供了一种以过程方式处理数据的方法。
3.  MySQL 中的“连接”就是您所认为的“光标”。MySQL 不会将它的内部结构作为迭代器或指针公开给您，它只是在表上移动。它将其内部暴露为“连接”，接受 SQL 和其他命令，将这些命令转换为内部操作，执行该操作，并将结果返回给您。
4.  这是“集合”和“程序”执行风格之间的区别（这实际上是关于您（用户）被授予访问权限的控制粒度，或者至少是 RDMS 如何抽象其内部的固有粒度当它通过 API 公开它们时）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T19:56:55.390

正如您所说，MySQL 连接很便宜，因此对于您的情况，我不确定在代码组织和流程之外，无论哪种方式都有技术优势。管理两个游标可能比通过煞费苦心地跟踪 SQL 'USE' 语句来跟踪单个游标当前正在与哪个数据库通信更容易。使用其他数据库的里程可能会有所不同——请记住，Django 力求与数据库无关。

此外，考虑两个不同的数据库，即使在同一台服务器上，也需要不同的访问凭据的情况。在这种情况下，将需要两个连接，以便每个连接都可以成功进行身份验证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T22:15:29.047

每个数据库一个游标不一定是可取的，它只是默认行为。

基本原理是不同的数据库通常位于不同的服务器上，使用不同的引擎，和/或需要不同的初始化选项。（否则，你为什么要首先使用不同的“数据库”？）

在您的情况下，如果您的两个数据库只是表的名称空间（在 SQL 术语中应该称为“模式”）但驻留在同一个 MySQL 实例上，那么一定要使用单个连接。（如何配置 Django 这样做实际上是一个完全不同的问题。）

如果您只有一个线程并且实际上并不同时需要两个数据库工作人员，那么单个连接优于两个连接也是对的。

# winapi - 处理钩子函数

> ID：14986130
> 
> 赞同：0
> 
> 时间：2013-02-20T17:27:40.733
> 
> 标签：winapi, dll, com, hook, easyhook

我正在尝试在 C# 中使用 EasyHook 正确挂钩来自 COM 对象（非托管）的方法。

我能够确定 COM 对象的方法的地址，并且可以正确触发我的钩子函数。我是这样做的，其余代码与教程中的代码非常相似：

```
SendHook = LocalHook.Create(0x12345678, new DMyFunc(MyFunc_Hooked), this); 
```

但是，一旦进入我的钩子，所有参数都会被打乱（它们不等于我最初传递的参数）。

此外，我无法返回任何内容（请注意，我还尝试挂钩另一个返回短且值未正确返回的函数）。

当我打开 eXescope 时，这是函数签名之一：

```
function MyFunc(out ParamA:^BSTR; out ParamB:^bool): ^TypeA; 
```

当我在 C# 中正常使用 COM 对象时，此函数具有以下签名：

```
TypeA MyFunc(ref string ParamA, ref bool ParamB); 
```

有任何想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:00:11.433

在阅读了 Dark Falcon 提供的文章后，我设法在 5 分钟内解决了这个问题。我完全推荐阅读它！因此，答案的功劳归于他！

# linux - SVN 锁未释放

> ID：14986131
> 
> 赞同：0
> 
> 时间：2013-02-20T17:27:46.777
> 
> 标签：linux, svn, svnlook

我在 Ubuntu 中使用 SVN。当我尝试更改存储库的 IP 时，我的计算机意外关闭。现在我无法使用 command 更改 IP `svn switch --relocate <old repository> <new repository>`。当我尝试这样做时，我总是收到错误消息：

```
svn: Working copy '.' locked
svn: run 'svn cleanup' to remove locks (type 'svn help cleanup' for details) 
```

我已经尝试过建议的命令`svn cleanup`，但是很长一段时间都没有发生任何事情。解决此问题的唯一方法是再次克隆存储库吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T07:25:42.047

尝试

`svn unlock --force TARGET`

或者

`svnadmin rmlocks TARGET`

其中 target 可能是 repo url 或工作副本。

# assembly - 是否可以用 x86 汇编语言编写 if 语句？

> ID：14986136
> 
> 赞同：3
> 
> 时间：2013-02-20T17:27:51.587
> 
> 标签：assembly, x86, masm

是否可以模仿 x86 汇编语言中的 if 语句（使用 masm 语法）？我想用 x86 汇编语言做这样的事情，但我不确定应该使用哪个运算符来模拟 if-else 语句。我应该使用`jl`指令、`cmp`指令还是其他指令？

```
int i = 2;
int j = 3;
if(i > j){
    i = 1;
}
else{
    i = 4;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T17:30:36.210

`cmp`和`jcc`（即条件跳转）指令的组合就可以了。查阅你的 CPU 手册。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T17:43:19.243

您可以查看您的 CPU 手册，或者您可以直接询问编译器

```
gcc -c foo.c
objdump -d foo.o 
```

其中 foo.c 只是一个简单方法中的函数。输出是

```
00000000 <_foo>:
   0:   55                      push   %ebp
   1:   89 e5                   mov    %esp,%ebp
   3:   83 ec 10                sub    $0x10,%esp
   6:   c7 45 fc 02 00 00 00    movl   $0x2,-0x4(%ebp)
   d:   c7 45 f8 03 00 00 00    movl   $0x3,-0x8(%ebp)
  14:   8b 45 fc                mov    -0x4(%ebp),%eax
  17:   3b 45 f8                cmp    -0x8(%ebp),%eax
  1a:   7e 09                   jle    25 <_foo+0x25>
  1c:   c7 45 fc 01 00 00 00    movl   $0x1,-0x4(%ebp)
  23:   eb 07                   jmp    2c <_foo+0x2c>
  25:   c7 45 fc 04 00 00 00    movl   $0x4,-0x4(%ebp)
  2c:   c9                      leave
  2d:   c3                      ret
  2e:   90                      nop
  2f:   90                      nop 
```

开始的东西是设置堆栈/处理调用约定，重要的是这个

```
 17:   3b 45 f8                cmp    -0x8(%ebp),%eax
  1a:   7e 09                   jle    25 <_foo+0x25>
  1c:   c7 45 fc 01 00 00 00    movl   $0x1,-0x4(%ebp)    // i = 1;
  23:   eb 07                   jmp    2c <_foo+0x2c>
  25:   c7 45 fc 04 00 00 00    movl   $0x4,-0x4(%ebp)    // i = 4; 
```

在这种情况下，它只是 a `cmp`，后跟 a `jle`- 语句的“if”部分以 a 结尾`jmp`以跳过语句的 else 部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T17:37:27.143

假设您有两个装配标签：

```
cmp j1, j2
jg LABEL1
LABEL2 
```

并且`MASM`没有“语法”，它就像一个“编译器”，通常命名为Assembler。

* * *

# 边注：

汇编是语言，汇编器是“编译器”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T17:51:45.630

这可能有助于更好地理解如何`IF`在汇编中实现语句。请注意，它不在`MASM`语法中。

[汇编中的复杂 IF 语句](https://stackoverflow.com/questions/14292903/complex-if-statement-in-assembly)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-01T20:00:49.987

如果您使用 masm32，您可以编写 if 语句，就像在 c++ 示例中一样

```
.if eax == 0
invoke MessageBoxA, NULL, addr strn, offset title, NULL
.endif 
```

# entity-framework - 实体框架代码优先成员资格提供者关系问题

> ID：14986140
> 
> 赞同：0
> 
> 时间：2013-02-20T17:27:59.930
> 
> 标签：entity-framework, ef-code-first, asp.net-membership

我正在尝试首先在 asp.net 会员提供商上进行编码。当代码第一次创建表时，它会生成所有表以及与桥表的适当关系，但它还会创建从 AspNet_User(one) 到 Aspnet_Role(many) 的附加关系。你知道它为什么这样做吗？用户和角色表之间不应该有任何关系。

```
public class Aspnet_Role
{
    public Aspnet_Role()
    {
        Aspnet_Users = new HashSet<Aspnet_Users>();
    }
    [Key]
    public Guid RoleId { get; set; }
    public string RoleName { get; set; }
    public string LoweredRoleName { get; set; }
    public string Description { get; set; }

    public virtual ICollection<Aspnet_Users> Aspnet_Users { get; set; }
}
public class Aspnet_Users
{
    public Aspnet_Users()
    {
        Aspnet_Roles = new HashSet<Aspnet_Role>();
    }
    [Key]
    public Guid UserId { get; set; }
    public string UserName { get; set; }
    public string LoweredUserName { get; set; }
    public string MobileAlias { get; set; }
    public bool IsAnonymous { get; set; }
    public DateTime LastActivityDate { get; set; }

    public virtual Aspnet_Membership Aspnet_Membership { get; set; }
    public virtual ICollection<Aspnet_Role> Aspnet_Roles { get; set; }
}
public class StagingContext : DbContext
{
    public DbSet<Aspnet_Role> Aspnet_Roles { get; set; }
    public DbSet<Aspnet_Users> Aspnet_Users { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)

    {
        base.OnModelCreating(modelBuilder);

        modelBuilder.Entity<Aspnet_Users>()
            .HasMany(r => r.Aspnet_Roles)
            .WithMany()
            .Map(m => m.ToTable("aspnet_UsersInRoles")
                .MapRightKey("RoleId")
                .MapLeftKey("UserId"));

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:09:54.250

我在 WithMany 扩展上添加了导航属性。

```
protected override void OnModelCreating(DbModelBuilder modelBuilder) 
{
    base.OnModelCreating(modelBuilder);

     modelBuilder.Entity<Aspnet_Users>()
         .HasMany(r => r.Aspnet_Roles)
         .WithMany(u => u.Aspnet_Users)
         .Map(m => m.ToTable("aspnet_UsersInRoles")
         .MapRightKey("RoleId")
          .MapLeftKey("UserId")); 

} 
```

# android - 从另一个类中的线程更新 Android UI

> ID：14986146
> 
> 赞同：3
> 
> 时间：2013-02-20T17:28:24.503
> 
> 标签：android, multithreading, asynchronous, runnable, handlers

我在这里看到了一些问题，提出了类似的问题，但我还没有看到合适的答案。很多人都问过如何从线程更新 UI，但他们几乎总是与 UI 在同一个类中。

我想要做的是从另一个类中创建的线程更新 UI。我已经看到了所有的建议，例如异步、处理程序、可运行等......但我在单独的类中实现它们时遇到了真正的麻烦。

我试图让我的 UI 类最小化，并且只处理与 GUI 的交互，例如当用户按下按钮时。现在，我在一个新类中创建了一个新线程，它连接到蓝牙设备，但是我想将 UI 线程中的一个按钮从“连接”按钮更改为“断开”按钮（即更改从创建蓝牙套接字到关闭它的按钮）。

这样做的一般方法是什么？我是否认为这一切都错了，应该把所有东西都放在一个班级里？“主” UI 类与其他类/线程之间交互的正确方法是什么？

理想情况下，我希望能够进行其他 UI 交互，因此一些允许 UI 类之外的其他 UI 更改的解决方案会很棒！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T17:34:25.857

> 我想要做的是从另一个类中创建的线程更新 UI。我已经看到了所有的建议，例如异步、处理程序、可运行等......但我在单独的类中实现它们时遇到了真正的麻烦。

一般来说，为了您的目标，我建议您使用：

*   [`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)
*   [`IntentService`](http://developer.android.com/reference/android/app/IntentService.html)和[`ResultReceiver`](http://developer.android.com/reference/android/os/ResultReceiver.html)

我不认为它太棘手。绝对不。如果您将其作为单独的类而不是某些`Activity`类中的内部类，那么我建议使用构造函数，您将在其中传递上下文、小部件，通常是您想要的任何内容，然后使用正确的方法（允许 UI 更新）更新你的`UI`.

我这样做是因为我喜欢当我有干净的类时（所以 UI 类只有 UI 实现并且逻辑是分开定位的）。

## 例子：

```
public class TaskExample extends AsyncTask<Void, Integer, Void> {

   private Context c;
   private Button b;

   public TaskExample(Context c, Button b) {
      this.c = c;
      this.b = b;
   }

   protected Void doInBackground(Void... params) {
      // some work
      if (isSomethingConnected) {
         publishProgress(Constants.IS_CONNECTED);
      }
      return null;
   }

   public void onProgressUpdate(Integer... params) {
       switch (params[0]) {
          case Constants.IS_CONNECTED:
             b.setText("Connected");
          break;
          case Constants.ANOTHER_CONSTANT:
             // another work
          break;
       }
   }  
} 
```

**用法：**

```
public class Main extends Activity implements View.OnClickListener {

   private Button b;

   public void onCreate(Bundle b) {
      super.onCreate(b);
      // initialise widgets and set listeners to appropriate widgets
   }

   public void onClick(View v) {
      switch(v.getId()) {
         case R.id.connectBtn:
            startWorker();
         break;
      }
   }

   private void startWorker() {
      TaskExample te = new TaskExample(this, b);
      te.execute();
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T18:02:43.357

有几个选项。如果您有权访问要更改的视图并且只需要强制刷新，则可以`View.postInvalidate()`从任何线程使用。如果您需要更复杂的操作，例如更改按钮的文本，您应该使用`runOnUIThread`，这需要访问`Activity`上下文。这应该很容易获得 - 只需将其添加为自定义对象构造函数的参数即可。在这种情况下，您可以执行以下操作：

```
activityContext.runOnUiThread(new Runnable(){
    @Override
    public void run() {
        myButton.setText("disconnect");
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T17:34:04.297

使用该`runOnUiThread(Runnable)`方法在主线程上运行某些东西并调用该`ClassName.View.invalidate()`方法，如果它是一个视图，或者只是 `public`在您的目标类中创建一个方法来处理 UI 的刷新。

# html - HTML 电子邮件在 Outlook 2007 中未正确显示

> ID：14986147
> 
> 赞同：12
> 
> 时间：2013-02-20T17:28:29.233
> 
> 标签：html, html-email, outlook-2007

我花了很多时间研究。我仍然找不到答案。

我有一个 HTML 在我的表格中显示错误的宽度。这是 html 电子邮件的链接：[https](https://tagwebstore.com/email/tag-email-10percentmore.html) ://tagwebstore.com/email/tag-email-10percentmore.html ，下面是它在 Outlook 2007 中的屏幕截图：

![在此处输入图像描述](../Images/0ee5efe3a7a6224ecb14d7007a550987.png)

主要问题是底部区域。html 电子邮件的链接正确显示它。我不知道从这里还能做什么。这是我遇到问题的底部代码：

```
<table cellpadding="0" cellspacing="0" border="0" width="625" align="center" bgcolor="#FFFFFF">
    <tr>
      <td height="23" colspan="3" bgcolor="#FFFFFF">&nbsp;</td>
    </tr>
    <tr>
      <td width="25">&nbsp;</td>
      <td><table cellpadding="0" cellspacing="0" border="0">
          <tr>
            <td><img src="https://www.tagwebstore.com/email/testimonial-top.png" width="573" height="36" style="display:block;" /></td>
          </tr>
          <tr>
            <td bgcolor="#f0d7c1" width="573"><table cellpadding="0" cellspacing="0" border="0" width="573">
                <tr>
                  <td width="28"></td>
                  <td style="font-size:11px; line-height:18px; color:#000000; font-style:italic; font-family:Helvetica, Arial, sans-serif;" width="517"><table cellpadding="0" cellspacing="0" border="0">
                      <tr>
                        <td style="font-size:11px; line-height:18px; color:#000000; font-style:italic; font-family:Helvetica, Arial, sans-serif;">We’ve been using TAG for a while and we love TAG &ndash; we love the products. When we bring the products to Oklahoma City, nobody else has the products. It’s a big plus here for our market area. I think it would be a great thing for people to get online and see what TAG can do for them.</td>
                      </tr>
                      <tr align="right">
                        <td height="40" valign="bottom" style="font-size:11px; line-height:18px; color:#000000; font-style:normal; font-weight:bold; font-family:Helvetica, Arial, sans-serif;">Sirron Brown, Marketing Director<br />
                          Excell Home Care and Hospice, Oklahoma</td>
                      </tr>
                    </table></td>
                  <td width="28"></td>
                </tr>
              </table></td>
          </tr>
          <tr>
            <td><img src="https://www.tagwebstore.com/email/testimonial-bottom.png" width="573" height="57" /></td>
          </tr>
        </table></td>
      <td width="25">&nbsp;</td>
    </tr>
  </table>

  <!--Testimonial End--> 

  <!--Footer-->

  <table cellpadding="0" cellspacing="0" border="0" width="625" align="center" bgcolor="#FFFFFF">
    <tr>
      <td colspan="3" height="20">&nbsp;</td>
    </tr>
    <tr>
      <td width="25">&nbsp;</td>
      <td width="575"><table cellpadding="0" cellspacing="0" border="0">
          <tr>
            <td align="left" valign="middle" width="295" style="font-family:Helvetica, Arial, sans-serif; font-size:12px;"><a href="mailto:info@tagwebstore.com" style="color:#000000; text-decoration:none;">info@tagwebstore.com</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;866.232.6477</td>
            <td width="178" style="font-family:Helvetica, Arial, sans-serif; font-size:12px;" valign="middle" align="right">Follow us on Twitter &amp; YouTube</td>
            <td valign="middle" width="102"><a href="https://twitter.com/TAGhomecaremktg"><img src="https://www.tagwebstore.com/email/twitter.png" width="49" height="17" border="0" /></a><a href="http://www.youtube.com/TAGWebinars"><img src="https://www.tagwebstore.com/email/youtube.png" width="53" height="21" border="0" /></a></td>
          </tr>
        </table></td>
      <td width="25">&nbsp;</td>
    </tr>
    <tr>
      <td colspan="3" height="20">&nbsp;</td>
    </tr>
  </table>

  <!--Footer End--> 
```

包含表的宽度假定为 625px。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-20T18:27:51.147

### 哦 html 电子邮件的乐趣

在处理基于 HTML 的电子邮件时，你必须遵守许多规则，尤其是当你有严格的客户和像素完美的设计时，我很高兴我至少两年没有从事这样的项目现在......我完全不喜欢这种做法的主要原因主要是两个电子邮件客户端。第一个也是有史以来最差的是 Lotus Notes 6.5.4 *（公平地说，它现在已经超过 10 年了.. 但仍然！）*，以及有史以来第二个最差的版本，它们甚至不是最糟糕的，展望 2007 年和 2010 年！

> 谁认为使用 Microsoft Word WYSIWYG HTML 引擎在 Outlook 2007 和 2010 中呈现 HTML 电子邮件是一个好主意，一定是疯了、懒惰、迷路或有点困惑（酌情删除）。它会给开发人员带来无穷无尽的渲染问题，通常是随机和莫名其妙的大小计算或填充问题。

*取自我的博客[http://blog.pebbl.co.uk/2011/06/collapsible-html-email-and-outlook.html](http://blog.pebbl.co.uk/2011/06/collapsible-html-email-and-outlook.html)*

简单地说，我不羡慕你:)

我发现帮助我解决电子邮件问题的最佳方法是遵循以下规则：

1.  永远不要使用`colspans`或`rowspans`。
2.  始终为表格和单元格设置正确的尺寸。
3.  使用间隔 gif 而不是`&nbps;`.
4.  始终指定正确的图像尺寸，从不放大或缩小图像。
5.  始终添加`style="display:block;"`到图像。
6.  避免使用`divs`.
7.  如果您想为链接着色，请将样式放在`a`标签内作为子项的跨度上。
8.  不要使用斜体。
9.  不要使用 BR 进行布局，始终使用表格。
10.  在 Text 中使用 BR，而不是 Ps（以避免 stange 边距问题和段落被完全忽略）。

因为我过去收到的电子邮件数量之多最终变得荒谬，所以我开发了一个脚本来帮助我检查尺寸和其他可能的陷阱。如果你有兴趣使用它，你可以在这里找到它：

[http://pastie.org/6250834](http://pastie.org/6250834)

该脚本可以添加为通常的脚本标签或使用 GreaseMonkey 或类似的东西启用（它被设计为与 Firefox 一起使用，但我看不出它为什么不应该在其他地方工作）。由于我过去构建电子邮件的方式，它只有在满足以下任一条件时才会启用：

1.  有一个已设置的外包装表`width="100%"`，用于将实际电子邮件内容居中。
2.  或者...有一个外部元素（表格或 div）具有`id="base"`.

我已经通过它传递了您的 HTML，下面的图像是结果输出，当您拥有实际页面时更有意义，因为您可以将鼠标悬停在每个有边框的项目上，它会让您大致了解问题所在（或者或者您可以直接使用 Firebug 或类似工具检查元素）。

![我的电子邮件检查器脚本的 ss](../Images/854873f07231811ac4b7ad2cc2090343.png) ![我的电子邮件检查器的解释](../Images/0c82ce412ecbd4aad02cc9a9c6b18fe5.png)

因此，通过检查上述内容，您似乎有一些问题需要解决，我想说最重要的是摆脱行跨度和跨度（这些总是会在 Outlook 中引起问题）并确保您的所有尺寸都符合正确。一旦你解决了这些问题，你可能会看到相当大的改进，但你可能不会再次看到，HTML 电子邮件构建的危险生命是不确定的......

希望能帮助到你。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T19:07:05.120

试试这个为你的顶桌：

```
<table cellpadding="0" cellspacing="0" border="0" width="625" align="center" bgcolor="#FFFFFF">
    <tr>
      <td height="23" bgcolor="#FFFFFF">&nbsp;</td>
    </tr>
    <tr>
      <td width="25">&nbsp;</td>
      <td width="575">

        <table width="100%" cellpadding="0" cellspacing="0" border="0">
          <tr>
            <td>
              <img src="https://www.tagwebstore.com/email/testimonial-top.png" width="575" height="36" style="display:block;" />
            </td>
          </tr>
          <tr>
            <td bgcolor="#f0d7c1" width="575">
              <table width="100%" cellpadding="0" cellspacing="0" border="0">
                <tr>
                  <td width="28">
                  </td>
                  <td width="519" style="font-size:11px; line-height:18px; color:#000000; font-style:italic; font-family:Helvetica, Arial, sans-serif;">
                    <table width="100%" cellpadding="0" cellspacing="0" border="0">
                      <tr>
                        <td style="font-size:11px; line-height:18px; color:#000000; font-style:italic; font-family:Helvetica, Arial, sans-serif;">We’ve been using TAG for a while and we love TAG &ndash; we love the products. When we bring the products to Oklahoma City, nobody else has the products. It’s a big plus here for our market area. I think it would be a great thing for people to get online and see what TAG can do for them.
                        </td>
                      </tr>
                      <tr align="right">
                        <td valign="bottom" style="font-size:11px; line-height:18px; color:#000000; font-style:normal; font-weight:bold; font-family:Helvetica, Arial, sans-serif;">Sirron Brown, Marketing Director<br />
                          Excell Home Care and Hospice, Oklahoma</td>
                      </tr>
                    </table>
                  </td>
                  <td width="28">
                  </td>
                </tr>
              </table>
            </td>
          </tr>
          <tr>
            <td>
              <img src="https://www.tagwebstore.com/email/testimonial-bottom.png" width="575" height="57" style="display:block;" />
            </td>
          </tr>
        </table>

      </td>
      <td width="25">&nbsp;</td>
    </tr>
  </table> 
```

这是你的底线：

```
 <table cellpadding="0" cellspacing="0" border="0" width="625" align="center" bgcolor="#FFFFFF">
    <tr>
      <td colspan="3" height="20">&nbsp;</td>
    </tr>
    <tr>
      <td width="25">&nbsp;</td>
      <td width="575">
        <table width="100%" cellpadding="0" cellspacing="0" border="0">
          <tr>
            <td align="left" valign="middle" width="280" style="font-family:Helvetica, Arial, sans-serif; font-size:12px;">
              <a href="mailto:info@tagwebstore.com" style="color:#000001; text-decoration:none;">info@tagwebstore.com</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;866.232.6477
            </td>
            <td width="193" style="font-family:Helvetica, Arial, sans-serif; font-size:12px;" valign="middle" align="right">
              Follow us on Twitter &amp; YouTube
            </td>
            <td valign="middle" width="49">
              <a href="https://twitter.com/TAGhomecaremktg"><img src="https://www.tagwebstore.com/email/twitter.png" width="49" height="17" border="0" style="display:block;" /></a>
            </td>
            <td valign="middle" width="53">
              <a href="http://www.youtube.com/TAGWebinars"><img src="https://www.tagwebstore.com/email/youtube.png" width="53" height="21" border="0" style="display:block;" /></a>
            </td>
          </tr>
        </table>
      </td>
      <td width="25">&nbsp;</td>
    </tr>
    <tr>
      <td colspan="3" height="20">&nbsp;</td>
    </tr>
  </table> 
```

总的来说，它的编码非常好，只是改变了一些小东西，并不是说每一个都是必须的，但如果它有效，你可以对这些更改进行逆向工程，找出是什么破坏了它。我还没有测试它，所以希望这有效......

# android - 如何将填充添加到列表视图的默认分隔符？

> ID：14986155
> 
> 赞同：2
> 
> 时间：2013-02-20T17:28:59.393
> 
> 标签：android, android-listview

我想为我的列表视图分隔线添加左右填充，因为每一行都应该在屏幕的最左侧有一个纯色，如果我向整个列表添加填充，这些颜色也会被填充。我知道我可以制作自己的分隔线，但我找不到默认分隔线的可绘制对象。

我试图制作一个像这样的drawable：

```
 <View xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:paddingLeft="16dp"
    android:paddingRight="16dp"
    android:background="?android:attr/listDivider" /> 
```

然后将其设为分隔符：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:background="@drawable/background_pattern" >

<ListView
    android:id="@+id/status_list"
    android:layout_width="match_parent"
    android:layout_height="fill_parent"
    android:divider="@drawable/list_divider"
    android:headerDividersEnabled="false"
    android:footerDividersEnabled="false" >
</ListView> 
```

但是应用程序的力量以此结束：

```
02-20 18:02:15.374：E/AndroidRuntime（13457）：致命异常：主要
02-20 18:02:15.374: E/AndroidRuntime(13457): android.view.InflateException: 二进制 XML 文件行 #7: 膨胀类 android.widget.ListView 时出错
02-20 18:02:15.374: E/AndroidRuntime(13457): 在 android.view.LayoutInflater.createView(LayoutInflater.java:613)
02-20 18:02:15.374: E/AndroidRuntime(13457): 在 com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
02-20 18:02:15.374: E/AndroidRuntime(13457): 在 android.view.LayoutInflater.onCreateView(LayoutInflater.java:660)
02-20 18:02:15.374: E/AndroidRuntime(13457): 在 android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:685)
02-20 18:02:15.374: E/AndroidRuntime(13457): 在 android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
02-20 18:02:15.374: E/AndroidRuntime(13457): 在 android.view.LayoutInflater.inflate(LayoutInflater.java:489)
02-20 18:02:15.374: E/AndroidRuntime(13457): 在 android.view.LayoutInflater.inflate(LayoutInflater.java:396)
02-20 18:02:15.374: E/AndroidRuntime(13457): 在 com.bitnation.tubeappy.StatusFragment.onCreateView(StatusFragment.java:79)
02-20 18:02:15.374: E/AndroidRuntime(13457): 在 android.support.v4.app.Fragment.performCreateView(Fragment.java:1460)
02-20 18:02:15.374: E/AndroidRuntime(13457): 在 android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:911)
02-20 18:02:15.374: E/AndroidRuntime(13457): 在 android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1088)
02-20 18:02:15.374: E/AndroidRuntime(13457): 在 android.support.v4.app.BackStackRecord.run(BackStackRecord.java:682)
02-20 18:02:15.374: E/AndroidRuntime(13457): 在 android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1444)
02-20 18:02:15.374: E/AndroidRuntime(13457): 在 android.support.v4.app.FragmentManagerImpl.executePendingTransactions(FragmentManager.java:461)
02-20 18:02:15.374: E/AndroidRuntime(13457): 在 android.support.v4.app.FragmentPagerAdapter.finishUpdate(FragmentPagerAdapter.java:141)
02-20 18:02:15.374: E/AndroidRuntime(13457): 在 android.support.v4.view.ViewPager.populate(ViewPager.java:1012)
02-20 18:02:15.374: E/AndroidRuntime(13457): 在 android.support.v4.view.ViewPager.populate(ViewPager.java:881)
02-20 18:02:15.374: E/AndroidRuntime(13457): 在 android.support.v4.view.ViewPager.onMeasure(ViewPager.java:1366)
02-20 18:02:15.374: E/AndroidRuntime(13457): 在 android.view.View.measure(View.java:15518)
02-20 18:02:15.374: E/AndroidRuntime(13457): 在 android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4825)
02-20 18:02:15.374: E/AndroidRuntime(13457): 在 android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
02-20 18:02:15.374: E/AndroidRuntime(13457): 在 android.view.View.measure(View.java:15518)
02-20 18:02:15.374: E/AndroidRuntime(13457): 在 android.widget.LinearLayout.measureVertical(LinearLayout.java:847)
02-20 18:02:15.374: E/AndroidRuntime(13457): 在 android.widget.LinearLayout.onMeasure(LinearLayout.java:588)
02-20 18:02:15.374: E/AndroidRuntime(13457): 在 android.view.View.measure(View.java:15518)
02-20 18:02:15.374: E/AndroidRuntime(13457): 在 android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4825)
02-20 18:02:15.374: E/AndroidRuntime(13457): 在 android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
02-20 18:02:15.374: E/AndroidRuntime(13457): 在 com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2176)
02-20 18:02:15.374: E/AndroidRuntime(13457): 在 android.view.View.measure(View.java:15518)
02-20 18:02:15.374: E/AndroidRuntime(13457): 在 android.view.ViewRootImpl.performMeasure(ViewRootImpl.java:1874)
02-20 18:02:15.374: E/AndroidRuntime(13457): 在 android.view.ViewRootImpl.measureHierarchy(ViewRootImpl.java:1089)
02-20 18:02:15.374: E/AndroidRuntime(13457): 在 android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1265)
02-20 18:02:15.374: E/AndroidRuntime(13457): 在 android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:989)
02-20 18:02:15.374: E/AndroidRuntime(13457): 在 android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4351)
02-20 18:02:15.374: E/AndroidRuntime(13457): 在 android.view.Choreographer$CallbackRecord.run(Choreographer.java:749)
02-20 18:02:15.374: E/AndroidRuntime(13457): 在 android.view.Choreographer.doCallbacks(Choreographer.java:562)
02-20 18:02:15.374: E/AndroidRuntime(13457): 在 android.view.Choreographer.doFrame(Choreographer.java:532)
02-20 18:02:15.374: E/AndroidRuntime(13457): 在 android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:735)
02-20 18:02:15.374: E/AndroidRuntime(13457): 在 android.os.Handler.handleCallback(Handler.java:725)
02-20 18:02:15.374: E/AndroidRuntime(13457): 在 android.os.Handler.dispatchMessage(Handler.java:92)
02-20 18:02:15.374: E/AndroidRuntime(13457): 在 android.os.Looper.loop(Looper.java:137)
02-20 18:02:15.374: E/AndroidRuntime(13457): 在 android.app.ActivityThread.main(ActivityThread.java:5041)
02-20 18:02:15.374: E/AndroidRuntime(13457): 在 java.lang.reflect.Method.invokeNative(Native Method)
02-20 18:02:15.374: E/AndroidRuntime(13457): 在 java.lang.reflect.Method.invoke(Method.java:511)
02-20 18:02:15.374: E/AndroidRuntime(13457): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-20 18:02:15.374: E/AndroidRuntime(13457): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-20 18:02:15.374: E/AndroidRuntime(13457): at dalvik.system.NativeStart.main(Native Method)
02-20 18:02:15.374：E/AndroidRuntime(13457)：由：java.lang.reflect.InvocationTargetException 引起
02-20 18:02:15.374: E/AndroidRuntime(13457): 在 java.lang.reflect.Constructor.constructNative(Native Method)
02-20 18:02:15.374: E/AndroidRuntime(13457): 在 java.lang.reflect.Constructor.newInstance(Constructor.java:417)
02-20 18:02:15.374: E/AndroidRuntime(13457): 在 android.view.LayoutInflater.createView(LayoutInflater.java:587)
02-20 18:02:15.374: E/AndroidRuntime(13457): ... 46 更多
02-20 18:02:15.374：E/AndroidRuntime(13457)：原因：android.content.res.Resources$NotFoundException：来自可绘制资源 ID #0x7f020007 的文件 res/drawable/list_divider.xml
02-20 18:02:15.374: E/AndroidRuntime(13457): 在 android.content.res.Resources.loadDrawable(Resources.java:1953)
02-20 18:02:15.374: E/AndroidRuntime(13457): 在 android.content.res.TypedArray.getDrawable(TypedArray.java:601)
02-20 18:02:15.374: E/AndroidRuntime(13457): 在 android.widget.ListView.(ListView.java:155)
02-20 18:02:15.374: E/AndroidRuntime(13457): 在 android.widget.ListView.(ListView.java:139)
02-20 18:02:15.374: E/AndroidRuntime(13457): ... 49 更多

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T19:11:06.810

这是问题所在，`android:divider`需要一个`@drawable`或`@color`（请参阅[文档](http://developer.android.com/reference/android/widget/ListView.html#attr_android%3adivider)），但您将其`@layout`保存在`@drawable`文件夹下（这就是它编译的原因），但在运行时崩溃。

```
android.content.res.Resources$NotFoundException: File res/drawable/list_divider.xml from drawable resource ID #0x7f020007 
```

不幸的是，我认为没有任何好的方法可以引用默认的 android 可绘制列表分隔符**并**同时覆盖其填充/边界。如果您获得了可绘制的源文件，您可以编辑 9.png 文件的可拉伸/内容区域以调整其填充，但这相当繁琐。

这是我找到的**解决方法**`android:divider="@null"`（并且工作得很好）： set ，并将您的分隔线添加到（用于绑定到您的）`View`的底部。基本上你会伪装分隔线，它会存在于每一行内部而不是它们之间，但对用户来说它看起来是一样的。然后，您将能够控制分隔线的填充与每行的填充分开，这是您的目标。`row_layout.xml``ListView`

# javascript - JavaScript 在 X 秒内更改文本 - 无初始显示

> ID：14986159
> 
> 赞同：0
> 
> 时间：2013-02-20T17:29:10.750
> 
> 标签：javascript

我目前有一个 JavaScript 文件，它将每五秒钟更改一次显示的推荐。一切正常，除了前五秒，什么都没有出现。如果我在调用 JavaScript 函数的地方设置了一个值，它最初会显示出来，然后被第一个推荐的内容替换。

这是调用 JavaScript 的 HTML 代码。

```
<html>
<head>

<SCRIPT language="JavaScript" SRC="textCycle.js"></SCRIPT>
</head>
<body>
    <table border = 0><tr><td style="width:300px;"> <!-- Change the height in order to determine width of quotes -->
    <div id="change"></div></td></tr></table>
</body>
</html> 
```

这是Javascript：

```
var quotes=new Array(5);
var i = 0;
var authors=new Array(5);

//Load Quotes into array
quotes[0]="\"Website is awesome!\"";

quotes[1]="\"Love it!\"";

quotes[2]="\"Awesome site!\"";

quotes[3]="\"This site was very informative and helped with my problem.\"";

quotes[4]="\"Best site for helping with this issue.\"";

//Load authors that correspond with the quote array
authors[0]="Anonymous";

authors[1]="Anonymous";

authors[2]="Anonymous";

authors[3]="Anonymous";

authors[4]="Anonymous";

//Call the changeText() function every 5000 miliseconds
setInterval(changeText, 5000);

//Function that determine what quote and author to put in html.
function changeText(){
    document.getElementById("change").innerHTML=(quotes[i] + '<p style="text-align: right"><i>' + authors[i] + '</i></p>');
    if(i == 4)
        i = 0;
    else
        i++;
} 
```

这只是更改 javascript 文件以使引号 [0] 位于循环之外的问题吗？

*注意：数组中的值已更改以保持匿名。这些都不是真实的见证。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:32:39.197

只需`changeText()`在代码之前的任何位置添加（调用您的函数）即可`setInterval()`。好吧，这不是强制性的。

[**小提琴**](http://jsfiddle.net/fMcaa/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T17:36:26.530

`setInterval`在第一次执行之前等待间隔持续时间（5 秒）。

你可以在设置间隔之前调用它一次，你会很高兴的。例如：

```
//Call the changeText() function every 5000 miliseconds
changeText();
setInterval(changeText, 5000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T17:39:19.523

`changeText()`如果您如上所述添加调用，它可能仍然无法正常工作。这是因为 DOM 还没有被解析。您应该在 DOM 准备好后调用它。一种方法是将其放入`onload`事件中。这是没有第三方库的最简单方法，但也要等到所有图像都加载完毕。这是一个例子：

```
<body onload="changeText()"> 
```

# java - 如何将高可用性引入 一个简单的 JPA 应用程序？

> ID：14986163
> 
> 赞同：2
> 
> 时间：2013-02-20T17:29:19.323
> 
> 标签：java, caching, jpa, high-availability

我想运行两台服务器，它们都有一个通过 JPA 访问的小型本地数据库。第二台服务器是准备接管的热备用服务器。

如何保持数据库同步，以及如何在 JPA 层处理缓存等？

我很想知道是否有人尝试过这个，他们使用了什么技术？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T01:13:00.150

对于缓存，您可以使用 Ehcache。如果您使用的是 JPA Persistence Provider，它默认带有 Hibernate。您将需要使用注释指定哪些实体可以缓存，还可以通过 XML 为特定实体配置缓存策略。

对于数据库复制，除了基本的 IP 故障转移之外，我不会选择基于 JPA/JDBC 的解决方案，您的驱动程序可以根据数据库是什么来支持该故障转移。复制是数据库应该负责的事情，而不是应用程序。现在大多数流行的数据库（Postgresql、Mysql、Ms-SQL、Oracle 等）都支持某种复制或集群，因此取决于您使用的是什么。

# phpstorm - PHPStorm中的鼠标右键单击键盘快捷键

> ID：14986166
> 
> 赞同：6
> 
> 时间：2013-02-20T17:29:23.280
> 
> 标签：phpstorm

在大多数 Windows 应用程序中，我可以使用组合 Shift + F10 复制鼠标右键单击。Shift + F10 映射为在 PHPStorm 中调试当前文件的快捷方式。我查看了设置中的映射部分，但无法找到恢复此组合的方法，以便它模仿鼠标右键单击。这在 PHPStorm 中可行吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-20T18:26:14.313

您需要的操作称为**“显示上下文菜单**” ，位于**“设置”|“****其他**”分支下。**键盘映射**

![在此处输入图像描述](../Images/2fbc435811b6b88fb7d8a481a30f9f10.png)

**PS**
上面的截图显示`Shift+F10`了已经分配给它的快捷方式。

**PPS**
它适用于 v6，但我认为它也适用于 v5。

# php - 是否应该为 Zend Framework 中的查找表创建模型？

> ID：14986172
> 
> 赞同：2
> 
> 时间：2013-02-20T17:29:35.330
> 
> 标签：php, zend-framework

我有几个下面列出的查找表。据我了解，每个数据库表都需要一个模型，但这是否也适用于查找/映射表？创建模型时使用的最佳实践是什么？以下是我的查找表示例...

```
Transaction     Customer     Transaction_Lookup       
id              Id           transection_id
date            name         customer_id
active          active 
```

我已经创建了与 Transaction 和 Customer 表对应的模型，是否还需要为 Transaction_Lookup 创建相应的模型？

此外，我正在使用 Data Mapper 模式，这意味着我还必须为每个模型创建一个 Mapper 类......

提前感谢您的帮助....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:51:57.423

我要说的一句话是不要将模型视为与表格一一对应的。这在您的 OOP 设计中可能会受到很大限制。也就是说，您的模型通常会与单个表格对齐。查找表是一个明显的场景，这是正确的。

至于每个查找表需要一个具体模型......我会考虑编写一个通用模型，该模型可用于与“查找”表对应的所有对象。然后，您可以使用该泛型类，或者将其编写为抽象类并扩展它并创建命名的具体类。利用您在父类中已有的代码，所需的唯一代码数量可能非常有限。如果您想要一个特定于查找表的摘要，您可以抽象字段*key(id)*、*value*、*friendly name*、*active?* 并将表上的相应字段映射到这些通用属性。真的有很多方法可以解决这个问题，希望我解释得很好。

我通常编写两种风格的映射器，一种本质上是表行网关，如 Zend_Db_Table，另一种更自定义，可能我使用存储过程或复杂的 Zend_Db_selects 连接多个表。使用表行网关样式映射器，我通常只需要指定一个表名、适配器和映射对象供映射器使用。在自定义映射器上，我通常需要逐个从头开始编写更多的实现代码。

我喜欢这种使用[Data Mapper](http://martinfowler.com/eaaCatalog/dataMapper.html)的方法。既方便又强大。

# java - 用户输入数组

> ID：14986173
> 
> 赞同：1
> 
> 时间：2013-02-20T17:29:34.433
> 
> 标签：java, arrays

我正在尝试创建一个程序，将用户输入的整数从最大到最小排序。我还需要找到一种方法来打印最大和最小数字。当我定义了值时，代码排序良好，但现在我已将其切换为用户输入，它出于某种原因发回“0”。这是我的代码

```
import java.util.Scanner;
public class SortInteger {

        public static void main(String [] args)
        {
            Scanner input = new Scanner(System.in); 
            System.out.println("Please input three numbers");
            int num = input.nextInt();
            int number [] = new int [num];  //Sorting Array
            int temp;

            boolean correct = false; // Forces the sorting to continue till the numbers are in order

            while(correct ==false){
                correct = true;
            for(int i = 0; i>number.length-1; i++ ){

                if(number [i] >  number [i+1]){
                    temp = number [i+1];
                    number [i+1] = number[i];
                    number[i]= temp;
                    correct = false;

                }
            }
        }
                for(int i = 0; i<number.length-1; i++){   //outputs the array to user
                    System.out.println(number[i]);

                }

        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T17:31:10.820

你只是在初始化你的数组。你从来没有用元素初始化你的数组，因此你的数组元素得到默认值。

```
 System.out.println("Please enter size");
        int num = input.nextInt();
        int number [] = new int [num];  //Sorting Array

         for(int i=0; i<number.length; i++){
               System.out.println("Please enter element at index " + i);
              number[i] = input.nextInt()
         } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T17:31:25.343

你只拿了一个号码

```
int num = input.nextInt(); 
```

并且您将其用于数组大小：

```
 int number [] = new int [num]; 
```

但在其余代码中，您没有接受任何输入，因此您的数组为空。

代码：：

```
import java.util.*;
class test{
 public static void main(String [] args)
    {
        Scanner input = new Scanner(System.in); 
        System.out.println("Please input three numbers");
        int num1 = input.nextInt();
        int num2 = input.nextInt();
        int num3 = input.nextInt();
    int number [] = {num1,num2,num3};  //Sorting Array
    int temp;

    boolean correct = false; // Forces the sorting to continue till the numbers are in order

    while(correct ==false){
        correct = true;
    for(int i = 0; i<number.length-1; i++ ){

        if(number [i] >  number [i+1]){
            temp = number [i+1];
            number [i+1] = number[i];
            number[i]= temp;
            correct = false;

        }
    }
}
        for(int i = 0; i<number.length; i++){   //outputs the array to user
            System.out.println(number[i]);

        }

}} 
```

输出：：

```
Please input three numbers
1
5
4
1
4
5 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T17:40:38.390

正如其他人指出的那样，您需要用多个值填充数组，目前您只请求一个 int。

另外，你确定这有效吗？您的第一个`for`循环不应该是：

```
for(int i = 0; i<number.length-1; i++ ) 
```

代替：

```
for(int i = 0; i>number.length-1; i++ ) 
```

附带说明一下，在我看来，您的排序算法是 O(n2) 您可能需要查看[mergesort](http://en.wikipedia.org/wiki/Merge_sort)和[quicksort](http://en.wikipedia.org/wiki/Quicksort)。

# methods - 使用 TDD 方法并避免使用 Java 静态方法

> ID：14986175
> 
> 赞同：4
> 
> 时间：2013-02-20T17:29:38.793
> 
> 标签：methods, static, tdd

我刚刚收到一些关于求职申请 Java 编码练习的反馈。他们不喜欢反馈中提到的解决方案和两个问题（我非常感谢，因为很少有反馈）：

*   显然，我没有使用 TDD 方法。
*   我过度使用静态方法，我知道静态方法是反面向对象的，但我只在验证和实用类型方法中使用它们。

所以这里有两个问题：

不使用 TDD 方法的可能迹象是什么？

什么编码风格或模式可以替代静态方法？

在前两个回答之后，我还有另一个问题。

您是否同意使用静态方法仅在限制代码的可测试性而不是它们本身不好时才不好。

因此，如果静态方法不限制我的代码的可测试性，那么回到我的工作申请练习解决方案是否仍然不好使用？我的验证方法非常简单 'Validator.notNull(p,"paramName")' 现在我为什么要模拟它？

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T17:49:04.910

不使用 TDD 的一个明显标志是协作者使用静态方法和静态类成员。您不能覆盖静态方法，因此您不能单独使用此类方法替换模拟来测试类。

您可以使用依赖注入，而不是在协作者上使用静态协作者或静态方法。在一个简单的编码练习中，您将通过构造函数或手动通过 setter 注入依赖项。在现实生活中，您可以使用一种可用的依赖框架。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T20:47:41.937

您的静态`Validaton`方法对我来说似乎应该是对象的一部分。

假设你有一堂课`Drink`

```
public class Drink
{
    private readonly string _name;
    private readonly double _temperature;

    public Drink(string name, double temperature)
    {
        _name = name;
        _temperature = temperature;
    }
} 
```

您的业​​务逻辑将能够实例化各种饮料、7up、可乐等。你想确保一种饮料有合适的温度来饮用它，所以你需要一种`Validate`方法。你可以按照你的方法：

```
public void TakeAZip()
{
    if (Validation.HasAppropriateTemp)
    {
        // implement drink
    }
} 
```

'

## 静态类的替代品

这样你就很难依赖你的静态`Validation`类。

或者，您可以使用[依赖注入](http://nl.wikipedia.org/wiki/Dependency_injection)。

```
public void TakeAZip(ITemperatureValidator validator)
{
    if (validator.HasAppropriateTemp)
    {
        // implement drink
    }
} 
```

如果更方便，您还可以选择`Validator`通过构造函数传递

```
 private readonly string _name;
    private readonly double _temperature;
    private ITemperatureValidator _validator;

    public Drink(
        string name, 
        double temperature, 
        ITemperatureValidator validator)
    {
        _name = name;
        _temperature = temperature;
        _validator = validator;
    } 
```

现在您可以[模拟](http://en.wikipedia.org/wiki/Mock_object)验证器的行为，并且可以将您的`Drink`类与所有外部行为隔离开来。

# ruby-on-rails - Ruby on Rails：如何保存依赖于其他两个模型的模型？

> ID：14986181
> 
> 赞同：0
> 
> 时间：2013-02-20T17:29:57.890
> 
> 标签：ruby-on-rails, ruby

我对 Ruby on Rails 还很陌生。我已经建立了一个基本的用户/帖子模型，它允许用户创建帖子。我正在尝试为帖子创建评论，这也会将评论与创建它的用户相关联。

我已经建立了关系，以便用户有很多帖子和评论，帖子属于用户并有很多评论，评论既属于帖子又属于用户。

尝试保存评论时出现了我的问题。在我的评论控制器中：

```
def create
    @comment = current_user.comments.build(params[:comment])
end 
```

这不起作用，也没有说明评论属于哪个帖子。我还在“显示帖子”页面上显示“添加评论”表单，以便在帖子下方创建评论墙，但我的表单仍然只是说

```
<%= form_for @comment do |f| %> 
```

并且不会将评论与 Show 下 Posts 控制器中的 Post 相关联。

我意识到可能有一个简单的答案，但找不到任何解释我的具体问题的资源。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:45:29.147

我会说您主要是将评论添加到特定帖子。所以从那里开始：

```
def create
  @post = Post.find(params[:post_id])  # <== this may be just `id`
  @comment = @post.comments.build(params[:comment])
  @comment.user = current_user

  if @comment.save
    # ... do things
  else
    # ..  render error
  end
end 
```

为此，您需要嵌套您的路线：

```
resources :posts do
  resources :comments
end 
```

您`form_for`需要指明嵌套路线：

```
<%= form_for [@post, @comment] %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T17:50:19.047

您在 CommentsController#create 中做的事情是正确的

```
@comment = current_user.comments.build(params[:comment]) 
```

您缺少的部分是在您的 params[:comment] 中包含 post_id。这应该没问题，因为您总是知道您正在评论的帖子，您正在展示的帖子。所以在你的里面添加以下内容`form_for @comment`

```
<%= f.hidden_field :post_id, @post.id %> 
```

我假设这是在您的显示帖子视图中，并且您在 PostController#show 中设置了@post

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T17:35:59.337

你可以做：

```
def create
  @comment = Comment.new(params[:comment])
  @comment.user = current_user
  if @comment.save ... 
```

# java - 如何在 IntelliJ IDEA 中使用 FreeTTS

> ID：14986183
> 
> 赞同：2
> 
> 时间：2013-02-20T17:30:03.887
> 
> 标签：java, import, freetts

我需要在 Java 程序中使用 FreeTTS。这是一个非常小的应用程序，它只会说出用户输入的特定文本。我不知道如何完成这项工作......我已经从 FreeTTS 网站 ( [http://freetts.sourceforge.net/docs/index.php](http://freetts.sourceforge.net/docs/index.php) ) 下载了 .zip，但我应该如何继续获得它工作？作为 IDE，我使用 IntelliJ IDEA。有人可以帮我了解如何使用它吗？我从来没有真正手动添加过要在应用程序中使用的东西，我想知道，当它被添加时，它如何在程序中使用（通过导入？）。我希望有人可以在这里帮助我，在此先感谢。

额外信息：我使用的是 Mac。

# c# - 无法在 NUnit 中使用 nHibernate 加载 DLL 'SQLite.Interop.dll'

> ID：14986184
> 
> 赞同：0
> 
> 时间：2013-02-20T17:30:08.887
> 
> 标签：c#, sqlite, nhibernate, nunit

我已经安装`FluentNHibernate`并`System.Data.SQLite.MSIL`使用了 Nuget。

我写了一些单元测试并尝试执行它们。但我的测试设置失败得很惨：

> Probel.NDoctor.Statistics.UnitTests.SQLite.ChartQueryTest (TestFixtureSetUp)：SetUp：FluentNHibernate.Cfg.FluentConfigurationException：创建 SessionFactory 时使用了无效或不完整的配置。检查 PotentialReasons 集合和 InnerException 了解更多详细信息。
> 
> ----> System.Reflection.TargetInvocationException : 调用目标抛出异常。----> System.DllNotFoundException：无法加载 DLL 'SQLite.Interop.dll'：找不到指定的模块。（来自 HRESULT 的异常：0x8007007E）

`SQLite.Interop.dll`好吧，我安装包时Nuget没有导入`System.Data.SQLite.MSIL`......

我在用着：

*   `NHibernate 3.3.1.4000`（我安装时安装的`FluentNHibernate 1.3.0.733`）
*   `System.Data.SQLite.MSIL`
*   `NUnit 2.6.2.12296`
*   视觉工作室 2010

请注意，所有这些 dll 导入都不是通过 Nuget 导入的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T21:01:36.550

“SQLite.Interop.dll”包含在`System.Data.SQLite`Nuget 包中。您安装的`System.Data.SQLite.MSIL`包仅包含 ADO.NET 提供程序。只需卸载`System.Data.SQLite.MSIL`并安装`System.Data.SQLite`ADO.NET 提供程序和非托管库即可。那应该可以解决您的问题。

# node.js - 更新模型实例

> ID：14986185
> 
> 赞同：1
> 
> 时间：2013-02-20T17:30:11.040
> 
> 标签：node.js, mongodb, mongoose

我想了解使用猫鼬更新模型实例的正确方法是什么，即：

有：

```
User = {
   username: {
      type: String,
      indexed: true
   },
   email: {
      type: String,
      indexed: true
   },
   name: String,
   .........
}; 
```

我通过 ajax 将整个表单发送到控制器。
到目前为止，我知道两种选择：

```
app.put('/users/', function(req, res){
   var id = ObjectId(req.body._id);
   User.findOne({_id: id}, function(err, user){
       user.name = req.body.name;
       ....
       ....
       user.save();
   });
}); 
```

或者：

```
app.put('/users/', function(req, res){
    var id = ObjectId(req.body._id);
    delete req.body._id
    User.update({_id: id}, req.body, function(err){
         .....
    };
}); 
```

两种方法都有缺点：
在第一种方法中，我必须一个一个地映射所有属性；
在第二种方法中，我必须删除所有无法更改的属性；
还有第三种可能的方法可以让我从客户端发送，只有更改的属性，但我认为这将是一个很大的麻烦。

有没有一种我没有看到的好的、标准化的方式来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T17:56:25.647

这是我通常使用的方法，它涉及一个名为 mongoose-mass-assignement 的小型 npm 包：

[https://github.com/bhelx/mongoose-mass-assignment](https://github.com/bhelx/mongoose-mass-assignment)

这些文档非常不言自明，易于使用。它基本上会为您删除。因此，您添加`protected:true`到模型中，然后它会为您删除这些属性。我喜欢这种方法，因为它仍然允许我按原样使用 req.body。您也可以将其用于更新和插入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T17:47:53.760

第一种方法的变体是使用下划线的[`extend`](http://documentcloud.github.com/underscore/#extend)方法将主体的所有属性应用于模型实例：

```
app.put('/users/', function(req, res){
   var id = ObjectId(req.body._id);
   User.findOne({_id: id}, function(err, user){
       _.extend(user, req.body);
       user.save();
   });
}); 
```

但是，请务必先删除您不希望用户能够设置的任何属性`req.body`。

# objective-c - 访问 Quartz Composer 发布的输入

> ID：14986188
> 
> 赞同：0
> 
> 时间：2013-02-20T17:30:26.030
> 
> 标签：objective-c, cocoa, xcode4.5, quartz-composer

我正在尝试在 Cocoa 项目中设置 QCView，但由于许多可用文档已被贬值，我似乎在绕圈子。我遵循了这个：

[http://kineme.net/forum/DevelopingCompositions/ProblemusingQCPatchController#comment-23250](http://kineme.net/forum/DevelopingCompositions/ProblemusingQCPatchController#comment-23250)

并得到了一些简单的 KVC 绑定工作。但无法弄清楚如何在代码级别访问已发布的输入。

我知道您可以使用 setValue: forKeyPath: 但不知道如何通过拖放访问在 IB 界面中创建的 Object 控制器。

我怎样才能找出活动对象控制器的名称？一旦我知道那个 ivar 是什么，它是不是很简单：

```
[NSObjectContoller setValue:(id) forKeyPath:(NSString)]; 
```

或者还有更多的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:53:44.007

我自己设法解决了这个问题。

从 .h 文件中的对象控制器创建一个 IBOutlet。为了简单起见，我在 AppDelegate.h 中执行此操作

您可以在您的对象控制器实例上调用 setVlaue:forKeyPath:。

对我来说，这看起来像：

```
[_theObjectController setValue:sender forKeyPath:@"selection.patch.Green.value"]; 
```

请注意，密钥路径是“selection.patch.Green.value”您需要将控制器密钥添加到模型密钥路径的开头。

# python - 基于矩阵的python中的3d绘图

> ID：14986193
> 
> 赞同：1
> 
> 时间：2013-02-20T17:30:36.683
> 
> 标签：python, dataset, mplot3d

我有一个由......创建的数据集

```
import random

count = []
for i in range(1, 4):
    for j in range(3, 6):
        for k in range(15,19):
            count.append((i, j, k, random.random())) 
```

我想创建 3d 图`count`vs 对`i`,`j`和`k`（所以总共 3 个图）。我在这里查看了示例：http: [//matplotlib.org/mpl_toolkits/mplot3d/tutorial.html#surface-plots](http://matplotlib.org/mpl_toolkits/mplot3d/tutorial.html#surface-plots)，但它们似乎都在动态创造价值。如何绘制我想要的曲面或网格图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T19:15:41.580

我必须冲刺，但这就是我尝试绘制数据的方式 - `count`vs`(i,j)`示例 - 请参阅最后一行左右的索引切片。如果您需要，很高兴进一步了解。

```
>>> from mpl_toolkits.mplot3d import Axes3D
>>> import matplotlib.pyplot as plt
>>> import numpy as np
>>> import random
>>> 
>>> count = []
>>> for i in range(1, 4):
...     for j in range(3, 6):
...         for k in range(15,19):
...             count.append((i, j, k, random.random()))
...             
...         
...     
... 
>>> data = np.array(count)
>>> fig = plt.figure()
>>> ax = fig.gca(projection='3d')
>>> 
>>> # I think this is the sort of thing you want:
>>> 
>>> ax.plot_trisurf(data[:,0], data[:,1], data[:,3])
/usr/local/lib/python2.7/dist-packages/matplotlib/delaunay/triangulate.py:103: DuplicatePointWarni
ng: Input data contains duplicate x,y points; some values are ignored.
  DuplicatePointWarning,
<mpl_toolkits.mplot3d.art3d.Poly3DCollection object at 0x46e8390>
>>> plt.show() 
```

# image - 图像尺寸时事通讯移动

> ID：14986196
> 
> 赞同：0
> 
> 时间：2013-02-20T17:30:42.847
> 
> 标签：image, mobile, media-queries, newsletter

*问题*：与传递到移动设备的时事通讯有关的理想图像尺寸是多少？

**背景**：我需要向我的图形设计师提供尺寸规格，以便我们可以提供与移动设备相关的特定图像（使用媒体查询）。

**目标设备是**：iphone 3.5"、4"、iPad 10.1"、iPad Mini、Android 设备 - Galaxy Nexus、Note、HTC One 4.7"

感谢您花时间回答我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:34:31.797

这实际上取决于您的布局。图像将是全屏宽度吗？填充？设计的一般规则是让它变大，因为你总是可以在不损失质量的情况下缩小尺寸。如果您甚至有可能需要这些图像来制作更大的东西，请以大图或矢量图形创建它们。

还有视网膜显示的问题。如果您想满足这一点，您需要将图像分辨率加倍，但这会使电子邮件的下载速度变慢。没有正确的答案，因此这取决于您的目标受众，因为您会受益于视网膜显示器，但会淘汰其他移动用户。

# javascript - AngularJS 和 $http

> ID：14986199
> 
> 赞同：-1
> 
> 时间：2013-02-20T17:30:46.250
> 
> 标签：javascript, html, asynchronous, angularjs

我正在尝试将来自多个来源的数据读入 AngularJS 控制器，就像这样 -

```
var Controller = function ($scope, $http) {
    var load = {
        somekey: "/data/a.json",
        someotherkey: "/data/b.json",
        yetanotherkey: "http://restapi"
    }
    for (var i in load) {
        $http({
            url: load[i],
            method: 'GET'
        }).success(function (data, status, headers, config) {
            $scope[i] = data; // <<---- this does not point to the right value of i
        }).error(function (data, status, headers, config){
            $scope[i] = "Error getting content for " + i;
        });
    }
} 
```

然而，这段代码似乎不起作用，因为`i`当回调仍在执行时，变量的内容在循环中发生了变化（即 HTTP 请求没有在遍历字典中所有值的时间内完成），所以只有的最后一个值`i`已更新，所有其他值均未使用。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:55:40.897

我想编写循环的正确方法是-

```
Object.keys(load).forEach(function (element, index, array) {
    $http({
        url: load[element],
        method: 'GET'
    }).success(function (data, status, headers, config) {
        $scope[element] = data;
    }).error(function (data, status, headers, config){
        $scope[element] = "Error getting content for " + i;
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-22T10:37:49.923

或者，当然，自己做一个简单的闭包：

```
for (var item in load) {
    (function(i) {
        $http({
            url: load[i],
            method: 'GET'
        }).success(function (data, status, headers, config) {
            $scope[i] = data; // <<---- this does not point to the right value of i
        }).error(function (data, status, headers, config){
            $scope[i] = "Error getting content for " + i;
        });
    })(item);
} 
```

# php - 使用ajax删除

> ID：14986200
> 
> 赞同：0
> 
> 时间：2013-02-20T17:30:48.550
> 
> 标签：php, jquery

我有一个 div，其中的数据是从后端 php 填充的。我在这里使用codeigniter。div是这样的

```
if(isset($result))
{
echo '
  <div>
    <div>
     $result->value
    </div>
    <a>Delete</a>
  </div>
';
} 
```

删除是使用 ajax 完成的。但是如何刷新删除后不应该显示任何内容的 div？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:41:54.940

在你的`ajax success function`：

```
$(this).closest('div').slideUp().remove(); 
```

这样在视觉上你会看到一个滑动，向上滑动后它会从 dom 中删除，如果从 db 中成功删除，它将不会再次出现。

`Then if you refresh your page you won't see that div again.`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T17:43:54.950

在删除时使用某种类标识符始终是未来扩展/修改的好方法。

```
<div>
    <div>
     $result->value
    </div>
    <a class="deleteme">Delete</a>
</div> 
```

无论哪种情况，您都可以使用它：

```
$(document).on('click', '.deleteme', function() {
   //your delete stuff 
   if (your delete was successful) {
     $(this).parent().fadeOut(500);
   }
}); 
```

# ruby-on-rails - 在此操作中多次调用渲染和/或重定向

> ID：14986201
> 
> 赞同：0
> 
> 时间：2013-02-20T17:30:49.437
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

我知道这个问题问了很多次。但我想摆脱这一切。下面是我的代码。

```
request.format.json? ? 
    "#{render :json => {:success => false, :message => 'Exception, provider code not found'}}" : 
    "#{raise 'Exception, provider code not found'}" if params[:provider_code].nil? || params[:provider_code].empty? || params[:provider_code].blank?

# Setting params for patient details.
conditions = {}
conditions['providers.provider_code'] = params[:provider_code] unless params[:provider_code].blank? 

# Using scope to fetch record based on applied conditions.
patients = Patient.with_messages_provider.where(conditions)

# Response for patient details.
patients = Patient.patients_for_provider(patients)
render :json => patients 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:43:09.553

根据您的代码，我在这里最好的猜测是您的第一行被调用并与最后一行冲突：

```
request.format.json? ? 
    "#{render :json => {:success => false, :message => 'Exception, provider code not found'}}" : 
    "#{raise 'Exception, provider code not found'}" if params[:provider_code].nil? || params[:provider_code].empty? || params[:provider_code].blank? 
```

和

```
render :json => patients 
```

* * *

总的来说，这段代码令人困惑。我给你的第一个建议是修复它。将尾随的 if/unless 语句移到明确的意图中：

```
if params[:provider_code].nil? || params[:provider_code].empty? || params[:provider_code].blank?
  if request.format.json?
    "#{render :json => {:success => false, :message => 'Exception, provider code not found'}}"
  else
    "#{raise 'Exception, provider code not found'}"
  end
end 
```

这明显更具可读性和可理解性。我不知道你为什么要提升并渲染成一个字符串。那是非正常代码，我可以猜到结果是什么，但不确定。

看起来您正在尝试做的是[保护条件](http://smart421.wordpress.com/2011/03/01/using-the-guard-pattern-to-simplify-code-contracts/)，以在您输入不正确的情况下进行救助。如果是这种情况，您需要在 gaurds 中添加返回以退出操作。

```
if params[:provider_code].nil? || params[:provider_code].empty? || params[:provider_code].blank?
  if request.format.json?
    return "#{render :json => {:success => false, :message => 'Exception, provider code not found'}}"
  end
  return "#{raise 'Exception, provider code not found'}"
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T17:39:56.940

有条件的 ? : 在一种情况下进行渲染，在第二种情况下不渲染，所以发生的事情是在您通过该逻辑之后仍然调用渲染。

请记住，“渲染”调用不会立即发生，并且对控制器操作的调用必须确保只有一个渲染被调用。

你必须重新设计你的逻辑，这样如果你因为错误而调用渲染，当出现错误时你会阻止默认渲染。

# c++ - 我在这个 C++ 归并排序中做错了什么？

> ID：14986204
> 
> 赞同：0
> 
> 时间：2013-02-20T17:31:09.837
> 
> 标签：c++, mergesort

程序编译并正常运行。从输入文件中读取整数列表，但输出显示这些数字而没有任何更改。我希望它们从最小到最大排序。作为参考，我正在尝试实现类似于维基百科示例的版本。

```
// arrA contains items to sort; arrB is an array to work in
void mergesort(int *arrA, int *arrB, int first, int last) {

    // a 1 element array is already sorted
    // make increasingly longer sorted lists
    for (int width = 1; width < last; width = 2 * width) {
        // arrA is made up of 1 or more sorted lists of size width        
        for (int i = 0; i < last; i += 2 * width) {
            // merge two sorted lists
            // or copy arrA to arrB if arrA is full
            merge(arrA, i, min(i+width, last), min (i + 2 * width,
                    last), arrB);
        } // end for
        // now arrB is full of sorted lists of size 2* width
        // copy arrB into arrA for next iteration
        copy(arrB, arrA, last);
    } // end for    
} // end mergesort

void merge(int *arrA, int iLeft, int iRight, int iEnd, int *arrB) {
    int i0 = iLeft, i1 = iRight;

    // while either list contains integers
    for (int j = iLeft; j < iEnd; j++) {
        // if 1st integer in left list is <= 1st integer of right list
        if (i0 < iRight && (i1 >= iEnd || arrA[i0] <= arrA[i1])) {
            arrB[j] = arrA[i0];
            i0 += 1;
        } // end if
        else { // right head > left head
            arrB[j] = arrA[i0];
            i0 += 1;
        } // end else        
    } // end for
} // end merge

void copy(int *origin, int *destination, int size) {
    for (int i = 0; i < size; i++) {
        destination[i] = origin[i];
    } // end for 
} // end copy

int main() {
   int size = 0, first = 0, *arrA, *arrB;

   // input data
   read(&arrA, &arrB, &size);

   // sorting
   mergesort(arrA, arrB, first, size);

   // output
   write(arrA, first, size);

   // cleanup
   delete [] arrA;
   delete [] arrB;
} 
```

# 输入

```
33 9 -2 
```

# 输出

```
33 9 -2 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T17:35:43.253

我没有深入研究您的代码，但是这个 if 语句对我来说似乎有点不对劲：

```
 if (i0 < iRight && (i1 >= iEnd || arrA[i0] <= arrA[i1])) {
        arrB[j] = arrA[i0];
        i0 += 1;
    } // end if
    else { // right head > left head
        arrB[j] = arrA[i0];
        i0 += 1;
    } // end else 
```

当然，一对 if/else 子句的全部意义在于你在 if 和 else 部分做不同的事情。据我所知，这里是一样的。

# mysql - 移动列表切换集类型列

> ID：14986206
> 
> 赞同：0
> 
> 时间：2013-02-20T17:31:13.293
> 
> 标签：mysql, alert, move

我有数据库，我想移动列 wutout 设置列类型。我有移动列的代码：

```
ALTER TABLE `table` MODIFY `aaa` decimal(20,2) NOT NULL AFTER `bbb` 
```

对于检测列类型，我有以下代码：

```
SELECT column_type FROM information_schema.COLUMNS WHERE table_name='table' AND COLUMN_NAME = 'aaa' 
```

当我在第二个代码上替换第一个代码变量类型时：

```
ALTER TABLE `table` MODIFY `aaa` (SELECT column_type FROM information_schema.COLUMNS WHERE table_name='table' AND COLUMN_NAME = 'aaa') NOT NULL AFTER `bbb` 
```

我在 PhpMyAdmin 中有错误：

> 1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以`table`在第 1 行的 '(SELECT column_type FROM information_schema.columns WHERE table_name = '附近使用正确的语法

问题出在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T17:38:32.327

你忘记了`COLUMN`

应该是这样的

```
 ALTER TABLE `table` MODIFY COLUMN `aaa` ... 
```

# iphone - iPhone 上的 98kHz 音频文件

> ID：14986210
> 
> 赞同：0
> 
> 时间：2013-02-20T17:31:16.543
> 
> 标签：iphone, ios, audio, lossless

所以我的问题很直接：可以在 iOS 设备上播放 98kHz 的音频文件吗？如果有人有关于技术规格的链接，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T18:23:25.660

你真的是说98Hz吗？我假设你的意思是 96 kHz。如果是这样，那么不，不是没有重新采样到支持的播放速率。如果您实际上是指 98 Hz（并且您的音乐收藏是各种低音炮经典），那么是的，如果您重新采样到支持的速率。

# asp.net - 从表到 aspnet_Users 的外键：ASP.NET

> ID：14986212
> 
> 赞同：0
> 
> 时间：2013-02-20T17:31:21.740
> 
> 标签：asp.net, sql, stored-procedures, foreign-keys

我有一个 Employee 表，其中包含一个 uniqueidentifier 类型的列 User_Id，它是 aspnet_Users 中 User_Id 列的外键。当我尝试使用 User.Identity 作为参数输入带有存储过程的新员工时，它给了我这个错误：

> 不存在从对象类型 System.Security.Principal.GenericIdentity 到已知托管提供程序本机类型的映射。

我该如何解决这个问题？关联注册用户和员工数据是必要的，因为我需要能够仅检索登录用户的员工数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T18:28:50.727

IIdentity[接口](http://msdn.microsoft.com/en-us/library/system.security.principal.iidentity%28v=vs.100%29.aspx)将为您提供 AuthenticationType、IsAuthenticated 和 Name 属性。我认为这些不适合唯一标识符 GUID 字段。您可以尝试获取 User.Identity.Name 并将其放入普通的 varchar 字段中。这对你的目的有用吗？

# python - 从列表列表到字典

> ID：14986218
> 
> 赞同：6
> 
> 时间：2013-02-20T17:31:44.913
> 
> 标签：python, dictionary

我有一个具有非常特定结构的列表列表，如下所示：

```
lol = [['geo','DS_11',45.3,90.1,10.2],['geo','DS_12',5.3,0.1,0.2],['mao','DS_14',12.3,90.1,1],...] 
```

我想将此 lol（列表列表）转换为以下形式的字典（请注意，lol 中每个列表的第二个元素应该是唯一的，因此对于我的 dict 来说是一个很好的键：

```
dict_lol = {'DS_11': ['geo','DS_11',45.3,90.1,10.2], 'DS_12':['geo','DS_12',5.3,0.1,0.2], 'DS_14':['mao','DS_14',12.3,90.1,1],...} 
```

我可以做一个 for 循环，但我正在寻找一种更优雅的 Pythonic 方式来做到这一点。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T17:33:54.063

使用字典理解，在 python 2.7+ 中可用

```
In [93]: {x[1]:x for x in lol}
Out[93]: 
{'DS_11': ['geo', 'DS_11', 45.3, 90.1, 10.2],
 'DS_12': ['geo', 'DS_12', 5.3, 0.1, 0.2],
 'DS_14': ['mao', 'DS_14', 12.3, 90.1, 1]} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-20T17:34:24.377

我相信这是最 Pythonic 的解决方案，使用[字典推导](http://docs.python.org/2/tutorial/datastructures.html#dictionaries)：

```
dict_lol = {item[1]: item for item in lol} 
```

如果它不可用（例如在 Python <2.7 中），您可以使用以下解决方案：

```
dict_lol = dict((item[1], item) for item in lol) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T17:34:45.443

像这样：

```
{l[1]:l for l in lol} 
```

# d3.js - cubism.js 最后一小时轴

> ID：14986220
> 
> 赞同：0
> 
> 时间：2013-02-20T17:31:54.237
> 
> 标签：d3.js, cubism.js, real-time-data

我正在尝试构建一个实时图表，显示过去一小时的 0.0 到 1.0 之间的值。从服务器端，我返回按分钟分组的值数组：

> [1.0,1.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,1.0,0.0,0.333333333333333,1.0,1.0,0.0,0.0,0.0,0.0,0.0 ,0.25,0.5,1.0,0.0,0.0,1.0,0.0,0.5,0.0,0.0,0.0,1.0,0.5,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0 ,0.0,1.0,0.0,0.5,0.0,0.5,0.0,1.0,0.0,0.0,0.0]

这是我的客户端的样子：

```
<div id="demo"></div>
<script src="http://square.github.com/cubism/d3.v2.js"></script>
<script src="http://square.github.com/cubism/cubism.v1.js"></script>
<script>
    var context = cubism.context()
            .serverDelay(0)
            .step(60e2)
            .size(1000)
            .stop();

    d3.select("#demo").selectAll(".axis")
            .data(["top", "bottom"])
            .enter().append("div")
            .attr("class", function(d) { return d + " axis"; })
            .each(function(d) {     d3.select(this).call(context.axis().ticks(12).orient(d)); });

    d3.select("#demo").append("div")
            .attr("class", "rule")
            .call(context.rule());

    d3.select("#demo").selectAll(".horizon")
            .data(["connected_calls"].map(metric))
            .enter().insert("div", ".bottom")
            .attr("class", "horizon")
            .call(context.horizon()

            .format(d3.format("+,.2p")));

    context.on("focus", function(i) {
        d3.selectAll(".value").style("right", i == null ? null : context.size() - i     + "px");
    });

    // Replace this with context.graphite and graphite.metric!
    function metric(name) {
        var format = d3.time.format("%H:%M");
        return context.metric(function(start, stop, step, callback) {
            d3.json("/reports/quality_metrics/" + name, function(rows) {
                var values = []
                rows.forEach(function(d) {
                    values.push(value = d);
                });
                callback(null, values.slice(-context.size()));
            });
        }, name);
    }
</script>
</div> 
```

这就是我得到的： [图片链接](http://i.stack.imgur.com/wWqjC.png)

我要问的是如何缩放上下文以使其适合我的轴？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T19:11:39.147

var context = cubism.context() .serverDelay(0) .step(60e2) .size([页面宽度，以像素为单位]) .stop();

# java - XML 请求 Jaxb

> ID：14986221
> 
> 赞同：1
> 
> 时间：2013-02-20T17:31:54.830
> 
> 标签：java, xml, jaxb

我正在尝试使用 Jaxb 从 xml 请求中创建一个 Java 对象，但我对 jaxb 的有限了解让我望而却步。我以前做过，但它是简单的 XML 文档，只使用基本元素，例如

```
<RootElement>
   <Bookname>Moby Dick</Bookname>
   <BookCode>1</BookCode>
</RootElement> 
```

但现在我有一个更复杂的 xml 文件，任何帮助我开始如何创建这个对象的帮助将不胜感激。我想我将不得不使用某种列表以及@Xmlattribute，但目前我很困惑。任何帮助将不胜感激！我希望我不仅仅是在想这件事。示例 XML 如下所示：

```
 <?xml version="1.0"?>
 <CRMMessage language="en_US" currency="USD" >
<RequestSource name="Testsource" version="2" />
<RequestCode>GetTest</RequestCode>
<DataSet>
    <DataSetColumns>
        <DSColumn name="Column1" />
        <DSColumn name="Column2" />
    </DataSetColumns>
    <Rows>
        <Row>
            <Col>John</Col>
            <Col>Doe</Col>
        </Row>
    </Rows>
</DataSet>
</CRMMessage> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T18:01:02.623

我已经为您提供了一个快速模式，这可能不是您所需要的，因为我无法从示例数据中判断它是否允许多个或某些元素等：

```
<xs:schema version="1.0"
           xmlns:xs="http://www.w3.org/2001/XMLSchema"
           elementFormDefault="qualified">

    <xs:element name="CRMMessage">        
        <xs:complexType>
            <xs:sequence>
                <xs:element minOccurs="1" maxOccurs="1" name="RequestSource">
                    <xs:complexType>
                        <xs:attribute name="Testsource" type="xs:string"/>
                        <xs:attribute name="version" type="xs:integer"/>
                    </xs:complexType>
                </xs:element>
                <xs:element minOccurs="1" maxOccurs="1" name="RequestCode" type="xs:string"/>
                <xs:element minOccurs="1" maxOccurs="1" name="DataSet">
                    <xs:complexType>
                        <xs:all>
                            <xs:element minOccurs="1" maxOccurs="1" name="DataSetColumns">                                
                                <xs:complexType>                                
                                    <xs:sequence>
                                        <xs:element minOccurs="1" maxOccurs="unbounded" name="DSColumn">
                                            <xs:complexType>
                                                <xs:attribute name="name" type="xs:string"/>
                                            </xs:complexType>
                                        </xs:element>                                        
                                    </xs:sequence>
                                </xs:complexType>
                            </xs:element>                            
                            <xs:element minOccurs="1" maxOccurs="1" name="Rows">                                
                                <xs:complexType>                                
                                    <xs:sequence>
                                        <xs:element minOccurs="1" maxOccurs="unbounded" name="Row">
                                            <xs:complexType>
                                                <xs:sequence>
                                                    <xs:element minOccurs="1" maxOccurs="unbounded" name="Col" type="xs:string"/>                                                        
                                                </xs:sequence>
                                            </xs:complexType>
                                        </xs:element>                                        
                                    </xs:sequence>
                                </xs:complexType>
                            </xs:element>                            
                        </xs:all>
                    </xs:complexType>
                </xs:element>                                       
            </xs:sequence>
            <xs:attribute name="language" type="xs:string"/>
            <xs:attribute name="currency" type="xs:string"/>
        </xs:complexType>
    </xs:element>
</xs:schema> 
```

您应该能够以此为起点。然后我通过maven插件和我的pom中的以下内容
将它编译成一个类：`xjc`

```
 <plugin>
        <groupId>org.jvnet.jaxb2.maven2</groupId>
        <artifactId>maven-jaxb2-plugin</artifactId>
        <version>0.8.2</version>
        <executions>
            <execution>
                <id>bind-crm</id>
                <configuration>
                    <schemaDirectory>src/main/resources/</schemaDirectory>
                    <generatePackage>com.my.package.crm</generatePackage>
                    <forceRegenerate>true</forceRegenerate>
                </configuration>
                <goals>
                    <goal>generate</goal>
                </goals>
            </execution>                                                                                            
        </executions>                
    </plugin> 
```

这给了我以下代码：

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "", propOrder = {
    "requestSource",
    "requestCode",
    "dataSet"
})
@XmlRootElement(name = "CRMMessage")
public class CRMMessage {

    @XmlElement(name = "RequestSource", required = true)
    protected CRMMessage.RequestSource requestSource;
    @XmlElement(name = "RequestCode", required = true)
    protected String requestCode;
    @XmlElement(name = "DataSet", required = true)
    protected CRMMessage.DataSet dataSet;
    @XmlAttribute(name = "language")
    protected String language;
    @XmlAttribute(name = "currency")
    protected String currency;

    /**
     * Gets the value of the requestSource property.
     * 
     * @return
     *     possible object is
     *     {@link CRMMessage.RequestSource }
     *     
     */
    public CRMMessage.RequestSource getRequestSource() {
        return requestSource;
    }

    /**
     * Sets the value of the requestSource property.
     * 
     * @param value
     *     allowed object is
     *     {@link CRMMessage.RequestSource }
     *     
     */
    public void setRequestSource(CRMMessage.RequestSource value) {
        this.requestSource = value;
    }

    /**
     * Gets the value of the requestCode property.
     * 
     * @return
     *     possible object is
     *     {@link String }
     *     
     */
    public String getRequestCode() {
        return requestCode;
    }

    /**
     * Sets the value of the requestCode property.
     * 
     * @param value
     *     allowed object is
     *     {@link String }
     *     
     */
    public void setRequestCode(String value) {
        this.requestCode = value;
    }

    /**
     * Gets the value of the dataSet property.
     * 
     * @return
     *     possible object is
     *     {@link CRMMessage.DataSet }
     *     
     */
    public CRMMessage.DataSet getDataSet() {
        return dataSet;
    }

    /**
     * Sets the value of the dataSet property.
     * 
     * @param value
     *     allowed object is
     *     {@link CRMMessage.DataSet }
     *     
     */
    public void setDataSet(CRMMessage.DataSet value) {
        this.dataSet = value;
    }

    /**
     * Gets the value of the language property.
     * 
     * @return
     *     possible object is
     *     {@link String }
     *     
     */
    public String getLanguage() {
        return language;
    }

    /**
     * Sets the value of the language property.
     * 
     * @param value
     *     allowed object is
     *     {@link String }
     *     
     */
    public void setLanguage(String value) {
        this.language = value;
    }

    /**
     * Gets the value of the currency property.
     * 
     * @return
     *     possible object is
     *     {@link String }
     *     
     */
    public String getCurrency() {
        return currency;
    }

    /**
     * Sets the value of the currency property.
     * 
     * @param value
     *     allowed object is
     *     {@link String }
     *     
     */
    public void setCurrency(String value) {
        this.currency = value;
    }

    /**
     * <p>Java class for anonymous complex type.
     * 
     * <p>The following schema fragment specifies the expected content contained within this class.
     * 
     * <pre>
     * &lt;complexType>
     *   &lt;complexContent>
     *     &lt;restriction base="{http://www.w3.org/2001/XMLSchema}anyType">
     *       &lt;all>
     *         &lt;element name="DataSetColumns">
     *           &lt;complexType>
     *             &lt;complexContent>
     *               &lt;restriction base="{http://www.w3.org/2001/XMLSchema}anyType">
     *                 &lt;sequence>
     *                   &lt;element name="DSColumn" maxOccurs="unbounded">
     *                     &lt;complexType>
     *                       &lt;complexContent>
     *                         &lt;restriction base="{http://www.w3.org/2001/XMLSchema}anyType">
     *                           &lt;attribute name="name" type="{http://www.w3.org/2001/XMLSchema}string" />
     *                         &lt;/restriction>
     *                       &lt;/complexContent>
     *                     &lt;/complexType>
     *                   &lt;/element>
     *                 &lt;/sequence>
     *               &lt;/restriction>
     *             &lt;/complexContent>
     *           &lt;/complexType>
     *         &lt;/element>
     *         &lt;element name="Rows">
     *           &lt;complexType>
     *             &lt;complexContent>
     *               &lt;restriction base="{http://www.w3.org/2001/XMLSchema}anyType">
     *                 &lt;sequence>
     *                   &lt;element name="Row" maxOccurs="unbounded">
     *                     &lt;complexType>
     *                       &lt;complexContent>
     *                         &lt;restriction base="{http://www.w3.org/2001/XMLSchema}anyType">
     *                           &lt;sequence>
     *                             &lt;element name="Col" type="{http://www.w3.org/2001/XMLSchema}string" maxOccurs="unbounded"/>
     *                           &lt;/sequence>
     *                         &lt;/restriction>
     *                       &lt;/complexContent>
     *                     &lt;/complexType>
     *                   &lt;/element>
     *                 &lt;/sequence>
     *               &lt;/restriction>
     *             &lt;/complexContent>
     *           &lt;/complexType>
     *         &lt;/element>
     *       &lt;/all>
     *     &lt;/restriction>
     *   &lt;/complexContent>
     * &lt;/complexType>
     * </pre>
     * 
     * 
     */
    @XmlAccessorType(XmlAccessType.FIELD)
    @XmlType(name = "", propOrder = {

    })
    public static class DataSet {

        @XmlElement(name = "DataSetColumns", required = true)
        protected CRMMessage.DataSet.DataSetColumns dataSetColumns;
        @XmlElement(name = "Rows", required = true)
        protected CRMMessage.DataSet.Rows rows;

        /**
         * Gets the value of the dataSetColumns property.
         * 
         * @return
         *     possible object is
         *     {@link CRMMessage.DataSet.DataSetColumns }
         *     
         */
        public CRMMessage.DataSet.DataSetColumns getDataSetColumns() {
            return dataSetColumns;
        }

        /**
         * Sets the value of the dataSetColumns property.
         * 
         * @param value
         *     allowed object is
         *     {@link CRMMessage.DataSet.DataSetColumns }
         *     
         */
        public void setDataSetColumns(CRMMessage.DataSet.DataSetColumns value) {
            this.dataSetColumns = value;
        }

        /**
         * Gets the value of the rows property.
         * 
         * @return
         *     possible object is
         *     {@link CRMMessage.DataSet.Rows }
         *     
         */
        public CRMMessage.DataSet.Rows getRows() {
            return rows;
        }

        /**
         * Sets the value of the rows property.
         * 
         * @param value
         *     allowed object is
         *     {@link CRMMessage.DataSet.Rows }
         *     
         */
        public void setRows(CRMMessage.DataSet.Rows value) {
            this.rows = value;
        }

        /**
         * <p>Java class for anonymous complex type.
         * 
         * <p>The following schema fragment specifies the expected content contained within this class.
         * 
         * <pre>
         * &lt;complexType>
         *   &lt;complexContent>
         *     &lt;restriction base="{http://www.w3.org/2001/XMLSchema}anyType">
         *       &lt;sequence>
         *         &lt;element name="DSColumn" maxOccurs="unbounded">
         *           &lt;complexType>
         *             &lt;complexContent>
         *               &lt;restriction base="{http://www.w3.org/2001/XMLSchema}anyType">
         *                 &lt;attribute name="name" type="{http://www.w3.org/2001/XMLSchema}string" />
         *               &lt;/restriction>
         *             &lt;/complexContent>
         *           &lt;/complexType>
         *         &lt;/element>
         *       &lt;/sequence>
         *     &lt;/restriction>
         *   &lt;/complexContent>
         * &lt;/complexType>
         * </pre>
         * 
         * 
         */
        @XmlAccessorType(XmlAccessType.FIELD)
        @XmlType(name = "", propOrder = {
            "dsColumn"
        })
        public static class DataSetColumns {

            @XmlElement(name = "DSColumn", required = true)
            protected List<CRMMessage.DataSet.DataSetColumns.DSColumn> dsColumn;

            /**
             * Gets the value of the dsColumn property.
             * 
             * <p>
             * This accessor method returns a reference to the live list,
             * not a snapshot. Therefore any modification you make to the
             * returned list will be present inside the JAXB object.
             * This is why there is not a <CODE>set</CODE> method for the dsColumn property.
             * 
             * <p>
             * For example, to add a new item, do as follows:
             * <pre>
             *    getDSColumn().add(newItem);
             * </pre>
             * 
             * 
             * <p>
             * Objects of the following type(s) are allowed in the list
             * {@link CRMMessage.DataSet.DataSetColumns.DSColumn }
             * 
             * 
             */
            public List<CRMMessage.DataSet.DataSetColumns.DSColumn> getDSColumn() {
                if (dsColumn == null) {
                    dsColumn = new ArrayList<CRMMessage.DataSet.DataSetColumns.DSColumn>();
                }
                return this.dsColumn;
            }

            /**
             * <p>Java class for anonymous complex type.
             * 
             * <p>The following schema fragment specifies the expected content contained within this class.
             * 
             * <pre>
             * &lt;complexType>
             *   &lt;complexContent>
             *     &lt;restriction base="{http://www.w3.org/2001/XMLSchema}anyType">
             *       &lt;attribute name="name" type="{http://www.w3.org/2001/XMLSchema}string" />
             *     &lt;/restriction>
             *   &lt;/complexContent>
             * &lt;/complexType>
             * </pre>
             * 
             * 
             */
            @XmlAccessorType(XmlAccessType.FIELD)
            @XmlType(name = "")
            public static class DSColumn {

                @XmlAttribute(name = "name")
                protected String name;

                /**
                 * Gets the value of the name property.
                 * 
                 * @return
                 *     possible object is
                 *     {@link String }
                 *     
                 */
                public String getName() {
                    return name;
                }

                /**
                 * Sets the value of the name property.
                 * 
                 * @param value
                 *     allowed object is
                 *     {@link String }
                 *     
                 */
                public void setName(String value) {
                    this.name = value;
                }

            }

        }

        /**
         * <p>Java class for anonymous complex type.
         * 
         * <p>The following schema fragment specifies the expected content contained within this class.
         * 
         * <pre>
         * &lt;complexType>
         *   &lt;complexContent>
         *     &lt;restriction base="{http://www.w3.org/2001/XMLSchema}anyType">
         *       &lt;sequence>
         *         &lt;element name="Row" maxOccurs="unbounded">
         *           &lt;complexType>
         *             &lt;complexContent>
         *               &lt;restriction base="{http://www.w3.org/2001/XMLSchema}anyType">
         *                 &lt;sequence>
         *                   &lt;element name="Col" type="{http://www.w3.org/2001/XMLSchema}string" maxOccurs="unbounded"/>
         *                 &lt;/sequence>
         *               &lt;/restriction>
         *             &lt;/complexContent>
         *           &lt;/complexType>
         *         &lt;/element>
         *       &lt;/sequence>
         *     &lt;/restriction>
         *   &lt;/complexContent>
         * &lt;/complexType>
         * </pre>
         * 
         * 
         */
        @XmlAccessorType(XmlAccessType.FIELD)
        @XmlType(name = "", propOrder = {
            "row"
        })
        public static class Rows {

            @XmlElement(name = "Row", required = true)
            protected List<CRMMessage.DataSet.Rows.Row> row;

            /**
             * Gets the value of the row property.
             * 
             * <p>
             * This accessor method returns a reference to the live list,
             * not a snapshot. Therefore any modification you make to the
             * returned list will be present inside the JAXB object.
             * This is why there is not a <CODE>set</CODE> method for the row property.
             * 
             * <p>
             * For example, to add a new item, do as follows:
             * <pre>
             *    getRow().add(newItem);
             * </pre>
             * 
             * 
             * <p>
             * Objects of the following type(s) are allowed in the list
             * {@link CRMMessage.DataSet.Rows.Row }
             * 
             * 
             */
            public List<CRMMessage.DataSet.Rows.Row> getRow() {
                if (row == null) {
                    row = new ArrayList<CRMMessage.DataSet.Rows.Row>();
                }
                return this.row;
            }

            /**
             * <p>Java class for anonymous complex type.
             * 
             * <p>The following schema fragment specifies the expected content contained within this class.
             * 
             * <pre>
             * &lt;complexType>
             *   &lt;complexContent>
             *     &lt;restriction base="{http://www.w3.org/2001/XMLSchema}anyType">
             *       &lt;sequence>
             *         &lt;element name="Col" type="{http://www.w3.org/2001/XMLSchema}string" maxOccurs="unbounded"/>
             *       &lt;/sequence>
             *     &lt;/restriction>
             *   &lt;/complexContent>
             * &lt;/complexType>
             * </pre>
             * 
             * 
             */
            @XmlAccessorType(XmlAccessType.FIELD)
            @XmlType(name = "", propOrder = {
                "col"
            })
            public static class Row {

                @XmlElement(name = "Col", required = true)
                protected List<String> col;

                /**
                 * Gets the value of the col property.
                 * 
                 * <p>
                 * This accessor method returns a reference to the live list,
                 * not a snapshot. Therefore any modification you make to the
                 * returned list will be present inside the JAXB object.
                 * This is why there is not a <CODE>set</CODE> method for the col property.
                 * 
                 * <p>
                 * For example, to add a new item, do as follows:
                 * <pre>
                 *    getCol().add(newItem);
                 * </pre>
                 * 
                 * 
                 * <p>
                 * Objects of the following type(s) are allowed in the list
                 * {@link String }
                 * 
                 * 
                 */
                public List<String> getCol() {
                    if (col == null) {
                        col = new ArrayList<String>();
                    }
                    return this.col;
                }

            }

        }

    }

    /**
     * <p>Java class for anonymous complex type.
     * 
     * <p>The following schema fragment specifies the expected content contained within this class.
     * 
     * <pre>
     * &lt;complexType>
     *   &lt;complexContent>
     *     &lt;restriction base="{http://www.w3.org/2001/XMLSchema}anyType">
     *       &lt;attribute name="Testsource" type="{http://www.w3.org/2001/XMLSchema}string" />
     *       &lt;attribute name="version" type="{http://www.w3.org/2001/XMLSchema}integer" />
     *     &lt;/restriction>
     *   &lt;/complexContent>
     * &lt;/complexType>
     * </pre>
     * 
     * 
     */
    @XmlAccessorType(XmlAccessType.FIELD)
    @XmlType(name = "")
    public static class RequestSource {

        @XmlAttribute(name = "Testsource")
        protected String testsource;
        @XmlAttribute(name = "version")
        protected BigInteger version;

        /**
         * Gets the value of the testsource property.
         * 
         * @return
         *     possible object is
         *     {@link String }
         *     
         */
        public String getTestsource() {
            return testsource;
        }

        /**
         * Sets the value of the testsource property.
         * 
         * @param value
         *     allowed object is
         *     {@link String }
         *     
         */
        public void setTestsource(String value) {
            this.testsource = value;
        }

        /**
         * Gets the value of the version property.
         * 
         * @return
         *     possible object is
         *     {@link BigInteger }
         *     
         */
        public BigInteger getVersion() {
            return version;
        }

        /**
         * Sets the value of the version property.
         * 
         * @param value
         *     allowed object is
         *     {@link BigInteger }
         *     
         */
        public void setVersion(BigInteger value) {
            this.version = value;
        }

    }

} 
```

这种帮助？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T10:50:00.017

为您的 XML 创建 XML 模式并从中生成模型绝对[**是 bmorris591 所回答的，**](https://stackoverflow.com/a/14986770/383861)这绝对是一种方法。但是您的 XML 文档并不复杂，以至于您不能从对象开始。

**CRM消息**

*   我们使用`@XmlRootElement`注释将根对象映射到文档的根元素。
*   默认情况下[**，JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)实现在公共属性（get/set 方法）上查找元数据。为了节省空间，我已设置`@XmlAccessorType(XmlAccessType.FIELD)`指定元数据位于字段上（请参阅： [http](http://blog.bdoughan.com/2011/06/using-jaxbs-xmlaccessortype-to.html) ://blog.bdoughan.com/2011/06/using-jaxbs-xmlaccessortype-to.html ）
*   `@XmlAttribute`注释用于指定字段/属性映射到 XML 属性。
*   默认情况下，所有字段/属性都映射到 XML 元素。如果默认 XML 名称与您所需的映射不匹配，那么您可以使用`@XmlElement`注释来覆盖名称。

```
import javax.xml.bind.annotation.*;

@XmlRootElement(name="CRMMessage")
@XmlAccessorType(XmlAccessType.FIELD)
public class CRMMessage {

    @XmlAttribute
    private String language;

    @XmlAttribute
    private String currency;

    @XmlElement(name="RequestCode")
    private String requestCode;

    @XmlElement(name="DataSet")
    private DataSet dataSet;

} 
```

**数据集**

*   从 Java 类开始的一个优点是您可以利用`@XmlElementWrapper`注释在集合字段/属性上添加分组元素（请参阅： [http](http://blog.bdoughan.com/2010/09/jaxb-collection-properties.html) ://blog.bdoughan.com/2010/09/jaxb-collection-properties.html ） . 将此与生成的`DataSet`类[https://stackoverflow.com/a/14986770/383861](https://stackoverflow.com/a/14986770/383861)进行比较。

```
import java.util.List;
import javax.xml.bind.annotation.*;

@XmlAccessorType(XmlAccessType.FIELD)
public class DataSet {

    @XmlElementWrapper(name="DataSetColumns")
    @XmlElement(name="DSColumn")
    private List<DSColumn> columns;

    @XmlElementWrapper(name="Rows")
    @XmlElement(name="Row")
    private List<Row> rows;

} 
```

# jquery - jQuery.Deferred() / GWT 中的 Promises 功能？

> ID：14986223
> 
> 赞同：6
> 
> 时间：2013-02-20T17:32:00.840
> 
> 标签：jquery, gwt, promise, jquery-deferred, gwtquery

最近，我发现我**真的很**喜欢[jQuery.Deferred()](http://api.jquery.com/jQuery.Deferred/)以及它为您提供的处理异步流控制 ( [Promises](http://wiki.commonjs.org/wiki/Promises) ) 的特性。我想我最喜欢的东西是 Ajax 请求 ( `.done()`and `.fail()`) 的回调钩子以及实现`.resolve()`和`.reject()`承诺的能力。我可能会在某个时候为[GWT](https://developers.google.com/web-toolkit/)项目需要这个功能，我想知道，在那个生态系统中是否有类似的东西？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T19:04:38.457

[gwtquery](https://code.google.com/p/gwtquery/) 1.4.0 以与 jquery 相同的方式实现 Deferred：

*   它们基于 CommonJS Promises/A+ 规范
*   gQuery 的实现受到 jQuery API 的启发。
*   而且 gQuery Promise 符合 MVP，因此它们可以在 JVM 中运行。

最近，我们在[GWT.create 会议](http://gwtcreate.com/)上做了一个 gwtquery 演示，介绍了一些新的东西，比如 Promise，你可以看一下[幻灯片](http://gwtquery.github.io/gwt.create-slides/slides/gwtcreate.html#18)（按箭头键在幻灯片之间移动）。

`ajax()`现在返回 a `Promise`，您也可以获取`promise()`与任何 gQuery 对象的队列关联的。此外，您可以`Deferred()`在任何 gwt 回调中创建或使用辅助函数来处理 RequestBuider、RPC、RF。

取自 junit 测试，这里有一部分代码说明如何在代码中使用它们：

```
 public void testDeferredAjaxWhenDone() {
    String url = "https://www.googleapis.com/blogger/v2/blogs/user_id/posts/post_id?callback=?&key=NO-KEY";

    delayTestFinish(5000);
    GQuery.when(Ajax.getJSONP(url))
      .done(new Function() {
        public void f() {
          Properties p = arguments(0);
          assertEquals(400, p.getProperties("error").getInt("code"));
          finishTest();
        }
      });
  }

  public void testDeferredAjaxWhenFail() {
    String url1 = "https://www.googleapis.com/blogger/v2/blogs/user_id/posts/post_id?callback=?&key=NO-KEY";
    String url2 = "https://localhost:4569/foo";

    delayTestFinish(5000);
    GQuery.when(
     Ajax.getJSONP(url1), 
     Ajax.getJSONP(url2))
      .done(new Function() {
        public void f() {
          fail();
        }
      })
      .fail(new Function(){
        public void f() {
          finishTest();
        }
      });
  }

  int progress = 0;
  public void testPromiseFunction() {
    delayTestFinish(3000);
    final Promise doSomething = new PromiseFunction() {
      @Override
      public void f(final Deferred dfd) {
        new Timer() {
          int count = 0;
          public void run() {
            dfd.notify(count ++);
            if (count > 3) {
              cancel();
              dfd.resolve("done");
            }
          }
        }.scheduleRepeating(50);
      }
    };

    doSomething.progress(new Function() {
      public void f() {
        progress = arguments(0);
      }
    }).done(new Function() {
      public void f() {
        assertEquals(3, progress);
        assertEquals(Promise.RESOLVED, doSomething.state());
        finishTest();
      }
    });
  } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-28T13:51:47.483

我刚刚开源了受 CommonJS Promises/A+ 提案和 Dart 的 Futures 启发的[Java Promises。](https://github.com/tbroyer/promises)

我的目标是尽快添加 GWT 支持（GWT 与 和 的兼容性，`Promises`以及`FulfillablePromise`至少 GWT-RPC 的助手）。

# php - 从日差小于某个数字的表中选择

> ID：14986224
> 
> 赞同：-1
> 
> 时间：2013-02-20T17:32:01.163
> 
> 标签：php, sql

我正在尝试获取所有 SQL 条目，其中当前日期和到期日期之间的日差小于 4 天

我的第一种方法如下：

```
$sql_i_requested = "SELECT *, (To_days(date_return)-TO_DAYS(NOW())) as daydif FROM ".$tbl_name." 
WHERE (status!='completed' AND status!='canceled') 
AND owner_id=".$owner_id." 
AND daydif < 4 
ORDER BY date_created DESC"; 
```

我的第二种方法是（根据[where 子句中的 SQL DateDifference](https://stackoverflow.com/questions/5266643/sql-datedifference-in-a-where-clause)）：

```
$sql_i_requested = "SELECT * FROM ".$tbl_name." 
WHERE (status!='completed' AND status!='canceled') 
AND owner_id=".$owner_id." 
AND date_return > DateAdd(day, -3, getdate())
ORDER BY date_created DESC"; 
```

它们都不起作用，那么如何从表中选择“date_return”之间的 day_difference 和`now()`小于 4 天？

**编辑：**

改变了

```
AND daydif < 4 
```

至

```
AND (To_days(date_return)-TO_DAYS(NOW())) < 4 
```

现在它正在工作。无论如何，也许你们可以提出其他解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T17:36:36.860

使用`DATEDIFF`

```
WHERE DATEDIFF(date_return, now()) < 4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T17:35:18.997

尝试：

```
SELECT DATEDIFF(date_return, NOW()) AS dayDiff; 
```

和

```
having dayDiff < 4 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T17:35:20.370

尝试这个：

```
select * 
from  table
where DATEDIFF(day, present, future) < 4 
```

# php - PHP 和 AJAX：AJAX 正常工作，PHP 没有实现查询

> ID：14986232
> 
> 赞同：0
> 
> 时间：2013-02-20T17:32:21.263
> 
> 标签：php, ajax, forms, file, mysqli

慢慢但肯定地，我会得到 AJAX。我有一个将文本字段和文件上传到数据库的表单。我之前在 PHP 中使用过查询，但在 AJAX 中没有。现在 AJAX 可以工作，但 PHP 不行。而且我知道有些人会觉得将图像加载到 BLOB 是令人反感的，但查询本身是有效的，所以我想专注于让我的 javascript 与我的 PHP 对话时遇到的问题。我已经疯狂地研究了这个问题并尝试了很多东西，但我发现上传文件很复杂。

问题 1\. 如果我错了，请纠正我，但是如果 javascript 和 jquery 实现“POST”调用，传递的参数不应该出现在页面的 URL 中？因为他们是。
2\. 为什么我的PHP文件没有解析出发送的数据并将其发送到数据库？我可以在 URL 和 Firebug（虽然我也在慢慢学习 Firebug）中看到数据正在传递。我运行了一个测试 php 文件，我正在使用该文件连接数据库。

谢谢！

**HTML**

```
<!DOCTYPE html>
<html>
<head>
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script src="http://code.jquery.com/jquery-migrate-1.1.1.min.js"></script>
    <script src="jquery.validate.js"></script>
    <script src="jquery.form.js"></script>
    <script>
        $(document).ready(function(){
            $('#addForm').validate();
            function addRecord() {
                $("#aTable").hide('slow', function () { //this is not working
                    alert('Working on it.');
                });
                $("#tableText").hide('slow', function() {//this is not working
                        alert('Working on it.');
                });
                var output = document.getElementById("message");
                var nAname = document.getElementById("aname");
                var nAInfo = new FormData(document.forms.namedItem("addForm"));
                nAInfo.append('aname', nAname);

               $.ajax({
                type: "POST",
                url: "addPhoto.php",
                data: nAInfo
            });
        });
    </script>
</head>
<body>

<form id="addForm" name="addForm" onsubmit="addRecord()" enctype="multipart/form-data">
    <label>Name: </label>
    <input type="text" id="aname" name="aname" class=required/>
    <br>
    <br>
    <label>Photo: </label>
    <input type="file" id="aimage"  name="aimage" class="required">
    <br>
    <br>
    <input type="submit" value="ADD" />
    <br>
</form>

<div id="message" name="message"></div>
<br>
<br>
<div id="image_display"></div>
</body>
</html> 
```

**PHP**

```
<?php
ini_set('display_errors', 'On');
ini_set('display_startup_errors', 'On');
error_reporting(E_ALL);

$mysqli = new mysqli($dbhost, $dbuser, $dbpass, $dbname);

if ($mysqli->connect_errno) {
    echo "Failed to connect to MySQL: (" . $db->connect_errno . ") " . $db->connect_error;
}

if ($mysqli->connect_errno) {
    echo "Failed to connect to MySQL: (" . $mysqli->connect_errno . ") " . $mysqli->connect_error;
}

        echo $_SERVER['REQUEST_METHOD'];

    $aname = $_POST['aname'];
    $errorinfo = $_FILES["aimage"]["error"];
    $filename = $_FILES["aimage"]["name"];
    $tmpfile = $_FILES["aimage"]["tmp_name"];
    $filesize = $_FILES["aimage"]["size"];
    $filetype = $_FILES["aimage"]["type"];

    $fp = fopen($tmpfile, 'r');
    $imgContent = fread($fp, filesize($tmpfile));
    fclose($fp);

    if (!($filetype == "image/jpeg" && $filesize > 0)) {
        echo "Import of photo failed";
    }

    if ($filetype == "image/jpeg" && $filesize > 0 && $filesize < 1048576) {

        if (!($stmt=$mysqli->prepare("INSERT INTO actor_info (aname, aimage_data) VALUES (?,?)"))) {
            echo "Prepare failed: (" . $mysqli->errno . ")" . $mysqli->error;
        }

        if (!$stmt->bind_param("ss", $aname, $imgContent)) {
            echo "Binding parameters failed: (" . $stmt->errno .") " . $stmt->error;
        }

        if (!$stmt->execute()) {
            echo "Execute failed: (" . $stmt->errno . ") " . $stmt->error;
        }
    $stmt->close();
    }
    else {
        echo "Image must be under 1 MB";
    }

echo mysqli_error();
mysqli_close($mysqli);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T17:43:19.003

```
$("#aTable").hide('slow', function () { //this is not working
           alert('Working on it.');
});

$("#tableText").hide('slow', function() {//this is not working
           alert('Working on it.');
}); 
```

上面的代码不起作用，因为您的 html 代码中没有任何 id 为“#aTable”或“#tableText”的元素。

尝试 print_r($_POST) 以查看所有值是否都到达服务器。

还使用 JQuery 的 Ajax 函数将使您的代码更容易......下面是一个示例

```
$.ajax({
        url : $domain + "/index/email/" + "?" + $arguments, //add your args here...
        cache : false,
        beforeSend : function (){
            alert('sending....');
        },
        complete : function($response, $status){
            if ($status != "error" && $status != "timeout") {
                if($response.responseText == "200"){
        alert('done');
                } else {
        alert($response.responseText);
                }
            }
        },
        error : function ($responseObj){
            alert("Something went wrong while processing your request.\n\nError => "
                + $responseObj.responseText);
        }
    }); 
```

# javascript - 防止标准的 a href/jquery 点击组合将 # 附加到 url？

> ID：14986239
> 
> 赞同：2
> 
> 时间：2013-02-20T17:32:45.997
> 
> 标签：javascript, jquery, hyperlink

我有一个标准链接设置，单击时通过 jquery 触发事件

```
<a href="#" class="dosomething">Click Me</a> 
```

一切都很好，除了单击伪 URL 时，它会在 URL 上附加一个井号标签 (#)。如果用户决定稍后刷新页面，此主题标签会影响我的页面如何重新加载，因此我不希望将主题标签附加到 url。

这是否可能同时仍然允许我的正常 jquery 触发？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T17:36:13.457

您应该`return false;`从`A`标签的事件处理程序中

或者，使用

```
<a href="javascript: void(0);" class="dosomething">Click Me</a> 
```

对于那些认为`javascript: void(0)`是不好的做法的人

如果你使用`href='#'`，你必须注意两件事

```
// one
function fn() {
    // code
    return false;
}

// two
<a href="#" onclick="return fn();">click</a> 
```

如果你忘记了只是写`onclick="fn();"`它是行不通的

Another thing why I used `javascript: void(0);` is, if the function encounters/throws an error, it **wont** return `false`

So if you're a lone developer then you can clearly make your own choice, but if you work as a team you have to either state:

Use href="#", make sure onclick always contains return false; at the end, that any called function does not throw an error and if you attach a function dynamically to the onclick property make sure that as well as not throwing an error it returns false.

OR

Use `href="javascript:void(0)"`

[Which "href" value should I use for JavaScript links, "#" or "javascript:void(0)"?](https://stackoverflow.com/questions/134845/href-attribute-for-javascript-links-or-javascriptvoid0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T17:35:14.123

在您单击功能的末尾，使用：

```
return false; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T17:36:37.533

smartass anwser: use a button.

alternative: you must make sure to trigger the preventDefault in youre jQuery event handler

```
$("dosomthing").click(function(e){
  //make magic happen
  e.preventDefault()
}) 
```

this works on html forms thats submitting and such.

*note on the button thing*

最好的做法是只使用链接标签（更改 url 的东西）和其他类型的交互按钮。

搜索机器人和其他网络爬虫期望标签链接到其他 html 文档（超链接），并且包括 html 4\. 或当前文档中的其他点。

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2013-02-20T17:35:26.887

它是否需要是一个href？你可以这样做：

```
<span class="dosomething">Click me</span> 
```

.

```
.dosomething{cursor:pointer} 
```

# css - CSS 背景颜色不包括底部填充

> ID：14986244
> 
> 赞同：0
> 
> 时间：2013-02-20T17:33:05.153
> 
> 标签：css

我有以下 css 规则，我注意到 IE 似乎无法正确处理。我有一个锚标记，我希望橙色背景延伸到指定的填充。底部内边距为 18 像素，但背景颜色不会覆盖额外的间距。似乎只有 IE 这样做。有没有我可以使用的规则，让 organg 覆盖标签的整个区域？

```
.AdminLink {
    background-color:orange;
    padding-left:3px;
    padding-right:15px;
    padding-bottom:18px;

    margin-top:8px;
    margin-bottom:18px;
    line-height:none;

    color:black;
    font-weight:bold;
 } 
```

![使用 F12 工具突出显示的填充图像](../Images/c1fe52379da19300fd384d9586984730.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T18:47:39.963

内联元素不支持底部和顶部填充（某些浏览器无法正确呈现）。但是，如果您添加：

显示：块；向左飘浮;

它应该工作，我希望它会帮助你。;)

# java - 注册两个手指的坐标

> ID：14986246
> 
> 赞同：0
> 
> 时间：2013-02-20T17:33:16.187
> 
> 标签：java, android

我想构建一个 android 应用程序，它可以同时在屏幕上为两个手指注册 x,y。这是可能的还是android不允许这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T17:55:21.130

`onTouch`您的视图可以在其方法中跟踪多个触摸，并使用`ACTION_POINTER_DOWN`标志监视事件。查看[这篇文章](https://stackoverflow.com/questions/8002003/detect-multitouch-with-ontouch-listener-android)及其链接，以获得更多帮助。

# .net - IBM .net 驱动程序找不到 db2locale.dll

> ID：14986247
> 
> 赞同：3
> 
> 时间：2013-02-20T17:33:17.230
> 
> 标签：.net, dll, db2, informix

我正在尝试将我的 .net 解决方案的 Git 存储库拉到同一台机器上的另一个文件夹中（只是为了确保它有效）。

在我使用创建`IfxConnection`s 的项目中，当我尝试创建一个新的时，`IfxConnection`我得到一个`DllNotFoundException`，它由 IBM Informix 驱动程序抛出。

我收到的消息是“无法加载 DLL 'db2locale.dll'：找不到指定的模块。（来自 HRESULT 的异常：0x8007007E）”并且堆栈跟踪（回读到构造函数调用）是：

```
at IBM.Data.Informix.UnsafeNativeMethods.IfxInteropAPP.sqloGetNormalizedLangFromLangId(Int16 lcid)
at IBM.Data.Informix.UnsafeNativeMethods.IfxLocale.sqloGetNormalizedLangFromLangId(Int16 lcid)
at IBM.Data.Informix.IfxResource.GetMsgPath(CultureInfo cultureInfo, String szResFileName)
at IBM.Data.Informix.IfxResource..ctor(CultureInfo cultureInfo, String szResFileName, String szMsgPath)
at IBM.Data.Informix.IfxResource..ctor(CultureInfo cultureInfo, String szResFileName)
at IBM.Data.Informix.IfxResources.GetResource(CultureInfo cultureInfo)
at IBM.Data.Informix.IfxResources.GetString(CultureInfo cultureInfo, String stringID)
at IBM.Data.Informix.Res.GetString(CultureInfo culture, String name)
at IBM.Data.Informix.ODC.InvalidArgument()
at IBM.Data.Informix.IfxConnPool.ReplaceConnectionStringParms(IfxConnection connection, String szValue, IfxConnSettings& pSettings, IfxConnSettingsInternal& pSettingsInternal, Boolean bAttach)
at IBM.Data.Informix.IfxConnection.set_ConnectionString(String value)
at IBM.Data.Informix.IfxConnection..ctor(String connectionString) 
```

问题是，我的代码/项目没有直接引用这个 dll。我的代码`IBM.Data.Informix`在本地机器路径上引用`C:\Program Files\IBM\IBM DATA SERVER DRIVER\bin\netf40_32\IBM.Data.Informix.dll`，就像在我的所有其他项目中一样，以及在从中克隆了该存储库的存储库中。从存储库打开原始项目不会产生错误。

**任何人都可以让我了解为什么会发生此错误以及我可以做些什么来解决它？**

顺便说一句，IBM Informix 驱动程序似乎在后台使用了*大量*DB2 连接代码，以至于在使用设计器生成的数据集的其他项目中，我只能使用 DB2 连接器类型连接到我的 Informix 数据库. 因此是 DB2 标记，尽管它与 DB2 相关的原因还不是很明显。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T00:06:01.443

您使用的 IBM Informix .NET 驱动程序来自 IBM DB2 数据服务器驱动程序包；它不是本机 Informix .NET 提供程序。在理想情况下，如果 IBM DB2 数据服务器驱动程序包安装正确，那么您应该不会看到此错误。

如果您打算使用本机 Informix .NET 驱动程序，那么您可能需要取消引用项目中包含的当前二进制文件，然后引用本机 Informix .NET 驱动程序。本机 Informix .NET 提供程序的位置是 $INFORMIXDIR\bin\netf20\IBM.Data.Informix.dll

**仅供参考：** 有两种类型的 IBM Informix .NET 驱动程序，它们都具有相同的名称空间 (IBM.Data.Informix) 和相同的二进制名称 (IBM.Data.Informix.dll)。

One of them uses Informix native (SQLI) protocol and the other one uses DRDA protocol. The IBM Informix .NET drivers with native protocol is part of IBM Informix Client SDK The one that uses DRDA protocol is part of IBM DB2 Data Server Driver package.

Now IBM Informix Client SDK includes IBM DB2 Data Server Driver package also as an optional component during the installation.

# ios - object_setClass() 的性能而不是分配 isa 指针

> ID：14986248
> 
> 赞同：2
> 
> 时间：2013-02-20T17:33:23.197
> 
> 标签：ios, objective-c, objective-c-runtime, jsonkit

我注意到在 XCode (4.6) 的最新更新中，我收到了关于`JSONKit.m`. 具体来说，设置对象类的行：

```
dictionary->isa = _JKDictionaryClass; 
```

这些被标记为已弃用，并注明首选方法是使用`object_setClass()`：

```
object_setClass(dictionary, _JKDictionaryClass); 
```

当我问为什么宁愿简单地使警告静音时，回答是：

> 即使新的 Xcode 版本抱怨，一切正常，我不想：
> 1）测试我使用 JSONKit 的每个项目，以检查 object_setClass（）之后是否一切正常
> 2）松散的 cpu 周期，这就是我使用 JSONKit 的原因例如，通过 NSJSONSerialization。我当前的应用程序解析重量为 600K-1M 的 json 文件

我们在这里谈论的性能影响有多大？

**注意**：

我更感兴趣

`dictionary->isa = _JKDictionaryClass`对比`object_setClass()`

比`JSONKit`vs `NSJSONSerialization`。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-20T19:38:27.150

推理与性能下降无关，从来没有。将对象定义为具有`isa`指针是一个实现细节，并且至少从 Objective-C 2.0 开始就一直如此（并且在概念上已经存在了更长的时间）。Clang 编译器人员和 Apple，尤其是参与优化运行时的人员，希望能够将对象定义为具有最快的内部结构，而不是始终维护该`isa`字段。存在的事实`isa`，它存在于每个对象的开头，并且`isa`只是一个`Class`指针的事实，在理论上总是会发生变化。到目前为止，它并没有改变更多，因为这样做会导致兼容性中断。

此外，`object_setClass`vs的性能特征`object->isa = blah`有点开玩笑。CPU 很容易在*硬件*级别上优化函数调用的开销，而它会影响您的代码。如果您担心所涉及的周期数`pushq %rbp; movq %rsp, %rbp; movq %rsi, (%rdi); popq %rbp; ret`，那么您不再处于 Objective-C 问题域中 - 如果您的代码对由五个指令产生的不同指令敏感，那么您应该已经在 C 或汇编语言级别工作.

甚至除了所有这些，一开始就以这种方式设置对象的类几乎没有什么充分的理由。你到底为什么要这样做，它对你有什么帮助？

最后，我可能会补充一点，Clang 团队有更好的事情要做，而不是纯粹为了处理这种“性能”“问题”而添加警告。几乎所有警告（不是全部，而是大多数）都意味着您做错了什么，即使它在您正在测试的情况下恰好起作用。对于使用标记指针的任何对象，此代码已经中断。*这*就是 Xcode 试图告诉你的。

**编辑**：有人向我指出，问题不在于警告本身的原因，而在于所讨论函数的特定性能特征。正如我在回答中提到的，性能损失是如此之小，以至于如果它与您的代码相关，那么您首先不应该使用 Objective-C。我很抱歉误解了原来的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T18:10:56.180

原因是函数调用总是有一些开销：参数应该被压入堆栈（以及调用者保存的寄存器），然后应该更新指令指针，然后所有这些都应该在函数返回时反向完成。它通常比简单地取消引用指针（它可以像`mov [dest] [src]`.

# pdf - 尝试使用 XREF 流注释 PDF

> ID：14986253
> 
> 赞同：1
> 
> 时间：2013-02-20T17:33:39.070
> 
> 标签：pdf, pdf-generation, pdf-parsing

我有这个示例 PDF 文件：

[原始文件](http://db.tt/n5biHUBv)

我试图附加一个文本注释，结果如下：

[注释文件](http://db.tt/upjNbWWR)

但是，MAC OSX 上的预览仍然显示没有新注释的文档，Adobe Reader 甚至无法打开带注释的文档，说明：

> 打开此文档时出错。文件已损坏，无法修复。

到目前为止，我非常幸运地注释了具有“经典 XREF 表”而不是编码的其他文件。但是，编写我自己的编码 XREF 流似乎不起作用。我很确定我的流没问题，但它仍然可能是我缺少的其他东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T21:10:46.807

我不知道你是用哪个软件添加注释的，但你应该把它扔掉，永远不要再使用它。为什么？因为它没有在预告片中添加 startxref 条目，因此违反了 ISO-32000-1。即使具有压缩交叉引用表的文件也需要这样的条目。

阅读 ISO-32000-1 的第 7.5.8 节，标题为“Cross-Reference Streams”：

> **startxref 关键字后面的值应该是交叉引用流的偏移量，**而不是 xref 关键字。对于完全使用交叉引用流的文件（即不是混合引用文件的文件），将不再使用关键字 xref 和预告片。因此，**除了 startxref 地址、%%EOF 段和注释之外**，一个文件可能完全是一个对象序列。

# java - 触摸点达到限制时Android多点触控奇怪的错误

> ID：14986255
> 
> 赞同：1
> 
> 时间：2013-02-20T17:33:52.087
> 
> 标签：java, android, multi-touch

我正在android上制作一个需要多点触控手势的应用程序！我发现我的设备 Novo 7 (ainol) 支持 5 个接触点。我为这样的视图实现 onTouch

```
public boolean onTouch(View v, MotionEvent event) {
    // TODO Auto-generated method stub

    if ((event.getAction() & MotionEvent.ACTION_MASK) == MotionEvent.ACTION_POINTER_DOWN || event.getAction() == MotionEvent.ACTION_DOWN){
        Log.i("Touch", "Touch "+event.getPointerCount() + " -- Position " +
                    event.getRawX()+","+event.getRawY());
    }
    else if ((event.getAction() & MotionEvent.ACTION_MASK) == MotionEvent.ACTION_POINTER_UP|| event.getAction() == MotionEvent.ACTION_UP){
        Log.i("Touch up","Pointer = "+event.getPointerCount());
    }
    return true;
} 
```

起初，一切正常，日志完美打印出 5 条消息。但是当我触摸并释放屏幕上的第 6 个点时，事情就发生了。日志重新打印出 5 条消息。你能告诉我这里发生了什么吗？对不起我的英语不好，如果这是一个菜鸟问题！非常感谢！

------------ 已编辑--------

在记录 ACTION_POINTER_UP 和 ACTION_UP 后，我发现当第 6 根手指触摸（触摸）屏幕时，所有当前指针（5 个指针）都从事件中释放（例如，action_up 和 action_pointer_up 调用了 5 个先前的指针）！现在的问题是，当达到接触点的限制时，android如何处理这种情况。

# jquery - 使用 jquery 通过 ajax 加载其内容后如何检测 div 高度

> ID：14986257
> 
> 赞同：3
> 
> 时间：2013-02-20T17:33:53.733
> 
> 标签：jquery, css, html, height

我有一个奇怪的问题：我有两个 div，一个菜单和一个内容

```
<div id="menu">
  <a href="#" id="link1"> Link </a>
  <a href="#" id="link2"> Link </a>
</div>

<div id="content">
</div> 
```

当你点击一个链接时，**div 会加载**不同 html 文件的内容：

```
$('#link1').click(function() {
  $('#content').load('page1.html');
}
$('#link2').click(function() {
  $('#content').load('page2.html');
} 
```

...它的工作原理:-)

这样**#content**会改变它的高度，因为它被 html 文件“填充”了，我希望**#menu采用与****#content**相同的高度，所以我附加了

```
$("#menu").height($("#content").height()); 
```

在 click() 函数上，但 #content 的高度**是在加载文件之前计算的**，所以它不起作用。如何检测内容何时加载并在此之后调整大小？

* * *

PS：问题也出在页面加载上：我添加了

```
$('#prod1').click(); 
```

在 $(window).load 中，模拟点击第一个菜单项；#content填充正确，但高度计算错误..我尝试用console.log调试，跟踪div的高度，但它给了0，虽然我把它放在加载函数之后。

*唯一（不好的）解决方案是使用**setInterval**函数，持续观察#content 的高度并在#menu 上设置相同的高度。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T17:40:35.550

您可以使用回调函数：

```
$('#link1').click(function(e) {
   e.preventDefault();
   $('#content').load('page1.html', function(){
      // ...
   });
}); 
```

但是，如果您正在加载图像，则必须侦听`load`为这些图像触发的事件，否则高度计算不正确，您可以使用几个插件，例如[imagesLoaded](https://github.com/desandro/imagesloaded)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-20T17:39:12.427

我认为你应该做这样的事情`$("#menu").css('height', $("#content").height() + 'px');`你需要在`#content`加载后应用它

# c# - 后台工作人员报告进度位置

> ID：14986265
> 
> 赞同：0
> 
> 时间：2013-02-20T17:34:18.523
> 
> 标签：c#, winforms

ReportProgress 的最佳位置是什么？

```
//Do my hard work before report progress
bkWorker.ReportProgress((int)percent, company.CompanyName); 
```

或者

```
bkWorker.ReportProgress((int)percent, company.CompanyName);
//Do my hard work after report progress 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T17:38:11.637

从时序的角度来看，这无关紧要，因为循环的顶部或底部会发生得如此之快。

只需确保覆盖边缘情况（从一开始就设置 0%，完成后设置 100%。您的选项如下：

```
while(condition)
{
    report
    dowork
}
report 100% 
```

或者

```
report 0%
while(condition)
{
    dowork
    report
} 
```

或者

```
while(true)
{
    report
    if(100%)
        break;
    dowork
} 
```

因此，这取决于您对逻辑外观的偏好。处理时间无关紧要

# django - IntegrityError 在 /admin/auth/user/add/ 使用 UserProfile

> ID：14986269
> 
> 赞同：1
> 
> 时间：2013-02-20T17:34:24.957
> 
> 标签：django, django-admin, user-profile

我正在尝试使用 UserProfile 从管理界面添加用户，但显示此错误：

/admin/auth/user/add/ 处的 IntegrityError（1062，“密钥 'user_id' 的重复条目 '7'”）

这是我的 UserProfile 类：

```
class UserProfile(models.Model):
    # This field is required.
    user = models.OneToOneField(User)
    # Other fields here
    cliente = models.ForeignKey(cliente, null=True, blank=True)
    setor = models.CharField(verbose_name=u'Setor',
                             max_length=1,
                             default='C',
                             choices=Setor_CHOICE)

def create_user_profile(sender, instance, created, **kwargs):
    if created:
        UserProfile.objects.create(user=instance)

post_save.connect(create_user_profile, sender=User) 
```

我尝试使用这个：

```
post_save.connect(create_user_profile, sender=User, dispatch_uid='user_id') 
```

但同样的错误。

我怎样才能解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T20:23:17.403

似乎它正在尝试创建连接到同一用户的第二个 UserProfile 实例。如果 post_save 信号被触发两次，就会发生这种情况。

正如[这个答案](https://stackoverflow.com/a/2345967)所指出的，这可能是模型导入顺序的结果。

# regex - 关于数字和其他香料的正则表达式

> ID：14986271
> 
> 赞同：-1
> 
> 时间：2013-02-20T17:34:27.133
> 
> 标签：regex

我想在“php”中创建一个正则表达式，它检查一个字符串是否由数字“：”““”，“\回车”组成。我知道这很简单，但我在这个领域有点绿。提前致谢 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T17:36:58.950

不能只用PHP的`is_numeric()`方法吗？

[在 PHP 文档中查看 is_numeric](http://php.net/is_numeric)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T17:38:42.443

您可以使用

```
/^(?=.*\d)(?=.* )(?=.*:)(?=.*,)(?=.*\r)[: \d,\r]+$/ 
```

`^`是字符串的开头

`.`匹配任何单个字符

`.*`匹配 0 到多个字符 ( `.`)

`(?=.*\d)`是一个前瞻，只有当它有一个数字时才会进一步匹配..

`[abcd]`是一个匹配 a OR b OR c OR d 的字符类

`$`是字符串的结尾

# prolog - PROLOG 程序中的错误

> ID：14986274
> 
> 赞同：0
> 
> 时间：2013-02-20T17:34:35.737
> 
> 标签：prolog, turbo-prolog

在下面的代码中，我在 **中的*“非法字符”的***姊妹**函数中遇到错误

 *> 块引用

Person \= P1** (\= 表示不等于)

> 块引用

域人 = 符号

谓词 parent(Person,Person) 女性(Person) 男性(Person) 母亲(Person,Person) 父亲(Person,Person) 祖父(Person,Person) 祖母(Person,Person) 妹妹(Person,Person)

从句女性（快乐）。女性（辛德拉）。女（朱丽叶）。女性（丽莎）。

```
male(parker).
male(peter).
male(herry).
male(bob).
male(paul).

parent(juliet,lisa).
parent(bob,lisa).
parent(bob,paul).
parent(bob,merry).

parent(juliet,paul).
parent(juliet,merry).
parent(peter,herry).
parent(lisa,herry).
parent(merry,parker).
parent(merry,syndra).

father(X,Person):-parent(X,Person) , male(X).
mother(X,Person):-parent(X,Person) , female(X).

grandfather(X,Person):-parent(Y,Person),father(X,Y).
grandmother(X,Person):-parent(Y,Person),mother(X,Y).

sister(X,Person):-parent(Z,X),parent(Z,Person),Person \= P1,female(Person). 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T17:49:44.897

不确定，我不能尝试，因为我现在没有 Turbo Prolog，但我隐约记得不需要声明*变量。*

而且我怀疑孩子应该是人（毕竟，孩子*是*人）。尝试以这种方式简化

```
DOMAINS

Person = SYMBOL

PREDICATES

parent(Person,Person)
female(Person)
male(Person)
mother(Person,Person)
... 
```*

# windows-8 - 在 Windows 8 上同步 indexedDB 的策略

> ID：14986276
> 
> 赞同：3
> 
> 时间：2013-02-20T17:34:40.237
> 
> 标签：windows-8, winjs

我根据MS的这个指导编写了一个Windows 8 / JavaScript应用程序，它使用indexeddb作为其存储机制（我有大量数据）。

[http://msdn.microsoft.com/en-us/library/windows/apps/hh781225.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh781225.aspx)

我现在想为用户提供一种跨 Win 8 设备同步的方法。

有哪些选项可用于跨设备同步 indexeddb 数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T18:42:10.270

IndexedDB 专为客户端存储场景而设计。该 API 并非旨在处理与服务器端数据库的同步。你将不得不编写一些代码来做到这一点。有几种方法可以完成任务；从最不保真最少工作到最保真最多工作：

*   使用[内置的 Windows 8 应用程序数据漫游功能](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh464917.aspx#roaming_app_data)。这种方法的优点是它是内置的功能。缺点是可以跨设备同步的数据量是有限的。有关进一步讨论，请参阅[漫游您的应用程序数据](http://blogs.msdn.com/b/windowsappdev/archive/2012/07/17/roaming-your-app-data.aspx)。

*   您可以使用已经存在的后端服务，例如[Skydrive](http://msdn.microsoft.com/en-us/library/live/hh826521) 或[Azure 移动服务](http://www.windowsazure.com/en-us/develop/mobile/)。这里的优点是服务器端工作更容易，并且 API 已经存在。缺点（我猜）是保真度可能低于最后一个选项（如下）。

*   您可以构建自己的处理同步的后端。这里的优点是，此选项为您提供了对系统工作方式的最高保真度和控制。缺点很明显——这是最多的工作。

您选择哪个选项取决于您的特定需求。

# c# - 派生类对象如何添加到基类对象列表中

> ID：14986281
> 
> 赞同：10
> 
> 时间：2013-02-20T17:34:45.653
> 
> 标签：c#, oop, inheritance, polymorphism, upcasting

给定以下代码，我从 Shape 继承了一个类 Circle：

```
class Shape
{
    void Draw();
}

class Circle : Shape
{
}

void Main(string[] args)
{
    Shape s = new Shape();
    Shape s2 = new Shape();
    Circle c = new Circle();

    List<Shape> ShapeList = new List<Shape>();

    ShapeList.Add(s);
    ShapeList.Add(s2);
    ShapeList.Add(c);
} 
```

怎样才能`c`加进去`ShapeList`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-20T17:36:32.453

A`Circle` **是 a** `Shape`，因为`Circle`extends `Shape`。因此，您始终可以将`Circle`对象视为 a ，`Shape`因为我们可以绝对确定可以在 a 上执行的所有操作也可以在 a`Shape`上执行`Circle`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T17:38:27.113

我相信这是[多态](http://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming)的一个例子。由于`Circle`派生自`Shape`，因此多态性允许我们将其视为基本类型（让您将其插入到 type 列表中`Shape`）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T18:06:58.050

Circle 扩展了 Shape，这意味着它继承了它的所有属性和方法。Circle 是 Shape 的一种“超集”。考虑到它，您可以像使用形状一样使用它。你不能做的是反过来，即将一个形状插入到一个圆圈列表中。从逻辑上考虑。你有一堆形状。这些可以是圆形、正方形、三角形等。但是如果你有一堆圆形，它们必须是专门的圆形而不是一般的形状。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-20T00:36:26.347

离开编程部分，逻辑上每个圆形，矩形..一切都是形状。就像您在手机中制作联系人列表一样。有些联系人有 T-mobile 连接，有些使用 Vodafone，有些使用 Orange，但都是电话，您以完全相同的方式将它们添加到列表中，没有任何区别。您也可以通过调用不同的联系人来使用此列表来应用多态性：您的调用机制将完全相同，但在运行时（调用）将决定该联系人拥有哪个电话服务。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T17:48:28.890

这是关于泛型中的**协变和逆变**。请参阅[http://msdn.microsoft.com/en-us/library/dd799517.aspx](http://msdn.microsoft.com/en-us/library/dd799517.aspx)了解有关此的一些概念。

# javascript - onClick 打开没有固定大小的窗口

> ID：14986282
> 
> 赞同：0
> 
> 时间：2013-02-20T17:34:50.677
> 
> 标签：javascript, button, onclick, size

本质上 - 我希望按钮 onClick 打开一个没有固定大小的新窗口；但是，我不知道如何做到这一点。我做了很多研究，但没有成功。

**这是我到目前为止所拥有的：**

```
<button class="tealbutton tooltip"
    onClick="window.open('http://google.com','1','width =700,height=500')">         
</button> 
```

如果我删除宽度和高度并单击按钮 - 将打开一个新选项卡。我想打开一个新窗口。

感谢您的帮助！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T17:39:23.240

您无法覆盖它是否打开新选项卡或窗口，这取决于用户的浏览器首选项。[见这里](https://stackoverflow.com/questions/726761/javascript-open-in-a-new-window-not-tab)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T17:40:02.087

第三个参数`window.open`也控制新窗口的“功能”。见[https://developer.mozilla.org/de/docs/DOM/window.open](https://developer.mozilla.org/de/docs/DOM/window.open)

可用功能：

```
menubar=yes,location=yes,resizable=yes,scrollbars=yes,status=yes 
```

使用`resizable=yes`.

# prolog - 如何在 Prolog 中生成可激活任务列表？

> ID：14986287
> 
> 赞同：2
> 
> 时间：2013-02-20T17:35:10.440
> 
> 标签：prolog

我正在 Prolog 中编写任务调度程序。我有一组谓词来定义何时可以将任务视为可激活的，如下所示：

```
task(id01).
task(id02).
task(id03).
task(id04).

activable(X) :-
    task(X),
    inactive(X),
    conditions1(X).
activable(X) :-
    task(X),
    inactive(X)
    conditions2(X).
activable(X) :-
    task(X),
    inactive(X),
    conditions3(X). 
```

我想知道如何在激活其中任何一个之前生成所有可激活任务的列表。我尝试过这样的事情：

```
handle_activable([A|As]) :-
    activable(A),
    handle_activable(As).
handle_activable([]).

schedule :-
    handle_activable(As),
    activate_all(As). 
```

但是当我打电话时`schedule/0`，我总是检查第一个任务`task(id01)`，并且`activable/1`不断地检查第一个子句的目标。我知道这很愚蠢，但我找不到如何获取可激活任务的列表。更简单的是，如何生成任务列表...？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T17:56:58.233

Prolog 有一个特定的执行流程。在回溯时考虑替代方案。然后，如果您有兴趣为您可以找到的每个解决方案生成副作用，您需要使用一些内部使用回溯的内置函数，如[findall](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%274.30%27,swi%28%27/doc/Manual/allsolutions.html%27%29%29)或*失败驱动循环*如[forall 。](http://www.swi-prolog.org/pldoc/doc_for?object=forall/2)

底线：

```
schedule :-
    findall(A, activable(A), As),
    activate_all(As). 
```

或者

```
schedule :-
    forall(activable(A), activate(A)). 
```

其中 activate/1 实现了副作用

# wpf - WPF 任务栏还原/最小化并不总是有效

> ID：14986288
> 
> 赞同：2
> 
> 时间：2013-02-20T17:35:10.977
> 
> 标签：wpf, restore, taskbar

所以我有一个大型的 WPF 应用程序，当应用程序运行时，任务栏上有一个图标。我希望如果我单击任务栏图标，应用程序将自行恢复，或者如果它已经显示，则将其最小化，就像标准的 Windows 功能一样。但是，有时我必须单击几次才能使其正常工作。我已经做了很多研究/编程，但这是一个我无法弄清楚的相当简单的项目。任何帮助表示赞赏，如果我需要提供更多信息，请告诉我。我已经使用跳转列表进行了测试，但我的用户不想右键单击该图标，然后单击“恢复”。他们只想左键单击任务栏图标。.Net 4.0，WPF 4。在此先感谢大家。

# javascript - 使用 local.Storage（值）更改背景颜色

> ID：14986291
> 
> 赞同：1
> 
> 时间：2013-02-20T17:35:19.243
> 
> 标签：javascript, html, css

我想更改 div 的背景颜色：

箭头框

为此，我必须 div 到您可以单击的位置。触发函数保存“farbe”键的本地存储值。

```
<div class="radior" style="background-color:#8066CC;"    onClick='localStorage.setItem("farbe","#8066CC");hey()'></div> 
```

所以在那之后，会询问键“farbe”的值。除此之外，这是一个案例......我认为你最好阅读我的代码，因为我认为我需要一些英语课程对不起！

```
function hey(){
switch (localStorage.getItem("farbe")){
case "#121212":
var h = "black"

case "#1bc38e":
var h = "turk"

case "#C3594B":
var h = "red"

case "#8066CC":
var h = "lila"
    }
document.getElementsByClassName("arrow_box")[0].style.backgroundColor=""+h+""; ;

   } 
```

不知怎的，它不起作用！[或者您在小提琴http://jsfiddle.net/PpsLH/4/](http://jsfiddle.net/PpsLH/4/)上观看我的问题示例！来自德国的问候！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:56:18.907

尝试这个

```
<div  class="arrow_box"><a>Arrow Box</a></div>

<div class="radior" style="background-color:#C3594B;" onClick="localStorage.setItem('farbe','#C3594B');window.hey()"></div>
<br>
<div class="radior" style="background-color:#8066CC;" onclick='localStorage.setItem("farbe","#8066CC");window.hey()'></div> 
```

对于 javascript

```
window.hey = function ()
{
    var h="";
    if (localStorage.getItem("farbe")=="#121212")
    {
        var h = "black";
    } else
    if (localStorage.getItem("farbe")=="#1bc38e")
    {
        var h = "turk";
    } else
    if (localStorage.getItem("farbe")=="#C3594B")
    {
        var h = "red";
    } else
    if (localStorage.getItem("farbe")=="#8066CC")
    {
        var h = "lila";
    }
    document.getElementsByClassName("arrow_box")[0].style.backgroundColor=h+"";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T17:45:55.693

将您的功能更改为：

```
hey = function(){
  switch (localStorage.getItem("farbe")){
    case "#121212":
    var h = "black";
    break ;

    case "#1bc38e":
    var h = "turk";
    break ;

    case "#C3594B":
    var h = "red";
    break ;

    case "#8066CC":
    var h = "lila";
    break ;
  }
    document.getElementsByClassName("arrow_box")[0].style.backgroundColor=h;
} 
```

顺便说一句，`lila`它不是有效的 HTML 颜色，所以它不起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T17:54:18.387

您应该从代码中删除所有内联事件处理程序。此外，整个开关部分和更改为命名的 CSS 颜色似乎是多余的。查看这段用 jQuery 编写的代码

```
var box = $('div.arrow_box');

$('body').on('click','div.radior',function(e){
    var color = $(e.target).css('backgroundColor');    
    localStorage.setItem('farbe',color);
    box.css('backgroundColor',color);
}); 
```

和一个工作小提琴[http://jsfiddle.net/chrisdanek/BaJvC/5/](http://jsfiddle.net/chrisdanek/BaJvC/5/)

# python - 在尝试中打开 - 除了块，打开的文件太多？

> ID：14986300
> 
> 赞同：0
> 
> 时间：2013-02-20T17:35:52.350
> 
> 标签：python, file, exception, with-statement

很简单，我在特定位置的所有子文件夹中循环，并从三个不同的文件中收集一些数字。

```
def GrepData():
import glob as glob
import os as os

os.chdir('RUNS')
RUNSDir = os.getcwd()
Directories = glob.glob('*.*')
ObjVal = []
ParVal = []
AADVal = []

for dir in Directories:
    os.chdir(dir)
    (X,Y) = dir.split(sep='+')
    AADPath = glob.glob('Aad.out')
    ObjPath = glob.glob('fobj.out')
    ParPath = glob.glob('Par.out')

    try:
        with open(os.path.join(os.getcwd(),ObjPath[0])) as ObjFile:
            for line in ObjFile:
                ObjVal.append(list([X,Y,line.split()[0]]))
        ObjFile.close()
    except(IndexError):
        ObjFile.close()

    try:
        with open(os.path.join(os.getcwd(),ParPath[0])) as ParFile:
            for line in ParFile:
                ParVal.append(list([X,Y,line.split()[0]]))
        ParFile.close()
    except(IndexError):
        ParFile.close()
    try:
        with open(os.path.join(os.getcwd(),AADPath[0])) as AADFile:
            for line in AADFile:
                AADVal.append(list([X,Y,line.split()[0]]))
        AADFile.close()
    except(IndexError):
        AADFile.close()
    os.chdir(RUNSDir) 
```

每个文件打开命令都放在 try - except 块中，因为在少数情况下打开的文件将为空，因此附加 line.split() 将导致索引错误，因为列表为空。

但是，在运行此脚本时，我收到以下错误：“OSError: [Errno 24] Too Many open files”

我的印象是“with open ...”语句的想法是它负责在使用后关闭文件？显然，这并没有发生。

所以我要求的是两件事：

1.  答案是：“我对 with open 的理解是否正确？”
2.  如何纠正导致此问题的任何错误？

（是的，我知道代码并不完全优雅。整个尝试 - 除了应该是一个可重复使用的对象 - 但我会在找出这个错误后修复它）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:42:51.107

尝试像这样移动你的`try-except`内部`with`：

```
with open(os.path.join(os.getcwd(),ObjPath[0])) as ObjFile:
    for line in ObjFile:
        try:
            ObjVal.append(list([X,Y,line.split()[0]]))
        except(IndexError): 
           pass 
```

注意：无需手动关闭文件，这就是`with`目的。`as os`此外，如果您使用相同的名称，则无需在导入中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T17:49:27.330

“打开的文件太多”与编写语义不正确的python代码无关，并且您使用`with`正确。关键是错误中显示“OSError”的部分，它指的是底层操作系统。

当您调用 open() 时，python 解释器将执行系统调用。系统调用的详细信息会因您使用的操作系统而有所不同，但在 linux 上，此调用是 open(2)。操作系统内核将处理系统调用。当文件打开时，它在系统文件表中有一个条目并占用操作系统资源 - 这实际上意味着它在打开时“占用空间”。因此，操作系统对可以在任何时候打开的文件数量有限制。

您的问题是，当您调用 open() 时，调用 close() 的速度不够快。如果您的目录结构要求您一次打开数千个可能接近此上限的文件，则可以暂时更改它（至少在 linux 上，我对其他操作系统不太熟悉，所以我不想去关于如何跨平台执行此操作的太多细节）。

# c++ - 类/全局函数声明 C++

> ID：14986302
> 
> 赞同：0
> 
> 时间：2013-02-20T17:36:08.967
> 
> 标签：c++, function

请帮忙 - 什么是全局函数，它的用途和时间是什么？语法是（最简单的）：

```
int Sum (Class_name h) {...} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T17:45:33.273

在 C++ 中，“全局函数”应该在 .cpp 文件中定义，并在 .h 文件中声明。

例如

总和.h：

```
int Sum(int a, int b); // declaration (prototype) 
```

总和.cpp：

```
int Sum(int a, int b) // definition
{
    return a + b;
} 
```

现在，如果您想在另一个 .cpp 文件中使用 Sum 函数，只需添加`#include "Sum.h"`并使用该函数。

另一个模块.cpp：

```
#include "Sum.h"

void MyOtherFunction()
{
    int var = Sum(3,4);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T17:47:58.223

全局函数（在 C++ 中）是可在代码中的任何位置访问的函数。它是 C 编程语言的遗产。对于开始使用 java 这样的语言的人来说，它可能看起来很奇怪，因为它不在一个类中，但它有点像一个公共静态方法，因为你不需要任何对象来调用它

所以，你可以在任何地方使用这个函数......（只是为了确保它之前已经声明过（见注释），就像在头文件中一样。）最好将它们包含在命名空间中以避免与其他库的名称冲突并组织您的代码，但 C++ 允许在全局范围内声明它。

您可以在与任何对象没有关系时使用它，或者当它是仅在声明它的文件中使用的函数时使用它......例如，如果您想要在主目录之外进行初始化，或者您不想要的操作'不想上课等。对此没有严格的规定……这就是您的感受；）

注意：“声明”=你告诉编译器一个函数`int Sum (Class_name h)`存在，所以他不会侮辱你“你的函数没有被声明”

“已定义” = 你编写你的函数。需要告诉编译器这个函数做了什么例子： `int sum(Class h){ return h.a + h.b; }`

您需要在 .c/.cpp 中定义一次函数（此处不是“#define”；））并使用 .h 中的声明来使用它（除非您正在编辑定义函数的 .cpp，在这种情况下，这个函数需要在上面）

# android - 排序 ListView 动画

> ID：14986309
> 
> 赞同：1
> 
> 时间：2013-02-20T17:36:27.373
> 
> 标签：android, listview, animation, android-listview, android-animation

我有一个包含很多项目的 listView（实际上是 listFragment）。当我点击一个项目时，我希望它上升到列表的顶部。我想这本身就很简单，但是是否可以附加某种过渡动画以使其不仅出现在顶部。

另外，我希望在单击某个项目时列表滚动到顶部，以便该项目继续可见。

希望您能提供一些有关如何执行此操作的见解

# configuration - ATLAS on ARM 配置失败

> ID：14986310
> 
> 赞同：2
> 
> 时间：2013-02-20T17:36:30.687
> 
> 标签：configuration, arm, atlas

我正在尝试在 Ubuntu 11.04 操作系统下的 Tegra3 ARM CPU（cortex-a9）上安装 ATLAS 库（v3.10.1），但我无法通过配置步骤。当我启动“./configure”可执行文件时，我得到以下输出：

```
make: `xconfig' is up to date.
./xconfig -d s /home/ubuntu/Libraries/ATLAS/build/.././ -d b /home/ubuntu/Libraries/ATLAS/build  -D c -DATL_ARM_HARDFP=1 -Ss ADdir /Libraries/ATLAS/build/ARMHARDFP -Si archdef 0 -Fa alg -mfloat-abi=hard

OS configured as Linux (1)

Assembly configured as GAS_ARM (7)

Vector ISA Extension configured as  NEON (10,1024)

Architecture configured as  ARMv7 (46)

Bad CPU MHZ value=0, res='CPU MHZ=0
'

Clock rate configured as 0Mhz

Maximum number of threads configured as  4
Parallel make command configured as '$(MAKE) -j 4'

Pointer width configured as 32
Cannot detect CPU throttling.
rm -f config1.out
make atlas_run atldir=/home/ubuntu/Libraries/ATLAS/build exe=xprobe_comp redir=config1.out \
                args="-v 0 -o atlconf.txt -O 1 -A 46 -Si nof77 0 -V 1024  -Fa ic '-mfloat-abi=hard' -Fa sm '-mfloat-abi=hard' -Fa dm '-mfloat-abi=hard' -Fa sk '-mfloat-abi=hard' -Fa dk '-mfloat-abi=hard' -Fa xc '-mfloat-abi=hard' -Fa gc '-mfloat-abi=hard' -Fa if '-mfloat-abi=hard' -b 32 -d b /home/ubuntu/Libraries/ATLAS/build"
make[1]: Entering directory `/home/ubuntu/Libraries/ATLAS/build'
cd /home/ubuntu/Libraries/ATLAS/build ; ./xprobe_comp -v 0 -o atlconf.txt -O 1 -A 46 -Si nof77 0 -V 1024  -Fa ic '-mfloat-abi=hard' -Fa sm '-mfloat-abi=hard' -Fa dm '-mfloat-abi=hard' -Fa sk '-mfloat-abi=hard' -Fa dk '-mfloat-abi=hard' -Fa xc '-mfloat-abi=hard' -Fa gc '-mfloat-abi=hard' -Fa if '-mfloat-abi=hard' -b 32 -d b /home/ubuntu/Libraries/ATLAS/build > config1.out
sh: Syntax error: EOF in backquote substitution
sh: Syntax error: EOF in backquote substitution
sh: Syntax error: EOF in backquote substitution
/usr/bin/ld: error: /tmp/cck4AYUv.o uses VFP register arguments, xctest does not
/usr/bin/ld: failed to merge target specific data of file /tmp/cck4AYUv.o
collect2: ld returned 1 exit status
make[2]: *** [IRunCComp] Error 1
/usr/bin/ld: error: /tmp/ccuMjBW4.o uses VFP register arguments, xctest does not
/usr/bin/ld: failed to merge target specific data of file /tmp/ccuMjBW4.o
collect2: ld returned 1 exit status
make[2]: *** [IRunCComp] Error 1

Unable to find usable compiler for ICC; abortingMake sure compilers are in your path, and specify good compilers to configure
(see INSTALL.txt or 'configure --help' for details)make[1]: *** [atlas_run] Error 1
make[1]: Leaving directory `/home/ubuntu/Libraries/ATLAS/build'
make: *** [IRun_comp] Error 2
ERROR 512 IN SYSCMND: 'make IRun_comp args="-v 0 -o atlconf.txt -O 1 -A 46 -Si nof77 0 -V 1024  -Fa ic '-mfloat-abi=hard' -Fa sm '-mfloat-abi=hard' -Fa dm '-mfloat-abi=hard' -Fa sk '-mfloat-abi=hard' -Fa dk '-mfloat-abi=hard' -Fa xc '-mfloat-abi=hard' -Fa gc '-mfloat-abi=hard' -Fa if '-mfloat-abi=hard' -b 32"'
mkdir src bin tune interfaces
mkdir: cannot create directory `src': File exists
mkdir: cannot create directory `bin': File exists
mkdir: cannot create directory `tune': File exists
mkdir: cannot create directory `interfaces': File exists
make: *** [make_subdirs] Error 1
make -f Make.top startup
make[1]: Entering directory `/home/ubuntu/Libraries/ATLAS/build'
Make.top:1: Make.inc: No such file or directory
Make.top:325: warning: overriding commands for target `/AtlasTest'
Make.top:76: warning: ignoring old commands for target `/AtlasTest'
make[1]: *** No rule to make target `Make.inc'.  Stop.
make[1]: Leaving directory `/home/ubuntu/Libraries/ATLAS/build'
make: *** [startup] Error 2
mv: cannot stat `lib/Makefile': No such file or directory
.././configure: 450: cannot create lib/Makefile: Directory nonexistent
.././configure: 451: cannot create lib/Makefile: Directory nonexistent
.././configure: 452: cannot create lib/Makefile: Directory nonexistent
.././configure: 453: cannot create lib/Makefile: Directory nonexistent
.././configure: 509: cannot create lib/Makefile: Directory nonexistent
DONE configure 
```

所以，我有三个问题：

第一：为什么“ **Bad CPU MHZ value=0, res='CPU MHZ=0** ”？我准确地说所有内核的 CPU 节流设置为 0（我检查了 /sys/devices/system/cpu/cpu*/cpufreq/throttle 文件）。有没有办法将 ARM cpu 的时钟频率作为参数传递？

第二：为什么“ **sh：语法错误：反引号替换中的EOF** ”？

第三：“**无法为 ICC 找到可用的编译器；abortingMake..** ”有没有办法在 ./configure 可执行文件中说不寻找 ICC？因为我正在尝试在 ARM 上构建 ATLAS，因此 ICC 不可用。

在此先感谢您的帮助 ！

吉克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T22:27:02.583

ARM 的 ATLAS 配置环境被破坏了，一般来说容错性不是很好：

*   首先，它尝试通过在 /proc/cpuinfo 中进行 grepping 来确定系统性能（除了一些人类可读的信息转储之外，它从未用于任何其他用途）。您可以通过在配置命令行上指定频率来覆盖它：`-m <MHz>`
*   然后它会探测是否启用了电源管理——如果是，它会再次退出。看不到配置选项，但是如果您返回 0 `ProbeThrottle()`，`CONFIG/src/backend/archinfo_linux.c`它就会过去。
*   然后，您会被以下事实所震惊：几年前似乎实际上已经为某些 Cortex-A8 平台完成了一些工作，并且默认情况下为 ARMv7 设置了编译器标志`CONFIG/src/atlcomp.txt`include `-mfloat-abi=softfp`。将其更改为“硬”，它实际上可以在现代 ARM Linux 发行版上运行。
*   语法错误是由于尝试在其中查找编译器`/opt/bin`而`/opt/sbin`不是处理错误而产生的。

使用上述解决方法，我看不到任何 ICC 错误，并且构建在崩溃和烧毁之前得到了相当大的进展。

简而言之，需要进行一些移植工作才能使其在 ARM 上正常工作。也许您可以先向他们的开发者邮件列表发送错误报告？

# javascript - 如何在 JSF 中实现复制到剪贴板按钮？

> ID：14986315
> 
> 赞同：3
> 
> 时间：2013-02-20T17:36:37.143
> 
> 标签：javascript, html, jsf, web-applications

我目前有一个 JSF webapp，我有一个输出字段，我的托管 bean 为其设置值，我想为用户设置一个按钮，将输出文本直接复制到他们的剪贴板（又名 ctrl-c/cmd-c） .

我一直在做一些研究，但我有点困惑，有些人认为这是不可能的。

所以我的问题是......可以这样做吗？如果是这样，关于如何实施它的任何建议？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T17:42:03.053

不能单独使用 javascript 来完成。不过，您可以使用 Flash 插件来完成。查看 zeroclipboard：[http ://code.google.com/p/zeroclipboard/](http://code.google.com/p/zeroclipboard/)

# linux - 使用笔记本电脑模式工具更改 nvidia powermizer 设置

> ID：14986321
> 
> 赞同：3
> 
> 时间：2013-02-20T17:36:48.177
> 
> 标签：linux, nvidia

我有笔记本电脑模式工具 1.61。/etc/laptop-mode/ 的配置文件有两个文件夹，用于制作笔记本电脑模式工具来执行脚本，当它检测到它已从交流电切换到电池时，反之亦然。我有 nvidia 专有驱动程序 310.14 和 ubuntu 12.04。nvidia 驱动程序的 powermizer 设置设置为自适应。我想让它在使用电池时处于自适应状态，在使用 AC 时处于性能模式（无降频）。

由于在运行时使用选择框更改了 powermizer 设置，我认为可以实现我想要的。我已经在网上搜索了用于即时更改 nvidia powermizer 设置的命令，就像使用 GUI 一样，但我只找到了通过触摸 xorg.conf 来更改它的永久方法。

是否有即时更改 nvidia powermizer 设置的命令？

# esper - ESPER 使用带有 POJO 的 csv 适配器

> ID：14986322
> 
> 赞同：1
> 
> 时间：2013-02-20T17:36:51.777
> 
> 标签：esper

我需要一些 esper 的帮助，使用 csv 文件作为 csv 适配器的输入。我需要使用 POJO 类和超过 1 个 csv 文件。

如果有一个包含上述内容的示例，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-15T06:12:49.497

要将 Java 对象用作事件，只需为 Java 类注册事件类型名称并将相同的名称提供给 CSV 适配器。

```
Configuration configuration = new Configuration();

    configuration.addEventType("Event1", Event1.class);
    configuration.addEventType("Event2", Event2.class);
    configuration.addEventType("Event3", Event3.class);

    epService = EPServiceProviderManager.getDefaultProvider(configuration);

    EPStatement stmt = epService.getEPAdministrator().createEPL(
       "select * from Event1, Event2,Event3");

    (new CSVInputAdapter(epService, new AdapterInputSource(filename1), "Event1")).start();
    (new CSVInputAdapter(epService, new AdapterInputSource(filename2), "Event2")).start();
    (new CSVInputAdapter(epService, new AdapterInputSource(filename3), "Event3")).start(); 
```

# twitter-bootstrap - bootstrap-responsive.css 不包含在自定义引导版本中？

> ID：14986323
> 
> 赞同：6
> 
> 时间：2013-02-20T17:36:51.743
> 
> 标签：twitter-bootstrap, responsive-design

我经历并定制了（在[引导网站上](http://twitter.github.com/bootstrap/customize.html)）我正在开发的新网站的列宽和装订线。当我从 bootstrap 下载 zip 文件时，它没有附带该`bootstrap-responsive.css`文件。如果我尝试加载`bootstrap-responsive.css`标准下载附带的内容，它似乎会恢复到 12 列布局。

我正在查看`bootstrap.css`我下载的自定义文件，它看起来包含一些响应式标记，但不是全部。这让我开始想，也许他们在自定义下载期间合并了两个 .css 文件，而问题实际上出在我的代码上？在我花费数小时用细齿梳理代码之前，我想看看它是否真的只是一个组合文件？从引导程序下载实际上是否应该包括两个 .css 文件？或者我有什么明显的遗漏吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T05:31:55.117

你有没有检查过[github repo](http://twitter.github.com/bootstrap/customize.html)。你不需要做任何事情。[在他们的网站](http://twitter.github.com/bootstrap/customize.html)上下载定制的 Bootsrap ，现在这是他们最近将其名称从 bootstrap-responsive.css 更名为 bootstrap.css 的棘手部分。所以不要担心一切都是一样的。您可以下载其未压缩版本或缩小版本。将其链接到您的元标记，以使样式表持久化，请将 rel 属性设置为 "stylesheet" `<link href="yourstyle.css" rel="stylesheet">`。一些浏览器不会考虑没有 rel 属性的样式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T03:11:10.377

在以下位置下载完整的项目：

[http://twitter.github.io/bootstrap/getting-started.html](http://twitter.github.io/bootstrap/getting-started.html)（下载Bootstrap源码）

打开包装。ZIP 文件夹并查找 docs> asets> css 文件有一个：bootstrap-responsive.css

希望有帮助。

# salesforce - 通过安全审查和认证在 PE 中运行 ApexClasses

> ID：14986327
> 
> 赞同：0
> 
> 时间：2013-02-20T17:36:59.103
> 
> 标签：salesforce, apex-code

我有一个托管软件包，我想将其安装在专业版中。

当我尝试在 PE 中安装包时，出现以下错误，当然，我的包很少有 Apexclasses/Pages/ControllerExtensions 等，并且对第三方 WS 执行 HttpCallouts。

> 安装此软件包需要以下功能及其相关权限： Apex 类

我在某处看到一个帖子，说如果我得到我的包“安全审查和认证”，这个错误就会消失，顺便说一句，这似乎是一个漫长的过程，但对此不太确定。

我的问题是，“安全审查和认证”是否允许我在 PE 中安装相同的包？或者是 PE 完全缺少 ApexClasses，即我的包只能安装在 Enterprise/Unlimited 版本中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T22:28:04.190

从 Salesforce 文档中查看此页面。它应该回答你所有的问题。[http://www.salesforce.com/us/developer/docs/packagingGuide/Content/dev_packages_apex_ge_pe.htm](http://www.salesforce.com/us/developer/docs/packagingGuide/Content/dev_packages_apex_ge_pe.htm)

# ios - 字符串符号寄存器的核心数据错误

> ID：14986329
> 
> 赞同：0
> 
> 时间：2013-02-20T17:37:02.257
> 
> 标签：ios, macos, core-data

我遇到了奇怪的核心数据行为。

当我使用 SQLite 数据库查看器检查我的数据库时，我看到“字符串”值。但是当我读到这个值时，我得到“字符串”。

我使用的代码报告如下：

```
NSFetchRequest *request = [[[NSFetchRequest alloc] init] autorelease];

//which entity (or table) to select data   
[request setEntity: [[mdl entitiesByName] objectForKey:@"KeyName"]];

NSError *error = nil;
NSArray *dataArray = [cntx  executeFetchRequest:request error:&error]; 
```

怎么可能？在读取过程中如何转换数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:41:27.280

实际上我的应用程序是 Osirix DICOM 查看器插件。

幸运的是，我在 Osirix Development Group 会议上得到了答案

[http://tech.groups.yahoo.com/group/osirix-dev/message/3469](http://tech.groups.yahoo.com/group/osirix-dev/message/3469)

我使用 valueForKey 方法从 NSArray *dataArray 数组中获取数据但是这里正确的方法是primitiveValueForKey

valueForKey 与 Osirix 4.x 一起使用 Osirix 5.x 具有“以大写字母显示患者姓名和描述”的属性。如果此属性为 ON valueForKey 不起作用。在这种情况下我们应该使用primitiveValueForKey。

```
NSArray *dataArray = [cntx  executeFetchRequest:request error:&error];

for( i ...  )
{
 DicomStudy *study = [dataArray objectAtIndex: i];
 NSString *myValue = [study primitiveValueForKey:myKey];

} 
```

# jquery - 在设置值之前触发 Jquery 更改事件

> ID：14986330
> 
> 赞同：3
> 
> 时间：2013-02-20T17:37:06.517
> 
> 标签：jquery, events, onchange

我有两个日期输入，用户在其中设置开始日期和结束日期。之后，我得到一个标签，在其中加载用户选择的两个日期之间的天数。

两个日期输入有一个相同的类：“fecha”，我处理数据输入和天数操作如下：

```
$('.fecha').live("change", function(){

    var fecha1 = $('#E2Del').val();
    var fecha2 = $('#E2Al').val();

    var ini_split = fecha1.split('-');
    var ini_full = ini_split[0]+ini_split[1]+ini_split[2];

    var fin_split = fecha2.split('-');
    var fin_full = fin_split[0]+fin_split[1]+fin_split[2];

    var test = fin_full - ini_full;        
    console.log(test);
  }); 
```

一切都很好，问题是当我单击日期输入时触发此事件，而不是在我更改每个输入的选定日期之后。因此，要使其正常工作，我需要在设置值后单击两个输入中的任何一个。

关于如何在日期输入之后而不是在我单击元素时触发此事件的任何想法？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:43:11.870

您看到旧值的原因是当`change`事件触发时，本机后果（即更改值）尚未发生 - 实际上您可以使用`e.preventDefault()`.

您需要做的是检查事件本身：

```
e.originalEvent.newValue 
```

...将返回正在分配的值。

# perl - 将 yes 输入 rm -r 命令时收到奇怪的错误

> ID：14986341
> 
> 赞同：0
> 
> 时间：2013-02-20T17:37:52.007
> 
> 标签：perl, unix

我收到以下

```
yes: standard output: broken pipe
yes: write error 
```

在 perl 中执行以下行时

```
system("cd /tmp; yes | rm -r directory1 directory2 file3 > /dev/null 2>&1"); 
```

文件和目录仍会被删除，但该消息很烦人，不想看到它。

任何帮助谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T17:43:30.990

不是真正的 Perl 问题。

错误来自`yes`，因此您也必须重定向 的错误流`yes`。

```
... ; yes 2>/dev/null | rm -r ... 
```

但是你为什么不忘记`yes`并尝试一下`rm -rf ...`呢？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T18:39:48.177

你说*Perl*，但你的问题是*Unix shell*。

如果您打算使用 Perl，请在 Perl 中执行：

```
use File::Path qw(remove_tree);
use Cwd;

my $current_directory = getcwd();
chdir "tmp";
remove_tree("directory1", "directory2, "file3");
chdir $current_directory; 
```

`system`这将与您的命令执行相同的操作。但是，这不仅适用于 Unix 系统，而且适用于任何人都不应受制于的奇怪而特殊的操作系统（*咳嗽*，Windows！*咳嗽*）。

即使有人创建了别名`rm`命令或实现了自己的`rm`命令，它也可以工作。每当您通过该`system`命令退出时，您就会离开那个安全的 Perl 环境，直接进入操作系统的危险区域。更糟糕的是，您将自己的生命置于一个可能不是您使用的外壳的外壳手中。

模块[File::Path](http://perldoc.perl.org/File/Path.html)是 Perl 附带的标准模块。我用来保存原始目录的 Cwd[也是如此，因此我们可以在代码末尾返回它。](http://perldoc.perl.org/Cwd.html)

顺便说一句，您可能还需要在那里进行一些错误检查：

```
use File::Path qw(remove_tree);
use Cwd;

my $current_directory = getcwd();
if chdir "tmp" {
    remove_tree("directory1", "directory2, "file3");
    chdir $current_directory;
}
else {
    print "Whoops! I can't change to directory 'tmp'"
} 
```

这样，您仅在`remove_tree`实际更改为 directory时才执行此操作`tmp`。

如果这是您的临时工作目录。也就是说，您已经创建了它，因此您可以放置​​文件，您可能应该查看[File::Temp](http://perldoc.perl.org/File/Temp.html)模块。

`File::Temp`（这也是一个标准的 Perl 模块）可以为您创建临时目录，并确保它是唯一的，因此您不会踩踏同时运行您的程序的其他人。更好的是，它还会自行清理并在完成后删除该临时目录。

```
use File::Temp;

my $temp_dir = File::Temp->newdir; 
```

现在，您可以将所有临时文件放入`$temp_dir`. 当程序结束时，临时目录和您放置在那里的所有文件都会自动删除。

* * *

虽然不是*标准*Perl 函数的一部分，但这些模块是 Perl 发行版的一部分并且始终可用。根本没有理由不使用它们。如果您正在使用该`system`命令，那么您可能应该使用一个标准的 Perl 模块。

浏览[Perdoc 网页](http://perldoc.perl.org)中的 Perl 模块列表。只要确保您选择了您正在使用的 Perl 版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T17:42:26.903

为防止出现问题，请使用`-f`或`--interactive=never`如果实施。见[人 rm](http://linux.die.net/man/1/rm)。

# php - 使用 php，如何使用 BSON 在 mongoDB 中保存小于 16mb 的图像

> ID：14986342
> 
> 赞同：0
> 
> 时间：2013-02-20T17:37:57.207
> 
> 标签：php, image, mongodb, bson

我需要一些帮助：

我正在用 php 创建一个 Web 应用程序并使用数据库 mongodb。

因为它是一家银行，所以 nosql 想到我需要将图像保存在正确的数据库中。

研究mongoDB文档，发现需要使用BSON类型存入银行，因为小于16mb的图片。

问题是我不知道怎么做。

我需要转换图像。字符串中的JPG？然后使用bson_encode？

我正在尝试这种方式：

 `````
$data = file_get_contents('../images/1.png');

$connection = new Mongo();

$db = $connection->aaaa;

$suspeitos = $db->imagens;

$susp = array(     
'imagem'  => $data,
); 

$suspeitos->insert($susp); 
````  `但这不起作用。

有人已经做过类似的事情，可以帮我用 BSON 将图像保存在 mongoDB 中吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T17:57:01.347

MongoDB 有一个名为 GridFS 的文件系统构建，用于在 MongoDB 本身内存储文件。您将获得 MongoDB 的 Shards 和 Replication 和查询的所有优势。这些文件被分成多个块，因此您不会遇到 16MB 的文档大小限制。

[http://php.net/manual/en/class.mongogridfs.php](http://php.net/manual/en/class.mongogridfs.php)``

# mysql - 用 txt 文件加载数据

> ID：14986349
> 
> 赞同：1
> 
> 时间：2013-02-20T17:38:16.983
> 
> 标签：mysql, sql, load-data-infile

我有包含超过 50000 条记录的 txt 文件。这 4 条记录（pid、#_pro_used、notused、selected）与制表符空间分开。我想将这些记录插入到有 5 列（索引、pid、#_pro_used、 notused,selected)..额外的一个（索引）列应该是包含记录计数的主键。

我用过这个命令..但它不起作用。

```
 LOAD DATA LOCAL INFILE 'D:/temp.txt' INTO TABLE temp_table    (COUNT(pid),pid,#_pro_used,notused,selected); 
```

这可能吗？或者我应该去触发？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T18:18:50.073

您不能使用 COUNT(pid) 来计算插入的条目数。创建一个具有自动增量列的表并跳过“COUNT(pid)”部分，因此：

```
CREATE TABLE temp_table (
  idx INT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
  pid ...
  pro_used ...
  notused
  selected
);

LOAD DATA LOCAL INFILE 'D:/temp.txt'
INTO TABLE temp_table (pid,pro_used,notused,selected); 
```

请注意：您有一个名为“notused”的列，我假设您想忽略它。您可以在这里使用用户定义的变量，然后将数据丢弃：

```
LOAD DATA LOCAL INFILE 'D:/temp.txt'
INTO TABLE temp_table (pid,pro_used,@notused,selected); 
```

# sql - 使用带有 COLLECTION 的付款计划循环的 PL/SQL 程序

> ID：14986353
> 
> 赞同：1
> 
> 时间：2013-02-20T17:38:23.370
> 
> 标签：sql, oracle, loops, plsql, plsqldeveloper

我正在学习 LOOPS、记录和集合。我有一个程序，我正在为捐助者承诺金额 1500 美元的付款时间表工作。PL/SQL 程序运行 24 个月的付款计划，从名为 dd_pledge 的捐赠表中检索 ID 为“111”的捐赠者的余额，显示每次付款的付款金额，并显示每次付款后的 24 次付款与 BALANCE到零余额。我已经包含了下面的表格信息，但是，我只是将该表格中的一个值插入到我的集合中，然后对其执行计算。这是付款的预期结果：

匿名块完成

* * *

付款编号：1 到期日：2012 年 10 月 1 日上午：62.50 美元 剩余：1,437.50 美元

* * *

付款编号：2 到期日期：2012 年 11 月 1 日上午：62.50 美元，其余：1,375.00 美元

* * *

... 付款编号：23 到期日期：2014 年 8 月 1 日上午：62.50 美元，剩余时间：62.50 美元

* * *

付款编号：24 到期日：2014 年 9 月 1 日上午：62.50 美元，其余：0.00 美元

该计划的开始日期为'01-OCT-2012'，付款金额为 62.50，共 24 次付款。

我正在为这个程序使用记录和循环，但它不起作用。

我仍然可以在 LOOP 和 MONTH 中使用一些关于 PAYMENT BALANCE 迭代的指导，仅在 11 月添加 1 个月并在整个过程中使用它。这就是我需要将集合部分添加到我的编码并为 LOOP 调用这些值的地方。

这是我更新的代码，它更简单一些，但不确定 BALANCE 计算输入到 LOOP 中，而且从 12 年 10 月 1 日开始的付款日期只是转到 11 月 1 日并将其用作日期。我还在学习收藏。

```
SET SERVEROUTPUT ON
DECLARE
payment_num                      NUMBER(2) := 0;
d_loop_count                     NUMBER(2) := 24;
due_date                         DATE;
payment_amt                      NUMBER(8, 2) := 62.50;
donation_balance                 NUMBER(8,2); 
pledgeamt                        NUMBER(8,2) := 1500;
---This pledgeamt is not correct, involved in Collection called value from TABLE
start_date                       DATE :=  '01-OCT-2012'; 

BEGIN
 /*
 SELECT pledgeamt  INTO donation_balance
    FROM dd_pledge
    WHERE idpledge = '111';  --111 has a pledge amount of $1500
*/
FOR i IN 1..d_loop_count
LOOP
payment_num :=payment_num + 1;
due_date := add_months(start_date, 1);
donation_balance := (pledgeamt - payment_amt);

dbms_output.put_line
(
'Pay #: ' || payment_num 
|| ' ' || 'Due: ' || due_date
|| ' ' ||  'Amt: ' || payment_amt
|| ' ' || 'Bal: '|| donation_balance
);

END LOOP;

END;
/ 
```

这是线轴给我的。它正在出现，但需要更多关于 LOOP 迭代和捐赠支付余额的计算以及支付序列的 MONTH 倒计时的帮助。

```
 anonymous block completed
Pay #: 1 Due: 01-NOV-12 Amt: 62.5 Bal: 1437.5
Pay #: 2 Due: 01-NOV-12 Amt: 62.5 Bal: 1437.5
Pay #: 3 Due: 01-NOV-12 Amt: 62.5 Bal: 1437.5
Pay #: 4 Due: 01-NOV-12 Amt: 62.5 Bal: 1437.5
...Pay #: 20 Due: 01-NOV-12 Amt: 62.5 Bal: 1437.5
Pay #: 21 Due: 01-NOV-12 Amt: 62.5 Bal: 1437.5
Pay #: 22 Due: 01-NOV-12 Amt: 62.5 Bal: 1437.5
Pay #: 23 Due: 01-NOV-12 Amt: 62.5 Bal: 1437.5
Pay #: 24 Due: 01-NOV-12 Amt: 62.5 Bal: 1437.5 
```

这是我将用于将捐赠表中的余额输入到循环中的表信息。

表 dd_pledge 信息是

```
IDPLEDGE    NUMBER(5,0) No      1   
IDDONOR NUMBER(4,0) Yes     2   
PLEDGEDATE  DATE    Yes     3   
PLEDGEAMT   NUMBER(8,2) Yes     4   
IDPROJ  NUMBER(5,0) Yes     5   
IDSTATUS    NUMBER(2,0) Yes     6   
WRITEOFF    NUMBER(8,2) Yes     7   
PAYMONTHS   NUMBER(3,0) Yes     8   
CAMPAIGN    NUMBER(4,0) Yes     9   
FIRSTPLEDGE CHAR(1 BYTE)    Yes     10

111 ROW equals:

IDPLEDGE   IDDONOR         PLEDGEDATE         PLEDGEAMT
111        306         01-MAR-13          1500                                      

 etc...
 504       20   0   756   Y 
```

这是关于集合、记录的部分，这是我正在为其他人学习更多关于 PL/SQL COLLECTIONS 的内容。[http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/composites.htm#CHDBHJEI](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/composites.htm#CHDBHJEI)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T18:19:49.947

这是一个基于现有 Oracle emp 表的示例 - 抱歉没有时间深入研究您的代码，并且您没有发布任何示例数据。发布问题时始终创建表格和数据。此外，我同意 tbone，除非您正在学习 PL/SQL，否则尽可能使用 SQL。复制/粘贴以查看结果。不要像在代码中那样在循环内使用 SELECT... INTO 。

```
DECLARE
  CURSOR c1 IS SELECT * FROM scott.emp;
  TYPE EmpTabTyp IS TABLE OF scott.emp%ROWTYPE INDEX BY BINARY_INTEGER;
  emp_tab  EmpTabTyp;
  i        BINARY_INTEGER := 0;
BEGIN
  OPEN c1;
  LOOP
     i := i + 1;
     FETCH c1 INTO emp_tab(i);
     EXIT WHEN c1%NOTFOUND;
    --dbms_output.put_line(emp_tab(i).empno);
  END LOOP;
 CLOSE c1;
END;
/

DECLARE
  TYPE EmpTabTyp IS TABLE OF scott.emp%ROWTYPE INDEX BY BINARY_INTEGER;
  emp_tab      EmpTabTyp;
  i            BINARY_INTEGER := 0;
  CURSOR c1 IS SELECT * FROM scott.emp;
BEGIN
-- Method 1 - the BULK COLLECT is faster --
  SELECT * BULK COLLECT INTO emp_tab FROM scott.emp;

  dbms_output.put_line('BULK example:'||chr(13));

  -- Display values in emp_tab --
  --FOR i IN emp_tab.first .. emp_tab.last LOOP  -- or use COUNT method as below --
  FOR i IN 1 .. emp_tab.COUNT LOOP
    dbms_output.put_line(i||' '||emp_tab(i).empno||' '||emp_tab(i).ename);
 END LOOP;

 dbms_output.put_line(chr(13)||'END BULK example'||chr(13));

 -- Method 2 - Loop --
 FOR e_rec IN c1 LOOP
   i:= i+1;
    emp_tab(i).empno:= e_rec.empno;
    dbms_output.put_line(i||' '||emp_tab(i).empno);
 END LOOP;
END;
/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T22:21:13.140

```
SET SERVEROUTPUT ON
DECLARE
payment_num                       NUMBER(2) := 0;
d_loop_count                      NUMBER(2) := 24;
payment_amt                       NUMBER(8, 2);
donation_balance                  NUMBER(8,2);
v_pledgeamt                       NUMBER(8,2);
start_date                        DATE :=  '01-OCT-2012';
due_date                          DATE;
v_due_date                        VARCHAR2(15);

BEGIN

 SELECT pledgeamt  INTO v_pledgeamt    FROM dd_pledge
    WHERE idpledge = &idpledge;

payment_amt := v_pledgeamt / d_loop_count;
due_date := start_date;
donation_balance := (v_pledgeamt - payment_amt);

FOR i IN 1..d_loop_count
LOOP
payment_num :=payment_num + 1;
v_due_date := TO_CHAR(due_date,'mm/dd/yyyy');
due_date := add_months(due_date, 1);
dbms_output.put_line
(
'Pay #: ' || payment_num
|| ' ' || 'Due: ' || v_due_date
|| ' ' ||  'Amt: ' || payment_amt
|| ' ' || 'Bal: '|| to_char(donation_balance, '$9999.99')
);

donation_balance := (donation_balance - payment_amt);

END LOOP;

END;
/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-01T06:21:56.537

对于正确的日期和支付金额/月：

```
 DECLARE
payment_num                       NUMBER(2) := 0;
d_loop_count                      NUMBER(2) := 24; --PAYMONTHS
payment_amt                       NUMBER(8, 2);
donation_balance                  NUMBER(8,2);
v_pledgeamt                       NUMBER(8,2);
start_date                        DATE :=  '01-OCT-2012';
due_date                          DATE;
v_due_date                        VARCHAR2(15);

BEGIN

 SELECT pledgeamt, PAYMONTHS, PLEDGEDATE INTO v_pledgeamt, d_loop_count, start_date    FROM dd_pledge
    WHERE idpledge = &idpledge;

--d_loop_count := PAYMONTHS;
--start_date := PLEDGEDATE;

payment_amt := v_pledgeamt / d_loop_count;
due_date := start_date;
donation_balance := (v_pledgeamt - payment_amt);

FOR i IN 1..d_loop_count
LOOP
payment_num :=payment_num + 1;
v_due_date := TO_CHAR(due_date,'mm/dd/yyyy');
due_date := add_months(due_date, 1);
dbms_output.put_line
(
'Pay #: ' || payment_num
|| ' ' || 'Due: ' || v_due_date
|| ' ' ||  'Amt: ' || payment_amt
|| ' ' || 'Bal: '|| to_char(donation_balance, '$9999.99')
);

donation_balance := (donation_balance - payment_amt);

END LOOP;

END; 
```

# java - 如何管理来自不同线程的不同 TwitterStream

> ID：14986357
> 
> 赞同：2
> 
> 时间：2013-02-20T17:38:42.443
> 
> 标签：java, twitter4j, twitter-streaming-api

我正在尝试使用具有单一身份验证的不同 TwitterStream 对象执行不同的线程：

```
public class Support {
    private static final String accessToken = "xxxxxxx";
    private static final String accessTokenSecret = "xxxxxxx";
    public static final AccessToken token = new AccessToken(accessToken, accessTokenSecret); 
    private static final String consumerKey = "xxxxxxx";
    private static final String consumerSecret = "xxxxxxx";
    private static final Configuration conf = new ConfigurationBuilder().setOAuthConsumerKey(consumerKey).setOAuthConsumerSecret(consumerSecret).build(); 
    public static TwitterStreamFactory factory = new TwitterStreamFactory(conf); 
} 
```

在我做的每个线程中：

```
public MyThread1(){
   this.twitterStream = Support.factory.getInstance(Support.token);
}
public void run(){
        StatusListener listener = ... ;
        twitterStream.addListener(listener);
        FilterQuery fq = new FilterQuery();
        fq.track(new String[]{"hashtag1","hashtag2"});
        twitterStream.filter(fq);
    }

public MyThread2(){
   this.twitterStream = Support.factory.getInstance(Support.token);
}
public void run(){
        StatusListener listener = ... ;
        twitterStream.addListener(listener);
        FilterQuery fq = new FilterQuery();
        fq.track(new String[]{"hashtag3","hashtag4"});
        twitterStream.filter(fq);
    } 
```

但它给了我身份验证错误.. 同一身份验证的多个请求。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:10:52.193

这是我的做法：

```
public class MyTwitterApp implements {

private Twitter twitter;
private Query query;

public MyTwitterApp (){
    twitter = TwitterFactory.getSingleton();
}

public static void main(String[] args) {
    MyTwitterApp twitterApp  = new MyTwitterApp();
    twitterApp.getStreamingTweets();

}

public void getStreamingTweets(){
    StatusListener listener = new StatusListener(){
        public void onStatus(Status status) {
                handleStatus(status);
        }
        public void onDeletionNotice(StatusDeletionNotice statusDeletionNotice) {}
        public void onTrackLimitationNotice(int numberOfLimitedStatuses) {}
        public void onException(Exception ex) {ex.printStackTrace(); }
        public void onScrubGeo(long arg0, long arg1) {}
        public void onStallWarning(StallWarning arg0) {}
    };
    twitter.addListener(listener);
    FilterQuery fq = new FilterQuery();
    fq.count(0);
    fq.track(new String[]{"#MyHashTag"});
    twitter.filter(fq);
}

protected void handleStatus(Status tweet) {
    if(tweet.isRetweet()){
        return;
    }
    if(isMyHashTagTweet(tweet)){
        //do something with tweet here      
    }       
}

private boolean isMyHashTagTweet(Status tweet) {
    HashtagEntity[] htes = tweet.getHashtagEntities();
    for(HashtagEntity hte : htes){
        if(hte.getText().equalsIgnoreCase("myhashtag")) {
            return true;
        }
    }
    return false;
}
} 
```

每个线程都将包含类似这样的内容。

```
twitter = TwitterFactory.getSingleton(); 
```

将确保您每次都重用相同的连接。

```
twitter.addListener(listener); 
```

将添加一个侦听器，以便您将被回调到该线程（但您将从添加的每个查询中被回调）

```
twitter.filter(fq); 
```

将添加一个新的搜索查询来关注。

```
isMyHashTagTweet(tweet) 
```

将检查以确保您的 twitterStream 中所有查询返回的推文与您当前的线程相关

# javascript - 为什么 IsNaN(x) 与 x == NaN 不同，其中 x = NaN

> ID：14986361
> 
> 赞同：1
> 
> 时间：2013-02-20T17:38:46.443
> 
> 标签：javascript, nan

为什么这两个不同？

```
var x = NaN; //e.g. Number("e");
alert(isNaN(x)); //true (good)
alert(x == NaN); //false (bad) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:45:03.490

> 等式和不等式谓词是无信号的，因此 x = x 返回 false 可用于测试 x 是否是安静的 NaN。

[资源](http://en.wikipedia.org/wiki/NaN)

这是 IEEE 754 中定义的规则，因此完全符合规范需要此行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T17:47:42.943

*没有什么*是等于的`NaN`。任何比较永远都是`false`。

在严格比较算法和抽象比较算法中，如果类型相同，且任一操作数为`NaN`，则结果为`false`。

> 如果 Type(x) 是 Number，那么
> 
> *   如果`x`是`NaN`，则返回`false`。
> *   如果`y`是`NaN`，则返回`false`。

在抽象算法中，如果类型不同，并且a`NaN`是其中一个操作数，那么另一个操作数最终会被强制转换为一个数字，将我们带回到上面的场景。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T17:45:43.973

以下操作返回 NaN

```
The divisions 0/0, ∞/∞, ∞/−∞, −∞/∞, and −∞/−∞
The multiplications 0×∞ and 0×−∞
The power 1^∞
The additions ∞ + (−∞), (−∞) + ∞ and equivalent subtractions.
Real operations with complex results:

The square root of a negative number
The logarithm of a negative number
The tangent of an odd multiple of 90 degrees (or π/2 radians)
The inverse sine or cosine of a number which is less than −1 or greater than +1. 
```

以下运算返回数值运算的值。因此`typeof`南是一个数字。NaN 在数学上是一个未定义的数字。∞ + (-∞) 不等于 ∞ + (-∞)。但是我们得到 NaN 是`typeof`数字，因为它是数字运算的结果。

来自[维基](http://en.wikipedia.org/wiki/NaN)：

# html - HTML 960gs - 页脚消失

> ID：14986367
> 
> 赞同：0
> 
> 时间：2013-02-20T17:39:08.547
> 
> 标签：html, css, background-image, containers, 960.gs

我最近一直在我的个人网站上工作并遇到了这个问题，问题是每当我预览网站时我的页脚就会消失。

我使用 960.gs 来保持一切整洁，并使用宽度为 100% 的包装器，因此如果需要，我可以扩展 960 网格（对于全尺寸条等）。

主要内容在 container_16 网格中的此包装器中，顶部导航栏除外。

**HTML** Jordan Moss - 作品集 -->

```
</head>
<body>
<div class="wrapper">
<div class="topbar">
<div id="navmenu">
<ul>
    <li><a href="#">Home</a></li>
    <li><a href="#">About</a></li>
    <li><a href="#">Skills</a></li>
    <li><a href="#">Work</a></li>
    <li><a href="#">Blog</a></li>
    <li><a href="#">Contact</a></li>
</ul>
</div>
</div>

<div id="content" class="container_16">

<div id="header" class="grid_6 suffix_10">
<h4>Welcome to the Portfolio and Blog Of</h4>
</div>
<div class="clear"></div>
<div id="logo" class="grid_6 suffix_10">
<a href="#">
<img width="340" height="55" alt="Jordan Moss" src="img/logo.png"></a>
</div>
<div class="clear"></div>
<div id="picture" class="grid_4">
<a href="img/large/image-1.jpg" rel="lightbox" title="EyeSee2D">
<img width="220" height="220" alt="pic1" src="img/thumbs/art1.jpg"></a>
</div>

<div id="picture" class="grid_4">
<a href="img/large/image-2.png" rel="lightbox" title="Evil Within">
<img width="220" height="220" alt="pic2" src="img/thumbs/art2.jpg"></a>
</div>

<div id="picture" class="grid_4">
<a href="img/large/image-3.jpg" rel="lightbox" title="Colourful geometry">
<img width="220" height="220" alt="pic3" src="img/thumbs/art3.jpg"></a>
</div>

<div id="picture" class="grid_4">
<a href="img/large/image-4.jpg" rel="lightbox" title="Unique">
<img width="220" height="220" alt="pic4" src="img/thumbs/art4.jpg"></a>
</div>
<div class="clear"></div>

<div id="picture" class="grid_4">
<a href="img/large/image-5.jpg" rel="lightbox" title="M1911 Gun Slide">
<img width="220" height="220" alt="pic5" src="img/thumbs/art5.jpg"></a>
</div>

<div id="picture" class="grid_4">
<a href="img/large/image-6.png" rel="lightbox" title="Vormator Eye of Raa">
<img width="220" height="220" alt="pic6" src="img/thumbs/art6.jpg"></a>
</div>

<div id="picture" class="grid_4">
<a href="img/large/image-7.png" rel="lightbox" title="Earths Last Gasp">
<img width="220" height="220" alt="pic7" src="img/thumbs/art7.jpg"> </a>
</div>

<div id="picture" class="grid_4">
<a href="img/large/image-8.jpg" rel="lightbox" title="Fleeter 3D concept">
<img width="220" height="220" alt="pic8" src="img/thumbs/art8.jpg"></a>
</div>
<div class="clear"></div>

</div>

<div id="footer_area" class="container_16">

<div id="contact" class="grid_4">
<a href="#" class="contact_button"> Contact </a>
    <p class="subfooter_text">Have a query?<br>Don't be scared to contact me!</p>
</div>
<div id="divider" class="grid_2">
</div>

<div id="social" class="grid_4">
    <a href="#"><img src="img/social/linkedin.png"></a>
    <a href="#"><img src="img/social/vimeo.png"></a>
    <a href="#"><img src="img/social/twitter.png"></a>
    <a href="#"><img src="img/social/deviantart.png"></a>
    <a href="#"><img src="img/social/wordpress.png"></a>
        <p class="subfooter_text"> Find me on other sites </p>
</div>
<div id="divider" class="grid_2">
</div>
<div class="grid_4"> </div>
</div>
</div>
</body>
</html> 
```

**CSS**

```
 #picture {
padding: 5px;
border: solid 1px #EFEFEF;
margin-left:4px; /* border + margin = 10px */
margin-right:4px; /* border + margin = 10px */
margin-bottom:50px;
}
#picture:hover {
    border: solid 1px #CCC;
    -moz-box-shadow: 1px 1px 5px #999;
    -webkit-box-shadow: 1px 1px 5px #999;
        box-shadow: 1px 1px 5px #999;
        }

#logo {
margin-bottom:50px;
}

body {
background-color:#cccccc
}

#header {
padding-top: 20px;
padding-bottom: -20px;
}

#navmenu {
    float: right;
    position: relative;
    left: -24%;
    padding-top: 10px;
}

#navmenu ul {margin: 0; padding: 0; 
    list-style-type: none; list-style-image: none; }

#navmenu li {display: inline; }

#navmenu ul li a {text-decoration:none;  margin: 0px;
    padding: 5px 10px 5px 10px; color: white;
    border-radius: 6px;
;}

#navmenu ul li a:hover {color: black;
    background: white; }

.topbar {
height:40px;
color:white;
min-width: 960px;
width: 100%;
background: #111111; /* Old browsers */
background: -moz-linear-gradient(top, #111111 0%, #000000 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#111111), color-stop(100%,#000000)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top, #111111 0%,#000000 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top, #111111 0%,#000000 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top, #111111 0%,#000000 100%); /* IE10+ */
background: linear-gradient(to bottom, #111111 0%,#000000 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#111111', endColorstr='#000000',GradientType=0 ); /* IE6-9 */
}

.contact_button {
    -moz-box-shadow:inset 0px 1px 0px 0px #ffffff;
    -webkit-box-shadow:inset 0px 1px 0px 0px #ffffff;
    box-shadow:inset 0px 1px 0px 0px #ffffff;
    background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #ededed), color-stop(1, #dfdfdf) );
    background:-moz-linear-gradient( center top, #ededed 5%, #dfdfdf 100% );
    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ededed', endColorstr='#dfdfdf');
    background-color:#ededed;
    -moz-border-radius:6px;
    -webkit-border-radius:6px;
    border-radius:6px;
    border:1px solid #dcdcdc;
    display:inline-block;
    color:#777777;
    font-family:arial;
    font-style:normal;
    font-size:14px;
    font-weight:bold;
    padding:6px 24px;
    text-decoration:none;
    text-shadow:1px 1px 0px #ffffff;
}

.contact_button:hover {
    background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #dfdfdf), color-stop(1, #ededed) );
    background:-moz-linear-gradient( center top, #dfdfdf 5%, #ededed 100% );
    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#dfdfdf', endColorstr='#ededed');
    background-color:#dfdfdf;
}

.contact_button:active {
    position:relative;
    top:1px;
}

.subfooter_text {
padding-top: 10px;
color: #777777;
font-family:verdana;
}

#contact {
font-style:italic;
padding-top:70px;
text-align:center;
  }

#social {
font-style:italic;
padding-top:70px;
text-align:center;
  }

#divider {
margin-top:70px;
border-left:1px solid #000000; 
border-right:1px solid #404040; 
height:80px;
width: 1px;
position:relative;}

.wrapper {
margin-right:auto;
margin-left:auto;
position:static;
width:100%;
min-width:960px;
max-width:2560px; 
}

#content { 
margin-right:auto;
margin-left:auto;
position:static;
width:960px;
}

}
#footer_area {
    width: 100%;
    background-image: url(../img/footer_tile.png);
    background-repeat: repeat-x;
} 
```

背景在预览中看起来不错，但是当我打开浏览器查看它的外观时，就会发生这种情况。 [http://gyazo.com/ab7c9762330c9d4a1c8ec3345aa8493d](http://gyazo.com/ab7c9762330c9d4a1c8ec3345aa8493d)

页脚背景只是消失了。

我遇到的另一个问题是页脚区域中的两个项目不会居中对齐。

只是为了帮助您了解它应该看起来像这里的样机。

[http://gyazo.com/928b4af4618df4d2c97fa38d3dcf9381](http://gyazo.com/928b4af4618df4d2c97fa38d3dcf9381)

如果您能提供帮助，我将非常感激，我整夜都在努力解决这个问题。

-约旦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:07:34.810

我得到了它！

看看你的 css/style.css（[css 文件中的错误](http://jigsaw.w3.org/css-validator/validator?uri=http://mockup.jordanmoss.co.uk/css/style.css&profile=css3&usermedium=all&warning=1&vextwarning=&lang=en)）

最后几行：

```
#content { 
    margin-right:auto;
    margin-left:auto;
    position:static;
    width:960px;
}

}   /* <-- w.t.h. ??  */

    #footer_area {
        width: 100%;
        background-image: url(../img/footer_tile.png);
        background-repeat: repeat-x;
} 
```

**您的 .css 文件中的错误**禁用您的最后一个声明 (#footer_area)

继续

# arrays - Matlab OOP 从对象数组中访问属性

> ID：14986377
> 
> 赞同：3
> 
> 时间：2013-02-20T17:39:35.720
> 
> 标签：arrays, oop, matlab, matrix

Matlab新手来自C/C++......

我有一个对象数组，我试图访问数组中每个对象的值并将它们连接到一个变量中。

```
Class sample 
   properties(GetAccess = 'public', SetAccess ='public')
     ID;
     Value;
   end

   methods 
        function obj = sample(id, value)
            obj.ID = id;
            obj.Value = value;
         end
   end
end 
```

然后我制作一个包含一些对象的矩阵。

```
x = sample.empty(3,0);
x(1) = sample(1,3);
x(2) = sample(1,4);
x(3) = sample(1,5); 
```

然后我想从对象中获取所有值并将它们存储到一个新数组中。

```
y = x(:).Value; 
```

然而，这失败了，只将 x(3) 的值放入 y..... 并且：

```
y(:) = x(:).Value; 
```

引发错误。

任何帮助，将不胜感激。我知道我可以用循环来做到这一点，但我正试图以最快和最有效的方式做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T18:04:37.780

简单但不直观

```
y=[x.Value] 
```

为什么？Well`x.Value`不是连续的内存块，所以不能直接分配给数组。调用依次`x.Value`从每个对象返回 Value 数据成员。`x`Matlab 将其视为单独的操作。通过将调用包含在`[]`您告诉 matlab 通过连接每个结果来制定一个连续的数组。然后可以将其分配给双精度数组，`y`.

编辑：

关于您的评论，如果 x 在不同对象中的长度不同，则上述代码可以正常工作，即 . .

```
x(1) = sample(1,3);
x(2) = sample(1,[4 5 6]);
x(3) = sample(1,[20 10]); 
```

然后

```
>> [x.Value]

ans =

     3     4     5     6    20    10 
```

如果你的意思是你希望 'y' 是一个参差不齐的向量，就像 C++ 中的向量向量一样，你需要使用元胞数组表示法（大括号）

```
>> y = {x.Value}

y = 

    [3]    [1x3 double]    [1x2 double] 
```

# cloud - 如何在 ubuntu 上安装 KVM 时禁用硬件虚拟化检查？

> ID：14986380
> 
> 赞同：0
> 
> 时间：2013-02-20T17:39:54.677
> 
> 标签：cloud, kvm, rackspace-cloud, hypervisor

我的系统不支持硬件虚拟化技术。我正在尝试安装 KVM，然后安装 Rackspace 云包。那么，如何在安装时禁用硬件虚拟化检查。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-03T15:35:14.380

KVM 需要硬件支持。即使您禁用检查，它也不起作用。

尝试不支持 KVM 的纯 QEMU，它能够在完全虚拟化环境中运行来宾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T20:50:48.573

要禁用硬件虚拟化检查，您需要删除该源代码并重新构建 KVM 内核模块。支持您的处理器（Intel 或 AMD）的 KVM 内核模块会检查硬件虚拟化：

```
int kvm_arch_init(void *opaque)
{
    int r;
    struct kvm_x86_ops *ops = (struct kvm_x86_ops *)opaque;

    if (kvm_x86_ops) {
        printk(KERN_ERR "kvm: already loaded the other module\n");
        r = -EEXIST;
        goto out;
    }

    if (!ops->cpu_has_kvm_support()) {
        printk(KERN_ERR "kvm: no hardware support\n");
        r = -EOPNOTSUPP;
        goto out;
    } 
```

即使您禁用此检查，初始化代码和其他地方也会对硬件支持进行额外检查。

您可以做的是使用 QEMU 运行来宾，而不需要 KVM 支持。您会注意到的主要区别（一个很大的区别）是 QEMU 仿真比 KVM 硬件虚拟化慢。

# jquery - javascript 数组 - .each() 循环 - 检测字符串并交换

> ID：14986382
> 
> 赞同：0
> 
> 时间：2013-02-20T17:39:58.027
> 
> 标签：jquery, arrays, loops, each

我正在尝试使用数组并且遇到了一些困难。我知道这是基本的，但我还是 jquery/javascript 的新手，所以不知道为什么这不起作用

```
var vids = new Array();

vids[0] = $('#tab_content_1 iframe').attr('src');
vids[1] = $('#tab_content_2 iframe').attr('src');
vids[2] = $('#tab_content_3 iframe').attr('src');
vids[3] = $('#tab_content_4 iframe').attr('src');   

//alert(vids);

$.each(vids, function() {
    if( $(this).attr('src').search('?w=opaque')){
            $(this).attr('src').replace('$?=opaque', '?w=transparent');
            alert('hi');
        }
}); 
```

我正在尝试在 iframe 的 url 中搜索 opaque 参数并将其替换为 transparent 参数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T17:44:47.723

*您有几个问题，但最大的问题是您正在创建 iframe src*值的数组，但随后尝试引用父框架。这是您需要的（注意许多简化）：

```
$('#tab_content_1 iframe, #tab_content_2 iframe, #tab_content_3 iframe, #tab_content_4 iframe', function() {
    var frame = $(this),
        src = frame.attr('src');
    if (src.indexOf('?w=opaque') != -1)
    {
        frame.attr('src', src.split('?w=opaque').join('?w=transparent'));
        alert('hi');
    }
}); 
```

请注意，该`search`方法被滥用了，这`replace`与您使用它的方式不同。因此，更新后的代码用于`indexOf`检查字符串并`split/join`进行替换。

此外，我们在开始时直接使用 jQuery DOM 查询选择器，而不是单独的 iframe 数组（这是多余的）。

最后，注意使用[`attr(prop, value)`](http://api.jquery.com/attr/)来设置属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T18:22:21.317

Isn't this would work:

```
$.each(vids, function () {
   if ($(this).attr('src').indexOf('?') > 0) {
      var str = $(this).attr('src').substr(0, $(this).attr('src').indexOf('?'));
      $(this).attr('src', str+'?w=transparent');
      alert($(this).attr('src'));
   }
}); 
```

# css - CSS @page 规则的浏览器兼容性

> ID：14986384
> 
> 赞同：2
> 
> 时间：2013-02-20T17:40:02.847
> 
> 标签：css, printing, cross-browser

我正在创建一个电视每周打印时间表，由于我的桌子很大，我需要更多的纸张空间。我找到了一个 CSS 规则，可以帮助您更改打印页面的边距，例如以下示例：

```
@page {
    margin: 0.5cm;
} 
```

我想知道所有浏览器都支持这个功能吗？如果他们这样做，哪些版本？

如果他们不这样做，还有其他选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:42:58.133

这是兼容性报告：[http ://www.browsersupport.net/CSS/@page](http://www.browsersupport.net/CSS/@page)

看起来大多数版本的 Chrome 和 Opera、Internet Explorer 8 及更高版本以及当前版本的 Firefox 都支持它。

# android - Linux 中的 aac 字段解码

> ID：14986386
> 
> 赞同：5
> 
> 时间：2013-02-20T17:40:07.030
> 
> 标签：android, linux, audio, ffmpeg, aac

我在越南并试图学习越南语。

难的是学习发音，我做了一个Android App来录制声音。越南人很好，我收集了500多个声音文件。

现在我正在尝试制作一个语言学习应用程序。为此，我尝试降低噪音并使音量正常化。

我选择了以下设置：

```
this.recorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
this.recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AAC_ELD);
this.recorder.setAudioEncodingBitRate(96000);
this.recorder.setAudioSamplingRate(44100); 
```

（cordova AudioPlayer.java - 默认设置是废话）

现在我有一个问题。我无法使用 Audacity 或 FFmpeg 打开文件。

```
./ffmpeg -i /tmp/speaker__ualp__x%E1%BA%A5u.mp4 /tmp/uu.wav
ffmpeg version 1.1.2 Copyright (c) 2000-2013 the FFmpeg developers
  built on Feb 20 2013 10:50:54 with gcc 4.6 (Ubuntu/Linaro 4.6.3-1ubuntu5)
  configuration: --enable-libfdk-aac
  libavutil      52\. 13.100 / 52\. 13.100
  libavcodec     54\. 86.100 / 54\. 86.100
  libavformat    54\. 59.106 / 54\. 59.106
  libavdevice    54\.  3.102 / 54\.  3.102
  libavfilter     3\. 32.100 /  3\. 32.100
  libswscale      2\.  1.103 /  2\.  1.103
  libswresample   0\. 17.102 /  0\. 17.102
[aac @ 0xaada980] Audio object type 39 is not supported.
    Last message repeated 1 times
Guessed Channel Layout for  Input Stream #0.0 : mono
Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/tmp/speaker__ualp__x%E1%BA%A5u.mp4':
  Metadata:
    major_brand     : isom
    minor_version   : 0
    compatible_brands: isom3gp4
    creation_time   : 2013-01-29 15:53:11
  Duration: 00:00:01.21, start: 0.000000, bitrate: 116 kb/s
    Stream #0:0(eng): Audio: aac (mp4a / 0x6134706D), 44100 Hz, mono, fltp, 96 kb/s
    Metadata:
      creation_time   : 2013-01-29 15:53:11
      handler_name    : SoundHandle
[aac @ 0xaada980] Audio object type 39 is not supported.
Output #0, wav, to '/tmp/uu.wav':
  Metadata:
    major_brand     : isom
    minor_version   : 0
    compatible_brands: isom3gp4
    Stream #0:0(eng): Audio: pcm_s16le, 44100 Hz, mono, s16, 705 kb/s
    Metadata:
      creation_time   : 2013-01-29 15:53:11
      handler_name    : SoundHandle
Stream mapping:
  Stream #0:0 -> #0:0 (aac -> pcm_s16le)
Error while opening decoder for input stream #0:0 
```

我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T08:10:50.777

使用 SOX 音频工具包设置 BitRate 和 SamplingRate。

Sox 可以直接从你的 shell 中使用。

使用下面查看转换的语法和选项。

```
# man sox 
```

更改采样率的示例

```
# sox input.mp3 -r 8000 output.wav 
```

# actionscript-3 - as3 全屏视频性能与 stage.fullScreenSourceRect

> ID：14986388
> 
> 赞同：1
> 
> 时间：2013-02-20T17:40:08.343
> 
> 标签：actionscript-3, video

为什么在舞台上定义一个 Rectangle 对象可以提高视频播放性能？

如果没有以下内容，则 1080P 视频以 17fps 播放

使用以下内容，它会更大（填充屏幕宽度）并且播放速度更快。为什么？？

```
var screenRectangle:Rectangle = new Rectangle(0, 0, 1920,1080);
stage.fullScreenSourceRect = screenRectangle; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T19:00:01.490

认为我找到了答案 它支持硬件扩展

[http://help.adobe.com/en_US/AS2LCR/Flash_10.0/help.html?content=00001538.html](http://help.adobe.com/en_US/AS2LCR/Flash_10.0/help.html?content=00001538.html)

# zend-framework2 - Zend\Authentication\Storage\Session 在 ZF 2.1.1 中不起作用

> ID：14986389
> 
> 赞同：-3
> 
> 时间：2013-02-20T17:40:08.560
> 
> 标签：zend-framework2

我将 ZF 从 2.0.6 更新到 2.1.1，Zend\Authentication\Storage\Session 不起作用。这是我的项目代码，2 个版本中的 2 个项目，2.0.6 工作，但 2.1.1 没有

感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:15:01.117

确保您在更新后重新启动了浏览器。也许这听起来很傻，但它很容易忘记。我遇到了一个问题，直到我自己这样做，并且听说其他几个人遇到了问题。此外，检查过去几次更新的变更日志；我相信在 2.0.7 中（可能）有一个更新会在某些情况下破坏会话管理。我似乎再也找不到参考了，但如果我没记错的话，它与直接在存储对象上使用属性有关，例如下面。

`$storage->something = 'some_value';`

如果我没记错的话，这是不可能的，如果你像这样直接使用类，你应该使用`offsetGet`and 。如果您这样做，则值得对此进行一些研究并尝试查看其他方法是否仍然出现错误。或者，您可以使用下面的类（[或更详细](http://codingexplained.com/coding/php/zend-framework/using-sessions-in-zend-framework-2)）。`offsetSet``Storage``Zend\Session\Container`

```
$user_session = new \Zend\Session\Container('user');

$user_session->username = 'Andy0708'; // Write to session
$username = $user_session->username; // Read from session 
```

您确实必须在问题中提供更多信息，以便人们可以正确回答。在那之前，我们只能真正猜测。

# php - Google Analytics API 401 无效凭据

> ID：14986394
> 
> 赞同：2
> 
> 时间：2013-02-20T17:40:27.860
> 
> 标签：php, google-analytics, google-api, oauth-2.0

我绞尽脑汁想弄清楚如何使用[Google API PHP 客户端](https://code.google.com/p/google-api-php-client/source/browse/trunk/src/contrib/Google_AnalyticsService.php)访问 Google Analytics。具体来说，我想[上传](https://developers.google.com/analytics/devguides/platform/features/cost-data-overview)其他广告系列的费用数据。我的代码确实可以从 GA 获取信息，我可以查看配置文件的流量数据，但我不知道如何上传。

这是我用于身份验证的代码：

```
require_once 'google-api-php-client/src/Google_Client.php';
require_once 'google-api-php-client/src/contrib/Google_AnalyticsService.php';
session_start();

$client = new Google_Client();
$client->setApplicationName("GA-Tester");
$client->setClientId('xxx.apps.googleusercontent.com');
$client->setClientSecret('xxx');
$client->setRedirectUri('http://www.site.com/indext.php');
$client->setDeveloperKey('xxx');

$analyticsService = new Google_AnalyticsService($client);
$dailyUploads = $analyticsService->management_dailyUploads;

if (isset($_GET['logout'])) {
  unset($_SESSION['token']);
}
if (isset($_GET['code'])) {
  $client->authenticate();
  $_SESSION['token'] = $client->getAccessToken();
  $redirect = 'http://' . $_SERVER['HTTP_HOST'] . $_SERVER['PHP_SELF'];
  header('Location: ' . filter_var($redirect, FILTER_SANITIZE_URL));
}
if (isset($_SESSION['token'])) {
  $client->setAccessToken($_SESSION['token']);
}
if (!$client->getAccessToken()) {
  header ('Location:http://www.site.com/indext.php');
} else {... 
```

此代码确实适用于请求数据。我可以获得帐户列表、配置文件、下载特定配置文件的流量数据等。没有错误或问题。

当我尝试上传包含成本数据的 CSV 文件时，我收到“401 Invalid Credentials”错误。这是发送文件的代码：

```
$send = $dailyUploads->upload(
  $accountId,
  $webPropertyId,
  $customDataSourceId,
  $start_date,
  1, 
 'cost',
  array(
   "reset" => true, 
   "data" => $cont,
   "mimeType" => "application/octet-stream", 
   "uploadType" => "media")); 
```

我已经仔细检查了我传递的所有变量，它们正在发送正确的信息。

所以这是我的问题。如果我的所有`GET`请求都没有问题，为什么我的`POST`请求会抛出错误？我无法判断这是我的代码错误还是[API 控制台](https://code.google.com/apis/console/)中的设置错误。谁能引导我朝着正确的方向前进？

**编辑：** 这是生成的错误代码（减去可识别位）。

```
Fatal error: Uncaught exception 'Google_ServiceException' with message 
'Error calling POST https://www.googleapis.com/upload/analytics/v3/man
agement/accounts/1234567/webproperties/UA-1234567-1/customDataSources/
xXxXxX/dailyUploads/2013-01-17/uploads?appendNumber=1&type=cost&reset=
true&uploadType=media&key=xXxXxX: (401) Invalid Credentials' in /../pub
lic_html/proj/google-api-php-client/src/io/Google_REST.php:66 Stack tra
ce: #0 /../public_html/proj/google-api-php-client/src/io/Google_REST.ph
p(36): Google_REST::decodeHttpResponse(Object(Google_HttpRequest)) #1 /
../public_html/proj/google-api-php-client/src/service/Google_ServiceRes
ource.php(186): Google_REST::execute(Object(Google_HttpRequest)) #2 /..
/public_html/proj/google-api-php-client/src/contrib/Google_AnalyticsSer
vice.php(82): Google_ServiceResource->__call('upload', Array) #3 /../pu
blic_html/proj/dailyUpload_send.php(60): Google_ManagementDailyUploadsS
erviceResource->upload('1234567', 'UA-1234567-1', 'xXxXxXxXxXxXxXx...',
 ' in /../public_html/proj/google-api-php-client/src/io/Google_REST.php
  on line 66 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T23:00:09.310

我只是第一次成功上传了成本数据。[在与Nicholas Pickering](https://stackoverflow.com/users/1270996/nicholas-pickering)的交易评论中，我遇到了[管理 API 授权](https://developers.google.com/analytics/devguides/config/mgmt/v3/mgmtAuthorization)的文档，其中指出：

> 如果您已过期或您使用了错误的 API 范围，您将收到一个`401`状态代码。`access_token`

范围的默认值是只读的，这就是为什么我的所有`GET`请求都可以毫无困难地工作，但我无法`POST`通过 API 完成任何请求。我不记得我是如何找到它的，但在 PHP 客户端库中完成此操作的方法是将以下行附加到客户端声明中：

```
$client->setScopes('https://www.googleapis.com/auth/analytics'); 
```

一旦我将该行添加到我的项目中，我就能够成功上传成本数据。我**真的**很高兴扫清了这个障碍。要完成我的项目，我还有很长的路要走，但至少我知道它会奏效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-06T19:22:16.567

在我转到 Google Console -> APIs & auth -> APIs 并打开此 API 使用之前，我一直收到此错误。

# php - PHP 正则表达式匹配时间戳，但不是脚本标签的一部分

> ID：14986395
> 
> 赞同：0
> 
> 时间：2013-02-20T17:40:30.310
> 
> 标签：php, regex, preg-replace

我有一个接近工作的正则表达式模式，但我仍然缺少一些东西。我只想换出`<script>`标签的时间戳`src`：

所以我想要这个：

```
stuff BEFORE...<script src='/assets/mySite-1238459846.js'></script>
stuff AFTER... 
```

变成这样：

```
stuff BEFORE...<script src='/assets/mySite-0123456789.js'></script>
stuff AFTER... 
```

这是切换时间戳的代码，但仅当 with`src`不包含任何特殊字符或斜杠时，才`$stringNotSpecial`有效：

```
$stringNotSpecial='mySite-1238459846.js'; //Works!
$stringSpecial='stuff BEFORE...<script src='/assets/mySite-0123456789.js'></script>
stuff AFTER...'; //DOESNT work :(
$timestamp='0123456789';
$pattern = '/mySite-[0-9]+.js/';
echo preg_replace($pattern, 'mySite-'.$timestamp.'.js', $stringNotSpecial);
echo '<br>';
echo echo preg_replace($pattern, 'mySite-'.$timestamp.'.js', $stringSpecial); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:43:57.117

尝试

```
$stringSpecial='stuff BEFORE...<script src=\'/assets/mySite-0123456789.js\'></script>stuff AFTER...'; 
```

或者

```
$stringSpecial='stuff BEFORE...<script src="/assets/mySite-0123456789.js"></script>stuff AFTER...'; 
```

从[http://ideone.com/Vq8TSS](http://ideone.com/Vq8TSS)的输出-

```
result: Success     time: 0.01s    memory: 20520 kB     returned value: 0
input: no
output:

mySite-0123456789.js<br>stuff BEFORE...<script src='/assets/mySite-0123456789.js'></script>stuff AFTER... 
```

# database - 将 JSP 中的当前时间戳日期与数据库中的日期进行比较

> ID：14986396
> 
> 赞同：0
> 
> 时间：2013-02-20T17:40:34.767
> 
> 标签：database, jsp

嗨，我有一个 JSP 页面，它在用户登录后向用户显示当前日期和时间，我的 jsp 代码是：

```
<script type="text/javascript">
        /25893-javascript-current-date-and-time-.html
        var todayDate=new Date();
        var date=todayDate.getDate();
        var month=todayDate.getMonth()+1;
        var year=todayDate.getFullYear();
        var hours=todayDate.getHours();
        var minutes=todayDate.getMinutes();
        var seconds=todayDate.getSeconds();
        document.writeln("You have logged in at: "+ hours + " : " + minutes + " : " + seconds);
        document.writeln("on: " + date + "/" + month + "/" + year);
    </script> 
```

我想将用户登录的当前日期和时间与数据库中的日期和时间进行比较（在数据库中，我已经有一个名为 startDateTime 的字段，其 DATETIME 数据类型）并将数据库中的行显示给用户（我已经在数据库中有几个日期字段）。有谁知道这样做最简单的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:51:03.767

只需在 JSP 中而不是在 JS 中创建日期。

```
<jsp:useBean id="now" class="java.util.Date" /> 
```

假设有问题的 DB 字段也`java.util.Date`可以通过 获得`${bean.startDateTime}`，您可以按如下方式进行比较：

```
<c:if test="${bean.startDateTime lt now}">
    Start date time is in the past.
</c:if>
<c:if test="${bean.startDateTime gt now}">
    Start date time is in the future.
</c:if>
<c:if test="${bean.startDateTime eq now}">
    Start date time is identical to now.
</c:if> 
```

# mobile - 什么（amd）脚本加载器用于移动网站

> ID：14986400
> 
> 赞同：2
> 
> 时间：2013-02-20T17:40:38.073
> 
> 标签：mobile, local-storage, requirejs, amd

我正在着手开发一个新版本的移动网站。我正在研究使用 amd 脚本加载器，并且已经将其范围缩小到 require 和 lsjs。我知道两者都有很多优点和缺点，但我正试图为我的网站的移动版本找出所有这些。有没有人在移动级别有这个库的经验？只是想在这里讨论人们认为最好的方法是什么。（任何拥有 1500 代表的人都想创建一个 lsjs 标签 :)）。也许这些库的创建者中的任何一个（托德伯克或理查德巴克豪斯）对此有意见

谢谢

编辑：

感谢 Simon Smith 在下面提供的重要信息。有人用过lsjs吗？它在速度方面看起来很有前途，但没有用户群、文档或（我认为）require/curl 的功能，但看起来仍然很有前途

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T23:05:36.097

我会说在你准备好投入生产之前使用 RequireJS。然后编译你的脚本并将 RequireJS 替换为 Almond。它是由 James Burke（RequireJS 的作者）制作的一个简单的库，因此您可以依靠它无缝地工作：

> 一些开发人员喜欢使用 AMD API 来编写模块化 JavaScript，但在进行了优化构建之后，他们不想包含像 RequireJS 这样的完整 AMD 加载程序，因为他们不需要所有这些功能。某些用例（例如移动设备）对文件大小非常敏感。
> 
> 通过在构建文件中包含杏仁，不需要 RequireJS。使用 Closure Compiler 压缩并压缩后，almond 大约为 1 KB。

[https://github.com/jrburke/almond](https://github.com/jrburke/almond)

**编辑：**

Curl.js 也是一种选择。我没有使用过它，但知道它比 RequireJS 小很多。做了一些研究以了解原因：

RequireJS 通过 Curl 执行以下操作（通过 James Burke）：

> *   支持多版本/上下文，对模拟测试很有用，但你可以不用它
> *   支持通过 require 加载纯 JS 文件，不必是 AMD 模块
> *   支持特殊检测并与旧版本的 jQuery 一起工作（如果您使用 jQuery 1.7.1 或更高版本，这应该不是问题）
> *   （目前）更好地支持简化包装的 commonjs 样式：define(function(require) {});
> 
> 简而言之，如果您只打算在应用程序中处理 AMD 模块，不需要多版本/上下文支持，并且不使用简化的 commonjs 包装样式，或者使用较旧的 jQuery，那么 curl 可能是一个不错的选择。

[https://groups.google.com/forum/?fromgroups=#!topic/requirejs/niUyLZrivgs](https://groups.google.com/forum/?fromgroups=#!topic/requirejs/niUyLZrivgs)

Curl的作者：

> RequireJS 在比 curl.js 更多的地方运行，包括 WebWorkers 和 node.js。它也比 curl.js 有更多的“战斗测试”，这可能意味着它在边缘情况下的错误更少。curl.js 还缺少一些重要功能，例如隐式依赖项的预加载和对 AMD 包装的 commonjs 模块的支持。这些都将在 0.6 版（下周晚些时候）中出现。
> 
> 从好的方面来说，curl.js ......
> 
> 大小只有 RequireJS 的 1/4 ——即使与 js 捆绑在一起！和domReady！插件它仍然不到一半的大小。
> 
> 在加载模块方面比 RequireJS 更快，但只有在 IE6-8 或开发（非构建）环境中才有意义。
> 
> 支持 AMD 以外的格式的可插拔模块加载器（例如，我们正在开发未包装的 CJSM/1.1 和 CJSM/2.0）。
> 
> 通过 IOC 容器（如wire.js（通过 cram.js））支持基于配置的依赖管理。
> 
> 支持 css 内联（通过 cram.js）和 css 连接（通过 cram.js 0.3 年底）

[https://github.com/cujojs/curl/issues/35#issuecomment-2954344](https://github.com/cujojs/curl/issues/35#issuecomment-2954344)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-18T07:49:21.410

Back in 2014 I faced the same problem. I had some extra requirements though in order to make the site fast on mobile:

*   Small enough to be inlined (to avoid paying an extra request-tax to get the loader onboard).
*   Inlined config file (get rid of a request).
*   Config file in pure javascript (no parsing overhead).
*   Let the browser do the actual loading (browsers are smart these days) of files.
*   Connect all asynchronously loaded modules together.
*   Support for single page apps that include legacy code that uses sprinkled $(function(){...}) constructs, yet I insist on loading jQuery late and asynchronously to speed things up.

After evaluating RequireJS, curl, lsjs and a bunch of others, I concluded that none of them came close enough to what I needed for my projects. Eventually I decided to create my own [lockandload AMD-loader](https://www.npmjs.com/package/lockandload). I didn't open-source it at the time, because that meant writing documentation. But I recently open-sourced it with fresh docs in case it benefits others.

# windows - 如何将 XLib 键码转换为微软虚拟键？

> ID：14986402
> 
> 赞同：3
> 
> 时间：2013-02-20T17:40:44.637
> 
> 标签：windows, x11, xlib

如何将 X11 键码转换为[微软虚拟键码](http://msdn.microsoft.com/en-us/library/windows/desktop/dd375731%28v=vs.85%29.aspx)

```
int processKeyboardMessage( XEvent *event )
{
  assert( KeyPress == event->type );

  //TODO: Before returning convert keycode into microsoft virtual key code     
  return ( event->xkey.keycode );
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T05:38:22.757

一种选择是为每个平台上的所有可能键进行枚举。然后您可以在应用程序中以系统的本机格式处理键码。您需要做一些微妙的事情来解决某些情况（例如 win32 上的左/右 alt），但是您可以实现这些特殊情况并为它们更新您的枚举。而不是在每个平台上创建大表或 switch-case 语句。

```
/* my_key.h : creates names for key codes on Windows and X11 */
#ifndef MY_KEY_H
#define MY_KEY_H
#if defined(_WIN32)
#include <windows.h>
enum my_key {
    MY_KEY_BACKSPACE = VK_BACK,
    MY_KEY_RETURN = VK_RETURN,
    MY_KEY_LEFT = VK_LEFT,
    MY_KEY_RIGHT = VK_RIGHT,
    MY_KEY_DOWN = VK_DOWN,
    MY_KEY_UP = VK_UP,
    /* TODO: define the rest of the keys */
};
#else defined(__APPLE__)
enum my_key {
    MY_KEY_BACKSPACE = 0x33,
    MY_KEY_RETURN = 0x24,
    MY_KEY_LEFT = 0x7b,
    MY_KEY_RIGHT = 0x7c,
    MY_KEY_DOWN = 0x7d,
    MY_KEY_UP = 0x7e,
    /* TODO: define the rest of the keys */
};
#else /* assume X11 */
#include <X11/keysym.h>
enum my_key {
    MY_KEY_BACKSPACE = XK_BackSpace,
    MY_KEY_RETURN = XK_Linefeed,
    MY_KEY_LEFT = XK_Left,
    MY_KEY_RIGHT = XK_Right,
    MY_KEY_DOWN = XK_Down,
    MY_KEY_UP = XK_Up,
    /* TODO: define the rest of the keys */
};
#endif
#endif 
```

# unix - 为特定应用程序（例如 pytest）实现选定的 unix 路径

> ID：14986405
> 
> 赞同：0
> 
> 时间：2013-02-20T17:40:56.343
> 
> 标签：unix, path, pytest

我安装了两个版本`pytest`，一个本地安装在我的主目录的目录中，另一个安装在`/usr/local/bin`.

中安装的 pytest 版本`/usr/local/bin`是 2.2.4，我没有 sudo 权限将其升级到较新的版本 2.3.4，但需要一些测试才能与 2.3.4 一起运行。

有没有办法重定向路径，以便在我调用 pytest 时它始终使用`pytest`我的主目录`pytest`中的目录而不是目录中的目录？`/usr/local/bin`

因为需要运行很多测试，所以有一个捷径会更方便！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T18:38:31.237

您应该向您的目录添加一个`$PATH`包含`pytest`您想要使用的副本的目录。例如，放置`pytest`并`~/bin`添加`~/bin`（或`$HOME/bin`）到您的路径：

```
PATH="$HOME/bin:$PATH"
export PATH 
```

如图所示，将新目录放在路径的前面，以便首先找到您的副本`pytest`（以及您放入的任何其他内容`~/bin`）。

更好的是，将这两行放入`~/.profile`，以便您`$PATH`每次登录时都会更新。

# android - 如何更改目标 min3d 对象 android？

> ID：14986408
> 
> 赞同：0
> 
> 时间：2013-02-20T17:41:02.520
> 
> 标签：android, object, android-resources, 3ds, min3d

我使用 min3d 示例来显示对象 3ds。但目标文件 = res/raw 和纹理 = assets。我可以替换外部存储中的目标文件吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:27:57.083

是的，这是一个基于 min3d 的框架，可以从 sd [https://github.com/MasDennis/Rajawali/tree/master/src/rajawali](https://github.com/MasDennis/Rajawali/tree/master/src/rajawali)加载 或者如果您不想使用其他库，请查看 min3d 问题。有人提出了解决方案 [http://code.google.com/p/min3d/issues/detail?id=40](http://code.google.com/p/min3d/issues/detail?id=40)

# encryption - AES Salting 迭代，需要多少次？

> ID：14986410
> 
> 赞同：0
> 
> 时间：2013-02-20T17:41:08.993
> 
> 标签：encryption, aes, salt

我正在尝试执行一个简单的加密和解密 AES，并且我正在尝试使用加盐。这些值将存储在数据库中并从那里检索。（我不能使用散列）我暂时使用静态键和静态盐。

我的问题是我应该做多少次腌制？我的意思是我必须将值存储在数据库中，我看到在 2 次迭代（128 位密钥，42 位盐）我得到一个 152 个字符的 40 个字符的加密字符串。对于 4 次迭代，40 个字符为 364 个字符，8 次迭代为 40 个字符为 1536 个字符，16 次迭代，40 个字符为 19968 个字符。

那么我的最佳迭代次数应该是多少？

```
 public static String AESencrypt(String value) throws Exception {
        Key key = generateKey();
        Cipher c = Cipher.getInstance(ALGORITHM);
        c.init(Cipher.ENCRYPT_MODE, key);

        String valueToEnc = null;
        String eValue = value;
        for (int i = 0; i < ITERATIONS; i++) {
            valueToEnc = salt + eValue;
            byte[] encValue = c.doFinal(valueToEnc.getBytes());
            eValue = new BASE64Encoder().encode(encValue);
        }
        return eValue;
    }

    public static String AESdecrypt(String value) throws Exception {
        Key key = generateKey();
        Cipher c = Cipher.getInstance(ALGORITHM);
        c.init(Cipher.DECRYPT_MODE, key);

        String dValue = null;
        String valueToDecrypt = value;
        for (int i = 0; i < ITERATIONS; i++) {
            byte[] decordedValue = new BASE64Decoder().decodeBuffer(valueToDecrypt);
            byte[] decValue = c.doFinal(decordedValue);
            dValue = new String(decValue).substring(salt.length());
            valueToDecrypt = dValue;
        }
        return dValue;
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T20:35:18.097

加盐用于密码以派生密钥。它不用于密文，即使它是基于 64 位编码的。加盐用于使攻击者更难使用暴力或彩虹表找到密码。它通常由 PBKDF 使用，例如 PBKDF2、bcrypt 或 scrypt。

在你的情况下，你加密多少并不重要。如果攻击者尝试密钥，解密密文然后找到base 64，攻击者将知道他已经找到了密钥，并且可以简单地再次计算迭代次数。

一般来说，多次加密是没有意义的；分组密码本身已经应该包含足够数量的“轮”。

# python - 如何从文件内容创建 OpenCV 图像？

> ID：14986412
> 
> 赞同：0
> 
> 时间：2013-02-20T17:41:13.957
> 
> 标签：python, opencv, numpy

通常我会在 OpenCV 中创建一个图像：

```
from cv2 import imread
img = imread("/home/nick/myfile.jpg") 
```

但是文件的内容已经在另一个变量中了，那么如何直接从这个变量中创建一个 OpenCV 呢？例如

```
fc = open("/home/nick/myfile.jpg", "rb").read()
img = something(fc) 
```

是什么`something`？是否有 OpenCV 或 numpy 函数可以执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T17:54:30.527

cv2.imdecode() 可以在内存中做到这一点。是的，它需要一个 numpy 数组作为输入

# sql - 相关子查询

> ID：14986414
> 
> 赞同：1
> 
> 时间：2013-02-20T17:41:17.823
> 
> 标签：sql, plsql, subquery

Gahh..让我沮丧。教科书要求我们在不使用相关子查询的情况下重写以下语句。

```
SELECT DISTINCT V.VENDOR_NAME, I.INVOICE_NUMBER, I.INVOICE_DATE, I.INVOICE_TOTAL 
FROM VENDORS V
JOIN INVOICES I 
    ON V.VENDOR_ID = I.VENDOR_ID
WHERE I.INVOICE_DATE IN 
    (SELECT MIN(INVOICE_DATE) FROM INVOICES IV WHERE IV.VENDOR_ID = V.VENDOR_ID)
AND I.INVOICE_NUMBER IN 
    (SELECT MIN(INVOICE_NUMBER) FROM INVOICES IV WHERE IV.VENDOR_ID = V.VENDOR_ID)
ORDER BY V.VENDOR_NAME 
```

我怎样才能做到这一点？无论如何我都想不出没有子查询来重写它：S

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T18:00:16.000

你可以把它写成一个简单`LEFT JOIN`的，根本没有子查询；

```
SELECT DISTINCT V.VENDOR_NAME, I.INVOICE_NUMBER, I.INVOICE_DATE, I.INVOICE_TOTAL 
FROM VENDORS V
JOIN INVOICES I 
    ON V.VENDOR_ID = I.VENDOR_ID
LEFT JOIN INVOICES I2
    ON V.VENDOR_ID = I2.VENDOR_ID
   AND (I2.INVOICE_NUMBER < I.INVOICE_NUMBER OR
        I2.INVOICE_DATE   < I.INVOICE_DATE)
WHERE I2.INVOICE_NUMBER IS NULL; 
```

[一个用于测试的 SQLfiddle](http://sqlfiddle.com/#!4/c5d97/7)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T17:50:19.033

试试这个：

```
SELECT
    DISTINCT V.VENDOR_NAME,
    I.INVOICE_NUMBER,
    I.INVOICE_DATE,
    I.INVOICE_TOTAL 
FROM VENDORS V
    JOIN INVOICES I 
        ON V.VENDOR_ID = I.VENDOR_ID
    JOIN
    (
        SELECT
            VENDOR_ID,
            MIN(INVOICE_DATE) MIN_INVOICE_DATE,
            MIN(INVOICE_NUMBER) MIN_INVOICE_NUMBER
        FROM INVOICES
        GROUP BY VENDOR_ID
    ) MV
    ON V.VENDOR_ID = MV.VENDOR_ID
       AND I.INVOICE_DATE= MV.MIN_INVOICE_DATE
       AND I.INVOICE_NUMBER = MV.MIN_INVOICE_NUMBER
ORDER BY V.VENDOR_NAME 
```

# ruby-on-rails - Created_at 但不按 user_id 分组

> ID：14986417
> 
> 赞同：0
> 
> 时间：2013-02-20T17:41:35.490
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我有一个数组`items`。一个`User has_many items`。在 中`Item Index`，所有项目都按 显示和排序`created_at`，最新的在前。有时用户一次上传多个项目，因此在索引页面中可以并排查看来自同一用户的项目。我必须防止这种情况。真的我需要某种高级算法，但我现在正在寻找不那么复杂的东西。

总而言之，我需要类似的东西：

```
Item.order('created_at DESC') 
```

但是然后按照 user_id 执行与 group by user_id 相反的操作...换句话说， order by`created_at`除非来自同一用户的两个或多个项目彼此相邻放置，然后将它们分开。

这是一个如此抽象的问题……如果不清楚，请道歉……

# android - android中的按钮放置问题

> ID：14986418
> 
> 赞同：0
> 
> 时间：2013-02-20T17:41:39.133
> 
> 标签：android, android-layout, button

我在按钮放置方面遇到了一些问题。我正在开发一个应用程序，当应用程序启动时相机会打开（自定义）。我在布局中添加了 2 个按钮，我的问题是我无法调整按钮。我希望按钮放置，如捕获按钮将位于中心底部，上传按钮将位于右下角。我正在使用以下代码。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
 >

<FrameLayout
android:id="@+id/camera_preview"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:layout_weight="1"
>

</FrameLayout>
  <Button
      android:id="@+id/button_upload"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_marginBottom="0dp"
      android:text="Upload"
       />

  <Button
      android:id="@+id/button_capture"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_marginBottom="0dp"
      android:text="Capture" />

</RelativeLayout> 
```

我也尝试过使用 LinearLayout。谁能告诉我我在哪里犯错？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:54:28.170

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
 >

  <FrameLayout
      android:id="@+id/camera_preview"
      android:layout_width="wrap_content"
      android:layout_height="fill_parent"
      android:layout_alignBottom="@+id/button_upload"
      android:layout_alignParentLeft="true"
      android:layout_alignParentTop="true"
      android:layout_weight="1" >

  </FrameLayout>

  <Button
      android:id="@+id/button_upload"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_alignParentBottom="true"
      android:layout_alignParentRight="true"
      android:text="Upload" />

  <Button
      android:id="@+id/button_capture"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_alignParentBottom="true"
      android:layout_marginRight="55dp"
      android:layout_toLeftOf="@+id/button_upload"
      android:text="Capture" />

</RelativeLayout>`enter code here` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T17:46:35.103

试试这个...

```
android:layout_centerHorizontal="true" 
```

在按钮标签中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T18:06:49.830

所以我想这可以像这样完成。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_marginBottom="0dp"
    android:background="#A9A9A9"
    android:orientation="vertical" >

    <FrameLayout
        android:id="@+id/camera_preview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:layout_above="@+id/button_capture"
    />
  <Button
      android:id="@+id/button_capture"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_alignParentBottom="true"
      android:layout_centerHorizontal="true"
      android:text="Capture" />

  <Button
      android:id="@+id/button_upload"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_alignParentRight="true"
      android:layout_alignParentBottom="true"
      android:text="Upload" />

  </RelativeLayout> 
```

# macos - 在 cocoa 的共享文件夹中打开一个文件

> ID：14986421
> 
> 赞同：0
> 
> 时间：2013-02-20T17:41:43.330
> 
> 标签：macos, cocoa, osx-lion

我正在尝试从我的可可应用程序中打开位于 Windows 共享文件夹中的 pdf 文件。

我正在尝试使用 NSWorkSpace openFile 方法打开文件，并且我正在传递类似于 @"smb:\192.168.2.1\sharedFolderName\my.pdf 的路径。

但是我无法打开文件。在打开文件之前我必须挂载共享文件夹吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T19:15:04.677

共享文件夹的正确 URL 是

```
smb://[[domain;]username[:password]@]server[/share[/path]] 
```

所以在你的例子中应该是

```
@"smb://192.168.2.1/sharedFolderName/my.pdf" 
```

# python - 显示用户已登录 iOS 应用

> ID：14986431
> 
> 赞同：-2
> 
> 时间：2013-02-20T17:41:59.180
> 
> 标签：python, ios, flask, flask-login

登录从后端工作，并在 iOS 上登录后进入主屏幕。但是我如何保证用户实际上正在登录？

例如，我有一个标签，我希望在其中显示用户的用户名，但我不知道如何获取用户的用户名。

我知道我可以在哪里调用服务器，它会以 JSON 格式返回用户名，但这不是效率低下吗？有什么更好的方法来做到这一点？

PS。我是第一次 iOS 程序员

附加信息：我目前也在使用 Flask 和 Flask-Login 扩展作为后端。使用 login_user(user) 方法。这在过去适用于 Web 开发，但我如何让它适用于 iOS 开发。

```
@app.route('/login/', methods=['POST'])
def login():
    params = json.loads(request.data)
    username = params['username']
    password = params['password']
    u = User.query.filter_by(username=username).first()
    if u:
        if utils.check_password_hash(password, u.pw_hash):
            login_user(u)
            return ('', 200)
        else:
            return ('', 400)
    else:
        return ('', 400) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T17:46:24.083

看看 Parse.com 的 iOS SDK ( [https://www.parse.com/docs/ios_guide#top/iOS](https://www.parse.com/docs/ios_guide#top/iOS) )。它提供了一个登录表单以及使用 PFUser 对象来确定用户是否登录的能力。Parse 最好的一点是它是免费的。:)

调用`[PFUser currentUser]`将返回已登录的用户，如果没有用户，则返回 nil。

# php - 在控制器中创建模型的参数太多？

> ID：14986434
> 
> 赞同：0
> 
> 时间：2013-02-20T17:42:09.533
> 
> 标签：php, kohana, kohana-orm, kohana-3.2

A 有很多控制器，我必须在其中保存/创建新模型，它看起来像这样：

```
public Controller_Test extends Controller_Template {

    if ($post = $this->request->post()) {

        $model = ORM::factory('model');
        $model->param1 = $post['Param1'];
        $model->param2 = $post['Param26'];
        $model->param3 = $post['Param31'];
        $model->param4 = $post['Param13'];
        $model->param5 = $post['Param2'];
        $model->param6 = $post['Param35'];
        $model->param7 = $post['Param10'];
        $model->param8 = $post['Param22'];
        $model->param9 = $post['Param3'];
        $model->save();
    }    

} 
```

是否可以统一（创建一个方法）以保存所有数组？

我知道`$model->values($post)->create();`，但仍然无法理解它是如何工作的，因为您可以看到我有不同的已发布参数键，这可能会被考虑。

在许多示例中，所有数据分配都发生在控制器中，但它们真的很小，在我的情况下，我假设有一个带有大量数据分配字符串的巨大控制器，我认为这将是一种糟糕的编码风格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T18:18:56.147

无论您做什么，都需要将`$_POST`变量中的键名称映射到模型属性名称。

```
$model_post_map = array(
    'param1' => 'Param1',
    'param2' => 'Param26',
    'param3' => 'Param31',
    'param4' => 'Param13',
    'param5' => 'Param2',
    'param6' => 'Param35',
    'param7' => 'Param10',
    'param8' => 'Param22',
    'param9' => 'Param3',
);
$post_model_map = array_flip($model_post_map);

function rekey($arr, $map) {
    $newarr = array();
    foreach ($arr as $k => $v) {
        if (isset($map[$k])) {
            $newarr[$map[$k]] = $v;
        }
    }
    return $newarr;
}
$modeldata = rekey($post, $post_model_map);
$model->values($modeldata); 
```

您应该按照创建模型的方式命名表单字段，以减少阻抗不匹配。

您还应该使用第二个参数`$model->values()`来限制表单可以更改的内容。

# javascript - d3 csv数据加载

> ID：14986435
> 
> 赞同：17
> 
> 时间：2013-02-20T17:42:12.790
> 
> 标签：javascript, html, csv, d3.js

我正在尝试在 D3 中调整一个简单的散点图程序以接受 CSV 文件。当我使用文件中的数据时，它工作得很好，但是当我尝试加载 CSV 文件时，它根本就无法工作。我缺少一些简单的东西吗？CSV 文件“datatest.csv”的内容与代码中的数据集相同。我检查了浏览器是否正在加载数据，并且似乎都在那里。我想我只是错过了一步。

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>D3 Demo: Linear scales</title>
    <script type="text/javascript" src="../d3/d3.v3.js"></script>
    <style type="text/css">
        /* No style rules here yet */       
    </style>
</head>
<body>
    <script type="text/javascript">

        //Width and height
        var w = 900;
        var h = 500;
        var padding = 20;
        var dataset = [];

//          var dataset = [
//                          [5, 20], [480, 90], [250, 50], [100, 33], [330, 95],
//                          [410, 12], [475, 44], [25, 67], [85, 21], [220, 88],
//                          [600, 150]
//                        ];

        d3.csv("datatest.csv", function(data) {
        dataset=data
        });

        //Create scale functions
        var xScale = d3.scale.linear()
                             .domain([0, d3.max(dataset, function(d) { return d[0]; })])
                             .range([padding, w - padding * 2]);

        var yScale = d3.scale.linear()
                             .domain([0, d3.max(dataset, function(d) { return d[1]; })])
                             .range([h - padding, padding]);

        var rScale = d3.scale.linear()
                             .domain([0, d3.max(dataset, function(d) { return d[1]; })])
                             .range([2, 5]);

        //Create SVG element
        var svg = d3.select("body")
                    .append("svg")
                    .attr("width", w)
                    .attr("height", h);

        svg.selectAll("circle")
           .data(dataset)
           .enter()
           .append("circle")
           .attr("cx", function(d) {
                return xScale(d[0]);
           })
           .attr("cy", function(d) {
                return yScale(d[1]);
           })
           .attr("r", function(d) {
                return rScale(d[1]);
           });
    </script>
</body>
</html> 
```

这是 CSV 文件的内容：

```
x-coordinate, y-coordinate
5,20
480,90
250,50
100,33
330,95
410,12
475,44
25,67
85,21
220,88
600,150 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-20T18:05:36.050

**重要的：**

虽然这里的答案有效，但有一个内置方法`d3.csv.parseRows()`，它可以达到相同的结果。为此，请参阅@ryanmt 的答案（也在此页面上）。但是，请记住，无论您使用哪种方法，如果您的 CSV 中有数字，那么您需要将它们从字符串转换为 javascript 数字。您可以通过在解析后的值前加上`+`. 例如，在我在这里提供的解决方案中——它没有使用`parseRows()`——转换是通过`+d["x-coordinate"]`.

**答案：**

CSV 解析器生成对象数组，而不是您需要的数组数组。它看起来像这样：

```
[
  {"x-coordinate":"5"," y-coordinate":"20"},
  {"x-coordinate":"480"," y-coordinate":"90"},
  {"x-coordinate":"250"," y-coordinate":"50"},
  {"x-coordinate":"100"," y-coordinate":"33"},
  ...
] 
```

要对其进行转换，您需要使用一个`map()`函数：

```
d3.csv("datatest.csv", function(data) {
  dataset = data.map(function(d) { return [ +d["x-coordinate"], +d["y-coordinate"] ]; });
}); 
```

（注意，`map()`在较旧的 IE 中不可用。如果这很重要，那么 d3、jQuery 等有很多解决方法）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-02-21T18:03:20.527

D3 provides a builtin for this very thing.

Instead of calling `.parse()` on your data, call `.parseRows`. This provides just the data as an Array, rather than an Object (based upon the header line).

see the [Documentation](https://github.com/mbostock/d3/wiki/CSV).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-07T07:44:15.917

Using d3.csvParseRows (assuming D3 v5)

```
d3.text('/data/output.csv')
  .then( text => d3.csvParseRows(text) )
  .then( d => console.log(d) ); 
```

# android - 如何从“EditText”上下文菜单中删除“Edit”

> ID：14986436
> 
> 赞同：0
> 
> 时间：2013-02-20T17:42:21.387
> 
> 标签：android

我有一个**EditText**，当你长按时它会显示上下文菜单，这没关系。

不过，唯一的问题是，我需要用户能够“**选择文本**”和“**复制**”它。这就是我选择**EditText**（而不是**TextView**）的原因，但我不希望用户能够“编辑”文本。

注意，我设置`"android:editable="false"`为**EditText**。因此，如果用户从上下文菜单中选择“编辑”，则不会发生任何事情。而且，我不希望“**编辑**”选项出现在上下文菜单中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:45:54.817

尝试`Edittext.setEnabled(false);`从java代码设置

你也可以使用`edittext.keyListener(null);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T17:48:12.993

如何创建 TextView 并使用剪贴板。

```
TextView mTextView = new TextView(this);
registerForContextMenu(mTextView);

@Override
public boolean onContextItemSelected(MenuItem item) {
    ((ClipboardManager) getSystemService(CLIPBOARD_SERVICE)).setText(mTextView.getText());
    return true;
} 
```

# vb.net - 在代码隐藏中设置文本框背景图像刷

> ID：14986440
> 
> 赞同：0
> 
> 时间：2013-02-20T17:42:26.000
> 
> 标签：vb.net, silverlight, silverlight-5.0

我已将图像上传到 Visual Studio 解决方案中的图像文件夹。

如何使用 VB.net 代码隐藏而不是 XAML 将文本框的背景设置为此图像？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T18:01:22.390

用这个 ：

```
textbox.Background = New ImageBrush(New BitmapImage(New Uri("ImagePath", UriKind.Relative))) 
```

替换`ImagePath`为图片的路径。

# c# - 我应该如何组织两个对象以便能够将它们连接到一个键上？

> ID：14986444
> 
> 赞同：4
> 
> 时间：2013-02-20T17:42:42.913
> 
> 标签：c#, xml

所以基本上，我正在阅读两个 XML 文档。第一个有两个需要存储的值：名称和值。第二个有四个值：Name、DefaultValue、Type 和 Limit。在阅读文档时，我想将每个存储到某个对象中。然后，我需要能够将这两个对象组合成一个对象，其中存储了 5 个值。XML 文档的长度不同，但第二个文档的大小始终至少是第一个文档的大小。

例子：

```
<XML1>
  <Item1>
    <Name>Cust_No</Name>
    <Value>10001</Value>
  </Item1>
  <Item4>
    ITEM4 NAME AND VALUE
  </Item4>
  <Item7>
    ITEM 7 NAME AND VALUE
  </Item7>
</XML1>

<XML2>
  <Item1>
    <Name>Cust_No</Name>
    <DefaultValue></DefaultValue>
    <Type>varchar</Type>
    <Limit>15</Limit>
  </Item1>
  6 MORE TIMES ITEMS 2-7
</XML2> 
```

我已经有通过 XML 循环的代码。我真的只需要思考什么是存储数据的最佳方式而已。最终，我希望能够在 Name Key 上加入这两个对象。我尝试了`string[]`and `arrayList[]`，但我遇到了组合它们的困难。我也阅读了`Dictionary`，但也很难实现（我以前从未使用`Dictionary`过）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T17:52:49.707

这是 Linq to Xml 查询，它将连接两个 XDocument 并为连接的项目选择匿名对象。每个对象将有五个属性：

```
var query = 
  from i1 in xdoc1.Root.Elements()
  join i2 in xdoc2.Root.Elements()
      on (string)i1.Element("Name") equals (string)i2.Element("Name") into g
  let j = g.SingleOrDefault() // get joined element from second file, if any
  select new {
      Name = g.Key,
      Value = (int)i1.Element("Value"),
      DefaultValue = (j == null) ? null : (string)j.Element("DefaultValue"),
      Type = (j == null) ? null : (string)j.Element("Type"),
      Limit = (j == null) ? null : (string)j.Element("Limit")
  }; 
```

像这样创建的 XDocuments：

```
var xdoc1 = XDocument.Load(path_to_xml1);
var xdoc2 = XDocument.Load(path_to_xml2); 
```

查询的用法：

```
foreach(var item in query)
{
   // use string item.Name
   // integer item.Value
   // string item.DefaultValue
   // string item.Type
   // string item.Limit
} 
```

# jquery - 月、年选择在 setDate onFocus 后不再更改

> ID：14986447
> 
> 赞同：0
> 
> 时间：2013-02-20T17:42:55.443
> 
> 标签：jquery, jquery-ui, html-select, jquery-ui-datepicker, jquery-events

[在 setDate 之后不再能够更改标题中的月份和年份，](https://stackoverflow.com/questions/14525436/jquery-datepicker-after-setdate-no-longer-able-to-change-month-and-year-in-the-h)因为这不是在事件上设置的，因此不是jquery datepicker的真正副本。

就我而言，`setDate`on 事件使`select`s 中的月份和年份不可更改。

```
$("#addDeliverBy").off().datepicker({ 
    changeMonth: true,
    changeYear: true
}).focus(function(){
    $(this).datepicker( "setDate", "+7" );
}); 
```

[http://jsfiddle.net/mqV2y/1/](http://jsfiddle.net/mqV2y/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:48:47.153

`focus`每次单击日历上的某些内容时都会触发该事件，从而`setDate`再次调用。

如果您只是想设置打开日期选择器的日期，则`beforeShow`在此处使用该选项会更好：

```
$("#addDeliverBy").off().datepicker({
    changeMonth: true,
    changeYear: true,
    beforeShow: function () {
        $(this).datepicker("setDate", "+7");
    }
}); 
```

**示例：http:** [//jsfiddle.net/mqV2y/2/](http://jsfiddle.net/mqV2y/2/)

# sql - 计数记录问题

> ID：14986457
> 
> 赞同：2
> 
> 时间：2013-02-20T17:43:12.460
> 
> 标签：sql, sql-server, tsql

这可能是一个简单的，但我无法理解它。

我有一个 MemberBusinessCats 表，其中包含一个 BusinessCatID 和一个 MemberID.. 该表可以像这样呈现：

```
+-----------------------+-----------------+------------+
|  MemberBusinessCatID  |  BusinessCatID  |  MemberID  |
+-----------------------+-----------------+------------+
|  27                   |  45             |  102       |
+-----------------------+-----------------+------------+
|  28                   |  55             |  102       |
+-----------------------+-----------------+------------+
|  29                   |  61             |  102       |
+-----------------------+-----------------+------------+
|  30                   |  45             |  33        |
+-----------------------+-----------------+------------+
|  31                   |  23             |  33        |
+-----------------------+-----------------+------------+
|  32                   |  45             |  73        |
+-----------------------+-----------------+------------+
|  32                   |  61             |  73        |
+-----------------------+-----------------+------------+
|  32                   |  45             |  73        |
+-----------------------+-----------------+------------+ 
```

如何制作脚本以显示以下数据

```
+-----------------+---------------------+
|  BusinessCatID  |  NumMembers In Cat  |
+-----------------+---------------------+
|  45             |  3                  |
+-----------------+---------------------+
|  55             |  1                  |
+-----------------+---------------------+
|  61             |  2                  |
+-----------------+---------------------+
|  23             |  1                  |
+-----------------+---------------------+ 
```

提前谢谢了。

新杰克

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T17:45:34.277

您需要使用带有 a 的聚合函数`GROUP BY`：

```
select BusinessCatID, count(*) NumMembersInCat
from MemberBusinessCats
group by BusinessCatID 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/32808/2)

这也可以写成`count() over()`：

```
select distinct BusinessCatID, 
  count(*) over(partition by BusinessCatID) NumMembersInCat
from MemberBusinessCats 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/32808/5)

如果要计算每个类别中的成员数，则可以使用：

```
select BusinessCatID, 
  count(distinct MemberID) NumMembersInCat
from MemberBusinessCats
group by BusinessCatID 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/32808/9)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-20T17:45:25.613

试试这个

```
 select BusinessCatID ,count(BusinessCatID) as NumMembers_In_Cat 
   from MemberBusinessCats 
   group by BusinessCatID 
```

[**演示 SQLFIDDLE**](http://sqlfiddle.com/#!2/b7dc5/1)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T17:58:34.290

基于您拥有 BusinessCatID 和 MemberID (45,73) 组合的事实，该组合列出了两次，但只计算一次您需要执行 COUNT(DISTINCT x)

```
SELECT BusinessCatID, COUNT(DISTINCT MemberID) as NumMembersInCat
FROM MemberBusinessCatID
GROUP BY BusinessCatID 
```

这将计算每个 BusinessCatID 的不同成员（基于 MemberID）。如果您不担心重复，那么使用 COUNT(MemberID) 甚至 COUNT(1) 都可以正常工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T17:48:17.570

试试这个（或类似的东西）：

```
 select BusinessCatID ,count(*) as NumMembersInCat 
       from MemberBusinessCats 
       group by BusinessCatID 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T17:47:35.057

试试这个

```
select BusinessCatID, COUNT(BusinessCatID)
from MemberBusinessCatID
group by BusinessCatID 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-20T17:48:42.250

```
Select BusinessCatID, count(MemberID) as [NumMembers In Cat] 
from MemberBusinessCats 
group by BusinessCatID, MemberID 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-20T19:37:15.587

我理解这个问题来自不同的TRIPLE（MemberBusinessCATID，BusinessCATID，MemberID），总和超过BusinessCATID。在这种情况下，查看不同的三元组或二元组是相同的，但在更大的数据集中可能会有所不同：

创建了一个视图：

```
create view dist_catView as
SELECT distinct MemberBusinessCATID, BusinessCATID, Member ID from cat_table 
```

然后

```
SELECT BusinessCATID, count(MemberID) from dist_catView
group by BusinessCATID 
```

# c++ - 包含 boost::optional 对象的 std::vector 对象是否可移动？可移动提升::可选？

> ID：14986461
> 
> 赞同：0
> 
> 时间：2013-02-20T17:43:20.087
> 
> 标签：c++, boost, c++11

```
std::vector<boost::optional<double>> foo;
//populate foo. 
```

自新标准以来，向量是可移动的，但不幸的是，它们还没有使可选的可移动:(

1.  有没有制作可选可移动的计划？

2.  上述向量是否仍能像任何其他向量一样有效地移动？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T17:45:38.417

`std::vector`无论存储的类型如何，组件都是可移动的。移动操作只需将指向一个向量中的内部缓冲区的指针*移动*到另一个向量。存储在该缓冲区中的对象的类型是无关紧要的，因为它们保持原样。

# php - php在表格中添加提交的值

> ID：14986471
> 
> 赞同：0
> 
> 时间：2013-02-20T17:43:58.937
> 
> 标签：php, forms, html-table, submit

当用户必须在表中添加一些名称（选定的或新的）并查看结果时，我有一个页面，我做了一个页面，用户可以选择名称添加单击提交按钮添加到列表（表）中，我的问题是当用户选择一个名称（从数据库中的列表中）并提交（我使用弹出表单）时，该名称被添加到表中，但是第二次，当他选择另一个名称添加到列表中的姓被他选择的最后一个替换。这是一段代码：

```
 <table cellpadding="0" cellspacing="0" border="0" class="display" >

    <tbody>

    <?php
    //$names :variable for the submitted value from the popup form
    foreach(array($_POST['authors'])as $names){
    echo"<tr>";
    echo"<td>";
    echo"$names";
    echo"</td>";
    echo"<td>";
    echo'<a href="#" class="up"></a>';
    echo'<a href="#" class="down"></a>';
    echo'<a href="#" class="delrow"></a>';
    echo"</td>";
    echo"</tr>";
     }
     ?>
 </tbody>
 </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T17:55:03.340

您应该将插入的作者姓名存储在用户会话中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T17:48:54.367

您编写的代码将仅处理最近提交的结果，而忽略所有以前的提交。您需要做的是在表单中添加一个隐藏字段来存储以前的名称，然后解析该字段以及新字段。

# hadoop - hdfs中的两个文件比较

> ID：14986474
> 
> 赞同：1
> 
> 时间：2013-02-20T17:44:16.130
> 
> 标签：hadoop, mapreduce

我想写一个 map reduce 来比较 hdfs 中的两个大文件。任何想法如何实现这一目标。或者如果由于文件大小非常大而没有其他方法进行比较，那么认为 map-reduce 将是一种理想的方法。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T18:41:21.643

您可以分两步进行。

1.  首先使行号成为文本文件的一部分：

说初始文件如下所示：

```
I am awesome
He is my best friend 
```

现在，将其转换为如下内容：

```
1,I am awesome
2,He is my best friend 
```

这可以通过 MapReduce 作业本身或其他一些工具来完成。

   2\. 现在编写一个 MapReduce 步骤，其中在 mapper 中发出行号作为键，并将实际句子的其余部分作为值。然后在减速器中只比较值。当它不匹配时，会发出行号（密钥）和有效负载，无论您在这里想要什么。此外，如果计数`values`仅为 1，那么它也是不匹配的。

**编辑：更好的方法**

更好的是，您可以做的是，只需在映射器中一次读取完整的行作为键并将值设为数字，例如 1。因此，以我上面的示例为例，您的映射器输出如下：

```
< I am awesome,1 >

< He is my best friend,1 > 
```

在 reducer 中只需检查 的计数`values`，如果不是 2，则说明不匹配。

但是这种方法有一个问题，如果有可能在两个不同的地方出现完全相同的行`values`，那么您应该检查它是否是 2 的倍数，而不是检查 reducer 中给定键的长度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-08T07:34:42.127

一种可能的解决方案是将行号作为地图作业中的计数。有两个文件，如下所示：

文件 1：我在这里 -- 第 1 行我很棒 -- 第 2 行 你是我最好的朋友 -- 第 3 行

文件2也是类似的

现在您的地图作业输出应该是，<我很棒，2>...

一旦你完成了这两个文件的 Map 作业，你就有两个记录（键，值），它们具有相同的值来减少。

在 reduce 时，您可以比较计数器或生成输出为 ，依此类推。如果该行也存在于不同的位置，则输出可能表明该行不匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-29T01:35:44.623

我有一个将文件与密钥进行比较的解决方案。在您的情况下，如果您知道您的 ID 是唯一的，则可以将 ID 作为映射中的键发出，整个记录作为值发出。假设您的文件具有 ID，Line1 然后作为键和映射器的值发出。

在 shuffle 和 sort 阶段，ID 将被排序，您将获得一个包含来自两个文件的数据的迭代器。即，来自具有相同 ID 的两个文件的记录将在相同的迭代器中结束。

然后在化简器中，比较来自迭代器的两个值，如果它们匹配，则继续下一条记录。否则，如果它们不匹配，则将它们写入输出。

我已经做到了，它就像一个魅力。

**场景 - 没有匹配的键** 如果两个文件之间没有匹配的 ID，它们将只有一个迭代器值。

场景 2 - 重复键 如果文件有重复键，则迭代器将有超过 2 个值。

**注意：**只有在迭代器只有 2 个值时才应该比较这些值。**提示：**迭代器的值不会总是按顺序排列。要识别来自特定文件的值，请在映射器中在行尾添加一个小指示符，例如 Line1;file1 Line1;file2 然后在 reducer 上，您将能够识别哪个值属于哪个映射器。

# spring - javax.naming.NameNotFoundException：名称 java:comp 未绑定在此上下文中

> ID：14986476
> 
> 赞同：0
> 
> 时间：2013-02-20T17:44:22.757
> 
> 标签：spring

我正在尝试使用以下内容进行战争：

*   Spring 框架 3.0.6
*   JSF 2.1.6
*   冰面 3.1

spring 的配置文件在 /conf/rb_conf.xml 中。

```
GRAVE: Exception sending context initialized event to listener instance of class
org.springframework.web.context.ContextLoaderListener
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in ServletContext resource [/conf/rb_conf.xml]: Invocation of init method failed; nested exception is javax.naming.NameNotFoundException: Name java:comp is not bound in this Context
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1420)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:293)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:290)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:192)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:567)
at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:282)
at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:204)
at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)
at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4206)
at org.apache.catalina.core.StandardContext.start(StandardContext.java:4705)
at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:799)
at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:779)
at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:601)
at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:943)
at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:563)
at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1399)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:297)
at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:836)
at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:761)
at org.apache.catalina.manager.ManagerServlet.check(ManagerServlet.java:1500)
at org.apache.catalina.manager.HTMLManagerServlet.doPost(HTMLManagerServlet.java:252)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.filters.CsrfPreventionFilter.doFilter(CsrfPreventionFilter.java:194)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:563)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:879)
at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:600)
at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1703)
at java.lang.Thread.run(Thread.java:662)
Caused by: javax.naming.NameNotFoundException: Name java:comp is not bound in this Context
at org.apache.naming.NamingContext.lookup(NamingContext.java:770)
... 
```

我一直在尝试解决这个问题，但没有运气，有人可以帮忙吗？有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T17:50:37.643

该错误是在访问一些名称以“java:comp”开头的JNDI资源时发生的，并且该资源在服务器中不存在。您是否使用在服务器中配置的数据源？你用的是什么服务器？

# linkedin - 为什么linkedin连接休息API给出错误的会员ID？

> ID：14986477
> 
> 赞同：5
> 
> 时间：2013-02-20T17:44:23.813
> 
> 标签：linkedin

我在 php 中有应用程序，并且我必须从这个 rest API 获取我的网络的所有连接。

[http://api.linkedin.com/v1/people/~/connections?modified=new](http://api.linkedin.com/v1/people/~/connections?modified=new)

但它给出了错误的成员 ID。我在 LinkedIn 休息控制台 ( [https://developer.linkedin.com/rest-console](https://developer.linkedin.com/rest-console) ) 中检查了相同的 API 结果，但它给出了不同的输出。

使用控制台输出：

```
<person>
    <id>nzdqEWJjKM</id>
    <first-name>Sagar</first-name>
    <last-name>Modi</last-name>
    <headline>Sr. HR Officer - Generalist at MAS Financial Services Ltd.</headline>
    <picture-url>http://m3.licdn.com/mpr/mprx/0_3vxs_YPyEsnVrHXzT-Jd_pvlox-zraqzitwL_pt_zJ6LfEivSP7nDy6SXttoPdzJhngkuU2v-HG2</picture-url>
    <api-standard-profile-request>
      <url>http://api.linkedin.com/v1/people/nzdqEWJjKM</url>
      <headers total="1">
        <http-header>
          <name>x-li-auth-token</name>
          <value>name:PSbh</value>
        </http-header>
      </headers>
    </api-standard-profile-request>
    <site-standard-profile-request>
      <url>http://www.linkedin.com/profile/view?id=54732271&authType=name&authToken=PSbh&trk=api*a108281*s116823*</url>
    </site-standard-profile-request>
    <location>
      <name>Ahmedabad Area, India</name>
      <country>
        <code>in</code>
      </country>
    </location>
    <industry>Human Resources</industry>
  </person> 
```

使用我的应用程序的 rest API 输出：

```
<person>
    <id>7dmJjxBx_k</id>
    <first-name>Sagar</first-name>
    <last-name>Modi</last-name>
    <headline>Sr. HR Officer - Generalist at MAS Financial Services Ltd.</headline>
    <picture-url>http://m3.licdn.com/mpr/mprx/0_3vxs_YPyEsnVrHXzT-Jd_pvlox-zraqzitwL_pt_zJ6LfEivSP7nDy6SXttoPdzJhngkuU2v-HG2</picture-url>
    <api-standard-profile-request>
      <url>http://api.linkedin.com/v1/people/7dmJjxBx_k</url>
      <headers total="1">
        <http-header>
          <name>x-li-auth-token</name>
          <value>name:PSbh</value>
        </http-header>
      </headers>
    </api-standard-profile-request>
    <site-standard-profile-request>
      <url>http://www.linkedin.com/profile/view?id=54732271&amp;authType=name&amp;authToken=PSbh&amp;trk=api*a184885*s193024*</url>
    </site-standard-profile-request>
    <location>
      <name>Ahmedabad Area, India</name>
      <country>
        <code>in</code>
      </country>
    </location>
    <industry>Human Resources</industry>
  </person> 
```

请查看两个输出中的标签不同。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T11:48:44.007

每个linkedin 应用程序都有自己的一组唯一ID。您使用的 API 密钥与控制台使用的密钥不同，这就是您获得不同 ID 的原因。

这样做是为了确保垃圾邮件发送者无法轻易捕获 Linkedin 数据。如果 ID 相同，垃圾邮件发送者将设置数百个应用程序，并从每个应用程序获取大量配置文件数据。Linkedin 希望保护其用户数据的安全。

# ruby-on-rails-3 - 橡胶::Util.has_asset_pipeline？方法缺失

> ID：14986479
> 
> 赞同：2
> 
> 时间：2013-02-20T17:44:30.690
> 
> 标签：ruby-on-rails-3, amazon-ec2, capistrano, rubber-band

我想我们几天前将 Rubber 更新回 1.15.0，这个问题现在出现在 deploy.rb 中。这是块：

```
if Rubber::Util.has_asset_pipeline?
 # load asset pipeline tasks, and reorder them to run after
 # rubber:config so that database.yml/etc has been generated
 load 'deploy/assets'
 callbacks[:after].delete_if {|c| c.source == "deploy:assets:precompile"}
 callbacks[:before].delete_if {|c| c.source == "deploy:assets:symlink"}
 before "deploy:assets:precompile", "deploy:assets:symlink"
 after "rubber:config", "deploy:assets:precompile"
end 
```

问题是当我将其注释掉时，部署失败说：

```
* executing "sudo -p 'sudo password: '  bash -l -c 'cd /mnt/foo-production/current &&  RUBBER_ENV=\"production\" RAILS_ENV=\"production\" bundle exec rake rubber:config'"
servers: ["app01.foo.com"]
[app01.foo.com] executing command
** [out :: app01.foo.com] rake aborted!
** [out :: app01.foo.com] Don't know how to build task 'rubber:config'
** [out :: app01.foo.com] 
** [out :: app01.foo.com] (See full trace by running task with --trace)
command finished in 17128ms
failed: "/bin/bash -l -c 'sudo -p '\\''sudo password: '\\''  bash -l -c '\\''cd /mnt/foo-production/current &&  RUBBER_ENV=\"production\" RAILS_ENV=\"production\" bundle exec rake rubber:config'\\'''" on app01.foo.com 
```

知道为什么吗？谢谢！

# git - 与 Github 中的“Pull Request”和“Fork Repo”按钮完全相同的 git 命令行

> ID：14986482
> 
> 赞同：10
> 
> 时间：2013-02-20T17:44:44.263
> 
> 标签：git, github, pull-request, git-fork

当我点击这些按钮时，Github 在做什么？假设我在 Github 上做了一个拉取请求。我要输入的 git 命令是什么（`git pull ....`？）。那么分叉呢？Github 在幕后做什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-24T22:57:50.183

虽然 GitHub 上的 repo 是裸露的（没有工作树“签出”文件），但可以认为 fork 等效于`git clone <URL for source repo>`，所以在幕后他们可能正在做类似`git clone --bare <URL>`.

拉取请求是要求源仓库的所有者将您的更改拉入他们的仓库......所以没有等效的 git 命令。这有点像给那个 repo 的所有者发电子邮件说“这是我所做的一些更改，希望你喜欢它们”。如果他们接受拉取请求，他们基本上会做相当于`git pull <URL for your repo>`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-25T00:06:45.870

如果您想知道如何模拟分叉和拉取请求的行为，[VonC](https://stackoverflow.com/users/6309/vonc)的回答比我[在这里](https://stackoverflow.com/questions/3611256/forking-vs-branching-in-github)的要好得多。基本上`clone`和`pull`。

如果您对 GitHub在幕后*实际*所做的事情感兴趣，它会稍微复杂一些。[GitHub 上的@holman](https://github.com/holman)的Zach Holman最近发表了一个演讲[“如何构建 GitHub”](http://zachholman.com/talk/how-to-build-a-github/)，他详细介绍了它们的实现。

# sql - 使用 ComboBox 搜索数据库

> ID：14986483
> 
> 赞同：0
> 
> 时间：2013-02-20T17:44:44.933
> 
> 标签：sql, vb.net, ms-access

对于我的大学项目，我正在设计一个程序，该程序可以读取有关动物的 Microsoft Access 数据库并显示数据。我已经设法对其进行了编程，以便我可以按动物名称进行搜索，它会以另一种形式显示记录，但我需要能够搜索其他字段，例如 LatinName 或 AverageWeight，然后显示任何匹配的结果进入一个组合框，然后用户可以选择该组合框，程序将显示代码，例如，如果我要输入 50kg 并且有两条 50kg 的记录，它会同时显示它们，然后让我选择我想要的。

任何帮助或建议将不胜感激，如果您需要更多信息，请随时询问。

```
Public Class Form1

Private Sub btnsear_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnsear.Click
    If (txtname.Text = "") Then
        MsgBox("Invalid Search")
    Else
        Try
            Dim newsql As String
            newsql = "select * from Animals where AnimalName like " & "'%" & txtname.Text & "%'"
            'MsgBox("select * from Animals where AnimalName like " & "'" & txtname.Text & "'")
            'msgbox(newsql)
            Dim con As New OleDb.OleDbConnection
            Dim da As New OleDb.OleDbDataAdapter

            ' dim ds as NewDataTable
            Dim dt As New DataTable("Animals")
            ' uses the 2010 compatible connection string
            con.ConnectionString = "PROVIDER=Microsoft.ACE.OLEDB.12.0;Data Source = h:\Animals.accdb"
            con.Open()

            da = New OleDb.OleDbDataAdapter(newsql, con)
            da.Fill(dt)

            Form2.Show()

            'show name in unbound text box
            Form2.nametxt.Text = dt.Rows(0).Item(1)
            Form2.latintxt.Text = dt.Rows(0).Item(2)
            Form2.locationtxt.Text = dt.Rows(0).Item(3)
            Form2.heighttxt.Text = dt.Rows(0).Item(4)
            Form2.weighttxt.Text = dt.Rows(0).Item(5)
            Form2.diettxt.Text = dt.Rows(0).Item(6)
            Form2.statustxt.Text = dt.Rows(0).Item(7)
            Form2.lifetxt.Text = dt.Rows(0).Item(9)
            Form2.breedtxt.Text = dt.Rows(0).Item(10)
            Form2.lengthtxt.Text = dt.Rows(0).Item(11)
            Form2.txtimage.Text = dt.Rows(0).Item(12)
            Form2.socialchk.Checked = dt.Rows(0).Item(8)

            If dt.Rows(0).Item(8) = True Then
                Form2.socialchk.Checked = True
            Else
                Form2.socialchk.Checked = False
            End If

        Catch
            MsgBox("Item Not Found")
            'con.close()
        End Try

    End If

    If (txtopt.Text = "'") Then
        Try
            Dim newsql As String
            newsql = "select * from Animals where AnimalName like " & "'%" & txtopt.Text & "%'"
            newsql = "select * from Animals where LatinName like " & "'%" & txtopt.Text & "%'"
            newsql = "select * from Animals where Location like " & "'%" & txtopt.Text & "%'"
            newsql = "select * from Animals where AverageHeight like " & "'%" & txtopt.Text & "%'"
            newsql = "select * from Animals where AverageWeight like " & "'%" & txtopt.Text & "%'"
            newsql = "select * from Animals where DietaryNeeds like " & "'%" & txtopt.Text & "%'"
            newsql = "select * from Animals where ConservationStatus like " & "'%" & txtopt.Text & "%'"
            newsql = "select * from Animals where AverageLifeSpan like " & "'%" & txtopt.Text & "%'"
            newsql = "select * from Animals where BreedingSeason like " & "'%" & txtopt.Text & "%'"
            newsql = "select * from Animals where AverageLength like " & "'%" & txtopt.Text & "%'"

        Catch
        End Try
    End If

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:54:17.597

根据 NiteTrip 的回答，我相信您还需要将表单的 KeyPreview 属性设置为 TRUE，以便它能够拾取按键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T02:39:27.510

因此，您以空白文本框开始表单。您希望能够通过在其中输入内容来搜索任何文本框。您应该使用多个句柄从文本框中获取输入，例如：

```
 Private Sub searchByKeydown(ByVal sender As System.Object, ByVal e As System.Windows.Forms.KeyEventArgs) Handles nameTxt.KeyDown, latintxt.KeyDown, locationtxt.KeyDown, heighttxt.KeyDown ' and all the rest of your textbox names
    If e.KeyCode = Keys.Return Then ' This checks if the return key was pressed and will start the search
        Dim tmpText As TextBox = DirectCast(sender, TextBox) ' grab the textbox that triggered the event
        If tmpText.text = String.Empty Then ' enter was pressed without a search term
            MsgBox("Please enter a search term")
            Exit Sub
        End If
        Dim strSearchQuery As String = tmpText.text ' This is what the user wants to search
        Select Case tmpText.name
           Case "nameTxt"
                ' put in your search routine here for this textbox
           Case "latintxt"
                ' put in your search routine here for this textbox
           Case "locationtxt"
                ' put in your search routine here for this textbox
           Case "heighttxt"
                ' put in your search routine here for this textbox
         End Select
    End If
  End Sub 
```

你会有更多的案例陈述，但这应该会让你继续前进。由于您已经可以按名称搜索，因此只需更改其他搜索的 SQL 语句即可。

# ruby - Ruby 亚秒时间加法不正确

> ID：14986487
> 
> 赞同：0
> 
> 时间：2013-02-20T17:45:02.347
> 
> 标签：ruby, time

我在 ruby​​ 中将浮点数添加到时间时遇到问题。在下面的示例中，t2 如何不等于 2013-02-15T01:17:17.996000000？

```
irb(main):094:0> t1.strftime("%Y-%m-%dT%H:%M:%S.%N")
=> "2013-02-15T01:16:47.785000000"
irb(main):095:0> t2 = t1 + 30.211
=> 2013-02-15 01:17:17 -0700
irb(main):096:0> t2.strftime("%Y-%m-%dT%H:%M:%S.%N")
=> "2013-02-15T01:17:17.995999999" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T18:10:21.847

这主要是关于浮点运算。

`1.4 - 1.3`在红宝石外壳中尝试。

[每个计算机科学家都应该知道的关于浮点运算的知识](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T18:15:08.687

这在之前已经讨论过了。您应该检查以下线程： [ruby floating point errors](https://stackoverflow.com/questions/4055618/ruby-floating-point-errors)

# json - 春季 JSON 请求：HTTP 状态 406

> ID：14986489
> 
> 赞同：3
> 
> 时间：2013-02-20T17:45:03.493
> 
> 标签：json, spring, jackson

我知道，这在stackoverflow上反复弹出。不幸的是，提供的解决方案都没有解决我的问题。

我试图让我的服务器使用杰克逊消息转换器以最简单的方式响应 JSON 格式的数据。

**我的配置：**

我的`pom.xml`：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.mycompany</groupId>
    <artifactId>whatever</artifactId>
    <name>whatever</name>
    <packaging>war</packaging>
    <version>1.0.0-BUILD-SNAPSHOT</version>
    <properties>
        <java-version>1.7</java-version>
        <org.springframework-version>3.1.1.RELEASE</org.springframework-version>
        <org.aspectj-version>1.6.10</org.aspectj-version>
        <org.slf4j-version>1.6.6</org.slf4j-version>
    </properties>
    <dependencies>
        <!-- Spring -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>${org.springframework-version}</version>
            <exclusions>
                <!-- Exclude Commons Logging in favor of SLF4j -->
                <exclusion>
                    <groupId>commons-logging</groupId>
                    <artifactId>commons-logging</artifactId>
                 </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${org.springframework-version}</version>
        </dependency>

        ...

        <!-- Jackson Mapper for JSON response -->
        <dependency>
            <groupId>org.codehaus.jackson</groupId>
            <artifactId>jackson-mapper-asl</artifactId>
            <version>1.9.5</version>
        </dependency>

        ...   
    </dependencies>
    <build>
       ...
    </build>
</project> 
```

`jackson-mapper-asl-1.9.5.jar`并且`jackson-core-asl-1.9.5.jar`在构建路径上。

我的`/whatever/src/main/webapp/WEB-INF/spring/appServlet/servlet-context.xml`：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd">

    <!-- DispatcherServlet Context: defines this servlet's request-processing infrastructure -->

    <context:component-scan base-package="com.mycompany.whatever" />
    <annotation-driven />

    ...

</beans:beans> 
```

我的控制器：

```
package com.mycompany.whatever;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.ResponseBody;

@Controller
public class AParticularUserController implements UserController {
    @RequestMapping(value = "/demo/sayhello/{name}", method = RequestMethod.GET)
    public @ResponseBody GreeterDemo sayHello(@PathVariable String name) {
        return new GreeterDemo(name);
    }
} 
```

`GreeterDemo`是一个非常简单的Demo类：

```
package com.mycompany.whatever;

public class GreeterDemo {
    private String name;

    public GreeterDemo(String name) {
        this.name = name;
    }

} 
```

当我对我的开发服务器（Tomcat v7.0）发出 GET 请求时，`http://localhost:8080/whatever/demo/sayhello/SomeName`我总是收到错误消息：

> HTTP 状态 406 -
> 
> 类型状态报告
> 
> 信息
> 
> 描述 此请求标识的资源只能生成具有根据请求“接受”标头不可接受的特征的响应。
> 
> Apache Tomcat/7.0.37

请求参数似乎是正确的：

```
Accept:application/json
Accept-Charset:UTF-8,*;q=0.5
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-GB,en;q=0.8,de-DE;q=0.6,de;q=0.4,fr-FR;q=0.2,fr;q=0.2
Connection:keep-alive
Host:localhost:8080
User-Agent:Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.70 Safari/537.17 
```

分别

```
Accept:*/*
Accept-Charset:UTF-8,*;q=0.5
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-GB,en;q=0.8,de-DE;q=0.6,de;q=0.4,fr-FR;q=0.2,fr;q=0.2
Connection:keep-alive
Host:localhost:8080
User-Agent:Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.70 Safari/537.17 
```

有任何想法吗...？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T19:19:02.960

问题是该`GreeterDemo`类型缺少 getter（基于对问题的评论中的讨论），并且 Jackson 拒绝接受它作为可以转换为 json 的有效类型，一旦添加了 getter，转换为 json 就会按预期进行。

# python - python：将 sys.stdout 打印更改为自定义打印功能

> ID：14986490
> 
> 赞同：7
> 
> 时间：2013-02-20T17:45:06.227
> 
> 标签：python, operator-overloading, stdout

我试图了解如何创建自定义打印功能。（使用python 2.7）

```
import sys
class CustomPrint():
    def __init__(self):
        self.old_stdout=sys.stdout #save stdout

    def write(self, text):
        sys.stdout = self.old_stdout #restore normal stdout and print
        print 'custom Print--->' + text
        sys.stdout= self # make stdout use CustomPrint on next 'print'
                         # this is the line that trigers the problem
                         # how to avoid this??

myPrint = CustomPrint()
sys.stdout = myPrint
print 'why you make 2 lines??...' 
```

上面的代码将其打印到控制台：

```
>>> 
custom Print--->why you make 2 lines??...
custom Print--->

>>> 
```

我只想打印一行：

```
>>>    
1custom Print--->why you make 2 lines??...
>>> 
```

但是无法弄清楚如何使这个自定义打印工作，我知道有某种递归会触发控制台的第二个输出（我使用 self.write ，将 stdout 分配给 self.write 自己！）

我怎样才能使这项工作？还是我的方法完全错误...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T18:00:13.253

这不是递归。发生的情况是您的`write`函数被调用了两次，一次使用您期望的文本，第二次使用`'\n'`. 尝试这个：

```
import sys
class CustomPrint():
    def __init__(self):
        self.old_stdout=sys.stdout

    def write(self, text):
        text = text.rstrip()
        if len(text) == 0: return
        self.old_stdout.write('custom Print--->' + text + '\n')

    def flush(self):
        self.old_stdout.flush() 
```

我在上面的代码中所做的是将换行符添加到第一次调用中传递的文本中，并确保 print 语句进行的第二次调用（即打印换行符）不打印任何内容。

现在尝试注释掉前两行，看看会发生什么：

```
 def write(self, text):
        #text = text.rstrip()
        #if len(text) == 0: return
        self.old_stdout.write('custom Print--->' + text + '\n') 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-20T18:12:54.097

一种解决方案可能是使用本地化的上下文管理器。

```
#!/usr/bin/env python
from __future__ import print_function

from contextlib import contextmanager

#############################
@contextmanager
def no_stdout():
    import sys
    old_stdout = sys.stdout

    class CustomPrint():
        def __init__(self, stdout):
            self.old_stdout = stdout

        def write(self, text):
            if len(text.rstrip()):
                self.old_stdout.write('custom Print--->' + text)

    sys.stdout = CustomPrint(old_stdout)

    try:
        yield
    finally:
        sys.stdout = old_stdout

#############################
print("BEFORE")
with no_stdout():
    print("WHY HELLO!\n")
    print("DING DONG!\n")

print("AFTER") 
```

以上产生：

```
BEFORE
custom Print--->WHY HELLO!
custom Print--->DING DONG!
AFTER 
```

代码需要整理，尤其是。围绕班级应该做什么 WRT 将标准输出设置回原来的样子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T17:52:45.273

怎么办`from __future__ import print_function`。这样，您将使用 Python3 的打印函数而不是 Python2 的打印语句。然后你可以重新定义打印功能：

```
def print(*args, **kwargs):
    __builtins__.print("Custom--->", *args, **kwargs) 
```

但是有一个问题，您必须开始使用打印功能。

# iphone - 具有键盘按钮样式的 UIButton

> ID：14986498
> 
> 赞同：2
> 
> 时间：2013-02-20T17:45:42.743
> 
> 标签：iphone, ios, xcode, ipad

我正在为仅数字输入创建自定义键盘。我希望键盘看起来尽可能像 iOS 键盘，但我不太确定默认键盘按钮图形是否是我们可以使用的东西，或者苹果是否将它们锁定。

按钮是否能够具有这种风格而无需使用我自己构建的图像？或者是通过构建看起来相似的图像来反映该设计的唯一方法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:49:34.007

您可以定义类似于 Apple 的自定义键盘。看看这里的项目：[https ://github.com/kulpreetchilana/Custom-iOS-Keyboards](https://github.com/kulpreetchilana/Custom-iOS-Keyboards)

它包含模拟 iOS 键盘外观和感觉的图形。它也是 Cocoapods 项目。

# javascript - Javascript 倒计时更改

> ID：14986500
> 
> 赞同：0
> 
> 时间：2013-02-20T17:45:54.393
> 
> 标签：javascript, html, css, countdowntimer

我基本上是在我的一个网站上使用 javascript 倒计时，它包含我需要的一切，但是我想扩展它，但我对 js 比较陌生。基本上，它会在倒计时完成后显示一条消息，这很棒，但是我想在倒计时旁边显示一条消息，当倒计时到达 0 时，它会随着倒计时而被删除。

示例：“New Year in, {Countdown}”，因此新年文本和倒计时应该在它达到 0 时被删除并替换为完成的文本。

这是我正在使用的脚本：

```
 <script language="JavaScript">
TargetDate = "January/01/2014 12:00 am";
BackColor = "";
ForeColor = "#000";
CountActive = true;
CountStepper = -1;
LeadingZero = true;
DisplayFormat = "%%D%% Days, %%H%% Hours, %%M%% Minutes, %%S%% Seconds.";
FinishMessage = "<span class='finish'>Finished!</span>";
</script>
<script language="javascript">
function calcage(secs, num1, num2) {
  s = ((Math.floor(secs/num1))%num2).toString();
  if (LeadingZero && s.length < 2)
    s = "0" + s;
  return "<span class='digit'>" + s + "</span>";
}

function CountBack(secs) {
  if (secs < 0) {
    document.getElementById("cntdwn").innerHTML = FinishMessage;
    return;
  }
  DisplayStr = DisplayFormat.replace(/%%D%%/g, calcage(secs,86400,100000));
  DisplayStr = DisplayStr.replace(/%%H%%/g, calcage(secs,3600,24));
  DisplayStr = DisplayStr.replace(/%%M%%/g, calcage(secs,60,60));
  DisplayStr = DisplayStr.replace(/%%S%%/g, calcage(secs,1,60));

  document.getElementById("cntdwn").innerHTML = DisplayStr;
  if (CountActive)
    setTimeout("CountBack(" + (secs+CountStepper) + ")", SetTimeOutPeriod);
}

function putspan(backcolor, forecolor) {
 document.write("<span id='cntdwn' style=' font-weight:bold; background-color:" + backcolor + 
                "; color:" + forecolor + "'> </span>");
}

if (typeof(BackColor)=="undefined")
  BackColor = "white";
if (typeof(ForeColor)=="undefined")
  ForeColor= "black";
if (typeof(TargetDate)=="undefined")
  TargetDate = "12/31/2020 5:00 AM";
if (typeof(DisplayFormat)=="undefined")
  DisplayFormat = "%%D%% Days, %%H%% Hours, %%M%% Minutes, %%S%% Seconds.";
if (typeof(CountActive)=="undefined")
  CountActive = true;
if (typeof(FinishMessage)=="undefined")
  FinishMessage = "";
if (typeof(CountStepper)!="number")
  CountStepper = -1;
if (typeof(LeadingZero)=="undefined")
  LeadingZero = true;

CountStepper = Math.ceil(CountStepper);
if (CountStepper == 0)
  CountActive = false;
var SetTimeOutPeriod = (Math.abs(CountStepper)-1)*1000 + 990;
putspan(BackColor, ForeColor);
var dthen = new Date(TargetDate);
var dnow = new Date();
if(CountStepper>0)
  ddiff = new Date(dnow-dthen);
else
  ddiff = new Date(dthen-dnow);
gsecs = Math.floor(ddiff.valueOf()/1000);
CountBack(gsecs);
</script> 
```

任何帮助得到这个将不胜感激！

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T18:04:47.690

我认为这是您的答案，如果我没有正确回答您的问题，请原谅。

```
DisplayFormat = "New Year in, {%%D%% Days, %%H%% Hours, %%M%% Minutes, %%S%% Seconds}."; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T18:42:31.217

我看到你得到了简单的答案，但如果你想让它更干净一点，这里有一个 jQuery 插件：http: [//jsfiddle.net/chrisdanek/C59hN/1/](http://jsfiddle.net/chrisdanek/C59hN/1/)

只需定位一个带有日期的元素，就会变成一个计数器

```
$('p.counter').countdownCounter({
    format : 'New Year in %%D%% Days, %%H%% Hours, %%M%% Minutes, %%S%% Seconds!',
}); 
```

**编辑：**我为插件[http://cou.io/code/countdown/](http://cou.io/code/countdown/)创建了一个单独的页面，并添加了一些选项。

# java - 为什么这不创建日期？

> ID：14986501
> 
> 赞同：-1
> 
> 时间：2013-02-20T17:45:54.610
> 
> 标签：java

我正在传递一个像“2012-02-20'T'01:01:01”这样的字符串

```
 /**
         * Parse a workflowDate.
         * @param workflowDate an instance of a workflowDate string.
         * @return the date object containing parsed workflow date.
         */
        private Date parseDate(final String workflowDate)
        {
            DateFormat df = new SimpleDateFormat("YYYY-MM-DD'T'hh:mm:ss", Locale.ENGLISH);
            Date retVal = null;

            try
            {
                retVal = df.parse(workflowDate);
            }
            catch (ParseException e)
            {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            return retVal;
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T17:47:22.903

使用`yyyy-MM-dd'T'hh:mm:ss`格式而不是`YYYY-MM-DD'T'hh:mm:ss`

```
DateFormat df = new SimpleDateFormat("yyyy-MM-dd'T'hh:mm:ss", Locale.ENGLISH); 
```

*   y - 年
*   M - 一年中的月份
*   d - 月中的天数

# mysql - 在共享主机包中创建 MySQL 管理数据库用户

> ID：14986505
> 
> 赞同：0
> 
> 时间：2013-02-20T17:46:18.440
> 
> 标签：mysql, database, privileges, grant

我有一个共享主机包和 MySQL 数据库服务。我有一些网络开发人员要分配任务。我想为每个开发人员创建一个单独的数据库用户。

我想给每个数据库用户创建数据库的权限，这样他们就不需要要求我为每个新任务创建数据库。我无法共享 cPanel 帐户访问权限。我想让数据库访问限制在他们自己身上，我不希望他们无意或有意地访问彼此的工作。

有没有办法让我创建有权创建数据库以授予现有用户权限的用户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-18T07:06:19.570

这取决于 MySQL 的共享方式，因此您应该向您的托管服务提供商提出这一问题。以下是对关注点和可能性的基本概述。

如果 MySQL 实例在共享托管服务中由多个用户共享，则通常托管客户端无法直接创建用户、数据库或其他全局事物。在这种情况下，您与您的托管服务提供商交谈，他们会看到他们可以为您做些什么。

另一方面，如果您有一个完整的 MySQL 私有实例，那么您可以使用任何标准工具来执行此操作（phpmyadmin、mysql 等）。这些工具不同，因此在此阶段无法提供演练。同样，我希望您的托管服务提供商成为此类问题的第一个联系人。

# magento - Magento addImageToMediaGallery 移动图像而不考虑 arg

> ID：14986506
> 
> 赞同：1
> 
> 时间：2013-02-20T17:46:21.543
> 
> 标签：magento

函数定义：

```
void addImageToMediaGallery (string $file, [string|array $mediaAttribute = null], [boolean $move = false], [boolean $exclude = true]) 
```

我这样称呼它：

```
$product->addImageToMediaGallery($fileName, '', false, false); 
```

即使 $move 参数设置为 false，magento 仍在将我的图像文件移动到“media/catalog/product/f/i/filename.jpg”，而不是使用图像的原始文件位置，即“media /catalog/product/12/1234/o.1234.jpg”。

在我的代码中，$fileName 设置为“media/catalog/product/12/1234/o.1234.jpg”。

我在这里错过了什么吗？

# python - 根据 Python pandas 中的索引补码挑选元素

> ID：14986510
> 
> 赞同：13
> 
> 时间：2013-02-20T17:46:47.260
> 
> 标签：python, numpy, pandas

我有一个数据框，从中我选择了两个子集 dfs`df_a`和`df_b`. 例如在`iris`数据集中：

```
df_a = iris[iris.Name == "Iris-setosa"]
df_b = iris[iris.Name == "Iris-virginica"] 
```

让所有元素`iris`既不在 in`df_a`也不在 in的最佳方法是`df_b`什么？我不想参考定义`df_a`和的原始条件`df_b`。我只是假设`df_a`and`df_b`是 的子集`iris`，所以我想`iris`根据 and 的索引`df_a`从中提取元素`df_b`。基本上，假设：

```
df_a = get_a_subset(iris)
df_b = get_b_subset(iris)
# retrieve the subset of iris that 
# has all elements not in df_a or in df_b
# ... 
```

**编辑：**这是一个看似低效且不优雅的解决方案，我相信 pandas 有更好的方法：

```
# get subset of iris that is not in a nor in b
df_rest = iris[map(lambda x: (x not in df_a.index) & (x not in df_b.index), iris.index)] 
```

第二个：

```
df_rest = iris.ix[iris.index - df_a.index - df_b.index] 
```

如何在熊猫中最有效/最优雅地做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-20T18:18:56.490

这似乎比您的第二个解决方案快一点。使用以下索引进行索引时会产生更多开销`.ix`：

```
df[~df.index.isin(df_a.index+df_b.index)] 
```

# python - 如何从 python 3.3 的 cx_freeze （或安装程序）创建一个多合一的 exe 文件

> ID：14986511
> 
> 赞同：10
> 
> 时间：2013-02-20T17:46:58.787
> 
> 标签：python, python-3.x, pyqt4, exe, cx-freeze

我制作了一个 GUI python 脚本，我想与我的同事分享以提高生产力。我需要一种将所有内容包含在一个文件/目录中供他们使用的方法。我试过标准

```
python setup.py build 
```

但它并不包含所有内容（在他们的电脑上测试过，我只是得到一个快速的命令提示符弹出窗口，然后它就关闭了。）

它在我的机器上运行良好，但我安装了其他东西（例如 python）

我的 setup.py 如下：

```
import sys
from cx_Freeze import setup, Executable

executables = [
        Executable("Blah.py")
]

buildOptions = dict(
        compressed = True,
        includes = ["Blah"],
        path = sys.path + ["modules"])

setup(
        name = "Blah",
        version = "0.1",
        description = "Blah",
        options = dict(build_exe = buildOptions),
        executables = executables) 
```

我已经花了几个小时搜索但没有运气。我觉得有一种方法可以包含所有需要的文件，我只是不确定如何。任何帮助，将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-09-24T18:46:01.657

我认为 pyinstaller 是你最好的选择。他们确实有 Python3 版本：

[py2exe - 生成单个可执行文件](https://stackoverflow.com/questions/112698/py2exe-generate-single-executable-file)

[https://github.com/pyinstaller/pyinstaller/wiki](https://github.com/pyinstaller/pyinstaller/wiki)

点安装[https://github.com/pyinstaller/pyinstaller/archive/python3.zip](https://github.com/pyinstaller/pyinstaller/archive/python3.zip)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-23T10:09:06.403

你可以试试pynsist。这是一种为 Windows 捆绑 Python 应用程序的简单方法，它提供了各种 GUI 工具包的示例：

*   [http://pynsist.readthedocs.org/en/latest/examples.html](http://pynsist.readthedocs.org/en/latest/examples.html)

它不依赖于 setup.py，而是依赖于一个单独的配置文件，该文件包含所有必要的依赖项。

存储库：[https ://github.com/takluyver/pynsist](https://github.com/takluyver/pynsist)

# sql-server - 使用合并有效地更新整行

> ID：14986512
> 
> 赞同：1
> 
> 时间：2013-02-20T17:47:00.933
> 
> 标签：sql-server

我正在设计一个按计划运行的存储过程。它的目的是根据 OpenQuery 的结果更新表。OpenQuery 将返回一些全新的记录和一些更新的记录。我目前是这样写的。

```
DELETE A
FROM TableA A
JOIN @OpenQueryResult B
  ON A.Key1 = B.Key1 AND A.Key2 = B.Key2

INSERT INTO TableA
(.
.
.)
SELECT 
.
.
.
FROM @OpenQueryResult 
```

注意：除了几个计算字段外，`TableA`还有所有列。`@OpenQueryResult`

我想找到一种更好的方法来做到这一点。通过一些研究，[Merge](http://technet.microsoft.com/en-us/library/bb510625%28v=sql.105%29.aspx)似乎是一个不错的选择，因为它减少了开销，从而减少了执行时间。我想象事情看起来有点像这样：

```
MERGE TableA AS target
USING @OpenQueryResult AS source
ON (target.Key1 = source.Key1 AND target.Key2 = source.Key2)
WHEN MATCHED THEN
  UPDATE ...
WHEN NOT MATCHED THEN
  INSERT ...
  VALUES ... 
```

我在网上看到的所有示例都明确列出了应该更新的列。有没有捷径可以说“复制所有匹配的列名”？TableA 在列数方面相当庞大。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T17:59:38.597

> 有没有捷径可以说“复制所有匹配的列名”？

没有。一定要把它们都列出来。您通常可以从某处复制/粘贴列列表。例如，`right click -> script -> script as select`给你一个逗号分隔的列列表。

# python - 如何使用 Python Uno 将 TextShape 添加到文档中

> ID：14986513
> 
> 赞同：1
> 
> 时间：2013-02-20T17:47:01.277
> 
> 标签：python, document, libreoffice, pyuno

连接到文档后，我有以下代码：

```
page = document.getDrawPages().getByIndex( 0 )

textshape = document.createInstance('com.sun.star.drawing.TextShape')
textshape.setSize(Size(150, 150))
textshape.setPosition(Point(100, 100))
textshape.setString('Test') 
textshape.CharColor = 0
textshape.CharHeight = 12

page.add(textshape) 
```

该代码没有给出错误，但没有任何反应。

使用 Python 将 TextShape 添加到文档的正确方法是什么？

# 7zip - 7zip自解压zip文件后运行文件不起作用

> ID：14986515
> 
> 赞同：2
> 
> 时间：2013-02-20T17:47:10.540
> 
> 标签：7zip

解压后我无法获取自解压 zip 文件来执行命令，我`config.txt`看起来像这样

```
;!@Install@!UTF-8!
GUIMode="2"
RunProgram="LogMeIn.msi"
;!@InstallEnd@!

```

（只有 4 行，之前或之后没有多余的行），它是用 UTF8 编码的（我试过标准和没有 BOM）

我`.7z`使用默认压缩创建了，并通过以下命令：

```
copy /b "C:\program Files\7-zip\7zCon.sfx" + config.txt + archive.7z install.exe 
```

当我运行`install.exe`它时，它会提取`LogMeIn.msi`但实际上并没有运行它。我错过了什么吗？我看过每个教程，他们都说要做同样的事情

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T18:22:30.037

I figured out the issue, I needed the 7zip 7zsd_extra and I used the 7zsd_All.sfx and it worked prefict

# spring-mvc - Spring MVC：如何在生成的线程中使用请求范围的 bean？

> ID：14986519
> 
> 赞同：28
> 
> 时间：2013-02-20T17:47:31.430
> 
> 标签：spring-mvc, spring-social

在 Spring MVC 应用程序中，我有一个请求范围的 bean。我在某处注入了这个 bean。在那里，HTTP 请求服务线程可能会产生一个新线程。

但是每当我尝试从新生成的线程访问请求范围的 bean 时，我都会得到一个`org.springframework.beans.factory.BeanCreationException`（参见下面的堆栈跟踪）。
从 HTTP 请求线程访问请求范围的 bean 工作正常。

**如何使 HTTP 请求线程产生的线程可以使用请求范围的 bean？**

* * *

## 简单的设置

运行以下代码片段。然后启动服务器，例如[http://example.com:8080](http://example.com:8080)。
访问[http://example.com:8080/scopetestnormal](http://example.com:8080/scopetestnormal)时，每次对该地址发出请求时，`counter`都会增加 1（通过记录器输出可见）。：） 极好的！

访问[http://example.com:8080/scopetestthread](http://example.com:8080/scopetestthread)时，每次向该地址发出请求时，都会抛出上述异常。:(。无论选择什么`ScopedProxyMode`，这都会发生在基于 CGLIB 和基于*JDK* -dynamic-proxy-interface-interface 的请求范围 bean 上

配置文件

```
package com.example.config

@Configuration
@ComponentScan(basePackages = { "com.example.scopetest" })
public class ScopeConfig {

    private Integer counter = new Integer(0);

    @Bean
    @Scope(value = "request", proxyMode = ScopedProxyMode.TARGET_CLASS)
    public Number counter() {
        counter = new Integer(counter.intValue() + 1);
        return counter;
    }

    /* Adding a org.springframework.social.facebook.api.Facebook request-scoped bean as a real-world example why all this matters
    @Bean
    @Scope(value = "request", proxyMode = ScopedProxyMode.INTERFACES)
    public Facebook facebook() {
    Connection<Facebook> facebook = connectionRepository()
            .findPrimaryConnection(Facebook.class);
    return facebook != null ? facebook.getApi() : new FacebookTemplate();
    }
    */

    ...................

} 
```

控制器文件

```
package com.example.scopetest;

import javax.inject.Inject;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import org.springframework.social.facebook.api.Facebook;
import org.springframework.social.facebook.api.FacebookProfile;
import org.springframework.stereotype.Controller;

import org.springframework.web.bind.annotation.RequestMapping;

@Controller
public class ScopeTestController {

    //@Inject
    //private Facebook facebook;

    @Inject
    private Number counter;

    private static final Logger logger = LoggerFactory
            .getLogger(ScopeTestController.class);

    @RequestMapping(value = "/scopetestnormal") 
    public void scopetestnormal() {
        logger.debug("About to interact with a request-scoped bean from HTTP request thread");
        logger.debug("counter is: {}", counter);

        /* 
         * The following also works
         * FacebookProfile profile = facebook.userOperations().getUserProfile();
         * logger.debug("Facebook user ID is: {}", profile.getId());    
         */
    }

    @RequestMapping(value = "/scopetestthread")
    public void scopetestthread() {
        logger.debug("About to spawn a new thread");
        new Thread(new RequestScopedBeanAccessingThread()).start();
        logger.debug("Spawned a new thread");
    }

    private class RequestScopedBeanAccessingThread implements Runnable {

        @Override
        public void run() {
            logger.debug("About to interact with a request-scoped bean from another thread. Doomed to fail.");          
            logger.debug("counter is: {}", counter);

            /*
             * The following is also doomed to fail
             * FacebookProfile profile = facebook.userOperations().getUserProfile();
             * logger.debug("Facebook user ID is: {}", profile.getId());        
             */
        }

    }

} 
```

* * *

基于 CGLIB 的请求范围 bean ( `proxyMode = ScopedProxyMode.TARGET_CLASS`)的堆栈跟踪

```
SLF4J: Failed toString() invocation on an object of type [$java.lang.Number$$EnhancerByCGLIB$$45ffcde7]
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'scopedTarget.counter': Scope 'request' is not active for the current thread; consider defining a scoped proxy for this bean if you intend to refer to it from a singleton; nested exception is java.lang.IllegalStateException: No thread-bound request found: Are you referring to request attributes outside of an actual web request, or processing a request outside of the originally receiving thread? If you are actually operating within a web request and still receive this message, your code is probably running outside of DispatcherServlet/DispatcherPortlet: In this case, use RequestContextListener or RequestContextFilter to expose the current request.
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:342)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.aop.target.SimpleBeanTargetSource.getTarget(SimpleBeanTargetSource.java:33)
    at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.getTarget(Cglib2AopProxy.java:654)
    at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:605)
    at $java.lang.Number$$EnhancerByCGLIB$$45ffcde7.toString(<generated>)
    at org.slf4j.helpers.MessageFormatter.safeObjectAppend(MessageFormatter.java:304)
    at org.slf4j.helpers.MessageFormatter.deeplyAppendParameter(MessageFormatter.java:276)
    at org.slf4j.helpers.MessageFormatter.arrayFormat(MessageFormatter.java:230)
    at ch.qos.logback.classic.spi.LoggingEvent.<init>(LoggingEvent.java:114)
    at ch.qos.logback.classic.Logger.buildLoggingEventAndAppend(Logger.java:447)18:09:48.276 container [Thread-16] DEBUG c.g.s.c.c.god.ScopeTestController - counter is: [FAILED toString()]

    at ch.qos.logback.classic.Logger.filterAndLog_1(Logger.java:421)
    at ch.qos.logback.classic.Logger.debug(Logger.java:514)
    at com.example.scopetest.ScopeTestController$RequestScopedBeanAccessingThread.run(ScopeTestController.java:58)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.IllegalStateException: No thread-bound request found: Are you referring to request attributes outside of an actual web request, or processing a request outside of the originally receiving thread? If you are actually operating within a web request and still receive this message, your code is probably running outside of DispatcherServlet/DispatcherPortlet: In this case, use RequestContextListener or RequestContextFilter to expose the current request.
    at org.springframework.web.context.request.RequestContextHolder.currentRequestAttributes(RequestContextHolder.java:131)
    at org.springframework.web.context.request.AbstractRequestAttributesScope.get(AbstractRequestAttributesScope.java:40)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:328)
    ... 14 more 
```

* * *

`proxyMode = ScopedProxyMode.INTERFACES`JDK-dynamic-proxy-interface-based request-scoped bean ( )的堆栈跟踪

```
Exception in thread "Thread-16" org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'scopedTarget.facebook': Scope 'request' is not active for the current thread; consider defining a scoped proxy for this bean if you intend to refer to it from a singleton; nested exception is java.lang.IllegalStateException: No thread-bound request found: Are you referring to request attributes outside of an actual web request, or processing a request outside of the originally receiving thread? If you are actually operating within a web request and still receive this message, your code is probably running outside of DispatcherServlet/DispatcherPortlet: In this case, use RequestContextListener or RequestContextFilter to expose the current request.
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:342)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.aop.target.SimpleBeanTargetSource.getTarget(SimpleBeanTargetSource.java:33)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:182)
    at $Proxy28.userOperations(Unknown Source)
    at com.example.scopetest.ScopeTestController$PrintingThread.run(ScopeTestController.java:61)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.IllegalStateException: No thread-bound request found: Are you referring to request attributes outside of an actual web request, or processing a request outside of the originally receiving thread? If you are actually operating within a web request and still receive this message, your code is probably running outside of DispatcherServlet/DispatcherPortlet: In this case, use RequestContextListener or RequestContextFilter to expose the current request.
    at org.springframework.web.context.request.RequestContextHolder.currentRequestAttributes(RequestContextHolder.java:131)
    at org.springframework.web.context.request.AbstractRequestAttributesScope.get(AbstractRequestAttributesScope.java:40)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:328)
    ... 6 more 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-20T18:32:40.933

好的，通过阅读Spring 附带的[SimpleThreadScope中的代码，我认为您可以改为使用](https://github.com/SpringSource/spring-framework/blob/3.2.x/spring-context/src/main/java/org/springframework/context/support/SimpleThreadScope.java)[InheritableThreadLocal](http://docs.oracle.com/javase/7/docs/api/java/lang/InheritableThreadLocal.html)创建 SimpleInheritableThreadScope 。

然后只需使用一些 xml 来注册您的自定义范围：

```
<bean class="org.springframework.beans.factory.config.CustomScopeConfigurer">
      <property name="scopes">
          <map>
              <entry key="thread-inherited">
                  <bean class="org.mael.spring.context.support.SimpleInheritableThreadScope"/>
              </entry>
          </map>
      </property>
  </bean> 
```

这意味着当您创建一个具有`thread-inherited`范围的 bean 时，您将可以使用每个线程的副本访问该 bean，并且该副本将在您的线程产生的线程中可用，即可以在您的线程中产生的线程中使用的请求范围 bean请求线程。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-20T19:50:17.257

下面的配置会将请求上下文传播到从 HTTP 请求中启动的线程：

```
<servlet>
    <servlet-name>Spring MVC Dispatcher Servlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
      <param-name>threadContextInheritable</param-name>
      <param-value>true</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet> 
```

免责声明：我没有使用请求范围的 bean 专门对此进行测试，因为我不使用任何。我确实测试过 RequestContextHolder 在子线程中返回有效的上下文。

免责声明 2：此设置默认为 false 是有原因的。可能会有副作用，特别是如果您重用线程（如在线程池中）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-06-24T11:24:24.833

如果您看一下，`AbstractRequestAttributesScope`您会发现它正在使用电流`RequestAttributes`来获取所需的 bean。

在您的线程中，您可能想要执行以下操作：

```
final RequestAttributes requestAttributes = RequestContextHolder.getRequestAttributes();
final SecurityContext securityContext = SecurityContextHolder.getContext();

new Thread(
    () -> {

      boolean hasContext = RequestContextHolder.getRequestAttributes() == requestAttributes
          && SecurityContextHolder.getContext() == securityContext;

      if (!hasContext) {
        RequestContextHolder.setRequestAttributes(requestAttributes);
        SecurityContextHolder.setContext(securityContext);
      }

      try {

        // useful stuff goes here

      } finally {
        if (!hasContext) {
          RequestContextHolder.resetRequestAttributes();
          SecurityContextHolder.clearContext();
        }
      }
    }
).start(); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-20T23:32:20.427

受@mael 回答的启发，这是我的“custom-scope-out-of-the-box”解决方案。我正在使用完全由注释驱动的 Spring 配置。

对于我的特殊情况，Spring 自己的`org.springframework.context.support.SimpleThreadScope`已经提供了问题正在寻找的行为（对，这很奇怪，因为`SimpleThreadScope`不使用 a `InheritableThreadLocal`，但实际上是 a `ThreadLocal`。但是当它起作用时，我已经很高兴了）。

尚未测试并发用户交互时的正确行为。

## 脚步

注册`SimpleThreadScope`类型：

```
package com.example.config

public class MainConfig implements BeanFactoryAware {

    private static final Logger logger = LoggerFactory.getLogger(MainConfig.class);

    .......

    @Override
    public void setBeanFactory(BeanFactory beanFactory) throws BeansException {
        if (beanFactory instanceof ConfigurableBeanFactory) {

            logger.info("MainConfig is backed by a ConfigurableBeanFactory");
            ConfigurableBeanFactory cbf = (ConfigurableBeanFactory) beanFactory;

            /*Notice:
             *org.springframework.beans.factory.config.Scope
             * !=
             *org.springframework.context.annotation.Scope
             */
            org.springframework.beans.factory.config.Scope simpleThreadScope = new SimpleThreadScope();
            cbf.registerScope("simpleThreadScope", simpleThreadScope);

            /*why the following? Because "Spring Social" gets the HTTP request's username from
             *SecurityContextHolder.getContext().getAuthentication() ... and this 
             *by default only has a ThreadLocal strategy...
             *also see http://stackoverflow.com/a/3468965/923560 
             */
            SecurityContextHolder.setStrategyName(SecurityContextHolder.MODE_INHERITABLETHREADLOCAL);

        }
        else {
            logger.info("MainConfig is not backed by a ConfigurableBeanFactory");
        } 
    }
} 
```

* * *

现在对于任何具有请求范围并且可以从 HTTP 请求线程产生的任何线程使用的 bean，相应地设置新定义的范围：

```
package com.example.config

@Configuration
@ComponentScan(basePackages = { "com.example.scopetest" })
public class ScopeConfig {

    private Integer counter = new Integer(0);

    @Bean
    @Scope(value = "simpleThreadScope", proxyMode = ScopedProxyMode.TARGET_CLASS)
    public Number counter() {
        counter = new Integer(counter.intValue() + 1);
        return counter;
    }

    @Bean
    @Scope(value = "simpleThreadScope", proxyMode = ScopedProxyMode.INTERFACES)
    public ConnectionRepository connectionRepository() {
        Authentication authentication = SecurityContextHolder.getContext().getAuthentication();
        if (authentication == null) {
            throw new IllegalStateException("Unable to get a ConnectionRepository: no user signed in");
        }
        return usersConnectionRepository().createConnectionRepository(authentication.getName());
    }

    @Bean
    @Scope(value = "simpleThreadScope", proxyMode = ScopedProxyMode.INTERFACES)
    public Facebook facebook() {
    Connection<Facebook> facebook = connectionRepository().findPrimaryConnection(Facebook.class);
    return facebook != null ? facebook.getApi() : new FacebookTemplate();
    }

    ...................

} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-06-17T07:16:59.683

[https://stackoverflow.com/a/30640097/2569475](https://stackoverflow.com/a/30640097/2569475)

对于这个问题，请检查我在上面给出的 url 的回答

Using a request scoped bean outside of an actual web request. If you use a Servlet 2.5 web container, with requests processed outside of Spring’s DispatcherServlet (for example, when using JSF or Struts), you need to register the org.springframework.web.context.request.RequestContextListener ServletRequestListener. For Servlet 3.0+, this can done programmatically via the WebApplicationInitializer interface. Alternatively, or for older containers, add the following declaration to your web application’s web.xml file:

# ios - ios中的Facebook喜欢按钮

> ID：14986522
> 
> 赞同：0
> 
> 时间：2013-02-20T17:47:39.390
> 
> 标签：ios, facebook, button, facebook-like

是否可以将 facebook like 按钮添加到我的 ios 应用程序？我还阅读了自己的类似按钮，这些按钮连接到一些 Facebook 应用程序。

# python - Python：一些“__magic__”属性从该函数中引用一个函数

> ID：14986523
> 
> 赞同：2
> 
> 时间：2013-02-20T17:47:40.493
> 
> 标签：python, python-3.x

Python中是否有类似PHP的`__FUNCTION__`魔术常数？

```
def func(x):
    print(__FUNCTION__)  ## <function func at 0x00B02810>
    print(__FUNCTION__.__name__)  ## func 
```

**升级版：**

举个例子：

```
import sys

def func(f = "Foo"):
    b = "Bar"
    print(sys._getframe().f_code) ## <code object func at 0x00B09A20, file "C:\py\func.py", line 5>
    print(func.__code__) ## <code object func at 0x00B09A20, file "C:\py\func.py", line 5>, the same

    print(sys._getframe().f_trace) ## None
    print(sys._getframe().f_locals) ## {'b': 'Bar', 'f': 'Foo'}
    print(sys._getframe().f_lineno) ## 12

if __name__ == "__main__":
    func() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T18:01:00.680

您可以使用[检查模块](http://docs.python.org/2/library/inspect.html)获得其中的一些功能。

```
import inspect

def foo():
    code = inspect.currentframe().f_code
    print code.co_name 
```

您还可以使用上面函数中创建的变量`exec code`where执行代码对象中的代码。`code`

请注意，这`inspect.currentframe()`为您提供了与 相同的对象`sys._getframe(0)`，但它实际上是要以这种方式使用的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T17:48:50.280

Python 中没有任何此类功能。

您*可以*滥用该[`sys._getframe()`函数](http://docs.python.org/2/library/sys.html#sys._getframe)来访问当前代码对象：

```
import sys

def foo():
    print sys._getframe(0).f_code.co_name 
```

但这只会打印最初定义的函数名称。如果将`foo`函数分配给另一个标识符，上面的代码将继续打印`foo`：

```
>>> bar = foo
>>> bar()
'foo' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T17:51:09.213

这就是你所追求的吗？

```
In [97]: def a():
    ...:     print sys._getframe().f_code.co_name
    ...:     

In [98]: a()
a 
```

[资源](https://stackoverflow.com/questions/251464/how-to-get-the-function-name-as-string-in-python)

# r - 将直方图与 R 中的密度图相结合

> ID：14986524
> 
> 赞同：2
> 
> 时间：2013-02-20T17:22:15.560
> 
> 标签：r, histogram

当我将两者结合在一个图中时，我似乎在直方图和密度线之间进行缩放。单独绘制的密度曲线和两者的组合之间存在明显的视觉差异。在两个图之间具有相同形状和比例的解决方案是什么（单独的密度和与 histo 结合时的密度）？我使用这段代码：

```
hist(dataList[[cl12]],xlim=range(minx,maxx),breaks=seq(minx,maxx,pasx),col="grey",main=paste(paramlab,"Group",groupnum,Cl,sep=" "),xlab="",freq=FALSE) 
d<-density(dataList[[cl12]])
lines(d,col="red") 
```

和

```
 dataList[[cl12]] <- c(4.399449e-02,  2.161474e-02, -1.515223e-05,  1.298059e+01,
      3.163949e-01, -1.785220e+00,  1.041053e+01,  6.327219e-01, -5.778590e-03) 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T18:54:48.317

默认情况下， hist 绘制 bin 频率。如果要显示 bin 概率，使其与密度图的比例相匹配，可以使用 hist 的 freq 参数。这是一个例子：

```
x = rnorm(1000)
plot(density(x))
hist(x, freq=F, add=T) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T21:06:44.277

这是做同样事情的另一种方法。

```
test <- rnorm(1000)
plot(density(test))
par(new=T)
hist(test, freq=F, xaxt="n", xlab="", ylab="", main="") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T10:45:22.427

除了极少数数据点之外，我认为您确实没有问题。当我将您的代码更改为可重现的版本时，它似乎很好。例如

```
x <- c(4.399449e-02,  2.161474e-02, -1.515223e-05,  1.298059e+01,
      3.163949e-01, -1.785220e+00,  1.041053e+01,  6.327219e-01, -5.778590e-03)

hist(x,col="grey",freq=FALSE, breaks=10) 
d<-density(x)
lines(d,col="red") 
```

这给出了一个丑陋的情节，但显然这是因为数据点数量少：

![在此处输入图像描述](../Images/894c3b191f8bb521ff04ffee52c5fc48.png)

如果您对更多数据点执行相同的方法，它似乎很好，例如：

```
x <- rgamma(100,1,1) 
```

（使用相同的图形代码）

![在此处输入图像描述](../Images/919cca7af89c748e1e1dfaa0d93685fe.png)

# ruby - 这是有效的 ruby 语法吗？

> ID：14986532
> 
> 赞同：1
> 
> 时间：2013-02-20T17:48:03.783
> 
> 标签：ruby

```
hash = {:symbol, 'mental'} 
```

因为我发现上面的内容围绕着我正在处理的一个项目，我不知道这是否是由于旧版本的 Ruby 造成的。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-20T17:52:14.523

`Ruby 1.8`当您按顺序拥有正确的键值对时有效。并且您需要在哈希创建中拥有偶数个元素：

`hash = {:symbol, 'mental'}`如同 `hash = {:symbol => 'mental'}`

一些例子：

```
hash = {:symbol, 'mental', :name,'abc'}
 => {:symbol=>"mental", :name=>"abc"}

hash = {:symbol, 'mental', :name,'abc', :b}
=>  Syntax Error 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T17:50:16.613

好像是笔误。我认为那行应该是：

```
hash = {:symbol => 'mental'} 
```

这似乎对 1.8.7 ruby​​ 有效......

# c# - Linq where in 子句

> ID：14986533
> 
> 赞同：4
> 
> 时间：2013-02-20T17:48:06.573
> 
> 标签：c#, .net, linq

我有层次结构，其中部门包含团队，团队包含代表。我要做的是获取给定部门下存在的代表列表。我试过这样做：

```
var teams = from tms in db.Teams
            where tms.DepartmentID == DepartmentID
            select tms;

var TeamDelegates = from tds in db.J_TeamDelegates
                    where tds.TeamID in teams.TeamID //error here
                    select tds; 
```

但是，teams 集合不允许您像引用集合一样引用特定属性。我想说的是“选择团队集合中所有具有 TeamID 的代表”。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T17:50:12.650

```
var TeamDelegates = from tds in db.J_TeamDelegates
                    where teams.Any(x => x.TeamID == tds.TeamID)
                    select tds; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T17:59:11.243

我想你可以在这里使用一个连接。

```
var TeamDelegates = from tms in db.Teams
                    where tms.DepartmentID == DepartmentID
                    join tds in db.J_TeamDelegates on tms.TeamID equals tds.TeamID
                    select tds; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T17:57:07.953

```
 var TeamDelegates = db.Teams
                 .Where(tms => tms.DepartmentID == DepartmentID)
                 .SelectMany(tms => db.J_TeamDelegates
                                      .Where(tds => tds.TeamID == tms.TeamID)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T18:06:20.930

```
var delegates = db.Departments
    .Where(department => department.ID == 123)
    .SelectMany(department => department.Teams)
    .SelectMany(team => team.Delegates); 
```

# azure - Microsoft Azure 定价 - 什么构成出站流量？

> ID：14986535
> 
> 赞同：4
> 
> 时间：2013-02-20T17:48:15.190
> 
> 标签：azure

根据 Azure 定价网站：

***发送到 Windows Azure 的所有入站数据都是免费的。出站数据根据给定计费周期内通过 Internet 从 Windows Azure 数据中心移出的数据总量收费。位于同一数据中心内的 Windows Azure 服务之间的数据传输不收取任何费用。每个计费月的前 5 GB 出站数据传输也是免费的。***

所以我有以下问题：

1.  如果我使用 Azure 托管一个具有 100MB 大小的 SQL Azure DB 的网站，如果没有人访问我的网站（因此没有出站流量），我唯一的成本是 5 美元/月。对于 100MB 数据库？

2.  当我的 MVC 4 应用程序从 SQL Azure DB 请求数据并且 DB 返回数据时，这算作“出站数据”吗？还是出站数据只是从我的网站到访问该网站的任何客户的数据？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T18:01:56.023

1.  您需要为数据库和任何计算时间付费（例如云服务或非免费的 Windows Azure 网站之一。
2.  否 - 出站数据将是包含在 Web 响应中的数据（不是在应用程序和数据库之间传输的数据）。只要确保应用程序和数据库在同一个数据中心。

# asp.net-mvc - Telerik 组合背景

> ID：14986540
> 
> 赞同：0
> 
> 时间：2013-02-20T17:48:29.200
> 
> 标签：asp.net-mvc, telerik, telerik-mvc

我如何更改 Telerik Combo (MVC) 中特定值的背景颜色。

```
<%= Html.Telerik().ComboBox()
                            .Name("DropDownList")
                            .BindTo(new SelectList(Model, "ID", "NAME"))
                            .Filterable(filtering =>
                            {
                                filtering.FilterMode(AutoCompleteFilterMode.Contains);
                            })

                            .HtmlAttributes(new {  })
                    %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T12:31:18.600

```
function onDataBaound(e) {
            var combobox = $(this).data('tComboBox');
            var str = '<%:Html.Raw(Json.Encode(ViewData["Values"]))%>';
            str = str.replace(/[\[\]']+/g, '');
            str = str.split(',');
            var j = 0;                             
            if (combobox.selectedIndex == -1) {
                var index = -1;
                for (var i = 0; i < combobox.data.length; i++) {
                    if (combobox.data[i].Value == str[j]) {
                        index = i;
                        j++;
                        var $li = $(this).data('tComboBox').dropDown.$items.eq(index);
                        $li.css('color', 'red');                           
                    }
                }
            }              
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T18:22:36.857

您可以更改与控件关联的画笔。如果您只想更改背景颜色，这应该相对容易。看看这篇文章[http://www.telerik.com/help/silverlight/radcombobox-styles-templates-modifying-brushes.html](http://www.telerik.com/help/silverlight/radcombobox-styles-templates-modifying-brushes.html)

# c - 在 C 中调用 free()

> ID：14986543
> 
> 赞同：2
> 
> 时间：2013-02-20T17:48:33.590
> 
> 标签：c, free

我打电话时到底发生了什么`free(a)`？我知道它正在释放使用的内存，但这是否也意味着`a`无法再访问存储在数组中的数据（因此，无法调用`copyArray`）？

```
int *a = (int *) malloc(sizeof(int) * numberOfInts);
for (i = 0; i < numberOfInts; i++) {
        a[i] = random();
        printf("%d\n", a[i]);
    }
    free(a);
    copyArray(*a++, numberOfInts); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T18:20:06.777

> What exactly is happening when I call free(a)?

This is implementation specific. As an example, with Linux and glibc, one of several things can happen:

If the memory was allocated in a block of 128k or more, `glibc` will have allocated a new memory area (specifically, a copy-on-write `mmap` of `/dev/zero`). When it's freed, the memory area is simply deallocated (`munmap`'d)and disappears. Further accesses will crash.

If the allocated memory was smaller, it will go on the heap. The heap is a single memory area starting at a fixed address, and is of a size that the process can shrink or increase (with `sbrk`).

The memory allocator keeps tracks of which pieces of this area is allocated. The first time something is allocated, the size of heap is increased, and the memory is appended to the end in this new space.

If you free such a block of memory, at the end of the heap, the heap size can be reduced, thus making the memory invalid and making further accesses crash. The allocator will not increase or decrease the heap size for just a few bytes though, so at that point it depends on the size of the allocation and the number of blocks freed. It might be accessible, and it might not be.

If you allocate ten blocks of memory and free the first nine, you end up with an unused area in the heap. Since you can only modify the heap size by setting the end address, you can't really do anything about it. The memory is still valid, and accessing it will still work. You will probably even find your original data in it, and will be able to continue as if nothing happened.

However, as new memory is allocated, `malloc` will try to put it in this unused area, thus letting other data overwrite what was originally there. Setting an int in your free'd array could then overwrite a pointer in a completely unrelated part of your program, and hilarity and debugging ensues.

tl;dr: Don't access free'd memory!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T17:52:20.153

是的，这正是它的意思。只要您调用`free()`有问题的内存，就会返回供操作系统使用。它可能看起来仍然有效，但是您正在导致未定义的行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T17:52:45.647

您不应访问已释放的内存位置。是的，无法再访问存储在这些位置的数据。但是访问释放的位置会导致未定义的行为。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T17:52:48.563

> 但这是否也意味着无法再访问存储在数组 a 中的数据

是的 - 更准确地说，访问它（即*取消引用无效指针*）会导致**未定义的行为，**因此您的程序可以做*任何事情*（包括崩溃，它可能会这样做）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T17:52:35.403

当内存被释放时，您无法对它可能包含的内容做出任何假设。所以你不应该再访问它了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-20T17:54:40.613

当你调用`free(a)`它意味着内存已被标记为重复使用。`a`因此，向其中写入数组*仍然*有效，但它是未定义的行为。稍后它可能会被覆盖，而不会通知您。

其次，不要`malloc()`在 C中转换返回值。

做这个：

`int *a = malloc(sizeof(*a) * numberOfInts);`

此外，在 C99 中，您可以在其中执行以下操作的 VLA 的规定：

```
printf("Enter array length: ");
scanf("%d",&numberOfInts);
int a[numberOfInts]; 
```

and you will not have to manually de-allocate these arrays. Note however, there is a limit to the length you can have for VLAs

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-20T17:56:12.503

When you are using 'malloc', you are dynamically allocating a block of memory pointed at by a. Typically, although implementation specific, dynamically allocated memory is stored on the heap. Without calling free, you will be leaking memory when a goes out of scope.

The block of memory that you created, which is pointed at by a, can no longer be used after a call to free. This would have very unpredictable behaviour and could potentially cause a segmentation fault.

# .net - 选项卡式 ascx 页面上的日历控件

> ID：14986544
> 
> 赞同：1
> 
> 时间：2013-02-20T17:48:37.380
> 
> 标签：.net, tabcontrol, ascx, calendar-control

我有一个包含 2 个选项卡的 ASPX 页面。

每个标签代码注册为 ASCX。我在两个页面上都有单独的自定义日历控件。现在我的日历控件在组合页面上不起作用，但在页面单独呈现时起作用。

ASPX 主页面中的代码

```
<%@ Page Language="VB" %>
<%@ Register Src="~/Content/Page1.ascx" TagPrefix="Content" TagName="Page1" %>
<%@ Register Src="~/Content/Page2.ascx" TagPrefix="Content" TagName="Page2" %>
<asp:Content ID="Content1" ContentPlaceHolderID="PageBody" Runat="Server">
    <asp:ScriptManager ID="Main" runat="server" />
    <ajaxToolkit:TabContainer ID="tcRecords" ActiveTabIndex="0" runat="server">
        <ajaxToolkit:TabPanel ID="tpSuccess" HeaderText="Success Records" runat="server">
            <ContentTemplate>
                <Content:Page1 ID="P1" runat="server" />
            </ContentTemplate>
        </ajaxToolkit:TabPanel>
        <ajaxToolkit:TabPanel ID="tpFailed" HeaderText="Failed Records" runat="server">
            <ContentTemplate>
                <Content:Page2 ID = "P2" runat="server" />
            </ContentTemplate>
        </ajaxToolkit:TabPanel>
    </ajaxToolkit:TabContainer>
</asp:Content> 
```

两个 ASCX 页面中的代码

```
<%@ Register Src="~/UIControls/Calendar.ascx" TagPrefix="UICtrl" TagName="Calendar" %>
<UICtrl:Calendar ID="Cal1" runat="server" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T19:23:12.673

我以前在一个 aspx 页面中使用同一用户控件的多个实例时看到过这样的行为。您是否使用任何会话变量或视图状态？您需要确保为这些东西分配了唯一的 ID，否则，您将在控件之间混淆它们。您可以像这样重命名它们：

```
ViewState(Me.UniqueID & "_SomeValue") 
```

或者

```
Session(Me.UniqueID & "_someOtherValue") 
```

这将创建一个具有唯一 ID 的视图状态和会话变量

# ruby-on-rails - 如何输出未知数量的项目

> ID：14986548
> 
> 赞同：0
> 
> 时间：2013-02-20T17:48:48.393
> 
> 标签：ruby-on-rails, ruby, csv

如果我使用 CSV gem 将数据行输出到 CSV 文件，但每行的项目数量未知，存储在数组中，如何包含所有项目？

例如，对于第一行，我有一个固定单元格，后跟 X 个项目，第一行可能是 2，但第二行可能是 20。如果总是 2 我会这样做：

```
CSV.open('file.csv', 'a') do |csv|
   csv << ["#{Some_text}","#{cell2}","#{cell3}"]
end 
```

但是我怎样才能仅在需要时才包含更多内容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T18:15:48.813

由于该`<<`方法需要一个数组，因此您可以构建任意数量的列，并使用简单的数组数学将它们传递：

```
CSV.open('file.csv', 'a') do |csv|
  csv << [ 'Fixed cell' ] + [ 1, 2, 3 ]
  csv << [ 'Fixed cell' ] + [ 1, 2, 3, 4, 5, 6, 7 ]
  csv << [ 'Fixed cell' ] + other_array
end 
```

可以使用 . 将多个数组组合成一个奇异数组`+`。这些数组的长度没有固有的限制，并且 CSV 中没有要求所有行具有相同的列数。

`"#{var}"`请注意，说而不是简单地说几乎总是多余的`var`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T18:21:46.173

You could also do:

```
*cells = cell1,cell2,celln   # You can add as many as you need
CSV.open('file.csv', 'a') do |csv|
  csv << [ 'Fixed cell' ] + cells
end 
```

The splat operator(*) might give you the flexibility you're looking for.

Regards,

# asp.net - 使用 sqlite 离线存储数据的 Web 表单应用程序

> ID：14986550
> 
> 赞同：3
> 
> 时间：2013-02-20T17:48:49.867
> 
> 标签：asp.net, sqlite, linq-to-sql, offline

我有一个在远程服务器上使用 sql server 2005 的 asp.net Web 表单应用程序。所有控件都使用 linq to sql 绑定。

我正在尝试提供完整的离线功能，所以我想知道是否可以像 sql server db 一样创建一个 sqlite 数据库，将其安装在用户设备上，然后当连接丢失或用户想要离线工作时，我将绑定更改为sqlite数据库？我想我会在用户第一次登录时将所有用户信息下载到 sqlite db，然后再同步。

这是否允许数据控件在离线时仍能正常工作，特别是在移动设备上？

我研究了本地存储等，但如果需要，我需要允许用户全天离线工作。此外，我将不得不对整个程序进行重大更改，这不是一个选择。

我的要求是让这个 asp.net 网络表单应用程序脱机工作而无需进行重大更改。

我已将应用程序从 asp.net 2008 转换为 2010，现在又转换为 2012。

我有 3 个月的时间来完成此转换，其中包括学习选择的任何技术。这是一个大型应用程序，所以时间不多。

任何建议都会很棒。

我还想知道您对提议的 sqlite 数据库的看法。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T09:09:58.187

关于在浏览器中离线工作，您可能需要查看以下 HTML5 api：

*   [AppCache](http://www.html5rocks.com/en/tutorials/appcache/beginner/)（从服务器加载所有需要的文件，这样即使服务器不可用，站点也会启动）。
*   [索引数据库](http://www.html5rocks.com/en/tutorials/indexeddb/todo/)。这允许离线数据存储，跨多个浏览器会话持久。

在上述架构中，除了安装 sqlite 或与浏览器分离的一些此类本地数据库之外，您还需要提供浏览器能够与之通信的本地“服务器”组件（或其他此类 Windows 服务）启用浏览器和数据库之间的通信。

下图显示了可行的示例，但您**将****重新发明 HTML5 中已经内置的内容**：

![示例架构](../Images/8ff50a726da8e4cc0788e129e19ddd66.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T19:42:06.613

我不确定这是否可能。首先，您的 Web 应用程序需要一个服务器来运行以显示页面。然后你需要一个本地数据库来连接它。同步它们并不困难。最大的问题是为每个用户在本地托管应用程序。

我建议不要使用 Web 应用程序，而是使用连接到远程数据库的 Windows 应用程序。如果无法访问远程数据库，您可以回退到本地数据库（sqllite 数据库）。然后，当连接恢复时，您可以以编程方式同步两个数据库。这可以通过创建所谓的“偶尔连接的应用程序”来完成。这是一篇好文章： http: [//www.codeproject.com/Articles/29459/Introduction-to-ADO-NET-Sync-Services](http://www.codeproject.com/Articles/29459/Introduction-to-ADO-NET-Sync-Services)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T20:53:16.460

那是不可能的。您不能强制在浏览器中运行的 Web 表单应用程序访问客户端的本地数据库。

不知何故，为了满足您的要求，您必须更改应用程序的架构，或者提供一个额外的、单独的离线工作通道。附加通道可以是使用本地存储的 html5 应用程序、使用 Sterling 等客户端 Silverlight 数据库之一的 Silverlight 客户端，甚至是使用客户端可用的任何数据库的 win 表单 ClickOnce 应用程序。

# svn - svn merge with --reintegrate 抱怨缺少范围，但 mergeinfo 似乎是正确的

> ID：14986553
> 
> 赞同：12
> 
> 时间：2013-02-20T17:48:55.617
> 
> 标签：svn, svn-merge

我有一个具有以下结构的项目

```
^/project/trunk
^/project/branches/mybranch 
```

当前 HEAD 是修订版 1048。分支是从 r523 中的主干复制的。主干已合并到 mybranch，结果为 r1048。上的合并信息`^/project/branches/mybranch`给出

```
/project/trunk:523-1047 
```

并且trunk的mergeinfo没有提到任何来自`^/project/branches/mybranch`. 实际上，在现实中，主干和分支也同时保存来自分支的合并信息，`mybranch`但这些合并信息在两个输出中看起来是完全相同的。

现在我进入我的主干工作副本并尝试发布

```
svn merge --reintegrate ^/project/branches/myproject 
```

我收到一条错误消息，上面写着：

```
svn: Reintegrate can only be used if revisions 523 through 1048 were previously merged from file:///home/svn/project/trunk to the reintegrate source, but this is not the case:
  project/branches/mybranch/src
    Missing ranges: /project/trunk/src:523-1047 
```

这很奇怪，因为我的分支文件夹上的 mergeinfo 告诉我 523-1047 已正确地从主干合并到分支。那个子文件夹是怎么回事？`src`是一个明显存在于主干和分支中的目录。

我认为这就是可疑之处。如果我通过查看 mybranch/src 的合并信息，`svn pg svn:mergeinfo ^/project/branches/mybranch/src@HEAD`我什么也得不到。但是，如果我查看trunk/src（`svn pg svn:mergeinfo ^/project/trunk/src@HEAD`），我会得到

```
/project/branches/mybranch/src:784 
```

所以似乎有人在那里从树枝到树干进行了樱桃采摘。但是，这不会出现在中继文件夹本身中。

这就是问题所在吗？最重要的是：我该如何治愈它？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-20T21:32:27.010

> 这就是问题所在吗？

是的，完全正确 - 稍后合并子树总是混淆重新集成

> 最重要的是：我该如何治愈它？

从 /project/trunk/src 中删除 mergeinfo

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-25T15:21:37.627

这是一个非常相似的主题，您可能想看看：

> [仅当先前合并了修订的 URL 以重新集成源时，才能使用重新集成](https://stackoverflow.com/q/4737605/2969529)

特别是当我遇到同样的问题并且不想删除 mergeinfo 时，Paul Whipp 的这个回答对我有很大帮助，因为这听起来像是一种解决方法，而不是“真正的”[修复](https://stackoverflow.com/users/1035279/paul-whipp)[。](https://stackoverflow.com/a/13409835/2969529)

简而言之：尝试为该特定文件/文件夹手动合并缺少的信息（正如 svn 建议的那样）。对我来说就像一个魅力。

有关相应的代码示例等，请参见 Pauls 答案。

# hadoop - 哪种 Hadoop 数据类型最适合代表年份的键 - 文本或 IntWritable？

> ID：14986554
> 
> 赞同：3
> 
> 时间：2013-02-20T17:48:57.833
> 
> 标签：hadoop

在我的应用程序中，我需要使用年份作为它们的键。我认为 Text 更适合 key，因为我们通常按年份对某个度量进行分组，而 IntWritable 用于我们求和或平均的值。但我也认为我们可以使用 IntWritable 作为年份的类型，因为我们可以将年份表示为 int，所以没有什么可以阻止它对吧？我想了解哪个更适合作为关键一年 - 是 Text 还是 IntWritable？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T01:06:41.637

Both are suitable, but there is an important difference when it comes to efficiency.

Firstly if you have a 'smaller' number of records what i'm about to discuss is probably so insignificant that it's not worth worrying about. However if you plan to process TB's of data then cycles saved *could* add up to minutes.

Like Amar points out in his answer a Text will serialize the year value as a series of UTF-8 encoded characters. It actually outputs a VInt for the number of bytes, then the bytes themselves. Typically years are 4 characters in length so a year will be serialized to 5 bytes of data (1 byte length, 4 bytes content).

An IntWritable is always serialized as 4 bytes - but you can hold numbers in the range +/- 2 billion in this byte space - clearly overkill for you year needs (a short 2 bytes holds +/- 32k and a byte holds +/- 128)

So using a Text is less efficient by 1 byte when it comes to serializing the data (compared to a IntWritable).

The other thing to consider is how the raw comparators work for each type:

Text.Comparator will skip over the vint bytes denoting the length and then start comparing the characters byte by byte - so you'll need to get to the 5th byte to compare the year 2000 and 2001 (1 byte length + the difference is in the 4th character). But if the difference is in the first character (say between 1999 and 2000) then the raw comparator has an answer after the 2nd byte.

A IntWritable.Comparator reads in the 4 bytes for each key and then does a int comparison so no matter if you're comparing the number 123456789 and 1, it will have to process all 4 bytes from each key before it can do the comparison.

So in summary, Text is more expensive to serialize but cheaper to compare.

You do have another option depending on your data domain - if for example you only have to represent the years from say 1970, then you can use a ByteWritable to denote the year after 1970 (allowing you to represent the years 1970 - 2097), and will only cost a single byte to serialize and single byte when comparing.

If you need to represent a larger range, you could also use VIntWritable which will be more efficient than VIntWritable (probably only requiring 2 bytes to store years in the range 1970-9999).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T18:26:42.820

我相信如果`IntWritable`为您完成这项工作，那么您应该接受它。`IntWritable`比 更轻量级`Text`。

我的意思是，如果您看到这两个类的实现，您可能会看到`IntWritable`只有一个属性：

```
private int value; 
```

在 的实现中`Text`，您可能会看到它预先具有 2 个属性：

```
private int length;
private byte[] bytes; 
```

> 此外，`Text`类使用标准 UTF8 编码存储文本。它提供了在字节级别序列化、反序列化和比较文本的方法。长度的类型是整数，并使用零压缩格式进行序列化。此外，它提供了字符串遍历的方法，无需将字节数组转换为字符串。还包括用于序列化/反序列化字符串、编码/解码字符串、检查字节数组是否包含有效 UTF8 代码、计算编码字符串长度的实用程序。

所以，如果你不需要所有这些，为什么要使用`Text`类！一起去`IntWritable`。

# html - 左边距（以百分比设置）随着 Chrome 中的每个元素缩小（不是在 Firefox 中）

> ID：14986556
> 
> 赞同：0
> 
> 时间：2013-02-20T17:49:02.957
> 
> 标签：html, css, google-chrome, firefox

这里是[http://jsfiddle.net/6quT7/](http://jsfiddle.net/6quT7/)所以你可以看到在 Chrome 中查看时每个 margin-left 变得更小，而在 Firefox 中查看时每个元素的尺寸相同

这是 HTML：

```
<div class="group">
<div class="group_unit_first_child">
    <p>Hermelin</p>
</div>
<div class="group_unit color_green">
    <p>2</p>
</div>
<div class="group_unit color_blue">
    <p>2</p>
</div>
<div class="group_unit color_white">
    <p>8</p>
</div>
<div class="group_unit color_orange">
    <p>2</p>
</div>
</div> 
```

这是CSS：

```
.group_unit_first_child {
height: 100%;
width: 40.1%;
float: left;
background-color: #4e4e4e;
border-radius: 8px;
display: table;
}

.group_unit {
height: 100%;
width: 12.64%;
float: left;
text-align: center;
background-color: #4e4e4e;
border-radius: 8px;
margin-left: 0.96%;
display: table;

} 
```

这个问题有什么解决办法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:52:55.453

`display: table;`从`.group_unit`应该工作中删除。

[小提琴](http://jsfiddle.net/6quT7/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T17:56:10.467

我将显示位置从表格更改为块，它对我有用。你真的需要那个`display:table`属性吗？

# xcode - 需要具有相同键值的 nsdictionary

> ID：14986558
> 
> 赞同：1
> 
> 时间：2013-02-20T17:49:05.553
> 
> 标签：xcode, list, nsdictionary

我需要一个 nsdictionary 或其他类型的列表来具有多个具有相同键的值，如下所示：

```
tag = asfsdf;
tag = sdfsd;
tag = werwe; 
```

因为我必须将它们发送到网络服务，而网络服务只接受这样的标签：

```
 "tags" : [
    "tag":fews",
    "tag":"df"
  ] 
```

在 jsonserialization 之后有一个数组我 guet：

```
 "tags" : [
    "tag = fews",
    "tag = df"
  ] 
```

不起作用，无法更改网络服务。有人知道吗？ndsdictionary 不能具有相同的键值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:18:37.407

最简单的答案是只创建 2 个`NSArray`对象；调用一个“键”和另一个“值”。只要您没有从数组中间进行大量添加和删除，它就应该是直截了当的。

另一个/更好的选择（我认为你已经放弃了）是使用`NSDictionary`，但每个键的“值”实际上是一个`NSArray`. 当您需要吐出内容时，您只需为数组中的每个项目使用相同的键值。

# ruby-on-rails - Rails - 未定义的方法`stringify_keys'

> ID：14986559
> 
> 赞同：84
> 
> 时间：2013-02-20T17:49:07.487
> 
> 标签：ruby-on-rails

我正在尝试为用户单击后退按钮创建一个 ruby​​ 代码块。我收到错误“/projects/11/steps/4”的错误“未定义的方法‘stringify_keys’：String”。当我摆脱 do 和 end 时，代码有效。如何向 link_to 添加一个 do？

```
 <%= link_to 'Back', project_step_path(@project, @project.steps.count-1), :class => "btn btn-small" do %>

    <% end %> 
```

* * *

## 回答 #1

> 赞同：208
> 
> 时间：2013-02-20T17:51:35.063

如果您使用的是块形式，`link_to`则不能包含文本内容（块是您的文本内容）。你需要这样做：

```
<%= link_to project_step_path(@project, @project.steps.count-1), :class => "btn btn-small" do %>
  Back
<% end %> 
```

通常，当您希望将图像或其他标签作为链接的内容时使用。这纯粹是为了展示目的。该块不会为您提供类似 javascript 的功能，因此请确保您在此处寻找其他显示行为:)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-02-20T17:53:55.597

如果您传递一个块，则不要传递链接名称。应该：

```
<%= link_to project_step_path(@project, @project.steps.count-1), :class => "btn btn-small" do %>
  Back
<% end %> 
```

# javascript - 调用方法将使该对象为空

> ID：14986560
> 
> 赞同：0
> 
> 时间：2013-02-20T17:49:10.447
> 
> 标签：javascript

我可以调用这样的方法

```
Func.apply(null,[123]); 
```

如果函数依赖`this`指针，会抛出异常吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T18:03:03.620

来自[Mozilla 开发网络](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)：

> ### 这个Arg
> 
> `this`为调用提供的值`fun`。注意，这可能不是方法看到的实际值：如果方法是非严格模式代码中的函数，`null`将`undefined`被替换为全局对象，原始值将被装箱。

换句话说，除非函数使用严格模式，否则将使用 then`window`代替`null`. 如果它确实使用严格模式，`this`将是`null`.

这是否会导致任何异常完全取决于所应用的功能。如果该函数不使用`this`，则传递任何值都是完全安全的。如果它被视为`this`一个可能不为 null 的普通对象，则它可能仅在严格模式下失败。如果它依赖于设置的某些属性，那么它很可能会`TypeError`在严格模式和非严格模式下抛出类似的。创建一个仅在非严格模式下失败的函数也很容易（例如，通过添加显式检查）

（至少有一些）内置数组函数使用显式检查。例如`Array.prototype.split(undefined, [1,2,3])`在 Chrome 上抛出一个`TypeError: Cannot call method 'apply' of undefined`

# c# - 在后面的代码中将参数传递给 RelayCommand

> ID：14986561
> 
> 赞同：2
> 
> 时间：2013-02-20T17:49:11.120
> 
> 标签：c#, wpf, mvvm, relaycommand

我知道 SOF 和 Google 上都有多个标题相似的帖子，但请耐心等待我一分钟。

我正在关注这篇文章为我的网格视图创建一个上下文菜单：[http ://www.koaxkoaxkoax.com/ribbit/2010/09/creating-dynamic-menus-in-wpf.html](http://www.koaxkoaxkoax.com/ribbit/2010/09/creating-dynamic-menus-in-wpf.html)

我在中创建 HierarchicalDataTemplate `UserControl.Resources`，我在 gridview 的资源中有一个空菜单，然后我在实际的上下文菜单中引用它。XAML（gridview 的第一部分）如下所示：

```
 <DataGrid.Resources>
            <Views:ViewMenuItemCollection x:Key="Menu">
                <Views:ViewMenuItem Text="foo"/>
                <Views:ViewMenuItem Text="bar"/>
            </Views:ViewMenuItemCollection>
        </DataGrid.Resources>
        <DataGrid.ContextMenu>
            <ContextMenu ItemsSource="{DynamicResource Menu}"/>
        </DataGrid.ContextMenu> 
```

在后面的代码中，我`FindResource`用来获取对菜单的引用并创建一个与和`ViewMenuItem`处于同一级别的对象。然后我遍历一个列表并为每个列表项创建一个 -object 并将它们附加为子对象。这看起来就像我想要的那样。但我无法让实际功能正常工作。`foo``bar``ViewMenuItem`

foreach 循环的内部（我在其中创建子对象）如下所示：

```
ViewMenuItem seriesItem = new ViewMenuItem();
seriesItem.Text = series.ForcedName;
seriesItem.Command = new RelayCommand<Series>(p=>_view.SetSeriesExecute(p));             
_setSeriesMenuItem.Children.Add(seriesItem); 
```

特别是包含的行`p=>_view.SetSeriesExecute(p)`让我感到困惑。我发现了很多看起来一模一样的例子。当我运行我的程序并单击其中一个子元素时，该`SetSeriesExecute`方法被正确调用 - 但参数始终为空。这并不奇怪，因为我实际上从来没有提供一个类型的对象`Series`作为参数。我试图在 RelayCommand 构造函数中提供参数，如下所示`p=>_view.SetSeriesExecute(mySeriesObject)`：它编译，但从`SetSeriesExecute`未被调用。

我的目标很简单（至少我认为是这样）：当程序对单击上下文菜单中的元素做出反应时，方法 ( `SetSeriesExecute`) 需要知道用户实际选择（=单击）了哪个项目. `SetSeriesExecute`不幸的是，尽管进行了 4 小时的认真研究，但我无法弄清楚我可以在哪里以及如何向. 其他人似乎都理解了可用的例子这一事实并没有让我对自己感觉特别好，我对每一个提示都表示终生感激。

最好的彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:59:33.603

你缺少的是`CommandParameter`.

尝试设置`seriesItem.CommandParameter`为您想传递给该`SetSeriesExecute`方法的任何内容。 `p`in`p=>_view.SetSeriesExecute(mySeriesObject)`将是那个参数。

# java - 在 JAXB 中解组是如何工作的？

> ID：14986562
> 
> 赞同：2
> 
> 时间：2013-02-20T17:49:14.393
> 
> 标签：java, jaxb

我在 jaxb 中有一个元素的 getter/setter 对：

```
@XmlElementWrapper(name="requires", required=true) 
@XmlElement(name="equals", required=true)
List<MyObject> getMyObjects() {
    return this.myObject;
}
void setMyObjects(final MyObject... myObjects) {
    //call the regular method for setting the objects 
    //that does not have the required signature type
} 
```

问题是 setter 方法永远不会被调用。我在 getter 和 setter 上都放了一个断点，getter 的那个被击中，但 setter 的没有。

我刚刚发现[了这个问题](https://stackoverflow.com/questions/14719429/why-does-jaxb-call-getter-during-unmarshalling)，但我并不完全理解答案。`myObjects`是在构造时初始化的，所以它看起来适合场景 2。在调用 getter 之后的解组过程中会发生什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T18:06:11.950

您的 setter 与您的 getter 的签名不匹配。代替：

```
void setMyObjects(final MyObject... myObjects) 
```

你需要

```
void setMyObjects(List <MyObject> myObjects) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T20:09:35.637

您通常不会将 setter 用于 JAXB 对象中的列表字段。

相反，您将 getter 用于列表并操作返回的列表。

示例 JAXB 对象：

```
class JaxbExample {
    @XmlElement(name="stringList", required = true)
    private List<String> stringList;

    public List<String> getStringList() {
        return stringList;
    }
} 
```

**将三个字符串添加到`stringList`：**

```
JaxbExample someObject = ...;

// add three Strings to stringList

someObject.getStringList().add("foo");
someObject.getStringList().add("bar");
someObject.getStringList().add("baz");

// now the list contains 3 new strings and there was
// no need to use a setter. 
```

**将 stringList 设置为现有列表：**

```
JaxbExample someObject = ...;
List<String> someList = ...;

// set someObject's stringList to someList

someObject.getStringList().addAll(someList); 
```

为了进一步澄清...

[我们有时使用XJC 实用程序](http://docs.oracle.com/javase/6/docs/technotes/tools/share/xjc.html)从 XML 模式文件（.XSD 文件）生成 JAXB Java 类。

当生成的类包含 List 元素时，不会为 List 生成 setter 方法。

以下注释出现在每个 List 的 getter 上方：

```
/**
 * Gets the value of the stringList property.
 * 
 * <p>
 * This accessor method returns a reference to the live list,
 * not a snapshot. Therefore any modification you make to the
 * returned list will be present inside the JAXB object.
 * This is why there is not a <CODE>set</CODE> method for the stringList property.
 * 
 * <p>
 * For example, to add a new item, do as follows:
 * <pre>
 *    getStringList().add(newItem);
 * </pre>
 * 
 * 
 * <p>
 * Objects of the following type(s) are allowed in the list
 * {@link String }
 * 
 * 
 */ 
```

希望该评论在解释方面比我做得更好！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T20:05:50.227

This doesn't actually explain why JAXB works the way it does, but I was able to get my code to work the way I wanted it to. I don't really know why, but this is what I did:

```
@XmlElementWrapper(name="requires", required=true) 
@XmlElement(name="equals", required=true)
MyObject[] getMyObjects() { //myObjects is an ArrayList
    return this.myObjects.toArray(EMPTY_OBJECT_ARRAY);
}
void setMyObjects(final MyObject... myObjects) {
    //call the regular method for setting the objects 
    //that does not have the required signature type
} 
```

# ruby-on-rails - Rails 3 - 在“数据库级别”做更多事情

> ID：14986566
> 
> 赞同：0
> 
> 时间：2013-02-20T17:49:37.893
> 
> 标签：ruby-on-rails, database, optimization

我正在开发我的第一个大型 Rails 应用程序，但我对某些事情感到有些困惑。

我知道在数据库级别做更多的工作会提高性能。但是我对在数据库级别运行什么类型的命令感到困惑。

例如：

```
@tasks = @project.tasks
<%= render partial: 'task', collection: @tasks %> 
```

这在数据库级别上工作吗？

谢谢，我知道这是一个非常新手的问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:53:11.870

假设`@project`一个 ActiveRecord 对象与 Task 类有关系，然后对数据库进行提取以填充该`@tasks`对象。

当你运行 rails server 时，观察控制台的输出。它会在对数据库进行 SQL 查询时向您显示。这将帮助您了解代码执行的过程。享受 Rails 的乐趣！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T18:09:09.977

“在数据库级别做更多的工作将提高性能”

是的，它会。非常基本的rails东西，即

@thing = Thing.find(id)

效率很高，在这些情况下您通常不会关心性能，

但是，某种过滤器怎么样。

假设您想实现搜索包含特定字符集的名称的功能，（这是一个人为的示例，只是为了说明）

你可以这样做：

```
@things = Thing.all
@foothings = []
@things.each do |thing|
  if /foo/ =~ thing.name
    @foothings << thing 
  end
end 
```

或者你可以这样做：

```
class Thing < ActiveRecord::Base
   def self.filtered(what)
     self.where("name like ?","%#{what}%")
   end
end

@foothings = Thing.filtered("foo") 
```

数据库将更快地执行搜索（第二个示例）。它是高度调整和优化的 C 代码（可能），其中 RoR 仍然是一种解释语言。此外，在第一个示例中，从数据库请求所有内容，在第二个示例中，仅返回名称中带有“foo”的内容，如果 RoR 机器和数据库机器之间存在网络延迟，这也会影响性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T18:24:59.400

数据库级别实际上并不是代码的一部分，除非您实际编写要使用的数据库。良好的程序设计接口与数据库，例如您给 mysql 一个查询，它为您查询数据库并返回您在代码中使用的结果。所以数据库级别是 mysql 查询自己的结果，这是您希望完成大部分工作的地方，因为它已经高度优化。性能的来源是倾销大部分工作，例如，您可以制定一个查询，例如：“SELECT * from mytable”，然后您将获得一大堆元素，如果那是您想要的，那么很好，但如果您想要这个集合中的特定项目，你必须在整个集合上使用一些查找算法（可能必须扫描它们全部或其他，

# python - Python如何确保在模块死亡之前调用对象的 __del__() 方法？

> ID：14986568
> 
> 赞同：7
> 
> 时间：2013-02-20T17:49:46.127
> 
> 标签：python, module, destructor

今天早些时候，我问[了这个](https://stackoverflow.com/questions/14984136/python-2-7-possible-bug-imported-modules-disappears)关于`__del__()`使用导入模块的对象的方法的问题。问题是`__del__()`想要使用模块`os`，但有时（并非总是）模块已经被删除。有人告诉我，当 Python 程序终止时，删除对象和模块的顺序可以是随机的，并且是未定义的。但是，对于我的应用程序，我确实需要确保在删除模块（在其中实例化对象）之前删除对象（我创建的类的实例）。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-20T18:10:07.063

正如我们之前告诉你的，你真的不应该依赖`__del__`解释器退出时被调用。正确执行此操作有两种选择：

第一个是`atexit`

```
import os
import atexit

class Logger(object):   
    def on_exit(self):
        print "os: %s." % os

logger = Logger()
atexit.register(logger.on_exit) 
```

这可以确保您的记录器在退出时完成。

* * *

*进一步了解您的问题，因为您计划将单个实例绑定到定义实例类的模块，因此下面的上下文管理器解决方案不适用于此问题，因为无法在整个上下文中保持执行你的程序。您将需要使用`atexit.register`. 但是，从程序设计的角度来看，我更喜欢使用上下文管理器来管理我的资源，而不是`atexit.register`重组代码允许它。

第二种~~（更好的*）~~方法是让你的类成为一个[上下文管理器](http://docs.python.org/2/reference/datamodel.html#with-statement-context-managers)，当你退出上下文时执行清理代码。然后您的代码将如下所示：

```
import os
class Logger(object):
    def __enter__(self):
        return self
    def __exit__(self, exc_type, exc_value, traceback):
        print "os:",str(os)

with Logger() as logger:
    #do something ... 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-20T17:55:44.977

使用关键字参数附加对函数的引用：

```
import os

class Logger(object):    
    def __del__(self, os=os):
        print "os: %s." %os 
```

或将其绑定到类属性：

```
import os

class Logger(object):
    def __init__(self):
        self.os = os

    def __del__(self):
        print "os: %s." % self.os 
```

通过创建一个本地（足够）引用，Python 将不会查找`os`为全局引用，而是使用本地引用，它们分别与实例或函数本身一起存储。

在运行时查找全局变量（这就是为什么`__del__`如果`os`已经清理了其他问题中的函数会失败的原因），而函数本地则与函数对象一起清理，或者在实例属性的情况下，与实例一起清理。

# ipad - 为什么我的 MKUserTrackingBarButtonItem 在 iPad 上总是使用普通样式？

> ID：14986572
> 
> 赞同：1
> 
> 时间：2013-02-20T17:49:52.200
> 
> 标签：ipad, ios6, mapkit, uibarbuttonitem, uibarbuttonitemstyle

我正在向`MKUserTrackingBarButtonItem`工具栏添加一个。这在 iPhone 上运行良好，但在 iPad 上，按钮只会使用“普通”样式。这使得它在黑色工具栏上几乎不可见，所以我想使用带边框的样式。但即使将项目的`style`属性设置为`UIBarButtonItemStyleBordered`没有区别 - 它总是在 iPad 上呈现，就好像使用`UIBarButtonItemStylePlain`

为了完整起见，这是我用来添加按钮的代码：

```
MKUserTrackingBarButtonItem *userTrackingButton = [[MKUserTrackingBarButtonItem alloc]  initWithMapView:self.mapView];
NSMutableArray *toolbarItems = [[NSMutableArray alloc] initWithArray:[[self toolbar] items]];
[toolbarItems insertObject:userTrackingButton atIndex:0];
[self.toolbar setItems:toolbarItems]; 
```

这是它在 iPhone 上的外观（右）：

![iPhone 示例](../Images/86ea35f1640b8a17ccf0b94d1c560e64.png)

在 iPad 上（错误）：

![iPad 示例](../Images/5ca0194fc5817457edb3cca01941156f.png)

在 iOS 6.1 上测试，带有一个普通的 UIToolbar。我知道 iPad 上的 UIToolbar 可以显示带边框的工具栏项目，因为它适用于普通按钮，比如这个，但我不能让用户跟踪按钮做同样的事情：

![在此处输入图像描述](../Images/501ec304f3e090b42ff3f43f571a10e9.png)

# javascript - 从 XML 中填充下拉列表 - 代码执行顺序错误

> ID：14986573
> 
> 赞同：0
> 
> 时间：2013-02-20T17:49:54.570
> 
> 标签：javascript, jquery

我正在尝试使用 jQuery 从 XML 文件中填充下拉框。当代码运行时，它似乎按顺序执行。

jQuery：

```
 $("#filterButton").click(function() {
    var dropdown = new Array();
    $.get('../restaurants.xml', function (xmlFile) {
      $(xmlFile).find('restaurant').each(function () {
        var found = false;
        var $restaurant  = $(this);
        var type = $restaurant.attr("type");

        dropdown.forEach(function(arrayValue){
          if(arrayValue == type){
            found = true;
          }
        });
        if(found == false){
          dropdown.push(type);
        }
      });
    });
    $('#potentialRestaruants').append('<select>');
      dropdown.forEach(function(arrayValue){
        $('#potentialRestaruants').append('<option value="' + arrayValue + '">' + arrayValue + '</option>' );
      });
      $('#potentialRestaruants').append('</select>'); 
  }); 
```

但是代码按以下顺序运行：

```
 $("#filterButton").click(function() {
    var dropdown = new Array(); 
```

然后

```
$('#potentialRestaruants').append('<select>');
      dropdown.forEach(function(arrayValue){
        $('#potentialRestaruants').append('<option value="' + arrayValue + '">' + arrayValue + '</option>' );
      });
      $('#potentialRestaruants').append('</select>'); 
  }); 
```

然后

```
$.get('../restaurants.xml', function (xmlFile) {
  $(xmlFile).find('restaurant').each(function () {
    var found = false;
    var $restaurant  = $(this);
    var type = $restaurant.attr("type");

    dropdown.forEach(function(arrayValue){
      if(arrayValue == type){
        found = true;
      }
    });
    if(found == false){
      dropdown.push(type);
    }
  });
}); 
```

为什么代码按此顺序运行，我怎样才能按我需要的顺序运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T18:25:14.460

它按照您描述的顺序运行，因为 $.get 异步执行。因此，任何依赖于 $.get 函数成功执行的代码也应该包含在该函数的末尾，即 append 和第二个 forEach。

# javascript - Javascript 填充

> ID：14986580
> 
> 赞同：0
> 
> 时间：2013-02-20T17:50:18.887
> 
> 标签：javascript, jquery, option

## 简要说明：

我使用 javascript 来根据他们的邮政编码自动完成访客地址，他们输入邮政编码，脚本填充城市文本字段、街道等。

但 STATE 字段必须是一个选项，而不是文本输入。现在我需要调整脚本来填充它

```
<!-- Translations -->
    CEP = Zip Code
    Cidade = City
    Bairro = Neighborhood
    Rua/Av = Street/Avenue
    Estado = State

    <head>
        <script type="text/javascript">
                function getEndereco() {
                        if($.trim($("#cep").val()) != ""){
                            $.getScript("http://cep.republicavirtual.com.br/web_cep.php?formato=javascript&cep="+$("#cep").val(), function(){
                                if(resultadoCEP["resultado"] != 0){
                                    $("#rua").val(unescape(resultadoCEP["tipo_logradouro"])+" "+unescape(resultadoCEP["logradouro"]));
                                    $("#bairro").val(unescape(resultadoCEP["bairro"]));
                                    $("#cidade_pessoa_fisica").val(unescape(resultadoCEP["cidade"]));

                    Needs fix ----> $("#estado").val(unescape(resultadoCEP["estado"]));

                                }else{
                                    return;
                                }
                            });             
                        }           
                }
            </script>
        </head>
    <body>
                  <!-- Working perfectly -->

                  <input name="cep" id="cep" maxlength="8" type="text" onBlur="getEndereco()" size="8">
                  <label for="cidade">Cidade</label>
                  <span class="w">
                  <input tabindex="1" class="input" id="cidade_pessoa_fisica" type="text" />
                  </span>
                  <label for="bairro">Bairro</label>
                  <input name="bairro" id="bairro" type="text">
                  <label for="rua">Rua/Avenida</label>
                  <input name="rua" id="rua" type="text">
                  <label for="rua">Numero</label>
                  <input name="rua" id="rua" type="text">

                <!-- Needs FIX -->    

                  <label for="estado">Estado</label>
                  <select id="estado" style="width:300px;">
                    <option value="">Selecione</option>
                    <option value="AC">Acre</option>
                    <option value="AL">Alagoas</option>
                    <option value="AP">Amap&aacute;</option>
                    <option value="AM">Amazonas</option>
                    <option value="BA">Bahia</option>
                    <option value="CE">Cear&aacute;</option>
                    <option value="DF">Distrito Federal</option>
                    <option value="ES">Esp&iacute;rito Santo</option>
                    <option value="GO">Goi&aacute;s</option>
                    <option value="MA">Maranh&atilde;o</option>
                    <option value="MT">Mato Grosso</option>
                    <option value="MS">Mato Grosso do Sul</option>
                    <option value="MG">Minas Gerais</option>
                    <option value="PA">Par&aacute;</option>
                    <option value="PB">Para&iacute;ba</option>
                    <option value="PR">Paran&aacute;</option>
                    <option value="PE">Pernambuco</option>
                    <option value="PI">Piau&iacute;</option>
                    <option value="RJ">Rio de Janeiro</option>
                    <option value="RN">Rio Grande do Norte</option>
                    <option value="RS">Rio Grande do Sul</option>
                    <option value="RO">Rond&ocirc;nia</option>
                    <option value="RR">Roraima</option>
                    <option value="SC">Santa Catarina</option>
                    <option value="SP">S&atilde;o Paulo</option>
                    <option value="SE">Sergipe</option>
                    <option value="TO">Tocantins</option>
                </select>
    </body> 
```

由于另一个 javascript 插件，State (estado) 必须是一个选项值。因为，如果`<option value="SP">`= TRUE，它会更改一些 jQuery 手机掩码以增加一位数字，因为在这种特定状态下，手机多一位数字。这就是为什么我不能简单地将其更改为文本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T18:06:29.890

您在这一行有一个错误：

```
$("#estado").val(unescape(resultadoCEP["estado"])); 
```

它应该是：

```
$("#estado").val(unescape(resultadoCEP["uf"])); 
```

整体功能：

```
 function getEndereco() {
                if ($.trim($("#cep").val()) != "") {                            
                        $.getScript("http://cep.republicavirtual.com.br/web_cep.php?formato=javascript&cep="+$("#cep").val(), function(){
                            if(resultadoCEP["resultado"] != 0){
                                $("#rua").val(unescape(resultadoCEP["tipo_logradouro"])+" "+unescape(resultadoCEP["logradouro"]));
                                $("#bairro").val(unescape(resultadoCEP["bairro"]));
                                $("#cidade_pessoa_fisica").val(unescape(resultadoCEP["cidade"]));
                                $("#estado").val(unescape(resultadoCEP["uf"]));
                            }else{
                                return;
                            }
                        });             
                    }           
            } 
```

# c# - 如何在运行时使用替换的 ControlTemplate 设置 WPF 控件的属性？

> ID：14986587
> 
> 赞同：-4
> 
> 时间：2013-02-20T17:50:38.760
> 
> 标签：c#, .net, wpf, visual-studio, xaml

我有许多在运行时生成的文本框。我想在执行某个操作时将它们的边框画笔颜色设置为绿色，以及更改边框粗细。在我的情况下，这必须从代码隐藏中完成。

我的第一个挑战是在鼠标悬停时阻止 TextBox 边框改变颜色。这是通过添加这种样式来完成的：

```
<UserControl.Resources>
        <Style TargetType="TextBox">
            <Setter Property="SnapsToDevicePixels" Value="True"/>
            <Setter Property="OverridesDefaultStyle" Value="True"/>
            <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
            <Setter Property="AllowDrop" Value="true"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type TextBoxBase}">
                        <Border 
          Name="Border"
          Padding="1"
          Background="#FFFFFF"
          BorderBrush="#888888"
          BorderThickness="1" >
                            <ScrollViewer Margin="0" x:Name="PART_ContentHost"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="Border" Property="Background" Value="#EEEEEE"/>
                                <Setter TargetName="Border" Property="BorderBrush" Value="#EEEEEE"/>
                                <Setter Property="Foreground" Value="#888888"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style TargetType="TreeViewItem">
            <Setter Property="Template" Value="{StaticResource TreeViewWithLines}"/>
            <Setter Property="Padding" Value="0,5,0,5"/>
            <Setter Property="IsExpanded" Value="true"/>
        </Style>
    </UserControl.Resources>
    <ScrollViewer ScrollViewer.HorizontalScrollBarVisibility="Auto" ScrollViewer.VerticalScrollBarVisibility="Auto">
        <TreeView Name="tvFilters" Margin="0,10,0,10" Background="White" BorderBrush="White"/>
    </ScrollViewer>
</UserControl> 
```

上面的代码适用于我的 UserControl。

接下来，一个新的问题开始出现。每当我尝试在代码隐藏方法中手动更改 BorderBrush 和 BorderThickness 属性时，绝对不会发生任何事情。这是代码：

```
txt.BorderThickness = new Thickness(3);
txt.BorderBrush = Brushes.Green; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:54:02.150

试试这个作为控制模板：

```
<ControlTemplate TargetType="{x:Type TextBoxBase}">
     <Border 
      Name="Border"
      Padding="1"
      Background="#FFFFFF"
      BorderBrush="{TemplateBinding BorderBrush}"
      BorderThickness="{TemplateBinding BorderThickness}" >
                        <ScrollViewer Margin="0" x:Name="PART_ContentHost"/>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter TargetName="Border" Property="Background" Value="#EEEEEE"/>
                            <Setter TargetName="Border" Property="BorderBrush" Value="#EEEEEE"/>
                            <Setter Property="Foreground" Value="#888888"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate> 
```

您可能可以通过比较两者来猜测：您正在硬编码为可视子树`Border`生成的值。`TextBox`处理这种情况的方法是将视觉对象的属性值绑定到控件的属性值。`TemplateBinding`被创建来做到这一点。

另外，请注意，虽然我已经为您提供了答案，但您并没有真正以充分利用其设计的方式使用 WPF。在运行时生成控件最好使用`DataTemplate`.

# html - 如何使用 font-face 缩小 CSS

> ID：14986588
> 
> 赞同：2
> 
> 时间：2013-02-20T17:50:42.177
> 
> 标签：html, css, font-face

我有一个带有字体的样式表。当我使用在线服务缩小 css 时，字体停止工作。我采用的方法是提取字体代码，缩小css的其余部分，然后将字体粘贴在缩小样式表的顶部。好奇是否有人对此有更好的方法。

这是我的代码：[http ://snipt.org/zfAj5](http://snipt.org/zfAj5)

我使用此服务来缩小我的代码： http: [//www.minifycss.com/css-compressor/](http://www.minifycss.com/css-compressor/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T18:53:45.477

如果你用来缩小 CSS 的工具不能缩小 CSS，把它扔掉，换个更好的工具。

[YUI Compressor 是一个很好的 CSS 和 JavaScript 压缩工具](http://yui.github.com/yuicompressor/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T19:25:54.863

我发现使用 Google Chrome Page Speed 插件来缩小我的 CSS 有助于避免此类问题。它不会像其他一些程序那样极度缩小 CSS，但我也从未遇到浏览器渲染问题。

我目前使用这种方法缩小了一些带有@font-face 的样式表：

1.  如果您还没有 Google Chrome，请下载并安装它。
2.  安装 Page Speed 插件。
3.  在 Google Chrome 中，运行开发者工具并单击“页面速度”选项卡。然后点击“分析”。你会得到一个总分，以及你可以做些什么来提高你的分数。
4.  列表中的一项将是“缩小 CSS”。点击它。在“此页面的建议”下是“查看优化内容”的链接。按照该步骤获取由 Google 提供的 CSS 的缩小版本。

资料来源： http: [//gomakethings.com/how-to-trick-out-the-performance-of-your-wordpress-site/](http://gomakethings.com/how-to-trick-out-the-performance-of-your-wordpress-site/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-15T18:19:16.383

[minifybeautify.com](http://minifybeautify.com/)应该可以完成这项工作……它是即时且简单的！

# algorithm - 包含区域之间的内部关系算法

> ID：14986596
> 
> 赞同：2
> 
> 时间：2013-02-20T17:51:17.060
> 
> 标签：algorithm, opencv

我有两个由它们包含的点定义的区域。

也就是说，一个区域是点 {X, Y} 的列表。

每个区域都是相连的。

一个区域在另一个区域内。

我需要一种算法来识别里面的区域。

有人可以为我提供解决此问题的算法的链接吗？

如果有人知道解决这个问题的opencv函数，非常欢迎。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T18:17:57.077

只要外部形状的点都不在内部形状的点内，这可以通过点定位算法在线性时间内完成。从两组中较大的一个中选择一个点，并通过射线投射检查它是否在另一个区域内。请参阅[多边形中的点问题](http://en.wikipedia.org/wiki/Point_in_polygon)。此处提供了多种语言的全面实现集：[光线投射实现](http://rosettacode.org/wiki/Ray-casting_algorithm)。

# c# - 无效的文本、ntext 或图像指针值

> ID：14986601
> 
> 赞同：0
> 
> 时间：2013-02-20T17:51:44.193
> 
> 标签：c#, sql-server-2008, binary, webforms

我正在尝试将文件上传到我的数据库（通过将二进制文件内容读入我的存储过程）。我将输入流传递给我的方法，如下所示：

```
LoadFile(gAttachmentContentID, file.InputStream, trn);

public static void LoadFile2(Guid gAttachmentContentID, Stream stm, IDbTransaction trn)
{
    stm.Position = 0;
    byte[] binFILE_POINTER = new byte[32];

    // Now read s into a byte buffer. 
    byte[] bytes = new byte[stm.Length];
    int numBytesToRead = (int)stm.Length;
    int numBytesRead = 0;
    while (numBytesToRead > 0)
    {
        // Read may return anything from 0 to 10\. 
        int n = stm.Read(bytes, numBytesRead, 10);
        // The end of the file is reached. 
        if (n == 0)
        {
            break;
        }
        numBytesRead += n;
        numBytesToRead -= n;
    }
    stm.Close();
    SqlProcs.spATTACHMENTS_CONTENT_WriteOffset(gAttachmentContentID, binFILE_POINTER, 0, bytes, trn);
    // numBytesToRead should be 0 now, and numBytesRead should 
    // equal 100.
    Console.WriteLine("number of bytes read: {0:d}", numBytesRead);
} 
```

使用此程序：

```
public static void spATTACHMENTS_CONTENT_WriteOffset(Guid gID, byte[] binFILE_POINTER, Int32 nFILE_OFFSET, byte[] byBYTES, IDbTransaction trn)
{
    IDbConnection con = trn.Connection;
    using ( IDbCommand cmd = con.CreateCommand() )
    {
        cmd.Transaction = trn;
        cmd.CommandType = CommandType.StoredProcedure;
        if ( Sql.IsOracle(cmd) )
            cmd.CommandText = "spATTACHMENTS_CONTENT_WriteOff";
        else
            cmd.CommandText = "spATTACHMENTS_CONTENT_WriteOffset";
        IDbDataParameter parID               = Sql.AddParameter(cmd, "@ID"              , gID                );
        IDbDataParameter parFILE_POINTER     = Sql.AddParameter(cmd, "@FILE_POINTER"    , binFILE_POINTER    );
        IDbDataParameter parMODIFIED_USER_ID = Sql.AddParameter(cmd, "@MODIFIED_USER_ID",  Security.USER_ID  );
        IDbDataParameter parFILE_OFFSET      = Sql.AddParameter(cmd, "@FILE_OFFSET"     , nFILE_OFFSET       );
        IDbDataParameter parBYTES            = Sql.AddParameter(cmd, "@BYTES"           , byBYTES            );
        cmd.ExecuteNonQuery();
    }
} 
```

但我收到以下错误：

> *无效的文本、ntext 或图像指针值 0x000000000000000000000000000000000。*

错误发生在`cmd.ExecuteNonQuery();`我的存储过程方法的行上。

存储过程：

```
Create Procedure dbo.spATTACHMENTS_CONTENT_WriteOffset
    ( @ID                   uniqueidentifier
    , @FILE_POINTER         binary(16)
    , @MODIFIED_USER_ID     uniqueidentifier
    , @FILE_OFFSET          int
    , @BYTES                image
    )
with encryption
as
  begin
    set nocount on

    -- 10/22/2005 Paul.  @ID is used in Oracle and MySQL. 
-- #if SQL_Server /*
    updatetext ATTACHMENTS_CONTENT.ATTACHMENT
               @FILE_POINTER
               @FILE_OFFSET
               null -- 0 deletes no data, null deletes all data from insertion point. 
               @BYTES; 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T18:14:13.523

由于您每行只上传一个文件，因此使用普通的 UPDATE 而不是不必要地摆弄指针和偏移量会容易得多。该命令可以像这样简单：

```
UPDATE ATTACHMENTS_CONTENT SET ATTACHMENT = @BYTES Where ID=@ID 
```

我不确定你的 ID 字段是什么，所以我只写了 ID，但我相信你可以用正确的替换它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T18:16:00.283

好吧，你还没有填写 binFILE_POINTER[]，所以它会充满零。

我猜这就是：

```
*Invalid text, ntext, or image pointer value 0x00000000000000000000000000000000.* 
```

来自……

# erlang - Erlang 列表：map 行为异常

> ID：14986603
> 
> 赞同：2
> 
> 时间：2013-02-20T17:51:47.143
> 
> 标签：erlang

好的，这里是：

我有一段这样的代码：

```
A=lists:map(fun(Result) -> Result#o.prop1 
   end, ResultList),
B=lists:map(fun(Result) -> io:format("~p~n",Result#o.prop2),
   Result#o.prop2 
   end, ResultList),
io:format("~p ~p",[A,B]) 
```

在这段代码之前，有一个来自数据库搜索的结果列表（每个结果都有一个标记为“0”的 prop1 值和一个标记为“74”的 prop2 值）。

发生的情况是 A 打印正确（“[0,0]”），而 B 元素的第一次打印是正确的（“74”的两次打印），列表本身打印为“JJ”（这些字符是每次执行总是不同的）

如果我按元素打印删除元素，或者即使我切换顺序（B 行，然后 A 行），我总是会搞砸 B。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T18:16:49.710

您看到 J 而不是 74 的原因是因为 Erlang 将字符串视为整数列表，而 J 在 ASCII 中是 74（十进制）。

```
1> io:format("~s~n", [[74, 74]]).
JJ
ok
2> io:format("~s~n", [[71, 72, 73, 74, 75]]).
GHIJK
ok
3> io:format("~p~n", [[71, 72, 73, 74, 75]]).
"GHIJK"
ok 
```

# ruby-on-rails - Rails：模板文件夹

> ID：14986606
> 
> 赞同：0
> 
> 时间：2013-02-20T17:52:00.327
> 
> 标签：ruby-on-rails, templates

再会，

我尝试了一些 Rails 基础知识。

我想创建一个模板并在我的布局文件中使用它们。

我创建了这个文件：views/template/sidebar.html.erb

```
 <% content_for (:sidebar) do %>

<ul>
    <li>TEST</li>
    <li>TEST</li>
</ul>
<% end %> 
```

还有我的布局文件：views/layouts/test.html.erb

```
 <%= yield :sidebar %> 
```

出现：模板丢失

出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T18:27:10.227

content_for 需要在包含的视图中。您可以将其放入操作的视图中。或者，（可能是你想做的）你可以

```
<%= render :partial => "template/sidebar" %> 
```

从你的行动的角度来看。您必须将文件从 sidebar.html.erb 重命名为 _sidebar.html.erb。

# python - python open(file) 只读取了大约 2507000 行？

> ID：14986607
> 
> 赞同：3
> 
> 时间：2013-02-20T17:52:01.927
> 
> 标签：python, io

我尝试使用 python 读取一个大文件，但似乎 python 只处理大约 2507000 行然后停止。你能建议为什么吗？

我在 Windows 上使用 Python 2.7 32 位。我还发布了我正在使用的代码。谢谢。

```
counter = 0
with open(input) as file:
    for line in file:
        counter += 1
        if counter % 1000 == 0:
            sys.stderr.write(str(counter) + "lines processed.\n") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T07:25:40.670

不同的程序可能会以不同的方式计算行数，这取决于它们希望如何分隔行。DOS/Windows 约定是`\r\n`，Unix 约定是`\n`作为分隔符。

如果您使用通用换行符模式打开文件`open(filename, "U")`，您的程序将识别所有不同的分隔符。

# c - 使用信号量来避免竞争条件

> ID：14986608
> 
> 赞同：0
> 
> 时间：2013-02-20T17:52:04.973
> 
> 标签：c, linux, shared-memory, semaphore, race-condition

我必须使用进程创建一个竞争条件程序，我也是。现在，我正在尝试使用信号量来解决它。我有两个关键部分，我正在尝试使用我在`initStem()`using中创建的信号量来保护它们`semctl()`。 `P()`并`V()`增加和减少第二个参数中指定的信号量的互斥量。

不幸的是，我的比赛条件似乎仍然存在：我的输出是：

```
value in parent: 4
value after child exec: 4 
```

什么时候应该：

```
value in parent: 4
value after child exec: 5 
```

(5 + 1 - 1 = 5...)

这是我的代码：

```
#define KEY 4567
#define PERMS 0660
#define ID_PROJ "race"
#define NB_SEMAPHORES 1

int initSem(char **argv);
int P(int semid, int semnum);
int V(int semid, int semnum);

int main(int argc, char **argv) {

    int id, pid1;
    int *shared;
    int tmp;

if ((id = shmget(KEY, 2*sizeof(int), IPC_CREAT | PERMS)) == -1) {
    perror("shmget");
    exit(-1);
}

shared=(int *)shmat(id, NULL, 0);
shared[0]=5; // value
shared[1]=initSem(argv); // semaphore id

if ((pid1=fork()) == 0) {
    P(shared[1], 0); // Start critical section
    tmp=shared[0];
    tmp++;
    sleep(2);
    shared[0]=tmp;
    V(shared[1], 0); // End critical section
    exit(0);
}
else {
    P(shared[1], 0); // Start
    tmp=shared[0];
    tmp--;
    sleep(4);
    shared[0]=tmp;
    V(shared[1], 0); // End

    printf("value in parent: %d\n", shared[0]);

    waitpid(pid1, NULL, 0);
    printf("value after child exec: %d\n", shared[0]);
    shmctl(id, IPC_RMID, NULL);
}
} 
```

**所以我想知道**：我是否正确使用了我的信号量？我在两个进程中使用相同的信号量是否正确？

编辑 ：

以下是我用来与信号量交互的 3 个函数：

```
int initSem(char **argv) {
    int i,semid;
    key_t key=ftok(argv[0], 'P');
    semid=semget(key, NB_SEMAPHORES, IPC_CREAT | PERMS);
    for(i=0 ; i<NB_SEMAPHORES ; i++)
            semctl(key, i, SETVAL, 1);
    return semid;
}

int P(int semid, int semnum) {
    struct sembuf op;
    op.sem_num=semnum;
    op.sem_op=-1;
    op.sem_flg=0;
    semop(semid, &op, 1);
}

int V(int semid, int semnum) {
    struct sembuf op;
    op.sem_num=semnum;
    op.sem_op=1;
    op.sem_flg=0;
    semop(semid, &op, 1);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T22:01:11.400

好的，所以问题出`initSem`在我使用的地方

```
semctl(key, i, SETVAL, 1); 
```

代替

```
semctl(semid, i, SETVAL, 1); 
```

否则我的代码是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T17:55:37.897

确保使用设置为非零来创建[`sem_init()`](http://pubs.opengroup.org/onlinepubs/7908799/xsh/sem_init.html)信号`pshared`量

# java - java* 将默认屏幕的位置设置为 (0,0)

> ID：14986611
> 
> 赞同：1
> 
> 时间：2013-02-20T17:52:15.030
> 
> 标签：java, location, this

我试图将我的默认框架的位置更改为点 0,0 但是当我使用它时。它没有给出建议。当我尝试这样做时。setLocation(0,0); 它给出了一个错误。我不知道如何将我的第一帧设置为 Jframe，例如：

```
 Jframe frame = MYFRAME??; 
```

*我正在使用摇摆谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:56:42.427

```
JFrame frame = new JFrame();
frame.setLocation(0,0); 
```

但不要把它放在那里。请参阅[如何以最佳方式定位 Swing GUI？](https://stackoverflow.com/q/7143287/418556)( `setLocationByPlatform(true)`) 以获得更好的选择。

![](../Images/2df12300d0a17e7b750c5283eff2a786.png)

# java - 如何从给定的字母中找到最长的单词。

> ID：14986615
> 
> 赞同：-3
> 
> 时间：2013-02-20T17:52:24.117
> 
> 标签：java

假设我有

```
String letters="CATOPHAPY"; 
```

我有字典以数组的形式检查。

```
String[] dict=new String[996]; 
```

我如何从字母中构造最长的单词并用我以前拥有的 dict 中的 vocab 检查它

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T17:59:09.337

1.  准备一个字典单词数组，但要对每个条目的字母进行排序；
2.  按单词大小对字典本身进行降序排序；
3.  按照与字典中相同的顺序对输入字符串中的字母进行排序；
4.  从上到下遍历字典并找到所有字母都出现在输入中的第一个条目。由于排序，这可以实现为 O(n)。

广告 1、3。

```
char[] toSort = original.toCharArray();
Arrays.sort(toSort);
String sorted = new String(toSort); 
```

广告 2。

```
Arrays.sort(dict, (String a, String b) -> b.length() - a.length()); 
```

广告 4。

```
boolean isMatch(String dictWord, String inputWord) {
  for (int i = 0, j = 0; i < dictWord.length();) {
    if (j >= inputWord.length()) return false;
    char d = dictWord.charAt(i), n = inputWord.charAt(j);
    if (d < n) return false;
    if (d >= n) j++;
    if (d == n) i++;
  }
  return true;
} 
```

# mysql - 3表SQL查询

> ID：14986616
> 
> 赞同：0
> 
> 时间：2013-02-20T17:52:33.430
> 
> 标签：mysql, sql, select

我对 SQL 没有丰富的经验，所以我试图用下表来制定一个查询：

```
 TABLE `customerdeal` (
   `id` ,
   `customerid` 
   `dealid` 
   PRIMARY KEY (`id`),
   KEY `dealid` (`dealid`),
   KEY `customerid` (`customerid`),

  TABLE `deal` (
  `dealid`,
  `dname` 
  `description` 
  `restaurantid` 
   PRIMARY KEY (`dealid`),
   KEY `restaurantid` (`restaurantid`)

  TABLE `restaurant` (
  `restaurantid` 
  `name` 
 `username` 
 `password` 
  PRIMARY KEY (`restaurantid`) 
```

基本上，Customerdeal 表包含 2 个 id 值——一个 customerid 和一个 dealid。我已经成功创建了一个 SQL 代码，它将呈现存储在一个`$_customerid`值中的登录用户的 customerid。

用简单的英语，我现在要做的是创建一个 SQL 语句，它将：

*   `$_customerid`获取与值在同一行的dealid
*   使用所述 dealid 从所述 ID 下的交易表中呈现交易信息
*   获取餐厅信息如何在选定的交易行中保存外键

我一直在尝试不同的方法，但没有一个有效！如果有人可以帮助我，我将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T18:00:17.430

我很惊讶您没有为任何列声明任何类型。

我不确定我是否理解您要对查询进行的操作。你能澄清一下吗？你可以这样做：

```
 select d.dname as dealname, d.description as dealinfo, 
    r.description as restaurantinfo, r.name as restaurant name 
    from deal d, restaurant r, customer c 
    where r.restaurantid = d.restaurantid, d.dealid = c.dealid,
    c.customerid = 'whatever you want' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T17:59:58.767

如果我正确理解您的问题，则以下内容应该有效。

```
SELECT d.dname AS DealName, d.description AS DealDescription, r.name AS RestaurantName
FROM customerdeal c 
INNER JOIN deal d on d.dealid = c.dealid
INNER JOIN restaurant r on r.restaurantid = d.restaurantid
WHERE c.customerid = @customerid 
```

您需要将 @customerid 替换为您的实际客户 ID。

# ios - UI 表格控件中的部分

> ID：14986632
> 
> 赞同：0
> 
> 时间：2013-02-20T17:53:18.390
> 
> 标签：ios, objective-c

我在 UI 表格视图中创建了 3 个具有不同标题（标题）的部分，现在我直接将数据加载到单元格中，它与 section1（indexPath.section == 0）和 Section2（indexPath.section == 1）一起工作正常。但它不占用section3（indexPath.section == 2）。谁能告诉我我的错误。

这是代码。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath     
 *)indexPath
 {

static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [mainTable dequeueReusableCellWithIdentifier:CellIdentifier];
//  cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:nil];
if (cell == nil)
{

    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];

    if(indexPath.section == 0)
    {

        cell.textLabel.text = @"Insite  Mobile App Delegate";

        cell.detailTextLabel.text = @"Hi, Make following Changes in";

        cell.textLabel.textColor = [UIColor whiteColor];

        UILabel *dateLabel = [[UILabel alloc]initWithFrame:CGRectMake(180, -8, 300, 40)];
        dateLabel.textColor = [UIColor grayColor];
        dateLabel.font = [UIFont systemFontOfSize:12];
        dateLabel.backgroundColor = [UIColor clearColor];
        dateLabel.text = @"Feb 06, 2013";

        [cell addSubview:dateLabel];

    }

    if(indexPath.section == 1)
    {

        cell.textLabel.textColor = [UIColor whiteColor];
        cell.textLabel.text = @"Insite  Mobile App Delegate";

            cell.detailTextLabel.text = @"Hi, Make following Changes in";

        UILabel *titleTextField = [[UILabel alloc]initWithFrame:CGRectMake(10,-10, 300, 40)];
        titleTextField.text = @"Anary, Zubin";
        titleTextField.textColor = [UIColor whiteColor];
        titleTextField.backgroundColor = [UIColor clearColor];
        titleTextField.font = [UIFont boldSystemFontOfSize:16];
        [cell addSubview:titleTextField];

        UILabel *dateLabel = [[UILabel alloc]initWithFrame:CGRectMake(180, -8, 300, 40)];
        dateLabel.textColor = [UIColor grayColor];
        dateLabel.font = [UIFont systemFontOfSize:12];
        dateLabel.backgroundColor = [UIColor clearColor];
         dateLabel.text = @"Feb 06, 2013";

        [cell addSubview:dateLabel];

    }

    else if(indexPath.section == 2)
    {

        cell.detailTextLabel.text = @"Daily Mobile Touch Base";
        cell.textLabel.textColor = [UIColor whiteColor];
        cell.textLabel.text = @"1:00 pm – 1:30 | M1 - 5026 ";
        cell.imageView.image = [UIImage imageNamed:@"iPhone_webx.png"];
        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

    cell.imageView.image = [UIImage imageNamed:@"iPhone_webx.png"];

    }

}cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;  
return cell;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{if(section==0){ return 4;}

else if(section==1)
{
    return 3;
}
else if (section==2)
{
       return 3;
}

else
    return 0;
    }

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{return 3;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T18:02:17.473

试试这个

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath     *)indexPath
{
static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];

    if(indexPath.section == 0)
    {
      cell.textLabel.text = @"Insite  Mobile App Delegate";

      cell.detailTextLabel.text = @"Hi, Make following Changes in";
      cell.textLabel.textColor = [UIColor whiteColor];

      UILabel *dateLabel = [[UILabel alloc]initWithFrame:CGRectMake(180, -8, 300, 40)];
      dateLabel.textColor = [UIColor grayColor];
      dateLabel.font = [UIFont systemFontOfSize:12];
      dateLabel.backgroundColor = [UIColor clearColor];
      dateLabel.text = @"Feb 06, 2013";
      [cell addSubview:dateLabel];
    }

    if(indexPath.section == 1)
    {
      cell.textLabel.textColor = [UIColor whiteColor];
      cell.textLabel.text = @"Insite  Mobile App Delegate";
      cell.detailTextLabel.text = @"Hi, Make following Changes in";
      UILabel *titleTextField = [[UILabel alloc]initWithFrame:CGRectMake(10,-10, 300, 40)];
      titleTextField.text = @"Anary, Zubin";
      titleTextField.textColor = [UIColor whiteColor];
      titleTextField.backgroundColor = [UIColor clearColor];
      titleTextField.font = [UIFont boldSystemFontOfSize:16];
      [cell addSubview:titleTextField];

      UILabel *dateLabel = [[UILabel alloc]initWithFrame:CGRectMake(180, -8, 300, 40)];
      dateLabel.textColor = [UIColor grayColor];
      dateLabel.font = [UIFont systemFontOfSize:12];
      dateLabel.backgroundColor = [UIColor clearColor];
      dateLabel.text = @"Feb 06, 2013";
      [cell addSubview:dateLabel];
    }
    if(indexPath.section == 2)
    {
      cell.detailTextLabel.text = @"Daily Mobile Touch Base";
      cell.textLabel.textColor = [UIColor whiteColor];
      cell.textLabel.text = @"1:00 pm – 1:30 | M1 - 5026 ";
      cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
      cell.imageView.image = [UIImage imageNamed:@"iPhone_webx.png"];
    }
  cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;  
  return cell;
} 
```

# php - PHP/SQL 注册表单不起作用

> ID：14986634
> 
> 赞同：0
> 
> 时间：2013-02-20T17:53:29.267
> 
> 标签：php, sql

我正在尝试为我的网站创建注册表单，但我的 sql 查询返回错误

```
$sql failed: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''username','password','forename','surname','title') VALUES ('f','f','f','f','f')' at line 1 
```

这是我在 signupaction.php 中的代码：

```
<?php 
include('connect.php');
$username=$_POST["forename"];
$password=$_POST["surname"];
$forename=$_POST["username"];
$surname=$_POST["password"];
$title=$_POST["title"];
$sql = "INSERT INTO users ('username','password','forename','surname','title') VALUES ('$username','$password','$forename','$surname','$title')";
$result = mysql_query($sql, $link)  or exit('$sql failed: '.mysql_error());
echo($result);
?> 
```

我不知道为什么这不起作用，任何建议将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:55:09.873

您不需要用单引号将字段名称括起来。您可以按原样离开或使用反引号。使用引号使 mysql 认为您正在处理字符串。

尝试这样的事情 -

```
$sql = "INSERT INTO users (username,password,forename,surname,title) VALUES  
        ('$username','$password','$forename','$surname','$title')"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T19:14:07.697

不要在 SQL 语句的第一组括号中引用字段名称。

并切换到mysqli！让您的生活更轻松。

# c - 设置字节中的特定位

> ID：14986636
> 
> 赞同：-3
> 
> 时间：2013-02-20T17:53:34.840
> 
> 标签：c

我有一个等效的二进制值 1 **110** 11 我需要将突出显示的位设置为 0 **101** 00 ，我需要一个结果值为 1 **101** 11。如何设置这些位并保持不变。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T17:58:26.417

这应该有助于[http://en.wikipedia.org/wiki/Bitwise_operations_in_C](http://en.wikipedia.org/wiki/Bitwise_operations_in_C)

如果您需要工作示例，请告诉我，但我鼓励您自己解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T18:22:19.217

```
unsigned char my_byte = 0x3B; // 0b00111011

// clear the bits
my_byte &= 0xE3;

// set the bits
my_byte |= 0x14; 
```

You'll find many people have many different preferences on how to write the 0xE3 and 0x14\. Some like to shift bits, however ultimately this is the code that should be produced.

# java - 在 Chrome 中运行的 Java Applet 中的套接字读取挂起

> ID：14986640
> 
> 赞同：1
> 
> 时间：2013-02-20T17:53:42.477
> 
> 标签：java, sockets, google-chrome, applet, freeze

我有一个简单的服务器，它监听连接并在被点击时转储 100k 字节的数据。

我有一个相应的客户端，它与服务器建立套接字连接，读取 100k 字节并退出。

两者都以 1k 字节间隔报告传输。

如果我在 Eclipse 下的线程中运行它们，它们工作正常。如果我将两者作为单独的电源运行（在单独的外壳中使用“java ...”），它们工作正常。如果我将服务器作为主服务器运行并从在 Eclipse 中运行的小程序调用客户端，它们就可以正常工作。

***问题：

如果我将服务器作为主服务器运行，并在与服务器在同一（Windows）主机上运行的 Chrome 浏览器中将客户端作为小程序调用，它们会在服务器写入 24k 字节而客户端读取大约 9k 字节后阻塞。

我想构建一个可以从服务器获取大文件的小程序，但这使它变得困难。

由于这些消息，我很确定服务器被未读输出阻塞。我无法弄清楚为什么客户端被阻止。

# android - 继续为 apple-touch-icon.png 获取 404

> ID：14986650
> 
> 赞同：29
> 
> 时间：2013-02-20T17:54:18.653
> 
> 标签：android, ios, google-chrome, safari, apple-touch-icon

我们不断收到以下两个文件的 404：

```
/apple-touch-icon-precomposed.png: 685 Time(s)
/apple-touch-icon.png: 523 Time(s) 
```

我一直在搜索我的移动网站档案，寻找这个 404 的罪魁祸首，并且我的代码中没有指向`apple-touch-icon.png`.

在 Sublime Text 2 中执行 a`Find in folder...`会为 提供零结果`apple-touch-icon`：

```
Searching 100 files for "apple-touch-icon"

0 matches across 0 files 
```

我们为 webapps 使用 Apple 元标记：

```
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black"> 
```

`apple-touch-icon`使用这些元标签会导致 iPhone默认搜索一个吗？我们没有提供图标，但我们应该提供吗？我们真的很想删除这个 404。

浏览 Apple 的[开发者文档](http://developer.apple.com/library/safari/#documentation/AppleApplications/Reference/SafariHTMLRef/Articles/MetaTags.html)并没有提供任何提示来强化我的理论。

当我们发现这发生在 iOS 和 Android 上时，无论浏览器如何，情节都变得更加复杂。Firefox、Safari 和 Chrome 都在试图找到这个`apple-touch-icon`。

我使用 HTML5 Mobile Boilerplate 作为我的 WebApp 的启动器，它有一个名为`helper.js`. `helper.js`里面有这个函数，我从我们的代码中删除了：

```
/**
     * iOS Startup Image helper
     */

    MBP.startupImage = function() {
        var portrait;
        var landscape;
        var pixelRatio;
        var head;
        var link1;
        var link2;

        pixelRatio = window.devicePixelRatio;
        head = document.getElementsByTagName('head')[0];

        if (navigator.platform === 'iPad') {
            portrait = pixelRatio === 2 ? 'img/startup/startup-tablet-portrait-retina.png' : 'img/startup/startup-tablet-portrait.png';
            landscape = pixelRatio === 2 ? 'img/startup/startup-tablet-landscape-retina.png' : 'img/startup/startup-tablet-landscape.png';

            link1 = document.createElement('link');
            link1.setAttribute('rel', 'apple-touch-startup-image');
            link1.setAttribute('media', 'screen and (orientation: portrait)');
            link1.setAttribute('href', portrait);
            head.appendChild(link1);

            link2 = document.createElement('link');
            link2.setAttribute('rel', 'apple-touch-startup-image');
            link2.setAttribute('media', 'screen and (orientation: landscape)');
            link2.setAttribute('href', landscape);
            head.appendChild(link2);
        } else {
            portrait = pixelRatio === 2 ? "img/startup/startup-retina.png" : "img/startup/startup.png";
            portrait = screen.height === 568 ? "img/startup/startup-retina-4in.png" : portrait;
            link1 = document.createElement('link');
            link1.setAttribute('rel', 'apple-touch-startup-image');
            link1.setAttribute('href', portrait);
            head.appendChild(link1);
        }

        //hack to fix letterboxed full screen web apps on 4" iPhone / iPod
        if ((navigator.platform === 'iPhone' || 'iPod') && (screen.height === 568)) {
            if (MBP.viewportmeta) {
                MBP.viewportmeta.content = MBP.viewportmeta.content
                    .replace(/\bwidth\s*=\s*320\b/, 'width=320.1')
                    .replace(/\bwidth\s*=\s*device-width\b/, '');
            }
        }
    }; 
```

删除它后，我们仍然得到 404。我难住了。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-20T18:55:53.370

> 使用这些元标记会导致 iPhone 默认搜索 apple-touch-icon 吗？我们没有提供图标，但我们应该提供吗？我们真的很想删除这个 404。

是的。温你加

```
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black"> 
```

对于您的网站，这意味着用户可以在他的主屏幕上创建一个书签，该书签不是在 Safari 中打开，而是在一个看起来像“本机”应用程序的 web 视图中打开。您应该提供这些图像作为主屏幕的应用程序图标。

这可能是您正在寻找的提示：http: [//developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/ConfiguringWebApplications/ConfiguringWebApplications.html](http://developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/ConfiguringWebApplications/ConfiguringWebApplications.html)

# ruby-on-rails - 宝石安装心理错误

> ID：14986663
> 
> 赞同：2
> 
> 时间：2013-02-20T17:55:01.213
> 
> 标签：ruby-on-rails, psych

我正在尝试捆绑安装一个rails项目，但我被卡住了......当我尝试运行时，`gem install psych`我得到的只是：

```
Building native extensions.  This could take a while...
ERROR:  Error installing psych:
        ERROR: Failed to build gem native extension.

        /Users/gibatronic/.rvm/rubies/ruby-1.9.3-p327/bin/ruby extconf.rb
checking for yaml.h... no
yaml.h is missing. Try 'port install libyaml +universal' or 'yum install libyaml-devel'
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --without-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/Users/gibatronic/.rvm/rubies/ruby-1.9.3-p327/bin/ruby
    --with-libyaml-dir
    --without-libyaml-dir
    --with-libyaml-include
    --without-libyaml-include=${libyaml-dir}/include
    --with-libyaml-lib
    --without-libyaml-lib=${libyaml-dir}/lib

Gem files will remain installed in /Users/gibatronic/.rvm/gems/ruby-1.9.3-p327/gems/psych-1.3.4 for inspection.
Results logged to /Users/gibatronic/.rvm/gems/ruby-1.9.3-p327/gems/psych-1.3.4/ext/psych/gem_make.out 
```

我正在`ruby 1.9.3p327`运行`rails 3.2.12``OS X 10.8.2`

我已经安装`libyaml 0.1.4`了`rvm pkg install libyaml`

我真的不知道该怎么办了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-03T18:05:13.613

```
apt-get install libyaml-dev 
```

在基于 Debian 7 的系统下运行的情况下进行了修复（对于 Ubuntu 可能相同）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T22:18:05.043

安装 libyaml

```
port install libyaml +universal 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-09T12:38:35.157

就我而言，我必须设置 CFLAGS 和 LDFLAGS 变量：

```
# ensure libyaml is installed
port install libyaml +universal

# if you like you can check the location of the installied files (especially the .h file)
# port contents libyaml

# now configure with these options
CFLAGS="-I/opt/local/include/ "  LDFLAGS="-L/opt/local/lib/" ./configure
make
sudo make install 
```

# ios - 从用户向开发者发送 ios 崩溃报告

> ID：14986664
> 
> 赞同：-1
> 
> 时间：2013-02-20T17:55:01.113
> 
> 标签：ios, ipad, licensing, client, plcrashreporter

我正在开发一个内部 ipad 应用程序。我把它交给客户进行测试。
该应用程序有时会在他的 iPad 上崩溃。

我怎样才能得到他的崩溃报告给我？

在我的测试 ipad 上，我转到*Xcode->Organizer*，我有设备日志。人们建议我可以使用**PLCrashReporter**。所以我开始使用它。我可以使用它吗？

还是有任何许可问题？为了在我的设备上进行测试，我尝试使用**PLcrashreporter**。它给我带来了问题。这是我的另一个问题的链接。
[应用程序崩溃时 PLCrashReporter 未打开](https://stackoverflow.com/questions/14970771/plcrashreporter-doesnt-open-when-the-app-crashes)

或者我应该放弃这个并尝试另一种方式从客户端获取崩溃报告？如果您需要更多信息，请询问。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T18:15:37.690

曲棍球应用程序也是一个很好的选择。他们有一个非常好的用户界面，它很容易支持临时、内部和 App Store 分发。

如果您将 .dsym 与二进制文件一起上传，它还会自动对服务器上的崩溃报告进行 sybmolic。

然后，您可以获得每日/每周报告，并通过网站按需访问崩溃数据。

[http://www.hockeyapp.net](http://www.hockeyapp.net)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T18:04:35.473

TestFlight 将自动为您记录崩溃报告。你只需要在你的项目中添加一点代码。这可能比您现在想要完成的工作更多，因为您必须将您的应用程序和用户集成到 TestFlight 管道中，但它会自动执行您想要的大部分内容。它也是免费的（据我所知）。我们发现它真的很有帮助。

[https://www.testflightapp.com](https://www.testflightapp.com)

开发工具包：

[https://www.testflightapp.com/sdk/download/](https://www.testflightapp.com/sdk/download/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T18:05:20.127

Testflight 非常适合这种东西。

Testflight 允许您向测试人员“测试飞行”您的应用程序 -

*   您可以将您的测试版本上传到 testflight

*   testflight 将通过电子邮件通知您的测试人员

*   允许他们从电子邮件下载和安装

*   将记录崩溃，并在您上传 dsym 文件时对其进行符号化。

[https://testflightapp.com/](https://testflightapp.com/)

您必须注册您的测试设备，并且设置起来有点复杂（但也不比任何其他第 3 方 sdk 复杂），尽管它不会像操作系统杀死它时那样捕获某些崩溃。

# gwt - gwt popuppanel根据条件取消onclose进程

> ID：14986666
> 
> 赞同：0
> 
> 时间：2013-02-20T17:55:04.077
> 
> 标签：gwt, event-handling, popuppanel

我有一个弹出面板

```
 private PopupPanel simplePopup; 
```

弹出窗口在应用程序中打开。当用户在其外部单击时，弹出窗口将关闭。这是默认行为。如果满足条件，我想覆盖该行为并且不要关闭弹出窗口。我有这样的想法：

```
 simplePopup.addCloseHandler(new CloseHandler<PopupPanel>() {

        @Override
        public void onClose(CloseEvent<PopupPanel> arg0) {
            if (conditionIsMet) {
              // do something here to avoid closing the popup
           }
        }
    }); 
```

但我不知道如何防止弹出窗口关闭。我读过一些关于*onPreviewNativeEvent*的内容，但我不知道如何使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T03:42:15.200

您需要禁用 autoHide 标志。默认隐藏行为是由于此标志。您可以使用以下代码段禁用它。

```
simplePopup.setAutoHideEnabled( false ); 
```

您也可以通过构造函数禁用它。

您可以通过将 hide 方法重写为基于某些条件来控制隐藏

```
 simplepopup = new PopupPanel( false)
    {
        @Override
        public void hide( boolean autoClosed )
        {
            if( condition met )
            {
                super.hide();
            } 
        }
    }; 
```

# html - 我应该先实现布局还是代码？

> ID：14986673
> 
> 赞同：0
> 
> 时间：2013-02-20T17:55:16.897
> 
> 标签：html, css, ruby-on-rails, stylesheet

我是 Rails 的新手，一般是编程。我用 HTML/CSS 完成了网页设计。我应该在什么时候开始在我的代码中实现它？在开始编码之前，我是否应该已经为它完成样式表？有没有快速/简单的方法来做到这一点？

我只是不确定何时开始添加我的网页设计。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T18:03:11.810

我通常先写我的测试，而不用担心应用程序的呈现。一旦我的测试到位，我就会开始实现代码以使这些测试通过。我保持 UI 本身尽可能简单，我希望它首先工作。我的经验是，在您使用 UI 时，它往往会经历多次迭代，但大多数功能保持不变。

对我来说，让应用程序尽可能稳定是工作#1。然后我可以攻击演示文稿，知道可以依赖底层代码而不是设计中的一个因素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T18:33:51.833

当我开始时，我会从设计师那里得到一个完整的 HTML/CSS 站点，然后开始连接已经部分存在的 RoR。

我这样做了三遍。

您的基本问题“在哪里/何时”开始添加代码，实际上取决于您、您的应用程序、您的 HTML/CSS。我不认为有一个真正的答案。

我所做的是从 app/views/layouts/application.html.erb 开始，并让新的 HTML/CSS 正常工作。但那是因为我收到的 HTML/CSS 设计是针对一个主页和一个示例二级页面的。无论如何，我认为在 HTML/CSS 已经存在的情况下，您要关注的第一个 RoR 文件是：

```
app/view/layouts/application.html.erb 
```

当您使第一个布局正常工作时，您将向管道清单添加内容，即：

```
app/assets/stylesheets/application.css 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T17:57:17.503

我在代码和布局之间来回走动。

我建议让*一些*代码工作，然后处理布局。但是您不必第一次就完美地布局布局，您可以在获得更多代码工作后返回并继续处理布局。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T17:59:08.160

我会开始从控制器向视图输出必要的数据，然后，我会将样式应用于页面。

# asp.net - 从可视化 Web 开发人员将字段插入 SQL Server

> ID：14986674
> 
> 赞同：0
> 
> 时间：2013-02-20T17:55:17.483
> 
> 标签：asp.net, sql-server-2008

我正在使用 Visual Web Developer 2008 Express Edition。我有一系列从我的 SQL Server 2008 数据库生成的 6 个下拉列表。我还有一个网格视图，它根据两个下拉列表选择显示数据库中的行。

这是有效的，但我需要更进一步。使用相同的六个下拉列表，我需要更新表格。主键实际上是网页上的六列。

理想情况下，我想让用户从下拉列表中选择信息，然后点击一个按钮，将行插入数据库。然后刷新网格视图以确认插入。

我尝试按照我用来创建网格视图的教程使用详细信息视图。

所以我的最终问题是如何将 SQL`INSERT`语句附加到按钮并让按钮插入数据库并刷新网格视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T18:44:56.770

如果您使用的是 SQL 数据源，则在 button_click 事件中传入

```
SQLDataSource1.InsertParameters["ParameterName"].DefaultValue = +yourvalue+;
 //use this command to pass in all your values
try 
{
SQLDataSource1.Insert();
GridView1.DataBind();
}
catch (Exception ex)
{
// Deal with the exception if encountered here.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T07:28:48.793

您必须创建一个单独的函数来填充网格，让函数的名称为“POPULATEGRIDVIEW()”.. 在此函数中，您将编写代码来绑定 GridView ... 之后生成 Button1_Clik 事件然后编写插入查询的代码，就像我在举一个例子

```
protected void Button1_Click(object sender, EventArgs e)
{
    string query="insert into emp values('"+ddl1.text+"','"+ddl2.text+"') ";
    SqlCommand cmd=new SqlCommand(query,con);
    con.Open();
    if((cmd.ExecuteNonQuery)==True)
    {
        POPULATEGRIDVIEW();
    }
   else
   {
       MessageBox.Show("Some Problem Occure in Insertion ")
   }
} 
```

试试看....

# jquery - jquery mobile .on 在页面加载上不起作用，仅在刷新后

> ID：14986685
> 
> 赞同：0
> 
> 时间：2013-02-20T17:55:59.080
> 
> 标签：jquery, jquery-mobile

此功能仅在我刷新 jquery mobile 上的页面后才有效。有什么想法吗？

```
$('.item').on('touchstart pageinit', function(){ 
```

我正在尝试制作一些可点击的东西来切换类..即：一个按钮。仅在刷新后有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T18:13:31.017

试试这个：

```
$(document).on('touchstart pageinit', '.item', function(){ 
```

# playframework-2.0 - Play Framework 2.0 H2浏览器端口设置

> ID：14986687
> 
> 赞同：1
> 
> 时间：2013-02-20T17:56:06.680
> 
> 标签：playframework-2.0, h2

有谁知道如何配置播放框架 H2 控制台的端口？我知道默认值为 8082，但不幸的是，该端口已在使用中，我不确定如何将其更改为其他端口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T07:50:51.997

我不确定这在这种情况下是否有效，但 H2 将控制台的端口存储在文件中`~/.h2.server.properties`（即`.h2.server.properties`在当前用户主目录中命名的文件）。该文件的内容是连接下拉列表中的条目，以及一些选项：

```
#H2 Server Properties
0=...
1=...
2=...
webAllowOthers=false
webPort=8082
webSSL=false 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T19:07:20.573

如果可以暂时释放 8082 端口，打开 H2 控制台并在选项中更改端口。之后停止控制台并再次运行使用 8082 的软件，下次 H2 将在选项中保存的端口上启动。

# c# - 除非逐步执行代码，否则 WPF ViewModel 不会设置值

> ID：14986688
> 
> 赞同：0
> 
> 时间：2013-02-20T17:56:08.237
> 
> 标签：c#, wpf, .net-4.0, viewmodel

我正在使用 WPF .NET Framework 4.0

我有一个名为 Facility 的对象。此类包含许多其他对象和对象集合。我对任何其他对象集合都没有以下问题。

设置：我从列表中选择我的设施。我初始化 ViewModel 如下：

```
 var facilityResults = _app.FacilityManager.Get(facility.Id);
            if (facilityResults.Success)
            {
                ViewModel.Facility = facilityResults.Data;
                ViewModel.Facility.PropertyChanged += DataChanged;

            }
            else
            {
                ViewModel.ValidationResults = facilityResults.ManagerActionResultCollection;
                return;
            } 
```

我的收藏定义如下：

```
 public virtual ObservableCollection<FacilityNoticeDetail> FacilityNoticeDetails
    {
        get { return _facilityNoticeDetails; }
        set
        {
            _facilityNoticeDetails = value;
            OnPropertyChanged("FacilityNoticeDetails");
        }
    } 
```

就像我之前说的，它的定义就像任何其他对象集合一样。它是虚拟的，因此它知道对 FacilityNoticeDetail 的引用。

问题：

当我运行此解决方案时，即使我在数据库中有数据，该集合也是空的。所有其他对象加载正常。这是关键...如果我单步调试调试器并查看 facilityResults.Data 对象，该集合就在那里并且将被设置，但前提是我单步执行代码。

添加

facilityResults 是 ManagerActionResult 类型，它是一个自定义类：

```
 public class ManagerActionResult<T>
{
    public ActionResultCollection ManagerActionResultCollection { get; set; }
    public bool Success { get; set; }
    public T Data { get; set; }

    public ManagerActionResult()
    {
        Success = true;
        ManagerActionResultCollection = new ActionResultCollection();
    }

    public ManagerActionResult(bool valid, string message)
    {
        Success = valid;
        ManagerActionResultCollection = new ActionResultCollection();

    }
}

    public new ManagerActionResult<Facility> Get(int id)
    {
        var result = base.Get(id);

        if (result.Success)
        {
            var facility = result.Data;

            CalculateFeePayments(facility.Fees);

            CalculateContractPayments(facility.Contracts);
        }

        return result;
    }

    public ManagerActionResult<T> Get(int id)
    {
        var result = new ManagerActionResult<T>() { Success = true };

        try
        {
            var set = _context.Set<T>();

            var entity = set.Find(id);

            result.Data = entity;
        }
        catch (Exception ex)
        {
            result.Success = false;
            result.ManagerActionResultCollection.Add(new ErrorActionResult(false, ex.GetBaseException().Message, NotificationSeverityEnum.ERROR, ex.GetBaseException().StackTrace));
            Log.Error(ex.Message);
        }

        return result;
    } 
```

所做的只是使用上下文带回我的 Facility 对象及其关联数据。如果这仍然不清楚，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T23:15:39.343

我不确定你是否理解贾斯汀试图表达的观点。

如果您的集合名为 FacilityNoticeDetails，那么您需要更改语句

```
ViewModel.Facility = facilityResults.Data; 
```

到

```
ViewModel.FacilityNoticeDetails = facilityResults.Data; 
```

正如 BaconSah 所提到的，您实际上并没有向我们展示如何从您的视图中绑定到此集合。您将需要某种集合容器，例如列表框，其中 itemssource 绑定到 viewmodel 上的 FacilityNoticeDetails 属性。

我想我也在假设您已经正确连接了 OnPropertyChanged 代码。

这是一个很好的示例项目，您可以将其作为参考资料下载。 [http://archive.msdn.microsoft.com/mag200902MVVM/Release/ProjectReleases.aspx?ReleaseId=2026](http://archive.msdn.microsoft.com/mag200902MVVM/Release/ProjectReleases.aspx?ReleaseId=2026)

# macos - 在 Jmeter 中奇怪地复制和粘贴文本在 Mac 中不起作用

> ID：14986692
> 
> 赞同：14
> 
> 时间：2013-02-20T17:56:20.963
> 
> 标签：macos, jmeter

除了 Jmeter，我可以从任何地方复制粘贴。我正在使用 10.7.5 OSx Lion 和 Jmeter 版本是 2.9 r14

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-02-20T19:29:55.773

您使用的是哪种 Look N Feel：

*   跨平台

*   或系统

看： ![在此处输入图像描述](../Images/5b754d2e01ea4f500018997ab1b54f82.png)

如果使用跨平台切换到系统。

如果你想正确地学习 jmeter，这[本书](https://leanpub.com/master-jmeter-from-load-test-to-devops)会对你有所帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-05-02T14:07:50.940

很奇怪。

但是`Ctrl`+`c`复制和`Command`+`v`粘贴对我有用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-07-05T07:12:09.250

您可以尝试使用 `cmd` + `c` 从其他应用程序复制并使用 `control`+`v`粘贴到 masOS 上的 jmeter

# python - 如何为“RuntimeWarning：在乘法中遇到无效值”错误获取更详细的错误信息 numpy

> ID：14986693
> 
> 赞同：15
> 
> 时间：2013-02-20T17:56:21.763
> 
> 标签：python, numpy, runtime-error

有没有办法从 numpy 获取更详细的错误消息

“RuntimeWarning：在乘法中遇到无效值”

它来自我正在执行许多数组操作的代码中的某一行。我可以让 numpy 报告：

(1) 无效值的更多信息（inf?nan?）

(2) 导致问题的数组条目？

当然，我可以自己检查数组，但如果 numpy 能告诉我问题出在什么地方，那就太好了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T18:00:58.837

您可能至少可以通过[`numpy.seterrcall`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.seterrcall.html#numpy.seterrcall)（结合`numpy.seterr`链接中所示）获得有关错误类型的更多信息。至于找出哪个数组给出了问题，这可能是不可能的，因为`numpy`必然会创建临时数组：

```
a = b + (c*d)
#       ^This creates a temporary array before adding it to `a` 
```

当然，`seterr`如果您想知道代码中有问题的行号是什么，您可以使用引发异常而不是警告。

# html - CSS 浮动、溢出和绝对位置

> ID：14986694
> 
> 赞同：0
> 
> 时间：2013-02-20T17:56:23.533
> 
> 标签：html, css

我有一个带有下拉菜单的左侧浮动边栏，该菜单绝对定位并延伸到主要内容之上。

主要内容的背景颜色不得低于侧边栏。

一些内容还包含一个绝对定位的下拉菜单，其内容超出其父边界。

内容以块为单位。块应该完全浮动到侧栏的左侧，或者一旦侧栏被清除，它们应该占据整个水平宽度。

通常，除了内容中的下拉菜单外，所有这些规则都可以满足。这将通过对内容元素应用“溢出：隐藏”来完成，因为这将包含背景。但是在这种情况下，内容区域中的下拉菜单会导致问题，因为它会扩展超出其父垂直边界并导致它被隐藏。（我在演示中使用了“溢出：滚动”而不是“隐藏”来突出问题）。

编辑添加：我试过只使用'overflow-x：hidden'和overflow-y：visible'，但由于某种原因它不起作用。

[这是一个小提琴](http://jsfiddle.net/CPrjS/3/)

或者这里是html和css：

```
<body>
  <div id="sidebar">
    <div id="sidebar_dropdown">
        sidebar_dropdown
    </div>
  </div>
  <div class="content">
    some content
  </div>  
  <div id="content_2">
    something more content with an absolutly positioned drop down.
    <div id="dropdown">
      dropdown content
      <br/>
      dropdown content
      <br/>
      dropdown content
      <br/>
      dropdown content
      <br/>      
      dropdown content
      <br/>   
      dropdown content
      <br/>           
    </div>
    <br/>
    <br/>
    <br/>
    some content hidden by dropdown.
  </div>
    <div class="content">
    some content
  </div> 
  <div class="content">
    some content
  </div> 
  <div class="content">
    some content
  </div>     
</body> 
```

CSS：

```
#sidebar {
  float: right;
  margin:0 1em;
  background-color: #8888ff;
  height: 10em;
  width: 5em;
  position:relative;
}

#sidebar_dropdown {
  position: absolute;
  right: 0;  
  top: 1em;
  background-color: #888888;    
}

.content {
  margin: 1em 0;
  background-color: #ff8888;
  overflow: hidden;
}

#content_2 {
  margin: 1em 0;
  background-color: #88ff88;
  position: relative;
  overflow: scroll;    
}

#dropdown {
  background-color: #88ffff;
  position: absolute;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T18:14:02.907

如果你想在绝对元素上使用溢出：隐藏 -**在你的情况下**- 你将不得不用另一个反映它的父级的绝对元素包装它们（宽度和高度必须相同）。

HTML

```
<div id="hideOverflow">
    <div id="sidebar_dropdown">
        sidebar_dropdown
    </div>
</div> 
```

CSS

```
#hideOverflow { width: 5em; height: 10em; position:absolute; overflow:hidden; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T08:05:56.317

我通过使用 js 插入内容下拉列表解决了这个问题（我已经这样做了，所以这不是问题，因为它是通过 ajax 填充的）。

我不是相对于它所属的文本框插入它，而是在正文的顶部插入，然后从文本框计算它的位置。因此，它在渲染树上比应用了“溢出隐藏”的内容平面更高。

# java - TabPane 中的 JavaFX 控件不接收输入事件

> ID：14986695
> 
> 赞同：2
> 
> 时间：2013-02-20T17:56:24.040
> 
> 标签：java, scala, javafx-2, javafx

在我的应用程序中尝试将自定义控件添加到 BorderPane 时，我遇到了 JavaFX 问题。只要我只是将我的控件（编辑器）设置为内容（使用 setCenter），它就可以正常工作并接收输入事件（键盘和鼠标）。但是，当我尝试将其包装到 TabPane 和 Tab 控件中时，该控件不再接收任何事件并且似乎无法聚焦。我知道控件仍然存在于场景中，因为您仍然可以看到它。你只是无法与之互动。

以下代码是我现在正在使用的代码：

```
class EditorScene extends BorderPane {

  def setup() {
    // Default editor
    val tab = new javafx.scene.control.Tab("New File")
    val editor = new Editor(this)
    tab.setContent(editor)

    val tabs = new TabPane()
    tabs.getTabs().add(tab)

    setCenter(tabs)
    //setCenter(editor)
  }

  setup()
} 
```

在 setup() 的最后几行中，当我使用第二行 (setCenter(editor)) 时，它按预期工作，接收事件等。当我使用上面的行 (setCenter(tabs)) 时，它显然没有收到任何事件；至少不调用事件处理程序。

我可能忽略了一些非常明显的东西，但我似乎找不到错误。有任何想法吗？我会很感激任何提示。

# python - Numpy 矢量化作为带有参数的装饰器

> ID：14986697
> 
> 赞同：14
> 
> 时间：2013-02-20T17:56:33.897
> 
> 标签：python, numpy, decorator, python-decorators

我试图矢量化（同意，不是最有效的方法，但我的问题是关于装饰器的使用）以下函数

```
 @np.vectorize
 def diff_if_bigger(x, y):
     return y - x if y > x else 0

 x = np.array([5.6, 7.0])
 y = 8

 diff_if_bigger(x, y)
 # outputs array([2, 1]) which is not what I want 
```

**编辑**：重新启动 IPython 后，输出正常。

任何人都可以解释为什么即使第一个参数 x 在这里是 aray of的结果`diff_if_bigger`被转换成一个数组，与文档中的内容相反？？？？`np.int``np.float`

现在，我想强制浮点输出，所以我这样做了

```
 @np.vectorize('np.float')
 def diff_if_bigger(x, y):
     return y - x if y > x else 0
 # Error !!
 # TypeError: Object is not callable.

 @np.vectorize(otypes='np.float')
 def diff_if_bigger(x, y):
     return y - x if y > x else 0
 # Again error !!
 # TypeError: __init__() takes at least 2 arguments (2 given)

 @np.vectorize(otypes=[np.float])
 def diff_if_bigger(x, y):
     return y - x if y > x else 0
 # Still an error !!
 # TypeError: __init__() takes at least 2 arguments (2 given) 
```

顺便说一句，即使这个

```
 vec_diff = np.vectorize(diff_if_bigger, otypes=[np.float]) 
```

不工作！！！发生什么了？？

**编辑**：事实上，后者在我重新启动 IPython 后工作。

所以在我之前的两次编辑之后，我的问题现在是双重的：

1-如何使用 np.vectorize 作为带参数的装饰器？

2-如何清理 IPython 状态？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-20T18:02:59.553

为我工作：

```
>>> import numpy as np
>>> @np.vectorize
... def diff_if_bigger(x, y):
...      return y - x if y > x else 0
...
>>> diff_if_bigger(np.array([5.6,7.0]), 8)
array([ 2.4,  1\. ]) 
```

请注意，`np.vectorize`除了最简单的情况外，这并不是真正的装饰器。如果你需要指定一个显式的`otype`，使用通常的形式`new_func = np.vectorize(old_func, otypes=...)`或者使用`functools.partial`来获取一个装饰器。

还要注意`np.vectorize`，默认情况下，通过对第一个参数的函数求值来获取其输出类型：

> 的输出的数据类型`vectorized`是通过使用输入的第一个元素调用函数来确定的。

因此，如果您想确保它推断为输出 dtype（例如 use和 pass ） ，您应该通过`float`并返回。`float``float``else 0.0``y = 8.0`

# iphone - 如果标签有重音，NSXMLParser 不会得到所有标签

> ID：14986699
> 
> 赞同：0
> 
> 时间：2013-02-20T17:56:38.093
> 
> 标签：iphone, ios, objective-c

我有一个对数据库进行不同更改的网络服务。当我使用带有 sql 标签的 web 服务返回行时，如下所示：

```
<sql>
   DELETE FROM TABLE WHERE ...
</sql>
<sql>
   INSERT INTO TABLE WHERE ...
</sql>
<sql>
   UPDATE TABLE SET ... WHERE ...
</sql> 
```

我将此代码保存在 NSMutableArray 中，如下所示：

```
-(void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName  namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName  {
    if ([elementName isEqualToString:@"sql"]){
        [maResultado addObject:[NSMutableString stringWithFormat:@"%@", ResultadoSoap]];
        [ResultadoSoap setString:@""];
    }
} 
```

这很好，但是如果 web 服务返回一个带有重音的单词（重音，因为是西班牙语），应用程序只会得到重音之后的短语。示例：Web 服务返回：

```
<sql>
   INSERT INTO DATOS(datos, fecha) VALUES('Indagar si el médico a tenido oportunidad de ...', '20/02/2013')
</sql> 
```

我这样做：

```
if ([elementName isEqualToString:@"sql"]){
    [maResultado addObject:[NSMutableString stringWithFormat:@"%@", ResultadoSoap]];
    [ResultadoSoap setString:@""];
} 
```

并且在 objectatindex 中的 maResultado 中只有这个：

```
édico a tenido oportunidad de ...', '20/02/2013') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T18:24:27.480

`parser:foundCharacters:`可以为 XML 元素多次调用委托函数。如果字符内容包含特殊字符，尤其会发生这种情况。在您的情况下，对于数据

```
<sql>
   INSERT INTO DATOS(datos, fecha) VALUES('Indagar si el médico a tenido oportunidad de ...', '20/02/2013')
</sql> 
```

委托函数被调用两次，首先是字符串

```
INSERT INTO DATOS(datos, fecha) VALUES('Indagar si el m 
```

然后再用字符串

```
édico a tenido oportunidad de ...', '20/02/2013') 
```

因此，您必须将字符串*附加*`parser:foundCharacters:`到当前字符串中，例如

```
- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    [currentElementValue appendString:string];
} 
```

# html - 将自动生成的 Matlab 文档导出为 html

> ID：14986704
> 
> 赞同：3
> 
> 时间：2013-02-20T17:56:52.203
> 
> 标签：html, matlab, documentation

我想为我开发的 Matlab 工具箱生成完整的帮助。

我已经看到如何通过制作文件来[显示自定义文档](http://www.mathworks.fr/fr/help/matlab/matlab_prog/display-custom-documentation.html)`helptoc.xml`，但我不明白如何添加键入时生成的页面`doc My_class`。

有没有办法将结果保存`doc My_class`到带有属性和方法页面的所有链接的 HTML 页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T21:09:56.270

您可以使用`help2html`没有非常详细的文档，但它可以工作。

来电：

```
html = help2html(mfilename); 
```

`doc`逐字返回作为 1XN 字符数组显示的 HTML 文件。`mfilename`是您要记录的 m 文件的完整路径。虽然作为一个未记录的功能，它的界面不能保证保持不变，版权声明是从 2008 年开始的。所以看起来这个文件没有被经常触摸，你可以相信它可以继续工作一段时间。

# c# - db 连接字符串和应用程序设置已被域层拾取

> ID：14986708
> 
> 赞同：0
> 
> 时间：2013-02-20T17:57:03.320
> 
> 标签：c#, asp.net, asp.net-mvc-4

任何人都可以帮助解决这个问题吗，我在发布到网络主机之前已经将网站发布到本地 iis7，现在我的数据库连接或应用程序设置都没有被拾取，因此我得到了

```
[NullReferenceException: Object reference not set to an instance of an object.] 
```

我的网站在一个包含 2 个项目的解决方案中 1 个项目是一个包含数据库数据和调用远程站点的类库，第二个项目包含我所有的 ui 数据、控制器助手等。

所以我有 Web.Domain 和 Web.UI。

如果我有如下的基本课程：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace Web.Domain.EAN
 {
public class testFromDomain : ItestFromDomain
    {
   public string testdata()
       {
       return "test from domain";
       }
    }
} 
```

这工作正常，这就是为什么我认为我的配置文件有问题

有谁知道我做错了什么或错过了什么。

我的网站是 MVC4

------------------完全错误------------------

## “/”应用程序中的服务器错误。

你调用的对象是空的。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.NullReferenceException：对象引用未设置为对象的实例。

源错误：

在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

堆栈跟踪：

> [NullReferenceException：对象引用未设置为对象的实例。] Web.UI.Helpers.Weather.GetWeatherCurrentForcast.data(String id) +1947 System.Threading.Tasks.Task`1.InnerInvoke() +78 System.Threading .Tasks.Task.Execute() +109 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(任务任务) +144 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(任务任务) +84 Web.UI.Controllers.d__3.MoveNext( ）+462 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess（任务任务）+144 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification（任务任务）+84 lambda_method（闭包，任务）+57 System.Web.Mvc.Async.TaskAsyncActionDescriptor .EndExecute(IAsyncResult asyncResult) +105 System.Web.Mvc.Async.<>c_*DisplayClass3f.b* _3e(IAsyncResult asyncResult) +22 System.Web.Mvc.Async.<>c_ *DisplayClass39.b* _33() +124 System.Web.Mvc.Async.<>c_ *DisplayClass4f.b* _49() +838059 系统。 Web.Mvc.Async.<>c_ *DisplayClass37.b* _36(IAsyncResult asyncResult) +15 System.Web.Mvc.Async.<>c_ *DisplayClass2a.b* _20() +33 System.Web.Mvc.Async.<>c_ *DisplayClass25 .b* _22(IAsyncResult asyncResult) +838644 System.Web.Mvc.<>c_ *DisplayClass1d.b* _18(IAsyncResult asyncResult) +28 System.Web.Mvc.Async.<>c_ *DisplayClass4.b* _3(IAsyncResult ar) +15 System .Web.Mvc.Controller.EndExecuteCore(IAsyncResult asyncResult) +65 System.Web.Mvc.Async.<>C_*DisplayClass4.b* _3(IAsyncResult ar) +15 System.Web.Mvc.Controller.EndExecute(IAsyncResult asyncResult) +51 System.Web.Mvc.<>c_ *DisplayClass8.b* _3(IAsyncResult asyncResult) +42 System.Web.Mvc。 Async.<>c_ *DisplayClass4.b* _3(IAsyncResult ar) +15 System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +51 System.Web.CallHandlerExecutionStep.OnAsyncHandlerCompletion(IAsyncResult ar) +282

* * *

版本信息：Microsoft .NET Framework 版本：4.0.30319；ASP.NET 版本：4.0.30319.18034

---------------------访问者评论的完整代码------------------

```
 using System;
using System.Collections.Generic;
using System.Configuration;
using System.Data;
using System.Data.SqlClient;
using System.Linq;
using System.Runtime.Caching;
using System.Text;
using System.Threading.Tasks;

namespace Web.Domain.VisitorReviews
    {
    public class DisplayVisitorReviews
        {
        public string ForumImageID      { get; private set; }
        public string ForumPostTitle    { get; private set; }
        public string ForumCity         { get; private set; }
        public string ForumRegion       { get; private set; }
        public string ForumCountry      { get; private set; }
        public string ForumPost         { get; private set; }
        public string ForumRatePost     { get; private set; }
        public string ForumMember       { get; private set; }
        public string ForumImageType    { get; private set; }
        public byte[] ForumImage        { get; private set; }

                  public DisplayVisitorReviews(string ForumImageID,
                                               string ForumPostTitle,
                                               string ForumCity,
                                               string ForumRegion,
                                               string ForumCountry,
                                               string ForumPost,
                                               string ForumRatePost,
                                               string ForumMember,
                                               string ForumImageType,
                                               byte[] ForumImage)
            {
            this.ForumImageID       = ForumImageID;
            this.ForumPostTitle     = ForumPostTitle;
            this.ForumCity          = ForumCity;
            this.ForumRegion        = ForumRegion;
            this.ForumCountry       = ForumCountry;
            this.ForumPost          = ForumPost;
            this.ForumRatePost      = ForumRatePost;
            this.ForumMember        = ForumMember;
            this.ForumImageType     = ForumImageType;
            this.ForumImage         = ForumImage;
            }
        }
    public class GetVisitorReviews : IGetVisitorReviews
        {
        private string dbConn;

        public GetVisitorReviews()
            {
            dbConn = ConfigurationManager.ConnectionStrings["Website"].ConnectionString;
            }
        public IEnumerable<DisplayVisitorReviews> DisplayTopTenVisitorReviews(string id)
            {
            //string cacheTopTenDestinationReports        = "TopTenDestinationReports + "-"+ id";
            //string TopTenDestinationReportsCacheKey     = cacheTopTenDestinationReports;
            //MemoryCache CacheTopTenDestinationReports   = MemoryCache.Default;

            //if (CacheTopTenDestinationReports.Contains(TopTenDestinationReportsCacheKey))
            //    return CacheTopTenDestinationReports[TopTenDestinationReportsCacheKey] as IEnumerable<DisplayVisitorReviews>;

            string spName = "dbo.GetTopTenForumPosts";
            using (SqlConnection cn = new SqlConnection(dbConn))
                {
                using (SqlCommand cmd = new SqlCommand(spName, cn))
                    {
                    cmd.CommandType = CommandType.StoredProcedure;
                    cmd.Parameters.Add(new SqlParameter("@strLocation", SqlDbType.VarChar, 150));
                    cmd.Parameters["@strLocation"].Value = id;

                    List<DisplayVisitorReviews> lst = new List<DisplayVisitorReviews>();
                    try
                        {
                        cn.Open();
                        using (SqlDataReader rdr = cmd.ExecuteReader(CommandBehavior.Default))
                            {
                            if (rdr.HasRows)
                                {
                                while (rdr.Read())
                                    {
                                    DisplayVisitorReviews GetData = new DisplayVisitorReviews(
                                                                                   Convert.ToString((Guid)rdr["ForumImageID"]),
                                                                                   (string)rdr["ForumPostTitle"],
                                                                                   (string)rdr["ForumCity"],
                                                                                   (string)rdr["ForumRegion"],
                                                                                   (string)rdr["ForumCountry"],
                                                                                   (string)rdr["ForumPost"],
                                                                                   Convert.ToString((int)rdr["ForumRatePost"]),
                                                                                   (string)rdr["ForumMember"],
                                                                                   (string)rdr["ForumImageType"],
                                                                                   (byte[])rdr["ForumImage"]);
                                    lst.Add(GetData);
                                    }
                                }
                            }

                        //CacheItemPolicy policy = new CacheItemPolicy();
                        //policy.AbsoluteExpiration = DateTime.Now.AddHours(1);
                        //CacheTopTenDestinationReports.Add(TopTenDestinationReportsCacheKey, lst.AsEnumerable(), policy);

                        return lst;

                        }
                    catch (Exception ex)
                        {
                        throw new ApplicationException(ex.InnerException.ToString());
                        }
                    }
                }
            }
        }
    }

using System;
using System.Collections.Generic;
namespace Web.Domain.VisitorReviews
    {
    public interface IGetVisitorReviews
        {
        IEnumerable<DisplayVisitorReviews> DisplayTopTenVisitorReviews(string id);
        }
    }

kernel.Bind<IGetVisitorReviews>().To<GetVisitorReviews>().InSingletonScope();

 private readonly IGetVisitorReviews _IGVR;

    public MembersController(IGetVisitorReviews IGVR)
        {
        _IGVR = IGVR;
        }

public PartialViewResult pvVisitorReviews()
            {

                var destinations = _IGVR.DisplayTopTenVisitorReviews("NA").Take(5);
                return PartialView("pvHomePageVisitorReviews",destinations);
            }

 <add name="Website" connectionString="Data Source=Windows7\SQL2012;Initial Catalog=WebsiteDB;Persist Security Info=true; Integrated Security=SSPI" providerName="System.Data.SqlClient" /> 
```

我已经为评论添加了完整的代码，原因是代码量最短。此外，如果我注释掉天气部分视图，则相同的错误会出现在评论中，如果我注释掉评论或如果从 web.config 引用站点加载的任何其他内容。

------------------------在类中环绕连接设置后出现完全错误------------

```
Server Error in '/' Application.
--------------------------------------------------------------------------------

 Object reference not set to an instance of an object. 
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.NullReferenceException: Object reference not set to an instance of an object.

Source Error: 

Line 87:                 <div class="dvAsyncDestination">
Line 88:                    
Line 89:                   @{Html.RenderAction("pvVisitorReviews", "Members", true);}
Line 90:                    
Line 91:                 </div> 

Source File: f:\LocalTestSite\Views\Home\Index.cshtml    Line: 89 

Stack Trace: 

[NullReferenceException: Object reference not set to an instance of an object.]
   Web.UI.Controllers.MembersController.pvVisitorReviews() +184
   lambda_method(Closure , ControllerBase , Object[] ) +78
   System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters) +260
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +38
   System.Web.Mvc.Async.<>c__DisplayClass42.<BeginInvokeSynchronousActionMethod>b__41() +33
   System.Web.Mvc.Async.<>c__DisplayClass39.<BeginInvokeActionMethodWithFilters>b__33() +123
   System.Web.Mvc.Async.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49() +838059
   System.Web.Mvc.Async.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__36(IAsyncResult asyncResult) +15
   System.Web.Mvc.Async.<>c__DisplayClass2a.<BeginInvokeAction>b__20() +33
   System.Web.Mvc.Async.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult) +838644
   System.Web.Mvc.<>c__DisplayClass1d.<BeginExecuteCore>b__18(IAsyncResult asyncResult) +28
   System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +15
   System.Web.Mvc.Controller.EndExecuteCore(IAsyncResult asyncResult) +65
   System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +15
   System.Web.Mvc.Controller.EndExecute(IAsyncResult asyncResult) +51
   System.Web.Mvc.<>c__DisplayClass8.<BeginProcessRequest>b__3(IAsyncResult asyncResult) +42
   System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +15
   System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +51
   System.Web.Mvc.<>c__DisplayClass4.<Wrap>b__3() +15
   System.Web.Mvc.ServerExecuteHttpHandlerWrapper.Wrap(Func`1 func) +41
   System.Web.HttpServerUtility.ExecuteInternal(IHttpHandler handler, TextWriter writer, Boolean preserveForm, Boolean setPreviousPage, VirtualPath path, VirtualPath filePath, String physPath, Exception error, String queryStringOverride) +1783

[HttpException (0x80004005): Error executing child request for handler 'System.Web.Mvc.HttpHandlerUtil+ServerExecuteHttpHandlerAsyncWrapper'.]
   System.Web.HttpServerUtility.ExecuteInternal(IHttpHandler handler, TextWriter writer, Boolean preserveForm, Boolean setPreviousPage, VirtualPath path, VirtualPath filePath, String physPath, Exception error, String queryStringOverride) +2819
   System.Web.HttpServerUtility.Execute(IHttpHandler handler, TextWriter writer, Boolean preserveForm, Boolean setPreviousPage) +275
   System.Web.HttpServerUtilityWrapper.Execute(IHttpHandler handler, TextWriter writer, Boolean preserveForm) +94
   System.Web.Mvc.Html.ChildActionExtensions.ActionHelper(HtmlHelper htmlHelper, String actionName, String controllerName, RouteValueDictionary routeValues, TextWriter textWriter) +700
   DevTrends.MvcDonutCaching.HtmlHelperExtensions.RenderAction(HtmlHelper htmlHelper, String actionName, String controllerName, RouteValueDictionary routeValues, Boolean excludeFromParentCache) +233
   DevTrends.MvcDonutCaching.HtmlHelperExtensions.RenderAction(HtmlHelper htmlHelper, String actionName, String controllerName, Boolean excludeFromParentCache) +17
   ASP._Page_Views_Home_Index_cshtml.Execute() in f:\LocalTestSite\Views\Home\Index.cshtml:89
   System.Web.WebPages.WebPageBase.ExecutePageHierarchy() +280
   System.Web.Mvc.WebViewPage.ExecutePageHierarchy() +126
   System.Web.WebPages.StartPage.ExecutePageHierarchy() +143
   System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage) +181
   System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context) +378
   System.Web.Mvc.<>c__DisplayClass1a.<InvokeActionResultWithFilters>b__17() +33
   System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation) +854172
   System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult) +265
   System.Web.Mvc.Async.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult) +838644
   System.Web.Mvc.<>c__DisplayClass1d.<BeginExecuteCore>b__18(IAsyncResult asyncResult) +28
   System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +15
   System.Web.Mvc.Controller.EndExecuteCore(IAsyncResult asyncResult) +65
   System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +15
   System.Web.Mvc.Controller.EndExecute(IAsyncResult asyncResult) +51
   System.Web.Mvc.<>c__DisplayClass8.<BeginProcessRequest>b__3(IAsyncResult asyncResult) +42
   System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +15
   System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +51
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +606
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +288

--------------------------------------------------------------------------------
Version Information: Microsoft .NET Framework Version:4.0.30319; ASP.NET Version:4.0.30319.18034 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T09:10:27.560

我已经解决了这个问题，只用了 1 天 :-( 对于遇到此问题的任何其他人，请查看此链接[Login failed for user 'IIS APPPOOL\ASP.NET v4.0'](https://stackoverflow.com/questions/7698286/login-failed-for-user-iis-apppool-asp-net-v4-0)

上面发布的链接让我走上了正确的轨道，但微软建议使用 ApplicationPoolIdentity 所以这就是我为解决问题所做的。

1.  打开 SQL，然后打开 Security
2.  单击登录名并右键单击并选择新登录名
3.  给它起一个名字 IIS APPPOOL\ASP.NET v4.0
4.  然后默认数据库选择你想要的数据库
5.  单击服务器角色并选择公共
6.  单击用户映射并选择所有者和公共，（我必须选择两者才能使其工作）
7.  单击确定然后退出安全性
8.  现在单击您的数据库并选择安全性
9.  点击用户并选择 IIS APPPOOL\ASP.NET v4.0
10.  右键单击选择属性
11.  单击拥有的架构，然后选择数据读取器和数据写入器
12.  单击成员资格并选择所有者

单击确定，现在返回 IIS 管理器并单击浏览网站，您的站点现在应该在 IIS 中运行。

3分我不满意。

1.  在用户映射中选择所有者，这真的需要选择吗，如果不是，我怎样才能更好地保护连接
2.  再次在会员中选择所有者，为什么我需要选择它才能使其正常工作。
3.  最后，我读过的所有书籍都没有提到必须将 IIS APPPOOL\ASP.NET v4.0 添加到数据库安全性中。如果这是让它发挥作用的唯一方法，请来吧作者，请将此信息添加到您的书籍中，它会为我节省一天的工作时间。

我不是专业的程序员，我只是通过试错和阅读书籍来学习。因此，如果任何其他人可以添加到上述内容，请这样做。

谢谢

乔治

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T19:24:23.037

当您发布您的网站时，它只发布您的网站项目的 Web.config，而不是您的类库项目之一。您必须手动将连接字符串添加到您网站的 Web.config。

# java - 忽略归因并比较集合

> ID：14986710
> 
> 赞同：0
> 
> 时间：2013-02-20T17:57:14.353
> 
> 标签：java

我想比较使用 2 个集合`CollectionUtils.isEqualCollection`。在此之前，我需要删除或忽略一个对象集合的一个属性，这个属性需要忽略或删除，因为它只填充了一个集合。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T18:03:55.097

在你的元素的类中，覆盖

```
public boolean equals(Object obj) 
```

在 equals 方法中，忽略某些字段/属性检查。

哦，别忘了覆盖

```
public int hashCode() 
```

也。

# mingw-w64 - 使用 mingw64 的寄存器不正确

> ID：14986715
> 
> 赞同：0
> 
> 时间：2013-02-20T17:57:37.153
> 
> 标签：mingw-w64

我正在尝试使用sezero的mingw64编译我在网上找到的一个项目，但我一直遇到以下问题

```
C:\Users\Me\AppData\LocalTemp\ccPmAPBy.s: Assembler messages:
C:\Users\Me\AppData\LocalTemp\ccPmAPBy.s:1668: Error: incorrect register `%edx' used with `q' suffix
logreg.cpp: In function 'double logreg_cdn_Ldiff(double, int, double)':
logreg.cpp:103:18: error: 'isnan' was not declared in this scope
mm_lasso.cpp: In function 'int main(int, char**)':
mm_lasso.cpp:53:60: error: 'getopt' was not declared in this scope
mm_lasso.cpp:57:31: error: 'optarg' was not declared in this scope 
```

我正在运行的命令是：

```
x86_64-w64-mingw32-gcc -Wall -pthread -fopenmp lasso.cpp logreg.cpp read_matrix_market.cpp mmio.c mm_lasso.cpp write_matrix_market.cpp shared.cpp -o mm_lasso -lgomp -O3 
```

我想知道是否有人以前遇到过这个问题并且知道如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T04:53:13.773

好吧，我知道在 rubenvb 的 mingw64 中，他们对 trunk\mingw-w64-headers\crt\math.h 中的 isnan 函数进行了更改（参见[http://mingw-w64.svn.sourceforge.net/viewvc/mingw -w64/trunk/mingw-w64-headers/crt/math.h?r1=3066&r2=5518](http://mingw-w64.svn.sourceforge.net/viewvc/mingw-w64/trunk/mingw-w64-headers/crt/math.h?r1=3066&r2=5518)），显然专门用于处理 x64 问题。

# c# - 动态文本框并保存到 c#.net 中的数据库

> ID：14986716
> 
> 赞同：0
> 
> 时间：2013-02-20T17:57:37.943
> 
> 标签：c#

我有一个后端，管理员将在其中存储一个值假设为 10。我想动态填充 10 下拉列表并将其保存到数据库中。

**这是代码，但我已经对其进行了硬编码。**

```
 <%@ Page Title="" Language="C#" MasterPageFile="~/Site1.Master" AutoEventWireup="true"
    CodeBehind="student_project_choice.aspx.cs" Inherits="Final_Year_Project_Allocation_System.student_project_choice" %>

<asp:Content ID="Content3" ContentPlaceHolderID="BodyContent" runat="server">
        <div class="well">
            <div>
                <table class="table table-bordered table-condensed">
                    <thead>
                        <tr>
                            <td>
                                Choice number
                            </td>
                            <td>
                                Project titles
                            </td>
                            <td>
                                Demand
                            </td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                1
                            </td>
                            <td>
                                <asp:DropDownList ID="DropDownList1" runat="server" 
                                    DataSourceID="SqlDataSource1" DataTextField="projectTitle" 
                                    DataValueField="lecturerProjectId" 
                                    onselectedindexchanged="DropDownList1_SelectedIndexChanged" 
                                    AutoPostBack="True">
                                </asp:DropDownList>
                                <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
                                    ConnectionString="<%$ ConnectionStrings:UomDBConnectionString1 %>" 
                                    SelectCommand="SELECT * FROM [tbl_lecturer_project]"></asp:SqlDataSource>
                            </td>
                            <td>
                            <asp:ScriptManager ID="ScriptManager1" runat="server">
                             </asp:ScriptManager>
                                <asp:UpdatePanel ID="UpdatePanel1" runat="server">
                                <ContentTemplate>  
                                    <asp:Label ID="lblDemand" runat="server" Text=""></asp:Label>
                                </ContentTemplate>
                                    <Triggers><asp:AsyncPostBackTrigger ControlID="DropDownList1" EventName="SelectedIndexChanged"/></Triggers>
                                </asp:UpdatePanel>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                2
                            </td>
                            <td>
                                <asp:DropDownList ID="DropDownList2" runat="server" 
                                    DataSourceID="SqlDataSource1" DataTextField="projectTitle" 
                                    DataValueField="lecturerProjectId">
                                </asp:DropDownList>
                            </td>
                            <td>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                3
                            </td>
                            <td>
                                <asp:DropDownList ID="DropDownList3" runat="server" 
                                    DataSourceID="SqlDataSource1" DataTextField="projectTitle" 
                                    DataValueField="lecturerProjectId">
                                </asp:DropDownList>
                            </td>
                            <td>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                4
                            </td>
                            <td>
                                <asp:DropDownList ID="DropDownList4" runat="server" 
                                    DataSourceID="SqlDataSource1" DataTextField="projectTitle" 
                                    DataValueField="lecturerProjectId">
                                </asp:DropDownList>
                            </td>
                            <td>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                5
                            </td>
                            <td>
                                <asp:DropDownList ID="DropDownList5" runat="server" 
                                    DataSourceID="SqlDataSource1" DataTextField="projectTitle" 
                                    DataValueField="lecturerProjectId">
                                </asp:DropDownList>
                            </td>
                            <td>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                6
                            </td>
                            <td>
                                <asp:DropDownList ID="DropDownList6" runat="server" 
                                    DataSourceID="SqlDataSource1" DataTextField="projectTitle" 
                                    DataValueField="lecturerProjectId">
                                </asp:DropDownList>
                            </td>
                            <td>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                7
                            </td>
                            <td>
                                <asp:DropDownList ID="DropDownList7" runat="server" 
                                    DataSourceID="SqlDataSource1" DataTextField="projectTitle" 
                                    DataValueField="lecturerProjectId">
                                </asp:DropDownList>
                            </td>
                            <td>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                8
                            </td>
                            <td>
                                <asp:DropDownList ID="DropDownList8" runat="server" 
                                    DataSourceID="SqlDataSource1" DataTextField="projectTitle" 
                                    DataValueField="lecturerProjectId">
                                </asp:DropDownList>
                            </td>
                            <td>
                            </td>
                        </tr>

                                                <tr>
                            <td>
                                9
                            </td>
                            <td>
                                <asp:DropDownList ID="DropDownList9" runat="server" 
                                    DataSourceID="SqlDataSource1" DataTextField="projectTitle" 
                                    DataValueField="lecturerProjectId">
                                </asp:DropDownList>
                            </td>
                            <td>
                            </td>
                        </tr>

                                                <tr>
                            <td>
                                10
                            </td>
                            <td>
                                <asp:DropDownList ID="DropDownList10" runat="server" 
                                    DataSourceID="SqlDataSource1" DataTextField="projectTitle" 
                                    DataValueField="lecturerProjectId">
                                </asp:DropDownList>
                            </td>
                            <td>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="control-group controls">
                <asp:Button ID="btnSubmit" runat="server" Text="Submit" CssClass="btn btn-primary" />
                <input id="Reset1" type="reset" value="reset" class="btn btn-primary" />
            </div>
        </div>
    </fieldset>
</asp:Content> 
```

请给我一些想法，我该如何实现这一目标。

```
 using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data.SqlClient;
using System.Web.Configuration;

namespace Final_Year_Project_Allocation_System
{
    public partial class student_project_choice : System.Web.UI.Page
    {
        private string connectionString = WebConfigurationManager.ConnectionStrings["UomDBConnectionString1"].ConnectionString;
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
        {
            try
            {
                string selected = DropDownList1.SelectedItem.Value;
                string selectSQL = "select Count(choiceNumber) from tbl_student_project_choice where choiceProjectId = '" + selected + "' and choiceNumber='"+1+"'";
                // Define the ADO.NET objects.
                SqlConnection con = new SqlConnection(connectionString);
                con.Open();
                SqlCommand cmd = new SqlCommand(selectSQL, con);
                int result = (int)cmd.ExecuteScalar();
                lblDemand.Text = result.ToString();

            }
            catch (Exception exce)
            {
                lblMessage.Text = exce.Message;
            }

        }

    }

} 
```

# php - 连接名字和姓氏以形成全名字段

> ID：14986717
> 
> 赞同：0
> 
> 时间：2013-02-20T17:57:40.433
> 
> 标签：php, mysql

我知道它的选择命令，但这只是暂时的。我该怎么做才能永久保存？因此，如果有一条名字是 John，姓氏是 Smith 的记录，在 fullname 列中，它会自动生成该记录的数据为 John Smith。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T18:00:30.377

```
$querystring = "select concat(firstname,' ',lastname) as name from users"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T18:00:11.440

为什么需要这样做？您通过重复数据来对数据进行非规范化。我不知道你的应用程序的细节，但我相信最好在你的表示层中计算全名。

如果您想要某种“显示名称”字段（如 Outlook），则仍需要在用户输入时分配该字段，以便用户可以选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T18:01:14.023

这样做没有意义。您可以从数据库中获取名字和姓氏，当您需要显示全名时，只需将两者连接起来即可。不要重复数据库中的数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T18:08:05.807

只需使用更新命令：

```
UPDATE users SET fullname = CONCAT(firstname, ' ', lastname); 
```

请注意，如果用户更改了他们的名字或姓氏，则全名字段将过期。最好只在 SELECT 上连接它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-26T07:01:29.120

$full-name = $first-name。'.$姓氏; 回声 $ull-name

# javascript - 如何使用元素 ID 来获取ElementsByClassName？

> ID：14986721
> 
> 赞同：0
> 
> 时间：2013-02-20T17:57:58.267
> 
> 标签：javascript, dom, javascript-events

我有一个脚本可以跨多个框架 findElementById 并突出显示/更改文本颜色。该脚本的工作原理是，当您将鼠标悬停在“The quick brown fox”的每个单词上时，您指针下的单词将变为红色并以黄色突出显示。frame2 中的相同单词也将被红色/突出显示。请注意，元素 ID 与类名相同。

```
<html><head><title>Test</title>
  <script>
    function hey(id)
      {document.getElementById(id).style.color = "red";
      document.getElementById(id).style.backgroundColor = "yellow";
      window.parent.frames["frame2"].document.getElementById(id).style.color = "red";
      window.parent.frames["frame2"].document.getElementById(id).style.backgroundColor = "yellow";} 
    function bye(id)
      {document.getElementById(id).style.color = "black";
      document.getElementById(id).style.backgroundColor = "white";
      window.parent.frames["frame2"].document.getElementById(id).style.color = "black";
      window.parent.frames["frame2"].document.getElementById(id).style.backgroundColor = "white";}
  </script>
</head>
<body>
  <a id="w1" class="w1 w4" onmouseover="hey(this.id)" onmouseout="bye(this.id)">The</a> 
  <a id="w2" class="w2" onmouseover="hey(this.id)" onmouseout="bye(this.id)">quick</a>
  <a id="w3" class="w3" onmouseover="hey(this.id)" onmouseout="bye(this.id)">brown</a> 
  <a id="w4" class="w1 w4" onmouseover="hey(this.id)" onmouseout="bye(this.id)">fox</a>
</body></html> 
```

现在我想编辑这个脚本，让它获取 id 并按类查找元素。例如，当您将鼠标悬停在“狐狸”上时，id="w4"。我想在链接的类中找到“w4”，这样当鼠标悬停时，“The”和“fox”都会变成红色/突出显示。我不知道如何使用来自 id 的值来使用 getElementsByClassName。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T18:03:37.147

返回一个数组，`getElementsByClassName`你必须遍历它。试试下面的代码。

```
var elements = document.getElementsByClassName(id);

for(var i=0; i<elements.length; i++)
    elements[i].style.color = "red"; 
```

# ssis - 为什么在 dtexec 上运行良好的包无法在 SQL Server 代理作业下运行？

> ID：14986726
> 
> 赞同：9
> 
> 时间：2013-02-20T17:58:31.953
> 
> 标签：ssis

我在本地 C: 驱动器上有一个包，如果我将它作为 SQL 代理作业的一部分运行，它会失败：

```
02/20/2013 17:38:45,MyUpload,Error,3,FMF-S3-1507\EOS01,PAM_MyUpload,Run MyUpload SSIS Package,,
Executed as user: MARKETS\SVCSQLDEV. 
Microsoft (R) SQL Server Execute Package Utility  Version 10.0.5500.0 for 64-bit  
Copyright (C) Microsoft Corp 1984-2005\. All rights reserved.    
Started:  17:38:45  Error: 2013-02-20 17:38:45.72     
Code: 0xC0011007     
Source: {14BE11F5-B737-4A6E-96E6-111635631749}      
Description: Unable to load the package as XML because of package does not have a valid XML format. A specific XML parser error will be posted.  End Error  
Error: 2013-02-20 17:38:45.72     
Code: 0xC0011002     
Source: {14BE11F5-B737-4A6E-96E6-111635631749}      
Description: Failed to open package file "C:\MyFolder\Package.dtsx" due to error 0x80070003 "The system cannot find the path specified.".  This happens when loading a package and the file cannot be opened or loaded correctly into the XML document. This can be the result of either providing an incorrect file name was specified when calling LoadPackage or the XML file was specified and has an incorrect format.  End Error  
Could not load package "C:\MyFolder\Package.dtsx" because of error 0xC0011002\.  
Description: Failed to open package file "C:\MyFolder\Package.dtsx" due to error 0x80070003 "The system cannot find the path specified.".  This happens when loading a package and the file cannot be opened or loaded correctly into the XML document. This can be the result of either providing an incorrect file name was specified when calling LoadPackage or the XML file was specified and has an incorrect format.  
Source: {14BE11F5-B737-4A6E-96E6-111635631749}  
Started:  17:38:45  
Finished: 17:38:45  
Elapsed:  0.047 seconds.  
The package could not be found.  The step failed.
,00:00:00,0,0,,,,0 
```

但是，如果我从 SQL 代理作业步骤复制命令行并使用 运行它`DTExec.exe`，它会成功：

```
C:\Program Files\Microsoft SQL Server\100\DTS\Binn>DTExec.exe /FILE "C:\MyFolder\Package.dtsx"  /CHECKPOINTING OFF /REPORTING E
Microsoft (R) SQL Server Execute Package Utility
Version 10.50.1600.1 for 32-bit
Copyright (C) Microsoft Corporation 2010\. All rights reserved.

Started:  17:44:00
DTExec: The package execution returned DTSER_SUCCESS (0).
Started:  17:44:00
Finished: 17:44:56
Elapsed:  55.266 seconds 
```

我可以尝试在工作步骤中解决什么问题？commandshell 类型的作业步骤是正确的前进方式吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-20T18:02:41.013

我相信你有权限问题。如果您查看您发布的日志，`Failed to open package file "C:\MyFolder\Package.dtsx" due to error 0x80070003 "The system cannot find the path specified."`

## 这是什么意思？

运行 SQL 代理的帐户无权访问 C:\MyFolder。

## 解析度

您可能需要向该帐户授予文件系统。或者，您可以创建授权凭证并更改作业步骤以使用该帐户。

## 从评论中

> 你能告诉你“向该帐户授予文件系统”的意思吗

Windows 在文件夹/对象级别定义权限。如果您右键单击文件夹并选择属性，则会出现一个安全选项卡（假设您有权查看它）。它列出了有权访问该文件夹的组或用户名，然后列出了与该组或用户名关联的权限。

权限选项包括：完全控制、修改、读取和执行、列出文件夹内容、读取、写入和特殊权限。

在这种情况下，运行包的用户`MARKETS\SVCSQLDEV`没有查看/读取权限`C:\MyFolder\Package.dtsx`

可能是用户无法列出文件夹内容，或者它可以列出内容但无法从那里读取。我不是安全人员，所以任何与此相关的建议都应该交给你的安全人员。

也就是说，我会单击顶部的编辑按钮，然后添加用户。您可能需要将“从此位置”更改为指向您的域而不是本地计算机。无论如何，找到用户并单击确定。

然后在 Permissions 部分，检查 List Folder and Read。单击“确定”关闭该屏幕，然后再次单击“确定”关闭“安全”选项卡。假设您有权执行所有这些操作，则该帐户现在具有对该文件夹的读取/列表访问权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-08T07:37:44.207

这是安全问题将您的文件夹从 c 移动到任何其他驱动器或更改文件夹的安全设置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-25T17:46:12.970

尝试将**\File 选项**放在最后：

```
C:\Program Files\Microsoft SQL Server\100\DTS\Binn>DTExec.exe   /CHECKPOINTING OFF /REPORTING E /FILE "C:\MyFolder\Package.dtsx" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-06T13:12:22.410

在 BIDS 中重新打开包，并检查配置是否正确以及数据库连接字符串等......并在我们部署时选择“启用配置”。

# javascript - JavaScript 按位运算符如何工作？

> ID：14986730
> 
> 赞同：1
> 
> 时间：2013-02-20T17:58:40.703
> 
> 标签：javascript, operators

我知道`bitwise`运算符是按位非，意味着 1 变为 0，0 变为 1

但我的问题与以下有关：

```
var c = 5.87656778;
alert(~c); 
```

**警报 -6**

```
var c = 5.87656778;
alert(~~c); 
```

**警报 5**

有人可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T18:02:16.433

基本上，它通过截断小数部分将数字转换为整数，并对该整数表示执行通常的按位运算。

MDN 对此有一些非常好的[文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Bitwise_Operators)。

```
 5 in binary is = 00000000000000000000000000000101 =  5
                  --------------------------------
~5 in binary is = 11111111111111111111111111111010 = -6 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T18:03:32.700

它们都适用于 32 位有符号整数。除了零填充右移，`>>>`它适用于 32 位无符号整数。

因此，任何浮点数都通过截断转换为整数。

# jquery - 使用 DateFormat: 'MM-dd' 将 jQuery Datepicker 限制为当前会计年度

> ID：14986731
> 
> 赞同：2
> 
> 时间：2013-02-20T17:58:40.863
> 
> 标签：jquery, datepicker

下面是我在我的应用程序中使用的 jQuery datepicker，它运行良好。现在的问题是我想将其限制在当前财政年度，为此我正在使用：

```
maxDate: '03/30/2013' & minDate:'04/01/2012' 
```

但它不适用于当前的 dateFormat: 'MM-yy' 我正在使用 & 最糟糕的是我无法更改 dateFormat。

```
var postForm = false;
    $(function () {
        $('.Month-Picker').datepicker({
            changeMonth: true,
            changeYear: true,
            showButtonPanel: false,
            maxDate: '03/30/2013',
            minDate:'04/01/2012',
            dateFormat: 'MM-yy',
            onChangeMonthYear: function () { postForm = true; },
            onClose: function (dateText, inst) {
                var month = $("#ui-datepicker-div .ui-datepicker-month :selected").val();
                var year = $("#ui-datepicker-div .ui-datepicker-year :selected").val();
                $(this).datepicker('setDate', new Date(year, month, 1));
            },
            beforeShow: function (input, inst) {
                if ((datestr = $(this).val()).length > 0) {
                    year = datestr.substring(datestr.length - 4, datestr.length);
                    month = jQuery.inArray(datestr.substring(0, datestr.length - 5), $(this).datepicker('option', 'monthNames'));
                    $(this).datepicker('option', 'defaultDate', new Date(year, month, 1));
                    $(this).datepicker('setDate', new Date(year, month, 1));
                    postForm = false;
                }
            }
        });
    });

    $(document).ready(function () {
        $("#aspnetForm").click(function () {
            if (postForm == true) {
                postForm = false;
                var month = $("#ui-datepicker-div .ui-datepicker-month :selected").val();
                var year = $("#ui-datepicker-div .ui-datepicker-year :selected").val();
                $(this).datepicker('setDate', new Date(year, month, 1));
            }
        });
    }); 
```

请帮帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T22:02:22.570

尝试通过声明 Javascript 日期来设置最小和最大日期：

```
$('.Month-Picker').datepicker({
    changeMonth: true,
    changeYear: true,
    showButtonPanel: false,
    maxDate: new Date(2013,3,30),
    minDate: new Date(2012,4,01),
    dateFormat: 'MM-yy', 
```

[http://api.jqueryui.com/datepicker/#option-minDate](http://api.jqueryui.com/datepicker/#option-minDate)

[http://www.w3schools.com/js/js_obj_date.asp](http://www.w3schools.com/js/js_obj_date.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T22:00:23.910

您可以尝试使用以下代码

```
 $('#User_to_date').datepick({
        changeMonth: true,
        changeYear: true,
        showButtonPanel: false,
        dateFormat: 'MM-yy',
        onChangeMonthYear: function () { postForm = true; },
        onClose: function (dateText, inst) {
            var month = $("#ui-datepicker-div .ui-datepicker-month :selected").val();
            var year = $("#ui-datepicker-div .ui-datepicker-year :selected").val();
            $(this).datepicker('setDate', new Date(year, month, 1));
        },
        beforeShow: function (input, inst) {
            if ((datestr = $(this).val()).length > 0) {
                year = datestr.substring(datestr.length - 4, datestr.length);
                month = jQuery.inArray(datestr.substring(0, datestr.length - 5), $(this).datepicker('option', 'monthNames'));
                $(this).datepicker('option', 'defaultDate', new Date(year, month, 1));
                $(this).datepicker('setDate', new Date(year, month, 1));
                postForm = false;
            }
        }
    }); 
```

我在我的项目中使用此代码进行测试，并以“February-21”格式获取日期，只需将**datepicker**更改为**datepick**。

# regex - 重复非连续数字的正则表达式

> ID：14986733
> 
> 赞同：0
> 
> 时间：2013-02-20T17:58:55.117
> 
> 标签：regex

我需要检查一个字符串是否与某个模式匹配。模式是：

```
"B-n,I-n" 
```

其中 n 是一个整数。有没有一个好的正则表达式？

编辑：“B-”和“I-”之后的数字必须相同。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T18:05:08.113

假设 n 是任何正整数并且您还需要捕获引号，它将是这样的：

```
^"B-([0-9]+),I-\1"$ 
```

() 使子模式被捕获，然后 \1 告诉正则表达式引擎以匹配在第一个模式中捕获的相同内容。

你可以[在这里测试](http://regexpal.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T18:01:07.317

正则表达式在单个字符串中查找模式。您要求搜索许多字符串以查看它们是否遵循某种模式。您需要编写代码。正则表达式不是每次遇到涉及字符串的问题时挥舞的魔杖。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T18:04:39.893

这将匹配以上所有内容：

```
[A-Z]-[a-z0-9],[A-Z]-[a-z0-9] 
```

它还将匹配：

Gz,Pf

等等。

# jquery - 当一个 DIV 进入视图时添加类

> ID：14986738
> 
> 赞同：2
> 
> 时间：2013-02-20T17:59:11.107
> 
> 标签：jquery, css, viewport, addclass

当用户滚动时进入视口时，我想为元素添加一个类，比如 DIV，但也可以在 img、h1 等上。

如何计算我的元素是否在视口中？

在伪中：如果#swing 已进入视口，则添加类“动画bounceOutLeft”（使用 CSS3 播放动画）。动画完成后删除类“动画bounceOutLeft”。

我只是不知道从哪里开始，除了我知道添加我想要的类的代码：

```
$('#star').addClass('animated bounceOutLeft'); 
```

**进度编辑**

感谢@Bibhas，我正在尝试实现这个 OnScreen[插件](http://benpickles.github.com/onScreen/)，我想我已经完成了，因为开发工具说类名在那里，但这些类名是 css3 转换，它们只是没有播放，可能是什么问题？

```
$(function() {
  setInterval(function() {
    $("#star")                             // get all <h2>s
      .filter(":onScreen")              // get only <h2>s on screen
      .addClass('animated bounceOutLeft');
  }, 1000)                              // repeat every second
}) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T18:03:16.820

显然有人为此编写了一个小 jQuery 插件。从他的代码 -

```
function isOnScreena(elem) {
    var $window = $(window)
    var viewport_top = $window.scrollTop()
    var viewport_height = $window.height()
    var viewport_bottom = viewport_top + viewport_height
    var $elem = $(elem)
    var top = $elem.offset().top
    var height = $elem.height()
    var bottom = top + height

    return (top >= viewport_top && top < viewport_bottom) ||
           (bottom > viewport_top && bottom <= viewport_bottom) ||
           (height > viewport_height && top <= viewport_top && bottom >= viewport_bottom)
} 
```

源代码几乎没有 20 行。你可以阅读和学习。- [https://github.com/benpickles/onScreen](https://github.com/benpickles/onScreen)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-13T16:42:00.413

该`[getBoundingClientRect()](http://help.dottoro.com/ljvmcrrn.php)`功能可能在这里有所帮助。[这是我做的 CodePen](http://codepen.io/ross-angus/pen/kXxVbV/)：

```
$(window).on('load resize scroll',function(e){
    $('h2').each(function(index) {
        var h2Height = parseInt($(this)[0].getBoundingClientRect().height);
        var viewHeight = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
        // This will return true as soon as the heading crosses the bottom of the viewport
        if ($(this)[0].getBoundingClientRect().top < (viewHeight - h2Height)) {
            $('h2').eq(index).addClass('added-class');
        }
    });
}); 
```

**编辑：**请注意，这假定浏览器在标准模式下运行。

**Edit2：**根据[@brandnewjames](https://www.reddit.com/user/brandnewjames)的建议，我在 中添加了一些其他事件处理程序`on()`，这也将解释除了滚动之外的操作。

# video - 学士论文 - 分布式系统视频编码云计算

> ID：14986740
> 
> 赞同：0
> 
> 时间：2013-02-20T17:59:27.567
> 
> 标签：video, cloud, distributed-system, mmo

我想尽快开始我的论文（计算机科学/计算机工程大学），如果您提出一些想法，我将不胜感激。

我对分布式系统感兴趣。我发现 MMOG 架构非常有趣。对象迁移似乎也很有趣。我阅读了一些论文以将上述两者结合起来，但结果项目超过了 1 人的工作量。我发现很难找到具体的参与。

除此之外，我喜欢视频编码。那个地区的东西也会很好。如果云计算参与进来，那就太好了！

如果你有时间，开火吧！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-31T01:18:26.033

作为我创业项目的一部分，我正在云中进行视频编码。看看：[https ://github.com/sportarchive/CloudTranscode](https://github.com/sportarchive/CloudTranscode)

这是一个使用 FFMpeg 和 Amazon AWS 服务的分布式转码堆栈。我使用简单工作流 (SWF) 进行并行处理，使用 Amazon SQS 进行消息传递和事件传播。

该项目仍处于早期阶段，但只需少量工作，它可能会变得非常强大。

干杯，

# css - 是否有各种设备的“CSS 像素比”值数据库？

> ID：14986757
> 
> 赞同：5
> 
> 时间：2013-02-20T18:00:20.397
> 
> 标签：css, web, cross-browser, pixel, ppi

这就是我想要做的：当我收到一个 HTTP 请求时，检查数据库服务器端以查找 1）物理设备 PPI 和 2）CSS 像素比（即每个“逻辑”或“参考”像素的数量物理像素）。这允许我为请求浏览器提供一个像素值，该像素值等于 1 个*物理的真实世界*英寸。

我已经尝试过的一些事情没有成功：

*   [http://wurfl.sourceforge.net/](http://wurfl.sourceforge.net/)：给我物理尺寸和分辨率（所以我可以计算 PPI），但不是 CSS 像素比。
*   [http://51degrees.mobi/](http://51degrees.mobi/)：给我物理尺寸和分辨率（所以我可以计算 PPI），但不是 CSS 像素比。
*   [https://deviceatlas.com](https://deviceatlas.com) - 直接给我 PPI，但没有 CSS 像素比。

奇怪的是，我为此找到的最佳数据源（免费或付费）是[http://en.wikipedia.org/wiki/List_of_displays_by_pixel_density](http://en.wikipedia.org/wiki/List_of_displays_by_pixel_density)，但我想要更全面和更表格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T14:15:36.900

我也一直在搜索此信息，并发现您引用的 Wikipedia 页面是迄今为止可用的最大资源。此外，我发现此资源很有帮助：[http ://bjango.com/articles/min-device-pixel-ratio/](http://bjango.com/articles/min-device-pixel-ratio/)

# c# - 尝试使用 Google API 将授权代码交换为访问代码时出错

> ID：14986758
> 
> 赞同：2
> 
> 时间：2013-02-20T18:00:23.840
> 
> 标签：c#, httpwebrequest, oauth-2.0, google-oauth

我正在使用以下 C# 代码尝试将我的授权代码交换为访问代码：

```
 const string TokenExchangeEndPointUrl = "https://accounts.google.com/o/oauth2/token";
        string data = string.Format(
              "code={0}&client_id={1}&client_secret={2}&redirect_url={3}&grant_type=authorization_code",
              (value), (_clientId), (_clientSecret), (RedirectUri));

        var utfenc = new UTF8Encoding();
        byte[] buffer = utfenc.GetBytes(data);
        var req = (HttpWebRequest) WebRequest.Create(TokenExchangeEndPointUrl);
        req.Method = "POST";
        req.ContentType = "application/x-www-form-urlencoded";
        req.ContentLength = buffer.Length;

        using (Stream strm = req.GetRequestStream())
        {
            strm.Write(buffer, 0, buffer.Length);
            strm.Close();
        }
        var response = (HttpWebResponse) req.GetResponse(); 
```

最后一行是发生错误的地方。我得到的错误是（400）错误请求。它发生在最后一行。从我在网上看到的例子来看，我似乎做得对。我已经通过 Fiddler2 运行了代码，它似乎与我从[Google 的 OAuth Playground](https://developers.google.com/oauthplayground)获得的内容相匹配，这使得这个问题非常奇怪。我已经三次检查了我的 ClientId 和 Client Secret。它们对我的应用程序是正确的。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T20:26:17.953

我真的想通了。我正在输入“redirect_url”。它应该是“redirect_uri”

# java - 什么是标量类型，为什么将未经检查的强制转换抑制为数组类型比标量类型风险更大？

> ID：14986765
> 
> 赞同：4
> 
> 时间：2013-02-20T18:00:48.790
> 
> 标签：java, generics, effective-java

来自 Effective Java Item 26 **Favor Generic types**

> 在所有其他条件相同的情况下，将未经检查的强制转换抑制为数组类型比标量类型风险更大，这将建议第二种解决方案。但是在比 Stack 更现实的泛型类中，您可能会在代码中的许多点从数组中读取，因此选择第二种解决方案需要多次转换为 E 而不是一次转换为 E[]，这就是为什么第一种解决方案更常用 [Naftalin07, 6.7]。

作者`scalar type`在这里是什么意思，他想在这里表达什么？什么选项 1 被认为比选项 2 更危险？

编码 ：

```
// The elements array will contain only E instances from push(E).
// This is sufficient to ensure type safety, but the runtime
// type of the array won't be E[]; it will always be Object[]!
@SuppressWarnings("unchecked") 
public Stack() {
  elements = (E[]) new Object[DEFAULT_INITIAL_CAPACITY];
} 
```

VS

```
// Appropriate suppression of unchecked warning
public E pop() {
  if (size == 0)
    throw new EmptyStackException();
  // push requires elements to be of type E, so cast is correct
   @SuppressWarnings("unchecked") E result = 
   (E) elements[--size];
   elements[size] = null; // Eliminate obsolete reference
   return result;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T18:07:50.920

此示例中的标量类型是单个值，而不是由多个值组成的数组，例如数学向量。E[] 是数组，E 是标量。

我最初的想法是 Joshua Bloch 认为在数组的情况下抑制未经检查的强制转换警告风险更大，因为要证明代码的类型安全不会发生任何错误会更加复杂。

ruakh 在评论中提到了另一个值得考虑的观点：*“我认为这与证明的复杂性无关，而是在存在错误时检测错误。我认为错误之间的“距离”通常会更小-but-unchecked cast to (E) 和随后引发 ClassCastException 的隐式转换，而不是使用转换为 (E[]) 的情况”*

第三种意见（如果我理解正确，这就是不可靠的人想在他的回答中指出的，无论如何这是我的新意见）是数组转换是“有风险的”，因为这个数组不能在这个之外使用班级。`(E[])`是未经检查的强制转换：由于类型擦除，运行时无法真正检查此（不正确）强制转换的正确性。我们使用了一个肮脏的技巧，但如果某个方法将此数组返回为 E[]，并且将其分配给客户端类中的 E[]，它仍然会在运行时失败并出现 ClassCastException：

```
public class Test {
    public static void main(String[] args) {
        Stack<String> stack = new Stack<String>();
        String[] array = stack.getArray(); // ClassCastException at runtime here!
    }
}

class Stack<E> {
    E[] elements;

    public Stack() {
        elements = (E[]) new Object[10];
    }

    // oh no, our dirty-tricky array escapes!
    E[] getArray() {
        return elements;
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-20T18:57:39.440

理想情况下，我们想写

```
E[] elements;

public Stack() 
{
    elements = new E[DEFAULT_INITIAL_CAPACITY];
} 
```

不幸的是，Java 犯了一个巨大的错误并且不允许这样做。所以我们需要变通方法。

这种解决方法

```
E[] elements;

public Stack() 
{
    elements = (E[]) new Object[DEFAULT_INITIAL_CAPACITY];
} 
```

在 Java 类型系统中理论上是*错误*`Object[]`的，因为 an不是`E[]`. 它*恰好在**今天的*JVM上运行时工作，但是，我们不应该指望它永远工作。嗯，实际上，人们确实指望这一点，而且我看不出它有任何改变的机会。所以没人在乎。

（更正：实际上语言规范 §5.5 明确允许强制转换在运行时工作，因此每个规范的代码都没有错。但是，它太老套了，它不是“正常”类型系统的一部分，它的正确性基于一些我们并不想学习的妥协。）

第二种解决方法在实践和理论上都是正确的

```
Object[] elements;

public Stack() 
{
    elements = new Object[DEFAULT_INITIAL_CAPACITY];
}

public push(E e)
{
    ...
    elements[size++] = e;
}

public E pop()
{
    ...
    E result = (E)element[size--];
} 
```

从 Object 到 E 的转换是正确的，因为程序逻辑确保它必须是`E`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T18:04:29.457

在这种情况下，*标量*类型意味着非数组类型。

# php - jQuery 1.9.1 ajax() json 响应：带有包含的 php

> ID：14986767
> 
> 赞同：1
> 
> 时间：2013-02-20T18:00:57.587
> 
> 标签：php, jquery, ajax, json, include

我对 jQuery 1.9.1 和 json 响应有疑问。我的 html-File 测试非常简单（使用 jQuery 1.8.3）：

```
<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>

    <script type="text/javascript">

      $.ajax({
        url: "php/news_test.php",
        dataType: "json",
        success: function(json){
          $("#news-box").html(json.news.name);
        }
      });

    </script>
  </head>
  <body>
    <div id="news-box"></div>
  </body>
</html> 
```

这适用于以下 php 文件：

```
header('Content-type: application/json');
include('core/database.php');
/*
$db = new Database();
...
...
...
*/
echo json_encode(array("news" => array("name" => "Test"))); 
```

但是当我更改为 jQuery 1.9.1 时，我没有得到回应。我必须评论第二行`include('core/database.php');`之后我得到了 jQuery 1.9.1 的回复。database.php 只有一行用于测试`$db_host = 'localhost';`

我不能在 jQuery 1.9.1 中使用包含吗？我的代码有错误吗？或者它是一个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-12T05:35:59.400

我遇到了似乎同样的问题，这是因为该文件必须使用 Dreamweaver 中选中的“包含 Unicoi 签名 (BOM)”进行保存。您必须在没有该选项的情况下重新保存问题文件（将复选框留空）。看到[这篇文章](http://www.softmehard.com/beware-of-the-unicode-signature-bom/)了解更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-06T21:34:26.580

简单地将 jQuery 升级到 1.9.1（我相信是从 1.7.2）时，我遇到了同样的问题。在不更改任何其他代码或服务器的情况下，我开始收到此错误。我解决它的方法是删除该行

```
dataType: "json", 
```

来自 AJAX 调用。

# javascript - onchange 在公式中使用 - 选择。如何保存信息？

> ID：14986771
> 
> 赞同：0
> 
> 时间：2013-02-20T18:01:06.437
> 
> 标签：javascript, select, onchange

我在 php + javascript 中做一个公式，对我的选择使用 onchange 事件。当我选择一个选项时，onchange 会跳转到我的函数，但问题是我没有保留我的表单，就像它只使用我的函数信息打开一个新页面一样，所以我丢失了我想保留的表单。

这是代码：

```
< SCRIPT LANGUAGE='JavaScript' >
function test(){
    document.write("test");
}

</SCRIPT>
<?php
for($i=0; $i<5; $i++)
{
    echo "<SELECT NAME='proba' onchange='test()' >";
    echo "<OPTION VALUE='$i'>.$i.</OPTION>";
}?> 
```

对不起，如果标题有点混乱，但我不知道如何解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T18:27:46.590

这是因为您正在覆盖文档内容。试试看：

```
 <script type="text/javascript">
    function test(){
        document.getElementById("myTestField").value = "TEST";
    }

    </SCRIPT>

    <?php
    echo "<SELECT NAME='proba' onchange='test()'>";
    for($i=0; $i<5; $i++)
    {

        echo "<OPTION VALUE='$i'>.$i.</OPTION>";

    }
    echo "</SELECT>";
    echo "<INPUT id='myTestField'>";

?> 
```

如果你在文件上写，前一个元素会丢失，这个应该可以。

# java - 在 Android 的两个工作线程之间传递数据是个好主意吗？

> ID：14986774
> 
> 赞同：2
> 
> 时间：2013-02-20T18:01:13.957
> 
> 标签：java, android, multithreading

我决定将一个后台任务分成两个线程。因此，我有一个`ScheduledExecutorService`管理两个工作线程并每 3 秒定期运行它们的一个。他们执行接下来的两个任务：

1.  从服务器检索数据
2.  对这些数据进行一些操作

因此，在第一个线程从服务器检索大量数据后，它会将其传递给第二个工作线程，后者对其进行转换。

但我认为这是某种反模式，因为我会这样做 - 一个线程将依赖于另一个线程，从多线程应用程序设计的角度来看这是不好的。我是对还是错，这个解决方案还不错？任何解释，特别是从设计的一般观点来看，都将受到赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T18:05:12.337

这是一个典型`producer/consumer`示例，您可以*将数据检索线程*视为a `producer`，*将数据操作线程*视为消费者。所以我认为设计没有任何问题。

您可以使用适当的类来实现`concurrent.BlockingQueue`在线程之间传递消息，主要是`producer`从`consumer`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T21:26:36.597

一根线。伪：

```
while(true){
  dateTime start=now();
  retrieveData;
  transformData;
  dateTime end=now();
  dateTime elapsed=end-start;
  int msElapsed=dateTimeToMs(elapsed);
  if (msElapsed>0) Sleep(msElapsed);
}; 
```

没有线程间通信，没有同步，没有队列，没有重叠，没问题。

# sql-server - SQL Server：触发触发

> ID：14986781
> 
> 赞同：0
> 
> 时间：2013-02-20T18:01:33.667
> 
> 标签：sql-server, triggers

```
CREATE table1;
CREATE table2;

CREATE trigger1 ON table1 AFTER DELETE AS DELETE FROM table1;
CREATE trigger2 ON table1 AFTER DELETE AS DELETE FROM table2;

DELETE FROM table1 
```

最后一个查询将触发`trigger1`并且`trigger2`.

是否再次`trigger1`触发`trigger2`（如果设置了数据库默认选项）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T18:06:05.417

这取决于`nested triggers`服务器上的设置。看：

[http://msdn.microsoft.com/en-us/library/ms190739.aspx](http://msdn.microsoft.com/en-us/library/ms190739.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T18:10:51.873

如果选项 RECURSIVE_TRIGGERS 设置为 on 并且配置“嵌套触发器”设置为 1，那么是的触发 trigger1 将导致 trigger1 和 trigger2 再次触发，然后再次触发，直到触发后的深度达到 32 级。否则，他们不会递归触发。

# php - Mysql Query - 增加值大于X但小于Y的值

> ID：14986784
> 
> 赞同：1
> 
> 时间：2013-02-20T18:01:41.860
> 
> 标签：php, mysql, phpmyadmin

我想更改数据库中一行的值。

例如：它被调用`USERID`并以`ID`2000 开始并以用户`ID`3000 结束。所以我有 1000 个条目。我想改变所有`ID`的，从一个新的数字开始，每个条目增加+1。

例如，该用户`ID`以 5000 开始并以 6000 结束。

是否有任何mysql查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T18:06:36.047

```
UPDATE Entrys 
SET USERID = (USERID + 4000) 
WHERE ID >= 2000 
AND ID <= 3000 
```

此代码将在 2000 到 3000 之间的每个 USERID 上添加 4000，这意味着它们将被重新编号为 6000、6001 等。

# android - 与eclipse共享android项目

> ID：14986785
> 
> 赞同：0
> 
> 时间：2013-02-20T18:01:45.880
> 
> 标签：android, eclipse, sharing

我正在通过 Eclipse 开发 android 游戏，并且我正在与一个对编程一无所知的设计师一起工作。因此，他没有任何必要的工具（eclipse 和 android 插件）在他的手机中运行我们的项目。有什么办法让我把申请发给他吗？此应用程序仍在进行中，因此我无法在某处发布它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T18:07:39.343

签署它，就好像您要发布它以获取 APK。在那之后，这是一个在电话上获取它的问题。

1.  他可以从服务器下载它。在手机中打开apk，它将安装。

2.  电邮给他。如果他的手机上有 Gmail，Gmail 甚至会自动安装它。

3.  他可以手动将apk放入文件系统中。将手机设置为媒体设备，然后像将拇指驱动器一样简单地将 APK 放在手机上。然后他需要一个像[Astro](https://play.google.com/store/apps/details?id=com.metago.astro&hl=en)这样的文件浏览器来打开apk。然后它将安装。

4.  如果您有共享文件夹，Dropbox 和其他文件同步系统会自动将 APK 下载到手机。这很适合轻松更新。他仍然需要手动安装它们。

对于每种情况，他都需要将手机设置为允许通过 中的“安全”部分从“未知来源”进行安装`Settings`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T18:23:33.463

我认为他尝试的最快方法是向他发送可以在 YourProject/bin/youproject.apk 中找到的 .apk。

当您从 Eclipse 运行应用程序时，该 .apk 是 Eclipse 上传并在设备/模拟器中运行的那个。

每次发生更改时，都会生成一个新的 .apk，您应该将其发送给他以查看这些更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T19:11:00.367

因为您想要跟踪您的开发构建，所以您应该考虑构建它，然后让您的流程将您的工件上传到 Amazon S3，这样您就拥有了内部发布的所有构建的存档。然后只需给他链接，他就可以下载并安装它，这个过程将简化您的 APK 的内部发布。

# java - (Java) 从文本文件读取时出现 EOFException

> ID：14986788
> 
> 赞同：-1
> 
> 时间：2013-02-20T18:01:51.240
> 
> 标签：java, io, eofexception

我正在从文本文件中读取两个字符串和一个双精度，但继续抛出一个`EOFException`. 这是我的代码：

```
public static Book readBook(String pathname) throws IOException, FileNotFoundException{
      DataInputStream dis = new DataInputStream(
                                new BufferedInputStream(
                                    new FileInputStream(fn)));
      String theTitle = dis.readUTF();
      String theAuthor = dis.readUTF();
      double thePrice = dis.readInt();
      dis.close();
      return new Book(theTitle, theAuthor, thePrice);
   } 
```

我对 IO 真的很陌生，不知道如何解决这个异常，并且 throwing`EOFExecption`似乎不起作用。任何帮助将不胜感激，干杯

编辑：堆栈跟踪 + 文件内容

```
Exception in thread "main" java.io.EOFException
    at java.io.DataInputStream.readFully(Unknown Source)
    at java.io.DataInputStream.readUTF(Unknown Source)
    at java.io.DataInputStream.readUTF(Unknown Source)
    at Model.readBook(Model.java:48)
    at Model.runApp(Model.java:17)
    at Main.main(Main.java:8) 
```

文件内容

姓名作者 10.00 姓名 2 作者 2 12.00

（在文件中，它们都在单独的行上）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T18:10:58.523

如果这是文本文件，那么您可能需要使用 Scanner：

```
Scanner scanner = new Scanner (new FileInputStream (fn));
String theTitle = scanner.nextLine ();
String theAuthor = scanner.nextLine ();
double thePrice = scanner.nextDouble ();
return new Book(theTitle, theAuthor, thePrice); 
```

上面的代码要求标题、作者和价格在不同的行上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T18:04:27.483

您的文本输入是如何格式化的？您是否指定要在输入中读取的字符串的长度？我的想法是你没有，或者指定了错误的长度，并且在随后的一次读取中之前到达了文件的末尾。

> 首先，读取两个字节并使用 readUnsignedShort 方法的方式构造一个无符号的 16 位整数。这个整数值称为 UTF 长度，并指定要读取的附加字节数。

[http://docs.oracle.com/javase/6/docs/api/java/io/DataInput.html#readUTF()](http://docs.oracle.com/javase/6/docs/api/java/io/DataInput.html#readUTF())

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T00:20:02.630

> 我正在从文本文件中读取两个字符串和一个双精度

不，你不是。您正在从二进制文件中读取两个 writeUTF() 结果和一个整数。如果它不是二进制文件，则说明您使用了错误的代码。您需要逐行读取文件，可能在空格上拆分每一行，并使用`Double.parseDouble()`. 或者，`java.util.Scanner`用来使整个事情变得更容易。

# objective-c - 将对象的内存地址作为 long/long long？

> ID：14986791
> 
> 赞同：3
> 
> 时间：2013-02-20T18:02:01.483
> 
> 标签：objective-c, cocoa

我需要的很简单：

与我们可以`NSLog("%@",someObject);`或`NSString* Hex = [NSString stringWithFormat:@"%p",someObject];`打印内存地址的*十六进制*值相同的方式`someObject`，我想将它放入一个数字变量中（将其用作唯一标识符）。

知道如何做到这一点吗？有什么内置方法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-20T18:04:20.500

你不需要任何“方法”。您正在寻找演员表操作员：

```
uintptr_t pointer_as_integer = (uintptr_t)someObject; 
```

**但你真的不应该这样做。**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T18:29:17.140

其他人展示了如何获取地址的整数值，我想添加一些考虑因素。

只要对象存在，指针就已经是唯一的。并且作为 sson，作为一个对象被释放，不再使用从指针派生的唯一标识符。事实上，如果您有一个已分配对象的标识符，该地址已被重用，它可能会造成伤害。

通过将对象添加到某个集合或向对象本身添加保证的唯一 ID 来更好地跟踪对象。[UUID](http://de.wikipedia.org/wiki/Universally_Unique_Identifier)是一个不错的选择。

一个实现：

```
-(NSString *)uuid
{
    CFUUIDRef uuid = CFUUIDCreate(kCFAllocatorDefault);
    NSString *uuidStr = (__bridge_transfer NSString *)CFUUIDCreateString(kCFAllocatorDefault, uuid);
    CFRelease(uuid);
    return uuidStr;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-20T18:14:34.677

您可能想查看`-(NSUInteger)hash`NSObject 上的方法。如果你真的想要，指针已经是整数，而十六进制只是一种读取整数的格式。

```
NSLog("%x",(int)someObject); 
```

# node.js - 是否有人使用 Amazon OpsWorks 成功部署了节点（快速）应用程序？

> ID：14986794
> 
> 赞同：14
> 
> 时间：2013-02-20T18:02:11.313
> 
> 标签：node.js, amazon-web-services

正如标题所暗示的，我一直在尝试使用 Amazon 的新 OpsWorks 管理系统部署应用程序，但是我无法弄清楚如何让节点服务器开始在实例上运行。从应用程序层也可以访问的端口我假设我需要在端口 80 上进行侦听，但是我觉得问题在于没有启动正确的文件。

与 Heroku 上的 Procfile 类似，是否需要包含一个特殊的启动脚本类型文件才能让 OpsWorks 正确启动它？

请注意，我还没有使用 Chef 的经验，所以我希望让它使用默认选项，即不编写自定义 Chef 食谱来做到这一点。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-21T05:45:06.190

我花在这方面的时间令人尴尬，但无论如何我都会分享，希望能挽救其他人的生命，否则这些时间会被亚马逊偷走。

*   要回答你的问题，是的，我确实让我的 node/express 应用程序运行了。
*   如果您使用任何一种`process.env`选择端口号的方法，请将您的侦听端口更改为 80（或 443，如果合适）。
*   **最重要的是，亚马逊并不关心你的`main`文件是什么。重命名它`server.js`并将其放在应用程序的根目录中。那是 monit 尝试运行的文件。**

希望这会有所帮助。如果没有，或者所有这些都很明显，我为我的愚蠢道歉并责怪睡眠不足。:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-12-01T22:01:19.000

ZachRabbit 的好答案。我想补充一点，OpsWorks 现在支持为已部署的应用程序进程设置环境变量（即 process.env.PORT）。

当您添加应用程序（或编辑）时，如果您在 server.js 中使用类似以下内容，则可以继续使用 PORT 键和 80 值设置环境变量：

```
!/usr/bin/env node
var debug = require('debug')('my-app');
var app = require('app');

app.set('port', process.env.PORT || 3000);

var server = app.listen(app.get('port'), function() {
  debug('Express server listening on port ' + server.address().port);
}); 
```

有关环境变量设置的更多信息，请参见此处：

[http://docs.aws.amazon.com/opsworks/latest/userguide/apps-environment-vars.html](http://docs.aws.amazon.com/opsworks/latest/userguide/apps-environment-vars.html)

确保文件名是 server.js 并将环境变量 PORT 设置为 80 对我来说就像一个冠军。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-29T04:39:44.003

只需复制 AWS OpsWorks 页面以配置 node.js 应用程序：

“默认情况下，我们希望您的 Node.js 应用程序侦听端口 80。此外，我们传递给节点的文件必须命名为“server.js”，并且应该位于应用程序的根目录中。”

问候。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-08T20:16:35.987

可能有点跑题了，但我花了几个小时在这上面，所以我认为值得分享：

在 OpsWorks 上设置[Hapi.js](http://hapijs.com)服务器时，我必须确保没有使用 hostname `localhost`，而是将其设置为`0.0.0.0`. 否则它只是默默地失败。

希望对任何人都有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T18:23:35.107

我也玩了一会儿，希望我的成功之路能帮助别人。Node.js 通常需要提升权限才能在端口 80 上运行，所以我发现虽然命名示例应用 app.js 很好，但您需要修改默认 OpsWorks Node.js 部署厨师配方的第 2 行以使用 sudo：

*   AWS 原文： [https ://github.com/aws/opsworks-cookbooks/blob/master/opsworks_nodejs/templates/default/node_web_app.monitrc.erb#L2](https://github.com/aws/opsworks-cookbooks/blob/master/opsworks_nodejs/templates/default/node_web_app.monitrc.erb#L2)

*   修改： [https ://github.com/nationalfield/opsworks-cookbooks/blob/master/opsworks-nodejs/templates/default/node_web_app.monitrc.erb#L2](https://github.com/nationalfield/opsworks-cookbooks/blob/master/opsworks-nodejs/templates/default/node_web_app.monitrc.erb#L2)

# php - Gearman 工作人员的权限问题

> ID：14986803
> 
> 赞同：0
> 
> 时间：2013-02-20T18:02:37.353
> 
> 标签：php, permissions, file-permissions, gearman

**这是场景：**

我有一个将 pdf 文件写入给定目录的 Web 应用程序（php、mysql）：/var/www/myapp/tmp。然后我使用 Gearman（从终端运行的工作 php 脚本）从这些 pdf 文件生成预览图像。工作脚本可以访问 /etc/mount/tmp 中的 tmp 目录，该目录可以符号链接到 /var/www/myapp/tmp 目录（如果工作脚本与 myapp 在同一台服务器上运行）或使用 NFS 挂载在那里（如果工作脚本在不同的服务器上运行）。

该应用程序使用 chmod 0777 在 tmp 中创建子文件夹，在这些子文件夹中放置 pdf 文件。工作人员从共享 tmp 目录中抓取文件（那里没有问题），生成预览图像，然后应该将预览图像写入共享 tmp 目录。

**问题**

当我在本地运行所有内容（客户端、作业服务器、工作者）时，我遇到了这个问题，所以使用符号链接的 tmp 文件夹：

子目录不可写，所以我不能写结果，工作人员失败。

现在 pdf 文件由 web 应用程序/gearman 客户端编写，并归用户 _www 拥有。工作脚本不通过 apache 运行，而是在不同的所有者（我，在终端登录）下运行，这给了我我想的这些权限问题。

我真的不明白为什么该文件夹不可写，因为我使用 0777 权限创建了它。符号链接可以与此有关吗？

无论如何，我不知道如何充分解决此问题，以便客户端和工作人员都可以在同一个文件夹中工作而不会出现权限问题。任何人都可以帮忙吗？

* * *

**更新**

第一个问题似乎是 umask，如果我将其设置为 0，则文件夹是可写的，但这仍然迫使我将权限设置为 0777。我怎样才能更安全地处理这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T18:41:23.243

我遇到了类似的情况，我需要 apache 和其他服务写入同一个文件夹。因此，我选择将所有必要的用户添加到“文件管理器”组，然后将 rwx 权限授予需要它们的文件夹上的文件管理器组。

```
mpurcell@service1 ~ $ -> id apache
uid=48(apache) gid=48(apache) groups=48(apache),507(filer),509(logger)

mpurcell@service1 ~ $ -> id mpurcell
uid=500(mpurcell) gid=502(mpurcell) groups=502(mpurcell),10(wheel),501(webdev),507(filer),509(logger)

mpurcell@service1 ~ $ -> ls /home/db/permfile/
total 12
drwxrwsr-x. 3 filer filer 4096 Feb 13  2012 .
drwxrwxr-x. 4 filer filer 4096 May  5  2012 .. 
drwxrwsr-x. 6 filer filer 4096 Dec 24 00:41 app 
```

我还没有玩弄过 Gearman，但在您的特定情况下，无论工作人员运行的用户以及 gearman 服务都需要添加到文件管理器组中。

# performance - 轻量级 Jenkins 替代方案？

> ID：14986805
> 
> 赞同：15
> 
> 时间：2013-02-20T18:02:41.687
> 
> 标签：performance, jenkins, java, raspberry-pi, raspbian

我正在尝试使用 Raspberry Pi 作为家庭开发服务器。我需要在它上面运行一个构建服务器。

Jenkins 速度非常慢，加载起始页面需要 10-15 秒，当我尝试访问管理页面时，我不得不在 100% cpu 负载下运行 15 分钟后停止 Jenkins 服务器。

这是无法接受的。

当我只使用 ant + git 构建并希望为较少数量的项目归档构建时，什么被认为是 Jenkins 的最佳替代方案？

有没有可能加快我当前的 Jenkins 安装速度？我目前正在为 ARM 使用 Oracle Java 8 JDK，并尝试了 Jenkins v1.447.2（我使用“apt-get install jekins”获得的版本，带有默认的 Rasbian 包源）以及 v1.502（最新的，速度更快但仍然无法忍受）。

# html - 如何仅使用 CSS（无 js）选择所有其他 div 类元素

> ID：14986810
> 
> 赞同：46
> 
> 时间：2013-02-20T18:02:55.553
> 
> 标签：html, css, css-selectors

我知道如何使用 javascript 和 php 来做到这一点，但我正在尝试学习如何/是否可以仅使用 css 来做到这一点。

我有一个装有许多物品的容器。每个项目都有一张图片，在图片下方是一个包含描述的 div。我希望每个其他项目的描述背景都不同。

是否可以仅使用 css 来实现这一点？如果是这样，怎么做？我一直在玩弄选择器

```
.item:nth-child(odd){background-color:red}
.item .description:nth-of-type(odd){background-color:orange;} 
```

我似乎无法得到它。建议，评论，任何东西都值得赞赏。
下面是一些简化的示例代码，演示了我正在做的事情。

```
<style>
#container{width:100% height:100%;}
.item {float:left; width:250px; height:700px;}
.item img {width:250px; height:250px; float:left;}
.description {width:250px; height:450px; float:left; background-color:blue;}
.description:nth-of-type(even){background-color:red;}      // <- Here's the line!!
</style>

<html>
 <body>
  <div id="container">
   <div class="item">       //item 1
    <img src="image.jpg"/>
    <div class="description"> //This (and every odd number) I want to be blue 
     <h1>Title</h1>
     <h2>Sub Title</h2>
     <p>Lorem Ipsum dolor sit for Adun!</p>
     <a href="#">::LEARN MORE::</a>
    </div>
   </div>
   <div class="item">      //item 2 and so on...
    <img src="image.jpg"/>
    <div class="description"> //and this (and every even number, red)
     <h1>Title</h1>
     <h2>Sub Title</h2>
     <p>Lorem Ipsum dolor sit for Adun!</p>
     <a href="#">::LEARN MORE::</a>
    </div>
   </div>
  </div>
 <body>
</html> 
```

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-02-20T18:08:18.807

你想`nth-child()`上`.item`。

```
.item:nth-child(odd) .description {
    background-color: red;
} 
```

**演示：** [[[[![jsFiddle](../Images/827f57786617d886d70c0bce0ccca6b6.png)](http://jsfiddle.net/ThinkingStiff/j9S8v/)]]]

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-20T18:09:13.763

```
.item:nth-child(even) {...}
.item:nth-child(odd) {...} 
```

**演示：http: [//jsfiddle.net/DuL24/1/](http://jsfiddle.net/DuL24/1/)**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T19:09:43.493

当我们使用它时，也许它是可能的：

```
.item:nth-of-type(odd)  .description{background-color:orange;} 
```

或者

```
.item:nth-child(odd) .description{background-color:orange;} 
```

你可以看到我的截图：[http](http://screencast.com/t/17g9joVj8Z)
://screencast.com/t/17g9joVj8Z 我希望你得到你需要的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T18:13:31.493

您应该将 nth-of-type 设置为 .item 元素：

```
#container{width:100% height:100%;}
.item {float:left; width:250px; height:700px;}
.item img {width:250px; height:250px; float:left;}
.description {width:250px; height:450px; float:left; background-color:blue;}
.item:nth-of-type(even) .description {background-color:red;} 
```

# mysql - MySQL MATCH AGAINST 返回不匹配的行

> ID：14986819
> 
> 赞同：1
> 
> 时间：2013-02-20T18:03:20.113
> 
> 标签：mysql

我正在尝试使用 a但它返回的行在任何'd 列`MATCH AGAINST IN BOOLEAN MODE`中都没有出现任何“Nathan” 。`MATCH()`这是我当前的查询格式：

```
SELECT `some_rows` 
LEFT JOIN `t1` ON `stuff`
LEFT JOIN `t2` ON `stuff`
LEFT JOIN `t3` ON `stuff`
WHERE MATCH(`some_rows`) AGAINST("Nathan" IN BOOLEAN MODE) 
```

所有三个表都使用`MyISAM`行`DYNAMIC`格式，并且表和行的所有排序规则都是相同的。

有人可以阐明这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T19:42:42.547

[我实际上在这里](https://stackoverflow.com/a/1241739/204263)找到了我的问题的答案。我的问题（大概）是我试图`MATCH()`从多个表中获取列，这显然是不允许的。我更正了我的查询，如下所示：

```
SELECT `some_rows` 
LEFT JOIN `t1` ON `stuff`
LEFT JOIN `t2` ON `stuff`
LEFT JOIN `t3` ON `stuff`
WHERE 
MATCH(`t1`.`some_rows`) AGAINST("Nathan" IN BOOLEAN MODE)
OR MATCH(`t2`.`some_rows`) AGAINST("Nathan" IN BOOLEAN MODE)
OR MATCH(`t3`.`some_rows`) AGAINST("Nathan" IN BOOLEAN MODE) 
```

我希望这对某人有所帮助。

# c++ - 模板运算符重载基类

> ID：14986822
> 
> 赞同：0
> 
> 时间：2013-02-20T18:03:32.070
> 
> 标签：c++, oop, templates, operator-overloading, base-class

我有一个有许多子类的基类。我将如何在基类中实现模板运算符而不是加载器以适用于所有继承类？我尝试使用 + 运算符创建一个，但它抱怨我的参数太多。我实际上不确定这是做这件事的正确方法（我刚刚开始使用 OOP），所以如果你能想到一个更好的方法，那也很棒。

我正在制作一个库，其中每个度量空间都是一个类。我想创建一个每个空间都继承的基类“操作”。

我的模板基类：

```
#ifndef __libSpace__Operations__
#define __libSpace__Operations__

template< typename T >
class Operations{
public:
    friend T operator+( const T& sp, const T& nsp ){
        return T(sp.dimension + nsp.dimension);
    };
};

#endif 
```

孩子：

```
#ifndef __libSpace__EuclidSP__
#define __libSpace__EuclidSP__

#include "Operations.h"

class EuclidSP: public Operations<EuclidSP>{
public:
    EuclidSP(int n = 0, ...);
    ~EuclidSP();

    double* vector();

private:
    int dimension;
    double *vec = new double(dimension);
};

#endif 
```

主要的：

```
#include <iostream>
#include "EuclidSP.h"

int main(int argc, const char * argv[])
{
EuclidSP ob1(3,4.0,5.0,6.0);
EuclidSP ob2(3,2.0,5.0,3.0);
EuclidSP obj3();

obj3 = ob2+ob1;

return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T18:11:23.133

一个成员`operator +()`只有一个参数，即右操作数。左边或第一个总是`*this`。根据您的情况，您只需要一个 base `+`、一个 virtual`+`或一个模板。一个自由`operator +()`取两个参数，“左”和“右”。

在您的代码中：

```
template< typename T >
class Operations{
public:
    friend T operator+( const T& sp, const T& nsp ){
        return T(sp.dimension + nsp.dimension);
    };
}; 
```

你想要会员还是朋友？

如果是朋友，问题是 +() 必须在类外定义，它只是朋友，而不是成员。

```
template< typename T >
    T operator+( const T& sp, const T& nsp );

template< typename T >
class Operations{
public:
    friend T operator+<T>( const T& sp, const T& nsp );

};

template< typename T >
    T operator+( const T& sp, const T& nsp )
    {
        return T(sp.dimension + nsp.dimension);
    } 
```

但 ！！！！现在你遇到了真正的问题：+() 使用派生类的 privat 成员，而不是基类，所以它需要成为派生类的朋友。我认为你需要重新考虑 ;-) 你的设计。如果您在操作中使用维度如此舒适.. 它可以成为操作的受保护成员吗？？？您的所有运营都有维度吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T18:20:34.220

您的基类应该通过将派生类型类作为模板参数接收并实现`operator+`为`friend`：

```
template< typename T >
class base
{
    friend T operator+( const T& lhs, const T& rhs )
    {
       // your generic implementation here...
    }
}; 
```

然后派生类从基类派生，如下所示：

```
class D1 : public base<D1> { ... };
class D2 : public base<D2> { ... }; 
```

# javascript - 为什么 jquery .val() 函数没有设置实际值？

> ID：14986827
> 
> 赞同：-1
> 
> 时间：2013-02-20T18:03:43.013
> 
> 标签：javascript, jquery

我使用这个函数来检查属性的存在：

```
var hasAttribute = function(el, attr) {
    if ("hasAttribute" in el) {
        return el.attributes[attr] != null;
    }
    else if ("outerHTML" in el) {
        return (el.outerHTML
                   .replace(el.innerHTML, "")
                   .indexOf(" " + attr + "=") > -1);
    }
}; 
```

问题是当我使用 设置输入值时`.val(x)`，如果我使用，我可以获得该值，`.val()`但`hasAttribute`函数无法检测到它。[这个 jsfiddle](http://jsfiddle.net/8HAdA/)显示了问题（我希望第一个警报说“输入有一个值”，第二个显示它，但在 Chrome 中至少第一个警报说“输入需要一个值”）。

如何`.val(x)`按预期工作？（或如何`hasAttribute`检测这些值）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T18:08:40.723

属性和属性是 2 个不同的实体。属性是与 html 元素内联定义的。在加载时，浏览器会读取每个属性并创建关联的属性。

稍后对此元素的任何更新都将更新属性而不是属性。

这个[https://stackoverflow.com/a/5876747/297641](https://stackoverflow.com/a/5876747/297641)答案有详细的 attr vs prop。

可能像下面这样，

```
if ($("input").prop("value")) {
    alert("input has a value");
} else {
    alert("input needs a value");
} 
```

你现在真的不需要这个功能。`undefined`因为如果道具不存在，jQuery 将返回。

正如 Felix 指出的那样，如果你只做`input.value`which is falsy 如果它没有任何价值，那将是最好的`""`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T18:07:52.780

使用`.val`就像做`el.value = ...`. 它与`value`在元素上设置属性不同。

# java - 更改 Jersesy-Jackson 中的默认 JSON

> ID：14986828
> 
> 赞同：0
> 
> 时间：2013-02-20T18:03:45.190
> 
> 标签：java, json, jersey, jackson

我正在使用 Jersey（Jackson POJO 映射）构建一个 RESTful 服务并且有一些疑问......想象一个类似论坛的应用程序，在该域中我有**Group**和**Question** POJO。

组.java

```
class Group{
    int id;
    String name;
 //setter/getters
} 
```

问题.java

```
class Question{
    int id;
    String title;
    String text;
  //setter/getters

} 
```

如您所见，我没有在这两个类之间定义任何关系。我想说的是 Group 没有

```
private Question[] questions; 
```

当我调用 GET /rest/groups 时，我得到了一个完美的 JSON：

```
{
   [
     {"id":1, "name":"Group name..." },
     {"id":2, "name":"Group name..." }

   ]
} 
```

当我请求 GET /rest/groups/12 时，我想要得到的是：

```
 {
   "group":{
       "id":12,
       "name":"Group 12"

    },
    "questions":[
           {"id":102, "title":"question title..." },
           {"id":201, "title":"question title..." }   
     ]

} 
```

通过在 Group 类中定义一个成员变量，我能够得到类似的东西：

```
 private Question[] questions; 
```

我试图从 HAS-A 依赖项中清除我的域类，因为我将使用 Hibernate 并将通过注释定义关系。问题是：对于与另一个具有HAS-A关系的资源，我想要返回的JSON格式最好和最灵活的方式是什么......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:25:26.123

您需要构建类似`GroupResponse`对象的东西：

```
class GroupRespose {
  final Group question;
  final List<Question> questions;
} 
```

并将其用作您的响应对象。这将为您提供所需的格式（尽管考虑到您的问题，我怀疑您确实想要`final Group group`并且这是问题中的错字）。

# javascript - JavaScript 数组竞争条件/线程问题？

> ID：14986830
> 
> 赞同：0
> 
> 时间：2013-02-20T18:03:50.393
> 
> 标签：javascript, arrays

```
var globalArray = []; 
```

此回调每秒最多触发 100 次

```
function EventCallback(param) {

globalArray.push(param);

} 
```

我处理项目列表的程序的主要部分。

如果在此处修改数组的过程中触发回调会发生什么？

```
while(globalArray.length > 0) 
{

ProcessListItem(globalArray.shift());

} 
```

我遇到的问题是 Firefox Spidermonkey javascript 引擎有时会出错（竞争条件/线程问题？）并告诉我 globalArray.push 不是函数或其他奇怪的错误。

我想要实现的是让回调将项目添加到列表中，以便稍后处理它们。有没有更好的编码方法？我是新手，所以任何建议都值得赞赏。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T18:05:56.417

这不会发生，因为 JavaScript 在您的浏览器中运行单线程。只有在浏览器无事可做时才会触发该事件。

# php - 不同 $_GET 变量的数组

> ID：14986831
> 
> 赞同：0
> 
> 时间：2013-02-20T18:03:51.220
> 
> 标签：php, arrays, get

假设您在此页面上：`profile.php?user=1&wicked=3`

得到一个像这样的数组：

```
Array
(
    [user] => 1
    [wicked] => 3
) 
```

如何简单地获取数组的第一个或第二个值？所以如果我想要第二个，我会得到：`wicked=3`？是带有foreach循环的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T18:07:07.660

如果我猜对了，您想使用数字索引数组。

```
$new_ar = array_values($_GET) ; //["user"=>"1", "wicked"=>"3"] ;
echo $new_ar[1] ; // echoes 2nd value - "3" 
```

# twitter - Twitter 自定义引导和引导响应样式表

> ID：14986833
> 
> 赞同：1
> 
> 时间：2013-02-20T18:03:58.873
> 
> 标签：twitter, twitter-bootstrap

自定义 twitter 引导程序和响应样式表以便将来仍然可以升级的最佳实践是什么？

覆盖自定义样式表中的响应式@media 规则？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T18:24:34.800

如果您不使用 LESS，我建议您使用 LESS。此外，只需在开头将基本 bootstrap.less 导入样式表（[https://groups.google.com/forum/?fromgroups=#!topic/dotless/bxNqBLtYmGM](https://groups.google.com/forum/?fromgroups=#!topic/dotless/bxNqBLtYmGM)）并从那里扩展它。尝试将引导变量用于高度、颜色等，也保持一切一致。

从这里更新 bootstrap 时，新的 bootstrap.less 应该在下次构建 LESS 文件时包含在您的工作表中。

请注意，我没有亲自尝试过，但它应该没问题。

# docpad - 文本插件 - 嵌入的 html

> ID：14986835
> 
> 赞同：0
> 
> 时间：2013-02-20T18:04:09.393
> 
> 标签：docpad

text-plugin ( [https://github.com/docpad/docpad-plugin-text/](https://github.com/docpad/docpad-plugin-text/) ) 似乎转义了嵌入在标记文本中的 HTML。

插件不应该使用“标记”进行转换......就像将 md 文档处理为 html 时所做的一样（在这种情况下，它将很高兴地处理混合的 markdown 和 html 数据）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T21:57:38.137

是的，要渲染任何东西，它将使用您安装的任何插件，因为它只是使用与 docpad 内部完全相同的渲染管道来进行转换。

内容被转义很奇怪，也许是旧版本的插件默认情况下该`sanitize`选项为真（最近的版本默认设置为假）？

除非我们看到 repo 源，否则无法提供进一步的帮助。谢谢。

# android - 从相机意图返回时访问视图时出现 NullPointerException 仅影响三星 JB 构建 JRO03L.L710VPBLJ7

> ID：14986839
> 
> 赞同：1
> 
> 时间：2013-02-20T18:04:28.037
> 
> 标签：android, samsung-mobile

我有一个应用程序，用户可以在其中选择图像或拍摄新图像，然后对其进行编辑。从选择或捕获返回后，我自然有代码来刷新 UI。为简单起见，假设相关代码为：

```
LinearLayout options_holder;

@Override
public void onCreate {
    options_holder = (LinearLayout) findViewById(R.id.options_holder);
}

@Override
public void onActivityResult(int res, int req, Intent data) {
    updateLayout();
}

public void updateLayout() {
    Log.d("LOG", options_holder.getClass().getName());
} 
```

除了三星 Galaxy S3、Note 和 Galaxy Camera，我的 android 应用程序在我测试过的所有其他设备上都能正常运行。对于这些特定的三星设备，从图像捕获返回会在 options_holder 上引发 NPE。然而，从选择器返回的行为符合预期，所以我不知道问题出在哪里。

我怀疑构建是罪魁祸首。有谁知道我该如何解决这个问题？

# xampp - 本地主机上的通配符子域

> ID：14986840
> 
> 赞同：0
> 
> 时间：2013-02-20T18:04:28.833
> 
> 标签：xampp, localhost, subdomain

所以我在我的本地主机（xampp）上有一个正在开发中的网站

http://localhost/new_site/

**该站点使用动态子域...在实时服务器上...我的意思是...我需要在我的本地主机上复制它，** 所以 http://*.localhost/new_site/ 应该加载 http://localhost/new_site/

*我找到的解决方案是针对特定子域而不是通配符*，其中大多数假设您需要一个或两个子域并且您的项目位于 localhost 的根目录中。

那么有人可以提出解决方案吗？

谢谢， 稀有

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T18:06:10.027

子域只是 DNS 映射。您不能在 localhost 上映射 DNS，因为 localhost 只是指您的本地环回 IP，而子域指的是 DNS 中完全不同的 IP。

为了更好地理解这一点：

当您访问 google.com 时，您的浏览器会向 DNS 服务器查询要连接的 IP。如果您访问 maps.google.com，它会向它查询不同的 IP，在这种情况下会重定向到[http://google.com/maps](http://google.com/maps) - 因此，由于 localhost 只是 127.0.0.1，而不是 DNS 引用，因此您无法指定 subdomain.localhost

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-06-27T04:10:04.827

本地主机上不能使用通配符 (*) 子域。但是，出于测试目的，您可以在位于“ **C:\Windows\System32\drivers\etc** ”的“ **hosts** ”文件中配置一些子域

 ***在下面的示例中，我使用**了 uniedu**而不是 localhost*

```
127.0.0.1   uniedu
::1 uniedu

127.0.0.1 suba.uniedu subb.uniedu
::1     suba.uniedu subb.uniedu 
```

> 您可以通过用空格分隔它们来在单个条目中添加多个子

重要提示：您还必须通过编辑 vhosts 文件在 XAMP/WAMP 中添加相同的 subs

```
<VirtualHost *:80>
    ServerName uniedu
    ServerAlias suba.uniedu subb.uniedu
    DocumentRoot "e:/....
    ...
    ...
</VirtualHost> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-27T19:07:18.997

理论上，您可以在您的开发机器上创建一个本地 DNS 服务器，并将您的网络 DNS 记录指向您的本地机器上查找域。这意味着当您在浏览器中键入域名时，浏览器会先询问您的本地 DNS 服务器，然后再询问外部 DNS 服务器。然后，您可以在本地 DNS 服务器上创建自定义区域（包括 *.localhost），然后将其指向 127.0.0.1 或本地 DHCP 颁发的 IP 地址。我建议查看 DNSProxy：

> [https://github.com/hubdotcom/marlon-tools](https://github.com/hubdotcom/marlon-tools) - 文档

或者

> [https://github.com/hubdotcom/marlon-tools/blob/master/tools/dnsproxy/dnsproxy.py](https://github.com/hubdotcom/marlon-tools/blob/master/tools/dnsproxy/dnsproxy.py) - 代码

或者查看 DNSMasq：

> [https://thekelleys.org.uk/dnsmasq/doc.html](https://thekelleys.org.uk/dnsmasq/doc.html) - 文档

或者

> [https://sixfeetup.com/blog/local-development-with-wildcard-dns-on-linux](https://sixfeetup.com/blog/local-development-with-wildcard-dns-on-linux) -tutorial**

# c# - 如何让 NHibernate 返回复合键表上的数据？

> ID：14986847
> 
> 赞同：0
> 
> 时间：2013-02-20T18:04:41.743
> 
> 标签：c#, nhibernate, orm, hbm

我的数据库中有一个联结表。我需要读取 id 值并在我的程序中使用它们。我无法让 NHibernate 返回数据库中的任何记录。看起来好像我的映射文件“编译”了，但没有返回任何结果。

**链接表**

*   **int** id_ObjectA *（外键）*
*   **int** id_ObjectB *（外键）*

**LinkDAO 类：**

```
public class LinkDAO
{
    public virtual ObjectADAO ObjectA { get; set; }
    public virtual ObjectBDAO ObjectB { get; set; }

    public override bool Equals(object obj)
    {
        if (obj == null)
        {
            return false;
        }
        var t = obj as LinkDAO;
        if (t == null)
        {
            return false;
        }
        return (t.ObjectA == ObjectA && t.ObjectB == ObjectB);
    }

    public override int GetHashCode()
    {
        return (ObjectA.Name + "|" + ObjectB.Name).GetHashCode();
    }
} 
```

***映射文件**“LinkDAO.hbm.xml”：*

```
<class name="LinkDAO" table="LinkTable" lazy="false">
    <composite-id>
      <key-property name="ObjectA" column="id_ObjectA" />
      <key-property name="ObjectB" column="id_ObjectB" />
    </composite-id>
</class> 
```

我这样查询：

```
IList<LinkDAO> links  =
        NHibernateContext.Current().Session.QueryOver<LinkDAO>().List();
//Empty list is returned, but I can check the DB and see records 
```

**问题：** 当表仅包含复合键时，如何将两列读取为 int 值？（引用实际对象会很有用，但 int id 就足够了）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T20:21:08.607

我将 LinkDAO 类设为 Serializable 。

不确定您是否打算使用 ObjectADAO 和 ObjectBDAO 并且是这样的：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication3.Models
{
    [Serializable]
    public class ObjectADAO
    {
        public virtual int Id { get; set; }
        public virtual string Name { get; set; }
    }

    [Serializable]
    public class ObjectBDAO
    {
        public virtual int Id { get; set; }
        public virtual string Name { get; set; }
    }
}

<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
                   assembly="ConsoleApplication3"
                   namespace="ConsoleApplication3.Models">

  <class name="ObjectADAO">
    <id name="Id" type="Int32" generator="native"/>
    <property name="Name" />
  </class>

</hibernate-mapping>

<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
                   assembly="ConsoleApplication3"
                   namespace="ConsoleApplication3.Models">

  <class name="ObjectBDAO">
    <id name="Id" type="Int32" generator="native"/>
    <property name="Name" />
  </class>

</hibernate-mapping> 
```

您的 LinkDAO.hbm.xml 中似乎有一些拼写错误。我的版本如下：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
                   assembly="ConsoleApplication3"
                   namespace="ConsoleApplication3.Models">

  <class name="LinkDAO" table="LinkTable" lazy="false">
    <composite-id>
      <key-many-to-one name="ObjectA" class="ObjectADAO" column="id_ObjectA"/>
      <key-many-to-one name="ObjectB" class="ObjectBDAO" column="id_ObjectB"/>
    </composite-id>
  </class>
</hibernate-mapping> 
```

测试将正确打印：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using ConsoleApplication3.Models;
using NHibernate.Cfg;
using NHibernate.Tool.hbm2ddl;

namespace ConsoleApplication3
{
    class Program
    {

        static void Main(string[] args)
        {
            var cfg = new Configuration();
            cfg.Configure();
            cfg.AddAssembly(typeof(LinkDAO).Assembly);

            new SchemaExport(cfg).Execute(script: true, export: true, justDrop: true);
            new SchemaExport(cfg).Execute(script:true, export:true, justDrop:false);

            var objAs = new ObjectADAO[] { new ObjectADAO { Name = "A1" }, new ObjectADAO { Name = "A2" } };
            var objBs = new ObjectBDAO[] { new ObjectBDAO { Name = "B1" }, new ObjectBDAO { Name = "B2" } };

            using (var _sessionFactory = cfg.BuildSessionFactory())
            {
                using (var session = _sessionFactory.OpenSession())
                {
                    using (var tran = session.BeginTransaction())
                    {
                        objAs.ToList().ForEach(x => session.Save(x));
                        objBs.ToList().ForEach(x => session.Save(x));
                        tran.Commit();
                    }

                    using (var tran = session.BeginTransaction())
                    {
                        session.Save(new LinkDAO { ObjectA = objAs[0], ObjectB = objBs[1] });
                        session.Save(new LinkDAO { ObjectA = objAs[1], ObjectB = objBs[0] });
                        tran.Commit();
                    }

                IList<LinkDAO> links = session.QueryOver<LinkDAO>().List();

                links.All(lk => { Console.WriteLine("{0} {1}", lk.ObjectA.Name, lk.ObjectB.Name); return true; });

                var ids = session.QueryOver<LinkDAO>().Select(x => x.ObjectA.Id, x => x.ObjectB.Id ).List<object[]>();

                ids.All(ary => { Console.WriteLine("{0} {1}", ary[0], ary[1]); return true; });
                }
            }
        }
    }
} 
```

在测试运行结束时，您将看到：

```
NHibernate: SELECT this_.id_ObjectA as id1_2_0_, this_.id_ObjectB as id2_2_0_ FROM LinkTable this_
A1 B2
A2 B1
NHibernate: SELECT this_.id_ObjectA as y0_, this_.id_ObjectB as y1_ FROM LinkTable this_
1 2
2 1 
```

# c# - 在 XAML 中添加事件处理程序时出现 XamlParseException

> ID：14986849
> 
> 赞同：0
> 
> 时间：2013-02-20T18:04:43.700
> 
> 标签：c#, xaml, event-handling, windows-phone-8

我在将事件处理程序添加到 Windows phone 8 的 XAML 中的 AutoCompleteBox 时遇到了麻烦。它以前工作过，但是因为我在它周围移动了一些东西，所以它不再起作用了。以下是我的 MainPage.xaml 的摘录：

```
 <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
        <Grid Margin="0,0,0,407">
            <Grid.RowDefinitions>
                <RowDefinition Height="50"/>
                <RowDefinition Height="70"/>
                <RowDefinition Height="50"/>
                <RowDefinition Height="70"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="3*"/>
            </Grid.ColumnDefinitions>

            <TextBlock Text="Start:" FontSize="35"/>
            <toolkit:AutoCompleteBox Grid.Row="1" x:Name="autoStadtStart" ItemsSource="{Binding Towns}" Text="Stadt" Tap="AutoCompleteBox_Click" LostFocus="AutoCB_Town_Reset"/>
            <toolkit:AutoCompleteBox Grid.Row="1" Grid.Column="1" x:Name="autoBusStopStart" ItemsSource="{Binding BusStops}" Margin="1,0,-1,0" Text="Haltestelle" Tap="AutoCompleteBox_Click" LostFocus="AutoCB_BusStop_Reset"/>

            <TextBlock Grid.Row="2" Text="Ziel:" FontSize="35"/>
            <toolkit:AutoCompleteBox Grid.Row="3" x:Name="autoStadtZiel" ItemsSource="{Binding Towns}" Text="Stadt" Tap="AutoCompleteBox_Click" LostFocus="AutoCB_Town_Reset"/>
            <toolkit:AutoCompleteBox Grid.Row="3" Grid.Column="1" x:Name="autoBusStopZiel" ItemsSource="{Binding BusStops}" Margin="1,0,-1,0" Text="Haltestelle" Tap="AutoCompleteBox_Click" LostFocus="AutoCB_BusStop_Reset"/>

        </Grid>
    </Grid> 
```

...这是 MainPage.xaml.cs 中的相应代码：

```
 private void AutoCompleteBox_Click(AutoCompleteBox sender, System.Windows.Input.GestureEventArgs e)
    {
        sender.Text = "";
    }

    private void AutoCB_BusStop_Reset(AutoCompleteBox sender, System.Windows.Input.GestureEventArgs e)
    {
        if (sender.Text.Equals(""))
            sender.Text = "Haltestelle";
    }

    private void AutoCB_Town_Reset(AutoCompleteBox sender, System.Windows.Input.GestureEventArgs e)
    {
        if (sender.Text.Equals(""))
            sender.Text = "Stadt";
    } 
```

当我从 AutoCompleteBox 控件中删除 Tap="..." 和 LostFocus"..." 时，不会引发异常。有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T18:31:27.450

您的方法的签名是错误的。它应该是：

```
private void AutoCompleteBox_Click(object sender, System.Windows.Input.GestureEventArgs e) 

private void AutoCB_BusStop_Reset(object sender, System.Windows.RoutedEventArgs e)

private void AutoCB_Town_Reset(object sender, System.Windows.RoutedEventArgs e) 
```

# numpy - 按标准从熊猫数据框（或numpy ndarray？）中选择

> ID：14986856
> 
> 赞同：2
> 
> 时间：2013-02-20T18:04:59.343
> 
> 标签：numpy, pandas

我发现自己经常编写这种*模式*：

```
tmp = <some operation>
result = tmp[<boolean expression>]
del tmp 
```

... where`<boolean expression>`应理解为*涉及* `tmp`. 的布尔表达式。（目前，`tmp`它始终是一个 pandas 数据框，但我想如果我使用 numpy ndarrays 会出现相同的模式——不确定。）

例如：

```
tmp = df.xs('A')['II'] - df.xs('B')['II']
result = tmp[tmp < 0]
del tmp 
```

从`del tmp`最后可以猜到，创建的*唯一*原因`tmp`是我可以在应用于它的索引表达式中使用涉及它的布尔表达式。

我很想消除对这种（否则无用的）中间体的需求，但我不知道有任何有效的方法来做到这一点^。（如果我错了，请纠正我！）

作为第二好的，我想将这种模式推向一些辅助功能。问题是找到一种体面的方式来传递`<boolean expression>`给它。我只能想到不雅的。例如：

```
def filterobj(obj, criterion):
    return obj[eval(criterion % 'obj')] 
```

这实际上有效²：

```
filterobj(df.xs('A')['II'] - df.xs('B')['II'], '%s < 0')

# Int
# 0     -1.650107
# 2     -0.718555
# 3     -1.725498
# 4     -0.306617
# Name: II 
```

...但是使用`eval`总是让我觉得所有的东西都令人讨厌...如果有其他方法，请告诉我。

* * *

¹例如，我能想到的任何涉及`filter`内置的方法都可能效率低下，因为它会通过“在 Python 中”在熊猫（或 numpy）对象上迭代来应用标准（一些 lambda 函数）......

²上面最后一个表达式中使用的定义是`df`这样的：

```
import itertools
import pandas as pd
import numpy as np
a = ('A', 'B')
i = range(5)
ix = pd.MultiIndex.from_tuples(list(itertools.product(a, i)),
                               names=('Alpha', 'Int'))
c = ('I', 'II', 'III')
df = pd.DataFrame(np.random.randn(len(idx), len(c)), index=ix, columns=c) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T19:07:24.710

这是尽可能简洁的：

```
(df.xs('A')['II'] - df.xs('B')['II']).apply(lambda x: x if (x<0) else np.nan).dropna()

Int
0     -4.488312
1     -0.666710
2     -1.995535
Name: II 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T19:32:49.540

由于 Python 的工作方式，我认为这会很困难。我只能想到只能让你部分获得成功的技巧。就像是

```
def filterobj(obj, fn):
    return obj[fn(obj)]

filterobj(df.xs('A')['II'] - df.xs('B')['II'], lambda x: x < 0) 
```

应该工作，除非我错过了什么。以这种方式使用 lambda 是延迟评估的常用技巧之一。

大声思考：可以制作一个`this`不被评估但只是作为一个表达式存在的对象，比如

```
>>> this
this
>>> this < 3
this < 3
>>> df[this < 3]
Traceback (most recent call last):
  File "<ipython-input-34-d5f1e0baecf9>", line 1, in <module>
    df[this < 3]
[...]
KeyError: u'no item named this < 3' 
```

然后要么将特殊情况处理`this`成熊猫，要么仍然具有类似的功能

```
def filterobj(obj, criterion):
    return obj[eval(str(criterion.subs({"this": "obj"})))] 
```

（有足够的工作，我们可能会失去`eval`，这只是概念证明）之后类似

```
>>> tmp = df["I"] + df["II"]
>>> tmp[tmp < 0]
Alpha  Int
A      4     -0.464487
B      3     -1.352535
       4     -1.678836
Dtype: float64
>>> filterobj(df["I"] + df["II"], this < 0)
Alpha  Int
A      4     -0.464487
B      3     -1.352535
       4     -1.678836
Dtype: float64 
```

会工作。我不确定这是否值得头疼，不过，Python 根本不适合这种风格。

# file-upload - 上传文件时出现奇怪的错误 - 我认为这与最大文件大小有关

> ID：14986857
> 
> 赞同：0
> 
> 时间：2013-02-20T18:04:59.720
> 
> 标签：file-upload, php

我在 PHP 中有一个文件上传脚本。该脚本适用于较小的文件（小于 2MB），但需要使用此脚本上传的较大文件（约 20MB）无法上传。

脚本如下，然后是更多解释：

```
<?php

if($_SERVER["REQUEST_METHOD"] == "POST")
 {
  $file = $_FILES["uploaddistance"]["name"];
  $fileTmpLoc = $_FILES["uploaddistance"]["tmp_name"];

  $pathlevel3 = 'distance/level3/';
  $pathlevel4 = 'distance/level4/';
  $pathlevel5 = 'distance/level5/';
  $pathlevel6 = 'distance/level6/';

  $level = $_POST['distancecourse'];
  $module = $_POST['distancemodule'];
  $kaboom = explode(".", $file);
   $extension = end($kaboom);

  if ($level == "level3"){
   $pathandname = $pathlevel3 . $module . '.' . $extension;
   if (file_exists($pathandname)){
    unlink($pathandname);
    $moveresult = move_uploaded_file($fileTmpLoc, $pathandname);
   if ($moveresult == true){
   echo "Workbook uploaded";
    }
    }
   else {
    $moveresult = move_uploaded_file($fileTmpLoc, $pathandname);
    if ($moveresult == true){
     echo "Workbook uploaded";
     }
    }
   }

  else if ($level == "level4"){
   $pathandname = $pathlevel4 . $module . '.' . $extension;
   if (file_exists($pathandname)){
    unlink($pathandname);
    $moveresult = move_uploaded_file($fileTmpLoc, $pathandname);
   if ($moveresult == true){
   echo "Workbook uploaded";
    }
    }
   else {
    $moveresult = move_uploaded_file($fileTmpLoc, $pathandname);
    if ($moveresult == true){
     echo "Workbook uploaded";
     }
    }
   }

   else if ($level == "level5"){
   $pathandname = $pathlevel5 . $module . '.' . $extension;
   if (file_exists($pathandname)){
    unlink($pathandname);
    $moveresult = move_uploaded_file($fileTmpLoc, $pathandname);
   if ($moveresult == true){
   echo "Workbook uploaded";
    }
    }
   else {
    $moveresult = move_uploaded_file($fileTmpLoc, $pathandname);
    if ($moveresult == true){
     echo "Workbook uploaded";
     }
    }
   }

   else if ($level == "level6"){
   $pathandname = $pathlevel6 . $module . '.' . $extension;
   if (file_exists($pathandname)){
    unlink($pathandname);
    $moveresult = move_uploaded_file($fileTmpLoc, $pathandname);
   if ($moveresult == true){
   echo "Workbook uploaded";
     }
    }
   else {
    $moveresult = move_uploaded_file($fileTmpLoc, $pathandname);
    if ($moveresult == true){
     echo "Workbook uploaded";
     }
    }
   }   

   else {
    echo "Error 1";
    echo $level;
    echo $module;
    }

  }

 else {
  echo "error 2";
 }

?> 
```

当我上传较大的文件时，会出现“错误 1”消息，表明没有任何 POST 值被传递给脚本。就像我说的，上传较小的文件时情况并非如此。

我尝试创建自定义 php.ini 文件并更改最大文件大小。我进行了以下更改：

```
upload_max_filesize = 64M
post_max_size = 64M
memory_limit = 96M 
```

php.ini 文件位于我的主目录 (public_html) 中。据我了解，目录中的任何脚本都应该自动使用它。当我在站点上运行`phpinfo()`测试时，它说加载的配置文件是 public_html/php.ini （有关详细信息，请参见[http://www.xenonacademy.org.uk/phptest.php](http://www.xenonacademy.org.uk/phptest.php)），这表明配置文件是正确，但由于某种原因，问题仍然存在。

另外，在运行这个测试时，它显示`memory_limit`只有 64M，而不是我在 php.ini 中指定的 96，但是`upload_max_filesize`and`post_max_size`是正确的。如果这些设置正确，为什么这不起作用？我需要`include()`在相关脚本中使用我的 php.ini，还是这里有更复杂的工作？

谁能解释我哪里出错了？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T18:17:12.343

您不能使用“自定义”php.ini 更改这些值，因为它通常不会被网络服务器读取。下界使用`ini_set`，因为[这些指令](http://php.net/manual/en/ini.core.php#ini.sect.file-uploads)属于[`PHP_INI_PERDIR`](http://www.php.net/manual/en/configuration.changes.modes.php).

但是，有时您可以使用`.htaccess`文件更改它们并按照文档中有关[`MAX_FILE_SIZE`](http://www.php.net/manual/en/features.file-upload.post-method.php)输入的说明进行操作：

> MAX_FILE_SIZE 隐藏字段（以字节为单位）必须在文件输入字段之前，其值是 PHP 接受的最大文件大小。应始终使用此表单元素，因为它为用户节省了等待传输大文件却发现文件太大而传输失败的麻烦。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-20T18:10:43.687

您可以使用之前使用文件上传功能来覆盖 php.ini 文件

```
 ini_set('upload_max_filesize', '10M');
 ini_set('post_max_size', '10M');
 ini_set('max_input_time', 300);
 ini_set('max_execution_time', 300); 
```

# java - 设置按钮模型使复选框不可操作

> ID：14986858
> 
> 赞同：3
> 
> 时间：2013-02-20T18:05:00.377
> 
> 标签：java, swing, model, jcheckbox

为什么我不能设置按钮模型`JCheckBox`？

下面的代码工作并绘制一个窗口，中间有一个复选框。复选框可操作：

```
public class JCheckButton_Test {
public static void main(String[] args) {

    SwingUtilities.invokeLater(new Runnable() {

        @Override
        public void run() {
            ButtonModel buttonModel = new DefaultButtonModel();

            JCheckBox checkBox = new JCheckBox();
            checkBox.setText("Check Box");
            //checkBox.setModel(buttonModel);

            JPanel controlPanel = new JPanel();
            controlPanel.add(checkBox);

            JFrame frame = new JFrame();

            frame.add(controlPanel, BorderLayout.CENTER);

            frame.pack();
            frame.setSize(640, 200);

            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            frame.setVisible(true);
        }
    });
}
} 
```

但是，如果我将模型添加到框（取消注释行）复选框将变为不可操作（单击时不会更改）。

为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T18:10:47.183

```
// this is more than just a standard button..
ButtonModel buttonModel = new JToggleButton.ToggleButtonModel(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T18:26:42.570

因为它是按钮的默认按钮模型实现，并将您的操作作为按钮做出反应。如果您仍想使用，`ButtonModel`那么您应该为其实现复选框行为。例如您可以使用以下实现

```
......
 final ButtonModel buttonModel = new DefaultButtonModel();
 buttonModel.addActionListener(new ActionListener() {
    @Override
    public void actionPerformed(ActionEvent e) {
        buttonModel.setSelected(!buttonModel.isSelected());
    }
 });
...... 
```

# c# - 在 XDocument 中设置根命名空间前缀

> ID：14986859
> 
> 赞同：2
> 
> 时间：2013-02-20T18:05:03.073
> 
> 标签：c#, xml, xsd, linq-to-xml, xelement

我目前有：

```
XNamespace xmlns = "XSDName";<br>
XNamespace xsi = @"http://www.w3.org/2001/XMLSchema-instance";<br>
XNamespace schemaloc = @"XSDName XSDName.xsd";
XDocument xdoc = new XDocument(
    new XElement("BaseReport",
    new XAttribute(xsi + "schemaLocation", schemaloc),
    new XAttribute(XNamespace.Xmlns+"ns1", xmlns),
    new XAttribute(XNamespace.Xmlns + "xsi", xsi)); 
```

这给了我：

```
BaseReport xsi:schemaLocation="XSDName XSDName .xsd" xmlns:ns1="XSDName" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
```

我怎么能`BaseReport`读懂`ns1:BaseReport`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T22:01:31.413

下面的代码将为您提供所需的输出。关键是在名称之前添加已定义的命名空间并让 .NET 找出正确的前缀。

```
XNamespace xmlns = "XSDName";
XNamespace xsi = @"http://www.w3.org/2001/XMLSchema-instance";
XNamespace schemaloc = @"XSDName XSDName.xsd";
XDocument xdoc = new XDocument(
    new XElement(xmlns + "BaseReport",
    new XAttribute(xsi + "schemaLocation", schemaloc),
    new XAttribute(XNamespace.Xmlns + "ns1", xmlns),
    new XAttribute(XNamespace.Xmlns + "xsi", xsi))); 
```

# ios - iZip 如何与 DropBox 交互？

> ID：14986863
> 
> 赞同：0
> 
> 时间：2013-02-20T18:05:17.740
> 
> 标签：ios, ipc, sandbox

iZip 应用程序如何与 DropBox 应用程序交互，因为它们都是沙盒的？

正如我所看到的，我可以从 iZip 中完全访问 DropBox，但我听说 iOS 上的进程间通信是有限的。

iZip 是否使用 DropBox 的 API，或者有不同的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T18:08:36.290

完全访问用户的保管箱不需要进程间通信。只是该应用程序使用 iOS 的 Dropbox 客户端库来获得用户的身份验证，并且该应用程序的开发人员在向 Dropbox 注册他们的应用程序时请求了完全访问权限。

# path - Sublime Text 2 - build 在我的路径上找不到东西？

> ID：14986869
> 
> 赞同：0
> 
> 时间：2013-02-20T18:05:48.087
> 
> 标签：path, sublimetext2, build-system

我有以下咖啡脚本构建文件：

```
{
    "cmd": ["coffee", "-c", "$file"]
,   "selector": "source.coffee"
} 
```

当我尝试运行它时，它给了我：

> 【错误2】系统找不到指定的文件[cmd: [u'coffee',u'-c', u'W:\mayapp\myscript.coffee']]
> 
> [目录：W:\myapp]
> 
> [路径：/usr/local/bin:C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files \Microsoft\Web Platform Installer\;C:\Program Files (x86)\Microsoft ASP.NET\ASP.NET Web Pages\v1.0\;C:\Program Files (x86)\Windows Kits\8.0\Windows Performance Toolkit \;C:\Program Files\Microsoft SQL Server\110\Tools\Binn\;c:\Program Files (x86)\Microsoft SQL Server\110\Tools\Binn\;c:\Program Files\Microsoft SQL Server\110 \DTS\Binn\;c:\Program Files (x86)\Microsoft SQL Server\110\Tools\Binn\ManagementStudio\;c:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\PrivateAssemblies\;c :\Program Files (x86)\Microsoft SQL Server\110\DTS\Binn\;C:\Program Files\TortoiseHg\;C:\Program Files (x86)\nodejs\;C:\Program Files\Mercurial\;C :\Program Files\TortoiseSVN\bin;C:\strawberry\c\bin;C:\strawberry\perl\site\bin;C:\strawberry\perl\bin;C:\Program Files (x86)\Bitvise SSH Client;C:\Chocolatey\bin;C:\Users\George\AppData\Roaming\npm \;C:\Program Files\Gallio\bin;C:\Program Files (x86)\Git\cmd;] [已完成]

在PowerShell中

```
coffee -c w:\myapp\myscript.coffee 
```

运行得很好，让我认为这`coffee`是构建系统找不到的来自 npm 的文件。但是请注意 npm 目录在我的路径上，并且`coffee.cmd`绝对在该目录中

```
W:> get-command coffee | select path

Path
----
C:\Users\George\AppData\Roaming\npm\coffee.cmd 
```

我最好的猜测是该错误是由于以 sublime 的路径变量为前缀的 linux 路径引起的，但我不知道它是从哪里来的，它不在我的 sublime 之外的路径变量中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T03:19:04.503

解决方案是使用带有扩展名的命令名称 - sublime 无法推断它。

所以：

```
{
    "cmd": ["coffee.cmd", "-c", "$file"]
,   "selector": "source.coffee"
} 
```

# c# - ContextSessionSecurityToken 在第二个用户登录时被覆盖

> ID：14986871
> 
> 赞同：10
> 
> 时间：2013-02-20T18:05:59.420
> 
> 标签：c#, .net, wif

我有一个问题发生在一个非常令人头疼的单一生产环境中。

您有两个用户，A 和 B。用户 A 登录，一切正常。用户 B 登录，用户 B 登录后，用户 A 现在拥有与用户 B 相同的安全令牌。

我们的 WIF 设置是相当标准的，我们在令牌上注入了一些自定义声明，但就令牌的创建和存储方式（由 WIF 处理）而言，其他一切看起来都是标准的。

感觉我可能会遇到一些我不熟悉的 WIF 奇怪的边缘情况

更新：A 和 B 都可以在不同的机器上，或者在同一台机器上的不同浏览器上。

请求服务时我们在哪里获得令牌

```
if (HttpContext.Current == null)
    return null;

if (HttpContext.Current.Cache == null)
    return null;

if (FederatedAuthentication.SessionAuthenticationModule == null)
    return null;

if (FederatedAuthentication.SessionAuthenticationModule.ContextSessionSecurityToken == null)
    return null;

var sessionToken = FederatedAuthentication.SessionAuthenticationModule.ContextSessionSecurityToken;
if (sessionToken.ClaimsPrincipal == null)
    throw new InvalidOperationException("The ClaimsPrincipal property of the FederatedAuthentication.SessionAuthenticationModule.ContextSessionSecurityToken object is null");
if (sessionToken.ClaimsPrincipal.Identities == null)
    throw new InvalidOperationException("The ClaimsPrincipal.Identities sub-property of the FederatedAuthentication.SessionAuthenticationModule.ContextSessionSecurityToken object is null");
if (sessionToken.ClaimsPrincipal.Identities.Count == 0)
    throw new InvalidOperationException("The ClaimsPrincipal.Identities sub-property of the FederatedAuthentication.SessionAuthenticationModule.ContextSessionSecurityToken object has no identities");
if (sessionToken.ClaimsPrincipal.Identities[0] == null)
    throw new InvalidOperationException("The first identity in the ClaimsPrincipal.Identities sub-property of the FederatedAuthentication.SessionAuthenticationModule.ContextSessionSecurityToken object is null");
if (sessionToken.ClaimsPrincipal.Identities[0].Claims == null)
    throw new InvalidOperationException("The first identity in the ClaimsPrincipal.Identities sub-property of the FederatedAuthentication.SessionAuthenticationModule.ContextSessionSecurityToken object as a null Claims property");

return TokenUtility.GetDelegatedToken(IssuedTokenTypes.UserProfile | IssuedTokenTypes.AccountPermissions, sessionToken); 
```

如果我在此处添加日志记录，我可以看到`sessionToken.ClaimsPrincipal.Identity.Name`与此时应该使用的名称不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-26T09:02:03.893

您的依赖方和 STS(WIF) 服务器是否使用相同的应用程序池托管在相同的 IIS 上？如果是，那么尝试使用不同的应用程序池作为工作进程有时会用来搞砸事情。希望这会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T17:29:31.260

我见过类似的问题。我们解决了它正在更改 IIS 和代码中的兑现。兑现导致安全性似乎混乱，但服务器只是存储生成的 html 的最后结果，使其看起来像是用户 A 登录而不是用户 B。希望这对一些人有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-05T20:53:54.850

如果您发布了一些有关任何 Web 配置设置以及 IIS 配置和 .NET Framework 版本的附加信息，将会有所帮助。对我来说，这听起来像是一个应用程序池问题，但您对系统的了解非常有限。如果应用程序池标识是自定义的，那么当然访问同一个用户，除非设置了本地系统或模拟。如果这不是问题，请检查您的授权设置，并确保关闭匿名和基本功能，或者您的应用程序可能需要的任何功能。

# html - 在其他两个固定元素之间达到固定元素的最大可能高度

> ID：14986873
> 
> 赞同：0
> 
> 时间：2013-02-20T18:06:06.573
> 
> 标签：html, css, mobile, height, fixed

好吧，伙计们，我的问题，我试图让我的

`<div id="content" style="margin:0 auto;"><!--AJAX Loaded Content--></div>`

在我之间尽可能多地走高

`<div id="header" style="position:fixed;top:0;width:100%;height:300px;"></div>`

和我的

`<div id="footer" style="position:fixed;bottom:0;width:100%;height:200px;"></div>`

我唯一的CSS规则是

`html,body{position:fixed;height:100%;width:100%;}`

我尝试`height:100%;`在我的设备上使用，`#content`但它仍然显示为`height:auto;`...此外，整个东西仍然需要在移动设备上正确显示。所以我的问题是：我应该添加/删除什么 CSS 规则以使我`#content`占据其他两个规则之间的整个空间`<div>`？

[http://jsfiddle.net/8AQQg/2/](http://jsfiddle.net/8AQQg/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T19:00:06.570

正如我在评论中所说，您不能围绕固定或绝对定位的元素流动。一种方法可能是使用绝对定位的 div，其顶部和底部尺寸与 #header 和 #footer 的高度相同：

[http://jsfiddle.net/G3k54/2](http://jsfiddle.net/G3k54/2)

```
html, body {
    position:fixed;
    height:100%;
    width:100%;
}
#header {
    position:fixed;
    top:0;
    width:100%;
    height:30px;
}
#footer {
    position:fixed;
    bottom:0;
    width:100%;
    height:20px;
}
#content {
    position: absolute;
    top: 35px;
    bottom: 25px;
    width: 100%;
} 
```

# django - django Form (ModelForm) 的所有可能错误？

> ID：14986874
> 
> 赞同：0
> 
> 时间：2013-02-20T18:06:06.757
> 
> 标签：django, django-forms, django-views

我想知道在 ModelForm 中执行 form.is_valid() 时可能出现的所有可能错误的完整列表（例如 ValueError）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T18:52:19.077

该调用`form.is_valid()`应该只引发 a`ValidationError`而没有其他异常。如果您遇到其他错误，则意味着您正在使用不遵守此约定的自定义字段。

Django 的标准字段都捕获异常，然后引发 a`ValidationError`以便在调用`is_valid()`. 换句话说，您应该查看模型正在使用的自定义字段的代码，并修复它们的验证代码以仅引发`ValidationError`.

# methods - 如何正确使用 Cocos2d 的 update/tick 方法触发事件，只触发一次？

> ID：14986880
> 
> 赞同：1
> 
> 时间：2013-02-20T18:06:22.117
> 
> 标签：methods, triggers, cocos2d-iphone, boolean

我一直遇到这个问题，我想在计划的更新或刻度方法期间触发一个事件（无效） - 但只触发一次。问题是每次调用 update/tick 时（每一帧）都会触发它。根据调用的方法，这会减慢游戏速度并偶尔崩溃（例如 addChild 已添加）。我之前使用过 BOOL（例如 eventTriggered）来尝试处理这种情况，但我想知道这是否是唯一和/或最好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T19:23:04.463

如果您使用的是 cocos2d 2.0，只需使用：

```
[self scheduleOnce:@selector(yourMethod:) delay:3.0f]; 
```

在所有其他情况下，只需取消调度已调度的选择器：

```
-(void) yourScheduledMethodThatShouldOnlyRunOnce:(ccTime)delta
{
    [self unschedule:_cmd];

    // do stuff once
} 
```

如果它是自定义方法，您需要有一些触发方法调用的条件，例如：

```
-(void) update:(ccTime)delta
{
    if (runThisNowButOnlyOnce)
    {
        runThisNowButOnlyOnce = NO;
        [self runThisNowButOnlyOnceMethod];
    }
} 
```

您只需要弄清楚何时何地将 runThisNowButOnlyOnce 设置为 YES。也不要忘记将它作为 ivar 添加到@interface。

# asp.net - 在 ASP.NET 中运行代码的绝对最早位置的执行顺序

> ID：14986886
> 
> 赞同：3
> 
> 时间：2013-02-20T18:06:41.043
> 
> 标签：asp.net, lifecycle

在 ASP.NET 中有很多地方可以执行初始化代码：

*   web.config 被处理
*   网络激活器`PreApplicationStartMethod`
*   网络激活器`PostApplicationStartMethod`
*   全球.asax `Application_Start`

这些事件的顺序是什么？此列表中是否还有其他附加项目？

**编辑：**由于提到静态与第一次调用位置相关，我将为他们分解这个

在 WebActivator 中使用的 Foo 类`PreApplicationStartMethod`

*   静态构造函数
*   静态只读字段

在 WebActivator 中使用的 Bar 类`PostApplicationStartMethod`

*   静态构造函数
*   静态只读字段

在 Global.asax 中使用的 Baz 类 `Application_Start`

*   静态构造函数
*   静态只读字段

为清楚起见，假设在上述示例中，每个示例都依赖于该位置中使用的 Foo/Bar/Baz 类，并且该类包含静态构造函数和静态只读字段。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-20T19:32:47.630

静态构造函数和静态字段初始化由运行时决定，而不是 ASP.NET。Eric Lippert 最近发布了一个很棒的由[四](http://ericlippert.com/2013/02/06/static-constructors-part-one/)[部分组成](http://ericlippert.com/2013/02/11/static-constructors-part-two/) 的[博客](http://ericlippert.com/2013/02/14/static-constructors-part-three/) [系列](http://ericlippert.com/2013/02/18/static-constructors-part-four/)，详细介绍了它们的工作原理。

至于您提到的其余项目，标有的方法[`System.Web.PreApplicationStartMethodAttribute`](http://msdn.microsoft.com/en-us/library/system.web.preapplicationstartmethodattribute.aspx)首先执行。根据该属性的 MSDN 文档，不能保证调用这些方法的顺序。

根据Phil Haack[的博客文章](http://haacked.com/archive/2010/05/16/three-hidden-extensibility-gems-in-asp-net-4.aspx)，此属性使开发人员有机会在应用程序启动期间调用另外两种方法：[`BuildProvider.RegisterBuildProvider`](http://msdn.microsoft.com/en-us/library/system.web.compilation.buildprovider.registerbuildprovider.aspx)和[`BuildManager.AddReferencedAssembly`](http://msdn.microsoft.com/en-us/library/system.web.compilation.buildmanager.addreferencedassembly.aspx). MSDN 文档`BuildManager.AddReferenceAssembly`声明此方法只能在应用程序的 Application_PreStartInit 阶段执行，这表明这`System.Web.PreApplicationStartMethodAttribute`是执行所有由 标记的方法的时间。

WebActivator 使用框架`PreApplicationStartMethodAttribute`挂钩到应用程序的启动。一旦被调用，它将搜索并执行所有标记的方法，`WebActivator.PreApplicationStartMethodAttribute`然后动态注册[一个 HttpModule](https://github.com/davidebbo/WebActivator/blob/master/WebActivator/ActivationManager.cs#L131)，该模块稍后将调用所有标记的方法`PostApplicationStartMethodAttribute`- 在 HttpApplication 类中调用 Application_Start 之后。

所以，总而言之，顺序是：

1.  Web.config 被读入内存
2.  标有 a 的方法`PreApplicationStartMethodAttribute`
3.  HttpApplication.Application_Start
4.  标有的方法`WebActivator.PostApplicationStartMethodAttribute`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T18:18:29.840

应用程序生命周期如下所示：

*   请求应用程序资源。
*   统一管道接收应用程序的第一个请求。
*   为每个请求创建响应对象。
*   将 HttpApplication 对象分配给请求
*   该请求由[HttpApplication 管道](http://msdn.microsoft.com/en-us/library/ms178472.aspx)处理。

此外，以下是请求管道中发生的事件：

![ASP.NET 应用程序生命周期](../Images/9107eac8c24e01a29030687fb829d306.png)

请参阅[ASP.NET 应用程序生命周期概述](http://msdn.microsoft.com/en-us/library/bb470252.aspx)

静态构造函数和静态只读字段（实例化内联）在您的代码第一次使用该类型时进行初始化。这可能发生在应用程序生命周期的任何时候。

**专门回答你的问题**

根据[WebActivator 项目页面](https://github.com/davidebbo/WebActivator#choosing-when-your-code-executes)，这是事件的顺序：

1.  web.config 被处理
2.  WebActivator PreApplicationStartMethod
3.  Global.asax Application_Start
4.  WebActivator PostApplicationStartMethod

就静态初始化而言，请参阅贾斯汀在他的回答中链接的[Eric Lipperts 帖子](http://ericlippert.com/2013/02/06/static-constructors-part-one/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T18:12:32.960

您当前的列表中有一些不一定与 ASP.NET 相关的内容（静态只读字段等），但[此链接](http://msdn.microsoft.com/en-us/library/ms178473%28v=vs.100%29.aspx)描述了 ASP.NET 生命周期。发生了很多事情，其中​​许多允许自定义，如果您有充分的理由，您可以在其中注入一些自己的代码。

你的问题很广泛。有没有什么你想要在这里完成的事情，可以希望在这个过程的哪一部分对你想做的事情来说是理想的？

# php - 如何通过 php 脚本在 html 文件中包含 php 文件

> ID：14986890
> 
> 赞同：-2
> 
> 时间：2013-02-20T18:06:57.467
> 
> 标签：php, html, tags, include

我之前已经发布过这个问题，但人们总是问不必要的问题。我会用一种简单的方式来解释它。

我有**3 个**文件：

1.  一个 php 文件（仅包含 html，这很重要）：我们将其称为 X 文件作为示例。
2.  一个 php 文件，其中有一些数据库查询以在屏幕上插入数据库数据：Y 文件
3.  一个 php 文件（一个会进行一些操作的脚本）：Z 文件

所以，我想用**Z**的脚本将**Y**包含到**X**中。

 **在**Z**中，我做了一个`str_replace($text, $new, file_get_contents($file));`

唯一的事情是我需要在**X**中包含 PHP 打开和关闭标签，因为其中没有 php 标签。

所以，`$new = "<?php include('Y.php'); ?>";`。如果您尝试，将不会在字符串中考虑关闭标签，但这就是我想要的。

希望这个问题现在很清楚。我再清楚不过了。:D

谢谢你的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T18:14:28.943

要包含您所做的文件

```
<?php
include(file);
?> 
```

所以在这种情况下

X 包含`<?php include('Y'); ?>`并且 Y 包含`<?php include('Z') ?>`

但是，如果您正在做我认为您正在做的事情（某种模板），您最好查看溢出缓冲区（例如 ob_start 和 ob_end_flush ）

那些可以将所有回显信息放入一个变量中以便稍后修改，内部的 php 也会运行，而不是像您的示例中使用 file_get_contents() 那样读取为文本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T18:31:57.837

这个问题非常不清楚和模糊，但我有一个猜测：

文件 X 是一些您想要替换特殊标记的 HTML。
文件 Y 从 DB 加载应该替换标记的值。
文件 Z 进行替换。

这可以这样解决（文件 Z）：

```
<?php
ob_start();
include("Y.php");
$repl = ob_get_contents();
ob_end_clean();

ob_start();
include("X.php");
$src = ob_get_contents();
ob_end_clean();

echo str_replace("THEREPLACEMENTMARKER", $repl, $src);
?> 
```**

# python - 使用 TfidfVectorizer scikit-learn 的自定义词汇表的问题

> ID：14986893
> 
> 赞同：4
> 
> 时间：2013-02-20T18:07:02.217
> 
> 标签：python, scikit-learn, tf-idf, vocabulary

我正在尝试在 scikit-learn 中使用自定义词汇表来执行一些聚类任务，但我得到了非常奇怪的结果。

该程序在不使用自定义词汇表时运行正常，并且我对集群创建感到满意。但是，我已经确定了一组我想用作自定义词汇表的单词（大约 24,000 个）。

单词存储在 SQL Server 表中。到目前为止，我已经尝试了 2 种方法，但最后我得到了相同的结果。第一个是创建列表，第二个是创建字典。创建字典的代码是这样的：

```
myvocab = {}
vocabulary = []

count = 0

for row in results:
    skillName = re.sub(r'&#?[a-z0-9]+;', ' ', row['SkillName']) 
    skillName = unicode(skillName,"utf-8")  
    vocabulary.append(skillName)  #Using a list 
    myvocab[str(skillName)] = count #Using a dictionary
    count+=1 
```

然后我在 TfidfVectorizer 中使用词汇表（列表版本或字典，它们最后都给出相同的结果），如下所示：

```
vectorizer = TfidfVectorizer(max_df=0.8, 
                         stop_words='english' ,ngram_range=(1,2) ,vocabulary=myvocab)
X = vectorizer.fit_transform(dataset2) 
```

X 的形状是 (651, 24321)，因为我有 651 个要聚类的实例和词汇表中的 24321 个单词。

如果我打印 X 的内容，这就是我得到的：

```
(14, 11462) 1.0
(20, 10218) 1.0
(34, 11462) 1.0
(40, 11462) 0.852815313278
(40, 10218) 0.52221264006
(50, 11462) 1.0
(81, 11462) 1.0
(84, 11462) 1.0
(85, 11462) 1.0
(99, 10218) 1.0
(127, 11462)    1.0
(129, 10218)    1.0
(132, 11462)    1.0
(136, 11462)    1.0
(138, 11462)    1.0
(150, 11462)    1.0
(158, 11462)    1.0
(186, 11462)    1.0
(210, 11462)    1.0

:   : 
```

可以看出，对于大多数情况，只有词汇表中的单词存在（这是错误的，因为至少有 10 个），并且在很多情况下，甚至没有找到一个单词。此外，找到的单词在实例中往往总是相同的，这是没有意义的。

如果我使用以下方式打印 feature_names：

```
feature_names = np.asarray(vectorizer.get_feature_names()) 
```

我得到：

```
['.NET' '10K' '21 CFR Part 11' ..., 'Zend Studio' 'Zendesk' 'Zenworks'] 
```

我必须说，当使用的词汇表是根据输入文档确定的词汇表时，程序运行良好，所以我强烈怀疑问题与使用自定义词汇表有关。

有没有人知道发生了什么？

（我没有使用管道，所以这个问题与之前已经修复的错误无关）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T18:12:52.313

让我感到不寻常的一件事是，当您创建您指定的矢量化器时`ngram_range=(1,2)`。这意味着您无法`'21 CFR Part 11'`使用标准标记器获得该功能。我怀疑“缺失”的特征是`n>2`. 您预先选择的词汇项目中有多少是一元词或二元词？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T21:57:26.117

我很确定这是由（可以说是令人困惑的）默认值造成的，`min_df=2`如果它没有在数据集中至少出现两次，则从词汇表中切断任何特征。您能否通过`min_df=1`在代码中明确设置来确认？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-07-07T16:18:50.353

在 Python for-in 循环中，不能使用 count+=1 让 count 在每个循环中加一。您可以使用 for i in range(n): 来替换它。因为 count 的值将保持为 1。

# mongoid - 按关联分组的 mongoid 可排序列表

> ID：14986897
> 
> 赞同：0
> 
> 时间：2013-02-20T18:07:27.473
> 
> 标签：mongoid, jquery-ui-sortable

我有两个模型评论和产品。产品有很多评论。

是否有宝石可以让我对属于产品的评论进行排序？到目前为止，我正在使用 mongoid-orderable 对评论进行排序。但它没有能力对产品的所有评论进行排序。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T23:49:46.640

Review 是嵌入式文档吗？

您可以在查询期间使用[#sort](http://mongoid.org/en/origin/docs/options.html#sorting)基于`order`集合的字段`Review`或任何其他字段对您的评论进行排序`created_at`，例如。

`my_product.reviews.order_by(:created_at)`

# c++ - 如何设置连接超时

> ID：14986898
> 
> 赞同：0
> 
> 时间：2013-02-20T18:07:29.513
> 
> 标签：c++, https

我正在查看下面的 c++ 代码，它设置了一个 http 连接并打开了一个请求（或者我相信），并希望增加连接超时值，以便我可以发送更大的文件。我知道这不是处理大文件的最佳解决方案，但我觉得它是最快的解决方案，现在时间是一个交易破坏者。

编辑：我在 .NET 框架 3.5 上运行

有人来救援吗？

```
connection = session.GetHttpConnection (server,
                                        INTERNET_FLAG_SECURE | INTERNET_FLAG_IGNORE_CERT_CN_INVALID | INTERNET_FLAG_IGNORE_CERT_DATE_INVALID,
                                        INTERNET_DEFAULT_HTTPS_PORT);
pHTTP = connection->OpenRequest (CHttpConnection::HTTP_VERB_POST,
                                 path, 
                                 NULL, 
                                 1, 
                                 NULL, 
                                 NULL, 
                                 INTERNET_FLAG_SECURE | INTERNET_FLAG_IGNORE_CERT_CN_INVALID | INTERNET_FLAG_IGNORE_CERT_DATE_INVALID); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T18:10:53.703

我自己没有对此进行测试，但似乎有一个简单的答案

在此处查看艺术 M$ 参考资料：http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa385114 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa385114(v=vs.85).aspx)

代码可能是这样的：

b = InternetSetOption(hInternetHandle, INTERNET_OPTION_RECEIVE_TIMEOUT, &dwTimeut, sizeof(DWORD));

# ios - didUpdateUserLocation 未在重新加载视图时调用

> ID：14986899
> 
> 赞同：0
> 
> 时间：2013-02-20T18:07:31.883
> 
> 标签：ios, delegates, mapkit, mkmapviewdelegate

我的 IOS 应用程序出现错误。我在google和here中搜索过，但没有找到具体的解决方案！

我有一个名为 mapView 的视图控制器，我在我的应用程序中使用了两分钟，这个视图包含一个 MKMapView 和代码。

在我的 mapView.h 中有：

```
@property (strong, nonatomic) IBOutlet MKMapView *mapSpot; 
```

在我的 mapView.m 中有：

```
- (void)viewDidLoad {
    [super viewDidLoad];

    [mapSpot setShowsUserLocation:YES];
}

- (void) mapView:(MKMapView *)mapView didUpdateUserLocation:(MKUserLocation *)userLocation{    
    MKCoordinateRegion region           = MKCoordinateRegionMakeWithDistance([userLocation coordinate], 500, 500);
    [mapSpot setRegion:region animated:YES];
} 
```

因此，在第一时间，我使用以下方法将 mapView 加载到其他 ViewController 中：

```
@property (strong, nonatomic) ViewMap *mapView;

mapView                         = [[ViewMap alloc] initWithNibName:@"ViewMap" bundle:nil];
[self.view addSubview:[mapView view]]; 
```

我卸载了该 ViewController 并在另一个 ViewController 中再次加载 MapView，但此时方法： - (void) mapView:(MKMapView *)mapView didUpdateUserLocation:(MKUserLocation *)userLocation 没有被调用。

我验证第一个 ViewController 是否已卸载，并且是这样。

当我加载第二个 ViewController 时，会有一个新的 MapView 实例，但不调用委托方法。

有人知道吗？

谢谢

==================================================== =================================

**编辑并解决：**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T20:03:57.107

上面的问题，可能是因为我正在使用模拟器来测试应用程序，以及模拟器如何不改变位置图没有得到 didUpdateUserLocation：

这是我在查看代码、组织类阅读文档并再次出现错误后可以得到的唯一解释。

现在，我使用 CLLocationManager 来获取位置，在第一次获得位置后我停止了它。

将来我会实现一个跟踪用户路径的系统，所以使用 CLLocationManager 是不可避免的。

修改后的mapView.m代码：

```
- (void)viewDidLoad {
    [super viewDidLoad];

    locationManager                     = [[CLLocationManager alloc] init];
    locationManager.delegate            = self;
    locationManager.distanceFilter      = kCLDistanceFilterNone;
    locationManager.desiredAccuracy     = kCLLocationAccuracyBest;
    [locationManager startUpdatingLocation];
}

- (void)locationManager:(CLLocationManager *)manager didUpdateLocations:(NSArray *)locations{
    CLLocation *loc = [locations lastObject];

    //  store the location to use in any moment, it needs to be checked because the first time when get the coordinate not pass infos to load places according the current position
    if (!location.latitude) {
        location                            = [loc coordinate];

//      set center the map at the current position
        MKCoordinateRegion region           = MKCoordinateRegionMakeWithDistance(location, 500, 500);
        [mapSpotView setRegion:region animated:YES];

        [[NSNotificationCenter defaultCenter] postNotificationName:@"loadPlaces" object:nil];

        [locationManager stopUpdatingLocation];
    }
} 
```

如果有人有更好的解决方案，请在此处发布！

而已！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T18:12:47.393

问题在于您添加视图的方式，在这一行

```
[self.view addSubview:[mapView view]]; 
```

如果您只添加视图，则不会执行控制器代码，而不是您必须呈现`mapView`，例如：

```
[self presentViewController:mapView animated:YES completion:nil]; 
```

# amazon-web-services - Amazon SWF：至少必须运行一名工作人员，为什么？

> ID：14986905
> 
> 赞同：6
> 
> 时间：2013-02-20T18:07:58.533
> 
> 标签：amazon-web-services, amazon-swf

我刚刚开始使用 AWS Ruby SDK 来管理简单的工作流程。我立即注意到的一种行为是，在提交新的工作流执行之前，必须至少运行一个相关的工作人员和一个相关的决策者。

如果我在启动工作程序和决策程序之前提交了一个新的工作流执行，那么即使我仍然在超时限制内，这些任务也永远不会被执行。为什么是这样？根据对 HTTP 长轮询工作原理的描述，我希望任一应用程序在调用 poll() 时都能接收相关任务。

我在作业失败后遇到其他死锁情况（例如，由于工人或决策者错误，或由于被终止）。有时，重新运行甚至只是启动一个全新的工作流执行将导致工作流执行死锁。初始决策任务显示在 AWS 控制台的工作流执行历史记录中，但决策者从未收到它们。诚然，我无法确认/将此问题简化为测试用例，但我怀疑它与上述问题有关。这种情况大约有 10% 到 20% 的时间发生；其余时间，一切正常。

需要提及的其他一些事情：我将单个任务列表用于按顺序运行的两个单独的活动任务。工作者和决策者都在轮询同一个任务列表。

这是我的工人：

```
 require 'yaml'
require 'aws'

config_file_path = File.join(File.dirname(File.expand_path(__FILE__)), 'config.yaml')
config = YAML::load_file(config_file_path)

swf = AWS::SimpleWorkflow.new(config)

domain = swf.domains['test-domain']

puts("waiting for an activity")
domain.activity_tasks.poll('hello-tasklist') do |activity_task|

  puts activity_task.activity_type.name
  activity_task.complete! :result => name

  puts("waiting for an activity")
end 

```

**编辑**

AWS 论坛上的另一位用户评论道：

> 我认为原因在于 SWF 没有立即识别长轮询连接关闭。当你杀死一个工人时，它的连接一段时间可以被服务认为是打开的。所以它仍然可以向它分派任务。对你来说，新工人似乎永远不会得到它。验证它的方法是检查工作流程历史记录。您将看到活动任务启动事件，其中包含已死工作人员的主机和 pid 的识别字段。最终，此类任务将超时，并且可以由决策者重试。
> 
> 请注意，这种情况在频繁终止连接的单元测试中很常见，对于任何生产应用程序来说都不是问题。常见的解决方法是为每个单元测试使用不同的任务列表。

这似乎是一个相当合理的解释。我将尝试确认这一点。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-23T00:17:04.830

您提出了两个问题：一个是关于没有活动决策者的执行开始，另一个是关于参与者在任务中间崩溃的问题。让我按顺序对他们说。

我根据您的观察进行了一项实验，实际上，当新的工作流执行开始并且没有决策者轮询 SWF 时，仍然认为新的决策任务开始了。以下是我来自 AWS 控制台的事件日志。注意会发生什么：

```
Fri Feb 22 22:15:38 GMT+000 2013 1 WorkflowExecutionStarted
Fri Feb 22 22:15:38 GMT+000 2013 2 DecisionTaskScheduled
Fri Feb 22 22:15:38 GMT+000 2013 3 DecisionTaskStarted
Fri Feb 22 22:20:39 GMT+000 2013 4 DecisionTaskTimedOut
Fri Feb 22 22:20:39 GMT+000 2013 5 DecisionTaskScheduled
Fri Feb 22 22:22:26 GMT+000 2013 6 DecisionTaskStarted
Fri Feb 22 22:22:27 GMT+000 2013 7 DecisionTaskCompleted
Fri Feb 22 22:22:27 GMT+000 2013 8 ActivityTaskScheduled
Fri Feb 22 22:22:29 GMT+000 2013 9 ActivityTaskStarted
Fri Feb 22 22:22:30 GMT+000 2013 10 ActivityTaskCompleted
... 
```

第一个决策任务被立即安排（这是意料之中的）并立即开始（即据称已分派给决策者，即使没有决策者在运行）。同时我启动了一个决策程序，但工作流直到原始决策任务超时，5 分钟后才移动。我想不出这将是所需行为的场景。对此有两种可能的防御措施：在开始新的执行之前让决策者运行，或者在决策任务上设置可接受的低超时（这些任务无论如何都应该立即执行）。

我熟悉的演员（决策者或工人）崩溃的问题。先做一个简短的背景说明：

服务分三个阶段记录活动和决策任务：

*   预定 = 准备好被演员接走。
*   已开始 = 已被演员选中。
*   完成/失败或超时=参与者在截止日期内失败或未完成任务。

一旦演员拿起一个任务并崩溃，它显然不会向服务报告任何内容（**除非**它能够恢复并且仍然记得*任务令牌*调度的任务——但大多数崩溃的演员不会那么聪明）。下次调度决策任务时，将在最近调度的任务超时时，这就是为什么所有参与者似乎在任务超时期间被阻塞的原因。这实际上是期望的行为：只要工作人员仍在其截止日期内工作，服务就无法知道任务是否正在处理。有一个简单的方法可以解决这个问题：给你的actor设置一个 try-catch 块，并在发生意外崩溃时使任务失败。我不鼓励为每个集成测试使用单独的任务列表。相反，我建议让该`teardown()`块中的任务失败。SWF 允许`reason`为失败的任务指定 a，这是记录失败并稍后通过 AWS 控制台查看它们的一种方式。

# hive - 使用 Thrift php 通过 Web 浏览器访问 Hive

> ID：14986906
> 
> 赞同：1
> 
> 时间：2013-02-20T18:07:59.353
> 
> 标签：hive, thrift

我已经在我的 ubuntu 中安装了配置单元。还安装了 PHP5 和 apache2 服务器。使用 hive --service hiveserver 启动节俭服务器。在命令行界面（CLI）中从 php 文件中查询配置单元表给了我预期的结果。但从网络浏览器（`http://localhost:10000/`）我无法调用配置单元。尝试谷歌搜索问题找不到它。请帮我解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T16:20:37.810

Hive thrift server 只是为 hive 查询提供 thrift 服务，而不是 web 服务。

我认为您需要的是 HWI（蜂巢网络界面）。我推荐[这个项目](https://github.com/anjuke/hwi/)。我们在生产环境中使用它。

# javascript - 如何在 Eclipse 中附加 JSdoc，以便我可以为个人库自动完成

> ID：14986907
> 
> 赞同：7
> 
> 时间：2013-02-20T18:08:01.640
> 
> 标签：javascript, eclipse, jsdoc

我目前正在开发一个 JavaScript 库。我把它组织成很多文件，我使用模块方法来定义每个“模块”。

```
var ns = generateNamespace("me.mycompany.mypackage.MyFile");

(function (ns, undefined) {
    // some module 
}(ns)); 
```

这些模块是使用命名空间函数动态命名的，这意味着自动完成几乎是不可能的（除非 Eclipse 可以运行我的代码并找出命名空间，Visual Studio 可以！）。

因此，我打算为我的项目生成 JSdoc，希望如果我将它包含到 Eclipse（以某种方式）中，Eclipse 可以使用它来为我提供内容帮助。

首先，我不知道这是否可能......但是我认为这是我所看到的，这可能是[它](http://wiki.eclipse.org/index.php/ATF/JSDT#Libraries)的工作原理？但是，我试图遵循这一点并努力使某些东西起作用，我的意思是它不起作用。来自链接的有趣信息：

> “JSDT 库是具有原型对象/类定义和 JSDoc 的 JavaScript 源文件的集合。推理引擎然后对这些库进行建模……使它们可用于项目中的每个 JavaScript 文件……非标准和未来运行时的绑定类似易于创建...将...库添加到他们的项目并获得内容完成和悬停帮助“

我知道如何编写 JSdoc 注释，也知道如何使用各种工具之一生成 JSdoc。

因此，我需要的是有关如何在 Eclipse 中包含 JSdoc（可能作为库）的说明，以便它可以自动完成 JSdoc 中的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T19:31:38.317

上一个答案：

```
You can also run jsdoc_toolkit from within eclipse by setting up Run -
> External Tools -> Open External Tools Dialog...

Location
C:\Program Files\Java\jre1.5.0_12\bin\java.exe

Working Directory
C:\DirectoryToWhereJsDocToolkitIsLocated\jsdoc_toolkit

Arguments
-jar app/js.jar app/run.js -r=4 -t=templates/htm "-d=C:
\PathToWhereDocIsSaved" "C:\PathToWebsiteToDocument"

For more about the arguments check the jsdoc_toolkit documentation.

Have fun
Simon 
```

取自[此](https://groups.google.com/forum/?fromgroups=#!topic/jsdoc-users/ofsuk44Cufk)Google Groups 线程。

更新答案：

[Eclipse JavaScript 编辑器：js 文件的内容辅助，自动完成](https://stackoverflow.com/questions/1006934/eclipse-javascript-editor-content-assist-for-js-files)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-16T08:10:10.263

免责声明，我是[tern.java](https://github.com/angelozerr/tern.java/)的作者。

我建议你[安装 tern.java](https://github.com/angelozerr/tern.java/wiki/Installation-Update-Site)。它提供了[JSDoc 支持](https://github.com/angelozerr/tern.java/wiki/Tern-&-JSDoc-support)。选择此支持后，您将受益

*   完成：

![JSDoc 完成](../Images/100c61ca848e602ad2335faf5bb279d1.png)

*   很快就会得到验证：

![JSDoc 验证](../Images/fd474685cf2dbfe12a1f3c9e0ed18b73.png)

这种支持并不完美，但它开始发挥作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-03T09:46:17.833

我不是自己使用它，所以我不确定它是否有效，但是 jsdoc3 存在一个 grunt-plugin。Eclipse 支持 Grunt。所以也许它有帮助。

[npm 中的 Grunt 插件](https://www.npmjs.com/package/grunt-jsdoc)

# ios - 在 MonoTouch 中重命名命名空间

> ID：14986908
> 
> 赞同：2
> 
> 时间：2013-02-20T18:08:01.240
> 
> 标签：ios, xamarin.ios, monodevelop, xamarin, xamarin-studio

在 MonoDevelop 的 MonoTouch-Solution 中重命名命名空间后，我无法构建应用程序，因为未找到 UI 组件的所有引用出口。

我已经在 Interface Builder 中重新打开了我的 XIB，更改了一些内容并保存了它，但代码仍然无法运行。

我猜，IB 元素并不关心 MonoTouch 中定义的命名空间。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T19:50:06.287

仔细检查所有部分类（*.designer.cs 文件）上的命名空间。

如果命名空间不同，C# 将无法使用原始类的任何出口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-08T17:58:12.367

您必须更改 .CS 控制器和 Designer.cs 文件中的名称空间。

此外转到项目 - > 属性和应用程序选项卡中写入相同的命名空间在默认和组合名称保存以避免创建新类时命名空间错误

# javascript - 根据另一个字段填充输入？

> ID：14986911
> 
> 赞同：2
> 
> 时间：2013-02-20T18:08:17.307
> 
> 标签：javascript, jquery, html

我有 1 个字段将用于用户名，另一个将用于用户 URL

因此，如果用户`john smith`输入名称输入，我想自动填充 URL 输入，`john-smith`因为 url 最终将是`/personal-trainer-directory/john-smith`

如何自动执行此操作，以便用户不必填写 url 字段？

这是一个示例，但有一些 ExpressionEngine 代码，这就是为什么有大括号的原因，但我认为这与代码而不是 CMS 更相关，所以在这里发布。

这是我目前拥有的：

```
<div class="formsection clearfix">
<label for="title">Name</label>
<span class="directions">The name you want to be displayed in your listing.</span>
<input type="text" name="title" id="title" value="{title}" size="50" maxlength="100">
</div>

<div class="formsection clearfix">
<label for="url_title">URL Title</label>
<span class="directions">Put a dash between first and last name. example: "john-smith"</span>
<input type="text" name="url_title" id="url_title" value="{url_title}" maxlength="75" size="50">
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T18:15:00.723

```
$("#title").change( function () {
    $('#url_title').val('/personal-trainer-directory/'+$(this).val().toLowerCase().replace(/ +/g, '-').trim());
}); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/rccb8/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T18:12:48.290

你可以做这样的事情

```
$(function(){
    $("#title").blur(function(){
        $("#url_title").val('/personal-trainer-directory/' + $(this).val());
    });
}); 
```

[jsFiddle](http://jsfiddle.net/pmatseykanets/kvfJA/)

或者如果您希望在键入时填充它

```
$(function(){
    $("#title").keyup(function(){
        $("#url_title").val('/personal-trainer-directory/' + $(this).val());
    }); 
```

    }); [jsFiddle](http://jsfiddle.net/pmatseykanets/6Tzvq/)

# c# - 我可以在多大程度上信任 ASP.NET 请求验证与网页/WebMatrix 与 XSS？

> ID：14986918
> 
> 赞同：4
> 
> 时间：2013-02-20T18:08:40.977
> 
> 标签：c#, security, xss, webmatrix, asp.net-webpages

我已经阅读（并且正在接受）这样一个事实，即没有任何解决方案可以 100% 有效地抵御 XSS 攻击。似乎我们所能期望的最好的结果就是阻止“大多数” XSS 攻击途径，并且可能有良好的恢复和/或法律计划。最近，我一直在努力寻找一个好的参考框架，以确定什么应该和不应该是可接受的风险。

阅读完 Mike Brind 的这篇文章后（一篇非常好的文章，顺便说一句）：

[http://www.mikesdotnetting.com/Article/159/WebMatrix-Protecting-Your-Web-Pages-Site](http://www.mikesdotnetting.com/Article/159/WebMatrix-Protecting-Your-Web-Pages-Site)

我可以看到，如果您需要未经验证的用户输入，使用 html sanitizer 也可以非常有效地降低 XSS 攻击的途径。

但是，就我而言，情况恰恰相反。我有一个（非常有限的）带有 Web 界面的 CMS。用户输入（经过 URL 编码后）被保存到 JSON 文件中，然后在可查看页面上提取（解码）该文件。我在这里阻止 XSS 攻击的主要方法是，您必须成为少数注册成员之一才能完全更改内容。通过记录注册用户、IP 地址和时间戳，我觉得这种威胁基本上得到了缓解，但是，我想使用一个 try/catch 语句来捕获由 asp.net 的默认请求验证器生成的 YSOD 以及之前的提到的方法。

我的问题是：我可以信任这个验证器多少？我知道它会检测标签（从逻辑上讲，这个部分 CMS 没有设置为接受任何标签，所以如果检测到任何标签，我可以接受抛出错误）。但是这个天生的验证器还能检测到什么（如果有的话）？

我知道 XSS 可以在没有触及尖括号（或完整标签，就此而言）的情况下实现，因为 html 源可以在简单地添加一个额外的之后从客户端计算机保存、编辑和随后运行“onload='BS XSS ATTACK'”到一些随机标签。

只是好奇如果一个人确实想将它用作其反 XSS 计划的一部分（显然使用 try/catch，因此用户看不到 YSOD），该验证器的可信度有多少。这个验证器是否相当不错但并不完美，或者这只是一个“最好的猜测”，即任何有足够知识了解 XSS 的人都会有足够的知识来证明这个验证并不重要？

- - - - - - - - - - - -编辑 - - - - - - - - - - - - - -----

在这个网站...： http: [//msdn.microsoft.com/en-us/library/hh882339 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/hh882339(v=vs.100).aspx)

...我为网页找到了这个示例。

```
var userComment = Request.Form["userInput"]; // Validated, throws error if input includes markup

Request.Unvalidated("userInput"); // Validation bypassed
Request.Unvalidated().Form["userInput"]; // Validation bypassed

Request.QueryString["userPreference"]; // Validated
Request.Unvalidated().QueryString["userPreference"]; // Validation bypassed; 
```

根据评论：“//验证，如果输入包含标记则抛出错误”我认为如果字符串包含任何被认为是标记的内容，验证器就会抛出错误。现在问题（对我来说）真的变成了：什么是标记？通过测试，我发现单个尖括号不会引发错误，但是如果有任何东西（我到目前为止测试过）出现在尖括号之后，例如

```
"<l" 
```

似乎出错了。但是，我确信它会做更多的检查，而且我很想看看在请求验证器的眼中什么可以作为标记，什么不可以作为标记。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T15:20:15.087

我相信 ASP.NET 请求验证是相当值得信赖的，但您不应该单独依赖它。对于某些项目，我将其启用以提供额外的安全层。一般来说，最好使用经过广泛测试/使用的解决方案，而不是自己制作一个。如果“YSOD”（或自定义错误页面）成为我的客户的问题，我通常只是禁用页面的 .NET 请求验证功能。

一旦这样做，我会仔细确保我的输入是经过消毒的，但更重要的是我的*输出是经过编码的*。因此，在我将用户输入的（或 Web 服务等——来自第三方的任何内容）内容推送给用户的任何地方，它都会被包装在 Server.HtmlEncode() 中。这种方法多年来一直运作良好。

您提供的 Microsoft 文档的链接非常好。要回答关于什么被认为是标记（或什么*应该被认为是标记*）的问题，请戴上你的黑客帽子并查看 OWASP XSS Evasion Cheat Sheet。

[https://www.owasp.org/index.php/XSS_Filter_Evasion_Cheat_Sheet#HTML_entities](https://www.owasp.org/index.php/XSS_Filter_Evasion_Cheat_Sheet#HTML_entities)

# magento - Mysql4 上的 Magento Collection = 没有这样的文件或目录

> ID：14986919
> 
> 赞同：0
> 
> 时间：2013-02-20T18:08:58.207
> 
> 标签：magento

在下载的模块中有一个特定的调用`Mage::getModel('module/statistic_collection')`，这给了我`failed to open stream: No such file or directory`路径错误，`Namespace/Module/Model/Statistic/Collection.php`但它存在于`Namespace/Module/Model/Mysql4/Statistic/Collection.php`.
那么我怎样才能告诉 magento 他们需要添加`Mysql4`文件夹呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T19:25:02.193

你有两个选择：

```
Mage::getResourceModel('module/statistics_collection') 
```

或者

```
Mage::getModel('module/statistics')->getCollection() 
```

# .net - .Net 在负载测试中使用单元测试

> ID：14986920
> 
> 赞同：0
> 
> 时间：2013-02-20T18:09:01.240
> 
> 标签：.net, unit-testing, load-testing

我有一个在负载测试中使用单元测试的紧迫问题。

运行每个测试方法后如何保存单元测试类的全局变量？例如，我在单元测试类中有一个全局变量，TestMethod1修改了这个变量，我希望TestMethod2在运行后（由负载测试的虚拟用户）调用时可以使用这个变量（及其修改后的值）测试方法 1。

我的负载测试的设置：测试混合模型基于顺序，负载模式是恒定的（5 个用户），运行设置：使用指定的迭代（迭代 = 5 * 方法数）。

我使用 VS2012 终极版。

你有什么想法吗？

提前致谢！

龙边

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T19:34:21.193

使用全局变量让单元测试相互交互并不是一个好习惯。每个单元测试都应该以原子方式运行，并测试特定的行为。

如果您需要共享某种设置行为，我会为此使用 SetUp 属性。

```
[TestInitialize]
public void Setup()
{
    // initialize whatever common functionality for your tests
} 
```

您不想让测试用例相互依赖，因为根据测试运行器设置（例如并行），测试的顺序可能会有所不同。

如果您有非常测试特定的设置行为，我会为该特定测试创建一个专用的测试类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T19:42:13.387

您可以考虑使用 BDD 工具，例如 Specflow 或 Storevil。这些可以设置测试“场景”，您可以使用它来协调现有的单元测试，同时仍然让它们可以单独运行。

对于上下文共享，这两个工具都支持整个场景的数据存储，测试可以将数据推送到或从中获取数据。这将需要自己修改测试，它们将不再是真正的单元测试，但听起来单元测试并不是你的目标。

# javascript - 获取对象属性值

> ID：14986922
> 
> 赞同：0
> 
> 时间：2013-02-20T18:09:06.863
> 
> 标签：javascript, jquery, html, arrays, object

我有一个对象，其中包含一组对象，我需要从中获取它们的属性值。

作为一个例子，这是我需要得到的：

```
Stronghold.bins.models[0].attributes.entity.title 
```

返回“要塞标题 1”

```
function grabItemName(){
   var itemName=$(Stronghold.bins).each(function(){
      return this.models[0].attributes.entity.title == title;
      console.log(itemName);
   })
}; 
```

（如果我有更好的方法来问这个问题，请告诉我）

如果问得不好，我深表歉意！

当前的问题是它不理解数组值 '[0]' 并且无法读取它，因为它是未定义的。我需要做什么来获取数组中所有项目的“标题”值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T18:16:50.300

> 我需要做什么来获取数组中所有项目的“标题”值？

这就是[`.map` *^([docs])*](http://api.jquery.com/jQuery.map/)的用途。它允许您将数组中的每个值映射到另一个值。

在下文中，我假设您要迭代 each `Stronghold.bins.models`，因为提供的信息对迭代`Stronghold.bins`没有意义：

```
var titles = $.map(Stronghold.bins.models, function(obj) {
    return obj.attributes.entity.title;
});
// `titles` is now an array containing `.attributes.entity.title;` of
// each object. 
```

> 当前的问题是它不理解数组值 '[0]' 并且无法读取它，因为它是未定义的。

好吧，这不会再发生了；）在您的示例中，您迭代了`Stronghold.bins`对象的属性。这些属性之一就是`models`它本身（！），我怀疑任何其他属性值都具有`models`属性。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-20T18:13:10.957

尝试使用每个函数的其他版本：

```
$.each(Stronghold.bins, function () {

}); 
```

您正在使用的版本是用于循环浏览页面上的元素，例如`$('body div p').each(function() {})`，这不是您在这种情况下想要的：您想要循环`Stronghold.bins`.

# ios - 无效的强制转换类型 nsmutablearray 到类型 skproduct - ios

> ID：14986929
> 
> 赞同：0
> 
> 时间：2013-02-20T18:09:23.563
> 
> 标签：ios, objective-c, in-app-purchase

我收到“invalid cast type nsmutablearray to type skproduct”错误..当我尝试将产品添加到我的 uitableview 时..这是我正在使用的代码...

在里面

```
SKProduct *product1 = [[InAppPurchaseManager sharedInAppManager] getLevelUpgradeProduct];
        SKProduct *product2 = [[InAppPurchaseManager sharedInAppManager] getPlayerUpgradeOne];
        SKProduct *product3 = [[InAppPurchaseManager sharedInAppManager] getPlayerUpgradeTwo];

        _products = [[[NSMutableArray alloc] initWithObjects:product1, product2, product3, nil] autorelease];

- (UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
......
        SKProduct *product = (SKProduct*) _products[indexPath.row]; // error 
        cell.textLabel.text = product.localizedTitle;
        [_priceFormatter setLocale:product.priceLocale];
        cell.detailTextLabel.text = [_priceFormatter stringFromNumber:product.price];

......
} 
```

我的错误是什么？谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T18:19:47.513

你有没有尝试过

```
SKProduct *product = (SKProduct *)[_products objectAtIndex:indexPath.row]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T18:26:21.843

虽然我自己无法复制它，但我可以推断编译器认为您正在尝试强制转换`_products`，而不是您从`_products`. 将整个内容包装在一组括号中，以便编译器知道将表达式作为一个整体进行评估。

```
SKProduct *product = (SKProduct*)(_products[indexPath.row]); 
```

# excel - Excel 2003 导入宏在 Excel 2010 中不起作用

> ID：14986930
> 
> 赞同：2
> 
> 时间：2013-02-20T18:09:26.590
> 
> 标签：excel, excel-2010, excel-2003, vba

我有一个宏，用于从目录中的许多 excel 工作簿中导入数据。它在 Excel 2003 中运行良好，但由于我最近升级到 Excel 2010，宏似乎不起作用。激活后，宏不会出错或产生任何东西。我已经更改了所有信任中心设置和我拥有的其他宏（不导入数据宏）工作得很好。我在编写 VBA 方面不是很熟练，也看不出问题可能出在哪里。似乎excel试图运行宏并跳过它曾经做过的所有事情并完成。任何帮助是极大的赞赏。谢谢

```
Sub GDCHDUMP()
Dim lCount As Long
Dim wbResults As Workbook
Dim twbk As Workbook

Application.ScreenUpdating = False
Application.DisplayAlerts = False
Application.EnableEvents = False

On Error Resume Next
 Set twbk = ThisWorkbook
  With Application.FileSearch
   .NewSearch
   'Change path to suit
   .LookIn = "R:\ServCoord\GCM\Data Operations\Quality\GDCHDump"
   .filename = "*.xls*"
    If .Execute > 0 Then 'Workbooks in folder
      For lCount = 1 To .FoundFiles.Count 'Loop through all
       'Open Workbook x and Set a Workbook variable to it
        Set wbResults = Workbooks.Open(filename:=.FoundFiles(lCount), UpdateLinks:=0)
        Set ws = wbResults.Sheets(1)
        ws.Range("B2").Copy
        twbk.Sheets(1).Cells(lCount, 1).PasteSpecial xlPasteValues
        wbResults.Close SaveChanges:=False
        'There was a lot more lines like the 2 above that I removed for clarity
      Next lCount
    End If
 End With
On Error GoTo 0
Application.ScreenUpdating = True
Application.DisplayAlerts = True
Application.EnableEvents = True
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T18:30:25.550

`On Error Resume Next`除非需要，否则应该真正避免。这就像告诉 Excel `Shut Up`. 主要问题是xl2007+`Application.FileSearch`不[支持](http://msdn.microsoft.com/en-us/library/office/jj229903.aspx)

你可以`Application.GetOpenFilename`改用。

请参阅此示例。（**未经测试**）

```
Option Explicit

Sub GDCHDUMP()
    Dim lCount As Long
    Dim wbResults As Workbook, twbk As Workbook
    Dim ws As Worksheet
    Dim strPath As String
    Dim Ret
    Dim i As Long

    strPath = "R:\ServCoord\GCM\Data Operations\Quality\GDCHDump"

    Application.ScreenUpdating = False
    Application.DisplayAlerts = False
    Application.EnableEvents = False

    Set twbk = ThisWorkbook

    ChDir strPath
    Ret = Application.GetOpenFilename("Excel Files (*.xls*), *.xls*", , , , True)

    If TypeName(Ret) = "Boolean" Then Exit Sub

    For i = LBound(Ret) To UBound(Ret)
        Set wbResults = Workbooks.Open(Filename:=Ret(i), UpdateLinks:=0)
        Set ws = wbResults.Sheets(1)
         ws.Range("B2").Copy
         'twbk.Sheets(1).Cells(lCount, 1).PasteSpecial xlPasteValues
         wbResults.Close SaveChanges:=False
    Next i

    Application.ScreenUpdating = True
    Application.DisplayAlerts = True
    Application.EnableEvents = True
End Sub 
```

# forms - Symfony 2表单与父级相关的关联实体无法保存

> ID：14986933
> 
> 赞同：1
> 
> 时间：2013-02-20T18:09:39.593
> 
> 标签：forms, symfony, doctrine-orm, associations

我正在尝试按照本教程将连接表作为表单实体建立多对多关系：http: [//www.prowebdev.us/2012/07/symfnoy2-many-to-many-relation-with.html](http://www.prowebdev.us/2012/07/symfnoy2-many-to-many-relation-with.html)

就我而言，我有以下课程：

*   问题/用户/已分配用户

AssignedUser 实体是问题和用户之间的连接表。

以我的形式：

```
 $builder->add('assigned', 'entity', array(
            'required'  => false,
            'class'     => 'MyBundle:User',
            'expanded' => true,
            'multiple' => true
        )); 
```

我的问题课。省略了一些部分，如命名空间。

(...)

```
 /**
         * 
         * @ORM\OneToMany(targetEntity="(...)AssignedUser", mappedBy="issue",cascade={"persist", "remove"})
         *
         */
        protected $assignedUsers;

       /**
        * needed for the form to renders the users for select.
        */
        protected $assigned;

        public function getAssigned()
        {
            $assigned = new ArrayCollection();

            foreach($this->assignedUsers as $value)
            {
                $assigned[] = $value->getUser();
            }

            return $assigned;
        }

        // Important
        public function setAssigned($users)
        {
            foreach($users as $user)
            {
                $au = new IssueAssignedUser();

                $au->setIssue($this);
                $au->setUser($user);

                $this->addAssignedUser($au);
            }

        }

        /**
         * construct
         */
        public function __construct(){      
            $this->assignedUsers    = new ArrayCollection();      

            $this->assigned = new ArrayCollection();
}

 public function addAssignedUser($assignedUser)
    {
        $this->assignedUsers[] = $assignedUser;

        return $this;
    } 
```

问题在于 setAssigned 方法。

```
 $au->setIssue($this); 
```

我的问题分配用户：

```
/**
 * IssueAssignedUser
 *
 * @ORM\Table(name="sup_issue_assigned_user")
 * @ORM\Entity(repositoryClass="Ueb\Support\Bundle\IssueBundle\Entity\Repository\IssueAssignedUserRepository")
 */
class IssueAssignedUser
{

    /**
     * @var integer
     *
     * @ORM\ManyToOne(targetEntity="...\Issue",inversedBy="assignedUsers",cascade={"persist"})
     * @ORM\JoinColumn(name="issue_id", referencedColumnName="id",nullable=false,onDelete="CASCADE")
     * @ORM\Id
     */
    private $issue;

    /**
     * @var \Ueb\Accounts\Bundle\UserBundle\Entity\User
     * 
     * @ORM\ManyToOne(targetEntity="...\User")
     * @ORM\JoinColumn(name="user_id", referencedColumnName="id",nullable=false,onDelete="CASCADE")
     * @ORM\Id
     */
    private $user;

    /**
     * @var \DateTime
     * 
     * @ORM\Column(name="created_at", type="datetime")
     * @Gedmo\Timestampable(on="create")
     */
    private $createdAt;

    /**
     * @var \DateTime
     *
     * @ORM\Column(name="updated_at", type="datetime")
     * @Gedmo\Timestampable
     */
    private $updatedAt; 
```

我得到错误：

> 实体类型 ... IssueAssignedUser 通过外部实体问题具有身份，但是该实体本身没有身份。您必须在相关实体上调用 EntityManager#persist() 并确保在尝试持久化之前生成了标识符

是不是假设学说首先坚持问题实体，只有他们试图坚持相关实体？

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T19:35:40.473

在调用问题之前，您必须将问题持久化到数据库`setAssignedUsers()`中。

```
$em->persist($issue); 
```

# java - Android（简单动画制作）

> ID：14986934
> 
> 赞同：-2
> 
> 时间：2013-02-20T18:09:41.537
> 
> 标签：java, android, eclipse

我正在尝试使用 java 和 eclipse 创建一个基于卡片的游戏作为 android 应用程序，我设计了卡片（正面和背面），但我似乎不知道是否应该使用第三个来制作卡片动画派对应用程序或有没有办法使用 Eclipse 为它们设置动画？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T18:14:17.647

如果你真的只是在做简单的动画，那么使用标准 Android 很容易做到。您基本上为动画中的每个图形创建一个 png，然后以与引用任何其他可绘制对象相同的方式引用它（另外，您告诉系统开始动画）。

最重要的是，我会使用内置的动画类，它们使用简单，并且比集成（并依赖于）第 3 方库要好得多。

这是一个关于如何做到这一点的好例子：[http ://www.javacodegeeks.com/2011/01/android-animations-quick-guide.html](http://www.javacodegeeks.com/2011/01/android-animations-quick-guide.html)

# excel - 在 VBA 单元格中使用通配符。替换

> ID：14986935
> 
> 赞同：4
> 
> 时间：2013-02-20T18:09:42.307
> 
> 标签：excel, ip-address

我希望在 Excel 中编写一个函数，将前导零添加到构成 IP 地址的八位字节中：例如，在 172.19.1.17 中，我想更改 0.19。到 .019., .1\. 到 .001.，最后的 .17 到 0.017。

Te Cells.Teplace 功能似乎不接受？作为通配符。另外，有没有一种方法可以表示“字符串结尾”，这样我就可以将前导零添加到最后一个八位字节，在上面的示例中为 0.17。

谢谢伊恩

```
Cells.Replace What:=".1?.", Replacement:=".01?.", LookAt:=xlPart, _
    SearchOrder:=xlByRows, MatchCase:=False, SearchFormat:=False, _
    ReplaceFormat:=False 
```

这确实找到了“10”。“11。” “12。” 等，但将它们全部替换为“.01？”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T19:02:40.523

作为替代方案，您可以使用此公式将零添加到 IP 部分（看起来很糟糕，但将所有部分分开处理，最后将它们混合起来）：

```
=REPT(0,4-FIND(".",A1))&LEFT(A1,FIND(".",A1)-1)&"."&
REPT(0,4-FIND("@",SUBSTITUTE(A1,".","@",2))+FIND(".",A1))&MID(A1,FIND(".",A1)+1,FIND("@",SUBSTITUTE(A1,".","@",2))-FIND(".",A1)-1)&"."&
REPT(0,4-FIND("@",SUBSTITUTE(A1,".","@",3))+FIND("@",SUBSTITUTE(A1,".","@",2)))&MID(A1,FIND("@",SUBSTITUTE(A1,".","@",2))+1,FIND("@",SUBSTITUTE(A1,".","@",3))-FIND("@",SUBSTITUTE(A1,".","@",2))-1)&"."&
REPT(0,3-LEN(A1)+FIND("@",SUBSTITUTE(A1,".","@",3)))&RIGHT(A1,LEN(A1)-FIND("@",SUBSTITUTE(A1,".","@",3))) 
```

无论换行符，您都可以将其粘贴到原样`B1`（假设您的 IP 在 A 列开始）。`A1`

示例文件：[https ://www.dropbox.com/s/vun6urvukch9uvv/IPoctets.xlsx](https://www.dropbox.com/s/vun6urvukch9uvv/IPoctets.xlsx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T19:02:36.673

你可以这样做：

请务必将 Application.UsedRange 替换为包含 IP 地址的实际范围

```
Sub PadIP()
    Dim Arr As Variant
    Dim ipAddr As String
    Dim vCell As Variant
    Dim n As Long

    'Replace ActiveSheet.UsedRange with the range containing your data
    '
    'If data is contained in column A and you have a column header
    'Example: Range(Cells(2, 1), Cells(ActiveSheet.UsedRange.Rows.Count, 1))
    For Each vCell In ActiveSheet.UsedRange
        Arr = Split(vCell.Value, ".")

        For n = 0 To UBound(Arr)
            If (n + 1) Mod 4 = 0 Then
                ipAddr = ipAddr & Right(String(3, "0") & Arr(n), 3)
            Else
                ipAddr = ipAddr & Right(String(3, "0") & Arr(n), 3) & "."
            End If
        Next
       vCell.Value = ipAddr
       ipAddr = ""
    Next
End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T19:17:25.387

我也可以玩:)？

这是我上面评论的进一步内容。这是一个关于如何找到`.??.`和制作它的例子`.0??.`

我假设数据可以**在**工作表中的任何位置。

```
Sub Sample()
    Dim oRange As Range, aCell As Range, bCell As Range
    Dim ws As Worksheet
    Dim ExitLoop As Boolean
    Dim SearchString As String

    On Error GoTo Whoa

    Set ws = Worksheets("Sheet1")
    Set oRange = ws.Cells

    SearchString = ".??."

    Set aCell = oRange.Find(What:=SearchString, LookIn:=xlValues, _
                LookAt:=xlPart, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
                MatchCase:=False, SearchFormat:=False)

    If Not aCell Is Nothing Then
        Set bCell = aCell

        aCell.Value = CleanIt(aCell.Value)

        Do While ExitLoop = False
            Set aCell = oRange.FindNext(After:=aCell)

            If Not aCell Is Nothing Then
                If aCell.Address = bCell.Address Then Exit Do
                aCell.Value = CleanIt(aCell.Value)
            Else
                ExitLoop = True
            End If
        Loop
    End If
    Exit Sub
Whoa:
    MsgBox Err.Description
End Sub

Function CleanIt(rng)
    Dim MyAr() As String
    Dim strTemp As String

    MyAr = Split(rng, ".")

    For i = LBound(MyAr) To UBound(MyAr)
        If Len(MyAr(i)) = 2 Then
            MyAr(i) = "0" & MyAr(i)
        End If
        strTemp = strTemp & "." & MyAr(i)
    Next i
    CleanIt = Mid(strTemp, 2)
End Function 
```

**截屏**

![在此处输入图像描述](../Images/8814b73756a0f3220d775b3edb96926b.png)

**注意**：这只是用于演示目的的示例。上面的代码需要进行更多调整，以便它也可以处理其他场景。

# google-maps-api-3 - kml 图层信息窗口

> ID：14986936
> 
> 赞同：1
> 
> 时间：2013-02-20T18:09:42.767
> 
> 标签：google-maps-api-3, kml, infowindow

我正在努力寻找一种方法来设置此地图上的信息窗口的样式。我尝试通过设置 suppressInfoWindows: true 来抑制信息窗口，但这似乎不起作用。任何想法将不胜感激。我在这里阅读了很多谷歌文档和很多其他帖子，但找不到解决方案。

```
 <script>

var geocoder;
var map; 
var marker;
var layers = [];

function initialize() {
geocoder = new google.maps.Geocoder ();
var latlng = new google.maps.LatLng (51.505288, -0.191544);
var myOptions = {
  zoom: 15,
  disableDefaultUI: true,
  styles: [
        {
           stylers: [

  ]
},

{
  featureType: "poi.park",
  stylers: [
      { color: "#aecfae" },
    { saturation: 0 },
    { lightness: 0 },
    { visibility: "simplified" }

  ]
  },

  {
  featureType: "landscape",
  stylers: [
      { color: "#ffffff" },
    { saturation: 0 },
    { lightness: 0 },
    { visibility: "simplified" }
  ]
},

{
  featureType: "road.highway",
  elementType: "labels",
  stylers: [
    { color: "transparent" },
    { visibility: "off" },

  ]
},

{
  featureType: "water",
  elementType: "geometry.fill",
  stylers: [
    { color: "#a5bfdd" },
    { visibility: "on" },

  ]
},

{
  featureType: "road",
  elementType: "labels",
  stylers: [
    { color: "transparent" },
    { visibility: "off" },

  ]
},

  {
  featureType: "road",
  elementType: "geometry",
  stylers: [
      { color: "#e0e0e0" },
    { saturation: 0 },
    { lightness: 0 },
    { visibility: "simplified" }
  ]
}],
  center: latlng,
  mapTypeId: google.maps.MapTypeId.ROADMAP
    }
  map = new google.maps.Map(document.getElementById("map_canvas"),
    myOptions);

  marker = new google.maps.Marker({map:map});

     layers[0] = new google.maps.KmlLayer('http://www.cid-dev.co.uk/vicarage-phase-2/kml/VicarageGate.kml', {preserveViewport: true});

    for (var i = 0; i < layers.length; i++) {
    layers[i].setMap(map);

  }

  layers[1] = new google.maps.KmlLayer('http://www.cid-dev.co.uk/vicarage-phase-2/kml/PrimarySchools-1.kml',
         {preserveViewport: true});
  layers[2] = new google.maps.KmlLayer('http://www.cid-dev.co.uk/vicarage-phase-2/kml/SecondarySchools-1.kml', {preserveViewport: true});
  layers[3] = new google.maps.KmlLayer('http://www.cid-dev.co.uk/vicarage-phase-2/kml/Culture-6.kml', {preserveViewport: true});
  layers[4] = new google.maps.KmlLayer('http://www.cid-dev.co.uk/vicarage-phase-2/kml/Hotels-2.kml', {preserveViewport: false});
   layers[5] = new google.maps.KmlLayer('http://www.cid-dev.co.uk/vicarage-phase-2/kml/Shopping.kml', {preserveViewport: false});
   layers[6] = new google.maps.KmlLayer('http://www.cid-dev.co.uk/vicarage-phase-2/kml/Restaurants.kml', {preserveViewport: false});
  for (var i = 1; i < layers.length; i++) {
    layers[i].setMap(null);

  }
    }
function codeAddress () {
    var address = document.getElementById ("address").value;
    geocoder.geocode ( { 'address': address}, function(results, status)  {
    if (status == google.maps.GeocoderStatus.OK)  {
        map.setCenter(results [0].geometry.location);
        marker.setPosition(results [0].geometry.location);
        map.setZoom(15);
        } 
    else {
        alert("Geocode was not successful for the following reason: " + status);
            }
}); 
}

function toggleLayer(i) {
  if(layers[i].getMap() === null) {
    layers[i].setMap(map);
  }
  else {
    layers[i].setMap(null);
  }

}

  google.maps.event.addDomListener(window, 'load', initialize);

    </script>

    <div id="map_canvas" style="position:absolute; width:100%; height:100%; top:0px; left:0px; right:0px; bottom:0px; z-index:100; background-color:#000;"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T19:04:57.913

禁止自动生成信息窗口，并使用点击事件手动处理数据。

`target="_blank"`这是从信息窗口链接中删除属性的示例：http: [//people.missouristate.edu/chadkillingsworth/mapsexamples/removekmllinktargets.js](http://people.missouristate.edu/chadkillingsworth/mapsexamples/removekmllinktargets.js)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-02T21:38:59.970

您可以尝试将这样的方法添加到所有标记中。

```
// generalized click handler
function addClickHandler(item, content, position) {
  google.maps.event.addListener(item, 'click', function () {
    infoWindow.close();
    infoWindow.setContent(content);
    infoWindow.setPosition(position);
    infoWindow.open(map);
  });
} 
```

当我使用 KML 进行样式设置时，<[CDATA 标记中传递的任何内容都会被格式化。因此允许在 cdata 中添加。

还有一个来自 GOOGLE 的例子

[http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobubble/examples/example.html](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobubble/examples/example.html)

# c# - 使用 CreateProcessAsUser 启动一个 url

> ID：14986938
> 
> 赞同：4
> 
> 时间：2013-02-20T18:09:50.643
> 
> 标签：c#, c++, windows, uri, elevation

最近我遇到了一个问题，我需要从提升的应用程序打开网页。我需要打开浏览器而不是提升，所以我环顾四周，找到[了这个解决方案](https://stackoverflow.com/a/287072/127602)

这肯定会解决我的问题，除了`CreateProcessAsUser`不接受 URI 作为文件名，执行将失败，错误消息为“文件名、目录名或卷标语法不正确”

有人可以告诉我是否有办法通过 CreateProcessAsUser 启动网站，或者是否有类似的 API 可以完成这项工作。请注意，我的实际应用程序总是被提升，因此我不能使用通常的`Process.Start()`，`CreateProcess()`或者`ShellExecute()`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T21:41:43.227

您需要使用两个不同的函数系列来完成此任务：

1.  `CreateProcess`及相关功能。这些可用于启动新进程。您必须提供可执行映像的文件名。
2.  `ShellExecute`和朋友。这些将使用 shell 将文件类关联到可执行文件的规则将动词应用于文件。

要打开 URI，您需要使用其中一个`ShellExecute`系列。为了从您的提升流程中作为标准用户执行，您需要使用该`CreateProcess`系列中的一个。

您无法通过单一功能同时满足您的要求。因此，您的解决方案是使用其中一个`CreateProcessXXX`功能来创建一个以标准用户身份运行的进程。该过程反过来将调用`ShellExecuteXXX`. 您将 URI 作为命令行参数传递给`CreateProcessXXX`.

因此，您需要创建一个不同的可执行文件作为标准用户启动器。或者重新使用您现有的可执行文件，但根据您传递的参数将其切换到启动器模式。

# c# - 如何在 MVC 中处理耗时的服务器端初始化？

> ID：14986942
> 
> 赞同：3
> 
> 时间：2013-02-20T18:09:56.840
> 
> 标签：c#, asp.net-mvc, server-side, single-page-application, hottowel

我目前开始了一个小项目，体验 JS 和 HTML5 的世界。

几个月前我已经尝试过了，但我停止了，因为我没有足够的时间从头开始创建 MVC 单页应用程序。有太多的概念和模式，必须理解，如果我在日常工作中缺乏使用，我会后悔失去所有这些知识。*使用它或失去它！*

昨天我刚刚在 John Papa 的博客上发现[了这篇文章](http://www.johnpapa.net/hottowel/)，我认为这将是一个很好的开始。基本上，它是一个名为*HotTowel*的 MVC 模板，它实现了已经很不错的概念，如数据绑定、缩小等。我会在我目前需要的范围内体验代码，并会在需要时进一步体验它。

我想构建一个应用程序，用于从我现有的数据模型项目中获取数据。在我们的 Silverlight 应用程序中，我们通过预加载和初始化字典和其他属性以及调用**异步** `Init()`方法（例如，下载包含自定义代码的 XML 文件并将它们放入字典）来引导它。MEF 用于摆脱不方便的依赖项。

据我了解，服务器端初始化必须`Application_Start()`在 Global.asax 文件中的方法中完成。我想知道如何在这种方法中等待异步调用？最佳做法是什么？我在客户端的查询在很大程度上依赖于这些类的初始化。有哪些选择？

我的想法如下：

*   `Application_Start()`触发并忘记异步初始化过程。如果我在初始化完成之前执行一个请求（我猜是在控制器上），我必须等待初始化过程的回调并在它到达时立即开始查询。这样做的好处是，初始化运行，而用户已经可以浏览应用程序。
*   我会实现某种惰性初始化。一旦提出第一个请求，我就会处理初始化。不过，第一个请求可能需要很长时间。
*   我会在`Application_Start()`. 到目前为止，我看到的主要缺点是浏览器窗口对用户来说似乎是冻结的。如果可以让用户跟踪当前的初始化状态（某种闪屏），我会对这个解决方案感到满意。

虽然我不知道他们中的任何一个人将如何具体工作，但如果你们中的任何人能给我一些关于如何以及从哪里开始的建议，我会很高兴。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T18:31:33.327

您可以使用 a`Task<MyDataModel>`来表示数据。

```
static Task<MyDataModel> dataTask;
public static Task<MyDataModel> LoadDataModelAsync()
{
  var ret = new MyDataModel();
  await ret.Init();
  return ret;
} 
```

在`Application_Start`（或静态构造函数）中启动它：

```
dataTask = LoadDataModelAsync(); 
```

然后，您需要完成的每个操作都可以`await`完成：

```
MyDataModel data = await dataTask;
... 
```

如果它已经完成，`await`它将检测到并继续（同步）。

# c++ - 使用新的外部函数范围声明和初始化变量

> ID：14986944
> 
> 赞同：3
> 
> 时间：2013-02-20T18:10:01.627
> 
> 标签：c++, visual-studio-2010, memory-management, global-variables, new-operator

我的一位同事使用以下方法声明并初始化了一个全局变量`new`：

```
#define MAX_SIZE_TABLES (1024 * 1024)

unsigned char * ImageBuf = new unsigned char[MAX_SIZE_TABLES]; 
```

使用 Microsoft Visual Studio 2010 Premium 编译和构建代码时没有错误。

我的问题：
按照标准或未定义的行为，这是合法的吗？

如果没有函数调用，什么时候删除内存`delete`？

编辑1：在“为变量声明”之后添加了“初始化”。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T18:14:21.843

`new`不声明变量。它分配内存。声明部分是这样的：

```
unsigned char * ImageBuf 
```

这：

```
= new unsigned char[MAX_SIZE_TABLES]; 
```

部分，是初始化，而不是声明。

在全局范围内就地初始化变量是合法的，包括使用`new`或函数调用。程序不会自动释放内存（手动分配的内存*永远不会*自动释放；分配发生在哪里并不重要。）当进程退出时，内存由操作系统释放（以及所有通常的清理，比如关闭文件等。）但这当然是特定于平台的。从程序的角度来看，内存在其生命周期内永远不会被释放。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-20T18:12:06.497

这是合法的，但绝对不推荐。它是一个全局变量。当进程终止时，内存将被释放。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T18:29:03.033

这样做是可以的，但是有什么好处：

```
 unsigned char ImageBuf[MAX_SIZE_TABLES]; 
```

这种解决方案占用的内存少一点（指针的大小+`new`分配内存的开销，至少 16 个字节，很可能 40-60 个字节），并且程序的代码更短，但肯定这两个都不是缺点.

或者，您可以这样做：

```
unsigned char *ImageBuf;

int main()
{
    ImageBuf = new unsigned char [MAX_SIZE_TABLES];

    ...  all other code that belongs in main ... 

   delete ImageBuf;
} 
```

并且没有内存泄漏。

# php - 在 PHP 中使用 PEAR LDAP2 连接到 LDAP

> ID：14986947
> 
> 赞同：0
> 
> 时间：2013-02-20T18:10:07.463
> 
> 标签：php, ldap, pear

我对使用 LDAP 不是很有经验，并且一直在查看一些堆栈溢出问题并尝试将一些代码拼凑在一起。

我在我的 php 中使用 PEAR LDAP2 包。到目前为止，我已经设置了过滤器，但我还没有搜索任何东西。

我要做的就是建立与服务器的连接，但是当我的代码到达时：

```
$ldap= Net_LDAP2::connect($config); 
```

脚本冻结并产生白屏。我怎样才能解决这个问题？

下面的脚本：

```
<?php

include '../config/connection.php';
require_once '../Scripts/Net_LDAP2-2.0.12/Net/LDAP2/LDAP2.php';

//retrieve information from the form
$username = $_POST['username'];
$password = $_POST['password'];

$usernamefilter = Net_LDAP2_Filter::create('username', 'equals', $username);
$passwordfilter = Net_LDAP2_Filter::create('password', 'equals', $password);
$combinedFilter =  Net_LDAP2_Filter::combine('and', array($usernamefilter, $passwordfilter));

echo "filters have been created. <br />";

// The configuration array:
$config = array (
    'binddn'    => 'username',
    'bindpw'    => 'password',
    'basedn'    => 'ou=People,dc=campus,dc=aston,dc=ac,dc=uk',
    'host'      => 'gc.campus.aston.ac.uk',
'filter'    => $combinedFilter
);

echo "config array has been set up. <br />";

// Connecting using the configuration:
$ldap = Net_LDAP2::connect($config);

echo "connection to ldap has been sent. <br />";

// Testing for connection error
if (PEAR::isError($ldap)) {
    die('Could not connect to LDAP-server: '.$ldap->getMessage());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:19:12.823

考虑使用已知良好的客户端验证 LDAP 目录服务器是否正确响应 LDAP 客户端请求。`ldapsearch`由供应商分发是完成此任务的最佳选择。执行以下搜索以验证服务器是否正在接受连接的客户端连接并做出响应：

```
ldapsearch -h gc.campus.aston.ac.uk -p <your-port> \
   -D the-distinguished-name -w password \
   -b 'ou=People,dc=campus,dc=aston,dc=ac,dc=uk' \
   -s base '(&)' 1.1 
```

如果此操作挂起、失败或不返回任何条目，请更正问题并重新测试，直到上述命令成功。

*注意：如果您使用旧的 OpenLDAP ldapsearch，请添加 -x 命令行选项*

# javascript - xhttp 对象从 XML 获取数据时如何显示进度计数器？

> ID：14986949
> 
> 赞同：1
> 
> 时间：2013-02-20T18:10:21.253
> 
> 标签：javascript, xml, html, xmlhttprequest

我有一个带有脚本的 HTML 页面，其中 xhttp 对象从 XML 文件中读取节点值并写入它们。在读取所有必需的节点之前，我想以百分比显示数字进度指示器`(read_rows/total_rows * 100)`。但由于整个事情在一个线程上运行，我无法做到这一点。对我应该做什么有什么建议吗？

这是一些javascript代码-

```
function fetch(xml_file, index) {

    //create xhttp object, read xml, get nodeValue of element "VALUE" etc...

    xhttp = new XMLHttpRequest();
    xhttp.open("GET", xml_file ,false);
    xhttp.send(null);
    xmlDoc = xhttp.responseXML;
    data = xmlDoc.getElementsByTagName("VALUE")[index].childNodes[0].nodeValue;
    document.write(data);

    // CALCULATE PROGRESS AND WRITE TO SOME OVERLAY DIV...

} 
```

这是 HTML 的一部分-

```
<p><script>fetch(data_file, index); index++;</script></p>
<p><script>fetch(data_file, index); index++;</script></p>
<p><script>fetch(data_file, index); index++;</script></p> 
```

随着每一个都`<p></p>`被填满，我想在某个地方显示进度，比如覆盖 DIV。我如何同时做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T18:28:51.240

通过使用回调函数，我可以在 xhttp 对象从 XML 文件中读取数据时显示进度。

我已将代码更改为-

```
function fetch(xml_file, index) {

    //create xhttp object, read xml, get nodeValue of element "VALUE" etc...

    xhttp = new XMLHttpRequest();
    xhttp.open("GET", xml_file ,false);
    xhttp.send(null);
    xmlDoc = xhttp.responseXML;
    data = xmlDoc.getElementsByTagName("VALUE")[index].childNodes[0].nodeValue;
    document.write(data);

    progress(index); //CALLBACK FUNCTION

}

function progress(index) {
    document.getElementById("ProgressString").innerHTML = Math.round((index/358)*100) + "% complete"; // 358 nodes were to be read
} 
```

# twitter-bootstrap - Bootstrap 内联响应式导航

> ID：14986968
> 
> 赞同：-3
> 
> 时间：2013-02-20T18:11:18.617
> 
> 标签：twitter-bootstrap

主题。如何？（如屏幕截图中的多级菜单）

![在此处输入图像描述](../Images/78bc156714ad0d4a5cc6bbbd38b51f7e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T18:17:12.010

阅读文档？[http://twitter.github.com/bootstrap/components.html#navbar](http://twitter.github.com/bootstrap/components.html#navbar)

往下看`Responsive Navbar`

# forms - 将表单数据传递到 URL 时，“日期是无效的日期或时间字符串” - ColdFusion

> ID：14986969
> 
> 赞同：0
> 
> 时间：2013-02-20T18:11:19.630
> 
> 标签：forms, url, coldfusion

我正在尝试将数据从 mobiscroll jquery datepicker 传递到 ColdFusion 中的 mySQL 查询。当我发布表单时，它只发送输入名称，而不是实际存在的名称。yo 变量显示为“日期”，我收到此错误消息。“ date 是无效的日期或时间字符串。” 这是代码：

```
 <form action="searchWED.cfm?sorter=date&yo=date" method="post">
<input type="text" name="date" id="SubmitDate" class="i-txt">
<input type="submit" name="submit" />
</form>

<cfif IsDefined("URL.yo")> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T18:23:40.613

您正在发布表单，因此表单字段被转换为 FORM 范围的变量。如果您使用提交表单，它们只会存在于 URL 范围内`method="GET"`。

所以存在`URL.sorter`，`URL.yo`但您必须检查`form.date`日期值。

# python - 如何在没有 .pyc 文件的情况下使用 GIT 添加所有目录？

> ID：14986973
> 
> 赞同：0
> 
> 时间：2013-02-20T18:11:28.333
> 
> 标签：python, git

如何使用 GIT witout .pyc 文件添加所有目录？

```
git add catalog_name
git commit -m "Update"
git push 
```

添加什么和在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T18:12:34.200

使用 .gitignore 文件。将“* .pyc”添加到其中。该文件位于您的仓库的根目录中，即您所做的地方`git init`

这是一个用于 python 项目的好 .gitignore 文件，包含在 git commit 中忽略的通用扩展名。

[https://github.com/github/gitignore/blob/master/Python.gitignore](https://github.com/github/gitignore/blob/master/Python.gitignore)

# jquery - jquery复选框html问题

> ID：14986975
> 
> 赞同：0
> 
> 时间：2013-02-20T18:11:33.830
> 
> 标签：jquery, html

我遇到了一些 jQuery 或 HTML 的问题。

我有一些复选框。而且我想要一个“主要”复选框，以便在选中“主要”时检查该类别下的几个复选框。

好吧，没关系。我是这样解决的：

```
 $('#extraPolish').change(function() {
    if ($("#extraPolish").is(':checked') == true) {
        $("#extraPolish_Inside").attr('checked', 'checked');
        $("#extraPolish_UnderFender").attr('checked', 'checked');
        $("#extraPolish_OverFender").attr('checked', 'checked');
        console.log('checkd');
    } else {
        $("#extraPolish_Inside").removeAttr('checked');
        $("#extraPolish_UnderFender").removeAttr('checked');
        $("#extraPolish_OverFender").removeAttr('checked');
    }
}); 
```

因此，当您选中#extraPolish 时，那些在下面的会被选中，而当您删除对#extraPolish 的选中时，那些将被取消选中。

问题是当我尝试再次检查它们时，它会显示在 HTML 代码中，但不会在我的 Google Chrome 上得到检查。

任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T18:18:35.957

正如其他人所说 - 使用 jquery 1.9`prop()`是你想要的功能 .attr() 做一些不同的事情，首先错过了......

这将是我的解决方案。

```
$(document).ready(function () {
    $('#extraPolish').change(function() {
        $("#extraPolish_Inside").prop('checked', this.checked);
        $("#extraPolish_UnderFender").prop('checked', this.checked);
        $("#extraPolish_OverFender").prop('checked', this.checked);
        return false;
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T18:17:11.873

尝试使用`$("#extraPolish_Inside').prop('checked', true);`and`$("#extraPolish_Inside').prop('checked', false);`而不是`$("#extraPolish_Inside").attr('checked', 'checked');`

编辑：jsfiddle 示例 - [http://jsfiddle.net/rvtvr/1](http://jsfiddle.net/rvtvr/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T18:17:36.947

与其完全删除该`checked`属性，不如尝试将其简单地设置为 null。

```
$('#extraPolish_Inside').attr('checked',null); 
```

## [这是一个简单的演示](http://jsfiddle.net/Y6Dph/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T18:32:42.430

使用`.prop('checked', false);`and`.prop('checked', true);`代替。

```
$(document).ready(function () {
    $('#extraPolish').change(function() {
        if ($("#extraPolish").is(':checked') == true) {
            $("#extraPolish_Inside").prop('checked', true);
            $("#extraPolish_UnderFender").prop('checked', true);
            $("#extraPolish_OverFender").prop('checked', true);
            console.log('checkd');
        } else {
            $("#extraPolish_Inside").prop('checked', false);
            $("#extraPolish_UnderFender").prop('checked', false);
            $("#extraPolish_OverFender").prop('checked', false);
        }
        return false;
    });
}); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/xxLLu/3/)**

请参阅[http://jquery.com/upgrade-guide/1.9/#attr-versus-prop-](http://jquery.com/upgrade-guide/1.9/#attr-versus-prop-)以获得完整的解释以及为什么 jQuery 1.9 和更早版本之间的行为不同。

# mysql - MySQL Query Tuning - 为什么使用变量中的值比使用文字慢得多？

> ID：14986977
> 
> 赞同：6
> 
> 时间：2013-02-20T18:11:41.637
> 
> 标签：mysql, database-tuning, query-tuning

**更新：我自己在下面回答了这个问题。**

我正在尝试修复 MySQL 查询中的性能问题。我想我看到的是，将函数的结果分配给变量，然后运行 ​​SELECT 并与该变量进行比较相对较慢。

但是，如果为了测试起见，我将变量的比较替换为与我知道该函数将返回的字符串文字等效的比较（对于给定的场景），那么查询运行得更快。

例如：

```
...

SET @metaphone_val := double_metaphone(p_parameter)); -- double metaphone is user defined

SELECT 

        SQL_CALC_FOUND_ROWS
        t.col1,
        t.col2, 
        ...

    FROM table t

            WHERE

            t.pre_set_metaphone_string = @metaphone_val -- OPTION A

            t.pre_set_metaphone_string = 'PRN' -- OPTION B (Literal function return value for a given name) 
```

如果我使用选项 A 中的行，则查询很慢。

如果我使用选项 B 中的行，那么查询速度就像您期望的任何简单字符串比较一样快。

为什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-20T18:14:45.973

当答案打到我时已经写完问题，所以无论如何都要发布知识分享！

我意识到 metaphone 函数的返回值是 UTF8。

与 latin1 字段的比较显然会产生相当大的性能开销。

我将变量赋值替换为：

```
SET @metaphone_val:= CONVERT(double_metaphone(p_parameter) USING latin1); 
```

现在查询运行的速度和我预期的一样快。

# ios - 没有 UIWebView 的 iOS 应用程序身份验证

> ID：14986980
> 
> 赞同：2
> 
> 时间：2013-02-20T18:11:50.020
> 
> 标签：ios, objective-c, ios6, flask, flask-login

有没有办法在没有来自 Flask(Python) 后端的 webview 的情况下对用户进行身份**验证**？

这是我的后端登录代码：

```
@app.route('/login/', methods=['POST'])
def login():
    params = json.loads(request.data)
    username = params['username']
    password = params['password']
    u = User.query.filter_by(username=username).first()
    if u:
        if utils.check_password_hash(password, u.pw_hash):
            login_user(u)
            return ('', 200)
        else:
            return ('', 400)
    else:
        return ('', 400) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T19:09:15.707

是的，你当然可以做到这一点。这就是我通常的做法，根据您的需要进行更改（请记住，NSJSONSerialization 仅在 iOS 5+ 中可用）：

```
@property (nonatomic) NSOperationQueue *basicQueue; //add this to your header or as an instance variable

-(void)logMeIn:(NSString *)username password:(NSString *)password {

basicQueue = [[NSOperationQueue alloc] init];

NSDictionary *userCredentialsDict = [NSDictionary dictionaryWithObjectsAndKeys:username, @"username", password, @"password", nil];
NSData *encodedDict = [NSJSONSerialization dataWithJSONObject:userCredentialsDict options:NSJSONWritingPrettyPrinted error:NULL];

NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:@"http://yoursite.com/login"]];
[request setHTTPMethod:@"POST"];
[request setHTTPBody:encodedDict];
[request addValue:@"application/json" forHTTPHeaderField:@"Content-Type"];

[NSURLConnection sendAsynchronousRequest:request queue:basicQueue completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {
    NSHTTPURLResponse *httpResponse = (NSHTTPURLResponse*) response;
    NSString *stringFromData = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
    if (httpResponse.statusCode == 200) {
        //do stuff
        NSLog(@"Received data, parsed into string: %@", stringFromData);
    } else {
        //do error stuff or whatever
    }

}]; 
```

}

欲了解更多信息，请查看

*   [https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html)
*   [https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableURLRequest_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableURLRequest_Class/Reference/Reference.html)
*   [http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)

# opengl - 每个网格支持多种材料

> ID：14986990
> 
> 赞同：3
> 
> 时间：2013-02-20T18:12:26.363
> 
> 标签：opengl, mesh, vbo

我的网格类有一个单一的 VAO 索引，以及一个顶点、颜色、tex 坐标、法线和索引（如果使用）的缓冲区的索引。我将 Wavefront .obj 文件加载到该网格类中，并将所有组视为一个 VBO，然后分别加载单个材质并在绘制网格之前绑定它。这很好用，但我现在希望支持具有多种材料的 .obj 文件。

最简单的方法是为 .obj 中使用不同材质的每个组创建一个新的网格实例，并将它们分组到一个 meshGroup 对象或其他东西中，更好的（？）方法是在我的网格的 VAO 中支持多个 VBO ，在绘制每个缓冲区时分配不同的材质。第二种方法比另一种更快（因为每个网格而不是每个组只有 VAO 绑定），还是我可以退出并使用第一种方法？

编辑：我通过使用方法 1 并为具有不同材料的网格的每个部分创建一个单独的网格实例（和关联的 VAO）来实现它。我敢肯定这不是最好的方法，所以如果有人有任何见解，将不胜感激！

# android - 安卓验证错误

> ID：14986995
> 
> 赞同：3
> 
> 时间：2013-02-20T18:12:43.400
> 
> 标签：android

当我运行我的应用程序时，我收到了这条消息，我不知道为什么我会收到它，任何人都可以帮助我。这是日志猫。

```
 java.lang.VerifyError: com.kosh.me.Smaller
at java.lang.Class.newInstanceImpl(Native Method)
at java.lang.Class.newInstance(Class.java:1429)
at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
at android.app.ActivityThread.access$2300(ActivityThread.java:125)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:4627)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:521)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:876)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:634)
at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T18:21:58.750

This happens when the build library classes conflict with those at run-time. Try performing a Clean of your project followed by a build.

# java - wsimport执行Web服务客户端时的java异常

> ID：14986998
> 
> 赞同：0
> 
> 时间：2013-02-20T18:12:50.333
> 
> 标签：java, web-services, jakarta-ee

我正在关注[本教程](http://www.java-forums.org/blogs/web-service/1145-how-create-java-web-service.html)

我创建了这个简单的网络服务

```
package com.examples.services;

import javax.jws.WebMethod;
import javax.jws.WebService;

@WebService
public class HelloWeb {

    @WebMethod
    public String sayHi(String name) {
        return "Hi " + name;
    }
} 
```

和这个简单的服务器：

```
package com.examples.services;

import javax.xml.ws.Endpoint;

public class Server {
    public static void main(String args[]) {
        Endpoint.publish("http://localhost:9898/HelloWeb", new HelloWeb());
        System.out.println("here we go");
    }
} 
```

当我测试获取 WSDL 时，它运行良好，我得到了这个 xml 结果：

```
<?xml version="1.0" encoding="UTF-8" ?> 
- <!--  Published by JAX-WS RI at http://jax-ws.dev.java.net. RI's version is JAX-WS RI 2.1.6 in JDK 6\. 
  --> 
- <!--  Generated by JAX-WS RI at http://jax-ws.dev.java.net. RI's version is JAX-WS RI 2.1.6 in JDK 6\. 
  --> 
- <definitions xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="http://services.examples.com/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://schemas.xmlsoap.org/wsdl/" targetNamespace="http://services.examples.com/" name="HelloWebService">
- <types>
- <xsd:schema>
  <xsd:import namespace="http://services.examples.com/" schemaLocation="http://localhost:9898/HelloWeb?xsd=1" /> 
  </xsd:schema>
  </types>
- <message name="sayHi">
  <part name="parameters" element="tns:sayHi" /> 
  </message>
- <message name="sayHiResponse">
  <part name="parameters" element="tns:sayHiResponse" /> 
  </message>
- <portType name="HelloWeb">
- <operation name="sayHi">
  <input message="tns:sayHi" /> 
  <output message="tns:sayHiResponse" /> 
  </operation>
  </portType>
- <binding name="HelloWebPortBinding" type="tns:HelloWeb">
  <soap:binding transport="http://schemas.xmlsoap.org/soap/http" style="document" /> 
- <operation name="sayHi">
  <soap:operation soapAction="" /> 
- <input>
  <soap:body use="literal" /> 
  </input>
- <output>
  <soap:body use="literal" /> 
  </output>
  </operation>
  </binding>
- <service name="HelloWebService">
- <port name="HelloWebPort" binding="tns:HelloWebPortBinding">
  <soap:address location="http://localhost:9898/HelloWeb" /> 
  </port>
  </service>
  </definitions> 
```

但是当我尝试创建这样的 Web 服务客户端时：

```
<project name="My Web Service Build" default="wsimport">

    <target name="wsimport">

        <exec executable="wsimport">

            <arg line="-keep -s ./src -p com.examples.services.client http://localhost:9898/HelloWeb?wsdl"/>

        </exec>           

    </target>

</project> 
```

运行该客户端时出现此异常：

```
Buildfile: C:\Users\User\workspace\MyWebService\wsbuild.xml
wsimport:

BUILD FAILED
C:\Users\User\workspace\MyWebService\wsbuild.xml:5: Execute failed: java.io.IOException: Cannot run program "wsimport": CreateProcess error=2, The system cannot find the file specified

Total time: 646 milliseconds 
```

什么是解决方案我对网络服务很陌生

### 编辑后

![在此处输入图像描述](../Images/637a6c5521deefc2657ca647a8a2a9b5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T08:37:17.380

在您的环境变量中，确保 jdk bin 文件夹位于您的路径中。请按照以下说明操作：http: [//java.com/en/download/help/path.xml](http://java.com/en/download/help/path.xml)

该文件夹将类似于 C:\Program Files\java\jdk1.7.0_09\bin

您可以通过打开一个新的命令提示符窗口并键入`java -version`是否可行来进行测试，那么 bin 文件夹就在您的路径上。

还要检查是否`javac -version`也有效。如果它第一个有效，但这个无效，则可能意味着您的路径上有 JRE 而不是 JDK。

* * *

请执行下列操作：

1.  在 Eclipse`Window->Preferences->Installed JREs`中，找到您在此处安装的 JDK。
2.  打开环境属性（在我的电脑上右键 -> 属性 -> 高级，然后单击环境变量）。
3.  在系统变量中找到路径变量并单击编辑。
4.  请注意，此路径变量是以分号分隔的文件夹列表。找到现有的 Java 并将其删除。然后将步骤 1 中在 Eclipse 中找到的 JDK 的位置附加到末尾，然后是 /bin。

例如 mypathvar;C:\Program Files\Java\jdk1.6.0_37\bin

点击确定，然后打开一个新的命令提示符并输入`javac -version`，它现在应该可以工作了，但是您需要打开一个新的命令提示符。如果它不起作用谷歌如何将 java 添加到我的路径变量。

如果您在 Eclipse 中找不到 JDK，您可以随时下载一个（谷歌“下载 JDK”）

# vb.net - 如何使用 vb.net 从条形码阅读器中获取文本框中的值

> ID：14986999
> 
> 赞同：-2
> 
> 时间：2013-02-20T18:12:50.650
> 
> 标签：vb.net, visual-studio-2008

我想将价值从条形码阅读器带到文本框。我有 tvs 101 platina（条形码阅读器）我是 vb.net 的新手，请为我提供解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T18:30:59.793

我只是开始：

第一个是程序手册：[http ://www.tvs-e.in/pos/pdf/Programming_Guide_BS-L101-Platina.pdf](http://www.tvs-e.in/pos/pdf/Programming_Guide_BS-L101-Platina.pdf)

我之前使用的第二篇文章：http: [//www.codeproject.com/Articles/296533/Using-a-bar-code-scanner-in-NET](http://www.codeproject.com/Articles/296533/Using-a-bar-code-scanner-in-NET)

你必须做的：

扫描仪类似于键盘。所以你需要关键事件监听器来关注文本字段。

对扫描仪进行编程以发送扫描开始和结束的特殊键码。（将在手册中给出）