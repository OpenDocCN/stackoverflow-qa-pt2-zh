# StackOverflow 问答 14354000-14354999

# javascript - Html 获取 selectedindex 值并在页面重新加载后仍然保留它

> ID：14354000
> 
> 赞同：0
> 
> 时间：2013-01-16T08:22:56.453
> 
> 标签：javascript, dom-events, html-select

我在 html 中有一个这样的下拉列表，

```
<select onchange="redirect(this.value)"> 
    <option>choose a category</option> 
    <option>Business</option>    
    <option>Music</option>
    <option>Sports</option>
    <option>Cause</option> 
    <option>Politics</option> 
</select> 
```

我用于重定向到另一个页面内容的 Javascript 代码：

```
<script>
  function redirect(ddcategory){ 
    window.location= ddcategory;
  } 
</script> 
```

重定向正在工作，但如何让下拉列表中的选定选项即使在页面加载后仍然存在。

例如，当我选择**音乐**时，音乐页面会加载，但类别下拉列表中的值会变回**选择类别**；如何将其设置为选定的值？

请解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T08:34:15.297

我会使用[localStorage-Feature](https://developer.mozilla.org/en-US/docs/DOM/Storage)，它甚至比浏览器会话持续更长时间。在我的链接中，您甚至可以回退不支持本地存储（使用 cookie）的浏览器。

```
// set the ddcat
localStorage.setItem('ddcat', 'yourddcat value');

// get the ddcat
var ddcategory = localStorage.getItem('ddcat'); 
```

如果您只想在当前会话中使用此功能，请使用“sessionStorage”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T08:29:12.483

我认为您可以使用会话解决此问题。使用 ajax 或任何编程语言都可以。在 onchange 功能上将选择设置为会话，并在加载时从会话中设置选定的选项

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T08:31:53.200

您可以在移动到页面之前将变量保存在会话存储中，

然后在页面的加载上实现下拉列表中的更改

```
 function redirect(ddcategory){ 
    sessionStorage["MyChoise"]= ddcategory;
    window.location= ddcategory;
  } 
```

在加载页面上：

```
function OnLoadPage()
{
   //Select your element from the session 
} 
```

# android - ScrollView 与 TimePicker 的滚动发生冲突，导致 Timepicker 不滚动

> ID：14354006
> 
> 赞同：9
> 
> 时间：2013-01-16T08:23:14.737
> 
> 标签：android, android-scrollview, android-timepicker

希望这里有一个解决方案，我的 main.xml 中有一个 XML TimePicker 和 ScrollView，并且设置后 TimePicker 不会滚动。如果我删除 ScrollView，Timepicker 会滚动得很好，但显然我需要两者。

似乎他们都在为获得触摸事件而奋斗，但这会引起问题。

这是我的代码：

```
<ScrollView 
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_height="match_parent"
    android:layout_width="match_parent"
    android:background="@color/backgroundmain">

    <RelativeLayout 
        android:layout_width="match_parent"
        android:layout_height="wrap_content">

        <!-- Action Title -->
        <ImageView />

        <TextView />

        <!-- Description -->
        <TextView />

        <!-- Have to Button -->
        <TextView />

        <RelativeLayout
            android:id="@+id/TimePickerSection"
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:layout_marginTop="5dp"
            android:layout_centerHorizontal="true"
            android:layout_below="@id/">

            <TimePicker 
                android:id="@+id/TimePick"
                android:layout_height="wrap_content"
                android:layout_width="wrap_content"
                android:layout_centerVertical="true"
                android:layout_below="@id/HaveToText"/>

            <Button
                android:id="@+id/OkButton"
                android:layout_height="wrap_content"
                android:layout_width="wrap_content"
                android:text="@string/OkText"
                android:layout_below="@id/HaveToText"
                android:textSize="20sp"
                android:onClick="TimePickButton"
                android:layout_centerVertical="true"
                android:layout_toRightOf="@id/TimePick"/>

        </RelativeLayout>

    <!-- OR -->
    <TextView />

    <!-- buttons -->
    <TextView />

    <Button />

    </RelativeLayout>

</ScrollView> 
```

我删除了不相关的代码，但保留了轮廓只是为了向您展示布局的布局方式。

XML中有修复吗？我已经尝试过类似的事情，`android:fillViewPort=""`但什么也没做。我的 TimePicker 不是 Dialog 或任何东西的一部分，希望我能保持这种状态。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-21T14:35:40.997

找到解决方案，创建一个自定义 TimePicker 类，然后调用它来覆盖触摸事件：

```
@Override
public boolean onInterceptTouchEvent(MotionEvent ev) {
    // Stop ScrollView from getting involved once you interact with the View
    if (ev.getActionMasked() == MotionEvent.ACTION_DOWN) {
        ViewParent p = getParent();
        if (p != null)
            p.requestDisallowInterceptTouchEvent(true);
    }
    return false;
} 
```

# javascript - 内部事件函数中的 Javascript 上下文

> ID：14354009
> 
> 赞同：1
> 
> 时间：2013-01-16T08:23:26.663
> 
> 标签：javascript, javascript-events

我正在尝试在 elem 的 onclick 中访问 MainObj 的属性。有没有更好的方法来设计它，所以引用不会是“MainObj.config.url”，而是类似 this.config.url

示例代码：

```
var MainObj = {
      config: { url: 'http://www.mysite.com/'},
      func: function()
      {
          elem.onclick = function() {
           var url_pre = MainObj.config.url+this.getAttribute('href');

           window.open(url_pre, '_new');
          };
      }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T08:27:35.643

对象内部的“this”总是指代它自己（对象）。只需将上下文保存到变量中并使用它。该变量通常称为“_this”、“self”或“_self”（这里我使用_self）：

```
var MainObj = {
  config: { url: 'http://www.mysite.com/'},
  func: function()
  {
      var _self = this;
       elem.onclick = function() {
       var url_pre = _self.config.url+this.getAttribute('href');

       window.open(url_pre, '_new');
      };
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T08:27:28.083

您可以使用[模块模式](http://addyosmani.com/resources/essentialjsdesignpatterns/book/#modulepatternjavascript)：

```
var MainObj = (function () {
      var config = { url: 'http://www.mysite.com/'};
      return {
         func: function() {
             elem.onclick = function() {
                 var url_pre = config.url+this.getAttribute('href');
                 window.open(url_pre, '_new');
             };
          }
      };
}()); 
```

首先我们`config`在本地函数范围内定义对象。之后，我们在 return 语句中返回一个对象字面量。该对象包含`func`稍后可以调用的函数，例如：`MainObj.func`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T08:36:16.350

肯定有更好的方法......但我必须说：在方法中绑定事件处理程序是 - 我很抱歉 - 一个*糟糕*的想法。
您可能想查看 MDN，了解它对`this`关键字的说明，因为`this`它使许多人感到困惑和绊倒。例如，在您的代码段`this`中使用正确：它将引用 elem. 话虽如此，这就是你*可以*做的：

```
var MainObj = (function()
{
    var that = {config: { url: 'http://www.google.com/'}};//create closure var, which can be referenced whenever you need it
    that.func = function()
    {
        elem.onclick = function(e)
        {
            e = e || window.event;
            window.open(that.config.url + this.getAttribute('href'));
        };
    };
    return that;//expose
}()); 
```

但正如我所说，在方法中绑定事件处理程序并不是要走的路：

```
MainObj.func();
MainObj.func();//shouldn't be possible, but it is 
```

为什么不呢，只需这样做：

```
var MainObj = (function()
{
    var that = {config: { url: 'http://www.google.com/'}};
    that.handler = function(e)
    {
        e = e || window.event;
        window.open(that.config.url + this.getAttribute('href'));
    };
    that.init = function(elem)
    {//pass elem as argument
        elem.onclick = that.handler;
        delete that.init;//don't init twice
        delete that.handler;//doesn't delete the function, but the reference too it
    };
    return that;//expose
}());
MainObj.init(document.body); 
```

即便如此，这根本不是我编写此代码的方式*，*但我确实时不时地倾向于使事情过于复杂。但是一定要研究一下 JS 中调用上下文是如何确定的，以及闭包、对象引用和 GC 是如何工作的……这是值得的。

*更新：*
根据 OP 的要求 - 另一种方法

```
(function()
{
    'use strict';
    var config = {url: 'http://www.google.com/'},
    handlers = {load: function(e)
        {
           document.getElementById('container').addEventListener('click',handlers.click,false);
        },
        click: function(e)
        {
            e = e || window.event;
            var target = e.target || e.srcElement;
            //which element has been clicked?
            if (target.tagName.toLowerCase() === 'a')
            {
                window.open(config.url + target.getAttribute('href'));
                if (e.preventDefault)
                {
                    e.preventDefault();
                    e.stopPropagation();
                }
                e.returnValue = false;
                e.cancelBubble = true;
                return false;//overkill
            }
            switch(target.id)
            {
                case 'foo':
                    //handle click for #foo element
                return;
                case 'bar': //handle bar
                return;
                default:
                   if (target.className.indexOf('clickClass') === -1)
                   {
                       return;
                   }
            }
            //treat elements with class clickClass here
        }
    };
    document.addEventListener('load',handlers.load,false);//<-- ~= init
}()); 
```

这只是一个例子，远未完成。像调用这样的事情`preventDefault`，我倾向于避免（为了 X 浏览器的兼容性和易用性，我增加了`Event.prototype`.
我不会发布大量指向我自己的问题的链接，但请查看我的个人资料并检查 JavaScript 问题。您可能会感兴趣的几个示例（包括一个关于如何在 X 浏览器上下文中增强 Event.prototype 的示例）

# php - Symfony2 配置验证数组中的 TreeBuilder

> ID：14354015
> 
> 赞同：1
> 
> 时间：2013-01-16T08:23:47.140
> 
> 标签：php, symfony

我确实了解如何在 symfony2 (treeBuilder) 中配置验证工作，但我无法验证至少一个具有两个值的数组

```
mike_test:
    param: 
        - [123, 20]
        - [234, 40] 
```

所以我从这个开始：

```
$treeBuilder = new TreeBuilder();
$rootNode = $treeBuilder->root('mike_test');
$rootNode
    ->children()
        ->arrayNode('param')

        ->end()
    ->end(); 
```

我在“mike_test.param”下收到一条消息“无法识别的选项“0、1”有人可以帮忙吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-27T13:16:19.290

如果仍然可能，则必须在数组中定义数据的类型或类别

```
->arrayNode('param')
     ->isRequired()
     ->prototype('scalar')->end()
->end() 
```

# c++ - 为 C++ 下载一个好的数学向量/矩阵类/结构？

> ID：14354021
> 
> 赞同：1
> 
> 时间：2013-01-16T08:24:09.953
> 
> 标签：c++, math, vector, matrix

> **可能重复：**
> [什么是最广泛使用的 C++ 向量/矩阵数学/线性代数库，以及它们的成本和收益权衡？](https://stackoverflow.com/questions/1380371/what-are-the-most-widely-used-c-vector-matrix-math-linear-algebra-libraries-a)

只需要一个可公开下载的矢量/矩阵类，该类具有操作员支持和编程的基本操作。我认为 NEHE 有一个，但我只是想知道是否有一个普遍接受的最佳公共矢量类可供下载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:07:44.570

看看[GLM](http://glm.g-truc.net/)。它适用于 OpenGL，但也可以独立使用。我使用它，我对它非常满意。它是一个只有头文件的库，不需要安装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:43:00.467

有关评论，请参阅

*   [推荐一个可用的、快速的 C++ 矩阵库？](https://scicomp.stackexchange.com/q/351/679)

这个问题已经在这里出现了，见

*   [什么是最广泛使用的 C++ 向量/矩阵数学/线性代数库，以及它们的成本和收益权衡？](https://stackoverflow.com/q/1380371/341970)

# android - 在布局中为 TextView 的值声明 Intent 的内容

> ID：14354023
> 
> 赞同：2
> 
> 时间：2013-01-16T08:24:27.020
> 
> 标签：android, layout, android-activity

全部

我是 Android 新手，但有一些 Java 经验。

我正在学习标准课程，并创建了 2 个基本活动，其中 EXTRA_MESSAGE 字符串在活动之间传递并被显示。

第一个 Activity 的内容是静态的，并在布局文件中声明。第二个 Activity 的内容是动态的（基于在第一个 Activity 的 EditText 中输入的值），并且在第二个 Activity 的 onCreate() 方法中构建。

是否可以在布局文件中定义动态内容？类似于： android:text="传递给此 Activity 的 Intent 中 EXTRA_MESSAGE 的值" ？

我知道课程向我展示了两种做事方式，但这可行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T08:47:16.103

我想你的意思是：

```
android:text="@string/EXTRA_MESSAGE" 
```

您还可以通过编程方式设置文本：

```
TextView myText = (TextView) findViewById(R.id.txt_mytext);
myText.setText("This value will be shown");

//Or if you defined a static string in another Activity 

myText.setText(FirstActivity.stringName); 
```

# vb.net - Dispatcher.Invoke 并从另一个线程访问文本框

> ID：14354032
> 
> 赞同：0
> 
> 时间：2013-01-16T08:25:08.220
> 
> 标签：vb.net

我在理解应该如何使用 Dispatcher 来帮助我解决从不同线程访问文本框的问题时遇到了一点麻烦。我想要实现的是让线程在从服务器接收数据后附加到聊天框。

```
Public Class ChatScreen

Public client As Client

Private Sub Window_Loaded(ByVal sender As System.Object, ByVal e As System.Windows.RoutedEventArgs) Handles MyBase.Loaded
    client = Application.Current.Properties("Client")
    Me.Title = "ChitChat - " & client.Name

    txtMessage.Focus()

    Dim serverHandler As New ServerHandler(client.clientSocket, client.networkStream, txtChat)
End Sub

Private Sub btnSend_Click(ByVal sender As System.Object, ByVal e As System.Windows.RoutedEventArgs) Handles btnSend.Click
    client.SendMessage(txtMessage.Text)
End Sub

Private Sub Window_KeyDown(ByVal sender As System.Object, ByVal e As System.Windows.Input.KeyEventArgs) Handles MyBase.KeyDown
    If e.Key = Key.Enter Then
        client.SendMessage(txtMessage.Text)
    End If
End Sub

Public Sub AppendToChat(ByVal message As String)
    txtChat.AppendText(">> " & message)
End Sub

Public Class ServerHandler

    Dim clientSocket As TcpClient
    Public networkStream As NetworkStream
    Dim thread As Thread

    Public Sub New(ByVal clientSocket As TcpClient, ByVal networkStream As NetworkStream)
        Me.clientSocket = clientSocket
        Me.networkStream = networkStream
        thread = New Thread(AddressOf ListenForServer)
        thread.Start()
    End Sub

    Public Sub ListenForServer()
        Dim bytesFrom(10024) As Byte
        Dim message As String

        While True
            networkStream.Read(bytesFrom, 0, CInt(clientSocket.ReceiveBufferSize))
            message = System.Text.Encoding.ASCII.GetString(bytesFrom)
            message = message.Substring(0, message.IndexOf("$"))

            'AppendToChat <--- This is where I would like to append the message to the text box
        End While
    End Sub
End Class 
```

结束类

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:27:33.753

您可以使用 SynchronizationContext 来执行此操作，将 UI 胎面上下文存储在这样的变量中

```
Private syncContext As SynchronizationContext
Private Sub frmClient_Shown(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Shown
    syncContext = AsyncOperationManager.SynchronizationContext
End Sub 
```

现在创建一个像这样在主 UI 线程上执行的过程

```
Private Sub AddTextBox()
    ‘Do whatever you want you are in UI thread here

End Sub 
```

来自您在 UI 线程上的后台线程发布请求，如下所示

```
syncContext.Post(New SendOrPostCallback(AddressOf AddTextBox), Nothing) 
```

你甚至可以传递参数

```
Private Sub AddTextBox(ByVal argument As Object)
    ‘Do whatever you want you are in UI thread here

End Sub

.....
syncContext.Post(New SendOrPostCallback(AddressOf AddTextBox), objToPass) 
```

# spring - Spring Security 自动登录拦截

> ID：14354034
> 
> 赞同：3
> 
> 时间：2013-01-16T08:25:19.573
> 
> 标签：spring, spring-mvc, spring-security

我已经用 Spring Security 开发了一个注册和登录模块。我现在关心的是如何拦截自动存储的登录信息以将信息保存在数据库中。我的意思是，当用户标记“记住我”时，如果进入我的应用程序，会自动转到登录主页，但我想在数据库中注册该访问权限。

现在，当用户明确地通过登录页面时，很容易做到这一点，但在上述情况下则不然。

问候，

**更新：**我放了一些额外的信息：

*   **安全.xml**

    ```
     <http auto-config="true">
         <form-login login-page="/login" login-processing-url="/j_spring_security_check" default-target-url="/private/dashboard" />
         <remember-me key="rememberMeKey" user-service-ref="userServiceImpl" />
     </http>
     <authentication-manager alias="authenticationManager" />
     <authentication-manager>
         <authentication-provider user-service-ref="userServiceImpl">
             <password-encoder hash="md5"/>
         </authentication-provider>
     </authentication-manager> 
    ```

*   **用户服务实现**

    ```
    @Service
    @Transactional
    public class UserServiceImpl implements UserDetailsService {

    @Resource
    private UserDao userDao;

        public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {

            List<GrantedAuthority> AUTHORITIES = new ArrayList<GrantedAuthority>();
            String password = userDao.getUserPassword(username);

            if (password!=null) {
                userDao.registerAccess(username);
                AUTHORITIES.add(new SimpleGrantedAuthority("ROLE_REGISTERED")); 
                return new User(username,password, AUTHORITIES);
        } else {
                throw new UsernameNotFoundException("User not found: " + username);
        }
    } 
    ```

    }

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:05:42.293

您在这里有多种选择：

*   设置您的 org.springframework.security.web.authentication。**AuthenticationSuccessHandler**
*   订阅 org.springframework.security.authentication.event。**InteractiveAuthenticationSuccessEvent**（请参阅@Ionut 答案）

**AuthenticationSuccessHandler**将同样**适用于您的两种情况**（正常登录并记住我）：

```
public class CustomAuthenticationSuccessHandler extends SavedRequestAwareAuthenticationSuccessHandler {

    @Override
    public void onAuthenticationSuccess(HttpServletRequest request, HttpServletResponse response,
    Authentication authentication) throws ServletException, IOException {
        // log authentication success here for both cases
        super.onAuthenticationSuccess(request, response, authentication);
    }

} 
```

在您的**security.xml**中：

```
<bean id="customAuthenticationSuccessHandler" class="com.domain.security.CustomAuthenticationSuccessHandler"/>

<security:http ... >
    ...
    <security:form-login login-page='/login.html' authentication-success-handler-ref="customAuthenticationSuccessHandler" />
    <security:remember-me authentication-success-handler-ref="customAuthenticationSuccessHandler" />

</security:http> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T09:03:02.963

你可以做这样的事情

```
@Component
public class AppListener implements ApplicationListener {

    @Override
    public void onApplicationEvent(ApplicationEvent event) {
        if (event instanceof InteractiveAuthenticationSuccessEvent) {
            handleLoginEvent();
        } else if (event instanceof HttpSessionDestroyedEvent)
            handleLogoutEvent((HttpSessionDestroyedEvent) event);

    }

    private void handleLoginEvent() {
      // handle login event
    }

    private synchronized void handleLogoutEvent(HttpSessionDestroyedEvent event) {
        // handle logout event
    }

} 
```

问候，

`EDIT`

将此添加到 web.xml

```
 <listener>
         <listener-class>org.springframework.security.web.session.HttpSessionEventPublisher</listener-class>
  </listener> 
```

# sql-server - 如何将远程计算机设置为 MSSQL Server 2008 R2 的复制数据库任务的目标？

> ID：14354036
> 
> 赞同：1
> 
> 时间：2013-01-16T08:25:34.943
> 
> 标签：sql-server, database, task

目标数据库位于具有本地 IP 的 LAN 上。本地 IP 由我的调制解调器的 DHCP 服务器分配，类似于 192.168.1.xxx。我已经将端口 1433 重定向到拥有 sql server (192.168.1.xxx) 的机器，我可以使用源机器上的 WAN IP 通过 SQL Management Studio 连接访问它。但是，当我将我的 WAN IP 写入复制数据库任务的目标时，它会返回一个错误，表明无法建立连接。

我可能会错过目标的书写约定吗？我尝试了以下方法（我的 WAN IP 是 78.187.xxx.xxx，我的目标 MSSQL Server 的名称是 EXP32）：

```
78.187.xxx.xxx
78.187.xxx.xxx\EXP32
\\78.187.xxx.xxx
\\78.187.xxx.xxx\EXP32 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T08:30:25.673

去

```
-> SQL server configuration manager
-> On network configuration -> protocol for mssqlserver -> enable except VIA
-> go to component services and on services restart sqlserver and express if you have 
```

# javascript - jQuery 1.9 .live() 不是函数

> ID：14354040
> 
> 赞同：281
> 
> 时间：2013-01-16T08:26:03.793
> 
> 标签：javascript, jquery, function, live, deprecated

我最近将 jQuery 从 1.8 更新到 2.1。我突然发现`.live()`停止工作了。
我得到错误`TypeError: $(...).live is not a function`。

有什么方法可以代替`.live()`吗？

* * *

## 回答 #1

> 赞同：594
> 
> 时间：2013-01-16T08:30:51.077

# ***jQuery`.live()`从 1.9 版开始被移除。***

这意味着，如果您从 1.8 及更早版本升级，如果您不遵循下面的迁移指南，您会发现出现问题。您不能简单地替换`.live()`为`.on()`!

* * *

# ***在开始搜索和替换之前阅读：***

对于实时站点上的*快速/热修复*，**不要**只用 替换关键字`live`，因为**参数不同**！`on`

 **```
.live(events, function) 
```

应映射到：

```
.on(eventType, selector, function) 
```

**（子）选择器非常重要！如果您出于任何原因不需要使用它，请将其设置为`null`.**

* * *

# **迁移示例 1：**

前：

```
$('#mainmenu a').live('click', function) 
```

之后，将子元素 ( `a`) 移动到`.on()`选择器：

```
$('#mainmenu').on('click', 'a', function) 
```

* * *

# **迁移示例 2：**

前：

```
$('.myButton').live('click', function) 
```

之后，将元素 ( `.myButton`) 移动到`.on()`选择器，并找到最近的父元素（最好带有 ID）：

```
$('#parentElement').on('click', '.myButton', function) 
```

**如果你不知道作为父母应该放什么，`body`总是有效的：**

```
$('body').on('click', '.myButton', function) 
```

* * *

# 也可以看看：

*   [jQuery - 如何使用“on()”方法而不是“live()”？](https://stackoverflow.com/q/14703646/584192)
*   [jQuery 1.9 迁移指南](http://jquery.com/upgrade-guide/1.9/)

* * *

## 回答 #2

> 赞同：90
> 
> 时间：2015-07-30T17:51:13.880

您可以通过包含以下 JavaScript 代码来避免重构代码

```
jQuery.fn.extend({
    live: function (event, callback) {
       if (this.selector) {
            jQuery(document).on(event, this.selector, callback);
        }
        return this;
    }
}); 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2015-08-05T08:13:48.877

jQuery >= 1.9的转发端口`.live()`避免重构 JS 依赖于`.live()` 使用优化的 DOM 选择器上下文

```
/** 
 * Forward port jQuery.live()
 * Wrapper for newer jQuery.on()
 * Uses optimized selector context 
 * Only add if live() not already existing.
*/
if (typeof jQuery.fn.live == 'undefined' || !(jQuery.isFunction(jQuery.fn.live))) {
  jQuery.fn.extend({
      live: function (event, callback) {
         if (this.selector) {
              jQuery(document).on(event, this.selector, callback);
          }
      }
  });
} 
```

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2013-01-16T08:27:15.073

jQuery API 文档列出`live()`了自 1.7 版起已弃用并自 1.9 版起已删除：[link](http://api.jquery.com/live/)。

> 不推荐使用的版本：1.7，已删除：1.9

此外，它指出：

> 从 jQuery 1.7 开始，不推荐使用 .live() 方法。使用[.on()](http://api.jquery.com/on/)附加事件处理程序。旧版本 jQuery 的用户应该使用[.delegate()](http://api.jquery.com/delegate/)而不是 .live()

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-01-16T08:27:22.583

.live() 已被弃用，现在已从 jQuery 1.9 中删除 你应该使用[.on()](http://api.jquery.com/on/)

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2013-01-16T08:27:29.527

.live 在 1.9 中被删除，请参阅升级指南：http: [//jquery.com/upgrade-guide/1.9/#live-removed](http://jquery.com/upgrade-guide/1.9/#live-removed)

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2015-05-07T07:20:29.207

一个非常简单的修复，不需要更改代码，只需添加 jquery 迁移脚本，在此处下载 [https://github.com/jquery/jquery-migrate/](https://github.com/jquery/jquery-migrate/)

它提供了 jquery 已弃用但需要的功能，如“live”、“browser”等

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2017-04-08T17:25:00.393

如果没有必要，我倾向于不使用 .on() 语法。例如，您可以像这样更轻松地迁移：

老的：

```
$('.myButton').live('click', function); 
```

新的：

```
$('.myButton').click(function) 
```

以下是有效事件处理程序的列表：[https ://api.jquery.com/category/forms/](https://api.jquery.com/category/forms/)

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2020-10-13T07:19:15.793

当我在我的网站上收到此错误时。它将停止我网站上的某些功能，经过研究，我找到了解决此问题的方法，

```
$colorpicker_inputs.live('focus', function(e) {
    jQuery(this).next('.farb-popup').show();
    jQuery(this).parents('li').css( {
        position : 'relative',
        zIndex : '9999'
    })
    jQuery('#tabber').css( {
        overflow : 'visible'
    });
});

$colorpicker_inputs.live('blur', function(e) {
    jQuery(this).next('.farb-popup').hide();
    jQuery(this).parents('li').css( {
        zIndex : '0'
    })
}); 
```

应该将“ **live** ”替换为“ **on** ”检查下面

```
 $colorpicker_inputs.on('focus', function(e) {
    jQuery(this).next('.farb-popup').show();
    jQuery(this).parents('li').css( {
        position : 'relative',
        zIndex : '9999'
    })
    jQuery('#tabber').css( {
        overflow : 'visible'
    });
});

$colorpicker_inputs.on('blur', function(e) {
    jQuery(this).next('.farb-popup').hide();
    jQuery(this).parents('li').css( {
        zIndex : '0'
    })
}); 
```

下面还有一个基本示例：

```
.live(event, selector, function) 
```

将其更改为：

```
.on(event, selector, function) 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2017-07-05T19:47:16.657

如果您碰巧使用的是 Ruby on Rails 的 jQuery gem `jquery-rails`，并且由于某种原因您无法重构您的遗留代码，那么仍然支持的最后一个版本是`2.1.3`，您可以通过在 上使用以下语法来锁定它`Gemfile`：

```
gem 'jquery-rails', '~> 2.1', '= 2.1.3' 
```

那么您可以使用以下命令进行更新：

```
bundle update jquery-rails 
```

我希望能帮助其他面临类似问题的人。**

# c# - 如何获取 Windows Phone 的 CPU 使用率统计信息？

> ID：14354046
> 
> 赞同：2
> 
> 时间：2013-01-16T08:26:33.137
> 
> 标签：c#, windows-phone-7, windows-phone-8

我想获取 Windows Phone 的 CPU 使用情况详细信息。我已经尝试过来自[MSDN(DeviceExtendedProperties) 的 DeviceExtendedProperties.GetValue()](http://msdn.microsoft.com/en-US/library/windowsphone/develop/microsoft.phone.info.deviceextendedproperties%28v=vs.105%29.aspx)

但这只会提供更多与设备内存相关的东西。那么，是否有任何类公开了 Windows Phone 的 CPU 相关内部结构？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T08:46:31.813

有了 WP7x，我确信没有任何类似的东西被暴露出来。不是 100% 使用 WP8，但我怀疑他们已经暴露了如此低级的功能

# php - 检查表单字段并将值插入数据库

> ID：14354059
> 
> 赞同：0
> 
> 时间：2013-01-16T08:27:37.817
> 
> 标签：php, mysql, forms

我有一个简单的 php/html 表单，可以将数据插入到我的 mysql 数据库中。

我的数据库中有一个名为**type**的列。当使用各种值提交表单时，我希望能够检查这些提交字段的值并根据这些值向列类型添加值：
如果提交的表单字段**field1**具有值**value1**并且字段**field2**具有值**value2**然后将**value3**插入我数据库上的列**类型**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T08:36:57.247

如果我理解你的问题，你可以用代码来管理它。请记住，在数据库中插入或更新某些值之前检查 post 值是个好主意。我使用 post 作为表单方法，如果使用 get，请将 $_POST 替换为 $_GET

```
<?php
if ($_POST["field1"] == "value1" AND $_POST["field2"] =="value2") 
{  $type = $value3
}
else
{  /// create some defaultvalue if the condition is not true. 
   $type = "youdefaultvalue" 
   // or you use some other value from your form, for example $_POST["field3"]
}
// here create your sql-action like "insert into ... " or update .... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T08:38:16.843

我不确定你是否需要这个。但是在阅读了你的问题之后，我希望你只是看起来像这样。

```
if($_POST['field1'] == "value1" && $_POST['field2'] == 'value2' ){

       // INSERT field3 to type
} 
```

# mysql - 优化慢 MySQL 查询

> ID：14354060
> 
> 赞同：2
> 
> 时间：2013-01-16T08:27:45.020
> 
> 标签：mysql

以下 MySQL 查询有什么地方这么慢？

我尝试向 DocumentRevision.document 和 Document.status 添加索引，但执行查询通常需要很长时间（似乎如果按顺序进行此查询，查询速度会加快）。是否有另一种更有效的方法来实现相同的结果？该查询获取数据库中所有可用文档的所有最新版本。有两张桌子。文档和文档修订。文档表只包含 id 和 status 字段，而 DocumentRevision 包含所有数据和“文档” id 字段，以便它知道它是哪个文档的修订版。

```
SELECT rev.document as documentId, rev.id as revId, rev.name as name, 
       rev.dateCreated as dateCreated, rev.documentOrder as documentOrder
FROM (
    SELECT Document.id as docId, MAX(DocumentRevision.id) as maxRevId 
    FROM Document, DocumentRevision
    WHERE Document.id = DocumentRevision.document AND Document.status = 0 
    GROUP BY Document.id
) AS x 
INNER JOIN DocumentRevision as rev on rev.document = x.docId 
       AND rev.id = x.maxRevId 
ORDER BY dateCreated DESC; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T08:39:27.113

你有两个选择：

```
SELECT  dr.*
FROM    (
        SELECT  document, MAX(id) AS maxid
        FROM    documentRevision
        GROUP BY
                document
        ) drd
JOIN    documentRevision dr
ON      dr.id = drd.maxid
JOIN    document d
ON      (d.id, d.status) = (drd.document, 0) 
```

和

```
SELECT  dr.*
FROM    document d
JOIN    documentRevision dr
ON      dr.id =
        (
        SELECT  id
        FROM    documentRevision dri
        WHERE   dri.document = d.id
        ORDER BY
                document DESC, id DESC
        LIMIT 1
        ) 
```

第一个很可能是最有效的，除非每个文档有很多修订。

在（按此顺序）上创建复合索引`documentRevision (document, id)`以使查询快速工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:01:40.083

`GROUP BY`如果结果很大，我怀疑带有 a 的子查询可能会导致一些执行计划问题；您可能想尝试不使用子查询的查询。

（上的索引`Document.id`，`DocumentRevision.document`并且`DocumentRevision.status`会有所帮助。）

```
SELECT rev.document as documentId, rev.id as revId, rev.name as name, 
   rev.dateCreated as dateCreated, rev.documentOrder as documentOrder
FROM Document doc
JOIN DocumentRevision rev
  ON doc.id=rev.document
LEFT JOIN DocumentRevision rev2
  ON rev.document = rev2.document AND rev.id < rev2.id
WHERE doc.status=0 AND rev2.id IS NULL
ORDER BY dateCreated DESC; 
```

[SQLfiddle 显示相同的结果](http://sqlfiddle.com/#!2/a83ab/2)。请注意没有子查询的更简单的查询计划。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T09:12:37.233

您的查询不止一次在联接中使用了 documentRevision 表。肯定有优化的空间。

在其他 DBMS（例如 Teradata 或 MS SQL 服务器）中，这可以通过`sum(1) over(partition by rev.document order by rev.id desc)`.

MySQL 没有窗口聚合函数。但同样可以用参数来完成：

```
select * from (
  select
  if(@doc_id_grp=rev.document,@rank:=@rank+1,@rank:=1) rank /*the same document.id (documentRevision.document) is considered the same group, in the group, @rank increntally increases, when the doc_id changes, @rank resets to 0*/
  ,@doc_id_grp:=rev.document as doc_id
  ,rev.id as rev_id
  ,rev.name as name
  ,rev.datecreated as datecreated
  ,rev.documentorder as documentorder
  from Document doc
  join DocumentRevision rev
  on doc.id=rev.Document
  ,(select @rank:=0,@doc_id_grp:=0) a
  order by rev.document,rev.id desc
  where doc.status=0
) x
where rank=1 
```

这样，DBMS 不会将表连接两次，而只会连接一次然后进行排序。

我没有 MySQL 环境来测试它，但可以根据需要进行调整。我希望这会有所帮助。还请在 Document.id 和 DocumentRevision.document 上有索引以优化连接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T08:45:04.213

查看您的要求：

> 有两张桌子。文档和文档修订。文档表只包含 id 和 status 字段，而 DocumentRevision 包含所有数据和“文档” id 字段，以便它知道它是哪个文档的修订版。

而你的代码，我写了另一个没有子选择的查询。在 document.ID 和 documentRevision.document 上仅使用一个选择和适当的索引应该更有效，以获得良好的连接性能。

```
SELECT rev.document docID, MAX(rev.id) revID, rev.name revName, rev.dateCreated dateCreated, rev.documentOrder docOrder
FROM DocumentRevisin as rev, Document as doc
WHERE doc.status = 0 AND doc.id = rev.document
GROUP BY rev.document, rev.name revName, rev.dateCreated dateCreated, rev.documentOrder docOrder 
```

# python - Django 日志轮换和日志文件所有权

> ID：14354066
> 
> 赞同：24
> 
> 时间：2013-01-16T08:28:32.353
> 
> 标签：python, django

我有一个 django 1.4.2 应用程序日志记录到一个旋转文件。在我的 settings.py 中，我有：

```
LOGGING = {
'version': 1,
'disable_existing_loggers': True,
'formatters': {
    'standard': {
        'format': '%(asctime)s [%(levelname)s] %(name)s: %(message)s'
    },
},
'handlers': {
    'default': {
        'level':'DEBUG',
        'class':'logging.handlers.RotatingFileHandler',
        'filename': '/var/www/html/logs/mylog.log',
        'maxBytes': 1024*1024*5, # 5 MB
        'backupCount': 5,
        'formatter':'standard',
    },
    'request_handler': {
            'level':'DEBUG',
            'class':'logging.handlers.RotatingFileHandler',
            'filename': '/var/www/html/logs/django_request.log',
            'maxBytes': 1024*1024*5, # 5 MB
            'backupCount': 5,
            'formatter':'standard',
    },
},
'loggers': {
    '': {
        'handlers': ['default'],
        'level': 'ERROR',
        'propagate': True
    },
    'django.request': { # Stop SQL debug from logging to main logger
        'handlers': ['request_handler'],
        'level': 'DEBUG',
        'propagate': False
    },
} 
```

}

所以在日志目录中我看到了文件：

```
mc.log
mc.log.1
mc.log.2
mc.log.3
mc.log.4
mc.log.5 
```

当 mc.log 达到 5M 时，文件已正确轮换，但新的 mc.log 是使用所有权 root.root 创建的。由于 apache 在 apache 用户下运行，它无法再访问文件并且应用程序停止工作。知道为什么使用 root.root 所有权而不是 apache.apache 创建新日志吗？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-16T08:45:46.417

如果父目录的用户/组允许，则可以创建新文件。我相信您要么需要更改目录的所有者，要么在包含 apache 用户的目录中添加一个组，或者使用一些高级技术，例如 ACL。

要对其进行测试，请尝试以下操作： 以 root 身份登录。切换到apache用户。尝试手动创建文件。切换回root，更改文件夹的权限/所有权，切换到apache用户，再试一次。这应该会为您提供更多关于脚本在尝试创建文件时是否会失败的信息。

最后，这有点违反直觉，请确保 apache 用户以某种方式在该目录中具有执行权限，否则它将不允许您 cd 进入该目录。

另外，我认为您需要设置目录（`chmod g+s`或`chmod 2755`等）的“s”位，以便新添加的文件继承目录的权限。然后，您需要确保已设置组的 s 位，并且该组拥有该目录。（或者您可以将目录的组设置为 www-data）。

# shell - 运行 shell 脚本时如何正确获取用户输入？

> ID：14354070
> 
> 赞同：0
> 
> 时间：2013-01-16T08:28:52.920
> 
> 标签：shell

例如，如果我有一个 shell 程序“shell1”并运行“./shell1 hello world”，我如何将 hello world 存储在变量中？如果我尝试使用 read，它只在我先运行 ./shell1 后才接受用户输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T08:39:29.713

您指的是传递给脚本的**参数。**

要捕获它们，请使用`$1`第一个参数、`$2`第二个参数、`$3`第三个参数，依此类推。用于`"$@"`将所有参数捕获到单个变量中。

例如，尝试将以下内容添加到您的脚本中：

```
param1="$1"
param2="$2"
echo "Param1 is $param1, Param2 is $param2"

allParams="$@"
echo "All params are: $allParams" 
```

查看[Advanced Bash-Scripting Guide: Positional Parameters](http://tldp.org/LDP/abs/html/othertypesv.html)了解更多信息。

# php - 如何识别选择了“请选择”选项

> ID：14354071
> 
> 赞同：0
> 
> 时间：2013-01-16T08:28:58.760
> 
> 标签：php, html

下面我有一个 php/mysqli 代码块，它在其中创建了一个下拉菜单：

```
 $moduleHTML  = "";  
    $moduleHTML .= '<select name="modules" id="modulesDrop">'.PHP_EOL;
 $moduleHTML .= '<option value="">Please Select</option>'.PHP_EOL;  

     while($sqlstmt->fetch()) { 
         $moduleHTML .= sprintf('<option value="%1$s_%2$s_%3$s">%1$s - %2$s</option>'.PHP_EOL, $dbModuleNo, $dbModuleName, $dbModuleId);
    } 

$moduleHTML .= '</select>'; 
```

用于此的 HTML 是：

```
<select name="modules" id="modulesDrop">
     <option value="">Please Select</option>
</select> 
```

现在，如果用户选择了该选项，我将尝试显示一条消息`Please Select`。但问题是没有显示该消息。我的问题是，如果用户选择，我如何才能显示消息，说明需要选择一个模块`Please Select`？

下面是主要代码：

```
 <?php

    ...

        $moduleHTML  = "";  
        $moduleHTML .= '<select name="modules" id="modulesDrop">'.PHP_EOL;
     $moduleHTML .= '<option value="">Please Select</option>'.PHP_EOL;  

         while($sqlstmt->fetch()) { 
             $moduleHTML .= sprintf('<option value="%1$s_%2$s_%3$s">%1$s - %2$s</option>'.PHP_EOL, $dbModuleNo, $dbModuleName, $dbModuleId);
        } 

    $moduleHTML .= '</select>'; 

        $pHTML = "";

    ?>

    <form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post">
    <table>
    <tr>
    <th>Module: <?php echo $moduleHTML; ?></th>
    </tr>
    </table>
    <p><input id="moduleSubmit" type="submit" value="Submit Module" name="moduleSubmit" /></p>
    </form>

    <?php

    if (isset($_POST['moduleSubmit'])){ 

    if (isset($_POST['modules']) && $_POST['modules'] == '' ){
    $pHTML = "<span style='color: red'>Please Select a Module</span>";
    }else{

    $assessmentform = "<div id='lt-container'>
    <form action='".htmlentities($_SERVER['PHP_SELF'])."' method='post' id='assessmentForm'>
    <p id='warnings'>{$pHTML}</p>
    <p><strong>View Assessment Details:</p>   
    name='sessionSubmit' /></p>
    </form>
    </div>";

    echo $assessmentform;

    }

    }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T08:33:46.353

您为“**请选择**”选项提供了**value = ""**。所以你可以直接检查元素。另外，你已经做到了。请检查线路，

 **```
if (isset($_POST['modules']) && $_POST['modules'] == '' ){
    $pHTML = "<span style='color: red'>Please Select a Module</span>";
}else{ 
```

此行将检查用户是否选择了任何值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T08:45:55.947

在下面的代码中使用以粗体标记的 echo 语句

```
if (isset($_POST['moduleSubmit'])){ 

if (isset($_POST['modules']) && $_POST['modules'] == '' ){
**echo** $pHTML = "<span style='color: red'>Please Select a Module</span>";
}else{ 
```**

# c++ - 删除[]失败，如何查找原因？

> ID：14354078
> 
> 赞同：2
> 
> 时间：2013-01-16T08:29:29.960
> 
> 标签：c++

我有一整天都在运行的大量代码。每周一次，它在尝试释放一些指针时崩溃：

```
delete [] p 
```

回溯（使用 gdb）：

```
0x00007f4f709f2885 in raise () from /lib64/libc.so.6
0x00007f4f709f4065 in abort () from /lib64/libc.so.6
0x00007f4f70a2f7a7 in __libc_message () from /lib64/libc.so.6
0x00007f4f70a350c6 in malloc_printerr () from /lib64/libc.so.6 
```

我想找出导致删除失败的原因：重复删除或其他。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T09:14:16.507

首先，请注意回溯包含一个 call `malloc_printerr`。该函数会将原因写入标准错误，因此请记住将其捕获！

现在，无论是不匹配的新/删除类型、双重删除还是完全无效的指针，实际的错误都发生在实际检测到它的删除之前很久。所以 gdb 不会有太大用处。您必须记录相关指针发生的任何事情，并在出错时进行挖掘。

*   如果它完全是无效指针，则可能是未初始化的内存或缓冲区溢出覆盖它。检查所有对象是否具有正确的构造函数，这些构造函数将可能涉及的任何指针归零。[使用valgrind](http://valgrind.org/)也可以捕获任一问题，也可以使用[DUMA 库](http://duma.sourceforge.net/)或[mudflap](http://gcc.gnu.org/wiki/Mudflap_Pointer_Debugging)（随 gcc 提供）以更少的开销（但精度更低）捕获缓冲区溢出。
*   如果它是双重删除的，请检查是否在删除后将任何涉及的指针清零，除非在析构函数中（如果在析构函数中删除它，请确保在构造函数中对其进行了初始化）。为涉及的指针上的所有操作添加日志消息，当它崩溃时，在日志中追溯指针似乎已复活的位置。您也可以尝试对无效指针执行此操作。
*   如果它不匹配`[]`，请确保`[]`在分配时始终删除 with`[]`而不是其他情况，并确保始终删除完整类型（C++ 接受删除不完整类型，这是未定义的行为）。
*   以上任何情况也可能是未正确调用任何持有相关指针的对象的析构函数的次要影响。未能调用析构函数可能是因为删除了类型不正确的指针、删除了指向不完整类型的指针或`[]`new 和 delete 不匹配。除了审查之外，将日志添加到可能相关的任何构造函数和析构函数，并在日志中检查它们是否正确匹配。

不要忘记始终记录指针值，以便您可以实际匹配条目。您可能还需要编写一些脚本来分析日志（查找不匹配的条目）。并有足够的空间放置它；**以这种方式生成许多千兆**字节的日志相当容易。

一旦您缩小了一些可疑操作的范围，您可能需要将回溯写入日志。查看[backtrace(3)](http://linux.die.net/man/3/backtrace)库函数或[libunwind](http://www.nongnu.org/libunwind/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T08:47:10.447

编写好的单元测试，使用 valgrind 执行它们，并希望你能发现错误。

除此之外，您可以查看您的代码并搜索错误（例如，[“Good Clues, Easy Bugs”文章](http://cm.bell-labs.com/cm/cs/tpop/debugging.html)解释了调试技术）。

# android - 果冻豆 (4.1.1) 上的 Galaxy nexus Intent.ACTION_PICK 错误

> ID：14354081
> 
> 赞同：0
> 
> 时间：2013-01-16T08:30:02.413
> 
> 标签：android, gallery, android-4.2-jelly-bean, google-nexus

我在galaxy nexus 上发现了一个非常令人沮丧的错误。我启动 az `ACTION_PICK`activity 从中选择图像，启动它后，设备显示图库，并立即返回并调用`onActivityResult`，所以我无法选择图像。它仅在更新到 Jelly Bean 后出现在*Galaxy nexus上。*

```
Intent photoPickerIntent = new Intent(Intent.ACTION_PICK, android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
startActivityForResult(photoPickerIntent, RequestCodeCollection.GALLERY_IMAGE_SELECT); 
```

我用 Instagram 测试了图像挑选，效果很好。可能是什么诀窍？

**更新**

我从中删除了所有代码，`onActivityResult()`并尝试删除覆盖`onActivityResult()`的 . 它不起作用。我检查了 Instagram 的工作原理。他们使用一个`ACTION_GET_CONTENT`和一个选择器。创建选择器非常重要，因为这样用户无法选择默认源。如果我没有为每个选择创建一个选择器，我可以选择默认源（如画廊、文件管理器等），选择默认后问题又回来了。

```
Intent photoPickerIntent = new Intent(Intent. ACTION_GET_CONTENT , android.provider.MediaStore.Images.Media. EXTERNAL_CONTENT_URI);
photoPickerIntent.setType( "image/*" );
startActivityForResult(Intent. createChooser(photoPickerIntent, "Select Picture"),RequestCodeCollection. GALLERY_IMAGE_SELECT); 
```

* * *

我从 onActivityResult() 中删除了所有代码，并尝试删除覆盖 onActivityResult()。它不起作用。我检查了 Instagram 的工作原理。他们使用 ACTION_GET_CONTENT 和选择器。创建选择器非常重要，因为这样用户无法选择默认源。如果我没有为每个选择创建一个选择器，我可以选择默认源（如画廊、文件管理器等），选择默认后问题又回来了。

```
Intent photoPickerIntent = new Intent(Intent. ACTION_GET_CONTENT , android.provider.MediaStore.Images.Media. EXTERNAL_CONTENT_URI);
photoPickerIntent.setType( "image/*" );
startActivityForResult(Intent. createChooser(photoPickerIntent, "Select Picture"),RequestCodeCollection. GALLERY_IMAGE_SELECT); 
```

# css - 单 div 水平 CSS 六边形按钮

> ID：14354087
> 
> 赞同：3
> 
> 时间：2013-01-16T08:30:35.380
> 
> 标签：css, button, css-shapes, hexagonal-tiles

我想使用单个 div 创建一个六边形形状的 CSS 按钮，以保持标记干净。我一直在尝试使用伪元素之前和之后，并且可以使用顶部和底部的六边形“点”来做到这一点，但我想用它们指向左右来适应我的主题的其余部分。我已经接近了，但我无法在我想要的地方获得 after 伪元素。任何人都可以解决这个问题吗？

这就是我要做的事情：

```
#hex {
  background-color:green;
  width:100px;
  height:100px;
  float:left;
  display:block;
}

#hex::before {
  content:"";
  border-top:50px solid red;
  border-bottom:50px solid red;
  border-right:30px solid blue;
  float:left;
}

#hex::after {
  content:"";
  border-top:50px solid red;
  border-bottom:50px solid red;
  border-left:30px solid blue;
  float:left;
} 
```

[在http://jsfiddle.net/higginbottom/YKx2M/](http://jsfiddle.net/higginbottom/YKx2M/)有一个 JS Fiddle

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-16T08:46:35.620

试试这个例子： http: [//jsbin.com/ipaked/6](http://jsbin.com/ipaked/6) （在 Fx 和 Chrome 上测试）

相关的 CSS

```
.hexagon {
  position: relative;
  width: 124px;
  height: 100px;
  background: #d8d8d8;
}

.hexagon:after,
.hexagon:before {
  position: absolute;
  content: "";
  z-index: 1;
  top: 0;  
  width: 0px;
  background: #fff;
  border-top: 50px transparent solid; 
  border-bottom: 50px transparent solid;
}

.hexagon:before {
    left: 0;
    border-right: 30px #d8d8d8 solid; 
}
.hexagon:after {
    right: 0;
    border-left: 30px #d8d8d8 solid; 
} 
```

（调整六边形的边框宽度和大小，使其看起来像您喜欢的那样。）

* * *

作为替代方案，您还可以使用单个伪元素，您可以在其中显示黑色六边形 unicode 字符`U+2B21`，如下例所示：http: [//jsbin.com/ipaked/7](http://jsbin.com/ipaked/7)

CSS

```
.hexagon {
  position: relative;
  width: 120px;
  height: 100px;
  line-height: 100px;
  text-align: center;
}

.hexagon:before {
  position: absolute;
  content: "\2B21";
  font-size: 160px;
  z-index: 1;
  width: 100%; 
  height: 100%;
  left: 0;
  top: 0;  
} 
```

这可能是一个更好的选择（如果使用相对字体大小），因此当用户增加或减少浏览器上的基本字体大小时，六边形可以自行调整。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-03-23T18:18:28.757

我正在[使用剪辑路径](https://codepen.io/vistar/pen/bGgNMxB)：

```
.btn {
  display: inline-block;
  text-align: center;
  text-decoration: none;
  vertical-align: middle;
  user-select: none;
  padding: 0.375rem 2rem;

  --btn-raise: 1rem;
  clip-path: polygon(var(--btn-raise) 0%, calc(100% - var(--btn-raise)) 0%, 100% 50%, calc(100% - var(--btn-raise)) 100%, var(--btn-raise) 100%, 0 50%);
  background-color: #fefd64;
  text-transform: uppercase;
}
```

```
<a class="btn" href="/call">Call call</a>
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-16T17:49:09.003

试试这个 codepen 链接[http://codepen.io/bherumehta/pen/egdXLv](http://codepen.io/bherumehta/pen/egdXLv)或[http://codepen.io/bherumehta/pen/VPKRBG](http://codepen.io/bherumehta/pen/VPKRBG)

```
.hexa{
  width:300px;
  background:red;
  height:70px;
  color:#fff;
  postion:relative;
  border-top:1px solid red;
  border-bottom:1px solid red;
}

        .hexa-inner{
            height:70px;
             position:relative;
         }
                .hexa-inner{
                  height:70px;
                  position:relative;
                  }
                .hexa-inner:before{
                  content: '';
                  position: absolute;
                  top: 0;
                  left: 0;
                  height: 50%;
                  width: 50px;
                  background: red;
                  -webkit-transform: skew(-45deg, 0deg);
                  -moz-transform: skew(-45deg, 0deg);
                  -ms-transform: skew(-45deg, 0deg);
                  -o-transform: skew(-45deg, 0deg);
                  transform: skew(-45deg,0deg);
                }
                .hexa-inner:after {
                  content: '';
                  position: absolute;
                  top: 50%;
                  left: 0;
                  height: 50%;
                  width: 50px;
                  background: red;
                  -webkit-transform: skew(-135deg, 0deg);
                  -moz-transform: skew(-135deg, 0deg);
                  -ms-transform: skew(-135deg, 0deg);
                  -o-transform: skew(-135deg, 0deg);
                  transform: skew(-135deg, 0deg);
                }
                .left-arrow{
                 margin-left:-18px;
                 float:left;
                }
                .right-arrow{
                  transform:rotate(180deg);
                  float:right;
                  margin-right:-18px
                }
                .hexa p{
                  white-space:nowrap;
                  max-width:100%;
                  overflow:hidden;
                  text-overflow:ellipsis;
                } 
```

**HTML**

```
 <div class="hexa">
       <div class="hexa-inner left-arrow"> </div>
       <div class="hexa-inner right-arrow"> </div>
       <p>hexagonhexagonhexagonhexagonhexagonhexagonhexagonhexagonhexago
        xagonhexagonhexagonhexagonhexagonhexagonhexagon</p>
   </div> 
```

# spring - 在JBPM流程执行中在哪里使用bean springTaskSessionFactory？

> ID：14354089
> 
> 赞同：1
> 
> 时间：2013-01-16T08:30:48.063
> 
> 标签：spring, jpa, jbpm

[我在这里http://docs.jboss.org/drools/release/5.4.0.Final/droolsjbpm-integration-docs/html/ch.spring.html](http://docs.jboss.org/drools/release/5.4.0.Final/droolsjbpm-integration-docs/html/ch.spring.html)得到了一个使用jbpm的spring配置示例， 我已经实现了它。那里是一个名为**springTaskSessionFactory**的 bean ，我不知道这个 bean 将在哪里用于**人工任务执行**？

```
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:jbpm="http://drools.org/schema/drools-spring"
   xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
   http://drools.org/schema/drools-spring org/drools/container/spring/drools-spring-1.2.0.xsd">
  <!-- persistence & transactions-->
  <bean id="htEmf" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
<property name="persistenceUnitName" value="org.jbpm.task" />
 </bean>
  <bean id="htEm" class="org.springframework.orm.jpa.support.SharedEntityManagerBean">
<property name="entityManagerFactory" ref="htEmf"/>
</bean>
<bean id="jpaTxMgr" class="org.springframework.orm.jpa.JpaTransactionManager">
<property name="entityManagerFactory" ref="htEmf" />
<!-- this must be true if using the SharedEntityManagerBean, and false otherwise -->
<property name="nestedTransactionAllowed" value="true"/>
</bean>
<bean id="htTxMgr"     class="org.drools.container.spring.beans.persistence.HumanTaskSpringTransactionManager">
<constructor-arg ref="jpaTxMgr" />
 </bean>
<!-- human-task beans -->
 <bean id="systemEventListener" class="org.drools.SystemEventListenerFactory" factory-method="getSystemEventListener" />
  <bean id="taskService" class="org.jbpm.task.service.TaskService" >
  <property name="systemEventListener" ref="systemEventListener" />
  </bean>
 <bean id="springTaskSessionFactory"        class="org.jbpm.task.service.persistence.TaskSessionSpringFactoryImpl"
    init-method="initialize" depends-on="taskService" >
<!-- if using the SharedEntityManagerBean, make sure to enable nested transactions -->
<property name="entityManager" ref="htEm" />
<property name="transactionManager" ref="htTxMgr" />
<property name="useJTA" value="false" />
<property name="taskService" ref="taskService" />
 </bean>
</beans> 
```

# c - 为什么我在 xcode 中使用 '\a' 听不到哔哔声？

> ID：14354096
> 
> 赞同：2
> 
> 时间：2013-01-16T08:31:04.350
> 
> 标签：c, xcode

据我了解，在 printf 参数中使用 \a 假设会发出警报声：

我正在做`printf("\a");`但是得到一个颠倒的问号......有人可以告诉我为什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T08:32:47.270

据我所知，`\a`使用PC在启动时发出哔哔声的硬件扬声器等。也许Mac没有这个？

来自[http://en.wikipedia.org/wiki/Bell_character](http://en.wikipedia.org/wiki/Bell_character)：

> 现代终端仿真器通常将警告集成到桌面环境中（例如，Mac OS X 终端将播放系统警告声音），并且通常还提供无声视觉铃功能，使终端窗口短暂闪烁。

您可以尝试从终端运行 exe 并查看是否发生任何事情吗？

# php - 如何使用钩子跟踪最后的用户活动？

> ID：14354097
> 
> 赞同：1
> 
> 时间：2013-01-16T08:31:05.207
> 
> 标签：php, yii

使用 Yii MVC，我想知道用户何时仍在我的网页上，所以我需要存储用户上次活动的时间。

是否有一个钩子可以更新用户表中的时间戳字段？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T10:28:18.817

我找到了答案，在 components/Controller.php 中添加以下代码

该代码使用`afterAction`钩子，因此每次发生操作时都会触发更新。

```
 public function keepAlive() {
        if (!Yii::app()->user->isGuest) {
            User::model()->updateByPk(
                    Yii::app()->user->id, array('lastactive' => date('Y-m-d H:i:s')) //CURRENT_TIMESTAMP..this working fine
            );
        }
    }

// Runs after any action in controller
    public function afterAction($action) {
        self::keepAlive();
        parent::afterAction($action);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T09:16:43.520

您需要在 javascript 帮助下自己完成。在每个页面上放置向您的特定操作发送（ajax）请求并更新用户时间戳的javascript间隔函数。

总结一下：页面加载中的 Javascript：`ajaxUpdateActivity( userId );` Yii 操作了解您的请求并更新需要更新的内容`actionAjaxUpdateActivity()`

# input - Windows Phone 8 键盘扩展

> ID：14354100
> 
> 赞同：0
> 
> 时间：2013-01-16T08:31:35.283
> 
> 标签：input, keyboard, windows-phone-8

我记得这在 Windows Phone 7 中是不可能的，但也许有些东西已经改变了..

这是任务：我需要将格鲁吉亚键盘添加到 Windows 手机。WP8可以打开格鲁吉亚文字，但是还是没有键盘输入格鲁吉亚文字。我之前对 WP7 的解决方案是嵌入字体+自定义绘制的键盘布局。我可以以编程方式更改默认键盘布局，或者例如创建像俄语键盘这样的键盘包，虽然俄语是从微软下载的包，我需要从“第三方”网址创建这样的包？
或者我可以联系微软并自愿创建格鲁吉亚布局和建议列表，但我不知道如何也不认为他们会同意在次要操作系统更新中添加新的语言输入法。

**PS**确定我需要能够在客户端电话上没有开发人员更新的情况下进行更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T19:11:35.807

与 WP7 相比，这里没有任何变化。WP8 不支持 3rd 方键盘扩展。从消费者的角度来看，WP8 在改进全球化支持方面取得了长足的进步，我相信您的俄罗斯用户可以使用他们的默认俄语键盘。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T16:08:24.803

0x49D1，考虑使用[THIS](http://www.silverlightshow.net/items/Windows-Phone-7-Creating-Custom-Keyboard.aspx)，并进行自定义。我正在一个使用自定义键盘的项目中工作。通过一些额外的代码和自定义，我制作了一个自定义软键盘，您可以在下面的屏幕截图中看到。现在，我的软键盘工作正常，但还有一些问题需要解决。

![在此处输入图像描述](../Images/564108bc304d6225d15fa4cacef08ba4.png)

我的自定义 WP 键盘问题是：

*   没有插入光标；
*   我屏幕中的 TextBox 是一个 AutoCompleteBox，当它打开完成时，我的键盘失去焦点，所以我需要额外的点击（这是我现在最大的问题）
*   当我在完成中选择一个项目时，WP本机键盘尝试向上滑动

# android - VideoView 内联/全屏模式切换

> ID：14354101
> 
> 赞同：3
> 
> 时间：2013-01-16T08:31:37.670
> 
> 标签：android, media-player, android-videoview

我正在开发一款 android 中的自定义视频播放器。我正在使用 VideoView 播放视频。最初，我的 VideoView 将具有一定的大小（可以说 size = (width , height) = (400, 300)）。我的自定义视频视图的控制按钮之一是“展开/折叠”。单击“展开/折叠”按钮后，如果当前 VideoView 大小为内联，我想将 VideoView 大小设置为全屏（表示设备的全屏大小），反之亦然（从全屏到内联）。

有人知道完成上述任务的正确方法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-16T08:39:41.100

首先，你有勇气问一个 Android 问题并有一个 iOS 标志；）（开玩笑）

但是，我认为你可以使用这个：

```
 DisplayMetrics metrics = new DisplayMetrics(); getWindowManager().getDefaultDisplay().getMetrics(metrics);
    android.widget.LinearLayout.LayoutParams params = (android.widget.LinearLayout.LayoutParams) videoView.getLayoutParams();
    params.width =  metrics.widthPixels;
    params.height = metrics.heightPixels;
    params.leftMargin = 0;
    videoView.setLayoutParams(params); 
```

并将其重新设置：

```
 DisplayMetrics metrics = new DisplayMetrics(); getWindowManager().getDefaultDisplay().getMetrics(metrics);
    android.widget.LinearLayout.LayoutParams params = (android.widget.LinearLayout.LayoutParams) videoView.getLayoutParams();
    params.width =  (int) (400*metrics.density);
    params.height = (int) (300*metrics.density);
    params.leftMargin = 30;
    videoView.setLayoutParams(params); 
```

我假设您知道如何制作`OnClickListener`.

我在这里得到了信息：[Android应用程序中的VideoView全屏](https://stackoverflow.com/questions/11310764/videoview-full-screen-in-android-application)

**Edit1**
我可以很快想到两件事。
1\. 添加这个：`getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN);`
2\. 或者试试这个：

```
YourButton.setVisibility(View.GONE); 
```

或者

```
YourButton.setVisibility(View.INVISIBLE); 
```

# php - 从 vb.net 应用程序向站点发送密钥

> ID：14354103
> 
> 赞同：0
> 
> 时间：2013-01-16T08:31:47.450
> 
> 标签：php, vb.net, security, key

我有以下情况：

我有一个加载 URL 的应用程序。我必须验证 URL 是否已由应用程序而不是浏览器加载...它必须是我的应用程序，而不仅仅是任何应用程序..（因此不能选择 php 页面中的 browsercheck）这样做我正在考虑这样的事情：应用程序加载一个网址，接收一个密钥，处理该密钥并将其发送回处理。php 页面检查是否已正确处理，如果已正确处理，则正常。

问题是：我的 vb.net 应用程序可以被反编译，几分钟之内你就知道如何验证密钥。我需要一些安全的东西。关于如何做到这一点的任何提示？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:24:26.050

您还应该通过 SSL/TLS 执行此操作，因为可以拦截流量。而且，在这种情况下没有任何 100% 的解决方案。您可以混淆代码，不要直接使用密钥，而是从部分构建它，屏蔽它，等等。但这将需要更多时间来反编译。

# python - 从网络驱动器上的目录中检索内容（Windows）

> ID：14354113
> 
> 赞同：15
> 
> 时间：2013-01-16T08:32:34.360
> 
> 标签：python, python-3.x

我在 Windows 上显示来自网络驱动器的文件时遇到问题。

```
path = "\\\\nexus\\File Server\\Technical\\MyDrive\\Software\\Releases\\%s\\%s\\" %(release, module) 
```

`\\nexus\`网络驱动器在哪里。

我的主要问题是用户输入了正确的变量，我无法显示所请求目录的内容（“模块”的内容）。

## 我尝试过的事情

1.  `os.listdir(path)`
    上面这行的问题是它返回了一个 Windows 错误 [123]，即找不到目录错误。这是因为 listdir() 似乎将所有反斜杠加倍，导致：

    ```
     "\\\\\\\\nexus\\File Server\\\\Technical\\\\MyDrive\\\\Software\\\\Releases\\\\release\\\\module\\\\" 
    ```

2.  `print(glob.glob(path))`
    我真的不知道它是如何工作的：P 但它似乎只是显示提供的目录而不是结束目录的内容

    ```
     \\nexus\File Server\Technical\MyDrive\Software\Releases\release\module\" 
    ```

我见过一个`os.walk`但是我不确定它是如何工作的，因为它如何定义基本目录/目录以及路径的其余部分是什么

额外说明：“模块”的内容将始终是一个 zip 文件，该目录通常最多包含五个 zip 文件。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-16T09:00:06.020

刚刚在我的 XP PC、Python 2.7、SMB 共享上测试过`\\myshare`

```
os.listdir('\\\\myshare') # Fails with "WindowsError: [Error 53] The network path was not found"

os.listdir('\\\\myshare/folder') # Succeeds 
```

我认为某些混淆可能是由显示`repr()`路径的 WindowsError 引起的，而不是实际路径 -

```
>>> repr(path)
"'\\\\myshare'"
>>> str(path)
'\\myshare' 
```

如果这是 Python 3 和 unicode 问题，我建议先尝试修复字符串：

```
path = "\\\\myshare\folder"
path = bytes(path, "utf-8").decode("unicode_escape")
print os.listdir(path) 
```

（不幸的是，由于我没有安装 Python 3，因此我无法对此进行测试，但请让我知道它是否有效，我将编辑我的答案）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-21T06:52:58.657

这个对我有用：

```
os.listdir('\\\\server\folder\subfolder\etc') 
```

（在 Win7 64b 上使用 Python 2.7 32b）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-27T07:15:01.540

此问题的解决方法如下：

```
os.listdir('\\networkshares\\folder1\\folder2\\folder3') 
```

这意味着您必须使用双斜杠而不是单斜杠。

# ios - 同时调用多个 ViewController 实例会导致应用在 AppDelegate 中崩溃

> ID：14354115
> 
> 赞同：1
> 
> 时间：2013-01-16T08:32:38.173
> 
> 标签：ios, reachability, appdelegate, xcode-instruments, memory-management

**我在做什么 ？**

1.  我目前正在为我的应用程序在没有互联网的情况下进行防崩溃。
2.  我已经安装了**Little snitch**来暂时禁用网络访问。
3.  发出请求并且如果响应为零，则触发“可达性测试”。下面代码中的 ReachabilityController 只是 Apple 提供的 Reachability 类的包装器。

**此代码在其他地方有效吗？**

该应用程序充满了在线请求，我在其他视图控制器中从未遇到过这个问题。如果互联网不可用，它会显示一条描述状态的漂亮小消息。

**错误发生在哪里**

应用代理

**错误**

*** * * -[ReachabilityController respondsToSelector:]：消息发送到已释放实例 0x12a71320**

ReachabilityController 显示一个描述错误状态的 UIAlertView。警报视图出现大约一秒钟，然后应用程序崩溃。

**调试和仪器？**

**NSLog(@"%p", 可达性)** ; 记录与错误中相同的地址。**0x12a71320**。不用说，这个地址在每次运行时都会有所不同。

Instruments 中的 Zombies 模板也在 Reachability Controller 中指出。

***下图中“责任”**部分的 4 行白色补丁包含应用程序的名称。*

![僵尸对象](../Images/859f90c098030eafc5c277fac2a2a563.png)

**我期待什么？**

老实说，我不知道这种行为背后的原因。我相信它必须非常基本。

**与现在的本地声明相比，我是否必须声明一个属性以保留“ReachabilityController”？**

**代码**

发生崩溃的片段。

```
dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0ul);

dispatch_async(queue, ^{
    NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"http://myUrl"]];
    NSData *authResponse = [NSData dataWithContentsOfURL:url];

    dispatch_sync(dispatch_get_main_queue(), ^{
        if(authResponse == nil) {
            ReachabilityController *reachability = [[ReachabilityController alloc] init];
            NSLog(@"%p", reachability);
            [reachability checkReachability];
            NSLog(@"%p", reachability);
            return; // app crashes round here
        } 
} 
```

**可达性控制器.h**

```
#import <UIKit/UIKit.h>
#import "Reachability.h"

@interface ReachabilityController : UIViewController
  -(void) checkReachability ;
@end 
```

**可达性控制器.m**

```
#import "ReachabilityController.h"

@interface ReachabilityController ()

@end

@implementation ReachabilityController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
   self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
   if (self) {
     // Custom initialization
   }
   return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
// Do any additional setup after loading the view.
}

- (void)viewDidUnload
{
    [super viewDidUnload];

}

-(void) checkReachability {
    Reachability* internetAvailable = [Reachability reachabilityForInternetConnection];
    NetworkStatus netStatus = [internetAvailable currentReachabilityStatus];
    NSString *messageText;
    if (netStatus == NotReachable)
    {
        messageText = [NSString stringWithFormat:@"iRestaurant has determined that internet access is not available at the moment"];

    } else {
        NSDictionary *infoDict = [[NSBundle mainBundle] infoDictionary];
        NSString *ipAdress = [infoDict objectForKey:@"LookUpIpAdress"];
        NSString *host = [NSString stringWithFormat:@"%@/iRestaurant", ipAdress];

        Reachability *netReach = [Reachability reachabilityWithHostName:host];
        NetworkStatus hostStatus = [netReach currentReachabilityStatus];
        if (hostStatus == NotReachable)
        {
            messageText = [NSString stringWithFormat:@"Sorry, for your inconvenience. iRestaurant server is currently unreachable. The iRestaurant server may be down for maintenance. Please check back after 5 mins"];

        } else {
            messageText = [NSString stringWithFormat:@"Sorry, for your inconvenience. This service is temporarily unavailable. We are working very hard to get it back on track."];
        }

    }

    UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"iRestaurant"
                                                    message:messageText
                                                   delegate:self
                                          cancelButtonTitle:@"Done"
                                          otherButtonTitles:nil];
    [alertView show];

}

@end 
```

**更新：**

*更改问题的标题*

只是最近的一个发现。有 3 个实例从在线服务器请求数据。由于无法上网，这三种方法几乎同时要求进行可达性测试。这三种方法都有与上面类似的方法声明。这三种方法都使用如下所示的“本地声明”来触发测试。

```
ReachabilityController *reachability = [ReachabilityController alloc] init];
[reachability checkReachability]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:07:18.357

您将 UIAlertView 的委托设置为 self。除非您有办法在 UIAlertView 发布之前保留您的 ReachabilityController，否则这是一个悬空引用。

您是否需要 UIAlertView 与您的 ReachabilityController 进行交互？将 nil 作为委托传递可能是最简单的。

# sql - SAS proc sql连接和连接

> ID：14354116
> 
> 赞同：4
> 
> 时间：2013-01-16T08:32:45.083
> 
> 标签：sql, sas, proc-sql, 4gl

我正在尝试在 SAS 结构中为金融系统数据构建数据模型。这个想法是将ID作为字符表达式保存在表中，然后从另一个表中为它们`proc sql`构建一个 -应该以表达式开头。应该是这样的：`INNER JOIN``LIKE``IDs``'ID%'``proc sql`

```
proc sql;
SELECT I.* 
  FORM tableWithIDs X INNER JOIN tableWithData I 
    ON I.ID LIKE X.ID||'%'
;
quit; 
```

不幸的是，它应该是这样的：`... LIKE 'X.ID%'` 有没有办法在 SAS 代码中构建这样的表达式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T08:55:45.133

如果保存 的值`X.ID||'%'`，您可能会发现它看起来像`1 %`（对于 id=1）。尝试消除多余的空白，如下所示`compress`：`X.ID||'%'`

```
LIKE compress(X.ID || '%') 
```

我假设您的 ID 中没有任何空白字符。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-16T17:49:40.207

假设您使用的是版本 9，SAS 解决方案是使用 CATS 函数而不是 || 级联：

```
like cats(x.ID,'%') 
```

您还有 EQT 运算符，这意味着本质上是“开始于”（截断为相等长度，然后进行比较）：

```
on I.ID eqt x.ID 
```

仅当 x.ID 的长度始终与 I.ID 相同或更长时才有效，因为它将截断更长的那个。如果 I.ID 是较长的字符串，比如 'Member'，而 x.ID 是 'Mem'，则比较将是有效的，而 LIKE 不会认为它是有效的。

# sql-server - 可以在数据库中为 datetime 数据类型设置 NULL 值吗？

> ID：14354118
> 
> 赞同：1
> 
> 时间：2013-01-16T08:32:50.247
> 
> 标签：sql-server, database, datetime, null

我有这个表设备活动表

```
CREATE TABLE EqpActivityTBL
(
    EqpAct_ID              INT PRIMARY KEY IDENTITY(1, 1),
    EqpAct_BorrowDateTime  DATETIME,
    EqpAct_ReturnDateTime  DATETIME,
    EqpAct_Room            VARCHAR(50),
    SysUser_ID             INT FOREIGN KEY REFERENCES SysUserTBL,
    DeptMember_ID          INT FOREIGN KEY REFERENCES DeptMemberTBL,
    Eqp_ID                 INT FOREIGN KEY REFERENCES EqpTBL,
    EqpAct_Status          VARCHAR(50)
) 
```

如您所见，我有一个 EqpAct_ReturnDate 列。一旦设备被退回，它将具有日期值。但是如果它没有被归还或者可能被破坏或者它可能发生了一些不好的事情（也许将它发送到黑洞），我可以在该列中插入一个 NULL 值吗？无论如何，它有一个日期时间数据类型。我试图在这里表明某些东西未能返回。我正在尽力避免其他数据类型的 NULL 值。

底线是：在 datetime 上有一个 NULL 值可以吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T08:38:36.647

是的，这很好用。空值比使用某些魔术日期值更好地表示缺失值。

使用可以处理 null 的字段的性能可能会稍低，因此对于不应为 null 的字段，您应该禁止它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T08:45:48.723

有空值很好，但它会增加代码开销（用于检查空值）......或者，您可以保留一个默认值，如 01-01-1900。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T11:23:09.177

答案是肯定的，您的日期时间格式可以允许为空

只是您需要编写一些额外的代码来检查 null（以避免 null 引用错误）。相反，您可以将其保留为默认值，就像它需要像 19 : 00 : 00 （或其他任何东西）这样的东西，这样您就知道它是默认值。这里不需要解析。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-23T17:14:51.977

我问：DATETIME 是一个 8 字节的数据类型。您可以使该列可为空，但它是固定宽度的数据类型。不是吗？
NULL 值仍将占用 8 个字节。

# jquery - 使用 jquery 时偶尔出现 ajax 响应错误 { readyState=0, status=0, statusText="error"}

> ID：14354121
> 
> 赞同：12
> 
> 时间：2013-01-16T08:33:05.393
> 
> 标签：jquery, ajax, coldfusion

我遇到了使用 jquery（和冷融合服务器端）的 AJAX 响应的问题。有时它有效，有时则无效。当我测试直接调用它的服务器端组件时 - 它总是有效，所以我猜问题出在 ajax 响应上。我直接从服务器获取 serverurl - 所以它不应该是跨域问题。我只是显示和隐藏 div 标签，所以它不应该是在处理 ajax 响应之前重新定位 url。我为此拔了很多头发。

addTask 方法的代码：

```
function addTask(){
    var priority = $('#ff-add-task-priority').length > 0 ? $('#ff-add-task-priority').val() : 0;

    $.ajax({
        url: settings.server+'/c/Tasks.cfc?method=addTask',
        data: {
            userid: settings.userid, 
            taskname: $('#ff-add-task-name').val(),
            tasknote: $('#ff-add-task-note').val(),
            completed: $('#ff-add-task-completed').val(),
            priority: priority,
        },
        type: 'POST',
        dataType: 'json',
        success: function(response) {
            var output = addRow(response, $('#ff-add-task-name').val(), 0, 0);
            $('#data-list-tasks').append(output);

            $('#main').children().addClass('hide');
            $('#section-list-tasks').removeClass('hide');
            resetForm($('#add-task-form'));
            //route('#section-list-tasks');
        },
        error: function(ErrorMsg) {
            console.log('Error', ErrorMsg);
        }
    });
} 
```

Firebug 输出显示 AJAX 调用有时会工作，有时会失败。：

```
POST http://dev.wedoolist.com/c/Tasks.cfc?method=addTask jquery.min.js (linje 2) Error Object { readyState=0, status=0, statusText="error"} #secti...t-tasks (linje 124)
POST http://dev.wedoolist.com/c/Tasks.cfc?method=getTasks 200 OK 152ms jquery.min.js (linje 2)
POST http://dev.wedoolist.com/c/Tasks.cfc?method=addTask 200 OK 146ms jquery.min.js (linje 2)
POST http://dev.wedoolist.com/c/Tasks.cfc?method=addTask 200 OK 133ms jquery.min.js (linje 2)
POST http://dev.wedoolist.com/c/Tasks.cfc?method=addTask 200 OK 133ms jquery.min.js (linje 2)
POST http://dev.wedoolist.com/c/Tasks.cfc?method=addTask 200 OK 131ms jquery.min.js (linje 2)
POST http://dev.wedoolist.com/c/Tasks.cfc?method=addTask jquery.min.js (linje 2) Error Object { readyState=0, status=0, statusText="error"} 
```

**更新：**

```
Request-headere
Accept  application/json, text/javascript, */*; q=0.01
Accept-Encoding gzip, deflate
Accept-Language da,en-us;q=0.7,en;q=0.3
Content-Length  59
Content-Type    application/x-www-form-urlencoded; charset=UTF-8
Cookie  CFID=198de696-2168-4911-8639-79ea944c9975; CFTOKEN=0;  JSESSIONID=B520084E7DDFB504BC87E200449C3DA7
Host    dev.wedoolist.com
Referer http://dev.wedoolist.com/index.cfm?add-task-completed-switch=0&ff-add-task-priority=0
User-Agent  Mozilla/5.0 (Windows NT 5.1; rv:18.0) Gecko/20100101 Firefox/18.0
X-Requested-With    XMLHttpRequest 
```

**更新：**

使用提琴手我得到这个错误：

```
HTTP Error 411\. The request must be chunked or have a content length. 
```

任何帮助深表感谢。

谢谢，

彼得

* * *

## 回答 #1

> 赞同：-5
> 
> 时间：2013-08-25T05:18:31.130

我认为您需要在 data 参数中使用引号，如下所示：

```
data: { 'userid': settings.userid, 
        'taskname': $('#ff-add-task-name').val(),
        'tasknote': $('#ff-add-task-note').val(),
        'completed': $('#ff-add-task-completed').val(),
        'priority': priority,
      }, 
```

看看是否有帮助。

# java - 字符串的正则表达式模式不受字符限制

> ID：14354125
> 
> 赞同：1
> 
> 时间：2013-01-16T08:33:21.507
> 
> 标签：java, regex, matcher

对于不受字符限制的字符串，我需要 java 模式。

我有一个字符串（如下所述），其中一些大括号由单引号和其他大括号不是。我想用另一个字符串替换不受单引号限制的大括号。

原始字符串：

```
this is single-quoted curly '{'something'}' and this is {not} end 
```

需要转换为

```
this is single-quoted curly '{'something'}' and this is <<not>> end 
```

请注意，未用单引号包围的大括号 { } 已替换为 << >>。

但是，我的代码打印（字符被吃掉）文本为

```
this is single-quoted curly '{'something'}' and this is<<no>> end 
```

当我使用模式时

```
[^']([{}]) 
```

我的代码是

```
String regex = "[^']([{}])";
Pattern pattern = Pattern.compile(regex);
Matcher matcher = pattern.matcher(str);

while (matcher.find()) {
    if ( "{".equals(matcher.group(1)) ) {
        matcher.appendReplacement(strBuffer, "&lt;&lt;");
    } else if ( "}".equals(matcher.group(1))) {
        matcher.appendReplacement(strBuffer, "&gt;&gt;");
    }
}
matcher.appendTail(strBuffer); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T08:53:34.950

这是零宽度断言的明确用例。您需要的正则表达式不是很复杂：

```
String 
   input = "this is single-quoted curly '{'something'}' and this is {not} end",
  output = "this is single-quoted curly '{'something'}' and this is <<not>> end";
System.out.println(input.replaceAll("(?<!')\\{(.*?)\\}(?!')", "<<$1>>")
                        .equals(output)); 
```

印刷

```
true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T08:36:46.623

使用Java文档[的特殊构造部分](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#special)中的否定前瞻/后瞻构造。[`Pattern`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T08:51:41.870

试试这个 ：

```
String regex = "([^'])([{}])";
    Pattern pattern = Pattern.compile(regex);
    Matcher matcher = pattern.matcher(str);

    while (matcher.find()) {
        if ("{".equals(matcher.group(2))) {
            matcher.appendReplacement(strBuffer, matcher.group(1) + "<<");
        } else if ("}".equals(matcher.group(2))) {
            matcher.appendReplacement(strBuffer,matcher.group(1) + ">>");
        }
    }
    matcher.appendTail(strBuffer); 
```

# javascript - 使编辑按钮功能正常工作

> ID：14354127
> 
> 赞同：0
> 
> 时间：2013-01-16T08:33:30.047
> 
> 标签：javascript

我有以下代码：

```
function appendText(){

        var text = document.getElementById('usertext').value;

            if ( document.getElementById('usertext').value ){

                var div = document.createElement('div');
                div.className = 'divex';

                var li = document.createElement('li');
                li.setAttribute('id', 'list');  
                div.appendChild(li);

                var texty = document.createTextNode(text);
                var bigdiv = document.getElementById('addedText');

                var editbutton = document.createElement('BUTTON');
                editbutton.setAttribute('id', 'button_click');
                var buttontext = document.createTextNode('Edit');
                editbutton.appendChild(buttontext); 

                bigdiv.appendChild(li).appendChild(texty);
                bigdiv.appendChild(li).appendChild(editbutton);

                editbutton.onclick = makeAreaEditable;
                var makeAreaEditable = function(){

                            var textareaEdit = document.createElement('textarea');
                            textareaEdit.onclick = myFunction;
                            textareaEdit.customProperty = li.value;

                            function myFunction(e){
                                var objLi = e.currentTarget;
                                objLi.value = objLi.customProperty;
                                document.getElementByID("button_click").value = "ok";
                            };
                        };

                document.getElementById('usertext').value = "";   
        }        
}; 
```

以及以下html：

```
 <textarea id="usertext"></textarea>
    <button onClick="appendText()">Add text </button>

    <div id="addedText" style="float:left">
    </div> 
```

我希望我的 makeAreaEditable 函数像这样工作：当我单击编辑按钮时，一个 textarea 会出现，其中包含 li.value。所以我可以编辑文本（按钮也会从编辑变为确定）。我想用纯javascript

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:40:17.630

如果添加 2 个元素（单击 addtext 2 次）或更多，它们都具有相同的 id (button_clic)。所以不要认为代码

```
document.getElementByID("button_click").value 
```

将工作。

第二，您正在创建一个 div 元素 var div 并将 li 元素添加到该 div。但是之后你什么都不做，因为你将 li 直接分配给了 bigdiv

关于我最后的评论，你必须创建你的函数，然后将它们添加到元素中。现在你反过来做，你将一个函数分配给一个元素，然后定义这个函数。而且您必须将 textareaEdit 添加到元素。否则它永远不会显示在页面上。

你的代码应该是这样的

```
function appendText(){

        var text = document.getElementById('usertext').value;

            if ( document.getElementById('usertext').value ){

                var div = document.createElement('div');
                div.className = 'divex';

                var li = document.createElement('li');
                li.setAttribute('id', 'list');
                div.appendChild(li);

                var texty = document.createTextNode(text);
                var bigdiv = document.getElementById('addedText');

                var editbutton = document.createElement('BUTTON');
                editbutton.setAttribute('id', 'button_click');
                var buttontext = document.createTextNode('Edit');
                editbutton.appendChild(buttontext);

                var makeAreaEditable = function(){
                            function myFunction(e){
                                var objLi = e.currentTarget;
                                objLi.value = objLi.customProperty;
                                document.getElementByID("button_click").value = "ok";
                            };
                            var textareaEdit = document.createElement('textarea');
                            textareaEdit.customProperty = li.value;
                            textareaEdit.onclick = myFunction;
                            bigdiv.appendChild(li).appendChild(textareaEdit);
                        };
                editbutton.onclick = makeAreaEditable;
                bigdiv.appendChild(li).appendChild(texty);
                bigdiv.appendChild(li).appendChild(editbutton);
                document.getElementById('usertext').value = "";
        }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T08:49:52.000

好吧，有几件事...

首先，我改变了这一行：

```
if ( document.getElementById('usertext').value ){ 
```

对此：

```
if ( text ).value ){ 
```

我已将 ID 添加到按钮：

```
<button onClick="appendText()" id="button_click">Add text </button> 
```

并将这条线推低：

```
 editbutton.onclick = makeAreaEditable; 
```

你可以在这里找到可行的 jsfiddle： [JSFIDDLE](http://jsfiddle.net/Juwmm/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T11:03:40.987

更新代码

函数追加文本（）{

```
 var text = document.getElementById('usertext').value;

            if ( text ){

                var li = document.createElement('li');
                li.setAttribute('id', 'list');
                li.innerHTML=text;
                li.customProperty = text;
                var editbutton = document.createElement('BUTTON');
                editbutton.setAttribute('id', 'button_click');
                editbutton.setAttribute('value','Edit');
                editbutton.innerHTML='Edit';

                var makeAreaEditable = function(){
                            function myFunction(e){
                                var objLi = e.currentTarget;
                                objLi.value = objLi.customProperty;
                                document.getElementById("button_click").value = "ok";
                                document.getElementById("button_click").innerHTML='ok';
                            };
                            var textareaEdit = document.createElement('textarea');
                            textareaEdit.customProperty = li.customProperty;
                            textareaEdit.onclick = myFunction;
                            li.appendChild(textareaEdit);
                        };
                editbutton.onclick = makeAreaEditable;

                var bigdiv = document.getElementById('addedText');
                li.appendChild(editbutton);
                bigdiv.appendChild(li);
                document.getElementById('usertext').value = "";
        }
}; 
```

# air-native-extension - 在空中原生扩展的 FREFunction 中启动活动

> ID：14354128
> 
> 赞同：0
> 
> 时间：2013-01-16T08:33:31.923
> 
> 标签：air-native-extension

在我的原生扩展的原生java代码中，我需要跳转到一个特定的页面，我尝试的是在FREFunction对象的调用函数中启动一个新的Activity，我的代码是这样的：

```
`ComponentName comp = new ComponentName(arg0.getActivity() ,SecondActivity.class);
Intent intent = new Intent();
intent.setComponent(comp);
arg0.getActivity().startActivity(intent);`

public class SecondActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.second);
                EditText show = (EditText) findViewById(R.id.show);
                ComponentName componentName = getIntent().getComponent();
    show.setText("组件包名");
}

} 
```

从 ddms 的日志中，我确定 SecondActivity 类已被执行，但在 setContentView(R.layout.second) 处失败；那么我的本机代码有什么问题，我该如何处理？任何机构都可以帮助我或给我同样的建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T04:47:34.367

遗憾的是，您不能使用 R.* 简写从 ANE 中访问资源 ID。

我写了一个可能对你有帮助的小助手类/函数：

[http://labs.distriqt.com/post/1245](http://labs.distriqt.com/post/1245)

它基本上在资源包中搜索您的资源。

如果您有权访问您的 FREContext 实例，您还可以使用 getResourceId 函数，有关更多信息，请参阅以下内容：

[http://help.adobe.com/en_US/air/extensions/WS39e706a46ad531be-fd70de2132a8f3874e-8000.html#WS39e706a46ad531be-fd70de2132a8f3874e-7fff](http://help.adobe.com/en_US/air/extensions/WS39e706a46ad531be-fd70de2132a8f3874e-8000.html#WS39e706a46ad531be-fd70de2132a8f3874e-7fff)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-30T04:03:41.773

在 startActivity 之前使用 getResourceID

```
int layoutID;               

Intent i = new Intent(arg0.getActivity(), SecondActivity.class);

try {
      layoutID = arg0.getResourceId("layout.second");
     } catch (Exception e) {
         System.out.printf("getResourceID() failed with error:\n\"%s\"\n",e.toString());
         Toast.makeText(arg0.getActivity(), "getResourceID() failed" + e.toString(), Toast.LENGTH_SHORT).show();
         return null;
      }

System.out.printf( "layout ID: %d\n", layoutID);
Toast.makeText(arg0.getActivity(), "success: layout ID is " + String.valueOf(layoutID),         Toast.LENGTH_SHORT).show();

i.putExtra("layoutID", layoutID); 
```

然后稍后您可以使用以下命令在 onCreate 检索布局 ID：

```
int layoutID = getIntent().getIntExtra("layoutID", -1);
setContentView(layoutID); 
```

# .net - Environment.TickCount 与 DateTime.Now 的经过时间不匹配

> ID：14354129
> 
> 赞同：1
> 
> 时间：2013-01-16T08:33:36.080
> 
> 标签：.net, windows, time

我有一个不错的循环，它会休眠大约一分钟并执行以下代码：（或多或少是伪的，谈论 C#，.NET Framework 4.0 Full Profile）

```
LocalSystemTimeStamp = DateTimeOffset.Now;
StartupTickCount = Environment.TickCount; 
```

我也有一个检查方法来验证测量的数字：

```
TimeSpan interval = current.LocalSystemTimeStamp - old.LocalSystemTimeStamp;
int projectedStartupTickCount = (int)(old.StartupTickCount+ interval.TotalMilliseconds);
if (Math.Abs(projectedStartupTickCount-current.StartupTickCount)>100)
{
   // log the mismatch
} 
```

因此，通常 Environment.TickCount 和 Clock 应该以相似的时间尺度前进，并且projectedStartupTickCount 和测量的tickcount 之间的差异应该匹配。

但是，有时这些不匹配几秒钟（在我的情况下为 2 到 6 秒）。这在系统启动时很常见，但即使在系统启动并在某些（随机？？）间隔后运行时也会发生。不知何故，我认为当系统/ cpu 负载过重时，这些总是不同的。

有人可以解释这种行为吗？（甚至指向匹配的文档？）

# java - 我们如何在 Swing 应用程序中使用 java 实现 .xml 文件？

> ID：14354131
> 
> 赞同：1
> 
> 时间：2013-01-16T08:33:44.693
> 
> 标签：java, html, xml, swing

我在一个swing应用程序中工作。有一个可扩展的树视图，当我们右键单击它时，我们可以选择选项。如果我从中选择操作，我会弹出一个窗口，可以从下拉选项中选择适当的操作。

现在我试图在我的整个项目中搜索下拉选项是用源代码编写的，我只在 .html 和 .xml 文件中找到它。在 .xml 文件中是这样的..

在另一个 .xml 文件中，它的扩展树视图是这样编写的。

```
<indexitem text="expandable tree view, about" target="d0e60"/>
<indexitem text="expandable tree view, actions" target="d0e91"/> 
```

这些是如何实施的？实际上，我对这些 .java、.html、.xml 文件如何交互以产生这种摆动应用程序一无所知？提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T08:46:44.870

[`XMLTree`](http://naveedmurtuza.blogspot.com/2010/10/display-xml-in-jtree-with-dnd-support.html)[，这里](https://stackoverflow.com/a/11875615/230513)提到的，是一个从文件中读取节点的例子`xml.xml`。

# windows-runtime - WinRT 批量发送电子邮件

> ID：14354142
> 
> 赞同：0
> 
> 时间：2013-01-16T08:34:41.280
> 
> 标签：windows-runtime

我正在尝试使用在 App Store 应用程序中发送一组电子邮件

```
var mail = new Uri("mailto:test@somedomain.com"); 
await Windows.System.Launcher.LaunchUriAsync(mail); 
```

电子邮件客户端启动，但仅显示最后一封电子邮件。我真的需要将电子邮件“排队”给客户。这可能吗？

有人建议使用共享合同，但我想我可能必须提示用户共享每封电子邮件？

注意：我正在向多个收件人发送多封电子邮件，而不是向多个收件人发送电子邮件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T19:04:09.067

如果您想从 Windows 应用商店应用程序发送一批电子邮件，最好的办法是为此目的创建一个 Web 服务，并从您的应用程序中调用它，其中包含创建这些电子邮件所需的所有数据。

您可以通过多种方式直接从您的用户设备发送电子邮件，但它们都有缺点，除非这些是用户希望以交互方式发送的一次性电子邮件：

*   建议的方法是使用共享合同，但在这种情况下，用户必须自己选择收件人，而您将不知道他是否实际发送了电子邮件。甚至更多：用户可以选择不同的分享目标，例如发布推文而不是发送电子邮件。你没有控制权。

*   您可以在尝试时启动`mailto`uri，但这很大程度上取决于用户为此协议选择的默认应用程序。它可能会打开邮件客户端，可能会打开浏览器，或者根本无法工作。当然，您仍然不知道用户是否真的会发送电子邮件。同样，您无法控制。

*   第三种选择是直接从您的应用程序以编程方式发送电子邮件，无需用户干预。没有故意提供的 API。即使您自己实现协议，您仍然需要用户设置 SMTP 设置。强烈建议不要这样做，它可能会阻止您的应用通过认证。

# stata - 在 Stata 中运行 ANOVA 的调整预测

> ID：14354143
> 
> 赞同：0
> 
> 时间：2013-01-16T08:35:07.607
> 
> 标签：stata, anova

我有一个结果变量`x`和三个解释变量`a, b, c`，它们是分类变量。在我的示例`a`中，有 8 个级别、`b`4 个级别和`c`35 个级别，但并非三个变量的所有组合都有观察值（这可能不重要）。

如果我在 Stata 中运行以下加法方差分析模型

```
anova x a b c
adjust, by(a b) gen(y) 
```

然后我获得由变量和`x`调整的变量的预测。调整命令在结果窗口中输出下表，并且它还生成一个带有调整预测的变量。`a``b``y`

* * *

```
 |                 b                 
    a |       2        4        8       16
----------+-----------------------------------
   50 | .016655  .018487                  
   75 | .008286  .011237                  
  100 | .005937  .006677  .012467         
  150 | .001905  .004038  .009454         
  200 | .001774  .003107  .007592  .010081
  400 |          .004982  .006853  .009342
  800 |                   .002126   .00521
 1000 |                   .002732  .005221
----------------------------------------------
 Key:  Linear Prediction 
```

我的问题是变量对于and`y`的每个组合都有一个值，而上表只有 and 的每个组合的值。如何保存表格中的结果，以便可以使用这些结果？表中的值与表中的值有什么联系？`a, b``c``a``b``y`

提前致谢。

**更新**：我发现这个`help adjust`：

> 估计命令中使用但未包含在 by() 变量列表或调整变量列表中的变量将保留其当前值，通过观察进行观察。这里 adjust 显示平均估计预测（或相应的概率或指数预测），用 by() 选项中的变量定义的每个组内替换这些未指定变量的平均值。

我的数据也是如此。例如 if`a=75`和`b=2`, then`c`取值 12,13,14,15,16。`y`对应的值`c=14`（即平均值）正是表中显示的值。但是，如果这些值的平均值不是它所采用的值怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:05:17.580

`adjust`这是对 Stefan Hansen 对and的评论的回复`margins`。

一般来说，没有；但一切都取决于模型以及是否存在除命名之外的协变量。但考虑结果

```
sysuse auto, clear 
anova mpg foreign rep78
adjust, by(foreign rep78)
margins foreign#rep78 
```

这里的结果是一致的。

我不精通`margins`基本用途，因此任何更复杂的问题都需要由其他人处理。

# php - MySQL如何检查字段中的值是整数还是文本

> ID：14354144
> 
> 赞同：0
> 
> 时间：2013-01-16T08:35:19.120
> 
> 标签：php, mysql, text, integer

请在我的数据库中有一个 type 字段`text`，但它可能包含一些`integer`值。

当我从这个字段中选择数据时，我应该区分是整数还是文本（只是为了处理像 < 或 > 这样的 mysql 操作）所以我尝试过：

```
$clause = "";
if(is_int($_GET['f']))
   $clause = " AND myValue < ".$_GET['f']."  ";
else
   $clause = " AND myValue = '".$_GET['f']."'  ";

$ds->query("SELECT * FROM myTable WHERE id = 1 ".$clause); 
```

请注意**报价**，以防它不是整数。

但这不起作用，我认为这很正常，因为该字段具有 type `text`。

请您有任何解决此问题的方法。提前致谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T08:43:11.287

类型列始终将`text`其值视为文本（字符串），因此无论存储什么值，都需要将其括在`'`. MySQL 可以将数字作为字符串进行比较。

此外，`is_int`不适合检查`$_GET`值，因为它们被视为字符串。改为使用`is_numeric`。

但是请注意对您问题的评论，如果您需要在数据库中单独存储整数和/或字符串，则重新设计更合适。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T08:46:20.487

试试这个：

```
 $clause = "";
        if(is_numeric($_GET['f']))
           $clause = " AND myValue < ".$_GET['f']."  ";
        else
           $clause = " AND myValue = '".$_GET['f']."'  ";

        $ds->query("SELECT * FROM myTable WHERE id = 1 ".$clause); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T08:58:39.450

也许是您的解决方案。例如，Mysql 处理数据类型和运算符有时是隐含的。

```
SELECT 1+'1';
   -> 2 
```

我正在玩弄我的数据库。a 列作为 varchar。然后我输入从 1 到 5 的 5 个值。如果我查询`select * from mytable where a > 2` 我得到正确的结果（不显示条目 '1'。如果我输入一个带有像“b”这样的字符的新行，这个字符不在结果中。或者您可以使用显式类型转换。

亲切的问候

# php - 在 Javascript 中调用 PHP 函数

> ID：14354147
> 
> 赞同：0
> 
> 时间：2013-01-16T08:35:29.823
> 
> 标签：php, javascript, html, web

> **可能重复：**
> [参考：为什么我的 Javascript 中的 PHP 代码不起作用？](https://stackoverflow.com/questions/13840429/reference-why-does-the-php-code-in-my-javascript-not-work)

我已经研究了好几天，似乎找不到任何可以让我做我需要做的事情。

我想要做的是从 Javascript 调用另一个文件中的 Php 函数。我的联系表单上有一个验证码，还有一个 Javascript 文件，用于检查表单并在用户遗漏任何内容时提醒用户。我的问题是我无法检查验证码。

```
 <a href ="#!/Email_Check" class="button1" onclick="$(this).closest('form').submit()"onmouseover="" style="cursor: pointer;"><span></span><strong>Send</strong></a> 
```

那是我调用 Javascript 和 Php 的链接

```
 var nameStr = safe_string(document.getElementById('cf_name').value);
        var emailStr = safe_string(document.getElementById('cf_email').value);
        var messageStr = safe_string(document.getElementById('cf_message').value);

        if(nameStr == "")
        document.getElementById('cf_nameCheck').value = "*Enter your name*";
        else
        document.getElementById('cf_nameCheck').value = "";

        if(emailStr == "" || emailStr.indexOf("@") == -1 || emailStr.indexOf(".") == -1)
        document.getElementById('cf_emailCheck').value = "*Enter a valid email*";
        else
        document.getElementById('cf_emailCheck').value = "";

        if(messageStr == "")
        document.getElementById('cf_messageCheck').value = "*Enter your message*";
        else
        document.getElementById('cf_messageCheck').value = "";  

        document.getElementById('cf_name').value = nameStr;
        document.getElementById('cf_email').value = emailStr;
        document.getElementById('cf_message').value = messageStr;

        if(document.getElementById('cf_nameCheck').value == "")
        if(document.getElementById('cf_emailCheck').value == "")
        if(document.getElementById('cf_messageCheck').value == "")
            open_page('#Email_Succesful'); 
```

那是我的 Javascript，它在单击 href 时被调用。它检查姓名、电子邮件和消息，然后在必要时在另一个文本字段上显示错误消息。

问题是我无法在不使用一些 PHP 的情况下检查验证码。

```
 include_once $_SERVER['DOCUMENT_ROOT'] . '/securimage/securimage.php';

        $securimage = new Securimage();
        if ($securimage->check($_POST['captcha_code']))
        {
            $mail_status = mail($mail_to, $subject, $body_message, $headers);
        } 
```

那是我在另一个文件中的 Php 脚本，它检查验证码是否有效，如果有效，则执行电子邮件。它在链接的 onClick 事件上调用。

那么......谁能告诉我如何在Javascript中调用检查？这将允许我检查真/假值并确定是否显示有关验证码的警告消息。

如果没有，还有其他方法可以做我需要做的吗？也许在 PHP 中显示警告？如果解决方案是使用 Ajax 之类的其他东西，请同时发布所需的代码，我也研究了 Ajax 和其他一些东西，但似乎也无法让它工作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T08:39:38.040

需要知道这一点：

Javascript（除非指定）是一种“客户端”语言，这意味着它在页面被编译并从服务器发送之后在客户端的浏览器上运行。这意味着代码中没有 PHP/ASP，只有 HTML 和 Javascript。

PHP、ASP、JSP 是仅在服务器端运行的服务器端语言。

因此，要回答您的问题，不，您不能直接让 Javascript 调用 PHP（服务器端）函数，但您可以发布到 PHP 页面，然后该页面将执行您喜欢的任何功能。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-16T08:37:22.230

[试试这个（对 php 文档的 Ajax 请求）](http://www.switchonthecode.com/tutorials/simple-ajax-php-and-javascript)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T08:54:17.317

要从 javascript 调用任何 php 函数，您需要发送一个 Ajax 请求，该请求反过来总是可以返回您期望从函数中得到的计算值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T08:51:34.237

存在抽象出客户端-服务器边界的技术。如果您曾经使用过 Java RMI，那么您就可以使用其中之一：

*   [XML-RPC](http://en.wikipedia.org/wiki/XML-RPC)
*   [JSON-RPC](http://en.wikipedia.org/wiki/JSON-RPC)（[实现](http://json-rpc.org/wiki/implementations)）

# c++ - 如何在静态方法中与 QPushButton 交互

> ID：14354149
> 
> 赞同：0
> 
> 时间：2013-01-16T08:35:52.227
> 
> 标签：c++, qt

我有带有 2 个按钮的弹出窗口，我想在使用时在静态方法中使用这些按钮的 SIGNAL 和 SLOT

```
connect(allbox->getAcceptButton(),SIGNAL(clicked()),this,SLOT(dosmt()); 
```

该程序崩溃任何想法我如何解决这个问题。感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:09:37.857

您必须编写一个调用静态方法的插槽

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T08:42:53.393

你已经问过一个类似的[问题](https://stackoverflow.com/questions/14319629/how-do-i-connect-a-signal-to-a-slot-in-a-static-method)，答案是一样的：你不能`this`在静态方法中使用，所以你必须传递一个有`dosmt()`槽的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T09:25:06.843

```
 class Test: public QObject
 {
     Q_OBJECT
 ...
 public:
     static void testMethod();
 public slots:
     void testSlot();

 };

Test::Test()
{
    QObject::connect(button, SIGNAL(clicked(), this, SLOT(testSlot()));
}

Test::testSlot()
{
    Test::testMethod();
} 
```

只是一个简短的示例，您必须将 SIGNAL 与 SLOT 连接起来，因为它由 Qt [http://doc.qt.digia.com/qt/signalsandslots.html记录](http://doc.qt.digia.com/qt/signalsandslots.html)

# vb.net - vb.net如何从访问查询中设置组合框

> ID：14354153
> 
> 赞同：0
> 
> 时间：2013-01-16T08:35:58.020
> 
> 标签：vb.net, ms-access-2007

我有这样的代码（还没有完成，因为我不知道访问连接设置）

```
 Private Sub ComboBox1_SelectedIndexChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles ComboBox1.SelectedIndexChanged
    Dim con As New OleDb.OleDbConnection
    Dim ds As New DataSet
    Dim da As OleDb.OleDbDataAdapter
    Dim sql As String
    Dim golmin As String
    golmin = ComboBox1.SelectedText

    con.ConnectionString = "PROVIDER=Microsoft.Jet.OLEDB.4.0;Data Source = C:/Users/RUMAH49/Documents/Visual Studio 2008/Projects/Project-Christian/Project-Christian/MineralDB.mdb"

    con.Open()

    sql = "SELECT [Nama Mineral] FROM MsMineral WHERE [Golongan Mineral] LIKE '" + golmin + "'"
    da = New OleDb.OleDbDataAdapter(sql, con)

End Sub 
```

我想用上面的查询填充 combobox2 列表。我怎么做？此连接是否不正确，还是我仍需使用数据集向导？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T09:40:48.977

如果您尝试连接到 Access 2007，那么您需要使用不同的提供程序

**提供者=Microsoft.ACE.OLEDB.12.0**

[请在此处](http://www.connectionstrings.com/providers/ace-oledb-12-0)参考此链接

# android - 如何创建自定义子菜单，如 Google Chrome 应用程序

> ID：14354155
> 
> 赞同：5
> 
> 时间：2013-01-16T08:36:04.847
> 
> 标签：android, submenu

我想实现自定义子菜单，就像 android 中的谷歌浏览器一样。

![Chrome 安卓应用截图](../Images/6938d0df094ab8285690373ffb74564d.png)

我不确定它是否是使用`SubMenu`or实现的`PopupMenu`。

任何指南或帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T08:49:44.347

任何`ListView`都可以与 关联`HeaderViewListAdapter`，使用它您可以将单独的布局作为页眉和/或页脚附加到您的列表视图。因此，您可以将顶部的三个按钮作为标题视图，将其余按钮作为普通列表项。当您想显示菜单时，只需在适合您需要的任何屏幕部分膨胀并显示此 ListView。

您也可以`ListPopupWindow`与`HeaderViewListAdapter`s 一起使用。

在 Android 文档中：[HeaderViewListAdapter](http://developer.android.com/reference/android/widget/HeaderViewListAdapter.html)和[ListPopupWindow](http://developer.android.com/reference/android/widget/ListPopupWindow.html)

# c# - 使内部类对其他程序集可见

> ID：14354157
> 
> 赞同：45
> 
> 时间：2013-01-16T08:36:06.990
> 
> 标签：c#, linqpad, internals

是否可以使我的程序集中的内部类对其他程序集可见？

我知道 AssemblyInfo 文件和`[assembly: InternalsVisibleTo()]`属性，但在我的情况下它不起作用。

主要目的是让从 LINQPAD 调用方法成为可能，所以这`[assembly: InternalsVisibleTo("LINQPad")]`行不通。我不知道为什么。在我的项目中，我使用了依赖解析器，在 LINQPAD 中很难做到这一点。有什么建议么？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-01-17T08:03:36.840

我刚刚上传[了一个新的测试版](http://www.linqpad.net/beta.aspx)，它允许这个工作。

将以下属性添加到您希望 LINQPad 访问其内部的库：

```
[assembly: InternalsVisibleTo("LINQPadQuery")] 
```

您还需要在 LINQPad 的首选项（编辑 | 首选项 | 高级）中启用此功能。

让我知道你们相处得如何。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-07-23T14:40:20.337

您还可以将项目属性转到 AssemblyInfo.cs 文件并在那里进行设置。

例如：

```
using System.Reflection;
using System.Runtime.CompilerServices;
using System.Runtime.InteropServices;

// General Information about an assembly is controlled through the following 
// set of attributes. Change these attribute values to modify the information
// associated with an assembly.
[assembly: AssemblyTitle("*****)]
[assembly: AssemblyDescription("")]
[assembly: AssemblyConfiguration("")]
[assembly: AssemblyCompany("*****")]
[assembly: AssemblyProduct("*****")]
[assembly: AssemblyCopyright("")]
[assembly: AssemblyTrademark("")]
[assembly: AssemblyCulture("")]
[assembly: InternalsVisibleTo("[HERE IS YOUR ASSEMBLY WHERE YOU WANT TO SEE INTERNALS OF CURRENT ASSEMBLY")]

// Setting ComVisible to false makes the types in this assembly not visible 
// to COM components.  If you need to access a type in this assembly from 
// COM, set the ComVisible attribute to true on that type.
[assembly: ComVisible(false)]

// The following GUID is for the ID of the typelib if this project is exposed to COM
[assembly: Guid("6fbd2c14-031d-48cc-9cc6-f1b85d701e89")]

// Version information for an assembly consists of the following four values:
//
//      Major Version
//      Minor Version 
//      Build Number
//      Revision
//
// You can specify all the values or you can default the Build and Revision Numbers 
// by using the '*' as shown below:
// [assembly: AssemblyVersion("1.0.*")]
[assembly: AssemblyVersion("1.0.0.0")]
[assembly: AssemblyFileVersion("1.0.0.0")] 
```

# ios - 从 tableview 中的所有行加载数据

> ID：14354161
> 
> 赞同：1
> 
> 时间：2013-01-16T08:36:25.427
> 
> 标签：ios, objective-c, uitableview

我在尝试从 tableview 的所有行加载数据时遇到了麻烦。我做了这个循环来访问行：

```
 for (NSInteger i = 0; i < [tblPeticiones numberOfRowsInSection:0]; i++) 
```

而且效果很好。当我尝试获取每一行的子视图时出现问题。我使用这段代码：

```
NSArray *n=[[tblPeticiones cellForRowAtIndexPath:[NSIndexPath indexPathForRow:i inSection:0]] subviews]; 
```

它也有效。我的问题是它只适用于可见单元格。

我应该如何加载所有行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:00:24.117

您正在尝试（ab-）使用表格视图单元格作为数据源，这不是一个好主意。

将数据存储在一个数组中（例如，一个包含每一行所有信息的字典数组）并将该数组用作表格视图的数据源。

然后，您可以访问独立于视图的所有数据。

# parsing - 如何解析 groovy 代码？

> ID：14354165
> 
> 赞同：18
> 
> 时间：2013-01-16T08:36:42.490
> 
> 标签：parsing, grails, groovy

由于 groovy 擅长解析几乎任何东西，因此搜索如何解析 groovy 代码不会显示任何好的结果 - 所以我希望 SO 社区能够提供帮助 :-)

我想为 grails 域类编写某种（图形）编辑器，但不想重新发明轮子。

通过反射检查域类很容易，但我想更进一步——我想修改代码并将其作为域类文件写回。

一个问题是反射（以及 AST 也是）会丢弃所​​有评论和格式（格式不是大问题，我可以很好地打印文件）......

有什么想法可以找到我可以构建我的想法的 groovy 解析器吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-17T16:26:39.053

您应该仔细查看[GroovyDocTool](http://groovy-lang.org/api/org/codehaus/groovy/tools/groovydoc/GroovyDocTool.html)类源代码。

GroovyDoc 使用 GroovyLexer 和 GroovyRecognizer 解析类文本（生成 GroovyDoc HTML 文档文件，类似于 JavaDoc HTML 文件）并利用这些类从给定的源文本创建 AST。

生成的 AST 和源代码文本用于遍历类结构（请参阅[SimpleGroovyClassDocAssembler](http://groovy-lang.org/api/org/codehaus/groovy/tools/groovydoc/SimpleGroovyClassDocAssembler.html)），提取注释和各种其他元数据以填充 GroovyDoc 特定的数据结构。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T01:27:20.913

[ASM](http://www.geekyarticles.com/2011/10/manipulating-java-class-files-with-asm_13.html)应该为您完成大部分工作......

Groovy 代码中的其他类可能围绕 ASM：-

*   [http://groovy-lang.org/api/org/codehaus/groovy/ast/ClassNode.html](http://groovy-lang.org/api/org/codehaus/groovy/ast/ClassNode.html)。
*   [http://groovy-lang.org/api/org/codehaus/groovy/ast/GroovyClassVisitor.html](http://groovy-lang.org/api/org/codehaus/groovy/ast/GroovyClassVisitor.html)

一旦你有了访问者，如果 Groovy API 中有一个内置的适配器，它可能“或多或少”很简单......

# python - 在 pygame 中为平台游戏添加滚动

> ID：14354171
> 
> 赞同：49
> 
> 时间：2013-01-16T08:37:09.487
> 
> 标签：python, scroll, pygame

好的，所以我在下面包含了我的项目的代码，我只是在尝试用 pygame 制作一个平台游戏。我试图弄清楚如何做一些非常简单的跟随玩家的滚动，所以玩家是相机的中心，它会反弹/跟随他。谁能帮我？

```
import pygame
from pygame import *

WIN_WIDTH = 800
WIN_HEIGHT = 640
HALF_WIDTH = int(WIN_WIDTH / 2)
HALF_HEIGHT = int(WIN_HEIGHT / 2)

DISPLAY = (WIN_WIDTH, WIN_HEIGHT)
DEPTH = 32
FLAGS = 0
CAMERA_SLACK = 30

def main():
    global cameraX, cameraY
    pygame.init()
    screen = pygame.display.set_mode(DISPLAY, FLAGS, DEPTH)
    pygame.display.set_caption("Use arrows to move!")
    timer = pygame.time.Clock()

    up = down = left = right = running = False
    bg = Surface((32,32))
    bg.convert()
    bg.fill(Color("#000000"))
    entities = pygame.sprite.Group()
    player = Player(32, 32)
    platforms = []

    x = y = 0
    level = [
        "PPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPP",
        "P                                P",
        "P                                P",
        "P                                P",
        "P                                P",
        "P                                P",
        "P                                P",
        "P                                P",
        "P       PPPPPPPPPPP              P",
        "P                                P",
        "P                                P",
        "P                                P",
        "P                                P",
        "PPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPP",]
    # build the level
    for row in level:
        for col in row:
            if col == "P":
                p = Platform(x, y)
                platforms.append(p)
                entities.add(p)
            if col == "E":
                e = ExitBlock(x, y)
                platforms.append(e)
                entities.add(e)
            x += 32
        y += 32
        x = 0

    entities.add(player)

    while 1:
        timer.tick(60)

        for e in pygame.event.get():
            if e.type == QUIT: raise SystemExit, "QUIT"
            if e.type == KEYDOWN and e.key == K_ESCAPE:
                raise SystemExit, "ESCAPE"
            if e.type == KEYDOWN and e.key == K_UP:
                up = True
            if e.type == KEYDOWN and e.key == K_DOWN:
                down = True
            if e.type == KEYDOWN and e.key == K_LEFT:
                left = True
            if e.type == KEYDOWN and e.key == K_RIGHT:
                right = True
            if e.type == KEYDOWN and e.key == K_SPACE:
                running = True

            if e.type == KEYUP and e.key == K_UP:
                up = False
            if e.type == KEYUP and e.key == K_DOWN:
                down = False
            if e.type == KEYUP and e.key == K_RIGHT:
                right = False
            if e.type == KEYUP and e.key == K_LEFT:
                left = False
            if e.type == KEYUP and e.key == K_RIGHT:
                right = False

        # draw background
        for y in range(32):
            for x in range(32):
                screen.blit(bg, (x * 32, y * 32))

        # update player, draw everything else
        player.update(up, down, left, right, running, platforms)
        entities.draw(screen)

        pygame.display.update()

class Entity(pygame.sprite.Sprite):
    def __init__(self):
        pygame.sprite.Sprite.__init__(self)

class Player(Entity):
    def __init__(self, x, y):
        Entity.__init__(self)
        self.xvel = 0
        self.yvel = 0
        self.onGround = False
        self.image = Surface((32,32))
        self.image.fill(Color("#0000FF"))
        self.image.convert()
        self.rect = Rect(x, y, 32, 32)

    def update(self, up, down, left, right, running, platforms):
        if up:
            # only jump if on the ground
            if self.onGround: self.yvel -= 10
        if down:
            pass
        if running:
            self.xvel = 12
        if left:
            self.xvel = -8
        if right:
            self.xvel = 8
        if not self.onGround:
            # only accelerate with gravity if in the air
            self.yvel += 0.3
            # max falling speed
            if self.yvel > 100: self.yvel = 100
        if not(left or right):
            self.xvel = 0
        # increment in x direction
        self.rect.left += self.xvel
        # do x-axis collisions
        self.collide(self.xvel, 0, platforms)
        # increment in y direction
        self.rect.top += self.yvel
        # assuming we're in the air
        self.onGround = False;
        # do y-axis collisions
        self.collide(0, self.yvel, platforms)

    def collide(self, xvel, yvel, platforms):
        for p in platforms:
            if pygame.sprite.collide_rect(self, p):
                if isinstance(p, ExitBlock):
                    pygame.event.post(pygame.event.Event(QUIT))
                if xvel > 0:
                    self.rect.right = p.rect.left
                    print "collide right"
                if xvel < 0:
                    self.rect.left = p.rect.right
                    print "collide left"
                if yvel > 0:
                    self.rect.bottom = p.rect.top
                    self.onGround = True
                    self.yvel = 0
                if yvel < 0:
                    self.rect.top = p.rect.bottom

class Platform(Entity):
    def __init__(self, x, y):
        Entity.__init__(self)
        self.image = Surface((32, 32))
        self.image.convert()
        self.image.fill(Color("#DDDDDD"))
        self.rect = Rect(x, y, 32, 32)

    def update(self):
        pass

class ExitBlock(Platform):
    def __init__(self, x, y):
        Platform.__init__(self, x, y)
        self.image.fill(Color("#0033FF"))

if __name__ == "__main__":
    main() 
```

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2013-01-16T11:19:42.770

绘制实体时，您需要对实体的位置应用*偏移。*让我们称它为*偏移量*a `camera`，因为这是我们想要实现的效果。

首先，我们不能使用`draw`精灵组的功能，因为精灵不需要知道它们的位置（`rect`）不是它们要在屏幕上绘制的位置（最后，我们'将继承`Group`该类并重新实现它`draw`以了解相机，但让我们慢慢开始）。

* * *

让我们首先创建一个`Camera`类来保存我们想要应用于实体位置的偏移量的状态：

```
class Camera(object):
    def __init__(self, camera_func, width, height):
        self.camera_func = camera_func
        self.state = Rect(0, 0, width, height)

    def apply(self, target):
        return target.rect.move(self.state.topleft)

    def update(self, target):
        self.state = self.camera_func(self.state, target.rect) 
```

这里需要注意一些事项：

我们需要存储相机的位置，以及以像素为单位的关卡的宽度和高度（因为我们想在关卡的边缘停止滚动）。我使用 a`Rect`来存储所有这些信息，但您可以轻松地使用一些字段。

using在函数`Rect`中派上用场。`apply`这是我们重新计算屏幕上实体的位置以*应用*滚动的地方。

每次主循环迭代一次，我们需要更新相机的位置，因此有这个`update`函数。它只是通过调用`camera_func`函数来改变状态，这将为我们完成*所有艰苦的工作*。我们稍后实施。

让我们创建一个相机实例：

```
for row in level:
    ...

total_level_width  = len(level[0])*32 # calculate size of level in pixels
total_level_height = len(level)*32    # maybe make 32 an constant
camera = Camera(*to_be_implemented*, total_level_width, total_level_height)

entities.add(player)
... 
```

并改变我们的主循环：

```
# draw background
for y in range(32):
    ...

camera.update(player) # camera follows player. Note that we could also follow any other sprite

# update player, draw everything else
player.update(up, down, left, right, running, platforms)
for e in entities:
    # apply the offset to each entity.
    # call this for everything that should scroll,
    # which is basically everything other than GUI/HUD/UI
    screen.blit(e.image, camera.apply(e)) 

pygame.display.update() 
```

我们的相机类已经非常灵活，而且非常简单。它可以使用不同类型的滚动（通过提供不同的`camera_func`功能），它可以跟随任意精灵，而不仅仅是玩家。您甚至可以在运行时更改它。

现在为`camera_func`. 一个简单的方法是让玩家（或我们想要跟随的任何实体）在屏幕上居中，实现很简单：

```
def simple_camera(camera, target_rect):
    l, t, _, _ = target_rect # l = left,  t = top
    _, _, w, h = camera      # w = width, h = height
    return Rect(-l+HALF_WIDTH, -t+HALF_HEIGHT, w, h) 
```

我们只是占据我们的位置`target`，并添加一半的屏幕总尺寸。您可以通过像这样创建相机来尝试：

```
camera = Camera(simple_camera, total_level_width, total_level_height) 
```

到目前为止，一切都很好。但也许我们不想看到关卡*之外*的黑色背景？怎么样：

```
def complex_camera(camera, target_rect):
    # we want to center target_rect
    x = -target_rect.center[0] + WIN_WIDTH/2 
    y = -target_rect.center[1] + WIN_HEIGHT/2
    # move the camera. Let's use some vectors so we can easily substract/multiply
    camera.topleft += (pygame.Vector2((x, y)) - pygame.Vector2(camera.topleft)) * 0.06 # add some smoothness coolnes
    # set max/min x/y so we don't see stuff outside the world
    camera.x = max(-(camera.width-WIN_WIDTH), min(0, camera.x))
    camera.y = max(-(camera.height-WIN_HEIGHT), min(0, camera.y))

    return camera 
```

这里我们简单地使用`min`/`max`函数来确保我们不会*向外*滚动。

通过像这样创建您的相机来尝试它：

```
camera = Camera(complex_camera, total_level_width, total_level_height) 
```

我们的最终滚动有一个小动画：

[![在此处输入图像描述](../Images/8031b81bbedcf326686fbb2b26cd1cc7.png)](https://i.stack.imgur.com/0sP1e.gif)

这是完整的代码。注意我改变了一些东西：

*   级别更大，拥有更多平台
*   使用蟒蛇 3
*   使用精灵组来处理相机
*   重构了一些重复的代码
*   由于 Vector2/3 现在已经稳定，使用它们来简化数学运算
*   摆脱那些丑陋的事件处理代码并`pygame.key.get_pressed`改用

* * *

```
 #! /usr/bin/python

import pygame
from pygame import *

SCREEN_SIZE = pygame.Rect((0, 0, 800, 640))
TILE_SIZE = 32 
GRAVITY = pygame.Vector2((0, 0.3))

class CameraAwareLayeredUpdates(pygame.sprite.LayeredUpdates):
    def __init__(self, target, world_size):
        super().__init__()
        self.target = target
        self.cam = pygame.Vector2(0, 0)
        self.world_size = world_size
        if self.target:
            self.add(target)

    def update(self, *args):
        super().update(*args)
        if self.target:
            x = -self.target.rect.center[0] + SCREEN_SIZE.width/2
            y = -self.target.rect.center[1] + SCREEN_SIZE.height/2
            self.cam += (pygame.Vector2((x, y)) - self.cam) * 0.05
            self.cam.x = max(-(self.world_size.width-SCREEN_SIZE.width), min(0, self.cam.x))
            self.cam.y = max(-(self.world_size.height-SCREEN_SIZE.height), min(0, self.cam.y))

    def draw(self, surface):
        spritedict = self.spritedict
        surface_blit = surface.blit
        dirty = self.lostsprites
        self.lostsprites = []
        dirty_append = dirty.append
        init_rect = self._init_rect
        for spr in self.sprites():
            rec = spritedict[spr]
            newrect = surface_blit(spr.image, spr.rect.move(self.cam))
            if rec is init_rect:
                dirty_append(newrect)
            else:
                if newrect.colliderect(rec):
                    dirty_append(newrect.union(rec))
                else:
                    dirty_append(newrect)
                    dirty_append(rec)
            spritedict[spr] = newrect
        return dirty            

def main():
    pygame.init()
    screen = pygame.display.set_mode(SCREEN_SIZE.size)
    pygame.display.set_caption("Use arrows to move!")
    timer = pygame.time.Clock()

    level = [
        "PPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPP",
        "P                                          P",
        "P                                          P",
        "P                                          P",
        "P                    PPPPPPPPPPP           P",
        "P                                          P",
        "P                                          P",
        "P                                          P",
        "P    PPPPPPPP                              P",
        "P                                          P",
        "P                          PPPPPPP         P",
        "P                 PPPPPP                   P",
        "P                                          P",
        "P         PPPPPPP                          P",
        "P                                          P",
        "P                     PPPPPP               P",
        "P                                          P",
        "P   PPPPPPPPPPP                            P",
        "P                                          P",
        "P                 PPPPPPPPPPP              P",
        "P                                          P",
        "P                                          P",
        "P                                          P",
        "P                                          P",
        "PPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPP",]

    platforms = pygame.sprite.Group()
    player = Player(platforms, (TILE_SIZE, TILE_SIZE))
    level_width  = len(level[0])*TILE_SIZE
    level_height = len(level)*TILE_SIZE
    entities = CameraAwareLayeredUpdates(player, pygame.Rect(0, 0, level_width, level_height))

    # build the level
    x = y = 0
    for row in level:
        for col in row:
            if col == "P":
                Platform((x, y), platforms, entities)
            if col == "E":
                ExitBlock((x, y), platforms, entities)
            x += TILE_SIZE
        y += TILE_SIZE
        x = 0

    while 1:

        for e in pygame.event.get():
            if e.type == QUIT: 
                return
            if e.type == KEYDOWN and e.key == K_ESCAPE:
                return

        entities.update()

        screen.fill((0, 0, 0))
        entities.draw(screen)
        pygame.display.update()
        timer.tick(60)

class Entity(pygame.sprite.Sprite):
    def __init__(self, color, pos, *groups):
        super().__init__(*groups)
        self.image = Surface((TILE_SIZE, TILE_SIZE))
        self.image.fill(color)
        self.rect = self.image.get_rect(topleft=pos)

class Player(Entity):
    def __init__(self, platforms, pos, *groups):
        super().__init__(Color("#0000FF"), pos)
        self.vel = pygame.Vector2((0, 0))
        self.onGround = False
        self.platforms = platforms
        self.speed = 8
        self.jump_strength = 10

    def update(self):
        pressed = pygame.key.get_pressed()
        up = pressed[K_UP]
        left = pressed[K_LEFT]
        right = pressed[K_RIGHT]
        running = pressed[K_SPACE]

        if up:
            # only jump if on the ground
            if self.onGround: self.vel.y = -self.jump_strength
        if left:
            self.vel.x = -self.speed
        if right:
            self.vel.x = self.speed
        if running:
            self.vel.x *= 1.5
        if not self.onGround:
            # only accelerate with gravity if in the air
            self.vel += GRAVITY
            # max falling speed
            if self.vel.y > 100: self.vel.y = 100
        print(self.vel.y)
        if not(left or right):
            self.vel.x = 0
        # increment in x direction
        self.rect.left += self.vel.x
        # do x-axis collisions
        self.collide(self.vel.x, 0, self.platforms)
        # increment in y direction
        self.rect.top += self.vel.y
        # assuming we're in the air
        self.onGround = False;
        # do y-axis collisions
        self.collide(0, self.vel.y, self.platforms)

    def collide(self, xvel, yvel, platforms):
        for p in platforms:
            if pygame.sprite.collide_rect(self, p):
                if isinstance(p, ExitBlock):
                    pygame.event.post(pygame.event.Event(QUIT))
                if xvel > 0:
                    self.rect.right = p.rect.left
                if xvel < 0:
                    self.rect.left = p.rect.right
                if yvel > 0:
                    self.rect.bottom = p.rect.top
                    self.onGround = True
                    self.vel.y = 0
                if yvel < 0:
                    self.rect.top = p.rect.bottom

class Platform(Entity):
    def __init__(self, pos, *groups):
        super().__init__(Color("#DDDDDD"), pos, *groups)

class ExitBlock(Entity):
    def __init__(self, pos, *groups):
        super().__init__(Color("#0033FF"), pos, *groups)

if __name__ == "__main__":
    main() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:06:54.523

既然你知道，你有一个静态背景，你控制的玩家在他所在的位置上被blitted，你有两个选择总是在中间显示角色。

1.  如果你的地图足够小，你可以有一个大的 img A，并根据玩家的位置推导出一个矩形，这将是屏幕的大小。这样，玩家将始终处于中间位置。一个 Rect.clamp(Rect) 或 Rect.clamp_ip(Rect) 将帮助你。

2.  另一种方法是在屏幕上使用不同的元组作为位置。玩家将在屏幕中央有一个恒定值，而背景位置将是玩家位置的负值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T11:06:55.810

做到这一点的唯一方法是将地图中的逻辑位置与屏幕上的物理位置分开。

任何与在屏幕上实际绘制地图相关的代码（在您的情况下`.rect`是精灵的所有属性）都必须基于屏幕实际使用的地图部分的偏移量。

例如，您的屏幕可能会从左上角的位置 (10,10) 开始显示您的地图 - 所有显示相关的代码（在上述情况下是`.rect`属性）应该从当前逻辑位置减去屏幕偏移量 - (说字符在地图坐标（12,15）处 - 所以，它应该被绘制在 (12,15) - (10, 10) -> (2, 5) * BLOCK_SIZE) 在你上面的例子中 BLOCK_SIZE 被硬编码为 32 ,32，所以你想在显示器上的物理像素位置（2 * 32、5 * 32）绘制它）

（提示：避免以这种方式对事物进行硬编码，将其作为代码开头的常量声明）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-15T07:23:16.807

不幸的是，Pygame 没有针对这个问题的内置解决方案。Pygame 使用[`pygame.sprite.Sprite`](https://www.pygame.org/docs/ref/sprite.html#pygame.sprite.Sprite)组织在[`pygame.sprite.Group`s](https://www.pygame.org/docs/ref/sprite.html#pygame.sprite.Group)中的对象。*Sprites*`.rect`的属性用于绘制对象以及对象之间的碰撞测试。没有可以在绘图前将对象坐标转换为屏幕坐标的内置功能。作为对 Pygame 开发人员的建议：在方法中为相机*偏移* 提供一个可选参数会很好。 **[`pygame.sprite.Group.draw`](https://www.pygame.org/docs/ref/sprite.html#pygame.sprite.Group.draw)**

 **有不同的方法：

*   您可以向相反方向移动场景中的任何对象，而不是移动玩家。这是所有方法中最糟糕的。我强烈建议不要这样做。每次添加新对象时，您都需要确保它随着玩家的移动而移动。处理对象动画或浮点精度可能会变成一场噩梦。

*   创建世界的虚拟屏幕大小，并在虚拟屏幕上绘制整个屏幕。在每一帧结束时，屏幕上会显示地图的一个子部分。

    ```
    virtual_screen = pygame.Surface((map_width, map_height)) 
    ```

    有2种可能性。您可以[`blit`](https://www.pygame.org/docs/ref/surface.html#pygame.Surface.blit)通过指定*area*参数直接在屏幕上显示虚拟屏幕的区域：

    ```
    camera_area = pygame.Rect(camera_x, camera_y, camera_width, camera_height)
    screen.blit(virtual_screen, (0, 0), camera_area) 
    ```

    另一种可能性是使用以下方法定义直接链接到源表面的次表面[`subsurface`](https://www.pygame.org/docs/ref/surface.html#pygame.Surface.subsurface)：

    ```
    camera_area = pygame.Rect(camera_x, camera_y, camera_width, camera_height)
    camera_subsurf = source_surf.subsurface(camera_area) 
    ```

    ```
    screen.blit(camera_subsurf, (0, 0)) 
    ```

    这种方法的缺点是它可能具有非常大的内存占用。如果虚拟屏幕很大，游戏就会卡顿。此方案仅适用于游戏区域大小不比屏幕大多少的情况。根据经验，如果播放区域是屏幕大小的两倍以上，则不应该这样做（我说的是区域大小的两倍，而不是宽度和高度的两倍） .

*   对于大型游乐区，唯一可以使用的方法是在绘制之前为对象添加偏移量：

    ```
    offset_x = -camera_x
    offset_y = -camera_y
    for object in objects:
        screen.blit(object.image, (object.rect.x + offset_x, object.rect.y + offset_y)) 
    ```

    遗憾的是[`pygame.sprite.Group.draw`](https://www.pygame.org/docs/ref/sprite.html#pygame.sprite.Group)在这种情况下不能直接使用。这种方法在高度评价的答案中有详细说明。
    或者，您可以在绘制它们之前移动所有精灵：

    ```
    all_sprites = pygame.sprite.Group() 
    ```

    ```
    for sprite in all_sprites:
        all_sprites.rect.move_ip(-camera_x, -camera_y)
    all_sprites.draw(screen)    
    for sprite in all_sprites:
        all_sprites.rect.move_ip(camera_x, camera_y) 
    ```

最后是关于脏机制和部分屏幕更新的评论：玩家一移动，整个屏幕都是脏的，需要更新。因此，您是否应该在部分更新机制上投入资源是值得怀疑的。这些算法也需要时间来运行。在高度动态的场景中，算法的结果是全部更新。**

# vb.net - SSIS 脚本任务中 OleDbCommand.ExecuteNonQuery() 函数中的未指定错误

> ID：14354173
> 
> 赞同：0
> 
> 时间：2013-01-16T08:37:14.317
> 
> 标签：vb.net, ssis

我有一个 SSIS 包，它有一个 FOREACH 循环容器，在循环内我有一个脚本任务。脚本任务中的代码如下

```
Imports System
Imports System.Data
Imports System.Math
Imports Microsoft.SqlServer.Dts.Runtime
Imports System.Data.SqlClient
Imports System.Data.OleDb
Imports System.Configuration

<System.AddIn.AddIn("ScriptMain", Version:="1.0", Publisher:="", Description:="")> _
<System.CLSCompliantAttribute(False)> _
Partial Public Class ScriptMain
    Inherits Microsoft.SqlServer.Dts.Tasks.ScriptTask.VSTARTScriptObjectModelBase
Public Sub Main()
Try
            Dim oleConn As New OleDbConnection()
            Dim strConn As String = Dts.Variables("ConfiguredValue").Value.ToString()
            oleConn.ConnectionString = strConn
            Dim oleDA As New OleDbDataAdapter()
            Dim dt As New DataTable()
            oleDA.Fill(dt, Dts.Variables("Source_Data").Value)
            oleConn.Open()
            Dim oleComm As New OleDbCommand("Insert_Into_Destination")
            oleComm.CommandType = CommandType.StoredProcedure
            oleComm.Connection = oleConn
            oleComm.Parameters.AddWithValue("@tvp", dt)
            oleDA.InsertCommand = oleComm
            oleComm.ExecuteNonQuery()
            oleConn.Close()
        Catch ex As Exception
            Throw ex
        End Try
    End Sub
End Class 
```

变量 Dts.Variables("ConfiguredValue").Value 的值在 For Each 容器的每次迭代中发生变化。它看起来像 -

```
"Data Source=server_name;Initial Catalog=db_name;User ID=user_id;Password = Password;Provider=SQLOLEDB.1; Persist Security Info=True;Integrated Security=SSPI;Auto Translate=False;" 
```

问题是 - 执行包时，在 ExecuteNonQuery() 处抛出异常，显示“未指定错误”。

当我尝试类似的代码插入一个整数值时没有错误。当它是我作为输入参数传递给 SP 的数据表时会导致问题。

有什么办法可以避免这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T14:32:43.857

我相信您缺少的是告诉参数它应该是什么 TVP 以及它的类型（最后 2 行）。我的[表值参数](http://billfellows.blogspot.com/2010/06/t-sql-tuesday-007-summertime-in-sql.html)在 C# 中，但同样的概念也适用。

```
 command = new System.Data.SqlClient.SqlCommand("TwitterAdd");
    command.CommandType = System.Data.CommandType.StoredProcedure;
    command.Connection = connection;

    // Assigning a table valued parameter looks much like any other parameter
    System.Data.SqlClient.SqlParameter tvp = command.Parameters.AddWithValue("@tvp", dataTable);

    // this is the only special sauce
    tvp.SqlDbType = System.Data.SqlDbType.Structured;
    tvp.TypeName = "dbo.MY_TABLE_VALUED_PARAMETER"; 
```

这在 VB 中应该是相同的减去分号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-01T16:04:28.503

我遇到了同样的问题。我收到的错误消息是：“由于符号不匹配或数据溢出以外的原因，无法转换命令参数 [0] ''数据值。”

在上面引用的 MSDN 文章中，我看不到对 OLE DB 的任何引用 - TVP 似乎只是 SqlClient。

此外，在`System.Data.OleDB.OleDbType`枚举中没有结构化选项。

我将我的 OLEDB 连接更改为 ADO.Net Connection，它工作正常。

# asp.net - Azure 无法从 asp.net 页面访问图像

> ID：14354177
> 
> 赞同：0
> 
> 时间：2013-01-16T08:37:47.577
> 
> 标签：asp.net, azure

我无法访问位于 asp.net 页面旁边的图像。访问被拒绝任何提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:03:16.797

您是否在配置中启用了本地存储？

来自文章：

> 云中的本地存储和我们本地IIS环境下的存储是不一样的。本地存储，假定在本地 IIS 服务器上运行的 ASP.NET 应用程序下。在 Azure 世界中，您必须首先将您的角色配置为在部署本地存储时请求它。这可以通过 VS 中的角色编辑器来完成

阅读更多： http: [//www.intertech.com/Blog/Post/Windows-Azure-Local-File-Storage-How-To-Guide-and-Warnings.aspx#ixzz2I7xrJiBD](http://www.intertech.com/Blog/Post/Windows-Azure-Local-File-Storage-How-To-Guide-and-Warnings.aspx#ixzz2I7xrJiBD)

[http://www.intertech.com/Blog/Post/Windows-Azure-Local-File-Storage-How-To-Guide-and-Warnings.aspx](http://www.intertech.com/Blog/Post/Windows-Azure-Local-File-Storage-How-To-Guide-and-Warnings.aspx)

# c# - 在 MVP 中的用户控件之间传递 UI 实体

> ID：14354185
> 
> 赞同：1
> 
> 时间：2013-01-16T08:38:26.770
> 
> 标签：c#

我是第一次实现 MVP 模式。我的应用程序是一个向导。只有一个表单，并且其中嵌入了多个用户控件。每个控件都是一个视图，每个视图都有一个演示者。我正在尝试实现被动 MVP 模式。演示者负责处理所有操作并更新视图。

问题是通过 UI 实体。我想将用户输入从我的第一个视图传递到第二个视图，因为第二个视图需要对其进行处理。

所有视图都在 Win Form 上实例化。

任何帮助将不胜感激。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:38:27.417

我在考虑以下场景：创建一个用于持有不同视图的枚举

```
public enum Views{
First,Second, Manager,Third,
} 
```

为您的按钮状态创建一个可枚举

```
public enum ButtonState{Start,Next,Cancel,Back,} 
```

创建将保存所有数据的类

```
public class MyData
{
  //properties here
  //Also have a default constructor
  public MyData()
  {
  }
} 
```

然后在您的表单中使用以下新项目：

```
Public Views MyViewState { get; set;}
Public ButtonState MyButtonState { get; set;}
Public MyData dataclass { get; set;}

Public Form1()
{
InitializeComponent();
MyViewState = Views.First;
MyButtonState = ButtonState.Start;
dataclass = new MyData(); //mostly at startup your class data is empty ...
ControlViews();
}

Public void ControlViews()
{
    //Based on your Buttons you will do what each form is asked to do:
      switch(MyButtonState)
      {
       case ButtonState.Start:
        //Since this is your startup: you only need to show your next view and replace you MyViewState
        MyViewState = Views.First;
        ///code for showing your view
       Break;
       case ButtonState.Next:
        //Since this time you probably filled in data you need to know in which MyViewState you are
         Switch (MyViewState)
         {
          Case Views.First:
           //You want to keep your data
           ///Code for placing data into your dataclass
           //After replacing the code, you then need to do some calculations and open the next view
           ///Code for calculations and placing this data in the form
           ///Code for opening the second view
           MyViewState = Views.Second;
          Break;
           // you then need to do this for each MyViewState
         }
       Break;
      }
} 
```

使用这种系统的优点是您的所有数据都保留在课堂上，您只需显示/关闭您的视图。

这是我如何应对这种情况的一种方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T08:58:24.100

您可以创建一个包含您需要的所有实体的类。当打开一个新窗口时，您在构造函数中传递类，瞧，您的数据已被传输。

# c++ - 命名空间范围内的运算符隐藏全局范围内的另一个运算符

> ID：14354186
> 
> 赞同：13
> 
> 时间：2013-01-16T08:38:30.070
> 
> 标签：c++, namespaces, name-lookup

这是编译器错误吗？

```
template <typename T>
T& operator++(T& t)
{
    return t;
}

namespace asdf {

enum Foo { };
enum Bar { };

Foo& operator++(Foo& foo);

void fun()
{
    Bar bar;
    ++bar;
}

} // end namespace asdf

int main()
{
    return 0;
} 
```

GCC 4.7 错误消息是：

```
error: no match for 'operator++' in '++bar'
note: candidate is:
note: asdf::Foo& asdf::operator++(asdf::Foo&)
note: no known conversion for argument 1 from 'asdf::Bar' to 'asdf::Foo&' 
```

如果您注释掉该行，它将编译：

```
Foo& operator++(Foo& foo); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-16T08:58:02.917

不，这不是一个错误。考虑了三组并行的运算符。成员、非成员运算符和内置函数。

非成员的通过正常的非限定+ADL查找来查找，忽略所有类成员函数。因此，全局运算符被更接近的词法隐藏（并且介入的成员函数不会隐藏其他非成员）。

请注意，重载决议发生*在*名称查找¹之后；在您的情况下，`operator++`找到了名称，但没有适当的重载。

如果 Bar 已被全局声明，和/或命名空间 asdf 中的其他运算符，ADL（在前一种情况下）或普通的非限定查找（在后一种情况下）会将运算符拖入。

* * *

¹：`Overload resolution (...) takes place after name lookup has succeeded.`（C++ 标准）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-16T09:03:57.057

不，这不是编译器错误。

对表达式执行了两个名称查找`++bar`。

*   常规名称查找搜索封闭范围和命名空间，直到*找到*. `operator++`此搜索由内而外进行，因此最后搜索全局命名空间。在查找运算符函数时，成员函数被单独处理（并且不要停止此搜索）。
*   依赖于参数的查找接下来开始并搜索其他类和命名空间，但仅搜索与函数参数相关的那些（`operator++`在本例中）。

在问题的示例中，正常查找找到`asdf::operator++`并停止查找。
依赖于参数的查找仅将`asdf`命名空间添加到要搜索的位置，因为那是`enum Bar`. 因此，`operator++`无法找到全局。

您可以`operator++`使用命名空间中的 using 声明来找到全局`asdf`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T12:06:37.927

重载仅适用**于在同一范围内**定义的名称。一旦编译器找到匹配的名称，它就不会在外部范围内查找，即使它找到的名称适用于无法使用的东西。这与运营商无关；如果代码以与使用 operator++ 相同的方式使用函数名称，则会得到相同的错误。例如：

```
void f(int);

struct C {
void f(const C&);
void g() {
    f(3); // error: f(const C&) can't be called with argument 3
}; 
```

# iphone - Facebook-Ios-Sdk 3.0.8 在替代登录时崩溃 Xcode

> ID：14354191
> 
> 赞同：2
> 
> 时间：2013-01-16T08:38:43.763
> 
> 标签：iphone, ios, facebook, facebook-graph-api

我正在使用`Facebook-ios-sdk 3.0.8`登录我的应用程序。它在第一次运行良好并给了我`Username`来自`FbGraph`但它在我下次登录时崩溃了 Xcode.. 原因是什么...请检查代码并让我知道...

```
- (IBAction)buttonClickHandler:(id)sender {
// get the app delegate so that we can access the session property
AppDelegate *appDelegate = [[UIApplication sharedApplication]delegate];

// this button's job is to flip-flop the session from open to closed
if (appDelegate.session.isOpen) {

    [appDelegate.session closeAndClearTokenInformation];

} else {
    if (appDelegate.session.state != FBSessionStateCreated) {

        appDelegate.session = [[FBSession alloc] init];
    }

    [FBSession.activeSession openWithBehavior:FBSessionLoginBehaviorForcingWebView

                        completionHandler:^(FBSession *session,

                                            FBSessionState state,

                                            NSError *error) {
                            // and here we make sure to update our UX according to the new session state
                            [self updateView];
                            NSLog(@" state=%d",state);

                            [FBRequestConnection
                             startForMeWithCompletionHandler:^(FBRequestConnection *connection,
                                                               id<FBGraphUser> user,
                                                               NSError *error) {

                                 userInfo = @"";

                                 // Example: typed access (name)
                                 // - no special permissions required
                                 userInfo = user.username;

                                 NSLog(@"string %@", userInfo); 

                             }];

                        }];    } 

} 
```

**首次登录输出**

```
2013-01-16 13:56:35.613 facebooktest[2690:f803]  state=513
2013-01-16 13:56:36.335 facebooktest[2690:f803] string christien.101012 
```

**下次登录时低于输出**

```
 2013-01-16 13:56:42.747 facebooktest[2690:f803] *** Terminating app due to uncaught exception 'com.facebook.sdk:InvalidOperationException', reason: 'FBSession: an attempt was made to open an already opened or closed session'
*** First throw call stack:
(0x15ca052 0x175bd0a 0x15c9f11 0x1249f 0x3043 0x15cbec9 0x11b5c2 0x11b55a 0x1c0b76 0x1c103f 0x1c02fe 0x140a30 0x140c56 0x127384 0x11aaa9 0x14b4fa9 0x159e1c5 0x1503022 0x150190a 0x1500db4 0x1500ccb 0x14b3879 0x14b393e 0x118a9b 0x1e38 0x1d95 0x1) 
```

和**有什么区别**

```
[FBSession.activeSession openWithBehavior:FBSessionLoginBehaviorForcingWebView

                        completionHandler:^(FBSession *session,

                                            FBSessionState state,

                                            NSError *error) 
```

和

```
 [appDelegate.session openWithBehavior:FBSessionLoginBehaviorForcingWebView

                        completionHandler:^(FBSession *session,

                                            FBSessionState state,

                                            NSError *error) 
```

用简单的话来说`appDelegate.session`，`FBSession.activeSession`因为如果我使用`appDelegate.session`它而不是它不会给我`user.username`并且不会崩溃......而且我第一次使用`FBSession.activeSession`它给了我`user.username`然后下次它崩溃..

# jquery - JQuery Masonry：通过 ajax 附加图像

> ID：14354194
> 
> 赞同：2
> 
> 时间：2013-01-16T08:38:53.630
> 
> 标签：jquery, image, jquery-masonry

我有很多通过 ajax 加载的图像。我正在使用 masonry 和延迟加载插件来显示图像。通过一个 ajax 调用加载所有图像会导致问题并且页面卡住直到所有图像都被安排好，所以我在第一个 ajax 中加载 20 个图像调用，然后在这个一对一的 ajax 请求之后立即在每个调用中获取 10 个图像并通过 masonry append 进行附加。

```
function getMorePhotos () {
    $.ajax({
            type    : "POST",
            url     : site_url+'controller/ajax_get_photos',
            data    : ,
            complete: function(response)
                    {
                        if (response.responseText != '0' )
                        {
                            getMorePhotos();
                        }                       
                    },
            success : function(response) 
                {
                    if (response == '0' || response == '') {

                    } else {
                        var temp = $(response).get();
                        temp.forEach(function( element, index ) {
                            $item = $(element);
                            $('#allPhoto1').find('ul.ins-view').append($item).masonry( 'appended', $item );
                            $item.find("img.lazy").lazyload({
                                effect : "fadeIn",
                                threshold : 100
                            });

                        });

                    }
                }
        });
} 
```

这是第一次请求完成后的方法调用。

现在的问题是：第一个图像连续闪烁直到最后一个 ajax 请求完成。

我觉得这不是一个好的解决方案。有人可以建议吗？ ![在此处输入图像描述](../Images/a81238087ccdcdfc6c07f06c4c1f473a.png)

我的`<ul> <li>`结构有四列。（见图）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T05:45:17.157

`true`解决了问题。我在这里失踪了

```
$('#allPhoto1').find('ul.ins-view').append($item).masonry( 'appended', $item, true); 
```

设置 true 从底部动画附加图像。

我做的另一件事是计算图像高度并在附加之前将其设置在图像 css 中，它将避免重叠。我将很快发布现场演示。

感谢您宝贵的时间:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-23T11:26:02.097

如果您的物品中有图像，请使用带有砖石的 imagesLoaded ( [http://imagesloaded.desandro.com/ )。](http://imagesloaded.desandro.com/)以下代码对我有用

```
//Initiate  maosnry
$container = $('#container');
$container.imagesLoaded(function(){ 
    $container.masonry({
        itemSelector: '.item'
    }); 
});

//and on ajax call append or prepend more items
var $data = $(data).filter(".items");   
$container.prepend($data).imagesLoaded(function(){
    $container.masonry( 'prepended', $data, true );
}); 
```

# visual-studio-2010 - 构建控制器随机不可用，必须手动重新启动 - TFS2010

> ID：14354195
> 
> 赞同：2
> 
> 时间：2013-01-16T08:38:54.377
> 
> 标签：visual-studio-2010, build-automation, coded-ui-tests, regression-testing

我们的问题有时是当我们用我们的 cuid 测试排队一个新的构建时，构建控制器变得“不可用”。然后我们必须登录构建控制器服务器并在 tfs 管理控制台中手动重新启动服务。这似乎是随机发生的。我已经搜索了互联网，但没有找到任何相关的答案。有些人认为防火墙或两张网卡可能是问题所在，但我们的情况并非如此。

* * *

## 事件查看器日志：

> 登录号 1.（QTController.exe，PID 1568，线程 21）ControllerSpooledJob.AddMessage：`1[Microsoft.VisualStudio.TestTools.Controller.IControllerEvents]: System.Net.Sockets.SocketException (0x80004005): No connection could be made because the target machine actively refused it 110.11.170.140:2451 Server stack trace: at System.Net.Sockets.Socket.Connect(IPAddress[] addresses, Int32 port) at System.Runtime.Remoting.Channels.RemoteConnection.CreateNewSocket(AddressFamily family) at System.Runtime.Remoting.Channels.RemoteConnection.CreateNewSocket() at System.Runtime.Remoting.Channels.RemoteConnection.GetSocket() at System.Runtime.Remoting.Channels.SocketCache.GetSocket(String machinePortAndSid, Boolean openNew) at System.Runtime.Remoting.Channels.Tcp.TcpClientTransportSink.SendRequestWithRetry(IMessage msg, ITransportHeaders requestHeaders, Stream requestStream) at System.Runtime.Remoting.Channels.Tcp.TcpClientTransportSink.ProcessMessage(IMessage msg, ITransportHeaders requestHeaders, Stream requestStream, ITransportHeaders& responseHeaders, Stream& responseStream) at System.Runtime.Remoting.Channels.BinaryClientFormatterSink.SyncProcessMessage(IMessage msg) Exception rethrown at [0]: at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg) at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type) at Microsoft.VisualStudio.TestTools.Controller.IControllerEvents.ControllerEvent(TestMessage report) at Microsoft.VisualStudio.TestTools.Controller.ControllerSpooledJob.<>c__DisplayClass6.<AddMessage>b__3(IControllerEvents eventListener) at Microsoft.VisualStudio.TestTools.Execution.RemoteObjectContainer`在 Microsoft.VisualStudio.TestTools.Controller.ControllerSpooledJob 调用事件侦听器 Microsoft.VisualStudio.TestTools.Execution.RemoteObjectContainer 1.InvokeAsRemoteUser（Action`1 调用）失败。 AddMessage(TestMessage 消息)

* * *

> 登录号 2\. (QTController.exe, PID 1568, Thread 46) 用户不在管理员组中。

* * *

> 登录号 3\. (QTController.exe, PID 1568, Thread 46) ControllerExecution: ReverseDeploymentComplete 期间错误的运行状态: Microsoft.VisualStudio.TestTools.Exceptions.EqtException: Expected state Completing, but actual state is Disposed at Microsoft.VisualStudio.TestTools.Common.StateMachine `1.在 Microsoft.VisualStudio.TestTools.Controller.ControllerExecution.ReverseDeploymentComplete（Guid runId，FileCopyFinishedReason 原因）处验证（预期的 StateEnum）

任何有关此问题的建议、想法或经验将不胜感激。

# android - 出现“在非活动 InputConnection 上完成ComposingText”错误，它来自什么？

> ID：14354196
> 
> 赞同：2
> 
> 时间：2013-01-16T08:39:06.460
> 
> 标签：android

我尝试使用`onActivityResult`. 当我`finish()`最后一次活动（by `setResult(RESULT_OK, incomingIntent);`）时，它应该进入第一个活动，但事实并非如此。UI 被冻结，除了按 BACK 按钮外，无法对其执行任何操作。

在 Logcat 中显示这个

> **标签：** IInuputConnectionWrapper
> 
> **文本：**非活动 InputConnection 上的 finishComposingText

当单击返回时，它再次工作并转到`onActivityResult`第一个活动。

我应该怎么做才能解决这个问题？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T06:54:10.060

最后我意识到这个问题与 with 无关`InuputConnectionWrapper`，而是因为 FB Session.

# location - 每次用户更改位置时如何使用 toast 通知

> ID：14354199
> 
> 赞同：0
> 
> 时间：2013-01-16T08:39:15.697
> 
> 标签：location, toast

每次用户更改位置时，我想通知用户。我在里面插入了烤面包，`onLocationChanged`但是在`makeText`from上有一条红线`toast.makeText`。它说

```
The method makeText(Context, CharSequence, int) in the type Toast is not applicable for the arguments (CurrentLocationOverlay, String, int) 
```

然后我从

```
Toast.makeText(this,"Your current speed is :" +gps.getSpeed, Toast.LENGTH_SHORT).show() 
```

至`Toast.makeText(getBaseContext(),"Your current speed is :" +gps.getSpeed, Toast.LENGTH_SHORT).show().`

然后它告诉我创建`getBaseContext()`方法。我什至把它改成了`getApplicationContext()`. 还是一样的答案。甚至改成类名还是一样

公共类 CurrentLocationOverlay 扩展 MyLocationOverlay {

```
GPSTracker gps;

  @Override
  public synchronized void onLocationChanged(Location location) {
    super.onLocationChanged(location);

    Toast.makeText(this,"Your current speed is :" +gps.getSpeed(), 
              Toast.LENGTH_SHORT).show();

    // only move to new position if enabled and we are in an border-area
    if (mc != null && centerOnCurrentLocation && inZoomActiveArea(currentPoint)) {
      mc.animateTo(getMyLocation());

    }}

  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T16:45:31.957

我很确定当类扩展 Activity 时可以使用 getApplicationContext 和 getBaseContext。

是否可以扩展 Activity 并实现 MyLocationOverlay？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-16T20:44:53.757

具体方法需要扩展Activity，然后才能实现getApplicationContect。

# python - Linux 上的 Python 脚本并在引导路径自动启动

> ID：14354209
> 
> 赞同：0
> 
> 时间：2013-01-16T08:39:58.607
> 
> 标签：python, bash

我用 Python 编写了一个脚本，它可以正常工作。由于我添加了一个配置文件（我使用了解析器），它在启动时停止了（我在我的 rc.local 文件中有它的绝对路径）。

进一步调查我发现我需要在 python 脚本中指定配置文件的绝对路径，否则它不起作用。

我喜欢它只是在脚本文件所在的文件夹中进行检查。

我是说：

如果我的 script.py 在主文件夹中，我希望它在同一文件夹中检查其配置文件...如果它在 /home/user 中，我希望它检查 /home/user。

我怎样才能做到这一点，记住 rc.local 是由 root 用户使用一些不同于我的普通用户的 ENV 变量运行的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T08:43:14.210

`__file__`基于变量的路径：

```
import os.path
scriptpath = os.path.abspath(os.path.dirname(__file__))

configfile = os.path.join(scriptpath, configfilename) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T09:48:18.220

作为上述 Martijn 答案的替代方案，您可以简单地修改 rc.local 文件以将当前工作目录更改为脚本的目录，然后在没有绝对路径的情况下运行它。这不需要您修改 Python 脚本本身。

换句话说，将您的 rc.local 更改为：

```
python /home/user/your_script.py 
```

到

```
pushd /home/user
python your_script.py
popd 
```

# c# - 使用变量从母版页调用用户控件

> ID：14354211
> 
> 赞同：0
> 
> 时间：2013-01-16T08:40:06.087
> 
> 标签：c#, asp.net, user-controls

在 default.master 我调用这个用户控件

```
<uc8:MenuMain2 ID="MenuMain2" runat="server" RootCategoryId="30" ImageHeight="40"
                    ImageWidth="900" /> 
```

我想在我的代码后面使用一个变量作为 RootCategoryId 的值，我该怎么做，如果我想使用一个我得到的变量“ `this is not script let. will output as plain text`”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T10:38:18.923

正如@Boomer 提到的，您应该使用属性，而不是类实现中的字段。

每个控件都应该关心他在 ViewState 中的属性。这是微软实践[MSDN 证明link](http://msdn.microsoft.com/library/default.asp?url=/library/en-us/cpguide/html/cpconmantainingstateincontrol.asp)

使用还不够

```
public string RootCategoryId {get; set;} 
```

在 ViewState 中保存您的值：

```
public string RootCategoryId
{
  get
  {
    return ViewState["RootCategoryId"] == null ?
       "Default Value!" :
       (string)ViewState["RootCategoryId"];
  }
  set { ViewState["RootCategoryId"] = value; }
} 
```

在这种情况下，您在源代码中分配给此属性的值将在回发期间保持不变。

另一个阅读来源： http: [//aspnetresources.com/articles/ViewState](http://aspnetresources.com/articles/ViewState)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T08:48:34.207

`MenuMain2`是一个`class`。向它添加一个名为`RootCategoryId`. 这将允许您从客户端和服务器端为其分配值：

例如，将此添加到您的 MenuMain2 控件代码隐藏中：

```
public string RootCategoryId {get; set;} 
```

# javascript - js倒计时只倒计时一次

> ID：14354213
> 
> 赞同：1
> 
> 时间：2013-01-16T08:40:09.460
> 
> 标签：javascript, html

所以我正在做一个倒计时到零的javascript倒计时，然后切换div内的文本，以便用户可以继续。这是我的代码：

```
<div id="top">
    You will be redirected in 10..
</div>

<script type="text/javascript">
    $(document).ready(function(){
        var timerId = 0;

            if(timerId == 0){
                timerId = window.setInterval(function() {
                    var timeCounter = 10;
                    var updateTime = parseInt(timeCounter,10) - 1;
                    $("#top").html("You will be redirected in " + updateTime + "...");

                    if(updateTime <= 0){
                        clearTimeout(timerId);
                        $("#top").html("Click to continue");
                    }
                }, 1000);
            }

     });
</script> 
```

它有效，但只能从 10 倒数到 9。这是为什么呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T08:42:34.067

`Timecounter`在区间内，每次迭代将其设置为 10。要使其倒计时，您必须将 timecounter 变量移到间隔函数之外：

```
<div id="top">
    You will be redirected in 10..
</div>

<script type="text/javascript">
    $(document).ready(function(){
        var timeCounter = 10,
            timerId = setInterval(function() {
               $("#top").html("You will be redirected in " + ( timeCounter-- ) + "...");
                if(timeCounter <= 0){
                    clearTimeout(timerId);
                    $("#top").html("Click to continue");
                }
            }, 1000);
     });
</script> 
```

[**小提琴**](http://jsfiddle.net/adeneo/f7uUL/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T08:49:05.037

您对 timeCount 变量进行硬编码。我的解决方案：

html代码：

```
<div id="top">
    You will be redirected in <span id="timer">10<span>..
</div> 
```

Javascript代码

```
$(document).ready(function(){
        window.setInterval(function() {
            var timeCounter = $('#timer').html();
            var updateTime = parseInt(timeCounter,10) - 1;
            $("#timer").html(updateTime);

            if(updateTime <= 0){                    
                $("#top").html("Click to continue");
            }
        }, 1000);

}); 
```

示例：http: [//jsfiddle.net/ccAz6/1/](http://jsfiddle.net/ccAz6/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T08:43:52.073

每次计时器经过时，它都会运行指定的回调。

在回调内部（每次都是给定函数的一个新实例），您设置`timeCounter`为 10。

因此，价值始终保持不变。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T08:45:12.167

您需要将时间计数器带到 window.setInterval() 函数之外。

它可以保留在 ready 函数内部，但在 setInterval() 方法之外。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-16T08:49:17.817

**[演示](http://jsfiddle.net/nRPbf/)**

```
var timerId = 0;

var timeCounter=10;

$(document).ready(function(){

            if(timerId == 0){
                timerId = window.setInterval(function() {

                    var updateTime = parseInt(timeCounter) - 1;
                    timeCounter--;

                   $("#top").html("You will be redirected in " + updateTime + "...");

                    if(updateTime <= 0){
                        clearTimeout(timerId);
                        $("#top").html("Click to continue");
                    }
                }, 1000);
            }

     }); 
```

# spring - Spring bean中的多会话工厂

> ID：14354214
> 
> 赞同：0
> 
> 时间：2013-01-16T08:40:10.483
> 
> 标签：spring, hibernate, javabeans

我需要在 spring bean 中指定多个 sessionfactories。但是问题出在哪里，我需要根据一些用户价值加载这些会话工厂。当我想实例化它时，我将如何通过一些名称/键来引用 bean 中的 sessionfactory 设置。

谢谢

# java - JSP下载后删除文件

> ID：14354219
> 
> 赞同：1
> 
> 时间：2013-01-16T08:41:05.613
> 
> 标签：java, jsp

使用以下代码下载文件

```
<%@page import="java.nio.channels.OverlappingFileLockException"%>
<%@page import="java.nio.channels.FileLock"%>
<%@page import="java.nio.channels.FileChannel"%>
<%@page import="java.sql.DriverManager"%>
<%@page import="java.sql.Connection"%>
<%@page import="java.sql.PreparedStatement"%>
<%@page import="java.text.SimpleDateFormat"%>
<%@page contentType="application/octet-stream"%>
<%@page pageEncoding="UTF-8"%>
<%@page language="java" import="java.io.*,java.net.*,java.util.*,javax.servlet.*"%>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <title>JSP Page</title>
    </head>
    <body>
        <%

        BufferedInputStream filein = null;
        BufferedOutputStream output = null;
        try {

            File file = new File("d:/ttt.mp3"); // path of file
            if (file.exists()) {

                byte b[] = new byte[2];        
                int len = 0;
                filein = new BufferedInputStream(new FileInputStream(file));
                output = new BufferedOutputStream(response.getOutputStream());
                response.setContentType("application/force-download");
                response.setHeader("content-Disposition", "attachment; filename=Backup.gz");
                response.setHeader("content-Transfer-Encoding", "binary");
                while ((len = filein.read(b)) > 0) {
                    output.write(b, 0, len);

                    output.flush();

                 //   output.close();

                }

                Calendar present = Calendar.getInstance();
                SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
                String a = sdf.format(present.getTime());
                String ip = request.getRemoteAddr();
                String mail = session.getAttribute("emailid").toString();
                try {
                    PreparedStatement pst = null;
                    String connectionURL = "jdbc:mysql://localhost/logapp_log";
                    Connection connection = null;
                    Class.forName("com.mysql.jdbc.Driver").newInstance();
                    connection = (Connection) DriverManager.getConnection(connectionURL, "root", "nic@123");
                    String query = "insert into logapp_log_table(uname,date_time,user_ip) values ('" + mail + "','" + a + "','" + ip + "')";
                    pst = connection.prepareStatement(query);
                    pst.executeUpdate();
                    pst.close();
                    connection.close();
                } catch (Exception e) {
                    System.out.println(e.getMessage());
                }
            } else {
                session.setAttribute("Ferror", "File not available Or Deleted");
                getServletContext().getRequestDispatcher("/link.jsp").forward(request, response);
            }

        } catch (Exception ex) {
            System.out.print(ex.getMessage());
        }

    %>
</body> 
```

此代码工作正常...下面的代码用于在下载后删除该文件...

```
File file = new File("d:/ttt.mp3");
       if(file.exists()) { 

        if (file.delete()) {

            System.out.println("File Deleted");
            session.setAttribute("Ferror","Deleted");
            getServletContext().getRequestDispatcher("/link.jsp").forward(request, response);
            response.sendRedirect("login.jsp");
        } else {
            System.out.println("Delete failed");
            session.setAttribute("Ferror","Under Process");
            getServletContext().getRequestDispatcher("/link.jsp").forward(request, response);
        }
       }
       else {

           session.setAttribute("Ferror","File not available Or Deleted");
           getServletContext().getRequestDispatcher("/link.jsp").forward(request, response);
       } 
```

删除代码工作正常，当我删除其他文件时，我需要下载我需要的用户下载文件时，他也可以在下载后删除该文件，但我的下载代码不起作用..它打印删除失败的其他代码

请给我删除该文件的方法..或下载完成后立即删除文件的任何其他方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T08:56:05.413

您打开文件进行阅读并忘记关闭它。由于您使用的是锁定打开文件的 Windows，因此您无法将其删除。`filein.close()`向客户端发送文件后调用finally 块。然后尝试删除它。我希望这会奏效。

在linux上它不可能发生！:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T09:01:59.007

正如@AlexR 所说，您应该先关闭文件，然后再在 Windows 下删除它。

```
try{
    filein = new BufferedInputStream(new FileInputStream(file));
    //do your work
}finally{
    if(filein!=null){
        filein.close(); //close the file
    }
} 
```

在类似 OS 的 Unix 下关闭文件输入流以释放文件处理程序。

# database-design - 使用引用 FK 的 PK 处理数据库中项目的特定类别属性

> ID：14354228
> 
> 赞同：0
> 
> 时间：2013-01-16T08:42:10.480
> 
> 标签：database-design, model, foreign-keys, primary-key

假设有一组所有人共有的属性`Item`，比如`ItemName`和`ItemImage`。

进一步假设您事先知道会有一些`Item`需要特定列的特定区别（它们可能重叠）。例如，`ToyItem`有一个特殊的列`MinimumAge`并且`CarItem`有一个特殊的列`NumWheels`。

我想在数据库中按如下方式处理：create `Item`table with a primary key `ItemId`。创建`ToyItem`主键 REFERENCES`ItemId`的表`Item`。创建一个`CarItem`表，其主键也在 REFERENCES`ItemId`中`Item`。

所以我的问题是：

1.  使用单个外键作为子项表的主键是否合理？
2.  是否有另一种设计方法可以跟踪所有不同类型的`Item`? 现在我必须提前知道这些是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T08:55:05.313

这真的取决于你的需求。特别是关于您计划如何查找数据。如果您想通过`Item`表格中的属性查找任何类型的项目，那么您的布局并不是太不合理。我仍然会建议一个不同的策略，它也很容易扩展：

保留您的`Item`表并仅添加 1 个名为`Attr`. 然后，`Attr`您可以拥有 2 个数据字段，`name`以及. 如果您愿意，您也可以使用类型，因此只能将允许的属性添加到.`value``Item``Attr.name``enum``Item`

另一种方法是为每个子类型设置表，例如`Toy`or`Car`并引用这些表`Item`（而不是相反）。

在任何情况下，您都可以`JOIN`轻松地使用这些表格，所以这完全取决于您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T12:05:31.823

听起来 Toy Items 和 Car Items 是 Items 类的子类。请参阅以下内容

[关系型数据库设计多用户类型](https://stackoverflow.com/questions/13749525/relational-database-design-multiple-user-types/13752304#13752304)

# asp.net - 我怎样才能保护我的网站

> ID：14354229
> 
> 赞同：0
> 
> 时间：2013-01-16T08:42:13.060
> 
> 标签：asp.net, ado.net, code-injection

我使用 asp.net 创建了我的网站。我使用 ado.net 在我的数据库 (sqlserver 2005) 中执行插入、更新、删除功能。我的数据库被黑客攻击了。我的表的每条记录都是由这样的数据注入的

```
</title><style>.as9y{position:absolute;clip:rect(441px,auto,auto,441px);}</style><div class=as9y>secured <a href=http://5mincashadvance.com >payday loans</a></div> 
```

所以请帮助我如何防止这种垃圾邮件注入..

这是插入功能的示例

```
myStatic.insertFields("Name, Phone, Mail, Title, Body", " U_Complaint", "'" + txtName.Text
            + "','" + txtPhone.Text + "','" + txtmail.Text + "','" + txtTitle.Text + "','" + txtBody.Text + "'"); 
```

所以这段代码有任何错误..如果不是什么问题....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:27:55.597

由于您使用的是ckeditor，因此您获得的值是带有格式的html，它将保存在您的数据库中。看到这里[http://dev.ckeditor.com/ticket/7892](http://dev.ckeditor.com/ticket/7892)了解更多

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:28:09.420

不要在不使用 sql 参数而不是 validate enteries 的情况下插入数据，以防止 sql 注入。

这是样本

```
SqlCommand com=new SqlCommand("insert into table1 (columns1,columns2) values (@columns1,@columns2)",sqlCon);
com.Parameters.AddWithValue("@columns",value); 
```

# iphone - iOS6 上的 IOHIDEventSystemCreate 失败

> ID：14354240
> 
> 赞同：3
> 
> 时间：2013-01-16T08:42:51.943
> 
> 标签：iphone, ios, jailbreak, iokit

IOHIDEventSystemCreate 在 iOS6 上总是返回 NULL（在 iOS5 上工作正常）。有谁知道为什么？

[iPhoneDevWiki 上的示例](http://iphonedevwiki.net/index.php/IOHIDFamily)

```
#include <IOKit/hid/IOHIDEventSystem.h>
#include <stdio.h>

void handle_event (void* target, void* refcon, IOHIDServiceRef service, IOHIDEventRef event) {
  // handle the events here.
  printf("Received event of type %2d from service %p.\n", IOHIDEventGetType(event), service);
}

int main () {
  // Create and open an event system.
  IOHIDEventSystemRef system = IOHIDEventSystemCreate(NULL);
  IOHIDEventSystemOpen(system, handle_event, NULL, NULL, NULL);

  printf("HID Event system should now be running. Hit enter to quit any time.\n");
  getchar();

  IOHIDEventSystemClose(system, NULL);
  CFRelease(system);
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T17:33:31.460

是的，它也不适用于我的 iOS6。我现在使用这个：

```
void *system = IOHIDEventSystemClientCreate(kCFAllocatorDefault);
IOHIDEventSystemClientScheduleWithRunLoop(system, CFRunLoopGetCurrent(), kCFRunLoopDefaultMode);
IOHIDEventSystemClientRegisterEventCallback(system, handle_event, NULL, NULL);
CFRunLoopRun(); 
```

但我不知道为什么它只报告多点触控+键盘事件。iOS6 中的 SpringBoard 称之为：

```
IOHIDEventSystemClientSetMatchingMultiple(system, array); 
```

使用包含 PrimaryUsagePage + PrimaryUsage 的数组，但我无法让它工作......例如，如果有人知道获取加速度计事件的解决方案，我也很感兴趣。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-03-23T15:18:07.023

当您将 IOKit.framework 拖到项目中时，您可以更改诸如 #include "IOHIDEventSystem.h" 之类的标题

# java - myfirstapp 在 Eclipse 中不起作用

> ID：14354245
> 
> 赞同：-2
> 
> 时间：2013-01-16T08:43:03.380
> 
> 标签：java, android, eclipse

当我尝试运行内置的 myfirstapp 项目并收到此错误时，我遇到了问题

```
[2013-01-16 00:37:34 - Emulator] could not get wglGetExtensionsStringARB
[2013-01-16 00:37:34 - Emulator] Failed to create Context 0x3005
[2013-01-16 00:37:34 - Emulator] emulator: WARNING: Could not initialize OpenglES emulation, using software renderer.
[2013-01-16 00:37:35 - MyFirstApp] New emulator found: emulator-5554
[2013-01-16 00:37:35 - MyFirstApp] Waiting for HOME ('android.process.acore') to be launched... 
```

一个窗口打开，android word 继续发光，但 hello world 文件不起作用

`p4 2.4ghz,1.5ram` 提前感谢我的电脑配置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T08:48:12.530

模拟器启动可能需要一些时间，尤其是第一次。再等一会儿，直到您在模拟器中看到主屏幕，解锁屏幕。如果到那时您还看不到任何东西，请在 LogCat 视图中查找更具体的异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T08:46:51.320

Android 模拟器是出了名的慢，而且您的计算机配置并没有完全加快这个过程。

您可能需要等待一段时间才能启动模拟器。在我的旧 P4 上，启动可能需要 20 分钟到一个小时，具体取决于 Android 版本。

您可以尝试使用较新的 x86 英特尔映像之一，因为它们需要更少的...仿真。较旧的 Android 版本将模拟整个 ARM 架构，而 x86 映像不需要 od，因为它们首先是为 x86 构建的。

除此之外，您应该在开始时启动一次模拟器，然后在剩下的开发时间里让它运行，因为它会为您节省大量时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T08:54:05.540

您的问题表明您的设备尚未准备好安装程序并运行它们。意味着模拟器本身尚未加载。所以你必须等待你的模拟器完全加载。

并查看[http://developer.android.com/](http://developer.android.com/)以获得更多帮助

检查您是否为您的模拟器设置了正确的所有设置。

# linux - 核心转储到管道失败

> ID：14354251
> 
> 赞同：1
> 
> 时间：2013-01-16T08:43:32.287
> 
> 标签：linux, pipe, mips, core, dump

在 MIPS 平台上试过这个：

```
> uname -a
Linux (none) 2.6.29 #2 Mon Jan 14 13:26:04 PST 2013 mips GNU/Linux
> ulimit -c unlimited
> which gzip
/bin/gzip
> echo "|/bin/gzip - > /home/core-%t-%s-%e.gz" > /proc/sys/kernel/core_pattern
> ./fault
hello there
Segmentation fault (core dumped)
> ls /home/core*.gz
ls: /home/core*: No such file or directory 
```

即管道到程序不起作用。如果我指定一个文件：

```
> echo "/home/core-%t-%s-%e" > /proc/sys/kernel/core_pattern 
```

然后它工作。我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T12:05:43.973

也许它失败了，因为内核没有运行任何 shell，而是尝试执行一个程序。尝试使用脚本中的重定向包装 gzip 调用并使用该脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T14:19:05.737

在这里解决了：[http](http://www.linuxquestions.org/questions/showthread.php?p=4871150#post4871150) ://www.linuxquestions.org/questions/showthread.php?p=4871150#post4871150 感谢[millgates](http://www.linuxquestions.org/questions/user/millgates-456235/)和[ydroneaud](https://stackoverflow.com/users/611560/ydroneaud)！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-12T18:01:34.013

仅仅包含在脚本中对我不起作用，我还必须在 core.sh 中指定正确的 shell 环境

```
root@fredy:/data/cores# cat /usr/local/sbin/core.sh
#!/bin/sh
exec /usr/bin/pigz -f - >"/data/cores/core-$1-$2-$3-$4-$5.gz" 
```

和

```
root@fredy:/data/cores# cat /proc/sys/kernel/core_pattern
|/usr/local/sbin/core.sh %e %p %h %s %t 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-26T16:16:14.360

稍微改进了埃里克的回答：

```
sysctl -w kernel.core_pattern='|/bin/sh -c $@ -- eval exec gzip --fast > /var/crash/core-%e.%p.gz' 
```

确实不需要将外壳保存为单独的文件。在 CentOS-7.7 上检查。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-10-22T07:58:37.767

这对我有用，应该是公认的答案。不是每个人都有能力包装在一个单独的脚本中。

```
echo "|/bin/bash -c \"\$@\" -- eval gzip > /tme/core.%E.%p.%t.gz" > /proc/sys/kernel/core_pattern 
```

# html - Cakephp 添加 Html 属性

> ID：14354253
> 
> 赞同：0
> 
> 时间：2013-01-16T08:43:42.063
> 
> 标签：html, cakephp

我需要 Cakephp 使用创建输入字段，`$this->Form->input()`并在此字段参数中添加 Html 属性 - `required="required"`。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T08:52:25.133

只需按照文档进行即可。第二个参数采用所有选项（html 和其他）：

```
$this->Form->input('field_name', array('required'=>true)); 
```

# ios - 禁用一个 UITableViewCell 可编辑

> ID：14354261
> 
> 赞同：0
> 
> 时间：2013-01-16T08:43:59.667
> 
> 标签：ios, cocoa-touch, uitableview

嘿伙计们，我目前正试图阻止一个 tableviewcell 可编辑。但是我在互联网上找到的解决方案无法正常工作。这是我使用的代码：

```
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath {
        // Return NO if you do not want the specified item to be editable.

        if (indexPath.section == 1) {
            if (indexPath.row == self.results.count+1) {
                return NO;
            }
        }

        return YES;
} 
```

这里的问题是 tableview 单元格不再可编辑，但如果我像这样启用我的 tableview 的编辑样式，它仍然显示红色删除徽章：

```
- (void) barButtonItemEditPressed: (id) sender
{
    [self.navigationController setToolbarHidden:NO animated:YES];
    [self.tableView setEditing:YES animated:YES];
    [self.navigationItem setRightBarButtonItems:[NSArray arrayWithObjects:self.barButtonItemDone, nil] animated:YES];
    [self.navigationItem setLeftBarButtonItem:self.barButtonItemCancel animated:YES];
} 
```

那么我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T08:48:25.087

您还需要添加编辑样式

```
- (UITableViewCellEditingStyle)tableView:(UITableView *)tableView editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath{

} 
```

# python - 需要从python书上看懂这个程序

> ID：14354263
> 
> 赞同：0
> 
> 时间：2013-01-16T08:44:10.547
> 
> 标签：python, oop

我正在阅读 Python Cookbook，他们在那里有这个程序：

```
class Temperature(object):
    coefficients = {'c': (1.0, 0.0, -273.15), 'f': (1.8, -273.15, 32.0),
                    'r': (1.8, 0.0, 0.0)}

    def __init__(self, **kwargs):
        # default to absolute (Kelvin) 0, but allow one named argument,
        # with name being k, c, f or r, to use any of the scales
        try:
            name, value = kwargs.popitem( )
        except KeyError:
            # no arguments, so default to k=0
            name, value = 'k', 0
        # error if there are more arguments, or the arg's name is unknown
        if kwargs or name not in 'kcfr':
            kwargs[name] = value             # put it back for diagnosis
            raise TypeError, 'invalid arguments %r' % kwargs
        setattr(self, name, float(value))

    def __getattr__(self, name):
        # maps getting of c, f, r, to computation from k
        try:
            eq = self.coefficients[name]
        except KeyError:
            # unknown name, give error message
            raise AttributeError, name
        return (self.k + eq[1]) * eq[0] + eq[2]

    def __setattr__(self, name, value):
        # maps settings of k, c, f, r, to setting of k; forbids others
        if name in self.coefficients:
            # name is c, f or r -- compute and set k
            eq = self.coefficients[name]
            self.k = (value - eq[2]) / eq[0] - eq[1]
        elif name == 'k':
            # name is k, just set it
            object.__setattr__(self, name, value)
        else:
            # unknown name, give error message
            raise AttributeError, name

    def __str__(self):
        # readable, concise representation as string
        return "%s K" % self.k

    def __repr__(self):
        # detailed, precise representation as string
        return "Temperature(k=%r)" % self.k 
```

我不明白以下内容 - 有人可以帮我这样做吗？：

1.  这个功能是做什么的`name, value = kwargs.popitem( )`
2.  做什么`__getattr__`和`__setattr__`做什么。他没有在程序的最终调用中使用这些

这是输出：

```
>>> from te import Temperature
>>> t = Temperature(f=70)        # 70 F is...
>>> print t.c                    # ...a bit over 21 C
21.1111111111
>>> t.c = 23                     # 23 C is...
>>> print t.f                    # ...a bit over 73 F
73.4 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T08:46:44.540

*   该[`kwargs.popitem()`方法](http://docs.python.org/2/library/stdtypes.html#dict.popitem)从字典中删除*一个*（任意）项目`kwargs`并将其作为`(key, value)`元组返回。然后将其分配给两个变量`name`和`value`。

    在这种情况下，这意味着该类采用*一个*关键字参数（之一`k`，，或） `f`，如果您指定多个，它会在查看您传入的关键字参数*之一*后抱怨（抛出一个） 。`c``r``TypeError`

**   [`__getattr__`](http://docs.python.org/2/reference/datamodel.html#object.__getattr__)并且是 python 在[查找属性](http://docs.python.org/2/reference/datamodel.html#customizing-attribute-access)[`__setattr__`](http://docs.python.org/2/reference/datamodel.html#object.__setattr__)时使用的特殊方法。

    `t.c`转换为`t.__getattr__('c')`，并`t.c = 23`转换为`t.__setattr__('c', 23)`。

    因此，将 或 设置`t.c`为`t.f`一个`t.r`整数将被路由到该`__setattr__`方法，然后该方法使用`self.coefficients`映射来计算和设置`self.k`。

    查找或之一被路由到该方法`t.c`，然后该方法根据映射返回一个值以及 的现有值，从而为您提供所需比例的温度。`t.f``t.r``__getattr__``self.coefficients``self.k`*

# android - 检查所有复选框

> ID：14354264
> 
> 赞同：0
> 
> 时间：2013-01-16T08:44:10.337
> 
> 标签：android, listview, checkbox

我想实现一个场景-屏幕顶部有一个复选框，并且在该顶部复选框下方有一个带有复选框的自定义列表视图。

我希望有人检查该复选框，所有列表视图复选框都应该被选中，反之亦然。

```
public class GroupMemberListAdapter extends BaseAdapter {
        private LayoutInflater inflater = null;
        Context Mycontext;

        public GroupMemberListAdapter(Context context) {
            Mycontext = context;
            inflater = LayoutInflater.from(context);

        }

        public int getCount() {
            return broadcastList.size();

        }

        public Object getItem(int paramInt) {
            return paramInt;
        }

        public long getItemId(int paramInt) {
            return paramInt;
        }

        public View getView(int position, View convertView, ViewGroup parent) {
            EventViewHolder holder;

            if (convertView == null) {
                convertView = inflater.inflate(R.layout.contactcustomlayout,
                        null);
                holder = new EventViewHolder();

                holder.mtvGroupMemberName = (TextView) convertView
                .findViewById(R.id.tvGroupMemberName);

                holder.checkbox_group_member = (CheckBox)convertView.findViewById(R.id.checkBox_GroupMember);

                /*holder.mtvGroupMemberAbout = (TextView) convertView
                        .findViewById(R.id.tvGroupMemberAbout);*/

                convertView.setTag(holder);
            } else {
                holder = (EventViewHolder) convertView.getTag();
            }
            holder.mtvGroupMemberName.setText(""+broadcastList.get(position));
            //holder.mtvGroupMemberAbout.setText(""+data.get(position));
            return convertView;
        }

        public class EventViewHolder {
            private TextView mtvGroupMemberName;
            private TextView mtvGroupMemberAbout;
            private CheckBox checkbox_group_member;
        }
    } 

checkBox_selectAll.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub

                checkAllBoxes();

            }
        });

    private void checkAllBoxes(){

        int size =  mlvGroupBroadContact.getAdapter().getCount();
        System.out.println("Size of the list is:"+size);

    } 
```

如何检查所有列表视图框？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T08:50:57.443

如果您`ListView`的选择模式是`CHOICE_MODE_MULTIPLE`或`CHOICE_MODE_SINGLE`：

```
 private void deselectAll() {

        getListView().clearChoices(); 

       //--as of GingerBread, clearChoices() alone is not sufficient--
       //--we'd have to manually un-check visible items--

        for (int i = 0; i < getListView().getChildCount(); i++) {
            View c = getListView().getChildAt(i);
            if (c instanceof Checkable) {
                ((Checkable) c).setChecked(false);
            }
        }

    }

    private void selectAll() {

        SparseBooleanArray sba = getListView().getCheckedItemPositions();

        for (int i = 0; i < getAdapter().getCount(); i++) {
            sba.put(i, true);
        }

        for (int i = 0; i < getListView().getChildCount(); i++) {
            View c = getListView().getChildAt(i);
            if (c instanceof Checkable) {
                ((Checkable) c).setChecked(true);
            }
        }

    } 
```

将`getListView()`and替换`getAdapter()`为您的`ListView`及其`Adapter`实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T08:51:15.397

您可以使用以下代码检查列表视图中的所有复选框

```
private void checkAllBoxes(){

    int size =  mlvGroupBroadContact.getAdapter().getCount();
    System.out.println("Size of the list is:"+size);
    CheckBox chk;
    for(int i=0;i<size;i++)
    {
      chk= ((CheckBox)jobList.getChildAt(i).findViewById(R.id.chk));
      chk.setChecked(true);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T09:06:44.643

从 checkBox_selectAll 点击列表更新适配器类中的布尔变量。并调用 view.getAdapter.notifyDataSetChanged();

在基于此变量的 getView 中，将其状态设置为选中或未选中。

# java - 为什么 StringTokenizer 对于 $$ 作为分隔符不能正常工作

> ID：14354265
> 
> 赞同：0
> 
> 时间：2013-01-16T08:44:18.393
> 
> 标签：java, string, tokenize, stringtokenizer

我`StringTokenizer`用来标记一个带有`$$`分隔符的字符串，但如果我的字符串是这样的，`$1$dga74`那么它会从 first 标记这个`$`。任何人都可以告诉我为什么会发生这种情况以及我可以做些什么来消除这个问题。

```
String str="/getCPage.asp?m=total&sub=$1$dga74$$/getEpage.asp?m=tatal&sub=0";
StringTokenizer tok=new StringTokenizer(str,"$$")
String url1=tok.nextToken();
String url2=tok.nextToken(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T08:47:08.410

参数中的每个字符`delim`都被视为分隔符。如果您指定，则`"$$"`指定`$`两次（第二次被忽略）。

要解决您的问题，您可以使用`Scanner`：

```
public static void main(String[] args) {

    String s = "/getCPage.asp?m=total&sub=$1$dga74$$/getEpage.asp?m=tatal&sub=0";

    Scanner scanner = new Scanner(s);
    scanner.useDelimiter("\\$\\$");

    System.out.println(scanner.next());
    System.out.println(scanner.next());
} 
```

输出：

```
/getCPage.asp?m=total&sub=$1$dga74
/getEpage.asp?m=tatal&sub=0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T08:49:18.630

StringTokenizer 仅适用于单个字符标记。

您可以使用[`Pattern`](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html)和 一个简单的循环来实现您正在寻找的结果：

```
List<String> res = new ArrayList<String>();
Pattern p = Pattern.compile("([$]{1,2}|=>?| +)");
String s = "$1$dga74$$";
Matcher m = p.matcher(s);
int pos = 0;
while (m.find()) {
    if (pos != m.start()) {
        res.add(s.substring(pos, m.start()));
    }
    res.add(m.group());
    pos = m.end();
}
if (pos != s.length()) {
    res.add(s.substring(pos));
}
for (String t : res) {
    System.out.println("'"+t+"'");
} 
```

# c - 标准 I/O 库的缓冲

> ID：14354269
> 
> 赞同：7
> 
> 时间：2013-01-16T08:44:26.150
> 
> 标签：c, stdio, buffering

*在UNIX 环境中的高级编程*（第 2 版）一书中，作者在第 5.5 节（标准 I/O 库的流操作）中写道：

> 当打开文件进行读写时（*类型*中的加号），将应用以下限制。
> 
> *   `fflush`如果没有中间的, `fseek`, `fsetpos`, 或,输出不能直接跟在输入后面`rewind`。
> *   `fseek`如果没有中间的`fsetpos`, 或`rewind`, 或遇到文件结尾的输入操作，输入不能直接跟在输出后面。

我对此感到困惑。有人可以解释一下吗？例如，在什么情况下输入输出函数调用违反上述限制会导致程序出现意外行为？我想限制的原因可能与库中的缓冲有关，但我不太清楚。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T08:54:14.913

不允许穿插输入和输出操作。例如，您不能使用格式化输入来查找文件中的特定点，然后从该点开始写入字节。这允许实现假设在任何时候，唯一的 I/O 缓冲区将只包含要读取（给您）或写入（给操作系统）的数据，而不进行任何安全检查。

```
f = fopen( "myfile", "rw" ); /* open for read and write */
fscanf( f, "hello, world\n" ); /* scan past file header */
fprintf( f, "daturghhhf\n" ); /* write some data - illegal */ 
```

但是，如果您`fseek( f, 0, SEEK_CUR );`在 the`fscanf`和 the之间进行操作，这没关系，`fprintf`因为这会更改 I/O 缓冲区的模式而不重新定位它。

为什么这样做？据我所知，因为操作系统供应商经常*希望*支持自动模式切换，但失败了。该`stdio`规范允许有缺陷的实现是兼容的，而自动模式切换的工作实现只是实现了一个兼容的扩展。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T02:13:09.093

不清楚你在问什么。

你的基本问题是“为什么书上说我不能这样做？” 好吧，这本书说你不能这样做，因为 POSIX/SUS/等。标准说它在[`fopen`规范](http://pubs.opengroup.org/onlinepubs/9699919799/functions/fopen.html)中是未定义的行为，它与[ISO C 标准](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1124.pdf)（N1124 工作草案，因为最终版本不是免费的）7.19.5.3 保持一致。

那么你问，“在什么情况下，输入输出函数调用违反上述限制会导致程序出现意外行为？”

未定义的行为总是会导致意外的行为，因为重点是不允许您期待任何事情。（参见上面链接的 C 标准中的 3.4.3 和 4。）

但最重要的是，甚至不清楚他们可以指定什么是有意义的。看这个：

```
int main(int argc, char *argv[]) {
  FILE *fp = fopen("foo", "r+");
  fseek(fp, 0, SEEK_SET);
  fwrite("foo", 1, 3, fp);
  fseek(fp, 0, SEEK_SET);
  fwrite("bar", 1, 3, fp);
  char buf[4] = { 0 };
  size_t ret = fread(buf, 1, 3, fp);
  printf("%d %s\n", (int)ret, buf);
} 
```

那么，这是否应该打印出来，`3 foo`因为那是磁盘上的内容，或者`3 bar`因为那是“概念文件”中的内容，或者`0`因为在写完之后什么都没有，所以你在 EOF 阅读？如果您认为有一个明显的答案，请考虑这样一个事实，即它可能`bar` *已经*被刷新——甚至它已经被部分刷新，因此磁盘文件现在包含`boo`.

如果您要问更实际的问题“我可以在某些情况下摆脱它吗？”，好吧，我相信在大多数 Unix 平台上，上面的代码会给您偶尔的段错误，但是`3 xyz`（3 个未初始化的字符，或者更复杂的情况下 3 个字符在缓冲区被覆盖之前碰巧在缓冲区中）其余时间。所以，不，你不能逃避它。

最后，你说，“我猜限制的原因可能与库中的缓冲有关，但我不太清楚。” 这听起来像你在问基本原理。

你是对的，它是关于缓冲的。正如我在上面所指出的，这里确实没有直观的正确做法——但也要考虑实施。请记住，Unix 的方式一直是“如果最简单和最有效的代码足够好，那就去做”。

您可以通过三种方式实现类似 stdio 的功能：

1.  使用共享缓冲区进行读写，并根据需要编写代码来切换上下文。这会有点复杂，并且会比您理想的情况更频繁地刷新缓冲区。
2.  使用两个单独的缓冲区和缓存样式代码来确定一个操作何时需要从另一个缓冲区复制和/或使另一个缓冲区无效。这更加复杂，并且使`FILE`对象占用两倍的内存。
3.  使用共享缓冲区，只是不允许在没有显式刷新的情况下交错读取和写入。这是非常简单的，并且尽可能高效。
4.  使用共享缓冲区，并在交错读取和写入之间隐式刷新。这几乎同样简单，几乎同样高效，而且更安全，但除了安全之外，在任何方面都没有更好。

因此，Unix 选择了#3，并对其进行了记录，SUS、POSIX、C89 等对这种行为进行了标准化。

你可能会说，“来吧，它不可能*那么*低效。” 好吧，您必须记住，Unix 是为 1970 年代的低端系统设计的，其基本理念是，除非有一些实际的好处，否则即使是一点点效率也不值得。但是，最重要的是，考虑到 stdio 必须处理诸如 and 之类的琐碎函数`getc`，`putc`而不仅仅是诸如 and 之类的花哨的东西`fscanf`，`fprintf`并且向那些函数（或宏）添加任何使它们慢 5 倍的任何东西都会在很多实际情况下产生巨大的差异-世界密码。

如果您查看来自 *BSD、glibc、Darwin、MSVCRT 等的现代实现（其中大部分是开源的，或者至少是商业但共享源的），它们中的大多数都以相同的方式做事。一些添加了安全检查，但它们通常会给您一个交错而不是隐式刷新的错误——毕竟，如果您的代码错误，最好告诉您您的代码错误，而不是尝试 DWIM。

例如，看看早期的 Darwin (OS X) [`fopen`](http://opensource.apple.com/source/Libc/Libc-167/stdio.subproj/fopen.c), [`fread`](http://opensource.apple.com/source/Libc/Libc-167/stdio.subproj/fread.c), and [`fwrite`](http://opensource.apple.com/source/Libc/Libc-167/stdio.subproj/fvwrite.c)(之所以选择它是因为它既漂亮又简单，并且具有易于链接的代码，具有语法颜色但也可复制粘贴）。所`fread`要做的就是从缓冲区中复制字节，并在缓冲区用完时重新填充缓冲区。没有比这更简单的了。

# android - 与其他应用共享内容

> ID：14354270
> 
> 赞同：0
> 
> 时间：2013-01-16T08:44:30.213
> 
> 标签：android, broadcastreceiver, sharedpreferences, android-contentprovider

我是安卓新手。我开发了一个库并将其与两个应用程序集成。我在那个库中有用于屏幕解锁的广播接收器。并且在共享首选项中存储了解锁计数。如果计数为 2，那么我将显示弹出窗口。每个应用程序都将拥有自己的私有共享首选项。每当我收到解锁广播并且计数为 2 时，我将显示一条弹出消息。在这里，由于我已将 lib 与两个应用程序集成，因此将出现两个弹出消息。我只想显示任何一个中的一个弹出消息的应用程序。我找不到解决方案。如何实现。有什么想法吗？

谢谢杰扬蒂

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T11:20:55.187

您可以使用包管理器列出当前设备上已安装的应用程序，如下所示：

```
PackageManager pm = getPackageManager();
pm.getInstalledPackages(0); 
```

然后每个 PackageInfo 包含包名称（com.yourname.package1，com.yourname.package2）。您还将获得安装和上次更新时间（请参阅[PackageInfo 参考](https://developer.android.com/reference/android/content/pm/PackageInfo.html)）。

然后，您可以在每个应用程序上检测是否存在另一个应用程序，然后具有某种优先级。例如，只有最后安装的应用程序会显示一个弹出窗口，或者使用您自己的优先级（应用程序 A 在应用程序 B 之前）。

# android - 从片段中调用父母的活动

> ID：14354279
> 
> 赞同：32
> 
> 时间：2013-01-16T08:45:12.807
> 
> 标签：android, android-activity, fragment

如果我在 Fragment 中，我该如何调用父母的活动？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2013-01-16T08:52:11.787

是的，通过调用 getActivity 并将其与父活动一起转换以访问其方法或变量是正确的`((ParentActivityName)getActivity())`

试试这个。

`ParentActivityName`是父类名

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-10-06T10:40:33.617

**2021 更新**

正如评论中所说，`Fragment#onAttach(Activity)` [从 API 23 开始不推荐使用](https://developer.android.com/reference/android/app/Fragment#onAttach(android.app.Activity))。反而：

```
@Override
public void onAttach(Context ctx) {
    super.onAttach(ctx);

    // This makes sure that the container activity has implemented
    // the callback interface. If not, it throws an exception
    try {
        // Only attach if the caller context is actually an Activity
        if (ctx instanceof Activity) {
          mCallback = (OnHeadlineSelectedListener) ctx;
        }
    } catch (ClassCastException e) {
          throw new ClassCastException(ctx.toString()
                + " must implement OnHeadlineSelectedListener");
    }
} 
```

* * *

**原始答案**

最合适的方法是**让您`Activity`实现`Interface`和使用 listeners**。这样，它就`Fragment`不会与任何特定的`Activity`保持它的可重复使用联系在一起。进入`Fragment`：

```
@Override
public void onAttach(Activity activity) {
    super.onAttach(activity);

    // This makes sure that the container activity has implemented
    // the callback interface. If not, it throws an exception
    try {
        mCallback = (OnHeadlineSelectedListener) activity;
    } catch (ClassCastException e) {
        throw new ClassCastException(activity.toString()
                + " must implement OnHeadlineSelectedListener");
    }
} 
```

这样，`Activity`当片段附加到片段时，您就会听到片段。

**也可以看看：**

*   [http://developer.android.com/training/basics/fragments/communicating.html](http://developer.android.com/training/basics/fragments/communicating.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-05T11:20:38.740

只需使用 getActivity() 方法调用您的父活动。

```
CardView cardView = (CardView) getActivity().findView(R.id.your_view); 
```

# java - XPath 从多个节点获取文本

> ID：14354285
> 
> 赞同：6
> 
> 时间：2013-01-16T08:45:53.883
> 
> 标签：java, xml, xpath, jaxp

我需要使用以下名称创建一个 StringArray：

`<xs:element name="xyz" type="xs:string/>`

`<xs:element name="bla" type="xs:string/>`

...

如何查询“xyz”、“bla”和更多这些？

可能是你见过的最糟糕的代码，但无论如何：

```
NodeList result1 = (NodeList) xPath.evaluate("//@name", example, XPathConstants.NODESET);

for(int i=0; i<result1.getLength();i++) {
   System.out.println("read 1:" +result1.item(i));
}
//console output is:
//read 1:name="xyz"
//read 1:name="bla"

ArrayList<String> liste; 
liste = new ArrayList<String>(result1.getLength());
for (int i=0; i<result1.getLength();i++){
   String read=xPath.evaluate("//@name", example);
   liste.add(read);
   System.out.println("read 2: "+read);      
}

System.out.println("complete list: " +liste);

//console output is:
//read 2:name="xyz"
//read 2:name="xyz"
//complete list: [xyz, xyz] 
```

**感谢您的帮助，让它以这种方式工作：**

（以防万一..如果有人在这里寻找解决方案）

```
NodeList result = (NodeList) xPath.evaluate("//@name", example, XPathConstants.NODESET);
liste = new ArrayList<String>(result.getLength());
for(int i=0; i<result.getLength();i++){
liste.add(result.item(i).getNodeValue());
}
return(liste); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:57:22.720

看起来您已成功检索结果列表，但随后您遍历它们并在每次迭代期间重新评估 XPath。看起来值在您第一次循环通过 result1 时正确打印出来，所以您为什么不直接替换它：

```
String read=xPath.evaluate("//@name", example); 
```

有了这个：

```
String read = result1.item(i).toString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-26T09:53:20.473

```
import static javax.xml.xpath.XPathConstants.NODESET;
import static org.apache.commons.lang3.StringUtils.firstNonEmpty;
import static org.apache.commons.lang3.StringUtils.trim;

/**
 * Returns first non-empty result
 * 
 * @param xpaths
 * @return first non-empty result or null if result not found
 */
public static String xpathValue(Document document, String... xpaths) {
    List<String> result = xpathValues(document, xpaths);
    if (result.isEmpty())
        return null;
    if (result.size() == 1)
        return result.get(0);
    throw new IllegalStateException(format("Non-unique result: %s", result));
}

/**
 * Returns first non-empty result
 * 
 * @param xpaths
 * @return first non-empty result or empty list if result not found
 */
public static List<String> xpathValues(Document document, String... xpaths) {
    XPathFactory f = XPathFactory.newInstance();
    return stream(xpaths)
            .map(xpath -> evaluateXpath(document, f, xpath))
            .filter(CollectionUtils::isNotEmpty)
            .findFirst().orElse(emptyList());
}

private static List<String> evaluateXpath(Document document, XPathFactory f, String xpath) {
    try {
        NodeList result = (NodeList) f.newXPath().evaluate(xpath, document, NODESET);
        List<String> liste = new ArrayList<String>(result.getLength());
        for (int i = 0; i < result.getLength(); i++) {
            Node item = result.item(i);
            liste.add(firstNonEmpty(trim(item.getTextContent()), item.getNodeValue()));
        }
        return liste;
    } catch (XPathExpressionException e) {
        throw new IllegalArgumentException("Cannot evaluate xpath: " + xpath, e);
    }
} 
```

# mongodb - Mongo vs Mongoid - 为什么一个可以连接而另一个不能？

> ID：14354287
> 
> 赞同：0
> 
> 时间：2013-01-16T08:45:59.933
> 
> 标签：mongodb, mongoid

我有一个使用 mongoid 和 mongo 的 rails-app。我将 mongoid 用于我自己的模型，我使用 mongo 因为我有 ruote 和 ruote-mon 存储。

但是在生产中；我明白了

```
Mongo::ConnectionFailure: Failed to connect to a master node at localhost:27017 
```

当我尝试连接到 ruote 存储时。即使我只是这样做`Mongo::MongoClient.new`

到目前为止，我为解决此问题而采取的步骤：

1.  我通过设置使我的 mongodb 成为一个明确的`master = true`主人`/etc/mongod.conf`

2.  没有可以干预的 $ENV 变量集`Mongo::MongoClient.new`（仔细检查）

3.  我尝试使用`Mongo::MongoClient.new(:slave_ok => true)`-相同的错误进行连接

4.  我已经多次重新启动了我的 mongo 数据库（没有成功）。

5.  我检查了我的防火墙设置，我可以使用 telnet 连接到 localhost:27017（如前所述，可以获取和存储 mongoid 文档而不会出现问题）

我疯了...有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:03:46.587

发生这种情况的原因是因为我们在连接过程中使用元运算符（$query、$orderby 等）为 ismaster 命令发送查询。此命令的输出用于确定您是否连接到主节点并且会失败，因为非常旧的 mongodb 版本不支持使用元运算符。

此修复程序将在 gem 的 1.8.2 版本中，但我强烈建议仍在运行 mongodb 1.8 之前版本的任何人进行升级。截至本文发布时，2.0 是当前的旧版本，甚至不再广泛支持 1.8。

[正如 jmettraux 所提到的，您可以在Ruby-525](https://jira.mongodb.org/browse/RUBY-525)下的 MongoDB 项目 Jira 上找到更多详细信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:58:32.140

请看：[https ://jira.mongodb.org/browse/RUBY-525](https://jira.mongodb.org/browse/RUBY-525)

应该由 1.8.2 mongo gem 修复。

# http - Play 框架和自定义 http 标头。如何？

> ID：14354289
> 
> 赞同：0
> 
> 时间：2013-01-16T08:46:02.983
> 
> 标签：http, header, playframework, nullpointerexception, playframework-1.x

我需要将带有登录信息的自定义 HTTP 标头发送到我的播放应用程序（播放 1.2.5）。该自定义标头由过滤器添加。

问题是当我尝试阅读时，play 总是抛出 NullPointerException：

```
String loggedUser = request.headers.get("loggeduser").value(); 
```

我还有一个用于测试的 servlet，其中以下从标头正确打印 vale。

```
out.println(request.getHeader("loggeduser")); 
```

我在游戏中错过了什么吗？

谢谢

**编辑**：这是我的**过滤器**

```
public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {
    CustomHeaderWrapper wrapper = new CustomHeaderWrapper((HttpServletRequest) request);
    String username = ((HttpServletRequest) request).getRemoteUser();
    wrapper.addHeader("loggeduser", username);
    chain.doFilter(wrapper, response);
} 
```

和**CustomHeaderWrapper**：

```
private Map<String, String> customHeaderMap = null;

public CustomHeaderWrapper(HttpServletRequest request) {
    super(request);
    customHeaderMap = new HashMap<String, String>();
}

@Override
public String getHeader(String name) {
    String header = super.getHeader(name);
    return (header != null) ? header : this.getParameter(name);
}

@Override
public Enumeration getHeaderNames() {
    List<String> names = Collections.list(super.getHeaderNames());
    names.addAll(Collections.list(super.getParameterNames()));
    return Collections.enumeration(names);
}

@Override
public String getParameter(String name) {
    String paramValue = super.getParameter(name); // query Strings
    if (paramValue == null) {
        paramValue = customHeaderMap.get(name);
    }
    return paramValue;
}

public void addHeader(String headerName, String headerValue) {
    customHeaderMap.put(headerName, headerValue);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:26:54.687

我创建了一个小测试项目，并使用了您问题中的代码行。它完美地工作。我使用 Chrome 的[Dev HTTP Client](https://chrome.google.com/webstore/detail/dev-http-client/aejoelaoggembcahagimdiliamlcdmfm)插件来设置标头。

`request.headers`请记住，在将所有标头添加到hashmap之前，它们都将转换为小写。所以如果你放在`"loggedUser"`里面`request.headers.get()`，它永远不会起作用。

# asp-classic - ASP 在两个页面之间丢失会话

> ID：14354293
> 
> 赞同：3
> 
> 时间：2013-01-16T08:46:05.040
> 
> 标签：asp-classic, windows-server-2008-r2

当客户从 Windows 2003 升级到 2008R2 时，我不得不为他们更新旧的 ASP+COM 应用程序。该过程虽然不是 100% 无痛，但还是成功了，但仍然存在一个问题：应用程序似乎随机丢失了会话状态，或者至少丢失了我保存会话 COM 对象的会话变量。

基本上，该应用程序的工作方式如下：

登录表单页面 -> 登录页面（在此处创建对象并保存在 Session("MyObject") 中，检查用户凭据 -> 第一个实际应用程序页面（在代码顶部检查 Session("MyObject")）。

仅当凭据正确但始终创建​​对象时才会发生第二次重定向。

但是，用户报告说他们在输入凭据后经常被重定向到登录表单页面。

经过一番调查，应用程序似乎正确地通过了登录页面，创建了 COM 对象的实例并重定向到了第一个应用程序页面。在那里，会话变量再次为空，因此用户被发送回登录表单。

更重要的是，它到目前为止还不是系统的：问题发生得相当频繁，但绝对不是一直发生。当它启动时，用户必须登录 2 或 3 次才能通过。如果应用程序被回收，它通常会在一段时间内解决问题，尽管这不是系统的，甚至不是总是必要的。

有人知道这里会发生什么吗？

编辑：一些额外的信息：

*   ASP 会话处理处于活动状态
*   在代码的任何部分都不会默默地抑制错误。如果它们发生在 COM 对象可以捕获它们的地方，或者用户可以捕获它们，它们将进入日志文件。
*   在 COM 对象日志文件、IIS 日志或服务器的事件日志中看不到任何错误。
*   使用 ProcMon 跟踪流程活动并没有发现任何特别之处。
*   查看 COM 对象日志文件，我清楚地看到正在创建 COM 对象实例，从登录页面调用“LoginUser”方法并成功返回，然后调用第一个应用程序页面并检查存储的对象是否存在在会话失败。
*   有一个 Web 服务器，没有服务器场。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T06:44:13.787

我确实有一个 ASP 网站在过去做了完全相同的事情。您需要检查日志文件并查看此应用程序或网站是否在其自己的专用应用程序池上运行，并且由于代码错误，应用程序池没有被自动回收。如果会话正在创建然后被删除，则将初始会话值传递给另一个会话 - 比如说 Session("MyObject2") 并在主页中检查它。如果用户仍在注销，那么我确信应用程序池由于太多失败（例如重定向无限循环或其他原因）而被回收。

编辑：还有一件事。在将 ASP 与 MS Access 一起使用时，我经常看到此类错误，但我永远无法弄清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T08:56:19.303

As a debugging exercise, I'd be tempted to log info from the ASP Session events including the session OnStart, OnEnd and abandon. Maybe try and get as much info from the request and then work out a given lifecycle/page flow for sessions and then determine if there is anything in common that occurs when the session is either ended or abandoned.

Also, while looking up the Session_OnEnd event, I came across an article that suggests it behaves weirdly in IIS 7.0 See [http://blogs.iis.net/lprete/archive/2009/01/04/session-onend-classic-asp-and-iis-7-0.aspx](http://blogs.iis.net/lprete/archive/2009/01/04/session-onend-classic-asp-and-iis-7-0.aspx) just in case this might be of use.

Good luck.

# ios - iOS coredata：如何为@dynamic生成的核心数据属性的访问器设置断点

> ID：14354294
> 
> 赞同：0
> 
> 时间：2013-01-16T08:46:06.827
> 
> 标签：ios, core-data

简单地使用符号断点`-[EntityName setAttribute:]`是行不通的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:31:22.737

德韦恩，

Core Data 访问器并不棘手，但它们也不是标准的。如果你想抓住一个，并且 CD 仍然可以正常运行，那么访问器需要比上面列出的 Mundi 更多的支持。（他的回答在设计和意图上是正确的，只是不完整。）

```
...
@property (nonatomic) NSString *primitiveStringAttribute;
...
@dynamic stringAttribute, primitiveStringAttribute;
...
- (NSString *) stringAttribute {

  NSString *attribute = nil;

  [self willAccessValueForKey: @"stringAttribute"];

  attribute = self.primitiveStringAttribute;

  [self  didAccessValueForKey: @"stringAttribute"];

  return attribute;
} 
```

安德鲁

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-16T09:05:48.627

您仍然可以覆盖 @dynamic 访问器。

```
...
@dynamic stringAttribute;
...

-(NSString *)stringAttribute {
    return stringAttribute;         // breakpoint here.
} 
```

# php - 处理卷曲撇号的问题

> ID：14354296
> 
> 赞同：0
> 
> 时间：2013-01-16T08:46:12.403
> 
> 标签：php, mysql

我照顾的其中一个系统每天从第三方接收 csv 文件。最近集成停止工作。我设法查明了根本原因 - 卷曲撇号。一旦替换为常规的一个导入文件，就会成功处理。

生成这些文件的第三方系统是微软产品之一，我认为是 MS Access。接收和处理这些文件的系统是在 MySql 数据库上用 PHP 编写的。

以下是我想在这里问的问题： - 这个 PHP 或 MySql 是不“喜欢”这个角色吗？- php/mysql 是否有更多此类字符会出现问题处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T08:51:18.333

我不确定“卷曲撇号”是什么，但如果它是通常的撇号（就像在“it's”中一样） - 是的，它确实如此，因为它在 MySQL 中用作字符串分隔符。如果它是其他一些字符 - 那么它在 PHP 中没有任何特殊含义。

无论如何，您必须始终根据其角色格式化 SQL 查询部分，以避免任何语法错误。请参考我之前对此事的回答：[在 PHP 中向数据库提交字符串时，我应该处理非法字符吗](https://stackoverflow.com/a/2995163/285587)

# ember.js - 在需要控制器的模板中使用共享视图的推荐方法是什么

> ID：14354305
> 
> 赞同：4
> 
> 时间：2013-01-16T08:46:39.340
> 
> 标签：ember.js

我们使用的是 Ember 的较新版本之一（路由器 V2），而不是更新的路由器 V2.2 的前沿（上次提交：668783a (2013-01-06 21:10:55 -0800)）

在我们的解决方案中，我们有几个视图组件（网格、自动完成、搜索视图等）。其中一些组件访问商店、模型等，因此它们有一个控制器来处理这些工作。这些视图在我们解决方案中的多个模板中使用。

在旧版本（pre2）中，我们使用了这样的视图组件：

```
App.ConsoleView = Ember.View.extend({
    templateName: 'console',
    searchView: App.SearchView.extend(),
    .....
}) 
```

在控制台模板中，我们使用了这样的通用视图

```
{{view view.searchView controllerBinding='App.searchController'}} 
```

我一直觉得这种方法不是最好的方法，而新版本的 Ember 让我们大吃一惊：）

现在的问题是：“在需要控制器的模板中使用共享视图的推荐方法是什么。”

在较新版本的 Ember 中，模板表达式

```
{{view view.searchView controllerBinding='App.searchController'}} 
```

不起作用，因为 App.searchController 不再在 App 命名空间中实例化。

我想过一些选择，但真的不喜欢它们。

1.  我可以通过路由器将控制器连接到“父控制器”，但是我必须在使用共享组件的每条路由中都这样做，这会很多。
2.  我可以通过一些 hacky 方式获取控制器并通过视图 init 函数中的 init 函数进行设置。

有人对如何做到这一点有任何建议吗？我找不到任何关于此的文档，并且已经用完了 googlejuize。

所有回复将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T08:53:22.557

我想我会尝试使用 {{render "search"}}，它会查找 searchController，然后实例化一个 SearchView 并连接它们。

否则，我知道目前正在讨论以便能够在视图助手中传递控制器类。但尚未实施。

更新：现在，我可能会使用您提出的第二种解决方案，使用[https://github.com/emberjs/ember.js/blob/master/packages/ember-routing/lib/ext/controller.js#L33](https://github.com/emberjs/ember.js/blob/master/packages/ember-routing/lib/ext/controller.js#L33)

```
App.ParentView = Ember.View.extend({
  searchView = Ember.View.extend({
    init: function(){
      this._super();
      this.set('controller', this.get('parentView.controller').controllerFor('search'))
    }
  })
}) 
```

在这里，我假设所有搜索视图都将共享同一个控制器（及其底层应用程序状态）。

# android - 安卓应用的自动化测试工具

> ID：14354306
> 
> 赞同：2
> 
> 时间：2013-01-16T08:46:43.607
> 
> 标签：android, unit-testing, automation, android-testing

我在我的android应用程序中完成了自动化测试，我使用[**了robotium**](http://code.google.com/p/robotium/)框架。我仍然希望能够使用其他自动化工具。那么，有人可以为安卓应用程序推荐任何其他免费可用的自动化工具，哪个是最好的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T08:55:52.920

关注[**这个答案**](https://stackoverflow.com/a/12237574/1450401)。它将为您提供有关其他工具的信息

还有[**猴跑者**](http://developer.android.com/tools/help/monkeyrunner_concepts.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:01:00.333

你应该看看[Monkeyrunner](http://developer.android.com/tools/help/monkeyrunner_concepts.html)

[尚酷](http://code.google.com/p/scirocco/)和 [RoboElectric。](http://pivotal.github.com/robolectric/)

# hadoop - 处理错误：找到接口 org.apache.hadoop.mapreduce.TaskAttemptContext，但需要类

> ID：14354309
> 
> 赞同：3
> 
> 时间：2013-01-16T08:46:50.843
> 
> 标签：hadoop, mapreduce, cloudera

我正在使用 CDH4 并使用新的 mapreduce API 编写了一个 MapReduce 应用程序。我已经针对 hadoop-core-1.0.3.jar 编译了它，当我在我的 Hadoop 集群上运行它时，我得到了错误：

错误：找到接口 org.apache.hadoop.mapreduce.TaskAttemptContext，但需要类

我提到了[这个 StackOverflow 问题](https://stackoverflow.com/questions/14215771/couchbase-hadoop-connector-sqoop-job-failed-found-interface-org-apache-hadoop)，它似乎在谈论同样的问题。答案表明我们针对 Hadoop-core-2.X.jar 文件编译代码，但我找不到类似的东西。

那么我该如何编译它才能在 CDH4 中完美运行。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T10:03:35.317

我在上述问题中发布的链接中的答案要求针对 Hadoop 2.0 库进行编译。顺便说一句，在 Hadoop 1.0 之后，将使用两个（或更多）不同的 jar，而不是使用单个 Hadoop Core jar 进行编译。

我用过：hadoop-common-2.0.2-alpha.jar hadoop-mapreduce-client-core-2.0.2-alpha.jar

用于编译我的代码，之后它运行良好，没有出现上述错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-20T01:52:28.397

对我来说，我发现我在 Avro 1.7.4 中使用了错误版本的 Hadoop（[http://www.cloudera.com/content/cloudera/en/documentation/cdh4/v4-2-0/CDH4-Release-Notes /cdh4ki_topic_2_9.html](http://www.cloudera.com/content/cloudera/en/documentation/cdh4/v4-2-0/CDH4-Release-Notes/cdh4ki_topic_2_9.html) )

# graph - 我如何索引 Neo4j 节点？

> ID：14354313
> 
> 赞同：0
> 
> 时间：2013-01-16T08:47:04.980
> 
> 标签：graph, indexing, neo4j, nodes, cypher

我正在将 auto_inedx 用于某些属性，并且效果很好，例如：

```
Start myNode=node:node_auto_index( name = "Masoud" ) 
```

但是当我有 2 个组时，例如用户和员工，并且用户和员工可能有相同的名字，我搜索答案并找到这个：

```
START movie=node:movies("title:M*") 
MATCH movie<-[:ACTS_IN]-actor
WHERE actor.name = "Kevin Bacon"
RETURN movie.title 
```

什么是电影（）？？？那是一组节点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T09:03:31.037

电影是索引的名称。如果是自动索引，我们可以使用 node_auto_index。可以选择手动创建索引。在此特定示例中，movies 是属性标题的索引名称。

当您有两个不同的节点，用户和员工时，您可以创建两个不同的索引 1\. 一个用于用户节点中的 'name' 属性 2\. 另一个用于员工节点中的 'name' 属性。

示例：如果您使用的是 Spring Data Neo4j，您可以使用注解来实现索引，

```
@Indexed(indexName = "email", indexType = IndexType.FULLTEXT) 
String email . 
```

如果您使用的是 Java 客户端，您可以在以下 neo4j 教程 docs.neo4j.org/chunked/milestone/indexing-create.html 中找到示例

希望有帮助

# ios - UITableViewCell 和 NSFetchedResultsController 的同时移动和更新

> ID：14354315
> 
> 赞同：6
> 
> 时间：2013-01-16T08:47:10.110
> 
> 标签：ios, uitableview, ios6, nsfetchedresultscontroller

我有一个包含 1 节和 2 行的简单表格视图。我正在使用 a`NSFetchedResultsController`使表与 CoreData 保持同步。我对 CD 中的一行进行了更改，这会触发要更新和移动的表格视图单元格。问题是，当`cellForRowAtIndexPath:`在 期间被调用时`NSFetchedResultsChangeUpdate`，会返回错误的单元格（这很有意义，因为单元格尚未移动）。因此，使用新更新的数据更新了错误的单元格。在那之后`NSFetchedResultsChangeMove`消息被处理，因此单元格交换位置（单元格的内容都没有更新，因为它只是一个移动调用）。结果是两个单元格都反映了来自新更新的 CD 实体的数据。重新加载表可以解决问题。我正在运行 iOS 6。换句话说，如果索引 0 处的单元格代表实体 A，索引 1 代表实体 B，并且我将实体 A 更新为 A'，以使 2 个单元格的顺序相反，结果是我看到0:A' 1:A 当我期望 0:B, 1:A' 时。

```
- (void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject atIndexPath:(NSIndexPath *)indexPath forChangeType:(NSFetchedResultsChangeType)type newIndexPath:(NSIndexPath *)newIndexPath {

    UITableView *tableView = self.tableView;

    switch(type) {

        case NSFetchedResultsChangeInsert:
            [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeDelete:
            [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeUpdate:
//the wrong cell is updated here
            [self configureCell:(SyncCell*)[tableView cellForRowAtIndexPath:indexPath] atIndexPath:indexPath];
            break;

        case NSFetchedResultsChangeMove:
            [tableView moveRowAtIndexPath:indexPath toIndexPath:newIndexPath];
//this code produces errors too
            //[tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
            //[tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T09:32:05.557

一个解决方案是：

```
[self configureCell:(SyncCell*)[tableView cellForRowAtIndexPath:indexPath] atIndexPath:newIndexPath ? newIndexPath : indexPath]; 
```

使用更新期间提供的新索引路径。然后使用删除和插入而不是移动。我仍然想知道其他人是否有任何意见。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-01T18:56:44.063

我建议你看看这篇[博文](http://oleb.net/blog/2013/02/nsfetchedresultscontroller-documentation-bug/)

> 修复错误很容易。只需依赖我上面描述的 UITableView 的行为，并将对 configureCell:atIndexPath: 的调用替换为 reloadRowsAtIndexPaths:withRowAnimation: 方法，这将自动执行正确的操作：

```
case NSFetchedResultsChangeUpdate:
   [tableView reloadRowsAtIndexPaths:@[indexPath]  withRowAnimation:UITableViewRowAnimationAutomatic];
   break; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-08-12T19:55:56.240

调用configureCell时，根据传入的对象查找indexPath，此时indexPath和newIndexPath都不可靠。例如：

```
case NSFetchedResultsChangeUpdate:
    myPath = [controller indexPathForObject:anObject];
    if (myPath) {
        [self configureCell:[tableView cellForRowAtIndexPath:indexPath] atIndexPath:myPath];
    }

    break; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-09-02T22:07:35.110

唯一对我有用的解决方案：[Thomas Worrall's Blog: Reordering rows in a UITableView with Core Data](http://tworrall.blogspot.com.br/2010/02/reordering-rows-in-uitableview-with.html)

首先，有必要在你的 NSManagedObject 中创建一个属性来挂起你的对象的最后一个订单。

```
@interface MyEntity : NSManagedObject

@property (nonatomic, retain) NSNumber * lastOrder;

@end 
```

然后，在 ViewController.m 中声明一个属性：

```
@interface ViewController ()

@property (nonatomic) BOOL isReordering;

@end 
```

在方法**tableView:moveRowAtIndexPath:toIndexPath:**中，管理临时数组中的更改：

```
- (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)fromIndexPath toIndexPath:(NSIndexPath *)toIndexPath
{
    _isReordering = YES;

    NSMutableArray *arrayNewOrder = [[_fetchedResultsController fetchedObjects] mutableCopy];
    MyEntity *myManagedObject = [arrayNewOrder objectAtIndex:fromIndexPath.row];
    [arrayNewOrder removeObjectAtIndex:fromIndexPath.row];
    [arrayNewOrder insertObject:myManagedObject atIndex:toIndexPath.row];

    for (int i=0; i < [arrayNewOrder count]; i++)
    {
        myManagedObject = [arrayNewOrder objectAtIndex:i];
        myManagedObject.lastOrder = [NSNumber numberWithInt:i];
    }

    _isReordering = NO;
    NSError *error;
    BOOL success = [self.fetchController performFetch:&error];
    if (!success)
    {
        // Handle error
    }

    success = [[self managedObjectContext] save:&error];
    if (!success)
    {
        // Handle error
    }
} 
```

Thomas 解释了执行获取和保存上下文：

> 我不完全确定为什么需要首先执行提取，但是当我这样做时它修复了很多疯狂的错误！

最后一个技巧是处理 NSFetchedResultsController 委托方法**controller:didChangeObject:atIndexPath:forChangeType:newIndexPath:**，特别是在 **NSFetchedResultsChangeMove:**

```
case NSFetchedResultsChangeMove:
{
    if (!_isReordering)
    {
        [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]
                         withRowAnimation:UITableViewRowAnimationFade];
        [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath]
                         withRowAnimation:UITableViewRowAnimationFade];
    }

    break;
} 
```

它对我有用！我希望它可以帮助你！

# jquery - jQuery远程验证多个字段

> ID：14354322
> 
> 赞同：0
> 
> 时间：2013-01-16T08:47:24.590
> 
> 标签：jquery, jquery-validate, remote-validation

我有一个包含两个字段用户 ID 和电子邮件 ID 的表单。我正在尝试验证每个字段的值是否已使用或未使用带有 jQ​​uery 远程验证的相同 php 文件。

但我的困惑是在我的情况下远程文件应该如何（validate.php）。它如何确定字段。

我的代码如下所示：

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Validationt</title>

<script type="text/javascript">
$(document).ready(function(){
   $("form").validate({
      rules: {
         userid: {
            required: true,
            remote: {
               url: "validate.php",
               type: "post",
             }
         }
          emailid: {
            required: true,
            remote: {
               url: "validate.php",
               type: "post",
             }
         }
      },
      messages: {
         userid: {
            remote: jQuery.validator.format("userid {0} is already taken")
     }
         emailid: {
            remote: jQuery.validator.format("emailid {0} is already taken")
     }
      }
   });
});
</script
</head>
<body>
<form method="post" id="form" action="">
<input id="userid" name="userid"  type="text" />
<input id="emailid" name="emailid" type="text" />
<input type="submit" name="submit" id="submit"/>
</form>
</body>
</html> 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T08:57:59.127

喜欢，

```
//validate.php

//get the post fields
$email_address = trim( $_POST["emailid"] );
//check if email exists against database, like
if( is_valid_from_db( $email_address ) ) {
  return TRUE;
}
else {
  return FALSE;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T08:57:51.567

我相信你已经看过文档： [http ://docs.jquery.com/Plugins/Validation/Methods/remote#options](http://docs.jquery.com/Plugins/Validation/Methods/remote#options)

validate.php 只需要按照它所说的来验证字段。

这个其他问题可能会有所帮助： [jQuery Remote validation](https://stackoverflow.com/questions/5178012/jquery-remote-validation)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-01T16:09:08.797

我也在寻找使用远程方法验证多个字段的问题的答案。

要单独确定每个字段，您不必为每个字段定义远程方法。而您可以为“emailid”字段定义远程方法，并且可以**使用 data 选项将“userid”与 emailid 一起**发送，如下所示。

```
 emailid: {
                required: true,
                remote: {
                   url: "validate.php",
                   type: "post",
                   data: {
                       userid: function() {
                       return $("#userid").val();
                      }
                   }
                 }
             } 
```

所以你可以像这样拥有你的js

```
<script type="text/javascript">
   $(document).ready(function(){
   $("form").validate({
      rules: {
         userid: {
            required: true
         }
          emailid: {
            required: true,
            remote: {
               url: "validate.php",
               type: "post",
               data: {
                   userid: function() {
                   return $("#userid").val();
                  }
               }
             }
         }
      },
      messages: {
         userid: {
            remote: jQuery.validator.format("userid {0} is already taken")
     }
         emailid: {
            remote: jQuery.validator.format("emailid {0} is already taken")
     }
      }
   });
});
</script> 
```

上面会将用户 ID 和电子邮件 ID 发布到您的 validate.php 中，您可以在其中遵循 DemoUser 的回答。但请确保返回值（真/假）是字符串值

# c# - 获取更新操作中更新的每个字段的值

> ID：14354324
> 
> 赞同：-1
> 
> 时间：2013-01-16T08:47:38.457
> 
> 标签：c#, asp.net, sql

我想在更新后获取字段的值，例如我有两个表

```
table1:  ID       Price          UserID         type 

table2:  IDLog    ID(FK table1)  OldPrice 
```

我更新了表 1 中的价格：

```
UPDATE table1
SET    Price = '1111'
WHERE  TYPE = 1 
```

现在我想在每次更新之前获取值 ID 表 1 并插入表 2，
我如何获取每个字段的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T08:55:47.027

恕我直言[`FOR UPDATE TRIGGER`](http://msdn.microsoft.com/en-us/library/ms189799.aspx)是要走的路。这样您就可以在数据库中包含所有日志记录逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T08:58:56.033

更好的方法是在 table1 上使用触发器（当然是 SQL Server 端）。

```
CREATE TRIGGER table1_update ON table1 FOR UPDATE 
AS 
BEGIN
       INSERT INTO table2 (IDLog, OldPrice)
       SELECT ID, Price
       FROM deleted
          INNER JOIN inserted ON
               deleted.ID = inserted.ID
               deleted.Price <> inserted.Price
END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T08:52:00.373

您可以使用输出子句：

```
update table1
output inserted.ID into table2
set Price='1111' where type=1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T08:55:14.397

您可以在更新之前将数据插入 table2。

```
INSERT INTO table2
SELECT ID, Price from table1
WHERE  TYPE = 1

--Update table1 after inserting
UPDATE table1
SET    Price = '1111'
WHERE  TYPE = 1 
```

另一种方法是为 table1 创建一个更新触发器，它将更新的数据插入到 table2。

# javascript - 使用js将pdf页面转换为图像

> ID：14354326
> 
> 赞同：2
> 
> 时间：2013-01-16T08:47:43.503
> 
> 标签：javascript, pdf, pdf-conversion

如何使用 javascript 或 jquery 将 PDF 文档导出为一系列单独的图像（jpeg、png 或 bmp 格式）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T08:55:58.380

我的立场是正确的，ppeterka 是对的。看看这个[问题](https://stackoverflow.com/questions/9328551/how-to-use-pdf-js)和这个[答案](https://stackoverflow.com/a/9328620/588079)，你会看到一个 pdf 被渲染到画布上，所以从那里你确实有一个图像。

# iphone - 无法通过拖动将 UICollectionViewCell 添加到 UICollectionView

> ID：14354327
> 
> 赞同：0
> 
> 时间：2013-01-16T08:47:44.103
> 
> 标签：iphone, ios, objective-c, uicollectionview, uicollectionviewcell

这是我第一次尝试与`UICollectionView`. 我正在尝试本[教程](https://www.youtube.com/watch?v=Pvvn1L2aPyA)。他拖着`UICollectionView`，然后他把`UICollectionViewCell`它拖到里面`Collection View`。我这样做有麻烦：当我将单元格拖到视图时，它不会粘住。只是“重新”回到控件库。我究竟做错了什么？

# vb.net - 这是 VB 6 中某些属性的正则表达式：iif (integervariable, 0, 1)？

> ID：14354328
> 
> 赞同：2
> 
> 时间：2013-01-16T08:47:56.350
> 
> 标签：vb.net, vb6, integer, iif

这是 VB 6 中某些属性的正则表达式：

```
iif (integervariable, 0, 1) 
```

如果是我想知道 iif 如何在没有任何逻辑比较的情况下解析整数参数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T08:50:56.367

它不是正则表达式，而是函数调用，`IIf`是函数。

可以在 VB 的布尔上下文中使用整数变量。在这种情况下，`0`转换为`False`非零到`True`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-16T09:04:41.340

这就是`IIf`功能。检查有关它的[文档](http://msdn.microsoft.com/en-us/library/aa445024%28v=vs.60%29.aspx)。

通常，在这种编程语言中，0`False`代表`True`.

无论如何，“你永远不应该编写依赖于 True 和 False 的等效数值的代码。” (MSDN)在“布尔类型不能准确地转换为数字类型”中查看[此处以获取更多信息。](http://msdn.microsoft.com/en-us/library/ae382yt8.aspx)

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T16:36:18.333

GSerg 和 SysDragon 有一些很好的答案。我只想添加一件事没有提到：

每当您有没有逻辑比较的 IIF 或 IF 时，例如

```
IIf (integervariable, 0, 1) 
```

或者

```
If (integervariable) Then ... 
```

逻辑比较`True`是隐含的。所以

```
IIf (integervariable, 0, 1) 
```

是相同的

```
IIf (CBool(integervariable) = True, 0, 1) 
```

和

```
If (integervariable) Then ... 
```

是相同的

```
If (CBool(integervariable) = True) Then ... 
```

请注意：正如 SysDragon 所提到的，您永远不应该依赖将数值与布尔值进行比较的代码。这就是为什么：

`Print IIF(CInt("123"), True, False)`是`True`

`Print IIF(CBool("True"), True, False)`也是`True`

因此，人们会假设在比较它们时，结果将是 True。但实际上，

`Print IIF(CInt("123") = CBool("True"), True, False)`出来作为`False`

这个例子的寓意是，如果`integervariable`是一个整数（或任何其他不是布尔值的数据类型），那么最好进行逻辑比较。在你的情况下，而不是`IIf (integervariable, 0, 1)`使用`IIf (integervariable <> 0, 0, 1)`。结果是相同的，没有潜在的不可预测的结果。

# java - 从 Lucene 2 到 Lucene 4

> ID：14354331
> 
> 赞同：0
> 
> 时间：2013-01-16T08:48:10.130
> 
> 标签：java, lucene

我正在将我的 Java 应用程序从 Lucene 2 迁移到 Lucene 4，但我找不到任何转换代码的好方法。我也尝试访问[http://lucene.apache.org/core/4_0_0-ALPHA/MIGRATE.html](http://lucene.apache.org/core/4_0_0-ALPHA/MIGRATE.html)但其中的示例代码根本不起作用（例如该方法`reader.termDocsEnum`不存在`IndexReader`or `DirectoryReader`，但仅适用于`AtomicReader`我没听说过）。

给定一个`IndexReader`被调用`indexReader`的，旧代码是：

```
Term find = new Term("field", "value");
TermDocs td = indexReader.termDocs(find);
while (termDocs.next()) {
    Document d = termDocs.doc();
    // do stuff
} 
```

如何转换该代码？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:28:38.750

以下内容应与您的情况相关：

> docs/positions 枚举不能寻找一个术语。相反，TermsEnum 能够搜索，然后您从该 TermsEnum 请求 docs/positions 枚举。

我猜你需要这个：

```
TermsEnum termsEnum = atomicReader.terms("fieldName").iterator();
BytesRef text = new BytesRef("searchTerm");
if (termsEnum.seekExact(text, true)) {
  ...
} 
```

低级 API 现在明显面向原子（非复合）读取器，因为这是获得最佳性能的唯一途径。您**可以**将您从中获得的复合阅读器包装`Directory`在 a 中`SlowCompositeReaderWrapper`，但是，正如类名已经警告的那样，它会很**慢**。

# html - 浮动权利问题

> ID：14354336
> 
> 赞同：0
> 
> 时间：2013-01-16T08:48:31.967
> 
> 标签：html, css, internet-explorer, css-float

我想让一个固定大小的 div 向右浮动，剩下的空间需要留下。我以流畅的方式做到了这一点：

HTML：

```
<div class="container">
<div id="rightCntr">
</div>
<div id="leftCntr">
</div>
</div> 
```

CSS：

```
#leftCntr { 
float: none; /* not needed, just for clarification */
background: #e8f6fe;
/* the next props are meant to keep this block independent from the other floated one */
width: auto;
overflow: hidden; 
}

#rightCntr { float: right; width: 213px;} 
```

这在 Firefox 和 Chrome 中效果很好，但在 IE8 中却完全出错了。[例子](http://www.goedkopevakantie.com/bestemming/griekenland?url=aHR0cDovL3d3dy5nb2Vka29wZXZha2FudGllLmNvbS9yZWlzYnVyZWF1L3pvbi5zdW53ZWIubmwvdmFrYW50aWVfZ3JpZWtlbmxhbmQvem9la2VuLmFzcHg/TnM9cElzQ2hhcnRlciU3YzAlN2MlN2NwUHJpY2U=)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:00:05.640

要在 IE 中获得正确的结果，您可以使用它来代替 float:right。

```
 position: absolute;
    right: 8px;
    text-align: right; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:07:29.250

示例 jsBin： http: [//jsbin.com/ixebuf/1/](http://jsbin.com/ixebuf/1/)（在 IE8、Fx 上测试）（背景放置用于测试目的）

```
.container {
  width: 100%;
  overflow: hidden;
}
#rightCntr {
  float: right;
  width: 213px;
  background: gray;
}
#leftCntr {
   margin-right: 213px; 
   background: yellow;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-16T09:53:37.257

```
#leftCntr { 
    float: left; 

    /* not needed, just for clarification */ 
    background: #e8f6fe; 

    /* the next props are meant to keep this block independent 
     *  from the other floated one    
     */ 
    width: 100px; 
    overflow: hidden; 
    height: 100px; 
} 

#rightCntr { 
    float: right; 
    width: 213px; 
    border: 1px solid red; 
    background: red; 
    height: 100px; 
    width: 100px; 
    white-space: nowrap;
} 
```

试试 this.remove 背景颜色

# rest - 检查 JIRA REST API 版本？

> ID：14354338
> 
> 赞同：8
> 
> 时间：2013-01-16T08:48:36.490
> 
> 标签：rest, jira, jira-rest-java-api

如何检查，在 JIRA 中启用了 rest api 并且它有适当的版本？

我知道，可以请求“api/latest”，但如果最新安装的版本与方法不兼容，我会打电话吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T11:31:40.687

要检查它是否已启用（如果您愿意，可以禁用它），然后您需要转到实例的管理面板并在那里启用/禁用它。具体你需要去：

> 管理 > 常规配置 > 将接受远程 API 调用设置为开/关

要检查是否启用了 REST api，只需转到（将 URL 更改为您自己的）

```
https://jira.atlassian.com/rest/api/2/user 
```

并查看页面是否加载。

我认为没有办法使用 API 来获取 API 版本，但您可以进行 API 调用并在出现错误时回退。编码取决于您要实现的目标。

您可以在以下位置找到有关 REST API 的更多信息：

*   [JIRA REST API 第 2 版教程](https://developer.atlassian.com/display/JIRADEV/JIRA+REST+API+Version+2+Tutorial)
*   [JIRA REST API 文档](http://docs.atlassian.com/jira/REST/latest/)
*   如果您停留在编码部分，请搜索[​​ Atlassian 答案](https://answers.atlassian.com/)和[SO](http://stackoverflow.com)或提出问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-01T06:52:58.820

查看 Jira 页面的页面源和搜索版本。

样本输出：

```
<meta name="application-name" content="JIRA" data-name="jira" data-version="7.9.2"><meta name="ajs-server-scheme" content="http"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-01T20:04:49.223

使用[`/rest/serverInfo`端点](https://docs.atlassian.com/software/jira/docs/api/REST/8.21.1/#serverInfo-getServerInfo)，例如`/rest/api/2/serverInfo`。

这应该返回一个带有 JIRA 版本的 JSON 字符串，例如

```
{
...
    "version": "8.x.x",
...
} 
```

# emacs - Emacs 仅在空闲状态下自动保存

> ID：14354341
> 
> 赞同：2
> 
> 时间：2013-01-16T08:48:45.730
> 
> 标签：emacs

有没有办法只在空闲状态下自动保存，即当我没有打字时。问题是文本文件可以是一个加密的大文件，并且在自动保存时每 5 秒等待一次是很痛苦的。也许我错过了一些非常简单的东西，但不能使用不同的自动保存脚本以这种方式配置它，例如这个：[http ://www.litchie.net/programs/real-auto-save.el](http://www.litchie.net/programs/real-auto-save.el)

# android - 更改微调器的图像

> ID：14354349
> 
> 赞同：0
> 
> 时间：2013-01-16T08:49:06.093
> 
> 标签：android, image, titanium

在使用 Titanium 应用程序时，遇到了我想更改 Spinner 图像的情况（即 Titanium 中的 Picker）

使用 Picker 的对象，我可以创建微调器并操作数据，但没有找到任何改变微调器默认图像的机制

想像这样[用按钮替换选择器](http://developer.appcelerator.com/question/145855/replace-picker-with-button)

还有其他想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T09:26:00.367

您可以通过其 backgroundImage 属性直接更改微调器的图像。

例如

`backgroundImage: '/images/dropdown.png`.

它仅适用于 Android，不适用于 iPhone。

因此，如果您想为 Ios 和 Android 制作相同的 UI，那么您可以遵循以下技巧。

这是可用于创建和显示 Picker 的全局方法。

```
/*
pickerData: is the array of the values which you want to display in the picker
funName: is the callback function which will be called when user will select the row from picker. this function will have two parameters first will be selected row's text and second is the index of the selected row
title: is the title of the picker
index: is the default selected index in the picker
*/

function showPicker(pickerData, funName, title, index) {
    if (title == undefined || title == "") {
        title = "";
    }
    if (pickerData == undefined || pickerData == null) {
        pickerData = [];
    }

    index = index || 0;

    if (pickerData.length <= index || index < 0) {
        index = 0;
    }

    var selectedCategory = pickerData[0];
    var win = Ti.UI.createWindow({
        backgroundColor : 'transparent',
    });

    //Check weather the Os is IOs or Android
    //globals.isIos is the parameter which is indicating that current OS is IOs or not?
    if (globals.isIos) {

        var picker = Ti.UI.createPicker({
            selectionIndicator : true,
            bottom : 0,
            width : '100%',
            isSpinner : true,
        });

        data = [];
        for (var p = 0; p < pickerData.length; p++) {
            data.push(Ti.UI.createPickerRow({
                title : pickerData[p],
                index : p
            }));
        }
        picker.add(data);
        Ti.API.info("Tab Index" + index);
        picker.setSelectedRow(0, index, true);

        var selectedIndex = 0;
        picker.addEventListener('change', function(e) {
            selectedCategory = e.row.title;
            selectedIndex = e.row.index;
        });

        //toolbar
        var done = Titanium.UI.createButton({
            title : 'Done',
            style : Titanium.UI.iPhone.SystemButtonStyle.DONE,
        });
        done.addEventListener('click', function(e) {
            funName(selectedCategory, selectedIndex);
            win.close();
        });

        var title = Titanium.UI.createLabel({
            text : title,
            textAlign : 'left',
            color : 'white',
            font : {
                fontWeight : 'bold',
                fontSize : globals.isIpad ? 18 : "14dp"

            }
        });
        var flexSpace = Titanium.UI.createButton({
            systemButton : Titanium.UI.iPhone.SystemButton.FLEXIBLE_SPACE
        });

        var toolbar = Titanium.UI.iOS.createToolbar({
            items : [title, flexSpace, done],
            bottom : 216,
            borderTop : true,
            borderBottom : false,
            barColor : '#3F3F3F'
        });

        win.addEventListener('click', function(e) {
            win.close();

        });

        win.add(picker);
        win.add(toolbar);
        win.open();
    } else {

        var pickerView = Titanium.UI.createOptionDialog({
            selectedIndex : index
        });
        pickerView.title = title;

        data = [];
        for (var p = 0; p < pickerData.length; p++) {
            data.push(pickerData[p]);
        };
        pickerView.options = data;
        pickerView.addEventListener('click', function(e) {
            selectedCategory = pickerData[e.index >= 0 ? e.index : index];
            funName(selectedCategory, e.index >= 0 ? e.index : index);

        });
        pickerView.show();
    }
    return win;
} 
```

Now create one button or lable inside your window and set the dropdown image to its background. So it will look like dropdown now handle click of the button and put below code in it.

```
var data = ["Android", "IOS", "Blackberry", "Windows"];
function callback(title, index) {
    Ti.API.info('Selected title=' + title + ' index=' + index);
}

var defaultSelected = 1;

//Here functions is the global file in which my showPicker method is defined.
var pickerShow = functions.showPicker(data, callback, "Mobile OS", defaultSelected);
//Here globals is the file in which my isIos variable is defined.
if (globals.isIos) {
    pickerShow.open();
} 
```

# objective-c - Cocoa 绑定：NSTextField 为零值的空字符串

> ID：14354359
> 
> 赞同：1
> 
> 时间：2013-01-16T08:49:43.233
> 
> 标签：objective-c, cocoa-bindings, placeholder, nstextfield

我有`NSTextField`占位符。它绑定到一些整数属性。因此，当绑定整数为零时，我想在字段中显示空文本（显示占位符）。

有可能做到吗？

（更新）

我发现这可以通过`NSNumberFormatter`- 它有`—(void) setZeroSymbol: (NSString*) string`方法。在实践中尚未尝试过...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T16:53:39.233

您可以使用 NSValueTransformer。

（以防万一）创建一个新类，NSValueTransformer 的子类。在实现中，添加如下内容：

```
+(Class)transformedValueClass {
    return [NSString class];
}

-(id)transformedValue:(id)value {
    if (value == nil) {
        return nil;
    } else {
        if ([value integerValue] == 0) {
            return @"";
        } else {
            return [NSString stringWithFormat:@"%d", [value stringValue]];
        }
    }
} 
```

在 Interface Builder 中，选择您的字段，转到绑定选项卡，然后在 Value Transformer 下拉列表中，选择或输入您创建的类名称。这应该可以防止您不必担心在其他地方对其进行修改。我不是 100% 肯定它显示占位符（我现在没有可用的 Mac）。

编辑：我可以确认这确实有效。这是我为展示如何使用它而制作的 github 项目的链接：[https ://github.com/macandyp/ZeroTransformer](https://github.com/macandyp/ZeroTransformer)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T08:52:59.517

如果您在运行时绑定，请在绑定前检查整数值。尝试

```
int i;
if (i == 0)
{
    txt.placeholder = @"text";
}
else
{
    [txt setStringValue:[NSString stringWithFormat:@"%d",i]];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T09:33:34.317

你不能做条件绑定。

您需要创建另一个属性，该属性将根据条件保存值并使用该属性并绑定到文本字段。

我正在使用`bindedString`和`bindedInteger`。`bindedString`绑定到文本字段。

每当执行某些操作时，它都会更新。

```
- (id)init{
    self = [super init];
    if (self) {
        self.bindedString=@"place holder string";
    }
    return self;
}

- (IBAction)button:(id)sender {
    if (self.bindedInteger==0) {
        self.bindedString=@"place holder string";
    }
    else{
        self.bindedString=[NSString stringWithFormat:@"%ld",self.bindedInteger];
    }
} 
```

# mschart - MSChart 辅助 AxisX2 AxisY2 线画位置到右上角 HowTo

> ID：14354361
> 
> 赞同：0
> 
> 时间：2013-01-16T08:49:45.133
> 
> 标签：mschart

您好，我是 MSChart 世界的新手，想知道为什么

辅助 AxisX2 和 AxisY2 的 LineColor、LineDashStyle、LineWidth 保持覆盖在主 AxisX 和 AxisY 的顶部？

MajorTickMark 和 MinorTickMark 按预期显示在 ChartArea 的顶部和右侧，

是否可以找到辅助轴 X2 Y2 的线型以在 ChartArea 的顶部和右侧对齐以及一些如何？

我曾考虑使用 chart1_PostPaint 事件将 X2 和 Y2 的 Line 矩形绘制在顶部和右侧位置我查看了此事件，但即使我不知道这是否可能以及重新定位的正确方法次要轴组线画

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T08:24:31.803

在 APP：超过 200 个 MSChart 交互式示例

在样品：内容|外观：轴线外观

位于：\ChartFeatures\Axis\Appearance\cscode.txt

实际上是在做我正在寻找的东西，AxisY2 LineColor 绘制在图表区域的右侧，我查看了它的代码，但仍然不知道如何将此 AxisY2 Line 对齐到右侧？

嗯，我确实将 AxisX2 Crossing 设置为零，也许我应该将这个设置为更高的最大值现在 AxisY2 Line Color 位于零而不是显示在右侧以及它的标签已经显示

很抱歉滥用这个答案，但我确实先尝试了评论，但这个留言板上的评论功能正在剥离新行，而答案功能正在剥离新行以及一些如何

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T09:00:18.717

是的，设置 AxisX2 的交叉点以在右侧出现 AxisY2 或将其移动到任何地方，解决了它，我在寻找什么

# r - R - 如何从控制台输入创建数组

> ID：14354366
> 
> 赞同：1
> 
> 时间：2013-01-16T08:50:12.840
> 
> 标签：r, input, console, command, output

大家好，提前感谢您的帮助。

在 R 中，我使用 向外部 Windows 程序发送命令，该程序`system(command)`又输出我直接在 R 控制台上看到的行（每行有多个值）。它们看起来像这样：

```
a,b,c,d,e,f,g,h    
1,2,3,4,5,6,7,8    
3,4,5,7,1,3,4,9    
7,5,3,1,8,1,5,7 
```

我想做的是创建一个数组，其中第一行作为列名，输入中的每个后续行都应该是进入这些列的值。非常感谢您为这项工作提供的任何帮助。

这是我第一次涉足这个领域，所以我很困惑如何去做。我插手了`scan()`，`pipe()`但`readLines()`一直没能成功。我对 没有特别的依恋`system(command)`，如果它有助于实现我想要的，任何可以运行可执行文件的函数都可以为我提供所需的输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T09:13:07.240

user1935457 的评论起到了作用。

`read.table(text = system(command, intern=TRUE), sep = ",", header=TRUE)`

# php - 无法从我的本地机器向谷歌发送电子邮件

> ID：14354368
> 
> 赞同：2
> 
> 时间：2013-01-16T08:50:20.517
> 
> 标签：php, linux, email, postfix-mta

为什么以下不起作用？

```
<?php

    mail('oshirowanen@gmail.com', 'some text here', 'some text here');

?> 
```

access.log 显示：

`127.0.0.1 - - [16/Jan/2013:08:46:52 +0000] "GET /test_mail.php HTTP/1.1" 200 294 "-" "Mozilla/5.0 (X11; Linux i686) AppleWebKit/536.11 (KHTML, like Gecko) Ubuntu/12.04 Chromium/20.0.1132.47 Chrome/20.0.1132.47 Safari/536.11"`

error.log 显示：

`nothing`

我还从终端尝试了以下操作：

```
echo 'body' | sendmail recipient@example.net 
```

没别的了。

mail.log 显示：

```
Jan 16 08:57:24 ubuntu postfix/smtp[4081]: connect to alt1.gmail-smtp-in.l.google.com[2a00:1450:4001:c02::1a]:25: Network is unreachable 
```

我的收件箱或垃圾邮件箱没有收到电子邮件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T09:13:00.377

> `postfix/smtp[4081]: connect to alt1.gmail-smtp-in.l.google.com[2a00:1450:4001:c02::1a]:25: Network is unreachable`

看起来您正在使用[启用 IPv6 支持的](http://www.postfix.org/IPV6_README.html)Postfix ，但您不在连接到整个 Internet 的 IPv6 网络上，或者有阻止连接的防火墙规则。

最简单的故障排除方法是编辑`main.cf`并更改`inet_protocols`为，`ipv4`而不是当前设置的任何内容。进行此更改后，请务必完全重新启动 Postfix 服务。链接的文档页面将提供有关启用 IPv6 支持的含义的更多信息。

如果您在下拉到 IPv4 后仍然无法连接，请在您的系统和 Internet 之间查找防火墙规则。

我还是要*积极鼓励大家*不要*使用*PHP 的`mail()`功能。 `mail()`不*保证*交货。它只保证它*试图*将邮件交给幕后的*某事。*当事情出错时，它不会给你任何线索。相反，请将第三方邮件库（如[Swiftmailer](http://swiftmailer.org/)或[PHPMailer](http://phpmailer.worxware.com/)）与已知工作的 SMTP 服务器结合使用。这些库在发送时出现问题时变得更加明显，并且您可以获得非常有用的功能来启动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T19:30:53.383

使用以下方法使其工作：

```
sudo apt-get install sendmail 
```

编辑您的 php.ini 以取消注释 sendmail - 我的位于

```
/etc/php5/apache2/ 
```

放

```
sendmail_path = /usr/sbin/sendmail -t -i 
```

保存更改并重新启动 apache。

# android - FeedReaderContract 的目的是什么以及如何在 OpenHelper 类中定义内部类

> ID：14354369
> 
> 赞同：5
> 
> 时间：2013-01-16T08:50:21.150
> 
> 标签：android, sqlite

我正在android中学习SQLite。对于 SQLite，我指的是 developer.android.com。但是我在阅读代码时有些困惑。他们编写了`FeedReaderContract`构造函数来防止实例化`FeedReaderContract`类，但他们没有在任何地方定义类以及和`FeedReaderContract`之间的关系。`FeedReaderContract``FeedEntry`

这是我所指[的链接。](http://developer.android.com/training/basics/data-storage/databases.html#DbHelper)我提供代码。如何在 openhelper 类中定义内部类。任何人都可以建议我的好方法吗？

例如，此代码段定义了单个表的表名和列名：

```
public static abstract class FeedEntry implements BaseColumns 
{
    public static final String TABLE_NAME = "entry";
    public static final String COLUMN_NAME_ENTRY_ID = "entryid";
    public static final String COLUMN_NAME_TITLE = "title";
    public static final String COLUMN_NAME_SUBTITLE = "subtitle";
    ...
} 
```

为了防止有人意外实例化合约类，给它一个空的构造函数。

```
 //Prevents the FeedReaderContract class from being instantiated.
private FeedReaderContract() {} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T09:11:35.877

我理解为：

```
public static class FeedReaderContract{

    // Prevents the FeedReaderContract class from being instantiated.
    private FeedReaderContract() {} 

    //The FeedEntry table definition
    public static abstract class FeedEntry implements BaseColumns {
        public static final String TABLE_NAME = "entry";
        public static final String COLUMN_NAME_ENTRY_ID = "entryid";
        public static final String COLUMN_NAME_TITLE = "title";
        public static final String COLUMN_NAME_SUBTITLE = "subtitle";
        ...
    }

    //more tables definition
} 
```

所以你不能实例化合约，但可以访问所有内部类常量。就像示例行：

```
private static final String SQL_CREATE_ENTRIES =
"CREATE TABLE " + FeedReaderContract.FeedEntry.TABLE_NAME + " (" +
FeedReaderContract.FeedEntry._ID + " INTEGER PRIMARY KEY," //continues 
```

在 class 中访问内部类的`FeedEntry`常量 (`TABLE_NAME`和) 。`_ID``FeedReaderContract`

希望能帮助到你。

# c# - 我怎样才能让 Mapreduce 按年获得？

> ID：14354371
> 
> 赞同：0
> 
> 时间：2013-01-16T08:50:38.947
> 
> 标签：c#, mongodb

任何人都可以帮助我，我的大脑堆积使这个集合到 mapreduce，我如何获得 PurchaseAmount、PurchaseReturnAmount 和 TotalAmount，以**“年份”为键。**

```
{
    "_id" : {
            "OwnerId" : "coba@aja.com",
            "SupplierId" : BinData(3,"AYC8In8bFkGYNx34poQLlg=="),
            "GroupId" : BinData(3,"mzWBCilngEGd72YpeyijcQ=="),
            "ProductId" : BinData(3,"gZ2g/syue06v8b88+0pqRA=="),
            "Date" : ISODate("2013-01-15T00:00:00Z")
    },
    "value" : {
            "OwnerId" : "oetawan@dokuku.com",
            "Date" : ISODate("2013-01-15T00:00:00Z"),
            "SupplierId" : BinData(3,"AYC8In8bFkGYNx34poQLlg=="),
            "SupplierName" : "Matahari",
            "GroupId" : BinData(3,"mzWBCilngEGd72YpeyijcQ=="),
            "GroupCode" : "Umum",
            "GroupName" : "Umum",
            "ProductId" : BinData(3,"gZ2g/syue06v8b88+0pqRA=="),
            "ProductCode" : null,
            "ProductBarcode" : "IPAD2",
            "ProductName" : "iPad 2",
            "PurchaseAmount" : 19500000,
            "PurchaseReturnAmount" : 0,
            "TotalAmount" : 19500000
    } 
```

我想用这个映射减少到 C#

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T13:53:46.223

这是一个使用 MR 的 shell 示例。当然，您也可以使用聚合框架来执行此操作，但大概您想在后台运行它；

```
db.so.mapReduce(
        function () { /* map */
            var key = this._id.Date.getFullYear();
            emit(key, { PurchaseAmount:this.value.PurchaseAmount, PurchaseReturnAmount:this.value.PurchaseReturnAmount, TotalAmount:this.value.TotalAmount } );
        }, 
        function (key, array) { /* reduce*/
            var result = { PurchaseAmount: 0, PurchaseReturnAmount: 0, TotalAmount: 0 };
            for (var i = 0; i < array.length; i++) {
                {
                    result.PurchaseAmount += array[i].PurchaseAmount;
                    result.PurchaseReturnAmount += array[i].PurchaseReturnAmount;
                    result.TotalAmount += array[i].TotalAmount;
                }
            }
            return result;
        },
        {
            out: "so_mr_example",
            query:{}
        }
);

db.so_mr_example.find(); 
```

产生类似的东西；

```
{ "_id" : 2013, "value" : { "PurchaseAmount" : 39000000, "PurchaseReturnAmount" : 0, "TotalAmount" : 39000000 } }
{ "_id" : 2014, "value" : { "PurchaseAmount" : 19500000, "PurchaseReturnAmount" : 0, "TotalAmount" : 19500000 } } 
```

# magento - Magento 1.7 - 将列添加到 sales_flat_order_item

> ID：14354380
> 
> 赞同：0
> 
> 时间：2013-01-16T08:51:02.967
> 
> 标签：magento, magento-1.7

如果我添加这些列：

```
$installer->run("ALTER TABLE sales_flat_order_item add COLUMN shipping_status_id int");
$installer->run("ALTER TABLE sales_flat_quote_item add COLUMN shipping_status_id int"); 
```

并运行此测试 2 次：

```
 $o = Mage::getModel('sales/order_item');
    $o->load(92);

    print $o->getShippingStatusId() . "\n";

    $o->setShippingStatusId(123);
    $o->save(); 
```

我什么也没看见。

如果我删除列并添加：

```
$installer->run("ALTER TABLE sales_flat_order_item add COLUMN shipping_status int");
$installer->run("ALTER TABLE sales_flat_quote_item add COLUMN shipping_status int"); 
```

并运行此测试 2 次：

```
 $o = Mage::getModel('sales/order_item');
    $o->load(92);

    print $o->getShippingStatus() . "\n";

    $o->setShippingStatus(123);
    $o->save(); 
```

然后它起作用了，价值被保存了，我可以取回它。

区别在于`_id`列。为什么这在第一个示例中不起作用？它有什么特别之处吗？我检查了几次。

做了另一个测试，添加了两列：

```
$installer->run("ALTER TABLE sales_flat_order_item add COLUMN shipping_status_id int");
$installer->run("ALTER TABLE sales_flat_order_item add COLUMN shipping_status int");

$installer->run("ALTER TABLE sales_flat_quote_item add COLUMN shipping_status_id int");
$installer->run("ALTER TABLE sales_flat_quote_item add COLUMN shipping_status int"); 
```

测试：

```
 $o = Mage::getModel('sales/order_item');
    $o->load(92);

    print $o->getItemId() . "/" . $o->getShippingStatusId() . "\n";
    print $o->getItemId() . "/" . $o->getShippingStatus() . "\n";

    $o->setShippingStatusId(123);
    $o->setShippingStatus(456);
    $o->save(); 
```

仅`456`设置和获取值。

`/var/cache`被删除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T08:56:42.403

添加列后，您需要物理删除 Magento 缓存（/var/cache/）。Zend 缓存了你的表结构，所以更新后需要刷新。

另外，尝试使用

```
$o->setData("shipping_status_id", 123); 
```

尝试使用调试器更好地理解问题。

你也可以做

```
$o->setShippingStatusId(123); 
var_dump($o->getData()); 
```

并检查数据中是否存在“shipping_status_id”

# java - Android 应用程序 - 保存状态

> ID：14354382
> 
> 赞同：1
> 
> 时间：2013-01-16T08:51:11.797
> 
> 标签：java, android, eclipse, android-activity

我有自己的应用程序类对象，我在其中存储所有应用程序数据。在 Application.onCreate 中，我创建所有应用程序对象并从 SharedPreferences 中读取数据。我的问题是，当应用程序进入后台时，它可能会被杀死。从启动器中选择应用程序后，将恢复活动堆栈（启动最后一个活动，而不是启动器活动）。问题是 Application.onCreate 没有被调用，因此所有应用程序对象都没有加载，我遇到了麻烦。什么是存储/恢复应用程序数据/对象的最佳方式。我知道它可以在Activities.onCreate/onDestroy 中完成，但我的应用程序中有很多活动并且不知道，当应用程序被杀死/重新启动时，它们将位于顶部。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T08:52:34.833

序列化您的 ApplicationObject 并将其存储到文件（简单）或对象存储（复杂）

或者您可以实现序列化/反序列化功能

其中，Serialize 会将对象属性转换为 JSON 并存储

DeSerialize 将加载 JSON 并填充 Object 并返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:08:12.257

当您启动应用程序并且它从最后一个活动而不是从启动器活动开始时，这意味着您的应用程序尚未被终止。所以在这种情况下，您的应用程序的 onCreate 方法将不会被调用，因为它还活着。

应用程序的 onCreate 方法在应用程序的生命周期内被调用一次。因此，在您的应用程序类生效之前，您应该可以访问所有应用程序数据。

如果您需要测试，当您的应用程序被杀死时会发生什么，所以您应该去“应用程序管理器”并手动杀死该应用程序。

编辑：如果您的应用程序还活着，只要您的应用程序有对数据的引用，它们就不能被 gc 删除。因此，就您而言，也许您忘记正确更新数据。所以在这种情况下，序列化对你没有帮助，否则你会有错误。

# css - 我们可以用 Ext.Carousel 做这种 UI 吗？

> ID：14354387
> 
> 赞同：2
> 
> 时间：2013-01-16T08:51:20.967
> 
> 标签：css, extjs, sencha-touch-2

我想构建一个这样的组件：

![旋转木马](../Images/b380e565424efe2824d89947863f98af.png)

此链中的每个图像都是一个项目。当我从左向右滑动或从左向右滑动时，活动项目滑入中心。我的问题：我们可以用 Ext.Carousel 完成这个吗？还是应该使用其他组件更好？是所有的 CSS 样式还是我们必须覆盖 Sencha Touch 组件类定义中的某些内容？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T10:14:03.780

有人 (elmasse) 为 sencha touch 创建了一个扩展。[你在github](https://github.com/elmasse/Ext.ux.Cover)`Ext.ux.Cover`
上得到它。论坛帖子[在这里](http://www.sencha.com/forum/showthread.php?140773-Ext.ux.Cover-Coverflow-extension-for-Sencha-Touch)。[这里的例子](http://bit.ly/SenchaCover)。

这并不能完全回答您的问题，因为您想自己制作。他从 a 扩展了他的视图，`Ext.DataView`并为动画使用了 CSS3 3d 变换。

# cakephp - 使用 cakephp2 在视图页面中进行分页

> ID：14354389
> 
> 赞同：-2
> 
> 时间：2013-01-16T08:51:29.057
> 
> 标签：cakephp, view, pagination, find

我正在使用 cakephp2 开发一个简单的网络邮件客户端。对于邮箱列表显示，我使用[Paginator 助手成功实现了分页](http://book.cakephp.org/2.0/en/core-libraries/helpers/paginator.html)

现在，当我单击邮箱列表页面中的特定项目时，将显示邮件详细信息。在消息显示页面中，我还想显示导航，例如**3 of 23 << | >>**

是否可以使用 Paginatir 助手执行此操作？

等待您的宝贵建议。问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T05:31:33.033

Paginator 文档没有提供我所要求的信息，但幸运的是，在大量阅读 cakephp2.0 文档中的模型的检索您的数据部分之后，我得到了答案。我几乎完成了**find(neighbors)**

[找你的邻居](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#find-neighbors)

现在我必须为当前记录设置记录号......然后它将完成。谢谢回复。。

# c# - 让列表中的一个元素单击加载活动 Monodroid

> ID：14354391
> 
> 赞同：0
> 
> 时间：2013-01-16T08:51:34.547
> 
> 标签：c#, xml, xamarin.android

我有一个小问题。当我从列表中选择一个项目时，它会被选中并着色，直到一切正常。然后，当我去另一个活动并回来时，我希望再次选择列表中的项目。总结一下选择列表中的一个item是在activity重新加载的时候，ListView必须知道要点击的item才可以点击loading for MonoDroid

对不起英语不好，我希望我解释一下。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:36:18.713

你想要的功能不是 Android 的正常行为，当手机处于[Touch Mode](http://android-developers.blogspot.dk/2008/12/touch-mode.html)并且使用低于 11 的 API 级别时。

因此，最简单的方法是将您的应用程序定位为 API 11 或更高版本，并将以下内容添加到您的列表项布局中：

```
android:background="?android:attr/activatedBackgroundIndicator" 
```

您还必须`ChoiceMode`在列表视图中设置：

```
listView.ChoiceMode = ChoiceMode.Single; 
```

现在要记住返回时选择的项目的位置，`ListView`您需要将其保存在某处。因此，在`ItemClick`事件处理程序中，您可以将位置保存为`SharedPreferences`：

```
var prefs = GetPreferences (FileCreationMode.Append);
var editor = prefs.Edit();
editor.PutInt("ListViewSelectedItem", args.Position);
editor.Commit(); 
```

并在返回 Activity 时设置突出显示的项目，`ListView`您可以将以下代码放入`OnResume`：

```
var prefs = GetPreferences(FileCreationMode.Append);
var val = prefs.GetInt("ListViewSelectedItem", 0);
listView.SetItemChecked(val, true); 
```

鉴于`listView`可以从该`OnResume`方法访问。

# c# - 具有大字符串输入的单元测试解析器

> ID：14354396
> 
> 赞同：5
> 
> 时间：2013-01-16T08:52:00.153
> 
> 标签：c#, unit-testing, nunit

我喜欢这里的建议：

[所以问题](https://stackoverflow.com/questions/9540472/how-to-unit-test-a-class-which-needs-a-specific-file-to-be-present)

它建议使用此代码：

```
public class SettingsReader()
{
    public SettingsReader(System.IO.StreamReader reader)
    {
        // read contents of stream...
    }
}

// In production code:
new SettingsReader(new StreamReader(File.Open("settings.xml")));

// In unit test:
new SettingsReader(new StringReader("<settings>dummy settings</settings>")); 
```

我只是想知道“提供”大型测试字符串（即要解析的文件的几行）的最佳做法是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T08:56:08.410

一种常见的方法是将包含测试数据的文件添加到单元测试程序集的资源中，并在单元测试中读取该数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T08:55:53.057

对于单元测试，最好直接在代码中显示测试数据，而不是使用嵌入的资源文件。

```
var settings = @"
<settings>
  <a>1</a>
  <b>2</b>
</settings>";

new SettingsReader(new StringReader(settings)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T08:56:37.957

只需添加一个单独的文件作为程序集嵌入资源并在单元测试中加载它。

使用[Assebmly.GetManifestResourceStream](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.getmanifestresourcestream.aspx)方法加载嵌入文件。

```
using (var stream = Assembly.GetExecutingAssembly()
       .GetManifestResourceStream(typeof(YourUnitTest), filename))
using(var reader = new StreamReader(stream))
{
    var fileContent = reader.ReadToEnd();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T08:54:59.447

最简单的方法是将文件添加到单元测试项目中，然后使用它。将文件的属性设置为“Build Action = None”和“Copy to Output Directory = Copy if newer”，然后您可以假设该文件与单元测试可执行文件位于同一文件夹中。

我发现将大字符串放入源代码本身会使阅读变得更加困难，因为您必须在源代码中格式化字符串 - 特别是如果文本包含必须转义的字符。恕我直言，拥有一个包含所有数据的文本文件会更好。

如果您想在单元测试项目之间共享测试数据，您可以通过将文件放在源代码控制下的某个位置，然后向项目添加文件的链接（而不是文件的副本）来实现。这样，您只需维护一份原始源文件的副本。

# php - 比较字符串和数组值

> ID：14354399
> 
> 赞同：0
> 
> 时间：2013-01-16T08:52:12.057
> 
> 标签：php, arrays, string

例如，我们有字符串

```
$somestring = '11;11;11;12;13'; 
```

和数组

```
 $somearray = array(
  11 => array(
    prop => array(0=>11),
    uid => 1,
  ),
  21 => array(
    prop => array(0=>12),
    uid => 2,
  ),
  32 => array(
    prop => array(0=>11),
    uid => 1,
  ),  
  34 => array(
    prop => array(0=>11),
    uid => 2,
  ),  
 35 => array(
    prop => array(0=>13),
    uid => 1,
  ),  
  36 => array(
    prop => array(0=>13),
    uid => 3,
  ),  
  37 => array(
    prop => array(0=>12),
    uid => 1,
  ),  
  38 => array(
    prop => array(0=>12),
    uid => 3,
  ),  
  39 => array(
    prop => array(0=>12),
    uid => 1,
  ),
); 
```

如何在 [prop] 的值等于 $somestring 中的相同值的条件下从 $somearray [uid] 获取并通过填充行输出它，如下所示：

```
row1:11(uid:1);11(uid:1);11(uid:2);12(uid:2);13(uid:1)
row2:11(uid:);11(uid:);11(uid:);12(uid:1);13(uid:3)
row3:11(uid:);11(uid:);11(uid:);12(uid:3);13(uid:)
row4:11(uid:);11(uid:);11(uid:);12(uid:1);13(uid:) 
```

我在这里找到了一些相关的解决方案[http://eval.in/6816](http://eval.in/6816)但它不处理重复值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T10:08:16.503

只需复制并执行，

```
<?php
error_reporting(0);
$somestring = '11;11;11;12;13';

$somearray = array(
  11 => array(
    prop => array(0=>11),
    uid => 1,
  ),
  21 => array(
    prop => array(0=>12),
    uid => 2,
  ),
  32 => array(
    prop => array(0=>11),
    uid => 1,
  ),  
  34 => array(
    prop => array(0=>11),
    uid => 2,
  ),  
 35 => array(
    prop => array(0=>13),
    uid => 1,
  ),  
  36 => array(
    prop => array(0=>13),
    uid => 3,
  ),  
  37 => array(
    prop => array(0=>12),
    uid => 1,
  ),  
  38 => array(
    prop => array(0=>12),
    uid => 3,
  ),  
  39 => array(
    prop => array(0=>12),
    uid => 1,
  ),
);

$sme_array    = explode(";",$somestring);
$somestrarray = array_unique($sme_array);
$res          = array();
foreach($somearray as $key=>$val){

    foreach($somestrarray as $value){
        if($val['prop'][0] == $value){
           $res[$value][]   = $val['uid'];
        }       
    }
}

$cnt_values  = array_count_values($somestrarray);

$num_loop    = 1;
foreach($cnt_values as $key=>$val){
  $num_loop  = (count($res[$key])/$val) > $num_loop?(count($res[$key])/$val):$num_loop;
}

for($i=0; $i<$num_loop; $i++){
    echo "row".($i+1).":";
    foreach($sme_array as $vals){
      if(array_key_exists($vals,$res)){
      echo $vals."(uid:".$res[$vals][0].");";
      array_shift($res[$vals]);
      }
    }
    echo "<br>";
}

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:00:43.953

```
<?php

$str_array=explode(';',$somestring);
$final=array();

foreach($str_array as $key => $value1)
{
 foreach($somearray as $value2)
 {
  if($value2['prop'][0]==$value1)
  {
    $final[$key][]='row'.$key.':'.$value1.'(uid:'.$value2['prop'][0].')'; // something like this
  }
 }
}
   //print_r($final);

foreach($final as $keyy => $farr)
{
 $myarr[$keyy]=implode(';',$farr);
}

//print_r($myarr);
   echo implode('<br/>',$myarr); 
```

# html - Safari上的布局差异与margin-right负数

> ID：14354401
> 
> 赞同：5
> 
> 时间：2013-01-16T08:52:21.677
> 
> 标签：html, css, safari

我偶然发现 Safari 和 Chrome/Firefox 之间的布局渲染存在差异，我不知道哪个是“正确的”。

[你可以在这里](http://jsfiddle.net/uryJJ/4/)查看 jsfiddle

在 Firefox/Chrome 上，布局符合预期，黄色 div 紧随红色 div**之后**。但在 Safari 上，黄色 div 位于红色 div**下方**。

在调查了我做错了什么之后，我发现这个错误来自 CSS 类`E`，它的属性`margin-right`（值：-11px）大于`width`我的 div 的属性（值：10px）。

我想我理解为什么 Safari 会以这种方式呈现它。class 的 div 的宽度`B`被计算为其子级的宽度之和，因为它们具有 property `float: left;`。

在这里，`widthB = widthB2*2 + widthE + marginRightE + widthC`widthB`marginRightE < -widthE`不够大，无法包含彼此相邻的每个 div。

所以我的问题是：

1.  我对 Safari 功能的理解是否正确？
2.  为什么 Chrome 和 Firefox 的呈现方式不同？他们只是没有根据负数减少父 div 的宽度`margin-right`吗？
3.  在这种情况下，正确的修正是否总是`margin-right`小于或等于 div 的宽度？

谢谢！

HTML：

```
<div class="A">
  <div class="C">
    <div class="B">
      <div class="B2"></div>
      <div class="B2"></div>
      <div class="E"></div>
      <div class="C">
        <div class="D"></div>
      </div>
    </div>
  </div>
</div> 
```

CSS：

```
.A {
  background-color: blue;
  height: 200px;
}

.B {
  height:100px;
}
.B2 {
  background-color: red;
  height: 100px;
  width: 100px;
  float: left;
}
.C {
  float: left;
}
.D {
  height: 40px;
  width: 40px;
  float:left;
  background-color: yellow;
}
.E {
  height: 50px;
  width: 10px;
  position: relative;
  left: -10px;
  margin-right: -11px;
  background-color: black;
  float: left;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T22:54:07.343

我不确定您期望在 JS 小提琴中使用 CSS 会发生什么。您正在研究未定义的行为。我这样说是因为：

*   'C' 是浮动的，但没有定义的宽度。根据布局的复杂性，这会导致各种浏览器出现问题。

*   任何浮动元素都不会被清除。浮动时，必须使用某些描述的 clearfix，无论是`clear:both`，等等。

如果您调整标记并添加清除修复，您会看到内容始终为`239px`. 见[http://jsfiddle.net/eaFn9/](http://jsfiddle.net/eaFn9/)

*但是*，相对定位的项目“E”和边距似乎对宽度计算产生了负面影响，因为 Chrome 的网络检查器似乎总是奇怪地报告该元素的负边距。

如果您在网络检查器中使用它，您会发现负边距几乎是导致下降的原因。我认为这可能是由于容器没有宽度，并且本身不是相对位置。

**怎么修？**

就个人而言，我想重新编写您的布局以在所有浮动上包含固定宽度，减少浮动的嵌套并在可能的情况下清除。它似乎过于复杂，但如果没有真实世界的用例，就很难重写。

但是，在我看来，您可以将 'B2' + 'E' 元素包装在浮动且相对定位的包装器中，然后在 'E' 上使用绝对定位来产生相同的效果并删除负边距。

这是我想出的 JSFiddle：http: [//jsfiddle.net/jV3Ub/](http://jsfiddle.net/jV3Ub/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T00:50:32.217

抱歉，这不是一个真正的答案，但发表评论太长了......无论如何，我花了一分钟才弄清楚这一点。

我在 Mac OS X 10.8.2、Chrome 24.0 (Mac) 和 Safari 6.0.2 (Mac) 上使用了 Firefox 19。使用网络检查器工具，我意识到 div 的计算方式确实不同。我不擅长计算，但我花时间坐下来彻底研究一下，我确实像你一样理解 Safari 的计算。

在 Safari 中，似乎 div B 的宽度不足以包含黄色 div (C)，因此它似乎将其拒绝到底部。作为记录，在我的测试中，我在 FF 和 Chrome 中看到红色 div 右侧的黄色 div，而 Safari 将其显示在红色下方和左上角。我不确定这会有所帮助，但我只能建议您使用现在集成到所有现代浏览器中的 Web 检查器工具来调试它。

我不确定为什么会发生这种情况，我所知道的是，只需将 E 的宽度更改 1px，如下所示：

```
.E {
  height: 50px;
  width: 11px; /* added 1px to this property */
  position: relative;
  left: -10px;
  margin-right: -11px;
  background-color: black;
  float: left;
} 
```

它在 Safari 中正确显示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T18:46:52.660

对类`.D`和进行以下更改`.E`：

```
.D {
  float:left;
  height: 40px;
  width: 40px;
  background-color: yellow;
  margin-left: -11px;
}
.E{
  height: 50px;
  width: 10px;
  position: relative;
  left: -10px;
  background-color: black;
  float: left;
} 
```

演示：http: [//jsfiddle.net/uryJJ/22/](http://jsfiddle.net/uryJJ/22/)

我希望这有帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T08:53:35.117

第二次编辑：

我认为我们应该将这两个问题联系起来：[https](https://stackoverflow.com/questions/4989930/css-negative-margin) ://stackoverflow.com/questions/4989930/css-negative-margin以及[为什么使用负边距？](https://stackoverflow.com/questions/1840237/why-use-negative-margins)到这个。

另请参阅有关边际的 W3C 规范：http: [//www.w3.org/TR/CSS2/box.html#margin-properties](http://www.w3.org/TR/CSS2/box.html#margin-properties)。第 8.3.1 节可能实际上解释了您的样本发生了什么。在 Safari 中无法正确呈现的折叠边距问题。

原帖：

所以我的问题是：

1）我对 Safari 所做的事情的理解是否正确。为什么 Chrome 和 Firefox 的呈现方式不同？听起来可能就是这样，但是，真的，谁在乎呢？你没有得到你想要的结果。除非您不关心 Safari 用户，否则您应该更改代码。

2）他们只是没有根据负边距减少父 div 的宽度吗？可能，但同样，不是很重要。

3）在这种情况下，正确的修正是否总是具有小于或等于 div 宽度的边距？我会说是的。为了解决这个问题并获得你想要的结果，我会将 E 类的 div 移动到 B2 类的最右边的 div 中。然后将 E 向右浮动并移除 position、left 和 margin-right 属性。

```
.E {
height: 50px;
width: 10px;
background-color: black;
float: right;
} 
```

[http://jsfiddle.net/uryJJ/32/](http://jsfiddle.net/uryJJ/32/)

第一次编辑

```
.D {
height: 40px;
width: 40px;
float:left;
background-color: yellow;
position:relative;
left: -10px;
}
.E {
height: 50px;
width: 10px;
position: relative;
left: -10px;
background-color: black;
float: left;
} 
```

[http://jsfiddle.net/uryJJ/33/](http://jsfiddle.net/uryJJ/33/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T19:08:53.480

抱歉，我可能会把它打死，但这可以解决它：

```
.E {
height: 50px;
width: 10px;
margin-left: -10px;
background-color: black;
float: left;
} 
```

[http://jsfiddle.net/uryJJ/35/](http://jsfiddle.net/uryJJ/35/)

直到现在，我才喜欢负边距值。

# php - 在 html 表单的名称字段中自动获取登录用户的用户名

> ID：14354407
> 
> 赞同：0
> 
> 时间：2013-01-16T08:52:45.660
> 
> 标签：php, html

目前登录的用户必须手动输入他们的姓名才能发表评论或发帖，但我想在自动插入的 html 表单的字段名称中获取用户名。同时用户也不能更改名称字段。

我如何在用户名字段中创建这样的会话，我试过但代码不起作用..

[像这样](http://img685.imageshack.us/img685/5544/55316393.jpg)

```
//create the form to submit comments
//you can add more fields, but make sure you add them to the db table and the page, submitcomment.php
    echo "
<a name=\"post\">
<div id=\"submitcomment\" class=\"submitcomment\">
<form name=\"submitcomment\" method=\"post\" action=\"submitcomment.php\" onSubmit=\" return form_Validator(this)\">
<table width=\"100%\">
        <tr>
                <th colspan=\"2\"><h4><span>Leave your comment:</span></h4></th>
        </tr> 
```

> ```
>  <th scope=\"row\"><p class=\"req\">Name:</p></th>
>               <td><input type= class=\"form\" tabindex=\"1\" id=\"name\" name=\"name\" /></td>
>       </tr> 
> ```

```
 <tr>
                <th scope=\"row\"><p class=\"opt\">Email:</p></th>
                <td><input class=\"form\" tabindex=\"2\" id=\"email\" name=\"email\" /></td>
        </tr>
        <tr>

                <th scope=\"row\"><p class=\"opt\">URL:</p></th>
                <td><input class=\"form\" tabindex=\"3\" id=\"url\" name=\"url\" /></td>
        </tr>
        <tr valign=\"top\">
                <th scope=\"row\"><p class=\"req\">Comments:</p><br /></th>
                <td><textarea class=\"formtext\" tabindex=\"4\" id=\"message\" name=\"message\" rows=\"10\" cols=\"50\"></textarea></td>
        </tr>

        <tr>    
                <td>&nbsp;</td>
                <td><input type=\"submit\" name=\"post\" class=\"submit\" value=\"Submit Comment\" /><br />
                <p>Note:  Emails will not be visible or used in any way, and are not required.  Please keep comments relevant. Any content deemed inappropriate or offensive may be edited and/or deleted. </p>
                <p>In Beta Phase</p>

</td>
        </tr>
</table>
<input type=\"hidden\" name=\"tuturl\" value=\"$tuturl\" />
<input type=\"hidden\" name=\"tutid2\" value=\"$tutid2\" />
</form>

</div>
";
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:06:20.227

```
<?php
session_start();

// after user logs in successfully

$_SESSION['username']=$username;

// to read it
$username=$_SESSION['username'];
// then store $username in database when inserting comment

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:52:46.240

尝试在要自动添加名称的页面上使用以下代码。

```
 <?php
    session_start();
    $_SESSION['name']=$name;
    $name=$_SESSION['name'];  // assign session to name variable
?> 
```

在要显示名称的任何位置写入 $name。

然后编辑您的以下代码行

```
 <td><input type= class=\"form\" tabindex=\"1\" id=\"name\" name=\"$name\" readonly=\"readonly\" /></td> 
```

# javascript - Html5 帮助文件？

> ID：14354410
> 
> 赞同：5
> 
> 时间：2013-01-16T08:53:18.493
> 
> 标签：javascript, html, modernizr

我们正在编写由另一家公司设计的网站逻辑。（他们向我们发送了 html 文件）

然而，当我们查看他们的源代码 html 时，我们看到：

**1)** `modernizr.js`

**2）**创建html5元素脚本：

```
<!--[if lt IE 9]>
       <script>
          document.createElement('header');
          document.createElement('nav');
          document.createElement('section');
          document.createElement('article');
          document.createElement('aside');
          document.createElement('footer');
       </script>
    <![endif]--> 
```

**3）** HTML5 shiv JS：

```
<!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]--> 
```

**4)**`css3-mediaqueries.js`媒体查询参考

**5)** `Respond.js v1.1.0` 最小/最大宽度媒体查询

我对 html5 integration 了解不多，但我认为这里有一个*冗余组件*。

比如我听说`modernizr` *已经包含*了提供的解决方案`html5 shiv`。

作为我想使用的假设，我`modernizr.js`应该保留哪些组件？（*我用数字标记了每个部分，以便您更容易参考*）。

[（ps[这个问题](https://stackoverflow.com/questions/3855294/html5shiv-vs-dean-edwards-ie7-js-vs-modernizr-which-to-choose)没有多大帮助，因为我有更多的部分）]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:09:01.080

所有这些都旨在做两件事：

1.  允许在旧版浏览器（1、2 和 3）中呈现 HTML5 元素
2.  在旧版浏览器（4 和 5）中启用 CSS 媒体查询

今天使用它们的方式，在您的示例中，您将有很多重叠的功能，这是不必要的。我对此的看法如下。

**HTML 支持**

如果您将 Modernizer 用于其他目的，而不仅仅是在旧浏览器中启用 HTML5 元素，那么我建议您仅使用 Modernizer 并删除 2 和 3，因为 Modernizer 包括 HTML5 shiv。

如果您不使用 Modernizer，则可能没有必要加载整个库。那么你最好只使用 HTML5 shiv，并带有条件的 IE 注释。

使用没有。如果您使用 1 或 3，则 2 似乎完全多余。

**媒体查询支持**

当涉及到 4 和 5 时，它们都通过在缺乏本机支持的浏览器中添加对媒体查询的支持来在旧浏览器中启用响应式网站。

我只有个人经验`Respond.js`，非常轻量级。限制是它只会添加对`min/max-width`媒体查询的支持。如果这对您的设计来说足够了，那么没有。5个就足够了。

如果您需要更广泛的媒体查询支持，我相信您需要考虑否。4 相反，但我想你可以摆脱不。5，因为它是多余的。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-16T08:59:46.613

根据[modernizr 网页上](http://modernizr.com/)的声明，您不需要任何其他检查来测试 HTML5 元素和 CSS3 媒体查询。

这意味着您可以放弃所有其他库，但仍需要返回检查。

# java - 从授权标头中的 Kerberos 票证中读取用户名

> ID：14354414
> 
> 赞同：9
> 
> 时间：2013-01-16T08:53:40.690
> 
> 标签：java, kerberos

我想从 Authorization HTTP 标头中的 Kerberos 票证中读取用户名。我正在使用 Java。

我花了几天时间尝试通过阅读有关该主题的一堆网站来实现这一目标，但未能做到这一点。Kerberos 对我来说是新的/陌生的。

这就是我所取得的成就：

*   当用户首次访问站点时 - 没有 Authorization 标头，服务器以 401 + 标头响应：WWW-Authenticate=Negotiate。
*   各种神奇的事情发生在客户端。
*   用户返回一个 HTTP 请求，其中包含 Authorization 标头，其值如下：“Negotiate YHcGB...==”
*   将 base64 编码的票证解码为字节数组。

从这里开始，这是一次穿越未知的恐怖之旅。据我所知，接下来的步骤应该是：

*   使用用户登录到 AD/Kerberos/服务器。
*   解码票证。

这就是我所拥有的：

登录.conf

```
 ServicePrincipalLoginContext
{
      com.sun.security.auth.module.Krb5LoginModule 
      required 
      principal="HTTP/some.server.com@MY.DOMAIN.COM" 
      doNotPrompt=true
      useTicketCache=true
      password=mYpasSword
      debug=true;
}; 
```

Java类.java

```
String encodedTicket = authorization.substring("Negotiate ".length());
byte[] ticket = Base64.decode(encodedTicket);       

LoginContext lc = new LoginContext("ServicePrincipalLoginContext");
lc.login();
Subject serviceSubject = lc.getSubject();
Subject.doAs(serviceSubject, new ServiceTicketDecoder(ticket)); 
```

ServiceTicketDecoder.java

```
public String run() throws Exception {
    Oid kerberos5Oid = new Oid("1.2.840.113554.1.2.2");

    GSSManager gssManager = GSSManager.getInstance();

    String service = "krbtgt/MY.DOMAIN.COM@MY.DOMAIN.COM";
    GSSName serviceName = gssManager.createName(service, GSSName.NT_USER_NAME);

    GSSCredential serviceCredentials = gssManager.createCredential(serviceName, GSSCredential.INDEFINITE_LIFETIME, kerberos5Oid, GSSCredential.ACCEPT_ONLY);

    GSSContext gssContext = gssManager.createContext(serviceCredentials);
    gssContext.acceptSecContext(this.serviceTicket, 0, this.serviceTicket.length);

    GSSName srcName = gssContext.getSrcName();
    return srcName.toString;
} 
```

JavaClass.java 中的登录可以正常工作，所以我假设 login.conf 可以。在 ServiceTicketDecoder.java 中的“GSSCredential serviceCredentials = gssManager.createCredential(...”上，引发以下异常：

```
java.security.PrivilegedActionException: GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos Key) 
```

我不确定这是否是正确的方法。我也不知道“字符串服务”的价值应该是什么或如何获取该信息。你能帮助我吗？

* * *

编辑：login.conf

```
 ServicePrincipalLoginContext
{
      com.sun.security.auth.module.Krb5LoginModule 
      required 
      principal="HTTP/some.server.com@MY.DOMAIN.COM" 
      doNotPrompt=true
      useTicketCache=true
      keyTab="C:/server-http.keytab" 
      debug=true;
}; 
```

我收到了一个密钥表文件。显然 HTTP/some.server.com 用户的帐户已经是服务主体帐户。我现在在 lc.login() 的 JavaClass.java 上有一个问题：

```
javax.security.auth.login.LoginException: KDC has no support for encryption type (14)
Caused by: KrbException: KDC has no support for encryption type (14)
Caused by: KrbException: Identifier doesn't match expected value (906) 
```

keytab 文件使用 des-cbc-md5 加密，我在 krb.conf 文件中定义了以下内容：

```
[libdefaults]
default_realm = MY.DOMAIN.COM
default_tkt_enctypes = des-cbc-md5
default_tgs_enctypes = des-cbc-md5 
```

如果我将默认 enctypes 更改为例如 aes128-cts，我会收到以下异常：

```
javax.security.auth.login.LoginException: Do not have keys of types listed in default_tkt_enctypes available; only have keys of following type: DES CBC mode with MD5 
```

我不明白有什么问题...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T09:09:21.360

Kerberos 是一个**受信任的第三方**安全系统：您从客户端收到的安全令牌只能由您解密，而无需联系任何 Kerberos 基础架构服务器（例如 KDC）。你走在正确的轨道上；但是，您似乎缺少可指导您进一步研究的 Kerberos 背景知识。

实现这一点的方法是，在服务器上，您需要一个包含服务器密钥的**keytab文件。**Kerberos 服务器（我认为是 Microsoft Windows Server）必须为您的服务创建一个**服务主体帐户**。管理员可以向您提供为此帐户生成的 keytab 文件，其中将包含密钥。

然后你需要配置服务器来找到这个keytab文件；它用于涉及`LoginContext.login`. 接受安全上下文的代码必须在`doPrivileged`服务器端凭据生效的代码段内执行。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-06-04T00:01:59.317

如果您想要的只是用户名，那么还有一种更简单的方法。

```
request.getUserPrincipal().getName() 
```

[http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getUserPrincipal()](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getUserPrincipal()) [http://docs.oracle.com/javase/7/docs/api/java/security/Principal.html](http://docs.oracle.com/javase/7/docs/api/java/security/Principal.html)

# algorithm - 检索二维图上最外层的点

> ID：14354415
> 
> 赞同：0
> 
> 时间：2013-01-16T08:53:41.237
> 
> 标签：algorithm, math, 2d

大家好，

我有一个二维图，上面绘制了一些点。我需要做的是只获得最外层的点，以便我可以将它们连接起来（并不真正相关）。

我似乎无法理解的是我需要使用的算法才能做到这一点？

* * *

我认为这可能会帮助您了解我想要实现的目标：

```
o o o
o x o
o o o 
```

我想得到的所有 o 和我想忽略的 x。此外，这些点可以在任何位置和任何形状，但我仍然只想抓住最外面的点。

有任何想法吗？

另外，我不确定这是否是正确的网站，如果不是，请告诉我去哪里。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T08:55:17.013

您需要对您拥有的一组点进行[凸包](http://en.wikipedia.org/wiki/Convex_hull)。我个人更喜欢为此使用[格雷厄姆扫描](http://en.wikipedia.org/wiki/Graham_scan)，因为它相当容易实现并且具有良好的计算复杂性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T09:00:03.783

如果您的 2d 图由一组 XY 坐标表示，您可以计算 Ivaylo 提到的凸包。

如果您的图表与帖子中的示例相似，由 2d 网格图表示，您可以使用洪水填充来获取边界。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-19T15:54:34.470

如果您尝试在 javascript 中实现这一点，请查看 d3.js geom.hull：[https ://github.com/mbostock/d3/wiki/Hull-Geom](https://github.com/mbostock/d3/wiki/Hull-Geom)

# c# - 检查数据库状态是否正确然后做某事

> ID：14354423
> 
> 赞同：0
> 
> 时间：2013-01-16T08:53:58.483
> 
> 标签：c#, asp.net, ms-access, if-statement, conditional-statements

我不确定为什么代码不起作用。如果 rStatus = Reserve 显示预订详细信息 如果 rStatus = cancelled show label.text 和以下

什么不起作用：当我进入例如下的页面时。user="ben12" 此用户有预订但没有出现预订，而是显示用户没有预订，如果用户预订状态被取消，则会发生这种情况。

我进一步检查了在 user="ben12" 下它有几个取消和保留状态，我不确定这是否是 if 语句不起作用的原因

我的目标是，如果用户有预订，则显示预订，否则

此代码在`Page_Load`我的 Reservation.aspx.cs下

```
OleDbConnection mDB = new OleDbConnection();
mDB.ConnectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data source="
    + Server.MapPath("~/App_Data/IESDatabase.accdb");
OleDbCommand cmd; 
OleDbDataReader rdr;
string strUserId = (string)Session["sUserId"];
string strSql = "SELECT rStatus FROM Reservation WHERE rUserId = @UserId "
    + "ORDER BY rStatus DESC;";
cmd = new OleDbCommand(strSql, mDB);
mDB.Open();
rdr = cmd.ExecuteReader();
rdr.Read();
Session["rsStatus"] = rdr["rStatus"]; // store the current status
mDB.Close();

if ((string)Session["srStatus"] == "Cancelled")
{
    DetailsView1.Visible = false;
    Label2.Visible = false;
    btnBuy.Visible = false;
    DropDownList1.Visible = false;
    btnCancel.Visible = false;
    lblReserve.Text = "There is no resevation for user " + Session["sUserId"];
}
if ((string)Session["srStatus"] == "Reserve")
{
    lblReserve.Visible = false;
    Label1.Visible = true;
    Label2.Visible = true;
    DetailsView1.Visible = true;
    btnBuy.Visible = true;
    DropDownList1.Visible = true;
    btnCancel.Visible = true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:08:09.620

问题是您的会话名称，在这里：

```
Session["rsStatus"] = rdr["rStatus"]; // store the current status 
```

它应该是**srStatus**

# c# - 具有多个 texbox 的行过滤器

> ID：14354426
> 
> 赞同：1
> 
> 时间：2013-01-16T08:54:09.017
> 
> 标签：c#, sql, datagrid, rowfilter

我想使用两个不同的文本框来过滤数据库中的信息以显示棒球运动员的平均得分。选择 0,3 到 0,4 的示例，应该显示得分在这些数字之间的球员。

什么不起作用是以下代码：

```
// Search for player, working
private void button1_Click(object sender, EventArgs e)
        {
            view.RowFilter = "LastName like '%" + textBox1.Text + "%'";
            if (textBox1.Text == "") view.RowFilter = string.Empty;
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            DataTable datatable = new DataTable();
            SqlConnection connection = new SqlConnection(@"Data Source=.\SQLEXPRESS;AttachDbFilename=C:\Users\Mattias\Dropbox\C#\Database\Baseball.mdf;Integrated Security=True;Connect Timeout=30;User Instance=True");
            connection.Open();
            datatable.Load(new SqlCommand("select * from players", connection).ExecuteReader());
            dataGridView1.DataSource = view = datatable.DefaultView;
            connection.Close();
        }
// This button is not working
        private void button2_Click(object sender, EventArgs e)
        {
            decimal minimum = Convert.ToDecimal(textBox2.Text);
            decimal maximum = Convert.ToDecimal(textBox3.Text);
// Should display players with different scores
            view.RowFilter = String.Format("BattingAverage >= {0} AND BattingAverage <= {1}"
                , minimum, maximum);

            if (textBox2.Text == "") view.RowFilter = string.Empty;
            if (textBox3.Text == "") view.RowFilter = string.Empty;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:02:06.550

`RowFilter`不支持`BETWEEN`运营商。它也不支持像您这样的完整 sql 查询。但是，您可以在此处指定`WHERE`-clause 来过滤视图的行：

```
view.RowFilter = String.Format(CultureInfo.InvariantCulture.NumberFormat,
                 "BattingAverage >= {0} AND BattingAverage <= {1}", minimum, maximum); 
```

我已经用于`InvariantCulture.NumberFormat`确保`String.Format`所需的英文格式（点作为小数分隔符）`RowFilter`。

请注意，您还使用撇号包装了这些值，这在数字上是不允许的，并且您将`textBox2.Text`其用作最小值**和**最大值的输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T08:47:38.193

它现在通过添加 CultureInfo 来工作。// 搜索播放器，工作 private void button1_Click(object sender, EventArgs e) { view.RowFilter = "LastName like '%" + textBox1.Text + "%'"; if (textBox1.Text == "") view.RowFilter = string.Empty; }

```
 private void Form1_Load(object sender, EventArgs e)
    {
        DataTable datatable = new DataTable();
        SqlConnection connection = new SqlConnection(@"Data Source=.\SQLEXPRESS;AttachDbFilename=C:\Users\Mattias\Dropbox\C#\Database\Baseball.mdf;Integrated Security=True;Connect Timeout=30;User Instance=True");
        connection.Open();
        datatable.Load(new SqlCommand("select * from players", connection).ExecuteReader());
        dataGridView1.DataSource = view = datatable.DefaultView;
        connection.Close();
    } 
```

//**现在使用 CultureInfo** private void button2_Click(object sender, EventArgs e) { decimal minimum = Convert.ToDecimal(textBox2.Text); 十进制最大值 = Convert.ToDecimal(textBox3.Text); // 应该显示不同分数的玩家 view.RowFilter = **String.Format(CultureInfo.InvariantCulture.NumberFormat** ,("BattingAverage >= {0} AND BattingAverage <= {1}" , minimum, maximum);

```
 if (textBox2.Text == "") view.RowFilter = string.Empty;
        if (textBox3.Text == "") view.RowFilter = string.Empty;
    } 
```

# java - 使用pdfbox从PDF文件中提取文本

> ID：14354427
> 
> 赞同：4
> 
> 时间：2013-01-16T08:54:13.607
> 
> 标签：java, pdf, jsoup, pdfbox

我正在尝试使用 pdfbox 从 PDF 文件中提取文本，但不是作为命令行工具，而是在我的 Java 应用程序中。我正在使用 jsoup 下载 pdf。

```
res = Jsoup
.connect(host+action)
.ignoreContentType(true)
.data(data)
.cookies(cookies)
.method(Method.POST)
.timeout(20*1000)
.execute();

// prepare document
InputStream is = new ByteArrayInputStream(res.bodyAsBytes()); 
PDDocument pdf = new PDDocument();
pdf.load(is,true);

// extract text
PDFTextStripper stripper = new PDFTextStripper();
String text = stripper.getText(pdf);

// print extracted text
System.out.println(text); 
```

此代码仅打印空行。当我这样做时：

```
System.out.println(res.body()); 
```

它打印pdf文件以输出如下：

```
%PDF-1.4
%����
6 0 obj
<<
/Filter /FlateDecode
/Length 1869
>>
stream
x��X�n�� 
```

...

```
<<
/Size 28
/Info 27 0 R
/Root 26 0 R
>>
startxref
20632
%%EOF 
```

所以我确信正确下载的pdf - 只是这个PDF剥离器不起作用......

- - - - - - - - - - - - - - - - - - - - - - - 编辑

这个问题解决了 - 工作代码在这里[http://thottingal.in/blog/2009/06/24/pdfbox-extract-text-from-pdf/](http://thottingal.in/blog/2009/06/24/pdfbox-extract-text-from-pdf/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-26T14:21:57.230

（评论中回答的问题。请参阅[没有答案的问题，但问题已在评论中解决（或在聊天中扩展）](https://meta.stackoverflow.com/questions/251597/question-with-no-answers-but-issue-solved-in-the-comments)）

@WeloSefer 写道：

> 也许[这](http://thottingal.in/blog/2009/06/24/pdfbox-extract-text-from-pdf/)可以帮助您入门...我从未使用过 jsoup 或 pdfbox，所以我没有任何帮助，但我肯定会尝试 pdfbox，因为我一直在测试 itextpdf 阅读器以提取文本。

OP写道：

> 谢谢，这就是我一直在寻找的 - 它现在可以工作了:) 这个问题已经解决了 - 工作代码在这里[http://thottingal.in/blog/2009/06/24/pdfbox-extract-text-from-pdf/](http://thottingal.in/blog/2009/06/24/pdfbox-extract-text-from-pdf/)

# android - 充气时视图消失

> ID：14354428
> 
> 赞同：0
> 
> 时间：2013-01-16T08:54:13.957
> 
> 标签：android, user-interface, android-inflate

我有一个自定义 ListActivity，其中我有一个自定义 ListAdapter，它为列表中的每个项目扩展布局。在 Eclipse 中，在可视化编辑器中，布局看起来像这样 ![Eclipse 的布局](../Images/45990bbef35929e5404f515a4c2f9666.png)

这是由以下代码完成的：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/largeFrame"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <RelativeLayout
        android:id="@+id/RelativeLayout1"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_marginLeft="1dp"
        android:layout_marginRight="3dp"
        android:layout_marginTop="5dp"
        android:background="@color/mainBack"
        android:orientation="vertical" >

        <View
            android:id="@+id/imageView1"
            android:layout_width="5dp"
            android:layout_height="fill_parent"
            android:layout_alignParentLeft="false"
            android:layout_alignParentTop="false"
            android:layout_marginLeft="2dp"
            android:background="@android:color/darker_gray" />

        <TextView
            android:id="@+id/newtimeslot_class"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_marginLeft="4dp"
            android:layout_marginTop="10dp"
            android:layout_toRightOf="@+id/imageView1"
            android:text="Large Text"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textColor="@android:color/black" />

        <View
            android:id="@+id/imageView2"
            android:layout_width="wrap_content"
            android:layout_height="2dp"
            android:layout_alignRight="@+id/newtimeslot_class"
            android:layout_below="@+id/newtimeslot_class"
            android:layout_toRightOf="@+id/imageView1"
            android:background="@android:color/darker_gray" />

        <TextView
            android:id="@+id/newtimeslot_time"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBottom="@+id/newtimeslot_class"
            android:layout_alignParentRight="true"
            android:layout_marginRight="5dp"
            android:text="Medium Text"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="#646464" />

        <TextView
            android:id="@+id/newtimeslot_location"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_below="@+id/imageView2"
            android:layout_marginRight="5dp"
            android:text="Medium Text"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="#646464" />

        <TextView
            android:id="@+id/newtimeslot_comment"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentRight="true"
            android:layout_below="@+id/newtimeslot_location"
            android:layout_marginBottom="10dp"
            android:layout_marginRight="5dp"
            android:layout_marginTop="2dp"
            android:text="Medium Text"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="#646464" />
    </RelativeLayout>

</FrameLayout> 
```

不幸的是，当我在安卓设备上运行它时，左边的行完全消失了。相反，它看起来像

![在此处输入图像描述](../Images/7e25514de319b194d142483078a01bc2.png)

我刚刚在膨胀它方面做了通常的事情，我只访问过 TextView 对象。所以我只是想知道可能会发生什么，如果有人可以帮助我摆脱这个烂摊子？

干杯

编辑：通货膨胀代码

```
@Override
public View newView(Context context, Cursor cursor, ViewGroup parent) {
    final View view = mInflater.inflate(R.layout.timeslotlayout_new, parent, false);

    return view;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:04:45.603

我怀疑引用**@android:color/darker_gray**是问题所在。

可能在某些设备上，这个值不存在？！？（例如，它可能使用另一个名称）

尝试将背景属性设置为 COLOR*值*（而不是 android 颜色*参考*），如**#00000**代表**黑色**（或为DarkGray选择另一种自定义颜色，如**#** **A9A9A9**）：

```
android:background="#A9A9A9" 
```

/或者/

为大多数基本颜色创建一个 XML 文件，如 done [HERE](https://stackoverflow.com/a/7323234/1542438)，通过这种方式，您可以确保颜色不会在设备之间发生变化，最重要的是，它们将存在于您的应用程序的所有设备上。

因此，如果您这样做（请参阅链接），您可以创建这样的颜色（XML 文件的名称根本不重要）：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
   <color name="Black">#000000</color>
   <color name="DarkGray">#A9A9A9</color>
</resources> 
```

并以下列方式引用它：

```
android:background="@color/DarkGray" 
```

* * *

*注意：无论这是否解决了您的问题，我强烈建议您遵循这种方式以确保安全。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:16:20.553

也许你错过了设置这个：

```
android:layout_alignParentLeft="false" 
```

对此：

```
android:layout_alignParentLeft="true" 
```

而且，顺便说一句，`android:orientation="vertical"`不适用于相对布局。它仅适用于`LinearLayout`.

并`newtimeslot_time` `TextView`改变

```
android:layout_toRightOf="@+id/imageView1" 
```

至

```
android:layout_toRightOf="@id/imageView1" 
```

希望能帮助到你！

干杯!

# jquery - 多个 jQuery/jQueryUI 错误突然出现

> ID：14354431
> 
> 赞同：0
> 
> 时间：2013-01-16T08:54:19.820
> 
> 标签：jquery, jquery-ui

几周前我编写了我的示例网站。它工作得很好，但现在不行了。它从昨天开始，在 Chrome 更新自身之后（或者看起来如此）。

我在控制台中的错误是：

```
Uncaught TypeError: Cannot read property 'msie' of undefined
Uncaught TypeError: Object [object Object] has no method 'rating' 
```

它们都是由我一直使用的 jQuery 插件（jQuery Form、jQuery StarRating、jQuery UI 等）引起的。另外，当我悬停一个`show`与 jQueryUI 一起使用的元素时，我得到了

```
Uncaught TypeError: Property '#<Object>' of object #<Object> is not a function 
```

我的JS代码如下：

```
(function($){})(window.jQuery);
$(document).ready(function() {

    /* T.O.C.

    1\. Top
    1.0 | Header
    1.1 | Main Menu
    1.2 | Placeholders
    2\. Content
    2.1 | Left
    2.1.1 | Box covers
    3\. Sidebar
    3.1 | Rates

     */
});

/* 1.0 | Top */
// 1.1 | Main Menu
function searchInput() {
    var totalWidth = 0;
    var n = parseInt(0);
    $('nav#mainMenu ul li:not(.search)').each(function() {
        totalWidth += parseInt($(this).outerWidth(true));
    });
    var inp = 919 - totalWidth;
    $('nav#mainMenu ul li.search form input').width(inp);
};

function slideMenu() {
    $('nav#mainMenu ul li:not(:first), nav#mainMenu ul li ul:not(li a)').each(function() {
        $(this).mouseenter(function() {
            $(this).children('a').addClass('active');
            var left = $(this).outerWidth(true),
                width = 0;
            if($(this).hasClass('help')) { // IF HELP
                $(this).prevAll('li').each(function() {
                    width += $(this).outerWidth(true);
                });
            } else { // ELSE
                $(this).nextAll('li').each(function() {
                    width += $(this).outerWidth(true);
                });
            }

            var width = width + 1;

            if($(this).hasClass('help')) {
                $(this).children('ul').css({ 'right':left, 'width':width });
                $(this).children('ul').show('slide', { direction: 'right' }, 250);
            } else {
                $(this).children('ul').css({ 'left':left, 'width':width });
                $(this).children('ul').show('slide', { direction: 'left' }, 250);
            }
        });
        $(this).mouseleave(function() {
            if($(this).hasClass('help')) {
                $(this).children('ul').hide('slide', { direction: 'right' }, 250, function() {
                    $(this).parent('li').children('a').removeClass('active');
                });
            } else {
                $(this).children('ul').hide('slide', { direction: 'left' }, 250, function() {
                    $(this).parent('li').children('a').removeClass('active');
                });
            }
        });
    });
};

slideMenu();

searchInput();

/* 1.2 | Placeholder */
function Placeholders() {
    if(!Modernizr.input.placeholder){

        $("input").each(
            function(){
                if($(this).val()=="" && $(this).attr("placeholder")!=""){
                    $(this).val($(this).attr("placeholder"));
                    $(this).focus(function(){
                        if($(this).val()==$(this).attr("placeholder")) $(this).val("");
                    });
                    $(this).blur(function(){
                        if($(this).val()=="") $(this).val($(this).attr("placeholder"));
                    });
                }
            });

    }
}

Placeholders();

/* 2\. Content */

// 2.2.1 | Box covers
function BoxCovers() {
    $('ul.boxlist li').mouseenter(function() {
        $(this).children('div').stop().fadeIn('fast');
    });
    $('ul.boxlist li').mouseleave(function() {
        $(this).children('div').stop().fadeOut('fast');
    });

    $('.boxlist .rate').rating();
    $('.boxlist form.starRated a').attr('title','');
}

BoxCovers();

function Detailed() {
    $('ul.detailed .rate').rating();
    $('ul.detailed form.starRated a').attr('title','');

    $('ul.detailed li').each(function() {
        $(this).removeClass('grid_4').addClass('grid_14 clearfix');
        var img = $(this).children('img').attr('src'),
            img = img.replace('.jpg','-m.jpg');

        $(this).children('img').attr('src',img).addClass('grid_1');
        $(this).children('div').addClass('grid_9');

        $(this).mouseenter(function() {
            $(this).children('div').children('p.own').stop().fadeIn();
        });

        $(this).mouseleave(function() {
            $(this).children('div').children('p.own').stop().fadeOut();
        });
    });
};

Detailed();

/* 3\. Sidebar */
// 3.1\.  Rates
function sideRates() {
    $('section#grades div ul li').each(function() {
        var percent = $(this).children('b').text(),
            percent = percent.replace('%',''),
            percent = (percent/100),
            totalSpamWidth = $(this).children('span').width(),
            newWidth = totalSpamWidth * percent;

        $(this).children('span').width(newWidth);
    });
};

sideRates(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T11:59:49.027

这是因为 jQuery.browser 属性已从 jQuery 1.9 中删除。显然，自 jQuery 1.3 以来，此浏览器检测功能已被弃用，但许多插件/库可能仍然依赖它（[jQuery 工具](http://jquerytools.org/ "jQuery 工具")，仅举一个我喜欢在我的项目中使用的名称）。

请参阅：http: [//jquery.com/upgrade-guide/1.9/#jquery-browser-removed](http://jquery.com/upgrade-guide/1.9/#jquery-browser-removed)以供官方参考。

为了快速修复，请使用以前版本的 jQuery，例如：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T09:08:15.330

为了得到答案而不是评论：

您正在使用最新的 jQuery。此版本可能已删除或更改了您正在使用的内容。我建议您保留创建页面的版本，而不是获取最新版本。这样它就永远不会因为版本差异而中断。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T08:57:26.460

“无法读取未定义的属性‘msie’”

这暗示 jQuery 甚至没有加载。检查使用开发人员工具 (F12)、网络选项卡、刷新页面并查看是否有任何脚本/资源出现任何 404 错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T12:07:38.490

我设法修复了这个错误，同时仍然使用最新的 jQuery。当我从以下位置调用 Superfish 菜单脚本时，我调用 Superfish 菜单脚本时出现“无法读取未定义的属性 'msie'”错误：

```
$(document).ready(function() { startScripts(); }); 
```

但是，后来我把它改成了：

```
$(document).load(function() { startScripts(); }); 
```

错误消失了，这表明这是一个加载顺序时序问题。

# ios - Xcode iOS 蓝牙配对问题

> ID：14354432
> 
> 赞同：0
> 
> 时间：2013-01-16T08:54:19.627
> 
> 标签：ios, xcode, bluetooth, connection

一旦蓝牙设备停止并且连接丢失。iPhone 是否可以在再次打开后自动与该设备配对？而不是手动进入 iPhone 设置来连接该设备。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:07:01.203

它与iOS设备无关。自动解析是您尝试连接的设备的工作（我使用的是 EA 框架，而不是核心蓝牙）。我在当前项目中遇到了同样的问题。我们所做的是更新可以记住上次连接的固件，因此下次它会自动连接到 iPhone。

# eclipse - 这是什么意思：“在捆绑包上调用了持久启动”

> ID：14354434
> 
> 赞同：1
> 
> 时间：2013-01-16T08:54:23.950
> 
> 标签：eclipse, eclipse-plugin, equinox

在调试 dropins 时，我遇到了以下异常

```
java.lang.Exception: A persistent start has been called on bundle: org.eclipse.core.runtime_3.8.0.v20120521-2346
    at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:306)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:300)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:292)
    at org.eclipse.equinox.internal.simpleconfigurator.ConfigApplier.startBundles(ConfigApplier.java:312)
    at org.eclipse.equinox.internal.simpleconfigurator.ConfigApplier.install(ConfigApplier.java:108)
    at org.eclipse.equinox.internal.simpleconfigurator.SimpleConfiguratorImpl.applyConfiguration(SimpleConfiguratorImpl.java:129)
    at org.eclipse.equinox.internal.simpleconfigurator.SimpleConfiguratorImpl.applyConfiguration(SimpleConfiguratorImpl.java:143)
    at org.eclipse.equinox.internal.p2.reconciler.dropins.ProfileSynchronizer.applyConfiguration(ProfileSynchronizer.java:794)
    at org.eclipse.equinox.internal.p2.reconciler.dropins.ProfileSynchronizer.synchronize(ProfileSynchronizer.java:133)
    at org.eclipse.equinox.internal.p2.reconciler.dropins.Activator.synchronize(Activator.java:461)
    at org.eclipse.equinox.internal.p2.reconciler.dropins.Activator.start(Activator.java:176)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl$1.run(BundleContextImpl.java:711)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:702)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:683)
    at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:381)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.resume(AbstractBundle.java:390)
    at org.eclipse.osgi.framework.internal.core.Framework.resumeBundle(Framework.java:1177)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles(StartLevelManager.java:559)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles(StartLevelManager.java:544)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.incFWSL(StartLevelManager.java:457)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.doSetStartLevel(StartLevelManager.java:243)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.dispatchEvent(StartLevelManager.java:438)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.dispatchEvent(StartLevelManager.java:1)
    at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230)
    at org.eclipse.osgi.framework.eventmgr.EventManager$EventThread.run(EventManager.java:340)

java.lang.Exception: A persistent start has been called on bundle: org.eclipse.equinox.common_3.6.100.v20120522-1841
    at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:306)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:300)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:292)
    at org.eclipse.equinox.internal.simpleconfigurator.ConfigApplier.startBundles(ConfigApplier.java:312)
    at org.eclipse.equinox.internal.simpleconfigurator.ConfigApplier.install(ConfigApplier.java:108)
    at org.eclipse.equinox.internal.simpleconfigurator.SimpleConfiguratorImpl.applyConfiguration(SimpleConfiguratorImpl.java:129)
    at org.eclipse.equinox.internal.simpleconfigurator.SimpleConfiguratorImpl.applyConfiguration(SimpleConfiguratorImpl.java:143)
    at org.eclipse.equinox.internal.p2.reconciler.dropins.ProfileSynchronizer.applyConfiguration(ProfileSynchronizer.java:794)
    at org.eclipse.equinox.internal.p2.reconciler.dropins.ProfileSynchronizer.synchronize(ProfileSynchronizer.java:133)
    at org.eclipse.equinox.internal.p2.reconciler.dropins.Activator.synchronize(Activator.java:461)
    at org.eclipse.equinox.internal.p2.reconciler.dropins.Activator.start(Activator.java:176)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl$1.run(BundleContextImpl.java:711)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:702)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:683)
    at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:381)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.resume(AbstractBundle.java:390)
    at org.eclipse.osgi.framework.internal.core.Framework.resumeBundle(Framework.java:1177)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles(StartLevelManager.java:559)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles(StartLevelManager.java:544)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.incFWSL(StartLevelManager.java:457)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.doSetStartLevel(StartLevelManager.java:243)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.dispatchEvent(StartLevelManager.java:438)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.dispatchEvent(StartLevelManager.java:1)
    at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230)
    at org.eclipse.osgi.framework.eventmgr.EventManager$EventThread.run(EventManager.java:340)

java.lang.Exception: A persistent start has been called on bundle: org.eclipse.equinox.ds_1.4.0.v20120522-1841
    at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:306)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:300)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:292)
    at org.eclipse.equinox.internal.simpleconfigurator.ConfigApplier.startBundles(ConfigApplier.java:312)
    at org.eclipse.equinox.internal.simpleconfigurator.ConfigApplier.install(ConfigApplier.java:108)
    at org.eclipse.equinox.internal.simpleconfigurator.SimpleConfiguratorImpl.applyConfiguration(SimpleConfiguratorImpl.java:129)
    at org.eclipse.equinox.internal.simpleconfigurator.SimpleConfiguratorImpl.applyConfiguration(SimpleConfiguratorImpl.java:143)
    at org.eclipse.equinox.internal.p2.reconciler.dropins.ProfileSynchronizer.applyConfiguration(ProfileSynchronizer.java:794)
    at org.eclipse.equinox.internal.p2.reconciler.dropins.ProfileSynchronizer.synchronize(ProfileSynchronizer.java:133)
    at org.eclipse.equinox.internal.p2.reconciler.dropins.Activator.synchronize(Activator.java:461)
    at org.eclipse.equinox.internal.p2.reconciler.dropins.Activator.start(Activator.java:176)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl$1.run(BundleContextImpl.java:711)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:702)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:683)
    at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:381)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.resume(AbstractBundle.java:390)
    at org.eclipse.osgi.framework.internal.core.Framework.resumeBundle(Framework.java:1177)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles(StartLevelManager.java:559)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles(StartLevelManager.java:544)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.incFWSL(StartLevelManager.java:457)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.doSetStartLevel(StartLevelManager.java:243)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.dispatchEvent(StartLevelManager.java:438)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.dispatchEvent(StartLevelManager.java:1)
    at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230)
    at org.eclipse.osgi.framework.eventmgr.EventManager$EventThread.run(EventManager.java:340)

java.lang.Exception: A persistent start has been called on bundle: org.eclipse.equinox.event_1.2.200.v20120522-2049
    at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:306)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:300)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:292)
    at org.eclipse.equinox.internal.simpleconfigurator.ConfigApplier.startBundles(ConfigApplier.java:312)
    at org.eclipse.equinox.internal.simpleconfigurator.ConfigApplier.install(ConfigApplier.java:108)
    at org.eclipse.equinox.internal.simpleconfigurator.SimpleConfiguratorImpl.applyConfiguration(SimpleConfiguratorImpl.java:129)
    at org.eclipse.equinox.internal.simpleconfigurator.SimpleConfiguratorImpl.applyConfiguration(SimpleConfiguratorImpl.java:143)
    at org.eclipse.equinox.internal.p2.reconciler.dropins.ProfileSynchronizer.applyConfiguration(ProfileSynchronizer.java:794)
    at org.eclipse.equinox.internal.p2.reconciler.dropins.ProfileSynchronizer.synchronize(ProfileSynchronizer.java:133)
    at org.eclipse.equinox.internal.p2.reconciler.dropins.Activator.synchronize(Activator.java:461)
    at org.eclipse.equinox.internal.p2.reconciler.dropins.Activator.start(Activator.java:176)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl$1.run(BundleContextImpl.java:711)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:702)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:683)
    at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:381)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.resume(AbstractBundle.java:390)
    at org.eclipse.osgi.framework.internal.core.Framework.resumeBundle(Framework.java:1177)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles(StartLevelManager.java:559)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles(StartLevelManager.java:544)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.incFWSL(StartLevelManager.java:457)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.doSetStartLevel(StartLevelManager.java:243)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.dispatchEvent(StartLevelManager.java:438)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.dispatchEvent(StartLevelManager.java:1)
    at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230)
    at org.eclipse.osgi.framework.eventmgr.EventManager$EventThread.run(EventManager.java:340)

java.lang.Exception: A persistent start has been called on bundle: org.eclipse.equinox.simpleconfigurator_1.0.300.v20110815-1744
    at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:306)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:300)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:292)
    at org.eclipse.equinox.internal.simpleconfigurator.ConfigApplier.startBundles(ConfigApplier.java:312)
    at org.eclipse.equinox.internal.simpleconfigurator.ConfigApplier.install(ConfigApplier.java:108)
    at org.eclipse.equinox.internal.simpleconfigurator.SimpleConfiguratorImpl.applyConfiguration(SimpleConfiguratorImpl.java:129)
    at org.eclipse.equinox.internal.simpleconfigurator.SimpleConfiguratorImpl.applyConfiguration(SimpleConfiguratorImpl.java:143)
    at org.eclipse.equinox.internal.p2.reconciler.dropins.ProfileSynchronizer.applyConfiguration(ProfileSynchronizer.java:794)
    at org.eclipse.equinox.internal.p2.reconciler.dropins.ProfileSynchronizer.synchronize(ProfileSynchronizer.java:133)
    at org.eclipse.equinox.internal.p2.reconciler.dropins.Activator.synchronize(Activator.java:461)
    at org.eclipse.equinox.internal.p2.reconciler.dropins.Activator.start(Activator.java:176)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl$1.run(BundleContextImpl.java:711)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:702)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:683)
    at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:381)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.resume(AbstractBundle.java:390)
    at org.eclipse.osgi.framework.internal.core.Framework.resumeBundle(Framework.java:1177)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles(StartLevelManager.java:559)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles(StartLevelManager.java:544)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.incFWSL(StartLevelManager.java:457)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.doSetStartLevel(StartLevelManager.java:243)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.dispatchEvent(StartLevelManager.java:438)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.dispatchEvent(StartLevelManager.java:1)
    at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230)
    at org.eclipse.osgi.framework.eventmgr.EventManager$EventThread.run(EventManager.java:340) 
```

由于上述错误，我猜 Eclipse 无法识别所有插件，因此只显示 3 个奇怪的视角。没有 Java、PDE 透视图等。我们如何解决这个错误？

# ubuntu - 如何为 tar 命令选择目标目录

> ID：14354436
> 
> 赞同：5
> 
> 时间：2013-01-16T08:54:50.397
> 
> 标签：ubuntu, command-line, tar

我想将一个名为“mysite”的文件夹 tar 到目标目录：/var/backups/

我正在尝试发出以下命令：

```
tar -C /var/www/mysite/ -zcf mysite_$(date +%y%m%d).tar.gz /var/backups/ 
```

然而，它的结局是：

> 焦油：C：无法统计：没有这样的文件或目录
> 
> tar：从成员名称中删除前导 `/'
> 
> tar：由于先前的错误而以失败状态退出

我已经检查并确认 /var/backups/ 是一个有效目录。

基本上我想要做的是，将 mysite 文件夹“/var/backup/mysite” tar 到一个名为 mysite_yymmdd.tar.gz 的文件中，该文件可以在 /var/backups/ 中使用

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T09:53:59.013

我不确定你想要什么，但你可以把目的地放在路径中

```
tar -zcf /var/backups/mysite_$(date +%y%m%d).tar.gz /var/www/mysite/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T00:53:44.193

当您在命令行中键入它时，您似乎忘记了`-`它。`-C`编译器说这`C`不是目录；`-`如果被取消，它只会认为它是一个目录。

别担心，即使是我们当中最优秀的人也会犯命令行错误... :-)

# javascript - 将多个 js 和 html 文件动态加载到 dom 后的事件

> ID：14354443
> 
> 赞同：0
> 
> 时间：2013-01-16T08:55:17.193
> 
> 标签：javascript, html, iframe

我有一个选项卡式面板，在其中单击特定选项卡时，我需要将三个 js 文件和一个 html 文件加载到当前 DOM 中，并执行与这些 js 和 html 文件相关的方法。

html 文件包含模板，需要加载到隐藏的 iframe 中。

我可以通过将相应的标签附加到正文来加载相同的内容，但我需要在加载所有文件后执行一个函数。

加载所有文件后如何获取事件。？

--------------- 新问题 ----------

加载文件后我成功获得了事件。

我有以下问题。

我有一个 html 文件即时加载，并将内容提供给动态创建的 iframe，如下所示

```
content = document.createElement("iframe");
content.style.display = "none";
content.src = 'data:text/html;charset=utf-8,' + encodeURI(responseText); 
```

我的基本协议是`https`. 当协议`http`没有错误时。现在我收到以下错误。

```
The frame requesting access has a protocol of '', the frame being accessed has a protocol of 'https'. Protocols must match. 
```

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:00:14.157

您在最后一句话中暗示了解决方案：

[触发](http://api.jquery.com/trigger/)事件！

注册一个处理程序，它将等待您的 4 个自定义事件，跟踪已通过全局数组接收到的事件，并在触发所有必需事件时执行您的函数。

当然，您将`trigger()`在每个异步加载文件的最后一行添加一个自定义事件。

# javascript - HTML 幻灯片在线编辑器

> ID：14354444
> 
> 赞同：0
> 
> 时间：2013-01-16T08:55:19.883
> 
> 标签：javascript, jquery, html, slideshow

我正在考虑使用 HTML5 幻灯片来创建在线“幻灯片查看器/编辑器”。我只使用 Html5 和 Jquery。我只是想确保这样的事情是可能的，并且可以在手机上运行。我看到很多幻灯片查看器，但没有一个支持编辑。那么已经是这样了吗？＆如果适用，从您的角度来看需要多长时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:00:57.283

Impressionist是[impress.js](https://github.com/hsivaramx/Impressionist)[框架](https://github.com/bartaz/impress.js)的可视化编辑器，它是在线幻灯片的标准框架。

所以你不是第一个考虑这个的人;-)

# shell - 传递给可执行文件的选项或参数由“”引用

> ID：14354445
> 
> 赞同：0
> 
> 时间：2013-01-16T08:55:21.390
> 
> 标签：shell

有一个名为 的可执行文件`app`，它可以接受一些选项和命令行参数，`-l -v`等等。现在我正在编写一个`bash`脚本，其中`app`将使用一些选项进行调用，我是这样做的，

```
opt_string="-l -v"  # this string might change according to different conditions used in if-else

# HERE is my problem
./app ${opt_string} 
```

看看我是如何调用`app`的，通常我只是在提示 shell 中调用它，如下所示：

```
./app -l -v 
```

但是现在在这个脚本中，它实际上是这样的吗：

```
./app "-l -v" 
```

因为`${opt_string}`是 STRING 引用的`""`，如果是这样我怀疑是否`app`会正常运行。

我知道使用 可能有办法解决这个问题`eval "./app ${opt_string}"`，但是有什么办法可以去掉`""`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T09:43:06.757

BASH 常见问题解答条目 #50：[“我正在尝试将命令放入变量中，但复杂的情况总是失败！”](http://mywiki.wooledge.org/BashFAQ/050)

```
opt_string=(-l -v)

./app "${opt_string[@]}" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T14:41:27.267

您调用 ( `./app ${opt_string}`) 的方式很好。您定义`opt_string`为单个字符串，因为您引用了赋值中的值。但是，当您取消引用它时，您没有使用引号，因此 shell 将替换它的值，然后将其拆分为单个单词。

当你说

```
./app "$opt_string" 
```

您正在将一个参数传递给应用程序。当你说

```
./app $opt_string 
```

您正在向应用程序传递多个参数。

请参阅bash 手册中的[分词。](http://www.gnu.org/software/bash/manual/bashref.html#Word-Splitting)

请注意，大括号*不是*引号。花括号（在这种情况下）仅用于消除变量名称与周围文本的歧义，即`echo "$opt_string_blah"`与`echo "${opt_string}_blah"`

# ios - 如何计算 GMSCamera 变焦

> ID：14354450
> 
> 赞同：8
> 
> 时间：2013-01-16T08:55:46.007
> 
> 标签：ios, google-maps-sdk-ios

我正在开发包括 GoogleMaps 在内的 iOS 应用程序。GoogleMaps SDK for iOS 的实现过程已经完成。

但我想知道如何计算 GMSCamera 缩放以在地图上显示整个路线。

在 Apple Map 中，我们可能会使用 span。但是 GoogleMaps SDK 没有跨度。

请给我建议。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-06-17T07:14:51.703

实际上，在当前版本的 SDK 中，您可以使用 fitBounds：

```
GMSCoordinateBounds *bounds = [[GMSCoordinateBounds alloc] initWithPath:yourPath];
//There are several useful init methods for the GMSCoordinateBounds!
GMSCameraUpdate *update = [GMSCameraUpdate fitBounds:bounds];
[mapView_ moveCamera:update]; 
```

这样你就可以把数学交给谷歌了，我很确定他们真的很擅长。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T02:56:55.953

Lee的方法是对的，但是数学不对，基于google maps ios sdk document on zoom

> 将缩放级别增加 1 会使屏幕上的世界宽度加倍。因此，在缩放级别 N 时，世界的宽度约为 256 * 2^N，即在缩放级别 2 时，整个世界的宽度约为 1024 点。请注意，缩放级别不必是整数。地图允许的缩放级别范围取决于许多因素，包括位置、地图类型和屏幕尺寸。

计算缩放的数学应该是

```
zoom = log2(360 * mapView.bounds.size.width/ longitudeDelta) - 8; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-18T09:01:52.810

这是一个可能有帮助的函数，因为它可以从“Google 兼容”的 MKMapView 计算 zoomLevel

```
- (NSInteger)getZoomLevel
{
        MKMapView *map = (MKMapView *)self.mapView;
        CLLocationDegrees longitudeDelta = map.region.span.longitudeDelta;
        CGFloat mapWidthInPixels = map.bounds.size.width;
        double zoomScale = longitudeDelta * 85445659.44705395 * M_PI / (180.0 * mapWidthInPixels);
        double zoomer = 20 - log2(zoomScale);
        if ( zoomer < 0 ) zoomer = 0;

        return (NSInteger)zoomer;
} 
```

如果您可以获取坐标并将其传递给您，那么您应该没问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T02:30:20.610

我在这里发布了一个类似问题的答案：

[如何使用适用于 iOS 的 google maps sdk 设置区域？](https://stackoverflow.com/questions/15040409/how-to-setregion-with-google-maps-sdk-for-ios)

它使用与 Lee 的答案类似的方法：将纬度/经度转换为像素，计算比例，然后是缩放级别。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-11-02T22:03:42.290

**迅速：**

```
//Create a path
let path = GMSMutablePath()

//for each point you need, add it to your path
let position = CLLocationCoordinate2DMake(latitude, longitude)
path.add(position)

//Update your mapView with path
let mapBounds = GMSCoordinateBounds(path: path)
let cameraUpdate = GMSCameraUpdate.fit(mapBounds)
mapView.moveCamera(cameraUpdate) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-17T17:20:17.047

使用 GMSCoordinateBounds。您可以使用不同的参数（如坐标、边界等）来拟合地图。

GMSCoordinateBounds *bounds = [[GMSCoordinateBounds alloc] initWithPath:path];

[https://developers.google.com/maps/documentation/ios/reference/interface_g_m_s_coordinate_bounds#a583bf55d8dd8cd10eec3473688f9d788](https://developers.google.com/maps/documentation/ios/reference/interface_g_m_s_coordinate_bounds#a583bf55d8dd8cd10eec3473688f9d788)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-25T14:46:51.400

Jing，你的数学对于经度是正确的，但对于纬度，它必须有点棘手。墨卡托投影以不同方式处理纬度和经度。我在这里发布了正确的代码：[https ://stackoverflow.com/a/16217785/2291425](https://stackoverflow.com/a/16217785/2291425)

# php - 来自 shell 的 curl 请求

> ID：14354452
> 
> 赞同：2
> 
> 时间：2013-01-16T08:55:48.593
> 
> 标签：php, curl

我有简单的 php 脚本。

```
$url = 'http://test.com/api/images/products/33';
$image_path = '/srv/images/some.jpg';
$key = 'qwerty';
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_POST, true);
//curl_setopt($ch, CURLOPT_PUT, true); // Un-commet to edit an image
curl_setopt($ch, CURLOPT_USERPWD, $key.':');
curl_setopt($ch, CURLOPT_POSTFIELDS, array('image' => '@'.$image_path));
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$result = curl_exec($ch);
curl_close($ch); 
```

该脚本运行良好。我想将此代码转换为简单的 curl shell 命令。

我试过了

```
curl -v -X POST -d image=@/srv/images/some.jpg \
 http://qwerty@test.com/api/images/products/33 
```

但发生错误。怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-04T12:29:10.730

您应该使用`-F`(for `multipart/form-data`) 而不是`-d`(which uses `application/x-www-form-urlencoded`)：

所以这应该工作：

```
 curl -v -X POST -F image=@/srv/images/some.jpg http://qwerty@test.com/api/images/products/33 
```

# php - 使用 ZfcUser 的控制器的简单 ZF2 单元测试

> ID：14354456
> 
> 赞同：8
> 
> 时间：2013-01-16T08:55:56.997
> 
> 标签：php, unit-testing, phpunit, zend-framework2, zfcuser

我在尝试对使用 ZfcUser 进行身份验证的操作进行单元测试时遇到问题。我需要一些方法来模拟 ZfcUser 控制器插件，但我不太确定如何做到这一点。我已经成功地为表和模型生成了一些单元测试，但是控制器需要大量注入的对象并导致问题。有谁知道如何设置 ZfcUser 模拟以成功对控制器进行单元测试？

这是我的测试（从 ZF2 教程中复制）：

```
<?php
namespace SmsTest\Controller;

use SmsTest\Bootstrap;
use Sms\Controller\SmsController;
use Zend\Http\Request;
use Zend\Http\Response;
use Zend\Mvc\MvcEvent;
use Zend\Mvc\Router\RouteMatch;
use Zend\Mvc\Router\Http\TreeRouteStack as HttpRouter;
use PHPUnit_Framework_TestCase;

class SmsControllerTest extends PHPUnit_Framework_TestCase
{
    protected $controller;
    protected $request;
    protected $response;
    protected $routeMatch;
    protected $event;

    protected function setUp()
    {

        $serviceManager = Bootstrap::getServiceManager();

        $this->controller = new SmsController();
        $this->request    = new Request();
        $this->routeMatch = new RouteMatch(array('controller' => 'index'));
        $this->event      = new MvcEvent();
        $config = $serviceManager->get('Config');
        $routerConfig = isset($config['router']) ? $config['router'] : array();
        $router = HttpRouter::factory($routerConfig);
        $this->event->setRouter($router);
        $this->event->setRouteMatch($this->routeMatch);
        $this->controller->setEvent($this->event);
        $this->controller->setServiceLocator($serviceManager);
    }

    /* Test all actions can be accessed */

    public function testIndexActionCanBeAccessed()
    {
        $this->routeMatch->setParam('action', 'index');

        $result   = $this->controller->dispatch($this->request);
        $response = $this->controller->getResponse();

        $this->assertEquals(200, $response->getStatusCode());
    }
} 
```

我在 setUp 方法中尝试了以下操作：

```
 $mockAuth = $this->getMock('ZfcUser\Entity\UserInterface');

    $authMock = $this->getMock('Zend\Authentication\AuthenticationService');
    $authMock->expects($this->any())
         ->method('hasIdentity')
         ->will($this->returnValue(true));

    $authMock->expects($this->any())
         ->method('getIdentity')
         ->will($this->returnValue(array('user_id' => 1))); 
```

但我不确定如何将它注入到控制器实例中。

假设我的索引操作代码如下：

```
public function indexAction() {
    //Check if logged in
    if (!$this->zfcUserAuthentication()->hasIdentity()) {
        return $this->redirect()->toRoute('zfcuser/login');
    }

    return new ViewModel(array(
        'success' => true,
    ));
} 
```

测试结果：

```
1) SmsTest\Controller\SmsControllerTest::testIndexActionCanBeAccessed
Zend\ServiceManager\Exception\ServiceNotFoundException: Zend\ServiceManager\ServiceManager::get was unable to fetch or create an instance for zfcUserAuthentication

/var/www/soap-app.localhost/Zend/vendor/zendframework/zendframework/library/Zend/ServiceManager/ServiceManager.php:450
/var/www/soap-app.localhost/Zend/vendor/zendframework/zendframework/library/Zend/ServiceManager/AbstractPluginManager.php:110
/var/www/soap-app.localhost/Zend/vendor/zendframework/zendframework/library/Zend/Mvc/Controller/PluginManager.php:90
/var/www/soap-app.localhost/Zend/vendor/zendframework/zendframework/library/Zend/Mvc/Controller/AbstractController.php:276
/var/www/soap-app.localhost/Zend/vendor/zendframework/zendframework/library/Zend/Mvc/Controller/AbstractController.php:291
/var/www/soap-app.localhost/Zend/module/Sms/src/Sms/Controller/SmsController.php:974
/var/www/soap-app.localhost/Zend/module/Sms/src/Sms/Controller/SmsController.php:974
/var/www/soap-app.localhost/Zend/module/Sms/src/Sms/Controller/SmsController.php:158
/var/www/soap-app.localhost/Zend/vendor/zendframework/zendframework/library/Zend/Mvc/Controller/AbstractActionController.php:87
/var/www/soap-app.localhost/Zend/vendor/zendframework/zendframework/library/Zend/EventManager/EventManager.php:468
/var/www/soap-app.localhost/Zend/vendor/zendframework/zendframework/library/Zend/EventManager/EventManager.php:208
/var/www/soap-app.localhost/Zend/vendor/zendframework/zendframework/library/Zend/Mvc/Controller/AbstractController.php:108
/var/www/soap-app.localhost/Zend/module/Sms/test/SmsTest/Controller/SmsControllerTest.php:57 
```

导致此异常的行是控制器：如果`(!$this->zfcUserAuthentication()->hasIdentity()) {` 该行与 SmsController 中的第 974 行相关。

很明显我无权访问 ZfcUserAuthentication 服务，所以问题是，**如何模拟 ZfcUserAuthentication 服务并将其注入到我的控制器中？**

为了继续这个主题，我将如何模拟登录用户以成功测试我的操作是否符合规范？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-02T02:54:26.993

ZfcUser 文档建议这是一个插件，因此您需要将其注入控制器。

你需要修改你的类名来选择 ZfcUser 类

由于 getIdenty 返回不同的对象，您的模拟也需要添加。

以下对我有用 - 插入您的 phpunit setUp() 方法。

```
$serviceManager = Bootstrap::getServiceManager();
$this->controller = new RegisterController();
$this->request    = new Request();
$this->routeMatch = new RouteMatch(array('controller' => 'add'));
$this->event      = new MvcEvent();
$config = $serviceManager->get('Config');
$routerConfig = isset($config['router']) ? $config['router'] : array();
$router = HttpRouter::factory($routerConfig);
$this->event->setRouter($router);
$this->event->setRouteMatch($this->routeMatch);
$this->controller->setEvent($this->event);
$this->controller->setServiceLocator($serviceManager);
$mockAuth = $this->getMock('ZfcUser\Entity\UserInterface');

$ZfcUserMock = $this->getMock('ZfcUser\Entity\User');  

$ZfcUserMock->expects($this->any())
            ->method('getId')
            ->will($this->returnValue('1'));

$authMock = $this->getMock('ZfcUser\Controller\Plugin\ZfcUserAuthentication');

$authMock->expects($this->any())
         ->method('hasIdentity')
            -> will($this->returnValue(true));  

$authMock->expects($this->any())
         ->method('getIdentity')
         ->will($this->returnValue($ZfcUserMock));

$this->controller->getPluginManager()
     ->setService('zfcUserAuthentication', $authMock); 
```

可能有一种更简单的方法会欢迎其他想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-02T12:57:06.950

我就是这样做的。

```
<?php

namespace IssueTest\Controller;

use Zend\Test\PHPUnit\Controller\AbstractHttpControllerTestCase;

class IssueControllerTest extends AbstractHttpControllerTestCase
{
    protected $serviceManager;

    public function setUp()
    {
        $this->setApplicationConfig(
            include '/media/policybubble/config/application.config.php'
        );
        parent::setUp();
        $ZfcUserMock = $this->getMock('ZfcUser\Entity\User');
        $ZfcUserMock->expects($this->any())
            ->method('getId')
            ->will($this->returnValue('1'));
        $authMock = $this->getMock(
            'ZfcUser\Controller\Plugin\ZfcUserAuthentication'
        );
        $authMock->expects($this->any())
            ->method('hasIdentity')
            ->will($this->returnValue(true));
        $authMock->expects($this->any())
            ->method('getIdentity')
            ->will($this->returnValue($ZfcUserMock));
        $this->serviceManager = $this->getApplicationServiceLocator();
        $this->serviceManager->setAllowOverride(true);
        $this->serviceManager->get('ControllerPluginManager')->setService(
            'zfcUserAuthentication', $authMock
        );
    }

    public function testIndexActionCanBeAccessed()
    {
        $this->dispatch('/issue');
        $this->assertResponseStatusCode(200);
        $this->assertModuleName('Issue');
        $this->assertControllerName('Issue\Controller\Issue');
        $this->assertControllerClass('IssueController');
        $this->assertMatchedRouteName('issue');
    }

    public function testAddActionRedirectsAfterValidPost()
    {
        $issueTableMock = $this->getMockBuilder('Issue\Model\IssueTable')
            ->disableOriginalConstructor()
            ->getMock();
        $issueTableMock->expects($this->once())
            ->method('saveIssue')
            ->will($this->returnValue(null));
        $this->serviceManager->setService('Issue\Model\IssueTable', $issueTableMock);
        $postData = array(
            'title' => 'Gun Control',
            'id'    => '',
        );
        $this->dispatch('/issue/add', 'POST', $postData);
        $this->assertResponseStatusCode(302);
        $this->assertRedirectTo('/issue');
    }

    public function testEditActionRedirectsAfterValidPost()
    {
        $issueTableMock = $this->getMockBuilder('Issue\Model\IssueTable')
            ->disableOriginalConstructor()
            ->getMock();
        $issueTableMock->expects($this->once())
            ->method('saveIssue')
            ->will($this->returnValue(null));
        $this->serviceManager->setService('Issue\Model\IssueTable', $issueTableMock);
        $issueTableMock->expects($this->once())
            ->method('getIssue')
            ->will($this->returnValue(new \Issue\Model\Issue()));
        $postData = array(
            'title' => 'Gun Control',
            'id'    => '1',
        );
        $this->dispatch('/issue/edit/1', 'POST', $postData);
        $this->assertResponseStatusCode(302);
        $this->assertRedirectTo('/issue');
    }

    public function testDeleteActionRedirectsAfterValidPost()
    {
        $postData = array(
            'title' => 'Gun Control',
            'id'    => '1',
        );
        $this->dispatch('/issue/delete/1', 'POST', $postData);
        $this->assertResponseStatusCode(302);
        $this->assertRedirectTo('/issue');
    }
}

<?php

namespace Issue\Controller;

use Zend\Mvc\Controller\AbstractActionController;
use Zend\View\Model\ViewModel;
use Issue\Model\Issue;
use Issue\Form\IssueForm;

class IssueController extends AbstractActionController
{
    protected $issueTable;

    public function indexAction()
    {
        if (!$this->zfcUserAuthentication()->hasIdentity()) {
            return;
        }
        return new ViewModel(
            array(
                'issues' => $this->getIssueTable()->fetchAll(
                    $this->zfcUserAuthentication()->getIdentity()->getId()
                ),
            )
        );
    }

    public function addAction()
    {
        if (!$this->zfcUserAuthentication()->hasIdentity()) {
            return $this->redirect()->toRoute('issue');
        }
        $form = new IssueForm();
        $form->get('submit')->setValue('Add');
        $request = $this->getRequest();
        if ($request->isPost()) {
            $issue = new Issue();
            $form->setInputFilter($issue->getInputFilter());
            $form->setData($request->getPost());
            if ($form->isValid()) {
                $issue->exchangeArray($form->getData());
                $this->getIssueTable()->saveIssue(
                    $issue,
                    $this->zfcUserAuthentication()->getIdentity()->getId()
                );
                // Redirect to list of issues
                return $this->redirect()->toRoute('issue');
            }
        }
        return array('form' => $form);
    }

    public function editAction()
    {
        if (!$this->zfcUserAuthentication()->hasIdentity()) {
            return $this->redirect()->toRoute('issue');
        }
        $id = (int)$this->params()->fromRoute('id', 0);
        if (!$id) {
            return $this->redirect()->toRoute(
                'issue', array(
                'action' => 'add'
            )
            );
        }
        // Get the Issue with the specified id.  An exception is thrown
        // if it cannot be found, in which case go to the index page.
        try {
            $issue = $this->getIssueTable()->getIssue($id);
        } catch (\Exception $ex) {
            return $this->redirect()->toRoute(
                'issue', array(
                'action' => 'index'
            )
            );
        }
        $form = new IssueForm();
        $form->bind($issue);
        $form->get('submit')->setAttribute('value', 'Edit');
        $request = $this->getRequest();
        if ($request->isPost()) {
            $form->setInputFilter($issue->getInputFilter());
            $form->setData($request->getPost());
            if ($form->isValid()) {
                $this->getIssueTable()->saveIssue(
                    $issue,
                    $this->zfcUserAuthentication()->getIdentity()->getId()
                );
                // Redirect to list of issues
                return $this->redirect()->toRoute('issue');
            }
        }
        return array(
            'id'   => $id,
            'form' => $form,
        );
    }

    public function deleteAction()
    {
        if (!$this->zfcUserAuthentication()->hasIdentity()) {
            return $this->redirect()->toRoute('issue');
        }
        $id = (int)$this->params()->fromRoute('id', 0);
        if (!$id) {
            return $this->redirect()->toRoute('issue');
        }
        $request = $this->getRequest();
        if ($request->isPost()) {
            $del = $request->getPost('del', 'No');
            if ($del == 'Yes') {
                $id = (int)$request->getPost('id');
                $this->getIssueTable()->deleteIssue($id);
            }
            // Redirect to list of issues
            return $this->redirect()->toRoute('issue');
        }
        return array(
            'id'    => $id,
            'issue' => $this->getIssueTable()->getIssue($id)
        );
    }

    public function getIssueTable()
    {
        if (!$this->issueTable) {
            $sm = $this->getServiceLocator();
            $this->issueTable = $sm->get('Issue\Model\IssueTable');
        }
        return $this->issueTable;
    }
} 
```

# adobe-illustrator - 如何调试严重依赖现有 Illustrator 文档的脚本？

> ID：14354463
> 
> 赞同：4
> 
> 时间：2013-01-16T08:56:11.713
> 
> 标签：adobe-illustrator, extendscript

我正在使用 Adob​​e Illustrator CS5 和 ExtendScript Toolkit CS5。

我有一个非常复杂的脚本，并且 alert() 不再起作用，因为东西在循环中。如何模拟我正在使用特定 Illustrator 文档的事实，以便我可以使用 ExtendScript Toolkit 的调试功能？

我希望它与在 Illustrator 文档中并进入“文件->脚本->脚本名”相同。如果我只是在 ExtendScript 中测试脚本，我会收到一个错误

```
if (app.documents.length > 0) { 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T14:18:07.623

解决了！

我必须在 ExtendScript Toolkit 中将目标应用程序更改为 Illustrator，并设置调试级别以`$.level=2` 使其正常工作。我现在可以有断点和所有的好东西。

# android - Android gridview 使用 AsyncTask 图片加载问题

> ID：14354465
> 
> 赞同：0
> 
> 时间：2013-01-16T08:56:16.443
> 
> 标签：android, image, gridview, android-asynctask

我是安卓新手。我使用 AsyncTask 在gridview 中显示图像。但是有一些问题，比如：

1：再次调用 onScroll AsyncTask 任务。2：图像显示不正确（一旦我滚动它会显示顶部图像并加载原始图像）。

这是我的代码：

```
 public View getView(int position, View convertView, ViewGroup parent) {

            LayoutInflater layoutInflater = (LayoutInflater) ctx
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            ListRowHolder listRowHolder;
            if (convertView == null) {
                convertView = layoutInflater.inflate(R.layout.ll_sponsor_list_item,
                        parent, false);
                listRowHolder = new ListRowHolder();
                listRowHolder.imgSponsor = (ImageView) convertView
                        .findViewById(R.id.imggrid_item_image);
                convertView.setTag(listRowHolder);

            } else {
                listRowHolder = (ListRowHolder) convertView.getTag();
            }
            try {
                task = new BitmapWorkerTask(listRowHolder.imgSponsor);
                task.image_path = ImageName.get(position);
                task.execute(1);

            } catch (Exception e) {
                if (thisLogger != null) {
                    thisLogger.error(e.toString());
                    thisLogger.error("\r\n");
                }
            }

            return convertView;
        }

class BitmapWorkerTask extends AsyncTask<Integer, Void, Bitmap> {
        private final WeakReference<ImageView> imageViewReference;

        private String image_path;

        public BitmapWorkerTask(ImageView imageView) {
            imageViewReference = new WeakReference<ImageView>(imageView);
        }

@Override
    protected Bitmap doInBackground(Integer... params) {

        try {
            while (running) {
                Bitmap picture = BitmapFactory.decodeFile(image_path);
                int width = picture.getWidth();
                int height = picture.getHeight();
                float aspectRatio = (float) width / (float) height;
                int newWidth = 98;
                int newHeight = (int) (98 / aspectRatio);
                Log.v("ImageList", "L");
                return picture = Bitmap.createScaledBitmap(picture,
                        newWidth, newHeight, true);

            } 
        } catch (Exception e) {
            if (thisLogger != null) {
                thisLogger.error(e.toString());
                thisLogger.error("\r\n");
            }
        }
        return null;

    }

    @Override
            protected void onPostExecute(Bitmap bitmap) {
                if (imageViewReference != null && bitmap != null) {
                    final ImageView imageView = imageViewReference.get();
                    if (imageView != null) {
                        imageView.setImageBitmap(bitmap);
                    }

                }

            } 
```

请让我知道这里有什么问题。

# java - Java Web 应用程序“插件”架构

> ID：14354466
> 
> 赞同：17
> 
> 时间：2013-01-16T08:56:30.047
> 
> 标签：java, maven, web-applications, plugins, architecture

请提供有关如何为 Java Web 应用程序做“插件”架构的建议。

目前我们在 Tomcat servlet 容器中使用非常简单和标准的 Spring+Hibernate+Struts 2。（用maven构建）

我需要类似[Redmine](http://www.redmine.org/)的东西。可以启用/禁用任何模块的地方，更新 ![红米用户界面](../Images/c91206191b08df50383a39319a810f4b.png)

请排除 OSGi、Portlet 等繁重的选项。

*   OSGi 太重了，没有很好地采用 web 技术。我已经看过[Eclipse Germini](http://www.eclipse.org/gemini/)；
*   [Portlet](http://en.wikipedia.org/wiki/Java_Portlet_Specification)它只是旧的，并且从未流行过。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-20T15:49:14.913

我将尝试提供几种可能的解决方案。我确实花了一些时间为我正在从事的项目准备小型 PoC，所以希望下面的选项是相关的。

重要提示：定义一些扩展点、解析并找到可用的实现真的很容易。有很多可用的解决方案，例如好的和简单的一个[——JSPF](http://code.google.com/p/jspf/)

**资源是WEB应用的主要问题**

**操作系统**

OSGi，并没有那么糟糕并且很有用。它似乎很重（有些实现很重），但这是标准化平台的价格。我建议检查[Apache Felix](http://felix.apache.org/)。它可以在“轻量级”模式下使用。顺便说一句，它包括构建为松散耦合的基于插件的应用程序的 Web 控制台，可能会有所帮助：

![在此处输入图像描述](../Images/312e49e9fc1213687caaf8b66871178e.png)

[扩展 Apache Felix Web 控制台的](http://felix.apache.org/documentation/subprojects/apache-felix-web-console/extending-the-apache-felix-web-console.html)一些示例

> 可以通过为接口 javax.servlet.Servlet 注册一个 OSGi 服务来扩展 Web 控制台，并将服务属性 felix.webconsole.label 设置为页面的标签（URL 中的最后一段）。相应的服务称为 Web 控制台插件或简称插件。

您还可以查看[eie-manager](http://sourceforge.net/projects/eie/)，它干净简单，使用 OSGi 管理插件。对你来说可能是一个很好的例子。

**自定义插件框架**

我建议查看[Jenkins/Hudson](http://jenkins-ci.org/)背后的解决方案。我想说Jenkins插件系统相当成熟可靠。可以作为一个很好的例子。

![在此处输入图像描述](../Images/4a23571a898e818f6a09d4e5380b1a56.png)

另请检查[Hudson 插件架构](http://hudson-ci.org/docs/HudsonArch-Plugin.pdf)

**简单的解决方案**

对于我的项目，我使用自定义依赖解析器构建了基于[JSPF的插件抽象层。](http://code.google.com/p/jspf/)

优点：

*   简单小
*   清洁概念
*   效果很好

缺点：

*   没有适当的插件管理可能会很慢（完整的类路径搜索）
*   提供非常基本的功能
*   可能需要额外注意

我建议仅当您确实需要一些简单性并想要控制一切时才使用[JSPF 。](http://code.google.com/p/jspf/)[JPF](http://jpf.sourceforge.net/)提供了许多开箱即用的有趣功能，例如：

> 插件可以“热注册”，甚至可以在应用程序执行期间取消注册。更重要的是，注册插件可以“即时”激活和停用，最大限度地减少运行时资源的使用。

问题是 JPF 已经死了。

**建议**

一定要花一些时间在[Apache Felix](http://felix.apache.org/)上。它已经足够成熟，因此您的时间投资可能会得到很多回报。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-16T12:47:55.403

查看这个问题的答案：[Best way to build a Plugin system with Java](https://stackoverflow.com/questions/465099/best-way-to-build-a-plugin-system-with-java)

如果您不信任插件代码，您可以实现沙盒，如下所述：[沙盒对抗 Java 应用程序中的恶意代码](https://stackoverflow.com/questions/502218/sandbox-against-malicious-code-in-a-java-application)

开源[Java Plug-in Framework](http://jpf.sourceforge.net)项目支持插件停用，即使它对您的目的来说太重，您也可以从中获得灵感。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-06T18:50:01.823

[Atlassian在这里](https://bitbucket.org/atlassian/atlassian-plugins)开源了他们的插件系统。我看到 Atlassian 团队正在大力工作。值得探索它的[文档](https://developer.atlassian.com/display/DOCS/Plugin+Framework)

# css - 使用 ie7 替代 css 浮动和清除

> ID：14354467
> 
> 赞同：0
> 
> 时间：2013-01-16T08:56:33.760
> 
> 标签：css

我有一个包含以下元素的页面：

```
<body>
    <div class="C2">
        <div class="Ban">
            <div class="blockWithLabel position BankCode">
                <span>BankCode</span>
                <br />
                <input type="text"/>
            </div>
            <div class="blockWithLabel position BranchCode">
                <span>BranchCode</span>
                <br />
                <input type="text" style="width:500px"/>
            </div>
            <div class="blockWithLabel position AccountNumber">
                <span>AccountNumber</span>
                <br />
                <input type="text"/>
            </div>
            <div class="blockWithLabel position CheckDigits">
                <span>CheckDigits</span>
                <br />
                <input type="text"/>
            </div>
            <div class="blockWithLabel position BankName">
                <span>BankName</span>
                <br />
                <input type="text"/>
            </div>
            <div class="position validator">
                <div class="validator">VALIDATOR</div>
            </div>
        </div>
    </div>
</body> 
```

我想应用这种风格：

```
 .Ban { overflow:hidden }
    div.blockWithLabel { display:inline-table; overflow:none; }

    .C2 { background-color: blue; }
    .C2 div.blockWithLabel { background-color:yellow; margin:2px;}
    .C2 div.position { float:left} 
```

对于所有浏览器，我在同一行中有 6 个元素（如果屏幕宽度足够大）

现在，我想使用

```
.C2 div.position.AccountNumber, .C2 div.position.validator { clear:left } 
```

问题是在 IE7 中，AccountNumber 出现在新行中，但下一个元素 CheckDigit 和 BankName 没有出现在同一行中，而是出现在前一行中！

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:01:05.030

对 IE7 使用条件注释

```
<!--[if lte IE 7]>
<style type="text/css">
    /* hide other layout for other browsers by 
       setting display to none 
    */
    .C2 {
        display:none;
    }
</style>
Use ie7 formatting here with tables instead of divs.
<table>
    <TR>
        <T...................
<![endif]--> 
```

# java - 从 .dll 生成 Java 类

> ID：14354469
> 
> 赞同：2
> 
> 时间：2013-01-16T08:56:38.103
> 
> 标签：java, java-native-interface, jnaerator

我有一个我想从 java 访问的设备。唯一的方法是使用制造商提供的 dll 库。我已经阅读了有关 JNI、JNA 等的信息，并且可能有一个外部工具可以分析 dll 并自动生成 Java 类。

有人知道这样做的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:05:37.677

您需要这样的东西 - [JNAerator](http://code.google.com/p/jnaerator/)可以“编译”本机头文件以生成 JNA 映射，并提供一些有限的 C++ 支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-13T06:57:27.463

最后，我们使用[jawin](http://jawinproject.sourceforge.net/)生成用于访问.dll 的Java 类。jamin typebrowser 工具是唯一可以处理我们试图访问的 C++ .dll 的工具。

不幸的是，jahin 项目不再开发。最后一个版本可以追溯到 2005 年初。

# c# - 在 C# 中使用 XmlSerializer 将复杂元素内容反序列化为字符串

> ID：14354470
> 
> 赞同：1
> 
> 时间：2013-01-16T08:56:39.553
> 
> 标签：c#, xmlserializer, xml-deserialization

有没有办法使用 XmlSerializer 将包含简单文本或子元素的元素反序列化为字符串？

Xml 样本：

```
<Attribute>
    <AttributeValue xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="xs:string">thisistext</AttributeValue>
    <AttributeValue>
        <e:Authorities xmlns:e="urn:dummy">
            <e:Authority>ORG_CHIEF</esia-encoder:Authority>
        </e:Authorities>
    </AttributeValue>
</Attribute> 
```

C# 属性：

```
[XmlElement("AttributeValue", IsNullable = true)]
public string[] AttributeValue { get; set; } 
```

第一个 AttributeValue 的反序列化成功，但下一个失败。难怪，因为 ReadElementString 方法需要简单或空的内容。我正在寻找一种方法来告诉序列化程序“将此元素的内容放入字符串，无论它包含什么”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:04:17.780

实际上，您在 XML 中的第二个值是：

```
 <e:Authorities xmlns:e="urn:dummy">
     <e:Authority>ORG_CHIEF</esia-encoder:Authority>
 </e:Authorities> 
```

`string`这不是预期的有效数据类型，因为：

```
public string[] AttributeValue {get; set;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:08:00.480

如果您能够在 XSD 中定义它，您可以使用[XSD2Code](http://xsd2code.codeplex.com/)或 xsd.exe 为 XSD 创建一个类以进行反序列化。

这个如何？

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified" attributeFormDefault="unqualified">
    <xs:element name="Attribute">
        <xs:complexType>
            <xs:sequence>
                <xs:element name="AttributeValue" maxOccurs="unbounded">
                    <xs:complexType>
                        <xs:choice>
                            <xs:element name="AuthoritiesString" type="xs:string"/>
                            <xs:element name="AuthoritiesElement">
                                <xs:complexType>
                                    <xs:sequence>
                                        <xs:element name="Authority"/>
                                    </xs:sequence>
                                </xs:complexType>
                            </xs:element>
                        </xs:choice>
                    </xs:complexType>
                </xs:element>
            </xs:sequence>
        </xs:complexType>
    </xs:element>
</xs:schema> 
```

# entity-framework - EF Code First 迁移 - 我应该在降级后删除迁移吗？

> ID：14354473
> 
> 赞同：1
> 
> 时间：2013-01-16T08:56:50.183
> 
> 标签：entity-framework, ef-code-first, entity-framework-migrations

我在迁移中使用 EF Code First。

在我降级到迁移版本后，我应该删除之后创建的所有其他版本吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T22:08:13.587

如果您愿意，删除前向迁移就可以了。下次您运行添加迁移时，它会发现与当前迁移相比发生了哪些变化。我能想到的一件事是，如果你在一个团队中工作，你需要确保每个人都同意同时删除前向迁移。

当您降级时，“Down”方法会在每个前向迁移中运行，并且它们也会从 _MigrationHistory 表中删除。

或者，您可以将模型更改回目标迁移时的模型，然后执行添加迁移 - 这将有效地恢复您的数据库。

# objective-c - 在继续方法之前等待条件

> ID：14354474
> 
> 赞同：0
> 
> 时间：2013-01-16T08:56:53.423
> 
> 标签：objective-c, multithreading, cocoa

我正在编写一个类来检索和解析从服务器下载的文件。

我在类中有一个解析信息的方法，并且在初始化类时会下载信息。

问题是，有时，在下载信息本身之前调用解析信息的方法。

```
FileParser *instance = [[FileParser alloc] initWithURL:@"somewhere"];
[instance parseData]; 
```

每次`parseData`在类初始化后直接调用方法，都会失败，因为不是所有的内容都可用。

在不中断主线程的情况下，如何才能等到所有信息都下载完毕后再继续执行 parseData 方法？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:00:15.487

简单：您需要在后台线程/队列上执行整个操作，或者将您的`FileParser`类重构为更加异步的设计。该设计将以回调机制为中心，例如委托或块。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-16T09:04:19.967

你应该考虑使用委托。您将处理下载数据的委托传递给您的下载类。看[这里](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-custom-delegates/)

# android - 清除 Android 结算本地缓存？

> ID：14354475
> 
> 赞同：3
> 
> 时间：2013-01-16T08:57:16.910
> 
> 标签：android, android-billing

我正在使用 Android Billing API V3 从 Play 商店查询购买信息。我想知道是否可以清除本地缓存。

V3 为计费 API 添加了本地缓存功能，以减少网络流量。我有一个每天运行的更新服务，它更新我的元数据，由于我在我的应用程序中显示成本，我希望刷新本地缓存并触发更新，以防我更新了价格以确保显示正确的价格。

**文档说：**

*由于 Google Play 客户端现在在设备本地缓存应用内结算信息，因此您可以使用版本 3 API 更频繁地查询此信息，例如通过 getPurchases 调用。与以前版本的 API 不同，许多第 3 版 API 调用将通过缓存查找而不是通过与 Google Play 的网络连接来提供服务，这显着加快了 API 的响应时间。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-12-07T14:51:51.703

您必须知道，Android 应用内购买一次购买只允许一位用户在其生命周期内购买一次。如果您再次想要它，您必须提出请求或在游戏控制台中创建新产品。有关更多信息，请访问此链接。

[https://developer.android.com/google/play/billing/billing_onetime](https://developer.android.com/google/play/billing/billing_onetime)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:09:20.717

尝试这个 ：

添加此类`Application`：

```
package com.hrupin.cleaner;

import java.io.File;

import android.app.Application;
import android.util.Log;

public class MyApplication extends Application {
    private static MyApplication instance;

    @Override
    public void onCreate() {
        super.onCreate();
        instance = this;
    }

    public static MyApplication getInstance() {
        return instance;
    }

    public void clearApplicationData() {
        File cache = getCacheDir();
        File appDir = new File(cache.getParent());
        if (appDir.exists()) {
            String[] children = appDir.list();
            for (String s : children) {
                if (!s.equals("lib")) {
                    deleteDir(new File(appDir, s));
                    Log.i("TAG", "**************** File /data/data/APP_PACKAGE/" + s + " DELETED *******************");
                }
            }
        }
    }

    public static boolean deleteDir(File dir) {
        if (dir != null && dir.isDirectory()) {
            String[] children = dir.list();
            for (int i = 0; i < children.length; i++) {
                boolean success = deleteDir(new File(dir, children[i]));
                if (!success) {
                    return false;
                }
            }
        }

        return dir.delete();
    }
} 
```

然后，从 any 拨打此电话`Activity`：

```
MyApplication.getInstance().clearApplicationData(); 
```

参考 ：

[如何以编程方式清除 Android 应用程序中的用户数据](http://www.hrupin.com/2011/11/how-to-clear-user-data-in-your-android-application-programmatically)

谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T11:34:36.593

不幸的是，Google Play 客户端是执行缓存的应用程序，并且没有公开用于清除缓存的 API。

我不明白你为什么要清除缓存？Google Play 客户端会收到任何更改的通知，因此会相应地使其缓存无效。假设返回的调用是正确的。

# bdd - Fitnesse 自动生成夹具类

> ID：14354485
> 
> 赞同：1
> 
> 时间：2013-01-16T08:57:44.183
> 
> 标签：bdd, fitnesse, acceptance-testing

我正在评估 Fitnesse 作为验收测试工具。有没有办法从健身测试页面自动生成夹具类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T10:19:57.390

不可以。在体能测试页面中，您可以定义输入数据和预期结果，但您必须自己编写夹具类，或者如果幸运的话，您可能会在互联网上找到与您需要的类似的东西（例如，您可以找到一些甲骨文夹具，然后你不必写）。

# javascript - 使用 Google API 将其他人连接到我的 Google Calander - 使用 JavaScript。

> ID：14354487
> 
> 赞同：2
> 
> 时间：2013-01-16T08:57:45.487
> 
> 标签：javascript, api

我需要一点帮助。我设法使用 Oauth2.0 和 gapi.auth.authorize 从 Web 应用程序授权并同步我的日历和我的事件，但我希望其他人从 Web 应用程序连接我的日历但不向他们显示我的用户名和密码 -**这样他们就可以在我的日历上安排新活动。** 我怎么能用javascript来做呢？？？？

先感谢您...

# java - SEAM @DataModelSelection 范围

> ID：14354489
> 
> 赞同：0
> 
> 时间：2013-01-16T08:57:51.573
> 
> 标签：java, jsf, jakarta-ee, richfaces, seam

假设我有一个`dataTable`, 其中一个列是 a `commandLink`，它会打开 a ，其中`rich:modalPanel`包含有关该项目的详细信息。问题是，当 modalPanel 打开时，@DataModelSelection 字段是否仍然具有我单击 commandLink 的行？目前，我尝试使用简单的 outputText 显示项目的字段之一，并且它没有被渲染。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T13:14:17.130

好的，阅读[以下](http://www.digitalsanctuary.com/tech-blog/java/jboss/seam/displaying-and-rerendering-a-richfaces-modalpanel-from-a-commandlink.html)文章有所帮助。

# codeigniter - 如何在codeigniter中定义2个配置上传文件

> ID：14354492
> 
> 赞同：1
> 
> 时间：2013-01-16T08:58:01.953
> 
> 标签：codeigniter, upload, config

我想上传 2 个带有 2 个配置部分的文件，但第一个文件不起作用，第二个文件对我有好处。我怎样才能在这段代码中找到问题。

请帮我。这是我的代码：

```
$this->load->library('upload');

    $config['upload_path']   = './uploads/images/';
    $config['allowed_types'] = 'gif|jpg|png';
    $config['max_size']      = '200';
    $config['max_width']     = '200';
    $config['max_height']    = '200';
    $config['file_name']     = time();

    $this->upload->initialize($config); // Important
    if ($this->upload->do_upload('logo')) { 

        $logo = $this->upload->data(); 

    } elseif ($this->input->post('logo')) { 

        $logo['file_name'] =  $this->input->post('logo');

    } else {
        $logo['file_name'] = '';    
    }

    //===================================================

    $config['upload_path']   = './uploads/images/';
    $config['allowed_types'] = 'gif|jpg|png';
    $config['max_size']      = '200';
    $config['max_width']     = '950';
    $config['max_height']    = '250';
    $config['file_name']     = time();

    $this->upload->initialize($config); // Important
    if ($this->upload->do_upload('header')) { 

        $header = $this->upload->data(); 

    } elseif($this->input->post('header')) {

        $header['file_name'] =  $this->input->post('header');   

    } else { 
        $header['file_name'] = ''; 
    } 
```

# python - Python 返回“错误”的退出代码

> ID：14354496
> 
> 赞同：2
> 
> 时间：2013-01-16T08:58:17.470
> 
> 标签：python, windows-7, batch-file, python-2.6, exit-code

我的目标是通过一个小的 *.bat 脚本执行一个 python 脚本（执行一些单元测试）。*.bat 脚本还应该接收 python 脚本的退出状态。但似乎 *.py 文件的退出状态没有正确传输。

我的 testit.py：

```
execute_some_unittests()
   ...
   if success:
       sys.exit(1) 
   else:
       sys.exit(2)
   # End of the script 
```

我的test.bat：

```
python C:\testit.py
echo %ERRORLEVEL% 
```

根据我在 execute_some_unittests() 中运行的单元测试，运行 test.bat 会得到 1、2**或 0 ！！！**我绝对确定代码到达 sys.exit(1) （因为我记录了所有内容）但是（取决于测试的单元测试）它出错了。

我的猜测是执行单元测试正在设置一些标志，这些标志将与退出代码合并并产生一个类似 16 位退出代码（而不是 8）的 unix，并且 cmd 正在截断我的退出代码......

评论：

*   上面的代码**不在**try里面，除了block
*   用 os._exit(1) 替换 sys.exit(1) 没有帮助

我从 2 天开始就在这个问题上工作，并且会感激每一个想法......

我正在使用 Win7、python 2.6、模块：unittest、doctest、sys、os

**更新：**被要求提供一个完整的工作示例：

测试.py：

```
import unittest
from scipy.interpolate import interp1d
class Test(unittest.TestCase):
    def test_basic(self):
        self.failUnlessEqual(1, 1)
if __name__ == '__main__':
    suite = unittest.TestLoader().loadTestsFromTestCase(Test)
    unittest.TextTestRunner(verbosity=2).run(suite)
    import sys
    sys.exit(42) 
```

测试.bat：

```
python C:\test.py
echo %ERRORLEVEL% 
```

结果：错误级别 0（没有 import scipy.interpolate 它将是 42，~~但 scipy 不是唯一产生此问题的模块~~）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:37:19.183

这是`scipy`模块中的一个已知错误。请参阅问题“ [import scipy.sparse.sparsetools 导致一致的退出代码 0](http://projects.scipy.org/scipy/ticket/1314) ”。

这个问题似乎仍然悬而未决......

# asp.net - asp.net中提示中的确定取消按钮

> ID：14354499
> 
> 赞同：0
> 
> 时间：2013-01-16T08:58:32.807
> 
> 标签：asp.net, button, prompt

如何处理asp.net提示中的ok-cancel按钮？我想点击取消时，我可以做一份新工作吗？这是我的代码：

```
 <asp:Button ID="Button1" runat="server" OnClientClick="return a();"  Text="Button" />

function  a()
{
    var s = prompt("hello");
    if (s != 123) {
        alert("enter number correctly");
        return true;
    }
    else
        return false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:02:25.317

最优雅的方法是使用[jQuery UI 的 dialog](http://jqueryui.com/dialog/#modal-confirmation)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:06:40.750

您可以使用确认框执行此任务：-

```
<asp:Button ID="Button1" runat="server" OnClientClick="return disp_confirm();"  Text="Button" /> 
```

在按钮按下时使用此脚本：-

```
function disp_confirm()
{
var r=confirm("Press a button!");
if (r==true)
  {
  alert("You pressed OK!");
  }
else
  {
  alert("You pressed Cancel!");
  }
  return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T09:07:23.387

如果你想取消你需要的回发`return false`，否则`true`（反之）：

```
function  a()
{
    var s = prompt("hello");
    if (s != 123) {
        alert("enter number correctly");
        return false;
    }
    else
        return true;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T09:09:48.480

如果您想使用 JavaScript 执行此操作，那么[此处](http://www.javascripter.net/faq/confirm.htm)的以下内容将完全满足您的要求。否则，有一些非常好的和成熟的 JQuery 插件可以为您提供几乎无穷无尽的选择。

`if (confirm("Your question")) { // do things if OK }`

# windows - %variable% 和 !variable! 之间的区别！在批处理文件中

> ID：14354502
> 
> 赞同：35
> 
> 时间：2013-01-16T08:58:48.230
> 
> 标签：windows, command-line, batch-file

我正在编写一个批处理文件，我需要在其中输出一个包含“！”的字符串 到另一个文件。但是当我将该字符串回显到另一个文件时，它会删除“！” 从输出。

例如：输入：

```
set LINE=Hi this is! output
echo !LINE!>>new_file.txt 
```

new_file.txt 中的输出为：

```
Hi this is output 
```

此外，如果输入是

```
set LINE=Hello!! this is output!!
echo !LINE!>>new_file.txt 
```

new_file.txt 中的输出：

```
Hello 
```

因此，它跳过了！（感叹号）从输出到 new_file。如果我使用 %LINE%，那么它只会在输出文件中显示“echo is on”。

请提出解决此问题的方法。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-16T09:46:06.387

如果您启用了延迟扩展并希望输出感叹号，则需要对其进行转义。

感叹号的转义不需要，一个或两个插入符号，具体取决于放置。

```
@echo off
REM No escaping required, if delayed expansion is disabled
set test1=Test1!

setlocal EnableDelayedExpansion
REM One caret required
REM Delayed expansion uses carets independent of quotes to escape the exclamation mark
set "test2=Test2^!"

REM Two carets required
REM The first caret escapes the second caret in phase2 of the parser
REM Later in the delayed expansion phase, the remaining caret escapes the exclamation mark
set test3=Test3^^!

echo !test1!
echo !test2!
echo !test3! 
```

DOS 批处理中解释了块`!var!`和块之间的区别[：为什么我的设置命令导致没有任何内容被存储？](https://stackoverflow.com/a/14347131/463115)`%var%`

批处理解析器的解释可以在[Windows 命令解释器 (CMD.EXE) 如何解析脚本中找到？](https://stackoverflow.com/a/4095133/463115)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-16T09:04:39.007

看来您`SETLOCAL EnableDelayedExpansion`在代码中调用了更高的位置。看看[这里](http://ss64.com/nt/delayedexpansion.html)，看看有什么影响。

# assembly - 32/64 位的 Nasm 和 Disasm 问题

> ID：14354506
> 
> 赞同：1
> 
> 时间：2013-01-16T08:59:10.437
> 
> 标签：assembly, x86, x86-64, nasm

我是一个 nasm 新手，我想把这个小片段编译成 32 位和 64 位代码：

```
pop bx
ret 
```

使用“nasm.exe asm.asm”组装到 0x5b 0xc3。这应该是 32 位代码（nasm 默认），但“ndisasm.exe asm -b 32”错误地反汇编它以弹出**ebx**和 ret。

但

```
bits 64
pop bx
ret 
```

使用“nasm.exe asm.asm”和“ndisasm.exe asm -b 64”正确组装成 0x66 0x5b 0xc3 以将其反汇编以弹出 bx 和 ret。

我哪里错了？我现在很困惑

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T09:17:52.427

非常抱歉发布了这个，但似乎 nasm 默认为 16 位。

通过将“位 32”与 32 位代码一起使用，我解决了所有问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T11:39:32.357

这取决于您使用的输出格式。如果您不使用 指定输出格式`-f foo`，则将使用默认输出格式，通常是`bin`，并且使用`bin`作为输出格式选择 16 位模式，除非`BITS`另有明确定义。

[正如NASM 手册第 2.1.2 节中](http://www.nasm.us/doc/nasmdoc2.html#section-2.1.2)所说：“**如果您不`-f`向 NASM 提供选项，它将为您自己选择一种输出文件格式。在 NASM 的分发版本中，默认值始终为`bin`**;如果您”已经编译了您自己的 NASM 副本，您可以`OF_DEFAULT`在编译时重新定义并选择您想要的默认值。”

因此，假设您没有重新定义`OF_DEFAULT`，nasm`bin`默认用作输出格式。

然后，[在 NASM 手册的第 7.1 节中，](http://www.nasm.us/doc/nasmdoc7.html#section-7.1)它说：“该`bin`格式不生成目标文件：它在输出文件中除了您编写的代码之外什么都不生成。MS-DOS 使用这种“纯二进制”文件：`.COM`可执行文件和`.SYS`设备驱动程序是纯二进制文件。纯二进制输出对于操作系统和引导加载程序开发也很有用。” ... "**使用该`bin`格式将 NASM 默认设置为 16 位模式**（请参阅第 6.1 节）。为了使用`bin`编写 32 位或 64 位代码，例如 OS 内核，您需要显式发出`BITS 32`or`BITS 64`指示。”

然后，正如[NASM 手册第 6.1 节所述](http://www.nasm.us/doc/nasmdoc6.html#section-6.1)：“在大多数情况下，您不需要`BITS`显式使用。**设计用于 32 位或 64 位操作系统****的****、`aout`、`coff`、`elf`和`macho`object格式，默认情况下，所有这些都会导致 NASM 分别选择 32 位或 64 位模式`win32``win64`**。”

因此，这一切都取决于使用的输出格式，除非`BITS`明确定义。

# c++ - windows xp上的互斥锁给出0xC0000096：特权指令异常

> ID：14354507
> 
> 赞同：1
> 
> 时间：2013-01-16T08:59:14.883
> 
> 标签：c++, windows-xp, mutex

我尝试初始化一个互斥锁（VS 2008/windows xp sp2），但每次我运行我的应用程序时，该行：

```
pthread_mutex_init(&mutex, NULL); 
```

给我以下错误：

```
0xC0000096: Privileged instruction. 
```

我声明我的互斥锁：

```
static pthread_mutex_t mutex; 
```

我试图不调用 pthread_mutex_init 来声明我的互斥锁，例如：

```
static pthread_mutex_t mutex= PTHREAD_MUTEX_INITIALIZER; 
```

但

```
pthread_mutex_lock(&mutex); 
```

因 0xC0000096 崩溃：特权指令错误。

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:48:43.720

在 Windows 上，您必须使用`CreateMutex`API 来初始化互斥对象。
或者，您可以使用新的 C++`mutex`类，前提是您的编译器支持它。

# android - Cocos2d中物体的曲线运动

> ID：14354513
> 
> 赞同：0
> 
> 时间：2013-01-16T08:59:24.477
> 
> 标签：android, cocoa-touch, cocos2d-iphone, game-physics

我正在尝试开发游戏。我有这样的任务，从曲线运动的特定点扔球。我在这个对象中找到了教程[http://dan.clarke.name/2011/04/how-to-make-a-simple-android-game-with-cocos2d/进行线性运动。](http://dan.clarke.name/2011/04/how-to-make-a-simple-android-game-with-cocos2d/)我们可以在曲线运动中移动物体吗？

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:22:03.880

在测试项目中有一些曲线运动的例子。

UPD：似乎不完全支持曲线，但有一些技巧。尝试这个

[http://dashiellgough.wordpress.com/2011/08/04/cocos2d-move-along-a-curve-bezier-animation](http://dashiellgough.wordpress.com/2011/08/04/cocos2d-move-along-a-curve-bezier-animation)

[http://www.cocos2d-iphone.org/forum/topic/4853](http://www.cocos2d-iphone.org/forum/topic/4853)

# ios - 从给定索引开始枚举 NSArray 双向搜索（环绕）

> ID：14354514
> 
> 赞同：1
> 
> 时间：2013-01-16T08:59:31.070
> 
> 标签：ios, objective-c, nsarray, enumeration, enumerate

例子。我有一个包含 15 个对象的数组。我想从给定的索引开始枚举。说从索引 5 开始，然后是上面的索引，下面的索引，上面的，下面的等等……我确实希望它环绕。

所以我的例子中的索引顺序是。5, 6, 4, 7, 3, 8, 2, 9, 1, 10, 0, 11, 14, 12, 13

拥有类似于以下行的方法签名会很棒，但我不需要它来批准答案：

```
- (void)enumerateFromIndex:(NSUInteger)index wrapAroundAndGoBothWays:(void (^)(id obj, NSUInteger idx, BOOL *stop))block 
```

如何才能做到这一点？想避免复制数组等。

在这篇文章中，我们**没有环绕**：[枚举 NSArray 从给定索引开始双向搜索（没有环绕）](https://stackoverflow.com/q/14341488/202451)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T13:44:13.107

借用@omz，这里是包装变体，它更简单：

```
@implementation NSArray (Extensions)

- (void)enumerateFromIndex:(NSUInteger)index wrapAroundAndGoBothWays:(void (^)(id obj, NSUInteger idx, BOOL *stop))block
{
    BOOL stop = NO;
    NSUInteger actual = index;
    for (NSUInteger i = 0; i < self.count && !stop; i++) {
        actual += (2*(i%2)-1)*i;
        actual = (self.count + actual)%self.count;
        block([self objectAtIndex:actual], actual, &stop);
    }
}

@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T10:34:30.740

这是一个数学问题。有一个很好的解决方案。但是，它涉及预先对索引列表进行排序。

这个想法是将0到15的整数放在一个圆圈上，并按照它们在轴上出现的顺序排列元素。

由于在 ObjC 中执行此操作非常繁琐，因此我提出了 python 解决方案：

```
from math import pi, cos

def circlesort(N, start):
    eps = 1e-8
    res = range(N)
    def f(x):
        return -cos(2*pi*(x-start-eps)/N)
    res.sort( lambda x,y:cmp(f(x), f(y)) )
    return res 
```

然后

```
print circlesort(15, 5) 
```

输出

```
[5, 6, 4, 7, 3, 8, 2, 9, 1, 10, 0, 11, 14, 12, 13] 
```

这是期望的结果。

**编辑**

好的，这是一个 C 实现：

```
#include <stdlib.h>
#include <math.h>
#define sign(x) ((x)>0?1:(x)<0?-1:0)

void circlesort(int* values, int N, int start){
    double f(int x)
    {
        return -cos(2*M_PI*((double)(x-start)-.25)/N);
    }
    int compare (const void * a, const void * b)
    {
        return sign( f(*(int*)a) - f(*(int*)b) );
    }
    qsort (values, N, sizeof(int), compare);
} 
```

这将对长度为 N 的整数数组进行循环排序。像这样使用它：

```
int i, N = 15;
int indexes[N];
for (i=0;i<N;i++) 
    indexes[i] = i;
circlesort(indexes, N, 5); 
```

现在数组`indexes`按所需顺序排序。因为有嵌套函数，你应该添加`-fnested-functions`到编译器标志。

**编辑 2**

考虑到有一个更简单的解决方案（参见我的另一个答案）这一事实，这个解决方案相当学术。

# php - %0D%0A 在调用 echo 时不创建换行符

> ID：14354516
> 
> 赞同：0
> 
> 时间：2013-01-16T08:59:39.267
> 
> 标签：php

每次我尝试回显一个字符串时，都没有新行。我如何使用 php 在 php 中调用 echo 时换行`$_GET`？

这是我的代码：

```
<?php
    $text = "Hello world";
    $text2 = $_GET['msg'];

    echo $text2
?> 
```

这就是我在网址中输入的内容：

```
http://localhost/hello.php?msg=hello%0Dworld 
```

或者这个：

```
http://localhost/hello.php?msg=hello%0Aworld 
```

甚至这个：

```
http://localhost/hello.php?msg=hello%0D%0Aworld 
```

echo 必须是换行符，请不要说我应该使用与`$_GET`. 它一定要是`$_GET`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:09:05.043

请注意，在不验证它们的情况下回显任何请求变量是一个相当大的安全风险！如果您想使用此代码发布任何应用程序，则需要对其进行重新设计。

正如*常识*所说，从 urlencoded 到对应字符的转换是 php 自动完成的，但 HTML 不会呈现此类字符，因此您需要将它们转换为换行符或将消息括在`<pre>`标签中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T09:19:06.963

在执行练习时，您正在创建一个 HTML 页面。

HTML 是一种特殊的标记语言，它根据一组规则呈现，其中一些是：

*   `<>`字符具有命名*标签的控制结构的特殊含义*
*   **所有换行符都被忽略**
*   要在页面上制作换行符，必须使用合适的标签 - 例如`<br>`，`<p>`或其他。

因此，要使换行符出现在您的页面上，您必须将换行符转换为标签。使用`nl2br()`函数获取`<br />`标签，或者`str_replace()`如果您想要任何其他标签

# asp.net-mvc-4 - 没有强类型 html 帮助器的不显眼的 javascript 验证

> ID：14354520
> 
> 赞同：3
> 
> 时间：2013-01-16T09:00:03.330
> 
> 标签：asp.net-mvc-4, data-annotations, unobtrusive-javascript, unobtrusive-validation

我们能否生成不显眼的 javascript 验证属性（来自模型的数据注释，例如

```
data-val-number="The field WI % must be a number."
data-val-range="The field WI % must be between 0 and 100." 
```

)

不使用强类型的 HTML 助手（例如 TextBoxFor / EditorFor 等），只使用 Html.TextBox() 等

# internet-explorer - IE 10 开发人员工具中的“IE5 怪癖”到底是什么？

> ID：14354527
> 
> 赞同：5
> 
> 时间：2013-01-16T09:00:25.630
> 
> 标签：internet-explorer, browser, internet-explorer-10, web-standards, quirks-mode

> **可能重复：**
> [Windows 8 Internet Explorer 10 是否还有 quirksmode？](https://stackoverflow.com/questions/11865188/does-the-windows-8-internet-explorer-10-still-have-quirksmode)

我正在一个网站上工作，我们正试图在 IE10 中工作。在这个站点中，我们有一个 iframe，当我们使用 IE5 quirksmode 时，它​​会中断，我们确实需要该`main`站点才能正常工作，由于某种原因，我们不能只在 IE10 中使用 Quirks 文档模式，因为那样主站点将无法工作.

那么到底是什么，它与IE9|8 中`IE5 quirks`的相同吗？`quirks`

inb4 OP 是`non-standars compliant`：这是一个遗留产品，我们正在努力开发它的新版本。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T09:20:58.397

答案可以在这里找到：[windows 8 internet explorer 10还有quirksmode吗？](https://stackoverflow.com/questions/11865188/does-the-windows-8-internet-explorer-10-still-have-quirksmode)

> IE10 有两种怪异模式。新的称为“Quirks 模式”，其行为与 Firefox 和 Webkit 中的 quirks 模式完全相同 - 您可以通过删除`<!doctype>`. 所有 HTML5 和其他新功能都在此模式下工作。仅存在一些轻微的规范违规（不需要 CSS 尺寸等单位）。
> 
> 旧的 quirks 模式称为“IE5 Quirks 模式”，其行为与 IE9 中的 quirks 模式相同。您可以使用 X-UA-Compatible: IE=5 HTTP 标头或标签打开它。在这种模式下，IE 将页面呈现为旧版 IE5。

如果这有助于您去更新`duri's`答案而不是这个！

# javascript - 阻止javascript的流动

> ID：14354529
> 
> 赞同：0
> 
> 时间：2013-01-16T09:00:28.110
> 
> 标签：javascript

如果我写：

```
window.onbeforeunload = function(){ return 'exit?' ;}; 
```

我得到一个弹出窗口来停留/离开页面。您可以在 html 中创建自定义弹出窗口吗？

问题是这样的：如果我创建一个弹出 html，它仅在您退出当前页面时激活，我会看到他半秒钟，然后更改页面......我该如何解决这个问题？我需要一些东西（比如命令警报），我会阻止页面，直到您按下按钮。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T09:04:51.127

你不能那样做。这很好，因为如果每个网站都可以阻止我离开页面浏览，直到他们喜欢它，那真是太烦人了*。*

`onbeforeunload`是您拥有的唯一机制。它确保浏览器仍然有足够的控制权让我在我想离开时让我离开，并防止你让我陷入`alert`循环或类似情况。

# android - Android 的异步 Http 客户端返回 null

> ID：14354533
> 
> 赞同：0
> 
> 时间：2013-01-16T09:00:40.757
> 
> 标签：android

在我使用 Asynchronous Http Client for Android 的程序中，一个 java.io.EOFException 发生了关于 http get reqeust 的问题。以下是我的示例代码：

```
String url = http://te.3g2win.com/wordpress/?callback=?&zywxapp/content/post/82; 
AsyncHttpClient client = new AsyncHttpClient();
client.get(url, new AsyncHttpResponseHandler() {
    @Override
    public void onSuccess(String response) {
        System.out.println("request = "+ response);
    }
}); 
```

这个url获取不到请求结果，请求结果为："request = null"。它适用于其他网址，例如[http://www.google.com](http://www.google.com)。异常出现在这里：

```
com.temobi.mdm.net.loopjasync.AsyncHttpResponseHandler.java 
```

但是当我用这个url使用org.apache.http.client.HttpClient时，请求可以正常返回。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T09:34:14.460

代替

```
String url = http://te.3g2win.com/wordpress/?callback=?&zywxapp/content/post/82; 
```

和

```
String url = "http://te.3g2win.com/wordpress/?callback=?&zywxapp/content/post/82"; 
```

# windows - 适用于 Windows 的 Crontab 日程可视化工具

> ID：14354535
> 
> 赞同：3
> 
> 时间：2013-01-16T09:00:44.600
> 
> 标签：windows, visualization, scheduling, crontab

我们的 Unix 服务器上运行着一个 crontab 调度程序。目前，当有人将作业添加到 crontab 时，他必须手动将作业添加到 Outlook 日历。

但是，此 Outlook 日历已失去其功能，部分原因是未删除旧工作，部分原因是工作数量，部分原因是缺少可视化选项。

我发现这个问题[is-there-a-tool-that-allows-visualization-of-crontab-entries](https://stackoverflow.com/questions/9183796/is-there-a-tool-that-allows-visualization-of-crontab-entries) 但我正在寻找一个允许我加载 crontab 计划文件并将其可视化为 Windows 环境的工具。

有没有人有一个很好的工具或替代解决方案？

# java - JNLP 文件未更新

> ID：14354548
> 
> 赞同：1
> 
> 时间：2013-01-16T09:01:51.753
> 
> 标签：java, jnlp, java-web-start

我们正在使用 Java Webstart 分发我们的客户端。

我们的 JNLP 文件：

```
<jnlp spec="6.0+" codebase="http://{host}/jws/cashdesk/" href="cashdesk.jnlp"
version="3.4.2">
<information>
    <title>Kasse {appserver}</title>
    <description>Kasse</description>
    <icon href="cashdesk{rem}.png" />
    <shortcut online="true">
        <desktop />
    </shortcut>
</information>
<update check="always" policy="always" />
<security>
    <all-permissions />
</security>
<resources>
    <j2se version="1.6+" java-vm-args="-Xmx512M" />
    <property name="APPSERVER" value="{appserver}:1099" />
    <jar href="cashdesk.jar" main="true" />
</resources>
<application-desc main-class="com.prodega.proshop.cashdesk.CashdeskApp" />
</jnlp> 
```

我们遇到的问题是，当我们更改 JNLP 文件中的某些内容时，Java Webstart 会忽略它。

为什么 Java Webstart 不更新 JNLP 文件？

谢谢你的帮助。

西蒙

# python - 如何用多个分隔符分割python字符串？

> ID：14354555
> 
> 赞同：1
> 
> 时间：2013-01-16T09:02:24.750
> 
> 标签：python, string, split, separator

我的字符串包含一些不相关的字符，例如：

`"t1, t2, t3"`

如果我按`split(",")`方法拆分它，我会得到一个列表，其中第二项和第三项还包括空格。

如何使用乘法分隔符拆分所需的字符串？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T09:04:09.243

将它们分开`", "`（注意空格）或`strip`之后的单词：

```
[e.strip() for e in "t1, t2, t3,t4".split(",")]
>>> ['t1', 't2', 't3', 't4'] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-16T09:54:03.387

如果您不需要空格，您可以使用：

```
"t1, t2, t3,t4".replace(" ", "").split(",") 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T09:03:51.393

如果逗号后有任意空格，只需使用列表推导去除空格：

```
[t.strip() for t in inputstring.split(',')] 
```

或使用正则表达式拆分（在这种情况下有点矫枉过正）：

```
import re

re.split(r',\s*', inputstring) 
```

示范：

```
>>> inputstring = 't1, t2, t3,t4,   t5'
>>> [t.strip() for t in inputstring.split(',')]
['t1', 't2', 't3', 't4', 't5']
>>> import re
>>> re.split(r',\s*', inputstring)
['t1', 't2', 't3', 't4', 't5'] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T09:04:27.563

您是否尝试过明显的：

```
>>> "t1, t2, t3".split(', ')
['t1', 't2', 't3'] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T09:05:39.580

使用条带（）。

```
s = "t1, t2, t3"
s = [x.strip() for x in s.split(",")]
print s 
```

# php - 正则表达式：打破大写字母

> ID：14354557
> 
> 赞同：-1
> 
> 时间：2013-01-16T09:02:30.727
> 
> 标签：php

你好，在正则表达式中需要帮助我用它来分割带有大写字母的字符串，比如 OldMcDonald `preg_split('/(?=[A-Z])/', $data, -1, PREG_SPLIT_NO_EMPTY);`

```
output 
[0] => Old 
[1] => Mc 
[2] => Donald 
```

现在我需要拆分像MWTTH这样的字符串我需要告诉正则表达式带有字母H的T是一个单词我如何在我的正则表达式中应用？

```
need the output: 
[0] => M 
[1] => w 
[2] => T 
[3] => TH 
```

当我尝试

`$array = preg_split('/(?=[A-Z][TH])/', $data, -1, PREG_SPLIT_NO_EMPTY);`

输出是

```
Array
(
    [0] => MTW
    [1] => F
    [2] => TH
) 
```

`MTH`不会分裂，现在没有时间学习正则表达式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T10:42:36.997

我应该进一步研究一下，我可以得到它，反正我已经发现我用过：

```
$data = 'MTWFTH';
$array = preg_split('/(?=TH|M|T|W|F|S)/', $data, -1, PREG_SPLIT_NO_EMPTY); 
```

**输出**

```
array (size=5)
  0 => string 'M' (length=1)
  1 => string 'T' (length=1)
  2 => string 'W' (length=1)
  3 => string 'F' (length=1)
  4 => string 'TH' (length=2) 
```

虽然这仅适用于像我这样的预定义数据。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-16T09:15:22.500

没时间学习正则表达式...所以，您基本上是在要求我们为您找出问题所在。

大概花了 5 秒才弄明白，30 秒写下来，再 5 秒复制粘贴：

```
$string = 'OldMcMWTTHDonald';
preg_match_all('/(?:TH|[A-Z][a-z]*)/', $string, $matches);
var_dump($matches); 
```

你只是浪费了我生命中的 40 秒。

# c# - 如何使 WPF 中的 DispatcherTimer 事件更流畅？

> ID：14354561
> 
> 赞同：11
> 
> 时间：2013-01-16T09:02:45.407
> 
> 标签：c#, wpf, timer, smooth, dispatchertimer

在我的 WPF 应用程序中，用户按下按钮启动 3D 模型平滑旋转，然后松开按钮停止旋转。

为此，我创建了一个 DispatcherTimer：

```
DispatcherTimer timer = new DispatcherTimer();
timer.Tick += new EventHandler( timer_Tick );
timer.Interval = new TimeSpan( 0, 0, 0, 0, 30 ); 
```

当按钮被按下时，我打电话`timer.Start()`，当按钮被松开时，我打电话`timer.Stop()`。

该`timer_Tick`函数改变模型的旋转：

```
 void timer_Tick( object sender, EventArgs e )
    {
        spin = ( spin + 2 ) % 360;
        AxisAngleRotation3D rotation = new AxisAngleRotation3D( new Vector3D( 0, 1, 0 ), spin );
        Transform3D rotate = new RotateTransform3D( rotation );
        model2.Transform = rotate;
    } 
```

我注意到模型在大部分情况下都能平稳旋转，但经常会冻结和卡顿，暂停不同的持续时间，有时长达 1/4 秒。

有没有办法让这更顺畅？我知道通过使用 DispatcherTimer（而不是 System.Timers.Timer），回调发生在 UI 线程上。但我必须处于 UI 威胁中才能运行该线路

```
 model2.Transform = rotate; 
```

我已经阅读了有关在其他线程上获取计时器回调的各种方法。但似乎最终我必须与 UI 线程同步才能调用该行。如果我使用 Invoke() 将 System.Timers.Timer 回调线程编组到 UI 线程，这会带来整体更流畅的动画吗？似乎不应该，因为它必须与 UI 线程同步，就像 DispatcherTimer 可能所做的那样。*就此而言，对于 UI 线程而言，任何*`model2.Transform`定期设置的方案似乎都在同一条船上，不是吗？

（作为一个可能是次要的问题，我首先试图了解导致暂停的原因。据我所知，UI线程正在做的其他事情没有什么重要的。所以我不明白在这些过程中发生了什么暂停。垃圾收集？看起来应该没有太多垃圾要收集，而且暂停似乎不会那么极端。）

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-16T09:37:51.100

设置[优先级](http://msdn.microsoft.com/en-us/library/ms615008.aspx)。默认值为`Background`，这可能解释了您看到的口吃。我认为`Render`是你想要的水平，但做实验。

```
DispatcherTimer timer = new DispatcherTimer(DispatcherPriority.Render); 
```

如果这不够流畅，您可以尝试将其设置为动画。

# web-services - .htaccess 文件如何重写/覆盖？

> ID：14354563
> 
> 赞同：0
> 
> 时间：2013-01-16T09:02:59.730
> 
> 标签：web-services, .htaccess, joomla

文件如何`.htaccess`重写？我的网站昨天运行良好，但今天无法正常运行。我没有改变任何东西。.htaccess 中有一些拒绝访问代码。我的网站被黑了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T13:21:36.130

有时 .htaccess 文件可能成为攻击的目标。要查看您的 .htaccess 文件是否已更改，请将其与 Joomla 安装包中的原始 htaccess.txt 进行比较。如果是这样，您可以简单地恢复原来的那个来代替被黑的那个。

# php - 基于 PHP 的源代码控制 (webSVN)

> ID：14354566
> 
> 赞同：0
> 
> 时间：2013-01-16T09:03:10.343
> 
> 标签：php, version-control, open-source

我有一个支持 php 的共享 linux 托管服务器，所以我正在寻找一个用 PHP 编写的基于 Web 的源代码控制。

我尝试了 webSVN 的 php 版本，但在复制`distconfig.php`到后出现以下错误`config.php`（我理解我之前提到的警告。）：

```
Error running this command: svn  --config-dir /tmp --version

sh: svn: command not found 
```

我认为是我的共享托管服务器上的权限问题。可能我的托管服务器不允许运行 linux 命令。但是，一定有解决办法吧？

如果 webSVN 不能在共享服务器上运行，我可以使用任何替代方案吗？我已经尝试过 ASVCS，它运行良好，但提供的功能很少。我们需要单独使用 ftp 管理器来对任何文件进行任何更改。它甚至没有提供上传或下载功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:06:44.073

“无法修改标头”警告是因为您在尝试设置标头信息之前已经将数据发送到响应。根本原因是“找不到命令”。我怀疑您有路径问题或未安装 svn。

SVN 必须安装在系统路径上。您应该致电您的托管服务提供商的技术支持，他们可能需要为您进行安装，或者在该主机上可能无法安装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:08:25.203

该命令中的错误运行命令包括打印到您的屏幕。因此发出警告，标头已发送..

您可能错误地安装了应用程序。

该错误`svn: command not found`表明您尚未在服务器上安装 SVN。

# java - 如何在 Java 代码中测试 Class.forName 调用？

> ID：14354567
> 
> 赞同：13
> 
> 时间：2013-01-16T09:03:14.323
> 
> 标签：java, unit-testing, classloader

`Class.forName(String name)`我最近一直在搞乱 java 中的ClassLoaders ，试图测试使用动态加载类的代码（使用`ClassLoader`.

我有自己的自定义`ClassLoader`设置，应该可以配置为`ClassNotFoundException`在尝试加载给定类时抛出 a 。

```
public class CustomTestClassLoader extends ClassLoader {
    private static String[] notAllowed = new String[]{};
    public static void setNotAllowed(String... nonAllowedClassNames) {
        notAllowed = nonAllowedClassNames;
    }
    public static String[] getNotAllowed() {
        return notAllowed;
    }
    public CustomTestClassLoader(ClassLoader parent){super(parent);}
    @Override
    protected Class<?> loadClass(String name, boolean resolve) throws ClassNotFoundException {
        for (String s : notAllowed) {
            if (name.equals(s)) {
                throw new ClassNotFoundException("Loading this class is not allowed for testing purposes.");
            }
        }

        if(name.startsWith("java") || name.startsWith("sun") || getClass().getName().equals(name)) {
            return getParent().loadClass(name);
        }

        Class<?> gotOne = super.findLoadedClass(name);
        if (gotOne != null) {
            return gotOne;
        }

        Class<?> c;
        InputStream in = getParent().getResourceAsStream(name.replace('.', '/')+".class");
        if (in == null) {
            throw new ClassNotFoundException("Couldn't locate the classfile: "+name);
        }
        try {
            byte[] classData = readBytes(in);
            c = defineClass(name, classData, 0, classData.length);
        } catch(IOException e) {
            throw new ClassNotFoundException("Couldn't read the class data.", e);
        } finally {
            try {
                in.close();
            } catch (IOException e) {/* not much we can do at this point */}
        }

        if (resolve) {
            resolveClass(c);
        }
        return c;
    }

    private byte[] readBytes(InputStream in) throws IOException {
        ByteArrayOutputStream out = new ByteArrayOutputStream();
        byte[] buffer = new byte[4194304];
        int read = in.read(buffer);
        while (read != -1) {
            out.write(buffer, 0, read);
            read = in.read(buffer);
        }
        out.close();
        return out.toByteArray();
    }
} 
```

我`-Djava.system.class.loader=com.classloadertest.test.CustomTestClassLoader`用来将其设置`classloader`为默认值`ClassLoader`。我希望能够`ClassNotFoundException`通过禁止使用某些类名来强制使用`CustomTestClassLoader.setNotAllowed(String...)`. 但是，它仅适用于`ClassLoader.loadClass`，不适用于`Class.forName`：

```
public void test() {
    ClassLoader loader = this.getClass().getClassLoader();
    CustomTestClassLoader custom = (CustomTestClassLoader)loader; 
    CustomTestClassLoader.setNotAllowed(NAME);
    for (String s : custom.getNotAllowed())
        System.out.println("notAllowed: "+s);
    try {
        System.out.println(Class.forName(NAME));
    } catch (ClassNotFoundException e) {
        System.out.println("forName(String) failed");
    }
    try {
        System.out.println(Class.forName(NAME,false,custom));
    } catch (ClassNotFoundException e) {
        System.out.println("forName(String,boolean,ClassLoader) failed");
    }
    try {
        System.out.println(custom.loadClass(NAME));
    } catch (ClassNotFoundException e) {
        System.out.println("ClassLoader.loadClass failed");
    }
} 
```

现在我预计所有三个尝试块都会失败，因为文档`Class.forName`说它使用`ClassLoader`调用者的（在这个测试中应该是自定义/加载器）。但是，只有最后一个 try 块失败。这是我得到的输出：

```
notAllowed: com.classloadertest.test.Test
class com.classloadertest.test.Test
class com.classloadertest.test.Test
ClassLoader.loadClass failed 
```

`Class.forName`真的用吗`classloader`？如果是这样，哪些方法？它似乎正在使用本机调用，所以我不知道它在幕后做了什么。

当然，如果有人知道测试`Class.forName()`呼叫的任何替代方法，也将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:00:18.637

`Class.forName()`使用从中调用它的类的类加载器（例如，在您的情况下是包含该`test()`方法的类）。因此，如果您在不同的环境中运行它，这将导致问题。

**更新**ClassLoader 将用于`Class.forName()`加载你的`Test`类。这可能是解决方案：它可能是一个 Eclipse 定义的类加载器，它可以访问你的类，所以它会加载它。尽管它的父（或根）类加载器有明确的规则来禁止加载该类。

我仍然建议为这个实例创建一个包装类。你应该用你的加载那个类`CustomTestClassLoader`，然后你可以`Class.forName()`在那个类中使用。

# erlang - 在erlang中将数据从excel传输到mnesia

> ID：14354572
> 
> 赞同：2
> 
> 时间：2013-01-16T09:03:35.570
> 
> 标签：erlang

我有存储在 Excel 文件中的数据

此文件包含两列：姓名和姓氏

并包含几行

我的目标是在我的数据库 mnesia 中注册这些数据（在包含两个属性的 person 表中：Name 和 Surname）

是否可以将数据从excel文件保存到mnesia数据库

如果无法将数据从 excel 文件导入 mnesia，我们可以将源文件（excel 文件）转换为 .sql 或 .txt，然后将此文件导入 mnesia

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T11:16:54.683

我认为最简单的方法是将excel数据导出/保存到csv文件，然后使用这样的代码从erlang解析它。

```
{ok, Data} = file:read_file("test.csv"),
ParsedData = lists:map(
    fun(Str) -> string:tokens(Str, ",") end,
    string:tokens(binary_to_list(Data), "\n")
),
lists:foreach(fun([K,V]) -> mnesia:write(K, V) end, ParsedData). 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T07:36:01.610

您需要将 Excel 文件转换为`.csv`文件。然后您可以使用`CSV Parser`此处提供的 i：[https](https://stackoverflow.com/a/10810660/431620) ://stackoverflow.com/a/10810660/431620 。从 Excel 导入数据非常简单直接。 **编辑**[](https://stackoverflow.com/a/10810660/431620)

* * *

**而且我忘记了一些事情，我上面提供的 CSV 解析器确保可以将任何文件大小解析为您想要的任何 erlang 应用程序。这是通过扫描文件来完成的，而不是一次将其全部读入内存。谨防编写试图立即读取文件的代码，大文件会使 vm 崩溃。我们已经使用该程序将大型 csv 转储文件从 SQL Server 和 Oracle 等其他数据库导入到 Mnesia。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T11:40:38.663

我创建了这个文件**csv.erl**：

```
%%% --- csv parser in Erlang. ------
%%% To help process large csv files without loading them into
%%% memory. Similar to the xml parsing technique of SAX

-module(csv).
-compile(export_all).

parse(FilePath,ForEachLine,Opaque)->
    case file:open(FilePath,[read]) of
        {_,S} ->
            start_parsing(S,ForEachLine,Opaque);
        Error -> Error
    end.

start_parsing(S,ForEachLine,Opaque)->
    Line = io:get_line(S,''),
    case Line of
        eof -> {ok,Opaque};
        "\n" -> start_parsing(S,ForEachLine,Opaque);
        "\r\n" -> start_parsing(S,ForEachLine,Opaque);
        _ -> 
            NewOpaque = ForEachLine(scanner(clean(clean(Line,10),13)),Opaque),
            start_parsing(S,ForEachLine,NewOpaque)
    end.

scan(InitString,Char,[Head|Buffer]) when Head == Char -> 
    {lists:reverse(InitString),Buffer};
scan(InitString,Char,[Head|Buffer]) when Head =/= Char ->
    scan([Head|InitString],Char,Buffer);
scan(X,_,Buffer) when Buffer == [] -> {done,lists:reverse(X)}.
scanner(Text)-> lists:reverse(traverse_text(Text,[])).

traverse_text(Text,Buff)->
    case scan("",$,,Text) of
        {done,SomeText}-> [SomeText|Buff];
        {Value,Rem}-> traverse_text(Rem,[Value|Buff])
    end.

clean(Text,Char)-> 
    string:strip(string:strip(Text,right,Char),left,Char). 
```

我创建了一个函数以从 csv 文件中提取数据：

```
test()->

    ForEachLine = fun(Line,Buffer)-> io:format("Line: ~p~n",[Line]),Buffer end,

 InitialBuffer = [],

 csv:parse("/home/include/person.csv",ForEachLine,InitialBuffer). 
```

并在 erlang 的控制台中显示正确的结果：

```
1> operation:test(). 
Line: ["50;97919861;5ab190537df;9898abb6e;efb65a0ad1;1",
       "35427;1",
       "3542;30-11-2012;testU2;testU6;undefined;m.;enabled;jjj;A999997;97979797;CIN;testU@gmail.com;b1088b51297846e;0;user;0;{{2012",
       "11","30}","{1","59",
       "26}};gggg;kkkk;ssss;standard;{2012","11",
       "30};hhhh;mmm;undefined;18;yyyy;nnnn;false;{{2012",
       "11","30}","{1","59","26}};1989;1;1"]
ok 
```

现在我的目标是在 mnesia 数据库中注册这些数据（在表 person 中）

餐桌人有49个属性

所以注册这一行

```
 Line: ["50;97919861;5ab190537df;9898abb6e;efb65a0ad1;1",
           "35427;1",
           "3542;30-11-2012;testU2;testU6;undefined;m.;enabled;jjj;A999997;97979797;CIN;testU@gmail.com;b1088b51297846e;0;user;0;{{2012",
           "11","30}","{1","59",
           "26}};gggg;kkkk;ssss;standard;{2012","11",
           "30};hhhh;mmm;undefined;18;yyyy;nnnn;false;{{2012",
           "11","30}","{1","59","26}};1989;1;1"] 
```

在具有这种结构的表人中：

```
-record(person, {id, token, password, pin, key, salt, pin_salt, subscription_date, first_name, last_name, alias, gender, status,
                 taxid, formid, idcard, id_type, email, activation_code, email_confirmation, role,
                 trying, last_access, last_activity, last_activity_ip, last_activity_op_code, group, last_mod, last_login,
                 agent_code, agency_code, parent_id,pass_changes, pin_changes, is_merchant, created_at, birth_year, birth_month, birth_date}). 
```**

# c# - 使用图形相交的图像裁剪

> ID：14354574
> 
> 赞同：1
> 
> 时间：2013-01-16T09:03:44.560
> 
> 标签：c#, winforms, image

我有一个高度和宽度分别为 230 和 200 的图像。我需要绘制由我拥有的图形路径剪切的图像。即，图像应该以ABC等的形状绘制，我尝试了这个[链接](http://msdn.microsoft.com/en-us/library/system.drawing.texturebrush.aspx)，但它对我不起作用。

我怎样才能做到这一点。？

是否有类似图形路径相交属性的东西？

我有像这样的图像和像这样的![这个](../Images/114d169df886587394f6768287a55b90.png)图形路径![这个](../Images/eca770a726a9190a10afbc2f9642aff0.png)。我需要实现填充图像的“s”形状。

```
Brush texture = new TextureBrush(img);
if (pathtocropimage != null)
    PageGraphics.FillPath(texture, pathtocropimage); 
```

这里，img 是暗图像路径tocropimage 是绘制“s”的 grpahics 路径，如上所示。

# android - 无法在 Ubuntu 中执行 Android 模拟器

> ID：14354576
> 
> 赞同：0
> 
> 时间：2013-01-16T09:03:55.817
> 
> 标签：android, eclipse, ubuntu, android-emulator

我在 Android Virtual Devices Manager 中制作了一个 Android 模拟器，但是当我尝试打开它时，我收到以下消息：

```
Starting emulator for AVD 'Android40'
Could not launch '/home/andy/android-sdk-linux//tools/emulator-arm': Permission denied". 
```

我该如何解决？我的操作系统是 Ubuntu。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-23T01:01:00.277

尝试运行

```
~/adt-bundle-linux-x86_64-20130917/sdk/tools/emulator64-x86 
```

You will have to choose the 32/64 bit version appropriately

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:11:24.523

尝试重新安装jdk。以下链接可能有用： [http ://antonis.se/?p=40](http://antonis.se/?p=40)

# xml - 为一个简单的 SOAP 文件编写 Xml Scheme 定义

> ID：14354577
> 
> 赞同：0
> 
> 时间：2013-01-16T09:03:56.453
> 
> 标签：xml, soap, xsd

我尝试将**.XSD**文件写入下面显示的包含 2 个命名空间的 xml 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<ns1:Envelope 
  xmlns:ns1="http://www.webserviceX.NET/ConversionRate/Input" >
  <ns1:Body>
    <ns2:ConversionRate 
      xmlns:ns2="http://www.webserviceX.NET">
     <ns2:FromCurrency>USD</ns2:FromCurrency>
     <ns2:ToCurrency>USD</ns2:ToCurrency>
    </ns2:ConversionRate>
  </ns1:Body>
</ns1:Envelope> 
```

我写了两个xml方案来定义这个xml文件

第一个（**信封.xsd**）

```
<?xml version="1.0"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
  xmlns:ns1="http://www.webserviceX.NET/ConversionRate/Input"
  xmlns:ns2="http://www.webserviceX.NET/"
  targetNamespace="http://www.webserviceX.NET/ConversionRate/Input">
  <xs:import namespace="http://www.webserviceX.NET/" 
    schemaLocation="C:\Documents and Settings\RoGulk\Desktop\SPM\ConversionRate.xsd"/>
  <xs:element name="Body">
    <xs:complexType>
      <xs:sequence>
        <xs:element ref="ns2:ConversionRate"/>  
      </xs:sequence>
    </xs:complexType> 
  </xs:element>
  <xs:element name="Envelope">
    <xs:complexType>
      <xs:sequence>
        <xs:element ref="ns1:Body"></xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

**ConversionRate.xsd（内部 XSD）**看起来像这样

```
<?xml version="1.0"?>
<xs:schema targetNamespace="http://www.webserviceX.NET/" 
  xmlns:xs="http://www.w3.org/2001/XMLSchema" >
  <xs:element name="ConversionRate">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="FromCurrency" type="xs:string"/>
        <xs:element name="ToCurrency" type="xs:string"/>  
      </xs:sequence>
    </xs:complexType>  
  </xs:element>
</xs:schema> 
```

但问题是我无法针对这些方案定义验证上面的 xml。

有没有人知道问题是什么？谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T16:33:58.207

您需要指定在架构文档 ConversionRate.xsd 中声明的本地元素位于 ns2 命名空间中。`elementFormDefault="qualified"`最简单的方法是添加`xs:schema`元素；另一种方法是`form="qualified"`在元素声明中指定`FromCurrency`和`ToCurrency`。

为什么？

一些模式作者强烈认为本地元素应该表现得像本地属性，并且具有非限定名称；其他人同样强烈地认为，在特定命名空间的模式文档中声明的所有元素都应该在该命名空间中。开发 XSD 1.0 的工作组为此苦苦挣扎了几个月（您仍然可以通过对他们耳语“问题 208！”来让老 XSD WG 成员脸色苍白），然后通过将决定交给架构作者而妥协。不合格的一方赢得了抛硬币，并且`elementFormDefault`属性的默认值被设置为`unqualified`。这为希望本地元素不合格的人省去了麻烦，这意味着像您这样希望他们合格的人需要制作`elementFormDefault="qualified"`标准模式文档模板的一部分。

# php - Cakephp 2.0 在插件中使用 xml

> ID：14354588
> 
> 赞同：1
> 
> 时间：2013-01-16T09:04:34.050
> 
> 标签：php, xml, cakephp, cakephp-2.0

我正在尝试将插件从 cakephp 1.3 迁移到 2.x。

**原始代码**

```
 App::import('Core', 'Xml');
        $Xml = new Xml($response);
        $response = $Xml->toArray(false); // Send false to get separate elements
        $Xml->__destruct();
        $Xml = null; 
```

我认为在 cakephp 2.x **app::import('Core', 'Xml');** 世界成为**App::import('Utility', 'Xml');** 我应该使用**Xml::toArray(Xml::build($response));** . 然后我被卡住了。我很感激任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T09:19:52.317

不，它会变成

```
App::uses('Xml', 'Utility'); 
```

因为 App::import() 现在仅适用于非类文件和供应商文件。

然后你可以像这样使用它：

```
$xml = Xml::build($filenameOrXmlContent);
$array = Xml::toArray($xml); 
```

见[http://book.cakephp.org/2.0/en/core-utility-libraries/xml.html](http://book.cakephp.org/2.0/en/core-utility-libraries/xml.html)

# c++ - 服务器端从客户端接收数据失败

> ID：14354591
> 
> 赞同：0
> 
> 时间：2013-01-16T09:04:42.290
> 
> 标签：c++, protocol-buffers

我已经问了几个关于套接字传输的协议缓冲区的问题......再次，当我想在服务器端从客户端接收数据时遇到问题。

这是客户端代码：

```
int sendSystem(int sockfd, const void *buf, size_t nbytes, int flags) {
return ::send(sockfd, buf, nbytes, flags); 
```

}

就像客户端确实通过代表每个字节的整数发送数据一样。所以数据是以字节为单位传输的。

这是服务器端代码：

```
GameRequest gameRequest=GameRequest.parseFrom(CodedInputStream.newInstance(socket.getInputStream()));
GameRequest gameRequest=GameRequest.parseDelimitedFrom(socket.getInputStream());
GameRequest gameRequest=GameRequest.parseFrom(socket.getInputStream()); 
```

我已经尝试了上述每种方法来接收数据并对其进行解析......结果没有一个是好方法......大多数情况下我只是收到一条消息“消息具有无效标签”，或者如果我打开调试模式，它只是在上面的代码行待命，我无法进入下一步或进入调用方法，因为按钮跳过并进入已禁用...

# jquery - jQuery移动列表视图刷新图标

> ID：14354593
> 
> 赞同：2
> 
> 时间：2013-01-16T09:04:48.703
> 
> 标签：jquery, listview, jquery-mobile

我正在更改列表项 ( `'li'`) 上的图标并且列表未刷新。代码快照：

```
var listview = $('<ul data-role="listview" data-inset="true">');
...

var button = $('li#' + id, $.mobile.activePage);
button.attr('data-icon', 'check');

listview.listview('refresh'); 
```

但是列表显示旧图标。

请协助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T09:53:52.900

可以这样做：

```
$('#test-list li').buttonMarkup({ icon: "home" }); 
```

这是一个工作示例：http: [//jsfiddle.net/Gajotres/qgE6L/](http://jsfiddle.net/Gajotres/qgE6L/)

# php - 这个网址是什么意思以及它是如何工作的？

> ID：14354595
> 
> 赞同：0
> 
> 时间：2013-01-16T09:05:01.337
> 
> 标签：php, http, web

我看到了一些请求，例如

```
www.example.com/start.php?404;http://www.example.com:80 
```

但不幸的是无法理解它是否是有效的 url 或它将如何工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:09:16.883

我不认为它是一个有效的网址。它会将您重定向到 404 页面。[http://www.example.com:80](http://www.example.com:80)可能设置错误，因此它在已经存在的 url 的末尾输入了一个完整的 url。

也许我错了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:17:19.613

*`www.example.com/start.php?404`*

和

*`http://www.example.com:80`*

和

*`www.example.com/start.php?404;http://www.example.com:80`*

都是有效的 URL。但由于`;`不是 a `reserved symbol`，它需要进行 URL 编码。[有关URL](https://stackoverflow.com/questions/1856785/characters-allowed-in-a-url)中允许的字符列表，请参阅URL 中允许的字符。

# ios - 从数组的中心/中间开始枚举 NSArray 双向搜索

> ID：14354597
> 
> 赞同：0
> 
> 时间：2013-01-16T09:05:04.387
> 
> 标签：ios, objective-c, nsarray, enumeration

如何枚举从数组中心开始的数组？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-01-16T09:05:04.387

```
@implementation NSArray (Extensions)

- (void)enumerateFromCenterGoBothWaysUsingBlock:(void (^)(id obj, NSUInteger idx, BOOL *stop))block
{
    NSMutableArray *copy = [self mutableCopy];
    BOOL shouldStop = NO;
    while([copy count] > 0 && shouldStop == NO)
    {
        NSUInteger index = [copy count] / 2;
        id obj = copy[index];
        [copy removeObject:obj];

        block(obj, index, &shouldStop);
    }
}

@end 
```

# javascript - JavaScript myObject 有时未定义

> ID：14354605
> 
> 赞同：1
> 
> 时间：2013-01-16T09:05:28.457
> 
> 标签：javascript, object, undefined

嗨，我在 JavaScript 中遇到了一些麻烦。虽然我浏览了一些以前的帖子，但我还没有找到答案。

我正在开发一个 HTML5+Javascript 游戏，我有一个 Emotion-Object：emotionImg 是一个 Image()，类型是一个字符串。

```
function Emotion(emotionImg, type) {

this.emotionImg = emotionImg;
this.emotionImg.onload = function() {
    console.log("added emotion: "+type);
};
this.type = type;

// last emotion of a scene
this.isLast = false;

this.setLast = function() {
    this.isLast = true;
};

return this; 
```

}

这些情绪存储在一个数组（all_emotions）中。在我的游戏中，情绪是随机选择的——图像被绘制到我的画布上。emotype 是一个字符串。

```
currEmotion1 = randomEmotion(emotype);
// set image
emo1img = currEmotion1.emotionImg; 
```

我的随机函数：

```
function randomEmotion(type) {
if(type == "happy") {
    return all_emotions[0][Math.floor(Math.random()*all_emotions[0].length)];
}
else if(type == "sad") {
    return all_emotions[1][Math.floor(Math.random()*all_emotions[0].length)];
} 
```

有时，在调用我的随机函数时，我会收到错误消息：

TypeError: currEmotion1 未定义 [Bei diesem Fehler anhalten]

emo1img = currEmotion1.emotionImg;

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:19:28.603

在`randomEmotion`函数中，when `type`is `sad`，您正在生成一个基于`all_emotions[0]`但从 读取的随机索引`all_emotions[1]`，将其更改为下面的摘录，错误应该得到解决：

```
function randomEmotion(type) {
  if(type == "happy") {
    return all_emotions[0][Math.floor(Math.random()*all_emotions[0].length)];
  }
  else if(type == "sad") {
    return all_emotions[1][Math.floor(Math.random()*all_emotions[1].length)];
  }
} 
```

# jquery-ui - jquery-ui 下拉菜单样式

> ID：14354606
> 
> 赞同：5
> 
> 时间：2013-01-16T09:05:32.640
> 
> 标签：jquery-ui, jquery-ui-menu

我正在使用 jquery-ui 1.9.2 版本，其中有一个新的菜单选项。有什么方法可以将菜单样式更改为下拉菜单，就像 [http://onehackoranother.com/projects/jquery/droppy/#](http://onehackoranother.com/projects/jquery/droppy/#)

我提到了 [http://wiki.jqueryui.com/w/page/12137997/Menu](http://wiki.jqueryui.com/w/page/12137997/Menu)，但那些是插件。

我不想为此使用另一个插件，我想更改相同的 jquery-ui 本身，有什么办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-30T19:16:07.697

您可以使用该[`position`](http://api.jqueryui.com/menu/#option-position)选项来完成此操作。当我不那么忙的时候，我会整理并添加一些细节，但要点是：

```
$('#menu').menu({
    position: { my: 'left top', at: 'left bottom' }
}); 
```

本质上就是告诉 jQuery UI 将子菜单的左上角 ( `my: 'left top'`) 放在父元素 ( ) 的左下角`at: 'left bottom'`。

您可能需要摆弄`jquery.ui.menu.css`文件以使其完全正确。实际上，我大部分时间都完全忽略了那个 CSS。

# java - 从不同的项目中读取一个java文件

> ID：14354611
> 
> 赞同：-3
> 
> 时间：2013-01-16T09:05:41.867
> 
> 标签：java, file-io

我有两个不同的 java 项目，我试图在不同项目的另一个 java 文件中读取一个 java 文件。

例如：我有两个项目 project1 和 project 2。他们有相应的包名为 package1 和 package2。我正在尝试读取一个 java 文件，比如说 JavaFile2.java，它位于 JavaFile1.java 的包 2 中，而 JavaFile1.java 又位于 project1 的包 1 中。

我只知道我必须阅读 package2.JavaFile2 ，我该如何实现？

非常需要帮助:(

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:08:59.810

您将不得不使用相对于 project2 的文件路径，或者似乎更安全的选项，在打开文件时使用绝对文件路径。总体而言，在项目之间进行这种交叉引用并不是一个好主意，因为您将紧紧抓住两个项目的相对位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:18:19.740

那么您可以使用`getClass().getProtectionDomain().getCodeSource().getLocation().toExternalForm()`获取当前项目的位置并“导航”到另一个项目。

但就像之前说的......我不明白你为什么需要这样的交叉引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T09:09:28.140

我无法理解你为什么要这样做的原因。

但是，在运行时 project1 和 project2 将没有 JVM 中可用的 .java 文件

话虽如此，唯一的选择是将 /src 文件夹包含在您的项目存档（jar/war/ear）中，并编写一个从存档中提供资源的适配器似乎是可能的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T09:09:47.873

您必须向 project1 添加一个依赖项，该依赖项指定 project2 也在类路径中。由于您没有指定 IDE 或其他任何东西，所以我现在无能为力...

您可以尝试使用 Maven 进行依赖管理 [http://www.mkyong.com/tutorials/maven-tutorials/](http://www.mkyong.com/tutorials/maven-tutorials/)

# ajax - PrimeFaces 在 SocketTimeoutException 后冻结（以及如何解冻）？

> ID：14354614
> 
> 赞同：0
> 
> 时间：2013-01-16T09:05:53.060
> 
> 标签：ajax, primefaces, timeout

我已经成为了`SocketTimeoutException`，现在很难复制，但这不是最重要的。令我困扰的是**PrimeFaces** UI 对这种情况的反应。UI 被冻结，因此没有处理任何 AJAX 点击（可以点击任何想要的，但什么也没发生）。

我不太了解 PrimeFaces 内部结构，但根据我使用 AJAX 应用程序的经验，它可能发生在我们有 AJAX 队列并且在发生意外错误后作业未释放的情况下。是不是这里的情况？

以及如何防止这种行为？或者如果无法预防，是否可以在 Javascript 中“重启”PrimeFaces 的 AJAX 引擎？作为最后的手段，我可​​以提供特殊按钮来“重置”AJAX 状态而不“刷新”（应该称为销毁所有我的更改）站点？

# java - 从内部类线程访问外部字段（非最终）是否是线程安全的？

> ID：14354620
> 
> 赞同：3
> 
> 时间：2013-01-16T09:06:20.377
> 
> 标签：java, multithreading, thread-safety

基本上以下工作，但由于我读到了 final 关键字，我不确定如果不同的线程访问它，我是否必须声明 name final？

提前致谢。

```
public class Test4 {

    // to ensure thread-safety do we have to declare the variable name final ?
    private String name;

    public Test4 (String name) {
        this.name = name;
    }

    public void start() {
        new MyThread().start();
    }

    private class MyThread extends Thread {

        public void run() {
            System.out.println(name);
        }
    }

    public static void main(String[] args) {
        Test4 t = new Test4("Don't know if I am threadsafe");
        t.start();
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T09:37:58.247

`final`修饰符 - 同时防止成员被重新分配 -*不*影响*给定*代码¹的正确性

从Java 5 语言规范的[17.4.4 同步顺序部分：](http://docs.oracle.com/javase/specs/jls/se5.0/html/memory.html#17.4.4)

> 同步顺序是执行*的所有同步操作的总顺序*。同步操作会导致操作上的同步关系，定义如下：
> 
> *   ..
> *   **启动线程的动作与它*启动*的线程*中的第一个动作同步*。**
> *   ..

然后，由于*设置*`name`成员的线程是启动*线程*的线程，所以同步顺序是有保证的。（Synchronizes-with 意味着[Happens-before ordering](http://docs.oracle.com/javase/specs/jls/se5.0/html/memory.html#17.4.5)。）

注意：

*   成员`name`只需要在启动线程*之前*设置：也就是说，不需要在构造函数中设置它来保证同步。
*   这*不能*保证同步顺序 - 因此它*不能*保证已经运行的线程或在其他地方创建的线程之间的发生之前或值可见性！

然而，`final`字段确实给人更舒服的感觉（参考[17.5 Final Field Semantics](http://docs.oracle.com/javase/specs/jls/se5.0/html/memory.html#66562)）：

> 当一个对象的构造函数完成时，它被认为是完全初始化的。只能在对象完全初始化后才能看到对该对象的引用的线程可以*保证看到该对象的最终字段的正确初始化值*。

在这种情况下，使用 final 字段，可以保证在构造函数完成后，该值在*每个线程上都是可见的。*（[“构造函数泄漏”](https://stackoverflow.com/questions/8445966/this-reference-escaping-during-construction)可能会违反此保证。）

* * *

¹在提供的代码中，“非最终”`name`成员仅在线程启动*之前分配一次。*

在*不同*的、不那么琐碎的程序中，可能会暴露出其他同步问题。此答案检查删除是否`final`会改变所提供代码的正确性。

话虽如此，我认为同时使用不可变变量（`final`）和不可变对象是“好习惯”——尤其是在处理线程时。无需了解 JVM 的小奥秘细节，而是做安全的、经过验证的事情，并*争取明显的正确性*，而不是聪明或“性能”。

也可以看看：

*   [同步跨线程共享但不并发访问的对象](https://stackoverflow.com/questions/12838776/shared-object-with-no-concurrent-access-do-i-need-volatile/12838976#12838976)
*   [java线程缓存刷新什么时候发生？](https://stackoverflow.com/questions/5022100/when-does-java-thread-cache-refresh-happens/5022188#5022188)
*   [Java 发生在线程启动之前](https://stackoverflow.com/questions/7651226/java-happend-before-thread-start/7651531#7651531)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T09:09:43.587

final 变量是`immutable`，一旦构造它就不能更改值，因此它不存在并发问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T09:11:06.170

如果没有 final，您将无法获得正确的字段值。

更改字段的值后，线程可能会获得旧值。

检查JMM的[可见性。](http://www.ibm.com/developerworks/library/j-jtp03304/)

[volatile 的另一个环节](http://jeremymanson.blogspot.com/2008/11/what-volatile-means-in-java.html)。

[发生在规则之前](http://en.wikipedia.org/wiki/Happened-before)。

[发生在 JMM 之前](http://docs.oracle.com/javase/specs/jls/se5.0/html/memory.html#17.4.5)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T09:23:17.760

你能找一个`AtomicReference`或也许`volatile`吗？这取决于您所说的*线程安全*是什么意思？

```
// Atomic to allow deeper control of updates.
private AtomicReference<String> name = new AtomicReference<String>();
// Volatile to ensure it is not cached.
private volatile String vName;

public Test(String name) {
  this.name.set(name);
  this.vName = name;
}

public void start() {
  new MyThread().start();
}

private class MyThread extends Thread {
  public void run() {
    System.out.println(name.get());
    System.out.println(vName);
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T09:11:16.820

`final`多线程没有什么，但`final`如果你的字段不应该改变并且在类的构造函数中初始化，你应该放。这意味着 fild 不能在后面更改。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-17T10:50:32.740

由于 String 是不可变的，并且您声明字段 final ，并且所有线程在字段分配后访问它，因此肯定不会有并发问题，因为该字段仅用于读取操作，与使用 StringBuilder 的情况相反。

# ios-simulator - 我如何测试 1000 个 iPad 的应用程序，因为我只有 1 个 ipad 并且我想执行负载测试。对于服务器端数据

> ID：14354621
> 
> 赞同：1
> 
> 时间：2013-01-16T09:06:22.753
> 
> 标签：ios-simulator, ipad-2, ipad

我如何测试 1000 个 iPad 的应用程序，因为我只有 1 个 ipad 并且我想执行负载测试。对于服务器端数据，并希望查看我从 UI（ipad）点击按钮时的响应时间。

# c - strtok 行为

> ID：14354622
> 
> 赞同：2
> 
> 时间：2013-01-16T09:06:24.010
> 
> 标签：c, strtok

```
 int main ()
 {

    char str[] ="kk,12,,23,4,,,3434,3,33,,,";
    char * valarr;
    int count=0;
    valarr = strtok(str,","); 
    while(valarr != '\0')
    {
               valarr = strtok(NULL,","); 
    count++;
    }
    printf("%d\n",count);
   return 0;
  } 
```

在上面的程序中，输出为 7。

似乎 strtok 正在一次标记连续的逗号。

我可以在中间引入一个空格，而不是连续的逗号，但是有没有办法克服这个问题，以便我在计数中也有空白？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T09:09:03.403

正确的。[该文档](http://linux.die.net/man/3/strtok)非常清楚地说明了这一点：

> 解析字符串中的两个或多个连续分隔符的序列被认为是单个分隔符。

这`strtok()`就是应该如何工作。你可能会更好地滚动你自己，这也将使你摆脱`strtok()`肮脏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T09:08:15.860

简短回答：NO 至少使用 strtok，[检查这个](http://www.cplusplus.com/faq/sequences/strings/split/)以了解什么对您的应用程序更好。

# php - 未找到包含的函数 - php

> ID：14354624
> 
> 赞同：0
> 
> 时间：2013-01-16T09:06:29.080
> 
> 标签：php, function, include

我已经搜索了一些答案，但找不到任何适用于我的问题的答案。

```
// we are in file: file.php
include('functions.php');

$i = 0;
if($i >= countServices()) break;
[...]

// we are in file: functions.php
[...]
function countServices(){
[...]
} 
```

我已经尝试将文件*functions.php*包含在绝对文件路径中，但这无论如何都不起作用。

浏览器告诉我：

```
"Fatal error: Call to undefined function countServices() in [...]" 
```

几天前它起作用了，现在......
你能帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T09:09:53.293

尝试`require('functions.php')`代替`include`语句。如果找不到文件（这是我怀疑在这里发生的情况），Require 会抛出异常，而不是像`include`这样的警告，如果您没有`error_reporting`设置报告警告，则很容易被吞下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:13:12.800

PHP 所在的当前工作目录可能不是您认为的那样。您可以使用[getcwd()](http://php.net/manual/en/function.getcwd.php)进行检查。要修复它，您可以使用：

在 5.3.0 中引入：

```
include __DIR__ . '/functions.php'; 
```

或者

```
include dirname(__FILE__) . '/functions.php'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T09:15:16.770

尝试在 file.php 的顶部执行此操作

`echo '<pre>';
print_r($_SERVER);
echo '</pre>';`

搜索 $_SERVER['REQUEST_URI'] 以查看它指向的位置。

然后尝试包含您的functions.php，例如

`include_once $_SERVER['REQUEST_URI'] . '/some-upper-folders/functions.php';`

# gdt - 如何在全局描述符表中创建两个单独的段

> ID：14354626
> 
> 赞同：0
> 
> 时间：2013-01-16T09:06:31.593
> 
> 标签：gdt

我已经了解了全局描述符表 (GDT) 的基础知识，并且我已经使用 asm 成功编写了一个“GDT.inc”，以便我们可以轻松地将它包含在我们的引导加载程序中。作为一个婴儿步骤，我已将代码描述符和数据描述符配置为从第一个字节读取和写入内存中的字节 0xFFFFFFFF（内存中的任何部分）

```
; null descriptor 
    dd 0                ; null descriptor--just fill 8 bytes with zero
    dd 0 

; code descriptor:          ; code descriptor. Right after null descriptor
    dw 0FFFFh           ; limit low
    dw 0                ; base low
    db 0                ; base middle
    db 10011010b            ; access
    db 11001111b            ; granularity
    db 0                ; base high

; data descriptor:          ; data descriptor
    dw 0FFFFh           ; limit low (Same as code)
    dw 0                ; base low
    db 0                ; base middle
    db 10010010b            ; access
    db 11001111b            ; granularity
    db 0                ; base high 
```

现在我的目的是使用 GDT 创建两个单独的区域。例如，第一个 512B 作为一个区域，下一个 512B 作为另一个区域，并留下未使用的空间。

我能做些什么呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T19:27:03.660

您可以更改基址和限制寄存器的位置。所以在你给出的例子中

对于代码描述符 .base = 0x0 .limit = 0x200 //512 字节

对于数据描述符 .base = 0x200 .limit = 0x200

那么在 1 KB 为空后，您将拥有剩余的内存

您可以查看“ [http://wiki.osdev.org/GDT_Tutorial](http://wiki.osdev.org/GDT_Tutorial) ”以获得更多解释

# java - Websphere 6.1 自动停止

> ID：14354627
> 
> 赞同：4
> 
> 时间：2013-01-16T09:06:36.303
> 
> 标签：java, windows, websphere, websphere-6.1

我们在 Windows 2003 环境中运行的 websphere 版本 6.1 中遇到错误。服务器突然停止，但没有人在服务器上发出停止。

这是服务器的日志

奇怪的是我们没有停止它只是突然停止。在此之后它不会启动

有人遇到这个错误吗？我需要看什么？

```
Tried to retrieve a localized string for a component that has not yet been added to the page. This can sometimes lead to an invalid or no localized resource returned. Make sure you are not calling Component#getString() inside your Component's constructor. Offending component: [MarkupContainer [Component id = content]]
[1/16/13 11:10:15:150 CST] 000008ec AdminHelper   A   ADMN1020I: An attempt is made to stop the server1 server. (User ID = defaultWIMFileBasedRealm/testadmin)
[1/16/13 11:10:15:259 CST] 00000010 TCPChannel    I   TCPC0002I: TCP Channel TCP_3 has stopped listening on host *  (IPv4) port 9043\. 
[1/16/13 11:10:15:259 CST] 00000010 TCPChannel    I   TCPC0002I: TCP Channel TCP_2 has stopped listening on host *  (IPv4) port 9080\. 
[1/16/13 11:10:15:275 CST] 00000010 TCPChannel    I   TCPC0002I: TCP Channel TCP_1 has stopped listening on host *  (IPv4) port 9060\. 
[1/16/13 11:10:20:275 CST] 00000010 ApplicationMg A   WSVR0217I: Stopping application: 10012012-TEST-66-V105-tester-ufm_war
[1/16/13 11:10:20:306 CST] 00000010 ServletWrappe I   SRVE0253I: [10012012-TEST-66-V105-tester-ufm_war] [/ufm] [com_ibm_ws_rrd_webservices_service_remote_RRDServiceSOAPBindingImplLTPA]: Destroy successful.
[1/16/13 11:10:20:322 CST] 00000010 ServletWrappe I   SRVE0253I: [10012012-TEST-66-V105-tester-ufm_war] [/ufm] [com_ibm_ws_rrd_webservices_service_remote_RRDServiceSOAPBindingImplCustom]: Destroy successful.
[1/16/13 11:10:20:322 CST] 00000010 ServletWrappe I   SRVE0253I: [10012012-TEST-66-V105-tester-ufm_war] [/ufm] [com_ibm_ws_rrd_webservices_service_remote_RRDServiceSOAPBindingImpl]: Destroy successful.
[1/16/13 11:10:20:322 CST] 00000010 WebApp        A   SRVE0180I: [10012012-TEST-66-V105-tester-ufm_war#10012012-TEST-66-V105-tester-ufm.war] [/ufm] [Servlet.LOG]: Closing Spring root WebApplicationContext
[1/16/13 11:10:20:603 CST] 00000010 XmlWebApplica I org.apache.commons.logging.impl.Jdk14Logger info Closing org.springframework.web.context.support.XmlWebApplicationContext@61c461c4: display name [Root WebApplicationContext]; startup date [Fri Jan 11 15:48:22 CST 2013]; root of context hierarchy
[1/16/13 11:10:21:228 CST] 00000010 LocalSessionF I org.apache.commons.logging.impl.Jdk14Logger info Closing Hibernate SessionFactory
[1/16/13 11:10:21:228 CST] 00000010 SystemOut     O INFO  - SessionFactoryImpl         - closing
INFO  - essionFactoryObjectFactory - Unbinding factory from JNDI name: sessionFactory
INFO  - NamingHelper               - JNDI InitialContext properties:{}
INFO  - essionFactoryObjectFactory - Unbound factory from JNDI name: sessionFactory

[1/16/13 11:10:21:260 CST] 00000010 ServletWrappe I   SRVE0253I: [10012012-TEST-66-V105-tester-ufm_war] [/ufm] [context]: Destroy successful.

[1/16/13 11:10:21:431 CST] 00000010 ApplicationMg A   WSVR0220I: Application stopped: 10012012-TEST-66-V105-tester-ufm_war

[1/16/13 11:10:21:447 CST] 00000010 ApplicationMg A   WSVR0217I: Stopping application: SchedulerCalendars

[1/16/13 11:10:21:463 CST] 00000010 EJBContainerI I   WSVR0041I: Stopping EJB jar: Calendars.jar

[1/16/13 11:10:21:463 CST] 00000010 EJBContainerI I   WSVR0059I: EJB jar stopped: Calendars.jar

[1/16/13 11:10:21:478 CST] 00000010 ApplicationMg A   WSVR0220I: Application stopped: SchedulerCalendars

[1/16/13 11:10:21:494 CST] 00000010 ApplicationMg A   WSVR0217I: Stopping application: filetransfer

[1/16/13 11:10:21:494 CST] 00000010 ServletWrappe I   SRVE0253I: [filetransfer] [/FileTransfer] [transfer]: Destroy successful.

[1/16/13 11:10:21:525 CST] 00000010 ApplicationMg A   WSVR0220I: Application stopped: filetransfer

[1/16/13 11:10:21:525 CST] 00000010 ApplicationMg A   WSVR0217I: Stopping application: ManagementEJB

[1/16/13 11:10:21:525 CST] 00000010 EJBContainerI I   WSVR0041I: Stopping EJB jar: mejb.jar

[1/16/13 11:10:21:525 CST] 00000010 EJBContainerI I   WSVR0059I: EJB jar stopped: mejb.jar

[1/16/13 11:10:21:556 CST] 00000010 ApplicationMg A   WSVR0220I: Application stopped: ManagementEJB

[1/16/13 11:10:21:556 CST] 00000010 ApplicationMg A   WSVR0217I: Stopping application: 10012012-TEST-66-V105-test-management_war

[1/16/13 11:10:21:556 CST] 00000010 ServletWrappe I   SRVE0253I: [10012012-TEST-66-V105-test-management_war] [/] [com_ibm_ws_rrd_webservices_service_remote_RRDServiceSOAPBindingImplLTPA]: Destroy successful.

[1/16/13 11:10:21:572 CST] 00000010 ServletWrappe I   SRVE0253I: [10012012-TEST-66-V105-test-management_war] [/] [com_ibm_ws_rrd_webservices_service_remote_RRDServiceSOAPBindingImplCustom]: Destroy successful.

[1/16/13 11:10:21:572 CST] 00000010 ServletWrappe I   SRVE0253I: [10012012-TEST-66-V105-test-management_war] [/] [com_ibm_ws_rrd_webservices_service_remote_RRDServiceSOAPBindingImpl]: Destroy successful.

[1/16/13 11:10:21:572 CST] 00000010 ServletWrappe I   SRVE0253I: [10012012-TEST-66-V105-test-management_war] [/] [JasperObject]: Destroy successful.

[1/16/13 11:10:22:119 CST] 00000010 ServletWrappe I   SRVE0253I: [10012012-TEST-66-V105-test-management_war] [/] [wicket.test-management]: Destroy successful.

[1/16/13 11:10:22:119 CST] 00000010 WebApp        A   SRVE0180I: [10012012-TEST-66-V105-test-management_war#10012012-TEST-66-V105-test-management.war] [/] [Servlet.LOG]: Closing Spring root WebApplicationContext

[1/16/13 11:10:22:416 CST] 00000010 XmlWebApplica I org.apache.commons.logging.impl.Jdk14Logger info Closing org.springframework.web.context.support.XmlWebApplicationContext@55a955a9: display name [Root WebApplicationContext]; startup date [Thu Jan 10 15:33:28 CST 2013]; root of context hierarchy

[1/16/13 11:10:22:760 CST] 00000794 WebContainer  E   Servlet.has.become.temporarily.unavailable.for.service

[1/16/13 11:10:27:057 CST] 00000010 LocalSessionF I org.apache.commons.logging.impl.Jdk14Logger info Closing Hibernate SessionFactory
closing
[1/16/13 11:10:27:072 CST] 00000010 SystemOut     O Unbinding factory from JNDI name: sessionFactory 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T01:36:55.430

testadmin is the user that has requested for the server shutdown.

Are there other credentials on this server?

Is this "testadmin" credentials stored in the config file (sas/soap client properties)?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T01:08:46.287

IBM 软件支持的票证将帮助您解决根本原因。此外，我将运行 mustgather 实用程序来查看可能涉及停止的所有日志。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T10:17:16.733

我们可以在日志上清楚地看到它。新的克隆服务器是导致从中克隆的服务器停止的服务器。stopserver 命令是在克隆服务器上发出的，它正在影响生产服务器。这是一个非常奇怪的行为......

有什么我应该看的吗？

谢谢

# c# - 从asp.net c#codebehind事件获取html DIV内容

> ID：14354628
> 
> 赞同：1
> 
> 时间：2013-01-16T09:06:37.287
> 
> 标签：c#, jquery, asp.net, html

我想通过事件背后的 asp.net C# 代码获取 HTML DIV 内容。

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Report.aspx.cs" Inherits="WebApplication1.Report.Report" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title> 
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js">
</script>
<script type="text/javascript">

    $(document).ready(function () {

        $('#_Hidden_CrystalReportContent').hide();
        $('#_Hidden_CrystalReportContent').html("<b>I want to get Current value. 1<sup>st</sup></b>");

    });        
</script>
</head>
<body>
<form id="form1" runat="server">
<div id="_Hidden_CrystalReportContent">I want to get Current value.</div>    
<asp:Button ID="Button1" runat="server" onclick="Button1_Click" Text="Button" />
</form>
</body>
</html> 
```

我的文件后面的代码如下。

```
public partial class Report : System.Web.UI.Page
{
protected void Page_Load(object sender, EventArgs e)
{}

protected void Button1_Click(object sender, EventArgs e)
{
    string s = Request["_Hidden_CrystalReportContent"].ToString();
}
} 
```

但我仍然无法获得 div 内容值。
请让我得到你的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T09:07:34.670

使 div runat="server" 在服务器上访问。

*html*

```
<div id="_Hidden_CrystalReportContent" runat="server"> 
```

*背后的代码*

```
string htmlOfDiv = _Hidden_CrystalReportContent.innerHTML; 
```

*Javascript*

```
$(document).ready(function () {

    $('#<% _Hidden_CrystalReportContent.ClientID %>').hide();
    $('#<%= _Hidden_CrystalReportContent.ClientID %>').html("<b>I want to get Current value. 1<sup>st</sup></b>");

}); 
```

如果 CLientIDMode 不是静态的，则通过 puttin runat="server" 属性使 div 服务器可访问会导致更改的客户端 ID。您将需要使用 ClientID 属性来获取 javascript 中 div 的客户端 ID。

**编辑：**基于评论。您正在尝试获取更新的 html，如果是这样，您将不会得到它，因为在回发时只发布了 html 表单元素。将更改放在某个隐藏字段中并在服务器上对其进行评估。

*在 html 中*

```
<input type="hidden"  id="hdnDivContents" runat="server"> 
```

*在 JavaScript 中*

```
$('#<% hdnDivContents.ClientID %>').val("<b>I want to get Current value. 1<sup>st</sup></b>"); 
```

*在后面的代码中*

```
 _Hidden_CrystalReportContent.innerHTML = hdnDivContents.Value; 
```

# python - 如何获取异常的实例类型？

> ID：14354634
> 
> 赞同：2
> 
> 时间：2013-01-16T09:06:51.927
> 
> 标签：python, exception

我有这个代码：

```
try:
    self.client.post(url, data, self.cookies, headers, auth, jsonrpc)
    self.status  = self.client.status
    self.mytime  = self.client.time
    self.text    = self.client.text
    self.length  = len(self.text)
except urllib2.URLError, error:
    print error
    self.exception = True
    self.urrlib2   = True
    if isinstance(error.reason, socket.timeout):
        self.timeout = True 
```

但有时我会打印出这样的异常：

```
URLError in POST > reason=The read operation timed out > <urlopen error The read operation timed out> 
```

这些由`except urllib2.URLError`. 他们应该通过`if isinstance(error.reason, socket.timeout)`测试，但他们没有。

所以我想知道`instance`这个异常是什么。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:17:48.260

该[`type()`函数](http://docs.python.org/2/library/functions.html#type)返回对象的类型。

在这种情况下，您可以使用`print type(error.reason)`来诊断对象的类型。`reason`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:45:35.687

用这个：

```
import sys

try:
    self.client.post(url, data, self.cookies, headers, auth, jsonrpc)
    self.status  = self.client.status
    self.mytime  = self.client.time
    self.text    = self.client.text
    self.length  = len(self.text)
except urllib2.URLError, error:
    print error
    self.exception = True
    self.urrlib2   = True

    errno, errstr = sys.exc_info()[:2]
    if errno == socket.timeout:
        print "There was a timeout"
        self.timeout = True 
```

# android - Android - 如何使用 TextWatcher 更新 ListView 组件标签？

> ID：14354635
> 
> 赞同：0
> 
> 时间：2013-01-16T09:06:54.007
> 
> 标签：android, view, android-edittext, textwatcher

我有一个`ListView`- `getListView()`of a `ListActivity`。`ListView`正确填充，这一切都很好。

单击任何`ListView`项​​目后，它会打开一个由 4 个标题 TextViews 和 4 个用户输入 Number EditTexts 组成的对话框。我想将一个 Tag 对象附加到其中的每一个`EditText`或`ListView`项目上，并尽可能跟踪对`EditText`使用`TextWatcher`.

即，`Textwatcher`如果对文本进行了任何更改，则会在相应的标签中进行更新。

这将允许我将`EditText`文本设置为已设置的任何预先存在的值。

问题是一旦对话框出现，我输入`EditText`值并按肯定按钮关闭。当我再次打开并检索标签以`EditText`在显示值之前设置值时，它们都是 0（除了位置 - 这是相当不重要的）

我的 onListItemClick 代码如下所示。

```
// On Routine Selected
@Override
protected void onListItemClick(ListView l, View view, int position, long id)
{       
    // Get the tag from 'v'
    if (view.getTag() == null)
    {           
        // Create a new Set object and set that as the tag
        Set newTag = new Set(position);         
        view.setTag(newTag);
    }

    // Getting the Set tag from the ListView item
    Set vTag = (Set) view.getTag();

    /* ** Now an AlertDialog is presented to the user with a custom inflated view including EditTexts ** */

    // Getting an inflater (getLayoutInflater()) also works
    LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    // Inflating the XML defined layout as a view
    final View setView = inflater.inflate(R.layout.set_dialog, null);

    // Get EditText XML references
    EditText etReps = (EditText) setView.findViewById (R.id.etReps);
    EditText etIntensity = (EditText) setView.findViewById (R.id.etIntensity);
    EditText etPosition = (EditText) setView.findViewById (R.id.etPosition);
    EditText etChange = (EditText) setView.findViewById (R.id.etChange);        

    Log.d(TAG, "vTag.getReps(): " + (vTag.getReps() + 1));

    try
    {
        // Set the EditText values to values from the Set Tag
        etReps.setText(String.valueOf(vTag.getReps()));
        etIntensity.setText(String.valueOf(vTag.getIntensity()));
        etPosition.setText(String.valueOf(vTag.getPositionInExercise()));
        etChange.setText(String.valueOf(vTag.getIntensityChange()));        

        // Add Custom TextWatcher listener to all EditTexts
        etReps.addTextChangedListener(new MyTextWatcher(setView));
        etIntensity.addTextChangedListener(new MyTextWatcher(setView));
        etPosition.addTextChangedListener(new MyTextWatcher(setView));
        etChange.addTextChangedListener(new MyTextWatcher(setView));
    }
    catch (Exception e)
    {
        Toast.makeText(this, e.toString(), Toast.LENGTH_SHORT).show();
    }

    // Create a new Builder to create the dialog
    AlertDialog.Builder builder = new AlertDialog.Builder(ExerciseList.this);   

    builder.setTitle(vTag.getName());
    builder.setView(setView);       

    builder.setPositiveButton("Save", new OnClickListener()
    {
        @Override
        public void onClick(DialogInterface dialog, int which)
        {
            if (which == dialog.BUTTON_POSITIVE)
            {
//              setView.setTag(tag);
                dialog.dismiss();
            }
        }           
    });

    builder.show();
} 
```

MyTextWatcher 代码..

```
//Custom Watcher
class MyTextWatcher implements TextWatcher
{
    View view;

    public MyTextWatcher(View setView)
    {
        view = setView;
    }

    @Override
    public void afterTextChanged(Editable editable)
    {
        String newText = editable.toString();
        Set tag = (Set) view.getTag();

        switch (view.getId())
        {
        case R.id.etReps:
            tag.setReps(Integer.parseInt(newText));
            break;

        case R.id.etIntensity:
            tag.setIntensity(Integer.parseInt(newText));
            break;

        case R.id.etPosition:
            tag.setPositionInExercise(Integer.parseInt(newText));
            break;

        case R.id.etChange:
            tag.setIntensityChange(Integer.parseInt(newText));
            break;
        }       
    }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count, int after){}

    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count){}       
} 
```

任何建议或指导方向都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:13:06.967

事实证明，对于这种情况， a`TextWatcher`根本不需要。主要问题与我的 vTag 对象的范围有关。

`TextWatcher`每个角色也会更新，这对我并没有真正的好处，只是不必要的计算。

声明我的`EditText`XML 引用`final`（我分配给每个 ListItem 视图的 Tag 对象的引用）意味着我可以更新正 Button 侦听器中的标记。

好处和学习成果：

*   仅在用户按下肯定按钮时对标签执行一次操作，而不是在`EditText`.
*   final 的使用几乎总是会提高速度，尽管通常会略微提高。
*   这种方式还允许用户使用否定按钮选择退出，在这种情况下不会发生标签更新。使用`TextWatcher`，用户只需按下 Cancel 并取消所有更新，就会发生各种更新。

`TextWatcher`绝对有一席之地，但这不是。

只是想我会贡献我的发现和推理！

干杯

# tomcat - 如何在tomcat应用程序上发布本地路径？

> ID：14354636
> 
> 赞同：2
> 
> 时间：2013-01-16T09:06:54.370
> 
> 标签：tomcat, tomcat6

我有一个本地文件夹，用于保存我的文件，例如：

C:\文件\img1.png

C:\文件\img2.png

C:\文件\video.avi

我想要做的是将这些文件发布到位于不同目录下的tomcat上。并从以下位置访问它们：

本地主机/文件/img1.png

本地主机/文件/img2.png

本地主机/文件/video.avi

由于我使用不同的应用程序创建这些文件，因此我不想复制 [pathToTomcat]/webapps/files 下的文件。

有没有一种简单的方法来配置 Tomcat 以在给定的 url 下的本地文件路径上发布文件。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T10:09:13.600

在标签`sever.xml`里面简单地放：`<Host>..</Host>`

```
<Context docBase="C:/files" path="/files" reloadable="true" /> 
```

# java - 使用作为整数值接收的 flexjson 反序列化枚举

> ID：14354638
> 
> 赞同：1
> 
> 时间：2013-01-16T09:06:58.127
> 
> 标签：java, serialization, enums, flexjson

我们正在创建一个 JSON REST 客户端应用程序，该应用程序必须与用 C# 编写的服务进行通信。FlexJson 库可以轻松解决大多数问题，例如日期差异等。

但有一件事没有：作为整数发送的枚举值，这是从服务接收的值，并且必须映射到它们的 Java Enum 值。

Java枚举是可以的，我们当然可以将整数转换为枚举，只要值存在。但是我们没有成功获取到 Flexjson 来转换值。

其中一个枚举称为**FormState**

我们编写了一个自定义的 Transformer，我们称之为**OurEnumTransformer**，它扩展了 AbstractTransformer 并实现了 ObjectFactory。在反序列化时，我们添加*.use(Enum.class, OurEnumTransformer)*，如果不这样做，我们会收到如下错误：

*不知道如何将 4 转换为 FormState 的枚举常量*

这是有道理的，因为它是一个整数而不是枚举值的名称

但是我们添加了*.use(...)*我们不断收到反序列化错误：

*FormState 缺少无参数构造函数。Flexjson 将实例化任何受保护的、私有的或公共的无参数构造函数。*

但它确实有一个私有的无参数构造函数。

另一件事是在 OurEnumTransformer 中设置的断点永远不会被命中。

那么谁能帮助我为什么*.use(Enum.class, OurEnumTransformer)*不适用于具有整数值的枚举？

下面的枚举和OurEnumTransformeris的代码

```
public enum FormState {

None(0),
EditMode(1),
SignedBySender(2),
AddedToRide(4),
SignedByTransporter(8),
SignedByReceiver(16),
DLT_UNKNOWN();

    private int value;

private FormState() {
    this.value= -1;
}

private FormState(int value) {
    this.value= value;
}

public int getValue()
{
    return value;
}

private static final Map<Integer, FormState> intToTypeMap = new HashMap<Integer, FormState>();
static
{
    for(FormState type: FormState.values())
    {
        intToTypeMap.put(type.value, type); 
    }

}
public static FormState fromInt(int i) {
    FormState type = intToTypeMap.get(Integer.valueOf(i));
    if (type == null) 
        return FormState.DLT_UNKNOWN;
    return type;
}
} 
```

和工厂

```
public final class OurEnumTransformer extends AbstractTransformer implements
    ObjectFactory {

@SuppressWarnings("rawtypes")
@Override
public Object instantiate(ObjectBinder context, Object value, Type targetType,
        Class targetClass) 
{
    if(targetClass.equals(FormState.class))
        return FormState.fromInt((Integer)value);
    else if(targetClass.equals(TrajectState.class))
        return TrajectState.fromInt((Integer)value);
    else
        throw new JSONException(String.format("%s:  Don't know how to convert %s to enumerated constant of %s",
                                     context.getCurrentPath(), value, targetType));
}

@Override
public void transform(Object arg0) {
    // TODO Auto-generated method stub

}

} 
```

最后调用代码：

```
List<JsonTrajectModel> result = null;
    JSONDeserializer<List<JsonTrajectModel>> deser = new     JSONDeserializer<List<JsonTrajectModel>>();
    result = deser
                .use(Date.class, dateTransformer)
                .use("values",  JsonTrajectModel.class)
                .use(Enum.class, enumTransformer)
                .deserialize(jsonData); 
```

在最后一个代码块中，jsonData 是一个有效的 JSON 字符串，而 enumTransformer 是 OurEnumTransformer 实例。

最后一点，此代码中使用的 dateTransformer 确实可以发挥作用。

任何帮助表示赞赏。

# nsis - 如何在 NSIS 中选择基于操作系统的安装目录？

> ID：14354640
> 
> 赞同：2
> 
> 时间：2013-01-16T09:07:05.910
> 
> 标签：nsis

我已经使用 nsis 脚本创建了 EXE。目前我已经将安装目录设置为这个路径

**安装目录 "$PROGRAMFILES\myapp** .

我在 windows xp、windows 7 32 位和 win7 64 位中运行了 exe 文件。安装目录可能会改变 xp 和 windows 7。

如何查找操作系统是window 7还是window xp？

如何根据操作系统选择安装目录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T10:39:10.450

根据操作系统选择目标通常不是您应该做的事情，但如果您真的想要，您可以使用`WinVer.nsh`：

```
!include WinVer.nsh

Function .onInit
${If} ${AtLeastWinVista}
  StrCpy $InstDir "c:\VistaAndLater"
${Else}
  StrCpy $InstDir "c:\Win95To2003"
${EndIf} 
FunctionEnd 
```

如果要根据 x86 与 AMD64 进行更改，请使用`x64.nsh`

# python - OpenCV 描述符删除关键点

> ID：14354642
> 
> 赞同：4
> 
> 时间：2013-01-16T09:07:19.480
> 
> 标签：python, opencv, computer-vision, feature-detection, keypoint

OpenCV 2.4 有检测器和描述符。我正在为很多图像创建关键点，问题是检测器获取了关键点，但描述符有时会将它们全部删除。

*   如何禁用描述符删除点？
*   有没有办法增强关键点，使它们不被删除？

知道我尝试了很多描述符（SIFT、SURF、BRIEF 等......）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T18:33:48.080

你能发布一些代码吗？可以在名为 matcher_simple.cpp 的 samples/cpp 文件夹中找到 CPU 实现。你能运行它吗？我还在 OpenCV 上运行了 SURF 的 GPU 版本，使用没有问题：

```
SURF_GPU surf(1000, 4, 2, false, 0.5);

// detecting keypoints & computing descriptors
GpuMat keypoints1GPU, keypoints2GPU;
GpuMat descriptors1GPU, descriptors2GPU;
surf(img1, GpuMat(), keypoints1GPU, descriptors1GPU);
surf(img2, GpuMat(), keypoints2GPU, descriptors2GPU);

cout << "FOUND " << keypoints1GPU.cols << " keypoints on first image" << endl;
cout << "FOUND " << keypoints2GPU.cols << " keypoints on second image" << endl;

// matching descriptors
BruteForceMatcher_GPU< L2<float> > matcher;
GpuMat trainIdx, distance;
matcher.matchSingle(descriptors1GPU, descriptors2GPU, trainIdx, distance);

// downloading results
vector<KeyPoint> keypoints1, keypoints2;
vector<float> descriptors1, descriptors2;
vector<DMatch> matches;
surf.downloadKeypoints(keypoints1GPU, keypoints1);
surf.downloadKeypoints(keypoints2GPU, keypoints2);
surf.downloadDescriptors(descriptors1GPU, descriptors1);
surf.downloadDescriptors(descriptors2GPU, descriptors2);
BruteForceMatcher_GPU< L2<float> >::matchDownload(trainIdx, distance, matches);

// drawing the results
Mat img_matches, image1, image2;
img1.download(image1);
img2.download(image2);
drawMatches(image1, keypoints1, image2, keypoints2, matches, img_matches); 
```

# android - android中的水波纹效果

> ID：14354646
> 
> 赞同：3
> 
> 时间：2013-01-16T09:07:37.453
> 
> 标签：android, opengl-es, cocos2d-iphone

我想在我的应用程序中使用水波纹效果，这种效果会在触摸区域反复出现，我已经查看了站点中可用的示例代码，但波纹似乎像素化了。

谁能帮我实现活水波纹效果？我发现很难实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-25T06:02:04.913

Salaam 我找到了这个项目，它对我有用。它在一项活动中显示了水波纹效应。 [https://codeload.github.com/esteewhy/whater/zip/master](https://codeload.github.com/esteewhy/whater/zip/master)

# c++ - 错误的函数名修改

> ID：14354649
> 
> 赞同：1
> 
> 时间：2013-01-16T09:07:44.737
> 
> 标签：c++, visual-studio, linker, name-mangling

我有一个导出函数的静态库

```
time_t SomeClass::getTime(); 
```

编译后它的名字被修改为

```
?getTime@SomeClass@@QAE_JXZ 
```

当我尝试使用它时，VS 返回错误

```
error LNK2001: unresolved external symbol "public: long __thiscall SomeClass::getTime(void)" (?getTime@SomeClass@@QAEJXZ) 
```

而且我不知道出了什么问题。为什么相同的功能会受到不同的破坏？我已经用相同的 Visual Studio 编译了两个项目，类有一个头文件。

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T11:12:10.630

问题在于`time_t`声明的不同。库意味着它是 64 位的，但应用程序等待 32 位值。

剩下的问题是“为什么没有很好的 MSVS 名称修改文档”？我已经阅读了很多，但没有找到参数列表中的下划线。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T09:10:30.420

您是否在链接器 INPUT 属性中包含了 .lib 文件？如果您在同一个解决方案中同时拥有两个项目，则可以将库添加为对主项目的引用：右键单击主项目，然后单击“引用”。

干杯，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T09:12:56.103

尝试重建整个项目。如果这不起作用，请检查您的 Visual Studio 目录（头文件、库）

# c# - 数据库中的 Windows 服务配置

> ID：14354654
> 
> 赞同：0
> 
> 时间：2013-01-16T09:08:04.743
> 
> 标签：c#, .net, service

我几乎没有 Windows 服务的配置设置。这些设置保存在数据库中，预计每次计时器滴答并采取相应的行为时都会被拾取。原因是，用户应该能够从 GUI 屏幕更改这些设置，并且服务应该根据数据库中的新设置进行操作（无需重新启动服务）

但是问题是，很多时候需要重新启动服务才能根据数据库中的新值正确运行。

任何人都可以帮助确定..可能是什么原因？为什么不重新启动服务就无法工作？

提前致谢。

~萨罗杰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:11:23.907

我不知道您的服务是如何开发的，但最可能的原因之一是某些配置和设置被加载到内存中，如下所示：

*   静态类字段。
*   单身人士。

在这两种情况下，如果服务不重写静态值，在服务生命周期结束并再次初始化之前，它不会知道数据库中的任何更改。

# php - 正则表达式不适用于 mysql 替换逗号分隔的 id

> ID：14354656
> 
> 赞同：2
> 
> 时间：2013-01-16T09:08:10.087
> 
> 标签：php, mysql

好的，我知道我的数据库没有标准化，但就我而言，无法标准化数据，因为每个用户都有不同的访问级别和访问权限，每次我修改某些内容并且我需要删除行并重新插入，所以我去了逗号分隔的值，这里的问题是如果我删除一个特定的组，正则表达式不起作用，它会抛出一个错误..am using php，错误是这样的

```
FUNCTION database_name.REGEXP_REPLACE does not exist 
```

表结构

```
allowed_group_ids
+----------------+
12345,34345,55454 
```

我的查询，例如`$delete_id`是`12345`或说`55454`，我一次只传递一个 ID，并且 ID 之间没有空格，它是一个文本字段

```
UPDATE tbl_scripts SET allowed_group_ids = TRIM(BOTH ',' 
FROM REGEXP_REPLACE(allowed_group_ids, '(,(\s)?)?$detele_id', '')) 
WHERE system_id = {$_SESSION['system_id']} 
```

那么这里有什么问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:26:55.213

MySQL 中没有 regexp_replace 这样的东西。

您可以使用常规替换执行此查询：

```
UPDATE tbl_scripts SET allowed_group_ids = 
    trim(BOTH ',' FROM 
        replace(
            replace(allowed_group_ids, '$delete_id',','),
            ',,',
            ','
        )
    )
WHERE system_id = {$_SESSION['system_id']} 
```

这首先会删除 ID，并删除所有双引号，然后删除字符串开头/结尾的所有逗号。这应该足够了，但如果需要，您可以添加另一个替换以删除空格。

更新：[SQL Fiddle](http://www.sqlfiddle.com/#!2/47cf6/1)显示了实际的查询

# html - 什么是文本对齐的等价物：-webkit-center；在 (IE)Trident、(Firefox)Gecko、(Opera)Presto 中？

> ID：14354659
> 
> 赞同：3
> 
> 时间：2013-01-16T09:08:14.227
> 
> 标签：html, css

我想不知道他们的任何 css 属性是否等同于 webkit css 属性。就我而言

```
text-align: -webkit-center; 
```

# dojo - 加载内容后 dojo 工具提示重新定位

> ID：14354663
> 
> 赞同：0
> 
> 时间：2013-01-16T09:08:16.317
> 
> 标签：dojo

全部！我有连接到元素的 dojo 工具提示。

它是在页面加载/准备好时/之后创建的。但是，问题是内容是动态加载的，当连接的元素第一次悬停时。

内容通过 AJAX 加载。并且 - 至于 HTML 内容的大小未知（创建了小部件，但内容仍然是空的） - 在悬停和内容加载之后 - 出现工具提示，但 ARROW 不指向连接的元素，而是向下移动。

动态加载内容后如何重新定位小部件箭头？

提前非常感谢！

**更新**

经过我发现的一些调查，工具提示箭头的位置由

**.tundra .dijitTooltipRight .dijitTooltipConnector**类高度（默认为**14px**）

所以我现在做了快速而肮脏的修复：

```
function fixArrowForTooltip() {
    // FIX ARROW (TODO HACK)
    $(".tundra .dijitTooltipRight .dijitTooltipConnector").css("height",
            "14px"); // restore to default for multiple tooltips in the page
    var newHeight = $("#dijit__MasterTooltip_0").height() - 14;
    $(".tundra .dijitTooltipRight .dijitTooltipConnector").css("height",
            newHeight + "px");
    // end of FIX
}; 
```

并将其放入 onShow()...

我知道，这应该重新工作，但是.. 工作完美:)))

对于页面箭头中的任意数量的工具提示，直接指向连接的元素:)

# rewrite - 无法让 url.rewrite 和 alias.url 一起玩得很好

> ID：14354668
> 
> 赞同：1
> 
> 时间：2013-01-16T09:08:28.823
> 
> 标签：rewrite, lighttpd

当前来自 lighttpd.conf 的相关配置：

```
url.rewrite = (
    "^/(.*)\.(.+)$" => "$0",
    "^/(.+)/?$" => "/index.php/$1",
) 
```

和

```
alias.url += (
  "/xcache/" => "/usr/share/xcache/"
) 
```

我不能让他们一起工作。据我了解，重写劫持了“/xcache/” url，因此不会触发 alias.url。

他们都可以自己完美地工作，但无法让他们一起工作。有没有办法从 url.rewrite 表达式中排除某些字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:34:16.897

解决了它：

```
url.rewrite = (
    "^/(xcache)/(.*)" => "$0",
    "^/(.*)\.(.+)$" => "$0",
    "^/(.+)/?$" => "/index.php/$1",
)
alias.url += (
  "/xcache/" => "/usr/share/xcache/"
) 
```

# scala - Play 2.0 中未转义的消息

> ID：14354669
> 
> 赞同：0
> 
> 时间：2013-01-16T09:08:29.797
> 
> 标签：scala, internationalization, playframework, playframework-2.0

我正在玩一点 Play 2.0。

现在我对消息文件中的 html 元素有疑问。

我有以下模板提取：

```
<footer>
  @Messages("footer")
</footer> 
```

在文件 conf/messages 我有：

```
footer= Test &reg; 
```

显示页面时，消息被转义并显示为

```
Test &amp; reg; 
```

我不希望消息被转义！我希望我的 html 元素 (®) 按原样显示！但它不起作用。

如何提供字符串，以免发生转义？我尝试了以下方法无济于事：

```
footer= Test \&reg;
footer= Test '&reg;'
footer= test '&'reg; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T09:18:55.530

如果你的翻译字符串中有 HTML 元素，你应该在模板中包含它们，如下所示：

```
@Html(Messages("footer")) 
```

还是我完全误解了你的问题？

# c# - 插入 SQL 时出现错误

> ID：14354675
> 
> 赞同：0
> 
> 时间：2013-01-16T09:09:00.173
> 
> 标签：c#, sql

```
datetime=Datetime.Now;
string strquery = @"INSERT INT0 [Destination_CMS].[dbo].[Destination_CMS_User] 
     values('" + userid + "','" + email + "','" 
     + userType + "','" + userStatus + "','" + processed + "','" 
     + datetime.ToLongDateString() + "')";
cmd = new SqlCommand(strquery, con);
con.Open();
cmd.ExecuteNonQuery();
con.Close(); 
```

我收到错误：“Destination_CMS”附近的语法不正确。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T09:10:07.023

你写`INT0`的不是`INTO`.

此外，使用[参数化查询](https://www.owasp.org/index.php/SQL_Injection_Prevention_Cheat_Sheet#Defense_Option_1:_Prepared_Statements_.28Parameterized_Queries.29)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T09:10:08.907

您应该尝试更改`INT0`为`INTO`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T09:10:15.427

```
INSERT INT0 [Destination_CMS].[dbo] 
```

我认为它的 INSERT INTO 而不是 INT0 （零）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T09:10:31.497

将查询打印到屏幕上，并验证语法错误的位置。

旁边; 使用参数化查询，如下所示：

```
string query = "INSERT INTO [tablename] ( column, column ) VALUES (@p_param1, @p_param2)";
var command = new SqlCommand (query);
command.Parameters.Add ("@p_param1", SqlDbType.DateTime).Value = DateTime.Now;
... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T09:27:06.323

如果不使用参数化查询，您将面临 sql 注入的风险。

你的问题看起来已经解决了，所以我的下一个问题是，为什么不使用像 NHibernate/EF 等这样的 ORM，这取决于你的需求，但是在我的书中，ADO.NET 管道是一个绝对问题的地方。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-16T09:30:38.940

你可以把它写成一个存储过程，它的优点是更容易发现和修复这样的错别字。

# jquery - 如何使用 jQuery 获取 TD 值。？

> ID：14354682
> 
> 赞同：4
> 
> 时间：2013-01-16T09:09:26.657
> 
> 标签：jquery

我正在尝试像这样使用 jquery 来获取 td 的值。

```
$("#id").find(".class").attr('value'); 
//or
$("#id").find(".class").val(); 
```

两者都返回空字符串，尽管它有一个值。注意*我正在尝试获取动态创建元素的值。提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-16T09:10:45.213

写吧

```
$("#id .class").text(); 
```

或获取 HTML 使用，

```
$("#id .class").html(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-16T09:10:03.887

[val()](http://api.jquery.com/val/)函数主要用于获取输入、选择和文本区域等表单元素的值。您需要[**text()**](http://api.jquery.com/text/)或[**html()**](http://api.jquery.com/html/)函数来获取 td 的内容。

**获取文本**

```
textOfTd = $("#id").find(".class").text(); 
```

**获取 HTML**

```
textOfTd = $("#id").find(".class").html(); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-02-22T08:33:58.387

HTML：

```
<table>
    <tr>
        <td class="tdcls">1</td>
        <td class="tdcls">2</td>
        <td class="tdcls">3</td>
    </tr>
    <tr>
        <td class="tdcls">4</td>
        <td class="tdcls">5</td>
        <td class="tdcls">6</td>
    </tr>
</table> 
```

用于选择特定`td`值的 Jquery 代码：

```
$(".tdcls").mouseenter(function(){
    var a = $(this).text();
}); 
```

# hadoop - 性能比较：Hive 和 MapReduce

> ID：14354687
> 
> 赞同：0
> 
> 时间：2013-01-16T09:09:39.650
> 
> 标签：hadoop, mapreduce, hive

Hive 在 java Map Reduce 作业上提供了一个抽象层，因此与 Java Map Reduce Jobs 相比，它应该存在性能问题。

```
Do we have any benchmark to compare the performance of Hive Query & Java Map Reduce Jobs ? 
```

**具有运行时数据的实际用例场景将是真正的帮助。**

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T15:02:56.850

您的前提是“因此与 Java Map Reduce Jobs 相比，它应该存在性能问题。” 是错的......

*Hive（以及 Pig 和 crunch 以及其他 map/reduce 抽象）将比完全调整的手写 map/reduce 慢。*

但是，除非您对 Hadoop 和 map/reduce 有经验，否则您编写的 map/reduce 与 Hive 等相比，在非平凡查询上可能会更慢。人。会做

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T09:37:08.610

前段时间我在虚拟机中做了一些小测试，但我并没有真正注意到任何区别。也许 Hive 有时会慢几秒钟，但我真的不知道这是 Hives 性能还是我的 VM 由于内存不足而挂起。我认为要记住的一件事是，Hive 将始终确定完成 MapReduce 工作的最快方法。现在，当您编写小型 MapReduce 作业时，您可能能够自己找到最快的方法。但是对于大型复杂工作（使用连接等），您是否始终能够与 Hive 竞争？

此外，与编写 HiveQL 查询相比，编写多个类和方法的 MapReduce 作业所需的时间似乎要花很多时间。

另一方面，我有一种感觉，当我自己写作业时，更容易知道发生了什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-30T07:53:43.317

1.  如果您的机器上有小型数据集并希望使用 Apache Hive 进行处理，那么与使用 Hadoop MapReduce 处理相同数据集相比，在小型数据集上执行 Job 会很慢。如果您考虑小型数据集，hive 的性能会略有下降。然而，对于大型数据集，与 MapReduce 相比，Apache Hive 的性能会更好。

2.  在 MapReduce 中处理数据集时，数据集存储在 HDFS 中。MapReduce 没有自己的数据库，因为 Hive 有元存储。从 Hive 的 Metastore，数据可以与 Impala、Beeline、JDBC 和 ODBC 驱动程序共享。

# design-patterns - Grok 模式格式

> ID：14354694
> 
> 赞同：0
> 
> 时间：2013-01-16T09:09:54.083
> 
> 标签：design-patterns, grok

我想让我的 grok 根据我的自定义模式输出结果。
输入：`May 23 22:23:39 vd='root'`

我做了一个 grok 发现，结果是：

> %{SYSLOGTIMESTAMP} vd=%{QS}

我想制作一个自定义模式，将使用发现的结果参数或条件。没有成功这是我的自定义模式，对这个 grok 模式是新手。

```
#Myown
MYCUSTOM %{SYSLOGTIMESTAMP}[ ]%{QUOTEDSTRING} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T17:31:11.477

我刚刚检查了您的模式并且没问题：MYCUSTOM %{SYSLOGTIMESTAMP:myTime} vd=%{QUOTEDSTRING:myString}

您需要做的就是为 grok 提供您想要存储值的字段名称。我使用“myTyme”和“myString”并工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-07T16:17:23.850

```
%{SYSLOGTIMESTAMP:Timestamp} vd='%{DATA:String}' 
```

也许这会有所帮助

# php - CodeIgniter 会话将不会被保存

> ID：14354695
> 
> 赞同：2
> 
> 时间：2013-01-16T09:09:56.597
> 
> 标签：php, codeigniter, session, cart

专家们，

我的会话有点问题。我想像这样将我的登录数据保存到会话中：

***登录控制器***

```
$user = $this->user_model->user($email, $password);
$user["logged_in"] = TRUE;
var_dump($this->session->set_userdata($user)); // return NULL? is this correct?
var_dump($this->session->all_userdata()); //return the correct data 
```

现在会话保存到重定向。

***其他控制器***

```
var_dump($this->session->all_userdata()); // return session_id,… and a empty user_data array 
```

我想我对购物车类有同样的问题。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-07-10T12:07:05.603

我不知道为什么，但我认为我的故事会帮助面临同样问题的人。我的问题只是因为我忘记降级我的 Wamp php 版本，它的 php 7.1。看起来我的 CI 不支持 php 7.1 或更高版本。所以只需点击几下就可以降级我的 php，我的问题就**解决**了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-01-25T08:32:01.007

我在主 index.php 文件中添加了 session_start()。之后像魅力一样工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T09:27:05.453

试试这个..

```
$user = $this->user_model->user($email, $password);
$user["logged_in"] = TRUE;
$this->session->set_userdata('user',$user);  //set session of users with a name user. 
```

要获得您可以做的会话值..

```
print_r($this->session->userdata('user')); // prints the user session array.. 
```

[阅读更多](http://ellislab.com/codeigniter/user-guide/libraries/sessions.html)关于 CI 会话的信息

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T09:18:41.850

该`set_userdata()`函数没有返回值，因此显示`null`在 上是正确的`var_dump()`。

为了将自定义数据保存到用户会话，您应该在[此处查看手册](http://ellislab.com/codeigniter/user-guide/libraries/sessions.html)

它接受的参数必须是一个数组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T09:27:56.417

嗯尝试添加`ci->session` 然后获取数据

//将 CodeIgniter 对象赋值给一个变量

```
function __construct() {
    parent::__construct ();                     
    $this->ci = & get_instance ();
        } 
```

//添加数据到ci会话

```
function test(){
     $this->ci->session->set_userdata($user)
} 
```

在另一个控制器中将`CodeIgniter`对象分配给一个变量

```
function __construct() {
    parent::__construct ();                     
    $this->ci = & get_instance ();
        } 
```

并获取 ci 用户数据

```
$this->ci->session->all_userdata() 
```

# django - Django如何order_by临时字段，动态创建字段

> ID：14354701
> 
> 赞同：2
> 
> 时间：2013-01-16T09:10:06.130
> 
> 标签：django, django-queryset

想想这些：这是一个函数，

```
def calculate(model):
    model.tempfield = 1 
```

并且此函数将在此模型中保存一个临时字段，您可以在任何地方使用 model.tempfield 但如果它是一个查询集，则在 order_by 之后这些临时字段将丢失

如何通过查询集中的这些临时字段排序？

我有 2 个模型：

```
Class A(models.Model):
    name = models.CharField(maxlength=100)

Class Log_Of_A(models.Model):
    clicks = models.IntegerField()
    a = models.ForeignKey(A)
    date = models.DateField(db_index=True) 
```

并按日期计算 A 的 Log

```
def createlog(request):
    start = request.GET.get("start")
    end = request.GET.get("end")
    all_A = A.objects.all()
    for a in all_A:
        logs=Log_Of_A.objects.filter(a=a,date__gt=start,date__lt=end)
        statistics = logs.aggregate(Sum("clicks"))
        a.clicks = statistics["clicks__sum"]
    all_A.order_by("clicks")
    return all_A 
```

如何 order_by 临时字段

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T09:49:21.323

试试这个：

```
import operator

def createlog(request):
  start = request.GET.get("start")
  end = request.GET.get("end")
  all_A = A.objects.all()
  for a in all_A:
    logs=Log_Of_A.objects.filter(a=a,date__gt=start,date__lt=end)
    statistics = logs.aggregate(Sum("clicks"))
    a.clicks = statistics["clicks__sum"]
  sorted = sorted(all_A, key=operator.attrgetter('clicks'), reverse=True)
  return sorted 
```

# java - 使用数组列表适配器样式化 android listview

> ID：14354705
> 
> 赞同：1
> 
> 时间：2013-01-16T09:10:20.187
> 
> 标签：java, android, listview, styles

我已经编写了用于从下面显示的一些数组中创建列表的代码！代码运行正常，输出符合预期！

**为有相同问题的人更新：** [自定义列表视图的好教程](http://www.framentos.com/en/android-tutorial/2012/07/16/listview-in-android-using-custom-listadapter-and-viewcache/)

**MainActivity.java**

```
public class MainActivity extends Activity {

 @Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

   ListView listView1 = (ListView) findViewById(R.id.listView1);

    String[] items = { "some", "fancy", "items", "to", "show" };

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                R.layout.listitem, items);

    listView1.setAdapter(adapter);
   } 
```

**activity_main.xml**

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
   xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
   tools:context=".MainActivity" >

  <ListView 
    android:id="@+id/listView1" 
    android:layout_height="fill_parent"
    android:layout_width="fill_parent" />

   </RelativeLayout> 
```

**列表视图.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content" 
android:textSize="20sp"
android:padding="22dp"
android:gravity="center_horizontal"
/> 
```

**我想完成什么？**

1.  将每个列表项中文本的颜色和字体更改为不同的......并在点击它们时执行一些任务......

2.  也有可能在同一个列表视图中获得另一个列表视图，例如。如果我单击一个列表项，它会再次向我显示一个列表（一种子列表），在同一活动（或屏幕）上具有不同的列表项。并且可以在点击子列表项时执行一些操作。

**感谢您提供详细的答案，因为我是 android 开发的新手。谢谢！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:12:37.543

您需要查看自定义 ArrayAdapter，如下所示[http://www.vogella.com/articles/AndroidListView/article.html](http://www.vogella.com/articles/AndroidListView/article.html)

这将解决第一个和第三个问题。至于第二个，ListView 的默认实现是不可能的，但是有一些库可以让你创建下拉列表项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:13:51.057

```
1.change color and font of the text in each list item to a different one..and do some task on 
  tapping on them... 
```

*   制作一个自定义适配器，覆盖`getVIew()`该适配器并更改其中的颜色和文本。
*   覆盖`onItemClick()`您的 ListView。完成列表项的点击事件。

现在

```
2\. also is it possible to get another listview inside the same listview eg. if I click on a
   list item it again shows me a list (kind of a sub list) with different list items on that
   same activity(or screen).and some action could be done on tapping the sub list items.

3\. what are my other list styling options.. 
```

*   它是一个[**可扩展的 ListView**](http://developer.android.com/reference/android/widget/ExpandableListView.html)只需查看链接以获取更多信息。

和[教程](http://android-adda.blogspot.in/2011/06/custom-expandable-listview.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T09:17:08.357

对于第一个问题，您可以使用 paulthom12345 的答案。

第二个问题：你必须使用[exapandableListView](http://developer.android.com/reference/android/widget/ExpandableListView.html)

更多详情请看：[Android ExpandableListView - 找教程](https://stackoverflow.com/questions/9824074/android-expandablelistview-looking-for-a-tutorial)

第三个问题不具建设性且非常模糊。请编辑问题并更详细地解释。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T09:18:19.563

1.  使用[自定义列表视图](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)。

2.  列表中不可能有一个列表。代替它，使用[可扩展列表](http://androidsourcecodemj.blogspot.in/2012/10/how-to-use-expandable-list-in-android.html)

3.  查看[每行具有不同布局的 Android Listview](https://stackoverflow.com/a/4777306/1626878)

# python - 为什么在将 %r 与元组一起使用时出现“并非所有参数都已转换”？

> ID：14354706
> 
> 赞同：3
> 
> 时间：2013-01-16T09:10:21.553
> 
> 标签：python, python-2.7

请有人解释为什么在使用 %r 和元组时出现以下错误？

```
>>> repr((1,2))
'(1, 2)'
>>> class Foo(object):
...     def __init__(self,vals):
...             self.vals=vals
...     def __repr__(self):
...             return "Foo(%r)" % self.vals
... 
>>> foo = Foo((1,2))
>>> foo
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 5, in __repr__
TypeError: not all arguments converted during string formatting 
```

打印出来的合适方法是什么`__repr__`？我应该使用`%s`and`repr(self.vals)`代替吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T09:12:06.447

`%`运算符本身接受一个元组，所以你基本上是这样做的：

```
'Foo(%r)' % (1, 2) 
```

包裹`self.vals`在一个单元素元组中：

```
'Foo(%r)' % (self.vals,) 
```

原则上，您也可以使用在变量中定义的字符串：

```
REPRFORMAT % (self.vals,) 
```

在这种情况下，您希望将其留给该变量（可能取自配置文件？）如何格式化`self.vals`，无论是它`%r`还是`%s`.

您也可以改用该[`.format()`方法](http://docs.python.org/2/library/string.html#format-string-syntax)：

```
return 'Foo({0!r})'.format(self.vals) 
```

这种格式为您提供了更大的输入灵活性；您可以处理元组中的各个项目`vals`，例如：

```
return 'Foo(({0[0]:04d}, {0[1]:02d}))'.format(self.vals) 
```

这将导致`Foo((0001, 04))`您的示例输入。

# javascript - to_json 在 javascript 中不适用于 rails 3.2.11 中的 mongoid 对象

> ID：14354709
> 
> 赞同：1
> 
> 时间：2013-01-16T09:10:30.033
> 
> 标签：javascript, ruby-on-rails, ruby, json, mongoid

我的 javascript 中的以下语句给出了错误

Uncaught SyntaxError: Unexpected token &

var js_obj = <%= @object.to_json %>;

@object 是来自控制器的 mongoid 对象。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T13:41:06.063

代替

```
var js_obj = <%= @object.to_json %>; 
```

用于

```
var js_obj = <%= @object.to_json.html_safe %>; 
```

由于 to_json 转义 html 实体 .html_safe 方法将解决这个问题

# java - 如何在 Java 中以编程方式减小 PDF 文件的大小？

> ID：14354712
> 
> 赞同：11
> 
> 时间：2013-01-16T09:10:33.560
> 
> 标签：java, pdf, itext

```
Document document = new Document(reader.getPageSizeWithRotation(1));
PdfCopy writer = new PdfCopy(document, new FileOutputStream(outFile));
document.open();
PdfImportedPage page = writer.getImportedPage(reader, ++i);
writer.setFullCompression();
writer.addPage(page);
document.close();
writer.close(); 
```

我正在使用 iText 拆分和合并 PDF，我需要您的帮助以编程方式减小（压缩）输出 PDF 大小。请让我知道实现相同的步骤。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-01-09T16:02:52.133

使用 iText

```
PdfReader reader = new PdfReader(new FileInputStream("input.pdf"));
PdfStamper stamper = new PdfStamper(reader, new FileOutputStream("output.pdf"));
int total = reader.getNumberOfPages() + 1;
for ( int i=1; i<total; i++) {
   reader.setPageContent(i + 1, reader.getPageContent(i + 1));
}
stamper.setFullCompression();
stamper.close(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-16T09:26:08.513

`writer.setFullCompression()`尽可能用你已经压缩的文件。使用 iText，您将无能为力。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-16T17:04:35.090

还将 更改`PdfCopy`为`PdfSmartCopy`。它将消除具有相同哈希（md5）的重复流。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-05T22:13:20.493

您可以使用 ghostscript，调用带有特定参数的 exe，以使用 ghostscript 的 pdfwriter 打印您的 pdf（例如：sDEVICE=pdfwrite -sOutputFile=myfile.pdf）。有几个可接受的参数，用于压缩或质量级别等。它可能会导致优化和更小的文件。

# deployment - 如何从 URL 在 jboss 中部署耳朵？

> ID：14354715
> 
> 赞同：0
> 
> 时间：2013-01-16T09:10:46.690
> 
> 标签：deployment, jboss, jenkins, nexus

我读到的关于在 JBoss 上部署耳朵和战争的信息越多，我就越感到困惑。显然，部署者在每个主要版本上都会发生变化。

我想做的是在 deploy 文件夹中定义一个 MBean 或任何带有 xml 片段的东西，它告诉 JBoss6 从远程 URL（如 jenkins 工件 url 或 nexus 存储库）获取耳朵或战争。

背景是将大二进制 blob 排除在我们的 cfengine 配置存储库之外。这也意味着在部署文件夹中复制一个新耳朵不起作用，因为 cfengine 每小时检查一次并在配置发生更改时恢复配置。使用 xml-config 文件，我们可以通过 JMX 取消部署和重新部署以重新加载新的测试版本（在 jenkins 中始终位于相同的 url 上）或从 nexus 发布的版本。

那么有人知道哪里有如何实现这一目标的例子吗？

谢谢

# google-chrome-extension - 谷歌浏览器扩展获取服务器的 IP 地址

> ID：14354716
> 
> 赞同：1
> 
> 时间：2013-01-16T09:10:48.717
> 
> 标签：google-chrome-extension

我有一个好主意，它围绕用户所在服务器的 ips 展开。

我对制作 google chrome 扩展非常陌生，但我擅长构建一个 .

**问题**：我可以从用户所在的服务器获取 IP 吗？如果是这样，你会怎么做？

我在想只是 AJAX 将 url 发送到我自己的服务器，然后 ping 服务器将获取 ip 并将其返回/存储在某个地方。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-01-17T14:14:39.410

[您可以使用chrome.tabs](https://developer.chrome.com/extensions/tabs.html) API获取当前`tab\web Page`正在浏览的用户的当前 URL

# 示范

```
chrome.tabs.query({
    "currentWindow": true, //Filters tabs in current window
    "status": "complete", //The Page is completely loaded
    "active": true // The tab or web page is browsed at this state,
    "windowType": "normal" // Filters normal web pages, eliminates g-talk notifications etc
}, function (tabs) { //It returns an array
    for (tab in tabs) {
        _url_i_need = tabs[tab].url;
        //Do AJAX Stuff here 
    }
}); 
```

确保您`tabs`在清单中声明权限，如此处所示

```
{
  "name": "My extension",
  ...
  "permissions": [
    "tabs"
  ],
  ...
} 
```

# 参考

*   [选项卡 API](https://developer.chrome.com/extensions/tabs.html)

# java - 如何在 Java 中使用正则表达式模式匹配字符串的结尾？

> ID：14354717
> 
> 赞同：14
> 
> 时间：2013-01-16T09:10:49.493
> 
> 标签：java, regex

我想要一个与字符串结尾匹配的正则表达式模式。

我正在实现一个词干算法，它将删除一个单词的后缀。

例如，对于单词“Developers”，它应该匹配“s”。
我可以使用以下代码来做到这一点：

```
Pattern  p = Pattern.compile("s");
Matcher m = p.matcher("Developers");
m.replaceAll(" "); // it will replace all 's' with ' ' 
```

我想要一个仅匹配字符串结尾的正则表达式，例如`replaceLast()`.

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-16T09:12:21.120

您需要匹配“s”，但前提是它是单词中的最后一个字符。这是通过边界断言 $ 实现的：

```
input.replaceAll("s$", " "); 
```

如果您增强正则表达式，您可以通过一次调用 replaceAll 来替换多个后缀：

```
input.replaceAll("(ed|s)$", " "); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T09:14:21.553

使用`$`：

```
Pattern p = Pattern.compile("s$"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T09:14:43.010

```
 public static void main(String[] args) 
{
    String message = "hi this message is a test message";
    message = message.replaceAll("message$", "email");
    System.out.println(message);
} 
```

检查这个， [http://docs.oracle.com/javase/tutorial/essential/regex/bounds.html](http://docs.oracle.com/javase/tutorial/essential/regex/bounds.html)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-16T09:13:45.033

看看下面的例子：

```
String ss = "Developers".replaceAll(".$", " "); 
```

# .net - 通过专用线程移动视觉效果？

> ID：14354719
> 
> 赞同：0
> 
> 时间：2013-01-16T09:10:57.917
> 
> 标签：.net, wpf, multithreading

是否可以在我的 WPF 应用程序中指定一个线程来处理 Visuals 的动画？为了解释更多，在我的应用程序中，有时会有繁重的任务，这会影响 moivng Visuals 的基于数学的动画。

那么，这可能吗？使用专用线程保持动画流畅？

**编辑**

这是我移动视觉效果的方式：

```
public class KMouseGrid : Grid
{
private VisualCollection _children;
DrawingVisual DrawingVisual_0;
TranslateTransform _0_translate = new TranslateTransform(0, 0);
DrawingVisual DrawingVisual_1;
TranslateTransform _1_translate = new TranslateTransform(0, 0);

public KMouseGrid()
        {
            MultiInputWrapper.Instance.CoordinateRecieved += new MultiInput.Contracts.MultiInput(Instance_CoordinateRecievedSingleChannel);

            _children.Add(DrawingVisual_0);
            _children.Add(DrawingVisual_1);

        }
void Instance_CoordinateRecievedMultiChannel(double aX, double aY, int aChanelNumber, MultiInput.Contracts.MouseEvents aMouseEvent)
        {
            if (aChanelNumber == 0)
            {
                _0_translate.X = MultiInput.MultiInputMouse.GetLastPosition(0).X  ;
                _0_translate.Y = MultiInput.MultiInputMouse.GetLastPosition(0).Y ;
                //_0_rotate.Angle += 6;
            }
            else if (aChanelNumber == 1)
            {
                _1_translate.X = MultiInput.MultiInputMouse.GetLastPosition(1).X   ;
                _1_translate.Y = MultiInput.MultiInputMouse.GetLastPosition(1).Y  ;
            }

        }

// Provide a required override for the VisualChildrenCount property. 
        protected override int VisualChildrenCount
        {
            get
            {
                if (_children == null)
                {
                    _children = new VisualCollection(this);
                }
                return _children.Count;
            }
        }

        // Provide a required override for the GetVisualChild method. 
        protected override Visual GetVisualChild(int index)
        {
            if (index < 0 || index >= _children.Count)
            {
                throw new ArgumentOutOfRangeException();
            }

            return _children[index];
        }

private DrawingVisual CreateDrawingVisualCursor(ImageSource aImageSource, double aXOffset, double aYOffset)
        {
            DrawingVisual drawingVisual = new DrawingVisual();

            // Retrieve the DrawingContext in order to create new drawing content.
            DrawingContext drawingContext = drawingVisual.RenderOpen();

            // Create a rectangle and draw it in the DrawingContext.
            Rect rect = new Rect(new System.Windows.Point(aXOffset, aYOffset), new System.Windows.Size(aImageSource.Width, aImageSource.Height));
            drawingContext.DrawImage(aImageSource, rect);

            // Persist the drawing content.
            drawingContext.Close();

            return drawingVisual;
        } 
```

# android - 如何初始化我自己的偏好布局？

> ID：14354720
> 
> 赞同：1
> 
> 时间：2013-01-16T09:10:58.047
> 
> 标签：android, android-layout, android-preferences

我已经使用 imageView 创建了我的自定义首选项布局。

```
<Preference 

...
 android:key="pref_custom"

 android:layout="@layout/preference_layout"

 > 
```

在 onCreate 我自己的 PreferenceActivity 中，我想更改我的 CustomPreference ImageView。

问题是下面的代码总是返回 null。

```
imageViewSmallContact = (ImageView) findViewById(R.id.ImageViewSmallContact); 
```

我只能在`OnPreferenceClickListener.onPreferenceClick`我的 pref_custom Preference 方法中找到这个 ImageView。

在我的 onCreate 方法中的类 ConfigureActivity（扩展 PreferenceActivity）中，我只有“：

```
...
super.onCreate(savedInstanceState); 
addPreferencesFromResource(R.xml.preferences); 
updatePreferenceView(); // here I update all my preferences `
... 
```

在我的 PreferenceActivity onCreate 方法中，我阅读了我的偏好
Preference pref= findPreference("pref_phone_");

比我想在这个首选项的自定义布局中更改图像。

```
imageViewSmallContact = (ImageView) findViewById(R.id.ImageViewSmallContact); 
```

这里 imageViewSmallContact 返回 null。

然后在这个偏好中我注册 OnPreferenceClickListener

在 onPreferenceClick 里面 findViewById(R.id.ImageViewSmallContact); 返回正确的值。
我的问题是：

如何初始化此布局以从我的 PreferenceActivity 获取 imageView ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:33:05.513

为 PreferenceActivity 设置 xml 配置时，Preferences 的布局不会立即膨胀。仅在需要时才这样做。你可以尝试调试到

```
android.preference.Preference.onBindView/onCreateView(..) 
```

看看，什么时候调用它。我认为这类似于 ListView 中的视图膨胀，只有在它们实际显示时才会这样做。你想对你的 ImageView 做什么？也许您已经可以在 layout.xml 文件中指定它了？

可能可以覆盖 Preference 并提供 onBindView() 的自定义实现，该实现对您的 ImageView 执行任何必要的操作。我只能在这里推测，因为当我想要更复杂的布局时我放弃了整个 PreferenceActivity，但我认为你可以创建一个 Preference 的子类，然后在你的 xml 中引用它。在那个类（例如 MyImagePreference）中，您将覆盖 onBindView 方法以根据需要初始化您的视图（在 super.onBindView() 调用之后）。

# javascript - 在主干中调用错误回调

> ID：14354725
> 
> 赞同：1
> 
> 时间：2013-01-16T09:11:12.793
> 
> 标签：javascript, backbone.js

是否可以简单地触发或调用主干中保存的错误回调？

我用这个覆盖了主干的保存功能

```
save: function(attributes, options) {
            options || (options = {});
            options.timeout    = 10000;    
            options.beforeSend = sendAuthorization;
            console.log( options.connection.ConnectionType );
            if( options.connection.ConnectionType != 'No network connection' ){
                Backbone.Model.prototype.save.call(this, attributes, options);
            }else{
                console.log("ERROR! network related!");
            }
    } 
```

options.connection.ConnectionType 是一个简单的字符串，表示设备 (iPad) 的当前互联网连接。

```
this.model.save( this.model, 
  connection : { ConnectionType : "No network connection" },
  success    : {...},
  error      : {...}
} 
```

我想要的是如果 if 语句失败，那么它应该触发保存函数的错误回调。可能吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T10:23:39.667

在最简单的情况下，您只需执行`error`回调函数：

```
if( options.connection.ConnectionType != 'No network connection' ){
    Backbone.Model.prototype.save.call(this, attributes, options);    
} else {
    if(options.error) {
        options.error(this, null, options);
    }
} 
```

该方法存在不符合`save`方法和`error`回调API的问题。该`save`方法应返回一个`jqXHR`对象，错误回调应将其作为第二个参数。

如果您想提供与 API 兼容的方法/回调签名，最简单的方法是中止请求。就像是：

```
var xhr = Backbone.Model.prototype.save.call(this, attributes, options);
if( options.connection.ConnectionType == 'No network connection' ){
    xhr.abort();
}
return xhr; 
```

这将在发起请求后立即取消该请求。你得到你的 xhr/promise 返回对象和回调的正确 xhr 参数。xhr的`status`将是 0 并且`statusText`“中止”。

# amazon-web-services - 如何支付 AWS

> ID：14354728
> 
> 赞同：5
> 
> 时间：2013-01-16T09:11:22.353
> 
> 标签：amazon-web-services, payment

我似乎找不到如何向 AWS 收费的方式。我知道按使用付费和按小时付费的模式，但我正在寻找另一件事：

AWS 会在服务运行之前每小时从我的卡中提取资金，还是会在一个月的第一天或最后一天收到账单？这一刻是如何运作的 - 谁能详细地向我解释一下，好吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T09:13:32.690

他们将生成您需要支付的每月账单。您还可以灵活地将其设置为自动付款；这样钱就会自动从您的帐户中扣除。账单在每个月的 1 日生成。

# c# - 无法将约会添加到调度程序

> ID：14354733
> 
> 赞同：1
> 
> 时间：2013-01-16T09:11:34.983
> 
> 标签：c#, datatable, devexpress

我正在尝试添加从数据库中获取的约会。我“手动”获取它们。我将它们存储在一个名为 dt 的数据表中。数据存在于数据表中。

```
foreach (Resource r in schedulerStorage1.Resources.Items)
{
    Console.WriteLine(r.Caption + " - " + r.Id);
}

Appointment app;
foreach (DataRow dr in result.DataTable_Result.Rows)
{
    Console.WriteLine(dr[0] + " - " + dr[1] + " - " + dr[2]);

    app = schedulerControl1.Storage.CreateAppointment(AppointmentType.Normal);
    app.ResourceId = dr[0];
    app.Start = DateTime.Parse(dr[1].ToString());
    app.End = DateTime.Parse(dr[2].ToString());

    schedulerControl1.Storage.Appointments.Add(app);
} 
```

**Console.WriteLines 的输出：**

房间 1 - 1

房间 2 - 2

1 - 2013 年 1 月 16 日上午 8:00:00 - 2013 年 1 月 16 日上午 8:05:00

1 - 2013 年 1 月 16 日上午 9:00:00 - 2013 年 1 月 16 日上午 9:05:00

2 - 2013 年 1 月 16 日上午 8:00:00 - 2013 年 1 月 16 日上午 8:30:00

关于为什么不添加约会的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T10:54:21.093

好吧，我设法找出问题的根源。

dr[0] 是资源 ID。

当我添加资源时，我写道：

```
 r = new Resource(dr[0], dr[1].ToString()); 
```

当我添加约会时，我写道：

```
 app.ResourceId = dr[0]; 
```

以下将修复未显示的约会。

```
 r = new Resource(dr[0].ToString(), dr[1].ToString());
            app.ResourceId = dr[0].ToString(); 
```

现在一切正常。感谢 Aphelion 的帮助。:D

# javascript - 如何找到放置在可放置 div 上的 div 索引

> ID：14354734
> 
> 赞同：0
> 
> 时间：2013-01-16T09:11:35.563
> 
> 标签：javascript, html, css

我具有拖放功能，可以在其中拖动 div 并在可放置区域上动态放置。我在可放置区域具有可排序功能，所以我想找出索引，以便在排序后我必须找出特定 div 的确切索引位置。这是我的代码

```
$('#workArea').sortable({cancel: ':input,button,.common'});
$(".drags").draggable({
  helper : "clone",
  connectWith: '.workArea'
});
$(".workArea").droppable({
  drop: function( event, ui ) {
    function createHead(workspace){
      var head = document.createElement("div");
    }
  // [editor] i think i am missing a } here or pasted something wrong
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:17:33.990

jQuery提供了`.index()`方法，

> 返回值是一个整数，表示 jQuery 对象中第一个元素相对于其兄弟元素的位置。

阅读更多关于[.index()](http://api.jquery.com/index/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:30:53.517

在我看来，返回新索引的最佳位置是通过排序功能。

更新全局数组中的索引也可能有所帮助。然后在调用排序函数后在数组中搜索特定的 div 元素。

在 JS 中，您始终可以使用 this.target 是要删除的元素，然后使用
$(this.target).index() 并使用 $("#parentContainer div:eq(" + newIndex + ")") 找到它

希望这可以帮助。

# c# - 当在 datagridview 中的一行中按下转义键时，应该从该行中删除文本

> ID：14354736
> 
> 赞同：0
> 
> 时间：2013-01-16T09:11:41.883
> 
> 标签：c#

当我按下转义键时，我在行验证中遇到错误。而不是从 datagridview 行中删除文本，即我在新行中添加了文本。我不想保存该行，也不想关闭表单。简单地说，当我从键盘上按下 Escape 键时，文本应该被删除。我在 datagridviewrow 验证事件中使用此代码。

```
if (string.IsNullOrEmpty(dgTests.CurrentRow.Cells["Column1"].Value.ToString()) && !string.IsNullOrEmpty(dgTests.CurrentRow.Cells["Column2"].Value.ToString()))
{
    dgTests.Rows[e.RowIndex].ErrorText = "Column1 should not be empty";
    e.Cancel = true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-08-11T09:46:31.067

当在 DataGridView 中按转义键时，我想看到它是假的

在 datagridview 属性 KeyPress 写下面的代码

```
if (Keys.Escape.ToString() == "Escape")
            gvExpireDate.Visible = false;

private void DatagridView_KeyPress(object sender, KeyPressEventArgs e)
    {
        //MessageBox.Show(Keys.Escape.ToString());
        if (Keys.Escape.ToString() == "Escape")
            gvExpireDate.Visible = false;
        //if(e.KeyChar == Keys.Escape)

    } 
```

# iphone - 切换标签栏时NSOperation失败

> ID：14354738
> 
> 赞同：0
> 
> 时间：2013-01-16T09:12:00.580
> 
> 标签：iphone, objective-c, nsthread, nsoperation, nsoperationqueue

我正在使用`TabBarController`带有两个选项卡的 a 。在第二个我调用一个`NSOperation`，将操作添加到一个`NSOperationQueue`。当我选择第二个选项卡时，我在主线程上调用了这个操作。但是当我切换到第一个选项卡时，应用程序崩溃了。我正在正确释放和取消操作

我收到以下关于 bt 的消息

```
#0  0x0243d09b in objc_msgSend ()
#1  0x1299c4a0 in ?? ()
#2  0x008b6d23 in -[__NSOperationInternal start] ()
#3  0x008b6a34 in -[NSOperation start] ()
#4  0x00943301 in __block_global_6 ()
#5  0x0222753f in _dispatch_call_block_and_release ()
#6  0x02239014 in _dispatch_client_callout ()
#7  0x0222a2e8 in _dispatch_root_queue_drain ()
#8  0x02229fcb in _dispatch_worker_thread3 ()
#9  0x99a16b24 in _pthread_wqthread ()
#10 0x99a186fe in start_wqthread () 
```

请提出任何解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:23:22.190

确保确定 NSOperationQueue 的所有权。此外，请确保在切换选项卡时不会释放 NSOperation 所需的所有实例。

您能否显示正在执行实际工作的线程的堆栈跟踪？

# android - com.facebook.Settings.publishInstallAsync 是否适用于 Android < 3.0

> ID：14354746
> 
> 赞同：1
> 
> 时间：2013-01-16T09:12:31.003
> 
> 标签：android, facebook-android-sdk

根据 [https://developers.facebook.com/docs/tutorials/mobile-app-ads/](https://developers.facebook.com/docs/tutorials/mobile-app-ads/)，要通知 Facebook 安装您的应用程序，您可以执行以下操作：

> 对于 Android 3.0，将以下内容添加到应用中每个 Activity 的 onResume() 中：com.facebook.Settings.publishInstallAsync(context, YOUR_APP_ID);

如果我们想支持 < 3.0 的 Android 设备，还有其他选择吗？或者尽管文档说了什么，这是否可以在较旧的 Android 版本中使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T01:22:18.347

文档不清楚——这将适用于大多数 3.0 之前的 Android 设备。

此处提到的“3.0”指的是 Android 版 Facebook SDK 的版本号，而不是 Android 操作系统的版本。

尽管如此，适用于 Android 的 Facebook SDK 3.0 和最新（截至 2013 年 1 月）版本的 Facebook 应用程序确实需要 Android 2.2 Froyo。

# c++ - c++中int数组的动态分配和赋值

> ID：14354752
> 
> 赞同：0
> 
> 时间：2013-01-16T09:12:46.640
> 
> 标签：c++, visual-c++

我是 C++ 新手，我试图在没有 std::vector 帮助的情况下做两件事（这是之前完成的）

1.  定义一个整数数组，我不知道数组的大小。
2.  将此数组传递给另一个函数并输出存储在数组中的所有值。

    ```
    int _tmain()
    {

        int* a = NULL;   
        int n;          
        std::cin >> n;        
        a = new int[n];  
        for (int i=0; i<n; i++) {
            a[i] = 0;   
        }

        testFunction(a,n);
        delete [] a;  
        a = NULL;    

    }
    void testFunction( int x[], int n)
    {
        for(int i =0;i<n;++n)
        {
            std::cout<<x[i];
        }
    } 
    ```

但我可以看到它没有分配 10 个字节的内存，并且一直一个内存被 0 填满。如果我缺少什么，有人可以帮我吗？或者除了向量之外还有其他方法吗？提前致谢

我修改了一件事，因为我意识到我放了 ++n 而不是 i

```
int _tmain()
{

    int* a = NULL;   
int n;          
std::cin >> n;        
a = new int[n];  
for (int i=0; i<n; i++) {
    a[i] = i;   
}

testFunction(a,n);
delete [] a;  
a = NULL;    

}
void testFunction( int x[], int n)
{
    for(int i =0;i<n;++i)
    {
        std::cout<<x[i];
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T09:30:16.033

我不确定我是否理解您的所有问题，但输入错误 `for(int i =0;i<n;++n)` 导致`testFunction`了很长的循环。

写：

```
for(int i =0;i<n;++i) 
```

这打印你的 n "0"

# nhibernate - 关于定制产品电子商务数据库模型的建议

> ID：14354759
> 
> 赞同：0
> 
> 时间：2013-01-16T09:13:24.050
> 
> 标签：nhibernate, database-design, model, database-schema

我需要一些关于建模电子商务域的建议。

客户销售两种产品：

1.  定制艺术品，客户指定的设计。
2.  客户指定的背面带有信息的艺术版画。

到目前为止，这是我缩减的数据库模型。

```
Products:
    Id
    Description
    Price

Orderlines:
    Id
    OrderId
    ProductId

Attributes:
    Id
    Name

OrderAttributes:
    AttributeId
    OrderlineId
    Value 
```

产品表将包含上面的 2 个产品。

订单行将所选产品链接到订单。

属性包含每个产品的自定义字段名称。

例如，定制艺术品产品将具有属性设计。

订单属性将订购的产品链接到其海关属性并具有价值。例如，具有设计属性的定制艺术品产品，具有油漆房屋的价值。

我还想使用 nhibernate 将此数据库模型映射到代码。

有没有更好的方法来建模这些数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T15:02:10.203

几个建议：

Orderlines 表应包含产品的价格（可能还有描述），以便项目价格可以更改而不会影响现有订单。同样，订单表（未显示）应包含可能更改的客户信息（例如送货地址）。构成订单的数据不能更改，最简单的方法是将其展平和非规范化。

OrderAttributes 结构被称为[实体-属性-值](http://en.wikipedia.org/wiki/Entity%E2%80%93attribute%E2%80%93value_model)模型，它有很多缺点。一般来说，我建议避免使用它并将所需的列添加到 Orderlines 表中。如果需要，您的应用程序可以继承 Product 和 OrderLine，以便 CustomArtWorkProduct 在添加到订单时创建 CustomArtWorkOrderLine。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:22:22.467

在面向对象的程序中，关系表示为关联。

那是：

*   如果产品有订单，那么产品必须有一个订单集合。
*   如果订单是针对产品的，则订单必须具有属性 Product。
*   等等。

在面向对象的编程中，您不需要通过标识符关联：您不需要它，因为这是一个由分层数据统治的不同世界。

老实说，如果你按照我之前所说的去做，NHibernate 将是一个非常强大的工具，因为它能够在没有你干预的情况下加载对象和属性。

想想“获得某个产品的所有订单”：**您不会有意执行 SQL 连接，但您将访问 的`Orders`属性，`Product`NHibernate 会将这种访问转换为数据库世界**。

这就是使用 OR/M 的意义所在。这不仅仅是“我*按原样*映射表”。它是关于连接两个截然不同的世界：面向对象的分层世界，没有痛苦的关系数据。

~~查看这篇非常古老的（2004 年！）CodeProject 文章以及它如何创建基于 Northwind SQL Server 数据库的模型：~~

 ~~*   [http://www.codeproject.com/Articles/8773/NHibernate-in-real-world-applications](http://www.codeproject.com/Articles/8773/NHibernate-in-real-world-applications)~~ 

~~不要关注如何将模型映射到数据库，而是关注模型设计。~~

查看这篇文章，它比另一篇更现代：

*   [http://litemedia.info/introduction-to-nhibernate](http://litemedia.info/introduction-to-nhibernate)

# ruby-on-rails - RABL API 查看目录？

> ID：14354760
> 
> 赞同：5
> 
> 时间：2013-01-16T09:13:26.837
> 
> 标签：ruby-on-rails, api, rabl

我真的很喜欢 RABL，但它似乎会把我的视图文件夹和`.rabl`文件弄得一团糟。我真的很想有一个单独的`API`视图目录，所以它会是这样的：

```
app/
    views/
        customers/
            index.html.erb
            show.html.erb
            ......
        api/
            v1/
                customers/
                    index.json.rabl
                    show.json.rabl 
```

实现这一目标的最佳方法是什么？我正在使用本教程：

[http://railscasts.com/episodes/350-rest-api-versioning](http://railscasts.com/episodes/350-rest-api-versioning)

设置版本控制但它不支持 RABL。我试过这个`app/controllers/api/v1/customers_controller.rb`：

```
module Api
    module V1
        class CustomersController < ApplicationController
            respond_to :json

            def index
                @customers = Customer.search(params[:page])

                Rabl::Renderer.json(@customers, 'api/v1/customers/index')
            end
        end
    end
end 
```

但正如预期的那样，这似乎不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-18T14:32:26.950

有同样的问题。并通过在 RABL 初始化程序中添加它来解决它

```
# config/initializers/rabl_init.rb
require 'rabl'
Rabl.configure do |config|
    config.view_paths = [Rails.root.join('app', 'views')]
end 
```

如果你想放弃这条线`Rabl::Renderer.json(@customers, 'api/v1/customers/index')`，只需将配置更改为`config.view_paths = [Rails.root.join('app', 'views', 'api', 'v1')]`. 在控制器中，它将自动链接它。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T17:14:08.573

据我所见，这应该可行。我正在做几乎相同的事情。你得到什么错误？

# ios - 如何启用 xcode 预编译的源文件

> ID：14354764
> 
> 赞同：2
> 
> 时间：2013-01-16T09:13:34.630
> 
> 标签：ios, xcode

伙计们，我正在使用 xcode 启动一个链接到静态库项目的项目。（我将项目添加为目标项目的子项目并将 .a 添加到目标）每次运行目标时，它都必须重新编译lib 项目中的所有文件，无论静态 lib 项目中的源文件是否已更改。如何阻止它重新编译静态库项目？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T10:20:24.013

我对你的问题没有直接的答案，但我通过这个[博客](http://www.blog.montgomerie.net/easy-xcode-static-library-subprojects-and-submodules)逐步说明`static lib`在 XCode 中创建一个。当我刚刚编辑目标项目时，我尝试查看静态库是否已重建，但似乎没有发生。

需要考虑的几个提示：

*   检查您在构建目标时使用的方案（Parallelize Build 和 Find Implicit Dependencies 都应该打开）。
*   确保你不清理你的 lib 项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T11:38:11.267

您还可以构建自己的框架并使用此项目。[我用这个链接做到了](http://db-in.com/blog/2011/05/creating-universal-framework-to-iphone-ios/)

# wpf - WPF - how to bind control by MVVM

> ID：14354773
> 
> 赞同：0
> 
> 时间：2013-01-16T09:14:22.357
> 
> 标签：wpf, mvvm, binding

i have view:

```
<Grid>
    <!--Some Stuff-->
    <Control XXX="{Binding ButtomControl}"/>
    <!--Some Stuff-->
</Grid> 
```

i have VM:

```
public sealed class SelectionDialogV3VM : PropertyChanges
{
    // Some Stuff
    public Control ButtomControl
    {
        get{return _buttomControl;}
        set
        {
            _buttomControl = value;
            OnPropertyChanged("ButtomControl");
        }
    }
    // Some Stuff
} 
```

My objective: in run time change some view (ButtomControl) inside of my main view. But, i can not do proper binding because i do not know the XXX property.

thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T18:04:26.090

I just wanted to add something else:

Referencing a UI control in the view model should be avoided at all cost.

If you want to switch the view via the view model, try using DataTemplates and a ContentControl instead.

See:

[http://rachel53461.wordpress.com/2011/05/28/switching-between-viewsusercontrols-using-mvvm/](http://rachel53461.wordpress.com/2011/05/28/switching-between-viewsusercontrols-using-mvvm/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T09:18:23.097

Try something like this :

```
<ContentControl Content="{Binding ButtomControl}"/> 
```

But honestly, having a property in your ViewModel of type `Control` is not a good omen :D

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T09:27:49.960

Use a ContentPresenter:

```
<ContentPresenter Content="{Binding ButtomControl}"/> 
```

Anyway, it's odd to bind to a control!

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T12:16:32.053

Thanks you all, all answers was valuable

Finally, i used DataTriggers, as described here: [MVVM : how to switch between views using DataTemplate + Triggers](https://stackoverflow.com/questions/6546436/mvvm-how-to-switch-between-views-using-datatemplate-triggers)

Thanks

# android - 如何在诸如 C# ComboBox 之类的微调器中获取选定值？

> ID：14354782
> 
> 赞同：1
> 
> 时间：2013-01-16T09:15:07.390
> 
> 标签：android, spinner, custom-component

我试图制作一个包含 Id 和 Title 的自定义 Spinner。此 Spinner 显示标题，但在我的代码中的任何地方我都可以访问选定的 Id。我该怎么做。这就像 C# 中的 ComboBox。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:18:41.683

您可以按照此[示例](http://developer.android.com/resources/tutorials/views/hello-spinner.html)获取微调器的选定值：

创建一个实现 AdapterView.OnItemSelectedListener 的嵌套类。这将提供一个回调方法，该方法将在从 Spinner 中选择项目时通知您的应用程序。

在该类的“onItemSelected”方法中，您可以获得所选项目：

```
public class YourItemSelectedListener implements OnItemSelectedListener {

    public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
        String selected = parent.getItemAtPosition(pos).toString();
    }

    public void onNothingSelected(AdapterView parent) {
        // Do nothing.
    }
} 
```

最后，您的 ItemSelectedListener 需要在 Spinner 中注册：

```
spinner.setOnItemSelectedListener(new MyOnItemSelectedListener()); 
```

**编辑：**

```
A spinner does not support item click events. Calling this method will raise an exception. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T09:19:22.767

如果您在单独的数组中有 id 和名称，则根据微调器选定项目的位置，您可以获得选定的项目 id。

```
spinner.setOnItemSelectedListener(new OnItemSelectedListener() {

    public void onItemSelected(AdapterView<?> arg0, View arg1,
                    int arg2, long arg3) 
    {
        System.out.println(Id_arr[spinner.getSelectedItemPosition()]);// for spinner id
        System.out.println(spinner.getSelectedItem().toString());// for spinner item
    }

    public void onNothingSelected(AdapterView<?> arg0) {
                // TODO Auto-generated method stub

    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T07:18:10.187

我解决了！起初我创建了一个自定义适配器：

```
public class SimpleCustomeAdapter extends ArrayAdapter<String>{

Context c;
List<String> id;
List<String> title;
public SimpleCustomeAdapter(Context context, int textViewResourceId,List<String> id, List<String> title) {

    super(context, textViewResourceId,id);

    c=context;
    this.id=id;
    this.title=title;
}

@Override
public View getDropDownView(int position, View convertView,ViewGroup parent) {

    return getCustomView(position, convertView, parent);        
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    return getCustomView(position, convertView, parent);
}

public View getCustomView(int position, View convertView, ViewGroup parent) {
    this.setDropDownViewResource(R.layout.spinner_layout);

    LayoutInflater inflater=LayoutInflater.from(c);
    View row=inflater.inflate(R.layout.spinner_layout, parent, false);
    TextView idTextView=(TextView)row.findViewById(R.id.idCustomspinnertextView);
    idTextView.setText(id.get(position));

    TextView titleTextView=(TextView)row.findViewById(R.id.titleCustomspinnertextView);
    titleTextView.setText(title.get(position));

    Typeface externalFont=Typeface.createFromAsset(c.getAssets(), "font/BKOODB.TTF");
    titleTextView.setTypeface(externalFont);
    titleTextView.setTextSize(25);
    return row;
} 
```

}

然后，我创建了一个自定义 Spinner：

```
public class CustomSpinner extends Spinner {
public CustomSpinner(Context context, AttributeSet attrs, int defStyle,
        int mode) {
    super(context, attrs, defStyle, mode);
    // TODO Auto-generated constructor stub
}

public CustomSpinner(Context context, AttributeSet attrs) {
    super(context, attrs);
    // TODO Auto-generated constructor stub
}

public CustomSpinner(Context context, int mode) {
    super(context, mode);
    // TODO Auto-generated constructor stub
}

List<String> idList;
List<String> titleList;
public void setAdapter(SimpleCustomeAdapter adapter) {
    // TODO Auto-generated method stub
    super.setAdapter(adapter);
    this.idList= adapter.id;
    this.titleList = adapter.title;
}

public void setSelectedId(long id){
    for (int i = 0; i < idList.size(); i++) {
        if(idList.get(i).contains(id+""))
        {
            this.setSelection(i);
            break;
        }
    }
    Log.d("SpinnerError", "This id is not in adapter!");
}

public CustomSpinner(Context context) {
    super(context);
    // TODO Auto-generated constructor stub
} 
```

}

现在在我的活动代码中是这样的：

```
 public class MyActivity extends Activity {

CustomSpinner customspinner1;
Button button1;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_my);

    customspinner1=(CustomSpinner)findViewById(R.id.customSpinner1);
    button1=(Button) findViewById(R.id.button1);

    List<String> payoffTypeList = new ArrayList<String>();
    List<String> payoffTypeIdList = new ArrayList<String>();

    DatabaseAccess dba = new DatabaseAccess(this);

    Cursor cur = dba.getAllPayofftype();
    if (cur.moveToFirst()) {
        do {
            payoffTypeList.add(cur.getString(1));
            payoffTypeIdList.add(cur.getString(0));
        } while (cur.moveToNext());
    }

    customspinner1.setAdapter(new SimpleCustomeAdapter(this, R.layout.spinner_layout,payoffTypeIdList, payoffTypeList));

    ///example
    customspinner1.setSelectedId(12);

    button1.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            Log.d("myTag", "SlectedId = "+customspinner1.getSelectedId());
        }
    });

} 
```

# bash - bash：如果不在第二个文件中，则仅处理行

> ID：14354784
> 
> 赞同：0
> 
> 时间：2013-01-16T09:15:14.150
> 
> 标签：bash, sed, awk, grep

我有这段代码：

```
 while IFS=$'\n' read -r line || [[ -n "$line" ]]; do
    if [ "$line" != "" ]; then
        echo -e "$lanIP\t$line" >> /tmp/ipList;
    fi
done < "/tmp/includeList" 
```

我知道这一定很简单。但我有另一个列表（/tmp/excludeList）。如果在我的 excludeList 中找不到该行，我只想在我的 while 循环中回显该行。我怎么做。有什么 awk 声明之类的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T09:40:25.740

您可以`grep`单独执行此操作：

```
$ cat file
blue
green
red
yellow
pink

$ cat exclude 
green
pink

$ grep -vx -f exclude file
blue
red
yellow 
```

该`-v`标志告诉`grep`只输出`file`未找到的行，`exclude`并且`-x`标志强制整行匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:23:14.853

使用 grep

```
while IFS=$'\n' read -r line || [[ -n "$line" ]]; do
    if [[ -n ${line} ]] \
        && ! grep -xF "$line" excludefile &>/dev/null; then
       echo -e "$lanIP\t$line" >> /tmp/ipList;
    fi
done < "/tmp/includeList" 
```

-n $line 表示如果 $line 不为空，则如果在排除文件中找到 $line，则 grep 返回 true，该文件被 ! 如果找不到该行，则返回 true。
-x 表示行匹配，因此行上不会出现任何其他内容
-F 表示固定字符串，因此如果任何元字符以 $line 结尾，它们将按字面意思匹配。

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T12:18:07.070

使用 awk：

```
awk -v ip=$lanIP -v OFS="\t" '
    NR==FNR {exclude[$0]=1; next}
    /[^[:space:]]/ && !($0 in exclude) {print ip, $0}
' /tmp/excludeList /tmp/includeList > /tmpipList 
```

这会读取一个数组的排除列表信息（作为数组键）——`NR==FNR`当 awk 从参数中读取第一个文件时，条件为真。然后，在读取包含文件时，如果当前行包含非空格字符并且它不存在于排除数组中，则打印它。

与 grep 等价：

```
grep -vxF -f /tmp/excludeList /tmp/includeList | while IFS= read -r line; do
    [[ -n "$line" ]] && printf "%s\t%s\n" "$ipList" "$line"
done > /tmp/ipList 
```

# differentiation - 如何区分结构化和非结构化 CDA？

> ID：14354794
> 
> 赞同：2
> 
> 时间：2013-01-16T09:15:50.947
> 
> 标签：differentiation, cda, hl7-cda, bluebutton

我正在处理 CDA 文档。我能够根据 CDA 模式验证 XML 文档并找出 xml 是否为 CDA。但如果是 CDA，那么 CDA 文件有两类。

1.  结构化 CDA（人类可读文本）
2.  非结构化 CDA（嵌入式 blob 或引用文档）

将 CDA 区分为结构化或非结构化文档的关键 XML 元素是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-17T10:21:26.390

Structured document look for:

```
ClinicalDocument/component/structuredBody 
```

Blob - unstructured look for:

```
ClinicalDocument/component/nonXmlBody 
```

Use nonXmlBody/text to include blob or reference using the ED datatype

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T04:08:40.647

您可以将 CDA 中的非结构化文档表示为 C-CDA (Consolidated CDA) 或 HITSP C62。如今，C62 得到了更普遍的支持；快速的[GitHub 搜索](https://github.com/search?q=2.16.840.1.113883.10.20.21.1.10&type=Code&ref=searchresults)没有显示任何非结构化的 C-CDA 实现。

*注：以下引用和示例来自非规范性规范。您可能需要 HL7 会员资格才能查看规范标准。*

## C-CDA：

来自[MDHT 模型文档](https://www.projects.openhealthtools.org/svn/mdht-models/trunk/doc/org.openhealthtools.mdht.uml.cda.consol.doc/classes/UnstructuredDocument.html)（需要帐户）：

> 1.  应仅包含一个 [1..1] templateId ( CONF:7710, CONF:10054 )，这样它
>     
>     
>     
>     一个。应仅包含一个 [1..1] @root="2.16.840.1.113883.10.20.21.1.10"

### 例子

```
<?xml version="1.0" encoding="UTF-8"?>
    <ClinicalDocument xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="urn:hl7-org:v3" xsi:schemaLocation="urn:hl7-org:v3 CDA.xsd">
    <realmCode code="US"/>
    <typeId root="2.16.840.1.113883.1.3"/>
    <templateId root="2.16.840.1.113883.10.20.21.1.10"/>
    <templateId root="2.16.840.1.113883.10.20.22.1.1"/>
    <code code="18842-5" codeSystem="2.16.840.1.113883.6.1" displayName="Discharge summarization note"/>
    <confidentialityCode codeSystem="2.16.840.1.113883.5.25" codeSystemName="ConfidentialityCode"/>
    <custodian>
        <assignedCustodian>
            <representedCustodianOrganization/>
        </assignedCustodian>
    </custodian>
</ClinicalDocument> 
```

## HITSP C62：

来自[MDHT 模型文档](https://www.projects.openhealthtools.org/svn/mdht-models/trunk/doc/org.openhealthtools.mdht.uml.cda.hitsp.doc/classes/UnstructuredDocument.html)（需要帐户）：

> 1.  应仅包含一个 [1..1] templateId ( ) 以便它
>     
>     
>     
>     一个。应仅包含一个 [1..1] @root="2.16.840.1.113883.3.88.11.62.1"

### 例子

```
<?xml version="1.0" encoding="UTF-8"?>
    <ClinicalDocument xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="urn:hl7-org:v3" xsi:schemaLocation="urn:hl7-org:v3 CDA.xsd">
    <realmCode code="US"/>
    <typeId root="2.16.840.1.113883.1.3"/>
    <!-- HITSP C62  template -->
    <templateId root="2.16.840.1.113883.3.88.11.62.1"/>
    <!-- HL7 General Header Constraints-->
    <templateId root="2.16.840.1.113883.10.20.3"/>
    <!-- IHE Medical Documents -->
    <templateId root="1.3.6.1.4.1.19376.1.5.3.1.1.1"/>
    <!-- IHE Scanned Documents (XDS-SD) -->
    <templateId root="1.3.6.1.4.1.19376.1.2.20"/>
    <code code="18842-5" codeSystem="2.16.840.1.113883.6.1" displayName="Discharge summarization note"/>
    <recordTarget>
        <patientRole>
            <patient/>
        </patientRole>
    </recordTarget>
</ClinicalDocument> 
```

您可以在 MDHT[自动化测试结果](http://www.cdatools.com/reports/html/org/openhealthtools/mdht/uml/cda/)中查看一些额外的 XML 示例。

对于接收组织来区分非结构化文档的内容，您应该将内容类型存储在 <code> 元素中，如示例中所示。内容类型也可以存储在 XDS 提交集中的 <classCode> 或 <typeCode> 元素中。

# php - PHP - 对象和数组 - 如何访问数组内的 stdClass 对象“名称”“值”对？

> ID：14354796
> 
> 赞同：1
> 
> 时间：2013-01-16T09:16:08.787
> 
> 标签：php, arrays, object

我想知道如何使用数组内的名称值对返回对象的值。我一直在尝试各种方法，坦率地说，我意识到我可能在这方面太过分了。我需要一些帮助来尝试在属性数组中获取 AirportsInformation_DataExtension 值。

```
stdClass Object
(
    [OverallStatus] => OK
    [RequestID] => 19e41b46-df68-47ba-8858-d728f3a92036
    [Results] => stdClass Object
        (
            [PartnerKey] => 
            [ObjectID] => 
            [Type] => DataExtensionObject
            [Properties] => stdClass Object
                (
                    [Property] => Array
                        (
                            [0] => stdClass Object
                                (
                                    [Name] => CampaignName
                                    [Value] => 20130107_FlightDealsHotelPricePoints
                                )

                            [1] => stdClass Object
                                (
                                    [Name] => StartDate
                                    [Value] => 1/7/2013 12:00:00 AM
                                )

                            [2] => stdClass Object
                                (
                                    [Name] => EndDate
                                    [Value] => 1/15/2013 5:59:59 AM
                                )

                            [3] => stdClass Object
                                (
                                    [Name] => CampaignType
                                    [Value] => FlightDeals
                                )

                            [4] => stdClass Object
                                (
                                    [Name] => LandingPage_ExpireDate
                                    [Value] => 1/15/2013 5:59:59 AM
                                )

                            [5] => stdClass Object
                                (
                                    [Name] => LandingPage_AutoRedirectOnExpire
                                    [Value] => True
                                )

                            [6] => stdClass Object
                                (
                                    [Name] => LandingPage_ExpireTargetURL
                                    [Value] => test
                                )

                            [7] => stdClass Object
                                (
                                    [Name] => BookByDate
                                    [Value] => 1/22/2013 12:00:00 AM
                                )

                            [8] => stdClass Object
                                (
                                    [Name] => TravelStartDate
                                    [Value] => 
                                )

                            [9] => stdClass Object
                                (
                                    [Name] => TravelEndDate
                                    [Value] => 
                                )

                            [10] => stdClass Object
                                (
                                    [Name] => FlightDeals_DataExtension
                                    [Value] => 20130107_DestinationFlightDeals
                                )

                            [11] => stdClass Object
                                (
                                    [Name] => FlightDeals_SortOrder_DataExtension
                                    [Value] => FlightDeals_DestinationSortOrder
                                )

                            [12] => stdClass Object
                                (
                                    [Name] => HotelDeals_DataExtension
                                    [Value] => 20130107_FlightDealsHotelPricePoints
                                )

                            [13] => stdClass Object
                                (
                                    [Name] => HotelDeals_All_DataExtension
                                    [Value] => 20130107_HotelPackageDeals_ALL
                                )

                            [14] => stdClass Object
                                (
                                    [Name] => HotelInformation_DataExtension
                                    [Value] => EmailHotelInformation
                                )

                            [15] => stdClass Object
                                (
                                    [Name] => AirportsInformation_DataExtension
                                    [Value] => Airports
                                )

                            [16] => stdClass Object
                                (
                                    [Name] => RoutesInformation_DataExtension
                                    [Value] => Routes
                                )

                            [17] => stdClass Object
                                (
                                    [Name] => DFP_DataExtension
                                    [Value] => ET_DestinationIframeSrc
                                )

                            [18] => stdClass Object
                                (
                                    [Name] => DeepLinkConnectorURL
                                    [Value] => http://www.somewebsite/BookingConnector.html?mode=run
                                )

                            [19] => stdClass Object
                                (
                                    [Name] => DefaultDestinationScenery
                                    [Value] => LAS
                                )

                            [20] => stdClass Object
                                (
                                    [Name] => DefaultHomeAirportCode
                                    [Value] => 
                                )

                            [21] => stdClass Object
                                (
                                    [Name] => FailSafeHomeAiportCode
                                    [Value] => 
                                )

                            [22] => stdClass Object
                                (
                                    [Name] => DFP_Campaign_Banner
                                    [Value] => True
                                )

                            [23] => stdClass Object
                                (
                                    [Name] => EmailID
                                    [Value] => 44388
                                )

                        )

                )

        )

) 
```

使用 foreach 循环，我能够打印出所有带有名称/值集的行

```
foreach ($results->Results->Properties->Property as $CurrentProp){
    print('<br>');
    print('Name: '.$CurrentProp->Name. ' Value: '.$CurrentProp->Value.'<br>');                    
}; 
```

可悲的是我无法通过那个。我只需要检索值。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T09:19:46.387

为了获取值，您可以遍历它们并测试名称匹配`AirportsInformation_DataExtension`：

```
foreach ($results->Results->Properties->Property as $CurrentProp){

    if($CurrentProp->Name == 'AirportsInformation_DataExtension')
    {
        echo 'The value is: ' . $CurrentProp->Value;
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:23:33.210

使用 MrCode 的上述[解决方案](https://stackoverflow.com/a/14354861/559221)，或者只使用`$results->Results->Properties->Property[15]->Value`if 的索引`AirportsInformation_DataExtension`always `15`。由于数组是`ordered`列表，因此索引很可能不会更改，除非从数组中删除/添加某些项目/

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T09:24:58.903

如果您需要能够根据名称获取所有值，则将其转换为关联数组可能会很有用，如下所示

```
$results->Results->Properties->PropertyArray = array();
foreach($results->Results->Properties->Property as $arrCurrentProperty) {
  $results->Results->Properties->PropertyArray[$arrCurrentProperty->Name] = $arrCurrentProperty->Value;
}; 
```

然后您可以稍后通过直接索引它们来获取值，即

```
echo 'The value is: ' . $results->Results->Properties->PropertyArray['AirportsInformation_DataExtension']; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T09:32:24.973

```
foreach ($results->Results->Properties->Property as $CurrentProp){
    $tempArr[$CurrentProp->Name] = $CurrentProp->Value;
}

echo $tempArr['AirportsInformation_DataExtension']; 
```

通过这个，您可以访问该对象的任何其他键。

# ios - 如何在单个函数调用中处理视图的连续推送/弹出

> ID：14354797
> 
> 赞同：0
> 
> 时间：2013-01-16T09:16:13.117
> 
> 标签：ios, cocoa-touch, uiview, uinavigationcontroller

问题看起来很疯狂，但我遇到了一个问题，我想像这样实现。考虑我目前有一个视图（A）显示，在一种情况下，我想弹出视图并显示其他视图，例如（ViewB）而不是 ViewA，所以我所做的是我在 ViewA 类中编写了一个函数来像这样弹出...

```
 [self.navigationController popViewControllerAnimated:YES]; 
```

在我正在推送新视图的函数调用旁边，现在应用程序正在崩溃说..嵌套推送可能会损坏您的导航控制器......

我在这里做错了什么......我们不能立即弹出并推送......如何处理这种情况......

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T10:05:57.377

您可以尝试以模态方式呈现您的观点并将其驳回。但是，如果您想通过 push 和 pop 来执行此操作，那么您可以执行以下操作： 在您的 View A 中弹出视图并设置一些可以在前一个视图控制器中访问的标志（即视图 A 被推送的视图）。接下来在前一个视图的 viewWillAppear 中检查这个标志并推送视图 B。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T05:36:46.247

如果你想立即弹出并推送，只需设置 popViewControllerAnimated:NO – Guo Luchuan

# mysql - 在mysql上将列更新为其默认值

> ID：14354798
> 
> 赞同：0
> 
> 时间：2013-01-16T09:16:18.280
> 
> 标签：mysql, sql-update, default-value

我的 Web 应用程序收到用户提交的数据库记录更新表单。

我想创建一个 sql，它将所有值更新为用户提交的内容，除了用户留空的值。对于那些，我希望将值设置为其数据库默认值。

有没有办法做到这一点？我正在寻找类似的东西

```
update my_table set col1=17, col2=DEFAULT, col3='some text' 
```

请注意，我正在更新现有行，因此我不能只从更新 sql 中取出一些列，因为它们之前可能有一个值，现在需要删除它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:24:55.283

有一个[DEFAULT(col_name)](http://dev.mysql.com/doc/refman/5.5/en/miscellaneous-functions.html#function_default)函数：

> 返回表列的默认值。如果该列没有默认值，则会导致错误。

```
UPDATE my_table SET col1=17, col2=DEFAULT(col2), col3='some text' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:25:39.843

显然，就这么简单，就像我写的那样：

```
update my_table set col1=17, col2=DEFAULT, col3='some text' 
```

[http://dev.mysql.com/doc/refman/5.0/en/update.html](http://dev.mysql.com/doc/refman/5.0/en/update.html)

# r - 为什么 RODBC 不会将数据帧上传到 SQL Server？

> ID：14354801
> 
> 赞同：6
> 
> 时间：2013-01-16T09:16:25.050
> 
> 标签：r, rodbc

```
library(RODBC)
con <- odbcDriverConnect("driver=SQL Server; server=name")
df <- data.frame(a=1:10, b=10:1, c=11:20) 
```

尝试上传数据框：

```
sqlSave(con, df, tablename='[MyDatabase].[MySchema].[MyTable]', rownames=F) 
```

`>Error in sqlColumns(channel, tablename) : ‘MyDatabase.MySchema.MyTable’: table not found on channel`

..或者先创建表，然后附加到它：

```
cmd <- "create table [MyDatabase].[MySchema].[MyTable] ([a]  int, [b] int, [c] int)"
sqlQuery(con, cmd)

sqlSave(con, df, tablename='[MyDatabase].[MySchema].[MyTable]', rownames=F, append=T) 
```

`>Error in sqlSave(con, df, tablename = "MyTable", rownames = F, : 42S01 2714 [Microsoft][ODBC SQL Server Driver][SQL Server]There is already an object named MyDatabase.MySchema.MyTable in the database. [RODBC] ERROR: Could not SQLExecDirect 'CREATE TABLE MyDatabase.MySchema.MyTable ("a" int, "b" int, "c" int)'`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T11:21:57.053

如果我添加括号，我也会收到错误消息。

如果我使用与数据库的连接字符串来确保我在正确的数据库（不是主数据库）中并执行该语句`sqlSave(con, df, tablename='dbo.MyTable4', rownames=F)`或者`sqlSave(con, df, tablename='MyTable5', rownames=F)`它可以工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-13T16:47:15.730

连接到 Microsoft SQL Server 时，必须使用 odbcDriverConnect 而不是 odbcConnect 来执行`sqlSave`语句等。只有 odbcDriverConnect 允许在连接字符串中指定特定的数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-04T15:35:25.187

RODBC 会查看 ODBC 服务器连接的**默认**文件夹，以查看您是否在此处具有写入权限（即使您要访问子目录）。如果您没有主权限，那么它会失败。

我必须在 R 中创建两个连接，一个用于从 master 读取，一个用于写入我的临时目录。这些是通过使用我本地计算机的 ODBC 管理（在 Win7 中）创建两个服务器连接来设置的：

-默认为写保护的主服务器目录，我用来提取只读数据。

-默认为我具有写入/删除权限的服务器目录。

换句话说，您的问题可以通过更改机器的 ODBC 连接并让 R 指向您将建立的新服务器连接（默认为您的写许可表的连接）来解决。

# php - 具有多个 FROM 表的 TableGateway

> ID：14354802
> 
> 赞同：5
> 
> 时间：2013-01-16T09:16:26.513
> 
> 标签：php, zend-framework2, tablegateway

我想`INNER JOIN`在 Zend2 的两个表之间做一个简单的操作。

具体来说，我想在 Zend2 中这样做：

`SELECT * FROM foo, bar WHERE foo.foreign_id = bar.id;`

我有一个`FooTable`：

```
class FooTable
{
  protected $tableGateway;

  public function __construct(TableGateway $tableGateway)
  {
    $this->tableGateway = $tableGateway;
  }

  public function get($id)
  {
    $rowset = $this->tableGateway->select(function (Select $select) {
      $select->from('foo');
    });
  }
} 
```

`$select->from('foo');`返回错误：

==>**由于此对象是在构造函数中使用表和/或模式创建的，因此它是只读的。**

因此，我无法调整我的 FROM 语句以匹配`FooTable`and之间的简单内部连接`BarTable`。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-17T01:56:53.100

我希望这会对您的旅程有所帮助，因为这是我的一个工作示例：

```
namespace Pool\Model;

use Zend\Db\TableGateway\AbstractTableGateway;
use Zend\Db\Sql\Select;

class IpaddressPool extends AbstractTableGateway
{
    public function __construct($adapter)
    {
        $this->table = 'ipaddress_pool';

        $this->adapter = $adapter;

        $this->initialize();
    }

    public function Leases($poolid)
    {
        $result = $this->select(function (Select $select) use ($poolid) {
            $select
                ->columns(array(
                    'ipaddress',
                    'accountid',
                    'productid',
                    'webaccountid'
                ))
                ->join('account', 'account.accountid = ipaddress_pool.accountid', array(
                    'firstname',
                    'lastname'
                ))
                ->join('product_hosting', 'product_hosting.hostingid = ipaddress_pool.hostingid', array(
                    'name'
                ))
                ->join('webaccount', 'webaccount.webaccountid = ipaddress_pool.webaccountid', array(
                    'domain'
                ))->where->equalTo('ipaddress_pool.poolid', $poolid);
        });

        return $result->toArray();
    }
} 
```

# javascript - 在匿名范围内使用 Javascript Prototype 对象

> ID：14354803
> 
> 赞同：0
> 
> 时间：2013-01-16T09:16:31.553
> 
> 标签：javascript, prototype

我有两种不同的方式在匿名范围内使用我的 Javascript 对象。

```
(function(){

    function MyObject() {
        this.MyMethod = function() {
            //code here
        }
    }

    first = new MyObject();
    first.MyMethod();
})(); 
```

和

```
(function(){

    function MyObject(){}; 

    MyObject.prototype.MyMethod = function() {
        //code here
    }

    first = new MyObject();
    first.MyMethod();
})(); 
```

我知道原型版本更好，但不确定使用匿名范围是否会对好处/缺点产生影响。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:28:15.053

在匿名范围内使用没有区别。

好处与在全局范围内使用相同。

如果您实例化 MyObject 的次数非常多，“原型”版本将避免在每个实例中复制该方法，因此将避免浪费资源（内存）。

如果您将 MyObject 实例化一两次，那么它在直接函数中与在全局范围内没有区别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T09:22:12.103

在这种情况下，我认为它们几乎是等价的。每次外部匿名函数执行时，两者都会被解释。

所以只要你`new MyObject()`在里面只调用一个，没关系。如果你不止一次调用它，你最好使用原型版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T09:23:34.093

我不认为这有什么不同。IIFE（立即调用函数表达式）是为了保护变量不泄漏到全局范围。

两者`MyObject`都是构造函数，但第一个具有作为该实例的唯一属性的函数（在调用时将被克隆`new`）。在第二个示例中，您向该构造函数的原型添加一个方法，使其可用于所有实例，这就是为什么第二个示例是首选 AFAIK 的原因。

# sublimetext2 - 如何在 SublimeText2 中查看构建系统实际运行的完整命令？

> ID：14354806
> 
> 赞同：2
> 
> 时间：2013-01-16T09:16:46.000
> 
> 标签：sublimetext2, build-system

我正在用 SublimeText2 编写自己的[构建系统](http://sublime-text-unofficial-documentation.readthedocs.org/en/latest/reference/build_systems.html)，但它不能正常工作。查看实际正在运行的完整命令以了解问题所在会很有用。有可能这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T19:56:33.837

在第一次编写新的构建规则时，我经常使用`"echo" rest of build rule`. 那不会运行您的命令，但会打印它。

# r - 在 RGB 系统中绘图

> ID：14354807
> 
> 赞同：2
> 
> 时间：2013-01-16T09:16:50.963
> 
> 标签：r, rgb

我有以下矩阵：

```
[1,] 0.41037159 0.035512698 0.29994815
[2,] 0.78614949 0.011315428 0.62326616
[3,] 0.42033801 0.061607952 0.25401746
[4,] 0.09617148 0.018400841 0.03194410
[5,] 0.20674738 0.006731245 0.04494770
[6,] 0.04557131 0.004572941 0.21202555
[7,] 0.34248003 0.049949400 0.15443408
[8,] 0.02531455 0.000000000 0.42509625
[9,] 0.90997863 0.997772243 0.22139140
[10,] 0.76310619 0.509855546 0.03353221
[11,] 0.00000000 0.012677219 0.46590562
[12,] 0.25175140 0.053030978 0.20539943
[13,] 0.45103356 0.066157072 0.25589777
[14,] 0.05925331 0.019370010 0.00000000
[15,] 0.47797323 0.028505669 0.50553749
[16,] 0.19155010 0.104653515 0.11193315
[17,] 0.51185644 0.135238576 0.10319339
[18,] 0.39407653 0.052845711 0.91779848
[19,] 0.13960324 0.004667373 0.06151135
[20,] 0.41404594 0.183680484 0.01052881
[21,] 0.16835070 0.045960588 0.99267994
[22,] 0.48752986 0.069917560 0.36119324
[23,] 0.37388790 0.030336825 0.21154492
[24,] 0.24967125 0.002199422 0.19477217 
```

这些值来自前三个 pca 轴的值。

我还有 24 个值的 x、y 坐标：

```
 x        y
ABO  6.722778 46.27972
ANG -2.889466 56.64358
AUB  2.848056 44.68500
BPN -2.980000 48.07000
BRU  8.658332 47.02055
CHA  4.275278 46.43444
GAS  1.638333 43.15556
GNS -2.533333 49.45000
HFD -2.708111 52.06120
HOL 10.133333 54.33333
JER -2.116667 49.20000
LMS  1.332222 45.77083
MAN -0.702778 47.82861
MAR -1.083611 46.42222
MON  5.875556 47.19194
NOR -0.325278 49.20444
NRC 11.056110 60.79917
OUL -6.016670 33.41667
PMT  7.666667 45.06667
PRP -4.096389 47.99667
RMG 15.661940 38.11139
SAL  2.495000 45.13889
TAR  5.953056 45.53611
VOS  7.385556 48.00917 
```

我想使用它们的坐标将 pca 的值绘制到 RGB 系统中。

我试过了 ：

```
rgb(pca_matrix) 
```

它确实给了我 RGB 系统的值，但我无法正确地弄清楚我应该如何使用这些坐标来绘制它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T09:27:03.083

假设您需要绘制不同颜色的点，首先，将`rgb()`输出保存为对象。

```
coll<-rgb(pca_matrix) 
```

然后使用例如函数`plot()`来绘制点并根据保存的对象设置颜色`coll`。您的第二个数据框的名称如`df`示例所示。

```
plot(df$x,df$y,col=coll,pch=16,cex=2) 
```

![在此处输入图像描述](../Images/b69205ff51f956e3be07e0aab08c38b3.png)

# javascript - 将函数直接链接到 Javascript 中新创建的对象实例

> ID：14354808
> 
> 赞同：1
> 
> 时间：2013-01-16T09:16:56.857
> 
> 标签：javascript

在我正在进行的传奇故事中，以了解更多关于面向对象的 Javascript - 我遇到了一个关于创建一个类来响应以下 API 的问题：

```
var foo = new bar().delay(750).start().then(onComplete);

var bar = function() {
    this.delay(function(per) {
      //...
    };
} 
```

比我更有经验的人可以描述如何创建可以对此做出反应的课程吗？我从未见过这样的链接，也无法在网上找到任何信息:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T09:18:28.107

这个链接是通过返回`this`你的函数来完成的：

```
this.delay = function(per) {
  //...
  return this;
}; 
```

如果你想坚持第一行代码，那么你的构造函数应该命名为 bar ：

```
var bar = function() {
    this.delay = function(per) {
      //...
      return this;
    };
    this.start = function() {
      ...
      return this;
    };
} 
```

看[演示](http://jsfiddle.net/pLCXM/)（打开控制台）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T09:22:48.817

`this`方法链接的秘诀是从您希望能够链接的每个方法返回。这允许下一个方法`this.method()`自动进行。您对 bar 对象的定义类似于以下外壳：

```
function bar() {
    // bar initialization code here
}

bar.prototype = {
    delay: function(amt) {
        // delay code here
        return(this);
    },
    start: function() {
        // start code here
        return(this);
    },
    then: function(fn) {
        // then code here
        fn();
        return(this);
    }
};

var foo = new bar().delay(750).start().then(onComplete); 
```

在您的示例中，`new bar()`执行并返回指向新`bar`对象的指针。使用该新对象指针，`.delay(750)`在该对象上调用该方法。然后该方法也返回对象，因此`.start()`在返回值上调用该方法，返回值`.delay(750)`仍然是同一个对象，依此类推......

# meteor - 除了包含的 mongo 数据存储之外，我如何添加和订阅其他实时数据源（例如，单独的 Riak DB）

> ID：14354810
> 
> 赞同：1
> 
> 时间：2013-01-16T09:17:03.873
> 
> 标签：meteor

我们考虑了一个系统，我们将按原样使用 Meteor 堆栈，但除此之外，我们还希望拥有我们想订阅的其他实时数据源。

我认为这将涉及为其他数据源（在本例中为 Riak DB，可能还有 RabbitMQ）实现 DDP

**额外的源将是只读的**，但我们需要根据数据库中的更改来更新内容，因此需要某种订阅。

所以我的问题是

1.  鉴于我们需要拥有多个实时数据源，实施 DDP 是否是正确的方法？
2.  我将从哪里开始为 Riak 实施 DDP（指针，如果可能的话）？
3.  考虑到额外的源是只读的，是否有一些更简单的方法可以从多个源实现实时更新？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T13:08:44.510

DDP 是客户端/服务器协议，而不是服务器到数据库协议。这不是我会采用的方法，尤其是对于只读数据。

相反，我会使用 Fiber 将 Riak node.js 库包装到 Meteor 包中。您可以查看 Mongo 驱动程序以获得一个复杂的示例，或者查看 HTTP 包以获得更简单的示例。（软件包位于 /usr/local/meteor/packages）

当节点驱动返回数据时，它会回调你的 Meteor 来填充集合。请参阅 In Meteor 中的代码片段[，如何从非 Mongo 集合中删除项目？](https://stackoverflow.com/questions/13635312/in-meteor-how-to-remove-items-from-a-non-mongo-collection)

# api - 从 Google Play 获取应用详细信息

> ID：14354816
> 
> 赞同：5
> 
> 时间：2013-01-16T09:17:24.593
> 
> 标签：api, google-play

我想知道各种应用统计网站如何从 Google Play 获取应用详细信息。由于 GP 没有公共 API。Appaware.com 就是一个例子——他们有 Google Play 应用程序的完整详细信息。

一个可能的解决方案是抓取，但它不起作用，因为当您开始向他们发送数百个请求时，Google 会阻止您。

有任何想法吗？

ps“Google Play Developers API”不是一个选择，因为它只允许您访问您的应用程序的应用程序详细信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T09:20:16.480

他们使用 Android 设备使用的移动 API（即使用[此库](http://code.google.com/p/android-market-api/)）或抓取 Google Play 网站。这两种方法都受到速率限制，因此它们会在请求之间暂停。

移动设备 API 完全没有文档记录，并且很难对其进行编程。我建议刮。

没有可以使用的官方 API 或提要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-13T13:14:19.300

Android Marketing API 用于从谷歌商店获取所有应用程序的详细信息，您可以在此处查看：[https ://code.google.com/p/android-market-api/](https://code.google.com/p/android-market-api/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-04T14:50:48.590

不幸的是，Google Play（以前称为 Android Market）没有公开官方 API。

要获取您需要的数据，您可以开发自己的 HTML 爬虫，解析页面并提取您需要的应​​用元数据。此主题已在其他问题中涵盖，例如[此处](https://stackoverflow.com/questions/17002181/crawling-the-google-play-store?rq=1)。

如果您不想自己实现所有这些（正如您提到的那样，这是一个复杂的项目），您可以使用第三方服务通过基于 JSON 的 API 访问 Android 应用程序元数据。

例如，[42matters.com](https://42matters.com/?utm_source=stackoverflow.com&utm_medium=Referral&utm_campaign=14354816)（我工作的公司）提供了适用于 Android 和 iOS 的 API，您可以[在此处](https://42matters.com/app-market-data?utm_source=stackoverflow.com&utm_medium=Referral&utm_campaign=14354816)查看更多详细信息。

端点范围从“查找”（获取一个应用程序的元数据，可能是您需要的）到“搜索”，但我们还公开了来自领先应用商店的“排名历史”和其他统计数据。我们为所有受支持的功能提供了大量文档，您可以在左侧面板中找到它们：[42matters docs](https://42matters.com/docs/overview?utm_source=stackoverflow.com&utm_medium=Referral&utm_campaign=14354816)

我希望这会有所帮助，否则请随时与我联系。我非常了解这个行业，可以为您指明正确的方向。

问候，

安德烈亚

# jqplot - jqplot：宽度、高度、标签位置、最小值和最大值

> ID：14354817
> 
> 赞同：2
> 
> 时间：2013-01-16T09:17:24.637
> 
> 标签：jqplot

我是 jqPlot 的新手，我目前正在使用它来生成图表，所以我需要你帮助解决以下一些问题

1.  我想做一个这样的图表[http://picturepush.com/public/11972209](http://picturepush.com/public/11972209) 但我不想显示 X 轴的最小值和最大值（最小值 = 99，最大值 = 106）。（没有其他变化！）

2.  如何修复图表“矩形”的* *W* *idth 和 * *H *eigh？*（独立与标签刻度，轴标签，图例......）

3.  如何设置 xaxis、yaxis 标签的位置？

多谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T13:25:59.630

关于您的问题：

1.  您可以使用`ticks`选项设置所需的刻度：[http ://www.jqplot.com/docs/files/jqplot-core-js.html#Axis.ticks](http://www.jqplot.com/docs/files/jqplot-core-js.html#Axis.ticks)
2.  这是我几个月前问的一个相关问题：[JqPlot：为不包括 y 轴标签的图形区域设置固定高度值](https://stackoverflow.com/questions/11229577/jqplot-set-a-fix-height-value-for-the-graph-area-not-including-y-axe-labels)
3.  你应该看看这里：[http ://www.jqplot.com/docs/files/jqplot-axisTickRenderer-js.html#](http://www.jqplot.com/docs/files/jqplot-axisTickRenderer-js.html#)

# python - groupby 多次使用相同的键

> ID：14354819
> 
> 赞同：4
> 
> 时间：2013-01-16T09:17:38.617
> 
> 标签：python, iterator, group-by

我不认为我发现了一个错误，但它对我来说看起来不正常。

```
from itertools import groupby
from operator import itemgetter
c=[((u'http://www.example.com', u'second_value'), u'one'), 
   ((u'http://www.example.com', u'second_value'), u'two'), 
   ((u'http://www.hello.com', u'second_value'), u'one'), 
   ((u'http://www.example.com', u'second_value'), u'three'), 
   ((u'http://www.hello.com', u'second_value'), u'two')]
b= groupby(c, key=itemgetter(0))
for unique_keys, group in b:
    print unique_keys 
```

产量：

```
(u'http://www.example.com', u'second_value')
(u'http://www.hello.com', u'second_value')
(u'http://www.example.com', u'second_value')
(u'http://www.hello.com', u'second_value') 
```

有什么解释吗？（我期待只有两个不同的键）。如果有区别，我正在使用 python 2.7.1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T09:18:38.463

迭代需要已经排序（在相同的键功能上）：

```
from itertools import groupby
from operator import itemgetter
c=[((u'http://www.example.com', u'second_value'), u'one'), 
   ((u'http://www.example.com', u'second_value'), u'two'), 
   ((u'http://www.hello.com', u'second_value'), u'one'), 
   ((u'http://www.example.com', u'second_value'), u'three'), 
   ((u'http://www.hello.com', u'second_value'), u'two')]
b= groupby(sorted(c,key=itemgetter(0)), key=itemgetter(0))
for unique_keys, group in b:
    print unique_keys 
```

出去：

```
(u'http://www.example.com', u'second_value')
(u'http://www.hello.com', u'second_value') 
```

# mysql - 如何在 MySQL 中通过查询优化获得组合结果？

> ID：14354828
> 
> 赞同：0
> 
> 时间：2013-01-16T09:17:58.167
> 
> 标签：mysql, query-optimization, union

我有桌子，

```
id  | OpenDate             |  CloseDate
------------------------------------------------
1   | 2013-01-16 07:30:48  |  2013-01-16 10:49:48
2   | 2013-01-16 08:30:00  |  NULL 
```

我需要得到如下组合结果

```
 id | date                 |   type
 ---------------------------------
 1  | 2013-01-16 07:30:48  |  Open
 1  | 2013-01-16 10:49:48  |  Close
 2  | 2013-01-16 08:30:00  |  Open 
```

我使用 UNION 来获得高于输出（我们可以在没有 UNION 的情况下实现吗？）

```
SELECT id,date,type FROM(
   SELECT id,`OpenDate` as date, 'Open' as 'type' FROM my_table
  UNION ALL
   SELECT id,`CloseDate` as date, 'Close' as 'type' FROM my_table
                       )AS `tab` LIMIT 0,15 
```

我得到了想要的输出，但现在在性能方面——>我的表中有 4000 条记录，通过 UNION 合并并提供大约 8000 条记录，这使得加载站点非常慢（超过 13 秒）。如何优化此查询以加快输出？

我也在子查询中尝试过`LIMIT`，如果我`LIMIT`在子查询中使用，分页偏移量无法正常工作。请帮我解决这个问题。

**更新**

解释结果

```
id   select_type  table     type   key    key_len    ref     rows   Extra
1    PRIMARY     <derived2> ALL   NULL      NULL      NULL   8858    
2    DERIVED     orders     index OpenDate   4        NULL   4588   Using index
3    UNION       orders     index CloseDate  4        NULL   4588   Using index
NULL UNION RESULT<union2,3> ALL   NULL      NULL      NULL   NULL 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:10:18.577

我会做类似以下的事情：

```
SELECT
  id,
  IF(act, t1.OpenDate, t1.CloseDate) as `date`,
  IF(act, 'Open', 'Close') as `type`
FROM my_table t1
JOIN (SELECT 1 as act UNION SELECT 0) as _
JOIN my_table t2 USING (id); 
```

# c# - 需要帮助以使用 xmltextWriter 在 C# 中编写 XML 开始元素

> ID：14354829
> 
> 赞同：1
> 
> 时间：2013-01-16T09:18:03.407
> 
> 标签：c#, xml

我写这样的代码

```
 XmlDocument xdocMulticom = new XmlDocument();
  StringWriter strwMultiXml = new StringWriter();
  XmlTextWriter xmlMultiAirInfo = new XmlTextWriter(strwMultiXml);
  xmlMultiAirInfo.Formatting = Formatting.None;

  xmlMultiAirInfo.WriteStartDocument();
  xmlMultiAirInfo.WriteStartElement("ns", "cancelreservation", "http://www.opentravel.org/ota/2003/05");
  xmlMultiAirInfo.WriteStartElement("OTA_VehCancelRQ");
  xmlMultiAirInfo.WriteAttributeString("xmlns", "http://www.opentravel.org/ota/2003/05");
  xmlMultiAirInfo.WriteAttributeString("xmlns", "xsi", null, "http://www.w3.org/2001/XMLSchema-instance");
  xmlMultiAirInfo.WriteAttributeString("Version", "1.002");
  xmlMultiAirInfo.WriteAttributeString("PrimaryLangID", "EN");
  xmlMultiAirInfo.WriteAttributeString("ReqRespVersion", "2.001");
  xmlMultiAirInfo.WriteStartElement("POS");
  xmlMultiAirInfo.WriteStartElement("Source");
  xmlMultiAirInfo.WriteStartElement("RequestorID");
  xmlMultiAirInfo.WriteAttributeString("Type", "4");
  xmlMultiAirInfo.WriteAttributeString("ID", "F0F4CCE4A9C24355");
  xmlMultiAirInfo.WriteEndElement();
  xmlMultiAirInfo.WriteEndElement();
  xmlMultiAirInfo.WriteEndElement();
  xmlMultiAirInfo.WriteStartElement("VehCancelRQCore");
  xmlMultiAirInfo.WriteAttributeString("CancelType", "Cancel");
  xmlMultiAirInfo.WriteStartElement("UniqueID");
  xmlMultiAirInfo.WriteAttributeString("Type", "14");
  xmlMultiAirInfo.WriteAttributeString("ID", "N2169641");
  xmlMultiAirInfo.WriteStartElement("PersonName");
  xmlMultiAirInfo.WriteElementString("GivenName", "Sandra");
  xmlMultiAirInfo.WriteElementString("Surname", "Jhonsan");
  xmlMultiAirInfo.WriteEndElement();
  xmlMultiAirInfo.WriteEndElement();                         
  xmlMultiAirInfo.WriteEndElement();
  xmlMultiAirInfo.WriteStartElement("VehCancelRQInfo");
  xmlMultiAirInfo.WriteStartElement("Vendor");
  xmlMultiAirInfo.WriteAttributeString("Code", "ZR");
  xmlMultiAirInfo.WriteEndElement();                          
  xmlMultiAirInfo.WriteEndElement();
  xmlMultiAirInfo.WriteEndElement();
  xmlMultiAirInfo.WriteEndElement();
  xdocMulticom.LoadXml(strwMultiXml.ToString()); 
```

生成如下输出：

```
<?xml version="1.0" encoding="utf-16"?>
<ns:cancelreservation xmlns:ns="http://www.opentravel.org/ota/2003/05">
  <OTA_VehCancelRQ xmlns="http://www.opentravel.org/ota/2003/05" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" Version="1.002" PrimaryLangID="EN" ReqRespVersion="2.001">
    <POS>
      <Source>
        <RequestorID Type="4" ID="F0F4CCE4A9C24355" />
      </Source>
    </POS>
    <VehCancelRQCore CancelType="Cancel">
      <UniqueID Type="14" ID="N2169641">
        <PersonName>
          <GivenName>Sandra</GivenName>
          <Surname>Jhonsan</Surname>
        </PersonName>
      </UniqueID>
    </VehCancelRQCore>
    <VehCancelRQInfo>
      <Vendor Code="ZR" />
    </VehCancelRQInfo>
  </OTA_VehCancelRQ>
</ns:cancelreservation> 
```

这对我来说没问题，但我需要它是这样的：

```
<?xml version="1.0" encoding="utf-16"?>
<ns:cancelreservation>
  <OTA_VehCancelRQ xmlns="http://www.opentravel.org/ota/2003/05" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" Version="1.002" PrimaryLangID="EN" ReqRespVersion="2.001">
    <POS>
      <Source>
        <RequestorID Type="4" ID="F0F4CCE4A9C24355" />
      </Source>
    </POS>
    <VehCancelRQCore CancelType="Cancel">
      <UniqueID Type="14" ID="N2169641">
        <PersonName>
          <GivenName>Sandra</GivenName>
          <Surname>Jhonsan</Surname>
        </PersonName>
      </UniqueID>
    </VehCancelRQCore>
    <VehCancelRQInfo>
      <Vendor Code="ZR" />
    </VehCancelRQInfo>
  </OTA_VehCancelRQ>
</ns:cancelreservation> 
```

有没有办法改变它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:39:07.710

如我所见，仅在第一个节点的名称空间中有所不同...（或者这是我的错误？）

替换这一行：

```
xmlMultiAirInfo.WriteStartElement("ns", "cancelreservation", "http://www.opentravel.org/ota/2003/05"); 
```

有了这个。

```
xmlMultiAirInfo.WriteStartElement("ns", "cancelreservation", ""); 
```

好吧，C# 做得很好。因为您的元素不知道这样的前缀。在您的示例中，“cancelreservation”不是根元素，但如果它是根元素，则必须存在 xmlns 属性。

# java - Hibernate - EntityManager 管理

> ID：14354830
> 
> 赞同：0
> 
> 时间：2013-01-16T09:18:06.077
> 
> 标签：java, hibernate, jpa, entitymanager

我正在将 JPA-Hibernate 应用程序从 Java EE 6 环境移动到 Tomcat 7 环境。

该应用程序有几个 DAO 类在`EntityManager`. 在 Java EE 环境中，我可以使用`@PersistenceContext`注解注入它，并让容器管理`EntityManager`. 现在我必须手动完成，我想知道该怎么做。

实体管理者应该是唯一的吗？如果是这样，它可以是一个`static final`在启动时创建并且每个 DAO 类都使用的字段吗？它是否有一个涉及关闭它然后重新打开它的生命周期？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T09:38:28.307

不幸的是，您必须手动完成。我通常这样做的方式是定义一个特殊的类：

```
public class EMF {
  private static EntityManagerFactory factory = Persistence.createEntityManagerFactory("name");

  public static EntityManager getEntityManager() {
    return factory.createEntityManager();
  }
} 
```

因此，每次您需要 EntityManager 时，您都必须手动创建它。您还需要处理事务：

```
EntityManager em = EMF.getEntityManager();
EntityTransaction et = em.getTransaction();
try {
  MyEntity my = new MyEntity();
  et.begin();
  try {
    em.persist(my);
    et.commit();
  } catch (Exception ex) { 
    if (et.isActive())
      et.rollback();
  }
} finally {
  em.close();
} 
```

# jquery - 在 iPhone5 上滚动后触摸端上的 jQuery 动画

> ID：14354833
> 
> 赞同：1
> 
> 时间：2013-01-16T09:18:17.950
> 
> 标签：jquery, iphone, jquery-animate, iphone-5

iphone 5 上的 jQuery animate() 函数有一个非常奇怪的问题。场景：

我将事件处理程序附加到元素上的 touchend 事件，开始动画。通常这工作得很好。但是一旦我在这个元素上滑动一次滚动页面，动画功能就不再动画了（在所有未来的手势上）。触发事件并调用处理程序，但 animate 不执行任何操作。我尝试使用 jQuery 移动事件，现在使用 oldscool element.attachaddEventListener 都导致相同的结果。有趣的是：

1.  如果我将它附加到 touchstart，它会在滚动之前和之后工作（但我需要 touchend 事件！）
2.  如果我做一些没有动画的事情，例如切换，它也可以工作。

一个小的演示页面：

```
<!DOCTYPE html>
<html>
<head>
    <title>Testpage</title>
    <meta content="width=device-width, initial-scale=1.0, user-scalable=yes" name="viewport">
    <script src="/3rdParty/scripts/jquery/jquery-1.8.3.js" type="text/javascript"></script>
    <style>
        body { padding: 10px;}
        #mover { position: relative; width: 100px; background-color: red; color: #fff; padding: 5px; }
        #hider { width: 100%; overflow: hidden; }
        #touchme {  border:1px solid #808080; margin-bottom:10px;line-height: 50px; text-align:center;}
    </style>
    <script>
        $(document).ready(function(){
            var elem = document.getElementById('touchme');
            elem.addEventListener('touchend', positionHandlerEnd, false );
            elem.addEventListener('mouseup', positionHandlerEnd, false );
        });
    </script>
    <script>
        function positionHandlerEnd(e) {
            $('#mover').animate({left: '+=40px'});
            e.preventDefault();
            return;
        }

    </script>
</head>
<body>
<div id="touchme">Touch me</div>
<div id="hider"><div id="mover">This moves</div></div>
<div> dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. Nulla consequat massa quis enim. Donec pede justo, fringilla vel, aliquet nec, vulputate</div>
<div> dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. Nulla consequat massa quis enim. Donec pede justo, fringilla vel, aliquet nec, vulputate</div>
<div> dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. Nulla consequat massa quis enim. Donec pede justo, fringilla vel, aliquet nec, vulputate</div>
</body>
</html> 
```

任何想法这里到底发生了什么？或者任何解决方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T20:07:49.973

As I was struggling with the same problem, I stumbled upon a Safari 'setTimeout bug'. It appears that Safari (under IOS6) doesn't execute animations or timers when scrolling. I have no idea why this influences animations *after* scrolling, but [this guy](http://www.linkedin.com/groups/iOS-6-webkit-timer-bug-3007928.S.166494491?view=&gid=3007928&type=member&item=166494491&report.success=bpjT6tlJ5SCXK7jVGJgvID7B3E2wRVzdwQMdlhnkVkIweVxlMLpd3csjfuzTYAdmwq64VSkkdJ-sR3hzN-mmW_uyV8quM3ZmaN5FXWnkX3IwegmAeQfVpMGudumsR3Zd7mwVXPGuVG76UkldwLn45cGs3GV6RImliq6SX-XsXHEyeV44iN913a5_3JeDeuV4ihOSZrXVy_2) wrote a little script that solved the problem for me. Be sure to check it out:

[https://gist.github.com/3755461](https://gist.github.com/3755461)

I'm not 100% sure if it will cause errors in other browsers (didn't encounter any, *yet*), but it saved my day and I'm glad to share it with you.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T08:30:16.730

我无法用您的代码复制问题，但我现在遇到了类似的问题。

我有一个覆盖按钮，可以在图像的左侧位置运行动画，仅用于测试 .animate 是否有效。

我还有一个 touchend eventListener，它调用一个函数，该函数使用 .animate 在触摸后将 img 捕捉到特定位置。

.animate 函数在 safari 冻结 DOM 以滚动后不再起作用，但其他一切都起作用，例如 .css。此外，如果 touchend 侦听器函数不调用 .animate，则在滚动后按下覆盖按钮时，.animate 函数会继续工作。

我已经完成了简化代码的动作，但这个问题仍然存在。如果我使用 js addEventListener 或 jquery .bind，这无关紧要。所以我开始慢慢地通过 jquery 代码添加日志语句（打印到页面中的 div）并注意到 jQuery.now() 函数在滚动后停止返回当前日期，这实际上运行了一个 js 函数：new Date()。我想知道这是否与 Safari 冻结 DOM 有关，但我似乎找不到更多信息。这似乎没有在android上发生。

在我寻找答案的那一刻对我来说很奇怪的是，在另一个 js 文件中，在同一页面上工作，我可以在滚动后获取日期。

I'm seeing that if the function called on the touchend event does not do an animation, the animate call on this button continues to work. Otherwise it does not.

The following url has a touchend event function that does NOT run .animate :

[http://selfconstruc.tv/code/jquery-touchmove/test1.html](http://selfconstruc.tv/code/jquery-touchmove/test1.html)

The following url has a touchend event function that DOES run .animate :

[http://selfconstruc.tv/code/jquery-touchmove/test2.html](http://selfconstruc.tv/code/jquery-touchmove/test2.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T18:34:11.727

I just found a solve. It's a bit of a hack imho, but it worked for me. In the touchend event function, do a setTimeout that calls another function which does the animation.
$("div").bind("touchend",TouchEnd); function TouchEnd (e) { timeout = setTimeout(runanimation, 10); }

It's enough of a delay to avoid the issue of the jquery animate function ceasing to work in safari after touchend / scroll.

# c++ - libjson 错误地解析整数

> ID：14354841
> 
> 赞同：0
> 
> 时间：2013-01-16T09:18:28.837
> 
> 标签：c++, c, json

我正在尝试解析以下 JSON 数据（使用 JSON.stringify 创建）。我正在使用 libJSON 7。我的代码如下：

```
wstring jsonstr = _T("{\"Id\":0,\"Note\":\"\",\"Username\":\"user\",\"Password\":\"pass\",\"Enabled\":true,\"ProfileId\":\"\",\"UserAgent\":\"\",\"LastUsage\":0,\"Failures\":0,\"Abuses\":0}");
JSONNode jsondata = libjson::parse(jsonstr);
auto i = jsondata.begin();
auto num = i->as_float();
int idIsNan = _isnan(num);// Nonzero here 
```

现在我希望 num == (double)0，但是，它等于 1.#QNAN00000000000。有谁知道如何绕过这个错误？此外，如果我使用 as_int 而不是 as_float，它会正确解析数据；所以，看起来这个错误只发生在 as_float 方法上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:53:09.193

我在这里猜测了一下，因为您没有显示所有相关代码：

您的 json 结构是`data`，`json`似乎是您正在解析的字符串。所以`json.begin()`将是该字符串中的第一个字符，而不是第一个 json 值。由于第一个字符是双引号，因此不能将其解析为浮点数->您会看到胡说八道。也许这就是你想要的：

```
JSONNode data = libjson::parse(json);
auto i = data.begin();  //<-- data, not json!
auto num = i->as_float(); 
```

请记住下次提供所有相关代码，包括所有使用变量的定义（在本例中为“json”）。

PS：您发布的 json 字符串以不匹配结尾`}`- 这可能会使解析器感到困惑。

# java - REST Web 服务是否支持用于提供 zip 文件的范围标头？

> ID：14354844
> 
> 赞同：1
> 
> 时间：2013-01-16T09:18:33.833
> 
> 标签：java, web-services, rest, download

我正在使用 Spring/Apache CXF 在 Java 中开发一个 Rest Full Web 服务，该服务将负责为 Web 服务客户端提供一个压缩文件。

Web 服务客户端也将用 java 编写，它是 JavaFX 桌面应用程序的一部分。

这个文件的大小可以是 20MB。我想启用恢复下载支持。这样如果客户端下载中断。它可以从损坏的位置恢复下载。

休息服务是否支持范围标头？任何指针？

找到相关问题，但没有对查询的最终答复。

[使用 Java 在 REST Web 服务中启用恢复中断下载](https://stackoverflow.com/questions/10284946/enable-resuming-interrupt-download-in-rest-web-service-using-java)

谢谢穆克什·卡塔里亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:21:32.450

绝对 - 您可以自由指定您喜欢的任何范围单位。

来自 RFC 2616：

> 3.12 范围单位
> 
> HTTP/1.1 允许客户端请求仅
> 响应实体的一部分（范围）包含在响应中。HTTP/1.1 在 Range（第 14.35 节）和 Content-Range（第 14.16 节）
> 标头字段中使用范围单位。一个实体可以根据各种结构单元分解为子范围。
> 
> ```
>  range-unit       = bytes-unit | other-range-unit
>   bytes-unit       = "bytes"
>   other-range-unit = token 
> ```
> 
> HTTP/1.1 定义的唯一范围单位是“字节”。HTTP/1.1
> 实现可以忽略使用其他单位指定的范围。

# hibernate - JPA ConstraintViolation 与回滚

> ID：14354849
> 
> 赞同：4
> 
> 时间：2013-01-16T09:18:47.177
> 
> 标签：hibernate, jpa, eclipselink

我想我刚刚发现两种不同的 JPA 实现对于违反约束和回滚的工作方式不同。

```
@Test(expectedExceptions = @@.class) // CVE or RB?
public void testXXX() {
    final EntityManager manager = LocalPU.createEntityManager();
    try {
        final EntityTransaction transaction = manager.getTransaction();
        transaction.begin();
        try {
            manager.persist(<wrong>); // this is where CVE coming from
            transaction.commit();     // this is where RB coming from
        } catch (RollbackException re) {
            // <---------------------------------------- hibernate here
            throw re;
        } catch (ConstraintViolationException cve) {
            // <---------------------------------------- eclipselink here
            transaction.rollback();
            throw cve;
        } catch (Exception e) {
            transaction.rollback();
            e.printStackTrace(System.err);
            Assert.fail(e.getMessage());
        }
    } finally {
        manager.close();
    }
} 
```

哪个实施工作正确？

# 更新

## NameMustNotBeNull.java

```
@Entity
@Table(name = "NAME_MUST_NOT_BE_NULL")
public class NameMustNotBeNull {

    protected NameMustNotBeNull() {
        this(null);
    }

    public NameMustNotBeNull(final String name) {
        super();

        this.name = name;
    }

    @Id
    @GeneratedValue(strategy = GenerationType.TABLE,
                    generator = "NAME_MUST_NOT_BE_NULL_ID_GENERATOR")
    @TableGenerator(name = "NAME_MUST_NOT_BE_NULL_ID_GENERATOR",
                    table = PrimaryKeyValue.TABLE,
                    pkColumnName = PrimaryKeyValue.PK_COLUMN_NAME,
                    valueColumnName = PrimaryKeyValue.VALUE_COLUMN_NAME,
                    pkColumnValue = "NAME_MUST_NOT_BE_NULL_ID")
    @NotNull
    @XmlTransient
    private Long id;

    @Basic(optional = false)
    @Column(name = "NAME", nullable = false)
    @NotNull
    private String name;
} 
```

## NameMustNotBeNullTest.java

```
public class NameMustNotBeNullTest {

    @Test(expectedExceptions = RollbackException.class)
    public void testNullName() {

        final EntityManager manager = LocalPU.createEntityManager();
        try {
            final EntityTransaction transaction = manager.getTransaction();
            transaction.begin();
            try {
                final NameMustNotBeNull entity = new NameMustNotBeNull(null);
                try {
                    manager.persist(entity);
                } catch (ConstraintViolationException cve) {
                    System.out.println(cve.toString());
                }
                transaction.commit();
                Assert.fail("persisted with null name");
            } catch (RollbackException re) {
                System.out.println(re.toString());
                throw re;
            } catch (Exception e) {
                transaction.rollback();
                e.printStackTrace(System.err);
                Assert.fail(e.getMessage());
            }
        } finally {
            manager.close();
        }
    }
} 
```

## 持久性.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">

  <persistence-unit name="localPU" transaction-type="RESOURCE_LOCAL">

    <!-- I'm testing with one of following providers uncommented -->
    <!--<provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>-->
    <provider>org.hibernate.ejb.HibernatePersistence</provider>

    <class>....persistence.NameMustNotBeNull</class>

    <properties>

      <property name="javax.persistence.jdbc.driver"
                value="org.apache.derby.jdbc.EmbeddedDriver"/>
      <property name="javax.persistence.jdbc.url"
                value="jdbc:derby:memory:corrsDB;create=true"/>
      <!--<property name="javax.persistence.jdbc.user" value=""/>-->
      <!--<property name="javax.persistence.jdbc.password" value=""/>-->

      <!-- eclipselink -->
      <property name="eclipselink.create-ddl-jdbc-file-name" value="target/createDDL.jdbc"/>
      <property name="eclipselink.ddl-generation" value="create-tables"/>
      <property name="eclipselink.ddl-generation.output-mode" value="both"/>
      <property name="eclipselink.drop-ddl-jdbc-file-name" value="target/dropDDL.jdbc"/>
      <property name="eclipselink.logging.level.sql" value="INFO"/>
      <property name="eclipselink.logging.parameters" value="false"/>
      <property name="eclipselink.target-database" value="Derby"/>

      <!-- hibernate -->
      <property name="hibernate.archive.autodetection" value="class" />
      <property name="hibernate.format_sql" value="true" />
      <property name="hibernate.hbm2ddl.auto" value="create-drop"/>
      <property name="hibernate.show_sql" value="false" />
      <property name="hibernate.dialect" value="org.hibernate.dialect.DerbyDialect"/>

    </properties>
  </persistence-unit>
</persistence> 
```

## org.eclipse.persistence.jpa.PersistenceProvider

```
Running ...NameMustNotBeNullTest
1월 17, 2013 11:45:14 오전 org.hibernate.validator.internal.util.Version <clinit>
INFO: HV000001: Hibernate Validator 4.3.0.Final
javax.validation.ConstraintViolationException: Bean Validation constraint(s) violated while executing Automatic Bean Validation on callback event:'prePersist'. Please refer to embedded ConstraintViolations for details.
javax.persistence.RollbackException: Transaction rolled back because transaction was set to RollbackOnly. 
```

## org.hibernate.ejb.HibernatePersistence

```
Running ...NameMustNotBeNullTest
1월 17, 2013 11:50:14 오전 org.hibernate.validator.internal.util.Version <clinit>
INFO: HV000001: Hibernate Validator 4.3.0.Final
javax.persistence.RollbackException: Error while committing the transaction 
```

如您所见，两个提供者似乎都启用了 Bean Validation。

EclipseLink 抛出 CVE`EntityManager#persist()`并标记回滚。
并且 Hibernate 将 RB 抛出`EntityTransaction#commit()`。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-11T10:49:36.770

以下是有关您的行为的更详细信息。

根据[JPA 2 规范](http://download.oracle.com/otn-pub/jcp/persistence-2.0-fr-eval-oth-JSpec/persistence-2_0-final-spec.pdf)（第 102 页）

> 如果 validate 方法返回的 ConstraintViolation 对象集不为空，则持久性提供程序必须抛出包含对返回的 ConstraintViolation 对象集的引用的 javax.validation.ConstraintViolationException，并且必须将事务标记为回滚。

从[休眠文档](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html_single/#d5e9831)

> 如果发现实体无效，则约束违规列表由 ConstraintViolationException 传播，该异常公开了一组 ConstraintViolation。
> 
> 当在提交时发生冲突时，此异常被包装在 RollbackException 中。否则， [由 Hibernate Validator] 返回 ConstraintViolationException（例如在调用 flush() 时。）

此外，来自 jpa 2 规范（第 101 页）

> 默认情况下，默认的 Bean Validation 组（组 Default）将根据 pre-persist 和 pre-update 生命周期验证事件进行验证

将所有这些放在一起，我有点困惑，因为在我看来 HibernatePersistenceProvider 的行为不遵循 JPA 2 规范，因为：

*   必须在“pre-presist”上执行验证
*   持久性提供者**必须抛出**ConstraintViolationException

显然，在您的情况下，调用时（以及使用 HibernatePersistenceProvider 时）`ConstraintViolationException`不会抛出。`persist`

所以根据我的理解并回答你的问题：

*   eclipselink是对的
*   休眠是错误的

（注：希望别人能证实或不同意我的分析）

* * *

**重要编辑**

我对自己的结论感到困惑。所以我试图重现自己 OP 描述的行为，但我无法立即重现这种行为。

我所做的与OP所描述的非常相似：

*   设置一个小项目，其中一个实体有一个`@NotNull`字段。
*   试图`@NotNull`在一个简单的测试中坚持（）一个字段为空的实例。
*   断言`persist()`操作抛出`javax.validation.ConstraintViolationException`+ 标记事务为`rollback only`
*   使用 eclipselink 作为持久性提供程序时执行此操作 --> 成功
*   使用休眠作为持久性提供者时这样做->成功

我的测试和描述 OP 的测试之间的主要区别是 id 生成。在我成功的测试中，我使用了一个简单的`@GeneratedValue`.

将 id 生成策略更改为：

```
@GeneratedValue(strategy = GenerationType.TABLE,
        generator = "NAME_MUST_NOT_BE_NULL_ID_GENERATOR")
@TableGenerator(name = "NAME_MUST_NOT_BE_NULL_ID_GENERATOR",
        pkColumnValue = "NAME_MUST_NOT_BE_NULL_ID") 
```

我发现了 OP 描述的确切行为：

*   使用eclipselink时`javax.validation.ConstraintViolationException`抛出的。`persist()`
*   `persist()`使用休眠时根本不会抛出异常。

所以，当使用 Hibernate + `strategy = GenerationType.TABLE`: 时，行为是不同的。我很确定它不遵循 JPA2 规范。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T13:08:46.697

两者都是正确的。JPA 允许提供者在持久化时抛出 EntityExistsException 或在刷新/提交时抛出另一个 PersistenceException，我一直认为这是覆盖数据库异常。我不知道 Hibernate 或您得到的完整错误，但我猜数据库异常正在发生并被包装在 RollbackException 中。

虽然这两个测试可能不等效 - ConstraintViolationException 不是来自 JPA，而是来自 prepersist 期间发生的验证 (JSR-303)。您必须在 EclipseLink 测试中启用一个 bean 验证实现（例如类路径上的 hibernate-validator-4.0.1.GA.jar），该实现可能在 Hibernate 测试中未启用。如果您从一个中删除 bean 验证或将其添加到另一个，它们的行为应该更相似。

# sql-server - 通过 DB 或通过 CLR 的服务调用发送邮件

> ID：14354854
> 
> 赞同：0
> 
> 时间：2013-01-16T09:19:14.293
> 
> 标签：sql-server, sql-server-2005, email

我有一个场景，我必须在每次插入表格后检查条件后发送邮件。

*   触发是正确的方法吗？

我的第二个问题是采取什么方法

*   我应该直接从数据库发送邮件吗？（注意：我的数据库服务器和邮件服务器在不同的网络中，可能需要创建防火墙规则例外）

*   我应该有一个CLR-sproc。从数据库中，我调用 CLR-sproc 和 CLR-sproc 调用服务并从那里发送邮件。

有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:41:06.920

SQL Server DBMail 和 CLR proc 都将使用 SMTP 发送电子邮件。那么，为什么要增加复杂性呢？

此外，通过 DBMail 或 CLR 发送电子邮件将需要在 INSERT 上进行处理。请注意，DBMail 使用队列，因此影响小于运行 CLR 过程。

触发器是一个很好的方法。但是，请考虑使用存储过程对在事务之外发送的电子邮件执行 ISNERT（由于 INSERT，您将有一个隐含的）。发送触发器意味着它是INSERT 的隐式事务的*一部分。*

从安全角度来看，SQLMachine 仍然需要访问 SMTPMachine，无论是使用 DBMail 还是 CLR Proc 的服务调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:29:27.613

1）是的，触发器将是每次插入后执行操作的正确方法

2) SQL server 有一个名为[Database Mail](http://msdn.microsoft.com/en-gb/library/ms175887%28v=sql.105%29.aspx)的特性，看起来它会做你想做的事情（尽管我自己从未使用过它）

# android - Android-Device 和 Emulator 无法访问内部 Web-Server

> ID：14354857
> 
> 赞同：0
> 
> 时间：2013-01-16T09:19:25.937
> 
> 标签：android, android-networking

我的网络中有一个 Web 服务器[http://my-server.com](http://my-server.com)，我的 android 设备和 android 开发人员无法访问它。Web 服务器只能在我的网络中访问，所以我可以从我的台式电脑打开页面，但是当我尝试使用他们的浏览器时，android 设备找不到 Web 服务器。

是否有任何我可以调整的 DNS 设置，以便设备可以访问我的服务器？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:23:24.353

与您的本地**服务器 IP 地址**一起使用：

```
http://192.155.1.66 
```

或者，如果它在特定端口上运行，那么，

```
http://192.155.1.66:3001 
```

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:23:29.340

您是否在清单文件中授予以下权限

`<uses-permission android:name="android.permission.INTERNET"/>`

# java - 在 Windows 上使用 Eclipse/Subversive 重命名 Java 文件的最佳实践

> ID：14354863
> 
> 赞同：2
> 
> 时间：2013-01-16T09:19:51.367
> 
> 标签：java, eclipse, svn, tortoisesvn, subversive

我们在安装了 TortoiseSVN 的 Windows 上使用 Eclipse/Subversive 来查看目录级别的内容。现在，当我们使用 Eclipse 重命名（重构）任何 Java 类时，它不会在 SVN 中自动重命名，我们必须进行删除和添加新的操作，这不是一个好习惯。

我相信我们可以做的是在 TortoiseSVN 的 Repo-browser 中“重命名”一个文件，而不是在 Eclipse 中重构类名。

分享是否有更好的方法来确保当我们从 Eclipse 更改它时（我的意思是重构/重命名类名），它会以适当的方式影响 SVN。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:22:29.203

安装 SVN Eclipse 插件[Subclipse](http://subclipse.tigris.org/)。它将在您的 SVN 工作区中正确处理重命名。

安装它后，您将在 Eclipse 中获得完整的 SVN 支持。在 Eclipse 文件资源管理器中重命名文件时包括适当的 SVN 移动支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-27T14:44:33.727

安装 Subversive 插件后（我使用的是 v1.8 ....），打开 SVN Repository Exploring 透视图。在“SVN Repositories”视图中，每个文件的上下文菜单建议 Refactor>Rename... 对话框，也可以通过 F2 键访问，您就完成了。

# javascript - 函数只处理一次，然后浏览器给出错误“函数未定义”

> ID：14354865
> 
> 赞同：0
> 
> 时间：2013-01-16T09:19:52.303
> 
> 标签：javascript, asp.net

我的职能。当用户在选择中更改项目时，我得到选定的索引：

```
$(function itemchange() {
     var index = document.getElementById('columnList').selectedIndex;
     if (index != -1) {
         alert(index);
     }
 }); 
```

我的html标签。我把选择项目放在面板中。此面板放置在模态窗口中：

```
<asp:Panel ID="ModalPanel" runat="server" Width="700px" Height="500px" BackColor="GhostWhite">
    <div>
    <br />
    <div style="float:left;">
        <select size="4" id="columnList" onchange="itemchange" style="height:200px;">
            <option value="Code">Code</option>
            <option value="Name">Name</option>
            <option value="P">P</option>
            <option value="Desc">Desc</option>
            <option value="Object">Object</option>
            <option value="User name">User name</option>
            <option value="Num">Num"</option>
            <option value="Commant">Commant</option>
            <option value="Prod">Prod</option>
            <option value="Test">Test</option>
        </select>
    </div>
    <div style="clear:left;">
     <asp:Button ID="OKButton" runat="server" Text="Close" />
    </div>
    </div>
</asp:Panel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:25:02.397

你不应该这样做：

```
$(function itemchange() {
    var index = document.getElementById('columnList').selectedIndex;
    if (index != -1) {
        alert(index);
    }
}); 
```

因为现在函数的作用域不在window对象中。你应该做：

```
$(function(){
    itemchange();
});

function itemchange() {
    var index = document.getElementById('columnList').selectedIndex;
    if (index != -1) {
        alert(index);
    }
} 
```

然后函数的范围更改为 window 对象，然后在您运行时执行`itemchange()`。它也会在加载 DOM 时运行（我相信你想要那个）。

# django - Django - AdminDateWidget

> ID：14354866
> 
> 赞同：1
> 
> 时间：2013-01-16T09:20:05.093
> 
> 标签：django, forms, date, widget, range

我在表单中使用 Django 和 AdminDateWidget。它工作正常。但现在我必须升级我的表格。

我只需要用这个小部件插入一个日期范围。将来范围会受到限制，这意味着我必须消除在今天之后插入日期的可能性。

是否可以？这是我的表单代码。（它是一个动态的形式，总是有一个刷新的日期）

```
class MyForm(forms.Form):
    def __init__(self, name, *args, **kwargs):
        super(FirstStartMiceForm, self).__init__(*args, **kwargs)
        self.fields['insertion_date'] = forms.DateField(widget = widgets.AdminDateWidget(), initial=date.today())
        ... 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T19:38:22.210

您可以在此处阅读有关表单验证的信息：

[https://docs.djangoproject.com/en/dev/ref/forms/validation/](https://docs.djangoproject.com/en/dev/ref/forms/validation/)

这是一个建议：

```
class MyForm(forms.Form):

    def clean_insertion_date(self):
        if self.cleaned_data['insertion_date'] > date.today():
            raise forms.ValidationError("Time travel are we?") 
```

# c# - 如何使用 C# 查找纬度和经度

> ID：14354867
> 
> 赞同：26
> 
> 时间：2013-01-16T09:20:11.880
> 
> 标签：c#, rest, google-maps, latitude-longitude

我`WCF`在 C# 中有一项服务。

在服务调用客户端发送一个城市名称。我想将城市名称转换为纬度和经度，并存储在人口统计下的数据库中。

我打算使用 Google API 来实现上述功能。

我从 Google 获得了一个 API 密钥及其“服务帐户”类型。

如何使用哪些 API 获取经纬度？

我需要安装一些`SDK`或任何`REST`服务吗？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-01-16T09:35:46.217

您可以尝试 NuGet 包[GoogleMaps.LocationServices](http://nuget.org/packages/GoogleMaps.LocationServices)，或者只是旋转它的[源代码](https://github.com/sethwebster/GoogleMaps.LocationServices)。它使用 Google 的 REST API 来获取给定地址的纬度/经度，反之亦然，无需 API 密钥。

你像这样使用它：

```
public static void Main()
{
    var address = "Stavanger, Norway";

    var locationService = new GoogleLocationService();
    var point = locationService.GetLatLongFromAddress(address);

    var latitude = point.Latitude;
    var longitude = point.Longitude;

    // Save lat/long values to DB...
} 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-01-16T09:25:08.107

如果你想使用谷歌地图 API 看看他们的 REST API，你不需要安装谷歌地图 API 只需发送一个请求

```
http://maps.googleapis.com/maps/api/geocode/xml?address=1600+Amphitheatre+Parkway,+Mountain+View,+CA&sensor=true_or_false 
```

你会得到一个响应 XML。

对于响应 JSON：

```
https://maps.googleapis.com/maps/api/geocode/json?address=1600+Estância+Sergipe,&key=**YOUR_API_KEY** 
```

有关更多信息，请查看

[https://developers.google.com/maps/documentation/geocoding/index#GeocodingRequests](https://developers.google.com/maps/documentation/geocoding/index#GeocodingRequests)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-03-17T07:41:19.857

您可以在特定的 url 中传递地址 .. 并在返回值 dt(datatable) 中获得纬度和经度

```
string url = "http://maps.google.com/maps/api/geocode/xml?address=" + address+ "&sensor=false";
WebRequest request = WebRequest.Create(url);

using (WebResponse response = (HttpWebResponse)request.GetResponse())
{
    using (StreamReader reader = new StreamReader(response.GetResponseStream(), Encoding.UTF8))
    {
        DataSet dsResult = new DataSet();
        dsResult.ReadXml(reader);
        DataTable dtCoordinates = new DataTable();
        dtCoordinates.Columns.AddRange(new DataColumn[4] { new DataColumn("Id", typeof(int)),
                    new DataColumn("Address", typeof(string)),
                    new DataColumn("Latitude",typeof(string)),
                    new DataColumn("Longitude",typeof(string)) });
        foreach (DataRow row in dsResult.Tables["result"].Rows)
        {
            string geometry_id = dsResult.Tables["geometry"].Select("result_id = " + row["result_id"].ToString())[0]["geometry_id"].ToString();
            DataRow location = dsResult.Tables["location"].Select("geometry_id = " + geometry_id)[0];
            dtCoordinates.Rows.Add(row["result_id"], row["formatted_address"], location["lat"], location["lng"]);
        }
    }
    return dtCoordinates;
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-05-24T07:37:18.870

```
 /*Ready to use code :  simple copy paste GetLatLong*/
    public class AddressComponent
    {
        public string long_name { get; set; }
        public string short_name { get; set; }
        public List<string> types { get; set; }
    }

    public class Northeast
    {
        public double lat { get; set; }
        public double lng { get; set; }
    }

    public class Southwest
    {
        public double lat { get; set; }
        public double lng { get; set; }
    }

    public class Bounds
    {
        public Northeast northeast { get; set; }
        public Southwest southwest { get; set; }
    }

    public class Location
    {
        public double lat { get; set; }
        public double lng { get; set; }
    }

    public class Northeast2
    {
        public double lat { get; set; }
        public double lng { get; set; }
    }

    public class Southwest2
    {
        public double lat { get; set; }
        public double lng { get; set; }
    }

    public class Viewport
    {
        public Northeast2 northeast { get; set; }
        public Southwest2 southwest { get; set; }
    }

    public class Geometry
    {
        public Bounds bounds { get; set; }
        public Location location { get; set; }
        public string location_type { get; set; }
        public Viewport viewport { get; set; }
    }

    public class Result
    {
        public List<AddressComponent> address_components { get; set; }
        public string formatted_address { get; set; }
        public Geometry geometry { get; set; }
        public string place_id { get; set; }
        public List<string> types { get; set; }
    }

    public class RootObject
    {
        public List<Result> results { get; set; }
        public string status { get; set; }
    }

    public static RootObject GetLatLongByAddress(string address)
    {
        var root = new RootObject();

        var url =
            string.Format(
                "http://maps.googleapis.com/maps/api/geocode/json?address={0}&sensor=true_or_false", address);
        var req = (HttpWebRequest)WebRequest.Create(url);

        var res = (HttpWebResponse)req.GetResponse();

        using (var streamreader=new StreamReader(res.GetResponseStream()))
        {
            var result = streamreader.ReadToEnd();

            if (!string.IsNullOrWhiteSpace(result))
            {
                root = JsonConvert.DeserializeObject<RootObject>(result);
            }
        }
        return root;

    }

          /* Call This*/

var destination_latLong = GetLatLongByAddress(um.RouteDestination);

var lattitude =Convert.ToString( destination_latLong.results[0].geometry.location.lat, CultureInfo.InvariantCulture);

 var longitude=Convert.ToString( destination_latLong.results[0].geometry.location.lng, CultureInfo.InvariantCulture); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-15T21:05:57.997

Google 的替代方案是[OpenStreetMap 的 Nominatim API](https://nominatim.openstreetmap.org/)。

与 Google 不同，只要您不过度使用它们（每秒超过 1 个请求），它们就没有每日限制。下面的代码适用于 Blazor 服务器。

```
 [Inject] IJSRuntime _js { get; set; }

    public async Task<Coordinates> GetCoordinates(string city) {
        Coordinates coordinates = new Coordinates();
        string query= String.Format("https://nominatim.openstreetmap.org/search.php?q={0}&format=jsonv2", city);
        string result = GetRequest(query); //returns a stringified array of js objects
        IJSObjectReference objArray= await _js.InvokeAsync<IJSObjectReference>("JSON.parse", result); //parse the string to a js array
        IJSObjectReference obj = await objArray.InvokeAsync<IJSObjectReference>("shift"); //take the first element in the array
        string jsonResult = await _js.InvokeAsync<string>("JSON.stringify", obj);
        dynamic dynamicResult = JObject.Parse(jsonResult);
        coordinates.Latitude= dynamicResult.lat;
        coordinates.Longitude= dynamicResult.lon;
        return coordinates;

    }

    public string GetRequest(string url) {
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
        request.AutomaticDecompression = DecompressionMethods.GZip | DecompressionMethods.Deflate;
        request.UserAgent = @"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/51.0.2704.106 Safari/537.36";
        using (HttpWebResponse response = (HttpWebResponse)request.GetResponse())
        using (Stream stream = response.GetResponseStream())
        using (StreamReader reader = new StreamReader(stream))
        {
            return reader.ReadToEnd();
        }
    }

    public class Coordinates {
        public double Longitude { get; set; }
        public double Latitude { get; set; }
    } 
```

# jquery - KoGrid：访问网格

> ID：14354868
> 
> 赞同：4
> 
> 时间：2013-01-16T09:20:12.250
> 
> 标签：jquery, knockout.js, kogrid

我目前正在查看[koGrid](https://github.com/Knockout-Contrib/KoGrid)来呈现动态数据网格，我需要一些自定义。

例如，我想在不使用默认列菜单的情况下显示和隐藏列。

这是该列菜单的 HTML 输出：

```
<div data-bind="visible: showColumnMenu">
    <span class="kgMenuText">Choose Columns:</span>
    <ul class="kgColList" data-bind="foreach: nonAggColumns">
        <li class="kgColListItem">...</li>
    </ul>
</div> 
```

如您所见，foreach 绑定使用了该`nonAggColumns`属性。如果您查看 koGrid 库，则此属性定义在`window.kg.Grid`. 我希望能够从 koGrid 的上下文之外访问此属性（以及 kg.Grid 的其他属性）。

有没有人知道如何实现这一目标？非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T08:35:22.570

您可以使用`ko.dataFor(elem)`，其中 elem 是您的 koGrid 根元素的子 div，这是 koGrid 与主 Grid 对象在其上执行 ko.applyBindings 的元素。据我所知，这没有记录，并且可能会随着任何新版本而改变（这至少适用于 2.1 版）。而且可能还有我不知道的更好/更安全的方式。

参见示例 jsfiddle：http: [//jsfiddle.net/antishok/23D7C/11/](http://jsfiddle.net/antishok/23D7C/11/)

# php - 如何通过 jQuery 或 AJAX 上传带有文本数据的文件并将文件名保存到 SQL 数据库中？

> ID：14354881
> 
> 赞同：1
> 
> 时间：2013-01-16T09:20:55.467
> 
> 标签：php, jquery, ajax

我正在编写一个小的 PHP 脚本来将一些数据添加到 MySQL 数据库中。我正在使用 jQuery 将我的文本数据发送到处理 PHP 文件，该文件会将数据放入 MySQL 数据库，该部分可以正常工作并且没有任何问题。

但是以同样的形式，我需要将文件上传到服务器中的文件夹并将该路径或文件名保存到数据库列“Img”中。

我已经搜索了 Stack 站点，但不知道如何执行此操作。如果 jQuery 不能做到这一点，请告诉我如何在不丢失文本提交部分的情况下存档它。我将在这里列出我的代码。

我的过程PHP：

```
include ('connect.php');

$data = ("SELECT * FROM poiinfo");

$poiName = $_REQUEST['Name'];
$poiDes = $_REQUEST['Descrip'];
$poiCon = $_REQUEST['ConInfo'];
/*$poiImg = $_REQUEST['Image']; */ <-- my Image data but this is not the way need correct this

$dbData = "INSERT INTO poiinfo(`Name`, `Des.`, `Contact`) VALUES ('$poiName','$poiDes','$poiCon')";

$putData = mysql_query($dbData);

if ($putData){
    echo "Data inserted";
}else {
    echo "Not Done";
} 
```

我的表格：

```
<?php

/**
 * @author SiNUX
 * @copyright 2013
 */

include ('connect.php');

$lastId = mysql_query("SELECT ID FROM poiinfo ORDER BY ID DESC LIMIT 1");

if ($row = mysql_fetch_array($lastId)){

    $nId = $row['ID'];
    $nId == "0";
    $nId = $nId++;

    mysql_quary("INSERT INTO poiinfo ('ID') VALUES ('$nId')");

}else {

    $lId = $row['ID'];
    $lId = $lId + 0;
    $lId++;
    $tId = $lId;
}
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>

<script type="text/javascript">
 $(document).ready(function(){
  $("#save_data").click(function(){
    var name  = document.getElementById("Name").value;
    var desc = document.getElementById("Descrip").value;
    var con = document.getElementById("ConInfo").value;

    var dataString = 'Name='+name+'&Descrip='+desc+'&ConInfo='+con;
    $.ajax({
      type:'POST',
      data:dataString,
      url:'AddPoiPro.php',
      success:function(data){
       if(data="Data inserted") {
          //alert("Data  Success");
          document.getElementById('msg').innerHTML= "<div style=\"background-color:#0F0; text-align:center; color: #060\">Data Saved</dive>";
          $('#msg').delay(1500).fadeOut();
        } else {
          //alert("Not Inserted");
          document.getElementById('msg').innerHTML= "<div style=\"background-color:#0F0; text-align:center; color: red\">Data Not Saved</div>";
        }
     } 
   });
  });
});
</script>

<title>AddPOI</title>
</head>

<body>
<form method="post" enctype="multipart/form-data" name="form1" id="form1">
  <p>
    <label for="poiid">ID :</label>
    <input type="text" name="poiid" id="poiid" readonly="readonly" style="width:70px;" value="<?php echo $tId; ?>" />
  </p>
  <p>
    <label for="Name">POI Name :</label>

    <input type="text" name="Name" id="Name" />
  </p>
  <p>
    <label for="Descrip" style="alignment-adjust:middle">POI Description :</label>
    <textarea name="Descrip" id="Descrip" cols="45" rows="5"></textarea>
  </p>
  <p>
    <label for="ConInfo">Contact Infomation :</label>
    <textarea name="ConInfo" id="ConInfo" cols="45" rows="5"></textarea>
  </p>
  <p>
    <label for="Img">POI Image :</label>
    <!--<input type="file" name="Image" id="Image" /> --> <-- File upload place but for now it's commented out.
  </p>
  <p><div id="msg"></div></p>
  <p>  
  <div align="center">
    <input type="button" name="Submit" id="save_data" value="Submit" style="width:100px;" />
    <input type="reset" name="reset" id="reset" value="Rest Data" style="width:100px;" />
  </div>
  </p>
</form>
</body>
</html> 
```

请帮助我，正如我在大多数帖子中所说的，我看到 AJAX 或 jQuery 无法处理文件上传，所以如果有办法做到这一点，请教育我。

你们也是编码大师我只是一个蚱蜢所以这是一个很好的编码还是我需要更多地改进我的风格并且在上面的表格中我在标题中有ajax部分我应该将它移动到另一个文件和将其链接到表单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T10:26:19.290

不幸的是，出于安全原因，您不能通过 AJAX 上传文件。（你能想象如果 JavaScript 可以访问你的文件系统会发生什么吗？）

解决方法是使用 a`form`并将`target`属性设置为 invisible `iframe`。这将实现文件上传而不刷新页面。

您可能会发现[这篇文章](https://stackoverflow.com/questions/11369726/jquery-file-upload-hidden-iframe)很有用。

# c++ - 用于测试 C/C++ 语法的示例

> ID：14354884
> 
> 赞同：1
> 
> 时间：2013-01-16T09:21:04.993
> 
> 标签：c++, c, parsing

是否有任何用于测试解析器语法（C/C++、yacc 或其他语法）的特殊示例包，它将涵盖从简单表达式开始的大部分 C/C++ 语法功能，例如：

```
int a;
int b;
b=a+a+b-a+b;
printf("hello"); 
```

或者

```
template<class R, class T,
    class B1, class B2,
    class A1, class A2, class A3>
    _bi::bind_t<R, _mfi::BOOST_BIND_MF_NAME(mf2)<R, T, B1, B2>, typename _bi::list_av_3<A1, A2, A3>::type>
    BOOST_BIND(R (BOOST_BIND_MF_CC T::*f) (B1, B2), A1 a1, A2 a2, A3 a3)
{
    typedef _mfi::BOOST_BIND_MF_NAME(mf2)<R, T, B1, B2> F;
    typedef typename _bi::list_av_3<A1, A2, A3>::type list_type;
    return _bi::bind_t<R, F, list_type>(F(f), list_type(a1, a2, a3));
} 
```

带有定义它是什么类型的测试（例如：“此测试用于检查指针的工作”）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T09:29:00.170

GCC 在源代码中有很多测试用例，所以如果你的语法在 GPL 下是开源的，那么你可以使用它。

否则，请尝试查找大型开源项目并通过它提供它 - 您显然必须验证它是否正确，并且由于没有两个编译器产生相同的输出[无论您查看它的哪个阶段]，您必须弄清楚自己“应该是什么”。或者写一些东西，可以将中间文件从 GCC 翻译成与你的语法输出相同的格式，然后比较......

# android - Android：片段 backStack

> ID：14354885
> 
> 赞同：38
> 
> 时间：2013-01-16T09:21:07.697
> 
> 标签：android, android-fragments, back-stack

我试图在调用方法时加载新片段。此方法创建一个新片段并“替换”另一个片段：

```
private void showTestFragment(Fragment oldFragment, boolean addBackStack, BaseAdapter adapter, int position) {
    Cursor cursor = (Cursor)adapter.getItem(position);
    if(cursor != null){

        int idx = cursor.getColumnIndexOrThrow(Episode._ID);
        long rowId = cursor.getLong(idx);

        FragmentManager fragmentManager = getFragmentManager();
        FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();

        if(oldFragment != null){
            Log.i(TAG, "Removing the old fragment");
            fragmentTransaction.remove(oldFragment);
        }

        TestFragment testFragment =  new TestFragment();
        testFragment.setId(rowId);

        fragmentTransaction.add(android.R.id.content, testFragment);

        if(addBackStack){
            Log.i(TAG, "Added to the backstack");
            fragmentTransaction.addToBackStack(TAG);
        }

        fragmentTransaction.commit();
        Fragment f = getFragmentManager()
                .findFragmentById(R.id.index);
        Log.i(TAG, "after commit, frag is "+ f);
    }
} 
```

这工作正常，直到我回去。最后一个片段，当我回去时应该删除。在我要对活动实施方法之前

```
public void onBackPressed(){} 
```

要删除最后一个片段，我想知道我是否正确处理了片段更改。看起来我在这里遗漏了一些东西..

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2013-01-16T16:09:51.193

如果您真的想替换片段，请使用 replace() 方法，而不是执行 remove() 和 add()。

```
 FragmentManager fragmentManager = getFragmentManager();
    FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
    fragmentTransaction.replace(..............);
    fragmentTransaction.addToBackStack(null);
    fragmentTransaction.commit(); 
```

不要忘记执行 addToBackStack(null) ，这样您之前的状态将被添加到 backstack 中，允许您使用后退按钮返回。

另请参阅[https://developer.android.com/reference/android/app/FragmentTransaction.html#replace(int, android.app.Fragment, java.lang.String)](https://developer.android.com/reference/android/app/FragmentTransaction.html#replace(int,%20android.app.Fragment,%20java.lang.String))。

另一个很好的来源是[http://developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)（搜索 replace() 函数）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-16T09:24:58.213

只需先删除并调用 super.onBackPressed

```
public void onBackPressed(){

    // here remove code for your last fragment
    super.onBackPressed();

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-12T06:23:30.093

```
//lets wait for systems back to finish

 super.onBackPressed();

//here we believe a fragment was popped, so we need to remove the fragment from ourbackstack
if(fragmentBackStack.size()>0)
{
    Log.d("custombackstack","before back: "+fragmentBackStack.size()+" current:"+fragmentBackStack.peek());

    fragmentBackStack.pop();            
}
//after popping is the size > 0, if so we set current fragment from the top of stack, otherwise we default to home fragment.
if(fragmentBackStack.size()>0)
{           
    Log.d("custombackstack","after back: "+fragmentBackStack.peek());
currentFragment = fragmentBackStack.peek();         
}
else
{           
    //back stack empty
    currentFragment = HOME_FRAGMENT;
} 
```

# asp.net - 可以重写控制器（ASP.NET MVC3）中定义的自定义属性参数吗？

> ID：14354886
> 
> 赞同：1
> 
> 时间：2013-01-16T09:21:14.923
> 
> 标签：asp.net, asp.net-mvc-3, security

我在控制器中定义了一些修改文件内容的操作（当然，我不直接从控制器修改，但是这个控制器从模型调用方法）。在该功能上，我放置了一个自定义属性，其中提到必须具有管理员权限。

动作看起来像：

```
[CustomAttribute(MustBeAdmin = true)]
public ActionResult ModifyFile(){
  ...
} 
```

看起来`CustomAttribute`像：

```
public class CustomAuttribute: AuthorizeAttribute 
{
   public bool MustBeAdmin {get;set;}

   protected override void HandleUnauthorizedRequest( AuthorizationContext filterContext) {
       if ( filterContext.RequestContext.HttpContext.Session["user"] == null ) { ... }
       else { ... // check if is need admin rights and current has this right then continue else go to default route }
   }
} 
```

我想问你，出于安全目的，是否有人可以`MustBeAdmin`从代码外部将参数设置为 false 值？

如果是，如何防止这种情况？

谢谢

# database - 按类别选择和计算行数

> ID：14354891
> 
> 赞同：-1
> 
> 时间：2013-01-16T09:21:41.650
> 
> 标签：database

我尝试编写一些代码，但我发现了一些问题......

这是我的桌子......

类别表

```
+---------------------------+-----------------------+
+ id_category               +  name                 +
+---------------------------+-----------------------+
+   1                       +  Adidas               +
+   2                       +  Logo                 +
+   3                       +  Levis                +
+---------------------------+-----------------------+ 
```

项目表：

```
+---------+-----------------+-----------------------+
+ id_item +  id_category    +  name                 +
+---------+-----------------+-----------------------+
+   1     +      1          +  T-Shirt003           +
+   2     +      2          +  LogoShoes            +
+   3     +      3          +  Panty003             +
+---------------------------+-----------------------+ 
```

我想得到这样的结果：

```
No.   Category         Total Item
1\.     Adidas              1
2\.     Logo                1
3\.     Levis               1 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T09:27:19.600

使用`GROUP BY`选项

```
SELECT
    COUNT(item_table.id_category) as total,
    category_table.name
FROM
    category_table
    INNER JOIN item_table ON item_table.id_category = category_table.id_category
GROUP BY
    id_category 
```

# javascript - 使用 off 取消绑定查询事件

> ID：14354894
> 
> 赞同：0
> 
> 时间：2013-01-16T09:21:49.173
> 
> 标签：javascript, jquery, javascript-events, event-handling

我尝试为我正在处理的项目的异步调用中的排序问题创建一个简单的解决方案。

我找到的最佳解决方案是：我附加一个事件来检查是否完成了先决条件，如果是，我删除事件侦听器并执行该功能。

每个函数一旦完成就会调用事件，这样每个人都将等待直到可以运行。

这是代码：

```
$(function() {
    $(document).on('bmadone',function() {
        if(beepmeapp.done_arr['fb-init']){
            $(document).off('bmadone','#bma-root',this);
            getBMAUserRoutes();
        }
    });
}); 
```

该功能（用于测试）正在执行此操作：

```
function getBMAUserRoutes(){
    $.ajax({
        url     : '/bma/users/fb',
        type    : 'GET',
        data    : {
            access_token: 'abc'
        },
        success : function( data ) {
            console.log('getBMAUser: success');
            beepmeapp.done_arr['user-init'] = true;
            $('#bma-root').trigger('bmadone');
        },
        error   : function( xhr, err ) {
            console.log('getBMAUser: error');
        }
    });    
} 
```

它很好用，但我遇到的问题是它进入了一个永无止境的循环。不知道为什么，但它看起来像：

```
$(document).off('bmadone','#bma-root',this); 
```

不会删除侦听器...

我是 JS / Jquery 和所有这些客户端开发的真正新手，所以我想我可能缺少一些基本的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:26:36.013

您必须将相同的（子）参数集`.off`传递给传递给`.on`. 即在你的情况下它会是`$(document).off('bmadone')`。

您从未传递`'#bma-root'`给`.on`并且`this`没有引用事件处理程序（您传递给的函数*）*`.on`，因此通过传递那些您不会删除正确的事件处理程序。

* * *

如果您只需要删除该特定处理程序，则可以使用命名函数：

```
function handler() {
    if(beepmeapp.done_arr['fb-init']){
        $(document).off('bmadone', handler);
        getBMAUserRoutes();
    }
}

$(document).on('bmadone', handler);

// or as a named function expression

$(document).on('bmadone', function handler() {
    if(beepmeapp.done_arr['fb-init']){
        $(document).off('bmadone', handler);
        getBMAUserRoutes();
    }
}); 
```

或使用[命名空间事件](http://docs.jquery.com/Namespaced_Events)。

# view - Direct3D9计算视图空间点光源位置

> ID：14354895
> 
> 赞同：3
> 
> 时间：2013-01-16T09:21:58.440
> 
> 标签：view, directx, rendering, space, light

我正在开发自己的延迟渲染引擎。我将场景渲染到包含漫反射颜色、视图空间法线和深度的 g 缓冲区（目前）。我已经为第二个渲染阶段实现了定向光，效果很好。现在我想渲染一个点光源，这有点难。

我需要视图空间中着色器的点光源位置，因为我在 g 缓冲区中只有深度，而且我无法在每个像素中进行矩阵乘法。我采用了光照位置并通过相同的矩阵对其进行了转换，通过该矩阵我在着色器中转换了每个顶点，因此它应该与场景中的顶点对齐（使用 D3DXVec3Transform）。但事实并非如此：转换后的位置几乎根本不代表视图空间位置。它的 x,y 坐标不在图表之列，它们通常超出 (-1,1) 范围。转换后的位置在一定程度上尊重了相机的方向，但是光线移动得太快并且 y 轴倒置了。只有当相机位于 (0,0,0) 时，灯光才会位于屏幕中央的 (0,0) 处。这是我每帧执行的相关渲染代码：

```
D3DXMATRIX matView;    // the view transform matrix
D3DXMATRIX matProjection;    // the projection transform matrix

D3DXMatrixLookAtLH(&matView,
                   &D3DXVECTOR3 (x,y,z),    // the camera position
                   &D3DXVECTOR3 (xt,yt,zt),    // the look-at position
                   &D3DXVECTOR3 (0.0f, 0.0f, 1.0f));    // the up direction

D3DXMatrixPerspectiveFovLH(&matProjection,
                           fov,    // the horizontal field of view
                           asp,    // aspect ratio
                           znear,    // the near view-plane
                           zfar);    // the far view-plane

D3DXMATRIX vysl=matView*matProjection;

eff->SetMatrix("worldViewProj",&vysl); //vertices are transformed ok ín shader

//render g-buffer

D3DXVECTOR4 lpos; D3DXVECTOR3 lpos2(0,0,0);

D3DXVec3Transform(&lpos,&lpos2,&vysl); //transforming lpos into lpos2 using vysl, still the same matrix
eff->SetVector("poslight",&lpos); //but there is already a mess in lpos at this time

//render the fullscreen quad with wrong lighting 
```

不是相关的着色器代码，但我仍然以这种方式看到光的位置（传递 IN.texture 只是我懒惰）：

```
float dist=length(float2(IN.texture0*2-1)-float2(poslight.xy));
OUT.col=tex2D(Sdiff,IN.texture0)/dist; 
```

我试图只通过 matView 不投影来变换灯光，但问题仍然是一样的。如果我在着色器中变换光线，结果是一样的，所以问题出在矩阵本身。但它与变换顶点的矩阵相同！顶点的处理方式有何不同？

你能看一下代码并告诉我错误在哪里吗？在我看来，它应该可以正常工作，但事实并非如此。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:11:31.780

此变换的结果`D3DXVec3Transform(&lpos,&lpos2,&vysl);`是齐次空间中的向量（即投影向量但未除以`w`）。但是在你的着色器中，你使用它的`xy`组件而不尊重 this( `w`)。这（很可能）是问题所在。您可以`w`自己划分 vector 或使用`D3DXVec3Project`而不是`D3DXVec3Transform`.

它对顶点工作正常，因为（我想）你`mul`通过顶点着色器中的相同`viewproj`矩阵将它们传递给插值器，硬件最终将它`xyz`除以插值的“w”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T19:10:35.857

您不需要矩阵乘法来重建视图位置，这是一个代码片段（来自 andrew lauritzen 延迟光示例）

tP 是投影变换，位置屏幕是 -1/1 像素坐标，viewspaceZ 是您从纹理中采样的线性深度。

```
float3 ViewPosFromDepth(float2 positionScreen,
                            float viewSpaceZ)
{
    float2 screenSpaceRay = float2(positionScreen.x / tP._11,
                               positionScreen.y / tP._22);

    float3 positionView;
    positionView.z = viewSpaceZ;
    positionView.xy = screenSpaceRay.xy * positionView.z;

    return positionView;
} 
```

# c# - 为用户隐藏 Bing 地图坐标

> ID：14354898
> 
> 赞同：0
> 
> 时间：2013-01-16T09:22:07.707
> 
> 标签：c#, javascript, asp.net-mvc, bing-maps

是否可以为用户隐藏 Bing 地图坐标？

这是我的 JavaScript 代码：

`var mapOptions = { credentials : "My app code here", zoom:@(Model.Sprint.ZoomFactor), center:new Microsoft.Maps.Location(latitude, longitude), showDashboard: false, disableUserInput: true, enableSearchLogo: false, enableClickableLogo: false };`

在我的 html 源代码中，坐标对用户可见，但不允许用户查看确切位置。

有谁知道如何隐藏它们？

我使用 ASP.net MVC 3，所以坐标来自视图模型。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:21:26.690

只要您使用 Bing 地图 javascript 控件，您就无法真正向用户隐藏此信息。代码在用户的机器上运行，那么你怎么能对他们隐藏你的源代码和数据呢？如果您的要求是在下载的源代码中不应该看到坐标，您可以尝试类似于 Bing 交互式 SDK 的方法，它们使用客户端发出的 ajax 调用在运行时获取地图许可证密钥。但这很容易通过使用浏览器上的 javascript 调试功能单步执行代码来解决。

# android - 如何向您的 android maven 项目添加 apklib 依赖项？

> ID：14354907
> 
> 赞同：1
> 
> 时间：2013-01-16T09:22:49.820
> 
> 标签：android, maven, m2eclipse, android-maven-plugin, apklib

我有一个 android 项目，我正在 eclipse 上开发并使用 maven 构建。我想在其中包含一个 lib（apklib），并且与其他包含类似，我尝试通过以下方式将依赖项附加到我的 pom：

```
<dependency>
    <groupId>groupID.name</groupId>
    <artifactId>artifact.name</artifactId>
    <version>version</version>
</dependency> 
```

但是，当尝试从 m2eclipse 或控制台上的 maven 构建它时，我会收到一个错误

> (Failed to execute goal on project **projectName** : Could not resolve dependencies for project **project** Failure to find **apklib** in **repo**已缓存在本地存储库中，直到**repo**的更新间隔已过或强制更新后才会重新尝试解析)

说即使我可以在 .m2 目录中看到依赖项，也找不到此依赖项

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T09:22:49.820

解决方案非常简单，但由于我是通过一个试图演示其他内容的示例而不是问答（我在 maven-android-plugin 项目中没有轻松找到它）找到它，所以我决定在这里与希望它可以帮助某人。

解决方案就是以这种方式将我的依赖类型设置为 apklib：

```
<dependency>
    <groupId>groupID.name</groupId>
    <artifactId>artifact.name</artifactId>
    <version>version</version>
    <type>apklib</type>
</dependency> 
```

# regex - 正则表达式删除花哨的撇号

> ID：14354909
> 
> 赞同：-6
> 
> 时间：2013-01-16T09:23:05.630
> 
> 标签：regex

我需要通过 API 向我的订阅者发送 SMS，API 不支持花哨的撇号，所以我想在发送给用户之前从消息中删除它。所以我正在寻找一个正则表达式，它应该删除花哨的撇号和任何其他不受支持的字符，同时消息可以有特殊字符。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T09:36:54.613

您可以使用`\u`允许任何 unicode 字符。如果您可以列出一组有限的不受支持的字符，那么您可以通过将不受支持的字符括在`[^`和中来使用字符类否定`]`。

# django - django chartit 没有图表显示，空的浏览器屏幕

> ID：14354910
> 
> 赞同：2
> 
> 时间：2013-01-16T09:23:07.223
> 
> 标签：django

我正在使用 django 框架开发一个 Web 应用程序，需要在前端绘制和显示图表。所以我为此目的使用 django chartit，但是当我运行 django 开发服务器时，它什么也没显示，浏览器屏幕空白，也没有错误。我迷失了我做错了什么。

这是渲染图形的视图

```
from chartit import DataPool,Chart
from django.template import RequestContext
from django.template import Context,loader
from django.shortcuts import render_to_response
from django.http import HttpResponse
from graphtest.apps.graph_app.models import charttest
def chartview(request):
    powerdata = DataPool(series=[{'options':{
        'source':charttest.objects.all()},
        'terms':[
            'power',
            'time']}])
    cht = Chart(datasource=powerdata,series_options=[{'options':
                                                          {'type':'line',
                                                           'stacking':False},
                                                          'terms':
                                                              {'time':['power',]}}],
        chart_options={
        'title':{
            'text':'power data'},
        'xAxis':{'title':{'text':'xaxis'}}})

    return render_to_response('graph.html',{'powerchart': cht}) 
```

制作图表的模型

```
from django.db import models

class charttest(models.Model):
    power = models.PositiveIntegerField()
    time = models.DecimalField(decimal_places=10,max_digits=20)
    def __unicode__(self):
        return unicode(self.power)+' '+unicode(self.time) 
```

和模板

```
<!DOCTYPE html>
<html>
<head>
    <script type="text/javascript" src="/static/js/highcharts.js"></script>
    <script src ="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
    <script type ="text/javascript" src ="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    {% load chartit %}
    {{ powerchart|load_charts:"container"}}

</head>
<body>
<div id="container"></div>
</body>
</html> 
```

请帮帮我，我被困了几个小时。如果需要更多信息，请询问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T18:20:17.453

尝试以下操作：

```
<div id="container">{{ powerchart|load_charts:"container"}}</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-25T01:54:10.563

这解决了我的问题：

```
{% extends "base.html" %}

{% load chartit %}
{% block title %}Gráfico gratuito{% endblock %}

{% block content %}
    {% block javascript %}
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
        <script src="http://code.highcharts.com/highcharts.js"></script>
    {% endblock %}
    <div class="container">
        <div class="row">
            <div id="gratis">{{ data|load_charts:"gratis" }}</div>
        </div>
    </div>
{% endblock %}
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-27T09:06:44.243

1\. 确保你已经把highcharts.js 文件放到你的静态文件中并且路径是正确的。

2\. 尝试编写如下代码：

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-10T08:11:41.237

请确认 Jquery.js 在 highcharts.js 前面

```
<script src ="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
<script type ="text/javascript" src ="http://code.jquery.com/jquery-1.7.1.min.js">

<script type="text/javascript" src="/static/js/highcharts.js"></script> 
```

# asp.net-mvc - 什么是行动结果？

> ID：14354915
> 
> 赞同：1
> 
> 时间：2013-01-16T09:23:14.877
> 
> 标签：asp.net-mvc, asp.net-mvc-3

据我了解，它是一个可以返回视图的类，因为基于某些操作，我正在尝试执行视图。

请确认它是正确的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T10:14:51.870

`ActionResult`是各种结果的基类，可以从操作方法返回。它不一定是一个视图。动作结果可能有很多选择：

*   `ContentResult`- 用户定义的内容
*   `EmptyResult`- 只是空的
*   `FileResult`- 二进制文件
*   `HttpStatusCodeResult`- 具体的 HTTP 响应状态码和描述
*   `JavaScriptResult`- js代码
*   `JsonResult`- 数据格式为 JSON
*   `RedirectResult`- 重定向到网址
*   `RedirectToRouteResult`- 重定向到一些 MVC 路由
*   `ViewResult`- 这实际上是视图
*   `PartialView`- 局部视图

您在大多数示例中将其视为操作的返回值的原因是您可以：

```
public ActionResult MyAction()
{
    if(someCondition)
       return View();  // return the view from action
    else
       return RedirectToAction("SomeOtherAction","OnSomeOtherController"); // redirect to other action 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T09:24:23.597

是的

```
Encapsulates the result of an action method and is used to perform a framework-level operation on behalf of the action method. 
```

[http://msdn.microsoft.com/en-us/library/system.web.mvc.actionresult(v=vs.108).aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.actionresult(v=vs.108).aspx)

# css - 使用字体的前卫字体

> ID：14354918
> 
> 赞同：1
> 
> 时间：2013-01-16T09:23:19.297
> 
> 标签：css, font-face

我正在尝试使用 CSS font face 属性。我已经让它的字体选择了正确的字体，但是它在 Windows 平台上看起来非常前卫。尤其是 Chrome 看起来很糟糕。

使用 OSX 时，所有浏览器都非常完美。

我怎样才能避免这些看起来很糟糕的字体？

在 OSX Chrome 上：

![在此处输入图像描述](../Images/4e32d6b5881a3fe2a6ce1b70b726d260.png)

在 Windows Chrome 上：

![在此处输入图像描述](../Images/65590864509d0925635a5011f8571cf4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:33:31.170

Segoe 字体已安装在大多数 Windows PC 上。当您还尝试将其与 CSS 链接时，这可能会导致问题。尝试重命名 CSS 中的字体，使其具有与内置 Windows 字体不同的名称。

此外，Chrome 不能很好地呈现 TTF/WOFF 字体。您可以通过优先考虑 SVG 字体（将其放在字体列表中的较高位置）来解决此问题。这将使 Chrome 选择 SVG 字体（但大多数其他浏览器仍将使用 WOFF 字体）。[请参阅此处](http://www.vandersterren.com/blog/2012/04/font-embedding-chrome-and-anti-aliasing/)了解更多信息。

# installation - 使用 NSIS 数学库：如何执行“Power to”

> ID：14354921
> 
> 赞同：0
> 
> 时间：2013-01-16T09:23:25.483
> 
> 标签：installation, nsis

我正在尝试使用[NSIS 数学库](http://nsis.sourceforge.net/Math_plug-in)来执行`Power`计算。我在制定数学库语法时遇到了很多困难。

如何在 NSIS 中执行此计算：`h ^= g;`

```
Var h # example variables
Var g
Var a

# I am attempting to perform the following calculations in NSIS.
# I'm not sure how exactly to do it using the math library syntax?
# Do I need to include the Math.nsh library to use it?
# h ^= g;

# My attempt:
Math::Script "a = $h; b = $g; c = ?? a = Power(a,b,c); R0 = a" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:54:29.840

和C/C++很像，定义一个计算异或并返回结果的函数，试试；

```
Math::Script 'myxor(h,g) (h^g);' 
```

之后 myxor(3,2) 会给你`3 XOR 2`= 1。

# c# - 删除按钮的蓝色轮廓

> ID：14354922
> 
> 赞同：4
> 
> 时间：2013-01-16T09:23:28.427
> 
> 标签：c#, winforms, user-interface, button, outlining

> **可能重复：**
> [如何在 C# 中的按钮上设置/更改/删除焦点样式？](https://stackoverflow.com/questions/148729/how-to-set-change-remove-focus-style-on-a-button-in-c)

有没有办法在按下按钮/被按下/处于活动状态时删除蓝色轮廓？

这是一个屏幕截图：

![蓝色轮廓](../Images/eec41001931e164983576b8310ac54de.png)

有什么办法可以隐藏吗？我正在使用 C# 和 winforms。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T09:39:05.613

合并重复问题的答案

```
public class NoFocusCueButton : Button
{
    public NoFocusCueButton() : base()
    {
        InitializeComponent();

        this.SetStyle(ControlStyles.Selectable, false);
    }

    protected override bool ShowFocusCues
    {
        get
        {
           return false;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T09:34:13.103

创建一个新类并继承类`Button`，例如

```
public class OnetsButton : Button
{
    public OnetsButton()
    {
        this.SetStyle(ControlStyles.Selectable, false);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T09:50:40.690

我现在有一个解决方案，它不是很性感，但它有效。我刚刚在表单中添加了一个不可见按钮，现在每次单击按钮时，我都会选择不可见按钮。为我工作。

# android - 如何强制片段重新运行自己的 onCreateView

> ID：14354926
> 
> 赞同：2
> 
> 时间：2013-01-16T09:23:34.223
> 
> 标签：android

我有一个包含 4 个片段的 tabHost。创建 tabHost 活动时，它会创建并包含片段。如何强制片段重新创建其视图？意味着重新运行 on createView。

**编辑：**我的第一个片段使用 Web 服务并更新父活动中的字段。该字段由我的第二个片段读取。但是当活动被实例化时，父活动中的字段为空。所以这就是我的原因问了我的问题。我希望在字段更新后重新绘制第二个片段。希望我现在很清楚。谢谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:45:20.060

您需要做的是使用[观察者](http://en.wikipedia.org/wiki/Observer_pattern)（或监听者）设计模式。基本上你所做的就是创建一个这样的界面（这只是一个例子）

```
interface DataListener {

   void dataHasArrived(Object data);

} 
```

您的第二个片段（显示数据的片段）应该实现这一点（参数中的对象是您要呈现的数据）。获取数据的片段应该有一个对它的引用（包含第一个片段的 DataListener 类型的字段，您可以在父活动中设置它）。当数据可用时，您只需从第一个片段中调用该方法，并将数据作为参数，第二个片段中的实现将完成其余的工作。

# qt - QT中的错误发现

> ID：14354929
> 
> 赞同：3
> 
> 时间：2013-01-16T09:23:50.940
> 
> 标签：qt, debugging, error-handling

在 QT-creator 中，我收到以下错误：

> QVector::operator[] 中的 ASSERT 失败：“索引超出范围”，文件 c:\QtSDK\Desktop\Qt\4.8.1\mingw\include/QtCore/qvector.h，第 359 行

我的问题是它没有指定哪个 QVector 超出范围......即使我在调试模式下运行，我也找不到错误的位置。有没有办法轻松找到错误？代码非常庞大，并且每隔一段时间才会弹出一次错误，因此检查我单独使用的每个 qVector 需要做很多工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T10:05:29.747

假设您使用的是 Qt Creator，会有一个“堆栈”窗口显示导致程序停止点的函数调用：

![堆栈窗口的图片](../Images/ad404491cd385b2673bdbccc1d2ccd5d.png)

在该窗口中，双击您知道是您自己的文件的第一个文件，在该屏幕截图中，它是第 5 行的 main.cpp。该文件将打开并显示一个黄色箭头。导致断言的行是该黄色箭头上方的行（该箭头实际上指向将执行的下一条语句）

# oracle-adf - Oracle adf table clicktoEdit multiple rowselection bug？

> ID：14354932
> 
> 赞同：0
> 
> 时间：2013-01-16T09:23:59.960
> 
> 标签：oracle-adf, multipleselection, clicktoedit

我们有一个具有以下属性的 af:table：

*   行选择=“多个”
*   编辑模式="clickToEdit"

如果单击一行以选择它，然后向下滚动以获取新数据，然后按 shift 并单击另一行（选择多行），则仅选择最后一行。有没有人有同样的问题？如何修复？

版本：11.1.1.6.0

我的表定义：

```
<af:table 
    value="#{bindings.EmployeesView.collectionModel}" 
    var="row" 
    rows="#{bindings.EmployeesView.rangeSize}" 
    emptyText="#{bindings.EmployeesView.viewable ? 'No data to display.' : 'Access Denied.'}" 
    fetchSize="#{bindings.EmployeesView.rangeSize}" 
    rowBandingInterval="0" 
    filterModel="#{bindings.EmployeesViewQuery.queryDescriptor}" 
    queryListener="#{bindings.EmployeesViewQuery.processQuery}" 
    filterVisible="false" 
    varStatus="vs" 
    rowSelection="multiple" 
    id="t3" 
    editingMode="clickToEdit" 
    partialTriggers=":::pcDep:tDep" 
    contentDelivery="immediate" 
    summary="Employees table"> 
```

# android - 打开流媒体视频时出错

> ID：14354933
> 
> 赞同：4
> 
> 时间：2013-01-16T09:24:02.297
> 
> 标签：android, video-streaming, android-mediaplayer

我正在尝试通过提供视频的网址来打开视频流。我正在使用`VideoView`。这是我的代码：

```
public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);        
        VideoView videoView = (VideoView) findViewById(R.id.stream_video_view);
        videoView.setVisibility(View.VISIBLE);
        MediaController mc = new MediaController(this);     
        mc.setAnchorView(videoView);
        mc.setMediaPlayer(videoView);
        videoView.setMediaController(mc);
        Uri uri = Uri.parse("http://172.16.154.106:8080");
        videoView.setVideoURI(uri);
        videoView.requestFocus();
        videoView.start();
    }     
} 
```

**日志猫：**

```
01-16 15:58:16.042: D/MediaPlayer(2054): Couldn't open file on client side, trying server side
01-16 15:58:16.078: E/MediaPlayer(2054): Unable to to create media player
01-16 15:58:16.082: W/VideoView(2054): Unable to open content: http://172.16.154.106:8080
01-16 15:58:16.082: W/VideoView(2054): java.io.IOException: setDataSource failed.: status=0x80000000
01-16 15:58:16.082: W/VideoView(2054):  at android.media.MediaPlayer._setDataSource(Native Method)
01-16 15:58:16.082: W/VideoView(2054):  at android.media.MediaPlayer.setDataSource(MediaPlayer.java:844)
01-16 15:58:16.082: W/VideoView(2054):  at android.media.MediaPlayer.setDataSource(MediaPlayer.java:806)
01-16 15:58:16.082: W/VideoView(2054):  at android.widget.VideoView.openVideo(VideoView.java:221)
01-16 15:58:16.082: W/VideoView(2054):  at android.widget.VideoView.access$2000(VideoView.java:49)
01-16 15:58:16.082: W/VideoView(2054):  at android.widget.VideoView$6.surfaceCreated(VideoView.java:465)
01-16 15:58:16.082: W/VideoView(2054):  at android.view.SurfaceView.updateWindow(SurfaceView.java:562)
01-16 15:58:16.082: W/VideoView(2054):  at android.view.SurfaceView.access$000(SurfaceView.java:82)
01-16 15:58:16.082: W/VideoView(2054):  at android.view.SurfaceView$3.onPreDraw(SurfaceView.java:171)
01-16 15:58:16.082: W/VideoView(2054):  at android.view.ViewTreeObserver.dispatchOnPreDraw(ViewTreeObserver.java:590)
01-16 15:58:16.082: W/VideoView(2054):  at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1596)
01-16 15:58:16.082: W/VideoView(2054):  at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2418)
01-16 15:58:16.082: W/VideoView(2054):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-16 15:58:16.082: W/VideoView(2054):  at android.os.Looper.loop(Looper.java:137)
01-16 15:58:16.082: W/VideoView(2054):  at android.app.ActivityThread.main(ActivityThread.java:4340)
01-16 15:58:16.082: W/VideoView(2054):  at java.lang.reflect.Method.invokeNative(Native Method)
01-16 15:58:16.082: W/VideoView(2054):  at java.lang.reflect.Method.invoke(Method.java:511)
01-16 15:58:16.082: W/VideoView(2054):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
01-16 15:58:16.082: W/VideoView(2054):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
01-16 15:58:16.082: W/VideoView(2054):  at dalvik.system.NativeStart.main(Native Method)
01-16 15:58:16.082: D/VideoView(2054): Error: 1,0
01-16 15:58:16.232: D/gralloc_goldfish(2054): Emulator without GPU emulation detected. 
```

在执行此操作时，我没有收到任何错误，但我收到一个标题为“无法播放视频”和消息“抱歉，无法播放此视频”的对话框。任何想法为什么我的代码不起作用？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-16T09:26:52.057

首先检查您是否在清单中添加了 INTERNET 权限。

接下来检查您的视频格式的扩展名是什么。

此[链接](http://www.wondershare.com/convert-video-audio/android-video-format.html)显示了 Android 手机和平板电脑支持的文件，并提供了编解码器和文件扩展名信息。但是，Android 应用程序可以使用任何支持 Android 的设备提供的媒体编解码器，也可以使用第三方公司开发的其他媒体编解码器。因此，如果您想在 Android 上播放视频，请找到多格式视频播放器或将视频转换为 Android 兼容格式。

请参阅此 Android 支持的媒体格式[链接](http://developer.android.com/guide/appendix/media-formats.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:35:28.590

更改您的网址：

```
http://172.16.154.106:8080 
```

至 ：

```
http://172.16.154.106:8080/ 
```

如果android设备支持这种格式就可以了。

# c# - 如何在 mvc 中存储数据以便在跨应用程序中使用它

> ID：14354935
> 
> 赞同：0
> 
> 时间：2013-01-16T09:24:04.087
> 
> 标签：c#, asp.net-mvc-3, asp.net-mvc-4

在我的应用程序中，当用户当时登录时，我想存储一些用户信息，例如名字、姓氏、ID、员工 ID 等，我想在我的 Web 应用程序的许多地方使用这些信息。以前我使用的是表单身份验证

```
FormsAuthentication.SetAuthCookie(empDetails.Employee.EmployeeId, false); 
```

但它只存储一个参数。我想存储将在我的应用程序中使用的多个数据。

谁能告诉我最好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:30:05.910

auth cookie 可用于保存字符串。这个字符串可以编码你想要的所有数据。我通常会创建一个包含我想要保存的所有信息的对象（例如 ConnectedUser 类）。然后我重写该类的 ToString() 以返回格式中的字符串，稍后我可以对其进行解码以重建 ConnectedUser 实例。如果您的所有模型都从单个基本模型继承，这甚至会变得更容易，那么基本模型可以具有 ConnectedUser 类型的属性，然后您可以扩展 DefaultModelBinder 并覆盖 OnModelUpdated() 以重建连接用户的实例。通常我通过一个接受请求上下文的方法来执行此操作，就像如果由于某种原因没有调用模型绑定器，我可以从代码中的其他地方调用它。

编辑

```
 public class ConnectedUser{

        public string FirstName{get;set;}
        public string LastName{get;set;}
        public override string ToString(){
            return string.format("FirstName{0}{1}{2}LastName{0}{3}",EqualDelimiter, FirstName, EntryDelimiter, LastName);
        }
     } 
```

现在在 Auth cookie 的构造函数中，而不是传入 userId，而是向它传递一个 ConnectedUser 的实例，其中填写了 FirstName 和 LastName。当收到请求时，您可以使用这两种方法检索连接的用户，这两种方法可以从defaultModelBinder 的自定义扩展或操作方法内部等。

```
 public static ConnectedUser GetConnectedUser(HttpContextBase executingContext)
    {
            var dictionary = GetAuthCookieData(executingContext);
            var toRet = new ConnectedUser
            {
                FirstName = dictionary["FirstName"],
                LastName= dictionary["LastName"]
            }
            return toRet;
     }
     public static IDictionary<string, string> GetAuthCookieData(HttpContextBase executingContext)
    {
        HttpCookie toCheck = executingContext.Request.Cookies[FormsAuthentication.FormsCookieName];
        FormsAuthenticationTicket decrypted = FormsAuthentication.Decrypt(toCheck.Value);
        string userData = decrypted.UserData;
        return userData.ToDictionary<string, string>();
    } 
```

扩展 DefaultModelBinder 应该很简单，只是不要忘记在 Global.asax 中注册它。网上有很多关于如何做到这两点的文章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T10:22:00.820

对于您的问题，我建议将您的价值存储在 `HTTPCOntext.Current.Session`

首先创建一个这样的类

```
 public class CurrentCustomer
    {
            public string FirstName { get; set; }
            public string LastName { get; set; }
            public string Email { get; set; }

            private string _Token;
            public string Token
            {
                get
                {
                    return _Token;
                }
                set
                {
                    _Token = value;
                }
            }
     } 
```

然后在用户登录后（意味着当用户被授权时）获取所有需要的数据填充您的 CurrentCustomer 对象，然后像这样创建您的 Seeion

```
HttpContext.Current.Session[CurrentCustomer] = CurrentCustomer; 
```

现在，无论您需要该值，请创建您的 CUrrentCUstomer 对象。

```
CurrentCustomr obj = ((CurrentCustomer)HttpContext.Current.Session[CurrentCustomer]); 
```

这就是你所需要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T09:32:25.863

您可以使用所需的所有参数存储 JSON 字符串：

```
{name:"NAME",id:"IDENTIFIER",email:"EMAIL"} 
```

然后在还原时解析它。

# c# - WP7 应用程序中 ApplicationBar 中的切换按钮

> ID：14354937
> 
> 赞同：4
> 
> 时间：2013-01-16T09:24:17.120
> 
> 标签：c#, windows-phone-7

我需要在我的 WP7 应用程序内的 AppBar 中有一个工具按钮。但除了 ApplicationBarIconButton，我什么也看不到。是否可以在 AppBar 中有一个切换按钮或使 ApplicationBarIconButton 充当切换按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T09:39:24.003

应用栏中没有切换按钮是不可能的。您可以使用应用程序栏图标按钮并根据用户操作更改图像

# antlr - 带变量的令牌定义

> ID：14354949
> 
> 赞同：0
> 
> 时间：2013-01-16T09:24:52.757
> 
> 标签：antlr

我正在编写一个语法来解析一个如下所示的日志文件：

```
V9013_MURGIN_AE_7340057[01/10/2013 10:07:33]:DEBUG:<PCDATA>
V9013_MURGIN_AE_7340057[01/10/2013 10:07:33]:DEBUG:<PCDATA>
etc... 
```

其中`PCDATA`可以包含任何符号（包括`\n`），并且“7340057”是一个 PID（进程 ID）。

问题是，如何描述结束`PCDATA`？

在你看到 a 之前，我不能说去 nonreedy 并匹配任何东西`V9013_MURGIN_AE_7340057`，因为那是 PID，它会在日志文件中发生变化，所以我不能将它的值硬编码为语法。

有没有办法做这样的事情：

1.  我第一次匹配 a `7340057`（或当前文件中的任何内容）时，将其放入某个 var 中，例如`$PID`
2.  描述`PCDATA`为 nongreedy `(.)*`-match until`$PID`也就是说，是否可以有一个变量（参数化）令牌定义？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T13:59:04.190

我同意不使用 ANTLR 的建议。

然而，我之前处理这个问题的方式（相当无效率）是这样的：

```
pcdata : (PID)=> () | . pcdata ; 
```

# php - 使用 PHP 检索 MySQL 字段

> ID：14354951
> 
> 赞同：0
> 
> 时间：2013-01-16T09:24:57.580
> 
> 标签：php, mysql

我需要使用 PHP 从 mySQL 数据库中获取一个字段问题是在我的 mysql 面板中我使用了这个 sql 代码：

```
SELECT * FROM TESTS WHERE TEST_ID=1 
```

我得到了我想要的（我看到了我想要显示的行）但是如果我在 PHP 中使用这段代码：

```
<?php
$con=mysql_connect("localhost", "root", "psw")  or die("\nConnection Failed\n");

mysql_select_db("mydb")or die("\nDB Failed\n");

$query = "SELECT * FROM TESTS WHERE TEST_ID=1";
$result=mysql_query($query);

echo $result;
mysql_close($con);
?> 
```

我得到的只是“资源 ID #3”

为什么？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T09:29:14.737

小心 ：

> 此扩展自 PHP 5.5.0 起已弃用，并将在未来删除。相反，应该使用 MySQLi 或 PDO_MySQL 扩展。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T09:29:57.680

$result 是一个资源，它是从 mysql 到结果集的链接。要获取实际数据，您必须执行以下操作：

```
$data = mysql_fetch_assoc($result);
print_r($data); 
```

您需要对要检索的每一行重复 mysql_fetch_assoc() 调用，直到它返回 false，表示没有更多行，这可以在 while 循环中完成，如下所示：

```
while ($data = mysql_fetch_assoc($result)) {
    print_r($data);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T09:26:51.620

您可以使用`mysql_fetch_assoc`

```
$result=mysql_query($query);
while ($row = mysql_fetch_assoc($result)) 
{
    echo $row["userid"]; // sample column
    echo $row["fullname"];
    echo $row["userstatus"];
} 
```

*   [mysql_fetch_assoc 示例](http://php.net/manual/en/function.mysql-fetch-assoc.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T09:27:19.197

您收到的是 MySQL 资源，而不是您想要的结果集。您只收到了指向结果的指针。

您必须使用 , 等函数`mysql_fetch_object`来`mysql_fetch_assoc`获得`mysql_fetch_row`想要的结果集。请在此处查看手册：

[http://php.net/manual/en/book.mysql.php](http://php.net/manual/en/book.mysql.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T09:30:15.350

尝试获取任何变量的结果并打印它会起作用。
像这样 ：

```
<?php
$con=mysql_connect("localhost", "root", "psw")  or die("\nConnection Failed\n");

mysql_select_db("mydb")or die("\nDB Failed\n");

$query = "SELECT * FROM TESTS WHERE TEST_ID=1";
$result=mysql_query($query);

$row = mysql_fetch_array($result)
print_r($row);

mysql_close($con);
?> 
```

希望对你有帮助... ：）

# oracle - 如何通过 mview 名称获取刷新作业 ID？

> ID：14354958
> 
> 赞同：2
> 
> 时间：2013-01-16T09:25:10.290
> 
> 标签：oracle, jobs, materialized-views

我正在使用类似的东西
`SELECT JOB FROM DBA_JOBS WHERE WHAT LIKE '%NAME_OF_MVIEW%'`
来获取刷新作业的 id，它通过 mv 的名称刷新物化视图。
（'WHAT' 的内容是`dbms_refresh.refresh('"SCHEMA_USER"."NAME_OF_MVIEW"')`）

我想知道是否有一个表或视图同时包含作业 ID 和 mv 名称，所以我可以使用 `select JOB ... where WHATEVER = 'NAME_OF_MVIEW'.`
或任何更好的方法来获取刷新作业 ID。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T12:38:52.923

你可以运行这个：

```
select m.*, r.job
  from dba_refresh r
       inner join dba_refresh_children rc
               on rc.rowner = r.rowner
              and rc.rname = r.rname
       inner join dba_mviews m
               on m.owner = rc.owner
              and m.mview_name = rc.name; 
```

并在 mview 的名称上添加应用 where 子句过滤。

# android - 使用 robolectric 和 eclipse 运行 android 测试用例时出现 TypeNotPresentException

> ID：14354962
> 
> 赞同：8
> 
> 时间：2013-01-16T09:25:20.183
> 
> 标签：android, eclipse, robolectric

我在我正在处理的 android 测试项目中设置了以下示例测试用例。

```
package com.whatever.test;

import static org.junit.Assert.fail;
import org.junit.Test;
import org.junit.runner.RunWith;
import com.xtremelabs.robolectric.RobolectricTestRunner;

@RunWith(RobolectricTestRunner.class)
public class SomeClassTest {

  @Test
  public void testFromJson() {
    fail("Not yet implemented");
  }

} 
```

我确实设置了一个 junit 运行配置，它使用 junit4 运行，并且我已经尝试过使用 Java 6（mac os x 默认）和 oracle 的 jdk 7。

无论我如何尝试，我总是会收到以下错误

```
 java.lang.TypeNotPresentException: Type com.xtremelabs.robolectric.RobolectricTestRunner not present
at sun.reflect.annotation.TypeNotPresentExceptionProxy.generateException(TypeNotPresentExceptionProxy.java:28)
at sun.reflect.annotation.AnnotationInvocationHandler.invoke(AnnotationInvocationHandler.java:57)
at $Proxy4.value(Unknown Source)
at org.junit.internal.builders.AnnotatedBuilder.runnerForClass(AnnotatedBuilder.java:24)
at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:57)
at org.junit.internal.builders.AllDefaultPossibilitiesBuilder.runnerForClass(AllDefaultPossibilitiesBuilder.java:29)
at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:57)
at org.junit.internal.requests.ClassRequest.getRunner(ClassRequest.java:24)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.<init>(JUnit4TestReference.java:33)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestClassReference.<init>(JUnit4TestClassReference.java:25)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestLoader.createTest(JUnit4TestLoader.java:48)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestLoader.loadTests(JUnit4TestLoader.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:452)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)

    Caused by: java.lang.ClassNotFoundException: com.xtremelabs.robolectric.RobolectricTestRunner
at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:247)
at sun.reflect.generics.factory.CoreReflectionFactory.makeNamedType(CoreReflectionFactory.java:95)
at sun.reflect.generics.visitor.Reifier.visitClassTypeSignature(Reifier.java:107)
at sun.reflect.generics.tree.ClassTypeSignature.accept(ClassTypeSignature.java:31)
at sun.reflect.annotation.AnnotationParser.parseSig(AnnotationParser.java:370)
at sun.reflect.annotation.AnnotationParser.parseClassValue(AnnotationParser.java:351)
at sun.reflect.annotation.AnnotationParser.parseMemberValue(AnnotationParser.java:280)
at sun.reflect.annotation.AnnotationParser.parseAnnotation(AnnotationParser.java:222)
at sun.reflect.annotation.AnnotationParser.parseAnnotations2(AnnotationParser.java:69)
at sun.reflect.annotation.AnnotationParser.parseAnnotations(AnnotationParser.java:52)
at java.lang.Class.initAnnotationsIfNecessary(Class.java:3070)
at java.lang.Class.getAnnotation(Class.java:3029)
at org.junit.internal.builders.IgnoredBuilder.runnerForClass(IgnoredBuilder.java:13)
... 12 more 
```

我正在使用捆绑在 adt 包中的最后一个 android sdk（api 级别 17），并且我正在使用 robolectric 1.1 作为外部 JAR。

如果以这种方式使用 eclipse 运行测试不是最好的，我愿意接受替代方案。

**编辑**：有人建议我检查 Robolectric 是否出现在类路径中的 Android 之前，我这样做了。问题仍然存在。

**编辑 2**：我已按照评论中的建议进行操作，但它们似乎都不起作用，错误仍然存​​在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:28:26.260

你看过这两个讨论吗：

[使用 Maven surefire 插件运行 Robolectric 测试时出现 ClassNotFoundException](https://stackoverflow.com/questions/7082698/getting-classnotfoundexception-when-running-robolectric-tests-with-the-maven-sur)

[https://groups.google.com/forum/?fromgroups=#!topic/robolectric/6c8WmE-qjlk](https://groups.google.com/forum/?fromgroups=#!topic/robolectric/6c8WmE-qjlk)

# jpa - Eclipse链接如何查询

> ID：14354964
> 
> 赞同：0
> 
> 时间：2013-01-16T09:25:24.550
> 
> 标签：jpa, eclipselink

我开始使用 eclipse 链接，从我在网上阅读的内容来看，eclipse 链接是某种 JPA 实现，当您使用 eclipse 链接时，您不会直接使用 DB 代码来处理对象。

我的问题是，如果不是 DB 命令，这是什么？

```
Query q = em
        .createQuery("SELECT p FROM Person p WHERE p.firstName = :firstName AND p.lastName = :lastName"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T09:30:24.977

这是[JPQL](http://en.wikipedia.org/wiki/Java_Persistence_Query_Language)。你可以在[这里找到更多](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/JPQL)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:46:10.327

它的 JPA 查询相当于`SELECT * FROM PERSON WHERE FIRSTNAME='Stefan' and LASTNAME='Strooves';`您需要进一步设置参数的值。

```
Query q = em
    .createQuery("SELECT p FROM Person p WHERE p.firstName = :firstName AND 
                                               p.lastName = :lastName");
q.setParameter("firstName", "Stefan");
q.setParameter("lastName", "Strooves");
List<Person> resultList = q.getResultList(); 
```

结果列表包含`Person`与查询匹配的所有实体。

# android - GSON 抛出“预期为 BEGIN_OBJECT 但为 BEGIN_ARRAY”？

> ID：14354971
> 
> 赞同：1
> 
> 时间：2013-01-16T09:25:51.737
> 
> 标签：android, json, json.net, gsoap

我有以下 JSON 响应。

```
 {"message":"[{\"first_name\":\"Sushant\",\"last_name\":\"Bhatnagar\",\"receiver_id\":\"19\",\"docket_number\":\"Test12\",\"status\":\"open\"}]","code":200,"format":"json"} 
```

我创建了两个类来解析它，如下所示：-

```
 public class JsonResponse implements Serializable {

public String code;
public String format;
public List<Message> message; 
```

}

公共类消息实现可序列化{

```
public String first_name;
public String last_name;
public String receiver_id;
public String docket_number;
public String status; 
```

}

使用 GSOAP 解析 json ，出现上述错误。解析 JSON 的代码是：-

```
 public static JsonResponse readDockets(String mobileNumber) {
    JsonResponse res = new JsonResponse();
    HttpClient client = new DefaultHttpClient();
    String service = "http://api.pod.iamwhiney.com:8994/api.php?path=/deliveryRecord/refresh/"+"9968395206";
    HttpGet httpGet = new HttpGet(service);
    try {
        HttpResponse response = client.execute(httpGet);
        StatusLine statusLine = response.getStatusLine();
        int statusCode = statusLine.getStatusCode();
        if (statusCode == 200) {            

            HttpEntity getResponseEntity = response.getEntity();
            InputStream httpResponseStream = getResponseEntity.getContent();
            Reader inputStreamReader = new InputStreamReader(httpResponseStream);               
            Gson gson = new Gson();
            res = gson.fromJson(inputStreamReader, JsonResponse.class);

        } else {

        }
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    return res;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T09:17:15.877

我不知道你为什么使用 Gson，因为 Android 有它自己的 JSON 解析器构建。至于你得到的错误......这是因为你正在解析的 JSON 是 JSONArray，而不是 JSONObject。我不太确定@Yaqub 在看什么，但您的 JSON 响应应如下所示：

```
{"message":    
    {"first_name":"Sushant",
     "last_name":"Bhatnagar".....
     "status":"open"
    },"code":"200","format":"json"} 
```

也就是说，没有 [ ] 围绕内容，因为这告诉 JSON 解析器它是一个只有 1 个索引的 JSON 数组，而您显然想要一个单一的 JSON 对象。上面的 JSONString 将允许您解析它，您可以从“消息”标签中获取 JSONObject。

**注意**：我已经删除了转义，因为我想通过解析器运行我的编辑，但是您可以轻松地将它们重新添加，它应该仍然可以工作。

**注意**：`"code":200`在您的原始 JSON 中必须是，`"code":"200"`否则您将在那里收到另一个错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T09:09:49.497

您的`JSon`字符串应采用以下格式：

```
{
  sections: 
      [
          {
             "SectionId": 1,
             "SectionName": "Android"
          }
      ]
} 
```

# mysql - mysql - 创建行时触发

> ID：14354974
> 
> 赞同：-1
> 
> 时间：2013-01-16T09:26:04.080
> 
> 标签：mysql, database, triggers, insert

我想在表中插入一行时`create new rows`在 表中触发。`b``a`

我有一张`staff_leave_application`这样的桌子：

```
id |  staff     |   leave type  | start date | end date       |  is half  |
---+------------+---------------+------------+----------------+-----------+
 1 | John Doe   |  Casual Leave | 17/01/2013 | 20/01/2013     |     0     | 
```

如果在这个表中插入了一行，那么它将触发并插入到另一个表中`leave`

要插入到`leave`表中的数据：

拆分日期范围`start date`-`end date`到一天，例如：

```
17/01/2013 - 20/01/2013 will be

17/01/2013
18/01/2013
19/01/2013
20/01/2013 
```

现在每天插入每行`leave`表，以及`staff_leave_application`s 列 `ID, staff, leave type`。

感谢Sharsh，我按照@Shaharsh shah 的回答得到了这个。

```
DELIMITER $$

USE `mydb`$$

CREATE
    /*!50017 DEFINER = 'root'@'localhost' */
    TRIGGER `tn_air_staff_leave_application` AFTER INSERT ON `staff_leave_application` 
    FOR EACH ROW BEGIN
        SET @counter := -1; 
        WHILE (@counter < DATEDIFF(DATE(new.end_date), DATE(new.start_date))) DO 
            INSERT INTO `leave`(staff_id_staff, leave_type_id_leave_type, staff_leave_application_id_staff_leave_application, leave_date) 
            VALUES (new.staff_id_staff, new.leave_type_id_leave_type, new.id_staff_leave_application, DATE_ADD(new.start_date, INTERVAL @counter:=@counter + 1 DAY)); 
        END WHILE; 
END;
$$ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:38:53.617

尝试这个：

```
DELIMITER $$

DROP TRIGGER /*!50032 IF EXISTS */ `tn_air_staff_leave_application`$$

CREATE
    /*!50017 DEFINER = 'root'@'localhost' */
    TRIGGER `tn_air_staff_leave_application` AFTER INSERT ON `staff_leave_application` 
    FOR EACH ROW BEGIN
        SET @counter := -1; 
        WHILE (@counter < DATEDIFF(DATE(new.endDate), DATE(new.startDate))) DO 
            INSERT INTO `leave`(staffId, leaveType, leaveDate) 
            VALUES (new.id, new.leaveType, DATE_ADD(new.startDate, INTERVAL @counter:=@counter + 1 DAY)); 
        END WHILE; 
END;
$$

DELIMITER ; 
```

**删除触发器**

```
DELIMITER $$

DROP TRIGGER /*!50032 IF EXISTS */ `tn_adr_staff_leave_application`$$

CREATE
    /*!50017 DEFINER = 'root'@'localhost' */
    TRIGGER `tn_adr_staff_leave_application` AFTER DELETE ON `staff_leave_application` 
    FOR EACH ROW BEGIN
          DELETE FROM `leave` WHERE staffId = old.id;
END;
$$

DELIMITER ; 
```

# java - Eclipse Juno 的 HQL 编辑器，带有基于注释的休眠

> ID：14354976
> 
> 赞同：1
> 
> 时间：2013-01-16T09:26:10.113
> 
> 标签：java, sql, eclipse, hibernate, hql

我正在使用带有 Eclipse Juno 的 Hibernate 3.6。是否有任何插件可用于运行 HQL 查询，就像我们使用 SQL 客户端进行原生 SQL 查询一样？

我们 **没有使用 .hbn.cfg ，而是使用注解和 JPA 的 entityManager**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T11:51:39.947

将 HQL 查询构建器用作 JBoss 的 Hibernate 工具的一部分

[JBoss 的休眠工具 http://iablog.sybase.com/paulley/wp-content/uploads/2009/03/hql_editor_view.PNG](http://iablog.sybase.com/paulley/wp-content/uploads/2009/03/hql_editor_view.PNG)

# apache - 不同文件夹上的 Apache 2 + 虚拟主机

> ID：14354977
> 
> 赞同：0
> 
> 时间：2013-01-16T09:26:12.583
> 
> 标签：apache

我的应用程序有一个名为**www**的文件夹：
/www/app1_folder/
/www/app2_folder/
/www/app3_folder/

我还有一个外部 ip 和域名**www.example.org***。

如果我在没有虚拟主机设置的情况下引用我的应用程序 它看起来：
[http ://www.example.org/app1_folder/](http://www.example.org/app1_folder/)
[http://www.example.org/app2_folder/](http://www.example.org/app2_folder/)
[http://www.example.org/app3_folder/](http://www.example.org/app3_folder/)

但问题是我的应用程序共享一个会话环境。

我想保存我的应用程序引用的方法（即**[http://www.example.org/app1_folder/](http://www.example.org/app1_folder/)**，...）而不共享环境。

我希望通过 apache 的虚拟主机设置可以实现。

**如何根据文件夹的不同名称（即 app1_folder、app2_folder、app2_folder）制作虚拟主机？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:31:53.257

虚拟主机由域名 (foo.mysite.com) 和端口 (:80, ...) 定义。

您不能使用相同的域名/端口创建多个虚拟主机。

# jquery - 我怎样才能做到这一点？更喜欢使用常规的 html 和 css

> ID：14354980
> 
> 赞同：1
> 
> 时间：2013-01-16T09:26:26.097
> 
> 标签：jquery, html, css

有什么方法可以在不使用 jquery 的情况下完成此操作？

![在此处输入图像描述](../Images/07b0da148436bdee8f82e75687b72259.png)

图像的宽度会从小、中和大变化。产品将具有大小属性​​。

我考虑过只使用左浮动，但这不会起作用，因为大图会迫使 2 左下角一次，一直到下一行。

如果我必须使用 jquery，哪个插件是最好的？

编辑：列表的顺序不同，这意味着图片的大小不会总是在同一位置。向左浮动，向右浮动将不起作用

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T09:31:58.487

也许您正在寻找[jQuery Masonry](http://masonry.desandro.com/)：

> Masonry 是一个 jQuery 的动态网格布局插件。将其视为 CSS 浮动的另一面。浮动将元素水平排列然后垂直排列，而砌体垂直排列元素，将每个元素定位在网格中的下一个开放点。结果使不同高度的元素之间的垂直间隙最小化，就像石匠在墙上安装石头一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T09:31:51.770

![](../Images/228b2294de6e74d75acb8716280a1049.png) 也许使用这个 div 结构？所以红色是全宽，其他是 50%

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T09:28:00.273

制作将包含底部 4 辆汽车（小汽车）的盒子并漂浮在左边

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T09:45:59.590

试试下面的结构

```
 <div>
       <img src="smallimg1/>
       <img src="smallimg2/> 
       <img src="smallimg3/>
       <img src="smallimg4/> 

        </div>

        <div>

   <div id="div1"> 
       <img src="smallimg1/>
       <img src="smallimg2/> 
       <img src="smallimg3/>
       <img src="smallimg4/> 
    </div>
    <div id="div2"> 
       <img src="bigimg1/>          
    </div>

</div> 
```

CSS 代码

```
img
{
float:left;
}
#div1
{
width:50%;
}
#div2
{
width:50%;
} 
```