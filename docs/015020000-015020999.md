# StackOverflow 问答 15020000-15020999

# bash - 在 shell 脚本中嵌入 awk

> ID：15020000
> 
> 赞同：18
> 
> 时间：2013-02-22T08:41:50.683
> 
> 标签：bash, awk

我一直在使用一个 bash 脚本（script.sh），它使用各种 awk 脚本（script1.awk，script2.awk），这些脚本是在“运行时”定制的，例如通过替换值。我一直在寻找将它们完全嵌入到第一个 bash 脚本中的方法。理想情况下，我希望有一个如下所示的文件：

```
################################
# AWK scripts                  #
################################
read -d '' scriptVariable <<'EOF'
'
{my block commands;}
'
EOF
################################
# End of AWK Scripts           #
################################
awk $scriptVariable ${inputfile} # This line obviously doesn't work 
```

而不是传统的：

```
awk '{
my script commands
' ${intputfile} 
```

当然，我可以将它们写入文件，但重点不是。有什么建议么 ？

编辑：虽然 dogbane 答案工作正常，但下一个问题是使用 <<'HERE' 标记时，不会读取换行符。我无法取消引用它，否则，他试图解释 awk 脚本然后遇到 $ 符号内（并且有）。并且没有换行符，我无法在 awk 脚本中评论任何内容（在删除换行符时不评论脚本的一半......）。任何人 ？

```
<< 'EOF'
BEGIN{#Hello
print $1
}
EOF # Is read as BEGIN{#Hello print $1} by awk; ie BEGIN{

<< EOF
BEGIN{#Hello
print $1
}
EOF #Is read correctly by awk but Bash tried to express $1 and fails 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-22T09:12:17.500

删除 awk 脚本周围的单引号并将脚本变量括在双引号中。这对我有用：

```
################################
# AWK scripts                  #
################################
read -d '' scriptVariable << 'EOF'
BEGIN {
    print "start"
}
{
    print $0
}
END{
    print "hello"
}
EOF
################################
# End of AWK Scripts           #
################################

awk "$scriptVariable" ${inputfile} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T09:18:14.593

awk 脚本周围的单引号在 shell 中可能会很糟糕。

```
echo dummy code | awk '/dummy/{print '$1' $2}' - another_file | while read LINE; do
    case $LINE in
        "$1 code")echo success;;
        *)echo $LINE;;
    esac
done 
```

这将从 stdin 中删除，然后是 another_file 和包含 dummy 的输出行，并将第一个字段替换为 bash 脚本的第一个参数。请注意，bash 变量 $1 必须不加引号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T08:54:19.743

您可以使用[Here-Document](http://en.wikipedia.org/wiki/Here_document#Unix_shells)将 awk 包含在 bash 脚本中。

# iphone - 定期从服务器下载文件并通知应用程序

> ID：15020004
> 
> 赞同：0
> 
> 时间：2013-02-22T08:42:06.757
> 
> 标签：iphone, ios, objective-c, uilocalnotification

[我再次对链接setKeepAliveTimeout 和 BackgroundTasks](https://stackoverflow.com/questions/4777499/setkeepalivetimeout-and-backgroundtasks)中指定的类似疑问。

我必须定期从服务器获取文件并相应地提供本地通知。这必须在应用程序处于后台状态时完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T08:56:47.110

在您的界面中创建 backgoud 任务：

```
@property (nonatomic) UIBackgroundTaskIdentifier bgTask; 
```

比创建背景工作的方法：

```
- (void) backgroundMethod {

dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

    //create backgriund task;
    self.bgTask = [[UIApplication sharedApplication] beginBackgroundTaskWithExpirationHandler:^{
        [[UIApplication sharedApplication] endBackgroundTask: self.bgTask];
        self.bgTask = UIBackgroundTaskInvalid;
    }];

    //do your stuff;
    [[UIApplication sharedApplication] endBackgroundTask: self.bgTask];
    self.bgTask = UIBackgroundTaskInvalid;
});
} 
```

并在您需要时定期调用它。

# objective-c - 从另一个类访问 NSMutableArray

> ID：15020009
> 
> 赞同：0
> 
> 时间：2013-02-22T08:42:23.303
> 
> 标签：objective-c, xcode, nsmutablearray

这就是我的实体类的外观：

BaseDataEntity.h

```
#import -Foundation/Foundation.h

@interface BaseDataEntity : NSObject

@property (assign) NSMutableArray *cbxDataList;
@property (assign) NSString  *resaultText;

@end 
```

基本数据实体.m

```
#import "BaseDataEntity.h"

@implementation BaseDataEntity

@synthesize cbxDataList = _cbxDataList;
@synthesize resaultText = _resaultText;

@end 
```

这就是我尝试访问它们的方式：

```
-(void)applicationDidFinishLaunching:(NSNotification *)aNotification{

    BaseDataEntity *aBaseDataEntity = [[BaseDataEntity alloc] init];
    [self setBaseDataEntity:aBaseDataEntity];

}

-(IBAction)ReadPort:(id)sender {

    NSMutableArray* array = [[NSMutableArray alloc] init];
    for (int i=0; i<10; i++) {
        NSString *temp = [NSString stringWithFormat:@"Test %d", i];
        [array addObject:temp];
    }
    [self.baseDataEntity setCbxDataList:array];

    NSLog(@" cbxDataList count = %lu",[array count]);
    [array release];

    [self.baseDataEntity setResaultText:@"Test"];
    [self updateUserInterface:TRUE];
}

-(void)updateUserInterface:(BOOL)piClear{

    NSString *textValue = [NSString stringWithFormat:@"%@"
                           ,[self.baseDataEntity resaultText]];

    if([self.ResaultTextField stringValue] != nil && !piClear){
        textValue = [NSString stringWithFormat:@"%@\n%@", textValue
                     ,[self.ResaultTextField stringValue]];
    }

    NSMutableArray* array = [[NSMutableArray alloc] initWithArray:
        [self.baseDataEntity.cbxDataList value]];

    for (int i = 0; i < [array count]; i++) {
        textValue = [NSString stringWithFormat:@"%@\n%@", textValue
                     ,[array objectAtIndex:i]];
    }
    [array release];

    [self.ResaultTextField setStringValue:textValue];
} 
```

问题是我可以更新`resaultText`并访问它的价值。但是`cbxDataList`值总是空的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T09:04:16.267

试试这些：

```
@property (retain) NSMutableArray *cbxDataList; 
@property (assign) NSString  *resaultText; 
```

而在`-(void)applicationDidFinishLaunching:(NSNotification *)aNotification`

alloc+init 他们两个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T08:58:52.037

您应该使用保留而不是分配来增加 cbxDataList 的保留计数。

```
@property (retain) NSMutableArray   *cbxDataList; 
```

请注意，该对象需要在某个时候被释放，否则您可能会发生内存泄漏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T09:01:17.570

在下面的函数中，

```
-(void)updateUserInterface:(BOOL)piClear 
```

数组创建错误。

```
NSMutableArray* array = [[NSMutableArray alloc] initWithArray:
        [self.baseDataEntity.cbxDataList value]]; 
```

上面的代码需要替换为，

```
NSMutableArray* array = [[NSMutableArray alloc] initWithArray:
        self.baseDataEntity.cbxDataList]; 
```

# javascript - 为什么 Facebook Javascript SDK 会异步加载？

> ID：15020011
> 
> 赞同：8
> 
> 时间：2013-02-22T08:42:35.190
> 
> 标签：javascript, facebook, asynchronous, sdk

我在我的 Facebook 应用程序中使用标准的 Facebook Javascript 代码，这是我在 Heroku 上的示例应用程序中获得的。我不是很理解，但是通过小心，我已经能够修改示例应用程序来做一些对我有用的基本事情。

我的理解是这段代码以某种方式加载了 Facebook Javascript SDK。也就是说，它加载一个 javascript 代码文件。它真正加载的是什么文件？为什么我不能像加载任何其他 javascript 代码文件一样加载它？例如：

```
<script type="text/javascript" src="/javascript/jquery-1.7.1.min.js"></script> 
```

这种高度复杂的方法的缺点是我无法对其进行正面或反面，并且因为我不理解它，所以我对如何使用它没有直觉。

代码在这里：

```
<script type="text/javascript">
  window.fbAsyncInit = function() {
    FB.init({
      appId      : '<?php echo AppInfo::appID(); ?>', // App ID
      channelUrl : '//<?php echo $_SERVER["HTTP_HOST"]; ?>/channel.html', // Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true // parse XFBML
    });

    // Listen to the auth.login which will be called when the user logs in
    // using the Login button
    FB.Event.subscribe('auth.login', function(response) {
      // We want to reload the page now so PHP can read the cookie that the
      // Javascript SDK sat. But we don't want to use
      // window.location.reload() because if this is in a canvas there was a
      // post made to this page and a reload will trigger a message to the
      // user asking if they want to send data again.
      window.location = window.location;
    });

    FB.Canvas.setAutoGrow();
  };

  // Load the SDK Asynchronously
  (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T09:26:38.720

它使您的网站加载速度更快，因为它不需要等待来自 facebook 服务器的响应。

window.fbAsyncInit 是一个回调，在脚本加载时执行。所以当 facebook 服务器关闭时，这个函数永远不会被调用。

加载 API 后，API 的所有功能都可用。只需检查文档。 [http://developers.facebook.com/docs/reference/javascript/](http://developers.facebook.com/docs/reference/javascript/)

希望这可以澄清。

# java - 可以在 JSlider 上设置未知值吗？

> ID：15020015
> 
> 赞同：0
> 
> 时间：2013-02-22T08:42:53.837
> 
> 标签：java, swing, jslider

**短**：
可以在没有旋钮的 JSlider 上设置未知值吗？

**Long**：
我正在做一个项目，该项目有一个用 Java Swing 开发的桌面客户端，用户需要使用滑块测量一些参数。这是一个要求，它必须是一个滑块。
在用户与滑块交互之前，该值必须是未知的，这意味着不显示任何旋钮。这也是一个要求。
使用`JSlider`旋钮时，始终显示并且无法将任何值设置为超出其范围或将其设置为 null，因为它使用原始类型`int`而不是对象`Integer`。
有没有办法将它设置为空失败值或至少一些显示没有旋钮的值？是否有一些扩展允许这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T08:47:54.763

自己实现`BasicSliderUI`并覆盖`paintThumb(Graphics g)`以执行您需要的操作。

也看看这里：[如何隐藏 jSlider 的旋钮？](https://stackoverflow.com/questions/4021191/how-to-hide-the-knob-of-jslider)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T20:55:18.833

在 Harry Joy 的大力帮助下隐藏旋钮，我终于能够解决问题。

如果您检查哈利的答案，您可以阅读有关覆盖`BasicSliderUI.paintThumb(Graphics)`隐藏旋钮的方法的信息。它适用于大多数不基于 Synth（这意味着 Nimbus）的 L&F，其中方法会有所不同，但可以通过 L&F 上的自定义来实现。

安装它有点棘手：有一个检查 L&F`PropertyChangeListener`上`UIManager`的任何更改并在组件上安装一个适当的 UI 委托会产生魔力（在这个解决方案中，我只是展示基于`BasicSliderUI`其他的一个是复制粘贴） . 此外，我对其进行了一些调整，使其将值设置为第一次单击的位置。为了让代表知道它是否必须绘制旋钮，我决定在被`JSlider`调用对象上有一个客户端属性`"ready"`，即`boolean`. 这样，委托可以安装在任何一个`JSlider`，而不仅仅是一个扩展的。

现在，如何管理未知值？添加另一个新属性`"selectedValue"`，这个属性绑定到`"value"`and`"ready"`和`Integer`类型。`"ready"`is `false`or`true`取决于它是否`null`存在，反之亦然，并且两者都`"value"`保持`"selectedValue"`相同的值（一个存在`int`和另一个`Integer`），除非没有准备好，这会将 设置`"selectedValue"`为`null`. 听起来可能很复杂，但事实并非如此。还有一些调整用于使用 [Esc] 清除值并在实现的组件中传播属性。

这是代码：

BasicSliderUIExt

```
import java.awt.Graphics;
import java.awt.event.MouseEvent;
import javax.swing.JSlider;
import javax.swing.SwingConstants;
import javax.swing.plaf.basic.BasicSliderUI;

public class BasicSliderUIExt extends BasicSliderUI {

    public BasicSliderUIExt(JSlider slider) {
        super(slider);
    }

    @Override
    public void paintThumb(Graphics g) {
        if (isReady(super.slider)) {
            super.paintThumb(g); 
        }
    }

    @Override
    protected TrackListener createTrackListener(final JSlider slider) {
        return new TrackListener() {
            @Override
            public void mousePressed(MouseEvent event) {
                if (isReady(slider)) {
                    super.mousePressed(event);
                } else {
                    JSlider slider = (JSlider) event.getSource();
                    switch (slider.getOrientation()) {
                    case SwingConstants.VERTICAL:
                        slider.setValue(valueForYPosition(event.getY()));
                        break;
                    case SwingConstants.HORIZONTAL:
                        slider.setValue(valueForXPosition(event.getX()));
                        break;
                    }
                    super.mousePressed(event);
                    super.mouseDragged(event);
                }
            }

            @Override
            public boolean shouldScroll(int direction) {
                if (isReady(slider)) {
                    return super.shouldScroll(direction);
                }

                return false;
            }};
    }

    public static boolean isReady(JSlider slider) {
        Object ready = slider.getClientProperty(JSliderExt.READY_PROPERTY);
        return (ready == null) || (!(ready instanceof Boolean)) || (((Boolean) ready).booleanValue());
    }

} 
```

JSliderExt

```
import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;
import java.beans.PropertyChangeEvent;
import java.beans.PropertyChangeListener;
import java.lang.reflect.Constructor;
import javax.swing.BoundedRangeModel;
import javax.swing.JSlider;
import javax.swing.LookAndFeel;
import javax.swing.UIManager;
import javax.swing.plaf.SliderUI;

public class JSliderExt extends JSlider {

    private static final long serialVersionUID = 1L;

    public static final String EXTENT_PROPERTY = "extent";
    public static final String MAXIMUM_PROPERTY = "maximum";
    public static final String MINIMUM_PROPERTY = "minimum";
    public static final String READY_PROPERTY = "ready";
    public static final String SELECTED_VALUE_PROPERTY = "selectedValue";
    public static final String VALUE_PROPERTY = "value";

    public static final boolean READY_DEFAULT_VALUE = false;

    protected SliderUI uix = new BasicSliderUIExt(this);

    public JSliderExt(BoundedRangeModel model, boolean ready) {
        super(model);

        init(ready);
    }

    public JSliderExt(BoundedRangeModel model) {
        super(model);

        init(READY_DEFAULT_VALUE);
    }

    public JSliderExt(int orientation, int minimmum, int maximum, int value, boolean ready) {
        super(orientation, minimmum, maximum, value);

        init(ready);
    }

    public JSliderExt(int orientation, int minimmum, int maximum, int value) {
        super(orientation, minimmum, maximum, value);

        init(READY_DEFAULT_VALUE);
    }

    public JSliderExt(int minimmum, int maximum, int value, boolean ready) {
        super(minimmum, maximum, value);

        init(ready);
    }

    public JSliderExt(int minimmum, int maximum, int value) {
        super(minimmum, maximum, value);

        init(READY_DEFAULT_VALUE);
    }

    public JSliderExt(int minimmum, int maximum, boolean ready) {
        super(minimmum, maximum);

        init(ready);
    }

    public JSliderExt(int minimmum, int maximum) {
        super(minimmum, maximum);

        init(READY_DEFAULT_VALUE);
    }

    public JSliderExt(int orientation, boolean ready) {
        super(orientation);

        init(ready);
    }

    public JSliderExt(int orientation) {
        super(orientation);

        init(READY_DEFAULT_VALUE);
    }

    public JSliderExt(boolean ready) {
        super();

        init(ready);
    }

    public JSliderExt() {
        super();

        init(READY_DEFAULT_VALUE);
    }

    private void init(boolean ready) {
        UIManager.addPropertyChangeListener(new PropertyChangeListener() { // Changes the UI delegate in L&F change
            @Override
            public void propertyChange(PropertyChangeEvent event) {
                if ("lookAndFeel".equals(event.getPropertyName())) {
                    Object newValue = event.getNewValue();
                    if ((newValue != null) && (newValue instanceof LookAndFeel)) {
                        LookAndFeel lookAndFeel = (LookAndFeel) newValue;

                        try {
                            if (lookAndFeel instanceof MetalLookAndFeel) {
                                JSliderExt.this.uix = new MetalSliderUIExt();
                            } else if (lookAndFeel instanceof com.sun.java.swing.plaf.motif.MotifLookAndFeel) {
                                JSliderExt.this.uix = new MotifSliderUIExt(JSliderExt.this);
                            } else if (lookAndFeel instanceof com.sun.java.swing.plaf.windows.WindowsLookAndFeel) {
                                JSliderExt.this.uix = new WindowsSliderUIExt(JSliderExt.this);
                            } else {
                                throw new NullPointerException("Default Look & Feel not matched");
                            }
                        } catch (Exception e) {
                            try {
                                Package sliderPackage = JSliderExt.this.getClass().getPackage();
                                String lookAndFeelName = lookAndFeel.getName();
                                if (lookAndFeelName.equals("CDE/Motif")) {
                                    lookAndFeelName = "Motif";
                                } else if (lookAndFeelName.equals("Windows Classic")) {
                                    lookAndFeelName = "Windows";
                                } else if (lookAndFeelName.startsWith("JGoodies")) {
                                    lookAndFeelName = "Basic";
                                }

                                Class<?> sliderUiType = Class.forName(sliderPackage.getName() + "." + lookAndFeelName
                                        + "SliderUIExt");

                                Constructor<?> constructor1 = null;
                                try {
                                    constructor1 = sliderUiType.getConstructor(JSlider.class);
                                } catch (Exception e3) { // Nothing to do here
                                }
                                Constructor<?> constructor0 = null;
                                try {
                                    constructor0 = sliderUiType.getConstructor();
                                } catch (Exception e3) { // Nothing to do here
                                }

                                Object sliderUi = null;
                                if (constructor1 != null) {
                                    sliderUi = constructor1.newInstance(JSliderExt.this);
                                } else if (constructor0 != null) {
                                    sliderUi = constructor0.newInstance();
                                }

                                if ((sliderUi != null) && (sliderUi instanceof SliderUI)) {
                                    JSliderExt.this.setUI((SliderUI) sliderUi);
                                }
                            } catch (Exception e2) {
                                JSliderExt.this.uix = new BasicSliderUIExt(JSliderExt.this);
                            }
                        }
                    } else {
                        JSliderExt.this.uix = new BasicSliderUIExt(JSliderExt.this);
                    }
                    updateUI();
                }
            }});

        addPropertyChangeListener(new PropertyChangeListener() {
            @Override
            public void propertyChange(PropertyChangeEvent event) {
                String propertyName = event.getPropertyName();

                if (READY_PROPERTY.equals(propertyName)) {
                    Object newValue = event.getNewValue();

                    if ((newValue == null) || (!(newValue instanceof Boolean)) || (((Boolean) newValue).booleanValue())) {
                        setSelectedValue(Integer.valueOf(getValue()));
                    } else {
                        setSelectedValue(null);
                    }
                } else if (SELECTED_VALUE_PROPERTY.equals(propertyName)) {
                    Object newValue = event.getNewValue();
                    System.out.println(newValue);

                    if ((newValue != null) && (newValue instanceof Integer)) {
                        int value = getValue();
                        int newSelectedValue = ((Integer) newValue).intValue();

                        if (value != newSelectedValue) {
                            setValue(newSelectedValue);
                        }

                        setReady(true);
                    } else {
                        setReady(false);
                    }

                    repaint();
                } else if (VALUE_PROPERTY.equals(propertyName)) {
                    setReady(true);

                    Object newValue = event.getNewValue();

                    if ((newValue != null) && (newValue instanceof Integer)) {
                        setSelectedValue((Integer) newValue);
                    }
                }
            }});

        addKeyListener(new KeyAdapter() { // Enables escape key for clearing value
            @Override
            public void keyPressed(KeyEvent event) {
                if (event.getKeyCode() == KeyEvent.VK_ESCAPE) {
                    JSliderExt.this.setReady(false);
                }
            }});

        setReady(ready);
    }

    @Override
    public void setValue(int value) {
        int oldValue = getValue();
        super.setValue(value);
        firePropertyChange(VALUE_PROPERTY, Integer.valueOf(oldValue), Integer.valueOf(value));
    }

    @Override
    public void setExtent(int extent) {
        int oldExtent = getExtent();
        super.setExtent(extent);
        firePropertyChange(EXTENT_PROPERTY, Integer.valueOf(oldExtent), Integer.valueOf(extent));
    }

    @Override
    public void setMinimum(int minimum) {
        int oldMinimum = getMinimum();
        super.setMinimum(minimum);
        firePropertyChange(MINIMUM_PROPERTY, Integer.valueOf(oldMinimum), Integer.valueOf(minimum));
    }

    @Override
    public void setMaximum(int maximum) {
        int oldMaximum = getMaximum();
        super.setMaximum(maximum);
        firePropertyChange(MAXIMUM_PROPERTY, Integer.valueOf(oldMaximum), Integer.valueOf(maximum));
    }

    public Integer getSelectedValue() {
        return (Integer) getClientProperty(SELECTED_VALUE_PROPERTY);
    }

    public void setSelectedValue(Integer selectedValue) {
        putClientProperty(SELECTED_VALUE_PROPERTY, selectedValue);
    }

    public boolean isReady() {
        Object ready = getClientProperty(READY_PROPERTY);
        return ((ready != null) && (ready instanceof Boolean)) ? ((Boolean) ready).booleanValue()
                : READY_DEFAULT_VALUE;
    }

    public void setReady(boolean waiting) {
        putClientProperty(READY_PROPERTY, Boolean.valueOf(waiting));
    }

    @Override
    public void updateUI() {
        setUI(this.uix);
        updateLabelUIs();
    }

} 
```

请注意，使用此代码可能需要根据您的应用程序在选择代理时进行一些更改，因为这适用于 Windows 系统。如前所述，Synth/Nimbus 必须以不同的方式工作，而且任何自定义 L&F 或 OSX 都需要适当的委托来扩展并添加到侦听器上。

# ruby-on-rails - has_many 关联属性设置器是否始终将其值保存到数据库中，是否可以不保存？

> ID：15020016
> 
> 赞同：4
> 
> 时间：2013-02-22T08:42:59.533
> 
> 标签：ruby-on-rails, has-many-through, has-many, rails-activerecord

我有以下脚本，它向我展示了 has_many`roles=`属性始终以持久的方式工作。

我的问题是：

1）这种行为背后的原因是什么：为什么 has_many 属性在它们被设置的那一刻就被持久化了？为什么与常规属性行为有这种差异（`name`在以下脚本中）？

2）我可以编写我的自定义`roles=`设置器，以便我可以将 fx`assign_attributes`用于一堆模型属性（包括角色=）而无需保留角色关联吗？如果 Rails > 3.2 有可能，我会很感激一个例子？

这是脚本：

```
gem 'rails', '>=3.2.0' # change as required
gem 'sqlite3'

require 'active_record'
require 'logger'

puts "Active Record #{ActiveRecord::VERSION::STRING}"
ActiveRecord::Base.logger = Logger.new(STDERR)

ActiveRecord::Base.establish_connection(
  :adapter  => 'sqlite3',
  :database => ':memory:'
)

ActiveRecord::Schema.define do
  create_table :users, :force => true do |t|
    t.string :name
  end

  create_table :user_roles, :force => true do |t|
    t.integer :user_id
    t.integer :role_id
  end

  create_table :roles, :force => true do |t|
    t.string :name
  end
end

# Create the minimal set of models to reproduce the bug
class User < ActiveRecord::Base
  has_many :user_roles
  has_many :roles, :through => :user_roles
end

class UserRole < ActiveRecord::Base
  belongs_to :user
  belongs_to :role
end

class Role < ActiveRecord::Base
end

r = Role.create(:name => 'admin')
u = User.create

# roles= persists its value, name= does not
u.assign_attributes({ :roles => [r], :name => 'Stanislaw' })

# The same behavior is produced by:
# u.attributes=
# u.roles=

puts "name attribute: #{u.name}"
puts "many roles #{u.roles}"

u.reload

puts "name attribute: #{u.name}"
puts "many roles #{u.roles}" # I see admin role and I want to achieve behavior that I would not see it 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T08:52:34.107

关联与属性不同。例如，对于 has_many 关联，您在分配时所做的只是在 belongs_to 端设置外键。

```
class User < ActiveRecord::Base
  has_many :posts
end

class Post < ActiveRecord::Base
  belongs_to :user
end

p = Post.create
u = User.create
u.posts << p # this line will simply update p.user_id with u.id 
```

在您的示例中，将角色分配给用户的连接表将创建一个 UserRole 记录并设置 user_id/role_id 记录。发生这种情况是因为您声明了`has_many :through`

至于防止这种行为，您可以使用存储未持久角色的虚拟属性，直到您保存记录，然后创建关联。

```
class User < ActiveRecord::Base
  attr_accessor :unpersisted_roles
  attr_accessible :unpersisted_roles

  after_save :assign_roles

  def assign_roles
    self.roles << @unpersisted_roles if defined(@unpersisted_roles)
  end
end

r = Role.create
u = User.create
u.attributes = {:unpersisted_roles => [r]}
u.save # roles get persisted here 
```

这只是一个简单的示例，实际代码可能需要更复杂或需要更深入地研究 AR 的界面才能使其正常工作而不会产生太多副作用。

如果您能提供一些关于您为什么不想坚持该关联的见解，我可能会提出更具体的行动方案。

**更新**

参考[问题 #3](https://github.com/stanislaw/simple_roles/issues/3)并附有一些更改的评论。

```
module SimpleRoles
  module Many
    module Persistence
      class << self
        def included base
          base.class_eval %{
            has_many :user_roles
            has_many :roles, :through => :user_roles
            # Add a callback to persist the roles
            after_create :persist_roles
          }
        end
      end

      def roles
        # Apply unpersisted roles in case we want to access them before saving
        super.map(&:name).map(&:to_sym) + (@unpersisted_roles || [])
      end

      def roles= *rolez
        rolez.to_symbols!.flatten!

        # if we're already persisted then go ahead and save
        # otherwise stash them in an ivar array
        if persisted?
          super retrieve_roles(rolez)
        else
          @unpersisted_roles = rolez
        end
      end

      private

      # Our callback method that sets the roles, this will
      # work since persisted? is true when this runs.
      def persist_roles
        self.roles = @unpersisted_roles
      end

      def retrieve_roles rolez
        raise "Not a valid role!" if (rolez - config.valid_roles).size > 0

        rolez.map do |rolle|
          begin
            Role.find_by_name! rolle.to_s
          rescue
            raise "Couldn't find Role for #{rolle}. Maybe you need to re-run migrations?"
          end
        end
      end

      def config
        SimpleRoles::Configuration
      end
    end
  end
end 
```

# javascript - 如果损坏了在哪里交换图像

> ID：15020018
> 
> 赞同：-1
> 
> 时间：2013-02-22T08:43:01.073
> 
> 标签：javascript, jquery, onerror

我在页面上使用了很多加载到 DOM 中的图像，例如

```
html += '<img src="'+image.preview+'" title="View larger image" alt="'+image.item_title+'" height="'+image.display_height+'" width="'+image.display_width+'">'; 
```

数据来自 ajax 调用并且在 FOR 循环中，每个图像一个。我有两个图像参考，以防一个被破坏`image.preview`并且`image.preview2`（我使用两个，因为 image.preview 是本地的，但如果出现错误，那么 image.preview2 是原始图像）

如果`image.preview`坏了我想切换到`image.preview2`

我正在尝试以下但不确定将其放置在哪里？

```
$('img').on('error', function() { this.src = image.preview2; }); 
```

我在之前，之后，中间都试过`html +=`，但似乎没有任何效果 - 有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T08:51:20.727

如果`preview2`图像源对于每个图像都不同，那么我建议在`for`循环中这样做：

```
for(n in images) {
    var image = images[n];

    // create jQuery object (is not in the DOM jet)
    $img = $('<img title="View larger image" alt="' + image.item_title + '" height="' + image.display_height + '" width="' + image.display_width + '">');

    // is there an preview src?
    if(typeof image.preview == 'Undefined' || image.preview == '') { //nopes
        $img.attr('src', image.preview2);
    } else { //yes
        $img.attr('src', image.preview);
    }

    // add the image to the DOM
    $('#id_of_element').append($img);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T08:51:37.730

> 例子：

```
function setDefaultImage(img)
{
  img.src = "images/candidates/human.jpg";
} 
```

希望对你有帮助..

> 在你的场景中..

```
html += '<img src="'+image.preview+'" title="View larger image" alt="'+image.item_title+'" height="'+image.display_height+'" width="'+image.display_width+'" onerror="'setDefaultImage(this)'">';

 function setDefaultImage(img)
    {
      img.src = "image.preview2";
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T08:50:13.497

你可以做：

```
var newImg = $('<img src="'+image.preview+'" title="View larger image" alt="'+image.item_title+'" height="'+image.display_height+'" width="'+image.display_width+'">');
newImg.on('error', function() { this.src = image.preview2; }); 

and then

<the html container>.append(newImg); 
```

这将确保您的图像在添加到 dom 并获取之前具有所有设置。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-22T10:45:30.377

找出最简单的方法是内联：

```
html += '<img src....onerror="this.onerror=null;this.src=\''+image.preview2+'\';">'; 
```

# asp.net-mvc - .load() 中的 jQuery .load()

> ID：15020020
> 
> 赞同：0
> 
> 时间：2013-02-22T08:43:05.020
> 
> 标签：asp.net-mvc, jquery, razor

我有 3 个部分视图

**视图 1：**

```
//_yard.cshtml
@model Yard
<div>@Model.Name</div>
<div class="yard"></div>

@foreach(var house in Model.Houses)
{
  <script  type="text/javascript">
  $(document).ready(function{
   $(".yard").load("/community/Houses");
  });
  </script>
} 
```

**查看 2**

```
//_houses.cshtml
@model House
<div>@Model.Name<div>
<div class="house"></div>
@foreach(var level in Model.levels)
{
  <script  type="text/JavaScript">
  $(document).ready(function{
    $(".house").load("/Community/Levels");
  });
  </script>
} 
```

**视图 3：**

```
//_levels.cshtml
@model Level
<div>@Model.Name<div>
<div class="room"></div>
@foreach(var room in Model.Rooms)
{
  <script  type="text/JavaScript">
  $(document).ready(function{
    $(".room").load("/Community/Rooms");
  });
  </script>
} 
```

上面的示例显示我正在使用 加载`View 1`另一个视图中的`jQuery Load()`a ，然后加载`View 2`withing `View 1`，然后以此类推，但是，第一个 load() 工作正常，但后续加载不会触发。

我认为这是由于该`$(document).ready();`功能未重置，但是，我不确定如何在每次加载时重置它。

**使用 MVC解决** 的问题，默认模板在页面底部呈现 jQuery 脚本。我将它移到顶部，并且 ajax 负载工作。

我知道这没有任何意义，但它解决了问题。在对为什么这可以解决问题进行更多调查后，我将更新问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T08:48:45.713

**编辑：** *一般来说，下面的答案很有帮助，但我认为真正的问题是 JavaScript 中的语法错误。代码行最后`.load()`都有一个太多`)`。修复该问题，通过检查浏览器中的 JavaScript 控制台确保没有更多语法错误，然后也使用以下建议 :-)*

考虑`$(document).ready();`被“重置”是没有帮助的，因为它不是也不能被“重置”。

这是一个在 DOM 第一次完全加载并准备好被 JavaScript 操作时触发的事件。该事件仅在第一次加载网页时发生一次。任何后续的 AJAX 请求都不会`$(document).ready();`在页面上触发新事件。然而，它们会触发其他事件——但不会`$(document).ready();`。

`$(document).ready();`从视图 2 和 3 中删除，您的代码将起作用。（提示：您应该将 JavaScript 包装在`<script>`标签中，否则在某些浏览器中可能会出现一些奇怪的行为）。

AJAX 请求完成时触发的事件可能会帮助您：

*   `$.ajax();`有一个`success`//处理程序`error`。`complete`
*   `.load();`有一个`complete`处理程序。

# python - 读取带有嵌套 for 循环的 .csv 文件，仅获取最后一行

> ID：15020021
> 
> 赞同：0
> 
> 时间：2013-02-22T08:43:04.880
> 
> 标签：python, csv, for-loop

我正在尝试读取 .csv 文件并创建一个浮点值的二维数组。这是我到目前为止所做的：

```
import csv
filename  = 'data_out.csv'   
# create an array for the for the data    
row_values = [None]*len(header)   
all_values = []

reader = csv.reader(open(filename,'rt'),delimiter=',')
next(reader) #skip header line
for row in reader:
    i=0
    for item in row:
        value = float(item)
        row_values[i]=value
        i=i+1
        print(row_values)
    all_values.append(row_values)

print(all_values) 
```

打印（row_values）看起来像它的作品。每行都放入一个浮点值列表中。但是当我打印（all_values）时，它不起作用。我创建了一个列表列表（正确的行数），但它只是一遍又一遍地重复的最后一行值。也许我的 .append() 在错误的位置？

我应该说这是我第一次用 python 编程，但我已经用 C++ 编程多年了。任何帮助/提示将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T09:06:51.600

您只需创建一个数组对象并将相同的数组对象附加到列表中。所以只有最后一行在最终输出中重复。

您应该在第一级循环内创建数组对象并将其附加到列表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T09:07:03.197

问题是每次附加数组时都会`all_values`存储对数组的*引用，**而不是副本*。因此， 的所有元素都是指向同一个数组的引用，您在每次迭代中覆盖其中的值。`row_values`*`all_values``row_values`*

 *看这个，例如：

```
b = []

a = [1, 2]
b.append(a)
print b

a[0] = 3
b.append(a)
print b

print id(b[0]), id(b[1]) 
```

这与您的程序具有相同的效果，它将`[[3, 2], [3, 2]]`为第二条`print`语句打印。最后一条`print`语句显示了 中两个值的 id `b`，它是相同的，这意味着 b 中的两个元素是同一个元素。

因此，您的循环的固定（和更多 Pythonic）版本将是：

```
reader = csv.reader(open(filename,'rt'),delimiter=',')
for row in reader:
    row_values = [float(item) for item in row]
    all_values.append(row_values)

print all_values 
```

第三行使用列表推导将所有值转换`row`为浮点数并将它们存储在一个*新*数组中，然后将其附加到`all_values`.*

# c# - 使用 ODBC 返回 SQL Server 结果集时出错

> ID：15020022
> 
> 赞同：1
> 
> 时间：2013-02-22T08:43:08.847
> 
> 标签：c#, sql-server, odbc

我正在将现有应用程序从 Sybase 转换为 SQL Server 2008。该应用程序使用 ODBC 连接到数据库。简单地更改连接字符串对大多数应用程序功能都有效，但有一个错误让我感到困惑。我创建了一个显示错误的简单示例。

我有一个存储过程：

```
create procedure dbo.test_sel
as 
begin
  create table #cfg
  (
    Name  varchar(100) NULL,
    Dscr  varchar(50)  NULL
  )

  insert #cfg(Name, Dscr) 
  values('Config', 'Config description')

  select COUNT(*) as [Count] from #cfg

  return 0
end 
```

以及执行存储过程并将结果加载到 DataTable 中的代码：

```
{
    OdbcCommand cmd = new OdbcCommand("test_sel", new OdbcConnection("Driver={SQL Server};Server=xxx;Database=xxx;Uid=xxx;Pwd=xxx"));

    DataTable dt = new DataTable();

    OdbcDataAdapter da = new OdbcDataAdapter(cmd);

    using (cmd.Connection)
    {
        da.Fill(dt);
    }

    MessageBox.Show(dt.Rows.Count.ToString());
} 
```

我希望消息显示值 1 并且 DataTable 包含单行。但是 DataTable 是空的（不返回结果集）。

现在，如果我注释掉`insert`存储过程中的语句并重新运行代码，那么我会得到一个返回的结果集，其中包含一行、一列名为 count 的值为 0。

我已经尝试了存储过程的许多变体，例如使用永久表而不是临时表，但每次发生相同的事情时 - 插入会阻止存储过程返回结果集。

将 ODBC 驱动程序更改为 SQL Server 2008 没有任何区别。该代码在使用 Sybase 和在 MS SQL Server Management Studio 中运行时按预期工作。

谷歌搜索后，我尝试了以下代码：

```
{
    SqlCommand cmd = new SqlCommand("test_sel", new SqlConnection("Server=xxx,5100;Database=xxx;User ID=xxx;Password=xxx"));

    DataTable dt = new DataTable();

    SqlDataAdapter da = new SqlDataAdapter(cmd);

    using (cmd.Connection)
    {
        da.Fill(dt);
    }

    MessageBox.Show(dt.Rows.Count.ToString());
} 
```

现在这可行，但如果我能提供帮助，我宁愿不为此更改代码，因为该应用程序需要在两个数据库上运行。

谁能建议为什么原始代码不起作用？看起来很简单的东西应该可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T09:07:03.220

您可以使用 2 个选项来完成这项工作（对我来说，这似乎是错误，因为`Fill`两者都`OdbcDataAdapter`应该`SqlDataAdapter`同样工作）：

1）在程序的开始`begin`关键字后添加

```
set nocount on 
```

2）使用作为参数的`Fill`方法的重载，而不是采用的方法。`DataSet``DataTable`

MSDN指出：*以DataTable为参数的Fill的重载只得到第一个结果*。

当`INSERT`执行并`NOCOUNT`关闭时，将返回有关受语句影响的行数的信息。因此，当您关闭此选项时，将报告 2 次行数（您可以在 SSMS 的“消息”窗口中检查），一次用于 INSERT，第二次用于 SELECT。似乎第一行计数（来自 INSERT）以某种方式被解释为第一个结果集，该行计数`INSERT`不是指语句`SELECT`，因此没有要返回的行。

# ios - 带有 libxml2 的 Apple Mach-O 链接器警告

> ID：15020024
> 
> 赞同：1
> 
> 时间：2013-02-22T08:43:18.483
> 
> 标签：ios, xcode, warnings, libxml2

在 xcode4.6 中，我添加了 libxml2 库并使用 -lxml2 编辑了“其他链接器标志”，使用 /usr/include/libxml2 编辑了“（用户）头部搜索路径”，现在我收到了这个警告： [http://i46.tinypic .com/91icjm.png](http://i46.tinypic.com/91icjm.png)

有人知道我该如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T09:16:58.490

如果您使用的是 Xcode IDE 和一个普通的 Xcode 项目，那么将 -lxml2 添加到链接器标志并不是与其链接的最佳方式。您最好将其添加到项目中，如下所示：

1.  单击项目（文件浏览器中的最顶部节点）
2.  在 Build Phases 中，在“Link Binary With Libraries”下，单击 +。您将获得可以链接的 dylib 和框架列表。
3.  从列表中选择 libxml2.dylib。

适用于我在 Xcode 4.5.2 上的 Mac 项目。

# python - Python 给出了错误的 md5 校验和

> ID：15020029
> 
> 赞同：1
> 
> 时间：2013-02-22T08:44:03.377
> 
> 标签：python, md5, hashlib

我正在使用python做一个下载管理器来自动验证md5校验和......问题是python给出了一个错误的md5，我与第三方md5验证软件进行了交叉检查。

我正在使用 hashlib 来检查 md5 .. 这是我的 md5 校验和代码对于某些文件，它使 md5 正确，但对于其他文件，它完全错误...

```
x= sys.path[0]
x= x + '\\' + file_name
print 'file successfully saved to path', x
file_ref=open(x,'rb').read()
hashlib.md5(file_ref).hexdigest()
print 'MD5 of file is:',hashlib.md5(file_ref).hexdigest() 
```

网站上原始文件的 md5：e557fa76ed485fd10e8476377ad5be95

python给出的md5：cb3b2227733d3344dba15e5e39d04f43

md5验证者给出的md5：e557fa76ed485fd10e8476377ad5be95

请帮忙 ：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T08:49:35.010

读取某些文件是正确的，但对于其他文件是错误的，您可以检查您的路径。这是我用于 md5 的：

```
def hashsum(path, hex=True, hash_type=hashlib.md5):
    hashinst = hash_type()
    with open(path, 'rb') as f:
        for chunk in iter(lambda: f.read(hashinst.block_size * 128), b''):
            hashinst.update(chunk)
    return hashinst.hexdigest() if hex else hashinst.digest() 
```

您可以使用它来比较：

```
myhash = hashsum(cfile)
sproc = subprocess.Popen(['md5', cfile], stdout=subprocess.PIPE)
syshash = sproc.communicate()[0].split()[0]
print myhash
print syshash
print 'Hash idetntical' if myhash == syshash else 'Hash check fail' 
```

`cfile`文件的路径在哪里。我猜你的路径是错误的。我猜windows所以`sys.path[0]`不是获取当前目录的正确方法。

# java - 防病毒软件阻止了我的 inno setup 编译的可执行 .exe 文件

> ID：15020032
> 
> 赞同：0
> 
> 时间：2013-02-22T08:44:24.280
> 
> 标签：java, jar, inno-setup, antivirus

我正在使用 inno setup 编译器创建 exe 文件，但防病毒解决方案阻止了我编译的 exe 文件。我该怎么做才能在我的 inno 脚本中解决它。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T09:26:37.540

这取决于防病毒软件阻止您的可执行文件的原因。

[如果将其标记为感染，那么您唯一的选择是在使用VirusTotal](http://virustotal.com)确认它是干净的之后，将其作为误报报告给防病毒供应商。

如果它是一个通用的“可疑文件”，那么您可以尝试在防病毒软件中调整级别或像以前一样报告它。

# java - 如何在 Windows 上的 jenkins 中编译和运行一个简单的 java 文件

> ID：15020034
> 
> 赞同：8
> 
> 时间：2013-02-22T08:44:25.690
> 
> 标签：java, windows, compilation, jenkins

我已经在 Windows 上安装了 Jenkins 并在 Jenkins 中创建了一份工作。我想编译并执行一个简单的 java 文件（比如 Hello.java）。我怎样才能做到这一点？

我的 Hello.java 包含以下代码：

```
public class Hello {
    public static void main(String args[]){
        System.out.println("I'm dancing");
    }
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-22T08:54:48.563

1.  转到您的工作/项目的配置页面
2.  从“添加构建步骤”组合中选择“执行 Windows 批处理命令”
3.  在命令字段中键入以下内容： javac Hello.java java Hello
4.  保存配置
5.  将 Hello.java 保存在 /Jenkins/workspace/ 文件夹中
6.  通过单击“立即构建”链接构建项目/作业并查看控制台输出

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T08:51:50.560

查看 Maven 以在 Jenkins 等持续集成服务器上自动构建：http: [//www.sonatype.com/books/mvnref-book/reference/public-book.html](http://www.sonatype.com/books/mvnref-book/reference/public-book.html)

甚至还有一个 exec 插件，它允许您使用 Maven 执行 Java 程序，但这在持续集成服务器上很少需要。

# php - 如何减少多进程 PHP 应用程序的内存占用

> ID：15020038
> 
> 赞同：0
> 
> 时间：2013-02-22T08:44:51.090
> 
> 标签：php, multithreading, memory-management, compilation

我有一个连续运行的多进程 PHP (CLI) 应用程序。我正在尝试优化内存使用，因为每个进程使用的内存量限制了我在任何给定时间可以运行的分叉数量（因为我有有限的可用内存量）。我尝试了几种方法。例如，按照[preinheimer](https://stackoverflow.com/a/14877107/896660)给出的建议，我重新编译了 PHP，禁用了所有扩展，然后只重新启用了我的应用程序所需的那些（mysql、curl、pcntl、posix 和 json）。但是，这并没有减少内存使用量。它实际上略有增加。

我几乎准备好放弃多进程方法，但我正在做最后的努力，看看是否有其他人对如何减少内存使用有更好的想法。我将在下面发布我的替代方法，其中涉及对我的应用程序进行重大重构。

非常感谢任何可以帮助我应对这一挑战的人！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T09:08:08.590

多进程 PHP 应用程序（例如使用`pcntl_fork()`. 这可以很容易地等同于每个进程 10 MB 的内存或更多（取决于应用程序）。理论上，将扩展编译为共享库应该可以减少内存占用，但我在这方面的成功有限（实际上，我在这方面的尝试由于某种未知原因而使内存使用情况变得更糟）。

更好的方法是使用多线程。在这种方法中，应用程序驻留在单个进程中，但多个操作可以在单独的线程中*同时**执行（即多任务）。传统上，PHP 对于多线程应用程序并不理想，但最近一些新的扩展使 PHP 中的多线程变得更加可行。例如，请参阅[this answer](https://stackoverflow.com/a/12487840/896660) to an question about multithreading in PHP（其接受的答案相当过时）。

对于上述问题，我计划使用[pthreads](https://github.com/krakjoe/pthreads)将我的应用程序重构为多头应用程序。这需要大量的修改，但它会（希望）为应用程序带来更高效的整体架构。我将在继续进行时更新此答案，并为其他想做类似事情的人提供一些重构示例。其他人随时提供反馈，并使用代码示例更新此答案！

*关于并发的脚注：除非有一台多核机器，否则这些操作实际上不会*同时*执行。但是它们将被安排在不同的小时间片中在 CPU 上运行。从用户的角度来看，它们似乎是同时运行的。

# ftp - sftp 中的传输模式类型

> ID：15020039
> 
> 赞同：2
> 
> 时间：2013-02-22T08:44:53.217
> 
> 标签：ftp, sftp, edtftpj

ftp 和 sftp 传输器类型在传输模式（二进制、ASCII）方面有什么区别吗？在 sftp 传输中，我们是否仍然有二进制和 ASCII 传输选项，或者无论我们选择与否，它都有其默认模式。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-22T08:57:15.090

[`SFTP`](http://en.wikipedia.org/wiki/SSH_File_Transfer_Protocol)在传输模式之上工作`ssh`并且没有等效的`FTP`传输模式。换句话说，`SFTP`传输始终是二进制的，精确到字节。

你不应该[`SFTP`](http://en.wikipedia.org/wiki/SSH_File_Transfer_Protocol)混淆[`FTPS`](http://en.wikipedia.org/wiki/FTPS)。`FTPS`很像 old `FTP`，但是 over `SSL`，并且被一些服务器支持。因为它仍然是封装在 SSL 中的旧 FTP，所以它支持传输模式的概念（ascii 或二进制）。但是，FTPS 服务器在野外非常少见，我认为很难真正遇到。

# hook - 使用 netfilter 框架在 OUTPUT 链中实现 DNAT

> ID：15020040
> 
> 赞同：1
> 
> 时间：2013-02-22T08:44:52.863
> 
> 标签：hook, nat, netfilter

我正在尝试在 OUTPUT 链中实现 DNAT，但数据包没有到达目标目的地。我正在尝试做的是，例如，如果消息发送到 192.168.56.17，我将其更改为 192.168.56.1，并且此 ip 在我的网络中，因此应该发送。

代码是：

```
#include <linux/module.h>       //needed for every module
#include <linux/kernel.h>

#include <linux/types.h>        //u_int && co
#include <linux/skbuff.h>       //struct sk_buff
#include <linux/in.h>           //basic internet shiat
#include <linux/ip.h>           //protocol headers
#include <linux/tcp.h>
#include <linux/netfilter.h>        //need this for register_ 
#include <linux/netfilter_ipv4.h>   //..
#include <linux/netdevice.h>        //struct net_device 

#define NR_OF_VLANS 3
#define MAX_UNIQUE_ADDRS 16
#define IFACE0 "vboxnet0"
#define IFACE1 "eth0"
#define IFACE2 "eth0.1"
#define INIT_ADDR 0x0038A8C0

MODULE_AUTHOR("tomak");
MODULE_DESCRIPTION("dnat");

static struct nf_hook_ops NF_hook_out;

static int change_ip_out(struct iphdr* iph)
{
    //examine last byte of dest ip addr
    __be32 daddr = iph->daddr;
    //Note: big endian => we need first byte of the structure
    __be32 offset = daddr - INIT_ADDR;
    //printk(KERN_INFO "be32 offset %pI4\n", &(offset));
    __u32 uOffset = be32_to_cpu(offset);
    //printk(KERN_INFO "offset: %d", uOffset);
    __u32 uRemainder = uOffset % MAX_UNIQUE_ADDRS ;
    __be32 remainder = cpu_to_be32(uRemainder);
    //printk(KERN_INFO "remainder is: %pI4\n", &remainder);
    int division = (int)(uOffset / MAX_UNIQUE_ADDRS);

    //change ip and put on right iface
    iph->daddr = INIT_ADDR + remainder;
    printk(KERN_INFO "OUT changed daddr to %pI4\n", &(iph->daddr));

    if (division == 0) {
        return NF_ACCEPT;
    }
    return NF_REPEAT;
}

u_int hook_fcn_out( u_int hooknum,          //the hook number  (linux/netfilter_ipv4.h)
                struct sk_buff **skpp,      //pointer to a pointer with an sk_buff(mad ****) (linux/skbuff.h)
                const struct net_device *in,    //only valid for recieved
                const struct net_device *out,   //only valid for outgoing  (linux/netdevice.h)
                int (*okfn)(struct sk_buff *))  //called from net/core/netfilter.c ??
{   
    int result;
    int i = 0;
    int max_addrs = MAX_UNIQUE_ADDRS * NR_OF_VLANS;
    __be32 test_addr[max_addrs];                        //addresses to check
    struct iphdr* iph = ip_hdr(skpp);                   //getting ip header

    //addresses for detection
    __be32 addr = INIT_ADDR;
    for(i = 0; i < max_addrs; i++){
        test_addr[i] = addr;
        addr = addr + 0x01000000;     //+1
    }
    //detecting ips
    for(i = 0; i < max_addrs; i++){
        if(memcmp(&(iph->daddr),&test_addr[i], sizeof(test_addr[0])) == 0) {
            printk(KERN_INFO "OUT detected message to address %pI4\n", &(iph->daddr));
            printk(KERN_INFO "OUT message detected to interface %s\n", out->name);
            result = change_ip_out(iph);
            return result;
        }
    }
    /* printk(KERN_INFO "Detected output message to daddr: %pI4\n", &(iph->daddr));
    printk(KERN_INFO "Message detected for interface: %s\n", out->name); */

    return NF_ACCEPT; 
}

int init_module(void)
{   
    printk(KERN_DEBUG "nat_up\n");

    NF_hook_out.hook = hook_fcn_out;
    NF_hook_out.hooknum = NF_INET_LOCAL_OUT;
    NF_hook_out.pf = PF_INET;
    NF_hook_out.priority = NF_IP_PRI_NAT_DST;

    //register hook functions
    nf_register_hook(&NF_hook_out);

    return 0;
}

void cleanup_module(void)
{   
    printk(KERN_DEBUG "nat_down\n");
    nf_unregister_hook(&NF_hook_out);
} 
```

有谁知道问题出在哪里。我的猜测是优先级，但即使 NF_INET_PRI_FIRST 也不起作用。

非常感谢您的意见和帮助。

托马斯

# c# - 如何在asp.net mvc3中为特定的Controller和Action创建url路由

> ID：15020041
> 
> 赞同：2
> 
> 时间：2013-02-22T08:44:55.550
> 
> 标签：c#, asp.net-mvc-3, url-routing

我在 Asp.net mvc3 应用程序中工作。我已经为这样的产品详细信息页面创建了 url

```
routes.MapRoute(
   "ProductDetail",
   "{category}/{title}-{id}",
   new { controller = "ProductDetail", action = "Index" }
); 
```

对于使用这个的其他控制器

```
routes.MapRoute(
  "Default",   
  "{controller}/{action}/{id}",    
  new { controller = "Home", action = "Index", id = UrlParameter.Optional }
); 
```

以下代码创建此网址

`www.example.com/Shoes/blackshoes-100`

现在的问题是，如果添加任何其他控制器和操作名称，我想将此 URL 用于 ProductDetail 页面，它将像这样重定向到 ProductDetail 页面

`www.example.com/Home/Index-100`

如何限制 ProductDetail 页面的此 url？

这是正确的方法吗？

我想隐藏 Productdetail 页面的控制器和操作。

每个产品的类别、标题和 ID 值都在变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T08:49:52.677

您必须为您拥有的任何其他页面定义路线并在映射您的产品详细信息路线之前映射这些路线。然后路由匹配机制会首先找到它们并使用它们。

当然，您不必为每个操作都映射路线。您可以为不同的控制器创建一些前缀，例如下面的示例，以捕获 Home 控制器操作的所有路由：

```
routes.MapRoute(
    "Home",
    "Home/{action}/{id}",
    new { controller = "Home", action = "Index", id = "" }
); 
```

# php - 首先在浏览器上显示脚本结果，然后在 php 中运行包含文件

> ID：15020045
> 
> 赞同：1
> 
> 时间：2013-02-22T08:44:59.120
> 
> 标签：php, include

我有一个显示结果的脚本，然后我调用一个包含文件以间隔运行。我希望脚本结果显示在浏览器上，然后包含文件将在后面运行。现在我的浏览器正在连接但什么也没有显示。我希望浏览器回显完成并记录。

```
<?php
ob_implicit_flush(true);
require_once('syslog.php');
$syslog = new Syslog();
$line="My msg";
$hostname = gethostname();
$ip= @$REMOTE_ADDR;
$hostnameip = GetHostByName($ip);
$syslog->Send('127.0.9.1', $hostname." ".$hostnameip." ".$line);
echo"Done";
echo "Logging......";
ob_end_flush();  
include('execute.php');
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T08:47:49.427

在最后一个回显之后包含之前尝试[刷新（） 。](http://php.net/manual/en/function.flush.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T08:49:23.593

我相信您可以通过在命令`flush()`后立即调用该方法来获得所需的内容。`echo`

该[`flush()`功能](http://php.net/manual/en/function.flush.php)描述为 -

> 刷新 PHP 的写入缓冲区以及 PHP 正在使用的任何后端（CGI、Web 服务器等）。这试图将当前输出一直推送到浏览器，但有一些警告。

使用此功能时有一些特殊注意事项。某些 apache 模块和客户端缓冲仍将被强制执行，但就目前而言，我相信这会有所帮助。

# selenium - Selenium IDE：如何弹出对话框并等待用户单击确定

> ID：15020047
> 
> 赞同：3
> 
> 时间：2013-02-22T08:45:09.823
> 
> 标签：selenium, selenium-ide

只是想知道我们是否可以在运行 selenium 场景时执行以下操作，这需要用户交互才能继续。喜欢等他上传一些图片..

1.  直到这一步，selenium 会弹出一个对话框说：请完成一些事情，然后单击确定按钮继续。

2.  当用户在网页上完成操作后，点击“确定”，则场景的事务正在向前推进。否则，就停在那一步。

对于第一个项目符号，我正在考虑以下命令：

**命令：**

```
waitForConfirmation 
```

**目标：**

```
javascript{confirm("Please upload the images, then click OK to continue")} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T08:58:59.347

在 selenium ide 中使用 storeeval 命令，不同类型的盒子

```
COMMAND   |    TARGET                                            | VALUE
----------------------------------------------------------------------------
storeeval | alert("This is alert box")                           |
storeeval | prompt("This is prompt box. Please enter the value") | text
storeeval | confirm("this is cofirm box")                        |
Type      | locator of text box                                  | ${text} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-23T07:10:11.583

1.) 我们可以创建一个消息框，并且可以将消息框中给出的值赋给一个文本框。

命令：StoreEval

目标：提示{（“输入消息”）}

值：文本

这里会弹出一个弹出消息框，您可以在其中输入一些文本，它将存储在变量“文本”中，文本中的值可以分配给文本框或其他

命令：类型

目标：id=文本框的id

值：${文本}

2.）和上面一样，我们可以创建一个警告框

命令：StoreEval

目标：alert{("输入消息")}

试试这些东西

谢谢你。

# spring-data - QueryDSL - 在 FROM 语句中添加子查询

> ID：15020049
> 
> 赞同：3
> 
> 时间：2013-02-22T08:45:19.313
> 
> 标签：spring-data, querydsl

我需要实现 sql 查询，例如：

```
SELECT * FROM (SELECT a FROM b WHERE a.z = 1) WHERE rownum <=1; 
```

如何使用 QueryDSL 编写这样的语句（我没有使用 JPA 和 JDO - 只使用干净的 sql）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T10:36:17.943

Querydsl SQL 模拟所有支持数据库的分页，所以你可以直接写

```
query.from(a)
    .where(a.z.eq(1))
    .limit(1)
    .list(a); 
```

如果您需要通过子查询来编写它，那么就像这样

```
query.from(
  new SQLSubQuery().from(a).where(a.z.eq(1)).list(a).as(a))
 .where(rownum.loe(1))
 .list(a); 
```

# url - Google 未显示正确的网址

> ID：15020050
> 
> 赞同：-1
> 
> 时间：2013-02-22T08:45:21.327
> 
> 标签：url, seo

嗨，我有自己的 URL [http://www.manelsoft.com](http://www.manelsoft.com)当通过 google 搜索时，它没有显示正确的 URL，而 google 显示另一个 URL 为[http://mail.dreamfordarfur.org/](http://mail.dreamfordarfur.org/)但是当单击此链接时，它显示正确的地址。几个月前，我将此 URL 添加到 google 网站管理员工具，几天前它显示一条错误消息，指出 google 无法在您的网站上加入 robots.txt。然后我修复了它并添加了 robots.txt 文件。但问题仍然存在。请问谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T11:22:46.767

你说当你点击`http://mail.dreamfordarfur.org/`你会看到“正确”的地址。但是，我仍然在浏览器的地址栏中看到 mail.dreamfordarfur.org。对我来说，您的完整网站似乎已显示。

dreamfordorful.org 和 manelsoft.com 似乎托管在同一台服务器上：

```
;; ANSWER SECTION:
mail.dreamfordarfur.org. 14215  IN  CNAME   dreamfordarfur.org.
dreamfordarfur.org. 14215   IN  A   173.237.136.37
;; ANSWER SECTION:
www.manelsoft.com.  14186   IN  CNAME   manelsoft.com.
manelsoft.com.      14186   IN  A   173.237.136.37 
```

dreamfordarfur.org 是使用私有 DNS 注册的，所以我不知道谁拥有它。它似乎是一个推销减肥药的垃圾邮件网站，所以你不想与它联系在一起。

问题是您使用的网络服务器配置错误。您的站点要么设置为显示任何无法识别的主机名的默认站点，要么 mail.dreamfordarfur.org 的虚拟主机指向托管您的 manelsoft.com 站点的目录。如果您可以控制 Web 服务器，则应更正其配置。

如果您无法控制此 Web 服务器并且只是使用脑死亡托管公司，那么除了要求他们修复 Web 服务器之外，您还可以做一些事情。

您应该在每个页面中放置一个[规范标签](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=139394)，以显示该页面的正确 url 应该是什么。例如，您的主页应在该`<head>`部分中包含以下内容：

```
<link rel="canonical" href="http://www.manelsoft.com/"/> 
```

您可以做的另一件事是将某些导航更改为绝对链接。如果您将菜单的代码更改为：

```
<ul class="menu">
  <li><a class="active" href="http://www.manelsoft.com/">Home Page</a></li>
  <li><a href="http://www.manelsoft.com/web.php">Web Development</a></li>
  <li><a href="http://www.manelsoft.com/desktop.php">Desktop Apps</a></li>
  <li><a href="http://www.manelsoft.com/about.php">About Us</a></li>
  <li class="last-item"><a href="http://www.manelsoft.com/contacts.php">Contact Us</a></li>
</ul> 
```

每当网络爬虫跟随您页面上的一个主要链接时，它都会将网络爬虫引导回您的真实网站，即使他们在不正确的网址上找到您的网站也是如此。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-22T10:57:29.877

我会将您的机器人文件更改为读取

用户代理： *

允许： /

这将允许 Google 在下次访问您的网站时。不过，这可能需要几天时间才能发生。

# android - android-phonegap 中网络工作者的替代品？

> ID：15020052
> 
> 赞同：10
> 
> 时间：2013-02-22T08:45:27.567
> 
> 标签：android, cordova, web-worker

任何人都可以建议我替代电话间隙网络工作者，因为我希望我的应用程序能够从 android 2.2 成功运行到 4.2。据我所知，网络工作者支持 4.0 及更高版本。

我尝试了 Android 谷歌云消息，效果很好。但我正在寻找电话差距选项而不是原生 android 选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-24T18:36:24.417

您可以尝试[https://crosswalk-project.org](https://crosswalk-project.org)，它使您能够使用基于 Chromium 的 Web 视图的现代版本并摆脱系统 Web 视图。这是一个英特尔项目，文档完整而简洁，其中包含许多如何在 Apache Cordova 中使用它的示例。

注意 Web Workers API 被列为受支持：[https](https://crosswalk-project.org) ://crosswalk-project.org （以及 WebRTC、WebGL 或其他鲜为人知的细节，如 Web Notification API，这将使您无需使用 Cordova 插件来启动系统本机通知）。

Chrome 团队还制作了一个工具，用于通过 Crosswalk Webview 使用 Cordova 打包 Chrome 应用程序：[https ://github.com/MobileChromeApps/mobile-chrome-apps](https://github.com/MobileChromeApps/mobile-chrome-apps)

不过，使用人行横道有一些注意事项。见[https://github.com/MobileChromeApps/mobile-chrome-apps/blob/master/docs/Crosswalk.md](https://github.com/MobileChromeApps/mobile-chrome-apps/blob/master/docs/Crosswalk.md)对我来说，更重要的是：`"An increase of about 17MB in the size of the .apk file"`. 根据应用类型（主要是不是游戏），我作为 Android 用户不会安装这么大的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-30T16:51:19.200

您可以尝试结合使用 inappbrowser 和 localStorage/'storage' 事件。

例如。您的后台进程可以在您的 index.html 中运行，这将使用 window.addEventListener('storage', function callback, true/false) 为“storage”绑定一个事件处理程序

当页面加载时，在隐藏初始屏幕之前，使用指向 ui.html（包含 ui 线程/html/css 等）的 window.open 启动另一个浏览器实例，确保将浏览器配置为全屏显示所有工具/位置酒吧隐藏。

现在在 ui.html javascript 中，当您想将数据发送到 bg 线程时，您只需在本地持久存储中创建它。Ex localStorage.setItem ('item', data);

现在应该在原始窗口（bg 层）中触发一个事件，触发您的回调函数，该回调函数将传递一个事件对象，该对象包含（以及其他事物）更改的数据值。

如果您想要更详细的说明，请告诉我。我得到了这个在android 2.2+中工作

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-09-03T07:09:19.617

使用推送通知插件[https://build.phonegap.com/plugins/3](https://build.phonegap.com/plugins/3)在 Android 上封装 Google 云消息传递

# ios - 具有自定义缩放级别和缩放系数的高效自定义平铺地图

> ID：15020055
> 
> 赞同：5
> 
> 时间：2013-02-22T08:45:43.497
> 
> 标签：ios, uiscrollview, maps, catiledlayer

我必须在 iOS5/6 (iPhone) 上实现一个非常自定义的平铺地图图层/视图，它将平铺作为图像和/或数据 (JSON) 从服务器加载。它就像谷歌地图，但在某些方面非常具体，所以我**不能轻易使用**以下解决方案：

1.  *谷歌地图*或
2.  *route-me*（由 MapBox 使用）
3.  `CATiledLayer`结合`UIScrollView`

**问题是：**由于我的具体规格，那里的解决方案都没有真正帮助我。如果您认为，有合适的解决方案，**请告诉我！！！**

**如果没有：**
*帮我为我的情况找到最好的解决方案！！！*

**“但为什么我不能使用这些漂亮的解决方案呢？”**
有一些限制，必须知道：

1.  我们只使用 3 个缩放级别（0,1 和 2）

2.  每个图块**在下一个缩放级别中有 9 个子图块（= 缩放因子*3*）**（*不像大多数其他工具包那样有**4 个子图块**= 缩放因子2*）

3.  第一层的初始大小为（以像素/点表示是一半）768*1024。
    第二层比第二层宽和高三倍（*zoomfactor 3!!!*） -> 2304*3072
    第三层比第二层同样宽和高 -> 6912*9216

4.  来自服务器的每个图块都是 256x256 像素

5.  所以每个子层是瓦片数量的 9 倍（第一层 12 个，第二层 108 个，第三层 972 个）

6.  每个图块都有一个背景图像（大小约为 6KB）（从服务器加载为图像）和前景信息（从服务器为每个图块加载为 JSON - 大小为 10-15KB）
    -> 前景信息 JSON 包含叠加图像（例如 google 中的流量）或要绘制到本地图块坐标空间中的本地图块信息（如注释，但每个图块）

7.  我想在磁盘上缓存整个背景图块，因为它们永远不会改变

8.  要么我想缓存每个图块的覆盖图块图像/覆盖图块信息一段时间，直到它应该再次重新加载

9.  缩放应该是捏合和双击

**我的一些考虑：**

1.  缓存不是问题。我是通过 CoreData 或类似的

2.  我想到了一个 UIScrollView，以显示平滑滚动

3.  我想使用捏合，所以每次突破下一个缩放级别时，我都必须绘制下一个缩放级别的图块

4.  内容应该只绘制在可见区域（对于我在 iPhone 5 320x500 上）

5.  不可见的瓷砖应该被删除，以节省内存。但它们不应该立即被删除，只有当瓦片远离可见中心一定数量的像素/点时。应该有一个“显示缓存”，以即时显示刚刚加载和显示的图块。或者那里有更好的技术？

6.  我可以立即从磁盘或服务器异步加载背景，因为我知道哪些图块是可见的。我对 tile-JSON 也是如此。然后我提取图块的 JSON 信息（*“叠加层是直接图像还是诸如城市名称之类的信息，我必须将其绘制到图块中”*）并绘制或加载叠加层（来自 DB/Disc 或服务器）

7.  UIScrollView 是否足够高效以处理平铺视图的最大尺寸

8.  我应该使用 CALayer 作为子图层来绘制它吗？我应该使用 Quartz 直接在大“画布”上绘制吗？

# 现在轮到你了 ！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T09:55:42.687

Apple 有一个示例，显示将单个图像放大到非常深。他们为此使用了 CATiledLayer。

该示例可以在这里找到：http: [//developer.apple.com/library/ios/#samplecode/PhotoScroller/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/PhotoScroller/Introduction/Intro.html)

该示例适用于存储在手机上的子图块，但也许它可以适应您的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T16:36:30.993

我想出了一个非常简洁和好的解决方案（自定义 TiledLayer 实现）：

我不再使用 CATiledLayer 作为 scrollView 的 contentView 了。相反，我向它添加了一个 CALayer 子类，并将我的图块作为子层添加到它。每个图块都包含图块位图作为内容。使用滚动视图放大时，我会根据当前缩放级别手动切换图块。那很完美！！！

如果有人想知道实现的细节 -> 没问题，写评论，我把它贴在这里。

* * *

***编辑***：

### 有关实施的详细信息：

实际上实现非常简单：

1.  将 UIScrollView 添加到您的视图/控制器视图
2.  将 UIView（从现在称为`tileView`）作为 contentView 添加到 ScrollView - 与 ScrollView 大小相同（这是完全缩小模式 - 因子 1）
3.  激活缩放（我的最小缩放因子为 1，最大为 9）
4.  当您现在将图像放入 中时`tileView`，放大到第 9 级将给出非常不清晰的像素化图像 - 这就是我们想要的（我将解释原因）
5.  如果您在放大时喜欢清晰的图像，您应该添加 CALayer 实例 ( `tiles`)`addSublayer:`到`tileView`
6.  假设您的 zoomFactor 为 3（我有 - 意思是**第 0 层中的 1 个平铺 - zoomFactor 1**将由第 1 层中的3x3 **= 9 个平铺****- zoomFactor 3 组成**）
    1.  在**第 0 层**中，假设您放置了 3x4 243x243（3 倍可除以 3）像素的图块（作为 的子层`tileView`）。您将相同大小的平铺图像放置为`CALayer contents`. 缩放到*zoomFactor 3*会使它们变得模糊（就像旧的谷歌地图）
    2.  当您点击**zoomFactor 3**时，从 superlayer 中删除所有 12 层，并将它们替换为小 3 倍（**81x81 像素**）的层。你得到的层数是整体的 9 倍。
    3.  现在您有 3 倍的小图块层，诀窍`.contents`是`CALayer`. 即使图层是 81x81，内容（您的图像）**仍然是全分辨率**，这意味着如果您将 243x243 像素图像作为 81x81 像素 CALayer 瓦片的内容，在*zoomFactor 3上* **它看起来像一个 243x243 像素瓦片！！！**

您可以在更深的任何 zoomFactor (3,9,12) 上使用它。瓷砖变得越来越小，但是将原始图像设置为内容，瓷砖将在它们放置的确切缩放因子下看起来清晰锐利。

如果您希望即使在 zoomFactors 之间您的图块看起来也很清晰，则必须将 3 倍高的图像设置为`.contents`. 然后，在您通过下一个 zoomLevel 之前，您的图块即使很短也清晰锐利。

您必须弄清楚的一件事是，通过 zoomLevel 因子时*删除图层上的**所有**图块***效率不高**。**您只需更新 rect 中的可见图块。**

不是所有解决方案中最好的，但它可以工作，如果有人做了一个设计良好的库，也许这有可能成为一个干净的解决方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-01T15:23:38.563

我已经使用我自己的 TiledLayer 实现来解决 CATiledLayer 不支持的这些类型的非标准平铺问题（并且因为 CATiledLayer 仍然有一些未解决的错误）。

该实现现在在[Github](https://github.com/Fishinear/TiledLayer)上可用。

Fab1n：这与我已经通过电子邮件发送给您的实现相同。

# jquery - 如何在 JSPlumb 中动态添加新容器？

> ID：15020056
> 
> 赞同：2
> 
> 时间：2013-02-22T08:45:45.480
> 
> 标签：jquery, asp.net-mvc-3, jsplumb

我**[这里有一个 JS 小提琴](http://jsfiddle.net/fzjr5/)**

在本文档中，我有两个具有连接器的容器。我的问题是如何添加一个新容器，该容器将具有像这样的连接器，在单击按钮时会有绿色和粉红色的圆点。

**HTML**

```
<html>

<body>
     <button id="aDD" onclick="AddDiv();" style="width:10px;height:10px;" value="Add New Div"></button>
    <div>
        <div id="a" class="a window" style="width: 100px; height: 100px; border: solid 1px">
        </div>
        <br>
        <div id="b" class="b window" style="width: 100px; height: 100px; border: solid 1px;">
        </div>
    </div>
</body>
</html> 
```

**jQuery**

```
 var a = $("#a");
    var b = $("#b");

    //Setting up drop options
    var targetDropOptions = {
        activeClass: 'dragActive'
    };

    //Setting up a Target endPoint
    var targetColor = "#316b31";
    var targetEndpoint = {
        anchor: "TopCenter", 
        endpoint: ["Dot", { radius: 8}],
        paintStyle: { fillStyle: targetColor},
        isSource: true,
        scope: "green dot",
        connectorStyle: { strokeStyle: targetColor, lineWidth: 8 },
        connector: ["Flowchart"],
        maxConnections: -1,
        isTarget: true,
        dropOptions: targetDropOptions
    };

    //Setting up a Source endPoint
    var sourceColor = "#ff9696";
    var sourceEndpoint = {
        anchor: "BottomCenter",
        endpoint: ["Dot", { radius: 8}],
        paintStyle: { fillStyle: sourceColor },
        isSource: true,
        scope: "green dot",
        connectorStyle: { strokeStyle: sourceColor, lineWidth: 8 },
        connector: ["Bezier", { curviness: 63}],
        maxConnections: -1, 
        isTarget: true,
        dropOptions: targetDropOptions
    };

    jsPlumb.bind("ready", function () {

        //Set up endpoints on the divs
        jsPlumb.addEndpoint($(".window"), targetEndpoint);
        jsPlumb.addEndpoint($(".window"), sourceEndpoint);

        jsPlumb.draggable($(".window"));
    }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T09:43:16.880

在按钮单击时添加下面的 JS 函数

```
function AddDiv() {
            var Div = $('<div>', { id: "X12" }, 
                                 { class: 'window ui-draggable' })
                      .css(
                                 { height: '100px', 
                                   width: '100px', 
                                   border: 'solid 1px' 
                                 }
                          ).appendTo('body');
            jsPlumb.addEndpoint($(Div), targetEndpoint);
            jsPlumb.addEndpoint($(Div), sourceEndpoint);
            jsPlumb.draggable($(Div));
            $(Div).addClass('window');
        } 
```

我的 JSFiddle 在**[这里](http://jsfiddle.net/fzjr5/4/)**

# php - 登录页面用户名和密码无法发布（PHP）

> ID：15020062
> 
> 赞同：-1
> 
> 时间：2013-02-22T08:46:18.117
> 
> 标签：php

用户名和密码未显示，`Page 2.PHP`尽管我将其发布到`Page2.PHP`

第1页.PHP

```
<form name="form1" method="post" action="Page2.php">
<input type="text" name="txtLogin">
<input type="password" name="txtPWD">
<input type="submit" name="btnSub" value="go">
</form> 
```

Page2.PHP

```
<?php 
if(isset($_REQUEST['txtLogin'])) 
{ 
session_start();   
$_SESSION['login']=$login; 
} 

if(isset($_SESSION['login'])) 
header('Location: detail.php'); 
else 
header('Location: index.html'); 

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T09:03:13.080

问题在这里：

```
$_SESSION['login']=$login; 
```

您正在使用该`$login`变量，但实际上并未在任何地方设置它。

再往前几行，我们看到登录名实际上是 in `$_REQUEST['txtLogin']`，而不是`$login`。所以你应该使用它。

```
$_SESSION['login']=$_REQUEST['txtLogin']; 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T08:59:46.993

把它放在 page2.php

```
 if(isset($_POST['txtLogin']) && isset($_POST['txtPWD']))
    {
        //get values & do other scripts like saving values on sessions
        $user = $_POST['txtLogin'];
        $pass = $_POST['txtPWD'];
        echo $user.'<br>'.$pass;

    }
    else
    {
        //event here
    } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-22T08:56:01.230

[检查设置： http:](http://www.php.net/manual/en/ini.core.php) //www.php.net/manual/en/ini.core.php 上的 enable_post_data_reading、request_order、variables_order、gpc_order

# c# - 为什么锁确保底层监视器被释放而直接使用监视器却没有？

> ID：15020064
> 
> 赞同：3
> 
> 时间：2013-02-22T08:46:20.347
> 
> 标签：c#, multithreading, events, synchronization, locking

msdn 文章[线程同步（C# 编程指南）](http://msdn.microsoft.com/en-us/library/ms173179%28v=vs.90%29.aspx)指定：

```
lock (x)
{
    DoSomething();
} 
```

相当于：

```
System.Object obj = (System.Object)x;
System.Threading.Monitor.Enter(obj);
try
{
    DoSomething();
}
finally
{
    System.Threading.Monitor.Exit(obj);
} 
```

然后是：

> “使用 lock 关键字通常比直接使用 Monitor 类更受欢迎，......**因为 lock 确保底层监视器被释放，即使受保护的代码抛出异常**”

这句话是否意味着使用监视器的最后一个代码片段不能确保“即使受保护的代码抛出异常，也会释放底层监视器”？
为什么？

好吧，我对相互矛盾的断言“等效”而不是（一种用法保证，另一种，等效，不）大致相同感到困惑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T08:50:44.647

粗体文本所指的情况更像是这样：

```
Monitor.Enter(obj);
DoSomethingThatThrows();
Monitor.Exit(obj); 
```

如果没有 try-finally，抛出异常将绕过`Monitor.Exit`调用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T08:50:38.333

如果 lock 在功能上等同于所提供的代码，那么两者显然都确保它会被释放，因为有一个 finally 子句。但是，如果你只使用monitor而不使用finally，你可能会遇到麻烦，导致死锁。

至少，我认为这篇文章的解释是这样的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-22T09:13:11.427

在 x64 架构上（直到根据 J.Duffy 的 VS2008 JIT - 在某些极端情况下，在编译时仍然会发生这种情况，`Any CPU`而无需`/o+`切换。）有可能在`Monitor.Enter`and`Try`语句之间放置了一条 IL 指令。如果堆栈指针位于该指令处时发生异常，则`lock`永远不会释放。

然而，关键字的代码生成`lock`阻止了这种情况的发生。

这可能就是他们建议使用`lock`关键字的原因。

参考：

[Monitor.Enter，线程中止](http://www.bluebytesoftware.com/blog/PermaLink,guid,d9ff204a-a8a5-400e-bcbc-dedb90a7d11a.aspx)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-22T09:48:05.010

如果您查看 4.0 编译器为 anycpu 生成的 IL 并将其反转为 C#，我可以得到的最接近的锁等效实现如下所示：

```
object x = new object();
bool lockTaken = false;
// lock
try{
    System.Threading.Monitor.Enter(x, ref lockTaken)
    DoSomeThing();
}
finally
{
   if (lockTaken)
   {
        System.Threading.Monitor.Exit(x);
   }
} 
```

所做的一切都是为了防止出现锁被占用、线程中止并且锁永远不会释放的情况，从而导致竞争/死锁。警告基本上告诉您在良好和最失败的情况下平衡 Enter 和 Exit 调用。lock 语句是实现该目标的最简单的抽象。

基于此 IL：

```
 IL_0000: nop
    IL_0001: ldc.i4.0
    IL_0002: stloc.0
    .try
    {
        IL_0003: ldsfld object p::x
        IL_0008: dup
        IL_0009: stloc.1
        IL_000a: ldloca.s 0
        IL_000c: call void [mscorlib]System.Threading.Monitor::Enter(object, bool&)
        IL_0011: nop
        IL_0012: nop
        IL_0013: call void p::DoSomething()
        IL_0018: nop
        IL_0019: nop
        IL_001a: leave.s IL_002c
    } // end .try
    finally
    {
        IL_001c: ldloc.0
        IL_001d: ldc.i4.0
        IL_001e: ceq
        IL_0020: stloc.2
        IL_0021: ldloc.2
        IL_0022: brtrue.s IL_002b

        IL_0024: ldloc.1
        IL_0025: call void [mscorlib]System.Threading.Monitor::Exit(object)
        IL_002a: nop

        IL_002b: endfinally
    } // end handler

    IL_002c: nop
    IL_002d: ldsfld object p::x
    IL_0032: call void [mscorlib]System.Threading.Monitor::Enter(object)
    IL_0037: nop
    .try
    {
        IL_0038: nop
        IL_0039: call void p::DoSomething()
        IL_003e: nop
        IL_003f: nop
        IL_0040: leave.s IL_0050
    } // end .try
    finally
    {
        IL_0042: nop
        IL_0043: ldsfld object p::x
        IL_0048: call void [mscorlib]System.Threading.Monitor::Exit(object)
        IL_004d: nop
        IL_004e: nop
        IL_004f: endfinally
    } // end handler

    IL_0050: nop
    IL_0051: ret 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-22T08:52:15.173

这意味着当您使用**Monitor**时，您可能会忘记使用**try-finally**。

实际上你会遇到很多人只是在块的开头使用**Monitor.Enter**并在块的末尾使用**Monitor.Exit 。**
这并不能保证**Monitor.Exit**会发生，因为异常会导致代码在块中间停止运行。

# php - PHP setlocale 不允许像 strtolower 之类的 PHP 函数在 UTF-8 上正常工作？

> ID：15020067
> 
> 赞同：1
> 
> 时间：2013-02-21T21:50:40.397
> 
> 标签：php

**我用strtolower**测试了 PHP **setlocale**函数对我的标准**UTF-8**编码和波兰字母的使用。 不幸的是，我的经验告诉我这些函数**不喜欢 UTF-8**。 在 Windows 中我根本无法使用它。 好吧，事实证明我不能在我的主机服务器 Linux cp15.vpsi.pl 2.6.32-220.4.1.el6.x86_64 x86_64 上使用它。我在该系统上使用了 locale -a 命令来发现我必须使用**pl_PL.UTF-8**并且 setlocale 函数接受了它。 好吧，strtolower函数只能将我输入的波兰语大写字母的字符串原封不动地重复，波兰语字母转小写太难了。 不会出现此问题 **********pl_PL.iso88592**。
据我所知，UTF-8 是最好的编码，尤其是当你使用 WordPress 时。UTF-8 是否仅适用于非常复杂的计算机系统？！！！********

 ***** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T22:37:06.457

来自[http://php.net/manual/en/function.strtolower.php](http://php.net/manual/en/function.strtolower.php)

> `strtolower();`不适用于波兰字符
> 
> `<?php strtolower("mĄkA"); ?>`
> 
> 将返回：*mĄka*
> 
> 最佳解决方案 - 使用`mb_strtolower()`
> 
> `<?php mb_strtolower("mĄkA",'UTF-8'); ?>`
> 
> 将返回：*mąka*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T08:04:07.070

使用[mb_strtolower()](http://uk3.php.net/manual/en/function.mb-strtolower.php)函数。这会奏效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T21:29:51.650

mb_ 功能不错。可惜我的 php.exe（用于 Win7 中的 cmd.exe - cli）没有这个模块，无法识别这些功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T21:52:08.820

```
 setlocale(LC_CTYPE, 'pl_PL.UTF-8');
    $str = iconv('utf-8', 'ascii//translit', $str);
    $str = strtolower($str); 
```

看[`iconv`](http://www.php.net/manual/function.iconv.php)****

# java - 如何应用休眠补丁

> ID：15020078
> 
> 赞同：2
> 
> 时间：2013-02-22T08:47:08.267
> 
> 标签：java, hibernate

我在 Hibernate 3 中运行本机 SQL 查询时遇到问题。我用谷歌搜索并发现它是一个在 Hibernate 4.1.3 中修复的错误。它还有一个补丁文件的附件。这是链接： [https ://hibernate.onjira.com/browse/HHH-2697](https://hibernate.onjira.com/browse/HHH-2697)

我想将该补丁应用到我现有的休眠版本。有人可以建议我如何实现吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T09:01:53.313

用新的替换旧的休眠 jar 或 maven 依赖 xml。

例如，在 Maven 中说你有......

```
<dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-core</artifactId>
    <version>3.1</version>
</dependency> 
```

也改这个。。。。

```
<dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-core</artifactId>
    <version>4.1.9.Final</version>
</dependency> 
```

或者替换构建路径中的 jar，您可以从[这里获取 jar](http://sourceforge.net/projects/hibernate/files/hibernate4/4.1.10.Final/)

# java - Primefaces FileUploadEvent 侦听器方法不起作用

> ID：15020079
> 
> 赞同：0
> 
> 时间：2013-02-22T08:47:12.597
> 
> 标签：java, jsf, file-upload, primefaces

现在我正在为我的应用程序使用`Primefacs 3.3.1`and `JSF 2.0`。现在我面临一个问题，`FileUploadEvent`即使提交表单，primefaces 监听器也不起作用。我的日志文件中没有错误和异常。但是，它不起作用。我缺少什么，lib 或配置？顺便说一句，我使用`JBoss 7.1.1`应用程序服务器。

库

```
primefaces-3.3.1.jar
commons-io-1.4.jar
commons-fileupload-1.2.1.jar
poi-3.7.jar 
```

我的页面.xhtml

```
<h:form enctype="multipart/form-data">            
    <p:fileUpload fileUploadListener="#{FileUploadController.handleFileUpload}"  
            mode="advanced"  
            update="messages"   
            multiple="true"  
            sizeLimit="100000"   
            allowTypes="/(\.|\/)(gif|jpe?g|png)$/"/>  
    <p:commandButton value="Submit" ajax="false" actionListener="#{FileUploadController.upload}"/>  
    <!-- or -->
    <p:commandButton value="Submit" ajax="false" action="#{FileUploadController.upload}"/>  
</h:form> 
```

文件上传控制器.java

```
@Scope(ScopeType.CONVERSATION)
@Name("FileUploadController")
public class FileUploadController {
    private List<UploadedFile> uploadedFileList = new ArrayList<UploadedFile>();

    public void handleFileUpload(FileUploadEvent event) {
        System.out.println("handleFileUpload()....");
        UploadedFile file = event.getFile();
        uploadedFileList.add(file);
        FacesMessage msg = new FacesMessage("Succesful", file.getFileName() + " is uploaded.");  
        FacesContext.getCurrentInstance().addMessage(null, msg);  
    }  

    public void upload() {
        System.out.println("Number of Uploaded Files : " + uploadedFileList.size());
    }
} 
```

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    id="WebApp_ID" version="3.0">
    <welcome-file-list>
        <welcome-file>index.html</welcome-file>
    </welcome-file-list>
    <filter-mapping>
       <filter-name>PrimeFaces FileUpload Filter</filter-name>
       <servlet-name>Faces Servlet</servlet-name>
    </filter-mapping>
    <filter-mapping>
       <filter-name>PrimeFaces FileUpload Filter</filter-name>
       <url-pattern>Faces Servlet</url-pattern>
    </filter-mapping>
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <context-param>
        <param-name>primefaces.THEME</param-name>
        <param-value>#{GuestPreferences.theme}</param-value>
    </context-param>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.seam</url-pattern>
    </servlet-mapping>
    <listener>
        <listener-class>org.jboss.seam.servlet.SeamListener</listener-class>
    </listener>
    <filter>
        <filter-name>Seam Multipart Filter</filter-name>
        <filter-class>org.jboss.seam.web.MultipartFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>Seam Multipart Filter</filter-name>
        <url-pattern>*.seam</url-pattern>
    </filter-mapping>
    <filter>
        <filter-name>Seam Filter</filter-name>
        <filter-class>org.jboss.seam.servlet.SeamFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>Seam Filter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
    <servlet>
        <servlet-name>Seam Resource Servlet</servlet-name>
        <servlet-class>org.jboss.seam.servlet.SeamResourceServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>Seam Resource Servlet</servlet-name>
        <url-pattern>/seam/resource/*</url-pattern>
    </servlet-mapping>
    <context-param>
        <param-name>facelets.DEVELOPMENT</param-name>
        <param-value>true</param-value>
    </context-param>
    <context-param>
        <param-name>javax.faces.PARTIAL_STATE_SAVING</param-name>
        <param-value>false</param-value>
    </context-param>
    <context-param>
        <param-name>javax.faces.DEFAULT_SUFFIX</param-name>
        <param-value>.xhtml</param-value>
    </context-param>
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>classpath:spring-beans.xml</param-value>
    </context-param>
    <security-constraint>
        <display-name>Restrict raw XHTML Documents</display-name>
        <web-resource-collection>
            <web-resource-name>XHTML</web-resource-name>
            <url-pattern>*.xhtml</url-pattern>
        </web-resource-collection>
        <auth-constraint />
    </security-constraint>
</web-app> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-09T07:14:47.880

您应该禁用接缝多部分过滤器。你应该写

web:multipart-filter disabled="true"/> 在 components.xml 中。对我来说很好。

# ruby-on-rails-2 - 如何通过引用表行的名称而不是它的 ID 对数组进行排序

> ID：15020084
> 
> 赞同：0
> 
> 时间：2013-02-22T08:47:32.260
> 
> 标签：ruby-on-rails-2

对于我使用的任何糟糕的术语，我深表歉意，因为我是一个非常绿色的（Rails）程序员。但这是我的问题：我正在开发一个管理项目的 Rails 应用程序（2.3.8）。每个*项目*都有一个*公司*（在单独的表中）和一个*联系人*（在单独的表中）。我目前正在生成一个项目列表，该列表由*公司*（1）和（2）按*联系人*订购。问题是我需要按字母顺序排列的列表（基于*公司/联系人*的名称）。到目前为止，我能做的最好的事情是按*公司/联系人*ID 对列表进行排序，这是*项目*表存储的内容。我有什么选择——如果有的话？

这是我的控制器目前用来订购我需要的列表的内容：

```
def jobs_to_be_invoiced
    @to_be_invoiced_prep = Project.prepare_project("To Be Invoiced", "=")   
    @to_be_invoiced = @jobs_to_be_invoiced_prep.all(:order => 'company_id, contact_id')
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T10:19:07.243

您可以尝试在模型中为公司添加一行

```
default_scope order: 'companys.name ASC' 
```

让我知道它是否适合你。

# ruby - Mongoid upsert 字段

> ID：15020089
> 
> 赞同：1
> 
> 时间：2013-02-22T08:47:49.053
> 
> 标签：ruby, mongodb, mongoid

我想使用 mongoid 的 upsert 方法，但它应该检查与 _id 不同的字段上的文档是否存在（mongoimport 命令允许您使用 --upsertFields 选项执行此操作）。有没有办法用 mongoid 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T09:18:33.183

我会回答我自己的问题，这应该可以按预期工作：

```
person = Person.find_or_create_by(somefield: somefield)
person.update_attributes(otherfield: otherfield, somethingelse: somethingelse) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-10T04:18:20.547

实际上，mongoid 已经打包到 your_model.collection.method.so 你可以像这样进行 upsert：

```
Person.collection.update_one({main_key: value}, {"$set":{key: value}}, {upsert: true}) 
```

# jquery - 使用 jQuery 的 GridView 上下导航

> ID：15020095
> 
> 赞同：2
> 
> 时间：2013-02-22T08:48:13.157
> 
> 标签：jquery, asp.net, gridview

我正在尝试使用 jQuery 实现 GridView 上下键盘导航功能。我已经编写了相同的代码，**但有一个错误，它只能工作一次**。

**重现错误的步骤**

*   将我的示例代码分别复制到您的 WebForm.aspx 和 WebForm.aspx.cs 后，运行表单
*   单击第二条记录（例如）以选择 GridView 记录
*   按向下箭头键选择下一条记录
*   再次按向下箭头键选择下一条记录（但在这里不起作用）

现在，如果您再次单击任何行，向下箭头键将再次起作用。

请指出我在这里缺少什么。

**WebForm1.aspx**

```
<head runat="server">
    <title></title>
    <style type="text/css">
        .normalRow
        {
            background-color: White;
            color: Black;
        }
        .selectedRowNew
        {
            background-color: #b0c4de;
            color: Black;
        }
    </style>

    <script src="js/jquery-1.6.1.min.js" type="text/javascript"></script>

    <script type="text/javascript">
        $(document).ready(function () {
            // The selector expression tr[id] will ensure the click event is added to only data rows since we have added id attribute 
            // to only data rows from code behind

            $('#<%=GridView1.ClientID %> tr[id]').click(function () {
                $('#<%=GridView1.ClientID %> tr[id]').removeClass("selectedRowNew").addClass("normalRow");
                $(this).removeClass("normalRow").addClass("selectedRowNew");
            });

            $('#<%=GridView1.ClientID %> tr[id]').mouseover(function () {
                $(this).css({ cursor: "default", cursor: "default" });
            });

            $('#<%=GridView1.ClientID %> tr[id]').keydown(function (event) {
                if (event.keyCode == "40") {
                    $('#<%=GridView1.ClientID %> tr[id]').removeClass("selectedRowNew").addClass("normalRow");

                    var row = $(this).closest('tr');
                    var next = row.next();
                    next.removeClass("normalRow").addClass("selectedRowNew");
                    next.focus();
                    next.click();
                }
            });

        });

    </script>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:GridView ID="GridView1" runat="server" OnRowDataBound="GridView1_RowDataBound">
        </asp:GridView>
    </div>
    </form>
</body> 
```

**WebForm1.aspx.cs**

```
protected void Page_Load(object sender, EventArgs e)
        {
            DataTable dt = new DataTable();
            dt.Columns.Add("Id", typeof(Int32));
            dt.Columns.Add("Name", typeof(String));

            dt.Rows.Add(new object[] { 1, "John" });
            dt.Rows.Add(new object[] { 2, "James" });
            dt.Rows.Add(new object[] { 3, "Christine" });
            dt.Rows.Add(new object[] { 4, "Michael" });
            dt.Rows.Add(new object[] { 5, "David" });
            dt.Rows.Add(new object[] { 6, "Susan" });

            GridView1.DataSource = dt;
            GridView1.DataBind();
        }

        protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e) 
        {
            if (e.Row.RowType == DataControlRowType.DataRow) 
            {
                e.Row.Attributes.Add("id", "0");
            }
        } 
```

***（更新的 js 代码）*** - 尽管正确地单步执行，但仍然无法正常工作

```
<script type="text/javascript">
        $(document).ready(function () {
            // The selector expression tr[id] will ensure the click event is added to only data rows since we have added id attribute 
            // to only data rows from code behind

            $('#<%=GridView1.ClientID %> tr[id]').click(function () {
                $('#<%=GridView1.ClientID %> tr[id]').removeClass("selectedRowNew").addClass("normalRow");
                $(this).removeClass("normalRow").addClass("selectedRowNew");
            });

            $('#<%=GridView1.ClientID %> tr[id]').mouseover(function () {
                $(this).css({ cursor: "default", cursor: "default" });
            });

            // @freshbm: your code goes here
            $("body").keydown(function (e) {
                if (e.keyCode == 40) //down arrow key code
                    toggleRowSelectionDown();
                if (e.keyCode == 38) // up arrow key code
                    toggleRowSelectionUp();
            }); //this code detect is it up or down arrow

            function toggleRowSelectionDown() {
                var row = $("<%=GridView1.ClientID%> .selectedRowNew");
                if (!row.is(":last-child")) { //check for last row in grid
                    $("<%=GridView1.ClientID%> tr[id]").removeClass("selectedRowNew").addClass("normalRow");
                    var next = row.next();
                    next.removeClass("normalRow").addClass("selectedRowNew");
                }
            }

            function toggleRowSelectionUp() {
                var row = $("<%=GridView1.ClientID%> .selectedRowNew");
                if (!row.is(":last-child")) { // check for first row in grid
                    $("<%=GridView1.ClientID%> tr[id]").removeClass("selectedRowNew").addClass("normalRow");
                    var prev = row.prev();
                    prev.removeClass("normalRow").addClass("selectedRowNew");
                }
            }
        });
    </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T10:57:53.137

我已经弄清楚了你的问题，你不能在表格行上绑定 keydown。但是您可以将侦听器添加到主体以进行 keydown：

```
$("body").keydown(function(e){
  if(e.keyCode == 40 ) //down arrow key code
    toggleRowSelectionDown();
  if(e.keyCode == 38) // up arrow key code
    toggleRowSelectionUp(); 
}); //this code detect is it up or down arrow 
```

我已将您的代码放入函数中，以便于阅读和维护：

```
function toggleRowSelectionDown() {
    var row = $("#<%=GridView1.ClientID%> .selectedRowNew");
    if (!row.is(":last-child")) { //check for last row in grid
        $("#<%=GridView1.ClientID%> tr[id]").removeClass("selectedRowNew").addClass("normalRow");
        var next = row.next();
        next.removeClass("normalRow").addClass("selectedRowNew");
    }
}

function toggleRowSelectionUp() {
                var row = $("#<%=GridView1.ClientID%> .selectedRowNew");
                if (!row.is(":first-child")) { // check for first row in grid
                    var prev = row.prev();
                    if (prev.attr('id')) { // to avoid header row
                        $("#<%=GridView1.ClientID%> tr[id]").removeClass("selectedRowNew").addClass("normalRow");
                        prev.removeClass("normalRow").addClass("selectedRowNew");
                     }

                }
            } 
```

我创建了这个 jsfiddle 来演示功能：http: [//jsfiddle.net/Ps3WL/31/](http://jsfiddle.net/Ps3WL/31/)

添加了对网格开始和结束的检查

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T09:07:40.097

你只能用我的台词替换你的台词

```
(e.keycode==40)            $(this).closest('tr').next().find('td:eq('+$(this).closest('td').index()+')').find('input').focus(); 
```

# java - 尽管服务器已发送客户端，但客户端正在等待服务器的回复

> ID：15020102
> 
> 赞同：1
> 
> 时间：2013-02-22T08:48:52.570
> 
> 标签：java, sockets, jakarta-ee, network-programming, client-server

我有一个类似下面的代码

服务器端：

```
Socket socket = server-client conn socket
try
{
BufferedReader inFromNode = new BufferedReader(new InputStreamReader(
                    socket.getInputStream()));
PrintWriter outToNode = new PrintWriter(socket.getOutputStream(), true);
String data = inFromNode.readLine().toString();
String data1 = inFromNode.readLine().toString();
String data2 = inFromNode.readLine().toString();
outToNode .println("Hi");
} 
```

客户端：

```
Socket socket = server-client conn socket
try
{
BufferedReader inFromNode = new BufferedReader(new InputStreamReader(
                    socket.getInputStream()));
PrintWriter outToNode = new PrintWriter(socket.getOutputStream(), true);
outToNode .println("Hi");
outToNode .println("Hi");
outToNode .println("Hi");
String data = inFromNode.readLine().toString();
} 
```

问题是客户端代码正在等待服务器的回复。我确定服务器端已发送它（我尝试在服务器端发送后放置日志并打印它们。）我在这里忽略了什么吗？代码有任何错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T09:34:16.127

当从服务器写入客户端完成时，尝试关闭 PrintWriter 和 Socket。理想情况下，这应该可以解决您的问题。

# javascript - 可能的 Javascript 错误？

> ID：15020103
> 
> 赞同：3
> 
> 时间：2013-02-22T08:48:56.667
> 
> 标签：javascript, firefox

这是代码示例：

```
<!DOCTYPE html>
<html>
    <head>
        <title>Test</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

        <script>
            i = 0
            while(i < 500)
            {
                date = new Date()
                console.log(i, ' ', date);
                date.setHours(5)
                i++  
            }

        </script>

    </head>
    <body>
    </body>
</html> 
```

firebug 控制台最终输出设置为 5 小时的日期，而不是原始的未更改日期。我只在 Firefox 17 上测试过。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T08:55:02.717

这将取决于浏览器的`console.log`. 据我所知，浏览器具有异步`console.log`功能，Chrome 也是如此。仅当浏览器不做任何事情时才执行异步函数。

```
while (i < 500) {
    date = new Date()
    console.log(i, ' ', date); //this set aside
    date.setHours(5); //this executed first instead
    i++;
} 
```

为了证明这`console.log`是罪魁祸首，[我有这段代码](http://tinker.io/a303d)将结果输出到 DOM 而不是使用`console.log`它，它显示正确。

```
i = 0
while (i < 500) {
    date = new Date()
    $('body').append('<div>'+i+':'+date+'</div>');
    date.setHours(5);
    i++;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T09:14:43.437

console.log 不是异步的，它只是动态的。当您使用逗号符号记录日期对象时，您正在记录对该日期对象的实时引用，因此当它更新时，控制台也会显示。如果您改为使用 toString 登录，则该值不会更改：

```
console.log("logging date as string, i : " i + " date : " + date); 
```

# c - 返回的字符串值变成垃圾

> ID：15020105
> 
> 赞同：0
> 
> 时间：2013-02-22T08:48:57.740
> 
> 标签：c, string, char, return

我试图将字符`array`值传递给字符`pointer`。然后这个值被返回给调用它的方法，但是在它被返回之后，这个值就变成了垃圾。谁能帮我？

```
#include <stdio.h>

const char * getname(){
     char nam[10];
     char * name;
     gets(nam);
     name = nam;
     return name;
}
main(){
       printf("%s",getname());
       getch();
} 
```

一切都很好，直到字符串被返回

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T08:51:11.480

该`nam`变量具有函数范围。这意味着一旦函数结束，该变量的内存就会被释放。因此，指向您返回的内存的指针将不再有效。

您可以传入指针：（在这种情况下有点毫无意义，如您所见）

```
void getname(char *name)
{
  gets(name);
} 
```

你可以`malloc`（不好，因为你需要`free`在某个时候再次使用它）：

```
const char * getname(){
     char * name = malloc(10);
     gets(name);
     return name;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T08:51:05.390

范围`nam`是函数 getname() 的本地，您通过 指针返回`nam`地址`name`

```
const char * getname(){
     char nam[10];
     :
     name = nam;
     return name;
} 
```

动态分配内存`nam;`。像：

```
nam = malloc(sizeof(char)*10); 
```

另外可能有bufferoverun不要使用`gets()`，喜欢：

```
nam = malloc(sizeof(char)*10);
fgets( nam, 10, stdin ); 
```

你也不需要使用`name`额外的变量，简单`return nam`就好。

```
const char * getname(){
     char * nam = malloc(sizeof(char)*10);
     fgets( nam, 10, stdin ); 
     return nam;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T08:51:32.623

您的问题是`return name`返回堆栈变量的地址，该地址在函数返回后超出范围。

有几种方法可以解决这个问题（至少）。

第一种是在函数*外部*分配地址，然后传入：

```
char *getname (char *buff) {
    strcpy (buff, "pax");
    return buff;
}

char name[20];
printf ("Name is '%s'\n", getname (name)); 
```

第二种是使用在函数退出时*不会*超出范围的分配函数（指针可能，但只要将它们传回，您仍然可以访问分配的内存）：

```
char *getname (void) {
    char *buff = malloc (21);        // should really check this for failure.
    strcpy (buff, "pax");
    return buff;
}

buff = getname();
printf ("Name is '%s'\n", buff);
free (buff);                         // This is important, caller is responsible
                                     //   for freeing the memory. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T12:11:09.993

声明`nam`静态也可以：

```
const char * getname() {
  static char nam[10];
  ... 
```

注意：这段代码不是线程安全的，因为`nam`现在被视为全局声明的。

# html - 在 div 内自动居中 div。

> ID：15020120
> 
> 赞同：0
> 
> 时间：2013-02-22T08:49:41.883
> 
> 标签：html, css

鉴于以下

```
 <style>
  .container {
  overflow: hidden;
  height: 100%;
  width: 90%;
  margin: 15px auto 0px auto;
  }
  .square
  {
  float: left;
  width: 80px;
  height: 80px;
  display: block;
  background-image: url('commonimgs/empty_icon.png');
  background-repeat: no-repeat;
  margin: 2px;
  padding-top: 3%;
  margin-left: 5px;      
  }
  </style>
  <div>
  <div class="container">
      <div class="square">1R</div>
      <div class="square">2R</div>
      <div class="square">3R</div>
      <div class="square">4R</div>
      <div class="square">5R</div>
      <div class="square">6</div>
      <div class="square">7</div>
      <div class="square">8</div>
      <div class="square">9</div>
      <div class="square">10</div>      
  </div>
  </div> 
```

我正在尝试制作一个自动居中并适应屏幕尺寸的平铺布局。我想不通的是如何`squares`让`container`.

得到...

```
 +------------------------------------+
  |                                    |
  |  +------------------------------+  |
  |  |                              |  |
  |  | +----+ +----+ +----+         |  |
  |  | |    | |    | |    |         |  |
  |  | |    | |    | |    |         |  |  
  |  | +----+ +----+ +----+         |  |
  |  |                              |  |
  |  | +----+ +----+ +----+         |  |
  |  | |    | |    | |    |         |  |
  |  | |    | |    | |    |         |  |  
  |  | +----+ +----+ +----+         |  |
  |  |                              |  |
  |  | +----+ +----+ +----+         |  |
  |  | |    | |    | |    |         |  |
  |  | |    | |    | |    |         |  |  
  |  | +----+ +----+ +----+         |  |
  |  |                              |  |    
  |  +------------------------------+  |
  |                                    |
  +------------------------------------+ 
```

想要

```
 +------------------------------------+
  |                                    |
  |  +------------------------------+  |
  |  |                              |  |
  |  | +----+     +----+     +----+ |  |
  |  | |    |     |    |     |    | |  |
  |  | |    |     |    |     |    | |  |  
  |  | +----+     +----+     +----+ |  |
  |  |                              |  |
  |  | +----+     +----+     +----+ |  |
  |  | |    |     |    |     |    | |  |
  |  | |    |     |    |     |    | |  |  
  |  | +----+     +----+     +----+ |  |
  |  |                              |  |
  |  | +----+     +----+     +----+ |  |
  |  | |    |     |    |     |    | |  |
  |  | |    |     |    |     |    | |  |  
  |  | +----+     +----+     +----+ |  |
  |  |                              |  |    
  |  +------------------------------+  |
  |                                    |
  +------------------------------------+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T08:56:07.953

使用该表并创建 3 列，每列应包含 DIV。您可以通过使用轻松地将 DIV 对齐在中心

```
<td align="center"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T08:56:55.887

添加`padding: 3%;`到`.container`

```
.container {
  overflow: hidden; 
  height: 100%;
  width: 90%;
  margin: 15px auto 0px auto;
    background:#dbdbdb;
      padding: 3%;
  } 
```

**[演示](http://jsfiddle.net/sJEdZ/1/)**

* * *

或`text-align:center`_`.container`

```
.container {
  overflow: hidden; 
  height: 100%;
  width: 90%;
  margin: 15px auto 0px auto;
  background:#dbdbdb;
  padding: 3%; text-align:center
} 
```

**[演示 2](http://jsfiddle.net/sJEdZ/2/)**

也`display:block`改成`display:inline-block`in`.square`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T09:11:25.483

更改或添加这些：

```
.square{
    position: relative;
    width: 27%;
    padding-top: 3%;
    margin-left: 4%;
    margin-right: 1%;
    margin-top: 5%;
    margin-bottom: 0%;
}
.container{
    padding-bottom: 5%;
} 
```

# java - 在java中保存字符串乘法数据

> ID：15020121
> 
> 赞同：0
> 
> 时间：2013-02-22T08:49:43.653
> 
> 标签：java, string, list, arraylist

我正在寻找在 java 中保存数据的最佳方法。我有两个带有 ID 和名称的 ArrayList。现在我希望它以最简单和最聪明的方式保存。像：

```
[index] [String ID] [String Name]
[1]["newID"]["Peter] 
```

它背后的想法是，例如我有名字“彼得”所以我知道索引等等我得到了 ID。传入数据“Peter”得到索引 1 和 ID“newID”

那么实现它的最佳方法是什么。3-D ArrayLists，我不确定的向量，谢谢 :)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T08:54:24.363

为什么不创建一个 Person 类？

```
public class Person {
    int index;
    String id;
    String name;
} 
```

然后，如果您想拥有很多这些，请使用 Collection，例如 a`Set<Person>`或 a `List<Person>`。

祝你好运。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-22T08:54:51.907

使用 POJO 怎么样？

```
public class DataBean implements Serializable {

  private static final long serialVersionUID = ...; 
  private long index;
  private String id;
  private String name;

  // add accessor methods
} 
```

# html - 如果我使用 html 5 元素创建网页，我是否需要等效的 html 4 网页来支持非 html 5 浏览器？

> ID：15020123
> 
> 赞同：1
> 
> 时间：2013-02-22T08:49:49.310
> 
> 标签：html

我想拥抱 html 5，如果我使用 html 5 功能，这是否意味着非 html 5 浏览器将无法正常呈现？

因此，如果我使用 html 5 元素创建网页，我是否需要创建等效的 html 4 网页来支持非 html 5 浏览器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T09:01:27.027

是的，是的。除了 HTML 元素之外，您还需要确保脚本兼容。某些浏览器版本部分兼容 HTML 5，例如 IE9。

您可能会发现此链接在 HTML 5 浏览器支持方面很有趣：

[http://caniuse.com/#cats=HTML5](http://caniuse.com/#cats=HTML5)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T10:06:30.640

是和不是。尽管大多数浏览器都支持大多数最新的 HTML5 功能，但您**不需要**与那些不支持 HTML5 的浏览器对应的 html4 页面。您可以使用**polyfill**。polyfill 是一个额外的脚本，它为浏览器添加了对本机不支持它的东西的支持。

这是一个非常好的 polyfill 资源：

[https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-22T08:50:55.270

不，所有当前的浏览器都支持 HTML5 元素。

# objective-c - 如何自动区分两个 iOS 应用构建包

> ID：15020127
> 
> 赞同：1
> 
> 时间：2013-02-22T08:49:56.267
> 
> 标签：objective-c, app-store, testflight, compiler-flags

我正在开发一个 iOS 应用程序，并正在使用 Testflight 将应用程序发送给我的测试人员。在这个应用程序版本中，我有一个用户用来向我发送反馈的反馈表。我想要一种很好的方法来自动区分此构建中的一些代码和我将发送到 AppStore 的构建。

例子：

```
#ifdef TestFlightPackage
//code for the feedback form
#endif 
```

例如，我可以添加一个预处理器宏

```
TestFlightPackage=1 
```

但是我不想每次创建包时都更改它。我想要一种方法来自动解决这个问题。比较以在 Visual Studio 中发布配置文件。如果我选择发布配置文件“发布”，则标志为 TestFlightPackage=0（或已删除标志），如果我选择发布配置文件“测试”，我将获得 TestFlightPackage=1

哪个是最好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T09:35:40.500

为此，您需要创建不同的方案。您可以在[此处](https://stackoverflow.com/questions/7299202/xcode-4-dedicated-configuration-settings-build-settings-and-schemes-definiti)找到有关类似问题的详细答案。

# php - 给定某个已知值，访问 PHP 数组中的对应值

> ID：15020129
> 
> 赞同：0
> 
> 时间：2013-02-22T08:50:03.247
> 
> 标签：php, arrays

假设我有一个像下面这样的数组：

```
Array
(
    [0] => Array
        (
            [id] => 1
            [title] => Group1
            [description] => This is the group1.
        )

    [1] => Array
        (
            [id] => 2
            [title] => Group2
            [description] => This is group2.
        )

) 
```

假设标题被称为“Group2”。如果它不知道它的、key、id 等只有标题，我如何能够确定使用 PHP 的等效描述（即“这是 group2”）？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T08:52:08.923

试试这个 ：

```
$title = "Group2";

foreach($your_array as $val){
   if($val['title'] == $title){
      echo $val['description'];
      break; //cut back on unnecessary looping
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T08:53:37.077

您必须遍历主数组并扫描它以获取该标题。

假设您的主数组被称为`$groups`：

```
$title = 'Group2';
foreach($groups as $key => $group){
  if ($group['title'] == $title){
    $groupDescription = $group['description'];
    // if you need to reference this group again, save it's key.
    $groupKey = $key;
  }
} 
```

您可以在找到您要查找的组后插入一个`break`命令来终止循环，这样它就不会在您找到您要查找的组后继续扫描阵列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T08:54:07.143

像这样试试

```
foreach($myarray as $val){
  if($val['title'] == "Group2"){
     echo 'This is description '.$val['description'];
   }
} 
```

# adaboost - 如果错误率为零，如何计算 alpha (Adaboost)

> ID：15020134
> 
> 赞同：8
> 
> 时间：2013-02-22T08:50:14.190
> 
> 标签：adaboost

我一直想知道当它具有错误率（完美分类）时，alpha（弱分类器的权重）的值应该是多少，因为 alpha 的算法是 `(0.5) * Math.log(((1 - errorRate) / errorRate))`

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T17:45:39.160

如果你通过重新加权并将整个训练数据传递给弱学习器来提升，我会说你找到了一个实际上很强大的弱分类器，毕竟它完美地分类了你的数据。

在这种情况下，它应该发生在第一次 Adaboost 迭代中。将该弱分类器添加到您的强分类器中，并将 alpha 设置为 1 并停止训练。

现在，如果在您通过重新采样进行提升时发生这种情况，并且您的样本只是训练数据的一个子集，我相信您应该丢弃这个子集并使用另一个样本重试。

我相信您达到了这样的结果是因为您正在使用一个非常简单的示例，或者您的训练数据集非常小或不具有代表性。您的弱分类器也可能太弱并且太快地接近随机猜测。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-31T23:03:24.670

名义上，零误差的弱分类器的 alpha 应该**很大**，因为它正确地分类了所有训练实例。我假设您正在使用所有训练数据来估计 alpha。您也可能仅使用该轮提升的训练样本来估计 alpha——在这种情况下，根据样本大小，您的 alpha 应该略小一些——但同样的想法。

理论上，如果您的其他 alpha 未归一化，则该 alpha 应该接近无穷大。在实践中，检查您的错误是否为零并为这些 alpha 赋予非常高的值的建议是合理的，但零或接近零的错误率通常表明您过度拟合（或者训练数据太少而无法估计可靠的 alpha） .

这在Adaboost的[Schapire & Singer 的 Confidence Rated Predictions版本的第 4.2 节中进行了介绍。](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.33.4002)他们建议为您的分子和分母添加一个小 epsilon 以保持稳定性：

```
alpha = (0.5) * Math.log(((1 - errorRate + epsilon) / (errorRate + epsilon))) 
```

无论如何，这个 alpha 不应该设置为一个小值（它应该很大）。并且只有当所有其他轮次提升的所有其他 alpha 都被归一化时才将其设置为 1 才有意义，因此所有 alpha 的总和几乎为 1，例如。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T17:45:36.670

我遇到过几次这个问题，通常我所做的是检查错误是否等于 0，如果是，则将其设置为等于最小重量的 1/10。这是一个 hack，但它通常最终工作得很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-24T18:22:19.243

实际上，如果您在预测 Adaboost 时不使用这样的分类器会更好，因为它不会改进太多，因为它不是一个弱分类器，并且会消耗掉所有的权重。

# php - 在子窗口中为 textarea 添加值

> ID：15020140
> 
> 赞同：0
> 
> 时间：2013-02-22T08:50:34.497
> 
> 标签：php, jquery

我有一个使用 window.open(url) 打开的远程 url，在该页面中有一个 textarea，我想从我的父页面更改该 textarea 的值。

```
window.open("http://facebook.com/share.php?u=
                http://something.com&t="+txt,'facebook','height=400,width=550'); 

$("textarea#u_0_6").val('test'); 
```

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T12:24:54.723

也许你可以这样做。方法很简单，你可以像这样用哈希（#）传递你的值；

```
window.open("http://facebook.com/share.php?u=
                http://something.com&t="+txt+"#this is my textarea value",'facebook','height=400,width=550'); 

 $(function() {
   var MyTextAreaValue = window.location.hash;
   $('#u_0_6').val(MyTextAreaValue);
 }); 
```

# vim - Vim 脚本：检查光标是否在当前单词上

> ID：15020143
> 
> 赞同：3
> 
> 时间：2013-02-22T08:50:40.110
> 
> 标签：vim

例如在这种情况下：

```
函数调用（arg1，arg2）；
                  ^光标在这里

```

调用`expand('<cword>')`将返回“arg2”。
当光标位于当前单词位置的左侧时，我需要过滤掉这些情况。
有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T01:46:03.640

使用（下一个）位置的另一种方法`<cword>`是：（
根据他想知道的OP的评论，也许应该用该请求更新问题）

```
let cInd = strridx(getline('.'), expand("<cword>"), col('.') - 1)
let isOnKeyword = (cInd >= 0 && (cInd + strlen(expand("<cword>"))) >= (col('.') - 1)) 
```

`<cword>`如果下一个也位于当前行的较早位置，则需要第二部分，在您的示例中，如果字符串`arg2`也应该在该行中的某个位置之前`,`，那是假设的，但应该考虑。
请注意，它`strridx` **不是** `stridx`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T09:05:57.237

也许通过检查光标当前是否在关键字字符上：

```
let isOnKeyword = matchstr(getline('.'), '\%'.col('.').'c.') =~# '\k' 
```

# actionscript-3 - 如何让孩子忽略父母的影响？

> ID：15020144
> 
> 赞同：0
> 
> 时间：2013-02-22T08:50:41.467
> 
> 标签：actionscript-3, apache-flex, flex3

我在父 Vbox 中有多个 Vboxes/Hboxes。我有父容器的隐藏/显示效果，但我想知道是否有办法让一些孩子忽略他们从父容器收到的这种影响。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T09:30:10.233

没有。DisplayList 是一个层次结构，每个叶子对象都使用父对象的所有参数显示，包括可见性、旋转等。但是，您可以枚举您的 Vbox/Hbox 中的子代以进行效果，并仅选择（并手动应用）所需效果到那些应该隐藏的效果。请注意，如果您使用淡入/淡出效果，您的 Vbox/Hbox 的可见性应该保持真实，并且不透明度应保持在原始值，否则您的 Vbox/Hbox 的那些孩子也会被改变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T21:15:39.477

您可以通过添加额外的层来解决。

然后父母会有层：

*   具有父背景的新图层（在此处应用效果）

*   你的孩子（效果不适用，因为它的父母没有效果）

希望有帮助。

# android - 如何以编程方式设置 textView 的样式？

> ID：15020149
> 
> 赞同：42
> 
> 时间：2013-02-22T08:50:48.730
> 
> 标签：android, styles, textview, android-styles

我正在以编程方式创建一个 textView。有没有办法可以设置这个 textView 的样式？类似的东西

```
style="@android:style/TextAppearance.DeviceDefault.Small" 
```

如果我有`layout.xml`文件，我会使用它。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-02-22T08:55:03.053

您不能以编程方式设置视图的样式，但您可以执行类似`textView.setTextAppearance(context, android.R.style.TextAppearance_Small);`.

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-02-22T08:53:40.670

目前无法以编程方式设置视图的样式。

为了解决这个问题，您可以创建一个分配了样式的模板布局 xml 文件，例如在`res/layout`create `tvtemplate.xml`as 中具有以下内容：

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="This is a template"
        style="@android:style/TextAppearance.DeviceDefault.Small" /> 
```

然后膨胀这个来实例化你的新TextView：

```
TextView myText = (TextView)getLayoutInflater().inflate(R.layout.tvtemplate, null); 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2017-06-03T14:37:18.177

实际上，这在 API 级别 21 中是可能的。

TextView 有一个[4 参数构造函数](https://developer.android.com/reference/android/widget/TextView.html#TextView(android.content.Context,%20android.util.AttributeSet,%20int,%20int))：

```
TextView (Context context, 
          AttributeSet attrs, 
          int defStyleAttr, 
          int defStyleRes) 
```

在这种情况下，中间两个参数不是必需的。下面的代码直接在一个activity中创建了一个TextView，并且只定义了它的样式资源：

```
TextView myStyledTextView = new TextView(this, null, 0, R.style.my_style); 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2018-05-07T16:52:09.313

兼容版本（由于 api 23 中的弃用）：

```
TextViewCompat.setTextAppearance(textView, android.R.style.TextAppearance_DeviceDefault_Small); 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-02-22T08:57:24.893

试试这个

```
textview.setTextAppearance(context, R.style.yourstyle); 
```

这可能不起作用尝试使用这样的文本视图创建 xml

```
textviewstyle.xml

<TextView xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        style="@android:style/TextAppearance.DeviceDefault.Small" /> 
```

要获得所需的样式，请膨胀包含 textview 的 xml

```
TextView myText = (TextView)getLayoutInflater().inflate(R.layout.tvstyle, null); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-22T08:55:45.010

对于在运行时（在代码中）生成的视图，您可以将样式传递给构造函数：[View(Context, AttributeSet, int)](http://developer.android.com/reference/android/view/View.html#View%28android.content.Context,%20android.util.AttributeSet,%20int%29)

在其他情况下，您必须调用 varios 方法来更改外观

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-01-17T07:54:13.100

```
@Deprecated
public void setTextAppearance(Context context, @StyleRes int resId) 
```

自 Android SDK 23 起，此方法已弃用。

您可以使用安全版本：

```
if (Build.VERSION.SDK_INT < 23) {
    super.setTextAppearance(context, resId);
} else {
    super.setTextAppearance(resId);
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-05-16T15:31:42.283

```
textView.setTextAppearance(context, android.R.style.TextAppearance_Small); 
```

在 java 中已被弃用，因此在没有上下文的情况下使用 kotlin

```
textView.setTextAppearance(android.R.style.TextAppearance_Small) 
```

# java - 我可以强制 JVM 本地编译给定的方法吗？

> ID：15020152
> 
> 赞同：33
> 
> 时间：2013-02-22T08:51:00.000
> 
> 标签：java, performance, jit, jvm-arguments

当我的应用程序启动时，我经常调用一个对性能至关重要的方法。最终，它会被 JIT 编译，但不是在解释器中运行一段时间之后。

有什么方法可以告诉 JVM 我希望从一开始就编译此方法（无需使用类似的东西调整其他内部结构`-XX:CompileThreshold`）？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-02-22T10:07:36.923

我知道的唯一方法是`-Xcomp`标志，但通常不建议使用。它会在所有类和方法第一次运行时强制它们立即进行 JIT 编译。缺点是您会在初始启动时看到性能下降（由于 JIT 活动增加）。此标志的另一个主要限制是它似乎禁用了 JIT 通常会执行的基于增量分析的优化。在标准混合模式下，JIT 编译器可以（并且将）根据收集的分析和运行时信息不断地去优化和重新编译部分代码。这允许它“纠正”错误的优化，例如被省略但被证明是需要的边界检查、次优内联等。`-Xcomp`禁用基于分析的优化并取决于程序，可能会导致整体性能显着下降，而启动时只有很小的实际收益或没有实际收益，这就是不建议使用它的原因。

除了`-Xcomp`（非常残酷）和`-XX:CompileThreshold`（控制 JIT 将在解释模式下运行多少次给定方法以在编译/优化之前收集统计信息）之外，还有`-Xbatch`. 这迫使 JIT 编译到“前台”，实质上是在编译之前阻止对方法的调用，而不是像通常那样在后台编译它。

您没有指定您使用的是哪个 Java 版本，但如果您可以选择 Java 7，它会引入一个新的 JIT 模型，称为“分层编译”（通过`-XX:+TieredCompilation`开关激活）。分层编译的作用是，它允许在第一次使用方法时进行初始的、较小的编译传递，而不是稍后基于收集的分析数据进行额外的、更大的编译/优化。听起来你应该很有趣。

据说它需要一些额外的调整和参数/配置，但我没有时间进一步检查它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T09:31:50.663

我不确定它是否会完全预编译代码，但您可以将具有关键方法的类添加到 JVM 的共享数据转储中。有关更多详细信息，请参阅[此问题](https://stackoverflow.com/questions/4692076/speed-up-application-start-by-adding-own-application-classes-to-classes-jsa)。

另外，你考虑过JNI吗？如果您的方法是 CPU 密集型的，它可能会大大加快速度。

# c# - 使用 ContentPresenter 个性化模板

> ID：15020153
> 
> 赞同：1
> 
> 时间：2013-02-22T08:51:05.220
> 
> 标签：c#, wpf, xaml, contentpresenter

我创建了一个 ressourceDictionnary 来创建一个 templateButton。我希望能够在使用此模板时更改 png 图像，我想我需要使用 ContentPresenter，但我不知道为什么。

这是我的 RessourceDictionnary ：

```
 <ControlTemplate TargetType="{x:Type Button}" x:Key="BoutonRessources">
<Button Width="32" Margin="0,0,7,0" Name="tbrClear" ToolTip="Clear" VerticalAlignment="Center" BorderThickness="0" HorizontalAlignment="Center" Background="Transparent" HorizontalContentAlignment="Center">

        <Border>

            <Image Source="xRtDiva_XWPF_TBR_PREMIER.PNG_IMAGES.png" Height="18"/>

        <Border.Style>
                <Style TargetType="{x:Type Border}">
                    <Setter Property="Background" Value="Transparent" />
                    <Style.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter Property="Background">
                                <Setter.Value>
                                    <ImageBrush ImageSource="BoutonToolbarSelected.png"/>
                                </Setter.Value>
                            </Setter>
                            <Setter Property="Height"  Value="22"/>
                            <Setter Property="Width"  Value="32"/>
                        </Trigger>
                    </Style.Triggers>
                </Style>
            </Border.Style>
        </Border>
</Button> 
```

因此，当我使用此 Button 模板时，我希望能够将其他 png 图像传递给它们以显示。例如，我想用 MyPicture.png 替换 xRtDiva_XWPF_TBR_PREMIER.PNG_IMAGES.png。

这是怎么做的？使用 contentPresenter ？

谢谢 ：）

# iphone - 跑完 在 iPhone 6.1 模拟器上

> ID：15020164
> 
> 赞同：6
> 
> 时间：2013-02-22T08:51:38.400
> 
> 标签：iphone, ios, xcode, ios-simulator, xcode4.6

我正在使用 Xcode（版本 4.6 (4H127)）和 iPhone 6.1 模拟器（版本 6.0 (369.2)）为 Iphone 开发一个新应用程序。

一开始一切都很好：每次我按下“运行”按钮时，应用程序都会加载到模拟器中并且我能够对其进行测试。但有时它不起作用：当我按下运行按钮时，我只收到消息“在 iPhone 6.1 模拟器上运行完成”。代码成功编译（只有轻微的警告）。

![在此处输入图像描述](../Images/1cf8af893d60ec111e7732c35af0927a.png)

主要问题是，当我收到此消息时，我可以再次使用模拟器的唯一方法（在这个项目中，其余的 xcode 项目似乎工作正常）是启动一个新项目并将每个文件添加到其中。

我试过删除de派生数据，重启de模拟器，重启de电脑等。即使我在模拟器工作时做了快照，但是当我回到快照状态时，模拟器仍然无法工作。

我能做些什么？任何想法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-22T09:03:26.010

1.手动启动iOS模拟器。

2.从“iOS模拟器”菜单中，点击“**重置内容和设置**”，

3.关闭并重建您的应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T09:00:09.240

**当您的项目的 plist 的目标成员**有问题时，可能会出现此问题。**从项目导航器文件夹结构的Supporting Files**中选择您的 info plist 文件，转到**界面构建器窗格**（顶部栏中的 View 下的 Utilities 部分），然后在 File Inspector 窗格中查找**Target Membership**，如果已选中，请**取消选中它**。清洁和建造，希望它有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T09:23:52.697

`Library > Application Support > iPhone Simulator > 6.1 (or whichever you're using) > Applications > Your Application`并删除它。

![在此处输入图像描述](../Images/da6c90a24e12a7e65a13e6b5373f4117.png) 重建您的应用程序并重新启动。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-27T04:25:16.780

我遇到了同样的问题，并且以某种方式能够修复它，但它几乎立即又被破坏了。我可以告诉它是什么破坏了它。

我在复制捆绑资源部分添加了几个包含文件的文件夹（文件夹引用）。那打破了它。如果我没记错的话，我已经删除了这两个并且正在搞乱 DeploymentTarget。我可能早些时候重置了模拟器。不管怎样，它开始工作了。所以，

*   有修复的希望
*   这件事是由需要复制到包中的文件夹资源引起的

更新：

我能够让它再次工作。这是我所做的...... - 清除了派生数据文件夹 - 关闭模拟器应用程序 - 还清除了模拟器文件夹中的部署（用户/XXXXXX/图书馆/应用程序支持/iPhone模拟器/6.1/应用程序）

由于上次将文件夹添加到捆绑包导致它锁定，我尝试逐步将一个文件夹添加到捆绑包并尝试。结果我的一个文件夹被命名为 Resources，我突然意识到这个特定的名称可能会与应用程序寻找的其他东西发生冲突。所以我将该文件夹重命名为 Res 并尝试了它。现在可以了。

所以你有它..按照上面的步骤来解决问题。避免将名为 Resources 的文件夹复制到您的包中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-22T06:49:46.070

由于存在**多个 info.plist 文件**，可能会出现此问题。

我也遇到了类似的问题，最终发现在添加另一个项目的一些资源文件时，我还添加了它的 info.plist 文件。

检查您的**Build 阶段> Copy Bundle Resources**后，是否存在另一个 info.plist 文件。如果存在则删除它，清理项目并重建它。希望能帮助到你.....

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-19T04:51:24.720

我遇到了同样的问题，同样的“未能附加到进程 ID 0”（实际上我没有注意到这个错误，直到我看到你说你有那个错误）。在我的一个项目中，6.0 模拟器不起作用，但在我的其他项目中起作用。我的 5.1 模拟器也有效。

对我有用的是基于类似问题的其他答案：[https ://stackoverflow.com/a/12423912/159758](https://stackoverflow.com/a/12423912/159758)

*   转到产品菜单并在那里找到编辑方案菜单。
*   在 Edit Scheme 窗口中，选择屏幕左侧的“Run”选项，然后在右侧，将调试器从 LLDB 更改为 GDB。
*   运行项目，这在模拟器中工作。
*   然后返回编辑方案并设置回 LLDB。

我注意到你已经尝试将调试器设置为 GDB 而不是调试器，但我想我会提到什么对我有帮助，因为你的问题帮助我找到了问题的根源（即看到“无法附加到进程ID 0”消息）。

# c++ - 竞争条件有多“未定义”？

> ID：15020171
> 
> 赞同：5
> 
> 时间：2013-02-22T08:51:58.573
> 
> 标签：c++, race-condition, undefined-behavior

假设我定义了以下 C++ 对象：

```
class AClass
{
public:
    AClass() : foo(0) {}
    uint32_t getFoo() { return foo; }
    void changeFoo() { foo = 5; }
private:
    uint32_t foo;
} aObject; 
```

该对象由两个线程 T1 和 T2 共享。T1 不断地在一个循环中调用以获得一个数字（如果之前没有调用`getFoo()`，它将始终为 0 ）。`changeFoo()`在某些时候，T2 调用`changeFoo()`来更改它（没有任何线程同步）。

*对于现代*计算机体系结构和编译器，T1 获得的值是否有可能**不同于0 或 5？**到目前为止，我调查的所有汇编代码都是使用 32 位内存读写，这似乎保存了操作的完整性。

 *其他原始类型呢？

*实用*意味着您可以给出一个*现有*架构或符合标准的编译器的示例，其中（或具有不同代码的类似情况）在理论上是可能的。我让*现代*这个词有点主观。

* * *

**编辑：**我可以看到很多人注意到我不应该期望 5 被阅读。这对我来说很好，我没有说我这样做（尽管感谢您指出这方面）。我的问题更多的是关于上述代码可能会发生什么样的数据完整性违规。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-22T09:14:57.073

`0`在实践中，除了或`5`据我所知，您不会看到任何其他东西（可能是一些奇怪的 16 位架构和 32 位架构，`int`但情况并非如此）。

但是，不能保证您是否真正看到`5`。

假设我是编译器。

我懂了：

```
while (aObject.getFoo() == 0) {
    printf("Sleeping");
    sleep(1);
} 
```

我知道：

*   `printf`不能改变`aObject`
*   `sleep`不能改变`aObject`
*   `getFoo`不会改变`aObject`（感谢内联定义）

因此我可以安全地转换代码：

```
while (true) {
    printf("Sleeping");
    sleep(1);
} 
```

**因为根据 C++ 标准**`aObject`，在此循环期间没有其他人访问。

 **这就是*未定义行为*的含义：夸大预期。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-22T08:57:40.103

在实践中，所有主流的 32 位架构都以原子方式执行 32 位读写。除了 0 或 5，你永远不会看到任何东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-22T08:56:15.217

*在实践中*（对于那些没有阅读问题的人），任何潜在的问题都归结为 an 的存储操作是否`unsigned int`是原子操作，在大多数（如果不是全部）机器上，您可能会为其编写代码，它会是。

请注意，标准没有说明这一点；它特定于您所针对的架构。我无法想象调用线程会变成除`0`or以外的任何东西的场景`5`。

至于标题......我不知道不同程度的“未定义行为”。UB就是UB，它是一个二元状态。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-22T09:04:43.937

不知道你在找什么。在大多数现代架构中，有一种非常明显的可能性`getFoo()`总是返回`0`，即使在`changeFoo`被调用之后也是如此。使用几乎任何体面的编译器，几乎可以保证`getFoo()`, 将始终返回相同的值，无论对 的任何调用`changeFoo`，如果它是在紧密循环中调用的。

当然，在任何真正的程序中，都会有其他的读写操作，这对于`foo`.

最后，有*16*位处理器，并且某些编译器也可能存在`uint32_t`未对齐的可能性，因此访问不会是原子的。（当然，您只是更改其中一个字节中的位，因此这可能不是问题。）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-22T09:38:42.207

> 对于现代计算机体系结构和编译器，T1 获得的值是否有可能不同于 0 或 5？其他原始类型呢？

当然 - 不能保证整个数据将以原子方式写入和读取。**在实践**中，您最终可能会在部分写入期间发生读取。什么可能被中断，何时发生取决于几个变量。所以在实践中，结果很容易随着类型的大小和对齐方式的变化而变化。当然，随着您的程序从一个平台移动到另一个平台以及 ABI 发生变化，也可能会引入这种差异。此外，随着优化的添加和其他类型/抽象的引入，可观察到的结果可能会有所不同。编译器可以免费优化大部分程序；也许完全取决于实例的范围（OP中未考虑的另一个变量）。

除了优化器、编译器和特定于硬件的管道之外：内核甚至可以影响处理此内存区域的方式。您的程序是否**保证**每个对象的内存所在的位置？可能不是。您的对象的内存可能存在于单独的虚拟内存页面上——您的程序采取了哪些步骤来确保所有平台/内核以一致的方式读取和写入内存？（显然没有）

简而言之：如果您不能遵守抽象机定义的规则，则不应使用该抽象机的接口（例如，如果C++抽象机的规范确实不足以满足您的需求，则应该理解并使用汇编--极不可能）。

> 到目前为止，我研究的所有汇编代码都是使用 32 位内存读写，这似乎保存了操作的完整性。

这是对“诚信”的一个非常肤浅的定义。您所拥有的只是（伪）顺序一致性。同样，编译器只需要表现得好像在这种情况下一样——这远非严格的一致性。肤浅的期望意味着即使编译器实际上没有进行破坏性优化并按照某种理想或意图执行读取和写入，结果*实际上*也是无用的——您的程序通常会在发生变化后“很长时间”观察到变化。

**考虑到您可以保证**的具体内容，该主题仍然无关紧要。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-22T08:53:51.403

未定义的行为意味着编译器可以为所欲为。他基本上可以改变你的程序来做他喜欢的任何事情，例如点披萨。

看，@Matthieu M. 回答比这个不那么讽刺的版本。我不会删除它，因为我认为评论对讨论很重要。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-22T08:54:02.893

**未定义的行为**保证与未定义一词一样未定义。
从技术上讲，可观察的行为是没有意义的，因为它只是未定义的行为，编译器不需要向您显示任何特定的行为。它可能会像您认为的那样工作，也可能会烧毁您的计算机，一切皆有可能。***

# python - 如何在 Python 中删除“NoneType”对象没有属性“nodeValue”错误

> ID：15020178
> 
> 赞同：0
> 
> 时间：2013-02-22T08:52:17.690
> 
> 标签：python, xml

我正在尝试检索发布的 XML 文件中的所有值。每当我执行我的代码时，`AttributeError: 'NoneType' object has no attribute 'nodeValue`只要 XML 文件中有一个空标记，我就会不断得到 '。谁能告诉我python中的代码来检索所有值，包括`Empty tag as ""`值

XML 文件如下所示：

```
<?xml version="1.0"?>
<Setting>
    <fName>abc</fName>
        <mName></mName>
    <lName>xyz</lName>    
</Setting> 
```

这是我的python代码：

```
readDoc = minidom.parseString(myXmlstring)

mn = readDoc.getElementsByTagName("mName") 
```

# jboss - WSO2 ESB 和 ESB 调解器

> ID：15020180
> 
> 赞同：1
> 
> 时间：2013-02-22T08:52:25.000
> 
> 标签：jboss, ejb, wso2, wso2esb

我想使用 WSO2 ESB 4.5.1 的 ESB Mediator，我想调用 EJB 3.0，它们部署在 Jboss AS 7.1.1 中。

有没有 ESB Mediator 的教程或示例？？？

提前致谢。

* * *

我有一个新错误：

```
oreLocatorProxyHttpsSoap11Endpoint, WSAction: urn:mediate, SOAPAction: urn:media
te, MessageID: urn:uuid:ffdefa4b-7cd9-4e53-bcd7-8daf410338ce, Direction: request
[2013-02-25 13:46:36,911] ERROR - ServerWorker Error processing POST request
java.lang.IllegalArgumentException: object is not an instance of declaring class
            at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
            at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
    java:39)
            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
    sorImpl.java:25)
            at java.lang.reflect.Method.invoke(Method.java:597)
            at org.apache.synapse.mediators.bean.BeanUtils.invokeInstanceMethod(Bean
    Utils.java:74)
            at org.apache.synapse.mediators.bean.enterprise.EJBMediator.mediate(EJBM
    ediator.java:132)
            at org.apache.synapse.mediators.AbstractListMediator.mediate(AbstractLis
    tMediator.java:60)
            at org.apache.synapse.mediators.base.SequenceMediator.mediate(SequenceMe
    diator.java:114)
            at org.apache.synapse.core.axis2.ProxyServiceMessageReceiver.receive(Pro
    xyServiceMessageReceiver.java:154)
            at org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:181)
            at org.apache.axis2.transport.http.HTTPTransportUtils.processHTTPPostReq
    uest(HTTPTransportUtils.java:172)
            at org.apache.synapse.transport.nhttp.ServerWorker.processEntityEnclosin
    gMethod(ServerWorker.java:416)
            at org.apache.synapse.transport.nhttp.ServerWorker.run(ServerWorker.java
    :268)
            at org.apache.axis2.transport.base.threads.NativeWorkerPool$1.run(Native
    WorkerPool.java:172)
            at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExec
    utor.java:886)
            at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor
    .java:908)
            at java.lang.Thread.run(Thread.java:619) 
```

有人可以帮我吗？？

提前致谢。

* * *

我已经按照教程[http://wso2.org/library/articles/2012/06/ejb-mediator-action-wso2-esb-450](http://wso2.org/library/articles/2012/06/ejb-mediator-action-wso2-esb-450)使用 WSO2 ESB 4.5.1 和 Jboss 5.0.1.GA，但是当我调用代理服务我得到下一个错误：

```
 [2013-02-22 13:43:57,682]  INFO - ProxyService Successfully created the Axis2 se
   rvice for Proxy service : StoreLocatorProxy
   [2013-02-22 13:47:41,953] ERROR - NativeWorkerPool Uncaught exception
   java.lang.IllegalArgumentException
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
   java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
   sorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.synapse.mediators.bean.BeanUtils.invokeInstanceMethod(Bean
   Utils.java:74)
        at org.apache.synapse.mediators.bean.BeanMediator.mediateSetPropertyActi
   on(BeanMediator.java:191)
        at org.apache.synapse.mediators.bean.BeanMediator.mediate(BeanMediator.j
   ava:119)
        at org.apache.synapse.mediators.AbstractListMediator.mediate(AbstractLis
   tMediator.java:60)
        at org.apache.synapse.mediators.base.SequenceMediator.mediate(SequenceMe
   diator.java:114)
        at org.apache.synapse.core.axis2.ProxyServiceMessageReceiver.receive(Pro
   xyServiceMessageReceiver.java:154)
        at org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:181)
        at org.apache.axis2.transport.http.util.RESTUtil.invokeAxisEngine(RESTUt
   il.java:144)
        at org.apache.axis2.transport.http.util.RESTUtil.processURLRequest(RESTU
   til.java:139)
        at org.apache.synapse.transport.nhttp.util.RESTUtil.processGetAndDeleteR
   equest(RESTUtil.java:140)
        at org.apache.synapse.transport.nhttp.DefaultHttpGetProcessor.processGet
   AndDelete(DefaultHttpGetProcessor.java:464)
        at org.wso2.carbon.transport.nhttp.api.NHttpGetProcessor.process(NHttpGe
   tProcessor.java:296)
        at org.apache.synapse.transport.nhttp.ServerWorker.run(ServerWorker.java
  :265)
        at org.apache.axis2.transport.base.threads.NativeWorkerPool$1.run(Native
   WorkerPool.java:172)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExec
   utor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor
   .java:908) 
```

有人可以帮我吗？？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T10:02:17.787

您可以参考 [1] 上的 OT 文章“EJB Mediator In Action WSO2 ESB 4.5.0”。

[1]。[http://wso2.org/library/articles/2012/06/ejb-mediator-action-wso2-esb-450](http://wso2.org/library/articles/2012/06/ejb-mediator-action-wso2-esb-450)

谢谢你，达沙那。

# php - 即时付款通知 (IPN) 模拟器剂量工作

> ID：15020182
> 
> 赞同：0
> 
> 时间：2013-02-22T08:52:31.213
> 
> 标签：php, paypal, payment-gateway, paypal-ipn

IPN 传送失败。无法连接到指定的 URL。请验证 URL，然后重试。

我正在尝试使用我的 Paypal ipn 模拟器，但每次它给我这个错误消息时，似乎 ipn 模拟器无法访问指定的 URL，即使我确定指定的 URL 是正确的。请有任何帮助

```
// Connect to database --------------------------------------------------------------------------------------------------

----
    require_once ('../config/cart_api.php');

    // bussines email
    $bussines_email = 'tbuss_1358873839_biz@hotmail.com';

// Check to see there are posted variables coming into the script
if ($_SERVER['REQUEST_METHOD'] != "POST") die ("No Post Variables");

// Initialize the $req variable and add CMD key value pair
$req = 'cmd=_notify-validate';
// Read the post from PayPal
foreach ($_POST as $key => $value) {
    $value = urlencode(stripslashes($value));
    $req .= "&$key=$value";
}

// Now Post all of that back to PayPal's server using curl, and validate everything with PayPal
// We will use CURL instead of PHP for this for a more universally operable script (fsockopen has issues on some environments)
$url = "https://www.sandbox.paypal.com/cgi-bin/webscr";
//$url = "https://www.paypal.com/cgi-bin/webscr";
$curl_result=$curl_err='';
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL,$url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $req);
curl_setopt($ch, CURLOPT_HTTPHEADER, array("Content-Type: application/x-www-form-urlencoded", "Content-Length: " . strlen($req)));
curl_setopt($ch, CURLOPT_HEADER , 0);   
curl_setopt($ch, CURLOPT_VERBOSE, 1);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
curl_setopt($ch, CURLOPT_TIMEOUT, 30);
$curl_result = @curl_exec($ch);
$curl_err = curl_error($ch);
curl_close($ch);

$req = str_replace("&", "\n", $req);  // Make it a nice list in case we want to email it to ourselves for reporting

// Check that the result verifies
if (strpos($curl_result, "VERIFIED") !== false) {
    $req .= "\n\nPaypal Verified OK";
    mail("eagleeyes26@hotmail.com", "IPN interaction verified keep going", "$req", "eagleeyes26@hotmail.com" );

} else {
    $req .= "\n\nData NOT verified from Paypal!";
    mail("eagleeyes26@hotmail.com", "IPN interaction not verified", "$req", "eagleeyes26@hotmail.com" );
    exit();
}

/* CHECK THESE 4 THINGS BEFORE PROCESSING THE TRANSACTION, HANDLE THEM AS YOU WISH
1\. Make sure that business email returned is your business email
2\. Make sure that the transaction�s payment status is �completed�
3\. Make sure there are no duplicate txn_id
4\. Make sure the payment amount matches what you charge for items. (Defeat Price-Jacking) */

// Check Number 1 ------------------------------------------------------------------------------------------------------------
if ($bussines_email != $_POST['receiver_email']) 
{
    $message = "Investigate why and how receiver email is wrong. Email = " . $_POST['receiver_email'] . "\n\n\n$req";
    mail("eagleeyes26@hotmail.com", "Receiver Email is incorrect", $message, "From: eagleeyes26@hotmail.com" );
    exit(); // exit script
}

// Check number 2 ------------------------------------------------------------------------------------------------------------
if ($_POST['payment_status'] != "Completed") {
    // Handle how you think you should if a payment is not complete yet, a few scenarios can cause a transaction to be incomplete
}
else 
    {
        $message = "Payment status is completed = " . $_POST['payment_status'] . "\n\n\n$req";
        mail("eagleeyes26@hotmail.com", "Payment status is completed", $message, "From: eagleeyes26@hotmail.com" );
        exit(); // exit script
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T09:07:42.727

您是否已将文件上传到免费的 weberver 上？或免费域名？这发生在我身上，当我尝试存储在 000webhost 上的 ipn 脚本时，我将文件传输到其他网络服务器上，令我惊讶的是，ipn 模拟器成功地将 ipn 发送到我的 ipn 处理程序页面

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-18T17:18:21.683

Paypal IPN 模拟器对我不起作用。我使用了两台不同的服务器，登录到外部 linux 服务器（在另一个国家/地区）并且 wgetting 处理程序 url 工作正常。使用模拟器没有收到任何内容，模拟器页面在一段时间后打印“IPN 传递失败：I/O 错误：连接超时；嵌套异常是 java.net.ConnectException：连接超时”。

处理程序 url 是 tomcat jsp 页面，使用 ip 和主机名没有帮助。

```
https://developer.paypal.com/webapps/developer/applications/ipn_simulator
http://111.222.333.444:8080/testing/paypal_IPN.jsp
http://myserver.com:8080/testing/paypal_IPN.jsp 
```

如果我自己在浏览器中调用 paypal_IPN.jsp，它会使用 cmd=_notify-validate& 参数调用[https://www.sandbox.paypal.com/cgi-bin/webscr](https://www.sandbox.paypal.com/cgi-bin/webscr) url，并且 jsp 会按照预期读取 INVALID 字符串回复，因为这是一个无论如何，foodoo 交易。

测试商户开启IPN，IPN历史显示交易，尝试重发交易，均失败。我的 Paypal 集成测试用例的大场面，如果不能验证结帐管道，就无法上线。

IPN 在商家测试应用程序中启用，但这不应该影响 IPN 模拟器。使用 POSTFORM 经典提交 cgibin 按钮正常，测试签证支付正常，但即使这样，IPN 处理程序 url 也没有被调用。IPN 历史记录显示失败状态的交易。

[https://www.sandbox.paypal.com/us/cgi-bin/webscr?cmd=_profile-ipn-notify](https://www.sandbox.paypal.com/us/cgi-bin/webscr?cmd=_profile-ipn-notify) [https://www.sandbox.paypal.com/cgi-bin/webscr](https://www.sandbox.paypal.com/cgi-bin/webscr)

# apache-flex - 弹性窗口大小没有改变

> ID：15020184
> 
> 赞同：1
> 
> 时间：2013-02-22T08:52:43.023
> 
> 标签：apache-flex

我正在使用 flex TitleWindow，并且我将其宽度和高度都设置为 100%。在这个 TitleWindow 中放置了一个数据网格。然而，无论我做了什么来改变窗口大小，它都没有得到反映。更改只是反映在 Eclipse 设计窗口中，而不是实际应用程序中。任何人都可以提出一些建议吗？

```
<?xml version="1.0" encoding="utf-8"?>
<mx:TitleWindow xmlns:mx="http://www.adobe.com/2006/mxml"
            width="100%"
            height="100%"
            verticalScrollPolicy="off"
            title="GanttChart"
            xmlns:project="mpt.project.*"
            showCloseButton="true"
            close="closePopup()"
            >
<mx:Script>
    <![CDATA[
        import mpt.vo.project.GanttChart;
        import mx.collections.ArrayCollection;
        import mx.managers.PopUpManager;
        [Bindable]
        private var styledEditor:IFactory=new ClassFactory(StyledItemEditor);

        [Bindable]
        private var dataForGanttGrid:ArrayCollection;//=new ArrayCollection([{title: "Task 1", start: 0, duration: 3, percentComplete: .7}, {title: "Task 2", start: 1, duration: 3, percentComplete: .5}, {title: "Task 3", start: 2, duration: 3, percentComplete: .3}, {title: "Task 4", start: 5, duration: 5, percentComplete: 0}]);

        public function init():void
        {
            this.dataForGanttGrid=new ArrayCollection();
        }
        public function setDataForGanttGrid(title:String,start:int,duration:int,setPosition:int):void
        {
            this.dataForGanttGrid.addItemAt({title: title, start: start, duration: duration, percentComplete: .7},setPosition);
        }
        private function closePopup():void
        {
            PopUpManager.removePopUp(this);
        }
    ]]>
</mx:Script>

<mx:VBox width="100%"
         height="100%">

    <project:GanttDataGrid width="100%"
                           height="100%"
                           max="10"
                           ganttItemEditor="{styledEditor}"
                           taskHeaderWidth="170"
                           dataProvider="{dataForGanttGrid}"/>

</mx:VBox>

</mx:TitleWindow> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T09:11:32.067

`width="100%" height="100%"`为应用程序容器和 TitleWindow 的所有父项设置 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T21:22:42.383

谢谢大家的帮助。

@Ilya Z：我只是在实施您的解决方案，但我不想更改父母的大小。我想改变当前元素相对于父元素大小的大小。

这是我所做的：

在显示此弹出窗口的 mxml 文件 (GanttChartPanel) 中，我添加了以下几行：

```
//previous lines
PopUpManager.addPopUp(gantt,this,true);
PopUpManager.centerPopUp(gantt);

//New lines    
gantt.height=.8*this.height;
gantt.width= .8*this.width;
PopUpManager.addPopUp(gantt,this,true);
PopUpManager.centerPopUp(gantt); 
```

# css - 位置固定，高度可变

> ID：15020185
> 
> 赞同：1
> 
> 时间：2013-02-22T08:52:44.213
> 
> 标签：css, height

我正在寻找一种方法来确保可滚动的固定元素的高度适应所有空白直到页脚。

请参阅以下[小提琴](http://jsfiddle.net/27U5n/)，这是我正在处理的布局。

坚持了2天，是时候继续前进了。

最好看看 Firefox 中的小提琴，侧边栏滚动条由于某种原因没有在 chrome 中滚动，但这是一个不同的问题。

```
<header></header>
<div id="platformContainer">

    <section id="platformContent">
        <div id="platformBody">        
             <ul class="mainList">
                 ...                 
            </ul>
        </div>
    </section>

  <section id="toolBarContainer">
    <div id="toolBarContent">
        <ul id="toolBarList">
            ...
        </ul>
    </div>
</section>

<footer></footer> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T09:09:23.010

假设您想要`toolBarList`容器 100% 的高度 - 这就是您已经拥有的。侧边栏*是*100% 高度。但是，其中的列表仅设置为 200px：

```
#platformContainer #toolBarContainer #toolBarContent ul#toolBarList{
    height: 200px;
    ...
} 
```

将其更改为`height:100%;`使其填充文档的整个高度。现在的问题是考虑页眉和页脚。然而，这是一个常见问题，我自己在这里回答了这个问题：[https](https://stackoverflow.com/a/14892331/1317805) ://stackoverflow.com/a/14892331/1317805和许多其他人一样。您需要确保页眉和页脚没有被内容区域隐藏或覆盖。

> 我认为您可能需要 javascript 来执行此操作 – 9edge

一点也不！

另外，使用`section`标签时请注意：

> 不应将元素的使用视为需要以特定方式在视觉上设置样式的概述内容。如果是这种情况，最好建议作者只使用语义中性的 div。

您`#platformContent`和`#toolBarContainer`样式可能会产生意想不到的结果。

[http://www.w3.org/WAI/GL/wiki/Using_HTML5_section_elements](http://www.w3.org/WAI/GL/wiki/Using_HTML5_section_elements)

实际上，您对这些部分的样式可以完全替换为：

```
#platformBody, #toolBarContent {
    position:relative;
    height:100%;
    top: 70px;
    width: 100%;   
} 
```

# workflow - 带有 rest/java api 的错误跟踪软件

> ID：15020186
> 
> 赞同：1
> 
> 时间：2013-02-22T08:52:49.950
> 
> 标签：workflow, bug-tracking

嗨，请向我推荐一个开源工作流管理软件，它提供 rest/java api，以便它可以与我现有的应用程序集成以自动化错误跟踪过程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T09:04:02.080

我正在使用[Redmine](http://www.redmine.org)，它是 Fork [ChiliProject](https://www.chiliproject.org/)

两者都为您提供了用于多个任务的[REST API 。](http://www.redmine.org/projects/redmine/wiki/Rest_api)

# c++ - 如何屏蔽掉非虚拟机ip地址

> ID：15020187
> 
> 赞同：0
> 
> 时间：2013-02-22T08:52:54.110
> 
> 标签：c++, sockets, winsock

我正在使用下面的代码 local_addr.sin_addr.s_addr = INADDR_ANY; ，但我发现默认地址是vmware的ip，这不是我想要的。众所周知，我们可以通过hostinfo->h_addr_list来枚举ip地址，但是如何筛选掉非虚拟机的ip地址呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T03:47:44.277

我通过 GetAdaptersInfo/getifaddrs 枚举网络适配器解决了这个问题

# javascript - 使用AngularJs中的表达式动态生成ng-class的变量

> ID：15020189
> 
> 赞同：10
> 
> 时间：2013-02-22T08:52:56.513
> 
> 标签：javascript, angularjs, html, angularjs-directive

这是我的 HTML 代码的片段。

```
<div ng-repeat="boxName in boxNameList">
    <div ng-class="myBoxes.{{boxName}}">{{boxName}}</div>
</div> 
```

**我正在尝试做的事情：** 我使用上面编写的代码段创建了 3 个 div 元素，它们将位于屏幕顶部。每个 div 元素将被赋予一个使用 css 的盒子的形状。box(div) 可以将红色作为其背景，也可以将黑色作为其背景。

两种颜色的 CSS 是：

```
.redBackground{
   background-color: red;
}

.blackBackground{
  background-color: black;
} 
```

这是我的控制器的一个片段：

```
$scope.boxNameList=['Box1','Box2','Box3'];
$scope.myBoxes={
      Box1: "redBackground",
      Box2: "blackBackground",
      Box3: "blackBackground"
} 
```

在此示例中，我将其制作`$scope.myBoxes`为静态 Json，但在运行时我计划生成 Json 代码，以便我可以动态地将背景颜色分配给我的盒子。

**我面临**的问题：问题是我根本看不到有颜色的盒子。如您所见，本例中的 ng-class 变量名称也是动态生成的。如果我不使用 ng-repeat 并且不动态生成 ng-class 变量名，那么它可以正常工作。例如，当我动态更改变量的值然后它完美地工作时，下面给出的`myBoxes.Box1` `myBoxes.Box2`片段`myBoxes.Box3`。

```
<div ng-class="myBoxes.Box1">Box1</div>
<div ng-class="myBoxes.Box2">Box2</div>
<div ng-class="myBoxes.Box3">Box3</div> 
```

但是，如果我动态生成 ng-class 变量`"myBoxes.{{boxName}}"`，那么它的行为就不像变量。我相信会有更好的方法来实现我正在尝试做的事情，但是经过数小时的谷歌搜索/反复试验后，我无法找到它。如果有人可以帮助我，我会很高兴。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-22T09:05:44.417

你快到了，它是`myBoxes[boxName]`而不是`myBoxes.{{boxName}}`。

像这样的东西：

```
<!doctype html>
<html ng-app="myApp">
<head>
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script src="http://code.angularjs.org/1.1.2/angular.min.js"></script>
    <script type="text/javascript">
    var myApp = angular.module('myApp', []);

    myApp.controller('MainCtrl', ['$scope', function($scope){
        $scope.boxNameList=['Box1','Box2','Box3'];
        $scope.myBoxes={
              Box1: "redBackground",
              Box2: "blackBackground",
              Box3: "blackBackground"
        }
    }]);
    </script>
    <style type="text/css">
    .redBackground{
       background-color: red;
    }

    .blackBackground{
      background-color: black;
    }
    </style>
</head>
<body ng-controller="MainCtrl">
    <div ng-repeat="name in boxNameList">
        <div ng-class="myBoxes[name]">Box1</div>
    </div>
</body>
</html> 
```

# javascript - 为什么 localStorage.getItem 只在 IE9 中失败？

> ID：15020194
> 
> 赞同：2
> 
> 时间：2013-02-22T08:53:13.120
> 
> 标签：javascript, html, internet-explorer-9

这在 Chrome 和 Firefox 中完美运行：

```
var webStorageSupported = ('localStorage' in window) && window['localStorage'] !== null;
if (webStorageSupported && localStorage.getItem("get_list_center") !== null) {
  document.getElementById('mail_listing').innerHTML = localStorage.getItem("get_list_center");
} 
```

但是当我在`IE9`. 如果我键入：`document.getElementById('mail_listing').innerHTML;`
并`localStorage.getItem("get_list_center");`在控制台中单独获取，我可以在本地存储中获取元素和内容。

![错误画面](../Images/b2f595be8747dbc70782dc89107e2f00.png)

当我尝试将其分配`innerHTML`为本地存储时，发生未知异常。是什么赋予了？？？

编辑：根据评论的建议，我尝试在一个单独的变量中获取本地存储，然后在 innerhtml 中分配该变量。事实证明，localstorage 确实在检索 HTML 格式的代码，但它无法保存整个字符串：

```
<table width="100%">......
   <TD width=\"7%\" align=right>12K &nbsp;&nbsp;&nbsp;&nbsp; </TD></TR></TBODY></TABLE></DIV>\r\n<DIV style=\"DISPLAY: no   
   [[CUT OFF FROM HERE]] 
```

我的印象是 localstorage 最多可以保存 5 MB 的文本，Chrome 和 Firefox 就是这种情况，但 IE9 可能不是这种情况（编辑：谷歌搜索后，[IE9 最多支持 10MB](https://stackoverflow.com/questions/2989284/what-is-the-max-size-of-localstorage-values)很明显它是别的东西） . 我能做些什么来解决这个问题？

Edit2：我已经验证 localStorage 正确分配了整个 HTML 内容，如果在设置内容后立即检索它：

```
localStorage.setItem('get_list_center', document.body.innerHTML);
var x = localStorage.getItem('get_list_center'); //GETS THE WHOLE HTML CONTENT CORRECTLY. 
```

只是当我从需要它的其他地方获取内容时，内容会被切断。localstorage 不会在其他任何地方被篡改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T00:45:13.770

如果您从`file:`URL 浏览，这只是我们都应该切换到 Firefox 的众多原因之一—— [IE9 讨厌`localStorage`本地文档](https://stackoverflow.com/a/8706050/1979005)。

# wpf - 我可以拦截 WinForms AxHost 'System.Runtime.InteropServices.COMException' 以避免 Microsoft .NET 错误对话框

> ID：15020197
> 
> 赞同：0
> 
> 时间：2013-02-22T08:53:30.530
> 
> 标签：wpf, winforms, activex

我们开发了一个`WPF`应用程序，使用户能够`ActiveX`使用控件动态插入控件`System.Windows.Forms.AxHost`。
但是，如果用户指定了一个不再存在或在特定机器上不存在的控件，那么我们会在`Release`mode 中看到以下对话框（虽然我们看不到`quit`按钮，但只有`continue`）：

[有效的 XHTML http://img508.imageshack.us/img508/3898/jitps6.png](http://img508.imageshack.us/img508/3898/jitps6.png)

我们希望在我们的 UI 中内联显示错误消息，而不是向用户显示一个让应用程序看起来像爆炸的对话框。

有什么办法可以拦截这些异常，使对话框不显示？

# python - Python，如何将输出发送到文件和终端

> ID：15020200
> 
> 赞同：7
> 
> 时间：2013-02-22T08:53:37.317
> 
> 标签：python, logging, stdout

我想使用 Python 将输出发送到`log.txt`终端上的文件和 STDOUT。这是我所拥有的：

```
import sys
class Logger(object):
    def __init__(self, filename="Default.log"):
        self.terminal = sys.stdout
        self.log = open(filename, "a")

    def write(self, message):
        self.terminal.write(message)
        self.log.write(message)

sys.stdout = Logger("log.txt")
print "Hello world !"            #This line is saved in log.txt and STDOUT 
```

该程序将输出发送到文件和标准输出。我的问题是：文件的写入函数是如何被调用的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T09:09:33.543

从sys.stdout的[文档中：](http://docs.python.org/2/library/sys.html#sys.stdout)

> stdout 和 stderr 不必是内置文件对象：任何对象都是可以接受的，只要它有一个带有字符串参数的 write() 方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T09:21:45.413

更具体地说，**print**函数（在 Python 2.X 中它仍然是一个关键字，但在这里无关紧要）执行类似这样的操作

```
import sys
def print(message):
    sys.stdout.write(message) 
```

这样，当您调用它时，它将在 sys.stdout 上打印您的消息。但是，如果您使用包含 .write 方法的对象覆盖 sys.stdout，那么它将调用该方法。[这就是鸭式打字](http://en.wikipedia.org/wiki/Duck_typing)的魔力。

# java - 格式化用户名

> ID：15020206
> 
> 赞同：2
> 
> 时间：2013-02-22T08:54:02.547
> 
> 标签：java, string-formatting

我的用户名是域\用户名，所以如果我这样做

```
String username = "mydomain\myusername"; 
```

它给出了一个错误，任何人都可以让我知道如何做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-22T08:55:35.390

`\`是一个元字符，它具有特殊的含义。如果您想按原样使用元字符，则需要使用`\`. 既然你有`\`，`mydomain\myusername`你必须用`\`

采用

```
String username = "mydomain\\myusername"; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-22T08:55:44.833

反斜杠是用于转义的特殊字符。例如 \t 是一个制表符，\n 是一个换行符。你有 \m，它不是一个有效的转义序列。

要真正有一个反斜杠，它需要被转义：

```
String username = "mydomain\\myusername"; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-22T08:55:49.353

逃离角色`\`

所以`String username = "mydomain\\myusername";`改用

# python - 有没有办法配对字典项目？

> ID：15020211
> 
> 赞同：3
> 
> 时间：2013-02-22T08:54:18.350
> 
> 标签：python, dictionary

我想要做的是能够通过我的字典并一次成对地打印出两个值，而不会加倍它们。所以如果我有：

```
dict = {'player1':'Bob' , 'player2':'John', 'player3':'Greg', 'player4':'Tim'} 
```

我希望它能够将它分成两对而不加倍。所以我可以得到

> Bob 和 John、Greg 和 Tim 或 Bob 和 Greg、John 和 Tim。

对不起，如果我没有很好地解释这一点，但希望你明白我的意思。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T08:58:36.103

```
d = {'player1':'Bob' , 'player2':'John', 'player3':'Greg', 'player4':'Tim'}

players = list(d.values())
print(', '.join('{} and {}'.format(players[i], players[i+1]) for i in range(0, len(players), 2))) 
```

打印（例如）：

```
John and Greg, Bob and Tim 
```

您可以将第二行替换为

```
players = sorted(d.values()) 
```

获取按字母顺序排列的玩家列表。否则顺序将是任意的。

仅适用于偶数个玩家。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T08:57:55.017

```
>>> import random
>>> D = {'player1':'Bob' , 'player2':'John', 'player3':'Greg', 'player4':'Tim'}
>>> players = D.values()
>>> random.shuffle(players)   # I'm guessing you don't want fixed pairs
>>> for i in zip(*[iter(players)]*2):
...  print i
... 
('Bob', 'Tim')
('Greg', 'John') 
```

# c++ - 在 C++ 中从右侧读取流

> ID：15020215
> 
> 赞同：0
> 
> 时间：2013-02-22T08:54:25.303
> 
> 标签：c++, stream

我对c ++有点菜鸟。我知道当一个人从流中读取时，您从左侧读取。例如，如果您有一个包含以下行的文件：

> 我在玩溪流

当您读取文件时，您将从文件中检索的第一个字符串是`I'm`

是否可以使您检索的第一个字符串成为`streams`

基本上，从右侧读取流。

注意：这是假设您每次没有阅读整行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T09:00:35.433

流不是从左到右读取的，它们是从头到尾读取的。他们应该对事物进行建模，这是阅读它们的逻辑方式，并且在某些情况下（例如键盘输入）是阅读它们的唯一明智方式。对于一开始就完全知道的流（例如文件），如果你真的想要，你可以煞费苦心地寻找最后一个元素，然后在你去的时候一个接一个地阅读它们。这将是缓慢而丑陋的。

相反，我建议您以通常的方式从头到尾*阅读*，然后在获得数据后对其进行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T08:57:50.943

您要做的是从右到左阅读单词，而不是整个流。从右到左读取流会导致`smaerts`不输入`streams`，我相信你不能开箱即用。我的建议是您阅读向量中的单词，然后将其反转。或者，在阅读之前反转整个字符串，然后在阅读后反转每个单词。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T09:01:34.920

不，流库中不支持此功能。一个文件通常按照文档数据从左到右、从上到下的顺序排列。给定可变长度的行，除非您扫描行中的所有数据，否则您通常无法知道行终止的位置。

对于此要求，您最好使用 getline 将整行读入字符串，然后您有很多选择，例如：

*   编写自己的字符串扫描器来依次查找每个单词（足够简单，快速）
*   从反转的行文本创建一个 istringstream，然后循环以依次流式传输每个单词 - 在处理之前将其反转（方便流功能 - 空格跳过、转换、状态等）
*   将行标记为数组或类似的，并以相反的顺序迭代（概念上简单，但内存占用）

# android - 在android中使用downloadmanager类下载多个文件？

> ID：15020217
> 
> 赞同：-3
> 
> 时间：2013-02-22T08:54:36.707
> 
> 标签：android, android-download-manager

我想使用android中的downloadmanager类下载多个文件我有100-200个图像文件但是当我尝试下载文件时应用程序崩溃但下载开始了？我该如何解决这个问题，我下载文件的代码是：

```
public void downloadimages(String url,String filename)
        {
          String ur1=url,v1=filename;
          downloadManager = (DownloadManager)getSystemService(DOWNLOAD_SERVICE);
          Uri Download_Uri = Uri.parse(ur1);
          DownloadManager.Request request = new DownloadManager.Request(Download_Uri);
          request.setAllowedNetworkTypes(DownloadManager.Request.NETWORK_WIFI);
          request.setAllowedOverRoaming(false);
          request.setDescription("Android Data download using DownloadManager.");
          request.setDestinationInExternalFilesDir(getApplicationContext(),Environment.DIRECTORY_DOWNLOADS,v1 + ".jpg");
          downloadManager.enqueue(request);     

        }
02-23 16:45:28.695: E/AndroidRuntime(22646): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.newpicker/com.example.newpicker.AnotherActivity}: java.lang.IndexOutOfBoundsException: Invalid index 136, size is 136 
```

这是我的日志猫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-15T11:55:14.983

你能告诉我们代码`com.example.newpicker.AnotherActivity`类吗，因为似乎错误来自这个类。

那么错误是 a `IndexOutOfBoundsException`，那么您是否尝试过使用较少的图像，例如 10 或 20？并在前 10 个恢复后运行？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T13:18:00.930

尝试将此权限添加到您的 AndroidManifest：

```
<uses-permission android:name="android.permission.DOWNLOAD_WITHOUT_NOTIFICATION" /> 
```

# android - 在android jellybean中点击相机保存按钮动作再次打开相机

> ID：15020231
> 
> 赞同：1
> 
> 时间：2013-02-22T08:55:46.950
> 
> 标签：android, android-camera, android-4.2-jelly-bean

我正在尝试使用 startActivityForResult() 拍照并将其保存到文件中。但是在点击“保存”按钮后它没有保存任何东西并再次打开相机。使用设备三星 Galaxy S3(4.1.1) 和三星 Galaxy Nexus(4.1.1)，但它与摩托罗拉 Defy(2.3.4) 一起工作正常。是 Android OS 4.1.1 还是 Device 的问题？

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    File file = null;
    Date date = new Date();
    try {
        file = new File("photosearch-"+date.getTime()+".jpeg");
        Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
        intent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(file));
        Log.e(TAG, " startActivityForResult");
        startActivityForResult(intent, CAMERA_ACTIVITY);
    } catch (Exception e) {
        Log.d(TAG, ""+e);
        //Check if sdcard is accessible
        Toast.makeText(getActivity(), "Unable to access SD Card", Toast.LENGTH_LONG).show();
        getActivity().finish();
    }

}
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    Log.d(TAG, "onActivityResult....");

    if(resultCode == Activity.RESULT_CANCELED){
        Intent intent = new Intent(getActivity(), AnotherListActivity.class);
        intent.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
        startActivity(intent);
        getActivity().finish();
    }
    if(resultCode == CAMERA_ACTIVITY){
        Log.d(TAG, "It should come here..");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T09:09:35.770

您的额外参数有问题，请[在此处使用此示例](http://developer.android.com/training/camera/photobasics.html)

# c# - 如何替换字符串中的字符？

> ID：15020233
> 
> 赞同：0
> 
> 时间：2013-02-22T08:55:50.650
> 
> 标签：c#, .net, file

我想替换文件中字符串内容中的字符。下面的字典将键显示为不需要的字符，我需要用字典中的值替换。

```
Dictionary<string, string> unwantedCharacters = new Dictionary<string, string>();
        unwantedCharacters["É"] = "@";
        unwantedCharacters["Ä"] = "[";
        unwantedCharacters["Ö"] = "\\";
        unwantedCharacters["Å"] = "]";
        unwantedCharacters["Ü"] = "^";
        unwantedCharacters["é"] = "`";
        unwantedCharacters["ä"] = "{";
        unwantedCharacters["ö"] = "|";
        unwantedCharacters["å"] = "}";
        unwantedCharacters["ü"] = "~"; 
```

这是我目前使用的代码，感觉执行时间太长了..

```
 for (int index = 0; index < fileContents.Length; index++)
        {
            foreach (KeyValuePair<string, string> item in unwantedCharacters)
            {
                if (fileContents.IndexOf(item.Key) > -1)
                {
                    fileContents = fileContents.Replace(item.Key, item.Value); // Replacing straight characters
                }
            }
        } 
```

即，在两个级别循环..任何其他方式实现这一点..任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T09:13:47.297

由于您没有修改字符串的长度，因此如果您制作`unwantedCharacters`a`Dictionary<char, char>`而不是`<string, string>`，您可以执行以下操作：

```
var charArray = fileContents.ToCharArray();
for (int i = 0; i < charArray.Length; i++)
{
    char replacement;
    if (unwantedCharacters.TryGetValue(charArray[i], out replacement))
        charArray[i] = replacement;
}
fileContents = new string(charArray); 
```

性能`O(n)`与输入字符串的长度有关。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T08:59:13.450

似乎 fileContents 在这里是一个字符串值。您可以简单地在字符串上调用替换。

```
foreach (KeyValuePair<string, string> item in unwantedCharacters)
{
    fileContents = fileContents.Replace(item.Key, item.Value); 
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-22T09:02:25.383

看这个答案：[答案](https://stackoverflow.com/a/7351142/1848942)

但是在这段代码中放上你的字符：

```
IDictionary<string,string> map = new Dictionary<string,string>()
    {
       {"É", = "@"},
       {"Ä", = "["},
       {"Ö", = "\\"},
       ...
    }; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-22T09:05:10.087

为了替换字符串中的许多字符，请考虑使用[StringBuilder 类](http://msdn.microsoft.com/en-us/library/system.text.stringbuilder%28v=vs.110%29.aspx)。替换字符串中的一个字符会导致创建全新的字符串，因此效率非常低。试试下面的：

```
var sb = new StringBuilder(fileContents.Length);

foreach (var c in fileContents)
    sb.Append(unwantedCharacters.ContainsKey(c) ? unwantedCharacters[c] : c);

fileContents = sb.ToString(); 
```

我在这里假设您的字典包含字符 ( `Dictionary<char, char>`)。这是一个案例，只需发表评论，我将编辑解决方案。

我还假设，那`fileContents`是一个字符串。

您还可以使用*LINQ*代替*StringBuilder*：

```
var fileContentsEnumerable = from c in fileContents
                             select unwantedCharacters.ContainsKey(c) ? unwantedCharacters[c] : c;

fileContents = new string(fileContentsEnumerable.ToArray()); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-22T09:06:16.623

你想建立一个**过滤器**。您处理文件的内容，并在处理文件时进行替换。

像这样的东西：

```
 using(StreamReader reader = new StreamReader("filename"))
        using (StreamWriter writer = new StreamWriter("outfile"))
        {
            char currChar = 0;
            while ((currChar = reader.Read()) >= 0)
            {
                char outChar = unwantedCharacters.ContainsKey(currChar)
                                   ? unwantedCharacters[currChar]
                                   : (char) currChar;
                writer.Write(outChar);
            }
        } 
```

如果您的数据在内存中，则可以使用内存流，或者循环`fileContents`是字符串或字符数组。

这个解决方案是 O(n)，其中 n 是文件的长度，这要归功于字典（请注意，您可以使用简单的稀疏数组而不是字典，并且您将获得相当多的速度）。

**不要**像其他人建议的那样遍历字典，因为每个替换都是 O(n)，所以最终总时间为 O(n*d)，d 是字典大小，因为你必须多次浏览文件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-22T09:07:23.630

删除`foreach`并替换为`for`从 0 到 的循环`item.Count`。 [这篇文章](https://stackoverflow.com/questions/365615/in-net-which-loop-runs-faster-for-or-foreach)会有所帮助，希望。

# git - 如何保存我的暂存区的当前状态？

> ID：15020237
> 
> 赞同：13
> 
> 时间：2013-02-22T08:55:59.087
> 
> 标签：git

**问：**
我在暂存区添加了一些文件。我想暂时保存这些信息。如何？

**背景：**
有时我会执行一些更大的重构。提交完整的结果才真正有意义。
在此重构期间，我还进行了一些我想独立提交的不相关更改。
例如，重构重命名了一个方法。不相关的更改修复了同一类中另一个方法的一个参数的拼写错误。
现在，假设当我意识到我忘记事先提交一项不相关的更改时，我已经将大部分文件添加到暂存区域。
将文件添加到暂存区需要时间，因为我检查每个文件以确保我真的只提交我想要的。因此，简单地将它们全部从暂存区移除并不是解决方案。
我想做的是：

1.  保存暂存区的当前状态
2.  删除所有暂存文件
3.  分阶段进行不相关的更改
4.  提交不相关的更改
5.  将保存的状态重新应用到暂存区域。

这有可能吗？

另一种解决方案是多个暂存区的可能性，但我认为这是不可能的。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-23T12:32:53.000

以下命令链应该可以解决问题

```
git commit -m "temporary" # save current stage are as an actual commit
git commit unrelated_files -m "The other feature"
git stash # hide the rest
git rebase -i HEAD~2 # change the order of two last commits
git reset HEAD^ # rollback the "temporary" commit
git add . # add everything from that commit back to staging
git stash pop # and return back all initially unstaged stuff 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T09:07:58.883

你肯定需要`git stash`

这将保存您当前的工作，并保留您的目录，就像您对 HEAD 进行了重置一样。您现在可以切换分支，在另一个主题上做一些工作。

当您准备好再次使用您的功能时，重新应用您隐藏的更改`git stash apply`

您可以组合多个存储，`git stash list`将它们列出，然后您可以选择要应用的一个，例如`git stash apply @{1}`

编辑 ：

正如@nevik-rehnel 在评论中所说，您也可以使用交互式添加。

取消暂存所有内容，用于暂存`git add -p`不相关的更改，提交，然后重新暂存所有内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T12:15:38.647

为什么不能将它保存为分支并启动一个新分支

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-05T17:56:46.500

这似乎有效：

*   git commit -m “临时”
*   git stash -u
*   git重置头^
*   git stash save "MeepMeep!"
*   git stash pop stash@{1}

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-08T07:52:45.410

**这是一种在不中断当前工作的情况下保存状态的方法。**

```
git add . # OR whatever you want to add
git commit -m "saved state"
git log 
```

将最后一次提交的哈希复制到剪贴板，将其粘贴到笔记中。

```
git checkout -b saved_State_Holder  
git cherry-pick <copiedHash>
git checkout <yourOriginalBranch> 
git reset --soft HEAD~1 # To keep your commit history clean
git reset # to unstage the changes 
```

现在，每当您想访问该状态时，只需打开您的笔记，复制所需的哈希，然后运行以下命令：

```
git cherry-pick <copiedHash> # applies that state
git reset --soft HEAD~1 # Optional if you want to pick and choose changes
git reset 
```

# java - 如何避免两个类之间的循环依赖？

> ID：15020238
> 
> 赞同：0
> 
> 时间：2013-02-22T08:56:00.830
> 
> 标签：java, android, dependency-injection, circular-dependency

我有两个类 - 一个定义`BaseActivity`（我在应用程序中的所有活动的全局父级），另一个是`AsyncTask`我定义公共网络操作的类。但我有下一个问题。在他的方法中`AsyncTask`命名的类必须调用在类中定义的类，但类也必须创建一个. 这是清楚地说明了这个问题的代码。`RestfulNetworkTasks``onPostExecute()``UpdateCurrentActivityAfterNetworkOperation()``BaseActivity``BaseActivity``RestfulNetworkTasks`

```
class RestfulNetworkTasks extends AsyncTask<Pair<String, LinkedHashMap<String, Object>>, Void, LinkedHashMap<String, Object>> {
    private ImmutableMap<String, Object> serverData_;
    NetworkOperation LowLevelRestOperations_ = new NetworkOperation();

    @Override
    protected LinkedHashMap<String, Object> doInBackground(Pair<String, LinkedHashMap<String, Object>>... params) {
        return LowLevelRestOperations_.executeServerCommand(params[0].getValue0(), params[0].getValue1());
    }

    protected void onPostExecute(LinkedHashMap<String, Object> result) {
        serverData_ = copyOf(result);
        BaseActivity instance_Activity = new BaseActivity(); 
        //BaseActivity injection (It is too bad to create Activity in such a way - I know!) So I need some piece of advice
        instance_Activity.UpdateCurrentActivityAfterNetworkOperation(serverData_);
        //Here I must call method for updating GUI after operation
    }

    public ImmutableMap<String, Object> GetDataFromServer() {
        return serverData_;
    }
}

public class BaseActivity extends Activity {

    RestfulNetworkTasks serverOperation_ = new RestfulNetworkTasks(); //RestfulNetworkTasks injection

    public void UpdateCurrentActivityAfterNetworkOperation(
        ImmutableMap<String, Object> server_data) {
    }// Here is this method which I will override in my child activities

    @SuppressWarnings("unchecked")
    public ImmutableMap<String, Object> Login(LinkedHashMap<String, Object> parameters) {
        Pair<String, LinkedHashMap<String, Object>> params_ = new Pair<String, LinkedHashMap<String, Object>>(LOGIN_COMMAND, parameters);
        serverOperation_.execute(params_);
        return serverOperation_.GetDataFromServer();
    }
} 
```

如您所见，我在 RestfulNetworkTasks 和 BaseActivity 类之间存在循环依赖关系，这可能导致构造函数的无限链调用。

问题是如何重构这个设计来避免这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T09:26:33.760

AsyncTask 几乎总是会从 Activity 中调用，那么为什么不将它作为 Constructor 参数传入呢？

RestfulNetworkTasks.java：

```
private BaseActivity activity;

public RestfulNetworkTasks(BaseActivity activity){
    this.activity = activity;
} 
```

BaseActivity.java：

```
new RestfulNetworkTasks(this).execute(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T08:59:19.307

您不应该以这种方式创建 Activity

```
BaseActivity instance_Activity = new BaseActivity(); 
```

活动由系统管理

# mongoose - Mongoose.js 除了 _id & __v 默认来自查询结果

> ID：15020246
> 
> 赞同：9
> 
> 时间：2013-02-22T08:56:33.037
> 
> 标签：mongoose

我可以从查询结果中排除一个字段，声明如下：

字段：{类型：'字符串'，选择：假}

但是可以用 _id 和 __v 字段来做到这一点吗？我试过

_id：{选择：假}

但它似乎不起作用

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-22T13:40:56.973

只要您还在`type`架构定义中包含该字段，您就可以执行此操作：

```
_id: {type: mongoose.Schema.ObjectId, select: false},
__v: {type: Number, select: false}, 
```

但是，除非*您*`__v`在. 因此，请确保您知道自己在做什么。`save`*`find`*

# java - 从 varbinary 提取十六进制字符串到文件

> ID：15020255
> 
> 赞同：0
> 
> 时间：2013-02-22T08:56:57.340
> 
> 标签：java, sql, sql-server, sqldatatypes, type-conversion

这几乎是一个菜鸟问题，但我找不到解决方案。

我正在使用 SQL Server 数据库。在一个表中，一列的 DataType 为 varbinary(max)。此列的值显示为十六进制值（当我使用选择 - 查询时）。将显示的十六进制字符串完全写入文本文件的最佳方法是什么？

两个约束： * 复制和粘贴不是一个选项。我要提取的值的长度约为。69000 个字符。Windows 剪贴板似乎只存储了大约 43000 个字符。* 我尝试将查询结果保存为 .csv 文件。但这些文件的最大大小约为 65000 个字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T09:08:35.623

从命令行：

> ```
> bcp "select * from [<yourtable>]" queryout C:\Temp\yourfile.dat -S yourserver -d yourDatabase -T -c 
> ```

-T 表示可信连接；您可以使用 -U 和 -P 提供用户名作为密码。

# mongodb - mongodb $not _id

> ID：15020261
> 
> 赞同：13
> 
> 时间：2013-02-22T08:57:34.330
> 
> 标签：mongodb, find, notin

我需要一种搜索​​方法，但不包括已经在用户面前的屏幕上的 _id。例如，我有 3 个宠物资料，其中一个用户已经在查看。

在那个页面上，我有一个标题，叫做我的家人。然后我运行这个搜索：

```
public function fetch_family($owner)
    {
        $collection = static::db()->mypet;
        $cursor = $collection->find(array('owner' => new MongoId($owner)));

        if ($cursor->count() > 0)
            {
                $family = array();
                // iterate through the results
                while( $cursor->hasNext() ) {   
                    $family[] = ($cursor->getNext());
                }
                return $family;
            }
    } 
```

即使知道我已经展示了一只，它也会返回我家中的所有宠物。所以我想从搜索中排除那个 _id 。

我想到了这样的事情。

```
$cursor = $collection->find(array('owner' => new MongoId($owner), '$not'=>array('_id'=>new MongoId(INSERT ID HERE)))); 
```

但是，这只会阻止整个事情的运行。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-13T15:36:06.550

您需要做一个[`$ne`（不等于）](http://docs.mongodb.org/manual/reference/operator/ne/)以确保您正在查看的当前宠物被排除在所有者的搜索之外。

`mongo`外壳中的示例：

```
var viewingPetId = ObjectId("515535b6760fe8735f5f6899");
var ownerId = ObjectId("515535ba760fe8735f5f689a");

db.mypet.find(
    {
        _id: { $ne: viewingPetId },
        owner: ownerId
    }
) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-11-06T14:01:38.183

使用`$ne`as （注意不需要使用`ObjectId()`，字符串会自动转换为`ObjectId`）：

```
db.organizations.find({"_id" : {$ne:"563c50e05cdb2be30391e873"}}) 
```

# javascript - 加载外部页面并插入 Javascript？

> ID：15020266
> 
> 赞同：1
> 
> 时间：2013-02-22T08:57:52.657
> 
> 标签：javascript, external, shake

我正在创建一个需要加载任何页面的网站，例如 Google.com，并插入一些 javascript 来加载页面。

示例：[http](http://hsmaker.com/harlemshake.asp?url=http://stackoverflow.com) ://hsmaker.com/harlemshake.asp?url=http://stackoverflow.com 警告：可能很烦人；）

加载页面并搜索“harlem”，您会看到它添加了以下内容：

```
<div style="position:absolute; z-index:9999999; width:100%; height:100%;" ></div>
    <script src="http://hsmaker.com/harlem-shake-script.js" type="text/javascript"></script>
    <div style=" height:0px; width:0px; overflow:hidden;">
    <audio controls="controls" autoplay="autoplay" loop="loop">
        <source src="http://hsmaker.com/sound/harlemshake.ogg" type="audio/ogg" />
    </audio>
    <script type="text/javascript">
        ready(function () {
            harlemShake();
        });
    </script>
</div> 
```

如您所见，它会加载网站（就像您访问页面一样）并将该代码添加到其中。我正在考虑围绕这些东西做一个 iframe，但据我所知，你不能将 javascript 添加到 iframe，所以这绝对不是他们如何做到的。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T09:01:58.740

你想要的那一点不是用 javascript 完成的。他们正在抓取页面服务器端并在它到达浏览器之前对其进行修改。

# python - Python Twisted, SSL Timeout Error

> ID：15020267
> 
> 赞同：2
> 
> 时间：2013-02-22T08:57:53.673
> 
> 标签：python, ssl, https, twisted

```
from twisted.web.resource import Resource
from twisted.web.server import Site, Session
from twisted.internet import ssl
from twisted.internet import reactor

class Echo(Resource):
    def render_GET(self, request):
        return "GET"

class WebSite(Resource):
    def start(self):
        factory = Site(self, timeout=5)
        factory.sessionFactory = Session
        self.putChild("echo", Echo())
        reactor.listenSSL(443, factory, ssl.DefaultOpenSSLContextFactory('privkey.pem', 'cacert.pem'))
        #reactor.listenTCP(8080, factory)
        self.sessions = factory.sessions

if __name__ == '__main__':
    ws = WebSite()
    ws.start()
    reactor.run() 
```

On the code above, when i enter the url "https: //localhost/echo" from the web browser, it gets the page. After 5 seconds later i try to reload the page, it does not refresh the web page, stuck on reloading operation. On the second attempt of reload, it gets the page instantly.

When i run the code above with reactor.listenTCP(8080, factory), no such problem occurs. (I can reload page without stucking reload and get the page instantly)

Problem can be repeated with Chrome, Firefox. But when i try it with Ubuntu's Epiphany browser, no such problem occurs.

I could not understand why this occurs.

Any comment about understanding/solving problem will be appriciated.

Extra info:

*   When i use listenSSL, file descriptor related with the connection does not close after timeout seconds later. While reloading page it stays still, and on the second reload operation, it is closed and new file descriptor is opened. (and i get page instantly)
*   When i use listenTCP, file descriptor closes after timeout seconds later, and when i reload page it opens new file descriptor and return page instantly.
*   Also with Telnet connection, it timeout connections as expected in both case.
*   Twisted client that connects this server also affects timeouts as expected.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:17:49.283

The class that timeout connection is TimeoutMixin class.

and it uses transport.loseConneciton() method to timeout connections.

Somehow, DefaultOpenSSLFactory uses the connection(?), therefore loseConnection method waits for finishing the transportation and at that time it doesn't accept any process on the connection.

According to twisted documentation:

> In the code above, loseConnection is called immediately after writing to the transport. The loseConnection call will close the connection only when all the data has been written by Twisted out to the operating system, so it is safe to use in this case without worrying about transport writes being lost. If a producer is being used with the transport, loseConnection will only close the connection once the producer is unregistered.
> 
> In some cases, waiting until all the data is written out is not what we want. Due to network failures, or bugs or maliciousness in the other side of the connection, data written to the transport may not be deliverable, and so even though loseConnection was called the connection will not be lost. In these cases, abortConnection can be used: it closes the connection immediately, regardless of buffered data that is still unwritten in the transport, or producers that are still registered. Note that abortConnection is only available in Twisted 11.1 and newer.

As a result, when i change loseConnection() with abortConnection() on timeoutMixinClass via overriding it, situation is no more occuring.

When i clarify the reason of why loseConnection is not enough to close connection on specific situations, i'll note it here. (any comment about it will be appreciated)

# spring - Spring 3：加载 index.jsp 时做一些事情

> ID：15020268
> 
> 赞同：0
> 
> 时间：2013-02-22T08:57:54.707
> 
> 标签：spring, spring-mvc

这可能吗？当我转到 index.jsp 时，我想要重写一个文件......

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T09:43:14.773

也许 Spring-y 的方法是定义一个[拦截器](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/mvc.html#mvc-handlermapping-interceptor)，然后为指定的 URL[配置它：](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/mvc.html#mvc-config-interceptors)

拦截器类将类似于：

```
public class RewriteInterceptor extends HandlerInterceptorAdapter {
// implementation
} 
```

并且配置如下：

```
<mvc:interceptors>
    <mvc:interceptor>
        <mapping path="/index.jsp"/>
        <bean class="your.path.RewriteInteceptor" />
</mvc:interceptor> </mvc:interceptors> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T09:05:29.313

您可以编写一个过滤器，只要有对 index.jsp 的请求，就会调用它。这个过滤器会在加载 index.jsp 页面之前被调用。这是过滤器教程的链接

[http://viralpatel.net/blogs/tutorial-java-servlet-filter-example-using-eclipse-apache-tomcat/](http://viralpatel.net/blogs/tutorial-java-servlet-filter-example-using-eclipse-apache-tomcat/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T09:46:41.223

index.jsp 是在用户请求特定 url 之后呈现的视图，例如[http://example.com/context/home](http://example.com/context/home)吗？

如果在 /home 的控制器请求映射中是这样，您可以在那里做您需要的事情。

# backbone.js - 骨干模型成功和错误选项

> ID：15020275
> 
> 赞同：0
> 
> 时间：2013-02-22T08:58:14.840
> 
> 标签：backbone.js

在骨干模型#save 中添加成功和错误回调不起作用。

我升级到了最新的 0.9.10，令我惊讶的是

```
model.save{ 
  success : function(model, response, options){

  },

  error : function(model, response, options){

  }); 
```

不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T12:34:54.687

该`options`对象应作为第二个参数传递。第一个参数是为您要在保存操作中设置的属性保留的：

```
model.save({attr:'val'}, {
  success: function() { },
  error: function() { }
}); 
```

如果您不想传递任何新值来保存，您可以传递空对象 ( `{}`) 或`null`.

# c++ - 用 FILE 指针写，用 ifstream 读

> ID：15020277
> 
> 赞同：-1
> 
> 时间：2013-02-22T08:58:25.080
> 
> 标签：c++, serialization, deserialization, ifstream

我必须处理一方面信息被写入文件的代码，`FILE*`另一方面它是使用`ifstream`.

我试图编译一个显示与原始代码相同行为的虚拟代码：

```
#include <cstdio>
#include <cstdlib>
#include <cstring>
#include <fstream>
#include <iostream>

int main()
{

    FILE* outFile = fopen("testFile", "w");  
    char* posBuf = NULL;                                                       
    unsigned int counter = 0;                           

    posBuf = (char*) malloc( sizeof(int) + 2*sizeof(double) );

    int iDummy = 123;
    memcpy(posBuf+counter, (const void*) &iDummy, sizeof(int));          
    counter += sizeof(int);                           

    double dDummy = 456.78;
    memcpy(posBuf+counter, (const void*) &dDummy, sizeof(double));            

    counter += sizeof(double);
    dDummy = 111.222;
    memcpy(posBuf+counter, (const void*) &dDummy, sizeof(double));            

    fputs(posBuf, outFile);   
    fclose(outFile);          

    /////////////////////

    std::ifstream myfile; 
    myfile.open("testFile", std::ios::in|std::ios::binary);

    myfile.seekg (0, std::ios::end);                        
    unsigned int length = myfile.tellg();              
    myfile.seekg (0, std::ios::beg);                        

    char* posBuf2 = (char*) malloc( length );           
    myfile.read(posBuf2, length);                       

    counter = 0;
    int idummy = 0;
    memcpy((void*) &idummy, posBuf2+counter, sizeof(int));  
    counter += sizeof(int);                                       
    printf("read integer: %u\n", idummy);            

    double ddummy = 1.0;
    memcpy((void*) &ddummy, posBuf2+counter, sizeof(double));                 
    counter += sizeof(double);                                       
    printf("read double: %f\n", ddummy);                                      

    ddummy = 1.0;
    memcpy((void*) &ddummy, posBuf2+counter, sizeof(double));                 
    counter += sizeof(double);                                       
    printf("read double: %f\n", ddummy);                                      

    myfile.close();

    /////////////////////

    FILE* inFile = fopen("testFile", "r");
    char* posBuf3 = NULL;

    unsigned int c = 0;
    while ( ! feof (inFile) )
    {
        posBuf3 = (char*) realloc((void*) posBuf3, c+4);
        fgets(posBuf3+c, 4, inFile);
        c += 4;
    }

    idummy = 0;
    memcpy((void*) &idummy, posBuf, sizeof(int));
    printf("read again integer: %u\n", idummy);

    ddummy =1.0;
    memcpy((void*) &ddummy, posBuf+sizeof(int), sizeof(double));
    printf("read again double: %f\n", ddummy);

    ddummy =1.0;
    memcpy((void*) &ddummy, posBuf+sizeof(int)+sizeof(double), sizeof(double));
    printf("read again double: %f\n", ddummy);

    return 0;
} 
```

我从中得到的输出是：

```
read integer: 123
read double: 0.000000
read double: 0.000000
read again integer: 123
read again double: 456.780000
read again double: 111.222000 
```

如您所见，反序列化仅在我`FILE*`也用于读取文件时才有效。

**问题**：对这种行为有什么解释吗？

谢谢！

**更新**：

1) 打开`ifstream`使用`std::ios::in|std::ios::binary`

2）修复malloc

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T09:13:07.580

发布的代码存在一些问题：

*   它正在写入超出分配内存的范围`posBuf`（1`int`和 2`double`被复制到内存，但仅`sizeof(int) + sizeof(double)`被分配），这是未定义的行为。
*   [`fputs()`](http://en.cppreference.com/w/c/io/fputs)将其参数视为以空字符结尾的字符串，因此在遇到空字符时将停止写入。以二进制模式打开文件并使用[`fwrite()`](http://en.cppreference.com/w/c/io/fwrite)不将其输入视为以空字符结尾的字符串。

代码还有其他几个问题；

*   它是 C 和 C++ 的可怕组合
*   `malloc()`可避免的显式动态内存管理（没关系`realloc()`）。简单地替换为：

    ```
    char posBuf[sizeof(int) + 2 * sizeof(double)]; 
    ```

*   `while (!feof(inFile))`.
*   实际上没有检查 I/O 操作是否成功

# c# - C#如何插入零日期？

> ID：15020278
> 
> 赞同：1
> 
> 时间：2013-02-22T08:58:24.980
> 
> 标签：c#, database, exception, date

我需要将零字符串“00000000”转换为日期并插入数据库，但我不能使用

```
Date.ParseExact("00000000","yyyymmdd",null); 
```

也试过了`CultureInfo.InvariantCulture`

获得以下异常：

> 日历 System.Globalization.GregorianCalendar 不支持字符串表示的 DateTime。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-22T08:59:38.550

不，因为 DateTime 有一个最小值，而且肯定不是 0。您可以使用可为空的 DateTime 并使您的字段在数据库中也可以为空。

要查看最小值，您可以出于学术目的尝试此操作：

```
// Define an uninitialized date.

DateTime date1 = new DateTime();
Console.Write(date1);
if (date1.Equals(DateTime.MinValue))
Console.WriteLine(DateTime.MinValue.ToString() + "  (Equals Date.MinValue)");
// The example displays the following output:
//    1/1/0001 12:00:00 AM  (Equals Date.MinValue) 
```

有关可空类型的更多信息：http: [//msdn.microsoft.com/en-us/library/1t3y8s4s (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/1t3y8s4s(v=vs.80).aspx)

# sbt - SBT 对 opennlp-tools 的依赖

> ID：15020279
> 
> 赞同：1
> 
> 时间：2013-02-22T08:58:25.947
> 
> 标签：sbt, opennlp

如果我有

```
libraryDependencies += "org.apache.opennlp" % "opennlp-tools" % "1.5.2-incubating" 
```

在`build.sbt`，我得到一个错误：

```
[warn]  module not found: jwnl#jwnl;1.3.3
[warn] ==== local: tried
[warn]   C:\Users\Alexey\.ivy2/local/jwnl/jwnl/1.3.3/ivys/ivy.xml
[warn] ==== public: tried
[warn]   http://repo1.maven.org/maven2/jwnl/jwnl/1.3.3/jwnl-1.3.3.pom
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  ::          UNRESOLVED DEPENDENCIES         ::
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  :: jwnl#jwnl;1.3.3: not found
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[error] {file:/E:/OpenCorporaSegmenter/}default-af76b3/*:update: sbt.ResolveExce
ption: unresolved dependency: jwnl#jwnl;1.3.3: not found
[error] Total time: 2 s, completed 22.02.2013 11:53:16 
```

原因显然是[https://issues.apache.org/jira/browse/OPENNLP-510](https://issues.apache.org/jira/browse/OPENNLP-510)，但将依赖替换为

```
libraryDependencies += "org.cleartk" % "cleartk-opennlp-tools" % "0.10.2" 
```

（不包括 JWNL），如那里的评论中所建议的，仍然会产生相同的错误。有没有办法避免这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-28T00:14:07.173

“要排除依赖项的某些传递依赖项，请使用 excludeAll 或 exclude 方法......” -有关详细信息，请参阅[http://www.scala-sbt.org/release/docs/Detailed-Topics/Library-Management.html](http://www.scala-sbt.org/release/docs/Detailed-Topics/Library-Management.html) .

# php - 计数器 PHP 教程，缺少部分？

> ID：15020281
> 
> 赞同：-2
> 
> 时间：2013-02-22T08:58:27.807
> 
> 标签：php, mysql

我想使用 mysql 和 php 为我的网站创建一个计数器。我按照本教程[http://www.squidoo.com/php-mysql-visitors-counter-tutorial](http://www.squidoo.com/php-mysql-visitors-counter-tutorial)进行操作，但由于某种原因它不起作用。我可以看不懂下面的代码：

```
echo "This webpage has got a total of ".getCounter('hits')." hits from which ".getCounter('unique')." unique."; 
```

命中？？独特 ？？他从哪里得到这些参数？他在任何地方都没有提到这一点。请帮助，我是新手

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T09:02:02.563

此函数定义中使用了“Hits”和“Unique”：

```
function getCounter($mode, $location = NULL) {

    if(is_null($location)) {
         $location = $_SERVER['PHP_SELF'];
    }

    if($mode == "unique") {
        $get_res = mysql_query("SELECT DISTINCT ip FROM counter WHERE location = '$location' ");
    }else{
        $get_res = mysql_query("SELECT ip FROM counter WHERE location = '$location' ");
    }

    $res = mysql_num_rows($get_res);

    return $res;

} 
```

被调用的查询取决于您作为参数传递的字符串。这很糟糕，但它就是这样写的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T09:01:04.670

> 1.  counter.php 该文件将包含计数器功能的脚本

再看一遍教程。您的设置中是否加载了 counter.php？

# javascript - Mootools 动态获取底部 dropdaownlist

> ID：15020282
> 
> 赞同：1
> 
> 时间：2013-02-22T08:58:29.817
> 
> 标签：javascript, mootools

我是 javascript 和 MooTools 的新手。我需要获取页面底部的下拉列表。顶部和底部的下拉列表，是设置每页的项目数。底部的下拉列表 id 是动态的，并且会根据手头的许多元素而变化。

我已经搜索了互联网，但没有找到它。所以，如果你们中的一个可以给我一个例子。

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T09:03:15.990

不完全确定您对“顶部”和“底部”的含义，但假设您指的是它们在 DOM 中的位置，您可以执行以下操作：

```
var dropdowns = $$('select');
var firstDropdown = dropdowns[0];
var lastDropdown = dropdowns.getLast(); 
```

这将选择`<select>`页面上的所有元素，而不考虑它们的标识符。

# c - 是否有充分的理由不使用具有可变参数长度的“定义”？

> ID：15020298
> 
> 赞同：0
> 
> 时间：2013-02-22T08:59:33.130
> 
> 标签：c, c-preprocessor, variadic-functions

最近我遇到了这段代码：

```
#define LOG(type, str)                      printf(str)
#define LOG1(type, str,arg1)                printf(str,arg1)
#define LOG2(type, str,arg1,arg2)           printf(str,arg1,arg2)
#define LOG3(type, str,arg1,arg2,arg3)      printf(str,arg1,arg2,arg3)
#define LOG4(type, str,arg1,arg2,arg3,arg4) printf(str,arg1,arg2,arg3,arg4) 
```

代码是最近写的。所以我猜它可以用C99编译。

我的问题是：为什么不使用具有可变参数长度的简单宏？我们只会将自己限制在`LOG`宏观上，仅此而已。更不用说我们不必添加`LOG5`,`LOG6`等。如果我们得到一个堆栈跟踪、内存不足、任何可以使这个解决方案有用的东西，会不会发生可怕的事情？

我是一个极简主义者，如果我们能得到更少的线条就更好了。但是我在这里错过了什么吗？这是故意的还是一种不好的编码习惯？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T09:07:45.890

对可变参数宏的预处理器支持在我看来是唯一的好理由。我们的项目已经有几十年了`LOG, LOG1 etc`，但确实升级到了`...`最近。

根据维基百科：

> 一些编译器在编译 C 和 C++ 代码时支持可变参数宏：GNU Compiler Collection 3.0、[2] Visual Studio 2005、[3] C++Builder 2006 和 Oracle Solaris Studio（以前称为 Sun Studio）Forte Developer 6 update 2 （C++ 5.3 版）。[5] GCC 在编译 Objective-C 时也支持这样的宏。

如果您了解您的平台，请使用花哨的可变参数宏。如果支持的人很少，那么事情可能会变得更有趣

# sql - rodbc 日期过滤器

> ID：15020299
> 
> 赞同：2
> 
> 时间：2013-02-22T08:59:35.267
> 
> 标签：sql, r, rodbc

我一直在尝试通过 RODBC 设置对 MS SQL 数据库的查询。不幸的是，我无法设置适当的日期过滤器。我尝试在引号和单引号、DATE 函数、括号中输入日期，但它不想工作。

这是代码：

```
 dbquery <- sqlQuery(dbhandle, 'SELECT ST03001, ST03003, ST03007, ST03015, ST03012, ST03020, ST03021, ST03022 
    FROM deh_10.dbo.ST031000 ST031000 
    WHERE (ST03015>'2013-01-01')') 
```

我通常会收到此错误消息：

```
 "dbquery <- sqlQuery(dbhandle, 'SELECT ST03001, ST03003, ST03007, ST03015, ST03012,
     ST03020, ST03021, ST03022 FROM deh_10.dbo.ST031000 ST031000 WHERE
     (ST03015>DATE('2013" 
```

在日期过滤器之后，我有几个其他过滤器由 OR 彼此分隔（从示例中排除）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T16:06:03.853

最好使用粘贴来构造 sql 查询，特别是在处理日期时。在这里我将日期转换为`numeric`，但它是可选的（它取决于数据库，我认为 MS SQL 会自动将字符转换为日期）。我使用 paste 和 sep ='\n' 创建查询：

例如 ：

```
query <- paste(
  'SELECT ST03001, ST03003, ST03007, ST03015, ST03012, ST03020, ST03021, ST03022 ',
  'FROM ST031000',
  paste("WHERE ST03015 >" , as.numeric(as.Date('2013-05-01')),sep=''),
  sep='\n') 
```

然后使用猫：

```
cat(query)
SELECT ST03001, ST03003, ST03007, ST03015, ST03012, ST03020, ST03021, ST03022 
FROM ST031000
WHERE ST03015 >15826 
```

您也可以这样做（无需转换为数字）

```
query <- paste(
+   'SELECT ST03001, ST03003, ST03007, ST03015, ST03012, ST03020, ST03021, ST03022 ',
+   'FROM ST031000',
+   paste("WHERE ST03015 >'" , as.Date('2013-05-01'),"'",sep=''),
+   sep='\n')

> cat(query)
SELECT ST03001, ST03003, ST03007, ST03015, ST03012, ST03020, ST03021, ST03022 
FROM ST031000
WHERE ST03015 >'2013-05-01' 
```

这里是一个使用`sqldf`包的例子。我创建了一些数据：

```
values <- as.data.frame(matrix(sample(1:100,8*6*3,rep=T),ncol=8))
colnames(values) <- c('ST03001', 'ST03003', 'ST03007', 'ST03015', 'ST03012', 'ST03020', 'ST03021', 'ST03022') 
values$ST03015 = seq(as.Date("2012/1/1"), as.Date("2013/06/1"), length.out= nrow(values)) 
```

然后：

```
sqldf(query <- paste(
  'SELECT ST03001, ST03003, ST03007, ST03015, ST03012, ST03020, ST03021, ST03022 ',
  'FROM ST031000',
  paste("WHERE ST03015 >" , as.numeric(as.Date('2013-05-01')),sep=''),
  sep='\n'))

     ST03001 ST03003 ST03007    ST03015 ST03012 ST03020 ST03021 ST03022
1      73      74      58 2013-05-01      82      85      88      58
2       8      63      71 2013-06-01      37      76      15      44 
```

# javascript - 当我在 JavaScript 中的 ul 中添加一些 li 时，如何阻止自动滚动？

> ID：15020303
> 
> 赞同：1
> 
> 时间：2013-02-22T08:59:41.550
> 
> 标签：javascript, jquery, html

所以，我有这段代码在 ul 中添加了一些 li ：

```
for (var i = 0; i < 10; i ++) {
   var li = document.createElement('li');
   li.setAttribute(...);
   ... 

   /* add the new li in front of the ul */
   $("#listview").prepend(li);
} 
```

当它被执行时，li 被正确地添加到了我的 ul 的开头，但是页面“自动滚动”拉伸到了 ul 的顶部。所以，我的问题是：我该如何做才能防止这种自动滚动并保持在我之前所在列表的相同位置？提前谢谢你！

# android - 从当前正在运行的服务中恢复 Activity 中的 ProgressBar

> ID：15020305
> 
> 赞同：1
> 
> 时间：2013-02-22T08:59:43.547
> 
> 标签：android, service, android-activity, android-progressbar, onresume

我创建了一个可以下载文件的 Android 应用程序。
我使用[Groundy 库](http://casidiablo.github.com/groundy/)来支持该服务。我由此创建了 NotiThread [（](http://www.mirwing.com/2012/01/android-progressbar-notification.html)但我对其进行了编辑以支持我的要求）。
这是我的活动代码...

```
public class PacksActivity extends Activity {

private Context context;
private RelativeLayout download;
private ProgressBar progressBar;
private NotiThread notification;
private String url;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.packs);

    context = this;
    url = getIntent().getStringExtra("URL");

    progressBar = (ProgressBar)findViewById(R.id.progress);
    progressBar.setIndeterminate(false);
    progressBar.setMax(100);
    download = (RelativeLayout) findViewById(R.id.label_circle);
    download.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub

            File dest = new File(context.getFilesDir(), new File(url).getName());
            if(!dest.exists()){
                progressBar.setVisibility(View.VISIBLE);
                notification = new NotiThread(context);
                notification.run();
                Bundle extras = new Bundler().add(DownloadTemplate.PARAM_URL, url).build();
                Groundy.create(context, DownloadTemplate.class)
                        .receiver(mReceiver)
                        .params(extras)
                        .queue();
            }
        }
    });
}

private ResultReceiver mReceiver = new ResultReceiver(new Handler()) {
    @Override
    protected void onReceiveResult(int resultCode, Bundle resultData) {
        super.onReceiveResult(resultCode, resultData);
        switch (resultCode) {
            case Groundy.STATUS_PROGRESS:
                int progress = resultData.getInt(Groundy.KEY_PROGRESS);
                progressBar.setProgress(progress);
                if((progress % 10) == 0)notification.progressUpdate(progress);
                break;
            case Groundy.STATUS_FINISHED:
                Toast.makeText(context, "Success Download file", Toast.LENGTH_LONG);
                progressBar.setVisibility(View.GONE);
                notification.completed();
                break;
            case Groundy.STATUS_ERROR:
                Toast.makeText(context, resultData.getString(Groundy.KEY_ERROR), Toast.LENGTH_LONG).show();
                progressBar.setVisibility(View.GONE);
                notification.completed();
                break;
        }
    }
};
} 
```

这是我的 NotiThread 课程

```
public class NotiThread extends Thread {

private NotificationManager mNoti = null;

private final Context mContext;
private final int mUnique;
private Notification noti;

public NotiThread(Context context) {
    super("NotiThread");
    mContext = context;
    mNoti = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);
    mUnique = 1;
}

@Override
public void run() {
    Process.setThreadPriority(Process.THREAD_PRIORITY_BACKGROUND);

    noti = new Notification(R.drawable.icon1024, "title", System.currentTimeMillis());
    noti.flags |= Notification.FLAG_ONGOING_EVENT;

    RemoteViews contentView = new RemoteViews(mContext.getPackageName(), R.layout.custom_notification);
    contentView.setTextViewText(R.id.noti_title, "title");
    contentView.setProgressBar(R.id.noti_progress, 100, 0, false);
    contentView.setTextViewText(R.id.noti_text, "0%");
    noti.contentView = contentView;

    noti.contentIntent = PendingIntent.getActivity(mContext, 0, new Intent(mContext, mContext.getClass()), PendingIntent.FLAG_ONE_SHOT);

    mNoti.notify(mUnique, noti);
}

public void progressUpdate(int percentageComplete) {
    noti.contentView.setProgressBar(R.id.noti_progress, 100, percentageComplete, false);
    noti.contentView.setTextViewText(R.id.noti_text, percentageComplete + "%");
    mNoti.notify(mUnique, noti);
}

public void completed()    {
    mNoti.cancel(mUnique);
}
} 
```

这是 GroundyTask 类

```
public class DownloadTemplate extends GroundyTask {

public static final String PARAM_URL = "com.app.service.PARAM_URL";

@Override
protected boolean doInBackground() {
    try {
        String url = getParameters().getString(PARAM_URL);
        File dest = new File(getContext().getFilesDir(), new File(url).getName());
        DownloadUtils.downloadFile(getContext(), url, dest, DownloadUtils.getDownloadListenerForTask(this));
        return true;
    } catch (Exception e) {
        return false;
    }
}
} 
```

我想问，当进入活动和通知时，如何恢复活动以从当前正在运行的服务更新 ProgressBar？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-18T17:46:17.430

您可以在返回活动时检查服务是否仍在运行。我如何做到这一点是我使用单例网络类。在这里，我定义了 Groundy 创建函数中使用的回调对象。这个单例还跟踪任务的状态（正在运行，或者在取消、完成或失败时未运行）。再次创建活动时，此单例类仍然存在，因此进度回调仍在被触发。您唯一需要确保的是将您的侦听器从新活动重新注册到现有单例。这是一个简单的例子..

单例类：

```
public static SingletonClass getInstance(Object o) {
    if (instance == null) {
        instance = new SingletonClass();
    }
    if (o instanceof OnProgressListener) {
        progressListener = (OnProgressListener) o;
     }
    ...
    return instance;
} 
```

回调对象：

```
 public Object callbackObject = new Object() {
       @OnProgress(YourGroundyTask.class)
       public void onProgress(@Param(Groundy.PROGRESS) int progress) {
        if (progressListener != null){
            progressListener.onDownloadProgress(progress);
        }
       }
       ... 
```

# delphi - 如何自动调整 DBGrid 列宽

> ID：15020306
> 
> 赞同：0
> 
> 时间：2013-02-22T08:59:45.370
> 
> 标签：delphi, c++builder, tdbgrid, c++builder-xe

我一直在尝试**[将此 Delphi 代码](http://edn.embarcadero.com/article/27548)**与 C++ Builder XE 一起使用。我手动将语言转换为 C++ Builder 语言。

此过程运行正常。当我尝试最大化保存 DBGrid 的表单时，此过程成功地根据网格宽度拆分列宽度。但是，如果我尝试使用表单右侧或左侧的鼠标控制来最小化表单宽度，则此过程不会将列宽调整为每列上值的长度或标签的长度。

有什么办法可以解决吗？或者有人有其他程序来解决这样的问题吗？

**编辑**：好的，这是代码。我已经手动将上面的代码转换成这个代码：

```
void __fastcall TfmMain::FixGridColumnsWidth(TDBGrid *DBGrid)
{
int       TotalColumnWidth, ColumnCount, GridClientWidth, Filler, i;

    ColumnCount = DBGrid->Columns->Count;

    if  (ColumnCount == 0)
        exit;

    // compute total width used by grid columns and vertical lines if any
    TotalColumnWidth = 0;

    for ( i = 0; i <=ColumnCount-1; i++)

        TotalColumnWidth = TotalColumnWidth + DBGrid->Columns->Items[i]->Width;
        if ( DBGrid->Options.Contains(dgColLines) )

        // include vertical lines in total (one per column)
            TotalColumnWidth = TotalColumnWidth + ColumnCount;

    // compute grid client width by excluding vertical scroll bar, grid indicator,
    // and grid border
    GridClientWidth = DBGrid->Width - GetSystemMetrics(SM_CXVSCROLL);

    if ( DBGrid->Options.Contains(dgIndicator) )  {
        GridClientWidth = GridClientWidth - IndicatorWidth;
        if ( DBGrid->Options.Contains(dgColLines) )
            GridClientWidth--;
    }

    if ( DBGrid->BorderStyle == bsSingle )  {
        if ( DBGrid->Ctl3D ) {                      // border is sunken (vertical border is 2 pixels wide)
            GridClientWidth = GridClientWidth - 4;
        }
        else {                              // border is one-dimensional (vertical border is one pixel wide)
            GridClientWidth = GridClientWidth - 2;
        }
    }

    // adjust column widths
    if ( TotalColumnWidth < GridClientWidth )  {
        Filler =  (GridClientWidth - TotalColumnWidth) / ColumnCount;
        for ( i = 0; i <= ColumnCount-1; i++ )
            DBGrid->Columns->Items[i]->Width = DBGrid->Columns->Items[i]->Width + Filler;
    }

    else
        if ( TotalColumnWidth > GridClientWidth ) {
            Filler = (TotalColumnWidth - GridClientWidth) / ColumnCount;
            if ( (TotalColumnWidth - GridClientWidth) % ColumnCount != 0 )
                Filler++;
            for ( i = 0; i <= ColumnCount-1; i++ )
                DBGrid->Columns->Items[i]->Width = DBGrid->Columns->Items[i]->Width - Filler;
        }

} 
```

提前致谢。

# php - 将动态 div 保存到 SESSION

> ID：15020308
> 
> 赞同：0
> 
> 时间：2013-02-22T08:59:58.443
> 
> 标签：php

大家好，我有以下 PHP 脚本：

```
if(isset($_POST['add_slider']))
    {
        echo '<div class="sliderz">';
        $images = mysql_query("SELECT * FROM store");               
        while($row = mysql_fetch_assoc($images)) 
            {
                echo '<ul class="connectedSortable">';
                echo '<li>';
                echo "<img class='ui-state-default' src=".$row['image'].">";
                echo '</li>';
                echo '</ul>';
            }
        echo '</div>';
    } 
```

html看起来像这样：

```
<form action="admin.php" method="POST">
                    <input type="submit" value="Add new slider!" name='add_slider'>
                </form> 
```

我怎样才能接受同样的事情，但将其保存到 $_SESSION :-？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T09:14:37.807

试试这个，

```
<?php
    if(isset($_POST['add_slider']))
        {
            $arr = array(); //the array will hold the html element 
            $arr[] = '<div class="sliderz">';
            $images = mysql_query("SELECT * FROM store");               
            while($row = mysql_fetch_assoc($images)) 
                {

                $arr[] = '<ul class="connectedSortable">';
            $arr[] = '<li>';
                    $arr[] = "<img class='ui-state-default' src=".$row['image'].">";
                    $arr[] = '</li>';
                    $arr[] = '</ul>';
                }
            $arr[] = '</div>';

            $_SESSION['your_session'] = implode("",$arr); // the array content will be gluedd together to form a your div with contents inside it
        }

    ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T09:24:05.113

```
if(isset($_POST['add_slider']))
{
    $output = '<div class="sliderz">';
    $images = mysql_query("SELECT * FROM store");               
    while($row = mysql_fetch_assoc($images)) 
        {
            $output .= '<ul class="connectedSortable">';
            $output .= '<li>';
            $output .= "<img class='ui-state-default' src=".$row['image'].">";
            $output .= '</li>';
            $output .= '</ul>';
        }
    $output .= '</div>';

   $_SESSION['yourKey'] = $output;
} 
```

这会将`div`作为字符串存储在`$_SESSION`数组中，并`yourKey`作为键

当你需要的时候

```
echo $_SEESION['yourKey']; 
```

也不要忘记开始你的会话，`session_start();`否则它会出错。

# scala - 错误：对象工具不是包 scala var 值的成员：scala.tools.nsc.interpreter.IMain

> ID：15020309
> 
> 赞同：3
> 
> 时间：2013-02-22T08:59:59.757
> 
> 标签：scala, intellij-idea, scala-2.10

我正在使用

*   IntelliJ IDEA 126.330
*   Scala 插件 0.7.142
*   JVM 1.6
*   斯卡拉 2.10
*   在 Windows 7 x64 下

决定尝试 Scala 并编写以下应用程序

```
object main {
  def main(args: Array[String]) {
    println("Hello, world!")
  }
} 
```

然后我创建了 Scala 控制台运行配置。当我尝试运行它时，我在控制台中得到以下输出

```
"C:\Program Files (x86)\Java\jdk1.6.0_32\bin\java" -agentlib:jdwp=transport=dt_socket,address=127.0.0.1:16352,suspend=y,server=n -Djline.terminal=NONE -Dfile.encoding=UTF-8 -classpath "C:\work\scala-2.10.0-RC2\lib\scala-compiler.jar;C:\work\scala-2.10.0-RC2\lib\scala-library.jar;C:\work\scala-2.10.0-RC2\lib\scala-reflect.jar;C:\Users\root\.IntelliJIdea12\config\plugins\Scala\lib\scala-plugin-runners.jar;C:\Program Files (x86)\JetBrains\IntelliJ IDEA 126.330\lib\idea_rt.jar" org.jetbrains.plugins.scala.compiler.rt.ConsoleRunner -classpath "C:/Users/root/IdeaProjects/testScala/out/production/testScala;C:/work/scala-2.10.0-RC2/lib/scala-actors.jar;C:/Program Files (x86)/Java/jdk1.6.0_32/jre/lib/jce.jar;C:/Program Files (x86)/Java/jdk1.6.0_32/jre/lib/ext/localedata.jar;C:/Program Files (x86)/Java/jdk1.6.0_32/jre/lib/resources.jar;C:/Program Files (x86)/Java/jdk1.6.0_32/jre/lib/jsse.jar;C:/Program Files (x86)/Java/jdk1.6.0_32/jre/lib/ext/sunjce_provider.jar;C:/Program Files (x86)/Java/jdk1.6.0_32/jre/lib/rt.jar;C:/Program Files (x86)/Java/jdk1.6.0_32/jre/lib/charsets.jar;C:/Program Files (x86)/Java/jdk1.6.0_32/jre/lib/deploy.jar;C:/Program Files (x86)/Java/jdk1.6.0_32/jre/lib/ext/dnsns.jar;C:/Program Files (x86)/Java/jdk1.6.0_32/jre/lib/management-agent.jar;C:/Program Files (x86)/Java/jdk1.6.0_32/jre/lib/ext/sunmscapi.jar;C:/Program Files (x86)/Java/jdk1.6.0_32/jre/lib/javaws.jar;C:/work/scala-2.10.0-RC2/lib/scala-library.jar;C:/work/scala-2.10.0-RC2/lib/scala-swing.jar;C:/Program Files (x86)/Java/jdk1.6.0_32/jre/lib/plugin.jar;C:/Program Files (x86)/Java/jdk1.6.0_32/jre/lib/ext/sunpkcs11.jar;" -usejavacp2 -Y2log-classpath
Connected to the target VM, address: '127.0.0.1:16352', transport: 'socket'
Welcome to Scala version 2.10.0-RC2 (Java HotSpot(TM) Client VM, Java 1.6.0_32).
Type in expressions to have them evaluated.
Type :help for more information.

scala> <console>:5: error: object tools is not a member of package scala
  var value: scala.tools.nsc.interpreter.IMain = _
                   ^
<console>:6: error: object tools is not a member of package scala
  def set(x: Any) = value = x.asInstanceOf[scala.tools.nsc.interpreter.IMain]
                                                 ^ 
```

谷歌搜索后，我发现建议将`-usejavacp`参数传递给应用程序。它有助于摆脱错误，但应用程序没有被执行。我在控制台中看到的只是

```
"C:\Program Files (x86)\Java\jdk1.6.0_32\bin\java" -agentlib:jdwp=transport=dt_socket,address=127.0.0.1:16383,suspend=y,server=n -Djline.terminal=NONE -Dfile.encoding=UTF-8 -classpath "C:\work\scala-2.10.0-RC2\lib\scala-compiler.jar;C:\work\scala-2.10.0-RC2\lib\scala-library.jar;C:\work\scala-2.10.0-RC2\lib\scala-reflect.jar;C:\Users\root\.IntelliJIdea12\config\plugins\Scala\lib\scala-plugin-runners.jar;C:\Program Files (x86)\JetBrains\IntelliJ IDEA 126.330\lib\idea_rt.jar" org.jetbrains.plugins.scala.compiler.rt.ConsoleRunner -classpath "C:/Users/root/IdeaProjects/testScala/out/production/testScala;C:/work/scala-2.10.0-RC2/lib/scala-actors.jar;C:/Program Files (x86)/Java/jdk1.6.0_32/jre/lib/jce.jar;C:/Program Files (x86)/Java/jdk1.6.0_32/jre/lib/ext/localedata.jar;C:/Program Files (x86)/Java/jdk1.6.0_32/jre/lib/resources.jar;C:/Program Files (x86)/Java/jdk1.6.0_32/jre/lib/jsse.jar;C:/Program Files (x86)/Java/jdk1.6.0_32/jre/lib/ext/sunjce_provider.jar;C:/Program Files (x86)/Java/jdk1.6.0_32/jre/lib/rt.jar;C:/Program Files (x86)/Java/jdk1.6.0_32/jre/lib/charsets.jar;C:/Program Files (x86)/Java/jdk1.6.0_32/jre/lib/deploy.jar;C:/Program Files (x86)/Java/jdk1.6.0_32/jre/lib/ext/dnsns.jar;C:/Program Files (x86)/Java/jdk1.6.0_32/jre/lib/management-agent.jar;C:/Program Files (x86)/Java/jdk1.6.0_32/jre/lib/ext/sunmscapi.jar;C:/Program Files (x86)/Java/jdk1.6.0_32/jre/lib/javaws.jar;C:/work/scala-2.10.0-RC2/lib/scala-library.jar;C:/work/scala-2.10.0-RC2/lib/scala-swing.jar;C:/Program Files (x86)/Java/jdk1.6.0_32/jre/lib/plugin.jar;C:/Program Files (x86)/Java/jdk1.6.0_32/jre/lib/ext/sunpkcs11.jar;" -usejavacp -Y2log-classpath
Connected to the target VM, address: '127.0.0.1:16383', transport: 'socket'
Welcome to Scala version 2.10.0-RC2 (Java HotSpot(TM) Client VM, Java 1.6.0_32).
Type in expressions to have them evaluated.
Type :help for more information.

scala> 
```

我还尝试在 IDE 选项中禁用 Scala 编译服务器。也没有帮助。

我如何解决它 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:51:49.633

您应该使用**应用程序**运行配置类型。Scala 控制台是运行交互式控制台，而不是应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T12:27:18.107

这应该可以解决您的问题，请参阅以下链接 [http://eliasbland.wordpress.com/2010/10/20/error-value-tools-is-not-a-member-of-package-scala-when-using-the -scala-console-in-intellij-idea/](http://eliasbland.wordpress.com/2010/10/20/error-value-tools-is-not-a-member-of-package-scala-when-using-the-scala-console-in-intellij-idea/)

# javascript - 替换括号以跨越 javascript

> ID：15020311
> 
> 赞同：3
> 
> 时间：2013-02-22T09:00:05.480
> 
> 标签：javascript, jquery, regex, colors, html

我想稍微操作一下 DOM，需要一些帮助。

那是我的 HTML 标记：

```
<span class=“content“&gt; This is my content: {#eeeeee}grey text{/#eeeeee} {#f00000}red text{/#f00000}</span> 
```

应该是这样的：

```
<span class="content">This is my content: <span style="color:#eeeeee;">grey text</span><span style="color:#f00000;">red text</span></span> 
```

脚本应该用 span 标签替换括号以更改字体颜色。颜色应与括号中的颜色相同。

我的做法：

```
function regcolor(element) {
    var text = element.innerText;
    var matches = text.match(/\{(#[0-9A-Fa-f]{6})\}([\s\S]*)\{\/\1\}/gim);
    if (matches != null) {
        var arr = $(matches).map(function (i, val) {
            var input = [];
            var color = val.slice(1, 8);
            var textf = val.slice(9, val.length - 10);
            var html = "<span style=\"color: " + color + ";\">" + textf + "</span>";
            input.push(html);
            return input;
        });

        var input = $.makeArray(arr);

        $(element).html(input.join(''));
    }; 
```

但它工作得不是很好，我对代码感觉不太好，它看起来很乱。并且脚本丢失了不在括号中的内容（“这是我的内容：”）。

任何人的想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T09:19:32.160

我只使用了一点 jQuery，但不用它也很容易做到。这只是一个正则表达式字符串替换。

```
$('.content').each(function() {
  var re = /\{(#[a-z0-9]{3,6})\}(.*?)\{\/\1\}/g;
  //          ^                 ^
  //          $1                $2

  this.innerHTML = this.innerHTML.replace(re, function($0, $1, $2) {
    return '<span style="color: ' + $1 + '">' + $2 + '</span>';
  });
}); 
```

我正在使用反向引用来正确匹配左大括号和右大括号。

**更新**

可以更短：

```
$('.content').each(function() {
  var re = /\{(#[a-z0-9]{3,6})\}(.*?)\{\/\1\}/g,
  repl = '<span style="color: $1">$2</span>';

  this.innerHTML = this.innerHTML.replace(re, repl);
}); 
```

**看妈妈，没有 jQuery**

```
var nodes = document.getElementsByClassName('content');

for (var i = 0, n = nodes.length; i < n; ++i) {
  var re = /\{(#[a-z0-9]{3,6})\}(.*?)\{\/\1\}/g,
  repl = '<span style="color: $1">$2</span>';

  nodes[i].innerHTML = nodes[i].innerHTML.replace(re, repl);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T09:18:49.807

使用正则表达式直接替换匹配项：

```
function regcolor2(element) {
    var text = element.html();
    var i = 0;
    var places = text.replace(/\{(#[0-9A-Fa-f]{6})\}([\s\S]*)\{\/\1\}/gim, function( match ) {
        var color = match.slice(1, 8);
        var textf = match.slice(9, match.length - 10);
        var html = "<span style=\"color: " + color + ";\">" + textf + "</span>";
        return html;
    });

    $(element).html(places);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T12:06:53.997

使用 jquery 和这种方法或语法可以更短

```
$(function() {

$('.content').html($('.content').text().replace( new RegExp('{(.*?)}(.*?){\/.*?}','g'), '<span style="color:$1">$2</span>'));

}); 
```

# javascript - 页面上的多个表单，使用“this”并尝试将“this”属性传递给另一个函数

> ID：15020314
> 
> 赞同：0
> 
> 时间：2013-02-22T09:00:12.773
> 
> 标签：javascript, forms, this

遇到一个可能有点难以解释的问题，所以我会尽力而为。我一直在尝试创建一个简单的 JavaScript 待办事项应用程序。我在页面上有多个表格，它们都对应一个单独的日期（1 月 1 日、1 月 2 日等）。当然，每个表单都有输入，在这种情况下，每个表单都有 4 个子节点（内容、位置、时间和提交按钮）。

**这是HTML：**

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta description="Gallery, Javascript">
        <link rel="stylesheet" href="todo.css" media="screen" />
        <title>Creating a simple to-do app</title>
    </head>
    <body>
        <div id="outerWrapper">
        <div id="wrapper">
            <header id="header">
                <h1>A simple to-do app</h1>
            </header>
            <section id="todo">
                <div class="oneDateSection">
                    <div class="orangeBox">
                        <h1>January 1st, 2013</h1>
                    </div>
                    <div class="oneDateSectionList">
                        <form method="POST" class="formList" action="">
                            <div><label for="what">What:</label><input type="text" name="what" class="what" id="what" /></div>
                            <div><label for="where">Where:</label><input type="text" name="where" class="where" id="where" /></div>
                            <div><label for="what">When:</label><input type="text" name="when" class="when" id="when"/></div>
                            <div><input type="submit" value="Add!" name="submit" class="submit" /></div>
                        </form>
                    </div>
                </div>
                <div class="oneDateSection">
                    <div class="orangeBox">
                        <h1>January 2nd, 2013</h1>
                    </div>
                    <div class="oneDateSectionList">
                        <form method="POST" class="formList" action="">
                            <div><label for="what">What:</label><input type="text" name="what" class="what" id="what" /></div>
                            <div><label for="where">Where:</label><input type="text" name="where" class="where" id="where" /></div>
                            <div><label for="what">When:</label><input type="text" name="when" class="when" id="when"/></div>
                            <div><input type="submit" value="Add!" name="submit" class="submit" /></div>
                        </form>
                    </div>
                </div>
                <div class="oneDateSection">
                    <div class="orangeBox">
                        <h1>January 3rd, 2013</h1>
                    </div>
                    <div class="oneDateSectionList">
                        <form method="POST" class="formList" action="">
                            <div><label for="what">What:</label><input type="text" name="what" class="what" id="what" /></div>
                            <div><label for="where">Where:</label><input type="text" name="where" class="where" id="where" /></div>
                            <div><label for="what">When:</label><input type="text" name="when" class="when" id="when"/></div>
                            <div><input type="submit" value="Add!" name="submit" class="submit" /></div>
                        </form>
                    </div>
                </div>
                <div class="oneDateSection">
                    <div class="orangeBox">
                        <h1>January 4th, 2013</h1>
                    </div>
                    <div class="oneDateSectionList">
                        <form method="POST" class="formList" action="">
                            <div><label for="what">What:</label><input type="text" name="what" class="what" id="what" /></div>
                            <div><label for="where">Where:</label><input type="text" name="where" class="where" id="where" /></div>
                            <div><label for="what">When:</label><input type="text" name="when" class="when" id="when"/></div>
                            <div><input type="submit" value="Add!" name="submit" class="submit" /></div>
                        </form>
                    </div>
                </div>
                <div class="oneDateSection">
                    <div class="orangeBox">
                        <h1>January 5th, 2013</h1>
                    </div>
                    <div class="oneDateSectionList">
                        <form method="POST" class="formList" action="">
                            <div><label for="what">What:</label><input type="text" name="what" class="what" id="what" /></div>
                            <div><label for="where">Where:</label><input type="text" name="where" class="where" id="where" /></div>
                            <div><label for="what">When:</label><input type="text" name="when" class="when" id="when"/></div>
                            <div><input type="submit" value="Add!" name="submit" class="submit" /></div>
                        </form>
                    </div>
                </div>
                <div class="oneDateSection">
                    <div class="orangeBox">
                        <h1>January 6th, 2013</h1>
                    </div>
                    <div class="oneDateSectionList">
                        <form method="POST" class="formList" action="">
                            <div><label for="what">What:</label><input type="text" name="what" class="what" id="what" /></div>
                            <div><label for="where">Where:</label><input type="text" name="where" class="where" id="where" /></div>
                            <div><label for="what">When:</label><input type="text" name="when" class="when" id="when"/></div>
                            <div><input type="submit" value="Add!" name="submit" class="submit" /></div>
                        </form>
                    </div>
                </div>
                <div class="oneDateSection">
                    <div class="orangeBox">
                        <h1>January 7th, 2013</h1>
                    </div>
                    <div class="oneDateSectionList">
                        <form method="POST" class="formList" action="">
                            <div><label for="what">What:</label><input type="text" name="what" class="what" id="what" /></div>
                            <div><label for="where">Where:</label><input type="text" name="where" class="where" id="where" /></div>
                            <div><label for="what">When:</label><input type="text" name="when" class="when" id="when"/></div>
                            <div><input type="submit" value="Add!" name="submit" class="submit" /></div>
                        </form>
                    </div>
                </div>
            </section>
        </div>
    </div>
    <script src="todo2.js"></script>
    </body>
</html> 
```

这是JavaScript：

```
var utilities = {
    $: function(id) {
            return document.getElementById(id);
    },
    addEvent: function(obj, type, fn) {
        if (obj && obj.addEventListener) {
            obj.addEventListener(type, fn, false);
        } else if (obj && obj.attachEvent) {
            obj.attachEvent("on" + type, fn);
        }
    }
}

function removeErrorMessage(id) {
    'use strict';
    var span = utilities.$(id + 'Error');
    if(span) {
        span.parentNode.removeChild(span);
    }
}

function addErrorMessage(id, msg) {
    'use strict';
    var elem = utilities.$(ID);
    var newID = id + "Error";
    var span = utilities.$(newID);

    if(span) {
        span.firstChild.value = msg;
    } else {
        span = document.createElement("span");
        span.setAttribute("class", "error");
        span.setAttribute("id", newID);
        span.appendChild(document.createTextNode(msg));
        elem.parentNode.appendChild(span);
    }
}

function storeInformation(e) {
    'use strict';
    if (e == "undefined") {
        e = window.event;
    }

    //Reference what, where and when input elements in form that calls this function
    var whatElements = this.getElementsByClassName("what");
    var whereElements = this.getElementsByClassName("where");
    var whenElements = this.getElementsByClassName("when");

    //Create object to store information
    var information = {
        what: whatElements[0].value,
        where: whereElements[0].value,
        when: whenElements[0].value,
        postedDate: new Date()
    }
    //Create HTML that will display information from form
    var output =    "What: " + information.what + "<br />" + 
                    "Where: " + information.where + "<br />" + 
                    "When: " + information.when + "<br />" +
                    "Posted: " + information.postedDate;

    //So you have TWO options. Either you have filled it out, or you haven't.

    //First case, and main IF: Some part of the form hasn't been filled out
    if ( (information.what == "") || (information.where == "") || (information.when == "") ) {

        //If the 'what' form field is empty
        if (information.what == "") {
            addErrorMessage(this.what, "Please enter what!");
        } else {
            removeErrorMessage(this.getElementById("what"));
        }

        //If the 'where' form field is empty
        if(information.where == "") {
            addErrorMessage(this.where, "Please enter where!");
        } else {
            removeErrorMessage(this.getElementById("where"));
        }

        //If the 'when' form field is empty
        if(information.when == "") {
            addErrorMessage(this.when, "Please enter when!");
        } else {
            removeErrorMessage(this.getElementById("when"));
        }

    //OR, all the form fields HAVE BEEN FILLED OUT.
    } else {
        if (paragraph) {
            paragraph.innerHTML = output;
        } else {    
            var newDiv = document.createElement("div");
            newDiv.setAttribute("class", "outputDiv");
            var paragraph = document.createElement("p");
            paragraph.setAttribute("class", "outputParagraph");
            newDiv.appendChild(paragraph);
            paragraph.innerHTML = output;
            //Append everything
            whatElements[0].parentNode.parentNode.appendChild(newDiv);
        }
    }

    //Prevent form from submitting
    if (e.preventDefault) {
        e.preventDefault();
    } else {
        e.returnValue = false;
    }
    return false;
}

window.onload = function() {
    'use strict';
    var allForms = document.getElementsByClassName("formList");
    for (var i = 0, count = allForms.length; i < count; i++) {
        utilities.addEvent(allForms[i], "submit", storeInformation);
    }
} 
```

现在，我确定可能存在布局问题，并且这里的 JS 不正确（如果您能指出这一点，那将是一个奖励）。但是，我的问题是**this**关键字。在 JS 中，我使用 this.what、this.where 和 this.when 来引用表单的输入 ID。我使用“this”是因为页面上有多个表单，我提供了一个事件侦听器，因此，在实际使用中，无论最终用户使用什么表单，它都会存储正确的信息。

问题出在我的“addErrorMessage”函数中，据说“elem”为空。在使用 Chrome 的调试器逐步完成该过程后，作为参数传递给 addErrorMessage 的 ID 仍然引用表单，但由于某种原因没有存储在 elem 中。

例如，我在想“this.what”不能转移到另一个函数？即，引用其自身属性的表单不能在另一个函数中使用？我不确定问题是什么。Chrome 会正确告诉我“this.what”引用的值，并传递给“addErrorMessage”，但不会尝试将此信息存储在“elem”中。

任何人都可以帮忙吗？我现在不是一个 JS 人，所以请对我放轻松。为长长的问题道歉！

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T09:12:02.553

```
var elem = utilities.$(ID); 
```

应该

```
var elem = utilities.$(id); 
```

# c# - 需要存储过程的返回值

> ID：15020317
> 
> 赞同：0
> 
> 时间：2013-02-22T09:00:21.330
> 
> 标签：c#, web-services, ado.net

我正在尝试使用在 Web 服务中调用的存储过程来更新 SQL Server 表。在这里，我需要存储过程的返回值，以便我可以向用户发送有关更新确认的 true 或 false。

我使用 C# 作为语言和 ADO.Net 体系结构来连接和操作 SQL Server 表。

我也在使用`SQLDataConnection`（`System.Data.SqlClient`）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T09:05:10.940

您可以将存储过程创建为：

```
CREATE PROC ReturningProc
AS
BEGIN
IF (@SomeCondition)
      SELECT 1

SELECT 0
END 
```

您可以使用 sql 命令对象将其调用为：

```
object retval = sqlCommand.ExecuteScalar(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T09:07:32.997

您需要使用 SqlDataReader 对象来读取结果。简而言之，像这样：

```
var command = new SqlCommand(commandText, sqlConnection);
command.CommandType = CommandType.StoredProcedure;
using(var reader = command.ExecuteReader())
{
while(reader.Read())
{
var result = reader[0];
//Respond to result.
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T09:25:01.740

创建类似这样的过程：

```
set ANSI_NULLS ON
set QUOTED_IDENTIFIER ON
GO

  CREATE PROCEDURE [dbo].[Validate]
  @b BIT OUT

 AS
    if(some condition)
       SET @b = 1
    else
       SET @b=0
 GO 
```

像这样在c#中检索值

```
SqlParameter retval = sqlcomm.Parameters.Add("@b", SqlDbType.Bit);
retval.Direction = ParameterDirection.ReturnValue;
sqlcomm.ExecuteNonQuery();
string retunvalue =  Convert.ToBoolean(sqlcomm.Parameters["@b"].Value); 
```

并且您在调用存储过程之前已经设置了 @b 的值，否则 SP 将出现异常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T09:19:34.977

我个人会推荐实体框架 (EF) 路由，因为它会为您完成所有编码。您所要做的就是将其指向您的数据库并选择必要的表。它允许您使用在内部转换为 SQL 查询的 Linq。

如果您对此不熟悉，我会推荐此[链接](http://msdn.microsoft.com/en-US/data/ee712907)中突出显示的数据库优先方法。

如果您坚持使用存储过程，您仍然可以使用 EF 与您的存储过程进行交互，如此[链接](http://msdn.microsoft.com/en-us/data/gg699321.aspx)和此[链接](http://weblogs.asp.net/dotnetstories/archive/2011/03/01/using-stored-procedures-with-entity-framework-in-an-asp-net-application.aspx)中所述。

如果您根本不想使用 EF 而更喜欢自己编写数据库处理逻辑，您可以参考此[链接](http://www.csharp-station.com/Tutorials/AdoDotNet/Lesson07.aspx)

希望这能给你一些清晰和开始的东西。

# ajax - MVC ajax 测试表单提交

> ID：15020318
> 
> 赞同：0
> 
> 时间：2013-02-22T09:00:24.867
> 
> 标签：ajax, asp.net-mvc, asp.net-mvc-3, extjs

我正在尝试使用 ajax 提交表单，并想检查是否发送了正确的值。我该如何使用以下内容。目前，它正在将其发送到 MVC 控制器，但我不想这样做。有没有办法只发送到同一个视图页面并显示所有值？？？

```
 $(document).ready(function () {
    $("#btnSubmit").click(sendValues);
});

function sendValues() {
    var a = store.data.items;
    var array = new Array();
    for (var i = 0; i < store.data.items.length; i++) {
        array[i] = store.data.items[i].data;
    }
    for (var i = 0; i < array.length; i++) {
        if (array[i].value == "Using") {
            array[i].value = true;
        }
        else {
            array[i].value = false;
        }
    }
    var ClintJSON =
    {
        "Exempt": Ext.getCmp("mmrComboBox").isIndexSelected(2),
        "MM1": Ext.getCmp("mmrComboBox").isIndexSelected(3),
        "MM2": Ext.getCmp("mmrComboBox").isIndexSelected(4),
        "MM3": Ext.getCmp("mmrComboBox").isIndexSelected(5),
        "B1": Ext.getCmp("BComboBox").isIndexSelected(2),
        "B2": Ext.getCmp("BComboBox").isIndexSelected(3),
        "B3": Ext.getCmp("BComboBox").isIndexSelected(4)                    

    };

    $.ajax({
        jsonp: null,
        jsonpCallback: null,
        type: 'POST',
        url: '@Url.Content("~/Site/Test")',
        data: "{clinsite: " + Ext.util.JSON.encode(ClintJSON) + ", List: " +      `    
         Ext.util.JSON.encode(array) + "}",
        dataType: 'json'
        , contentType: 'application/json; charset=utf-8'
        , success: function (data) {
            if (data.success) {
                showMessage('Site requirements have been updated successfully');
                store.load({ params: { start: 0, limit: 52} });
            } else {
                showMessage('Site requirements have NOT been updated!!! ');
                store.load({ params: { start: 0, limit: 50} });
            }
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T12:32:58.217

在这种情况下，我无法推荐一个工具，Fiddler2。

你可以[在这里下载](http://www.fiddler2.com/fiddler2/)

它使您能够准确检查传入和传出服务器的内容，并且可以查看各种格式的数据，例如 json、Web 表单数据或纯旧文本。

您还可以使用 Composer 来模拟 http 请求，这有其明显的好处。

作为一名专业的 Web 应用程序开发人员，我每天整天都在使用这个工具，就像我说的我不能推荐它！

干杯

巴兹

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T09:58:01.510

[您可以使用firebug](http://getfirebug.com/)控制台或 chrome 工具检查 firefox 中的值，只需按下`f12`并在您的前面打开一个窗口

此外，您可以将其登录`ClientJaon`到控制台

```
console.log(ClintJSON ); 
```

# jsf - JSF SelectItems 和转义 (xss)

> ID：15020320
> 
> 赞同：10
> 
> 时间：2013-02-22T09:00:35.497
> 
> 标签：jsf, xss, mojarra

在我的示例中有一个带有 af:selectItems-attribute 的 selectOneMenu。选择项是从我的 bean 中解析的，如下所示：

```
<h:selectOneMenu value="#{bean.value}">
    <f:selectItems value="#{bean.selectItems}" var="obj" itemValue="#{obj}" itemLabel="#{obj.name}"/>
</h:selectOneMenu> 
```

我的 bean 中的 getSelectItems() 方法如下所示：

```
 public List<MyObject> getSelectItems() {
        List<MyObject> list = new LinkedList<MyObject>();

        MyObject obj = new MyObject("Peter");
        list.add(obj);

        return list;
    } 
```

显示的对象是具有“名称”属性的简单对象。

到目前为止没有什么特别的。但是现在我将方法更改为：

```
 public List<MyObject> getSelectItems() {
        List<MyObject> list = new LinkedList<MyObject>();

        MyObject obj = new MyObject("<script>alert('xss is bad');</script>");
        list.add(obj);

        return list;
    } 
```

javascript 不会被 MenuRenderer-Class 转义，我的页面向我显示了警报消息。

SelectItem的转义属性的默认值为“false”有什么原因吗？我该如何解决这个问题？（我使用 Mojarra 2.1.7）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-22T11:55:17.387

默认值确实不应该是`false`. 我已将其报告为[issue 2747](http://java.net/jira/browse/JAVASERVERFACES-2747)。

同时，无论如何添加`itemLabelEscaped="true"`以逃避它。

```
<f:selectItems ... itemLabelEscaped="true" /> 
```

请注意，这仅在您使用时才需要`GenericObjectSelectItems`，即当您提供`E[]`/ `List<E>`/`Map<K, V>`而不是`List<SelectItem>`/时`SelectItem[]`。另请注意，只有在涉及用户控制的输入时，转义才是绝对强制性的（幸运的是，在下拉值中很少出现这种情况）。

# android - 如何在日历 Android 中创建事件

> ID：15020321
> 
> 赞同：0
> 
> 时间：2013-02-22T09:00:40.440
> 
> 标签：android, events, android-calendar

[我正在尝试按照给定的教程http://w2davids.wordpress.com/android-simple-calendar/?blogsub=confirming#subscribe-blog](http://w2davids.wordpress.com/android-simple-calendar/?blogsub=confirming#subscribe-blog)创建日历， 但我想对此代码进行一些修改。我的确切需要是，我有一个字符串数组，它包含一些日期。我想将这些日期标记到我的日历中，当我单击特定日期时，它将被标记，当我再次单击时，它未标记，我也想获得标记的日期。这怎么可能。我是android开发的新手...这是我在堆栈溢出中的第一个问题..请鼓励我...请给我一个解决方案..

# php - 数据库值在 for 循环中重复

> ID：15020322
> 
> 赞同：1
> 
> 时间：2013-02-22T09:00:41.983
> 
> 标签：php, mysql

我根据数组条件从数据库中选择作者姓名。但是当我返回代码时，我看到我的情况重复了两次。

我的代码在这里

```
$alpha=array('A','B','C','D','E','F');
    $countarray=sizeof($alpha);
    $alert.=$countarray;
    for ($a=0;$a<=$countarray;$a++)
    {
        $selectlist="select * from quotationauthor where Author_name Like'$alpha[$a]%'";
        $result=mysqli_query($con,$selectlist)
                or die(mysqli_error($con));
        $countauthor=countlist($result);
        if($countauthor < 1)
        {

        }
        else
        {
            $alert.="<h1>$alpha[$a]$countauthor</h1><br/>";
            while($row=mysqli_fetch_array($result))
            {
                $alert.=$row[Author_name]."<br/>";
            }
        }
    }
    return $alert; 
```

假设我在第一个条件下得到 A，而不是在我的数据库中搜索从 A 开始的作者名。我得到了正确的输出，但我的问题是数据库值被写入了两次

```
6
A

Albert Einstein
Abraham Lincoln
Abdul Kalam
Adolf Hitler

Albert Einstein
Abraham Lincoln
Abdul Kalam
Adolf Hitler 
```

如您所见，数据库值被写入两次。我检查了我的数据库，发现只有 4 行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T09:03:47.040

问题就在这里，在你的`for`循环中：

```
for ($a = 0; $a <= $countarray; $a++) 
```

循环条件应该是：

```
$a < $countarray 
```

发生的情况是，在最后一次迭代中，的值`$alpha[$a]`是`null`（嗯，隐含地）；当转换为字符串时，查询变为`name LIKE '%'`始终为真。

如果您的数据库中有以其他字母开头的行，或者甚至那些不在 A - F 集合中的行，那将更加明显

# c++ - 在预处理时间内将 sizeof() 值转换为字符串

> ID：15020324
> 
> 赞同：0
> 
> 时间：2013-02-22T09:01:01.207
> 
> 标签：c++, c, string, append, sizeof

我必须将 C 代码与一些内联汇编结合起来。

我已经有了将枚举值和宏转换为字符串的简单机制：

```
#define STR(x) #x
#define DEF2STR(x) STR(x)

"string1 " DEF2STR(MACRO_VALUE_2) " string2" 
```

预处理后的输出字符串为：“string1 2 string2”

问题是，如何将 sizeof(type) 值附加到字符串中？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T09:04:29.630

你不能 -`sizeof(type)`将在宏替换发生后进行评估......稍后在编译阶段。

你为什么要这么做？也许还有另一种方法可以完成您真正想做的事情....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T09:06:01.583

您可以使用泛型编程来构建数组，方法是递归地继承具有 int（或更好的 size_t）模板参数的模板结构，将其除以 10，并将正确的字符添加到构建到自身上的数组中。

不过不会很漂亮。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T10:17:33.647

该解决方案应该是可移植的：

```
#include <stdio.h>
#include <limits.h>

#define STR1 "string1 "
#define STR2 " string"

#if (ULONG_MAX == 0xFFFFFFFFu)
  #define LONGSIZE "4"
#elif (ULONG_MAX == 0xFFFFFFFFFFFFFFFFu)
  #define LONGSIZE "8"
#endif

#define STR STR1 LONGSIZE STR2

int main()
{
  puts (STR);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-22T10:55:54.747

有趣的问题，所以我把这个编译时间 int 写成字符串“function”。请注意，您不能对 macors 执行此操作。我已经用 constexpr（C++11，用 gcc 4.7 测试）和模板完成了它。

```
typedef unsigned int uint;

// number of decimal digits in a number
constexpr int length(uint num) {
    return num ? (length(num / 10) + 1) : 0;
}

uint constexpr decShift(uint num, int n) {
    return n <= 0 ? num : decShift(num/10, n-1);
}

// return '\0' or the nth decimal digit of num
char constexpr intChar(uint num, int index) {
    return index < 0 ? 0 : ( (decShift(num, index) % 10) + '0' );
}

// templated short array of char containing the digits
template<uint num> struct intToStr {
    static constexpr uint n = length(num);
    static constexpr char value[16] = {
        intChar(num, n - 1),
        intChar(num, n - 2),
        intChar(num, n - 3),
        intChar(num, n - 4),
        intChar(num, n - 5),
        intChar(num, n - 6),
        intChar(num, n - 7),
        intChar(num, n - 8),
        intChar(num, n - 9),
        intChar(num, n - 10),
        intChar(num, n - 11),
        intChar(num, n - 12),
        intChar(num, n - 13),
        intChar(num, n - 14),
        intChar(num, n - 15),
        0
    };
};
template<uint num> constexpr char intToStr<num>::value[16];

// test with sizeof
int main() {
    char array[1357];
    std::cout << intToStr<sizeof(array)>::value << std::endl;
} 
```

# c++ - 是否应该在 C++ 头文件中初始化 const 静态变量？

> ID：15020328
> 
> 赞同：7
> 
> 时间：2013-02-22T09:01:08.660
> 
> 标签：c++, static, initialization, declaration

my_test.h

```
#ifndef MY_TEST  
#define MY_TEST

struct obj {
  int x;
  int y;
};

class A {
private:
  const static int a=100;
  const static obj b;
};

const obj A::b={1,2};

#endif 
```

使用此头文件编译 cpp 时，`'multiple definition of 'A::b'`会出现错误。

1.  为什么我已经在使用警卫宏了？
2.  为什么不`A::a`产生错误？（我不能写代码`const static obj b={1,2}`）`class A`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T09:12:07.247

> **为什么我已经在使用警卫宏了？**

标头保护仅防止在同一**[翻译单元](https://stackoverflow.com/questions/1106149/what-is-a-translation-unit-in-c)**中多次包含头文件内容，而不是跨多个翻译单元。

> **为什么是`A::a`没有错误信息（我不能写代码`const static obj b={1,2}`）`class A`**

**[编译器允许类内初始化](https://stackoverflow.com/questions/9656941/why-i-cant-initialize-non-const-static-member-or-static-array-in-class)**作为 const 字面量类型的静态数据成员的特例。您的示例之一是类内初始化。

`const A::b`在包含标头的每个翻译单元中定义相同的符号名称，因此违反了**[一个定义规则](http://en.wikipedia.org/wiki/One_Definition_Rule)**。

您需要将定义移动到一个且只有一个源 cpp 文件，以便它只定义一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T09:21:30.883

Alok 已经回答了您的问题，但这里有一些简单的经验法则，以易于记忆的形式：

1.  *声明*进入 .h 文件
2.  *定义*在 .cpp 文件中

因此，静态成员需要在.h文件中*声明*，然后在.cpp文件中*定义。*在您的情况下，修复声明的语法，然后将它们移动到“my_test.cpp”文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T09:09:02.497

问题是您的定义`A::b`不包含类型。要成为一个有效的定义，它应该是：

```
const obj A::b = {1, 2}; 
```

这将消除编译错误，但如果您在多个源文件中包含此头文件，您仍然会收到链接器错误，因为`A::b`那时将被多次定义。您应该将定义移动到 .cpp 文件中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T09:11:48.750

无论您是否有标头保护，将该初始化放在头文件中都意味着您将`A::b`在包含该头文件的每个源文件中获得一个实例。因此链接器错误。

所以，一般来说，这是可能的，但不是一个好主意。

# php - 什么是权限被拒绝？如何解决此警告错误？

> ID：15020330
> 
> 赞同：-6
> 
> 时间：2013-02-22T09:01:16.613
> 
> 标签：php, mysql

```
Warning: fopen(/home/a/public_html/debug/php_error_log.txt) [function.fopen]: failed to open stream: Permission denied in /home/a/public_html/includes/functions/general.php on line 33

Warning: flock() expects parameter 1 to be resource, boolean given in /home/a/public_html/includes/functions/general.php on line 34

Warning: fwrite() expects parameter 1 to be resource, boolean given in /home/a/public_html/includes/functions/general.php on line 35

Warning: fwrite() expects parameter 1 to be resource, boolean given in /home/a/public_html/includes/functions/general.php on line 36

Warning: flock() expects parameter 1 to be resource, boolean given in /home/a/public_html/includes/functions/general.php on line 37

Warning: fclose() expects parameter 1 to be resource, boolean given in /home/a/public_html/includes/functions/general.php on line 38
Unable to connect to database server! 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T09:03:18.273

您的 PHP 脚本无法访问该文件`/home/a/public_html/debug/php_error_log.txt`

尝试`cat`一下，您也应该获得拒绝的权限。

要解决此问题，您应该更改文件的权限`chmod`或更改所有权`chown`

# c# - 如何在 Nopcommerce ..MVC 中连续显示数据

> ID：15020331
> 
> 赞同：1
> 
> 时间：2013-02-22T09:01:17.040
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor, nopcommerce

下面的代码列出了一组产品变体作为从上到下的列表......我怎样才能在一行中显示它，即水平

```
@foreach (var variant in Model.ProductVariantModels)
{   
   var dataDictVariant = new ViewDataDictionary();
   dataDictVariant.TemplateInfo.HtmlFieldPrefix = string.Format("variant_{0}", variant.Id);
   @Html.Partial("_ProductVariantLine", variant, dataDictVariant)
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T09:08:28.130

我会创建一个新模板，类似这样的东西`_ProductVariantItem`会使用适当的 CSS 类呈现 html 以将它们内联而不是作为块项目呈现。

# c++ - C++ 中的嵌套 Lambda 捕获

> ID：15020337
> 
> 赞同：5
> 
> 时间：2013-02-22T09:01:27.367
> 
> 标签：c++, visual-studio-2010, visual-c++, c++11, lambda

我有类似的东西：

```
// think of Synonym as a set/vector of values
// the purpose of this function is to filter out elements from the 2 synonyms/sets,
// that are not related (similar to SQL inner join) - modifier modifies vars
void Clauses::modifies(Synonym& modifiers, Synonym& modifiedVars, UnaryPredicate isModifies) {
    // filter out any modifiers that does not modify (is related to) any of the variables in modifiedVar (left join)
    modifiers.removeIf([modifiedVars, &isModifies](int line) -> bool {
        return modifiedVars.none([line, &isModifies](int v) -> bool { 
            return isModifies(line, v);
        });
    });

    // filter out any candidate modifiedVars that is not modified by any modifiers (right join)
    modifiedVars.removeIf([modifiers, &isModifies](int varIndex) -> bool {
        return modifiers.none([varIndex, &isModifies](int line) -> bool {
            return isModifies(line, varIndex);
        });
    });

    // result is an something like an SQL inner join
} 
```

问题是 Visual Studio 抱怨说：

```
Error   1   error C3480: 'PQL::Clauses::`anonymous-namespace'::<lambda1>::isModifies': a lambda capture variable must be from an enclosing function scope   h:\dropbox\sch\cs3202\spa_cpp\spa\pql.cpp   78
Error   2   error C2665: 'PQL::Clauses::`anonymous-namespace'::<lambda3>::<lambda3>' : none of the 2 overloads could convert all the argument types h:\dropbox\sch\cs3202\spa_cpp\spa\pql.cpp   78
... 
```

最初，代码没有将谓词/条件作为引用传递，而是在我认为我需要它的地方阅读，但它似乎没有改变任何东西

```
modifiers.removeIf([modifiedVars, isModifies] ... 
```

**更新**：我在这个项目中使用 VS2010

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T09:12:50.323

这似乎是一个 Visual C++ 错误，因为 GCC 和 Clang 接受了这个捕获。这是一个解决方法：

```
modifiedVars.removeIf([modifiers, &isModifies](int varIndex) -> bool {
    auto& isModifiesRedirect = isModifies;
    return modifiers.none([varIndex, &isModifiesRedirect ](int line) -> bool {
        return isModifiesRedirect (line, varIndex);
    }); 
```

注意：我只能在 VS2010 上进行测试。它可能会在 VS2012 中修复。如果还不是已知问题，您可能需要考虑搜索 Microsoft Connect 并提交新错误。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-22T09:16:59.883

如果您使用的是 Visual Studio 2010，您的代码可能会触发一个错误，该错误不允许您在嵌套 lambda 中捕获变量。

尝试使用默认捕获模式（例如 [&] 代替）作为解决方法。

此错误已在 VS2012 中修复。

# php - PHP 运行模块时，Apache 无法启动

> ID：15020342
> 
> 赞同：0
> 
> 时间：2013-02-22T09:01:52.407
> 
> 标签：php, mysql, apache

昨天，我很喜欢乱搞网站代码，因为从昨天开始我就没有接触过 PHP 和 Apache 的实际设置......（我必须说我启用了 php_mysql 模块）我昨天做了一个 MySQL 连接器并工作了完美！今天早上，我启动计算机，当我尝试运行 Apache 时，它​​给了我“请求的操作失败”。我查看了 apache 日志，我看到了这个。

```
[Fri Feb 22 08:07:39 2013] [warn] pid file C:/dev/progs/Apache/Apache2/logs/httpd.pid overwritten -- Unclean shutdown of previous Apache run? 
```

我环顾互联网，发现我必须删除该文件。我尝试删除然后重新启动，但没有奏效。

然后我发现禁用所有 PHP 模块都可以。所以我继续禁用了 php_mysql 模块（这是唯一启用的模块）。

然后它又开始了！除了我希望它从 MySQL 开始。然后我尝试在我的 php 页面上运行连接器。我明白了。

```
[22-Feb-2013 07:59:54] PHP Fatal error:  Call to undefined function mysql_connect() in C:\dev\www\test\index.php on line 48 
```

所以我真的希望 mysql 在 PHP 上运行，但我不希望 mysql 阻止我运行 Apache ......

有什么帮助吗？

（运行 Apache/2.0.64 PHP/5.2.17 MySQL5.6 - Win32 家庭高级版）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T20:23:07.070

我删除了 php.ini 并再次复制并重新配置它。现在工作！

# ms-access - ActiveX 电子表格 MS 访问

> ID：15020343
> 
> 赞同：0
> 
> 时间：2013-02-22T09:01:53.183
> 
> 标签：ms-access, activexobject, xml-spreadsheet

我想请你帮忙。

我正在尝试构建一个表单，在我想通过 VBA 恢复该数据以将其插入表后，用户可以选择将数据粘贴到表单电子表格上。

我怎样才能使用那个 Active X 电子表格？例如，我怎么知道单元格 A1 上的值是什么？？？？

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:11:06.340

您可以在绑定或未绑定控件中引用对象：

```
Private Sub Command3_Click()
    Set obj = Me.OLEUnbound0.Object
    MsgBox obj.ActiveSheet.[a1]
End Sub 
```

我认为让用户为您提供带有数据的 Excel 工作表的名称会更容易。我怀疑这种方法会涉及很多培训。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:55:42.417

```
Set mySht = Me.Spreadsheet 
```

使用 mySht 使用 .ActiveWindow.ActiveSheet lastColumn = .UsedRange.Columns(mySht.ActiveWindow.ActiveSheet.UsedRange.Columns.Count).Column lastrow = .Range("A" & mySht.ActiveWindow.ActiveSheet.Rows.Count).End( xlUp).Row End With End With

MsgBox "表格尺寸, Lines = " & lastrow & " columns = " & lastColumn

ReDim linea(lastColumn)

对于 i = 1 到 lastrow 对于 j = 1 到 lastColumn

```
 mySht.Cells(i, j) 'something with the cell (i, j)
Next ' end line 
```

Next 'next Line' dispose Set mySht = Nothing

# .net - 用于资产缩小和捆绑的完整 .NET 解决方案？

> ID：15020347
> 
> 赞同：1
> 
> 时间：2013-02-22T09:02:17.617
> 
> 标签：.net, css, performance, less, bundling-and-minification

我们即将启动一个新的相当大的 .NET 4.5 项目，我们正在寻找一种解决方案来处理我们的静态资产，例如 Javascript 和 CSS 文件。简而言之，我们希望它是一个易于在开发环境中开发和调试的解决方案，并在生产中实现最高性能和缓存控制。

# 要求

*   必须支持LESS。
*   必须能够控制捆绑的 JS/CSS 文件的顺序。
*   必须能够捆绑目录中的文件子集，而不是每个文件。
*   文件哈希或最后修改的时间戳必须作为查询字符串附加到 CSS/JS 文件名（例如 main.js?3B1F88A7），以在文件更新时中断客户端缓存。
*   如果 web.config 编译调试设置为“开”，我想将文件作为单独的脚本/链接标签包含在内，以简化开发和调试（开发模式）。
*   如果 web.config 编译调试设置为“关闭”，我想将文件缩小并捆绑到单个 CSS/JS 文件并设置积极的缓存标头（生产模式）。
*   捆绑和缩小是在用户请求页面时完成的，而不是构建后的脚本。
*   必须能够在同一网站中拥有多个 JS/CSS 捆绑包，以支持多个网站/某些子页面上的不同捆绑包。
*   必须支持具有多个服务器的生产环境。

# 很高兴有

*   如果它不破坏智能感知（CSS 类名等），那就太好了。

我确实查看了 .NET 4.5 中的新缩小和捆绑工具（[http://weblogs.asp.net/scottgu/archive/2011/11/27/new-bundling-and-minification-support-asp-net-4 -5-series.aspx](http://weblogs.asp.net/scottgu/archive/2011/11/27/new-bundling-and-minification-support-asp-net-4-5-series.aspx)），我还检查了 Cassette （[http://getcassette.net/](http://getcassette.net/)），但据我所知，它们都不符合我们“开箱即用”的所有要求。

那么，您认为最佳做法是什么？我们应该使用第三方解决方案，如 Cassette，一种基于 .NET 4.5 功能的定制解决方案（我喜欢这个，因为它是“标准 .NET”，但不支持 .LESS）还是完全不同的东西？

欢迎任何想法或想法！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T09:05:28.173

我认为[SquishIt](https://github.com/jetheredge/SquishIt)是您正在寻找的解决方案

# php - 从 symfony 1.4 中的操作调用函数

> ID：15020355
> 
> 赞同：0
> 
> 时间：2013-02-22T09:02:48.247
> 
> 标签：php, symfony-1.4

我需要在每个操作之前调用位于存储在 app/lib 目录中的类中的函数（即在 preExecute 操作中）

在那个函数中，我确实需要一个`$this`动作的指针。

我可以以静态方式执行此操作 - `Classname::functionname()`，但是它会导致 PHP 警告，这是我想避免的。

现在我处理它

```
ini_set('display_errors', '0');     # don't show any errors...
error_reporting(E_ALL | E_STRICT);  # ...but do log them 
```

但这是一种丑陋的方式..

我怎样才能以动态的方式做到这一点？

================

编辑：

根据要求 - 我添加了一个代码来显示我实际使用该`$this`指针做什么

```
...
$c = new Criteria();
$c->add(ArticlePeer::PUBLISHED, true);
$articles = ArticlePeer::doSelect($c);
$this->articles = $articles;
... 
```

是的，我知道我可以将此 Select 放入每个模块的 preExecute 操作中，它会正常工作。但是 - 我有很多模块，并且因为我有一组对所有这些模块都相同的操作，所以将它们放在一个过程中并调用该函数将是最聪明的方法......尤其是在维护方面该应用程序 - 它只是一个更改代码的地方，而不是十几个......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T12:41:01.923

在`app/lib`文件夹内的类中，您只需返回`$articles`：

```
$c = new Criteria();
$c->add(ArticlePeer::PUBLISHED, true);
return ArticlePeer::doSelect($c); 
```

然后，在你的内部`preExecute()`：

```
public function preExecute()
{
  $this->articles = Classname::functionname();
} 
```

如果必须返回多个值，则可以使用数组来完成：

```
$c = new Criteria();
$c->add(ArticlePeer::PUBLISHED, true);
$articles =  ArticlePeer::doSelect($c);

$c = new Criteria();
$c->add(BookPeer::PUBLISHED, true);
$books =  BookPeer::doSelect($c);

return array(
  'articles' => $articles,
  'books'    => $books,
); 
```

然后结束，使用此数组在您的操作中填充您的变量：

```
public function preExecute()
{
  $data = Classname::functionname();

  $this->articles = $data['articles'];
  $this->books    = $data['books'];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T12:07:22.920

您不能更改`$this`方法中的值。绝不。

相反，看看你如何`$articles`从外部访问的类，应该有类似`getArticles()`. 看起来这个类是一个 Propel 模型，那些已经生成了这样的 getter。

根据您的最终目标，可能有比实例化此模型、调用神秘方法然后获取属性更好的解决方案。毕竟，类不仅仅是函数的集合，不应该被这样对待。不重复代码是好的，但必须有某种意义。

# python - 在 Linux 上通过 USB 连接时如何从 HID 中识别键盘

> ID：15020359
> 
> 赞同：1
> 
> 时间：2013-02-22T09:03:11.160
> 
> 标签：python, hid

我无法确定通过 USB 连接了哪种设备，我正在使用 Python 进行开发，并且正在使用观察程序检查文件夹 /dev/input 上的任何更改。一旦我连接了一个设备，我就会收到一个警报，说有些东西发生了变化，但我需要将新设备与库 evdev 连接起来。在这一点上，我不确定如何检查设备是否是真正的键盘或条形码扫描仪，而不是鼠标或其他设备。

每个键盘的描述中都有一个“键盘”字样吗？HID 是否仅对键盘使用特殊驱动程序而对鼠标使用另一种驱动程序？

我要连接的键盘不会是唯一的，我可以去商店买一个新的，然后插上电源它应该可以工作。

我不是 100% 确定 HID 和 Plug&Play 在 Linux 上的工作原理，所以我需要了解更多关于它们的信息。

摘要： - 代码：Python - 库：evdev

*   目标：使用 evdev 库连接刚刚插入 python 脚本的键盘/条形码扫描仪

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T11:59:05.593

该解决方案在此链接中有所描述： http: [//www.mattfischer.com/blog/?p=182](http://www.mattfischer.com/blog/?p=182)

基本上你需要检查每个设备，然后检查设备是键盘还是其他东西。

# active-directory - 通过PowerShell的文件夹权限

> ID：15020365
> 
> 赞同：1
> 
> 时间：2013-02-22T09:03:19.713
> 
> 标签：active-directory, powershell-2.0, file-permissions, user-permissions

我试图在 AD 中为新创建的用户设置一些权限。创建文件夹后，我尝试设置各种权限，如下所示：

```
$Rights = [System.Security.AccessControl.FileSystemRights]::FullControl
$Inherit = @([System.Security.AccessControl.InheritanceFlags]::ContainerInherit,[System.Security.AccessControl.InheritanceFlags]::ObjectInherit)
$Propagation = [System.Security.AccessControl.PropagationFlags]::None
$Access =[System.Security.AccessControl.AccessControlType]::Allow
$ACL = New-Object System.Security.Principal.NTAccount "localdomain\$userprincipalname"
$objACE = New-Object System.Security.AccessControl.FileSystemAccessRule($ACL, $Rights, $Inherit, $Propagation, $Access)                     
$ACL = Get-Acl -Path $userDir
$ACL.AddAccessRule($objACE) 
Set-ACL -Path $userDir -AclObject $ACL 
```

我得到的错误与我传递给 AddAccessRule 的参数有关

```
Exception calling "AddAccessRule" with "1" argument(s): "Some or all identity references could not be translated."
+ CategoryInfo          : NotSpecified: (:) [], MethodInvocationException
+ FullyQualifiedErrorId : DotNetMethodException 
```

但我在这里看不到任何错误，所以我真的很感激另一双眼睛。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T08:41:04.340

好的，所以我的解决方案有效，据我所知，是在文件夹上设置权限的方法。

```
$Rights = [System.Security.AccessControl.FileSystemRights]::FullControl
$Inherit = @([System.Security.AccessControl.InheritanceFlags]::ContainerInherit,[System.Security.AccessControl.InheritanceFlags]::ObjectInherit)
$Propagation = [System.Security.AccessControl.PropagationFlags]::None
$Access =[System.Security.AccessControl.AccessControlType]::Allow
$ACL = New-Object System.Security.Principal.NTAccount "localdomain\$userprincipalname"
$objACE = New-Object System.Security.AccessControl.FileSystemAccessRule($ACL, $Rights,$Inherit, $Propagation, $Access)                     
$ACL = Get-Acl -Path $userDir
$ACL.AddAccessRule($objACE) 
Set-ACL -Path $userDir -AclObject $ACL 
```

# content-management-system - 在 CQ 如何禁用子页面属性对话框中的任何字段？

> ID：15020369
> 
> 赞同：1
> 
> 时间：2013-02-22T09:03:30.253
> 
> 标签：content-management-system, aem

我在页面属性>基本中添加了一个新的选择类型字段“主题”。现在，如果我在 WCM 中使用相同的模板添加一个新页面，我还会看到“主题”选项，这很明显。有什么方法可以隐藏子页面中的字段吗？

PS 发生这种情况是因为我为子页面使用了相同的模板。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T21:49:36.503

您不能使用相同的模板并使页面属性对话框不同。

你可以做的是重载对话框

*   创建一个新模板和相应的从您当前继承的资源类型组件。
*   复制您希望与组件的最低父级不同的对话框或选项卡。确保对话框是组件下的唯一节点。
*   对对话框进行所需的更改。

然后，您必须在页面 jsp 中包含代码以获取父页面属性，例如：

```
// if the parent page is always a certain level below the root you can use
// currentPage.getAbsoluteParent(3); to get the third page down from the top
// of the current path tree.
Page parentPage = currentPage.getParent();

ValueMap parentPageProperties;

if (parentPage != null) {
    parentPageProperties = parentPage.getProperties();
}

// This tries to get the property 'theme' from the current page. If that fails
// then it tries to get the property from the parent page. If that fails it 
// defaults to blank.
theme = properties.get("theme", parentPageProperties.get("theme", "")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T13:53:10.140

一个快速的解决方案也是创建第二组模板/页面组件。假设您有模板 A，它使用页面组件 B 作为资源类型：

*   创建模板 X 并使用 allowedParents allowedChildren 和 allowedPaths 属性，使两者互斥（实际解决方案取决于您的内容架构）
*   给 X 与 A 相同的标题
*   创建扩展 B 的页面组件 Y，并定义它自己的对话框
*   使用 xtype=cqinclude 使 Y 的对话框重新使用 B 中的任何选项卡（请参阅基础页面的对话框以供参考）

# php - 如何将数据库中的图片显示到heredoc？

> ID：15020370
> 
> 赞同：0
> 
> 时间：2013-02-22T09:03:32.143
> 
> 标签：php, mysql

我一直在尝试将图像显示到heredoc中，但它无法工作并且我没有收到任何错误但是如果我将它们显示出来，如果heredoc它们显示得很好。可能是什么问题？对于任何帮助，我将不胜感激。这是代码，我确实在 heredoc 和 out 中显示了两次图像，以便您获得清晰的视图。

```
<?Php
$target = "image_uploads/";
$image_name = (isset($_POST['image_name']));
$query ="select * from
 tish_user inner join tish_images
 on tish_user.user_id = tish_images.user_id
 WHERE tish_images.prof_image = 1";
    $result= $con->prepare($query);
    $result->execute();

$table = <<<ENDHTML
<div style ="text-align:center;">
<h2>Client Review Software</h2>
<table id ="heredoc" border ="0" cellpaddinig="2" cellspacing="2" style = "width:100%" ;
margin-left:auto; margin-right: auto;>
<tr>
<th>Name</th>
<th>Last Name</th>
<th>Ref No</th>
<th>Cell</th>
<th>Picture</th>
</tr>
ENDHTML;

while($row = $result->fetch(PDO::FETCH_ASSOC)){
    $date_created = $row['date_created'];
        $user_id = $row['user_id'];
        $username = $row['username'];

        $image_id = $row['image_id'];
        #this is the Tannery  operator to replace a pic when an id do not have one
$photo = ($row['image_name']== null)? "me.png":$row['image_name'];
#display image 
             # I removed this line up to here 
        echo '<img src="'.$target.$photo.'" width="100" height="100">';

$table .=  <<<ENDINFO
<tr>
<td><a href ="client_details.php?user_id=$user_id">$username </a></td>
<td>$image_id</td>
<td></td>
<td>c</td>
<td><img src="'.$target.$photo.'" width="100" height="100">
</td>
</tr>
ENDINFO;
}
    $table .= <<<ENDHTML
</table>
<p>$numrows"Clients</p>
</div>
ENDHTML;
echo $table;
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T09:17:17.007

使用`heredoc`并在未显示图像的浏览器中检查其来源

图像 src 将是这样的`<img src="'.../images/.me.png.'" ...`，这是错误的，因为您可以看到单引号和 extra 。（句号）在 img src 的双引号内

试试这个代码

```
$table .=  <<<ENDINFO
<tr>
<td><a href ="client_details.php?user_id=$user_id">$username </a></td>
<td>$image_id</td>
<td></td>
<td>c</td>
<td><img src="{$target}{$photo}" width="100" height="100">
</td>
</tr>
ENDINFO;
} 
```

所以

```
<img src="'.$target.$photo.'" width="100" height="100"> 
```

将会

```
<img src="{$target}{$photo}" width="100" height="100"> 
```

让我知道这是否解决了，请务必从浏览器的`view source`选项中检查 HTML Source 以查看打印的内容

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T09:22:24.340

```
<td><img src="'.$target.$photo.'" width="100" height="100"> 
```

你的heredoc中的这一行对我来说没有意义。您应该直接使用字符串中的变量，而不使用单引号和连接点。

像这样：

```
<td><img src="$target$photo" width="100" height="100"> 
```

但是因为您希望两个变量紧挨着打印，您可能需要使用 curly 语法：

```
<td><img src="{$target}{$photo}" width="100" height="100"> 
```

[您可以在此处](http://www.php.net/manual/en/language.types.string.php#language.types.string.parsing)阅读有关 curly 语法的更多信息 。您基本上将变量包装在花括号 (`{`和`}`) 中，以帮助 PHP 了解变量名称的开始和结束位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T09:29:36.893

这样做并在您想要的任何地方显示声明的变量。还要在heredoc中删除它，然后放$ pic。

```
$pic = '<img src="'.$target.$photo.'" width="50" height="50">';
 echo $pic  ; 
```

# javascript - 处理窗口之间的 Javascript cookie 竞争条件

> ID：15020371
> 
> 赞同：4
> 
> 时间：2013-02-22T09:03:38.847
> 
> 标签：javascript, synchronization, race-condition

我正在构建一个 Web 应用程序（使用 Fay 生成 Javascript），用户可以在该应用程序中打开多个选项卡/窗口。我希望所有打开的实例共同托管一个有限状态机，其中所有打开的窗口/选项卡之间只有一个状态共享。状态转换由窗口中的事件和超时触发。只要至少有一个窗口仍然打开，就需要发生超时，所以我在所有窗口中都设置了它们。

因为我希望这个系统也能在旧版浏览器上运行，所以我不想使用 LocalStorage 或 Worker Threads 来实现它，所以我尝试使用 cookie 在窗口之间进行通信。我还希望窗口之间的大部分通信发生在客户端（即，我不希望每次状态转换都需要对服务器端的 HTTP 请求）。

但是，这会产生竞争条件：所有打开的窗口同时触发超时，并可能覆盖彼此在此状态转换时执行的 cookie 更改。我可以通过在超时中添加噪音并在超时时设置新的状态cookie来减少可能发生竞争条件的窗口，但是因为似乎没有一种原子方式来读取和-更新 cookie，比赛仍然存在，只是不太可能发生。

在同一域上的窗口之间进行通信时，Javascript 中有哪些跨浏览器、纯客户端同步原语？

# html - Bootstrap：如何使用浮动元素制作“rowspan”？

> ID：15020376
> 
> 赞同：0
> 
> 时间：2013-02-22T09:04:08.370
> 
> 标签：html, layout, twitter-bootstrap

我正在尝试将表格视图转换为浮动视图。它有两列，第一列应该有一行，第二列应该有两行。我希望第一列的行伸展，使其跨越第二列的两行。

目前我的 HTML 是这样的：

```
<div class="row">
<div class="span1" style="background-color: #FF0000">
    First column with single row goes here
</div>
<div class="span11">
    <div class="row">
        <div class="span12" style="background-color: #00FF00"> 
            First row of second column goes here
        </div>
    </div>
    <div class="row">
        <div class="span12" style="background-color: #0000FF">
            Second row of second column goes here
        </div>
    </div>
</div> 
```

现在我有一个问题：单行列不跨越第二列的两行。它与第一行具有相同的高度，并且在其下方具有与第二行相同的高度的空白。

我应该如何在两行上拉伸这个单元格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T09:23:06.463

我认为您正在以错误的方式思考这个问题，使用表/行的概念应用于 div 容器。他们真的不是那样工作的。

你可以用 CSS 做到这一点。

添加浮动：左；到所有 div 容器或类。

在“第 2 列”中添加`margin-left:100px;`您想要的样式。这会将它们推离第一列。

添加`height:100px;`到您的左列 div 以使其具有固定高度。

你可以这样拨通所有这些。

此外，您可能错误地使用了“行”类，因为它包裹了整个组，但它也是应用于第二行的类。你可能想做这些不同的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T09:33:25.040

我认为这会如你所愿：

```
<div style="background-color: #FF0000">
  First column with single row goes here
</div>
<div style="background-color: #00FF00; width:50%; float:left;"> 
  First row of second column goes here
</div>
<div style="background-color: #0000FF; width:50%; float:left;">
  Second row of second column goes here
</div> 
```

我不知道您的 CSS 类中有什么代码，所以我在回答中删除了它们。您可能必须修改该代码才能使其正常工作。

我将列的宽度设置为 50%。如果您想要其他宽度，请更改这些值。只需确保总和为 100。

我还删除了一些我认为不需要的 HTML 代码。至少据我了解你的问题。

# php - 有什么方法可以禁用或阻止同源 AJAX？

> ID：15020383
> 
> 赞同：2
> 
> 时间：2013-02-22T09:04:45.760
> 
> 标签：php, javascript, ajax, apache

在 Security.SE 上回答[这个问题](https://security.stackexchange.com/q/31311/7497)时，我意识到可能需要一种方法来禁用来自*所有*域的 AJAX 请求，包括原始域本身。如果我有一个托管用户提交的 JS 的站点并且我不希望该 JS 能够在现代浏览器上通过 AJAX 访问我的站点，这将很有用（类似于禁止跨域 AJAX 的方式，除非在标题）

有什么方法可以在 PHP 或 Apache 中禁用同源 AJAX？我正在寻找类似于 `Access-Control-Allow-Origin: *`标题的东西（通过`header()`or设置`.htaccess`），除了效果相反 - 浏览器被告知不允许对页面进行*任何*AJAX 调用。

我知道最终用户总是可以自己弄乱标题并允许 AJAX。我不介意，我想防止不知情的访问者在上传的代码中受到同源 AJAX 的影响。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T09:17:58.120

大多数 JavaScript 库会将`HTTP_X_REQUESTED_WITH`标头设置为`xmlhttprequest`. 所以寻找这个并阻止这样的请求可能是你能得到的最接近你想要的东西。否则，您可能知道，XHR 请求与“常规”请求没有什么不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T09:36:53.120

这可能不是您问题的确切答案，但您可以在插入用户 JS 之前覆盖 XMLHttpRequest 对象：

```
window.XMLHttpRequest = false;

// Insert users JS here 
```

# mysql - MySQL：同一日期的多行只获取一行？

> ID：15020385
> 
> 赞同：0
> 
> 时间：2013-02-22T09:04:52.717
> 
> 标签：mysql, date

我有一个 MySQL 查询，它在一列中返回几行日期，这就是我的查询：

```
select * from (big subselect) sub 
```

例如，我得到 6 行，这 6 行中的一列有一个日期，该列称为 my_date。有没有办法只获取日期不是同一天的那些行？例子：

```
29.10.2012 01:51:10
29.10.2012 01:51:10
29.10.2012 01:51:10
29.10.2012 02:43:18
29.10.2012 02:43:18
29.10.2012 02:43:18 
```

--> 我只想要其中的一行，因为所有 6 行都是同一天。

```
29.10.2012 01:51:10
30.10.2012 01:51:10 --> different
29.10.2012 01:51:10
29.10.2012 02:43:18
29.10.2012 02:43:18
29.10.2012 02:43:18 
```

--> 我想要 2 行，因为有 2 个不同的日子

my_date 列不是每一行中唯一的列，但我希望它作为标准。我怎么能那样做？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T09:07:47.787

您只需要选择这些`MAX(my_date)`，但您需要按其他一些字段进行分组。像这样的东西：

```
select s1.*
from sub as s1
INNER JOIN
(
   SELECT MAX(my_date) AS MaxDate, SomeId
   FROM sub
   GROUP BY someId
) AS s2 ON s1.my_date = MaxDate AND s1.SomeId = s2.SomeId; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T09:26:16.017

您只能对日期进行分组，如下所示：

```
SELECT * FROM sub
GROUP BY DATE_FORMAT(my_date,'%Y-%m-%d') 
```

### [看到这个 SQLFiddle](http://www.sqlfiddle.com/#!2/587ef/1)

结果：

```
| ID |                        MY_DATE |
---------------------------------------
|  1 | October, 29 2012 01:51:10+0000 |
|  2 | October, 30 2012 01:51:10+0000 | 
```

# javascript - 使用谷歌浏览器扩展设置代理

> ID：15020387
> 
> 赞同：7
> 
> 时间：2013-02-22T09:04:57.043
> 
> 标签：javascript, json, google-chrome, google-chrome-extension, google-chrome-devtools

我正在尝试构建一个 chrome 扩展，它可以在启动浏览器时更改代理设置。我遵循了 chrome 扩展文档，但仍然没有成功。

清单.json

```
 {

      "manifest_version": 2,

      "name": "Proxy",
      "description": "Proxy on 127.0.0.1:8080",
      "version": "1.1",
      "background": {
      "scripts":["background.js"]
      },
      "browser_action": {
            "default_icon": "icon.png",
            "popup":"popup.html"
        },
    "permissions": [
        "tabs",
        "http://*/*",
        "https://*/*",
        "notifications",
        "contextMenus",
        "history",
        "background",
        "proxy"
    ],
    "content_security_policy": "script-src 'self' 'unsafe-eval'; object-src 'self'"
    } 
```

背景.js

```
chrome.windows.onCreated.addListener(function() {

var config = {
  mode: "fixed_servers",
  rules: {
    proxyForHttp: {
      scheme: "http",
      host: "127.0.0.1",
      port:"8080"
    },
    bypassList: ["foobar.com"]
  }
};
chrome.proxy.settings.set(
    {value: config, scope: 'regular'},
    function() {});

}); 
```

上面的代码不起作用...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-12-15T23:16:07.727

从昨天开始我一直在尝试一切，终于找到了我的问题；我不得不改变

`proxyForHttp:`-->`singleProxy:`

和

`port:'8080'`-->`port: 8080`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-08-07T23:41:52.243

将线路更改`port:"8080"`为`port:8080`，它会工作。

* * *

### 尼斯蒂

您可以在 chrome://net-internals/#proxy 查看有效设置。

* * *

### 尼斯蒂

如果通过 PAC 脚本，在脚本代码错误时，`chrome.proxy.settings.set`即使代理静默失败，处理程序仍会运行。这可以在 chrome://net-internals/#events 中检测到。

* * *

### 尼斯蒂

[该页面](https://www.chromium.org/developers/design-documents/network-stack/debugging-net-proxy#TOC-How-do-I-debug-a-PAC-script-Why-can-t-I-see-the-alert-and-javascript-errors-it-gave-)声称可以在网络日志中找到 PAC 脚本中的 console.log 消息，但它似乎不起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T19:14:53.817

背景页面应该没有问题。您的代码位于窗口对象的 onCreated 事件中。您不能保证在创建第一个窗口时加载扩展。

只需删除事件并运行代码，然后在初始化扩展时就应该让它运行一次。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T18:58:53.427

我认为您不能使用 Background.js 中的 chrome.proxy API。我对弹出扩展做了同样的事情（使用了文档中的代码示例），它工作得很好......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-28T00:28:36.863

我试过你的代码，chrome给我提示端口号是整数，而不是字符串并将这个端口：“8080”更改为端口：8080，它工作但我没有遵循你的所有代码，并删除这个chrome .windows.onCreated.addListener(function() { ，只留下这个函数中的内容 3ks 你的问题！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-07T01:32:13.663

“当浏览器启动时”

您应该使用[Chrome.Runtime](https://developer.chrome.com/apps/runtime)而不是 chrome.windows.onCreated。使用 chrome.runtime.onStartup，所以当浏览器从无到有打开时 hrome.runtime.onStartup 将被触发。

> onStartup 当安装了此扩展的配置文件首次启动时触发。启动隐身配置文件时不会触发此事件，即使此扩展程序在“拆分”隐身模式下运行也是如此。

会是这样

```
chrome.runtime.onStartup.addListener(function() {
var config = {
  mode: "fixed_servers",
  rules: {
    proxyForHttp: {
      scheme: "http",
      host: "127.0.0.1",
      port:"8080"
    },
    bypassList: ["foobar.com"]
  }
};
chrome.proxy.settings.set(
    {value: config, scope: 'regular'},
    function() {});

}); 
```

您也可以在安装/更新扩展程序时使用 onInstalled ...

# orchardcms - Orchard Contrib.Taxonomies - 删除草稿时永久链接冲突

> ID：15020388
> 
> 赞同：0
> 
> 时间：2013-02-22T09:05:02.390
> 
> 标签：orchardcms

在 Orchard 中使用 Contrib.Taxonomies 预览和拒绝草稿：

我需要在导入后预览（如有必要，拒绝）分类术语。

我试图用以下代码做到这一点：

A. 我已将标准导入代码的最后一行更改为：

```
Services.ContentManager.Create(term, VersionOptions.Draft); 
```

（而不是 VersionOptions.Published）

B. 我的预览屏幕有一个“发布”按钮，带有一个带有以下代码的控制器操作：

```
// remove current published terms
foreach (var term in _taxonomyService.GetTerms(taxonomyId)) {
    _taxonomyService.DeleteTerm(term);
}

// publish draft terms created at import
foreach (var draftTerm in _MyTaxonomyService.GetDraftTerms(taxonomyId)) {
    Services.ContentManager.Publish(draftTerm.As<ContentItem>());
} 
```

C. 预览屏幕也有一个“拒绝”按钮，控制器操作带有以下代码：

```
// delete drafts
foreach (var draftTerm in _MyTaxonomyService.GetDraftTerms(taxonomyId)) {
    _taxonomyService.DeleteTerm(draftTerm);
} 
```

使用上面的代码，我可以随意“发布”多次，并且可以按预期工作。

但是，如果我“拒绝”然后发布，我会得到顶级术语的“冲突中的永久链接”。

如何在下次发布时删除草稿而不会出现永久链接冲突？

（另请注意，删除草稿不应影响当前发布条款的永久链接/显示别名）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T18:00:49.520

好的，根本问题是`_taxonomyService.DeleteTerm()`触发`AutoRouteHandler.OnRemoved()`事件方法。

此事件方法将向下调用堆栈到`AliasStorage.Remove()`，它仅将路径/别名源作为参数，即它将删除与给定路径匹配的所有 AliasRecords，即已发布版本仍然依赖的别名！

我对这个问题的解决方案是用我自己的删除草稿条款`_taxonomyService.DeleteTerm()`的自定义方法替换调用。`_MyTaxonomyService.DeleteDraftTerm()`请注意从处理程序事件调用中删除 AutoRoutePartHandler：

```
 public void DeleteDraftTerm(ContentItem contentItem)
    {
        var draftVersions = _contentItemVersionRepository.Fetch(x => x.ContentItemRecord == contentItem.Record && x.Latest && !x.Published);
        var context = new RemoveContentContext(contentItem);

        _handlers.Value.Invoke(handler => handler.Removing(context), Logger);

        foreach (var version in draftVersions)
        {
            if (version.Latest)
            {
                version.Latest = false;
            }
        }

       // comment this line out and replace with lines below
       // _handlers.Value.Invoke(handler => handler.Removed(context), Logger);

       var handlersExceptAutoRoute = _handlers.Value.Where(x => x.GetType() != typeof(AutoroutePartHandler));
       handlersExceptAutoRoute.Invoke(handler => handler.Removed(context), Logger);

    } 
```

Tbh，我不太确定为什么这是必要的。在我添加这个新代码之前，当我删除一个带有自动路由部分的草稿内容项时，它似乎导致没有别名记录，但仍然有发布的自动路由部分记录。所以 AutoRoutePartHandler.ProcessAlias() 会认为有重复的发布路径并引发冲突警告。

# google-apps-script - 如何使用谷歌应用脚 本重置谷歌表单计数器值

> ID：15020392
> 
> 赞同：2
> 
> 时间：2013-02-22T09:05:16.973
> 
> 标签：google-apps-script, google-sheets, google-forms

我有几个经常重复使用的 Google 表单，每次提交大约 300 - 400 个表单。

到目前为止，我有两种手动重置表单的方法：

1.  在保持表单编辑器打开的同时删除表单。

2.  选择包含表单提交的行，右键单击并选择“删除...行”。

使用脚本，我没有找到像`form.reset()`. 该方法`.DeleteRows(fromRow, to Row)`只是删除行，但不影响计数器。

那么，如何使用 Google Apps 脚本自动执行“重置表单”任务？
或者，如何在脚本中模仿第二种方式？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T09:40:51.947

Google 表单创建了一个新的表单编辑器（仅在几周前发布）。这个新的表单编辑器有一个“删除所有回复”选项。因此，一种选择是在新的表单编辑器中重新创建表单。（从新电子表格中，单击工具 > 创建表单）。

**注意：** Google Apps 用户还不能使用这个新的表单编辑器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T16:20:06.760

我有一个可行的解决方案，它使用`deleteRows()`. 我不确定为什么这对你不起作用，看看你的代码会很有趣。

新的 Forms 产品（2013 年 2 月）与旧表单完全不同 -*此解决方案仅适用于旧表单*。

无论如何，这就是我所拥有的，前后截图。该`tidy()`函数可以通过传入要删除的行数来调用，或者您可以从菜单中调用它，如此处所示。此脚本的更完整版本[可作为 gist 获得](https://gist.github.com/mogsdad/5014758)。

```
/**
 * Standard onOpen provided in script template.
 */
function onOpen() {
  var sheet = SpreadsheetApp.getActiveSpreadsheet();
  var entries = [{name : "Read Data",functionName : "readRows"},
                 {name : "Tidy Form Responses", functionName : "tidy"}];
  sheet.addMenu("Script Center Menu", entries);
};

/**
 * Prompt user for the number of form response rows to remove, then delete them.
 * Assumes that the form responses are in the active sheet, that there is one
 * row of 'headers' followed by responses (in row 2).
 *
 * @param {number} thisMany (Optional) The number of rows to remove. If not
 *                          specified, user will be prompted for input.
 */
function tidy(thisMany) {
  if (tidy.arguments.length == 0) {
    thisMany = Browser.inputBox("How many responses should be tidied?");
  }

  var sheet = SpreadsheetApp.getActiveSheet();
  sheet.deleteRows(2, thisMany);
} 
```

## 前

![带有表单响应和自定义菜单的电子表格](../Images/a762ea7e77db5be33367c88640d808da.png)

## 期间

![脚本操作，inputBox](../Images/57050ee1c3c36aced9cde96fb30674b5.png)

## 后

![电子表格少了 2 个表单响应](../Images/2d160ced0a3e1d6cdfc13b86cb2a8554.png)

# jquery - jQuery：是否有机会检测到鼠标从哪一侧进入没有“偏移”方法的 div？

> ID：15020393
> 
> 赞同：7
> 
> 时间：2013-02-22T09:05:21.827
> 
> 标签：jquery, mouseover

有没有办法检测鼠标光标来自 div 的哪一侧？

目前我正在使用这种方法：

```
jQuery(this).bind('mousemove',function(e){
    offset_pos_x = parseInt(e.offsetX);
    offset_pos_y = parseInt(e.offsetY);
    ... 
```

然后我寻找鼠标在 div 内的距离，朝哪个方向。

问题是，这种方法有点问题，因为我需要所有 4 个面，而不仅仅是两个，所以我必须检查 offsetX 和 offsetY。

如果我在 div 内移动鼠标，例如 X:+15,Y:-3（以像素为单位），我知道鼠标来自左侧，因为鼠标在 x 轴上移动了 15px，但在 y 轴上只移动了 -3px . 关于这个问题的问题是，当 X 和 Y 几乎相同并且我不知道鼠标是来自左侧还是顶部时（例如）。

此外，根据我的另一个问题（[jQuery：mouseenter/mousemove/mouseover 无法识别小 div 和快速鼠标移动](https://stackoverflow.com/questions/15019523/jquery-mouseenter-mousemove-mouseover-not-recognized-with-small-div-and-fast-mo/15019825)），由于浏览器/操作系统的限制，事件不会在 div 一侧的第一个像素上触发。因此，我的“entered_at”坐标不是那么准确 - 例如：

如果我在 div 内（从左至右）非常快地移动鼠标光标，则“entered_at”坐标位于 x:17,y:76 处。现在，如果我在停止鼠标后将鼠标向左移动，例如到 x:6,y:76，则起点和 offsetX 之间的差异为负，因此会触发“光标来自右侧”功能...

是否有另一种方法来检测鼠标光标的来源？

问候，帕特里克

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-22T09:12:52.297

我不会使用偏移量，而是使用 pageX/pageY（jQuery 标准化这些）。如果光标的第一个 mousemove 事件比任何其他边缘更靠近左边缘，则它来自左侧。您也可以考虑为此使用悬停事件，而不是 mousemove。

JSFiddle，由牙买加国旗提供。 [http://jsfiddle.net/MJTkk/1/](http://jsfiddle.net/MJTkk/1/)

```
function closestEdge(x,y,w,h) {
        var topEdgeDist = distMetric(x,y,w/2,0);
        var bottomEdgeDist = distMetric(x,y,w/2,h);
        var leftEdgeDist = distMetric(x,y,0,h/2);
        var rightEdgeDist = distMetric(x,y,w,h/2);
        var min = Math.min(topEdgeDist,bottomEdgeDist,leftEdgeDist,rightEdgeDist);
        switch (min) {
            case leftEdgeDist:
                return "left";
            case rightEdgeDist:
                return "right";
            case topEdgeDist:
                return "top";
            case bottomEdgeDist:
                return "bottom";
        }
}

function distMetric(x,y,x2,y2) {
    var xDiff = x - x2;
    var yDiff = y - y2;
    return (xDiff * xDiff) + (yDiff * yDiff);
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-25T09:00:23.380

这是脚本的正确/工作示例，包括对绝对定位 div 的修复。再次感谢您的帮助 turiyag！

jsfiddle：http: [//jsfiddle.net/MJTkk/2/](http://jsfiddle.net/MJTkk/2/)

脚本：

```
$(function() {
    $("img").hover(function(e) {
        var el_pos = $(this).offset();
        var edge = closestEdge(e.pageX - el_pos.left, e.pageY - el_pos.top, $(this).width(), $(this).height());
        log('entered at: '+edge);
    }, function(e) {
        var el_pos = $(this).offset();
        var edge = closestEdge(e.pageX - el_pos.left, e.pageY - el_pos.top, $(this).width(), $(this).height());
        log('left at: '+edge+'<br><br>');
    });
});

function closestEdge(x,y,w,h) {
        var topEdgeDist = distMetric(x,y,w/2,0);
        var bottomEdgeDist = distMetric(x,y,w/2,h);
        var leftEdgeDist = distMetric(x,y,0,h/2);
        var rightEdgeDist = distMetric(x,y,w,h/2);

        var min = Math.min(topEdgeDist,bottomEdgeDist,leftEdgeDist,rightEdgeDist);
        switch (min) {
            case leftEdgeDist:
                return "left";
            case rightEdgeDist:
                return "right";
            case topEdgeDist:
                return "top";
            case bottomEdgeDist:
                return "bottom";
        }
}

function log(msg) {
    $("#console").append("<pre>" + msg + "</pre>");
}

function distMetric(x,y,x2,y2) {
    var xDiff = x - x2;
    var yDiff = y - y2;
    return (xDiff * xDiff) + (yDiff * yDiff);
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-03-06T14:24:31.457

牙买加国旗小提琴中最接近的边缘函数不如它可能的那么好，并且对于某些元素是不准确的。我们可以使用`offsetX`and`offsetY`来简化函数并消除`distMetric`函数：

```
// Pass object offsetX,offsetY,width,height
function closestEdge(distLeft,distTop,w,h){
    var distBottom = (h - distTop);
    var distRight = (w - distLeft);
    var min = Math.min(distTop, distBottom, distLeft, distRight);
    switch (min) {
        case distLeft:
            return "left";
        case distRight:
            return "right";
        case distTop:
            return "top";
        case distBottom:
            return "bottom";
    }
} 
```

例如：

```
$('.btn').on('mouseenter',function(e){
    var edge = closestEdge(e.offsetX, e.offsetY, $(this).width(), $(this).height());
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-18T10:02:44.060

我对这段代码有一些问题，在对矩形进行操作时，我发现它会错误地将边缘识别为正确的边缘，而它应该在顶部。我花了一些时间想出一个答案，并觉得我会分享：

```
var getDir = function( elem, e ) {       

            /** the width and height of the current div **/
            var w = elem.width();
            var h = elem.height();
            var offset = elem.offset();
            /** calculate the x and y to get an angle to the center of the div from that x and y. **/
            /** gets the x value relative to the center of the DIV and "normalize" it **/
            var x = (e.pageX - offset.left - (w/2)) * ( w > h ? (h/w) : 1 );
            var y = (e.pageY - offset.top  - (h/2)) * ( h > w ? (w/h) : 1 );

            /** the angle and the direction from where the mouse came in/went out clockwise (TRBL=0123);**/
            /** first calculate the angle of the point, 
             add 180 deg to get rid of the negative values
             divide by 90 to get the quadrant
             add 3 and do a modulo by 4  to shift the quadrants to a proper clockwise TRBL (top/right/bottom/left) **/
            var direction = Math.round((((Math.atan2(y, x) * (180 / Math.PI)) + 180 ) / 90 ) + 3 )  % 4;

            /** do your animations here **/ 
            switch(direction) {
             case 0:
                return 'top';
             break;
             case 1:
                return 'right';
             break;
             case 2:
                   return 'bottom';
             break;
             case 3:
                   return 'left';
             break;
            }

}

$(this).bind('mouseenter',function(e){
    //outputs the direction to the log
    console.log(getDir($(this), e));
}); 
```

信用：[带有“鼠标方向”的悬停的 jQuery 动画](https://stackoverflow.com/questions/3627042/jquery-animation-for-a-hover-with-mouse-direction/3647634#3647634)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-24T12:24:45.760

这里有一个插件

：[https ://github.com/JohnnyBeGood34/JQuery-MouseEntrance](https://github.com/JohnnyBeGood34/JQuery-MouseEntrance)

希望能帮到你。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-08-30T17:23:25.947

我使用 jQuery 函数改进了[@Patrick](https://stackoverflow.com/users/762376/patrick)的解决方案，使其拥有更加优雅和强大的自定义 jQuery 函数。

这是[jQuery getMouseSide jsFiddle](http://jsfiddle.net/MJTkk/184/)：

```
$(function () {
    $('img').hover(function (event) {
        log('entered at: ' + $(this).getMouseSide(event))
    }, function (event) {
        log('left at: ' + $(this).getMouseSide(event) + '<br><br>')
    })

    $.fn.getMouseSide = function (event) {
        function distanceMetric(x, y, x2, y2) {
            return Math.pow(x - x2, 2) + Math.pow(y - y2, 2)
        }

        function closestEdge(x, y, w, h) {
            var edgeDistance = {
                top:        distanceMetric(x, y, w / 2  , 0)
                , bottom:   distanceMetric(x, y, w / 2  , h)
                , left:     distanceMetric(x, y, 0      , h / 2)
                , right:    distanceMetric(x, y, w      , h / 2)
            }
            , edgeDistances = $.map(edgeDistance, function (value) {
                return [value]
            })

            return Object.keys(edgeDistance)[
                $.inArray(
                    Math.min.apply(null, edgeDistances)
                    , edgeDistances
                )
            ]
        }

        var current = $(this)
        , elementOffset = current.offset()

        return closestEdge(
            event.pageX - elementOffset.left
            , event.pageY - elementOffset.top
            , current.width()
            , current.height()
        )
    }
})

function log(message) {
    $('#console').append('<pre>' + message + '</pre>')
} 
```

# oracle - oracle 在创建唯一索引时是否忽略 order by 子句

> ID：15020401
> 
> 赞同：0
> 
> 时间：2013-02-22T09:05:45.120
> 
> 标签：oracle

oracle 在创建唯一索引时是否忽略 order by 子句意味着使用 ASC 创建的索引与使用 DESC 创建的索引相同。Oracle 根本不使用该设置。Oracle 索引与排序顺序无关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T04:49:46.327

单列上的 ASC 或 DESC 索引之间没有实际区别 - 这就是为什么在创建索引时通常根本不使用此选项的原因。

但是，当索引超过两列或更多列时存在很大差异 -`(col1 ASC, col2 ASC)`将导致索引的排序与`(col1 ASC, col2 DESC)`. 在运行对这两列进行排序的查询时可能会遇到差异 - 排序的查询`col1, col2`可能会在第一个索引存在的情况下避免排序操作，但可能不会在第二个索引上进行。

# bash - 每 2 个字节添加符号

> ID：15020410
> 
> 赞同：2
> 
> 时间：2013-02-22T09:06:02.487
> 
> 标签：bash, sed

我有一个字符串`20000024ff3dbf50`，我想将其转换为：`20:00:00:24:ff:3d:bf:50`，我尝试过`sed`：

`echo 20000024ff3dbf50 | sed 's/\(..\)\(..\)\(..\)\(..\)\(..\)\(..\)\(..\)\(..\)/\1:\2:\3:\4:\5:\6:\7:\8/'`

但它有点难看。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T09:10:48.597

两个换人：

```
echo "20000024ff3dbf50" | sed 's/../&:/g;s/.$//' 
```

结果：

```
20:00:00:24:ff:3d:bf:50 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T09:16:40.040

```
echo 20000024ff3dbf50 | grep -o .. | paste -d ':' -s - 
```

带有 -o 的 Grep 将输入拆分为每行 2 个字符；paste 使用分隔符 ':' 来填充它们 [-s]erial

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T09:26:28.693

您还可以为此使用 GNU awk 自动拆分：

```
echo 20000024ff3dbf50 | awk '$1=$1' FPAT=.. OFS=: 
```

输出：

```
20:00:00:24:ff:3d:bf:50 
```

# javascript - 通过 URL 传递参数

> ID：15020413
> 
> 赞同：3
> 
> 时间：2013-02-22T09:06:39.233
> 
> 标签：javascript, html, asp.net-mvc

我正在使用 asp.net MVC 3.0。我想用 URL 传递参数。有用。但如果我的参数值像 shahin & karina。然后它算作两个值，因为 &。我想把 & 作为一个 vlue。我怎样才能做到这一点。拜托，任何人都解决了这种问题。

例如：我的控制器功能是：

```
public ActionResult Index(string name)
{} 
```

html代码

```
<a href="/stat?name=shahin & karina"> 
```

形成控制器我只有名称值是：shahin 但我需要名称值是：shahin & karina

提前谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T09:12:02.003

我相信您需要做的就是对 & 符号（可能还有空格字符）进行 URL 编码。

尝试这样的事情 -

```
<a href="/stat?name=shahin%20%26%20karina"> 
```

*   `%20`是一个编码的空格字符。
*   `%26`- 是编码的 & 字符。

我对这方面的知识或经验绝对为零，`asp.net`但我相当确定有本机 URL 编码功能......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T09:13:22.523

您需要对 URL 进行编码。.NET 中肯定有一个库。

类似工具： http: [//meyerweb.com/eric/tools/dencoder/](http://meyerweb.com/eric/tools/dencoder/)

干杯

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T09:14:42.893

您必须将“&”编码为 HTML 实体。

```
<a href="/stat?name=shahin%20%26%20karina" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T09:13:23.773

尝试将html代码重写为：

```
<a href="/stat?shahin%20%26%20karina" /> 
```

`%20`是 url 编码的空格，`%26`是 url 编码的 & 符号

您可以使用[此工具](http://meyerweb.com/eric/tools/dencoder/)尝试编码不同的字符串（在此示例中，您将编码“shahin & karina”）

# c++ - Qt Creator 的智能感知认为 min 和 max 已定义，即使它们没有

> ID：15020415
> 
> 赞同：3
> 
> 时间：2013-02-22T09:06:43.597
> 
> 标签：c++, qt, c-preprocessor, qt-creator

在我的代码中，我有

```
#define NOMINMAX
#include <windows.h> 
```

但是每当我使用`std::max`或`std::min`智能感知**用 red 下划线时**，即使编译器没有抱怨它。如果我将代码更改为

```
#define NOMINMAX
#include <windows.h>

// make sure they min/max weren't defined
#if defined(min) || defined(max)
#error "min or max were defined"
#endif

// but intellisense still thinks they were, 
// so this is needed
#undef min
#undef max 
```

问题消失了。但是定义`NOMINMAX`阻止`windows.h`了定义最小值/最大值，那么为什么智能感知认为它们已定义，即使它们没有定义？而且我已经检查过，我添加的预处理器错误从未被击中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T09:34:46.690

实际上，我没有卸载它。如果我添加它有助于整理索引器`DEFINES+=NOMINMAX`

...然后关闭并重新打开项目。尽管 QtCreator 在每次更改 .pro 文件后都告诉“解析”，但我没有立即看到效果。看起来如果你重新打开项目它会更好地“解析”

我的 QtCreator 版本是 2.6.1，我使用 Qt5.0.0

# python - 在 Python 中一致地格式化数字

> ID：15020417
> 
> 赞同：5
> 
> 时间：2013-02-22T09:06:51.863
> 
> 标签：python, numpy, matplotlib, string-formatting

我有一系列数字：

```
from numpy import r_
r_[10**(-9), 10**(-3), 3*10**(-3), 6*10**(-3), 9*10**(-3), 1.5*10**(-2)] 
```

我想让它们以如下形式显示在情节的图例中：

```
a 10^(b) 
```

（带`^`意义上标）

这样第三个数字就变成了`3 10^(-3)`。

我知道我必须为此使用 Python 的字符串格式化运算符`%`，但我看不到这样做的方法。有人可以告诉我如何（或告诉我另一种方式）吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T09:16:41.847

如果您确定小数点后不需要超过固定位数，则：

```
>>> from numpy import r_
>>> a = r_[10**(-9), 10**(-3), 3*10**(-3), 6*10**(-3), 9*10**(-3), 1.5*10**(-2)]
>>> for x in a: print "%.1e"%x
... 
1.0e-09
1.0e-03
3.0e-03
6.0e-03
9.0e-03
1.5e-02 
```

这里要注意的是，如果您将其`%.0e`用作格式，最后一个数字将打印为`1e-2`

**编辑**：既然您使用的是`matplotlib`，那么情况就不同了：您可以使用 TeX 渲染引擎。一个快速而肮脏的例子：

```
fig = plt.figure()
ax = fig.add_subplot(111)

x = 1.5*10**(-2)
l = ("%.0e"%x).split("e")
x_str = r"$ %s \times 10^{%s}$" % (l[0], l[1] )

ax.set_title(x_str)

plt.show() 
```

`.format`使用新的字符串格式确实会更干净一些。

**EDIT2**：只是为了完整性和将来的参考，这是我从评论中对 OP 的看法：

```
x = 1.5*10**(-2)
l = ("%.0e"%x).split("e")
x_str = r"$%s \times 10^{%s}$" % ( l[0], str(int(l[1])) ) 
```

在这里，我将转换为 int 并返回以避免前导零：`-02`->`-2`等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T09:28:38.910

```
list_item = (multiply_number,degree_number)
displayed_items = [list_item, list_item, ....]
for item in displayed_items:
   print '{0}*10^({1})'.format(*item) 
```

创建带有要显示的编号的元组列表。只需使用 format() 输出它们。不要忘记使用 *（这用于使用元组中的每个项目）。

# bash - 使用 bash 搜索另一个文件中的每一行

> ID：15020421
> 
> 赞同：0
> 
> 时间：2013-02-22T09:07:07.477
> 
> 标签：bash

我有两个文本文件[带有行的原始文件和带有关键字的字典文件]。在原始文件中搜索字典文件中的每个单词，如果有匹配项，则在原始文件中匹配行旁边打印字典单词。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T09:14:43.660

您可以使用该选项告诉`grep`从文件中读取模式。`-f`您还可以使用该`-w`选项仅搜索单词。

```
grep -wf dictionary.txt rawfile.txt 
```

# maven - 在 Doxygen 中包含 POM 版本？

> ID：15020422
> 
> 赞同：2
> 
> 时间：2013-02-22T09:07:15.457
> 
> 标签：maven, doxygen, pom.xml

我使用 Doxygen 来记录我的项目。我的项目使用 Maven，因此包含一个带有版本的 POM 文件。

是否可以在 Doxygen 中将此版本号重用为 PROJECT_NUMBER？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T09:27:57.473

Maven 具有过滤文件和用实际值替换 Maven 属性的能力。如果你的 doxygen 配置文件在你的`src/main/resources/...`路径中，你可以简单地添加：

```
<project>
  <build>
    <resources>
      <resource>
        <directory>src/main/resources</directory>
        <filtering>true</filtering>
      </resource>
    </resources>
  </build>
</project> 
```

然后你可以`${project.version}`在你的 doxygen 文件中引用它，它将被版本号替换。

# cocoa - 当 TextField 成为第一响应者时，`controlTextDidEndEditing` 会被触发

> ID：15020426
> 
> 赞同：0
> 
> 时间：2013-02-22T09:07:29.443
> 
> 标签：cocoa, nstextfield, first-responder

我试图`NSTextField`通过实现`NSTextFieldDelegate`'`controlTextDidEndEditing:`方法来检测用户何时完成编辑 a 。然而问题是，在最初制作`NSTextField`窗口的第一响应者时，`controlTextDidEndEditing:`通知会立即被触发。我在一个非常简单的测试应用程序中尝试了这个并确认了结果。真的很感激一些关于为什么会这样以及如何检测 textField 何时失去焦点的指示。

![在此处输入图像描述](../Images/eb3587f6a3d8d12085e3734f3d1c5653.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:46:23.783

由于文本字段是第一个响应者，因此 selectText: 消息也会发送到 textField，这将导致它结束编辑。如果您不希望此行为将 NO 设置为 textField 的可选属性。

```
- (void)selectText:(id)sender; 
```

如果可以选择，则结束编辑并选择接收器的全部内容。

# haskell - 使用 Rank2Types 代替 RankNTypes 有什么优势吗？

> ID：15020428
> 
> 赞同：29
> 
> 时间：2013-02-22T09:07:35.227
> 
> 标签：haskell, ghc, type-inference, higher-rank-types

据我所知，可判定的类型检查算法（仅）存在于 rank-2 类型。GHC 是否以某种方式使用了这个事实，它有什么实际意义吗？

是否还有 rank-2 类型的主要类型的概念，以及类型推断算法？如果是，GHC 是否使用它？

*与 rank- n*类型相比，rank-2 类型还有其他优势吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-22T09:28:25.243

原则上，类型检查可确定为等级 2 类型。但是，这永远不会包含在 GHC 中（过于复杂，不能与类型系统的其他功能很好地混合）。所以不行。Rank2Types 已被弃用（好吧，它不会给你警告，但确实如此）所以使用 RankNTypes。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-02-22T09:16:12.803

`Rank2Types`是的[同义词](http://www.mail-archive.com/cvs-ghc@haskell.org/msg43050.html)。`RankNTypes`所以*现在*rank-2 没有 rank-n 的优势。

# asp.net-mvc - 使用 TempData 在 MVC 中显示消息

> ID：15020430
> 
> 赞同：0
> 
> 时间：2013-02-22T09:07:41.450
> 
> 标签：asp.net-mvc, razor

我想在 asp.net mvc 中显示一条消息。为此，我创建了一个局部视图。此局部视图的名称是 _feedback。在此部分视图的正文中，我编写了此代码。

```
@model MyProject.SharedTools.OperationStatus

@if (Model != null)
{
    if (Model.IsSuccess)
    {
        @:Model.Message;
    }
    else
    {
        @:Model.Message;
    }
} 
```

我把这段代码放在 _layout 文件中：

```
@Html.Partial("_feedback") 
```

当我想查看来自控制器的消息时，使用以下代码：

```
 operationStatus = _provinceRepository.Save();
 if (operationStatus.IsSuccess)
 {
     TempData["OperationStatus"] = operationStatus;
     return RedirectToAction("Index");
 } 
```

但我给出了这个错误：

**传入字典的模型项的类型为“MyProject.Models.ProvinceModel”，但此字典需要“MyProject.SharedTools.OperationStatus”类型的模型项。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T09:15:01.083

确保您通过了您的部分期望的正确模型：

```
@Html.Partial("_feedback", Model.SomePropertyOfTypeOperationStatus) 
```

如果您没有将模型指定为`Html.Partial`辅助函数的第二个参数，那么它将自动传递当前视图的模型（在您的情况下是 type `MyProject.Models.ProvinceModel`），这就是您收到错误的原因：您的部分需要一个 type 的模型`MyProject.SharedTools.OperationStatus`.

此外，还不清楚您在哪里使用存储在局部控制器中的 TempData 值。也许它应该是这样的：

```
@model MyProject.SharedTools.OperationStatus

@if (Model != null)
{
    @TempData["OperationStatus"]
} 
```

或者您不是只想在不使用模型的情况下直接显示存储在 TempData 中的值吗？

```
@TempData["OperationStatus"] 
```

# java - Intellij IDEA 未检测到更改

> ID：15020432
> 
> 赞同：13
> 
> 时间：2013-02-22T09:07:43.203
> 
> 标签：java, intellij-idea

昨天我重构了我的项目并更改了包的布局（我将一些包移动到另一个包中，创建了新包等）。但是现在，当我尝试运行 JUnit 测试时，我会`NoSuchMethodError`使用重构后更改名称的方法。此外，当我更改方法中的其他代码时，IDEA 仍在运行旧代码。我尝试在文件菜单中运行“无效缓存”，也尝试重新启动计算机 - 没有结果。哪里可能有问题？

编辑：昨天移动包后，IDEA 没有正确更改`.java`文件中的包声明，所以我手动更改了它们

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-10-08T15:14:29.910

当 Intellij 突然停止注意到更改时，VCS -> Refresh File Status 为我解决了这个问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-22T10:28:40.607

**解决方案：**

错误在两件事之后神奇地消失了：

1.  我将此项目导入 Eclipse 并从 Eclipse 运行 JUNit 测试。然后我返回 IDEA 并删除了所有 Eclipse 特定文件。

2.  我同步了我的项目（文件->同步）。

我不知道问题的实际解决方案是什么，但对于我接受@SeanLandsman 的回答的建议

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-10-04T12:11:30.430

我为了解决这个问题所做的是“无效并重新启动”：

[![在此处输入图像描述](../Images/5e874c4ea0a3102336c44bdac746af5c.png)](https://i.stack.imgur.com/QsRP1.png)

文件 -> 无效并重新启动

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-02-19T22:37:47.417

回答一个老问题，但是：

如果您使用的是运行配置，请确保在“运行/调试配置”对话框的“启动前”部分中添加了“构建”。即使您在默认设置中添加了它，有时它似乎也会从此对话框中删除。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-22T10:12:44.220

我有两个建议你可以在这里试试

*   编辑您的测试配置并确保它们指向您所期望的。我有时会看到在运行配置中没有进行重构，我不得不手动更改它
*   不太可能工作，但尝试同步您的项目：文件->同步。在项目的最高级别执行此操作

关于您的编辑-我自己还没有看到。每当我重命名或移动文件（包括包）时，这些更改已正确应用于所有适用的文件。您是否使用 Refactor>Move / Refactor->Copy 进行重构？

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-11-26T07:38:35.993

删除对我有用的类目录的全部内容

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-09-21T13:24:48.463

另一个根本原因可能是：

如果您使用的是 Lombok，请尝试卸载/重新安装 Intellij Lombok 插件。

就我而言，这解决了这种奇怪的行为！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-12-20T10:34:02.497

尝试删除抛出 nosuchmethod 错误的类的 .class 文件，然后重新编译。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-01-22T10:51:51.073

这对我有用。

在 IntelliJ IDEA 中，

1.  右键单击项目。
2.  选择 Git -> 显示历史记录。
3.  打开“版本控制”

然后您可以导航到本地更改选项卡。

# android - 将应用推送到 /system/app/ 并上传 .so 库

> ID：15020434
> 
> 赞同：0
> 
> 时间：2013-02-22T09:07:46.637
> 
> 标签：android

我的应用程序中有一个 .so 库。如果正常安装到/data/app，在/data/data/对应的包目录中会出现/lib/*.so文件正常，可以上传和运行。

但是如果我把应用push到/system/app/，这个库就不能出现在/data/data/对应的包目录下。我手动移动库并重新启动，库文件消失了。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T20:37:44.943

将你的so文件放在/system/lib中

# nhibernate - 如何将会话作为 NHibernate 中的工作单元进行管理？

> ID：15020439
> 
> 赞同：4
> 
> 时间：2013-02-22T09:08:01.407
> 
> 标签：nhibernate, unit-of-work

在 Winforms 和 WPF 中使用 NHibernate 几年之后，我似乎仍然错过了一个非常重要的点，当我运行这段代码片段时，这一点变得太明显了：

```
 ISessionFactory sf = Fluently.Configure()
                              .Database(MsSqlConfiguration.MsSql2008
                                .ConnectionString(c => c.Is(connectionString)))
                              .Mappings(x => x.FluentMappings
                                .AddFromAssemblyOf<MyClass>())
                              .BuildSessionFactory();

 for (int i = 0; i < 100; i++)
 {
     new Task(()=>
     {
         Console.WriteLine("{0}, {1}",
           i, 
           sf.OpenSession().QueryOver<MyClass>().List().Count);
     }).Start();
 } 
```

我猜这会造成很大的负担。

老实说，我记得读过的关于会话处理的唯一内容是：实现工作单元，它声明了原子会话。所以，[看看模式](http://martinfowler.com/eaaCatalog/unitOfWork.html)，我有一些顾虑/问题。

*   延迟加载如何适合图片？如果我使用一个会话加载我的数据，然后关闭它，延迟加载将不起作用。因此，基本上，工作单元不能关闭/处置 Session，这意味着它是无限大的。

*   会话具有诸如`IsDirty`. 如果加载和保存对象是由单独的会话完成的，那么这还能如何使用呢？

**编辑：奥伦·艾尼（Oren Eini）在他的早期**[文章](http://msdn.microsoft.com/en-us/magazine/ee819139.aspx)中已经说过与成为问题相同的事情。在那里，他说 MicroManaging（=> use 和 immediate `Dispose`）切断了 NH 功能，如 LazyLoading 和 ChangeTracking。不过，在我看来，UnitOfWork 是一种会话微管理模式。那么，最干净的解决方案是什么？自己跟踪更改并使用 MicroManagement？单片会话（= Memleak 设计）？如果与 Oren 的示例不同，您没有很多可以限制会话生命周期的子对话框怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T09:41:08.020

> 延迟加载如何适合图片？

延迟加载适合一个会话的图片。加载对象后，延迟加载允许遍历对象的图，而无需知道是否已经从数据库加载了对象属性，也无需急切地加载所有对象图。

看起来很完美，但也有一些问题，比如“n+1 select”

> 如果我使用一个会话加载我的数据，然后关闭它，延迟加载将不起作用。

另一个会话，从 db 加载相同的对象，将不会受益于上一个会话中延迟加载的属性。

> 因此，基本上，工作单元不能关闭/处置 Session，这意味着它是无限大的。

我不确定我是否理解这一点。我猜会话是工作单元。

> 会话具有 IsDirty 等功能。如果加载和保存对象是由单独的会话完成的，那么这还能如何使用呢？

加载和保存不应在单独的会话中完成。我想这是 IsDirty 属性的重点。

这可能会给你很多关于 NH 处理的提示：[https ://softwareengineering.stackexchange.com/q/100534](https://softwareengineering.stackexchange.com/q/100534)

希望这会有所帮助

编辑：关于你的第二个问题。通常的网络场景如下：

1.  打开 NH 会话
2.  加载一个 NH 实体
3.  在 POCO 中传输 NH 实体属性以在 UI 中显示（当然要跟踪 Id）
4.  关闭 NH 会话
5.  稍后（用户进行了一些更改并点击“保存”按钮），打开 NH 会话
6.  加载相应的 NH 实体（通过其 Id）
7.  根据新的 POCO 字段更新 NH 实体
8.  持久化数据库中的更改
9.  关闭 NH 会话

1,2 和 4 是第一个工作单元的一部分。5、6、7、8 和 9 是第二个工作单元的一部分。

# eclipse - m2e 无法从 nexus 传输元数据，但 maven 命令行可以

> ID：15020441
> 
> 赞同：1
> 
> 时间：2013-02-22T09:08:09.917
> 
> 标签：eclipse, maven, nexus, m2e

我正在使用nexus 来托管我的maven 存储库，并且maven 命令行（win32 和linux）可以使用相同的命令和相同的setting.xml 成功地从这个nexus 传输工件。但是m2e会失败如下：

```
[WARNING] Could not transfer metadata m3-app:m3:1.0-SNAPSHOT/maven-metadata.xml from/to Nexus (http://1.2.3.4:8080/nexus/content/groups/public): Failed to create a selector. to http://1.2.3.4:8080/nexus/content/groups/public/m3-app/m3/1.0-SNAPSHOT/maven-metadata.xml
[WARNING] Failure to transfer m3-app:m3:1.0-SNAPSHOT/maven-metadata.xml from http://1.2.3.4:8080/nexus/content/groups/public was cached in the local repository, resolution will not be reattempted until the update interval of Nexus has elapsed or updates are forced. Original error: Could not transfer metadata m3-app:m3:1.0-SNAPSHOT/maven-metadata.xml from/to Nexus (http://1.2.3.4:8080/nexus/content/groups/public): Failed to create a selector. to http://1.2.3.4:8080/nexus/content/groups/public/m3-app/m3/1.0-SNAPSHOT/maven-metadata.xml 
```

我已经测试了服务器，而 eclipse 无法抓取工件，我的浏览器可以成功获取元数据 xml。m2e有问题吗？

更新：我的项目包括大约 35 个 jar，前几个 jar 会成功，后来会失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:41:53.350

找到的解决方案：禁用 Avira Web 防护，一切看起来都很好，在 eclipse 中运行就像在命令行中运行一样。考虑更换另一种防病毒解决方案...

# sql - TYPO3 版本 6.0 从 CSV 或 DB 查询导入

> ID：15020444
> 
> 赞同：0
> 
> 时间：2013-02-22T09:08:21.267
> 
> 标签：sql, csv, import, typo3

我有一个 CSV 文件，其中包含这些列 - 时间戳、作者、标题和内容。现在我想将此 CSV 导入 TYPO3，以便显示包含这些属性的帖子列表。

如果以上不可行，有没有办法编写手动 SQL 查询，以便我可以手动将内容插入 TYPO3 ？

我尝试了许多用于导入 CSV-wil_import、rs_impory、外部导入的扩展......但它们都不起作用！

在下图中，我安装了 wil_import，但它没有显示任何内容。我是否需要在其他任何地方进行任何更改，例如配置或其他内容？

![在此处输入图像描述](../Images/2e665375fe9a695f81e9d5b1050fa2fc.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T13:09:39.417

我曾经遇到过同样的问题，多亏了 Francois Suter（核心团队成员）的扩展：[svconnector](http://typo3.org/extensions/repository/view/svconnector)和[svconnector_csv](http://typo3.org/extensions/repository/view/svconnector_csv) ，我的一天得以保存。所以，我真的可以推荐他们

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T09:39:10.810

您可以使用 phpmyadmin 的 CSV 导入功能。它工作可靠。

# linq - 选择嵌套列表

> ID：15020450
> 
> 赞同：1
> 
> 时间：2013-02-22T09:08:39.347
> 
> 标签：linq, entity-framework, select

我在 DB 中有三个表，如下所示：

**产品**

```
+----+------+
| id | name |
+----+------+
| 1  | prod1|
+----+------+ 
```

**价值观**

```
+----+---------+---------+
| id | value   |  alias  | 
+----+---------+---------+
| 1  |  10 g   |  10m    |
+----+---------+---------+ 
```

**产品值**

```
+---------------+---------+
|  product_id   | value_id| 
+---------------+---------+
|      1        |  1      | 
+---------------+---------+ 
```

如何从 DB 中选择所有具有任何价值的产品`List<Values.alias>`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T09:10:40.633

```
List<decimal> aliases = ...
var query = db.Products.Where(p => p.Values.Any(v => aliases.Contains(v.Alias))); 
```

或者（如果您没有导航属性）

```
var query = from p in db.Products
            join pv in db.ProductsValues on p.ProductId equals v.ProductId
            join v in db.Values on pv.ValueId equals v.ValueId into values    
            where values.Any(v => aliases.Contains(v.Alias))
            select p 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T09:27:20.290

如果您使用的是 EF（数据库优先），则该表`prdoucts_values`不是概念模型的一部分。

相反，EF 为您提供了从`Products`to的直接路径`Values` 因此您可以编写如下所示的查询：

```
var lst = new List<Products>();
lst = db.Products.Where(c => c.Values.Any()).ToList(); 
```

# mysql - 具有多个标志的表

> ID：15020454
> 
> 赞同：0
> 
> 时间：2013-02-22T09:08:52.497
> 
> 标签：mysql, database, database-design

我在下面有一个示例表：

```
+-------------------------------------------------------------------+
| id | name | flag1 | flag2 | flag3 | flag4 | flag5 | flag6 | flag7 |
+-------------------------------------------------------------------+
| 1  | fred | 1     | 0     | 1     | 1     | 1     | 1     | 1     |
+-------------------------------------------------------------------+ 
```

我想知道，这是检索这些数据的最有效和最简单的方法吗？

我目前正在研究具有一些[标志属性](https://stackoverflow.com/questions/8447/enum-flags-attribute)逻辑的[​​ Enum 。](http://msdn.microsoft.com/en-us/library/sbbt4032%28v=vs.80%29.aspx)

在这种情况下，如果：

```
flag1 = 1
flag2 = 2
flag3 = 4
and so on.. 
```

我将使用此设计创建一个表，然后添加另一个表以查找这些值：

```
+------------------+
| id | name | flag |
+------------------+
| 1  | fred | 125  |
+------------------+ 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T09:37:09.240

您可以通过使用二进制函数来获取/设置不同的位，将所有标志存储在一个整数字段中。请参阅： [MySql 位函数](http://dev.mysql.com/doc/refman/5.6/en/bit-functions.html)

该页面上有一些关于此用例的评论。最新的是一个很好的例子，展示了一个典型的 SQL 来读取标志：

```
选择
SUM(IF(rubrik & 1, 1, 0)) 动作，
SUM(IF(rubrik & 2, 1, 0)) 购物，
SUM(IF(rubrik & 4, 1, 0)) 实用程序，
SUM(IF(rubrik & 8, 1, 0)) 通信，
SUM(IF(rubrik & 16, 1, 0)) 服务，
COUNT(user_id) AS 总数，
FROM 偏好 p

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T14:08:57.630

> 我想知道，这是检索这些数据的最有效和最简单的方法吗？

取决于^(tm) ;)

你总是有 7 个标志吗？

1.  如果是，则将它们存储在同一行中是合适的。
2.  如果不是，则将标志移动到与“主”表具有 N:1 关系的单独表中。这将使您能够轻松地改变标志的数量，而无需向表中添加更多列。

对于上面的（1），你需要找到单独的标志吗？

*   如果是，请将它们保存在单独的字段中，以便您可以单独索引它们。但请注意，只有当索引具有足够的选择性时，索引才有用。
*   [如果不是，您可以尝试通过将标志编码](http://dev.mysql.com/doc/refman/5.0/en/bit-functions.html)为单个整数字段中的位来节省一些存储空间（更重要的是，提高缓存效率） 。除非您使用的是非常旧的 MySQL 版本，否则请考虑使用[BIT(M)](http://dev.mysql.com/doc/refman/5.0/en/bit-type.html)。来自[文档](http://dev.mysql.com/doc/refman/5.0/en/numeric-type-overview.html)的引用：

    *“这种数据类型是在 MySQL 5.0.3 中为 MyISAM 添加的，并在 5.0.5 中扩展到 MEMORY、InnoDB、BDB 和 NDBCLUSTER。在 5.0.3 之前，BIT 是 TINYINT(1) 的同义词”*

# unity3d - 通过使用 c# 统一施加力来实现刚体的椭圆运动（如在鲸鱼足迹游戏中）？

> ID：15020455
> 
> 赞同：0
> 
> 时间：2013-02-22T09:08:59.060
> 
> 标签：unity3d, game-physics

我想像玩家运动“鲸鱼踪迹”游戏一样以椭圆运动移动刚体。我所做的是：

1.  使用 scale(1.5,0.5,0.1) 创建了一个名为“Player”的立方体
2.  创建了另一个名为`Point`scale(0.1,0.1,0.1) 的小立方体，其位置与 x 相同，`Player`但多 0.5 （因此现在玩家看起来像一个 2D 矩形，其上的一个点位于矩形中心的右侧）。
3.  然后我在两个身体之间创建了一个固定关节
4.  现在我在Point位置的玩家上申请如下，

    ```
    float mfAngle = 0.0f;
    void update()
    {
        mfAngle=transform.eulerAngles.z;
    mfAngle=mfAngle%360;

    if(mfAngle>=0 && mfAngle<90)
    {
        mfXforce=-0.1f;
    mfYforce=0.1f;
    }
    if(mfAngle>=90 && mfAngle<180)
    {
        mfXforce=-0.1f;
    mfYforce=0.1f;
        }
    if(mfAngle>=180 && mfAngle<270)
    {
    mfXforce=-0.1f;
    mfYforce=-0.1f;
    }
    if(mfAngle>=270 && mfAngle<360)
    {
    mfXforce=0.1f;
    mfYforce=-0.1f;
    }

    Debug.Log("Angle ="+mfAngle+"X = "+mfXforce+"Y = "+mfYforce);

    Vector3 pointPos=_goPointObject.transform.position;
    transform.rigidbody.AddForceAtPosition(new Vector3(mfXforce,mfYforce,0),pointPos);
    } 
    ```

但它不能正常工作。我只是向上移动，然后转向不同方向移动。如果有人知道如何通过施加力以椭圆运动移动刚体，请给我一个解决方案。（我想像鲸鱼一样使用它追踪游戏你可以在这个[http://www.youtube.com/watch?v=wwr6c2Ws1yI](http://www.youtube.com/watch?v=wwr6c2Ws1yI)视频中看到“循环运动”的视频。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T04:50:56.033

我自己找到了解决方案。要实现椭圆运动，您必须创建两个实体并通过将它们水平放置在彼此旁边将它们与关节连接。然后您必须不断地在 x 方向和 Y 方向上施加力，仅当屏幕被触摸在第一个身体上。

并且在向上移动时降低 X 速度很重要，然后你会得到椭圆旋转。

这对我来说可以。

谢谢， 阿肖库玛 M

# global-variables - Fortran 中受保护的全局变量

> ID：15020460
> 
> 赞同：7
> 
> 时间：2013-02-22T09:09:13.423
> 
> 标签：global-variables, fortran, protected

我想知道在 Fortran 中是否有一种方法可以使用全局变量，可以将其描述为某种“受保护”。我正在考虑一个包含变量列表的模块 A。使用 A 的每个其他模块或子例程都可以使用它的变量。如果你知道变量的值是什么，你可以使用参数来实现它不能被覆盖。但是，如果您必须首先运行代码来确定变量值怎么办？您无法将其声明为参数，因为您需要更改它。有没有办法在运行时的特定点做类似的事情？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-22T09:23:29.853

您可以`PROTECTED`在模块中使用该属性。它是随 Fortran 2003 标准引入的。模块中的过程可以更改受保护的对象，但不能更改模块中的过程或使用您的模块的程序。

例子：

```
module m_test
    integer, protected :: a
    contains
        subroutine init(val)
            integer val            
            a = val
        end subroutine
end module m_test

program test
    use m_test

    call init(5)
    print *, a
    ! if you uncomment these lines, the compiler should flag an error
    !a = 10
    !print *, a
    call init(10)
    print *, a
end program 
```

# android - Android 锁定屏幕方向并保持 onCreate() 不变

> ID：15020471
> 
> 赞同：0
> 
> 时间：2013-02-22T09:10:06.927
> 
> 标签：android, screen

我在初始化时在 onCreate() 中运行一些东西。

如果用户旋转屏幕，它会调用 onCreate()。

我想禁用屏幕旋转并让 onCreate() 仅在初始初始化时运行。

将 android:screenOrientation="portrait" 添加到清单中是否足够，或者 onCreate() 是否仍会运行？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T09:11:54.477

如果您放入`android:screenOrientation="portrait"`清单，则电话不会处理方向更改并且`onCreate()`不会再次被调用。所以：是的，这就足够了！

如果您在 onCreate() 中设置了 Debug-Marker 然后旋转手机，您可以轻松检查它！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T09:12:19.653

如果您按住`Activity`in`Portrait`或 in `Landscape`，旋转将不再发生。所以`onCreate()`虽然你会尝试旋转你的设备，但它会一直运行到最后

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T09:13:16.287

在您的清单中添加：

```
 android:configChanges="orientation"
 android:screenOrientation="portrait" 
```

# xpath - 使用简单的 HTML DOM 获取当前元素

> ID：15020473
> 
> 赞同：0
> 
> 时间：2013-02-22T09:10:18.917
> 
> 标签：xpath, simple-html-dom

我正在尝试使用简单的 HTML DOM 通过 XPath 查找对象。
它工作得很好，但我似乎无法获得当前元素：

```
$object->find('.');
$object->find('..');
$object->find('//'); 
```

都返回一个空数组

```
$object->innertext 
```

返回带有 HTML 的普通表，因此该对象是有效的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T14:45:04.970

简单的 HTML DOM 无法识别 '.' 对于获取当前元素，
其实就是使用Regex 使用XPath 来查找元素。
为了解决这个问题，我使用[了 DOMXPath](http://php.net/manual/en/class.domxpath.php)而不是 Simple HTML DOM，
它有更多的选项和功能。

# ios - 应用内购买...我可以这样做吗？

> ID：15020484
> 
> 赞同：0
> 
> 时间：2013-02-22T09:11:07.607
> 
> 标签：ios, in-app-purchase, subscription

我正在构建一个应用程序，它将为用户提供他们当地（基于位置）生产绿色/可持续产品的公司的不断发展的目录。我希望公司能够通过使用应用内购买购买订阅来将自己添加到应用中。这将是 1 年的订阅。

请阅读 iOS 标准协议中的内容： 2.3 内容和服务可以通过应用内购买 API 在订阅的基础上提供（例如，订阅报纸和杂志）。不允许通过应用内购买 API 出租内容、服务或功能（例如，特定内容的使用可能不限于预先确定的有限时间段）。

如果服务只有一年，这是否会阻止我做上述事情？有人对此有任何见解吗？非常感谢您的意见 - 我无法从 Apple 获得任何信息。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T09:14:28.280

我的猜测是你不允许这样做。因为你真的不能限制谁订阅一年——它可能是任何用户——你可能不能提供这个。IAP 不向用户提供除列表之外的任何内容或服务。由于您可能需要外部数据源（例如 Web 应用程序），我建议您将订阅移到那里。这只是我的意见，我不是律师，所以我在这里可能完全错了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T10:00:10.990

你能行的。见下图。你只需要选择正确的选项。
您可以在应用程序详细信息部分找到它 itunesConnect。
对于您的情况，我建议 Consumable 是合适的，并且必须检查自上次购买杂志以来是否已有一年，或者您的情况是什么。 ![在此处输入图像描述](../Images/a734835a1c850a0be13f608b82483beb.png)

# php - Symfony 2.0 会话间通信

> ID：15020488
> 
> 赞同：0
> 
> 时间：2013-02-22T09:11:22.977
> 
> 标签：php, session, post, symfony, communication

如何让一个会话刷新另一个会话？假设我们有智能手机、服务器和笔记本电脑。笔记本电脑与服务器有当前会话，然后智能手机向服务器执行 HTTP POST，现在我们希望此事件触发笔记本电脑会话的刷新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:14:12.657

您的问题不太清楚您的问题的具体情况，但假设您在手机和笔记本电脑上以用户 X 的身份登录（并且您的用户实体有一个获取每次更新时间戳的字段，例如：updated_at），以及手机例如，更改用户地址，您可以使用 ajax 通过执行以下操作在笔记本电脑上获取该事件：

```
class SomeController extends Controller {
      //...
      /**
        * checks if entity was updated since
        *
        * @Route("/check/{id}/{tstamp}", name="entity_check")
        * @Template()
        */
        public function checkAction($id, $tstamp) {
           //check if anything updated by comparing entity's updated_at against $tstamp
           //...
           //as the user locale may differ from server's, send back the timestamp too
           $data['last_update'] = time();
           return new Response(json_encode($data));
        }
} 
```

和树枝文件的javascript：

```
<script>
var last_check = {{ "now"|date("t") }};
setInterval(function() { 
             $.ajax( "{{ url('route_to_your_check_action', {'id': entity.id, 'last_check':''}) }}/" + last_check )
             .done(function(data) { 
                         var info = $.parseJSON(data);
                         last_check = info.last_update;
                         //if anything changed refresh on user side 
                   })
             .fail(function() { //on error do something if needed 
                   });
           }
           , 12000); // make this call every 12 seconds
</script> 
```

希望能帮助到你。

# php - 如果零后为空，为什么选择选项值

> ID：15020495
> 
> 赞同：0
> 
> 时间：2013-02-22T09:11:54.203
> 
> 标签：php, mysql, select, return-value

我很抱歉英语不好。我有一个选择菜单选项值问题：

```
<select>
   <option value=0>element1</option>
   <option value=1>element2</option> 
</select> 
```

我是如果选择`value="0"`选项和这篇文章，它会毫无问题地重新调整值。但是，当我使用`value = 0`保存 mysql 表时，这个值不是 0，这个返回空。这个值保存列类型整数？什么是问题？

我没有使用`mysql_real_escape_string`或任何过滤器。如果选择`value="1"`选项没有问题，则保存成功。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T09:13:08.797

你错过了引号（“）

```
<select name="my_select">
   <option value="0">element1</option>
   <option value="1">element2</option> 
</select> 

<?php 
$my_select_value = $_POST["my_select"];
echo $my_select_value; 
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-29T22:20:43.700

我自己遇到了这个问题，我发现当发布选项/选择框值并使用 PHP 读取它们时，当它的“值”为 0 时，它的行为就像我根本没有发布，因为我正在查看任何东西都是这样发布的：

```
if ($_POST['status']) {
    // do stuff here
} 
```

事实上，我需要使用 来检查它`isset()`，因为即使值为 0，上面显示的方式也会返回 false。下面显示的示例检查它是否真的被设置，即使值为 0。

```
if (isset($_POST['status'])) {
    // do stuff here
} 
```

您没有向我们展示您的 PHP 代码，所以我只是猜测这也是您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-16T01:51:41.090

这是一个痛苦...如果它是一个选择并且值为 0，则不会在 POST 中发送任何值...所以如果它是一个 POST 并且未发送，您可以假设该值为 0...

```
if($_POST){
   if(isset($_POST['my_select'])){
      //has a value, can assume it's 1 given the example
   }else {
      //posted, but value wasn't sent, can assume it's 0
   }
} 
```

# xcode - ipad uitableview 控制器弹出框

> ID：15020508
> 
> 赞同：0
> 
> 时间：2013-02-22T09:12:21.427
> 
> 标签：xcode, uitableview, uisplitviewcontroller, uipopovercontroller

我在 detailviewcontroller (uisplitviewcontroller) 上有一个动态生成的按钮，它使用 uinavigation，当您点击时会弹出一个 uitableviewcontroller。如果我用 0 个部分对其进行测试，uitableviewcontroller 会毫无问题地弹出。但是当我像这样将我的部分更改为 1 时：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
#warning Potentially incomplete method implementation.
    // Return the number of sections.
    return 1;
} 
```

它会给出这个错误：

> NSInternalInconsistencyException'，原因：'无法使具有标识符 MatchCell 的单元格出列 - 必须为标识符注册一个 nib 或类或连接情节提要中的原型单元格'

在这部分：

```
 UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath]; 
```

另外，我注意到，**在单步执行代码时**，它会多次通过**numberOfSectionsInTableView**和**numberOfRowsInSection （通常是两次或有时是三次）。**

对我做错了什么有任何想法吗？

# xcode - 用漏斗调试反汇编的dylib？

> ID：15020516
> 
> 赞同：1
> 
> 时间：2013-02-22T09:13:06.397
> 
> 标签：xcode, macos, gdb, dylib

有没有办法将 gdb 连接到 hopper，然后加载由应用程序加载的 dylyb，然后在单步执行 dylib 代码时运行应用程序？有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-01-11T10:13:40.483

今天（2020 年）实际上，您可以通过在启动调试器之前在单独的窗口中打开 dylib 来调试它们。当您返回调用堆栈窗口时，它会在 dylib 窗口中显示实际代码。您还可以放置断点并在其中做任何您想做的事情。

为了使调试工作，您应该删除主可执行文件的代码设计。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T08:45:17.510

我问了开发者，得到的回复是这个功能（调试一个dylib），在当前版本中是不可用的。

目前最好的方法似乎是使用可用的工具找到合适的位置来编辑代码，然后重新组装它。

# c# - 在 ext.net 中从 C# 代码隐藏添加新窗口

> ID：15020522
> 
> 赞同：0
> 
> 时间：2013-02-22T09:13:16.440
> 
> 标签：c#, dynamic, ext.net

我想添加一个新`Window`的工作`Listeners`和`DirectEvents`代码隐藏，以在 Button-Click 上实现管理界面。到目前为止，我有以下代码（最小化）：

```
Window editwindow = new Window(){
   ID="Window_Edit",
   width = 380,
   height = 120,
   hidden = false
};
FormPanel editpanel = new FormPanel(){
   ID="Panel_Edit"
}; 
editpanel.Items.Add(new TextField(){
   ID="Edit_Fieldname",
   FieldLabel = "Some Label",
   LabelStyle="text-align:right;",
   Width = 260,
   LabelWidth=120
});
editwindow.Add(editpanel);
this.Page.Controls.Add(editwindow);
//Viewport.Add(editwindow); Viewport is a wrapping <ext:Container>
//editwindow.DoLayout(); this has been throwing a reference error on client-side 
```

我想知道如何使窗口显示。现在，如果我使用 firebug 检查执行，`200: OK`则在发布请求中返回状态代码。但在此之前我做了一些存储操作，响应不包含这些存储更改！

现在有趣的是，更改触发按钮的文本可以正常工作，所以我确信不会执行完全重新加载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T15:43:11.183

我对我的回复做出了一些假设，因为您尚未发布演示整个场景的示例，但我认为修改以下内容应该可行：

```
// Old
// editwindow.Add(editpanel);
// this.Page.Controls.Add(editwindow);

// New
editwindow.Items.Add(editpanel);
editwindow.Render(this.Form); 
```

以下示例还演示了在 DirectEvent 期间动态创建 Window 并添加 的场景，请参阅

[http://examples.ext.net/#/XRender/Basic/New_Window/](http://examples.ext.net/#/XRender/Basic/New_Window/)

希望这可以帮助。

# yeoman - 为什么不建议将 Yeoman 用于构建网站？

> ID：15020529
> 
> 赞同：5
> 
> 时间：2013-02-22T09:13:39.630
> 
> 标签：yeoman

为什么不建议 Yeoman 在他们的网站上写网站 [http://yeoman.io/road.html](http://yeoman.io/road.html)

> **消除误解**
> 
> ```
> […]
> - Not recommended for building websites
> […] 
> ```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-22T11:30:37.243

这已在[邮件列表](https://groups.google.com/forum/#!topic/yeoman-dev/N4h71L9badQ)中得到答复：

> Yeoman 的主要目标是改进开发人员创建 web 应用程序的工作流程。这并不是说它不能用于脚手架/构建站点，但我们只是想澄清基本站点不是我们的目标受众。

# javascript - 在嵌入式 Web 浏览器 (iOS) 中通过 JavaScript 访问本地文件

> ID：15020530
> 
> 赞同：4
> 
> 时间：2013-02-22T09:13:44.047
> 
> 标签：javascript, iphone, ios, html, uiwebview

有没有办法通过在嵌入本机应用程序的浏览器上运行的 JavaScript 访问本地文件系统文件夹，如 Documents 文件夹？

我需要以下

1.  在 UIWebView 中加载 JavaScript
2.  从 UIWebView 中运行的 JavaScript 访问本地文件
3.  从 UIWebView 中运行的 JavaScript 写入本地文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-07T14:54:27.020

在此处查看此博客：[http](http://www.aerych.com/blog/2012/01/08/decrypting-http-streaming-video-with-nsurlprotocol/) : //www.aerych.com/blog/2012/01/08/decrypting-http-streaming-video-with-nsurlprotocol/ 为您提供答案。这里有一个非常相似的问题：[iOS WebView remote html with local image files](https://stackoverflow.com/questions/5572258/ios-webview-remote-html-with-local-image-files)

如果您的文件是图像，那么没问题。我尝试过一个大视频，然后我遇到了内存泄漏（和崩溃）并且更短的它简单地没有播放视频。

要从 javascript 编写本地文件，您可以使用相同的方式（使用不同的方案），即使用“writefile://”而不是“myapp://image1.png”，无论如何您都在重载 URL 协议。

# jakarta-ee - 如何让应用程序客户端从 EJB 获取事件和通知，由服务器推送？

> ID：15020531
> 
> 赞同：1
> 
> 时间：2013-02-22T09:13:44.063
> 
> 标签：jakarta-ee, ejb, jms, rmi, application-client

使用 Java EE 和 CDI 将 EJB 注入应用程序客户端并让应用程序客户端与 EJB 对话非常简单。真的很简单。而且，这种交流是书籍和互联网的全部内容。似乎没有人担心或需要让对话反过来进行。好吧，我希望我的 EJB 能够将事件和通知推送到源自服务器的应用程序客户端（应用程序客户端使用 Java Web Start 启动）。

当然，我可以让应用程序客户端像不断地从服务器轮询数据，但是，我不认为这是一个好的设计。我的 Web 客户端正在使用 ajax 长拉（彗星），它们对服务器的负担真的应该比我的应用程序客户端更小吗？

在我看来，JMS 是我唯一的选择。对于我将在两者之间进行的简单通信来说，这似乎有点过头了，我所知道的是，JAVA 端点 =) 我尝试了 RMI 并将远程存根从应用程序客户端推送到 EJB，但后来我得到了异常告诉我有问题的对象已经是某种远程存根。唔。

你有想法吗？

**编辑**

[这里](http://www.theserverside.com/discussions/thread.tss?thread_id=44303)也有类似的讨论。他们也认为除了使用 JMS 之外别无他法。我发现我所有的 Java EE 书籍或官方 Oracle 教程都没有解决这个问题，这有点“令人困惑”。甚至在一个小的旁注中也没有。在这个宇宙中，只有我一个人在努力做我想做的事吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-10T20:29:33.017

如果您不想打开自己的套接字，也不希望客户端启动服务器可以使用的 Web 服务，那么还有另一种 JMS 替代方案。即 Java EE 7 [WebSocket](http://docs.oracle.com/javaee/7/tutorial/doc/websocket.htm#GKJIQ5)。它们是全双工的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-09T15:49:05.847

这里同样的问题。

我自己提出了相同的解决方案——从服务器发送 JMS 并从客户端的 MDB 中收听它，然后从客户端的缓存中提取它，以减少服务器负载。

而且我不能使用 WebSocket。

* * *

另外，您可以尝试使用 GifSocket。它非常简单并且与 IE6 兼容！c: [https://github.com/videlalvaro/gifsockets](https://github.com/videlalvaro/gifsockets)

# javascript - Javascript：从复选框获取对象

> ID：15020532
> 
> 赞同：0
> 
> 时间：2013-02-22T09:13:46.140
> 
> 标签：javascript, jsp

假设有一个名为“Device”的模型类，其中包含许多相关属性，有没有办法通过使用 Javascript 来获取复选框中的“Device”对象？

如果我没有详细说明，这里是示例：

JSP 页面：

```
<c:forEach var="device" items="${row.deviceList}">
    <input type="checkbox" name="deviceDetails" value="${device}">
    <c:out value="${device.equipNo}" />
</c:forEach> 
```

Javascript：

```
var total = document.getElementsByName("deviceDetails");
// run through all element of checkedbox named deviceDetails
for(j=0; j<total.length; j++)
{
  <!-- get instance Device object ? -->
  alert(total[j].value);
} 
```

我试图调用 total[j].value ，它只返回了 toString() 函数的字符串，而不是“Device”对象。

我这样做的目的是因为如果我无法获取整个“设备”对象，我需要通过复选框将每个属性一一获取并在Javascript中将它们组装为“设备”对象。如：

JSP 页面：

```
<c:forEach var="device" items="${row.deviceList}">
    <input type="checkbox" name="id" value="${device.stnID}">
    <c:out value="${device.stnID}" />
    <input type="checkbox" name="stnName" value="${device.stnName}">
    <c:out value="${device.stnName}" />
    <input type="checkbox" name="equipNo" value="${device.equipNo}">
    <c:out value="${device.equipNo}" />
</c:forEach> 
```

Javascript：

```
var allID = document.getElementsByName("id");
var allName = document.getElementsByName("stnName");
var allNo = document.getElementsByName("equipNo");

var deviceList = new Array(); 
var device = new Object();

for(i=0; i<allID.length; i++)
{
    device.id = allID[i].value; 
    device.stnName = allName[i].value; 
    device.equipNo = allNo[i].value;

     deviceList.push(device);
} 
```

就个人而言，我认为第二种方法不是一个好主意。因此，希望这里有人可以提供更好的建议或任何想法来解决复选框中的对象传递问题。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T10:11:19.173

你不能`Java Objects`像以前那样被 Javascript 解释。您需要将对象转换为 Java 和 JS 两种语言都可以理解的符号。我用来执行此操作的一种方法是将我的 java 对象转换为 JSON，并在客户端使用 javascript 获取它。

# java - Primefaces 编辑器将选项放入文本中

> ID：15020535
> 
> 赞同：0
> 
> 时间：2013-02-22T09:14:07.683
> 
> 标签：java, primefaces

我正在使用 p:editor 作为输入：

```
<p:editor id="editor" value="#{blogUIBean.blogEdit.blogIn}" required="true" style="width:500px"/> 
```

我将此输入显示为：

```
 <h:outputText value="#{blogUIBean.selectedBlog.blogIn}" style="line-height:150%;margin-left:30px;background-color:#e1ecf0;" /> 
```

但它显示时选择了编辑器选项，例如；span style="font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13px; line-height: 18px; background-color: rgb(255, 255, 255);">Projenin fikir babası olan Ekmek Sanayi İşverenler Sendikası, sundukları projenin büyük bir ilgi ile karşılandığını ve 

为什么会发生这种情况，我该如何禁用这些？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-20T17:27:57.940

使用如下属性`escape`：

```
<h:outputText value="#{blogUIBean.selectedBlog.blogIn}" escape="false" style="line-height:150%;margin-left:30px; background-color:#e1ecf0;" /> 
```

> 逃脱
> 
> 指示必须对 HTML 和 XML 标记中敏感的字符进行转义的标志。默认情况下，此标志设置为“true”。

# django - MyUser 在 Django 1.5 中登录。再次

> ID：15020539
> 
> 赞同：0
> 
> 时间：2013-02-22T09:14:18.370
> 
> 标签：django, forms, login, model

我尝试在 django 1.5 中从 MyUser 模型登录用户。我使用电子邮件作为登录名，请参阅模型：

```
class MyUser(AbstractBaseUser):
    email = models.EmailField(
        verbose_name='email address',
        max_length=255,
        unique=True,
        db_index=True,
    )
    last_name=models.CharField(max_length=30)
    first_name=models.CharField(max_length=30)
    second_name=models.CharField(max_length=30, blank=True)
    post=models.CharField(max_length=30, blank=True)

    objects = MyUserManager()

    USERNAME_FIELD = 'email'
    REQUIRED_FIELDS = ['last_name','first_name','second_name','post',]

    def get_full_name(self):
       return self.email

    def get_short_name(self):
       return self.email

    def __unicode__(self):
        return self.email

    def has_perm(self, perm, obj=None):
       return True

    def has_module_perms(self, app_label):
       return True

    @property
    def is_staff(self):
        return self.is_admin 
```

我添加了登录表单：

```
class LoginForm(forms.Form):
username = forms.CharField(max_length=100)
password =forms.CharField(widget=forms.PasswordInput(render_value=False),max_length=100) 
```

看法：

```
def login_view(request):
    if request.method == 'POST':
        username = request.POST['email']
        password = request.POST['password']
        user = authenticate(username=username, password=password)
        if user is not None and user.is_active:
            login(request, user)
            return HttpResponseRedirect("/home.html")# Redirect to a success page.
        return HttpResponseRedirect("/account/invalid/")# Return a 'disabled account' error message
    form=LoginForm()
    return render(request, 'enter.html', {'login_form': LoginForm}) 
```

模板：

```
{% if form.errors %}
<p>Something is wrong</p>
{% endif %}

<form action="" method="post">
    {% csrf_token %}
    <label for="email">Login:</label>
    <input type="text" name="email" value="" id="email"/>
    <label for="password">Password:</label>
    <input type="password" name="password" value="" id="username">

    <input type="submit" value="login" />
    <input type="hidden" name="next" value="{{next|escape}}" />

</form> 
```

网址：

```
(r'^login/$', login_view), 
```

**问题：** 它适用于来自默认用户模型（用户名、密码）的用户，但是这种形式“不知道”来自 MyUser 模型（电子邮件、密码）的用户，它将他们重定向到`/account/invalid`页面。我究竟做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T10:14:32.173

您需要在设置中指明您的自定义用户模型：

```
AUTH_USER_MODEL = 'myapp.MyUser' 
```

此外，您必须从[doc](https://docs.djangoproject.com/en/dev/topics/auth/customizing/)提供自定义 UserManager ：

> 您还应该为您的用户模型定义一个自定义管理器。如果你的 User 模型定义了与 Django 的默认用户相同的用户名和电子邮件字段，你可以只安装 Django 的 UserManager；但是，如果您的 User 模型定义了不同的字段，您将需要定义一个自定义管理器，该管理器扩展 BaseUserManager 提供两个额外的方法：

# c# - 创建了一个导航到下一个 PivotItem 的按钮，如何从最后一个 PivotItem 返回到第一个 PivotItem？

> ID：15020543
> 
> 赞同：0
> 
> 时间：2013-02-22T09:14:34.723
> 
> 标签：c#, windows-phone-7

目前我的代码看起来像这样：

```
private void appbariconNext_Click(object sender, EventArgs e)
    {

        timerPivot.SelectedIndex += 1;
    }

    private void appbariconPrevious_Click(object sender, EventArgs e)
    {
        timerPivot.SelectedIndex -= 1;
    } 
```

问题是，如果我从第一个 PivotItem 中按下上一个按钮，我将得到一个 ArgumentException。如果我按下最后一个 PivotItem 中的 Next 按钮，情况也是如此。

我目前的 PivotItem 数量根据用户选择的选项而变化，因此从所有这些不同场景中获取 PivotItem 的数量对我来说效率低下。

有没有办法获取 Pivot 拥有的 PivotItems 总数？或者有没有办法解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T13:48:52.820

首先，创建按钮以使用按钮从一个页面导航到另一个页面是糟糕的 UI。扫一扫呢？您是否考虑过禁用它并重新设置 Pivot 的样式以使其显示为向导（如果您正在尝试这样做）？

您可以通过 Items 属性获取 Pivot 项目的总数。只需使用该数字进行模除以将索引号保持在 [0, Items.Length> 范围内。

我真的希望您不会以任何方式滥用 Pivot。

# javascript - jQuery滚动定位不好

> ID：15020550
> 
> 赞同：5
> 
> 时间：2013-02-22T09:15:05.593
> 
> 标签：javascript, jquery, html, ajax

我正在尝试在页面上制作滚动效果，滚动效果很平滑，但它错过了项目的实际位置，并在点击几下位置后开始出现错误。

例如，如果您单击最后一个项目，它会转到那里，但之后如果您单击第三个项目，则滚动会转到顶部（？）。所以我想我在这里遗漏了一些东西。**有人知道如何纠正这个问题吗？**

这是我的标记：

```
 <div id="sidebar" class="clearfix">
                <ul>
                    <li>
                        <a href="#one" class="scroll">Muscles - Girls Crazy Go!</a>
                    </li>
                    <li>
                        <a href="#two" class="scroll">Tokyo Youth sports</a>
                    </li>
                    <li>
                        <a href="#three" class="scroll">Harajuku Interviews</a>
                    </li>
                    <li>
                        <a href="#four" class="scroll">Tokyo Youth</a>
                    </li>
                </ul>
            </div> 
```

div 滚动示例：

```
 <div class="cinematography_box clearfix" id="two">
                        <div class="cinematography_item">
                            <img src="img/cinematography.jpg" alt="cinematography" width="700" height="397">
                        </div>
                        <div class="cinematography_info">
                        </div>
                    </div> 
```

和我的脚本：

```
 jQuery(document).ready(function($) {
        $(".scroll").click(function(event){     
            event.preventDefault();
            $('#main').animate({scrollTop:$(this.hash).offset().top}, 500);
        });
    }); 
```

我试图在没有插件的情况下做到这一点，所以如果有这个代码的解决方案会更好！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-24T18:53:19.367

你想在这里使用的是[.position()](http://api.jquery.com/position/)，而不是[.offset()](http://api.jquery.com/offset/)：

```
 $(".scroll").click(function(event){     
    event.preventDefault();
    var scroll_to = $('#' + $(this).data('scroll-to')).position().top; 
    $('#main').animate({ scrollTop:scroll_to }, 500);
  }); 
```

您可以通过键入以下内容在 Google Chrome 控制台中快速尝试：

```
$(".scroll").off("click");
$(".scroll").click(function(event){     
  event.preventDefault();
  var scroll_to = $('#' + $(this).data('scroll-to')).position().top; 
  $('#main').animate({ scrollTop:scroll_to }, 500);
}); 
```

然后点击进入。它会杀死你的听众并附加这个新的。

`margin-top`请注意，由于您的 12px on ，它有点偏离`#gallery.cinematography`。要么删除它，要么添加 12`scroll_to`

JQuery's Doc 是不言自明的，但如果有什么你不明白的，请随时询问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T09:26:18.060

您使用的顶部偏移量来自元素`#main`，并且您希望它来自`.scroll`与散列具有相同 id 的元素。更改以下代码：

HTML：

```
<ul>
    <li>
        <a href="#one" data-scroll-to="one" class="scroll">Muscles - Girls Crazy Go!</a>
    </li>
    <li>
        <a href="#two" data-scroll-to="two" class="scroll">Tokyo Youth sports</a>
    </li>
... 
```

jQuery：

```
jQuery(document).ready(function($) {        
    $(".scroll").click(function(event){     
        event.preventDefault();

        var scroll_to = $('#' + $(this).data('scroll-to')).offset().top;            
        $('#main').animate({ scrollTop:scroll_to }, 500);
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T10:17:01.793

尝试一下

```
$(document).ready(function() {
    $(".scroll").click(function(event){
        event.preventDefault();
        var obj = $.browser.webkit ? $('body') : $('html');
        obj.animate({ scrollTop: $('#sidebar').offset().top }, 750, function (){
             //callback function if any
        });
    });
}); 
```

# c# - Webservice 方法返回错误：“生成 XML 文档时出错”

> ID：15020551
> 
> 赞同：0
> 
> 时间：2013-02-22T09:15:08.443
> 
> 标签：c#, asp.net, web-services

在我的应用程序中，我使用了使用 Web 服务的 3 层架构。我想在数据库中插入数据。当从 web 服务调用 insert 方法时，它会给出错误“生成 xml 文档时出错

.CS 保存点击事件

```
 protected void btnSave_Click(object sender, EventArgs e)
    {
        try
        {
             //assinging values to the Object(objEmp)
            string Result = objEmp.Insert();
            if (Result == "1")
            {

                Page.ClientScript.RegisterStartupScript(this.GetType(), "ShowMessage", string.Format("<script type='text/javascript'>alert('{0}')</script>", "Record Saved"));
                Response.Redirect("ViewEmployeeDetails.aspx");

            }
            else
            {
                Page.ClientScript.RegisterStartupScript(this.GetType(), "Error1", string.Format("<script type='text/javascript'>alert('{0}')</script>", Result.Replace("'", "\\'")));
            }

        }
        catch (Exception ex)
        {
            Page.ClientScript.RegisterStartupScript(this.GetType(), "Error", string.Format("<script type='text/javascript'>alert('{0}')</script>", ex.Message.ToString()));
        }
    } 
```

**类（Emp.cs）**

```
public String Insert()
    {
        Service.SqlParameter[] param = new Service.SqlParameter[13];

        param[0] = new Service.SqlParameter();
        param[0].ParameterName = "@Dta_Users";
        param[0].Value = Dta_Users;
        param[0].SqlDbType = Service.SqlDbType.NVarChar;

        param[1] = new Service.SqlParameter();
        param[1].ParameterName = "@FK_EmployeeTypeID";
        param[1].Value = FK_EmployeeTypeID;
        param[1].SqlDbType = Service.SqlDbType.Decimal;

        param[2] = new Service.SqlParameter();
        param[2].ParameterName = "@EmployeeName";
        param[2].Value = EmployeeName;
        param[2].SqlDbType = Service.SqlDbType.NVarChar;

        param[3] = new Service.SqlParameter();
        param[3].ParameterName = "@CellNo";
        param[3].Value = CellNo;
        param[3].SqlDbType = Service.SqlDbType.NVarChar;

        param[4] = new Service.SqlParameter();
        param[4].ParameterName = "@PhNo";
        param[4].Value = PhNo;
        param[4].SqlDbType = Service.SqlDbType.NVarChar;

        param[5] = new Service.SqlParameter();
        param[5].ParameterName = "@Address";
        param[5].Value = Address;
        param[5].SqlDbType = Service.SqlDbType.NVarChar;

        param[6] = new Service.SqlParameter();
        param[6].ParameterName = "@Email";
        param[6].Value = Email;
        param[6].SqlDbType = Service.SqlDbType.NVarChar;

        param[7] = new Service.SqlParameter();
        param[7].ParameterName = "@DOB";
        if (DOB == null)
        {
            param[7].Value = DBNull.Value;
        }
        else
        {
            param[7].Value = DOB;
        }
        param[7].SqlDbType = Service.SqlDbType.DateTime;

        param[8] = new Service.SqlParameter();
        param[8].ParameterName = "@DOJ";
        param[8].Value = DOJ;
        param[8].SqlDbType = Service.SqlDbType.DateTime;

        param[9] = new Service.SqlParameter();
        param[9].ParameterName = "@DOR";
        param[9].Value = DOR;
        param[9].SqlDbType = Service.SqlDbType.NVarChar;

        param[10] = new Service.SqlParameter();
        param[10].ParameterName = "@Status";
        param[10].Value = Status;
        param[10].SqlDbType = Service.SqlDbType.NVarChar;

        param[11] = new Service.SqlParameter();
        param[11].ParameterName = "@Remarks";
        param[11].Value = Remarks;
        param[11].SqlDbType = Service.SqlDbType.NVarChar;

        param[12] = new Service.SqlParameter();
        param[12].ParameterName = "@Dta_User";
        param[12].Value = Dta_User;
        param[12].SqlDbType = Service.SqlDbType.NVarChar;

        return  s.InsUpdDel(Conn, "Employee_Insert", param);

    } 
```

**网络服务方法** [WebMethod]

```
public string InsUpdDel(string Conn, string ProcName, SqlParameter[] p)
{
    try
    {
        using (SqlConnection cn = new SqlConnection(Conn))
        {
            if (cn.State == ConnectionState.Open || cn.State == ConnectionState.Broken || cn.State == ConnectionState.Connecting || cn.State == ConnectionState.Executing || cn.State == ConnectionState.Fetching)
                cn.Close();
            cn.Open();
            SqlCommand cmd = new SqlCommand(ProcName, cn);

            cmd.CommandType = CommandType.StoredProcedure;

            foreach (SqlParameter param in p)
            {
                cmd.Parameters.Add(param);
            }
            SqlDataReader dr = cmd.ExecuteReader();
            dr.Read();
            if (dr[0].ToString() == "1")
            {
                return "1";
            }
            else
            {
                return dr[0].ToString();
            }
            //dr.Close();
            cn.Close();
        }
    }
    catch (Exception ex)
    {
        return "Error : " + ex.Message.ToString();
    }

} 
```

当我调试 save_click 事件时，光标转到 catch 语句......因为错误来自 Web 服务。如果我只是在 Emp.cs 中添加 InsUpdDel() 方法并在 Insert() 方法中调用此方法，则不会出现错误

**如果我写下面的代码，那么它给出的错误**

```
 param[7] = new Service.SqlParameter();
        param[7].ParameterName = "@DOB";
        if (DOB == null)
        {
            param[7].Value = DBNull.Value;
        }
        else
        {
            param[7].Value = DOB;
        }
        param[7].SqlDbType = Service.SqlDbType.DateTime; 
```

**如果我写下面的代码，那么它不会给出错误**

```
 param[7] = new Service.SqlParameter();
    param[7].ParameterName = "@DOB";
    param[7].Value = DOB;
    param[7].SqlDbType = Service.SqlDbType.DateTime; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T09:18:49.377

更改此行：

```
param[7].Value = DBNull.Value; 
```

到

```
param[7].Value = null; 
```

然后在 ws 方面：

```
foreach (SqlParameter param in p)
{
    if (param.Value == null)
    {
           param.Value = DBNull.Value;
    }
    cmd.Parameters.Add(param);
} 
```

# sql - 检测我的存储过程中的参数只包含 6 个字符

> ID：15020552
> 
> 赞同：-1
> 
> 时间：2013-02-22T09:15:10.317
> 
> 标签：sql, sql-server

如何检测我`@AE_LedgerAC`的存储过程中的参数仅包含 6 个字符？如果它只包含 6 个字符，我想在前面添加此表中包含的详细信息`BIN.BranchId`：

```
ALTER PROCEDURE [dbo].[AccountEntries]

    @AE_LedgerAC varchar(21)=null,
    @AE_Transaction_Ref varchar(50)=null,
    @AE_Detail nvarchar(50)=null,
AS
    DECLARE @NEW_LedgerAC varchar(21) = null

    IF(LEN(@AE_LedgerAC) = 6)
    BEGIN
        @NEW_LedgerAC = SELECT TOP 1 BIN.BranchId FROM BIN + @AE_LedgerAC
    ELSE
        @NEW_LedgerAC = @AE_LedgerAC

    INSERT INTO [AccountEntries](LedgerAC, Transaction_Ref, Detail)
    VALUES (@AE_LedgerAC, @AE_Transaction_Ref, @AE_Detail) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T09:21:07.227

使用 LEN (string_expression)

```
IF(LEN(@AE_LedgerAC) = 6)
BEGIN

...
END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T09:27:17.663

假设这是 MSSQL，请查看 Microsoft 的 MSDN 中的以下链接：

[伦](http://msdn.microsoft.com/en-us/library/ms190329.aspx)

[如果别的](http://msdn.microsoft.com/en-us/library/ms182717.aspx)

[一片空白](http://msdn.microsoft.com/en-us/library/ms184325%28v=sql.105%29.aspx)

[设置@local_variable](http://msdn.microsoft.com/en-us/library/ms189484.aspx)

# objective-c - iOS 6 新闻提要（隐藏页面）

> ID：15020553
> 
> 赞同：0
> 
> 时间：2013-02-22T09:15:13.780
> 
> 标签：objective-c, ios5, storyboard

我想在主屏幕顶部创建一个隐藏页面（如 iOS 6 新闻提要），并在右上角创建一个按钮。当人们推它或按住它并向下滑动时，就会出现隐藏的菜单。老实说，我对此一无所知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T05:05:13.607

如果您想拥有更复杂的事件，而不仅仅是点击按钮，您应该考虑使用`UIGestureRecognizer`. 对于您所描述的交互类型，您可能需要 2 个识别器 -`UILongPressGestureRecognizer`用于点击并按住，然后`UIPanGestureRecognizer`用于向下滑动。您可能可以使用 a`UISwipeGestureRecognizer`而不是 pan，但我不确定是否需要从长按独立轻按开始滑动。

学习手势的好资源是：

*   [手势识别器基础知识 - Apple](http://developer.apple.com/library/ios/documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/GestureRecognizer_basics/GestureRecognizer_basics.html#//apple_ref/doc/uid/TP40009541-CH2-SW2)
*   [UIGestureRecognizer 教程来自 raywenderlich.com](http://www.raywenderlich.com/6567/uigesturerecognizer-tutorial-in-ios-5-pinches-pans-and-more)

# c# - 如果图像尺寸小于 Container Div 尺寸，则上传图像并以平铺格式显示

> ID：15020554
> 
> 赞同：-2
> 
> 时间：2013-02-22T09:15:18.717
> 
> 标签：c#, javascript, asp.net, file-upload

我正在创建一个网站。

我需要在其中创建一个页面。我需要实现这些功能：

1.  用户可以上传图片。

2.  上传后，他/她可以看到那张图片。

3.  我有一个宽度为 500 像素的固定区域，用户可以在上传后看到他/她的图片。

4.  如果用户上传小尺寸图片。该图像不会拉伸它会用平铺格式填充区域。

5.  它就像我们的桌面背景。

请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T10:09:30.643

1\. 使用 ajax 文件上传控件（或）普通 aspx 文件上传控件添加多张照片 2\. 使用图像控件 3\. 将该图像控件宽度设置为 500px 4\. 在图像控件中，它可以选择定位图像 5\. 你可以调整它的大小，因为你想显示

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T10:12:03.420

您可以使用 javascript 之类的..

```
width = 0;
while (width<500){ // 500 the max width
diva.innerHtml+='insert image' // code to append the image in the div
width+=insertimage.width // code to set the total width that has been used
} 
```

您也可以为高度 * 注意：- 上面的代码仅用于说明目的，您需要更改它。在这里，我为您编写了示例代码

```
<head>
<title></title>
<script language="javascript" type="text/javascript">
    function Button1_onclick() {
        var h = document.getElementById("Text1");
        var im = document.getElementById("Text3");
        var dimage = document.getElementById("div1");
        dimage.setAttribute("style", "width:" + h.value);
        width = 0;
        dimage.innerHTML = " ";
        while (width < h.value) {
            dimage.innerHTML += "<img alt=\"\"src = \"" + im.value + "\"/>";
            width += 100;
        }

    }
</script>
<style type="text/css">
    .style1
    {
        height: 23px;
    }
</style> 
```

```
<table style="width:100%;">
    <tr>
        <td>
            Max Width</td>
        <td>
            <input id="Text1" type="text" value="600" /></td>
        <td>
            &nbsp;</td>
    </tr>
    <tr>
        <td>
            Max Height</td>
        <td>
            <input id="Text2" type="text" value="500" /></td>
        <td>
            &nbsp;</td>
    </tr>
    <tr>
        <td>
            Image Location</td>
        <td>
            <input id="Text3" type="text" 
                value="www.conflictprevention-ks.org/images/img.jpg" /></td>
        <td>
            &nbsp;</td>
    </tr>
    <tr>
        <td>
            &nbsp;</td>
        <td>
            <input id="Button1" type="button" value="Load Image" onclick="return Button1_onclick()" /></td>
        <td>
            &nbsp;</td>
    </tr>
    <tr>
        <td colspan="2" class="style1">
            <div id="div1">
             </div>
        </td>
        <td class="style1">
            </td>
    </tr>
</table> 
```

只需将代码保存为 html 文件，看看它是如何工作的。

# javascript - 对基本 json 对象进行排序

> ID：15020555
> 
> 赞同：0
> 
> 时间：2013-02-22T09:15:18.553
> 
> 标签：javascript, json, sorting

我有一个非常简单的 json 对象，

```
{
   "costA": 9617,
   "costB": 11100,
   "costC": 13208,
   "costD": 9910
} 
```

是否可以对这个 json（在 javascript 中）进行排序以获得结果？

```
{
   "costA": 13208,
   "costB": 11100,
   "costC": 9910,
   "costD": 9617
} 
```

注意：`key`名称可以更改..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T09:39:46.690

下面的 JavaScript 给出了你想要的结果`{costA: 13208, costB: 11100, costC: 9910, costD: 9617}`：

```
var obj = JSON.parse('{"costA": 9617, "costB": 11100, "costC": 13208, "costD": 9910}');
var values = [], keys = [], key, i;
for (key in obj) {
    keys.push(key);
    values.push(obj[key]);
}
values.sort(function (a, b) { return b-a; });
keys.sort();
for (i = 0; i < keys.length; ++i) {
    key = keys[i];
    val = values[i];
    obj[key] = val;
}

console.log(obj); 
```

参见[小提琴](http://jsfiddle.net/HrDgw/1/)。

# iphone - 从应用委托访问 viewController 属性

> ID：15020556
> 
> 赞同：0
> 
> 时间：2013-02-22T09:15:28.813
> 
> 标签：iphone, ios

我对 iOS 编程很陌生，所以请善待 :) 我正在尝试用谷歌搜索这几个小时，但没有成功。我已经设置了一个 iOS 主细节项目。

我需要做什么。`detailViewController`就是在app调用的时候改变一个标签`applicationDidEnterBackground`

这是我在 appdelegate`applicationDidEnterBackground`方法中的错误代码

```
UIViewController *temp = [self.navigationController visibleViewController];
NSLog(@"%@",[temp nibName]);
if ([temp nibName] == @"DetailViewController") {
    temp._lblBrewingTime = @"";
} 
```

这不起作用。语义问题：`lblbrewingtime`在 UIViewController 类型的对象上找不到。如果我添加一个断点并检查临时指针的结构。我可以看到`_lblBrewingTime`类型。

您能否指出我如何获取应用程序委托中当前加载的任何视图的属性？

非常感谢，问候，尼克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T09:25:50.727

**一旦您确定 visibleViewController 实际上是 DetailViewController，**您必须将其显式转换为 DetailViewController 。所以这里是修复： -

```
UIViewController *temp = [self.navigationController visibleViewController];
NSLog(@"%@",[temp nibName]);
if ([temp nibName] == @"DetailViewController") {
DetailViewController* tempDVCObj = (DetailViewController*)temp;
//temp._lblBrewingTime = @"";
tempDVCObj._lblBrewingTime = @"";
} 
```

它说您的属性**_lblBrewingTime**不是 UIViewController 的属性，它是 DetailViewController 的属性，即 UIViewController 的子类，这是绝对正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T09:25:28.110

这里有一些东西：

1.  您应该在 AppDelegate 中保留对主控制器的引用并通过此引用访问视图 - 导航控制器中的可见视图控制器可能不是您的视图控制器类，例如因为您导航到另一个视图。

2.  您可以通过 UIViewController 接口访问视图控制器。UIViewController 类不知道您的子视图控制器的属性，因此它无法访问 _lblBrewingType。您必须使用视图控制器的类名来访问其属性，例如 MyViewController * myVc = (MyViewController*)viewController。

3.  _lblBrewingType 看起来像视图控制器的内部变量。要从外部访问它，您必须将其作为属性提供：

> // MyViewController.h
> 
> @interface MyViewController : UIViewController
> 
> {
> 
> ```
> UILabel* _lblBrewingType; 
> ```
> 
> }
> 
> @property（强，非原子）IBOutlet UILabel *lblBrewingType;

和实施：

> // MyViewController.m
> 
> @implementation MyViewController
> 
> @synthesize lblBrewingType；
> 
> @结尾

# cakephp - 为带有参数的操作生成 RSS 提要

> ID：15020557
> 
> 赞同：0
> 
> 时间：2013-02-22T09:15:28.890
> 
> 标签：cakephp, rss

我需要为函数 productList 生成一个 RSS 提要，该函数根据类别创建产品的分页列表。函数的原型是

```
public function productList($category){} 
```

该函数位于 Products 控制器中。我看过有关如何生成 RSS 提要的教程。在教程中，函数的原型是

```
public function index(){} 
```

该函数没有参数。在本教程中，生成 RSS 提要的链接是`app_name/Products/index.rss`. 在我的情况下，这种类型的链接是不可能的，因为函数 productList 有一个参数。我想根据所选类别（该类别中的 15 个最新产品）生成一个 RSS。如何在 Cakephp 中为带有参数的函数生成 RSS。一种方法是在 session 中设置参数而不传递参数。即将 $category 放在 session 中，以便函数原型变为

```
public function productList() 
```

然后我将不得不使用不同的函数来生成 RSS 提要并使用另一个函数来生成输出。有没有一种方法可以使用相同的功能 productList 来生成 RSS 提要而不使用会话。请指导我。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:00:49.767

我知道的两个选项：

1] 在 url 中使用命名参数，例如`example.com/controller/productList/category:2/.rss` ，然后可以在您的 productList 操作中访问该类别`$this->params['named']['category'] == 2`

* * *

2]通过路由来做，例如定义一个`routes.php`类似的路由

```
Router::connect('/engines', array('controller'=>'c', 'action'=>'productList', 'engines');
Router::connect('/gears',   array('controller'=>'c', 'action'=>'productList', 'gears'); 
```

`parseExtension`在 example.com/engines.rss url 的情况下，这将与 productList('engines')一起调用

# excel - Excel公式从字符串中提取数字

> ID：15020561
> 
> 赞同：0
> 
> 时间：2013-02-22T09:15:41.070
> 
> 标签：excel, excel-formula

我在 excel 中有一个列，它包含两种类型的字符串

1.  (423) 242-0045 begin_of_the_skype_highlighting (423) 242-0045 免费 end_of_the_skype_highlighting

2.  (630) 472-1900 begin_of_the_skype_highlighting (630) 472-1900 免费 end_of_the_skype_highlighting, (773) 878-7340 begin_of_the_skype_highlighting (773) 878-7340 免费 end_of_the_skype_highlighting

`=IF(FIND(",",C2),LEFT(C2,FIND("begin",C2)-2)&","&MID(C2,FIND(",",C2)+2,14),MID(C2,FIND("begin",C2)+2,14))`

我上面的公式来提取电话号码。喜欢：

1.  (423) 242-0045
2.  (630) 472-1900, (773) 878-7340

但它适用于 2\. 类型的字符串，但不是第一个。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T09:28:15.573

试试这个公式（假设输入格式适合样本）：

`=TRIM(LEFT(A1,14)&IFERROR(", "&MID(A1,FIND(",",A1)+2,14),""))`

# android - 自动化应用程序

> ID：15020567
> 
> 赞同：-1
> 
> 时间：2013-02-22T09:15:57.413
> 
> 标签：android

谁能给我一些教程，帮助我创建一个可以感知人的温度、动作或声音并根据这些参数的变化自动启动的应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T09:31:47.213

您需要运行一些应用程序才能感知刺激并对其做出响应。一种方法是创建一个在后台运行并监控事物的[服务。](http://www.vogella.com/articles/AndroidServices/article.html)一旦你检测到标准，你可以用类似的东西启动应用程序

```
Context ctx = getContext();
ctx.startActivity(new Intent(ctx, YourActivity.class)); 
```

有很多方法可以读取传感器，但您可以从[本教程开始](http://www.vogella.com/articles/AndroidSensor/article.html)

[这个问题](https://stackoverflow.com/questions/6959930/android-need-to-record-mic-input)的一个答案是有关从麦克风录音的信息。

如果这是您的第一个应用程序，我建议您从一个包含基本 Android 应用程序的教程开始并构建它，只需编写一些调试而不是启动 Activity。完成此操作后，您可以将感应代码提取到单独的服务中，并在检测后启动活动。我还认为有一些限制实际上意味着您必须让用户第一次启动应用程序才能启动服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T09:24:30.167

创建一个使用[传感器的](http://developer.android.com/guide/topics/sensors/sensors_overview.html)[服务](http://developer.android.com/guide/components/services.html)，如果发生变化，它们会启动一个带有[Intent](http://developer.android.com/guide/components/intents-filters.html)的 Activity 。

# java - 为自动装箱使用生成警告

> ID：15020573
> 
> 赞同：10
> 
> 时间：2013-02-22T09:16:22.003
> 
> 标签：java, eclipse, checkstyle, pmd, autoboxing

我想为所有自动装箱和拆箱生成警告。

有没有人找到有效的方法？

**Eclipse**捕获基本的自动装箱错误：例如。`Integer i = null; i++`. 但是在任何复杂的事情上都失败了，这并不是我真正想要的。

我查看了**PMD**和**Checkstyle**，但在那里找不到任何东西。

我知道这是一个有争议的话题，但我认为这是一个危险的特征。没有办法禁用它，所以我至少希望在代码审查期间检查报告。

`NullPointerException`我在代码审查和错误中经常看到这一点：

```
class X {
    Integer i = null;

    public int doSomething() {
        return i + 2;
    }
} 
```

我想阻止它走得那么远。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-22T09:52:20.527

在 Eclipse 中设置此设置，

> 首选项 -> Java -> 编译器 -> 错误/警告 -> 潜在的编程问题 -> 装箱和拆箱转换。

# android - Android sqlite错误代码19请解释一下？

> ID：15020575
> 
> 赞同：0
> 
> 时间：2013-02-22T09:16:27.223
> 
> 标签：android, android-sqlite

```
public static final String Create_Database2= "CREATE TABLE " + Table_Name2 + "("
                + play20 + "INTEGER PRIMARY KEY, "
                + play1 + " LONG, " 
                + play2 + " LONG, " 
                + play3 + " INTEGER, " 
                + play4 + " INTEGER, " 
                + play5 + " LONG, " 
                + play6 + " TEXT, " 
                + play7 + " TEXT, " 
                + play8 + " TEXT, " 
                + play9 + " TEXT, " 
                + play10 + " TEXT, " 
                + play11 + " INTEGER, " 
                + play12 + " INTEGER, " 
                + play13 + " INTEGER, " 
                + play14 + " INTEGER, " 
                + play15 + " INTEGER, " 
                + play16 + " INTEGER, " 
                + play17 + " TEXT, " 
                + play18 + " INTEGER, " 
                + play19 + " TEXT"
                + ") "; 
```

我正在使用上述方法创建一个表？我正在使用此方法在此表中插入值；

```
 public void fetchplaylist() throws IOException
          {
                this.open();                  
                ContentValues values2 = new ContentValues();
                String csvFilename2 = "/mnt/sdcard/playlist.csv";
                CSVReader csvReader2 = new CSVReader(new FileReader(csvFilename2));
            String Row[] = null;
                while((Row = csvReader2.readNext()) != null) {
                       st1=Row[0];
                       st2=Row[1];
                       st3=Row[2];
                       st4=Row[3];
                       st5=Row[4];
                       st6=Row[5];
                       st7=Row[6];
                       st8=Row[7];
                       st9=Row[8];
                       st10=Row[9];
                       st11=Row[10];
                       st12=Row[11];
                       st13=Row[12];
                       st14=Row[13];
                       st15=Row[15];
                       st16=Row[16];
                       st17=Row[17];
                       st18=Row[18];
                       st19=Row[19];
                       values2.put(DatabaseHandler.play1,st1);
                       values2.put(DatabaseHandler.play2,st2);
                       values2.put(DatabaseHandler.play3,st3);
                       values2.put(DatabaseHandler.play4,st4);
                       values2.put(DatabaseHandler.play5,st5);
                       values2.put(DatabaseHandler.play6,st6);
                       values2.put(DatabaseHandler.play7,st7);
                       values2.put(DatabaseHandler.play8,st8);
                       values2.put(DatabaseHandler.play9,st9);
                       values2.put(DatabaseHandler.play10,st10);
                       values2.put(DatabaseHandler.play11,st11);
                       values2.put(DatabaseHandler.play12,st12);
                       values2.put(DatabaseHandler.play13,st13);
                       values2.put(DatabaseHandler.play14,st14);
                       values2.put(DatabaseHandler.play15,st15);
                       values2.put(DatabaseHandler.play16,st16);
                       values2.put(DatabaseHandler.play17,st17);
                       values2.put(DatabaseHandler.play18,st18);
                       values2.put(DatabaseHandler.play19,st19);
                   database.insert(DatabaseHandler.Table_Name2, null, values2); } 
```

但我在我的 logcat 中设置 sqlite 错误代码 19 约束失败我在这里做什么？我无法理解这一点，请有人帮我理解这一点

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T09:18:49.547

你之前有一个缺失的空间

```
"INTEGER PRIMARY KEY 
```

将其替换为：

```
" INTEGER PRIMARY KEY 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T09:19:50.753

你需要清除你的 ContentValues，或者把这一行

```
ContentValues values2 = new ContentValues(); 
```

在while循环内并在之前给空间`" INTEGER PRIMARY KEY"`

# jquery - JQuery 在 ASP.Net MVC 页面中不起作用

> ID：15020580
> 
> 赞同：2
> 
> 时间：2013-02-22T09:16:42.110
> 
> 标签：jquery, asp.net-mvc

我是 Asp.Net (MVC) 的新手。我创建了一个 ASP.Net MVC 移动页面。页面输出如下所示...... jQuery 只是不会在 UserName 文本框的 textchange 上触发。如果我遗漏了什么，请告诉我。

```
 <!DOCTYPE html>
<html lang="en" >
    <head><meta charset="utf-8" /><title>
    XYZ
</title><meta name="viewport" content="width=device-width" />
        <link href="/favicon.ico" rel="shortcut icon" type="image/x-icon" />
        <link href="/Content/jquery.mobile-1.1.0.css" rel="stylesheet"/>
        <link href="/Content/jquery.mobile.structure-1.1.0.css" rel="stylesheet"/>
        <link href="/Content/jquery.mobile.theme-1.1.0.css" rel="stylesheet"/>
        <link href="/Content/site.css" rel="stylesheet"/>
        <script src="/Scripts/modernizr-2.5.3.js"></script>

  <script>
      $(document).ready(function () {
          $("#UserName").change(function () {
              alert("Text Entered Is :"+$("#UserName").val());
          });
      });
  </script>

</head>
    <body>
        <div data-role="page" data-theme="b">
            <div data-role="header">
                    <h1>Forgot Password?</h1>
                    <a data-icon="star" href="/Account/Login">Log in</a>
            </div>
            <div data-role="content">

<p>Specify your login name and answer the secret question. If user name and secret answer matches; new password will be mailed to your registered email id.</p>
<form action="/Account/ForgotPassword" method="post"><div class="validation-summary-valid" data-valmsg-summary="true"><ul><li style="display:none"></li>
</ul></div>
    <ul data-role="listview" data-inset="true">
        <li data-role="list-divider">Confirm...</li>

        <li data-role="fieldcontain">
            <label for="UserName">User name</label>
            <input data-val="true" data-val-required="The User name field is required." id="UserName" name="UserName" type="text" value="" />
        </li>

        <li data-role="fieldcontain">
            <label for="SecurityQuestion">Security Question</label>
            <input data-val="true" data-val-required="The Security Question field is required." id="SecurityQuestion" name="SecurityQuestion" readonly="readonly" type="text" value="" />
        </li>

        <li data-role="fieldcontain">
            <label for="SecurityAnswer">Security Answer</label>
            <input data-val="true" data-val-required="The Security Answer field is required." id="SecurityAnswer" name="SecurityAnswer" type="text" value="" />
        </li>

        <li data-role="fieldcontain">
            <input type="submit" value="Retrieve Password" />
        </li>
    </ul>
</form>
            </div>
        </div>

        <script src="/Scripts/jquery-1.7.1.js"></script>
<script src="/Scripts/jquery.mobile-1.1.0.js"></script>

    <script src="/Scripts/jquery.unobtrusive-ajax.js"></script>
<script src="/Scripts/jquery.validate.js"></script>
<script src="/Scripts/jquery.validate.unobtrusive.js"></script>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T09:18:28.550

将此行移到 jquery 函数的上方。

```
<script src="/Scripts/jquery-1.7.1.js"></script> 
```

# .net - 在 .NET (C#) 中读取 UTF8 编码的命令行

> ID：15020581
> 
> 赞同：2
> 
> 时间：2013-02-22T09:16:46.483
> 
> 标签：.net, command-line, utf-8

我希望能够在我正在编写的 .NET 控制台程序中处理 UTF8 编码的命令行参数。不幸的是，传递给 Main() 函数的“args”数组和 Environment 类成员（CommandLine 和 GetCommandLineArgs()）都已经（错误地）转换为 Unicode，似乎将命令行视为单字节扩展-ASCII。

例如，UTF8 中的 U+2019（关闭单个撇号）为 0xe2 0x80 0x99。在 1252 密码键盘中，0x80 是欧元符号 (U+20ac)，0x99 是“TM”符号 (U+2122)。（0xe2 是带抑扬符的“a”，即 U+00e2，所以不会改变）当我在命令行中传入这三个字节时，字符串的“char”元素是 0x00e2 0x20ac 和 0x2122 .

有没有办法告诉 .NET 将命令行解释为 UTF8，或者获取原始的、未处理的命令行（我可以很高兴地将其转换为 Unicode 字符串）？

## 更新

（*遵循 dletozeun 的回答*）

Windows 会做一些奇怪的事情——尤其是如果它是 XP（当我第一次问这个问题时我正在使用它）。无论您是尝试从批处理文件还是直接从命令提示符调用 .NET 命令行程序，情况似乎都不同。这可能有一个*很好的理由*™，但我不知道。无论如何，如果它可以帮助任何人，这就是我发现的：

### 命令行

打开标准命令提示符窗口并输入以下命令：

```
UTF8Cmd.exe abcâ€™def 
```

其中`UTF8Cmd`是一个包含 dletozeun 解决方案的测试程序，中间字符是 0xe2、0x80、0x99（U+2019 的 UTF8 字节 - 关闭单个撇号）产生以下输出（显示 dletozeun 代码之前和之后的参数，两者都作为字符串并以十六进制转储）：

```
 Raw : "abcâ?Tdef"    61 62 63 e2 20ac 2122 64 65 66
    UTF8: "abc'def"      61 62 63 2019 64 65 66 
```

显示原始参数`Raw`（

### 批处理文件

不幸的是，仅将上述内容放入批处理文件中是行不通的……发生了完全不同的修改，产生：

```
 Raw : "abcÔÇÖdef"    61 62 63 d4 c7 d6 64 65 66
    UTF8: "abc???def"    61 62 63 fffd fffd fffd 64 65 66 
```

原始字节已被破坏成奇怪的东西，可能不是有效的 UTF8，因此`fffd`处理后的 s 。

**但是**，@mvp 建议`chcp 65001`先使用（然后重新设置）现在*确实*可以在*不需要*dletozeun 的代码的情况下工作：

```
Active code page: 65001
    Raw : "abc’def"      61 62 63 2019 64 65 66
    UTF8: "abc�def"      61 62 63 fffd 64 65 66
Active code page: 850 
```

正如我在下面的评论中所指出的，我之前**曾**尝试过这个，但那是在一个完全失败的 XP 盒子上（它甚至似乎没有运行该命令，并使命令提示符处于一种奇怪的状态）。刚刚尝试响应答案 - 在 Windows 7 机器上 - 该`chcp 65001`命令按我最初提出问题时所希望的那样工作！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-10T10:32:55.853

我知道已经很晚了，但我也刚遇到这个问题，在任何地方都没有找到任何答案。我设法找到了一个解决方案，所以这是我在处理参数列表中的 UTF8 编码字符时所做的：

```
 // Handle UTF8 encoded characters
    byte[] argBytes =  System.Text.Encoding.Default.GetBytes( System.String.Join( " ", System.Environment.GetCommandLineArgs() ) );
    string argString = System.Text.Encoding.UTF8.GetString( argBytes );
    string[] args = argString.Split( ' ' ); 
```

# java - 页面间重定向 - Spring MVC

> ID：15020588
> 
> 赞同：0
> 
> 时间：2013-02-22T09:17:08.293
> 
> 标签：java, spring, spring-mvc, controller, spring-portlet-mvc

我开始了，`Spring Portlet MVC`但我相信这个问题也适用于`Spring MVC`. 让我给你看这个例子

```
@Controller
@RequestMapping(value="VIEW")//this maps to Portlet Mode VIEW
public class LoginController {

    @RenderMapping("action=showRegisterPage")
    //this annotation is almost the same like @RequestMapping
    public String showRegisterPage() {
        return "registration";
    }

    @ModelAttribute("loginForm")
    public LoginForm getLoginForm() {
        return new LoginForm();
    }
} 
```

然后是注册页面的控制器

```
@Controller
@RequestMapping(value="VIEW")
public class RegistrationController {

    @ModelAttribute("user")
    public User getUser() {
        return new User();
    }
} 
```

问题是，当我从页面调用 showRegisterPage 方法（操作）时，我被重定向到registration.jsp，但是会发生这种异常

```
Caused by: java.lang.IllegalStateException: Neither BindingResult nor 
plain target object for bean name 'user' available as request attribute 
```

这可以通过将`ModelAttribute`用户放入 LoginController 来解决，但代码重复并不是真正正确的方法，那么我该如何正确解决这个问题？我也尝试将 showRegisterPage 方法移动到 RegistrationController 但链接不起作用。也许有人可以详细说明页面与某个控制器的精确绑定是如何工作的？

PS index.jsp 和registration.jsp 都包含`<form:form>`标签，我还省略了两个控制器的样板代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T13:34:30.037

抛出异常是因为当您转到注册页面模型时没有用户属性。我猜你的注册页面包含这样的东西

```
<form:form commandName="user" > 
```

这就是为什么当您将此代码粘贴到第一个控制器时，错误消失了

```
@ModelAttribute("user")
public User getUser() {
    return new User();
} 
```

此代码为模型提供用户对象。如果您不想将一种方法复制两次，则可以

```
@RenderMapping("action=showRegisterPage")
//this annotation is almost the same like @RequestMapping
public String showRegisterPage(Model model) {
    model.addAttribute("user", new User());
    return "registration";
} 
```

在这种情况下，模型将包含用户对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T14:59:36.403

理想情况下，showregistrationpage 方法应该是注册控制器而不是登录控制器的一部分。

# string - 如何在字符串的某些位置插入空格（Python 2.7）？

> ID：15020591
> 
> 赞同：1
> 
> 时间：2013-02-22T09:17:20.103
> 
> 标签：string, python-2.7, user-defined-functions

我发现了许多相关的问题，其中有几个问题至少帮助我走到了这一步。我的目标是拥有一个接收字符串和任意数量的整数的函数。我希望该函数返回该字符串，并在参数中给定的点处插入空格。我将将此函数与许多不同的字符串一起使用，这些字符串将具有不同数量的插入和插入位置。

这是我想要制作的示例：

输入一个字符串，如'ATGCATGCATGCATGC' 和索引（例如4、7）。输出应为“ATGCA TGC ATGCATGC”。

这是迄今为止给我最接近结果的函数：

```
def breakRNA(seqRNA, *breakPoint):
    n = 0
    for i in seqRNA:
        n += 1
        for i in breakPoint:
            if i == n:
                seqRNA = seqRNA[n:] + ' ' + seqRNA[:n]
    return seqRNA 
```

但是，返回字符串是乱序的。例子：

```
>>> test = breakRNA('AAAAAAAAAAAAAAAAAAAAAAAAAAATTTTTGGGGGGGGCCCCCCCCCC', 5, 8, 14)
>>> test
>>> 'TTTTTGGGGGGGGCCCCCCCCCC AAAAA AAAAAAAA AAAAAAAAAAAAAA' 
```

我是第一天的初学者，所以任何建议都值得赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T11:02:04.263

字符串像 Python 中的列表一样被索引。例如考虑以下内容：

```
test_string = "azertyuiop"
print test_string[0] #will return 'a'
print test_string[0:2] #will return 'az' 
```

所以回到你的问题：

```
def insert_space(string, integer):
    return string[0:integer] + ' ' + string[integer:] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T11:13:53.543

希望这是您正在寻找的

```
def breakRNA(seqRNA, *breakPoint):
    seqRNAList = []
    noOfBreakPoints = len(breakPoint)
    for breakPt in range(noOfBreakPoints):
        for index in breakPoint:
            seqRNAList.append(seqRNA[:index])
            seqRNA = seqRNA[index:]
        break
    return seqRNAList

test = breakRNA('AAAAAAAAAAAAAAAAAAAAAAAAAAATTTTTGGGGGGGGCCCCCCCCCC', 5, 8, 14)
print test 
```

这将返回您 alist 然后您可以使用 join 函数从中创建一个字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-29T20:18:01.647

```
simbol = input('Enter a character:\n')
triangle_n = int(input('Enter triangle height:\n'))
print('')

for i in range (triangle_n ):
    for j in range(i+1):
        print(simbol [0],end=' ')
    print() 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-08-19T08:04:19.703

```
string_name = string_name[starting index:ending index] + '   ' + string_name[starting index:ending index] 
```

例子：

```
product_rating = '4.56888 rating 256156 reviews'
product_rating = product_rating[0:3] + '   ' + product_rating[3:] 
```

输出

```
'4.5  6888 rating 256156 reviews' 
```

如果未提及结束索引，则其默认值将一直到字符串的末尾。注意索引将从 0 和 0:3 开始，这意味着它需要 0 到 2。

# java-me - 如何解决 J2ME java.lang.NoClassDefFoundError: com/sun/lwuit/layouts/Layout 错误？

> ID：15020593
> 
> 赞同：0
> 
> 时间：2013-02-22T09:17:25.900
> 
> 标签：java-me

我的 midlet 和 DB java 页面没有显示任何错误，但是在运行模拟器时它会加载并突然终止并出现以下错误......

请帮我解决

```
Running with storage root C:\Users\Acer\j2mewtk\2.5.2\appdb\MediaControlSkin
Running with locale: English_United States.1252
Running in the identified_third_party security domain
java.lang.NoClassDefFoundError: com/sun/lwuit/layouts/Layout
    at com.sun.midp.midlet.MIDletState.createMIDlet(+29)
    at com.sun.midp.midlet.Scheduler.schedule(+52)
    at com.sun.midp.main.Main.runLocalClass(+28)
    at com.sun.midp.main.Main.main(+80)
Execution completed.
3409264 bytecodes executed
25 thread switches
1683 classes in the system (including system classes)
17718 dynamic objects allocated (532816 bytes)
3 garbage collections (458688 bytes collected) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T13:53:28.183

在构建路径中 添加 **LWUIT.jar文件。**
添加干净并构建后，然后测试您的应用程序

# c# - Linq to Sql：优化lamba表达式 - 干净的代码

> ID：15020595
> 
> 赞同：3
> 
> 时间：2013-02-22T09:17:49.467
> 
> 标签：c#, asp.net, linq

我有这个表达式，它生成对数据库的单个查询：

```
db = new MyDataContext();
var productInCity = db.Products
                         .Where(n => n.id == 2)
                         .Select(k => new ProductInCityDto()
                         {
                              ProductName = k.ProductName,
                              CityName = k.Store.City.Name,
                              CountryName = k.Store.City.Country.Name
                              .
                              .
                              . 
                         })
                         .FirstOrDefault(); 
```

我想通过将映射放在函数、扩展方法或对象的构造函数中来使这段代码更简洁，如下所示：

```
db = new MyDataContext();
var productInCity = db.Products
                        .Where(n => n.id == 2)
                        .Select(k => new ProductInCityDto(k))
                        .FirstOrDefault(); 
```

但是，在这种情况下，会生成对数据库的多个查询（我使用 LinqToSql Profiler）。

有没有办法隔离映射（Select 语句）以实现更好的代码可读性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T09:24:07.450

是的，如果您查看 IQueryable 上的 Select 扩展方法的实际签名，您会发现它不采用函数，而是采用 Expression>。

所以，就这样吧……

```
Expression<Func<Product, ProductInCityDto>> MyMappingExpression
{
    get
    {
        return product => new ProductInCityDto
        {
            ...
        }
    }
} 
```

接着

```
db = new MyDataContext();
            var productInCity = db.Products.Where(n => n.id == 2)
                .Select(MyMappingExpression)
            .FirstOrDefault(); 
```

如果您需要在进程中使用 MyMappingExpression，您可能希望将其转换为

```
Func<Product, ProductInCityDto> 
```

通过调用 Expression.Compile() 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T09:29:22.980

[您可以使用AutoMapper](http://automapper.org/)代替手动创建映射。但是，如果您不想使用第三方工具创建映射，只需将查询更改为以下内容；

```
var productInCity = new ProductInCity(
                   db.Products.Include("Store").SingleOrDefault(n => n.id == 2)); 
```

# node.js - 带有请求模块的 Node.js Express 应用程序 - 使用 PUT 将图像上传到 CouchDB

> ID：15020599
> 
> 赞同：0
> 
> 时间：2013-02-22T09:18:02.237
> 
> 标签：node.js, express, request, couchdb, image-uploading

我正在使用 Mikeal 的请求模块从 Express 应用程序与 CouchDB HTTP API 对话。我不能使用任何其他模块（例如 nano），因为这是一个学术项目。

我想做的是获取一个图像文件，该文件已从 Web 应用程序中的表单上传，并将其作为附件保存到我的沙发上。使用 curl 执行此操作非常简单：

```
curl -vX PUT http://127.0.0.1:5984/albums/6e1295ed6c29495e54cc05947f18c8af/artwork.jpg?rev=2-2739352689
--data-binary @artwork.jpg -H "Content-Type: image/jpg" 
```

我无法理解的是如何使用请求模块构造 PUT 请求。Express 将文件临时存储在目录中

```
/tmp/{doc._id}.jpg 
```

我如何将文件从那里拿到我的沙发上？这里很绝望。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:56:53.330

我还没有验证这一点，但你也许可以这样做：

```
var 
 fs = require('fs'),
 request = require('request'),
 url = 'http://admin:password@127.0.0.1:5984/albums/6e1295ed6c29495e54cc05947f18c8af/artwork.jpg?rev=2-2739352689';
var requestStream = request.put(url);

requestStream.on('response', function (response) {
  console.log(response);
});
fs.createReadStream('image.jpg').pipe(requestStream); 
```

# android - 软键盘始终使用 ActivityGroup 和 TabHost 显示在活动中

> ID：15020600
> 
> 赞同：0
> 
> 时间：2013-02-22T09:18:02.960
> 
> 标签：android, android-tabhost, android-softkeyboard, activitygroup

我的应用程序由 TabHost 和 ActivityGroup 组成，其中包含嵌套的活动。当 ActivityGroup 的 Activity 被创建或恢复时，软键盘立即显示。我只需要在 EditText 上单击它才能显示它。我的 ActivityGroup 课程：

```
public class LoginTabGroup  extends ActivityGroup {

private ArrayList<String> mIdList;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        if (mIdList == null) mIdList = new ArrayList<String>();
    }

/**
* This is called when a child activity of this one calls its finish method.
* This implementation calls {@link LocalActivityManager#destroyActivity} on the child activity
* and starts the previous activity.
* If the last child activity just called finish(),this activity (the parent),
* calls finish to finish the entire group.
*/
@Override
public void finishFromChild(Activity child) {
LocalActivityManager manager = getLocalActivityManager();
int index = mIdList.size()-1;

if (index < 1) {
finish();
return;
}

manager.destroyActivity(mIdList.get(index), true);
mIdList.remove(index);
index--;
String lastId = mIdList.get(index);
Intent lastIntent = manager.getActivity(lastId).getIntent();

Window newWindow = manager.startActivity(lastId, lastIntent);
newWindow.setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN);
Log.i("ActivityGroup","finishFromChild method");
setContentView(newWindow.getDecorView());
}

/**
* Starts an Activity as a child Activity to this.
* @param Id Unique identifier of the activity to be started.
* @param intent The Intent describing the activity to be started.
* @throws android.content.ActivityNotFoundException.
*/
public void startChildActivity(String Id, Intent intent) 
{
    Window window = getLocalActivityManager().startActivity(Id,intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP));
    window.setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_HIDDEN);
    Log.i("ActivityGroup","startActivity method");
    if (window != null) {
    mIdList.add(Id);
    setContentView(window.getDecorView());
    }
}

/**
* The primary purpose is to prevent systems before android.os.Build.VERSION_CODES.ECLAIR
* from calling their default KeyEvent.KEYCODE_BACK during onKeyDown.
*/
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
    //preventing default implementation previous to android.os.Build.VERSION_CODES.ECLAIR
    return true;
    }
    return super.onKeyDown(keyCode, event);
}

/**
* Overrides the default implementation for KeyEvent.KEYCODE_BACK
* so that all systems call onBackPressed().
*/
@Override
public boolean onKeyUp(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
    onBackPressed();
    return true;
    }
    return super.onKeyUp(keyCode, event);
}

/**
* If a Child Activity handles KeyEvent.KEYCODE_BACK.
* Simply override and add this method.
*/
    @Override
    public void onBackPressed () {
    int length = mIdList.size();
    if ( length > 1) {
    Activity current = getLocalActivityManager().getActivity(mIdList.get(length-1));
    current.finish();
    }
}
} 
```

我试着这样做`newWindow.setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN);`

在创建新窗口时，但它没有帮助。方法如

```
 InputMethodManager imm = (InputMethodManager)getSystemService(
              Context.INPUT_METHOD_SERVICE);
    imm.toggleSoftInput(InputMethodManager.HIDE_IMPLICIT_ONLY, 0); 
```

在嵌套的活动中正常工作，但在活动创建或恢复键盘显示然后立即隐藏。由于键盘闪烁，我认为这不是一个好的解决方案。我还尝试在 AndroidManifest 中添加

```
 android:windowSoftInputMode="stateAlwaysHidden" 
         android:configChanges="keyboardHidden|orientation" 
```

都在嵌套的活动、活动组中。但结果还是一样。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:10:12.197

我用 hack 来解决这个问题。在 ActivityGroup 的班级和我放的子活动中

```
 InputMethodManager imm = (InputMethodManager)getSystemService(
                  Context.INPUT_METHOD_SERVICE);
        imm.toggleSoftInput(InputMethodManager.HIDE_IMPLICIT_ONLY, 0); 
```

在 onCreate() 和 onResume() 方法之前。如果知道的人告诉我更有效的解决方案，我将不胜感激。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T13:02:10.560

ActivityGroup 使用是非常糟糕和缓慢的解决方案。我决定在标签中使用带有嵌套片段的 FragmentActivities。然而，有时在 Activity 启动时会显示软键盘。我在没有图像的选项卡之一中将文本设置为中心。我猜，它叫软键盘显示。我的修复（在 TabActivity 类中）：

```
 final View view = tabHost.getTabWidget().getChildTabViewAt(1);
       if ( view != null ) {
         //  view.getLayoutParams().height *= 0.66;
           InputMethodManager imm2 = (InputMethodManager)getSystemService(
                  Context.INPUT_METHOD_SERVICE);
           imm2.toggleSoftInput(InputMethodManager.HIDE_IMPLICIT_ONLY, 0);
           //  get title text view
           final View textView = view.findViewById(android.R.id.title);
           if ( textView instanceof TextView ) {
               // just in case check the type

               // center text
               ((TextView) textView).setGravity(Gravity.CENTER);
               // wrap text
               ((TextView) textView).setSingleLine(false);
               // explicitly set layout parameters
               textView.getLayoutParams().height = ViewGroup.LayoutParams.FILL_PARENT;
               textView.getLayoutParams().width = ViewGroup.LayoutParams.WRAP_CONTENT;
           }
       } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T09:32:36.843

发生这种情况是因为布局中的 edittexts 是可聚焦的元素，如果没有其他元素请求它，则请求焦点在启动上。解决方案很简单：在所有布局文件中，在容器布局中将 focusable 和 focusableInTouchMode 设置为 true，这样它就会首先请求焦点，而编辑文本不会被聚焦。然后你可以删除你的隐含隐藏）

```
android:focusable="true"
android:focusableInTouchMode="true" 
```

# ruby-on-rails - 在 RSpec - 我如何测试一个属性是否小于（或大于）另一个属性

> ID：15020607
> 
> 赞同：35
> 
> 时间：2013-02-22T09:18:25.160
> 
> 标签：ruby-on-rails, ruby, rspec, tdd, bdd

在我的应用程序中，我想要一个`Car`模型。

它将有两个字段：`date_from`和`date_till`（指定某人使用它的时间段）。

我希望模型验证 date_from 应该小于或等于 date_till。

我的 model_spec.rb 草稿如下所示：

```
require 'spec_helper'

describe Car do
  it {should validate_presence_of(:model)}
  it {should validate_presence_of(:made)}

  it "should have date_till only if it has date_from"
  its "date_till should be >= date_from"
end 
```

显然，我可以编写一个“长”测试，我将尝试将 date_till 设置为大于 date_from - 并且模型应该是无效的。但也许有一些优雅的方法可以做到这一点？

那么，我如何（使用 RSpec 匹配器）验证一个字段不大于另一个字段？

**upd：** 我查看了@itsnikolay 的答案并像这样编码：

```
it "should not allow date_till less than date_from" do
  subject.date_from = Date.today
  subject.date_till = Date.today - 1.day

  subject.valid?.should be_false
end 
```

必须在没有匹配器的情况下这样做。好吧，不是悲剧：）

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2014-05-28T12:45:06.473

一般[推荐使用 expect ，而不是 should](https://github.com/rspec/rspec-expectations/blob/master/Should.md)。

例如：

```
 expect(@car.date_from).to be <= @car.date_till 
```

资源： - [BetterSpecs 示例](http://betterspecs.org/#expect) - Rspec [Docs](http://rubydoc.info/gems/rspec-expectations/frames)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-22T09:19:41.483

只需使用`<=`

```
date_from.should be <= date_till 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-03-07T16:33:21.517

或者用新的语法

```
expect(date_from).to be <= date_till 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-22T10:34:53.427

```
@car = Car.create \
  name:      'Buggy',
  date_from: Date.today + 1.day,
  date_till: Date.today + 2.day

expect(@car.date_from).to be <= @car.date_till 
```

更多细节：[RSpec 比较匹配器](https://relishapp.com/rspec/rspec-expectations/docs/built-in-matchers/comparison-matchers)

# debugging - ESP和EBP之间是什么？

> ID：15020621
> 
> 赞同：39
> 
> 时间：2013-02-22T09:19:05.033
> 
> 标签：debugging, visual-c++, x86, cpu-registers, stack-frame

是的，我确信这已经被隐含地回答了很多次，但我似乎无法完全理解它。

如果您有一个 (x86) 堆栈跟踪（例如，在 WinDbg 中查看它），并且查看寄存器，那么 EBP 和 ESP 值相隔 x 字节意味着什么？

链接：

*   [https://stackoverflow.com/a/3699916/321013](https://stackoverflow.com/a/3699916/321013)
*   [https://stackoverflow.com/a/2466587/321013](https://stackoverflow.com/a/2466587/321013)
*   [https://stackoverflow.com/a/5738940/321013](https://stackoverflow.com/a/5738940/321013)

举一个我最近的堆栈跟踪的例子：

```
0:016> k
ChildEBP RetAddr  
1ac5ee8c 76b831bb ntdll!NtDelayExecution+0x15
1ac5eef4 76b83a8b KERNELBASE!SleepEx+0x65
1ac5ef04 0060e848 KERNELBASE!Sleep+0xf
1ac5ef10 76859d77 MyApp!application_crash::CommonUnhandledExceptionFilter+0x48 [...\applicationcrash.inc.cpp @ 47]
1ac5ef98 775a0df7 kernel32!UnhandledExceptionFilter+0x127
1ac5efa0 775a0cd4 ntdll!__RtlUserThreadStart+0x62
1ac5efb4 775a0b71 ntdll!_EH4_CallFilterFunc+0x12
1ac5efdc 77576ac9 ntdll!_except_handler4+0x8e
1ac5f000 77576a9b ntdll!ExecuteHandler2+0x26
1ac5f0b0 7754010f ntdll!ExecuteHandler+0x24
1ac5f0b0 6e8858bb ntdll!KiUserExceptionDispatcher+0xf
1ac5f400 74e68ed7 mfc80u!ATL::CSimpleStringT<wchar_t,1>::GetString [f:\dd\vctools\vc7libs\ship\atlmfc\include\atlsimpstr.h @ 548]
1ac5fec0 6e8c818e msvcr80!_NLG_Return [F:\dd\vctools\crt_bld\SELF_X86\crt\prebuild\eh\i386\lowhelpr.asm @ 73]
1ac5ff48 74e429bb mfc80u!_AfxThreadEntry+0xf2 [f:\dd\vctools\vc7libs\ship\atlmfc\src\mfc\thrdcore.cpp @ 109]
1ac5ff80 74e42a47 msvcr80!_callthreadstartex+0x1b [f:\dd\vctools\crt_bld\self_x86\crt\src\threadex.c @ 348]
1ac5ff88 76833677 msvcr80!_threadstartex+0x66 [f:\dd\vctools\crt_bld\self_x86\crt\src\threadex.c @ 326]
1ac5ff94 77569f02 kernel32!BaseThreadInitThunk+0xe
1ac5ffd4 77569ed5 ntdll!__RtlUserThreadStart+0x70
1ac5ffec 00000000 ntdll!_RtlUserThreadStart+0x1b

0:016> r
eax=00000000 ebx=1ac5efc8 ecx=19850614 edx=00000000 esi=1ac5eed0 edi=00000000
eip=7754fd21 esp=1ac5ee8c ebp=1ac5eef4 iopl=0         nv up ei pl nz na pe nc
cs=0023  ss=002b  ds=002b  es=002b  fs=0053  gs=002b             efl=00010206 
```

ESP 的值`1ac5ee8c`- EBP `1ac5eef4`= 104 字节差。那么里面有什么？

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2013-02-22T09:29:59.173

ESP 是当前堆栈指针。EBP 是当前堆栈帧的基指针。

调用函数时，通常会在堆栈上为局部变量保留空间。该空间通常通过 EBP 引用（在函数调用期间，所有局部变量和函数参数都是从该寄存器的已知常量偏移量。）另一方面，ESP 将在函数调用期间随着其他函数的调用而改变，或作为临时堆栈空间用于部分操作结果。

请注意，如今大多数编译器都可以选择通过 ESP 引用所有局部变量。这释放了 EBP 以用作通用寄存器。

通常，当您查看函数顶部的反汇编代码时，您会看到如下内容：

```
push EBP
mov  EBP, ESP
sub  ESP, <some_number> 
```

因此，EBP 将指向此帧的堆栈顶部，而 ESP 将指向堆栈上的下一个可用字节。（堆栈通常 - 但不必 - 在内存中增长。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T09:23:12.677

通常，这个空间是为最终存储在堆栈上的局部变量保留的。在函数开始时，`ESP`以适当的值递减。

在您的情况下，该函数中有 104 个字节的本地变量。

# vb.net - 获取发布位置或发布文件夹位置

> ID：15020622
> 
> 赞同：1
> 
> 时间：2013-02-22T09:19:09.663
> 
> 标签：vb.net

我知道

```
Application.ExecutablePath 
```

可以得到安装文件夹。

但是我怎样才能获得我在项目的“PUBLISH”选项卡中放置的发布文件夹的位置？说..（当然这行不通）

```
Application.PublishingPath 
```

我只是想在那里获取清单文件，以便我可以知道发布文件夹中应用程序的当前版本号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T05:18:36.663

这是我的答案。。

```
Deployment.Application.ApplicationDeployment.CurrentDeployment.UpdateLocation 
```

谢谢大家 ！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-28T03:33:33.607

你应该手动将发布路径存储到一个变量..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T10:41:38.450

简单地：

```
ApplicationDeployment.CurrentDeployment.ActivationUri 
```

# quartz-scheduler - Quartz - 如何关闭和重新启动调度程序？

> ID：15020625
> 
> 赞同：9
> 
> 时间：2013-02-22T09:19:23.733
> 
> 标签：quartz-scheduler

我得到的调度程序如下：

```
StdScheduler schedulerBean = (StdScheduler) ApplicationContextUtil.getBean(schedulerBeanName);
schedulerBean.start(); 
```

然后

```
schedulerBean.shutdown(); 
```

在执行了一些其他代码之后，我再次调用 schedulerBean.start() 。

现在代码抛出错误-“org.quartz.SchedulerException：调用shutdown（）后无法重新启动调度程序”

你能告诉我如何解决这个问题吗？

提前致谢， 凯瑟尔

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-24T17:49:41.890

一旦你关闭了一个调度程序，它就不能重新启动，因为线程和其他资源被永久破坏。

您可以阅读[Quartz Scheduler API 参考](http://quartz-scheduler.org/api/)，以找到满足您需求的方法。您可以在下面找到一些可用的方法。

*   `standby()`方法。暂时停止调度程序触发触发器。当调用 start() 时（使调度程序退出待机模式），在 start() 方法执行期间将不会应用触发失火指令 - 任何失火将在之后立即检测到（由 JobStore 的正常进程） .
*   `pauseJob(JobKey jobKey)`- `resumeJob(JobKey jobKey)`。使用给定键暂停 JobDetail - 通过暂停其所有当前触发器。在 resumeJob(JobKey jobKey) 上，如果任何 Job'sTrigger 错过了一个或多个触发时间，则将应用 Trigger 的 misfire 指令。
*   `interrupt(JobKey jobKey)`. 在此 Scheduler 实例中请求中断所有当前正在执行的已识别作业实例，该作业必须是 InterruptableJob 接口的实现者。如果当前正在执行已识别作业的多个实例，则将在每个实例上调用 InterruptableJob#interrupt() 方法。但是，有一个限制，如果一个实例上的 interrupt() 引发异常，所有剩余的实例（尚未被中断的）都不会调用它们的 interrupt() 方法。如果您希望中断作业的特定实例（当执行多个作业时），您可以通过调用 getCurrentlyExecutingJobs() 来获取作业实例的句柄，然后自己调用 interrupt() 来实现。此方法不支持集群。那是，
*   `unscheduleJob(TriggerKey triggerKey)`. 从调度程序中删除指示的触发器。如果相关作业没有任何其他触发器，并且该作业不持久，则该作业也将被删除。

请注意，您可以创建一个实现 ServletContextListener 接口的侦听器，以便：

*   当容器关闭时，所有作业都被中断，调度程序也被关闭
*   创建调度程序并在容器启动时调度作业

如果您想创建这样的侦听器，我可以提供更多详细信息。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-01T12:57:46.123

只需删除您的调度程序对象，`schedulerBean.Shutdown()`然后像第一次一样再次调用您的调度程序方法。

```
schedulerBean.Shutdown();    
   //do some work 
schedulerBean = null;
StdScheduler schedulerBean = (StdScheduler) ApplicationContextUtil.getBean(schedulerBeanName);
schedulerBean.Start(); 
```

# c# - List.Contains 无法正常工作

> ID：15020634
> 
> 赞同：5
> 
> 时间：2013-02-22T09:19:48.670
> 
> 标签：c#, linq, list

我有一个包含对象的列表，但这些对象在列表中并不是唯一的。我写了这段代码以使它们在另一个列表中独一无二：

```
 foreach (CategoryProductsResult categoryProductsResult in categoryProductsResults.Where(categoryProductsResult => !resultSet.Contains(categoryProductsResult)))
 {
    resultSet.Add(categoryProductsResult);
 } 
```

但最终 resultSet 与 categoryProductsResults 相同。

categoryProductsResult 的第二行：

![在此处输入图像描述](../Images/947849039def530b45c365ab139f2b7d.png)

结果集第一行：

![在此处输入图像描述](../Images/203b367b5c88ac17dc732208bb93b6c6.png)

如您所见，resultSet 的第一行和 categoryProductsResult 的第二行相同，但是它将第二行添加到 resultSet。

你有什么建议吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-22T09:24:34.240

`Contains`使用默认比较器来比较引用，因为您的类不会覆盖`Equals`and `GetHashCode`。

```
class CategoryProductsResult
{
    public string Name { get; set; }
    // ...

    public override bool  Equals(object obj)
    {
        if(obj == null)return false;
        CategoryProductsResult other = obj as CategoryProductsResult;
        if(other == null)return false;
        return other.Name == this.Name;
    }

    public override int  GetHashCode()
    {
         return Name.GetHashCode();
    }
} 
```

现在您可以简单地使用：

```
resultSet = categoryProductsResults.Distinct().ToList(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T09:23:15.153

List 使用 EqualityComparer.Default 返回的比较器，并根据文档：

> Default 属性检查类型 T 是否实现了 System.IEquatable(Of T) 接口，如果是，则返回使用该实现的 EqualityComparer(Of T)。否则，它返回一个使用 T 提供的 Object.Equals 和 Object.GetHashCode 覆盖的 EqualityComparer(Of T)。

因此，您可以在自定义类上实现 IEquatable，也可以覆盖 Equals（和 GetHashCode）方法以根据您需要的属性进行比较。或者，您可以使用 linq：

布尔包含 = list.Any(i => i.Id == obj.Id);

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T09:27:14.673

每个`categoryProductsResult`都彼此不同。就像您可以[在这里](http://msdn.microsoft.com/en-us/library/ms173147%28v=vs.80%29.aspx)看到的一样。如果您想要一个更简单的并且 ProductId 是您的唯一标识符。只需执行以下代码：

```
foreach (CategoryProductsResult categoryProductsResult in categoryProductsResults.Where(categoryProductsResult => resultSet.ProductId !=categoryProductsResult.ProductId)
{
    resultSet.Add(categoryProductsResult);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T09:22:53.153

列表中的引用对象由它们的哈希码索引。因此，`Contains`永远不会找到具有相同哈希码的引用对象（除非您覆盖类中的`GetHashCode`and`Equals`实现。

这个[SO 答案](https://stackoverflow.com/questions/2143815/icollectiont-contains-on-custom-types)解释了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-22T09:24:53.993

您需要检查当前项目是否包含在每次迭代的目标列表中。目前，您在循环开始时检查一次，这意味着您的所有项目都不在目标列表中。

我认为[Distinct](http://msdn.microsoft.com/de-de/library/vstudio/bb348436.aspx)已经在做你想做的事，你可能想使用这个扩展而不是你自己的循环。

# android - Android 当我们没有任何服务器时如何检查应用更新？

> ID：15020636
> 
> 赞同：2
> 
> 时间：2013-02-22T09:20:13.120
> 
> 标签：android, dropbox

首先，我很抱歉这不是完全与编程相关的问题，而是想要一个解决方案。

我正在设计一个不在 Play Store 上的应用程序，我什至没有服务器。我想每周检查一次应用程序更新。如果有可用更新，我想显示一个对话框，单击该对话框，我的应用程序将下载存储在 Dropbox 上的新 apk。

那我可以这样做吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T09:29:23.320

一个简单的方法是向 Dropbox 添加一个包含新 APK 版本代码的文本文件。

您可以下载它并将其与当前安装的版本进行比较。

PS 版本详细信息可以从[PackageManager](https://stackoverflow.com/questions/6593592/get-application-version-programatically-in-android)中检索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T09:41:01.913

没有你自己的服务器真的很奇怪。

您必须为您的应用程序创建一个 Dropbox 帐户，然后使用 Dropbox api 连接到该帐户并检查您上传到那里的 apk 的 Lastmodified 日期 - 或者使用像 parse.com 这样的服务 + 库，您可以在其中向所有人发送消息您的应用用户。

# python - 登录使用 Microsoft ForeFront“线程管理网关”的网站

> ID：15020638
> 
> 赞同：1
> 
> 时间：2013-02-22T09:20:18.790
> 
> 标签：python, authentication, cookies

我想使用 python 登录一个使用 的网站`Microsoft Forefront`，并检索内部网页的内容进行处理。

我对 python 并不陌生，但我没有使用过任何 URL 库。我检查了以下帖子：

*   [如何使用 python 登录网站？](https://stackoverflow.com/questions/4414683/how-can-i-log-into-a-website-using-python)
*   [如何使用 Python 登录网站？](https://stackoverflow.com/questions/2910221/how-can-i-login-to-a-website-with-python)
*   [如何使用 Python 登录网页并检索 cookie 以供以后使用？](https://stackoverflow.com/questions/189555/how-to-use-python-to-login-to-a-webpage-and-retrieve-cookies-for-later-usage)
*   [使用python登录网站](http://martinjc.com/2011/06/09/logging-in-to-websites-with-python/)

我还尝试了几个模块，例如`requests`. 我仍然无法理解应该如何完成，输入用户名/密码是否足够？或者我应该以某种方式使用 cookie 进行身份验证？任何示例代码都将不胜感激。

这是我到目前为止的代码：

```
import requests

NAME = 'XXX'
PASSWORD = 'XXX'

URL = 'https://intra.xxx.se/CookieAuth.dll?GetLogon?curl=Z2F&reason=0&formdir=3'

def main():
    # Start a session so we can have persistant cookies
    session = requests.session()

    # This is the form data that the page sends when logging in
    login_data = {
        'username': NAME,
        'password': PASSWORD,
        'SubmitCreds': 'login',
    }

    # Authenticate
    r = session.post(URL, data=login_data)

    # Try accessing a page that requires you to be logged in
    r = session.get('https://intra.xxx.se/?t=1-2')
    print r

main() 
```

`session.post`但是上面的代码在-line上导致以下异常：

```
raise ConnectionError(e)
requests.exceptions.ConnectionError: HTTPSConnectionPool(host='intra.xxx.se', port=443): Max retries exceeded with url: /CookieAuth.dll?GetLogon?curl=Z2F&reason=0&formdir=3 (Caused by <class 'socket.error'>: [Errno 10060] A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond) 
```

***更新：*** 我注意到我提供了错误的用户名/密码。更新后，我会收到带有上述代码的 HTTP-200 响应，但是当我尝试访问任何内部站点时，我会收到 HTTP 401 响应。为什么会这样？上面的代码有什么问题？我应该以某种方式使用cookies吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T10:26:35.020

TMG 可能对它阻止的连接类型非常挑剔。下一步是找出 TMG 阻止您的连接尝试的原因。

如果您可以访问 TMG 服务器，请登录到它，启动 TMG 管理用户界面（我不记得它叫什么了）并查看来自您 IP 地址的失败请求的日志。希望它应该告诉您连接被拒绝的原因。

您似乎正试图通过 Intranet 连接到它。我看到它阻止连接的一种方法是，它是否从它认为位于其“内部”网络上的地址接收它们。（TMG 有两个网络接口，因为它打算在两个网络之间使用：一个内部网络，它保护其资源免受威胁，以及一个外部网络，威胁可能来自。）如果它在其外部网络接口上接收到一个请求似乎来自内部网络，它假定 IP 地址已被欺骗并阻止连接。但是，我不能确定是否是这种情况，因为我不知道这台 TMG 服务器的内部网络设置成什么，也不知道您的机器的 IP 地址是否在这个内部网络上。

# android - activity_fullscreen 的 NotFoundException

> ID：15020646
> 
> 赞同：0
> 
> 时间：2013-02-22T09:20:59.533
> 
> 标签：android

我得到一个 NotFoundException。我已经用 R.java 发现它是未找到的 activity_fullscreen。它与全屏活动中的位置相同，全屏活动是由 eclipse 作为示例创建的，效果很好。但我的不会跑。资源：

```
package com.example.dreamadventure;

import android.app.Activity;
import android.os.Bundle;
import android.os.Handler;
import android.view.MotionEvent;
import android.view.View;
import android.widget.ImageView;
import android.view.View.OnClickListener;

public class FullscreenActivity extends Activity {

    ImageView image;

private static final boolean TOGGLE_ON_CLICK = true;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_fullscreen);
        final View contentView = findViewById(R.id.fullscreen);

        image = (ImageView) findViewById(R.id.hintergrund);
        image.setImageResource(R.drawable.eulenloch);

    }
} 
```

XML:

```
 <View xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/fullscreen" 
    android:layout_height="fill_parent" 
    android:layout_width="fill_parent" 
    android:keepScreenOn="true"
    android:layout_centerHorizontal="true"
    android:background="#FFFFFF" >

    <ImageView android:id="@+id/hintergrund" 
        android:layout_height="wrap_content" 
        android:layout_width="wrap_content" 
        android:layout_centerHorizontal="true"
        android:layout_marginTop="50px"
        android:padding="12dip"
        android:src="@drawable/eulenloch"
        android:background="#FFFFFF">
    </ImageView>

  </View> 
```

谁能告诉我有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T09:24:29.267

一个视图不能容纳任何其他视图，你的布局文件是错误的，使用 LinearLayout 而不是 View，清理你的项目，它会工作

更新

```
 <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter> 
```

在 mainfest 的活动中使用这个过滤器而不是上面的

```
 <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter> 
```

# javascript - 是否可以通过 google 闭包 linter (gjslint) 工具检查函数参数？

> ID：15020648
> 
> 赞同：0
> 
> 时间：2013-02-22T09:21:07.067
> 
> 标签：javascript, gjslint

例如，我有以下脚本“test.js”：

```
/**
 * Adds two numbers.
 * @param {number} a First number.
 * @param {number} b First number.
 * @return {number} Sum of two numbers.
 */
function add(a, b) {
  return a + b;
}

var sum = add(1, 2);
var sum1 = add(1, 2, 4);
var sum2 = add('1', '2'); 
```

函数“add”由 jsdoc 注释。它接受两个数字。我想通过 gjslint 检查输入参数。

```
gjslint --strict --jslint_error "all" --jsdoc test.js 
```

我希望在计算 sum1（3 个输入参数）和 sum2（2 个字符串参数）的行中看到 2 个错误。但工具显示“已检查 1 个文件，未发现错误”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T21:45:09.430

我没有使用 Closure Linter，但我相信它更用于样式问题 - 缺少分号等（遵守[http://google-styleguide.googlecode.com/svn/trunk/javascriptguide.xml](http://google-styleguide.googlecode.com/svn/trunk/javascriptguide.xml)）

然而，闭包编译器会针对上述用例给出 JSC_WRONG_ARGUMENT_COUNT 警告。

# php - 肥皂 php Microsoft Dynamics crm 在线 2011

> ID：15020651
> 
> 赞同：1
> 
> 时间：2013-02-22T09:21:19.947
> 
> 标签：php, soap, dynamics-crm-2011, dynamics-crm, nusoap

我在使用 nusoap 与 microsoft dynamics crm online 2011 交谈时遇到错误。这是一些调试信息

```
 Error: wsdl error: Getting https://testserver2013.api.crm4.dynamics.com/XRMServices/2011/Organization.svc?wsdl=wsdl0 - HTTP ERROR: no proper separation of headers and document

Debug

2013-02-22 09:13:58.670652 nusoap_client: ctor wsdl=wsdl timeout=0 response_timeout=30
endpoint=string(16) "organization.xml"
2013-02-22 09:13:58.676050 nusoap_client: will use lazy evaluation of wsdl from organization.xml
2013-02-22 09:13:58.676090 nusoap_client: setCredentials username=testserver2013.onmicrosoft.com\matthewhudghton authtype=ntlm certRequest=
array(0) {
}
2013-02-22 09:13:58.676141 nusoap_client: setUseCURL(1)
2013-02-22 09:13:58.676169 nusoap_client: useHTTPPersistentConnection
2013-02-22 09:13:58.676367 nusoap_client: call: operation=Create, namespace=http://schemas.microsoft.com/crm/2007/WebServices, soapAction=http://schemas.microsoft.com/crm/2007/WebServices/Create, rpcParams=, style=rpc, use=encoded, endpointType=wsdl
params=string(223) "<?xml version="1.0" encoding="utf-8"?><soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"></soap:Envelope>"
headers=array(3) {
  ["SOAPAction"]=>
  string(56) "http://schemas.microsoft.com/crm/2007/WebServices/Create"
  ["Content-Type"]=>
  string(23) "text/xml; charset=utf-8"
  ["Content-Length"]=>
  int(1095)
}
2013-02-22 09:13:58.676435 nusoap_client: instantiating wsdl class with doc: organization.xml
2013-02-22 09:13:58.676539 wsdl: ctor wsdl= timeout=0 response_timeout=30
2013-02-22 09:13:58.676578 wsdl: parse and process WSDL path=
2013-02-22 09:13:58.676632 wsdl: setCredentials username=testserver2013.onmicrosoft.com\matthewhudghton authtype=ntlm certRequest=
array(0) {
}
2013-02-22 09:13:58.676679 wsdl: parse and process WSDL path=organization.xml
2013-02-22 09:13:58.676713 wsdl: parse WSDL at path=organization.xml
2013-02-22 09:13:58.676785 wsdl: getting WSDL file organization.xml
2013-02-22 09:13:58.693021 wsdl: Parse WSDL
2013-02-22 09:13:58.708375 wsdl: parsing import http://schemas.microsoft.com/xrm/2011/Contracts/Services - https://testserver2013.api.crm4.dynamics.com/XRMServices/2011/Organization.svc?wsdl=wsdl0 (1)
2013-02-22 09:13:58.708615 wsdl: current service: OrganizationService
2013-02-22 09:13:58.708834 wsdl: current port: CustomBinding_IOrganizationService
2013-02-22 09:13:58.709290 wsdl: Parsing WSDL done
2013-02-22 09:13:58.709414 wsdl: parse WSDL at path=https://testserver2013.api.crm4.dynamics.com/XRMServices/2011/Organization.svc?wsdl=wsdl0
2013-02-22 09:13:58.709482 wsdl: getting WSDL http(s) URL https://testserver2013.api.crm4.dynamics.com/XRMServices/2011/Organization.svc?wsdl=wsdl0
2013-02-22 09:13:58.709646 soap_transport_http: ctor url=https://testserver2013.api.crm4.dynamics.com/XRMServices/2011/Organization.svc?wsdl=wsdl0 use_curl=1 curl_options:
array(0) {
}
2013-02-22 09:13:58.709750 soap_transport_http: parsed URL scheme = https
2013-02-22 09:13:58.709814 soap_transport_http: parsed URL host = testserver2013.api.crm4.dynamics.com
2013-02-22 09:13:58.709865 soap_transport_http: parsed URL path = /XRMServices/2011/Organization.svc
2013-02-22 09:13:58.709916 soap_transport_http: parsed URL query = wsdl=wsdl0
2013-02-22 09:13:58.709984 soap_transport_http: set header Host: testserver2013.api.crm4.dynamics.com
2013-02-22 09:13:58.710126 soap_transport_http: set header User-Agent: NuSOAP/0.9.5 (1.123)
2013-02-22 09:13:58.710205 soap_transport_http: setCredentials username=testserver2013.onmicrosoft.com\matthewhudghton authtype=ntlm digestRequest=
array(0) {
}
2013-02-22 09:13:58.710270 soap_transport_http: certRequest=
array(0) {
}
2013-02-22 09:13:58.710334 soap_transport_http: Authorization header not set for ntlm
2013-02-22 09:13:58.710398 soap_transport_http: set header Accept-Encoding: gzip, deflate
2013-02-22 09:13:58.710452 soap_transport_http: set header Connection: close
2013-02-22 09:13:58.710512 soap_transport_http: entered send() with data of length: 0
2013-02-22 09:13:58.710583 soap_transport_http: connect connection_timeout 0, response_timeout 30, scheme https, host testserver2013.api.crm4.dynamics.com, port 443
2013-02-22 09:13:58.710662 soap_transport_http: connect using cURL
2013-02-22 09:13:58.750685 soap_transport_http: setCurlOption option=10002, value=
string(93) "https://testserver2013.api.crm4.dynamics.com:443/XRMServices/2011/Organization.svc?wsdl=wsdl0"
2013-02-22 09:13:58.750843 soap_transport_http: setCurlOption option=52, value=
int(1)
2013-02-22 09:13:58.750920 soap_transport_http: setCurlOption option=42, value=
int(1)
2013-02-22 09:13:58.750993 soap_transport_http: setCurlOption option=19913, value=
int(1)
2013-02-22 09:13:58.751065 soap_transport_http: setCurlOption option=13, value=
int(30)
2013-02-22 09:13:58.751133 soap_transport_http: set cURL SSL verify options
2013-02-22 09:13:58.751186 soap_transport_http: setCurlOption option=64, value=
int(0)
2013-02-22 09:13:58.751255 soap_transport_http: setCurlOption option=81, value=
int(0)
2013-02-22 09:13:58.751326 soap_transport_http: set cURL username/password
2013-02-22 09:13:58.751385 soap_transport_http: setCurlOption option=10005, value=
string(62) "testserver2013.onmicrosoft.com\matthewhudghton:fakepassword"
2013-02-22 09:13:58.751519 soap_transport_http: set cURL for NTLM authentication
2013-02-22 09:13:58.751574 soap_transport_http: setCurlOption option=107, value=
int(8)
2013-02-22 09:13:58.751644 soap_transport_http: cURL connection set up
2013-02-22 09:13:58.751721 soap_transport_http: HTTP request: GET /XRMServices/2011/Organization.svc?wsdl=wsdl0 HTTP/1.1
2013-02-22 09:13:58.751791 soap_transport_http: HTTP header: Host: testserver2013.api.crm4.dynamics.com
2013-02-22 09:13:58.751845 soap_transport_http: HTTP header: User-Agent: NuSOAP/0.9.5 (1.123)
2013-02-22 09:13:58.751897 soap_transport_http: HTTP header: Accept-Encoding: gzip, deflate
2013-02-22 09:13:58.751950 soap_transport_http: HTTP header: Connection: close
2013-02-22 09:13:58.752017 soap_transport_http: Skip cURL header Host: testserver2013.api.crm4.dynamics.com
2013-02-22 09:13:58.752091 soap_transport_http: Skip cURL header Connection: close
2013-02-22 09:13:58.752145 soap_transport_http: setCurlOption option=10023, value=
array(2) {
  [0]=>
  string(32) "User-Agent: NuSOAP/0.9.5 (1.123)"
  [1]=>
  string(30) "Accept-Encoding: gzip, deflate"
}
2013-02-22 09:13:58.752243 soap_transport_http: set cURL HTTP headers
2013-02-22 09:13:58.752369 soap_transport_http: set cURL payload
2013-02-22 09:13:58.752444 soap_transport_http: send and receive with cURL
2013-02-22 09:14:09.725981 soap_transport_http: No cURL error, closing cURL
2013-02-22 09:14:09.726600 soap_transport_http: Found HTTP header to skip
2013-02-22 09:14:09.726673 soap_transport_http: Found HTTP header to skip
2013-02-22 09:14:09.726727 soap_transport_http: no proper separation of headers and document
2013-02-22 09:14:09.726758 soap_transport_http: end of send()
2013-02-22 09:14:09.726804 wsdl: Getting https://testserver2013.api.crm4.dynamics.com/XRMServices/2011/Organization.svc?wsdl=wsdl0 - HTTP ERROR: no proper separation of headers and document
2013-02-22 09:14:09.726898 nusoap_client: checkWSDL
2013-02-22 09:14:09.726932 nusoap_client: got wsdl error: Getting https://testserver2013.api.crm4.dynamics.com/XRMServices/2011/Organization.svc?wsdl=wsdl0 - HTTP ERROR: no proper separation of headers and document
string(0) "" 
```

这是我当前的代码：

```
 <?php
require_once('lib/nusoap.php');

$login ='testserver2013.onmicrosoft.com\matthewhudghton'; // crm login name 
$pass ='fakepassword';
$useCURL = 1;

$client = new nusoap_client("organization.xml", 'wsdl');
$client->setCredentials($login, $pass, 'ntlm');
$err = $client->getError();
if ($err) {
echo '<h2>Constructor error</h2><pre>' . $err . '</pre>';
echo '<h2>Debug</h2><pre>' . htmlspecialchars($client->getDebug(), ENT_QUOTES) . '</pre>';
exit();
}
$client->setUseCurl($useCURL);
$client->useHTTPPersistentConnection();

// Prepare values for the new contact.
$firstname = "112";
$lastname = "123";
$donotbulkemail = "true";
$address1_stateorprovince = "MT";
$address1_postalcode = "99999";
$address1_line1 = "23 Market St.";
$address1_city = "Sammamish";

// This exact header was recieved from GenerateAuthenticationHeader() JScript function.
$authenticationHeader = '<soap:Header><CrmAuthenticationToken xmlns=“http://schemas.microsoft.com/crm/2007/WebServices“&gt;<AuthenticationType xmlns=“http://schemas.microsoft.com/crm/2007/CoreTypes“&gt;1</AuthenticationType><OrganizationName xmlns=“http://schemas.microsoft.com/crm/2007/CoreTypes“&gt;personal</OrganizationName><CallerId xmlns=“http://schemas.microsoft.com/crm/2007/CoreTypes“&gt;00000000-0000-0000-0000-000000000000</CallerId></CrmAuthenticationToken></soap:Header>';

// Prepare the SOAP message.
$xml = "<?xml version='1.0' encoding='utf-8'?><soap:Envelope xmlns:soap='http://schemas.xmlsoap.org/soap/envelope/' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xmlns:xsd='http://www.w3.org/2001/XMLSchema'>" .  $authenticationHeader . "<soap:Body><Create xmlns='http://schemas.microsoft.com/crm/2007/WebServices'><entity xsi:type='contact'><address1_city>" . $address1_city . "</address1_city>" .  "<address1_line1>" . $address1_line1 . "</address1_line1>" .  "<address1_postalcode>" . $address1_postalcode . "</address1_postalcode>" .  "<address1_stateorprovince>" . $address1_stateorprovince . "</address1_stateorprovince>" .  "<donotbulkemail>" . $donotbulkemail . "</donotbulkemail>" .  "<firstname>" . $firstname . "</firstname>" .  "<lastname>" . $lastname . "</lastname>" .  "</entity>" .  "</Create>" .  "</soap:Body>" .  "</soap:Envelope>";

$headers = array('SOAPAction' => 'http://schemas.microsoft.com/crm/2007/WebServices/Create', 'Content-Type' => 'text/xml; charset=utf-8', 'Content-Length' => strlen($xml));

$xml = '<?xml version="1.0" encoding="utf-8"?>' .
    '<soap:Envelope' .          
        ' xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"' .
        ' xmlns:xsd="http://www.w3.org/2001/XMLSchema"' .
        ' xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">' .
    $soapHeader .
    $soapBody .
    '</soap:Envelope>';

//SOAP call
$result = $client->call('Create', $xml, 'http://schemas.microsoft.com/crm/2007/WebServices', 'http://schemas.microsoft.com/crm/2007/WebServices/Create', $headers);

if ($client->fault) {
    echo '<p><b>Fault: ';
    print_r($result);
    echo '</b></p>';
} else {
    // Check for errors
    $err = $client->getError();
    if ($err) {
        // Display the error
        echo '<p><b>Error: ' . $err . '</b></p>';
        echo '<h2>Debug</h2><pre>' . htmlspecialchars($client->getDebug(), ENT_QUOTES) . '</pre>';
    } else {
        // Display the result
        print_r($result);
    }
}

var_dump($client->response);    

?> 
```

有任何想法吗？不确定是什么“HTTP 错误：没有正确分离标头和文档”，但感觉可能只是因为它由于某种原因无法进行身份验证。我的用户名格式是否正确？谢谢

# ember.js - 如何使用 ember.js 为视图定义控制器？

> ID：15020653
> 
> 赞同：1
> 
> 时间：2013-02-22T09:21:27.210
> 
> 标签：ember.js

不知何故，我不明白如何使用 ember.js 实现需要某个控制器的视图。我将尝试用一个示例来解释我运行的问题：

假设我想构建一个视图组件来创建一个简单的待办事项列表：它包含一个文本字段。该字段下方是迄今为止已输入的所有待办事项的列表。该视图应该有一个存储待办事项项目的控制器（因为我不必在那时推动将它们持久存储）。

我希望该视图可以在 webapp 的不同位置使用（通过我的车把模板），因此它应该独立于访问它的路径。

我的模板如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<html>
  <head>
    <script src="../shared/libs/jquery-1.9.1.js"></script>
    <script src="../shared/libs/handlebars-1.0.0-rc.3.js"></script>
    <script src="../shared/libs/ember-1.0.0-rc.1.js"></script>
    <script src="todo.js"></script>
  </head>
  <body>
    <script type="text/x-handlebars" data-template-name="application">
      {{ view App.TodolistView }}
    </script>

    <script type="text/x-handlebars" data-template-name="todolistView">
      {{view App.CreateTodoTextField
        placeholder="Enter your todo here"
        size=100
        }}
       <ul>
        {{#each todo in controller}}
          <li>{{todo}}</li>
        {{/each}}
      </ul>
    </script>
  </body>
</html> 
```

我的应用程序逻辑如下所示：

```
window.App = Ember.Application.create();

App.TodolistView = Ember.View.extend({
  templateName: 'todolistView'
});

App.TodolistController = Ember.ArrayController.create({
  content: [],
  createItem: function(item) {
     this.pushObject(item);
  }
});

App.CreateTodoTextField = Ember.TextField.extend({
  insertNewline: function() {
    var value = this.get('value');
    if (value) {
      App.TodolistController.createItem(value);
      this.set('value', '');
    }
  }
}); 
```

我对该代码有两个问题：

当我的 TodolistView 尝试使用

```
{{#each todo in controller}} 
```

它实际上访问的是 ApplicationController，而不是 TodolistController

也叫

```
App.TodolistController.createItem(value); 
```

对我来说似乎是个坏主意：即，如果我在一页上有两个 TodoListViews 怎么办？应该在 TodolistController 的当前实例上调用 createItem...

可能我错过了用 ember.js 定义视图的核心概念......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T12:24:08.903

感谢您的提示，这对我有用，但我仍然不确定这是否是它打算使用的方式：

哈佛商学院

```
<script type="text/x-handlebars" data-template-name="todolistView">
  {{view App.CreateTodoTextField
    placeholder="Enter your todo here"
    size=100}}
     <ul>
      {{#each todo in controllers.todolist}}
        <li>{{todo}}</li>
      {{/each}}
    </ul>
</script>

App.ApplicationController = Ember.Controller.extend({   
  needs: ['todolist']
}); 
```

JS

```
App.CreateTodoTextField = Ember.TextField.extend({
  insertNewline: function() {
    var value = this.get('value');
    if (value) {
      this.get('controller').get('controllers.todolist').createItem(value);
      this.set('value', '');
    }
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T11:03:26.087

```
App.CreateTodoTextField = Ember.TextField.extend({
  insertNewline: function() {
    var value = this.get('value');
    if (value) {
      App.TodolistController.createItem(value);
      this.set('value', '');
    }
  }
}); 
```

Todoliscontroller 不能这样访问。只有它的实例可以通过以下方式访问：

```
var controller = this.get('controller');
controller.controllerFor('todolist').createItem(value); 
```

# python - 在 django 中创建缩略图时出现问题

> ID：15020656
> 
> 赞同：0
> 
> 时间：2013-02-22T09:21:38.483
> 
> 标签：python, django

代码是这样的：

```
class Document(models.Model):
    docfile = models.FileField(upload_to='documents/big/')
    thumbnail = models.FileField(upload_to='documents/small/')

    def create_thumbnail(self):        
        if not self.image:
            return         

        from PIL import Image
        from cStringIO import StringIO
        from django.core.files.uploadedfile import SimpleUploadedFile
        import os

        THUMBNAIL_SIZE = (200,200)

        DJANGO_TYPE = self.image.file.content_type

        if DJANGO_TYPE == 'image/jpeg':
            PIL_TYPE = 'jpeg'
            FILE_EXTENSION = 'jpg'

        elif DJANGO_TYPE == 'image/png':
            PIL_TYPE = 'png'
            FILE_EXTENSION = 'png'

        image = Image.open(StringIO(self.image.read()))

        image.thumbnail(THUMBNAIL_SIZE, Image.ANTIALIAS)

        temp_handle = StringIO()
        image.save(temp_handle, PIL_TYPE)
        temp_handle.seek(0)

        suf = SimpleUploadedFile(os.path.split(self.image.name)[-1],
         temp_handle.read(), content_type=DJANGO_TYPE)

        self.thumbnail.save('%s_thumbnail.%s'%(os.path.splitext(suf.name)[0],FILE_EXTENSION), suf, save=False)

        def save(self):         

           self.create_thumbnail()
           super(ImageWithThumbnail, self).save() 
```

现在我想将缩略图保存在`documents/small/`. `create_thumbnail`但是在上传图片创建缩略图时，如何从视图或模型中调用这个函数呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-19T06:05:51.757

您可以通过覆盖 django 的默认 save() 方法来做到这一点。为此，请在您的模型类下定义此 save() 函数，如下所示：

```
def save(self, *args, **kwargs):
    self.create_thumbnail()
    super(Document, self).save(*args, **kwargs) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T09:39:04.390

你的意思是你想在你的视图中调用这个函数。然后你可以做

```
from urappname.models import Document 
```

并使用

```
Document.create_thumbnail() 
```

# c++ - 是否有可能知道整数类型有多少位？

> ID：15020657
> 
> 赞同：0
> 
> 时间：2013-02-22T09:21:39.097
> 
> 标签：c++, c++11, language-lawyer

我想使用一些整数类型作为位掩码。我想知道`n`它保证从 0 到任何数字`2^n-1`在这种类型中都是可用的。（其实我会用`uintmax_t`）

我知道它通常`8 * sizeof(uintmax_t)`（或可能`CHAR_BIT * sizeof(uintmax_t)`），但我想它不能保证。

所以我想，找到`n`另一种方式。

我如何实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T09:45:31.373

将[`sizeof`运算符](http://en.cppreference.com/w/cpp/language/sizeof)与`CHAR_BIT`

```
const std::size_t nBits = CHAR_BIT * sizeof(some_integer_type); 
```

这也适用于其他内置 int 类型以及用户定义类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T10:41:45.470

使用[包含](http://en.cppreference.com/w/cpp/types/integer)。[_`cstdint`](http://en.cppreference.com/w/cpp/types/integer)

`typedef`它为整数类型和宏常量提供了跨平台的固定大小的限制。

```
#include <cstdint>
std::int8_t Signed = 0;    // granted to 8bit size.
std::uint8_t Unsigned = 0; // granted to 8bit size.
Signed = INT8_MAX;        // store the max value for a signed 8bit value.
Unsigned = UINT8_MAX;      // store the max value for an unsigned 8bit value. 
```

希望能帮助到你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T09:33:26.830

答案是`1+log2((UINTMAX_MAX>>1)+1)`

它也可以通过重复移位计数位来得出。

# android - 为root Android设备打开/关闭GPS的实用解决方案（带代码）

> ID：15020661
> 
> 赞同：0
> 
> 时间：2013-02-22T09:21:58.960
> 
> 标签：android, gps, root

关于从自定义程序中打开/关闭 GPS 的可能性有很多主题和未解决的问题，所以我决定发表我自己的研究。

众所周知，任何可用的解决方案都使用 hack 或至少使用 root 访问权限。我从 Google Play 测试了很多 GPS 开/关小部件，但没有人在我的所有设备上都成功。提议的或多或少通用的解决方案测试了：

*   Galaxy Tab 2.3.5 股票植根，

*   摩托罗拉 Atrix 4G CM10 4.1.2,

*   HTC Evo 3D 4.0.2 自定义植根，

*   Galaxy Note II 4.1.2 stock root, custom root 和 CM10.1 4.2.1,

*   根植于 Galaxy S III 4.1.2 的股票。

以下是所涉及步骤的简短描述。

1.  创建一个小的存根 APK，它除了接收带有参数的自定义广播并相应地更新 GPS 的安全字符串之外什么都不做。

2.  创建一个包含上述 APK 作为资产的主 GUI APK。

3.  主 APK 应将存根 APK 安装到 /system/app 并重新启动 Android。这是唯一需要root的地方。

4.  主 APK 提供了额外的商品，如小部件、主 GUI 面板、Waze 的可选看门狗、谷歌地图和 iGo 软件以及蓝牙的可选控制。

完整的源代码在这里： [http ://rapidshare.com/files/1458124346/GPSToggler-20130222.7z](http://rapidshare.com/files/1458124346/GPSToggler-20130222.7z)

请将上述代码视为示例，而不是最终产品。错误是可能的，还请记住任何篡改 /system/app 区域可能会软砖您的设备。

硬砖不太可能，但如果您的设备变砖，我不承担任何责任。

# java - 用杰克逊解析 JSON 让我抓狂

> ID：15020663
> 
> 赞同：0
> 
> 时间：2013-02-22T09:22:08.293
> 
> 标签：java, json, jackson

我已经在几分钟内解析了一个 JSON 到 PHP，这很容易。

我需要在 JAVA 中做同样的事情，而且更复杂。我选择了杰克逊。

这里是 JSON：

```
{
 "object":"page",
 "entry":[
    {
        "id":"1849584656581184912",
        "time":1361458605,
        "changes":[
            {
                "field":"feed",
                "value":{
                    "item":"post",
                    "verb":"add",
                    "post_id":"6022322264458251"
                }
            }
        ]
    },
    {
        "id":"184965658184912",
        "time":1361458606,
        "changes":[
            {
                "field":"feed",
                "value":{
                    "item":"comment",
                    "verb":"add",
                    "comment_id":"1849584656581184912_6022322264458251_7510038",
                    "parent_id":"1849584656581184912_6022322264458251",
                    "sender_id":657754651107,
                    "created_time":1361458606
                }
            },
            {
                "field":"feed",
                "value":{
                    "item":"comment",
                    "verb":"add",
                    "comment_id":"1849584656581184912_6022322264458251_7510037",
                    "parent_id":"1849584656581184912_6022322264458251",
                    "sender_id":657754651107,
                    "created_time":1361458606
                }
            }
        ]
    }
]
} 
```

这里的PHP代码：

```
foreach($object["entry"] as $update)
{
    // For each entry in notification, display the entry
    echo "page id = " . $update["id"];
    echo "time = " . $update["time"];

    foreach($update["changes"] as $change) {
       echo "field = " . $change["field"];
       echo "verb = " . $change["value"]["verb"];

       if($change["value"]["item"] == "comment") {
            echo "Nouveau commentaire publié !";
            echo "comment_id = " . $change["value"]["comment_id"];
            echo "parent_id = " . $change["value"]["parent_id"];
            echo "sender_id = " . $change["value"]["sender_id"];
            echo "created_time = " . $change["value"]["created_time"];
       } else if($change["value"]["item"] == "post") {
            echo "Nouveau post publié !";
            echo "post_id = " . $change["value"]["post_id"];
       }
    }
} 
```

所以我需要同样的东西来解析这个 JSON 并显示一些信息。

你知道一个简单的方法来做到这一点，比如在 PHP 中吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T09:34:00.227

如果您只想直接访问某些字段，那么您应该使用[JsonNodes](http://fasterxml.github.com/jackson-databind/javadoc/2.1.0/com/fasterxml/jackson/databind/JsonNode.html)。

```
ObjectMapper mapper = new ObjectMapper();
JsonNode root = mapper.readTree(jsonString);
JsonNode entry = root.get("entry");
… 
```

编辑：一定要看看所有具体的子类。例如，一个[ArrayNode](http://fasterxml.github.com/jackson-databind/javadoc/2.1.0/com/fasterxml/jackson/databind/node/ArrayNode.html)允许您遍历它的所有元素。

与上面的代码相同，带有强制转换：

```
ObjectMapper mapper = new ObjectMapper();
ObjectNode root = (ObjectNode) Jsmapper.readTree(jsonString);
ArrayNode entry = (ArrayNode) root.get("entry");
… 
```

# javascript - Javascript更改链接颜色错误？

> ID：15020665
> 
> 赞同：1
> 
> 时间：2013-02-22T09:22:13.263
> 
> 标签：javascript

我的代码是：

```
<a href="#" onclick="javascript:if(document.body.style.backgroundColor!='#000000'){document.body.style.backgroundColor='#000000';}else{alert('test');}">linkhere</a> 
```

如果我将它粘贴到 jsfiddle ( [http://jsfiddle.net/ey7Lv/](http://jsfiddle.net/ey7Lv/) ) 并运行它不会在第二次单击时显示警报。但我看不出代码有什么问题。

我在这里做错了什么？

使用 RGB 更新：http: [//jsfiddle.net/ey7Lv/16/](http://jsfiddle.net/ey7Lv/16/) 在第二次点击时仍然没有激活警报。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T09:32:25.477

根据记忆，浏览器可以用多种不同的方式表示颜色。您可以告诉它设置 colout 为 #000000，然后它可以将其存储为 'black' 或 rgb(0,0,0)

使用 Chromium，如果我将“#000000”的两个实例更改为“黑色”，它就可以工作。

因此，您更新的代码将是：

```
<a href="#" onclick="javascript:if(document.body.style.backgroundColor!='black'){document.body.style.backgroundColor='black';}else{alert('test');}">linkhere</a> 
```

当然，您可以做的另一件事是在设置之前提醒当前颜色。IE

```
<a href="#" onclick="javascript:if(document.body.style.backgroundColor!='black'){alert(document.body.style.backgroundColor);document.body.style.backgroundColor='black';}else{alert('test');}">linkhere</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T09:31:31.030

```
<a href="#" onclick="javascript:if(document.body.style.backgroundColor!='black'){document.body.style.backgroundColor='black';}else{alert('test');}">linkhere</a> 
```

# regex - Clojure 多行正则表达式

> ID：15020669
> 
> 赞同：17
> 
> 时间：2013-02-22T09:22:39.247
> 
> 标签：regex, clojure

我正在尝试测试基本 html 模式的字符串，虽然我使用 m（多行）修饰符，但它仅在字符串是 1-liner 时才有效

```
(re-find #"(?im)^<html>.*<body>.*</body>.*</html>" c)) 
```

失败：

```
"<html>   <body>   sad   </body> 
     </html>" 
```

作品：

```
"<html>   <body>   sad   </body>      </html>" 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-22T09:46:18.033

免责声明：我不是 Clojure 程序员，但我认为这个问题与语言无关。

当启用多行模式时，插入符号`^`和美元的解释`$`改变如下：它们不是匹配*整个输入字符串的开头和结尾，而是匹配输入字符串**中每一行*的开头和结尾。这 - 据我所知 - 不是你想要/需要的。

您想要的是让您`.*`的 s 匹配换行符（默认情况下它们不执行的操作），这可以通过启用单行模式（也称为 dot-all 模式）来完成。所以这意味着：

```
(re-find #"(?is)^<html>.*<body>.*</body>.*</html>" c)) 
```

您还可以在[RegExr](http://regexr.com?33s9t)上验证这一点。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-02-22T13:18:50.643

您需要使用`(?s)`“dotall 模式”[开关](http://nakkaya.com/2009/10/25/regular-expressions-in-clojure/)。

例子：

```
user=> (re-find #"\d{3}.\d{3}" "123\n456")    
nil

user=> (re-find #"(?s)\d{3}.\d{3}" "123\n456")
"123\n456" 
```

该`(?m)`开关具有欺骗性的名称——它改变了`^`和`$`锚点的作用，允许它们分别匹配行首和行尾——这不是你想要的。

# java - Java 是否优化了不可变对象？

> ID：15020671
> 
> 赞同：10
> 
> 时间：2013-02-22T09:22:52.067
> 
> 标签：java, optimization, immutability

Java 字符串是不可变的，实例化多个具有相同值的字符串会返回相同的对象指针。（有这个术语吗？“池化”似乎很合适，但这已经是指通过减少实例化来进行缓存以节省时间。）

Java 是否也对其他不可变的（用户定义的）类执行此操作（没有术语的事情）？Java 甚至可以检测到一个类是不可变的，还是字符串类独有的东西？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-22T09:24:40.413

写。字符串，您要查找的词是[interning](http://en.wikipedia.org/wiki/String_interning)。

Java 不会为您自己的不可变对象执行此操作。不过，它确实有盒装原语的缓存版本。有关更多信息，请参阅这篇关于[包装类缓存的文章。](https://www.owasp.org/index.php/Java_gotchas#Immutable_Objects_.2F_Wrapper_Class_Caching)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T09:45:05.407

正如这里的其他人所说，这个使用字符串的过程被称为实习。

值得一提的是，在 Java 7 中，具有相同字面值的字符串的行为可能是相同的对象，也可能不是。从 7 开始：

> 在 JDK 7 中，interned 字符串不再分配在 Java 堆的永久代中，而是与应用程序创建的其他对象一起分配在 Java 堆的主要部分（称为年轻代和年老代）中. 此更改将导致更多数据驻留在主 Java 堆中，而永久代中的数据更少，因此可能需要调整堆大小。由于此更改，大多数应用程序只会看到相对较小的堆使用差异，但加载许多类或大量使用 String.intern() 方法的大型应用程序将看到更显着的差异。

查看[Java SE 7 RFE](http://www.oracle.com/technetwork/java/javase/jdk7-relnotes-418459.html#jdk7changes)以获取有关此内容的完整详细信息。

至于你自己的不可变对象，Java 并没有对它们做任何特别的事情——它不知道它们是不可变的。如果它可以检测到它的价值/可能，它*可能会*比其他方法更多地内联方法，但就编译器和 JVM 而言，它们只是另一个对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T09:26:59.243

您正在查找的术语正在迭代。Java 在编译期间“自动”优化字符串，并让开发人员可以在运行时执行此操作。（有关优化的细节取决于 JVM 版本。）

就不可变对象而言。我不认为 Java 支持任何类型的机制来解决相同的实例。字符串类型不是此规则的例外。

原因是您必须使用运算符`new`来创建实例。如果你使用`new`创建字符串实例，你总是会得到两个不同的对象。

intering 仅适用于 String 类型。但是这个概念是免费的，你可以将这样的方法添加到你的不可变类中，并编写一个完成同样事情的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T09:26:05.737

字符串**实习**。维基百科：[字符串实习](https://en.wikipedia.org/wiki/String_interning)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-22T09:26:29.057

String Interning 仅对 String 类是唯一的。我想JVM不会将这些规则应用于用户定义的类。

# java - 带有文本和 ImageIcon 的 JComboBox

> ID：15020679
> 
> 赞同：2
> 
> 时间：2013-02-22T09:23:11.807
> 
> 标签：java, swing, icons, jcombobox, listcellrenderer

早上好，请您介意帮助我确定为什么这个 ListCellRenderer 类没有在组合框单元格处设置图像图标：这是 ListCellRenderer 类：

```
 class MyComboRendere implements ListCellRenderer {

    public Component getListCellRendererComponent(JList list, Object value,
            int index, boolean isSelected, boolean cellHasFocus) {

        JLabel label = new JLabel();
        label.setOpaque(true);
        label.setText(value.toString());
        label.setIcon(new ImageIcon("/pics/Color-icon.png"));
        if (isSelected)
            if (index == 0)
                label.setBackground(Color.RED);
            else if (index == 1)
                label.setBackground(Color.GREEN);
            else
                label.setBackground(Color.BLUE);
        return label;
    }

} 
```

这是设置组合框的方法：

```
public void setComboColor(){
    Vector<String> colors=new Vector<>();
    comboPanel=new JPanel(new BorderLayout());
    colors.add("RED");
    colors.add("GREEN");
    colors.add("BLUE");
    colorCombo=new JComboBox(colors);
    colorCombo.setRenderer(new MyComboRendere());
    comboPanel.add(colorCombo,BorderLayout.BEFORE_FIRST_LINE);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T15:08:42.653

似乎`label.setIcon(new ImageIcon("/pics/Color-icon.png"));`没有得到图标的实际路径，因为它总是返回 null，但它不会引发异常。所以我试着用这个：

```
java.net.URL imgURL = getClass().getResource("/pics/Color-icon.png");
label.setIcon(icon); 
```

它工作正常

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T09:26:33.350

```
"/pics/Color-icon.png" 
```

这存在吗？`ImageIcon`如果加载图像失败，不会抛出任何异常，但会返回`null`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T09:28:41.870

1.  不要在 XxxRenderer 中提供 FileIO，将所有图标加载到局部变量，测试空值

2.  XxxRenderer 触发大量事件（鼠标、键和内部在 API 中实现），然后您重新创建了 Icon on fly

3.  阅读[有关 JComboBox 的 Oracle 教程](http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html)，尝试有关类似问题的代码示例

# ios - ios fmdb错误未第二次插入

> ID：15020682
> 
> 赞同：0
> 
> 时间：2013-02-22T09:23:15.603
> 
> 标签：ios, database, insert, fmdb

我使用 FMDb 插入 sqlite 数据库我的代码是这样的

在第一个视图控制器中：

```
 emp.questions = question;
                if ([finalArray count]==3) {
                    emp.option0 = [finalArray objectAtIndex:0];
                    emp.option1 = [finalArray objectAtIndex:1];
                    emp.option2 = [finalArray objectAtIndex:2];
                    emp.option3= @"no option";
                    emp.option4= @"no option";
                    emp.option5= @"no option";

                }
                  if ([finalArray count]==4) {
                emp.option0 = [finalArray objectAtIndex:0];
                emp.option1 = [finalArray objectAtIndex:1];
                emp.option2 = [finalArray objectAtIndex:2];
                emp.option3 = [finalArray objectAtIndex:3];
                emp.option4= @"no option";
                emp.option5= @"no option";

                  }
                if ([finalArray count]==5) {
                emp.option0 = [finalArray objectAtIndex:0];
                emp.option1 = [finalArray objectAtIndex:1];
                emp.option2 = [finalArray objectAtIndex:2];
                emp.option3 = [finalArray objectAtIndex:3];
                emp.option4 = [finalArray objectAtIndex:4];
                emp.option5= @"no option";

                }
                if ([finalArray count]==6) {
                    emp.option0 = [finalArray objectAtIndex:0];
                    emp.option1 = [finalArray objectAtIndex:1];
                    emp.option2 = [finalArray objectAtIndex:2];
                    emp.option3 = [finalArray objectAtIndex:3];
                    emp.option4 = [finalArray objectAtIndex:4];
                    emp.option5 = [finalArray objectAtIndex:5];

                }

                [[DatabaseManager sharedDatabaseManager] insertDetails:emp];
                [finalArray removeAllObjects]; 
```

IN 数据库管理器

```
[[self database] executeUpdate:@"insert into questionstable(questions, option0,option1,option2,option3,option4,option5) values(?,?,?,?,?,?,?)",emp.questions,emp.option0,emp.option1,emp.option2,emp.option3,emp.option4,emp.option5]; 
```

第一次执行良好，但再次执行该功能

```
[[DatabaseManager sharedDatabaseManager] insertDetails:emp] is  called from FirstViewController i get exception like this : 
```

-[__NSCFString insertDetails:]：无法识别的选择器发送到实例 0x71897a0 2013-02-22 14:49:59.926 ExamApp[3679:c07] ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：'-[__NSCFString insertDetails:]：无法识别的选择器发送到实例 0x71897a0' 请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T09:41:34.420

看起来像你的

```
[DatabaseManager sharedDatabaseManager] 
```

返回错误的对象。请在您的问题中发布此方法。

# java - Eclipse IDE 调试器找不到源

> ID：15020686
> 
> 赞同：0
> 
> 时间：2013-02-22T09:23:25.417
> 
> 标签：java, eclipse, ide, eclipse-juno

Eclipse IDE 中有一些奇怪的行为：

*   我在 jar 中添加了一些资源，现在我可以检查这些类。
*   不幸的是，调试器没有找到源代码，所以我看到了“编辑源代码查找按钮”。使用按钮再次指向源 - 不起作用。

我做了什么： - 我明确地将源添加到运行配置中。调试器也找不到它们。

这里出了什么问题？

![在此处输入图像描述](../Images/25c2e68de8867c9ab65bfaae8d1e63ab.png)

![在此处输入图像描述](../Images/dc5f8295409fa4d8ab679c660b5cc7ca.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T09:55:36.093

从屏幕截图看来，缺少的源似乎是 ClassNotFoundException 类（JDK/JRE 的一部分）的源，而您只显示了一些特定于项目的 jar 附加的源。

如果是这种情况，JDK 的源将单独附加（在 Windows 系统上，如果您有 JDK 而不是 JRE，则它们应该在您在 eclipse 中注册时自动附加）

# java - Android，根，白名单

> ID：15020688
> 
> 赞同：1
> 
> 时间：2013-02-22T09:23:28.653
> 
> 标签：java, android, root, whitelist

如何使用 root 授权的应用程序创建白名单？必须在没有任何提示的情况下拒绝其他应用程序。

我正在寻找现有的解决方案或一些关于如何编写具有此功能的应用程序的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T10:50:54.250

您应该在市场上查看[超级用户。](https://play.google.com/store/apps/details?id=com.noshufou.android.su&hl=en)此应用程序可以管理哪些应用程序对设备具有 root 访问权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-02T11:26:23.923

使用
[下载 Magisk 管理器](https://magiskmanager.com/)

**解决方案 1**

1.  它具有为预授权和其他应用程序选择应用程序的功能

[![在此处输入图像描述](../Images/3d01e0ee6ef198b9c7c435e75b3c8ecc.png)](https://i.stack.imgur.com/EaGCN.jpg)

**解决方案 2**

1.  首先从 Magisk 应用程序手动授予权限
2.  设置默认自动响应 -> 拒绝

[![在此处输入图像描述](../Images/673f953459e5d43739e9dc5c0f517302.png)](https://i.stack.imgur.com/CR6Qu.jpg)

可以自由寻求更多帮助:)

# android - SQLilte 使用 Match 搜索前缀字符串

> ID：15020690
> 
> 赞同：0
> 
> 时间：2013-02-22T09:23:32.637
> 
> 标签：android, sqlite, full-text-search, android-sqlite

我正在使用 FTS3 从数据库中获取内容，我需要获取带有前缀的字符串（内容仅以该字符串开头）。但是当我使用 MATCH 时，它的行为就像包含。

这里的例子：

现在：输入：123 输出：123abc 123aaa aaa123

我想要什么：输入：123 输出：123abc 123aaa

这里我的代码：

```
db.rawQuery("SELECT * FROM " + SQLConstants.TABLE_NAME + " WHERE " + SQLConstants.TABLE_NAME + " MATCH '" + input + "*' ORDER BY " + CODE
        + " ASC;", null); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T09:35:08.940

对于像你这样的目标，通常使用`LIKE`从句。

> LIKE 运算符在 WHERE 子句中用于搜索列中的指定模式。

```
String value = "something"; 
```

解释：

```
like value + "%"; --> return everything that starts with value and behind it can be anything
like % + value; --> return everything that ends with value and before it can be anything
% + like value + "%"; --> return everything that contains value and before and behind it can be anything 
```

在您的情况下，您需要第一种情况：

```
db.rawQuery("SELECT * FROM " + SQLConstants.TABLE_NAME 
         + " WHERE " + SQLConstants.COLUMN_NAME + " like ?
             ORDER BY " + CODE + " ASC", new String[] {input + "%"}); 
```

现在它将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T09:35:06.453

使用 LIKE with % 而不是 Match with *

# makefile - doxygen的安装和make命令中的错误

> ID：15020691
> 
> 赞同：10
> 
> 时间：2013-02-22T09:23:35.993
> 
> 标签：makefile, installation, centos, doxygen

我正在尝试在我的 CentOs 6.3 机器上安装 doxygen，但出现此错误。有任何想法吗？？

```
[root@dell1 doxygen-1.8.3.1]# make install
/usr/bin/install -d /usr/local/bin
/usr/bin/install -d /usr/local/doc/doxygen
/usr/bin/install -m 755 bin/doxygen    /usr/local/bin
/usr/bin/install -m 755 bin/doxytag    /usr/local/bin
/usr/bin/install: cannot stat `bin/doxytag': No such file or directory
make: *** [install] Error 1 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-10-28T08:07:26.297

Bash 的抱怨并没有错：

```
/usr/bin/install: cannot stat `bin/doxytag': No such file or directory 
```

恰好是编译的文件*doxytag*没有包含在下载的 tar 文件中。因此，当您尝试*make*时，它​​找不到该文件。要成功，您有两个选择*：*

## [从这里](https://github.com/vlfeat/vlfeat/blob/master/docsrc/doxytag.py)编译 doxytag.py 文件并将其粘贴到 doxygen 的 bin 目录

您可以使用以下链接从上述链接编译 python 文件 doxytag.py：

```
python -m compileall path_to_the_file/doxytag.py 
```

它应该生成一个带有 .pyc 扩展名的 python 编译可执行文件。现在将此文件移动到您的 doxygen-version 文件夹。例如，

```
mv doxytag.pyc your_path/doxygen-1.8.5/bin/doxytag 
```

或者从[这里下载 doxytag](https://www.dropbox.com/s/fptad4nzc3n22o0/doxytag)

现在，当您尝试*make*时，它​​将完成而没有任何错误。

## 从 Makefile 中注释掉需要 doxytag 文件的行

您可以从[https://www.star.bnl.gov/public/comp/sofi/doxygen/doxytag_usage.html](https://www.star.bnl.gov/public/comp/sofi/doxygen/doxytag_usage.html)了解 doxytag 实用程序。

如果您在文档中并不真正需要此实用程序，只需通过注释掉或删除 doxygen-1.8.5（根据您的版本）目录中存在的 Makefile 中的行来跳过它：

```
#$(INSTTOOL) -m 755 bin/doxytag    $(INSTALL)/bin 
```

然后运行*​​make*命令。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-25T14:18:38.113

doxygen make 很奇怪：“make install”不会调用“make”，所以你需要做一个

```
make
make install 
```

首先生成二进制文件，然后安装它们。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-22T13:56:45.473

[无法统计错误的字面意思是文件或目录不存在 - 或者您没有正确的权限。如果您知道目录所在的位置 - 开始在那里寻找权限和文件是否存在。](http://www.unix.com/unix-advanced-expert-users/27643-cannot-stat-error.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-19T21:32:15.797

以超级用户身份尝试。

```
sudo make install 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-03-20T00:08:33.157

首先，您需要安装一些依赖项

```
sudo apt install cmake
sudo apt install flex
sudo apt install bison 
```

之后，您执行以下命令，它可能会正常工作。

```
git clone https://github.com/doxygen/doxygen.git
cd doxygen
mkdir build
cd builda
cmake -G "Unix Makefiles" ..
make
sudo make install 
```

# multicast - 以太网组播，不发送成员船报告

> ID：15020692
> 
> 赞同：0
> 
> 时间：2013-02-22T09:23:39.523
> 
> 标签：multicast, lan, ethernet, igmp

这是一个家庭作业问题。我尝试了将近一周的时间来寻找解决此问题的方法。问题如下

考虑在扩展以太网 LAN（通过网桥连接的多个以太网 LAN 段）中进行多播。假设主机不发送以太网成员报告（我们在课堂上讨论过）。但是，网桥（不是主机）可以按照我们的意愿配置它们的软件。假设要在该 LAN 上实现 IPv4 多播。您将如何修改网桥以允许有效的多播？即，网桥仅将 IP 多播数据包转发到有接收器的 LAN 网段，并且它应该在网桥处涉及最少的处理量。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T23:22:58.397

您是说主机不发送 IGMP 成员报告吗？因为我从未听说过以太网成员报告..

我对这些要求感到困惑。如果主机无法发送成员报告（假设它是 IGMP 报告），那么网桥如何知道 LAN 段中是否有任何接收者？IP组播是接收者驱动的设计，接收者必须表明他们对某个组播组的兴趣。

# objective-c - 针对多个设备进行扩展

> ID：15020695
> 
> 赞同：3
> 
> 时间：2013-02-22T09:23:53.800
> 
> 标签：objective-c, ios6, storyboard, scaling

所以我正在创建一个应用程序，该应用程序将在 iPhone 4/4s 和 iPhone 5 的 App Store 中发布。

在我的项目中，我使用故事板作为界面。
目前，并不是每个对象都能与上面的对象完美对齐，所以当我在 iphone 4 上进行测试时，每件事都会变得一团糟。

如何修复对象的位置。

我必须硬编码吗？或者我可以为此使用故事板。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T09:55:10.273

我认为自动布局在大多数情况下就足够了。您可以在此处查看综合教程：http: [//floatlearning.com/2012/11/designing-for-multiple-screens-in-ios/](http://floatlearning.com/2012/11/designing-for-multiple-screens-in-ios/)

# c# - 基于 XML 规范的 C# 二进制解码器

> ID：15020696
> 
> 赞同：0
> 
> 时间：2013-02-22T09:24:00.653
> 
> 标签：c#, xml, file, binary, decoding

我想在 .net C# 中为一个二进制文件开发解码器。

你能给我一些指导吗（我知道这个问题是一般性的，而不是特定于代码的）

所以这里是捕获：

1.  XML 文件有 XML 模式（带语法）
2.  基于 XML 模式的 XML 文件包含参数的描述（名称等），我的编码文件具有该参数的值。
3.  还有另一个 XML 用于枚举二进制文件中的一些值。
4.  所以有两个 XML 文件和一个 XML 模式（应用程序的输入将只有 XML 文件和二进制文件）

编辑：

二进制文件具有以下格式：HEADER、Event 1、Event N、Error X、Event N + 1、Event M、FOOTER

XML 文件指定信息在二进制文件中的结构。

那么，针对此类问题的（已知）技术或最佳实践是什么？你有什么一般的指导吗？这种解码等是否有任何类（在.net或开源程序集中）？

BR

# solr - 运行 solr 失败

> ID：15020705
> 
> 赞同：0
> 
> 时间：2013-02-22T09:24:22.243
> 
> 标签：solr, drupal-7, jetty, ubuntu-11.10

我已经在 ubuntu 11.10 上安装了 solr-jetty。当我跑步时`http://localhost:8080/solr`，是的，它可以。但是当我尝试打开时`http://localhost:8080/solr/admin`，显示消息“找不到页面”

我试图用代码运行 solr：

```
java -jar /usr/share/jetty/start.jar 
```

这是屏幕：

```
 agan@dancing:~$ java -jar /usr/share/jetty/start.jar
java.lang.ClassNotFoundException: org.mortbay.xml.XmlConfiguration
        at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
        at org.mortbay.start.Main.invokeMain(Main.java:179)
        at org.mortbay.start.Main.start(Main.java:534)
        at org.mortbay.start.Main.start(Main.java:441)
        at org.mortbay.start.Main.main(Main.java:119) 
```

如何在 ubuntu 11.10 服务器上运行 solr？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T18:34:11.487

您需要在命令行上启动 Solr 实例。在您的 solr 文件夹 solr/example 目录中，您可以在那里找到 start.jar 文件。只需通过命令行登录到您的服务器并找到该 start.jar 文件，然后点击`java -jar start.jar`命令，它将启动 solr 实例。

# jquery - 如何构造 JSON 字符串 django 视图？

> ID：15020710
> 
> 赞同：0
> 
> 时间：2013-02-22T09:24:29.683
> 
> 标签：jquery, python, ajax, django, json

我想在`django`视图中构造这样的json：

```
{
    "Skills": [
        {
            "Name": "Java",
            "Value": "Java"
        },
        {
            "Name": "J2ee",
            "Value": "J2ee"
        },
        {
            "Name": "Python",
            "Value": "Python"
        },
        {
            "Name": "Django",
            "Value": "Django"
        }
    ]
} 
```

python simplejson 不会像上面那样创建它，请提供任何建议。基本上我正在发送对 select2 标签的响应。我正在从 Jquery ajax 调用视图方法..

```
def populateSkills(request):
    print "Inside Populate Skills"
    preload_data = '{"Skills":[{"Name":"Java","Value":"Java"},{"Name":"J2ee","Value":"J2ee"},{"Name":"Python","Value":"Python"},{"Name":"Django","Value":"Django"}]}'
    return HttpResponse(simplejson.dumps(preload_data), content_type="application/json") 
```

我对 preload_data 进行了硬编码，因为我无法构建它。那么我该如何构建它呢？有 JSONObject 来做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T09:46:29.847

使用[simplejson](https://pypi.python.org/pypi/simplejson/)：

```
import simplejson
simplejson.dumps({'Skills': [{'Name': 'Java', 'Value': 'Java'}, {'Name': 'J2ee', 'Value': 'J2ee'}, {'Name': 'Python', 'Value': 'Python'}, {'Name': 'Django', 'Value': 'Django'}] }) 
```

# javascript - 如何使用 javascript 访问 JSON 格式的数据

> ID：15020712
> 
> 赞同：0
> 
> 时间：2013-02-22T09:24:31.287
> 
> 标签：javascript, jquery

我试图弄清楚如何访问 JSON 格式的数据，并且已经花了一整天的时间寻找方法，但我仍然找不到满足我需求的解决方案。与我的问题最接近的相关问题是[这个问题](https://stackoverflow.com/questions/14588928/accessing-json-data-in-a-javascript-variable)，但无济于事。

基本上我正在检索`$.ajax()`以 JSON 格式返回的数据。

```
[{"v":"233","pv":"1.83","avd":"00:01:58","nv":"82.83%","br":"75.11%"},
{"v":"17","pv":"3.65","avd":"00:08:31","nv":"70.59%","br":"58.82%"},
{"v":"9","pv":"2.22","avd":"00:01:51","nv":"0.00%","br":"44.44%"}]
[{"date":"2013-02-01","visits":63},
{"date":"2013-02-02","visits":30}] 
```

我的问题是如何访问 JSON 中的元素，比如我想在 javascript 中获取第二个括号中的所有“nv”值或“date”的所有值？我对这些东西很陌生，所以不熟悉这些术语，对此感到抱歉。

下面是我的代码：

```
var Data = $.ajax({
    url: url,
    type: 'POST',
    dataType:"json",
    async: false
}).responseText;

console.log(Data); 
```

*url*是一个在我的函数内部传递的变量，以防你问。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T09:29:19.987

**更新**：请参阅 Anthony Grist 对您的问题的评论，我错过了您的 JSON 无效的事实。由于他没有发布答案，我会去接它。

您的[JSON](http://json.org)无效，因为您要返回两个单独的数组，这是一个：

```
[{"v":"233","pv":"1.83","avd":"00:01:58","nv":"82.83%","br":"75.11%"},
{"v":"17","pv":"3.65","avd":"00:08:31","nv":"70.59%","br":"58.82%"},
{"v":"9","pv":"2.22","avd":"00:01:51","nv":"0.00%","br":"44.44%"}] 
```

和这个：

```
[{"date":"2013-02-01","visits":63},
{"date":"2013-02-02","visits":30}] 
```

你不能这样做，因为 JSON 文档的顶层必须是**一个**东西（一个对象或一个数组）。

您可以返回一个包含每个数组属性的对象：

```
{
"vdata":
    [{"v":"233","pv":"1.83","avd":"00:01:58","nv":"82.83%","br":"75.11%"},
     {"v":"17","pv":"3.65","avd":"00:08:31","nv":"70.59%","br":"58.82%"},
     {"v":"9","pv":"2.22","avd":"00:01:51","nv":"0.00%","br":"44.44%"}
    ],
"datedata":
    [{"date":"2013-02-01","visits":63},
     {"date":"2013-02-02","visits":30}
    ]
} 
```

解析后（见下文），您可以像这样访问该数据：

```
console.log(data.vdata[0].v); // "233"
console.log(data.datedata[0].date); // "2013-02-01" 
```

或者一个有两个插槽的数组，每个插槽中都有一个数组：

```
[
    [{"v":"233","pv":"1.83","avd":"00:01:58","nv":"82.83%","br":"75.11%"},
     {"v":"17","pv":"3.65","avd":"00:08:31","nv":"70.59%","br":"58.82%"},
     {"v":"9","pv":"2.22","avd":"00:01:51","nv":"0.00%","br":"44.44%"}
    ],
    [{"date":"2013-02-01","visits":63},
     {"date":"2013-02-02","visits":30}
    ]
] 
```

解析后（见下文），您可以像这样访问该数据：

```
console.log(data[0][0].v); // "233"
console.log(data[1][0].date); // "2013-02-01" 
```

就个人而言，我更喜欢使用对象，因为从那时起我就很清楚我正在访问哪个数组。

* * *

原答案：

jQuery 会将 JSON 解析为您的对象并将其传递给`success`函数，然后您可以像访问任何其他对象一样访问该函数。在您的情况下，顶层是一个数组。所以：

```
$.ajax({
    url: url,
    type: 'POST',
    dataType:"json",
    async: false,
    success: function(data) {
        // Use the line from above that suits the way
        // you updated your JSON structure
    }
}); 
```

* * *

旁注：`async: false`已弃用，将在某个时候删除。做同步 ajax 请求通常不是一个好主意，它往往会在请求期间锁定浏览器的 UI。`success`相反，只需构建代码以在触发回调时继续处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T09:35:15.630

如果我理解您的问题，您需要为此数组中的所有对象访问相同的键。

没有直接的方法可以做到这一点，您必须遍历此数组中的所有对象，然后在每个对象中找到所需的键。

JSON.parse() 会将此字符串转换为 Javascript 对象 (JSON)

```
var myData = JSON.parse(Data);

for(var i = 0; i < myData.length; i++) {
    console.log("This is the nv value of the " + i + " object: " + myData[i].nv);
} 
```

# python - 使用 apache 部署 zc.buildout 时出现问题

> ID：15020714
> 
> 赞同：0
> 
> 时间：2013-02-22T09:24:34.947
> 
> 标签：python, django, apache2, mod-wsgi, buildout

我在使用 mod_wsgi 在 Apache 中部署我的构建项目（Django）时遇到了一些问题。

我的文件夹结构：

```
t/
  bootstrap.py
  setup.py
  bin/
     buildout
     django
     django.wsgi
     .....
  eggs/
       raven-3.1.13-py2.7.egg
       ..........
  parts
  project
  develop-eggs
  src/
     some files
  myapp/

    files
    settings.py
    apicontainer/
        .... 
```

应用程序配置文件：

```
<VirtualHost *:80>
        DocumentRoot /home/.../tests/website
         ServerName testapp.com
        <Directory /home/.../tests/website>
            Order allow,deny
            Allow from all
        </Directory>

        Alias /website/ /home/.../tests/website/

        WSGIDaemonProcess testapp.com processes=2 threads=15 display-name=%{GROUP}
        WSGIProcessGroup testapp.com
        # ........ pointing to buildout's django.wsgi ..........
        WSGIScriptAlias / /home/.../tests/t/bin/django.wsgi
        WSGIPassAuthorization On

        ErrorLog ${APACHE_LOG_DIR}/error.log

        # Possible values include: debug, info, notice, warn, error, crit,
        # alert, emerg.
        LogLevel warn    
        CustomLog ${APACHE_LOG_DIR}/access.log combined
</VirtualHost> 
```

./bin/django.wsgi

```
#!/usr/bin/python

import sys
sys.path[0:0] = [
  '/home/.../tests/t/eggs/raven-3.1.13-py2.7.egg',
  '/usr/lib/python2.7/dist-packages',
   ...........
   ...........

  '/home/.../tests/t/eggs/djangorecipe-1.5-py2.7.egg',
  '/home/.../tests/t/eggs/zc.recipe.egg-2.0.0a3-py2.7.egg',
  '/home/.../tests/t',
  ]

import djangorecipe.wsgi

application = djangorecipe.wsgi.main('testproj.settings', logfile='') 
```

构建.cfg

```
[buildout]
parts = python
        django

develop = .
eggs = raven
       .....
       .....

[python]
recipe = zc.recipe.egg
interpreter = python
eggs = ${buildout:eggs}

[django]
recipe = djangorecipe
wsgi = true
project = testproj
settings = settings
eggs = ${buildout:eggs} 
```

我得到的apache错误日志是：

```
[Thu Feb 21 06:19:09 2013] [error] [client 127.0.0.1] mod_wsgi (pid=9772): Exception occurred processing WSGI script '/home/.../tests/t/bin/django.wsgi'.
[Thu Feb 21 06:19:09 2013] [error] [client 127.0.0.1] Traceback (most recent call last):
[Thu Feb 21 06:19:09 2013] [error] [client 127.0.0.1]   File "/usr/lib/python2.7/dist-packages/django/core/handlers/wsgi.py", line 272, in __call__
[Thu Feb 21 06:19:09 2013] [error] [client 127.0.0.1]     response = self.get_response(request)
[Thu Feb 21 06:19:09 2013] [error] [client 127.0.0.1]   File "/usr/lib/python2.7/dist-packages/django/core/handlers/base.py", line 153, in get_response
[Thu Feb 21 06:19:09 2013] [error] [client 127.0.0.1]     response = self.handle_uncaught_exception(request, resolver, sys.exc_info())
[Thu Feb 21 06:19:09 2013] [error] [client 127.0.0.1]   File "/usr/lib/python2.7/dist-packages/django/core/handlers/base.py", line 218, in handle_uncaught_exception
[Thu Feb 21 06:19:09 2013] [error] [client 127.0.0.1]     return callback(request, **param_dict)
[Thu Feb 21 06:19:09 2013] [error] [client 127.0.0.1]   File "/usr/lib/python2.7/dist-packages/django/utils/decorators.py", line 93, in _wrapped_view
[Thu Feb 21 06:19:09 2013] [error] [client 127.0.0.1]     response = view_func(request, *args, **kwargs)
[Thu Feb 21 06:19:09 2013] [error] [client 127.0.0.1]   File "/usr/lib/python2.7/dist-packages/django/views/defaults.py", line 30, in server_error
[Thu Feb 21 06:19:09 2013] [error] [client 127.0.0.1]     t = loader.get_template(template_name) # You need to create a 500.html template.
[Thu Feb 21 06:19:09 2013] [error] [client 127.0.0.1]   File "/usr/lib/python2.7/dist-packages/django/template/loader.py", line 157, in get_template
[Thu Feb 21 06:19:09 2013] [error] [client 127.0.0.1]     template, origin = find_template(template_name)
[Thu Feb 21 06:19:09 2013] [error] [client 127.0.0.1]   File "/usr/lib/python2.7/dist-packages/django/template/loader.py", line 138, in find_template
[Thu Feb 21 06:19:09 2013] [error] [client 127.0.0.1]     raise TemplateDoesNotExist(name)
[Thu Feb 21 06:19:09 2013] [error] [client 127.0.0.1] TemplateDoesNotExist: 500.html 
```

我将 prmission(777) 授予 bin 文件夹。

为了测试 wsgi 的工作，我将 django.wsgi 更改如下，然后将其恢复为旧版本。

```
def application(environ, start_response):
    status = '200 OK'
    output = 'Hello World!'

    response_headers = [('Content-type', 'text/plain'),
                        ('Content-Length', str(len(output)))]
    start_response(status, response_headers)

    return [output] 
```

它给了我结果 Hello World!。

你能帮我找出问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T10:20:12.723

您收到 TemplateDoesNotExist 错误，这意味着您缺少“500.html”模板（请参阅[文档](https://docs.djangoproject.com/en/dev/topics/http/views/#the-500-server-error-view)）。

我建议在您的文件中设置`DEBUG`为（请参阅[文档](https://docs.djangoproject.com/en/1.4/ref/settings/#debug)）。这将导致 django 使用内置的调试模板（而不是缺少的 '500.html'）。调试模板将为您提供更多信息以使用...`True``settings.py`

# c# - JavaScriptSerializer 和 MVC - 与 JSON 作斗争

> ID：15020715
> 
> 赞同：0
> 
> 时间：2013-02-22T09:24:36.193
> 
> 标签：c#, json

我一直试图弄清楚为什么我的一些测试没有工作（TDD）并设法将其追踪到一个类的序列化，但我不确定它为什么不工作。有两种风格，一个简单版本和一个更复杂的版本，稍微复杂一点的版本涉及在 Parameter.Value 中包含一组值。

简单的版本，我有一个可以使用 serailzied 的类`JavaScriptSerializer`（我假设这是 MVC 在生成 JSON 时的工作方式）。它产生的结构如下所示：

```
{
   "Name": "TestQuery",
   "QueryId": 1,
   "Parameters": [
   {
        "Name": "MyString",
        "DataType": 0,
        "Value": "A String",
        "IsArray": false
    }],
   "Sql": "SELECT * FROM Queries"
} 
```

有 3 个 C# 类`Query`（`ParameterCollection`即 a `KeyedCollection<String, Parameter>`）和 a `Parameter`。所有这些都用`DataContract`/`DataMember`属性标记并通过`DataContractSerializer`没有任何问题进行序列化。

但是，将`JavaScriptSerializer`对象正确序列化为上面的 JSON，但是在反序列化时我没有参数，它们似乎只是被遗漏了。

有谁知道为什么这些失败，以及我可以做些什么来解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T09:31:08.133

为什么`KeyedCollection<String, Parameter>`？你有一个数组，而不是字典，所以你的 JSON 应该匹配以下结构：

```
public class Query
{
    public int QueryId { get; set; }
    public string Name { get; set; }
    public string Sql { get; set; }
    public Parameter[] Parameters { get; set; }
}

public class Parameter
{
    public string Name { get; set; }
    public int DataType { get; set; }
    public string Value { get; set; }
    public bool IsArray { get; set; }
} 
```

然后你就可以毫无问题地反序列化它：

```
var serializer = new JavaScriptSerializer();
var json = @"
{
   ""Name"": ""TestQuery"",
   ""QueryId"": 1,
   ""Parameters"": [
   {
        ""Name"": ""MyString"",
        ""DataType"": 0,
        ""Value"": ""A String"",
        ""IsArray"": false
    }],
   ""Sql"": ""SELECT * FROM Queries""
}";
var query = serializer.Deserialize<Query>(json); 
```

您也可以`[Data*]`从视图模型中删除属性，类不使用它们`JavaScriptSerializer`。

# php - 联系表格不起作用 [PHP / AJAX]

> ID：15020718
> 
> 赞同：1
> 
> 时间：2013-02-22T09:24:41.350
> 
> 标签：php, ajax, phpmailer, contact, mailer

当我测试它时，我收到一个弹出窗口说它正在提交，但我也从 ajax 部分收到一条消息，说有一个错误，即使所有内容都通过电子邮件成功发送给我。

我认为一个问题是来自 PHP 和 AJAX 的两种不同的提交消息。那么需要PHP吗？非常感谢您的帮助。

**更新：**

我收到的错误消息是提交后来自 ajax 的错误响应，说“出错了”。我还弹出一个消息，说它已正确提交，是来自 PHP 的回声。

***更新****** *** 实时版本： http: [//pieceofmedesigns.com/test/contact.html](http://pieceofmedesigns.com/test/contact.html)**

 **这是 AJAX：

```
$(function(){

$("#Submit").click(function(){

$.ajax({type:'POST', url: './php/mailer.php', data:$('#frmContact').serialize(), success: function(response) {
$("#spanMessage").html('Please Wait...');

 if(parseInt(response)>1)
   {
     $("#spanMessage").html('<div class="alert alert-success"><button type="button" class="close" data-dismiss="alert">&times;</button><strong>Well done!</strong> Your message has been sent.</div>');
   }
   else{
     alert(response);
     $("#spanMessage").html('<div class="alert alert-error"><button type="button" class="close" data-dismiss="alert">&times;</button><strong>Error! </strong> Somthing Wrong</div>');
   }

}});

}); 
```

这是 PHP 邮件程序：

```
<?php session_start();
if(isset($_POST['Submit'])) {
$youremail = 'myemail@gmail.com';
$fromsubject = 'Test Email';
$txtName = $_POST['txtName'];
$txtEmail = $_POST['txtEmail'];
$txtSubject = $_POST['txtSubject']; 
$txtText = $_POST['txtText']; 
$to = $youremail; 
$mailsubject = 'Masage recived from'.$fromsubject.' Contact Page';
$body = $fromsubject.'

The person that contacted you is  '.$txtName.'
 E-mail: '.$txtEmail'

 Message: 
 '.$txtText.'

|---------END MESSAGE----------|'; 
echo "Thank you fo your feedback. I will contact you shortly if needed.<br/>Go to <a       href='/index.php'>Home Page</a>"; 
                            mail($to, $subject, $body);
 } else { 
echo "You must write a message. </br> Please go to <a href='/contact.php'>Contact Page</a>"; 
}
?> 
```

这是表格：

```
<form action="" method="post" id="frmContact">
<h5>Whats your Name?</h5>
<input name="txtName" type="text" class="txbx" value="Name" /><br />
<h5>Whats your Email?</h5>
<input name="txtEmail" type="text" class="txbx" value="Email" /><br />
<h5>Email Subject?</h5>
<input name="txtSubject" type="text" class="txbx" value="Subject" /><br />
<div class="erabox">
<h5>Message to us</h5>
<textarea name="txtText" cols="" rows="" class="txbx era" value="Message" ></textarea>          <br />
<input name="" type="button" class="sendbtn" value="Send Message" align="left" id="btnSend"/>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T09:30:19.277

您忘记命名按钮并将其 id 设置为`Submit`

```
<input name="Submit" type="button" class="sendbtn" value="Send Message" align="left" id="Submit"/>
             ^ // here was the mistake.                                                   ^ here also 
```

问题就在这里

```
if(parseInt(response)>1)
{
 $("#spanMessage").html('<div class="alert alert-success"><button type="button" class="close" data-dismiss="alert">&times;</button><strong>Well done!</strong> Your message has been sent.</div>');
}
else{
 alert(response);
 $("#spanMessage").html('<div class="alert alert-error"><button type="button" class="close" data-dismiss="alert">&times;</button><strong>Error! </strong> Somthing Wrong</div>');
} 
```

由于您使用的是条件，因此条件总是会落入其他部分。而是`parseInt(response)>1`使用`true` `false`概念`php`并签`true/false`入javascript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T09:30:35.020

```
$("#Submit").click(function(){} 
```

而不是这条线，

尝试

```
$("#frmContact").submit(function(){} 
```

请参阅[jQuery 提交 API](http://api.jquery.com/submit/)了解更多信息。有一个类似的例子。**

# linux - 创建 MongoDB 启动脚本

> ID：15020722
> 
> 赞同：1
> 
> 时间：2013-02-22T09:25:06.117
> 
> 标签：linux, mongodb, startup

我一直在努力创建 mongodb 启动脚本。

我在这里有这个文件“script.js”，其中包含我想要在每次服务器启动时执行的脚本。

我的脚本文件在“/opt/temp/script.js”下

```
db.getCollectionNames().forEach(function(collection) {
  print(collection);
}); 
```

每次服务器重启后我应该写哪个命令来执行这个文件？在哪里放置该命令？请帮我

谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T17:12:52.387

你使用的是什么版本的 Linux，你安装的是什么版本的 MongoDB，你是如何安装的？

例如，如果您按照[MongoDB 文档在 Ubuntu 上安装了 Mongodb，您应该在](http://docs.mongodb.org/manual/tutorial/install-mongodb-on-ubuntu/)**/etc/init.d/mongod**中有一个启动脚本，它将在启动时自动启动 MongoD。

例如，如果您在非标准位置安装了一个候选版本，我发现[这些脚本](https://github.com/syokenz/mongodb-init-script)相当好并且非常可变。

使用此脚本不能保证`mongod`在启动时启动。您需要使用[sysv-rc-conf](http://nickgeoghegan.net/linux/handy-package-sysv-rc-conf)正确设置运行级别，例如链接图像中的 apache2 行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:52:22.633

嗨我设法让它工作我`Script.js`用我的 mongoDb 命令创建了文件并将它放在 /op/myscripts 中。然后在`mongodb-conf`我包含了一旦启动 mongodb 命令就执行我的脚本的命令`mongo /opt/myscripts/script.js`。

# javascript - 在 Zend 项目中实施 Google Analytics/任何 Javascript 的最佳方式/最佳实践（适用于所有页面）

> ID：15020723
> 
> 赞同：1
> 
> 时间：2013-02-22T09:25:06.750
> 
> 标签：javascript, zend-framework, google-analytics

我有一个 Zend 项目，其中包含一些我想用 Google Analytics 监控的页面（主要是表单）。

实施 Google Analytics 代码的最佳方式是什么？我想将其复制/粘贴到`layout/scripts/layout.phtml`（所有表单都使用）。这是“最佳实践”吗？这是一个愚蠢的问题:-]

感谢您的任何回复！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T09:41:24.263

**[更新]：**

对于 Google Analytics，请按照评论中的说明进行操作。

对于任何其他 JS 文件，您可以按照以下说明操作：

* * *

为此，除了将其包含在底部之外，没有“最佳实践”。

从这个意义上说，根据您的**layout.phtml**文件，您有不同的选择。如果**您在布局文件的底部**（不在 之间`<head></head>`）：

```
<?php echo $this->headScript(); ?> 
```

那么您可以拥有一个包含 Analytics 代码的单独文件并执行以下操作：

```
$this->view->headScript()->appendFile('/js/your_code.js'); 
```

init 方法中基本控制器的某个位置（例如）。

如果**底部没有它**，并且希望将其作为单独的文件，则将其添加为部分文件。

```
<?php echo $this->partial('partials/your_code.php', 'stuff'); ?> 
```

最后，如果以上都不适合，您只需在标签之间添加`<script>`代码

# jquery - 如何使用javascript从选定行的html表列中获取值

> ID：15020724
> 
> 赞同：0
> 
> 时间：2013-02-22T09:25:06.720
> 
> 标签：jquery, html

我有一个显示在我的 Web 应用程序上的 html 表，但我想通过单击它来选择一行，然后有一个按钮来获取每列数据作为我可以在 javascript 中使用的变量。这就是我正在尝试的，但它并不完整，因为我不知道该怎么做。记住我想要列中的内容。我的功能...

```
function selectedRows() 
{
   var selectedItems = ('#ScannedLabelTabl; // i wanted to get the selected item (row)

     $.each(selectedItems, function (i, item) {

      });

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T09:36:03.637

```
$('tr').click(function() {
    $('tr').removeClass('selected');
    $(this).addClass('selected');

    var td = $(this).children('td');
    for (var i = 0; i < td.length; ++i) {
        alert(i + ': ' + td[i].innerText);
    }
}); 
```

在此处运行演示：http: [//jsfiddle.net/VjkML/](http://jsfiddle.net/VjkML/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T10:01:11.773

试试下面的代码

```
 $(function () {

    $("td").click(function () {
        $("td", $(this).parent()).each(function () {
            alert($(this).html());
        })
    }) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T09:37:06.943

假设您要允许多项选择（不确定这是否是您想要的），您可以将单击事件处理程序添加到执行该操作的单元格

```
$("tr").click(eventHandler);

function eventHandler(){
    //what this does is verifies of the element has the class, if it doesn't have the class is addeds, if it has the class it's removed
    $(this).toggleClass("selected");
} 
```

然后要获取所有值，请执行以下操作：

```
function getAllValues(){
    var arrayOfValues = [];
    $(".selected").each(function(){
        var value = $(this).//what you want to get val or text
        arrayOfValues.push()

    });
    return arrayOfValues;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T09:36:11.043

我能想到的最简单的方法是在用户单击元素时向行/列添加一个类。可以应用 CSS 样式，并且可以使用 jQuery 的类选择器来枚举选定的元素。

我将构建一个 JSFiddle。

哇。太慢了。奥维利亚的道具。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-18T06:12:23.080

```
var tableRows = $("#ScannedLabelTabl").find("tr");//fetching all rows of the tblebody
$.each(tableRows, function( index, value ) {//iterating all fetched rows
     var tdValue=$(value).find("td:nth-child(3)").html();   
     (value).find("td:nth-child(3)").addClass("adding");//get particular column 
```

# solr - Solr 搜索：按字母搜索名称

> ID：15020728
> 
> 赞同：0
> 
> 时间：2013-02-22T09:25:20.163
> 
> 标签：solr

有没有办法通过字母进行 solr 搜索，例如：在查询中，我想搜索所有以字母“A”开头的名称。请帮助我。谢谢，GK

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T11:01:22.620

是的，您可以在查询中指定如下内容：

```
name:A* 
```

（`name`你的字段名称在哪里）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T17:17:32.457

您想获取整个文档还是仅获取特定字段的值？对于完整文档，只需使用（如在其他答案中）字段：前缀*

如果您只想要特定字段中的术语列表，您可以使用[TermComponent](http://wiki.apache.org/solr/TermsComponent)（带有 terms.prefix）。

# android - 禁用日期选择器中的未来日期选择

> ID：15020729
> 
> 赞同：2
> 
> 时间：2013-02-22T09:25:23.507
> 
> 标签：android, android-alertdialog, android-datepicker

这是我的日期选择器对话框代码。我想在我的日期选择器对话框中禁用未来日期选择。

任何人都可以建议如何？

```
@Override
protected Dialog onCreateDialog(int id)
{
    // TODO Auto-generated method stub
    switch(id)
    {
        case 1:
            Calendar cal=Calendar.getInstance();
            Toast.makeText(DateActivity.this, "- onCreateDialog -", Toast.LENGTH_LONG).show();
            return new DatePickerDialog(this,myDateSetListener,cal.get(Calendar.YEAR), cal.get(Calendar.MONTH)+1, cal.get(Calendar.DAY_OF_YEAR));

        default:
            return null;
    }
}

private DatePickerDialog.OnDateSetListener myDateSetListener = new DatePickerDialog.OnDateSetListener()
{
    @Override
    public void onDateSet(DatePicker view, int year, int monthOfYear, int dayOfMonth)
    {
        // TODO Auto-generated method stub
        String date = "Year: " + String.valueOf(year) + "\n"
                    + "Month: " + String.valueOf(monthOfYear+1) + "\n"
                    + "Day: " + String.valueOf(dayOfMonth);

        Toast.makeText(DateActivity.this, date,Toast.LENGTH_LONG).show();
    }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T05:35:53.840

设置一个`OnDateChangedListener`到你的`DateTimePicker`，在哪里

```
onDateChanged(DatePicker view, int year, int monthOfYear, int dayOfMonth) 
```

检查日期是否在您允许的范围内，如果不在，请`view.updateDate`使用您的最大允许日期来电。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-11T05:37:58.320

把这个方法放在onCreateDialog里面，解决了这个问题，未来的日期一定不是日期选择器dailog上的选择，

```
@Override
protected Dialog onCreateDialog(int id) {
    switch (id) {
    case DATE_DIALOG_ID:
        DatePickerDialog mDatePickerDialog = new DatePickerDialog(this, mDateSetListener, intYear, intMonth, intDay);
        mDatePickerDialog.getDatePicker().setMaxDate(System.currentTimeMillis()); // Important as Future date not selection
        return mDatePickerDialog;
    }
    return null;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-05-11T07:22:04.247

yourdatepicker.getDatePicker().setMaxDate(System.currentTimeMillis());

# java - 如何从字符串在xml中附加一个子节点？

> ID：15020733
> 
> 赞同：0
> 
> 时间：2013-02-22T09:25:37.413
> 
> 标签：java, xml, xml-parsing

我有一个这样的 xml 文件。我正在使用java。

```
<ui>
        <profile name="aaa">
             <country>India</country>
        </profile>

        <profile name="xxx">
             <country>India</country>
        </profile>
</ui> 
```

我想在节点配置文件中附加一个具有属性“aaa”的子节点。我有一个这样的 xml 字符串

```
"<gender>Male</gender><age></age>" 
```

预期输出：

```
 <ui>
        <profile name="aaa">
             <country>India</country>
             <gender>Male</gender>
              <age></age>
        </profile>

        <profile name="xxx">
             <country>India</country>
        </profile>
</ui> 
```

我使用**xpath**来查找属性为 "aaa" 的配置文件元素 `/ui/profile[@name='aaa']`。但是，我不知道如何将子节点附加到其中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T09:35:07.457

尝试这样的事情：

```
 <xsl:template match="@*|node()" name="copy-all">
            <xsl:copy>
                <xsl:apply-templates select="@*|node()" />
            </xsl:copy>
    </xsl:template>

    <xsl:template
            match="ui/profile[@name = 'aaa']"
            name="add">
            <xsl:copy>
                <xsl:apply-templates select="@*|*" />

                    <xsl:element name="gender">
                        <xsl:value-of select="$gender" />
                    </xsl:element>
                    <xsl:element name="age">
                        <xsl:value-of select="$age" />
                    </xsl:element>
            </xsl:copy>
    </xsl:template> 
```

`$gender`并且`$age`是参数值

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-22T09:37:55.210

在java中，您可以在提取的节点上使用[appendNode()方法](http://docs.oracle.com/javase/6/docs/api/org/w3c/dom/Node.html#appendChild%28org.w3c.dom.Node%29)

# java - 在 Java 应用程序中使用 NTLM 身份验证

> ID：15020734
> 
> 赞同：16
> 
> 时间：2013-02-22T09:25:37.987
> 
> 标签：java, windows, security, authentication, ntlm

我想在我的 Java 应用程序中使用 Windows NTLM 身份验证来透明地对 Intranet 用户进行身份验证。如果使用他们的浏览器（单点登录），用户应该不会注意到任何身份验证。

我找到了一些支持 NTLM 的库，但不知道该使用哪一个：

*   [http://spnego.sourceforge.net/](http://spnego.sourceforge.net/)
*   [http://sourceforge.net/projects/ntlmv2auth/](http://sourceforge.net/projects/ntlmv2auth/)
*   [http://jcifs.samba.org/](http://jcifs.samba.org/)
*   [http://www.ioplex.com/jespa.html](http://www.ioplex.com/jespa.html)
*   [http://www.luigidragone.com/software/ntlm-authentication-in-java/](http://www.luigidragone.com/software/ntlm-authentication-in-java/)

有什么建议从哪里开始？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-22T16:04:45.463

在上面的列表中，只有 ntlmv2-auth 和 Jespa 支持 NTLMv2。Jespa 是可行的，但商业化的。ntlmv2-auth 我没有尝试过，但它基于 Liferay 的代码，我以前见过它工作。

'ntlm-authentication-in-java' 只是 NTLMv1，它是旧的、不安全的，并且随着人们升级到较新的 Windows 版本，它可以在越来越少的环境中工作。JCIFS 曾经有一个 NTLMv1 HTTP 身份验证过滤器，但在后来的版本中被删除，因为它的实现方式相当于对不安全协议的中间人攻击。（'ntlm-authentication-in-java' 似乎也是如此。）

“spnego”项目是 Kerberos 而不是 NTLM。如果你想像 IIS 那样复制完整的 IWA，你需要同时支持 NTLMv2 和 Kerberos（'NTLM' auth、'Negotiate' auth、NTLMSSP-in-SPNego auth 和 NTLM-masquerading-as-Negotiate auth）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-12-16T20:14:06.637

Luigi Dragone 的剧本真的很老，而且似乎总是失败。

[如果您添加库jcifs](https://jcifs.samba.org/src/docs/httpclient.html) ， HttpURLConnection 可以与 NTLM一起使用，此示例适用于最新[的 jcifs-1.3.18](https://jcifs.samba.org/src/)：

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.URL;
import java.net.UnknownHostException;
import java.util.HashMap;
import java.util.Map;

import org.apache.http.impl.auth.NTLMEngineException;

public class TestNTLMConnection {
    public static void main(String[] args) throws UnknownHostException, IOException, NTLMEngineException {
        // Method 1 : authentication in URL
        jcifs.Config.registerSmbURLHandler();
        URL urlRequest = new URL("http://domain%5Cuser:pass@127.0.0.1/");

        // or Method 2 : authentication via System.setProperty()
        // System.setProperty("http.auth.ntlm.domain", "domain");
        // System.setProperty("jcifs.smb.client.domain", "domain");
        // System.setProperty("jcifs.smb.client.username", "user");
        // System.setProperty("jcifs.smb.client.password", "pass");
        // Not verified // System.setProperty("jcifs.netbios.hostname", "host");
        // System.setProperty("java.protocol.handler.pkgs", "jcifs");
        // URL urlRequest = new URL("http://127.0.0.1:8180/simulate_get.php");

        HttpURLConnection conn = (HttpURLConnection) urlRequest.openConnection();

        StringBuilder response = new StringBuilder();

        try {
            InputStream stream = conn.getInputStream();
            BufferedReader in = new BufferedReader(new InputStreamReader(stream));

            String str = "";
            while ((str = in.readLine()) != null) {
                response.append(str);
            }
            in.close();   

            System.out.println(response);
        } catch(IOException err) {
            System.out.println(err);
        } finally {
            Map<String, String> msgResponse = new HashMap<String, String>();

            for (int i = 0;; i++) {
                String headerName = conn.getHeaderFieldKey(i);
                String headerValue = conn.getHeaderField(i);
                if (headerName == null && headerValue == null) {
                    break;
                }
                msgResponse.put(headerName == null ? "Method" : headerName, headerValue);
            }

            System.out.println(msgResponse);
        }
    }
} 
```

如果您对每次握手的内容感到好奇，您可以在此[线程](https://stackoverflow.com/questions/576850/alternatives-for-jcifs-ntlm-library/34276513#34276513)上找到另一个使用 jcifs 和 Socket 的示例。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2021-04-20T16:07:17.103

最近不得不在工作中实现这一点，因此这里是使用 Spring 的 RestTemplate 更新的解决方案：

```
import org.apache.http.auth.AuthScope;
import org.apache.http.auth.NTCredentials;
import org.apache.http.impl.client.BasicCredentialsProvider;
import org.apache.http.impl.client.HttpClients;
import org.springframework.http.HttpEntity;
import org.springframework.http.ResponseEntity;
import org.springframework.http.client.HttpComponentsClientHttpRequestFactory;
import org.springframework.web.client.RestTemplate;

import java.io.IOException;

public class Runner {

    public static void main(String[] args) {
        var credentialsProvider = new BasicCredentialsProvider();
        credentialsProvider.setCredentials(AuthScope.ANY, new NTCredentials("username", "password", "", "someDomain"));
        try (var client = HttpClients.custom()
                .setDefaultCredentialsProvider(credentialsProvider)
                .build();) {
            var requestFactory = new HttpComponentsClientHttpRequestFactory();
            requestFactory.setHttpClient(client);
            RestTemplate restTemplate = new RestTemplate(requestFactory);
            ResponseEntity<String> stringResponseEntity = restTemplate.postForEntity("url", new HttpEntity<>("yourDtoObject"), String.class);
        } catch (IOException e) {
            e.printStackTrace();
        }

    }
} 
```

所需的依赖项是：`spring-web`和`org.apache.httpcomponents`

ps：输入用户名不带域很重要，否则不起作用。就像您的域是公司名/用户名一样，人们通常只是将整个内容作为用户名输入，而您应该分别输入它们，其中 domain="companyName" 和 username="username"

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-22T19:06:37.660

参考：[https ://jcifs.samba.org/src/docs/faq.html#ntlmv2](https://jcifs.samba.org/src/docs/faq.html#ntlmv2)

**问：jCIFS 是否支持 NTLMv2？**
**答：**是的。从 1.3.0 开始，JCIFS 完全支持 NTLMv2 并默认使用它。

**注意：**以前包含在 JCIFS 中的 NTLM HTTP SSO 过滤器不支持 NTLMv2。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-22T09:41:00.743

相对于您提供的列表，我会选择 [JCIFS](http://jcifs.samba.org/)。这个库很成熟，他们的文档很好。最重要的是，他们有相当定期的发布，最后一个是 2011 年 11 月。

`Personal Experience`：与我尝试过的其他产品（spnego 和 ntmv2auth）相比，入门相当容易

# c# - 日期时间的字符串：未被识别为有效的日期时间

> ID：15020740
> 
> 赞同：2
> 
> 时间：2013-02-22T09:25:58.077
> 
> 标签：c#, .net, string, datetime, type-conversion

好的，所以经过一些研究，我还没有找到任何方法来解决我的问题。

这是我的字符串到日期转换代码：

```
DateTime startDate = new DateTime();
startDate = DateTime.ParseExact(this.items[5], "dd/MM/yyyy HH:mm:ss", 
                                CultureInfo.InvariantCulture); 
```

这是我要转换的字符串：

```
"22/2/2013 09:57:32" 
```

但是当我编译我有这个错误：

> 字符串未被识别为有效的日期时间。

我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T09:26:52.073

你的模式应该是`"dd/M/yyyy HH:mm:ss"`

`MM`需要前导 0，这在您的输入字符串中未提供。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T09:27:03.567

你需要一个**single`M`而不是`MM`for month**。所以格式应该是：`"dd/M/yyyy HH:mm:ss"`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T09:27:41.390

**一个月**只需要一个“M”。例如：**“dd/M/yyyy HH:mm:ss”**

# c++ - 如何从 XLL 函数返回数组

> ID：15020741
> 
> 赞同：4
> 
> 时间：2013-02-22T09:25:57.650
> 
> 标签：c++, xll

我是编写 XLL 的新手，有人知道如何将 6x1 数组返回到 Excel 吗？

以下是我的功能（一些代码来自其他帖子）：

```
__declspec(dllexport) LPXLOPER12  WINAPI GetArr(char* arg1, char* arg2)
{
   vector<double> arr = functionReturnVector;

   XLOPER12 list;
   list.xltype = xltypeMulti | xlbitDLLFree;
   list.val.array.lparray = new XLOPER12[6];
   list.val.array.rows = 6;
   list.val.array.columns = 1;
   for(int i = 0; i < 6; ++i) {
      list.val.array.lparray[i] = arr[i]; // error: IntelliSense: no operator "=" matches these operands
   }
return &list;
} 
```

[[2013-02-23] 目前我从XLL RETURN ARRAY](http://www.excelforum.com/excel-programming-vba-macros/525375-returning-arrays-from-custom-worksheet-functions-in-xll-files.html)读取代码并查看我的代码，它可以编译但返回 0 ...

```
__declspec(dllexport) LPXLOPER12 WINAPI GetArr(void)
{   
XLOPER xlArray, xlValues[2];

xlValues[0].xltype = xltypeNum;
xlValues[1].xltype = xltypeNum;
xlValues[0].val.num = 11;
xlValues[1].val.num = 17;

xlArray.xltype = xltypeMulti|xlbitDLLFree;
xlArray.val.array.rows = 1;
xlArray.val.array.columns = 2;
xlArray.val.array.lparray = &xlValues;

return &xlArray;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T12:12:12.867

我现在可以在 Excel 工作表中打印一个 1X2 数组，以下是我的代码。

**使用 Func 签名类型 U

1.选择一行两列

2.在第一个单元格中键入命令 =GetArray()

3.Ctrl+Shift+回车

```
 __declspec(dllexport) LPXLOPER12 WINAPI GetArray(void)
{
    static XLOPER12 xlArray;
    XLOPER12 xlValues[2];
    xlValues[0].xltype = xltypeNum;
    xlValues[1].xltype = xltypeNum;
    xlValues[0].val.num = 123;
    xlValues[1].val.num = 456;
    xlArray.xltype = xltypeMulti|xlbitDLLFree;
    xlArray.val.array.rows = 1;
    xlArray.val.array.columns = 2;
    xlArray.val.array.lparray = &xlValues;
    return (LPXLOPER12)&xlArray;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T02:40:20.990

也许[http://xll.codplex.com](http://xll.codplex.com)可以帮助您解决问题，但作为其他试图帮助您的人，您的代码似乎离岸很远。

On ne découvre pas de terre nouvelle sans consir à perdre de vue, d'abord et longtemps, tout rivage。

只是在开玩笑。也许这对你有用。

# joomla - joomla 美德玛特定制

> ID：15020742
> 
> 赞同：0
> 
> 时间：2013-02-22T09:26:02.643
> 
> 标签：joomla, joomla2.5

是否有任何可能的解决方案来开发这种[http://www.tailorstore.co.uk/tailor-made-shirts](http://www.tailorstore.co.uk/tailor-made-shirts) 在 joomla 美德玛特中的功能，就像任何可用于此属性的组件或模块一样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:28:34.203

Joomla 有任何可能的解决方案。只需创建一个包含按钮和 javascript 的组件，即可编辑您在此处显示的页面上的图像 - 并将其全部传递到 meadowmart 购物车中。

在单击按钮和更改图像方面 - 这是非常基本的 javascript。看到这个[如何在不保存到 darabase 的情况下将产品添加到购物车？](https://stackoverflow.com/questions/13008580/how-to-add-product-to-virtuemart-cart-without-saving-to-darabase)关于将产品添加到德德玛特之外的德德玛特购物车

或者使用这样的简单购物车模块： http: [//extensions.joomla.org/extensions/e-commerce/shopping-cart/10116](http://extensions.joomla.org/extensions/e-commerce/shopping-cart/10116)

就现有组件更改您网站上的图像而言，答案是否定的，它几乎可以肯定不存在 - 但这就是 Joomla 的美妙之处 - 能够轻松构建它。

# mockito - 我应该如何使用 org.mockito.AdditionalMatchers.gt？

> ID：15020747
> 
> 赞同：10
> 
> 时间：2013-02-22T09:26:23.850
> 
> 标签：mockito, assert, hamcrest

我试图弄清楚如何`org.mockito.AdditionalMatchers`工作，但我失败了。为什么这个测试失败了？

```
import static org.hamcrest.CoreMatchers.is;
import static org.junit.Assert.*;
import static org.mockito.AdditionalMatchers.*;

public class DemoTest {

    @Test
    public void testGreaterThan() throws Exception {

        assertThat( 17
            , is( gt( 10 ) )
        );
    }
} 
```

输出是：

```
java.lang.AssertionError: 
Expected: is <0>
     got: <17> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-22T11:04:31.290

在这种情况下，您应该使用 Hamcrest 的`greaterThan`。`gt`用于验证模拟对象中方法调用的参数：

```
public class DemoTest {

    private List<Integer> list = Mockito.mock(List.class);

    @Test
    public void testGreaterThan() throws Exception {
        assertThat(17, is(org.hamcrest.Matchers.greaterThan(10)));

        list.add(17);
        verify(list).add(org.mockito.AdditionalMatchers.gt(10));
    }

} 
```

# timezone - 关于 TimeZoneInfo 类（框架 3.5） - 与夏令时相关

> ID：15020757
> 
> 赞同：1
> 
> 时间：2013-02-22T09:26:43.307
> 
> 标签：timezone, dst

我对适用于北美地区时区的夏令时有疑问：

**场景是：**

我必须在以下时区之间工作：东部时间（UTC-5.00）和山区时间（UTC-7:00）。

一般情况下，上述时区从 3 月的第 2 个星期日起将适用 +1 小时的夏令时调整。

案例 1：最初时区相隔 2 小时

案例 2：2013 年 3 月 10 日（今年 3 月的第 2 个星期日）正好在凌晨 1:59:59 之后，时间将是凌晨 3:00（由于夏令时调整）因此接下来的 2 小时时间区域（东部和山区）将相隔 3 小时。

**我在做什么：**

我在机器 X（东部时间）中创建一个文件，然后将此文件发送到另一台机器 Y（在山区时间）。此传输操作消耗的时间可以忽略不计。在 Y 接收到文件后，读取文件的创建时间（这显然会给出东部时间），然后借助 TimeZoneInfo 类的 ConvertTime 方法将该时间转换为山地时间，并将结果存储在D B。这非常完美。

**我的担心是什么：**

当我在夏令时调整适用于东部时间而不适用于山区时间（阅读上面的案例 2）时创建文件时，我是否仍会获得与特定东部时间对应的正确山区时间TimeZoneInfo 类的相同 ConvertTime 方法，还是我需要处理其他任何事情？

希望我说清楚了，如果没有，请询​​问。

寻求解释我的疑问:)

问候，

维卡斯

# android - 在线性布局中的按钮之间留出相同的空间

> ID：15020758
> 
> 赞同：8
> 
> 时间：2013-02-22T09:26:44.007
> 
> 标签：android, android-linearlayout

我有按钮，我想在所有按钮之间放置相同的空间，所以如果我在平板电脑中运行应用程序，按钮之间的空间将相等，我使用的是线性布局，我知道有 layout_weight 选项，但我不想拉伸图标

例如![在此处输入图像描述](../Images/015fd0cd4ce421c0997545aed04de034.png)

我的xml代码如下

```
 <LinearLayout
        android:id="@+id/shareLinearLayout"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/btnRequestAPrescriptionRefill"
        android:layout_marginTop="10dp" >

        <Button
            android:id="@+id/btnFacebook"
            android:layout_width="50dp"
            android:layout_height="50dp"
            android:background="@drawable/btn_facebook" />

        <Button
            android:id="@+id/btnYoutube"
            android:layout_width="50dp"
            android:layout_height="50dp"
            android:background="@drawable/btn_youtube" />

        <Button
            android:id="@+id/btnTwitter"
            android:layout_width="50dp"
            android:layout_height="50dp"
            android:background="@drawable/btn_twitter" />

        <Button
            android:id="@+id/btnPintrest"
            android:layout_width="50dp"
            android:layout_height="50dp"
            android:background="@drawable/btn_pintrest" />
    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-22T09:36:46.793

您可以使用 layout_weight。但就像你说的那样`Buttons will be stretched`，所以不要在按钮上使用权重，而是在空格（视图）上使用。

```
 <Button
        android:id="@+id/btnFacebook"
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:background="@drawable/btn_facebook" />

    <View
        android:layout_width="0dp"
        android:layout_height="50dp"
        android:layout_weight="1" />

    <Button
        android:id="@+id/btnYoutube"
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:background="@drawable/btn_youtube" />

    <View
        android:layout_width="0dp"
        android:layout_height="50dp"
        android:layout_weight="1" />

    <Button
        android:id="@+id/btnTwitter"
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:background="@drawable/btn_twitter" />

    <View
        android:layout_width="0dp"
        android:layout_height="50dp"
        android:layout_weight="1" />

    <Button
        android:id="@+id/btnPintrest"
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:background="@drawable/btn_pintrest" />
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-09-02T14:58:55.147

为了使您在 XML 中的意图更清晰，请使用 a`<Space>` 而不是 a `<View>`，如下所示：

```
 <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="50dp"
        android:background="@color/Blue"
        android:orientation="horizontal" >

       <Space
           android:layout_width="0dp"
           android:layout_height="1dp"
           android:layout_weight="1" >
       </Space>

       <Button
           android:id="@+id/btnFacebook"
           android:layout_width="50dp"
           android:layout_height="50dp"
           android:background="@drawable/btn_facebook" />

        <Space
            android:layout_width="0dp"
            android:layout_height="1dp"
            android:layout_weight="1" >
        </Space>

...and repeat with the rest of your buttons...

</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-22T09:27:54.100

给`layout_weight`每个`Button`1，它将划分所有空间

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-22T09:29:55.767

试试这个...

```
 <Button
        android:id="@+id/btnFacebook"
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:background="@drawable/btn_facebook" />

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="3" />

    <Button
        android:id="@+id/btnYoutube"
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:background="@drawable/btn_youtube" />

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="3" />

    <Button
        android:id="@+id/btnTwitter"
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:background="@drawable/btn_twitter" />

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="3"/>

    <Button
        android:id="@+id/btnPintrest"
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:background="@drawable/btn_pintrest" /> 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-02-22T09:33:56.813

将每个按钮替换为

```
<RelativeLayout 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:gravity="center"
    >
    <Button
        android:id="@+id/btnFacebook"
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:background="@drawable/btn_facebook" />
</RelativeLayout> 
```

`RelativeLayout`即用`android:layout_weight`和包裹每个按钮`android:gravity`

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-02-22T09:29:57.173

我会使用表格布局并使用 strechColums="0" 。否则，如果您想坚持线性布局，那么您是否尝试过[空间](http://developer.android.com/reference/android/widget/Space.html)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-07-24T03:45:12.950

试试这个

在此处插入按钮

```
<View
android:layout_width="0dp"
android:layout_height="50dp"
android:layout_weight="1" /> 
```

在此处插入按钮

# php - php邮件不起作用

> ID：15020759
> 
> 赞同：1
> 
> 时间：2013-02-22T09:26:49.437
> 
> 标签：php, html, email, sendmail

我的主机正在使用 SquirrelMail，从 Squirrel 面板我可以发送邮件，此外我也可以接收邮件。拿了简单的代码来测试：

```
$to      = 'test@gmail.com';
$subject = 'the subject';
$message = 'hello';
$headers = 'From: webmaster@example.com' . "\r\n" .
    'Reply-To: webmaster@example.com' . "\r\n" .
    'X-Mailer: PHP/' . phpversion();

if(mail($to, $subject, $message, $headers)){
    echo '1';
}else echo '2'; 
```

phpinfo()

```
SMTP localhost
smtp_port 25
sendmail_from no value    |    no value 
sendmail_path /usr/sbin/sendmail -t -i -f **MAIL**  |   /usr/sbin/sendmail -t -i

where **MAIL** is my personal mail, not the one, I want to send from 
```

但是使用我的脚本我无法发送电子邮件。收到 2\. wtf ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T09:44:25.193

我假设 $to 在您测试时是一个有效地址。您的测试代码很好，我刚刚在我的主机上运行它并在我的 Gmail 帐户中收到了一封电子邮件。

我的假设是您的主机没有通过 sendmail 配置电子邮件。SquirrelMail 可能改用 SMTP，如果您有一个快速的 Google，那么您已经可以使用几个 SMTP 类。

做一个快速的 phpinfo() 并寻找类似的东西

```
sendmail_path   /usr/bin/sendmail -t -i /usr/bin/sendmail -t -i 
```

这将告诉您它是否至少配置为供 PHP 使用，如果它在那里并且仍然无法工作，您可以尝试直接从命令行调用它。如果这仍然不起作用，则可能是时候直接联系您的主机了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T17:12:48.023

我发现我的托管管理员资料不是我想要发送的资料。问题已结束

# java - Java Swing 应用程序和 Netbeans 平台 Swing 之间的区别

> ID：15020763
> 
> 赞同：5
> 
> 时间：2013-02-22T09:27:02.310
> 
> 标签：java, swing, netbeans, netbeans-platform

我想开发一个连接到 Java DB 的简单桌面应用程序，使用 Java Swing 进行界面设计。
我是 Swing 新手，所以我在网上尝试了一些教程，并遇到了 Netbeans 平台 Swing 组件。

1.  Java Swing 架构和 Netbeans Swing 组件有什么区别？
2.  哪一个适合用 Java 为桌面应用程序开发接口？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T09:54:39.883

从[NetBeans 平台](http://netbeans.org/features/platform/)：

> NetBeans 平台是 Swing 应用程序的通用框架。它提供了以前每个开发人员都必须自己编写的“管道”——保存状态、将操作连接到菜单项、工具栏项和键盘快捷键；窗口管理等等。

它是一个使用 Swing 构建的 API，应该提供一些额外的“内置”功能。因为您需要了解 Swing 才能使用它。我建议你现在专注于 Swing。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-04T08:09:03.900

实际上，从 Jet Brains 继续使用 Intellij Idea 会更好。它比 NetBeans IDE 好得多。当然，这只是我的意见。

# hibernate - 休眠：CalendarTime 用户类型

> ID：15020764
> 
> 赞同：0
> 
> 时间：2013-02-22T09:27:02.050
> 
> 标签：hibernate

我们如何编写 CalenderTimeUserType 以保存格式为“YYYYYMMDDHHMMSS”的日期

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T11:50:55.010

尝试使用`@Temporal(TemporalType.TIMESTAMP)`

# regex - 使用正则表达式导入 CSV

> ID：15020767
> 
> 赞同：1
> 
> 时间：2013-02-22T09:27:12.687
> 
> 标签：regex, powershell, csv

我想导入 CSV 并使用某些正则表达式过滤掉数据。输入 CSV 示例：

```
John;Doe;18
Peter;Test;21 
```

我想过滤掉个人姓名，例如：我只想查看姓氏以“d”开头的人以及 20 岁及以上的人。

如何将过滤后的数据写入新数组？这是我到目前为止编写的一段代码：

```
$persons = import-csv -Header "surname", "lastname", "age" -delimiter ";" data.csv
$persons | ForEach-Object {
if $_.lastname -match "^d" {
    #?
} 
```

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T09:31:53.673

```
$persons | Where-Object {$_.LastName -like "d*" -and $_.Age -gt 20} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T09:35:35.203

尝试以下操作：

```
$persons = Import-Csv -Header "surname", "lastname", "age" -Delimiter ";" data.csv | where { 
    $_.lastname -match '^d' -and $_.age -ge 20
} 
```

它过滤掉 lastname 以“d”开头并且年龄为 20 或更大的记录。最后，它将结果保存在一个名为`$persons`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T09:43:15.113

试试这个正则表达式

```
^([^;]*);([^;]*);([^;]*)$ 
```

用perl试过了

```
#!/usr/bin/perl

use strict;

while (<>) {

    if ( /^([^;]*);([^;]*);([^;]*)$/ ){
        print "first =". $1 . "\n";
        print "last  =". $2 . "\n";
        print "age   =". $3 . "\n";
    }
} 
```

这给出了这个输出

```
first =John
last  =Doe
age   =18

first =Peter
last  =Test
age   =21 
```

但是专注于正则表达式

# sql-server-2008-r2 - Attunity Terada - Sql Server 2008 R2

> ID：15020773
> 
> 赞同：1
> 
> 时间：2013-02-22T09:27:28.857
> 
> 标签：sql-server-2008-r2, teradata, attunity

谁能告诉我是否可以使用 Attunity for Teradata 数据库和 Sql Server 2008 R2 数据库将“错误负载”加载到数据库中并将日志加载到不同的数据库中？

非常感谢你，博格丹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:37:46.953

如果其他人想知道，是的，使用 attunity 连接器时，可以为错误表使用不同的数据库。如果使用使用 attunity 连接器的 SSIS 包，您所要做的就是进入该数据流任务对象的属性，进入“[teradata destination].[ErrorTableName]”部分，在那里您可以编写所需数据库的名称.table_name。

# c# - 从c#中输入数据库中的数据

> ID：15020774
> 
> 赞同：2
> 
> 时间：2013-02-22T09:27:35.693
> 
> 标签：c#, javascript, asp.net, postgresql, input

我在 javascript 的变量中存储一个值。比我创建了一个隐藏标签，以便从代码隐藏中访问变量并将其存储在数据库中。但是由于某种原因， `cmd.ExecuteNonQuery();`它在尝试在数据库中输入数据时给了我以下错误：

```
ERROR: 42601: syntax error at end of input 
```

下面是asp中的输入标签：

```
 <div>
        <input id="hidden_value" type="hidden" runat="server"/>
         <asp:Button ID="Button1" runat="server" Text="Button" onclick="Button1_Click" />

    </div> 
```

以下是我如何在 javascript 中调用隐藏输入并将其设置为一个值：

```
var store_altitude;
store_altitude = some_value;
document.getElementById("hidden_value").value=store_altitude; 
```

以下是代码隐藏：

```
 using (NpgsqlConnection conn = new NpgsqlConnection(connstring))
            {
                try
                {
                    conn.Open();
                    Response.Write(hidden_value.Value);
                    NpgsqlCommand cmd = new NpgsqlCommand("insert into altitude select nextval('altitude_id_seq'),"+hidden_value.Value, conn);
                    cmd.ExecuteNonQuery();

                    conn.Close();
                }
                catch (Exception)
                {
                    ClientScript.RegisterStartupScript(this.GetType(), "", "$(document).ready(function(){alert('problem with connection')});", true);
                }
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T10:32:02.357

你***永远不*应该通过字符串连接**和参数来构建 sql。它很慢，容易出错，而且你已经向 SQL 注入敞开了大门。在您的情况下，看起来**任何网络黑客都可以轻而易举地获得对您数据库的完全访问权限**。

由于您正在编写原始 sql 而不是使用 ORM，因此不幸的是，您面临着 ADO.NET 的 API 非常糟糕的事实。我强烈建议使用类似[dapper](http://code.google.com/p/dapper-dot-net/)的东西，这样可以大致如下表达您的查询：

```
conn.Execute(@"
    insert into altitude
    values (extval('altitude_id_seq'), @hiddenVal)",
       new { hiddenVal = hidden_value.Value}); 
```

还有其他轻量级的 ADO.NET 包装器；很多都很好，[dapper](http://code.google.com/p/dapper-dot-net/)恰好是众所周知的。

作为一个小问题，虽然不是严格要求，但我发现包含您要插入的列名而不是按照数据库列出的任何顺序隐式使用它们更具可读性。但是，如果您绝对确定架构不会更改，那么就没有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T10:29:01.477

您可以从 hidden_​​value 和代码端用户 request["hidden_​​value"] 中删除 runat="server"; 获取 hidden_​​value 的值。

# android - Android Webview 函数

> ID：15020775
> 
> 赞同：0
> 
> 时间：2013-02-22T09:27:41.197
> 
> 标签：android, webview

在 iPhone 中，我们有 webViewDidStartLoad 和 webViewDidFinishLoad 之类的函数来检查特定 url 的加载开始和完成。

我们在 Android 上有这样的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T09:40:43.297

是的，您可以使用 WebViewClient ：

```
private class CustomWebClient extends WebViewClient{

    public void onPageStarted(WebView view, String url, Bitmap favicon)
    {

    }

    public void onReceivedError(WebView view, int errorCode, String description, String failingUrl)
    {

    }

    public void onPageFinished(WebView view, String url)
    {

    }
} 
```

用法：

webView.setWebViewClient(new CustomWebClient());

每个方法名称都是不言自明的，您也可以检查一下：http: [//developer.android.com/reference/android/webkit/WebViewClient.html](http://developer.android.com/reference/android/webkit/WebViewClient.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T09:46:54.260

你可以尝试这样的事情：

```
webView.setWebViewClient(new WebViewClient() {
  public void onPageStarted(WebView view, String url, Bitmap favicon) {
    super.onPageStarted(view, url, favicon);
    // Do something here
  }

  public void onPageFinished(WebView view, String url) {
    super.onPageFinished(view, url);
    // Do something here
  }

  public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {
    super.onReceivedError(view, errorCode, description, failingUrl);
    // Do something here
  }
}); 
```

# c# - C#中参数字段中的“this”保留字有什么作用？

> ID：15020778
> 
> 赞同：2
> 
> 时间：2013-02-22T09:27:47.253
> 
> 标签：c#, oop, parameters, this

我看到了这样的事情：

```
public static void FunctionSample(**this** Class1 x, int r, double f){ 
```

“这个”是做什么的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T09:28:51.227

这意味着一个**[扩展方法](http://msdn.microsoft.com/en-us/library/vstudio/bb383977.aspx)**，`Class1`尽管在当前形式下它是不正确的，因为该**方法也需要是静态**的并且在静态类中。

[扩展方法（C# 编程指南）](http://msdn.microsoft.com/en-us/library/vstudio/bb383977.aspx)

> 扩展方法定义为**静态方法**，但使用实例方法语法调用。它们的第一个参数指定方法操作的类型，参数前面是 [**this**](http://msdn.microsoft.com/en-us/library/vstudio/dk1507sz.aspx)修饰符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T09:31:07.583

这意味着您正在创建的方法是扩展方法。这意味着（在您的情况下）该方法将充当`Class1`. 所以你可以使用这个：

```
Class1 exmpl = new Class1();
exmpl.FunctionSample(0, 0.0); 
```

但是，它不适用于您的情况，因为扩展方法需要是静态的，并且存在于静态类中。

如果您希望扩展方法像上面给出的示例一样工作，您将需要一个`using`指向包含扩展方法的静态类所在的命名空间的指令。

事实上，这也是 linq 的工作方式。如果您添加`using System.Linq`到代码文件中，您唯一要做的就是导入大量扩展方法。

# git - 本地 TFS 2012 上的本地 git 存储库

> ID：15020786
> 
> 赞同：1
> 
> 时间：2013-02-22T09:28:13.370
> 
> 标签：git

Microsoft 已经为[Team Foundation Service](http://tfs.visualstudio.com)[引入了](http://blogs.msdn.com/b/bharry/archive/2013/01/30/git-init-vs.aspx)git 支持。

是否可以在 On-Premise Team Foundation Server 2012 实例上使用 Git？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T16:28:43.720

这将在[TFS 2013](http://blogs.msdn.com/b/bharry/archive/2013/06/03/visual-studio-2013.aspx)中提供。

~~来自 Brian Harry 的关于该主题的[博客文章](http://blogs.msdn.com/b/bharry/archive/2013/01/30/git-init-vs.aspx)：~~

在标题下**什么时候发货？**

> ~~Team Foundation Server – 我们的计划是在 TFS 的下一个主要版本中包含 Git 支持。日期尚未公布。~~

# javascript - 更改后重新加载 DOM

> ID：15020788
> 
> 赞同：1
> 
> 时间：2013-02-22T09:28:15.320
> 
> 标签：javascript, jquery, svg

我对嵌入标签中的 SVG 有一个小问题。我用 javascript 的 SVG 文件路径更新了 embed 标记的源。然后我必须更新 viewbox 属性以正确调整 SVG 的大小。

问题是 SVG 标签不可用，因为 javascript 执行速度太快。

**一个例子 ：**

```
//Creation and insertion by JQuery
var EmbedTag = $("<embed id='zoomSVG' src=idSVG + ".svg' type='image/svg+xml' width='500px' height='500px' />").appendTo(zoomGalleryHisto);

//This doesn't work : svgDoc is null
//SVG document recovery
var svgDoc = document.getElementById('zoomSVG').getSVGDocument();

This work :
setTimeout(function(){
   //SVG document recovery
   var svgDoc = document.getElementById('zoomSVG').getSVGDocument();
},100); 
```

我不想使用 setTimeout 函数，因为超时值取决于硬件。有时 100 毫秒可以正常工作，但我必须找到一个通用的解决方案。

嵌入标签插入后，我可以通过 javascript 重新加载 DOM 吗？嵌入对象的加载完成后，嵌入标签是否存在现有事件？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T09:34:38.193

从嵌入的 onload 调用代码，例如

```
var EmbedTag = $("<embed id='zoomSVG' onload='init()' src=idSVG + ".svg' type='image/svg+xml' width='500px' height='500px' />").appendTo(zoomGalleryHisto); 
```

然后在 init 中实现您的代码（或任何您想调用的代码）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T09:34:22.883

使用标签的 »onload« 事件来延迟您的功能，直到它被加载，而不是应该可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T09:45:42.233

首先，您创建元素，然后尝试在 DOM 中再次找到它。

其次，javascript 不能阻止直到发生某些事情，而是使用回调。

像这样的东西：

```
var svgDoc = false;
// Create an element
var EmbedTag = $("<embed id='zoomSVG' type='image/svg+xml' width='500px' height='500px' />");
// Append it to the dom
EmbedTag.appendTo(zoomGalleryHisto);

// Load the svg file
$.get('file.svg', function() {
    // And then add it to the created element
    EmbedTag.attr('src', 'file.svg');
    svgDoc = EmbedTag.getSVGDocument();
}); 
```

# php - Live Server 上发生了奇怪的事情

> ID：15020791
> 
> 赞同：2
> 
> 时间：2013-02-22T09:28:23.997
> 
> 标签：php

当我将文件移动到实时服务器时，我遇到了一件奇怪的事情。实际上我有一个 XML 文件。它从 Jquery 中读取，内容显示在 HTML 页面中。昨天我对 XML 文件进行了一些更改，并在 Live 服务器中进行了更新。它在当地完美运行。但在 Live 服务器中，它只返回旧的 XML 文件值。我完全删除了文件并移动了新文件。

我以为它是从其他地方引用的。所以我删除了文件并检查了。但它在那个时候显示错误。所以它只引用同一个文件。我在实时服务器本身中打开了文件。一切都很完美。但它仍然显示旧内容。我不知道实时服务器上发生了什么问题。

谁能帮我弄清楚？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T09:37:12.293

尝试在您的 php 中添加 no-cache 标头，例如：

```
header("Cache-Control: no-cache, must-revalidate");
header("Expires: Sat, 26 Jul 1997 05:00:00 GMT"); 
```

或者尝试访问您的 xml 文件添加一些随机整数，例如

```
your_xml_file.xml?id=<?php echo time(); ?> 
```

或者如果在 js 中，使用 url 如下：

```
var url = "http://www.somesite.com/your_xml.xml?"+new Date().getTime(); 
```

# c - 编写我自己的 HTTP 服务器 - 如何查找文件的相对路径

> ID：15020798
> 
> 赞同：2
> 
> 时间：2013-02-22T09:28:50.400
> 
> 标签：c, httpserver

我目前正在用 C 语言编写一个基于 UNIX 套接字的 HTTP 服务器，并且我即将实现 GET 请求的一部分，该部分检查请求的文件以确保它具有适当的权限。

在我对 HTTP 服务器一无所知之前，我设置了一个 Apache 服务器，据我了解，HTTP 服务器通过一个目录来查找请求的文件。我不知道这是否是因为服务器以某种方式在目录之外没有权限，或者它是否实际上验证了路径以确保它在目录内。

现在我要自己实现这个，我不知道如何正确处理这个。C 中是否有一个函数可以让我确定路径是否在给定目录内（例如在`foo/bar/../../baz`inside `foo/`）？

在 python 中，我会使用`os.path.relpath`并检查结果是否以 开头`..`，以确保路径不在给定目录之外。

**例如**，如果目录是`/foo/bar/htdocs`，并且给定的路径是`index.html/../../passwords.txt`，我想要`../passwords.txt`，所以我可以从开头看到`..`文件在`/foo/bar/htdocs`目录之外。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T09:30:41.487

您会惊讶于 Python 的 I/O 功能有多少直接映射到 POSIX 可以做的事情。:)

换句话说，向上看[`realpath()`](http://www.kernel.org/doc/man-pages/online/pages/man3/realpath.3.html)。

*当 POSIX 具有更具描述性*的函数名称时，这真是太棒了，包括那个额外的字母！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T09:45:46.820

[如何在 Linux 中以编程方式获取给定相对路径的绝对路径？](https://stackoverflow.com/questions/2341808/how-to-get-the-absolute-path-for-a-given-relative-path-programmatically-in-linux)

```
#include <stdlib.h> 
#include <stdio.h> 
int main() 
{ 
        char resolved_path[100]; 
        realpath("../../", resolved_path); 
        printf("\n%s\n",resolved_path); 
        return 0; 
} 
```

你可以试试。正如同一个服务员（放松）在那里回答的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T18:04:33.527

它的工作方式要简单得多：一旦服务器收到请求，它只查看其 htdoc（静态内容）目录以检查请求的资源是否存在：

```
char *htdoc = "/opt/server/htdoc"; // here a sub-directory of the server program
char *request = "GET /index.html"; // the client request
char *req_path = strchr(request, ' ') + 1; // the URI path

char filepath[512]; // build the file-system path
snprintf(filepath, sizeof(filepath) - 1, "%s/%s", htdos, req_path);

FILE *f = fopen(filepath, "r"); // try to open the file
... 
```

请注意，此代码是**不安全**的，因为它不检查请求是否通过包含“../”模式（和其他技巧）进入文件系统。您还应该使用`stat()`以确保该文件是*常规*文件并且服务器有权读取它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T18:46:58.033

作为一个简单（但不完整）的解决方案，我只是决定编写一些代码来检查任何`..`.

```
int is_valid_fname(char *fname) {
    char *it = fname;
    while(TRUE) {
        if (strncmp(it, "..", 2) == 0) {
            return FALSE;
        }
        it = strchr(it, '/');
        if (it == NULL) break;
        it++;
    }
    return TRUE;
} 
```

# java - 投射 JDBC 连接

> ID：15020801
> 
> 赞同：0
> 
> 时间：2013-02-22T09:28:59.643
> 
> 标签：java, jdbc

我正在为一个项目开发一个新模块，该模块应该使用 JDBC 驱动程序连接到 SQL 数据库。我需要使用`getConnection()`返回类型的方法实现连接接口`org.forgerock.opendj.ldap.Connection`。但是，JDBC 驱动程序返回类型为 的连接`com.mysql.jdbc.JDBC4Connection`。铸造给了我以下错误：

```
Exception in thread "main" java.lang.ClassCastException: 
    com.mysql.jdbc.JDBC4Connection cannot be cast to org.forgerock.opendj.ldap.Connection
    at org.forgerock.opendj.virtual.JDBCConnectionFactory.getConnection(JDBCConnectionFactory.java:105) 
```

获得类型连接`org.forgerock.opendj.ldap.Connection`而不是连接的最佳方法是`com.mysql.jdbc.JDBC4Connection`什么？

JDBCConnectionFactory 类：

```
public class JDBCConnectionFactory implements ConnectionFactory{
    private final String driverName = "com.mysql.jdbc.Driver";
    private Connection con = null;
    private String ConnectionUrl = "";
    private final String Host;
    private final int Port;
    private final String DbName;
    private final String UserName;
    private final String UserPass;

public JDBCConnectionFactory(final String host, final int port, final String dbName, final String userName, final String userPass) {
        this.Host = host;
        this.Port = port;
        this.DbName = dbName;
        this.UserName = userName;
        this.UserPass = userPass;
        this.ConnectionUrl="jdbc:mysql://"
                .concat(this.Host+":")
                .concat(this.Port+"/")
                .concat(this.DbName);

        try {
                Class.forName(driverName);
            } catch (ClassNotFoundException e) {
                System.out.println(e.toString());
            }
    } 
```

getConnection 方法：

```
@Override
    public org.forgerock.opendj.ldap.Connection getConnection()throws ErrorResultException {
        try {

            con = DriverManager
                            .getConnection(this.ConnectionUrl,this.UserName,this.UserPass);

            org.forgerock.opendj.ldap.Connection newcon = (org.forgerock.opendj.ldap.Connection) con;
            System.out.println("Connection created.");
            return newcon;
            } catch (SQLException e) {
            System.out.println(e.toString());
            return null;
            }

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T09:46:50.173

简短的回答你不能。这就是为什么

`org.forgerock.opendj.ldap.Connection` **不延长** `java.sql.Connection`

这应该为您提供更多信息，因为 Java 允许

*   [用于强制转换的 Java 规则](https://stackoverflow.com/questions/2233902/java-rules-for-casting)
*   [引用类型转换](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.5.1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T10:13:01.310

您不能使用 JDBC API 创建 LDAP 连接。您应该使用提供的`org.forgerock.opendj.ldap`API 创建一个。

您确定需要连接到 SQL 数据库而不是 LDAP 数据库吗？

查看本指南以连接到 LDAP 服务器并获得所需的连接类型：

[获取 OpenDJ LDAP SDK](http://opendj.forgerock.org/doc/dev-guide/index/chap-get-sdk.html "获取 OpenDJ LDAP SDK")

# c# - httputility 在框架 3.5 的当前上下文中不存在

> ID：15020802
> 
> 赞同：3
> 
> 时间：2013-02-22T09:29:01.827
> 
> 标签：c#, http, sharepoint, system.web

我正在尝试`HttpUtility.UrlEncode`在我的`sharepoint`项目中使用，`framework 3.5`但它无法识别它。简单地说：

> 当前上下文中不存在 HttpUtility

我打了电话`System.Web`，但它仍然无法识别任何 Http 对象！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T09:41:59.090

您需要添加对*System.Web.dll的引用*

没有上述参考的*使用 System.Web*单独是不够的。

不幸的是，无法在以 .Net 框架的客户端配置文件版本为目标的项目中引用*System.Web.dll 。*因此，请查看您的项目属性并确保它针对“.NET Framework 3.5”而不是“.NET Framework 3.5 Client Profile”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T09:45:18.957

这个问题在这里得到了回答： [.NET 3.5 SP1 客户端框架的 HttpUtility 的替代方案？](https://stackoverflow.com/questions/36315/alternative-to-httputility-for-net-3-5-sp1-client-framework)

如果可能，另一个选择是升级到 .NET 4.5，然后您可以选择使用

```
WebUtility.UrlEncode 
```

[http://msdn.microsoft.com/en-us/library/system.net.webutility.urlencode.aspx](http://msdn.microsoft.com/en-us/library/system.net.webutility.urlencode.aspx)

# android - 为什么 json url 在不同的浏览器中显示不同的结果？

> ID：15020803
> 
> 赞同：1
> 
> 时间：2013-02-22T09:29:06.710
> 
> 标签：android, json

以下是我的 json 网址：

```
http://aerotagejobs.com/system/miscellaneous/api?params[user_sid]=12769&params[listing_type]=Job&params[listing_sid]=266626&function=save_listing&lang=en 
```

在 Mozilla 和 chrome 中显示：

```
{"result":"success","function_result":"success"} 
```

但在资源管理器中显示：

```
{"result":"success","function_result":"denied"} 
```

我在 android 中解析这个 url 并获得与资源管理器显示相同的输出，但我想获得输出成功而不是拒绝。请帮助找出该怎么做？提前致谢。

# javascript - 动态添加、链接和渲染指令

> ID：15020806
> 
> 赞同：0
> 
> 时间：2013-02-22T09:29:13.840
> 
> 标签：javascript, html, angularjs

我的标记中有一个标记元素`popup-window`，我使用相应的指令进行处理。如果我想在不同的地方显示或隐藏更多这样的小部件，我现在需要将所有这些元素放在我的页面标记中，我不确定这些元素看起来是否干净并且是最好的方法。所以它看起来像这样：

```
<popup-window></popup-window>
<details-window></details-window>
<share-widget></share-widget>
<twitter-stream></twitter-stream> 
```

是否可以对我在 DOM 中动态添加的元素动态运行指令？我想让标记干净。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T09:39:26.477

您可以使用 $compile 服务来编译包含指令的模板并将其附加到您的页面。也就是说，如果您不想在`<twitter-stream></twitter-stream>`有人点击“添加推特流”按钮之前添加，您可以执行以下操作：

```
<!doctype html>
<html ng-app="myApp">
<head>
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script src="http://code.angularjs.org/1.1.2/angular.min.js"></script>
    <script type="text/javascript">
    var myApp = angular.module('myApp', []);

    myApp.controller('MainCtrl', ['$scope', function($scope){

    }]);
    myApp.directive('twitterStream', function() {
        return {
            restrict: 'E',
            link: function(scope, elem, attrs) {
                elem.append('<p>A tweet: ' + Math.random() + '</p>')
            }
        }
    });
    myApp.directive('createTwitterStreamButton', ['$compile', function($compile) {
        return {
            restrict: 'E',
            template: '<button ng-click="add()">Add twitter stream</button>',
            replace: true,
            link: function(scope, elem, attrs) {
                scope.add = function() {
                    var directiveElement = $compile('<twitter-stream></twitter-stream>')(scope);
                    directiveElement.insertAfter(elem);
                }
            }
        }
    }]);
    </script>
</head>
<body ng-controller="MainCtrl">
    <create-twitter-stream-button></create-twitter-stream-button>
</body>
</html> 
```

# asp.net - 使用 MailChimp WebHooks 功能

> ID：15020807
> 
> 赞同：1
> 
> 时间：2013-02-22T09:29:15.087
> 
> 标签：asp.net, mailchimp, webhooks

有人可以提供在 ASP.NET 中执行此操作的示例。我们想做一些 MailCHimp – 内部数据库同步，并计划使用 webhook 功能做到这一点，但我们无法让它工作。当有人取消订阅邮件黑猩猩时，我们希望使用网络挂钩来同步数据。

要解决的另一件事是安全性。我们如何保护该页面不被恶意用户访问？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T09:36:48.153

这是一段对我们有用的代码。这相当简单，但确实需要我们进行一些实验才能使其正常工作。

```
 if (Request.Form["type"] != null && Request.Form["type"] == "unsubscribe")
        {

            string email = Request.Form["data[merges][EMAIL]"];
           //now you can do insert/update data in your local database
     } 
```

查看 API 文档以获取更多详细信息[http://apidocs.mailchimp.com/webhooks/](http://apidocs.mailchimp.com/webhooks/)

关于安全性，您可以做很多事情，但这取决于您想走多远。我建议的一件事是检查您的 IIS 日志并查找邮件黑猩猩使用哪个 IP 地址/用户代理来触发 Web 挂钩，然后只为除此之外的所有其他 IP 地址阻止此页面。您可能还可以采取其他措施来保护这一点，例如使用不容易猜到的页面名称（f3jijselife.aspx 比 webhooks.aspx 好得多）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-10-30T11:24:45.550

我最近刚刚根据他们提供的 PHP 代码实现了这个框架......我拿出了实际的实现，但希望应该有用

```
public class MailChimpWebHook : IHttpHandler
{
    private static readonly ILog Logger = LogManager.GetLogger(typeof(MailChimpWebHook));

    private const string Key = "xxxx";
    private const string ParamKey = "key";
    private const string ParamType = "type";
    private const string ParamListId = "data[list_id]";
    private const string ParamListIdNew = "data[new_id]";
    private const string ParamEmail = "data[email]";
    private const string ParamOldEmail = "data[new_email]";
    private const string ParamNewEmail = "data[old_email]";
    private const string ParamProfileEmail = "data[merges][EMAIL]";
    private const string ParamProfileFirstName = "data[merges][FNAME]";
    private const string ParamProfileLastName = "data[merges][LNAME]";
    private const string ParamProfileGroups = "data[merges][INTERESTS]";

    private const string TypeSubscribe = "subscribe";
    private const string TypeUnsubscribe = "unsubscribe";
    private const string TypeCleaned = "cleaned";
    private const string TypeUpdateEmail = "upemail";
    private const string TypeProfileUpdate = "profile";

    public void ProcessRequest(HttpContext context)
    {
        Logger.Info("==================[ Incoming Request ]==================");

        if (string.IsNullOrEmpty(context.Request[ParamKey]))
        {
            Logger.Warn("No security key specified, ignoring request"); 
        }
        else if (context.Request[ParamKey] != Key)
        {
            Logger.WarnFormat("Security key specified, but not correct. Wanted: '{0}' | , but received '{1}'", Key, context.Request[ParamKey]);
        }
        else
        {
             //process the request
            Logger.InfoFormat("Processing a '{0}' request...", context.Request[ParamType]);

            try
            {
                switch (context.Request[ParamType])
                {
                    case TypeSubscribe:
                        Subscribe(context.Request);
                        break;
                    case TypeUnsubscribe:
                        Unsubscribe(context.Request);
                        break;
                    case TypeCleaned:
                        Cleaned(context.Request);
                        break;
                    case TypeUpdateEmail:
                        UpdateEmail(context.Request);
                        break;
                    case TypeProfileUpdate:
                        UpdateProfile(context.Request);
                        break;
                    default:
                        Logger.WarnFormat("Request type '{0}' unknown, ignoring.", context.Request[ParamType]);
                        break;
                }
            }
            catch (Exception e)
            {
                Logger.Error("There was an error processing the callback", e);
            }
        }

        Logger.Info("Finished processing request.");
    }

    private void UpdateProfile(HttpRequest httpRequest)
    {
        Logger.Info("Processing update profile request!");

        #region [ sample data structure ]
        //  "type": "profile", 
        //  "fired_at": "2009-03-26 21:31:21", 
        //  "data[id]": "8a25ff1d98", 
        //  "data[list_id]": "a6b5da1054",
        //  "data[email]": "api@mailchimp.com", 
        //  "data[email_type]": "html", 
        //  "data[merges][EMAIL]": "api@mailchimp.com", 
        //  "data[merges][FNAME]": "MailChimp", 
        //  "data[merges][LNAME]": "API", 
        //  "data[merges][INTERESTS]": "Group1,Group2", 
        //  "data[ip_opt]": "10.20.10.30"
        #endregion
    }

    private void UpdateEmail(HttpRequest httpRequest)
    {
        Logger.Info("Processing update email request!");

        #region [ sample data structure ]
        //  "type": "upemail", 
        //  "fired_at": "2009-03-26\ 22:15:09", 
        //  "data[list_id]": "a6b5da1054",
        //  "data[new_id]": "51da8c3259", 
        //  "data[new_email]": "api+new@mailchimp.com", 
        //  "data[old_email]": "api+old@mailchimp.com"
        #endregion

    }

    private void Cleaned(HttpRequest httpRequest)
    {
        Logger.Info("Processing cleaned email request!");

        #region [ sample data structure ]
        //  "type": "cleaned", 
        //  "fired_at": "2009-03-26 22:01:00", 
        //  "data[list_id]": "a6b5da1054",
        //  "data[campaign_id]": "4fjk2ma9xd",
        //  "data[reason]": "hard",
        //  "data[email]": "api+cleaned@mailchimp.com"
        #endregion
    }

    private void Unsubscribe(HttpRequest httpRequest)
    {
        Logger.Info("Processing unsubscribe...");

        #region [ sample data structure ]
        //  "type": "unsubscribe", 
        //  "fired_at": "2009-03-26 21:40:57",  
        //  "data[action]": "unsub",
        //  "data[reason]": "manual", 
        //  "data[id]": "8a25ff1d98", 
        //  "data[list_id]": "a6b5da1054",
        //  "data[email]": "api+unsub@mailchimp.com", 
        //  "data[email_type]": "html", 
        //  "data[merges][EMAIL]": "api+unsub@mailchimp.com", 
        //  "data[merges][FNAME]": "MailChimp", 
        //  "data[merges][LNAME]": "API", 
        //  "data[merges][INTERESTS]": "Group1,Group2", 
        //  "data[ip_opt]": "10.20.10.30",
        //  "data[campaign_id]": "cb398d21d2",
        //  "data[reason]": "hard"
        #endregion

    }

    private void Subscribe(HttpRequest httpRequest)
    {
        Logger.Info("Processing subscribe...");

        #region [ sample data structure ]
        //  "type": "subscribe", 
        //  "fired_at": "2009-03-26 21:35:57", 
        //  "data[id]": "8a25ff1d98", 
        //  "data[list_id]": "a6b5da1054",
        //  "data[email]": "api@mailchimp.com", 
        //  "data[email_type]": "html", 
        //  "data[merges][EMAIL]": "api@mailchimp.com", 
        //  "data[merges][FNAME]": "MailChimp", 
        //  "data[merges][LNAME]": "API", 
        //  "data[merges][INTERESTS]": "Group1,Group2", 
        //  "data[ip_opt]": "10.20.10.30", 
        //  "data[ip_signup]": "10.20.10.30"
        #endregion

    }

    public bool IsReusable
    {
        get
        {
            return false;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-11-11T02:49:34.817

我正在使用 C# WebAPI，我的解决方案是使用来自 POST MailChimp 正文的 FormDataCollection 对象与 webhook 一起发送。

```
 using System.Net.Http.Formatting;

    [HttpPost]
    [Route("mailchimp/subscriber")]
    public IHttpActionResult Post([FromBody] FormDataCollection data)
    {
        if (data != null)
        {
            string type = data.Get("type");

            if (!string.IsNullOrWhiteSpace(type))
            {
                string listId = data.Get("data[list_id]");
                string id = data.Get("data[id]");
                string firstName = data.Get("data[merges][FNAME]");
                string lastName = data.Get("data[merges][LNAME]");
                string email = data.Get("data[email]");

                if (!string.IsNullOrWhiteSpace(email))
                {
                    // Do something with the subscriber
                }
            }
        }
    } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-05-07T07:00:04.253

我完全支持詹姆斯的回答。

但是，在尝试自己实现 webhook 时，我发现您还需要实现 GET 方法，以便甚至能够在 MailChimp 中创建 webhook。

这对我有用：

```
[HttpGet]
[HttpOptions]
public HttpResponseMessage Get()
{
    return Request.CreateResponse(HttpStatusCode.OK);
} 
```

MailChimp 文档： [https ://developer.mailchimp.com/documentation/mailchimp/guides/about-webhooks/](https://developer.mailchimp.com/documentation/mailchimp/guides/about-webhooks/)

# php - 在 Zend Framework 1.x 中实现表数据网关模式的正确方法是什么？

> ID：15020811
> 
> 赞同：0
> 
> 时间：2013-02-22T09:29:21.797
> 
> 标签：php, zend-framework, zend-db-table

根据 Zend 快速入门指南，我需要三个类（模型、映射器类和表网关类）来实现表数据网关模式。但这是一个好方法吗？

现在这就是我实现模式的方式。

```
class Application_Model_Person(){
    private $_name;

    public function getName();
    public function setName($name);
}   

class Application_Model_PersonMapper extends Zend_Db_Table_Abstract {

      public function fetch();
      public function search();
      public function save(Application_Model_Person $person);
      public function delete();

} 
```

所以我有一个包含所有 getter/setter 方法的模型类和另一个扩展 Zend_Db_Table_Abstract 类并执行所有 crud 操作的类。我喜欢这种方法，因为它减少了类的数量并且易于遵循。但这是一种正确的做法吗？

另外，如果我使用 Zend 快速入门指南中的方法，我将获得什么优势？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T16:54:58.120

这实际上取决于您的项目的大小。ZF 就是我所说的“企业就绪”，即构建大型 Web 应用程序。在我看来并遵循这些模式，我几乎可以无限扩展。然而，对于许多较小的项目，这可能是多余的。

我在您的示例中看到的唯一问题是将映射器扩展到遵循常见模式的 DbTable 是错误的。对于较小的项目，您可以拥有模型（外部--应用程序视图）并直接访问您的 DbTable 类（内部--Db 网关）并跳过映射器。

如果以后出于某种原因您决定需要某些表的映射器，您应该能够相当容易地实现它们。

# java - 如何将字符串转换为十六进制和十六进制转换为字符串？

> ID：15020812
> 
> 赞同：7
> 
> 时间：2013-02-22T09:29:22.513
> 
> 标签：java, serial-port, hex

我制作了简单的程序，用于在java中向串口发送和接收数据。我将串行端口设备与环回测试（Rx 到 Tx）连接起来。它工作正常。但我无法将十六进制数据发送和接收到串行端口和接收串行端口。在我的设备中使用了 FT232BL 芯片。那么是否需要任何 dll 或其他库来向串口设备发送和接收十六进制数据。我的代码如下。

```
enter code here
package x.rayimagecapture;

import gnu.io.CommPort;
import gnu.io.CommPortIdentifier;
import gnu.io.SerialPort;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.Timer;

public class TwoWaySerialComm extends JPanel implements ActionListener {

    OutputStream out;
    private javax.swing.JButton btn;
    private javax.swing.JScrollPane jScrollPane1;
    public static javax.swing.JLabel jLabel1;
    public static javax.swing.JTextField textField;
    public static boolean flag = false;
    public static int count = 50;
//    TimerWindow tmr=new TimerWindow();
    public static Timer tmr = new Timer(1000, new ActionListener() {
        public void actionPerformed(ActionEvent evt) {
                        count++;
            jLabel1.setText("" + count);
        }
    });

    public TwoWaySerialComm() {
        super();
        textField = new javax.swing.JTextField();
        btn = new javax.swing.JButton();
        jScrollPane1 = new javax.swing.JScrollPane();
        jLabel1 = new javax.swing.JLabel();
        textField.setText(""); // NOI18N
//        tmr.setDelay(0);

        btn.setFont(new java.awt.Font("Tahoma", 0, 12)); // NOI18N
        btn.setText("Send"); // NOI18N
        btn.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                serialwrite();
            }
        });

//        textArea.setColumns(20);
//        textArea.setRows(20);
//        textArea.setTabSize(0);
        jScrollPane1.setViewportView(jLabel1);

        javax.swing.GroupLayout panelLayout = new javax.swing.GroupLayout(this);
        this.setLayout(panelLayout);
        panelLayout.setHorizontalGroup(
                panelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(panelLayout.createSequentialGroup()
                .addComponent(textField, javax.swing.GroupLayout.PREFERRED_SIZE, 300, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(btn, javax.swing.GroupLayout.DEFAULT_SIZE, 84, Short.MAX_VALUE)
                .addContainerGap())
                .addComponent(jScrollPane1));
        panelLayout.setVerticalGroup(
                panelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(panelLayout.createSequentialGroup()
                .addGroup(panelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(textField, javax.swing.GroupLayout.PREFERRED_SIZE, 47, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addComponent(btn, javax.swing.GroupLayout.PREFERRED_SIZE, 37, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(jScrollPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 218, Short.MAX_VALUE)));
    }

    void connect(String portName) throws Exception {
        CommPortIdentifier portIdentifier = CommPortIdentifier.getPortIdentifier(portName);
        if (portIdentifier.isCurrentlyOwned()) {
            System.out.println("Error: Port is currently in use");
        } else {
            CommPort commPort = portIdentifier.open(this.getClass().getName(), 2000);

            if (commPort instanceof SerialPort) {
                SerialPort serialPort = (SerialPort) commPort;
                serialPort.setSerialPortParams(9600, SerialPort.DATABITS_8, SerialPort.STOPBITS_1, SerialPort.PARITY_NONE);
                serialPort.setFlowControlMode(SerialPort.FLOWCONTROL_NONE);
                InputStream in = serialPort.getInputStream();
                out = serialPort.getOutputStream();

                (new Thread(new SerialReader(in))).start();
//                (new Thread(new SerialWriter(out))).start();

            } else {
                System.out.println("Error: Only serial ports are handled by this example.");
            }
        }
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        serialwrite();
    }

    public void serialwrite() {
        try {
            this.out.write(textField.getText().toString().getBytes());
            count = 00;
//            tmr.start();
            tmr.start();
            this.out.flush();
        } catch (IOException ex) {
            Logger.getLogger(TwoWaySerialComm.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    /**
     *
     */
    public static class SerialReader implements Runnable {

        InputStream in;

        public SerialReader(InputStream in) {
            this.in = in;
        }

        public void run() {
            byte[] buffer = new byte[1024];
            int len = -1;
            try {
                while ((len = this.in.read(buffer)) != -1) {
//                    textArea.append(" " + new String(buffer, 0, len));
                    String str = new String(buffer, 0, len);
                    System.out.print(str);
                    if (!str.isEmpty()) {
//                        tmr.stop();
                    }
                }
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }

    /**
     *
     */
    public static class SerialWriter implements Runnable {

        OutputStream out;

        public SerialWriter(OutputStream out) {
            this.out = out;
        }

        public void run() {
            try {
                int c = 0;
                while ((c = System.in.read()) != -1) {
//                    this.out.write(c);
                }
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }

    public static void main(String[] args) {
        TwoWaySerialComm tws = new TwoWaySerialComm();
        JFrame frame = new JFrame();
        frame.setSize(400, 300);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(tws);
        try {
            tws.connect("COM11");
        } catch (Exception ex) {
            Logger.getLogger(TwoWaySerialComm.class.getName()).log(Level.SEVERE, null, ex);
        }
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-22T09:32:57.680

`String`十六进制：

```
Integer.decode(hexString); 
```

十六进制到`String`：

```
Integer.toHexString(integer); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-10-22T11:05:58.617

对于**字符串到十六进制**，

```
Integer.decode("0x4d2"); // output is 1234 
```

（“0x”应添加（前缀）到字符串以解码为十六进制）

**十六进制转字符串**，

```
Integer.toHexString(1234); // output is 4d2 
```

# sitecore - Sitecore Workbox - 修改“打开”以在新的浏览器选项卡中打开内容编辑器项

> ID：15020815
> 
> 赞同：0
> 
> 时间：2013-02-22T09:29:27.683
> 
> 标签：sitecore

在 Workbox 中，我们有“打开”和“预览”功能。是否可以修改“打开”功能以在新的浏览器选项卡中打开内容编辑器项，而不是在弹出窗口中显示“内容编辑器”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T10:13:15.913

这是可能的：
首先，找出用于工作箱的代码。这可以通过打开 Workbox.xml（位于 webroot/sitecore/shell/Applications/Workbox）文件来完成。你会看到类似的东西

```
<CodeBeside Type="Sitecore.Shell.Applications.Workbox.WorkboxForm,Sitecore.Client"/> 
```

通过在 WorkboxForm 类上使用 Reflector，我可以看到当您在工作框中单击“打开”时会发生以下情况：

```
webControl["Click"] = string.Concat(new object[] { "Open(\"", item.ID, "\", \"", item.Language, "\", \"", item.Version, "\")" }); 
```

因此，您需要创建自己的 WorkboxForm 版本，继承 Sitecore 的 WorkboxForm 类并覆盖 Open 方法，如下所示：

```
protected new void Open(string id, string language, string version)
{
// Your code goes here
} 
```

在 Workbox.xml 中，将 CodeBeside 更改为指向您的新类。

有关 Workbox 中自定义功能的更多信息，我可以推荐阅读[这篇](http://blog.navigationarts.com/customizing-the-sitecore-workbox/)文章，其中包含很多详细信息，以及 Workbox 中的其他方法。
StackOverflow上还有另一个有用的[问题](https://stackoverflow.com/questions/14645368/sitecore-workbox-display-item-field-for-name)。对已接受答案的评论指出，您可以将 Workbox.xml 文件放入 /sitecore/shell/override。

请注意，这是基于 Sitecore 6.5 update 5，在其他版本中可能会有所不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:51:37.337

在 Appconfig/Commands.config 中，您可以找到与其相关的命令和类。我已经反映了一些命令，例如预览、打开并了解内部发生的情况。

例如 name="item:open" type="Sitecore.Shell.Framework.Commands.ContentEditor.OpenItem,Sitecore.Kernel"

我已经覆盖了工作框中的“打开”mwthod，如下所示在新选项卡中打开内容编辑器项，

```
...
UrlString urlString = new UrlString("/sitecore/shell/Applications/Content%20Editor");

        urlString.Append("id", id);
        urlString.Append("vs", version);
        urlString.Append("ro", sectionId);
        urlString.Append("la", language);
        urlString.Append("fo", id);

        SheerResponse.Eval("window.open('" + (object)urlString + "', '_blank')");
... 
```

有用！！！！！

# php - 从 PostgreSQL 以不同格式返回的布尔值

> ID：15020816
> 
> 赞同：0
> 
> 时间：2013-02-22T09:29:28.407
> 
> 标签：php, postgresql, yii

我们有 2 台服务器，它们的代码相同。在其中一个表上的询问返回 t/f 为布尔真/假，而在另一个上它返回 0/1。你知道为什么会这样吗？也许是 yii 设置或服务器设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T01:49:00.540

首先是一些背景。

许多 RDBMS 不支持 bool 类型，因此人们为此使用非常小的 int 字段。PostgreSQL 支持具有三个值的 bool 类型： `true`、、`false`或`null`（或未知）。

从两台服务器都是 PostgreSQL 的问题来看，这并不是 100% 清楚的。如果一个是 PostgreSQL 而一个不是，人们会期待这种行为，所以这是首先要注意的事情。然而，即使两者都是 PostgreSQL，数据库设计人员也不会闻所未闻，设计一组表以使用 smallints 或 bits，然后再更改为 bool。

如果两个系统都是 PostgreSQL，那么在 psql 中唯一可能导致这种情况的是不同的表设计。查看`\d tablename`并检查是否将一个设置为使用 bool，而另一个设置为使用位或整数类型。

# c# - NHibernate Query<> 与 QueryOver<> 有什么区别？

> ID：15020817
> 
> 赞同：37
> 
> 时间：2013-02-22T09:29:29.930
> 
> 标签：c#, nhibernate

我刚开始在我当前的项目中使用 NHibernate（使用 SQLite），而且我主要使用的是 NHibernate `Query<>`，因为我熟悉在 Linq 中编写数据库查询。

当我遇到一些更复杂的查询时，我做了一些研究`QueryOver<>`并认为应该优先考虑它，`Query<>`因为*"QueryOver syntax is NH specific"*。此外，似乎没有什么`Query<>`可以做却做不到`QueryOver<>`。

所以我开始`Query<>`相应地替换所有用法。不久之后，我遇到了第一个“问题”，使用`Query<>`起来似乎更方便了。`CustomNumber`示例（从表中的列中选择最大值`BillingDataEntity`）：

```
int result = Session.Query<BillingDataEntity>().Select(x => x.CustomNumber).OrderByDescending(a => a).FirstOrDefault();
int result = Session.QueryOver<BillingDataEntity>().Select(x => x.CustomNumber).OrderBy(a => a.CustomNumber).Desc.Take(1).SingleOrDefault<int>(); 
```

我不喜欢的是需要将结果显式转换为 int 并且 Query<> 版本更易于阅读。我的查询完全错误，或者换句话说：有更好的方法吗？

我查看了生成的 SQL 输出：

```
NHibernate: select billingdat0_.CustomNumber as col_0_0_ from "BillingDataEntity" billingdat0_ order by billingdat0_.CustomNumber desc limit 1
NHibernate: SELECT this_.CustomNumber as y0_ FROM "BillingDataEntity" this_ ORDER BY this_.CustomNumber desc limit @p0;@p0 = 1 [Type: Int32 (0)] 
```

我到底在看什么？这是 NHibernate 进一步转换为实际数据库查询的“内部”（方法相关）查询吗？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-02-22T10:54:04.917

Stackoverflow 上有很多关于 QueryOver 与 Query 的答案，但简而言之：-

> QueryOver 是 Criteria 的强类型版本，并且更加特定于 NHibernate。您在 ICriteria 中可以做的几乎所有事情都可以使用 QueryOver 来完成。在 ICriteria NH2 的黄金时代，您总是必须转换，因此这就是为什么现在您需要在链的末端转换回 int。
> 
> LINQ (Query) 是一种适用于 IQueryable 的标准查询方法，不需要对 NHibernate 的显式引用，并且可以被认为与 ORM 无关，因此遵循 linq 标准。正如您正确指出的那样，当您选择 customNumber 的结果时，您不需要强制转换为 int。

如果生成的 SQL 非常不同，我会对您的简单示例感到非常惊讶。

我是它的忠实粉丝，`QueryOver`但随着 Linq 提供程序变得越来越成熟，我使用 95% 的查询，`Query`但对于一些 Nhibernate 特定的东西，我又求助于`QueryOver`. 无论哪种方式，我都建议使用分析工具来查看您可以接受的内容。

参考：[权衡](https://stackoverflow.com/questions/3874012/tradeoffs-using-nhibernate-3-0-queryover-or-linq-provider)或[对比](https://stackoverflow.com/questions/5328565/nhibernate3-query-vs-queryover)和[对比](https://stackoverflow.com/questions/5328565/nhibernate3-query-vs-queryover)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T17:02:33.877

关于您的 QueryOver 版本，我会写：

```
int result = Session.QueryOver<BillingDataEntity>()
               .Select(Projections.Max<BillingDataEntity>(x => x.CustomNumber))
               .SingleOrDefault<int>(); 
```

它看起来很可读，生成的 SQL 将类似于：

```
SELECT max(this_.CustomNumber) as y0_ FROM "BillingDataEntity" this_ 
```

希望这会有所帮助

# cocoa - 标签对齐

> ID：15020819
> 
> 赞同：2
> 
> 时间：2013-02-22T09:29:33.527
> 
> 标签：cocoa, nstextfield

```
for(int j=0;j<featuresKeyCount;j++)     {
    NSString *str1=[featuresKey objectAtIndex:j];
    NSString *str2=[str1 stringByAppendingString: @":"];   
} 
```

在上面的代码中，我得到

```
str1= Phone No
      Projector
      VCD
      LCD
      Polycom
      Digital Phone
      Speaker Phone

In str2 = Phone No:
      Projector:
      VCD:
      LCD:
      Polycom:
      Digital Phone:
      Speaker Phone: 
```

但我想要这样的输出：

```
 Phone No     :
                                 Projector    :
                                 VCD          :
                                 LCD          :
                                 Polycom      :
                                 Digital Phone:
                                 Speaker Phone: 
```

对此有任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T09:39:37.660

即使您从最长的字符串中计算字符数，您也永远不会在文本中得到相同的空格。

假设长度为 3。那么“aaa”和“iii”这两个 teken 的长度/大小将不一样，因为每个字符占用不同的空格。

可能的解决方案是：

为一个对象制作两个文本字段，如

```
"First                "  ":"
"Second               "  ":"
"This is too long to  "  ":" 
```

使第一个标签足够长并且只存储文本，它的对应部分只有“：”。

或者另一种方法是右对齐（但这不是苹果指南的首选），如：

```
"                First:"  
"               Second:"  
"  This is too long to:" 
```

# php - MySQL 子查询，构建 Select 语句需要帮助

> ID：15020821
> 
> 赞同：1
> 
> 时间：2013-02-22T09:29:41.243
> 
> 标签：php, mysql, sql, select, subquery

我在构建选择查询时遇到问题。

我有一个表格，我在下面的简化版本中显示了它。列比我展示的多得多，但我省略了那些与此查询无关的列。

```
ID   ReceiptNo  TransactionType 
--------------------------------
 1 | 2SJ1532   |  SALE
 2 | 8UG7825   |  SALE
 3 | 0619373   |  SALE
 4 | 8UG7825   |  RFND
 5 |           |  TEST 
```

我只想选择那些交易类型为“SALE”的行，其中所选行的 ReceiptNo 也出现在交易类型为 RFND 的行中。

因此，在上面的示例中，我想选择第 2 行。因为它具有交易类型 SALE，并且其 ReceiptNo 也出现在交易类型为 RFND 的行中。

我有以下查询来选择所有 SALE 类型的交易类型，但我认为我需要一个子查询来使选择按上述方式工作。如果有人可以提供帮助，那就太好了。

```
SELECT * FROM $table_name WHERE RecieptNo IS NOT NULL AND TRIM(RecieptNo) <>  '' AND   TransactionType = 'SALE' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T10:14:22.407

```
SELECT t.*
FROM your_table t
JOIN your_table t2 ON t2.TransactionType = 'RFND' AND t2.ReceiptNo=t.ReceiptNo
GROUP BY t.ID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T09:32:18.920

尝试这个：

```
SELECT * 
FROM $table_name
WHERE RecieptNo IN(SELECT RecieptNo 
                   FROM tablename
                   WHERE TransactionType IN('Sale', 'RFND')
                   GROUP BY RecieptNo 
                   HAVING COUNT( DISTINCT TransactionType) = 2); 
```

这将确保所选`RecieptNo`的交易类型`Sale`, `RFND`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T09:34:51.553

```
SELECT *
FROM $table_name X1
WHERE X1.TransactionType = 'SALE'
AND EXISTS (
SELECT X2.ReceiptNo
FROM $table_name X2
WHERE X1.ReceiptNo=X2.ReceiptNo
AND X2.TransactionType = 'RFND'
) 
```

# html - 如何在 IE8 和 9 中支持占位符属性

> ID：15020826
> 
> 赞同：132
> 
> 时间：2013-02-22T09:30:02.820
> 
> 标签：html, internet-explorer, placeholder

我有一个小问题，`placeholder`IE 8-9 不支持输入框的属性。

在我的项目（ASP Net）中提供这种支持的最佳方式是什么。我正在使用 jQuery。我需要使用其他一些外部工具吗？

[http://www.hagenburger.net/BLOG/HTML5-Input-Placeholder-Fix-With-jQuery.html](http://www.hagenburger.net/BLOG/HTML5-Input-Placeholder-Fix-With-jQuery.html)是一个好的解决方案吗？

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2013-02-22T09:51:56.890

您可以使用以下任何一种 polyfill：

*   [https://github.com/jamesallardice/Placeholders.js](https://github.com/jamesallardice/Placeholders.js)（不支持密码字段）
*   [https://github.com/chemerisuk/better-placeholder-polyfill](https://github.com/chemerisuk/better-placeholder-polyfill)

这些脚本将`placeholder`在不支持该属性的浏览器中添加对该属性的支持，并且它们不需要 jQuery！

* * *

## 回答 #2

> 赞同：89
> 
> 时间：2013-02-22T09:32:33.220

你可以使用这个 jQuery 插件： [https ://github.com/mathiasbynens/jquery-placeholder](https://github.com/mathiasbynens/jquery-placeholder)

但是您的链接似乎也是一个很好的解决方案。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2014-02-07T20:50:25.123

**$.Browser.msie**不再在最新的 JQuery 上......你必须使用$ **.support**

如下所示：

```
 <script>

     (function ($) {
         $.support.placeholder = ('placeholder' in document.createElement('input'));
     })(jQuery);

     //fix for IE7 and IE8
     $(function () {
         if (!$.support.placeholder) {
             $("[placeholder]").focus(function () {
                 if ($(this).val() == $(this).attr("placeholder")) $(this).val("");
             }).blur(function () {
                 if ($(this).val() == "") $(this).val($(this).attr("placeholder"));
             }).blur();

             $("[placeholder]").parents("form").submit(function () {
                 $(this).find('[placeholder]').each(function() {
                     if ($(this).val() == $(this).attr("placeholder")) {
                         $(this).val("");
                     }
                 });
             });
         }
     });
 </script> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-22T09:38:32.780

如果你使用 jquery，你可以这样做。来自这个网站[Placeholder with Jquery](http://www.hagenburger.net/BLOG/HTML5-Input-Placeholder-Fix-With-jQuery.html)

```
$('[placeholder]').parents('form').submit(function() {
  $(this).find('[placeholder]').each(function() {
    var input = $(this);
    if (input.val() == input.attr('placeholder')) {
      input.val('');
    }
  })
}); 
```

这些是备用链接

1.  [占位符 jquery 库](https://github.com/ginader/HTML5-placeholder-polyfill)
2.  [HTML5 polyfills——](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills)去占位符部分

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-11-20T03:04:04.833

我尝试过的几个插件存在兼容性问题，在我看来，这似乎是支持文本输入占位符的最简单方法：

```
function placeholders(){
    //On Focus
    $(":text").focus(function(){
        //Check to see if the user has modified the input, if not then remove the placeholder text
        if($(this).val() == $(this).attr("placeholder")){
            $(this).val("");
        }
    });

    //On Blur
    $(":text").blur(function(){
        //Check to see if the use has modified the input, if not then populate the placeholder back into the input
        if( $(this).val() == ""){
            $(this).val($(this).attr("placeholder"));
        }
    });
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-12-10T11:22:47.133

```
$(function(){    
    if($.browser.msie && $.browser.version <= 9){
        $("[placeholder]").focus(function(){
            if($(this).val()==$(this).attr("placeholder")) $(this).val("");
        }).blur(function(){
            if($(this).val()=="") $(this).val($(this).attr("placeholder"));
        }).blur();

        $("[placeholder]").parents("form").submit(function() {
            $(this).find('[placeholder]').each(function() {
                if ($(this).val() == $(this).attr("placeholder")) {
                    $(this).val("");
                }
            })
        });
    }
}); 
```

尝试这个

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-07-03T12:46:16.063

我使用thisone，它只是Javascript。

我只是有一个带值的输入元素，当用户单击输入元素时，它会将其更改为没有值的输入元素。

您可以使用 CSS 轻松更改文本的颜色。占位符的颜色是 id #IEinput 中的颜色，您键入的文本的颜色是 id #email 中的颜色。**不要**使用getElementsByClassName，因为不支持占位符的IE版本也不支持getElementsByClassName！

您可以通过将原始密码输入的类型设置为文本来在密码输入中使用占位符。

修补匠：[http](http://tinker.io/4f7c5/1) ://tinker.io/4f7c5/1 - JSfiddle 服务器已关闭！

*对不起，我的英语不好

**JAVASCRIPT**

```
function removeValue() {
    document.getElementById('mailcontainer')
        .innerHTML = "<input id=\"email\" type=\"text\" name=\"mail\">";
    document.getElementById('email').focus(); } 
```

**HTML**

```
<span id="mailcontainer">
    <input id="IEinput" onfocus="removeValue()" type="text" name="mail" value="mail">
</span> 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-10-19T10:08:13.553

对于其他登陆这里的人。这对我有用：

```
//jquery polyfill for showing place holders in IE9
$('[placeholder]').focus(function() {
    var input = $(this);
    if (input.val() == input.attr('placeholder')) {
        input.val('');
        input.removeClass('placeholder');
    }
}).blur(function() {
    var input = $(this);
    if (input.val() == '' || input.val() == input.attr('placeholder')) {
        input.addClass('placeholder');
        input.val(input.attr('placeholder'));
    }
}).blur();

$('[placeholder]').parents('form').submit(function() {
    $(this).find('[placeholder]').each(function() {
        var input = $(this);
        if (input.val() == input.attr('placeholder')) {
            input.val('');
        }
    })
}); 
```

只需将其添加到您的 script.js 文件中。由[http://www.hagenburger.net/BLOG/HTML5-Input-Placeholder-Fix-With-jQuery.html提供](http://www.hagenburger.net/BLOG/HTML5-Input-Placeholder-Fix-With-jQuery.html)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-01-26T17:43:38.013

```
<input type="text" name="Name" value="Name" onfocus="this.value = ''" onblur=" if(this.value = '') { value = 'Name'}" /> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-04-21T10:24:28.127

添加下面的代码，它就会完成。

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script>
    <script src="https://code.google.com/p/jquery-placeholder-js/source/browse/trunk/jquery.placeholder.1.3.min.js?r=6"></script>
    <script type="text/javascript">
        // Mock client code for testing purpose
        $(function(){
            // Client should be able to add another change event to the textfield
            $("input[name='input1']").blur(function(){ alert("Custom event triggered."); });    
            // Client should be able to set the field's styles, without affecting place holder
            $("textarea[name='input4']").css("color", "red");

            // Initialize placeholder
            $.Placeholder.init();

            // or try initialize with parameter
            //$.Placeholder.init({ color : 'rgb(255, 255, 0)' });

            // call this before form submit if you are submitting by JS
            //$.Placeholder.cleanBeforeSubmit();
        });
    </script> 
```

[从https://code.google.com/p/jquery-placeholder-js/downloads/detail?name=jquery.placeholder.1.3.zip](https://code.google.com/p/jquery-placeholder-js/downloads/detail?name=jquery.placeholder.1.3.zip)下载完整的代码和演示

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-08-28T22:15:58.150

我使用了这个链接的代码 [http://dipaksblogonline.blogspot.com/2012/02/html5-placeholder-in-ie7-and-ie8-fixed.html](http://dipaksblogonline.blogspot.com/2012/02/html5-placeholder-in-ie7-and-ie8-fixed.html "http://dipaksblogonline.blogspot.com/2012/02/html5-placeholder-in-ie7-and-ie8-fixed.html")

但是在浏览器检测中我使用了：

```
if (navigator.userAgent.indexOf('MSIE') > -1) {
 //Your placeholder support code here...
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-05-22T12:44:57.940

由于大多数解决方案都使用 jQuery，或者不像我希望的那样令人满意，所以我为自己编写了一个用于 mootools 的片段。

```
function fix_placeholder(container){
    if(container == null) container = document.body;

    if(!('placeholder' in document.createElement('input'))){

        var inputs = container.getElements('input');
        Array.each(inputs, function(input){

            var type = input.get('type');

            if(type == 'text' || type == 'password'){

                var placeholder = input.get('placeholder');
                input.set('value', placeholder);
                input.addClass('__placeholder');

                if(!input.hasEvent('focus', placeholder_focus)){
                    input.addEvent('focus', placeholder_focus);
                }

                if(!input.hasEvent('blur', placeholder_blur)){
                    input.addEvent('blur', placeholder_blur);
                }

            }

        });

    }
}

function placeholder_focus(){

    var input = $(this);    

    if(input.get('class').contains('__placeholder') || input.get('value') == ''){
        input.removeClass('__placeholder');
        input.set('value', '');
    }

}

function placeholder_blur(){

    var input = $(this);    

    if(input.get('value') == ''){
        input.addClass('__placeholder');
        input.set('value', input.get('placeholder'));
    }

} 
```

我承认它看起来比其他的更多，但效果很好。 **__placeholder**是一个 ccs 类，用于使占位符文本的颜色变得花哨。

我使用了window.addEvent **('domready', ...****中**的 fix_placeholder以及任何额外添加的代码，如弹出窗口。

 **希望你喜欢。

亲切的问候。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-11-05T22:46:01.337

这是一个 javascript 函数，它将为 IE 8 及以下版本创建占位符，它也适用于密码：

```
/* Function to add placeholders to form elements on IE 8 and below */
function add_placeholders(fm) {	
	for (var e = 0; e < document.fm.elements.length; e++) {
		if (fm.elements[e].placeholder != undefined &&
		document.createElement("input").placeholder == undefined) { // IE 8 and below					
			fm.elements[e].style.background = "transparent";
			var el = document.createElement("span");
			el.innerHTML = fm.elements[e].placeholder;
			el.style.position = "absolute";
			el.style.padding = "2px;";
			el.style.zIndex = "-1";
			el.style.color = "#999999";
			fm.elements[e].parentNode.insertBefore(el, fm.elements[e]);
			fm.elements[e].onfocus = function() {
					this.style.background = "yellow";	
			}
			fm.elements[e].onblur = function() {
				if (this.value == "") this.style.background = "transparent";
				else this.style.background = "white";	
			}		
		} 
	}
}

add_placeholders(document.getElementById('fm'))
```

```
<form id="fm">
  <input type="text" name="email" placeholder="Email">
  <input type="password" name="password" placeholder="Password">
  <textarea name="description" placeholder="Description"></textarea>
</form>
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2014-01-27T09:04:57.860

```
 <script>
        if ($.browser.msie) {
            $('input[placeholder]').each(function() {

                var input = $(this);

                $(input).val(input.attr('placeholder'));

                $(input).focus(function() {
                    if (input.val() == input.attr('placeholder')) {
                        input.val('');
                    }
                });

                $(input).blur(function() {
                    if (input.val() == '' || input.val() == input.attr('placeholder')) {
                        input.val(input.attr('placeholder'));
                    }
                });
            });
        }
        ;
    </script> 
```**

# linux - 如何在 CMake execute_process 中使用 find -exec？

> ID：15020830
> 
> 赞同：4
> 
> 时间：2013-02-22T09:30:11.590
> 
> 标签：linux, find, installation, cmake, exec

我使用 CMake`install(DIRECTORIES...)`表单在安装时复制标题：

```
install(DIRECTORIES ${CMAKE_CURRENT_SOURCE_DIR}
  DESTINATION include
  FILES_MATCHING PATTERN "*.h") 
```

但是，此命令[确实会创建空目录](http://www.cmake.org/pipermail/cmake/2010-July/038310.html)（未找到标头的目录）。因此，我想在安装过程中找到并删除那些空目录：

```
install(CODE "execute_process(
  COMMAND find -type d -empty -exec rmdir '{}' ';'
  WORKING_DIRECTORY ${CMAKE_INSTALL_PREFIX}
  ERROR_FILE ${CMAKE_CURRENT_BINARY_DIR}/prune_empty_dirs.err)") 
```

使用上面的命令，文件`prune_empty_dirs.err`包含：

```
find: missing argument to `-exec' 
```

我试图摆脱大括号，但它会产生相同的行为。我究竟做错了什么？谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-15T16:36:24.600

我找到了解决方案。它不是“{}”而不是分隔符“;”。以下语法对我有用（CMake 2.8.9）：

```
--exec rm {} "\;" 
```

# ruby - 在 1 个表单中验证 2 个模型

> ID：15020832
> 
> 赞同：0
> 
> 时间：2013-02-22T09:30:13.423
> 
> 标签：ruby, ruby-on-rails-3, validation, nested-forms

我正在学习 RoR，但我找不到以相同形式验证我的模型的方法。它正在验证，但它只显示一个模型（地址）的错误消息，并且它正在填充另一个模型的其他输入字段，就像在进行更改之前一样。我尝试了几件事，但都没有奏效。

在 edit.html.erb 中，我显示了错误消息。仅当一个模型不正确时，此方法才能正常工作。如果两个模型中的输入都不正确，我只会看到地址的错误消息，并且相互性的输入字段被重置为以前的值。

我认为这就是你真正需要的。我的地址控制器是空的。除验证外，其他一切工作正常。

马蒂亚斯。

## 编辑.html.erb：

```
<h1>Edit Mutuality</h1>

<%= form_for @mutuality do |f| %>
<%= fields_for @address do |fa| %>
    <% if @mutuality.errors.any? %>
        <h2>Errors:</h2>
        <ul>
            <% @mutuality.errors.full_messages.each do |msg| %>
                <li><%= msg %></li>
            <% end %>
        </ul>
    <% end %>
    <% if @address.errors.any? %>
        <h2>Errors:</h2>
        <ul>
            <% @address.errors.full_messages.each do |msg| %>
                <li><%= msg %></li>
            <% end %>
        </ul>
    <% end %>
<table>
    <tr>
        <td>
            <%= f.label :name %>
        </td>
        <td>
            <%= f.text_field :name %>
        </td>
    </tr>
    <tr>
        <td>
            <%= f.label :phone %>
        </td>
        <td>
            <%= f.text_field :phone %>
        </td>
    </tr>
    <tr>
        <td>
            <%= f.label :contact %>
        </td>
        <td>
            <%= f.text_field :contact %>
        </td>
    </tr>
    <tr>
        <td>
            <%= fa.label :street %>
        </td>
        <td>
            <%= fa.text_field :street %>
        </td>
    </tr>
    <tr>
        <td>
            <%= fa.label :number %>
        </td>
        <td>
            <%= fa.text_field :number %>
        </td>
    </tr>
    <tr>
        <td>
            <%= fa.label :zipcode %>
        </td>
        <td>
            <%= fa.text_field :zipcode %>
        </td>
    </tr>
    <tr>
        <td>
            <%= fa.label :city %>
        </td>
        <td>
            <%= fa.text_field :city %>
        </td>
    </tr>
    <tr>
        <td>
            &nbsp;
        </td>
        <td>
            <%= f.submit %>
        </td>
    </tr>
</table>
<% end %> 
```

## 控制器：

```
class MutualitiesController < ApplicationController

def index
    @mutualities = Mutuality.all
  end

  def show
    @mutuality = Mutuality.find(params[:id])
  end

  def new
    @mutuality = Mutuality.new
    @address = Address.new
  end

  def create
    @mutuality = Mutuality.new(params[:mutuality])
    @address = Address.new(params[:address])

    if @address.save
      @mutuality.address_id = @address.id
      if @mutuality.save
        redirect_to mutualities_path, :notice => "Mutuality saved with succes!"
      else
        render "new"
      end
    else
      render "new"
    end    
  end

  def edit
    @mutuality = Mutuality.find(params[:id])
    @address = Address.find(@mutuality.address_id)
  end

  def update
    @mutuality = Mutuality.find(params[:id])
    @address = Address.find(@mutuality.address_id)

    if @address.update_attributes(params[:address])
      if @mutuality.update_attributes(params[:mutuality])
        redirect_to mutualities_path, :notice => "Mutuality updated with succes!"
      else
        render "edit"
      end
    else
      render "edit"
    end

  end

  def destroy
    @mutuality = Mutuality.find(params[:id])
    @address = Address.find(@mutuality.address_id)
    @mutuality.destroy
    @address.destroy
    redirect_to mutualities_path
  end

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:11:33.547

Rails 可以自动处理嵌套属性。您正在手动完成所有操作。不确定您是否在模型中正确定义了关联。

因此，在您的模型中，您应该编写：

```
class Mutuality
  belongs_to :address
  accepts_nested_attributes_for :address
end 
```

然后在你的控制器中你可以写：

```
def create
  @mutuality = Mutuality.new(params[:mutuality])

  if @mutuality.save
    redirect_to mutualities_path, :notice => "Mutuality saved with succes!"
  else
    render "new"
  end
end 
```

HTH。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T10:59:31.497

我终于设法让这件事成功了！我做了 Nathanvda 告诉我的更改，但我必须添加一些内容才能使其正常工作。还有一个小问题。我无法删除地址。它只会删除互惠。有任何想法吗？

## 地址.rb

```
class Address < ActiveRecord::Base
  #attr_accessible :street, :number, :zipcode, :city
  attr_protected :id

  has_one :mutuality

  validates_presence_of :street, :number, :city

end 
```

## 互惠.rb

```
class Mutuality < ActiveRecord::Base
  #attr_accessible :name, :phone, :contact, :address_id
  attr_protected :id, :address_id

  belongs_to :address
  accepts_nested_attributes_for :address, :allow_destroy => true

  validates_presence_of :name, :phone, :contact
  validates_length_of :name, :minimum => 5
  validates_uniqueness_of :name

end 
```

这是我在 show.html.erb 上使用的链接：

```
<p>
    <%= link_to "Back", mutualities_path %> |
    <%= link_to "Edit", edit_mutuality_path %> |
    <%= link_to "Delete", @mutuality, :confirm => "You are going to delete " +  @mutuality.name + ". Do you wish to continue?", :method => :delete %>
</p> 
```

这是破坏功能：

```
 def destroy
    @mutuality = Mutuality.find(params[:id])
    if @mutuality.destroy
      redirect_to mutualities_path, :notice => "Mutuality deleted with succes!"
    else
       redirect_to mutualities_path, :error => "A problem has occured."
    end
  end 
```

马蒂亚斯

# javascript - 是否可以从 KISSmetrics 读取属性？

> ID：15020833
> 
> 赞同：4
> 
> 时间：2013-02-22T09:30:16.287
> 
> 标签：javascript, cookies, browser, kissmetrics

我们正在使用 KISSmetrics 来跟踪我们的用户，并且我想读取我为用户设置的属性。

这可能吗？没关系，它只是存储在 cookie 中的数据，但我只想阅读它。

如果没有，是否有任何方法可以获得一些标准属性，例如“returning”，可用于查看该用户是否是新访问者/注册者。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-04T09:18:46.213

不，KISSmetrics 不允许您读取通过 JavaScript 设置的属性。只有用户的身份可用。

# java - 完全加入 Hibernate HQL

> ID：15020837
> 
> 赞同：2
> 
> 时间：2013-02-22T09:30:30.107
> 
> 标签：java, hibernate, join, hql

我正在尝试使用 HQL 在两个表的特定列上使用 FULL JOIN

```
List<B> expiredMacs = getHibernateTemplate()
                .find("from B b join A a where b.type != 'USER' and (b.id != a.id or (b.name == a.name and b.value != a.value))"); 
```

但它抛出错误意外令牌：= 靠近第 1 行，第 325 列

知道出了什么问题吗？

在 SQL 中

```
SELECT B.* FROM  B b, A a WHERE b.type != 'USER' AND (b.id != a.id or (b.name == a.name and b.value != a.value)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T09:49:00.233

最后我找到了解决方案

```
List<B> expiredMacs = getHibernateTemplate()
            .find(SELECT b from B b, A a where b.type <> 'USER' and (b.id <> a.id or (b.name == a.name and b.value <> a.value))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T09:35:05.743

据我所知，`==`是不允许的，你应该使用`=`. 请参阅[HQL 文档](http://docs.jboss.org/hibernate/orm/4.1/devguide/en-US/html/ch11.html#d5e3188)。

`!=`是允许的，但最好使用它，`<>`因为它更接近标准 SQL。

# html - 方向：带有文本对齐的rtl：中心不起作用

> ID：15020843
> 
> 赞同：1
> 
> 时间：2013-02-22T09:30:50.680
> 
> 标签：html, css

我有一个奇怪的问题，我不明白。这是我的 CSS

```
 .tooltip {
    position: absolute;
    top: 100px;
    left: 100px;
  -moz-border-radius:5px;
    border-radius: 5px;
  border: 2px solid #000;
    background: #222222; 
  background: #fff;
    opacity: .9;
    color: #eeeeee; 
  color: black;
    padding: 10px;
    width: 300px;
    font-size: 12px;
    z-index: 10;
}

.tooltip .title {
  text-align: center;
  direction: rtl;
} 
```

这是我的html：

```
<span class="tooltip">
<span class="title">טקסט בעברית </span>
</span> 
```

但由于某种原因，我的文本是定向的 rtl 但从所有地方都向左对齐！我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T09:36:21.967

利用`display:block`

```
.tooltip .title {
   display:block;
   text-align: center;
   direction: rtl;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T09:35:45.593

啊，我明白你的意思了 - 你的文字`<span class="title">`没有居中对齐：http: [//jsfiddle.net/24e94/1/](http://jsfiddle.net/24e94/1/)

这是因为`<span>`s 默认显示为内联元素（即它们的宽度仅与其内容一样宽）。

您需要将其设置`<span>`为`display:block`，或对其父级执行相同操作并移至`text-align:center`父级。

*   [http://jsfiddle.net/24e94/](http://jsfiddle.net/24e94/)

# java - 合并方法（二叉搜索树）

> ID：15020845
> 
> 赞同：1
> 
> 时间：2013-02-22T09:31:06.863
> 
> 标签：java, methods, merge, binary-search-tree

我正在编写 BST（二叉搜索树），我正在阅读的书中有一个示例提供了此代码

```
public int height() {
    return height(root);
}

private int height(BinaryNode<E> node) {
    if (node == null) {
        return 0;
    } else {
        int leftHeight = height(node.left);
        int rightHeight = height(node.right);

        if (leftHeight < rightHeight) {
            return 1 + rightHeight;
        } else {
            return 1 + leftHeight;
        }
    }
} 
```

但是没有关于为什么有两种不同的高度方法的解释性信息。因此，我问你们是否可以将这两种方法合并为一种高度方法。有没有可能，如果没有。为什么不？

感谢任何可能的帮助，鲍勃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T09:36:50.610

假设您提供的方法是树类的一部分，那么我看不出如何合并它们。第一个是一个公共方法，它不需要参数，第二个是一个辅助递归方法，用于检查给定节点的高度。第一个使用第二个：它调用根本身的辅助方法。第二种方法不应该从外部看到，所以它是私有的。

如果 height 方法是在 Node 级别实现的，那么它可以在一个没有参数的递归方法中完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T09:34:13.330

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T09:51:43.520

请注意，该`int height()`方法是**public**。这是将从您的班级外部调用的那个。它必须决定树的高度。它会通过调用另一个来做到这一点。

另请参见`int height(BinaryNode<E> node)`是**私有**的，因为它仅由`public int height()`方法使用来确定任何子树的高度。

# java - 复制构造函数和防御性复制

> ID：15020850
> 
> 赞同：18
> 
> 时间：2013-02-22T09:31:15.580
> 
> 标签：java, defensive-programming

什么是***复制构造函数***？

有人可以分享一个有助于理解***防御性复制原则***的小例子吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-22T09:45:02.653

这是一个很好的例子：

```
class Point {
  final int x;
  final int y;

  Point(int x, int y) {
    this.x = x;
    this.y = y;
  }

  Point(Point p) {
    this(p.x, p.y);
  }

} 
```

请注意构造函数如何`Point(Point p)`获取 a`Point`并对其进行复制 - 那是 a `copy constructor`。

这是一个`defensive`副本，因为通过复制原件`Point`可以防止更改。

所以现在：

```
// A simple point.
Point p1 = new Point(3,42);
// A new point at the same place as p1 but a completely different object.
Point p2 = new Point(p1); 
```

请注意，这不一定是创建对象的**正确**方法。然而，这是一种创建对象的**好**方法，可确保*您不会意外地对同一个对象进行两次引用*。显然，如果这是您想要实现的目标，这只是一件好事。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-22T09:45:23.963

人们经常在 C++ 中看到复制构造函数，它们用于部分隐藏、自动调用的操作。

`java java.awt.Point`并`Rectangle`浮现在脑海中；也是非常古老的可变对象。

通过使用不可变对象，例如`String`或`BigDecimal`，只需分配对象引用即可。事实上，由于 C++ 之后 Java 的早期阶段，***String***中仍然存在一个愚蠢的复制构造函数：

```
public class Recipe {
    List<Ingredient> ingredients;

    public Recipe() {
        ingredients = new ArrayList<Ingredient>();
    }

    /** Copy constructor */
    public Recipe(Recipe other) {
        // Not sharing: ingredients = other.ingredients;
        ingredients = new ArrayList<>(other.ingredients);
    }

    public List<Ingredient> getIngredients() {
        // Defensive copy, so others cannot change this instance.
        return new ArrayList<Ingredient>(ingredients);
        // Often could do:
        // return Collections.immutableList(ingredients);
    }
} 
```

* * *

***根据要求***

带有复制构造函数的泄漏类：

```
public class Wrong {
    private final List<String> list;

    public Wrong(List<String> list) {
        this.list = list; // Error: now shares list object with caller.
    }

    /** Copy constructor */
    public Wrong(Wrong wrong) {
        this.list = wrong.list; // Error: now shares list object with caller.
    }

    public List<String> getList() {
        return list; // Error: now shares list object with caller.
    }

    public void clear() {
        list.clear();
    }
} 
```

具有复制构造函数的正确类：

```
public class Right {
    private final List<String> list;

    public Right(List<String> list) {
        this.list = new ArrayList<>(list);
    }

    public Right(Right right) {
        this.list = new ArrayList<>(right.list);
    }

    public List<String> getList() {
        return new ArrayList<>(list);
    }

    public List<String> getListForReading() {
        return Collections.unmodifiableList(list);
    }

    public void clear() {
        list.clear();
    }
} 
```

带测试代码：

```
public static void main(String[] args) {
    List<String> list1 = new ArrayList<>();
    Collections.addAll(list1, "a", "b", "c", "d", "e");
    Wrong w1 = new Wrong(list1);
    list1.remove(0);
    System.out.printf("The first element of w1 is %s.%n", w1.getList().get(0)); // "b"
    Wrong w2 = new Wrong(w1);
    w2.clear();
    System.out.printf("Size of list1 %d, w1 %d, w2 %d.%n",
        list1.size(), w1.getList().size(), w2.getList().size());

    List<String> list2 = new ArrayList<>();
    Collections.addAll(list2, "a", "b", "c", "d", "e");
    Right r1 = new Right(list2);
    list2.remove(0);
    System.out.printf("The first element of r1 is %s.%n", r1.getList().get(0)); // "a"
    Right r2 = new Right(r1);
    r2.clear();
    System.out.printf("Size of list2 %d, r1 %d, r2 %d.%n",
        list2.size(), r1.getList().size(), r2.getList().size());
} 
```

这使：

```
The first element of w1 is b.
Size of list1 0, w1 0, w2 0.
The first element of r1 is a.
Size of list2 4, r1 5, r2 0. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T09:36:25.680

这是您通过传递旧对象并复制其值来创建新对象的地方。

```
Color copiedColor = new Color(oldColor); 
```

代替 ：

```
Color copiedColor = new Color(oldColor.getRed(),
                              oldColor.getGreen(), oldColor.getBlue()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-22T09:50:14.663

复制构造函数用于使用现有对象的值创建新对象。
一种可能的用例是保护原始对象不被修改，而复制的对象可用于处理。

```
public class Person  
{  
   private String name;  
   private int age;  
   private int height;  

/** 
 * Copy constructor which creates a Person object identical to p.  
 */  
   public person(Person p)  
   {  
      person = p.person;  
      age = p.age;  
      height = p.height;  
   }  
.
.
. 
} 
```

与防御副本相关的[这里](http://www.javapractices.com/topic/TopicAction.do?Id=15)是一个很好的阅读

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-22T09:47:33.790

当您需要克隆对象时，可以使用 java 中的复制构造函数

```
class Copy {
   int a;
   int b;
  public Copy(Copy c1) {
    a=c1.a;
    b=c1.b;
  }
} 
```

在 java 中，当你给 Copy 时`c2=c1`；只需创建对原始对象而不是副本的引用，因此您需要手动复制对象值。

看到这个：

*   [为什么Java没有复制构造函数？](https://stackoverflow.com/questions/827785/why-doesnt-java-have-a-copy-constructor)

*   [Java中的复制构造函数](http://www.geeksforgeeks.org/copy-constructor-in-java/)

# hql - HQL 中的分组和计数查询

> ID：15020858
> 
> 赞同：0
> 
> 时间：2013-02-22T09:31:36.817
> 
> 标签：hql

我的 HQL 查询让我很头疼，我希望有一个友好的 HQL 向导可以提供帮助。

我想我正在尝试做一些非常简单但无法理解的事情。

我想对一些数据进行分组和计数以将其呈现在表中，并认为我需要某种嵌套查询，但无法弄清楚如何做到这一点。

基本上我有一个表（clients），它与用作查找（clienttype）和（clientsex）的其他表有关系。关系为 1 米。我想按类型对客户进行分组，然后有一列计算男性，另一列计算女性。例如

```
Type    | males | females

type A  | x     | x

type B  | x     | x 
```

我可以做查询只是为了得到男性或女性，但不知道如何得到第二列。

希望这是有道理的，是可能的，并且有人能够提供帮助。

非常感谢，

克雷格

* * *

获取男性的查询是：

```
SELECT a.clientStatus, COUNT(c.sex)

FROM

Tblclientstatus AS a RIGHT OUTER JOIN a.tblclients AS b
LEFT OUTER JOIN b.tblsex AS c

WHERE c.sex = 'male'

GROUP BY a.clientStatus 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-11T08:38:08.377

You can have a case when to add up "1" for each sex. Something like this :

```
SELECT a.clientStatus, 
COUNT(
case when c.sex = 'male' then 1
        else 0 end
) as males,
COUNT(
case when c.sex = 'female' then 1
        else 0 end
) as females,
FROM
Tblclientstatus AS a RIGHT OUTER JOIN a.tblclients AS b
LEFT OUTER JOIN b.tblsex AS c
GROUP BY a.clientStatus 
```

# sql - 如何使用 sql server 2008 r2 将日期显示为 mm/dd/yyyy hh:mm Am/PM？

> ID：15020865
> 
> 赞同：18
> 
> 时间：2013-02-22T09:31:53.587
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005, sql-server-2008-r2

我的示例查询是

```
SELECT D30.SPGD30_LAST_TOUCH_Y
from CSPGD30_TRACKING D30 
```

我给定的日期格式就像`"2013-01-01 00:00:00.000"`. 我需要将此日期格式转换为`"mm/dd/yyyy hh:mm AM/PM"`. 你对此有什么想法吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-02-22T09:37:14.173

我认为没有单一的格式可以同时提供它们。试试这个使用`Convert`; [Sql-Demo](http://sqlfiddle.com/#!3/d41d8/9309)

```
declare @mydate datetime = getdate()
select convert(varchar(10),@mydate, 101) + right(convert(varchar(32),@mydate,100),8)

|           COLUMN_0 |
----------------------
| 02/22/2013  9:36AM | 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2016-04-19T23:18:34.233

FORMAT() 函数从 2012 版开始可用。升级后就可以使用了

```
select FORMAT(@date,'MM/dd/yyyy hh:mm:s tt') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T09:41:47.957

用这个

```
select CONVERT(VARCHAR(10), mydate, 101) + ' ' + RIGHT(CONVERT(VARCHAR, mydate, 100), 7) from tablename 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-22T09:45:13.067

试试这个

```
 SELECT convert(varchar(20), GetDate(), 0); 
```

仅提取 AM/PM

```
substring(convert(varchar(30), GetDate(), 9), 25, 2); 
```

[小提琴](http://sqlfiddle.com/#!6/189a3/1188)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-10T11:26:31.327

使用以下方案获取日期、时间、日、月、年、小时、分钟、秒、AM/PM

:)

```
SELECT UpdatedOn ,
  CONVERT(varchar,UpdatedOn,100) DateTime,
  CONVERT(varchar,UpdatedOn,10) Date ,
  CONVERT(varchar,UpdatedOn,108) Time ,
  substring(CONVERT(varchar,UpdatedOn,106),1,2) Day,
  substring(CONVERT(varchar,UpdatedOn,106),4,3) CMonth,
  substring(CONVERT(varchar,UpdatedOn,105),4,2) NMonth,
  substring(CONVERT(varchar,UpdatedOn,106),8,4) Year,
  left(right(CONVERT(varchar,UpdatedOn,100),7),2) Hours_12,
  substring(CONVERT(varchar,UpdatedOn,108),1,2) Hours_24,
  substring(CONVERT(varchar,UpdatedOn,108),4,2) Minutes,
  substring(CONVERT(varchar,UpdatedOn,108),7,2) Second,
  right(CONVERT(varchar,UpdatedOn,100),2) AM_PM 
FROM dbo.DeviceAssignSim 
WHERE AssignSimId=55; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-22T09:37:06.317

你可以这样做：

```
SELECT CONVERT(VARCHAR(10), GETDATE(), 101) AS [MM/DD/YYYY] 
```

有关更多信息，请查看：

[日期格式](http://www.sql-server-helper.com/tips/date-formats.aspx)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-22T09:38:39.410

使用该`convert`方法格式化一个`datetime`值。例子：

```
select convert(varchar(20), D30.SPGD30_LAST_TOUCH_Y, 101) 
```

第三个参数确定格式。[您可以在cast and convert 文档](http://msdn.microsoft.com/en-us/library/ms187928.aspx)中找到可用的格式。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-08-11T16:03:24.553

用这个

```
Select (Convert(Varchar,GetDate(),101))+' '+(Right(('0'+(LTrim((Left((Right((Convert(Varchar,GetDate(),100)),7)),5))))),5))+' '+(Right((Convert(Varchar,GetDate(),100)),2)) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-05-26T18:12:15.990

我意识到这是一个有 8 年历史的问题，但它以多种方式得到了回答，但没有一个是足够简单的。我发现这很简单，并且与用户要求的内容相匹配（年份是两位数，并且存在秒数），假设他得到的日期来自 GETDATE()，这并不重要，但那是我的答案来自哪里。

`SELECT CONVERT(varchar, D30.SPGD30_LAST_TOUCH_Y, 22) AS [DateTime]`

```
12/16/20 10:19:18 AM 
```

# ios - Coco2d添加UIalert或者UITextField，第一次可以正常显示，但是下一次显示不好显示两次

> ID：15020867
> 
> 赞同：1
> 
> 时间：2013-02-22T09:31:57.963
> 
> 标签：ios, uiview, cocos2d-iphone

Coco2d添加UIalert，第一次可以正常显示，但下一次显示不好显示两次，并且当我将UITextField添加到cocos2d以输入玩家信息时，当我离开这个场景时，我
确定UITextField已经释放了，但是在其他场景中这个 UITextField 仍然在屏幕上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T10:19:59.610

UIAlert 的问题？我在iOS游戏中多次使用它。工作正常

```
UIAlertView* alert= [[[UIAlertView alloc] initWithTitle: @"Not Enough Coins!"
                                                message: @"You need more Coins"
                                               delegate: nil
                                      cancelButtonTitle: @"Cancel"
                                      otherButtonTitles:@"Ok", nil] autorelease];
[alert show]; 
```

对于其他 UI 元素，在离开时释放它。

```
-(void)onExit
{
   if(mytextBox)
   {
      [mytextBox removeFromSuperview];
   }
   [super onExit];
} 
```

# java - 如何在不使用 JPA 的情况下在 Hibernate 中使用 dateCreated 和 lastUpdated？

> ID：15020871
> 
> 赞同：0
> 
> 时间：2013-02-22T09:32:12.070
> 
> 标签：java, hibernate

在早期的项目中，我使用了使用 Date和 Date的`grails`框架。它在. 我们是否只有这样的东西，以便我可以将它用于or ？`lastUpdated``dateCreated``grails``Hibernate``lastUpdated``dateCreated`

实际上我在`.NET`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T09:37:16.927

您可以使用版本，请检查 hbm 文件的语法。虽然我们更喜欢在保存对象之前使用 API 更新日期/时间。

# windows - 即使在 ssh 密钥交换之后，GitHub 仍然要求登录

> ID：15020872
> 
> 赞同：3
> 
> 时间：2013-02-22T09:32:12.150
> 
> 标签：windows, github, ssh, cygwin

我的机器设置如下：windows 7、Git for windows、Git Bash、openSSH 1.6 通过 cygwin 安装。

我按照[https://help.github.com/articles/generating-ssh-keys上的说明进行操作](https://help.github.com/articles/generating-ssh-keys)

但是每次推送东西时我仍然必须登录。

我想我的设置搞砸了......非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T10:52:08.823

为了能够使用基于密钥的身份验证（而不是 HTTP 基本身份验证），您必须使用 SSH 协议。在 Github 上，URL 如下所示：

```
git@github.com:username/repository.git 
```

使用密钥身份验证后，您可以使用常用的 SSH 工具来管理连接。这些工具之一是 SSH 代理，它会在加载后解密您的私钥一次，并在运行时将其保存在主内存中。这允许新的 SSH 会话使用此密钥，而不必用密码问题来打扰您。

您可以通过运行将私钥添加到当前 SSH 代理会话

```
ssh-add /path/to/key 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-23T09:39:04.653

如果您想删除密码并且它让您烦恼，请输入：

```
ssh-keygen -p 
```

输入旧密码，当要求输入新密码时，将其留空。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T13:42:55.093

我现在让它工作了...起初我从 cygwin 卸载了 ssh 包，因为 git for windows 附带 ssh。

就像 Holger 说的我必须将密钥添加到 ssh-agent 但从 git bash 我无法添加它。它是这样工作的：

```
eval 'ssh-agen.exe'

ssh-add ~/.ssh/id_rsa 
```

在此之后，我能够在不输入密码的情况下进行推送。剩下的唯一问题是我必须在每次系统重新启动后添加密钥......

任何想法如何解决这一问题？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-22T14:30:33.773

这些说明适用于 Windows 7 及更高版本。

1.  创建一个`.bashrc`在您的主目录中命名的文件名（因此完整的文件路径是`C:\Users\XYZ\.bashrc`您`XYZ`的 Windows 用户名
2.  在文件中添加这两行。*注意：如果不在，请更改私钥文件的位置* `~/.ssh/id_rsa`

    `eval `ssh-agent``

    `ssh-add ~/.ssh/id_rsa`

3.  打开 Git Bash 应用程序，系统会提示您输入密钥密码

# android - 我想在我的警报对话框中显示确定和取消按钮？

> ID：15020878
> 
> 赞同：12
> 
> 时间：2013-02-22T09:32:27.103
> 
> 标签：android, android-alertdialog

我想在我的警报对话框中显示确定和取消按钮。我尝试了很多解决方案但没有成功..请指导我..谢谢

```
AlertDialog.Builder builder = new AlertDialog.Builder(this);
            builder.setMessage("Check Your Internet Connection!! you are not connected to the Internet..");

            AlertDialog alert = builder.create();
                             alert.show();} 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-02-22T09:35:50.860

```
AlertDialog.Builder adb = new AlertDialog.Builder(this);
adb.setView(alertDialogView);
adb.setTitle("Title of alert dialog");
adb.setIcon(android.R.drawable.ic_dialog_alert);
adb.setPositiveButton("OK", new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int which) {
        EditText et = (EditText)alertDialogView.findViewById(R.id.EditText1);
        Toast.makeText(Tutoriel18_Android.this, et.getText(),
                Toast.LENGTH_SHORT).show();
    }
});
adb.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int which) {
        finish();
    }
});
adb.show(); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-22T09:39:26.460

以下代码将创建一个带有一个按钮的简单警报对话框。在以下代码`setTitle()`中，方法用于将标题设置为警报对话框。`setMessage()`用于将消息设置为警报对话框。`setIcon()`是将图标设置为警报对话框

```
 AlertDialog alertDialog = new AlertDialog.Builder(
                    AlertDialogActivity.this).create();

    // Setting Dialog Title
    alertDialog.setTitle("Alert Dialog");

    // Setting Dialog Message
    alertDialog.setMessage("Welcome to AndroidHive.info");

    // Setting Icon to Dialog
    alertDialog.setIcon(R.drawable.tick);

    // Setting OK Button
    alertDialog.setButton("OK", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
            // Write your code here to execute after dialog closed
            Toast.makeText(getApplicationContext(), "You clicked on OK", Toast.LENGTH_SHORT).show();
            }
    });

    // Showing Alert Message
    alertDialog.show(); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-22T09:46:51.217

```
protected final Dialog onCreateDialog(final int id) {
    Dialog dialog = null;
    switch (id) {
    case DIALOG_ID:
        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setMessage(
                "some message")
                .setCancelable(false)
                .setPositiveButton("ok",
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog,
                                    int id) {
                                //to perform on ok

                            }
                        })
                .setNegativeButton("cancel",
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog,
                                    int id) {

                                //dialog.cancel();
                            }
                        });
        AlertDialog alert = builder.create();
        dialog = alert;
        break;

    default:

    }
    return dialog;
} 
```

您可以从任何地方调用它，例如：

```
 showDialog(DIALOG_ID); 
```

# asp.net - 将 Active Directory 服务与 Silverlight 浏览器应用程序一起使用

> ID：15020880
> 
> 赞同：0
> 
> 时间：2013-02-22T09:32:31.273
> 
> 标签：asp.net, silverlight, active-directory

我正在为我的公司使用 Silverlight 制作一个 Web 应用程序。

这个应用程序的目的很简单：让每个用户在AD上管理他的信息，如地址、城市、电话、邮件......

因为我对 WPF 桌面应用程序很友好，所以我想用相同的 XAML 和 C# 来做到这一点，所以我选择使用 Silverlight 浏览器应用程序。

我已经看到我无法导入 System.DirectoryServices，所以我无法使用常见的 DirectoryEntry。

拜托，有人能准确告诉我该使用什么以及如何将 AD 与 Silverlight 应用程序一起使用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T13:23:18.860

Silverlight 只能访问完整 .NET Framework 中可用类的一小部分。此外，Silverlight 应用程序在浏览器的安全沙箱中运行。

要执行您想要的操作，您必须通过 Web 服务公开数据。

* * *

您最容易开始的地方是查看 RIA 服务。

# bash - Unix 脚本在每行末尾附加 ^M

> ID：15020883
> 
> 赞同：16
> 
> 时间：2013-02-22T09:32:35.770
> 
> 标签：bash, shell, unix

我有一个 Unix shell 脚本，它执行以下操作：

1.  创建文件的备份
2.  将一些文本附加到文件

现在在#2 中，如果我插入一个文本，^M 会附加到文件的所有行上。

例如：

```
echo " a" >> /cust/vivek.txt
echo " b" >> /cust/vivek.txt

vi vivek.txt
abc^M
bcd^M
a^M
b^M 
```

有什么办法可以避免这种情况？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-22T09:37:42.767

我不确定如何`echo`生成`^M`字符，但您可以通过在文件上运行来删除它们`dos2unix`，如下所示：

```
dos2unix /cust/vivek.txt 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-22T09:41:55.943

`^M`是回车，通常在从 Windows 复制文件时看到。采用：

```
od -xc filename 
```

这应该给出你的文件是什么样子的一个低级列表。如果您的文件不是来自 Windows，那么另一种可能性是您的终端设置没有正确翻译。检查 TERM 环境变量是否正确。

如果文件来自 Windows，则使用`dos2unix`或`sed 's/\r//' file > file.new`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-01-15T15:52:46.103

仅有的

```
sed -e "s/\r//g" file 
```

为我工作

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-22T09:36:39.737

我怀疑这可能是您的 vi 设置的产物，而不是串联。

做什么

```
cat -v -e filename 
```

显示 ？此命令将转储您的文件并标记控制字符，以便清楚文件中的*真正*内容。另请参阅[此超级用户问题/答案集](https://superuser.com/questions/39313/bash-script-appending-m-to-filename)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-22T10:32:35.343

^M 是在 Windows 中使用文件时进入文件的元字符。

dos2unix 命令可以解决这个问题。

```
dos2unix <filename> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-05-05T14:36:23.067

如果您使用的是 windows，您可以使用 notepad++ 并在将文件加载到服务器之前尝试编辑 > EOL 转换 > Unix/OSX 格式。

# ruby - Rails 确认对话框按钮

> ID：15020885
> 
> 赞同：3
> 
> 时间：2013-02-22T09:32:44.987
> 
> 标签：ruby, ruby-on-rails-3, confirm

我在rails中使用确认对话框

```
:confirm => "are you sure?" 
```

这里的默认按钮是**“取消”**和**“确定”**，而不是这个我想要“**是**”和“**否**”。还有其他方法吗？任何人都可以快速回复。在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T09:41:49.730

您可以使用自定义文本[在 Rails 中创建自定义确认对话框。](http://rors.org/demos/custom-confirm-in-rails)

# java - 在 Java 中实例化对象时究竟会发生什么？

> ID：15020886
> 
> 赞同：0
> 
> 时间：2013-02-22T09:32:55.473
> 
> 标签：java, constructor, default-constructor

我知道在创建类的对象时，构造函数会构建该对象。说我有这两个类：

```
class Vehicle {
    public int a = func();

    public int func() { 
        System.out.println("9"); 
        return 9;
    }
}

class Car extends Vehicle  {

    public static void main(String[] args) {
        Car c = new Car();
    }
} 
```

这个项目的输出是“9”。但是为什么会这样呢？调用 Car 构造函数时究竟会发生什么？我知道有某种类型的默认构造函数，但我不确定它是如何工作的。

谁能用上面的例子解释一下对象的构造？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-22T09:35:27.603

编译器提供了一个[默认构造函数](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.8.9)，`Car`它实际上是：

```
Car() {
    super();
} 
```

同样`Vehicle`作为默认构造函数：

```
Vehicle() {
    super();
} 
```

在调用超类构造函数*之后*，字段被初始化为初始化的一部分。所以就*好像*这个`Vehicle`类实际上是这样写的：

```
class Vehicle {
    public int a;

    Vehicle() {
        super();
        a = func();
    }

    public int func() { 
        System.out.println("9"); 
        return 9;
    }
} 
```

现在这有意义吗？

有关更详细的描述，请参阅[Java 语言规范的第 15.9.4 节。](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.9.4)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T09:35:00.617

当`Car constructor`被调用时，它的超级构造函数的默认调用由编译器进行，然后初始化所有`Super class's instance fields`. 在您的初始化期间，`a field`它调用`func()`具有 sysout 的方法，因此它打印 9。

```
public Car() {
super();// this invokes parent class's default cons
}

public Vehical() {
super();// invokes Object constructor then initializes all the instance variables of class vehical
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T09:39:25.233

1.  JVM 被告知`Car`必须构造 a。
2.  JVM 确定它是 a`Vehicle`并因此触发`Vehicle`构造。
3.  JVM 理解 a 的构造`Vehicle`需要初始化`int a`实例变量。
4.  必须将`int a`变量初始化为调用`func`so的结果`func`。
5.  `func`已被调用，因此代码打印出**"9"**。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-22T09:43:23.183

我想你误解了 的意思`Car c = new Car();`。

该语句创建一个对象引用，该对象的引用是`c`. 该语句`new Car();`创建一个对象，并且该对象的引用存储在`c`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-22T10:14:21.923

创建对象时，它会启动该对象中存在的所有实例变量。（如果没有给出赋值，则为其变量的默认值）。

If a default constructor of a particular class(**Car**) is called, a call to the default constructor of its super class(**Vehicle**) is made first. And while creating Vehicle object its instant variable "a" is assigned to function func() and it ll be executed, Hence printing 9.

# javascript - 获取画布中的特定位置

> ID：15020887
> 
> 赞同：1
> 
> 时间：2013-02-22T09:32:56.333
> 
> 标签：javascript, html, canvas, kineticjs

我为此使用 Kinetic.js，但我认为这不是 Kinetic 特定的。问题如下：

我在画布中加载图像，然后使用 Kinetic 旋转该图像。例如，如何获得该图像最左边的点的 x 和 y？

![在此处输入图像描述](../Images/75efb6a19416777d2060d95d915d48c1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T14:32:11.307

尝试手动进行计算：

```
 var theta = image.getRotation*Math.PI/180.;

 // Find the middle rotating point
 var midX = image.getX() + image.getWidth()/2;
 var midY = image.getY() + image.getHeight()/2;

 // Find all the corners relative to the center
 var cornersX = [image.getX()-midX, image.getX()-midX, image.getX()+image.getWidth()-midX, image.getX()+image.getWidth()-midX];
 var cornersY = [image.getY()-midY, image.getY()+image.getHeight()-midY, midY-image.getY(), image.getY()+image.getHeight()-midY];

 // Find new the minimum corner X and Y by taking the minimum of the bounding box
 var newX = 1e10;
 var newY = 1e10;
 for (var i=0; i<4; i=i+1) {
     newX = min(newX, cornersX[i]*Math.cos(theta) - cornersY[i]*Math.sin(theta) + midX);
     newY = min(newY, cornersX[i]*Math.sin(theta) + cornersY[i]*Math.cos(theta) + midY);
 }

 // new width and height
 newWidth = midX - newX;
 newHeight = midY - newY; 
```

# sql - DateAdd 将查询从 sql 转换为 oracle(sql developer)

> ID：15020889
> 
> 赞同：0
> 
> 时间：2013-02-22T09:33:05.987
> 
> 标签：sql, oracle

我正在尝试将我的 sql 查询迁移到 oracle，但由于 DateAdd 函数，我似乎无法转换我的查询。 `STRINGVARIABLE = '1361439468476'`

输出是：`Feb 20,2013`

```
convert (char(12), (dateadd(s, convert(bigint, STRINGVARIABLE) / 1000, convert(datetime, '1-1-1970 00:00:00'))), 107) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T10:34:14.137

`DATEADD`Oracle 中不存在。有多种方法可以操纵日期，但这相当简单：

```
select date '1970-01-01' + (to_number('1361439468476') / (1000*60*60*24))
from dual;

DATE'1970
---------
21-FEB-13 
```

...实际上是`21/02/2013 09:37:48`这样，所以不知道你为什么把它当成`20-FEB-13`.

如果要保持毫秒精度，可以使用 a`TIMESTAMP`代替：

```
select timestamp '1970-01-01 00:00:00'
    + numtodsinterval(to_number('1361439468476')/1000, 'SECOND')
from dual;

TIMESTAMP'1970-01-0100:00:00'+NUMTODSINTERVAL(TO_NUMBER('1361439468476')/10
---------------------------------------------------------------------------
21-FEB-13 09.37.48.476000000 
```

我不确定`107`您的查询在做什么，或者转换，也许他们正在将结果格式化为字符串？

* * *

好的，我[知道`convert(..., 107)`在做什么](http://www.mssqltips.com/sqlservertip/1145/date-and-time-conversions-using-sql-server/)；相当于：

```
select to_char(date '1970-01-01'
    + (to_number('1361439468476') / (1000*60*60*24)), 'Mon DD, YYYY') as dt
from dual;

DT
------------
Feb 21, 2013 
```

...[`to_char()`](http://docs.oracle.com/cd/E14072_01/server.112/e10592/functions198.htm)与`Mon DD, YYYY` [格式模型](http://docs.oracle.com/cd/E14072_01/server.112/e10592/sql_elements004.htm#insertedID2)一起使用。

# android - 旋转图片错误：java.lang.OutOfMemoryError

> ID：15020890
> 
> 赞同：2
> 
> 时间：2013-02-22T09:33:09.717
> 
> 标签：android, rotation

```
public Bitmap RotationPic(Bitmap tmpBitmap){
        int x = tmpBitmap.getWidth();
        int y = tmpBitmap.getHeight();
        if(x > y){

            Matrix matrix = new Matrix();
            matrix.reset();
            matrix.setRotate(90);
            return Bitmap.createBitmap(tmpBitmap,0,0, x, y,matrix, true);
        }
        return tmpBitmap;
    } 
```

语句Bitmap.createBitmap(tmpBitmap,0,0, x, y,matrix, true); 有错误。

我看了网络图片，图片大小很大，大概100k~300k。

如何解决这个问题呢？有没有其他方法可以旋转图片？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T09:45:49.593

试试这个，但你需要图片的路径才能使用它。如果你不喜欢分辨率增加 REQUIRED_SIZE 值

```
public static Bitmap DecodeFileToBitmap (String path)
{
    try 
    {       
            File f = new File(path);

            BitmapFactory.Options o = new BitmapFactory.Options();
            o.inJustDecodeBounds = true;
            BitmapFactory.decodeStream(new FileInputStream(f),null,o);

            final int REQUIRED_SIZE=500;

            int scale=1;
            while(o.outWidth/scale/2>=REQUIRED_SIZE && o.outHeight/scale/2>=REQUIRED_SIZE)
                scale*=2;

            BitmapFactory.Options o2 = new BitmapFactory.Options();
            o2.inSampleSize=scale;
            Bitmap bm = BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
            Bitmap bitmap = bm;

            ExifInterface exif = null;
            try 
            {
                exif = new ExifInterface(path);

            int orientation = exif.getAttributeInt(ExifInterface.TAG_ORIENTATION, 1);
            Matrix m = new Matrix();

            if ((orientation == 3)) 
            {
                m.postRotate(180);
                m.postScale((float) bm.getWidth(), (float) bm.getHeight());
                bitmap = Bitmap.createBitmap(bm, 0, 0, bm.getWidth(),bm.getHeight(), m, true);
                return bitmap;
            } 
            else if (orientation == 6) 
            {
                m.postRotate(90);
                bitmap = Bitmap.createBitmap(bm, 0, 0, bm.getWidth(),bm.getHeight(), m, true);
                return bitmap;
            }
            else if (orientation == 8) 
            {
                m.postRotate(270);
                bitmap = Bitmap.createBitmap(bm, 0, 0, bm.getWidth(),bm.getHeight(), m, true);
                return bitmap;
            }   

            return bitmap;
            }   

            catch(Exception ex) {}
    } 

    catch (FileNotFoundException e) {}
    return null;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T15:43:20.267

替换 Bitmap.createBitmap(tmpBitmap,0,0, x, y,matrix, true); 到 Bitmap.createBitmap(tmpBitmap,0,0, y, x,matrix, true); 当您将图像旋转 90 度时，宽度 = 高度和高度 = 宽度

# php - 搜索矩阵寻路算法

> ID：15020891
> 
> 赞同：2
> 
> 时间：2013-02-22T09:33:11.423
> 
> 标签：php, algorithm, vector, matrix

我正在用 php 开发一个棋盘游戏，现在我在编写算法时遇到了问题......

游戏板是一个多维数组（$board[10][10]），用于定义板矩阵或向量的行和列...

现在我必须遍历整个电路板，但要有一个动态的起点。例如，用户选择单元格 [5,6] 这是循环的起点。目标是找到所选单元格周围的所有可用棋盘单元格，以找到移动方法的目标单元格。我认为我需要一种高效且高效的方法来做到这一点。有谁知道循环遍历矩阵/向量的算法，只有每个字段才能找到可用和使用的单元格？

额外规则...在所附图片中选择了一个蓝色字段（比另一个大一点）。可用字段仅在右侧。左侧可用，但无法从当前选择的位置到达……我认为这是一个额外的信息，它使算法有点复杂……

到目前为止，谢谢！

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T09:53:09.020

不完全确定我的要求是正确的，所以让我重申一下：

您想要一个高效的算法来遍历 nxn 矩阵的所有元素，其中 n 大约为 10，它从给定元素 (i,j) 开始并按与 (i,j) 的距离排序！？

我会循环通过距离变量 d 从 0 到 n/2 然后对于 d 的每个值循环 l 到 -(2*d) 到 +(2*d)-1 选择单元格 (i+d, j +l)，如果 i>=0 还为每个单元格选择 (i+l,jd),(i+l, j+d)，您必须应用模 n，将负索引映射回矩阵。

这认为矩阵基本上是一个圆环，将上下边缘以及左右边缘粘合在一起。

如果你不喜欢这样，你可以让 d 运行到 n ，而不是模运算，只是忽略矩阵之外的值。

These aproaches give you the fields directly in the correct order. For small fields I do doubt any kind of optimization on this level has much of an effect in most situations, Nicholas approach might be just as good.

**Update** I slightly modified the cells to pick in order to honor the rule 'only consider fields that are right from the current column or on the same column'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T09:39:52.950

如果您的地图只有 10x10，我会从 [0][0] 循环，收集玩家移动的所有可能空间，然后按与当前玩家位置的距离对空间进行分级。N 很小，因此算法具有 O(N^2) 的事实不会对您的性能产​​生太大影响。

也许在算法方面有更多背景的人有一些东西。

# c# - 与 ASP.net 中的 UserControl 相关的问题

> ID：15020892
> 
> 赞同：0
> 
> 时间：2013-02-22T09:33:17.947
> 
> 标签：c#, asp.net, user-controls

我有一个 asp.net web 应用程序，我在母版页下有一个 aspx 页面。我有两个 UserControl：(1) UC1 (2) UC2。UC1添加在母版页设计中，UC2添加在aspx页面设计中。

现在我在 UC1 上有一些复选框，将 AutoPostback 属性设置为 True。在 Checked_Change 事件中，我在 Session 中添加了一些值。然后我想调用 UC2 userControl 内部的函数

但问题是当复选框checkedchanges UC2'代码首先执行然后UC1的代码执行..所以在UC2的代码中没有找到UC1的代码中添加的任何会话值

那么如何更改 UserControls 的代码执行顺序？？？

有没有办法通过 UC1 找到 MasterPage 的子页面？？？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T10:35:44.353

是的，这不是控件之间通信的好方法，使用会话也不是一个好习惯。但是，您可以做的是这样的：

在母版页上，使用`ContentPlaceHolder`尝试查找`UC2`，您需要其 ID 才能使用`FindControl`方法：

```
Control ctrl = ContentPlaceHolder.FindControl("UC2_ID");

if (ctrl != null && ctrl is UC2)
{
    UC2 uc2 = (UC2)ctrl;

    uc2.TakeThisStuff(stuff);
} 
```

或者，如果您真的不知道它的 ID，您可以遍历`ContentPlaceHolder`控件，直到找到类型为 UC2 的控件。

```
public T FindControl<T>(Control parent) where T : Control
{
    foreach (Control c in parent.Controls)
    {
        if (c is T)
        {
            return (T)c;
        }
        else if (c.Controls.Count > 0)
        {
            Control child = FindControl<T>(c);
            if (child != null)
                return (T)child;
        }
    }

    return null;
} 
```

像这样使用它：

```
UC2 ctrl = FindControl<UC2>(ContentPlaceHolder);

if (ctrl != null)
{
    UC2 uc2 = (UC2)ctrl;

    uc2.TakeThisStuff(stuff);
} 
```

# python - Python int-byte 高效数据结构

> ID：15020895
> 
> 赞同：1
> 
> 时间：2013-02-22T09:33:26.360
> 
> 标签：python, data-structures

我目前正在存储 int-int 类型的键值。为了快速访问，我目前正在使用存储在内存中的 BTrees.IIBTree 结构。它根本不存储在磁盘上，因为我们需要最新的数据。

但是，当前的解决方案几乎不适合内存，因此我正在寻找在访问时间方面更高效的数据库或数据结构。如果它被存储在内存中，它还需要在内存空间方面是有效的。

一个想法是将 BTrees.IIBTree 结构替换为用 C 编写的 int-byte 哈希作为 Python 的扩展，但如果机器发生故障，数据仍然会丢失（在我们的例子中这不是一件可怕的事情）。

你有什么建议？

# mongoose - Mongoose：所有保存和更新方法的中间件

> ID：15020897
> 
> 赞同：2
> 
> 时间：2013-02-22T09:33:33.873
> 
> 标签：mongoose

我一直在使用猫鼬以下 API 编写一个 CRUD 应用程序：

*   创造：`save()`
*   更新：`findByIdAndUpdate()`

我希望这两种方法都有一个中间件。我试过`pre('save', ...)` `pre('validate', ...)`了，但他们只为创建路线开火。

是否还有其他适用于两者的方法，或者我是否需要重构更新路由以使用 save() API？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T14:16:55.803

`'save'`中间件仅在调用时触发，而`save`不是在任何更新调用时触发。没有为更新触发的中间件，因为这些更新被直接发送给驱动程序，因此它们是原子的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-09T21:06:51.633

您可以做的是将您的模型包装在一些扩展的服务中`events.EventEmitter`，然后使用该服务对您的模型执行更新，在`emit`发生这种情况时让它发生一个事件，然后所有对响应这些更新感兴趣的函数都可以注册到它。

除此之外，目前还没有其他方法可以在数据库调用执行时调用中间件。

作为一个例子，你可以有类似的东西：

```
function FooService() {
    var self = this
    var Foo = require('./path/to/foo/module')    

    this.edit = function(id, changes) {
         Foo.findByIdAndUpdate(id, changes, function(err) {
              if (!err) {
                  self.emit('FooUpdated', id)
              }
         })
    }
}

util.inherits(FooService, events.EventEmitter)
module.exports = new FooService() 
```

这样，如果有人有兴趣知道何时`foo`更新，他们只需请求该服务并执行以下操作：`FooService.on('FooUpdated', function(id){...})`

如果您需要更新引用或非规范化，这很有效，您可以确保无论您做什么使用该服务，您总是会触发一个事件并且 Foo 不需要知道需要通知多少其他服务.

# trie - 有没有办法以内存友好的方式迭代 Bio.trie ？

> ID：15020899
> 
> 赞同：1
> 
> 时间：2013-02-22T09:33:38.197
> 
> 标签：trie, biopython

我想使用 Bio.trie 作为序列的索引来计算每个序列在数据集中出现的次数。索引是这样创建的：

```
seqs = trie()
for seq in dataset:
    if seqs.has_key(seq):
        seqs[seq] += 1
    else:
        seqs[seq] = 1 
```

之后，我想从特里提取一些信息，例如只计算过一次的序列列表。可以这样做：

```
singletons = []
for seq in seqs.keys():
    if seqs[seq] == 1:
        singletons.append(seq) 
```

问题是我正在使用的机器内存不足，调用 trie.keys() 返回一个列表对象，该对象大致与 trie 本身一样大。是否可以使用生成器而不是列表来迭代键，以便一次只能获得一个键？

# iphone - 验证可用的网络连接和启用位置服务以使用应用程序

> ID：15020904
> 
> 赞同：0
> 
> 时间：2013-02-22T09:33:58.680
> 
> 标签：iphone, ios, objective-c, xcode

我有一个应用程序，它依赖于网络连接和位置服务才能使用。启动应用程序后，我想检查用户是否具有这两种能力

*   网络连接可用
*   已启用定位服务

我将如何编写脚本，以便如果用户的设备不满足这两个标准，则阻止用户继续并显示他们必须有这两个事情才能继续的警报。

我会假设这在应用程序委托中的某个地方。任何建议都会很棒！谢谢你们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T09:44:09.313

对于定位服务，您可以查看

```
[CLLocationManager locationServicesEnabled] 
```

返回 BOOL 值

对于互联网可达性，您可以使用苹果提供的可达性类 [http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)

使用这样的代码

```
Reachability *networkReachability = [Reachability reachabilityForInternetConnection];   
NetworkStatus networkStatus = [networkReachability currentReachabilityStatus];    
if (networkStatus == NotReachable) {        
    NSLog(@"There IS NO internet connection");        
} else {        
    NSLog(@"There IS internet connection");        
    }        
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T09:38:39.970

`CLLocationManager`提供类方法来确定位置服务的可用性，如下所示：

```
+ (BOOL)locationServicesEnabled

+ (CLAuthorizationStatus)authorizationStatus 
```

要检查互联网连接，请使用 Apple 的示例[代码](http://developer.apple.com/iphone/library/samplecode/Reachability/index.html)。在那之后检查

```
if ([CLLocationManager locationServicesEnabled] && isInternetAvailable)
{
     //Do your code
}
else
{
    //Alert to show that location manager is disabled or internet is not avaiable.
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T09:48:33.890

你可以试试这个位置服务：

```
@property (nonatomic, readonly) CLAuthorizationStatus locationStatus 
```

实现 CLLocationManagerDelegate 方法并跟踪当前位置授权状态

```
- (void)locationManager:(CLLocationManager *)manager didChangeAuthorizationStatus:(CLAuthorizationStatus)status {
    self.locationStatus = status;
}

if (self.myManager.locationStatus == kCLAuthorizationStatusAuthorized) 
```

据我所知，`[CLLocationManager locationServicesEnabled]`没有提供所需的信息。

并使用 Reachability 来检查连接（不确定如何找到它，它是 ASIHTTPRequest 的一部分）

```
[Reachability reachabilityForInternetConnection] isReachable]
[Reachability reachabilityForLocalWiFi] isReachable] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T10:06:20.267

我希望这能帮到您..

要检查可用的网络连接：打开[此 Apple 文档](https://developer.apple.com/library/ios/#samplecode/Reachability/index.html)链接。

要检查已启用位置服务：打开[此](https://github.com/HeshamMegid/HMDiallingCode)链接

# asp.net - 在htm模板中标记href到网站页面

> ID：15020907
> 
> 赞同：0
> 
> 时间：2013-02-22T09:34:06.167
> 
> 标签：asp.net

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T14:44:44.457

无论位置如何，这都行不通吗？

```
<a href="<%=Page.ResolveUrl("~/Account/ChangePassword.aspx") %>">Change Password</a> 
```

# javascript - 日期格式 - 逻辑错误

> ID：15020908
> 
> 赞同：0
> 
> 时间：2013-02-22T09:34:07.533
> 
> 标签：javascript, jquery

我有一个日期保存到`var mydate`. 当我打印时，我得到的字符串相当于`Tue Feb 10 2009 00:00:00 GMT-0800 (Pacific Standard Time)`.

现在我需要格式化，`var mydate`以便将日期显示为`Tue Feb 10 2009`.

编码;

```
var today = $(this).datepicker('getDate');
                var mydate = new Date(today.getFullYear(), today.getMonth(), today.getDate() - today.getDay()); 
```

当我显示`my date`时，我得到了相当于`Tue Feb 10 2009 00:00:00 GMT-0800 (Pacific Standard Time)`. 但我想要的是这个`Tue Feb 10 2009`。我怎样才能通过格式化来做到这一点`var my date`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T09:41:04.693

实现此目的的一种方法是创建自定义日期（通过创建一个名为`myDate`扩展 Date 的新类）并覆盖该`.toString()`方法。它以您想要的格式返回信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T09:46:54.053

你试过`myDate.toDateString()`吗？

这是一个例子：

```
> new Date().toDateString()
"Fri Feb 22 2013" 
```

也看看[moment.js](http://momentjs.com/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T09:47:09.767

根据您的代码，我假设您正在使用来自[http://www.kelvinluck.com](http://www.kelvinluck.com)的 jQuery 日期选择器。

假设您是，并且您正在使用随包提供的 Date 类，您可以执行以下操作：

```
 //Date.format = 'dd/mm/yyyy';
    Date.format = 'D M dd yyyy';
    //Tue Feb 10 2009
    $('.date-picker').datePicker({
        startDate:'01/01/2001'
        //other options here..
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T09:49:42.973

有很好的简单库可以轻松格式化日期。你可以试试这个： http: [//www.mattkruse.com/javascript/date/](http://www.mattkruse.com/javascript/date/)

# python - python lxml与py2exe

> ID：15020911
> 
> 赞同：3
> 
> 时间：2013-02-22T09:34:12.760
> 
> 标签：python, xml-parsing, lxml, py2exe

我已经用 dom 生成了一个 XML，我想使用 lxml 来漂亮地打印 xml。

这是我用于漂亮打印 xml 的代码

```
def prettify_xml(xml_str):

   import lxml.etree as etree
   root = etree.fromstring(xml_str)
   xml_str =  etree.tostring(root, pretty_print=True)

   return xml_str 
```

我的输出应该是一个 xml 格式的字符串。

我从 stactoverflow 的一些帖子中得到了这段代码。当我编译机智 python 本身时，这可以完美地工作。但是当我将我的项目转换为从 py2exe 创建的二进制文件时（我的二进制文件是带有命名管道的 Windows 服务）。我遇到了两个问题：

1.  我的服务没有启动，我通过在 py2exe 函数中添加选项解决了这个`lxml.etree`问题`includes`。然后我的服务正常启动。

2.  当在这里调用 xml 生成时，是我在日志中看到的错误 `'module' object has no attribute 'fromstring'`

我在哪里纠正这个错误？我的第一个问题的解决方案是否正确？

我的 xml 生成代码：

```
from xml.etree import ElementTree
from xml.dom import minidom
from xml.etree.ElementTree import Element, SubElement, tostring, XML 
import lxml.etree 

    def prettify_xml(xml_str):

      root = lxml.etree.fromstring(xml_str)
      xml_str =  lxml.etree.tostring(root, pretty_print=True)

      return xml_str

   def dll_xml(status):
    try:
        xml_declaration = '<?xml version="1.0" standalone="no" ?>'

        rootTagName='response'
        root = Element(rootTagName)
        root.set('id' , 'rp001')

        parent = SubElement(root, 'command', opcode ='-ac')

        # Create children
        chdtag1Name = 'mode'
        chdtag1Value = 'repreport'

        chdtag2Name='status'
        chdtag2Value = status

        fullchildtag1 = ''+chdtag1Name+' value = "'+chdtag1Value+'"'
        fullchildtag2=''+chdtag2Name+' value="'+chdtag2Value+'"'

        children = XML('''<root><'''+fullchildtag1+''' /><'''+fullchildtag2+'''/></root> ''')

        # Add parent
        parent.extend(children)
        dll_xml_doc = xml_declaration + tostring(root)

        dll_xml_doc = prettify_xml(dll_xml_doc)

        return dll_xml_doc

    except Exception , error:
       log.error("xml_generation_failed : %s" % error) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T08:29:31.117

尝试使用[PyInstaller](http://www.pyinstaller.org/)而不是 py2exe。我只是通过运行将您的程序转换为二进制 .exe 没有问题`python pyinstaller.py YourPath\xml_a.py`。

# mysql - 如何在单个过程中编写多个选择查询？

> ID：15020917
> 
> 赞同：1
> 
> 时间：2013-02-22T09:34:36.217
> 
> 标签：mysql, sql, stored-procedures, phpmyadmin

我必须将表格设置为：table1：

```
UID | COLLEGE_NAME | COLLEGE_ADDRESS
------------------------------------ 
```

表2：

```
UID | COMPANY_NAME | COMPANY_ADDRESS
------------------------------------ 
```

我有 2 个查询：

```
select * from table1 where uid='$uid';   
select * from table2 where uid='$uid'; 
```

我想在一个过程中编写这两个查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T11:19:53.663

单个过程中多个选择查询的结构：

> `CREATE PROCEDURE`样本（l_uid INT）`BEGIN`
> 
> `SELECT`* `FROM`College_edu `WHERE`uid=l_uid;
> 
> `SELECT`* `FROM`work_experience `WHERE`uid=l_id;
> 
> `END`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T09:37:27.553

这是要创建的语句`STORED PROCEDURE`。

```
DELIMITER $$
CREATE PROCEDURE procedureName(IN _uid VARCHAR(15))
BEGIN
    SELECT UID, COLLEGE_NAME name, COLLEGE_ADDRESS address
    FROM    table1
    WHERE uid = _uid
    UNION ALL
    SELECT UID, COMPANY_NAME name, COMPANY_ADDRESS address
    FROM    table2
    WHERE uid = _uid
END $$
DELIMITER ; 
```

请注意上面`UNION`有`ALL`关键字以在结果列表中添加重复记录。但如果您愿意`UNIQUE`，请删除 上的`ALL`关键字`UNION`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T09:40:39.763

下面的代码可能会为您服务。此外，额外的 tbl 列将让您知道您的数据来自哪个表，这将有助于进一步操作。

```
 SELECT UID, COLLEGE_NAME name, COLLEGE_ADDRESS address , 1 as tbl
    FROM    table1
    WHERE uid = _uid
    UNION ALL
    SELECT UID, COMPANY_NAME name, COMPANY_ADDRESS address , 2 as tbl
    FROM    table2
    WHERE uid = _uid 
```

# javascript - 防止爬虫跟踪 javascripts 中的链接

> ID：15020919
> 
> 赞同：0
> 
> 时间：2013-02-22T09:34:39.727
> 
> 标签：javascript, jquery, web-crawler

为了支持远程 jQuery 模板，我在 javascripts 中出现了一些链接。喜欢：

```
<script type="text/javascript">
var catalog = {};
catalog['key1'] = 'somepath/template_1.html';
catalog['key2'] = 'anotherpath/template_2.html';
//and so on
</script> 
```

现在，爬虫正试图追踪这些链接。如何防止这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:19:25.030

首先也是最重要的：哪些爬虫试图访问这些路径？它们是流行的（例如 Google Bot、Bing Bot、Yahoo! Slurp）还是其他一些机器人？最好的办法是确定哪些爬虫是“违规者”，然后尝试找出他们为什么要关注这些链接。如果不做一堆假设，很难告诉你如何防止这种情况发生。

## 继续阅读以了解可以做出多少假设：

假设有两种类型的爬虫：

1.  聪明的：他们不会在 JavaScript 中查找 URL，因为它的效率非常低，并且可能会导致毫无意义地尝试抓取完全无意义的内容（例如`http://link.to.other/javascript/stuff.js`）。但是，这些爬虫可能正在执行 JavaScript。
2.  愚蠢的：他们可能会获取 HTML 内容并应用正则表达式来提取所有 URL。大多数情况下，此类爬虫很可能甚至不会执行您的 JavaScript。

在爬虫中拥有 JavaScript 执行能力是相当复杂的，所以我只认为很少有爬虫有这样的能力，如果他们有，那么它们就是专业级的爬虫。如果他们是专业级爬虫，那么您可能会期望他们很可能支持 robots.txt 以及锚元素`rel`属性的“nofollow”之类的东西：

```
<a href="http://www.example.com/" rel="nofollow">Link text</a> 
```

我会将这些存储在“智能”爬虫组中。大多数流行的机器人都很聪明，而且它们也很有礼貌，所以你不必太担心它们。

JavaScript 是否会修改文档，然后生成某种超链接？如果是，那么智能爬虫可以获取链接，但愚蠢的爬虫将无法获取链接，因为它们执行 JavaScript 的可能性要小得多。

那你能做什么呢？好吧，对于智能爬虫，您应该应用所有标准的礼貌政策：robots.txt、“nofollow”等。大多数情况下，这应该足以阻止它们爬取这些链接。无论如何，您都想对他们好，因为他们可能对您的网站有帮助（即他们会根据您的内容为网站增加流量）。

对于愚蠢的爬虫，您可能需要测试几种不同的解决方案：混淆 URL 或[采用几种策略之一来检测它们](https://stackoverflow.com/questions/8404775/how-to-identify-web-crawler)。一旦检测到它们，您就可以做各种事情，有些很好，有些不太好:)。

**同样，您可以看到，如果没有更多信息，我们必须做出很多假设。因此，您应该向我们提供更多信息，或者至少尝试自己分析信息并牢记上述问题/想法。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T10:08:15.570

让它看起来不像链接

```
var catalog = {
  'key1': {'path':'somepath',   'page':'template_1.html'},
  'key2': {'path':'anotherpath','page':'template_2.html'}
}
//and so on 
```

# android - 在 IntentService 中等待结果

> ID：15020920
> 
> 赞同：0
> 
> 时间：2013-02-22T09:34:43.147
> 
> 标签：android, android-intent, intentservice

使用 IntentService 时有没有办法等待结果？

设想。

服务应用程序正在运行——>从另一个应用程序接收登录凭据——>服务应用程序然后检查数据库（由于某种原因，我总是连接超时。我知道这很糟糕，但对于 POC 和快速破解来说，这现在就可以了) --> 等待验证查询然后结果。

这可能吗？

我尝试在服务中使用 AsynTask 但仍然无济于事，我总是收到连接超时错误。

演示服务

```
@Override
public IBinder onBind(Intent intent) {

    return new IDemoService.Stub() {

        @Override
        /**
         * Login validation implementation
         */
        public boolean login(String id, String password)
                throws RemoteException {
            UserLoginTask userLoginTask = new UserLoginTask(id, password);
            try {
                return userLoginTask.execute((Void) null).get();
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (ExecutionException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            return false;
        }
    };
} 
```

用户登录任务

```
 private class UserLoginTask extends AsyncTask<Void, Void, Boolean> {
    private String uId;
    private String uPassword;

    public UserLoginTask(String id, String password) {
        uId = id;
        uPassword = password;
    }

    @Override
    protected Boolean doInBackground(Void... arg0) {
        Connection conn;
        try {
            int count = 0;
            Class.forName("org.postgresql.Driver");
            String url = "jdbc:postgresql://xxx.xxx.x.xxx/test_db?user=postgres&password=password";
            conn = DriverManager.getConnection(url);
            if (conn != null) {
                Statement st = conn.createStatement();
                String sql = "Select count(*) as cnt from tbl_persons where id = '"
                        + uId.toUpperCase(Locale.getDefault()).trim()
                        + "' AND pwd='" + uPassword.trim() + "';";

                Log.d("DemoService", "Login sql - " + sql);
                ResultSet rs = st.executeQuery(sql);
                while (rs.next()) {
                    count = rs.getInt("cnt");
                }

                rs.close();
                st.close();
                conn.close();

                if (count == 0)
                    return false;

                return true;
            }
        } catch (SQLException e) {
            e.printStackTrace();
        } catch (Exception e) {
            e.printStackTrace();
        }

        return false;
    }

} 
```

# javascript - nodeJS中NODE_ENV调用时如何使用数据库环境

> ID：15020921
> 
> 赞同：0
> 
> 时间：2013-02-22T09:34:42.923
> 
> 标签：javascript, node.js, mongodb, database

嗨，我是 nodejs 环境的新手。

我正在使用 nodeJs + Compoundjs。

我正在开发三个数据库环境。生产和测试。我在运行 NODE_ENV=production 节点时的问题。命令、所有 url、端口号和其他东西都应该从 production.js 中获取。当我通过给出命令 NODE_ENV=development node 来转移节点环境时。所有需要运行的东西都应该来自 development.js。

对此的任何注释对我也有帮助。

如果有人有任何想法，请与我分享。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T09:41:27.957

您必须设置环境，然后您可以配置您的应用程序，如：

（这是一个猫鼬数据库和快递，但你可以找到类似的配置。）

只需设置三个环境配置

```
app.configure('development', function () {
  mongoose.connect(devConfig.db.path, function onMongooseError(err) {
  });
});

app.configure('production', function () {
  mongoose.connect(proConfig.db.path, function onMongooseError(err) {
  });
}); 
```

一个配置示例（config.js）：

```
var config = {};

// Database (MongoDB) configurations
config.db = {
path : 'mongodb://localhost/sampleDatabase'
};

module.exports = config; 
```

我需要这个文件在我`app.js`的 by`var config = require('config')`

您也可以在配置文件中进行环境检测。

# asp.net - 使用 Unicode 报告

> ID：15020934
> 
> 赞同：1
> 
> 时间：2013-02-22T09:35:13.183
> 
> 标签：asp.net, reporting

首先，我为我的英语道歉。

我正在使用 .NET Frame work 3.5 和 Sql Server 2008 开发一个 asp.net 应用程序。我正在使用 RDLC 进行报告。我必须用 'Hindi 生成报告，所以我必须使用 Unicode。

**在运行应用程序并在浏览器中获取报告时：**

在 aspx 页面中，无论我为它设置了什么字体，它都会正确显示所有 Unicode 字符。如果字体是“Times New Roman”或“Arial Unicode MS”，则输出是相同且正确的（在浏览器中）。但是将其导出为 PDF 取决于我为它设置的字体。当我设置 Font Times New Roman 时，它会显示类似 ???????? 而不是 Unicode 字符，当我将字体设置为 Arial Unicode MS 时，它可以工作，但仍然存在一些字符少的问题。

1.  由于我们的 Windows 系统中预装了许多字体（如 Arial、Times New Roman 等），是否有专门针对 Unicode 的单独字体集？

2.  如果 Unicode 有一组单独的字体，那么系统上预装了什么字体？（我应该在我的 Web 应用程序中使用哪种字体，它应该在所有系统上正确显示，用户必须不需要安装任何类型的字体来查看他们机器上的报告）。

3.  如果没有单独的 Unicode 字体集（因为无论我选择什么字体，它都能正确显示 aspx 页面中的所有 Unicode 字符）那么将报告导出到 pdf 有什么问题？

**最后可能是我对 uincode 和报告有一些误解/错误代码，那么我应该怎么做才能生成可以使用 Unicode 转换为 pdf 的报告？（我需要格式为 aspx 和 pdf 的报告）。或者我应该使用其他一些工具进行报告。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-31T13:17:00.343

为所有目的使用**Arial Unicode MS Bold**。这个对我有用。Arial Unicode Normal 给出了一些问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T15:35:49.047

据此：[https](https://stackoverflow.com/a/163029/1828416) : //stackoverflow.com/a/163029/1828416，您很可能需要在 PDF 文件中嵌入字体或字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T10:03:50.893

因为在客户端你必须安装那个印地语字体..

# magento - Magento - 将扩展从左/右列移动到主列

> ID：15020937
> 
> 赞同：2
> 
> 时间：2013-02-22T09:35:24.657
> 
> 标签：magento

我尝试将 ext:`Customers who bought this product also purchased`从默认的左/右列移动到产品下的主列，但我不知道该怎么做。

我尝试将行更改`<product_detail_leftposition translate="label">`为`<product_page translate="label">`in `system.xml`file 但没有帮助。

有什么建议么？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T10:36:25.703

您可以通过将其添加到布局 XML 中的产品视图页面部分来执行此操作。在内容引用块内添加块，在底部的某处。

确保它位于手柄内部，因为它定义了产品视图页面上使用的结构。

应用程序/设计/前端/[命名空间]/[主题名]/layout/catalog.xml

```
<catalog_product_view translate="label">
   ...
    <reference name="content">
       ...
        <block type="catalog/product_view" name="product.info" template="catalog/product/view.phtml">
            <!-- Other blocks etc here.. add at the bottom -->
            <block type="module/block" name="yourblock" as="yourblock"  />
        </block>
    </reference>
 </catalog_product_view> 
```

如果您在此处添加它，这应该会自动为您输出块，尽管这取决于您使用的主题。

如果它没有自动显示，您可能需要在视图中添加一行以显示该块：

app/design/frontend/[命名空间]/[主题名]/template/catalog/product/view.phtml

```
<?php // use the block name used in the XML config.. ?>
<?php echo $this->getChildHtml('yourblock') ?> 
```

# android - 用 android 解锁 mifare 标签

> ID：15020940
> 
> 赞同：11
> 
> 时间：2013-02-22T09:35:31.187
> 
> 标签：android, nfc, mifare

我正在寻找一种将解锁序列从 Android 手机发送到中国制造商的 Mifare 标签的方法，该标签制作具有可写块 0 的标签。

我一直在尝试连接 + 收发方法，发送 50 00 + 40 + 43 字节序列。但这行不通。

我已经尝试过私有收发功能（绕过错误检查），但这也不起作用。我收到来自 nfc 服务的错​​误。

有没有人成功发送解锁序列来解锁block0？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T16:47:01.153

这在 Android 设备上是不可能的。中文 MIFARE 克隆的专有命令是 7 位长，不是一个完整的字节。Android 设备中的 NFC 实现（具有专有接口的旧设备和符合 NFC 论坛 NCI 的新设备）适用于完整字节的有效负载缓冲区。

# regex - 如何通过 htaccess 删除 /ver/XXX

> ID：15020941
> 
> 赞同：0
> 
> 时间：2013-02-22T09:35:32.223
> 
> 标签：regex, apache, .htaccess

请帮助为 htaccess 编写 htaccess 规则以将 url [http://mysite.com/some/some/ver/XXX](http://mysite.com/some/some/ver/XXX)更改 为 [http://mysite.com/some/some/](http://mysite.com/some/some/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T09:45:57.197

这应该适合你。它捕获前两个`some`'，并修剪掉`ver`'。

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([a-zA-Z0-9-_]+)/([a-zA-Z0-9-_]+)/ver/([0-9]+) $1/$2 [R=301,L] 
```

**注意：**请参阅有关提问的常见问题解答[。](https://stackoverflow.com/faq#questions)（“你应该只根据*你面临的实际问题*提出实际的、可回答的问题。”）

# security - 中等信任度的共享主机中的果园

> ID：15020942
> 
> 赞同：1
> 
> 时间：2013-02-22T09:35:33.920
> 
> 标签：security, hosting, orchardcms, medium-trust

我已经在一个中等信任的共享主机上安装了我们基于 Orchard 1.2.41 的网站。

该网站无法运行，抱怨臭名昭著的错误：

`Exception Details: System.Security.SecurityException: That assembly does not allow partially trusted callers.`

 `Source Error:

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.`  `我试图添加

`< trust level="Full" originUrl="" />`

 `但无济于事。Web 服务器告诉我 web.config 无效。可能中等信任被主机锁定。

我在网上读到 orchard 是为在中等信任环境下工作而编写的，只是性能有所下降。现在，我只想让我的公司网站启动并运行。

任何线索？谢谢你，格雷西。米。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T19:56:04.483

最新版本不支持中等信任（并且不会这样做）。中等信任会破坏很多东西，使代码更难维护/开发，并且通常是一种痛苦。

您最好的选择是更改您当前的主机。如果他们没有给你完全的信任，你应该尽快离开那里——所有主要的主机商现在都这样做了。这是唯一面向未来的解决方案。否则你会经常遇到一些问题。``

# c - 在 C 中以最短的字符数重复并打印一个字符

> ID：15020946
> 
> 赞同：5
> 
> 时间：2013-02-22T09:35:48.663
> 
> 标签：c

目前，我正在尝试以尽可能少的字符重复单个字符。例如，我实际上是在使用类似的东西来重复一系列空格：

```
printf("%*s",i,""); 
```

我想知道在 C 中是否有类似的，甚至更短/不同的方式来重复字符串并将其打印出来，就像空格一样。

如果可能的话，我想要类似的东西：

```
printf("%*s",i,"_"); 
```

但是，据我所知，这是不可能的，无论它对我来说多么理想。

为了澄清，在这些示例中，参数 i 表示我希望字符重复的次数，即第二个示例应输出（如果我说，12）：

```
____________ 
```

**注意：**它不一定必须是与 printf 相关的任何内容，但是，它必须很短。

本质上，我想重复一个字符指定的次数，然后输出它。

编辑：我目前正在使用允许我 31 个字符的 for 循环，但是通过使用与上述类似的方法，由于程序的结构方式，我可以在此之上减少另外 7 个字符。所以循环并不是很理想。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T09:42:42.677

您可以使用`memset`：

```
void * memset ( void * ptr, int value, size_t num );
// Fill block of memory
// Sets the first num bytes of the block of memory pointed by ptr to the specified value
// (interpreted as an unsigned char). 
```

所以你会这样做，假设`dest`你的目标字符串是：

```
memset(dest, '_', 12); 
```

编辑：这是一个非常“原始”的解决方案。它不会在字符串末尾放置 '\0'，因此如果您希望字符串仅包含重复字符并以标准方式格式化，您也必须处理它。您当然必须处理 12 也可能比分配给 的空间大的事实`dest`。

最后一件事：使用`memset`可能比使用自己的循环可以做的任何事情都更有效，因为`memset`可以通过编译器以非常有效的方式实现（即高度优化的汇编代码）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T12:47:25.093

如果您不需要`i`事后的值，则：

```
for(;i--;printf("x")); 
```

或者

```
while(i--)printf("x"); 
```

在 22 个字符内完成。如果你`i`之后确实需要，并且你有一个备用变量`j`，我发现最短的 using-a-loop 使用 25 个字符：

```
for(j=i;j--;printf("x")); 
```

使用函数我能做的最好的事情是函数 28 个字符 + 每次调用 5 个字符：

```
r(x){x&&printf("x")&r(--x);}
int main()
{
     int i=12;
     r(i);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T09:47:06.693

如果你对一个特定的字符感兴趣，那就是超级肮脏的把戏

```
#include <stdio.h>

const char *very_long_single_char_string = "___________________________________";

int main()
{
    int i = 4;

    printf("%.*s",i, very_long_single_char_string);

} 
```

结果：

```
____ 
```

# php - 变量访问 - 通过 PHP 的 MySQL 不起作用

> ID：15020947
> 
> 赞同：2
> 
> 时间：2013-02-22T09:35:49.040
> 
> 标签：php, mysql, objective-c

我正在尝试将变量添加到 MySQL 中。列槽是 INT 类型，B1 -> B12 是 VARCHAR(20) 类型。

$slot1 到 $slot4 是一个字符串。（例如：4PMTo6PM）。当我将硬编码数据添加到查询中时，数据库连接并且一切正常。然而

但是，当我使用 NSURL 传递它时，我似乎没有插入数据。任何帮助，将不胜感激。

```
 <?php
    $DB_hostname = "localhost";
    $DB_Name = "root";
    $DB_pass = "pwd";

    if(isset($_GET["tabName"])){
      $tableName = $_GET["tabName"];
      $slot1 = $_GET["slot1Timing"];
      $slot2 = $_GET["slot2Timing"];
      $slot3 = $_GET["slot3Timing"];
      $slot4 = $_GET["slot4Timing"]; 
     }

     $con = mysql_connect($DB_Hostname,$DB_Name,$DB_pass) or die(mysql_error());

     mysql_select_db("booking", $con);

      mysql_query("INSERT INTO $tableName (Slot,B1,B2,B3,B4,B5,B6,B7,B8,B9,B10,B11,B12)VALUES   
             ('1',$slot1,$slot1,$slot1,$slot1,$slot1,$slot1,$slot1,$slot1,$slot1,$slot1,$slot1,$slot1)");

      mysql_query("INSERT INTO $tableName (Slot,B1, B2,B3,B4,B5,B6,B7,B8,B9,B10,B11,B12)
             VALUES ('2',$slot2,$slot2,$slot2,$slot2,$slot2,$slot2,$slot2,$slot2,$slot2,$slot2,$slot2,$slot2)");

      mysql_query("INSERT INTO $tableName (Slot,B1, B2,B3,B4,B5,B6,B7,B8,B9,B10,B11,B12)
      VALUES ('3',$slot3,$slot3,$slot3,$slot3,$slot3,$slot3,$slot3,$slot3,$slot3,$slot3,$slot3,$slot3)");

      mysql_query("INSERT INTO $tableName (Slot,B1, B2,B3,B4,B5,B6,B7,B8,B9,B10,B11,B12)
       VALUES ('4',$slot4,$slot4,$slot4,$slot4,$slot4,$slot4,$slot4,$slot4,$slot4,$slot4,$slot4,$slot4)");

   mysql_close($con);
   ?> 
```

***样本数据***（工作）

```
mysql_query("INSERT INTO $tableName (Slot,B1,B2,B3,B4,B5,B6,B7,B8,B9,B10,B11,B12)VALUES   
('1','1','1','1','1','1','1','1','1','1','1','1','1',)"); 
```

**NSURL 连接**

```
 @"http://ip/booking/insertSlotsTable.php?tabName=%@&slot1Timing=%@&slot2Timing=%@&slot3Timing=%@&slot4Timing=%@",slotTableName,@"10AMTo12PM",@"12PMTo2PM",@"2PMTo4PM",@"4PMTo6PM" 
```

有谁知道查询变量出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T09:37:53.373

您必须使用`'`字符串数据插入查询，所有其他查询也是如此。

```
 mysql_query("INSERT INTO $tableName (Slot,B1,B2,B3,B4,B5,B6,B7,B8,B9,B10,B11,B12)VALUES   
         ('1','$slot1','$slot1','$slot1','$slot1','$slot1','$slot1','$slot1','$slot1','$slot1','$slot1','$slot1','$slot1')"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T09:38:13.953

检查它的值，`$slot1`如果它是空的，它不会插入它会显示错误。

最好放`'$slot1'`单引号并尝试

```
mysql_query("INSERT INTO $tableName (Slot,B1, B2,B3,B4,B5,B6,B7,B8,B9,B10,B11,B12)
             VALUES ('2','".$slot2."','".$slot2."','".$slot2."','".$slot2."','".$slot2."','".$slot2."','".$slot2."','".$slot2."','".$slot2."','".$slot2."','".$slot2."','".$slot2."')"); 
```

# ios - 只有在 UIUserInterfaceIdiomPad 下运行时才支持 UISplitViewController

> ID：15020948
> 
> 赞同：2
> 
> 时间：2013-02-22T09:35:50.500
> 
> 标签：ios, xcode, ipad

不要将此标记为重复。我面临的问题完全不同。如果它尝试在 iPad 5.1 模拟器中启动，则会出现此问题。我在我的应用程序中使用拆分视图控制器。仅当它是 iPad 时，我才创建拆分视图的实例。在 下检查此条件`idiomPad`。

```
if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
      [window addSubview:splitViewController.view];
   else
      [window addSubview:[navigationController view]]; 
```

即使代码在 idiomPad 下，应用程序在显示启动画面后也会崩溃。它也不会来`didfinishlaunchingwithoptions`。拆分视图代码在应用程序`didfinishlaunchingwithoptions`方法中。启动画面是 default.png。

不知道为什么它在来之前就崩溃了`didfinishlaunching`。

注意：我正在尝试在 iPad 中启动。所以它应该可以正常工作。此代码适用于 iPhone 5.1、6.0 和 iPad 6.0 模拟器。iPad 5.1 模拟器的唯一问题。

应用目标：通用部署目标：4.2

# jquery - 我应该在 jQueryMobile 中使用 jQuery Ajax api 吗？

> ID：15020951
> 
> 赞同：3
> 
> 时间：2013-02-22T09:36:00.690
> 
> 标签：jquery, ajax, cordova, jquery-mobile, web

我正在使用 HTML5、CSS3、JavaScript 和 jQueryMobile 制作一个移动 Web 应用程序，并使用`Phonegap`.

我是所有网络事物的新手，我想知道，当我将 jQueryMobile 用于 UI 时，我可以使用 jQuery api 进行 Ajax 调用，还是 jQueryMobile 有它自己的工具。

我需要使用 Ajax 与外部 Web 服务交互，我将从数据库中获取（获取）和更新（获取/发布）。

换句话说，jQueryMobile 是否支持所有 jQuery api，或者我是否还必须在我的应用程序中单独包含 jQuery。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T09:38:36.697

使用/**`$.ajax`**创建**`AJAX`**调用时， jQuery 函数是标准的。**`jQuery`****`jQuery Mobile`**

工作**`jsFiddle`**示例：http: [//jsfiddle.net/Gajotres/jLdFj/](http://jsfiddle.net/Gajotres/jLdFj/)

```
$('#index').live('pagebeforeshow',function(e,data){ 
    $.ajax({url: "http://api.themoviedb.org/2.1/Movie.search/en/json/23afca60ebf72f8d88cdcae2c4f31866/The Goonies",
        dataType: "jsonp",
        jsonpCallback: 'successCallback',
        async: true,
        beforeSend: function() {
            $.mobile.showPageLoadingMsg(true);
        },
        complete: function() {
            $.mobile.hidePageLoadingMsg();
        },
        success: function (result) {
            ajax.parseJSONP(result);
        },
        error: function (request,error) {
            alert('Network error has occurred please try again!');
        }
    });         
}); 
```

有几点需要考虑：

*   **`$.ajax`**在页面转换期间不应使用调用，因为可能会出现页面闪烁
*   通过调用动态生成的所有数据**`AJAX`**必须随后增强为页面标记，这是我关于此主题**`jQuery Mobile`**的博客**[文章。](http://www.gajotres.net/jquery-mobile-and-how-to-enhance-the-markup-of-dynamically-added-content/)**或者可以在**[这里](https://stackoverflow.com/a/14550417/1848600)**找到。
*   显示动态生成的内容时，必须在正确的页面事件期间附加它，最好的一个是**`pageboforeshow`**事件。要了解有关**`jQuery Mobile`**页面事件的更多信息，请查看此**[文章](http://www.gajotres.net/document-onpageinit-vs-document-ready/)**。

# c++ - 向量迭代器：'operator=' 不匹配

> ID：15020954
> 
> 赞同：7
> 
> 时间：2013-02-22T09:36:05.640
> 
> 标签：c++, iterator, stdvector

考虑到下面第一个代码片段中的代码 C++，我得到了第二个片段中指示的编译错误。看起来我在遍历向量实例时做错了。你能告诉我如何克服这些编译问题吗？谢谢。代码中标记了第 171 行。

**片段 1（代码）**

```
#include <string>
#include <vector>
#include <iterator>

class VipAddressSetEntity : BaseEntity
{
public:
      VipAddressSetEntity() : BaseEntity() { }
      VipAddressSetEntity(std::string &uuid, std::string &name) : BaseEntity(uuid, name) { }

      VipAddressSetEntity(const VipAddressSetEntity &copyin)
      {
       setUUID(copyin.getUUID());
       setName(copyin.getName());

       std::vector<VipAddressEntity>::iterator iter;
               /* LINE 171 is the following*/
       for( iter = copyin.mVipAddressList.begin(); iter !=   copyin.mVipAddressList.end(); iter++ )
       {
                addVipAddress(*iter);
       }
      }

      VipAddressSetEntity operator = (const VipAddressSetEntity &rhs)
      {
        setUUID(rhs.getUUID());
        setName(rhs.getName());

        std::vector<VipAddressEntity>::iterator iter;
        for( iter = rhs.mVipAddressList.begin(); iter != rhs.mVipAddressList.end(); iter++ )
        {
                addVipAddress(*iter);
        }

        return *this;
       }

       void addVipAddress(VipAddressEntity &entity)
       {
        mVipAddressList.push_back(entity);
           }

       VipAddressEntity & getVipAddress(std::string uuid)
       {
        std::vector<VipAddressEntity>::iterator iter;
        for( iter = mVipAddressList.begin(); iter != mVipAddressList.end(); iter++ )
        {
            if(iter->getUUID() == uuid)
            {
               return  *iter;
            }
        }

            return NULL;
         }

         const std::vector<VipAddressEntity>& getVipAddressList() const { return  mVipAddressList; }

 private:
    std::vector<VipAddressEntity> mVipAddressList;

}; 
```

**SNIPPET 2（编译输出）**

```
 Entity.hpp: In copy constructor   ‘ECLBCP::VipAddressSetEntity::VipAddressSetEntity(const ECLBCP::VipAddressSetEntity&)’:
 Entity.hpp:171:44: error: no match for ‘operator=’ in ‘iter =    copyin.ECLBCP::VipAddressSetEntity::mVipAddressList.std::vector<_Tp,   _Alloc>::begin<ECLBCP::VipAddressEntity, std::allocator<ECLBCP::VipAddressEntity> >()’
 Entity.hpp:171:44: note: candidates are:
 In file included from /usr/include/c++/4.7/bits/stl_algobase.h:68:0,
                  from /usr/include/c++/4.7/bits/char_traits.h:41,
                  from /usr/include/c++/4.7/string:42,
                  from Entity.hpp:11:
 /usr/include/c++/4.7/bits/stl_iterator.h:710:11: note:  __gnu_cxx::__normal_iterator<ECLBCP::VipAddressEntity*,   std::vector<ECLBCP::VipAddressEntity> >&  __gnu_cxx::__normal_iterator<ECLBCP::VipAddressEntity*,   std::vector<ECLBCP::VipAddressEntity> >::operator=(const   __gnu_cxx::__normal_iterator<ECLBCP::VipAddressEntity*,   std::vector<ECLBCP::VipAddressEntity> >&)
 /usr/include/c++/4.7/bits/stl_iterator.h:710:11: note:   no known conversion for     argument 1 from ‘std::vector<ECLBCP::VipAddressEntity>::const_iterator {aka  __gnu_cxx::__normal_iterator<const ECLBCP::VipAddressEntity*,  std::vector<ECLBCP::VipAddressEntity> >}’ to ‘const  __gnu_cxx::__normal_iterator<ECLBCP::VipAddressEntity*,   std::vector<ECLBCP::VipAddressEntity> >&’ 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-22T09:39:15.770

`copyin`是一个`const VipAddressSetEntity`，所以`copyin.mVipAddressList`也是`const`。调用`begin`a`const std::vector<VipAddressEntity>`会给你一个不可变类型的迭代器`std::vector<VipAddressEntity>::const_iterator`。只要确保你`iter`的也是那种类型，你就可以很好地分配它：

```
std::vector<VipAddressEntity>::const_iterator iter; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T09:39:07.777

在这条线上：

```
for( iter = copyin.mVipAddressList.begin(); iter !=   copyin.mVipAddressList.end(); iter++) 
```

您不能分配`std::vector<VipAddressEntity>::iterator`from`copyin.mVipAddressList.begin()`因为`copyin`是 const。改用 a `const_iterator`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-22T09:39:24.843

`copyin`是一个常量引用。您应该使用 a`const_iterator`进行迭代。

# c# - 导入大量xml文件

> ID：15020958
> 
> 赞同：1
> 
> 时间：2013-02-22T09:36:16.810
> 
> 标签：c#, xml, sql-server-2008, sqlbulkcopy

将具有不同架构的多个 xml 文件（例如：30000）导入到 Sql Server 2008 的最佳方法是什么？

我目前正在遍历每个文件，将数据加载到`datatable`并`SqlBulkCopy`用于插入数据，但这需要很长时间（大约 1.5 小时）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T10:24:47.563

这不应该花这么长时间。据我估计，你有大约 600MB 的数据；您应该能够毫无困难地接近 10MB/s 或*至少*1MB/s - 这意味着 1-10 分钟应该很容易实现。

该怎么办：

*   确定哪个部分花费了这么长时间
*   列出可能的瓶颈
*   测试每个理论，直到找到罪魁祸首
*   实施解决方法。

没有更多细节，很难准确，但我可以推测：

*   `SqlBulkCopy`通常很快，因此您的插入可能不是瓶颈。您可以比数据表快一点，但这可能不是问题。
*   `DataTable`s 可以有“索引”；即主键和约束。这些实施效率非常低 - 这些肯定会导致问题。
*   虽然`SqlBulkCopy`速度很快，但最好是*多*行。如果您只复制每个 1 个文件`SqlBulkCopy`，则意味着 30000 次调用，并且在数据库端可能至少有 30000 个 fsync。您应该只使用一个`SqlBulkCopy`.
*   您的数据库可能对您插入的行有索引或约束；这些会严重限制性能 - 检查数据库负载。
*   .NET 中的大多数 xml 阅读器都相当快，但单个线程上的 10MB/s 可能会推动它。如果您的访问模式特别糟糕（例如，加载一个完整`XmlDocument`文件并使用许多低效循环和/或 XPath 进行查询），您可能会遇到 CPU 负载问题。
*   20KB 的文件相当小。如果您从 HDD 上读取这些数据，要达到 1MB/s，您需要每秒读取 50 个数据，即延迟为 20 毫秒。这可能是一个问题，特别是如果文件不按顺序位于磁盘上。并行化可能会有所帮助，但 SSD 会有所帮助（两者都更好）。但是，您看到的性能远*低于*此，因此这可能不是您的主要瓶颈。

考虑到这一点，我将按此顺序查看以下内容

*   客户端上的磁盘负载（如果磁盘等待时间很长，请考虑 SSD 和并发）
*   CPU 负载 - 配置文件（低效解析或误用`DataTable`）
*   `SqlBulkCopy`实例 - 仅使用一个（每个线程）
*   数据库负载（尽可能删除任何索引，包括可能的聚集索引）

该命令的灵感来自检查此问题的难度。磁盘负载不太可能有问题，但检查起来很简单，因此您不妨从消除这种可能性开始。数据库模式问题并不是那么不可能，但要确定它们需要做更多的工作（它是哪个索引，我是否通过删除它来影响另一个工作流程？）所以我会检查最后一个。

# c# - 时间：2019-05-10 标签：c#winformcoolcolordialog

> ID：15020962
> 
> 赞同：3
> 
> 时间：2013-02-22T09:36:27.443
> 
> 标签：c#, winforms, visual-studio-2010, color-picker

我正在使用.net 4.0 处理winforms，我需要让用户选择一种颜色。默认的颜色选择器非常难看..有人知道有人喜欢winforms吗？

谷歌搜索我只发现了 wpf 表单，很酷的是：

[扩展的 wpf 控件](http://wpftoolkit.codeplex.com/wikipage?title=ColorPicker&referringTitle=Home)，但适用于 wpf ...

我希望用颜色做一个简单的圆圈，比如 Photoshop..

在我看来，我也希望是这样的：

![在此处输入图像描述](../Images/ef99eaf7238b9f1b4ded92ca0731c3d3.png)

或者更好的是：

![在此处输入图像描述](../Images/f24512e72954e3b8cd1306e4f6c9217f.png)

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T09:42:04.790

你可以看看`DevExpress`'`ColorEdit` [这里](http://documentation.devexpress.com/#windowsforms/clsDevExpressXtraEditorsColorEdittopic)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T09:54:25.747

您仍然可以使用 WPF 之一，您可以将其作为 Windows 窗体中的控件托管。WPF/Winforms 集成非常酷：您可以在这里阅读更多相关信息（实际上是在我的博客上）：[http ://sachabarbs.wordpress.com/2008/02/26/winforms-wpf-interop/](http://sachabarbs.wordpress.com/2008/02/26/winforms-wpf-interop/)

您可能需要稍微晃动 WPF 颜色选择器以公开颜色的属性，该属性可从托管 winforms 表单访问，您将显示为对话框

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-12-28T14:16:16.647

我正在寻找类似于问题的第一个屏幕截图的内容。我在[codeproject](https://www.codeproject.com/Articles/9959/Adobe-Color-Picker-Clone-Part-1)上找到的那个看起来正是你要找的。它基于 WinForms，并且包含几乎所有必需的控件。

![屏幕截图 - 颜色选择器 WinForms](../Images/01a3a11494e8a6fa5014d5063f4297e2.png)

# c# - 如何在 javascript 和 asp.net 中获取客户端 ID 值？

> ID：15020972
> 
> 赞同：1
> 
> 时间：2013-02-22T09:37:03.280
> 
> 标签：c#, javascript, asp.net, html

在我的 asp 页面中，我有三个文本和 2 个标签框。在文本框`onblur`事件中，我通过传递文本框 clientid 调用了一个 javascript 函数。但我无法从我传递的 id 中获取文本框或标签框值。

这是我的代码...

```
<script type="text/javascript">

    function num_validate(cid,cid1) {

        var patt = /^\d*(\.\d{1,2})?$/;
        if (cid1 == "t1") {
            var value=this.document.getElementById(cid).value; //failed
            this.document.getElementById(cid).focus(); //failed
            var ff = document.getElementById('<%= l1.ClientID %>').value);//failed
        }
 }

</script>

 <asp:TextBox ID="t1" runat="server" onblur="javascript:num_validate(this,'t1')">   </asp:TextBox>&nbsp;<asp:Label ID="l1" runat="server" Text="3"></asp:Label>

<asp:TextBox ID="t2" runat="server"  onblur="javascript:num_validate(this,'t2')"></asp:TextBox>&nbsp;
        <asp:Label ID="l2" runat="server" Text="5"></asp:Label>

  <asp:TextBox ID="t3" runat="server"  onblur="javascript:num_validate(this,'t3')"></asp:TextBox> 
```

我无法通过使用 cid、cid1 来获得文本框、标签框值...

请指导我摆脱这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T09:41:13.393

这是错误的

```
var value=this.document.getElementById(cid).value; //failed
this.document.getElementById(cid).focus(); //failed 
```

改为使用

```
var value=cid.value;
cid.focus(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T10:33:32.860

下面的代码是我尝试和工作的：

```
 <script type="text/javascript">

        function num_validate(element)
        {
            var Cid = element.getAttribute('id');
            var value;
            if(Cid = 't1')
            {
                value = element.value;
                alert(value);
            }

            else if(Cid = 't3')
            {
                value = element.value;
                alert(value);
            }
        }

</script>

   </head>

<body>

    <form id="form1" runat="server">
    <div>

  <asp:TextBox ID="t1" runat="server" onblur="num_validate(this, t1);">
  </asp:TextBox>&nbsp;

  <asp:TextBox ID="t3" runat="server"  onblur="num_validate(this,t3);"></asp:TextBox>

    </div>
    </form>
</body>
</html> 
```

如果它不起作用，您可以看看类似的情况@[如何将服务器控件的实际客户端 ID 传递给 javascript 函数？](https://stackoverflow.com/questions/1362338/how-do-i-pass-a-server-controls-actual-client-id-to-a-javascript-function). 希望有帮助。

# excel - 使用 if...then else 循环失败

> ID：15020973
> 
> 赞同：0
> 
> 时间：2013-02-22T09:37:04.277
> 
> 标签：excel, vba

我为命令按钮编写此代码以将用户窗体中的数据插入到 Excel 工作表中。问题出在我的循环上。我想对循环做的是当 的值`cells(i,2)`等于 的值时`strProduct(comboBox)`，我想在单元格（i，2）处插入新行，然后在新创建的行处插入新数据。如果 cells(i,2) 的值不等于 strProduct 的值，则继续 i 的下一个值。这是代码

```
Private Sub CmdEnter_Click()

    Dim strProduct As String
    Dim intCountData As Long

    strProduct = ComboBox1.Value
    intCountData = Worksheets("Input").Range("B31").Rows.Count

    For i = 32 To intCountData + 31

        If Worksheets("Input").Cells(i, 2) <> strProduct Then
            GoTo finish1:
        Else
            Rows(i).Select
            Selection.Insert Shift:=xlDown
            ActiveCell.Insert.Cells(i, 2) = ComboBox1
            Exit Sub
        End If
    finish1:
    Next

End Sub 
```

我开始 i=32 的原因是因为该行从第 32 行开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T10:27:50.233

```
Private Sub CommandButton1_Click()

    Dim strProduct As String
    Dim intCountData As Long
    strProduct = ComboBox1.Value
    lastrow = Range("a1000").End(xlUp).Row

    For i = 31 To lastrow

        If Worksheets(1).Cells(i, 2) = strProduct Then
            Rows(i).Select
            Cells(i, 2) = ComboBox1.Value
            GoTo finish1
            Exit Sub
        Else
            GoTo finish1
        End If
finish1:
    Next

End Sub 
```

# javascript - 为了单元测试，可以在 JavaScript 中创建大量类吗？

> ID：15020977
> 
> 赞同：1
> 
> 时间：2013-02-22T09:37:11.093
> 
> 标签：javascript, unit-testing

我来自应用单元测试的 Java 背景。单元测试适用于面向对象的语言，因此要在 JavaScript 中应用单元测试，我需要创建一堆类。然而，在 JavaScript 中这样做似乎是不自然的。你对此有何看法？我的意思是，如果我的 JavaScript 应用程序将有 50 个类，那可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T09:41:08.620

将它们存储在单个父对象中，也许`UnitTests`或者只是`Tests`这样它们就不会出现在全局范围内。否则，只要它不会进入生产代码，我就不会看到问题。

# java - 如何使用 Ajax 和 Struts2 将表单数据发送到 ActionSupport

> ID：15020981
> 
> 赞同：3
> 
> 时间：2013-02-22T09:37:15.373
> 
> 标签：java, ajax, json, hibernate, struts2

当我不使用 Ajax 时，使用相同的代码一切都很好。但是在这里使用 ajax 我得到了相同的 null 值 public String execute() throws Exception { String strAction = cartItemForm.getAction(); /*我在这里使用ajax调用得到null，但简单的stuts2获取我拥有的动作值`<s:hidden name="action" value="Add" id="action" />`意味着得到add */ return "success"; }

这是jsp

```
 <script type="text/javascript">
  function submitAjax()  
  {  
   JSONobj = {cartItem:{
     description : $("description").val(),
     price :$("price").val(),
     action : $("action").val(),
     quantity :$("quantity").val(),
   } };
   JSONstr = JSON.stringify(JSONobj);

   jQuery.ajax(
    {
        type: 'POST', 
        url: 'Cart.action', 
        data:JSONstr,
        dataType: 'json',
        async: false ,
        contentType: 'application/json; charset=utf-8',
        success: function(){window.alert("done");}
    });
}  

</script>
<s:form>
  <s:hidden name="modelNo"     value="%{#attr.productId}"                    />  
  <s:hidden name="description" value="%{#attr.productName}" id="description" />
  <s:hidden name="price"       value="%{#attr.listprice}"   id="price"       />
  <s:hidden name="action"      value="Add"                  id="action"      />

  <s:submit value="add to cart" cssClass="submit_button" theme="simple"      />
</s:form> 
```

这是struts.xml

```
 <action name="Cart" class="struts.cart.action.CartAction">
    <result type="json"/> 
 </action> 
```

这是我的行动课

```
 public class CartAction extends ActionSupport 
                        implements ModelDriven, Preparable, ServletRequestAware {
  private static final long serialVersionUID = -3670063011948002290L;
public  static final String ADD = "Add";
public  static final String DELETE = "Delete";
public  static final String UPDATE = "Update";  
public  static final String CART_SESSION = "Cart";

    private HttpServletRequest  request;
    private CartItemForm        cartItemForm;

    public String execute() throws Exception {
        String strAction = cartItemForm.getAction();//i am geting null here
        return "success";
    }

    public Object getModel() {
        // TODO Auto-generated method stub
        System.out.println("Cart getModel "+cartItemForm);
        return cartItemForm;
    }

    public void prepare() throws Exception {
        // TODO Auto-generated method stub
        System.out.println("Cart prepare "+cartItemForm);
        cartItemForm=new CartItemForm();
    }

    public void setServletRequest(HttpServletRequest  httpServletRequest) {
        // TODO Auto-generated method stub
        request = httpServletRequest;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T10:02:04.387

我不确定，如果我理解您的问题，这样做非常简单。这是使用 jquery 的可能解决方案：

```
<s:form id="myForm">
  <s:hidden name="modelNo" value="%{#attr.productId}"></s:hidden>  
  <s:hidden id="description" name="description" value="%{#attr.productName}"></s:hidden>
  <s:hidden id="price" name="price" value="%{#attr.listprice}"></s:hidden>
  <s:hidden id="action" name="action" value="Add"></s:hidden>
  <s:submit id="#submit" value="add to cart" cssClass="submit_button" theme="simple"></s:submit>
</s:form>

<script>
$("#submit").click(function(){
        var formData = $("#myForm").serialize(); //get all data from form
          //do the POST thingies
        $.ajax({
            type: "POST",
            url: "url_to_your_struts2_action",
            cache: false,
            data: formData,
            success: onSuccess,
            error: onError
        });

        return false;
});
</script> 
```

# ruby-on-rails - 评估红宝 石中的变量

> ID：15020987
> 
> 赞同：1
> 
> 时间：2013-02-22T09:37:42.747
> 
> 标签：ruby-on-rails, ruby

如果我有名为的数组：

```
test_1
test_2 
```

我有一个变量可以保存`1`或`2`。IE。`id`，如果 id 有值`1`，在这种情况下如何向该数组添加一些东西：

```
test_#{id} << "value" #-> Where id is 1 
```

它应该像这样执行：

```
test_1 << "value" 
```

更新 ：

test_1 和 test_2 是局部变量。

```
test_1 = []
test_2 = []

id = 1 
```

这该怎么做 ：

test_id 其中 id 是 id 的值

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T09:52:03.397

使用局部变量，您可以这样做：

```
test_1 = []
test_2 = []
eval("test_#{id}") << "value" 
```

您可以使用实例变量做得更好：

```
@test_1 = []
@test_2 = []
instance_variable_get("@test_#{id}") << "value" 
```

但处理这种情况的更好方法是使用以`id`为键的散列：

```
test = {1 => [], 2 => []}
test[id] << "value" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T09:52:36.157

对于这些情况，您应该`Hash`改用。

```
results = {}
results['test_1'] = []
results['test_2'] = []

# If we sure that id is in [1,2]. Otherwise we need add check here, or change `results` definition to allow unexisting cases. 
results["test_#{id}"] << 'value' 
```

# opengl - 检索驱动程序分配的样本数

> ID：15020988
> 
> 赞同：0
> 
> 时间：2013-02-22T09:37:48.367
> 
> 标签：opengl, opengl-3, multisampling

我正在开发使用多重采样纹理的应用程序。现在，我想检索驱动程序分配的实际样本数。例如，当我的应用程序要求 1X 多重采样纹理时，驱动程序合法地分配了 2X 多重采样纹理，我如何才能检索驱动程序合法分配的这个数字？我用 glGet 搜索了相应的参数，但没有找到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T10:07:52.320

[您可以通过查询`GL_TEXTURE_SAMPLES`从`glGetTexLevelParameteriv`](http://www.opengl.org/wiki/GLAPI/glGetTexLevelParameter)获取分配给特定纹理的样本数。不，我刚才没有将它插入到页面中。不关注[该页面的编辑历史](http://www.opengl.org/wiki_132/index.php?title=GLAPI/glGetTexLevelParameter&diff=8946&oldid=8945)；它一直都在。

# iphone - 如何在IOS中检查一个数字是NSInteger还是浮点数？

> ID：15020989
> 
> 赞同：0
> 
> 时间：2013-02-22T09:37:51.640
> 
> 标签：iphone, ios

我需要检查来自服务器的值是 NSString 、 NSInteger 还是 float。如果是字符串，我可以检查。但是我们如何区分浮点数和整数？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-22T09:41:39.190

这是怎么做

```
NSNumber * n = //from somewhere
if (strcmp([n objCType], @encode(float)) == 0) {
    NSLog(@"this is a float");
} else if (strcmp([n objCType], @encode(int)) == 0) {
    NSLog(@"this is an int");
} 
```

**编辑**

好的，让我们让它更通用

```
 NSNumber *anyNSObject = [NSNumber numberWithFloat:0.4];

    id obj = anyNSObject; //you can pass anything here as long as it is inherited from NSObject

    if ([obj isKindOfClass:[NSString class]]) {
        NSLog(@"This is string");
    }

    if ([obj isKindOfClass:[NSNumber class]]) {
        NSLog(@"This is NSNumber");

        if (strcmp([obj objCType], @encode(float)) == 0) {
            NSLog(@"this is a float");
        } else if (strcmp([obj objCType], @encode(int)) == 0) {
            NSLog(@"this is an int");
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T09:50:21.440

（我假设您正在从服务器解析一些字符串。并将其转换为本地的 int/float/string。）

客户端和服务器都必须就某些规范达成一致。例如，浮点数必须带有小数点。或者结果有一个更多的字段来描述具体类型。因为您无法从字符串值推断出实际类型。

详细地说，如果您从服务器看到“9.000”。你不知道它是 int 还是 float。但是如果你同意小数点的存在意味着浮点数。它会变成浮点数，但不是整数。你可以使用这个事实来制作你的解析器。

（重要）此外，从字符串中解析浮点数通常会出现数值错误。如果服务器的浮点精度低于客户端，则客户端无法获得准确的浮点值。您应该将其解析为定点而不是浮点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T09:57:09.533

简单的方法是：

```
NSRange range = [yourString rangeOfString:@"."];

if (range.length > 0){
  NSLog(@"Double value");
}
else {
  NSLog(@"Integer value");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-16T08:32:48.587

我就是这样做的。

```
- (BOOL)isFloatNumber:(NSNumber *)value {
    if ([[value stringValue] containsString:@"."]) {
        return YES;
    }
    return NO;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-22T09:47:47.150

双变量= 4.1；

```
if(ceil(var) == var){
      //Int value
    }else{
     //Float value
    } 
```

# shell - 如何降低后台进程的cpu利用率？

> ID：15020993
> 
> 赞同：1
> 
> 时间：2013-02-22T09:38:07.133
> 
> 标签：shell, unix, aix

我有一个 shell 脚本 这个脚本调用另一个在后台执行的脚本。然而，在后台运行的这个脚本会增加 CPU 利用率。我的任务是降低 CPU 利用率。请帮忙。我们如何通过 shell 脚本分叉一个进程？我试过 nohup 和命令

例子： -

Parent_script.sh 执行 child_script.sh & (在后台) 这个 child_script.sh 增加 CPU 利用率

注意：-child_script.sh 必须在后台强制运行，没有其他选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T09:43:40.123

看一下[`nice`](http://linux.die.net/man/1/nice)降低进程优先级的命令。

例如，要运行优先级最低的脚本，您可以运行：

```
nice -n 9 child_script.sh & 
```

请注意，这仅在您的机器有多个进程需要 CPU 可以提供的更多资源时才有效。另一方面，如果您的机器处于空闲状态，那么即使是最低优先级的进程也可以获得高达 99% 的 CPU。

如果您想限制进程的 CPU 使用率，即使机器上有可用的 CPU，请查看该[`cpulimit`](http://linux.die.net/man/1/nice)程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T13:01:47.697

限制资源的另一种方法是使用 WLM（工作负载管理器）。您可以将所有进程分配到不同的类中。每个班级都将获得优先级和处理器能力份额。您可以动态增加或减少特定类的处理能力。默认类包含 AIX 使用的进程。

为了能够根据脚本的内容（你在脚本中运行什么样的命令）来降低 child_script.sh 的处理能力，我需要查看内容。

# html - 如何显示从左开始的元素？

> ID：15020995
> 
> 赞同：1
> 
> 时间：2013-02-22T09:38:15.443
> 
> 标签：html, twitter-bootstrap

我是网络编程新手，遇到以下问题：

我希望从左边*开始显示数据。*也就是说，将其视为一个屏幕：

```
Screen                                                                       2332 
```

如果`2332`增加到`2339900`那么我的屏幕应该是：

```
Screen                                                                    2339900 
```

我有这样的代码：

```
 <table class="table">
        <tbody>
        <tr>
            <td><b>Units entered</b></td>
            <td>123</td>
        </tr>
        <tr>
            <td><b>Consumption charges</b></td>
            <td>23232323</td>
        </tr>
        <tr>
            <td><b>Fixed charges</b></td>
            <td>323232323</td>
        </tr>
        <tr>
            <td><b>Net Amount</b></td>
            <td>3223232332</td>
        </tr>
        </tbody>
    </table> 
```

我尝试添加`style="float: left;"`到我的`td`标签，但这对我没有帮助。

我怎么能做到这一点。

注意：我正在使用引导程序，如果引导程序支持它？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T09:44:57.543

[**在这里演示**](http://jsfiddle.net/nhf9J/)

只需使用以下`align="right"`类似...

```
<table class="table" width="100%">
            <tbody>
            <tr >
                <td><b>Units entered</b></td>
                <td align="right">123</td>
            </tr>
            <tr>
                <td><b>Consumption charges</b></td>
                <td align="right">23232323</td>
            </tr>
            <tr>
                <td><b>Fixed charges</b></td>
                <td align="right">323232323</td>
            </tr>
            <tr>
                <td><b>Net Amount</b></td>
                <td align="right">3223232332</td>
            </tr>
            </tbody>
        </table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T09:45:41.280

好吧，您可以做两件事（至少在我的脑海中！）：

1.  使用 Bootstrap 的脚手架：

    ```
    <div class="span12">
        <div class="row">
           <div class="span3"><strong>Units entered</strong></span>
            <div class="span3 offset6">123</span>
        </div>
    </div> 
    ```

2.  样式表：

HTML：

```
 <tr>
        <td><b>Units entered</b></td>
        <td class="align-right">123</td>
    </tr> 
```

CSS：

```
 .align-right { text-align:right; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T09:46:08.720

Bootstrap 在最新版本中内置了实用程序类“text-right”，因此您可以将该类应用于您的 TD。我的 jsfiddle 显示了实用程序类的作用，但您不必实际包含 css，因为 Bootstrap 已经拥有它。您只需要使用类名。

详细信息：http: [//twitter.github.com/bootstrap/base-css.html#typography](http://twitter.github.com/bootstrap/base-css.html#typography)

以下是你将如何做到这一点：http: [//jsfiddle.net/mPP6/](http://jsfiddle.net/mpPP6/)

```
 .text-right {
     text-align: right;
 }

<table width="100%">
        <tbody>
        <tr>
            <td><b>Units entered</b></td>
            <td class="text-right">123</td>
        </tr>
        <tr>
            <td><b>Consumption charges</b></td>
            <td class="text-right">23232323</td>
        </tr>
        <tr>
            <td><b>Fixed charges</b></td>
            <td class="text-right">323232323</td>
        </tr>
        <tr>
            <td><b>Net Amount</b></td>
            <td class="text-right">3223232332</td>
        </tr>
        </tbody>
    </table> 
```

PS我建议您将“b”标签换成“强”标签，或者甚至将一个类添加到您想要具有强文本的那些 TD 并通过 css 设置它：

```
.myclass {
    font-weight: bold;
} 
```

要覆盖 Bootstrap 的 .table 类，它将表格单元格内的所有内容都对齐到左侧，只需将此行添加到您的自定义 css 文件中。

```
.table .text-right {
    text-align: right;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T09:42:11.123

采用

```
<td align="left"> 
```

将左对齐单元格的内容。看着你的“屏幕”，数字似乎是正确对齐的？

# jquery - jquery无尽的动画问题

> ID：15020997
> 
> 赞同：1
> 
> 时间：2013-02-22T09:38:21.407
> 
> 标签：jquery, animation

我想创建一个非常简单的菜单，隐藏了一个 div“测试”，当我点击一个 div“trig”时，会显示测试。然后当我再次点击触发时，测试被隐藏了。它适用于第一次单击，然后当我再次单击触发时，动画播放 2 次，当我再次单击时，它播放 3 次，一次又一次。

我的代码是：

```
<div class="trig">trig</div>
<div class="test">test</div>

<script src="jquery.js"></script>
<script>
$(function () {

$('.test').hide();

function bis() { 
    $('.trig').click(function() { 
        var trig = $(this);
        var test = trig.next();
        test.show(300,function() {
            trig.click(function(){
                test.hide(300, function() { bis(); })
            ;});
        ;});
    });
};

bis();

});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T09:44:01.397

您的函数只工作一次，因为在那之后，如果您单击触发器，首先`$('.trig').click(function()`会调用显示您的测试，然后在`trig.click(function()`调用的回调中`show`也会立即再次隐藏您的测试。

使用该`toggle()`功能切换元素。

```
$('.trig').click(function() { 
    var trig = $(this);
    var test = trig.next();
    test.toggle(300);
}); 
```

**文档**：[http ://api.jquery.com/toggle/](http://api.jquery.com/toggle/)

**小提琴**：http: [//jsfiddle.net/suEg4/](http://jsfiddle.net/suEg4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T09:47:32.957

这是简单的事情...尝试如下...它会工作...

小提琴示例：http: [//jsfiddle.net/RYh7U/103/](http://jsfiddle.net/RYh7U/103/)

```
 $('.test').toggle();
 $('.trig').click(function() { 
     $('.test').toggle("slow");
}); 
```